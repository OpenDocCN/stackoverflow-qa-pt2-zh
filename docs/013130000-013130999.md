# StackOverflow 问答 13130000-13130999

# mysql - 如果某事>其他事，mysql插入记录

> ID：13130000
> 
> 赞同：0
> 
> 时间：2012-10-29T21:33:19.907
> 
> 标签：mysql, sql

我有一个查询

```
$query = "INSERT INTO `user`
    (`fname`,
    `lname`,
    `email`,
    `password`,
    `permission`,
    `idcustomer`)
         VALUES
    (
    '" . $firstname . "',
    '" . $lastname . "',
    '" . $email . "',            
    '" . $password . "',
    'admin',
    " . $idcustomer . "
    );"; 
```

现在，我只需要执行此查询，以下查询的结果是 > 0：

```
select (number_of_users - (select count(*) from user where idcustomer=2)) availableUsers 
   from customer where idcustomer=2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:45:00.910

只需使用 a`select`而不是`values(...)`：

```
$query = "INSERT INTO `user`
    (`fname`,
    `lname`,
    `email`,
    `password`,
    `permission`,
    `idcustomer`)
     select
    '" . $firstname . "',
    '" . $lastname . "',
    '" . $email . "',            
    '" . $password . "',
    'admin',
    " . $idcustomer . "
    from customer
    where idcustomer = 2
          and (number_of_users - (select count(*) from user where idcustomer=2)) > 0
    );"; 
```

# php - 在 mysql 中更新内部联接的困难

> ID：13130001
> 
> 赞同：0
> 
> 时间：2012-10-29T21:33:23.733
> 
> 标签：php, mysqli

我在使用此 MYSQL 语句更新一个表 [users] 中的值 [foodie_count=foodie_count-8] 时遇到一些问题，同时从另一个表 [food] 获取值 [food.id=?] 并且两个表都链接 [ users.id=food.userid]:

```
require_once('./includes/connection.inc.php');
$stmt = $db->prepare("UPDATE users SET foodie_count=foodie_count-8 FROM food INNER JOIN users ON users.id=food.userid WHERE food.id=?");
$stmt->bind_param('i',$delete_event);
$stmt->execute(); 
```

该语句不正确，并给我一个调用非对象上的成员函数 prepare() 的致命错误。

我查看了其他一些帖子，但没有具体看到我在写声明时出错的地方。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:44:18.103

MySQL`UPDATE JOIN`语法有点……不同。

这应该是与 MySQL 所需语法相同的查询；

```
UPDATE users
JOIN food 
  ON users.id=food.userid 
SET foodie_count=foodie_count-8 
WHERE food.id=? 
```

[简单的 SQLfiddle 测试场](http://sqlfiddle.com/#!2/49582/1)

# assembly - 68000 汇编中的逻辑表达式

> ID：13130003
> 
> 赞同：0
> 
> 时间：2012-10-29T21:33:33.297
> 
> 标签：assembly, logic, 68000

我之前发布了询问如何为这个程序定义十六进制常量的帖子，有人帮我解决了这个问题，现在我试图弄清楚这个程序是否运行正确。

该程序旨在计算逻辑表达式 X'Y + X'Z + YZ 并将结果放入 D0。程序完成后，我需要以二进制形式显示 D0 的内容。这就是我所拥有的（对齐在这里有点混乱，但它在汇编程序中对齐（EASy 68K））：

```
START:  MOVE    X,D0
    NOT D0
    MOVE    D0,D1
    MOVE    Y,D2
    AND D2,D0
    AND Z,D1
    AND Z,D2
    OR  D1,D0
    OR  D2,D0
EXIT:   BRA EXIT
X:  DC  $000F
Y:  DC  $0033
Z:  DC  $0055 
```

这就是我在各自的数据寄存器中得到的结果：

D0：00000071 D1：00000050 D2：00000011

忽略结果应该以二进制显示的事实......因为这是一个逻辑表达式，我只使用 AND 和 OR，D0 中的结果不应该是 1 还是 0？因为 X、Y 和 Z 都是非零常数，所以表达式的计算结果为 1 (YZ=1)...我在程序中出错了吗？还是我的理解错了？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:58:44.233

对寄存器中的每一位同时执行逻辑表达式。

在 C 语言中，例如整数 1,2,7 和 -12313 在 if (a) printf("True"); 的上下文中都被认为是相等的；否则 printf("False");

这同样适用于 if (a || b) printf("a 不为零或者 b 不为零或者甚至两者都不为零");

但是对于按位逻辑运算

```
00000000001 (binary) == 1 in decimal  
00000000010 (binary) == 2 in decimal  
------------------------------------  
00000000011 = 1 OR 2 == 3 in decimal
00000000000 = 1 AND 2 == 0 in decimal 
```

# javascript - Microsoft Surface：如何让 JavaScript 触摸/拖动事件不被浏览器拦截？

> ID：13130004
> 
> 赞同：6
> 
> 时间：2012-10-29T21:33:39.833
> 
> 标签：javascript, google-maps, touch, dom-events, windows-rt

我的网站上有一张 Google Maps 地图，但是当将它与 Microsoft Surface 平板电脑一起使用时，浏览器会拦截“平移”手势——它会尝试转到下一个浏览器窗口。如何允许浏览器忽略平移（拖动事件）以使地图正常运行？转到`maps.google.com`，地图是完全可拖动的，所以谷歌必须有一个解决方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T17:57:54.223

根据 MS 关于“指针和手势事件”的指南（此处：http: [//msdn.microsoft.com/en-us/library/ie/hh673557%28v=vs.85%29.aspx#Panning_and_zooming](http://msdn.microsoft.com/en-us/library/ie/hh673557%28v=vs.85%29.aspx#Panning_and_zooming)）您需要添加将“-ms-touch-action”规则设置为“none”的元素的 CSS 类，如下所示：

```
.disablePanZoom 
{
    -ms-touch-action: none; /* Shunt all pointer events to JavaScript code. */
} 
```

- 编辑 -

现在有一个无前缀的触摸动作属性，在 W3C 指针事件候选推荐中提出。

从[MSDN 文档](https://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx)：

从 Internet Explorer 11 开始，此事件的 Microsoft 供应商前缀版本 (-ms-touch-action) 不再受支持，并且可能会在未来的版本中被删除。相反，请使用无前缀名称 touch-action，这对于标准合规性和未来兼容性更好。

# csv - Weka 对 CSV 的预测

> ID：13130005
> 
> 赞同：11
> 
> 时间：2012-10-29T21:33:44.590
> 
> 标签：csv, weka, classification, output

我已经在 Weka 中训练了一个分类器，并且能够在测试数据上使用它。此外，我可以选择在此测试数据的日志窗口中显示分类器的预测。

但是，对于我当前的项目，能够以 CSV 格式获取这些数据对我来说会很方便。这在 Weka 中可能吗？只有在使用命令行时才有可能（我最终会朝着这个方向发展）？

我总是可以将整个缓冲区结果保存到文本文件中，但在这种情况下，我必须解析文件并删除所有“噪音”（这并不是真正的噪音，但你明白了）。

所以，总而言之，有没有办法将 Weka 对测试集的预测输出到 CSV 文件？

**编辑**：正如下面的答案所示，有一个选项可以做到这一点。但是，它只能在 Weka 3.7 及以上版本中找到！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-29T23:10:34.610

我假设您使用 Weka 的资源管理器。在`Classify`选项卡中单击`More options...`，然后单击`Output predictions`并选择`CSV`。现在单击显示的框`CSV`并打开一个窗口，您可以在其中填写写入 CSV 文件的属性。单击`outputFile`并选择一个文件夹并输入一个文件名（注意：您必须提供一个文件名）。运行新测试现在会将预测结果保存到您的 CSV 文件中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-22T08:55:02.507

在 Weka 3.6.x 中，您可以右键单击您的模型，选择“可视化分类器错误”并从那里保存数据（包括预测）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-17T02:06:57.917

如果您使用 weka 知识流来构建模型（比资源管理器更容易），您可以使用 CSV 数据接收器来保存为 CSV 文件。

# ember.js - 获取最新版本的 ember-data

> ID：13130010
> 
> 赞同：2
> 
> 时间：2012-10-29T21:34:09.693
> 
> 标签：ember.js, ember-data

构建 ember-data 需要 Ruby 1.9。在 MacOS Mountain Lion 上安装这个版本的 Ruby 并不是一件容易的事，所以我不想尝试这个。我想知道是否有其他人可以为我执行此构建并将构建的包发送给我。我目前尝试使用的版本是修订版 4，与存储库中的最新版本完全不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T18:55:13.137

github repo 有一个包含已构建版本的下载部分。 [https://github.com/emberjs/data/downloads](https://github.com/emberjs/data/downloads)

**更新**

构建可在[builds.emberjs.com上获得](//builds.emberjs.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:42:48.553

下面是在ember-data [http://cl.ly/1R0V1Y1c1p1d](http://cl.ly/1R0V1Y1c1p1d)`rake dist`的当前 master 分支上运行的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:21:17.657

我有一个 ember-data 示例项目，我尝试使用接近最新的构建来保持更新：

[https://github.com/dgeb/ember_data_example/tree/master/app/assets/javascripts/vendor](https://github.com/dgeb/ember_data_example/tree/master/app/assets/javascripts/vendor)

# c++ - 用于switch语句的奇怪行为c ++

> ID：13130011
> 
> 赞同：0
> 
> 时间：2012-10-29T21:34:24.090
> 
> 标签：c++, switch-statement

在过去的 3 个小时里，我一直在查看这段代码，但我很困惑。我很感激任何帮助，谢谢。

文件：UnsortedType.h

```
#include "ItemType.h"
class UnsortedType{

public:
    UnsortedType();
    void RetireveItem(ItemType& item, bool& found);
    bool InsertItem(ItemType item);
private:
    int length;
    ItemType info[MAX_ITEMS];
}; 
```

文件：UnsortedType.cpp

```
#include "UnsortedType.h"
#include <iostream>

UnsortedType::UnsortedType() {
    length = 0;
}

void UnsortedType::RetireveItem(ItemType& item, bool& found) {

    bool moreToSearch = true;
    int location = 0;
    found = false;

    moreToSearch = (location < length);

    while (moreToSearch && !found) {

        switch (item.ComparedTo(info[location])) {
            case LESS:
                location++;
                moreToSearch = (location < length);
                break;
            case GREATER:
                location++;
                moreToSearch = (location < length);
                break;
            case EQUAL:
                found = true;
                break;
        }
    }

    if (found) {
        item = info[location];
        std::cout << "Item " << item.getValue() << " has been retrieved." << std::endl;
    }

    else {
        std::cout << "Item " << item.getValue() << " has NOT found and has NOT been retrieved."
    }
}

bool UnsortedType::InsertItem(ItemType item) {

    if (length == MAX_ITEMS) {
        std::cout << "List is Full!" << std::endl;
        std::cout << "Item " << item.getValue() << " has not been added." << std::endl;
        return false;
    } else {
        std::cout << "Item " << item.getValue() << " added successfully." << std::endl;
        info[length] = item;
        length++;
        return true;
    }
} 
```

文件：ItemType.h

```
const int MAX_ITEMS = 40;
enum RelationType{LESS,GREATER,EQUAL};

class ItemType{

private:
    int value;

public:
    ItemType();
    ItemType(int value);
    RelationType ComparedTo(ItemType otherItem);
    void Initialize(int value);
    void printItem();
    int getValue();
}; 
```

文件：ItemType.cpp

```
ItemType::ItemType(){
    this->value=0;    
}

ItemType::ItemType(int value){
    this->value = value;
}

RelationType ItemType::ComparedTo(ItemType otherItem){

    if(value < otherItem.value){
        return LESS;
    }

    if(value == otherItem.value){
        return EQUAL;
    }

    if(value < otherItem.value){
        return GREATER;
    }    

}

void ItemType::Initialize(int value){
    this->value = value;
}

void ItemType::printItem(){
    std::cout << "Item Type: " << this->value <<std::endl;
}

int ItemType::getValue(){
    return this->value;
} 
```

请注意：在上面的代码中，我省略了一些我认为不相关的代码部分。因此，如果您复制/粘贴代码并运行它可能需要一些包含语句（如 iostream ）等等。

现在问题来了：

当我像这样运行主程序时：

```
UnsortedType unsortedType;

bool item3found = false;
ItemType item3(3);
unsortedType.InsertItem(item3);
unsortedType.RetireveItem(item3, item3found);

bool item1found = false;
ItemType item1(1);
unsortedType.InsertItem(item1);
unsortedType.RetireveItem(item1, item1found);

bool item2found = false;
ItemType item2(2);
unsortedType.RetireveItem(item2, item2found); 
```

没有问题。

输出是：

```
Item 3 added successfully.
Item 3 has been retrieved.
Item 1 added successfully.
Item 1 has been retrieved.
Item 2 has NOT found and has NOT been retrieved. 
```

但是，如果我先添加 item1 并检索 item1，然后添加 item3 并检索 item3，则 switch 语句会突然停止工作。

所以这是奇怪情况下的主文件：

```
UnsortedType unsortedType;

bool item1found = false;
ItemType item1(1);
unsortedType.InsertItem(item1);
unsortedType.RetireveItem(item1, item1found);

bool item3found = false;
ItemType item3(3);
unsortedType.InsertItem(item3);
unsortedType.RetireveItem(item3, item3found);

bool item2found = false;
ItemType item2(2);
unsortedType.RetireveItem(item2, item2found); 
```

在调试程序时，我一直在寻找：while (moreToSearch && !found) 并且代码不会转到任何 switch 语句。任何的想法？

这是奇怪情况下的输出：

```
Item 1 added successfully.
Item 1 has been retrieved.
Item 3 added successfully.

RUN FAILED (exit value 1, total time: 1s) 
```

任何大大挪用的帮助，我都快失去它了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:38:58.447

问题似乎出在您的`ComparedTo`成员函数中：

```
RelationType ItemType::ComparedTo(ItemType otherItem){

    if(value < otherItem.value){
        return LESS;
    }

    if(value == otherItem.value){
        return EQUAL;
    }

    if(value < otherItem.value){
        return GREATER;
    }    

} 
```

该`GREATER`案例的比较似乎不正确。对于这样的函数，您不允许通过它的可能路径不会返回值（即，使用、、、`if`）`else if`是有道理的`else`。此外，您可能希望打开所有编译器警告并将它们视为错误；这将有助于避免这样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:43:31.347

在您的`comparedTo`方法中，最后一个`if`语句与第一个语句相同 - 它应该有`>`而不是`<`.

事实上，我很惊讶您的编译器没有抱怨代码路径没有返回该函数的值的可能性。如果是这种情况，您可能需要考虑调高警告级别 - 否则，请*听*您的编译器，它通常不会告诉您您不需要知道的内容 :-)

那时我会`GREATER`无条件地返回^(（a）)，因为如果它既不小于也不等于，那是唯一剩下的可能性。换句话说，类似：

```
RelationType ItemType::ComparedTo (ItemType otherItem) {
    if (value < otherItem.value)
        return LESS;

    if (value > otherItem.value)
        return GREATER;

    return EQUAL;
} 
```

* * *

^((a))实际上，我可能会覆盖`<`,`>`和`==`运算符（以及其他必要的运算符），所以我可以只写`if (a < b)`我的代码，而不是`if (a.comparedTo(b) == LESS)`. 但这可能是你教育的下一步:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T21:39:37.047

```
RelationType ItemType::ComparedTo(ItemType otherItem){
    if(value < otherItem.value){
        return LESS;
    }
    if(value == otherItem.value){
        return EQUAL;
    }
    if(value < otherItem.value){         // !!!!
        return GREATER;
    }    
} 
```

`ComparedTo`函数不正确。如果`value > otherItem.value`它不进入任何`if`s 并且它会在不返回值的情况下脱落，从而导致未定义的行为。

# scala - 调用toSet时缺少参数类型错误？

> ID：13130013
> 
> 赞同：14
> 
> 时间：2012-10-29T21:34:24.620
> 
> 标签：scala, type-inference

尝试从字符列表中生成映射到其频率的唯一字符列表 - 例如：

```
List('a','b','a') -> List(('a',2), ('b',1)) 
```

因此，只需在控制台中乱搞，就可以了：

```
val l = List('a', 'b', 'c', 'b', 'c', 'a')       
val s = l.toSet                                  
s.map(i => (i, l.filter(x => x == i).size)) 
```

但是，仅通过组合最后两行来缩短不是吗？

```
l.toSet.map(i => (i, l.filter(x => x == i).size)) 
```

给出错误“缺少参数类型”。

有人可以解释为什么 Scala 抱怨这种语法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-29T21:45:49.813

当您说`val s = l.toSet`编译器认为唯一合理的类型`toSet`是`Char`-- 那是最具体的选择。然后，鉴于这`s`是一组`Char`，编译器意识到映射必须来自`Char`。

但在第二种情况下，它拒绝判断元素的类型是什么`toSet`。它可能是`Char`，但`AnyVal`也会像 一样工作`Any`。

```
l.toSet.map((i: Any) => (i, l.filter(x => x == i).size)) 
```

通常规则是编译器应该选择最具体的值。但是由于函数的参数是逆变的，所以当它们以 an`Any`作为参数时它们是最具体的，因此编译器无法决定。可能存在打破平局的规则（“更喜欢早期假设”），但没有实施。所以它需要你的帮助。

您可以在函数参数或`toSet`解决问题的方法上提供类型：

```
l.toSet.map((i: Char) => (i, l.filter(x => x == i).size))
l.toSet[Char].map(i => (i, l.filter(x => x == i).size)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:39:29.913

添加类型 [Char] 就`toSet`可以了。

```
scala> l.toSet[Char].map(i => (i, l.filter(x => x == i).size))
scala.collection.immutable.Set[(Char, Int)] = Set((a,2), (b,2), (c,2)) 
```

# javascript - 从 JavaScript 中的闭包返回对象字面量的详细信息

> ID：13130014
> 
> 赞同：6
> 
> 时间：2012-10-29T21:34:34.603
> 
> 标签：javascript, closures, google-closure-compiler

*背景*：我想重写一个库（我没有写）以避免闭包编译器使用高级选项生成警告。根据这个问题[JavaScript “this”关键字和闭包编译器警告](https://stackoverflow.com/questions/13109358/javascript-this-keyword-and-closure-compiler-warnings)，答案是使用闭包重写代码。目的是避免使用关键字`this`（生成编译器警告）。

由于库有许多函数，我认为最好让新闭包返回一个对象字面量。我想了解这是如何工作的以及任何可能的后果。因此，我写了以下（无意义的）示例作为学习经验（也在这里：[jsFiddle](http://jsfiddle.net/qnjGL/)）：

```
 var CurrencyObject = function(Amount) {
        var money = Amount;
        return {
              "toCents": function() {
                    money *= 100;
                    return money;
              },
              "toDollars": function() {
                    money /= 100;
                    return money;
              },
              "currentValue": money  // currentValue is always value of Amount
        };
  }; // end currencyObject

  var c1 = CurrencyObject(1.99); // what's the difference if the syntax includes `new`?

  alert('cents = ' + c1.toCents() + '\ncurrent money = ' + c1.currentValue + '\ndollars = ' + c1.toDollars() + '\ncurrent money = ' + c1.currentValue);

  var c2 = CurrencyObject(2.99);

  alert('cents = ' + c2.toCents() + '\ncurrent money = ' + c2.currentValue + '\ndollars = ' + c2.toDollars() + '\ncurrent money = ' + c2.currentValue);

  alert('cents = ' + c1.toCents() + '\ncurrent money = ' + c1.currentValue + '\ndollars = ' + c1.makeDollars() + '\ncurrent money = ' + c1.currentValue); 
```

**Q1**：为什么在调用*toCents后**currentValue*没有更新？（我猜这是因为*currentValue*是一个文字（？），它在 CurrencyObject 首次执行时被初始化。如果是这种情况，那么返回属性*currentValue*的语法是什么？）

 *****Q2**：这种语法（with `new`）`var c1 = new CurrencyObject(1.99);`不会以我可以检测到的方式改变代码的行为，但我认为存在差异。它是什么？

**Q3**：当*c2*被实例化时，是创建函数的副本还是*c1*和*c2*共享相同的（函数）代码？（如果正在创建函数的副本，我应该进行哪些更改以避免这种情况？）

TIA

顺便说一句：如果有人想知道，对象文字中的符号会被引用以避免让 Closure-Compiler 重命名它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:45:16.057

**Q1：**您创建了两个变量，其中包含`Amount`. 一个是在`money`闭包中捕获的变量中。另一个副本在`currentValue`您返回的对象的属性中。这些是彼此没有联系的独立变量，除了初始值`currentValue`是用变量的值初始化的`money`。

要解决此问题，您必须确定只有一个地方可以存储`currentValue`并在那里引用它。您只能`money`在闭包中使用局部变量，但这需要将`currentValue`属性更改为 getter 函数（检索`money`值）而不是直接数据属性。

或者，您可以摆脱`money`闭包变量而只使用该`currentValue`属性。这将要求您使用`this`在`toCents`and`toDollars`方法中获取该属性。在我看来，更简洁的方法是后者（`this`用于引用对象自己的属性）。我不知道为什么关闭不希望你这样做。

**Q2：**当您从构造函数显式返回对象时，构造函数是直接作为函数调用还是使用`new`运算符调用不再重要。正如您所观察到的，两者都会产生相同的结果。

**Q3：**由于你的函数是匿名的，每个新的实例化都会创建一个新的匿名函数对象。效率的高低取决于 javascript 的实现。您可以通过将函数声明为本地命名函数并引用该名称来使只有一个函数。然后，您可以保证没有创建新函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:51:22.190

**更新：**
我[分支了你的小提琴](http://jsfiddle.net/qnjGL/1/)，并添加了所有实例实际上将共享的几个方法（即：不会为每个实例创建新的函数对象）：例如，将金额转换为欧元或英镑的方法。我也省略了`money`变量，因为它根本没有必要。为了避免`this`尽可能多地使用，我还将返回的对象分配给闭包范围内的一个变量，以便所有方法都可以通过该变量名引用它们的父对象，而不必依赖`this`.
然而，共享方法仍然需要`this`偶尔使用，因为它们是在*“更高”*范围内声明的，并且无法访问`returnObject`变量，仅仅是因为它不存在于它们的范围内。如果您想知道，解除`returnObject`变量声明不是解决方案，因为您很快就会发现您不能创建超过 1 个货币对象的实例。
最后，我将*“构造函数”*的名称更改为以小写字母开头。从技术上讲，您的函数不再是构造函数，并且约定是它因此不能以大写字母开头...如果我在这里解释的任何内容或我建议的任何更改对您来说仍然不清楚，请告诉我.

未`currentValue`更新，因为您通过执行以下操作更改了`money`变量的值：`money *= 100;`。该语句将`money`值相乘*并将其分配给同一个变量*。由于这是一个原语，`currentValue`有它自己的这个值的*副本*，它们没有以任何方式链接。
意见建议：使用`return money/100;`保持值`money`不变。就目前而言，调用该`toCents`方法两次与将原始数量乘以 10,000 相同。要将`currentValue`每次调用更新/设置为您想要的任何内容，请添加：`this.currentValue = money*100;`，这有点危险，或者通过使用命名引用让您的闭包访问其自己的文字（这更安全，但更冗长） ：

```
var someClosure = function (amount)
{
    var money = amount;//redundant: you can use amount, it's preserved in this scope, too
    var me = {currentValue:amount,
              toCents: function()
              {
                  me.currentValue = money*100;//<-- use me to refer to the object itself
                  return amount/100;
              }
      };
      return me;
} 
```

没有理由使用`new`关键字：由这个*“构造函数”*创建的对象是一个对象字面量，它只有 1 个原型（`Object.prototype`，并且没有明确的构造函数名称）。添加`new`将`this`指向函数本身中的一个新对象，但由于您没有使用它，并且您的函数返回另一个对象，因此该对象永远不会返回。

严格来说：一些 JS 引擎会为每个新实例创建新的函数对象。一些现代对象对此进行了优化，实际上只会创建 1 个函数对象。为了安全起见，您可以在事物周围包装另一个闭包，以确保只有一个函数，而不管运行您的代码的引擎是什么：

```
var someObjectGenerator = (function()
{
    var oneOffFunction = function()
    {
        console.log('this function will only be created once');
    }
    return function(amount)
    {
        return {    foo:oneOffFunction,
                    toCents: function()
                    {
                        return amoutn/100;
                    }
                };
    };
}; 
```

当然，在具有`money`or`amount`变量的作用域之上创建的函数将无法访问该变量，因此在这种情况下，您必须创建新函数......但是 JS 对象*非常*便宜，所以不要太担心*。*
同样，大多数引擎都很好地处理了这个问题。***

# ruby - 我的 Rails 应用程序中的简单错误

> ID：13130017
> 
> 赞同：0
> 
> 时间：2012-10-29T21:34:44.200
> 
> 标签：ruby, ruby-on-rails-3

我的 Rails 应用程序中有一个错误，告诉我索引方法未定义。我创建了一个如此简单的表单，仅用于使用（新方法页面）插入数据，但由于某种原因它现在无法正常工作

```
class PeoplesController < ApplicationController

  def index

  end

  def new
    @people = People.new
  end

  def create
    @people = People.new(params[:@people])
    if @people.save
      redirect_to new_people_path
    end
  end
end

# new.html.haml
<h2>Hello there!</h2>
<hr >
<%= form_for @people do |f| %>
    FirstName:<%= f.text_field :first %><br />
    LastName:<%= f.text_field :last %><br />
    <%= f.submit %>
<% end %> 
```

这是错误代码：

```
 NoMethodError in Peoples#new

Showing /Users/kasim/Desktop/form/app/views/peoples/new.html.erb where line #3 raised:

undefined method `people_index_path' for #<#<Class:0x007fa33da58d58>:0x007fa34031c578>
Extracted source (around line #3):

1: <h2>Hello there!</h2>
2: <hr >
3: <%= form_for @people do |f| %>
4:  FirstName:<%= f.text_field :first %><br />
5:  LastName:<%= f.text_field :last %><br />
6:  <%= f.submit %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:25:03.030

[form_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)的文档说 form_for 调用相当于这个

```
<%= form_for @post, :as => :post, :url => post_path(@post), :method => :put, :html => { :class => "edit_post", :id => "edit_post_45" } do |f| %>
  ...
<% end %> 
```

请注意，url 属性正在调用命名路由。在您的情况下，命名路线似乎是 people_index_path。我会运行 rake 路线并确保有问题的命名路线确实存在。

# java - 我怎么把它写成一个列表java中的结构

> ID：13130029
> 
> 赞同：0
> 
> 时间：2012-10-29T21:35:39.817
> 
> 标签：java, collections, hashmap

我如何在java中将其写为列表结构

在这种情况下，我希望结构是这样的，其中选项也是另一个的关键

称为样式的哈希图

```
options[{"value":"0","label":"zero"},{"value":"1","label":"one"},
   {"value":"2","label":"two"}] 
```

在这里，如果我想访问 options[1].value 应该给我 1 和 options[2].label 应该给我两个。

我怎样才能做到这一点

```
LIst<Map<string><string[]>>? 
```

我也可以将“选项”数组作为我的哈希映射中的键之一传递吗

```
 protected Map<String, String[]> getValueProperties(int view, Field field) {
 Map<String, String> properties = new   HashMap<String,String[]>();             
        properties.put("options", []);
        return properties
    } 
```

我是处理这种格式数据的新手，任何指针都会很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:39:11.923

使用这个数据结构：

```
List< Map<String, String> > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:39:18.843

我认为这可以做到：

```
 List<Map<String,String>> options = new ArrayList<Map<String,String>>(); 
```

并填充为：

```
 Map<String, String> option1 = new HashMap<String, String>();
    option1.put("value", "0");
    option1.put("level", "zero");
    options.add(option1);
    Map<String, String> option2 = new HashMap<String, String>();
    option2.put("value", "1");
    option2.put("level", "one");
    options.add(option2);
    Map<String, String> option3 = new HashMap<String, String>();
    option3.put("value", "2");
    option3.put("level", "two");
    options.add(option3); 
```

**编辑：**您可以在循环中填充列表，如下所示：

```
 List<Map<String,String>> options = new ArrayList<Map<String,String>>();

   String[] levels = {"zero", "one", "two"};
   for(int indx = 0; indx <levels.length; indx++){
      Map<String, String> option = new HashMap<String, String>();
      option.put("value", String.valueOf(indx));
      option.put("level", levels[indx]);
      options.add(option);
   } 
```

# android - Layoutinflator充气多个按钮，如何使所有其他按钮在点击时不可见

> ID：13130032
> 
> 赞同：0
> 
> 时间：2012-10-29T21:35:58.800
> 
> 标签：android, button, layout-inflater

我有以下问题，我膨胀了一个包含 2 个按钮的布局。onClick 方法工作正常，一切运行顺利。但是，一旦单击这两个按钮中的一个，我想使每次膨胀的两个按钮都不可见。我知道如何使单击的按钮不可见，但是我找不到使相应按钮不可见的方法。任何帮助是极大的赞赏。
（如果有任何问题，这一切都在一个片段中完成）

```
for(i = 0; i < al.size(); i = i+6) { 
    TableLayout tl = (TableLayout)fragmentView.findViewById(R.id.myTableLayout);
    LayoutInflater inflater1 = (LayoutInflater)getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
    View itemView = inflater1.inflate(R.layout.element_request, null);  

    TextView t1 = (TextView) itemView.findViewById(R.id.tvdescription1);   
    t1.setText(al.get(i+2)); 

    TextView t2 = (TextView) itemView.findViewById(R.id.tvdescription2);   
    t2.setText(al.get(i+3));
    String id = al.get(i+1);

    accept = (Button) itemView.findViewById(R.id.baccept);
    accept.setTag(R.id.tvdescription1, id);
    String id1 ="a"+id;
    accept.setTag(R.id.tvdescription2, id1);

    decline = (Button) itemView.findViewById(R.id.bdecline);
    decline.setTag(R.id.tvdescription1, id);
    String id2 = "b"+id;
    decline.setTag(R.id.tvdescription2,id2);
    tl.addView(itemView, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

    accept.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            crid = v.getTag(R.id.tvdescription1);
            crid2 = crid.toString();
            ....Code...
            accept = (Button)v;
            accept.setVisibility(View.GONE);
            //----->set corresponding "decline" button also Invisible
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:52:29.270

你可以试试这个：

```
ViewGroup row = (ViewGroup) v.getParent();
Button dec = (Button) row.getChildAt(3); //If decline is the 4th member in the view
dec.setVisibility(View.GONE); 
```

# excel - Excel VBA 组合框清除

> ID：13130034
> 
> 赞同：1
> 
> 时间：2012-10-29T21:36:07.770
> 
> 标签：excel, excel-2010, vba

我正在使用excel 2010。

我想清除工作表中组合框的内容（清除为空白，就像未选择时一样），但我不知道如何选择和清除。我试图选择这样的组合框：

```
Sheet1.ComboBox1.Clear 
```

但是在 Sheet1 对象下没有“组合框”。唯一选择我的组合框是使用这个：

```
Sheet1.Shapes("Drop Down 24") 
```

我不知道如何选择和清除内容，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T20:02:17.150

作为一个真正的程序员，我更喜欢这种方式。这不取决于工作表上的excel“范围内存选择”。

```
Set oCombo = Sheets("SheetName").Shapes("cmbComboName").ControlFormat
For I = oCombo.ListCount To 1 Step -1
    oCombo.RemoveItem (I)
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:50:51.807

关于什么

```
ActiveSheet.Shapes.Range(Array("Drop Down 24")).Select
With Selection
    .ListFillRange = ""
End With 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T03:11:53.017

我假设您实际上希望将控件的显示值设为空白。在这种情况下，对于[Drop Down Object](http://msdn.microsoft.com/en-us/library/office/ff196004.aspx)，正如您所指示的那样，您将这样做：

```
Sheet1.Shapes("Drop Down 2").OLEFormat.Object.Value = 0 
```

其中 0 表示选择列表中的哪个元素 IE 无。

如果这不起作用，那么您可能实际上正在处理一个 ComboBox 在这种情况下您想使用它：

```
Sheet1.Shapes("Drop Down 2").OLEFormat.Object.Object.Value = "" 
```

请注意，此代码是在 Excel 2003（我在这台机器上拥有的）中创建和测试的，因此到达实际对象的路径在 Excel 2010 上可能略有不同。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T19:28:28.707

将下拉列表重置为空白单元格，但仍保留列表以供将来使用。

创建一个宏来清除单元格。在录制过程中，只需选择单元格并选择“清除内容”。这会将选择设置为空白单元格，但仍保留下拉列表。

例如，它看起来像这样。

```
Range("H3").Select
Selection.ClearContents 
```

# matlab - MATLAB 共同点

> ID：13130039
> 
> 赞同：2
> 
> 时间：2012-10-29T21:36:47.253
> 
> 标签：matlab, function, symbolic-math

我有这个 MATLAB 函数，它接收以下输入：

```
A=[0 1; 0 -1];
B=[0; 1]
C=[-1 1]; 
```

这是代码：

```
function [ T ] = transferMAtrix( A, B, C )
    s=sym('s');
    [n n] = size(A);
    sI=s*sym(eye(n));
    T=sym(C)*inv(sI-sym(A))*sym(B);

end 
```

transferMAtrix(A, B, C) 返回以下输出：

```
1/(s + 1) - 1/(s*(s + 1)) 
```

我的问题是：有没有一种方法可以使这些分数具有相同的分母，以便输出为：

```
(s-1)/(s*(s+1)) 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:48:55.460

```
>> syms s
>> T=1/(s + 1) - 1/(s*(s + 1))

T =

1/(s + 1) - 1/(s*(s + 1))

>> [n,d]=numden(T)

n =

s - 1

d =

s^2 + s

>> T=n/d

T =

(s - 1)/(s^2 + s) 
```

# ruby-on-rails-3 - 错误请求行 - 强制 ssl - rails

> ID：13130045
> 
> 赞同：18
> 
> 时间：2012-10-29T21:37:27.277
> 
> 标签：ruby-on-rails-3, ssl, configuration

我意外地将 force_ssl 设置为 true，然后在恢复为 false 并运行服务器时出现以下错误：

```
ERROR bad Request-Line 

WEBrick 1.3.1
INFO  ruby 1.9.3 (2012-02-16) [x86_64-darwin11.4.0]
WEBrick::HTTPServer#start: pid=472 port=3000
ERROR bad Request-Line `\x16\x03\x01\x00?\x01\x00\x00?\x03\x02P?Mf\x00??C?'. 
```

我怎样才能解决这个问题？

当我在本地主机上点击 http url 时，它会重定向到 https 并给我这个错误：

```
SSL connection error
Unable to make a secure connection to the server. This may be a problem with the server, or it may be requiring a client authentication certificate that you don't have.
Error 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL protocol error. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-15T15:46:47.973

答案可以在这里找到：[如何使用停用 Webrick 的 SSL](https://stackoverflow.com/questions/5943647/how-to-use-deactivate-webricks-ssl)

您可以通过清除浏览器 cookie 来修复它，它会再次工作。似乎身份验证信息保存在 cookie 中，并不断将我们的请求恢复为 HTTPS，但未正确进行身份验证，因此您收到该错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T21:39:36.547

也许你可以试试：

1)`rake tmp:clear`在命令行上停止 rails server 2)

然后重新开始，看看问题是否仍然存在。

更新：也许您也可以尝试清除浏览器上的任何缓存内容/历史内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-29T18:34:54.657

我通常最终使用不同的资源管理器，即：Safari、Firefox 等。因为清除 cookie 并不能解决我的问题（至少在使用 Chrome 时）

# mysql - 未编译 DataColumn 中的产品表达式，显示错误为“找不到列 [max]”。

> ID：13130047
> 
> 赞同：2
> 
> 时间：2012-10-29T21:37:33.253
> 
> 标签：mysql, c#-4.0, ado.net

运行代码时出现错误“**找不到列 [max]**。” 但我已将最大和最小列添加到数据集中的表中

```
MySql.Data.MySqlClient.MySqlConnection mycon = new MySqlConnection(GetConnectionString());
    if (mycon.State != ConnectionState.Open)

        {

            string sqlCat = "SELECT * FROM out_of_mark_table";
            string sqlProd = "SELECT * FROM scord_mark_table";

            MySqlDataAdapter da = new MySqlDataAdapter(sqlCat, mycon);
            DataSet ds = new DataSet();

            try
            {
                mycon.Open();
                da.Fill(ds, "out_of_mark_table");

                da.SelectCommand.CommandText = sqlProd;
                da.Fill(ds, "scord_mark_table");
            }
            finally
            {
                mycon.Close();
            }

            DataRelation relat = new DataRelation("CatProds", ds.Tables["out_of_mark_table"].Columns["test_id"], ds.Tables["scord_mark_table"].Columns["test_id"]);
            ds.Relations.Add(relat);

            DataColumn count = new DataColumn("Products (#)", typeof(int), "COUNT(Child(CatProds).test_id)");
            DataColumn max = new DataColumn("Most Expensive Product", typeof(decimal), "MAX(Child(CatProds).total)");
            DataColumn min = new DataColumn("Least Expensive Product", typeof(decimal), "MIN(Child(CatProds).total)");
            DataColumn no=new DataColumn("No");
            DataColumn IdCol = new DataColumn();
            min.Caption = "min";
            max.Caption = "max";
            string expr = "max * min";

            IdCol.ColumnName = "ID";
            IdCol.DataType = Type.GetType("System.Int32");
            IdCol.ReadOnly = true;
            IdCol.AllowDBNull = false;
            //IdCol.Unique = true;
            IdCol.AutoIncrement = true;
            IdCol.AutoIncrementSeed = 1;
            IdCol.AutoIncrementStep = 1;

            ds.Tables["out_of_mark_table"].Columns.Add(count);
            ds.Tables["out_of_mark_table"].Columns.Add(max);
            ds.Tables["out_of_mark_table"].Columns.Add(min);
            ds.Tables["out_of_mark_table"].Columns.Add(IdCol);
            DataColumn sum = new DataColumn("Sum of", typeof(int), expr, MappingType.Attribute);
            **ds.Tables["out_of_mark_table"].Columns.Add(sum);**
            IdCol.SetOrdinal(0);
            GridView1.DataSource = ds.Tables["out_of_mark_table"];
            GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:42:24.433

您已将字幕设置为“Max”和“Min”，但`DataColumns's`标识符是`Ordinal`或[`ColumnName`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.columnname.aspx)。您已将`ColumnName`via[构造函数](http://msdn.microsoft.com/en-us/library/0bdkcbb6.aspx)设置为

`"Most Expensive Product"`和`"Least Expensive Product"`

所以使用

```
string expr = "[Most Expensive Product] * [Least Expensive Product]"; 
```

反而。

# python - 查找重复的文件名，并且只使用 python 保留最新的文件

> ID：13130048
> 
> 赞同：2
> 
> 时间：2012-10-29T21:37:43.963
> 
> 标签：python, list, duplicates

我有 +20 000 个文件，如下所示，都在同一个目录中：

```
8003825.pdf
8003825.tif
8006826.tif 
```

如何在忽略文件扩展名的情况下找到所有重复的文件名。

澄清：我指的是重复文件是具有相同文件名的文件，而忽略了文件扩展名。我**不在乎**文件是否不是 100% 相同（例如 hashsize 或类似的东西）

例如：

```
"8003825" appears twice 
```

然后查看每个重复文件的元数据，只保留最新的。

类似于这篇文章：

[保留最新文件并删除所有其他文件](https://stackoverflow.com/questions/11732465/keep-latest-file-and-delete-all-other)

我想我必须创建一个所有文件的列表，检查文件是否已经存在。如果是这样，那么使用 os.stat 来确定修改日期？

我有点担心将所有这些文件名加载到内存中。并想知道是否有更蟒蛇的做事方式......

Python 2.6 视窗 7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T22:28:22.700

您可以通过`O(n)`复杂性来做到这一点。`sort`具有`O(n*log(n))`复杂性的解决方案。

```
import os
from collections import namedtuple

directory = #file directory
os.chdir(directory)

newest_files = {}
Entry = namedtuple('Entry',['date','file_name'])

for file_name in os.listdir(directory):
    name,ext = os.path.splitext(file_name)
    cashed_file = newest_files.get(name)
    this_file_date = os.path.getmtime(file_name)
    if cashed_file is None:
        newest_files[name] = Entry(this_file_date,file_name)
    else:
        if this_file_date > cashed_file.date: #replace with the newer one
            newest_files[name] = Entry(this_file_date,file_name) 
```

`newest_files`是一个字典，文件名不带扩展名作为键，命名元组的值包含文件完整文件名和修改日期。如果遇到的新文件在字典中，则将其日期与存储在字典中的日期进行比较，并在必要时进行替换。

最后，您有一本包含最新文件的字典。

然后您可以使用此列表执行第二遍。请注意，字典中的查找复杂度为`O(1)`. 所以查找`n`字典中所有文件的总体复杂度是`O(n)`.

例如，如果您只想保留最新的同名文件并删除其他文件，可以通过以下方式实现：

```
for file_name in os.listdir(directory):
    name,ext = os.path.splitext(file_name)
    cashed_file_name = newest_files.get(name).file_name
    if file_name != cashed_file_name: #it's not the newest with this name
        os.remove(file_name) 
```

* * *

正如**Blckknght**在评论中所建议的那样，您甚至可以避免第二遍并在遇到新文件时立即删除旧文件，只需添加一行代码：

```
 else:
        if this_file_date > cashed_file.date: #replace with the newer one
            newest_files[name] = Entry(this_file_date,file_name)
            os.remove(cashed_file.file_name) #this line added 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:44:25.063

首先，获取文件名列表并对其进行排序。这将使所有重复项彼此相邻。

然后，去掉文件扩展名并与邻居进行比较，[`os.path.splitext()`](http://docs.python.org/2/library/os.path.html#os.path.splitext)这[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)可能在这里有用。

将重复项分组后，选择要继续使用的那个`os.stat()`。

最后你的代码可能看起来像这样：

```
import os, itertools

files = os.listdir(base_directory)
files.sort()
for k, g in itertools.groupby(files, lambda f: os.path.splitext(f)[0]):
     dups = list(g)
     if len(dups) > 1:
         # figure out which file(s) to remove 
```

您不必担心这里的内存，您正在查看大约几兆字节的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:45:48.880

对于文件名计数器，您可以使用[defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)存储每个文件出现的次数：

```
import os
from collections import defaultdict

counter = defaultdict(int)
for file_name in file_names:
   file_name = os.path.splitext(os.path.basename(file_name))[0]
   counter[file_name] += 1 
```

# c# - DirectoryInfo.EnumerateFiles(...) 导致 UnauthorizedAccessException （和其他异常）

> ID：13130052
> 
> 赞同：12
> 
> 时间：2012-10-29T21:37:52.137
> 
> 标签：c#, algorithm, .net-4.0

我最近需要枚举整个文件系统以查找特定类型的文件以进行审计。由于对要扫描的文件系统的权限有限，这导致我遇到了几个异常。其中，最普遍的是[UnauthorizedAccessException](http://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx)和令我懊恼的是[PathTooLongException](http://msdn.microsoft.com/en-us/library/system.io.pathtoolongexception.aspx)。

这些通常不会成为问题，除非它们使 IEnumerable 无效，从而使我无法完成扫描。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-29T21:37:52.137

为了解决这个问题，我创建了一个替换文件系统枚举器。尽管它可能并不完美，但它执行得相当快，并且捕获了我遇到的两个异常。它将查找与传递给它的搜索模式匹配的任何目录或文件。

```
// This code is public domain
using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using log4net;

public class FileSystemEnumerable : IEnumerable<FileSystemInfo>
{
    private ILog _logger = LogManager.GetLogger(typeof(FileSystemEnumerable));

    private readonly DirectoryInfo _root;
    private readonly IList<string> _patterns;
    private readonly SearchOption _option;

    public FileSystemEnumerable(DirectoryInfo root, string pattern, SearchOption option)
    {
        _root = root;
        _patterns = new List<string> { pattern };
        _option = option;
    }

    public FileSystemEnumerable(DirectoryInfo root, IList<string> patterns, SearchOption option)
    {
        _root = root;
        _patterns = patterns;
        _option = option;
    }

    public IEnumerator<FileSystemInfo> GetEnumerator()
    {
        if (_root == null || !_root.Exists) yield break;

        IEnumerable<FileSystemInfo> matches = new List<FileSystemInfo>();
        try
        {
            _logger.DebugFormat("Attempting to enumerate '{0}'", _root.FullName);
            foreach (var pattern in _patterns)
            {
                _logger.DebugFormat("Using pattern '{0}'", pattern);
                matches = matches.Concat(_root.EnumerateDirectories(pattern, SearchOption.TopDirectoryOnly))
                                 .Concat(_root.EnumerateFiles(pattern, SearchOption.TopDirectoryOnly));
            }
        }
        catch (UnauthorizedAccessException)
        {
            _logger.WarnFormat("Unable to access '{0}'. Skipping...", _root.FullName);
            yield break;
        }
        catch (PathTooLongException ptle)
        {
            _logger.Warn(string.Format(@"Could not process path '{0}\{1}'.", _root.Parent.FullName, _root.Name), ptle);
            yield break;
        } catch (System.IO.IOException e)
        {
            // "The symbolic link cannot be followed because its type is disabled."
            // "The specified network name is no longer available."
            _logger.Warn(string.Format(@"Could not process path (check SymlinkEvaluation rules)'{0}\{1}'.", _root.Parent.FullName, _root.Name), e);
            yield break;
        }

        _logger.DebugFormat("Returning all objects that match the pattern(s) '{0}'", string.Join(",", _patterns));
        foreach (var file in matches)
        {
            yield return file;
        }

        if (_option == SearchOption.AllDirectories)
        {
            _logger.DebugFormat("Enumerating all child directories.");
            foreach (var dir in _root.EnumerateDirectories("*", SearchOption.TopDirectoryOnly))
            {
                _logger.DebugFormat("Enumerating '{0}'", dir.FullName);
                var fileSystemInfos = new FileSystemEnumerable(dir, _patterns, _option);
                foreach (var match in fileSystemInfos)
                {
                    yield return match;
                }
            }
        }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

用法相当简单。

```
//This code is public domain
var root = new DirectoryInfo(@"c:\wherever");
var searchPattern = @"*.txt";
var searchOption = SearchOption.AllDirectories;
var enumerable = new FileSystemEnumerable(root, searchPattern, searchOption); 
```

如果人们觉得它有用，就可以免费使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-31T23:36:38.870

这是另一种方式，管理您自己的枚举迭代：

```
IEnumerator<string> errFiles=Directory.EnumerateFiles(baseDir, "_error.txt", SearchOption.AllDirectories).GetEnumerator();
while (true)
{
    try
    {
        if (!errFiles.MoveNext())
            break;
        string errFile = errFiles.Current;
        // processing
    } catch (Exception e)
    {
        log.Warn("Ignoring error finding in: " + baseDir, e);
    }
} 
```

# c# - asp.net gridview 打印

> ID：13130053
> 
> 赞同：0
> 
> 时间：2012-10-29T21:37:54.460
> 
> 标签：c#, javascript, asp.net, printing-web-page

我正在打印一个包含在面板中的 asp.net 中的 gridview - 它在 IE 中完美运行

1.  在 Opera 12.02 中，它似乎打印出我的主表单而不是打印页面？你知道这是为什么吗？
2.  在 Mozilla firefox 16.0.2 中，它只在打印预览中加载一页并打印那一页？你知道这是为什么吗？

我假设问题出在我的 javascript 中 - 如果需要，我可以发布标记，但希望这不是必需的。

感谢达摩 **javascript**

```
<script type="text/javascript">
        function PrintGridData(GridToPrint, PanelName) {
            try {
                var Grid = document.getElementById(GridToPrint);
                var printContent = document.getElementById(PanelName);
                //alert(printContent);
                if (Grid)  // See if the Grid Exists First
                {

                    if (Grid.rows.length > 0) { // See if the Grid contains any rows
                        var windowUrl = 'about:blank';
                        var UserLoggedIn = $("#lblUser").text()
                        var now = new Date();
                        var strDateTime = [[AddZero(now.getDate()), AddZero(now.getMonth() + 1), now.getFullYear()].join("/"), [AddZero(now.getHours()), AddZero(now.getMinutes())].join(":"), now.getHours() >= 12 ? "PM" : "AM"].join(" ");
                        var Database = 'ProductionDatabase';
                        var windowName = 'Report';
                        var AuditPrintDetailEverypage =  UserLoggedIn + ' Time : ' + strDateTime ;
                        var AuditPrintDetailLastPage = '      System Report ' + ' Source Database: ';
                        var WinPrint = window.open(windowUrl, windowName, 'left=300,top=300,right=500,bottom=500,width=1000,height=500');
                        WinPrint.document.write('<' + 'html' + '><head><link href="assets/css/Print.css" rel="stylesheet" type="text/css" /><title>' + AuditPrintDetailEverypage + '</title> </head><' + 'body  style="background:none !important"' + '>');
                        WinPrint.document.write(printContent.innerHTML);
                        WinPrint.document.write('          ' + AuditPrintDetailLastPage);
                        WinPrint.document.write('<' + '/body' + '><' + '/html' + '>');
                        WinPrint.document.close();
                        //alert(printContent.innerHTML);
                        //alert(WinPrint.document);
                        if (window.opera) {
                        //alert('opera browser detected')
                           window.onload = window.print();
                            //window.onload = WinPrint.print();
                            //WinPrint.close();
                        }
                        else {

                            WinPrint.focus();
                            WinPrint.print();
                            WinPrint.close();
                        }
                    }
                    else { // No Results to print 
                        document.getElementById('lblErrorCode').innerHTML = '-1';
                        document.getElementById('lblErrorMessage').innerHTML = 'You have no Results to print. Please run a report.';
                        document.getElementById('lblExMessage').innerHTML = '-1';
                        var modal = $find("modalPopupExtenderError");
                        modal.show();
                    }
                }
                else { // No Grid to print 
                    document.getElementById('lblErrorCode').innerHTML = '-1';
                    document.getElementById('lblErrorMessage').innerHTML = 'You have no Grid to print. Please run a report.';
                    document.getElementById('lblExMessage').innerHTML = '-1';
                    var modal = $find("modalPopupExtenderError");
                    modal.show();
                    return;
                }

            }
            catch (err) {
                //alert(err);
                document.getElementById('lblErrorCode').innerHTML = '-1';
                document.getElementById('lblErrorMessage').innerHTML = err;
                document.getElementById('lblExMessage').innerHTML = '-1';
                var modal = $find("modalPopupExtenderError");
                modal.show();           
                return;
            }
        }
        function AddZero(num) {
            try {
                return (num >= 0 && num < 10) ? "0" + num : num + "";
            }
            catch (err) {
                //alert(err);
                document.getElementById('lblErrorCode').innerHTML = '-1';
                document.getElementById('lblErrorMessage').innerHTML = err;
                document.getElementById('lblExMessage').innerHTML = '-1';
                var modal = $find("modalPopupExtenderError");
                modal.show();
                return;
            }
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:18:16.573

window.onload = window.print(); 应该是 window.onload = window.print; 我的CSS也溢出了：隐藏；哪个歌剧和 Mozilla 不喜欢所以我删除了这些

现在它工作正常，谢谢达摩

# c# - 使用jQuery获取数据属性

> ID：13130059
> 
> 赞同：1
> 
> 时间：2012-10-29T21:38:18.567
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4

现在，请记住，我只是试图通过在`ready`此处使用事件来确保代码正常工作。我只是想确保我期望的数据被 jQuery 拉取。我也试过这个`load`事件。

最后，我想使用`load`or`ready`事件最初设置图像，然后当然使用该`hover`事件在悬停时更改该图像。

我已经在这里尝试了很多关于 SO 的答案，但似乎无法让它发挥作用，所以希望你们都能帮助我。

JavaScript：

```
$(document).ready(function () {
    $("#submenumain-link").ready(function () {
        alert($(this).data()["selectedimage"]);
        alert($(this).data()["hoverimage"]);
    });

    $("#submenumain-link").hover(function () {
        alert($(this).data("selectedimage"));
        alert($(this).data("hoverimage"));
    });
}); 
```

HTML：

```
<li id="submenumain-link"
    data-selectedimage="some-image.png"
    data-hoverimage="some-other-image.png"> 
```

但无论出于何种原因，`alert`消息只是状态未定义。我在这里错过了什么吗？

## 编辑

请注意，如果我将这些相同`alert`的语句放在悬停中，它会按预期工作。我可以使用什么事件来进行初始化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:41:04.353

```
$(this).data('selectedimage'); 
```

你不需要括号 []

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:41:18.990

问题是您的 .ready() 调用。如果您想等到加载某些内容，则应该使用[加载事件，但在这种情况下，它是一个已经存在的 li 元素，因此您的代码应该是：](http://api.jquery.com/load-event/)

```
$(document).ready(function() {
    var test = $("#submenumain-link");
    alert(test.data('selectedimage'));
    alert(test.data('hoverimage'));

    test.hover(function() {});
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T22:06:17.667

真正的问题是`ready`不应该以这种方式使用。该`ready`事件只能用于确保 DOM 已准备就绪 - [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

所以从技术上讲，在 DOM 内部`document.ready`，所有的 DOM 都已准备就绪，并且应该可用于这些类型的事情。里面`document.ready`， 的值是`this`指`document`元素，所以需要实际抓取`li`元素。你的代码应该是这样的：

```
$(document).ready(function () {
    var li = $("#submenumain-link");
    alert(li.data()["selectedimage"]);  // or li.data("selectedimage")

    li.hover(function () {
        //alert($(this).data("selectedimage"));
        //alert($(this).data("hoverimage"));
    });
}); 
```

[http://jsfiddle.net/XN2LV/](http://jsfiddle.net/XN2LV/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T21:41:33.957

它应该是`alert($(this).data("selectedimage"));`

看这里：[HTML5 数据-* 属性](http://api.jquery.com/data/#data-html5)。

# javascript - 在 Firefox 15 中使用 ajaxing onbeforeunload

> ID：13130060
> 
> 赞同：1
> 
> 时间：2012-10-29T21:38:19.220
> 
> 标签：javascript, jquery, ajax, windows, firefox

当我尝试执行 ajax“即发即弃”调用时，我遇到了 firefox 15.0.1 的问题。基本上当用户关闭页面或重定向时，我想执行一个 ajax 调用。在 Chrome 和 IE 中，当我在 Charles 中查看我的请求时，这似乎工作正常。但是，在 FireFox 中，我没有看到我的 ajax 调用。

```
jQuery(window).on('beforeunload',function(){
     jQuery.ajax({url:'some page', type: 'GET', dataType: 'script'});
}); 
```

当我包含 console.log 或警报时，我知道该事件有效。在卸载之前似乎没有足够的时间来执行这个 ajax 调用。有人对此有任何想法或有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:32:57.977

您可以创建另一个执行 ajax 调用的 html 页面，该页面将从 onbeforeunload 事件中调用。

该新页面将执行该操作并在完成后立即关闭。

另一种方法是使用同步 ajax 调用，如下所示：

```
jQuery.ajax({
     url:    'http://abcexample.com/getInfo',
     success: function(result) {
                  if(result.isOk == false)
                      alert(result.message);
              },
     async:   false
}); 
```

但是同步调用会等待调用完成，然后再继续。如果您想执行并忘记 ajax 调用的作用，那么第一种方法会很好用。

# php - 基本的 PHP 脚本不起作用

> ID：13130061
> 
> 赞同：0
> 
> 时间：2012-10-29T21:38:22.853
> 
> 标签：php, sql, database

我是 PHP 和 SQL 的新手，但我正在尝试创建一个简单的 PHP 脚本，允许用户登录到网站。由于某种原因它不起作用，我不明白为什么。每次我尝试使用正确的用户名和密码登录时，都会收到错误“用户名或密码错误”。数据库名和表名是正确的。

**连接.php：**

```
<?php
$db_host = 'localhost';
$db_name = 'app';
$db_user = 'root';
$db_pass = '';
$tbl_name = 'users'; 

// Connect to server and database 
mysql_connect("$db_host", "$db_user", "$db_pass") or die("Unable to connect to MySQL.");
mysql_select_db($db_name)or die("Cannot select database.");

// Info sent from form
$user = trim($_POST['user']); 
$pass = trim($_POST['pass']); 

// Protection against MySQL injection
$user = stripslashes($user);
$pass = stripslashes($pass);
$user = mysql_real_escape_string($user);
$pass = mysql_real_escape_string($pass);
$sql = ("SELECT * FROM $tbl_name WHERE username='$user' and password='$pass'");
$result= mysql_query($sql);

$count 0= mysql_num_rows($result);
if($count==1){

// Register $user, $pass send the user to "score.php"
session_register("user");
session_register("pass"); 
header("location:score.php");
}
else 
{
echo "Wrong Username or Password";
}
?> 
```

**分数.php：**

```
<?php
session_start();
if(!session_is_registered(user)){
header("location:login.html");
}
?>

<html>
<body>
<h1>Login Successful</h1>
</body>
</html> 
```

我希望有人能找到我的错误，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:49:46.963

仅供参考`session_register`，`session_is_registered`已弃用，将从 PHP 中删除。还尝试更改您的代码以使用 mysqli 或 PDO。很多[文章](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php)解释了如何做到这一点。最后，确保您对用户的输入（$_POST 数组）进行了转义，因为您永远不知道用户将发送什么，并且您不希望容易受到 SQL 注入的影响。您真的不想以明文形式存储密码，因此最好使用`SHA1`or `MD5`。

写完上面的代码，你的代码就变成了（可以`$_SESSION`直接使用全局数组）：

**连接.php：**

```
<?php
$db_host  = 'localhost';
$db_name  = 'app';
$db_user  = 'root';
$db_pass  = '';
$tbl_name = 'users'; 

// Connect to server and database 
mysql_connect($db_host, $db_user, $db_pass) or die("Unable to connect to MySQL.");
mysql_select_db($db_name) or die("Cannot select database.");

// Info sent from form
$user = trim($_POST['user']); 
$pass = trim($_POST['pass']); 

// Protection against MySQL injection
$user = stripslashes($user);
$pass = stripslashes($pass);
$user = mysql_real_escape_string($user);
$pass = mysql_real_escape_string($pass);
$sql  = "SELECT * FROM $tbl_name "
      . "WHERE username = '$user' "
      . "AND password = sha1('$pass')";

$result = mysql_query($sql);

// There was an extra 0 here before the equals
$count = mysql_num_rows($result);
if ($count==1)
{

    // Register $user, $pass send the user to "score.php"
    $_SESSION['user'] = $user;

    // You really don't need to store the password unless you use
    // it somewhere else
    $_SESSION['pass'] = $pass;
    header("location: ./score.php");
}
else 
{
    echo "Wrong Username or Password";
}
?> 
```

**分数.php：**

```
<?php
session_start();
if (!isset($_SESSION['user']))
{
    header("location:login.html");
}
?>

<html>
<body>
<h1>Login Successful</h1>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:43:06.153

几件事

将此行更改为我在其下方放置的带有错误检查的行

```
$result= mysql_query($sql);

$result= mysql_query($sql) or die(mysql_error()); 
```

很可能有一个 sql 错误并且你没有把它捡起来，所以结果总是有 0 行

也不确定这条线是否是错字，那里不应该有 0

```
$count 0= mysql_num_rows($result); 
```

# mysql - MySQL全文搜索查询缺少结果

> ID：13130068
> 
> 赞同：0
> 
> 时间：2012-10-29T21:39:28.783
> 
> 标签：mysql, full-text-search

我无法使用全文搜索查询选择所有必要的结果。

`SELECT i.strItemName FROM Item i WHERE MATCH( strItemName ) AGAINST ( 'big*' IN BOOLEAN MODE )`

出于某种原因，该查询仅返回可能的 83 个结果中的 5 个。我不明白它在做什么。它没有列出“大熊猫”、“大头男孩”等项目。

非常感谢任何建议！

谢谢阿明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:43:01.160

默认情况下，全文具有最小字长，通常为 4 个字符（请参阅[ft_min_word_length](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_ft_min_word_len)）。低于限制的任何内容都被视为噪音并被忽略。

要更改限制，请设置新值，然后您必须重建全文索引以获取现在落在可索引限制内的单词。

# javascript - HTML5 Filesystems API - 让用户将文件保存到他们的实际文件系统

> ID：13130070
> 
> 赞同：3
> 
> 时间：2012-10-29T21:39:34.100
> 
> 标签：javascript, html, filesystems

我知道[HTML5 Filesystem API](http://www.html5rocks.com/en/tutorials/file/filesystem/)让您可以访问沙盒文件系统。假设我将文件写入文件系统。是否可以让用户将该文件保存到他们的实际文件系统中？我希望能够告诉用户文件的写入位置，以便他们可以访问它，但这似乎是不可能的。

我唯一的想法是[将文件作为数据 url 读取](https://developer.mozilla.org/en-US/docs/DOM/FileReader#readAsDataURL%28%29)并创建一个用户可以保存的超链接，但这在文件大小方面存在可伸缩性问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T23:40:54.020

您可以使用从该`toURL`方法获得的 URL 作为链接的 href 属性的值，该链接另外还有一个[`download`](https://developer.mozilla.org/en-US/docs/HTML/Element/a#attr-download)属性。单击该链接将提示用户将内容保存在她的文件系统上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:35:05.343

引用[MDN - 关于文件系统 API 的基本概念](https://developer.mozilla.org/en-US/docs/DOM/File_APIs/Filesystem/Basic_Concepts_About_the_Filesystem_API)：

> 但是，您可以将文件从 Web 应用程序导出到桌面应用程序。例如，您可以使用文件 API、创建 blob、将 iframe 重定向到 blob 并调用下载管理器。

此外，[我之前链接到的页面](http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-filesystemurls)讨论了返回 url 形式的`FileEntry`方法。`toURL()``filesystem:`

[这是另一篇](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)关于如何让浏览器从 url 下载文件的文章。

# facebook - 支付回调返回错误：json_decoding返回值后应用返回值无效

> ID：13130072
> 
> 赞同：1
> 
> 时间：2012-10-29T21:39:34.587
> 
> 标签：facebook, json, callback, payment

我正在尝试在我的 Facebook 应用程序上使用积分进行购买。

FB.ui() 函数工作正常，付款回调 URL 和公司信息已设置。我用于支付回调的 php 脚本与 facebook 开发人员示例一样。

但是支付对话框不显示确认对话框，并且 FB.ui() 回调返回错误 1383046 和 error_message “抱歉，我们在处理您的付款时遇到了问题。您没有为此交易付费。”

它发生在 payment_get_items 方法下，所以我无法测试提醒方法。

我已经阅读了很多关于相同错误代码的帖子，但不知道我的问题是否源于我没有参加的其他细节

这是我的 php 脚本：

```
<?php

$app_secret = '***********************';

error_log($_POST['signed_request']);
// Validate request is from Facebook and parse contents for use.
$request = parse_signed_request($_POST['signed_request'], $app_secret);

// Get request type.

$request_type = $_POST['method'];

error_log($request_type, 0);

// Setup response.
$response = '';

if ($request_type == 'payments_get_items') {
// Get order info from Pay Dialog's order_info.
// Assumes order_info is a JSON encoded string.
 $order_info = json_decode($request['credits']['order_info'], true);

 // Get item id.
  $item_id = $order_info['item_id'];

  // Simulutates item lookup based on Pay Dialog's order_info.
  if ($item_id == 'real_item_id') {

$item = array(
  'title' => 'Title of my item',
  'description' => 'Description if my item',
  // Price must be denominated in credits.
  'price' => 5,
  'image_url' => 'my image url',
  'product_url' => 'my image url',
);

// Construct response.
$response = array(
           'content' => array (
               0 => $item,
               ),

            'method' => $request_type 
            );
// Response must be JSON encoded.

$response = json_encode($response);
error_log($response);
 }

} else if ($request_type == "payments_status_update") {
 // Get order details.
  $order_details = json_decode($request['credits']['order_details'], true);

  // Determine if this is an earned currency order.
 $item_data = json_decode($order_details['items'][0]['data'], true);
 $earned_currency_order = (isset($item_data['modified'])) ?
                         $item_data['modified'] : null;

 // Get order status.
  $current_order_status = $order_details['status'];

  if ($current_order_status == 'placed') {
    // Fulfill order based on $order_details unless...

    if ($earned_currency_order) {
     // Fulfill order based on the information below...
     // URL to the application's currency webpage.
     $product = $earned_currency_order['product'];
     // Title of the application currency webpage.
    $product_title = $earned_currency_order['product_title'];
    // Amount of application currency to deposit.
    $product_amount = $earned_currency_order['product_amount'];
    // If the order is settled, the developer will receive this
    // amount of credits as payment.
    $credits_amount = $earned_currency_order['credits_amount'];
   }

  $next_order_status = 'settled';

  // Construct response.
   $response = array(
              'content' => array(
                             'status' => $next_order_status,
                             'order_id' => $order_details['order_id']
                           ),
              'method' => $request_type
            );
// Response must be JSON encoded.
$response = json_encode($response);

} else if ($current_order_status == 'disputed') {
  // 1\. Track disputed item orders.
  // 2\. Investigate user's dispute and resolve by settling or refunding the order.
  // 3\. Update the order status asychronously using Graph API.

  } else if ($current_order_status == 'refunded') {
// Track refunded item orders initiated by Facebook. No need to respond.

  } else if ($current_order_status == 'settled') {

  // Verify that the order ID corresponds to a purchase you've fulfilled, then…

  // Get order details.
   $order_details = json_decode($request['credits']['order_details'], true);

   // Construct response.
   $response = array(
              'content' => array(
                             'status' => 'settled',
                             'order_id' => $order_details['order_id']
                           ),
              'method' => $request_type
            );
  // Response must be JSON encoded.
  $response = json_encode($response);

 } else {
   // Track other order statuses.

 }
  }

// Send response.
 echo $response;

  // These methods are documented here:
  // https://developers.facebook.com/docs/authentication/signed_request/
   function parse_signed_request($signed_request, $secret) {
    list($encoded_sig, $payload) = explode('.', $signed_request, 2);

 // decode the data
 $sig = base64_url_decode($encoded_sig);
 $data = json_decode(base64_url_decode($payload), true);

 if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
   error_log('Unknown algorithm. Expected HMAC-SHA256');
   return null;
 }

 // check sig
 $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
 if ($sig !== $expected_sig) {
  error_log('Bad Signed JSON signature!');
   return null;
  }

 error_log( print_r($data, true) );
 return $data;
}

function base64_url_decode($input) {
 return base64_decode(strtr($input, '-_', '+/'));
 }

 ?> 
```

查看 error_log 文档，当调用 FB.ui() 函数时，回调被调用了两次（如果支付对话框没有收到响应，就会发生这种情况）。但是在每次调用中，作为 var $response 发送的 json 对象都是正确的。

我的应用程序托管在 Heroku 上。付款回调首先在亚马逊的付费服务器上。之后我创建了一个免费的虚拟主机帐户，在那里上传了脚本，并将支付回调 url 定向到它，但错误仍然存​​在。

还有其他需要考虑的方面吗？？？

提前致谢！

注意：我在这篇文章中省略了 url 和 id，但回调脚本有真实信息；）

# c# - 在注入之前在工厂中调用类的初始化方法是否是一个好的设计选项

> ID：13130082
> 
> 赞同：5
> 
> 时间：2012-10-29T21:40:28.047
> 
> 标签：c#, refactoring, factory-pattern

我正在重构相当大部分的意大利面条代码。简而言之，它是一个很大的“类神”类，根据某些条件分为两个不同的过程。这两个过程都很冗长，并且有很多重复的代码。

所以我的第一个努力是将这两个进程提取到它们自己的类中，并将公共代码放在它们都继承自的父级中。

它看起来像这样：

```
public class ExportProcess
{
   public ExportClass(IExportDataProvider dataProvider, IExporterFactory exporterFactory)
   {
       _dataProvider = dataProvider;
       _exporterFactory = exporterFactory;
   }

   public void DoExport(SomeDataStructure someDataStructure)
   {
      _dataProvider.Load(someDataStructure.Id);

      var exporter = _exporterFactory.Create(_dataProvider, someDataStructure);

      exporter.Export();
   }
} 
```

我是 Mark Seemann 博客的狂热读者，在[这篇](http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling.aspx)文章中，他解释说这段代码有一种时间耦合的味道，因为有必要在数据提供程序处于可用状态之前调用它的 Load 方法。

基于此，并且由于对象被注入到工厂返回的对象中，我正在考虑更改工厂以执行此操作：

```
public IExporter Create(IExportDataProvider dataProvider, SomeDataStructure someDataStructure)
{
   dataProvider.Load(someDataStructure.Id);

   if(dataProvider.IsNewExport)
   {
      return new NewExportExporter(dataProvider, someDataStructure);
   }
   return new UpdateExportExporter(dataProvider, someDataStructure);
} 
```

由于名称“DataProvider”，您可能猜到 Load 方法实际上是在进行数据库访问。

有些东西告诉我，在抽象工厂的 create 方法中进行数据库访问的对象不是一个好的设计。

是否有任何指导方针、最佳实践或说这实际上是个坏主意？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:03:54.163

通常，工厂用于解析所请求接口或抽象类型的具体类型，因此您可以将消费者与实现分离。所以通常工厂只是去发现或指定具体类型，帮助解决依赖关系，实例化具体类型并返回它。但是，对于它可以做什么或不能做什么，没有硬性或快速的规则，但明智的做法是只为其解析和实例化具体类型所需的资源提供足够的访问权限。

工厂的另一个好处是向消费者隐藏与消费者无关的类型依赖项。例如，它似乎`IExportDataProvider`只在内部相关，并且可以从消费者中抽象出来（例如`ExportProcess`）。

但是，您的示例中的一种代码味道是如何`IExportDataProvider`使用的。它目前似乎工作的方式，你得到它的一个实例一次，但可以在后续使用中更改它的状态（通过调用`Load`）。这可能导致并发问题和损坏状态。由于我不知道该类型的作用或您的实际使用方式`IExporter`，因此很难提出建议。在下面的示例中，我进行了调整，以便我们可以假设提供者是无状态的，而是`Load`返回某种状态对象，工厂可以使用该对象来解析导出器的具体类型，然后向其提供数据。您可以根据需要进行调整。另一方面，如果提供程序必须是有状态的，您将需要创建一个`IExportDataProviderFactory`，在您的出口商工厂中使用它，并为每次调用出口商工厂的`Create`.

```
public interface IExporterFactory
{
    IExporter Create(SomeDataStructure someData);
}

public class MyConcreteExporterFactory : IExporterFactory
{
     public MyConcreteExporterFactory(IExportDataProvider provider) 
     {
          if (provider == null) throw new ArgumentNullException();

          Provider = provider;
     }

     public IExportDataProvider Provider { get; private set; }      

     public IExporter Create(SomeDataStructure someData)
     {
         var providerData = Provider.Load(someData.Id);

         // do whatever. for example...
         return providerData.IsNewExport ? new NewExportExporter(providerData, someData) : new UpdateExportExporter(providerData, someData);
     }
} 
```

然后消费：

```
public class ExportProcess
{
    public ExportProcess(IExporterFactory exporterFactory)
    {
        if (exporterFactory == null) throw new ArgumentNullException();

        _exporterFactory = factory;
    }

    private IExporterFactory _exporterFactory;

    public void DoExport(SomeDataStructure someData)
    {
        var exporter = _exporterFactory.Create(someData);
        // etc.
    }
} 
```

# facebook - 我们没有 SSL 站点，也无法获得。我该如何解决这个问题？

> ID：13130090
> 
> 赞同：0
> 
> 时间：2012-10-29T21:41:10.360
> 
> 标签：facebook, ssl, tabs, ssl-certificate

我的组织创建了一个 Facebook 选项卡，但由于我们的网站未通过 SSL 认证，该选项卡仅适用于某些计算机。我们不会很快获得 SSL 认证。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:50:23.580

您的问题可以解释为“我们如何在不需要提供 HTTPS 内容的情况下向用户显示 HTTPS 内容”——这是不可能的

为您的域购买证书并将其安装到服务器应该不难 - 证书的成本为 15-100 美元，具体取决于您获得它的位置以及几分钟（或几小时，我猜）重新配置 Web 服务器

显然，如果您在公司中有防火墙和严格的程序和流程的复杂设置，这将比单个开发人员花费的几分钟时间长得多，但在这种情况下，不支持 SSL 肯定也被视为一个大问题因为你会失去相当大比例的用户（来源：[大约一年前](http://www.quora.com/What-portion-of-Facebook-users-use-HTTPS)超过 10% 的用户- 现在更高了。）

# c# - 使用 Linq 和 Group by 将数据表转换为对象

> ID：13130094
> 
> 赞同：4
> 
> 时间：2012-10-29T21:41:32.723
> 
> 标签：c#, linq

我尝试将数据表转换为特殊格式的 JSON

DataTable中的数据如下

```
col1 col2 col3 col4
---------------------
 A    B    c    D1
 A    B    c    D2
 A    B    c    D3 
```

尝试将其转换为对象数组，例如

```
class obj {
 var col1;
 var col2;
 var col3;
 list<string> col4;
} 
```

我尝试使用 linq，但有点卡住了。

```
 var result = from row in dt.AsEnumerable()
                         group row by new
                         {
                             c1 = row["col1"],
                             c2 = row["col2"],
                             c3 = row["col3"]
                         }
                             into section
                             select new
                                 {
                                     item = section.Key

                                 }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T21:46:56.027

```
var result = from row in dt.AsEnumerable()
             group row by new
             {
                 c1 = r.Field<string>("col1"),
                 c2 = r.Field<string>("col2"),
                 c3 = r.Field<string>("col3")
             } into section
             select new
             {
                 col1 = section.Key.c1,
                 col2 = section.Key.c2,
                 col3 = section.Key.c2,
                 col4 = section.Select(r => r.Field<string>("col4")).ToList()
             }; 
```

# python - 如何安全地将 select 与 PyOpenSSL 连接对象一起使用？

> ID：13130099
> 
> 赞同：1
> 
> 时间：2012-10-29T21:42:25.723
> 
> 标签：python, pyopenssl

Python：Windows Vista 上的 2.7.2 Egenix PyOpenSSL：0.13.0

我正在尝试编写代理服务。基本上，代理服务侦听常规套接字和 SSL 套接字，在两者之间中继数据。

我能够半可靠地中继数据，但是当 SSL 套接字另一端的服务器完成发送数据时，我收到一个虚假信号，表明有更多数据可供读取。代码基本上是这样的：

```
(rs, ws, xs) = select.select([client, sslserver], [], [])
for r in rs:
    if r == client:
        # tons of client code
    elif r == sslserver:
        (rs, ws, xs) = select.select([sslserver], [], [], 0)
        print 'Reading server: %s, %s' % (len(rs), server.pending())
        while len(rs) > 0 or sslserver.pending() > 0:
            t = sslserver.read(sslserver.pending())
            # Do more useful stuff
            (rs, ws, xs) = select.select([sslserver], [], [], 0) 
```

`Reading server: 1, 0`使用此代码，我有时会在进入读取块之前看到文本。当我实际执行`t = sslserver.read(sslserver.pending())`时，结果是一个折腾。我经常遇到 EOF 异常（SSL.SysCallError()[1] == 'Unexpected EOF'）。问题是有时这是一个真正的 EOF，有时 SSL 只是没有提供任何数据。

但是，如果我将读取行更改为这样读取

```
t = sslserver.read(4096) 
```

这是我在大多数套接字读取代码中的习惯，而不是得到任何指示 EOF（常规套接字会！select 表示套接字已准备好读取。没有要读取的数据。所以立即不返回数据！），当没有数据可供读取时，我的代码就会阻塞。当然，这没有任何意义。毕竟，套接字已准备好读取。它应该只是阻塞，直到 EOF 通过解密阶段。

但事实并非如此。这是一个永久的块。

我有哪些选择？我现在绝对相信 select.select 对于 PyOpenSSL 套接字是不安全的。是否有其他方法可以使用常规套接字监视 SSL 套接字，或者我是否需要将 SSL 套接字移动到单独的线程并使用普通套接字将数据中继到我的主线程？

# javascript - Javascript“getSelection”仅当它在某个 div 中时

> ID：13130100
> 
> 赞同：2
> 
> 时间：2012-10-29T21:42:29.040
> 
> 标签：javascript

所以我试图收集人们在我们网站上选择的内容。目前，它无处不在，我不希望这样。如果他们在某个 DIV 中选择，我只想要它。

它基本上是对我找到的脚本的简单修改。

```
<script type="text/javascript">
function appendCopyright() {
    var theBody = document.getElementsByClassName("sbReview")[0];
    var selection;
    selection = window.getSelection();
    var copyrightLink = '<br /><br /> - Read more at: <a href="'+document.location.href+'">'+document.location.href+'</a><br />&copy;2012 <? printf($product. ' & ' .$spOrganization); ?>';
    var copytext = selection + copyrightLink;
    var extra = document.createElement("div");
    extra.style.position="absolute";
    extra.style.left="-99999px";
    theBody.appendChild(extra);
    extra.innerHTML = copytext;
    selection.selectAllChildren(extra);
    window.setTimeout(function() {
    theBody.removeChild(extra);
    },0);
}
document.oncopy = appendCopyright; 
```

我尝试修改`selection = window.getSelection();`但它只是破坏了它:(

基本上，我想要上面的代码，只能在某个 div 中工作，而不是整个`body`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:56:23.107

可能你不应该使用`document.oncopy`，而是尝试使用你感兴趣的 div 元素`div.oncopy`。`div`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:51:32.207

`var selection = getSelection().toString();`是您的解决方案 -`getSelection()`返回一个 Selection 对象，您只需使用`.toString()`方法即可获取字符串。Selection 对象的更多属性和方法可以在这里找到：[https ://developer.mozilla.org/en-US/docs/DOM/Selection](https://developer.mozilla.org/en-US/docs/DOM/Selection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:01:48.387

根据[**Mozilla JS 文档**](https://developer.mozilla.org/en-US/docs/DOM/Selection) ，选择类有一个方法[**containsNode**](https://developer.mozilla.org/en-US/docs/DOM/Selection/containsNode)。以下应该工作。

```
function appendCopyright() {
    var theBody = document.getElementsByClassName("sbReview")[0];
    var selection;
    selection = window.getSelection();
    // HERE's THE GOODS
    // set aPartlyContained to true if you want to display this
    // if any of your node is selected
    if(selection.containsNode(aNode, aPartlyContained)){
        var copyrightLink = '<br /><br /> - Read more at: <a href="'+document.location.href+'">'+document.location.href+'</a><br />&copy;2012 <? printf($product. ' & ' .$spOrganization); ?>';
        var copytext = selection + copyrightLink;
        var extra = document.createElement("div");
        extra.style.position="absolute";
        extra.style.left="-99999px";
        theBody.appendChild(extra);
        extra.innerHTML = copytext;
        selection.selectAllChildren(extra);
        window.setTimeout(function() {
            theBody.removeChild(extra);
        },0);
    }
}
document.oncopy = appendCopyright; 
```

# perl - 当我通过 perl 中的循环添加节点时，Set::IntervalTree 表现得很奇怪

> ID：13130109
> 
> 赞同：1
> 
> 时间：2012-10-29T21:43:01.150
> 
> 标签：perl, interval-tree

我正在尝试使用该[`Set::IntervalTree`](https://metacpan.org/module/Set%3a%3aIntervalTree)模块，如果我在循环中插入元素，我认为它会给我相同的节点指针。

如果我将它们一个接一个地依次插入到循环之外，则节点插入正常，并且`find`/`find_window`调用完美运行。但是在循环中添加的节点上，find 函数给出了奇怪的结果。

```
#!/usr/bin/perl

use Set::IntervalTree;
my $tree = Set::IntervalTree->new;

$tree->insert("60:70", 60, 70);
$tree->insert("70:80", 70, 80);
$tree->insert("80:90", 80, 90);

for(my $i = 0; $i < 60; $i=$i+10)
{
    $j = $i+10;
    print "$i".":"."$j\n";
    $tree->insert("$i".":"."$j", $i, $i+10);
}

print $tree->str;

my $results1 = $tree->fetch(25, 28);
my $window = $tree->fetch_window(25,250);
my @arr1 = @$results1;
print " @arr1 found.\n";

my $results2 = $tree->fetch(65, 68);
my @arr2 = @$results2;
print " @arr2 found.\n"; 
```

这是输出。检查节点指针..从循环中添加的指针具有相同的指针并且它们返回错误的间隔（我猜这是由于相同的指针值。）

```
Node:0x9905b20, k=0, h=9, mH=9  l->key=NULL  r->key=NULL  p->key=10  color=BLACK
Node:0x9905b20, k=10, h=19, mH=29  l->key=0  r->key=20  p->key=30  color=RED
Node:0x9905b20, k=20, h=29, mH=29  l->key=NULL  r->key=NULL  p->key=10  color=BLACK
Node:0x9905b20, k=30, h=39, mH=89  l->key=10  r->key=70  p->key=NULL  color=BLACK
Node:0x9905b20, k=40, h=49, mH=49  l->key=NULL  r->key=NULL  p->key=50  color=RED
Node:0x9905b20, k=50, h=59, mH=69  l->key=40  r->key=60  p->key=70  color=BLACK
Node:0x98c6270, k=60, h=69, mH=69  l->key=NULL  r->key=NULL  p->key=50  color=RED
Node:0x98fd138, k=70, h=79, mH=89  l->key=50  r->key=80  p->key=30  color=RED
Node:0x98fd078, k=80, h=89, mH=89  l->key=NULL  r->key=NULL  p->key=70  color=BLACK

 50:60 found.
 60:70 found. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:10:18.277

`insert`如果您从内部块调用，看起来您必须使用 Perl 标量变量。如果您使用插值字符串，它将被随后执行的块丢弃并覆盖。

这段代码似乎工作正常。请*始终* `use strict`在您的`use warnings`所有程序中 - 特别是那些您寻求帮助的程序。

```
#!/usr/bin/perl

use strict;
use warnings;

use Set::IntervalTree;
my $tree = Set::IntervalTree->new;

for (my $i = 0; $i <= 80; $i += 10) {
    my $name = sprintf '%02d:%02d', $i, $i+10;
    $tree->insert($name, $i, $i+10);
}

my $results1 = $tree->fetch(25, 28);
print "@$results1 found\n";

my $results2 = $tree->fetch(65, 68);
print "@$results2 found\n"; 
```

**输出**

```
20:30 found
60:70 found 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T22:56:35.390

我用过这个包。用于插入的 C++ 代码具有参数（&t、int、int）。这意味着 C++ 代码为第一个参数存储了指向 perl 数据的指针。使用标量并不是真正的解决方案。最终该值将被覆盖。我使用的解决方案是将 id 放入散列并将散列值作为 id 传递。这将保留 id 的 perl 数据。C++ 代码应复制 id 以保持其值。

```
$id = "$start:$end";
$rephash1{$id} = $id;
$repeats1{$scaffold} = Set::IntervalTree->new if (!defined($repeats1{$scaffold}));
$repeats1{$scaffold}->insert($rephash1{$id}, $start, $end); 
```

# python - 多端口网络应用

> ID：13130116
> 
> 赞同：3
> 
> 时间：2012-10-29T21:44:10.840
> 
> 标签：python, sockets, networking, process

我想创建一个可以在多个端口（例如：TCP:1234、TCP:5678 等）上运行的 python 网络应用程序。

所以我可以说 n 个套接字，每个套接字都侦听一个客户端连接。我编写了一个简单的网络应用程序，它侦听一系列端口，但是当我运行该应用程序时，它卡在了第一个套接字进程的侦听阶段！

当运行以侦听 N 个端口并且每个端口都等待客户端连接到它时，如何制作我的单个 python 程序。所有套接字都在同时运行和监听。

```
Socket/Process #1: Listening on TCP Port 5000
Socket/Process #2: Listening on TCP Port 5001
Socket/Process #3: Listening on TCP Port 5002
...
Socket/Process #N: Listening on TCP Port 6000 
```

欣赏任何想法。

```
#!/usr/bin/env  python

import socket

def getPortList():
    ports=[]
    nPort=int(raw_input("# how many ports you want? "))
    j = 0
    for i in range(0,nPort):
        ports.append(int(raw_input("Enter port number: ")))
        j+=1
    return ports

def myTCPSocket(port=5000):
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR,1)
    s.bind(("", int(port)))
    print ("\nWaiting for connections!\n")
    s.listen(5)
    (clientsock, clientaddr) = s.accept()
    print(clientaddr)

    data = "start"

    while len(data):
                clientsock.send("\nWelcome to Echo Server\n")
                data = clientsock.recv(1024)
                print ("Data sent is: ", data)
                clientsock.send(data)
                if data == "exit\r\n":
                        clientsock.close()

plst = getPortList()

for item in plst:
    myTCPSocket(item) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:07:41.127

侦听多个套接字实际上与侦听单个套接字没有什么不同。

您已经需要以某种方式处理侦听器套接字和所有客户端连接套接字。您可以通过以下方式做到这一点：

*   `select.select`围绕（或`poll`、`kqueue`、`epoll`等）编写一个循环。
*   使用标准库反应器`asyncore`。
*   使用第三方 reactor 或 proactor，例如 Twisted。
*   使用特定于操作系统的功能（例如，通过 PyObjC 使用 Cocoa 运行循环和服务器）。
*   为每个新连接创建一个线程。
*   为每个新连接创建一个子进程。

几乎所有这些方案也适用于处理多个听众。最简单的做法是将两者合二为一（例如，`select`处理所有侦听器和所有客户端套接字的单个循环，或者每个侦听器和客户端套接字的单独线程）。

出于性能或调试原因，您可能希望改用两层混合方法（例如，每个侦听器一个线程，每个侦听`select`器的所有客户端套接字都有一个循环，或者每个侦听器一个进程，每个侦听器都有一个线程用于每个客户端套接字）。但是，如果您没有任何充分的理由这样做，请不要增加复杂性。

[http://pastebin.com/QebZMKz3](http://pastebin.com/QebZMKz3)展示了一个简单的单一`select`实现。这是输出：

```
$ ./multiserve.py 22222 22223 &
(('127.0.0.1', 22222), ' listening')
(('127.0.0.1', 22223), ' listening')
$ echo 'abc' | nc localhost 22222
(('127.0.0.1', 22222), ' <- ', ('127.0.0.1', 64633))
(('127.0.0.1', 64633), ' <- ', 'abc\n')
(('127.0.0.1', 64633), ' EOF') 
```

如果您认为您实际上永远不需要同时处理两个客户端……好吧，您可能错了，但是……您可以使用上述大多数技术，而且可能稍微简单一些。例如，您可以在侦听器上进行选择，然后在返回循环之前同步进行接受和客户端套接字通信。或者您可以为每个侦听器创建一个进程或线程，但在每个侦听器中同步处理接受和客户端套接字通信。等等。

[http://pastebin.com/wLVLT49i](http://pastebin.com/wLVLT49i)显示了一个简单的示例，这似乎是您想要做的。由于它为每个套接字使用一个进程（通过`os.fork`），它确实允许不同端口上的同时连接；由于它不会在每个进程中异步执行任何操作，因此它不允许同时连接到同一个端口。（当然它是 POSIX 特定的，因为它使用`fork`.）

如果您首先想学习如何编写异步网络服务器，我建议您做两种不同的实现：`select`和线程。它们在概念上是基本的，并且相对容易编码。

首先，对于`select`，您必须了解事件循环的概念——事件是每个新的传入连接、现有连接上的每个传入网络数据包，甚至是每次您正在写入的管道畅通时。这里的棘手之处在于，与任何事件循环一样，您需要处理每个事件并在没有阻塞的情况下返回，并且不会花费太多的 CPU 时间。例如，对于回显服务器，您不能只在其他套接字上进行写入，因为其中一些可能很忙。因此，您必须将输出粘贴到每个套接字的写入缓冲区中，当您准备好时，他们将在未来通过事件循环运行时获得它。

同时，对于线程，每个连接的单独线程似乎使一切变得微不足道，但是当您需要将消息从一个线程回显到另一个线程时会发生什么？您要么需要某种形式的线程间通信，要么需要具有线程间同步的共享数据。因此，您可能`Queue`在每个套接字上都有一个 for writes，因此任何其他套接字的线程都可以将消息推送到队列中。

这些都不会像经过精心改造的反应器或前摄器那样好，但值得学习基础知识 - 特别是因为您将面临阻塞问题（来自`select`）和通信问题（来自线程) 使用任何解决方案，当您在更高级别工作时，它们会变得更加神秘和难以调试。

# perl - How to properly declare hash outside BEGIN block?

> ID：13130119
> 
> 赞同：2
> 
> 时间：2012-10-29T21:44:14.983
> 
> 标签：perl

Consider this simple program. Can you explain why the output is different after uncommenting the first two lines? What is happening with my hash with `use strict`? How to fix the program to work with `use strict`?

```
echo -e "key1\nkey2\nkey3" | perl -lne '
  #use strict; use warnings;
  #my %hash;
  BEGIN { 
    $hash{'key3'} = "value";
  }   
  chomp;
  if ($hash{$_}) {
    print "$_ matched";
  } else {
    print "$_ unmatched ";
  }
' 
```

Output:

```
key1 unmatched 
key2 unmatched 
key3 matched 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:53:25.080

`perl -ln` wraps the code so that you end up with

```
BEGIN { $/ = "\n"; $\ = "\n"; }
LINE: while (<>) {
    chomp;
    use strict; use warnings;
    my %hash;
    BEGIN { $hash{key3} = "value"; }
    ...
} 
```

Notice how you create a new `%hash` for every line? If you wanted to use `use strict;`, you'd use a package variable.

```
perl -lne'
    use strict; use warnings;
    our %hash;
    BEGIN { $hash{key3} = "value"; }
    ...
' 
```

Otherwise, you have to drop `-n`.

```
perl -le'
    use strict; use warnings;
    my %hash = ( key3 => "value" );
    while (<>) {
        chomp;
        ...
    }
' 
```

PS - As you may have noticed, it's useless to `chomp` when using both `-l` and `-n`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T21:51:43.670

Using the `-n` switch implictly puts your entire program inside a `while (defined($_=<ARGV>)) { ...` block, including your `my %hash` statement:

```
perl -MO=Deparse -lne '
  use strict; use warnings; my %hash;
  BEGIN {
    $hash{'key3'} = "value";
  }
  chomp;
  if ($hash{$_}) {
    print "$_ matched";
  } else {
    print "$_ unmatched ";
  }
'

BEGIN { $/ = "\n"; $\ = "\n"; }
LINE: while (defined($_ = <ARGV>)) {
    chomp $_;
    use warnings;
    use strict 'refs';
    my %hash;
    sub BEGIN {
        $hash{'key3'} = 'value';
    }
    &BEGIN;
    chomp $_;
    if ($hash{$_}) {
        print "$_ matched";
    }
    else {
        print "$_ unmatched ";
    }
}
-e syntax OK 
```

That is, `my %hash` is redeclared in each iteration of the loop. To keep this as a one-liner and without making it too cumbersome, consider declaring `our %hash` to make `%hash` a package variable.

# configuration - Solr 4 MySQL 导入

> ID：13130123
> 
> 赞同：0
> 
> 时间：2012-10-29T21:44:39.600
> 
> 标签：configuration, solr, migration

我正在尝试使用 MySQL 支持从 3.6 迁移到 Solr 4。以前在 solr 3.x 中，您可以将 mysql 驱动程序放入 /lib 文件夹中，我已经这样做了，但这似乎不起作用。

无法加载驱动程序：com.mysql.jdbc.Driver Processing Document #1 原因：java.lang.ClassNotFoundException：无法加载 com.mysql.jdbc.Driver 或 org.apache.solr.handler.dataimport.com.mysql。 jdbc.驱动

我需要在配置中的某处添加一些东西来查找这个文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T00:41:24.797

您需要为您的 jar 文件添加共享文件夹的路径。

在 solr.xml 中只需添加`sharedLib="/path/to/your/lib"`标签`<solr persistent="true">` ，然后你就完成了......

# unix - 在 unix 中删除奇怪的目录

> ID：13130126
> 
> 赞同：0
> 
> 时间：2012-10-29T21:44:58.343
> 
> 标签：unix, quotes, rm

我在删除 unix 中的某些文件夹时遇到了一些问题。

目录1：

```
?0\' 
```

目录 2：

```
-1\' 
```

我想递归地删除它们，比如

`rm -rf -1\'`

不确定如何转义引号、破折号和问号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:54:19.397

当它们是可疑字符时，您需要使用引号，然后在引号之外使用通配符。如果没有引号，这些角色会想要执行其他任务。

```
rm -rf -- *"\'" 
```

感谢 osgx 的评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:03:08.570

当心; `rm -fr`在对奇怪的目录名称执行任何操作之前，请仔细检查。

以破折号开头的文件名（目录名）的标准技巧`-`是在名称前加上前缀`./`，使其不再以`-`任何开头：

```
rm -fr ./-1?? 
```

另一个目录也许可以通过以下方式识别：

```
rm -fr ./?0?? 
```

我至少会运行：

```
echo ./-1?? ./?0?? 
```

在尝试`rm`命令之前，确保只选择正确的目录。`rm`如果您不确定该命令是否正在执行您想要的操作，则该命令很危险。

使用问号的表示法避免了必须引用问号、反斜杠和单引号，部分原因是怀疑终端上显示的可能不是文件系统中的名称。您可能需要做进一步的工作来识别名称，这样`ls | od -c`或类似的命令来验证目录名称的准确拼写。

# python - 如何根据当前的网络使 Fabric 使用不同的角色？

> ID：13130129
> 
> 赞同：3
> 
> 时间：2012-10-29T21:45:04.770
> 
> 标签：python, ssh, fabric

我想让一个任务根据我当前所在的网络使用一组不同的主机（角色）。如果我在我的服务器的同一个网络中，我不需要通过网关。

这是我的 fabfile.py 中的一个片段：

```
env.use_ssh_config = True
env.roledefs = {
    'rack_machines': ['rack4', 'rack5', 'rack6', 'rack7'],
    'external_rack_machines': ['erack4', 'erack5', 'erack6', 'erack7']
    }

@roles('rack_machines')
def host_type():
    run('uname -s') 
```

因此，对于我的任务`host_type()`，我希望它的角色是，`rack_machines`如果我与 , 等在同一个网络中`rack4`。`rack5`否则，我希望它的角色是`external_rack_machines`，因此通过网关访问这些相同的机器。

也许有一种方法可以单独使用 ssh 配置。`ssh_config`这也是我的文件的一个片段：

```
Host erack4
HostName company-gw.foo.bar.com
Port 2261
User my_user

Host rack4
HostName 10.43.21.61
Port 22
User my_user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:55:51.413

导入模块后会考虑角色定义。因此，您可以`fabfile`在导入时执行一些代码，检测网络并设置适当`roledefs`的 .

实现目标的第二种方法是使用“flag-task”。这是一项除了设置适当的角色定义之外什么都不做的任务。IE：

```
hosts = {
    "rack": ["rack1", "rack2"],
    "external_rack": ["external_rack1", "external_rack2"]
}

env.roledefs = {"rack_machines": hosts["rack"]}

@task
def set_hosts(hostset="rack"):
    if hostset in hosts:
        env.roledefs["rack_machines"] = hosts[hostset]
    else:
        print "Invalid hostset"

@roles("rack_machines")
def business():
    pass 
```

并以这种方式调用：`fab set_hosts:external_rack business`

# java - 数据库列大小约束的Textarea maxlength问题

> ID：13130133
> 
> 赞同：1
> 
> 时间：2012-10-29T21:45:39.287
> 
> 标签：java, html, database, textarea, newline

我一直在网上寻找支持，但我没有发现任何有用的东西。

我有一个包含**1500**个字符的大小约束的列的数据库表。我正在使用休眠作为数据库的 ORM。

我的问题是 HTML 文本区域中的**换行符**。在我的 HTML 表单中，我有一个**maxlength**设置为**1500**的 textarea 。在 HTML 文本区域中，**换行符**仅被视为**一个**字符。当我通过 servlet 提交表单时，**换行符**在 java中被视为**两个字符。**

**所以假设我已经用1500**个字符填写了 textarea ，其中包含 2 个**换行符**，java 将数据视为**1502**个字符传递。因此，当我将数据保存到数据库时，它超过了**1500 个**限制，因此违反了数据库列约束。

示例文本：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Vivamus in est eu augue facilisis viverra。Phasellus eu lectus a nisi feugiat aliquet quis ut velit。Nunc vehicula neque sat amet quam interdum viverra。Morbi aliquet consequat lorem non rhoncus。Sed m​​auris mi, scelerisque sit amet tempus molestie, dapibus vitae quam。Proin id massa velit，commodo facilisis velit。在 blandit, nibh quis auctor convallis, lectus nibh venenatis orci, quis dignissim sapien arcu eget erat。在 quis diam id mauris consectetur tempor sat amet sat amet justo。Donec egestas metus eu massa vestibulum ultrices。Quisque vitae scelerisque metus。Vestibulum vehicula mi id augue condimentum pellentesque。
> 
> Suspendisse tempus turpis lobortis turpis imperdiet vulputate。Fusce fringilla lorem et ligula feugiat id sodales nisi vehicula。Praesent gestas vestibulum ante，eget consequat magna molestie sat amet。Praesent egestas pharetra augue egestas imperdiet。Suspendisse ut elit augue，sit amet ornare nulla。Morbi cursus, diam at commodo gravida, elit lacus pulvinar lectus, vitae porttitor mauris sapien sed felis。前庭非 iaculis erat。Phasellus pharetra arcused dui porta tempus。Mauris lectus velit，cursus quis facilisis a，mattis rhoncus quam。Ut nisl nulla，malesuada imperdiet dictum id，sagittis quis orci。Duis bibendum pharetra quam eu pharetra。Fusce interdum nulla vel elit bibendum non pellentesque dui egestas。Praesent sed lacus sapien。Vesbulum id arcu neque, et faucibus lorem。福斯梅图斯。

*段落之间的间隙包含 2 个换行符*

我需要知道的是如何对**换行符**从 HTML 到 Java 进行不同的解释？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:50:37.613

您可以用`\r\n`行尾替换样式行`\n`尾：

```
str = str.replaceAll("(\\r)", ""); 
```

这应该只留下`\n`行尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:51:34.077

html 和 java 中的换行符是相同的：`\n`可能发生的情况是你在你的`textarea`

```
Quisque vitae scelerisque metus. Vestibulum vehicula mi id augue condimentum pellentesque.\n (1)
\n(2)
Suspendisse tempus turpis lobortis turpis imperdiet vulputate. Fusce fringilla lorem et ligula feugiat id 
```

# php - 一个页面上的两个提交按钮总是转到第一个操作页面

> ID：13130137
> 
> 赞同：0
> 
> 时间：2012-10-29T21:46:02.503
> 
> 标签：php, forms, button, submit

我有一个 php 页面，其中有两个提交按钮，它们是为了做同样的事情，但是当任何一个被按下时，它们只会转到“searchLN.php”。当我拿走按钮并且您只需在文本上按 Enter 键时，它就会转到正确的页面，我做错了什么？

```
<?php
    echo '<h1>Search Patients</h1>';
    echo '<td><form method="post" action="searchLN.php">';
echo 'Search By Patient Last Name :<input type="Text" name="searchPersonLN" class="button">';
    echo '<input type="Submit" name="searchPersonLN" class="button" value="Search" ';
echo '</form></td>';

    echo '<br>';

    echo '<td><form method="post" action="searchID.php">';
echo 'Search By Patient Number :<input type="Text" name="searchPersonID" class="button">';
    echo '<input type="Submit" name="searchPersonID" class="button" value="Search" ';
echo '</form></td>';
    echo '<br>';
    echo '<a href="index.php">Return To Main Menu</a>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:04:37.257

> ```
> echo '<input type="Submit" name="searchPersonLN" class="button" value="Search" '; 
> ```

您不会使用`>`or关闭您的输入`/>`，因此，下一行`</form>`不会关闭您的表单。

# android - Android将触摸事件从一个画廊传递到另一个画廊

> ID：13130138
> 
> 赞同：1
> 
> 时间：2012-10-29T21:46:14.777
> 
> 标签：android, gallery, touch-event

我有两个相对布局不同大小的画廊。后面的画廊比上面的画廊小，所以如果两个画廊的公共部分被触摸，我希望后面的画廊对触摸事件做出反应，否则上面的画廊应该做出反应。目前只有上面的画廊有反应。你知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:59:37.523

我没有尝试过，但这可能会对您有所帮助：

覆盖`onTouchEvent`你的`gallary1`，然后复制`MotionEvent`并将它传递给另一个画廊，让它命名为`gallary1`

```
@Override
    public boolean onTouchEvent(MotionEvent event) {

        MotionEvent event2=MotionEvent.obtain(event);
        gallery2.onTouchEvent(event2);

        return super.onTouchEvent(event);
    } 
```

* * *

完整代码（其工作）：

```
public class MyGallary extends Gallery {

    public MyGallary(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
   }

public MyGallary(Context context, AttributeSet attrs) {
    super(context, attrs);
   }

public MyGallary(Context context) {
    super(context);
  }

    private MyTouchListener myTouchListener;

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (myTouchListener != null) {
            myTouchListener.onTouch(event);
        }
        return super.onTouchEvent(event);
    }

    public MyTouchListener getMyTouchListener() {
        return myTouchListener;
    }

    public void setMyTouchListener(MyTouchListener myTouchListener) {
        this.myTouchListener = myTouchListener;
    }

} 
```

* * *

```
public interface MyTouchListener {

    public void onTouch(MotionEvent event);

} 
```

* * *

```
public class MainActivity extends Activity {

    MyGallary gallary1;
    Gallery gallary2;
    MyTouchListener listener1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        gallary1 = (MyGallary) findViewById(R.id.myGallary1);
        listener1 = new MyTouchListener() {

            @Override
            public void onTouch(MotionEvent event) {
                MotionEvent event2 = MotionEvent.obtain(event);
                gallary2.onTouchEvent(event2);

            }
        };
        gallary1.setMyTouchListener(listener1);

        gallary2 = (Gallary) findViewById(R.id.Gallary2);

        int[] array = new int[] { R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher };

        ImageAdapter adapter1 = new ImageAdapter(array);
        gallary1.setAdapter(adapter1);

        ImageAdapter adapter2=new ImageAdapter(array);
        gallary2.setAdapter(adapter2);

    }

    class ImageAdapter extends BaseAdapter {

        int[] array;

        public ImageAdapter(int[] array) {
            this.array = array;
        }

        @Override
        public int getCount() {
            return array.length;
        }

        @Override
        public Object getItem(int position) {

            return array[position];
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if (convertView == null) {
                ImageView imageView = new ImageView(MainActivity.this);
                Gallery.LayoutParams params = new Gallery.LayoutParams(
                        Gallery.LayoutParams.MATCH_PARENT,
                        Gallery.LayoutParams.MATCH_PARENT);

                imageView.setLayoutParams(params);

                convertView = imageView;

            }

            ImageView imageView = (ImageView) convertView;
            imageView.setImageResource((Integer) getItem(position));

            return convertView;
        }
    } 
```

# ruby-on-rails - 在 facebook 上与 youtube 视频分享我的页面不显示缩略图

> ID：13130145
> 
> 赞同：0
> 
> 时间：2012-10-29T21:47:09.907
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, youtube

我的应用程序上有一个博客，我通常在这个博客上放一些 youtube 视频，当我在 Facebook 上分享这些页面的链接时，没有缩略图。有没有办法做到这一点？

我试图通过 youtube 链接使用开放图形协议放置元数据，但没有运气。

这可能吗？

**已编辑**

在我的应用程序中，我包含了这样的 OG 视频标签：

```
%meta{ :property => "og:title" , :content => "#{post.title}" }
%meta{ :property => "og:type" , :content => "article" }
%meta{ :property => "og:url" , :content => "#{post_url(post.slug).sub('https:', 'http:')}" }
-if post.video_thumbnail && post.video_thumbnail != ""
  %meta{ :property => "og:video" , :content => "http://www.youtube.com/watch?v=#{post.video_thumbnail}"} 
```

我找到了这个问题的答案：[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

如果使用此 URL，Youtube API 可让您从视频中获取图像：

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/0.jpg 
```

因此，我将该链接包含为我的 OG 图像标签，如下所示：

```
%meta{ :property => "og:image" , :content => "http://img.youtube.com/vi/#{post.video_thumbnail}/0.jpg" } 
```

它工作得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T22:08:15.530

使用 Facebook 的 OG 调试工具检查 Facebook 可以为您的页面查看的 OG 元数据。转到[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

完全可以将 youtube 视频的缩略图用作您自己内容的 OG 图像，但您可能需要使用 YouTube API 获取嵌入视频缩略图的 URL，并将其用作 og:image 元内容。

# javascript - 没有 href 或 url 的 Selenium IDE 选择窗口

> ID：13130147
> 
> 赞同：1
> 
> 时间：2012-10-29T21:47:17.677
> 
> 标签：javascript, html, jsf, selenium, selenium-ide

我是 Selenium IDE 的新手。我尝试选择在测试期间打开的 PDF，但它不起作用。我正在测试一个在 JSF 上编写的 Web 应用程序，因此包括一些 Java 方法/类。我想测试 PDF 是否正确打开。问题是，HTML 代码中没有直接的 href。只有打开 PDF 的 Java(?)-Methode。Selenium IDE 中是否有解决此问题的方法？

您可以单击的元素是

```
<h:commandLink id="createDokument" style="background-image: none;" styleClass="Button Blue"
            action="#{myBean.checkDocument()}" value="#{buttons['BTN_Document']}">
</h:commandLink> 
```

然后一个 javaScript 函数应该测试是否可以创建一个 pdf

如果是，则单击隐藏按钮：

```
<h:commandLink id="createDocumentPdf" style="background-image: none; display: none;"
           styleClass="Button Blue"action="#{myBean.createDocument()}" value="something" target="_blank">
</h:commandLink> 
```

Firebug 从这两个按钮知道的是：

```
<a id="mainForm:createDocumentPdf" class="Button Blue" onclick="if(typeof jsfcljs == 'function'){jsfcljs

(document.getElementById('mainForm'),{'mainForm:createDocumentPdf':'mainForm:createDocumentPdf'},'_blank');}return false" 

style="background-image: none; display: none;" href="#">Something </a>

<a id="mainForm:createDocument" class="Button Blue" onclick="if(typeof jsfcljs =='function'){jsfcljs

(document.getElementById('mainForm') {'mainForm:createDocument':'mainForm:createDocument'},'');return false
"style="background-image:none;" href="#" tabindex="0">Document</a> 
```

我已经尝试了一些东西，但没有任何效果.... 我尝试过：选择窗口 | titleOfThePDFWindow 但它不起作用

所以我现在只有：clickAndWait | id=mainForm:createDocument

# javascript - jquery datatables reset aaSorting 给我错误或不工作

> ID：13130149
> 
> 赞同：0
> 
> 时间：2012-10-29T21:47:33.953
> 
> 标签：javascript, jquery, datatables

我正在尝试做一个自定义多排序 UI 来对 jquery 数据进行排序，这样用户就不需要按住 shift 键。我尝试通过设置 aaSorting = [] 或使用 fnSortNeutral() 重置排序，但它给出了错误。有任何想法吗？？

**“oSettings.fnSortNeutral 不是函数”**

这是我的代码，我正在使用来自 CDN 的最新 1.94 ..

```
var oSettings = $('#' + tableId).dataTable({ "bRetrieve": true });

try
{
    oSettings.fnSortNeutral();
}
catch (e) {
    alert(JSON.stringify(e.message));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:04:10.290

你试过使用`$('#' + tableId).dataTable({ "bRetrieve": true }).fnSort([]);`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:33:34.717

请注意，fnSortNeutral 应该由您自己定义以使用它。所以首先定义它是这样的：

```
$.fn.dataTableExt.oApi.fnSortNeutral = function ( oSettings )
{
/* Remove any current sorting by adding for example default sorting or leave it empty */
oSettings.aaSorting = [[ 1, "desc" ]];
/* Redraw */
oSettings.oApi._fnReDraw( oSettings );
}; 
```

然后你可以使用它：

```
oTable.fnSortNeutral(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:40:04.217

你可以使用数据排序功能，它会让我更有效率。

[http://datatables.net/docs/DataTables/1.9.beta.1/DataTable.defaults.columns.html#aDataSort_details](http://datatables.net/docs/DataTables/1.9.beta.1/DataTable.defaults.columns.html#aDataSort_details)

# ios - 地图在第一次尝试时未以注释针为中心

> ID：13130153
> 
> 赞同：0
> 
> 时间：2012-10-29T21:48:00.600
> 
> 标签：ios, annotations, mkmapview

当用户选择一个菜单选项时，我当前通过“stringToDisplay”将位置名称发送到我的地图视图，并且按预期在地图上放置了一个图钉，但是，它不会在第一次尝试时将图钉居中或放大该位置。第一次之后的每一次尝试都是完美的。如何在第一次尝试时使地图缩放到我的位置？非常感谢您的意见。

我的 viewWillAppear 中包含多个 IF 语句，但请参阅下面的一个遇到此问题的位置示例：

```
-(void)viewWillAppear:(BOOL)animated

{
    CLLocationCoordinate2D location;

    NSLog(@"self.stringToDisplay = %@", self.stringToDisplay);

    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta=0.1;
    span.longitudeDelta=0.1;

    region.span=span;
    region.center=location;

    [mapView setRegion:region animated:TRUE];
    [mapView regionThatFits:region];

  if ([self.stringToDisplay isEqualToString: @"August First Bakery & Café"])

  {
    location.latitude = (double) 44.475486;
    location.longitude = (double) -73.2172641;

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"August First Bakery & Café" andCoordinate:location];
    [self.mapView addAnnotation:newAnnotation];
    [mapView setCenterCoordinate:location animated:YES];
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:33:47.060

在`viewWillAppear`. 在执行`setRegion/regionThatFits`. 如果是，您可能需要将代码移至`viewDidAppear`. - Phlibbo 的赞美

# jndi - persistence.xml 中的错误

> ID：13130162
> 
> 赞同：4
> 
> 时间：2012-10-29T21:48:35.560
> 
> 标签：jndi, jboss7.x, h2, persistence.xml

我正在尝试将一个简单的 EJB 项目部署到 Jboss 7.1.1 上。我有一个单独的 H2 数据库安装。

所以我改变了standalone.xml如下：

```
 <subsystem xmlns="urn:jboss:domain:datasources:1.0">
            <datasources>
                <datasource jndi-name="java:jboss/datasources/ExampleDS" pool-name="ExampleDS" enabled="true" use-java-context="true">
                    <connection-url>jdbc:h2:tcp://localhost/~/test</connection-url>
                    <driver>h2</driver>
                    <security>
                        <user-name>sa</user-name>
                        <password>sa</password>
                    </security>
                </datasource>
                <drivers>
                    <driver name="h2" module="com.h2database.h2">
                        <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                    </driver>
                </drivers>
            </datasources>
        </subsystem> 
```

现在我还编辑了 persistence.xml 以匹配standalone.xml 中的名称

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="scube" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider> 
        <class>com.sample.model.Property</class>

        <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source> 

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect" />
            <property name="hibernate.max_fetch_depth" value="3" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="hibernate.show_sql" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

Eclipse，在以下行指出错误：java:jboss/datasources/ExampleDS
错误如下：

```
cvc-complex-type.2.4.a: Invalid content was found starting with element 'jta-data-source'. One of '{"http://java.sun.com/xml/ns/persistence":class, "http://java.sun.com/
 xml/ns/persistence":exclude-unlisted-classes, "http://java.sun.com/xml/ns/persistence":shared-cache-mode, "http://java.sun.com/xml/ns/persistence":validation-mode, 
 "http://java.sun.com/xml/ns/persistence":properties}' is expected. 
```

我搜索了类似的错误，所有解决方案都说 xml 元素的顺序很重要，我检查了这一点，或者 jndi 名称应该与standalone.xml 匹配，这确实匹配。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T13:24:29.527

XML 元素的正确顺序（根据模式文档）是：

```
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
<jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source> 
<class>com.sample.model.Property</class> 
```

# php - 本地 wordpress 安装中未加载 CSS 文件

> ID：13130164
> 
> 赞同：0
> 
> 时间：2012-10-29T21:48:43.050
> 
> 标签：php, windows, wordpress, iis, iis-7.5

所以我在 Windows 7 Pro 上建立了一个基本的 PHP 站点来做一些本地开发。我正在运行 5.3.13（从 WPI 安装），一切似乎都在运行。我下载了 WordPress 并进入安装页面并加载了 /wp-admin/install.php，但它没有从 install.css 中提取任何样式。在 Chrome 中运行开发者工具我可以看到 install.css?ver=3.4.2 正在返回“200 OK”状态。因此，我认为这不是 WP 问题，而是与我的服务器/IIS 站点配置有关。

我已将 IIS 配置为在`localhost`端口上运行此 PHP 站点`88`并已安装 WordPress 3.4.2 到`http://localhost:88/wp/`

我没有继续安装 WordPress，因为我想先弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:45:27.403

您的 IIS 安装可能未启用其静态内容功能。取自[这篇文章](http://www.dailycomputersolutions.com/blog/index.php/2010/04/23/iis-not-showing-images-and-css/)的相关步骤是：

> 1.  转到“打开或关闭 Windows 功能”
> 2.  选择 Internet 信息服务
> 3.  选择万维网服务
> 4.  并检查静态内容

我想在答案中引用更多规范文档，但是[这里](http://www.iis.net/configreference/system.webserver/staticcontent)或[这里](http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview)都没有直接引用，如果未安装模块，您的静态内容将根本无法工作。也许有人可以提供更好的资源。

# c - 在 C 中使用 NULL 指针，就像在 Java 中使用 null 一样？

> ID：13130165
> 
> 赞同：0
> 
> 时间：2012-10-29T21:48:53.477
> 
> 标签：c, null, void-pointers

这是在 C 中有效使用 NULL 还是有其他方法可以解决这个问题？

```
// Send data
// cb_push returns NULL if it is successful
char uart_send(char c) {
    void* ret = cb_push(w_buffer, &c);
    if (ret != NULL) return c;

    SETBIT(UCSR0B, UDRIE0);
    return NULL;
} 
```

在Java中，我会这样做，但在CI中不知道什么是好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:02:13.503

它并没有真正定义，并且根据您使用的库和/或函数有不同的方法。一般来说，没有办法区分`0`and `NULL`（实际上，`NULL`通常只是一个扩展为 的预处理器宏`0`）。

通常，使用以下可能性，有时甚至根据用途在一个库中匹配：

*   如果返回一个指针，返回值`0`通常表示某种错误。
*   如果没有任何错误，带有状态码（或`main`入口点）的函数通常会返回。`0`
*   `0`如果某些事情没有成功，则会返回一些函数（即它们返回一个布尔值）。
*   一些 stdlib 字符串函数返回一个“荒谬”的值，以防出现错误（或未找到）。例如，如果找不到子字符串，`std::string::find()`将返回。`-1`然而，这被包裹/隐藏在一个名为 value ( `std::string::npos`) 的常量后面，以避免抛出“魔法值”。

有没有完美的方法？我不这么认为，但这真的取决于具体的用例。如果你返回一个指针，那么在出错的情况下返回 0 就完美了。如果您要返回状态代码，我会使用宏（类似于 Windows API）或枚举。甚至不用担心任何特定的值 - 只使用名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:53:08.950

一般来说，C 约定是在成功时返回 0，否则返回负数。

此外，假设您的函数应该返回一些指针并且它没有这样做，那么约定是返回 NULL。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-06T12:52:02.867

NULL 在内部定义为`#define NULL (void*)0`指向内存第零位置的指针。

# java - 在 Java 中附加 Sqlite 数据库

> ID：13130166
> 
> 赞同：3
> 
> 时间：2012-10-29T21:48:57.307
> 
> 标签：java, sqlite, jdbc, connection

我在附加数据库并将附加数据库中的所有行插入主数据库时遇到问题。

这是我的代码。

```
public void selectOldDb(String dbName) throws Exception {
    createNewDB();
    Class.forName("org.sqlite.JDBC");

    Connection connOldDb = DriverManager.getConnection("jdbc:sqlite:"+ dbName);
    String newDbName = getDirToNewDb();

    newDbName = newDbName + "auftraege.db";
    Connection connNewDb = DriverManager.getConnection("jdbc:sqlite:"+ newDbName);

    connNewDb.prepareStatement("ATTACH DATABASE \"" + connOldDb + "\" AS  fromDB").execute();

    connNewDb.prepareStatement("INSERT INTO main.auftraege  SELECT * FROM fromDB.SendeDS").execute();

    connNewDb.close();
    connOldDb.close();
} 
```

当我尝试插入时，我变成了这个错误。

> [SQLITE_ERROR] SQL 错误或缺少数据库（没有这样的表：fromDB.SendeDS）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T08:13:42.980

该`ATTACH DATABASE`命令需要一个文件名，但你给它一个`Connection`对象的表示。

您不需要`connOldDb`，只需使用即可`dbName`。

# python - 字数 Python 3.3 程序中的可迭代错误

> ID：13130172
> 
> 赞同：0
> 
> 时间：2012-10-29T21:49:30.757
> 
> 标签：python, file, file-io, python-3.x, word-count

我正在尝试完成一个简单的字数统计程序，它可以跟踪连接文件中的字数、字符数和行数。

```
 # This program counts the number of lines, words, and characters in a file, entered by the user.
   # The file is test text from a standard lorem ipsum generator.
   import string
   def wc():
      # Sets the count of normal lines, words, and characters to 0 for proper iterative operation.
        lines = 0
        words = 0
        chars = 0
        print("This program will count the number of lines, words, and characters in a file.")
       # Stores a variable as a string for more graceful coding and no errors experienced previously. 
       filename =("test.txt")
       # Opens file and stores it as new variable, and loops through each line once the connection   with file is made.
       with open(filename, 'r') as fileObject:
             for l in fileObject:
                # Splits text file into each individual word for word count.
                words = l.split()

                lines += 1
                words += len(words)
                chars += len(l)
        print("Lines:", lines)
        print("Words:", words)
        print("Characters:", chars)

    wc()

    while 1:
        pass 
```

现在，如果一切顺利，它应该打印文件中的行数、字母和单词的总数，但我得到的只是这条消息：

“words += len(words) TypeError: 'int' object is not iterable”

怎么了？

解决了！新代码：

```
 # This program counts the number of lines, words, and characters in a file, entered by the user.
    # The file is test text from a standard lorem ipsum generator.
    import string
    def wc():
        # Sets the count of normal lines, words, and characters to 0 for proper iterative operation.
        lines = 0
        words = 0
        chars = 0
        print("This program will count the number of lines, words, and characters in a file.")
        # Stores a variable as a string for more graceful coding and no errors experienced previously. 
        filename =("test.txt")
        # Opens file and stores it as new variable, and loops through each line once the connection with file is made.
        with open(filename, 'r') as fileObject:
            for l in fileObject:
                # Splits text file into each individual word for word count.
                wordsFind = l.split()

                lines += 1
                words += len(wordsFind)
                chars += len(l)
                 print("Lines:", lines)
                 print("Words:", words)
                 print("Characters:", chars)

    wc()

    while 1:
        pass 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:52:15.393

看起来您正在使用变量名称`words`来计算计数，以及`l.split()`. 您需要通过为它们使用不同的变量名称来区分它们。

# objective-c - 如何在视图控制器方法中创建和使用相同的对象？

> ID：13130175
> 
> 赞同：1
> 
> 时间：2012-10-29T21:49:58.603
> 
> 标签：objective-c, xcode, xcode4.4

嗨，我是一位经验丰富的 Java 程序员。我刚刚开始学习 Objective-C 和 XCode。我无法理解一个非常基本但重要的事情，这不会让我进一步进步。

我想创建我定义的类的对象，然后在 Storyboard 中不同视图的视图控制器方法中访问和使用这些对象。我不知道在哪里以及如何创建对象，以便可以在任何视图中访问它们。在 Java 中，我可以在 main 中做所有事情，但 Objective C 的结构让我感到困惑。

例如我有一堂课

```
@interface list : NSObject
{
NSMutableArray* ary;
}
@end 
```

我想创建这个类的对象，并在不同视图控制器的方法中使用这些对象。我该怎么做？请有人能给我一个关于在哪里创建对象的中肯答案，以便它们可以在 View Controller 方法中访问。我已经看到了复杂的答案，但不是基本的答案 PS：我正在使用 XCode 4.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:01:03.440

我认为您应该阅读一些书籍或教程。

一些书：

*   [http://www.amazon.com/Programming-Objective-C-5th-Developers-Library/dp/032188728X/ref=sr_1_3?s=books&ie=UTF8&qid=1351547991&sr=1-3&keywords=stephen+kochan](https://rads.stackoverflow.com/amzn/click/com/032188728X)
*   [http://www.amazon.com/Learn-Objective-C-Java-Developers-Series/dp/1430223693](https://rads.stackoverflow.com/amzn/click/com/1430223693)
*   [http://www.amazon.com/Objective-C-Absolute-Beginners-iPhone-Programming/dp/1430228326](https://rads.stackoverflow.com/amzn/click/com/1430228326)

对于教程 - 只需谷歌它 - 其中之一：

*   [http://mobile.tutsplus.com/tutorials/iphone/learn-objective-c-day-1/](http://mobile.tutsplus.com/tutorials/iphone/learn-objective-c-day-1/)

* * *

说，您有 mainViewController 类，您想在其中使用您的`list`类，然后您可以执行以下操作：

```
// mainViewController.h

#import "list.h"

@interface mainViewController

@property (nonatomic, strong) list *objList;

@end

// mainViewController.m

@implementation mainViewController

@synthesize objList = _objList;

- (void) viewDidLoad {
    self.objList = [[list alloc] init];
}

- (void) someMethod {
    self.objList.ary = ...;
}

@end 
```

# c# - 如何使用 C# 自动化 SAP GUI

> ID：13130176
> 
> 赞同：24
> 
> 时间：2012-10-29T21:50:02.697
> 
> 标签：c#, sap-gui

我想使用 C# 语言自动化 SAP GUI 窗口。我可以在 VBScript 中做到这一点，但代码重用是可怕的。此外，我喜欢使用线程而不是运行 80 个或更多进程。我在哪里可以找到有关如何执行此操作的任何文档和示例？这是我正在使用的代码。基本上，我面临的问题是 - 我如何与 SAP GUI 建立连接，然后动态创建 SAP GUI，然后开始进行交易并在某些字段中输入文本。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using White.Core.Factory;
using White.Core.UIItems.Finders;
using White.Core.InputDevices;
using System.Threading;
using System.Diagnostics;
using SAP.Connector;
using SAP;

namespace SAP_Automation
{
    class Program
    {
        public static void Main(string[] args)
        {
            string ExeSourceFile = @"C:\Program Files\SAP\SapSetup\setup\SAL\SapLogon.s8l";
            White.Core.Application _application;
            White.Core.UIItems.WindowItems.Window _mainWindow;

            var c = SAP.Connector.Connection.GetConnection("**");
            var c = new SAPConnection("ASHOST=*; GWHOST=*; GWSERV=*; ASHOST=*; SYSNR=00;USER=user; PASSWD=**;");
            c.Open();

            }
        }
    }
} 
```

如您所见，我可以创建连接，但我不知道如何创建与 GUI 的会话并开始在字段中输入文本。任何示例和示例将不胜感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-07T22:51:53.990

这可能是 necro-threading，但我工作的时候也遇到过类似的情况。我们需要 SAP GUI Automation 来进行测试，以便与我们用 C# 编写的其他本土自动化平台集成。我帮助创建了一个解决方案的提案，该解决方案利用了 SAP 提供的 GUI 自动化库，可用作 SAP 自动化层的基础。

您的 SAP 文件安装中是否存在以下文件？x:\Program Files\SAP\FrontEnd\SAPGui\sapfewse.ocx?

如果是这样，请将其添加到 Visual Studio（或您正在使用的任何 IDE）作为参考。它基本上是一个类库，其中包含一组允许您与之交互的 SAP 特定对象。它非常有效，因为它从 SAP GUI 中公开了您需要的大部分内容。我们在其他尝试中发现 SAP 中的许多对象不可用。

这是我所做的早期概念证明。使用连接字符串启动 SAP，输入凭据，导航到事务代码。

```
using System;
using System.Collections.Generic;
using System.Collections;
using System.Linq;
using System.Text;
using SAPFEWSELib;

namespace SAPGuiAutomated
{
//created a class for the SAP app, connection, and session objects as well as for common methods. 
    public class SAPActive
    {
        public static GuiApplication SapGuiApp { get; set; }
        public static GuiConnection SapConnection { get; set; }
        public static GuiSession SapSession { get; set; }

        public static void openSap(string env)
        {
            SAPActive.SapGuiApp = new GuiApplication();

            string connectString = null;
            if (env.ToUpper().Equals("DEFAULT"))
            {
                connectString = "1.0 Test ERP (DEFAULT)";
            }
            else
            {
                connectString = env;
            }
            SAPActive.SapConnection = SAPActive.SapGuiApp.OpenConnection(connectString, Sync: true); //creates connection
            SAPActive.SapSession = (GuiSession)SAPActive.SapConnection.Sessions.Item(0); //creates the Gui session off the connection you made
        }

        public void login(string myclient, string mylogin, string mypass, string mylang)
        {
            GuiTextField client  = (GuiTextField)SAPActive.SapSession.ActiveWindow.FindByName("RSYST-MANDT", "GuiTextField");
            GuiTextField login  = (GuiTextField)SAPActive.SapSession.ActiveWindow.FindByName("RSYST-BNAME", "GuiTextField");
            GuiTextField pass  = (GuiTextField)SAPActive.SapSession.ActiveWindow.FindByName("RSYST-BCODE", "GuiPasswordField");
            GuiTextField language  = (GuiTextField)SAPActive.SapSession.ActiveWindow.FindByName("RSYST-LANGU", "GuiTextField");

            client.SetFocus();
            client.text = myclient;
            login.SetFocus();
            login.Text = mylogin;
            pass.SetFocus();
            pass.Text = mypass;
            language.SetFocus();
            language.Text = mylang; 

            //Press the green checkmark button which is about the same as the enter key 
            GuiButton btn = (GuiButton)SapSession.FindById("/app/con[0]/ses[0]/wnd[0]/tbar[0]/btn[0]");
            btn.SetFocus(); 
            btn.Press();

        }
    }
    //--------------------------//
    //main method somewhere else 
    public static void Main(string[] args)
    {
        SAPActive.openSAP("my connection string");
        SAPActive.login("10", "jdoe", "password", "EN");
        SAPActive.SapSession.StartTransaction("VA03");
    } 
```

你是对的，关于这个主题的文档并不多。以下是一些帮助我入门的资源

-我们计划的原始来源 [http://scn.sap.com/thread/1729689](http://scn.sap.com/thread/1729689)

- API 文档（适用于 VB 和 javascript，但一般规则和对象是相同的）。一定要阅读 SAP GUI 运行时层次结构上的部分。它会回答很多问题。 [http://www.synactive.com/download/sap%20gui%20scripting/sap%20gui%20scripting%20api.pdf](http://www.synactive.com/download/sap%20gui%20scripting/sap%20gui%20scripting%20api.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:33:28.367

在这里了解 UI 自动化可以做什么以及它的局限性是非常重要的。它旨在自动化用户界面的功能。您可以单击按钮、在文本框中输入文本、移动窗口等，用户可以使用鼠标和键盘进行任何操作。

它**不能**做的是架起操作系统在进程之间竖起的高墙。阻止一个进程访问另一个进程的内存的墙。这是一个非常重要的安全和安全功能。一方面，它阻止进程访问应该是进程私有的数据。就像密码一样。另一方面，它阻止崩溃进程影响机器上运行的其他进程。您可以使用任务管理器终止一个进程，并且一切都继续愉快地进行，就好像什么都没发生一样。

这样做的结果是，在您的程序中创建一个 SAPConnection 对象是一个只有您的程序可以使用的连接。没有机制可以通过 UI 自动化以某种方式将此对象传递给另一个进程。充其量您可以使用从连接中检索到的数据来影响您单击的按钮。

允许在进程之间共享数据的进程互操作类型在 .NET 中得到了很好的支持。低级方法是套接字和命名管道，高级方法是 Remoting 和 WCF。较旧的程序支持 COM 自动化，Office 就是一个很好的例子。然而，这需要两个探戈，必须编写两个程序才能利用它。

因此，如果您尝试自动化现有的 SAP 应用程序，而该应用程序不明确支持自动化，即 Office 程序支持的那种自动化，那么您几乎只能填写文本框和单击按钮。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-02T14:39:10.110

[您可以使用UiPath](http://uipath.com)自动化任何类型的应用程序（浏览器、桌面、java 等）。这是[关于如何在 SAP 上自动化数据输入、菜单导航和屏幕抓取的教程。](http://pages.uipath.com/tutorials/sap-gui-automation-data-entry)

你可以

*   从代码（SDK）中使用它。它有一个自动生成 C# 代码的工具
*   [直接从UiPath Studio](http://www.uipath.com/desktop-automation)创建和运行工作流程（视觉自动化）。

以下是 C# 自动生成代码的示例：

```
 // Attach window  menu
        UiNode wnd3 = UiFactory.Instance.NewUiNode().FromSelector("<wnd app='sap business one.exe' cls='&#35;32768' idx='1' />");            
        // Click 'Business Pa...' menu
        UiNode uiClickBusinessPamenu_3 = wnd3.FindFirst(UiFindScope.UI_FIND_DESCENDANTS, "<ctrl name='Business Partners' role='popup menu' /><ctrl automationid='2561' />");
        uiClickBusinessPamenu_3.Click(88, 9, UiClickType.UI_CLICK_SINGLE, UiMouseButton.UI_BTN_LEFT, UiInputMethod.UI_HARDWARE_EVENTS);            
        // Attach window 'SAP Business' 
        UiNode wnd4 = UiFactory.Instance.NewUiNode().FromSelector("<wnd app='sap business one.exe' cls='TMFrameClass' title='SAP Business One 9.0 - OEC Computers' />");            
        // Click 'Add' button
        UiNode uiClickAddbutton_4 = wnd4.FindFirst(UiFindScope.UI_FIND_DESCENDANTS, "<wnd cls='ToolbarWindow32' title='View' /><ctrl name='View' role='tool bar' /><ctrl name='Add' role='push button' />");
        uiClickAddbutton_4.Click(13, 24, UiClickType.UI_CLICK_SINGLE, UiMouseButton.UI_BTN_LEFT, UiInputMethod.UI_HARDWARE_EVENTS); 
```

SAP Business One 菜单、按钮或输入的工作流自动化如下所示：

![在此处输入图像描述](../Images/5b97856c9676e1aa5c157598904cc54d.png)

最后，SDK 文档位于[此处](https://github.com/uipath/sdk/wiki)……以防您不想使用工作流。

**注意：**我在 UiPath 工作。您还应该尝试其他自动化工具，如 Automation Anywhere、WinAutomation、Jacada、Selenium、Ranorex 并排使用它们，并选择更适合您需求的工具。

# haskell - 为什么 Cabal 没有成为一个完整的包管理器？

> ID：13130178
> 
> 赞同：13
> 
> 时间：2012-10-29T21:50:06.420
> 
> 标签：haskell, cabal, cabal-install

（在开始之前：我将使用*Cabal*来*表示名称中包含 Cabal 并且与 Haskell 相关的所有内容*。）

前几天又遇到了通常的“你需要更新 X 来安装 Y，但这会破坏依赖 Z”的问题，我想我只想问：为什么 Cabal 不是设计成一个完整的包管理器，尤其是以下特点：

*   **版本控制**：将一个包的多个版本并排安装，让包选择所需的依赖项。如果未指定软件包版本，请使用可用的最新版本。
*   **更新**软件包 - 或者更好的是，*还*安装最新版本。
*   **删除**包
*   检查包裹完整性

您会看到此列表的去向。现在，对我来说，Cabal 感觉像是一个有点复杂的构建系统（当你想第一次开始使用它时，试着找出你的包需要哪个版本的 Base），它带有一个半生不熟的包安装程序。

那么问题又来了：**为什么 Cabal 没有制作一个功能齐全的构建/打包系统？**我确信有一些设计决定导致了当前状态。

（这个问题在某种程度上受到[Reddit 上的咆哮的](http://redd.it/12alw1)启发，但与那个人相反，并不意味着通过上述内容冒犯任何人。）:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T01:04:13.167

安装同一个包的多个版本现在效果很好（尝试`cabal install ansi-terminal-0.5.4 && cabal install ansi-terminal-0.5.5`），但安装同一个包版本的*多个实例*却不行。这是我们非常想支持的东西，因为这将使我们能够实现[密封构建](http://blog.johantibell.com/2012/03/cabal-of-my-dreams.html)并解决“依赖地狱”问题，但这并非完全无关紧要。今年有一个 GSoC 项目为 ghc-pkg 和 Cabal 添加对多个实例的支持，但这些补丁还没有进入主线。[这是 HIW 2012 谈论项目成果的视频](http://www.youtube.com/watch?v=h4QmkyN28Qs)，[这里是内部设计的描述](http://hackage.haskell.org/trac/ghc/wiki/Commentary/GSoCMultipleInstances)。

至于您的其他问题，实际上曾经有一个`cabal upgrade`命令用于安装所有当前安装的软件包的最新版本，但它被删除了，因为它可能会破坏您的安装（同样，支持同一软件包版本的多个实例可以解决这个问题）。卸载支持已经在愿望清单上一段时间了，[只是还没有人有时间实现它](https://github.com/haskell/cabal/issues/227)。我猜数字签名包和 HTTPS 也是如此。

此外，如果你有兴趣看到其中一些功能的实现，Cabal 的补丁总是受欢迎的，并且随着迁移到[GitHub](https://github.com/haskell/cabal/)，贡献代码变得比以往任何时候都更容易（如果你能负担得起，贡献现金也可以 - 我认为[Well-Typed](http://www.well-typed.com/)将非常乐意与您讨论此问题）。

**更新（2016 年 9 月）：**有关当前事务状态的更新，请参阅 Edward Z. Yang 的这篇文章：[`cabal new-build`是一个包管理器](http://blog.ezyang.com/2016/08/cabal-new-build-is-a-package-manager/)。

# php - SQL 删除查询显示，但没有操作

> ID：13130179
> 
> 赞同：0
> 
> 时间：2012-10-29T21:50:12.167
> 
> 标签：php, sql, database, sql-delete

在我的页面上显示的每条记录之后，我都有一个 SQL 删除按钮。我知道按钮应该做什么，但它不起作用！我什至回显`$sql`以确保它是正确的，它显示以下内容：

```
DELETE * FROM recensies WHERE ID ='508a7a732ef67' AND email ='info@*****.nl' 
```

当我查看 PHPmyAdmin 中的记录时，我可以看到有一条记录恰好包含此信息，但另一方面，这是我的代码，我相信你会明白我的意思。

```
<?php

// Up here I connect to my DB, no problems there..

$query  = "SELECT * FROM recensies ORDER BY timestamp DESC"; 
$result = mysql_query($query) or die(mysql_error());

if (isset($_POST['verwijderen'])) 
{

    $IDdelete = mysql_real_escape_string($_POST['ID']);
    $emaildelete = mysql_real_escape_string($_POST['email']);

    $sql = "DELETE * FROM recensies "
         . "WHERE ID ='$IDdelete' AND email ='$emaildelete'";

    mysql_query($sql);

    echo $sql;
}

while ($row = mysql_fetch_array($result))
{

?> 
```

```
<form method="post">
<tr>
<td><?php echo $row['cijfer']; ?></td>
<td><input type="text" name="ID" value="<?php echo $row['ID']; ?>"></input></td>
<td><?php $newb = substr($row['beoordeling'], 0, 30); echo $newb; ?>..</td>
<td><?php echo $row['voornaam']; ?> <?php echo $row['achternaam']; ?></td>
<td><input type="text" name="email" value="<?php echo $row['email']; ?>"></td>
<td><?php $datum = date("j/n/y", strtotime($row[timestamp])); echo $datum; ?></td>
<td><input type="submit" value="Verwijderen" name="verwijderen"></td>
</tr>
</form>

<?php

}

?>

</table>

</div>

</div> 
```

我只是找不到我的错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:55:40.430

我不知道这是否是你的问题，但 DELETE 语法不需要列列表（* 在你的查询中）：你应该写

```
DELETE FROM recensies WHERE ID = ... 
```

不 *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:55:14.123

我认为您需要从删除语句中删除 * ，如下所示：

```
DELETE FROM recensies WHERE ID ='508a7a732ef67' AND email ='info@*****.nl' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T21:57:20.133

改变

```
$sql = "DELETE * FROM recensies WHERE ID ='$IDdelete' AND email ='$emaildelete'"; 
```

到

```
$sql = "DELETE FROM recensies WHERE ID ='$IDdelete' AND email ='$emaildelete'"; 
```

删除`*`.

尝试

```
mysql_query($sql);
echo mysql_error(); 
```

你应该有一个错误说

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '* from recencies' 附近使用正确的语法：

# html - 新 HTML5 标签的意义何在？

> ID：13130182
> 
> 赞同：0
> 
> 时间：2012-10-29T21:50:21.790
> 
> 标签：html

根据 Google 的速度最佳实践（看看他们的网站，你就知道他们是对的！），你不应该使用 CSS 后代选择器。这是因为它必须大量搜索 DOM。

因此，如果您想对一个部分中的所有文章进行更改。让我们说：

```
<section id="others">
    <article>
        ...
    </article>
    <article>
        ...
    </article>
</section> 
```

要修改此特定部分中的所有文章，您不应该这样做：

```
#others article { 
```

你应该做

```
<section>
    <article class="others">
        ...
    </article>
    <article class="others">
        ...
    </article>
</section>

.others { 
```

但是，如果您仍然需要使用所有这些类和 ID，那么这些新的 HTML5 标记有什么意义呢？我的意思是，如果最佳实践是无论如何都要使用类和 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:57:29.800

对于您给出的场景，普通网站不太可能在速度上出现很大差异。如果您尝试加载 Web 上最受欢迎的页面之一，[您将求助于各种技巧以使其加载速度非常快](http://www.stevefenton.co.uk/Content/Blog/Date/201008/Blog/Google-Deliberately-Write-Awful-HTML/)- 但对于大多数网站来说，这是微优化。

为了让你的选择器超快，你可以确保每样东西都有一个 id，并在你的 CSS 中使用 id，但这会让你的 CSS 很难维护，而且现在最大的成本是开发人员做这些事情所花费的时间。

最多，您应该尝试减少选择器中的级别，但完全删除它们是不切实际的。

需要明确的是——这个优化实际上是关于 CSS 的渲染速度。你认为节省渲染 CSS 的时间（几乎没有时间）会让你的 web 应用程序更快，因为你用额外的字节使你的 HTML 更重`class="other"`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:56:46.933

谷歌专注于速度。HTML5 的结构。在 DOM 中搜索可能需要很多时间（我不这么认为），但使用新标签阅读 HTML5 页面更容易。我的意思是，您可以使用 div 等创建相同类型的结构，但新标签会强制人们使用它们。另一点是您花时间试图弄清楚大量 div 的作用。当您使用文章标签时，您知道内容是文章的一部分。这使开发人员的工作更轻松。

# java - Tomcat 5.5 上突然出现 Java 堆空间错误

> ID：13130188
> 
> 赞同：1
> 
> 时间：2012-10-29T21:50:40.950
> 
> 标签：java, tomcat, tomcat5.5

我们在生产环境中有一个 Spring 2.0.8 应用程序，在 Tomcat 5.5.x 和 JRE 1.5.x 上运行（是的，我知道，我们应该升级，现在不是重点），我们选择 Oracle 11g 作为数据库。

我们在几个月前（我会说是 7 月）升级了应用程序，并在过去一个月左右从 Oracle 10g 切换到了 Oracle 11g（还更改了 Oracle JDBC 驱动程序以匹配数据库版本）。

我们在生产中遇到了严重和意想不到的问题。截至一天前，每隔几个小时就出现了堆空间 OutOfMemory 错误。这反过来又会使响应时间减慢大约 100 倍，或者用户无法连接。

我们的设置是：

*   运行服务器的 Windows 机器
*   启用 SSO 的 Apache 2.2 和 Tomcat 5.5，总内存：128MB，最大内存：512MB
*   Spring 2.0.8 网络应用
*   甲骨文 11g

由于注意到此错误，这就是我们尝试的方法：

*   检查日志 - 似乎没有模式。显然，日志只会告诉您服务器何时内存不足，因此它们显示不再工作的点，而不是问题开始的点
*   重新启动服务器
*   重新安装Tomcat
*   Tomcat 可以使用的内存量增加 - 这只是延长了问题，当然 Tomcat 吃的和我们给的一样多
*   全新安装服务器和 Apache+Tomcat
*   生成堆转储 - 看起来没什么特别的，大部分内存用于启动应用程序
*   检查数据库 - 很好，快速且响应迅速，没有锁

我正在寻找其他可以做什么的想法。我们总共在 5 个不同的作品中使用了相同的设置，这个有问题的设置是用户和数据数量最少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:39:59.953

现在您已经弄清楚了，我建议您将以下内容添加到要尽快做的事情列表中：

*   将您的 JVM 升级到 Java 7。Java 5 已“报废”，这意味着您将不再获得任何安全补丁……除非您签订了 Oracle Java 支持合同。

*   如果您无法升级到 Java 7 ... 或 Java 6，那么至少升级到您可以获得的最新 Java 5 补丁版本。

*   升级到 Tomcat 6 或 7，或者至少升级到最新的 Tomcat 5.5。

*   为了避免`OutOfMemoryError`导致严重减速的问题，请确保您`-XX:+UseGCOverheadLimit`在 JVM 命令行上有选项。

而且，如果您计划对该系统进行任何重要的开发工作，请考虑将其升级到 Spring 3.x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:19:57.563

好的，我们解决了这个问题。事实证明，这是一个写得很糟糕的 SQL 查询，几乎没有使用过。分析堆转储有助于找到占用大量内存的对象，我们从那里开始。

# matlab - 使用 minVal 和 maxVal 阈值计算直方图

> ID：13130193
> 
> 赞同：1
> 
> 时间：2012-10-29T21:51:24.613
> 
> 标签：matlab, histogram

在 matlab 中：我有一个 RGB 图像“img”。如果我写：

```
tmpImg=imhist(img); 
```

我得到了整个图像的直方图。我想计算“minVal”和“maxVal”之间的像素直方图。

我怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:05:51.230

您可以在每个通道的值范围内使用逻辑索引，即对于图像 I，`I`介于`minVal`和之间的值`maxVal`是

```
I(I>minVal&I<maxVal) 
```

因此，对于 3 通道（彩色）图像，您可以拥有每个通道的直方图，如下所示：

```
I = double(imread('peppers.png')); % example image
minVal = 50;
maxVal = 200;
nBins = 50; % histogram bins
for i=1:3
    C = I(:,:,i);
    [countsC(i,:),binsC(i,:)] = hist(C(C>minVal&C<maxVal),nBins);
end

figure; hold all; % draw 3 "bounded" histograms on same plot
c = {'r','g','b'};
for i=1:3
    stem(binsC(i,:), countsC(i,:), c{i}, '.');
end
axis tight 
```

# ruby-on-rails - Rails - 查询在开发中的视图和控制器中工作，但仅在生产中的视图中

> ID：13130195
> 
> 赞同：3
> 
> 时间：2012-10-29T21:51:32.353
> 
> 标签：ruby-on-rails, controller, production

我是 Rails 新手，所以我的问题可能有一个简单的答案。我正在使用导轨 3.2.3。我有以下代码来对我的数据库执行搜索：

`@search_results = User.search("test search")`

在`search`我的模型中定义的位置。`@search_results = Data.search("test search")`当在我的开发环境中的视图或控制器中时，此代码对我来说非常有效。在生产中，它在视图中有效，但在控制器中无效。我不知道为什么。查看我的生产日志，视图和控制器的 SQL 有很大的不同：

当查询来自生产中的视图时，这就是我在日志中看到的内容：

```
SELECT 'users'.* FROM 'users' WHERE (concat(field1, ' ', field2, ' ', field3) LIKE '%test%' AND concat(field1, ' ', field2, ' ', field3) LIKE '%search%' 
```

这正是我想要的。但是，当查询来自控制器时，SQL 变为：

```
SELECT 'users'.* FROM 'users' WHERE (field1 LIKE '%test search%' OR field2 LIKE '%test search%' OR field3 LIKE '%test search%') 
```

我不明白生产环境中的控制器正在做什么来创建此更改。

编辑-这是`search`方法：

```
def self.search(search)
  if search
    search_length = search.split.length
     find(:all, :conditions => [(["concat(field1, ' ', field2, ' ', field3) LIKE ?"] *        search_length).join(' AND ')] + search.split.map { |name| "%#{name}%" }) 
  else
    find(:all)
  end
end 
```

我在生产和开发中都使用 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:15:39.733

在我看来，第二个查询是基于您的搜索方法的旧版本。

Rails 不会凭空创建这样的查询，所以我认为您可能在某个地方有旧代码正在生成该查询。确保您已重新启动生产 Rails 应用程序以获取最新的代码更改，并确保您在正确的对象上调用正确的方法。

# php - 抑制“其他人可写”的 apache 500 错误

> ID：13130197
> 
> 赞同：1
> 
> 时间：2012-10-29T21:51:40.940
> 
> 标签：php, apache, .htaccess, permissions

我知道这听起来很疯狂，但我确实有这样做的理由。我希望同一文件系统上的其他人能够对文件进行更改，不幸的是我无法更改我们参与的组。有没有办法抑制此错误消息？我感觉它可以在 .htaccess 文件中使用一些指令来实现，但这只是一时兴起，我可能完全错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-05T12:43:02.570

您必须将给您此错误的文件 CHMON 到 664 或 775。查看 apache 服务器错误日志并检查文件

示例：可以是这样的：

[2010-01-05 04:35:51]：错误：文件可被其他人写：（/home/mysite/public_html/index.php）

在这种情况下，给 index.php 755 或 644

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T22:28:07.723

当然这不是所有情况的解决方案，但您的错误可能是由 suExec 或 suPHP 引起的......也许您可以禁用它或使用其他东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-01T10:40:13.767

**在我的情况下，帮助更改超级用户所有者：**

```
chown -R newuser:newuser /dir 
```

*进而*

```
chmod 775 test 
```

# jquery - 在联系表格中滑动 - 请帮助

> ID：13130199
> 
> 赞同：0
> 
> 时间：2012-10-29T21:51:46.893
> 
> 标签：jquery, contact, contact-form

试图让这个联系表单正常工作，表单从隐藏的 div 中滑出，这似乎工作正常，但在提交表单时关闭，这是我想要的，但即使表单字段为空，它也会关闭。如果字段已归档并提交，则在获得确认之前关闭。

演示在这里[http://g-thos.com](http://g-thos.com)

```
<section id="" class="contact contact-wrap">

<section class="wrap social-info intro contact about">

  <section role="contact-form" id="contact-form">
    <?php
if (isset($_POST['submit'])) {
$error = "";

if (!empty($_POST['name'])) {
$name = $_POST['name'];
} else {
$error .= "You didn't type in your name. <br />";
}

if (!empty($_POST['email'])) {
$email = $_POST['email'];
  if (!preg_match("/^[_a-z0-9]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){ 
  $error .= "The e-mail address you entered is not valid. <br/>";
  }
} else {
$error .= "You didn't type in an e-mail address. <br />";
}

if (!empty($_POST['message'])) {
$message = $_POST['message'];
} else {
$error .= "You didn't type in a message. <br />";
}

if(($_POST['code']) == $_SESSION['code']) { 
$code = $_POST['code'];
} else { 
$error .= "The captcha code you entered does not match. Please try again. <br />";    
}

if (empty($error)) {
$from = 'From: ' . $name . ' <' . $email . '>';
$to = "myemail@email";
$subject = "New contact form message";
$content = $name . " has sent you a message: \n" . $message;
$success = "<p>Thank you! Your message has been sent!</p>";
mail($to,$subject,$content,$from);
}
}
?>
  <h2>Getin Touch</h2>
  <div id="note"><?php
  if (!empty($error)) {
  echo '<p class="error"><strong>Your message was NOT sent<br/> The following error(s) returned:</strong><br/>' . $error . '</p>';
  } elseif (!empty($success)) {
  echo $success;
  }
?></div><!--end note-->
      <form method="post" id="contact">
        <div class="input-wrap">
          <div class="input">
            <input type="text" placeholder="name" name="name" value="<?php if ($_POST['name']) { echo $_POST['name']; } ?>" class="required" id="name" />
          </div>
          <div class="input">
            <input type="text" placeholder="email" name="email" id="email" value="<?php if ($_POST['email']) { echo $_POST['email']; } ?>" class="required email" id="email" />
          </div>
          <div class="input">
            <input type="text" placeholder="subject" name="subject" id="subject" value="<?php if ($_POST['subject']) { echo $_POST['subject']; } ?>" class="required" id="subject" />
          </div>
          <div class="input">
            <textarea rows="8" placeholder="message" name="message" id="message" style="height: 50px;"><?php if ($_POST['message']) { echo $_POST['message']; } ?></textarea>
          </div>
          <img src="<?php bloginfo('template_url'); ?>/includes/js/captcha.php"> <input type="text" placeholder="code" name="code"></p>
        </div>
        <input type="submit" value="Send Message" name="submit" id="submitButton" title="Click here to submit your message!" />
      </form>
  </section>
  <div class="clear"></div>

</section>
</section>

$(document).ready(function(){

//animation for same page links #
$('a[href*=#]').each(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
    && location.hostname == this.hostname
    && this.hash.replace(/#/,'') ) {
      var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
      var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
        if ($(this.hash).length) {
            $(this).click(function(event) {
                var targetOffset = $(this.hash).offset().top;
                var target = this.hash;
                event.preventDefault();            
                $('html, body').animate({scrollTop: targetOffset}, 500);
                return false;
            });
        }
    }
});

$('#nav li a.contact, #content a#contact-link').click(function() {

    $(this).toggleClass('selected');

    $('.contact-wrap').slideToggle();

    if(contentStatus == 'visible') {

        $('#content, section.featured').fadeTo('normal', 0.2);

        contentStatus = 'hidden';

    } else {

        $('#content, section.featured').fadeTo('normal', 1);

        contentStatus = 'visible';

    }

    return false;

});

$('#content, footer').click(function() {

    $('#nav li a.contact').removeClass('selected');
    $('.contact-form').slideUp();
    $('#content, section.featured').fadeTo('normal', 1);
    contentStatus = 'visible';

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:26:58.810

坦率地说，你的代码让我想蜷缩成胎儿的姿势睡觉。我的意思是，亲爱的上帝将你的 html、php 和 javascript 分成不同的文件......

现在这种不愉快的事情已经过去了……

1.  使用这个[**验证插件**](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

2.  将此属性放在 html 的必填字段中`requred="true"`

3.  在适当的位置将此逻辑添加到您的 JS 中。

* * *

```
if(!$("form").isValid()){
  return false;
} else {
  // do animation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:26:31.590

前端验证是最好的，比如（如果你不想像 elclanrs 建议的那样引入一个全功能的验证器）：

```
$('form').submit(function(e) {
  if ($('textarea[name="name"]', this).val() == '') {
    e.preventDefault();
    errorMessage("You didn't type in your name. <br />");
  }

  // ... repeat for the rest of your fields
});

function errorMessage(error) {
  $('#note').html('<p class="error"><strong>Your message was NOT sent<br/> The following error(s) returned:</strong><br/>' + error + '</p>');
} 
```

或者，如果出现错误，您可以编辑您的 php 以在页面加载时默认显示表单。

```
if (!empty($error)) {
  // show contact form
} 
```

# uiviewcontroller - 关闭 UIStoryboard 基于 segue 的模式视图控制器时的通知或委托方法

> ID：13130201
> 
> 赞同：2
> 
> 时间：2012-10-29T21:52:05.497
> 
> 标签：uiviewcontroller, uistoryboardsegue

我在情节提要中有 2 个 UIViewController。第一个通过 IB 定义的“Modal”样式 UIStoryboardSegue 与第二个转换类型为“Partial Curl”。

这按预期工作。

当 UIModalTransitionStylePartialCurl 完成时，我想采取一些措施来配置第一个 viewController。有一个 -prepareForSegue:sender: 方法，但是虽然在*开始*curl 时会调用它，但在关闭 curl 时*不会调用它。*

是的，我已经继承了两个视图控制器并重写了这个方法来验证这一点。

我的理论是特定的转场，或者可能所有的模态转场，以不同的方式工作。也许他们平行所有“模态”视图控制器的生命周期？

如果是这种情况，那么可能有类似“willPresentModalViewController”和“didPresentModalViewController”通知或委托方法，但我**找不到它的提及**。

所以，我的问题是，我**怎样才能收到模态视图控制器被解雇的通知**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T13:21:48.513

从 iOS 5 开始，您可以使用方法 presentViewController: 或 dismissViewControllerAnimated 中可用的完成块：

```
[self presentViewController:(UIViewController *) animated:(BOOL) completion:{
    //called after the view controller is presented
}]

[self dismissViewControllerAnimated:(BOOL) completion:^{
    //called after the view controller is dismissed
}]; 
```

完成块的行为类似于“didPresentModalViewController”或“didDismissModalViewController”。

对于“willPresentModalViewController”或“willDismissModalViewController”，您可以在调用上述方法之前输入您的代码。

# c# - 合并时间范围

> ID：13130204
> 
> 赞同：6
> 
> 时间：2012-10-29T21:52:16.933
> 
> 标签：c#, datetime, union

我目前正在开发一个 C# 程序，我需要组合一堆时间范围。对于每个范围，我都有开始和结束时间。我发现了一个例子，这是在 Ruby 中完成的，但不是在 C# 中完成的。我基本上是在寻找时间范围联盟。我觉得可能有一种方法可以使用 linq 来做到这一点，但我想不出它。有任何想法吗？

所以例如

开始时间：1:30 结束时间：2:00

开始时间：1:45 结束时间：2:30

开始时间：3:00 结束时间：5:00

开始时间：4:00 结束时间：4:30

开始时间：4:45 结束时间：5:30

这组时间将作为

开始时间：1:30 结束时间：2:30

开始时间：3:00 结束时间：5:30

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T21:54:45.317

你可以看看这个支持`TimeRanges`和交集方法的项目：

[http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)

![在此处输入图像描述](../Images/3dd5f2c62e4f35a5366cfe45bdde1c0b.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T23:06:51.103

这看起来很有趣，所以我开始编写一些代码。

```
public class TimeRanges
{
    private List<TimeRange> _mergedTimeRanges = new List<TimeRange>();

    public void Add(TimeRange timeRange)
    {
        if(!_mergedTimeRanges.Any(x=>x.IsOverLap(timeRange)))
        {
            _mergedTimeRanges.Add(timeRange);
            return;
        }
        while (_mergedTimeRanges.Any(x => x.IsOverLap(timeRange) && x!=timeRange))
        {
            TimeRange toMergeRange = _mergedTimeRanges.First(x => x.IsOverLap(timeRange));
            toMergeRange.Merge(timeRange);
            timeRange = toMergeRange;
        }
    }

    public IEnumerable<TimeRange> GetMergedRanges()
    {
        return _mergedTimeRanges;
    }
} 
```

```
public class TimeRange
{
    public DateTime Start { get; private set; }
    public DateTime End { get; private set; }
    public TimeRange(DateTime start, DateTime end)
    {
        if (start >= end)
            throw new ArgumentException("Invalid time range, end must be later than start");
        Start = start;
        End = end;
    }

    public void Merge(TimeRange timeRange)
    {
        if (!IsOverLap(timeRange))
            throw new ArgumentException("Cannot merge timeranges that don't overlap", "timeRange");
        if (End < timeRange.End)
            End = timeRange.End;
        if (timeRange.Start < Start)
            Start = timeRange.Start;
    }

    public bool IsOverLap(TimeRange timeRange)
    {
        if (timeRange.End < Start)
            return false;
        if (timeRange.Start > End)
            return false;
        return true;
    }

    public bool Equals(TimeRange other)
    {
        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;
        return other.Start.Equals(Start) && other.End.Equals(End);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof (TimeRange)) return false;
        return Equals((TimeRange) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return (Start.GetHashCode()*397) ^ End.GetHashCode();
        }
    }
} 
```

如果有人感兴趣，我有几个测试

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-19T14:21:20.537

Johan Larsson 的回答对我帮助很大。我使用了它，并在以下情况下遇到了无限循环，所以我想我会做出贡献。

开始时间：1:30 结束时间：2:00

开始时间：2:45 结束时间：4:00

开始时间：1:45 结束时间：3:00 *（与前两个范围重叠）*

所以这是我想出的浓缩版：

```
private static IEnumerable<TimeRange> MergeTimeRanges(IEnumerable<TimeRange> ranges)
{
    var mergedRanges = new List<TimeRange>();

    foreach (var range in ranges)
    {
        var overlapping = mergedRanges.Where(r => !(range.End < r.Start) && !(range.Start> r.End)).ToArray();
        if (overlapping.Length == 0)
        {
            mergedRanges.Add(range);
        }
        else
        {
            // add a new range made up of the overlapping ranges plus the new range, then delete the ovelapping ranges
            mergedRanges.Add(new TimeRange { Start = Math.Min(range.Start, overlapping.Min(r => r.Start)), End = Math.Max(range.End, overlapping.Max(r => r.End)) });
            foreach (var r in overlapping)
                mergedRanges.Remove(r);
        }
    }

    return mergedRanges;
} 
```

注意：再想一想，可以通过对初始范围 (?) 进行排序来避免无限循环问题。没有把握。

# mysql - 用大于 8000 的大小替换所有 varchar 列声明

> ID：13130205
> 
> 赞同：1
> 
> 时间：2012-10-29T21:52:27.640
> 
> 标签：mysql, sql-server, regex, vb.net, parsing

我有一个来自 MySQL 的 sql 转储文件，我用它来创建 SQL Server (2005) 表。

我需要将大于 varchar(8000)（sql server 2005 的最大值）的列声明更改为 varchar(max)。

我正在使用 Visual Basic 脚本来解析转储文件并进行这些更改。它只是将整个文件视为一个字符串。如果数字大于8000，我只想更改，但我不知道该怎么做。有没有办法检查声明中的那个数字并改变它？我制作了一个正则表达式来查找声明中的数字。但我不知道如何说：

对于匹配 varchar(int>8000) 的所有字符串，更改为 varchar(max)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:04:03.467

正则表达式匹配大于（或等于）8000 的数字：`/^([89]\d{3}|\d{5,})$/`

where`/`是正则表达式的分隔符，后跟 start ( `^`)，后跟 ( `(...|...)`) 8 或 9 位和 3 位以上的数字 ( `[89]\d{3}`) 或 5 位或以上的数字 ( `\d{5,}`)，后跟字符串的结尾 ( `$`) 和正则表达式分隔符 ( `/`)。

要在您的上下文中使用，应该这样做......

```
/varchar\(\s*([89]\d{3}|\d{5,})\s*\)/ 
```

这已经转义了大括号`\(...\)`和可选空格`\s*`以及您的关键字`varchar`

# c# - 如何从以分组因子为键的分组操作中返回字典？

> ID：13130213
> 
> 赞同：1
> 
> 时间：2012-10-29T21:53:26.493
> 
> 标签：c#, linq

下面的代码创建一个字符串列表。分组因子是 StoreID (Item1)。我想要的是一个以分组因子（即StoreID）为键、字符串为值的字典。输入文件只是一个包含 3 列的文本文件：StoreID、Quantity 和其他内容（我不记得了），但这些值只是为商店的每一行连接在一起，以形成逗号和条形分隔的字符串。

```
var query = skuStoreStockLevel.GroupBy(x => x.Item1)
                .Select(g => g.Aggregate(new StringBuilder(),
                                         (sb, x) => sb.AppendFormat("{0}{1},{2},{3}", "|", x.Item1, x.Item2, x.Item3),
                                         (sb) => sb.ToString())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:56:11.253

您可以使用[Enumerable.ToDictionary](http://msdn.microsoft.com/en-us/library/bb548657.aspx)来执行此操作：

```
var query = skuStoreStockLevel.GroupBy(x => x.Item1)
            .ToDictionary(
                 g => g.Key,
                 g => g.Aggregate(new StringBuilder(),
                                     (sb, x) => sb.AppendFormat("|{0},{1},{2}", x.Item1, x.Item2, x.Item3),
                                     (sb) => sb.ToString())); 
```

# windows - 如何将存储在 utf-8 中的批处理文件转换为可通过另一个批处理文件运行的文件并运行它

> ID：13130214
> 
> 赞同：6
> 
> 时间：2012-10-29T21:53:29.073
> 
> 标签：windows, command-line, batch-file

我有一个用来创建批处理文件的程序。我的问题是程序的输出是 UTF-8，所以只要像 é,à,ö,Ä 这样的变音符号出现在我的批处理文件中，它就会失败。似乎我无法在创建批处理文件的程序中将输出转换为除 UTF-8 之外的任何内容。

所以我正在考虑创建两个 bach 文件。实际的一个和另一个将实际的从 UTF-8 转换为 ANSI（Windows 代码页 1252，或者可能是 cp 850），然后在此之后执行它。当然，我会添加一个 chcp xxxx 作为实际批处理文件的第一个命令。

所以我的问题是 Windows 上是否有 iconv 的替代方法 - 或者如何使用第二个批处理文件将 UTF-8 文本文件转换为 Windows 代码页。Win XP 及更高版本中是否有任何我可以使用的内置工具，或者是否有我可以使用的免费和可再分发工具？

笔记：

```
chcp 65001 
```

不适用于批处理文件。

**编辑1：**

在 Windows XP 上，我创建了两个批处理文件来测试第一个答案。

1.bat 编码为 UTF-8 没有 BOM 包含：

```
chcp 1252
cd üöä 
```

2.bat 也编码为没有 BOM 的 UTF-8 - 但没有任何特殊字符包含：

```
chcp 1252
type "1.bat" >"ansi_file.bat" 
```

执行 2.bat 时创建的结果 ansi_file.bat 仍将是 utf-8 编码而不是 ansi 编码。

**编辑2：**

提到的反向过程有效。

```
chcp 1252
echo ü > ansi.txt
cmd /u /c type ansi.txt > unicode.txt 
```

但以下后续行都不是

```
cmd /a /c type unicode.txt > back2ansi.txt
type unicode.txt > back2ansi_v2.txt 
```

让我回到ANSI。我在 Win XP 和 Win 7 上都试过这个。有人可以帮忙吗？

**笔记：**

我知道如何使用 Windows Script Host 和 VBS。我想避免依赖脚本主机。VBS方法在这里详细介绍：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa368046%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368046%28v=vs.85%29.aspx)

**编辑 3：**

上面创建的包含 unicode ü 的文本文件不是 utf-8

Windows unicode 文件是 HEX：

```
FC 00 20 00 0D 00 0A 00 
```

没有 BOM 的 UTF-8 将是 HEX：

```
C3 BC 20 0D 0A 
```

链接到的 VBS 解决方案仅适用于 unicode 表单，但在 UTF-8 表单上失败。我需要将 UTF-8 转换为另一个代码页，所以即使那个似乎不适合我......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T22:02:28.960

您已声明您不想依赖脚本主机，但没有本机批处理命令可以执行您想要的操作。您将不得不使用纯批处理之外的*东西。*脚本宿主是 Windows 原生的，所以我认为这不是问题。

以下**UTF8toANSI.vbs**脚本将 UTF-8（带或不带 BOM）转换为 ISO-8859-1，（与代码页 1252 基本相同）。它改编自[VB6/VbScsript 更改文件/写入编码为 ansii 的文件](https://stackoverflow.com/a/5186170/1012053)。

```
Option Explicit

Private Const adReadAll = -1
Private Const adSaveCreateOverWrite = 2
Private Const adTypeBinary = 1
Private Const adTypeText = 2
Private Const adWriteChar = 0

Private Sub UTF8toANSI(ByVal UTF8FName, ByVal ANSIFName)
  Dim strText

  With CreateObject("ADODB.Stream")
    .Open
    .Type = adTypeBinary
    .LoadFromFile UTF8FName
    .Type = adTypeText
    .Charset = "utf-8"
    strText = .ReadText(adReadAll)
    .Position = 0
    .SetEOS
    .Charset = "iso-8859-1"
    .WriteText strText, adWriteChar
    .SaveToFile ANSIFName, adSaveCreateOverWrite
    .Close
  End With
End Sub

UTF8toANSI WScript.Arguments(0), WScript.Arguments(1) 
```

VBS 脚本需要位于您的当前目录或路径中。

用于转换和运行 UTF8 编码脚本的批处理脚本可能如下所示：

```
@echo off
UTF8toANSI "utf8.bat" "ansi.bat"
ansi.bat 
```

***原始答案：*** *以下是我的原始答案，适用于带有 BOM 的 UTF-16，但不适用于 UTF-8*

如果输出通过管道传输或重定向到文件，则内部命令的输出会自动转换为 ANSI。

```
chcp 1252
type "utf_file.bat" >"ansi_file.bat" 
```

如果使用该选项启动 CMD，则该过程可以反向进行`/U`，但不幸的是，unicode 标头字节将丢失。但当然，这对您的情况来说不是问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T10:35:12.153

在 Unix 中，我会使用“iconv”工具在编码之间进行转换：

```
iconv --from-code UTF-8 --to-code iso-8859-1 -c inputfile > outputfile 
```

似乎可以在 [http://gnuwin32.sourceforge.net/packages/libiconv.htm获得适用于 Windows 的构建](http://gnuwin32.sourceforge.net/packages/libiconv.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:43:05.433

[您可以从GnuWin32](http://gnuwin32.sourceforge.net/)项目中获得许多 GNU 命令行实用程序。这包括`iconv`（以及更多）：

```
C:\> iconv.exe -f UTF-8 -t WINDOWS-1252 input.bat > output.bat 
```

# ruby-on-rails - 单击后退按钮时直接从缓存中获得响应

> ID：13130216
> 
> 赞同：10
> 
> 时间：2012-10-29T21:53:38.673
> 
> 标签：ruby-on-rails, caching, backbone.js, browser-history, pushstate

请注意，我认为此问题与 Backbone 或 JavaScript 无关，但有必要包含一些 Backbone 代码作为该问题的上下文。

**相关代码**

我有一个[客户端骨干路由器](http://backbonejs.org/#Router)，其路由采用名为`contactId`. 它看起来类似于：

```
Backbone.Router.extend({

  routes: {
    "jobs/new?contact_id=:contactId": "newForContact"
  },

  // Fetch the contact and initialize a new job model which 
  // is associated with that contact.
  newForContact: function(contactId) {
    var contact = new Contact(id: contactId);
    contact.fetch({
      success: _.bind(function(model, resp) {
        var job = new Job(contact: contact);
        this.new(job);
      }
    }, this));
  },

  // Show the JobView for the given job.
  new: function(jobModel) {
    view = new JobView(job: jobModel);
    $('body').append(view.render().el);
  }
}; 
```

现在我正在尝试在`pushState`打开的情况下使用此设置。

当我击中触发路线的`newForContact`路线时，一切都按预期工作。但是，如果此时我按下浏览器的后退按钮，我会`contact.fetch()`直接从浏览器的缓存中获得来自该方法的 JSON 响应。没有请求发送到服务器。

![获取 JSON 响应](../Images/fb12ed3583e70f1553a5a22817352e34.png)

**应用程序日志**

您可以在 Rails 应用程序日志中看到这一点。在这一部分中，我访问了触发的路线`newForContact`。

```
Started GET "/jobs/new?contact%5Bid%5D=1&contact%5Btype%5D=Customer" for 127.0.0.1 at 2012-10-31 22:41:48 +0000
Processing by JobsController#new as HTML
  Parameters: {"contact"=>{"id"=>"1", "type"=>"Customer"}}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Business Load (0.3ms)  SELECT "businesses".* FROM "businesses" WHERE "businesses"."id" IN (1)
  Rendered shared/_search_form.html.erb (0.3ms)
  Job Load (0.4ms)  SELECT "jobs".* FROM "jobs" WHERE "jobs"."business_id" = 1 ORDER BY created_at desc
  Rendered jobs/_list.html.erb (1.5ms)
  Rendered jobs/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_head_content.html.erb (0.7ms)
  Rendered layouts/_flash.html.erb (0.0ms)
Cache read: views/jobs/main_nav/d6a805d9b6f285e424f207add4f35595
Read fragment views/jobs/main_nav/d6a805d9b6f285e424f207add4f35595 (0.4ms)
  Rendered layouts/_nav.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (0.7ms)
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 1.0ms)
Cache read: http://print.dev/customers/1? 
```

您可以看到它此时使用 JSON 请求获取联系人。

```
Started GET "/customers/1" for 127.0.0.1 at 2012-10-31 22:41:48 +0000
Processing by CustomersController#show as JSON
  Parameters: {"id"=>"1"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Business Load (0.4ms)  SELECT "businesses".* FROM "businesses" WHERE "businesses"."id" IN (1)
  Customer Load (0.2ms)  SELECT "customers".* FROM "customers" WHERE "customers"."business_id" = 1 AND "customers"."id" = $1 LIMIT 1  [["id", "1"]]
  CustomerEmployee Load (0.3ms)  SELECT "customer_employees".* FROM "customer_employees" WHERE "customer_employees"."employer_id" IN (1)
  Job Load (0.4ms)  SELECT "jobs".* FROM "jobs" WHERE "jobs"."contact_type" = 'Customer' AND "jobs"."contact_id" IN (1)
  Invoice Load (0.3ms)  SELECT "invoices".* FROM "invoices" WHERE "invoices"."client_id" IN (1)
  Job Load (0.5ms)  SELECT "jobs".* FROM "jobs" WHERE "jobs"."contact_id" = 1 AND "jobs"."contact_type" = 'Customer' AND "jobs"."state" = 'finished' AND "jobs"."invoice_id" IS NULL
  Rendered customers/show.json.rabl (2.8ms)
Completed 200 OK in 67ms (Views: 3.2ms | ActiveRecord: 2.5ms) 
```

此时，我会按下浏览器的后退按钮，但服务器上没有记录新请求。

**Rails 环境**

这只发生在我的登台服务器（[Heroku](http://www.heroku.com/)）上，而不是在开发中。[我可以通过在暂存环境中使用Pow](http://pow.cx/)运行应用程序来在本地重新创建它，该环境在 rails 配置中打开了缓存。

```
config.action_controller.perform_caching = true 
```

请注意，即使打开了缓存，我也无法在开发环境中重新创建错误。

此问题发生在`Chrome 22.0.1229.94`和`FF 16.0.2`中`Safari 6.0.1`。我正在使用 Rails `3.2.8`。

**可能相关的问题**

[看来这家伙和我有一个非常相似的问题。](https://stackoverflow.com/questions/11059154/ajax-pushstate-bug-in-chrome)

**现场样品**

如果你真的想要，你可以在我的 Heroku 登台服务器上实时查看问题。

复制步骤（**编辑：**自从我修复了问题以来，这些不再起作用）。

1.  [使用电子邮件在此处](http://print-staging.herokuapp.com/login)登录：user@example.com 并通过：foobar
2.  访问[http://print-staging.herokuapp.com/customers/2](http://print-staging.herokuapp.com/customers/2)。您应该会看到一个看起来很乱的对话框打开。
3.  单击对话框中的“新作业”小链接。页面应该改变并且应该打开一个新对话框。
4.  单击浏览器后退按钮。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T23:18:13.470

您可以在服务器端的响应中添加 no-cache 标头，这应该指示浏览器不缓存响应：

```
response.headers["Cache-Control"] = "no-cache" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:09:34.410

**我没有使用 Backbone，这正是我使用 AJAX / pushstate 所做的**

* * *

我`history.pushState()`在我的 AJAX 响应中使用。

```
var url = "http://foo.com/path/to/page";
var relative_url = UrlToRelative(url); // some function to convert a URL to relative
var absolute_url = UrlToAbsolute(url); // some function to convert a URL to absolute
history.pushState(
  {
    hash: "#"+relative_url,
    title: document.title,
    initialHref: absolute_url
  },
  document.title,
  url
); 
```

我有一个事件监听器`onPopState`：

```
window.onpopstate = function(event) {
  if (event.state && event.state.initialHref) {
    $.ajax({
      complete: null,
      data: {},
      dataType: "script",
      success: null,
      type: 'GET',
      url: event.state.initialHref
    });
  }
} 
```

此事件侦听器发出 AJAX 请求。唯一的问题是，当返回到需要几秒钟才能获得服务器响应的页面时，屏幕需要几秒钟才能改变。并且没有微调器或忙碌进度指示器。

# google-closure-compiler - 避免外部编译器中的编译器错误（闭包编译器）

> ID：13130221
> 
> 赞同：1
> 
> 时间：2012-10-29T21:53:53.987
> 
> 标签：google-closure-compiler

Closure Compiler 可以配置为将选定类型的警告升级为错误。当开发团队想要让他们的 JS 达到更严格的标准时，这很有帮助。但是，我遇到了一个问题，我们依赖的许多库（例如 RequireJS）并不那么严格。所以当我这样做时：

```
java -jar compiler.jar --js input.js
                       --compilation_level ADVANCED_COMPILATION 
                       --externs require.js
                       --jscomp_error=missingProperties 
```

由于 RequireJS 中缺少属性错误，构建失败。当然，没有错误升级，构建成功。

在 Require 的情况下，公共符号非常少，以至于创建一个虚假的 externs 文件而不是使用真实的东西是微不足道的。但这并不能扩展——我们使用了无数其他库，这些库都需要维护单独的外部合同。

我看到了两种可能的解决方案，但没有足够的信息来执行任何一种。(1) 让 Closure 回退到外部人员的正常警告配置；或 (2) 使用可以可靠/一致地为给定库提取外部合同的工具。或者我没有想到的任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:11:00.717

您想创建外部文件，而不是使用原始源。使用原始源代码仅适用于非常简单的库。我知道有几个工具可以提取外部变量，但它们不提供类型信息。通常，您想向库维护人员询问一些东西，然后询问 Closure Compiler 邮件列表，然后自己构建一些东西（并分享它）。

# unit-testing - 单元测试 - 边缘案例是否需要单独的测试方法？

> ID：13130226
> 
> 赞同：1
> 
> 时间：2012-10-29T21:54:48.177
> 
> 标签：unit-testing, language-agnostic

在进行单元测试时，是否应该边缘案例测试相同的方法，每个都需要单独的测试方法。例如，测试传递给以下函数的空字符串：

```
public function add($numbers)
{
    $numbers = preg_replace('/\s/', '', $numbers);
    if ($numbers === "") {
        return 0;
    }
} 
```

我显然想捕捉边缘情况，例如：

```
""
" " 
"\t \n"
"asd" 
```

ETC

那么需要多少测试方法来证明这种方法有效呢？

```
public function testAddEmptyString()
{
    $stringCalculator = new StringCalculator();
    $this->assertSame(0, $stringCalculator->add(""));
}

public function testAddEmptyStringWithSpaces()
{
    $stringCalculator = new StringCalculator();
    $this->assertSame(0, $stringCalculator->add("  "));
}

public function testAddEmptyStringWithCharacters()
{
    $stringCalculator = new StringCalculator();
    $this->assertSame(0, $stringCalculator->add("asd"));
} 
```

这似乎测试类将包含大量的方法来处理任何不平凡的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:03:23.390

在这个简单的情况下（一个实际的功能，即没有副作用，没有异常，基本上每个测试用例一行）我会说一个单一的测试方法就可以了。

如果您有更复杂的测试用例需要设置代码，那么每个测试用例都应该有自己的测试方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:05:39.257

这当然是一个见仁见智的问题，所以恕我直言，测试方法应该*始终*测试单个场景。

话虽如此，并考虑到您应该像对待生产代码一样认真对待您的测试代码，您应该争取一个干净的设计 - 在这种情况下，[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

每种语言都有自己的方法来实现这一点，但通常提取方法就可以了。就其本身而言，进行多次测试并没有什么坏处，只要它们是孤立的、意图明确的等。

例如，xUnit (C#) 解决此问题的方式如下所示：

```
[Theory]
[InlineData("")]
[InlineData(" ")]
[InlineData("\t \n")]
[InlineData("asd")]
public void Add_NonNumber_ZeroReturned(string numbers)
{
    var underTest = new UnderTest();
    var result = underTest.Add(numbers);
    Assert.Equal(0, result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:16:04.020

您应该将所有这些边缘情况值的数组与您的测试分开。

```
String[] edgeCaseValues = {""," ","\t \n","asd"}; 
```

然后在测试中，您可以简单地遍历它们，将它们传递给您的函数

```
foreach(var edgeCaseValue in edgeCaseValues)
{
    $stringCalculator = new StringCalculator();
    $this->assertSame(0, $stringCalculator->add(edgeCaseValue));
} 
```

这样你就可以在其他测试中重用它们，如果你添加一个新的边缘案例值，它们都会被添加到所有测试中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:10:06.043

你应该有很多单独的测试方法，不要关心它们有多少。

尝试将多个测试硬塞到一个方法中的坏处是，当测试失败时，您不知道损坏的真实程度，因为测试的一部分失败会阻止测试的其余部分运行。当您看到测试中断并修复它时，结果可能会弹出更多故障。

如果您组织测试以便在单独的测试中处理不同的情况，那么您将立即看到所有失败。

如果所有边缘情况都是传入不同数据的实例，并且它们都以相同的方式调用，那么您可能需要检查您的测试框架是否支持参数化测试。

# java - GAE 会话不起作用？

> ID：13130227
> 
> 赞同：0
> 
> 时间：2012-10-29T21:54:53.300
> 
> 标签：java, google-app-engine, jsp, session

我的项目在调试模式下运行良好，但在我部署在 gae 上时运行不佳。会话似乎有问题？

下面列出了关键的java和jsp：

新StudInfoServlet.java

```
public class NewStudInfoServlet extends HttpServlet {
public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    if (req.getParameterValues("StuFirName") != null
            && req.getParameter("StuFirName") != ""
            ) {

            Stud stud = new Stud();
            stud.setFirstName(req.getParameter("StuFirName"));              

            req.getSession().setAttribute("NewStud", stud); 
            req.getSession().setAttribute("StuInfoPage", "NewStudSchoolInfo");
            req.getSession().setAttribute("NewLackInfo", "successful!");                
        } else {
        req.getSession().setAttribute("StuInfoPage", "NewStudInfo");
        req.getSession().setAttribute("NewLackInfo", "First name, Last name, Graduation Year is required");
    }
    resp.sendRedirect("/NewAlumni.jsp"); 
```

新校友.jsp

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
    <%@include file='WEB-INF/Header.jsp'%>
    <%
        if (session.getAttribute("StuInfoPage") != null
                && session.getAttribute("StuInfoPage").toString() == "NewStudSchoolInfo") {
    %>
    <%@include file='WEB-INF/NewStudSchoolInfo.jsp'%>       
    <%
        } else {
    %>
    <%@include file='WEB-INF/NewStudInfo.jsp'%>
    <%
        }
    %> 
```

在调试模式下，它运行良好：用户填写名字并按下按钮提交，然后NewAlumni.jsp将包含WEB-INF/NewStudSchoolInfo.jsp，让用户提交更多信息；

但是，在我在 GAE 中部署应用程序后，它的工作方式有所不同。在用户填写名字并按下提交按钮后，NewAlumni.jsp 会不断包含 WEB-INF/NewStudInfo.jsp 而不是 WEB-INF/NewStudSchoolInfo.jsp。我相信

```
req.getSession().setAttribute("NewStud", stud); 
req.getSession().setAttribute("StuInfoPage", "NewStudSchoolInfo");
req.getSession().setAttribute("NewLackInfo", "successful!"); 
```

被处决是因为我可以看到该死的“成功！” 在 NewStudInfo.jsp 中。

怎么了？需要你的帮助。

我准备在 appengine-web.xml 中设置为 true

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:12:05.880

[如文档](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)`<sessions-enabled>true</sessions-enabled>`中所述，您是否通过添加到 appengine-web.xml 文件来启用 HTTP 会话？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:35:18.570

您应该使用 equals 而不是 == 运算符检查字符串是否相等。更改 `session.getAttribute("StuInfoPage").toString() == "NewStudSchoolInfo"` 为 `session.getAttribute("StuInfoPage").toString().equals("NewStudSchoolInfo")`

# coldfusion - FW1 服务电话

> ID：13130231
> 
> 赞同：0
> 
> 时间：2012-10-29T21:55:19.357
> 
> 标签：coldfusion, fw1

有人可以解释 FW1 服务调用是如何工作的吗？当我阅读下面手册中的部分时。我认为以下应该有效。

参见：[https ://github.com/seancorfield/fw1/wiki/Reference-Manual](https://github.com/seancorfield/fw1/wiki/Reference-Manual)

> 服务方法被传递一组命名参数，基于控制器方法执行后请求上下文中的任何内容（即 before()、startItem() 和 item() 之后）。服务方法可能会返回一个结果，该结果由 FW/1 放入请求上下文中。默认情况下，FW/1 1.x 将（初始）服务方法调用的结果存储在 rc.data 中。

控制器/comparables.cfc

```
component { 
public any function init( fw ) {
    variables.fw = fw;
    return this;
}

public void function autocomplete( rc ) {
    // queue up a specific service (comparables.autocomplete) with named result (autocomplete)
    var args = StructNew();
    StructInsert( args, "table", "The Table" );
    StructInsert( args, "column", "The Column" );
    variables.fw.service( 'comparables.autocomplete', 'autocomplete', args );
}

} 
```

服务/comparables.cfc

```
component { 
public any function autocomplete( string table, string column, string term ) {      
    return "not yet implemented #table# #column# #term#";
} 
```

}

以下视图显示 rc.autocomplete = "not yet implemented"

意见/可比性/autocomplete.cfm

```
<cfdump var="#variables.rc#" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:57:33.940

我终于能够弄清楚这一切是如何结合在一起的。以下服务调用将立即返回一个值，而在控制器方法完成之前不会调用上述服务调用。

```
comp_serv = CreateObject("component","services.comparables");
rc.comparables = comp_serv.autocomplete( "table","colum","term" ); 
```

# html - 隐藏 iframe 内的边框

> ID：13130232
> 
> 赞同：0
> 
> 时间：2012-10-29T21:55:22.970
> 
> 标签：html, css, wordpress, iframe

我添加了 YouTube 订阅按钮：

```
<iframe src="http://www.youtube.com/subscribe_widget?p=XYZ" 
   style="overflow: hidden; height: 105px; width: 300px; border: 0;" 
   scrolling="no" frameBorder="0">
</iframe> 
```

[这个网站有一个活生生的例子](http://www.labnol.org/internet/youtube-subscribe-button/18089/)

iframe 包含我想删除的边框。我取得成功的唯一方法是为每一边创建一个 div 并掩盖边界。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:10:23.373

您可以将该 iframe 放入容器中并隐藏所述容器的溢出，这将证明您隐藏边框的简单方法：

```
​.container{height:100px;width:295px;overflow:hidden;}
iframe{position:relative;left:-2px;top:-2px;} 
```

​ 概念证明：http: [//jsfiddle.net/hillsons/3KYp9/](http://jsfiddle.net/hillsons/3KYp9/)

# c++ - 如何从档案中检索 true_type？

> ID：13130236
> 
> 赞同：3
> 
> 时间：2012-10-29T21:55:40.600
> 
> 标签：c++, serialization, boost, polymorphism

## 语境

我使用 Boost 序列化库来保存和加载系统的对象。我围绕这个库定义了实践，所以我总是从一个基类序列化（每个可序列化的类都继承自`ISerializable`）。因此，true_type（即最派生的类型）与 this_type（即，`ISerializable`）不同，并且 true_type 存储在档案中。

## 我的问题

如何仅从存档对象中检索此 true_type（作为写入存档中的字符串）？

## 细节

让我们有这个类树：

ISerializable <|-- B <|-- D

如果我做：

```
B* b = new D();
b->SaveToFile(path); // <= this will do the serialization `ar & this`
                           (`this` being a `ISerializable*`) 
```

我获得了一个存档，其中写入了 true_type “D”（无论存档的类型：​​txt、bin 或 xml）。

使用`b`对象和此代码：

```
const boost::serialization::extended_type_info & true_type
        = * boost::serialization::type_info_implementation<ISerializable>::type
            ::get_const_instance().get_derived_extended_type_info(*b); 
```

我有我想要的`true_type.get_key()`，即：“D”。我可以验证在每个存档存储中都写入了“D” `b`。我的问题又来了：如何仅使用存档对象（从存档文件构造而没有错误）才能检索此密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T09:59:49.663

它应该是这样的：

```
B * b;
ar >> b;//loading archive
const boost::serialization::extended_type_info & true_type
    = * boost::serialization::type_info_implementation<ISerializable>::type
        ::get_const_instance().get_derived_extended_type_info(*b); 
```

因为保存的类型是 D，所以加载类型也是 D。

# java - 如何返回 BoundingVolume 内的所有点

> ID：13130238
> 
> 赞同：2
> 
> 时间：2012-10-29T21:55:42.800
> 
> 标签：java, algorithm, 3d, jmonkeyengine

我正在试验 jmonkeyengine 并且我遇到了需要返回落在边界体积内的所有点（来自预定义的大量点）。创建卷本身很容易，但我想获得所有包含点的地图。

社区有什么想法吗？如果需要，我很乐意使用其他库，由于社区支持和 BoundingCapsule 形状，我被 jmonkey 所吸引。

编辑：我考虑过遍历我的所有点并使用 .contains，不幸的是，该空间包含数十万个点和相对较小的胶囊。当然，我肯定缺少一些聪明的数学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:29:37.647

如果您只需要这样做一次，那么您最好的办法就是对照边界体积检查每个点。

如果您需要执行多个查询，您可以通过设置空间查询结构来提高查询的性能。请注意，您首先需要花费时间和内存来构建和维护您的查询结构，但如果您可以将费用分摊到大量查询上，那就没问题了。

根据您的需要，您可能希望使用[grid](http://graphics.cs.kuleuven.be/publications/LD08CFRGRTb/)、[quadtree](http://en.wikipedia.org/wiki/Quadtree)、[Kd tree](http://graphics.stanford.edu/papers/gpu_kdtree/)或[R-tree](http://en.wikipedia.org/wiki/R-tree)来加速您的空间查询。以上并不是加速结构的详尽列表，但它包含了一些最常用的选项。

# asp.net - 跨 Web 应用程序共享 SQL Server 会话状态

> ID：13130239
> 
> 赞同：10
> 
> 时间：2012-10-29T21:56:00.850
> 
> 标签：asp.net, sql-server, iis-7.5, session-variables, session-state

我正在设置一个非常基本的 SQL Server 会话状态演示，但是在让它工作时遇到了一些麻烦。我正在尝试使用 IIS 7.5 和 SQL Server 2008 R2 在本地运行 Windows 7 进行测试。

**最终，我需要一种方法来跟踪登录到在几个不同 Web 服务器之间进行负载平衡的系统的用户数量。因此，每次用户登录或注销时，我都需要更新一个会话变量（存储在 SQL 中）。所以会话 ID 可能总是不同的。这可能吗？**

这是我到目前为止所做的：

1.  在 IIS 中创建了两个新站点（Site1 和 Site2）
2.  在 VS 2010 中创建了两个新的 Web 应用程序项目（Site1 和 Site2）
3.  在这两个站点中，在 Default.aspx 页面上，我创建了一个按钮，单击该按钮时会将“Site1”或“Site2”（取决于站点）保存到名为“LastSiteUsed”的会话变量中。还有另一个按钮，单击该按钮时，将从“LastSiteUsed”会话变量中读取值并将其显示在标签中。
4.  在 SQL 中，我创建了一个名为 dbSessionTest 的新数据库。然后我按照[MSDN 上的说明使用 aspnet_regsql 工具安装会话状态数据库](http://msdn.microsoft.com/en-us/library/ms178586.aspx)。
5.  在我的两个 Web 应用程序的 Web.config 文件中，我在下面添加了以下内容`<System.Web>`：

`<sessionState mode="SQLServer" sqlConnectionString="server=.\sqlexpress;database=dbSessionTest;uid=myUsername;pwd=myPassword" cookieless="false" timeout="20" allowCustomSqlDatabase="true"/>`

两个站点都正常运行，但它们似乎没有*共享*会话。例如，当我单击按钮从 Site1 保存会话变量时，我希望能够从 Site2 读取该值，但它不起作用。Site2 只会返回“Site2”，Site1 只会返回“Site1”。

有人对我可能做错的事情有任何想法吗？我认为我应该能够从 Site2 读取 Site1 设置的值是错误的吗？

**更新：**

我可以看到会话数据存储在`ASPStateTempSessions`SQL Management Studio 的表中，但每个站点仍然只能看到它写入的值。两个站点都像这样设置会话变量：

```
Session("LastSiteUsed") = "Site2" 
```

两个站点都在检索以下值：

```
lblValue.Text = "Value from Session: " & Session("LastSiteUsed").ToString 
```

访问存储在 SQL Server 中的会话变量是否需要以不同的方式执行此操作？

**更新 2：**

我尝试使用默认数据库 ASPState，它是通过运行以下命令创建的：

```
aspnet_regsql.exe -S MyServerName -E -ssadd -sstype p 
```

然后简化了我的每个 Web.config 文件，例如：

```
<sessionState mode="SQLServer" sqlConnectionString="Data Source=.\sqlexpress;User ID=myUsername;Password=myPassword" cookieless="false" timeout="20"/> 
```

但同样，没有运气。我希望能够从 Site1 设置会话变量，然后从 Site2 读取值，但它不起作用。同样，我可以看到表格中出现的条目，`ASPStateTempSessions`所以我知道它们输入正确。我注意到的一件事是他们有不同的会话 ID？

在设置/读取相同的会话变量时，我是否需要做一些不同的事情来确保在我的站点之间使用相同的会话 ID？

**更新 3：**

我已按照**[本文](http://www.stionasoftware.com/Blogs/post/2010/10/27/Sharing-NET-Session-across-multiple-applications.aspx)**中的说明修改了 SP 并向表中添加了用于分组的`ASPStateTempApplications`列。这种工作，但前提是我的两个网站都在同一个浏览器中打开（使用标签）*。*我需要能够在 IE 中打开 Site1，将值保存到我的会话变量，关闭浏览器，在 Chrome 中打开 Site2，然后读取值。从我用 SQL Server 会话状态读到的所有内容......这应该是可能的。

**更新 4 - 解决方案：**

我遵循了@SilverNinja 提供的**[这篇文章的答案。](https://stackoverflow.com/questions/2868316/sharing-sessions-across-applications-using-the-asp-net-session-state-service/3151315#3151315)**我通过命令提示符重新创建了`ASPState`数据库（以撤消更新 #3 中的 SP 更改），然后`TempGetAppID`根据链接中的答案修改了 SP。我还更新了我的两个 Web.config 文件以匹配该文章中的答案：

```
<sessionState mode="SQLServer"
              sqlConnectionString="Data Source=.\sqlexpress;User ID=myUsername;Password=myPassword;Application Name=CacheTest"/> 
```

我还在两个 Web.config 文件中包含了相同的机器密钥：

```
<machineKey validationKey="59C42C5AB0988049AB0555E3F2128061AE9B75E3A522F25B34A21A46B51F188A5C0C1C74F918DFB44C33406B6E874A54167DFA06AC3BE1C3FEE8506E710015DB" decryptionKey="3C98C7E33D6BC8A8C4B7D966F42F2818D33AAB84A81C594AF8F4A533ADB23B97" validation="SHA1" decryption="AES" /> 
```

现在我可以（使用 IE）打开我的两个站点，从 Site1 设置一个值，然后从 Site2 读取它（反之亦然）。当我检查表格时，只有一个 SessionID 存在（两个站点都正确使用相同的会话）。在打开新浏览器（例如，使用 Chrome）之前，我的想法是错误的，会使用相同的会话 - 新浏览器将启动它自己的会话。但是，在负载平衡的情况下，这不会导致任何问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T17:53:11.037

您遇到的问题是**跨 ASP.NET 应用程序共享会话状态**。SQL Server 会话提供程序不支持开箱即用。请参阅此[SO 帖子，了解对 SQL Server 会话提供程序进行哪些更改以支持跨应用程序会话](https://stackoverflow.com/a/3151315/175679)。

我不会使用 session 来管理这个共享状态（即`LastSiteUsed`）。此信息应与用户配置文件存储（*[成员资格](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)、[配置文件提供者](http://msdn.microsoft.com/en-us/library/2y3fs9xs%28v=vs.100%29.aspx)、自定义数据库等*）一起保存。由于会话可能过期 - 跨应用程序使用共享会话不是跟踪持久用户特定状态的可靠机制。如果持久性不重要，则将[AppFabric 缓存](http://msdn.microsoft.com/en-us/library/ff383731%28v=azure.10%29.aspx)用于内存中的跨应用程序共享状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T23:34:18.460

对于任何想要或需要在不修改数据库存储过程的情况下解决此问题的人，请考虑这种方法（不适合胆小的人）。

基本思想是有一个`SqlSessionStateStore.SqlPartitionInfo`存储在其中的静态实例`System.Web.SessionState.SqlSessionStateStore.s_singlePartitionInfo`，我通过调用`InitSqlInfo`. 初始化此实例后，我设置内部`_appSuffix`字段的值。在设置字段之前需要初始化实例`_appSuffix`，否则我的自定义值将在初始化期间被覆盖。我使用与 ASP.NET 状态数据库中相同的哈希函数从提供的应用程序名称计算哈希码。

请注意，这很糟糕，并且完全依赖于可能随时更改的内部实现细节。但是，我不知道任何实用的替代方案。自行决定使用并承担风险。

现在我已经给出了我的免责声明，如果 .NET BCL 中的这个实现确实发生了变化，我会感到惊讶，因为这种身份验证方法正在被替换，我认为微软没有任何理由在其中进行修补。

```
/*
 * This code is a workaround for the fact that session state in ASP.NET SqlServer mode is isolated by application. The AppDomain's appId is used to
 * segregate applications, and there is no official way exposed to modify this behaviour.
 * 
 * Some workarounds tackle the problem by modifying the ASP.NET state database. This workaround approaches the problem from the application code
 * and will be appropriate for those who do not want to alter the database. We are using it during a migration process from old to new technology stacks, 
 * where we want the transition between the two sites to be seamless.
 * 
 * As always, when relying on implementation details, the reflection based approach used here may break in future / past versions of the .NET framework.
 * Test thoroughly.
 * 
 * Usage: add this to your Global.asax:
 *       protected void Application_BeginRequest()
 *       {
 *           SessionStateCrossApplicationHacker.SetSessionStateApplicationName("an application");
 *       }
 */

using System;
using System.Data.SqlClient;
using System.Globalization;
using System.Reflection;
using System.Web.SessionState;

public static class SessionStateCrossApplicationHacker
{
    static string _appName;
    static readonly object _appNameLock = new object();

    public static void SetSessionStateApplicationName(string appName)
    {
        if (_appName != appName)
        {
            lock (_appNameLock)
            {
                if (_appName != appName)
                {
                    SetSessionStateApplicationNameOnceOnly(appName);

                    _appName = appName;
                }
            }
        }
    }

    static void SetSessionStateApplicationNameOnceOnly(string appName)
    {
        //get the static instance of SqlSessionStateStore.SqlPartitionInfo from System.Web.SessionState.SqlSessionStateStore.s_singlePartitionInfo
        var sqlSessionStateStoreType = typeof (SessionStateMode).Assembly.GetType("System.Web.SessionState.SqlSessionStateStore");
        var sqlSessionStatePartitionInfoInstance = GetStaticFieldValue(sqlSessionStateStoreType, "s_singlePartitionInfo");
        if (sqlSessionStatePartitionInfoInstance == null)
            throw new InvalidOperationException("You'll need to call this method later in the pipeline - the session state mechanism (SessionStateModule, which is an IHttpModule) has not been initialised yet. Try calling this method in Global.asax's Application_BeginRequest. Also make sure that you do not specify a partitionResolverType in your web.config.");

        //ensure that the session has not been used prior to this with an incorrect app ID
        var isStaticSqlPartitionInfoInitialised = GetFieldValue<bool>(sqlSessionStatePartitionInfoInstance, "_sqlInfoInited");
        if (isStaticSqlPartitionInfoInitialised)
            throw new InvalidOperationException("You'll need to call this method earlier in the pipeline - before any sessions have been loaded.");

        //force initialisation of the static SqlSessionStateStore.SqlPartitionInfo instance - otherwise this will happen later and overwrite our change
        var connectionString = GetFieldValue<string>(sqlSessionStatePartitionInfoInstance, "_sqlConnectionString");
        using (var connection = new SqlConnection(connectionString))
        {
            connection.Open();
            CallInstanceMethod(sqlSessionStatePartitionInfoInstance, "InitSqlInfo", connection);
        }

        //calculate and set the application hash code
        string applicationNameHashCode = GetHashCode(appName).ToString("x8", CultureInfo.InvariantCulture);
        GetField(sqlSessionStatePartitionInfoInstance, "_appSuffix").SetValue(sqlSessionStatePartitionInfoInstance, applicationNameHashCode);
    }

    static int GetHashCode(string appName)
    {
        string s = appName.ToLower();
        int hash = 5381;
        int len = s.Length;

        for (int i = 0; i < len; i++)
        {
            int c = Convert.ToInt32(s[i]);
            hash = ((hash << 5) + hash) ^ c;
        }

        return hash;
    }

    static void CallInstanceMethod(object instance, string methodName, params object[] parameters)
    {
        var methodInfo = instance.GetType().GetMethod(methodName, BindingFlags.NonPublic | BindingFlags.Instance);
        methodInfo.Invoke(instance, parameters);
    }

    static object GetStaticFieldValue(Type typeWithStaticField, string staticFieldName)
    {
        return typeWithStaticField.GetField(staticFieldName, BindingFlags.NonPublic | BindingFlags.Static).GetValue(null);
    }

    static FieldInfo GetField(object instance, string name)
    {
        return instance.GetType().GetField(name, BindingFlags.NonPublic | BindingFlags.Instance);
    }

    static T GetFieldValue<T>(object instance, string name)
    {
        return (T)GetField(instance, name).GetValue(instance);
    }
} 
```

# c# - 如何创建像这样的匿名类型 var c = List ()

> ID：13130240
> 
> 赞同：3
> 
> 时间：2012-10-29T21:56:06.297
> 
> 标签：c#, c#-4.0, generics, collections, anonymous-types

我想创建一个可以迭代的[匿名类型，接受一个字符串和一个字符串数组。](http://msdn.microsoft.com/en-us/library/bb397696.aspx)目标是创建一个组列表，每个组包含人员：

我想知道这样***的伪代码***是否可行：

```
var myAnoty =new List<string, string[]>();
myAnoty.add("Programmers", ["Linus", "Bill", "Anders"]);
myAnoty.add("Users", ["John", "Melissa", "Bert"]); 
```

正如[Muzz](https://stackoverflow.com/users/933526/muzz)在评论中指出的那样，我上面的伪代码没有使用匿名类型。下面的 Reed Copsey 回答正在使用它们：`var m = new { Group = "Men", Members = new[] { "John", "Tom" } }`

## 不使用匿名类型的工作演示

以下代码[适用于 LinqPad](http://www.linqpad.net/CodeSnippetIDE.aspx)：

```
void Main()
{
    List<Object> myAnoties = new List<Object>();
    myAnoties.Add(new Anoty {Group="Men",   Member=new string[]{"John","Tom"}} );
    myAnoties.Add(new Anoty {Group="Women", Member=new string[]{"Eve","Anna"}} );
    myAnoties.Dump();
}

// Define other methods and classes here
class Anoty{
    public string Group{get; set;}
    public string[] Member{get; set;}       
} 
```

## 不使用匿名类型

以下代码使用匿名类型。但不知何故，字符串数组不适用于匿名类型。

```
var m = new { Group= "Men", Member=string[]{"John","Tom"}};
var w = new { Group= "Women", Member=string[]{"Eve","Anna"}};
List<object> myAnoties = new List<object>();
myAnoties.Add(m);
myAnoties.Add(w); 
```

有没有办法让我的伪代码`var x = new List<string,string[]>()`或匿名类型（如上）的东西运行？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T22:03:44.110

您可以完成类似伪代码的操作：

```
var myAnoty = new Dictionary<string, string[]>();
myAnoty.Add("Programmers", new[] { "Linus", "Bill", "Anders" });
myAnoty.Add("Users", new[] { "John", "Melissa", "Bert" }); 
```

或者，如果你想要一个`List<T>`：

```
var myAnoty = new List<Tuple<string, string[]>>();
myAnoty.Add(Tuple.Create("Programmers", new[] { "Linus", "Bill", "Anders" }));
myAnoty.Add(Tuple.Create("Users", new[] { "John", "Melissa", "Bert" })); 
```

您还可以在匿名类型中使用数组：

```
var m = new { Group = "Men", Members = new[] { "John", "Tom" } } 
var w = new { Group = "Women", Members = new[] { "Eve", "Anna" } }; 
```

但是，将其分配给 a`List<object>`将使其实际上无法使用，因为您将无法再按名称*访问*项目。但是，您可以将它们放入 a`List<dynamic>`并访问它们。

话虽如此，我强烈建议重新考虑完全使用匿名打字的目标。对于要存储对象的情况，通常优先使用命名类型。匿名类型在这种情况下节省了一些输入，但增加了巨大的维护成本，因为它们增加了很多复杂性，并且您失去了很多安全性（即：没有适当的构造函数等）。创建自定义类型所需的额外时间通常远小于在持久化值的情况下使用匿名类型的调试和维护成本。

# javascript - 在 Handsontable 中编写复合编辑器

> ID：13130241
> 
> 赞同：3
> 
> 时间：2012-10-29T21:56:07.547
> 
> 标签：javascript, jquery, jquery-plugins, handsontable

在此示例中，您可以组合从一个单元格驱动多个字段的单元格编辑器。
[http://mleibman.github.com/SlickGrid/examples/example3a-compound-editors.html](http://mleibman.github.com/SlickGrid/examples/example3a-compound-editors.html)

我想知道 ti 是否也可以用于[jquery-handsontable](https://github.com/warpech/jquery-handsontable)。

任何提示如何通过使用handsontable来制作它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:40:17.507

有趣的问题。这有点挑战性，但肯定是可行的。

只需查看 CheckboxEditor 和 CheckboxRenderer 的源代码，即可了解如何`<input>`在单元格中插入编辑器：

*   [https://github.com/warpech/jquery-handsontable/blob/master/src/editors/checkboxEditor.js](https://github.com/warpech/jquery-handsontable/blob/master/src/editors/checkboxEditor.js)
*   [https://github.com/warpech/jquery-handsontable/blob/master/src/renderers/checkboxRenderer.js](https://github.com/warpech/jquery-handsontable/blob/master/src/renderers/checkboxRenderer.js)

将其加倍并将输入类型更改为`text`，您将拥有一个复合文本编辑器。

也就是说，我不是这个概念的忠实拥护者，因为它打破了使用电子表格的标准流程。很难保持当前的键盘体验。通常，您希望在单元格上按 Enter 或键盘箭头的效果与 Excel 中的效果相似。

# silverlight - 从 Silverlight 中的 itemscontrol 内的动态组合框中捕获选定的值

> ID：13130244
> 
> 赞同：0
> 
> 时间：2012-10-29T21:56:24.907
> 
> 标签：silverlight, binding, combobox, itemscontrol, selectedvalue

当我试图从我在项目控件中制作的一组动态组合框中获取选定的值时遇到了这个问题，为了更好地解释这里是我的 xaml 代码。

```
<ItemsControl Name="ItemsControlP"
                      Width="120"
                      Margin="5"
                      ItemsSource="{Binding ElementName=personWindow, Path=DataContext.City}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ComboBox Height="20"
                              DisplayMemberPath="Name"
                              IsSynchronizedWithCurrentItem="True"
                              ItemsSource="{Binding ElementName=personWindow, Path=DataContext.Person}"
                              SelectedIndex="0"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

城市和人员是 ObservableCollection 类型，因此对于每个城市，它显示一个组合框，每个组合框都有一个人员列表，然后我需要在每个组合框中捕获选定的值。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:53:16.080

嗨，您可以像这样获得组合框的选定项，

```
 if (combobox.SelectedItem != null)
        {
            var x = (Person)combobox.SelectedItem;
        } 
```

然后您可以像这样以 x.name 的形式访问对象的实体。希望这对您有所帮助。

# php - PHP 排队问题 - 冗余进程

> ID：13130245
> 
> 赞同：6
> 
> 时间：2012-10-29T21:56:39.427
> 
> 标签：php, queue

遇到一个问题，我的一名团队成员正在 PHP 中进行排队处理。PHP 脚本在命令行上运行，并在每个周期后递归调用自身以检查我们的数据库中是否有任何项目等待处理。如果有，它会自行分叉，处理队列中的项目，然后重复。如果什么都没有，它就会死掉，并且 cron 作业每 5 分钟重新启动一次队列。

有时，两个进程同时运行，抢占同一个队列，并相互干扰。我正在考虑在唤醒过程中引入抖动，以便在过程开始之间有一个随机的时间量。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:57:55.527

抖动只会使碰撞难以预测。

在磁盘上放置一个互斥锁。检查它是否早于两个周期前。如果是，忽略并删除它；它被坠毁的东西抛在了后面。否则，已经有一个在运行，所以保释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:04:03.560

如果不需要执行队列中的项目，您可以执行类似的操作，只需让两个进程并行运行。

从队列中选择下一个作业（显然语法将取决于数据库）

```
LOCK TABLE queue;

SELECT * FROM queue WHERE status <> 'INPROGRESS' ORDER BY id LIMIT 1

UPDATE queue SET status = 'INPROGRESS' WHERE id = ?

UNLOCK TABLES; 
```

做作业，然后将作业标记为已完成或从队列中删除

如果你想找到陷入困境的工作，你可以存储一个工作开始的时间戳，如果它在那里超过 x 分钟，则将它放回队列中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T10:00:30.283

`LOCK TABLE queue;`有点矫枉过正，因为它看起来是整个表，所以根本没有并发。`INPROGRESS`如果您使用字段更新方法（状态更新为），则根本不需要锁。SQL 更新操作在内部执行锁定，因此必须同时执行以下操作：

```
UPDATE queue SET consumer_id='a_consumer_unique_id' status='INPROGRESS' LIMIT 1

SELECT * FROM queue WHERE consumer_id='a_consumer_unique_id' LIMIT 1 
```

但这种方法有副作用。我们必须更改标志`INPROGRESS`或设置 consumer_id。如果消费者偷看一条消息（consumer_id 设置为它）并死了，这条消息会发生什么？它将在队列中等待很长时间，因此您需要一种清理脚本来处理这些情况。

我们能做的就是将一条消息标记为我们的，加载到内存中，然后从队列中删除。只有在我们完成它之后，我们才会开始处理它。这就是[enqueue/dbal](https://github.com/php-enqueue/enqueue-dev/blob/master/pkg/dbal/DbalConsumer.php#L166)的做法。

如果您需要重新交付保证，请使用 RabbitMQ 等真正的代理。

# exception - zend framework 2 no catch PDO exceptions using Db Adapter

> ID：13130249
> 
> 赞同：0
> 
> 时间：2012-10-29T21:56:51.707
> 
> 标签：exception, pdo, try-catch, zend-db, zend-framework2

我正在使用 Zend\Db\Adapter\Adapter 使用 PDO_Mysql 驱动程序启动查询。我想用 PDOException 类捕获主键违规。

以下代码正确捕获异常并显示第一条消息。它基于具有执行模式的查询方法。

```
 try {
        $dbAdapter = new DbAdapter(array(
                'driver' => 'Pdo_Mysql', 'database' => 'securedraw',
                'username' => 'root', 'password' => '',));          

        $sql = "INSERT INTO users (mail, password) values('josep', 'josep')";
        $dbAdapter->query($sql, DbAdapter::QUERY_MODE_EXECUTE);

    }catch (\PDOException $e) {
        print "First Message " . $e->getMessage() . "<br/>";
    }catch (\Exception $e) {
        print "Second Message: " . $e->getMessage() . "<br/>";
    } 
```

我不明白，因为这段代码没有捕捉到它（独特的变化是它是一个准备好的语句）。

在这种情况下，显示第二条消息，它更通用，并且没有说明错误是否是主键违规。

```
 try {
        $dbAdapter = new DbAdapter(array(
                'driver' => 'Pdo_Mysql', 'database' => 'securedraw',
                'username' => 'root', 'password' => '',));          

        $sql = "INSERT INTO users (mail, password) values('josep', 'affsafq')";
        $statement = $dbAdapter->createStatement($sql);
        $statement->execute();  

    }catch (\PDOException $e) {
        print "First Message "   . $e->getMessage() . "<br/>";
    }catch (\Exception $e) {
        print "Second Message: " . $e->getMessage() . "<br/>";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:33:31.850

您应该检查 php 手册中的异常

```
}catch (\Zend\Db\Adapter\ExceptionInterface $e) {
    $message = $e->getPrevious() ? $e->getPrevious()->getMessage() : $e->getMessage();
    print "First Message "   . $message . "<br/>";
}catch (\Exception $e) {
    print "Second Message: " . $e->getMessage() . "<br/>";
} 
```

# ios - CATransform3DMakeRotation 在动画期间隐藏了一半的 UIView

> ID：13130250
> 
> 赞同：13
> 
> 时间：2012-10-29T21:57:01.663
> 
> 标签：ios, xcode, interface-builder, core-animation, catransform3drotate

将以下 UIView 动画与 CATransform3DMakeRotation 一起使用，一半的 UIView 将在转换期间消失并在完成时重新出现。这只发生在界面构建器的视图层次结构中 UIView 后面有一个 UIImageView 时。

```
[UIView animateWithDuration:1.0 delay:0.0 options:nil animations:^{
        myView.layer.transform = CATransform3DMakeRotation(M_PI,0.0,1.0,0.0);
    } completion:nil]; 
```

以下是界面生成器中的视图布局

![界面生成器布局](../Images/6a00b68965bbe4034394255e5c738d82.png)

以及下面的动画结果。

![在此处输入图像描述](../Images/1d5193b7fece73ab3806f42e8bb1541e.png)

第二张图片是在任何动画发生之前，左半边消失了。在它缩小然后增长超过中心点后，右侧（之前的左侧）重新出现，如第 4 幅图所示。

当使用设置背景图像时

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"jeans.png"]]; 
```

动画按预期完成。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-29T22:24:48.907

为了记录，答案在我的评论中

```
imageView.layer.zPosition = -400; 
```

或者你可以做

```
myView.layer.zPosition = 400; // or some number greater than width/2 
```

看起来旋转视图的一部分被背景视图遮挡了。由于它围绕其中心点旋转，它的一部分进入负 z 空间，背景后面也是如此。

所以从

```
------- imageView
------- myView 
```

到

```
 / myView
    /
------- imageView
  /
 / 
```

# time - 如果 xaxis 处于时间模式，Flot 将不会缩放

> ID：13130254
> 
> 赞同：2
> 
> 时间：2012-10-29T21:57:21.840
> 
> 标签：time, flot, mode

我正在通过 jquery.flot.navigate.js 使用[flot](http://code.google.com/p/flot/)缩放如果我在模式：“时间”中使用 xaxis，则通过鼠标滚轮缩放停止工作。双击缩放继续有效。

## 参见示例：

```
var plot;
$(function () {
    var d3 = [[1350645091000, 1.54], [1351287868000, 1.59], [1351546638000, 1.59]];
    var d2 = [[1350645091000, 3.4], [1351287868000, 3.51], [1351546638000, 3.51]];
    var d1 = [[1350645091000, 1], [1351287868000, 1], [1351546638000, 1]];
    var all_data = [{ 
        label: 'PageRank = 1.00', color: '#119F11', data: d1
    }, { 
        label: 'Real PageRank = 3.51', color: '#14C914', data: d2
    }, { 
        label: 'TrustRank(sm) = 1.59', color: '#0D8FDD', data: d3
    }];

    var plot_conf = {
        series: {
            points: { 
                show: true 
            },
            lines: {
                show: true,
                lineWidth: 1.5
            },
            shadowSize: 1.5
        },
        crosshair: { 
            mode: 'x' 
        },
        grid: { 
            hoverable: true, 
            autoHighlight: false 
        },
        legend: {
            noColumns: 3,
            container: $('#legend')
        },
        zoom: {
            interactive: true
           },
        pan: {
            interactive: true
        },
        xaxis: {
            mode: 'time',
            timeformat: '%d.%m.%Y ',
            timezone: 'browser',
            zoomRange: [0.1, 10], 
            panRange: [1350218985000, 1351738106000]
        },
        yaxis: {
            zoomRange: [0.1, 10], 
            panRange: [-1, 11]
        }
    };

    plot = $.plot($('#placeholder'), all_data, plot_conf);

    $('#placeholder').bind('plotzoom', function (event, plot) {
        legends();
    });

    $('#placeholder').bind('plotpan', function (event, plot) {
        legends();
    });

    legends();

    // Cross --------------------------
    function legends() {
        var legends = $('#legend .legendLabel');
        legends.each(function () {
            // fix the widths so they don't jump around
            $(this).css('width', $(this).width());
        });

        var updateLegendTimeout = null;
        var latestPosition = null;

        function updateLegend() {
            updateLegendTimeout = null;
            var pos = latestPosition;
            var axes = plot.getAxes();
            if (pos.x < axes.xaxis.min || pos.x > axes.xaxis.max ||
                pos.y < axes.yaxis.min || pos.y > axes.yaxis.max) {
                return;
            }

            var i, j, dataset = plot.getData();
            for (i = 0; i < dataset.length; ++i) {
                var series = dataset[i];
                // find the nearest points, x-wise
                for (j = 0; j < series.data.length; ++j) {
                    if (series.data[j][0] > pos.x) {
                        break;
                    }
                }

                // now interpolate
                var y, p1 = series.data[j - 1], p2 = series.data[j];
                if (p1 == null) {
                    y = p2[1];
                }
                else if (p2 == null) {
                    y = p1[1];
                }
                else {
                    y = p1[1] + (p2[1] - p1[1]) * (pos.x - p1[0]) / (p2[0] - p1[0]);
                }
                legends.eq(i).text(series.label.replace(/=.*/, '= ' + y.toFixed(2)));
            }
        }

        $('#placeholder').bind('plothover', function (event, pos, item) {
            latestPosition = pos;
            if (!updateLegendTimeout) {
               updateLegendTimeout = setTimeout(updateLegend, 50);
            }
        });
    }
}); 
```

* * *

那么，任何人都可以给我一个提示，强制缩放使用 xaxis 切换到模式：“时间”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:21:40.057

你有两个问题 - 一，用鼠标滚轮缩放不起作用。二，在 xaxis 上缩放不起作用。

**对于问题 #1：**

双击缩放有效，但鼠标滚轮缩放无效。这是 jQuery 1.7.2 或更高版本。如果我更改为 jQuery 1.6.4，它会再次开始工作。

原因是 flot 0.7 中的[导航插件](http://people.iola.dk/olau/flot/jquery.flot.navigate.js)包含一个与较新的 jQuery 版本不兼容的鼠标滚轮插件。由于它被内联压缩到导航插件中，我无法确切说明原因。

如果您在代码中添加类似这样的内容，您会看到错误：

```
placeholder.bind('plotzoom', function (event, plot) {
    var axes = plot.getAxes();
    $(".message").html("Zooming to x: "  + axes.xaxis.min.toFixed(2)
                       + " &ndash; " + axes.xaxis.max.toFixed(2)
                       + " and y: " + axes.yaxis.min.toFixed(2)
                       + " &ndash; " + axes.yaxis.max.toFixed(2));
}); 
```

`NaN`当它们应该是数字时，它将始终显示所有 4 个值。这是因为鼠标滚轮事件没有正确的 pageX/pageY 参数。

您的替代方法是使用较旧的 jQuery，或使用来自[github](https://github.com/flot/flot/blob/master/jquery.flot.navigate.js)的较新版本的导航插件。

**对于问题 #2：**

为了使 xaxis 缩放起作用，您需要使用`zoomRange`以毫秒为单位的 a （？）。我玩了一下，发现将`xaxis`zoomRange 从更改`[0.1,10]`为`[0.1,3600000000]`使缩放工作。

在这里，它使用较新的导航插件（但较旧的 flot）并更改`zoomRange`：http: [//jsfiddle.net/ryleyb/Men3X/2/](http://jsfiddle.net/ryleyb/Men3X/2/)

# java - 使用鼠标单击在 JLabel 中拖动和移动图片

> ID：13130257
> 
> 赞同：1
> 
> 时间：2012-10-29T21:57:35.200
> 
> 标签：java, image, swing, drag, jlabel

我在 JLabel 中有一个图像。

```
JLabel label = new JLabel(new ImageIcon("C:\\image.jpg"));
label.setSize(300,300); 
```

我想要以下功能。

-我单击 JLabel 内的一个位置（在图像上）。

- 按下鼠标按钮，我可以更改图像在 JLabel 中的位置。（我将图片拖到 JLabel 内的不同位置）

好吧，这意味着在许多情况下，图片将被裁剪并且不在视野范围内。

请告诉我如何实现这个功能？

添加到我的 JLabel 的正确事件侦听器是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T00:00:42.707

这是一个基本的例子......

它通过将标签划分为 3x3 网格来工作，其中每个单元格代表图标的可能位置。

```
public class TestMouseDrag {

    public static void main(String[] args) {
        new TestMouseDrag();
    }

    public TestMouseDrag() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new DragMyIcon());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class DragMyIcon extends JPanel {

        private JLabel label;

        public DragMyIcon() {

            ImageIcon icon = null;

            try {
                icon = new ImageIcon(ImageIO.read(getClass().getResource("/bomb.png")));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            label = new JLabel(icon);
            label.setHorizontalAlignment(JLabel.CENTER);
            label.setVerticalAlignment(JLabel.CENTER);

            setLayout(new BorderLayout());
            add(label);

            MouseHandler handler = new MouseHandler();
            label.addMouseListener(handler);
            label.addMouseMotionListener(handler);

        }

    }

    protected class MouseHandler extends MouseAdapter {

        private boolean active = false;

        @Override
        public void mousePressed(MouseEvent e) {

            JLabel label = (JLabel) e.getComponent();
            Point point = e.getPoint();

            active = getIconCell(label).contains(point);
            if (active) {
                label.setCursor(Cursor.getPredefinedCursor(Cursor.MOVE_CURSOR));
            } else {
                label.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
            }

        }

        @Override
        public void mouseReleased(MouseEvent e) {
            active = false;
            JLabel label = (JLabel) e.getComponent();
            label.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            if (active) {
                JLabel label = (JLabel) e.getComponent();
                Point point = e.getPoint();

                int verticalAlign = label.getVerticalAlignment();
                int horizontalAlign = label.getHorizontalAlignment();

                if (isWithInColumn(label, point, 0)) {
                    horizontalAlign = JLabel.LEFT;
                } else if (isWithInColumn(label, point, 1)) {
                    horizontalAlign = JLabel.CENTER;
                } else if (isWithInColumn(label, point, 2)) {
                    horizontalAlign = JLabel.RIGHT;
                }

                if (isWithInRow(label, point, 0)) {
                    verticalAlign = JLabel.TOP;
                } else if (isWithInRow(label, point, 1)) {
                    verticalAlign = JLabel.CENTER;
                } else if (isWithInRow(label, point, 2)) {
                    verticalAlign = JLabel.BOTTOM;
                }

                label.setVerticalAlignment(verticalAlign);
                label.setHorizontalAlignment(horizontalAlign);

                label.invalidate();
                label.repaint();

            }
        }

        @Override
        public void mouseMoved(MouseEvent e) {
        }

        protected boolean isWithInColumn(JLabel label, Point p, int gridx) {
            int cellWidth = label.getWidth() / 3;
            int cellHeight = label.getHeight();

            Rectangle bounds = new Rectangle(gridx * cellWidth, 0, cellWidth, cellHeight);

            return bounds.contains(p);
        }

        protected boolean isWithInRow(JLabel label, Point p, int gridY) {
            int cellWidth = label.getWidth();
            int cellHeight = label.getHeight() / 3;

            Rectangle bounds = new Rectangle(0, cellHeight * gridY, cellWidth, cellHeight);

            return bounds.contains(p);
        }

        private Rectangle getIconCell(JLabel label) {

            Rectangle bounds = new Rectangle();

            int cellWidth = label.getWidth() / 3;
            int cellHeight = label.getHeight() / 3;

            bounds.width = cellWidth;
            bounds.height = cellHeight;

            if (label.getHorizontalAlignment() == JLabel.LEFT) {
                bounds.x = 0;
            } else if (label.getHorizontalAlignment() == JLabel.CENTER) {
                bounds.x = cellWidth;
            } else if (label.getHorizontalAlignment() == JLabel.RIGHT) {
                bounds.x = cellWidth * 2;
            } else {
                bounds.x = 0;
                bounds.width = 0;
            }
            //if (label.getHorizontalAlignment() == JLabel.TOP) {
            //    bounds.y = 0;
            //} else if (label.getHorizontalAlignment() == JLabel.CENTER) {
            //    bounds.y = cellHeight;
            //} else if (label.getHorizontalAlignment() == JLabel.BOTTOM) {
            //    bounds.y = cellHeight * 2;
            //} else {
            //    bounds.y = 0;
            //    bounds.height = 0;
            //}
            if (label.getVerticalAlignment() == JLabel.TOP) {
                bounds.y = 0;
            } else if (label.getVerticalAlignment() == JLabel.CENTER) {
                bounds.y = cellHeight;
            } else if (label.getVerticalAlignment() == JLabel.BOTTOM) {
                bounds.y = cellHeight * 2;
            } else {
                bounds.y = 0;
                bounds.height = 0;
            }

            return bounds;

        }

    }

} 
```

**根据反馈更新**

此示例基本上使用 a`JLayerdPane`来允许`JLabels`在其容器内重新定位...

```
public class MoveMe {

    public static void main(String[] args) {
        new MoveMe();
    }

    public MoveMe() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MoveMePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MoveMePane extends JLayeredPane {

        public MoveMePane() {
            int width = 400;
            int height = 400;
            for (int index = 0; index < 10; index++) {
                String text = "Label " + index;
                JLabel label = new JLabel(text);
                label.setSize(label.getPreferredSize());

                int x = (int) Math.round(Math.random() * width);
                int y = (int) Math.round(Math.random() * height);
                if (x + label.getWidth() > width) {
                    x = width - label.getWidth();
                }
                if (y + label.getHeight() > width) {
                    y = width - label.getHeight();
                }
                label.setLocation(x, y);
                add(label);
            }

            MoveMeMouseHandler handler = new MoveMeMouseHandler();
            addMouseListener(handler);
            addMouseMotionListener(handler);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }
    }

    public class MoveMeMouseHandler extends MouseAdapter {

        private int xOffset;
        private int yOffset;
        private JLabel draggy;
        private String oldText;

        @Override
        public void mouseReleased(MouseEvent me) {
            if (draggy != null) {
                draggy.setText(oldText);
                draggy.setSize(draggy.getPreferredSize());
                draggy = null;
            }
        }

        public void mousePressed(MouseEvent me) {
            JComponent comp = (JComponent) me.getComponent();
            Component child = comp.findComponentAt(me.getPoint());
            if (child instanceof JLabel) {
                xOffset = me.getX() - child.getX();
                yOffset = me.getY() - child.getY();

                draggy = (JLabel) child;
                oldText = draggy.getText();
                draggy.setText("What a drag");
                draggy.setSize(draggy.getPreferredSize());
            }
        }

        public void mouseDragged(MouseEvent me) {
            if (draggy != null) {
                draggy.setLocation(me.getX() - xOffset, me.getY() - yOffset);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T23:09:10.683

首先，我建议使用布局而不是 setLayout(null) 和 setBounds()。其次，将 ImageIcon 与 JLabel 分开。最后，将 JLabel 和 ImageIcon 设置为字段而不是局部变量。

您需要添加一个 MouseListener 和一个 MouseMotionListener。

```
label.addMouseMotionListener(new MouseAdapter()
{
    public void mouseMoved(MouseEvent arg0)
    {
        if(clicked)
        {
            label.x++
            label.y++
            label.repaint();
        }
    }
});

label.addMouseListener(new MouseAdapter()
{
    public void mousePressed(MouseEvent arg0)
    {
        clicked = !clicked;
    }
}); 
```

（抱歉之前啰嗦了）

这会导致标签的图像出现在标签所在的位置，当您将鼠标悬停在它上面时，它会向东南对角线移动。我创建了一个新的标签类，在其中覆盖了paintComponent 并在其中添加了一个绘制图像图标方法，其中x 和y 是变量。这个想法是计算标签上的中心点，然后如果从该点向西移动图像的 x 位置 (x--)，如果向南移动 (y--)，则向南移动，等等。这只会将您的图像移动到标签内。如果您的鼠标在标签之外，则移动将停止。如果图像的某些部分在标签之外，则不会显示该部分。我会覆盖标签类中的绘制组件并将图像移到上方，然后为每个移动设置图标。

```
public class Label1 extends JLabel
{
    public int x;
    public int y;
    ImageIcon imageIcon = new ImageIcon("path");

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
//No setLocation(x, y) method exists for an image icon or an image. You are on your own on this
        imageIcon.setLocation(x, y);
        label.setIcon(imageIcon);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:48:52.817

此修改示例基于 MadProgrammer 的代码。

它显示了我在原始帖子中描述的行为。感谢大家的宝贵帮助，尤其是 MadProgrammer 和 Coupon22。试试看。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseAdapter;

public class TestMouseDrag {

public static void main(String[] args) {
    new TestMouseDrag();
}

public TestMouseDrag() {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException ex) {
            } catch (InstantiationException ex) {
            } catch (IllegalAccessException ex) {
            } catch (UnsupportedLookAndFeelException ex) {
            }

            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());
            frame.add(new DragMyIcon("C://image.jpg"));
            frame.pack();
            frame.setSize(500,500);
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }
    });
}

protected class DragMyIcon extends JPanel {

    public static final long serialVersionUID = 172L;
    private JLabel label;

    public DragMyIcon(String path) {
        setLayout(null);

        ImageIcon icon = null;

        icon = new ImageIcon(path);

        label = new JLabel(icon);
        label.setBounds(0,0,icon.getIconWidth(), icon.getIconHeight());
        setBounds(0,0,icon.getIconWidth(), icon.getIconHeight());
        label.setHorizontalAlignment(JLabel.CENTER);
        label.setVerticalAlignment(JLabel.CENTER);

        add(label);

        MouseHandler handler = new MouseHandler();
        label.addMouseListener(handler);
        label.addMouseMotionListener(handler);

    }

}

protected class MouseHandler extends MouseAdapter {

    private boolean active = false;
    private int xDisp;
    private int yDisp;

    @Override
    public void mousePressed(MouseEvent e) {
        active = true;
        JLabel label = (JLabel) e.getComponent();

        xDisp = e.getPoint().x - label.getLocation().x;
        yDisp = e.getPoint().y - label.getLocation().y;

        label.setCursor(Cursor.getPredefinedCursor(Cursor.MOVE_CURSOR));
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        active = false;
        JLabel label = (JLabel) e.getComponent();
        label.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        if (active) {
            JLabel label = (JLabel) e.getComponent();
            Point point = e.getPoint();
            label.setLocation(point.x - xDisp, point.y - yDisp);
            label.invalidate();
            label.repaint();

        }
    }

    @Override
    public void mouseMoved(MouseEvent e) {
    }
} 
```

}

# r - igraph 绘制条件顶点颜色

> ID：13130260
> 
> 赞同：2
> 
> 时间：2012-10-29T21:57:48.383
> 
> 标签：r, colors, conditional, igraph, vertex

我是 R 和 iGraph 的新手。我正在尝试在列位置 #1 中创建一个顶点，以特定颜色显示。

我的数据来自 CSV，如下所示：

```
CL1920  202.80  V66.7   198.89  511.9   799.02  401.9   696.1   388.01  202.80                                                                                                                               
RM119041 331.82 294.10                                                                                                                                                                                       
RM38755 331.82  294.10  276.0   331.0   294.10                                                                                                                   
HK54701 331.82  294.10  276.0   331.0   294.10  401.9   V10.51
.... 
```

我的情节脚本看起来像这样：

```
dat <- read.csv("data.csv", header =F)
g <- graph.data.frame(dat, directed = F)
colCount <- 1+ count.fields("dat.csv", sep = ",")
V(g)$label <- NA
set.seed(10)
par <- par()$mar; par(mar=rep(0, 4))
plot (g, layout = layout.fruchterman.reingold,
      vertex.frame.color = "#FFFFFF",
      vertex.size = 5,
      edge.width = 2.5+ (log(colCount)/max(log(colCount))),
      edge.color = "Grey60") 
```

我尝试设置 vertex.color 失败。像这样的例子似乎默认为“浅蓝色”

```
 V(g)$color <- ifelse (V(g)$V1, "red", "blue") 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T16:48:45.633

所以看起来（从评论中）目标是根据顶点是否出现在`dat`数据框的第一列中来设置顶点颜色。这是一种方法：

```
V(g)$color <- ifelse(V(g)$name %in% dat[,1], "red", "blue")
plot(g) 
```

# java - jsf ui 与 p:tabView 重复

> ID：13130268
> 
> 赞同：1
> 
> 时间：2012-10-29T21:58:21.237
> 
> 标签：java, jsf, jsf-2, primefaces

我很感兴趣是否可以以某种方式`p:tabView`使用 jsf ui 重复标签创建？我试图找到一个解决方案，如何创建从 Java 列表生成选项卡的循环。见[这里](http://forum.primefaces.org/viewtopic.php?f=3&t=25486)。事实证明，这要复杂得多。有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T12:05:43.140

你可以这样做

你的豆子

```
public class BeanName implements Serializable {

public BeanName(){
 personList = new ArrayList<Person>();
 personList.add(new Person("ajay", "mumbai"));
 personList.add(new Person("hari", "pune"));
}

private List<Person> personList;

    public List<Person> getPersonList() {
        return personList;
    }

    public void setPersonList(
            List<Person> personList) {
        this.personList= personList;
    }

}

    public class Person{

    private String name;

    private String address;

        public Person(String name, String address) {
            this.name=name;
            this.address=address;
        }

    public String getName(){
      return name;
    }

    public void setName(String name){
      this.name=name;
    }

    public String getAddress(){
      return address;
    }

    public void setAddress(String address){
      this.address=address;
    }
} 
```

Xhtml 中的代码

```
<p:tabView rendered="#{not empty beanName.personList}" value="#{beanName.personList}" var="list">               
    <p:tab title="#{list.name}">here your data</p:tab>
</p:tabView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T08:49:57.163

正如@p27 指出的那样，您可以使用*p:tabView的**value*和*var*属性来动态地为您放在*value*的集合中的每个项目呈现一个选项卡。这是我知道的唯一官方方法，因为 c:forEach 将在构建时应用，而不是像 ui:repeat 那样在渲染时应用（因此集合中不会有任何项目，也不会出现选项卡)，并且 ui:repeat 在 p:tabView 组件中不起作用。

 **问题是，如果您想在同一个 p:tabView 内沿其他动态选项卡呈现一个或多个静态选项卡。如果在创建动态选项卡集合时不向动态选项卡集合添加虚拟项目（您将认为是静态的项目），则无法做到这一点，因此集合始终会将它们包含在其中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-01T22:01:17.110

试一试。

```
<p:tabView id="tabView1">
    <ui:repeat value="#{controllerBean.docList}" var="doc"> 
        <p:tab  title="Godfather Part I">  
            <h:panelGrid columns="2" cellpadding="10">  
                <p:graphicImage  value="/images/godfather/godfather1.jpg" />  
                    <h:outputText   
                        value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.  
                        His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T  
                        hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,  
                        but given to ruthless violence whenever anything stands against the good of the family." />  
            </h:panelGrid>  
        </p:tab>  
    </ui:repeat>
</p:tabView> 
```

这是一个带有 primafaces tabview 的简单 jsf 代码。**

# c# - Linq - 将 lambda 隔离为委托

> ID：13130272
> 
> 赞同：2
> 
> 时间：2012-10-29T21:58:44.840
> 
> 标签：c#, .net, lambda

给定这样的 Linq 示例：

```
myObject.firstOrDefault(o => o.propertXyz == otherObj.propertyXyz); 
```

我将如何提取 lambda 表达式并将其保存在委托中以便可以传入？

就像是：

```
delegate expression1 = (o => o.propertXyz == otherObj.propertyXyz);
myObject.firstOrDefault(expression1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:00:43.000

将“对象”替换为您拥有的对象类型。

```
Func<Object, bool> expression1 = (o => o.propertXyz == otherObj.propertyXyz);
myObject.firstOrDefault(expression1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:03:08.133

您应该使用通用[`Func<>`](http://msdn.microsoft.com/en-us/library/bb549151.aspx)重载来执行此操作。

例如，如果您的对象被调用`myObject`，您将使用：

```
Func<myObject, bool> myExpression = o => o.propertXyz == otherObj.propertyXyz 
```

# wpf - 将焦点放在 XAML 中的内部元素

> ID：13130273
> 
> 赞同：2
> 
> 时间：2012-10-29T21:59:02.263
> 
> 标签：wpf, xaml, triggers, focus

我有一个自定义元素，如下所示：

```
 <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="Padding" Value="0"/>
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Label}">
                <Grid>
                    <TextBox Name="textBox"
                         Grid.ZIndex="1"
                         Padding="0,3,0,0"
                         Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type Label}}, Path=Content, UpdateSourceTrigger=PropertyChanged}"
                         Opacity="0"
                         IsEnabled="False"
                         Focusable="True"
                         />

                    <Border Name="boxBorder"  BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Padding="3,0,0,0" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                </Grid> 
```

我想要一个标签，您可以双击它然后变成一个输入字段（文本框）。因此我定义了一个双击事件：

```
 <EventTrigger RoutedEvent="MouseDoubleClick">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="textBox"
                                                 Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
                                <BooleanAnimationUsingKeyFrames Duration="0" Storyboard.TargetName="textBox"
                                                                Storyboard.TargetProperty="IsEnabled">
                                    <DiscreteBooleanKeyFrame Value="True" KeyTime="0" />
                                </BooleanAnimationUsingKeyFrames>

                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger> 
```

双击工作正常，但您必须执行三次单击才能将焦点放在文本框中。只需双击即可将不透明度变为 1。我还没有找到一种方法如何将双击事件的焦点移动到文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:19:35.667

我认为[这](https://stackoverflow.com/questions/2204063/wpf-set-focus-when-a-button-is-clicked-no-code-behind "这个")会有所帮助。它涉及一些代码，但它是使用 WPF 行为的可重用和可扩展的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:45:30.767

您可以实现文本框的附加行为，当文本框启用或可见时将焦点设置在文本框上。

# mysql - 在 MySQL 中有条件地加入

> ID：13130276
> 
> 赞同：1
> 
> 时间：2012-10-29T21:59:16.337
> 
> 标签：mysql, sql, if-statement, group-by, conditional

我有一张叫做 的桌子`USERS`和一张叫做 的桌子`ADDRESSES`，还有一张`ADDRESS_TYPE`桌子。每个用户可以有多个地址。

```
SELECT *
FROM USER
INNER JOIN address ON address.userId = user.userId
INNER JOIN address_type ON address_type.id = address.addressType
WHERE addressType = 4 
    OR primaryAddress = 1 
```

如果地址类型为 4，我想将地址表加入用户表，但如果他们的地址类型不是 4，则它应该拉入标记为主要的地址。基本上问题是我需要对查询进行分组，以便每个用户只获得 1 行，同时具有逻辑 =“如果 addressType = 4，加入这个地址，否则如果 primaryAddress = 1，加入这个另一个地址”。

希望这是有道理的，非常感谢您的帮助。

编辑：这些是我正在处理的表格：

用户表

+--------+-----------------+-----------------+
| 用户名 | 名字 | 姓氏 |
+--------+-----------------+-----------------+
| 10001 | 黛比 | 巴松 |
| 10002 | 巴马瓦马 | 九冬 |
| 10003 | 杰西卡M | 史蒂夫 |
| 10004 | 金农 | 白色 |
+--------+-----------------+------------------+

地址类型
+----+------+-------------+------------+-------- ----+
| 编号 | 代码 | 描述 | 可修改 | 数据状态 |
+----+------+-------------+------------+--------- --+
| 1 | 主页 | 主页 | 1 | 1 |
| 2 | 布斯 | 商业 | 1 | 1 |
| 3 | SCH | 学校 | 1 | 1 |
| 4 | 唐 | 捐赠者地址 | 1 | 1 |
+----+------+-------------+------------+--------- --+

地址表

+----------------+--------+---------- ----+--------------+-------------+
| 主地址 | 用户名 | 街道1 | 城市| 地址类型 |
+----------------+--------+----------- --+-------------+--------------+
| 0 | 10001 | 12660 皮卡特广场 | 圣地亚哥 | 1 |
| 0 | 10001 | 威尔希尔大街 446 号 | 富乐顿 | 2 |
| 0 | 10001 | 4224 E. 114 路 | 桑顿 | 3 |
| 1 | 10001 | 科罗拉多大道 828 号 | 洛杉矶 | 4 |
| 0 | 10002 | 40A 林登大道，#2 | 萨默维尔 | 1 |
| 0 | 10002 | 446 37 街，#2 | 奥克兰 | 空 |
| 1 | 10002 | 邮政信箱 06562 | 芝加哥 | 空 |
| 0 | 10002 | 1281 W. 2nd St. | 圣佩德罗 | 空 |
| 1 | 10003 | 10557 S.奥克利大道。芝加哥 | 空 |
| 0 | 10003 | 1425 哈里森街，#324 | 奥克兰 | 空 |
+----------------+--------+----------- --+-------------+--------------+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:05:45.063

就像另一个答案说的那样，MySQL 确实支持 IF，但我觉得在这种情况下这是错误的方法。我的感觉是左连接可能更合适。

我认为这应该让你走到一半，但我需要知道“这个其他地址”来自哪里才能完成查询：

```
SELECT
  *
FROM
  user
LEFT JOIN
  address ON (address.userId = user.userId AND address.addressType = 4) 
```

（ps.address_type 表似乎有点多余，所以我在连接中跳过它，但也许它很重要？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:06:21.860

MySQL 具有`IF`以下功能（以及更多）：

```
SELECT *,
       IF(addressType = 4, chosen_table.address_field_name, alternative_table.address_field_name) AS field_name 
```

用地址字段的名称替换`address_field_name`两次。`chosen_table`是“真”块，`IF`是`alternative_table`“假”块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T22:12:32.343

您是否尝试过类似 UNION select 的方法？

也许是这样的：

```
SELECT *
FROM user, address, address_type 
WHERE address.userId = user.userId
AND address_type.id = address.addressType
AND addressType = 4 
UNION
SELECT *
FROM user, address, address_type 
WHERE address.userId = user.userId
AND address_type.id = address.addressType
AND primaryAddress = 1 
```

不确定我的表结构是否正确..但基本点是尝试使用 UNION 语句:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T22:17:46.460

我会删除 ADDRESS_TYPE 表并使您的 ADDRESS 表成为用户地址表，其中您有足够的列来支持 2 或 3 个地址。这样你就不会弄乱你的主用户表。

没有人会需要超过 2 个地址（下面提到的例外情况）。你失去了连接和复杂性，那么你只需要有应用程序逻辑来做你想做的事。按照您的设计方式，您使这些表上的每个操作都比只有一张表时更加复杂。

我可以看到您上面描述的方式的唯一方法是，如果这是针对商业用户的某种应用程序，他们可以有多个位置可以运送到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T22:32:31.743

这是你想要的？

```
SELECT *
FROM USER
INNER JOIN address ON address.userId = user.userId
INNER JOIN address_type ON address_type.id = address.addressType
WHERE addressType = 4 
OR NOT EXISTS
(SELECT addressType FROM USER
 INNER JOIN address ON address.userID = user.userID
 INNER JOIN address_type ON address_type.id = address.addressType
 WHERE addressType = 4)
AND primaryAddress = 1 
```

# security - 检查双点是否足以防止路径越狱？

> ID：13130282
> 
> 赞同：0
> 
> 时间：2012-10-29T21:59:44.953
> 
> 标签：security, http, sanitization

我正在编写一个通过网络发送请求文件内容的服务。但是，我只会回答来自固定`parent`目录的文件的请求。

想到的第一个潜在安全问题是恶意用户可能会请求`..`嵌入的路径。另一个潜在的问题是符号链接，尽管这些应该不是问题，因为我控制本地文件系统并且`parent`.

`..`因此，我的问题是检查路径组件之间是否存在是否足够。还是我忘记了其他一些安全漏洞？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:14:38.127

另一种解决方法是

*   规范化/规范化请求的路径
*   检查（规范化的）父目录是否是请求路径的前缀

这样你就可以绝对确定。这需要一个正常工作的规范器。使用您的编程环境提供的那个，例如[path.normalize()](http://nodejs.org/api/path.html#path_path_normalize_p)、[readlink -f](http://linux.die.net/man/1/readlink)等。

如果没有，从安全角度来说，自己编写是没有问题的。你把你知道的东西标准化（'..' 加一 - 或者你忽略它，使它成为非法的），剩下的东西将被上面的检查拒绝。这应该很明显，但当然您以后只能使用规范化路径来访问文件，而不是用户提供的路径。

您应该确保规范化的父目录以斜杠结尾（或反斜杠，如果在 Windows 上），否则用户可以访问与 parentDir 相同级别的文件夹，这些文件夹以与 parentDir 相同的字符开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:07:05.137

不要忘记双斜线`example//path`。一些系统将这些视为`/path`.

# c# - 动态设置 调用泛型方法时

> ID：13130286
> 
> 赞同：1
> 
> 时间：2012-10-29T21:59:58.863
> 
> 标签：c#, .net, reflection

我在尝试以递归方式将通用函数用于反序列化算法时遇到问题。我正在通过它们的值从 XElement 加载变量。但是，如果它们不是原语，我必须递归地对该对象执行相同的操作。但是，该对象与当前正在处理的对象类型不同。例如，如果我有

```
 class someObject
 {
      otherObject obj = new otherObject();
 }

 class otherObject
 {
     int someInt = 123;
 } 
```

反序列化器递归地进入另一个对象。但是，问题是我必须动态更改泛型方法的类型（即，我不知道在编译时它将是什么类型）。算法如下：

```
public static T deserialize<T>(XNode element)
    where T : new()
{
    XElement currentNode = (XElement)element;

    FieldInfo[] fields = getFields<T>();

    T returnValue = new T();

    foreach (FieldInfo field in fields)
    {
        if (field.FieldType.IsPrimitive)
        {
            field.SetValue(returnValue, currentNode.Element(field.Name).Value);
        }
        else
        {
            //The issue is on the following line
            field.SetValue(returnValue, deserialize<???>(currentNode.Element(field.Name).Value));
        }
    }
} 
```

我看过很多关于如何动态创建类型列表和对象的文档。但是，我找不到任何处理在通用方法调用上动态切换类型的东西。

任何帮助是极大的赞赏！如果我不清楚，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:04:17.063

我会让泛型方法调用另一个私有非泛型方法，该方法使用不同的方法来创建实例，而不是`new T()`. 外部泛型方法将方便方法的调用者，因此他们不必强制转换响应。在内部，您的代码会更简单。

请注意，.NET 框架的反序列化方法都至少具有采用`Type`实例而不是泛型类型参数 ( `<T>`) 的重载。这是您发现的原因 - 有时您将类型作为对象，然后您不能（明智地）调用泛型方法并传递该类型参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:50:51.187

试试这个，但你必须用属性 DataContract、DataMember 标记类

```
 static readonly XmlWriterSettings ws = new XmlWriterSettings()
    {
        OmitXmlDeclaration = true,
        Encoding = System.Text.Encoding.UTF8
    };

    static XElement ToXElement<T>(T obj)
    {
        StringBuilder sb = new StringBuilder();
        Type valorType = obj.GetType();
        using (var writer = XmlDictionaryWriter.Create(sb, ws))
        {
            DataContractSerializer s = new DataContractSerializer(typeof(T));
            s.WriteObject(writer, obj);
            writer.Flush();
            writer.Close();
        }
        return XElement.Parse(sb.ToString());
    }

    static T ToObj<T>(XElement node)
    {
        string xml = node.ToString(SaveOptions.DisableFormatting);      
        T respuesta = default(T);
        DataContractSerializer dcs = new DataContractSerializer(typeof(T));
        using (StringReader strReader = new StringReader(xml))
        {
            using (XmlReader xmlReader = new XmlTextReader(strReader))
            {
                respuesta = (T)dcs.ReadObject(xmlReader, false);
            }
        }
        return respuesta;
    } 
```

测试：

```
 [DataContract]
    public class A
    {
        [DataMember]
        public int Prop { get; set; }
    }

        var node = ToXElement(12);
        int obj = ToObj<int>(node);

        var node2 = ToXElement(new A { Prop = 12 });
        A obj2 = ToObj<A>(node2); 
```

# c# - 如果当前行不为空，则将数据写入下一行

> ID：13130287
> 
> 赞同：0
> 
> 时间：2012-10-29T22:00:04.017
> 
> 标签：c#, datagridview

我正在用 C# 将计算结果写入 DataGridView。

```
if( bool condition1)
{    
   form.myDataTable.Rows[j][cs] = "my string-1";
}

if( bool condition2)
{
  form.myDataTable.Rows[j][cs] = "my string-2";
}
.
.
.
j++ 
```

如果条件 1 和条件 2 都为真，则将字符串 2 覆盖在字符串 1 的位置。我可以进行空值检查并在块 2 中写入 j=j+1，以便将其写入新行。但是我还有另外三个这样的布尔检查条件。请解释一个优雅的方式来做到这一点。我是 C# 的新手。感谢束的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:08:40.813

如果您不想将每一行都放在新行上：最简单的方法是替换`j`为`j++`.

`j++`将返回 的值，`j`然后将其加一。

* * *

## 回应第一条评论

显示：

```
my string-1
my string-2 
```

尝试

```
form.myDataTable.Rows[j][cs] += Environment.NewLine + "my string-2"; 
```

# php - 如何在 PHP（或任何语言）中通过 ObjectSID 查询 LDAP（ADFS）？

> ID：13130291
> 
> 赞同：0
> 
> 时间：2012-10-29T22:00:32.943
> 
> 标签：php, search, ldap, adfs

如何使用带有 PHP 或任何语言的 ObjectSID 的 LDAP 查询对象？我发现了大量没有真正意义的“解决方案”，除了它是二进制的之外，没有一个真正解释所使用的 ObjectSID 的来源。

例如，我进行了初始搜索并检索了 ObjectSID 以供将来使用。问题是返回的 ObjectSID 似乎是二进制的。如何使用 PHP 的 ldap_search 将该二进制文件发送回 LDAP？

我读过我应该将值转换为十六进制，所以我做了一个`bin2hex($ObjectSID)`，但是我通过 LDAP 浏览器看到的`S-1-5-21-1851920287-2048563450-226493979-1120`值：与我的结果值不匹配：`0105000000000005150000009f0f626efa981a7a1b06800d60040000`

有人有明确的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:08:05.283

好的，找到以下答案：

```
// Returns the textual SID
public function bin_to_str_sid($binsid) 
{
    $hex_sid = bin2hex($binsid);
    $rev = hexdec(substr($hex_sid, 0, 2));
    $subcount = hexdec(substr($hex_sid, 2, 2));
    $auth = hexdec(substr($hex_sid, 4, 12));
    $result    = "$rev-$auth";

    for ($x=0;$x < $subcount; $x++) {
        $subauth[$x] = 
            hexdec($this->little_endian(substr($hex_sid, 16 + ($x * 8), 8)));
        $result .= "-" . $subauth[$x];
    }

    // Cheat by tacking on the S-
    return 'S-' . $result;
}

// Converts a little-endian hex-number to one, that 'hexdec' can convert
public function little_endian($hex) 
{
    $result = "";

    for ($x = strlen($hex) - 2; $x >= 0; $x = $x - 2) 
    {
        $result .= substr($hex, $x, 2);
    }
    return $result;
}

// This function will convert a binary value guid into a valid string.
public function bin_to_str_guid($object_guid) 
{
    $hex_guid = bin2hex($object_guid);
    $hex_guid_to_guid_str = '';
    for($k = 1; $k <= 4; ++$k) {
        $hex_guid_to_guid_str .= substr($hex_guid, 8 - 2 * $k, 2);
    }
    $hex_guid_to_guid_str .= '-';
    for($k = 1; $k <= 2; ++$k) {
        $hex_guid_to_guid_str .= substr($hex_guid, 12 - 2 * $k, 2);
    }
    $hex_guid_to_guid_str .= '-';
    for($k = 1; $k <= 2; ++$k) {
        $hex_guid_to_guid_str .= substr($hex_guid, 16 - 2 * $k, 2);
    }
    $hex_guid_to_guid_str .= '-' . substr($hex_guid, 16, 4);
    $hex_guid_to_guid_str .= '-' . substr($hex_guid, 20);

    return strtoupper($hex_guid_to_guid_str);
} 
```

# sql - 带有布尔问题的 SQL Server 查询

> ID：13130303
> 
> 赞同：0
> 
> 时间：2012-10-29T22:02:17.807
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

alter PROCEDURE [dbo].[TCCPAUsersAndNamesByJobPosition] @EmpOrfreeLance bit

AS
BEGIN
    SET NOCOUNT ON;

    SELECT distinct t1.UserId , tblCustomers.name 
    FROM tblTime t1
    inner join tblCustomers on t1.UserId=tblCustomers.custID
    where (t1.userid in (select distinct custID from tblCustomers where sectionCat Like '%,35%') )
    AND (t1.UserId in (select distinct custID from tblCustomers where IsEmployee = @EmpOrfreeLance))

end 
```

也试过了 `IsEmployee = CONVERT(bit,@EmpOrfreeLance)`

和`SET @EmpOrfreeLance= CASE @EmpOrfreeLance WHEN 1 THEN 0 ELSE 0 END`

无论如何，它都会以相同的结果返回相同的列表

不应该很简单吗？？？

`IsEmployee`col-数据类型是`(bit,null)`

我的开发 SQL 服务器是 2008 ..在线服务器是 2005 应该是一个问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:08:52.393

比较空值将始终返回 false。您已经说过 IsEmployee 可以为 null，这可能是您的情况。

```
1 == NULL => False
0 == NULL => False
NULL == NULL => False 
```

尝试使用类似的东西进行比较：

```
(@EmpOrfreeLance IS NULL
    OR IsEmployee IS NULL
    OR IsEmployee = @EmpOrfreeLance) 
```

或者

```
ISNULL(IsEmployee, 0) = ISNULL(@EmpOrfreeLance, 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:16:15.557

我可能遗漏了一些东西，但你为什么不这样写查询呢？

```
SELECT distinct t1.UserId, tblCustomers.name 
FROM tblTime t1
inner join tblCustomers on t1.UserId=tblCustomers.custID
where sectionCat Like '%,35%' AND 
      ISNULL(IsEmployee, CAST(0 As bit)) = @EmpOrfreeLance 
```

此外，您将不得不决定当`IsEmployee`为空时要做什么。（是否为 Employee）例如通过使用`ISNULL(IsEmployee, CAST(0 As bit))`来处理`NULL`值 a `false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:26:39.917

我错了，因为我错过了一件事

```
 SELECT distinct t1.UserId , tblCustomers.name 
    FROM tblTime t1
    inner join tblCustomers on t1.UserId=tblCustomers.custID
    where (t1.userid in (select distinct custID from tblCustomers where sectionCat Like '%,35%') )
    AND (t1.UserId in (select distinct custID from tblCustomers where IsEmployee = @EmpOrfreeLance))
AND (isActive = 1 AND isActiveAgent  = 1 AND sivug Like '%,35%' AND custType = 1) 
or (isActive  = 1 AND isActiveAgent  = 1 AND sivug Like '%,35%' AND custType = 3) 
or (isActive  = 1 AND isActiveAgent  = 1 AND sivug Like '%,35%' AND custType  between  5 AND 12 ) 
```

我不想显示所有数据，我没有注意到在我发出的其他行上有​​一个 OR

所以我也不得不将它添加到那里

# html - html5：为什么不只使用 span 和 div ？

> ID：13130304
> 
> 赞同：0
> 
> 时间：2012-10-29T22:02:26.107
> 
> 标签：html, semantics, presentation

只要你保持意义（使用类和id）和表示（css）的分离，为什么不只使用span和div呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:05:43.223

这将破坏语义标记语言的全部目的。您将仅出于演示目的而滥用 HTML。这就像仅根据重点和声音来构建您的思想，而不关心*含义*。

它是思想或文件的基础的*意义。*表现细节是该含义的结果，而不是相反。一旦你了解了它的结构，你可以选择以不同的方式呈现某个文档，但你无法从任何给定的演示文稿中恢复含义的细微差别。所以更丰富的语义结构是应该记录的，并且应该在文档实际呈现时制定表现实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:04:56.987

这不仅仅是编写干净的 HTML 和 CSS 的问题。当您使用标准标签而不仅仅是`span`s 和`div`s 时，您会自动向搜索引擎和其他自动化工具指示您的元素的*含义*。

例如，虽然您原则上可以`span`为强调文本定义自己的，但使用`em`更好；例如，搜索引擎可以使用该信息得出结论，文档的这一部分旨在描述一些重要的事情。同样，几乎所有网站都有页眉、页脚和导航栏。自动化工具可以使用此类信息来检测例如内部导航链接并以不同方式对它们进行索引。

# couchdb - 将不同的实体相互嵌入

> ID：13130308
> 
> 赞同：0
> 
> 时间：2012-10-29T22:02:50.100
> 
> 标签：couchdb

我有两种类型的文档（实体）“书”和“作者”。

图书文档样本：{ _id:"123456", name:"Peace and War", pages:"2234", author_id:34567 }

作者文档样本：{ _id:"34567", surname:"Tolstoy", name:"Leo" }

问题是：我如何创建返回以下结构的视图：

{ _id:"123456", name:"和平与战争", pages:"2234", author_id:34567, surname:"Tolstoy", name:"Leo" }

可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:47:13.877

一种方法是使用 WPCoder 的想法和`include_docs=true`查询来获得响应：`"value": { book_id:"123456", name:"Peace and War", pages:"2234" }, "doc": {_id:34567, surname:"Tolstoy", name:"Leo" }`. 我会那样做。

如果你真的不喜欢`include_docs`你也可以试试map：

```
if (doc.author_id) {
  emit([doc.author_id, doc._id], doc);
} else
// check if author
if (doc.surname && doc.name) {
  emit([_id, 0], doc);
} 
```

现在带有选项的查询`?startkey=["author id"]&endkey["author id", {}]`将返回作者的书籍列表。您可以过滤您的书并将其合并到带有列表的单个对象中，但您必须先验地知道作者（使用关键字而不是作者搜索）。

您也可以使用`keys=[["author id", 0], ["author id", "book id"]]`，但您必须知道作者和书籍 ID。这完全取决于你需要它做什么。我再重复一遍：我会使用 WPCoder 的建议。

# javascript - 在路线中使用航点 - 路线服务 Google 地图

> ID：13130309
> 
> 赞同：2
> 
> 时间：2012-10-29T22:02:56.627
> 
> 标签：javascript, google-maps

如果我将航点添加到我的谷歌地图 - 功能 calcRoute 不起作用。如何正确设置航点？

谢谢。

```
<script>
      var directionDisplay;
      var directionsService = new google.maps.DirectionsService();
      var map;

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var chicago = new google.maps.LatLng(41.850033, -87.6500523);
        var mapOptions = {
          zoom:55,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: chicago
        }
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        directionsDisplay.setMap(map);
      }

      function calcRoute() {

        var start = "Berlin";
        var end = "Paris";
        var waypts = ["Frankfurt"];

    var request = {
            origin:start,
            destination:end,
            waypoints:waypts,
            optimizeWaypoints: true,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }
    </script> 
```

[https://developers.google.com/maps/documentation/javascript/directions?hl=pl#Waypoints](https://developers.google.com/maps/documentation/javascript/directions?hl=pl#Waypoints)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:36:30.673

阅读您引用的文档，字符串 "Frankfurt" 不是有效的[waypoint](https://developers.google.com/maps/documentation/javascript/reference?hl=pl#DirectionsWaypoint)。

位置为“Frankfurt”的单个航路点如下所示：

```
[{ location: "Frankfurt", stopover: false}] 
```

适当设置中途停留的值。

[概念证明小提琴](https://jsfiddle.net/geocodezip/hus4wvf8/1/)

[![结果地图的屏幕截图](../Images/b46f90b805b8714cb28dd8106ed2f458.png)](https://i.stack.imgur.com/KQbK5.png)

**代码片段：**

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
  var mapOptions = {
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: chicago
  }
  map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
  directionsDisplay.setMap(map);
  calcRoute();
}

function calcRoute() {

  var start = "Berlin";
  var end = "Paris";
  var waypts = [{
    location: "Frankfurt",
    stopover: false
  }];

  var request = {
    origin: start,
    destination: end,
    waypoints: waypts,
    optimizeWaypoints: true,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    } else alert("directions request failed, status=" + status)
  });
}
initialize();
```

```
/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */

#map_canvas {
  height: 100%;
}

/* Optional: Makes the sample page fill the window. */

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#floating-panel {
  position: absolute;
  top: 10px;
  left: 25%;
  z-index: 5;
  background-color: #fff;
  padding: 5px;
  border: 1px solid #999;
  text-align: center;
  font-family: "Roboto", "sans-serif";
  line-height: 30px;
  padding-left: 10px;
}
```

```
<!DOCTYPE html>
<html>

<head>
  <title>Directions Service</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  <!-- jsFiddle will insert css and js -->
</head>

<body>
  <div id="map_canvas"></div>

  <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&libraries=&v=weekly"></script>
</body>

</html>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-23T14:39:30.670

下面的脚本可能会对您有所帮助。

```
 <script>     
    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    function showmap() 
    {   
          jQuery.ajax({
            type: "POST",
            url: "getLocations", 
            dataType:"json",
            success: function(data){         
            var obj = jQuery.parseJSON(data);   
          var LocationData=[];
          var i=0; 
            obj.forEach(function(entry) { 
              entry.forEach(function(test){                        
              LocationData[i] = test
              i++;                
            });                 
            }); 
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 15,
            center: new google.maps.LatLng(LocationData[0].latitude,LocationData[0].longitude),
            mapTypeId: google.maps.MapTypeId.ROADMAP
          });

          directionsDisplay = new google.maps.DirectionsRenderer();
          directionsDisplay.setMap(map); 
          var start = new google.maps.LatLng(LocationData[0].latitude,LocationData[0].longitude); 
          var end = new google.maps.LatLng(LocationData[obj[0].length-1].latitude,LocationData[obj[0].length-1].longitude); 
          var waypts = [];
          var upto = obj[0].length-1;
          if(upto > 7)
            upto = 7;
          if(obj[0].length > 2) {
          for (var i = 1; i < upto; i++) {
              waypts.push({
                location: new google.maps.LatLng(LocationData[i].latitude,LocationData[i].longitude),
                stopover: true
              });
            }
          }
          calcRoute(start,end,waypts);
        }
         });        
    }

    function calcRoute(start,end,waypts) { 
      var request = {
          origin: start,
          destination: end,
          waypoints: waypts,
          travelMode: google.maps.DirectionsTravelMode.DRIVING
      };
      directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          directionsDisplay.setDirections(response);
        }
      });
    }
    </script> 
```

# c# - 如何用c#从网络空间读取文件

> ID：13130313
> 
> 赞同：-2
> 
> 时间：2012-10-29T22:03:16.793
> 
> 标签：c#, html, web

如何使用 c# 从网络空间读取文件？如何从“www.mysite.com/ver.txt”读取文件，因此如果文件中的文本为“1”，则返回值“OK”，但如果文件中的文本为“0”，则返回值“否”。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:11:24.853

你可以使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)类。像这样的东西应该工作：

```
HttpWebRequest  request  = (HttpWebRequest)
WebRequest.Create(url);
HttpWebResponse response = (HttpWebResponse)
request.GetResponse();
Stream resStream = response.GetResponseStream();
string tempString = null;
int count = 0;

do
{
    // fill the buffer with data
    count = resStream.Read(buf, 0, buf.Length);

    // make sure we read some data
    if (count != 0)
    {
        // translate from bytes to ASCII text
        tempString = Encoding.ASCII.GetString(buf, 0, count);

        // continue building the string
        sb.Append(tempString);
    }
}
while (count > 0); // any more data to read?

String text = sb.ToString();
if(text == "1")
    Console.Write("Yes");
else
    Console.Write("No"); 
```

[http://www.csharp-station.com/HowTo/HttpWebFetch.aspx](http://www.csharp-station.com/HowTo/HttpWebFetch.aspx)

# iphone - URL 主机名返回 null

> ID：13130315
> 
> 赞同：6
> 
> 时间：2012-10-29T22:03:29.260
> 
> 标签：iphone, objective-c, ios

我需要获取字符串 url 的主机名

我正在尝试从字符串创建 NSURL 对象，然后使用 NSURL 的主机属性来获取主机名。但主机名始终为空。

```
NSURL *url = [NSURL URLWithString: @"www.google.com"];
NSLog(@"Host name %@", url.host); 
```

但主机名始终为空。谁能解释为什么主机名为空？

编辑：很抱歉有一个错字，我在提问时错过了引号和逗号。但问题还是一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T22:11:06.790

根据[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)，

```
- (NSString *)host; 
```

**返回值：**

> URL 的主机。如果接收者不符合`RFC 1808`，则返回 nil

因此，如果它不符合`RFC 1808`，它将返回 nil。根据 的定义[`RFC 1808`](https://www.rfc-editor.org/rfc/rfc1808)，

正确的语法如下：

```
<scheme>://<net_loc>/<path>;<params>?<query>#<fragment> 
```

所以你需要`http://`在形成的同时添加`NSURL`。

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
NSLog(@"Host name %@", url.host); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:04:50.517

看起来您在 www.google.com 之后缺少一个“？请尝试添加它。

```
NSURL *url = [NSURL URLWithString: @"www.google.com"];
NSLog(@"Host name %@", url.host);                  ^
                     ^ 
```

（注意第二行我还加了一个逗号，我尽量用 ^ 指向它）

编辑：啊，好吧，那么它可能是第二行的逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:05:48.663

如果你这样做会更好（添加 http://）：

```
NSURL *url = [NSURL URLWithString: @"http://www.google.com"];
NSLog(@"Host name %@", url.host); 
```

# php - Magento：停止在 pre_dispatch 观察者中调度

> ID：13130324
> 
> 赞同：3
> 
> 时间：2012-10-29T22:04:15.497
> 
> 标签：php, magento, observer-pattern, dispatch

我想影响产品渲染（传递`$params`给）并在事件中`Mage_Catalog_Helper_Product_View::prepareAndRender()`注册一个观察者。`controller_action_predispatch_catalog_product_view`

渲染工作正常，但仍执行原始`catalog/product/view`操作，因此显示了两个产品。

如何在预调度观察者期间停止调度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T22:25:05.790

1.  `dispatched`请求的字段必须为真
2.  前面动作的`FLAG_NO_DISPATCH`标志必须设置为真

在代码中（观察者内部）：

```
// @see Mage_Core_Controller_Varien_Action::dispatch()
$controller = $observer->getControllerAction();
$controller->getRequest()->setDispatched(true);
$controller->setFlag(
    '', 
    Mage_Core_Controller_Front_Action::FLAG_NO_DISPATCH, 
    true
); 
```

# node.js - 我在哪里可以找到“标题”事件的文档？

> ID：13130335
> 
> 赞同：2
> 
> 时间：2012-10-29T22:05:36.947
> 
> 标签：node.js, connect

ConnectJS 使用[res.on('header'...](http://www.senchalabs.org/connect/responseTime.html)事件对响应进行一些后处理。我在 NodeJS 文档中进行了广泛搜索，但在任何地方都找不到提到的这个事件。有人能指出我的方向吗一些文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:50:46.833

`header`事件不是 node.js 的原生事件。本次活动[由](https://github.com/senchalabs/connect/blob/master/lib/patch.js#L67) `connect`. [这是](https://github.com/senchalabs/connect/blob/gh-pages/tests.md#header-event)一些文档。

# go - 在 Go 中读取 gzip 后的 HTTP 响应

> ID：13130341
> 
> 赞同：36
> 
> 时间：2012-10-29T22:06:00.517
> 
> 标签：go

我正在尝试使用 Go 读取压缩的 HTTP 响应！但我总是收到以下错误消息：

```
panic: gzip: invalid header
[...] stack trace [...] 
```

如果我运行 "curl -H "Accept-Encoding: gzip" [http://foo.com/](http://foo.com/) | gunzip -" 我会得到正确的响应。我还用 ngrep 进行了仔细检查，并且 Accept-Encoding/Content-Encoding 对已正确发送/返回。

如果我创建一个包含一些虚拟内容的文件并 gzip 压缩它，我可以从我的 Go 中读取它！程序。

我用于测试的程序：

```
package main

import (
    "io"
    //"os"
    "fmt"
    "compress/gzip"
    "net/http"
)

func main() {
    /* This works fine
    f, _ := os.Open("/tmp/test.gz")
    defer f.Close()
    reader, err := gzip.NewReader(f)
    */

    // This does not :/
    resp, _ := http.Get("http://foo.com/")
    defer resp.Body.Close()
    reader, err := gzip.NewReader(resp.Body)

    if err != nil { panic(err) }

    buff := make([]byte, 1024)
    for {
        n, err := reader.Read(buff)

        if err != nil && err != io.EOF {
            panic(err)
        }

        if n == 0 {
            break
        }
    }

    s := fmt.Sprintf("%s", buff)
    fmt.Println(s)
} 
```

我忽略了什么吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-30T00:58:22.267

**编辑：**以下是手动处理压缩的示例。如果你不设置header，默认Transport会帮你做，然后在你读取response.Body的时候解压。

```
client := new(http.Client)

request, err := http.NewRequest("GET", "http://stackoverflow.com", nil)
request.Header.Add("Accept-Encoding", "gzip")

response, err := client.Do(request)
defer response.Body.Close()

// Check that the server actually sent compressed data
var reader io.ReadCloser
switch response.Header.Get("Content-Encoding") {
case "gzip":
    reader, err = gzip.NewReader(response.Body)
    defer reader.Close()
default:
    reader = response.Body
}

io.Copy(os.Stdout, reader) // print html to standard out 
```

为简洁起见，删除了错误处理。我保留了延期。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-29T22:08:15.590

[`net/http#Transport`](https://golang.org/pkg/net/http/#Transport)处理`gzip`压缩响应。你不必做任何特别的事情。

看看这个`DisableCompression`选项，[在这里](https://golang.org/src/net/http/transport.go#L173)。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-08-15T11:47:49.030

根据[net/http 文档（第 110 行）](https://golang.org/src/net/http/transport.go#L110)，如果您手动设置**Accept-Encoding**请求标头，那么 gzipped 响应将不会由 http.Transport 自动解压缩。否则，行为由 Transport 的**DisableCompression**布尔值控制

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T08:51:35.417

以下是手动处理压缩的示例。

```
 import "compress/gzip"

func ReadAll(r io.Reader) ([]byte, error) {
    reader, err := gzip.NewReader(r)
    if err != nil {
        return nil, err
    }
    defer reader.Close()
    buff, err := ioutil.ReadAll(reader)
    return buff, err
} 
```

# c# - 如果之前没有特定的单词，则正则表达式替换一个单词

> ID：13130343
> 
> 赞同：2
> 
> 时间：2012-10-29T22:06:08.920
> 
> 标签：c#, regex, regex-lookarounds

在 C# 中使用正则表达式，如果之前没有特定的单词，我应该替换它在我的示例中，它将“Ballmer”替换为“Steve Ballmer”

在：

```
...text...Ballmer...text 
```

结果：

```
...text...Steve Ballmer...text 
```

但如果“史蒂夫”已经在那里，我不应该再添加史蒂夫。

在：

```
...text...Steve Ballmer...text 
```

结果：

```
...text...Steve Ballmer...text 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:10:50.283

使用负后瞻`(?<!...)`和正前瞻`(?=...)`

```
string output = Regex.Replace(input, @"(?<!Steve )(?=Ballmer)", "Steve "); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:08:37.230

匹配时使用[否定的lookbehind](http://www.regular-expressions.info/lookaround.html#lookbehind)`Ballmer`：

```
string result = Regex.Replace(input, @"(?<!Steve )Ballmer", "Steve Ballmer"); 
```

这将完全符合您的要求。匹配任何`Ballmer`不是紧跟在前面的`Steve`（和一个空格）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:56:14.213

正则表达式很有趣，但在使用大炮之前尝试更简单的工具也是值得的。这个特殊问题可以通过基本的查找和替换来解决

1.  将“鲍尔默”替换为“史蒂夫鲍尔默”
2.  将“史蒂夫·史蒂夫·鲍尔默”替换为“史蒂夫·鲍尔默”（以纠正任何过度劳累）

* * *

或者

1.  将“史蒂夫鲍尔默”替换为“鲍尔默”
2.  将“鲍尔默”替换为“史蒂夫鲍尔默”

# php - 将文本添加到音频以进行加密

> ID：13130349
> 
> 赞同：1
> 
> 时间：2012-10-29T22:06:22.630
> 
> 标签：php, audio, cryptography, steganography

我正在用 PHP 制作一个隐藏音频文件中的字符串的应用程序。我见过几个命令行工具，如 SoX、AC3、ffmpeg，但它们似乎不支持添加文本的功能。以下是他们的命令行界面描述的一些链接：

1.  [交流3](http://ac3filter.net/wiki/AC3Filter_tools#noise)
2.  [ffmpeg](http://www.freesoftwaremagazine.com/articles/command_line_media_editing)
3.  [索克斯](http://sox.sourceforge.net/Docs/Documentation)

我正在寻找一种工具，可以让我在 MP3 或`.wav`音频文件中隐藏文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:33:47.913

除非您想简单地将数据放在标题中（例如，MP3 ID3 标签），否则您对音频水印感兴趣。维基百科条目并不是特别有用：

[http://en.wikipedia.org/wiki/Audio_watermark](http://en.wikipedia.org/wiki/Audio_watermark)

这个答案提供了一些线索：

[音频水印开源项目](https://stackoverflow.com/questions/227517/audio-watermarking-open-source-projects)

现有的商业水印系统非常健壮，即使在音频在格式、D/A/D'ed、频带限制、eq'ed 等之间转换时也能存活。我不知道有任何接近这个的开源项目，但我最近没有研究过它。

对于未压缩的格式，您可以使用 LSB 速记：

[http://www.jsums.edu/cms/tues/docs/Steganography/LSB-Steganography.pdf](http://www.jsums.edu/cms/tues/docs/Steganography/LSB-Steganography.pdf)

# objective-c - NSMergeByPropertyObjectTrumpMergePolicy 与 NSMergeByPropertyStoreTrumpMergePolicy

> ID：13130350
> 
> 赞同：8
> 
> 时间：2012-10-29T22:06:38.570
> 
> 标签：objective-c, ios, cocoa-touch, core-data

在我的多线程应用程序中，主线程和一个或多个后台线程可以同时访问、获取和更改我的核心数据存储中的信息。对于每个线程，我正在创建一个新的`NSManagedObjectContext`. 但是，每个实例都`NSManagedObjectContext`使用相同的 `NSPersistentStoreCoordinator' 实例（存储在单例中的其他位置）。

我的问题是关于`NSManagedObjectContext`. `NSMergeByPropertyStoreTrumpMergePolicy`如果我为后台线程（ ）设置一个合并策略，为主线程设置另一个策略（ ），是否有内在的好处`NSMergeByPropertyObjectTrumpMergePolicy`？

在我的`NSMangagedObjectContext`吸气剂中，我有以下条件：

```
 if ( [NSThread isMainThread] ) {

        [_context setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];

    } else {

        [_context setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy];
    } 
```

谢谢你。

**编辑：有必要吗？对于两种类型的线程，我是否应该只默认使用一种策略而不是另一种策略？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T18:26:41.103

我最终选择了这个解决方案（一年多以前），但由于我最近没有收到这个问题的答案，所以我决定提出自己的解决方案。

```
NSManagedObjectContext *context;

if ( [NSThread isMainThread] ) {

    context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    [context setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];

} else {

    context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [context setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T09:11:45.950

我认为如果您从不同的上下文中进行保存，这是必要的。见[https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdChangeManagement.html#//apple_ref/doc/uid/TP30001201](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdChangeManagement.html#//apple_ref/doc/uid/TP30001201)

# git - 如何让 git svn diff 使用 svn 的内部差异引擎？

> ID：13130351
> 
> 赞同：4
> 
> 时间：2012-10-29T22:06:48.673
> 
> 标签：git, svn, git-svn

我需要让 git svn diff 产生基本上逐行等效于 svn diff 产生的差异的差异。

我非常熟悉各种脚本，例如[git-svn-diff.sh](https://gist.github.com/833214)，它们可以使补丁与 svn 兼容，但是在 diff 不明确的地方，两个 diff 引擎经常不同，我需要对此进行规范化。基本上，我需要 git svn diff、svn diff 和 svnlook diff（用于 svn 预提交挂钩）来生成完全相同的补丁（模转换），据我所知，因为我无法覆盖 svnlook 的diff 引擎，我被困在使用 svn 的内部 diff 引擎。

没关系，除了似乎没有 svn 附带的工具可以让您使用内部引擎区分两个文件。我看到源代码有一个 tools/diff/diff.c，但没有分发二进制文件。我是否坚持自己分发此工具，它是否存在并且我错过了它，或者我可以使用不同的差异引擎使预提交挂钩为事务生成补丁？

# php - 联系表格中的特殊字符

> ID：13130352
> 
> 赞同：0
> 
> 时间：2012-10-29T22:06:50.097
> 
> 标签：php, special-characters, contact-form

我有这个联系表，但问题是我的邮件中没有特殊字符（šđžćč 或 ÀÁÂÃÄÅ...）。

索引.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Contact Form</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<form method="post" action="contactengine.php">
<label for="Name">Name:</label>
<input type="text" name="Name" />
<label for="City">City:</label>
<input type="text" name="City" />
<label for="Email">Email:</label>
<input type="text" name="Email" />
<label for="Message">Message:</label>
<textarea name="Message" rows="20" cols="20"></textarea>
<input type="submit" name="submit" value="Submit" class="submit-button" />
</form>
</body>
</html> 
```

联系引擎.php：

```
<?php
$EmailFrom = "example@example.com";
$EmailTo = "example@example.com";
$Subject = "subject";
$Name = Trim(stripslashes($_POST['Name'])); 
$City = Trim(stripslashes($_POST['City'])); 
$Email = Trim(stripslashes($_POST['Email'])); 
$Message = Trim(stripslashes($_POST['Message'])); 
$Body = "";
$Body .= "Name: ";
$Body .= $Name;
$Body .= "\n";
$Body .= "City: ";
$Body .= $City;
$Body .= "\n";
$Body .= "Email: ";
$Body .= $Email;
$Body .= "\n";
$Body .= "Message: ";
$Body .= $Message;
$Body .= "\n";
$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");
?> 
```

我在互联网上搜索了解决方案，但没有找到任何解决我的问题的方法。有人知道我必须插入什么代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:13:18.177

`stripslashes()`破坏 UTF-8 特殊字符。

我认为你最好`magic_quotes_*`在你的 php.ini 中全部关闭（它们添加了很多“无用的”斜杠）。

# data-warehouse - 在 Netezza 中将 NOT NULL 约束更改为 NULL

> ID：13130353
> 
> 赞同：1
> 
> 时间：2012-10-29T22:06:50.880
> 
> 标签：data-warehouse, netezza

有什么方法可以在 Netezza 中将不可为空的列更改为可空的？（或者我是否必须在表中创建一个新的可空列，将数据传输过来，然后删除旧列？）

抱歉，如果答案显示在谷歌搜索中，我已经尝试过寻找但无法找到一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:37:54.577

除了添加/删除列本身、设置或清除默认值、更改 varchar 的长度以及重命名列之外，您无法更改 NZ 6.0 中的列。

您可能必须创建一个新列，移动数据，删除旧列。对于一张小桌子，这应该没问题。

```
ALTER TABLE t RENAME COLUMN c to c_old; 

ALTER TABLE t ADD COLUMN (c bigint);

UPDATE t set c = c_old;

ALTER TABLE t DROP COLUMN c_old CASCADE; 
```

但是，如果表很大：

由于 netezza 执行更新语句的方式，创建一个全新的表并移动数据可能会更好。NZ 之后需要对原始表进行整理，以删除旧版本的更新记录。

```
CREATE TABLE t_new ( c bigint ) DISTRIBUTE ON (c);

INSERT INTO t_new SELECT c FROM t;

ALTER TABLE t RENAME to t_old;

ALTER TABLE t_new RENAME to t;

DROP TABLE t_old; 
```

# magento - Magento：如何覆盖 Review/Model/Resource/Collection.php

> ID：13130358
> 
> 赞同：4
> 
> 时间：2012-10-29T22:07:34.607
> 
> 标签：magento

我尝试重写 /app/code/core/Mage/Review/Model/Resource/Review/Collection.php 和 /app/code/core/Mage/Review/Model/Resource/Review.php

第 1 步：/app/etc/modules/Lbb_Review.xml

```
<?xml version="1.0"?>

<config>
     <modules>
        <Lbb_Review>
            <active>true</active>
            <codePool>local</codePool>
        </Lbb_Review>
     </modules>
</config> 
```

第 2 步：/app/code/local/Lbb/Review/etc/config.xml

```
<?xml version="1.0"?>

    <config>  
        <modules>  
            <Lbb_Review>  
                <version>0.1.0</version>  
            </Lbb_Review>  
        </modules>  
        <global>  
            <models>  
                <review_resource>  
                    <rewrite>  
                            <review>Lbb_Review_Model_Resource_Review</review>  
                    </rewrite>  
                </review_resource>  

                <review_resource_review>  
                    <rewrite>  
                            <collection>Lbb_Review_Model_Resource_Review_Collection</collection> 
                    </rewrite>
                </review_resource_review>  
            </models>  
        </global>  
    </config> 
```

第三步：

/app/code/local/Lbb/Review/Model/Resource/Review.php

```
<?php

class Lbb_Review_Model_Resource_Review extends Mage_Review_Model_Resource_Review
{
    protected function _afterSave(Mage_Core_Model_Abstract $object)
    {
        echo 'test';
    }
} 
```

/app/code/local/Lbb/Review/Model/Resource/Review/Collection.php

```
<?php

class Lbb_Review_Model_Resource_Review_Collection extends Mage_Review_Model_Resource_Review_Collection
{
    /**
     * init select
     *
     * @return Mage_Review_Model_Resource_Review_Product_Collection
     */
    protected function _initSelect()
    {
        parent::_initSelect();
        $this->getSelect()
            ->join(array('detail' => $this->_reviewDetailTable),
                'main_table.review_id = detail.review_id',
                array('detail_id', 'title', 'detail', 'nickname', 'size', 'customer_id'));
        return $this;
    }
} 
```

我不知道是什么问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T02:35:26.877

关。集合重写有点偏离：

第 2 步：/app/code/local/Lbb/Review/etc/config.xml

```
<?xml version="1.0"?>
<config>  
    <global>  
        <models>  
            <review_resource>  
                <rewrite>  
                    <review_collection>Lbb_Review_Model_Resource_Review_Collection</review_collection> 
                </rewrite_resource>
            </review>  
        </models>  
    </global>  
</config> 
```

这适用于 Magento CE1.6+ / EE1.11+，顺便说一句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-30T14:21:53.240

```
 <?xml version="1.0"?> 
      <config>  
        <global>  
            <models>  
                <review_resource>
                    <rewrite>
                      <review>Namespace_ModuleName_Model_Resource_Review</review>
                    </rewrite>
                    <rewrite>  
                      <review_collection>
                          Namespace_ModuleName_Model_Resource_Review_Collection
                      </review_collection>
                    </rewrite>
                </review_resource>
            </models>  
        </global>   
      </config> 
```

PS： Benmarks 的答案有错别字，所以添加这个，归功于他 :)

# c++ - 为什么 boost::locale 会抛出 std::bad_cast？

> ID：13130359
> 
> 赞同：6
> 
> 时间：2012-10-29T22:07:36.537
> 
> 标签：c++, exception, boost, locale

我试图了解如何使用 boost::locale 来比较忽略大小写和变体的字符串。我直接尝试了 Boost 文档中的代码：

[http://www.boost.org/doc/libs/1_51_0/libs/locale/doc/html/collat​​ion.html](http://www.boost.org/doc/libs/1_51_0/libs/locale/doc/html/collation.html)

```
boost::locale::generator gen;
std::locale vLocale = gen("");

std::wstring a=L"Façade", b=L"facade";

// Following will throw bad_cast
bool eq = std::use_facet<boost::locale::collator<wchar_t>>(vLocale).compare(
    boost::locale::collator_base::secondary,
    a,
    b
) == 0;

if(eq) std::cout << "OK" << std::endl; 
```

此代码在运行时会抛出 std::bad_cast 异常。我在 boost::locale::generator 的构造函数中尝试了很多参数。有谁知道我遇到的问题？

我正在使用带有 g++4.6 和 Boost 1.51.0 的 C++11

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T22:17:59.970

您似乎使用了不正确的语言环境对象。首先，您应该使用全局语言环境，然后（如果您想使用`std::cout`）将语言环境灌输到流中。像这样的东西：

```
boost::locale::generator gen;
std::locale loc = gen("");
std::locale::global(loc); 
```

但是，在您的示例中，如果您不使用`std::cout`，只需设置全局语言环境，以便您准备好所需的方面。

# java - 在 os x 中复制一个 .app 文件

> ID：13130363
> 
> 赞同：3
> 
> 时间：2012-10-29T22:07:47.193
> 
> 标签：java, macos

我正在尝试使用 FileInputStream 的 transferTo 方法在 OS X 中移动应用程序文件，但不断收到 FileNotFoundException（没有这样的文件或目录）。我知道情况并非如此，因为 .exists() 方法在我在应用程序文件上运行时返回 true。我认为这与文件权限有关，但经过几次测试后似乎并非如此。这是我用来移动文件的代码：

```
public static void moveFile(File sourceFile, File destFile) throws IOException {
    FileChannel source = null;
    FileChannel destination = null;

    try {
        source = new FileInputStream(sourceFile).getChannel();
        destination = new FileOutputStream(destFile).getChannel();

        long count = 0;
        long size = source.size();
        source.transferTo(count, size, destination);
    }
    finally {
        if(source!=null) {
            source.close();
        }

        if(destination!=null) {
            destination.close();
        }
    }
} 
```

**编辑 1：**标题已从“在 os x 中移动 .app 文件”更改为“在 os x 中复制 .app 文件”。我需要保持原始文件完好无损。

**编辑 2：**我能够按照Joel Westberg 的建议（特别是 copyDirectory 方法）通过[Apache Commons FileUtils 复制文件。](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html)我现在面临的问题是，当我去运行复制的应用程序包时，该应用程序会永远在 Dock 中弹跳并且永远不会运行。关于为什么会这样的任何想法？

**编辑 3：**我已经想出了如何解决永久弹跳的问题。事实证明，当我复制应用程序包时，它没有将 2 个 unix 脚本设置为需要的可执行文件。我只是使用 File 类中的 setExecutable 方法来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:12:38.113

`.app`简单的答案是OSX 术语中没有文件之类的东西。您看到的 .app 是一个文件夹。尝试将其作为文件读取时会收到 FileNotFound，因为它不是文件。

如果您使用的是 Java 7，则可以使用新的[Files.move()](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)方法来执行您想要的操作，无论它是文件还是文件夹。

**编辑**：正如*MadProgrammer*在评论中建议的那样，简单地使用已经存在更长的[File.renameTo()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)会更容易。

# c# - 将 Clarion 过程声明转换为 C# DLLImport

> ID：13130365
> 
> 赞同：2
> 
> 时间：2012-10-29T22:08:03.600
> 
> 标签：c#, pinvoke, clarion

如何将此 Clarion 过程声明转换为 C#？它是用 C 语言编写的第 3 方 DLL 的一部分，没有太多文档。我已经列出了 Clarion 中正常工作的方法的原型。在 C# 中，我不确定要使用什么类型来替换`*CString`. 我`char[]`像@DanielC 建议的那样尝试过，但是没有用。我还发现 Clarion`long`是 32 位的（感谢 @shf301）。

号角：

```
SendRequest Procedure(*CString xData,Long DataLen,Long xTimeout),Byte,Virtual 
```

C#（我尝试过，但不起作用）：

```
[DllImport("3RD_PARTY_API.dll")]
private static extern long SendRequest(ref string xData, int DataLen, int xTimeout); 
```

`SendRequest`当我在 C# 中调用该方法时，我得到了来自 VS2010的标准[PInvokeStackImbalance 被检测到错误。](http://msdn.microsoft.com/en-us/library/0htdy0k3(v=vs.100).aspx)我认为这是参数类型的问题，而不是类似于`CharSet`或`EntryPoint`在[DllImport 声明](https://stackoverflow.com/questions/2943883/csharp-pinvokestackimbalance-detected-on-a-well-documented-function)中的问题。我真的只是坚持如何转换`*CString`为有效的 C# 类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T17:53:01.737

我找到了答案。我希望我仍然与编写此代码的开发人员一起工作，这样我就可以对他们大喊大叫了。他们在 API 周围放置了一个包装器，这样我列出的带有 3 个参数的方法就可以在没有超时值的情况下调用实际的 API。PInvokeStackImbalance 异常来自我添加了一个额外参数的事实。

这是实际的 Clarion 程序以及正确的 C# 语法：

号角：

```
SendRequest Procedure(*CString xData, Long DataLen), Byte, Virtual 
```

C＃：

```
[DllImport("NOVA_API.dll", EntryPoint = "SendRequest")]
private static extern byte SendRequest(string xData, int DataLen); 
```

总之，Clarion`*CString`可以`string`在 DLLImport 声明中转换为 .NET 类型。

非常感谢那些回复的人。这是我在搜索中使用的另一个资源，我发现它非常有用：[pinvoke.net](http://www.pinvoke.net/index.aspx "pinvoke.net")

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T23:35:23.037

在 C# 中，a`long`始终是 64 位。在`Long`Clarion 中是 32 位。`long`将 p/Invoke 声明中的参数更改为`int`'s.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T11:27:23.987

根据维基百科，clarion 可以使用一些奇怪的 TopSpeed “双快速调用”，他们使用 4 个 reg 作为参数而不是两个。如果使用此调用约定编译代码，则无法直接从 C# 调用。

*TopSpeed / Clarion / JPI 前四个整数参数在寄存器 eax、ebx、ecx 和 edx 中传递。浮点参数在浮点堆栈上传递——寄存器 st0、st1、st2、st3、st4、st5 和 st6。结构参数总是在堆栈上传递。寄存器用完后，附加参数在堆栈上传递。eax 中返回整数值，edx 中返回指针，st0 中返回浮点类型。*

如果不是这种情况，那么您的参数之一可能不是正确的大小，否则您将获得 AV 而不是损坏的堆栈错误。

也可以尝试在 dllimport 上设置调用约定。除了 "TOPSPEED" clarion 还支持 stdcall 和 cdecl 但 "TOPSPEED" 是默认值。以下是与 vb6 和 clarion 进行互操作的教程的链接。

[http://pisoft.ru/verstak/insider/cw_vb.htm](http://pisoft.ru/verstak/insider/cw_vb.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T22:14:12.070

你试过`char[]`吗？我不确定它是否会起作用，但值得一试。（我会将此作为评论发布，但我没有权利）

# sprite - 动态调整大小的背景大小：覆盖 Sprite Image

> ID：13130372
> 
> 赞同：0
> 
> 时间：2012-10-29T22:08:33.313
> 
> 标签：sprite, css

我正在创建一个包含背景图像的 div，该背景图像使用 background-size 属性调整到其容器的大小。目前，这个 div 有一个单独的正常和悬停状态。我试图将它们组合成一个精灵，但不能让它正确显示。

**这是我的代码：**

```
.thumb {
width: 18.454%;
}

.thumb .image {
background-image: url('/assets/image.jpg');
background-position: -100% 0;
background-size: cover;
}

.thumb img {
width: 100%;
max-size: 204px;
} 
```

.thumb div 给图像一个宽度，.image div 设置背景图像，而 .thumb img 是 .image div 内的一个 img，它只是为了在动态调整大小时保留图像比例。

我只需要知道如何更改背景位置：因此它可以动态工作。目前，当我使用 -100% 0 移动图像时，它确实移动了，但是，它位于精灵中的错误位置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:16:54.820

尺寸错误（大约 4px 关闭）是由 .image div 行高引起的。这解决了问题。

```
.thumb .image {
line-height: 0; /* FIXED */
background-image: url('/assets/image.jpg');
background-position: -100% 0;
background-size: cover;
} 
```

# c++ - 相当于 gcc -S 的 Visual Studio

> ID：13130376
> 
> 赞同：1
> 
> 时间：2012-10-29T22:08:52.200
> 
> 标签：c++, visual-studio, visual-c++

> **可能重复：**
> [如何从 VS2005 中的 C 文件中获取汇编程序输出](https://stackoverflow.com/questions/34635/how-do-i-get-the-assembler-output-from-a-c-file-in-vs2005)

有没有办法在 MS Visual Studio 中显示从 C/C++ 中的翻译单元生成的汇编代码？我的意思是与 Linux 中的 gcc/g++ -S 命令相同的效果。我知道“显示反汇编”菜单，但它仅在调试时才有效，它显示了整个项目的汇编代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:15:28.850

查看**Configuration Properties -> C/C++ -> Output Files -> Assembler Output**。

# asp.net - 通过表单填充列表

> ID：13130384
> 
> 赞同：0
> 
> 时间：2012-10-29T22:09:28.680
> 
> 标签：asp.net, asp.net-mvc

我正在使用 asp.net、mvc 4 和 c# 创建一个网站，目前遇到一个问题，我没有在线找到解决方案。

我有一个相当复杂的 CREATE 表单，其中包括一个值为 1-7 的下拉列表和一个文本框列表。对于这个文本框列表，我可以通过 JavaScript 添加更多文本框，因此文本框的数量现在不受限制。

此外，如果我在下拉列表中选择任何值 - 比如说值 5 - 文本框列表会出现 5 次。

为了处理不确定数量的文本框，此类列表中的每个文本框都具有相同的名称，每个列表都有一个索引。举个例子：在第一个文本框列表中，它们都被命名为 textbox-1，在第二个列表中它们的名称为 textbox-2，等等。我希望你能明白我的意思。

我现在的问题：我想要一个模型，其中包含 7 个字符串列表，这些字符串填充了来自相应文本框的值。也许我真的不知道要寻找什么（因为老实说我不知道​​）但我在谷歌上找不到类似的东西。

我能想到的唯一解决方案是不使用模型而只使用表单集合，但感觉它会破坏 mvc 框架的任何目的和优势。但也许还有一种完全不同的方法来解决这个问题，这让我完全忘记了。

我希望你们能理解我在说什么……有点难以解释。如果不是，我相信你会让我知道:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:12:00.783

我会继续使用表单查询来处理这个一次性的。弯曲框架没有意义。

如果您确实想走模型的路线，则需要制作一个封装最大数量的文本框的模型。让您的 javascript 为将反映模型命名的文本框提供 id 和名称。

# haskell - 为什么这个 Haskell 过滤器会终止？

> ID：13130386
> 
> 赞同：7
> 
> 时间：2012-10-29T22:09:44.153
> 
> 标签：haskell, ghc, lazy-evaluation, ghci

我不明白为什么以下 Haskell 代码在 GHCi 下终止：

```
let thereExists f lst = (filter (==True) (map f lst)) /= []
thereExists (\x -> True) [1..] 
```

考虑到它的第二个参数是无限的，我没想到对 filter 的调用会完成，而且我认为在完全计算 lhs 之前不会进行比较。发生了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-29T22:13:29.753

*可以*在完全计算 LHS 之前进行比较。一旦`filter`产生了一个元素，`/=`就会断定列表不可能等于`[]`并立即返回`True`。

`/=`列表上的实现是这样的：

```
(/=) :: Eq a => [a] -> [a] -> Bool
[] /= []         = False
[] /= (y:ys)     = True
(x:xs) /= []     = True
(x:xs) /= (y:ys) = (x /= y) || (xs /= ys) 
```

由于 Haskell 是惰性的，我们将只评估参数，以选择我们将使用哪个右手边。对您的示例的评估如下所示：

```
 filter (== True) (map (\x -> True) [1..]) /= []
==> (True : (filter (== True) (map (\x -> True) [2..]))) /= []
==> True 
```

一旦我们知道`/=`is的第一个参数`(1 : something)`，它与上面代码中的第三个等式匹配`/=`，所以我们可以返回`True`。

但是，如果您尝试`thereExists (\x -> False) [1..]`它确实不会终止，因为在这种情况下，`filter`将永远不会在生成我们可以匹配的构造函数方面取得任何进展。

```
 filter (== True) (map (\x -> False) [1..]) /= []
==>  filter (== True) (map (\x -> False) [2..]) /= []
==>  filter (== True) (map (\x -> False) [3..]) /= []
... 
```

以此类推。

总之，`thereExists`无限列表可以`True`在有限时间内返回，但永远不会`False`。

# android - 如何获取当前在 AdapterView 中显示的项目？

> ID：13130389
> 
> 赞同：20
> 
> 时间：2012-10-29T22:10:00.067
> 
> 标签：android, view, adapter

如标题：我想知道如何获取我的 AdapterView 中所有当前显示的项目的列表（数组）。
为什么？在我的 AdapterView 中显示的对象需要在用户关闭 AdapterView 后释放一个侦听器。我需要这样做以优化我的应用程序。
或者是否有任何方法（我可以覆盖）在视图销毁时执行？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-30T06:56:17.363

实现 OnScrollListener

> ```
> public class NewsCategoryDC extends Activity implements OnScrollListener { 
> ```

并在 listView 中设置 OnScrollListener

```
listView.setOnScrollListener(NewsCategoryDC.this); 
```

你可以得到第一行和最后一个可见行

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) {
    firstVisibleRow = listView.getFirstVisiblePosition();
            lastVisibleRow = listView.getLastVisiblePosition();
/*Now you get the first and last visible rows, and you easily get the rows from first to last visible row and allocate resources to visible rows or deallocate resources to rows except visible rows..,.*/
}

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {} 
```

尝试这个..，。

如果您有其他最好的方法请发布，这是非常有用和好问题..,。

谢谢..，。

编辑............................

在 onScroll() 方法中添加代码

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) {
    int firstVisibleRow = listView.getFirstVisiblePosition();
    int lastVisibleRow = listView.getLastVisiblePosition();

    for(int i=firstVisibleRow;i<=lastVisibleRow;i++)
    {
        //Write your code here(allocation/deallocation/store in array etc.)
        System.out.println(i + "=" + listView.getItemAtPosition(i));
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T19:41:03.007

作为小提示：

如果您想获得所有完全可见的元素（-> 期望那些位于底部或顶部并且几乎超出屏幕的元素），您应该查看这篇文章：

[仅查看完全可见的 ListView-Items](https://stackoverflow.com/a/13181412/1165125)

# windows - 使用 SVN 作为文档控制系统的问题

> ID：13130395
> 
> 赞同：2
> 
> 时间：2012-10-29T22:10:25.590
> 
> 标签：windows, svn, version-control, document-versioning

我正在寻找一种方法，以便在我的工作中对包含 SOP、表格等的文档库进行更好的文档控制（主要是 Microsoft Word 文件。）至于对文档的实际更改，我正在考虑建立一个 SVN 存储库以处理文档的实际修订并允许最新版本处于最前沿，但是还有一些其他功能我要么 1）不知道它们是否存在，要么 2）不知道如何设置。以下是我的问题：

1.  我知道有 Apache SVN，我可以自定义文件夹和文件在网页上的显示方式吗？
2.  有些文件需要每两年重新访问一次等，有没有办法轻松标记这些文件以进行审查？
3.  通过 Windows 网络在多人之间共享 SVN 存储库的最佳方式是什么？

我在网上搜索过，但没有找到任何我能理解的好资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:00:32.237

> 我可以自定义文件夹和文件在网页上的显示方式吗？

是的，在某种程度上。我不记得存储库中“裸”Apache 的输出，但您至少有两种装饰存储库的选择（注意第 3 页）：[VisialSVN Server](http://www.visualsvn.com/server/)，您可以根据需要在其中更改 svnindex.xsl

```
<!-- A sample XML transformation style sheet for displaying the Subversion
  directory listing that is generated by mod_dav_svn when the "SVNIndexXSLT"
  directive is used. --> 
```

或安装一个额外的级别，基于 PHP 的[WebSVN](http://www.websvn.info/)（或任何其他存储库浏览器），其中嵌入了模板

> 有些文件需要每两年重新访问一次等

我在 Subversion 中看不到任何本机即用型工具来完成这项工作，但是对于存储库中的任何对象，最后修订的日期都存在，而且它很容易（一般）可访问的信息

> 通过 Windows 网络在多人之间共享 SVN 存储库的最佳方式是什么？

“最佳”始终是激烈讨论和辩论的主题，但您（对于 Windows 世界）通常有选择：http-server 的 svnserver（其中基于 httpd 的解决方案可以是 CollabSVN、UberSVN、VisualSVN 服务器/甚至 Enrerprise 版/或纯~~Apache~~带有网络前端）用于网络访问，其中任何解决方案都具有“pro”和“contra”。从我的 POV 来看，VisualSVN 服务器社区版的 TCO 最低

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:12:38.413

由于您使用的是 Windows，[Visual SVN Server](http://www.visualsvn.com/server/)和[TortoiseSVN](http://tortoisesvn.net/)是两个可以完成工作的免费软件。

我们已经为一些最终用户提供了 TortoiseSVN，他们很快就学会了如何使用它。

我想知道您是否可以使用 SVN 中的自定义属性来标记文档以供审核？也许这个相关的问题会有所帮助：[我可以在添加属性对话框中将自定义属性添加到 TortoiseSVN 的属性列表吗？](https://stackoverflow.com/questions/2150800/can-i-add-custom-properties-to-tortoisesvns-list-of-properties-in-add-propertie)

标记也可能有用；它可以识别出可能被审查的文件的最后一个版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T23:14:51.647

SVN 可以工作，但它不是为文档设计的，它是为源代码设计的。

IMO 您正在尝试使用错误的工具解决问题。您真正需要的是一个文档版本控制工具，并且有一些。

其中之一是 TeamForge（由 CollabNet - SVN 项目创始人），它将跟踪您的文档版本、管理评论，并且可以轻松地连接到 MS Office。

查看更多： http: [//www.collab.net/products/teamforge/capabilities](http://www.collab.net/products/teamforge/capabilities)（点击“文档”）

免费试用： [https ://app.cloudforge.com/trial_signup/new/](https://app.cloudforge.com/trial_signup/new/)

（免责声明：我为 CollabNet 工作）

# string - 检查 TStringStream 的内容

> ID：13130396
> 
> 赞同：-3
> 
> 时间：2012-10-29T22:10:28.660
> 
> 标签：string, delphi, binary

`TStringStream`我在 a ( 或者它可以是任何)中有一些不错的或不太好的数据`TStream`，我想以最好的方式可视化，如果它包含文本，我想将它显示为文本，如果它不可能，我想显示十六进制代码。我知道没有**可靠**的方法可以可靠地说这是文本或二进制文件，但这不是目标，只是将其可视化以进行调试建议。

所以如果字符串

*   只有`Chars`带有代码的字符，介于 32 和 127 之间，我可以接受它作为`AnsiString`. *这很容易实现*
*   如果没有，我会尝试将其转换为 `Utf8String`，因为我知道`Utf8String`有*format*，所以我可以决定它是否是有效的 utf8 字符串。所以我需要某种可以告诉我是的函数，它可以是 utf8string。如果我错了，谁在乎，如果它是不可读的文本，那不是问题，我也不能流利地阅读十六进制代码。
*   如果还是不行，我想把它解释为宽字符串，这是最难的部分，因为据我所知它没有任何*格式*，所以我需要在这里猜测很多，这需要最大的创造力. 如果这完全是不可能完成的任务，那就跳过这一点。但说我不期待汉字。
*   else：显示十六进制代码。

我完全重写了我的问题，因为每个人都在评论这样一个事实，即数据来自哪里，以及我应该如何定义协议（我也得到了有用的提示，谢谢），这并没有让我更接近解决我的问题问题，希望在新问题中得到更好的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:23:30.977

> 所以如果字符串
> 
> •只有字符字符的代码，介于 32 和 127 之间，我可以接受它作为 AnsiString。这很容易实现

是的。但是，128 到 255 之间的字符值（也称为 ANSI/MBCS 字符）也可以存储在 an 中`AnsiString`并以可视方式显示，但您必须知道这些值所属的原始字符集。对于 D2009+，您可以将值存储到 a 中`RawByteString`并使用该`SetCodePage()`函数将适当的代码页与字符串相关联。这样，当您在代码周围传递字符串时，字符会被正确解释。如果您不关心 Unicode 格式之外的非 ASCII 字符，那么您可以忽略这一点。

> • 如果不是，我会尝试将其转换为 Utf8String，因为我知道 Utf8String 具有格式，所以我可以决定它是否是有效的 utf8 字符串。所以我需要某种可以告诉我是的函数，它可以是 utf8string。

要检查数据是否为有效的 UTF-8 字符串，您可以使用 Win32 API`Windows.MultiByteToWideChar()`函数或 Embarcadero 的`System.LocaleCharsToUnicode()`函数（仅限 XE 及更高版本）。指定`CP_UTF8`(65001) 代码页、`MB_ERR_INVALID_CHARS`标志和`nil`输出缓冲区。如果数据是有效的 UTF-8 字符串，则函数将返回数据在实际解码时可以产生的 UTF-16 字符数。否则，该函数将失败并显示`ERROR_NO_UNICODE_TRANSLATION`错误代码。

另一种选择（仅限 D2009 及更高版本）是使用类的`GetCharCount()`方法`SysUtils.TEncoding.UTF8`来计算相同数量的 UTF-16 字符。

> •如果仍然不是这样，我想将其解释为宽字符串，这是最难的部分，因为据我所知它没有任何格式

是的，当然可以 - UTF-16，它与 UTF-8 一样是一种已定义的格式（事实上，UTF-16 有两种风格，小端和大端）。

要检查数据是否为有效的 UTF-16（仅限小端）字符串，您可以使用 Win32 API`Windows.WideCharToMultiByte()`函数或 Embarcadero 的`System.UnicodeToLocaleChars()`函数（仅限 XE 及更高版本）。指定`CP_UTF8`(65001) 代码页、`WC_ERR_INVALID_CHARS`标志和`nil`输出缓冲区。如果数据是有效的 UTF-16LE 字符串，则函数将返回数据在实际编码时可以产生的 UTF-8 字节数。否则，该函数将失败并显示`ERROR_NO_UNICODE_TRANSLATION`错误代码。

另一种选择（仅限 D2009 及更高版本）是使用(little endian) 或类的`GetByteCount()`方法来计算相同数量的 UTF-8 字节。`SysUtils.TEncoding.Unicode``SysUtils.TEncoding.BigEndianUnicode`

> 所以我需要在这里猜测很多

不，你没有。对于 UTF-8 和 UTF-16，不涉及猜测。它们是定义明确的标准化格式，它们旨在相互转换而不会丢失任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:24:08.110

我强烈建议定义一个协议并坚持下去。例如，定义所有文本都是 UTF8 格式，因此在 Delphi 7 中您可以使用 UTF8Encode/UTF8Decode 和在 XE2 中使用 UTF8ToWideString（节省带宽！），并且每条消息都有一个定义它的标题（例如二进制）以及它有多长，因此您知道在数据之后您可以将下一条消息或文本恢复为 UTF8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:22:20.107

您无法实施防弹验证。除非您有一些外部限制，否则可以作为字符串传递 - WideString 的任何字符也将是 AnsiString 中的有效字符对。所以你必须在字符串之前传递一些标记。

*   对于 unicode 字符串，通常在流开始时会发送一个特殊的“字母”：[http](http://en.wikipedia.org/wiki/Byte_order_mark) ://en.wikipedia.org/wiki/Byte_order_mark这不是防弹的，但是 AnsiString 的第一个和第二个字符的机会非常低 -虽然仍有可能。
*   您可以约定，第一个两个字节将是 Windows 代码页，然后使用 TEncoding 进一步将字节转换为字符串。然而，这将使未来与非 Windows 系统的交互变得相当困难。
*   您可以在主要加载之前将[Internet 标准编码](http://en.wikipedia.org/wiki/Character_encodings_in_HTML)作为 AnsiString 标记传递，就像[在 URLs 中所做的那样](http://en.wikipedia.org/wiki/Data_URI_scheme)。该标记将仅使用 7 位 ASCII 值，因此从流中获取它是安全的。然而，这些字符集名称中有很多同义词，因此您必须使用这些同义词名称查询一些字典。

# spring - 从 hibernate-maven-plugin 2.2 版切换到 3.0 版时出现 NullPointerException

> ID：13130397
> 
> 赞同：5
> 
> 时间：2012-10-29T22:10:36.103
> 
> 标签：spring, hibernate, maven, hbm2ddl, hibernate3-maven-plugin

我正在更新我的 pom.xml 依赖项的版本，当我将 hibernate3-maven-plugin 的版本从

```
<plugin>
    <!-- Run "mvn hibernate3:hbm2ddl" to generate schema -->
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>hibernate3-maven-plugin</artifactId>
    <version>2.2</version>
</plugin> 
```

到

```
<plugin>
    <!-- Run "mvn hibernate3:hbm2ddl" to generate schema -->
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>hibernate3-maven-plugin</artifactId>
    <version>3.0</version>
</plugin> 
```

使用 2.2 版，一切都编译成功，并且

```
mvn hibernate3:hbm2ddl 
```

从带注释的类创建正确的模式。

当我再次运行 hbm2ddl 命令时，只更改版本会导致以下错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project myProject: There was an error creating the AntRun task. NullPointerException -> [Help 1] 
```

完整的堆栈跟踪如下：

```
[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project myProject: There was an error creating the AntRun task. NullPointerException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project myProject: There was an error creating the AntRun task.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: There was an error creating the AntRun task.
    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:84)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.lang.NullPointerException
    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.add(DefaultPlexusConfiguration.java:174)
    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.addChild(DefaultPlexusConfiguration.java:150)
    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.setHibernateConfiguration(PlexusConfigurationUtils.java:289)
    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.parseHibernateTool(PlexusConfigurationUtils.java:67)
    at org.codehaus.mojo.hibernate3.AbstractHibernateToolMojo.getConfiguration(AbstractHibernateToolMojo.java:60)
    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:76)
    ... 21 more 
```

如果我回到 2.2 版，一切正常。而且因为除了简单地拥有最新的依赖项之外，我不打算出于任何特定原因进行升级，所以我暂时坚持使用 2.2。

希望有人可以对此有所了解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:26:54.260

将插件更新为以下内容，并且可以正常工作：

```
<plugin>
    <!-- Run "mvn hibernate3:hbm2ddl" to generate schema -->
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>hibernate3-maven-plugin</artifactId>
    <version>${hibernate3.maven.plugin.version}</version>

    <configuration>
        <hibernatetool>
            <annotationconfiguration propertyfile="src/main/resources/${hibernate.properties}" />
            <hbm2ddl update="true" create="true" export="false"
                     outputfilename="${hibernate.hbm2ddl.sqlfile}" format="true"
                     console="true" />
        </hibernatetool>
    </configuration>
</plugin> 
```

# r - R根据排列更改data.table中列值的顺序

> ID：13130399
> 
> 赞同：3
> 
> 时间：2012-10-29T22:10:51.220
> 
> 标签：r, permutation, data.table

我有一个带有类列和许多值列的 data.table，例如

```
 class  v1  v2  v3
1:       1  10   3   8
2:       2   2  24   7
3:       1  70   3   9 
```

现在，**对于 data.table 的一个子集**（比如 class=1），我需要根据我拥有的排列更改每行中值的顺序。例如，如果排列是

```
3   1   2 
```

结果应该看起来像

```
 class  v1  v2  v3
1:       1   8  10   3
2:       2   2  24   7
3:       1   9  70   3 
```

使用 data.table 实现这一目标的最佳方法是什么？

如果这样更有效，我也可以将我的数据转换为矩阵。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:19:12.950

像这样的东西应该工作

```
 DT <- data.table(class = sample(1:3, 10, TRUE), v1 =sample(10), v2 = sample(10), v3 = sample(10))
 DT
    class v1 v2 v3
 1:     1  4  6  6
 2:     1  7  1  5
 3:     1  5  5 10
 4:     1  3  8  7
 5:     3  8  4  3
 6:     3  9  7  9
 7:     2  1  3  8
 8:     2 10 10  2
 9:     1  2  2  4
10:     2  6  9  1

# the neworder column contains the new permutations
swapcols <- data.table(class = 1:3, neworder = list(c(1,2,3), c(3,1,2),c(1,3,2)))

setkey(DT, class)
setkey(swapcols, class)

DT[swapcols, setNames(list(v1,v2,v3)[unlist(neworder)], c('v1','v2','v3'))]

    class v1 v2 v3
 1:     1  4  6  6
 2:     1  7  1  5
 3:     1  5  5 10
 4:     1  3  8  7
 5:     1  2  2  4
 6:     2  8  1  3
 7:     2  2 10 10
 8:     2  1  6  9
 9:     3  8  3  4
10:     3  9  9  7 
```

做类似的事情可能会更有效率

```
 DT[swapcols, setcolorder(.SD, unlist(neworder))] 
```

或者

```
 new <- DT[swapcols, list(v1,v2,v3)[unlist(neworder)]]
  setnames(new, names(new), c('class', c('v1','v2','v3')) 
```

* * *

你也可以使用`:=`. 就像是

```
 DT[J(1), `:=`(v1= v2,v2=v3,v3=v1)] 
```

您可以尝试在函数中自动执行此操作的某种方式，但这将是 eval / parse 和 do.call 的混乱

* * *

来自 Matthew（在 v1.8.3 中测试）：

```
DT = data.table(class=c(1,2,1),v1=c(10,2,70),v2=c(3,24,3),v3=c(8,7,9))
DT
   class v1 v2 v3
1:     1 10  3  8
2:     2  2 24  7
3:     1 70  3  9

perm = c(3,1,2)
DT[class==1, names(DT)[-1L] := .SD, .SDcols = perm+1L]]
DT
   class v1 v2 v3
1:     1  8 10  3
2:     2  2 24  7
3:     1  9 70  3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:17:11.893

我假设结果并不意味着包含该`class 2`行。

一个相当简单的解决方案：

```
df.new <- subset(df, class=1)
df.new <- df.new[,c(1,4,2,3)] 
```

或者您可以一次完成所有操作：

```
df.new <- df[df$class==2,c("class","v3","v1","v2")] 
```

# mysql - 命令提示符不显示宽 MySQL 表

> ID：13130404
> 
> 赞同：2
> 
> 时间：2012-10-29T22:11:16.960
> 
> 标签：mysql, command-line, command-prompt

我遇到了 Windows 命令提示符和 MySQL 的奇怪问题。不知何故，命令提示符无法正确显示宽表。我有简单的表：

```
+-------------------+-------------+------+-----+---------+----------------+
| Field             | Type        | Null | Key | Default | Extra          |
+-------------------+-------------+------+-----+---------+----------------+
| id                | int(11)     | NO   | PRI | NULL    | auto_increment |
| email             | char(128)   | NO   |     | NULL    |                |
| password          | char(128)   | NO   |     | NULL    |                |
| user_salt         | varchar(50) | NO   |     | NULL    |                |
| is_verified       | tinyint(1)  | NO   |     | NULL    |                |
| is_active         | tinyint(1)  | NO   |     | NULL    |                |
| is_admin          | tinyint(1)  | NO   |     | NULL    |                |
| verification_code | varchar(65) | NO   |     | NULL    |                |
+-------------------+-------------+------+-----+---------+----------------+ 
```

在我用数据填充它并尝试查看它之后，命令提示符返回这个废话：

```
mysql> SELECT * FROM users;
+----+---------------------+----------------------------------------------------
------------------------------------------------------------------------------+-
---------------------------------------------------+-------------+-----------+--
--------+-------------------------------------------------------------------+
| id | email               | password
                                                                          |
user_salt                                          | is_verified | is_active | i
s_admin | verification_code                                                 |
+----+---------------------+----------------------------------------------------
------------------------------------------------------------------------------+-
---------------------------------------------------+-------------+-----------+--
--------+-------------------------------------------------------------------+
|  1 | gudauskas@gmail.com | 69acc2c656c61eec8a09061cc92cad5c029fb379e601ab74b75
6e48ca53b536b32abd4b103a5191e1d47af1007625dcab053ae03e4adc1f9378ce18614e8f0b5 |
tz5aczjdxa02xc9ai28c9vuhv4vabe1ar5ff127ps6vwwd0svc |           0 |         0 |
  0 | c9u40b76u0tflo27550yqmvaa7phcvalxu5vu3wqhz68gkh60qa1teyyua3thp15y |
+----+---------------------+----------------------------------------------------
------------------------------------------------------------------------------+-
---------------------------------------------------+-------------+-----------+--
--------+-------------------------------------------------------------------+ 
```

我知道这是命令提示符的一些问题，因为该表没有损坏并且像魅力一样工作。还是因为太宽而正常？如果是这样，您对某些命令行应用程序有什么建议？我可以使用什么简单的命令行来查找我的表格？因为现在我必须使用 phpMyAdmin 并且它真的很滞后。
提前感谢您的帮助；]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:24:09.363

It's normal. It happens because your data is too long, If you look carefully, you can observe that row was automatically adjusted to width of the data.

**Headers:** | id | email | password | user_salt | is_verified | is_active | i s_admin | verification_code

**Data** 1 | gudauskas@gmail.com | 69acc2c656c61eec8a09061cc92cad5c029fb379e601ab74b75 ----

Maybe its helpful for you: [How to adjust display settings of mysql command line?](https://stackoverflow.com/questions/4285664/how-to-adjust-display-settings-of-mysql-command-line)

Or I think it's better if you try tou use a visual tool like MySql workbench. [http://dev.mysql.com/downloads/workbench/](http://dev.mysql.com/downloads/workbench/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:13:56.383

我相信您在第二点上是正确的（由于宽度而正常）。在这种情况下，您的密码比输出屏幕的宽度长得多，导致它换行。通常伴随此的表格格式不包括内置的换行符（据我所知），因此内容如上所示。我相信其他人很快就会正确地告诉我:)

但是，如果您愿意，可以将`\G`标志添加到查询的末尾，以稍微不同的格式（不完全是您想要的格式，但更易于阅读）。

```
mysql> SELECT * FROM users \G 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T22:14:03.043

您可以尝试[adminer](http://www.adminer.org/)而不是 phpMyAdmin，因为它声称更快（我从来没有遇到过 phpMyAdmin 的问题）并且很容易设置为替代品

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-20T15:40:25.633

右键单击窗口标题（我不知道它通常叫什么），选择属性然后转到布局。将屏幕缓冲区大小的宽度更改得更高。希望能帮助到你 ：）

# php - WordPress wp-comments-post.php

> ID：13130406
> 
> 赞同：0
> 
> 时间：2012-10-29T22:11:28.503
> 
> 标签：php, wordpress, standards

为了在添加新评论时添加评论元数据，我修改了 wp-comments-post.php 文件。现在我担心的是，当你升级 wordpress 时，你会失去它。

所以我想知道升级过程中文件是否被替换，如果是，这样做的标准做法是什么？

我所做的修改是：

```
if(isset($_POST['rating'])){
        $rate = wp_filter_nohtml_kses($_POST['rating']);
        add_comment_meta($comment_id, 'coumment_rating', $rate, false);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:31:03.530

查看 codex 中的示例，将该示例添加到您的主题函数文件中，并使用您在该函数中的 mod 中所做的操作...除非绝对必要，否则请始终避免修改核心 wordpress 文件..在大多数情况下，您可以添加动作挂钩类似于本例中的示例 [http://codex.wordpress.org/Function_Reference/add_comment_meta](http://codex.wordpress.org/Function_Reference/add_comment_meta)

# java - 将 iText 中的文本对齐单行

> ID：13130407
> 
> 赞同：7
> 
> 时间：2012-10-29T22:11:42.593
> 
> 标签：java, itext

创建一行文本的最佳方法是什么，该行将有两个元素与一条假想线对齐？像这样（给出四行以更好地说明这一点）：

```
 1\. some random text
  34\. some more random text
 764\. here's even more random text
4594\. it just never ends 
```

假想的线将穿过点，或它们之后的空间。数字右对齐，文本左对齐。

我不想使用列表，因为元素可能不按顺序排列，并且在设置行距方面有一定的限制。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-30T06:49:15.053

您可以使用具有 2 列的 PdfPTable，第一个右对齐，最后一个左对齐。然后在单元格内容上设置设计器填充。例如：

```
PdfPTable tbl = new PdfPTable(2);
PdfPCell cell = new PdfPCell(new Phrase("1."));
cell.setHorizontalAlignment(Element.ALIGN_RIGHT);
cell.disableBorderSide(Rectangle.BOX);
tbl.addCell(cell);
cell = new PdfPCell(new Phrase("some random text"));
cell.disableBorderSide(Rectangle.BOX);
tbl.addCell(cell);
cell = new PdfPCell(new Phrase("34."));
cell.disableBorderSide(Rectangle.BOX);
cell.setHorizontalAlignment(Element.ALIGN_RIGHT);
tbl.addCell(cell);
cell = new PdfPCell(new Phrase("some more random text"));
cell.disableBorderSide(Rectangle.BOX);
tbl.addCell(cell); 
```

您可以看到单元格边框被禁用（`disableBorderSide`方法）。`setMinimumHeight`您还可以使用方法调整单元格的最小高度。

# windows-8 - Win8 作为自适应/辅助技术的平台

> ID：13130408
> 
> 赞同：5
> 
> 时间：2012-10-29T22:11:49.097
> 
> 标签：windows-8, assistive-technology

我有一个商业伙伴，他有兴趣为残疾人提高低成本自适应/辅助技术的质量。iOS 和 Android 平台已经有了一些不错的初步努力，但我们认为还有很多可以改进的地方，特别是在用户友好性方面（这应该是针对认知障碍者的产品的主要关注点）。

我的问题是：这里的每个人都认为 Windows 8 作为此类软件的目标平台有多合适？我在 Surface 上听到了褒贬不一的评论，但我对有关用户友好性的投诉的可信度不以为然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:14:08.100

Windows 8 实际上是辅助技术的绝佳平台。除了强调`aria-`对盲人阅读器参数等内容的支持之外，它还定义了一组自愿的额外步骤，开发人员可以采取这些步骤来审查他们的应用程序是否适用于高对比度和大尺寸文本等内容，并提供一种机制以允许用户谁需要此类软件来查找开发人员声称已针对此类事物进行审查的事物。

如果您声称自己做到了，他们还会验证您做对了。

这里有一些链接可以帮助您入门。

[http://msdn.microsoft.com/library/windows/apps/Hh700407](http://msdn.microsoft.com/library/windows/apps/Hh700407)

[http://msdn.microsoft.com/library/windows/apps/Hh700407](http://msdn.microsoft.com/library/windows/apps/Hh700407)

[http://code.msdn.microsoft.com/windowsapps/Aria-sample-f3cf5323](http://code.msdn.microsoft.com/windowsapps/Aria-sample-f3cf5323)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T22:30:17.237

在我们位于 Mizzou 的实验室中，我们开始看到其中一些努力使 Windows 8 成为一个可行的辅助/康复平台。~~Metro~~ Modern 界面本身就是一种帮助，与普通图标相比，这些瓷砖为运动技能较低的用户提供了更大的点击/触摸表面。

我参与的项目的负责人希望开始将 Kinect 与 Windows 8 结合使用，以便为他的患者创建“康复”游戏；也就是说，将用于残疾人或受伤者的正常测试和练习制作成 Windows 游戏，让受苦者更有动力完成他们的日常生活。可能会收集统计数据、患者获得的成就等。这不是 Windows 8 固有的东西，但考虑到 Kinect 可用作医学测试工具且 Kinect SDK 迄今为止仅限于 Windows 的事实，我认为该平台在使这些游戏和诊断工具成为现实方面具有一定的潜力。

至于 Surface 本身，我认为它至少会像市面上的任何其他平板电脑一样用户友好……当然，评论才刚刚出现，而且它搭载的操作系统是全新的，所以事情可以改变. Surface 相对于 iOS 和 Android 的真正优势在于它实现的绝对庞大的驱动程序库（与 Windows NT 相同；兼容 427,000,000 种不同的产品）以及它有一个 USB 端口来访问当今制造的大多数设备这一事实。如果您需要将 Surface 连接到自适应设备，这样做应该相对容易。为所述自适应设备开发驱动程序与为标准 Windows 兼容设备 IIRC 开发驱动程序应该没有什么不同。

总的来说，我会说操作系统本身至少与自适应/康复/辅助类别中的竞争对手一样好或更好，但您的业务合作伙伴应该很高兴知道使用 Kinect 肯定有一些新的领域需要探索， Windows 8、WinRT、平板电脑和其他元素相互配合。它比您列出的其他生态系统提供了更多的*潜力*，至少在我作为研究人员的拙见中。

# sql-server-2008 - 如何使用外部数据库引用测试 SQL Server 存储过程？

> ID：13130411
> 
> 赞同：1
> 
> 时间：2012-10-29T22:11:53.403
> 
> 标签：sql-server-2008, stored-procedures

我在存储过程中继承了具有以下内容的系统。

```
SELECT blah, bleah FROM ThirdPartyDB.dbo.SomeView 
```

`ThirdPartyDB`是一个客户端接口数据库，除了前面提到的视图外，我们无权访问它。所有这些在生产中都可以正常工作，但目前我无法测试它，因为我`ThirdPartyDB`在测试服务器上没有。

显然我想解决这个问题，但我想知道解决这个问题的最佳方法是什么？

只是在测试服务器上使用名为 的表创建一个新数据库`SomeView`，这似乎是最简单的最佳方法，还是有更好的方法我不知道？

# python - 列表中的辅音删除

> ID：13130413
> 
> 赞同：-1
> 
> 时间：2012-10-29T22:11:59.437
> 
> 标签：python, string

我正在研究一个接收输入字符串（st）和字符（ch）的函数。字符串 st 可以包含字母、数字和符号。该函数应返回一个新字符串，该字符串具有与原始字符串相同的元音（'aeiou' 或 'AEIOU' 中的任何一个），并且位于与 st 中相同的位置，对于其他位置，它应该具有符号 ' $'，但只包括这些字符，直到字符 ch 的第一次出现并且不包括字符 ch（即使 ch 是元音）。（返回的字符串可能比原始字符串短，也可能是空字符串）。

我已将字符串转换为列表，以便将不是元音的字符更改为符号“$”，但我不明白如何进行此更改。这是我尝试过的，

```
def vowels_or_not (st, ch)
    newst=list(st)
    n= st.find('ch')
    nt=n+1
    sign='$'
    con=list('bcdfghjklmnpqrstvwxyz')
    for con in newst:
        del con
        del newst[nt:]    
    return sign.join(newst) 
```

但它不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:24:40.957

一种不那么“循环”的方法：

```
def vowels_or_not(string, char):
    left, mid, right = string.partition(char)
    # left is now a string with everything BEFORE the first occurence of char

    left = [(c if (c.lower() in "aeiou") else '$')
            for c in left]
    # left is now a list of all characters in the original left with vowels 
    # replaced with $

    return ''.join(left)

print vowels_or_not('abcdefghijklmno', 'i') 
# => a$$$e$$$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:18:08.477

您想选择一个不同的变量来遍历 for 循环，例如：`con`，然后选择常量列表，例如`cons`。我之所以选择这两个名称，是因为它们通过复数形式具有某些含义，暗示它是一个列表而不是单个元素。如果您选择相同的变量，那么您将重新定义 con 以等于字符串中的此元素，而不是辅音列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:45:29.080

[itertools](http://docs.python.org/2/library/itertools.html)是你的朋友。

使用 itertool 函数，它变成了一个简单的单行器，甚至不值得一个函数。

```
st = "printing until k and not over"
ch = "k"

from itertools import takewhile
"".join( c if c in 'aeiouAEIOU' else '$' for c in takewhile(lambda k: k!=ch,st) ) 
```

当字符与给定字符不同时，takewhile 遍历字符串，如果不是元音，则替换被迭代的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T22:30:33.723

一个简单的方法：

```
def func(st,ch):
   con='bcdfghjklmnpqrstvwxyz'
   vow="aeiou"
   sign="$"
   ans=""
   for x in st:
       if x !=ch:
           if x in con:
              ans+="$"
           else:
              ans+=x   
       else:
           break
   return ans

print func("abcdeefhkfgosdmvnsvh","k")
print func("adbfkjsdbksdbv","a")
print func("iduskjfhdrsqksd","j") 
```

**输出：**

```
a$$$ee$$

i$u$$ 
```

# ios - Google Plus iOS App 中使用的字体名称？

> ID：13130415
> 
> 赞同：3
> 
> 时间：2012-10-29T22:12:02.360
> 
> 标签：ios, google-plus

有人知道 Google Plus iOS 应用中使用的字体名称吗？如果我想在我的应用程序中使用相同的字体，我会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:20:53.963

截图。剪下一个文本区域并使用[此](http://www.myfonts.com/WhatTheFont/)站点。它会为您检测到它。

# javascript - 验证 ISO 8859 的子组

> ID：13130419
> 
> 赞同：0
> 
> 时间：2012-10-29T22:12:23.523
> 
> 标签：javascript, regex

是否可以使用正则表达式验证文本是否包含字母数字字符（az、AZ、0-9）和 ISO 8859 的某些字符？例如，Dec 代码 192 (À) 中的组中的字符到 dec 代码 214 (Ö) 中的字符 [http://es.wikipedia.org/wiki/ISO-8859-1](http://es.wikipedia.org/wiki/ISO-8859-1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:15:39.487

是的你可以。

```
[a-zA-Z0-9\xc0-\xd6] 
```

...或类似的规定。在`\xXX`X'es 中是从`\x00`到的十六进制字符代码`\xFF`。使用[您自己的参考链接](http://es.wikipedia.org/wiki/ISO-8859-1)获取正确的代码。

您还可以使用`\uXXXXX`其中 X'es 是 unicode 代码点来指定 unicode 字符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T22:16:11.907

是的你可以。使用此页面测试您的字符：http: [//xregexp.com/tests/unicode.html](http://xregexp.com/tests/unicode.html)

# oauth - 与 Microsoft 的 OAuth 无法正常工作

> ID：13130420
> 
> 赞同：1
> 
> 时间：2012-10-29T22:12:23.123
> 
> 标签：oauth, microsoft-live-connect

我基于 Visual Studio 2012 Web 应用程序模板创建了一个 Web 应用程序，并尝试测试添加 OOB 的 OAuth。我转到以下链接注册我的应用程序并获取客户 ID。

[https://manage.dev.live.com/Applications/Index](https://manage.dev.live.com/Applications/Index)

OpenAuth.AuthenticationClients.AddMicrosoft 始终生成：输入参数“redirect_uri”的提供值无效。该值必须是一个绝对 URL，其方案为 http:// 或 https://。

但如果我按照这篇文章进行操作，我可以毫无问题地登录。（通过添加 iframe 等）

[http://weblogs.asp.net/dwahlin/archive/2007/08/17/integrate-windows-live-id-authentication-into-your-website.aspx](http://weblogs.asp.net/dwahlin/archive/2007/08/17/integrate-windows-live-id-authentication-into-your-website.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:30:45.173

**简短的回答**：

1）更新您的主机文件，添加行：“127.0.0.1 mynewApplication.test”

2) 在 manage.dev.live.com 中将“重定向域”设置为 http://mynewApplication.test:[PORT]

3) 在本地运行您的应用程序，确保您的浏览器中有 http://mynewApplication.test:[PORT]

4) 用微软登录

这对我来说很好。

**长答案：**

看起来您必须在 Ms Application 管理工具中将“重定向域”指定为某个唯一的域名，如果您在本地测试您的应用程序，您必须在主机文件中维护该域名。他们不再允许设置像“localtest.me”这样的共享域名。

如果您查看 fiddler，您会看到 MVC 将引用 URL（您在浏览器中看到的当前 URL）添加到 oauth 请求。因此，当您发送将您重定向到 Microsoft oauth 的单击按钮时，请确保您的浏览器从在 App Redirect 域中注册的相同域名加载当前页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T16:53:59.063

脚步：

1.  在以下位置注册您的应用程序：[Windows Live 应用程序管理站点](http://go.microsoft.com/fwlink/?LinkID=144070 "Windows Live 应用程序管理站点")，请参阅[使用 Windows Live 注册您的应用程序](https://msdn.microsoft.com/en-us/library/ff751474.aspx "向 Windows Live 注册您的应用程序")
2.  在 API 配置下，输入您的根域，例如：

> www.yourdomain.com

3.  在 API 配置下，输入您的应用程序 URL。不要忘记包括：**Account/RegisterExternalLogin**

> www.yourdomain.com/YourApp/Account/RegisterExternalLogin

4.  编辑 AuthConfig.vb，取消注释**OpenAuth.AuthenticationClients.AddMicrosoft**并从**Windows Live 应用程序管理站点**复制您的**clientId**和**clientSecret**

    ```
    OpenAuth.AuthenticationClients.AddMicrosoft(
        clientId:="0000000000000", 
        clientSecret:="x0-0000000000000000") 
    ```

5.  在 www.yourdomain.com/YourApp 中发布您的应用程序

PS。不要忘记在**Web.config** (DefaultConnection)中更新您的 connectionString

# arrays - 需要帮助在 Visual Basic 中将字符串拆分为多个数组

> ID：13130421
> 
> 赞同：1
> 
> 时间：2012-10-29T22:12:24.873
> 
> 标签：arrays, vb.net, visual-studio-2010

我得到了这个 .txt 文件。

```
Left Behind,Lahaye,F,7,11.25
A Tale of Two Cities,Dickens,F,100,8.24
Hang a Thousand Trees with Ribbons,Rinaldi,F,30,16.79 
```

该文件是： *书名*、*作者*、*小说或非小说*、*股票*、*价格*

我需要将它们分成多个数组，至少我觉得我这样做了，到目前为止我有这个

```
 Private Sub frmInventory_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'Populate array
    Dim temp() As String = IO.File.ReadAllLines("Books.txt")
    temp = Split(",")
    lstBooks.DataSource = temp.ToList
End Sub 
```

这不是诀窍......显然。

我只是不知道如何将其放入多个数组中，例如书籍等，或者可能是二维数组。

谢谢你的帮助。

我看过很多这样的网站，但他们提供的唯一帮助是将其拆分为 2\. [http://patorjk.com/programming/tutorials/vbarrays.htm#splitfunction](http://patorjk.com/programming/tutorials/vbarrays.htm#splitfunction)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:26:54.270

如果格式总是那么严格，您可以使用 string.Split 手动完成，否则我建议使用现有的库[`FileHelpers`](http://filehelpers.sourceforge.net/)，例如这个[快速 CSV 解析器](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)或 VB.NET 板载[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类。

要回答您的实际问题，您可以使用 an`File.ReadLines`和 an `IEnumerable(Of String())`。

```
Dim lines As IEnumerable(Of String()) = 
         From line In IO.File.ReadLines("Books.txt")
         Select line.Split(","c) 
```

如果您想要一个数组：`lines.ToArray()`，它将全部加载到内存中（例如[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)），而`File.ReadLines`流式传输文件中的行并且仅在您要求时（fe via `Take(10)`）。

**编辑**：如果您想要最可重用的方法，请使用具有这些属性的自定义类并从 string() 初始化它：

```
Public Class Book
    Public Property Title As String
    Public Property Author As String
    ' and so on '
End Class

 Dim books = From line In System.IO.File.ReadLines("Books.txt")
             Let parts = line.Split(","c)
             Select New Book() With {
                .Title = parts(0),
                .Author = parts(1)
            } 
```

例如，您可以在 a`For Each`或作为 DataSource 中使用它。请注意，它容易出错，标题可能还包含逗号，或者格式并不总是严格的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:51:00.440

在不知道您想对数据做什么的情况下，很难提供帮助。但我想你最好的选择是创建一个书籍类，其中包含书名、作者、价格等属性。

创建一个列表（书籍），逐行读取 txt 文件，用逗号分隔每一行，并使用每个结果数组创建一个书籍实例，并将其添加到列表中，就像这个仓促编写的示例：

```
Public Class book
Property title As String
Property author As String
Property price As Double

Public Sub New(ByVal title As String, ByVal author As String, ByVal price As Double)
    _title = title
    _author = author
    _price = price
End Sub
End Class

Public Class Form1
Public booklist As List(Of book)
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)     Handles Button1.Click
    Dim bookfile As String() = IO.File.ReadAllLines("c:\file.txt")
    For Each line As String In bookfile
        Dim bookinfo As String() = line.Split(",")
        Dim abook As New book(bookinfo(0), bookinfo(1), bookinfo(2))
        booklist.Add(abook)
    Next
End Sub
End Class 
```

如果这是您想做的事情，我将根据需要改进上述代码

# php - 如何将自定义字段添加到 Joomla 房地产代理 (JEA) 扩展

> ID：13130427
> 
> 赞同：1
> 
> 时间：2012-10-29T22:12:46.727
> 
> 标签：php, joomla

有一个名为 JEA 的插件，它允许我们为房地产经纪人创建一个 Joomla 站点。这运行良好，但我们想为其添加一些额外的字段。

请有人可以通过让我知道需要编辑哪些文件来帮助我添加一些额外的字段吗？

插件可以在这里找到：http: [//joomlacode.org/gf/project/jea/](http://joomlacode.org/gf/project/jea/)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T04:42:13.130

JEA 有一个插件系统，所以不要破解核心文件，创建一个插件来添加字段。

svn 中有一个示例插件，您可以在这里找到[http://joomlacode.org/gf/project/jea/wiki/?pagename=Plugins](http://joomlacode.org/gf/project/jea/wiki/?pagename=Plugins)

# iphone - 在 ViewController 之间切换时 iOS 应用程序变慢

> ID：13130429
> 
> 赞同：0
> 
> 时间：2012-10-29T22:13:01.857
> 
> 标签：iphone, ios, xcode, performance

我正在开发一个 iOS 应用程序，当我在设备上尝试它时，更改视图时速度太慢。在模拟器中它工作得很好。

那是我的 viewDidLoad 代码。Y 不知道某些功能是否太繁重而无法实现。

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    // code for 4-inch screen
    self.backImage.image = [UIImage imageNamed:@"settings-568h@2x.png"];
} else {
    // code for 3.5-inch screen
    self.backImage.image = [UIImage imageNamed:@"settings@2x.png"];
}

array = [[NSMutableArray alloc] initWithObjects:@"Object1",@"Object2",@"Object3", nil];

NSString *loadedString = [array objectAtIndex:0]; //Defalut
self.checkedIndexPath = [NSIndexPath indexPathForRow:0 inSection:0];

NSString *savePath = [self pathOfSavingFile:@"fileSetting"];
if([[NSFileManager defaultManager] fileExistsAtPath:savePath])
{
    NSString *tempSTR = [[NSString alloc] initWithContentsOfFile:savePath encoding:5 error:nil];
    loadedString = tempSTR;
}

if([[array objectAtIndex:0] isEqualToString:loadedString]) {
    self.checkedIndexPath = [NSIndexPath indexPathForRow:0 inSection:0];
} else if ([[array objectAtIndex:1] isEqualToString:loadedString]) {
    self.checkedIndexPath = [NSIndexPath indexPathForRow:1 inSection:0];
} else if ([[array objectAtIndex:2] isEqualToString:loadedString]) {
    self.checkedIndexPath = [NSIndexPath indexPathForRow:2 inSection:0];
}

UIApplication *pNote = [UIApplication sharedApplication];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:myApp];

self.titleLabel.text = NSLocalizedString(@"settingsLoc", nil);
[self.backButton     setTitle:NSLocalizedString(@"backLoc", nil)     forState:UIControlStateNormal];

[super viewDidLoad]; 
```

非常感谢你。

# javascript - 使用 jQuery 进行 ajax 处理时，脚本并不总是完全执行

> ID：13130432
> 
> 赞同：0
> 
> 时间：2012-10-29T22:13:22.003
> 
> 标签：javascript, jquery

我有这个子句在特定条件下执行脚本；

```
//if artist page clicked run profile script
if (id == 'artist_link') {
        $.getScript("AJAX/get_profile.js");
} 
```

我遇到的问题是脚本通常不会完全执行。有时什么都不会被执行，有时只会执行一部分。我真的无法提供比这更多的细节。奇怪的是，当萤火虫打开时它总是完全执行，我找不到任何问题。我测试过并且都有这个问题的浏览器是 chrome 和 firefox

带有`get_profile.js`文件的[jsfiddle 。](http://jsfiddle.net/TNt4s/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:39:21.867

我可能是错的，但据我所知，`$(location)`它不是有效的 jQuery。替换`$(location).attr('pathname')`为 just`window.location.pathname`会消除可能的错误。

其他一些一般性的东西，它们不应该真正影响它是否有效，但值得一提的是提高整体美观度：

*   `data`从 JSON 调用返回的是一个对象，而不是一个数组。要访问`DP`它的元素以显示图片，您应该使用`data.DP`not `data['DP']`(same for`name`和其他几个元素
*   `.click()`已弃用，`.on()`改为用于绑定事件
*   您正在遍历一个集合 ( `$.each (data, function(key, val){`) 并且在循环内部，正在修改 DOM ( `$.append()`) - 您最好在循环期间构建一个 HTML 字符串，然后在循环之后将其添加到单个追加中，如DOM 插入对性能来说很慢
*   您多次使用同一个选择器（请参阅`$('#origin')`参考资料），这导致 jQuery 每次都必须查找元素。要么缓存它，然后调用它的方法：
    *   `$origin = $('#origin');`
*   或链调用相同的元素：
    *   `$('#origin').html('a').append('b').append('c');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:56:10.997

我几乎 100% 确定您的 get_profile.js 文件中某处存在错误。如果它正在执行，那么文件的加载没有任何问题。问题存在于您的 js 文件中，如果不查看其中的代码，我们将无法真正调试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:37:09.150

解决它！我不知道为什么我没有看到这个，但是在页面被 ajaxed 之前脚本被 ajaxed 导致脚本变得不起作用。无论如何，我已经修复了它。谢谢您的帮助！

# php - 将电子邮件附件安全地保存在 Web 服务器上

> ID：13130434
> 
> 赞同：0
> 
> 时间：2012-10-29T22:13:28.803
> 
> 标签：php, mysql, email, phpmailer, attachment

我正在构建一个使用 PHPMailer 发送电子邮件的 Web 应用程序，并且我已经围绕 PHPMailer 构建了一个包装类来记录正在发送的电子邮件。我还没有弄清楚的一个部分是如何安全地保存附件。我不想将文件内容读入 MySQL 数据库中的字段，因为这样做效率不高。我不想将它们存储在 Web 服务器上的文件夹中，因为可以从 Web 浏览器访问（服务器没有 public_html 文件夹，所以我不能将它们粘贴在无法访问的文件夹中） .

除了通过我的应用程序之外，存储电子邮件附件以使其无法阅读的最佳/正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:25:31.260

您可以将这些附件保存为加密文件，但我不明白为什么 mysql 解决方案会有缺陷。除此之外，请获得一个适当的服务器，其中您确实有私有目录等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:33:22.527

这真的取决于你想对这些文件做什么。

如果您将其存储在公共 Web 目录中，您可以在其中放置一个 .htaccess 文件（假设您使用的是 apache），以阻止对这些文件的 Web 访问。

然后，您可以将其存储在公共 Web 文件夹下方的文件夹中。

例如，大多数服务器都有这样的东西

```
/www/website.com/httpdocs 
```

其中 httpdocs 是公用文件夹。

您需要做的就是将它们存储在

```
/www/website.com/privatedocs 
```

所以它们不能通过网络访问

另一种选择是，如果您只是想审核发送的电子邮件，则将它们密送至另一个电子邮件帐户，例如 audit@website.com

如果您需要检查任何内容，只需查看该电子邮件帐户即可。然而，与扫描本地服务器上的文件的导向器相比，这将难以以编程方式检查。

# html - 为什么我的列表图像不对齐底部？

> ID：13130439
> 
> 赞同：0
> 
> 时间：2012-10-29T22:14:07.977
> 
> 标签：html, css, margin

我真的不确定这里包含哪些相关信息，所以我会很慷慨。在我的页面顶部，我有一条水平线。现在，在这条线的顶部，在右下角，我想放置由三个 gif 图像组成的菜单。图像很好地向右对齐，但不会一直向下到底部。早些时候，我有相同的设计，但只使用 CSS 来创建三个盒子，它就像一个魅力。这些图像正好是 96px 宽和 45px 高。这是我的 HTML，后跟 CSS（我使用的是 960 网格系统）：

哦，是的，我已经尝试使用 CSS 为 li 使用负边距。

```
<div class="grid_8">
            <ul>
                <a href="cv.html"><li></li></a>
                <a href="arbete.html"><li></li></a>
                <a href="index.html"><li></li></a>
            </ul>
</div>

ul {
list-style:none;
padding:0;
margin-top:50px;
}

li:first-child {
margin-right:-5px;
}

li {
background-image:url('bilder/meny_hem.gif');
float:right;
width:96px;
height:45px;
margin-bottom:0px;
padding-bottom:0px;
} 
```

编辑：这是我的新代码。正确的 (?) 语法，但问题仍然存在。另请参阅它的外观图像。

```
<ul>
    <li><a href="cv.html"></a></li>
    <li><a href="arbete.html"></a></li>
    <li><a href="index.html"></a></li>
</ul>

ul {
list-style:none;
padding:0;
margin-top:50px;
}

li:first-child {
margin-right:-5px;
}

li {
float:right;
width:96px;
height:45px;
}

a {
display:block;  
background-image:url('bilder/meny_hem.gif');
width:96px;
height:45px;
margin-bottom:0px;
padding-bottom:0px;
} 
```

![图像不会与底线对齐。](../Images/373a20034c54679d76fd5a9475cefa86.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:26:13.713

首先，这不是有效的 HTML：

```
<a href="cv.html"><li></li></a> 
```

`<a>`不能是 的直子`<ul>`。您需要将锚标签*放在*`<li>`元素内。

然后，我会更改您的 CSS，使`<a>`元素具有`display: block`，具有宽度和高度属性，并获取背景图像。您的`<li>`元素应该保留`float: right`宽度和高度属性，仅此而已。

您可能不得不摆弄`<li>`和`<a>`元素的边距和填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:43:36.910

好吧，根据您提供的 HTML、CSS 和图像，我不能 100% 确定黑线来自哪里，但这里有一个可行的解决方案：

在这里演示：http: [//jsfiddle.net/stGPz/](http://jsfiddle.net/stGPz/)

将以下内容添加到您的 CSS 中：

```
ul {
    border-bottom:1px solid #000;
    height:45px; /* The height of your li */
} 
```

我能想到的唯一另一件事是确保您的图像高度为 45 像素，并且图像覆盖整个 45 像素。但是此解决方案为您提供了一条线，并且列表项与该线接触。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:48:44.770

如果你想让它粘在你的容器 div (grid_8) 的底部，你必须将它的高度调整为大约按钮的高度，如下所示：

```
<div class="grid_8 container">
    <ul>
        <li><a href="cv.html">HEM</a></li>
        <li><a href="arbete.html">HEM</a></li>
        <li><a href="index.html">HEM</a></li>
    </ul>
</div>

.container{
    width:100%;
    height:50px;
    border-bottom:1px solid black;        
} 
```

[http://jsfiddle.net/pqV5E/29/](http://jsfiddle.net/pqV5E/29/)

您还可以`<ul>`通过使用 bottom:0; 使您的绝对和相对于您的容器。你会让它像这样粘在底部：

```
ul {
    list-style:none;
    padding:0;
    position:absolute;
    bottom:5px; 
    right:0;
}

.container{
    width:100%;
    height:100px;
    position:relative;      
} 
```

如果您将使用最后一种技术，请务必删除您的`<ul>`边距顶部，并将该边距值添加到容器的高度

[http://jsfiddle.net/pqV5E/28/](http://jsfiddle.net/pqV5E/28/)

我使用圆角按钮而不是图像，但您可以切换到任何您想要的图像。

# php - 使用包含 HTML 的条件语句的最有效方法

> ID：13130441
> 
> 赞同：0
> 
> 时间：2012-10-29T22:14:27.390
> 
> 标签：php, conditional-statements

要在用户登录时显示表单，最好将其存储在变量中并回显吗？

选项1

```
<?php $form  =    "<div><form id=\"login\"></form></div>"; ?>

<html>
<?php 
if (!isset($_SESSION['username']))
      { 
       echo $form;
      }
 else {
       echo"<li><a href=\"logout.php\">Sign Out</a></li>";
      } ?>
</html> 
```

或点击进出php？

选项 2

```
<?php  if (!isset($_SESSION['username'])) 
          {?>
            <div><form id=\"login\"></form><div>
    <?php } 
       else
          { ?>
            <li><a href="logout.php">Sign Out</a></li>
          }?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T22:18:48.427

您还可以在条件中包含：

```
<?php 
if (!isset($_SESSION['username'])):
    include('login-form.php');
else: ?>
    <li><a href=\"logout.php\">Sign Out</a></li>
<?php endif; ?> 
```

我不知道这种情况下的效率，因为差异很小。但为了便于阅读，使用写出的语句会有所帮助：

```
<?php if($condition): ?>
    Do not echo out html in php. Instead just break out of it like this
<?php else: ?>
    Some else condition
<?php endif; ?> 
```

# ios - 具有相同 URL 方案的多个应用程序 - iOS

> ID：13130442
> 
> 赞同：52
> 
> 时间：2012-10-29T22:14:31.250
> 
> 标签：ios, xcode, url-scheme

因此，对于我的新应用程序，我有一个 URL 方案，以便人们可以从另一个应用程序或网站启动我的应用程序......“myapp://”......那么如果 AppStore 中有另一个应用程序会发生什么与我的 URL 方案相同吗？或者如果有人试图窃取我的 URL Scheme？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-29T22:18:04.757

如果两个应用程序注册了相同的自定义 URL 方案，则未定义实际启动哪个应用程序。一个将推出，但没有办法知道。

这是一个真正的踢球者。如果您的设备上有两个具有相同 URL 方案的应用程序，并且您删除了实际启动的应用程序，则在不重新启动 iOS 设备的情况下，另一个应用程序将不会通过 URL 启动。

您最好的解决方案是确保您的自定义 URL 方案不是微不足道的，因此其他应用程序具有相同方案的可能性很小。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-29T22:17:53.810

根据苹果文档：

如果多个第三方应用程序注册以处理相同的 URL 方案，则未定义选择哪个应用程序来处理该类型的 URL。

连续 8 年来自 Apple 文档的准确引用：

> 注意：如果多个第三方应用程序注册处理相同的 URL 方案，目前没有确定哪个应用程序将获得该方案的过程。

资料来源：

*   与其他应用程序通信（[2011 年 12 月存档](https://web.archive.org/web/20111230060158/http://developer.apple.com/library/IOS/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)）
*   实施自定义 URL 方案（[2019 年 5 月存档](https://web.archive.org/web/20190514160038/https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html)）

截至 2019 年 9 月，这部分文档已从 Apple 网站上删除。最接近的相关文档现在可能是[Register Your URL Scheme](https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-28T10:17:59.470

## 2016 年更新

自 2012 年以来，Apple 的政策发生了变化。今天他们表示*将不允许多个应用程序注册同一个方案*。注册时间是解决争用比运行时更干净的地方，因为它避免了其他答案讨论的安全问题。

> 注意：如果多个第三方应用程序注册处理相同的 URL 方案，目前没有确定哪个应用程序将获得该方案的过程。

来源：[https ://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW1](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-02T15:20:17.277

正如该线程中的其他答案所涵盖的那样，将多个应用程序注册为能够处理特定的自定义 URL 方案是完全可以接受的，并且如果设备上安装了 2 个以上能够处理特定自定义 URL 的应用程序scheme，未定义系统将在运行时选择哪个应用程序。

如果对于您的特定用例很重要，您的应用程序（并且只有您的应用程序）在设备上注册为能够处理特定 URL，那么首选[通用链接](https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content/supporting_universal_links_in_your_app)而不是[自定义 URL 方案](https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app)。通用链接是标准的 HTTP 或 HTTPS 链接，粗略的想法是，在安装您的应用程序时，系统会检查存储在您的 Web 服务器上的文件，以验证您的网站是否允许您的应用程序代表它打开 URL。如果打开此类 URL 时您的应用程序未安装在设备上，系统会在 Safari 中正常打开该 URL，让您的网站处理它。

有关通用链接和自定义 URL 方案的更多信息，请参阅[允许应用程序和网站链接到您的内容](https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content)文档页面。

# c# - 无效的 xml 响应

> ID：13130443
> 
> 赞同：0
> 
> 时间：2012-10-29T22:14:43.030
> 
> 标签：c#, json, visual-studio-2008, webservice-client

我正在连接到一个新的网络服务。使用 Visual-Studio 添加服务参考，我的方法调用如下：

```
void Method(string request); 
```

问题是网络服务发送了一个响应，所以 void 应该是一个字符串？因为我收到响应的无效 XML 错误。使用**Fiddler**我可以看到响应为：

```
{"errorcode": "000","errormsg": "Alert Added."}<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><AlertResponse xmlns="http://www.quit.com/" /></soap:Body></soap:Envelope> 
```

显然，在 XML 之前带有 Json 响应的 XML 是无效的。如何以不同的方式调用/设置服务以获得响应结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:45:01.690

这是一个 void 方法，但它不是单向方法，因此服务器将发送响应，但它将是一个空元素，如您的情况：

```
<soap:Body>
    <AlertResponse xmlns="http://www.quit.com/" />
</soap:Body> 
```

服务器确实发送了响应，因为即使在`void`方法的情况下，它也可能返回其他可能的“响应” - 一个示例是异常（或*错误*，在 SOAP 术语中）。

但是，您正在与之交谈的服务正在发送无效响应。如果您不拥有该服务，并且仍需要使用它，您可能需要考虑创建一个自定义编码器，该编码器将能够在尝试使用它之前从响应中去除该无关的 JSON 片段。

# objective-c - IF 语句在 viewDidLoad 或 viewDidAppear 中被忽略

> ID：13130444
> 
> 赞同：0
> 
> 时间：2012-10-29T22:14:48.880
> 
> 标签：objective-c, if-statement, conditional-statements

我是 iOS 新手，但我知道这很危险。那就是说我束手无策，我正在寻找一些指导。我正在使用 iOS 处理大量设计问题，但我找到了一种方法来以我想要的方式显示内容，使用 webView 并调用 HTML 页面，为我提供所需的外观和感觉。

但是，我需要让它根据用户点击的内容动态调用不同的 .html 文件。我发现当我单步执行它跳过的代码时，我的 if 条件被完全忽略了。下面是代码。我也为 viewDidAppear 试过这个。结果相同。Title 是一个 NSString ......所以理论上我是在比较一个字符串和一个字符串。

```
- (void)viewDidLoad
{

    if (Title == @"Acme") {
        NSString *path = [[NSBundle mainBundle]pathForResource:@"index"  ofType:@"html"];
        NSURL *url = [NSURL fileURLWithPath:path];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [webView loadRequest:request];
        [webView setScalesPageToFit:NO];

    } else if (Title == @"NotAcme"{
         NSString *path = [[NSBundle mainBundle]pathForResource:@"Page2"  ofType:@"html"];
        NSURL *url = [NSURL fileURLWithPath:path];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [webView loadRequest:request];
        [webView setScalesPageToFit:NO];
    }

    [super viewDidLoad];
    // Do any additional setup after loading the view.
} 
```

有任何想法吗？提前致谢！

杰里米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:40:38.910

不要`==`用来比较`NSString`实例；改用`isEqualToString:`：

```
if ([Title isEqualToString:@"Acme"]) {
    NSString *path = [[NSBundle mainBundle]pathForResource:@"index"  ofType:@"html"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
    [webView setScalesPageToFit:NO];

} else if ([Title isEqualToString:@"NotAcme"]) {
    NSString *path = [[NSBundle mainBundle]pathForResource:@"Page2"  ofType:@"html"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
    [webView setScalesPageToFit:NO];
} 
```

# c++ - 对象的对象内的 C++ 调用成员函数

> ID：13130451
> 
> 赞同：1
> 
> 时间：2012-10-29T22:15:26.680
> 
> 标签：c++, visual-studio-2010, oop, object, member-function-pointers

我有一个 C++ 类，简而言之，它的声明如下所示：

```
class Pico {
  ...
  Document document; // Custom Document class
  ...
} 
```

后来我调用了该类的公共成员函数之一`Document`：

```
this->document->enableEditing(); 
```

但是，IntelliSense 强调`this`并指出“表达式必须具有指针类型”。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T22:17:27.600

你要

```
this->document.enableEditing(); 
```

该`Document`成员不是指针，因此您需要`.`代替`->`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:18:27.023

`document`不是指针，因此您不需要`->`运算符：

```
this->document.enableEditing(); 
```

事实上，在这种情况下，甚至不需要`this`显式使用。以下将做：

```
document.enableEditing(); 
```

# variables - play 2 Framework @Messages -> 如何在同一条消息中插入动态变量？

> ID：13130453
> 
> 赞同：2
> 
> 时间：2012-10-29T22:15:31.947
> 
> 标签：variables, internationalization, playframework-2.0, messages

我想在我的消息中插入动态变量。例如：`@Messages("social.feed")`工作好。但我想要更具体的变量： `@Messages("social.feed.1")` `@Messages("social.feed.2")` `@Messages("social.feed.3")`

所以我尝试：`@Messages("social.feed."+@Javavariable)`但这不能编译。 `@Messages("social.feed.+"@Javavariable")` 编译但写：social.feed.@javavariable

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:40:07.147

我发现了如何做到的：你必须使用 javascript 添加 html 例如： $(".interestNameFriend").text(Messages("interestNameFriend."+interestId));

# javascript - 作为无序或有序 html 列表的一部分的主干视图

> ID：13130454
> 
> 赞同：0
> 
> 时间：2012-10-29T22:15:33.963
> 
> 标签：javascript, html, css, backbone.js

我有一个问题 - 我有一个清单：

```
<ol>
    <li>List item 1</li>
    <li>List item 2</li>
</ol> 
```

这部分是静态的，永远不会改变。

另一个按钮将 Backbone 视图添加到此列表中，而不对其进行分组。

如你所知; 您需要一个视图上的 el 标记或至少一个根标记，因为我可能需要在此视图上进行进一步的事件捕获。我不能使用 div 标签，因为生成的 html 将是无效的，这个：

```
<ol>
    <li>List item 1</li>
    <li>List item 2</li>
    <div class="myBackboneView">
        <li>List item for first component</li>
        <li>List item for second component</li>
    </div>
</ol> 
```

（这些 li 中不能有 div 标签）

有谁知道我如何能够在不弄乱 html 验证的情况下潜入根标签。

要么，要么有一个主干技巧，允许您在不使用 el 的情况下将视图链接在一起。

我还希望能够添加任意数量的这些视图 - 所以我将有一个根视图植根于 ol 标记，然后在该视图中它将委派给每个 li 组的各个视图，所以问题是我不能放一个标签来对那些 li 标签进行分组。

我知道你可能认为它应该是一个单独的列表，但这是一个要做的事情的列表。如果他们添加了这个新视图，他们在列表中就有更多的事情要做——因此它成为一个列表的一部分是有意义的。

谢谢你的帮助——我要去做肉丸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:38:18.847

尝试这个：

```
<ol>
    <li>List item 1</li>
    <li>List item 2</li>
    <li class="myBackboneView">
      <ol>
        <li>List item for first component</li>
        <li>List item for second component</li>
      <ol>
    </li>
</ol> 
```

你也可以穿上`class="myBackboneView"`inner `ol`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:53:39.173

您可以调用[`setElement`](http://backbonejs.org/#View-setElement)将视图设置`el`为已存在的特定元素：

> **设置元素** `view.setElement(element)`
> 
> 如果您想将 Backbone 视图应用到不同的 DOM 元素，请使用**setElement**，它还将创建缓存`$el`引用并将视图的委托事件从旧元素移动到新元素。

因此，您可以在方便的地方（例如`initialize`或`render`）简单地执行此操作：

```
this.setElement($('ol')); 
```

当然，您可能需要更具体的选择器。

演示：http: [//jsfiddle.net/ambiguous/mTX6K/](http://jsfiddle.net/ambiguous/mTX6K/)

您也[`el`](http://backbonejs.org/#View-el)可以在视图的定义中手动设置：

```
el: 'ol' // Or a more specific selector 
```

演示：http: [//jsfiddle.net/ambiguous/qk5Tg/1/](http://jsfiddle.net/ambiguous/qk5Tg/1/)

# graph - Neo4j 最低共同祖先

> ID：13130456
> 
> 赞同：1
> 
> 时间：2012-10-29T22:15:42.027
> 
> 标签：graph, neo4j, graph-theory

我正在考虑将 Neo4j 用于组织结构图样式树，我需要在其中使用最低共同祖先算法......

如何在 Neo4j 数据库上实现 LCA？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:36:05.827

该`Neo4J Community`库从 1.8.M03 版本开始`lowestCommonAncestor()`在该类中包含一个方法[`org.neo4j.graphalgo.impl.ancestor.AncestorsUtil`](http://grepcode.com/file/repo1.maven.org/maven2/org.neo4j/neo4j-graph-algo/1.8.M03/org/neo4j/graphalgo/impl/ancestor/AncestorsUtil.java?av=f)。

# mod-rewrite - 将 "/foo/bar" 重写为 "index.html" 将 "foo" 添加到所有相关 url

> ID：13130457
> 
> 赞同：0
> 
> 时间：2012-10-29T22:15:42.933
> 
> 标签：mod-rewrite

我正在尝试将所有传入的 url（不链接到文件系统上的物理文件）重写为我的 index.html（并进一步处理带有 history.js 的 url）

## 我的 htaccess：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /

# Rewrite everything that isn't a real file to index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ www.xy.de/index.html 
```

`localhost/www.xy.de/<foo>`完美运行，但是

`localhost/www.xy.de/<foo>/<bar>`并不真地。即使在第二个示例中，它也被重定向到 index.html，但发生了一些奇怪的事情：

## 重写日志：

[http://sprunge.us/GiEM](http://sprunge.us/GiEM)（下同以便更好地阅读）

```
[...][rid#1dfc7e0/initial] (3) [perdir /srv/http/www.xy.de/] add path info postfix: /srv/http/www.xy.de/yxc -> /srv/http/www.xy.de/yxc/z
[...][rid#1dfc7e0/initial] (3) [perdir /srv/http/www.xy.de/] strip per-dir prefix: /srv/http/www.xy.de/yxc/z -> yxc/z
[...][rid#1dfc7e0/initial] (3) [perdir /srv/http/www.xy.de/] applying pattern '^(.+)$' to uri 'yxc/z'
[...][rid#1dfc7e0/initial] (4) [perdir /srv/http/www.xy.de/] RewriteCond: input='/srv/http/www.xy.de/yxc' pattern='!-f' => matched
[...][rid#1dfc7e0/initial] (4) [perdir /srv/http/www.xy.de/] RewriteCond: input='/srv/http/www.xy.de/yxc' pattern='!-d' => matched
[...][rid#1dfc7e0/initial] (2) [perdir /srv/http/www.xy.de/] rewrite 'yxc/z' -> 'www.xy.de/index.html'
[...][rid#1dfc7e0/initial] (3) [perdir /srv/http/www.xy.de/] add per-dir prefix: www.xy.de/index.html -> /srv/http/www.xy.de/www.xy.de/index.html
[...][rid#1dfc7e0/initial] (2) [perdir /srv/http/www.xy.de/] trying to replace prefix /srv/http/www.xy.de/ with /
[...][rid#1dfc7e0/initial] (5) strip matching prefix: /srv/http/www.xy.de/www.xy.de/index.html -> www.xy.de/index.html
[...][rid#1dfc7e0/initial] (4) add subst prefix: www.xy.de/index.html -> /www.xy.de/index.html
[...][rid#1dfc7e0/initial] (1) [perdir /srv/http/www.xy.de/] internal redirect with /www.xy.de/index.html [INTERNAL REDIRECT]
[...][rid#1e08850/initial/redir#1] (3) [perdir /srv/http/www.xy.de/] strip per-dir prefix: /srv/http/www.xy.de/index.html -> index.html
[...][rid#1e08850/initial/redir#1] (3) [perdir /srv/http/www.xy.de/] applying pattern '^(.+)$' to uri 'index.html'
[...][rid#1e08850/initial/redir#1] (4) [perdir /srv/http/www.xy.de/] RewriteCond: input='/srv/http/www.xy.de/index.html' pattern='!-f' => not-matched
[...][rid#1e08850/initial/redir#1] (1) [perdir /srv/http/www.xy.de/] pass through /srv/http/www.xy.de/index.html
[...][rid#1e00800/initial] (3) [perdir /srv/http/www.xy.de/] add path info postfix: /srv/http/www.xy.de/yxc -> /srv/http/www.xy.de/yxc/static/main.css
[...][rid#1e00800/initial] (3) [perdir /srv/http/www.xy.de/] strip per-dir prefix: /srv/http/www.xy.de/yxc/static/main.css -> yxc/static/main.css
[...][rid#1e00800/initial] (3) [perdir /srv/http/www.xy.de/] applying pattern '^(.+)$' to uri 'yxc/static/main.css'
[...][rid#1e00800/initial] (4) [perdir /srv/http/www.xy.de/] RewriteCond: input='/srv/http/www.xy.de/yxc' pattern='!-f' => matched
[...][rid#1e00800/initial] (4) [perdir /srv/http/www.xy.de/] RewriteCond: input='/srv/http/www.xy.de/yxc' pattern='!-d' => matched
[...][rid#1e00800/initial] (2) [perdir /srv/http/www.xy.de/] rewrite 'yxc/static/main.css' -> 'www.xy.de/index.html'
[...][rid#1e00800/initial] (3) [perdir /srv/http/www.xy.de/] add per-dir prefix: www.xy.de/index.html -> /srv/http/www.xy.de/www.xy.de/index.html
[...][rid#1e00800/initial] (2) [perdir /srv/http/www.xy.de/] trying to replace prefix /srv/http/www.xy.de/ with /
[...][rid#1e00800/initial] (5) strip matching prefix: /srv/http/www.xy.de/www.xy.de/index.html -> www.xy.de/index.html
[...][rid#1e00800/initial] (4) add subst prefix: www.xy.de/index.html -> /www.xy.de/index.html
[...][rid#1e00800/initial] (1) [perdir /srv/http/www.xy.de/] internal redirect with /www.xy.de/index.html [INTERNAL REDIRECT] 
```

问题出在这一行：

`add path info postfix: /srv/http/www.xy.de/yxc -> /srv/http/www.xy.de/yxc/static/main.css` 这发生在 html 文件中的所有图像/脚本/样式表（因此所有相关链接）上，当然，由于没有具有此前缀的文件，所有内容都被重定向到 index.html 并且一切都搞砸了。

**为什么网络服务器会添加`yxc`到路径中？我怎样才能防止这种行为？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:36:00.710

> Why does the webserver add the yxc to the path? And how can i prevent this behaviour?

This is how relative links work. The browser tries to determine what the URI base is using the URI of the request. So when the browser requests `http://localhost/ww.xy.de/yxc/z`, the URI is `/www.xy.de/yxc/z` and the BASE is `/www.xy.de/yxc/`. With this base, **all relative links will have this appended to the front of the link**.

You need to either change all your links to absolute links, or add a

```
<base href="/www.xy.de/"> 
```

to the header of your index.html page.

# scala - 为什么 Map 操作后 Range 会转换为 Vector？

> ID：13130458
> 
> 赞同：8
> 
> 时间：2012-10-29T22:15:52.290
> 
> 标签：scala, scala-collections

在 Coursera 上的 Scala 课程之后，Martin Odersky 展示了一个示例代码：

```
1 to 5 map ( i => i*i ) 
```

他说，因为它们共享相同的接口 ( )，所以将其`Range`转换为 a ，并且结果无法表示为 a （在其示例中更清楚，因为他生成了一对不可表示为 a ）。`Vector``IndexedSeq``Range``Range`

我不确定是否理解，因为我认为他之前说过，在 for 表达式中，第一个生成器将确定将产生的元素类型，而且它似乎并不总是正确的，至少对于`Range`.

而且我不确定为什么输出是`Vector`，因为`Vector`可能不是唯一可以表示上面计算的结果的另一种实现。

有人可以帮我理解这部分吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T22:26:18.420

`map`偷偷地将 a`CanBuildFrom`作为隐含参数。它的工作是根据您已经拥有的集合（以及内容的类型）生成一个新集合。由于`Range`不能包含任意的东西——甚至是任意的整数——所以没有`CanBuildFrom`产生`Range`. 最具体的超类型`Range`确实有`CanBuildFrom`is `IndexedSeq`。由 this 实际构建的集合是一个`Vector`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:25:11.173

正如我确信 Martin 也解释过的那样，`for`理解对应于（被翻译成）`map`和`flatMap`方法的链式调用（`foreach`如果你不使用`yield`）。

它通常导致第一个生成器类型的值的原因是`map`并且`flatMap`通常返回与它们的接收器相同的类型（`map`在 a`List`返回 a`List`等）。

现在`Range`s 的问题是它们不能表示不是常规整数序列的事物。因此，[定义](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Range)`map`的and的返回类型不能是。下一个最佳匹配是索引序列的原型实现。`flatMap` [`Range`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Range)`Range``Vector`

（如果您查看源代码甚至我链接到的 Scala 文档页面，您会发现它比返回类型要复杂一些，但从概念上讲，这就是原因。***编辑：*** *......现在是 Rex可儿刚刚扔了`CanBuildFrom`炸弹。*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T22:23:12.140

`Vector`是 的默认实现`IndexedSeq`。`map`不能表示为 a ，`Range`因为`Range`该类被设计为包含一系列数字，这些数字可以用 start、stop 和 step 值表示（类似于`range`Python 中的值）。API 文档指定它是`IndexSeq`.

我们可以看到`1 to 5 map { i => i * i }`会给我们一个值容器（1、4、9、16、25）。我们可以获得开始和停止，但没有恒定的步长值。

# mobile - 某些手机 是否支持 Outlook 表单？

> ID：13130461
> 
> 赞同：0
> 
> 时间：2012-10-29T22:16:19.863
> 
> 标签：mobile, outlook, outlook-form

我想创建一些 Outlook 表单来自动化公司流程。

Outlook 表单可以在某些手机上使用吗？还是仅在桌面的 Outlook 上受支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:24:53.827

我已经为 Android、iOS 和 JME (J2ME) 编写了应用程序，但我不知道有任何在手机上使用 Outlook 表单的能力。话虽如此，我还没有尝试在 Windows 7/8 手机上进行开发。如果它在任何地方都得到支持，我想它会在那里。

祝你好运！

# css - Internet Explorer 中的 CSS 布局更改

> ID：13130463
> 
> 赞同：0
> 
> 时间：2012-10-29T22:16:30.467
> 
> 标签：css, layout

我的问题：我刚刚编写了一个在 chrome 和 firefox 中样式很好的网站。但是在 internet explorer(9) 中它会中断。灰色标题背景应该被推到徽标块的右侧，按钮应该位于深灰色区域。我发布了我的代码。我不是css专家，任何提示将不胜感激。（第二张图片显示了想要的结果） ![在此处输入图像描述](../Images/6a1c80db21c99882e4d9f8a08d68886c.png)

html: 网站

```
</head>
<body>

<div class="wrap_overall">

    <div class="header">
        <a href="http://localhost">
            <img class="logo" src="http://localhost/images/logo.png" width="175" height="24" alt="weblogo" />
        </a>        
    </div>

    <div class="headerbg"></div>

    <!-- nav top highlight -->
    <div style="background-color:#6c6c6c;margin:9px0px0px;height:1px;width:1020px;z-index:1;"></div>
    <!-- nav bar -->
    <div style="background-color:#5a5a5a;height:53px;width:1020px;z-index:1;"></div>
    <!-- nav bottom frame -->
    <div style="background-color:#d4e6b6;height:13px;width:1020px;z-index:1;border-top:4px solid #9de629; margin:0px 0px 10px;"></div>

    <div class="nav_main">
    <ul>
        <li> <a href="http://localhost/button1">
                <img src="http://localhost/images/button1.png" width="63" height="18" alt="button1" />
            </a> </li>

        <li> <a href="http://localhost/index.php?page=button2">
                <img src="http://localhost/images/button2.png" width="59" height="18" alt="button2" />
            </a> </li>

        <li> <a href="http://localhost/index.php?page=button3">
                <img src="http://localhost/images/button3.png" width="62" height="18" alt="button3" />
            </a> </li>

        <li> <a href="http://localhost/index.php?page=button4">
                <img src="http://localhost/images/button4.png" width="41" height="18" alt="button4" />
            </a> </li>

        <li> <a href="http://localhost/index.php?page=button5">
                <img src="http://localhost/images/button5.png" width="73" height="18" alt="button5" />  
            </a> </li>
    </ul>
    </div>

</div>

</body>
</html> 
```

的CSS：

```
.logo
{
    padding:60px 20px 50px 20px;
}

body
{
    background-color:#282828;
    color:#FFFFFF;
    font-family: Arial, Helvetica, sans-serif;
}

body a, img{  border-style:none; color:#9de629; text-decoration:none;}
body a:visited {color:#9de629;}
body a:hover{ color:#FFFFFF; text-decoration:underline;}

.wrap_overall
{
    position:relative;
    width: 1020px;  
    margin:0px auto;
}

.header
{
    width:216px;
    height:148px;
    margin:0px 0px;
    padding:0px 0px;
    background-color:#252525;
    float:left;
    display:inline;
}

.headerbg
{
    margin:0px 0px 0px;
    padding:0px 0px;
    width:1020px;
    height:148px;
    background-color:#c7c7c7;

}

.nav_main/*holds the buttons*/
{

    margin:0px 0px 1px 0px;
    padding:0px 0px 0px 0px;
    position:absolute;
    top:148px;
    left:363px;
    z-index:2;
    overflow: hidden;
}

.nav_main ul 
{
    margin:0px 0px 0px 0px;
    padding:0px 0px 0px 0px;
    overflow: hidden;
}

.nav_main ul li
{
    margin:0px 0px 0px 0px;
    display: inline;
    float: left;
}

.nav_main ul li a
{
    outline: none;
    border:none;
    margin:0px 0px 0px 0px;
    margin-right:-10px;
    height:54px;
    width:125px;
    color:#FFFFFF;
    background-image:url(../images/button.png);
    text-align:center;
    display:table-cell;
    vertical-align:middle;

}

.nav_main ul li a:hover  
{
    background-image:url(../images/buttonlight.png);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:07:28.293

你的问题是定位和范围。您的 nav_main 内容应在其容器的范围内。目前您正试图独立定位许多不同的元素，但让它们看起来“附加”，这基本上是不可能的。

我给你举个例子：

```
<div id="header">
<div id="nav-bar">
    <ul>
        <li>Button 1</li>
        <li>Button 2</li>
        <li>Button 3</li>
    </ul>
</div>
</div> 
```

这是更适合您的标题区域的布局。示例 CSS 可能遵循以下逻辑：

```
#header { background-color: grey; width: 40% height: 200px; position: relative; top: 0;     right: 0; }   // top and right values depend on wrapper container
#nav-bar { background-color: darkgrey; width: 100%; height: 40px; position: relative; bottom: 0; left: 0; }
#nav-bar ul { position: absolute; bottom: 0; right: 0; }

/* Style your #nav-bar ul li stuff here */ 
```

语义课程编辑：尽量避免使用内联样式:)

## 澄清

在 IE8 及以下版本中，元素的定位与优秀浏览器的标准是不相上下的，所以你的东西都没有正确的范围和使用绝对定位，你一定会遇到这些问题。

# javascript - 加载的内容破坏了子菜单切换

> ID：13130473
> 
> 赞同：0
> 
> 时间：2012-10-29T22:17:26.003
> 
> 标签：javascript, jquery, html, ajax

我正在开发一个在标题上有一个菜单和一个子菜单的网站。

我正在以这种方式加载 html 标题（此脚本位于 html 文件的底部）：

```
 <script type="text/javascript">
        $('#header').load('includes/header.html', function(){
        });
    </script> 
```

问题是，当我以这种方式加载标头时，此脚本（如果我在同一 html 上有标头，则该脚本有效）停止工作（此脚本位于 main.js 文件中）：

```
 function mainmenu(){
    // hide submenu
    $(" ul#mainnav ul ").css({display: "none"});
    // Defino que submenus deben estar visibles cuando se pasa el mouse por encima
    $(" ul#mainnav li").hover(function(){
        $(this).find('ul:first:hidden').css({visibility: "visible",display: "none"}).slideDown(400);
        },function(){
            $(this).find('ul:first').slideUp(400);
        });
    }
    $(document).ready(function(){
        mainmenu();
    }); 
```

为什么它在加载的 html 文件上停止工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:24:41.673

您可能希望使用`on`它来确保元素“始终”具有绑定到它们的事件。例如，我认为你需要这样的东西：

```
function mainmenu() {
    $("#header").on({"mouseenter": function () {
        $(this).find('ul:first:hidden').css({visibility: "visible",display: "none"}).slideDown(400);
    }, "mouseleave": function () {
        $(this).find('ul:first').slideUp(400);
    }}, "ul#mainnav li");
}

$(document).ready(function(){
    mainmenu();
}); 
```

# php - 从 mysql 查询中获取 1 个字符串

> ID：13130475
> 
> 赞同：0
> 
> 时间：2012-10-29T22:17:32.827
> 
> 标签：php, mysql

众所周知，我们必须对 mysql 查询使用类似 mysql_fetch_assoc 的东西来获取关联数组，然后使用 $row['foo'] 和 $row['bar'] 来获取每个值。

如果我们想从单行返回单列，有没有办法优化查询以获得简单的字符串，这样结果将是一个简单的 var 而不是关联数组？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:23:20.923

使用[`mysql_result`](http://php.net/mysql_result)功能

```
$res = mysql_query(..);
$str = mysql_result($res, 0, 0); 
```

这里`$str`包含第一行的第一列。

还要记住，这`mysql_result`会将内部结果指针移动到下一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:20:32.590

注意 mysql_ 扩展名已弃用，您应该使用 mysqli 扩展名或 PDO

```
$res = mysql_query($sql) or die(mysql_error());

list($val) = mysql_fetch_row($res); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T22:21:39.860

简短的回答：不。

`SELECT my_column...`长答案：不，但您可以通过仅返回您正在查找的行（ then `$row['my_column']`）来稍微优化查询。除此之外，如果你使用 MySQL，你必须把它混为一谈。

# mongodb - MongoDB 手册参考，它是如何完成的，示例代码

> ID：13130485
> 
> 赞同：1
> 
> 时间：2012-10-29T22:18:52.780
> 
> 标签：mongodb, nosql

有人可以向我解释如何在 MongoDB 中完成引用，[这里](http://docs.mongodb.org/manual/applications/database-references/#manual-references)的示例并没有真正帮助。我想要实现的是一个选项来告诉我的查询获取一个文档，以及另一个文档中的数据。

这是使用完成的`Manual References`，我需要一个示例/示例代码来演示它是如何完成的。假设我有用户和项目表。一个项目属于一个特定的用户。我想将用户的详细信息与特定项目的查询返回的每个文档一起获取。所以我可能会得到项目 1 - 20，但我也想要用户的详细信息，而不是在之后进行更多查询来查询用户的数据。

我读过不推荐使用 dbReference。此外，如果可以的话，我很高兴知道如何使用使用官方 MongoDB C# Driver for .NET 来利用手动引用的那种查询类型。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:24:45.383

你写了

> 我想将用户的详细信息与特定项目的查询返回的每个文档一起获取。

这不像 SQL。你不会一起拿东西。

所有手动参考意味着您将进行两个单独的查询。一个获取初始文档，另一个通过第一个文档中的参考 ID 获取相关文档。

在两个不同的查询中执行此操作似乎需要更多工作，但实际上它非常有效。

# java - JTextArea 中的行

> ID：13130486
> 
> 赞同：3
> 
> 时间：2012-10-29T22:18:54.667
> 
> 标签：java, swing, row, jtextarea

是否有一种可靠的方法来计算字符串在 JTextArea 中如何划分为行？

我有一个固定宽度的 JTextArea，当它被填充时，会添加一个新行并垂直扩展。

现在，我需要确切地知道哪些字符在哪一行。我可以使用字体度量将单个字符宽度相加，但我不知道这是否可靠，或者是否有更好的方法。

字体度量是“诡计”的唯一方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T22:25:21.737

所有[JTextComponent](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html)都有`modelToView(...)`和`viewToModel(...)`可以提供帮助的方法，但可能更好的是[javax.swing.text.Utilities](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Utilities.html)类中的方法，包括`getRowStart(...)`和`getRowEnd(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:05:11.063

modelToView 可能对 OP 没有帮助，因为它从像素坐标开始。getRowStart 只是间接有用，因为它从偏移量而不是行索引开始，并返回一个偏移量。这里最有用的函数是 JTextArea.getLineStartOffset(lineNumber)，它返回特定行开头的偏移量，反之，JTextArea.getLineOfOffset(offset)。（希望当我今天早些时候偶然发现此页面时遇到类似问题时，这个答案就在这里:-)）

# c# - 消毒 Chrome JSON 书签

> ID：13130492
> 
> 赞同：1
> 
> 时间：2012-10-29T22:19:31.280
> 
> 标签：c#, json, google-chrome, json.net

我正在尝试以编程方式将书签添加到 Chrome 的书签文件中。它以 JSON 格式存储，我正在使用 JSON.Net 对其进行去序列化。[如果有帮助，这](http://pastebin.com/N6aBaqf2)是我用来对其进行消毒的代码。阅读每个书签后，它都会存储在我的 Bookmark 类中。

```
public class Bookmark
{
    public string url { get; set; }
    public string title { get; set; }
    public string browser { get; set; }
    public DateTime added { get; set; }
    public string fullPath { get; set; }
    public object currentPath { get; set; }
    public Bookmark(string url, string title, string browser, DateTime added, string fullPath, object currentPath = null)
    {
        this.url = url;
        this.title = title;
        this.browser = browser;
        this.added = added;
        this.fullPath = fullPath;
        this.currentPath = currentPath;
    } 
```

现在，当我尝试对书签进行消毒并将它们存储在 Chrome 的书签文件中时，问题就来了。当我尝试对此进行消毒时，我遇到了列表问题，因为在我的课堂上，每个文件夹只能有一个 URL 或文件夹作为子文件夹，但是，我不确定你是如何实现的。我还相信，为了使其正常工作，您必须有某种方法检查当前文件夹并查看它是否与上一个文件夹相同，而且我不确定这可能如何工作。

这是预期的输出：

```
"children": [ {
    "children": [ {
       "children": [ {
          "date_added": "12995911618983970",
          "id": "8",
          "name": "NestedNestedURL",
          "type": "url",
          "url": "http://url.com/"
       } ],
       "date_added": "12995911579845538",
       "date_modified": "12995911618983970",
       "id": "5",
       "name": "NestedNestedFolder",
       "type": "folder"
    }, {
       "date_added": "12995911609609970",
       "id": "7",
       "name": "NestedURL",
       "type": "url",
       "url": "http://url.com/"
    } ],
    "date_added": "12995911570603538",
    "date_modified": "12995911609609970",
    "id": "4",
    "name": "NestedFolder",
    "type": "folder"
 }, {
    "children": [ {
       "date_added": "12995911631570970",
       "id": "9",
       "name": "NestedURL2",
       "type": "url",
       "url": "http://url.com/"
    } ],
    "date_added": "12995911589790970",
    "date_modified": "12995911631570970",
    "id": "6",
    "name": "NestedFolder2",
    "type": "folder"
 } 
```

这是我使用当前代码收到的错误输出：

```
"children": [
  {
    "children": {
      "date_added": 12995893609609970,
      "id": 0,
      "name": "NestedURL",
      "type": "url",
      "url": "http://url.com/"
    },
    "date_added": 12995893609609970,
    "date_modified": 0,
    "id": 0,
    "name": "NestedFolder",
    "type": "folder"
  },
  {
    "children": {
      "date_added": 12995893618983970,
      "id": 1,
      "name": "NestedNestedURL",
      "type": "url",
      "url": "http://url.com/"
    },
    "date_added": 12995893618983970,
    "date_modified": 0,
    "id": 1,
    "name": "NestedFolder",
    "type": "folder"
  },
  {
    "children": {
      "date_added": 12995893631570970,
      "id": 2,
      "name": "NestedURL2",
      "type": "url",
      "url": "http://url.com/"
    },
    "date_added": 12995893631570970,
    "date_modified": 0,
    "id": 2,
    "name": "NestedFolder2",
    "type": "folder"
  } 
```

我正在使用此代码：所有类都用于 JSON 灭菌。就像我说的，我相信我的 Folder 类必须改变一些东西。

```
public void Sync()
{
    Browser browser = new Chrome();
    SortableBindingList<Bookmark> marks = browser.ReturnBookmarks();
    SortableBindingList<object> newmarks = new SortableBindingList<object>();
    int count = 0;
   newmarks.Add(new json_top());
    json_top top = newmarks[0] as json_top;

    top.roots = new json_root();
    List<object> roots = new List<object>();

    Folder bookmarks_bar = new Folder();
    Folder other = new Folder();
    List<Object> barlist = new List<Object>();
    List<object> otherlist = new List<object>();
    List<object> children = new List<object>();
    List<string> existingFolders = new List<string>();

    bookmarks_bar.date_added = ToChromeTime(marks[0].added);
    bookmarks_bar.name = "Bookmarks bar";
    other.date_added = ToChromeTime(marks[0].added);
    other.name = "Other bookmarks";

    bool isBookmarkBar = true;

    Folder folder = new Folder();
    foreach (Bookmark mark in ordered)
    {
        List<string> fullpathlist = mark.fullPath.Split('\\').ToList();
        int count1 = 0;
        if (currentPath != mark.fullPath)
        {
            folder = (createFolder(fullpathlist, fullpathlist[0], mark));
            folder.children = (setChild(fullpathlist, folder, mark, 1));
            count++;
        }
        json_URL u = new json_URL();
        u.date_added = ToChromeTime(mark.added);
        u.id = id;
        u.name = mark.title;
        u.url = mark.url;
        folder.children=(u);
        if(isBookmarkBar)
            barlist.Add(folder);
        else
        {
            otherlist.Add(folder);
        }
    }
    bookmarks_bar.children = barlist;
    other.children = otherlist;
    top.roots.bookmark_bar = (bookmarks_bar);
    top.roots.other = other;
    string json = JsonConvert.SerializeObject(newmarks, Formatting.Indented);
    File.WriteAllText(@"c:\person.json", json);
}

    Folder setChild(List<string> fullPathList, Folder parent, Bookmark mark, int count )
    {
        if (count < fullPathList.Count)
        {
            Folder child = new Folder();
            child.date_added = ToChromeTime(mark.added);
            child.id = id;
            child.name = fullPathList[count];
            Folder LIST = setChild(fullPathList, child, mark, count + 1);
            child.children= LIST;
            return child;
        }            
    }

        class json_root
        {
            public Folder bookmark_bar { get; set; }
            public Folder other { get; set; }
        }

        class json_top
        {
           public string checksum { get { return ""; } }
           public json_root roots { get; set; }
            public int version { get { return 1; } }
        }

        class json_URL : folderAndURL
        {
            public long date_added { get; set; }
            public int id { get; set; }
            public string name { get; set; }
            public string type { get { return "url"; } }
            public string url { get; set; }
        }

    public class Folder
    {
        public object children { get; set; }
        public long date_added { get; set; }
        public long date_modified
        {
            get { return 0; }
        }
        public int id { get; set; }
        public string name { get; set; }
        public string type
        {
            get { return "folder"; }
        }
    } 
```

我需要帮助以使我的输出与我的输入相匹配，以便 Chrome 可以正确读取书签文件。

谢谢！

# javascript - 在 JavaScript 中加载期间是否可以访问文件的一部分？

> ID：13130496
> 
> 赞同：2
> 
> 时间：2012-10-29T22:19:42.873
> 
> 标签：javascript, ajax, csv

假设我有一个 10mb 的 CSV 文件，我想使用 AJAX（或其他）加载到 JavaScript 应用程序中。是否可以在加载期间从中读取？

因此，如果加载了 50%，是否可以访问文件的前 50%？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:39:02.980

我应该是可能的，因为文件一次读取一行，你只需要创建一个函数来遍历已经读取的行并显示信息。

# ios - STAssertEqualObjects 无法在 Xcode 中使用 OCUnit 与 NSString 一起使用

> ID：13130498
> 
> 赞同：0
> 
> 时间：2012-10-29T22:19:59.923
> 
> 标签：ios, xcode, unit-testing, ocunit

无法弄清楚这里发生了什么。. .

我有一个简单的单元测试，旨在测试解析器。测试用例如下所示：

```
[parser didStartElement:@"mobileresponse" attributes:[NSDictionary dictionaryWithObject:@"http://www.espn.com/" forKey:@"rooturl"]];
[parser didStartElement:@"content" attributes:[NSDictionary dictionaryWithObject:@"/soccer" forKey:@"mobileFriendlyUrl"]];
NSString *mobileFriendlyURL = [parser valueForKey:@"mobile_friendly_url"];
STAssertEqualObjects(@"http://www.espn.com/soccer", mobileFriendlyURL, @"url path should be appended to root url"); 
```

现在每次都失败，但这是输出

```
'http://www.espn.com/soccer' should be equal to 'http://www.espn.com/soccer' url path should be appended to root url 
```

我要疯了还是完全一样？有谁知道为什么这会引发错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:35:01.693

只需将 nsstring 声明更改为

```
[NSString stringWithFormat:@"%@",[parser valueForKey:@"mobile_friendly_url"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:37:22.847

那么最有可能的原因是它`[parser valueForKey:@"mobile_friendly_url"]`不返回一个`NSString`.

考虑这个例子（错误是为了说明问题）：

```
NSString *mobileFriendlyURL = [NSURL URLWithString:@"http://www.espn.com/soccer"];
STAssertEqualObjects(@"http://www.espn.com/soccer", mobileFriendlyURL, @""); 
```

这将失败并显示与您相同的消息，因为您比较了 2 个不同的对象（即使您**假设**这`mobileFriendlyURL`是 an`NSString`并将其类型声明为`NSString`）。最后，该消息仅打印当然与您的字符串相同的`description`of the `NSURL`，从而使您更加困惑:)

测试该理论的一种快速方法是执行以下操作：

```
NSString *mobileFriendlyURL = [[NSURL URLWithString:@"http://www.espn.com/soccer"] description];
STAssertEqualObjects(@"http://www.espn.com/soccer", mobileFriendlyURL, @""); 
```

或者甚至更好地执行类似的操作以查询类：

```
NSLog(@"%@", [mobileFriendlyURL class]); 
```

我希望这是有道理的......

# python - 多线程，我可以在 Python 中接受多个客户端

> ID：13130502
> 
> 赞同：1
> 
> 时间：2012-10-29T22:20:38.800
> 
> 标签：python, multithreading, client-side-validation

我希望编写一个可以在 Python 中处理多个客户端的服务器，到目前为止，我能够处理一个连接（来自客户端），但我真的不知道如何扩展我的程序来处理多个客户端。我试着看 Twisted，但无法真正理解它。

有什么建议或示例代码可以帮助我了解如何处理多个客户端？理想情况下，我应该能够将多个客户端连接到服务器，并且基于它们连接后传递的输入，我应该能够通过解析它们的输入等来做各种有趣的事情。

我真的很期待您的回复，并提前感谢您的时间。我是一个很长时间的潜伏者。

PS 我已经查看了大多数其他 Python 多线程示例，但它们并没有真正提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:35:56.877

将 SocketServer 与 ThreadingMixIn 一起使用，以便在单独的线程上处理每个客户端连接。

这是您的起点。

```
import SocketServer

PORT = 5000

class Server(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
    daemon_threads = True

class Handler(SocketServer.BaseRequestHandler):
    def handle(self):
        # TODO: handle this client
        # this sample acts as an echo server
        while True:
            data = self.request.recv(1024)
            if not data:
                break
            self.request.sendall(data)

if __name__ == '__main__':
    server = Server(('', PORT), Handler)
    server.serve_forever() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:35:00.400

你可以看看 python 模块[SocketServer](http://docs.python.org/2/library/socketserver.html)。

如果您使用 Google 搜索网络编程（尤其是 Python 网络编程）和客户端服务器编程，您会发现很多有用的资源可以解释事物。我推荐[Beej 的网络编程指南](http://beej.us/guide/bgnet/)

另外，我建议您远离异步网络编程，直到您掌握了基础知识。

# sony - SmartWatch and Smart Wireless Headset Pro app on the market

> ID：13130508
> 
> 赞同：0
> 
> 时间：2012-10-29T22:21:59.257
> 
> 标签：sony, headset, sony-smartwatch

I extended my SmartWatch app to work also on the Smart Wireless Headset Pro.

In the developer documentation I read that the SmartWatch apps on Google Play should have a description that ends with: LiveWare™ extension for SmartWatch, while the Smart Wireless Headset Pro apps should have description that ends with: LiveWare™ extension for Smart Wireless Headset pro.

Since my description has only one ending, how should I properly mark my app to be discovered both as an extension for the SmartWatch and the Smart Wireless Headset Pro?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:05:47.830

您需要将这两个字符串都添加到您的描述中，例如在[Facebook 扩展](https://play.google.com/store/apps/details?id=com.sonyericsson.extras.liveware.extension.facebook)示例中。

# sql-server - SQL Server Management Studio (SSMS) 2012: Unusually high memory usage (leaking?)

> ID：13130509
> 
> 赞同：7
> 
> 时间：2012-10-29T22:22:06.230
> 
> 标签：sql-server, ssms

![Task Manager](../Images/b2c0e1fab5be1294cad865ba0c464bdd.png)

1.3GB memory usage. I'm running Windows 7 Ultimate 64-bit. I don't do much - just editing a stored proc (no query running in the background, nor any query result).

I do notice though, it only happens occasionally - as if some kind of a garbage collection is kicking in then it'll return to its normal (around 100MB).

Any ideas / workaround / updates ?

*   Just an update on this: it seems it doesn't happen anymore in SSMS 2014

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T01:20:17.010

似乎如果您关闭 IntelliSense，内存消耗会显着下降，并且软件会变得更加灵敏。要关闭它，请转到*Tools -> Options -> Text Editor -> Transact-SQL -> IntelliSense*，然后取消选中该框。保存您的工作并重新启动 SSMS。

主要缺点是您将失去 IntelliSense 和代码大纲。很糟糕，但至少你可以让 SSMS 保持打开几天而不会出现问题。

希望这可以帮助。干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-01T02:18:54.740

这是几个版本的 SSMS 在存储过程编辑上的一个问题。

在 SSMS 17 中为我解决的问题是将智能感知“最大脚本大小”从 1M 增加到 5M。无限也可以。找到选项：`Tools : Options : Text Editor : Transact-SQL : IntelliSense : Maximum script size`。我不确定此设置是否存在于较低版本的 SSMS 中，如果存在，请添加评论。

这将高 CPU 和内存泄漏（2.5G 到 140M）降低到正常水平。

[参考 msdn 链接](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/81a82fea-42c3-4d7e-9e2d-a2cf45f9c4d7/ssms-causes-high-cpu-utilization?forum=sqlkjappmsmgmt&prof=required)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T18:19:05.217

我在设计存储过程时遇到了这个问题。在处理一些动态 SQL 代码时，进程会跑掉，应用程序会变得无响应。一旦我关闭 Intellisense，这种行为就消失了。

# android - Android root access

> ID：13130511
> 
> 赞同：1
> 
> 时间：2012-10-29T22:22:20.020
> 
> 标签：android, root

I have a Google Nexus 7, and I've been developing on it. Only recently, however, have I become unable to access the /data/ directory using the file browser in eclipse. The device was never rooted, but now since I upgraded it, I believe that I have lost access to this. Is there any way to get eclipse to use the "run-as" command to access my app's data directory? How come I have suddenly lost access to this?

Is the only option left to root the device?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:28:37.223

> 有什么方法可以让 eclipse 使用“run-as”命令访问我的应用程序的数据目录？

AFAIK，您没有什么可以“以”方式运行，这对您有帮助。

> 我怎么突然失去了访问权限？

首先，您不应该访问它。如果你这样做了，那是设备中的一个安全漏洞，也许可以通过固件升级来修复。

> 唯一的选择是根设备吗？

您无法浏览`/data/`生产硬件上的目录。例如，您可以`/data/`在模拟器上浏览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T09:11:15.000

我可以通过安装 apk 来授予 root 权限。 [http://gadgets.ndtv.com/mobiles/features/how-to-root-nokia-x-and-get-access-to-google-play-store-and-google-now-508391](http://gadgets.ndtv.com/mobiles/features/how-to-root-nokia-x-and-get-access-to-google-play-store-and-google-now-508391)

# c# - Differentiating - folder that is being copied into and a normal folder

> ID：13130512
> 
> 赞同：0
> 
> 时间：2012-10-29T22:22:27.850
> 
> 标签：c#, powershell

Is there a mechanism by which I can scan for a new folder in a particular location - and determine if the new folder is fully created or if files are still being copied into it.

Essentially, is there a folder property that indicates if its contents have been fully copied into it or the copying is currently going on?

One mechanism I thought was to monitor the folder size in fixed time intervals and if it changes it means that the copying is going on - however this method might not be foolproof.

EDIT: To be more specific, I just want to know if there is a flag or lock that is set to a folder that indicates if its contents are being copied into it at that instant.

# iphone - ipad2 framebuffer initialized to retina size

> ID：13130514
> 
> 赞同：1
> 
> 时间：2012-10-29T22:22:40.190
> 
> 标签：iphone, ios, ipad, opengl-es, framebuffer

I'm using a iPhone/ipad app with an empty view set to use my EAGLView class. I initialize the framebuffer with:

```
self.contentScaleFactor = [[UIScreen mainScreen] scale];
self.layer.contentsScale = [[UIScreen mainScreen] scale]; //this is 1.0
glGenFramebuffersOES(1, &defaultFramebuffer);
    glBindFramebufferOES(GL_FRAMEBUFFER_OES, defaultFramebuffer);
    glGenRenderbuffersOES(1, &colorRenderbuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, colorRenderbuffer);
    [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(CAEAGLLayer*)self.layer];

    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &framebufferWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &framebufferHeight); 
```

after that, framebufferWidth is 1568 and framebufferHeight is 1216. My device is reported by [[UIDevice currentDevice] model] as @"ipad", iOS 4.3.5\. Xcode 4.5.1, SDK 6, deployment target 4.3.

Anyone has any idea why I got this sizes and not the 1024x768 ?

Thanks.

Later Edit: same code worked perfectly with Xcode 3.x and SDK 4.3, with deployment target 4.0.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:30:02.953

我发现的一种解决方案是在我的 EAGLView 对象的 layoutSubviews 中放置一些代码：

```
- (void)layoutSubviews 
```

{ // 帧缓冲区将在下一次 setFramebuffer 方法调用开始时重新创建。[自我删除帧缓冲区]；

```
CGRect  rect = [[UIScreen mainScreen] bounds];
self.layer.frame = rect;
self.frame = rect; 
```

}

现在它可以正常工作了，但我在调用时仍然收到一个 openGL 错误 1282：

```
glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_RGBA8_OES, framebufferWidth, framebufferHeight); 
```

我仍在调查这个错误，有什么想法吗？谢谢，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:40:16.953

1568x1216 必须是您的大小`EAGLView`——您是从 NIB 加载它还是以编程方式创建它。假设是前者，它的尺寸是多少，你的弹簧和支柱是如何设置的？我敢打赌，如果您记录视图的框架，您会看到这些数字。

在 iOS 5 或更高版本下，您可能应该只使用`GLKView`而不是自己滚动；4.3 部署对您来说还那么重要吗？

# internet-explorer - How can I get gradients working in IE9?

> ID：13130517
> 
> 赞同：0
> 
> 时间：2012-10-29T22:22:54.990
> 
> 标签：internet-explorer, css

CSS:

```
.silver {
color: #636363;
border: solid 1px #9C9C9C;
background: #D6D6D6;

/*important part*/
background: -webkit-gradient(linear, left top, left bottom, from(#E8E8E8), to(#BABABA));
background: -moz-linear-gradient(top,  #E8E8E8,  #BABABA);
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#e8e8e8', endColorstr='#bababa')";
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#e8e8e8', endColorstr='#bababa');

padding: 2px 5px 2px 5px;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
margin-right: 5px;
font-size: 95%;
} 
```

This works when I apply to class to a input / submit button, but the gradients do not display when I apply the class to a span or div. How can I get gradients working in IE9?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:56:22.900

IE9发布之时，本应预示着IE的新曙光；一个版本支持所有其他人多年来一直支持的所有新的闪亮浏览器功能。

好消息是，它在很大程度上取得了成功。

坏消息是他们在 CSS 渐变方面丢了球。IE9 不支持它们。但也不支持旧的 IE6/7/8 hack 以通过该`filter`属性获得渐变。

有一个解决方案。您可以将 SVG 图像渲染到背景中，这意味着您可以简单地创建一个带有渐变的 SVG 并进行排序。但是等等，事情没有那么简单；如果您`filter`有支持 IE8 和朋友的属性，那么您实际上需要摆脱它以使 SVG 技巧与 IE9 一起使用。

在这一点上，一切都变得有点复杂。您需要有条件的注释、针对不同 IE 版本的单独样式表或其他一些解决问题的方法。

或者你可以使用[CSS3Pie](http://css3pie.com/)。这是一个小的 Javascript 实用程序，它为各种版本的 IE 添加了对许多 CSS 功能的支持。这些功能之一是 CSS 背景渐变。

使用 CSS3Pie，您可以简单地使用标准 CSS`background`属性，并且渐变在所有 IE 版本中都可以正常工作，就像在其他浏览器中一样。

它适用于从 6 到 9 的所有 IE 版本，因此除了不必弄乱我之前描述的 SVG hack 之外，您还可以放弃那种凌乱的`filter`风格。这是一场全面的胜利。我建议将其作为您的解决方案。

但是，如果你决定你宁愿用 IE9 的 SVG 渐变来做这件事，这里有一个链接可以为你生成 CSS 代码：http: [//www.colorzilla.com/gradient-editor /](http://www.colorzilla.com/gradient-editor/)勾选“支持 IE9”复选框以查看您需要的代码，但还要注意同时出现的警告文本和进一步说明。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:25:48.397

这不正确的html：

```
<input type='submit' class='silver'>buttons</input> 
```

输入标签是一个自闭合标签`<input />`，所以里面不能有数据。

```
<input type='submit' class='silver' value="buttons" /> 
```

或者您可以为此目的使用按钮标签

```
<button class='silver'>buttons</button> 
```

# wordpress - Custom panel in Wordpress after login

> ID：13130521
> 
> 赞同：1
> 
> 时间：2012-10-29T22:23:23.900
> 
> 标签：wordpress

I have a table in my MySQL records with users of my site. Now I want to integrate this table with a Wordpress blog, allowing users to login and be directed to a custom panel.

Can anyone help me?

# javascript - JavaScript - Reposition a DIV incrementally onClick

> ID：13130522
> 
> 赞同：0
> 
> 时间：2012-10-29T22:23:29.627
> 
> 标签：javascript, css, onclick, scroll

Very simple code, very simple problem. When a link is pressed, it moves a div either up or down. However, I cannot get it to move incrementally. I know this is a simple syntax error, but google isn't revealing the error of my ways. Anyone willing to enlighten me?

`<a class="galsel" onclick="document.getElementById('innerscroll').style.bottom -='167px';">&laquo;</a>`

`<a class="galsel" onclick="document.getElementById('innerscroll').style.bottom +='167px';">&raquo;</a>`

I already have it so that the div tiles itself vertically, so I'm not worried about it going "too high" or "too low"

Here's what it looks like right now: drainteractive.com/FBD/projects.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:33:36.460

您必须从包含的字符串中解析值`px`

```
// Increase by 167
document.getElementById('innerscroll').style.bottom = (parseInt(document.getElementById('innerscroll').style.bottom, 10) + 167) + ' px'

// Decrease by 167
document.getElementById('innerscroll').style.bottom = (parseInt(document.getElementById('innerscroll').style.bottom, 10) - 167) + ' px'

// Abstracted
function addToBottom(el, amount) {
   // You probably add lower and upper bound check conditions
   el.style.bottom = (parseInt(el.style.bottom) + amount) + ' px';
}

var el = document.getElementById('innerscroll');
addToBottom(el, 167);
addToBottom(el, -167); 
```

还要确保它适用于最初未设置底部的情况

```
var currentBottom = parseInt(document.getElementById('innerscroll').style.bottom) || 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:28:36.540

`+='167px'`将连接它，它会变成`'167px167px167px167px167px'`. 不确定会产生什么结果`-='167px'`，但可能会导致错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:35:21.753

您需要从字符串中撕下“px”，将其转换（？）为 int，然后从中减去。

```
onclick="var mElem = document.getElementById('innerScroll'); mCur = parseInt(mElem.style.bottom.replace('px', 0)); mElem.style.bottom = (mCur-167)+'px'" 
```

自然，这都应该放在一个单独的函数中，然后在 onclick 中调用该函数，而不是上面的怪物。

```
function moveUp()
{
var mElem = document.getElementById('innerScroll'); 
var mCur = parseInt(mElem.style.bottom.replace('px', 0)); 
mElem.style.bottom = (mCur-167)+'px';
} 
```

...

```
<strike>onlick="moveUp()"</strike>
onclick="moveUp()" 
```

我的心一定在别的地方。。

# version-control - VCS and Python project structure: How to setup the PYTHONPATH automatically?

> ID：13130523
> 
> 赞同：5
> 
> 时间：2012-10-29T22:23:29.940
> 
> 标签：version-control, pythonpath, project-structure

There are many suggestions on the web what the structure of the Python project can/shall be, e.g. [What is the best project structure for a Python application?](https://stackoverflow.com/questions/193161/what-is-the-best-project-structure-for-a-python-application).

```
"proj-dir"
+- doc
+- apidoc
+- scripts
+- "src-dir"
+- tests 
```

It seems that many people in the Python world prefer the "src-dir" and "proj-dir" to be equal (or very similar). However, the scripts and tests will surely have to import some modules from src-dir, so either I have to

*   run all scripts and tests when proj-dir as my current working dir, or
*   the PYTHONPATH must contain the proj-dir, right?

Or, is there any other possibility which I overlook now?

Suppose I have such structure and have set up the PYTHONPATH correctly. Now I commit the project into VCS and another developer checks the project out. On his machine the PYTHONPATH will not be set properly and the imports in scripts and in tests will not work.

1.  Is there any possibility to somehow make the PYTHONPATH definition part of the project, so that it can be part of the version control?
2.  Is there a different project structure that would allow me to make checkout and start using the project without modifying the PYTHONPATH?
3.  Is to solution suggested here: [Python - How to PYTHONPATH with a complex directory structure?](https://stackoverflow.com/questions/3249006/python-how-to-pythonpath-with-a-complex-directory-structure) (i.e. to include a short sys.path modifying snippet in every script and test) the right one?
4.  Would a site module [http://docs.python.org/2/library/site.html](http://docs.python.org/2/library/site.html) be of any help?
5.  What is your workflow when developing a project with a similar structure?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T19:22:44.963

即使项目结构复杂且测试用例在不同的包中使用 src，您也可以在 Windows 的环境变量中添加 PYTHONPATH

我的电脑 --> 属性 --> 系统属性 --> 高级选项卡 --> 环境变量。添加新的系统变量 PYTHONPATH 并将您的项目目录附加到带有分隔符“;”的该变量

我建议您将 readme.txt 保留到您的项目中，其中清楚地说明了如何添加 PYTHONPATH 以运行脚本。类似于添加android-sdk的PATH使adb shell工作，添加Java路径使Java在命令提示符下工作

因此，readme.txt 有助于在不同的机器上下载时运行脚本，只需进行一次更改（添加 PYTHONPATH 变量，值 = 项目路径）

无需添加 src 的所有模块即可使使用 src 的测试用例正常工作

这是一个示例项目结构：

```
SAMPLEPROJECT
    src
      com
        sample
          example
            utils
              a.py
              b.py

    testcases
      test1.py
      test2.py

    res
    docs 
```

如果 test1.py 测试用例使用 a.py 和 b.py：不要将 utils 模块添加到 PYTHONPATH，因为您已经将项目路径添加到 python 路径，因此您的导入语句在 test1.py 中看起来像这样

```
from src.com.sample.example.utils import a.py
from src.com.sample.example.utils import b.py 
```

# sql - SQL Query get data from one table, and get data from only one row from another table

> ID：13130524
> 
> 赞同：4
> 
> 时间：2012-10-29T22:23:39.833
> 
> 标签：sql, join, row, max

I don't know how to explain my problem in the title, so I'll explain it better here...

I have two tables

```
CREATE TABLE [dbo].[Ventas]
(
    [IdVenta] [int] IDENTITY(1,1) NOT NULL,
    [FechaVenta] [date] NULL,
    [HoraVenta] [varchar](10) NULL,
    [Subtotal] [money] NULL,
    [Iva] [money] NULL,
    [Total] [money] NULL,
    [Saldo] [money] NULL,
    [Abono] [money] NULL,
    [FormaDePago] [varchar](50) NULL,
    [Plazos] [int] NULL,
    [Estado] [varchar](50) NULL,
)

CREATE TABLE [dbo].[Plazos]
(
    [IdPlazo] [int] IDENTITY(1,1) NOT NULL,
    [IdVenta] [int] NULL,
    [NumeroPlazo] [int] NULL,
    [FechaVencimiento] [date] NULL,
    [FechaCorte] [date] NULL,
    [FechaPenalizacion] [date] NULL,
    [FechaLiquidacion] [date] NULL,
    [Total] [money] NULL,
    [Cargo] [money] NULL,
    [Abono] [money] NULL,
    [Estado] [varchar](50) NULL,
) 
```

now to add some data

```
INSERT [dbo].[Ventas] ([IdVenta], [FechaVenta], [HoraVenta], [Subtotal], [Iva], [Total], [Saldo], [Abono], [FormaDePago], [Plazos], [Estado]) VALUES (182, CAST(0x54360B00 AS Date), N'11:20', 500.0000, 55.0000, 555.0000, 333.0000, 222.0000, N'A Credito', 5, N'Pendiente De Pago')
INSERT [dbo].[Ventas] ([IdVenta], [FechaVenta], [HoraVenta], [Subtotal], [Iva], [Total], [Saldo], [Abono], [FormaDePago], [Plazos], [Estado]) VALUES (183, CAST(0x54360B00 AS Date), N'12:29', 575.0000, 63.2500, 638.2500, 638.2500, 0.0000, N'Una Sola Exhibicion', 1, N'Pendiente De Pago')

INSERT [dbo].[Plazos] ([IdPlazo], [IdVenta], [NumeroPlazo], [FechaVencimiento], [FechaCorte], [FechaPenalizacion], [FechaLiquidacion], [Total], [Cargo], [Abono], [Estado]) VALUES (93, 182, 1, CAST(0x54360B00 AS Date), CAST(0x57360B00 AS Date), CAST(0x5C360B00 AS Date), CAST(0x54360B00 AS Date), 111.0000, 0.0000, 111.0000, N'Liquidado')
INSERT [dbo].[Plazos] ([IdPlazo], [IdVenta], [NumeroPlazo], [FechaVencimiento], [FechaCorte], [FechaPenalizacion], [FechaLiquidacion], [Total], [Cargo], [Abono], [Estado]) VALUES (94, 182, 2, CAST(0x73360B00 AS Date), CAST(0x75360B00 AS Date), CAST(0x7A360B00 AS Date), CAST(0x54360B00 AS Date), 111.0000, 0.0000, 111.0000, N'Liquidado')
INSERT [dbo].[Plazos] ([IdPlazo], [IdVenta], [NumeroPlazo], [FechaVencimiento], [FechaCorte], [FechaPenalizacion], [FechaLiquidacion], [Total], [Cargo], [Abono], [Estado]) VALUES (95, 182, 3, CAST(0x91360B00 AS Date), CAST(0x94360B00 AS Date), CAST(0x99360B00 AS Date), NULL, 111.0000, 111.0000, 0.0000, N'Pendiente')
INSERT [dbo].[Plazos] ([IdPlazo], [IdVenta], [NumeroPlazo], [FechaVencimiento], [FechaCorte], [FechaPenalizacion], [FechaLiquidacion], [Total], [Cargo], [Abono], [Estado]) VALUES (96, 183, 1, CAST(0x54360B00 AS Date), CAST(0x57360B00 AS Date), CAST(0x5C360B00 AS Date), NULL, 639.0000, 639.0000, 0.0000, N'Pendiente') 
```

Foreign Key On Ventas.IdVenta = Plazos.IdVenta

Ok, Here's the deal... I need to use a query that brings data from all sales (Ventas), which only it supposed to be 2 rows...

However, I need data from Plazos, but I only need data from Plazos What I need is to display data from plazos on the same row as Ventas, but only data from the most recent Plazo...

you may notice that for example, in Plazos there is a column called NumeroPlazo which increases on the same IdVenta... what I need in this example is to display:

Ventas IdVenta 182 with data from Plazos IdPlazo 95 (since from Plazos, IdPlazo 95 has the highest number on the column Numero Plazos... and of course IdVenta 183, but since it only has one Plazo, it will display data from that plazo...

At the moment I had this query...

```
SELECT Ventas.*, Plazos.*, 
FROM Ventas INNER JOIN Plazos ON Plazos.IdVenta = Ventas.IdVenta 
WHERE Ventas.Estado = 'Pendiente De Pago' 
ORDER BY Ventas.FechaVenta DESC, Ventas.HoraVenta DESC 
```

but it returns 4 rows (3 rows for Venta where IdVenta = 182, and one where IdVenta = 183) What I want is only 2 rows...

Then I tried this query that worked... but only for one row

```
SELECT Ventas.*, Plazos.*, 
FROM Ventas INNER JOIN Plazos ON Plazos.IdVenta = Ventas.IdVenta 
WHERE Ventas.Estado = 'Pendiente De Pago' 
AND Plazos.NumeroPlazo = (SELECT MAX(Plazos.NumeroPlazo) FROM Plazos WHERE Plazos.IdVenta = 182)
ORDER BY Ventas.FechaVenta DESC, Ventas.HoraVenta DESC 
```

Obviously it only works for one sale since I specify Plazos.IdVenta = 182... My question here is... how can I use the latter query to get the data I want for each sale...

I hope yuo can help me... If you need me to be more specific, please let me know.

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:31:51.933

您可以使用 CROSS APPLY，它允许您对 FROM 列表中的前面表的每一行运行一个子查询。

```
SELECT Ventas.*, Plazos.*
FROM Ventas
cross apply (
    select TOP(1) *
    from Plazos 
    WhERE Plazos.IdVenta = Ventas.IdVenta
    ORDER BY [NumeroPlazo] DESC) Plazos
WHERE Ventas.Estado = 'Pendiente De Pago' 
ORDER BY Ventas.FechaVenta DESC, Ventas.HoraVenta DESC 
```

通过 Row_Number() 执行此操作可能更快，但这里的子查询将要求您为内部级别的所有列设置别名，无论如何这可能不是一个坏主意。

```
SELECT *
FROM
(
    SELECT
        v.[IdVenta], v.[FechaVenta], v.[HoraVenta], v.[Subtotal], v.[Iva], v.[Total], v.[Saldo], v.[Abono], v.[FormaDePago], v.[Plazos], v.[Estado],
        p.[IdPlazo], p.[NumeroPlazo], p.[FechaVencimiento], p.[FechaCorte], p.[FechaPenalizacion], p.[FechaLiquidacion], p.[Total] plazostotal, p.[Cargo], p.[Abono] plazasabono, p.[Estado] plazosestado,
        RowN = ROW_NUMBER() over (partition by v.[IdVenta] order by p.[NumeroPlazo] desc)
    FROM Ventas v
    JOIN Plazos p ON p.IdVenta = v.IdVenta
    WHERE v.Estado = 'Pendiente De Pago'
) X
WHERE RowN = 1
ORDER BY FechaVenta DESC, HoraVenta DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:10:16.520

很简单。在您的第二个问题中，替换 Ventas.IdVenta 上的 182

```
SELECT Ventas.*, Plazos.*
FROM Ventas INNER JOIN Plazos ON Plazos.IdVenta = Ventas.IdVenta 
WHERE Ventas.Estado = 'Pendiente De Pago' 
  AND Plazos.NumeroPlazo = (SELECT MAX(Plazos.NumeroPlazo) FROM Plazos WHERE Plazos.IdVenta = Ventas.IdVenta)
ORDER BY Ventas.FechaVenta DESC, Ventas.HoraVenta DESC 
```

# url - How can i make the parent url automatically update to a unique url when iframe loads particular content?

> ID：13130527
> 
> 赞同：3
> 
> 时间：2012-10-29T22:23:55.167
> 
> 标签：url, iframe, parent, tumblr

Okay, i'm extremely new to this sort of thing, so i am probably using incorrect terminology, but i've been trying to find an answer and can't, so i'm asking here!

I have a website made in Tumblr that opens post content inside an iframe. However, that means my parent url doesn't change according to the iframe content. Is there a way i can cause the parent url to change according to the post inside the iframe? On other sites i have just done this manually but it needs to happen automaically here.

Help! Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:40:54.387

我认为您可以在网站上使用一种技巧来手动修改 URL 栏中的地址，而无需重新加载页面。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)。不幸的是，我不熟悉 Tumblr 内部是如何工作的，所以我不能说你是否真的可以使用它。但这似乎是实现您想要的唯一方法。

# java - android菜单什么都不做

> ID：13130528
> 
> 赞同：1
> 
> 时间：2012-10-29T22:24:02.437
> 
> 标签：java, android, android-intent

我们的目标是 android 2.2+

关于仍然在许多手机上找到的硬件菜单按钮，我正在尝试使用系统内置的机器人。但是我没有运气，也没有错误消息：

**/res/menu/optionsmenu.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menuHelp"
          android:title="Help"
          />
    <item android:id="@+id/menuShowInstallationCode"
          android:title="Show Installation Code"
          />
</menu> 
```

**在活动课上**

```
@Override
public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.optionsmenu, menu);
    return(super.onCreateOptionsMenu(menu));
}

public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()){
        case R.id.menuHelp :
            return true;

        case R.id.menuShowInstallationCode :
            return true;

        default:
            return super.onContextItemSelected(item);
    }
} 
```

到目前为止的结果是，我按下菜单按钮并没有任何反应。真的什么都没有，没有错误信息，没有菜单，什么都没有。

我想要一个菜单​​出现。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:37:34.470

您应该在switch 语句之后返回 true`onCreateOptionsMenu()`并返回。请改为：`super.onOptionsItemSelected(MenuItem item)``onOptionsItemSelected(MenuItem item)`

```
@Override
public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.optionsmenu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()){
        case R.id.menuHelp :
            return true;

        case R.id.menuShowInstallationCode :
            return true;

    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:42:46.443

这是一个完整的代码片段，在 Android 2.2 上测试过。我没有为它创建任何 XML，没有必要。

```
package com.samplemenu;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    static final int MENU_ONE = 0;
    static final int MENU_TWO = 1;    

    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(0, MENU_ONE, 0, "One").setIcon(R.drawable.ic_launcher);
        menu.add(0, MENU_TWO, 0, "Two").setIcon(R.drawable.ic_launcher);
        return true;
    }   

    /* Handles item selections */
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case MENU_ONE: {

        }
        return true;

        case MENU_TWO: {

        }
        return true;

        }
        return false;
    }

} 
```

# configuration - maven-processor-plugin listing the annotation processors to ignore

> ID：13130531
> 
> 赞同：1
> 
> 时间：2012-10-29T22:24:11.127
> 
> 标签：configuration, maven-3, annotation-processing

Is there a way to use the maven-processor-plugin (or any other plug-in) to execute annotation processors listing the ones to skip? I have little control on the processors my dependencies might use but I do know the one I want skipped.

The only option in the [usage page](http://maven-annotation-plugin.googlecode.com/svn/docs/usage.html) is to list the ones you want to include but not the other way around.

Is there a way to do this in Maven?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:38:12.307

这不是 maven 插件的问题，而是`javac`选项的可用性问题。根据[注解处理的javac参考](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#processing)

> 处理器通过搜索路径上名为 META-INF/services/javax.annotation.processing.Processor 的服务提供者配置文件定位。此类文件应包含要使用的任何注释处理器的名称，每行列出一个。或者，可以使用 -processor 选项显式指定处理器。

因此，目前无法删除注释处理器，只需将您要运行的那些列入白名单即可。

# silverlight - Silverlight - 仅单击切换按钮打开下拉列表

> ID：13130537
> 
> 赞同：0
> 
> 时间：2012-10-29T22:24:30.920
> 
> 标签：silverlight

谁能告诉我如何通过仅单击切换按钮来打开弹出窗口。通常，当您单击任意位置时，组合框会打开弹出窗口。在我们的项目中，我们只需要在用户单击切换按钮时打开弹出窗口。有点急

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:05:50.987

一种方法是创建自定义控件。这将使您能够更好地控制构成组合框的所有部分。 [http://blogs.msdn.com/b/sburke/archive/2008/03/22/tutorial-writing-a-templated-silverlight-2-control.aspx](http://blogs.msdn.com/b/sburke/archive/2008/03/22/tutorial-writing-a-templated-silverlight-2-control.aspx)

# java - Java 2D 数组越界错误

> ID：13130538
> 
> 赞同：2
> 
> 时间：2012-10-29T22:24:31.547
> 
> 标签：java, arrays

我正在编写一个处理二维数组的程序，根据周围元素进行计算，然后创建一个新数组。首先，我创建了一个简单的 java 程序来测试不同的情况。我想正确处理元素是否位于数组的边缘，如果是，则设置`"up, down, left, or right"`等于​​该元素。我的测试程序适用于位于顶部、左侧或不在边缘的元素，但不适用于底部或右侧。这是我当前的代码：

```
public class ArrayTest 
{ 
   public static void buildE(int[][] array, int y, int x)
   {
      int up; 
      int down; 
      int left;
      int right; 

      //if element is on the top left
      if (y == 0 && x == 0)
      {
         up = array[y][x];
         down = array[y + 1][x];
         left = array[y][x];
         right = array[y][x + 1];
      }

      //if element is on bottom right
      else if (y == array.length && x == array.length)
      {
         up = array[y - 1][x];
         down = array[y][x];
         left = array[y][x - 1];
         right = array[y][x];
      }

      //if element is on top right
      else if(y == 0 && x == array.length)
      {
         up = array[y][x];
         down = array[y + 1][x];
         left = array[y][x - 1];
         right = array[y][x];
      }

      //if element is on bottom left
      else if (y == array.length && x == 0)
      {
         up = array[y - 1][x];
         down = array[y][x];
         left = array[y][x];
         right = array[y][x + 1];
      }

      //if element is on top 
      else if (y == 0) 
      { 
         up = array[y][x];
         down = array[y + 1][x];
         left = array[y][x - 1];
         right = array[y][x + 1];
      }  

      //if element is on left
      else if (x == 0)
      {
         up = array[y - 1][x];
         down = array[y + 1][x];
         left = array[y][x];
         right = array[y][x + 1];
      }

      //if element is on bottom
      else if(y == array.length)
      {
         up = array[y - 1][x];
         down = array[y][x];
         left = array[y][x - 1];
         right = array[y][x + 1];
      }

      //if element is on right
      else if (x == array.length)
      {
         up = array[y - 1][x];
         down = array[y + 1][x];
         left = array[y][x - 1];
         right = array[y][x];
      }

      //if element is not on an edge 
      else
      {
         up = array[y - 1][x];
         down = array[y + 1][x];
         left = array[y][x - 1];
         right = array[y][x + 1];   
      }

      System.out.println();
      System.out.print("#####################################");
      System.out.println();
      System.out.println("Array Element: " + array[y][x]);
      System.out.println("Up: " + up);
      System.out.println("Down: " + down);
      System.out.println("Left: " + left);
      System.out.println("Right: " + right);
   }

   public static void outputArray(int[][] array)
   {
      for(int row = 0; row < array.length; row ++)
      {
         for (int column = 0; column < array[row].length; column++)
            System.out.printf("%d ", array[row][column]);
         System.out.println();
      }
   }

   public static void main(String[] args)
   {
      int [][] myArray = {{1, 12, 13, 14, 15}, {2, 22, 23, 24, 25},
         {3, 32, 33, 34, 35}, {4, 42, 43, 44, 45}, {5, 52, 53, 54, 55}};
      outputArray(myArray);
      buildE(myArray, 4, 0);
   }
} 
```

此外，如果我设置`y = 4`它不会将其识别为`myArray.length`. 但是，如果我遍历 until ，我认为这在我的实际程序中不会成为问题`array.length`。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:28:05.370

数组索引从 0 开始，如果您的数组长度为 5，则将在第 4 个索引处访问最后一个元素。在你的代码中

```
 else if (y == array.length && x == array.length)
{

    up = array[y - 1][x];//Exception here
    down = array[y][x];
    left = array[y][x - 1];
    right = array[y][x];

} 
```

将其更改为：

```
 else if (y == array.length-1 && x == array.length-1)
    {

        up = array[y - 1][x];
        down = array[y][x];
        left = array[y][x - 1];
        right = array[y][x];

    } 
```

在其他 if 中遵循相同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:31:40.523

当您使用 y = 4 调用该方法并输入

```
// if element is on left
else if (x == 0) {
    up = array[y - 1][x];
    down = array[y + 1][x];
    left = array[y][x];
    right = array[y][x + 1];
} 
```

那么你实际上**就**在底线了。所以你不能“倒下”。在这种情况下，这会导致异常。你可以把它改成

```
// if element is on left and not on bottom line
else if (y < array.length && x == 0) { 
```

# eclipse - 用于比较 zip 文件的 Eclipse 插件

> ID：13130539
> 
> 赞同：2
> 
> 时间：2012-10-29T22:24:33.883
> 
> 标签：eclipse, zip

在我从事的项目中，有时文件会存储在档案中。在 Eclipse 中编辑东西是直接安装[Eclipse Zip Editor Plugin](http://sourceforge.net/projects/zipeditor/)的。但是，我无法使用标准 Team->compare 功能比较 zipfile 中所做的更改。是否有任何技巧可以在 Eclipse 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:17:51.323

Eclipse 具有对 .zip 档案和 .jar 文件的本机比较支持。选择要比较的两个文件，然后右键单击其中一个并选择`Compare With > Each Other`。

# xslt - 覆盖xsl中的变量

> ID：13130542
> 
> 赞同：3
> 
> 时间：2012-10-29T22:24:46.830
> 
> 标签：xslt, overwrite, xsl-variable

我只需要覆盖变量`xsl`

```
Example:
x=0
if x=0
then
x=3 
```

我需要更改变量的值。

我对 xsl 很陌生，请帮助我如何实现这一点。这可能很愚蠢，但我不知道..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:31:18.643

> 我只需要覆盖 xsl 中的变量
> 
> 示例 x=0 如果 x=0 则 x=3

XSLT 是一种函数式语言，除其他外，这意味着变量一旦定义就无法更改。

当然，这个事实并不意味着给定的问题不能使用 XSLT 解决——只是解决方案不包含对变量值的任何修改，一旦定义。

告诉我们您的具体问题是什么，许多人将能够提供 XSLT 解决方案 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T09:11:41.030

正如其他评论所指出的，XSLT 中的变量一旦设置就无法修改。我发现这样做的最简单方法是将变量相互嵌套。

```
<xsl:variable name="initial_condition" select="VALUE"/> 
```

之后

```
<xsl:variable name="modified_condition" select="$initial_condition + MODIFIER"/> 
```

我们的一些 xsl 有大量的嵌套计算，它们确实应该在生成源 XML 的业务逻辑中。由于有一段时间没有开发人员/时间来添加这个业务逻辑，所以它被添加为表示层的一部分。

维护这样的代码变得非常困难，特别是考虑到您可能需要考虑控制流。变量名称最终变得非常复杂，可读性下降。像这样的代码应该是最后的手段，它并不是 XSLT 的真正设计目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T01:09:55.590

`<xsl:variable>`in`xslt`不是实际的变量。这意味着它在定义后无法更改，您可以像这样使用它：

假设我们有这个带有名称的 xml `test.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<client-list>
    <client>
        <name>person1</name>
    </client>
    <client>
        <name>person2</name>
    </client>
    <client>
        <name>person3</name>
    </client>
</client-list> 
```

我们希望将其转换为类似 csv 的（逗号分隔值），但将 替换为`person1`带有 name 的隐藏人员`person4`。然后假设我们有这个带有名称的 xml `test.xsl`，它将用于转换`test.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

    <xsl:variable name="hiddenname">person4</xsl:variable>
<!-- this template is for the root tag client-list of the test.xml -->
    <xsl:template match="/client-list">
<!-- for each tag with name client you find, ... -->
        <xsl:for-each select="client">
<!-- if the tag with name -name- don't have the value person1 just place its data, ... -->
            <xsl:if test="name != 'person1'">
                <xsl:value-of select="name"/>
            </xsl:if>
<!-- if have the value person1 place the data from the hiddenperson -->
            <xsl:if test="name = 'person1'">
                <xsl:value-of select="$hiddenname"/>
            </xsl:if>
<!-- and place a comma -->
        <xsl:text>,</xsl:text>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

结果将是

```
person4,person2,person3, 
```

我希望这能帮到您。

# linux-kernel - 自旋锁无法保护多核系统上的关键部分

> ID：13130546
> 
> 赞同：2
> 
> 时间：2012-10-29T22:25:04.070
> 
> 标签：linux-kernel, linux-device-driver, multicore, interrupt, spinlock

我有一个字符设备驱动程序，它导致多核系统上的系统死锁。写调用有一个由自旋锁 (spin_lock_irqsave) 保护的临界区。ISR 也必须获得此锁才能完成其任务。如果在一个内核上调用 ISR，而写入正在另一个内核上执行临界区，则会由于看门狗定时器检测到 ISR 内核上的硬锁定而发生恐慌。写入过程永远不会返回完成执行。写进程不应该继续在它的核心上执行，释放锁以允许其 ISR 中的另一个核心运行吗？

关键部分大约需要 5us 才能完成。5 秒后发生硬锁定。

我假设我做错了什么，但不知道是什么。

感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:49:33.167

Turns out the critical section was calling wait_for_completion_timeout. Even though the timeout was zero, it still slept and didn't wake up to release the spin lock if the interrupt occurred in the blocking section. Using try_wait_for_completion in this case resolved the issue.

I would have posted source but it spans many modules and has architecture abstractions for portability between operating systems. Would have been a mess.

# rally - 在 Rallydev 中为用户故事创建自定义模板

> ID：13130550
> 
> 赞同：5
> 
> 时间：2012-10-29T22:25:15.993
> 
> 标签：rally

在 Rally 中创建用户故事时，是否可以创建预先填充的备注字段？我想定义一个标准格式供我的团队使用，他们只需要填写请求的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:00:04.203

这是一个流行的功能请求。一些有这种需求的客户设置了他们的“模板”故事，并预先填充了必要的数据，并让它们不被安排，并进行排名，以便它们出现在积压的顶部。然后，他们在创建要编写的新故事时复制模板故事，然后进入 sprint。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T18:07:25.703

Rally（现为 CA Agile Central）现在支持为描述字段定义模板，并且可以与其他用户共享，但作为实验性“实验室”功能。它是可用的，对我有用。要查看实验室功能并尝试一下，请单击右上角的个人资料图标，选择我的设置，然后单击顶部栏中的实验室链接。该功能称为富文本模板共享。启用它后，您应该会在“描述”字段的“新故事创建”对话框中看到一个模板链接。

# java - 在不断增长的字符串数据结构中搜索子字符串

> ID：13130554
> 
> 赞同：1
> 
> 时间：2012-10-29T22:25:38.630
> 
> 标签：java, algorithm, search, data-structures

在 Java 中，在不断增长的字符串列表中搜索单词或子字符串的*最快*方法*是*什么？

 *例如，如果我有一个包含十个单词的列表，并且我每五分钟在该列表中搜索**用户输入的**单词，并且该列表每分钟增长一个单词，那么存储这些单词的最佳数据结构是什么？ ?

我们实际上正在做的是……在检索“关键字”时，程序必须根据该关键字搜索要响应的短语，但短语列表不断增长。阅读关键字，解析每个短语，然后选择一个短语需要很长时间。我们当前的算法目前在 n^3，这是不合适的。

Java 中是否有数据结构或排序/搜索算法可以帮助提高效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:30:17.343

对于庞大而艰巨的搜索任务，我总是使用[Merge Sort](http://en.wikipedia.org/wiki/Merge_sort)。您的列表每分钟都在增长的事实不应该成为算法的问题。您可以在查找所需单词时将其与另一个检查器结合使用。实际上，一旦您对第一个列表进行了排序，当您收到每个元素时，只需将每个元素插入它应该在列表中的位置，而不是仅在开始搜索时查看数据，这甚至可能更有意义。

假设您的增长率不是非常高，那么以这种方式对列表进行排序将大大提高您的绩效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:32:27.550

如果仅存储在 HashMap 中链接的关键字和短语还不够，我建议继续使用短语的倒排索引。在这种情况下，[Apache Lucene](http://lucene.apache.org)可能是实现这一点的选择。*

# c# - 为什么将解决方案文件夹移动到其他位置后重建全部失败？

> ID：13130556
> 
> 赞同：0
> 
> 时间：2012-10-29T22:25:56.353
> 
> 标签：c#, asp.net, visual-studio-2010, web-applications

我有一个 C# Web 应用程序，我一直在使用它，自从我开始使用它以来，它已经正确构建。我将整个解决方案移到了另一个文件夹中，现在，当我尝试构建它时，它显示“重建全部失败”，没有其他错误。我已经查看了 build 的详细输出；但是，我没有看到任何引起我注意的问题。如果我将解决方案移回原始位置，它将再次构建。有人知道为什么新位置会破坏构建吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:28:50.263

此错误的最可能原因是您将解决方案移动到的位置不受信任。

例如，如果您将解决方案移动到受保护的文件夹，如`C:\Program Files`或`C:\Windows`或网络位置。

如果不是这种情况，请告知您将文件移动到哪里，并可能分享您构建日志中的任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:48:53.527

我相信我发现了 - 事实证明，将它移动几个目录更深可能已经破坏了 NTFS 的最大路径大小（请参阅这个问题：[VS2010 - 相同的解决方案（IE SVN 结帐），不同的位置，一个构建，一个失败任何想法？](https://stackoverflow.com/questions/3773998/vs2010-same-soltuion-ie-svn-checkout-different-locations-one-builds-one-f)） . 我将我的项目移动到 c: 中的根目录，现在它可以在 VS2010 中正常编译。

一个更友好的错误会很好；但是，嘿，你能做什么？

# ruby - Ruby 中的大乘法输出为负数

> ID：13130557
> 
> 赞同：4
> 
> 时间：2012-10-29T22:25:59.347
> 
> 标签：ruby, integer, exponentiation

我写了一些代码，应该对 1 <= n <= 1000 求和 n^n。这是代码：

```
sum = 0
(1..1000).each do |n|
  sum += n**n
  puts "n = #{n}, sum = #{sum}"
end 
```

出于某种原因，在 28 号之后输出为负数：

```
n = 29, sum = -2015400977700573523892329442490139437391867 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T23:57:00.813

看起来这是 1.8.7 中的一个错误，已由补丁 358 修复：[Ruby 1.8.7 中的指数返回错误答案](https://stackoverflow.com/questions/12009799/exponentiation-in-ruby-1-8-7-returns-wrong-answers)

（`power`计算的结果没有像[这次提交](https://github.com/ruby/ruby/commit/4e4649e13cd4175aab75a0edc2fc5b082cf735d1)之前`numeric.c`那样声明，之后溢出行为似乎已经修复。）`volatile`

# java - JDBC 连接池内存问题（Java EE 应用程序）

> ID：13130560
> 
> 赞同：0
> 
> 时间：2012-10-29T22:26:05.540
> 
> 标签：java, memory, jdbc, jvm

我目前有一个 Java EE 应用程序，我在其中实现了自己的连接池类。我使用的每种方法都执行一个简单的查询（Statement 和 ResultSet）。在我使用 JDBC/my pool 的每个方法的 finally 块中，我首先关闭 ResultSet，然后关闭 Statement，因为书籍和网上指示应该做的很多很多资源。最后，我将连接返回到池中。

在查看 JVM 的内存时，我注意到在我通过连接池使用 JDBC 进行调用后，内存从未真正释放，或者需要很长时间才能释放。我检查了我的垃圾收集设置，并且正在使用 gencon (IBM WebSphere)，许多在线资源都表明它也非常好。我也在我的应用程序中使用 Spring Framework。

我写的连接池类很简单。初始化时，它会创建一定数量的数据库连接并将它们添加到队列中（我尝试了另一种仅使用简单向量的实现，但与内存的结果相同）。当您请求连接时，它会检查以确保有可用的连接，如果有，它会向调用者提供一个连接。最后，您将其返回并将其放回队列/向量中。

我想知道是否还有其他可以做的？我应该让 Spring Framework 来处理我的连接池，还是有其他东西可以更好地处理内存？对我来说，这确实有意义，但我对实现连接池不太熟悉。所有资源都说要做我正在做的事情，但我假设他们可能正在使用一些内置的池实现。我确实知道关闭连接是有效的，但由于这是一个自定义池解决方案，我不能真正做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:33:23.310

您的应用程序是否在 WebSphere 应用程序服务器中运行？它是从应用服务器获取它的数据源，而不是自己创建它吗？如果是这样，那么连接和语句已经被池化了，您不需要自己池化它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:32:46.603

好的，第一件事是第一件事：除非你有很好的理由，否则实现你自己的连接池机制是一种不必要的风险练习。那里有许多连接池机制可供选择 - Spring 将是其中之一，Jakarta 的 DBCP 是另一个。如果您可以选择使用第三方实用程序进行连接池 - 请执行此操作。如果您在容器中运行，让容器为您完成工作（WebSphere 已经通过它的各种“帮助类”完成了这项工作）。

关于您遇到的症状：内存未释放的事实并不意味着存在内存泄漏。由 JVM 决定是否以及何时真正释放未引用的对象实例。您是否也遇到 OutOfMemory 错误？

首先发出一些堆转储（在 JDBC 资源发布之后）以查看其中发生了什么。

关于你写的代码——不发布代码，很难猜测你是否有隐藏的错误；但是您描述的流程似乎是正确的。

# python - 当我调用函数时，“绑定方法”错误是什么意思？

> ID：13130574
> 
> 赞同：36
> 
> 时间：2012-10-29T22:27:29.747
> 
> 标签：python, class

我正在创建一个单词解析类，我不断得到一个

```
bound method Word_Parser.sort_word_list of <__main__.Word_Parser instance at 0x1037dd3b0> 
```

当我运行这个错误：

```
class Word_Parser:
    """docstring for Word_Parser"""
    def __init__(self, sentences):
        self.sentences = sentences

    def parser(self):
        self.word_list = self.sentences.split()

    def sort_word_list(self):
        self.sorted_word_list = self.word_list.sort()

    def num_words(self):
        self.num_words = len(self.word_list)

test = Word_Parser("mary had a little lamb")
test.parser()
test.sort_word_list()
test.num_words()
print test.word_list
print test.sort_word_list
print test.num_words 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-29T22:30:30.860

这里没有错误。你正在打印一个函数，这就是函数的样子。

要实际*调用*该函数，您必须在其后加上括号。你已经在上面做了。如果要打印调用函数的结果，只需让函数返回值，然后将 print 放在那里。例如：

```
print test.sort_word_list() 
```

另一方面，如果您希望函数改变对象的状态，然后以其他方式打印状态，那也可以。

现在，您的代码似乎在某些地方有效，但在其他地方无效；让我们看看为什么：

*   `parser`设置一个名为 的变量`word_list`，然后再设置一个`print test.word_list`，这样就可以了。
*   `sort_word_list`设置一个名为 的变量`sorted_word_list`，然后再设置`print test.sort_word_list`- 即函数，而不是变量。所以，你看到了绑定方法。（另外，正如 Jon Clements 指出的那样，即使你解决了这个问题，你也会 print `None`，因为这就是`sort`返回的内容。）
*   `num_words`设置一个名为 的变量`num_words`，然后您再次打印该函数——但在这种情况下，该变量与该函数具有相同的名称，这意味着您实际上是在用它的输出替换该函数，所以它可以工作。然而，这可能不是您想要做的。

（在某些情况下，乍一看，这似乎是一个好主意——你只想计算一次，然后一遍又一遍地访问它，而不是不断地重新计算。但这不是这样做的方法它。要么使用`@property`，要么使用 memoization 装饰器。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-30T18:30:43.773

此问题是由于调用不带括号的方法而发生的。看看下面的例子：

```
class SomeClass(object):
    def __init__(self):
        print 'I am starting'

    def some_meth(self):
        print 'I am a method()'

x = SomeClass()
''' Not adding the bracket after the method call would result in method bound error '''
print x.some_meth
''' However this is how it should be called and it does solve it '''
x.some_meth() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T22:30:19.857

您有一个名为 的实例方法`num_words`，但也有一个名为 的变量`num_words`。他们有相同的名字。当您运行时`num_words()`，该函数会用自己的输出替换自己，这*可能*不是您想要做的。考虑`return`你的价值观。

要解决您的问题，请更改`def num_words`为类似`def get_num_words`的内容，您的代码应该可以正常工作。此外，更改`print test.sort_word_list`为`print test.sorted_word_list`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-21T18:07:08.820

对于这个东西，您可以将`@property`其用作装饰器，因此您可以将实例方法用作属性。例如：

```
class Word_Parser:
    def __init__(self, sentences):
        self.sentences = sentences

    @property
    def parser(self):
        self.word_list = self.sentences.split()

    @property
    def sort_word_list(self):
        self.sorted_word_list = self.word_list.sort()

    @property
    def num_words(self):
        self.num_words = len(self.word_list)

test = Word_Parser("mary had a little lamb")
test.parser()
test.sort_word_list()
test.num_words()
print test.word_list
print test.sort_word_list
print test.num_words 
```

因此您可以在不调用的情况下使用访问属性（即，没有`()`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T22:31:03.280

我想你的意思是`print test.sorted_word_list`而不是`print test.sort_word_list`.

此外`list.sort()`对列表进行排序并返回`None`，因此您可能希望更改`sort_word_list()`为执行以下操作：

```
self.sorted_word_list = sorted(self.word_list) 
```

您还应该考虑重命名您的`num_words()`函数，或更改函数分配给的属性，因为目前您在第一次调用时用整数覆盖了函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T22:38:35.150

语法问题是遮蔽方法和变量名。在当前版本`sort_word_list()`中是一个方法，并且`sorted_word_list`是一个变量，而`num_words`两者都是。此外，`list.sort()`修改列表并将其替换为排序版本；该`sorted(list)`函数实际上返回一个新列表。

但我怀疑这表明存在设计问题。打电话有什么意义

```
test.parser()
test.sort_word_list()
test.num_words() 
```

什么都不做？您可能应该让方法确定是否已经完成了适当的计数和/或排序，并且如果合适的话，进行计数或排序，否则只返回一些东西。

例如，

```
def sort_word_list(self):
   if self.sorted_word_list is not None:
      self.sorted_word_list = sorted(self.word_list)
   return self.sorted_word_list 
```

（或者，您可以使用[properties](http://docs.python.org/2/howto/descriptor.html#id7)。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T23:38:34.063

您的有用意见使我找到了以下解决方案：

```
class Word_Parser:
    """docstring for Word_Parser"""
    def __init__(self, sentences):
        self.sentences = sentences

    def parser(self):
        self.word_list = self.sentences.split()
        word_list = []
        word_list = self.word_list
        return word_list

    def sort_word_list(self):
        self.sorted_word_list = sorted(self.sentences.split())
        sorted_word_list = self.sorted_word_list
        return sorted_word_list

    def get_num_words(self):
        self.num_words = len(self.word_list)
        num_words = self.num_words
        return num_words

test = Word_Parser("mary had a little lamb")
test.parser()
test.sort_word_list()
test.get_num_words()
print test.word_list
print test.sorted_word_list
print test.num_words 
```

并返回： ['mary', 'had', 'a', 'little', 'lamb'] ['a', 'had', 'lamb', 'little', 'mary'] 5

谢谢你们。

# php - 将文本文件数据导入数据库

> ID：13130575
> 
> 赞同：0
> 
> 时间：2012-10-29T22:27:36.723
> 
> 标签：php, mysql

我有一个如下所示的数据库：

```
attribute id - value
64           - 109.txt
109          - some other data
110          - some other data
64           - 110.txt
109          - some other data
110          - some other data 
```

然后我有一个可以在这里读取文本文档的 php 脚本：

`<?php $lines = file('http://www.mywebsite.com/files.txt'); ?>`

我需要从我的数据库中获取该文本文件，其中属性 id = 64 保留“其他数据”不变。然后在 php 中打开 txt 文件并将内容放回它从中获取它们的确切字段中。

任何帮助是极大的赞赏。西蒙

另外：表名是“mage_catalogsearch_fulltext”attribute_id，值是列的正确名称

我这样做的原因是产品描述都在那些文本文档中，我需要将它们吸出并将实际内容放入该字段而不是文件参考

在对 Jaspers 帖子的参考中：不是我要求某人编写它，而是更多地在查询上给出指导，我应该查看运行以返回每个结果并更新每个引用的每个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:36:49.210

由于这里不是找人编写代码的地方，所以让我为您提供一个如何处理它的想法，以便您自己编写代码。如果您在此过程中遇到问题，一旦您有具体问题，这是一个很好的帮助场所。

1.  首先选择要更改的所有字段
2.  对您的选择返回的每一行执行以下操作：
    1.  检查`value`字段的最后几个字母，看看它们是否是`.txt`
    2.  如果不是，请不要执行以下任何操作，直接跳到下一个条目
    3.  否则，将该字段的值解释为文件名并将该文件读入变量
    4.  在您的数据库上进行更新，您`value`将当前条目设置为文件的内容而不是文件名

# c# - 在 C# Visual Studio 中连续录制和播放音频

> ID：13130577
> 
> 赞同：0
> 
> 时间：2012-10-29T22:27:52.293
> 
> 标签：c#, audio, voip, naudio

我一直在尝试使用临时 wav 文件同时录制和播放音频。后来我想创建一个VOIP聊天程序。

我使用 Naudio 库在 C# 中捕获和播放音频，它似乎工作得很好。下面是我写的c#代码：

```
using System.IO.Ports;
using NAudio.Wave;
using System.IO;

namespace VOIP
{
    public partial class Form1 : Form
    {
        WaveIn wab = new WaveIn();    
        MemoryStream s;        
        int k;

        public Form1()
        {
            InitializeComponent();
            wab.BufferMilliseconds = 100;
            wab.NumberOfBuffers=5;
            wab.DataAvailable += new EventHandler<WaveInEventArgs>(wa_DataAvailable);           
        }

        void wa_DataAvailable(object sender, WaveInEventArgs e)
        {                 

            Play(e.Buffer);         

        }

        private void Play(byte[] p)
        {
            WaveOut ou = new WaveOut();
            s = new MemoryStream(p);
            RawSourceWaveStream r = new RawSourceWaveStream(s, wab.WaveFormat);
            ou.Init(r);
            ou.Play();
            ou.Stop();
            ou.Dispose();
            s.Dispose();
            r.Dispose();

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
           if (button1.Text == "Stop")
            {
                wab.StopRecording();
                button1.Text = "Record";
            }
           else if (button1.Text == "Record")
            {
                wab.StartRecording();
                button1.Text = "Stop";
            }            
        }

    }
} 
```

问题出在“播放”方法上。由于每次数据可用时都会创建和处理waveout对象：我可以听到一些咔哒声。有没有办法避免这种创建和处置对象的方式，而只是创建一个对象，然后用新数据进行初始化。我还观察到该程序消耗的内存不断增加。

提前致谢。萨纳坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:13:53.793

使用 BufferedWaveProvider，当音频到达时，解压缩并将其添加到 BufferedWaveProvider。然后有一个从 BufferedWaveProvider 不断播放的 WaveOut 实例。

NAudioDemo 的源代码在聊天示例中显示了如何执行此操作。

# delphi - 反转 ClientDataSet 索引的顺序

> ID：13130578
> 
> 赞同：6
> 
> 时间：2012-10-29T22:27:54.123
> 
> 标签：delphi, indexing, tclientdataset

我想反转 TClientDataSet 中索引的顺序，下面的代码看起来应该可以解决问题，但什么也没做。有没有一种很好的方法来反转索引的顺序？

```
procedure TForm8.Button1Click(Sender: TObject);
var
  index: TIndexDef;
begin
  index := ClientDataSet1.IndexDefs.Find('LengthIndex');
  if ixDescending in index.Options then
    index.Options := index.Options - [ixDescending]
  else
    index.Options := index.Options + [ixDescending];
end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T22:52:39.847

`TIndexDef.Options`在创建索引时使用。它们不能用于尝试和影响现有索引。请参阅[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TIndexDef.Options)（**强调**我的）：

> **创建新索引**时，使用 Options 指定索引的属性。选项可以包含零个或多个 TIndexOption 常量 ixPrimary、ixUnique、ixDescending、ixCaseInsensitive 和 ixExpression。
> 
> **检查现有索引的定义时，请阅读选项**以确定用于创建索引的选项。

您需要使用`ixDescending`值集创建一个单独的索引。`IndexName`然后，您只需更改属性即可来回切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-26T19:39:47.410

这是我最终确定的双向排序方法。基本上它只是创建和释放索引，不是很漂亮但可以工作。[使用TFDMemTable](https://youtu.be/ohJfGDF__MQ)更容易做到（如果您可以访问 FireDAC）

```
type
  TSortByFieldOption = (ForceAscending, ForceDescending);
  TSortByFieldOptions = set of TSortByFieldOption;

procedure SortClientDataSetByField(cds : TClientDataSet; FieldName : String; Options : TSortByFieldOptions = []);
const
  IndexName = 'GridSort';
var
  i: integer;
  index: TIndexDef;
  OldOrder: string;
  IndexOptions : TIndexOptions;
begin
  cds.DisableControls;
  try
    i := cds.IndexDefs.IndexOf(IndexName);
    if i <> - 1  then
    begin
      index := cds.IndexDefs.Find(IndexName);
      OldOrder := index.Fields;
      try
        cds.DeleteIndex(IndexName);
      except;
        OutputDebugString('no index?');
        //there seem to be conditions where the index does not exist but
      end;
      index.Free; //delete index for some reason does not free the index
      indexOptions := index.Options;
    end else
      IndexOptions := [ixDescending];

    index := cds.IndexDefs.AddIndexDef;
    index.Name := IndexName;
    index.Fields := FieldName;
    if ForceAscending in Options then
      index.Options := []
    else if ForceDescending in Options then
      index.Options := [ixDescending]
    else if OldOrder = FieldName  then
    begin
      if (IndexOptions = [ixDescending]) then
        index.Options := []
      else
        index.Options := [ixDescending];
    end;
    cds.IndexName := IndexName;
  finally
    cds.EnableControls;
  end;
end; 
```

# vb.net - vb.net 将字符串发送到不同的程序并获取结果

> ID：13130579
> 
> 赞同：0
> 
> 时间：2012-10-29T22:28:00.197
> 
> 标签：vb.net, winforms, visual-studio, visual-studio-2012

我一直在为我工作的公司开发一个 .net 应用程序，似乎只有一个部分我做不到。我需要将字符串发送到另一个程序的文本框，然后复制结果。结果显示在标签中。目前我们手动输入字符串并手动复制标签文本，所以我知道可以复制信息我只是不知道如何通过代码来完成。

如果有帮助，我也需要发送文本的应用程序也是用 .net 框架编写的。

任何答案表示赞赏:)

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:39:28.017

您可以使用来自 user32.dll 的本机*SendMessage ()。*如果您不知道如何导入 dll 命令，请参阅 MSDN 的[平台调用教程](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)。
一旦知道如何导入 dll 命令，使用*FindWindow* () 查找应用程序的窗口句柄并使用*SendMessage* () 发送字符串。

另一种选择是使用套接字。通过本地网络 (localhost) 发送消息。这是一个关于 Socket的[小教程。](http://www.devasp.net/net/articles/display/192.html)希望这可以帮助 ：）

# android - 让 Android 应用在重启时自动启动

> ID：13130582
> 
> 赞同：1
> 
> 时间：2012-10-29T22:28:05.113
> 
> 标签：android, android-intent, broadcastreceiver, reboot

> **可能重复：**
> [Android，如何确定是否发生了重启？](https://stackoverflow.com/questions/7616335/android-how-to-determine-if-a-reboot-occurred)

我有一个应用程序，我想一直在我的手机上运行。

是否可以在手机重启后以编程方式启动 Android 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:07:43.507

将权限 android.permission.RECEIVE_BOOT_COMPLETED 添加到您的清单。编写广播接收器并将此过滤器添加到清单中：

```
<receiver android:name=".MyBootReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

让您的接收器启动任何服务或执行它选择的任何任务。

我认为尝试在启动时启动活动不是一个好主意，但也许它会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:26:32.170

重新启动后启动*应用程序*是一个不错的主意。重启后将 Activity 放到前台是**不行的。**活动应始终在用户控制之下。一般来说，尽量不要猜测用户。

但是，您可能有一个有趣的用例，所以请发布它。

# image-processing - 如何以编程方式从图像中计算人的身高

> ID：13130587
> 
> 赞同：-1
> 
> 时间：2012-10-29T22:28:39.217
> 
> 标签：image-processing

有没有办法以编程方式从图片或图像中计算角色的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:42:40.217

您需要图片中的参考对象，一个您知道确切尺寸的参考对象，以便您可以在照片中获得比例。

# python - Pymongo Safe Writes 给出“传递给 Py_BuildValue 的错误格式字符”

> ID：13130589
> 
> 赞同：0
> 
> 时间：2012-10-29T22:29:10.173
> 
> 标签：python, mongodb, pymongo

我试图将插入到 MongoDB 作为安全写入，但我收到了未经授权的错误消息 (MongoDB 2.2 & Pymongo 2.2)。升级到 Pymongo 2.3 后，那个消失了，但我收到了另一条带有以下跟踪的消息：

```
 MongoDB['my_collection'].save({'test' : 1111111} , safe = True)
      File "D:\Python24\Lib\site-packages\pymongo\collection.py", line 241, in save
        return self.insert(to_save, manipulate, safe, check_keys, **kwargs)
      File "D:\Python24\Lib\site-packages\pymongo\collection.py", line 315, in insert
        continue_on_error, self.__uuid_subtype), safe)
      File "D:\Python24\Lib\site-packages\pymongo\connection.py", line 831, in _send_message
        rv = self.__check_response_to_last_error(response)
      File "D:\Python24\Lib\site-packages\pymongo\connection.py", line 753, in __check_response_to_last_error
        response = helpers._unpack_response(response)
      File "D:\python24\lib\site-packages\pymongo\helpers.py", line 111, in _unpack_response
        as_class, tz_aware, uuid_subtype)
    SystemError: bad format char passed to Py_BuildValue 
```

如果我转动 `safe=False`一切都很好。

任何关于此的想法都会有所帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:04:48.703

对于任何可能有类似经历的人来说，这是一个 Python **2.4.0**问题。正如您在 MongoDB[跟踪系统中看到的那样，如果您升级到 Python](https://jira.mongodb.org/browse/PYTHON-432) **2.4.3**或更高版本，它将得到解决。

我非常感谢 MongoDB 人员的帮助。他们非常支持和耐心。

# dialog - jQuery对话框关闭复选框

> ID：13130590
> 
> 赞同：0
> 
> 时间：2012-10-29T22:29:17.547
> 
> 标签：dialog, jquery

我在 jsp 页面上有一个带有复选框的对话框。单击超链接时会打开此对话框。

我试图实现的功能受以下规则约束：

1.  该对话框仅应在选中内部复选框时关闭。
2.  如果对话框重新打开并且复选框已被选中，则用户可以单击页面上的任意位置将其关闭。
3.  如果重新打开对话框并且未选中或取消选中复选框，则用户只能通过选中复选框来关闭对话框。

    ```
    function closeDialog() {
       var checked = $('.checkboxClass').attr('checked');

       $('.ui-widget-overlay').live('click', function() {

        if(checked){
        $('#'+divId).dialog('close');
        }else{
        <!-- since unchecked, dialog should not be closed-->
            //$(document).unbind('click');
        //$('.ui-widget-overlay').unbind('click');
            $('.ui-widget-overlay').die('click');
        }
       });
    }   

    <!-- This detects if checkbox is clicked-->
    $('.checkboxClass').live('click', function() {
        var checked = $('.checkboxClass').attr('checked');
        if(checked){
            $('#'+divId).dialog('close');
        }
    }); 
    ```

我已经尝试了所有方法来执行第 3 步，即，如果用户单击对话框外的任何位置，则防止对话框关闭，但它会关闭。有任何想法吗？我正在使用 jQuery 1.4，因此更愿意保留`.live()`我知道已弃用的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:45:31.940

尝试将您的 .ui-widget-overlay 事件绑定更改为

```
$('.ui-widget-overlay').live('click', function(e) {
... 
```

然后在 else 中做一个[e.stopPropagation()](https://stackoverflow.com/questions/4735006/javascript-how-to-enable-stoppropagation)？

# canvas - 更改画布的尺寸以适应屏幕。（画布是从 adobe illustrator 导出的，不是个人编码的）

> ID：13130592
> 
> 赞同：1
> 
> 时间：2012-10-29T22:29:30.013
> 
> 标签：canvas, resize

我更像是平面设计师而不是编码员或网络开发人员，所以我的知识有点有限，但我似乎无法将我的固定画布尺寸（它在插画家中的像素尺寸）更改为适合屏幕的尺寸。并且所有与该主题有关的帖子都让我失望了（可能是我自己的用户错误）。谢谢参观！

我正在处理的页面已在[http://www.advancedseismic.com启动并运行](http://www.advancedseismic.com)

我尝试按照[Resize HTML5 canvas to fit window](https://stackoverflow.com/questions/1664785/html5-canvas-resize-to-fit-window)的示例进行操作，但无济于事。

这是画布被标记的div：

```
<div id="canvasesdiv"> 

  <canvas id="layer4" style="z-index: 0; position:absolute; left:0px; top:0px;"></canvas>  

</div> 
```

这是画布

```
var layer4;
var ctx4;

function init() {

    layer4 = document.getElementById("layer4");
    ctx4 = layer4.getContext("2d");
    setInterval(drawAll, .1);
    drawAll();
}

function drawAll() {    
draw4();
}

function draw4() {

  var alpha = ctx4.globalAlpha;
  var gradient;

  // background/Image
  ctx4.save();
  ctx4.drawImage(document.getElementById("image1"), 0.0, 0.0);
  ctx4.restore();

  // foreground/Path
  ctx4.save();
  ctx4.beginPath();
  ctx4.moveTo(1225.7, 792.2);
  ctx4.lineTo(0.1, 792.5);
  ctx4.lineTo(0.1, 519.8);
  ctx4.lineTo(1225.7, 520.9);
  ctx4.lineTo(1225.7, 792.2);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(612.9, 792.5, 612.9, 519.8);
  gradient.addColorStop(0.00, "rgb(255, 255, 255)");
  gradient.addColorStop(1.00, "rgb(0, 0, 0)");
  ctx4.fillStyle = gradient;
  ctx4.fill();
  ctx4.restore();

  // emailinput/Path
  ctx4.save();
  ctx4.beginPath();
  ctx4.moveTo(376.5, 166.3);
  ctx4.bezierCurveTo(376.5, 159.7, 381.9, 154.3, 388.5, 154.3);
  ctx4.lineTo(804.1, 154.3);
  ctx4.bezierCurveTo(810.7, 154.3, 816.1, 159.7, 816.1, 166.3);
  ctx4.lineTo(816.1, 197.8);
  ctx4.bezierCurveTo(816.1, 204.4, 810.7, 209.8, 804.1, 209.8);
  ctx4.lineTo(388.5, 209.8);
  ctx4.bezierCurveTo(381.9, 209.8, 376.5, 204.4, 376.5, 197.8);
  ctx4.lineTo(376.5, 166.3);
  ctx4.closePath();
  ctx4.fillStyle = "rgb(255, 255, 255)";
  ctx4.fill();
  ctx4.restore();

  // mailicon/Image
  ctx4.save();

  ctx4.restore();

  // emailbutton/Path
  ctx4.save();
  ctx4.beginPath();
  ctx4.moveTo(1044.6, 198.0);
  ctx4.bezierCurveTo(1044.6, 204.6, 1039.1, 209.9, 1032.5, 209.9);
  ctx4.lineTo(839.7, 209.9);
  ctx4.bezierCurveTo(833.1, 209.9, 827.4, 204.3, 827.4, 197.7);
  ctx4.lineTo(827.5, 165.9);
  ctx4.bezierCurveTo(827.5, 159.3, 832.7, 154.4, 839.3, 154.4);
  ctx4.lineTo(1032.6, 154.2);
  ctx4.bezierCurveTo(1039.3, 154.2, 1044.5, 159.3, 1044.5, 166.0);
  ctx4.lineTo(1044.6, 198.0);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(936.0, 209.9, 936.0, 154.2);
  gradient.addColorStop(0.00, "rgb(237, 28, 36)");
  gradient.addColorStop(0.80, "rgb(239, 59, 38)");
  gradient.addColorStop(1.00, "rgb(240, 90, 40)");
  ctx4.fillStyle = gradient;
  ctx4.fill();

  // emailbutton/Request an Invitation
  ctx4.font = "21.0px 'Arial'";
  ctx4.fillStyle = "rgb(255, 255, 255)";
  ctx4.fillText("Request an Invitation", 838.7, 189.2);
  ctx4.restore();

  // compstand/Group
  ctx4.save();

  // compstand/Group/Mesh
  ctx4.save();
  ctx4.drawImage(document.getElementById("image3"), 516.8, 570.5);

  // compstand/Group/Group

  // compstand/Group/Group/Path
  ctx4.save();
  ctx4.beginPath();
  ctx4.moveTo(691.0, 635.8);
  ctx4.bezierCurveTo(691.0, 635.7, 690.9, 635.7, 690.9, 635.7);
  ctx4.bezierCurveTo(690.9, 635.7, 691.0, 635.7, 691.0, 635.8);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(690.9, 635.7, 691.0, 635.7);
  gradient.addColorStop(0.00, "rgb(186, 187, 189)");
  gradient.addColorStop(0.24, "rgb(106, 106, 106)");
  gradient.addColorStop(0.63, "rgb(186, 187, 189)");
  gradient.addColorStop(1.00, "rgb(88, 88, 88)");
  ctx4.fillStyle = gradient;
  ctx4.fill();

  // compstand/Group/Group/Path
  ctx4.beginPath();
  ctx4.moveTo(692.1, 637.7);
  ctx4.bezierCurveTo(691.9, 638.4, 690.7, 639.1, 687.4, 639.2);
  ctx4.bezierCurveTo(680.3, 639.4, 604.9, 639.2, 604.9, 639.2);
  ctx4.bezierCurveTo(604.9, 639.2, 529.5, 639.4, 522.5, 639.2);
  ctx4.bezierCurveTo(518.5, 639.0, 517.5, 638.2, 517.8, 637.2);
  ctx4.bezierCurveTo(516.8, 639.4, 517.2, 643.0, 522.5, 643.2);
  ctx4.bezierCurveTo(529.5, 643.4, 604.9, 643.2, 604.9, 643.2);
  ctx4.bezierCurveTo(604.9, 643.2, 680.3, 643.4, 687.4, 643.2);
  ctx4.bezierCurveTo(692.2, 643.0, 692.8, 639.9, 692.1, 637.7);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(517.4, 640.3, 692.3, 640.3);
  gradient.addColorStop(0.00, "rgb(186, 187, 189)");
  gradient.addColorStop(0.24, "rgb(106, 106, 106)");
  gradient.addColorStop(0.63, "rgb(186, 187, 189)");
  gradient.addColorStop(1.00, "rgb(88, 88, 88)");
  ctx4.fillStyle = gradient;
  ctx4.fill();
  ctx4.restore();
  ctx4.restore();
  ctx4.restore();

  // comingsoon/Coming Soon    
  //ctx4.save();
  //ctx4.font = "60.0px 'Simply*Glamorous'";
  //ctx4.fillStyle = "rgb(255, 255, 255)";
  //ctx4.fillText("Coming Soon . . . ", 413.8, 86.6);
  //ctx4.restore();

  // compreflect/Group
  ctx4.save();
  ctx4.globalAlpha = alpha * 0.90;

  // compreflect/Group/Group
  ctx4.save();
  ctx4.globalAlpha = alpha * 0.20;

  // compreflect/Group/Group/Mesh
  ctx4.save();
  ctx4.globalAlpha = alpha * 1.00;
  ctx4.drawImage(document.getElementById("image4"), 517.9, 651.4);

  // compreflect/Group/Group/Group

  // compreflect/Group/Group/Group/Path
  ctx4.save();
  ctx4.beginPath();
  ctx4.moveTo(519.7, 655.7);
  ctx4.bezierCurveTo(519.7, 655.7, 519.8, 655.7, 519.8, 655.8);
  ctx4.bezierCurveTo(519.8, 655.7, 519.7, 655.7, 519.7, 655.7);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(519.8, 655.7, 519.7, 655.7);
  gradient.addColorStop(0.00, "rgb(186, 187, 189)");
  gradient.addColorStop(0.24, "rgb(106, 106, 106)");
  gradient.addColorStop(0.63, "rgb(186, 187, 189)");
  gradient.addColorStop(1.00, "rgb(88, 88, 88)");
  ctx4.fillStyle = gradient;
  ctx4.fill();

  // compreflect/Group/Group/Group/Path
  ctx4.globalAlpha = alpha * 0.50;
  ctx4.beginPath();
  ctx4.moveTo(518.6, 653.8);
  ctx4.bezierCurveTo(518.8, 653.0, 520.0, 652.4, 523.3, 652.2);
  ctx4.bezierCurveTo(530.4, 652.0, 605.8, 652.2, 605.8, 652.2);
  ctx4.bezierCurveTo(605.8, 652.2, 681.1, 652.0, 688.2, 652.2);
  ctx4.bezierCurveTo(692.2, 652.4, 693.2, 653.3, 692.9, 654.2);
  ctx4.bezierCurveTo(693.9, 652.0, 693.5, 648.4, 688.2, 648.2);
  ctx4.bezierCurveTo(681.1, 648.0, 605.8, 648.2, 605.8, 648.2);
  ctx4.bezierCurveTo(605.8, 648.2, 530.4, 648.0, 523.3, 648.2);
  ctx4.bezierCurveTo(518.5, 648.4, 517.9, 651.5, 518.6, 653.8);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(543.6, -251.1, 561.6, 9.9);
  gradient.addColorStop(0.00, "rgb(186, 187, 189)");
  gradient.addColorStop(0.24, "rgb(106, 106, 106)");
  gradient.addColorStop(0.63, "rgb(186, 187, 189)");
  gradient.addColorStop(1.00, "rgb(88, 88, 88)");
  ctx4.fillStyle = gradient;
  ctx4.fill();

  // compreflect/Group/Path
  ctx4.restore();
  ctx4.restore();
  ctx4.globalAlpha = alpha * 0.50;
  ctx4.beginPath();
  ctx4.moveTo(348.9, 736.7);
  ctx4.bezierCurveTo(352.2, 730.6, 359.7, 720.5, 366.9, 720.5);
  ctx4.lineTo(844.9, 720.5);
  ctx4.bezierCurveTo(852.1, 720.5, 858.6, 731.6, 863.3, 738.0);
  ctx4.lineTo(898.2, 792.5);
  ctx4.bezierCurveTo(864.3, 792.5, 311.1, 792.6, 310.9, 792.5);
  ctx4.lineTo(348.9, 736.7);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(898.2, 756.5, 310.9, 756.5);
  gradient.addColorStop(0.00, "rgb(177, 178, 180)");
  gradient.addColorStop(0.63, "rgb(192, 193, 195)");
  gradient.addColorStop(1.00, "rgb(187, 188, 189)");
  ctx4.fillStyle = gradient;
  ctx4.fill();

  // compreflect/Group/Compound Path
  ctx4.globalAlpha = alpha * 0.20;
  ctx4.beginPath();

  // compreflect/Group/Compound Path/Path
  ctx4.moveTo(844.1, 726.0);
  ctx4.lineTo(366.1, 726.0);
  ctx4.bezierCurveTo(361.3, 726.0, 359.9, 730.8, 355.4, 736.1);
  ctx4.bezierCurveTo(355.4, 736.1, 320.8, 789.0, 318.1, 792.5);
  ctx4.lineTo(886.7, 792.5);
  ctx4.bezierCurveTo(890.6, 796.2, 852.7, 734.7, 852.7, 734.7);
  ctx4.bezierCurveTo(849.4, 730.8, 848.8, 726.0, 844.1, 726.0);
  ctx4.closePath();

  // compreflect/Group/Compound Path/Path
  ctx4.moveTo(865.1, 792.5);
  ctx4.lineTo(346.2, 792.5);
  ctx4.lineTo(373.8, 743.1);
  ctx4.lineTo(836.3, 743.1);
  ctx4.lineTo(865.1, 792.5);
  ctx4.closePath();
  ctx4.fillStyle = "rgb(1, 1, 1)";
  ctx4.fill();
  ctx4.restore();
  ctx4.restore();

  // compback/Path
  ctx4.save();
  ctx4.beginPath();
  ctx4.moveTo(858.9, 559.1);
  ctx4.bezierCurveTo(858.9, 566.3, 853.0, 572.2, 845.8, 572.2);
  ctx4.lineTo(367.9, 572.2);
  ctx4.bezierCurveTo(360.7, 572.2, 354.8, 566.3, 354.8, 559.1);
  ctx4.lineTo(355.7, 246.0);
  ctx4.bezierCurveTo(355.7, 240.0, 362.5, 236.0, 369.7, 236.0);
  ctx4.lineTo(846.7, 237.0);
  ctx4.bezierCurveTo(853.9, 237.0, 860.7, 242.8, 860.7, 250.0);
  ctx4.lineTo(858.9, 559.1);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(354.8, 404.1, 860.7, 404.1);
  gradient.addColorStop(0.00, "rgb(177, 178, 180)");
  gradient.addColorStop(0.63, "rgb(192, 193, 195)");
  gradient.addColorStop(1.00, "rgb(187, 188, 189)");
  ctx4.fillStyle = gradient;
  ctx4.fill();
  ctx4.restore();

  // compscreen/Path
  ctx4.save();
  ctx4.beginPath();
  ctx4.moveTo(845.8, 556.9);
  ctx4.lineTo(371.9, 556.9);
  ctx4.lineTo(371.9, 253.4);
  ctx4.lineTo(845.8, 253.4);
  ctx4.lineTo(845.8, 556.9);
  ctx4.closePath();
  ctx4.fill();
  ctx4.restore();

  // compframe/Compound Path
  ctx4.save();
  ctx4.beginPath();

  // compframe/Compound Path/Path
  ctx4.moveTo(846.8, 241.0);
  ctx4.lineTo(368.9, 241.0);
  ctx4.bezierCurveTo(364.1, 241.0, 360.2, 244.9, 360.2, 249.7);
  ctx4.lineTo(360.2, 557.4);
  ctx4.bezierCurveTo(360.2, 562.2, 364.1, 566.1, 368.9, 566.1);
  ctx4.lineTo(846.8, 566.1);
  ctx4.bezierCurveTo(851.6, 566.1, 855.5, 562.2, 855.5, 557.4);
  ctx4.lineTo(855.5, 249.7);
  ctx4.bezierCurveTo(855.5, 244.9, 851.6, 241.0, 846.8, 241.0);
  ctx4.closePath();

  // compframe/Compound Path/Path
  ctx4.moveTo(839.1, 549.0);
  ctx4.lineTo(376.6, 549.0);
  ctx4.lineTo(376.6, 258.1);
  ctx4.lineTo(839.1, 258.1);
  ctx4.lineTo(839.1, 549.0);
  ctx4.closePath();
  ctx4.fillStyle = "rgb(1, 1, 1)";
  ctx4.fill();
  ctx4.strokeStyle = "rgb(102, 102, 102)";
  ctx4.stroke();
  ctx4.restore();

  // compshine/Path
  ctx4.save();
  ctx4.globalAlpha = alpha * 0.29;
  ctx4.beginPath();
  ctx4.moveTo(855.6, 241.3);
  ctx4.lineTo(381.7, 241.3);
  ctx4.lineTo(382.0, 258.4);
  ctx4.bezierCurveTo(507.1, 328.3, 722.2, 427.3, 855.6, 491.0);
  ctx4.lineTo(855.6, 241.3);
  ctx4.closePath();
  gradient = ctx4.createLinearGradient(562.0, 358.3, 899.9, 367.3);
  gradient.addColorStop(0.00, "rgb(255, 255, 255)");
  gradient.addColorStop(1.00, "rgb(187, 188, 189)");
  ctx4.fillStyle = gradient;
  ctx4.fill();
  ctx4.restore();

}

init(); 
```

非常抱歉。非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:32:20.517

你有没有尝试过

```
layer4.width = window.innerWidth;
layer4.height = window.innerHeight; 
```

? 请记住，您应该在绘制画布之前运行代码，否则元素可能会变形。

# google-chrome - DFP 未在 Chrome 上显示

> ID：13130594
> 
> 赞同：0
> 
> 时间：2012-10-29T22:29:44.863
> 
> 标签：google-chrome, safari, adsense, ads, google-dfp

在 DFP 中，我已从 GAM 代码（Google Ad Manager 代码）更改为异步 google 发布商代码：横幅现在显示在 Firefox 下，但不显示在 safari 和 chrome 中……你知道为什么吗？

这是网站：[http](http://www.gamempire.it) : //www.gamempire.it，右边栏的横幅是 300*250，在“Adv Gamemempire”字样下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T17:11:27.673

我有同样的问题，但我意识到在 chrome 中启用了一个广告拦截器。检查您的浏览器，看看是否有。

# jquery - Jquery $.get 或 $.ajax 在 Internet Explorer 中不起作用

> ID：13130596
> 
> 赞同：8
> 
> 时间：2012-10-29T22:29:59.543
> 
> 标签：jquery, ajax, internet-explorer

我一直在 IE 9 中运行此代码，但没有运气。我查看了所有关于 UTF-8 修复等的帖子，但无济于事。有什么想法吗？

```
$.get({
    url: 'http://api.flickr.com/services/rest/?api_key={apikey}&method=flickr.collections.getTree&user_id=66970820%40N03&collection_id=66947766-72157631850748939',
    success: function () {
        console.log('success!');
    }
}).done(function () {
    console.log('done');
}).fail(function () {
    console.log('fail')
}); 
```

它在 Safari、FF 和 Chrome 中运行良好。将 URL 粘贴到 IE 中时，响应很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:08:54.867

@Iden Gozlan，你的回答听起来不错，但我虚弱的头脑很困惑。

@Erik 和 @charlietfl 你对 JSONP 的建议让我走上了正确的道路。这绝对是一个跨域脚本问题。无法理解为什么 IE 是唯一不允许这样做的。我编辑了我的代码，一切都很好！

```
$.ajax({
  url: 'http://api.flickr.com/services/rest/?api_key={apikey}&method=flickr.collections.getTree&user_id=66970820%40N03&collection_id=66947766-72157631850748939&jsoncallback=doSomeGreatStuff',
  dataType: "jsonp"
});

function doSomeGreatStuff(response) {
  // do some great stuff with the json response
  console.log( response.collections.collection[0].id );
} 
```

帮助我的资源在[这里](http://blog.meltingice.net/programming/jsonp-apis-are-awesome/)和[这里](https://stackoverflow.com/questions/7311538/jquery-json-flickr-api)，甚至[在这里](http://devlog.info/2010/03/10/cross-domain-ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T05:44:36.517

这个[jQuery XDomainRequest 插件](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)可以创造奇迹。
我在使用 IE8 和 9 时遇到了 ajax 问题，但在不更改任何代码的情况下简单地包含这个插件就给了我 IE8 和 9 CORS ajax 功能:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T22:58:45.450

其已知问题，请阅读这篇文章： [带有 CORS 的 IE9 jQuery AJAX 返回“访问被拒绝”](https://stackoverflow.com/questions/10232017/ie9-jquery-ajax-with-cors-returns-access-is-denied)

您应该使用 XMLHttpRequest 原始调用或下载以下插件，它将为您提供这种情况的解决方案：

[https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js](https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js)

# c++ - 非内置模板，内置重载

> ID：13130604
> 
> 赞同：2
> 
> 时间：2012-10-29T22:30:35.197
> 
> 标签：c++, templates, overloading, overload-resolution

我正在提供一个支持函数 bar() 的库。传入标量值（如 double、int 等）时的作用与传入非标量值（在所有预期情况下，用户定义类型）时发生的情况不同。所以我写了这样的代码：

```
#include <iostream>

class Foo
{
public:
   template <class T> void bar(T const &rhs) { std::cout << "T" << std::endl; }
   void bar(double rhs) { std::cout << "double" << std::endl; }
};

int main()
{
   Foo foo;
   foo.bar(4);
} 
```

问题出在 main() 的第二行。此代码的结果是“T”的输出。编译器更喜欢模板而不是对 bar(double) 的调用，我假设这是因为参数是 int，它宁愿将其强制转换为 int const&（因为 const& 可以引用 r 值）。

我的问题是“有没有一种方法可以支持每个标量值而无需明确指出它们？” 我真的不想说出所有可能的类型，因为……嗯……有很多。我必须涵盖从 char 到 long long 的所有内容，包括 volatile 和 unsigned 的每种组合，等等。

我知道只需将 4 更改为 4.0 即可，但这是用于库的公共接口，并且要求用户键入`4.0`而不是`4`很脏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:32:25.640

是的，具有以下特征：

```
#include <type_traits>
#include <iostream>

class Foo
{
public:
   template <class T>
   typename std::enable_if<!std::is_scalar<T>::value, void>::type bar(T const & rhs)
   {
      std::cout << "T" << std::endl;
   }

   void bar(double rhs)
   {
      std::cout << "double" << std::endl;
   }
}; 
```

有六种基本类型：标量、函数、数组、类、联合和引用。和`void`。他们每个人都有相应的特质。[有关更多详细信息，请参见此处。](http://en.cppreference.com/w/cpp/types)

# java - Java 正则表达式，用于字符串中任意位置的正好 5 位数字

> ID：13130605
> 
> 赞同：3
> 
> 时间：2012-10-29T22:30:42.807
> 
> 标签：java, regex

我正在尝试创建一个正则表达式来解析字符串中的 5 位数字，无论它在哪里，但我似乎无法弄清楚如何获取开始和结束的情况。

我使用了如下模式，`\\d{5}`但这将获取更大数字的子集......但是当我尝试做类似的事情时，`\\D\\d{5}\\D`它不适用于最终情况。我会很感激这里的任何帮助！谢谢！

对于一些示例（`55555`应该提取的内容）：

```
At the beginning of the string
"55555blahblahblah123456677788"

In the middle of the string
"2345blahblah:55555blahblah"

At the end of the string
"1234567890blahblahblah55555" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T22:32:18.843

由于您使用的是支持它们的语言，因此请使用否定环视：

```
"(?<!\\d)\\d{5}(?!\\d)" 
```

这些将断言您`\\d{5}`的前面或后面都没有数字。这是由于字符串的边缘还是非数字字符无关紧要。

请注意，这些断言本身是零宽度匹配。所以这些字符实际上不会包含在匹配中。这就是为什么它们被称为lookbehind 和lookahead 的原因。他们只是检查那里有什么，而没有真正让它成为比赛的一部分。这是使用的另一个缺点`\\D`，它会在匹配中包含非数字字符（或要求您使用捕获组）。

# objective-c - 在Objective-C中测试null？

> ID：13130606
> 
> 赞同：0
> 
> 时间：2012-10-29T22:30:51.600
> 
> 标签：objective-c, ios

在AS3中，我经常会做这样的事情

```
if(myObject != null)
{
  //if we get here then myObject is ready to go

}
else
{
  //myObject = null so we need to set it up
} 
```

在 Obj-c 中，我了解您初始化这样的对象...

```
myObject = [[NSObject alloc] init]; 
```

但是我将如何在 obj-c 中进行类似的检查，就像我在 AS3 中所做的那样，和/或这是最好的方法吗？是否应该有另一种方法来知道对象是否已经初始化以及是否尚未设置？

所以当我完成了 AS3 中的对象时，我只需要做

```
myObject = null; 
```

并且代码知道在下次涉及该条件代码时进行设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:33:59.870

你也这样做。Objective-C 中的空指针是`nil`.

```
if (myObject != nil) {
   // do something
} else {
   // do something else 
} 
```

Objective-C 还可以将任何对象视为布尔值（如果对象为`nil`(0)，则布尔值将为假），因此您也可以省略`nil`：

```
if (myObject) {
    // do something
} else {
    // do something else 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:34:02.490

`nil`在 Objective-C 中使用。

```
if (myObject != nil) {
} 
```

甚至更简单：

```
if (myObject) {
} 
```

# c# - 创建 wcf 客户端帮助

> ID：13130609
> 
> 赞同：0
> 
> 时间：2012-10-29T22:31:01.853
> 
> 标签：c#, wcf, soap, service-reference, wcfserviceclient

我目前正在开发一个 WCF 客户端来与一组 WCF 服务引用进行交互。我正在用 c# 开发。

我不想遵循必须使用 svc util 生成服务引用或手动将服务引用添加到我的类库的方法。

我还有其他选择吗？我正在考虑在 ServiceModel 库中使用 ServiceClient 类。

不过，我有点困惑，例如与端点相关的请求和响应对象，它们是在哪里创建的或如何创建的？在之前的项目中，我使用了 T4 映射和 DTO，但我觉得这些都太过分了。我确实喜欢我可以在不同的服务端点之间共享同一个对象。我的目标是创建一个通过自定义编写代理进行通信的自定义客户端对象。我想对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:06:54.180

要与 WCF 服务（端点）通信，您需要知道三件事 (ABC)：端点的*地址*、它使用的*绑定以及通信中使用的**协定*。如果您拥有所有这三样东西，则无需使用任何工具与服务进行交互。

地址只是端点的 URI。绑定由抽象`System.ServiceModel.Channels.Binding`类的一个实例表示（例如`System.ServiceModel.BasicHttpBinding`，`System.ServiceModel.WSHttpBinding`等等）。而合约通常由一个用`[ServiceContract]`属性修饰的接口来表示。如果您拥有所有这三个，则可以使用`ChannelFactory<T>`该类创建自定义代理，如下所示。

```
public static void TalkToService(Binding binding, Uri endpointAddress) {
    // Assuming that the service contract interface is represented by ICalculator
    var factory = new ChannelFactory<ICalculator>(binding, new EndpointAddress(endpointAddress));
    ICalculator proxy = factory.CreateChannel();
    Console.WriteLine(proxy.Multiply(45, 56));
} 
```

# objective-c - ControlTextDidChange 不适用于设置 NSTextField 的字符串

> ID：13130613
> 
> 赞同：1
> 
> 时间：2012-10-29T22:31:20.557
> 
> 标签：objective-c, cocoa, nstextfield, nscontrol

我正在尝试找到一种方法来监视 NSTextField 的文本以进行更改。我尝试了委托方法，`-(void)controlTextDidChange:(NSNotification *)obj`但它仅在用户输入文本字段时才有效。如果文本字段字符串以编程方式设置，例如使用按钮，则`controlTextDidChange`不起作用。

是否有一种方法或另一种方法可以用来监视 NSTextField 的内容以进行更改？

我的 ButtonText 类（设置为 NSTextField 的委托）：

```
#import "ButtonText.h"

@interface ButtonText ()

@property (weak) IBOutlet NSTextField *buttonField;

@end

@implementation ButtonText

- (IBAction)buttonTextA:(id)sender {
    [_buttonField setStringValue:@"text A here"];
}

- (IBAction)buttonTextB:(id)sender {
    [_buttonField setStringValue:@"and text B stuff"];
}

- (void)controlTextDidChange:(NSNotification *)obj {
    NSLog(@"controlTextDidChange: %@", _buttonField.stringValue);
}

@end 
```

显示按钮和文本字段的 XIB： ![在此处输入图像描述](../Images/3fb18fe8bf876545ea5f8b458598cd44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:08:49.120

一种方法是使用 KVO。特别是，将实例添加为's`ButtonText`的观察者。`buttonField``stringValue`

更详细地说，在您的文件中，`ButtonText`一旦`@property IBOutlet buttonField`设置`ButtonText`了`NSWindowController``-windowDidLoad``ButtonText``NSViewController``-loadView`

```
[self.buttonField addObserver:self
                   forKeyPath:@"stringValue"
                      options:0
                      context:&ButtonTextKVOContext]; 
```

之前在文件中定义`ButtonTextKVOContext`如下：

```
static int ButtonTextKVOContext = 0; 
```

然后覆盖`observeValueForKeyPath:ofObject:change:context:`如下：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context != &ButtonTextKVOContext) {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
        return;
    }

    if (object == self.buttonField) {
        if ([keyPath isEqualToString:@"stringValue"]) {
            NSLog(@"controlTextDidChange: %@", _buttonField.stringValue);
        }
    }
} 
```

### 编辑

由于`ButtonText`不是 or 的子类`NSWindowController`，`NSViewController`我们将使用稍微不同的方法。和以前一样，我们希望“一旦`@property IBOutlet buttonField`设置”就开始观察。为此，将属性合成为`buttonField`成员变量`mButtonField`写入

```
@synthesize buttonField = mButtonField; 
```

并覆盖`buttonField`的设置器如下：

```
- (void)setButtonField:(NSTextField *)buttonField
{
    [self stopObservingButtonField];
    mButtonField = buttonField;
    [self startObservingButtonField];
} 
```

我们需要确保`ButtonText`在释放时也停止观察按钮字段，因此覆盖`-dealloc`如下：

```
- (void)dealloc
{
    [self stopObservingButtonField];
} 
```

仍然需要定义方法`-stopObservingButtonField`和`-startObservingButtonField`：

```
- (void)stopObservingButtonField
{
    if (mButtonField) {
        [mButtonField removeObserver:self
                          forKeyPath:@"stringValue"
                             context:&ButtonTextKVOContext];
    }
}

- (void)startObservingButtonField
{
    if (mButtonField) {
        [self.buttonField addObserver:self
                           forKeyPath:@"stringValue"
                              options:0
                              context:&ButtonTextKVOContext];
    }
} 
```

由于这种安排，我们绝不能`mButtonField`在方法之外设置变量`-setButtonField:`。（这并不完全正确，但是如果我们确实设置`mButtonField`了，我们必须确保首先停止观察其旧值的`@"stringValue"`键路径并开始观察其新值的 @"stringValue" 键路径。这样做而不是简单地调用`-setButtonField:`很可能只是构成代码重复，不值得。）

作为参考，请查看 Apple关于[协议的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)[文档`NSKeyValueObserving`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:38:35.887

如果您的目标是使用绑定，那么您可以覆盖已绑定到文本字段值的属性的 setter 方法，并在那里执行您想要执行的任何监视。因此，例如，您有一个文本字段，其值绑定到属性 myText，然后您可以执行以下操作：

```
-(void)setMyText:(NSString *) newValue {
    _myText= newValue;
    // do monitoring here
} 
```

只要用户在文本字段中键入或更改代码中的值，只要通过属性而不是直接访问 ivar，就应该调用此方法。

# actionscript-3 - As3 内存泄漏？- 如何从内存中垃圾收集新的 as3 声音对象？

> ID：13130614
> 
> 赞同：0
> 
> 时间：2012-10-29T22:31:22.323
> 
> 标签：actionscript-3, memory-management, memory-leaks, garbage-collection, audio

看起来只是简单地新建一个 as3 声音对象，并将其引用设置回 null 会造成内存泄漏，无论它是否已用于在其上播放 SoundChannel。

例如，使用下一个文本代码：

```
package 
{
    import flash.display.*;
    import flash.events.*;
    import flash.media.*;
    import flash.system.*;
    import flash.utils.*;
    import flash.system.*;

    public class Main extends Sprite 
    {
        [Embed(source = "../data/SongScene8.mp3")] protected var SongScene8:Class;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            System.gc();
            trace("Before");
            trace(System.totalMemory);
            trace("_________________")

            var sound:Sound = new SongScene8();
            System.gc();
            trace("After new");
            trace(System.totalMemory);
            trace("_________________")

            sound = null;
            System.gc();
            trace("After null");
            trace(System.totalMemory);
        }
    }

} 
```

输出是：

之前 3461120

* * *

后新3604480

* * *

空后 3604480

即使 gc 运行一千次，最后一个值仍然存在。

因此，无论是否播放声道，看起来声音对象都无法从内存中删除。

请说我错了，并告诉我为什么。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T22:55:54.523

试着给它一点呼吸的时间，记忆可能不会立即释放。

```
sound = null;
System.gc();

trace('After null');
trace('Instantly: ' + System.totalMemory);
setTimeout(function():void
{
    trace('2 seconds later: ' + System.totalMemory);
}, 
2000); 
```

另请注意，它[`System.gc`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/System.html#gc%28%29)仅适用于 AIR 和 Flash Player 的调试器版本！

根据[gskinner 的一篇旧文章](http://gskinner.com/blog/archives/2006/08/as3_resource_ma_2.html)，有一个技巧可以强制立即释放，调用[`LocalConnection.connect`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html#close%28%29)两次。不确定这有多可靠，但快速测试表明它似乎有效：

```
sound = null;

try {
    new LocalConnection().connect('foo');
    new LocalConnection().connect('foo');
} catch (e:*) {}

trace('After null');
trace('Instantly: ' + System.totalMemory); 
```

# graphviz - 如何允许节点间隔开以缩短 GraphViz 中的边？

> ID：13130615
> 
> 赞同：0
> 
> 时间：2012-10-29T22:31:24.887
> 
> 标签：graphviz

我有一个有 4 个等级的有向图。我附上截图。非常缩小，但传达了这个想法。

我想要的是允许第二个等级垂直间隔，以便等级 2 和 3 之间的线更接近水平。那些长长的队伍很难跟上！我想我要问的是“我如何优先考虑缩短边缘长度而不是保持相同等级的节点靠近在一起？”。

我会包括源代码，但它非常简单。相关位：

```
digraph tags { rankdir=RL; overlap=false; splines=false; 
```

![在此处输入图像描述](../Images/77e70d4f0067a0b1e23f8b136bc68c3e.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T13:19:13.450

您可以增加等级 2 和 3 之间的边的权重，以强制这些边更短。通过减少等级 1 到 2 边的相应权重来帮助求解器。

再看一遍，我发现您在 1 级和 2 级的项目周围有一个集群。这使得它们尽可能地靠近在一起。移除集群将允许更轻松的布局并有助于外观。如果您需要集群，您可以在组之间放置不可见的节点以强制它们更加分散，但是您将失去未来布局的灵活性，因为隐藏的节点可能会导致布局发生意外更改。

# c# - 无法在 app.config 上写入设置（或未显示更改）

> ID：13130620
> 
> 赞同：4
> 
> 时间：2012-10-29T22:32:08.553
> 
> 标签：c#, .net, winforms, .net-4.5

我正在.net framework 4.5 上创建一个应用程序

每当我想加载应用程序配置值（appSettings 部分）并写入更改时，如果我刷新该部分，我就看不到我的更改。我做错了什么？我该如何解决？

代码

```
 private void LoadConfig()
    {
        NameValueCollection appSettings = ConfigurationManager.AppSettings;
        for (int i = 0; i < appSettings.Count; i++)
        {
            switch (appSettings.GetKey(i))
            {
                case "initialCatalog":
                    txtInitialCatalog.Text = appSettings.GetValues(i)[0];
                    break;
                case "dataSource":
                    txtDatasource.Text = appSettings.GetValues(i)[0];
                    break;
                case "userName":
                    txtUsername.Text = appSettings.GetValues(i)[0];
                    break;
                case "password":
                    txtPassword.Text = appSettings.GetValues(i)[0];
                    break;
                case "portalUrl":
                    txtUrl.Text = appSettings.GetValues(i)[0];
                    break;
            }
        }
    }

    private void SaveConfig()
    {
        System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        KeyValueConfigurationCollection appSettings = config.AppSettings.Settings;
        appSettings["initialCatalog"].Value = txtInitialCatalog.Text;
        appSettings["dataSource"].Value = txtDatasource.Text;
        appSettings["userName"].Value = txtUsername.Text;
        appSettings["password"].Value = txtPassword.Text;
        appSettings["portalUrl"].Value = txtUrl.Text;
        config.Save(ConfigurationSaveMode.Modified);
        ConfigurationManager.RefreshSection("appSettings");
    } 
```

App.config 文件

```
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <appSettings>
    <add key="initialCatalog" value="a" />
    <add key="dataSource" value="b" />
    <add key="password" value="c" />
    <add key="userName" value="d" />
    <add key="portalUrl" value="e" />
    <add key="poolingTime" value="60000" />
    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings> 
```

我在表单被激活时调用 ReadConfig() 并在按下按钮时保存数据（确定或应用）我关闭应用程序我重新运行它但对 app.config 文件没有任何更改

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T05:14:51.240

我认为正在发生的事情是您正在 Visual Studio 中进行测试，它将 App.Config 复制到您的 Debug/Release 目录并将其重命名为 YourApplication.vshost.exe.config ，每次启动应用程序时都会重置。尝试在 Visual Studio 之外运行将使用 YourApplication.exe.config 文件的可执行文件，看看它是否适合您。如果我在 Visual Studio 之外运行，您的代码对我有用，并在应用程序重新启动时保留您的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:46:35.357

通常，我这样做：

```
 ...
 config.AppSettings.Settings.Remove("TextBoxNumber");
 config.AppSettings.Settings.Add("TextBoxNumber", ""); 
```

它工作正常。我想这是因为您的密钥之一尚未在 app.config 中。您需要删除/添加它（如上面的代码），或者首先在 app.config 中创建密钥。

===================== 更新

尝试这个：

```
 config.AppSettings.Settings["initialCatalog"].Value = txtInitialCatalog.Text; 
```

代替

```
 appSettings["initialCatalog"].Value = txtInitialCatalog.Text; 
```

有什么区别吗？

# php - SQL查询到phpmyadmin - 语法错误

> ID：13130622
> 
> 赞同：0
> 
> 时间：2012-10-29T22:32:13.400
> 
> 标签：php, mysql

我正在尝试为用户注册创建电子邮件验证。

我正在按照分步说明进行操作，但我陷入了应该很简单的事情。

我应该使用 MySql 查询将以下内容插入数据库：

```
mysql_query("INSERT INTO users (username, password, email, hash) VALUES(
'". mysql_escape_string($name) ."',
'". mysql_escape_string(md5($password)) ."',
'". mysql_escape_string($email) ."',
'". mysql_escape_string($hash) ."') ") or die(mysql_error()); 
```

我正在使用 WAMP 服务器。我去我的数据库，选择表，在选择 SQL 选项卡后插入上面的内容，单击 go 并得到响应：

> "#1064 - 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，了解在 'mysql_query("INSERT INTO users (username, password, email, hash) VALUES('" .m' 在第 1 行"

我似乎永远无法将查询插入到 phpMyAdmin 数据库中而不会出现某种错误。我希望有人能对此有所了解，让我有一个外部的看法。

不用说，我将不胜感激任何意见。我对此并不陌生，而且不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:33:57.293

您不能在 SQL 中使用 PHP 函数。改为运行 PHP 代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:48:41.343

正如 Prash 所说，`mysql_query`它们`mysql_escape_string`的名字旁边是 php 函数。粘贴到 phpMyAdmin 的 SQL 选项卡时，您应该删除代表 PHP 对 MySQL db 的调用的 mysql_query()，并将 mysql_escape_string 调用转换为变量的计算值 ($...)。它应该给你类似的东西：

```
INSERT INTO users (username, password, email, hash) VALUES(
'SampleName',
md5('SamplePassword'),
'SampleEmail@example.com',
'SampleHash') 
```

如果值中有特殊字符，则需要自行转义）

# wordpress - 提交新查询后如何刷新分页链接？

> ID：13130627
> 
> 赞同：0
> 
> 时间：2012-10-29T22:32:30.143
> 
> 标签：wordpress, pagination

我修改了博客文章的 WordPress 主循环，使其根据提交的过滤器查询和循环不同类型的文章。

在 HTML 的开头，有一个带有几个按钮的表单作为选项，它类似于 SA 站点菜单：问题标签用户徽章未回答。

当访问者单击其中一个菜单按钮时，将提交一个新的 WP_Query。

选项下方是帖子循环，取决于提交的过滤器。

php 代码基本上是具有自定义功能的标准 wordpress 循环：

```
 $args= !empty($_POST['filter']) ? $_POST['filter']:null;
    get_option_nav();
    if( my_loop_have_posts(array('filter'=>$args))):
    while my_loop_posts(): the_my_loop_post();
    get_template_part('contents');
    endwhile;
    endif; 
```

一切正常，除了只有默认过滤器获得正确的分页链接。提交新过滤器后，当点击分页链接时，它会转到默认过滤器的页面。如何修改 wordpress 分页链接以使其适用于其他过滤器？

这是我用于查询参数的代码：

```
function get_args($args){
$defaults= array( 
    'order' => 'DESC', 
    'orderby' => 'modified', 
    'max_num_pages' =>5, 
    'paged' => get_paged (), 
    'post_status' => 'any', 
    'post_type' => array ('post', 'docs','topics'),
    'posts_per_page' => 5,
   )
$args = wp_parse_args ( $args, $defaults );
extract ( $args );
if(!empty($args['filter'])){
   switch ($args['filter']){
      case 'top_voted':
         $args['post_type'] = 'docs';
         $args['meta_key'] = '_vote_total';
         $args['order'] = 'DESC';
         $args['orderby']='meta_value_num';
       break;
      case 'unanswered_questions':
         $args['post_type] = 'topics';
         $args['blabla'] = 'blabla';
      break;
      default:
          blabla;
       break;
}
return $args;
} 
```

和分页的代码：

```
function get_paged() {
    global $wp_query;
    if ( get_query_var( 'paged' ) ) {
        $paged = get_query_var( 'paged' );

    } elseif ( ! empty( $wp_query->query['paged'] ) ) {
        $paged = $wp_query->query['paged'];
    }

    if ( ! empty( $paged ) )
        return (int) $paged;

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:54:56.117

当您进行自定义查询时，您需要显式调用查询的每个参数。因此，标准的消失了，分页的情况也是如此。

根据您进行此新查询的方式，您可以尝试：

*   在 $query_string 开头连接，例如 `$query = new WP_Query( $query_string . 'order=DESC' )`在 Codex 中解释：

> 如果要保留用于生成当前查询的原始查询参数信息，然后添加或覆盖某些参数，可以在对 query_posts() 的调用中使用 $query_string 全局变量。

*   从默认查询中获取分页并在您的自定义查询中使用它 `$paged = get_query_var('paged'); $query = new WP_Query( array( 'paged' => $paged ) );`

在您的情况下，您的 get_paged() 函数有问题。我已经测试了它，它不起作用，但我还没有发现错误。相反，我尝试了我通常使用的方法，它对我有用：

```
function get_paged() {
    if ( get_query_var('paged') ) {
        $paged = get_query_var('paged');
                } elseif ( get_query_var('page') ) { $paged = get_query_var('page');
                } else { $paged = 1; }
        return $paged;
    } 
```

else if 语句似乎在你身上失败了。让我知道这是否解决了您的问题。

# android - 传入蓝牙请求的对话框

> ID：13130629
> 
> 赞同：0
> 
> 时间：2012-10-29T22:32:33.160
> 
> 标签：android, bluetooth, request, handler

在我的应用程序中，两个设备通过蓝牙连接。在后台运行一个自己的蓝牙连接线程。（就像[示例](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingAsAServer)一样）当一个设备想要连接到另一台设备时，我希望在第二台设备上显示一个请求对话框。所以我想我必须修改AcceptThread。AcceptThread 必须通知我的 mainThread（例如使用处理程序）。

在 AcceptThread 我找到了这段代码：

```
 // This is a blocking call and will only return on a
                // successful connection or an exception
                socket = mmServerSocket.accept(); 
```

现在这是我的问题：这个“阻塞呼叫”一直在运行。我应该如何以及何时通知我的 mainThread 另一个设备想要连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:59:30.150

以后肯定。您想要的是*.accept()*的阻塞调用的结果。那是您代码中的*套接字*。

这是来自 Android BluetoothServerSocket 文档的引用：

> 然后调用accept() 来监听传入的连接请求。此调用将阻塞，直到建立连接，此时，它将返回一个 BluetoothSocket 来管理连接。获取 BluetoothSocket 后，当不再需要接收连接时，最好在 BluetoothServerSocket 上调用 close()。关闭 BluetoothServerSocket 不会关闭返回的 BluetoothSocket。

所以不要忘记做：

```
 mmServerSocket.close() 
```

在您正确接收到一个套接字（实际上是一个[BluetoothSocket](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)）之后，您可以根据用户的选择来选择如何处理它：

*   如果他继续，您只需创建从套接字读取的 AsyncTask，直到 AsyncTask 被取消或发生异常（可能在蓝牙断开连接时）。
*   如果他拒绝，只需取消套接字

如果您在阻塞呼叫期间收到异常，我将只返回主菜单敬酒，说某事失败。但是你可以做一个对话（比如重试？）

# arrays - 需要帮助在一个动态文本框中显示多个输入文本组件

> ID：13130632
> 
> 赞同：0
> 
> 时间：2012-10-29T22:32:45.030
> 
> 标签：arrays, actionscript-3, flash-cs5, textinput, dynamic-text

我在第 1 帧上有 3 个 InputText 框和一个提交按钮。单击提交时，我在第 2 帧上有一个动态文本框，上面有一个按钮，上面写着“下一步”。

当单击第 2 帧上的“下一步”按钮时，我需要第 2 帧上的动态文本框一个接一个地显示在第 1 帧的 inputText 框中输入的任何内容。

我不知道我是否必须对数组或类似的东西做任何事情，我对此很陌生，所以任何帮助将不胜感激。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:00:32.230

在一个框架上而不是两个框架上..例如：

```
nextBtn.addEventListener(MouseEvent.CLICK, verifyInfo);

function verifyInfo(e:MouseEvent):void
{
    field1.visible = false;
    field2.visible = false;
    field3.visible = false;
    myDynamicTextField.text = field1.text + '\n' + field2.text + '\n' + field3.text; // \n is just a new line
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:45:36.650

//第1帧编码......

```
submitButton1.addEventListener(MouseEvent.CLICK,onSumbitBtnClick);

function onSumbitBtnClick(event:MouseEvent):void
{

gotoAndStop(2);

} 
```

//第2帧编码......

```
var txt1:String = MovieClip(root).inputText1.text + "\n";

var txt2:String = MovieClip(root).inputText2.text + "\n";

var txt3:String = MovieClip(root).inputText3.text;

myDynamicTextField.text = txt1 + txt2 + txt3; 
```

# python - 使用 PyLZMA 和 py7zlib 将文件夹递归压缩为 7z

> ID：13130634
> 
> 赞同：1
> 
> 时间：2012-10-29T22:32:54.630
> 
> 标签：python, compression, 7zip, lzma

经过反复试验，我已经弄清楚了如何通过 PyLZMA 制作 lzma 压缩文件，但我想复制看似简单的任务，即递归地压缩文件夹及其所有文件/目录到 7z 文件。我只会通过 7z.exe 来完成，但在完成之前我似乎无法捕捉到进程的标准输出，我想要一些每个 7z 文件的进度，因为我将压缩范围从数百个的文件夹超过 1 TB 的演出。不幸的是，我无法提供我尝试过的任何代码，仅仅是因为我看到的使用 py7zlib 的唯一示例是从预先存在的文件中提取文件。有没有人对这两者的结合有任何运气或可以提供一些帮助？

对于它的价值，这将在使用 python 2.7 的 Windows 上。如果这里可能发生一些神奇的多线程，特别是考虑到 lzma 压缩似乎有多慢（然而，时间在这里不是问题），则可以加分。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T00:14:09.527

`.tar.xz`一个纯 Python 替代方案是使用标准库[`tarfile`](http://docs.python.org/2/library/tarfile.html)模块和[`liblzma`](http://tukaani.org/xz/)包装器模块的组合来创建文件[`pyliblzma`](http://pypi.python.org/pypi/pyliblzma)。这将创建与`.7z`档案大小相当的文件：

```
import tarfile
import lzma

TAR_XZ_FILENAME = 'archive.tar.xz'
DIRECTORY_NAME = '/usr/share/doc/'

xz_file = lzma.LZMAFile(TAR_XZ_FILENAME, mode='w')

with tarfile.open(mode='w', fileobj=xz_file) as tar_xz_file:
    tar_xz_file.add(DIRECTORY_NAME)

xz_file.close() 
```

棘手的部分是进度报告。上面的示例对类的目录使用递归模式[`tarfile.TarFile`](http://docs.python.org/2/library/tarfile.html#tarfile-objects)，因此在[`add`](http://docs.python.org/2/library/tarfile.html#tarfile.TarFile.add)添加整个目录之前，该方法不会返回。

以下问题讨论了监控 tar 文件创建进度的可能策略：

*   [Python tarfile进度输出？](https://stackoverflow.com/questions/3667865/python-tarfile-progress-output)
*   [Python tarfile 进度](https://stackoverflow.com/questions/4718588/python-tarfile-progress)

# actionscript-3 - (AS3) 功能

> ID：13130636
> 
> 赞同：0
> 
> 时间：2012-10-29T22:33:00.383
> 
> 标签：actionscript-3

通过遵循 MJW 的调试错误 #1009 指南，我设法修复了整个空阶段错误。但是现在初始化子弹的函数没有被调用。

片段：

```
if (stage) {
 init();
} else {
addEventListener(Event.ADDED_TO_STAGE, init);               
} 
```

...

```
private function init(event:Event = null) {

    removeEventListener(Event.ADDED_TO_STAGE, init);
    stage.addEventListener(Event.ENTER_FRAME, shoot);

} 
```

...

```
private function shoot(event:Event) {

    var bullet:EnemyBullet = new EnemyBullet();

    stage.addChild(bullet);

    bullet.x = enemy.x;
    bullet.y = enemy.y;

    bullet.theta = Math.random() * 360;

    bManager.bulletVector.push(bullet);

} 
```

请注意，当我将 trace() 放在后两个函数中时，什么也没有发生，但是第一个片段中的 addEventListener() 确实被调用了（或者我认为如此）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:26:20.160

作为一般做法，`stage` [不应引用](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#addChild%28%29)- 特别是在您的情况下，您的引用仅用于添加子弹类的实例。如果是 z-index 的问题，则可以改为使用一个层，其中项目符号放置在显示列表中其他显示对象的顶部。

除了在单个阶段加载多个 SWF 的复杂性之外，通过将显示对象添加到它们自己的显示列表层次结构中，您的代码将成为很好的独立功能单元。或者，您可以利用控制器操纵视图的 MVC 模式。

为了使您的代码正常工作，该类必须是 SWF 的主要功能或添加到舞台。

如果它是 SWF 的主要函数，`init()`将被调用。

否则，请确保它通过`addChild()`.

你真的打算每帧发射一颗子弹吗？那可能是每秒 24 到 60 发子弹。您可能希望以一定的概率限制它是否带火子弹。

假设这是一个战场，并且你的战场类被添加到阶段，它可以这样实现：

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    [SWF(percentWidth = 100, percentHeight = 100, backgroundColor = 0x0, frameRate = 30)]
    public class Battlefield extends Sprite
    {
        public function Battlefield()
        {
            if (stage)
                init();
            else
                addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
        }

        protected function addedToStageHandler(event:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
            init();
        }
        protected function init():void
        {
            addEventListener(Event.ENTER_FRAME, frameHandler);
        }

        protected function frameHandler(event:Event):void
        {
            var odds:Number = Math.random();

            trace((odds < 0.1 ? "Fire!   " : "Skip...") + "Odds were: " + odds);
        }

    }
} 
```

这将输出：

```
Skip... Odds were: 0.3539872486144304
Skip... Odds were: 0.742108017206192
Fire!   Odds were: 0.025597115512937307
Skip... Odds were: 0.7608889108523726
Fire!   Odds were: 0.08514392375946045 
Skip... Odds were: 0.27881692815572023 
```

除了 Stage3D，我从不喜欢这种初始化模式，因为您可以轻松地依赖舞台事件，如下所示：

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    [SWF(percentWidth = 100, percentHeight = 100, backgroundColor = 0x0, frameRate = 30)]
    public class Battlefield extends Sprite
    {
        public function Battlefield()
        {
            addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
        }

        protected function addedToStageHandler(event:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
            addEventListener(Event.REMOVED_FROM_STAGE, removedFromStageHandler);

            addEventListener(Event.ENTER_FRAME, frameHandler);
        }

        protected function removedFromStageHandler(event:Event):void
        {
            removeEventListener(Event.ENTER_FRAME, frameHandler);

            removeEventListener(Event.REMOVED_FROM_STAGE, removedFromStageHandler);
            addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
        }

        protected function frameHandler(event:Event):void
        {
            var odds:Number = Math.random();

            trace((odds < 0.1 ? "Fire!   " : "Skip...") + "Odds were: " + odds);
        }

    }
} 
```

因此，在添加到阶段时，该类启动其操作，并且在从阶段移除时，该类终止其操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:04:07.967

我认为问题出在第一块。

您正在检查阶段，如果阶段不为空，则使用添加到阶段的侦听器。

你应该只使用`addEventListener(Event.ADDED_TO_STAGE, init);`

但是，这是假设该类是 DisplayObject 子类，未添加到舞台的对象无法调用 ADDED_TO_STAGE 侦听器

# c# - Unity - 为同一个接口注入不同的类

> ID：13130637
> 
> 赞同：14
> 
> 时间：2012-10-29T22:33:03.303
> 
> 标签：c#, inversion-of-control, unity-container

我有一个接口：`IFoo`
两个实现该接口的类：`FooOne`和`FooTwo`
两个类`ClassOne`并在构造函数中`ClassTwo`接收一个`IFoo`参数。

我如何配置统一以便`ClassOne`接收一个`FooOne`实例并仅使用一个容器`ClassTwo`接收一个？`FooTwo`

我不能在运行时这样做，所以它必须在配置文件中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-30T10:00:20.300

查看[Unity 文档](http://msdn.microsoft.com/en-us/library/ff660935%28v=pandp.20%29.aspx)。

要获得更易读的配置文件，您应该为、 、 和`IFoo`定义`FooOne`类型`FooTwo`别名。然后你需要注册映射到你的实现。您需要为映射设置一个。对于您的消费者，您需要注册一个.`ClassOne``ClassTwo``IFoo``name``IFoo``InjectionConstructor`

您的配置将如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection,
      Microsoft.Practices.Unity.Configuration"/>
  </configSections>
  <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <alias alias="IFoo" type="UnityConfigFile.IFoo, UnityConfigFile" />
    <alias alias="FooOne" type="UnityConfigFile.FooOne, UnityConfigFile" />
    <alias alias="FooTwo" type="UnityConfigFile.FooTwo, UnityConfigFile" />
    <alias alias="ClassOne" type="UnityConfigFile.ClassOne, UnityConfigFile" />
    <alias alias="ClassTwo" type="UnityConfigFile.ClassTwo, UnityConfigFile" />
    <container>
      <register type="IFoo" name="1" mapTo="FooOne" />
      <register type="IFoo" name="2" mapTo="FooTwo" />
      <register type="ClassOne" mapTo="ClassOne">
        <constructor>
          <param name="foo">
            <dependency type="IFoo" name="1" />
          </param>
        </constructor>
      </register>
      <register type="ClassTwo" mapTo="ClassTwo">
        <constructor>
          <param name="foo">
            <dependency type="IFoo" name="2" />
          </param>
        </constructor>
      </register>
    </container>
  </unity>
</configuration> 
```

这是显示它如何工作的相应测试。

```
UnityConfigurationSection config =
  (UnityConfigurationSection) ConfigurationManager.GetSection("unity");
IUnityContainer container = new UnityContainer();
container.LoadConfiguration(config);
ClassTwo two = container.Resolve<ClassTwo>();
Assert.IsInstanceOfType(two.Foo, typeof(FooTwo)); 
```

* * *

**更新**

在运行时你可以这样做

```
IUnityContainer container = new UnityContainer();
container.RegisterType<IFoo, FooOne>("One");
container.RegisterType<IFoo, FooTwo>("Two");
container.RegisterType<ClassOne>(new InjectionConstructor(
  new ResolvedParameter<IFoo>("One")));
container.RegisterType<ClassTwo>(new InjectionConstructor(
  new ResolvedParameter<IFoo>("Two"))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T22:36:09.243

您需要为他们提供注册名称才能执行此操作：

```
// Create an instance of a service you want to use. Alternatively, this
// may have been created by another process and passed to your application
LoggingService myLoggingService = new LoggingService();

// Register the existing object instance with the container
container.RegisterInstance<IMyService>("Logging", myLoggingService);

// Register a mapping for another service your application will use
container.RegisterType<IMyService, myDataService>("DataService");

// When required, retrieve an instance of these services
IMyService theDataService = container.Resolve<IMyService>("DataService");
IMyService theLoggingService = container.Resolve<IMyService>("Logging"); 
```

取自[使用 Unity 解析类型的实例](http://msdn.microsoft.com/en-us/library/ff664762%28v=pandp.50%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T16:29:53.257

我像这样在我的应用程序中设置

已安装 Nuget 包 Unity 版本 4.0.1

```
<package id="Unity" version="4.0.1" targetFramework="net452" /> 
```

在我的 App.config

```
<configSections>
     <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
</configSections>

<unity>
    <container>
        <register type="MyApp.MainWindow, MyApp">
            <lifetime type="singleton" />
        </register>
        <register name="UnityResolver" type="MyApp.Core.Interface.IResolver, MyApp.Core.Interface" mapTo="Avelyn.Core.Container.UnityResolver, Avelyn.Core" />
        <register name="NinjectResolver" type="MyApp.Core.Interface.IResolver, MyApp.Core.Interface" mapTo="Avelyn.Core.Container.NinjectResolver, Avelyn.Core" />
    </container>
</unity> 
```

在我的 App.xaml.cs 中

```
var _container = new UnityContainer();
_container.LoadConfiguration();

IResolver _unityResolver = _container.Resolve<IResolver>("UnityResolver");
IResolver _ninject  = _container.Resolve<IResolver>("NinjectResolver");
MainWindow _win = _container.Resolve<MainWindow>(); 
```

# sharepoint-2010 - 以编程方式修改 SharePoint 项目级别权限的更好方法是什么？

> ID：13130638
> 
> 赞同：0
> 
> 时间：2012-10-29T22:33:13.237
> 
> 标签：sharepoint-2010

在我的自定义应用程序中，我正在以编程方式创建列表文档，现在我想修改新创建的项目安全性。例如，当项目创建时只有当前用户和一些管理员将在项目级别权限。我的问题是我应该在我当前的模块中添加代码（它不在事件接收器中运行）还是我需要为相同的模块添加单独的事件接收器（比如 Itemadded ）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:39:32.437

你是如何创建文档的？

您以编程方式说，对我来说，这听起来像是您正在运行创建新`SPListItem`through的 .net 代码[`someList.AddItem()`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splist.additem.aspx)，在这种情况下，您可以使用[`item.BreakRoleInheritance(false)`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.breakroleinheritance.aspx)and设置权限[`item.RoleAssignments`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurableobject.roleassignments.aspx)。

# python - 如何使用 Python 应用程序打包依赖项？

> ID：13130653
> 
> 赞同：1
> 
> 时间：2012-10-29T22:34:16.527
> 
> 标签：python, dependencies, setuptools

我有一个使用标准 setup.py 分发的 Python 应用程序。我也需要打包依赖项，因为我分发的受众没有网络访问权限。我已经从 PyPi 下载了这些软件包，但是被困在了放置它们的位置，所以当有人执行“python setup.py install”时，它们会被安装。

有任何想法吗？

**编辑：**忘了提，我试图在 Unix 平台上实现这一点，而不使用其他工具，如 pip。

# c - 二项式定理 - C 中的算法

> ID：13130654
> 
> 赞同：2
> 
> 时间：2012-10-29T22:34:34.510
> 
> 标签：c, algorithm, math, binomial-coefficients, theorem

我试图在我的程序中找到一个解决方案（修复错误），它必须从定义中计算二项式定理。首先，我创建了“**阶乘**”-“silnia”的定义。

1) 算法确定定义的SN1(n,k)的值。（**牛顿**函数）

2) 算法通过公式递归确定SN3(n,k)的值。（**newton_rek**函数）。

**输入：** 文件名：In0101.txt

**OUTPUT：** 文件名：Out0101.txt 在这个文件中我想保存从公式计算出来的值。

**示例：** In0101.txt

```
8 2// n k 
```

Out0101.txt

```
n=8 k=2
SN1 = 28; count= 14 
```

还有一个我无法修复的错误。有人可以帮我吗？

**我的代码：**

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

long silnia(int a)
{
    long s;
    if (a == 0 || a == 1)
    {
        return 1;
    }
    else
    {
        s = 1;
        for (int i = 1; i <= a; i++)
        {
            s *= i;
        }
    }
    return s;
}

long newton(int n, int k)
{
    return silnia(n)/(silnia(k)*silnia(n-k));
}

unsigned long int newton_rek(long int n ,long int k)
{
    if ( n == k || k == 0 )
    {
        return 1;
    }

    if (k > n)
    {
        return 0;
    }

    else return newton_rek(n-1,k-1) + newton_rek(n-1,k);
}

int main()
{
    int n = 0;
    int k = 0;
    long funkcja1 = 0;
    long funkcja2 = 0;

    FILE *f = fopen("In0101.txt", "r+");    
    if (f == NULL)
    {
        printf("Nie udalo sie otworzyc pliku In0101.txt\n");
        return 1;
    }
    fread(n, sizeof(long), 1 , f);
    fread(k, sizeof(long), 1 , f);
    fclose(f);

    FILE *ff = fopen("Out0101.txt", "w+");    

    if (ff == NULL)
    {
        printf("Nie udalo sie otworzyc pliku Out0101.txt\n");
        return 1;
    }

    funkcja1 = newton(n,k);
    funkcja2 = newton_rek(n,k);
    fwrite(funkcja1, sizeof(long), 1 , ff);
    fwrite(funkcja2, sizeof(long), 1 , ff);
    fclose(f);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T23:16:26.257

您的计算都生成了帕斯卡三角形。我做了一个简短的测试：http: [//ideone.com/jHA8EJ](http://ideone.com/jHA8EJ)

我认为你的问题是你没有正确输出。您没有在问题中说明您遇到的问题，因此由于您缺乏描述，人们怀疑这是算法问题。

我相信问题实际上在这里：

```
fwrite(funkcja1, sizeof(long), 1 , ff);
fwrite(funkcja2, sizeof(long), 1 , ff); 
```

有两点不对：

1.  您没有获取正在编写的变量的地址。这可能会导致崩溃（也许您可能已经提到过）；
2.  您正在尝试将它们编写为二进制文件，但您似乎期待文本。

您应该将这些调用替换为以下内容：

```
fprintf( ff, "%d %d\n", funkcja1, funkcja2 ); 
```

正如 Daniel Fischer 指出的那样：

> 地址的东西也适用于读取输入文件（以及字节/文本表示的东西），此外 fread 得到错误的大小参数。

那是：

```
fread(n, sizeof(long), 1 , f);
fread(k, sizeof(long), 1 , f); 
```

同样的两个原则适用。您正在读取二进制值并且您做错了。相反，阅读文本：

```
int nvals = fscanf( f, "%d%d", &n, &k ); 
```

您应该测试它`nvals`是 2，这表明两个值都已成功读取。

# c++ - C++：是否可以有一个模板类来表示对资源的条件引用？

> ID：13130660
> 
> 赞同：1
> 
> 时间：2012-10-29T22:35:01.800
> 
> 标签：c++, memory-management, data-structures, unique-ptr

因此，有时我希望一个对象具有对共享资源的引用（比如说 type `A`），或者*拥有*自己的`A`.

此外，对象可能会发现自己插入并在容器 ( `vector`, `list`, `set`) 内进行操作。

到目前为止，我所知道的是，`unique_ptr`如果我有一个要在容器中的多态类型，我将想要使用一个实现。因此，对于`HasAnA`拥有 an 的类，`A`能够放置在容器内，同时仍然允许其`A`' 也是`B`'（`B`在这种情况下是 的派生类`A`），它必须是这样的：

```
class A {
  virtual void a() { std::cout << "A" << endl; }
  payloadA payload;
}; 
class B: public A {
  void a() { std::cout << "A(B)" << endl; }
  void b() { std::cout << "B" << endl; }
  payloadB payload;
};
class HasAnA {
  std::unique_ptr<A> my_A; // this allows me to build a std::vector<HasAnA>
  OtherStuff my_other_stuff;
}; 
```

所以这很好，我正在寻找的是如何实现一个我将调用的类`RefersAnA`。我希望 a`RefersAnA`要么拥有自己的 A 的所有权，要么引用其他东西拥有的 A。

让我们来看看。

```
class RefersAnA {
  std::unique_ptr<A> my_A; // represents my own A: when I die, this A is dealloc'd
  A* not_my_A;             // someone else's A. 
  OtherStuff my_other_stuff;
  RefersAnA () {
    // in here is code that would skip initializing my_A if a valid A* was provided.
  }
}; 
```

对我来说，这并不像我想要的那么友好。我可以制作某种模板类来抽象“作为资源的唯一 ptr 或资源的原始 ptr”的概念吗？它需要一位来说明它是两者中的哪一个，以及一个指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:37:51.750

这是一个想法：

```
struct RefersOrOwns
{
    std::unique_ptr<T> own;
    T & ref;

    RefersOrOwns() : own(new T), ref(*own) { }

    RefersOrOwns(T & t) : ref(t) { }
}; 
```

[（而不是`own(new T)`我当然更喜欢`own(make_unique<T>())`，但这是一个单独的问题。）]

# classloader - 在 Glassfish 3.1 上使用自定义处理程序获取 NoClassDefFoundError

> ID：13130662
> 
> 赞同：1
> 
> 时间：2012-10-29T22:35:05.950
> 
> 标签：classloader, glassfish-3, urlclassloader

## 问题

1.  我们的网络应用程序创建了一个`java.net.URL`将我们的自定义实现传递`URLStreamHandler`给构造函数。
2.  在该 URL 上，我们调用`url.openConnection()`.
3.  `java.net.URL`代码调用我们的`openConnection()`处理程序。
4.  在这一点上，我们得到了`NoClassDefFoundError`一个处理程序使用的类。

Glassfish 3.1 会发生这种情况，但 Tomcat、WebLogic 和 JBoss 不会发生这种情况。（此外，它曾经在旧版本的 Glassfish 上工作。）

## 我试过的

我尝试添加一个[`glassfish-web.xml`](http://docs.oracle.com/cd/E18930_01/html/821-2417/beaql.html)来告诉 Glassfish 首先从 Web 应用程序加载类（如预期的那样），但这并不能解决问题。

```
<glassfish-web-app>
    <class-loader delegate="false"/>
</glassfish-web-app> 
```

我该如何解决这个问题，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:51:04.043

GF 委托模型总是将 java.* 和 javax.* 委托给类加载器链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T02:08:48.183

A `NoClassDefFoundError` can be caused by the JVM not finding a class, but also to a failure of that [happened earlier in a static initializer](http://www.javacodegeeks.com/2012/07/javalangnoclassdeffounderror-how-to.html). The message for the `NoClassDefFoundError` was `Could not initialize class org.orbeon.oxf.resources.handler.HTTPURLConnection`, and there was indeed an error that happened earlier in the static initializer for that class. [Solving](http://wiki.orbeon.com/forms/doc/developer-guide/admin/installing#TOC-GlassFish-3.1) that error fixed the `NoClassDefFoundError`.

# c++ - 符号引用错误

> ID：13130665
> 
> 赞同：2
> 
> 时间：2012-10-29T22:35:30.037
> 
> 标签：c++, alpha-beta-pruning

我正在写一个关于 alpha-beta 修剪的项目。当我在 xcode 中运行它时，我得到符号引用错误：

```
 Undefined symbols for architecture x86_64:
  "Eval(Node*)", referenced from:
      AlphaBeta(int, int&, int, int, int, Node*) in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的一些代码：

```
struct Node
{
    char name[1];
    int empty;// YES or NO
    double  value;
};

int eval(Node ptr[]) {
 //some stuff   
}

int AlphaBeta (int player, int &bestMove, int alpha, int beta, int bsize, Node ptr[]) {
//some stuff, and then i call Evaluation function

int value = Eval(ptr);
//some stuff
}
int main (int argc, const char * argv[])
{

    int size  = 4;
    Node board[size*size];
// some stuff
    int score = AlphaBeta(RED, move, a, b, size, board);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:37:31.637

你有一个错字：

```
int eval(Node ptr[]) 
```

是函数的定义方式，但是你调用

```
Eval(ptr);
^
+- this was a lowercase 'e' in the definition! 
```

稍后 - 请记住 C 和 C++ 区分大小写。

# node.js - 在节点 js 中的 async.forEach 中返回值？

> ID：13130667
> 
> 赞同：5
> 
> 时间：2012-10-29T22:35:55.747
> 
> 标签：node.js, async.js

我开始学习 node.js，并将多个 rss 提要聚合到一个中，我正在获取提要，然后从我获取的数据中重新创建一个唯一的提要。

因此，为了异步处理多个 http 请求，我使用[https://github.com/caolan/async#forEach](https://github.com/caolan/async#forEach)来完成这项工作。

但我不知道如何返回一个值（在我的例子中是 rss xml 提要）。

这是我的代码：

```
function aggregate(topic) { 
  async.forEach(topic.feeds, 
    function(item, callback) {
      parseAndProcessFeed(item, callback);
    }, 
    function(err) {
      // sort items by date
      items.sort(function(a, b) {
       return (Date.parse(b.date) - Date.parse(a.name));
      });
      var rssFeed = createAggregatedFeed();
      console.log(rssFeed);
      return rssFeed;
    }
  );
} 
```

我可以看到`console.log(rssFeed)`rss 提要，所以我认为我遗漏了一些明显的东西。

我怎样才能返回`rssFeed`值？

一些帮助让我回到座位上会很棒，谢谢！

泽维尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T22:43:34.323

您不能从异步函数返回值。您需要将其传递给回调函数。像这样：

```
function aggregate(topic, callback) { 
  async.forEach(topic.feeds, 
    function(item, callback) {
      parseAndProcessFeed(item, callback);
    }, 
    function(err) {
      // sort items by date
      items.sort(function(a, b) {
       return (Date.parse(b.date) - Date.parse(a.name));
      });
      var rssFeed = createAggregatedFeed();
      callback(err, rssFeed);
    }
  );
}

aggregate(someTopic, function(err, result) {
    // here is result of aggregate
}); 
```

# javascript - 何时使用 requirejs 实例化单实例主干模型

> ID：13130671
> 
> 赞同：0
> 
> 时间：2012-10-29T22:36:13.063
> 
> 标签：javascript, backbone.js, requirejs

我正在使用 RequireJS 和主干，我想知道什么时候应该返回一个实例，什么时候应该返回一个类定义。

例如，我有一个模型`that I need only one instance of it`，我只需要一个实例。我应该在 RequireJS 模型模块中还是在 appView 初始化中实例化它？

```
 define([
        'Underscore',
        'Backbone'
    ], function(_, Backbone) {
        var TermModel = Backbone.Model.extend({
            defaults: {
                term: ''
            }
        });

return new TermModel(); //<-----------new OR not??
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:07:11.077

首先你应该在配置文件中添加下划线，检查这个以供参考[http://requirejs.org/docs/api.html#config](http://requirejs.org/docs/api.html#config)

其次，如果您只需要实例化这个模型一次，那么这很好。虽然请记住，您对实例化时间的控制较少，因此我不会推荐它。

# asp.net - ASP.NET 中的大数组支持

> ID：13130676
> 
> 赞同：3
> 
> 时间：2012-10-29T22:37:12.537
> 
> 标签：asp.net, iis, iis-7, large-object-heap

最近有了 4.5 .NET 支持，用户可以为一个对象分配超过 2 GB 的内存。为此，用户可以在 app.config 文件中将 gcAllowVeryLargeObjects 设置为 true，这样就可以正常工作了。

但是，我很难为 ASP.NET 找到此设置。我有一个网站，我需要测试我们的网站是否真的支持它。我知道 VS 内置服务器是一个 32 位进程。因此，它的用户不能简单地启动网站并针对大型阵列对其进行测试。

这甚至可以用 ASP.NET 实现吗？我正在使用 IIS7 来托管我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T17:08:46.943

对我来说`gcAllowVeryLargeObjects`，应用程序中的设置`web.config`仅在放入时才有效`machine.config`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:44:12.690

根据 MSDN，您可以在 web.config 中将其设置为：

```
<configuration>
  <runtime>
    <gcAllowVeryLargeObjects enabled="true" />
  </runtime>
</configuration> 
```

但它说：

```
true: Arrays greater than 2 GB in total size are enabled on 64-bit platforms. 
```

所以它不适用于 32 位，这意味着您还需要在 64 位上运行您的池。

参考：http: [//msdn.microsoft.com/en-us/library/hh285054.aspx](http://msdn.microsoft.com/en-us/library/hh285054.aspx)

# xamarin.ios - Monotouch.Dialog StyledStringElement 委托总是为添加的最后一个元素触发

> ID：13130678
> 
> 赞同：2
> 
> 时间：2012-10-29T22:37:26.647
> 
> 标签：xamarin.ios, dialogviewcontroller

鉴于以下代码，我在单击每个元素时遇到问题。如果我们假设我有 5 个练习，因此在 foreach() 循环中创建了 5 个元素，那么当呈现表格并单击任何元素时，委托总是获得第 5 个（最后一个）元素的练习。

元素显示正确，每个元素都显示相关练习的名称。只是代理没有按预期工作。

如果我不使用 foreach 循环并对每个元素进行硬编码，它会按预期工作。但是，如果我不能动态地填充 dialogViewController 并为每个元素使用点击事件，那就不好了。

```
private void CreateExerciseTable()
{
Section section = new Section();

foreach (var exercise in exercises)
{
    var element = new StyledStringElement(exercise.ExerciseName, 
        delegate { AddExercise(exercise); }) 
        {
            Font = Fonts.H3,
            TextColor = UIColor.White,
            BackgroundColor = RGBColors.LightBlue,
            Accessory = UITableViewCellAccessory.DisclosureIndicator
        };

    section.Elements.Add(element);
}

var root = new RootElement("Selection") {
    section
};

 var dv = new DialogViewController(root, true);
dv.Style = UITableViewStyle.Plain;

//Remove the extra blank table lines from the bottom of the table.
UIView footer = new UIView(new System.Drawing.RectangleF(0,0,0,0));
dv.TableView.TableFooterView = footer;

dv.TableView.SeparatorColor = UIColor.White;
dv.TableView.BackgroundColor = UIColor.White;
tableFitnessExercises.AddSubview(dv.View);      
}

private void AddExercise(FitnessExercise exercise)
{
NavigationManager.FitnessRoutine.Add(exercise);
PerformSegue(UIIdentifierConstants.SegAddExerciseToFitnessRoutine, this);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T22:41:01.387

这是一个经典的关闭错误！

问题是您正在访问循环引用。

尝试：

```
foreach (var exercise in exercises)
{
    var localRef = exercise;
    var element = new StyledStringElement(exercise.ExerciseName, 
        delegate { AddExercise(localRef); }) 
        {
            Font = Fonts.H3,
            TextColor = UIColor.White,
            BackgroundColor = RGBColors.LightBlue,
            Accessory = UITableViewCellAccessory.DisclosureIndicator
        };

    section.Elements.Add(element);
} 
```

有关这方面的更多信息，请参阅[http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)

# erlang - Erlang中的\"和""有什么区别

> ID：13130681
> 
> 赞同：2
> 
> 时间：2012-10-29T22:37:41.270
> 
> 标签：erlang, escaping

在 Erlang 中，`\"`是一个转义字符，表示双引号。

`"\"test\""`我的问题是，和有什么区别`""test""`？我问的原因是因为，我正在尝试处理`list_to_atom`错误：

```
> list_to_atom("\"test\"").
'"test"'
> list_to_atom(""test"").
* 1: syntax error before: test 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T22:52:22.887

`""`是长度为 0 的字符串/列表

`\"`在字符串的上下文中使用时只是一个转义的双引号。如果你想要一个只包含双引号（即`\"`）的字符串，那么你可以这样做：`"\""`。

`""test""`是语法错误，与语法错误没有`"" test ""`区别`<list><atom><list>`。你想达到什么目的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T11:22:12.100

不建议动态生成原子，因为它们永远不会被垃圾收集。

`list_to_existing_atom/1`阅读用户输入时最好使用。否则，你最终可能会耗尽内存（在一个运行足够长的系统中；但是，嘿，这就是 Erlang 的系统，不是吗？）并使整个虚拟机崩溃。

`list_to_existing_atom/1`如果原子不存在，将抛出错误，如果存在则返回原子。类似的构造与 a或块`catch list_to_existing_atom(some_atom)`结合使用可能会很有用。在 shell 中尝试一下，看看你最喜欢什么。`case .. of``try ... catch`

如果这个答案似乎与问题无关，那么请注意我还不允许发表评论，所以这回答了评论中对chops'答案的问题，即：

> 我必须编写一个从键盘读取直到输入原子的函数。我必须用 get_line 和 list_to_atom 来做这件事。– 奥蒂诺萨

# ruby-on-rails-3 - rails if else 检查失败然后救援

> ID：13130684
> 
> 赞同：4
> 
> 时间：2012-10-29T22:38:14.667
> 
> 标签：ruby-on-rails-3, controller, before-filter, rescue

我的控制器中有 2 种方法用于查找用户（注意`enabled_only`范围）：

```
before_filter :find_user, :only => :show
before_filter :find_any_user, :only => [:edit, :update, :destroy]

def find_user
  @user = User.enabled_only.find(params[:id])
rescue ActiveRecord::RecordNotFound
  flash[:alert] = "The user you were looking for could not be found"
  redirect_to root_path
end

def find_any_user
  @user = User.find(params[:id])
rescue ActiveRecord::RecordNotFound
  flash[:alert] = "The user you were looking for could not be found"
  redirect_to root_path
end 
```

当然，这些可以合并为一种方法来检查是否`:action == 'show'`但我无法获得救援以捕获错误。我尝试了类似以下的方法，但没有奏效：

```
before_filter :find_user, :only => [:show, :edit, :update, :destroy]

def find_user
  @user = if :action == 'show'
    User.enabled_only.find(params[:id])
  else
    User.find(params[:id])
  end
rescue ActiveRecord::RecordNotFound
  flash[:alert] = "The user you were looking for could not be found"
  redirect_to root_path
end 
```

请告知如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:45:26.567

您需要将要“保护”的代码包装在 a`begin`和 a之间`rescue`

```
before_filter :find_user, :only => [:show, :edit, :update, :destroy]

def find_user
  begin
    @user = if :action == 'show'
      User.enabled_only.find(params[:id])
    else
      User.find(params[:id])
    end
  rescue ActiveRecord::RecordNotFound
    flash[:alert] = "The user you were looking for could not be found"
    redirect_to root_path
  end
end 
```

顺便说一句，你的测试`:action == 'show'`永远不会是真的。`:action`是一个值为 的符号`:action`，它的值永远不会改变，同样对于`'show'`，它的值永远不会改变。我不确定实现这一目标的最佳方法是什么，但你可以做到，但你可以做到`if params[:action] == "show"`

# django - 身份验证不适用于公共以外的架构

> ID：13130688
> 
> 赞同：0
> 
> 时间：2012-10-29T22:38:22.763
> 
> 标签：django, postgresql, database-schema, multi-tenant

我正在尝试在 Django 和 PostgreSQL 中实现一个多租户应用程序，每个租户都有一个单独的（但相同的）架构。

我选择租户架构：

```
cursor.execute('SET search_path TO ' + schemas) 
```

我有一个中间件，可以根据主机名选择要使用的模式，所以它的工作方式如下：

```
foo.mysite.com --> use schema 'client_moo'
bar.mysite.com --> use schema 'client_bar' 
```

这原则上有效，即在简单的情况下（简单的数据库查找）

但是，当我尝试登录时，事情开始崩溃。每个租户都应该有自己的、单独的登录页面，因此`foo.mysite.com`将`bar.mysite.com`与`mysite.com`.

但是，尝试从子域登录到管理应用程序会导致重定向回登录页面。

这是发生的事情：

*   `mysite.com`登录正常（架构`public`：）
*   `foo.mysite.comn`而不是登录将（HTTP 302）重定向回自身（`foo.mysite.com`）（模式`client_foo`：）

* * *

强制模式始终存在`client_foo`将导致`mysite.com`工作（即登录`client_foo`模式），但`foo.mysite.com`仍然无法工作。

* * *

完全删除模式选择（使其始终在`public`模式上）将使两个 URL 都可以正常登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:11:41.920

1) 您是否正确设置了会话 cookie 以支持跨域会话？请参阅：[https ://docs.djangoproject.com/en/dev/topics/http/sessions/#session-cookie-domain](https://docs.djangoproject.com/en/dev/topics/http/sessions/#session-cookie-domain)

2) 如果您使用 DB 会话存储（这是默认设置），那么切换模式很可能会导致 Django 无法从数据库中获取会话（取决于中间件的顺序）。

# jquery - 显示节点树

> ID：13130691
> 
> 赞同：3
> 
> 时间：2012-10-29T22:38:37.177
> 
> 标签：jquery, data-visualization

> **可能重复：**
> [用于基于节点的对象和对象关系的 Javascript 库？](https://stackoverflow.com/questions/10344832/javascript-library-for-node-based-objects-and-object-relationships)

是否有任何 Jquery 插件或任何解决方案，用于在给定此数据表的情况下显示节点关系表（一个节点具有一个父节点和多个子节点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:47:54.247

您希望它们以何种方式显示？

以下是一些插件的列表：[http ://www.webdesignbooth.com/15-great-jquery-plugins-for-better-table-manipulation/](http://www.webdesignbooth.com/15-great-jquery-plugins-for-better-table-manipulation/)

我可以给你看这个，你可以根据自己的需要进行修改。它正在做的是通过对象图递归。`function newDiv`请注意，可以通过编辑代码来更改样式。

```
(function () {
     var jsonData = dataSentFromServer();
     var detailsElement = document.getElementById("Details");
     function newDiv(txt) {
         var createDiv = document.createElement("div");
         if (txt != undefined)
             createDiv.innerHTML = txt;
         return createDiv;
     }

     var depth = 1;
     (function ComposeGraph(obj, el) {
         var ElementArray = [];
         var ChildArray = [];
         $.each(obj, function (name, value) {
             if (!$.isArray(value)) {

                 var appender = newDiv(name + " __:__ " + value);
                 appender.setAttribute("style", "margin-left:" + 10 * depth + "px;");
                 if ($.isPlainObject(value)) {
                     appender.innerHTML = "<b>" + appender.innerHTML + "</b>";
                     depth++;
                     ComposeGraph(value, appender);
                     depth--;
                     ElementArray.push(el);
                     ChildArray.push(appender);
                 } else {
                     el.appendChild(appender);
                 }
             } else {
                 var appender = newDiv(name + " __:__ " + value);
                 appender.setAttribute("style", "margin-left:" + 10 * depth + "px;");
                 appender.innerHTML = "<b>" + appender.innerHTML + "</b>";
                 for (var i = 0, len = value.length; i < len; i++) {
                     depth++;
                     ComposeGraph(value[i], appender);
                     depth--;
                 }
                 ElementArray.push(el);
                 ChildArray.push(appender);
             }
         });
         for (var i = 0, len = ElementArray.length; i < len; i++) {
             ElementArray[i].appendChild(ChildArray[i]);
         }
     })(jsonData, detailsElement);
 })(); 
```

# python - 带有不对称误差线的 matplotlib 条形图

> ID：13130703
> 
> 赞同：11
> 
> 时间：2012-10-29T22:39:55.337
> 
> 标签：python, matplotlib

我需要绘制一个带有不对称误差线的条形图......

matplotlib.pyplot.bar 函数的文档说：

> 详细信息：xerr 和 yerr 直接传递给 errorbar()，因此它们也可以具有 2xN 形状，用于独立指定上下错误。

但是，我不能给 yerr 一个 2xN 数组...

```
import numpy as np
import matplotlib.pyplot as plt

plt.bar(xrange(5), [2,5,3,4,7], yerr=[[1,4,2,3,6],[4,10,6,8,14]]) #DO NOT work! 
```

并显示以下错误：

```
Traceback (most recent call last):
  File "bar_stacked.py", line 9, in <module>
    plt.bar(xrange(5), [2,5,3,4,7], yerr=[[1,4,2,3,6],[4,10,6,8,14]])
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 1742, in bar
    ret = ax.bar(left, height, width, bottom, color, edgecolor, linewidth, yerr, xerr, ecolor, capsize, align, orientation, log, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 4253, in bar
    "incompatible sizes: bar() argument 'yerr' must be len(%s) or scalar" % nbars)
ValueError: incompatible sizes: bar() argument 'yerr' must be len(5) or scalar 
```

但是，取而代之的是这个功能：

```
import numpy as np
import matplotlib.pyplot as plt

plt.errorbar(xrange(5), [2,5,3,4,7], yerr=[[1,4,2,3,6],[4,10,6,8,14]]) 
```

工作正常。

matplotlib.pyplot.bar 是否不再支持 yerr 的 2xN 数组？如果答案是肯定的...如何绘制带有不对称误差线的条形图？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T22:52:06.333

您使用的是哪个版本的 matplotlib？

使用 1.1.1（最新稳定）版本，您的代码可以完美运行。

# jquery - 使用 ajax 调用 wcf 方法时的绝对 URL

> ID：13130705
> 
> 赞同：1
> 
> 时间：2012-10-29T22:40:18.633
> 
> 标签：jquery, asp.net, ajax, json, absolute-path

这可能很简单，但我已经被困了一段时间。

我有一个用户控件，它正在调用这样的方法：

```
 $(document).ready(function () {
        $("#myabtags").tagit({
            tagSource: function (request, response) {
                $.ajax({
                    type: "POST",
                    url: "Services/ForumOperationService.svc/GetTags",
                    datatype: "json",
                    contentType: "application/json; charset=utf-8",
                    data: '{"prefix":"' + request.term + '"}',
                    success: function (data) {
                        response(data.GetTagsResult);
                    }
                });
            }
        });
    }); 
```

但是，此用户控件在我的网站上的多个地方使用。例如在 root、/Admin/ 和其他几个。

我想做类似的事情：

```
url: "~/Services/ForumOperationService.svc/GetTags" 
```

你如何在 jQuery 中做到这一点？

**尝试**：

把斜线放在前面，比如

```
url: "/Services/ForumOperationService.svc/GetTags" 
```

那是行不通的。我收到一个 404 错误：`http://localhost:16481/Services/ForumOperationService.svc/GetTags" (gives 404)`.

相反，它应该是

```
http://localhost:16481/Client/Services/ForumOperationService.svc/GetTags" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:11:15.827

如果您的应用程序始终位于同一位置，请使用绝对路径 ( `"/Services/ForumOperationService.svc/GetTags"`)。但是，如果您将相同的代码库部署到可能具有不同根路径的多个站点，我会使用这个技巧：

它的工作原理是这样的：我假设我的应用程序的所有 JS 脚本都在一个文件夹中，例如`Scripts`. 然后，我有一个具有实用程序的通用 JS 文件，包括一个保存绝对根 URL 的位置和一个创建绝对 URL 的方法。然后我使用该 src 搜索脚本块，并提取根 URL。

```
(function($)
{
    $.myapp = {};
    var $a = $.myapp;

    $.extend($a, {
        rootUrl: '',
        makeAbsoluteRootPath: function(path) {
            return path.replace('~/', $a.rootPath);
        }
    });

    var tag = $('script[src*="scripts"]').first();
    if (tag.length > 0) {
        var url = tag.attr('src').replace(/\/?(scripts).+$/i, '/');
        $a.rootPath = url;

    }

})(jQuery); 
```

现在您可以动态解析绝对根路径：

```
url: $.myapp.makeAbsoluteRootPath("~/Services/ForumOperationService.svc/GetTags"); 
```

[http://jsfiddle.net/HakedByChinese/tRMSj/](http://jsfiddle.net/HackedByChinese/tRMSj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:48:04.170

要使路径相对于网站客户端的根目录，请在前面加上一个斜杠：

```
url: "/Client/Services/ForumOperationService.svc/GetTags" 
```

注意 - 如果`Client`是 IIS express 中的虚拟目录/应用程序，并且安装时它没有`Client`位，则需要更改它。

# c++ - 在基于范围的 for 循环中使用转发引用有什么好处？

> ID：13130708
> 
> 赞同：145
> 
> 时间：2012-10-29T22:40:42.980
> 
> 标签：c++, performance, for-loop, c++11, move-semantics

`const auto&`如果我想执行只读操作就足够了。然而，我遇到了

```
for (auto&& e : v)  // v is non-const 
```

最近几次。这让我想知道：

`auto&`与or相比，在某些不明显的极端情况下，使用转发引用是否有一些性能优势`const auto&`？

（`shared_ptr`是晦涩的角落案例的嫌疑人）

* * *

**更新** 我在收藏夹中找到的两个示例：

[迭代基本类型时使用 const 引用有什么缺点吗？](https://stackoverflow.com/a/13057846/341970)
[我可以使用基于范围的 for 循环轻松迭代地图的值吗？](https://stackoverflow.com/a/13087074/341970)

请专注于这个问题：**为什么我要在基于范围的 for 循环中使用 auto&&？**

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-10-29T22:50:12.777

我能看到的唯一优势是当序列迭代器返回一个代理引用并且您需要以非常量方式对该引用进行操作时。例如考虑：

```
#include <vector>

int main()
{
    std::vector<bool> v(10);
    for (auto& e : v)
        e = true;
} 
```

这不会编译，因为`vector<bool>::reference`从返回的右值`iterator`不会绑定到非常量左值引用。但这会起作用：

```
#include <vector>

int main()
{
    std::vector<bool> v(10);
    for (auto&& e : v)
        e = true;
} 
```

话虽如此，除非你知道你需要满足这样的用例，否则我不会这样编码。即我不会无缘无故地这样做，因为它*确实*会让人们想知道你在做什么。如果我确实这样做了，那么包含一个关于原因的评论也没有什么坏处：

```
#include <vector>

int main()
{
    std::vector<bool> v(10);
    // using auto&& so that I can handle the rvalue reference
    //   returned for the vector<bool> case
    for (auto&& e : v)
        e = true;
} 
```

**编辑**

我的最后一个案例应该是一个有意义的模板。如果你知道循环总是在处理一个代理引用，那么`auto`它会和`auto&&`. 但是，当循环有时处理非代理引用，有时处理代理引用时，我认为`auto&&`将成为首选解决方案。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-30T19:35:53.543

使用基于范围的循环`auto&&`或[通用引用](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)`for`具有捕获所获得内容的优势。对于大多数类型的迭代器，您可能会得到 a`T&`或 a `T const&`for some type `T`。有趣的情况是取消引用迭代器会产生一个临时的：C++ 2011 放宽了要求，迭代器不一定需要产生一个左值。通用引用的使用与参数转发相匹配`std::for_each()`：

```
template <typename InIt, typename F>
F std::for_each(InIt it, InIt end, F f) {
    for (; it != end; ++it) {
        f(*it); // <---------------------- here
    }
    return f;
} 
```

函数对象`f`可以区别对待`T&`、`T const&`和`T`。为什么基于范围的循环的主体`for`应该不同？当然，要真正利用使用通用引用推断类型的优势，您需要相应地传递它们：

```
for (auto&& x: range) {
    f(std::forward<decltype(x)>(x));
} 
```

当然， using`std::forward()`意味着您接受任何要从中移动的返回值。这样的对象在我不知道的非模板代码中是否有意义（还没有？）。我可以想象，使用通用引用可以为编译器提供更多信息来做正确的事情。在模板化代码中，它不会对对象应该发生什么做出任何决定。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-30T19:40:39.170

我几乎总是使用`auto&&`. 为什么在不必要的情况下被边缘案例咬伤？打字也更短，我只是觉得它更……透明。当您使用 时`auto&& x`，您就知道每次`x`都准确无误。`*it`

# git - 你能用 gruntjs 记录 git 的修订吗

> ID：13130710
> 
> 赞同：13
> 
> 时间：2012-10-29T22:40:56.413
> 
> 标签：git, gruntjs

我用 gruntjs 和 yeoman.io 构建我的 webapp。

我希望能够记录构建来自的 git revision/commit/sha，以便我可以查看已部署的版本并仔细检查它的来源以及新版本的变化。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-17T08:49:45.533

也不是 Grunt 专家，但这里有一个基于 git describe 的解决方案，我目前用于大型 AngularJS 应用程序。我们将主要版本存储在项目的 package.json 中。除此之外，我还生成了一个 version.json 文件，其中包含每个构建的修订版和日期。客户端稍后可以访问此信息，以帮助测试人员和维护人员查看他们正在使用的应用程序的版本/修订版。

```
grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),

  'git-describe': {
    options: {
      prop: 'meta.revision'
    },
    me: {}
  },

  ...
});

grunt.registerTask('tag-revision', 'Tag the current build revision', function () {
  grunt.task.requires('git-describe');

  grunt.file.write('public/version.json', JSON.stringify({
    version: grunt.config('pkg.version'),
    revision: grunt.config('meta.revision'),
    date: grunt.template.today()
  }));
});

grunt.registerTask('version', ['git-describe', 'tag-revision']); 
```

因此，通过在我们的构建任务中包含版本任务，我们可以使用 version.json 文件标记每个构建。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T06:41:43.467

Not a gruntjs specialist, but maybe you can include in your build step a call to the [gruntjs-git-describe](https://github.com/mikaelkaron/grunt-git-describe) module, which will call [that task](https://github.com/mikaelkaron/grunt-git-describe/blob/master/tasks/git-describe.js):

```
module.exports = function( grunt ) {
  grunt.registerTask("describe", "Describes current git commit", function (prop) {
    var done = this.async();

    grunt.log.write("Describe current commit: ");

    grunt.util.spawn({
      cmd : "git",
      args : [ "describe", "--tags", "--always", "--long", "--dirty" ]
    }, function (err, result) {
      if (err) {
        grunt.log.error(err);
        return done(false);
      }

      grunt.config(prop || "meta.version", result);

      grunt.log.writeln(result.green);

      done(result);
    });
  });
}; 
```

Using git-describe is a good way to record a "version number" with Git, as it is SHA1-based (unambiguous id).
See more on that topic:

*   "[Deriving application build version from `git describe` - how to get a relatively straightforward string?](https://stackoverflow.com/questions/3300746/deriving-application-build-version-from-git-describe-how-to-get-a-relatively)"
*   "[Moving from CVS to git: `$Id:$` equivalent?](https://stackoverflow.com/questions/384108/moving-from-cvs-to-git-id-equivalent)"
*   "[what is the git equivalent for revision number?](https://stackoverflow.com/questions/4120001/what-is-the-git-equivalent-for-revision-number)"

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-13T12:52:28.367

为了详细说明 Lucas Pottersky 对 inukshuk 的回答的评论，使用 grunt-git-describe >= 2.2.0 做同样事情的正确方法如下：

```
grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),

  'git-describe': {
    options: {
    },
    me: {}
  },

  ...
});

grunt.registerTask('saveRevision', function() {
  grunt.event.once('git-describe', function (rev) {
    grunt.option('gitRevision', rev);
  });
  grunt.task.run('git-describe');
});

grunt.registerTask('tag-revision', 'Tag the current build revision', function () {
  grunt.task.requires('git-describe');

  grunt.file.write('public/version.json', JSON.stringify({
    version: grunt.config('pkg.version'),
    revision: grunt.option('gitRevision'),
    date: grunt.template.today()
  }));
});

grunt.registerTask('version', ['saveRevision', 'tag-revision']); 
```

# time - 如何比较午夜前后的时间？

> ID：13130712
> 
> 赞同：1
> 
> 时间：2012-10-29T22:41:10.320
> 
> 标签：time

当我试图决定是否可以从一列火车转移到另一列时，我遇到了问题。条件是，首班列车到达 (A1) 时间必须至少为 5 分钟。在第二列火车 (D2) 出发前。并且你不能等超过180分钟，因为你已经到了车站，让第二列火车到达（A2）（你可以在第二列火车上任意等待出发）？

您必须输入的时间格式为：HH:MM 在将它们转换为自午夜以来经过的分钟数后，我确实比较了这些时间。

问题是，如果您想比较午夜之前的时间和午夜之后的时间，您必须在这种情况下更改“if 条件”：A1 和 D2 在午夜之后但 A2 在午夜之前，A1 和 A2 在午夜之前和 D2在午夜之后，A1 在之前，A2 和 D2 在之后，A1 和 A2 在午夜之前（但 A2 更早），D2 在午夜之后。

在所有这些情况下，您都必须有不同的条件。如何解决这个问题？

PS：我想我应该使用不同的时间格式（不是从午夜开始的分钟数），但是如何？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:46:07.987

我建议你使用 24 小时制。这样，如果第二次较低，那么您就知道它会滚动到第二天。

如果第二次较低，那么您所要做的就是：

```
A1 - D1 = (D)ifference
A1 - D = time before D1 leaves (so the time between A1 and D1) 
```

（有人可以检查我的数学吗？我认为这是对的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:46:44.233

不要根据自午夜以来经过的分钟数来判断值。根据他们的实际价值来判断他们。您将处理的大多数编程语言都有日期/时间类/函数，您可以使用它们来进行简单的日期减法。如果您更新您的问题以表明您使用的是什么语言，我相信您将能够获得实用的代码示例。

例如，作为通用 UNIX/LINUX 实践，您可以将该值转换为 UNIX 时间戳，然后减去以秒为单位的时间差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:54:10.747

你能转换成 a`DateTime`然后做`DateDiff`吗？

伪代码（语法错误）：

```
If DateDiff(minutes, A1, D2) > 5 Then
  If DateDiff(minutes, A1, A2) < 180 Then
    Go ahead and allow the transfer
  else
    Look for another train (too long of a wait)
  end if 'DateDiff(minutes, A1, A2) < 180
  Look for another train (not enough time to transfer)
end if 'DateDiff(minutes, A1, D2) > 5 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-25T17:16:19.480

这是我正在处理的与 Excel 类似的问题：

```
( D3 + IF( (C3-D3)>0,5 ; 1 ; 0 ) ) > ( 0,010417 + C3 + IF( (D3-C3)>0,5 ; 1 ; 0 )  ) 
```

Excel 中的 00:00 = 0，24:00 = 1 我想知道 D3 是否在 C3 之后超过 15 分钟。上面的公式可以实现这一点，而不必纠结日期。请注意，该公式取决于 C3 和 D3 相隔不超过 12 小时，这在我的使用场景中始终如此，因此没问题。

外行术语：您将 Time1 与 (time2 + 15min) 进行比较，但如果有午夜开关，您检查时间是否相隔超过 12 小时，如果是，则将 24h 添加到 Time1 或 Time2。

我实际上还没有让它工作，但我相信这与 Excel 是一块粪便有关。

万一我忽略了某些事情，请务必让我知道！

# c++ - 如何使用 Visual Studio 2012 为 Windows XP 编译？

> ID：13130713
> 
> 赞同：24
> 
> 时间：2012-10-29T22:41:30.757
> 
> 标签：c++, c, visual-c++, windows-xp, visual-studio-2012

好的，所以我在 Windows 7 x64 中使用 Visual Studio 2012 进行编程和编译。我的应用程序在那里运行良好，但是当我尝试从 Windows XP SP3 虚拟机执行它时，我立即得到“xxxx.exe 不是有效的 win32 应用程序”。

正在使用静态链接编译应用程序，即使用`/MT`. 我在 targetver.exe 中将 _WIN32_WINNT 设置为 0x0501；配置管理器设置为 Win32，*链接器高级选项*中的目标机器设置为 MACHINEX86。

我的 targetver.h 看起来像这样：

```
#include <winsdkver.h>

#define _WIN32_WINNT 0x0501
#define WINVER 0x0501
#define NTDDI_VERSION 0x0501

#include <SDKDDKVer.h> 
```

我还尝试使用`/MD`.NET Framework 进行编译和安装，但这也无济于事。

我一无所知，我真的可以使用一些帮助，因为我需要让它在 Windows XP 上工作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-29T22:51:24.773

VC++ 2012 RTM**不**支持 Windows XP——该支持是在 2012 年晚些时候在 Visual Studio 2012 Update 1 中提供的。

可以安装[以 VC++ 2012 为目标的 Windows XP](http://aka.ms/ms3oxw)的CTP，但您必须静态链接 CRT 才能进行部署。有关更多信息，请参阅[此博客文章](https://blogs.msdn.microsoft.com/vcblog/2012/10/08/windows-xp-targeting-with-c-in-visual-studio-2012/)。

Visual Studio 2012 Update 1 添加了对在 Windows XP 上运行使用 VC++ 2012 构建的应用程序的官方支持以及动态链接 CRT 的能力。

*   [下载链接](http://go.microsoft.com/?linkid=9821199)
*   [包含附加信息的博客文章](https://blogs.msdn.microsoft.com/vcblog/2012/11/26/visual-studio-2012-update-1-now-available/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-26T11:22:19.030

应该做两件事：

*   *配置属性*→*常规页面*，将*平台工具集*更改为：*Visual Studio 2012 - Windows XP (v110_xp)；*

*   菜单*链接器*→*系统*。*将子系统*更改为：*Console/Windows*。

详细解释在这里： http: [//software.intel.com/en-us/articles/linking-applications-using-visual-studio-2012-to-run-on-windows-xp](http://software.intel.com/en-us/articles/linking-applications-using-visual-studio-2012-to-run-on-windows-xp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T18:24:24.763

当您生成 EXE 文件时，32 位的版本将在项目文件夹`bin\x86\Release`中。

# css - CSS :after 可以包含这个元素的内容吗？

> ID：13130714
> 
> 赞同：1
> 
> 时间：2012-10-29T22:41:32.467
> 
> 标签：css

快速简单的问题。假设我有这个链接：`<a href="">abc</a>`

无论如何我都可以使用吗`abc`？我不想创建额外的 .`content``a:after { content: ???; }``data-myattr`

W3 是这样说的：

> attr(X) 此函数以字符串形式返回选择器主题的属性 X 的值。CSS 处理器不解析字符串。如果选择器的主题没有属性 X，则返回一个空字符串。属性名称是否区分大小写取决于文档语言。

[http://www.w3.org/TR/CSS2/generate.html#propdef-content](http://www.w3.org/TR/CSS2/generate.html#propdef-content)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:22:41.363

不，这是不可能的，所以最好考虑原始问题，这是一个假设的解决方案。

在[CSS3 Generated and Replaced Content Module](http://www.w3.org/TR/css3-content/)草案中，有可能使用`content: contents`伪`:after`元素，但这只有在这是元素内容的唯一使用时才有效（您将使用`content: none`真实元素），即它是不是为了复制内容。此外，它是一个非常过时的模块，它提出的大部分新奇事物（包括这个）都没有已知的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:45:18.833

您可以将字符串放入内容中：。这是有关它的相关文档：http: [//www.w3.org/TR/CSS2/syndata.html#strings](http://www.w3.org/TR/CSS2/syndata.html#strings)

# java - 无法使用下一个代码重现死锁

> ID：13130715
> 
> 赞同：0
> 
> 时间：2012-10-29T22:41:58.017
> 
> 标签：java, multithreading, deadlock

无法使用下一个代码重现死锁

我正在尝试使用下一个代码来解决死锁，但它似乎效果很好。

请看下面：

```
public class Deadlock {

    static Object lock1 = new Object();
    static Object lock2 = new Object();

    public static void main(String[] args) {

        new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    synchronized (lock1) {
                        System.out.println("Thread 1: locked lock1");
                    }
                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    synchronized (lock2) {
                        System.out.println("Thread 1: locked lock2");
                    }
                }
            }
        }).start();

        new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    synchronized (lock2) {
                        System.out.println("Thread 2: locked lock2");
                    }
                    try {
                        Thread.sleep(50);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    synchronized (lock1) {
                        System.out.println("Thread 2: locked lock1");
                    }
                }
            }
        }).start();

    }

} 
```

在这种情况下我不明白什么或这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:44:41.880

要导致死锁，您需要在这些线程中以相反的顺序持有*两个锁。*

```
// thread 1
public void run() {
    synchronized (lock1) {
        synchronized (lock2) {
            // do something
        }
    }
}

// thread 2
public void run() {
    synchronized (lock2) {
        synchronized (lock1) {
            // do something
        }
    }
} 
```

这是必要的，但还不够。为了能够模拟死锁，您需要确保两个线程在尝试获取下一个锁之前分别成功获取它们的第一个锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:44:45.100

您的代码永远不会“死锁”。

要死锁，您必须锁定一个锁*内*的另一个锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T22:45:04.067

要获得死锁，您需要同时持有两个锁。您可以为整个循环保留第一个锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T22:46:23.370

如果您试图获得死锁，则需要嵌套同步块，以便尝试同时完成两个锁：

```
 new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    synchronized (lock1) {
                        System.out.println("Thread 1: locked lock1");
                        try {
                            // Sleep to allow Thread2 to obtain lock2
                            Thread.sleep(10);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        synchronized (lock2) {
                            System.out.println("Thread 1: locked lock2");
                        }
                    }
                }
            }
        }).start();

        new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    try {
                        // Sleep to allow Thread1 to obtain lock1
                        Thread.sleep(5);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    synchronized (lock2) {
                        System.out.println("Thread 2: locked lock2");
                        synchronized (lock1) {
                            System.out.println("Thread 2: locked lock1");
                        }
                    }
                }
            }
        }).start(); 
```

请注意，锁是按相反的顺序获取的，通过休眠来确保以下获取顺序：

```
Thread 1 acquires lock1
Thread 2 acquires lock2
Thread 1 attempts to acquire lock2       <--- DEADLOCK
Thread 2 attempts to acquire lock1       <--- DEADLOCK 
```

请注意，最后两个可以按任意顺序发生，但无论如何都会发生死锁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T22:46:44.597

为什么上面的代码会导致死锁？每个线程一次只锁定一个锁，所以如果另一个线程试图锁定它，它只需要等待第一个释放它。

如果线程这样做，您将面临严重的死锁风险

```
synchronized (lock1) {
    synchronized (lock2) {
        ...
    }
} 
```

和

```
synchronized (lock2) {
    synchronized (lock1) {
        ...
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T22:44:31.590

让第二个线程尝试锁定 lock1。这是调用死锁的经典方法。两种资源以不同的顺序锁定。

抱歉...在您的代码中没有向下滚动足够远...感觉很愚蠢

# java - Java Android 套接字

> ID：13130717
> 
> 赞同：1
> 
> 时间：2012-10-29T22:42:33.267
> 
> 标签：java, android, sockets, networking

我目前正在开发一个 Android 应用程序，它将一个字符串和一个文件发送到在远程计算机上运行的 java 服务器应用程序。这个java服务器应用程序应该找到文件上的索引并发回这个索引的值（文件结构是：索引值。示例：1蓝色）文件在远程机器上正确发送和接收，我有一个方法查找文件上接收到的索引的值。但是当我试图将找到的值发送回手机时，我得到一个异常（关闭的套接字），但我没有关闭套接字或任何缓冲区。我不确定关闭的套接字是移动应用程序套接字还是 java 服务器应用程序套接字。我正在使用与发送接收相同的套接字（这是在 Android 上工作的方式）。将答案发送回电话是我的项目所缺少的，也是我需要帮助的。

客户端应用程序（Android 应用程序）：

```
 private class HeavyRemProcessing extends AsyncTask<String, Void, String>
        {

            protected String doInBackground(String... urls) 
             {
                    begins = System.currentTimeMillis();

                            remoteExecution();

                ends= System.currentTimeMillis();
                procTime=ends-begins;
                aux= Long.toString(procTime);

               return aux;
             } //doInBackground() ends

            protected void onPostExecute(String time)
              {
                textView1.setText("Result: "+result+". Processing Time: "+time+" milisecs"); 
              }// onPostExecute ends

        } //HeavyRemProcessing ends

     public void executor(View view)
      {     
         key="74FWEJ48DX4ZX8LQ";

         HeavyRemProcessing task = new HeavyRemProcessing();
         task.execute(new String[] { "????" });     
      } //executor() ends

     public void remoteExecution()
        {
               // I have fixed IP and port I just deleted 
           String ip;  //SERVER IP
           int port;   // SERVER PORT 

             try
               {
                 cliSock = new Socket(ip, port);

                 file= new File("/mnt/sdcard/download/Test.txt"); 

                 long length = file.length();
                 byte[] bytes = new byte[(int) length];

                 FileInputStream fis = new FileInputStream(file);
                 BufferedInputStream bis = new BufferedInputStream(fis);
                 BufferedOutputStream out = new BufferedOutputStream(cliSock.getOutputStream());
                 BufferedReader in = new BufferedReader(new InputStreamReader(cliSock.getInputStream()));

                 int count;
                 key=key+"\r\n";
                 out.write(key.getBytes());
                 while ((count = bis.read(bytes)) > 0) 
                  {
                     out.write(bytes, 0, count);
                  }  //It works perfectly until here

                   //// PROBABLY HERE IS THE PROBLEM:               
                out.flush();
                out.close();
                fis.close();
                bis.close();                    

                result= in.readLine();  //RECEIVE A STRING FROM THE REMOTE PC

              }catch(IOException ioe)
                {
                 // Toast.makeText(getApplicationContext(),ioe.toString() +   ioe.getMessage(),Toast.LENGTH_SHORT).show();  
                } 

            }catch(Exception exp)
              {
                 //Toast.makeText(getApplicationContext(),exp.toString() +   exp.getMessage(),Toast.LENGTH_SHORT).show();               
              }   

        } //remoteExecution ends 
```

Java 服务器应用程序（远程 PC）

```
 public void receivingFile()
      {
         System.out.println("Executing Heavy Processing Thread (Port 8888).");

         try 
            {
                serverSocket = new ServerSocket(8888);
                InputStream is = null;
                OutputStream os= null;
                FileOutputStream fos = null;
                BufferedOutputStream bos = null;
                BufferedOutputStream boSock =null;
                DataOutputStream dataOutputStream=null;
                int bufferSize = 0;

                try 
                   {
                     socket = serverSocket.accept();  
                     System.out.println("Heavy Processing Task Connection from ip: " + socket.getInetAddress());

                   } catch (Exception ex) 
                     {
                       System.out.println("Can't accept client connection: "+ex);
                     }

                try 
                   {
                     is = socket.getInputStream();
                     dataOutputStream = new DataOutputStream(socket.getOutputStream());

                     bufferSize = socket.getReceiveBufferSize();

                   }
                     catch (IOException ex) 
                       {
                         System.out.println("Can't get socket input stream. ");
                       }

                try 
                   {
                     fos = new FileOutputStream(path);
                     bos = new BufferedOutputStream(fos);

                   }
                     catch (FileNotFoundException ex) 
                      {
                        System.out.println("File not found. ");
                      }

                byte[] bytes = new byte[bufferSize];

                int count;
                System.out.println("Receiving Transfer File!.");

                while ((count = is.read(bytes)) > 0) 
                  {
                     bos.write(bytes, 0, count);
                  }

                System.out.println("File Successfully Received!.");
                fos.close();
                bos.flush();
                bos.close();
                is.close();

                result= obj.searchIndex();
                System.out.println("Found: "+result); //This correctly print the found value

                dataOutputStream.writeUTF(result);
                dataOutputStream.flush();
                dataOutputStream.close();

                System.out.println("Data sent back to the Android Client. ");

           } catch (IOException e) 
              {
               // TODO Auto-generated catch block
               e.printStackTrace();
              }

      } // receivingFile() ends 
```

如果有人可以帮助我，我将非常感激。我在想可能与缓冲区和套接字有关。我的 Java 服务器应用程序抛出异常：“关闭的套接字”...感谢您的时间，

阿尔贝托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:54:30.987

我认为您的问题是您`outputstream`在关闭`inputstream`. 这是android中的一个错误。通常在java中关闭`outputstream`只 **刷新**数据，关闭输入**流**会导致连接关闭。

但是在android中关闭`outputstream`关闭连接。这就是为什么你得到关闭的套接字异常，
把语句

```
out.flush();
 out.close(); 
```

后

```
result=in.readLine(); 
```

或者只是避免那些陈述（out.flush 和 out.close）。我也遇到过类似的问题。看我的[问题](https://stackoverflow.com/questions/9701872/why-should-outputstream-be-closed-after-inputstream-in-android)

# ruby-on-rails - Backbone.js 和 Rails 3.2

> ID：13130719
> 
> 赞同：0
> 
> 时间：2012-10-29T22:42:41.173
> 
> 标签：ruby-on-rails, backbone.js, coffeescript, railscasts

我刚刚看了backbone.js railscasts，当名称不存在时我没有收到错误警报，但确实在服务器端出现错误。

我正在使用rails 3.2.8和backbone-on-rails 0.9.2.3

在网络控制台中，它确实声明 api/entries 存在错误，并且在响应中存在错误键，但是当我单击添加时仍然没有警报，而表单上没有任何内容。

这是我的代码......请帮我找出可能是什么问题！

```
class Raffler.Views.EntriesIndex extends Backbone.View

  template: JST['entries/index']

  events:
    'submit #new_entry': 'createEntry'
    'click #draw': 'drawWinner'

  initialize: ->
    @collection.on('reset', @render)
    @collection.on('add', @appendEntry)

  render: =>
    $(@el).html(@template())
    @collection.each(@appendEntry)
    this

  appendEntry: (entry) =>
    view = new Raffler.Views.Entry(model: entry)
    @$('#entries').append(view.render().el)

  drawWinner: (event) ->
    event.preventDefault()
    @collection.drawWinner()

  createEntry: (event) ->
    event.preventDefault()
    attributes = name: $('#new_entry_name').val()
    @collection.create attributes,
      wait: true
      success: -> $('#new_entry')[0].reset()
      error: @handleError

    handleError: (entry, response) ->
      if response.status == 422
        errors = $.parseJSON(response.responseText).errors
        for attribute, messages of errors
          alert "#{attribute} #{message}" for message in messages 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:07:44.473

你的缩进是错误的，所以你没有 a `@handleError`，而是你的`createEntry`方法返回一个像这样的对象：

```
{ handleError: (entry, response) -> ... } 
```

因此，当您尝试`@handleError`用作错误回调时：

```
@collection.create attributes,
  wait: true
  success: -> ...
  error: @handleError # <----------- Here 
```

你真的是在说：

```
@collection.create attributes,
  wait: true
  success: -> ...
  error: undefined 
```

并将您的错误回调设置为`undefined`没有任何用处。

拉回`handleError`左边距两个空格，你可能会有更好的运气。

# iphone - 在 Xcode 中呈现视图的问题

> ID：13130723
> 
> 赞同：1
> 
> 时间：2012-10-29T22:43:12.920
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我希望您能帮助我解决在最新 xCode 版本中设计 iPhone 应用程序的实际问题。

这是我觉得有点奇怪的地方：

我设计了一个带有故事板和导航控制器的新项目。然后我放置了UILabels、ImageViews 等对象。不，当我在模拟器中（以及在 iPhone 上）运行项目时，我注意到以下情况：当应用程序加载视图中的所有对象时，放置的对象从顶部落下以占据它们定义的位置。它可能需要四分之一秒，但可以清楚地看到。它也发生在从根视图控制器启动的所有其他视图上

那么，我有什么要改变的，一切都在它的固定位置，而不会在应用程序开始时从顶部掉下来？

我希望我描述得足够好。其实我不知道那里发生了什么。我希望你能帮助我解决这个“问题”。我以前写过一些小应用程序，但我从来没有注意到这样的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:04:15.063

得到了解决方案：我不得不删除主视图上的动画......现在它可以正常工作了！:-)

# scala - couchdb 和部分模式的 Scala 驱动程序

> ID：13130724
> 
> 赞同：2
> 
> 时间：2012-10-29T22:43:28.750
> 
> 标签：scala, couchdb

我对当前 Scala couchdb 驱动程序的一个问题是它们是否可以使用“部分”模式”。我将尝试解释我的意思：我看到的库似乎都想从 JSON 文档中进行完整转换将数据库转换为 Scala 对象，处理 Scala 对象，并将其转换回 JSON。如果您的应用程序了解有关该类型对象的所有信息，这很好 --- 特别是如果它是与该数据库交互的唯一软件。但是，如果我想编写一个只知道部分 JSON 对象的小应用程序怎么办：例如，如果我只对像这样嵌入的“mybook”组件感兴趣怎么办：

```
{
  _id: "0ea56a7ec317138700743cdb740f555a",
  _rev: "2-3e15c3acfc3936abf10ea4f84a0aeced",
  type: "user",
  profiles: {
    mybook: {
      key: "AGW45HWH",
      secret: "g4juh43ui9hg929gk4"
    },
    .. 6 or 7 other profiles
  },
  .. lots of other stuff
} 
```

我真的不想将整个 JSON AST 转换为 Scala 对象。另一方面，在 couchdb 中，您必须保存整个 JSON 文档，因此需要以某种方式保存。我想我真的是这样的东西：

```
class MyBook {
  private val userJson: JObject = ... // full JSON retrieved from the database
  lazy val _id: String = ... // parsed from the JSON
  lazy val _rev: String = ... // parsed from the JSON
  lazy val key: String = ... // parsed from the JSON
  lazy val secret: String = ... // (ditto)
  def withSecret(secret: String): MyBook = ... // new object with altered userJson
  def save(db: CouchDB) = ... // save userJson back to couchdb
} 
```

优点：

*   仅提取所需字段的计算成本更低
*   除了“mybook”部分外，不必与数据库演变同步
*   更适合部分模式的开发
*   更安全，因为如果我们没有跟上数据库模式，那么无意删除字段的变化就会减少

缺点：

*   Scala 中的域对象并非完全独立于 couch/JSON
*   每个对象使用更多内存

任何当前的 Scala 驱动程序都可以做到这一点吗？无论是 scouchdb 还是新的 Sohva 库，似乎都不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:15:46.927

只要你有一个好的 JSON 库和一个好的 HTTP 客户端库，实现一个无模式的 CouchDB 客户端库真的很容易。

这是 Java 中的一个示例：[code](https://github.com/Hypertopic/Porphyry/blob/master/src/org/hypertopic/RESTDatabase.java)，[tests](https://github.com/Hypertopic/Porphyry/blob/master/src/org/hypertopic/RESTDatabaseTest.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:06:18.150

[我的 couchDB 库](https://github.com/KimStebel/sprouch)使用 spray-json 进行（反）序列化，它非常灵活，可以让您忽略文档的某些部分但仍然保存它。让我们看一个简化的例子：

假设我们有这样的文件

```
{
  dontcare: {
      ...
  },
  important: "foo"
} 
```

然后，您可以声明一个类来保存该文档中的信息并定义如何完成转换：

```
case class Dummy(js:JsValue)
case class PartialDoc(dontcare: Dummy, important: String)
implicit object DummyFormat extends JsonFormat[Dummy] {
  override def read(js:JsValue):Dummy = Dummy(js)
  override def write(d:Dummy):JsValue = d.js
}
implicit val productFormat = jsonFormat2(PartialDoc) 
```

这将忽略其中的任何内容，`dontcare`但仍将其作为原始 JSON AST 安全。当然，这个例子并不像你的问题那么复杂，但它应该让你知道如何解决你的问题。

# android - 尝试使用 URI 和 Intent 启动 Google 地图

> ID：13130725
> 
> 赞同：1
> 
> 时间：2012-10-29T22:43:27.993
> 
> 标签：android, android-intent, maps, uri

我试图在我的应用程序中创建一个按钮，在特定位置打开谷歌地图应用程序。我一直在尝试使用 URI 和意图。当我尝试启动活动时，应用程序意外退出。这只发生在我使用 geo:xx,xx 我能够打开一个网址，但不能打开谷歌地图应用程序时。我不太确定这里有什么问题，但这里是我正在使用的按钮的 onclick 方法：

```
 mapButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v){

            String UriString = getResources().getString(R.string.map_location);
            Uri geoUri = Uri.parse(UriString);
            Intent mapCall = new Intent(Intent.ACTION_VIEW, geoUri);
            startActivity(mapCall);
        }

   }); 
```

我觉得这应该很简单，但它对我不起作用。任何帮助，将不胜感激！

如果有帮助，这是我迄今为止编写的其余代码：

```
public class MainActivity extends Activity implements OnClickListener{

public Button courseButton;
public Button mapButton;
public Button newsButton;
public Button directoryButton;
public Button calendarButton;
public Button videoButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapButton = (Button)findViewById(R.id.mapButton);
    courseButton = (Button)findViewById(R.id.courseButton);
    newsButton = (Button)findViewById(R.id.newsButton);
    directoryButton = (Button)findViewById(R.id.directoryButton);
    calendarButton = (Button)findViewById(R.id.calendarButton);
    videoButton = (Button)findViewById(R.id.videoButton);

    courseButton.setOnClickListener(this);

    mapButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v){

            String UriString = getResources().getString(R.string.map_location);
            Uri geoUri = Uri.parse(UriString);
            Intent mapCall = new Intent(Intent.ACTION_VIEW, geoUri);

            startActivity(mapCall);
            }

    });

    newsButton.setOnClickListener(new OnClickListener(){

        public void onClick(View v){
            String UriString = getResources().getString(R.string.rss_feed);
            Uri rssUri = Uri.parse(UriString);
            Intent rssCall = new Intent(Intent.ACTION_VIEW, rssUri);
            startActivity(rssCall);
        }
    });

    directoryButton.setOnClickListener(this);
    calendarButton.setOnClickListener(this);
    videoButton.setOnClickListener(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClick(View arg0) {
    // TODO Auto-generated method stub

    }   
} 
```

我在这里真的很茫然。

按照要求：

```
10-29 23:02:25.031: E/AndroidRuntime(324): FATAL EXCEPTION: main
10-29 23:02:25.031: E/AndroidRuntime(324): android.content.ActivityNotFoundException: No    Activity found to handle Intent { act=android.intent.action.VIEW  dat=geo:44.873799766954136, -91.92715644836426?z=22 }
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.app.Activity.startActivityForResult(Activity.java:2827)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.app.Activity.startActivity(Activity.java:2933)
10-29 23:02:25.031: E/AndroidRuntime(324):  at com.example.stout.MainActivity$1.onClick(MainActivity.java:46)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.view.View.performClick(View.java:2485)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.view.View$PerformClick.run(View.java:9080)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.os.Handler.handleCallback(Handler.java:587)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.os.Looper.loop(Looper.java:123)
10-29 23:02:25.031: E/AndroidRuntime(324):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-29 23:02:25.031: E/AndroidRuntime(324):  at java.lang.reflect.Method.invokeNative(Native Method)
10-29 23:02:25.031: E/AndroidRuntime(324):  at java.lang.reflect.Method.invoke(Method.java:507)
10-29 23:02:25.031: E/AndroidRuntime(324):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-29 23:02:25.031: E/AndroidRuntime(324):  at   com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-29 23:02:25.031: E/AndroidRuntime(324):  at dalvik.system.NativeStart.main(Native     Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-25T10:56:05.530

对我来说工作正常：

```
Uri gmmIntentUri = Uri.parse("geo:0,0?q=" + object.getLatitude() + "," + object.getLongitude() + "(" + object.getName() + ")");

Intent mapIntent = new Intent(Intent.ACTION_VIEW, gmmIntentUri);

mapIntent.setPackage("com.google.android.apps.maps");

startActivity(mapIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:24:37.973

好吧，堆栈跟踪说 Android 找不到处理 ACTION_VIEW 和数据地理的应用程序：44.873799766954136, -91.92715644836426?z=22

不幸的是，文档说该功能“正在开发中”并且没有得到完全支持。无法保证它已按照文档所述的方式实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:37:10.680

您看到活动未找到异常，因为谷歌地图未安装在默认模拟器上/不是模拟器使用的 AOSP 构建的一部分。

# java - Maven - 无法激活 webstart

> ID：13130729
> 
> 赞同：1
> 
> 时间：2012-10-29T22:43:55.147
> 
> 标签：java, scala, maven, java-web-start

我正在尝试启动一个[Scage](https://github.com/dunnololda/scage)项目。我以前从未使用过maven。

我创建了一个 pom.xml 文件并使用 intellij 下载了这些文件

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>ScageTest</groupId>
    <artifactId>ScageTest</artifactId>
    <version>1.0</version>
    <repositories>

        <repository>
            <id>scage</id>
            <name>Scage Maven Repo</name>
            <url>http://scage.googlecode.com/svn/maven-repository</url>
        </repository>
    </repositories>

    <dependencies>

        <dependency>
            <groupId>su.msk.dunno</groupId>
            <artifactId>scage</artifactId>
            <version>0.9</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>

</project> 
```

这工作得很好。如教程中所述，我还创建了主文件

```
import net.scage.ScageScreenApp
import net.scage.ScageLib._
import net.scage.support.Vec

    object HelloWorldExample extends ScageScreenApp("Hello World") {
      private var ang = 0f
      actionStaticPeriod(100) {
        ang += 5
      }

      backgroundColor = BLACK
      render {
        openglMove(windowSize/2)
        openglRotate(ang)
        print("Hello World!", Vec(-50, -5), GREEN)
      }
    } 
```

正如教程中所指出的，我必须使用这个命令来构建它`mvn clean package -Pwebstart`

日志：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO]
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ ScageTest ---
[WARNING] JAR will be empty - no content was marked for inclusion!
[INFO] Building jar: C:\Users\kanta\IdeaProjects\ScageTest\target\ScageTest-1.0.
jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.922s
[INFO] Finished at: Mon Oct 29 23:40:07 CET 2012
[INFO] Final Memory: 4M/15M
[INFO] ------------------------------------------------------------------------
[WARNING] The requested profile "webstart" could not be activated because it doe
s not exist. 
```

现在输出是 a`.jar file`而不是 a `.jnlp file`，如果我双击 .jar 文件也不会发生任何事情。

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:16:03.050

您在 pom.xml 中缺少 webstart 配置文件

查看 scage 示例项目中的 pom.xml：[https ://code.google.com/p/scage/downloads/detail?name=scage-example-project.zip&can=2&q=](https://code.google.com/p/scage/downloads/detail?name=scage-example-project.zip&can=2&q=)

它很大，但除其他外，它具有指定的配置文件

```
<project>
    <profiles>
        <profile>
            <id>webstart</id>
            ...
        </profile>
    </profiles>
</project> 
```

# php - 使用 Open Graph Protocol 提取 og:image 源

> ID：13130733
> 
> 赞同：2
> 
> 时间：2012-10-29T22:44:34.527
> 
> 标签：php, regex, github, facebook-opengraph

使用[https://github.com/scottmac/opengraph](https://github.com/scottmac/opengraph)

如何访问单个数组元素，例如 [image]

```
$graph = OpenGraph::fetch('http://www.avessotv.com.br/bastidores-pantene-institute-experience-pg.html');
print_r($graph); 
```

将返回

```
OpenGraph Object    
(
    [_values:OpenGraph:private] => Array
        (
            [type] => article
            [video] => http://www.avessotv.com.br/player/flowplayer/flowplayer-3.2.7.swf..
            [image] => /wp-content/thumbnails/9025.jpg
            [site_name] => Programa Avesso - Bastidores
            [title] => Bastidores Ã¢Â€ÂœPantene Institute ExperienceÃ¢Â€Â P&G
            [url] => http://www.avessotv.com.br/bastidores-pantene-institute-experience-pg.html
            [description] => Confira os bastidores do Pantene Institute Experience, da Procter &#038; Gamble. www.pantene.com.br Mais imagens:
        )

    [_position:OpenGraph:private] => 0
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:47:24.013

简单到`$graph->type`等`$graph->video`。

从记录的来源：

```
 /**
   * Helper method to access attributes directly
   * Example:
   * $graph->title
   *
   * @param $key    Key to fetch from the lookup
   */
  public function __get($key){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:48:38.440

这是[PHP 魔法](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)

利用`$image_url = $graph->image;`

# microsoft-metro - 如何在 Metro 应用程序中禁用缓存 HTTP GET，我使用的是 IXMLHTTPRequest2

> ID：13130739
> 
> 赞同：3
> 
> 时间：2012-10-29T22:45:06.023
> 
> 标签：microsoft-metro, windows-runtime, winrt-xaml, windows-store-apps, winrt-async

我正在做一个 http GET 来获取数据，我正在使用 IXMLHTTPRequest2。

如果我 GET url "http://foo.com" (curl "http://foo.com")，第二次我再次获得这个 url，服务器上的内容实际上已经改变了，但我得到的是缓存的结果。

缓存似乎只尊重 URL，所以如果不同的标头具有相同的 URL，仍然是相同的缓存结果。我试过“Cache-Control: no-cache”、“Cache Control: no-store”和“Pragma: no-cache”。API 不认可它们。

有没有办法关闭缓存或四处走动？（我正在使用的一种方法是在 URL 的末尾添加垃圾，但我感觉不太好）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:24:07.803

Prashant 在这里回答了我的问题：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/1df95d3e-68c9-4351-822a-c2cfde380248/#1df95d3e-68c9-4351-822a-c2cfde380248](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/1df95d3e-68c9-4351-822a-c2cfde380248/#1df95d3e-68c9-4351-822a-c2cfde380248)

您可以通过在请求中设置“If-Modified-Since”HTTP 标头并设置过去的时间来强制 XHR 检索最新内容。如果您可以控制服务器响应，则可以发回一个值为 0 或过去日期的 Expires HTTP 响应标头。这应该会让 XHR 为您检索最新的回复。

您只需要执行上述一项操作，无需更改客户端和服务器端代码。

客户端代码可以更改为这样的：

```
xhr->Open(...)
xhr->SetRequestHeader(L"If-Modified-Since", L"Sat, 01 Jan 2000 00:00:01 GMT");
xhr->Send(...) 
```

For changing the server side behavior if your server side code is based on ASP.net you could change your response header like this:

```
Response.Headers.Add("Expires", "0") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:24:24.960

我认为您需要使用套接字.....我认为这两个链接应该有所帮助

[C# WebClient 禁用缓存](https://stackoverflow.com/questions/3812089/c-sharp-webclient-disable-cache)

[如何在 .Net 中手动创建 HTTP 请求？](https://stackoverflow.com/questions/2109695/how-do-i-create-an-http-request-manually-in-net)

# c# - 在 asp.net MVC 视图中未正确显示法语口音

> ID：13130742
> 
> 赞同：4
> 
> 时间：2012-10-29T22:45:28.410
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个接收强类型模型的 ASP.Net MVC 视图：

`@model MyApp.Models.MyModel`

显示此模型的属性值时，

例如：`@Html.DisplayFor(model => model.myFrenchProperty)`

法语字符在浏览器中未正确显示。

例如，法语单词“Général”在浏览器中显示为“Général”。

我尝试使用 @Html.Raw(Model.myFrenchProperty) 但没有任何改变。

我的模型是使用实体框架构建的，数据来自 UTF-8 编码的数据库。

知道如何使它正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:52:21.903

您需要确保页面也使用 UTF-8 编码呈现。为此，您需要添加：

`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`

或者

`<meta charset="utf-8">`（如果您使用的是 HTML5）

在你的`<head>`标签中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:32:11.633

我正在使用带有 Devart 连接器的 PostgreSQL 数据库，问题是特定于此设置的...我的问题已解决，在连接字符串中添加 Unicode=true...似乎拥有 UTF-8 配置的数据库是不够的.. .

艾蒂安

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-03T09:32:11.367

我试图显示“Déconnecter”，但它在 HTML 中显示为 `"D&#233;connecter"`. 将 razor 模型属性传递到 jquery 函数然后将文本转换为 HTML 时，会出现此问题。

我的解决方案是将变量传递到以下内容：

"@Html.Raw(myVar)" "@Html.Raw("Déconnecter")"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-17T21:17:50.850

发生这种情况是因为当网页呈现时，Web 浏览器默认将字符显示为 HTML 编码。

为了正确显示任何法语或拉丁字符（如重音），我们需要解码所需的字符串。

```
HttpUtility.HtmlDecode(myFrenchProperty) 
```

应该做的工作。

# php - PDO Prepared Statement over ODBC Sybase“PARAM 数据流”错误

> ID：13130745
> 
> 赞同：4
> 
> 时间：2012-10-29T22:45:32.230
> 
> 标签：php, pdo, odbc, sap-ase

我正在尝试将一些旧的 PHP ODBC 查询转换为 PDO Prepared 语句，并且收到一个错误，我找不到太多信息。

错误是：

> "[DataDirect][ODBC Sybase Wire Protocol driver][SQL Server]没有与 PARAM 数据流指定的主机变量相对应的主机变量。这意味着在前面的 DECLARE CURSOR 或 SQL 命令中未使用此变量。 ( SQLExecute[3801] 在 ext\pdo_odbc\odbc_stmt.c:254)"

*   我正在使用 6 位 ID 在数据库中搜索单行，该 ID 作为 VARCHAR 存储在数据库中，但通常是 6 位数字。

*   数据库连接报告成功。

*   查询字符串传递的 ID 被验证。

*   准备好的语句导致上述错误。

else 子句中的直接备份 ODBC_EXEC 语句返回我要查找的数据。

```
//PDO Driver Connect to Sybase
try {
    $pdo = new PDO("odbc:Driver={Sybase ASE ODBC Driver};NA=server,5000;Uid=username;Pwd=password;");
    $pdo_status = "Sybase Connected";
} catch(PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

if((isset($_GET['id'])) AND ($_GET['id'] != "")) {

//Validate ID String
if(!preg_match("/^[A-Za-z0-9]{5,7}/",$_GET['id'])) {
    $query1_id = FALSE;
    echo "Invalid ID";
    exit;
} else {
    $query1_id = $_GET['id'];
}

$query1 = $pdo->prepare("SELECT * FROM People WHERE PersonId= ?");
$query1->execute(array($query1_id));
if($query1->errorCode() != 0) {
        $person_data = $query1->fetch(PDO::FETCH_ASSOC);    
        echo "Person Data from PDO: ";
        print_r($person_data);
    } else {
        $errors = $query1->errorInfo();
        echo $errors[2];
//Try the old way to confirm data is there.
        $odbc_query1 = "SELECT * FROM People WHERE PersonId='$query1_id' ";
        $person_result = odbc_exec($conn,$odbc_query1) or die("Error getting Data, Query 1");
        $person_data = odbc_fetch_array($person_result);
        echo "Person Data from ODBC_EXEC: ";
        print_r($person_data);
    } 
```

如果我使用它也会失败：

```
$query1 = $pdo->prepare("SELECT * FROM People WHERE PersonId= :id ");
$query1->execute(array(":id"=>$query1_id)); 
```

有没有人有这个错误的经验？

编辑：Sybase 手册说明了这个错误......

> 错误 3801：没有对应于 PARAM 数据流指定的主机变量。这意味着在前面的 DECLARE CURSOR 或 SQL 命令中没有使用这个变量 `%.*s'。
> 
> **说明:** Adaptive Server 无法执行请求的操作。检查您的命令是否缺少或不正确的数据库对象、变量名称和/或输入数据。

这很奇怪，因为我的错误（在顶部引用）没有告诉我哪个变量没有主机。

如果我使用也会失败...

```
$query1 = $pdo->prepare("SELECT * FROM People WHERE PersonId= :id ");
$query1->bindParam(':id',$query1_id,PDO::PARAM_STR);  //Or PARAM_INT
$query1->execute(); 
```

如果我像这样将变量放在查询中，则查询有效......

```
$query1 = $pdo->prepare("SELECT * FROM People WHERE PersonId= '$query1_id'"); 
```

所以我认为这与参数未绑定到占位符有关，但我不知道为什么。

如果我不能解决这个问题，我将不得不恢复将我的查询构建为字符串，并希望我的输入验证是防弹的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T02:33:02.250

您的问题似乎与 PHP 分配给占位符中的变量的默认数据类型有关。SQL 语句正在寻找一个数字，但 PHP 将其解释为其他内容。您可以使用占位符变量周围的引号来防止这种情况。请注意，在有效的语句中，PHP 看到的值周围有撇号 ('')：

```
$query1 = $pdo->prepare("SELECT * FROM People WHERE PersonId= '$query1_id'"); 
```

使用占位符时试试这个，它应该是一样的：

```
$query1 = $pdo->prepare("SELECT * FROM People WHERE PersonId= ':id'"); 
```

# clojure - 使用 clojure 的 stm 作为全局状态是否被认为是一种好习惯？

> ID：13130748
> 
> 赞同：2
> 
> 时间：2012-10-29T22:45:33.963
> 
> 标签：clojure

在我的大多数 clojure 程序中......以及我看到的许多其他 clojure 程序中，原子中有某种全局变量：

```
(def *program-state* 
   (atom {:name  "Program"
          :var1  1
          :var2  "Another value"})) 
```

代码中偶尔会提到这种状态。

```
(defn program-name []
    (:name @*program-state*)) 
```

阅读这篇文章[http://misko.hevery.com/2008/07/24/how-to-write-3v1l-untestable-code/](http://misko.hevery.com/2008/07/24/how-to-write-3v1l-untestable-code/)让我重新思考全局状态，但不知何故，即使我完全同意这篇文章，我认为在 atom 中使用 hash-map 是可以的，因为它提供了一个通用接口来操作全局状态数据（类似于使用不同的数据库来存储数据）。

我想对这个问题有一些其他的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:16:15.293

我认为拥有一个偶尔以交换方式更新的全局状态很好。当您开始拥有两个需要更新的全局状态并且线程开始使用它们进行通信时，我开始担心。

*   维护当前全球用户的数量很好：
    *   任何线程都可以在任何时候增加或减少这个，而不会伤害另一个
    *   如果它从你的线程下发生变化，则不会爆炸。
*   维护日志目录是有问题的：
    *   当它发生变化时，所有线程都会停止写入旧线程吗？
    *   如果两个线程发生变化，它们会收敛。
*   将其用作消息队列更加可疑：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:07:54.063

这种事情可以，但它也经常是一种设计气味，所以我会谨慎对待。

需要考虑的事情：

*   **一致性**- 代码的一部分可以更改程序名称吗？如果是这样，那么`program-name`从其他线程的角度来看，该函数的行为将不一致。不好！
*   **可测试**性——这很容易测试吗？正在更改程序名称的测试套件的一部分可以安全地与另一个正在读取名称的测试同时运行吗？
*   **多个实例**- 您是否有应用程序的两个不同部分期望同时使用不同的程序名称？如果是这样，这强烈暗示您的可变状态不应该是全局的。

要考虑的替代方案：

*   使用**ref 而不是 atom**，您至少可以确保事务中可变状态的一致性
*   使用**绑定**，您可以将可变性限制在每个线程的基础上。这解决了大多数并发问题，并且当您的全局变量像一组线程本地配置参数一样使用时会很有帮助。
*   尽可能使用**不可变的全局状态。**它真的需要可变吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T04:15:36.310

我认为拥有这样一个全局状态很好（在许多情况下它是必需的）但我会小心我的应用程序的核心逻辑具有将状态作为参数并返回更新状态而不是直接返回更新状态的函数访问全局状态。基本上我宁愿从几组函数中对全局状态进行受控访问，我程序中的所有其他内容都应该使用这些方法集来访问状态，因为这将允许我抽象出状态实现，即最初我可以开始使用内存中的原子，然后可能会移动到某个持久存储。

# php - 如果 PHP if 语句为真，则显示 div

> ID：13130750
> 
> 赞同：0
> 
> 时间：2012-10-29T22:45:55.297
> 
> 标签：php, html, if-statement, header

我在名为 login.php 的文件中有以下 PHP 脚本

```
<?php
$ref = $_SERVER['HTTP_REFERER'];
if ($ref == 'http://example.com/dir/invalid.php' || $ref == 'http://www.example.com /dir/invalid.php') {
echo '
     <div id="invalid">
         TESTTESTTESTTESTTESTTESTTESTTEST
     </div>
    ';
}
?> 
```

我故意去了 invalid.php 页面（它使用 header() 重定向到 login.php）并且这个 div 没有出现。是否与引荐来源网址实际上不是 invalid.php 或脚本有问题有关？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:50:51.020

我不认为这`HTTP_REFERER`是你认为的那样。即，它是用户从其跟随到当前页面的链接的页面。但是，它非常不可靠，因为我们依赖用户的浏览器来正确报告这个值。

我会建议我认为你需要的选项，除了我能想到的唯一一个可能没有意义......（检查网址是否与不是当前脚本的网址匹配）......所以我做了看不到您要做什么。

* * *

正如承诺的那样，有几种方法可以实现您想要实现的目标：

首先，我根本不喜欢这个解决方案，并且真的认为它很丑，但它是最接近你想要做的事情的解决方案。

无效的.php

```
require 'login.php'; // we include the file instead of referring to it 
```

登录.php

```
if ($_SERVER['SCRIPT_NAME'] == 'invalid.php')
{
    // do whatever
} 
```

您所做的与我为用户所做的主要区别在于，此处的 url 栏将显示您位于 invalid.php 而不是其他地方。这也意味着刷新不会使消息消失。

我认为更好的解决方案如下：

在您登录用户的脚本中（检查数据库和所有内容）：

```
if (!valid_login()) // pseudo-code, obviously
{
    $_SESSION['invalid_login'] = true;
    header('Location: login.php');
    // previously, we had something like this instead of the two lines above:
    // header('Location: invalid.php');
} 
```

在 login.php 中

```
if (isset($_SESSION['invalid_login']) && $_SESSION['invalid_login'])
{
    $_SESSION['invalid_login'] = false;

    // do whatever
} 
```

当然，这应该通过适当的会话设施来完成，例如在这两个文件中启动会话。您可以不使用会话变量，而是包含文件并使用普通变量或通过标头请求发送 GET 变量，但这两种解决方案都有一个问题：刷新不会使消息消失。但是，如果您要将代码从上面两个文件的顶部文件移动到`login.php`（如果它不存在，我不知道实际上是什么文件......）您可以再次使用普通变量而不是会话变量并有一个解决方案，其中刷新确实可以让它消失。在这种情况下，您可能会争辩说您的文件中包含业务逻辑和演示文稿，但有一些解决方案（例如将其保存在单独的文件中，并将其包含在`login.php`，将 html 移动到另一个文件，并将该文件包含在其中`login.php`或两者中。

# vb.net - 在 vb.net 中将年和月转换为天

> ID：13130754
> 
> 赞同：0
> 
> 时间：2012-10-29T22:46:18.540
> 
> 标签：vb.net, ssrs-2008, reporting-services

将年和月转换为天。首先转换回年和月，现在要转换回天。代码如下所示

```
if len >366
len1 = cstr (math.floor(len/365))
len = len mod 365
len1 = len * 365 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:30:42.147

[DateTime.DaysInMonth 方法](http://msdn.microsoft.com/en-us/library/system.datetime.daysinmonth.aspx)

```
Dim July as integer = 7
' daysInJuly gets 31\. 
Dim daysInJuly as integer = System.DateTime.DaysInMonth(2001, July); 
```

然后得到一年中的天数：

```
Private Function GetDaysInAYear(year As Integer) As Integer
    Dim days As Integer = 0
    Dim i As Integer = 1
    While i <= 13
        days += DateTime.DaysInMonth(year, i)
        i++
    End While
    Return days
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:09:37.977

要获得一年中的天数，您只需执行以下操作：

```
Dim year As Integer = 2012  ' Set year here
Dim totalDaysInYear As Integer = New Date(year, 12, 31).Subtract(New Date(year, 1, 1)).Days 
```

或者：（容易理解）

```
Dim year As Integer = 2012    ' Set year here
Dim d1 As New Date(year, 1, 1)
Dim d2 As New Date(year, 12, 31)
Dim totalDaysInYear As Integer = d2.Subtract(d1).Days 
```

获取月份中的天数：

```
Dim year As Integer = 2012
Dim DaysInMonth As Integer = Date.DaysInMonth(year, 11)  ' Evaluates Nov 2012 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-29T23:05:52.993

```
days = years * 365.25
years = days / 365.25 
```

# .net - 使我的样式特定于单个实例

> ID：13130755
> 
> 赞同：0
> 
> 时间：2012-10-29T22:46:19.303
> 
> 标签：.net, wpf, xaml

我的 wpf 应用程序有这种风格：

xml:

```
<Style x:Key="customTableViewDataRowStyle" TargetType="{x:Type xcdg:DataRow}"> 
```

C＃

```
this.Resources.Add(typeof(DataRow), this.FindResource("customTableViewDataRowStyle")); 
```

它修改 Xceed Datagrid 中行的外观。

这一切都很好！

但是我去我的应用程序中添加了另一个 Xceed Datagrid，它也使用了这种样式。

有没有办法让它不这样做？我可以让它只影响特定的网格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:58:29.837

您可以将样式分离为独立的 ResourceDictionary，然后仅在所需的 DataGrids 中引用 ResourceDictionary。

具有两个 DataGrid 的示例，其中只有一个具有样式集：

CustomDataGridStyles.xaml：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="{x:Type DataGrid}">
        <Setter Property="Background" Value="Red" />
        <!-- Other Style Settings -->
    </Style>

</ResourceDictionary> 
```

窗户：

```
<Window x:Class="SpecificControlStyle.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>

        <DataGrid Grid.Row="0">
            <DataGrid.Resources>
                <ResourceDictionary>
                    <ResourceDictionary.MergedDictionaries>
                        <ResourceDictionary Source="CustomDataGridStyles.xaml" />
                    </ResourceDictionary.MergedDictionaries>
                </ResourceDictionary>
            </DataGrid.Resources>
        </DataGrid>
        <DataGrid Grid.Row="1" />
    </Grid>
</Window> 
```

# c# - 有没有办法使用 GPU 调整图像大小？

> ID：13130758
> 
> 赞同：4
> 
> 时间：2012-10-29T22:46:36.233
> 
> 标签：c#, .net, gpu, imaging

有没有办法使用可通过 .NET 应用程序消耗的 GPU（显卡）来调整图像大小？

我正在寻找一种非常高效的方法来调整图像大小，并且听说 GPU 可以比 CPU（使用 C# 的 GDI+）快得多。是否有已知的实现或示例代码使用 GPU 来调整我可以在 .NET 中使用的图像大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T23:32:39.433

您是否考虑过使用 XNA 调整图像大小？[在这里，您可以了解](https://stackoverflow.com/a/12495843/1260006)如何使用 XNA 将图像作为 png/jpeg 保存到 MemoryStream 中，然后再将其重用为 Bitmap 对象：

编辑：我将在此处发布一个示例（取自上面的链接），说明如何使用 XNA。

```
public static Image Texture2Image(Texture2D texture)
{
    Image img;
    using (MemoryStream MS = new MemoryStream())
    {
        texture.SaveAsPng(MS, texture.Width, texture.Height);
        //Go To the  beginning of the stream.
        MS.Seek(0, SeekOrigin.Begin);
        //Create the image based on the stream.
        img = Bitmap.FromStream(MS);
    }
    return img;
 } 
```

我今天还发现你可以使用 OpenCV 来使用 GPU/多核 CPU。例如，您可以选择使用 .NET 包装器（例如[Emgu）](http://www.emgu.com/wiki/index.php/Main_Page)并使用其 Image 类来操作您的图片并返回 .NET Bitmap 类：

```
public static Bitmap ResizeBitmap(Bitmap sourceBM, int width, int height)
{
    // Initialize Emgu Image object
    Image<Bgr, Byte> img = new Image<Bgr, Byte>(sourceBM); 

    // Resize using liniear interpolation
    img.Resize(width, height, INTER.CV_INTER_LINEAR);

    // Return .NET Bitmap object
    return img.ToBitmap();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T16:43:52.227

我写了一个快速峰值来检查使用 WPF 的性能，尽管我不能肯定地说它使用了 GPU。

不过，请参见下文。这会将图像缩放到其原始大小的 33.5（或其他）倍。

```
public void Resize()
{
    double scaleFactor = 33.5;

    var originalFileStream = System.IO.File.OpenRead(@"D:\SkyDrive\Pictures\Random\Misc\DoIt.jpg");

    var originalBitmapDecoder = JpegBitmapDecoder.Create(originalFileStream, BitmapCreateOptions.None, BitmapCacheOption.OnLoad);

    BitmapFrame originalBitmapFrame = originalBitmapDecoder.Frames.First();

    var originalPixelFormat = originalBitmapFrame.Format;

    TransformedBitmap transformedBitmap =
        new TransformedBitmap(originalBitmapFrame, new System.Windows.Media.ScaleTransform()
        {
            ScaleX = scaleFactor,
            ScaleY = scaleFactor
        });

    int stride = ((transformedBitmap.PixelWidth * transformedBitmap.Format.BitsPerPixel) + 7) / 8;
    int pixelCount = (stride * (transformedBitmap.PixelHeight - 1)) + stride;

    byte[] buffer = new byte[pixelCount];

    transformedBitmap.CopyPixels(buffer, stride, 0);

    WriteableBitmap transformedWriteableBitmap = new WriteableBitmap(transformedBitmap.PixelWidth, transformedBitmap.PixelHeight, transformedBitmap.DpiX, transformedBitmap.DpiY, transformedBitmap.Format, transformedBitmap.Palette);

    transformedWriteableBitmap.WritePixels(new Int32Rect(0, 0, transformedBitmap.PixelWidth, transformedBitmap.PixelHeight), buffer, stride, 0);

    BitmapFrame transformedFrame = BitmapFrame.Create(transformedWriteableBitmap);

    var jpegEncoder = new JpegBitmapEncoder();
    jpegEncoder.Frames.Add(transformedFrame);

    using (var outputFileStream = System.IO.File.OpenWrite(@"C:\DATA\Scrap\WPF.jpg"))
    {
        jpegEncoder.Save(outputFileStream);
    }
} 
```

我正在测试的图像是 495 x 360。它在几秒钟内将其大小调整到超过 16k x 12k，包括保存。

在单核运行中，它以每秒 165 次左右的速度将大小调整为 1.5 倍。在 i7 和 GPU 上似乎什么都不做，20% 的 CPU 我希望在多线程时获得 5 倍以上。

性能分析显示了一个热门路径，`wpfgfx_v0400.dll`该路径是本机 WPF 图形库，并且接近 DirectX（在 Google 中查找“milcore”）。

所以它可能会加速，我不知道。

卢克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-05T10:33:11.143

是的，可以使用 GPU 来调整图像大小。这可以使用 DirectX Surfaces 来完成（例如在 C# 中使用 SlimDx）。您应该创建一个表面并将图像移动到该表面，然后您可以仅使用 GPU 将此表面拉伸到所需大小的另一个目标表面，最后从目标表面取回调整大小的图像。在这些情况下，表面的像素格式可能不同，GPU 会自动处理它。但是这里有些事情会影响此操作的性能。在 GPU 和 CPU 之间移动数据是一个耗时的过程。您可以根据自己的情况应用一些技术来提高性能，并避免 CPU 和 GPU 内存之间的额外数据传输。

# java - 使用 SOLRJ 插入 POJO 树

> ID：13130761
> 
> 赞同：0
> 
> 时间：2012-10-29T22:46:49.213
> 
> 标签：java, jakarta-ee, solr, solrj

我目前正在按照这些说明将数据添加到 SOLR： [http ://wiki.apache.org/solr/Solrj#Directly_adding_POJOs_to_Solr](http://wiki.apache.org/solr/Solrj#Directly_adding_POJOs_to_Solr)

但是，我有一个 bean 属性，它是另一个类。像下面这样的东西。是否可以以相同的方式索引？我不确定如何为此配置 solr。

```
public class User {
    @Field
    String id;

    @Field("cat")
    List<Category> categories;
}

public class Category {
    @Field
    String id;

    @Field
    String name;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:27:31.187

不幸的是，SolrJ 不支持复杂类型，只有简单类型。请参阅上一个问题 - [solrj: how to store and retrieve List via multivalued field in index](https://stackoverflow.com/questions/6633684/solrj-how-to-store-and-retrieve-listpojo-via-multivalued-field-in-index)以及未解决的问题[SOLR-1945](https://issues.apache.org/jira/browse/SOLR-1945)

# php - 跳过第一个单词的句子

> ID：13130763
> 
> 赞同：0
> 
> 时间：2012-10-29T22:46:58.057
> 
> 标签：php

我想检查一些句子的第一个单词。如果第一个单词是`For`, `And`, `Nor`, `But`, `Or`, 等，我想跳过这句话。

这是代码：

```
<?php
  $sentence = 'For me more';
  $arr = explode(' ',trim($sentence));
  if(stripos($arr[0],'for') or stripos($arr[0],'but') or stripos($arr[0],'it')){
    //doing something
  }
?> 
```

空白结果，怎么了？谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:55:25.460

Stripos 返回大海捞针中第一次出现的位置。第一次出现在位置 0，计算结果为 false。

试试这个作为替代方案

```
$sentence = 'For me more';

// make all words lowercase
$arr = explode(' ', strtolower(trim($sentence)));

if(in_array($arr[0], array('for', 'but', 'it'))) {
   //doing something
   echo "found: $sentence";
} else {
   echo 'failed';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T22:58:28.883

`preg_filter`如果您要知道要评估的字符串是什么（即您不需要解析句子），也许可以使用。

```
$filter_array = array(
    '/^for\s/i',
    '/^and\s/i',
    '/^nor\s/i',
    // etc.
}

$sentence = 'For me more';

$result = preg_filter(trim($sentence), '', $filter_array);

if ($result === null) {
    // this sentence did not match the filters
} 
```

这使您可以确定一组过滤器正则表达式模式以查看是否有匹配项。请注意，在这种情况下，我只是用作`''`“替换”值，因为您并不真正关心实际进行替换，此函数只是为您提供了一种传入正则表达式数组的好方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T22:51:43.727

在这里，`stripos`如果找到单词（在位置 0 找到），将返回 0。

如果找不到该单词，则返回 false。

你应该写：

```
if(stripos($arr[0],'for') !== false or stripos($arr[0],'but') !== false or stripos($arr[0],'it') !== false){ 
  //skip 
} 
```

# java - 基于 Java 中的共享密钥保护数据的创新/安全方法

> ID：13130764
> 
> 赞同：5
> 
> 时间：2012-10-29T22:47:07.587
> 
> 标签：java, encryption, cryptography

我一直在用 Java（我的首选编程语言）尝试一些基本的加密技术，并有一个简单的例子，它使用模幂在两个客户端对之间生成共享密钥。

但是，给定一个共享的秘密，有哪些易于实现（但安全）的方法来实际*使用*这个秘密来加密/解密或加扰/解扰通过网络发送的数据？

例如，如果我有字符串：

```
"So long, and thanks for all the fish" 
```

和共享秘密（`BigInteger`）：

```
1110278255331388386297296974141977 
```

如何以允许客户端相互理解的方式通过网络发送字符串，同时确保没有共享秘密，没有中间人可以解释它？

**我不是要求完成的实现**，只是对可以使用的算法/技术的想法或参考。我也避免依赖现有的程序或 API（如公钥/私钥），因为这只是我自己的教育目的的一个副项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:33:39.060

有一种标准的方式来做你所追求的，这就是所谓的基于密码的密钥派生。您需要使用安全的对称加密算法。您当然可以选择 RSA 之类的非对称方法，但使用共享密钥是多余的。

但是，您不想直接使用您的共享密钥。

1.  您的共享密钥的大小可能不适合用作密钥。例如，AES 作为一个不错的选择，接受 128 位和 256 位密钥，共享密钥可能不是一个很好的匹配。
2.  您选择的对称算法的密钥应该足够安全，这意味着它应该具有您的共享密钥可能缺乏的安全级别的随机性。

这正是 PBKDF2（基于密码的密钥派生函数 2）等算法的发明目的。PBKDF2 已经在标准 java 中实现，您可以使用它。它基于“密码短语”生成任意大小的安全密钥，在这种情况下，这只是共享秘密。这些算法家族有一个迭代参数，它指示应用哈希函数多少次来导出密钥。确保将其设置为较高的数字，例如几千。

我应该注意，在这种情况下，安全性（传输数据的机密性和完整性）依赖于您共享的秘密实际上是秘密的。我不知道您是如何生成它的，但是您需要确保该过程是安全的。[Diffie-Hellman 密钥交换](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)就是一个很好的例子。如果您对此不熟悉，我建议您查看并查看确保该过程安全的方法。

正如评论中已经指出的那样，您不需要（也不应该）在密码学方面进行创新以实现实际应用。您会发现您需要的任何东西都已经实施并被证明是安全的。不过，我的最后一句话还是有保留的。

# javascript - Javascript表单句柄不起作用

> ID：13130769
> 
> 赞同：0
> 
> 时间：2012-10-29T22:47:48.223
> 
> 标签：javascript, validation, return, alert

它不返回 false 并且不显示错误。见 jfiddle [http://jsfiddle.net/paYap/2/](http://jsfiddle.net/paYAp/2/)

我的JavaScipt：

```
function validateForm() {
    var error = "";
    var x=document.getElementById('fname').value;
    var y=document.getElementById('lname').value;
    /*  
    Additional variable defined here, commented out for debugging
    */
    if ((x==null || x=="") || (y==null || y==""))
      {
      error += "-First and last name required. <br />";
      }
      /*
      There were additional statements here, commented out for debugging
     */
    if (error != ""){
      alert(error);
      //document.getElementById('error').innerHTML = "Error: " + error;
      return false;
    }
} 
```

我也附上`onsubmit="return validateForm()"`了表格。

有人可以帮我看看并告诉我是否遗漏了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T22:53:27.863

您实际上可能没有返回`false`，您可能会返回，因为如果验证通过`undefined`，您不会返回。`true`

这会诱使您认为您的验证是正确的，而事实并非如此。

添加`return true;`到函数的末尾可能证明您毕竟没有返回 false。

```
function validateForm() {
    var error = "";
    var x=document.getElementById('fname').value;
    var y=document.getElementById('lname').value;
    /*  
    Additional variable defined here, commented out for debugging
    */
    if ((x==null || x=="") || (y==null || y==""))
      {
      error += "-First and last name required. <br />";
      }
      /*
      There were additional statements here, commented out for debugging
     */
    if (error != ""){
      alert(error);
      //document.getElementById('error').innerHTML = "Error: " + error;
      return false;
    }

    alert("Actually, returning true!");
    return true;
} 
```

# css - Contao CMS “忽略” CSS 媒体查询。怎么修？

> ID：13130772
> 
> 赞同：1
> 
> 时间：2012-10-29T22:47:59.767
> 
> 标签：css, contao

Contao CMS 提供了导入 .css 文件的可能性（这是将您的 css 导入这个奇怪的 CMS 的唯一方法），但会解释它们并将它们重新写入文件结构（或 DB？）的某个位置。

问题是：它无法处理现代 CSS，并且丢弃了不是基本 2002 样式 css 的所有内容。像渐变，媒体查询等......

有没有办法解决这个问题？喜欢链接到真正的 .css 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T20:13:16.960

Contao 3.2.2 不需要手动插入`<link rel=stylesheet …/>`.

1.  **将 CSS上传**到 contao 文件树。
2.  然后通过**主题**继续→为您的主题选择其图标“<strong>编辑主题的页面布局”→**编辑布局**→在“<strong>其他样式表”下方的“<strong>样式表”部分中单击“<strong>更改选择”以从服务器文件树中选择所需的 CSS。

然后，Contao 将把你的 CSS 内容*作为它生成的 CSS 的一部分*（在一个有点合成的名称下）提供，并自己`<link rel=stylesheet …/>`在你的页面中放置一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:26:00.173

编写您的自定义 css 并将其放在 files 文件夹中。

您有两种选择将 css 链接到您的模板

**1.通过主题：** 鼠标单击并选择样式表或将代码粘贴到`<link rel="stylesheet"....`相关字段的路径中。

**2.制作自定义模板：** 在菜单项“模板”中，创建一个fe_page.html5或.xhtml。将它重命名为 something.html5 将您的代码`<link rel="stylesheet"....`放在标题中。不要忘记将新模板添加到您的主题设置中（默认模板是 fe_page..）

**如何在没有 ftp 的情况下编辑 css：** 在菜单项“文件管理器”中浏览到 css 表，按蓝色方形图标。您现在可以在线编辑样式表。

以上所有内容都可以在 css3、html5 或任何您喜欢的编码中制作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:17:44.930

如果您可以访问 FTP 或其他方式将文件获取到服务器上，只需提供您的`.css`文件而不通过 CMS，并将`<link>`该文件放在标题中。我曾经使用 TextPattern 来执行此操作，因为我不想在浏览器中编辑我的 css。

# php - 如何获得以第二个数组的元素作为参数对数组的所有元素应用操作的结果数组？

> ID：13130775
> 
> 赞同：2
> 
> 时间：2012-10-29T22:48:19.300
> 
> 标签：php, arrays

好的 - 所以这个应该很容易。我有两个数组。数组一具有如下结构：

```
[
    [                                        
        'value' => 3337
        'end_time' => '2012-10-07T07:00:00+0000'
    ],
    [
        'value' => 2811
        'end_time' => '2012-10-09T07:00:00+0000'
    ],
    [                                        
        'value' => 1318
        'end_time' => '2012-10-14T07:00:00+0000'
    ] 
```

和数组2：

```
[  
    [
        '_id' => '2012-10-07'
        'value' => 50
    ],
    [
        '_id' => '2012-10-09'
        'value' => 15
    ],
    [
        '_id' => '2012-10-10'
        'value' => 2
    ]
] 
```

SO....我想根据 array1[_id] = substr(array2['end_time'], 0, 10) 将数组 1 的元素除以数组 2 的元素。

数组 2 没有数组 1 中所有 id 的结束时间值。

生成的数组应如下所示：

```
[
    '2012-10-01' => 0.11
    '2012-10-02' => 0 (if this date is not available in the second array). 
    '2012-10-03' => 0.12312
] 
```

这样做：

```
$kermit = array();
foreach($dauresult['data']['0']['values'] as $subdau) {  
    foreach($revenue['results'] as $subrev) {
          $date = substr($subdau['end_time'], 0, 10);
          if($date == $subrev['_id']) {
                $kermit[$date] = $subrev['value']/$subdau['value']; 
               } 
           }
    } 
```

我可以得到一个如下所示的数组：

```
Array
(
    [2012-09-30] => 0.0044950554390171
    [2012-10-01] => 0.019565990750623
    [2012-10-05] => 0.015487397509869
    [2012-10-07] => 0.020177562550444
    [2012-10-09] => 0.0075150300601202
    [2012-10-10] => 0.00095831336847149
    [2012-10-11] => 0.0010183299389002
    [2012-10-12] => 0.0010126582278481
    [2012-10-13] => 0.029866666666667
    [2012-10-14] => 0.029779630732579
    [2012-10-15] => 0.011926058437686
    [2012-10-18] => 0.0018844221105528
    [2012-10-19] => 0.0005941770647653
    [2012-10-21] => 0.0023781212841855
    [2012-10-27] => 0.0011820330969267
    [2012-10-28] => 0.0011467889908257
) 
```

但我不能做的是让缺失的日期（10-20、10-16 等）显示为 0。愚蠢的问题，但这让我有点发疯。有什么建议么？谢谢！-蕨类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:52:08.410

我会在第一个数组上使用[array_map 。](http://php.net/manual/en/function.array-map.php)

如果 _id 在第二个数组中不存在，回调函数将返回 0，如果存在则返回计算结果：

```
//example arrays:
$firstArray = 
[
    [
        'value' => 3337,
        'end_time' => '2012-09-30T07:00:00+0000'
    ],
    [
        'value' => 2811,
        'end_time' => '2012-10-01T07:00:00+0000'
    ]
];

$secondArray = 
[
    [
        '_id' => '2012-09-30',
        'value' => 15
    ]
];

$resultingArray = array_map
(
    function($elementFromFirstArray) use ($secondArray)
    {
        foreach($secondArray as $elementFromSecondArray)
        {
            if($elementFromSecondArray['_id'] == substr($elementFromFirstArray['end_time'], 0, 10))
            {
                return $elementFromFirstArray['value']/$elementFromSecondArray['value'];
            }
        }
        return 0;
    }, 
    $firstArray
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T23:01:17.620

可以通过使用您要查询的范围初始化数组来解决此问题。

```
$from = strtotime('2012-09-30'); $to = strtotime('2012-10-28');
for ($i = $from; $i < $to; $i += 86400) {
    $a[date('Y-m-d', $i)] = 0;
} 
```

并不总是最正确的解决方案，但它应该为您指明正确的方向。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T23:02:01.017

在我看来，您希望数组 1 中未出现在数组 2 中的日期包含在最终数组中。为此，您可以在完成您编写的循环后执行第二个循环，这只是添加第一个循环中缺少的日期。第二个循环会是这样的：

```
foreach($dauresult['data']['0']['values'] as $subdau) {  
    $date = substr($subdau['end_time'], 0, 10);
    if(!array_key_exists($date, $kermit))
        $kermit[$date] = 0;
} 
```

我相信您必须分两次进行，因为您无法在第一次通过时知道第一次的所有日期是否都在第二次。不过我可能是错的。

# dart - 如何 typedef 一个返回相同类型的另一个函数的函数？

> ID：13130776
> 
> 赞同：5
> 
> 时间：2012-10-29T22:48:18.993
> 
> 标签：dart

我正在飞镖中实现一个状态机，我想让我的状态函数返回其他状态函数，但是

```
typedef State State(foo); 
```

给我一个错误：

```
typedef 'State' illegally refers to itself 
```

有没有办法做这个typedef？显然我可以将它包装在一个类中或让它返回`Function`，但我希望用 typedef 来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T00:10:05.813

抱歉，目前规范不允许这样做。[您可以在http://dartbug.com/new](http://dartbug.com/new)打开功能请求

正如您所提到的，使用对象或返回函数将是现在最好的方法。

# php - 遍历 XML 文件节点时遇到问题

> ID：13130780
> 
> 赞同：0
> 
> 时间：2012-10-29T22:48:43.293
> 
> 标签：php, xml, foreach, tree, nodes

我已经正确解析了一个 XML 提要，并将该数据输入到我网站上的表格中。但是，我正在处理一个稍微复杂的提要，并且无法找到树节点。

XML 提要： http: [//xml.pinnaclesports.com/pinnaclefeed.aspx ?sporttype=Football&sportssubtype=NFL](http://xml.pinnaclesports.com/pinnaclefeed.aspx?sporttype=Football&sportsubtype=NFL)

声明变量：

```
$AwayLine = (string)$xml2->spread_visiting;  
$HomeLine = (string)$xml2->home_visiting; 
```

据我了解，提要被分解为（显然，我错了）：

```
foreach ($xml2->event->period[0]->spread as $Spread) {  
    $AwayLine = $Spread->spread_visiting;   
    $HomeLine = $Spread->spread_home;  
} 
```

基于 XML 路径，每个项目都被视为一个事件。每个事件都有多个时期。每个时期都有价差。每个价差都包括 spread_visiting 和 spread_home。但是，我只需要第一期的点差，或期[0]

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:54:05.097

您的陈述中缺少`events`和`periods`，因此应该是：

```
foreach ($xml2->events->event as $event) {
    foreach ($event->periods->period[0]->spread as $spread) {
    }
} 
```

不是 100% 确定，但你也可以这样写：

```
foreach ($xml2->events->event->periods->period[0]->spread as $spread) { } 
```

# uml - UML 类图中的类是否总是转换为概念数据模型中的实体？

> ID：13130781
> 
> 赞同：1
> 
> 时间：2012-10-29T22:48:46.197
> 
> 标签：uml, data-modeling, class-diagram, entity-relationship, datamodel

我目前正在为我的大学做一个项目，一位老师告诉我，我错误地认为 UML 类图中可能存在类（将其视为设计图）在数据中没有等价物模型。然后他强迫我提供一个反例来证明我的观点，但我就是想不出一个。

我查了几本关于 UML 的书，例如“学习 UML 2.0”、“应用 UML 和模式”以及傻瓜式的 UML 2，但我找不到任何关于哪些类出现在类图上的信息。我向他询问了实现类，但他告诉我它们不应该包含在类图中。所以我在这里不知所措。

在发布之前，我还检查了这个问题：

[概念 UML 类图和 ERD 之间的区别？](https://stackoverflow.com/questions/4680231/differences-between-a-conceptual-uml-class-diagram-and-an-erd)

[从概念数据模型生成 UML](https://stackoverflow.com/questions/8578645/generate-uml-from-a-conceptual-data-model)

[如何在 uml 类图中将数据与函数相关联](https://stackoverflow.com/questions/11628287/how-to-relate-data-with-function-in-uml-class-diagram)

但他们并没有真正解决我的问题。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T02:13:56.530

你和你的老师都不必要地被 UML 和概念数据建模（我认为这相当于 ER 建模）之间的差异分心。你和你的老师讨论的真正问题是分析和设计之间的区别，不管使用什么模型。

可以创建一个 UML 模型，该模型按照说明的方式描绘问题，或者按照设计的方式描绘解决方案。在第一种情况下，应该省略实现类，因为它们不属于问题域。在第二种情况下，它们应该被包括在内。第一种情况是分析。第二种情况是设计。

ER 图也存在同样的歧义。有些人，包括我自己，只使用 ER 模型和 ER 图来表示问题本身固有的数据需求。这就是“概念数据建模”最常见的含义。在这个框架中，唯一应该出现的实体是在主题本身中具有感知现实的实体，而不仅仅是数据库或应用程序内部的构造。这是分析。

但是还有很多其他人，也许是大多数人，他们使用 ER 图来描绘表模式的设计。在这个框架中，包括外键，并且联结表被提升到实体的状态，即使它们不是主题实体。只要分析和设计之间的区别保持清晰，这本质上没有错。

不幸的是，分析和设计之间的区别常常被掩盖得面目全非。SO中有几十个这样的例子。

因此，如果允许分析和设计之间的混淆潜入您和您的老师之间的讨论中，那么讨论最终可能会朝着几乎任何方向发展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T09:07:08.547

根据我对 UML 的理解，它没有定义图表中应该包含的内容。我在 IBM 网站上找到了这个例子：（图片没有显示，所以这里是链接：[http](http://www.ibm.com/developerworks/webservices/library/ws-RESTservices/) ://www.ibm.com/developerworks/webservices/library/ws-RESTservices/ ）

![在此处输入图像描述](../Images/e77bac4c7092bc6e26b4adc7a5506d85.png)

当然，servlet 不是域模型的一部分。我们用于对类建模的 UML 类图，这些类是具有属性和方法的实体。恕我直言，它们是域模型的一部分还是支持应用程序的功能类都没有关系。如果您需要将它们展示给客户，它们必须在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T09:52:41.010

“一位老师告诉我，我错误地认为 UML 类图中可能存在类（将其视为设计图）在数据模型中没有等价物。然后他迫使我提供一个反驳 -举个例子来证明我的观点，但我就是想不出一个。”

他是对的。在概念分析/概念设计阶段，UML 类图中的那些矩形框描绘了“概念”。无论“概念”是什么，你总是可以在它周围画一个 E/R 图来说明这个概念的（本质）、与之相关的其他概念，以及这些关系的本质是什么。

# java - BigDecimal compareTo() 线程安全

> ID：13130783
> 
> 赞同：1
> 
> 时间：2012-10-29T22:48:55.587
> 
> 标签：java, thread-safety, bigdecimal, compareto

我有一个 Java 应用程序，它使用类的`compareTo()`方法`BigDecimal`来分类（大）实数，读取为字符串，根据其类型（基本上，“太大”，双精度或浮点数）。应用程序每秒读取大量此类字符串，因此任何性能优化都是必不可少的。

以下是代码的简短摘录：

```
static final BigDecimal MAX_LONG    = new BigDecimal(Long.MAX_VALUE);
static final BigDecimal MAX_FLOAT   = new BigDecimal(Float.MAX_VALUE);
static final BigDecimal MAX_DOUBLE  = new BigDecimal(Double.MAX_VALUE);

String value = readValue(); // Read the number as a string

BigDecimal number = new BigDecimal(value);

if (number.compareTo(MAX_DOUBLE) > 0)
{
    ...
}
else if (number.compareTo(MAX_FLOAT) > 0)
{
    ...
}
else if (number.compareTo(MAX_LONG) > 0)
{
    ...
} 
```

所以，2个问题

1.  在多线程环境中，进行上述比较是否安全（给定静态字段）？
2.  是否有任何线程安全且更快的方法来实现上述分类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T22:56:39.260

由于 BigDecimal 是不可变的，因此它也是线程安全的。

您还应该使用`BigDecimal.valueOf()`而不是`new BigDecimal()`始终使用，以利用任何可能的缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:42:41.943

我同意那些质疑比较是否真的是瓶颈的人的观点。文件或网络 IO 时间更有可能。

如果比较确实是一个瓶颈，并且您对数据做出 IID 或类似假设，那么如果您保留一个直方图来计算每个区间内的输入并动态重新排序测试，以便最频繁的测试，那么您将需要更少的比较首先验证案例。

例如，如果有很多数字大于 ，则您当前的比较阶梯是最好的`MAX_DOUBLE`。每个数字只需要比较一次。但如果大多数数字小于或等于 ，则情况最糟糕`MAX_FLOAT`，因为每个数字都需要进行 3 次比较。

# magento - 为什么我不能使用高级系统配置禁用模块？

> ID：13130784
> 
> 赞同：0
> 
> 时间：2012-10-29T22:48:55.937
> 
> 标签：magento

我现在面临这个问题很长时间了。我无法使用 config->Advanced 禁用模块（不禁用输出）。选择禁用并保存后，输出仍然显示。

每次我都必须跳入代码以禁用它。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:57:46.770

您需要在位置的 xml 文件中执行类似的操作`/app/etc/modules`

```
<?xml version="1.0"?>
<config>
    <modules>
        <Magentocustmod_HideEmptyCategories>
            <active>true</active>
            <codePool>local</codePool>
        </Magentocustmod_HideEmptyCategories>
    </modules>
</config> 
```

现在更改 `<active>true</active>`为 `<active>false</active>`您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:06:42.253

您可能需要刷新缓存才能禁用模块**输出。**

请注意：后端所做的只是禁用**输出**而不是模块本身。

要禁用模块本身，您需要转到 app/etc/modules 中的模块 XML 文件并将活动标记设置为“假”

# powershell - 从网站集中所有网站中的 SharePoint Quicklaunch 中使用 Powershell 删除导航节点

> ID：13130785
> 
> 赞同：0
> 
> 时间：2012-10-29T22:49:00.720
> 
> 标签：powershell

我正在尝试编写一个`powershell script`遍历站点集中的所有子站点并删除不再需要的节点。

我已将我的脚本放在下面 - 但在 Get-SPWeb 上出现错误：管道已停止 - 我想我可能需要设置一个参数来停止关闭管道？任何帮助都很棒！

```
$site = Get-SPSite http://sitecollurl  

$site | get-spweb -limit all | foreach-object{ 

    $webURL = $_.url 

    $web = Get-SPWeb $webURL 

    $navigationNodes = $web.Navigation.QuickLaunch 

    ForEach ($Node in $NavigationNodes) 
    { 
        if($node.Title -eq "My User Profile") 
        { 
        $node.Delete()   
        } 
    } 
   $web.Dispose() 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T23:57:48.543

我刚遇到这个问题，所以想分享一下，注意在我的情况下，如果它没有子项，则删除所有标题为“库”的 QuickLaunch 菜单项：

```
Get-SPSite http://sitecollectionurl | get-spweb -limit all | foreach-object{

$webURL = $_.url 
$web = Get-SPWeb $webURL 
$pubWeb = [Microsoft.Sharepoint.Publishing.PublishingWeb]::GetPublishingWeb($Web)
$qlNav = $pubWeb.Navigation.CurrentNavigationNodes
$qlHeading = $qlNav | where { $_.Title -eq "Libraries" }
$qlLibraries = $qlHeading.Children

if($qlLibraries.Count -eq 0)
{
    $qlHeading.delete()
}
else 
{
    $qlLibraries | Select Title,ID
    $count = $qlLibraries.Count
    write-host "Other Libraries are listed on $url. Count = $count"
}

$pubWeb.Update()
$web.Dispose

} 
```

显然替换`http://sitecollectionurl`为您自己的网站集 URL，以及`libraries`您尝试删除的任何标题。

担

# c# - 通过代码选择多个Listbox项

> ID：13130788
> 
> 赞同：5
> 
> 时间：2012-10-29T22:49:19.520
> 
> 标签：c#, listbox

嗨，我已经搜索了一段时间，似乎找不到解决我的问题的方法，我尝试了多种方法通过代码在列表框中选择多个项目，但是没有一个有效，我得到的最好结果是 1 个选定项目在我的列表框中。

基本上我想选择多个相同值的项目。

下面是我的代码，对不起，如果我看起来像新手，但我是编程新手，还在学习基本的东西。

```
 foreach (string p in listBox1.Items)
 {
           if (p == searchstring) 
           {
                 index = listBox1.Items.IndexOf(p);
                 listBox1.SetSelected(index,true);

           }
 } 
```

如您所见，我试图告诉程序循环遍历列表框中的所有项目，并为每个等于“searchstring”的项目获取索引并将其设置为选中。

然而，这段代码所做的只是选择列表中等于“searchstring”的第一个项目使其被选中并停止，它不会遍历所有“searchstring”项目。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T23:05:04.690

正如评论中所建议的，您应该根据需要设置`SelectionMode`为`MulitSimple`or `MultiExpanded`，但您还需要使用`for`or`while`循环而不是`foreach`，因为`foreach`循环不允许在迭代期间更改集合。因此，即使设置此属性也不会使您的代码运行，您将获得异常。尝试这个：

```
for(int i = 0; i<listBox1.Items.Count;i++)
{
     string p = listBox1.Items[i].ToString();
     if (p == searchstring)
     {
          listBox1.SetSelected(i, true);

     }
} 
```

您可以在使用设计器时在“属性”窗口中设置 SelectionMode，也可以在`Form`使用此代码的构造函数中设置 SelectionMode：

```
listBox1.SelectionMode = System.Windows.Forms.SelectionMode.MultiSimple; 
```

# facebook - 从 Wordpress 自动发布到现有的 Facebook 页面

> ID：13130789
> 
> 赞同：1
> 
> 时间：2012-10-29T22:49:21.083
> 
> 标签：facebook, wordpress

我开发了一个托管在客户端服务器上的 Wordpress 站点。客户端不想在服务器上启用 SSL，但希望能够从 WP 自动发布到现有的 FB 页面。这可能吗？我知道有几个很棒的插件，但它们都需要创建一个 FB 应用程序。客户不想这样做，他们想使用他们现有的 FB 页面。我认为我可能会进行一些额外的编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:16:55.610

您可以使用此插件设置他们的 Facebook 页面：[https](https://www.facebook.com/networkedblogs) ://www.facebook.com/networkedblogs 。它将允许博客文章自动发布在 Facebook 页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T00:35:52.470

有许多 API 可用于处理页面：

[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

我不确定您到底想从 WP 中做什么，但可能有一种方法可以通过 Page API 做到这一点。请注意，使用页面需要您有一个页面 access_token，您需要设置它。

# git - Git - 本地更改损坏的松散对象

> ID：13130791
> 
> 赞同：0
> 
> 时间：2012-10-29T22:49:29.627
> 
> 标签：git, version-control

当 Ubuntu 显然崩溃（一切都被冻结，我什至无法移动鼠标指针）迫使我硬重启计算机时，我正在本地处理一个项目（我没有时间推到原点）。

现在，当我尝试使用任何 git 命令时，它一直在说：

```
error: object file .git/objects/5b/44c9bbc189d41c9eff05fdb381ebd2dc83c1e3 is empty
fatal: loose object 5b44c9bbc189d41c9eff05fdb381ebd2dc83c1e3 (stored in .git/objects/5b/44c9bbc189d41c9eff05fdb381ebd2dc83c1e3) is corrupt 
```

我没有我所做工作的远程副本。我实际上是在一个名为`activity`.

我怎样才能恢复它？我真的不想在干净的 git-repo 克隆上复制更改，因为它会丢失所有以前的提交消息......

以下类似的帖子（如果它似乎不适用于我的情况）这里有一些输出：

```
$ git fsck --full      
Checking object directories: 100% (256/256), done.
error: object file .git/objects/18/c482efa7845af0ab2d2ebc19370ca6645cda68 is empty
fatal: loose object 18c482efa7845af0ab2d2ebc19370ca6645cda68 (stored in .git/objects/18/c482efa7845af0ab2d2ebc19370ca6645cda68) is corrupt 
```

我还使用以下（相同）输出运行 ls-tree：

```
$ git ls-tree 5b44c9bbc189d41c9eff05fdb381ebd2dc83c1e3        
error: object file .git/objects/5b/44c9bbc189d41c9eff05fdb381ebd2dc83c1e3 is empty
fatal: loose object 5b44c9bbc189d41c9eff05fdb381ebd2dc83c1e3 (stored in .git/objects/5b/44c9bbc189d41c9eff05fdb381ebd2dc83c1e3) is corrupt 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:02:42.417

如果您刚刚开始在此存储库上工作并且您的工作树没问题，请启动一个新的存储库。这次将备份推送到提供免费私人存储库的 bitbucket。请记住经常提交并推动您的更改。

```
git show SHA1 
```

也可以提供帮助。

# php - GooglePlus API - (401) 无效凭据错误

> ID：13130793
> 
> 赞同：1
> 
> 时间：2012-10-29T22:50:05.137
> 
> 标签：php, oauth-2.0, google-plus

我们的代码可以完美地访问 Googleplus Api，但现在它莫名其妙地不再工作，而是在调用此行时返回“(401) Invalid Credentials”错误：

```
$me = $plus->people->get('me'); 
```

这是完整的代码片段（php）：

```
try
{
    $client = new apiClient();

    $client->setApplicationName("Google OAuth");
    $client->setClientId(GOOGLE_API_CLIENT_ID);
    $client->setClientSecret(GOOGLE_API_CLIENT_SECRET);
    $client->setRedirectUri(GOOGLE_API_REDIRECT_URI);
    $client->setDeveloperKey('XXX');
    $client->setScopes(array('https://www.googleapis.com/auth/plus.me'));

    $plus = new apiPlusService($client);

    $oauth2 = new apiOauth2Service($client);

    $client->authenticate();
    $token = $client->getAccessToken();

    if (isset($token))
        $client->setAccessToken($token);

    if ($client->getAccessToken()) {
         $me = $plus->people->get('me');
    }
}
catch (Exception $x)
{
    echo "Stack: " . $x->getTraceAsString() . "<br />";
    echo "Message: " . $x->getMessage() . "<br />";
    echo "File: " . $x->getFile() . "<br />";
    echo "Line: " . $x->getLine(). "<br />";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-06T07:27:12.080

当用户**拒绝访问**我的应用程序并且令牌保留在数据库（或会话）中时，我遇到了同样的错误。**API 试图使用旧令牌进行身份验证**。你需要检查

```
if(strpos($x->getMessage(), 'Invalid Credentials')) {
   unset($_SESSION['access_token'];
} 
```

并从您的数据库中删除任何相关数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:56:10.897

据我所知，一切都已检查，与您的帐户关联的凭据可能出现问题。

要验证这一点，请尝试使用其他帐户访问 API 或尝试从 Google 帐户撤消您的应用程序。要从您的帐户中撤销您的申请：

1.  导航到此页面：[https ://www.google.com/settings/account](https://www.google.com/settings/account)
2.  单击**安全**链接，然后单击页面底部的**管理访问按钮。**
3.  找到与您的站点对应的应用程序，然后单击

在您的站点/应用程序被撤销后，返回您的站点，然后重新进行身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T15:42:58.277

当您使用相同的凭据从其他设备登录然后注销时会导致此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:40:12.020

什么失败了？第一次授权，还是第二次获得令牌？

检查发送的 URL，检查问题会更容易。并且：Google 可能已经更改了他们的 oAuth API？

# c# - 滚动一个 3D 对象，它的纹理向上

> ID：13130794
> 
> 赞同：1
> 
> 时间：2012-10-29T22:50:07.490
> 
> 标签：c#, windows, xna

所以我正在构建一个 Windows 游戏，并且我有一些文本作为图元上的纹理。我正在尝试向上滚动原语，但无法做到这一点。我试过简单地为 Vector3 的 Y 位置添加一个值，但这里有问题。

我用以下方法初始化顶点：

```
verts = new VertexPositionTexture[4];
verts[0] = new VertexPositionTexture(new Vector3(-xPosition, yPosition, 0), new        Vector2(0,0));
verts[1] = new VertexPositionTexture(new Vector3(xPosition, yPosition, 0), new Vector2(1, 0));
verts[2] = new VertexPositionTexture(new Vector3(-xPosition, negY, 0), new Vector2(0, 1));
verts[3] = new VertexPositionTexture(new Vector3(xPosition, negY, 0), new Vector2(1, 1)); 
```

然后，当我尝试通过添加到 Y 坐标来使其向上滚动时，可能会发生几件事。

如果我像这样添加 y 坐标的两个变量：

```
yPosition += .01f;
negY += .01f;

verts[0].Position.Y = yPosition;
verts[1].Position.Y = yPosition;
verts[2].Position.Y = negY;
verts[3].Position.Y = negY; 
```

纹理，或原语一起甚至不再出现。如果我注释掉 negY += .01f，图元的顶部会向上滚动，但这会开始明显扭曲纹理。为什么这不起作用？！为什么加仓会破坏整个交易？

# qt - Phonon 的 VolumeSlider 不会改变音量

> ID：13130804
> 
> 赞同：1
> 
> 时间：2012-10-29T22:51:02.323
> 
> 标签：qt, qt4, pyqt, pyqt4, phonon

我正在尝试创建一个`VolumeSlider`小部件来改变我的音频输出的音量。

```
log.debug("Starting audio player (%s)..." % url)
mediaSource = Phonon.MediaSource(url)
mediaSource.setAutoDelete(True)

self.player = Phonon.createPlayer(Phonon.VideoCategory, mediaSource)
self.player.setTickInterval(100)
self.player.tick.connect(self.updatePlayerLength)
self.mediaSlider.setMediaObject(self.player)

audioOutput = Phonon.AudioOutput(Phonon.MusicCategory)
Phonon.createPath(self.player, audioOutput)
self.mediaVolumeSlider.setAudioOutput(audioOutput)

self.player.play() 
```

但是，即使我可以移动音量滑块，实际音量也不会改变。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:16:07.560

我从未使用过[Phonon.createPlayer](http://doc.qt.digia.com/4.8-snapshot/phonon.html#createPlayer)，因为 API 看起来完全令人费解。显然，它应该是在媒体对象和音频输出之间创建路径的“便利”功能。但它只提供对*媒体对象*的引用。似乎无法访问*音频输出对象*，这似乎使它完全没用（但我很可能遗漏了一些东西）。

无论如何，我认为显式创建路径要方便得多，以便清楚所有部分是如何连接在一起的。

以下代码适用于 Linux 和 WinXP：

```
self.media = Phonon.MediaObject(self)
self.video = Phonon.VideoWidget(self)
self.audio = Phonon.AudioOutput(Phonon.VideoCategory, self)
Phonon.createPath(self.media, self.audio)
Phonon.createPath(self.media, self.video)
self.slider = Phonon.VolumeSlider(self)
self.slider.setAudioOutput(self.audio) 
```

# ruby-on-rails - has_and_belongs_to_many 关系的自定义 Active Admin 表单输入

> ID：13130809
> 
> 赞同：5
> 
> 时间：2012-10-29T22:52:05.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, associations, activeadmin

我有一个非常简单的模型

```
class Lifestyle < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :profiles
end 
```

有`has_and_belongs_to_many`关系的`Profile`

```
class Profile < ActiveRecord::Base
  attr_accessible ...

  belongs_to :occupation

  has_and_belongs_to_many :lifestyles
  accepts_nested_attributes_for :lifestyles
end 
```

我想使用 ActiveAdmin 来编辑 Profile 对象，但还要将 Lifestyles 分配给配置文件。它应该类似于处理`belongs_to :occupation`，因为这是由 ActiveAdmin 自动整理到一个带有预填充可用职业的选项的保管箱中的。

我尝试使用`has_many`表单构建器方法，但这只能让我显示一个表单以输入 Lifestyle 的名称，并且在提交时，它返回了一个错误。

```
 f.object.lifestyles.build
    f.has_many :lifestyles do |l|
      l.input :name
    end 
```

我得到的错误：

```
Can't mass-assign protected attributes: lifestyles_attributes 
```

**对我来说完美的方法是构建几个复选框**，一个用于数据库中的每个生活方式。选中表示生活方式与配置文件相关联，未选中表示删除关系。

我非常怀疑这是否可以使用 ActiveAdmin 而不必创建非常复杂的逻辑来处理这个问题。**如果您能给出您的意见并建议我是否应该这样做或以不同的方式处理它，我将非常感激。**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T20:09:41.520

经过一番研究，我准备回答我自己的问题。

首先，我要感谢@Lichtamberg 提出的修复建议。但是，这只会使事情复杂化（也涉及安全性，尽管在这种情况下不是问题），并且无助于我达到理想的解决方案。

深入挖掘，我发现这是 Rails 中非常常见的场景，实际上在[Ryan Bates 的截屏视频 #17](http://railscasts.com/episodes/17-habtm-checkboxes)中对此进行了解释。

因此，在 Rails 中，如果您有一个 has_and_belongs_to_many（简称 HABTM）关联，您可以通过此方法轻松设置其他关联对象的 id：

```
profile.lifestyle_ids = [1,2] 
```

如果您为 Lifestyle_ids 设置了 attr_accessible，这显然适用于表单：

```
class Profile < ActiveRecord::Base
  attr_accessible :lifestyle_ids
end 
```

在 ActiveAdmin 中，因为它使用[Formtastic](http://rdoc.info/github/justinfrench/formtastic)，所以您可以使用此方法输出正确的字段（在本例中为复选框）：

```
f.input :lifestyles, as: :check_boxes, collection: Lifestyle.all 
```

另外，我已经简化了我的表单视图，所以现在只是这样：

```
 form do |f|
    f.inputs # Include the default inputs
    f.inputs "Lifestlyes" do # Make a panel that holds inputs for lifestyles
      f.input :lifestyles, as: :check_boxes, collection: Lifestyle.all # Use formtastic to output my collection of checkboxes
    end
    f.actions # Include the default actions
  end 
```

好的，现在这在视图中完美呈现，但如果我尝试提交我的更改，它会给我这个数据库错误：

```
PG::Error: ERROR:  null value in column "created_at" violates not-null constraint
: INSERT INTO "lifestyles_profiles" ("profile_id", "lifestyle_id") VALUES (2, 1) RETURNING "id" 
```

我发现这是因为 Rails 3.2 不会自动更新 HABTM 关联表的时间戳（因为它们是额外的属性，而 Rails 只处理`_id`属性。

有两种解决方案可以解决此问题：

1.  要么将关联转换为 hm:t ( `has_many, :through =>`)
2.  或从表中删除时间戳

我将选择 2)，因为我永远不需要时间戳或任何额外的属性。

我希望这可以帮助其他有同样问题的人。

**编辑：** @cdesrosiers 最接近解决方案，但在阅读他的答案之前，我已经写了这个答案。无论如何，这还是很棒的。我学到了很多东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:01:59.500

Active Admin 在 formtastic 上创建了一个精简的 DSL（域特定语言），因此当您需要表单自定义时，最好查看[formastic 文档。](https://github.com/justinfrench/formtastic)在那里，您会发现您可以使用它`f.input :lifestyles, :as => :check_boxes`来修改`has_and_belongs_to_many`关系。

我说“可能”是因为我自己没有针对您的特定情况尝试过这个助手，但是这些东西倾向于自动工作，所以试试看。

`accepts_nested_attributes_for :lifestyles`此外，除非您真的想修改`lifestyles`from的属性，否则您可能不需要`profiles`，我认为这在使用活动管理员时不是特别有用（直接修改`lifestyles`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:10:06.047

添加

```
attr_accessible :lifestyles_attributes 
```

费：

```
class AccountsController < ApplicationController
  attr_accessible :first_name, :last_name
end 
```

# vb.net - 无法从单独的线程更新 UI

> ID：13130814
> 
> 赞同：0
> 
> 时间：2012-10-29T22:52:23.120
> 
> 标签：vb.net, winforms, multithreading, user-interface

我一直在搞乱这里给出的答案 [如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c)

我收到错误 Method 'System.Windows.Forms.Label' Text not found from the following code

```
Private Delegate Sub setControlPropertyThreadSafeDelegate(control As Control, propertyName As String, propertyValue As Object)

Public Sub setControlPropertyThreadSafe(control As Control, propertyName As String, propertyValue As Object)
    If control.InvokeRequired = True Then
        control.Invoke(New setControlPropertyThreadSafeDelegate(AddressOf setControlPropertyThreadSafe), New Object() {control, propertyName, propertyValue})
    Else
        control.GetType().InvokeMember(propertyName, Reflection.BindingFlags.SetProperty, Nothing, control, New Object() {control, propertyName, propertyValue}) 'This is where the error occurs
    End If
End Sub 
```

从一个单独的线程中，我使用以下行调用此方法

```
UI.setControlPropertyThreadSafe(UI.lblExcel, "Text", "Inserting Data into YTD Template") 
```

任何有关此错误的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:00:08.920

线

```
control.GetType().InvokeMember(propertyName, Reflection.BindingFlags.SetProperty, _
    Nothing, control, New Object() {control, propertyName, propertyValue}) 
```

应该

```
control.GetType().InvokeMember(propertyName, Reflection.BindingFlags.SetProperty, _
    Nothing, control, New Object() {propertyValue}) 
```

最后一个参数`InvokeMember`是方法的参数列表，对于属性设置，它就是您希望设置的值。您链接到的问题是正确的。

# firefox - FireFox 中的同步 CSS3 过渡不平滑

> ID：13130817
> 
> 赞同：1
> 
> 时间：2012-10-29T22:52:57.397
> 
> 标签：firefox, css, css-transitions, transition

我正在尝试使用 CSS3 过渡创建选定或悬停菜单效果。我通过同时为border-left-width和padding-left设置动画来做到这一点。边框增加了 6 像素，内边距减少了 6 像素，速度均为 0.3 秒。

在 Chrome 中，两者的动画速度相同并且看起来很流畅。在 IE 中，过渡是即时的（显然没有过渡/动画），并且看起来不错。在 Firefox 中，边框和内边距同时动画，但它出现在不同的时间间隔或其他东西上，使文本和容器四处弹跳，看起来很紧张。

这是一个 Fiddle 示例： http: [//jsfiddle.net/crisp330/w7phH/1/](http://jsfiddle.net/crisp330/w7phH/1/) （查看 FF 和 Chrome 之间的区别？）

有没有办法让 FireFox 像 Chrome 一样流畅地制作动画？我知道我可以使用替代方法，例如在 LI 中定位另一个元素并为其设置动画……但是这种方法太干净了！

这是 CSS3 过渡的主要内容（有关工作示例，请参见 jsFiddle）：

```
ul li {
    padding-left: 12px;
    border: 0 none;
}

ul li:hover {
    padding-left: 6px;
    border-left: 6px solid #d17519;
    transition: border-left-width .3s, padding-left .3s;
    -moz-transition: border-left-width .3s, padding-left .3s;
    -webkit-transition: border-left-width .3s, padding-left .3s;
    -o-transition: border-left-width .3s, padding-left .3s;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:12:07.153

您真正的问题是 Firefox 允许非整数像素填充值，但仅允许整数设备像素边框值（因为事实证明网页依赖于整数宽度的边框）。Chrome 将两者都强制为整数像素，所以事情就在那里解决了。目前。直到他们开始进行亚像素填充。但是在 Firefox 中，只要边框从略小于半整数变为略大​​于半整数，就会出现 1-device-px 反弹。

不幸的是，这里真的没有一个很好的解决方案。例如，请参阅[http://robert.ocallahan.org/2008/01/subpixel-layout-and-rendering_22.html](http://robert.ocallahan.org/2008/01/subpixel-layout-and-rendering_22.html)以了解 WebKit 方法导致的问题的描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-13T06:51:41.187

显然，它周围有一个 hack，即为 firefox 添加一些旋转。然而，该解决方案在最终输出中提供了轻微的旋转，但提供了平滑的过渡。

```
ul li:hover {
    -moz-transform: rotate(0.02deg);
} 
```

取自[本网站的解决方案](https://gielberkers.com/how-to-fix-shaking-css-transitions-in-firefox/)

# r - 为什么当我指定它时它不会被读取为数字？

> ID：13130818
> 
> 赞同：1
> 
> 时间：2012-10-29T22:52:57.023
> 
> 标签：r, csv

我把它缩小到一个非常小的例子，所以我确信这是非常愚蠢的。

我有`test.delete`这些内容的文件：

```
Rock,bird
1350909372121900000,55.20000
1350909372318100000,55.30000
1350909382020900000,55.20000
1350909382029600000,55.20000
1350909384311100000,55.20000 
```

然后我做：

```
test = read.csv('test.delete', colClasses=c('character','numeric')) 
```

但所有列似乎都被读作字符：

```
> apply(test, 2, class)
       Rock        bird
"character" "character" 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:59:12.697

`read.csv`正在按您的意愿工作。你在`apply`这里误用了。

如果您`str`在导入的数据上运行，您应该会看到另一个变量是数字的。但是当你调用 时`apply`，数据框会被强制转换为一个矩阵，它只处理一种数据类型，并且所有内容都被强制转换为字符。

检查列类的更安全方法是使用`lapply`，因为 data.frame 实际上是一个列表。

# symfony - PhpStorm 自动完成 Symfony2 与其他地方的源

> ID：13130821
> 
> 赞同：3
> 
> 时间：2012-10-29T22:53:05.507
> 
> 标签：symfony, phpstorm

无论如何，PhpStorm 是否可以对其进行配置，以便它可以查看 Symfony2 源代码，而无需在我的活动项目中。

我问的原因是我已经以推荐的方式设置了我的项目，所以我的存储库只有我自己的代码（不是 Symfony2 代码）。由于这个设置，PhpStorm 不能自动完成任何 Symfony 的东西，因为它不知道代码在哪里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T23:02:12.290

转到设置-> PHP->（包含路径）-> 选择文件系统上的目录。

它将包含在项目窗口的“外部库”中。

# html - 为什么 FireFox 会在离 div 边缘那么远的地方绘制轮廓？

> ID：13130827
> 
> 赞同：2
> 
> 时间：2012-10-29T22:54:03.993
> 
> 标签：html, css, firefox

风格：

```
#logo {
    position: absolute;
    top: 14px;
    left: 14px;
    width: 120px;
    height: 72px;

    background-color: #abc;
    color: black;
    outline: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.75);

    /* The background image is set inline */
} 
```

JSF中：

[http://jsfiddle.net/CF7P2/](http://jsfiddle.net/CF7P2/)

铬合金：

![铬合金](../Images/d9ef44e9a2685b0c7715cc1264a85baf.png)

火狐：

![火狐](../Images/3827881422956c09daa5e67f47265a1f.png)

为什么 FireFox 版本的边距离框这么远？我可以阻止它这样做，还是可以使用其他方法获得相同的视觉效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T00:00:06.627

在 Firefox 中，向外`box-shadow`推。`outline`（不确定是错误还是功能...）

## 方法一

我会通过将它包装在另一个中来实现你想要做的事情`div`，并将其`box-shadow`应用于那个。

像这样：

[**小提琴**](http://jsfiddle.net/CF7P2/2/)

```
<div id='logo_wrapper'> ... </div>

<!-- -------------------- -->

#logo, #logo_wrapper {
    width: 120px;
    height: 72px;
}
#logo_wrapper {
    position: absolute;
    top: 14px;
    left: 14px;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.75);
}
#logo {
    background-color: #abc;
    color: black;
    outline: 1px solid rgba(255, 255, 255, 0.2);

    /* The background image is set inline */
} 
```

## 方法二

`outline-offset`如果您不想使用包装器，可以使用Firefox CSS hack `div`。现在，请不要问我为什么用;`21px`代替 `15px`我通过测试达到了这个值......它*应该*与`15px`.

[**小提琴**](http://jsfiddle.net/CF7P2/3/)

```
body {
    background-color: #444;
}

#logo {
    position: absolute;
    top: 14px;
    left: 14px;
    width: 120px;
    height: 72px;

    background-color: #abc;
    color: black;
    outline: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.75);

    /* The background image is set inline */
}
#logo, x:-moz-any-link {
    outline-offset: -21px;
} 
```

# java - 在 Spring 的 RequestMapping 中，{parameter:.+} 是否与 {parameter} 不同

> ID：13130829
> 
> 赞同：3
> 
> 时间：2012-10-29T22:54:07.723
> 
> 标签：java, spring, spring-mvc

我正在查看一些使用 RequestMapping 的 Spring 代码，如下所示：

```
@RequestMapping("/foo/{bar:.+}") 
```

这在功能上与以下有什么不同吗？

```
@RequestMapping("/foo/{bar}") 
```

据我所知，RegExp 始终应用于斜杠之间的段，因此两者应该是等价的（尽管 .+ 可能会说“非空？）。

我想另一种表达问题的方式可能是：

Spring`{bar}`相当于`{bar:.*}`or`{bar:.+}`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T02:45:09.830

使用一个小测试进行验证 -`@RequestMapping("/foo/{bar:.+}")`原因是如果它是，`.*`则意味着它将映射到相同的请求映射方法，但它不会。`/foo/``/foo/something`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:00:17.987

`.+`-> 说 1 或更多
`.*`-> 会说 0 或更多...

# asp.net-mvc-4 - 如何配置 MVC 的样式捆绑顺序？

> ID：13130833
> 
> 赞同：23
> 
> 时间：2012-10-29T22:54:26.783
> 
> 标签：asp.net-mvc-4, bundling-and-minification

我的网络应用程序使用带有 jquery-ui 和 jqgrid 的大图标集。
为了在升级 jquery-ui 或 jqgrid 时轻松维护对 CSS 的更改以适应较大的图标，我有一个单独的 CSS 文件，其中有一堆覆盖。

正如你可以想象的那样，这个覆盖文件*必须*包含在 jquery-ui 样式表和 jqgrid 样式表之后。

我把我所有的样式表像这样放在一个包中

```
bundles.Add(new StyleBundle("~/Content/dark-hive/allstyles").Include(
    "~/Content/dark-hive/jquery-ui-1.8.23.custom.css",
    "~/Content/ui.jqgrid.css",
    "~/Content/jquery-ui-fixes.css",
    "~/Content/icons.css",
    "~/Content/site.css")); 
```

但它是这样渲染的！

```
<link href="/Content/dark-hive/jquery-ui-1.8.23.custom.css" rel="stylesheet"/>
<link href="/Content/jquery-ui-fixes.css" rel="stylesheet"/>
<link href="/Content/ui.jqgrid.css" rel="stylesheet"/>
<link href="/Content/icons.css" rel="stylesheet"/>
<link href="/Content/site.css" rel="stylesheet"/> 
```

如何配置我的捆绑包以正确的顺序呈现？

**更新**
好吧，这很愚蠢，但它有效。

无论我做什么，文件总是会错误地呈现。所以我尝试了一些愚蠢的方法，首先添加了 jquery-ui-fixes.css，最后添加了 jquery-ui-1.8.23.custom.css。

突然我的订单是

```
<link href="/Content/jquery-ui-fixes.css" rel="stylesheet"/>
<link href="/Content/dark-hive/jquery-ui-1.8.23.custom.css" rel="stylesheet"/>
<link href="/Content/ui.jqgrid.css" rel="stylesheet"/>
<link href="/Content/icons.css" rel="stylesheet"/>
<link href="/Content/site.css" rel="stylesheet"/> 
```

我将我的 javascript 文件重命名为 jqueryuifixes.css，现在它的顺序保留在较低的 js 文件中。

我在想，如果样式表的名称中有 - ，由于某种原因它首先被优先考虑，并且它的顺序与其他带有 - 的文件一起维护。

如果有人能解释这一点，我会给他们支票。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-29T23:01:31.010

如果您单独包含每个文件，则捆绑包将尊重您的订单...

```
var bundle = new Bundle("~/Content/dark-hive/allstyles", new StyleBundle());           
bundle.Include("~/Content/dark-hive/jquery-ui-1.8.23.custom.css");
bundle.Include("~/Content/ui.jqgrid.css");
bundle.Include("~/Content/jquery-ui-fixes.css");
bundle.Include("~/Content/icons.css");
bundle.Include("~/Content/site.css");
bundles.Add(bundle); 
```

**更新**

即使使用显式顺序，您也会发现有一个相当方便的内置排序系统，它首先对特定命名的文件进行排序。要完全清除它，您可以使用：

```
bundles.FileSetOrderList.Clear(); 
```

您可以使用以下命令添加您自己的自定义排序：

```
BundleFileSetOrdering ordering = new BundleFileSetOrdering("My Order");
ordering.Files.Add("jquery.js");

bundles.FileSetOrderList.Clear();
bundles.FileSetOrderList.Add(ordering); 
```

从本质上讲，有一个庞大的内置文件列表，这些文件将在任何不在列表中的文件之前按特定顺序放置 - 但这些选项可让您控制。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-13T00:51:57.283

您可以创建自定义捆绑程序并覆盖 OrderFiles 方法

```
public class CustomBundleOrderer : IBundleOrderer
{
    public IEnumerable<FileInfo> OrderFiles(BundleContext context, IEnumerable<FileInfo> files)
    {
        return files;
    }
} 
```

然后按照您希望它们被捆绑的顺序传递您的 css 文件

```
var bundle = new StyleBundle("~/Content/dark-hive/allstyles")
{
    Orderer = new CustomBundleOrderer()
};

bundle.Include(
    "~/Content/dark-hive/jquery-ui-1.8.23.custom.css",
    "~/Content/ui.jqgrid.css",
    "~/Content/jquery-ui-fixes.css",
    "~/Content/icons.css",
    "~/Content/site.css");

bundles.Add(bundle); 
```

# ruby-on-rails - Ruby On rails：需要在任何 rails 命令之前运行 /bin/bash

> ID：13130836
> 
> 赞同：0
> 
> 时间：2012-10-29T22:54:59.717
> 
> 标签：ruby-on-rails, linux, bash

每次登录服务器时，在运行 /bin/bash 之前，我都无法运行任何 rails 命令；见下文

```
Last login: Mon Oct 29 16:28:07 2012 from natint3.company.com
user1@company.com [~]# rails -v
/usr/lib64/ruby/site_ruby/1.8/rubygems.rb:926:in `report_activate_error': Could not find RubyGem rails (>= 0) (Gem::LoadError)
    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:244:in `activate_dep'
    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:236:in `activate'
    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:1307:in `gem'
    from /usr/bin/rails:18
user1@company.com [~]# rvm info

ruby-1.9.3-p194:

system:
uname:       "Linux box726.bluehost.com 2.6.32-20120131.55.1.bh6.x86_64 #1 SMP Tue Jan 31 15:43:27 EST 2012 x86_64 x86_64 x86_64 GNU/Linux"
system:      "unknown/libc-2.12/x86_64"
bash:        "/ramdisk/bin/bash => GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)"
zsh:         "/usr/bin/zsh => zsh 4.3.10 (x86_64-redhat-linux-gnu)"

rvm:
version:      "rvm 1.16.17 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
updated:      "4 hours 10 minutes 5 seconds ago"

ruby:
interpreter:  "ruby"
version:      "1.9.3p194"
date:         "2012-04-20"
platform:     "x86_64-linux"
patchlevel:   "2012-04-20 revision 35410"
full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]"

homes:
gem:          "/home3/user1/.rvm/gems/ruby-1.9.3-p194"
ruby:         "/home3/user1/.rvm/rubies/ruby-1.9.3-p194"

binaries:
ruby:         "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
irb:          "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
gem:          "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
rake:         "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/rake"

environment:
PATH:         "/home3/user1/.rvm/gems/ruby-1.9.3-p194/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global/bin:/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin:/home3/user1/.rvm/bin:/usr/local/jdk/bin:/home3/user1/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home3/user1//ruby/gems/bin:/home3/user1//ruby/gems:/home3/user1/bin"
GEM_HOME:     "/home3/user1/.rvm/gems/ruby-1.9.3-p194"
GEM_PATH:     "/home3/user1/.rvm/gems/ruby-1.9.3-p194:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global"
MY_RUBY_HOME: "/home3/user1/.rvm/rubies/ruby-1.9.3-p194"
IRBRC:        "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
RUBYOPT:      ""
gemset:       ""

user1@company.com [~]# 
```

在我运行 /bin/bash 之后，我有不同的行为

```
user1@company.com [~]# /bin/bash
user1@company.com [~]# rails -v
Rails 3.2.8
user1@company.com [~]# rvm info

RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example.

system:

system:
uname:       "Linux box726.bluehost.com 2.6.32-20120131.55.1.bh6.x86_64 #1 SMP Tue Jan 31 15:43:27 EST 2012 x86_64 x86_64 x86_64 GNU/Linux"
system:      "unknown/libc-2.12/x86_64"
bash:        "/ramdisk/bin/bash => GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)"
zsh:         "/usr/bin/zsh => zsh 4.3.10 (x86_64-redhat-linux-gnu)"

rvm:
version:      "rvm 1.16.17 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
updated:      "4 hours 11 minutes 9 seconds ago"

homes:
gem:          "/home3/user1//ruby/gems"
ruby:         "/home3/user1/.rvm/rubies/ruby-1.9.3-p194"

binaries:
ruby:         "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
irb:          "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
gem:          "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
rake:         "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/rake"

environment:
PATH:         "/usr/local/jdk/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global/bin:/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin:/home3/user1/.rvm/bin:/home3/user1/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home3/user1//ruby/gems/bin:/home3/user1//ruby/gems:/home3/user1/bin"
GEM_HOME:     "/home3/user1//ruby/gems"
GEM_PATH:     "/home3/user1//ruby/gems:/usr/lib64/ruby/gems/1.8"
MY_RUBY_HOME: "/home3/user1/.rvm/rubies/ruby-1.9.3-p194"
IRBRC:        "/home3/user1/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
RUBYOPT:      ""
gemset:       ""

user1@company.com [~]# 
```

任何人都知道发生了什么，我该如何解决这个问题？

谢谢

编辑1

这是我的 .bashrc 和 .bash_profile 文件内容

```
user1@company.com [~]# cat ~/.bashrc
# .bashrc

# User specific aliases and functions

# Source global definitions
if [ -f /etc/bashrc ]; then
    . /etc/bashrc
fi

    export HPATH=/home3/user1/
    export GEM_HOME=$HPATH/ruby/gems
    export GEM_PATH=$GEM_HOME:/usr/lib64/ruby/gems/1.8
    export GEM_CACHE=$GEM_HOME/cache
    export PATH=$PATH:$HPATH/ruby/gems/bin
    export PATH=$PATH:$HPATH/ruby/gems  

PATH=$PATH:/home3/user1/.rvm/bin # Add RVM to PATH for scripting

PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
user1@company.com [~]# cat ~/.bash_profile 
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin

export PATH
unset USERNAME

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*
user1@company.com [~]# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T00:11:34.140

This looks like a path issue to me. When you run `rails` the first time, it's finding a global rubygems installation before your local `rvm` copy.

After you run `/bin/bash` from the command line, you are starting an interactive shell, which sources (executes) `~/.bashrc`. My guess is that that contains the rvm initializations that are failing to run when you login with a login shell.

Take a look at `~/.bash_profile` and `~/.bashrc`. Here is what the latest RVM installer generates:

```
$ cat ~/.bashrc
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting

$ cat ~/.bash_login 
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*
export NODE_PATH=/usr/local/lib/node_modules
if [ -f ~/.bashrc ]; then
   source ~/.bashrc
fi 
```

If this is what you've got, then you're somehow logging in through an interactive shell and not a login shell (how???). You should be able to fix both issues with `source ~/.bash_profile` (`.bash_login` in OS X).

# c# - 如何让实体更新自己的字段

> ID：13130841
> 
> 赞同：0
> 
> 时间：2012-10-29T22:55:34.477
> 
> 标签：c#, dynamics-crm-2011

如果`field_1`用户更改了`field_2`. 通常，使用 JS 在客户端上执行此操作，**但**在这种情况下，用户可能会再次改变主意，回到原始值。所以，我想更新插件中的一个字段。

我成功地发现了变化，`field_2`但是当我为 赋值时`field_1`，它不会存储在数据库中。我做错了什么？

```
if (IsField_2Changed())
   (Context.InputParameters["Target"] as Entity).Attributes["field_1"] = 666; 
```

我没有崩溃，没有抱怨，**但**666 的值（因为它是万圣节）没有存储到数据库中。代码在更新消息上执行。

请注意，用户不会更改`field_1`。稍后它将被设置为只读字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:08:38.457

这有点猜测，因为您没有提及您的插件是如何注册的。

但是我猜该插件应该在 Pre 上时在 Post 上注册。

如果要使用 Target 进行更新，则需要在 Pre 中进行。

如果您的插件必须在 Post 上，请使用网络服务更新调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T02:59:50.630

您可以在 JavaScript 中执行此操作。只需将您的函数添加到 field2 的 OnChange 事件中。它不是 OnBlur 事件，因此它只会在用户更改后离开该字段时触发。

如果您需要在用户每次离开该字段时触发，您也可以通过 JavaScript 绑定到 OnBlur 事件（而不是字段 on change 事件），但它不受支持。

不过，对于插件，这是一个很好的演练（尽管逻辑并不完全相同） [http://nzcrmguy.blogspot.com/2011/03/updating-fields-on-crm-2011-plugin.html](http://nzcrmguy.blogspot.com/2011/03/updating-fields-on-crm-2011-plugin.html)

# parsing - OCaml 解析函数

> ID：13130843
> 
> 赞同：4
> 
> 时间：2012-10-29T22:55:39.453
> 
> 标签：parsing, functional-programming, ocaml

这是来自解析器模块的函数。我无法理解一行代码

```
 let rec e1 tokens =
   match tokens with
    Tokenizer.IfTok :: tokens1 -> 
      let (testAST, tokens2) = e1 tokens1
      in
      (match tokens2 with
          Tokenizer.ThenTok :: tokens3 ->
            let (thenAST, tokens4) = e1 tokens3
            in
            (match tokens4 with
                Tokenizer.ElseTok :: tokens5 ->
                  let (elseAST, tokens6) = e1 tokens5 
                  in
                  (If(testAST, thenAST, elseAST), tokens6)
              | _ -> raise (Syntax ("e1: missing else.")))
        | _ -> raise (Syntax ("e1: missing then.")))
  | _ -> e2 tokens

and e2 tokens = ........ 
```

我不知道这条线是如何工作的

```
let (testAST, tokens2) = e1 tokens1 in 
```

我知道它声明了一个局部变量，它是一个元组，但是值 (testAST, tokens2) 来自哪里？它似乎与令牌或令牌1没有任何关系。此行是否仅声明一个元组或它也调用该函数？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:11:03.557

是的，这一行确实声明了两个变量并调用了函数`e1`，将变量绑定到函数调用的结果。

这种绑定变量的方式称为*模式匹配*。它基于函数返回类型的信息`e1`——编译器知道它返回一个元组，然后它可能被分解为多个部分，这些部分绑定到两个新变量，`testAST`并且`tokens2`. 它是 FP 最强大的功能之一，它使您可以编写更易读、更灵活、更简洁的代码。

如果编译器知道该实体（*模式*）的结构（例如，Scala 中的案例类、Haskell 中的元组和列表、Erlang 中的记录等），也可以在所有内容上完成（*匹配）。*模式匹配也可用于忽略与条件无关的结构的某些部分（例如，在 Haskell 中，如果您想选择三元组中的第二项，只需执行，其中是用于忽略值的特殊符号）。*`selectSecond (_, a, _) = a``_`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:00:26.380

它正在调用一个名为`e1`. 事实上，这正是它出现的功能；即，它是对`e1`. 该函数返回一对（一个 2 元组）。

这看起来像非常标准的[递归下降解析](http://en.wikipedia.org/wiki/Recursive_descent_parser)。*

# android - 当我在设备和模拟器上的页面之间来回切换时，为什么我的应用程序的按钮会缩小？

> ID：13130849
> 
> 赞同：2
> 
> 时间：2012-10-29T22:56:01.950
> 
> 标签：android, layout, button

我编写了一个小测试应用程序来学习如何使用多种语言，并使用模拟器对其进行测试。我正在使用带有 Android SDK 的 NetBeans。该应用程序的多语言方面运行良好。由于使用模拟器的速度很慢，我尝试在我的设备（HTC Inspire 4G）上运行我的应用程序。我以前用其他应用程序做过，没有问题。然而，今天，有了这个简单的应用程序，当我在第一个和第二个屏幕之间来回切换时，第 2 页上的按钮和 textview 不断缩小。这在模拟器中不会发生；小部件保持相同的大小。我没有做任何我过去没有做过的布局方面的事情，所以我不知道为什么按钮会变坏。相关代码贴在下面。我希望另一双眼睛能找到我缺少的东西。

感谢一百万倍，比尔

更新：我注意到如果在按钮缩小后将手机从纵向旋转到横向（反之亦然），它们会恢复为正常的默认大小。（虽然语言重置为默认设置，英语。）

MainActivity.java：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Button button;

button = (Button) findViewById(R.id.use_english_button);
button.setOnClickListener(new GoToPage2OnClickListener("en"));

button = (Button) findViewById(R.id.use_french_button);
button.setOnClickListener(new GoToPage2OnClickListener("fr"));

button = (Button) findViewById(R.id.use_spanish_button);
button.setOnClickListener(new GoToPage2OnClickListener("es"));

button = (Button) findViewById(R.id.use_italian_button);
button.setOnClickListener(new GoToPage2OnClickListener("it"));
}

private class GoToPage2OnClickListener implements View.OnClickListener {
private String language = "";

public GoToPage2OnClickListener(String language) {
    this.language = language;
}

public void onClick(View v) {

    // This comes from
    // http://stackoverflow.com/questions/12230553/android-how-to-change-the-application-language-at-runtime

    Locale locale = new Locale(language);
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,
        getBaseContext().getResources().getDisplayMetrics());

    SharedPreferences languagepref =
        getSharedPreferences("language", MODE_PRIVATE);
    SharedPreferences.Editor editor = languagepref.edit();
    editor.putString("languageToLoad", language);
    editor.commit();

    Intent intent = new Intent(MainActivity.this,
        Page2Activity.class);
    startActivity(intent);
}
} 
```

Page2Activity.java：

```
@Override
public void onCreate(Bundle icicle) {
super.onCreate(icicle);

setContentView(R.layout.page_2);

SharedPreferences language =
    getSharedPreferences("language", MODE_PRIVATE);

Map<String,String> prefMap = (Map<String,String>) language.getAll();
String str = prefMap.get("languageToLoad");

Locale locale = new Locale(str);
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;

DisplayMetrics dm = getBaseContext().getResources().getDisplayMetrics();

getBaseContext().getResources().updateConfiguration(config,
    getBaseContext().getResources().getDisplayMetrics());

Button button;

button = (Button) findViewById(R.id.page_2_back_button);
button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        finish();
    }
}); 
```

page_2.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView
android:id="@+id/output_textview"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_margin="10sp"
android:text="@string/welcome_b"
/>
<TableLayout
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TableRow
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <Button
        android:id="@+id/page_2_back_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@string/page_2_back_button"
        android:layout_margin="5sp"
        android:layout_weight="1"
        />
    <Button
        android:id="@+id/page_2_next_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@string/page_2_next_button"
        android:layout_margin="5sp"
        android:layout_weight="1"
        />
</TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:09:08.207

我想到了！！每个之后：

```
Configuration config = new Configuration(); 
```

你必须打电话：

```
config.setToDefaults(); 
```

来自[http://developer.android.com/reference/android/content/res/Configuration.html](http://developer.android.com/reference/android/content/res/Configuration.html)

> 公共构造函数 Configuration() 构造一个无效的配置。您必须调用 setToDefaults() 才能使该对象有效。

我将不得不将此发布到我学习如何设置语言环境的问题/答案中。

# mysql - MySQL日期格式将小时-分钟转换为间隔并忽略年-月-日

> ID：13130852
> 
> 赞同：0
> 
> 时间：2012-10-29T22:56:21.510
> 
> 标签：mysql, date, date-format

（抱歉，我一开始以为是 MySQL，把我的 DB 搞混了，同时在太多 DBMS 中工作）

我需要比较一天中开始时间和停止时间之间事件的中点。现在我正在将您在右侧看到的日期转换为 HH:MM 并且比较工作到午夜。

查询说：pStart 和 pStop 之间的一半。

正如您在下面看到的，pStart 和 pStap 的日期是 2000 年 1 月 1 日，这是因为年月日对我来说并不重要......

**有效数据：**

```
 +-------+--------+-------+---------------------+---------------------+---------------------+
 | half  | pStart | pStop | half2               | pStart2             | pStop2              |
 +-------+--------+-------+---------------------+---------------------+---------------------+ 
 | 19:00 | 19:00  | 23:00 | 2012-11-04 19:00:00 | 2000-01-01 19:00:00 | 2000-01-01 23:00:00 |
 | 20:00 | 19:00  | 23:00 | 2012-11-04 20:00:00 | 2000-01-01 19:00:00 | 2000-01-01 23:00:00 |
 | 21:00 | 19:00  | 23:00 | 2012-11-04 21:00:00 | 2000-01-01 19:00:00 | 2000-01-01 23:00:00 |
 | 23:00 | 20:00  | 23:00 | 2012-11-05 23:00:00 | 2000-01-01 20:00:00 | 2000-01-01 23:00:00 |
 +-------+--------+-------+---------------------+---------------------+---------------------+ 
```

现在观察当 pStop 是午夜或更晚时会发生什么......

**破坏它的有效数据：**

```
+-------+--------+-------+---------------------+---------------------+---------------------+
| half  | pStart | pStop | half2               | pStart2             | pStop2              |
+-------+--------+-------+---------------------+---------------------+---------------------+ 
| 23:00 | 22:00  | 00:00 | 2012-11-04 23:00:00 | 2000-01-01 22:00:00 | 2000-01-01 00:00:00 |
| 23:30 | 23:00  | 02:00 | 2012-11-05 23:30:00 | 2000-01-01 23:00:00 | 2000-01-01 02:00:00 |
+-------+--------+-------+---------------------+---------------------+---------------------+ 
```

因此，我的 where 子句转换为： *WHERE 19:00 BETWEEN 22:00 AND 00:00* ...它返回 false ，我错过了上面那两个正确的行。

**问题：**

有没有办法将这些日期显示为整数间隔，以便说 pStart 和 pStop 之间的一半是正确的？

我想过在 pStop 小于 pStart 时添加 24 以使 00:00 变为 24:00 但不知道没有长字符串连接和数字转换的简单方法。这将解决问题，因为 pStart pStop 差异永远不会超过 6 小时。

注意：（查询要复杂得多。它有其他不相关的日期计算，但结果如上所示。DATE_FORMAT(%H:%i) 应用于前三列，后三列没有格式）

谢谢你的帮助：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:05:54.400

那么这一天对你来说很重要吗？

鉴于您在一天之内完成了所有事情而把事情搞砸了，它必须是这样的

```
WHere ((Start <= Stop) and ??)
Or
((Start > Stop) and ???) 
```

# php - 仅在变量更改时打印变量？

> ID：13130858
> 
> 赞同：1
> 
> 时间：2012-10-29T22:56:47.577
> 
> 标签：php, postgresql

首先，我的问题有点含糊或令人困惑，因为我不确定如何将我的问题表述为具体。我正在尝试查询一家针织公司的库存商数据库（使用 PHP 的学校项目），但我希望将城市打印为标题，而不是每个库存商信息。

这是我目前所拥有的：

```
$sql = "SELECT * FROM mc16korustockists where locale = 'south'";
    $result = pg_exec($sql);
    $nrows = pg_numrows($result);
    print $nrows;
    $items = pg_fetch_all($result);
    print_r($items);

for ($i=0; $i<$nrows2; $i++) {
    print "<h2>";
        print $items[$i]['city'];
    print "</h2>";

    print $items[$i]['name'];
    print $items[$i]['address'];
    print $items[$i]['city'];
    print $items[$i]['phone'];

    print "<br />";    
    print "<br />"; 
```

}

我正在查询数据库中的所有数据，行是参考、姓名、地址、城市和电话，并执行它。查询行数然后使用它来确定循环运行多少次迭代都很好，但我想要的是 h2 标题出现在 for ($i=0;) 行上方。

尝试只是打破我的页面，所以这可能是不可能的。我想我必须计算“城市”中的条目数，直到它检测到更改然后将标题更改为我认为的那个名称？或者进行一堆查询并为每个名称设置一个变量，但在这一点上，我不妨手动进行（我非常怀疑这是否是最佳实践）。哦，我欢迎任何对我的 PHP 的批评，因为我刚刚开始。

谢谢，如果您需要更多信息，请询问！

PS 我们的班级正在学习 PostgreSQL 而不是 MySQL，正如您在标签中看到的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:05:23.883

这将解决您的问题：

```
$sql = "SELECT * FROM mc16korustockists where locale = 'south' order by city";

...

$city = '';

for ($i=0; $i<$nrows2; $i++) {
    if($items[$i]['city']!=$city)
    {
        print "<h2>";
            print $items[$i]['city'];
        print "</h2>";
        $city = $items[$i]['city'];
    }
    print $items[$i]['name'];
    print $items[$i]['address'];
    print $items[$i]['city'];
    print $items[$i]['phone'];

    print "<br />";    
    print "<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:05:57.890

查看上一个项目并检查它是否是同一个城市 - 如果不是，或者没有上一个项目，新城市！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:06:00.887

您需要做的就是跟踪城市的变化并在变化时打印出来。

我已尝试使代码与您提供的代码尽可能相似，以便您可以看到更改发生的位置。

```
// store previous city, set to NULL by default so the first city from the result set will always be printed 
// (assuming that the first city from the result set is not null).

$previous_city = NULL;

for ($i=0; $i<$nrows2; $i++) {

   // determine what the city is from the current row
   // creating a separate variable for this is not really necessary, but helps to make the example clearer
   $current_city = $items[$i]['city'];

   // check if current city is different to the one in the previous row
   if ($previous_city != $current_city) {
    // city is different, lets print it
    print "<h2>";
        print $items[$i]['city'];
    print "</h2>";
    }

    print $items[$i]['name'];
    print $items[$i]['address'];
    print $items[$i]['city'];
    print $items[$i]['phone'];

    print "<br />";    
    print "<br />";

    // end of loop, the current city, now becomes the previous city
    $previous_city = $items[$i]['city']; 
```

}

请注意，您还需要在 SQL 中 ORDER BY city 以便将 1 个城市的所有项目组合在一起，否则此方法将不起作用

# ruby - Ruby 中的内联注释

> ID：13130859
> 
> 赞同：38
> 
> 时间：2012-10-29T22:56:48.797
> 
> 标签：ruby, comments

Ruby 是否能够理解内联注释，例如：

```
my_array = ['first', /* 'second', */ 'third', 'fourth'] 
```

?

**更新：**

我问的不是 Ruby 中的 /* */ 是什么以及为什么我会收到错误，而是询问是否存在任何可用形式的内联注释。/* */ 仅作为我所知的内联注释的示例给出。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-29T23:01:25.020

不，Ruby 没有内联注释。

这种风格的注释倾向于降低可读性，因为它们使代码更难理解。

在您的情况下，最好将您的数组项拆分为单独的行并注释掉一行。

```
my_array = ['first',
#           'second',
            'third',
            'fourth'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T04:29:49.377

我只想补充一点，rdoc——Ruby 的内置文档构建器——可以利用代码中的注释来构建初始文档集。根据我在最近阅读中的理解，“Ruby 方式”建议您的代码应该是可读且不言自明的，但注释是在早期开发中构建文档的一种有价值且简单的方法，然后将项目发送到适当的文档团队。

关于内联注释，我的用例是在将它们提交到格式正确的源文件之前，我发现自己在 irb 中处理较长的单行代码。也许很多人不介意在他们的开发环境中使用换行符，但是由于我目前对工具集的了解有限，我发现重复以前的命令很乏味。我几乎可以肯定这是因为我没有掌握手头的工具，无论是 irb、pry 还是你有什么。目前，我将任何我希望在字符串对象中内联注释的代码包装起来，以后我必须通过删除字符串包装器来删除或“取消注释”。

要么接受，要么离开，但那是我的两分钱！继续红宝石！

*附录：*

阅读`pry`文档是值得的！方法`pry`绑定到每个对象，包括`main`. 调用它会在当前提示中执行一个子 shell，允许您分析当前范围内的任何对象。它在任何上下文中都可用，包括`main`pry 提示。再加上 Pry 中的`amend-line`,`edit`​​ , `hist`,`play`命令，这满足了我对内联注释的渴望，尽管我仍然不知道 pry 中的任何功能会将先前的命令加载到当前提示符的输入中以进行编辑。

调用文本编辑器往往会分散我的注意力，不仅因为它从单个显示器（例如笔记本电脑）上的可见性中删除了 shell 缓冲区的内容，而且特别是因为它删除了所有有用的`pry`选项卡完成和命令。我希望看到 pry 或另一个可以跨多行使用光标的 REPL，因为我仍然发现需要使用单行。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-10-15T10:55:36.120

> 在你投反对票之前阅读整件事:)

老实说，您根本不应该使用注释，您的代码应该是不言自明的。

我知道这似乎离题了，但请听我说他们为什么不会在 Ruby 中实现这些评论。

我偶然发现了这个问题，因为我正在处理我们的客户丑陋的 API。处理到 Ruby 代码的 JSON 请求看起来像这样

```
api_response = {
  headers: ["uniq_id", "email", "description"]
  rows: [
    [2345, 'foo@bar.car', 'first item'],
    [9876, 'car@bar.foo', 'second item']
  ]
} 
```

所以在我的脚本中，我想收集所有的 uniq id：

```
JSON.parse(api_response)
  .fetch('rows')
  .collect { |application_row| application_row.at(0) } 
```

最好有一些能力来评论`at(0)`正在获取的内容。就像[sawa](/questions/13130859/inline-comments-in-ruby#comment-17859357)在他的评论中建议的那样，如果`%c{}`存在的话，我可以做这样的事情：

```
JSON.parse(api_response)
  .fetch('rows')
  .collect { |application_row|  %c{uniq_id}; application_row.at(0) } 
```

......但后来我意识到我只是在愚蠢。自我代码应该自我解释我的意图

```
uniq_ids = JSON.parse(api_response)
             .fetch('rows')
             .collect { |application_row| application_row.at(0) } 
```

在某些情况下，这不是一个选项，所以也许这可以解决问题：

```
JSON.parse(api_response)
  .fetch('rows')
  .collect { |application_row| uniq_id = application_row.at(0) } 
```

...是的，这将导致使用未使用的局部变量，但是在这种情况下，这是可以的，因为代码的可读性将有利于不会过多地影响性能。

在 Pauls 的情况下，他只想从数组中删除一个元素。我猜他可能想要它用于调试目的，但一般的想法是 Ruby 强制你编写尽可能干净的代码并删除任何不会在生产中使用的东西。

解决方案可能是

```
my_array =  ['first']
# my_array += ['second']
my_array += ['third', 'fourth'] 
```

这丑吗？嗯，是的，一般的想法是你应该在提交之前重新考虑它，强制你在投入生产之前删除丑陋的代码并删除不必要的东西。

* * *

**更新 2019 05**

我现在看到这个答案是 -1，它是 2014 年发布的。现在是 2019 年，我仍然有同样的看法 :) 如果你写了评论，你就没有编写清楚显示意图的代码 :)

肯定有需要评论的情况。但开发者的正确反应应该是：“天哪，有评论！我需要注意！”

我目前在该领域拥有 12 年的专业经验。并且在项目中一遍又一遍地看到这一点：如果代码中到处都是注释，开发人员将不再将注释视为有价值的信息，而只是不阅读它们。

但原则上，没有一个“让我们在这里发表评论”的单一用例无法通过良好的代码/架构设计来解决:)

引用[Martin Fowler](https://en.wikiquote.org/wiki/Martin_Fowler)的话：

> 任何傻瓜都可以编写计算机可以理解的代码。优秀的程序员编写人类可以理解的代码。

# php - 从 SimpleXML 提要中获取数据

> ID：13130860
> 
> 赞同：-1
> 
> 时间：2012-10-29T22:57:08.450
> 
> 标签：php, xml, arrays, simplexml

> **可能重复：**
> [如何获取 xml 元素的值？](https://stackoverflow.com/questions/2849678/how-to-get-values-of-xml-elements)

我有以下数据结构，但我不确定我将使用什么序列来`id`从数组中取出。

我有另一个工作正常的 XML 文档，我已经访问了这样的变量

```
$mainPropertyUrl = simplexml_load_file("URL");
$mainPropertyDetails = $mainPropertyUrl->Attributes; 
```

使用下面的一个，我必须通过 HTTP 身份验证请求登录，并使用以下结构生成以下代码：

**一代PHP：**

```
$oPMainUrl = 'HTTPS URI';
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $oPMainUrl);  
curl_setopt($ch, CURLOPT_USERPWD, "username:pw");
$result = curl_exec($ch);
curl_close($ch);

$MainURI = simplexml_load_string($result);

$ID = $MainURI->properties->property->id; 
```

我尝试了以下方法：

**PHP：**

`property[0]->attributes[3]->id;`

**XML:**

```
object(SimpleXMLElement)#112 (10) {
  ["@attributes"]=>
  array(3) {
    ["approved"]=>
    string(30) "Sat Oct 27 17:57:29 +1300 2012"
    ["last_updated"]=>
    string(30) "Sat Oct 27 17:57:29 +1300 2012"
    ["id"]=>
    string(6) "278882"
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:13:04.640

假设您的对象是 $xml：

```
$attr = $xml->attributes(); // returns an assoc array
echo 'ID='.$attr['id']; 
```

我想你也可以这样做：

```
$xml['id']; 
```

# c++ - 调用 Clock::getElapsedTime() 时 SFML 2.0 崩溃

> ID：13130862
> 
> 赞同：3
> 
> 时间：2012-10-29T22:57:17.437
> 
> 标签：c++, c, sfml

此代码使程序冻结（“Game.exe 已停止工作”）：

```
#include <SFML/Graphics.hpp>
#include <SFML/Window.hpp>
#include <SFML/System.hpp>

int main()
{

    sf::Clock clock;
    clock.getElapsedTime();

    return 0;
} 
```

**但是，这不会崩溃：**

```
#include <SFML/Graphics.hpp>
#include <SFML/Window.hpp>
#include <SFML/System.hpp>

int main()
{

    sf::Clock clock;

    return 0;
} 
```

我正在使用 SFML 2.0、Windows 7、MinGW 4.70（代码::块）。我不知道为什么，我按照所有说明链接库，但似乎没有任何效果。

我可能因为愤怒而遗漏了一些简单的东西（我已经尝试运行示例代码一周，没有任何效果），所以有人可以给我一根骨头吗？

**其他详情：**

*   链接到 -d 库没有帮助
*   我将所有 .dll 与 .exe 放在同一目录中
*   调试和发布模式无济于事
*   我将应用程序设置为“GUI 应用程序”，而“控制台应用程序”也不起作用

**GDB 吐出一段。过错：**

```
Program received signal SIGSEGV, Segmentation fault.
In sf::Clock::Clock() () (C:\Users\kworden\Documents\Work\Programming\Game\bin\Debug\sfml-system-2.dll)
At C:\Users\kworden\Documents\Work\Programming\Game\main.cpp:8 
```

***解决方案：***

自己编译库。[我在这里](http://www.youtube.com/watch?v=U1zN_QRSwxw)使用了教程并重新链接到 CMake 生成的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:02:29.287

复制评论中的答案：

我用谷歌搜索这个只是为了看看这个库是什么，所有迹象表明你需要重新编译这个库：[en.sfml-dev.org/forums/index.php?topic=8726.0](http://en.sfml-dev.org/forums/index.php?topic=8726.0)

这确实解决了这个问题。

# objective-c - 实例化从 xib 加载的 UIView 子类

> ID：13130863
> 
> 赞同：1
> 
> 时间：2012-10-29T22:57:19.267
> 
> 标签：objective-c, ios

我有一个从 xib 文件加载的 UIView 子类。在我的 CustomView.h 文件中，我只是忽略了 initWithFrame: 方法中的 CGRect 参数：

```
- (id)initWithFrame:(CGRect)frame {
    self = [[[NSBundle mainBundle] loadNibNamed:@"CustomView" owner:nil options:nil] objectAtIndex:0];
    return self;
} 
```

现在我的问题是：**每当我实例化我的自定义视图时，我应该传递的框架是什么？**

例如，我试过这个：

```
CustomView *cv = [[CustomView alloc] initWithFrame:CGRectZero]; 
```

有人会假设因为框架是在 xib 中设置的，所以这里传递的内容无关紧要。但是，这会导致我的自定义视图对用户交互没有响应。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T23:00:46.633

您可能应该改用 initWithCoder

```
- (id)initWithCoder:(NSCoder*)coder {
    self = [super initWithCoder:coder];
    if (self){
        // Initialization code

    }
    return self;
} 
```

# opencv - 使用 cv::Mat 进行矩阵乘法

> ID：13130864
> 
> 赞同：1
> 
> 时间：2012-10-29T22:57:25.677
> 
> 标签：opencv

我之前问[过一个关于 OpenCV 中的矩阵乘法的问题，](https://stackoverflow.com/q/13119414/209139)并设法找到了正确的答案。但是，当我尝试这样做时，会得到错误的结果：

```
#include <iostream>

#include <cmath>

#include "opencv2/core/core.hpp"

using namespace std;

int main() {

// Vars.
int a[4] = {3,2,1,4};
int b[4] = {2,5,6,1};

// Pointers
int *p1, *p2;
int res(5);

// Init.
p1 = &a[0];
p2 = &b[0];

for(int i=0;i<4;i++) {
    res += (*(p1+i) - 2)*(*(p2+i) - 3);
}
cout << res << endl; // This is fine!

unsigned int p[4] = {3,1,2,4};
cv::Mat testMat = cv::Mat(1,4,CV_8U,p);
cout << testMat << endl; // Shows [3, 0, 0, 0] !!!!!
cout << testMat.at<unsigned int>(0,3) << endl; // Displays 4

//cv::Mat resDot = testMat*(testMat.t());
cv::Mat testMatTransp(testMat.t());
cout << testMatTransp.at<unsigned int>(0,0) << endl; // Shows Jibrish 56928323
return(0);
} 
```

除非我遗漏了什么，否则应该可以正确打印出所有信息，对吧？我应该调用任何析构函数或任何东西吗？我认为它基于 RAII，所以除非我使用基于“新”的初始化，否则我不需要调用析构函数。那正确吗？任何朝着正确方向的轻推将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:06:17.033

在

```
cv::Mat testMat = cv::Mat(1,4,CV_8U,p); 
```

CV_8U 表示 8 位无符号。如果您将其更改为

```
cv::Mat testMat = cv::Mat(1,4,CV_32S,p); 
```

它应该工作。或者，改变

```
unsigned int p[4] = {3,1,2,4}; 
```

至

```
unsigned char p[4] = {3,1,2,4}; 
```

也应该工作

# php - 如何在 PHP 5.4 中编译 php 源代码

> ID：13130865
> 
> 赞同：4
> 
> 时间：2012-10-29T22:57:38.900
> 
> 标签：php, codesniffer, bcompiler

我一直在寻找一种方法来编译 PHP 源代码并通过加载已编译的代码在 PHP 脚本中使用它。还没有结果，尝试使用*bcompiler*但由于 Zend 核心 API 的更改而无法编译，可能需要更换小部件。

其他没有成功的尝试是使用 phpc，编译器推荐的版本是 PHP 5.2，因此 API 不再支持对 5.4 的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:05:55.333

[Roadsend Raven](https://github.com/weyrick/roadsend-php-raven)可能是 phpc 的替代品

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:08:32.307

我相信 Facebook Hiphop 的功能是将 PHP 编译成 C++，所以它可能值得一试...... [https://github.com/facebook/hiphop-php/](https://github.com/facebook/hiphop-php/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:31:42.687

[bcompiler](http://pecl.php.net/package/bcompiler)可以工作到 PHP 5.3。我目前正在使用它，但现在无法升级到 PHP 5.4，因为它不受支持。

这是使用 Suhosin 补丁在 Ubuntu 12.04 上运行的补丁[。](https://bugs.php.net/patch-display.php?bug_id=59912&patch=suhosin-class-destructor-fix&revision=latest)

# basic - QuickBasic：INKEY$ 的更好替代品

> ID：13130866
> 
> 赞同：1
> 
> 时间：2012-10-29T22:57:41.060
> 
> 标签：basic, quickbasic

我的代码如下所示：

```
 IF INKEY$ <> "" THEN CALL notitle
        PLAY "MST170o1e8o0b8o1e8"
        IF INKEY$ <> "" THEN CALL notitle
        PLAY "e8e4f#8g4f#8"
        IF INKEY$ <> "" THEN CALL notitle
        PLAY "g4e8d2o0b8o1d2 "
        IF INKEY$ <> "" THEN CALL notitle
        PLAY "o1e8o0b8o1e8e8e4f#8g4f#8g4a8b2g8b2MLg16a16"
        IF INKEY$ <> "" THEN CALL notitle
        PLAY "MSb4b8b8a8g8a4a8a4f#8g4g8MLg8f#8"
        IF INKEY$ <> "" THEN CALL notitle
        PLAY "MSe8f#4f#8f#8g8a8b4.a4.g4.f#4.o0b8o1e8e8e4d8e2." 
```

这似乎相当乏味。有没有办法更简洁地重写这个？我相信代码试图为用户提供一种跳过音乐的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:29:42.273

哇，在 2012 年编程 QBasic 嗯？那会是一个什么样的项目？

无论如何，我会将音乐字符串放入一个数组中，并在检查 INKEY$ 时遍历该数组。我没有安装 QB，所以我不确定这是否会起作用，但是像这样：

```
DIM mymusic$(6)
FOR i = 1 TO 6
    READ S$
    mymusic$(i) = S$
NEXT i

' loop while user doesn't press any key
i = 0
WHILE INKEY$ = ""
  ' i will be 0..5 so play i+1 to get 1..6
  PLAY mymusic$(i+1)

  ' use MOD to loop i through 0..5
  i = (i + 1) MOD 6
WEND

' user pressed a key
CALL notitle

' music strings in data segment
DATA "MST170o1e8o0b8o1e8"
DATA "e8e4f#8g4f#8"
DATA "g4e8d2o0b8o1d2"
DATA "o1e8o0b8o1e8e8e4f#8g4f#8g4a8b2g8b2MLg16a16"
DATA "MSb4b8b8a8g8a4a8a4f#8g4g8MLg8f#8"
DATA "MSe8f#4f#8f#8g8a8b4.a4.g4.f#4.o0b8o1e8e8e4d8e2." 
```

顺便说一句，您可以将字符串分解为较短的位，以便更频繁地检查用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-18T04:59:07.287

此片段在 Qbasic 中循环播放数据中的音乐：

```
' loop until keypress
i = 1
WHILE INKEY$ = ""
    RESTORE
    FOR j = 1 TO i
        READ p$
    NEXT
    PLAY p$
    i = i + 1
    IF i > 6 THEN i = 1
WEND

' user pressed a key
CALL notitle
' music strings in data segment
DATA "MST170o1e8o0b8o1e8"
DATA "e8e4f#8g4f#8"
DATA "g4e8d2o0b8o1d2"
DATA "o1e8o0b8o1e8e8e4f#8g4f#8g4a8b2g8b2MLg16a16"
DATA "MSb4b8b8a8g8a4a8a4f#8g4g8MLg8f#8"
DATA "MSe8f#4f#8f#8g8a8b4.a4.g4.f#4.o0b8o1e8e8e4d8e2." 
```

# ruby-on-rails-3 - 将排除选项传递给 Rack::SSL

> ID：13130867
> 
> 赞同：2
> 
> 时间：2012-10-29T22:57:49.530
> 
> 标签：ruby-on-rails-3, ssl, rack

按照[此处](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/)为 Rails 3.2.x 更新的指南，我希望能够将 Rack::SSL 配置为仅在包含`https://`前缀时才使用 SSL 过滤器：

```
config.force_ssl = true
config.ssl_options = { :exclude => proc { |env| puts 'here? ' + env.to_s; env['HTTPS'] != 'on' } } 
```

但是，`https`有效，其中`http`失败并出现以下错误：

```
[2012-10-29 15:37:03] ERROR OpenSSL::SSL::SSLError: SSL_accept returned=1 errno=0 state=SSLv2/v3 read client hello A: http request
    /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/ssl-internal.rb:164:in `accept' 
```

插入到 lambda 中的诊断代码不会被执行。如何在 Rails 3.2.x 中配置 Rack:SSL 以同时响应 HTTP 和 HTTPS？

Rails 3.2.8，WEBrick 使用自签名证书配置 SSL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:13:40.740

由于某种原因，自 2012 年 5 月起，在哈希中 使用该`exclude`选项的功能已被删除： [https ://github.com/rails/rails/pull/5515](https://github.com/rails/rails/pull/5515)`options`

我看到的错误是红鲱鱼。被`exclude`忽略并且请求在[ActionDispatch::SSL](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/ssl.rb)`http://`中被重定向到. 由于协议不匹配，OpenSSL 然后窒息（我假设）。`https://`

[解决方案是按照此处](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/#comment-43321)的建议使用`rack-ssl`gem 。这与 ActionDispatch::SSL 基本相同，只是该选项仍然受到尊重。`exclude`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-23T20:36:07.143

类似的方法`rack-ssl`是使用[rack-ssl-enforcer](https://github.com/tobmatth/rack-ssl-enforcer)，配置如下：

```
# config/environments/production.rb
config.middleware.use Rack::SslEnforcer, :except => ['/heatlh_check', %r{^/public/}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T20:58:46.157

经过几天与配置等的角力，我发现了这个伟大的宝石：

[https://github.com/lserman/aws-healthcheck](https://github.com/lserman/aws-healthcheck)

不需要任何自定义 nginx 设置（它通过机架工作）。它`200`在 /healthcheck 上返回，这就像一个魅力。只需将其添加到您的宝石中即可。

# c# - WebBrowser 控制外部脚本不起作用

> ID：13130880
> 
> 赞同：2
> 
> 时间：2012-10-29T22:59:18.107
> 
> 标签：c#, com, webbrowser-control

这是存储在字符串资源中的 HTML：

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script>
           (function(){
               window.external.hello()
           })()
        </script>
    </body> 
</html> 
```

这是Form1.cs的内容：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace JSIE
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            webBrowser1.Navigate("about:blank");
            webBrowser1.Document.Write(String.Empty);
            webBrowser1.Document.Write(Properties.Resources.DDocument);
            webBrowser1.ObjectForScripting = new JSCallbacks();
        }
    }
} 
```

这是 JSCallbacks.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Permissions;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace JSIE
{
    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    [ComVisible(true)]

    public class JSCallbacks
    {
        public void hello() {
            MessageBox.Show("Hello, world!");
        }
    }
} 
```

当我运行它时，它无法访问`hello()`JavaScript`window.external`对象中的方法，并给我一个脚本错误消息框。我尝试使用`this`as `ObjectForScripting`，但它也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:57:20.513

明白了：在执行页面*之前*，您必须使用 DocumentText 属性来加载 HTML 。

# jquery - Meteor，使用 jquery sortable 导致模板未绑定

> ID：13130881
> 
> 赞同：3
> 
> 时间：2012-10-29T22:59:20.153
> 
> 标签：jquery, events, map, jquery-ui-sortable, meteor

我有一个具体的问题。我已经使用流星构建了一个应用程序，它基本上在主屏幕上显示了一些实体，这些实体由 Jquery 可排序处理。插入。没什么特别的。

我的行为如下。我有一些事件通过模板机制绑定到每个实体，所以我有 mouseenter，mouse over。

在 jquery 插件中定义了一个占位符。

每当我开始拖放任何实体，并且占位符从其原始位置移动并且从 jquery 触发 onChange 事件时，该实体就会不受流星事件的约束。

但是，如果我通过 jquery 绑定它，它就不会发生。有谁知道会发生什么？

这个问题可以很简单地复制。使用 jQuery 中的可排序示例，提取模板中的 ul create 部分。

```
<head>
    <title>auth</title>
</head>

<body>
    {{> hello}}
</body>

<template name="hello">
     <ul id="sortable">
{{>items}}
</ul>
</template>
<template name="item">
     {{#if clipped}}
     {{else}}
     {{/if}}    
 <div class="india">
      <li>Item {{this.id}}</li>
 </div>

 </template>

 <template name="items">
       {{#each items}}
            {{>item}}
       {{/each}}

      <div class="empty"/>
      <div class="empty"/>
      <div class="empty"/>
      <div class="empty"/>
      <div class="empty"/>
      <div class="empty"/>        
  </template> 
```

js文件有

```
Template.hello.rendered = function () {
    $("#sortable").sortable({
    placeholder:"place"
    });
};

Template.items.items = function () {
    var gigi = [];
    for (i=0;i<5;i++){
         gigi[i]={id:i};
    }
    return gigi;
}

Template.item.clipped=function(){
    return true;
};

Template.item.events({
    'mouseenter .india' : function () {
          console.log(this.id);
     }
}); 
```

和css文件：

```
.india{
    height:80px;
    width:80px;
    background-color: red;
    margin:5px;
    float:right;
}
.place{
    height:80px;
    width:80px;
    background-color: blue;
    margin:5px;
    float:right;
 }
 .empty{
    height:80px;
    width:80px;
    background-color: yellow;
    margin:5px;
    float:right;
 } 
```

我在项目模板中包含了帮助器 Template.item.clipped 的事实导致移动后的项目通过模板 Template.item.events 机制释放绑定到它的所有事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T15:32:15.543

Meteor 0.8.0 有一个完全重写的模板引擎。名为烈焰。它应该解决人们可能遇到的任何 jQuery 问题。

查看文档[http://docs.meteor.com](http://docs.meteor.com)，特别是有关使用 blaze 的 wiki 页面。[https://github.com/meteor/meteor/wiki/Using-Blaze](https://github.com/meteor/meteor/wiki/Using-Blaze)

# android - 如何在 android ADT eclipse 插件中添加新架构

> ID：13130886
> 
> 赞同：0
> 
> 时间：2012-10-29T22:59:57.407
> 
> 标签：android, adt, eclipse-adt

我想在 android ADT eclipse 插件中添加一个新模式。

如果我在错误的地方发帖，请将帖子指向适当的论坛。我找不到 ADT 论坛。谢谢。

基本上我想在 android adt 插件中为我的个人实验添加一个新模式。

AndroidManufest.xml 具有以下架构。

xmlns:android="http://schemas.android.com/apk/res/android

我怎样才能添加这样的新模式（连同上面的模式）？

xmlns:android="http://schemas.android.com/apk/res/foo

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:09:34.550

目前，这是不可能的。AFAIK，没有 ADT 论坛。

用例是什么？如果它是一个重要的特性，你也许可以为它提出一个论据。

# database - Oracle 列在后续事务中不可用

> ID：13130893
> 
> 赞同：1
> 
> 时间：2012-10-29T23:00:32.243
> 
> 标签：database, oracle, transactionscope

对于我们的 ASP.NET 应用程序，我们使用 C# 控制台应用程序来维护我们的 Oracle 和 SQLServer 数据库。单个脚本按数字顺序加载和运行（脚本名称有数字），并在脚本完成时提交。

这是一个遗留应用程序，我们将来会远离这种格式，但是现在我们需要尽可能少地修改它来维护它。

最近，我们在 DB_VERSION 表中添加了两列：APP_MAJOR 和 APP_MINOR。这一添加是在我们的一个脚本中完成的，目的是让我们能够跟踪数据库最后更新到的产品版本。

当每个脚本完成执行并提交（使用 IDbContext 和 IDbTransaction）时，应用程序会使用应用程序的主要/次要版本以及脚本的编号更新 DB_VERSION 表。在添加主要/次要列之前，应用程序刚刚更新了脚本编号。

在 SQLServer 中，完全没有问题 - 当应用程序完成时，DB_VERSION 表正确地指示了应用程序的版本。但是，在 Oracle 中，APP_MAJOR 和 APP_MINOR 列永远不会更新。

我已将此跟踪到我们使用的查询，该查询验证表是否为新列 - 即使在脚本执行完成后，新列也没有显示。似乎 Oracle 正在缓存以前的查询，因此永远不会使新列可用于更新（尽管始终更新的 Version 列会继续正确更新）。

我们尝试手动关闭连接，完全终止上下文并放置 5 秒等待期以允许池过期（我知道，我知道），更改脚本本身的结构以使用直接 DDL - 一切都无济于事. 由于权限错误，添加清除 Oracle 缓存的语句也失败了。

我会把代码放在这里供您查看，但是有太多地方可能会出现问题 - 我希望有人可以为我们提供一个大致的方向。

提前致谢！

# clr - 为什么 Windows 文件版本与 C++/CLR 程序集的实际程序集版本不同

> ID：13130895
> 
> 赞同：1
> 
> 时间：2012-10-29T23:00:50.937
> 
> 标签：clr, assemblyversions, ilspy

我有一个第 3 方 C++/CLR 程序集。当我右键单击 dll 时，版本选项卡显示 5.32.1，但当 ILSpy 中的元信息显示 5.0.0 时。为什么会有这种差异？哪一个是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:06:00.937

Windows 资源管理器的属性选项卡中显示的文件版本对应于 .NET 程序集`AssemblyInformationalVersion`属性。`AssemblyVersion`是一个单独的独立事物。

当然，两者都不比另一个更正确，开发人员可以独立设置它们。

对于`AssemblyVersion`当前的做法似乎大致是“具有相同major.minor 版本的程序集应该兼容”，但没有什么真正强制执行此规则。

* * *

必要的更正：实际上，当前 CLR 程序集绑定强制执行的策略是*整个*程序集版本应该匹配以便可加载，因此兼容的程序集应该具有*相同*的程序集版本。有关该主题的更多信息：[AssemblyVersion、AssemblyFileVersion 和 AssemblyInformationalVersion 之间有什么区别？](https://stackoverflow.com/q/64602/276994)

# ios - AFNetworking 和下载二进制文件

> ID：13130897
> 
> 赞同：2
> 
> 时间：2012-10-29T23:01:11.647
> 
> 标签：ios, afnetworking

有没有人成功使用 AFNetworking 下载更大的文件？这是我现在正在使用的代码：

```
NSFileManager *fm = [NSFileManager defaultManager];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *dfwPath =  [documentsDirectory stringByAppendingPathComponent:@"sync_download.db"];

//Delete the existing one if our last sync was interrupted...
[fm removeItemAtPath:[documentsDirectory stringByAppendingPathComponent:@"sync_download.db"] error:nil];

NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
[parameters setObject:@"sync"   forKey:@"app"];
[parameters setObject:@"dl"     forKey:@"cmd"];
[parameters setObject:version   forKey:@"ver"];

[AFHTTPRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"application/bin"]];

AFMyClient *client = [AFMyClient sharedClient];

NSMutableURLRequest* rq = [client requestWithMethod:@"POST" path:@"myserver/ol.php" parameters:parameters];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:rq];

operation.outputStream = [NSOutputStream outputStreamToFileAtPath:dfwPath append:NO];

[operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
    NSLog(@"The bytes download: %llu of %llu", totalBytesRead, totalBytesExpectedToRead);

    //float percentDone = ((float)((int)totalBytesRead) / (float)((int)totalBytesExpectedToRead));

}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    NSLog(@"Finished downloading: %@", [operation responseString]);

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    NSLog(@"Error downloading: %@",[error debugDescription]);
}];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperation:operation]; 
```

发生的情况是文件被创建但它始终为零字节，即使正在下载的数量约为 10MB。永远不会达到“setDownloadProgressBlock”，但“setCompletionBlockWithSuccess”是。

这是我在发送下载数据之前在服务器上设置标头的方式：

```
 $data = file_get_contents($filename);
        header('Pragma: public'); 
        header('Content-Type: application/bin');
        header('Content-Disposition: attachment; filename="'.basename($filename).'";');
        header('Content-Transfer-Encoding: binary');
        header('Content-Length: '.strlen($data));       
        echo $data; 
```

使用较旧的 ASIHttpRequest 库，这非常有效。因此，如果有人知道发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:34:21.173

三件事：

首先，您可能需要在运行循环中安排输出流，以确保下载按预期进行。

其次，`NSOperationQueue`您在该方法中创建的 可能在操作完成之前被释放。相反，您应该将您的 HTTP 请求操作排入 AFHTTPClient 操作队列。

第三，不相关：你应该使用`AFHTTPClient -HTTPRequestOperationWithRequest:success:failure:`而不是手动创建一个`AFHTTPRequestOperation`类，并且做`setCompletionBlockWithSuccess:failure:`. 如果不使用客户端构造函数，您将错过已注册的操作逻辑和默认标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:25:56.720

好吧，我想通了。事实证明，我并没有以最有效的方式从服务器发送数据，而且我还清理了我的 HTTP 标头，如下所示：

```
 $size = filesize($filename);
        header('Pragma: no-cache'); 
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename="'.basename($filename).'";');
        header('Content-Transfer-Encoding: binary');
        header('Accept-Ranges: bytes');
        header('Cache-Control: max-age=604800');
        header("Content-Length: $size");        
        readfile($filename); 
```

# c# - 如何对报告进行分类 XAF

> ID：13130904
> 
> 赞同：0
> 
> 时间：2012-10-29T23:01:55.040
> 
> 标签：c#, devexpress, xaf

我正在使用 XAF，现在我需要将报告分类为主从视图。我在这个例子中创建了自定义报告类： [http](http://documentation.devexpress.com/#xaf/CustomDocument3243) : //documentation.devexpress.com/#xaf/CustomDocument3243 和一个从 HCategory 继承的 Category 类。我使用 Category 类而不是 AdditionalInfo 字段。这里没有问题，但我不知道如何关联它们，将选定的 Category 发送到 ListView 并将它们显示为 master-detail。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:55:19.107

在最简单的情况下，只需将公共 HCategory ReportCategory { ... } 属性添加到您的自定义 ReportData 类中，然后按此类别列对 ListView 进行分组就足够了。如果需要，您可以在自定义 ReportData 和 HCategory 后代之间建立真正的关联，如此处[文档中所述](http://documentation.devexpress.com/#XafFaq/CustomDocument3059)。

另请参阅[这方面的类似请求](http://www.devexpress.com/issue=S36554)。如果您在此任务上需要更多帮助，请联系[DevExpress 支持团队](http://www.devexpress.com/sc)（在 30 天评估期内免费）。这样，您将在 24 小时内获得有保证的解决方案（公共周末除外）。

**更新：** 这是代表您在 DevExpress 支持中心创建的讨论：http: [//www.devexpress.com/issue=Q441993](http://www.devexpress.com/issue=Q441993)

# xml - 查询每个节点的内部内容

> ID：13130906
> 
> 赞同：0
> 
> 时间：2012-10-29T23:02:06.640
> 
> 标签：xml, tsql, xquery

我知道我可以做到这一点——

```
declare @args xml = '<arg><value>hello</value></arg><arg><value>world</value></arg>';

select arg.value('value[1]', 'nvarchar(max)')
from @args.nodes('//arg') args(arg); 
```

但我想做这样的事情（没有多余的`<value>`标签） -

```
declare @args xml = '<arg>hello</arg><arg>world</arg>';

select arg.value('?', 'nvarchar(max)')
from @args.nodes('//arg') args(arg); 
```

什么是正确的 XQuery 表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:14:08.760

```
declare @args xml = '<arg>hello</arg><arg>world</arg>';

select arg.value('text()[1]', 'nvarchar(max)')
from @args.nodes('//arg') args(arg); 
```

# groovy - GroovyShell 一个编译后的字符串调用另一个

> ID：13130907
> 
> 赞同：1
> 
> 时间：2012-10-29T23:02:07.080
> 
> 标签：groovy, closures, groovyshell

如果我像这样运行 GroovyScript：

```
def gs=new GroovyShell()
gs.setVariable('square',{x->x*x})
gs.evaluate("print square(10)") 
```

它工作得很好。问题是我希望“Square”函数也被编译。我试过这个：

```
def gs=new GroovyShell()
gs.setVariable('square',gs.parse("{x->x*x}"))
gs.evaluate("print square(10)") 
```

但它不起作用，我很确定这是因为 gs.parse 返回的“脚本”对象不像闭包——但我不想更改第二个字符串的语法——如果我做了会有很多解决方案......

有任何想法吗？

编辑：写完这篇文章后，我意识到可以简单地将两个字符串连接起来并解析一次，所以每次我想运行一个使用 square() 函数的脚本时，我都必须在前面加上文本“def square (x){x*x)\n" 到脚本...

我可以做到这一点，但它似乎有点古怪，所以我仍然对其他答案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:24:16.080

很接近！

您需要使用`evaluate`而不是解析来从 GroovyShell 获取闭包以作为变量传递`square`：

```
def gs=new GroovyShell()
gs.setVariable( 'square', gs.evaluate( '{ x -> x * x }' ) )
gs.evaluate( 'print square(10)' ) 
```

* * *

发现这有点酷，然后被带走了......你可以像这样相互依赖关闭：

```
def varMap = [
  square: '{ x -> x * x }',
  pyth:   '{ x, y -> Math.sqrt( square( x ) + square( y ) ) }'
]

// Create a map of name->Closure set each into the shell 
// in turn, so later Closures can depend on earlier ones in
// the list
varMap = new GroovyShell().with { shell ->
  varMap.collectEntries { name, func ->
    // Get the closure
    def fn = shell.evaluate( func )
    // Set it into this current shell
    shell.setVariable( name, fn )
    // And return the Entry name->Closure
    [ (name): fn ]
  }
}

// Ok, this is what we want to run
def command = 'println pyth( 3, 4 )'

new GroovyShell().with { shell ->
  // Set all the vars up
  varMap.each { name, fn ->
    shell.setVariable( name, fn )
  }
  // Then run the command
  shell.evaluate( command )
} 
```

# java - 将一个布局膨胀为另一个布局（或将布局转换为视图然后膨胀视图）

> ID：13130909
> 
> 赞同：2
> 
> 时间：2012-10-29T23:02:20.063
> 
> 标签：java, android, xml

我想使用循环多次将布局膨胀到另一个布局中。当我为 TextView 或任何其他单个视图充气时，java 很好。但我想夸大整个布局。我为此使用什么方法，因为以下代码不起作用。（就像我说的，循环和一切都很好，只是我不能为整个布局充气。我只知道如何充气一个简单的视图）。

```
View childInflatedView = (View) theInflater.inflate(R.id.restaurant_displayed_on_list, null);
linLayout.addView(childInflatedView); 
```

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="30dp"
android:orientation="horizontal"
android:background="@drawable/gradient_bg_hover"
android:id="@+id/restaurant_displayed_on_list" >

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dp"
    android:layout_weight="6"
    android:layout_height="fill_parent"
    android:text="this is the inflated text"
    android:textColor="#990099"
    android:textSize="20dp"
    android:gravity="center_horizontal"

    />

<Button    
android:layout_width="0dp"
android:layout_weight="1"
android:layout_height="fill_parent"
android:background= "@drawable/delete"
/>
</LinearLayout> 
```

**编辑1：**

正如 Matthew 所说，我认为解决方案是通过布局资源 ID 膨胀布局。我认为问题在于上面未显示的这行代码，因为布局无法转换为 TextView：

```
View categoryInflatedView1 = (View) theInflater.inflate(R.layout.categories_available, null);

((TextView) categoryInflatedView1).setText(category1);          

linLayout.addView(categoryInflatedView1); 
```

我如何访问位于布局内部的 TextView。我需要在充气之前编辑文本视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:06:15.640

您需要传入*布局*资源 ID。替换`R.id.restaurant_displayed_on_list`为`R.layout.<name of your layout file here>`，你应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:12:09.270

所以这不起作用的原因是2倍。

您只需按照 Mathew 的说明通过布局资源 ID 扩展布局

```
View childInflatedView = (View) theInflater.inflate(R.layout.restaurant_available, null); 
```

由于将布局转换为 TextView，我在日志中发现了一个额外的错误相反，我必须使用此代码使其工作（布局变量然后按 id 查找视图）：

```
((TextView) childInflatedView.findViewById(R.id.restaurant_displayed_on_list)).setText(currentlyDelRest1); 
```

尽管这个答案是正确的，但我将把接受的答案分配给马修，因为鉴于问题中提供的信息，他的答案是正确的。谢谢您的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:29:19.057

使用`<include>`标签。它在现有布局中包含另一个 XML 布局。例如，添加以下两行将在您的父布局中包含另外两个布局：

```
 <include android:id="@+id/cell1" layout="@layout/workspace_screen" />
<include android:id="@+id/cell2" layout="@layout/workspace_screen" /> 
```

在唯一的布局属性是必需的。这个属性，没有 android 命名空间前缀，是对你想要扩展的布局文件的引用。也可以`android:id`用来指定包含布局的根视图的id；如果定义了一个，它还将覆盖包含布局的 id。同样，您可以覆盖所有布局参数。

# ruby-on-rails - HAML 循环通过 has_and_belongs_to_many 对象而不是 id

> ID：13130913
> 
> 赞同：1
> 
> 时间：2012-10-29T23:02:39.333
> 
> 标签：ruby-on-rails, ruby, mongoid

```
class Team
  include Mongoid::Document
  include Mongoid::Timestamps
  field :name,              :type => String, :default => "My New Team"
  validates_presence_of :name
  has_and_belongs_to_many :users

end 
```

在我的 show.haml for Team 中，我正在尝试：

```
 - @team[:users].each do |user|
        %tr
          %td= link_to user.name, user
          %td= user.email 
```

但问题是 Mongo 将用户引用存储为 user_ids。所以

*   @team[:user_ids].each 做 |user|

但是现在我必须为每个用户执行一个查询......在我这样做之前，我只是想知道是否有另一种方法来遍历用户？我正在考虑在控制器中放置一个名为 @user_objects 的变量，但不确定如何在不循环所有 user_id 并执行 find() 调用的情况下生成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:05:52.373

尝试这个

```
- @team.users.each do |user|
    %tr
      %td= link_to user.name, user
      %td= user.email 
```

它会工作得很好。

# java - 是否有与 Guava CacheBuilder 等效的队列？

> ID：13130917
> 
> 赞同：0
> 
> 时间：2012-10-29T23:03:28.690
> 
> 标签：java, guava

我正在尝试将一堆请求排队并稍后处理它们。有没有像 Google CacheBuilder 这样具有 expieAFfterWrite 语义的 Set（理想情况下是队列）？

因为我只有一堆值，所以我觉得使用 CacheBuilder 会很浪费。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T02:44:58.860

您可能正在寻找[EvictingQueue](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/EvictingQueue.html)。从文档中：

> 一个非阻塞队列，当尝试将新元素添加到队列中并且它已满时，它会自动从队列头部驱逐元素。
> 
> 驱逐队列必须配置最大大小。每次将元素添加到完整队列时，队列都会自动删除其头元素。这与传统的有界队列不同，后者在满时阻塞或拒绝新元素。

# ruby-on-rails - Capistrano：无法访问`~/releases/'：没有这样的文件或目录

> ID：13130918
> 
> 赞同：4
> 
> 时间：2012-10-29T23:03:34.590
> 
> 标签：ruby-on-rails, ubuntu, deployment, capistrano

在`bundle update`我的本地机器和服务器上都做了之后，我无法再部署了。正如我猜的那样，我得到的错误是某种权限，但我不知道发生了什么：

```
cap deploy
  * 2012-10-30 02:48:45 executing `deploy'
  * 2012-10-30 02:48:45 executing `deploy:update'
 ** transaction: start
  * 2012-10-30 02:48:45 executing `deploy:update_code'
    executing locally: "git ls-remote ssh://ubuntu@robotinthecloak.com/~/git/strana_cvetov.git HEAD"
ubuntu@robotinthecloak.com's password: 
    command finished in 7500ms
  * executing "git clone -q --depth 1 ssh://ubuntu@robotinthecloak.com/~/git/strana_cvetov.git ~/rails_apps/strana_cvetov/releases/20121029224852 && cd ~/rails_apps/strana_cvetov/releases/20121029224852 && git checkout -q -b deploy 672780789da61c81640fe7fbd2728064d0f89db3 && (echo 672780789da61c81640fe7fbd2728064d0f89db3 > ~/rails_apps/strana_cvetov/releases/20121029224852/REVISION)"
    servers: ["robotinthecloak.com"]
Password: 
    [robotinthecloak.com] executing command
 ** [robotinthecloak.com :: out] ubuntu@robotinthecloak.com's password:
Password: 
 ** [robotinthecloak.com :: out]
    command finished in 2265ms
  * 2012-10-30 02:48:56 executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * 2012-10-30 02:48:56 executing `deploy:assets:symlink'
  * executing "rm -rf ~/rails_apps/strana_cvetov/releases/20121029224852/public/assets &&\\\n        mkdir -p ~/rails_apps/strana_cvetov/releases/20121029224852/public &&\\\n        mkdir -p ~/rails_apps/strana_cvetov/shared/assets &&\\\n        ln -s ~/rails_apps/strana_cvetov/shared/assets ~/rails_apps/strana_cvetov/releases/20121029224852/public/assets"
servers: ["robotinthecloak.com"]
[robotinthecloak.com] executing command
command finished in 162ms
  * executing "chmod -R -- g+w \\~/rails_apps/strana_cvetov/releases/20121029224852 && rm -rf -- \\~/rails_apps/strana_cvetov/releases/20121029224852/public/system && mkdir -p -- \\~/rails_apps/strana_cvetov/releases/20121029224852/public/ && ln -s -- ~/rails_apps/strana_cvetov/shared/system \\~/rails_apps/strana_cvetov/releases/20121029224852/public/system && rm -rf -- \\~/rails_apps/strana_cvetov/releases/20121029224852/log && ln -s -- ~/rails_apps/strana_cvetov/shared/log \\~/rails_apps/strana_cvetov/releases/20121029224852/log && rm -rf -- \\~/rails_apps/strana_cvetov/releases/20121029224852/tmp/pids && mkdir -p -- \\~/rails_apps/strana_cvetov/releases/20121029224852/tmp/ && ln -s -- ~/rails_apps/strana_cvetov/shared/pids \\~/rails_apps/strana_cvetov/releases/20121029224852/tmp/pids"
    servers: ["robotinthecloak.com"]
    [robotinthecloak.com] executing command
 ** [out :: robotinthecloak.com] chmod:
 ** [out :: robotinthecloak.com] cannot access `~/rails_apps/strana_cvetov/releases/20121029224852'
 ** [out :: robotinthecloak.com] : No such file or directory
 ** [out :: robotinthecloak.com] 
    command finished in 205ms
*** [deploy:update_code] rolling back
  * executing "rm -rf ~/rails_apps/strana_cvetov/releases/20121029224852; true"
    servers: ["robotinthecloak.com"]
    [robotinthecloak.com] executing command
    command finished in 167ms
failed: "sh -c 'chmod -R -- g+w \\~/rails_apps/strana_cvetov/releases/20121029224852 && rm -rf -- \\~/rails_apps/strana_cvetov/releases/20121029224852/public/system && mkdir -p -- \\~/rails_apps/strana_cvetov/releases/20121029224852/public/ && ln -s -- ~/rails_apps/strana_cvetov/shared/system \\~/rails_apps/strana_cvetov/releases/20121029224852/public/system && rm -rf -- \\~/rails_apps/strana_cvetov/releases/20121029224852/log && ln -s -- ~/rails_apps/strana_cvetov/shared/log \\~/rails_apps/strana_cvetov/releases/20121029224852/log && rm -rf -- \\~/rails_apps/strana_cvetov/releases/20121029224852/tmp/pids && mkdir -p -- \\~/rails_apps/strana_cvetov/releases/20121029224852/tmp/ && ln -s -- ~/rails_apps/strana_cvetov/shared/pids \\~/rails_apps/strana_cvetov/releases/20121029224852/tmp/pids'" on robotinthecloak.com 
```

我的`deploy.rb`样子是这样的：

```
# The name of the app
set :application, "strana_cvetov"

# The address of the remote host
set :location, "robotinthecloak.com"

# setup some Capistrano roles
role :app, location
role :web, location
role :db,  location, :primary => true

# The directory on the server that will be deployed to
set :deploy_to, "~/rails_apps/#{application}"
# The type of Source Code Management system
set :scm, :git
# The location of the LOCAL repository relative to the current app
set :repository,  "ssh://ubuntu@#{location}/~/git/#{application}.git"
# The way in which files will be transferred from repository to remote host
set :deploy_via, :copy

set :use_sudo,            false
#tell git to clone only the latest revision and not the whole repository
set :git_shallow_clone,   1
set :keep_releases,       5

#options necessary to make Ubuntu’s SSH happy
ssh_options[:paranoid]    = false
default_run_options[:pty] = true

set :rails_env, :production

# Set up SSH so it can connect to the EC2 node - assumes your SSH key is in ~/.ssh/id_rsa
set :user, "ubuntu"

# Passenger
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end

  namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      run "cd #{current_path} && #{bundle exec rake} RAILS_ENV=#{rails_env} RAILS_GROUPS=assets assets:precompile --trace"
    end
  end
end

after "deploy:create_symlink", "deploy:resymlink", "deploy:update_crontab" 
```

当我运行`deploy:check`它说`You appear to have all necessary dependencies installed`。

我搜索了网络，这个网站，尝试了所有我能找到的解决方案，但没有任何效果。

该服务器上的其他项目也没有部署同样的错误，但几天前一切工作正常，我在那里什么也没碰。这是怎么回事？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T23:46:41.993

在部署时使用完整路径，'~' 可能具有欺骗性

```
set :deploy_to, "/home/username/rails_apps/#{application}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:07:42.430

[报告了此问题的错误](https://github.com/capistrano/capistrano/issues/298)

# java - 创建一个打开命令的可执行jar

> ID：13130921
> 
> 赞同：1
> 
> 时间：2012-10-29T23:03:52.930
> 
> 标签：java, executable-jar

我必须交一份作业，上面写着：

'如果你已经正确地创建了一个可执行的 jar，那么你将能够在 Windows 中双击它来运行你的程序。请确保您在发送前对此进行测试。

我的程序没有用户界面并在命令中运行。当我双击 .jar 时没有任何反应，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:07:57.037

即使您的程序是基于命令行的，它也会启动一个控制台/终端窗口来执行程序。如果您的程序没有提示输入，那么它可能会打开和退出太快，以至于您没有注意到控制台窗口在屏幕上闪烁。

尝试通过以下方式打开命令提示符并手动运行 java：

```
java -jar <your jar> 
```

如果这不起作用，那么您没有一个带有 MANIFEST.MF 的可执行 jar，它指定`Main-Class`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:09:06.927

`Start -> Accessories -> Console`

在您的控制台上

`java -jar "C:\your-directory\for\your\java-jar-\application.jar"`

**编辑**

尝试这个：

> 将打开方式更改为 c:\Program files\java\jre7\bin\javaw.exe

从这个问题中提取：[Make an executeble JAR run in a console when double clicked](https://stackoverflow.com/questions/7295853/make-an-executeble-jar-run-in-a-console-when-double-clicked)

# c# - 使用 post 方法在 GetRequestStream() 上引发 ProtocolViolationException

> ID：13130928
> 
> 赞同：2
> 
> 时间：2012-10-29T23:04:40.920
> 
> 标签：c#, .net

我在 .NET 中创建了一个基本的 RESTful 服务，它允许我对调用方法指定的 Uri 进行基本的 Get 和 Post 调用。在我的 post 方法中，我试图用我的 HttpWebRequest 调用 GetRequestStream，但是我得到一个 ProtocolViolationException 并显示消息“无法发送具有此动词类型的内容主体”。

我知道这可能是由于将 HttpWebRequest 方法设置为 Get 造成的，但是我已经调试并确保在调用 GetRequestStream 时该方法是 Post。我不知道为什么会抛出这个。谁能帮我吗？代码如下

```
public HttpWebResponse Get(bool followRedirect = true)
    {
        _webRequest.Method = WebRequestMethods.Http.Get;
        _webRequest.AllowAutoRedirect = followRedirect;
        _webRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
        var webResponse = _webRequest.GetResponse() as HttpWebResponse;

        _webRequest.CookieContainer.Add(webResponse.Cookies);
        return webResponse;
    }

    public HttpWebResponse Post(string contentType, Dictionary<String,String> parameters, bool followRedirect = true)
    {
        _webRequest.Method = WebRequestMethods.Http.Post;
        _webRequest.AllowAutoRedirect = followRedirect;

        var postData = "";
        foreach (var parameter in parameters)
        {
            postData += HttpUtility.UrlEncode(parameter.Key) + "=" +
                        HttpUtility.UrlEncode((parameter.Value)) + "&";
        }
        postData = postData.Remove(postData.Length - 1, 0);

        var data = Encoding.UTF8.GetBytes(postData);
        _webRequest.ContentType = contentType;

        var requestStream = _webRequest.GetRequestStream();
        requestStream.Write(data, 0, data.Length);
        requestStream.Close();

        var webResponse = _webRequest.GetResponse() as HttpWebResponse;
        return webResponse;
    } 
```

## 编辑

我发现问题是由调用 _webRequest.GetResponse() 引起的，然后我使用相同的 _webRequest 调用 GetRequestStream()。这种行为是预期的吗？也就是说，WebRequest 在需要重新初始化/重置之前是否只能进行其中一个调用？

我基本上通过在 Post 中创建一个新的 WebRequest 并将值从 _webRequest 复制到它来进行修复，但我想知道这是否有必要或者是否有可能提供更强大的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:01:47.993

好的，所以我意识到问题来自调用 _webRequest.GetResponse()，然后使用相同的 WebRequest 调用 .GetRequestStream()。不完全确定这是为什么，但这就是导致问题的原因。我通过创建一个新的 WebRequest 并将相关属性复制到新的请求来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T06:29:14.147

如果您没有特定类型或内容，请不要在标头上发送 content-type。

例如获取 flickr 基本请求/json 响应

```
var baseUrl = string.Format("http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key={0}&format=json&nojsoncallback=1", flickrApiKey);
HttpWebRequest httpRequest = HttpWebRequest.Create(baseUrl) as HttpWebRequest;
httpRequest.BeginGetResponse(GetResponseStream, httpRequest);

async void GetResponseStream(IAsyncResult callbackResult)
{
    try
    {
      HttpWebRequest request = (HttpWebRequest)callbackResult.AsyncState;
      HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(callbackResult);
      string responseString = string.Empty;
      Stream streamResponse = response.GetResponseStream();
      StreamReader reader = new StreamReader(streamResponse);
      responseString = reader.ReadToEnd();
    }
    catch (ProtocolViolationException ex)
    {
      MessageDialog show = new MessageDialog("no internet connection available");
    }
    catch (Exception e)
    {
      await Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher.Run    Async(CoreDispatcherPriority.Normal, async () =>
    {
      MessageDialog show = new MessageDialog("something went wrong");
      await show.ShowAsync();
      });
    }
  } 
```

# windows-8 - 如何在编写后台任务之前声明一个后台任务？

> ID：13130930
> 
> 赞同：3
> 
> 时间：2012-10-29T23:04:59.167
> 
> 标签：windows-8, microsoft-metro, backgroundworker, background-process, appxmanifest

在我的 Package.appxmanifest 文件中，我添加了一个后台任务声明，”因为我最终需要一个 - 它还没有被编写。我选择“系统事件”作为支持的任务类型，但在应用程序设置中没有任何内容（可执行文件、入口点、起始页）。

当我在添加该声明后尝试运行应用程序时，我得到：“应用程序清单缺少必需的元素'/Package/Applications/Application/Extensions/Extension/BackgroundTasks/Task'”

那么是否有一些值我可以输入到“应用程序设置”编辑框之一，或者我必须先创建后台任务，然后再声明我将使用一个，或者......？？？

## 更新

根据[http://www.silverlightshow.net/items/Windows-8-metro-make-your-app-alive-with-background-tasks.aspx](http://www.silverlightshow.net/items/Windows-8-metro-make-your-app-alive-with-background-tasks.aspx)， ControlChannel 选项可用于套接字：

*“ControlChannel：这些任务仅在 XAML/C# 应用程序中可用，可以在网络资源接收到一些数据时得到通知。这些主要与 StreamSockets 相关。此外，此任务需要锁屏约束。”*

文章还提到：*“......您可以收到有关许多系统事件的通知。这些事件在发生某些事情时触发，例如传入的 SMS，......”*但如果我理解正确，只有移动服务提供商可以实现SMSReceived 事件。

但是我仍然不清楚的一件事是：我可以在我的项目中创建一个将作为后台任务的类，还是我需要在我的解决方案中添加一个项目来作为/包含后台任务？如果是后者，该项目应该是“类库（Windows 应用商店应用程序）”还是“Windows 运行时组件”项目类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:24:19.287

您可以在实际实现之前定义后台任务，只需：

*   在清单添加功能后台任务中，检查计时器并在入口点行中添加包含后台任务代码的类的全名。就我而言，我到了那里：

> 任务.UpdateTask

*   选择锁屏通知类型并选择徽章标志。注意 徽章标志必须是 24x24 并且只能使用白色或（半）透明背景

**更新**，后台任务必须在另一个项目中定义，并且必须是“Windows运行时组件”类型。请注意，这种类型的项目有几个限制，基本上您将无法在其中引用任何其他非 Windows 运行时组件库。
[http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T01:11:10.397

您可以在应用清单文件中定义后台任务。后台任务定义在哪里没有这个要求，可以放首页地址。见下图。您需要定义`Task Type`. 就我而言，我定义了`Timer`. 在`Entry point`我的情况下，我也定义了`ItemsPage.cs`，（我没有后台任务`ItemsPage.cs`）。![在此处输入图像描述](../Images/0c4498839aa19c9da4a54f40e9286e49.png)

之后，您需要拥有`Badge logo`并`Lock Screen Notifications`在`Application UI`选项卡中。![在此处输入图像描述](../Images/73ce189f9a88fd287c3d102c585d2c4e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T23:15:46.487

您必须至少创建一个入口点才能在应用清单中列出它。

# python - 以自定义方式对嵌套字典进行排序

> ID：13130934
> 
> 赞同：1
> 
> 时间：2012-10-29T23:05:21.960
> 
> 标签：python, sorting, dictionary

我正在尝试对 2 级嵌套默认字典进行递归排序。我一直无法弄清楚如何正确地做到这一点。我的问题陈述如下：

1.  第一级键必须是自然排序。
2.  二级键必须按特定顺序排序。我试图创建一个列表，其索引代表元素的顺序。我的代码片段如下：

    ```
    import operator
    import collections
    trade_group_totals = collections.defaultdict(lambda:collections.defaultdict(float))    
    trade_group_totals['foo']['ABC'] = 100
    trade_group_totals['foo']['XYZ'] = 50
    trade_group_totals['bar']['ABC'] = 150
    trade_group_totals['bar']['XYZ'] = 250 
    ```

我的排序索引比较：

```
trade_groups = ['XYZ', 'ABC']

def TradeGroupSort(trade_group):
   return trade_groups.index(trade_group)   

def SortTotals(totals, sort_function_one, sort_function_two):
  return [
      (k1, v1) for k1, v1 in [(k, sorted(v.iteritems(), key=sort_function_two))
           for k, v in sorted(totals.iteritems(), key=sort_function_one)]] 
```

我正在调用该函数，如下所示：

```
SortTotals(
    trade_group_totals, operator.itemgetter(0),
    sort_function_two=lambda x: operator.methodcaller('TradeGroupSort', x)) 
```

我的预期输出应该是：

```
[('bar', [('XYZ', 50), ('ABC', 100)]), ('foo', [('XYZ', 250), ('ABC', 150)])] 
```

但生成的输出是

```
[('bar', [('XYZ', 50), ('ABC', 150)]), ('foo', [('ABC', 150), ('XYZ', 250)])] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:20:35.237

它可能看起来有点古怪，但实际上非常简单。首先，您从 items 方法创建主键和值的列表（辅助字典）。您有一个明确的排序，因此您可以简单地使用该顺序从内部字典中获取元素，并根据需要按定义对其进行排序，而不是尝试按此排序。

然后，您可以按照您喜欢的方式对主键进行排序（在这种情况下，只需简单排序）。

```
items = [ (k,sorted(v.items(),key=itemgetter(1),reverse=True)) 
                              for k,v in trade_group_totals.items()]
items_sortes = sorted(items,reverse=True) 
```

根据您对特定问题的自然排序的含义，您可以更改次要排序而不必担心第一个排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:45:23.827

不幸的是，没有一个解决方案对我有用。这是我想出的 UGLY 排序。

```
def TradeGroupSort(trade_group):
  """Sorting the trade group."""
  group, _ = trade_group  # The value is a tuple ('XYZ', 50) for e.g.
  return trade_groups.index(group) 
```

我想不出比这更好的解决方案了。我调用这个函数如下：

```
SortTotals(trade_group_totals, operator.itemgetter(0), TradeGroupSort) 
```

这将返回预期的结果。

# python - 解码 7 位 GSM

> ID：13130935
> 
> 赞同：7
> 
> 时间：2012-10-29T23:05:22.463
> 
> 标签：python, encode, codec, gsm

我发现这篇关于如何将 ascii 数据编码为 7 位 GSM 字符集的[帖子](https://stackoverflow.com/questions/2452861/python-library-for-converting-plain-text-ascii-into-gsm-7-bit-character-set)，我将如何再次解码 7 位 GSM 字符（将其反转回 ascii）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-16T11:31:50.297

例如：

C7F7FBCC2E03 代表“谷歌”
Python 3.4

```
def gsm7bitdecode(f):
   f = ''.join(["{0:08b}".format(int(f[i:i+2], 16)) for i in range(0, len(f), 2)][::-1])
   return ''.join([chr(int(f[::-1][i:i+7][::-1], 2)) for i in range(0, len(f), 7)]) 
```

打印（gsm7bitdecode（'C7F7FBCC2E03'））

> > 谷歌

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-14T14:18:52.957

有一个非常简单的解决方案：

将十六进制转换为二进制八位位组 将每个八位位组放入一个数组中，但顺序相反（整个八位位组，而不是位），因为这是发送它们的方式。以7位组从右到左读取字符串数字是GSM 7位表中的字符代码

例如：

C7F7FBCC2E03 代表“谷歌”

逆序的字符串是

03-2E-CC-FB-F7-C7

六个八位字节是

00000011-00101110-11001100-11111011-11110111-11000111

七重奏是

000000-1100101-1101100-1100111-1101111-1101111-1000111

然后从右到左阅读是：

GSM 7 位表中的 septet-decimal valor-Char

1000111-71-G

1101111-111-o

1101111-111-o

1100111-103-g

1101100-108-l

1100101-101-e

丢弃最后的 0000000 值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T00:40:40.307

对于 Python2：

```
import binascii
gsm = ("@£$¥èéùìòÇ\nØø\rÅåΔ_ΦΓΛΩΠΨΣΘΞ\x1bÆæßÉ !\"#¤%&'()*+,-./0123456789:;<=>?"
       "¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ`¿abcdefghijklmnopqrstuvwxyzäöñüà")
ext = ("````````````````````^```````````````````{}`````\\````````````[~]`"
       "|````````````````````````````````````€``````````````````````````")

def gsm_encode(plaintext):
    result = []
    for c in plaintext:
        idx = gsm.find(c)
        if idx != -1:
            result.append(chr(idx))
            continue
        idx = ext.find(c)
        if idx != -1:
            result.append(chr(27) + chr(idx))
    return ''.join(result).encode('hex')

def gsm_decode(hexstr):
    res = hexstr.decode('hex')
    res = iter(res)
    result = []
    for c in res:
        if c == chr(27):
            c = next(res)
            result.append(ext[ord(c)])
        else:
            result.append(gsm[ord(c)])
    return ''.join(result)

code = gsm_encode("Hello World {}")
print(code)
# 64868d8d903a7390938d853a1b281b29
print(gsm_decode(code))
# Hello World {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-01T20:17:59.197

我在 c 中为 openwrt 设备编写了[这样的解码器：](https://gist.github.com/andrew-aladev/1d160bca305238b35d15)

```
uint8_t get_data ( char input, uint8_t * output )
{
    if ( input - '0' >= 0 && '9' - input >= 0 ) {
        * output = input - '0';
    } else if ( input - 'a' >= 0 && 'f' - input >= 0 ) {
        * output = input - 'a' + 10;
    } else if ( input - 'A' >= 0 && 'F' - input >= 0 ) {
        * output = input - 'A' + 10;
    } else {
        return 1;
    }
    return 0;
}

uint8_t get_data_pair ( const char * input, uint8_t * output )
{
    uint8_t data;
    if ( get_data ( * input, &data ) != 0 ) {
        return 1;
    }
    * output = data << 4;
    if ( get_data ( * ( input + 1 ), &data ) != 0 ) {
        return 2;
    }
    * output = * output | data;
    return 0;
}

int main ( int argc, char * argv [] )
{
    if ( argc != 2 ) {
        fputs ( "required argument: hex\n", stderr );
        return 1;
    }

    char * hex = argv[1];
    uint16_t data = 0;
    uint8_t data_length = 0;

    while ( *hex != '\0' ) {
        uint8_t new_data;
        if ( get_data_pair ( hex, &new_data ) != 0 ) {
            fprintf ( stderr, "invalid hex: bad pair %.2s\n", hex );
            putchar ( '\n' );
            return 2;
        }
        hex += 2;

        data = new_data << data_length | data;
        data_length += 8;

        while ( data_length >= 7 ) {
            putchar ( data & 0x7f );
            data = data >> 7;
            data_length -= 7;
        }
    }

    putchar ( '\n' );
    return 0;
} 
```

# spring - JUnit测试MyBatis-Spring项目

> ID：13130938
> 
> 赞同：1
> 
> 时间：2012-10-29T23:05:40.913
> 
> 标签：spring, junit, mybatis

尝试`IllegalStateException`JUnit 测试 MyBatis-Spring 项目时会遇到问题。

问题似乎出在**自动装配**MyBatis Mapper Beans 上（请原谅我的行话，因为我是整个 MyBatis-Spring-JUnit 设置的新手）。我从其他人那里继承了设置。让我知道是否有任何其他信息与获得帮助有关。

当我将整个事物公开为 Web 服务时，下面描述的设置有效。但是，当我尝试 JUnit 测试它时它失败了。如何**在测试时**自动装配映射器？

# 设置

### 在 main/java 下

*   持久性文件夹：ProductMapper.java
*   服务文件夹：ProductService.java
*   ws 文件夹：BrowserService.java
*   ws/impl 文件夹：BrowserServiceImpl.java

### 在主要/资源下

*   持久性文件夹：ProductMapper.xml

### 浏览器服务.java

```
class BrowserServiceImpl {

    private ProductService productService;

    // setters and getters
    // Methods
} 
```

### 产品服务.java

```
class ProductService {

    @Autowired
    private ProductMapper productMapper;

    // Methods
} 
```

### 上下文.xml

```
<beans>
    <bean id="browserSvc" class="com.comp.team.proj.ws.impl.BrowserServiceImpl">
        <property name="productService" ref="productService" />
    </bean>

    <!-- MyBatis Config -->
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.comp.team.proj.persistence" />
        <property name="annotationClass" value="org.springframework.stereotype.Repository"/>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver"/>
        <property name="url" value="jdbc:oracle:thin:@xxx.xxx.xxx.com:xxxx:xxx"/>
        <property name="username" value="myusername"/>
        <property name="password" value="mypassword"/>
    </bean>

    <!-- Other beans -->
</beans> 
```

如果您对异常的外观感到好奇：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
...
Caused by: org.springframework.beans.factory.BeanCreationException: 
  Could not autowire field: private com.comp.team.proj.persistence.ProductMapper 
    com.comp.team.proj.service.ProductService.productMapper;

nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
  No matching bean of type [com.comp.team.proj.persistence.ProductMapper]
    found for dependency:
       expected at least 1 bean which qualifies as autowire candidate for this 
       dependency.
... 
```

# 编辑

请参阅上面更新的数据源*Bean*`Context.xml`。配置看起来正确吗？

看起来一个问题是**数据源**设置。我做出这个假设是因为 JUnit 测试运行，但抛出了异常。所以，最有可能的不是 JUnit 设置。如果dataSource设置正确，MyBatis会成功实例化**Mapper** Bean，Autowiring也会成功。

## 测试文件

```
@ContextConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
public class ProductCountTest {

    @Autowired
    protected BrowserService browserSvc;

    @Test
    public void testGetProductCount() {
        long count = browserSvc.getProductCount();

        assertTrue(count > 0);
    }

} 
```

`Context.xml`当我将它放在正确的目录中时，它可以毫无问题地找到该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:03:10.230

请向我们提供单元测试的代码。

我想你缺少弹簧配置

```
@ContextConfiguration(locations = { 
        "classpath:/com/comp/team/proj/context.xml" // give the correct path 
        })
@RunWith(SpringJUnit4ClassRunner.class)
public class BrowserServiceTest {

@Autowired
BrowserServiceImpl browserService;

@Test
public void shouldTestSmth(){

} 
```

请记住，在测试期间 Spring 使用 spring-test lib。

**编辑：** 我想最重要的部分仍未显示。您的 context.xml 中有 ProductMapper 的 bean 定义吗？我想它不见了。

我还可以看到您正在混合注释和 bean 定义。也许你需要bean定义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:08:32.400

[在此处](https://stackoverflow.com/a/13388046/640378)更正**数据源**配置。

我发现还有另一种方法来做**映射 bean**：

```
<bean id="productMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
  <property name="mapperInterface" value="com.comp.team.proj.persistence.ProductMapper" />
  <property name="sqlSessionFactory" ref="sqlSessionFactory" />
</bean> 
```

我认为`IllegalStateException`被抛出是因为：

**数据源**配置不正确，导致映射失败，导致未创建**Mapper bean**`NoSuchBeanDefinitionException` ( )。

# c# - Windows 8 地理定位

> ID：13130941
> 
> 赞同：1
> 
> 时间：2012-10-29T23:05:53.903
> 
> 标签：c#, .net, windows, geolocation

我正在尝试使用我的 Windows 8 RT 应用程序调试位置问题。我什至无法让 MSDN 示例正常运行，例外情况是：

mscorlib.dll 中出现“System.Runtime.InteropServices.COMException”类型的异常，但未在用户代码中处理

附加信息：对 COM 组件的调用已返回错误 HRESULT E_FAIL。

如果有这个异常的处理程序，程序可以安全地继续。

我相信这不是我在做的事情，因为这是我刚刚下载并尝试运行的 MSDN 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:02:25.467

原来这是我的开发机器的东西。我安装在运行 Core i5 处理器的较新戴尔笔记本电脑上，它运行良好。

# bash - Spring Security 从命令行为用户生成盐渍哈希

> ID：13130949
> 
> 赞同：1
> 
> 时间：2012-10-29T23:06:16.217
> 
> 标签：bash, command-line, spring-security, saltedhash

如何从 bash 命令行为 spring security 3x 中的用户生成盐渍哈希？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:06:16.217

Spring security 以密码{salt} 格式合并密码和盐，而不是简单的密码+盐连接，从终端输入：

```
echo -n password{salt} | shasum -a 1 
```

请注意：Spring security 建议在 PasswordEncoder 上使用 encode 方法

> 如果您想直接在 Java 中生成编码密码以存储在您的用户数据库中，那么您可以使用 PasswordEncoder 上的 encode 方法

[来源：散列和身份验证](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e3056)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-25T21:18:41.903

[Spring Boot CLI](https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-cli.html)为此提供了一个命令。[Spring Security Reference](https://docs.spring.io/spring-security/site/docs/current-SNAPSHOT/reference/html5/#authentication-password-storage-boot-cli)推荐使用它。

```
spring encodepassword password 
```

# apache - XAMPP 端口自行更改

> ID：13130952
> 
> 赞同：26
> 
> 时间：2012-10-29T23:06:24.727
> 
> 标签：apache, xampp, port

我的 Apache 端口设置为：
**80**和**443**

几个小时后查看 XAMPP 控制面板，我注意到端口已更改为：
**05**和**59895**

1.  XAMPP 会在几个小时后出于某种原因自动切换到这些端口吗？
2.  使用/打开这些端口有危险吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-11-11T23:35:28.260

一位 XAMPP 开发人员在[这篇文章](https://community.apachefriends.org/f/viewtopic.php?p=197896&sid=df3bb64d241e7e17c754fa1982a0fc4c)中回答了同样的问题。假设这是真实的（引用）：

> 简而言之，这是正常的。Apache 侦听并接受端口 80 和 443 上的请求，但它不为这些端口上的请求提供服务。当您或其他人连接到您的服务器时，它们将由通常使用高端口的其他连接处理。控制面板只查找与模块关联的所有端口。它只是拾取那些客户端端口，而显示所有端口的框还不足以显示所有端口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-21T15:38:42.257

这是我在这里解释的完整场景，它将清除您：

我们得到一个 php 页面没有响应，我们首先想到的是：apache 服务是否在 xampp 上运行？

我们立即去xampp查看，发现端口不是80！！！肯定每个人都会推断出它的端口问题的结果（同样的情况发生在我身上）。

虽然它不是端口问题。`infact xampp changes the ports for it self. while requests are recieved on 80 as normal.`

当时真正的问题是：那个`our code is not connecting to Database`。

因此 。请记住，这没有问题。你的阿帕奇很好。去检查你的数据库连接！和欢呼:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-08T10:35:02.370

我在使用 XDebug 时遇到了这种行为。
XAMPP 中的一切都非常慢，phpmyadmin 或任何网站。几乎每个请求都在更改端口。
评论`[XDebug]`块`php.ini`是我的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-17T11:39:39.930

如果您安装了 Xdebug，则可能会出现问题，因为 XAMPP 和 Xdebug 有一些上下波动的情况。检查 Xdebug 是否在监听 PHP。如果是，则禁用或停用该侦听，直到您完成数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-11T16:48:09.970

你有Skype吗？因为自动 Skype 使用端口：80 或 443。

尝试改变它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-11T15:55:26.800

如果您的 My SQL 需要端口，请确保您在主机后提供了正确的端口号，通常我们不需要 Host 值中的 Port。

我只是犯了这个错误并发现了它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-13T11:06:42.930

好吧，我遇到了这个问题，所以我来到了这里。

我知道这不是 xampp 的问题，所以我开始检查我的代码。

上周五我正在使用此代码。

$conn = new mysqli($host, $user, $pass, $database);

今天代码不起作用，所以我更新了这个：

$conn = new mysqli($host."8000", $user, $pass, $database); //8000是apache端口，可以改成80

这对我来说可以！

希望这对你们有帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-04T10:54:55.327

[在我的情况下，xdebug 的问题在某些情况下解决方案从 xdebug 站点https://xdebug.org/download.php](https://xdebug.org/download.php)更新 xdebugg 文件， 如果它不起作用，请在 php.ini 中评论 xdebug 代码

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-06T06:05:33.413

我在本地电脑上也遇到了同样的问题。我正在尝试使用 URL `127.0.0.1/project-name` 然后我尝试使用 URL `http://localhost/project-name`并且它有效。我不知道如何，但它起作用了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-09T07:49:00.877

**apache 端口会自动频繁更改。已经有人说这很正常。许多开发人员发现该解决方案对于工作区域来说是不够的。当我尝试使用 JOIN 从多个表中获取数据时，我也发现了这个问题，并且在同一个 sql 语句中存在多种类型的错误连接。错误的数据获取会损害服务器方法并占用大量内存或不返回任何死锁，端口会自动更改，服务器会暂停。使用此服务器保护自己。所以，写绝对好的和非常合乎逻辑的 SQL 并触发服务器。还会有其他原因。我在这里描述了我所面临的情况并找到了积极的回应。谢谢**

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-10-07T16:15:31.237

我遇到了同样的问题。

就我而言，我在 httpd.conf 中发现了一个“奇怪的”代理配置。

一旦我注释掉以下几行，问题就消失了：

```
<IfModule mod_proxy.c>
<IfModule mod_proxy_ajp.c>
Include "conf/extra/httpd-ajp.conf"
</IfModule>
</IfModule> 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-10-30T05:28:23.237

您可能正在通过 XAMPP 控制面板检查当前的守护程序/进程 ID ..xampp 不会自行更改端口号.. 重新启动系统或重新启动 apache，您会发现这些数字再次更改为其他一些数字..

我希望这可以解决您的两个疑问..

# asp.net-mvc - 将回调函数传递给局部视图 mvc

> ID：13130955
> 
> 赞同：1
> 
> 时间：2012-10-29T23:06:50.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, partial-views

我有一个在我的网站上多次使用的局部视图。根据您“保存”记录后的位置，它应该做一些不同的事情。

所以我正在考虑将回调函数作为字符串传递给控制器​​，然后将其传递回局部视图。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:24:17.503

在 MVC 中，所有地址/资源/url 都相对于它们默认呈现的路径。因此，如果您在部分内部有一个表单，它可以提交给两个不同的控制器操作方法，具体取决于它在哪个 url 下呈现。例如，要声明一个将提交给“更新”操作方法的表单，您将使用以下方法：

`@using (Html.BeginForm("Save")) {`

现在，如果此部分在 /Users/Home 下呈现，则 html 输出将变为：

`<form action="/Users/Save" method="POST">`

当部分在 /Products/Home 下呈现时，这会发生变化：

`<form action="/Products/Save" method="POST">`

然后，您可以在用户和产品控制器上实现两个“保存”操作方法。两者都可以执行标准的“保存”功能，但也可以执行每种情况下所需的任何独特行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T23:25:49.750

如果需要，您可以传递一个魔术字符串，该字符串将通过反射调用方法。

有没有更好的办法？

我建议你确定这篇文章的来源，然后据此处理此案。

```
HttpContext.Current.Request.Url 
```

将包含足够的信息让您打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-24T23:45:43.923

老问题，但我正在寻找一种方法来做到这一点并想出了一些东西。

我希望能够在我的主视图和子部分视图中添加一些非常简单的内容，以允许在部分视图中的 ajax 发布后的 javascript 方法由主视图设置。

根据您是否需要传递模型数据，我使用以下行之一从主视图调用局部视图：

`@{Html.RenderAction("_Create", new { Callback = "myCallback" });} @{Html.RenderAction("_Create", new { Model = Model, Callback = "myCallback" });}`

“myCallback”是 javascript 函数的名称，例如：

```
function myCallback(result) {
    alert(result.Id);
} 
```

从这里你可以在控制器动作中请求这个值，然后从动作中将值添加到视图包中，但是如果你要在多个局部视图上使用它，那么有一个过滤器属性会更干净你。

创建以下自定义操作过滤器：

```
public class MyFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var callBackValue = filterContext.RouteData.Values["Callback"];

        if (callBackValue != null)
        {
            filterContext.Controller.ViewBag.Callback = callBackValue.ToString();
            filterContext.RouteData.DataTokens.Remove("Callback");
            filterContext.RouteData.Values.Remove("Callback");
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

这会将“回调”值从 RouteData 对象中提取出来，并将其设置在 ViewBag.Callback 值中。确保从 RouteData 中删除该值，否则将找不到您的控制器操作（因为它将寻找带有名为“回调”的参数的操作

然后从视图中，您可以使用 访问此值`@ViewBag.Callback`。例如，您可能有一个 ajax 调用：

```
function createProduct(callback) {
    $.ajax({
        type: 'POST',
        url: '/Product/_Create',
        data: {
            Name: $('#Name').val()
        },
        success: function (result) {
            var callBack = @(ViewBag.Callback ?? "null");

            if (callback)
                callback(result);
            else {
                if (result) {
                    var url = '/Product/Details';
                    url += "/" + result.Id;
                    window.location.href = url;
                }
            }
        },
        error: function (ajaxContext) { alert('Bad error'); },
        timeout: 10000
    });
} 
```

部分视图的默认行为是加载详细信息页面，但如果主视图提供了单独的回调函数（或者它进入 ViewBag.Callback），则回调函数将被覆盖。在这里，我的主视图被一个函数覆盖，该函数仅显示一个带有新产品 ID 的警报框。

# memory - 为什么 CUDA 内存复制速度表现得像这样，一些恒定的驱动程序开销？

> ID：13130967
> 
> 赞同：3
> 
> 时间：2012-10-29T23:08:01.410
> 
> 标签：memory, cuda, overhead

在我的旧 GeForce 8800GT 上使用 CUDA 中的内存时，我总是有一个奇怪的 0.04 毫秒开销。我需要将 ~1-2K 转移到我设备的常量内存中，处理其上的数据并从设备中仅获取一个浮点值。

我有一个使用 GPU 计算的典型代码：

```
//allocate all the needed memory: pinned, device global
for(int i = 0; i < 1000; i++)
{
    //Do some heavy cpu logic (~0.005 ms long)        
    cudaMemcpyToSymbolAsync(const_dev_mem, pinned_host_mem, mem_size, 0, cudaMemcpyHostToDevice);
    my_kernel<<<128, 128>>>(output);
    //several other calls of different kernels
    cudaMemcpy((void*)&host_output, output, sizeof(FLOAT_T), cudaMemcpyDeviceToHost);
    // Do some logic with returned value 
} 
```

我决定用这段代码测量 GPU 内存的工作速度（注释所有内核调用，添加`cudaDeviceSynchronize`调用）：

```
//allocate all the needed memory: pinned, device global
for(int i = 0; i < 1000; i++)
{
    //Do some heavy cpu logic (~0.001 ms long)        
    cudaMemcpyToSymbolAsync(const_dev_mem, pinned_host_mem, mem_size, 0, cudaMemcpyHostToDevice);
    cudaMemcpyAsync((void*)&host_output, output, sizeof(FLOAT_T), cudaMemcpyDeviceToHost);
    cudaDeviceSynchronize();
    // Do some logic with returned value 
} 
```

我测量了循环的执行时间，得到了约 0.05 秒（因此，每次迭代 0.05 毫秒）。奇怪的是，当我尝试做更多的内存工作（添加额外的 cudaMemcpyToSymbolAsync 和 cudaMemcpyAsync 调用）时，每次调用我得到额外的 <0.01 ms 时间。对应这家伙的研究：[http ://www.cs.virginia.edu/~mwb7w/cuda_support/memory_transfer_overhead.html](http://www.cs.virginia.edu/~mwb7w/cuda_support/memory_transfer_overhead.html)

他还获得了每次将 1K 块传输到 GPU 的 0.01 毫秒。那么这 0.04 毫秒（0.05 - 0.01）的开销是从哪里来的呢？有任何想法吗？可能我应该在新卡上尝试此代码吗？

在我看来，在 cudaDeviceSynchronize 和 CPU 代码之后，我的 GeForce 进入了某种省电模式或类似的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:37:56.797

我建议您增加正在实现的线程数

```
 //Use malloc() to allocate memory on CPU. 
    //Change mem_size to the total memory to be tranferred to GPU.        
    cudaMemcpyToSymbolAsync(const_dev_mem, pinned_host_mem, mem_size, 0, cudaMemcpyHostToDevice);
    dim3 dimBlock(128,2);
    dim3 dimGrid(64000,1);
    my_kernel<<<dimGrid, dimBlock>>>(output);
    //several other calls of different kernels
    //change size field to 1000*sizeof(FLOAT_T)
    cudaMemcpy((void*)&host_output, output, sizeof(FLOAT_T), cudaMemcpyDeviceToHost);
    // Do some logic with returned value 
```

如果代码崩溃（因为更多线程或更多 GPU 内存），请使用循环。但是，减少它们。

# cakephp - CakePHP：在非对象上调用成员函数 find()

> ID：13130973
> 
> 赞同：1
> 
> 时间：2012-10-29T23:08:32.223
> 
> 标签：cakephp, listbox

我很长时间尝试使用 CakePHP 获得两个表的简单列表菜单关系，但它不起作用。当我能够使用脚手架时，列表菜单可以工作（它是否表明这种关系是正确的？）但是我的代码不是。

我的 url (localhost/forum/posts/add) 显示错误：

> 错误：在非对象上调用成员函数 find()
> 
> 文件：C:\wamp\www\forum\app\Controller\PostsController.php

PostsController.php

```
class PostsController extends AppController {

public $name = 'Posts';

public function index() {

    $this->paginate = array('limit'=>3);
    $posts = $this->paginate('Post');
    $this->set(compact('posts'));
}
public function getCategorias(){
    $categorias = $this->Post->Categotia->find('list', array('fields' => array('id', 'categoria')));
    $this->set(compact('categorias'));
}

public function add(){
    if($this->data){
        if($this->Post->save($this->data))
            $this->Session->setFlash('Post adicionado com sucesso');
    $this->data = array();  
    }
    self::getCategorias();
}

public function edit($id = null){
    if($this->data){
        if($this->Post->save($this->data))
                $this->Session->setFlash('Post editado com sucesso');
        $this->redirect(array('controller'=>'Posts','action'=>'index'));    
    }else{
        $this->data = $this->Post->read(null,$id);

    }
    self::getCategorias();
}

public function delete($id = null){
    if($id){
        if($this->Post->delete($id))
            $this->Session->setFlash('Post Excluido com sucesso');
        $this->redirect(array('controller'=>'Posts','action'=>'index')) ;

    }
}

public function view($id = null){
    if($id){
        $this->Post->id = $id;
        $this->set('post', $this->Post->read());
    }

} 
```

}

我的模型是

Post.php：

```
class Post extends AppModel{
    public $name = 'Post';
    public $belongsTo = array('Categoria');
} 
```

分类.php

```
class Categoria extends AppModel{
    public $name = 'Categoria';
    public $hasMany = array('Post');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:19:47.327

```
 $this->Post->Categotia->find(); 
```

错了，你可以放

```
$this->Post->Categoria->find() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T00:48:12.537

也许你在这里拼错了类别：

> $categorias = $this->Post-> **Categotia** ->find('list', array('fields' => array('id', 'categoria')));

# error-reporting - php ini_set 是如何工作的？

> ID：13130980
> 
> 赞同：2
> 
> 时间：2012-10-29T23:09:07.407
> 
> 标签：error-reporting, php, ini-set

> **可能重复：**
> [ini_set() 的作用范围？](https://stackoverflow.com/questions/6490955/ini-set-scope-of-effect)

我正在开发一个网站，我喜欢在浏览器中看到我的错误，所以我在我的网站顶部有以下代码：

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

根据 php 文档， ini_set “设置给定配置选项的值。配置选项将在脚本执行期间保留这个新值，并在脚本结束时恢复。” 当我读到时，我有点担心。似乎`ini_set()`全局更改了设置，然后在脚本末尾恢复它。

我的问题，这是否意味着在同一服务器上同时运行的任何其他 php 文件也会在浏览器中显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:12:06.127

不会。这个名字可能有点误导，但它只会影响你当前的脚本（那个叫 tha 的脚本`ini_set()`）。如果要进行此全局调整`php.ini`（或使用`.htaccess`）

# java - ImageIO can't read input file

> ID：13130982
> 
> 赞同：11
> 
> 时间：2012-10-29T23:09:10.473
> 
> 标签：java, eclipse, javax.imageio

```
public static void imRes(String pat) {
        try {
            BufferedImage bckimg = ImageIO.read(new File("c:/s/deneme.jpg"));
            File s = new File(pat);
            BufferedImage im = ImageIO.read(s);
            BufferedImage im1 = resIm(im);
            BufferedImage finIm = mergIm(im1, bckimg);
            ImageIO.write(finIm, "jpg", new File("c:/s/deneme1.jpg"));
        } catch (IOException e) {

            e.printStackTrace();
        } 
```

This is my first post, excuse me if I've done something wrong. This code was running properly untill i try to read an image from the source package. But now it can't read any image. What am I doing wrong? Or is it something about eclipse?

Exception:

```
javax.imageio.IIOException: Can't read input file!
    at javax.imageio.ImageIO.read(Unknown Source)
    at imRe.imRes(imRe.java:12)
    at imReTest.main(imReTest.java:6) 
```

Thanks...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T23:10:54.337

Change `/` for `\` if you are using windows.

A more cross-platform approach would be substitute

`C:` for `File.listRoots()[0]` and every `/` for `File.separator`.

Read more on the [File api documentation](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

**EDIT**

(I didn't read this line, sorry)

> This code was running properly untill i try to read an image from the source package

In order to get a file from inside your jar package, one must use the `getClass().getResource()` method.

Example:

```
application-package:
|-Main.java
|-resources
  |-image.jpg 
```

For the above directory structure:

```
BufferedImage im = ImageIO.read(new File(getClass().getResource("/resources/image.jpg").toURI())); 
```

Would do the trick.

# gcc - GCC 插件：检测目标指针大小

> ID：13130983
> 
> 赞同：0
> 
> 时间：2012-10-29T23:09:14.223
> 
> 标签：gcc, compiler-construction

GCC 可以在多个平台上编译，每个平台都有不同的本地指针大小（例如，x86 上为 32 位，x64 上为 64 位）。在 64 位平台上，您甚至可以传递一个 mx32 标志以使其“交叉编译”到 x86。

GCC 插件如何检测***目标***（即 GCC 正在为其生成代码的平台）指针大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:35:48.137

这实际上很容易。这里是。

`pointerSizeInBits = TYPE_PRECISION(integer_ptr_type_node);`

# java - 将特定文本文件上传到 blobstore 会引发异常

> ID：13130987
> 
> 赞同：0
> 
> 时间：2012-10-29T23:09:35.100
> 
> 标签：java, google-app-engine, blobstore

上传文件名带有空格且不带文件扩展名的文本文件会引发以下异常。文件名类似于“README TXT”或“ABC DEF”。

此问题可通过 Blobstore 示例重现。[https://developers.google.com/appengine/docs/java/blobstore/overview#Complete_Sample_App](https://developers.google.com/appengine/docs/java/blobstore/overview#Complete_Sample_App)

你知道如何避免这个问题吗？任何信息表示赞赏。

谢谢，秀树

* * *

```
com.google.apphosting.utils.servlet.ParseBlobUploadFilter doFilter: Could not parse multipart message:
javax.mail.internet.ParseException: Missing ';'
        at javax.mail.internet.ParameterList.<init>(ParameterList.java:135)
    at javax.mail.internet.ContentDisposition.<init>(ContentDisposition.java:51)
    at com.google.apphosting.utils.servlet.MultipartMimeUtils.getFieldName(MultipartMimeUtils.java:59)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

```
java.lang.IllegalStateException: Must be called from a blob upload callback request.
    at com.google.appengine.api.blobstore.BlobstoreServiceImpl.getUploads(BlobstoreServiceImpl.java:153)
    at com.google.appengine.api.blobstore.BlobstoreServiceImpl.getUploadedBlobs(BlobstoreServiceImpl.java:137)
    at com.wyse.test.blobstore.Upload.doPost(Upload.java:24)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:100)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:31:06.907

是的，使用 Java 上传时空格不起作用 - Java mime 解码器会感到困惑，并认为这是行尾而不是寻找“;”

例如，请参阅[此](http://code.google.com/p/googleappengine/issues/detail?id=4583)问题。

# javascript - 我可以从 jQuery UI 选项卡更改目标吗？

> ID：13130988
> 
> 赞同：1
> 
> 时间：2012-10-29T23:09:35.707
> 
> 标签：javascript, jquery, jquery-ui, user-interface, tabs

我想知道我是否可以使用 jQuery UI 选项卡为我做这个 HTML 标记？我知道基本标记，但我需要像下面的代码那样做。

Javascript：

```
$(document).ready(function() {
    $("#tabs").tabs();
}); 
```

HTML：

```
<div id="tabs">
    <ul>
        <li><a href="#tab1">tab1</a></li>
        <li><a href="#tab2">tab2</a></li>
        <li><a href="#tab3">tab3</a></li>
    </ul>
</div>

<div id="content">
    <div id="tab1">
        <p>Content from Tab 1</p>
    </div>
    <div id="tab2">
        <p>Content from Tab 1</p>
    </div>
    <div id="tab2">
        <p>Content from Tab 1</p>
    </div>
</div> 
```

谢谢。

# jquery - 将变量从闭包范围传递给 getJSON jQuery 函数

> ID：13130990
> 
> 赞同：0
> 
> 时间：2012-10-29T23:09:48.060
> 
> 标签：jquery, json, scope

我正在尝试将相同的**jQuery**和**JSON ASP.NET MVC3 方法**附加到两个不同的`<select>`元素：

```
<select id="StartYear">
<option value="">Select Year</option>
<option value="2000">2000</option>
<option value="2001">2001</option>
</select>

<select id="StartMonth">
<option value="">Select Month</option>
</select> 
```

这同样适用于ID 为**"EndYear"**和**"EndMonth"**`<select>`的元素。

 ****我想将相同的 jQuery 函数附加到“开始年份”和“结束年份”：

```
$('[id$="Year"]').change(function () {
        var selectedYear = $(this).val();
        var selectedId = $(this).attr('id')
        if (selectedYear != null && selectedYear != '') {
            $.getJSON('@Url.Action("Months")', { year: selectedYear }, function (months) {
                var monthsSelect = $('#StartMonth');
                if (selectedId == 'EndYear') {
                    monthsSelect = $('#EndMonth');
                }
                monthsSelect.empty();
                daysSelect.prepend("<option text='-- select month --' value='' selected='selected'></option>");
                $.each(months, function (index, month) {
                    monthsSelect.append($('<option/>', {
                        value: month.value,
                        text: month.text
                    }));
                });
            });
        }
    }); 
```

但是，此代码不起作用。我用 Bugzilla 对其进行了调试，我发现这种情况`(selectedId == 'EndYear')`会破坏该功能。变量 selectedId 在闭包范围内，但我不知道如何将其带入函数范围内。否则我不知道这是什么原因。请记住，如果没有这种情况，代码就可以正常工作（当然只是使用#StartMonth）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:55:14.370

如果我正确理解您的问题，`selectedId`则可以在 的成功处理程序中访问该变量`$.getJSON`，但该变量的值可能已经被另一个`change`事件更改。

例如，如果两个`change`事件将在例如“#EndYear”和“#StartYear”的短时间间隔内陈述，则可能如下

1.  `change`“#EndYear”的事件将被触发
2.  `selectedId`变量将设置为“EndYear”
3.  首先`$.getJSON`将开始
4.  `change`“#StartYear”的事件将被触发
5.  `selectedId`变量将设置为“StartYear”
6.  第二个`$.getJSON`将开始
7.  首先`$.getJSON`将完成，变量的值将是处理程序`selectedId`内的“StartYear”`success`
8.  第二个`$.getJSON`将完成，变量的值将是处理程序`selectedId`内的“StartYear”`success`

所以我认为你只需要有不同的变量*实例*`selectedId`来使用发生之前的值`$.getJSON`。您可以以不同的方式实现它。`$.getJSON`对我来说，替换和`$.ajax`使用`context`参数似乎是最原生的`$.ajax`。该代码可能是关于以下

```
$('[id$="Year"]').change(function () {
    var selectedYear = $(this).val();
    var selectedId = $(this).attr('id')
    if (selectedYear != null && selectedYear != '') {
        //$.getJSON('@Url.Action("Months")', {year: selectedYear}, function(months){
        $.ajax({
            url: '@Url.Action("Months")',
            dataType: 'json',
            data: { year: selectedYear },
            context: {selectedId: selectedId},
            success: function (months) {
                var selectedId = this.selectedId; // get from context
                ....
            }
        });
    }
}); 
```****

# c# - 如何在代码中绑定 GridViewColumn 的 DisplayMemberBinding

> ID：13130993
> 
> 赞同：3
> 
> 时间：2012-10-29T23:10:12.650
> 
> 标签：c#, wpf, binding, gridviewcolumn

我有一个使用 GridViewColumnCollection 的 MultiColumn TreeView。我的情况，我不知道会有多少列，也不知道它们的标题名称。这是运行时的发现。

因此，我需要在代码中创建这些列并动态绑定到它们。

好的 - 创建很简单：

```
GridViewColumn c = new GridViewColumn();
c.Header = "Next Column";
myTree.Columns.Add(c); 
```

现在我绊倒了 - 假设我希望绑定到我的 viewModel 的“MyName”属性：

```
Binding myBinding = new Binding(??);
myBinding.Source = ??
BindingOperations.SetBinding(myTree,GridViewColumn.????  , myBinding); 
```

现在这个模板

```
 <DataTemplate x:Key="CellTemplate_Name">
        <DockPanel>
            <ToggleButton x:Name="Expander"
                          Margin="{Binding Level,
                                           Converter={StaticResource LevelToIndentConverter},
                                           RelativeSource={RelativeSource AncestorType={x:Type l:TreeListViewItem}}}"
                          ClickMode="Press"
                          IsChecked="{Binding Path=IsExpanded,
                                              RelativeSource={RelativeSource AncestorType={x:Type l:TreeListViewItem}}}"
                          Style="{StaticResource ExpandCollapseToggleStyle}" />
            <TextBlock Text="{Binding Name}" />
.                
.
.
    <Style TargetType="{x:Type l:TreeListViewItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type l:TreeListViewItem}">
                    <StackPanel>
                        <Border Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <GridViewRowPresenter x:Name="PART_Header"
                                                  Columns="{Binding Path=Columns,
                                                                    RelativeSource={RelativeSource AncestorType={x:Type l:TreeListView}}}"
                                                  Content="{TemplateBinding Header}" />
                        </Border>
                        <ItemsPresenter x:Name="ItemsHost" />
                    </StackPanel> 
```

XAML 中的列插入和绑定显示为：

```
 <l:TreeListView x:Name="myTree" ItemsSource="{Binding MySource}">
    <l:TreeListView.Columns>
        <GridViewColumn x:Name="GridViewColumn0" CellTemplate="{StaticResource CellTemplate_Name}" 
                        Header="Name" />
        <GridViewColumn Width="60"
                        DisplayMemberBinding="{Binding Description}"
                        Header="Description" /> 
```

任何有关 SetBinding 的帮助将不胜感激。我一直在寻找，直到我的手指掉下来。

更新：很好的答案：

```
 GridViewColumn c = new GridViewColumn();
        c.Header = "Next Column";
        myTree.Columns.Add(c);

        Binding myBinding = new Binding("MyName"); 
        myBinding.Source = viewModel;
        BindingOperations.SetBinding(myTree.Columns[myTree.Columns.Count - 1], 
            GridViewColumn.HeaderProperty, 
            myBinding); 
```

绑定现在可以完美地对抗标题 - 非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:13:47.890

（从评论中提取答案：）

您可以使用如下代码手动设置绑定：

```
Binding myBinding = new Binding("MyName");
myBinding.Source = viewModel;
BindingOperations.SetBinding(myTree.Columns[i], GridViewColumn.HeaderProperty, myBinding); 
```

其中`i`是列数。

为了设置`DisplayMemberBinding`，可以使用更简单的代码：

```
Binding descriptionBinding = new Binding("Description");
myTree.Columns[i].DisplayMemberBinding = descriptionBinding; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T03:58:36.587

我把它变成一个方法`NewGridViewColumn`，设置参数`header`和`bindingName`方法，你会得到一个绑定完成的GridViewColumn：

```
 private GridViewColumn NewGridViewColumn(string header, string bindingName)
    {
        GridViewColumn gvc = new GridViewColumn();
        gvc.Header = header;
        gvc.DisplayMemberBinding = new Binding(bindingName);            
        return gvc;
    } 
```

.

然后在这样的 ListView xaml 的情况下：

```
<Grid>
        <ListView Margin="5" Name="ListViewTest"></ListView>
</Grid> 
```

您可以使用以下方法轻松地将 GridViewColumn 添加到构造函数中的 ListView `NewGridViewColumn`：

```
 public MainWindow()
    {
        InitializeComponent();

        //Give the Source to ListViewTest
        //ProduceNames() makes a List<NameClass> that 
        //NameClass has 3 property Name1,Name2,Nmae3
        ListViewTest.ItemsSource = ProduceNames();

        GridView gview = new GridView();

        //add some GridViewColumns to the gview
        gview.Columns.Add(NewGridViewColumn("FirstName","Name1"));
        gview.Columns.Add(NewGridViewColumn("SecondName","Name2"));
        gview.Columns.Add(NewGridViewColumn("ThirdName","Name3"));

        //set the gview to the ListViewTest's View
        ListViewTest.View = gview;

    } 
```

结果：

[![在此处输入图像描述](../Images/1663562d960904738400757139d82ede.png)](https://i.stack.imgur.com/drRW2.png)

# css - css 在 IE 中偶尔工作

> ID：13130994
> 
> 赞同：0
> 
> 时间：2012-10-29T23:10:17.907
> 
> 标签：css, internet-explorer

![在此处输入图像描述](../Images/143fd300ca722d24b23ff068ac2a5518.png)我有额外的样式表来尝试修复令人讨厌的 IE，但是有一些图像我无法让步。此页面[http://www.sporttours.net/news/](http://www.sporttours.net/news/)上新闻项目旁边的小图标图像显示在侧边栏艺术“Sport Tours”上。我可以通过添加红色边框、完全隐藏它们以及其他一些东西来影响图像。但是，我不能影响边距或填充来尝试移动它们。有人有什么建议吗？是的，他们希望它也能在 IE 中完美运行（哈！）所以我不能就这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:12:54.977

首先[验证你的 HTML——](http://validator.w3.org/check?uri=http://www.sporttours.net/news/&charset=%28detect%20automatically%29&doctype=Inline&group=0)你可以看到它充满了错误。

验证表明您缺少一个 doctype - 添加一个！

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

# xcode - 设置视图xcode的边距

> ID：13130995
> 
> 赞同：0
> 
> 时间：2012-10-29T23:10:29.787
> 
> 标签：xcode, uiview, margin

我一直在编写android应用程序，现在我正在制作一个iphone应用程序。我想为我的观点创造利润。我不想解释我的确切情况，但是如果有人帮助我解决这个问题，我将能够弄清楚我需要做什么。

我有两个视图，我希望第一个视图占据整个屏幕。然后我希望始终保持另一个视图，比如说在所有四个边上距离屏幕边缘 20 像素。在 xcode 中是否有一种简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:15:33.133

我假设您正在使用 Interface Builder（现在是 Xcode 的一部分）。

按照您的建议添加视图 - 在所有 4 个边上留下 20 像素的边框。设置所有 6 个调整大小选项（灵活的高度、宽度、顶部、底部、左侧和右侧）。

![在此处输入图像描述](../Images/29687cbee50c44e4a0aad388b8d7c55d.png)

确保在父视图上启用了“自动调整子视图”。

如果父视图也调整大小，则视图现在将调整大小，根据需要保留 20 像素的边距。

# android - 无法使用线程执行活动的方法

> ID：13130997
> 
> 赞同：1
> 
> 时间：2012-10-29T23:10:34.750
> 
> 标签：android, illegalstateexception

我有一个按钮，其 onClick 属性为“onClick”，如下所示`android:onClick="onClick"`。我在 android 2.3.3 中运行它

这是主要活动中的点击功能。正如预期的那样，此函数位于 OnCreate 方法之外。

```
 public void onClick(View v){

    final String textUpdate= editStatus.getText().toString();
     new Thread(new Runnable(){
     public void run() {
            try {

            Twitter twitter = new Twitter("student", "password");
            twitter.setAPIRootUrl("http://yamba.marakana.com/api");
            twitter.setStatus(textUpdate);
            } catch (TwitterException e) {

                Log.e(TAG, "Died", e);
                e.printStackTrace();
                }
            }
     }).start();
} 
```

问题是每当我单击按钮时，应用程序就会停止工作。（强制关闭）。所以请查看代码并告诉您是否可以找到问题。

感谢你在期待。

这是日志-

```
> E/AndroidRuntime(613): FATAL EXCEPTION: main
E/AndroidRuntime(613): java.lang.IllegalStateException: Could not execute method of the activity
E/AndroidRuntime(613):  at android.view.View$1.onClick(View.java:2704)
E/AndroidRuntime(613):  at android.view.View.performClick(View.java:3100)
E/AndroidRuntime(613):  at android.view.View$PerformClick.run(View.java:11644)
E/AndroidRuntime(613):  at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(613):  at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(613):  at android.os.Looper.loop(Looper.java:126)
E/AndroidRuntime(613):  at android.app.ActivityThread.main(ActivityThread.java:3997)
E/AndroidRuntime(613):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(613):  at java.lang.reflect.Method.invoke(Method.java:491)
E/AndroidRuntime(613):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
E/AndroidRuntime(613):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
E/AndroidRuntime(613):  at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(613): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime(613):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(613):  at java.lang.reflect.Method.invoke(Method.java:491)
E/AndroidRuntime(613):  at android.view.View$1.onClick(View.java:2699)
E/AndroidRuntime(613):  ... 11 more
E/AndroidRuntime(613): Caused by: java.lang.VerifyError: com.example.yamba.StatusActivity$1
E/AndroidRuntime(613):  at com.example.yamba.StatusActivity.onClick(StatusActivity.java:31)
E/AndroidRuntime(613):  ... 14 more
I/Process(613): Sending signal. PID: 613 SIG: 9 
```