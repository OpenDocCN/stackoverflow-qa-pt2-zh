# StackOverflow 问答 15094000-15094999

# c# - 访问基类中的派生类成员

> ID：15094001
> 
> 赞同：0
> 
> 时间：2013-02-26T16:17:20.060
> 
> 标签：c#, inheritance

我想访问基类中的派生类成员：

```
class Program
{
    static void Main(string[] args)
    {
        B b = new B();
        b.FieldTest = 5;
        b.MethodeTest();

    }
}

public class A
{
    public void MethodeTest()
    {
        //will return B
        Type t = this.GetType();
        Console.WriteLine(t);

        var temp = ???.FieldTest;
        //i want that these return 5
        Console.WriteLine(temp);
        Console.ReadLine();
    }
}

public class B:A
{
    public int FieldTest;
} 
```

我不确定这些是可能的，但我希望你有任何想法来解决它。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T16:19:29.493

好吧，您*可以*使用动态类型来做到这一点：

```
dynamic dynamicThis = this;
var temp = dynamicThis.FieldTest; 
```

...但这是一个非常奇怪的要求。如果`this`实际上*只是*的一个实例`A`，或者实际上是一个没有此类成员的不同子类的实例，您会期望发生什么？基本上这是一个狡猾的设计。

目前尚不清楚您要实现什么，但您可能希望创建`A`一个具有所有子类都可以实现的*抽象属性的**抽象类。*（请注意，您不能使字段抽象...）

 *如果这没有帮助，请提供更多详细信息，说明您首先尝试这样做的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:19:11.863

你不能按照你的例子展示它的方式来做到这一点。基类对派生类的实现一无所知。

但是，您可以做的是在基类中定义一个虚拟方法或属性，可以在派生类中实现，并返回所需的值（模板方法模式）：

```
public class A
{
   protected virtual int FieldTest { get { return 0; } }

   public void TestMethod()
   {
        Console.WriteLine ("FieldTest: " + FieldTest);
   }

}

public class B : A
{
   protected override int FieldTest { get { return 5; } }
}

public class C : A 
{
   protected override int FieldTest { get { return 10; } }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:22:16.747

基类无权访问派生类的字段。需要这样做可能是应用程序结构错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:20:23.443

使您的方法虚拟化，并在派生类中覆盖它。您可以调用方法的基类实现，也可以添加特定于派生类的新行为：

```
public class A
{
    public virtual void MethodeTest()
    {
        //will return B
        Type t = this.GetType();
        Console.WriteLine(t);
        Console.ReadLine();
    }
}

public class B:A
{
    public int FieldTest;

    public override void MethodeTest()
    {
        base.MethodeTest(); // base class implementation

        Console.WriteLine(FieldTest); // FieldTest is available here
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T16:21:09.443

除非每个`A`人都有一个`FieldTest`属性，否则你不能在不检查 the`A`是否实际上是一个`B`.

```
var b = a as B;
if (b != null)
{
   b.FieldTest;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T16:37:25.470

您不必从基类访问派生类成员。相反，您的设计应该允许更多派生类型提供实现，然后调用基类。或者，如果调用在多个派生类型之间共享，那么逻辑应该属于基类。

因为您似乎需要使用单个方法执行调用，所以正常的覆盖应该可以工作。一个人为的例子，

```
class Animal
{
   public virtual bool Speak() { //return true.  Assume all animals make a sound }
}

class Dog : Animal
{
  public override bool Speak() { //Bark and return base.Speak() }
} 
```

现在如果 Dog 定义`Eat()`， Animal 不应该看执行`derived.Eat`。相反，Eat 应该在 Animal 中定义并由派生类调用。*

# vb.net - 将 Breeze js 代码转换为 vb.net 时出现 WebActivator 错误

> ID：15094003
> 
> 赞同：1
> 
> 时间：2013-02-26T16:17:21.723
> 
> 标签：vb.net, breeze, webactivator

在将一些微风 API 从 C# 代码转换为 VB.NET 后，当我运行我的项目时`WebActivator`抛出以下消息：`Server Error in '/' Aplication`

> DevCentralBreeze.HotTowelRouteConfig 类型没有名为 RegisterHotTowelPreStart 的静态方法

我想我编码的一切都是正确的——有一个静态成员，但 WebActivator 找不到它。

有谁知道我怎样才能`WebActivator`认识到这一点？也许一些配置问题？

```
Imports System.Web.Http

<Assembly: WebActivator.PreApplicationStartMethod(GetType(BreezeWebApiConfig),     "RegisterBreezePreStart")> 
Public Class BreezeWebApiConfig
  Public Shared Sub RegisterBreezePreStart()
    GlobalConfiguration.Configuration.Routes.MapHttpRoute(name:="BreezeApi", routeTemplate:="api/{controller}/{action}")
  End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:11:50.760

看起来您的错误与您发布的代码无关。

错误是指`HotTowelRouteConfig`类和缺少的`RegisterHotTowelPreStart`方法。您的代码显示`BreezeWebApiConfig`类`RegisterBreezePreStart`（这不是您正在寻找的方法... ;-)。

# php - 我如何从我的 jquery 代码中的 php 类中获取数据

> ID：15094010
> 
> 赞同：0
> 
> 时间：2013-02-26T16:17:37.773
> 
> 标签：php, jquery

我有 php calss 称为`class SpecialSCMembers extends SpecialPagePlugin`此类以 HTMl 格式返回数据，当用户单击“会员目录”选项卡时，我希望此页面加载到“会员目录”选项卡下方。我的标签看起来像“帐户|个人资料|Sc会员|会员更新|会员目录”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:23:55.123

使用 Ajax 将 HTML 页面的内容加载到您的选项卡中。您可以从 php 类发送 HTML，然后在 Ajax 请求返回时使用 Javascript 将 DIV 的 innerHTML 设置为 html 代码。

# c# - Web 服务的快速而肮脏的性能测试——我有什么选择？

> ID：15094016
> 
> 赞同：1
> 
> 时间：2013-02-26T16:17:44.490
> 
> 标签：c#, performance, testing, performance-testing

我有一些简单的 Web 服务，从数据库中检索信息并将信息存储在数据库中，用 C# 编写，使用 IIS。我的老板要求我的老板为明天编写一份关于这些 Web 服务性能的快速报告。作为一个没有这方面经验的实习生，我想知道我在这里有什么选择？我有大约 2 个小时来测试这个。

我做了什么 ：

*   使用简单的用例流程创建了 2 个简单的 Web 测试。
*   使用分步加载模式创建了一个负载测试，该模式显示应用程序何时中断（有多少并发用户导致错误/查询未返回）。

他们还需要报告哪些其他重要指标？我在这里测试性能的其他选择是快速、肮脏和最有效的吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:22:07.577

带有并发请求/线程选项的最简单负载测试 - 我使用[Apache Bench](http://httpd.apache.org/docs/2.2/programs/ab.html)。

[这](http://httpd.apache.org/docs/2.2/programs/ab.html#output)是 Bench 为您提供的输出列表，也许其中一些指标对您的情况有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:25:34.017

需要检查的几个地方是[ApacheBench](http://httpd.apache.org/docs/2.0/programs/ab.html)，它可以告诉您除了其他指标之外，您可以处理多少个请求/秒。

还提供[Microsoft Web 容量分析工具](http://support.microsoft.com/kb/231282)

# ios - 无法在 iPad 上安装企业应用程序...此时无法安装

> ID：15094019
> 
> 赞同：1
> 
> 时间：2013-02-26T16:17:51.703
> 
> 标签：ios, xcode, ipad, installation

我创建了一个我希望以无线方式分发的应用程序，[http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)

我已按照此页面上的所有步骤，将文件上传到我们的服务器并在几台 iPad 上访问，因此弹出窗口显示“想要安装”。我点击“安装”，应用程序图标出现在 iPad 上，等待栏出现，然后是“正在安装”，我想……但不，下载达到大约 50-75%，然后弹出一条错误消息， “无法下载应用程序，此时无法安装。”

起初我认为这是由于我们的互联网连接较弱造成的，然后我认为这可能是应用程序的大小，但是当在同一个 iPad 上构建 xcode 时，一切正常，所以这不是问题。

有没有其他人经历过这个？和/或知道问题可能是什么......真的在这里碰壁。

[http://img248.imageshack.us/img248/1952/20130226160335.png](http://img248.imageshack.us/img248/1952/20130226160335.png)

提前致谢！

# iphone - 与 JSON API 的 iOS 连接

> ID：15094021
> 
> 赞同：0
> 
> 时间：2013-02-26T16:17:53.427
> 
> 标签：iphone, ios, objective-c, github

我正在编写一个 iPhone 应用程序的计划，用于管理您在 GitHub 上的存储库。这是大学作业。

我可以从 Objective-C 进行 OAuth，它是如何工作的？它只是加载内置浏览器的“使用 GitHub 登录”按钮，还是用户名/密码组合？

我是否能够从中取回生成的令牌并使用 Core Data 存储它，直到用户强行注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:27:40.040

你绝对可以——可以通过 GitHub 的基于 Web 的身份验证流程，或者使用他们的“非 Web 应用程序”替代方案。两者都[在这里](http://developer.github.com/v3/oauth/#create-a-new-authorization)详细介绍。

然而，许多开发人员已经为各种语言创建了 GitHub API 库，包括在 GitHub 自己的库页面上列出[的 Objective-C库。](https://github.com/owainhunt/uagithubengine)您可能会发现它更容易，并且您可以随时修改它（并希望将您的更改贡献回来！）如果您需要做库不支持的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T11:42:15.330

您可以查看我在 iOctocat 中使用的身份验证代码：[https ://github.com/dennisreimann/ioctocat](https://github.com/dennisreimann/ioctocat)

在后台，我使用的是带有 OAuth2 扩展的 AFNetworking，这使得大部分通信变得非常容易。可以在此处找到该应用程序正在执行的自定义操作： [https ://github.com/dennisreimann/ioctocat/blob/master/Classes/GHBasicClient.m](https://github.com/dennisreimann/ioctocat/blob/master/Classes/GHBasicClient.m)

希望这可以帮助你:)

# flash - 嵌入跨域 Flash (swfobject)

> ID：15094024
> 
> 赞同：1
> 
> 时间：2013-02-26T16:18:05.770
> 
> 标签：flash, swfobject

在我的站点中，我使用 swfobject.js 嵌入了一个 flash 组件。我的站点和 .swf 不在同一个域中，我怀疑这会导致我的问题 - flash 在我的站点上是可见的，但它不响应任何交互（例如单击它）。

所以我的网站正在运行，比方说，`my.domain.com`在 HTML 的头部有这个：

```
<script type="text/javascript">
    var flashvars = {};
    var params = {
        base: "",
        wmode: "transparent",
        scale: "noscale",
        salign: "tr"
    };
    swfobject.embedSWF("http://some.other.domain/myFlash.swf", "divIv", "100%", "500px", "9.0.0", "expressInstall.swf", flashvars, params);
</script> 
```

结果：我看到了 swf，但单击它没有任何作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:08:40.950

你检查你的控制台是否有错误？它也可能是您从其他站点加载的 swf 文件。它可能是他们的域独有的。尝试参考这个链接[http://www.kirupa.com/forum/showthread.php?301185-AS3-cross-domain-policy](http://www.kirupa.com/forum/showthread.php?301185-AS3-cross-domain-policy)

# clojure - 使用作为参数提供的宏名称创建宏的函数

> ID：15094026
> 
> 赞同：1
> 
> 时间：2013-02-26T16:18:08.700
> 
> 标签：clojure

我正在尝试定义一个将创建宏的函数，当我尝试动态提供宏的名称时遇到了问题。这是示例我面临的问题的缩小代码：

```
(defn create-times-macro [n]
  (defmacro thatManyTimes [a]
    `(* ~n ~a)))

(create-times-macro 2)

(thatManyTimes 3) ;; evals to 6 
```

到现在为止还挺好。现在说我想提供宏的名称作为参数：

```
(defn create-times-macro [macroName n]
  (defmacro macroName [a]
    `(* ~n ~a)))

(create-times-macro (symbol "multiplyBy") 3)
(multiplyBy 3) ;; fails with unable to resolve symbol multiplyBy
(create-times-macro "multiplyBy" 3)
(multiplyBy 3) ;; same failure 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:43:28.037

您似乎对宏的使用感到困惑。

*   创建函数的宏 - 好的
*   创建另一个宏的宏 - 好的
*   创建宏的函数 - 不正常（不常见且不常见）。

所有这些都表明宏是编译时的东西，而函数是运行时的东西。通常的方向是编译时到运行时，最后一点是从运行时到编译时。

您的第一个代码示例适用于 REPL，但不适用于已编译的 JAR。在 REPL 中，您处于 compile-time->run-time->print->loop 中，并且由于循环的原因，您从运行时返回到 compile->time，这就是最后一点在 REPL 中起作用的原因。在已编译的代码中，您将只有编译后的代码，并且只有运行时世界，除非您`eval`在代码中使用它可以使您回到编译时间....等我头疼，但我希望这能让事情变得清晰:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:35:25.037

不确定这是否是最好的方法，但它有效：

```
=> (defmacro create-times-macro [macroName n]
     (let [the-name (symbol macroName)]
       `(defmacro ~the-name [a#]
          (* ~n a#))))
#'user/create-times-macro
=> (create-times-macro "hi" 3)
#'user/hi
=> (hi 4)
12 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:27:00.610

在这种情况下，您不需要宏。函数在大多数情况下都适用，并且它们比宏具有更多的能力。例如，如果您将其创建为函数

```
(defn create-times-fn [n]
  (fn [a]
    (* n a))) 
```

你会得到同样的结果

```
(def three-times (create-times-fn 3))

(three-times 2)
=> 6 
```

或者

```
(let [three-times (create-times-fn 3)]
  (three-times 2)) 
```

你可以将它作为参数传递给其他函数

```
(map (create-times-fn 2) (range 5))
=> (0 2 4 6 8) 
```

或将其作为结果返回或与其他功能组合。你用宏失去了所有这些东西。

# android - android：gmail后绘图消失

> ID：15094028
> 
> 赞同：0
> 
> 时间：2013-02-26T16:18:16.950
> 
> 标签：android, share, resume

我正在开发一个绘图应用程序，用户可以在其中共享绘图板中的图片，并使用以下代码：

```
share = new Intent(Intent.ACTION_SEND);
share.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
share.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(attachment));
share.setType("image/png");
context.startActivity(Intent.createChooser(share, "Share Drawing")); 
```

虽然可以通过whatsapp或gmail等成功发送图像，但完成gmail操作并返回应用程序后，绘图板的绘图消失了。

然而对于whatsapp来说，分享后图纸仍然会保留。

有谁知道在gmail返回后（在转到其他应用程序并恢复之后）为什么以及如何绘图仍然保留在drawView中？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:36:01.487

这将记录您的 Activity 的主要生命周期回调，然后您可以在 logcat 中检查它们。您可能必须在 onSaveInstanceState 回调中保存有关图像的一些信息，然后在 onCreate 回调中恢复它，假设您的活动确实被销毁并重新创建，但情况似乎确实如此。

```
 public class MyActivity exetends Activity {
         private final String TAG = "MyActivity";

         @Override
         protected void onCreate(Bundle savedInstanceState) {
             Log.d(TAG, "onCreate")
         }

         @Override  
         protected void onStart() {
             Log.d(TAG, "onStart")
         }

         @Override
         protected void onRestart() {
             Log.d(TAG, "onRestart")
         }

         @Override
         protected void onResume() {
             Log.d(TAG, "onResume")
         }

         @Override
         protected void onPause() {
             Log.d(TAG, "onPause")
         }

         @Override
         protected void onStop() {
             Log.d(TAG, "onStop")
         }

         @Override
         protected void onDestroy() {
             Log.d(TAG, "onDestroy")
         }
         @Override
         protected void onSaveInstanceState(Bundle outBundle) {
             Log.d(TAG, "onSaveInstanceState);
         }

} 
```

# php - include_path 间歇性改变值：可能是什么原因？

> ID：15094032
> 
> 赞同：0
> 
> 时间：2013-02-26T16:18:21.797
> 
> 标签：php, apache, cpanel, race-condition

我们的一台托管服务器遇到了一个非常奇怪的问题。

**问题：**似乎 PHP 的 include_path 被我目前无法确定的进程半随机地改变了。这很奇怪，因为我们禁用了操作码缓存，多次重新启动服务器并使用 mod_ruid2 将用户帐户彼此隔离。

**重现此问题的脚本（除此之外没有其他内容）：**

```
// Removing this call from the file makes the errors go away
// This is just a part of our default include path, but is explicitly
// defined here to be able to reproduce the problem
set_include_path('.:/usr/local/share/php');

// Obviously, include_path should now be exactly the value as set above
echo 'Include path is: ';
var_dump(get_include_path());
echo '<br />';

// Debugging line: what is the cwd?
echo 'CWD IS: ';
var_dump(getcwd()) . '<br />';

// Test local file inclusion; this works
require_once 'bar.php';

// Test global file inclusion from include_path (location: /usr/local/share/php/)
// this intermittently fails
require_once 'Zend/Loader/Autoloader.php'; 
```

我目前最好的猜测是某种竞争条件正在被触发。

**对正在发生的事情的准确描述：**

1.  调用 set_include_path()
2.  调用 get_include_path()

**预期结果：** 2 应该匹配 1

**实际的、间歇性的结果：** 2 为空或包含以下之一（随机）

1.  PHP 源代码（文档块）
2.  看似随机的字符串，无论长短
3.  其他用户似乎已设置的其他 include_paths 的有效路径
4.  一个空字符串
5.  字符串“内容类型：文本/html”

**我们尝试了以下方法：**

1.  使用最新的 PHP 版本重新编译 Apache 和 PHP
2.  关闭 APC 重新编译 Apache 和 PHP
3.  清除 APC 缓存
4.  重启阿帕奇
5.  重启整个服务器

**一些技术细节：**

*   操作系统：CentOS 5.9
*   网络服务器：Apache 2.2.23
*   PHP: 5.3.22

**显示我的 include_path 变量的奇怪内容的屏幕截图：**

![PHP 注释现在突然出现在我的包含路径中](../Images/035412d2ef6f0d4bef3720729388fc25.png) PHP 注释现在突然出现在我的包含路径中

* * *

![HTTP 标头现在位于包含路径中](../Images/ec477d088fc491cdd63797e600181605.png) HTTP 标头现在位于包含路径中

* * *

![包含路径中的乱码内容](../Images/949ab892edf2c4c716e62407a4be5794.png) 包含路径中的乱码内容

* * *

![包含路径中的更多乱码内容](../Images/619e8f8a6add667261577bc3c37bd8e2.png) 包含路径中的更多乱码内容

* * *

我没有选择和想法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:39:23.983

**这个问题现在似乎已经解决了。**由于此特定服务器是运行 WHM/Cpanel 的专用服务器，因此我已将此问题上报给 Cpanel 支持。

经过一些研究，问题被缩小到`homeloader.so`模块，这使得每个用户的 PEAR 库成为可能。禁用此模块后，症状消失。

此问题的根本原因仍在调查中，但如果其他人遇到类似问题，这可能是值得关注的。

# ruby-on-rails - rails 中的 model_name_ids 方法出错

> ID：15094033
> 
> 赞同：-1
> 
> 时间：2013-02-26T16:18:25.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

下面是我的控制器代码

```
class ProductComparisonController < ApplicationController

def product_vote
    if !session[:category_tracker]
        @categories = Category.where(:page_id => params[:page_id]).select(:id)
        session[:category_tracker]=@categories
        session[:step]=0
        session[:number_of_categories]=@categories.count
    end

    chosen_products = session[:category_tracker][session[:step]].chosen_product_ids
    @products = Product.where(:id => chosen_products).all
    session[:step] = session[:step] + 1

end 
```

结尾

当我运行它时，它对于类别的第一个实例运行完美。但是当步长值得到更新并且它必须从会话变量中获取第二个值时，它会给出一个错误。

错误是：（第 11 行）

未定义的方法 `chosen_product_ids' for :@new_record:Symbol

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:36:27.753

您在会话中存储 ActiveRecord::Relation 而不是实际的数组。

尝试将 .all 添加到类别提取的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:15:23.313

您需要将 Relation 转换为要存储在会话中的数字数组。然后根据当前步骤的ID从数据库中获取对象。

```
class ProductComparisonController < ApplicationController

  def product_vote
    if !session[:category_tracker]
      # No need to use instance variables here.
      categories = Category.where(:page_id => params[:page_id]).select(:id)
      # Iterate the categories extracting only the ids.
      # select(:id) does not do this.
      session[:category_tracker] = categories.map(&:id)
      session[:step] = 0
      session[:number_of_categories] = categories.count
    end

    # First fetch the category
    category = Category.find(session[:category_tracker][session[:step]])
    # Then call methods on it
    chosen_products = category.chosen_product_ids
    @products = Product.where(:id => chosen_products).all
    session[:step] += 1
  end
end 
```

# mysql - 连接来自不同数据库的值

> ID：15094035
> 
> 赞同：0
> 
> 时间：2013-02-26T16:18:28.233
> 
> 标签：mysql, database

我有 2 个用于不同商店的独立数据库。两个数据库中都有一些需要连接数量的产品。我认为每次有人从其中一个购买它更新另一个时，SQL 触发器可能会起作用，但连接查询运行速度非常慢。

第一个数据库由以前的开发人员完成，其中包含大约 65,000 种产品。它做得非常糟糕，我正在尝试使用不同的设置移动新商店。任何建议或如果您能想到解决方案将不胜感激。我一直在为此绞尽脑汁。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:27:01.563

一种方法是使用[MySQL Replication](http://dev.mysql.com/doc/refman/5.6/en/replication-howto.html)将数据从第一个数据库复制到第二个数据库。然后，您可以在第二个数据库上查看来自两个数据库的产品数据，从而允许您使用单个查询（即仅在第二个数据库上运行的查询）查询两个数据集。

# jquery - jQuery，试图保存点击事件，解除绑定和重新绑定，无法重新绑定

> ID：15094036
> 
> 赞同：1
> 
> 时间：2013-02-26T16:18:28.583
> 
> 标签：jquery

我被困在试图取消绑定并重新绑定点击事件。我想“保存”点击事件，取消绑定，然后用条件语句重新绑定。

我可以使用此处的信息来保存单击处理程序： [jQuery find events handlers registered with an object](https://stackoverflow.com/questions/2518421/jquery-find-events-handlers-registered-with-an-object/2519061#2519061)

我使用的是旧版本的 jQuery (1.5)，所以我使用的是 data("events") 方法。

至今...

```
var events = $('#myElement').data("events");

alert(events.click[0].handler);

$('#myElement').unbind('click'); 
```

现在它会提醒我处理函数，它看起来是正确的。我想向它添加东西，但我认为对于初学者来说，我会尝试重新绑定相同的点击事件。但是，我不确定如何正确重新绑定。我尝试过的事情：

```
$('#myElement').bind('click', null, events.click[0].handler); // gives 'click.0 is null or not an object

$('#myElement').bind('click', events.click[0].handler); // gives 'click.0 is null or not an object

$('#myElement').bind('click', null, events.click); // seems to have no effect

$('#myElement').bind('click', events.click); // seems to have no effect 
```

所以我觉得我几乎拥有它，但我不知道从这里做什么。如何使用 events 变量重新绑定 click 事件？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:30:37.943

You can make use of the `.die()` method in jQuery (added in 1.4.1). Any handler that has been attached with .live() can be removed with .die().

Ref for .die() : [http://api.jquery.com/die/](http://api.jquery.com/die/)
Ref for .live() : [http://api.jquery.com/live/](http://api.jquery.com/live/)

HTML

```
<div id="myElement">Testing save event</div> 
```

JavaScript

```
<script type="text/javascript">
    $(document).ready(function() {

     function ClickEventHandler()
     {
        alert('abc');
     }

     $('#myElement').live('click', ClickEventHandler);

     function GetClickEventHandler(selector)
     {
        for(var i = 0 ; i < $._data(document).events.live.length ; i++)
        {
            if( $._data(document).events.live[i].selector == selector )
            {
                return $._data(document).events.live[i].handler;
            }
        }   
        return null;
     }

     var myFn = GetClickEventHandler('#myElement');

     $('#myElement').die();

     $('#myElement').live('click', myFn );
    });
</script> 
```

To see is the code actually work, you can try comment out `$('#myElement').live('click', myFn );` and click the element, it should not alert. Then enable this back, it will alert.

Added jsfiddle example:
One is commented out : [http://jsfiddle.net/9wbPH/1/](http://jsfiddle.net/9wbPH/1/)
One is actual work: [http://jsfiddle.net/9wbPH](http://jsfiddle.net/9wbPH)

# postgresql - 更大上下文中的 postgresql 子查询计数

> ID：15094044
> 
> 赞同：0
> 
> 时间：2013-02-26T16:18:44.500
> 
> 标签：postgresql, subquery

我有以下查询：

```
 SELECT sum(p.price) as "totalPurchase", sum(s.price) as "totalSale", sum(er.price) as          
 "totalRet", v.name as "vendor"
 FROM "Esns" e
 JOIN "EsnsPurchaseOrderItems" ep on ep."EsnId" = e.id
 JOIN "PurchaseOrderItems" p on ep."PurchaseOrderItemId"= p.id
 JOIN "PurchaseOrders" po on p."PurchaseOrderId" = po.id
 JOIN "Vendors" v on po."VendorId" = v.id
 LEFT OUTER JOIN "EsnsSalesOrderItems" es on es."EsnId" = e.id
 LEFT OUTER JOIN "SalesOrderItems" s on es."SalesOrderItemId" = s.id
 LEFT OUTER JOIN "EsnsRmas" er on er."EsnId" = e.id
 GROUP BY v.id 
```

但是，我还想计算由上述连接组织的所有 e.id 以及字段 e."inStock" = true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:22:12.677

```
SELECT  sum(p.price) as "totalPurchase", 
        sum(s.price) as "totalSale", 
        sum(er.price) as "totalRet", 
        v.name as "vendor",
        sum(CASE WHEN e."inStock" = true THEN 1 ELSE 0 END) as "totalInStock"
FROM    .....
GROUP   BY .... 
```

或者

```
COUNT(CASE WHEN e."inStock" = true THEN 1 END) as "totalInStock" 
```

# php - 准备多个插入mysqli

> ID：15094048
> 
> 赞同：1
> 
> 时间：2013-02-26T16:18:51.443
> 
> 标签：php, mysql, mysqli

请在关闭它之前阅读完整的问题:)
我正在寻找一个带有**mysqli**的准备好的语句（重要，不是 PDO，因为我不能使用它并且不能将一些 PDO 代码传输到 mysqli。），我可以在其中插入 long查询有很多值（大约 2000）。但是必须准备好查询。

* * *

所以我就这样开始了：

```
$array = array("a1", "a2", "a3","a5", "a7", "a5","a9", "a32", "a3", "a4"); 
// AND SO ON UP TO 2000
$type = "s";
$end = count($array);

$query = "INSERT INTO table (value) VALUES (?)";
for ($i = 0; $i <= $end - 1; $i++) 
{
    $query  .= ", (?)";
    $type   .= "s";
}

$stmt = $conn->prepare($query); 
$stmt->bind_param("$type", /* PROBLEM */); // HERE IS THE PROBLEM!!!
$stmt->execute();
$stmt->close(); 
```

* * *

但现在我的问题是，如何动态绑定“bind_param”中的变量？
请不要在“执行”上向我显示任何类似 for 循环的内容，因为这对于 2000 次插入来说太慢了:)。

我的意思是

```
$allvalues = "";
foreach ($array as $value) 
{
    $allvalues .= "$value ";
}
$stmt->bind_param("$type", $allvalues); 
```

但是，当然，我不能绑定它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:21:07.587

用于使用[`call_user_func_array`](http://www.php.net/manual/en/function.call-user-func-array.php)数组调用函数。

或者只是传递所有变量来执行，那么你甚至不需要使用`bind_param`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-12T16:16:51.327

我花了很长时间试图找到一个简单而优雅的解决方案来解决这个问题，并找到了完美的东西（适用于 php5.6 及更高版本）。

```
$array = array("a1", "a2", "a3", "a4", "a5", "a6"); 

$type = str_repeat("s", 6);

$query = "INSERT INTO table (value) VALUES (?)" . str_repeat(", (?)", 6);

$stmt = $conn->prepare($query); 
$stmt->bind_param($type, ...$array);
$stmt->execute();
$stmt->close(); 
```

...$array 的东西称为[splat 运算符](https://lornajane.net/posts/2014/php-5-6-and-the-splat-operator)。当我尝试插入多行时遇到问题 - 因为它没有以正确的顺序给出值 - 所以只需要创建一个包含所有行的数组。

# html - 根据下面的宽度确定宽度？

> ID：15094050
> 
> 赞同：1
> 
> 时间：2013-02-26T16:18:52.743
> 
> 标签：html, css, wordpress, html-table

我想知道是否可以根据下面标签的宽度来确定标签的宽度。

我目前有这张桌子：

```
<table>
  <tr>
    <td>This title is way too long and screws up my style</td>
    <td>Title2</td>
    <td>Title 3</td>
  </tr>
  <tr>
    <td><img src="http://domain.com/image1.jpg" /></td>
    <td><img src="http://domain.com/image2.jpg" /></td>
    <td><img src="http://domain.com/image3.jpg" /></td>
  </tr>
</table> 
```

有没有根据下面图像的宽度来缩放标题标签？

希望很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:30:12.937

This might be considered a bit of a hack, but if you set the width of cells in the upper row to have a minimum acceptable value, the cells in the second row will expand the columns. Here's a sample:

```
 <style>
     tr.titles td {
         width: 1px;
     }
 </style>

<table>
  <tr class="titles">
    <td>This title is way too long and screws up my style</td>
  </tr>
  <tr>
    <td><img src="http://domain.com/image2"/></td>
  </tr>
</table> 
```

So in this case it will be the image, that determines the width of the column, and the overall width will be equal to the image width.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:06:09.920

我可以建议一种使用 jquery 的方法。检查此代码：

如果这是你的表。给它一个 id 。

```
<table id='mytable'>
  <tr>
    <td>This title is way too long and screws up my style</td>
    <td>Title2</td>
    <td>Title 3</td>
  </tr>
  <tr>
    <td><img src="http://domain.com/image1" /></td>
    <td><img src="http://domain.com/image2" /></td>
    <td><img src="http://domain.com/image3" /></td>
  </tr>
</table> 
```

所以在脚本部分

```
<script>
$(document).ready(function () {
            $('#myTable > tr > td').click(function () {
                 var width = $(this).next('td').children('img').prop('width');
                 $(this).prop('width',''+width+'px');
            });
});
</script> 
```

# c# - 从 ASP.NET MVC 中的表单发布到另一个模型

> ID：15094054
> 
> 赞同：14
> 
> 时间：2013-02-26T16:18:59.857
> 
> 标签：c#, asp.net, asp.net-mvc, razor

如果我有一个有模型的视图，可以说 Car..

```
@model Project.Car 
```

在该视图中，我想创建一个将数据发送到新模型的表单

```
 @using (Html.BeginForm("Add", "Controller"))
    {
        @Html.Hidden("ID", "1")
        @Html.Hidden("UserID", "44")
        @Html.TextArea("Description")
    } 
```

我注意到，如果我的操作是用我的 ViewModel 定义的，它就不起作用（模型始终为空）：

```
 [HttpPost]
    public PartialViewResult Add(ViewModels.NewModel model) 
```

但是，如果我使用 FormCollection 它可以工作：

```
 [HttpPost]
    public PartialViewResult Add(FormCollection formCollection) 
```

这是视图模型：

```
public class NewModel
{
    public int ID { get; set; }
    public int UserID { get; set; }
    public string Description { get; set; }
} 
```

我的问题是我可以从我的表单中将数据发布到 NewModel 吗？它所在的视图与 Project.Car 绑定是正确的。它是页面上的一个小表单，需要发布一组与 Project.Car 无关的不同数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-28T18:25:15.770

是的，您可以将视图强输入到一个模型并将其发布到另一个模型。

在这样做时，您有两种选择：

1.  手动为每个输入字段提供正确的名称，以便默认活页夹能够理解并创建模型（[示例](https://stackoverflow.com/a/8512933/11683)）。

    虽然这有效，但这也意味着您必须注意拼写错误，如果您拼错属性名称，您将不会收到任何编译时错误。

2.  在绑定到新模型类型的视图中手动创建 HTML 助手。然后它将为您正确生成 HTML。

    为了构造帮助器，您需要一个包装器对象，该对象将以`IViewDataContainer`接口的形式公开您的模型实例。您可以在任何地方定义该包装器，包括模型本身：

    ```
    public class NewModel
    {
      public int ID { get; set; }
      public int UserID { get; set; }
      public string Description { get; set; }

      public class WrapperForHtmlHelper : System.Web.Mvc.IViewDataContainer
      {
        public System.Web.Mvc.ViewDataDictionary ViewData { get; set; }

        public WrapperForHtmlHelper(NewModel value)
        {
            this.ViewData = new System.Web.Mvc.ViewDataDictionary<NewModel>(value);
        }
      }
    } 
    ```

    然后在视图中创建一个绑定到以下实例的助手`NewModel`：

    ```
    var ModelToPost = new YourApp.Models.NewModel() { ID = 1, UserID = 43, Description = "" }

    var hlp = new HtmlHelper<YourApp.Models.NewModel>
             (this.ViewContext,
              new YourApp.Models.NewModel.WrapperForHtmlHelper(ModelToPost)
             ); 
    ```

    然后你像往常一样使用助手：

    ```
    @hlp.HiddenFor(m => m.ID)
    @hlp.HiddenFor(m => m.UserID)
    @hlp.TextAreaFor(m => m.Description) 
    ```

    然后您`PartialViewResult Add(ViewModels.NewModel model)`将正确接收数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T16:28:27.180

您的模型名称和您的操作之间存在差异。在示例中，您已显示模型被调用`Add`，而在您的操作中您正在使用`ViewModels.NewModel`. 更糟糕的是，您的视图被强类型化为一个名为`Car`. 凌乱这一切。

所以从定义一个正确的视图模型开始：

```
public class CarViewModel
{
    public int ID { get; set; }
    public int UserID { get; set; }
    public string Description { get; set; }
} 
```

然后是控制器：

```
public class CarsController: Controller
{
    public ActionResult Add()
    {
        var model = new CarViewModel
        {
            // don't ask me, those are the values you hardcoded in your view
            ID = 1,
            UserID = 44,
        };
        return View(model);
    }   

    [HttpPost]
    public PartialViewResult Add(CarViewModel model)
    {
        ...
    }
} 
```

以及与您的视图模型相对应的强类型视图：

```
@model CarViewModel
@using (Html.BeginForm())
{
    @Html.HiddenFor(x => x.ID)
    @Html.HiddenFor(x => x.UserID)
    @Html.TextAreaFor(x => x.Description)
    <button type="submit">Add</button>
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T18:43:47.310

```
My question is can I post data to NewModel from my form? 
```

简短的回答是肯定的，您可以将表单发布到与应用程序中的任何模型相关的任何控制器上的任何控制器操作。

例如，让您的表单发布到控制器`Add`上的“”操作`NewModel`：

```
@using (Html.BeginForm("Add", "NewModel"))
    {
        @Html.Hidden("ID", "1")
        @Html.Hidden("UserID", "44")
        @Html.TextArea("Description")
    } 
```

由于您的视图是`Car`模型的强类型，您可以更改此设置并将 ViewModel 发送到您的视图，其类型与您更新的模型匹配（如[Darin 演示](https://stackoverflow.com/a/15094236/2040555)的），或者您需要将发布数据从控制器映射`Car`到`NewModel`：

关于`CarController`' 的`Add`动作（发布）：

```
[HttpPost]
public PartialViewResult Add(Car model)
{
    //now map attribute values from the Car model onto 
    //corresponding attributes of an instance of NewModel
    NewModel new = new NewModel();
    new.ID = model.ID;
    new.UserID = model.UserID;
    new.Desc = model.Description;
    //etc...

    //update your model/db
    _db.Add(new);

    //Redirect however you wish...
} 
```

另外，请查看[AutoMapper](https://github.com/AutoMapper/AutoMapper)，这是一个对象到对象的映射器，它可以自动将 ViewModel 映射到模型上，反之亦然。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T16:29:25.747

您的视图设置为使用类型模型，`Project.Car` **但是**您的操作方法采用类型模型`ViewModels.NewModel`，**而且**您发布的模型类也是类型`Add`？

将它们全部更改为匹配（假设`Add`是正确的）：

看法：

```
@model Add 
```

控制器：

```
[HttpPost]
public PartialViewResult Add(Add model) 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-02-27T08:03:48.223

为此，您还可以创建自定义模型绑定器。

# visual-studio-2010 - Teechart，甘特系列，Visual Studio 的设计器和“Array rank '2' is too high”错误

> ID：15094056
> 
> 赞同：2
> 
> 时间：2013-02-26T16:19:04.080
> 
> 标签：visual-studio-2010, teechart

每次我尝试`UserControl`使用甘特系列保存对包含图表的更改时，Visual Studio 的设计器总是弹出以下错误消息：

> 阵列等级“2”太高。Visual Studio 只能加载和保存排名为 1 的数组。

我正在针对 .Net 2012 4.1.2012.* 的 Teechart 进行编译，我认为它与此属性有关

```
[Description("MultiDimensional array to store Multiple NextTasks, with the indices being start and end task index and the value -1.")]
[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
public double[,] MultipleNextTasks 
```

类`Gantt`，但我无法想象这让开发人员失望了。我能做的是打开代码编辑器，然后关闭可视化设计器并通过编辑器简单地保存以保留我的更改，但这是一个非常不令人满意的解决方案。

有谁知道如何永久解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:04:24.637

非常感谢您提供的示例和图片。我可以使用最新版本的 TeeChartFor.Net 内部版本号 4.1.2012.01310 重现此问题。我已将其添加到编号为 [ **TF02016534** ] 的错误列表报告中，我们将尝试将其修复到即将发布的 TeeChartFor.Net 版本中。

谢谢，

# ruby - 带有 testlink jenkins 和 testLink 插件的 Ruby 项目

> ID：15094059
> 
> 赞同：1
> 
> 时间：2013-02-26T16:19:11.697
> 
> 标签：ruby, maven, plugins, jenkins, testlink

我是詹金斯 IC 和 Maven 的新手。我正在使用 jenkins 的 testLink 插件进行自动化测试，所以我从“Jenkins TestLink 插件教程”开始。

今天我想知道是否可以使用 ruby​​ 文件而不是 java 文件来制作相同的东西（之后如果一切正常，使用 PL-SQL）。

我用谷歌搜索了很多，但没有具体的方法。（我认为这与 maven 目标有关，或者在 jenkins 中进行配置，但我不知道是什么）。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T19:47:47.197

老问题，但认为无论如何在这里留下答案会很好。

简短的回答是肯定的。该插件与语言无关，但面向测试格式。它目前支持 TestNG、JUnit 和 TAP。

如果您的用例产生任何这些格式（或者如果您可以使用适配器来转换您的测试报告），那么您可能可以使用现有的结果搜索策略之一来自动化您的测试套件。

一切顺利，布鲁诺

# transactions - CQL/Cassandra 回滚？

> ID：15094061
> 
> 赞同：1
> 
> 时间：2013-02-26T16:19:19.133
> 
> 标签：transactions, cassandra, atomic, rollback, cql

几天前我开始使用 Cassandra 1.2.0，昨天我意识到不支持回滚和提交。所以我想知道是否有一种方法可以模拟许多事务的回滚？在我的项目中开发和测试一些新功能时，我真的需要进行回滚。
ps：我正在使用 Eclipse 和 cassandra-jdbc-1.1.2
在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:13:22.957

Cassandra 不支持事务，因此不支持提交和回滚。您通常可以通过其他方式实现您的目标，但这需要您的应用程序正确管理它；Cassandra 不会为你做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-28T15:41:55.073

在 Cassandra 中实现 Transaction 的最佳方法是使用 QueryBuilder.Batch。使用 INSERT、UPDATE 或 DELETE 准备 CQL 并使用 Batch 执行。就是这样。

# oracle - 运行创建的过程时出现 Oracle 错误

> ID：15094076
> 
> 赞同：2
> 
> 时间：2013-02-26T16:20:01.080
> 
> 标签：oracle, plsql, procedure

我有基于酒店房间住宿的 Oracle 数据库。我创建了一个程序 Room_taken，但我无法使其工作。

**这是我的 SQL 过程代码：**

```
CREATE
PROCEDURE Room_taken
(
v_guestID IN NUMBER DEFAULT NULL ,
v_stayfrom IN DATE DEFAULT NULL ,
v_stayto IN DATE DEFAULT NULL ,
v_roomID IN NUMBER DEFAULT NULL ,
v_paymentID IN NUMBER DEFAULT NULL ,
v_totalprice IN NUMBER DEFAULT NULL 
)
AS
v_nofrom DATE;
v_noto DATE;
v_idroom NUMBER(10,0);

BEGIN

BEGIN
SELECT Stay_from, Stay_to     
INTO v_nofrom, v_noto
FROM Stayover
WHERE ID_room = v_roomID;
IF NOT ( v_nofrom >= v_stayfrom
AND v_noto <= v_stayto ) THEN

BEGIN
INSERT INTO Stayover
( Stay_from, Stay_to, Total_price, ID_Room, ID_Guest, ID_Payment )
VALUES ( v_stayfrom, v_stayto, v_totalprice, v_roomID, v_guestID, v_paymentID );
END;
ELSE

BEGIN
raise_application_error( -20002, 'Room is taken!' );
END;
END IF;
END;
END; 
```

**当我输入以下参数后运行程序时：**

```
DECLARE
v_guestID NUMBER;
v_stayfrom DATE;
v_stayto DATE;
v_roomID NUMBER;
v_paymentID NUMBER;
v_totalprice NUMBER;
BEGIN
v_guestID := 1;
v_stayfrom := '17.01.2012';
v_stayto := '19.01.2012';
v_roomID := 1;
v_paymentID := 1;
v_totalprice := 300;

Room_taken(
v_guestID => v_guestID,
v_stayfrom => v_stayfrom,
v_stayto => v_stayto,
v_roomid => v_roomid,
v_paymentID => v_paymentID,
v_totalprice => v_totalprice
);
END; 
```

**我收到一个错误：**

```
Connecting to the database HOTEL.
ORA-01403: no data found
ORA-06512: at "HOTEL_ROOMS.ROOM_TAKEN", line 18
ORA-06512: at line 16
Process exited.
Disconnecting from the database HOTEL. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:42:41.300

您收到错误是因为`SELECT INTO`构造必须在 PL/SQL 中**准确返回 1 行。**您的第一个选择不返回任何行，因此`NO_DATA_FOUND`会引发错误。

如果有 2 行（例如 1 月的预订，2 月的预订），`TOO_MANY_ROWS`则会引发错误。

相反，您要做的是确保插入时不会出现**重叠**。例如，以下查询将返回一段时间内的所有预订：

```
SELECT * 
  FROM Stayover 
 WHERE ID_room = v_roomID
   AND stay_from <= v_stayto 
   AND stay_to >= v_stayfrom 
```

请注意，我比较`stay_from`了`v_stayto`，这不是错字。

您可以将上述查询包含在您的代码中，如下所示：

```
CREATE OR REPLACE PROCEDURE Room_taken(v_guestID    IN NUMBER,
                                       v_stayfrom   IN DATE,
                                       v_stayto     IN DATE,
                                       v_roomID     IN NUMBER,
                                       v_paymentID  IN NUMBER DEFAULT NULL,
                                       v_totalprice IN NUMBER DEFAULT NULL) AS
   l_nb_reservation NUMBER;
BEGIN
   SELECT COUNT(*)
     INTO l_nb_reservation
     FROM Stayover
    WHERE ID_room = v_roomID
      AND stay_from <= v_stayto
      AND stay_to >= v_stayfrom;
   IF l_nb_reservation > 0 THEN
      raise_application_error(-20002, 'Room is taken!');
   END IF;

   INSERT INTO Stayover
      (Stay_from, Stay_to, Total_price, ID_Room, ID_Guest, ID_Payment)
   VALUES
      (v_stayfrom, v_stayto, v_totalprice, v_roomID, v_guestID, v_paymentID);
END; 
```

现在您每个时段只能预订一次房间：

```
SQL> EXEC Room_taken(1, trunc(SYSDATE), trunc(SYSDATE), 1);

PL/SQL procedure successfully completed

SQL> EXEC Room_taken(1, trunc(SYSDATE), trunc(SYSDATE), 1);

begin Room_taken(1, trunc(SYSDATE), trunc(SYSDATE), 1); end;

ORA-20002: Room is taken!
ORA-06512: à "APPS.ROOM_TAKEN", ligne 16
ORA-06512: à ligne 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:46:52.760

错误消息
**ORA-01403**：未找到数据

错误原因

您尝试了以下方法之一：

1.  您执行了一个 SELECT INTO 语句，但没有返回任何行。
2.  您引用了表中未初始化的行。
3.  您使用 UTL_FILE 包读取了文件末尾。

显示建议的解决方案
检查此链接
[http://www.techonthenet.com/oracle/errors/ora01403.php](http://www.techonthenet.com/oracle/errors/ora01403.php)

# wpf - mvvm 中的业务逻辑

> ID：15094077
> 
> 赞同：1
> 
> 时间：2013-02-26T16:20:11.487
> 
> 标签：wpf, mvvm, projects-and-solutions, business-logic

我在 MVVM 应用程序中有业务逻辑 - 不是真正的“数据”，而是真正的逻辑，这意味着“规则”。示例：在 wpf TreeView 中拖动项目，其中每个对象都基于视图模型并且具有取决于业务案例的属性。当然，视图模型中的这些属性是“特定于业务的”。但我倾向于不在“viewmodel”或“Model”下放置静态，如“CanAcceptDragObject()”。这种通用（大部分是静态的）业务特定代码的常见本地位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:37:43.280

我很难理解您的整体问题，但要回答您的具体问题，“我在哪里放置业务逻辑？” 在大多数情况下，答案是模型。

# java - WebView缓存的后台预加载

> ID：15094083
> 
> 赞同：3
> 
> 时间：2013-02-26T16:20:28.867
> 
> 标签：java, android, webview, android-webview

我想用互联网上的网页预加载 WebView 的缓存。这需要异步完成并隐藏，以免干扰其他 UI 交互。预加载的目的是在 WebView 通过可选按钮单击的方式呈现时避免后续的网络调用（最终是为了更快的显示）。

该网页包含 Javascript 和 AJAX，因此我认为使用 HttpClient 之类的东西预加载缓存不会起作用。我还查看了在 AsyncTask 中使用 WebView 的 loadUrl() ，但我发现这与主 UI 线程发生冲突。

有没有类似情况的人找到一种方法来完成后台预加载/缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:30:48.053

`WebView`默认情况下在单独的线程中加载数据，因此无需使用 AsyncTask。只需创建一个隐藏的 WebView 并调用`loadUrl()`.

如果要预加载多个 URL，可以使用 a`WebViewClient`和 override`onPageFinished()`来检测第一个 URL 何时完成。完成后，请`WebView`确保删除对它的引用，以便对其进行垃圾收集。

最后，如果你想确保可见的`WebView`总是在可用时使用 url 的缓存版本，你可以调用：

```
webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK). 
```

# wordpress - 当我在 wordpress 中查看帖子时，我的 javascripts 和代码消失了？

> ID：15094085
> 
> 赞同：0
> 
> 时间：2013-02-26T16:20:30.647
> 
> 标签：wordpress

我的页面：www.acagenturs.dk

在 jquery 横幅下方的首页上，我有 2 个 div。1 表示内容，1 表示侧边栏。

在侧边栏 div 中，我在首页显示最近的新闻帖子。

当我单击这些新闻项目之一时，我会被重定向到帖子页面。这个页面仍然使用前页设计，但由于某种原因，我的名为 main.js 的自定义 JS 文件消失了，它破坏了菜单下拉菜单，并且带有新闻项目的侧边栏也消失了。

此代码显示了我在网站上显示我的内容的方式：

```
<div id="uscontent">
<div id="uscontentleft">
                <?php wp_reset_query(); ?>   
                <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
                <?php the_content(); ?>
                <?php endwhile; endif; ?> 
</div>
<div id="uscontentright">
                <?php wp_reset_query(); ?>   
                <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
                <?php the_field('sidebar'); ?>
                <?php endwhile; endif; ?> 
</div> 
```

我在 wp_head() 之前将我的脚本包含在一个标准标签中

为什么当我点击新闻帖子时我的侧边栏消失了？为什么javascript消失了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:35:36.437

除非您先删除过滤器，否则您无法将 javascript 添加到帖子中。

您可以尝试的另一件事是在帖子中通过其函数名称调用它。您必须先将其保存为文件，然后使用以下命令调用它：

函数 FILENAME(){ 所需进程}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:48:20.623

显然，如果我创建一个 single.php 页面，我可以避免我的脚本和代码被删除。谢谢您的帮助！

# ios - 基本本地化 + Storyboard + .strings -> 没有本地化

> ID：15094086
> 
> 赞同：9
> 
> 时间：2013-02-26T16:20:32.867
> 
> 标签：ios, objective-c, xcode, localization

Xcode 4.6，目标 iOS 6，SDK iOS 6.1

我从一个适用于我的应用程序的故事板开始；它包含的字符串是英文的。我想添加法语本地化。我这样做了：

*   添加了基础本地化，将 MainStoryboard.storyboard 从 en.lproj 转移到 Base.lproj。
*   添加了法语本地化，将 InfoPlist.strings（英语）和 MainStoryboard.storyboard（基础）克隆到 fr.lproj。
*   更改了法语 MainStoryboard.storyboard 中的几个字符串（UISegmentedControl 中的段标题）。
*   在模拟器中，将语言设置为法语。
*   从 Xcode 运行应用程序。

**结果**：这行得通；我更改的字符串出现在正在运行的应用程序中。

但我想变得花哨。我想使用 .strings 文件进行法语本地化。（这不仅仅是花哨的问题；法语本地化将交给非技术翻译人员，他们不能指望掌握 Interface Builder。）所以：

*   在 Xcode 项目导航器中选择了基础 MainStoryboard.storyboard。
*   在文件检查器的本地化下，将法语本地化从“Interface Builder Cocoa Touch Storyboard”更改为“Localizable Strings”。
*   接受 Xcode 的警告，即法语情节提要将被丢弃，转而使用 .strings 文件，该文件出现在助手编辑器中。
*   进行了相同的两次编辑；毫无疑问它们是错误的字符串，因为它们都被评论为 IBUISegmentedControl...segmentTitles; 并且标签文本不会出现在 .strings 文件的其他任何地方。
*   从模拟器中删除了应用程序的现有（工作）副本。
*   运行应用程序。

**结果**：视图使用基本（最初是英语）本地化，而不是加载法语字符串。

转换为自动布局没有效果。从模拟器中删除应用程序没有效果。删除派生产品目录没有效果。Stack Overflow 建议使用 ibtool 来生成 .strings 文件而不是 Xcode；这两个生成的文件是相同的。

This isn't satisfactory. As I said, I can't turn a .storyboard file over to a nontechnical translator. How can I get iOS to accept the storyboard localizations from a .strings file?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-06T22:47:09.380

Enable the English localization checkbox, using the Localization Strings setting:

![Localization settings](../Images/630ffe8c010a140d662f7ce6318fb379.png)

Clean your build folder (⌥⇧⌘K) and rebuild.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T11:14:12.033

I hope you have already solved. I had the same problem (with translation in Italian) and I solved it this way:

1) File Localizable.string in it.lproj

2) use NSLocalizedString (@ "TEST", @ "comment") method where it needs

3) add Localizable.string in Build Phases-> Copy Bundle Resource The last step is not neccesary in iOS 5.1.

I solved thanks to the response of Cocoanetics in [question]:[Base internationalization and multiple storyboard not working right](https://stackoverflow.com/questions/14773512/base-internationalization-and-multiple-storyboard-not-working-right)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T19:34:19.237

To add onto claymation's answer about doing a clean build, it also helps to delete the app from the iOS Simulator.

It may be related to what [John Hess's answer describes](https://stackoverflow.com/a/12792792/766491).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-18T03:59:02.830

Had to convert my strings file into a storyboard then back into a strings file to get this to work. Ridiculous. Apple could learn a thing or two from Microsoft about creating more reliable developer tools.

# php - PHP、jQuery 和 MySQL 相册

> ID：15094088
> 
> 赞同：0
> 
> 时间：2013-02-26T16:20:34.010
> 
> 标签：php, jquery, mysql, upload, photo

我正在为我的家人制作一个网站，其中一个功能是相册。我已经在谷歌上搜索了一个带有进度条和多个上传的 jQuery 上传器。我发现了，但我想与我的数据库通信。我想要的是你可以上传多张照片，但是当这些照片正在上传时，你可以写一些关于图片、标题、描述、标签、日期的设置，并希望这些设置在数据库中。在数据库中我想要这个。-> ID
-> 标题
-> Autohor
-> 描述
-> 日期
-> 标签
-> 相册
-> 文件位置

如果您不完全理解我，对不起，我是荷兰人，我的英语不是很好，请问您是否不理解，不要讨厌:)

谢谢你，

克里斯

# php - 不考虑下个月日期

> ID：15094089
> 
> 赞同：0
> 
> 时间：2013-02-26T16:20:34.410
> 
> 标签：php

如果“第二天”是周六或周日，我有这个代码可以切换到下周一或周二。

但是，如果下周一是三月脚本，请返回二月而不是三月。

谁能帮我理解哪里错了？

```
 // OP1
$option_1 = Date('Y-m-d', strtotime("+1 days"));
$dd_option_1 = date('l', strtotime( $option_1));

if ($dd_option_1 == "Saturday") {
         $option_1 = Date($option_1, strtotime("+2 days"));
         echo $option_1;
} 
else if ($dd_option_1 == "Sunday") {
         $option_1 = Date($option_1 , strtotime("+1 days"));
         echo $option_1;
}        
else {
echo $option_1;
} 
```

TKS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:28:21.853

您的第二次和第三次使用`date()`没有意义：

```
Date($option_1, strtotime("+2 days")); 
```

`option_1`是一个格式化的时间字符串，第一个参数应该指定格式，就像你第一次使用`date()`.

如果您没有存储日期但始终使用当前日期，您可以使用：

```
$option_1 = Date('Y-m-d', strtotime("+3 days")); 
```

和

```
$option_1 = Date('Y-m-d', strtotime("+2 days")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:45:23.800

您可以使用普通的旧秒计算：

```
<?php
$tomorrow = time() + 86400;
$week_day = date('N', $tomorrow);
$out = null;

if ($week_day > 5) {
    $out = date("r", $tomorrow + 86400 * (8 - $week_day));
} else {
    $out = date("r", $tomorrow);
}
echo $out; 
```

简单，没有大量的 strtotime。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:32:35.087

[strtotime](http://php.net/strtotime)中提供了一些选项来简化并允许指定特殊间隔，例如“下周一”。

```
// OP1
$option_1 = Date('Y-m-d', strtotime("+1 days"));
$dd_option_1 = date('l', strtotime( $option_1));

if ($dd_option_1 == "Saturday" || $dd_option_1 == "Sunday") {
    $option_1 = Date($option_1, strtotime("next Monday"));
}

echo $option_1; 
```

# iphone - 如何在objective-c中创建一个JSON对象？

> ID：15094091
> 
> 赞同：-1
> 
> 时间：2013-02-26T16:20:36.303
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我有一个 javascript DTO，如下所示。**使用下面给出的 params=DTO 列表**转换为 json 对象的结构应该在 Objective-c 中出现吗？

如何基于此构造 JSON 对象？

```
private List<Long> sizes=new ArrayList<Long>();
private List<Long> colors=new ArrayList<Long>();
private List<Long> styles=new ArrayList<Long>();
private List<String> gender=new ArrayList<String>();
private List<Long> brands=new ArrayList<Long>();
private Long vendor;
private String vendorName;
private Boolean isNewArrival=false;
private Boolean isSort=false;
private Boolean isSale=false;
private Boolean isNew=false;
private Boolean isVintage=false;
private Boolean isComingSoon=false;
private Long saleSize;
private Double minPrice=1.0;
private Double maxPrice=5000.0;
private Integer minSalePercentage=0;
private Integer maxSalePercentage=70;
private String socialCategory; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:26:27.770

所以DTO只是一种设计模式而已。[阅读更多](http://en.wikipedia.org/wiki/Data_Transfer_Object)

您可以创建一个具有相同属性的类。

喜欢：

```
//.h
@interface SomeClassDTO : NSObject
@property (nonatomic, strong) NSArray *sizes;
@property (nonatomic, strong) NSArray *colors;
...
@property (nonatomic, assign) long vendor;
...
@end

//.m
@implementation SomeClassDTO
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:45:10.580

从 NSDictionary 创建 NSData：[如何将 NSDictionary 转换为 NSData，反之亦然？](https://stackoverflow.com/questions/5513075/how-can-i-convert-nsdictionary-to-nsdata-and-visa-versa) 然后你可以创建一个json对象，链接如下：http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

根据您的 DTO 创建一个类（我使用了局部变量）并填充字典，然后使用 NSJSONserialization 方法（带有所需的读取选项）来创建 jSON 对象。粗略的例子是：

```
 NSArray *colorArray = [[NSArray alloc]initWithObjects:@"Blue",@"Gray",nil ];

        NSString *vendorName = @"Name";
        double minPrice = 800.0;
        int minSalePercentage = 20;;

        NSMutableDictionary *jSonDictionary = [[NSMutableDictionary alloc]init];

        //Convert primitive types to NSNumber
        NSNumber *minPriceNum= [NSNumber numberWithDouble:minPrice];
        [jSonDictionary setObject:minPriceNum forKey:@"minPrice"];

        NSNumber *salePercentNum= [NSNumber numberWithInt:minSalePercentage];
        [jSonDictionary setObject:salePercentNum forKey:@"minSalePercentage"];

        [jSonDictionary setObject:vendorName forKey:@"vendorName"];
        [jSonDictionary setObject:colorArray forKey:@"colors"];

        //Convert the dictionary containing DTO values into NSData.
        NSData *myData = [NSKeyedArchiver archivedDataWithRootObject:jSonDictionary]; 
```

之后你可以使用：+(id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error

# entity-framework - 实体框架 - 生成的关系是错误的

> ID：15094092
> 
> 赞同：0
> 
> 时间：2013-02-26T16:20:36.637
> 
> 标签：entity-framework

刚开始使用 EF 并且可以这么说已经跌倒了第一道障碍。

我有两个课程：

```
public class Hero
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
}

public class League
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<Hero> Team { get; set; }
} 
```

现在我的代码中没有任何内容可以阻止我拥有一个属于两个联盟的英雄：

```
 League A = new League() { Name = "A Team" };
        League B = new League() { Name = "B Team" };
        Hero me = new Hero() { Name = "Richard" };

        A.Team = new List<Hero>();
        A.Team.Add(me);

        B.Team = new List<Hero>();
        B.Team.Add(me); 
```

但是，当我从包管理器运行“更新数据库”时，它会使用英雄上的外键生成我的数据库 - 这实际上意味着我的英雄只能是 1 个联盟的成员：

```
 PSEUDO:
 TABLE HERO == ID,NAME,LEAGUE_ID
 TABLE LEAGUE = NAME,ID 
```

这有效地阻止了我的课程正常工作，因为英雄现在只能成为 1 个联盟的成员......我怎样才能让 EF 接受这个？我想它需要的是多对多关系，但它不是建立一个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:33:25.050

为了建立多对多关系，您需要在英雄实体上拥有一个联盟集合。

```
public class Hero
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<League> Leagues { get; set; }
}

public class League
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<Hero> Team { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:16:12.603

这也可以通过配置来实现，以防你不想在你的英雄类上定义一个集合。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<League>().HasMany(x => x.Team).WithMany();

        base.OnModelCreating(modelBuilder);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:26:55.710

我假设你希望一个联盟有很多英雄，但一个英雄要在很多联盟中。因此，这是一个多对多的关系，要求您在它们之间有一个链接表对象，并按如下方式对其进行重组（此处使用带有数据注释的 Code-First 显示）：

```
public class Hero
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<HeroLeagueLink> Leagues { get; set; }
}

public class League
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<HeroLeagueLink> Team { get; set; }
}

public class HeroLeagueLink
{
   [Key, Column(Order = 0), ForeignKey("Hero")]
   public virtual int HeroID { get; set; }
   [Key, Column(Order = 1), ForeignKey("League")]
   public virtual int LeagueID { get; set; }

   public virtual Hero Hero { get; set; }
   public virtual League League { get; set; }
} 
```

# checkbox - XPage - 如何获得复选框组的正确值？

> ID：15094094
> 
> 赞同：0
> 
> 时间：2013-02-26T16:20:38.780
> 
> 标签：checkbox, xpages

在我的简单 XPage 中，我有一个带有公式项的复选框组：

```
document1.getValue("cHumanNames") + "|" + document1.getValue("cUserID") 
```

清单`cHumanNames`和`cUserID`没问题，所以我查看并检查`John Smith`并提交`john234`。如所须。

我被要求在单独的列表中显示选中的名称（用于控制...），看来我无法从`userID`. 必须有一种方法可以选择用于显示的值：

```
getcomponent("checkBoxGroup1").?????? 
```

当然，如果我使用`getValue()`，我会得到 ID 列表，但我需要名称。那价值在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:25:47.137

您可以修改此 XSnippet 以搜索别名值的标签：

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=get-selectable-values-of-a-component](http://openntf.org/XSnippets.nsf/snippet.xsp?id=get-selectable-values-of-a-component)

或者您可以使用变量的索引为您的值找到正确的标签（存储在文档中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:01:46.943

当您查看生成的复选框组的 HTML 源代码时，您会发现如下内容：

`<label><input name="view:_id1:checkBoxGroup1" value="john234" type="checkbox"> John Smith</input></label>`

基本上，标签`John Smith`永远不会提交给数据源。如果您正在寻找 SSJS 实现，那么 Sven Hasselbach 的答案会起作用。如果您正在寻找客户端 JavaScript 实现，那么下面的代码片段应该可以工作：

```
function getCheckedValues() {
    var checkedValues = new Array();
    dojo.query("input[name=\"#{id:checkBoxGroup1}\"]").forEach(
        function(node) {
            if (node.checked) {
                checkedValues.push(node.parentNode.innerText);
            }
        }
    );
    return checkedValues.join(", ");
} 
```

上面的代码片段是为 name 的复选框组编写的`checkBoxGroup1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:05:56.457

在服务器端，没有简单的方法来获取显示值 - 选定的值仅作为别名保留，其余的可能仅用于渲染。您可以尝试添加额外的抽象层并创建一个地图，为您的复选框和您的列表提供值。该列表将简单地使用地图将检查值转换为显示值。

# ios - 来自应用程序内部的礼物应用程序，带有 iOS6 送礼功能

> ID：15094096
> 
> 赞同：2
> 
> 时间：2013-02-26T16:20:40.130
> 
> 标签：ios, ios6, app-store, itunes-store

是否有新的直接链接到 iOS6 赠送页面？从 iOS 设备启动时，以下 URL 链接到 iOS5 赠送页面：

[https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/giftSongsWizard?gift=1&salableAdamId=343200656&productType=C&pricingParameter=STDQ](https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/giftSongsWizard?gift=1&salableAdamId=343200656&productType=C&pricingParameter=STDQ)

iOS6 中的送礼页面已更改，现在让您选择送礼日期。访问上面的链接时不会出现此选项。是否有新的 URL 可以打开 iOS6 赠送页面？

# vim - 如何在 Vim 中使用预先编写的命令

> ID：15094097
> 
> 赞同：1
> 
> 时间：2013-02-26T16:20:40.543
> 
> 标签：vim, command, customization

有时一遍又一遍地重写类似的命令很无聊，所以我想将它们全部预先编写，将它们保存到一个自定义命令中并一劳永逸地使用它。但是，由于我将使用的新命令仅用于我当前使用的文件，我真的不想打扰更改 vimrc 文件。所以这是我的问题，是否可以将命令预先写入文件并将其加载到 vim 中然后使用它一次使用？如果可能，该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:22:10.743

只需获取文件：

```
:source /p/a/t/h 
```

此外，您可以在 .vimrc 中使用 autocmd：

```
autocmd BufRead,BufNewFile *.whatever source /p/a/t/h 
```

或者，无需获取文件，只需将命令直接放在`autocmd`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:43:40.243

没有具体的例子，很难给出建议。听起来您想为特定文件类型定义自定义命令，如下所示：

```
:command -buffer ComplexSubstitute %substitute/foo/bar/g 
```

见`:help user-commands`。对于缓冲区范围，将它们放入`~/.vim/ftplugin/<filetype>_commands.vim`左右。使用`:filetype plugin on`，这些文件将自动获取。或者，您可以在那里以几乎相同的方式定义缓冲区本地`:map`ping。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:03:13.437

要快速重复上一个命令，你可以试试我的[redocommand 插件](http://www.vim.org/scripts/script.php?script_id=1661)。它重复历史中包含传递模式的最后一个命令。例子：

```
:%substitute/foo/bar/g
" ... some time later ...
:R %s 
```

使用内置命令，您可以开始重复命令 ( `:%s`)，然后用 . 完成最后一个此类命令`↑`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:21:50.020

好吧，如果只是一次，有一种自然（正常）的方式

1.  将您的命令写在任何文件的**单行中。**您可以将其拉到您想要处理的任何其他文件中。
2.  在这一行上，`^y$`拉出代码。否则`yy`马车会被猛拉
3.  按 转到命令行`:`，点击`C-r "`将其粘贴到命令行。`<CR>`以获利。

有点麻烦，但它的工作原理。我有时也会这样做:)

# c# - 了解 lambda 表达式的工作原理

> ID：15094098
> 
> 赞同：-3
> 
> 时间：2013-02-26T16:20:45.887
> 
> 标签：c#, lambda

```
Regex regex = new Regex("^[a-zA-Z0-9,-_ ]{2,12}$");
            return panel1.Controls.OfType<UserControl1>()
.Select(uc => uc.comboBox2).Any(cb => cb.Text == String.Empty); 
```

由于代码用于验证，我正在实现它，但我不知道它是如何工作的以及它在哪里流动。谁能帮我理解这条线？

```
return panel1.Controls.OfType<UserControl1>()
.Select(uc => uc.comboBox2).Any(cb => cb.Text == String.Empty); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T16:27:49.603

`panel1`- 表单上
`.controls`的控件 - 添加到的控件列表`panel1`
`.OfType<UserControl1>()`- 仅属于类型`UserControl1`
`.Select(uc => uc.combobox2)`的控件 -`combobox2`属性（每个`UserControl1`(in `panel1`)） - 如果这些组合框的任何属性为空字符串
`.Any(cb => cb.Text == String.Empty)`，则计算结果为 true 。`Text`

所以基本上如果添加到您的控件的属性的任何`Text`属性为空，则返回，否则。`combobox2``UserControl1``panel1``true``false`

* * *

关于`.Select(uc => uc.comboxbox2)`.

这就是说调用集合中的每个项目`uc`。对于每个`uc`返回在右侧创建的值`=>`。在这种情况下，它是`uc.combobox2`. 想象一下，对一个单一的，那么你会得到一个类型的变量`ComboBox`（我猜）。因为这是在`Select`方法的上下文中，所以我们将为每个项目执行此操作。为所有这些都做这意味着你得到了一个集合，基于你的集合`UserControl1`。

关于`.Any(cb => cb.Text == String.Empty)` 该`Any`方法的参数与上面的相同，但是它可能会令人困惑，因为在这种情况下，“右侧”的部分`=>`是评估为`true`or的东西`false`。该`Any`方法期望将集合中的每个项目（`ComboBox`在本例中为 a）转换为真或假。如果其中任何一个转换为`true`，它将返回 true ，否则将返回`false`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T16:24:08.457

*   `.Select(...)`迭代给定集合中的所有项目并将新集合投影为`IEnumerable<T>`项目是选定属性或任何对象的位置。

*   `.Any(...)`迭代投影集合中的所有项目并检查是否至少一个项目满足布尔条件。

### 更新：

两者`Select(...)`都有`Any(...)`一个 lambda 表达式作为输入参数。在 C# 中：

```
uc => uc.comboBox2 
```

...相当于（还有其他变体）：

```
delegate(UserControl1 uc) { return uc.comboBox2; } 
```

... 和：

```
cb => cb.Text == String.Empty 
```

... 相当于：

```
delegate(ComboBox cb) { return cb.Text == String.Empty } 
```

事实上，除了表达式树，lambda 表达式只是具有更函数式编程语法的委托。

### 延期执行

作为旁注，您的代码中有一个重点：在迭代之前`Select`不执行（列表，集合：任何实现）。`IEnumerable<T>`也就是说，执行`foreach`, 呼叫`.ToList()`/`.ToArray()`或您的情况：`.Any(...)`.

*这很重要，因为当整个 enumerable 被枚举*时，作为延迟执行一部分的对象可能具有无效状态。

我将使用你的代码给你一个很好的例子：

```
// First of all we select the combo boxes identifiers:
var selectedItems = panel1.Controls.OfType<UserControl1>()
.Select(uc => uc.comboBox2.ID);

// Then we get the first combobox and we change its identifier:
var firstCombo = panel1.Controls.OfType<UserControl1>().First().comboBox2;
firstCombo.comboBox2.ID = "ChangedID";

// Now we convert the selectedItems to a list with ToList():
List<string> list = selectedItems.ToList(); 
```

组合框 ID 列表的第一项是否具有第一个具有原始 ID 或已更改 ID 的组合框？答案是：它将是更改后的，因为在调用`Select(...)`时已执行`ToList()`！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T16:32:10.090

一个 lambda 包含三个部分。箭头“=>”，箭头左侧的参数和箭头右侧的表达式或块。

您正在使用这些 lambdas 来创建匿名方法。Lambdas 也可以用来创建表达式树，但我不会在这里讨论。

此方法调用[Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx)将每个输入投射到输出中：

```
//use the expression syntax, which implies that the value of the expression is returned.
// creates an anonymous method.
Select(uc => uc.comboBox2) 
```

这是通过 lambda 表达式完成的，该表达式访问并返回输入的 combobox2 属性值。这段代码做同样的事情：

```
//use the block syntax to create an anonymous method.
Select(uc => { return uc.comboBox2; }) 
```

如果您不喜欢 lambda，则可以使用您定义的方法，只要该方法的签名与您正在调用的方法的参数匹配即可。

```
//define a method yourself.
public ComboBox GetComboBox(UserControl1 uc)
{
  return uc.combobox2;
}

//use that method in the Select call.
Select(GetComboBox) 
```

* * *

此方法调用[`Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)枚举源并在找到第一个符合条件的项目时停止，返回 true。如果在没有找到匹配项的情况下到达终点，则`Any`返回 false。

```
 Any(cb => cb.Text == String.Empty); 
```

lambda 表达式生成一个返回布尔值的匿名方法。Any 使用该方法检查组合框。检查每个组合框，直到其中一个返回 true - 然后由. 返回 true `Any`。如果没有组合框返回 true，则返回 false `Any`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T16:41:28.420

你用过 Power Shell 吗？我提出这个问题的原因本质上是 Lambda 表达式*通常是管道数据*。这种管道数据的方法使 Linq 的使用变得更快、更高效。这允许使用某些查询语法更快地轻松。

> lambda 表达式是一个匿名函数，可用于创建委托或表达式树类型。通过使用 lambda 表达式，您可以编写可以作为参数传递或作为函数调用的值返回的局部函数。Lambda 表达式对于编写 LINQ 查询表达式特别有用。
> 
> 要创建 lambda 表达式，请在 lambda 运算符 => 的左侧指定输入参数（如果有），并将表达式或语句块放在另一侧。例如，lambda 表达式 x => x * x 指定一个名为 x 的参数并返回 x 的平方值。您可以将此表达式分配给委托类型，如以下示例所示：

```
delegate int del(int i);
static void Main(string[] args)
{
    del myDelegate = x => x * x;
    int j = myDelegate(5); //j = 25
} 
```

关于 Lambda 表达式需要注意的是`=>`运算符。它与赋值具有相同的优先级，`=`并且是一个右结合体。

Microsoft Developer Network 对 Lambda 有很多了解，因为它非常[重要](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。Lambda 表达式的另一个重要资源是*O'Reily 的 C# 5.0 In A Nutshell*。

在您的情况下，Lambda 声明：如果您的任何用户控制字段为空，则返回 true。否则它将返回false。这是使用正则表达式和 Lambda 表达式对字段进行错误检查的有效方法。

@George Duckett 还详细介绍了您的代码含义。

# ruby-on-rails - 如何在 Ruby 中的 Workflow Gem 中记录状态何时发生变化

> ID：15094099
> 
> 赞同：2
> 
> 时间：2013-02-26T16:20:51.597
> 
> 标签：ruby-on-rails, workflow, state-machine

我在 Rails 应用程序中使用 Workflow gem ( [https://github.com/geekq/workflow](https://github.com/geekq/workflow) ) 作为状态机。当一个对象经过各种状态时，我想记录它改变时的日期时间，但不太确定这是否如此简单。

我可能采取的一种方法是增加一个名为“workflow_state_date_changed”的列，并在状态发生变化时更新此列——这是我可以看到对象处于特定状态的时间。然而，它不允许的是从历史上看它过去的所有状态，以及在每个状态中花费的时间。任何想法以一种相当轻松的方式实现这一目标？

期待您的回音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:42:57.583

您可以使用[ActiveRecord::Observer](http://rails-bestpractices.com/posts/19-use-observer)记录属性事件。如果您使用[StateMachine](https://github.com/pluginaweek/state_machine)它支持观察不同的方法，例如`after_transition`. 我不知道如何`Observer`使用`workflow`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:49:34.320

根据 Ryan Bate 的出色截屏视频，我最终从头开始构建了一个解决方案：

[http://railscasts.com/episodes/392-a-tour-of-state-machines?view=asciicast](http://railscasts.com/episodes/392-a-tour-of-state-machines?view=asciicast)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T12:11:21.843

使用 state_machine gem 它非常强大，你可以很容易地做到这一点

[https://github.com/pluginaweek/state_machine](https://github.com/pluginaweek/state_machine)

# android - 在android的sqlite数据库中有两个表的情况下如何编写主要活动类？

> ID：15094102
> 
> 赞同：0
> 
> 时间：2013-02-26T16:21:01.707
> 
> 标签：android, sqlite

我正在创建包含两个表的 sqlite 数据库。当我运行我的程序时，它意外停止。我检查了日志猫，其中显示了 FATAL EXCEPTION:Main.i 的消息，我认为 2 个不同的表有一些适当的方法或步骤。我怎样才能删除它？跟随我的主要activity.java类

```
 import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        DatabaseHandler db = new DatabaseHandler(this);

        /**
         * CRUD Operations
         * */
        // Inserting MapInfoclass
        db.open();
        db.addMapInfoclass("irnumg_admin",035,45,62,72);
        db.addMapInfoclass("irnumg_engirng",91,41,85,64);
        db.addMapInfoclass("irnum_puta",22,71,51,63);
        db.addMapInfoclass("irnum_host9",53,75,69,46);

        // Inserting MapInfoclass1

        db.addMapInfoclass1(035,45);
        db.addMapInfoclass1(85,64);
        db.addMapInfoclass1(51,63);
        db.addMapInfoclass1(69,46);

    }
} 
```

# android - 遍历列表并单击 Robotium 中的列表项

> ID：15094105
> 
> 赞同：1
> 
> 时间：2013-02-26T16:21:08.570
> 
> 标签：android, robotium

我试图通过遍历列表并单击每个列表元素以开始另一个活动来在 Robotium 中运行一些自动化测试。我的测试方法中有以下代码：

代码：

```
 solo.assertCurrentActivity("Wrong activity", MainActivity.class);
      //Clicks on the action bar tab
      solo.clickOnText("Charts"); 

      ArrayList<ListView> list = solo.getCurrentListViews();

      for(int i = 0; i < list.size(); i++) {

         //Clicks on the list item assert that the new activity is started
         solo.clickInList(chartPosition);
         solo.assertCurrentActivity("Json Class", JsonActivity.class);
         //Go back to the list  
         solo.goBack();         

     } 
```

上面的代码没有点击任何列表项，JUnit 测试结果显示所有测试都通过了，这非常令人困惑。

有谁如何成功地遍历 Robotium 中的列表？

我见过另一个与此类似的问题，但答案建议查看 jMock 而不是这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:32:07.730

我看到几个问题：

1.  该代码正在遍历活动中的所有列表视图，但它没有对当前列表视图做任何事情。
2.  由于代码没有显示chartPosition的值，所以不能保证当前列表有那么多项目。
3.  我相信您需要等待新活动加载。

尝试这个：

```
 for(int i = 0; i < list.size(); i++) {
      assertTrue("There are no listviews in this activity.", list.size() > 0);
      chartPosition = 0;  // just to be safe, point at the first item in the list.
      for(int i = 0; i < list.size(); i++) {
         solo.clickInList(chartPosition, i);  // Note that "i" identifies the ListView

         solo.waitForActivity("name.of.the.expected.activity");

      }
     ...
  } 
```

免责声明 - 此建议纯粹基于代码检查和 Robotium Solo Javadoc：[http ://www.jarvana.com/jarvana/view/com/jayway/android/robotium/robotium-solo/1.4.0/robotium-solo-1.4 .0-javadoc.jar!/com/jayway/android/robotium/solo/Solo.html#clickInList(int)](http://www.jarvana.com/jarvana/view/com/jayway/android/robotium/robotium-solo/1.4.0/robotium-solo-1.4.0-javadoc.jar!/com/jayway/android/robotium/solo/Solo.html#clickInList(int))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:21:59.030

我之前曾在稍微不同的状态下使用这些辅助函数来处理列表视图所需的大部分内容：

```
public View getViewAtIndex(final ListView listElement, final int indexInList, Instrumentation instrumentation) {
    ListView parent = listElement;
    if (parent != null) {
        if (indexInList <= parent.getAdapter().getCount()) {
            scrollListTo(parent, indexInList, instrumentation);
            int indexToUse = indexInList - parent.getFirstVisiblePosition();
            return parent.getChildAt(indexToUse);
        }
    }
    return null;
}

public <T extends AbsListView> void scrollListTo(final T listView,
        final int index, Instrumentation instrumentation) {
    instrumentation.runOnMainSync(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(index);
        }
    });
    instrumentation.waitForIdleSync();
} 
```

将这些函数存储在某处（如果您愿意，它们可以是静态的……我不想那样做，但很方便）

```
ListView list = solo.getCurrentListViews().get(0);
for(int i=0; i < list.getAdapter().getCount(); i++){
    solo.clickOnView(getViewAtIndex(list, i, getInstrumentation()))
    solo.assertCurrentActivity("Json Class", JsonActivity.class);
    solo.goBack();
} 
```

您当前的解决方案实际上是尝试遍历屏幕上的所有列表视图，而不是列表视图中的元素。

# android - 询问android xml

> ID：15094106
> 
> 赞同：0
> 
> 时间：2013-02-26T16:21:08.530
> 
> 标签：android, xml

我正在下载示例 android 应用程序

然后在下面文件xml ini

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <net.example.view
        android:id="@+id/view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="10" />

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="346dp"
        android:layout_weight="79.81"
        android:gravity="center_horizontal|center_vertical"
        android:text=""
        android:textSize="16pt" />

</LinearLayout> 
```

我想问一下这个xml

```
 <net.example.view
       android:id="@+id/view"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:layout_weight="10" /> 
```

上面的xml是什么意思，目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:23:50.793

那是一个自定义视图。

自定义视图可以在扩展现有视图的 Java 类中定义，然后可以在布局 XML 中使用。

[您可以在 Android 开发人员指南的创建自定义视图](http://developer.android.com/training/custom-views/index.html)部分阅读更多关于它们的信息（并了解如何创建自己的视图） 。

# jquery - 手风琴内的手风琴折叠父手风琴

> ID：15094108
> 
> 赞同：0
> 
> 时间：2013-02-26T16:21:13.640
> 
> 标签：jquery, jquery-ui, accordion

我正在使用 jqueryui 的手风琴控件。我需要设置一个涉及手风琴内的手风琴的导航。*看起来*它可以构建所有的手风琴。我展开第一个并看到第二个。当我展开第二个时，我看到它展开了，但随后它的父手风琴卷起并隐藏了我刚刚展开的子手风琴。

这个codepen显示了我的问题：[http ://codepen.io/chodenode/pen/Evnsz](http://codepen.io/chodenode/pen/Evnsz)

非常感谢您的帮助：

我的 HTML：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css">
<body>
    <ul id="navigation">
        <li class="parent-li">
            <span class="topic"><a href="">Cardiac</a></span>
            <span class="header"></span>
            <ul>
                <li class="parent-li">
                    <span class="topic">Coronary Atherosclerosis</span>
                    <span class="header"></span>
                    <ul>
                        <li>
                            <a href="">Clinical Outcome Profile</a>
                            <span class="header"></span>
                            <ul>
                                <li>Coronary Atherosclerosis Per 1000 ACA</li>
                                <li>Coronary Atherosclerosis Comorbidity</li>
                                <li>Coronary Atherosclerosis % with PTCA</li>
                                <li>Coronary Atherosclerosis Mortality Rate</li>
                            </ul>
                        </li>
                        <li>
                            <a class="parent" href="">MS-DRG Care Management Profile</a>
                            <span class="header"></span>
                            <ul>
                                <li>MS-DRG 286 Circulatory disorders except AMI w card cath w MCC</li>
                                <li>MS-DRG 302 Atherosclerosis w MCC</li>
                                <li>MS-DRG 303 Atherosclerosis w/o MCC</li>
                                <li>MS-DRG 304 Hypertension w MCC</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="parent-li">
                    <span class="topic">Chest Pain</span>
                </li>
                <li class="parent-li">
                    <span class="topic">Angina</span>
                </li>
            </ul>
        </li>
        <li class="parent-li">
            <span class="topic">Vascular</span>
            <span class="header"></span>
            <ul></ul>
        </li>
        <li class="parent-li">
            <span class="topic">Respiratory</span>
            <span class="header"></span>
            <ul></ul>
        </li>
    </ul>
</body> 
```

我的代码：

```
$(document).ready(function() {
    $('#navigation').accordion({
        header: '.header',
        event: 'click',
        collapsible: true,
        heightStyle: 'content',
        active: false,
        fillSpace: true,
    });

    $('a').click(function(event) {
        event.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T12:11:19.553

你需要有一个单独的`id`和`header`子手风琴。通过使用相同的`id`和`header`jQuery 同时折叠所有内容。

下面应该让你走上正轨......我刚刚复制了你原来的手风琴声明并用`sub_`前缀更新了它

```
$(document).ready(function() {
$('#navigation').accordion({
    header: '.header',
    event: 'click',
    collapsible: true,
    heightStyle: 'content',
    active: false,
    fillSpace: true,
});
$('#sub_navigation').accordion({
    header: '.sub_header',
    event: 'click',
    collapsible: true,
    heightStyle: 'content',
    active: false,
    fillSpace: true,
}); 
```

然后更新您的 html 以反映脚本更改：

```
<body>
<ul id="navigation">
    <li class="parent-li">
        <span class="topic"><a href="">Cardiac</a></span>
        <span class="header"></span>
        <ul>
            <li id="sub_navigation" class="parent-li">
                <span class="topic">Coronary Atherosclerosis</span>
                <span class="sub_header"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:00:35.997

[https://stackoverflow.com/a/14616985/1847695](https://stackoverflow.com/a/14616985/1847695)有什么帮助吗？

看起来每个嵌套的手风琴都在一个`<div>`标签内，然后 javascript 变为：

```
$("div.accordian").accordion({ <options> }); 
```

这是我尚未在您的 codepen 示例上尝试过的唯一选项。

# java - 使用 Spring 使用 JPA/Hibernate 向用户添加车辆的最简单方法

> ID：15094109
> 
> 赞同：1
> 
> 时间：2013-02-26T16:21:18.077
> 
> 标签：java, spring, hibernate, jpa

假设我在我的**UserDAO**类中有这个：

```
@OneToMany(cascade=CascadeType.ALL, mappedBy="owner", fetch=FetchType.EAGER,         orphanRemoval=true)
private Set<Vehicle> vehicles = new HashSet<Vehicle>(); 
```

这是向用户添加新车的推荐方法：

```
User user = userService.findByLoginName("MartinL");
Vehicle newVehicle = new Vehicle();
newVehicle.set(...) // setters omitted
newVehicle.setOwner(user)  // is this needed in any case?
user.getVehicles().add(newVehicle) // add the new vehicle to the Set in User class
userService.save(user); // persist the modified user object to database 
```

这是*最佳做法*还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:29:03.603

我更喜欢直接保存的方法`newVehicle`（当然，在设置`owner`属性之后）。

优点：

1）您的方法将强制框架检查用户的所有属性并将它们写回数据库，并且还将再次写入所有车辆。

2）它更具可读性，因为它更清楚地表明您的意图只是添加一辆新车

3）如果你正在做这个改变，你甚至可能不需要`user`从数据库中检索对象，如果你使用[`EntityManager.getReference()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getReference%28java.lang.Class,%20java.lang.Object%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:29:22.007

您通常希望从关系的（JPA 定义的）依赖端和依赖类中管理双向关联。伪代码：

```
class User {
    private Set<Vehicle> vehicles;

    public void addVehicle(Vehicle vehicle) {
        if(vehicle == null) return;

        vehicle.setOwner(this);
        vehicles.add(vehicle);
    }

    public void removeVehicle(Vehicle vehicle) {
        if(vehicle == null) return;

        if(vehicles.remove(vehicle)) {
            vehicle.setOwner(null);
        }
    }
} 
```

管理实体外部的关系会导致错误和重复代码。

# drupal - 将现有 Symfony2 应用程序与 Drupal 7 集成？

> ID：15094111
> 
> 赞同：0
> 
> 时间：2013-02-26T16:21:25.543
> 
> 标签：drupal, symfony, content-management-system, drupal-7, integration

我的 symfony2 项目（实际上或多或少是一个带有身份验证系统的静态网站）的未来发展将是为经过身份验证的用户提供一个 CMS，以便轻松编辑文本和图像/导入文件/创建页面/访问他们的页面作为网站不断发展壮大。我一直在考虑用 Drupal 实施我的项目会是前进的方向。

我该如何进行？做反向更好吗？还有什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:12:59.193

我不确定你所说的“反向”是什么意思，但有一个适用于 D7的[Symfony 模块。](http://drupal.org/project/symfony)我建议建立一个 Drupal 测试平台并了解如何将您的站点集成到 drupal 中。

据我了解，Symfony2 已经进入 D8 的核心，但 D8 可能距离最初的发布还有很长的路要走。

# perl - perl 生成的 POST 请求出错

> ID：15094113
> 
> 赞同：2
> 
> 时间：2013-02-26T16:21:30.503
> 
> 标签：perl, post, httprequest, lwp

尝试从脚本发送`POST`请求时出现错误：`perl`

```
use LWP::UserAgent;
my $ua = LWP::UserAgent->new;
$ua->credentials($netloc,$realm,$username,$password);
use HTTP::Request::Common;
my $req = HTTP::Request::Common::POST($url,'content' => $conf); 
```

`$req->as_string()`是

```
POST http:.....
Content-Length: 31003
Content-Type: application/x-www-form-urlencoded

.....&createTime=1361370652541&parameters=HASH(0x28fd658)&parameters=HASH(0x28fd670)&parameters=HASH(0x28fd6e8)&parameters=HASH(0x28fd760)&nodes=32&.....&alerts=HASH(0x632d00)&alerts=HASH(0x245abd0)&..... 
```

我得到的错误是

```
Unexpected character ('H' (code 72)): expected a valid value (number, String, array, object, 'true', 'false' or 'null') 
```

这让我怀疑问题出在重复的 `parameters=HASH(...)`和`alerts=HASH(...)`元素上；相反，我想看到类似的东西

```
alerts=%5B%7B%22email%22%3A%22foo%40bar.com%22%2C%22type%22%3A%221%22%2C%22timeout%22%3A%22%22%7D%5D 
```

`$conf`是哈希引用，`$conf->{"parameters"} and` $conf->{"alerts"}` 是数组引用（其元素是哈希引用）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:30:30.777

You can't post references; you presumably need to serialize them in some way; what is the server expecting?

From the error it looks like either the entire array or possibly each of the hashes in it should be serialized in JSON:

```
use JSON;  # preferably have JSON::XS installed
my %prepared_conf = %$conf;
for my $field ( 'parameters', 'alerts' ) {
    $prepared_conf{$field} =
        JSON::to_json( $prepared_conf->{$field}, { 'ascii' => 1 } );
}
my $req = HTTP::Request::Common::POST($url,'content' => \%prepared_conf); 
```

# sql - 计算分区的所有状态和特定状态的数量

> ID：15094119
> 
> 赞同：4
> 
> 时间：2013-02-26T16:21:52.433
> 
> 标签：sql, oracle, oracle11g

为问题准备 sql 查询。

```
CREATE TABLE right_data(RID NUMBER(9,0), STATUS NUMBER(2,0));
CREATE TABLE left_data(LID NUMBER(9,0), URL VARCHAR(70 BYTE));
CREATE TABLE left_to_right(LID NUMBER(9,0), RID NUMBER(9,0));

INSERT INTO right_data (RID, STATUS) VALUES (1,0);
INSERT INTO right_data (RID, STATUS) VALUES (2,1);
INSERT INTO right_data (RID, STATUS) VALUES (3,0);
INSERT INTO right_data (RID, STATUS) VALUES (4,0);
INSERT INTO right_data (RID, STATUS) VALUES (5,1);

INSERT INTO left_data (LID, URL) VALUES (1,'data_1');
INSERT INTO left_data (LID, URL) VALUES (2,'data_2');
INSERT INTO left_data (LID, URL) VALUES (3,'data_3');
INSERT INTO left_data (LID, URL) VALUES (4,'data_4');
INSERT INTO left_data (LID, URL) VALUES (5,'data_5');

INSERT INTO left_to_right (LID, RID) VALUES (1,1);
INSERT INTO left_to_right (LID, RID) VALUES (1,2);
INSERT INTO left_to_right (LID, RID) VALUES (2,1);
INSERT INTO left_to_right (LID, RID) VALUES (1,4);
INSERT INTO left_to_right (LID, RID) VALUES (4,3);
INSERT INTO left_to_right (LID, RID) VALUES (5,1);
INSERT INTO left_to_right (LID, RID) VALUES (3,5);
INSERT INTO left_to_right (LID, RID) VALUES (4,2); 
```

一个错误的查询。

```
SELECT
  DISTINCT left_to_right.LID
  , COUNT(left_to_right.RID) OVER (PARTITION BY left_to_right.LID) AS NUM_RID
  , COUNT(left_to_right.RID) OVER (PARTITION BY
                                      left_to_right.LID
                                  AND
                                      right_data.STATUS = 1
                                  ) AS NUM_RID_S1
FROM
    left_to_right
  JOIN
    right_data
  ON
    right_data.RID = left_to_right.RID
ORDER BY left_to_right.LID; 
```

我如何计算同一查询 LID/（所有 right_data.status 的数量）和 LID/（right_data.status 的数量为 1）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:29:32.563

如果我理解正确，应该这样做：

```
SELECT left_to_right.LID,
       COUNT(DISTINCT left_to_right.RID) all_right_data_statuses,
       COUNT(DISTINCT CASE WHEN right_data.STATUS = 1 THEN left_to_right.RID 
                      ELSE NULL END) right_data_status_1
FROM
    left_to_right
  JOIN
    right_data
  ON
    right_data.RID = left_to_right.RID
GROUP BY left_to_right.LID 
```

[这是一个演示](http://sqlfiddle.com/#!4/b2163/11)供您尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:30:04.170

Well, the easiest way only does this for rows where right_data.status = 1\. So, try this:

```
COUNT(left_to_right.RID) OVER (PARTITION BY left_to_right.LID) AS NUM_RID
COUNT(left_to_right.RID) OVER (PARTITION BY left_to_right.LID, right_data.STATUS) as num2,
(case when right_data.STATUS = 1
      then COUNT(left_to_right.RID) OVER (PARTITION BY left_to_right.LID, right_data.STATUS) /
           COUNT(left_to_right.RID) OVER (PARTITION BY left_to_right.LID)
 end) 
```

Does this work for what you need?

# javascript - 如何遍历 JavaScript 伪类中的所有方法，无论它们是否标记为可枚举？

> ID：15094127
> 
> 赞同：11
> 
> 时间：2013-02-26T16:22:41.690
> 
> 标签：javascript, methods, iteration, pseudo-class, members

我正在尝试遍历 JavaScript 伪类中的所有方法，并且可以通过 (obj.member instanceof Function) 轻松判断某物是否是方法，但是我正在尝试包含可能对 for.. 隐藏的方法.in 循环通过 defineProperty 将可枚举标志设置为 false - 如何迭代伪类的所有成员，而不管可枚举值如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T16:26:57.610

您始终可以使用[`Object.getOwnPropertyNames`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)，它也将包括不可枚举的属性。[但是，这不包括原型](https://stackoverflow.com/a/30158566/1048572)的属性，因此如果您询问“伪类实例”，您可能需要使用[`Object.getPrototypeOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getPrototypeOf).

# python - 如何优化这些嵌套循环？

> ID：15094133
> 
> 赞同：1
> 
> 时间：2013-02-26T16:22:59.160
> 
> 标签：python, optimization, performance

谁能优化这个代码块？它正在工作，但运行速度非常慢。

```
maxsat = 0
possiblevotes = []
for i in range(1,int(numcats)+1):
    for j in range(1,int(numdogs)+1):
        possiblevotes.append('C' + str(i) + ' ' + 'D' + str(j))
        possiblevotes.append('D' + str(j) + ' ' + 'C' + str(i))
for m in possiblevotes:
    count = 0
    for n in votes:
        if m == n:
            count += 1
        elif m.split()[0] == n.split()[0]:
            count += 1
    if count > maxsat:
        maxsat = count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:53:10.520

*无需*生成所有可能的选票。您可以测试您的实际投票，而无需生成`possiblevotes`列表，因为您可以轻松计算现有投票是否可行。

您也只真正计算“留下”选票。`m == n`寻找匹配的“坚持下去”投票并不重要，因为任何正确的“坚持下去”投票`m.split()[0] == n.split()[0]`也是正确*的*。所以你不妨放弃第一个计数，只看第二个。

现在您只是在找到最大`stay`票数。使用 a`collections.Counter()`使计算事情变得更容易：

```
import collections

vote_counts = collections.Counter(v.split()[0] for v in votes)

maxsat = vote_counts.most_common(1)[0][1]  # retrieve the most popular count 
```

这会计算出与您的代码计算出的数字相同的数字，但现在我们只需循环*一次*投票，并且只计算“留”票。

将此与您的循环进行对比，您首先循环`numcats * numdogs`时间，然后循环`numcats * numdogs * 2 * len(votes)`时间。那一个因素`3 * numcats * numdogs` *更大*。

如果您必须首先验证投票，您可以使用：

```
from itertools import ifilter

numcats = int(numcats)
numdogs = int(numdogs)

def validvote(vote):
    stay, go = vote.split()
    cat, dog = sorted((stay, go))
    if (cat[0], dog[0]) != ('C', 'D'):
        return False
    if not (1 >= int(cat[1:]) >= numcats):
        return False
    if not (1 >= int(dog[1:]) >= numdogs):
        return False
    return True

vote_counts = collections.Counter(v.split()[0] for v in ifilter(validvote, votes)) 
```

你也可以开始使用*go*投票：

```
stay_votes = collections.Counter()
go_votes = collections.Counter()

for vote in ifilter(validvote, votes):
    stay, go = vote.split()
    stay_votes[stay] += 1
    go_votes[go] += 1 
```

现在您可以简单地从留票数中*减去go 票（删除任何降至 0 的票数）：*

```
total_votes = stay_votes - go_votes

# Display top 10
for creature, tally in total_votes.most_common(10):
    print('{}: {:>#5d}'.format(creature, tally)) 
```

当然，你*也可以*一次性完成计算：

```
total_votes = collections.Counter()

for vote in ifilter(validvote, votes):
    stay, go = vote.split()
    total_votes[stay] += 1
    total_votes[go] -= 1 
```

但是将投票记录分开可能对以后的分析很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:35:26.640

使用字典而不是列表：

```
possiblevotes = {}
for i in range(1,int(numcats)+1):
    for j in range(1,int(numdogs)+1):
        possiblevotes['C' + str(i) + ' ' + 'D' + str(j)] = 0
        possiblevotes['D' + str(j) + ' ' + 'C' + str(i)] = 0
for n in votes:
    possiblevotes[n] += 1
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:50:15.997

```
import re

vote_pattern = re.compile('^(C|D)\d+\s')

votes = ['123', 'A1123', 'cC32', 'C', 'D0', 'C11']
maxsat = sum(0 if vote_pattern.match(vote) is None else 1 for vote in votes) 
```

当然，您可以将这个可怕的总和更改为过滤器之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:12:23.353

由于嵌套循环，代码需要很长时间。如果你有 1000 只猫、1000 条狗和 1000 张选票，那么第一组循环运行 1000x1000 次；第二组运行 1000x1000x1000 次。如果我们可以删除嵌套循环，那么您的代码将运行得更快。

我注意到你似乎统计了选票，其中“C1 D3”与“D3 C1”相同。我建议您使用集合模块中的 Counter 类来完成繁重的工作。这是我的解决方案：

```
import collections

if __name__ == '__main__':
    votes = ['C1 D3', 'D1 C5', 'D3 C1', 'd1 c1', 'c1 d3'] # Example votes

    # Normalize the votes: 'D3 C1' becomes 'C1 D3',
    # 'c1 d3' becomes 'C1 D3'
    normalized_votes = [''.join(sorted(v.upper().split())) for v in votes]

    # Count the votes
    counter = collections.Counter(normalized_votes)

    # Top 10
    print '--- TOP 10 ---'
    for vote, count in counter.most_common(10):
        print count, vote

    # Or print all
    print '--- ALL ---'
    for vote, count in counter.iteritems():
        print count, vote 
```

### 讨论

*   该解决方案使用 4 个循环：第一个是派生*normalized_votes*，第二个是创建*计数器*变量。最后两个循环处理打印结果。这些循环都不是嵌套的。有人可能会争辩说，`Counter`该类的实现可能包含嵌套循环，但我相信该类的实现尽可能高效。

*   一个重要的步骤是使选票标准化，这将大大简化您的计票。虽然我已经在一行中完成了，但您可以将其分解为几个步骤以帮助理解。

    1.  第一步是将所有投票转换为大写：'d3 c1' 变为 'D3 C1'。
    2.  接下来，我用函数将它们分解成一个列表`split()`：'D3 C1' 变为 ['D3', 'C1']。
    3.  第三步，对每一项进行排序：['D3', 'C1'] 变为 ['C1', 'D3']
    4.  最后一步将它们粘在一起： ['C1', 'D3'] 变为 'C1 D3'

# iphone - iPhone 图像框架内的 HTML 5 视频

> ID：15094141
> 
> 赞同：2
> 
> 时间：2013-02-26T16:23:13.753
> 
> 标签：iphone, html, video

我有点犹豫要不要问这个问题，因为它只是边缘软件开发，但我在其他地方找到我需要的东西的运气为零。

我正在为 iPhone 应用程序构建一个登录页面，并希望在实际 iPhone 设备的图像框架内播放正在使用的应用程序视频（Apple 在他们的许多营销页面上都这样做）。我不关心在 HTML 5 之前的任何东西上播放的视频，它可以像 mp4 一样简单。

是否有任何工具可以轻松为我生成这种功能？考虑到我经常看到这种事情，我很惊讶我很难找到开箱即用的东西。

或者，我不反对自己编写一些东西，所以如果这是唯一的选择，那么这个问题的合适答案将是指向一些信息的指针，这些信息是关于在图像上一般覆盖 HTML 5 视频的最佳方式（iPhone框架）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:33:09.577

您可能找不到任何东西的原因可能是因为它太简单了。将`<video>`标签放在标签内`<div>`，设置框架的背景图像，添加一些填充以使视频在框架内居中，然后瞧。

# ios - 创建了一个对象，但它在objective-c，iOS中仍然为空

> ID：15094148
> 
> 赞同：-4
> 
> 时间：2013-02-26T16:23:36.057
> 
> 标签：ios, objective-c

这是我的功能：

```
- (void) function{
    if (_app.error == nil) {  
        for (Window *window in _app.windows) {
            NSLog(@"test.");
        }

    }
    else {  
        NSLog(@"%@",[_app.error localizedDescription]);
    }
} 
```

而不是进入 for 循环并打印出“test.”，而是从 else 语句中给我“（null）”。我究竟做错了什么？

```
+ (App *)loadApp {

NSString *filePath = [self dataFilePath:FALSE];
NSData *xmlData = [[NSMutableData alloc] initWithContentsOfFile:filePath];
NSError *error;
GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&error];

App *app = [[App alloc] init];

if (doc == nil) app.error = error;

...etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:44:16.737

你只是把你的逻辑从后到前；如果**没有**错误，您想继续 ( `_app.error == nil`)：

```
- (void) function{
    if (_app.error == nil) {      // NOT !=
        for (Window *window in _app.windows) {
            NSLog(@"test.");
        }

    }
    else {  
        NSLog(@"%@",[_app.error localizedDescription]);
    }
} 
```

# .net - Windows server 2008 上的 EventLogInstaller 和 Installutil

> ID：15094150
> 
> 赞同：0
> 
> 时间：2013-02-26T16:23:39.230
> 
> 标签：.net

我使用该技巧在我的机器上创建源和自定义事件日志，但是当我在 Windows Server 2008 上运行它时，运行 installutil.exe 命令时出现未找到日志错误。当然它没有找到，因为我希望它被创建！有任何想法吗？我以管理员身份运行命令抱歉，这是诀窍[http://support.microsoft.com/default.aspx?scid=kb;en-us;329291](http://support.microsoft.com/default.aspx?scid=kb;en-us;329291) 我尝试使用第二种方法，但使用以下方法

```
myEventLogInstaller.Log = "CustomApp"; 
```

# c# - 当使用 C# Chart API 绘制的第一个点位于 (0,0) 时，X 轴值自动递增

> ID：15094162
> 
> 赞同：1
> 
> 时间：2013-02-26T16:24:13.427
> 
> 标签：c#, winforms, mschart

我第一次尝试使用 C# Charting API 并且遇到了一些问题。我有两个硬件信号，我想将它们绘制在一个 x 轴从 -10 到 10 和一个 y 轴也从 -10 到 10 的图表上。我为此使用 SeriesChartType.Point 图表类型除了一种情况外，代码都按我期望的方式工作。我正在使用 AddXY 函数向图表添加点。实际上，这些值来自硬件，但对于这个示例，我只是对这些值进行了硬编码。

我遇到的问题是，如果要绘制的第一个点的 x 轴值为 0，则图表似乎会忽略 0，并且只需为绘制的每个后续点将 x 轴值增加一个。

我创建了以下简化示例来演示我的问题。我将我的 x 轴值硬编码为 0，将我的 y 轴值硬编码为 2。当它绘制点时，第一个点绘制在 (1,2)，下一个点绘制在 (2,2)，然后是 (3,2) , (4,2) 最后是 (5,2)。

我应该注意，这只发生在要绘制的第一个点的 x 轴值为 0 时，如果它有任何其他值，图表将永远正确运行。我不知道是什么原因造成的。

请参阅以下示例代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        ConfigureChartSettings();

        AddFakeData();
    }

    private void AddFakeData()
    {
        this.chart1.Series["Series1"].Points.AddXY(0, 2); //Gets plotted at (1,2)
        this.chart1.Series["Series1"].Points.AddXY(0, 2); //Gets plotted at (2,2)
        this.chart1.Series["Series1"].Points.AddXY(0, 2); //Gets plotted at (3,2)
        this.chart1.Series["Series1"].Points.AddXY(0, 2); //Gets plotted at (4,2)
        this.chart1.Series["Series1"].Points.AddXY(0, 2); //Gets plotted at (5,2)
    }

    private void ConfigureChartSettings()
    {
        //Set point chart type
        this.chart1.Series["Series1"].ChartType = SeriesChartType.Point;

        //Set the market size
        this.chart1.Series["Series1"].MarkerSize = 5;

        //Set the marker shape to a circle
        this.chart1.Series["Series1"].MarkerStyle = MarkerStyle.Circle;

        //X and Y values are both between -10 and 10 so set the x and y axes accordingly
        this.chart1.ChartAreas["ChartArea1"].AxisX.Minimum = -10.0;
        this.chart1.ChartAreas["ChartArea1"].AxisX.Maximum = 10.0;
        this.chart1.ChartAreas["ChartArea1"].AxisY.Minimum = -10.0;
        this.chart1.ChartAreas["ChartArea1"].AxisY.Maximum = 10.0;

        //Set the titles of the X and Y axes
        this.chart1.ChartAreas["ChartArea1"].AxisX.Title = "XSignalName";
        this.chart1.ChartAreas["ChartArea1"].AxisY.Title = "YSignalName";

        //Set the Intervals of the X and Y axes, 
        this.chart1.ChartAreas["ChartArea1"].AxisX.Interval = 5;
        this.chart1.ChartAreas["ChartArea1"].AxisY.Interval = 5;

        //Set the MajorGrid interval to 5.
        this.chart1.ChartAreas["ChartArea1"].AxisX.MajorGrid.Interval = 5;
        this.chart1.ChartAreas["ChartArea1"].AxisY.MajorGrid.Interval = 5;

        //Set the MinorGrid interval to 1.
        this.chart1.ChartAreas["ChartArea1"].AxisX.MinorGrid.Interval = 1;
        this.chart1.ChartAreas["ChartArea1"].AxisY.MinorGrid.Interval = 1;

        //Set the MinorGrid style to Dot so that it is less obstructive.
        this.chart1.ChartAreas["ChartArea1"].AxisX.MinorGrid.LineDashStyle = ChartDashStyle.Dot;
        this.chart1.ChartAreas["ChartArea1"].AxisY.MinorGrid.LineDashStyle = ChartDashStyle.Dot;

        //Enable the minor grids.
        this.chart1.ChartAreas["ChartArea1"].AxisX.MinorGrid.Enabled = true;
        this.chart1.ChartAreas["ChartArea1"].AxisY.MinorGrid.Enabled = true;
    }
} 
```

我已经浪费了很多时间试图弄清楚为什么会发生这种情况，我确信这是非常简单的事情，但我似乎找不到答案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:46:37.680

在这种情况下，MsChart 试图提供太多帮助。它检测到您插入了相同的数据点，`X == 0`因此会自动神奇地切换到使用点索引作为 X 值。请注意，只有当 X 为 0 时才会发生这种情况。

您可以通过使用 . 添加一个额外的空点来修复它`X != 0`。因此，在数据输入的开头添加它会给你想要的图。

```
// insert an empty point with X != 0
this.chart1.Series["Series1"].Points.AddXY(10, 10);
this.chart1.Series["Series1"].Points[0].IsEmpty = true;
// add your points as normal
this.chart1.Series["Series1"].Points.AddXY(0, 2);
this.chart1.Series["Series1"].Points.AddXY(0, 2);
this.chart1.Series["Series1"].Points.AddXY(0, 2);
this.chart1.Series["Series1"].Points.AddXY(0, 2);
this.chart1.Series["Series1"].Points.AddXY(0, 2); 
```

# javascript - Javascript 和 HTML5 文件 API - 将文件正确路由到功能的问题

> ID：15094164
> 
> 赞同：0
> 
> 时间：2013-02-26T16:24:21.610
> 
> 标签：javascript, html, binary, filemaker

我想知道如何为 HTML5“文件”对象定义文件引用，用作 JavaScript 函数的输入，该函数将文件转换为 Base64 编码，而不使用交互式文件输入元素。我看过 HTML5Rocks 示例和许多其他示例，但它们都使用一个`<input type=file>`元素来读取和收集有关要操作的文件的输入。我打算将图像文件（即二进制）作为输入，并输出 Base64 字符串。（也许这很明显，但我是 HTML5 和 JavaScript 世界的新手）

我的一些阅读似乎表明出于安全原因这是不可能的：JS 将能够运行任意文件。我想仔细检查一下。

“文件”输入类型的输出是什么？我可以以某种方式手动模仿它吗？（我在这里找到了一个关于直接将文件本身包含在 JS 中的参考资料，但是你能用二进制文件做到这一点吗？坦率地说，我也不确定我会如何在 FileMaker 方面做到这一点。我的计划，直到此时，是将文件从 FileMaker 导出到已知位置，然后将该位置用作 JavaScript 的输入）

整体情况：我正在尝试在 FileMaker 12 中创建一个自包含的 Web 查看器元素。在 FileMaker 中，我可以在运行之前动态定义我的 HTML 和 JavaScript。我想动态地将 JavaScript 硬编码为已经包含基于数据库信息（即路径和文件名）的文件引用。这一切都在本地机器上运行，不涉及服务器。

我试图最小化最终用户为使文件编码而必须进行的交互：我不希望他们必须将图像放入数据库，然后还必须再次删除（或文件选择器）图像在网络查看器中。我想将所有这些代码保留在 FileMaker 数据库中，以使其更加便携和强大，即不必依赖互联网连接。因此，用户将他们的文件放入数据库，数据库会自动检测该事件，计算 JavaScript（包括文件的路径），然后 JavaScript 在其上运行 Base64 函数，将编码字符串返回到数据库。

也许我应该反过来做：让用户将文件放入 JavaScript 区域，然后将其复制到数据库中。不过，不确定 JavaScript 是否有任何与数据库交互的句柄。

------------------------ 编辑（除了原始问题的一些标记和标记）

让我们暂时忽略 FileMaker 的整个方面。我决定走只使用 HTML5 和 JavaScript 作为文件输入部分的路线（而不是尝试在 FM 中读取它然后输出到 JS）。只是想看看我是否可以让 JavaScript 部分工作。

这是我现在正在玩的一些代码。它主要来自 HTML5 Rocks 演示，以及我找到的 base64 编码例程。但是，我遇到了关于如何定义和调用我的阅读器、onload 事件和编码函数的问题。任何建议，将不胜感激：

```
 <script>
    //  From:  http://www.html5rocks.com/en/tutorials/file/dndfiles/
    //  JC update:  changing the handleFileSelect() function to do the base64 Processing

  function base64Encode(aFile) {
      /*
       * base64.js - Base64 encoding and decoding functions
       * See: http://developer.mozilla.org/en/docs/DOM:window.btoa
       *      http://developer.mozilla.org/en/docs/DOM:window.atob
       * Copyright (c) 2007, David Lindquist <david.lindquist@gmail.com>
       * Released under the MIT license
       *
       * JC, update:  Removed the 'atob' section of code; only need ENcoding, not DEcoding.
       */

      if (typeof btoa == 'undefined') {
          function btoa(str) {
              var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
              var encoded = [];
              var c = 0;
              while (c < str.length) {
                  var b0 = str.charCodeAt(c++);
                  var b1 = str.charCodeAt(c++);
                  var b2 = str.charCodeAt(c++);
                  var buf = (b0 << 16) + ((b1 || 0) << 8) + (b2 || 0);
                  var i0 = (buf & (63 << 18)) >> 18;
                  var i1 = (buf & (63 << 12)) >> 12;
                  var i2 = isNaN(b1) ? 64 : (buf & (63 << 6)) >> 6;
                  var i3 = isNaN(b2) ? 64 : (buf & 63);
                  encoded[encoded.length] = chars.charAt(i0);
                  encoded[encoded.length] = chars.charAt(i1);
                  encoded[encoded.length] = chars.charAt(i2);
                  encoded[encoded.length] = chars.charAt(i3);
              }
              return encoded.join('');
          }
      }
  }

  function handleFileSelect(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    var files = evt.dataTransfer.files; // FileList object - a FileList of File objects.
    var fReader = new FileReader () ;  
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      if ( !f.type.match('image.*')) { continue; }    //To skip non-image files
      fReader.onLoad = (function (aFile) { return base64Encode(aFile); } ) (f);
      output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                  f.size, ' bytes, last modified: ',
                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '<br><br>' , fReader.readAsBinaryString(f) , '<br><br>', '</li>');
     //This defines the 'onLoad' behavior/function...I think.

    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
  }

  function handleDragOver(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
  }

  // Setup the dnd listeners.  [Slightly modified by JC]
  var dropZone = document.getElementById('drop_zone');
  dropZone.addEventListener('dragover', handleDragOver, false);
  dropZone.addEventListener('drop', handleFileSelect, false);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:23:09.620

不，在网络浏览器中，您不能访问用户计算机上的任意文件。永远不能。

您可以从网络获取文件（但仅当它们来自同一来源或通过 CORS 允许，并且`file://`协议不允许时才读取内容）、IndexedDB 数据库和 Chrome 的沙盒文件系统（它不是用户的文件系统 - 它只包含文件你自己放在那里）。

您可以自己创建“文件”：

```
var file = new Blob(["file content"], {type:"text/plain"}) 
```

`Blob`是的基类，`File`它通常可以在任何地方使用`input.files[]`。

您可能有权从其他基于 JS 的环境（如小部件或浏览器扩展）访问本地文件。

# javascript - CodeMirror onBlur 事件和 console.log()

> ID：15094166
> 
> 赞同：12
> 
> 时间：2013-02-26T16:24:30.127
> 
> 标签：javascript, jquery, codemirror

从我读到的关于 CodeMirror 的内容中`onBlur`，当我模糊文本区域时，我应该写到我的控制台日志中。什么都没有得到回声。

```
var textarea = document.getElementById('block');
var editor = CodeMirror.fromTextArea(textarea, {
    lineNumbers: false,
    content: textarea.value,
    onBlur: function () {
        console.log("onBlur");
    }
}); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T16:29:11.863

[使用CodeMirror 的事件文档](http://codemirror.net/doc/manual.html#events)`.on()`中描述的方法绑定它。

```
var textarea = document.getElementById('block');
var editor = CodeMirror.fromTextArea(textarea, {
    lineNumbers: false,
    content: textarea.value,
});
editor.on("blur", function(){
    console.log("onBlur");
}); 
```

# android - setProgressBarIndeterminateVisibility 更改自定义标题栏视图宽度

> ID：15094173
> 
> 赞同：0
> 
> 时间：2013-02-26T16:25:11.220
> 
> 标签：android, actionbarsherlock, loading, titlebar

使用 ActionBarSherlock(ABS) setProgressBarIndeterminateVisibility(true|false) 时，自定义标题视图宽度发生了变化，这可能是由于 ABS 将不确定的可见性设置为消失而不是不可见的事实引起的。

我也看到了我仍在工作的解决方案：

*   设置一个自定义的不确定栏，属于customView，但视觉效果不会那么好；

*   有一种方法可以弄乱 ABS 代码，它不会将栏的可见性设置为消失......

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:42:44.073

正如我预测的那样，ABS 将可见性变为消失。

我选择了第二个选项，这是一个非常简单的解决方案。我下载了 ABS 代码，将其导入并更改了 ActionBarSherlockCompat 类

View.INVISIBLE 在哪里之前是 View.GONE。

方法：

```
public class ActionBarSherlockCompat .... {
   private void updateProgressBars(int value) {

   ...
   else if (value == Window.PROGRESS_VISIBILITY_OFF) {
            if ((features & (1 << Window.FEATURE_PROGRESS)) != 0) {
                horizontalProgressBar.setVisibility(View.INVISIBLE);
            }
            if ((features & (1 << Window.FEATURE_INDETERMINATE_PROGRESS)) != 0) {
                circularProgressBar.setVisibility(View.INVISIBLE);
            }
   ...
   }
} 
```

# php - PHP 标记 - 调用相同的脚本来更新数组和查询

> ID：15094174
> 
> 赞同：0
> 
> 时间：2013-02-26T16:25:13.427
> 
> 标签：php, jquery

我正在为我的漫画网站实施一个标记系统。

标记功能应该：

*   允许用户**选择**多个标签并显示他们选择的标签，选择的标签应该过滤显示的漫画
*   允许用户**取消**选择标签，这将更新他们选择的标签并更新返回的漫画

![在此处输入图像描述](../Images/336191044295e60c5efeeacef0b03e00.png)

上图中我遇到问题的部分是蓝色的：

如果用户选择删除选定的标签，我如何才能回调同一个 php 脚本？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:28:38.593

假设您只是将元素推入已知键下的 $_SESSION 数组中，那么仅检查元素是否存在是否可以接受？类似于

```
if(isset($_SESSION[$tag])) {
  unset($_SESSION[$tag]);
} else {
  $_SESSION[$tag] = 1;
} 
```

要使用它，只需使用`array_keys()`. 无需更改 JS 端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:31:08.853

您可以做的第一件事是发送一组正在被操作的标签。它们可能被添加或删除 - 没关系。

**Javascript**

```
$.get("getTags.php", {tags:["tag1","tag2","tag3"]}, function(data) {
    //have PHP return an updated list of tags.
}); 
```

然后，您迭代发送的标签，并检查它们是否已经存在。如果它们存在，则删除它们。否则，您添加它们。

**PHP**

```
$tags = $_GET["tags"];

foreach ($tags as $tag) {
    if (array_key_exists($tag, $_SESSION['tags'])) {
        unset($_SESSION['tags'][$tag]);
    } else {
        $_SESSION['tags'][$tag] = $tag;
    }
}

//Return your updated list of tags here. 
```

然后，您可以根据需要返回更新的标签列表，以确保所有内容都同步。

* * *

另一种选择是通过在 AJAX 调用中发送“action”参数来明确说明您正在执行的操作：

**Javascript**

```
$.get("getTags.php", {action: "remove", tags: ["tag1"]}, function(data) {
     //Do whatever
} 
```

然后，在您的 PHP 中处理这种情况：

**PHP**

```
$availableActions = array("add", "delete");
$action = $_GET['action'];

//Make sure it's a valid action
$action = array_key_exists($action, $availableActions) ? $action : "add"; //Set a default.

//Now handle each action
switch ($action) {
    case "add":
        //Do stuff.
        break;
    case "delete":
        //Do stuff.
        break;
    default:
 } 
```

# java - 防止 JTable 在双击时自动排序

> ID：15094175
> 
> 赞同：1
> 
> 时间：2013-02-26T16:25:17.623
> 
> 标签：java, swing, jtable

我有一个使用自定义 RowSorter 具有可排序列的 JTable。我假设 RowSorter 类会自动将自己作为 MouseListener 添加到表的 ColumnHeader 中，因为它会自动执行排序，而无需添加任何自定义鼠标侦听代码。这完美地工作。

我还添加了一些代码（基于[此示例](https://forums.oracle.com/forums/thread.jspa?threadID=1476426&tstart=150#6210163)），允许用户通过双击列标题中它们之间的空间来调整表列的大小（模仿 Excel 的行为）。问题是当用户双击标题以调整列大小时，它也会对该列进行排序。 **如果单击标题，我只想对列进行排序。**

我的第一种方法是使用 Java 接口 Proxy 替换 JTable 的所有现有 MouseListener，拦截事件，只传递与单击相关的事件。不过，这似乎有点矫枉过正。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:45:18.737

> 我的第一种方法是使用 Java 接口 Proxy 替换 JTable 的所有现有 MouseListener，拦截事件，只传递与单击相关的事件。

基本上这就是它的工作原理：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.*;

public class ResizeColumnListener implements MouseListener
{
    private static Cursor resizeCursor = Cursor.getPredefinedCursor(Cursor.E_RESIZE_CURSOR);

    private MouseListener uiListener;
    private JTableHeader header;
    private TableColumnAdjuster tca;

    public ResizeColumnListener(JTable table)
    {
        header = table.getTableHeader();
        tca = new TableColumnAdjuster( table );

        MouseListener[] listeners = header.getMouseListeners();

        for (MouseListener ml: listeners)
        {
            String className = ml.getClass().toString();

            if (className.contains("BasicTableHeaderUI"))
            {
                uiListener = ml;
                header.removeMouseListener(ml);
                header.addMouseListener( this );
            }
        }
    }

    @Override
    public void mouseClicked( MouseEvent e )
    {
        if (header.getCursor() != resizeCursor)
        {
            uiListener.mouseClicked( e );
            return;
        }

        //  Handle the double click event to resize the column
        //  Note: The last 3 pixels + 3 pixels of next column are for resizing,
        //  so we need to adjust the mouse point to get the actual column.

        if (e.getClickCount() == 2)
        {
            Point p = e.getPoint();
            p.x -= 3;
            int column = header.columnAtPoint( p );
            tca.adjustColumn( column );

            //  Generate event to reset the cursor

            header.dispatchEvent(new MouseEvent(
                header,
                MouseEvent.MOUSE_MOVED,
                e.getWhen(),
                e.getModifiers(),
                e.getX(),
                e.getY(),
                0,
                false));
        }
    }

    @Override
    public void mouseEntered( MouseEvent e )
    {
        uiListener.mouseEntered( e );
    }

    @Override
    public void mouseExited( MouseEvent e )
    {
        uiListener.mouseExited( e );
    }

    @Override
    public void mousePressed( MouseEvent e )
    {
        uiListener.mousePressed( e );
    }

    @Override
    public void mouseReleased( MouseEvent e )
    {
        uiListener.mouseReleased( e );
    }

    public static void main(String[] args)
    {
        try
        {
//          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }
        catch (Exception e) { }

        DefaultTableModel model = new DefaultTableModel(5, 5);
        model.setValueAt("Row 0 : Column 0", 0, 0);
        model.setValueAt("Row 1 : Column 1", 1, 1);
        model.setValueAt("Row 2 : Column 2", 2, 2);
        model.setValueAt("Row 3 : Column 3", 3, 3);
        model.setValueAt("Row 4 : Column 4", 4, 4);

        JTable table = new JTable( model );
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setAutoCreateRowSorter(true);
        JScrollPane scrollPane = new JScrollPane( table );

        new ResizeColumnListener(table);

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.add( scrollPane );
        frame.setSize(400, 200);
        frame.setVisible(true);
    }
} 
```

此代码还使用[Table Column Adjuster](http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/)。

# javascript - 扩展找不到类

> ID：15094176
> 
> 赞同：0
> 
> 时间：2013-02-26T16:25:20.990
> 
> 标签：javascript, jquery, api, last.fm

我正在尝试使用 last.fm 和 plug.dj API 制作一个 chrome 扩展，它曾经可以工作，直到我开始将我的脚本嵌入到扩展中，然后我无法连接到它们。这是设置脚本：

```
function Setup(){
    console.log('Setup');
    API.addEventListener(API.DJ_ADVANCE, callback);
    cache = new LastFMCache();
    lastfm = new LastFM({
        apiKey: '<key>',
        apiSecret: '<secret>',
        cache: cache
    });
} 
```

在我的 manifest.json 中有以下内容

```
{
   "content_scripts": [ {
      "js": [ "jquery.js","lastfm.api.md5.js", "lastfm.api.cache.js", "lastfm.api.js","lastFMLink.js", "script.js"],
      "css": [ "LastFMLink.css" ],
      "matches": [ "http://plug.dj/*", "http://plug.dj/*/*" ],
      "run_at": "document_end"
   } ],

   "name": "Plug.Dj VS last.Fm",
   "description": "Implement information about the artist",
   "icons": { "16": "cookie.png", "48": "cookie.png", "128": "cookie.png" },
   "permissions": [ "http://plug.dj/*", "http://plug.dj/*/*" ],
   "version": "0.0.1",
   "web_accessible_resources": [ "lastFMLink.js"],
   "manifest_version": 2
} 
```

它在新的 LastFMCache() 和脚本中我访问其他 API 的其他地方出错。其他脚本被加载（如 lastFMLink.js 和 lastFMLink.css），奇怪的是事件监听器确实工作

按下按钮时会加载设置脚本并且尚未初始化，因此通常不会因脚本顺序出错。

有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:49:26.037

这可能不是最好的选择，但我发现它不起作用的原因是 content_script 在后台运行，并且无法访问彼此。

所以我将 manifest.json 更改为：

```
{
   "content_scripts": [ {
      "js": ["script.js"],
      "css": [ "LastFMLink.css" ],
      "matches": [ "http://plug.dj/*", "http://plug.dj/*/*" ],
      "run_at": "document_end"
   } ],

   "name": "Plug.Dj VS last.Fm",
   "description": "Implement information about the artist",
   "icons": { "16": "cookie.png", "48": "cookie.png", "128": "cookie.png" },
   "permissions": [ "http://plug.dj/*", "http://plug.dj/*/*" ],
   "version": "0.0.1",
   "web_accessible_resources": [ "jquery.js","lastfm.api.md5.js", "lastfm.api.cache.js", "lastfm.api.js","lastFMLink.js","script.js"],
   "manifest_version": 2
} 
```

然后我只需要加载脚本，我确信这不是这样做的方法，但它现在可以工作，但这就是我现在加载我的 last.fm 脚本的方式（在 script.js 中）：

```
var s = document.createElement('script');
s.src = chrome.extension.getURL("lastFMLink.js");
var s2 = document.createElement('script');
s2.src = chrome.extension.getURL("lastfm.api.md5.js");
var s3 = document.createElement('script');
s3.src = chrome.extension.getURL("lastfm.api.cache.js");
var s4 = document.createElement('script');
s4.src = chrome.extension.getURL("lastfm.api.js");

s.onload = function() {
    this.parentNode.removeChild(this);
};
(document.head||document.documentElement).appendChild(s);
(document.head||document.documentElement).appendChild(s2);
(document.head||document.documentElement).appendChild(s3);
(document.head||document.documentElement).appendChild(s4); 
```

# mysql - SQL 列出尚未订购的产品

> ID：15094178
> 
> 赞同：0
> 
> 时间：2013-02-26T16:25:25.477
> 
> 标签：mysql, left-join, isnull

我有一种情况，LEFT JOIN 在我需要完成的事情上做得不够。我有一个产品表（**Products 列 ItemID, ProductName, Price**）和一个订单表（**Orders 列 OrderNumber, ItemID, Quantity**）。

我需要查询返回 Products 表中当前不属于特定订单的所有产品（例如，列出不属于 OrderNumber 52 的所有产品）。

我当前的查询列出了所有产品，但不包括属于 ANY OrderNumber 的产品。

```
$query = "SELECT Products.ItemID, Products.ProductName
FROM Products
LEFT JOIN Orders
ON Orders.ItemID = Products.ItemID
WHERE Orders.ItemID IS NULL
ORDER BY Products.ProductName"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:30:26.210

You can use a anti-join for this purpose, like so:

```
SELECT ItemID, ProductName
FROM Products
WHERE ItemID NOT IN (
    SELECT ItemID
    FROM Orders
    WHERE OrderID = X
)
ORDER BY ProductName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:33:33.480

只需在连接条件中添加订单号即可轻松完成您的需求：

```
SELECT Products.ItemID, Products.ProductName
FROM Products
LEFT JOIN Orders
ON (Orders.ItemID = Products.ItemID AND OrderNumber = 52)
WHERE Orders.ItemID IS NULL
ORDER BY Products.ProductName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:29:31.343

```
SELECT Products.ItemID, Products.ProductName
FROM Products
WHERE Products.ItemID not in (select Orders.ItemID from Orders where Orders.OrderNumber = xxx)
ORDER BY Products.ProductName 
```

# azure - Azure 似乎忽略了 certificateValidationMode

> ID：15094179
> 
> 赞同：0
> 
> 时间：2013-02-26T16:25:26.007
> 
> 标签：azure, web-config, x509certificate

我正在为使用 WSFederation 进行身份验证的 Windows azure 开发解决方案（Web 应用程序）。由于我处于 azure 测试阶段（本地测试成功），我决定使用与本地测试相同的自签名证书。

这里的问题是我收到一条错误消息，指出“ ***X.509 证书 CN=mytestsite.com.br 不在受信任的人员存储中。X.509 证书 CN=mytestsite.com.br 链构建失败。使用的证书具有无法验证的信任链***”。

这个错误是完全有道理的，因为它是一个自签名证书，但是因为我在一个暂存环境中（我现在绝对不想向我的赞助商要求额外的预算来获得一个有效的证书......）我想使用反正是自签的。所以我把***certificateValidationMode***改成“None”，但还是出现同样的验证错误……看来验证模式被忽略了！！！

有谁知道我该怎么做才能使事情正常进行？（购买有效证书将是我的最后一次尝试，因为目前它们对我的预算来说相当昂贵......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:34:28.820

我只会使用自签名证书，使用代码将其“部署”到您的`Trusted People`商店，一切都应该很好。无论如何，这将更接近于实际的生产使用（如果您在生产中使用 PeerTrust，即使使用*真正的*证书，您也必须在那里做同样的事情）。

```
 private static void CopyServerCertIntoPeopleStore()
    {
        var myStore = new X509Store(StoreName.My, StoreLocation.LocalMachine);
        myStore.Open(OpenFlags.ReadOnly);
        var peopleStore = new X509Store(StoreName.TrustedPeople, StoreLocation.CurrentUser);
        var cert = myStore.Certificates.Find(
                                X509FindType.FindByThumbprint,
                                SettingFetcher.GetSetting(SettingFetcher.SettingType.ApplicationVariable, "WcfServiceCertificateThumbprint"),
                                true
                              ).OfType<X509Certificate2>().First();

        peopleStore.Open(OpenFlags.ReadWrite);
        peopleStore.Add(cert);
    } 
```

使用类似的东西，只需将 SettingFetcher 替换为`RoleEnvironment.GetConfigurationSettingValue`或其他任何东西来获取指纹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:10:45.213

我设法通过将“certificateValidationMode”添加到 STS web.config 来实现它。

# php - 在 Dokuwiki 中使用循环自动创建多个链接？

> ID：15094183
> 
> 赞同：0
> 
> 时间：2013-02-26T16:25:46.647
> 
> 标签：php, for-loop, dokuwiki

我试图找到一种在 Dokuwiki 中自动创建多个链接的方法。

我尝试启用 php 并使用以下代码：

```
<php>
for ( $counter = 1; $counter <= 3; $counter += 1) {
    echo "[[page$counter]]";
    echo $counter;

}
</php> 
```

我认为“回声”会像在 HTML 中一样工作，它的输出会被 Dokuwiki 解释为它自己的命令

（创建 3 个链接），但我只得到以下文本输出（无链接）：

> [[第1页]]1[[第2页]]2[[第3页]]3

关于如何在 Dokuwiki 中使用循环（不一定使用 PHP）来创建多个链接的任何帮助？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T08:56:11.687

您应该将循环放入语法插件中。

例如：以[骨架插件](https://www.dokuwiki.org/devel%3asyntax_plugin_skeleton)，将渲染函数替换为：

```
function render($mode, &$renderer, $data) {
    for ( $counter = 1; $counter <= 3; $counter += 1) {
        $renderer->internallink("page$counter", "title$counter");
    }
    return true;
} 
```

[安装](https://www.dokuwiki.org/plugin_installation_instructions)后，标签“<TEST>”将被您的插件调用所取代。

有关更多信息，您可能需要检查：

*   [文档](https://www.dokuwiki.org/devel%3asyntax_plugins)_
*   使用循环添加内部链接的[nspages 插件](https://github.com/gturri/nspages/blob/c0f8c62ccc9c1f779d6a7e33d85a22ca390fed9b/syntax.php#L451)

# sql - 如何将 DB2 TIMESTAMP 转换为 UTC 毫秒？

> ID：15094186
> 
> 赞同：4
> 
> 时间：2013-02-26T16:25:57.643
> 
> 标签：sql, db2

是否有要转换`TIMESTAMP`为的 DB2 函数`UTC milliseconds`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:06:55.110

假设您要获取自纪元 (1970-01-01 00:00:00) 以来的毫秒数，则没有内置函数可以执行此操作。

然而，创建一个 UDF 是微不足道的，它可以：

```
CREATE OR REPLACE FUNCTION utcmillis (in db2ts timestamp)
   returns bigint
   language sql
   deterministic
   no external action
   return (
      bigint((days(db2ts - current timezone) - days('1970-01-01-00.00.00.000000')) * 86400 + midnight_seconds(db2ts - current timezone))*1000 + microsecond(db2ts)/1000
   ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:41:42.867

您可以使用[TIMESTAMPDIFF](http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0000861.htm)。像这样的东西：

```
TIMESTAMPDIFF(1,CHAR(timestampField -
    TIMESTAMP('1970-01-01-00.00.00.000000'))) 
```

假设您的意思是自 unix 纪元以来的毫秒数。我没有对此进行测试，您可能必须将值调整 10 倍，因为 db2 文档只说*Fractions of a second*。

# jquery - 使用虚拟键盘的引导程序预输入无法正常工作

> ID：15094187
> 
> 赞同：2
> 
> 时间：2013-02-26T16:26:12.003
> 
> 标签：jquery, twitter-bootstrap, virtual-keyboard, mobile-browser, bootstrap-typeahead

当我使用带有虚拟键盘的手机和平板电脑时，我遇到了 Typeahead 的问题。

当我点击 typeahead 控件（一个 html 输入）时，会出现虚拟键盘，我可以输入查询文本。然后下拉显示结果，当我选择一个选项时，虚拟键盘关闭，所选选项显示在控件中。但是马上又显示了虚拟键盘，因为焦点回到了预输入控件并再次触发了点击事件。

Bootstrap 页面上的示例具有相同的行为。

[EDIT] The user must select several options, When selects the first, I want to set focus in the next option control, but typeahead return the focus to itself. 选择后我无法设置焦点。这只发生在 Boostrap 上。例如，jquery 自动完成功能可以正常工作。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:00:50.763

在 bootstrap-typeahead.js v2.3.0 进入 Typeahead.prototype 中，“点击”功能，选择一个项目后，再次将焦点设置为“输入控件”。那是不必要的。所以我删除了该代码行，现在 typeahead 可以在所有移动设备和平板电脑浏览器上正常工作。

```
...
     , click: function (e) {
          e.stopPropagation()
          e.preventDefault()
          this.select()
          //this.$element.focus() //I removed this line
      }
... 
```

# c++ - 两种类型的模板特化

> ID：15094190
> 
> 赞同：3
> 
> 时间：2013-02-26T16:26:21.140
> 
> 标签：c++, templates, c++11

`lerp()`我的类模板中有一个静态成员函数`AnimCurve`，我想专门针对四元数，这样：

```
template<>
inline Quatf AnimCurve<Quatf>::lerp( 
    const Quatf& start, 
    const Quatf& end, 
    float time 
    )
{
    return start.slerp(time, end);
} 
```

但是，这还不够通用，因为也可以使用`Quatd`. 是否可以编写一个对两者都适用的函数，因为`Quatf`和`Quatd`都是 的类型定义`Quaternion<T>`？

这是 的当前定义`AnimCurve`：

```
template< typename T >
class AnimCurve {
public:
    AnimCurve() {}
    void addKeyframe(float time, T value);
    T getvalue(float time) const;
private:
    static inline T lerp( const T& start, const T& end, float time );
    std::map<float, T> mKeyframes;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:28:49.420

> 是否可以编写一个对两者都适用的函数，因为 Quatf 和 Quatd 都是四元数的类型定义？

如果您想专门针对类模板的这两个实例化您的`lerp`算法，而*不是*`Quaternion`其他实例化，那么不，您必须明确专门化它们：一次 for`AnimCurve<Quatf>`和一次 for `AnimCurve<Quatd>`。

# objective-c - Google Drive API - 使用 Objective-C 列出特定文件夹中的特定文件

> ID：15094192
> 
> 赞同：2
> 
> 时间：2013-02-26T16:26:23.347
> 
> 标签：objective-c, google-drive-api, google-drive-realtime-api

我正在开发适用于 iOS 的 Google Drive 集成，但遇到了一个问题——我需要检查文件夹中是否存在文件，但无论我看起来如何，我都会收到“500 内部错误”响应把请求放在一起。我认为这应该是合法的：

```
// self.directoryDriveFile.identifier is a valid folder identifier retrieved on previous request
GTLQueryDrive *query = [GTLQueryDrive queryForChildrenListWithFolderId:self.directoryDriveFile.identifier];

// add query to specify the file we're interested in (works in Java version...)
query.q = [NSString stringWithFormat:@"title='%@' and trashed=false",
           ZTCloudSyncLockFileName];
// stopping in debugger shows query.q: title='sync.lock' and trashed=false

// fire off request
[self.driveService executeQuery:query
              completionHandler:^(GTLServiceTicket *ticket,
                                  GTLDriveFileList *files,
                                  NSError *error) {
                  if (error == nil) {
                      if ([files.items count] > 0) {
                          self.foundLockfile = YES;
                      } else {
                          self.foundLockfile = NO;
                      }
                  } else {
                      DLog(@"An error occurred loading lockfile request: %@", error);
                      [self bailWithError:error performCleanup:NO];
                  }
              }]; 
```

执行查询时，总是以错误告终，不幸的是，错误信息稀疏如下：

```
Error Domain=com.google.GTLJSONRPC
ErrorDomain Code=500 "The operation couldn’t be completed. (Internal Error)" 
UserInfo=0x99c4660 {
  error=Internal Error, 
  GTLStructuredError=GTLErrorObject 0x99c4360: {
  message:"Internal Error" code:500 data:[1]}, 
  NSLocalizedFailureReason=(Internal Error)} 
```

我还尝试了以下更基本的查询，指定了一个`parents`子句，但我最终得到了上面显示的同样不幸的备用错误对象：

```
GTLQueryDrive *altQuery = [GTLQueryDrive queryForFilesList];
altQuery.q = [NSString stringWithFormat:@"title='%@' and trashed=false and '%@' in parents",
              ZTCloudSyncLockFileName,
              self.directoryDriveFile.identifier]; 
```

这也应该有效，但也会产生 500 错误。

* * *

附加信息：在处理此问题时测试了以下内容：

*   检查目录根目录中的文件夹—确定
*   在目录根目录中创建文件夹—确定
*   检查根目录中名为 sync.lock 的文件—确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T01:59:48.417

```
-(void)fetchGoogleDriveFileListWithfolderId:(NSString *)folderId
    :(void (^)(NSMutableArray *, NSError*))completionBlock
{
    GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];
    query.q =[NSString stringWithFormat:@"'%@' in parents and trashed=false", folderId];

    GTLServiceTicket *ticketListing = [self.driveService
        executeQuery:query completionHandler:^(GTLServiceTicket *ticket,GTLDriveFileList *files, NSError *error)
    {
        NSMutableArray *mainArray=[[NSMutableArray alloc]init];

        if (error == nil)
        {
            completionBlock(files.items,nill);
        }
        else
        {
            NSLog(@"An error occurred: %@", error);
            completionBlock(nil,error);
        }
    }];
} 
```

您可以使用上述方法获取文件夹内容。这里 folderId 是

*   “根”（主驱动器）
*   共享文件夹的“sharedWithMe”
*   GTLDrivefile 标识符值

# android - 开始和关闭 Flurry 会话

> ID：15094193
> 
> 赞同：2
> 
> 时间：2013-02-26T16:26:25.543
> 
> 标签：android, flurry

我在这里一直在看其他一些问题，但我真的不明白一些原因。

我有一个包含很多活动的应用程序和一个 Flurry 分析 API 密钥。我希望快速会议成为一个完整的会议，而人们建议在每个活动中开始和停止会议。但是，这将导致 50 个乱舞会话/真实会话。

我将 onStartSession() 方法放在登录活动上，并将 onStop 放在注销时。而且我在记录事件时遇到了一些麻烦，看起来它正在跳过它们。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T06:18:52.043

您可以调用应用程序中每个活动的开始会话和结束会话。请注意，结束会话的调用必须与每次开始会话的调用相匹配。如果在前一个结束会话呼叫的 10 秒内发出开始会话的呼叫，则会话将恢复。会话长度、使用频率、事件和错误将继续作为同一会话的一部分进行跟踪。这确保了当用户在您的应用程序中从一个 Activity 转换到另一个 Activity 时，他们不会为每个 Activity 跟踪单独的会话，而是有一个跨越多个 Activity 的会话。您可以使用 call 更改 10 秒的默认值`FlurryAgent.setContinueSessionMillis(long milliseconds)`。请注意，对于 Android，最短超时时间为 5 秒。

（全面披露：我在 Flurry 工作）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:35:38.557

您需要一个包含在 Activity 生命周期中的 Flurry 会话。

我可以看到您避免重复代码是子类化 Activity 类并覆盖 Flurry 会话需要启动和停止的回调，然后您的所有活动都会继承该新的 Activity 子类。

另一种选择是只拥有一个高级活动，您可以在其中开始/停止乱舞，然后将其余功能从活动转移到片段。

# jquery-ui - jQuery UI 选项卡 - 如何使用向下箭头（而不是标准样式）表示活动选项卡

> ID：15094197
> 
> 赞同：1
> 
> 时间：2013-02-26T16:26:29.290
> 
> 标签：jquery-ui, css

我的服务页面之一需要内部选项卡。我已经在页面中使用了常规的 jQuery UI 选项卡，我想为内部选项卡使用不同的样式。

许多流行网站使用与主选项卡不同的内部选项卡，它们使用简单的文本作为选项卡标题、标题下方的长下划线和代表选定选项卡的向下箭头。（附图片）。

您知道如何设置 jQuery UI 选项卡的样式以在选择选项卡时放置向下箭头吗？

![在此处输入图像描述](../Images/bafb1adb0c540834bdfb34a5d7443847.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:13:40.300

哦，你想知道如何使用 css3 创建三角形。好吧，您可以使用 css 来做到这一点，但是，您上面的示例仅使用 css 是不可能的。您不能在三角形上有边框，因为它是使用边框创建的。

你像这样创建向下的三角形

```
.arrow { width: 0; 
height: 0; 
border-left: 10px solid transparent; 
border-right: 10px solid transparent; 
border-top: 10px solid black; 
} 
```

我在小提琴中创造了你正在寻找的东西。

[http://jsfiddle.net/jessekinsman/Mn2sx/](http://jsfiddle.net/jessekinsman/Mn2sx/)

但是，如果您想准确地创建上面的内容，您可以为三角形使用自定义图标字体，然后您可以在它上面放置一个文本阴影，它可能会有一个笔触。

但是，话虽如此，如果您想要向后兼容以及向三角形添加阴影和边框的能力，那么图像将是您最兼容的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:29:06.070

您可以尝试向 ui-tabs-active 类添加一些 css，类似于本网站上显示的内容：[http ://www.dynamicdrive.com/style/csslibrary/item/css_triangle_arrow_divs/](http://www.dynamicdrive.com/style/csslibrary/item/css_triangle_arrow_divs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T01:32:38.640

是的，这很简单，只需使用 class="active" 设置 li 元素的样式

像这样的东西

```
.tabs {
border-bottom: 1px solid #000;
}
.tabs li.active {
border-bottom: 1px solid #fff;
padding: 5px;
background: url(../images/arrow.png) 5px 50%;
} 
```

以上只是示例代码，可以让您有所了解。您将不得不调整图像值以使箭头图像正确排列。

但是，我认为您的问题可能涉及更多。

您是否在问如何以不同的样式设置存在于同一页面上的两个单独的 jQuery 选项卡？

如果是这种情况，我建议将其中一种样式包装在具有唯一类或 id 的元素中。像这样：

```
<div class="new-tabs"> 
<ul class="tabs">
<li><a href="#">Tab1</a></li>
</ul>
</div> 
```

然后您可以从 tabs.css 中复制所有样式（我目前不记得 css 文件的确切名称）并在所有这些规则之前添加类或 id。像这样

```
.tab li { something.... }
.new-tabs .tab li {something...} 
```

Walaa，您现在拥有一组完全独立的容器内选项卡样式。

我建议处理您刚刚复制的样式并删除您不需要的样式。

# r - 具有不同变量百分比的条形图

> ID：15094199
> 
> 赞同：0
> 
> 时间：2013-02-26T16:26:36.743
> 
> 标签：r, graph, plot

给出以下示例：

```
structure(list(jdgcbrbR = c(0L, 1L, 1L, 1L, 1L, 0L, 0L, 0L), 
    ctprpwrR = c(0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L), hrshsntaR = c(0L, 
    0L, 1L, 0L, 0L, 0L, 0L, 0L), dbctvrdR = c(0L, 0L, 1L, 1L, 
    0L, 0L, 0L, 0L), lwstrobR = c(0L, 0L, 1L, 0L, 0L, 0L, 0L, 
    0L), rgbrklwR = c(0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L), ctinpltR = c(0L, 
    0L, 1L, 1L, 0L, 0L, 0L, 0L), stcbg2tR = c(0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L), tmprsR = c(NA, NA, NA, 0L, 0L, NA, NA, NA
    ), caplcstR = c(0L, 0L, 1L, 0L, 1L, 0L, 0L, 0L), widprsnR = c(0L, 
    0L, 1L, 0L, 0L, 0L, 0L, 0L), wevdctR = c(0L, 0L, 1L, 0L, 
    0L, 0L, 0L, 0L)), .Names = c("jdgcbrbR", "ctprpwrR", "hrshsntaR", 
"dbctvrdR", "lwstrobR", "rgbrklwR", "ctinpltR", "stcbg2tR", "tmprsR", 
"caplcstR", "widprsnR", "wevdctR"), row.names = 747:754, class = "data.frame") 
```

我如何创建一组`barplots`，绘制`1-values`每个变量中的百分比，从而很好地概述 1 的百分比的演变。

到目前为止，我尝试创建百分比（失败，因为`nrow`被认为是`NULL`）：

```
pct_jdgcbrbR <- (sum(jdgcbrbR) / nrow(jdgcbrbR) * 100)
pct_jdgcbrbR 
```

我发现了可能有用的 barplot 函数：

```
barplot(percentages, main="INR", 
        xlab="varnames") 
```

结果应该类似于我在 Excel 中制作的这个示例：

![图形](../Images/cc7f630aedc04a8f9b81712c33d58808.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:29:54.420

The following works for me, assuming your data.frame is called "temp":

```
barplot((colSums(temp, na.rm=TRUE)/nrow(temp))*100) 
```

![enter image description here](../Images/9abeec0e053ec93e561207a299f54c50.png)

# css - 在 IE 8 及更低版本中渲染字体（在所有其他浏览器中工作）

> ID：15094200
> 
> 赞同：0
> 
> 时间：2013-02-26T16:26:42.123
> 
> 标签：css, internet-explorer, fonts, font-face, webfonts

我无法让 IE 8 及以下版本（最好是 IE 6）呈现我在我的服务器上拥有的字体。

我正在使用的代码如下：

```
@font-face { 
    font-family:omnes; 
    src:url('fonts/Omnes-Regular.eot') format('eot'), 
        url('fonts/Omnes-Regular.otf') format('otf'),
        url('fonts/Omnes-Regular.ttf') format('truetype');
} 
```

这似乎适用于所有其他浏览器，我该如何处理？

你可以在这里看到一个现场演示：

[http://trufavarela.com/uruware/](http://trufavarela.com/uruware/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:34:15.193

尝试这个：

```
@font-face {
    font-family: 'omnes';
    src: url('fonts/Omnes-Regular.eot');
    src: url('fonts/Omnes-Regular.eot?#iefix') format('embedded-opentype'),
         url('fonts/Omnes-Regular.ttf') format('truetype');
} 
```

您可能不需要 otf 文件格式。此代码可能会起作用，因为当 IE 尝试获取除 eot 格式之外的任何其他内容时，？只是让它认为字符串的其余部分是一个参数，就像在一个 php 文件中一样。

此外，您可能还应该包括字体的 woff 和 svg 格式。并使用[Font Squirrel](http://www.fontsquirrel.com/)，为您完成所有工作。

# javascript-events - 是否可以通过javascript将所有html图像转换为链接？

> ID：15094202
> 
> 赞同：0
> 
> 时间：2013-02-26T16:26:47.837
> 
> 标签：javascript-events, javascript

我想`<img>`通过外部 js 文件将每个链接变成指向自身（文件）的链接。

我的想法是，我可以定位所有 img 元素，然后抓取图像 src 并在 img 元素周围放置一个指向它的链接。例如：

转这个：

`<img width="281" vspace="7" hspace="5" height="215" align="left" alt="img1" src="cits/images/image001.jpg"></img>`

进入这个：

`<a href="cits/images/image001.jpg" target="_blank"> <img width="281" vspace="7" hspace="5" height="215" align="left" alt="img1" src="cits/images/image001.jpg"></img> </a>`

看起来我可以将 img src 作为变量获取并找到 img 元素，但我不确定如何在 img 周围添加链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:33:57.470

抓住你所有的图像。

```
var images = document.getElementsByTagName('img'); 
```

编写一个用新标记替换图像的函数`outerHTML`，包括指向`src`图像属性的链接，其中包括旧`outerHTML`图像。

```
function makeLink(image){
    image.outerHTML = '<a target="_blank" href="' + image.src + '">' + image.outerHTML + '</a>';
} 
```

循环浏览您的图像，并将每个图像提交给`makeLink`函数。

```
for(var i = 0, l = images.length; i < l; ++i){
    makeLink(images[i]);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:32:23.213

以防万一您使用 jQuery

```
$('img').each(function(ix, image){
  $(image).wrap('<a target="_blank" href="' + $(image).attr('src') + '"></a>');
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:34:17.950

如果你愿意使用`jQuery`，代码很简单：

```
$("img").each(function () {
    $(this).wrap($("<a target='_blank'/>").attr("href", $(this).attr("src"));
}); 
```

否则，您将不得不研究`JavaScript`一个更复杂的原始解决方案。请参阅@Barney 的回答。

# php - 如何每小时一次将 XML API 数据保存到 WordPress 中的数据库以供以后使用？

> ID：15094203
> 
> 赞同：1
> 
> 时间：2013-02-26T16:26:49.757
> 
> 标签：php, xml, wordpress

我为 PAWS New England 管理网站，这是一个严重依赖 PetFinder 的动物救援组织。虽然 PetFinder 提供了一个基于 iframe 的小部件来显示您可用的动物，但它打破了网站在较小屏幕上的响应式设计。

因此，我使用 PetFinder 的 API（基于 XML）构建了自定义的“Our Dogs”页面。

不幸的是，API 有时会运行得很慢。我想每小时从 API 中提取一次数据并将其存储在站点的 mySQL 数据库中（它由 WordPress 提供支持），然后运行自定义页面而不是实时 API 数据。WordPress 的“Transient API”似乎非常合适，但我终其一生都无法弄清楚如何让它发挥作用。

经过一番搜索，似乎问题可能在于 PHP 存储 XML 数据的能力（或缺乏能力）。换句话说，我可能需要先将数据转换为字符串或数组。

我现在正式陷入困境。任何人都对如何将 XML 数据每小时保存到 WordPress 数据库并访问该数据以在函数中使用有任何见解？

这是我现有的代码。提前致谢！

```
<?php

function petf_shelter_list( $atts ) {

    extract( shortcode_atts( array(
        'shelter_id' => '1234',
        'api_key' => 'abcdef',
        'count' => 150,
        'status' => 'A'
    ), $atts ) );

    $xml = simplexml_load_file( "http://api.petfinder.com/shelter.getPets?key=" . $api_key . "&count=" . intval($count) . "&id=" . $shelter_id . "&status=" . $status . "&output=full" );

    // Stuff I do with $xml here...

}

add_shortcode('shelter_list','petf_shelter_list');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:51:42.313

您可以使用[PHP 的 XML Parser](http://php.net/manual/en/book.xml.php)来处理问题的 XML 部分。

至于每小时运行一些东西，您需要设置一个 cron 作业来执行您想要的脚本。

# javascript - Wordpress 和 DD 的终极淡入幻灯片：代码不会在缩略图中滚动

> ID：15094209
> 
> 赞同：1
> 
> 时间：2013-02-26T16:27:04.863
> 
> 标签：javascript, jquery, slideshow, wordpress

我正在尝试使用 Wordpress 循环（某个类别）来提取特色图像、链接和摘录，并在 Slideshow JS 中填充 Ultimate Fade。该代码输出正确的格式、语法，并正确显示了两个帖子的链接。但是，此代码不会循环浏览特色图像。它似乎在同一图像之间消失了两次。

此特定类别中目前有两个帖子，两个帖子都将图像设置为特色。每个帖子也有一个摘录。

所有文档（fadeslideshow.js 和 jQuery）都在标题中正确链接，并且在使用 Safari 的网络检查器查看代码时 - 动态驱动器脚本显示透明度发生变化 - 它只是在同一图像之间切换，因此似乎没有发生任何事情。

下面的代码位于一个单独的 .php 文档中，该文档在标头中被调用。

```
<script type="text/javascript">
<?php query_posts('cat=7'); ?> //queries posts only from featured category
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

var mygallery=new fadeSlideShow({ 
wrapperid: "fadeshow", //ID of blank DIV on page to house Slideshow
dimensions: [585, 350], //width/height of gallery in pixels. Should reflect dimensions of largest image
imagearray: [

<?php   $thumbnails = get_posts('posts_per_page=5'); //adding category=7 here breaks code
        $my_excerpt = get_the_excerpt();
        $url = wp_get_attachment_url( get_post_thumbnail_id($post->ID) ); 
        $total = count($thumbnails); //this is to count the number of thumbnails in foreach loop to NOT add a comma to the last one
        $i=1;

        foreach ($thumbnails as $thumbnail) {
        if ( has_post_thumbnail($thumbnail->ID)) {
        $i++;

         echo '["'.$url.'","'.get_permalink( $thumbnail->ID ).'","","'.$my_excerpt.'"]'; //This spits out the exact correct code
         if ($i != $total) { echo', '; }//this is to count the number of thumbnails in foreach loop to NOT add a comma to the last one

 }} ?>
],

displaymode: {type:'auto', pause:3000, cycles:0, wraparound:false},
persist: false, //remember last viewed slide and recall within same session?
fadeduration: 500, //transition duration (milliseconds)
descreveal: "ondemand",
togglerid: ""
})

<?php endwhile; endif; ?> //This ends the wordpress loop
<?php wp_reset_query(); ?>

</script> 
```

Dynamic Drive 在幻灯片放映信息中的终极淡入淡出在这里：[http ://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm](http://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm)

我的代码在这个网站上：http: [//johnharvey.hsjjr.net](http://johnharvey.hsjjr.net)

我也尝试使用 wp_get_attachment_image_src 但没有成功。

我在 Google、Dynamic Drive 论坛和 Wordpress Codex 上进行了彻底的搜索，但没有找到其他可以尝试的方法。我相信也许我对出了什么问题没有足够的了解，不知道还要搜索什么。我相信对此有一个相当简单的解决方案，我根本没有经验知道出了什么问题。

非常感谢大家的帮助和知识！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:13:30.337

不完全确定为什么会这样 - 但我解决了这个问题。我没有在 foreach 循环上方定义变量，而是将其移到循环中：

```
<?php   $thumbnails = get_posts('posts_per_page=5'); //adding category=7 here breaks code

        $total = count($thumbnails); //this is to count the number of thumbnails in foreach loop to NOT add a comma to the last one
        $i=1;

        foreach ($thumbnails as $thumbnail) {
        if ( has_post_thumbnail($thumbnail->ID)) {
        $i++;

         echo '["'.wp_get_attachment_url( get_post_thumbnail_id($thumbnail->ID) ).'","'.get_permalink( $thumbnail->ID ).'","","'.get_the_excerpt($thumbnail->ID).'"]'; //This spits out the exact correct code
         if ($i != $total) { echo', '; }//this is to count the number of thumbnails in foreach loop to NOT add a comma to the last one

 }

}
?> 
```

except 仍然没有循环，但至少缩略图可以。

# hash - 分离链Hashing，避免Hash冲突

> ID：15094211
> 
> 赞同：1
> 
> 时间：2013-02-26T16:27:28.760
> 
> 标签：hash, chaining

我对哈希表的了解有限，目前正在学习它。我有一个关于通过开放散列或单独链散列解决散列冲突的问题。

我知道在这种情况下哈希桶保存指向链接列表的指针，其中映射到相同键的所有元素都被链接。所以搜索复杂度将是 o(n) 的顺序，其中 n 是链表中元素的数量。有没有办法让这更简单？

此外，如果对链表的大小有限制，比如说它最多只能容纳 5 个元素，并且如果超过 5 个元素散列到同一个桶中，那么处理这种情况的最佳方法是什么？

任何有关上述内容的更多信息以及任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:06:08.623

散列冲突不应该太常见，否则你做错了什么（例如一个糟糕的散列函数或一个不够大的散列表）。所以每个链表中的元素数量应该是最少的，并且 O(n) 复杂度应该不会太差。

理论上，您可以将其替换为许多其他数据结构中的一种。例如，二叉搜索树将获得 O(log n) 搜索时间（假设项目是可比较的），但插入时间将达到 O(log n) 而不是 O(1)，并且需要更多时间空间。

列表中的元素数量不应有最大值。如果有，您可能会诉诸探测（例如线性探测），但删除可能是一场噩梦，因为您可能需要移动很多元素。

# ios - 没有找到适合核心数据迁移的映射模型

> ID：15094213
> 
> 赞同：10
> 
> 时间：2013-02-26T16:27:33.150
> 
> 标签：ios, core-data, migration

我正在尝试执行需要 MappingModel 的 iOS 核心数据迁移。核心数据由于某种原因无法使用映射模型，它会退回到自动轻量级迁移。

我启用了 MigrationDebug 选项以获取更多信息，而我看到的内容毫无意义。映射模型的源和目标哈希与源和目标 ManagedObjectModel 相同，忽略顺序。似乎应该使用映射模型，但日志显示“找不到合适的映射模型”。

这是（省略的）日志：

```
CoreData: annotation: (migration)    will attempt automatic schema migration
CoreData: annotation: (migration) looking for mapping model with 
 source hashes: 
{
    TSBaseEntity = <4797118c 50068f2f f544d9a9 4884720b 55ec7e4d 0d4c8f4e 1ee44be3 b06d2edc>;
    TSBuyer = <91e837d1 3f348913 eff634d6 6fb9b3a6 747e2390 fbdc4ae6 32cc56d6 7582d4a8>;
    ...
}
 destination hashes: {
    TSBaseEntity = <4797118c 50068f2f f544d9a9 4884720b 55ec7e4d 0d4c8f4e 1ee44be3 b06d2edc>;
    TSBuyer = <e316a857 8919c4be eef15387 5c67a21b 67d32919 99ead438 1ff93c05 2e065fcc>;
    ...
}
CoreData: annotation: (migration) checking mapping model at path file://localhost/Users/xandrews/Library/Application%20Support/iPhone%20Simulator/6.1/Applications/0A84951E-21FC-47C0-A1B7-F880ACB672C4/Dev.app/Migrate_0_5_24To_0_5_27.cdm
 source hashes: 
{(
    <4797118c 50068f2f f544d9a9 4884720b 55ec7e4d 0d4c8f4e 1ee44be3 b06d2edc>,
    <91e837d1 3f348913 eff634d6 6fb9b3a6 747e2390 fbdc4ae6 32cc56d6 7582d4a8>,
    ...
)}
 destination hashes: {(
    <4797118c 50068f2f f544d9a9 4884720b 55ec7e4d 0d4c8f4e 1ee44be3 b06d2edc>,
    <e316a857 8919c4be eef15387 5c67a21b 67d32919 99ead438 1ff93c05 2e065fcc>,
    ...
)}
CoreData: annotation: (migration) no suitable mapping model found
CoreData: annotation: (migration) inferring a mapping model between data models with 
 source hashes: ... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-13T05:30:02.727

Xcode 4 生成的映射模型不会产生迁移所需的正确哈希值。您可以使用以下代码将迁移日志的输出与映射文件的哈希值进行比较：

```
 NSString *mappingModelPath = [[NSBundle mainBundle] pathForResource:@"MappingFile" ofType:@"cdm"];
    NSMappingModel *mappingModel = [[NSMappingModel alloc] initWithContentsOfURL:[NSURL fileURLWithPath:mappingModelPath]];

    for (NSEntityMapping *entityMapping in mappingModel.entityMappings) {
        NSLog(@"%@: %@", entityMapping.sourceEntityName, entityMapping.sourceEntityVersionHash);
        NSLog(@"%@: %@", entityMapping.destinationEntityName, entityMapping.destinationEntityVersionHash);
    } 
```

您会看到这些与迁移日志输出中的哈希值不匹配。

解决方法是在 Xcode 5 中生成映射文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T08:33:37.150

在您的 persistentStoreCoordinator 方法中给出这行代码

```
 NSDictionary *options=[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],NSMigratePersistentStoresAutomaticallyOption,[NSNumber numberWithBool:YES],NSInferMappingModelAutomaticallyOption, nil]; 
```

如果这没有帮助，那么您需要进行用户实施的迁移。因此，您必须使用源模型和目标模型创建映射模型。在那种情况下，

```
NSDictionary *options=[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],NSMigratePersistentStoresAutomaticallyOption,[NSNumber numberWithBool:NO],NSInferMappingModelAutomaticallyOption, nil]; 
```

使用以下代码创建 douce 元数据

```
if (sourceMetadata) {
        NSString *configuration = nil;
        NSManagedObjectModel *destinationModel = [self.persistentStoreCoordinator managedObjectModel];

        //Our Source 1 is going to be incompatible with the Version 2 Model, our Source 2 won't be...
        BOOL pscCompatible = [destinationModel isConfiguration:configuration compatibleWithStoreMetadata:sourceMetadata];
        NSLog(@"Is the STORE data COMPATIBLE? %@", (pscCompatible==YES) ?@"YES" :@"NO");

        if (pscCompatible == NO) {
            migrationSuccess = [self performMigrationWithSourceMetadata:sourceMetadata toDestinationModel:destinationModel];
        }
    }
    else {
        NSLog(@"checkForMigration FAIL - No Source Metadata! \nERROR: %@", [error localizedDescription]);
    } 
```

并实现以下功能

```
- (BOOL)performMigrationWithSourceMetadata :(NSDictionary *)sourceMetadata toDestinationModel:(NSManagedObjectModel *)destinationModel
{
    BOOL migrationSuccess = NO;
    //Initialise a Migration Manager...
    NSManagedObjectModel *sourceModel = [NSManagedObjectModel mergedModelFromBundles:nil
                                                                    forStoreMetadata:sourceMetadata];
    //Perform the migration...
    if (sourceModel) {
        NSMigrationManager *standardMigrationManager = [[NSMigrationManager alloc] initWithSourceModel:sourceModel
                                                                                      destinationModel:destinationModel];
        //Retrieve the appropriate mapping model...
        NSMappingModel *mappingModel = [NSMappingModel mappingModelFromBundles:nil
                                                                forSourceModel:sourceModel
                                                              destinationModel:destinationModel];
        if (mappingModel) {
            NSError *error = nil;
            NSString *storeSourcePath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"Recipes.sqlite"];
            NSURL *storeSourceUrl = [NSURL fileURLWithPath: storeSourcePath];
            NSString *storeDestPath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"Recipes2.sqlite"];
            NSURL *storeDestUrl = [NSURL fileURLWithPath:storeDestPath];

            //Pass nil here because we don't want to use any of these options:
            //NSIgnorePersistentStoreVersioningOption, NSMigratePersistentStoresAutomaticallyOption, or NSInferMappingModelAutomaticallyOption
            NSDictionary *sourceStoreOptions = nil;
            NSDictionary *destinationStoreOptions = nil;

            migrationSuccess = [standardMigrationManager migrateStoreFromURL:storeSourceUrl
                                                                        type:NSSQLiteStoreType
                                                                     options:sourceStoreOptions
                                                            withMappingModel:mappingModel
                                                            toDestinationURL:storeDestUrl
                                                             destinationType:NSSQLiteStoreType
                                                          destinationOptions:destinationStoreOptions
                                                                       error:&error];
            NSLog(@"MIGRATION SUCCESSFUL? %@", (migrationSuccess==YES)?@"YES":@"NO");
        }
    }
    else {
        //TODO: Error to user...
        NSLog(@"checkForMigration FAIL - No Mapping Model found!");
        abort();
    }
    return migrationSuccess;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T15:10:50.437

经过进一步调查，我发现我遇到了与此处提到的相同的问题（[Core Data migration failed for to-one relationship](https://stackoverflow.com/questions/15703040/core-data-migration-fails-for-to-one-relationship)）。在我的关系中将最小值设置为`1`而不是无最小值使 Core Data 使用我的自定义映射模型。虽然我不确定我认为这是 Core Data 中的一个错误。
但是，这也需要我更改原始 (1.0) 映射模型（用户已经在使用）。我想出的解决方法是在 1.0 和 2.0 之间创建一个称为 1.5 的新映射模型。与 1.0 相比，1.5 中唯一不同的是关系的最小值，在 1.5 中设置为`1`. 现在，我可以让 Core Data 执行从 1.0 到 1.5 的轻量级迁移，然后执行我自己的从 1.5 到 2.0 的自定义迁移。尽管它可能是一个 hacky 解决方案，但它可以完美运行。我在下面粘贴了处理迁移的代码。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (persistentStoreCoordinator != nil) {
        return persistentStoreCoordinator;
    }

    NSURL *storeUrl = [NSURL fileURLWithPath:[[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"Project.sqlite"]];
    NSError *error;

    NSDictionary *storeMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:storeUrl error:&error];

    if (! [[self managedObjectModel] isConfiguration:nil compatibleWithStoreMetadata:storeMetadata]) {
        // The current store isn't compatible with the model and should be migrated, check the version identifier of the store

        NSManagedObjectModel *sourceManagedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil forStoreMetadata:storeMetadata];

        if ([[sourceManagedObjectModel versionIdentifiers] containsObject:@"Model_1_0"]) {
            // The current version of the store is 1.0, a manual migration to 1.5 is needed in order to migrate finally to 2.0

            NSURL *destinationModelURL = [[NSBundle mainBundle] URLForResource:@"Model.momd/Model_1_5" withExtension:@"mom"];
            NSManagedObjectModel *destinationManagedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:destinationModelURL];

            NSMigrationManager *migrationManager = [[NSMigrationManager alloc] initWithSourceModel:sourceManagedObjectModel destinationModel:destinationManagedObjectModel];
            NSMappingModel *inferredMappingModel = [NSMappingModel inferredMappingModelForSourceModel:sourceManagedObjectModel destinationModel:destinationManagedObjectModel error:&error];

            NSURL *destinationURL = [NSURL fileURLWithPath:[[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"Migration.sqlite"]];

            [migrationManager migrateStoreFromURL:storeUrl
                                             type:NSSQLiteStoreType
                                          options:nil
                                 withMappingModel:inferredMappingModel
                                 toDestinationURL:destinationURL
                                  destinationType:NSSQLiteStoreType
                               destinationOptions:nil
                                            error:&error];
            if (error) {
                DLog(@"Failed to migrate store from URL %@ with mapping model %@ to destination URL %@ with error %@", storeUrl, inferredMappingModel, destinationURL, error);
            }

            [[NSFileManager defaultManager] removeItemAtURL:storeUrl error:&error];
            [[NSFileManager defaultManager] moveItemAtURL:destinationURL toURL:storeUrl error:&error];
        }
    }

    NSDictionary *options = @{NSMigratePersistentStoresAutomaticallyOption: [NSNumber numberWithBool:YES],
                              NSInferMappingModelAutomaticallyOption: [NSNumber numberWithBool:NO] };
    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    if(![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
        /*Error for store creation should be handled in here*/
        DLog(@"%@", error);
    }

    return persistentStoreCoordinator;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T15:49:26.577

映射模型可能不足以处理迁移。在这种情况下，不会加载映射模型，即使它匹配源模型和目标模型。

为迁移编写测试。逐步重做对模型的更改并测试迁移。这样，您会发现确实阻止映射模型加载的更改。

注意：重命名属性或创建属性而不指定默认值。将属性更改为非可选。

在这些情况下，您必须在映射模型中手动指定行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T10:22:21.383

有同样的问题。我删除了一个实体并相应地重命名了关系字段。我首先尝试使用轻量级迁移，因此为关系指定了重命名 ID。由于疏忽，我混淆了用于“重命名 ID”和“哈希修饰符”的字段。一旦更正，一切都会按预期工作。

# sql - 在 Sybase SQL 中连接简单字符串的意外结果

> ID：15094214
> 
> 赞同：3
> 
> 时间：2013-02-26T16:27:38.467
> 
> 标签：sql, string, concatenation, sybase, variable-assignment

在 Sybase 上，我使用非常简单的 SQL 得到了意想不到的结果。

```
declare @mystring char(30)

select @mystring = 'abc'

select 'mystring = ' + @mystring

select @mystring = @mystring + 'xyz'

select 'mystring = ' + @mystring 
```

这将返回：

```
mystring = abc                           
mystring = abc 
```

为什么最后一个选择不返回 'abcxyz' ？

谢谢

鲍勃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:50:41.947

我怀疑这是因为您已声明 `@mystring`为`char(30)`并且 [所有 CHAR 值都是空白填充到最大长度](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc38151.1510/html/iqrefbb/X315931.htm)

将其声明为`varchar(30)`可以解决问题：

```
declare @mystring varchar(30)

select @mystring = 'abc' 

select 'mystring = ' + @mystring

SELECT @mystring = @mystring + 'xyz'

select 'mystring = ' + @mystring 
```

# webdeploy - Web Deploy 3，不包括程序集（不是 PDB）

> ID：15094216
> 
> 赞同：0
> 
> 时间：2013-02-26T16:27:45.390
> 
> 标签：webdeploy, microsoft-web-deploy

使用 Web Deploy 3，有没有办法排除项目所依赖的某些程序集？

场景是：

1.  安装第一个包，类似平台的程序集。
2.  然后我们安装类似产品的程序集

是的，我知道我们可以使用`–enableRule:DoNotDeleteRule`flag 来防止第二个包覆盖文件。

我认为在第二个 ZIP 包中包含不需要的程序集有点脏。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:49:37.427

我使用了以下开关

```
-skip:objectname='filePath',absolutepath='logs\\.*\\someNameToExclude\.txt' 
```

从命令行部署时跳过某些文件（我使用了同步动词）

**更新** 如 msuhash 所述 - 可以在[technet](http://technet.microsoft.com/en-gb/library/dd569089%28v=ws.10%29.aspx)上找到完整的命令行参考（请参阅**跳过**设置）。

# c# - 从 Byte[] 过滤垃圾

> ID：15094224
> 
> 赞同：0
> 
> 时间：2013-02-26T16:27:57.543
> 
> 标签：c#, regex, visual-studio, filter, bytearray

我想从我的 Byte[] 中过滤掉很多垃圾。但我不知道该怎么做。

当我将 Byte[] 转换为字符串时，输出如下：

```
[00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][05][00][00][00][02][02]PÑ[0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][02][00][00][00][02][03][15][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][02][00][00][00][02][02][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][04][00][00][00][02]PÑ[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][04][00][00][00][02][02]PÑ[0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][02][00][00][00][02][03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][06][00][00][00][02][02]PÑ[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][01][00][00][00][02][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][05][00][00][00][02][02]PÑ[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][06][00][00][00][02][02]PÑ[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][01][00][00][00][02][15][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][02][00][00][00][02][02][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00]([00][00][00][02]PB000A07B;1359120102;NL1200000002 ;w4[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][06][00][00][00][02][02]PB01[0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00]$[00][00][00][02]4EC8F;1359300102;NL1200000001 ;Ey³[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][08][00][00][00][02][02]PCD325[0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00]"[00][00][00][02]973;1325301402;NL1200000004 ;AOl[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][03][00][00][00][02][02]P[0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][03][00][00][00][02]Ñ[03][0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][03][00][00][00][02][02]P[0B][00][01][00][00][00]ÿÿÿÿ[01][00][00][00][00][00][00][00][0F][01][00][00][00][03][00][00][00][02]Ñ[03][0B] 
```

那就是你可以看到很多，我想过滤掉以下：`[00]`, `[0F]`,`ÿÿÿÿ`和`[01]`.

如何以这种方式过滤此字符串？如果可能的话，如何在`Byte[]`不先转换为字符串的情况下过滤直接？因为如果有办法`byte[]`从以下项目中过滤直接，那将对我有很大帮助： `[00]`、和.`[0F]``ÿÿÿÿ``[01]`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T10:39:59.450

> 如何以这种方式过滤此字符串？

您可以使用此正则表达式：

```
string filteredStr = Regex.Replace(strWithTrash, @"\[00\]|\[01\]|\[0F\]|(ÿÿÿÿ)", "");
// now, you can convert your filtered string back to a byte array 
```

> 如果可能的话，如何在不先转换为字符串的情况下直接过滤 Byte[] ？

为此，您可以使用循环，并查看 、、、和的字符代码`[`，但将其转换为字符串并删除垃圾**要**容易得多。`0``1``F``]``ÿ`

# c++ - 二叉搜索树 - 删除功能不起作用

> ID：15094225
> 
> 赞同：0
> 
> 时间：2013-02-26T16:28:00.367
> 
> 标签：c++

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;
template <class T>
struct TreeNode{
  string value;
  T key;
  TreeNode<T> *Parent;
  TreeNode<T> *LeftChild;
  TreeNode<T> *RightChild;
  TreeNode (T k,string Val)
  {
    this->value=Val;
    this->key=k;
    this->Parent=NULL;
    this->LeftChild=NULL;
    this->RightChild=NULL;
  }
};

template <class T>
class BinaryTree{
  private:
    TreeNode<T> *Root;
  public: 
       BinaryTree();
       void LoadTree(const char file[]);
       ~BinaryTree();
       void insertNode(T Key,string Val);
       void deleteNode(T Key);
       string searchNode(T Key);
       void UpdateKey(T newkey,T oldkey);
       int Height(TreeNode<T> *node);
       int height();
};

template <class T>
BinaryTree<T>::BinaryTree() 
{
   Root=NULL;                       
}

template <class T>
void BinaryTree<T>::insertNode(T Key,string Val)
{
   TreeNode<T> **temp=&Root;
   TreeNode<T> *temp1=NULL;
   if (*temp==NULL)
   {
     Root=new TreeNode<T>(Key,Val);
     return;
   }
   else
   {            
     while (*temp!=NULL)
     {
       temp1=*temp;
       if (temp1->key>Key)
       {
           temp=&(*temp)->LeftChild;
       }
       else if (temp1->key<Key)
       {
            temp=&(*temp)->RightChild;
       }
     }
   }
   *temp=new TreeNode<T>(Key,Val);              
   (*temp)->Parent=temp1;
}

template <class T>
void BinaryTree<T>::LoadTree(const char *file)
{
  ifstream fin;
  fin.open(file);
  string buffer;
  T buff;
  while (!fin.eof())
  {
      getline(fin,buffer,'~');
      fin>>buff;
      if (!buff)
      continue; 
      insertNode(buff,buffer);
  }          
  fin.close();
}  

void BinaryTree<T>::deleteNode(T Key)
{
  TreeNode<T> *temp=Root;
  TreeNode<T> *temp1=temp;
  while (temp!=NULL)
  {
       if (temp->key==Key)
       {
           temp1=temp;               
           if (temp==Root)
           {
               TreeNode<T> *temp2=Root;
               temp2=temp2->RightChild;
               while (temp2->LeftChild!=NULL)
               {
                     temp2=temp2->LeftChild;
               }
               temp->key=temp2->key;
               temp->value=temp2->value;
               delete temp2;            
           } 
           else if (temp->RightChild==NULL)
           {
                TreeNode<T> *temp2=temp;
                temp2=temp->Parent;
                if (temp2->RightChild==temp)
                {
                    temp2->RightChild=temp->LeftChild;
                    (temp->LeftChild)->Parent=temp2;
                }
                else if (temp2->LeftChild==temp)
                {
                    temp2->LeftChild=temp->LeftChild;
                    (temp->LeftChild)->Parent=temp2;
                }

                delete temp1;
                delete temp;
                return;
           }
           else if (temp->LeftChild==NULL)
           {
                TreeNode<T> *temp2=temp;
                temp2=temp->Parent;
                if (temp2->RightChild==temp)
                {
                    temp2->RightChild=temp->RightChild;
                    (temp->RightChild)->Parent=temp2;
                }
                else if (temp2->LeftChild==temp)
                {
                    temp2->LeftChild=temp->RightChild;
                    (temp->RightChild)->Parent=temp2;
                }
                delete temp1;
                delete temp;
                return;
           }
           else if (temp->RightChild!=NULL)
           {
               TreeNode<T> *tmp=temp; 
               temp=temp->RightChild;
               if (temp->LeftChild!=NULL)
               {
                   while (temp->LeftChild!=NULL)
                   {
                       tmp=temp;  
                       temp=temp->LeftChild;
                   }      
               }
               if (tmp!=temp1)
               tmp->LeftChild==NULL;
               else
               temp1->RightChild==NULL;

               temp1->key=temp->key;
               temp1->value=temp->value;
               delete temp;
               return;
           }
       }
       if (temp->key>Key)
       {
           temp=temp->LeftChild;
       }
       else if (temp->key<Key)
       {
            temp=temp->RightChild;
       }
 }                            
 return;
} 
```

这是我正在制作的二叉搜索树代码的一部分。我在运行删除功能时遇到问题，即对于某些节点，我收到错误“testing.exe 已停止工作”。testing 是我的主文件。我一遍又一遍地检查，但我似乎没有找到问题。有人能看到问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:55:57.857

您的代码肯定有不止一个问题。

假设要删除的密钥存储在根目录中：

```
if (temp->key==Key)
{
  temp1=temp;               
  if (temp->RightChild==NULL)
  {
    TreeNode<T> *temp2=temp;
    temp2=temp->Parent;         // temp2 will be NULL here 
    if (temp2->RightChild==temp)
    {
      temp2->RightChild=temp->LeftChild;  // thus dereferencing NULL either here
      (temp->LeftChild)->Parent=temp2;
    }
    else if (temp2->LeftChild==temp)
    {
      temp2->LeftChild=temp->LeftChild;   // ... or here
      (temp->LeftChild)->Parent=temp2;
    }

    delete temp1;
    delete temp;
    return;
  } 
```

另外看看你的代码大纲，案例处理似乎不正确：

```
if (temp->key==Key)
{
  temp1=temp;               
  if (temp->RightChild==NULL)
  {
     // do something
  }
  else if (temp->LeftChild==NULL)
  {
     // do something
  }
  else if (temp->RightChild!=NULL)
  {
     // do something
  }
  else if (temp->LeftChild!=NULL && temp->RightChild==NULL)
  {
     // code never reached
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:52:34.120

`temp1`在您删除和的两种情况下`temp`，它们都指向同一个地址。

# android - Android 上是否有 javax.smartcardio 类似物？

> ID：15094228
> 
> 赞同：4
> 
> 时间：2013-02-26T16:28:06.863
> 
> 标签：android, security, cryptography, smartcard, pcsc

Android 上是否有 javax.smartcardio 类似物？但不使用 Open Mobile API。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T10:45:12.320

我在一个名为[SCUBA](http://sourceforge.net/p/scuba/code/214/tree/)`javax.smartcardio.*`的项目中用作 Android 上的外观。请注意，这是为了将 APDU 传输到 NFC 芯片领域的 ISO14443 卡（在支持 NFC 的 Android 手机中），而不是用于与 SIM 或 SE 通信。`IsoDep`

（主要动机是能够在 J2SE 和 Android 上使用相同的[JMRTD ePassport 读取 API jar 而无需更改。）](http://jmrtd.org)

编辑：如果您有兴趣与外部读卡器中的卡进行通信，请查看此[SCDroid 项目](http://www.scdroid.com/software)。ACS 似乎也[为其 ACR122U 阅读器提供了 Android 支持](http://www.acs.com.hk/index.php?pid=drivers&id=ACR122U)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T18:11:52.213

您可以查看`com.android.nfc_extras`AOSP 树中的包。这将允许您将 APDU 发送到安全元件。它还允许您启用卡模拟。这仅适用于有根电话或 AOSP 版本。您将无法在安全元件上安装任何东西，因为您无法访问密钥（除非您有一个具有不同安全元件的工程样本）。NFC extras 是一个私有 API，因此您可能无法在非 root 手机上使用它。

# jquery - jQuery Cycle 插件 - 每次单击导航链接时如何从幻灯片的开头重新开始？

> ID：15094233
> 
> 赞同：1
> 
> 时间：2013-02-26T16:28:12.580
> 
> 标签：jquery, jquery-cycle

每次我单击导航链接“服务”时，它都会显示我访问过的上一个部分。相反，我想重新开始始终显示第一部分。请问我怎样才能使这个工作？

这是html标记：

```
<ul id="nav">
<li id="nav-home">Home</li>
<li id="nav-services">Services</li>
<li id="nav-contact">Contact</li>
</ul>

<div class="panel" id="panel-services">
<ul class="cycle-services cycle">

<li>
<div class="columnServicesintro">
<p>This is 1st Section</p>
</div>
</li>

<li>
<div class="columnServices">
<p>This is 2nd Section</p>
</div>
</li>

<li>
<div class="columnServices">
<p>This is 3rd Section</p>
</div>                  
</li>

</ul>
</div> 
```

这是jQuery：

```
function cycle() {

   // Services Cycle.
   var $cycleServices = $(".cycle-services");

   // The paging.
   $cycleServices
      .before('<ul class="cycle-services-pager" />');

   // Let's put in the next button.
   $cycleServices
      .after("<div class='cycleServicesNext'>Next</div>");

   $cycleServices.cycle({ 
      fx:     "scrollHorz", 
      speed:  800,
      easing: "easeOutExpo",
      timeout: 0, 
      pager:   ".cycle-services-pager",
      next:   ".cycleServicesNext",
      prev:   ".cycleServicesPrevious",
      pagerAnchorBuilder: function(idx, slide) {
         return '<li id="cycle-services-pager-' + idx + '">' + idx + '</li>';
      }
   });

   // Resize Panel according to slide cycle selected.
   var $panelServices = $("#panel-services");

   $("#cycle-services-pager-0")
      .on("click", function() {
         $panelServices
            .animate({ "width" : "430px" }, 800, "easeOutExpo");
      });

   $("#cycle-services-pager-1")
      .on("click", function() {
         $panelServices
            .animate({ "width" : "555px" }, 800, "easeOutExpo");
      });

   $("#cycle-services-pager-2")
      .on("click", function() {
         $panelServices
            .animate({ "width" : "555px" }, 800, "easeOutExpo");
      });

   $("#cycle-services-pager-3")
      .on("click", function() {
         $panelServices
            .animate({ "width" : "555px" }, 800, "easeOutExpo");
      });

   $("#cycle-services-pager-4")
      .on("click", function() {
         $panelServices
            .animate({ "width" : "555px" }, 800, "easeOutExpo");
      });

   $(".cycleServicesNext")
      .on("click", function() {

         var thePanelID = $(".cycle-services-pager").find("li.activeSlide").text();

         if ( thePanelID == 0 ) {

            $panelServices
               .animate({ "width" : "430px" }, 800, "easeOutExpo");

         } else {

            $panelServices
               .animate({ "width" : "555px" }, 800, "easeOutExpo");

         }

      });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:07:42.560

您可以在循环分页中触发首页按钮。在这种情况下，您可以尝试：

```
$("#nav-services").first().click(function(){
 $(".cycle-services-pager li").first().click();
}); 
```

# sql-server - SSIS ETL Unpivot 转换为 T-SQL Unpivot

> ID：15094234
> 
> 赞同：1
> 
> 时间：2013-02-26T16:28:20.673
> 
> 标签：sql-server, tsql, ssis, etl, unpivot

我正在尝试将一些 SSIS ETL 转换为 sql Server 代码。旧的 ETl 是为 2005 年编写的，新的 T-SQL 代码是为 2012 年编写的。我在 SSIS ETL 中转换了以下数据：

**来源表：** AssetName、MoodyRating、SPRating、FitchRating

**源数据：**

```
FirstAsset, 1 , 2 , 3
SecondAsset, 4, 5, 6 
```

这与以下内容无关：

**目标表：** AssetName、RatingSouce、RatingValue

**目标数据：**

```
FirstAsset, Moody, 1
FirstAsset, SP, 2
FirstAsset, Fitch, 3
SecondAsset, Moody, 4
SecondAsset, SP, 5
SecondAsset, Fitch, 6 
```

我想我可以使用 UNPIVOT 命令在 SQL 中执行此操作，但我找不到将 RatingSource 作为 unpivot 过程的一部分注入的示例。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:33:51.200

您可以使用该`UNPIVOT`函数，然后只需替换`rating`列名中的 ：

```
select AssetName,
  replace(RatingSouce, 'Rating', '') RatingSouce,
  RatingValue
from yourtable
unpivot
(
  RatingValue
  for RatingSouce in ([MoodyRating], [SPRating], [FitchRating])
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/74f34/3)

# python - uWSGI 错误 - 未找到 Python 应用程序

> ID：15094238
> 
> 赞同：1
> 
> 时间：2013-02-26T16:28:36.410
> 
> 标签：python, nginx, uwsgi

我正在遵循[这个](http://library.linode.com/web-servers/nginx/python-uwsgi/ubuntu-12.04-precise-pangolin)指示。我收到以下错误：

```
uWSGI Error - Python application not found 
```

我使用`uwsgi -x`配置 xml 来获取更多信息：

```
 [WARNING] option "app" is deprecated: use the more advanced "mount" option
    *** Starting uWSGI 1.2.3-debian (32bit) on [Tue Feb 26 16:23:28 2013] ***
    compiled with version: 4.6.3 on 26 September 2012 07:58:38
    detected number of CPU cores: 1
    current working directory: /etc/uwsgi/apps-available
    detected binary path: /usr/bin/uwsgi-core
    limiting address space of processes...
    your process address space limit is 536870912 bytes (512 MB)
    your memory page size is 4096 bytes
     *** WARNING: you have enabled harakiri without post buffering. Slow upload could be rejected on post-unbuffered webservers ***
    detected max file descriptor number: 1024
    lock engine: pthread robust mutexes
    unlink(): Permission denied [socket.c line 75]
    bind(): Address already in use [socket.c line 107] 
```

可能的错误是什么？

谢谢你。

# java - 使用字符串、变量、循环的正确编码实践 - Java (Android)

> ID：15094242
> 
> 赞同：1
> 
> 时间：2013-02-26T16:28:55.223
> 
> 标签：java, android, performance

我是 Android 开发人员，对 Java 并不陌生，但我对性能的最佳实践有一些疑问。我将从我的代码中给出一些示例，以便您做出决定。

**字符串连接**

```
url = "http://www.myserver." + domain + "/rss.php?"
+ rawType + rawCathegory + rawSubCathegory + rawLocality
+ rawRadius + rawKeyword + rawPriceFrom + rawPriceto; 
```

据我所知，这将在创建我的 url 变量之前创建 11 个字符串对象，对吧？

我被教导使用 StringBuilder，但我的问题是，*为了使其高效，连接的最少字符串量是*多少？我认为使用它连接两个字符串没有多大意义，对吧？

**局部变量**

有时我尝试像这样“链接”方法调用

```
FilterData.getInstance(context).getFilter(position).setActivated(isActivated); 
```

天真地避免变量分配，但它比这更快吗？

```
FilterData filterData = FilterData.getInstance(context);
Filter filter = filterData.getFilter(position);
filter.setActivated(isActivated); 
```

我相信它应该为我自己保存一个局部变量，但如果方法名称很长等，它就会变得不可读。

**循环**

[http://developer.android.com/training/articles/perf-tips.html](http://developer.android.com/training/articles/perf-tips.html)说增强的 for 循环比常规 for 循环快 3 倍，很好，而且更容易编写，*但是，如果我需要指数？*据我所知，在增强的 for 循环中，我需要自己跟踪它，就像这样

```
int index = 0;
for(Object obj : objects) {
    // do stuff
    index++;
} 
```

这仍然比常规循环快吗？

```
for(int i = 0; i < objects.size(); i++) {
   // do stuff
} 
```

我认为增强的 for 循环可能会对该限制进行优化，所以也许如果 size() 对此进行了优化

```
int size = objects.size();
for(int i = 0; i < size; i++) {
   // do stuff
} 
```

那会怎样？

谢谢，我知道这可能是吹毛求疵，并没有太大的不同，但我宁愿以正确的方式学习这些常见的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:34:57.377

## 字符串：

除非涉及循环，否则编译器足够聪明，可以以最佳方式为您进行连接。

循环时，使用 StringBuilder 或 Buffer。

## 局部变量：

你给出的两个例子是相同的。即使您从未给它命名，仍然需要分配内存。

## 循环：

根据循环的类型，使用增强的循环可以带来巨大或微不足道的改进，最好阅读您正在使用的循环。

# c# - 如何在网格中移动项目

> ID：15094245
> 
> 赞同：1
> 
> 时间：2013-02-26T16:29:00.740
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个 WPF `Grid`，想根据用户的输入向上或向下移动行。这是我迄今为止尝试过的（当用户决定向上移动元素时的示例）：

```
RowDefinition currentRow = fieldsGrid.RowDefinitions[currentIndex];
fieldsGrid.RowDefinitions.Remove(currentRow);
fieldsGrid.RowDefinitions.Insert(currentIndex - 1, currentRow); 
```

难道我做错了什么？由于使用这种方法的 UI 保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:49:08.797

这是一个使用 ItemsControl 来做你想做的事情的简单例子：

视图模型

```
public class ListBoxViewModel
{
    private static readonly  List<string> sortList = new List<string>() { "Unsorted", "Sorted" };
    public List<string> SortList { get { return sortList; } }

    public ObservableCollection<ItemDetail> ItemDetails { get; set; }

    #region Up Command
    ICommand upCommand;
    public ICommand UpCommand
    {
        get
        {
            if (upCommand == null)
            {
                upCommand = new RelayCommand(UpExecute);
            }
            return upCommand;
        }
    }

    private void UpExecute(object param)
    {
        var id = param as ItemDetail;

        if (id != null)
        {
            var curIndex = ItemDetails.IndexOf(id);
            if (curIndex > 0)
                ItemDetails.Move(curIndex, curIndex - 1);
        }
    }
    #endregion Up Command

    #region Down Command
    ICommand downCommand;
    public ICommand DownCommand
    {
        get
        {
            if (downCommand == null)
            {
                downCommand = new RelayCommand(DownExecute);
            }
            return downCommand;
        }
    }

    private void DownExecute(object param)
    {
        var id = param as ItemDetail;
        if (id != null)
        {
            var curIndex = ItemDetails.IndexOf(id);
            if (curIndex < ItemDetails.Count-1)
                ItemDetails.Move(curIndex, curIndex + 1);
        }
    }
    #endregion Down Command

    public ListBoxViewModel()
    {
        ItemDetails = new ObservableCollection<ItemDetail>()
        {
            new ItemDetail() { IsSelected = false, ItemName = "Customer Id", SortOrder = "Unsorted" },
            new ItemDetail() { IsSelected = true, ItemName = "Customer Name", SortOrder = "Sorted" },
            new ItemDetail() { IsSelected = false, ItemName = "Customer Age", SortOrder = "Unsorted" }
        };
    }
} 
```

ItemDetail 类（由我组成，让事情变得更容易）

```
public class ItemDetail
{
    public bool IsSelected { get; set; }
    public string ItemName { get; set; }
    public string SortOrder { get; set; }
} 
```

XAML

```
<UserControl.Resources>     
    <DataTemplate DataType="{x:Type vm:ItemDetail}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition SharedSizeGroup="CheckBoxGroup" />
                <ColumnDefinition SharedSizeGroup="ItemNameGroup" />
                <ColumnDefinition SharedSizeGroup="SortGroup" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition SharedSizeGroup="UpArrowGroup" />
                <ColumnDefinition SharedSizeGroup="DownArrowGroup" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <CheckBox Grid.Column="0" IsChecked="{Binding IsSelected}" VerticalAlignment="Center" />
            <Label Grid.Column="1" Content="{Binding ItemName}" />
            <ComboBox Grid.Column="2" ItemsSource="{Binding DataContext.SortList, RelativeSource={RelativeSource AncestorType={x:Type views:ListBoxExample}}}" SelectedItem="{Binding SortOrder}" />
            <Button Grid.Column="4" Command="{Binding DataContext.UpCommand, RelativeSource={RelativeSource AncestorType={x:Type views:ListBoxExample}}}" CommandParameter="{Binding}">
                <Image Source="..\images\up.png" Height="10" />
            </Button>
            <Button Grid.Column="5" Command="{Binding DataContext.DownCommand, RelativeSource={RelativeSource AncestorType={x:Type views:ListBoxExample}}}" CommandParameter="{Binding}">
                <Image Source="..\images\down.png" Height="10" />
            </Button>
        </Grid>
    </DataTemplate>
</UserControl.Resources>

<Grid Grid.IsSharedSizeScope="True">
    <ItemsControl ItemsSource="{Binding ItemDetails}" />
</Grid> 
```

最后是结果：

![在此处输入图像描述](../Images/7c27ad54f3a5225f9a72c534db7cfdff.png)

在按第一项上的向下箭头后：

![在此处输入图像描述](../Images/43526d9234c14e894521dc2ade8dae02.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T17:58:23.360

这将是您屏幕截图的 WPF 方法：

```
<Window x:Class="WpfApplication4.Window9"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window9" Height="300" Width="500">
    <ItemsControl ItemsSource="{Binding Columns}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <DataTemplate.Resources>
                    <BooleanToVisibilityConverter x:Key="BoolToVisConverter"/>
                </DataTemplate.Resources>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="50"/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="25"/>
                        <ColumnDefinition Width="25"/>
                    </Grid.ColumnDefinitions>

                    <!-- This is your Key image, I used a rectangle instead, you can change it -->
                    <Rectangle Fill="Yellow" Visibility="{Binding IsPrimaryKey, Converter={StaticResource BoolToVisConverter}}"  Margin="2"/>

                    <CheckBox IsChecked="{Binding IsSelected}" Grid.Column="1"/>

                    <TextBlock Text="{Binding Name}" Grid.Column="2"/>

                    <ComboBox ItemsSource="{Binding SortOrders}" SelectedItem="{Binding SortOrder}" Grid.Column="3" Margin="2"/>

                    <Button Content="Up" Grid.Column="4" Margin="2"
                            Command="{Binding DataContext.MoveUpCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}}"
                            CommandParameter="{Binding}"/>

                    <Button Content="Down" Grid.Column="5" Margin="2"
                            Command="{Binding DataContext.MoveDownCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}}"
                            CommandParameter="{Binding}"/>

                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using InduraClientCommon.MVVM;
using System.Collections.ObjectModel;

namespace WpfApplication4
{
    public partial class Window9 : Window
    {
        public Window9()
        {
            InitializeComponent();

            var vm = new ColumnListViewModel();
            vm.Columns.Add(new ColumnViewModel() { IsPrimaryKey = true, Name = "Customer ID", SortOrder = SortOrder.Ascending });
            vm.Columns.Add(new ColumnViewModel() {Name = "Customer Name", SortOrder = SortOrder.Descending});
            vm.Columns.Add(new ColumnViewModel() {Name = "Customer Age", SortOrder = SortOrder.Unsorted});

            DataContext = vm;
        }
    }
} 
```

视图模型：

```
 public class ColumnListViewModel: ViewModelBase
    {
        private ObservableCollection<ColumnViewModel> _columns;
        public ObservableCollection<ColumnViewModel> Columns
        {
            get { return _columns ?? (_columns = new ObservableCollection<ColumnViewModel>()); }
        }

        private DelegateCommand<ColumnViewModel> _moveUpCommand;
        public DelegateCommand<ColumnViewModel> MoveUpCommand
        {
            get { return _moveUpCommand ?? (_moveUpCommand = new DelegateCommand<ColumnViewModel>(MoveUp, x => Columns.IndexOf(x) > 0)); }
        }

        private DelegateCommand<ColumnViewModel> _moveDownCommand;
        public DelegateCommand<ColumnViewModel> MoveDownCommand
        {
            get { return _moveDownCommand ?? (_moveDownCommand = new DelegateCommand<ColumnViewModel>(MoveDown, x => Columns.IndexOf(x) < Columns.Count)); }
        }

        private void MoveUp(ColumnViewModel item)
        {
            var index = Columns.IndexOf(item);
            Columns.Move(index, index - 1);
            MoveUpCommand.RaiseCanExecuteChanged();
            MoveDownCommand.RaiseCanExecuteChanged();
        }

        private void MoveDown(ColumnViewModel item)
        {
            var index = Columns.IndexOf(item);
            Columns.Move(index, index + 1);
            MoveUpCommand.RaiseCanExecuteChanged();
            MoveDownCommand.RaiseCanExecuteChanged();
        }
    }

    public class ColumnViewModel: ViewModelBase
    {
        private bool _isPrimaryKey;
        public bool IsPrimaryKey
        {
            get { return _isPrimaryKey; }
            set
            {
                _isPrimaryKey = value;
                NotifyPropertyChange(() => IsPrimaryKey);
            }
        }

        private bool _isSelected;
        public bool IsSelected
        {
            get { return _isSelected; }
            set
            {
                _isSelected = value;
                NotifyPropertyChange(() => IsSelected);
            }
        }

        private string _name;
        public string Name
        {
            get { return _name; }
            set
            {
                _name = value;
                NotifyPropertyChange(() => Name);
            }
        }

        private List<SortOrder> _sortOrders;
        public List<SortOrder> SortOrders
        {
            get { return _sortOrders ?? (_sortOrders = Enum.GetValues(typeof(SortOrder)).OfType<SortOrder>().ToList()); }
        }

        private SortOrder _sortOrder;
        public SortOrder SortOrder
        {
            get { return _sortOrder; }
            set
            {
                _sortOrder = value;
                NotifyPropertyChange(() => SortOrder);
            }
        }
    }

    public enum SortOrder {Unsorted, Ascending, Descending}
} 
```

这是它在我的屏幕上的样子：

![在此处输入图像描述](../Images/c66343fc5eff35c431bf28524c43df27.png)

正如您在上面的示例中看到的，我绝不会在代码中操作或创建 UI 元素，因为这实际上没有必要。每当您需要与屏幕上显示的信息进行交互时，您都与`ViewModel`s 而不是`View`. 这是 WPF 使 UI 和应用程序逻辑之间的关注点清晰分离成为可能，而这在其他框架中是完全不存在的。在 WPF 中执行任何类型的 N 元素 UI 时，请将此方法视为事实上的默认方法。

**编辑：**

**这种方法相对于一种方法的优点`classic`：**

> *   无需在代码中操作复杂的 WPF 类（IE UI 元素）即可显示/从屏幕获取数据（只需简单、简单的属性和 INotifyPropertyChanged）
> *   更好地缩放（UI 可以是任何东西，只要它尊重 ViewModel 属性，您可以将 ComboBox 更改为旋转的 3d 粉色大象，每只脚都有一个排序顺序。
> *   无需导航视觉树来查找天知道在哪里的元素。
> *   什么都不需要`foreach`。只是`Select`将您的数据（从您获得的任何数据源）转换为 `ViewModel`列表的简单方法。

底线：如果您使用 WPF 方法，WPF 比目前存在的任何其他东西都更简单和更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:34:10.617

您正在更改[RowDefinition](http://msdn.microsoft.com/en-us/library/system.windows.controls.rowdefinition.aspx)的顺序，这不是您想要的。您想要更改元素对行的分配，这由[Grid.Row 附加属性确定](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.row.aspx)

我会将属于每一行的所有控件放在一个容器中（每行一个），然后使用 Grid.SetRow 来更改容器。查看[如何从 wpf 中的代码更改控件的网格行](https://stackoverflow.com/a/8936592/562906)。

# php - 在函数参数中将字符串转换为 PHP 中的变量

> ID：15094248
> 
> 赞同：0
> 
> 时间：2013-02-26T16:29:06.440
> 
> 标签：php, function, eval

下面是我创建的代码。我的意思是转换函数参数内的所有字符串。

例如 fname('variable1=value1&variable2=value2'); 我需要将 variable1 & variable2 转换为 ang 变量 $variable1, $variable2 而不是解析纯文本。我发现 eval() 函数很有用，但它只需要一个字符串，即“variable1”及其值。

```
function addFunction($arg){
    echo eval('return $'. $arg . ';');
}
addFunction('variable1=value1&variable2=value2'); 
```

现在的问题是我收到此错误“解析错误：语法错误，D:\xampp\htdocs 中的意外 '='...\index.php(7) : eval()'d code on line 1”。但是如果我在函数参数中只有一个变量和值，它就可以完美地工作，但我需要在这里有更多的参数。这是否可以做这件事，或者有没有其他方法可以在评估参数之前计算参数？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:31:20.610

您正在尝试使用此名称创建一个变量：

`$variable1=value1&variable2=value2`

您需要在 处分解它`&`以获得所需的未来变量名称。

```
function addFunction($arg){

    echo eval('return $'. $arg . ';');
}

$string = 'variable1=value1&variable2=value2';

$array = explode('&', $string);

foreach($array as $part)
{
    addFunction($part);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:32:10.747

您可以使用 PHP 函数分解字符串`explode`，然后使用`eval`它来独立评估每个变量。

```
 $myvars = explode ('$', 'variable1=value1&variable2=value2'); 
```

`$myvars`然后是一个数组，您可以`eval`根据需要对其进行解析和输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:33:02.077

也许你可以使用explode()？

```
$varArr = explode("&",$arg);
foreach ($varArr as $varKey=>$varVal) {
    echo eval('return $'.$varKey.'='.$varVal.';');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T16:35:43.427

您需要在 & 处拆分 $arg 以获取每个变量，然后在 = 处再次拆分以获取每个变量和值。

```
$arg = 'variable1=value1&variable2=value2';
$vars = explode('&', $arg);

foreach ($vars as $var) {
    $parts = explode("=", $var);
    echo eval('return $'. $parts[0] . '='. $parts[1] . ';');
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T16:43:16.383

像这样的东西：

```
function addFunction($arg)
{
  $varArr = explode("&",$arg);
  $varResponse ="";

  foreach ($varArr as $varKey=>$varVal) {
   $varResponse = $varResponse."$".$varVal.";";
  }
   return $varResponse;
 }
  echo addFunction('variable1=value1&variable2=value2'); 
```

萨卢多斯 ;)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T16:47:16.533

```
function addFunction($arg)
{
    parse_str($arg, $args);

    foreach ($args as $key => $val) {
        echo $key , " --> " , $val, "\n";
    }

}

addFunction('variable1=value1&variable2=value2'); 
```

输出

```
variable1 --> value1
variable2 --> value2 
```

你也可以使用

```
function addFunction($arg)
{
    parse_str($arg);

    echo $variable2; // value2

}

addFunction('variable1=value1&variable2=value2'); 
```

# javascript - 如何在 html5 中请求麦克风访问权限

> ID：15094251
> 
> 赞同：2
> 
> 时间：2013-02-26T16:29:14.450
> 
> 标签：javascript, html

我有这样的代码

```
function initAudio() {
    if (!navigator.webkitGetUserMedia)
        return(alert("Error: getUserMedia not supported!"));

    navigator.webkitGetUserMedia({audio:true}, gotStream, function(e) {
            alert('Error getting audio');
            console.log(e);
        });
}

window.addEventListener('load', initAudio ); 
```

我在控制台中的输出是这样的

```
NavigatorUserMediaError {code: 1, PERMISSION_DENIED: 1} 
```

为什么权限拒绝我？我尝试使用此页面的源代码制作录音机[http://webaudiodemos.appspot.com/AudioRecorder/index.html](http://webaudiodemos.appspot.com/AudioRecorder/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:16:56.437

如果您从保存在计算机上的文件而不是通过 Web 服务器运行代码，则 chrome 有时会因为其安全策略而出现允许访问的问题。

尝试的两个选项是

1.  将其放在网络服务器上
2.  如果您使用的是 mac，请使用以下命令通过终端打开 chrome

    /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --allow-file-access-from-files

# java - 图像提取中的禁止响应代码

> ID：15094253
> 
> 赞同：1
> 
> 时间：2013-02-26T16:29:17.820
> 
> 标签：java, network-programming, httpresponse

我对[这个请求](http://www.gessi.it/static/images/products/zoom/01410.png)到底发生了什么感到有点困惑。正如您通过使用标准浏览器单击链接所看到的那样，项目图像显示正常，并带有 200 响应代码。（这可以通过在大多数浏览器的网络部分打开开发人员工具来看到。）但是，我编写了一个脚本，它将使用标准 Java 类对响应代码的 URL 执行 ping 操作，并且我得到了 403 Forbidden 响应代码：

```
static public void main(String[] args) throws IOException
{
    URL my_url = new URL("http://www.gessi.it/static/images/products/zoom/01410.png");

    URLConnection u = my_url.openConnection();

    if (u instanceof HttpURLConnection)
    {
        HttpURLConnection http_u = (HttpURLConnection) u;

        System.out.println("Response code: " + http_u.getResponseCode());
        System.out.println("Response message: " + http_u.getResponseMessage());
    }
} 
```

有谁知道为什么脚本会收到禁止代码，而标准浏览器可以正常查看图像？过去，我看到我的脚本无法获取一些图像，因为 Java 本身无法处理复杂的 302 重定向等，但在这种情况下没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:58:43.973

```
http_u.setRequestProperty("User-Agent", "Mozilla 9.10"); 
```

服务器查找 User-Agent 请求标头，因此它不需要为爬虫、收割机等服务。

# razor - 在表单中显示要更新的信息 - Razor WebMatrix

> ID：15094255
> 
> 赞同：0
> 
> 时间：2013-02-26T16:29:20.053
> 
> 标签：razor, webmatrix, webmatrix-2

人们，我一直在努力寻找互联网的答案。我需要知道在表单中显示用户详细信息所需的代码，以便他们可以更改和更新他们的信息？

我已经尝试使用以下代码，但我遇到了砖墙？

```
@{
Layout = "~/_template1.cshtml";

var db = Database.Open("StayInFlorida");
var OwnerID = WebSecurity.CurrentUserId;
var FirstName = ("SELECT FirstName from OwnerInfo WHERE OwnerID='OwnerID'");

<h1>My Details</h1>

<form method="post">
<input>@FirstName</input>
<input type="submit" value="Insert" class="submit" />
</form>
} 
```

我确定这确实是错误的，但是网上对此的帮助非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:57:46.100

查看 ASP.NET 网页网站上的精彩入门教程：

[http://www.asp.net/web-pages/tutorials/introducing-aspnet-web-pages-2/getting-started](http://www.asp.net/web-pages/tutorials/introducing-aspnet-web-pages-2/getting-started)

右侧的链接指向文章的所有 9 个部分，包括在数据库中添加和编辑数据的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:12:29.577

```
<form action="" enctype="multipart/form-data" method="post">   
<input type="submit" value="@FirstName" class="submit" />
</form> 
```

然后更新：

```
if(IsPost)
{
var FName = Request["FirstName"];

var insertQueryString = "UPDATE OwnerInfo Set FirstName=@0";

db.Execute(insertQueryString, FName);
} 
```

我认为你不需要

```
<input>@firstName</input> 
```

# arrays - 在 Matlab 中预分配数组以提高性能

> ID：15094256
> 
> 赞同：0
> 
> 时间：2013-02-26T16:29:20.643
> 
> 标签：arrays, performance, matlab

我是 Matlab 的新手。Mlint 告诉我需要预先分配数组以提高性能。谁能告诉我如何在以下代码片段中预先分配数组大小：

```
for jj= init_frame: nFrames

   im1 = double(mov(jj).cdata);
   color_hist_array(jj,:) = color_histogram(im1, bins);
   [spatio_gram_array(jj,:),mu(jj,:,:),sigma(jj,:,:,:)] = spatiogram(im1, bins); 
```

预分配需要在 color_hist_array、spatio_gram_array、mu 和 sigma 中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:31:18.630

预分配实际上很容易在 matlab 中完成，在您的情况下，只需更改一行代码。

使用它，你应该完成。

```
for jj=  nFrames:-1:init_frame 
```

因为您向后执行循环，所以所有变量都以最大大小开始，并且一次分配空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:37:08.477

预分配意味着您首先创建所需大小的变量，然后填写值。这比在循环的每次迭代中让变量的大小增长快得多，因为增长需要分配新大小的新内存，然后将旧数据复制到新内存中。

这是一个例子：

```
N = 10000;
x = zeros(1,N);
for i = 1:N
    x(i) = someFunction(i);
end 
```

[丹尼斯](https://stackoverflow.com/a/15094302/1339280)关于向后循环的回答是一个方便的技巧，可以在循环之前预先分配而不需要额外的代码行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:42:38.310

阅读[这个](http://blogs.mathworks.com/loren/2012/11/29/understanding-array-preallocation/)和[这个](http://undocumentedmatlab.com/blog/preallocation-performance/)链接。简单来说，预分配只是告诉 MATLAB，您的矩阵将有多大（在您开始使用该矩阵之前）。使 MATLAB 可以分配足够的内存。但是对此还有更多的分析，您可以在上面的链接中找到。

# ios - 是否可以更新本地化故事板的字符串？

> ID：15094259
> 
> 赞同：235
> 
> 时间：2013-02-26T16:29:25.750
> 
> 标签：ios, xcode, string, localization, storyboard

我通过为它创建一个 base.lproj 故事板和 3 个字符串文件来本地化我的应用程序的一部分。一个月前，在那之后我向应用程序添加了新的视图控制器，但是这个控制器的按钮和标签没有出现在字符串文件中

是否可以更新这 3 个故事板附加的字符串文件，或者我必须使用 NSLocalizableString 和 Localizable.strings 以编程方式添加新的字符串翻译？

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2013-05-01T07:17:31.167

有两种选择：

## 选项1

Xcode 可以通过将文件转换为**[Interface Builder Cocoa Touch Storyboard]**文件类型或**[Localizable Strings]**文件类型来“重新加载”文件。

1.  从项目导航器中选择您的基本故事板文件
2.  在文件检查器中找到*本地化部分*
3.  如果您的文件当前是 [Localizable Strings]，请将其更改为 [Interface Builder Cocoa Touch Storyboard]，反之亦然。
4.  Xcode 应该已将您的故事板转换为当前版本，同时保留您旧的本地化工作。如果您愿意，您可以在此处将文件更改回原始文件类型。

## 选项 2

使用 ibtool 提取情节提要中的字符串。

1.  打开终端应用程序

2.  找到您的 Base.lproj 目录

3.  使用这一行来提取字符串：

    `ibtool MainStoryboard.storyboard --generate-strings-file file_name.strings`

4.  ibtool 将字符串提取到 file_name.strings 后，您可以将其复制并粘贴到原始 .strings 文件中

访问以获取更多信息：[https ://conyac.cc/business/columns/localization_guide_ios](https://conyac.cc/business/columns/localization_guide_ios)

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2016-02-14T22:14:43.930

查看**[BartyCrouch](https://github.com/Flinesoft/BartyCrouch)**，它完美地解决了您的问题。它也是**开源**的，**积极维护**，可以很**容易地安装和集成**到您的项目中。

* * *

**[通过Homebrew](http://brew.sh)**安装**BartyCrouch ：**

 **```
brew install bartycrouch 
```

或者，通过[Mint](https://github.com/yonaskolb/Mint)安装它：

```
mint install Flinesoft/BartyCrouch 
```

**逐步更新**您的 Storyboards/XIBs 字符串文件：

```
$ bartycrouch update 
```

这将完全符合您的要求。

* * *

为了**让**您的 Storyboards/XIBs 字符串文件**随着时间的推移而更新，**我强烈建议添加一个构建脚本（有关如何在[此处](https://github.com/Flinesoft/BartyCrouch#build-script)添加构建脚本的说明）：

```
if which bartycrouch > /dev/null; then
    bartycrouch update -x
    bartycrouch lint -x
else
    echo "warning: BartyCrouch not installed, download it from https://github.com/Flinesoft/BartyCrouch"
fi 
```

除了增量更新您的 Storyboards/XIBs 字符串文件之外，这还将**确保您的`Localizable.strings`**文件使用代码中新添加的键**保持更新**`NSLocalizedString`，并显示重复键或空值的警告。

[请务必查看GitHub 上](https://github.com/Flinesoft/BartyCrouch)的 BartyCrouch或[此详细文章](https://medium.com/@Dschee/localization-in-swift-like-a-pro-48164203afe2)以获取更多信息。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2015-12-30T15:29:58.650

您可以在本地化文件中手动添加密钥。您可以通过在情节提要编辑器上选择关键对象来找到它。让我们看一下`Object-ID`身份检查器。它看起来像`"nwc-b2-19c"`

在您的本地化更新或添加翻译。例如 ：

```
"nwc-b2-19c.title" = "Translated title"; 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2016-05-28T20:26:10.037

这并不适合所有人，但它不需要终端中的其他工具，并且很容易进行小的手动更改。（当你想自动化你的过程时不要考虑这个。）

**步骤 0：故事板语言设置**

*   基础（附英文文本）
*   英文（不存在可本地化的字符串文件，因为基本文件是英文）
*   其他语言（可本地化的字符串文件）

[![基本配置](../Images/58dcba566feaec86e15bb03119a3f72b.png)](https://i.stack.imgur.com/gf5ze.png)

此步骤只进行一次。

现在，当我向情节提要添加一些内容时，我会执行以下操作

**第 1 步：添加英文本地化字符串文件**

[![添加英语](../Images/f51d25a9ce58413941f9db4f561258c2.png)](https://i.stack.imgur.com/ENBM0.png)

只需标记英文行项目。

这将创建一个包含所有行的全新英文本地化字符串文件

**第 2 步：将新行项目复制到其他语言文件中**

并翻译它们

**第三步：取消标记英文，去掉对应的localizable strings文件**

该文件仅用于获取新订单项

这是一个简单快速的过程，一切都在故事板编辑器中完成

**编辑：**

这个过程非常适用于小型故事板。例如，我有一个基于选项卡的项目，并且每个选项卡都有一个情节提要。

搜索“故事板参考”以查找教程。

很好的例子：[Xcode 中的 Storyboard 参考，我们应该在哪里使用它？](https://stackoverflow.com/questions/30772145/storyboard-reference-in-xcode-where-should-we-use-it)

所以每个小故事板只有几个要本地化的字符串。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-03-19T12:41:12.153

最后，我的解决方案是（基本但有效）复制以前的翻译并将它们粘贴到通过取消选中并选中本地化语言框创建的新文件中。

当您只需要更改一两个文本时，这在像我这样的某些情况下会很有用。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-04-13T16:11:10.890

我认为最好的方法是使用内置的导出/导入本地化：

1.  在 Project Navigator 中选择您的项目文件夹
2.  选择编辑器>导出本地化，
3.  所有翻译留在原地，XCode 会自动添加遗漏的字符串。此外，在导入之前，您可以在 XLIFF 编辑器中编辑 .xliff（例如，在线 - [http://xliff.brightec.co.uk](http://xliff.brightec.co.uk)），然后您无需在 XCode 中执行此操作。
4.  然后 Editor > Import Localizations 并选择保存的 .xliff 文件。

PS 如果您不想在 XLIFF 编辑器中编辑并跳过第 3 步，XCode 无法保存新字符串。在这种情况下，在 XLIFF 编辑器中打开 .xliff，重新保存而不进行更改并导入新文件。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-07-20T10:31:13.513

当您单击故事板时，例如 Main.storyboard... 在右侧，您可以看到本地化菜单（参见附图）。如果取消选中并再次检查语言，将再次生成该文件。所以我通常复制内容，再次生成文件，然后粘贴我复制并已翻译的内容。

这是我用来更新字典的方式。

[![在此处输入图像描述](../Images/d64c9f9bccc988496698217883da16d7.png)](https://i.stack.imgur.com/YIyZX.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-04-26T13:22:19.377

我有一个巨大的故事板，那里有很多字符串。两种语言以英语和另一种阿拉伯语为基础。任务是在情节提要中添加一些字段和标签，并在没有任何脚本和 NSLocalizableStrings 的情况下为它们添加本地化。

接下来对我有帮助：

*第一*：确保你有 git 来防止意外的变化。

1.  转到 xcode 中的目标屏幕并按`Editor`-> `Export For Localization...`。**将ar.xliff**文件保存在某处。
2.  下载[XLIFF 编辑器](https://itunes.apple.com/lv/app/xlifftool/id1074282695?mt=12)。
3.  打开 ar.xliff 文件并进行更改。
4.  在 xcode 中导入此文件。完毕！您已更新故事板字符串文件。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-03-17T10:02:46.343

这是[一个](https://gist.github.com/yoichitgy/29bdd71c3556c2055cc0)从情节提要和 xib 中提取字符串并将它们与现有翻译合并的脚本。

要在构建项目时自动运行脚本，请将脚本放入项目根目录，然后在项目设置中的目标构建阶段中添加具有以下行的**运行脚本阶段。**

```
./mergegenstrings.py PathToSourceDir 
```

或者，您可以在需要时手动在终端上运行脚本。

脚本`ibtool`按照 Tha Leang 的回答运行。它还运行`genstrings`以提取和合并`NSLocalizedString`源代码中标记为的字符串。该脚本基于本文中的[一个脚本，该脚本在](http://www.stevestreeting.com/2010/05/18/os-x-localisation-incremental-genstrings-and-utf-8-files/)运行后合并字符串`genstrings`。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-06-16T13:39:15.933

Apple有一个名为[AppleGlot](https://developer.apple.com/downloads/index.action?name=localization)的命令行工具~~应用程序~~，它支持增量本地化。我还没有尝试过，但它看起来与您搜索的工具完全一样（前段时间）。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-10-03T07:44:37.910

最简单且风险更低的方法是，只需从情节提要中复制对象 ID 并为本地化文件中的键添加一个新键，如下例所示：

**1：**从组件的情节提要中复制如下对象ID：

[![在此处输入图像描述](../Images/4b97fd7bddfbfe54f31957b2072d68e8.png)](https://i.stack.imgur.com/1TpmZ.png)

**2：**在本地化文件中添加新密钥，如下所示：

```
"DjF-dn-0ay.text" = "Borrar datos y restablecer"; 
```

**注意：**如果您只想更新少数组件，这是一种风险较小的方法，否则您可以为情节提要重新创建本地化文件。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-10-29T18:27:45.927

Xlifftool 可作为 Mac 应用程序使用，并且运行良好。它显示了 info.plist 中的所有可翻译字符串和对象、可本地化的字符串和情节提要。

在这里为 mac 获取它：[https ://itunes.apple.com/lv/app/xlifftool/id1074282695?mt=12](https://itunes.apple.com/lv/app/xlifftool/id1074282695?mt=12)

第 1 步：在 Xcode 中，在项目导航器中选择您的项目文件夹。然后选择 Editor/Export for Localization...

您的可翻译字符串将包含在您选择用于 Xcode 本地化的语言下的 xliff 文件中。

第 2 步：使用 xlifftool 打开该文件并翻译或更新您之前完成的翻译。

第 3 步：然后使用 Editor/Import Localizations 上传回您的项目...

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-03-31T10:13:49.880

**选项 1** Xcode 可以通过将文件转换为文件类型或文件类型
来“重新加载”文件。`[Interface Builder Cocoa Touch Storyboard]``[Localizable Strings]`

*从Project Navigator*中选择您的基本故事板文件在*File Inspector*中 找到*Localization*部分。如果您的文件当前是，请将其更改为，反之亦然。 Xcode 应该已将您的故事板转换为当前版本，同时保留您旧的本地化工作。如果您愿意，您可以在此处将文件更改回原始文件类型。*`[Localizable Strings]``[Interface Builder Cocoa Touch Storyboard]`* 

 ***选项 2**
用于`ibtool`提取情节提要中的字符串。

打开终端应用程序
找到您的`Base.lproj`目录
使用此行提取字符串：

```
ibtool MainStoryboard.storyboard --generate-strings-file file_name.strings 
```

在 ibtool 将字符串提取到 后`file_name.strings`，您可以将其复制并粘贴到您的原始`.strings`文件中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-08T16:37:27.070

添加新语言进行本地化。一个你不需要的。

例如，它将生成说 Indonesia.strings，其中将包含您需要的所有情节提要按钮名称等，将它们全部复制并粘贴到您拥有的所有其他 language.string 文件中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-11-20T13:56:23.860

这是我将新文本从情节提要或 xib 更新为本地化字符串的简单方法

1-使用这个脚本[http://tredje.se/dev/trouble/?x=entry:entry150917-204052](http://tredje.se/dev/trouble/?x=entry:entry150917-204052)

2-**选择您**要更新的本地化字符串并将您的语言字符串从“本地化字符串”切换到“界面构建器故事板”

3-切换回来:)

**完毕。**

[![在此处输入图像描述](../Images/87b983e03a59198492ec73912d2d49db.png)](https://i.stack.imgur.com/FegOm.png)***

# javascript - JSF 标记上的 onclick 事件

> ID：15094261
> 
> 赞同：0
> 
> 时间：2013-02-26T16:29:26.263
> 
> 标签：javascript, jsf, jsf-2

如何将 JavaScript`onclick`事件绑定到 JSF 标记？这是我的 JSF 标签：

```
<h:commandLink value="Edit" action="#{adminBean.edit}">
<f:param value="#{user.login}" name="login"/>
</h:commandLink> 
```

我设法在 JSP 标记 JavaScript 函数上绑定点击事件：

```
<script type="text/javascript">
function deleteUser(link)
{
    if (confirm("Are you sure?")) {
        window.location = link;
    }

    else {

    }

}
</script> 
```

这是我在 JSP-tag 中的链接示例。

```
out.println("<a href=\"#\" onclick=\"deleteUser('deleteUser.htm?userLogin="+user.getLogin()+"');\">Delete</a>"); 
```

如何将相同的点击功能绑定到上面给出的 JSF-tag ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T16:32:57.580

使用标签组件`onclick`中的属性：`<h:commandLink>`

JSF 代码

```
<h:commandLink value="Edit" action="#{adminBean.edit}"
    onclick="if (!deleteUser()) return false;">
    <f:param value="#{user.login}" name="login"/>
</h:commandLink> 
```

并将您的脚本更改为

```
<script type="text/javascript">
    function deleteUser(link) {
        return confirm("Are you sure?");
    }
</script> 
```

顺便说一句，我认为您混淆了*edit*和*delete*这两个术语，但这超出了问题的范围。

# java - java语言中的更大字符串

> ID：15094266
> 
> 赞同：-1
> 
> 时间：2013-02-26T16:29:33.640
> 
> 标签：java, string, compareto

结果必须是大于单词“END”的字符串。这是我到目前为止所做的，但它只是不起作用。

```
System.out.println("Write a word. The word "END" terminates the program");

String word = sc.nextLine();

if(word.equals("END")){
    System.out.println("Nothing has been typed");
}

while(word!="END"){
    if(word.compareTo("END") > 0){
        System.out.println(word+" is greater than END");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:32:00.620

您的词典比较（即哪个单词按字母顺序较早）是正确的。但是，您的循环条件不正确：

```
while(word!="END") 
```

永远都是真的。你应该把它改成

```
while(!"END".equals(word)) 
```

在这种情况下，循环将在到达 word 时停止`END`。

如果您想要不区分大小写的比较，请使用`compareToIgnoreCase`而不是`compareTo`，而`equalsIgnoreCase`不是`equals`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:17:36.350

```
while(word!="END") is always true because it check object reference .You should try
while(!"END".equals(word)) where object content is checked 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T17:06:52.427

`while(!"END".equals(word))`您的循环条件不正确

# javascript - Unobtrusive JavaScript - Separate JS File Not Found

> ID：15094270
> 
> 赞同：0
> 
> 时间：2013-02-26T16:29:48.410
> 
> 标签：javascript, asp.net, asp.net-mvc-4, unobtrusive-javascript

Using the concept [unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript), I'm trying, for the first time, to place my JavaScript in a separate file from the HTML. But, no matter what I do, I get an error that the file wasn't found.

This is the actual error in the google chrome console (ctrl-shift-j):

```
GET http://localhost:14385/Home/TestPage.js 404 (Not Found) 
```

I started with a new MVC 4 app. I created a new test page:

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <meta name="viewport" content="width=device-width" />
    <script src="TestPage.js"></script>
    <title></title>
</head>
<body>
    <div>
        <input id="foo" value="snuh" />
    </div>
</body>
</html> 
```

And I created a new TestPage.js in the same folder:

```
$(document).ready(function() {

    function dosomething() {
        alert('snuh');
    }

    document.getElementById('foo').onclick = dosomething;
}); 
```

I've tried the tips posted [here](https://stackoverflow.com/a/11951732/279516), but I always get an error that the JavaScript file isn't found. Any idea what's wrong with this simple test?

Note: The TestPage actually displays, with the input box showing.

This is the layout in solution explorer:

![enter image description here](../Images/f4545155d31e2c09c85ba9fed19bb5fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:36:18.507

确保使用服务器端助手从正确的位置引用您的 javascript：

```
<script src="<%= Url.Content("~/TestPage.js") %>"></script> 
```

无论您从哪个位置呈现此视图，这都会正确引用 javascript 文件。它显然假设您已将 javascript 文件放在应用程序的根目录中。约定是为此使用 Scripts 文件夹：

```
<script src="<%= Url.Content("~/Scripts/TestPage.js") %>"></script> 
```

* * *

更新：

现在您已经显示了您的项目结构，您似乎已将`TestPage.js`文件放在文件`~/Views`夹中。这行不通。无法从客户端访问此文件夹。它被明确禁止并且不由 IIS 提供。你不应该在里面放置任何静态文件。将您的 javascript 文件夹移动到该`~/Scripts`文件夹​​。

此外，您似乎在`TestPage.js`文件中使用了 jQuery，但您从未引用过它，因此您的脚本将无法工作。如果您想使用 jQuery，请确保您也添加了它：

```
<script src="<%= Url.Content("~/Scripts/jquery-1.8.2.js") %>"></script>
<script src="<%= Url.Content("~/Scripts/TestPage.js") %>"></script> 
```

或者如果您不想使用 jQuery 修复您的脚本，使其不依赖于它：

```
function dosomething() {
    alert('snuh');
}

window.onload = function() {
    document.getElementById('foo').onclick = dosomething;
}; 
```

或者，如果您将脚本放在 DOM 的末尾，您甚至不需要将它们包装在文档就绪处理程序中，因为在此阶段 DOM 将准备好并且您可以对其进行操作：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <meta name="viewport" content="width=device-width" />
    <title></title>
</head>
<body>
    <div>
        <input id="foo" value="snuh" />
    </div>
    <script src="<%= Url.Content("~/Scripts/TestPage.js") %>"></script>
</body>
</html> 
```

然后在你的脚本中：

```
function dosomething() {
    alert('snuh');
}
document.getElementById('foo').onclick = dosomething; 
```

# javascript - javascript function make a full postback in an update panel

> ID：15094274
> 
> 赞同：1
> 
> 时间：2013-02-26T16:29:57.887
> 
> 标签：javascript, jquery, asp.net, ajax, updatepanel

I call the following javascript function in an update panel which **refresh** my page although it is in an update panel!!

```
<script type="text/javascript" language="javascript">
    function get_emp_num(source, eventArgs) {
        var txt_emp_num = "<%= txt_RequestEmpNum.ClientID %>";
        document.getElementById(txt_emp_num).value = eventArgs.get_value();
        __doPostBack("<%=txt_RequestEmpNum.ClientID %>");
    }

    function get_person_num(source, eventArgs) {
        var txt_person_num = "<%= txt_RequestPersonNum.ClientID %>";
        document.getElementById(txt_person_num).value = eventArgs.get_value();
        __doPostBack("<%=txt_RequestPersonNum.ClientID %>");
    }

</script> 
```

* * *

I don't want this script to change the partial post back behavior of my update panel .how to do that ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:14:10.137

您的回发控件是什么，它是否设置为更新面板上的异步触发器？根据您发布的代码，我怀疑 txt_RequestEmpNum 和 txt_RequestPersonNum 是文本框。这些控件本身不支持回发。您需要的是页面上的隐藏按钮，您的 javascript 将“单击”以发送回发。像这样的东西：

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Button1" />
    </Triggers>
    <ContentTemplate>
        <asp:TextBox ID="txt_RequestEmpNum" runat="server" />
        <asp:TextBox ID="txt_RequestPersonNum" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel>
<div style="display: none;">
    <asp:Button id="Button1" runat="server" OnClick="Button1_Click" />
</div>

<script>
    function get_emp_num(source, eventArgs) {
        // I am unsure what your intent was with the code here so I removed it
        __doPostBack("<%=Button1.UniqueID %>", "");
    }

    function get_person_num(source, eventArgs) {
        // I am unsure what your intent was with the code here so I removed it
        __doPostBack("<%=Button1.UniqueID %>", "");
    }

    function refresh_using_jquery() {
        __doPostBack($('#<%=Button1.ClientID %>').attr('name'), '');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:05:07.513

如果您不希望进行整页回发，那么您需要实现一个使用 AJAX 的解决方案。我会使用 jQuery，因为它使使用 AJAX 变得更容易（无论如何，在我看来）。

# c - can we use character value in priority queue?

> ID：15094284
> 
> 赞同：0
> 
> 时间：2013-02-26T16:30:23.350
> 
> 标签：c, linked-list, priority-queue

Can we use character priorities like 'h' for high or 'l' for low in this case and use it to implement a priority queue?

```
struct node {
int data;
char c;
struct node *next;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:37:22.417

虽然你可以做到这一点。我假设您只是想为优先级使用有意义的名称而不是幻数。

您可能需要考虑使用枚举：

```
enum QueuePriority 
{
  HIGH,
  MEDUIM,
  LOW
};

struct node
{
  int data;
  enum QueuePriority priority;
  struct node *next;
}; 
```

这样做的好处是不必创建自定义比较函数/运算符。因为只要枚举值的顺序正确，内置就可以。
（我`HIGH == 0`按照某些系统中的惯例使用它们，但您可以轻松地扭转它）。

# c# - Select specific fields from Linq query and populate a DataTable

> ID：15094285
> 
> 赞同：0
> 
> 时间：2013-02-26T16:30:25.717
> 
> 标签：c#, linq

I'm trying to select a number DataRows with only specified fields from a Linq query, and then use these DataRows to populate a DataTable. The problem is that when I add these DataRows to the new DataTable I'm expect both ID and Name field to be populated respectively. However, the ID field in the DataTable contains both ID and Name values. Can someone point out what I'm doing wrong.

Here's the code:

```
var query2 = from s in Tables[Table_Sec].AsEnumerable()
             where query.Contains(s["sectype"])
             select new { id = s["id"], name = s["name"] }; // I only want these fields

DataTable dt = new DataTable();  // Create my new dataTable
dt.Columns.Add("id", typeof(string));
dt.Columns.Add("name", typeof(string));

foreach(var row in query2)
{
  dt.Rows.Add(row);  // ID field contains both ID and Name strings. Name field contains nothing
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:43:21.513

您可以尝试这样做，因为 DataRow 构造函数允许您传递对象数组

```
var result = from s in Tables[Table_Sec].AsEnumerable()
             where query.Contains(s["sectype"])
             select new object[] 
             {
                 s["id"],
                 s["name" ]
             };

DataTable dt = new DataTable();  
dt.Columns.Add("id", typeof(string));
dt.Columns.Add("name", typeof(string));

foreach(var row in result)
{
    dt.Rows.Add(row); 
} 
```

// 编辑：
我不推荐这种方式，因为它在很大程度上取决于列的正确顺序，我什至不确定是否还有其他情况会导致混乱=）从其他解决方案中选择一个（至少用于编码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:35:16.630

我会避免使用此方法的数据表并使用 POCO，Plain Old Class Object。

```
public class POCO
{
     public string id { get; set; }
     public string name { get; set; }
}

var query2 = from s in Tables[Table_Sec].AsEnumerable()
             where query.Contains(s["sectype"])
             select new POCO { id = s["id"], name = s["name"] }; 
```

POCO 的优点是您将数据与现有事物的关联分开，而是将其引用到仅作为集合而存在的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:34:05.740

来自[MSDN](http://msdn.microsoft.com/en-us/library/5ycd1034%28v=vs.80%29.aspx)：

```
DataRow newCustomersRow = dataSet1.Tables["Customers"].NewRow();

newCustomersRow["CustomerID"] = "ALFKI";
newCustomersRow["CompanyName"] = "Alfreds Futterkiste";

dataSet1.Tables["Customers"].Rows.Add(newCustomersRow); 
```

这是向数据表添加行的方式

所以你的会是这样的：

```
foreach(var row in query2)
{
var newRow = dt.NewRow();
newRow["id"] = row.id;
newRow["name"] = row.name;
  dt.Rows.Add(newRow);  // ID field contains both ID and Name strings. Name field contains nothing
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:34:39.620

您必须手动填充一行中的每个单元格：

```
foreach(var row in query2)
{
    var newRow = dt.NewRow();
    newRow["id"]= row.id;
    newRow["name"]= row.name;
    dt.Rows.Add(newRow);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T16:41:47.993

你没有很好地描述这个问题。但是，您不应将行添加到不同的行，`DataTables`因为您通常会遇到异常（“行已属于另一个表”）。

您应该使用强类型字段扩展方法，以确保您`ReferenceEquals`在选择对象时不会误用。当`CopyToDataTable`Linq`DataTable`查询包含`IEnumerable<DataRow>`.

[出于性能原因](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)，我也会使用`Enumerable.Join`而不是：`query.Contains`

```
var query2 = from secRow in Tables[Table_Sec].AsEnumerable()
             join sectype in query on secRow.Field<string>("sectype") equals sectype 
             select secRow;

DataTable dt = query2.CopyToDataTable(); 
```

# php - PHP rename directory in every subdirectory

> ID：15094287
> 
> 赞同：0
> 
> 时间：2013-02-26T16:30:26.880
> 
> 标签：php, file-upload, rename

Hey Guys im trying solve a tricky issue. Currently i have a folderstructure like this:

uploads/Event-12/1234-Johne-Doe/[…] uploads/Event-32/1234-Johne-Doe/[…]

So there a many events with their own folder. Within there a subfolders which are named like the id of the user (1234) followed by first and lastname. You can see that Mr. John Doe has a folder in Event-12 and also in Event-32\.

But what if John Doe change his name (for whatever reason…). So i have to rename all folders recursively otherwise all links gets broken.

How to do that with PHP. I can easily rename a folder at once by giving the correct path to it. Is there any nice solution to let PHP search for all matching directories?

Greetings.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:37:15.347

您可以在此[链接](https://stackoverflow.com/questions/6497833/php-opendir-to-list-folders-only)中列出所有文件夹并重命名您想要的文件夹。

```
<?php
if ($handle = opendir('.')) {
    $blacklist = array('.', '..', 'somedir', 'somefile.php');
    while (false !== ($file = readdir($handle))) {
        if (!in_array($file, $blacklist)) {
            echo "$file\n";
        }
    }
    closedir($handle);
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:34:56.973

我建议创建一个递归函数，利用`scandir()`并重命名它找到的每个目录。

来自 PHP 手册：[http ://www.php.net/manual/en/function.scandir.php](http://www.php.net/manual/en/function.scandir.php)

话虽如此，我建议您只使用用户 ID 作为您的文件夹名称。您永远不应该使用可以更新的变量来命名目录和存储用户数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:49:24.693

是的，这是一个数据库驱动的应用程序吗？如果是这样，你不应该试图解决这个问题。当您心脏病发作时，医生不会对症状进行治疗 :) 您的应用程序正在为相当于三重旁路的编码而尖叫。

我建议您首先从文件夹中删除名称。重写您的脚本以仅创建具有 ID 的文件夹（我假设这是 unqiue） - 这样，他们是否更改名称都没有关系。

# richfaces - richFaces reRender 不刷新

> ID：15094294
> 
> 赞同：0
> 
> 时间：2013-02-26T16:30:51.900
> 
> 标签：richfaces, footer, rerender, datascroller

我的页面结构如下：

```
Data Scroller
Datatable :
 - Header
 -  Data
 -  Footer
Data Scroller 
```

现在，我希望在页面更改时重新呈现数据滚动器和页脚。为此，我调用了一个 bean，它返回要在 dataScrollers 中的 reRender 标记下更改的字段的 ID。然而，问题是数据滚动条正在重新渲染，但页脚没有。在页脚中调用的方法永远不会被再次调用，但我知道 reRender id 的列表是正确的。

我有以下代码：

```
 <h:form title="detailView"> 
```

...

```
<rich:dataScroller align="center" for="attendanceList" maxPages="10"
        renderIfSinglePage="false" faststep="4"
        page="#{attendance.scrollerPage}" reRender="#{attendance.getRefreshIds(attendance.SourceSc2)}" id="sc1" ajaxSingle="false"/>
<rich:dataTable width="500" id="attendanceList"
        rows="#{attendance.getDatesAmount()}" columnClasses="attendance"
        value="#{attendance.getAttendanceList(myEmp)}" var="a">
    <f:facet name="header"> 
```

...

```
</f:facet>
<h:column>
    <h:outputText value="#{a.dayOfWeek}" />
</h:column> 
```

...

```
<h:column>
    <h:outputText value="#{a.totalTime}" />
</h:column>
<f:facet name="footer" id="tot">
    <rich:columnGroup>
    <h:column></h:column><h:column></h:column><h:column></h:column><h:column></h:column><h:column></h:column><h:column></h:column><h:column></h:column><h:column></h:column><h:column></h:column>
<h:column> <b><h:outputText value="Total" /> </b></h:column>
<h:column> <b><h:outputText value="#{attendance.getTotalForPage()}" /> </b></h:column> 
    </rich:columnGroup>
</f:facet>
</rich:dataTable>
 <rich:dataScroller width="400" align="center" for="attendanceList"
maxPages="20" renderIfSinglePage="false" faststep="4"
page="#{attendance.scrollerPage}" id="sc2" reRender="#{attendance.getRefreshIds(attendance.SourceSc2)}" ajaxSingle="false"/> 
```

...

```
 </h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:30:45.107

不确定您使用的是哪个射频（3.x？）尝试放一个

```
<a4j:support event="onpagechange" reRender="#{attendance.getRefreshIds(attendance.SourceSc2)}"/> 
```

在您的内部`<rich:dataScroller>`并将 h:form 更改为 a4j:form

# javascript - simplify javascript if statement where conditions are identical except for variable

> ID：15094295
> 
> 赞同：2
> 
> 时间：2013-02-26T16:30:54.457
> 
> 标签：javascript, if-statement, simplify

I apologize if this is a duplicate question. It's such a use-case question that it seems everyone has their own version.

I'm wondering if this can be simplified:

```
if ($('.taxclass').text().indexOf(tax1)>-1 || $('.taxclass').text().indexOf(tax2)>-1) {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:33:28.783

就目前而言，它非常简单，但是您可以主要通过仅获取元素文本一次并重用变量来减少冗余：

```
var text = $('.taxclass').text();
if (text.indexOf(tax1)>-1 || text.indexOf(tax2)>-1) {

} 
```

进一步的注意事项可能是通过使用标识符来减少 DOM 的遍历，并且只寻找一个不同的元素（如果这适合您的需要）而不是所有可能的具有 class 的东西`taxclass`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:32:52.460

您可以存储`$('.taxclass').text()`在变量中，或使用正则表达式。

```
var str = $('.taxclass').text();

if (str.indexOf(tax1) > -1 || str.indexOf(tax2) > -1)

// Or with regex
if(/(text1)|(text2)/.test($('.taxclass').text())
{} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T16:33:36.047

```
var txt = $('.taxclass').text();
if (txt.indexOf(tax1)>-1 || txt.indexOf(tax2)>-1) {} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T16:33:58.730

一种超级快速的方法是不要复制 $('.taxclass').text()

尝试类似的东西

```
var tax = $('.taxclass').text();
if (tax.indexOf(tax1)>-1 || tax.indexOf(tax2)>-1) {} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T16:37:07.660

又快又脏：

```
text.indexOf(tax1+"~"+tax2)>-1 
```

函数式，适用于*n 个*字符串，但很冗长：

```
[tax1, tax2].some(function(s) { return s.indexOf(text)>-1 }) 
```

作为原型：

```
String.prototype.foundIn = function() {
    var s=this; return Array.prototype.slice.call(arguments).some(function(m)
       {return m.indexOf(s)>-1});
}; 
```

用法：

```
$('.taxclass').text().foundIn(tax1, tax2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T16:35:15.037

关于什么：

```
f = function (x) { return $('.taxclass').text().indexOf(x) > -1; }
if (f(tax1) || f(tax2)) {} 
```

# python - blob_send save_as=True 从 db 转换为 ndb 后失败

> ID：15094296
> 
> 赞同：0
> 
> 时间：2013-02-26T16:30:58.733
> 
> 标签：python, google-app-engine, python-2.7, app-engine-ndb

我将[nicks 博客](http://blog.notdot.net/2010/03/Implementing-a-dropbox-service-with-the-Blobstore-API-Part-1)示例转换为 ndb 现在这条线失败了：

```
self.send_blob(file_info.blob, save_as=True) 
```

出现此错误：

```
ValueError: Expected BlobInfo value for blob_key_or_info. 
```

其余课程：

```
class FileDownloadHandler(blobstore_handlers.BlobstoreDownloadHandler):
   def get(self, file_id):
       file_info = models.FileInfo.get_by_id(long(file_id))

if not file_info or not file_info.blob:
  self.error(404)
  return

self.send_blob(file_info.blob)
#self.send_blob(file_info.blob, save_as=True) 
```

为什么结果发生了变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:01:16.140

在 NDB 中，您必须使用 ndb.BlobKeyProperty() 来保存 blobkey。

要使用它：

```
class FileInfo(ndb.Model):     
    ....
    blob_ref = ndb.BlobKeyProperty() 
....

file_info = models.FileInfo.get_by_id(... key_name ....)
self.send_blob(blobstore.BlobInfo.get(file_info.blob_ref), save_as=True) 
```

# php - 下拉列表 php

> ID：15094307
> 
> 赞同：0
> 
> 时间：2013-02-26T16:31:34.563
> 
> 标签：php, html, drop-down-menu

我在 php 中创建了一个个人资料页面，用户使用 html 下拉列表选择性别。在用户选择性别后，表单会在函数的帮助下发送数据并将数据保存到配置文件表中。我想要的只是下拉列表以保留用户上次选择的值。例如，假设用户制作了他的个人资料并选择了性别=男性。如果他想在下次访问个人资料页面时更新他的个人资料，则下拉列表将“男性”作为选定值。

这是我的代码：

```
<?php

if ( isset($_GET['success']) === true && empty($_GET['success'])===true ){
    echo'Profile Updated Sucessfuly';
}else{
    if( empty($_POST) === false  &&  empty($errors) === true ){
        $update_data_profile = array('gender' => $_POST['gender'],
            'zip' => $_POST['zip']);

        update_user_profile($session_user_id, $update_data_profile);

        header('Location: profile_update.php?success');                             
        exit();

    }else if ( empty($errors) === false ){
        echo output_errors($errors);
    }
    ?>

    Gender&nbsp;<select name="gender"  id="gender"> 
    <option value=" "> EMPTY </option> 
    <option value="Male">Male</option> 
    <option value="Female">Female</option> 
</select>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 

ZIP<input name="zip" type="text" size="15" placeholder="type your ZIP code"/> 
```

这是我的功能：

```
<?php
function update_user_profile($user_id, $update_data_profile){

    $result = mysql_query("select user_id from profile where user_id = $user_id limit 1");

    if(mysql_num_rows($result) === 1) {

        $update = array();

        array_walk($update_data_profile, 'array_sanitize');

        foreach($update_data_profile as $field => $data ){

            if(!empty($data)){
                $update[]='`' . $field . '` = \'' . $data . '\'';
            }
        }

        if(isset($update) && !empty($update)) {

            mysql_query(" UPDATE `profile` SET " . implode(',  ', $update) . " WHERE `user_id` = $user_id ") or die(mysql_error());
        }
    }
    else {

        $user_id = $update_data_profile['user_id'];

        if(count($update_data_profile)) {

            $columns = array();
            $values = array();

            foreach($update_data_profile as $field => $data) {
                $columns[] = $field;
                $values[] = $data;
            }
        }

        mysql_query(" INSERT INTO `profile` (" . implode(",", $columns) .") values ('" . implode("','", $values) . "')" ) or die (mysql_error());

    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:51:35.997

要从数据库中获取性别并默认显示在下拉列表中，您需要执行类似的操作。

```
 $con=mysqli_connect("example.com","peter","abc123","my_db");
  // Check connection
  if (mysqli_connect_errno())
  {
   echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

  $result = mysqli_query($con,"select * from profile where user_id = $user_id limit 1");

  while($row = mysqli_fetch_array($result))
  {
   $gender = $row['gender']; 
  }

  mysqli_close($con);

  if($gender == "Male"){
echo'
Gender&nbsp;<select name="gender"  id="gender"> 
<option value="Male" selected>Male</option> 
<option value="Female">Female</option> 
</select>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 
';
  } else {
 echo' Gender&nbsp;<select name="gender"  id="gender"> 
<option value="Male" >Male</option> 
<option value="Female" selected>Female</option> 
</select>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; ';
  } 
```

# css - CSS 背景 - 可以画一些东西吗？

> ID：15094309
> 
> 赞同：1
> 
> 时间：2013-02-26T16:31:36.707
> 
> 标签：css, background

我在可排序的 html 表中有一个标题行。我想在当前排序的列上显示向上箭头/向下箭头。我知道我可以为此使用背景图片，但该网站是第三方托管的，我无法将图片文件上传到它。仅编辑样式表。

无论如何通过CSS“绘制”一个箭头并将其粘贴在背景中？或者也许使用`after`and`content`来完成类似的事情？有`th`类来指示排序与排序。

[http://jsfiddle.net/fJ7Gn/](http://jsfiddle.net/fJ7Gn/)

```
<table>
    <thead>
        <th class="sortup">A</th> <!-- Draw an arrow via CSS? -->
        <th>B</th>
        <th>C</th>
    </thead>
    <tr>
        <td></td>
        <td></td>
        <td></td>        
    </tr>  
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:36:59.933

对于向上箭头：

```
th:after {
    content:"";
    border-style: solid;
    border-width: 0 8px 10px 8px;
    border-color: transparent transparent #007bff transparent;
} 
```

对于向下箭头：

```
th:after {
    content:"";
    border-style: solid;
    border-width: 10px 8px 0 8px;
    border-color: #007bff transparent transparent transparent;
} 
```

这是演示：http: [//jsfiddle.net/GLz2b/](http://jsfiddle.net/GLz2b/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:35:05.430

您可以使用 :before/:after 伪元素：

```
.sortup:after {
  content:"\25BC";
  float:right;
}
.sortdown:after {
  content:"\25B2";
  float:right;
} 
```

演示：http: [//jsfiddle.net/9KHkp/1/](http://jsfiddle.net/9KHkp/1/)

使用的字符：

*   [Unicode 字符“黑色上三角” (U+25B2)](http://www.fileformat.info/info/unicode/char/25b2/index.htm)
*   [Unicode 字符“黑色向下三角” (U+25BC)](http://www.fileformat.info/info/unicode/char/25bc/index.htm)

请随意使用`url(/path/to/image.png)`该`content`属性。

# asp.net-web-api - Web API/JsonMediaTypeFormatter 接受 Invalid JSON 并将 null 参数传递给操作

> ID：15094314
> 
> 赞同：5
> 
> 时间：2013-02-26T16:32:05.267
> 
> 标签：asp.net-web-api, json.net

我有以下模型：

```
public class Resource
{
    [DataMember(IsRequired = true)]
    [Required]
    public bool IsPublic { get; set; }

    [DataMember(IsRequired = true)]
    [Required]
    public ResourceKey ResourceKey { get; set; }
}

public class ResourceKey
{
    [StringLength(50, MinimumLength = 1)]
    [Required]
    public string SystemId { get; set; }

    [StringLength(50, MinimumLength = 1)]
    [Required]
    public string SystemDataIdType { get; set; }

    [StringLength(50, MinimumLength = 1)]
    [Required]
    public string SystemEntityType { get; set; }

    [StringLength(50, MinimumLength = 1)]
    [Required]
    public string SystemDataId { get; set; }
} 
```

我有以下动作方法签名：

```
public HttpResponseMessage PostResource(Resource resource) 
```

我在正文中发送以下带有 JSON 的请求（属性“IsPublic”的故意无效值）：

```
Request Method:POST
Host: localhost:63307
Connection: keep-alive
Content-Length: 477
User-Agent: Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22
Origin: chrome-extension://hgmloofddffdnphfgcellkdfbfbjeloo
Content-Type: application/json
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

{
    "IsPublic": invalidvalue,   
    "ResourceKey":{     
        "SystemId": "asdf",
        "SystemDataIdType": "int",
        "SystemDataId": "Lorem ipsum",
        "SystemEntityType":"EntityType"
    },    
} 
```

这是无效的 JSON - 通过 JSONLint 运行它，它会告诉您：

> 第 2 行的解析错误：
> 
> {“IsPublic”：无效值，
> 
> ..................^ 期待 'STRING'、'NUMBER'、'NULL'、'TRUE'、'FALSE'、'{'、'['

**ModelState.IsValid 属性为“真” - 为什么？？？**

此外，格式化程序似乎放弃了反序列化并简单地将“资源”参数作为空值传递给操作方法，而不是引发验证错误！

请注意，如果我为其他属性输入无效值，也会发生这种情况，例如替换：

```
"SystemId": notAnObjectOrLiteralOrArray 
```

但是，如果我为“SystemId”属性发送带有特殊***未定义***值的以下 JSON：

```
{
    "IsPublic": true,   
    ResourceKey:{       
        "SystemId": undefined,
        "SystemDataIdType": "int",
        "SystemDataId": "Lorem ipsum",
        "SystemEntityType":"EntityType"
    },    
} 
```

然后我得到以下合理的异常抛出：

```
Exception Type: Newtonsoft.Json.JsonReaderException
Message: "Error reading string. Unexpected token: Undefined. Path 'ResourceKey.SystemId', line 4, position 24."
Stack Trace: " at Newtonsoft.Json.JsonReader.ReadAsStringInternal() 
at Newtonsoft.Json.JsonTextReader.ReadAsString() 
at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, JsonContract contract, Boolean hasConverter) 
at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)" 
```

SO：Newtonsoft.Json 库中发生了什么导致部分 JSON 验证的结果？？？

PS：可以将 JSON 名称/值对发布到 Web API 而不用引号将名称括起来......

```
{
    IsPublic: true, 
    ResourceKey:{       
        SystemId: "123",
        SystemDataIdType: "int",
        SystemDataId: "Lorem ipsum",
        SystemEntityType:"EntityType"
    },    
} 
```

这也是无效的 JSON！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:58:19.643

好的 - 所以看起来部分问题是由我自己的行为引起的。

我在控制器上有两个过滤器：

1.  检查是否有任何 null 操作参数传递给操作方法，如果是，则返回“400 Bad Request”响应，规定参数不能为 null。
2.  一个 ModelState 检查过滤器，它检查 ModelState 的错误，如果发现任何错误，则在“400 Bad Request”响应中返回它们。

我犯的错误是将空参数过滤器放在模型状态检查过滤器之前。

在模型绑定之后，第一个 JSON 示例的序列化将正确失败，并将相关的序列化异常放入 ModelState 中，并且 action 参数将保持为空，这是正确的。

但是，由于第一个过滤器正在检查空参数，然后返回“404 Bad Request”响应，因此 ModelState 过滤器从未启动...

因此，似乎没有进行验证，而实际上确实发生了，但结果被忽略了！

**重要提示**：在模型绑定期间发生的序列化异常被放置在 ModelState KeyValue 对值的“异常”属性中...而不是在 ErrorMessage 属性中！

为了帮助其他人区分这种情况，这是我的 ModelValidationFilterAttribute：

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.ModelState.IsValid) return;

        // Return the validation errors in the response body.
        var errors = new Dictionary<string, IEnumerable<string>>();
        foreach (KeyValuePair<string, ModelState> keyValue in actionContext.ModelState)
        {
            var modelErrors = keyValue.Value.Errors.Where(e => e.ErrorMessage != string.Empty).Select(e => e.ErrorMessage).ToList();
            if (modelErrors.Count > 0)
                errors[keyValue.Key] = modelErrors;

            // Add details of any Serialization exceptions as well
            var modelExceptions = keyValue.Value.Errors.Where(e => e.Exception != null).Select(e => e.Exception.Message).ToList();
            if (modelExceptions.Count > 0)
                errors[keyValue.Key + "_exception"] = modelExceptions;
        }
        actionContext.Response =
            actionContext.Request.CreateResponse(HttpStatusCode.BadRequest, errors);
    }
} 
```

这是操作方法，过滤器的顺序正确：

```
 [ModelValidationFilter]
    [ActionArgNotNullFilter]
    public HttpResponseMessage PostResource(Resource resource) 
```

所以现在，下面的 JSON 结果是：

```
{
    "IsPublic": invalidvalue,   
    "ResourceKey":{     
        "SystemId": "asdf",
        "SystemDataIdType": "int",
        "SystemDataId": "Lorem ipsum",
        "SystemEntityType":"EntityType"
    },    
} 

{
    "resource.IsPublic_exception": [(2)
    "Unexpected character encountered while parsing value: i. Path 'IsPublic', line 2, position 21.",
    "Unexpected character encountered while parsing value: i. Path 'IsPublic', line 2, position 21."
    ]-
} 
```

然而，所有这些都不能解释为什么无效的 JSON 仍然被 JsonMediaTypeFormatter 解析，例如它不需要名称是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:58:23.350

解决方法比答案更多，但我能够使用[http://aspnetwebstack.codeplex.com/workitem/609](http://aspnetwebstack.codeplex.com/workitem/609)上发布的解决方法来解决这个问题。基本上，与其让 Post 方法的签名采用 Resource 实例，不如让它不采用任何参数，然后使用 JSon.Net（或 JsonMediaTypeFormatter 的新实例）进行反序列化。

```
public void Post()
{
    var json = Request.Content.ReadAsStringAsync().Result;
    var resource = Newtonsoft.Json.JsonConvert.DeserializeObject<Resource>(json);

    //Important world saving work going on here
} 
```

# c# - 从其他应用程序更改 dll 文件中的设置

> ID：15094323
> 
> 赞同：0
> 
> 时间：2013-02-26T16:32:24.553
> 
> 标签：c#, dll, visual-studio-2012, settings

我有一个 app.exe。我希望这个 app.exe 在特定驱动器上“抓取”一个 needsettingschanged.dll 文件（使用 C# VS2012 创建）并更改它的设置。我指的是 VS2012 ( C# ) 中我的项目 > 属性 > 设置中的设置。这完全是胡说八道还是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:39:33.600

您将不得不通过 XML 方法手动修改 Needsettingschanged.dll.config，因为您将无法通过 Needsettingschanged.Properties.Settings.Default.SettingName 从另一个 exe 访问设置。

# colors - 计算 HSL 主颜色值（红色、黄色、绿色、洋红色、蓝色和紫色）

> ID：15094328
> 
> 赞同：0
> 
> 时间：2013-02-26T16:32:33.993
> 
> 标签：colors, hsv, hsl

如何以数学方式计算[HSL](http://en.wikipedia.org/wiki/HSL_and_HSV)主色的值？
当然，我可以在程序中对它们进行硬编码，但我仍然对如何确定颜色是主要颜色还是组合颜色感兴趣。在 HSL 色环中必须有一个内接六边形，所以我需要它的角所在的角度。

# php - 从带有对象的数组中获取值

> ID：15094331
> 
> 赞同：0
> 
> 时间：2013-02-26T16:32:47.613
> 
> 标签：php, arrays, object

我有一个这样的数组：

```
Array (
  [0] => Mollie_Response Object (
     [@attributes] => Array ( [version] => v1 ) 
     [success] => true 
     [resultcode] => 10 
     [resultmessage] => Customer has the following payment methodes. 
     [services] => Mollie_Response Object ( 
        [ivr] => true 
        [minitix] => true 
        [psms] => true 
        [ideal] => true 
        [paysafecard] => false
     )
   )
 ) 
```

我想获得 [ideal] 的价值，但我不知道该怎么做。

我试过的是这样的：

```
$response = $simplexml;

foreach( $response as $value ) 
{
    echo 'Test: '.$value[0].'<br>';
} 
```

回应是这样的：

```
Test: true
Test: 10
Test: Customer has the following payment methodes.
Test: 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:40:19.747

那将是这样的：

```
$variable[0]->services->ideal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:43:02.330

我认为识别有助于检查字段：

```
Array ( [0] => 
  Mollie_Response Object ( 
      [@attributes] => Array ( [version] => v1 ) 
      [success] => true 
      [resultcode] => 10 
      [resultmessage] => Customer has the following payment methodes. 
      [services] => Mollie_Response Object ( 
          [ivr] => true 
          [minitix] => true 
          [psms] => true 
          [ideal] => true 
          [paysafecard] => false 
      )
  )
) 
```

所以现在很明显你需要使用`$response[0]->services->ideal`.

# ios - iOS，给应用添加框架，影响性能

> ID：15094335
> 
> 赞同：3
> 
> 时间：2013-02-26T16:32:55.063
> 
> 标签：ios, objective-c

在构建 iOS 应用程序时，确保原生框架的数量最少有多大意义？这意味着如果我想宣传 AVfoundation 或 coregraphics，我认为它会增加内存占用？这个假设正确吗？还是因为这些是苹果框架，它们不会增加内存占用？如果我添加第三方框架怎么办？这些会影响内存占用或应用程序大小吗？

我只是找不到关于这个问题的好文档。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:47:12.687

由于它们是 dylib，它们不会使您的应用程序变大。当然，当您使用它们时，它们会消耗 RAM。顺便说一下，静态库（第三方框架）会增加内存占用。由于您只能在 iOS 上创建自定义静态库。

# java - 如何让两个变量以十进制形式打印

> ID：15094341
> 
> 赞同：3
> 
> 时间：2013-02-26T16:33:09.587
> 
> 标签：java, decimal

我很新。提前为我的编码道歉。我需要打印一个显示年份的表格，然后是一个制表符，然后是下一行的值。该值必须为十进制形式。我一直在阅读、搜索和混合我的代码。我发现它适用于 1 个变量，但不是同一行中的两个。我尝试了 printf，我尝试了好的 ol 100 / 100.0，我要么得到错误，要么小数点永远不会到 2 位。我不需要它四舍五入，只是后面有 2 个空格。我显然在某个地方出错了。我将不胜感激任何帮助。导入 java.util.Scanner；

```
public class Investment1 {

public static double futureInvestmentValue(double investmentAmount, double monthlyInterestRate, int years){

double principal = 0.0;
double futureInvestmentValue = 0;
for (years = 1; years <=30; years++){
    //calculate futureInvestmentValue
    futureInvestmentValue = (investmentAmount * (Math.pow (1 + monthlyInterestRate, years * 12)));
    System.out.print(years + "\t" + futureInvestmentValue + "\n");

}//end for
    return futureInvestmentValue;
}//end futureInvestmentValue

public static void main(String[] args){

    Scanner input = new Scanner (System.in);

    //obtain Investment amount
    System.out.print("Enter Investment amount: ");
    double investmentAmount = input.nextDouble();

    //obtain monthly interest rate in percentage
    System.out.print("Enter annual interest rate in percentage: ");
    double annualInterestRate = input.nextDouble();
    double monthlyInterestRate = (annualInterestRate / 1200);

int years = 30;

System.out.println("Years\t" + "Future Value");
System.out.print(years + "\t");
System.out.print(years + "\t" + ((int)(futureInvestmentValue(investmentAmount, monthlyInterestRate, years))) + "\n");

}//end main
}//end Investment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:39:41.553

您可以使用[**system.out.format()**](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)：

```
System.out.format("%d \t %.2f", years, futureInvestmentValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:36:16.160

您应该阅读有关格式字符串的信息，这是一个简单的用法示例：

```
System.out.println(String.format("%d %.2f",myint,myfloat)); 
```

`myint``%d`由于在格式字符串中使用了，将打印为整数（即​​使它是浮点值） 。由于格式字符串中
`myfloat`的部分，将打印为小数点后 2 位的十进制数。`%f.2`

# android - TimePicker Android 自定义时间

> ID：15094342
> 
> 赞同：1
> 
> 时间：2013-02-26T16:33:12.133
> 
> 标签：android, timepicker

有没有办法在 Android 中的 TimePicker 小部件上设置更大的值？（大于 24）我想将它用于时钟时间以外的其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:32:08.057

如果您的最低 SDK 为 11 或更高版本（Honeycomb），那么您可以简单地使用[NumberPicker 类](http://developer.android.com/reference/android/widget/NumberPicker.html)。

如果您使用的最低 SDK 较低，请尝试使用[此模拟 NumberPicker 的库项目](https://github.com/mrn/numberpicker)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:36:42.047

尝试覆盖 TimePicker 类，然后我认为您可以在自定义中执行此操作`TimePicker`，

# ios - 为什么.m 文件中还有另一个@interface？

> ID：15094344
> 
> 赞同：0
> 
> 时间：2013-02-26T16:33:14.333
> 
> 标签：ios, objective-c, xcode

有时我会看到另一个这样的接口声明：

```
@interface MyCode ()

@end 
```

这不是复制 .h 文件中的那个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:36:46.750

这是 Xcode 提供的一个类别，用于声明只能在此实现文件中使用的私有属性和方法。

您不会总是希望将您的类中的所有方法都公开给外部世界，而是将它们声明在这个私有类别中（我总是在这些私有方法前加上下划线`_`(私有方法，但这完全是可选的）。

例如，这是一个我不想暴露的私有初始化方法：

```
@interface MyClass ()

- (BOOL)_init;

@end

@implementation MyClass

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self != nil)
    {
        if (![self _init])
            self = nil;
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:code];
    if (self != nil)
    {
        if (![self _init])
            self = nil;
    }
    return self;
}

- (BOOL)_init
{
     self.something = whatnot;
     self.thingA = self.thingB;
     return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:36:26.423

当你想声明私有 ivars/properties/methods 时使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:36:53.943

在 .h 文件中，您有公共方法和属性，在 .m 文件中，您有私有方法和属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:37:20.380

这个概念是，如果您将 .h 限制为类的公共接口，然后将私有实现细节放在此类扩展中，您可以使您的项目更加简洁。*请参阅Programming with Objective-C*指南中关于[私有类扩展](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW3)的讨论。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T16:38:08.327

这个@Interface 允许你声明私有的变量、属性和方法。因此，您在此处声明的任何内容都无法从此类外部访问。通常，您希望将所有 ivars、属性和方法默认声明为私有（在此 @interface() 中），除非类的实例需要访问它们。

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T16:38:12.267

这是一个类扩展。[阅读更多](http://www.friday.com/bbum/2009/09/11/class-extensions-explained/)

通常用于声明私有 ivars/properties/methods。*

# python - 导入文本文件中 numpy 列表的顺序

> ID：15094346
> 
> 赞同：0
> 
> 时间：2013-02-26T16:33:18.203
> 
> 标签：python, arrays, sorting, numpy, text-files

[作为我上一篇文章（数据排序）](https://stackoverflow.com/questions/15003630/order-of-files-from-a-folder-as-read-from-python)的后续，我想找出为什么我的 numpy 数组没有“添加”从文件夹中读取的新数据。上一篇文章解决了我以正确顺序读取文件的问题，但是当我从每个文件中读取数据并将它们添加到一个 numpy 数组中时 - 生成的数组没有指定顺序的数据。例如读取文件：

```
0129A.txt

0201A.txt

0210A.txt

0215A.txt 
```

在我的文件夹中从代码中正确读取（参见下面的列表），但最终产品 my_array（在代码中看到）没有按正确顺序排列每个文件的内容。这是我的示例代码：

```
datadirectory = '/media/DATA'
os.chdir(datadirectory)
listing = sorted(os.listdir(datadirectory))
my_array = np.zeros(shape=(0,3))

for infile in glob.glob('*.txt'):
    dataset = open(infile).readlines()
    data = np.genfromtxt(dataset, usecols=(0,1,2))
    lta = data
    my_array = np.vstack(my_array, lta) 
```

我希望它读取的每个文件的代码创建 3 列数组（作为文本文件中的数据），然后移动到下一个文件（如清单中所定义）并以相同的顺序添加数据 - 但它确实不是。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:46:11.430

那不可能是你真正的代码——有一些明显的错别字（`glob.blog`例如）。请始终复制和粘贴。

但是假设您正在运行的代码使用`glob.glob`，那么您可能需要遍历结果的排序版本以获得您期望的顺序：

```
for infile in sorted(glob.glob("*.txt")):
    # do stuff here 
```

这将按字典顺序排序（按“字母”顺序，因此“10”<“2”）；`sorted`如果你想要别的东西，你可以传递一个关键函数。

示范：

```
~/coding/fill$ more *.txt
::::::::::::::
0129A.txt
::::::::::::::
1 2 3
1 2 3
1 2 3
::::::::::::::
0201A.txt
::::::::::::::
4 5 6
4 5 6
4 5 6

::::::::::::::
0210A.txt
::::::::::::::
7 8 9
7 8 9

::::::::::::::
0215A.txt
::::::::::::::
10 11 12
10 11 12
10 11 12 
```

和

```
import os, glob
import numpy as np

datadirectory = '.'
os.chdir(datadirectory)
listing = sorted(os.listdir(datadirectory))
my_array = np.zeros(shape=(0,3))

for infile in sorted(glob.glob('*.txt')):
    dataset = open(infile).readlines()
    data = np.genfromtxt(dataset, usecols=(0,1,2))
    lta = data
    my_array = np.vstack([my_array, lta])

print my_array 
```

给我

```
[[  1\.   2\.   3.]
 [  1\.   2\.   3.]
 [  1\.   2\.   3.]
 [  4\.   5\.   6.]
 [  4\.   5\.   6.]
 [  4\.   5\.   6.]
 [  7\.   8\.   9.]
 [  7\.   8\.   9.]
 [ 10\.  11\.  12.]
 [ 10\.  11\.  12.]
 [ 10\.  11\.  12.]] 
```

# javascript - Threejs css3 渲染器在 Android 4.0+ 上导致深度问题

> ID：15094347
> 
> 赞同：1
> 
> 时间：2013-02-26T16:33:17.987
> 
> 标签：javascript, css, three.js

我正在创建一个旨在在手机上运行的相当简单的 3D 环境。为此，我使用了 three.js 和 CSS3 渲染器。我对所有元素使用 jpg，然后将它们添加到 3D 对象中。这是一个例子：

```
var alley1LeftWall = document.createElement('div');
var alley1LeftImg = document.createElement('img');

alley1LeftWall.style.background = 'rgba(0,0,0,1)';
alley1LeftWall.id = 'alley1LeftWall';
alley1LeftWall.style.width = '1000px';
alley1LeftWall.style.height = '200px';

alley1LeftImg.src = 'img/alley1_left_wall.jpg';

alley1LeftWall.appendChild(alley1LeftImg);

var alley1LeftWall3d = new THREE.CSS3DObject(alley1LeftWall);
alley1LeftWall3d.position.x = -50;
alley1LeftWall3d.position.y = 0;
alley1LeftWall3d.position.z = -700;
alley1LeftWall3d.rotation.x = 0;
alley1LeftWall3d.rotation.y = (Math.PI/180)*90;
alley1LeftWall3d.rotation.z = 0; 
```

将 3D 环境想象成经典的德军总部游戏。

体验在 iPhone5 上运行完美，但是当我在 Android 设备上进行测试时，我遇到了一些深度问题。在动画过程中，远处的墙壁会从前景中弹出并闪烁进出深度。

在我研究这个问题的过程中，我真正能发现的是 Android 确实存在一些 z-index 问题，但我不确定这是这里的问题，因为threejs 使用 css3 3D 来获得深度。

我在 threejs IRC 聊天室问了这个问题，但没有真正得到任何结果，可以理解的是，大多数人对 WebGL 而不是 CSS3 渲染器感兴趣。

以前有人经历过吗？这是 Android 手机的特定限制吗？

谢谢。

编辑：移动设备上的 Chrome v18 在 CSS3D 翻译方面存在重大问题。这似乎是一个已知的错误， http: [//krpano.com/docu/html5/#androidchrome](http://krpano.com/docu/html5/#androidchrome)。

仍在为 Android 上的标准浏览器苦苦挣扎。仍然非常有问题，但没有 Chrome v18 那样糟糕。

# sql - Extracting Data from a VERY old unix machine

> ID：15094348
> 
> 赞同：4
> 
> 时间：2013-02-26T16:33:19.423
> 
> 标签：sql, database, unix, odbc

Firstly apologies if this question seems like a wall of text, I can't think of a way to format it.

I have a machine with valuable data on(circa 1995), the machine is running unix (SCO OpenServer 6) with some sort of database stored on it.

The data is normally accessed via a software package of which the license has expired and the developers are no longer trading.

The software package connects to the machine via telnet to retrieve data and modify data (the telnet connection no longer functions due to the license being changed).

I can access the machine via an ODBC driver (SeaODBC.dll) over a network, this was how I was planning to extract the data but so far I have retrieved 300,000 rows in just over 24 hours, in total I estimate there will be around 50,000,000 rows total so at current speed it will take 6 months!

I need either a quicker way to extract the data from the machine via ODBC or a way to extract the entire DB locally on the machine to an external drive/network drive or other external source.

I've played around with the unix interface and the only large files I can find are in a massive matrix of single character folder (eg A\G\data.dat, A\H\Data.dat ect).

Does anyone know how to find out the installed DB systems on the machine? Hopefully it is a standard and I'll be able to find a way to export everything into a nicely formatted file.

**Edit**

Digging around the file system I have found a folder under `root > L` which contains lots of single lettered folders, each single lettered folder contains more single letter folders.

There are also files which are named after the table I need (eg "ooi.r") which have the following format:

```
<Id>
[]
    l for ooi_lno, lc for ooi_lcno, s for ooi_invno, id for ooi_indate
    require l="AB"
    require ls="SO"
    require id=25/04/1998
    {<id>} is s
    sort increasing Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:46:17.270

I do not recognize those kinds of filenames `A\G\data.dat` and so on (filenames with backslashes in them???) and it's likely to be a proprietary format so I wouldn't expect much from that avenue. You can try running `file` on these to see if they are in any recognized format just to see...

I would suggest improving the speed of data extraction over ODBC by virtualizing the system. A modern computer will have faster memory, faster disks, and a faster CPU and may be able to extract the data a lot more quickly. You will have to extract a disk image from the old system in order to virtualize it, but hopefully a single sequential pass at reading everything off its disk won't be too slow.

I don't know what the architecture of this system is, but I guess it is x86, which means it might be not too hard to virtualize (depending on how well the SCO OpenServer 6 OS agrees with the virtualization). You will have to use a hypervisor that supports full virtualization (not paravirtualization).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:34:49.607

I finally solved the problem, running a query using another tool (not through MS Access or MS Excel) worked massively faster, ended up using DaFT (Database Fishing Tool) to `SELECT INTO` a text file. Processed all 50 million rows in a few hours.

It seems the dll driver I was using doesn't work well with any MS products.

# javascript - 在进行 Javascript 密集型工作时，将所有样式保留在 CSS 文件中有什么好处？

> ID：15094349
> 
> 赞同：1
> 
> 时间：2013-02-26T16:33:21.400
> 
> 标签：javascript, css

似乎有一种信念，即所有样式都需要保存在 CSS 文件中。如果我在做纯粹的 JavaScript 工作，这对我来说没有意义。如果我创建一个名为“StatisticSummaryPanel”的 JavaScript 对象，那么将 CSS 样式保留在 JavaScript 对象中肯定会更好。这样我只需要维护一个文件而不是两个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:37:47.587

将 CSS、JavaScript 和 HTML 放在单独的文件中通常被认为是更好的做法，因为这样可以更轻松地为您自己以及未来可能出现并处理您的文件的开发人员定位、理解和调试。

在您的 JavaScript 文件中，它只是一种更简洁的方法，可以简单地引用将其属性存储在 CSS 文件中的类或 ID。

如果您在多个 JavScript 对象中重用一个类，并且您需要更改该类的属性，那么您只需更新 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:40:13.723

如果您需要在不同的页面/javascript 文件中重用相同的样式，它会有所帮助。这样，如果您的样式发生更改，则无需更改使用它的所有文件。

此外，它可以被缓存并使您的页面更快。

并且来维护更多文件，这是基于文件大小的调用。如果它太大，单个文件的维护成本很高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:40:18.633

有几个问题：

1\. 代码易读性

与直接用自己的语法编写相比，用 Javascript 编写 CSS 或 HTML 很冗长，而且难以阅读和编辑。

2\. 混淆行为和逻辑

实现基本功能需要最少的样式，但不应混淆外观和逻辑。弄清楚如何以及在何处将有关外观的代码集成到有关行为的代码中是一项无意义的任务。如果您的行为脚本中没有深奥的风格要求，您的代码将更加清晰。

3\. 检索

人们不希望在 Javascript 中找到 CSS。当有人想尝试改变 的外观时`StatisticSummaryPanel`，他们会在 CSS 中寻找它。他们期望找到其风格定义的最后一个地方是 JS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:41:15.360

关注点分离：在这种情况下，表示（各种效果如何出现和呈现）和行为（所述效果的原因）的分离。根据我们的经验，将两者分开可以让我们为前者雇佣优秀的平面设计师，为后者雇佣优秀的程序员。

对于一个小项目，这可能无关紧要，因为您是唯一负责代码的人。但是，如果您计划扩展到一个团队，则值得考虑不同成员的专业化程度，以及如何最好地协调队友之间的变化。

# ruby - 使用 net-ldap 进行 Active Directory“无上下文”登录

> ID：15094354
> 
> 赞同：1
> 
> 时间：2013-02-26T16:33:33.837
> 
> 标签：ruby, ruby-on-rails-3.2, netldap

我正在编写 Rails 3.2 应用程序，作为身份验证，我想使用 Net::LDAP 连接到公司 MS ADDS。我可以使用 Net::LDAP 对用户进行身份验证。问题是我的用户存在于不同的 OU 中，所以我想做一个“无上下文”登录。不确定它在微软世界中是否被称为无上下文。我来自 Novell 背景。

我的意思是不必提供 FQDN，只需提供 sAMAccountName 和密码。:base 选项似乎将我锁定在该上下文中，并希望用户仅存在于该 OU 中。

我必须先与用户绑定（FQDN）然后进行过滤搜索还是什么？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:50:08.940

好的......我在网上找到了我的答案。以为如果对某人有帮助，我会与大家分享答案。从 2008 年发现 Ernie Miller 的这篇精彩的[博客文章](http://erniemiller.org/2008/04/04/simplified-active-directory-authentication/)，它似乎仍然是有效的信息。如果需要，请检查一下。

最好的问候//罗杰

# bash - Bash 有条件地合并 2 个文件

> ID：15094361
> 
> 赞同：0
> 
> 时间：2013-02-26T16:33:50.747
> 
> 标签：bash, nested-loops, cat

我正在尝试将 csv 的第二个字段与 diff 文件中的所有 id 合并。code.csv 有 2 个字段：ID、描述。我不断收到第二个错误`cat`。

```
cat: codes.cvs: No such file or directory. 
```

该文件确实存在，我正在从与 codes.csv 相同的目录运行脚本。

```
for i in `cat diff.txt`;
do
 for j in `cat codes.cvs`;
 do
  id = `sed  "$j"`;
  desc = `sed "?=$j"`;
  if [$i == $id]
  then
    echo "$id $desc"
  fi
 done;
done; 
```

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:43:28.240

看起来像一个简单的错字。`codes.cvs`应该`codes.csv`像你所说的那样，名字在其他地方。

```
for i in `cat diff.txt`;
do
 for j in `cat codes.csv`;
 do
  id=`sed  "$j"`;
  desc=`sed "?=$j"`;
  if [ $i == $id ]
  then
    echo "$id $desc"
  fi
 done;
done; 
```

# git - 删除名为“origin/branchName”的本地分支

> ID：15094367
> 
> 赞同：0
> 
> 时间：2013-02-26T16:34:05.257
> 
> 标签：git

我在我的服务器上安装了 git，为了拉出 master 分支，我做到了：`git checkout origin/branchname`这导致我的服务器 repo 上有一个名为“origin/branchname”的分支。之后，我学会了获取分支的正确方法（使用 fetch 和 pull），但我的服务器 repo 中仍然有 origin/branchname。我有两个问题：

1.  那是什么？它与我使用 pull 创建的“正常”分支名称有何不同？

2.  在我的服务器存储库中删除源/分支名称是否安全？中央存储库有任何风险吗？我怀疑会是这种情况，但我想在做之前检查一下。

**澄清：**我不想更改中央存储库中的任何内容（我们使用 bitbucket）。我只想删除我的一个发行版上的源/分支名称，并破坏任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:04:22.243

`<remote name>/<branch name>``<branch name>`表示远程存储库上分支的最后已知状态`<remote name>`。每次您从远程存储库中获取新的分支时，它都会移动它的位置`<branch name>`。它不是一个分支，它更像是显示远程存储库状态的动态标签。
它很有用，所以不要删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:43:08.700

如果您将其视为“唯一”分支，您也可以看到您的“新”分支。我会说，删除它是可以的“ `git push :[branch_to_delete]`”

您可以通过这种方式在本地删除它：`git branch -d [branch_to_delete]`该分支仍将在“云”中可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:50:01.783

是的，您可以安全地删除分支。

如果您安装了 Git v1.7.0，您可以使用以下命令删除远程分支：

git push origin --delete 'branchName'

它的语法比：

git push origin :'branchName'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T00:35:13.937

`origin/branchName`是本地分支的有效名称。如果你运行`git branch`并看到它列在那里，这意味着它是一个本地分支，并且可以安全地删除它（不会弄乱任何远程分支）：

```
git branch -d origin/branchName 
```

如果你有一个像这样命名的分支，并且你碰巧有一个远程分支会解析为相同的名称，当你使用这个引用运行 git 命令时，你会收到警告：

```
git show origin/branchName
warning: refname 'origin/branchName' is ambiguous. 
```

# html - 在 td 中对齐 div

> ID：15094371
> 
> 赞同：1
> 
> 时间：2013-02-26T16:34:12.480
> 
> 标签：html, css

我想通过 CSS 对齐 td 中的以下 div 元素。我有：

```
<table>
<tr>
<td style="width:300px;height:300px">

<div id="div1">hor+ver center alignment</div>
<div id="div2">top right</div>
<div id="div3">bottom left</div>

</td>
</tr>
</table> 
```

你能帮我准备一个样式表吗？我已经尝试过内联块显示，但没有一个好的结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:49:21.457

好的，这可能有点矫枉过正，但它是：首先我建议你用另一个包装它们`div`只是为了有更多的控制权

```
<table>
<tr>
<td style="width:300px;height:300px">
<div class="wrapper">
<div id="div1">hor+ver center alignment</div>
<div id="div2">top right</div>
<div id="div3">bottom left</div>
</div>
</td>
</tr>
</table> 
```

然后是样式：

```
.wrapper {
    position: relative;
    height:100%;
    text-align: center;
}
.wrapper:after {
    height:100%;
    content:'';
    display: inline-block;
    vertical-align: middle;
}
#div1,#div2,#div3 {
    display: inline-block;
}
#div1 {
    vertical-align: middle;
}
#div2 {
    position:absolute;
    top: 0;
    right: 0;
}
#div3 {
    position:absolute;
    bottom: 0;
    left: 0;
} 
```

`vertical-align:middle`我个人喜欢并经常使用的技巧，以及一些绝对定位。

这是演示[http://jsfiddle.net/pavloschris/vVHvd/](http://jsfiddle.net/pavloschris/vVHvd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:37:44.930

喜欢这个**[jsFiddle 示例](http://jsfiddle.net/j08691/3hhSP/)**吗？

```
#div1 {
    text-align:center;
}
#div2 {
    position:absolute;
    top:0;
    right:0;
}
#div3 {
    position:absolute;
    bottom:0;
    left:0;
}
td, table {
    border:1px solid #999;
}
td {
    position:relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:42:10.183

如果不知道第一个 div 的宽度，就不可能动态设置水平对齐。它应该自动垂直居中。

对于其余部分，您可以使用`absolute`定位，如下所示：

```
<td style="width:300px;height:300px;position: relative;">

<div id="div1">hor+ver center alignment</div>
<div id="div2" style="position: absolute;top: 0px;right: 0px;">top right</div>
<div id="div3" style="position: absolute;bottom: 0px;left: 0px;">bottom left</div>

</td> 
```

# asp.net-mvc-3 - 淘汰赛在 MVC4 项目中不起作用

> ID：15094373
> 
> 赞同：0
> 
> 时间：2013-02-26T16:34:13.977
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, knockout.js

我的 Index.cshtml 文件中有以下内容（来自淘汰网站）：

```
<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>
<h2>Hello, <span data-bind="text: fullName"> </span>!</h2>

<script type="text/javascript">
    // Here's my data model
    var ViewModel = function (first, last) {
        this.firstName = ko.observable(first);
        this.lastName = ko.observable(last);

        this.fullName = ko.computed(function () {
            // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
            return this.firstName() + " " + this.lastName();
        }, this);
    };

    ko.applyBindings(new ViewModel("Planet", "Earth")); // This makes Knockout get to work
</script> 
```

我的布局有这一行：

```
@Scripts.Render("~/bundles/knockout") 
```

在捆绑器配置中正确配置：

```
bundles.Add(new ScriptBundle("~/bundles/knockout").Include(
                "~/Scripts/Libraries/knockout-2.2.1.js")); 
```

Chrome 看到该文件，而 VS 正在给我智能感知，所以我不确定发生了什么。任何淘汰功能都不起作用。

我在 MVC 之外进行了测试（仅使用 html/css），它运行良好。知道发生了什么吗？

编辑：我尝试使用没有捆绑器的直接引用，但它仍然不起作用：

```
<script type="text/javascript" src="~/Scripts/Libraries/knockout-2.2.1.js"></script> 
```

我收到来自 chrome 的错误：

```
Uncaught ReferenceError: ko is not defined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:47:02.667

你能从 chrome 或 firebug 发布一些 JS 控制台错误吗？看起来像是淘汰赛中缺少的参考。

编辑：将您的脚本放在其视图的末尾！另一件事，敲除的引用必须保持在 jquery 的引用之下，因为它是依赖的。

编辑：注册淘汰赛

```
bundles.Add(new ScriptBundle("~/bundles/knockout").Include(
                    "~/Scripts/knockout-{version}.js")); 
```

在你的视图中渲染它

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/knockout") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:57:57.383

将您的 javascript 代码包含在 JS 文件中并在敲除后呈现它

像这样：

```
 @Scripts.Render("~/bundles/knockout")
 @Scripts.Render("~/bundles/MYSCRIPTS") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T19:09:23.937

我通过删除 Index.cshtml 文件末尾的脚本行来解决我的问题：

```
<script src="~/Scripts/ConfigGroup.js"></script> 
```

并将其替换为：

```
@section Scripts {
    @Scripts.Render("~/Scripts/ConfigGroup.js")
} 
```

我猜脚本部分的加载时间与包含的时间不同。

# android - iOS WebView 表单助手 - Android 模拟？

> ID：15094378
> 
> 赞同：0
> 
> 时间：2013-02-26T16:34:22.910
> 
> 标签：android, webview

在我的 iPhone 上，当虚拟键盘弹出表单字段时，键盘顶部会显示一些导航按钮，它们是：“上一个”、“下一个”、“完成”。（有时是“自动填充”）。

这显然是 Mobile Safari “表单助手”，它也出现在我的应用程序的 WebView 上。

Android WebView 有类似的东西吗？有没有第三方解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:39:15.317

我不认为Android本身支持这个。

您可能需要实现自己的导航，这可能是您网页的一部分最简单的方法。

# google-app-engine - mvn-gae-plugin 突然坏了

> ID：15094381
> 
> 赞同：5
> 
> 时间：2013-02-26T16:34:23.837
> 
> 标签：google-app-engine, maven, maven-gae-plugin

我不确定发生了什么，但我没有对我的 pom 进行更改，并且只进行了全新安装，但现在运行我的应用程序时`mvn gae:run`出现以下错误：

`[ERROR] Failed to execute goal net.kindleit:maven-gae-plugin:0.9.4:run (default-cli) on project geoip-service: Execution default-cli of goal net.kindleit:maven-gae-plugin:0.9.4:run failed: Plugin net.kindleit:maven-gae-plugin:0.9.4 or one of its dependencies could not be resolved: Failed to collect dependencies for net.kindleit:maven-gae-plugin:jar:0.9.4 (): Failed to read artifact descriptor for net.kindleit:gae-runtime:pom:1.7.5: Could not find artifact net.kindleit:maven-gae-parent:pom:0.9.6-SNAPSHOT in genius (our_own_repo_here)`

我正在使用 1.7.2 版本的 sdk，所以我不确定 1.7.5 的来源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:39:33.123

暂时，你可以使用这个丑陋的 hack

```
<properties>
    <gae.version>1.7.5</gae.version>
    <gae-runtime.version>1.7.5.1</gae-runtime.version>
</properties>

    <plugin>
      <groupId>net.kindleit</groupId>
      <artifactId>maven-gae-plugin</artifactId>
      <version>${maven.gae.plugin.version}</version>
      <configuration>
            <unpackVersion>${gae.version}</unpackVersion>
            <serverId>appengine.google.com</serverId>
            <appDir>${webappDirectory}</appDir>
        </configuration>
        <dependencies>
            <dependency>
                <groupId>net.kindleit</groupId>
                <artifactId>gae-runtime</artifactId>
                <version>${gae-runtime.version}</version>
                <type>pom</type>
            </dependency>
        </dependencies>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:13:19.637

我仍然不知道问题是什么，即谁正在使用 1.7.5 版的 gae-runtime 但这是对我有用的解决方法。在 profile/build/plugins/plugin 等中的 maven-gae-plugin 下添加以下内容。

```
<dependencies>
    <dependency>
        <groupId>net.kindleit</groupId>
        <artifactId>gae-runtime</artifactId>
        <version>1.7.2</version>
        <type>pom</type>
    </dependency>
</dependencies> 
```

# jquery - 刷新验证码图像，这是来自 servlet 的响应

> ID：15094383
> 
> 赞同：0
> 
> 时间：2013-02-26T16:34:46.487
> 
> 标签：jquery, jsp, servlets

我正在使用 servlet 生成验证码图像。我的代码在谷歌浏览器上运行良好，但验证码没有在 FF/IE 中重新加载。

代码是

公共类 CaptchaServlet 扩展 HttpServlet {

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

response.setContentType("image/jpg");
int iTotalChars = 6;
int iHeight = 40;
int iWidth = 150;
Font fntStyle1 = new Font("Arial", Font.BOLD, 30);
//Font fntStyle2 = new Font("Verdana", Font.BOLD, 20);
Random randChars = new Random();
String sImageCode = (Long.toString(Math.abs(randChars.nextLong()), 36)).substring(0, iTotalChars);
BufferedImage biImage = new BufferedImage(iWidth, iHeight, BufferedImage.TYPE_INT_RGB);
Graphics2D g2dImage = (Graphics2D) biImage.getGraphics();
int iCircle = 15;
for (int i = 0; i < iCircle; i++) {
    g2dImage.setColor(new Color(randChars.nextInt(255), randChars.nextInt(255), randChars.nextInt(255)));
    int iRadius = (int) (Math.random() * iHeight / 2.0);
    int iX = (int) (Math.random() * iWidth - iRadius);
    int iY = (int) (Math.random() * iHeight - iRadius);
}
g2dImage.setFont(fntStyle1);
for (int i = 0; i < iTotalChars; i++) {
    g2dImage.setColor(new Color(randChars.nextInt(255), randChars.nextInt(255), randChars.nextInt(255)));
    if (i % 2 == 0) {
        g2dImage.drawString(sImageCode.substring(i, i + 1), 25 * i, 24);
    } else {
        g2dImage.drawString(sImageCode.substring(i, i + 1), 25 * i, 35);
    }
}

OutputStream osImage = response.getOutputStream();
ImageIO.write(biImage, "jpeg", osImage);

g2dImage.dispose();

HttpSession session = request.getSession();
session.setAttribute("dns_security_code", sImageCode);

}

protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

} 
```

web.xml 代码

```
 <servlet>
    <servlet-name>CaptchaServlet</servlet-name>
    <servlet-class>com.rush49.web.controllers.CaptchaServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>CaptchaServlet</servlet-name>
    <url-pattern>/captcha-image.jpg</url-pattern>
</servlet-mapping> 
```

jsp代码

```
<div class="captcha" align="center">
 <table>

<tr>
     <td>
  <span><img alt="" id="captchaImg" src="/captcha-image.jpg" width="150"/></span>
       <span><a id="captchaRef">
   <img id="refresh" src="../images/refresh.png" width="50" height="50"></img>
       </a></span>
    </td>

</tr>
<tr>
<td>Enter the above code</td>
</tr>
<tr>
 <td><input id="captchaText" name="captchaText" class="register_form_input_box" type="text" value=""/></td>  
     </tr>
</table> 
```

jquery 重新加载验证码。它在 chrome 中运行良好，但在 FF/IE 中运行良好

```
 $(document).ready(function() {
    $("#captchaRef").click(function() {
       document.getElementById('captchaImg').src="/captcha-image.jpg";
     });
 }); 
```

请提出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:37:40.653

这可能是一个缓存问题，但也许以下方法也有效：

```
$(document).ready(function() {
    $("#captchaRef").click(function() {
       $('#captchaImg').attr('src', '').attr('src', '/captcha-image.jpg');
     });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:04:14.253

正如亚历克斯所说，这可能是浏览器缓存问题

将此添加到您的页面标题标签

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

# c# - C# 字典 - 自定义对象

> ID：15094384
> 
> 赞同：1
> 
> 时间：2013-02-26T16:34:50.117
> 
> 标签：c#, collections, dictionary

我以前从未使用过字典，我只是想了解更多关于它们的信息。

当谈到自定义对象时，我有点迷茫。是否可以使用像下面的类这样的自定义对象作为键，而不是值？

```
class Car
    {
        public Car(int id, string model)
        {
            ID = id;
            Model = model;
        }

        public int ID { get; private set; }
        public string Model { get; private set; }
    } 
```

如果你在哪里创建字典，像这样：-

```
 Dictionary<Car, bool> Cars = new Dictionary<Car, bool>(); 
```

在搜索字典内容时，您将如何使用 Car 对象作为键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:41:17.330

是的，这很有可能，但有一个非常重要的警告需要注意。

字典使用**默认相等比较**检查键。对于自定义类对象，这意味着“这是对*同一对象*的引用”。不是“这是一个具有相同数据的对象吗”。

例如：

```
var car1 = new Car(1, "Avalon");
var car2 = car1;
var car3 = new Car(1, "Avalon");

Cars.Add(car1, true);
Console.WriteLine(Cars[car2]); // writes "True";
Console.WriteLine(Cars[car3]); // throws a KeyNotFoundException 
```

您可以通过覆盖`GetHashValue()`和`Equals()`为您的班级解决此问题。见[这里](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overridden)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:41:59.473

您需要为类型实现`Equals()`和。由于 Car 是一种引用类型，您可能会在字典中放置相同的差异实例（两个 Car 实例的属性匹配，但它们指向不同的对象），甚至不知道。`GetHashCode()``Car``Car``Id`

你不希望这成为可能

```
var carMap = new Dictionary<Car, string>();

var carOne = new Car { Id = 1 };
var careTwo = new Car { Id = 1 };

carMap[carOne] = "one";

// you want this line to fail since a Car with this Id is already present
carMap[carTwo] = "two"; 
```

因为`GetHasCode()`，你可以返回`Id.GetHashCode()`

对于`Equals()`，只需进行标准样板检查，例如检查类型是否相同等。

[此链接](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overridden)提供了有关您应该实施的原因的更多详细信息`GetHashCode()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T16:41:02.100

要将对象用作 a 的键，`Dictionary`重要的是它具有实现`Equals`并`GetHashCode`正确定义“平等”对您的对象意味着什么。

这两种方法的默认实现通常是不合适的，因为默认情况下它们只会比较引用，这意味着具有相同值的两个不同对象不会“相等”，而您可能希望它们相同。

一旦你对这些方法有了合理的实现，你就可以使用字典索引器来放置一个`Car`实例，并获取与它关联的布尔值`Car`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T16:44:17.847

来自 MSDN：（[http://msdn.microsoft.com/en-us/library/xfhwa508](http://msdn.microsoft.com/en-us/library/xfhwa508(v=vs.80).aspx) (v=vs.80).aspx ）

`If type TKey implements the System.IEquatable generic interface, the default equality comparer uses that implementation.`

因此，在您的情况下，您需要实施`IEquatable<Car>`，例如：

```
 class Car : IEquatable<Car>
    {
        public Car(int id, string model)
        {
            ID = id;
            Model = model;
        }

        public int ID { get; private set; }
        public string Model { get; private set; }

        public bool Equals(Car other)
        {
            return this.ID == other.ID;
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T16:48:21.917

在您的情况下，您尝试将自定义对象用作字典中的键，在字典数据结构中，每个键都是唯一的，因此您需要在数据结构中提供一种方法来区分一个对象与另一个对象。

这是通过覆盖 GetHashCode() 方法来完成的，实现 IEquatable 是可选的，但它使您尝试做的事情变得清晰。

```
class Car : IEquatable<Car>
    {
        public Car(int id, string model)
        {
            ID = id;
            Model = model;
        }

        public int ID { get; private set; }
        public string Model { get; private set; }

        public bool Equals(Car other)
        {
            return !ReferenceEquals(null, other) && ID == other.ID;
        }
// This is a must if you like to correctly use your object as a key in dictionary
        public override int GetHashCode()
        {
            return ID.GetHashCode();
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T16:43:34.117

```
var car1 = new Car(1,"A300");
var car2 = new Car(1,"A400"); 
```

添加到字典

```
 Cars.Add(car1 ,true);
   Cars.Add(car2 ,true);
   Cars.ContainsKey(car1) - //which returns boolean can be used to check for the exisitence of a key 
```

要获得您可以使用的价值

```
 var x=Cars[car1]; 
```

使用不在字典集合中的键将引发异常。

# asp.net - 母版页上的用户 ID 初始化？

> ID：15094391
> 
> 赞同：1
> 
> 时间：2013-02-26T16:35:07.077
> 
> 标签：asp.net, master-pages

我有一个包含多个页面的网站，不一定是分层的。我想在用户第一次进入站点时查询用户的身份（使用 AD ...），并根据需要创建会话状态变量以方便其他页面。用户可能无需通过 default.aspx 页面即可进入该站点，因此我想我应该将代码放在母版页的代码隐藏中。

假设这是一个好主意，与维护此信息的某种静态类相比，我开始设置它，但发现母版页代码隐藏在我进入站点时似乎并不总是被触发。这是调试现象，还是我是对的，而母版页是放置此代码的错误位置...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:46:17.657

我会推荐使用 Global.asax 类。如果它不存在，您需要将其添加到您的网络应用程序中。一旦你有了它，你就可以使用各种事件（会话开始和结束、应用程序开始和结束以及错误）来实现特定于你需要的业务逻辑。

我倾向于在 global.asax 的 Application_PreRequestHandlerExecute 事件中使用登录用户。这将允许您查看用户原则（例如 - User.Identity.Name）以查看谁已登录（或者他们是否未登录）并执行您需要的操作（例如为用户设置会话信息， ETC。）。

这是我在一个使用 Global.asax 将用户数据存储在 Session 中的 .NET Web 应用程序上获得的一些代码。

```
protected void Application_PreRequestHandlerExecute(Object sender, EventArgs e) {
  if (Context.Handler is IRequiresSessionState || Context.Handler is IReadOnlySessionState) {
    SetUserItem();
  }
}

private void SetUserItem() {
  if (Session["UserItem"] == null)
    Server.Execute("~/SetSessionUserObj.aspx", true);
} 
```

...然后是 SetSessionUserObj.aspx.cs

```
protected void Page_Load(object sender, EventArgs e) {
  string ID = User.Identity.Name;

  MyUser myUser = new MyUser();
  UserItem userItem = myUser.GetUserItemByID(ID);

  if (userItem != null) {
    Session["UserItem"] = userItem;
  }
} 
```

这只是您可以在 global.asax 中访问用户身份的一种方式。您不一定要执行 Server.Execute 来设置用户数据（我只是出于此问题范围之外的其他原因才这样做）。

祝你好运。

# python - 使用 python re.search 区分大小写匹配

> ID：15094392
> 
> 赞同：1
> 
> 时间：2013-02-26T16:35:07.610
> 
> 标签：python, regex

我想从文本中进行区分大小写的匹配。在以下情况下，我尝试使用 re.search 匹配“Ca.iNy”，我想匹配“C”应该大写的位置，其余所有字符都可能在任何情况下。如果它匹配我想为变量设置一个值的情况。

我采用了帮助表格 SO 并通过检查第一个字母是否为大写字母来实现，并且对于单次检查来说效果很好。

```
s = "The details belong to (Ca.iNy.) in this case"
reg = re.compile("Ca.iny.", re.I)
reg.search(s).group().startswith("C"). 
```

但是，我无法在“if else 循环”中使用它。我尝试了下面的代码，但搜索似乎不区分大小写。任何人都可以让我吗？

```
import re

st = "The details belong to (Ca.iNy.) in this case"
Mval = ''

if re.search(r"C(?i)a.iny", st):
    Mval = "AAAAA"
elif re.search(r"(?i)Ky.", st):
    Mval = "BBBBB"
elif re.search(r"(?i)M.sa.", st):
    Mval = "CCCCC"
else:
    Mval = "DDDDD"

print Mval 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:56:29.060

```
import re

st = "The details belong to (Ca.iNy.) in this case"
Mval = ''

if re.search(r"C""(?i)a.iny", st):
    Mval = "AAAAA"
elif re.search(r"(?i)Ky.", st):
    Mval = "BBBBB"
elif re.search(r"(?i)M.sa.", st):
    Mval = "CCCCC"
else:
    Mval = "DDDDD"

print Mval 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:47:21.047

```
import re
All = {"CA.ing": 3, "cA.aec": 10}
st = "The details belong to (Ca.inY.) in this case"
Mval = ''
class1 = r"[a-z][a-z].[a-z][a-z][a-z]"
class2 = r"[a-z][a-z][a-z][a-z][a-z][a-z]"  # For strings like alaska

if re.search(class1, st, flags=re.IGNORECASE):
    found_value = re.search(class1, flags=re.IGNORECASE).group()
    if found_value in All.keys():
        Mval = All[found_value]
elif re.search(class2, st):
    found_value = re.search(class2, st).group()
    if found_value in All.keys():
        Mval = All[found_value]

#This will return a KeyError if a string is present not in your dictionary
#Note : You can take care of the different case sensitive cases in the dictionary, by
# only including the proper cases 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:15:35.987

```
[mport re

reg = re.compile('([a-z]{2})\.[a-z]{3}',re.I)

def code(X,r):
    for ma in r.finditer(X):
        if ma.group(1)[0].upper()==ma.group(1)[0]:
            GV = 'OK'
        else:
            GV = '- bad match -'
        yield '  {!s:10}  {!s:^13}'.format(ma.group(), GV)

data = ('Ca.imo  Ca.IMo gggg Ca.iMo   CL.icv   cl.icv  cL.icv'
        'hhhh  ca.ghc  Rl.axp  bbb  Rl.AXp  nm.fgt')

print '\n'.join(res for res in code(data,reg)) 
```

结果

```
 Ca.imo           OK      
  Ca.IMo           OK      
  Ca.iMo           OK      
  CL.icv           OK      
  cl.icv      - bad match -
  cL.icv      - bad match -
  ca.ghc      - bad match -
  Rl.axp           OK      
  Rl.AXp           OK      
  nm.fgt      - bad match - 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:00:30.383

```
import re

st = "The details belong to (Ca.iNy.) in this case"
Mval = ''

if re.search(r"C[a-z].[a-z][a-z]", st):   # Only change
    Mval = "AAAAA"
elif re.search(r"(?i)Ky.", st):
    Mval = "BBBBB"
elif re.search(r"(?i)M.sa.", st):
    Mval = "CCCCC"
else:
    Mval = "DDDDD"

print Mval 
```

# java - ELF .so 文件，我可以通过 java 在我的 Windows 上以某种方式运行它吗？

> ID：15094397
> 
> 赞同：0
> 
> 时间：2013-02-26T16:35:17.723
> 
> 标签：java, android, native, elf, shared-libraries

我有树 .so 文件，一个用于 x86 和两个其他处理器。

我可以在我的 android 模拟器上使用它们来调用 .so 文件中的函数：

```
 static
  {
    System.loadLibrary("nameoflib");
  }

  public native long myNativeFunction(); 
```

我可以以任何方式修改这些文件，以便我可以在 Windows 计算机上的 java 中使用它们吗？

（我的意思是，以某种方式它必须是可能的，因为我可以在我的 Windows 上的 android 模拟器上运行它们。

（原因是我需要库中的一个随机函数，我不知道它是如何工作的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:40:28.157

.so 文件是 linux/unix 中的动态链接库，就像 windows 中的 .dll 文件一样。您可以在设备的模拟器中使用这些.so文件，因为它是android（linux系统）的模拟器。

您需要有源代码才能获取 Windows 的 dll。

# java - 部署 spring-ws Web 服务时出现 JAXB 异常

> ID：15094401
> 
> 赞同：2
> 
> 时间：2013-02-26T16:35:23.283
> 
> 标签：java, exception, jaxb, spring-ws

我有一个 xsd，它与使用 spring-ws 实现的肥皂网络服务一起使用。其中一种类型定义如下：

```
 <xsd:complexType name="DateTimeWithTimeZone">
      <xsd:annotation>
         <xsd:documentation>An extension to the standard dateTime, that forces the use of a proper time zone.</xsd:documentation>
      </xsd:annotation>
      <xsd:attribute name="DateTime" type="xsd:dateTime" use="required">
         <xsd:annotation>
            <xsd:documentation>The date time value</xsd:documentation>
         </xsd:annotation>
      </xsd:attribute>
      <xsd:attribute name="TimeZone" type="xsd:string" use="optional" default="UTC">
         <xsd:annotation>
            <xsd:documentation>The time zone of the relevant date/time, should be a standard time zone from the Time Zone database at http://www.iana.org/time-zones</xsd:documentation>
         </xsd:annotation>
      </xsd:attribute>
   </xsd:complexType> 
```

我的问题是，当我的 JBoss 加载时，我得到了这个异常：

```
ERROR [org.springframework.web.context.ContextLoader] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'marshaller' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.springframework.oxm.UncategorizedMappingException: Unknown JAXB exception; nested exception is com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
@XmlAttribute/@XmlValue need to reference a Java type that maps to text in XML.
    this problem is related to the following location:
        at protected javax.xml.datatype.XMLGregorianCalendar com.example.schema.DateTimeWithTimeZone.dateTime
        at com.example.schema.DateTimeWithTimeZone
   ... 
```

生成的java文件如下：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "DateTimeWithTimeZone")
public class DateTimeWithTimeZone {

    @XmlAttribute(name = "DateTime", required = true)
    @XmlSchemaType(name = "dateTime")
    protected XMLGregorianCalendar dateTime;
    @XmlAttribute(name = "TimeZone")
    protected String timeZone;

    public XMLGregorianCalendar getDateTime() {
        return dateTime;
    }
    public void setDateTime(XMLGregorianCalendar value) {
        this.dateTime = value;
    }
    public String getTimeZone() {
        if (timeZone == null) {
            return "UTC";
        } else {
            return timeZone;
        }
    }
    public void setTimeZone(String value) {
        this.timeZone = value;
    }
} 
```

我怎样才能摆脱这个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:13:53.580

嗯，这似乎很奇怪。我找不到一个很好的理由为什么这不起作用。您是否尝试过使用自定义绑定文件将 xs:datetime 转换为使用 Java`Calendar`对象？它似乎以`XmlGregorianCalendar`某种方式打破。也许正常`Calendar`会起作用。

该文件看起来像：

```
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <globalBindings>
    <javaType name="java.util.Calendar" xmlType="xs:dateTime"
      parseMethod="javax.xml.bind.DatatypeConverter.parseDate"
      printMethod="javax.xml.bind.DatatypeConverter.printDate"
    />
  </globalBindings>
</bindings> 
```

你可以像这样将它添加到你的 pom.xml 中：

```
<configuration>
    <bindingFiles>/path/to/bindings.xjb</bindingFiles>
<configuration> 
```

或者通过使用 xjc 像：

```
xjc schema.xsd -b bindings.xjb 
```

# rubygems - 使用 HTTPS 源时，Rubygems 上出现可怕的 OpenSSL::SSL::SSLError

> ID：15094404
> 
> 赞同：2
> 
> 时间：2013-02-26T16:35:28.067
> 
> 标签：rubygems, openssl

```
$ bundle 
The source :rubygems is deprecated because HTTP requests are insecure.
Please change your source to 'https://rubygems.org' if possible, or 'http://rubygems.org' if not. 
```

好的，将 Gemfile 更改为：

```
source 'https://rubygems.org' 
```

但是之后：

```
$ bundle 
    Unfortunately, a fatal error has occurred. Please see the Bundler
    troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!
/Users/ale/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:917:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError) 
```

如何解决这个无休止的 SSL 混乱？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T06:36:50.363

解决方案在这里详细解释：[https ://railsapps.github.io/openssl-certificate-verify-failed.html](https://railsapps.github.io/openssl-certificate-verify-failed.html)

# wcf - 仅对 Http Post 方法在 WCF 中使用 Windows 身份验证

> ID：15094406
> 
> 赞同：0
> 
> 时间：2013-02-26T16:35:32.027
> 
> 标签：wcf, http-post, windows-authentication

我已经设置了一个安静的 WCF 服务，它向需要它们的任何人提供图像（它们对安全性不敏感），但我希望能够使用本地域中的应用程序将图像推送到服务并且服务将它们保存为人们可以从外部访问。

所以我想发布只需要 Windows 身份验证的方法，这是否可能，如果可以，请知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:44:57.803

在方法之前使用`[Authorize]`and `[HttpPost]`，例如：

```
[Authorize]
[HttpPost]
public ActionResult Method() 
```

这篇文章有你需要知道的一切 [http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-windows-authentication-cs](http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-windows-authentication-cs)

# mysql - 选择一个没有名为 foobar 的帖子的用户

> ID：15094408
> 
> 赞同：0
> 
> 时间：2013-02-26T16:35:37.953
> 
> 标签：mysql, sql, join

我有一张桌子`user`和一张桌子`post`。这是一个 N-1 关系，这意味着关系是通过 完成的`post.user_id`。

我想找到没有名为“foobar”的帖子的用户。我试过这个：

```
SELECT `users`.* FROM `users` 
INNER JOIN `posts` ON `posts`.`user_id` = `users`.`id`
WHERE post.title !="foobar" 
```

如果一个用户有一个名为 foobar 的帖子，它不会被退回，但只要有一个名为 foobar 的帖子，用户就会被退回。

在 sql 中我怎么说“我想要没有一个名为 foobar 的帖子的用户”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T16:38:02.900

尝试 ：

```
SELECT *
FROM `users` u
WHERE NOT EXISTS (
    SELECT 1 
    FROM `posts` 
    WHERE title = 'foobar'
    AND user_id = u.id
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:39:03.240

您可以离开加入标题为 foobar 的帖子，然后返回标题为空的所有行（不可能加入）。

```
SELECT `users`.* FROM `users` 
    LEFT JOIN `posts` ON `posts`.`user_id` = `users`.`id`
        AND posts.title = "foobar"
WHERE posts.title IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:43:28.517

我对这些类型的查询的偏好是使用聚合和`having`：

```
SELECT `users`.*
FROM `users` 
INNER JOIN `posts` ON `posts`.`user_id` = `users`.`id`
group by users.user_id
having sum(case when post.title = 'foobar' then 1 else 0 end) = 0 
```

# c++ - 如何在默认构造函数中初始化引用成员？

> ID：15094416
> 
> 赞同：3
> 
> 时间：2013-02-26T16:35:47.097
> 
> 标签：c++, pointers, reference

问题真的说明了一切。

如果我要实现默认构造函数，使用 const 指针成员会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:38:29.183

您需要使用成员初始化列表：

```
struct foo
{
  const int& ref;
  foo() : ref(some_value()) { }
} 
```

确保`some_value()`不给你一个临时的。它的寿命只会延长到构造函数结束：

> 临时绑定到构造函数的 ctor-initializer (12.6.2) 中的引用成员将持续存在，直到构造函数退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:42:18.760

好吧，这取决于您希望您的成员在默认情况下引用什么。一个可能的解决方案是拥有一个默认对象（可能是某种[Null 对象](http://en.wikipedia.org/wiki/Null_Object_pattern)）：

```
struct Foo
{
    Foo() : bar_(defaultBar) {}
    Foo(Bar &bar) : bar_(bar) {}

  private:
    Bar &bar_;
    static Bar defaultBar;
}; 
```

或者，正如@sftrabbit 所示，您可以从某个函数获取对某个对象的引用。

# javascript - 谷歌地图 javascript 无法正确呈现

> ID：15094420
> 
> 赞同：0
> 
> 时间：2013-02-26T16:36:02.307
> 
> 标签：javascript, google-maps

我一定是犯了一个简单的错误。我无法显示最小的 google V3 地图。下面是我的代码。我看到的是重复的地图垂直列，中间有空格。

```
function hajj_map_view() {

    var mapDiv = jQuery('#hajj-map');

    if ( !mapDiv.length )
            return;

    function show_map(listing_location) {
            var mapProp = {
                center:listing_location,
                zoom:5,
                mapTypeId:google.maps.MapTypeId.ROADMAP
                };
            var map = new google.maps.Map(document.getElementById("hajj-map"), mapProp);

            var marker = new google.maps.Marker({
                    map: map
            });

            //map.setCenter(listing_location);
            marker.setPosition(listing_location);
    }

    show_map(new google.maps.LatLng('21.422', '39.826'));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:05:48.033

`max-width:50px`这个问题是由`article.listing img`. 此选择器还匹配地图内的图像（例如，图块，其宽度将限制为 50 像素，但实际宽度为 256 像素）。

将此添加到您的样式表中：

```
#hajj-map img{max-width:none;} 
```

# visual-c++ - 有什么方法可以列出用于编译每个 cpp 文件的头文件？

> ID：15094427
> 
> 赞同：2
> 
> 时间：2013-02-26T16:36:23.723
> 
> 标签：visual-c++

我在 VC++ 2010 pro 中遇到了这个编译错误。令我困惑的是，我没有包含 windef.h 文件，也没有包含任何与 Microsoft SDK 相关的东西，所以我想找到哪个 cpp 文件需要该头文件进行编译。任何帮助将不胜感激。

```
 error C2011: 'HDC__' : 'struct' type redefinition
 1>          c:\program files (x86)\microsoft sdks\windows\v7.0a\include\windef.h(267) : see declaration of 'HDC__' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:01:22.587

您可以为此使用[/showincludes](http://msdn.microsoft.com/en-us/library/hdkef6tk%28v=vs.110%29.aspx)编译器选项。

# jquery - jQuery .data() 分配在控制台打印中工作但会产生错误

> ID：15094431
> 
> 赞同：0
> 
> 时间：2013-02-26T16:36:27.627
> 
> 标签：jquery, jquery-data

这些 jQuery`data()`分配有什么问题？当我将第一个包装在 a 中`console.log()`时，它可以工作并打印出数据。

但是 jsbin 显示了大量我无法解决的错误？

```
$("body").data("user_information", {});
$("body").data("user_information", {
    contact_info: {},
    billing_info: {}
});

console.log($("body").data("user_information").contact_info, {name: "paul", company: "testCo"});

$("body").data("user_information").contact_info, {
    name: "paul",
    company: "testCo"
};

$("body").data("user_information").billing_info, {
    name: "steve",
    company: "testCo"
}; 
```

[jsbin](http://jsbin.com/exanim/2/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:40:25.407

如果你正在尝试做作业，你应该这样做：

```
$("body").data("user_information").contact_info = {
    name: "paul",
    company: "testCo"
}; 
```

您在那里使用的逗号运算符让我感到困惑。或者，你可以做

```
$("body").data("user_information", {
        contact_info: {
            name: "paul",
            company: "testCo"
        }
}); 
```

# opengl - OpenGL - 为什么 GL_ELEMENT_ARRAY_BUFFER 用于索引？

> ID：15094433
> 
> 赞同：19
> 
> 时间：2013-02-26T16:36:39.670
> 
> 标签：opengl, opengl-es

我目前是 OpenGL ES 2.0 领域的新手，想尽可能多地了解绑定、缓冲区、着色器等。

到目前为止，我只是想了解使用每个提到的预设之间以及何时使用之间的`GL_ELEMENT_ARRAY_BUFFER`区别`GL_ARRAY_BUFFER`。

我目前的理解使我相信这`GL_ELEMENT_ARRAY_BUFFER`是专门针对上述三角形的索引，而另一个是针对其他所有内容的。

有人可以详细说明为什么以及这是否正确？如何`GL_ELEMENT_ARRAY_BUFFER`处理不同？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-27T07:53:03.593

`GL_ELEMENT_ARRAY_BUFFER`用于指示您呈现的缓冲区包含“其他” ( `GL_ARRAY_BUFFER`) 缓冲区中每个元素的索引。

所以，作为一个非常基本的例子，只有顶点（没有其他数据），如果你有一个索引缓冲区：

`{0, 1, 2} {0, 2, 3}`

并且数据缓冲区包含：

`{{0, 0, 0}, {1, 0, 0}, {1, 1, 0}, {0, 1, 0}}`

然后，当您调用 glDrawElements 时，它知道为第一个三角形挑选顶点 0、1 和 2，然后为第二个三角形挑选顶点 0、2、3（即：基本上是一个正方形）。

当您拥有具有大量顶点和面的更复杂的模型时，这将变得更加有用 - 因为许多面将共享相同的顶点（因此您不需要“重新发送”相同的数据）。

**注意：**上面的例子只显示了顶点——你可以在那里交错尽可能多的数据（顶点颜色、法线、纹理坐标等）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-26T17:20:15.797

这主要有历史原因。回到没有 VBO 的时候，用 glVertexPointer 和类似方法指定的指针不与任何类型的 OpenGL 对象“关联”。当 VBO 被引入时，这种行为会延续到 VBO 的语义中，这需要索引和属性的不同缓冲区目标。

随着通用顶点属性的引入，添加了这样的关联功能。

今天，它主要是对 OpenGL 实现的提示，以了解数据将以何种方式被处理，以相应地优化数据流。但它也可以很好地提醒程序员当前正在处理的内容。

# sql-server - T-SQL 中的字符串模式匹配

> ID：15094436
> 
> 赞同：1
> 
> 时间：2013-02-26T16:36:46.083
> 
> 标签：sql-server, tsql, sql-server-2005, pattern-matching, string-matching

我正在尝试在日志表上创建一个视图。很多日志来自“潜在危险的表单请求”，虽然我有兴趣捕获这些日志，但它们也会产生很多噪音，所以我希望有一个可以过滤掉它们的视图。日志记录来自 CMS，因此我无法修改其逻辑。

我想过滤掉的日志条目*总是*采用以下格式

```
At /contact-us.aspx (Referred by: http://www.mydomain.com/contact-us.aspx): 
At /login.aspx (Referred by: http://www.mydomain.com/login.aspx): 
```

所以基本上我想要一个`where`条款，我可以说一些事情

```
where logComment <> 'At [url] (Referred by: http://www.mydomain.com[url]);' 
```

如何以可用于视图的查询的形式完成此操作？我曾尝试`PatIndex`在 SQL 中玩弄并阅读一些关于 Regex 的信息，但我在这两种方法中都遇到了死胡同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:57:13.700

这应该返回与模式`'At % (Referred%'`完全不匹配或与问题中指定的模式不匹配的任何内容。

```
WITH Log(logComment)
     AS (SELECT 'At /contact-us.aspx (Referred by: http://www.mydomain.com/contact-us.aspx)'
         UNION ALL
         SELECT 'At /login.aspx (Referred by: http://www.mydomain.com/login.aspx)'
         UNION ALL
         SELECT 'FOOBAR')
SELECT logComment
FROM   Log
       CROSS APPLY (SELECT 
                    CASE
                    WHEN logComment LIKE 'At % (Referred%' 
                    THEN SUBSTRING(logComment, 4, CHARINDEX('(Referred', logComment) - 5)
                    END) C(url)
WHERE  url IS NULL
        OR logComment <> 'At ' + url + ' (Referred by: http://www.mydomain.com' + url + ')' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:41:55.837

TSQL 的通配符是 % 符号。尝试这个：

```
WHERE logComment NOT LIKE 'At % (Referred by: http://www.mydomain.com%);' 
```

# vba - 执行 UPDATE 查询时出现“查询太复杂”错误 - Excel

> ID：15094449
> 
> 赞同：0
> 
> 时间：2013-02-26T16:37:09.093
> 
> 标签：vba, excel

这是查询：

```
UPDATE [Tasks$] SET SPRINT = 1, THEME = "INTEGRATION" WHERE STORY = 1 
```

这是数据集：

```
SPRINT  THEME       STORY   Task        Estimate    Assigned     IN_PROGRESS    DONE
1       INTEGRATION 1       Some task   1           AA           Wed, Feb 6     Wed, Feb 13 
```

工作表称为“任务”。我不确定为什么这不起作用，因为查询并不太复杂，并且一个非常相似的查询正在另一个工作表上工作。任务工作表中共有 120 行。

我在 Execute 方法调用中收到此错误：

```
Sql = "UPDATE [Tasks$]..."
cn.Execute (Sql) 
```

任何帮助表示赞赏。

**更新：**

这就是创建连接的方式。

```
Set conn = New ADODB.Connection
conn.Provider = "Microsoft.Jet.OLEDB.4.0"
conn.ConnectionString = "Data Source=" & ThisWorkbook.FullName & ";" & "Extended Properties=Excel 8.0;"
conn.Open 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T13:03:33.127

这对我有用

```
Sub test()

    Dim cn As ADODB.Connection

    Set cn = New ADODB.Connection
    cn.Provider = "Microsoft.Jet.OLEDB.4.0"
    cn.ConnectionString = "Data Source=" & ThisWorkbook.FullName & ";" & "Extended Properties=Excel 8.0;"
    cn.Open

    cn.Execute "UPDATE [Tasks$] SET SPRINT = 1, THEME = ""INTEGRATION"" WHERE STORY = 1"
    cn.Close

End Sub 
```

我假设您的`conn`and`cn`变量只是您帖子中的一个错字，而不是您的代码中的一个错字。此外，必须先保存工作簿，但我认为你会得到一个完全不同的错误。您应该尝试将该工作表复制到新工作簿中，然后查看相同的代码是否有效。然后您应该尝试更改工作表名称（以及要匹配的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T08:43:37.060

检查您为 Excel 单元格导出的字符是否超过 32,767 个。因为 Excel 最多可以包含 32,767 个字符。 [https://support.office.com/en-nz/article/Excel-specifications-and-limits-16c69c74-3d6a-4aaf-ba35-e6eb276e8eaa](https://support.office.com/en-nz/article/Excel-specifications-and-limits-16c69c74-3d6a-4aaf-ba35-e6eb276e8eaa)

# activemq - ActiveMQ 镜像队列性能惩罚

> ID：15094450
> 
> 赞同：3
> 
> 时间：2013-02-26T16:37:09.370
> 
> 标签：activemq, mirror, subscriber

我正在设置一个 ActiveMQ 实例，并且我对使用[镜像队列](http://activemq.apache.org/mirrored-queues.html)不时监视特定队列感兴趣。但是，从链接的文档看来，启用镜像队列将为系统中的每个队列创建一个镜像主题，其中会有很多。我对这种方法有几个问题：

1.  没有订阅者的主题对性能有很大影响吗？该主题不会总是有订阅者，我希望在没有人听的情况下影响最小。
2.  队列的性能显然比监控主题更重要——如果镜像主题的唯一订阅者是非持久的，这是否有助于最小化任何额外的系统负载？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:42:33.947

当没有人订阅主题时，通常没有什么大问题。而且，是的，非持久订户通常比相反的订户便宜。但我建议您将 VisualVM 连接到您的特定设置，并在有和没有镜像队列的情况下监控负载下的资源使用情况。这可能是这个问题的最佳答案

# java - 从java禁用触发器

> ID：15094451
> 
> 赞同：3
> 
> 时间：2013-02-26T16:37:10.053
> 
> 标签：java, oracle, triggers

我不完全确定为什么会这样。当我运行命令时：

```
 ALTER TRIGGER ORIGDV87.UPDATE_TEAM_GROUP_TRIGGER DISABLE/ENABLE 
```

我可以看到它如何改变触发器。我正在尝试从 java 以编程方式执行此操作：

```
private void trigger_alter(Connection con, String flag) throws Exception
{
    Query query = new Query(con);
    String selectSql = "select table_owner, trigger_name from user_triggers";
    Query queryTrg = new Query(con);
    query.executeQuery(selectSql);
     while(query.next()) {
        int i = 0;
        String table_owner = query.getColValue("table_owner");
        String trigger_name = query.getColValue("trigger_name");
        String triggerSql = "ALTER TRIGGER " + table_owner + "." + trigger_name + " "+ flag  ;
        System.out.println( triggerSql);
        queryTrg.executeQuery(triggerSql);
    }
    log_obj.FmtAndLogMsg("All triggers have been " + flag+ "D");
} 
```

我得到这个例外：`2013/02/26 10:38:56.795 TableConverter: ERROR main() occurred: java.lang.Exception: Error executing query: ALTER TRIGGER XXXX.UPDATE_TEAM_GROUP_TRIGGER DISABLE error=java.sql.SQLException: ORA-01003: no statement parsed`

它是一个 oracle 数据库，我正在 Solaris 机器上尝试这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:41:05.917

首先，您正在执行一个`executeQuery`不是查询的语句。尝试使用`execute`。

无论如何，ALTER 语句是 DDL（数据定义语言）的一部分（SQL 用于查询，DML -Data Manipulation Language- 用于插入/更新/删除）。我不确定 JDBC 对 DDL 的支持程度如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:43:22.323

代替

```
queryTrg.executeQuery(triggerSql); 
```

和

```
con.createStatement().execute(triggerSql); 
```

但是，批处理`ALTER TRIGGER`语句会更好：

```
private void trigger_alter(Connection con, String flag) throws Exception
{
    Query query = new Query(con);
    String selectSql = "select table_owner, trigger_name from user_triggers";

    Statement trgStmt = con.createStatement();

    query.executeQuery(selectSql);
     while(query.next()) {
        int i = 0;
        String table_owner = query.getColValue("table_owner");
        String trigger_name = query.getColValue("trigger_name");
        String triggerSql = "ALTER TRIGGER " + table_owner + "." + trigger_name + " "+ flag  ;
        System.out.println( triggerSql);
        trgStmt.addBatch(triggerSql);
    }

    trgStmt.executeBatch();
    log_obj.FmtAndLogMsg("All triggers have been " + flag+ "D");
} 
```

# biztalk - 元素出现的 BizTalk 架构开发问题

> ID：15094452
> 
> 赞同：0
> 
> 时间：2013-02-26T16:37:10.967
> 
> 标签：biztalk, biztalk-2010, schema-design

请找到以下 XML 格式，我正在尝试为其构建架构。

```
<?xml version="1.0" encoding="UTF-8"?>
<?ORX ORXHEADER="200" VERSION="201" SECURITY="NONE" OLDFILEUID="NONE" NEWFILEUID="NONE" ?>
<ORX>
  <NONSIGNONMSGSRQV1>
    <NONSONRQ>
      <CLIENT>123456765</CLIENT>
      <ID>arout_int</ID>
      <USERPASS>IM_Developer</USERPASS>
      <LANGUAGE>ENG</LANGUAGE>
      <APPID>WASSUP</APPID>
      <APPOVER>1</APPOVER>
    </NONSONRQ>
  </NONSIGNONMSGSRQV1> 
  <NONVERMSGSRQV1>
    <NONEMPLOYERHISTTRNRQ>
      <COOKIE>1234576540</COOKIE>
      <COOKIETAN>12345612340</COOKIETAN> 
      <BILLINGO1>45674567890</BILLINGO1> 
      <BILLINGO2>1245673567890</BILLINGO2> 
      <PURPOSE>
        <CODE>PROGRAM</CODE>
      </PURPOSE> 
      <EMPLOYERHISTRQ>
        <EMPLOYEEID>123004567</EMPLOYEEID>
      </EMPLOYERHISTRQ>
  </NONEMPLOYERHISTTRNRQ>
            <ANNUALCOMPCOLLECTION>
                <ANNUALCOMP>
                    <YEAR>2002</YEAR>
                    <BASE>9633.45</BASE>
                    <OVERTIME>268.29</OVERTIME>
                    <OTHER>7732.4</OTHER>
                    <TOTAL>17634.14</TOTAL>
                </ANNUALCOMP>
                <ANNUALCOMP>
                    <YEAR>2001</YEAR>
                    <BASE>12035.72</BASE>
                    <OVERTIME>390.93</OVERTIME>
                    <COMMISSION>5840.48</COMMISSION>
                    <BONUS>3234.28</BONUS>
                    <OTHER>8974.43</OTHER>
                    <TOTAL>21010.15</TOTAL>
                </ANNUALCOMP>
                <ANNUALCOMP>
                    <YEAR>2000</YEAR>
                    <BASE>10938.47</BASE>
                    <OVERTIME>25.89</OVERTIME>
                    <OTHER>9389.62</OTHER>
                    <TOTAL>20353.98</TOTAL>
                </ANNUALCOMP>
      </ANNUALCOMPCOLLECTION>    
  </NONVERMSGSRQV1>
</ORX> 
```

如果您看到 chich 记录 -> ANNUALCOMPCOLLECTION -> ANNUALCOMP -> **COMMISSION & BONUS**元素，则始终不重复。

由于这个原因，我的模式验证实例抛出如下警告

> 错误 BEC2004：元素“ANNUALCOMP”具有无效的子元素“OTHER”。预期的可能元素列表：'OVERTIME，COMMISSION'。
> 
> 错误 BEC2004：元素“ANNUALCOMP”具有无效的子元素“OTHER”。预期的可能元素列表：'OVERTIME，COMMISSION'。

我必须设置什么样的属性才能正确实现此验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:35:30.353

我通过以下设置解决了这个问题，

1.  将属性从 Group Occurrences 更改为 Single record record Occurrences 类型
2.  在每个元素上，我设置了 min-0 和 Max-Occurance-*，

我的架构得到了验证实例。

# javascript - IE9音频播放问题

> ID：15094453
> 
> 赞同：0
> 
> 时间：2013-02-26T16:37:13.083
> 
> 标签：javascript, jquery, html, internet-explorer-9, createjs

我正在开发一个游戏，其中在实际游戏开始之前我有许多音频文件要加载。我有 60 到 90 个音频文件。我加载它们并一一播放。加载功能是通过 CreaJS Lib 实现的。音频在 Chrome 和 Mozilla 上成功播放。但我在 IE9 上有问题。

我们如何在 IE9 上预加载音频并一一运行。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:33:21.827

IE9 对可以加载/播放的音频文件数量有一些限制。尝试将清单减少到 30 个左右的音频项目，看看是否有帮助。

我们还遇到了一些非常奇怪的问题，即使用某些设置编码的音频在 IE 中不起作用 - 所以也许重新编码您的一些文件以查看它是否有所作为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:41:22.553

我会删除 90 个音频文件，并制作一个包含所有 90 个剪辑的音频文件。

您一次只能播放一个，因此只需跳转到代表音频文件的位置并播放。

[http://www.storiesinflight.com/html5/audio.html](http://www.storiesinflight.com/html5/audio.html)

在歌曲中精确播放 35 秒

```
audioElement.currentTime=35;
audioElement.play(); 
```

然后你暂停它超时。为了让它干净，请确保在每个剪辑之间添加几秒钟的时间，这样如果超时有点晚，它仍然不会播放下一个剪辑

# zend-framework - 如何在zend中缩短类名

> ID：15094457
> 
> 赞同：0
> 
> 时间：2013-02-26T16:37:23.533
> 
> 标签：zend-framework

如何在 Zend 中缩短类名？

例如，在 Zend 中，应该这样命名模型：**class Application_Model_GuestbookMapper**

因为 Zend 使用 autoloader.so 我怎样才能将类名缩短为类似：**class GuestbookMapper**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:03:10.340

这是命名空间的使用。如果在文件中将命名空间定义为使用 Application_Model，则类可以直接实例化 GuestbookMapper 而无需整个命名空间。

请注意 PHP 版本必须大于或等于 5.3 才能支持此功能。

更多信息可以在这里的 PHP 官方文档中找到：

[http://php.net/manual/en/language.namespaces.php](http://php.net/manual/en/language.namespaces.php)

可能应该注意到 ZF2 支持这一点，但 ZF1 并不是那么简单，这里有更多关于此的信息：

[如何在 Zend 框架中使用命名空间？](https://stackoverflow.com/questions/1691793/how-do-i-use-namespaces-with-zend-framework)

# c++ - 如何使用此删除成员函数内的成员数组以进行重新分配

> ID：15094459
> 
> 赞同：0
> 
> 时间：2013-02-26T16:37:28.747
> 
> 标签：c++

我有一些简单的代码将两个 char[] 合并到一个新数组中。问题是，当我创建新数组时，我想删除在构造函数中分配的原始 char 数组。如果我不在此内存上调用 delete，那么一旦我重新分配 m_str，就会发生内存泄漏。

-Edit 为什么我在调用 delete 时会出错？

```
String()      { m_str = new char[1]; *m_str = 0; }

String& String::operator+= (const String& other)
{
    unsigned int tmpInt1, tmpInt2;

    tmpInt1 = myStrlen(this->m_str);
    tmpInt2 = myStrlen(other.m_str);

    // Allocate the new char array, make an extra space for the '\0'
    char* newChar = new char[tmpInt1 + tmpInt2 + 1];

    myStrcat(newChar, this->m_str, tmpInt1, 0);
    myStrcat(newChar, other.m_str, tmpInt2, tmpInt1);

    this->m_str[myStrlen(m_str)] = '\0';

    delete[] this->m_str;
    this->m_str = newChar;

    return *this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:40:41.473

因为泄漏的内存不能用于程序中的其他内容。它将一直使用，直到您关闭程序并且系统可以回收它。

大多数情况下，您想清理它，以便再次使用它，因为内存不是无限资源。

也许对于少量内存，泄漏它不是一个大问题，但是假设您一次分配 256 字节的块，而且很多，那么泄漏这些可能很快就会成为一个问题。

# r - 对条形图列进行排序 ggplot

> ID：15094460
> 
> 赞同：4
> 
> 时间：2013-02-26T16:37:30.310
> 
> 标签：r, sorting, bar-chart, ggplot2

我有这个 R 代码来生成以下条形图：

```
d <- data.frame(case = c(1,2,3,4), 
                var=c('foo', 'foo', 'foo', 'foo','bar', 'bar', 'bar', 'bar'), 
                val=c(9,2,2,4,6,1,2,3))
d$var <- as.factor(d$var)
d$case <- as.factor(d$case)
ggplot(d, aes(x = case, y = val, fill = var)) + scale_x_discrete() + geom_bar(position="dodge") 
```

![在此处输入图像描述](../Images/085243846b61c8eb103dd4474292fb4f.png)

如何按'bar'的值对条形图进行排序？

免责声明：这可能是[https://stackoverflow.com/questions/10746342/sorting-ggplot2-box-plot-by-2-columns](https://stackoverflow.com/questions/10746342/sorting-ggplot2-box-plot-by-2-columns)的副本，但没有回答，所以......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:43:48.250

用于`order`获取按值排序的列`bar`并复制它`foo`。然后将此列用于`x`.

```
d$case <- match(d$val[d$var == "bar"], sort(d$val[d$var == "bar"]))
d$case <- factor(d$case, levels=1:4)
# now use this:
ggplot(d, aes(x = case, y = val, fill = var)) +  
         geom_bar(position="dodge", stat="identity") 
```

（或等效）

```
 ggplot(d, aes( x= order, fill = var)) + geom_bar(aes(weights=val), position="dodge") 
```

![在此处输入图像描述](../Images/bb287d4785dcf71de88c55d95b794008.png)

# c++ - 使用按位生成二进制数 (C++)

> ID：15094462
> 
> 赞同：0
> 
> 时间：2013-02-26T16:37:42.633
> 
> 标签：c++, bit-manipulation, mask

我试图做的作业已经过了截止日期，所以你没有做我的作业。

为了学习，我想知道如何做一些事情。

我能够制作一个程序，使用按位运算符的掩码以二进制形式打印出 1-32。

我使用的掩码的问题是它还会打印出 32 个前导零，后跟二进制数（例如，0000000000000000000000000000000001 表示数字 1）

这就是我所拥有的

```
 # include <iostream>
    #include <string>
    using namespace std; 

    string naiveBitToChar( int num ) 
    {

string st;
unsigned mask = 0x80000000;

if( num == 0 )
{
    return "0";
}

while( ( num & mask ) )
    mask >>= 1;
do 
{
    if ( num & mask ) 
    {
        st = st + "1";
    } 
        else 
        {
            st = st + "0";
        }

    mask >>= 1;
}
while( mask );

return st;
    }

    int main ( int argc, char* argv[] ) {

argc; argv;

    for( int i = 0; i < 32; i++ )
        cout << naiveBitToChar(i) << "\n";
    system ("pause");
    } 
```

我需要：

1.  从字符串中删除前导零
2.  在每个字符串中添加至少 8 个数字的宽度（例如 00000010）
3.  通过使用分隔符掩码（例如 0000_1000）在每 4 个数字后添加下划线

我是 C++ 新手，我的老师甚至不会看我的代码，请有人解释一下，并尽量保持基本。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:56:05.093

这是一个想法，使用标志来指示前导零数字。如果该位为 1，则更改标志。仅当数字不是前导零时才打印该数字。

```
bool is_leading_zero = true;
while (/*... */)
{
  // Convert bit to character in st
  if (st == '1')
  {
    is_leading_zero = false;
  }
  if (!is_leading_zero)
  {
    cout << st;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:55:38.853

如果从右到左扫描，那么会更容易，因为您不需要删除前导零，而只是在数字为 0 时停止：

```
std::string binary( unsigned n )
{
    std::string bits;
    for( unsigned mask = 1; true; mask <<=1 ) {
        bits.insert( bits.begin(), n & mask ? '1' : '0' );
        n &= ~mask;
        if( !n ) break;
    }
    return bits;
} 
```

或者更简单：

```
std::string binary( unsigned n )
{
    std::string bits;
    do {
        bits.insert( bits.begin(), n & 1 ? '1' : '0' );
        n >>= 1;
    } while( n );
    return bits;
} 
```

要更改最小宽度，您需要稍微修改循环条件，添加 unsercore 可以很简单：

```
if( bits.length() % 4 ) bits.insert( bits.begin(), '_' ); 
```

内循环

# .net - 我不能通过 web.config 添加 customHeaders 来支持 WCF 的 CORS 吗？

> ID：15094467
> 
> 赞同：0
> 
> 时间：2013-02-26T16:38:00.280
> 
> 标签：.net, wcf, cors

此链接：“http://new%20behavior%20and%20include%20it%20in%20the%20enpoint%20configuration”

说：

“**您必须有新的行为并将其包含在端点配置中**”

在 web.config 中添加 customHeaders 来为 WCF 服务启用 CORS 还不够，例如：

```
<httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
        <add name="Access-Control-Allow-Headers" value="content-type, x-requested-with, Accept />
... 
```

如果不够，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:21:23.930

这些值是否足以为 WCF 启用 CORS 取决于您使用的客户端、访问的端点以及服务是否能够处理基于 CORS 的客户端的预检 (OPTIONS) 请求将发送到资源。如果您的客户发送的唯一标头是您列出的标头，并且您的服务可以处理 OPTIONS 请求，那么应该没问题。如果您需要发送额外的标头（即，如果您想访问`BasicHttpBinding`基于 - 的端点，您还需要`SOAPAction`标头），那么不需要。

此外，由于这使用了 IIS 功能，因此这不适用于自托管服务。这将启用来自所有域的 CORS，这可能是您需要的，但您应该意识到这一点。

# php - 现在 $.browser 不再工作的浏览器检测

> ID：15094473
> 
> 赞同：2
> 
> 时间：2013-02-26T16:38:14.717
> 
> 标签：php, jquery

由于 $.browser 现在已从 jQuery 的 1.9 中删除，我正在寻找检测浏览器的类似方法吗？

尝试使用 php 的 get_brower，但它总是返回为“默认浏览器”。

更新：我查看了 jquery.support 并没有为我提供任何有用的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:39:59.963

从[文档中`$.browser`](http://api.jquery.com/jQuery.browser/)：

> 改用特征检测（参见 jQuery.support）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:45:40.793

```
<?php 
 echo $_SERVER['HTTP_USER_AGENT'];
?> 
```

然后选择 case's 或 if's 或正则表达式的结果为你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:48:33.133

正如您所指出的，通过 userAgent 搜索可能不可靠。但基本上，如果您不想使用特征检测，这就是您必须做的。其余的[已经在这里说了](https://stackoverflow.com/questions/2400935/browser-detection-in-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T10:33:13.803

我也想念 jQuery 的 $.browser 检测。虽然我知道 $.support 在许多情况下更有意义，但我最初使用浏览器检测来获取 css 前缀属性，这在应用条件样式时更有意义，而不是使用所有 3 个前缀。或者甚至为完全基于 IE 版本的 IE 6-9 添加 -pie- 前缀。

这是我将使用的函数的模型，改编自 jQuery 已弃用的 $.browser，如果有帮助的话。

```
nav = navigation;
nav.detectBrowser = function() {
var t = this,
    a = this.userAgent.toLowerCase(),
    match = /(chrome)[ \/]([\w.]+)/.exec(a) ||
    /(webkit)[ \/]([\w.]+)/.exec(a) ||
    /(firefox)[ \/]([\w.]+)/.exec(a) ||
    /(msie) ([\w.]+)/.exec(a) ||
    /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) ||
    a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || [];

t.browser = match[1] || false;
t.version = match[2] || "0";
if (t.browser) t[match[1]] = true;
if (t.msie)
    t.ie = parseInt(t.version);//ie main version or false if not IE
else if (t.chrome)
    t.webkit = true;//chrome is webkit
else if (t.webkit)
    t.safari = true;
    t.pre = t.webkit ? '-webkit-' : t.firefox ? '-moz-' : t.ie > 7
        ? '-ms-' : t.opera ? '-o-' : '';//css prefix
}
nav.detectBrowser(); 
```

请注意，我使用 window.navigation 全局对象作为示例，您的旧 $.browser 对象现在将是“nav”或“window.nav”。nav.pre 是 css3 功能的浏览器前缀，如果是 IE，nav.ie 是 Internet Explorer 版本的整数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T16:49:16.793

您可以像这样检测 Internet Explorer：

```
<!--[if IE]>
<![endif]--> 
```

可以使用此工具检测移动浏览器：http: [//detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

# image-processing - 除了最小二乘之外，存在哪些度量来比较图像特征向量？

> ID：15094474
> 
> 赞同：0
> 
> 时间：2013-02-26T16:38:15.613
> 
> 标签：image-processing, classification, metrics, similarity, feature-extraction

我有代表一组 150 张图像的伸长率、坚固性和[Hu Moments特征。](http://en.wikipedia.org/wiki/Image_moment)我想知道在不使用最小二乘或支持向量机的情况下与这些特征向量进行比较的典型指标是什么（因为我不知道它们属于哪个类）。

# ckeditor - CKEditor 中的 H1、H2、H3 等较小

> ID：15094477
> 
> 赞同：0
> 
> 时间：2013-02-26T16:38:22.300
> 
> 标签：ckeditor, wysiwyg, fckeditor

我注意到 CKEditor 中的 H1、H2、H3 等字体大小比它们显示在网页上时要小。您可以查看他们的演示页面[http://ckeditor.com/demo#full](http://ckeditor.com/demo#full)。这个问题的解决方案是什么。我希望看到 H1、H2、H3 ... 字体大小与网页上显示的一样大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:44:47.053

您根本无法在不更改 css 样式文件的情况下调整 h1 h2 或 h3 的大小。如果你能做到，那就去做。

但是如果你想在你的特定文章中自定义文本的大小，你可以使用 html 标签，它只是获得文本的固定大小。这是一个例子。

`<font size="X" color="COLOR">This is the text of size "X"</font>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:47:24.867

我什么都没注意到，CKEditor 和预览中的一切都是一样的。

# api - CouchDB Clojure 客户端 API 可用吗？

> ID：15094478
> 
> 赞同：3
> 
> 时间：2013-02-26T16:38:23.910
> 
> 标签：api, clojure, documentation, couchdb, clojurescript

有谁知道 Clojure 的一个好的 CouchDB 客户端 API。我目前正在使用[离合器](https://github.com/clojure-clutch/clutch)，但由于它相对较新，似乎没有太多文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:40:04.133

Clutch 是迄今为止最成熟的 Clojure 沙发客户端。

有些人[使用 clojureScript 做了一些有趣的事情来使用它发出视图函数](https://github.com/clojure-clutch/clutch#cljsviews)，因此您可以使用“clojure all way through”，而无需为 clojure 视图配置您的沙发服务器（这总是让我觉得有点不典型）

# javascript - Backbone.js 中的 object.once 方法不起作用

> ID：15094479
> 
> 赞同：3
> 
> 时间：2013-02-26T16:38:28.117
> 
> 标签：javascript, javascript-events, backbone.js

根据 Backbone[文档](http://backbonejs.org/#Events-once)，您可以使用：

```
object.once(event, callback, [context]) 
```

作为替代：

```
object.on(event, callback, [context]) 
```

当您只想对某个对象触发一次事件时

为什么以下不起作用：

```
app.aCollection.once("reset", function() {
    console.log("not working");
}); 
```

但这确实：

```
app.aCollection.on("reset", function() {
    console.log("working");
}); 
```

注意一次和一次的细微差别。我得到的错误告诉我该对象没有 once() 方法。aCollection 是一个 Backbone.js 集合对象。

**如何让 once() 方法工作？**

# android - 有效地模糊位图

> ID：15094481
> 
> 赞同：1
> 
> 时间：2013-02-26T16:38:30.573
> 
> 标签：android, blur

我在运行时尝试模糊图像时遇到了一些问题。我已经在[这里](https://stackoverflow.com/questions/15078499/blur-outofmemoryexception)发布了一个问题，但它被否决了，我不知道为什么，因为据我所知，我没有反对这个问题的常见问题解答。

如果可能的话，我正在尝试能够模糊图像，即使在旧设备上也是如此，但正如我现在拥有的那样，它会因 OutOfMemoryException 而崩溃。然而，我学到的是，使用`fastblur`我引用的方法，我不能使用除 之外的任何东西`int[]`，因为位图方法需要`int[]`. 因此，我对自己问题的最佳猜测是使用`NDK`和[C 方法](https://stackoverflow.com/a/11962240/1292230)进行模糊。但是，这并不能完全解决我的记忆问题。

我想我可以做一些事情，例如检查可用内存与它会花费我多少内存和/或监听并`onLowMemory()`在`Activity`出现模糊过程时打破模糊过程。

但是，对于第一个想法，我对计算内存和使用情况知之甚少。鉴于[这里](https://stackoverflow.com/a/3192348/1292230)的帖子，看起来我可以计算出我可以安全使用多少内存，因为：

```
MemoryInfo mi = new MemoryInfo();
ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
activityManager.getMemoryInfo(mi);
long availableBytes = mi.availMem; 
```

然后我可以根据 int 数组的大致大小检查它吗，假设是`a 32-bit signed two's complement integer`（宽度 * 高度 * 32L）？另外，我如何给它一个合理的缓冲而不损害系统性能呢？

我对自己的最佳答案是使用`NDK`和 C 进行模糊，侦听`onLowMemory()`并预先计算可用内存到我的估计`Bitmap`/`int[]`内存使用情况，使用一个常量值来检查（可用/估计> aConstantValue）。

如果我走得很远，请教我该怎么做。否则，纠正我所说的错误也非常有帮助。我不希望形成一个自以为是的辩论或模棱两可的问题，因为这会违反常见问题解答。如果可能的话，我想建立一个正确的解决方案来处理模糊和内存消耗。

此外，如果您的手指渴望点击对我的问题投反对票，我将不胜感激一些严厉的话，最好是评论形式，让我意识到为什么我应该得到它。

谢谢！

# perl - Perl 函数提取具有指定起始列和长度的数据

> ID：15094482
> 
> 赞同：1
> 
> 时间：2013-02-26T16:38:34.670
> 
> 标签：perl, extract

我正在尝试编写一个代码，从文件 A 中提取数据并仅将具有指定起点和终点的列数据粘贴到文件 B 中。到目前为止，我只能成功地将所有数据从 A 复制到 B - 但不是通过过滤列得到任何地方。我试过研究 splice 和 grep 无济于事。没有Perl经验。数据没有列标题。示例：数据实际上长达数千行 - 无法将数据插入函数

```
1\. AAA 565 u8y 221
2\. ABC 454 9u8 352
3\. ADH 115 i98 544
4\. AKS 352 87y 454
5\. GJS 154 i9k 141 
```

我希望将第 3 列（开始：8 长度：3）的所有唯一值复制到文件 B 中。我已经尝试了[如何在 Perl 中提取特定数据列中提供的解决方案？](https://stackoverflow.com/questions/3573678/how-to-extract-a-particular-column-of-data-in-perl)无济于事。

感谢您提供任何提示或帮助！

```
 #!/usr/bin/perl
use strict;
use warnings;

#use Cwd qw(abs_path);

#my $dir = '/home/
#$dir = abd_path($dir);
my $filename = "filea.txt";
my $newfilename = "fileb.txt"; 

#Open file to read raw data
open (DATA1, "<$filename") or die "Couldn't open $filename: $!";

#Open new file to copy desired columns
open (DATA2, ">$newfilename") or die "Couldn't open $newfilename: $!";

#Copy data from original to new file

while (<DATA1>) {
    #DATA2=splice(DATA1, 0,5);
    print DATA2 $_;
    my @fifth_column = map{(split)[1]} split /\n/, $newfilename;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:53:16.997

如果我理解正确，您可以为此使用一个相当简单的脚本。

```
use strict;
use warnings;

my %seen;
while (<DATA>) {
    my $str = substr($_, 8, 3);   # the string you seek
    unless ($seen{$str}++) {      # if it is not seen before
        print "$str\n";           # ...print it
    }
}

__DATA__
AAA 565 u8y 221
AAA 565 u8y 221
ABC 454 9u8 352
ADH 115 i98 544
AKS 352 87y 454
GJS 154 i9k 141 
```

**输出：**

```
u8y
9u8
i98
87y
i9k 
```

文件句柄在`DATA`这里用于演示。我还在数据中添加了一个副本来演示重复数据删除。如果您更改`<DATA>`为，`<>`您可以像这样简单地使用脚本：

```
perl script.pl filea.txt > fileb.txt 
```

**请注意**，这依赖于您的数据是*固定宽度*的，这意味着如果您的字段不对齐，您的输出将被损坏。

另请注意，这只是一个简单单行的完整版本，如下所示：

```
perl -nlwe '$x=substr($_,8,3); print $x unless $seen{$x}++' filea.txt > fileb.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:47:32.693

看看以下 Perl 命令：

*   **[`split`](http://perldoc.perl.org/functions/split.html)**：这允许您将一行数据拆分为一个数组：

例子：

```
while ( my $line = <$input_fh> ) {
    my @items = split /\s+/, $line;   #Columns are separated by spaces or tabs
    my $third_column = $items[2];  #The column you want;
    blah...blah...blah;
} 
```

*   **[`substr`](http://perldoc.perl.org/functions/substr.html)**：这允许您指定列信息的子字符串。如果您的列由制表符分隔，这可能没有那么有用。对于大多数非 Perl 开发人员来说，这是他们尝试的第一种方法。但是，我建议使用`split`.

有一个 Perl 技巧可以确保您的数据是唯一的：使用散列来存储您的信息。在散列中查找数据[`exists`](http://perldoc.perl.org/functions/exists.html)很快，如果您已经看过该数据，该函数可用于快速查找。将其与`split`：

```
use strict;
use warnings;
use autodie;

use constants {
    INPUT_FILE  => "filea.txt",
    OUTPUT_FILE => "fileb.txt",
};

open my $input_fh, "<", INPUT_FILE;
open my $output_fh ">", OUTPUT_FILE;

my %unique_columns;
while ( my $line = <$input_fh> ) {
    my @items = split /\s+/, $line;   #Columns are separated by spaces or tabs
    my $third_column = $items[2];  #The column you want;
    if ( not exists $unique_columns{$third_column} ) {
        $unique_columns{$third_column} = 1;
        print {$output_fh} "$third_column\n";
    }
}
close $output_fh; 
```

`%unique_columns`哈希跟踪以查看您之前是否在文件的第三列中看到过该数据。将每个单独的键设置为等于什么都没关系。但是，我建议将其设置为非零或空白值，因为如果您这样做：

```
if ( $unique_columns{$data} ) 
```

代替

```
if ( exists $unique_columns{$data} ) 
```

只要 的值`$unique_columns{$data}`不是零或空白，您的程序仍然可以工作，否则会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:29:16.580

当谈到固定长度时，没有什么比打包/解包更好的了，学习这个教程，它会让你的生活更轻松，这项工作小菜一碟。

[http://linux.die.net/man/1/perlpacktut](http://linux.die.net/man/1/perlpacktut)

# c++ - 指向 if 语句中变量的 C++ 指针

> ID：15094484
> 
> 赞同：0
> 
> 时间：2013-02-26T16:38:41.930
> 
> 标签：c++, pointers, stack

下面代码的行为让我感到惊讶：

```
map<string,long>* map_ptr;
if(true){
    map<string, long> my_map;
    my_map["a"] = 1;
    my_map["b"] = 2;
    my_map["c"] = 3;
    map_ptr = &my_map;
}

//works ONLY IF this for loop comes before the next for loop
for(map<string, long>::iterator itr = map_ptr->begin(); itr != map_ptr->end(); ++itr)
    cout << itr->second << endl; 

// does not work prints random bits
for(map<string, long>::iterator itr = map_ptr->begin(); itr != map_ptr->end(); ++itr)
    cout << itr->first << endl; 
```

我知道在 if 语句中创建的变量仅在其中具有作用域，但我认为声明指向它们的指针会起作用。我对这段代码的堆栈结构了解有限，但我认为变量虽然超出了范围，但仍然在堆栈上，所以它们仍然存在。但似乎发生的事情比我所知道的要多。最让我惊讶的是为什么第一个 for 循环可以正确打印出东西，但前提是它是在第二个 for 循环之前执行的。我想这与类型有关，因为`long`它是内置的，而 as`string`不是，但这远远不足以解释正在发生的事情。

请帮助我理解这段代码。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:41:49.930

代码具有未定义的行为，这意味着任何事情都可能发生，包括看起来可以工作，就像`map_ptr`悬空指针一样，`my_map`它将`}`在`if`. 将`map_ptr`保留的*地址*，`my_map`但这`my_map`无论如何都不会影响的生命周期。

# powershell - Active Directory 中的 Powershell 安全身份映射/名称映射

> ID：15094486
> 
> 赞同：1
> 
> 时间：2013-02-26T16:38:47.063
> 
> 标签：powershell

我编写脚本来创建/更新 Active Directory 用户没有问题。现在需要为每个域用户添加名称映射，以便我们可以使用中央 Kerberos 身份验证。

PS：我正在使用 QUEST Active Directory 模块。

我在 Powershell 脚本中找不到任何可以实现此目的的东西。有人知道吗？它可以是任何语言，不一定是 Powershell。我总是可以让 Powershell 与另一个脚本对话以实现目标。

下面显示了手动添加名称映射的屏幕。 ![在此处输入图像描述](../Images/873a3e6e0535fdec39265240dfe80d8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T16:17:58.750

警告：映射帐户的确切语法是

```
Set-ADUser "Username" -Add @{'altSecurityIdentities'="Kerberos:ACCOUNT1@DOMAIN","Kerberos:ACCOUNT2@DOMAIN2"} 
```

请务必在括号内添加**'altSecurityIdentities'=**。

您可以根据要实现的目标使用 -Add 或 -Replace。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T20:50:58.647

秘密在于这是**altSecurityIdentities**属性。

我花了很多时间在互联网上寻找一种方法来做到这一点，但我找不到答案。 [这个微软页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675221%28v=vs.85%29.aspx#win_2008_r2)是我需要的突破。

这就是我想出的：

您可能必须`Import-Module ActiveDirectory`在脚本的开头。在下面的代码中，替换 USERNAME，但保留引号。

在这里，我添加了 2 个 Kerberos 名称：

```
Set-ADUser -Identity "USERNAME" -Replace @{Kerberos:ACCOUNT1@DOMAIN,Kerberos:ACCOUNT2@DOMAIN} 
```

在这里，我插入了一个 X509 证书和一个 Kerberos 名称：

```
Set-ADUser -Identity "USERNAME" -Replace @{X509:CERTIFICATEINFORMATION,Kerberos:ACCOUNT2@DOMAIN} 
```

显然，您可以通过使用逗号分隔条目来添加多于或少于 2 个。我用来验证我是否成功添加了信息的以下命令...但是手动映射用户并使用它来了解格式应该是什么样子可能会有所帮助：

```
Get-ADUser -Identity "USERNAME" -Properties * | select altSecurityIdentities 
```

希望这可以帮助！

# python - python optparse 在缺少时将下一个选项视为当前选项的选项参数

> ID：15094487
> 
> 赞同：1
> 
> 时间：2013-02-26T16:38:53.657
> 
> 标签：python, optparse

我使用 optparse 来解析我的脚本的命令选项。我有 -f 和 -c 选项，它们都需要一个选项参数。但是当它丢失时，它会将下一个选项视为当前选项的选项参数。例如

```
./myScript -f -c 
```

这会将“-c”视为“-f”的选项参数，而不是抱怨“-f”和“-c”缺少选项参数。对于其他正常情况，它工作正常。

感谢您提供任何信息和解决方案！

**更新： 解决方法，通过使用argparse，可以避免这个问题。它退出时出现错误，抱怨缺少选项参数。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:08:56.263

`optparse`从 python 2.7 开始已弃用，因此您应该使用`argparse`内置此行为的模块：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('-f')
parser.add_argument('-c')

parser.parse_args(['-f', 'f_val', '-c', 'c_val'])   #works as expected
parser.parse_args(['-f', '-c'])                     #errors as expected 
```

如果您只剩下 python < 2.7 和`optparse`模块，您可以在解析阶段之后通过自定义检查轻松完成：

```
parser = OptionParser('usage')
parser.add_option("-f", "--ff", dest="f_value")
parser.add_option("-c", "--cc", dest="c_value")

(options, args) = parser.parse_args()

if options.f_value == '-c':
    print 'error: -f requires an argument'
    exit(1) 
```

# c# - 如何递归遍历层次结构中的每个对象并删除所有事件引用？

> ID：15094488
> 
> 赞同：1
> 
> 时间：2013-02-26T16:38:59.297
> 
> 标签：c#, events, recursion, memory-leaks, event-handling

我需要删除系统中每个对象的所有事件绑定。有数千个对象正在保存事件，这会导致内存泄漏。我在严重的时间限制下进行排序，所以我想知道是否有一种方法可以递归地循环遍历对象层次结构以删除事件绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:55:42.647

注意：这都是**非常**骇人听闻的东西，我不容忍它的使用！

也就是说……是的，你可以。有点。

假设你有一堂课`Foo`：

```
public class Foo
{
    public event EventHandler SomeEvent;
    public void Trigger()
    {
        if(SomeEvent != null)
        {
            SomeEvent(this, new EventArgs());
        }
    }
} 
```

我们更新了其中一个，并以多种方式连接到事件：

```
public class Bar
{
    public Bar(Foo foo)
    {
        foo.SomeEvent += FooEvent;
    }
    public void FooEvent(object sender, EventArgs e)
    {
        Console.WriteLine("Bar.FooEvent!");
    }
}

var foo = new Foo();
var bar = new Bar(foo);
foo.SomeEvent += (o,e) => Console.WriteLine("SomeEvent");

Console.WriteLine("Normal");
foo.Trigger(); 
```

输出：

```
Normal
Bar.FooEvent!
SomeEvent 
```

到目前为止一切正常，对吧？

现在 - 通过反射允许的肮脏：

首先，我们需要引用事件的`EventInfo`和`remove`方法：

```
var theFooEvent = foo.GetType().GetEvent("SomeEvent");
var theFooRemover = theFooEvent.GetRemoveMethod(true); 
```

接下来，我们将滥用`Expressions`一点来获得“现值”：

```
var exp = 
    System.Linq.Expressions.Expression.PropertyOrField(
        System.Linq.Expressions.Expression.Constant(foo), 
        "SomeEvent");
var member = exp.Member;
var rtMember = (member as FieldInfo).GetValue(foo) as EventHandler; 
```

我们已经完成了一半——现在要清除所有现有的处理程序：

```
var handlers = rtMember.GetInvocationList();
foreach(var handler in handlers)
{
    theFooRemover.Invoke(foo, new[] { handler });
} 
```

那里……就是这样！进一步调用`Trigger`实际上不会做任何事情：

```
Console.WriteLine("Post hackery");
foo.Trigger(); 
```

输出：

```
Post hackery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:07:13.613

讨厌。除非您知道事件处理程序的名称，否则反射看起来是不可能的；是否可以修改对象的 Dispose 方法以删除其成员的事件处理程序？

# java - 如何使用 Java 与 Arduino 交谈？

> ID：15094489
> 
> 赞同：-4
> 
> 时间：2013-02-26T16:39:01.957
> 
> 标签：java, arduino

我如何使用 Java 与 Arduino 交谈？

我的[CNC](http://en.wikipedia.org/wiki/Numerical_control)项目需要它。这段代码似乎有效，但我不知道如何使用它。请参阅 Stack Overflow 问题*[Control an Arduino with Java](https://stackoverflow.com/questions/12023640)*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:42:23.623

看看*[Arduino 和 Java](http://playground.arduino.cc/Interfacing/Java)*页面。它讨论了 Java/Arduino 串行通信。

[但是，要使用Java](http://en.wikipedia.org/wiki/Java_%28programming_language%29)控制 Arduino ，您必须对其进行编程以接受命令并使用 Java 向其发送命令。你不能用 Java 直接控制它，因为 Arduino 使用[Processing](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)，这是一种类似 C 的语言。

# android - onPageSelected 在 vi ewPager.setCurrentItem 上立即调用

> ID：15094492
> 
> 赞同：2
> 
> 时间：2013-02-26T16:39:10.480
> 
> 标签：android, android-viewpager, android-tabs

对于我的项目，我使用可滑动的标签在列表之间导航。删除其中一个列表时，我希望有一个流畅的动画，并尝试通过`viewpager.setCurrentItem(page, true);`在删除列表之前先切换到另一个页面来存档它。然后，我尝试在切换页面以删除带有`OnPageChangeListener`.

我的问题是似乎`onPageSelected(int position)`在动画完成之前调用了。

这是代码:)

我开始动画的地方：

```
case R.id.menu_clear_lists:
int pageAmount = sectionsPagerAdapter.getCount();
if (pageAmount < 2)
return false;
int page = viewPager.getCurrentItem();
int newPage = page == 0 ? page + 1 : page - 1;
deleteOnChange = true;
deletePage = page;
viewPager.setCurrentItem(newPage, true);
return true; 
```

事件处理程序：

```
if (!deleteOnChange)
    return;
deleteOnChange = false;
Resource.deleteList(deletePage);
sectionsPagerAdapter.destroyItem(viewPager,
viewPager.getCurrentItem(),
sectionsPagerAdapter.getItem(deletePage));
sectionsPagerAdapter.notifyDataSetChanged(); 
```

我希望有人能解决我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T21:47:07.340

[http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)

如果您查看 ViewPager 的 OnPageChangeListener，您会看到一个 onPageScrollStateChanged 方法。如果你在你的监听器上覆盖它，你可以等待它发送一个“SCROLL_STATE_IDLE”作为参数，这意味着页面已经稳定并处于静止状态。但是要小心，因为如果用户开始滚动但实际上并没有转到新页面，您将得到解决并且它将在当前页面上。您可能希望同时使用 onPageSelected 和 onPageScrollStateChanged 来跟踪页面是否已翻页，以及是否已翻页。

# c# - CRM 2011，解决方案和发布者选项不可用

> ID：15094496
> 
> 赞同：2
> 
> 时间：2013-02-26T16:39:41.957
> 
> 标签：c#, .net, dynamics-crm-2011, dynamics-crm

问题是，当我转到设置 - > 自定义时，它不允许我对现有实体进行任何更改，也不允许我创建新的自定义实体。

它只显示一条简单的消息：警告：解决方案和发布者选项不可用，因为您的语言与系统基本语言不匹配。

我尝试用谷歌搜索并搜索找到这种基本系统语言的选项，但到目前为止没有成功。我怎样才能实现编辑和创建新的自定义实体的可能性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:10:20.400

**如何：**将当前语言更改为基本语言，然后重试。

**原因：仅当****当前语言**集实际上与安装期间的**基本语言**集相同时，才允许对系统进行自定义。

**恕我直言：**我刚才问过为什么会这样，但我没有得到任何直接和可接受的答案。它更多的是“*它就是那样*”和“*你可以这样那样处理它*”。因此，在提供更好的解释之前，我骄傲地声称这只是一种不必要的不​​便设计。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T17:04:16.677

查看[这篇](https://community.dynamics.com/crm/b/pabloperalta/archive/2011/03/27/how-to-change-the-language-in-dynamics-crm-2011.aspx)演示如何更改基础和用户语言的文章，并有下一个警告：

> **请记住，作为管理员/定制者，如果我们需要定制任何实体和/或解决方案，这只能在登录用户使用基本语言（在这种情况下为英语）时完成。**

# python - libSVM 中的 plotroc.py 错误

> ID：15094497
> 
> 赞同：0
> 
> 时间：2013-02-26T16:39:44.173
> 
> 标签：python, machine-learning, svm, libsvm

我正在尝试从 libSVM 运行[plotroc.py](http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/roc/plotroc.py)但我弹出了一些错误消息，我编译了库，所以我确实拥有它并且对它的调用是正确的

```
 Traceback (most recent call last):
  File "plotroc.py", line 3, in <module>
    from svmutil import *
  File "libsvm-master/python/svmutil.py", line 5, in <module>
    from svm import *
  File "libsvm-master/python/svm.py", line 303, in <module>
    fillprototype(libsvm.svm_get_sv_indices, None, [POINTER(svm_model), POINTER(c_int)])
  File "/opt/python-2.7/lib/python2.7/ctypes/__init__.py", line 366, in __getattr__
    func = self.__getitem__(name)
  File "/opt/python-2.7/lib/python2.7/ctypes/__init__.py", line 371, in __getitem__
    func = self._FuncPtr((name_or_ordinal, self))
AttributeError: libsvm-master/python/../libsvm.so.2: undefined symbol: svm_get_sv_indices 
```

你能指出问题的根源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T09:55:56.500

仅适用于 linux 系统：

下载 libsvm.zip 包。解压后找到名为“python”的目录。此目录必须包含 svmutil.py、Makefile、svm.py 等文件

运行“make”命令..

将您的 plotroc.py 脚本粘贴到该目录中

./plotroc.py

# javascript - 为什么使用 ('function' === typeof x) 而不是 (typeof x === 'function')

> ID：15094506
> 
> 赞同：2
> 
> 时间：2013-02-26T16:40:05.060
> 
> 标签：javascript, conditional, typeof

在一些开源 JavaScript 项目中，我看到人们使用`('function' === typeof x)`. 我想知道为什么人们使用它而不是`(typeof x === 'function')`.

我觉得第二种方式更自然。使用第一种方法有什么好的理由吗？表现？潜在的错误？还是只是风格问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T16:46:45.550

这些被称为“尤达条件”（因为它们听起来像尤达）：

![尤达](../Images/7d0b4e9f38432153b712a6b2edc6b530.png)

有些人更喜欢它们，因为如果错误地使用而不是or`Invalid left-hand side in assignment`会引发错误。以最常见的顺序（即 ，将发生静默分配，并将搞砸程序逻辑。`=``==``===``if(count = 5)`

请注意，这`'function' === typeof x`不是一个很好的例子；由于`typeof x`将评估为字符串，因此无论操作数的顺序如何，放错位置的赋值运算符在这种情况下总是会抛出错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T16:41:09.933

它们是相同的表达方式。当您与`==`or进行比较时`===`，表达式的哪一侧是什么并不重要。

```
if(null === myVar)

if('hello' === str) 
```

等都是有效的。

如果两个表达式之一很长，您可能希望将其放在右侧，以便眼睛更容易看到正在比较的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T16:46:26.807

可能没有理由，但它可能在历史上来自 = 和 == 差异，它确实很重要。看东西

```
if (a = 5) 
```

和

```
if (5 = a) 
```

是第一个不检查**a**是否为 5，而是将 5 分配给**a**。所以人们想出了反向检查，这会引发编译错误，因为你不能分配给**5**等等。这样你可以在你忘记一个 = 时修复你的代码。所以它也可能是出于一致性目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:45:20.973

它们是相同的。一些 Java 程序员倾向于以这种方式编写它，作为 Java 中通常的最佳实践来编写`null != object.getSomething()`而不是`object.getSomeThing() != null`. 这是为了避免可能的*NullPointer*

但是，在 Javascript 中，这是没有意义的。正如你所指出的， `(typeof x === 'function')`这是自然的方式。

# c++ - “静态初始化”到底是什么意思？

> ID：15094514
> 
> 赞同：4
> 
> 时间：2013-02-26T16:40:36.857
> 
> 标签：c++, c++11

我一直在阅读 C++11 中的 POD，并且我读过的几个地方都谈到了支持静态初始化的 POD。例如：

[在 StackOverflow 上](https://stackoverflow.com/a/7189821/1287251)：

> POD 的想法基本上是捕获两个不同的属性：
> 1.**它支持静态初始化**，以及
> 2\. 在 C++ 中编译 POD 为您提供与在 C 中编译的结构相同的内存布局。

（只有粗体部分是相关的）

[在维基百科上](http://en.wikipedia.org/wiki/C++11#Modification_to_the_definition_of_plain_old_data)：

> 可以静态初始化平凡的类型。

显然我不明白什么是静态初始化。我认为创建全局变量是静态初始化的一个示例，但我可以执行以下操作，但`Foo`不是 POD：

```
#include <type_traits>
#include <iostream>

struct Foo {
  Foo() : x(0), y(0) {}
  int x;
  int y;
};

struct Bar {
  Bar() = default;
  int x;
  int y;
};

// Apparently the following two lines are not "static initialization" because
// Foo is non-POD yet we can still do this:
Foo f;
Bar b;

int main()
{
    if (std::is_pod<Foo>::value) std::cout << "Foo is a POD" << std::endl;
    else                         std::cout << "Foo is *not* a POD" << std::endl;

    if (std::is_pod<Bar>::value) std::cout << "Bar is a POD" << std::endl;
    else                         std::cout << "Bar is *not* a POD" << std::endl;
} 
```

[输出](http://ideone.com/flearO)：

> `Foo is *not* a POD`
> `Bar is a POD`

那么静态初始化到底是什么，它与普通类有什么关系呢？例子会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:48:06.780

*具有静态*持续时间的对象的初始化分为两个过程，*静态*初始化和*动态初始化（注意术语**静态*的滥用:)）。

*动态*初始化是指涉及调用函数的初始化，因此必须在运行时进行，与可以存储在可执行文件本身并刚刚加载的文字的初始化相比。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T16:53:14.600

静态初始化适用于具有静态或线程存储持续时间的变量。它分两个阶段发生。

首先，具有静态存储持续时间的变量在任何其他初始化之前被初始化为零。

然后执行常量初始化。常量初始化必须是以下三种可能性之一（§3.6.2/2）：

> *   如果出现在具有静态或线程存储持续时间的引用的初始化程序中的每个完整表达式（包括隐式转换）都是一个常量表达式（5.19）并且该引用绑定到一个左值，该左值指定具有静态存储持续时间的对象或临时（见 12.2）；
>     
>     
> *   如果具有静态或线程存储持续时间的对象由构造函数调用初始化，如果构造函数是 constexpr 构造函数，如果所有构造函数参数都是常量表达式（包括转换），并且如果在函数调用替换 (7.1.5) 之后，每个非静态数据成员的 mem 初始化器和大括号或等号初始化器中的构造函数调用和完整表达式是常量表达式；
>     
>     
> *   如果具有静态或线程存储持续时间的对象未由构造函数调用初始化，并且出现在其初始化程序中的每个完整表达式都是常量表达式。

任何其他初始化（甚至是全局变量）都是动态初始化。但是，允许编译器将动态初始化视为静态初始化，前提是这样做不会改变程序的外部可见效果，假设它可以计算出正确的值（即使该值没有正式限定为常量表达式）。

a 的定义`constant expression`（不幸的是）相当长且涉及。定义的基本风格是将 a 定义`core constant expression`为除符合例外列表的表达式之外的任何表达式（不幸的是，它超过一页，因此将其总结为快速且易于理解的内容并不容易）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T16:45:29.527

静态初始化是使用编译时值初始化某些变量，以便该值最终被“烘焙”到可执行映像中（不需要实际*运行*代码）：

```
struct Foo {
  int x;
  int y;
};

Foo foo = { 0, 1 }; 
```

在上面的例子`struct Foo`中是 POD，所以编译器知道它的内存布局只是两个相邻的整数。它还知道`foo.x`应该初始化为`0`和。这些信息足以生成一个“内存映像”，说明应该如何查看**编译时间**并将其写入可执行映像。`foo.y``1``foo`

 **稍后运行映像时，操作系统加载程序将其内容映射到内存地址，并以这种方式`foo`“活着”。`foo`重要的是，在进程（包括您的代码以及首先运行的 C/C++ 运行时中的代码）有时间执行甚至一条 CPU 指令之前，“初始化”实际上已经完成。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T16:49:37.147

> 静态成员初始化发生在类范围内。因此，他们可以访问其他成员数据或功能。

引用自[MSDN](http://msdn.microsoft.com/en-us/library/8yc35419%28v=vs.80%29.aspx)

有一个很好的例子来说明它是如何工作的。**

# ruby-on-rails - Rails：如何关闭我的 CSS 和 JS 资产的时间戳？

> ID：15094522
> 
> 赞同：-1
> 
> 时间：2013-02-26T16:41:06.143
> 
> 标签：ruby-on-rails

我想删除我的 CSS 和 JS 文件上由 rails 缓存生成的时间戳。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:57:03.737

`config.assets.debug = false`在`config/application.rb`相关环境配置中设置的资产预编译期间关闭附加到文件名的摘要。

这在导轨的这一部分的底部有说明。

[资产摘要](http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care)

# ios - Apple Mach-O Linker (Id) Error using OpenCV framework for iOS

> ID：15094526
> 
> 赞同：0
> 
> 时间：2013-02-26T16:41:12.467
> 
> 标签：ios, xcode, opencv, objective-c++

我在 iOS 上的 opencv 项目遇到了另一个问题。

所以我有一个用 Ojective C 编写的小项目，其中有两种用 C++ 编写的方法：

我的 ViewController.hh 文件：

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>
@interface ViewController : UIViewController

static UIImage* MatToUIImage(const cv::Mat& m);
static void UIImageToMat(const UIImage* image, cv::Mat& m);
@end 
```

和我的 ViewController.mm 文件：

```
#import "ViewController.hh"

@interface ViewController ()

@end

@implementation ViewController

static UIImage* MatToUIImage(const cv::Mat& m) {
    CV_Assert(m.depth() == CV_8U);
    NSData *data = [NSData dataWithBytes:m.data length:m.elemSize()*m.total()];
    CGColorSpaceRef colorSpace = m.channels() == 1 ?
    CGColorSpaceCreateDeviceGray() : CGColorSpaceCreateDeviceRGB();
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);
    // Creating CGImage from cv::Mat
    CGImageRef imageRef = CGImageCreate(m.cols, m.cols, m.elemSize1()*8, m.elemSize()*8,
                                        m.step[0], colorSpace, kCGImageAlphaNoneSkipLast|kCGBitmapByteOrderDefault,
                                        provider, NULL, false, kCGRenderingIntentDefault);
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef); CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace); return finalImage;
}

static void UIImageToMat(const UIImage* image, cv::Mat& m) {
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.width, rows = image.size.height;
    m.create(rows, cols, CV_8UC4); // 8 bits per component, 4 channels
    CGContextRef contextRef = CGBitmapContextCreate(m.data, m.cols, m.rows, 8, m.step[0], colorSpace, kCGImageAlphaNoneSkipLast |kCGBitmapByteOrderDefault);
    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef); CGColorSpaceRelease(colorSpace);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSString* filename = [[NSBundle mainBundle] pathForResource:@"cmc7" ofType:@"jpg"];
    UIImage *image = [UIImage imageWithContentsOfFile:filename];

    //cv::Mat inputMat = self.UIImageToMat(image);
    cv::Mat mat;
    UIImageToMat(image, mat);
    UIImage *newImage = MatToUIImage(mat);

    self.view.backgroundColor = [UIColor colorWithPatternImage:newImage];
} 
```

我以这种方式包含了我的opencv框架：

```
#import <Availability.h>

#ifndef __IPHONE_5_0
#warning "This project uses features only available in iOS SDK 5.0 and later."
#endif

#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif 
```

我确切地说我有一个类似的项目，包含相同的内容，但使用的是用 Objective C 而不是 C++ 编写的方法，并且它可以工作。

所以这是我的日志错误。

```
Undefined symbols for architecture i386:
  "cv::Exception::Exception(int, std::string const&, std::string const&, std::string const&, int)", referenced from:
      __ZL12MatToUIImageRKN2cv3MatE in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

所以有什么问题 ？我真的更喜欢用 C++ 编写方法，因为使用 C++ 语言而不是 Objective C 来使用 openCV 更为常见。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:24:33.623

也许您的项目没有链接到 C++ 运行时库

Build Phases > Link Binary With Libraries > + button > 为 OpenCV 2.4.3 选择“libc++.dylib”，或者

OpenCV 2.4.2 及之前版本的“libstdc++.dylib”。

重建应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-28T04:35:51.210

尝试将构建设置中的“C++ 标准库”和“C++ 语言方言”更改为编译器默认值。

[![在此处输入图像描述](../Images/0af5493f8749973114a30286ffda49f1.png)](https://i.stack.imgur.com/rrcwl.png)

# node.js - 一个节点的架构或逻辑，Mongo (Capped and Persistent) Socket.io Real Time Web Application

> ID：15094527
> 
> 赞同：1
> 
> 时间：2013-02-26T16:41:13.410
> 
> 标签：node.js, mongodb, web-applications, socket.io, real-time

所以可能是一个非常基本的问题，但我想要实现的是一个具有实时功能的 Web 应用程序，它使用 socket.io 和带有可尾游标的 mongodb 封顶集合（普通的 mongodb 集合也用于持久数据）。

现在让我们假设该应用程序是一个在线聊天系统，其中包含房间、多个用户和飞来飞去的消息。

两个主要问题如下：

```
a) When the first initially joins the app, how/where should the initial set of data (list of chat rooms, maybe a count of users next to them) be loaded from...

    -> persistent mongo storage : db.Rooms.find().orderBy({ date : -1 })
    -> retrieved from "memory", a capped collection, some form of stream....

b) When the second user joins, should their initial set of data be loaded from

    -> either of the first two options for (a) or alternatively  or hit the first client up for their "live" version of data 
```

紧随其后的是，当第一批用户加入一个有人聊天的房间时，他们需要将历史记录提高到一个点……而不是实时数据……也许看看旧消息……等等等等。

基本上，目前我正在创建 socket.io 房间，我根据用户所在的“主干”视图订阅用户，并通过 socket.io 将“实时”数据直接加载给他们。

我主要对初始数据加载感到困惑，我猜想正确的架构客户端 -> 消息队列 -> db -> 消息队列 -> 客户端类型的设置

下面的伪代码排序

```
Initialize App and Sockets

==== assumption: application is called chat, has chat rooms, messages flying about in them ====

User 1 socket connect -> join "chat" 

    sockets requests room list (top X rooms) -> mongo db query?

User 2 socket connect -> join "chat" 

    socket requests room list (top X rooms) -> mongo db query? memcache? tailable cursor?

==== messages exist and are continually being sent to chatRoom1 =====

Users 1 joins "chatRoom1" -> socket notifies others a new user has joined

    socket requests user list and top X messages and Y users

User 2 joins "chatRoom1" -> socket notifies others a new user has joined

    socket requests user list and top X messages and Y users (potentially newer messages that user 1)

New Messages follow this process

    // client event handler on a new message, write to div for the correct room
    Client -> socket.on("new message", function(data) { $("#" + data.room).find("div.messages").append(data.message) }

    // client sending a new message, specifies room name and message
    Client -> socket.emit("new message", { "room" : "chatRoom1", "message" : "contents of the message" }

    // Server receives message and does two things
    // a) sends it to other clients of the same room
    Server -> socket.on("new message", function(data) {  io.sockets.in(data.room).emit("new mesage", data)   } )
    // b) stores it in the collection (capped?) 
```

谢谢！

# javascript - 脸书更新上的评论和喜欢

> ID：15094531
> 
> 赞同：1
> 
> 时间：2013-02-26T16:41:23.763
> 
> 标签：javascript, facebook, facebook-graph-api

我一直在 developer.facebook.com 网站上阅读，但他们对这些事情的解释非常糟糕。所以我希望你们中的一些人可以向我解释如何使用 JavaScript 和 Graph API 在 Facebook 状态上添加评论和点赞按钮。

我现在拥有的是一个应用程序，它显示登录用户的主页（如果需要，可以使用新闻源）。我想要的是基本的 Facebook 功能，即能够评论和喜欢这些状态、图像、分享等（就像你在 Facebook 上一样），还可以查看评论和喜欢这些照片和状态的其他人。

我知道你需要使用 POST 方法，但我不知道我会这样做（这里有一些信息：http: [//developers.facebook.com/docs/reference/api/publishing/](http://developers.facebook.com/docs/reference/api/publishing/) )

所以这是我现在的代码（我不知道这是否是最有效的方法，但它有效。如果你也能给我一些建设性的批评，我会很高兴）：

```
FB.api('/me/home', function(response) {
  console.log(response.data);
  for(var i=0, len = response.data.length; i < len; i++){ 

    var post_type = response.data[i].status_type; //Post type

    var poster_id = response.data[i].from.id; //Poster
    var poster_name = response.data[i].from.name; //Posters name
    var poster = '<a href="http://www.facebook.com/' + poster_id + '/" >' + poster_name + '</a>'; //Link to poster
    var poster_pic  = 'https://graph.facebook.com/' + poster_id + '/picture'; //Posters profile pic
    var poster_img = '<img height="50px" width="50px" src="' + poster_pic + '" />';

    var post_id = response.data[i].id; //Id of message
    var post = response.data[i].message; //Content of message
    var post_date = response.data[i].created_time; //Date created

    var object_id = response.data[i].object_id; //Pic id (if pic's an object)
    var post_img_url = response.data[i].picture; //Pic url

    if(!object_id) {
      var post_img = '<a href="http://www.facebook.com/' + post_id + '/"> <img src="' + post_img_url + '" /> </a>'; // <a href="http://www.facebook.com/' + post_id + '/">See at Facebook</a>
    } else {
      var post_img = '<a href="http://www.facebook.com/' + object_id + '/"> <img src="' + post_img_url + '" /> </a>';
    }

    if (!post_img_url) {
      post_img = '';
    }

    if(!post) {
      post = response.data[i].story;
    }

    if (post_type === 'wall_post') {
      if(response.data[i].to) {
        var posted_to_name = response.data[i].to.data[0].name;
        var posted_to_id = response.data[i].to.data[0].id;
        var posted_to = '<a href="http://www.facebook.com/' + posted_to_id + '/" >' + posted_to_name + '</a>';

        document.getElementById("write").innerHTML += ('<hr> <div class="facebook_content"> <div class="facebook_left_side"> <div class="facebook_content_header"> <div class="poster_img">' + poster_img + '</div> <div class="poster">' + poster + '</div> <div class="post_type"> wrote on ' + posted_to + '\'s wall: </div> <div class="post_date">' + post_date + '</div> </div> <div class="story">' + post + '</div> </div> <div class="facebook_right_side"> <div class="img">' + post_img + '</div> </div> </div> </br>');
      } else {
        document.getElementById("write").innerHTML += ('<hr> <div class="facebook_content"> <div class="facebook_left_side"> <div class="facebook_content_header"> <div class="poster_img">' + poster_img + '</div> <div class="poster">' + poster + '</div> <div class="post_date">' + post_date + '</div> </div> <div class="story">' + post + '</div> </div> <div class="facebook_right_side"> <div class="img">' + post_img + '</div> </div> </div> </br>');
      }
    } else if (post_type === 'added_photos') {
      document.getElementById("write").innerHTML += ('<hr> <div class="facebook_content"> <div class="facebook_left_side"> <div class="facebook_content_header"> <div class="poster_img">' + poster_img + '</div> <div class="poster">' + poster + '</div> <div class="post_type"> added a photo: </div> <div class="post_date">' + post_date + '</div> </div> <div class="story">' + post + '</div> </div> <div class="facebook_right_side"> <div class="img">' + post_img + '</div> </div> </div> </br>');

} else if (post_type === 'shared_story') {
      document.getElementById("write").innerHTML += ('<hr> <div class="facebook_content"> <div class="facebook_left_side"> <div class="facebook_content_header"> <div class="poster_img">' + poster_img + '</div> <div class="poster">' + poster + '</div> <div class="post_type"> shared: </div> <div class="post_date">' + post_date + '</div> </div> <div class="story">' + post + '</div> </div> <div class="facebook_right_side"> <div class="img">' + post_img + '</div> </div> </div> </br>');

} else {
      document.getElementById("write").innerHTML += ('<hr> <div class="facebook_content"> <div class="facebook_left_side"> <div class="facebook_content_header"> <div class="poster_img">' + poster_img + '</div> <div class="poster">' + poster + '</div> <div class="post_date">' + post_date + '</div> </div> <div class="story">' + post + '</div> </div> <div class="facebook_right_side"> <div class="img">' + post_img + '</div> </div> </div> </br>');
}
  }
}); 
```

我显然需要添加三个（或更多）包含点赞和评论按钮的 div，并且至少有一个在点击时显示最新的评论（就像在 Facebook 上一样）。我需要添加某种 JS 代码，向 facebook 发送请求，其中包含状态/图像的 id、用户的 id、执行的操作类型（喜欢或评论）以及最后的内容评论是在这种情况下。

我请求此信息的原因是我正在开发一个项目，我只是在尝试 Facebook Graph API 的不同功能，因为它们可以很好地补充我的项目功能，很高兴知道供日后参考。

希望你们中的一些人知道我可以做些什么来使它工作

真诚的，亚历山大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:51:50.087

就个人而言，我认为 Docs 做得很好。

从[文档](https://developers.facebook.com/docs/reference/api/post/)：

```
Create

You can write to the POST_ID/comments connection to post a comment to the post by issuing an HTTP POST request with the publish_stream permission and following parameters.

Parameter    Description     Type    Required
message Comment text    string   yes 
```

评论很简单，一旦你有了要评论的帖子的ID，只需运行

```
 var comment = 'Reading JS SDK documentation';
 var POST_ID = '1231412351234';
 FB.api('/'+POST_ID+'/comments', 'post', { message: comment }, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Great! It worked!');
  }
}); 
```

同样，喜欢更简单。来自相同的文档：

```
You can like a Post by issuing a HTTP POST request to the POST_ID/likes connection with the publish_stream permission. You can suppress the notification created when liking a Post by passing a notify parameter with value of false. 
```

因此，在 Javascript 中：

```
 var POST_ID = '1231412351234';
 FB.api('/'+POST_ID+'/likes', 'post', function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Great! It worked!');
  }
}); 
```

# c# - 应用程序在 Surface 表上崩溃，但在普通桌面上没有

> ID：15094535
> 
> 赞同：1
> 
> 时间：2013-02-26T16:41:41.400
> 
> 标签：c#, wpf, pixelsense

我正在为 Microsoft Surface Table（现在称为 PixelSense）开发一个多点触控应用程序。有时，当我在 Surface Table 上运行应用程序时，我会遇到一个奇怪的异常，但从未在我的台式计算机上运行。它发生在我启动应用程序并进入 SurfaceWindow 之后 - 但并不总是......

例外：

```
Object reference not set to an instance of an object.;; 
   at System.Windows.Input.StylusDevice.ChangeStylusOver(IInputElement stylusOver)
   at System.Windows.Input.StylusLogic.SelectStylusDevice(StylusDevice stylusDevice, IInputElement newOver, Boolean updateOver)
   at System.Windows.Input.StylusLogic.PreNotifyInput(Object sender, NotifyInputEventArgs e)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
   at System.Windows.Input.StylusLogic.InputManagerProcessInput(Object oInput)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run()
   at Client.App.Main() in C:\WorkingFolders\CAD\CAD\src\trunk\ClientServer\CADClient\obj\x86\Debug\App.g.cs:line 0 
```

任何人都知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:10:13.013

您可能想检查在应用程序开始时究竟发生了什么。我的猜测是某些事件处理程序引用了一个尚未创建的对象，但没有代码很难验证。

# javascript - 一个文本区域内的多存储记录 - ExtJs 4

> ID：15094537
> 
> 赞同：0
> 
> 时间：2013-02-26T16:41:42.360
> 
> 标签：javascript, json, cakephp, extjs4

我一直在测试 extjs4 和 cakephp，现在我坚持将 mutil 存储记录放在一个单独的 textarea 中

我的 .js 视图文件中有闲置

```
 {
         xtype: 'textarea',
         name : 'notes',
                     //notes will hold foreign_key number
         allowBlank: true,
         fieldLabel: 'Notes',
         editable: false,
         anchor: '100%'
    } 
```

这是 .js 模型文件。我要调用和过滤的文件

```
Ext.define('Mc.model.Notes', {
extend: 'Ext.data.Model'
,fields: [
    {name: 'id', type: 'int'}
    ,{name: 'foreign_key', type: 'int'}
    ,{name: 'user_id', type: 'int'}
    ,{name: 'user_name', type: 'string'}
,{name: 'notes', type: 'string'}
,{name: 'all', convert: function(v, record) {
    var note = '- '+record.get('notes');
        var username = ' ('+record.get('user_name')+')\r\n';
        return note , username;
    }}
]}); 
```

这个想法是所有包含相同foreign_key的记录都将显示在textarea中。准确地说是“全部”字段。

请问有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:18:02.607

请不要重复发帖，您在 sencha 论坛中提出了完全相同的问题，并且您在那里得到了可靠的答案。

--
Bancha - CakePHP 与 Sencha Touch 和 ExtJS 无缝集成
[http://banchaproject.org](http://banchaproject.org)

# iphone - 你如何在新的 XCode 中“升级 ipad 的目标”？

> ID：15094538
> 
> 赞同：0
> 
> 时间：2013-02-26T16:41:44.160
> 
> 标签：iphone, ios, xcode, ipad, upgrade

我有一个针对 iphone 的应用程序。

现在我想让它对 iphone/ipad 通用。

我读过的所有教程建议的第一步是“升级 ipad 目标”，但我认为这不再存在。

那么有什么新方法呢？复制然后点击复制并过渡到 ipad？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:13:17.403

![改为万能](../Images/eb33aed2fbec0ab06a726363db30bcf5.png) 该图显示了项目设置页面。将目标设备更改为通用

# php - 单独插入所有文本字段以及第一个文本字段值 [多对一关系]

> ID：15094542
> 
> 赞同：15
> 
> 时间：2013-02-26T16:41:54.113
> 
> 标签：php, symfony

# 1\. 介绍

我想知道是否有一种方法可以将一组文本字段保存在数据库的新行中，并且在每个字段中，第一个框的值也将随之保存。

## 2\. 说明

这是表格：

![在此处输入图像描述](../Images/fe1877b257c8b6ae7729b77b0f3aa484.png)

当用户点击保存时，它应该保存在数据库中：

![在此处输入图像描述](../Images/dbd272bf4c71734c2c923c8ddf455552.png)

我的表结构是

![在此处输入图像描述](../Images/690ba9df245c9b474e45de16ff428159.png)

## 3\. 我现在在做什么？！

3.1 - 在我`addNew.php`的（来自类文件（我知道我没有遵循命名约定，我的错）中的构造函数中，我从我的控制器（`addNewAction()`）中获得了一个语言列表。

我遍历语言数组并生成语言翻译的文本字段。

3.2-当用户单击保存时，我遍历文本字段并检查语言键文本字段并将其值保存在变量中，并在每次遍历翻译文本字段时使用该变量

## 4.我目前的代码

* * *

4.1 - 添加新动作

```
public function addNewAction()
{
  // to add new key and translation associated with it
  // an array of optnions which cotains list of languages

  $options = $this->getAllLanguages();
  $form = $this->createForm(new AddNew($options));
  $form->bind($this->getRequest());

  if ($form->isValid()) {
      foreach($form->getData() as $key => $value){
        $oTranslation = new Translations();
        if($key == 'languageKey'){
          $languageKey = $value;
          continue;
        }

        $locale = $key;
        $translation = $value;
        $language = $this->getDoctrine()
                    ->getRepository('CodeizSDBTranslatorBundle:Languages');
        $query = $language->createQueryBuilder('l')
                           ->select('l.id')
                           ->where('l.locale = :locale')
                           ->setParameter('locale' , $locale)
                           ->getQuery();
        $id = $query->getResult();
        $oTranslation->setLanguageId($id[0]['id']);
                     $oTranslation->setLanguageKey($languageKey);
                     $oTranslation->setTranslation($translation);
                  $em = $this->getDoctrine()->getManager();
      $em->persist($oTranslation);
      $em->flush();
    }

      return $this->redirect($this->generateUrl('codeiz_sdb_translator_addlanguagekey'));
  }
   return $this->render('CodeizSDBTranslatorBundle:Default:addNewKey.html.twig', array(
        'form' => $form->createView(),
    ));
} 
```

* * *

4.2 - addNew.php（来自类）

```
<?php
namespace Codeiz\SDBTranslatorBundle\Form\Add;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class AddNew extends AbstractType
{
    private $languages;
    public function __construct($languages){
        $this->languages = $languages;
    }
    public function buildForm(FormBuilderInterface $builder, array $options)
    {

        $builder->add('languageKey');
        foreach ($this->languages as $key => $value) {
                    $builder->add($value['locale'] , 'text' , array('label'=>$value['description']) );
        }

    }

    public function getName()
    {
        return 'addnew';
    }
} 
```

* * *

4.3 - 这是我传递给表单以生成存储在中的文本字段的数组 `$this->languages`，看起来像

```
Array
(
    [0] => Array
        (
            [id] => 1
            [locale] => en_US
            [description] => English - United States
        )

    [1] => Array
        (
            [id] => 2
            [locale] => fr_FR
            [description] => Frenish
        )

) 
```

## 5\. 可能的解决方案

这些是我只是认为我可以做的事情：

5.1-使用我的代码 BLAH 。

5.2-将数据库重组为每种语言都是一列。

## 六，结论

我尝试了很多对我没有效果的事情，而我现在这样做的方式让它看起来不成熟。

Aside from all that, I'm still learning and I really want to solve this problem as-is without restructuring the database and such.

## note:

please avoid discussing performance , keep your focus on the problem ... and please change the title as im sure this isnt the right way to describe the problem .. or even better suggest one .. and if you fiend some incorrect technical terms please edit them .. thanks :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:56:17.207

The below code has a form similar to yours, and writes out SQL select/insert statements for each of the translations. NOTE, the SELECT needs to pass the ID into the second query (the part that says languageid in the values) since you need to get the ID from the database based off the name of the language.

```
<?php
echo '<form method="post">
<input type="text" name="LanguageKey" value="_hello"/>
<input type="text" name="EnglishUS" value="sup"/>
<input type="text" name="French" value="bon"/>
<input type="submit" value="Submit"/>
</form>';

print_r($_POST);
echo "<br />\n";

        foreach ($_POST as $key => $val)
        {
                if ($key != 'LanguageKey')
                {
                        echo $key.': '.$val."<br />\n";
                        echo "SELECT id FROM Languages where description = '$key'<br />\n";
                        echo 'INSERT INTO translation (LanguageId,LanguageKey,Translation) VALUES (\'languageid\',\''.$_POST['LanguageKey'].'\',\''.$val.'\')'."<br />\n";
                }
        }
?> 
```

Results:

![snip of page when it's run](../Images/6ad04659c698dec5197ccdae11611610.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:28:23.190

如果你不介意重构你的代码，我建议你看看 Doctrine 的[Translatable](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md)扩展。它提供了大量关于在 Symfony2 中处理翻译业务的功能集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:24:09.640

您可能也想看看[https://github.com/KnpLabs/DoctrineBehaviors#translatable](https://github.com/KnpLabs/DoctrineBehaviors#translatable)。

可以使用 TranslationType 的集合来处理表单内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:20:22.040

在这种情况下，您要寻找的是[Embedded Forms](http://symfony.com/doc/current/cookbook/form/form_collections.html)。

这允许您创建一个包含多个翻译的翻译表单。

将您的语言关键字段添加到父表单，然后您可以循环访问 POST 数据中的子翻译。

这是一个更优雅和可扩展的解决方案，但如果它没有损坏，请不要修复它。

# html - 从href继承hover样式在href中停止span

> ID：15094545
> 
> 赞同：0
> 
> 时间：2013-02-26T16:41:56.253
> 
> 标签：html, css

**问题**

我需要跨度没有`text-decoration: underline`。无论如何我都无法更改标记。这可能吗？

**标记**

```
<a href="#">
    Working test
    <span>▼&lt;/span>
</a> 
```

**CSS**

```
a:hover {
    text-decoration: underline;
}

a:hover span {
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:53:32.873

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/y2Uta/2/)**。适用于所有现代浏览器和 IE8+。

```
a {
    text-decoration:none;
    position:relative;
    padding-right:16px;
}
a:hover {
    text-decoration: underline;
}
span {
    text-decoration: none;
    position:absolute;
    right:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:48:12.680

恐怕不是。

您将遇到的问题是父元素（锚点`<a>`）将在跨度所在的任何位置都有下划线，因为它位于在 CSS 中设置了下划线的锚点内。如果您可以更改标记，则可以使用如下所示的内容，它将下划线仅应用于您想要下划线的锚部分（包裹在跨度中）。

```
<a href="#"><span class="nounderline">No</span> <span class="underline">Underline</span></a>

a {
  text-decoration: none;
}
span.underline {
  text-decoration: underline;
} 
```

但正如你目前的标记一样，没有办法做到这一点。

# c# - {} 在 linq 结果中

> ID：15094547
> 
> 赞同：3
> 
> 时间：2013-02-26T16:42:00.230
> 
> 标签：c#, .net, linq

```
var query = from c in customers
                join o in orders on c.ID equals o.ID
                select new { c.ID, c.City, SalesBefore = c.Sales, NewOrder = o.Amount, SalesAfter = c.Sales + o.Amount };

    foreach (var item in query)
    {
        Console.WriteLine(item);
    } 
```

我在控制台应用程序中运行上面的代码。当它生成结果时，它会显示在`{}`. 为什么结果在`{}`？

示例结果

```
{ ID=1, City=New York.....} 
```

没有什么要紧的。只是好奇想知道。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T16:43:18.163

这只是`.ToString`匿名类型的默认实现。没有更多或更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:44:21.297

该代码使用`Console.WriteLine(object)`重载，它在后台调用`.ToString()`给定对象的方法。反过来，该`.ToString()`方法以这种方式呈现匿名类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:44:20.963

这只是他们在覆盖该`ToString`方法时选择的外观。这确实意味着该对象看起来像一个属性包，基本上就是这样。

# sql - 对 3 条信息的 SQL 查询依赖于 3 个表中的 1 条信息

> ID：15094549
> 
> 赞同：-2
> 
> 时间：2013-02-26T16:42:04.870
> 
> 标签：sql, sql-server-2008, tsql

我对具有 3 个表的 SQL Server 2008 数据库有疑问`TradeAllocations`：`TradeTickets`和`Contracts`.

我想要 ALL `Trade Allocations`for ALL`Contracts`具有即时日期 > 今天在`Trade Tickets`. 我尝试的任何子查询和连接都没有数据，或者只有未来的提示日期。

任何帮助将不胜感激！

谢谢

```
SELECT 
    TA.ContractID_Ref, C.Contract_Num, TT.PromptDate
FROM 
    TradeAllocations as TA
JOIN
    Contracts as C ON C.ContractID = TA.ContractID_Ref
JOIN 
    TradeTickets as TT ON TT.TradeTicketID = TA.TradeTicketID_Ref 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:49:16.427

你给我们的东西很少，但我会试一试。尝试在查询中添加 where 子句：

```
SELECT TA.ContractID_Ref, C.Contract_Num, TT.PromptDate
FROM TradeAllocations as TA
INNER JOIN Contracts as C
   ON C.ContractID = TA.ContractID_Ref
INNER JOIN TradeTickets as TT
   ON TT.TradeTicketID = TA.TradeTicketID_Ref
WHERE TT.PromptDates > GETDATE () 
```

# css - 在 GWT 中使用 CSS 为我的所有按钮设置样式

> ID：15094551
> 
> 赞同：0
> 
> 时间：2013-02-26T16:42:10.210
> 
> 标签：css

我的应用程序将有大量按钮，我希望以类似的方式设置它们的样式。所以我为此使用CSS。我看到的问题是我必须为每个按钮编写一行代码，说明我要使用的样式名称。为了避免这种重复的代码，我可以改用自己的 BaseButton 扩展 Button 并将样式应用到它，然后让我的所有按钮扩展它还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:51:00.943

如果你使用内置的 Button 类作为你的基本按钮，你可以把它放在 CSS 中：

```
.gwt-Button {
   /*your style here*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:11:12.933

```
input[type="button"] { 
          css code here
} 
```

# java - Spring 表单选项中的附加属性：select 标记

> ID：15094559
> 
> 赞同：1
> 
> 时间：2013-02-26T16:42:31.763
> 
> 标签：java, spring, tags

我需要在由 Springs form:select 标记生成的选项元素上具有其他属性。

选项标签应如下所示：

```
<option value="myValue1" customAttribute="myCustomValue1">Label 1</option> 
```

myCustomValue1 的值来自我绑定到 form:select 标记的项目列表中的对象。

知道如何实现这一目标吗？

谢谢保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:41:47.393

使用普通的 HTML 选择并使用 JSTL 呈现选项。Spring`form:select`只是普通 HTML 选择的快捷方式，它将属性的值正确映射`path`到 HTML`name`属性。

只需在使用 a 的输出上查看源`form:select`代码，复制代码并将其替换到您的 JSP 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:01:00.833

从 Spring 3.1 开始，您可以对所有 spring 的标签使用动态属性 - 请参阅[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-html5)。

# java - 可以使用 Maven PMD 插件一次检查 Java 和 Javascript 吗？

> ID：15094566
> 
> 赞同：2
> 
> 时间：2013-02-26T16:42:57.890
> 
> 标签：java, maven, coding-style, pmd

阅读文档，我无法弄清楚如何配置[Maven PMD 插件](http://maven.apache.org/plugins/maven-pmd-plugin/index.html)以在一次运行中检查 Java 和 Javascript 违规。

由于我们的内部工作流程，我只想生成一份包含所有错误的报告以在 Jenkins 中发布。

您是否成功地同时检查了两种语言？

# iphone - 在 Objective-C 中重新格式化 NSString

> ID：15094575
> 
> 赞同：0
> 
> 时间：2013-02-26T16:43:09.857
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nsstring

我有以下 NSString ，然后我想将其分成两部分：

```
NSString *tmpString = @"Mike <test@gmail.com>"; 
```

我想从中制作两个字符串，如下所示：

```
NSString *tmpString1 = @"Mike";
NSString *tmpString2 = @"test@gmail.com"; 
```

如何在 Objective-C 中实现这一点？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:47:07.503

这样做是这样的，

```
NSArray *tmpArray = [@"Mike <test@gmail.com>" componentsSeparatedByString:@"<"];
NSString *tmpString1 = [tmpArray objectAtIndex: 0];
NSString *tmpString2 = [tmpArray objectAtIndex: 1];

tmpString2 = [tmpString2 stringByReplacingOccurrencesOfString:@">" withString:@""];
tmpString1 = [tmpString1 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:58:09.130

有几种方法可以做你想做的事。

您可以在空格 ( ) 上拆分字符串[`-[NSString componentsSeparatedByString:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/componentsSeparatedByString%3a)，然后修剪掉多余的`<`和`>`您不想要的[`-[NSString stringByTrimmingCharactersInSet:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByTrimmingCharactersInSet%3a).

`<`您可以查找字符和`>`with的索引，并使用and[`-[NSString rangeOfString:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/rangeOfString%3a)复制出子字符串。[`-[NSString substringToIndex:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/substringToIndex%3a)[`-[NSString substringWithRange:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/substringWithRange%3a)

另一种方法是使用[`NSScanner`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)：

```
NSScanner *scanner = [NSScanner scannerWithString:tmpString];
[scanner scanUpToString:@" <" intoString:&tmpString1];
[scanner scanUpToString:@">" intoString:&tmpString2]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T17:19:11.627

如果你想在一行代码中做到这一点，这里是如何......

注意：我使用与您使用的完全相同的格式，使用正则表达式，非常成功地使用了它。在我看来，这有点简单，可以通过我的示例中所示的一行代码来实现。如果您的格式发生变化，您只需对正则表达式进行非常小的更改：

```
NSArray *nameComponents = [@"Mike <test@gmail.com>" componentsSeparatedByRegex:@"\\s<(.*)>"];
NSLog(@"included in nameComponents array: %@", nameComponents); 
```

输出：

> 2013-02-26 11:34:55.238 TestProject[39086:1c403] 包含在 nameComponents 数组中：（Mike，“test@gmail.com”）

当然，该示例假定您使用严格的格式“[name][space]<[email]>”。但是，如前所述，任何格式更改都只是调整正则表达式的简单问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T16:55:06.250

您需要将字符串分解为：

```
NSString *tmpString = @"Mike <test@gmail.com>";

NSArray *breakIntoStrings=[tmpString componentsSeperatedByString:@"<"];
//[0]=Mike
//[1]=test@gmail.com>

NSString *tmpString1 = breakIntoStrings[0];
NSString *tmpString2 = [breakIntoStrings[1] substringToIndex:[breakIntoStrings[1] length] - 1];

//now tmpString1 contains white space at end. you can trim it by:

tmpString1 = [tmpString1 stringByTrimmingCharactersInSet:
                              [NSCharacterSet whitespaceCharacterSet]]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T16:57:45.877

根据您的要求，有不同的方法可以实现这一点，但是当您使用 时`componentsSeparatedByString`，它会返回一个`NSArray`对象 no`NSString`并且您可以使用该数组来获取索引字符串，

```
NSArray *mainStrArray = [str componentsSeparatedByString:@"<"]; 
```

现在您的数组包含索引 0 处的值 Mike 和索引 1 处的 test@gmail.com>

// 为了得到麦克，只需删除它后面的空格

```
NSString *stringMike=[[mainStrArray objectAtIndex:0] stringByTrimmingCharactersInSet:
                          [NSCharacterSet whitespaceCharacterSet]]; 
```

// 再次迭代另一部分以获得剩余的字符串..

```
NSArray *tmpArray=[[mainStrArray objectAtIndex:1] componentsSepratedByString:@">"]; 
```

// 你会得到 at index 0 test@gmail.com // 再次解析它的第一部分

```
NSString *testStr=[tmpArray objectAtIndex:0]; 
```

我之前在评论中提到的其他替代方案是[NSScanner](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)

# asp.net - Linq to xml 通过 xelement 更新

> ID：15094580
> 
> 赞同：-1
> 
> 时间：2013-02-26T16:43:17.870
> 
> 标签：asp.net, xml, linq-to-xml

我有一个 xml 文档，我想使用 linq to xml 将 totalGrade 更新为列表中的值。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<EmpFinanceList>
  <EmployeeFinance>
    <EmpEmployId>122</EmpEmployId>
    <EmpPersonalId>23000</EmpPersonalId>
    <dateofApp>2011-10-31T00:00:00</dateofApp>
    <dateofEmpl>2013-02-15T00:00:00</dateofEmpl>
    <dateofTerm />
    <grade_id>73</grade_id>
    <position_id>2065</position_id>
    <startDate>2013-02-14T00:00:00</startDate>
    <endDate>2013-02-21T00:00:00</endDate>
    <Exchange_rate>200</Exchange_rate>
    <housing>45000</housing>
    <base_pay>150000</base_pay>
    <totalGrade>0</totalGrade>
    <toalPosition>0</toalPosition>
  </EmployeeFinance> 
```

已编辑 -------------

这就是我创建xml文件的方式，如果我错了，请告诉我该怎么做

```
 private static void getEmployeeForEmpFinance(List<BasicPay> EmployeeEmployList)
        {
            var employeeFinance = new List<BasicPay>();
            var context = new SSPModel.sspEntities();
            for (int i = 0; i < EmployeeEmployList.Count; i++)
            {
                    int empID = EmployeeEmployList.ElementAt(i).employee_personal_id;
                    //var dateOfTermination = EmployeeEmployList.ElementAt(i).dateofTerm;
                    // Debug.WriteLine(dateOfTermination);
                    var query = from c in context.Employee_Financial
                                where c.Employee_Personal_InfoEmp_id == empID 
                                //orderby c.Employee_Personal_InfoEmp_id ascending
                                select new BasicPay
                                {
                                  base_pay=  c.Base_Pay,
                                  housing=  c.Housing_Allowance,
                                  Base_pay_currency = c.Base_Pay_Currency
                                };
                    var empfinance = query.ToList();
                    foreach (var x in empfinance)
                    {
                        EmployeeEmployList.ElementAt(i).housing = x.housing;
                        EmployeeEmployList.ElementAt(i).base_pay = x.base_pay;
                    }                                    
            }

           try
            {
                            var xEle = new XElement("EmpFinanceList",
                            from emp in EmployeeEmployList
                            select new XElement("EmployeeFinance",
                                         new XElement("EmpEmployId", emp.emp_employID),
                                           new XElement("EmpPersonalId", emp.employee_personal_id),
                                           new XElement("dateofApp", emp.dateofApp),
                                           new XElement("dateofEmpl", emp.dateofEmpl),
                                           new XElement("dateofTerm", emp.dateofTerm),
                                           new XElement("grade_id", emp.grade_id),
                                           new XElement("position_id", emp.position_id),
                                           new XElement("startDate", emp.startDate),
                                           new XElement("endDate", emp.endDate),
                                           new XElement("Exchange_rate", emp.Exchange_rate),
                                           new XElement("housing", emp.housing),
                                           new XElement("base_pay", emp.base_pay),
                                           new XElement("totalGrade", 0),
                                           new XElement("toalPosition",0)
                                       ));
                string path1 = AppDomain.CurrentDomain.GetData("DataDirectory").ToString();
                string un = "\\"+GlobalClass.GlobalVar + "empFinance.xml";
                GlobalClass.GlobalUrl = path1 + un;
                xEle.Save(GlobalClass.GlobalUrl);
                Debug.WriteLine("Converted to XML " + GlobalClass.GlobalUrl);
            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex.Message);
            }
           getFromAllBenGrade();
           //getFromAllBenGrade(EmployeeEmployList);
        }
       public static void getFromAllBenGrade()
        {
            var totalGrade = new List<BasicPay>();
            var context = new SSPModel.sspEntities();
            XElement xelement = XElement.Load(GlobalClass.GlobalUrl);

            var query = from nm in xelement.Elements("EmployeeFinance")
                        select new BasicPay
                        {
                            employee_personal_id = (int)nm.Element("EmpPersonalId"),
                            grade_id = (int)nm.Element("grade_id"),
                            totalGrade = (int)nm.Element("totalGrade")
                        };
            var x = query.ToList();

            Debug.WriteLine("Taken from xml:");
            foreach (var xEle in x)
            {
                var query1 = from ee in context.Employee_Employ
                             join abg in context.All_Inc_Ben_Grade
                             on ee.Grade_Id equals abg.GradeID
                             join abl in context.All_Inc_Ben_Listing
                             on abg.All_Inc_Ben_ListingID equals abl.ID
                             where ee.Employee_Personal_InfoEmp_id == xEle.employee_personal_id && abl.Part_of_basic == "Y" && abl.Status == "A"
                             select new BasicPay
                             {
                                 all_ben_listID = abl.ID,
                                 amount = abl.Amount

                             };
                var y = query1.ToList();
                int? calculation;
                int? total = 0;
                foreach (var xyz in y)
                {
                    calculation = xyz.amount;
                    total = total + calculation;

                }
                xEle.totalGrade = total;
               // totalGrade.Add(xEle);

                //var doc = XDocument.Load(GlobalClass.GlobalUrl);
                //var hhhh = doc.Root.Element("EmployeeFinance")
                //                    .SetElementValue("totalGrade", total);

            }

            for (int i = 0; i < totalGrade.Count(); i++)
            {
                Debug.WriteLine(totalGrade.ElementAt(i).employee_personal_id);
                xelement.Elements("EmployeeFinance").Where(d => int.Parse(d.Attribute("EmpPersonalId").Value) == totalGrade.ElementAt(i).employee_personal_id).SingleOrDefault().SetAttributeValue("totalGrade", totalGrade.ElementAt(i).totalGrade);
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:48:24.897

首先，您必须加载该文档：

```
var doc = XDocument.Load(filePath); 
```

之后，您将能够更改`<totalGrade>`元素值：

```
doc.Root.Element("EmployeeFinance")
        .SetElementValue("totalGrade", newValue); 
```

**更新**

如果您在生成 xml 时尝试设置该值，请更改该行：

```
 new XElement("totalGrade", 0), 
```

更改`0`为您列出项目属性/字段：

```
 new XElement("totalGrade", emp.totalGrade), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:16:28.903

```
XDocument doc = XDocument.Load(path);
        var result = from element in doc.Descendants("EmployeeFinance")
                     select element;
        foreach (var ele in result)
        {  
            ele.SetElementValue("totalGrade", newvalue);

        }
        doc.Save(path); 
```

1.  加载文档
2.  选择结果
3.  循环遍历每个 xml 块（如果您有多个记录）
4.  设置新值
5.  保存xml文档

# jquery-ui - droppable 中可拖动的位置

> ID：15094583
> 
> 赞同：1
> 
> 时间：2013-02-26T16:43:19.527
> 
> 标签：jquery-ui, jquery-ui-draggable

我想将 Draggables 移动到 droppable 中。问题是它们必须在拖放后很好地“排列”。作为第一步，我想告诉可拖动的左侧位置始终为 20px。

我有 drop 事件：

```
...( {
   drop: function (event, ui) {
       alert(ui.position.left);
       ... 
```

这向我显示了可拖动的左侧位置。但我无法改变它

```
ui.position.left = 20; 
```

我在这里读到位置是用偏移量计算的，这些是只读变量。如何设置左侧位置？或者有没有更简单的方法？有教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-01T22:16:15.843

是的，这些是只读变量——偏移量和位置是用户界面的值，而不是元素的属性。您需要使用 ui.draggable 的 css “top”和“left”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:18:23.217

您可以像这样将拖动的项目附加到可放置容器：

```
$('#dropContanier').droppable({
    drop: function(event, ui) {
        $(this).append(ui.draggable); 
    }
}); 
```

在这种情况下，元素将根据您的 CSS 样式进行排列

# java - 如何在 HTML 中转义正斜杠字符但是否将其正确传递给 Java Web 应用程序？

> ID：15094591
> 
> 赞同：-1
> 
> 时间：2013-02-26T16:43:36.707
> 
> 标签：java, jsp, thymeleaf, html-entities

我在我的应用程序中使用的实体的 ID 如下所示：

```
/6TVYTydu9rBMPuU/zM8Gw== 
```

各种字符。我需要显示这些实体并通过它们的 ID 链接到它们。

```
<a href="/myapp/entity/id_goes_here">Id: ${id_goes_here}</a> 
```

这显然会失败，因为`/`, 链接看起来`/myapp/entity//6TVYTydu9rBMPuU/zM8Gw==`对我的应用程序来说显然是错误的。如何转义`/`到 HTML 实体并将其作为 a而不是作为字符串`&#47;`传递给服务器？`/``&#47;`

我没有`jsp`用于我的视图渲染（我正在使用`thymeleaf`），但如果有任何解决方案，它们可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:48:45.743

在 JSP 中设置之前对 ID 进行 URL 编码：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html)

然后在服务器收到 ID 时对 ID 进行 URL 解码[http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLDecoder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLDecoder.html)

例如

```
URLEncoder.encode(id);
URLEncoder.decode(id); 
```

# php - 将静态 html 菜单转换为 wordpress 动态菜单，保持样式相同

> ID：15094592
> 
> 赞同：0
> 
> 时间：2013-02-26T16:43:38.113
> 
> 标签：php, html, css, wordpress

好的，这是我的静态 html 菜单..

```
 <ul id="nav">
            <li class="active"><a href="index.html"><span>Home</span></a></li>
            <li><a href="#"><span>Holiday Packages</span></a></li>
            <li><a href="#"><span>Best Deals</span></a>
                </ul> 
```

跨度的 css --- >

```
#nav a span { background:url(images/nav-right.png) right top no-repeat; padding:0 26px 0 0; display:block; } 
```

问题是我如何将我的跨度样式应用于动态生成的菜单，因为 wp_nav_menu(); 输出以下内容----->

```
<a href="#">Holiday Packages</a> 
```

让我无法选择将 span 标签应用于菜单项“Holiday Packages”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:45:47.863

简单设置：你不能简单地用 CSS 做到这一点。

不过，您可能可以编辑正在生成菜单的 Wordpress 模板，以使它们在`a`元素内添加跨度。

这应该不是很难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:47:00.070

您需要使用 Wordpress 的菜单功能：[wp_nav_menu()](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

您可以在此处阅读有关如何设置菜单样式（以及不同级别）的信息：http: [//www.wpbeginner.com/wp-themes/how-to-style-wordpress-navigation-menus/](http://www.wpbeginner.com/wp-themes/how-to-style-wordpress-navigation-menus/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T16:06:28.160

您可以操纵 item_wrap 来完成任务。这是应该启动您的链接。去这里搜索这个短语“在菜单的开头添加一个单词”

链接在[这里](https://developer.wordpress.org/reference/functions/wp_nav_menu/)

# ios - 如何从 RSS 获取图像到单元格

> ID：15094596
> 
> 赞同：2
> 
> 时间：2013-02-26T16:43:47.983
> 
> 标签：ios, uitableview, uilabel

我正在努力解决我的问题，我希望有人可以在这里帮助我。我有一个带有格式化数据的 RSS 提要。例如

```
<description>
    <![CDATA[
     <p> ... <a href="https://www.google.com/">Klick here</a>.</p>
    ]]>
</description>
<content:encoded>
    <![CDATA[<p> ... <a href="https://www.google.com/">Klick here</a>.</p> <img src="http://image_url.jpg" alt="" title="some text" width="622" height="466" class="size-full wp-image-117" />
    ]]>
</content:encoded> 
```

是否有可能将格式应用于标签？或者在更好的情况下使用 WebView？我该怎么做才能显示整个 RSS 提要？

为了更好地理解我的代码：[这](https://github.com/mwaterfall/MWFeedParser)是我在项目中实现的源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:06:27.360

在 RSS 阅读器中，用户界面通常有两个级别，您必须考虑如何处理此问题。主视图和详细视图。我们将一次解决这些问题：

### 主视图

在您正在查看提要中的项目列表的主视图中。在这种情况下，大多数 RSS 阅读器将只显示项目的纯文本标题，可能还会显示与该项目关联的图像。这里的问题是在哪里检索图像 URL。这里有（据我所知）三个选项：

1.  元素的`url`属性。有关示例，`media:content`请参见[http://news.yahoo.com/rss/ 。](http://news.yahoo.com/rss/)

2.  `url`元素内的元素`image`。有关示例，请参见[http://www.dpreview.com/feeds/news.xml 。](http://www.dpreview.com/feeds/news.xml)

3.  `img`从`description`or`content:encoded`元素中解析 HTML标记。您可以通过另一个解析器运行 HTML（但遗憾的是，NSXMLParser 在解析 HTML 时不是很健壮，因此您可能不得不使用 Hpple 之类的东西）或者只使用正则表达式从 HTML 中获取图像 URL：

    ```
    - (NSArray *)imgSrcAttributesInString:(NSString *)string
    {
        NSError *error = NULL;
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<img\\s[\\s\\S]*?src\\s*?=\\s*?['\"](.*?)['\"][\\s\\S]*?>"
                                                                               options:NSRegularExpressionCaseInsensitive
                                                                                 error:&error];

        NSMutableArray *results = [NSMutableArray array];

        [regex enumerateMatchesInString:string
                                options:0
                                  range:NSMakeRange(0, [string length])
                             usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {

                                 [results addObject:[string substringWithRange:[result rangeAtIndex:1]]];
                             }];

        if ([results count] > 0)
            return results;

        return nil;
    } 
    ```

您采用哪种技术取决于您的 RSS 源和您愿意完成的工作量。我认为大多数 RSS 阅读器只是通过 1 和/或 2，而不是 3。

### 详情视图

第二个是详细信息视图，您可以在其中查看与 RSS 项目相关的完整详细信息。一种非常简单的方法是不将 tableview 用于详细信息视图，而只是使用带有 a 的标准`UIViewController`并以`UIWebView`这种方式显示结果。

在回答您关于标签的问题时，在 iOS 6.0 之前，您无法将格式应用于`UILabel`. 从 iOS 6.0 开始，您可以使用该`attributedText`属性。但这不支持 HTML。有人尝试弥合这一差距（请参阅[https://stackoverflow.com/a/4652521/1271826](https://stackoverflow.com/a/4652521/1271826)），但这似乎比仅使用`UIWebView`.

# r - 基于 R 中的分类行值的子集

> ID：15094598
> 
> 赞同：1
> 
> 时间：2013-02-26T16:43:53.357
> 
> 标签：r, dataframe

如果我有一个包含描述列的分类行的数据框，我如何根据这些值对其进行子集化？这是我的数据：

```
 name1 name2 name3
cond   trt  ctrl  ctrl
hour     0     3     0
A        1     1     1
B        2     2     2
C        3     3     3
D        4     4     4
E        5     5     5
F        6     1     6
G        7     2     7
H        8     3     8
I        9     4     9
J       10     5    10 
```

用这一行重新创建它：

```
A <- structure(list(name1 = c("trt", "0", "1", "2", "3", "4", "5", 
"6", "7", "8", "9", "10"), name2 = c("ctrl", "3", "1", "2", "3", 
"4", "5", "1", "2", "3", "4", "5"), name3 = c("ctrl", "0", "1", 
"2", "3", "4", "5", "6", "7", "8", "9", "10")), .Names = c("name1", 
"name2", "name3"), row.names = c("cond", "hour", "A", "B", "C", 
"D", "E", "F", "G", "H", "I", "J"), class = "data.frame") 
```

这是我尝试过的：

```
subset(A, ( A[1,] == 'trt' & A[2,] == 0 )) 
```

我无法解释的结果。为什么这个？：

```
 name1 name2 name3
cond   trt  ctrl  ctrl
B        2     2     2
E        5     5     5
H        8     3     8 
```

我想要的是：

```
 name1 
cond   trt  
hour     0  
A        1  
B        2  
C        3 
D        4  
E        5  
F        6  
G        7  
H        8  
I        9 
J       10 
```

谢谢你。如果“条件”和“小时”的类别是因素，这可能会更容易。或者如果数据被“融化”了。我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:47:18.580

不需要使用子集。做就是了：

```
A <- A[,1,drop=FALSE] 
```

或者，如果您不想对列号进行硬编码：

```
A[,A[1,] == 'trt' & A[2,] == 0,drop = FALSE] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:57:33.613

除了直接子集 with 之外`[ ]`，您还可以使用`subset`'s select 参数来选择列

```
> subset(A, TRUE, select=( A[1,] == 'ctrl' & A[2,] == 3 ))
     name2
cond  ctrl
hour     3
A        1
B        2
C        3
D        4
E        5
F        1
G        2
H        3
I        4
J        5 
```

# r - 在 knitr 中缓存子文件

> ID：15094602
> 
> 赞同：7
> 
> 时间：2013-02-26T16:44:14.243
> 
> 标签：r, caching, latex, children, knitr

我对 knitr 中的子文件有疑问。缓存工作正常，但依赖项不起作用。我的沙盒示例如下所示：

```
\documentclass{article}

\begin{document}

<<setup, cache=FALSE>>=
opts_chunk$set(cache=TRUE, autodep=TRUE)
dep_auto() # figure out dependencies automatically
@

<<a>>=
x <- 14
@

<<b>>=
print(x)
@

<<child, child='child.Rnw', eval=TRUE>>=
@

\end{document} 
```

'child.Rnw' 看起来像这样：

```
<<child>>=
print(x)
@ 
```

当我现在编译代码时，然后在块 a 中更改 x 然后再次编译它：块 b 反应正确，但孩子没有。我在做一些明显错误的事情吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:43:26.303

我想了一会儿这个问题，我发现目前很难解决。问题是父文档并不真正知道子文档中有什么，`dep_auto()`在设置依赖结构时也没有考虑到子文档。有两种方法可以解决这个问题。第一个是hackish：

```
knitr:::dep_list$set(a = c('child', 'b')) 
```

您可能知道，`:::`在 R 中表示“危险区域”。 In `knitr`，`dep_list`是控制依赖结构的内部对象。两者都`dep_auto()`依赖`dep_prev()`于这个对象（类似于块选项的`dependson`工作方式）。

第二种方法是将您的对象写入块选项，例如

```
<<child, whatever=x>>=
print(x)
@ 
```

[阅读knitr 缓存页面](http://yihui.name/knitr/demo/cache/)中的第三部分了解详细信息。

# emacs - 无法让 emacs + ritz-nrepl 在 Macintosh 系统上工作

> ID：15094604
> 
> 赞同：1
> 
> 时间：2013-02-26T16:44:15.030
> 
> 标签：emacs, clojure, installation, pallet

我无法让 ritz-nrepl 工作。这是我所做的：

1.  从一个干净的系统开始（在 Mac OS X，Mountain Lion 上）——没有 emacs.app，没有 ~/.emacs.d 目录

2.  [按照https://github.com/pallet/ritz/tree/develop/nrepl](https://github.com/pallet/ritz/tree/develop/nrepl)上的说明进行操作（我将 init.el 文件放在 ~/.emacs.d 中）

3.  打开我的 core.clj 文件，然后运行`M-x nrepl-ritz-jack-in`

4.  结果是一组错误消息：

    ```
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$require.doInvoke(core.clj:5352)
    at clojure.lang.RestFn.invoke(RestFn.java:436)
    at ritz.nrepl.project$eval3125$loading_\_4505_\_auto_\__\_3126.invoke(project.clj:1)
    at ritz.nrepl.project$eval3125.invoke(project.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:604)
    at clojure.core$use.doInvoke(core.clj:5363)
    at clojure.lang.RestFn.invoke(RestFn.java:930)
    at ritz.nrepl.debug_eval$eval2877$loading__4505__auto____2878.invoke(debug_eval.clj:1)
    at ritz.nrepl.debug_eval$eval2877.invoke(debug_eval.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:604)
    at clojure.core$use.doInvoke(core.clj:5363)
    at clojure.lang.RestFn.invoke(RestFn.java:3659)
    at ritz.nrepl$eval5$loading_\_4505_\_auto_\_\_\_6.invoke(nrepl.clj:1)
    at ritz.nrepl$eval5.invoke(nrepl.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$require.doInvoke(core.clj:5352)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at user$eval1.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.eval(Compiler.java:6454)
    at clojure.lang.Compiler.eval(Compiler.java:6431)
    at clojure.core$eval.invoke(core.clj:2795)
    at clojure.main$eval_opt.invoke(main.clj:296)
    at clojure.main$initialize.invoke(main.clj:315)
    at clojure.main$null_opt.invoke(main.clj:348)
    at clojure.main$main.doInvoke(main.clj:426)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.lang.Var.invoke(Var.java:405)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:518)
    at clojure.main.main(main.java:37) 
    ```

    引起：java.lang.RuntimeException: Unable to resolve symbol: ex-info in this context at clojure.lang.Util.runtimeException(Util.java:156) at clojure.lang.Compiler.resolveIn(Compiler.java:6720)在 clojure.lang.Compiler.resolve(Compiler.java:6664) 在 clojure.lang.Compiler.analyzeSymbol(Compiler.java:6625) 在 clojure.lang.Compiler.analyze(Compiler.java:6198) ... 171 更多

## 调试

我检查了正确的库是否已加载：

```
package-activated-list is a variable defined in `package.el'.
Its value is (nrepl-ritz nrepl clojure-mode) 
```

[搜索互联网，我在https://groups.google.com/forum/?fromgroups=#!topic/clojure/KbVSpHG9Y8s](https://groups.google.com/forum/?fromgroups=#!topic/clojure/KbVSpHG9Y8s)找到以下内容

在此线程中，Hugo Duncan 回复“Tim”：

```
This [the error "Unable to resolve symbol: ex-info"] seems to be an issue 
with clojure 1.4 not being used in the
controlling vm, and should have been fixed by
https://github.com/pallet/ritz/issues/53, which will be included in the
next release. 
```

网页[https://github.com/pallet/ritz/issues/53](https://github.com/pallet/ritz/issues/53)是一个标题为“tools.jar missing from classpath with lein ritz-nrepl”的问题，解决方法是：

```
"Ensure tools.jar is on the classpath with lein ritz-nrepl" 
```

在 Mac OS X 上，这很棘手，但我最终在 Emacs 中验证了 $PATH 是：

```
"/bin/bash /Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/Home:
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:" 
```

当我`M-x nrepl-ritz-jack-in`在 Emacs 中运行时，我得到与上面相同的错误。（我还验证，在我的 Mac 上，/Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/Home/bin/tools.jar 确实存在。）

现在，$PATH 输出中的空格字符让我担心。我再次阅读了“确保 tools.jar...”消息，发现它告诉我如果`lein ritz-nrepl`运行正确，这意味着“tools.jar 在类路径上”。这是我的输出：

```
Greggs-Mac-Pro:src gr$ cd /Users/gr/tech/cljprojects/combolock/src/combolock
Greggs-Mac-Pro:combolock gr$ ls
core.clj    core.clj~
Greggs-Mac-Pro:combolock gr$ $PATH
-bash: /Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/Home:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin: No such file or directory
Greggs-Mac-Pro:combolock gr$ lein ritz-nrepl
Exception in thread "main" java.lang.RuntimeException: Unable to resolve symbol: ex-info in this context, compiling:(leiningen/core/classpath.clj:128)
    at clojure.lang.Compiler.analyze(Compiler.java:6235)
    at clojure.lang.Compiler.analyze(Compiler.java:6177)
    at clojure.lang.Compiler$InvokeExpr.parse(Compiler.java:3452)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6411)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.analyze(Compiler.java:6177)
    at clojure.lang.Compiler$ThrowExpr$Parser.parse(Compiler.java:2239)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6409)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.analyze(Compiler.java:6177)
    at clojure.lang.Compiler$BodyExpr$Parser.parse(Compiler.java:5572)
    at clojure.lang.Compiler$TryExpr$Parser.parse(Compiler.java:2117)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6409)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.analyze(Compiler.java:6177)
    at clojure.lang.Compiler$BodyExpr$Parser.parse(Compiler.java:5572)
    at clojure.lang.Compiler$LetExpr$Parser.parse(Compiler.java:5873)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6409)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6397)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.analyze(Compiler.java:6177)
    at clojure.lang.Compiler$BodyExpr$Parser.parse(Compiler.java:5572)
    at clojure.lang.Compiler$FnMethod.parse(Compiler.java:5008)
    at clojure.lang.Compiler$FnExpr.parse(Compiler.java:3629)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6407)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6397)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.access$100(Compiler.java:37)
    at clojure.lang.Compiler$DefExpr$Parser.parse(Compiler.java:492)
    at clojure.lang.Compiler.analyzeSeq(Compiler.java:6409)
    at clojure.lang.Compiler.analyze(Compiler.java:6216)
    at clojure.lang.Compiler.analyze(Compiler.java:6177)
    at clojure.lang.Compiler.eval(Compiler.java:6469)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$require.doInvoke(core.clj:5352)
    at clojure.lang.RestFn.invoke(RestFn.java:703)
    at leiningen.core.project$eval3195$loading__4505__auto____3196.invoke(project.clj:1)
    at leiningen.core.project$eval3195.invoke(project.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$require.doInvoke(core.clj:5352)
    at clojure.lang.RestFn.invoke(RestFn.java:551)
    at leiningen.core.main$eval3131$loading__4505__auto____3132.invoke(main.clj:1)
    at leiningen.core.main$eval3131.invoke(main.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$require.doInvoke(core.clj:5352)
    at clojure.lang.RestFn.invoke(RestFn.java:436)
    at ritz.nrepl.project$eval3125$loading__4505__auto____3126.invoke(project.clj:1)
    at ritz.nrepl.project$eval3125.invoke(project.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:604)
    at clojure.core$use.doInvoke(core.clj:5363)
    at clojure.lang.RestFn.invoke(RestFn.java:930)
    at ritz.nrepl.debug_eval$eval2877$loading__4505__auto____2878.invoke(debug_eval.clj:1)
    at ritz.nrepl.debug_eval$eval2877.invoke(debug_eval.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:604)
    at clojure.core$use.doInvoke(core.clj:5363)
    at clojure.lang.RestFn.invoke(RestFn.java:3659)
    at ritz.nrepl$eval5$loading__4505__auto____6.invoke(nrepl.clj:1)
    at ritz.nrepl$eval5.invoke(nrepl.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.load(Compiler.java:6902)
    at clojure.lang.RT.loadResourceScript(RT.java:357)
    at clojure.lang.RT.loadResourceScript(RT.java:348)
    at clojure.lang.RT.load(RT.java:427)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.core$load$fn__4610.invoke(core.clj:5386)
    at clojure.core$load.doInvoke(core.clj:5385)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5200)
    at clojure.core$load_lib.doInvoke(core.clj:5237)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$load_libs.doInvoke(core.clj:5271)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:602)
    at clojure.core$require.doInvoke(core.clj:5352)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at user$eval1.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.eval(Compiler.java:6454)
    at clojure.lang.Compiler.eval(Compiler.java:6431)
    at clojure.core$eval.invoke(core.clj:2795)
    at clojure.main$eval_opt.invoke(main.clj:296)
    at clojure.main$initialize.invoke(main.clj:315)
    at clojure.main$null_opt.invoke(main.clj:348)
    at clojure.main$main.doInvoke(main.clj:426)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.lang.Var.invoke(Var.java:405)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:518)
    at clojure.main.main(main.java:37)
Caused by: java.lang.RuntimeException: Unable to resolve symbol: ex-info in this context
    at clojure.lang.Util.runtimeException(Util.java:156)
    at clojure.lang.Compiler.resolveIn(Compiler.java:6720)
    at clojure.lang.Compiler.resolve(Compiler.java:6664)
    at clojure.lang.Compiler.analyzeSymbol(Compiler.java:6625)
    at clojure.lang.Compiler.analyze(Compiler.java:6198)
    ... 171 more
Subprocess failed
Greggs-Mac-Pro:combolock gr$ 
```

如果您查看最底部和最顶部，您会发现：

1.  我仍然收到相同的“无法解析符号：ex-info”错误消息

2.  当前目录是`src`我的`combolock`Leiningen 2项目的目录（是，lein2，不是lein1）

3.  Path contains `/Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/Home`，据我所知，它与 Windows 机器上的 $JAVA_HOME 相同

## 请求

因此，据我所知，`tools.jar` *它是*可用的，但我仍然收到此“无法解析符号：ex-info”错误。

很晚了，我累了，我希望有人能看到我没有看到的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:30:48.150

您是否安装了最新版本的 nrepl-ritz.el？您的案例似乎与[https://github.com/pallet/ritz/issues/53](https://github.com/pallet/ritz/issues/53)讨论的问题相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:49:58.093

事实：`lein ritz-nrepl`返回了一个错误。在一个模糊思考的直觉中，我突然想到这可能意味着潜在的问题与*Java*有关，而不是 Emacs。我在 StackExchange“Ask Different”（面向 Apple）网站上对此进行了调查，并阅读了 Mac OS X 系统如何“找到”Java（尤其是来自 Apple 的 Java 6 以及来自 Oracle 的 Java 7） --安装在我的系统上）。这很令人困惑。

最后，Apple 的做事方式*非常*完美。我通过手动更改自定义文件`PATH`中的值搞砸了。`.bash_profile`一旦我删除了修改`PATH`、`lein ritz-nrepl`工作和在 Emacs 中`M-x nrepl-ritz-jack-in`第一次工作的行！哎呀！

# c - 用作整数的浮点数的行为

> ID：15094611
> 
> 赞同：1
> 
> 时间：2013-02-26T16:44:28.303
> 
> 标签：c, floating-point

假设我们必须使用浮点变量作为计数器 - 例如

```
float i = 1;
float previ = 0;
do 
{
   previ = i;
}
while (i++); 
```

i 的值（i-previ）与 1 相差多少？这种差异仍然是一个整数，还是会变成一个有理的非整数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T16:56:57.247

在最常见的浮点实现 IEEE 754 中，第一个不能用 32 位二进制浮点表示的整数是 2 ^(24) +1 (16,777,217)。此时，可以表示 2 ^(24) (16,777,216) 和 2 ^(24) +2 (16,777,218)。

当您将 1 加到 16,777,216 时，精确的数学结果是 16,777,217。由于这是不可表示的，因此将其四舍五入为可表示的值。最常见的默认舍入模式是四舍五入。但是，16,777,216 和 16,777,218 与 16,777,217 的距离相等。在平局的情况下，选择具有偶数低位（在浮点有效数中）的值。所以返回了 16,777,216。

因此，当一个浮点值重复加一时，从零开始，计数一直持续到达到 16,777,216，然后连续产生 16,777,216。

16,777,217 是第一个不可表示的整数的原因是 IEEE 754 32 位二进制格式使用 24 位作为有效数（小数部分）。（显式存储 23 位。对于正常值，高位隐含为 1。）因此，可以用 24 位表示的所有整数都是可表示的。2 ^(24)名义上需要 25 个整数位（从 2 ^(24)到 2 ⁰）。但是，仅使用 24 个高位不会引入任何错误（它表示为 1•2 ^(24)），因为缺少的低位将为零。相反，无法表示 16,777,217，因为它需要丢失的位为 1。

# python - 使用 numpy 或 scipy 将 3D 数据数组拟合到 1D 函数

> ID：15094619
> 
> 赞同：4
> 
> 时间：2013-02-26T16:44:53.810
> 
> 标签：python, arrays, numpy, scipy

4我目前正在尝试将大量数据拟合到正弦函数中。在我只有一组数据（一维数组）的情况下，`scipy.optimize.curve_fit()`工作正常。但是，据我所知，如果函数本身只是一维的，则它不允许更高维的数据输入。我不想使用 for 循环遍历数组，因为这在 python 中运行速度非常慢。

到目前为止，我的代码应该类似于：

```
from scipy import optimize
import numpy as np    
def f(x,p1,p2,p3,p4): return p1 + p2*np.sin(2*np.pi*p3*x + p4)      #fit function

def fit(data,guess):
   n = data.shape[0] 
   leng = np.arange(n)
   param, pcov = optimize.curve_fit(f,leng,data,guess)
   return param, pcov 
```

其中 data 是一个三维数组 ( `shape=(x,y,z)`)，我想将每一行拟合`data[:,a,b]`到函数中，并将`param`其`(4,y,z)`作为输出。当然，对于多维数据，这会导致

`ValueError: operands could not be broadcast together with shapes (2100,2100) (5)`

也许有一个简单的解决方案，但我不知道该怎么做。有什么建议么？

搜索我的问题的答案非常困难，因为大多数带有这些关键字的主题都与高维函数的拟合有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T08:55:17.910

使用[`np.apply_along_axis()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.apply_along_axis.html)可以解决您的问题。只需这样做：

```
func1d = lambda y, *args: optimize.curve_fit(f, xdata=x, ydata=y, *args)[0] #<-- [0] to get only popt
param = np.apply_along_axis( func1d, axis=2, arr=data ) 
```

请参见下面的示例：

```
from scipy import optimize
import numpy as np
def f(x,p1,p2,p3,p4):
    return p1 + p2*np.sin(2*np.pi*p3*x + p4)
sx = 50  # size x
sy = 200 # size y
sz = 100 # size z
# creating the reference parameters
tmp = np.empty((4,sy,sz))
tmp[0,:,:] = (1.2-0.8) * np.random.random_sample((sy,sz)) + 0.8
tmp[1,:,:] = (1.2-0.8) * np.random.random_sample((sy,sz)) + 0.8
tmp[2,:,:] = np.ones((sy,sz))
tmp[3,:,:] = np.ones((sy,sz))*np.pi/4
param_ref = np.empty((4,sy,sz,sx))     # param_ref in this shape will allow an
for i in range(sx):                    # one-shot evaluation of f() to create 
    param_ref[:,:,:,i] = tmp           # the data sample
# creating the data sample
x = np.linspace(0,2*np.pi)
factor = (1.1-0.9)*np.random.random_sample((sy,sz,sx))+0.9
data = f(x, *param_ref) * factor       # the one-shot evalution is here
# finding the adjusted parameters
func1d = lambda y, *args: optimize.curve_fit(f, xdata=x, ydata=y, *args)[0] #<-- [0] to get only popt
param = np.apply_along_axis( func1d, axis=2, arr=data ) 
```

# java - 无法在 JavaScript 中向 Java Web 服务（球衣）发出 CORS POST 请求？

> ID：15094620
> 
> 赞同：1
> 
> 时间：2013-02-26T16:44:54.807
> 
> 标签：java, javascript, web-services, jersey, cors

我正在使用 Jersey 在 Java Web 服务中实现跨资源源共享。我创建的资源如下：

```
@POST
    @Path("/getSubjects")
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response getSubjects(TokenCheck tc) throws IOException, ServletException{ 
        String token = tc.getToken();
        String result = "";
        if(!token.equals("") && !token.equals(null)){
            context.getRequestDispatcher("/GetSubjectsWs?token="+token).include(request, response);
            String subs = request.getAttribute("subjects").toString();
            result = "{\"subjects\":\""+subs+"\"}";
        }else {
            result = "{\"subjects\":\"['Invalid Token login again']\"}";
        }
        JSONObject j = null;
        try {
            j = new JSONObject(result);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return Response.status(200).entity(j).header("Access-Control-Allow-Origin", "*").header("Access-Control-Allow-Methods", "POST, GET, OPTIONS").header("Access-Control-Allow-Headers", "Content-Type:application/json").build(); 
    } 
```

并使用 javascript 作为发布请求：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>JavaScript Client</title>
<script type="text/javascript">
function restReq() {
    var url = "http://localhost:8888/WebservicesServer/restful/getserver/getSubjects";
    var json = {
            "token":"8495C211F11C9B18E6651E03EB2995BC"
    };
    var client = new XMLHttpRequest();
    client.open("POST", url, true);
    client.setRequestHeader("Access-Control-Request-Methods", "POST");
    client.setRequestHeader("Content-Type", "application/json");
    client.send(json);
    client.onreadystatechange = function() {
        if (client.readyState == 4) {
           if ( client.status == 200) 
               console.log("success: " + client.responseText);
          else
              console.log("error: " +client.status+" "+ client.responseText);
       }
 };
}
</script>
</head>
<body>
<input type="button" value="getSubjects" onclick="restReq();">
</body>
</html> 
```

当我单击 chrome 中的 getSubjects 按钮时，我收到**错误消息：XMLHttpRequest cannot load ..localhost:8888/WebservicesServer/restful/getserver/getSubjects。Access-Control-Allow-Origin 不允许 Origin null**。**但是我能够通过 GET 请求得到响应**，问题是 POST 请求我的浏览器 url file:///E:/​​Documents%20and%20Settings/Srinivas/Desktop/wars/JSClient2.html（文件系统）我尝试了很多通过设置原点等方式，仍然无法获得 json 响应（服务器是 Tomcat 7）请帮助克服这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:23:40.547

如果您使用的是 CORS，那么您应该将其实现为过滤器，而不是尝试将其嵌入到每个资源的每个方法中。这是一个简单的示例（如果您担心，您可能需要调整设置以限制它）：

```
import com.sun.jersey.spi.container.ContainerRequest;
import com.sun.jersey.spi.container.ContainerResponse;
import com.sun.jersey.spi.container.ContainerResponseFilter;

/**
 * Filter to handle cross-origin resource sharing.
 */
public class CORSFilter implements ContainerResponseFilter
{
  private static final String ORIGINHEADER = "Origin";
  private static final String ACAOHEADER = "Access-Control-Allow-Origin";
  private static final String ACRHHEADER = "Access-Control-Request-Headers";
  private static final String ACAHHEADER = "Access-Control-Allow-Headers";

  public CORSFilter()
  {
  }

  @Override
  public ContainerResponse filter(final ContainerRequest request, final ContainerResponse response)
  {
    final String requestOrigin = request.getHeaderValue(ORIGINHEADER);
    response.getHttpHeaders().add(ACAOHEADER, requestOrigin);

    final String requestHeaders = request.getHeaderValue(ACRHHEADER);
    response.getHttpHeaders().add(ACAHHEADER, requestHeaders);
    return response;
  }
} 
```

# ios - 核心数据实体和关系的可视化

> ID：15094621
> 
> 赞同：0
> 
> 时间：2013-02-26T16:44:57.383
> 
> 标签：ios, core-data

我想知道是否有办法自动制作所有核心数据实体和实体之间关系的图表？图表，例如目标树。我不是指元模型（如 Xcode 的数据模型）.. 而是元素的实际模型呈现数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:50:57.007

您是否尝试将 XCode（右下）中的“编辑器样式”更改为“表格，图表”？（选择您的 .xdatamodel）

# c# - 将信息发送到 C# 类以在 cshtml 中进行验证

> ID：15094625
> 
> 赞同：-2
> 
> 时间：2013-02-26T16:45:09.757
> 
> 标签：c#, razor, input, submit

如何创建对 C# 类的调用，以验证用户名和密码是否正确，然后将结果返回到此剃须刀页面？

```
@{
    Page.Title = "Login";
    Layout = "~/_Layout_Main.cshtml";
}

<div id="Login_Wrapper">
    <p>
        Brugernavn/Email:
    </p>
    <input type="text" name="brugernavn" id="brugernavn" placeholder="Brugernavn/email" />

    <p>
        Password:
    </p>
    <input type="text" name="password" id="password" placeholder="Password" />

    <button type="submit" class="btn">Submit</button>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:52:01.933

在提交表单时调用的操作方法中返回相同的视图。您可以将结果存储在 session 或 viewbag 等中，并从中显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:02:11.463

一种方法是使用回发电话

代码将如下所示：

```
@{
    Page.Title = "";
    Layout = "~/_Layout.cshtml";

    if(IsPost)
    {
        string username = Request["username"]; // the request calls the input named "username"

        // here you can type in any C# code you wish
    }
}

<div>
    <form action="" method="post">
        <input type="text" name="username" />
        <input type="submit" value="btn2" />
    </form>
</div> 
```

# xcode - iPad 应用程序在收到多个通知时崩溃

> ID：15094626
> 
> 赞同：0
> 
> 时间：2013-02-26T16:45:11.573
> 
> 标签：xcode, debugging, instruments, nszombie

我有一个 iPad 应用程序，用户可以在其中共享图像和接收通知。当用户与另一个用户同时确定某事两次时，接收者会收到两个通知，每个通知都与共享有关。然后它会询问是否必须忽略或加载共享图像。如果我忽略第一个通知并单击第二个通知中的加载，我的应用程序会崩溃。

我想通过启用僵尸来调试它，但模拟器上没有收到通知。我只在设备上测试它。有什么方法可以在我的设备上启用僵尸并对其进行测试？谁能建议我更好的方法来测试在设备上运行的应用程序。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:37:58.687

要启用 Zombies，请在 Xcode 中使用工具栏为您的设备选择方案，上面的下拉框显示“方案”。然后单击“编辑方案...”

![方案编辑器下拉菜单](../Images/e83f13adbed81e3dd674f8c8f018e58e.png)

在弹出的工作表中，选择“诊断”项和“启用僵尸对象”。

![编辑方案表](../Images/2471cabb775981dce83b832f3421e625.png)

然后，当您构建并运行该方案时，僵尸将被启用。

# google-maps - 测试多边形在 Google 地图中重叠

> ID：15094627
> 
> 赞同：2
> 
> 时间：2013-02-26T16:45:12.030
> 
> 标签：google-maps, polygon, overlap

在我的项目中，我有一张绘制了很多多边形的地图。每个多边形都表示为一个 MVCArray。

用户可以用这种方式在地图上绘制一个新的多边形：

*   如果用户点击地图，将会有一个新的标记：它将与时间前驱和创建的第一个标记相连。
*   如果用户点击一个标记，它将被删除，并且在标记的前任和后继之间会有一个新的连接。

我不想让用户在地图中绘制另一个多边形。要么是新创建的标记位于另一个多边形上，要么是由新标记（或删除另一个标记）创建的连接线经过另一个多边形。

有人可以帮助我或给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:50:00.793

天真的重叠测试将遍历多边形的边缘并测试[line-line intersection](http://en.wikipedia.org/wiki/Line-line_intersection)。

从它的声音来看，你可能有太多的优势，以至于它本身无法实时生效。从那里开始，您的策略需要专注于在测试线-线交叉点之前快速剔除不需要比较的多边形/边。如果您需要想法，请查看边界圆和立方体树消除。

# sql - 如何根据外部引用或任何替代方式进行分组？

> ID：15094628
> 
> 赞同：1
> 
> 时间：2013-02-26T16:45:13.510
> 
> 标签：sql, sql-server, tsql

我传递了两个日期，需要按这两个日期的结果分组，但是因为我得到错误而不能这样做

> 消息 164，级别 15，状态 1，第 24 行每个 GROUP BY 表达式必须至少包含一个不是外部引用的列。

查询如下：

```
declare @sd datetime ='2012-07-01 00:00:00.000' ,
        @ed datetime ='2012-09-30 00:00:00.000' ;

select @sd,@ed, 
        count(i.id)as count,
        sum(case when oi.rating <50 then 1 else 0 end) as unfav,
        sum(case when oi.Rating =50  then 1 else 0 end) as neu,
        sum(case when oi.Rating >50  then 1 else 0 end) as fav,
        avg(oi.Rating)as 'Av Rating'
        from Items i (nolock)
        inner join ItemOrganisations oi (nolock) on i.ID= oi.ItemID
        inner join Lookup_ItemTypes it (nolock) on it.ID = i.ItemTypeID

        inner join Batches b (nolock) on b.ID=i.BatchID
        inner join Lookup_ItemStatus lis (nolock) on lis.ID = i.StatusID
        inner join Lookup_BatchStatus lbs (nolock) on lbs.ID = b.StatusID
        inner join Lookup_BatchTypes bt on bt.id = b.Typeid

        where lbs.Name = 'Completed by Analyst' or lbs.Name='Delivered/Imported into Neptune Online'
        and lis.Name = 'Complete'
        and i.IsRelevant = 1
        and bt.Name = 'Live'
        group by @sd,@ed
        having i.OverrideDate between @sd and @ed 
```

如果我不按此分组，我得到的结果是错误的：

```
2011-01-01 00:00:00.000 2011-01-31 00:00:00.000 1   0   0   1   55
2011-01-01 00:00:00.000 2011-01-31 00:00:00.000 7   1   0   1   50
2011-01-01 00:00:00.000 2011-01-31 00:00:00.000 7   1   0   0   20
2011-01-01 00:00:00.000 2011-01-31 00:00:00.000 1   0   0   0   NULL
2011-01-01 00:00:00.000 2011-01-31 00:00:00.000 8   1   0   6   66
2011-01-01 00:00:00.000 2011-01-31 00:00:00.000 1   1   0   0   10
2011-02-01 00:00:00.000 2011-02-28 00:00:00.000 1   0   0   1   55
2011-02-01 00:00:00.000 2011-02-28 00:00:00.000 7   1   0   1   50
2011-02-01 00:00:00.000 2011-02-28 00:00:00.000 7   1   0   0   20
2011-02-01 00:00:00.000 2011-02-28 00:00:00.000 1   0   0   0   NULL
2011-02-01 00:00:00.000 2011-02-28 00:00:00.000 8   1   0   6   66
2011-02-01 00:00:00.000 2011-02-28 00:00:00.000 1   1   0   0   10
2011-03-01 00:00:00.000 2011-03-31 00:00:00.000 1   0   0   1   55
2011-03-01 00:00:00.000 2011-03-31 00:00:00.000 7   1   0   1   50
2011-03-01 00:00:00.000 2011-03-31 00:00:00.000 7   1   0   0   20
2011-03-01 00:00:00.000 2011-03-31 00:00:00.000 1   0   0   0   NULL
2011-03-01 00:00:00.000 2011-03-31 00:00:00.000 8   1   0   6   66
2011-03-01 00:00:00.000 2011-03-31 00:00:00.000 1   1   0   0   10
2011-04-01 00:00:00.000 2011-04-30 00:00:00.000 1   0   0   1   55
2011-04-01 00:00:00.000 2011-04-30 00:00:00.000 7   1   0   1   50
2011-04-01 00:00:00.000 2011-04-30 00:00:00.000 7   1   0   0   20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:48:24.093

如所写，您的查询正在尝试按常量表达式进行分组。我认为您可以将最后两行更改为：

```
and i.OverrideDate between @sd and @ed 
```

该`group by`声明是不必要的。您只返回一行，因此所有行都将被聚合。

如果您出于某种原因需要包含`group by`（例如这是自动生成的代码），那么您可以使用以下技巧：

```
group by (case when OverrideDate  = OverrideDate  then @sd end),
         (case when OverrideDate = OverrideDate then @ed end) 
```

但我猜在这种情况下这是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:51:48.747

我不知道你为什么在这里使用`group by` *and* `having`子句。我认为您可以将 where 子句简化为；

```
where lbs.Name in ('Completed by Analyst',
                   'Delivered/Imported into Neptune Online') 
      and lis.Name = 'Complete'
      and bt.Name = 'Live'
      and i.IsRelevant = 1
      and i.OverrideDate between @sd and @ed 
```

# automation - 程序自动化

> ID：15094629
> 
> 赞同：-2
> 
> 时间：2013-02-26T16:45:15.363
> 
> 标签：automation, sas

我喜欢了解如何执行 sas 程序自动化来为索赔数据集中的大约 10 个客户运行每月费用。我在下面运行的程序必须是自动化的，并且用于在主要数据集中填充不同的客户端。我为第一个子数据（第一个客户端）启动并运行了我的程序，如下所述，对于一些变量 F、G、H、I、L、M 和 N：

```
 DATA ATD;
    SET APC;
  /*F*/
 IF PC IN ('F') AND 0 <= RSCW <= 2 THEN DO;
 RK = 1; PT= 20; END;
 IF PC IN ('F') AND 2 <= RSCW <= 3.1 THEN DO;
 RK = 2; PT= 40; END;
 IF PC IN ('F') AND 3.1 <= RSCW <= 5.3 THEN DO;
 RK = 3; PT= 60; END;
 IF PC IN ('F') AND 5.3 <= RSCW <= 11.5 THEN DO;
 RK = 4; PT= 80; END;
 IF PC IN ('F') AND RSCW > 11.5 THEN DO;
 RK = 4; PT= 100; END;
   /*G*/
 IF PC IN ('F') AND 0 <= RSCW <= 1.8 THEN DO;
 ......
 /*N*/
 IF PC IN ('F') AND 0 <= RSCW <= 1.8 THEN DO;
 END;
RUN; 
```

这恰好是我第一次尝试自动化，请在这里指导和帮助我。该程序需要每月在同一客户的 Toad 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:54:57.633

我以前的站点使用 Win XP 计划任务调用 PuTTY PLINK 以每天/每周/每月在 AIX 机器中以各种脚本远程运行许多 SAS 程序。

你的情况更简单。只需使用 Win XP 计划任务每​​月运行 bat 文件。在 bat 文件中，使用所有程序文件、日志文件、autoexec SAS 文件、SAS 配置文件和输出列表文件作为命令行参数调用 SAS exe。

如果您希望每个月有一个日志文件，请在 bat 文件中使用 %DATE% 变量来定义日志文件。

阿尔文·萧

# android - Android：UI 线性布局和按钮

> ID：15094637
> 
> 赞同：0
> 
> 时间：2013-02-26T16:45:34.630
> 
> 标签：android, user-interface, android-linearlayout

我在一个线性布局下的一行（水平）中有 8 个（八个）按钮。问题是这些按钮看起来像矩形，而我希望它们看起来像正方形。

```
<Button
        android:id="@+id/button25"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="right"
        android:layout_weight="0.125" 
        android:background="#ffffffff" /> 
```

有人可以指导我需要做什么才能使这些矩形变成正方形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:01:03.020

而不是设置

```
 android:layout_width="match_parent"
    android:layout_height="match_parent" 
```

将宽度和高度的值分配为

```
 android:layout_width="160dip"
    android:layout_height="160dip" 
```

同时删除

```
 android:layout_weight="0.125" 
```

所以代码就像

```
 <Button
    android:id="@+id/button25"
    android:layout_width="160dip"
    android:layout_height="160dip"
    android:layout_gravity="right"

    android:background="#ffffffff" /> 
```

有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:32:04.550

如果你对宽度和高度都使用固定尺寸，你会得到一个正方形，但你会失去 LinearLayout 的自动调整大小。在您的情况下，直到布局完成*后*您才知道每个按钮的宽度。View 中的 post() 方法是你的朋友。

```
final Button button1 = (Button) findViewById(R.id.button25);
first.post( new Runnable() {
    public void run() {
        LinearLayout.LayoutParams params = 
            (LinearLayout.LayoutParams) button1.getLayoutParams();
        params.height = button1.getWidth();
    }
}); 
```

为确保按钮大小正确，您的布局应如下所示：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="5"> <!-- or however many buttons there are -->
    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content" />
    <!-- other buttons go here -->
</LinearLayout> 
```

这仅处理第一个按钮，但您可以弄清楚如何完成其​​余的操作。

# java - 缓存 javax.sql.Datasource 对象的单个实例是个好主意吗？

> ID：15094638
> 
> 赞同：2
> 
> 时间：2013-02-26T16:45:36.953
> 
> 标签：java, singleton, datasource, dao

我正在从事这个项目，该项目已经通过了许多**编码人员的**手。该应用程序分为两部分 - Web 和 Batch。Web 部件为用户提供了一个基本的 UI 来设置一些配置。它使用 JDBC/JNDI/非 Spring，DAO 是基于此编写的。

批处理部分生成 PDF、PostScripts、XML 等文件。这部分使用 JDBC/Spring，DAO 是基于此编写的。

现在只有一个代码库，但代码被分隔在几个文件夹或模块中 - Web（war 文件）、Batch（从 .bat 或 .sh 运行的 Java 应用程序）和 Commons（jar 文件）。尽管 Web 和 Batch 都使用相同的 Commons jar 文件，但 DAO 非常分散，以至于很难编写一个具有共享 DAO 的新模块，该模块既可用于部署在 Web 和批处理中的代码。

由于我将长期支持这个项目，我决定开始改进。首先，以某种方式组合所有 DAO，新模块将使用一组统一的 DAO 和旧模块来使用现有的脆弱代码。

下面，com.abc.core2.dao.ABCDAO 将保存对单个 DataSource 实例的引用，并在 web 或批处理中使用它来从数据库获取连接。DataSource 对象取自每个模块的核心 DAO，并将其缓存在 ABCDAO.dataSource 实例变量中。

有没有人做过这样的事情？在重新启动应用程序之前保留单个 DataSource 对象有什么问题吗？

不过，这个变化仍然是一个原型。我的客户将其他一些简单的更改外包给了一群人。

**通用（jar 文件）**

```
package com.abc.core2.dao;
public class ABCDAO {
    private static ABCDAO abcdao = new ABCDAO();
    private DataSource dataSource;
    public void setInternalDataSource(DataSource dataSource) {this.dataSource = dataSource;}
    public DataSource getInternalDataSource() { return this.dataSource; }
    public static ABCDAO getInstance() { return this.abcdao; }
    ...
}
public class NewModuleJdbcDao implements NewModuleDAO {
    ...
    public List<XYZBean> getXYZ(SearchBean sb) {
        Connection con = ABCDAO.getInstance().getInternalDataSource().getConnection();
        ...
        con.close();
        return listOfXYZBeans;
    }
} 
```

**批量申请**

```
import com.abc.core2.dao.ABCDAO;
public abstract InformixBaseDAO extends ABCBaseDAO { 
    {
        // via Spring JDBC XML configuration
        ABCDAO.getInstance().setDataSource(NewConnectionPooler.getInstance().dataSource()); 
    }
    public Connection getConnection() throws SQLException {
        // pre-existing method. It does NewConnectionPooler.getInstance().getConnection()
        ...
        return connection;
    }
}

// Use same NewModuleJdbcDao in Web application
public class NewModuleClass001 {

    public void show(SearchBean bean) { 
        ...
        NewModuleJdbcDao dao = new NewModuleJdbcDao();
        List<XYZBean> list = dao.getXYZ(bean);
        ...
    }
} 
```

**Web应用程序**

```
import com.abc.core2.dao.ABCDAO;
public class DBConnection {
    private static DataSource dataSource = null;
    {
        if(dataSource == null) {
            dataSource = ServiceLocator.getInstance().getDataSource(...); // via JNDI
            ABCDAO.getInstance().setDataSource(dataSource);
        }
    }
    public static Connection() {

        // Spring JDBC 
        ... 
    }
}

// Use same NewModuleJdbcDao in Web application
public class NewModuleClass001 {

    public void show(SearchBean bean) { 
        ...
        NewModuleJdbcDao dao = new NewModuleJdbcDao();
        List<XYZBean> list = dao.getXYZ(bean);
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:02:38.657

我一直在实践中使用这种策略，并且不熟悉基于该解决方案的任何问题。如果您还使用 spring 将池数据源定义为应用程序范围的单例 bean，并将其注入您的模块中。

# r - 根据 2 列中的值范围有条件地填充数据框列

> ID：15094645
> 
> 赞同：1
> 
> 时间：2013-02-26T16:45:59.333
> 
> 标签：r, loops, conditional, fill

我目前有这个循环来根据一系列索引修剪数据集（df_2）中的行，要包括的部分的开始和结束索引取自df_3中的2列，并创建一个新文件（df）。

```
for(i in 1:nrow(df_3)){
  if (i==1) df <- df_2[df_3$start[i]:df_3$end[i],]
  else df <- rbind(df,df_2[df_3$start[i]:df_3$endi],])
} 
```

每个部分都有一个与之关联的值，该值包含在 df_3 的第 3 列中。我想在 df 中创建一个新列，该列重复与该部分关联的值。

真的很感谢这里的一些帮助，请随时要求澄清 - 尽可能简洁！

正如 Joran 所建议的那样——这里有一些例子

东风

```
index  new_column
0     
1
2
3
4
5
6
7
8
9
10 
```

DF_3

```
start  _end  new_column_values

0      3     1
4      6     2
7      10    3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:37:12.550

如果我正确理解您的问题，您可以使用`cut`如下方式：

```
DF$new_column <- cut(DF$index, 
                     breaks = c(DF_3$start[1], DF_3$end), 
                     include.lowest = TRUE, 
                     labels = DF_3$new_column_values)
DF
   index new_column
1      0          1
2      1          1
3      2          1
4      3          1
5      4          2
6      5          2
7      6          2
8      7          3
9      8          3
10     9          3
11    10          3 
```

在此，我试图利用可用的信息。我们基本上是在创建一个因子，`DF$index`因子水平由另一个中的范围确定`data.frame`。因此，对于`cut`，我已设置`breaks`为包含第一个起始值和所有结束值的向量，并且我已将“标签”设置为来自“new_column_values”变量的值。

请注意，生成的“new_column”不是（以当前形式）数字变量，而是一个因子。

# wpf - 我应该如何在 XAML 中为按钮设置 ToolTip.AutoPopDelay 属性？

> ID：15094646
> 
> 赞同：0
> 
> 时间：2013-02-26T16:46:01.260
> 
> 标签：wpf, xaml, tooltip

我在 XAML 中创建了一个按钮：

```
<Grid>
    <Button x:Name="RectangleButton" 
            Margin="0" 
            Width="{Binding LengthInPixels}" 
            Height="{Binding Height, Mode=OneWay}" 
            BorderBrush="{Binding BorderColor, Mode=OneWay}" 
            BorderThickness="0.2" 
            HorizontalAlignment="Center" 
            VerticalAlignment="Center" 
            Background="{Binding BackgroundColor, Mode=OneTime}"
            ToolTip="{Binding MouseoverText, Mode=OneTime}"/>
</Grid> 
```

是否可以在 XAML 中设置 ToolTip.AutoPopDelay（或任何延长工具提示在屏幕上可见的持续时间的属性）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:48:38.317

WPF 中没有这样的属性。也许你的意思是[`ToolTipService.InitialShowDelay`](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltipservice.initialshowdelay.aspx)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:48:44.487

您可以尝试[ToolTipService.InitialShowDelay Attached Property](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltipservice.initialshowdelay.aspx)。

```
<Button ToolTip="{Binding MouseoverText, Mode=OneTime}"
        ToolTipService.InitialShowDelay="1000" /> 
```

**编辑**

事实证明，您正在寻找[ToolTipService.ShowDuration 附加属性，并且您会在](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltipservice.showduration.aspx)[ToolTipService](http://msdn.microsoft.com/en-us/library/bb336408.aspx)中找到更多属性来自定义`ToolTip`.

# php - 如果 PHP 文本文件行等于，那么做一些事情

> ID：15094649
> 
> 赞同：1
> 
> 时间：2013-02-26T16:46:14.170
> 
> 标签：php, text, checkbox, flat-file

我将复选框的状态保存到文本文件并将其读回以显示选中或未选中的框。保存部分没问题 - 取决于我是否选中或取消选中该框，值“已选中”或“未选中”写入文本文件。回显`echo $lines[0];`会按预期产生任一值。但是，`if ($lines[0] == "Checked")`如下面的代码所示使用时，似乎未检测到该值，因此未执行随后的回显。这种情况的正确语法是什么？

```
 <?php
      $file = "textfile.txt";
      $lines = file($file); 
      ?>

      <input type="hidden" name="data1" value="Unchecked" />
      <input type="checkbox" name="data1" value="Checked" class="checkbox" 
        <?php
        if ($lines[0] == "Checked") {  
        echo 'checked="checked"';  
        }  
        ?>
      /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:48:33.040

`$lines[0]`您的变量中可能有换行符。

你可以做的是：

```
if (trim($lines[0]) == "Checked") { 
```

但是您应该做的是切换到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:49:16.037

该值可能因行尾而异。我建议您执行以下操作：

```
if (stristr($lines[0], "unchecked")) {  
  echo '';  
}else{
  echo 'checked="checked"';  
} 
```

# android - 即使重新启动后，小部件也不显示在 android 4+ 的菜单中

> ID：15094654
> 
> 赞同：1
> 
> 时间：2013-02-26T16:46:32.950
> 
> 标签：android, android-widget, android-4.0-ice-cream-sandwich

我在我的应用程序中添加了一个小部件。

```
<receiver android:name=".widget.WidgetProvider" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data android:name="android.appwidget.provider"
                   android:resource="@xml/widget" />
    </receiver> 
```

它出现在带有 android 2.3 的模拟器的菜单中。

但即使在重新启动后，它也不会出现在我的设备和带有 android 4+ 的模拟器中。我有一个活动

```
<activity android:name=".new_UI.SplashActivity"
              android:label="@string/app_name"
              android:screenOrientation="portrait"
            >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

这是在我尝试在菜单中找到小部件之前启动的。

如何让它出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:59:20.427

此应用程序是否已安装到您的模拟器上的 SD 卡中？

尝试将[installLocation](https://developer.android.com/guide/topics/data/install-location.html)设置为 internalOnly。

# python - 带有 mongodb 的 django 查询集

> ID：15094655
> 
> 赞同：0
> 
> 时间：2013-02-26T16:46:40.430
> 
> 标签：python, django, mongodb, date, tastypie

我正在使用[sweetpie API](http://django-tastypie.readthedocs.org/en/latest/index.html)开发一个 Django 应用程序，我基本上想创建对象，然后按日期过滤它们，以便我知道哪些对象是新的（“给我从那个日期到今天的所有对象”之类的）。我不知道这是否重要（我认为确实如此），但我正在使用 mongoDB。

我挣扎的地方是当我尝试做 `?&published__gte=2013-02-01` 简单的事情时，按日期过滤最合乎逻辑的方法是什么？我希望我有任何意义，如果不是毫不犹豫地问我精度。

这是我的模型：

```
class Object(models.Model):

    name = models.CharField(max_length=200)
    published = models.DateTimeField('date published') 
```

这是我的资源：

```
class ObjectResource(ModelResource):

    class Meta:
        queryset = Object.objects.all()
        resource_name = 'object'
        filtering = {
            "published": ['gte', 'lte', 'exact'],
            }

    def build_filters(self, filters=None):
        if filters is None:
            filters = {}
        orm_filters = super(Object, self).build_filters(filters)

        if('published' in filters):
            published = filters['published']
            # need to do some modifications on the date format here i guess
            qset = (Q(published=published))
            orm_filters.update({'from': qset})

            return orm_filters

    def apply_filters(self, request, applicable_filters):
        if 'from' in applicable_filters:
            from_ = applicable_filters.pop('from')
        else:
            from_ = None

        semi_filtered = super(ObjectResource, self).apply_filters(request, applicable_filters)

        return semi_filtered.filter(from_) if from_ else semi_filtered 
```

**更新**

我将 build_filter 修改为：

```
if('published' in filters):
    published = filters['published']
    qset = (Q(published=published) | 
            Q(published__lte=published) |
            Q(published__gte=published))
    orm_filters.update({'from': qset})
    return orm_filters 
```

我收到以下错误：`argument of type 'NoneType' is not iterable`

所以我猜在过滤时，没有结果。日期格式之间可能有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:32:45.703

您的查询应该在不覆盖任何方法的情况下工作。

```
class ObjectResource(ModelResource):

class Meta:
    queryset = Object.objects.all()
    resource_name = 'object'
    filtering = {
        "published": ['gte', 'lte', 'exact'],
        }
link: .../api/v1/object/?format=json&published__gte=2012-02-18&published__lte=2013-02-24 
```

# c++ - 如果字符串在数组中，这样做？

> ID：15094656
> 
> 赞同：0
> 
> 时间：2013-02-26T16:46:44.540
> 
> 标签：c++, arrays, string, if-statement

我对 C++ 相当陌生，所以如果这是一个愚蠢的问题，请原谅我，但我已经搜索过，但我只发现了一些`std::find`似乎没有做我想做的事情（也许我没有正确使用它）。

例如，假设我有一个可以存储您的性别的基本程序。我有一个 if 语句，它只检查用户是否输入了“男性”或“男性”，然后执行我希望它执行的任何操作：

```
if(gender == "male" || gender == "Male"){
    // Do stuff
} 
```

我想扩展它，以便用户也可以输入“m”或“M”，它会被检测为男性。但是，我认为 if 语句会有点混乱，所以我正在考虑将选项粘贴到一个简单的数组中并执行以下操作：

```
if(gender is in maleArray){
    // Do stuff
} 
```

这可能吗？我不太担心涉及的任何不良做法，因为这是一个学习场景，尽管任何（有用的）批评或替代方案都会受到赞赏，例如示例！

在此先感谢，希望我说得足够清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:57:47.533

您要求的解决方案是：

```
std::array<std::string, 4> male_synonyms = {"Male", "male", "M", "m"};
auto it = std::find(male_synonyms.begin(), male_synonyms.end(), gender);
if (it != male_synonyms.end()) {
  // ...
} 
```

它用于`std::find`查看用户输入`gender`是否在字符串序列中`male_synonyms`。`std::find`如果找不到，则返回过去的迭代器，这就是我们检查的内容。

但是，我更喜欢这个：

```
std::transform(gender.begin(), gender.end(), gender.begin(), std::tolower);
if (gender == "m" || gender == "male") {
  // ...
} 
```

这将接受不区分大小写`m`和`male`. 所以`MalE`, `M`,`mALE`等也是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:57:30.487

如果您担心 if 语句的混乱，您可以使用一个返回布尔值的方法 isMale()。然后你可以像 if(isMale(gender)) 一样使用它。

```
bool isMale(std::string gender)
{
    if(gender == "male" || 
       gender == "Male" ||
       gender == "M"    ||
       gender == "m"      )
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

如果您不关心大小写，您可以将性别字符串转换为所有小案例，然后与“男性”和“m”进行比较。

# android - 通过应用程序登录网站的推荐方式

> ID：15094660
> 
> 赞同：1
> 
> 时间：2013-02-26T16:46:56.223
> 
> 标签：android, android-webview

我的应用程序必须通过发布表单来登录网站，并跟踪提供的 cookie，直到应用程序终止。

我已经使用“WebView”类实现了这一点。我对天气有疑问，这是实现这一目标的最有效方法，因为我不希望显示任何网页，而只需在登录后提交另一个表单。

他们是否有任何其他解决方案/类可以用更少的流量（更小的足迹）来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:57:42.377

您可以向登录表单提交数据，就像向任何其他表单提交数据一样。

使用 HTTP 库，您可以将有效负载（类型为 x-www-form-encoded）添加到 RequestEntity。JavaDocs 非常清楚如何做到这一点。

# node.js - 使用 grunt-contrib-less 编译更少的文件将不起作用

> ID：15094667
> 
> 赞同：14
> 
> 时间：2013-02-26T16:47:10.693
> 
> 标签：node.js, less, gruntjs

我正在使用 Grunt 构建我的 Web 项目。我安装了`grunt-contrib-less`包并添加了一个任务到我的`grunt.initConfig({..});`

```
less : {
            options: {
                paths: ['js/base']
            },
            files: {
                'js/base/*.css' : 'js/base/*.less'
            }
        } 
```

当我通过*less*`grunt less`运行目标时，它运行时没有错误，但不会将 less 文件编译为 css 文件。

```
Running "less:files" (less) task

Done, without errors. 
```

我也通过节点安装了*lessc*包。做`lessc <source> <dest>`的很好。

目前我已经将*files 选项*直接指向一个包含一个用于测试的文件的目录。即使我将整个文件名写入*files 选项*，它也不会发生任何事情......

稍后我想扫描整个 js 目录并编译所有新修改的 *.less 文件。

我已经安装了以下版本：

```
grunt-cli v0.1.6
grunt v0.4.0
node v0.8.7
npm 1.1.49 
```

BR，迈贝克

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-26T16:58:11.540

glob 模式`js/base/*.css`不匹配任何文件，因此没有目标。通常，像这样的任务期望多个输入组合成一个输出。另外，请记住这`less`是一项**多任务**`files`，并且作为一个孩子的投入`less`并不是你所期望的。（它把它当作一个目标，而不是一个 src/dest 地图）

如果您想要 .less 到 .css 的 1-1 转换，您可以使用[动态扩展](http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically)。（或者您可以手动定义每个 src/dest 对，但谁愿意这样做？）

在你的情况下：

```
less: {
    options: {
        paths: ['js/base']
    },
    // target name
    src: {
        // no need for files, the config below should work
        expand: true,
        cwd:    "js/base",
        src:    "*.less",
        ext:    ".css"
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-08T09:55:43.413

我使用了 Anthonies 解决方案，但仍然有错误

```
Warning: Object true has no method indexOf 
```

如果我将订单更改`expand true`为第二个，它会给我错误

```
Unable to read "less" file 
```

其中“less”是我列表中第一项的值。

我通过将文件更改为这样的数组来解决它：

```
less: {
    options: {

            paths: ["js/base"]
        },
        files: [{
            expand: true,
            cwd: "js/base",
            src: ["**/*.less"],
            dest: "js/base",
            ext: ".css"
        }]
}, 
```

我用了`"grunt-contrib-less" : "^0.11.0"`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-15T01:50:16.253

这对我有用，但经过修改以反映这种情况：

```
less: {
    options: {
        paths: ["js/base"]
    },
    files: {
        expand: true,
        cwd: "js/base",
        src: ["**/*.less"],
        dest: "js/base",
        ext: ".css"
    }
}, 
```

# c# - 使用 aspxgridview 的值填充 GridViewDataComboBoxColumn

> ID：15094669
> 
> 赞同：2
> 
> 时间：2013-02-26T16:47:13.820
> 
> 标签：c#, asp.net, combobox, devexpress, aspxgridview

我是一名新手 C# 程序员（大约 6 个月），我在当前使用 ASP.NET 的工作中使用 DevExpress 组件。

我不知道填充网格内的组合框。问题基本上是这样的：对于网格中的每一行，我都有一个要显示的标题/方坯，在一列中，我有支付该标题/方坯的银行账户列表。我需要在它们存在的地方显示至少一条记录，或者在尚未支付所有权/方坯时为空。

我在网站上查看了一些示例和线程，我尝试实现，但没有什么能给我带来一些有效的结果。

aspx 看起来像这样：`

```
<dx:ASPxGridView ID="devGridView" ClientInstanceName="devGridView" runat="server"
   AutoGenerateColumns="False" EnableCallBacks="False" KeyFieldName="ID_TITULO"
    Width="100%" DataSourceID="odsTitulosReceber">
   <Settings ShowHeaderFilterButton="true" ShowGroupPanel="true" ShowFooter="true" ShowFilterRow="true" />
   <SettingsBehavior AllowFocusedRow="true" />
   <SettingsDetail ShowDetailRow="true" />
   <SettingsPager PageSize="100">
   </SettingsPager>
   <ClientSideEvents RowClick="behavior.rowClick" />
   <Columns>
        <dx:GridViewDataTextColumn FieldName="ID_DOCUMENTO_FISCAL" Caption="Doc. Fiscal"
         Width="70px">
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="DS_PESSOA" Caption="Pessoa">
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="ST_TITULO" Caption="Situação">
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="DT_EMISSAO" Caption="Emissão">
          <PropertiesTextEdit DisplayFormatString="dd/MM/yyyy">
          </PropertiesTextEdit>
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="DT_VENCIMENTO" Caption="Vencimento">
          <PropertiesTextEdit DisplayFormatString="dd/MM/yyyy">
          </PropertiesTextEdit>
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="DT_PAGAMENTO" Caption="Pagamento">
          <PropertiesTextEdit DisplayFormatString="dd/MM/yyyy">
          </PropertiesTextEdit>
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="VL_TITULO" Caption="Valor" Width="110px">
          <PropertiesTextEdit DisplayFormatString="c">
          </PropertiesTextEdit>
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="VL_PAGO" Caption="Valor Pago" Width="110px">
          <PropertiesTextEdit DisplayFormatString="c">
          </PropertiesTextEdit>
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="VL_SALDO" Caption="Valor Saldo" Width="110px">
          <PropertiesTextEdit DisplayFormatString="c">
          </PropertiesTextEdit>
        </dx:GridViewDataTextColumn>
        <bold><dx:GridViewDataComboBoxColumn Caption="Pagamento Realizado" FieldName="CONTAS" >
          <PropertiesComboBox TextField="DESCRIPTION" ValueField="ID">
          </PropertiesComboBox>
        </dx:GridViewDataComboBoxColumn></bold>
        <dx:GridViewDataTextColumn FieldName="ID_TITULO" Caption="Título">
        </dx:GridViewDataTextColumn>
  </Columns>
</dx:ASPxGridView> 
```

`

为了填充组合“Pagamento Realizado”，我有五个表格要通过过滤数据来获取帐户。架构：标题>移动标题<金融移动>内容移动<银行帐户标题和金融移动将ID发送到移动标题等等关于“>”“<”信号......所以，我有一个包含重复标题和重复帐户的列表。在代码隐藏中，我可以执行此查询（使用 linq）来获取与正确标题对应的指定帐户：

`

```
(...)
from ti in data.FINANCEIRO_TITULOs // TITULOS
join mt in data.FINANCEIRO_MOVIMENTOS_TITULOs on ti.NR_SEQ_TITULOS_FITI equals mt.NR_SEQ_TITULOS_FITI // MOVIMENTO_TITULOS
join mv in data.FINANCEIRO_MOVIMENTOs on mt.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF equals mv.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF // MOVIMENTOS
join cm in data.FINANCEIRO_CONTEUDO_MOVIMENTOs on mv.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF equals cm.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF // CONTEUDO_MOVIMENTOS
join co in data.FINANCEIRO_CONTAs on cm.NR_SEQ_CONTAS_FICO equals co.NR_SEQ_CONTAS_FICO // CONTAS

where
ti.TP_CREDITO_DEBITO_FITI == 2 && // credito
ti.ST_SITUACAO_FITI == 3 &&// baixado
ti.NR_SEQ_TITULOS_FITI.Equals(idTitulo)
select (...) 
```

`

我需要一些帮助来填补。请，如果有人可以帮助我，我在这里讨论......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:41:40.647

这是我的临时解决方案...

我在我的 GridView Columns 中放置了以下 ASPx

```
<dx:GridViewDataColumn Caption="Pagamento Recebido" FieldName="CONTA">
       <DataItemTemplate>
               <asp:DropDownList DataTextField="Description" runat="server">
               </asp:DropDownList>
       </DataItemTemplate>
</dx:GridViewDataColumn> 
```

如果我将我的查询作为数据源放到下拉列表中。这是一种糟糕的方式，因为页面加载非常慢，每次咨询都需要很多时间。

```
protected void devGridView_HtmlRowCreated(object sender, ASPxGridViewTableRowEventArgs e)
{
    if (e.KeyValue != null) // avoid header and column name
    {
        ControlFinder<DropDownList> finder = new ControlFinder<DropDownList>();
        finder.FindChildControlsRecursive(e.Row);

        int idTitulo = e.GetValue("ID_TITULO").ToString().ToInt(); // necessary param
        using (ErpDataLinq data = new ErpDataLinq())
        {
            finder.FoundControls.Each(f =>
            {
                f.DataSource = (
                from ti in data.FINANCEIRO_TITULOs // TITULOS
                join mt in data.FINANCEIRO_MOVIMENTOS_TITULOs on ti.NR_SEQ_TITULOS_FITI equals mt.NR_SEQ_TITULOS_FITI // MOVIMENTO_TITULOS
                join mv in data.FINANCEIRO_MOVIMENTOs on mt.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF equals mv.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF // MOVIMENTOS
                join cm in data.FINANCEIRO_CONTEUDO_MOVIMENTOs on mv.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF equals cm.NR_SEQ_MOVIMENTO_FINANCEIRO_FIMF // CONTEUDO_MOVIMENTOS
                join co in data.FINANCEIRO_CONTAs on cm.NR_SEQ_CONTAS_FICO equals co.NR_SEQ_CONTAS_FICO // CONTAS

                where
                ti.TP_CREDITO_DEBITO_FITI == (byte)FinancialBase.OperationType.Credit && // 2 - credito
                ti.ST_SITUACAO_FITI == (byte)Securities.Status.Closed && // 3 - baixado
                ti.NR_SEQ_TITULOS_FITI.Equals(idTitulo) // param
                select new { Description = co.NM_CONTA_FICO }).Distinct(); // distinct - to avoid duplicated values

                f.DataBind();
            });

        }
    }
} 
```

嗯，这解决了我的问题。设计/布局丢失了。我现在就试试让页面美化。

谢谢。

**编辑**

对于那些试图理解`ControlFinder<T>`和 方法的人来说，这里有一个资源可以做到这一点：

*   [在 ASP.NET 中查找控件的更好方法](https://stackoverflow.com/questions/4955769/better-way-to-find-control-in-asp-net)

# mongodb - 在 Meteor 中显示文档字段的最佳方式？

> ID：15094670
> 
> 赞同：1
> 
> 时间：2013-02-26T16:47:16.070
> 
> 标签：mongodb, meteor

如果我有此类文档的集合：

```
{
    "Category" : "DVDs",
    "items" : {
        "Name" : "Mission Impossible",
        "Owner" : "me",
        "LentTo" : "Alice"
    },
    "_id" : "4ocjZXCbLk5Zo8afp"
} 
```

在浏览器中显示“DVD”的最简单方法是什么。

我可以通过添加`{{list_cat}}`模板或创建此函数来做到这一点：

```
Template.list.list_cat = function () {
  if (Session.equals('current_list', null)) return null;
  else {
    var cats = lists.findOne({ _id: Session.get('current_list')});
    return cats.Category;
  }
} 
```

但我敢肯定有一种更快更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:07:58.580

给定一个显示文档列表的模板，您可以直接引用该属性：

```
<body>
  {{> documents}}
  <br/><br/>
  {{> selected_doc}}
</body>

<template name="documents">
  {{#each document}}
  <div>{{Category}}</div>
  {{/each}}
</template>

<template name="selected_doc">
  Selected doc:<br/>
  Name: {{items.Name}}<br/>
  Owner: {{items.Owner}}<br/>
  Lent to: {{items.LentTo}}
</template>

Template.documents.events({
  "click div": function() {
    Session.set("selected_doc", this._id);
  }
});

Template.selected_doc = function() {
  return lists.findOne({_id: Session.get("selected_doc")});
} 
```

# python - 在vim中阻止缩进/取消缩进python代码

> ID：15094674
> 
> 赞同：3
> 
> 时间：2013-02-26T16:47:21.777
> 
> 标签：python, vim, pep8

我决定在我的 python 代码中从制表符切换到空格。以前，如果我想在 vim 中缩进/取消缩进一段代码，我会使用`>>`or`<<`命令。

我正在使用[python 的 vimrc 设置，方法](http://svn.python.org/projects/python/trunk/Misc/Vim/vimrc)是将其添加到我的`~/.vimrc`：

```
source ~/.vimrc-python 
```

目前，它似乎将新标签设置为 8 个空格宽，当我阻止缩进/取消缩进时，它会将所有内容移动四个空格。

我怎样才能得到一切以使其保持一致？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T16:58:55.127

试试这些：

```
set shiftwidth=4
set tabstop=4
set expandtab 
```

`shiftwidth`指示您正在使用的操作 (`<<`和)缩进多远。`>>`

`tabstop`指示使用 tab 键缩进的距离。

`expandtab`将制表符转换为空格。

正如 [http://stackoverflow.com/users/2241874/bradd-szonye](Bradd Szonye) 指出的那样，您也可以选择这样做

```
set shiftwidth=4
set softtabstop=4
set tabstop=8
set expandtab 
```

这意味着如果有一个实际`tab`字符，它将显示为 8 列，但按 Tab 键会给出 4 个空格。

# git - 在使用 Subversion 之后学习 Git

> ID：15094676
> 
> 赞同：2
> 
> 时间：2013-02-26T16:47:33.503
> 
> 标签：git, svn, version-control

我开始了一项新工作，我需要从头开始实施版本控制系统。在我之前的工作中，我使用 Subversion 实现了版本控制（特别是带有 TortoiseSVN、AnkhSVN 和 SubClipse 客户端的 Visual SVN 服务器）。

我最近听说了很多关于 Git 的事情，但我从未使用过它。我在网上阅读的大多数文章都说 Git 比 Subversion 好。我不是问这里哪个更好，所以请把这些评论留给自己。

就我的环境而言，我是一家小型 GIS 公司的首席开发人员。我们主要使用 Python 脚本，偶尔使用 .Net 编写的插件工具。这里还有其他几个可以使用 Python 脚本并且也可以在版本控制下工作。最近，我开始开发我的第一个 Web 应用程序（HTML/Javascript），它也应该受到版本控制。我们都在严格的 Windows 环境中工作，使用专有和开源软件和 API。

我有两个问题：

1.  如果我已经了解 Subversion，是否值得花时间和精力学习和实施 Git？
2.  使用 Subversion 后学习 Git 的最佳资源是什么？如何快速入门？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T16:54:17.243

**问题 1a。学习 Git 值得花时间和精力吗？**

是的，它是一个非常流行的 VCS 和 DVCS 的典型代表。任何每天花费超过 5 分钟思考源代码控制的人都应该至少看看 GIT，看看它提供了什么，它的优点和缺点。

**问题 1b：实施 Git 是否值得花时间和精力？**

Git 和 Subversion 的根本区别在于 Git 是一个分布式版本控制系统，而 Subversion 不是。因此，除非您的工作流程涉及到与您不在同一地点但使用相同代码库的人员，否则 SVN 应该几乎可以满足您所有的 SCM 需求。

由于炒作而迁移到 Git 不是一个明智的决定，此外，Git 工作流程与 Subversion 非常不同，它需要您的团队去适应它，这对于许多开发人员来说有时可能是一个陡峭的学习曲线

**问题 2：学习 Git 的最佳资源**

这确实是主观的，但正如@Lucas 提到的，Git 手册是一个很好的开始。我的建议如下，按优先顺序排列：

*   [Git 手册](http://git-scm.com/documentation)
*   [吉特书](http://git-scm.com/book)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:18:44.497

如果您是从头开始，我认为甚至*考虑*使用 SVN 的理由绝对为零。您现有的 SVN 知识就像我现有的关于如何使用直剃刀的知识：具有一定的价值，如果您可以使用直剃刀，那么您就有优势。不过，对于日常剃须，我使用的是 Remington。

Git 在各方面都更胜一筹。甚至“学习曲线”的论点也不再成立。有几种高质量的图形工具可用于 Linux 和 Windows（例如 GitHub for Windows），并且 CLI 有一组简化的命令，类似于您在 SVN 中使用的命令集。甚至 Visual Studio 现在在 Visual Studio 2012 Update 2（目前在 RC 中）中也具有一流的 Git 集成，并且其他 IDE 和高级编辑器已经支持了好几年了。Git 进行正确的分支和合并（在许多其他事情中）；没有一个集中式系统可以做到，甚至其他 DVCS 也没有 Git 做的那么好。在使用 Git 超过 7 年之后，如果你不能有效地进行分支和合并，我什至不知道 VCS 的意义何在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T17:00:19.923

我在我工作的一家公司介绍了 git。是的，这是值得的。Git 更快。Git 有更好的分支和合并支持（包括私有分支）。Git 包括提高生产力的功能，例如 bisect 和 rebase。Git 确实有一个学习曲线——习惯它需要时间。即便如此，这也是值得的。

是的，围绕 git 有很多炒作，但炒作的存在并不能证明缺乏好处，而是证明存在好处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T17:30:24.267

> 如果我已经了解 Subversion，是否值得花时间和精力学习和实施 Git？

是的。以下是三个很好的理由：

1.  **即使您当前的项目不使用 Git，Git 也很有用**：即使您在 Subversion 存储库中，git-svn 工具也允许您从 Subversion 签出，就好像它是 Git 存储库一样。优点是您可以在 Subversion 之外对代码进行版本控制以用于检查点。我喜欢对我的代码进行微小的调整，并不断检查这些更改。这样，如果我突然决定不做某事，我可以将我的代码恢复到以前的版本。
2.  **如果您做自己的私人项目，Git 很有用**：使用 Subversion 的最佳方式是运行服务器进程。如果没有服务器怎么办？Git 可以在没有服务器的情况下工作，这非常适合用于您自己的个人项目，而这些项目您真的不打算与其他任何人共享。例如，[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer)接口变得非常流行，也许你应该学习它。Git 可以制作一个很棒的版本控制系统来玩弄 REST。
3.  **它可以帮助你完成下一份工作**：Git 在工作中越来越受欢迎。想象一家公司采访您和其他几个客户。那家公司使用 Git。你说你知道 Git，而其他候选人说*“好吧，我不知道，但我相信我能学会”*。谁会得到这份工作？

> 使用 Subversion 后学习 Git 的最佳资源是什么？如何快速入门？

最好的方法是玩弄它。有一个在线的[Git Manual](http://git-scm.com/documentation)，但它不如 Subversion 的手册那么好或完整。但是，您已经了解版本控制，因此您已经熟悉版本控制术语（分支、签出、标记等），因此应该不会太难。[我建议在GitHub 上](http://github.com)建立一个项目，这样你就会习惯 Git 所涉及的推/拉问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T20:16:10.260

> 如果我已经了解 Subversion，是否值得花时间和精力学习和实施 Git？

无关。在学习 Git 之前，你**必须忘记**大部分 SVN 经验：它在很多方面都是非常规和非传统的

> 使用 Subversion 后学习 Git 的最佳资源是什么？如何快速入门？

颠覆之后 - 没有。对于清洁大脑，它是有帮助的（**必须**），[Git Book](http://git-scm.com/book)和最近的酒吧或商店用首选的烈性饮料作为“神经”的治疗方法

# jquery - HTML元素的定位和滑动

> ID：15094679
> 
> 赞同：0
> 
> 时间：2013-02-26T16:47:50.283
> 
> 标签：jquery, html, css, positioning

我有一个`div`其中包含一个`div`包含其他两个`div`s：

```
<div class="container">
    <div class="overlay">
        <div class="title">Some title</div>
        <div class="description">Some description</div>
    </div>
</div> 
```

我的 CSS：

```
div.container {
    width: 220px;
    height: 160px;
    display: inline-block;
    position: relative;
}

div.container div.overlay {
    margin: 0;
    position: absolute;
    bottom: 0px;
    width: 220px;
    padding: 0;
} 
```

这与其他一些不相关的 CSS 一起构成了第二张图片中显示的内容。现在我需要做一些其他的 CSS 让它默认像第一张图片。当您将鼠标悬停在 上`.container`时，`.description`应该会滑入，使其像第二张图片：

![在此处输入图像描述](../Images/8a3fb909f222b29e8e9e41fe85b7f6aa.png) ![在此处输入图像描述](../Images/160b5b0733c0cac82f1a7eb7a7884640.png)

**我不知道如何定位所有内容并让描述滑入。你能吗？**

这个问题只是关于定位和滑动描述所需的 jQuery - 颜色和其他布局不是问题。我正在寻找兼容所有主流浏览器的解决方案。

**编辑**：

忘了提到我不知道`.title`或`.description`的高度 - 高度设置为`auto`因为取决于那里的文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:56:54.503

您需要 Javascript 来执行此操作，因为解决方案取决于了解描述的高度。你提到了 jQuery——下面是它的代码：

```
$(function slideDescriptionOnHover(){
    $('.container').each(function adjustOverlayPosition(){
        var $overlay     = $(this).find('.overlay');
        var $description = $(this).find('.description');

        function slideUp(){
            $overlay.animate('bottom', 0);
        };

        function slideDown(){
            $overlay.animate('bottom', -$description.height());
        };

        $(this).hover(slideUp,slideDown);

        $overlay.css('margin-bottom', -$description.height());
    });
}); 
```

我假设您想要动画效果：如果没有，请将`animate`方法替换为`css`.

关于正在发生的事情的简要指南：

1.  对于每个`.container`（它们可能有不同的高度描述，取决于每个包含多少文本）......</li>
2.  绑定`.overlay`我们想要动画的 和 的变量`.description`，它的高度决定了我们想要动画的方式。
3.  定义 2 个函数：一个设置`bottom`为`0`，确保`.overlay`行的最底部与`.container`' 底部对齐；另一个将底部的底部`.overlay`拉低`.description`.
4.  将这两个函数绑定到 jQuery hover 方法（`mouseover`和的别名`mouseout`）
5.  …最后，确保描述是隐藏的。

您还需要调整 的规则`div.container`，使其包含以下属性：

```
overflow: hidden 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:58:41.080

这可以使用纯 css 3 来完成。

因为不可能有一个从`0`到它的高度过渡，`auto`所以它使用`max-height`：

```
.description  {
    max-height: 0;
    transition: 2s;
    overflow:hidden;
}

div.container div.overlay:hover .description {
  max-height: 160px;
} 
```

纯**css**解决方案：http: [//jsfiddle.net/DkAKt/1/](http://jsfiddle.net/DkAKt/1/)

即使您不知道描述的高度，此解决方案也有效。

CSS 3 过渡需要 Internet Explorer 10+：[http](http://caniuse.com/#search=transitions) ://caniuse.com/#search=transitions 。旧版本仍然可以工作，但是没有动画。

* * *

如果在 IE 8-9 中你不能没有动画，你必须使用 javascript：

```
jQuery(function($){
  $(".container").on('mouseenter', function(){
    $(".description", this).stop(1,1).slideDown();  
  }).on('mouseleave', function(){
    $(".description", this).stop(1,1).slideUp();  
  })
  .find('.description').slideUp(0);
}); 
```

纯**jQuery**解决方案：http: [//jsfiddle.net/DkAKt/2/](http://jsfiddle.net/DkAKt/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:51:07.377

对于纯 CSS 解决方案，您需要将`.overlay`div 向下移动一点。

`bottom:-30px;`.

那么你不想展示那部分，所以添加`overflow:hidden;`到`.container`.

现在，当您将鼠标悬停在它上面时，您需要将其抬起。

```
.overlay:hover
{
    bottom:0;
} 
```

现在让它更**漂亮**，使用`transition`。

```
.overlay
{
     bottom:-30px;
     -webkit-transition:bottom 2s;
        -moz-transition:bottom 2s;
          -o-transition:bottom 2s;
             transition:bottom 2s;
}
.overlay:hover
{
    bottom:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:51:12.047

这应该很简单，添加以下 CSS：

```
div.container {
    overflow:hidden;
}

div.overlay {
    bottom:-30px;
    -webkit-transition:bottom 500ms;
    -moz-transition:bottom 500ms;
    -o-transition:bottom 500ms;
    transition:bottom 500ms;
}

div.description {
    height:30px;
}

div.container:hover > div.overlay {
    bottom:0;
} 
```

那应该这样做。如果没有，请删除 > 选择器，它们可能过于具体。

# javascript - 为动态添加的元素添加监听器

> ID：15094680
> 
> 赞同：1
> 
> 时间：2013-02-26T16:47:53.483
> 
> 标签：javascript, jquery, twitter-bootstrap, bootstrap-typeahead

我有一个 javascript/jQuery 页面，我在其中使用 Twitter Bootstrap 的 typeahead。在 javascript 中有两个不同的地方，我可以在其中添加我想预先输入的元素。在不要求主观答案的情况下，我将输入动态注册为预输入的好方法是什么？每次添加它们时都给他们所有不同的 ID 并注册？有什么可以用的魔法`.on()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:50:30.823

您可以使用`jQuery`委托来做到这一点。例如：

```
$("#element-that-will-contain-typeaheads").on("DOMNodeInserted", function () {
    $(this).find(".typeahead").typeahead();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T05:54:43.513

最简单的方法，这将适用于`typeahead, datepicker etc`

首先，您需要了解如何添加要应用的输入元素`bootstrap typeahead`

添加元素尝试实现如下所示：

```
 //add this in your add button click handler
 $tinput = $('<input type="text" name="bootstrap" class="typeahead"/>');

 //apply bootstrap typeahead
 $tinput.typeahead(); 
```

这样它会起作用，我认为在这里分享会帮助其他人:)

# asp.net - Asp.net PreRenderComplete 需要很长时间才能完成

> ID：15094681
> 
> 赞同：1
> 
> 时间：2013-02-26T16:48:02.583
> 
> 标签：asp.net, webforms

我在特定页面上的按钮单击事件上偶尔会出现性能缓慢的问题。有时它在正常参数下表现良好，但似乎只要服务器处于中等负载下（这意味着我可以在我们的生产环境中而不是在我们的开发或测试环境中产生这个问题）它似乎只是挂起。启用跟踪后，我看到它似乎只是挂在 Begin PreRenderComplete 和 End PreRenderComplete 之间。它只是在那里停留了近 30 秒。我没有在该事件空间中执行的任何特定代码。我的理解是，这个事件应该是生命周期中的一个非事件，因为它只是为了确保 PreRender 阶段完成。这个页面有大量的控件，因此有一个相当大的视图状态，

我已经对服务器运行了 perfmon，有时当我能够产生这种行为时，系统资源是正常的，没有请求排队。我试图了解导致这种缓慢的幕后可能发生的动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:22:14.490

我想我找到了问题所在。通过更深入的分析，似乎我的 ScriptManager 控件导致尝试组合脚本时出现延迟。显然这只会在负载下出现问题，并且大多数发生在 prerendercomplete 事件中。通过设置 CombineScripts="false" 属性，它似乎已经解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:23:24.280

页面上是否有任何异步操作？我认为异步调用将在该事件之前完成，因此如果其中一些需要一段时间，例如慢速数据库或慢速网络调用，这可能会导致您看到的延迟。

# mysql - 2 带有 WHERE 子句的 LEFT JOIN 不起作用

> ID：15094685
> 
> 赞同：1
> 
> 时间：2013-02-26T16:48:14.257
> 
> 标签：mysql, sql

我正在尝试使用 2 个连接进行查询，这两个连接都需要 WHERE 子句。我注意到这不起作用，我只能在连接末尾添加一个 WHERE。所以我想知道如何才能做到最好。

这是我当前的查询，它不接受第一个连接中的 WHERE：

```
SELECT  
    p.id, p.username, p.date, p.subject, p.year, p.brand, 
    p.model, p.type, p.bodywork, p.text, p.image, p.chassis, COUNT(c.id) AS answers
FROM 
    posts_tbl AS p
LEFT JOIN 
    post_reply_tbl AS c ON c.post_id = p.id WHERE c.type = 1 AND c.type = 3
LEFT JOIN 
    post_reply_tbl AS a ON a.post_id = p.id WHERE a.type = 2
GROUP BY p.id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:50:11.293

将其更改为`AND`not a `WHERE`：

```
SELECT  p.id, p.username, p.date, p.subject, p.year, p.brand, 
    p.model, p.type, p.bodywork, p.text, p.image, p.chassis, COUNT(c.id) AS answers
FROM posts_tbl AS p
LEFT JOIN post_reply_tbl AS c 
    ON c.post_id = p.id 
    AND c.type = 1 AND c.type = 3
LEFT JOIN post_reply_tbl AS a 
    ON a.post_id = p.id 
    AND a.type = 2
GROUP BY p.id 
```

我认为你需要稍微改变一下，因为`c.type`不能同时有两个值：

```
SELECT  p.id, p.username, p.date, p.subject, p.year, p.brand, 
    p.model, p.type, p.bodywork, p.text, p.image, p.chassis, COUNT(c.id) AS answers
FROM posts_tbl AS p
LEFT JOIN post_reply_tbl AS c 
    ON c.post_id = p.id 
    AND c.type IN (1, 3)  -- changed to use an OR
LEFT JOIN post_reply_tbl AS a 
    ON a.post_id = p.id 
    AND a.type = 2
GROUP BY p.id 
```

如果您希望`c.type`等于`1`和`3`，那么您可能需要考虑使用：

```
SELECT  p.id, p.username, p.date, p.subject, p.year, p.brand, 
    p.model, p.type, p.bodywork, p.text, p.image, p.chassis, c.answers
FROM posts_tbl AS p
LEFT JOIN
(
    select COUNT(c.id) answers, c.post_id
    from post_reply_tbl c
    where c.type in (1, 3)
    group by c.post_id
    having COUNT(distinct type) = 2
) AS c 
    ON c.post_id = p.id 
LEFT JOIN post_reply_tbl AS a 
    ON a.post_id = p.id 
    AND a.type = 2 
```

只是对查询的后续说明，因为您`GROUP BY`只在一个列上使用 a，MySQL 决定返回其他列的哪些值并且这些值可能是意外的。您可以确定返回值的唯一方法是按它们聚合每个列或组。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

出于这个原因，最好使用子查询来获取，`count()`然后您将确保您为其余列返回正确的结果。：

```
SELECT  p.id, p.username, p.date, p.subject, p.year, p.brand, 
    p.model, p.type, p.bodywork, p.text, p.image, p.chassis, c.answers
FROM posts_tbl AS p
LEFT JOIN
(
    select COUNT(c.id) answers, c.post_id
    from post_reply_tbl c
    where c.type in (1, 3)
) AS c 
    ON c.post_id = p.id 
LEFT JOIN post_reply_tbl AS a 
    ON a.post_id = p.id 
    AND a.type = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:51:41.463

您可以在查询末尾添加所有 where 条件：

```
SELECT  p.id, p.username, p.date, p.subject, p.year, p.brand, 
    p.model, p.type, p.bodywork, p.text, p.image, p.chassis, COUNT(c.id) AS answers
                FROM posts_tbl AS p
                LEFT JOIN post_reply_tbl AS c ON c.post_id = p.id 
                                LEFT JOIN post_reply_tbl AS a ON a.post_id = p.id 
WHERE a.type = 2
   AND c.type = 1 AND c.type = 3
GROUP BY p.id 
```

或者在连接条件中使用 AND：

```
SELECT  p.id, p.username, p.date, p.subject, p.year, p.brand, 
    p.model, p.type, p.bodywork, p.text, p.image, p.chassis, COUNT(c.id) AS answers
                FROM posts_tbl AS p
                LEFT JOIN post_reply_tbl AS c ON c.post_id = p.id AND c.type = 1 AND c.type = 3
                                LEFT JOIN post_reply_tbl AS a ON a.post_id = p.id AND a.type = 2
                                GROUP BY p.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:05:14.690

只需将所有术语放在一个 where 子句中

```
SELECT p.id, p.username, p.date, p.subject, p.year, p.brand, 
p.model, p.type, p.bodywork, p.text, p.image, p.chassis, COUNT AS answers
FROM posts_tbl AS p
LEFT JOIN post_reply_tbl AS c ON c.post_id = p.id 
LEFT JOIN post_reply_tbl AS a ON a.post_id = p.id 
WHERE a.type = 2 AND c.type = 1 AND c.type = 3
GROUP BY p.id 
```

# jquery - 用 jQuery 编写的动态菜单中的错误

> ID：15094691
> 
> 赞同：0
> 
> 时间：2013-02-26T16:48:28.140
> 
> 标签：jquery, html, css, dynamic, menu

如果您缓慢地执行操作（打开/关闭答案），一切运行正常，但如果您开始快速点击一个问题，一切都会搞砸！这是我第一次尝试用 jQuery 写东西……你能帮我找出我做错了什么吗？这是 jsfiddle 中的工作示例：http: [//jsfiddle.net/cp4Jd/3/](http://jsfiddle.net/cp4Jd/3/)

这是jQuery函数：

```
$('.expand').each(function(){
   var reducedHeight = $(this).height();
   $(this).css('height', 'auto');
   var fullHeight = $(this).height();
   $(this).height(reducedHeight);                
   $(this).data('reducedHeight', reducedHeight);
   $(this).data('fullHeight', fullHeight);
}).click(function() {
   $(this).animate({height: $(this).height() == $(this).data('reducedHeight') ? $(this).data('fullHeight') : $(this).data('reducedHeight')}, 500);
   $('.container').animate({height: $(this).height() == $(this).data('reducedHeight') ? 
        ($('.container').height() + $(this).data('fullHeight') - $(this).data('reducedHeight')) : 
        ($('.container').height() - $(this).data('fullHeight') + $(this).data('reducedHeight'))}, 500);                
   ($(this).height() == $(this).data('reducedHeight')) ? 
        ($(this).find('.menu_ico').attr('src', 'img/menu_minus.png')) : 
        ($(this).find('.menu_ico').attr('src', 'img/menu_plus.png'));
   }
); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:02:27.687

**你不能把 a`<p>`放在另一个 里面`<p>`。**

我总是做这样的手风琴：

```
<outer wrapper>
    <item>
        <item content wrapper>
            <content>
        </item content wrapper>
    </item>

    <item>
        <item content wrapper>
            <content>
        </item content wrapper>
    </item>

    <item>
        <item content wrapper>
            <content>
        </item content wrapper>
    </item>
</outer wrapper> 
```

然后，您给出`<item>`一个固定高度并将项目的高度设置为它的`<item content wrapper>`高度，并在第二次单击时返回其原始的、隐含的高度（尚未测试）：

```
$('.expand').click(function() {
    if ($(this).height() == $(this).data('reducedHeight')) {
        $(this).stop().animate({height: $(this).children().height() + 50 + 'px'}, slow);
    }
    else {
        $(this).stop().animate({height: $(this).data('reducedHeight') + 'px'}, slow);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:15:22.977

为了清楚起见，这是一个更简单的版本。

HTML：

```
<div class="container">
    <div class="expand">
        <h2>This is a question?</h2>
        <p class="par_menu_content blue">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur.</p>
    </div>
    <div class="expand">
        <h2>Would you like to know the answer?</h2>            
        <p class="par_menu_content blue">Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
            ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit
            in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur
            sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
            mollit anim id est laborum.</p>
    </div>
</div> 
```

jQuery：

```
$(".par_menu_content").hide();

$(".expand h2").click(function(){
    var $h2 = $(this);
    $(".par_menu_content").slideUp();
    $h2.next().stop(true).animate({height:"toggle"},500);

}); 
```

CSS：

```
.container {
    width: 700px;
    margin-top: 17px;
    margin-left: 15px;
    -webkit-border-radius: 26px;
    -moz-border-radius: 26px;
    border-radius: 26px;
}
.expand {
    margin-left: 17px;
    margin-right: 17px;
    padding: 2px;
    clear: both;
    float:left;
}
.par_menu_content {
    margin-right: 40px;
    margin-left: 40px;
    margin-top: 20px;
}
.blue {
    color:#008597;
} 
```

小提琴可以在[这里找到](http://jsfiddle.net/cp4Jd/9/)

# ms-access - 女士 Access 查询不起作用。请建议

> ID：15094699
> 
> 赞同：1
> 
> 时间：2013-02-26T16:49:03.913
> 
> 标签：ms-access, vba

![在此处输入图像描述](../Images/31e39cb6f0f9c118d980e1d68341e680.png)![在此处输入图像描述](../Images/b5174b7ec76f47af4909fd13d2a1e856.png)以下查询需要帮助。谢谢

```
SELECT b.SchemeCode_Db,
    'DBELE',
    1,
    SecurityCode_Db,
    "DIRECT",
    Qty,
    Price,
    ((Commission + TransferCharge) / Qty) AS Charges,
    "",
    iif(Buy_sell_code = "1110", 
            ((Qty * Price) + Commission + TransferCharge),
            iif(Buy_sell_code = "1120", ((Qty * Price) - Commission 
                    - TransferCharge
                ))) AS totalCost,
    BrokerCode_Db,
    "",
    Deal,
    Format(Tradedate, "dd/MM/yyyy"),
    Format(Valuedate, "dd/MM/yyyy"),
    '', 'BSE', 'CH', 'D', '',
    iif(Buy_sell_code = "1110", 
            'PUR', 
            iif(Buy_sell_code = "1120", 'SAL')) AS txn,
    'USD' AS cur
FROM tbl_EQUITYINPUT a
LEFT JOIN tbl_EQUITYMapping b
    ON FundCode = SchemeCode_Client
LEFT JOIN tbl_EQUITYMapping c
    ON Ticker = SecurityCode_Client
LEFT JOIN tbl_EQUITYMapping d
    ON Broker = Brokercode_Client 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:19:27.390

当您的查询`FROM`包含多个`JOIN`. 我怀疑这个`FROM`子句版本将更接近 db 引擎将接受的内容。

```
FROM
    ((tbl_EQUITYINPUT a
    LEFT JOIN tbl_EQUITYMapping b
        ON FundCode = SchemeCode_Client)
    LEFT JOIN tbl_EQUITYMapping c
        ON Ticker = SecurityCode_Client)
    LEFT JOIN tbl_EQUITYMapping d
        ON Broker = Brokercode_Client 
```

但是，我不确定数据库引擎是否会混淆排序哪个连接字段来自哪个表源。我会在这些字段名称前加上正确的表别名。

但我认为您为此感到高兴的最直接途径可能是从查询设计器的设计视图中的新查询开始。添加`tbl_EQUITYINPUT`和 3 个副本`tbl_EQUITYMapping`并分配别名。然后在设计视图中设置它们之间的连接。查询设计器了解使引擎满意的联接规则，因此将指导您使用正确的联接语法。它还将在您的联接中包含带有字段名称的别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:27:48.620

我想知道是否对加入哪个 tbl_EQUITYMapping 实例感到困惑。

我希望看到你的 from 块看起来更像这样：

```
select *
FROM tbl_EQUITYINPUT a
LEFT JOIN tbl_EQUITYMapping b
ON a.FundCode = b.SchemeCode_Client
LEFT JOIN tbl_EQUITYMapping c
ON a.Ticker = c.SecurityCode_Client
LEFT JOIN tbl_EQUITYMapping d
ON a.Broker = d.Brokercode_Client 
```

在这种情况下，您将使用 tbl_EQUITYINPUT 连接三个不同的 tbl_EQUITYMapping 副本。但我不认为这是你想要做的。如果您从 tbl_EQUITYMapping 中提取数据，则选择将不知道从哪个副本中提取数据。

我希望 SchemeCode_Client、SecurityCode_Client 和 Brokercode_Client 形成 tbl_EQUITYMapping 的复合键。在这种情况下，我会期望一个看起来像这样的 from 块。

```
select *
FROM tbl_EQUITYINPUT a
LEFT JOIN tbl_EQUITYMapping b
ON (a.FundCode = b.SchemeCode_Client 
        AND a.Ticker = b.SecurityCode_Client
        AND a.Broker = B.Brokercode_Client) 
```

在这种情况下，您只会得到一份 tbl_EQUITYMapping

你同样可以做这样的事情：

```
select *
from tbl_EQUITYINPUT a, 
        tbl_EQUITYMapping b
where 
    (a.FundCode = b.SchemeCode_Client 
        AND a.Ticker = b.SecurityCode_Client
        AND a.Broker = B.Brokercode_Client) 
```

（设计师可能会也可能不会在以前的版本中为您优化）

# java - 从以 xvfb-run 开始的 java 子进程获取 pid

> ID：15094701
> 
> 赞同：1
> 
> 时间：2013-02-26T16:49:15.300
> 
> 标签：java, linux, pid, xvfb

我正在尝试获取以 xvfb-run 启动的 java 进程的 PID。在没有 xvfb-run 的情况下启动时，我使用 $! 获取最后一个后台进程的 PID，但是一旦我使用 xvfb-run，我显然得到了 xvfb-run 的 PID。

这是代码：

```
#! /bin/bash
logfile=/var/log/SleepTest.log
pidfile=/var/run/SleepTest.pid
command="java -jar /data/test/SleepTest.jar"
( eval exec -c xvfb-run $command < /dev/null >> $logfile 2>&1 ) &
$! > $pidfile 
```

如果我删除倒数第二行中的 xvfb-run 部分，一切正常（除了我没有显示和程序崩溃的部分）。我可能不得不玩“（）”和“&”，但我不是专家。

SleepTest.jar 程序是我编写的一个小程序，因此我不必处理真实的事情。它只睡2分钟。

对于那些想知道我为什么使用 xvfb-run 的人，这是因为我需要启动的 java 应用程序使用 SWT，而我的服务器上没有显示。

对于那些想知道为什么我需要进程的 pid 的人，这是因为我想创建一个 init.d 文件以便能够启动|停止|状态我的应用程序

那么有没有简单的方法来获取呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-12-16T00:38:37.397

`xvfb-run`使用（例如`xvfb-run name_of_script.sh`）运行您的整个脚本，并`xvfb-run`从您的`eval`行中删除。

# java - 使用 ColdFusion 解压缩 64 位 zip 文件

> ID：15094703
> 
> 赞同：2
> 
> 时间：2013-02-26T16:49:16.320
> 
> 标签：java, coldfusion, zip, zipinputstream, apache-commons-compress

我以前用`java.util.zip.ZipFile`ColdFusion 解压缩大文件。但是，我现在收到此错误：“无效的 CEN 标头（错误签名）”。

我发现一个帖子表明这与 zip 64 位格式有关，我可以用`java.util.zip.ZipInputStream`它来处理它。但是，我无法克服这个错误：“您试图取消引用类型类 [B 作为具有成员的结构的标量变量。” 这是由这一行引起的：

```
bos = createObject("java","java.io.BufferedOutputStream").init(fos,buffer.length); 
```

任何帮助是极大的赞赏！

这是我的代码

```
 fis = createObject("java","java.io.FileInputStream").init(zipFilePath);
    bis = createObject("java", "java.io.BufferedInputStream").init(fis);
    zis = createObject("java", "java.util.zip.ZipInputStream").init(bis);

    cnt=0;
    while(1==1){
        cnt++;
        entry = zis.getNextEntry();
        if (isNull(entry))
        {
            writeOutput("done"&now());
            break;
        }

        nm = entry.getName();

        lenPth = len(nm) - len(getFileFromPath(nm));

        if (lenPth) {
            pth = outputPath & left(nm, lenPth);
        } else {
            pth = outputPath;
        }

        if (NOT directoryExists(pth)) {
            fil = createObject("java", "java.io.File");
            fil.init(pth);
            fil.mkdirs();
        }

        byteClass = createObject("java", "java.lang.Byte").TYPE;
        buffer = createObject("java","java.lang.reflect.Array").newInstance(byteClass, 2048);

        fos = createObject("java","java.io.FileOutputStream").init(outputPath & nm);
        bos = createObject("java","java.io.BufferedOutputStream").init(fos,buffer.length);

            while(1==1) {
                size = zis.read(buffer, 0, buffer.length);
                if(size == -1)
                    break;
                bos.write(buffer, 0, size);
            }
            bos.flush();
            bos.close();

    }

    zis.close();
    fis.close(); 
```

来源：

*   [java.util.zip.ZipException：CEN 标头无效（签名错误）](https://stackoverflow.com/questions/12346707/java-util-zip-zipexception-invalid-cen-header-bad-signature)

*   [http://www.kodejava.org/examples/334.html](http://www.kodejava.org/examples/334.html)

*   [http://blogs.adobe.com/cantrell/archives/2004/01/byte_arrays_and_1.html](http://blogs.adobe.com/cantrell/archives/2004/01/byte_arrays_and_1.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:46:59.880

传入`ArrayLen( Buffer )`而不是`buffer.length`将解决错误。

```
bos = createObject("java","java.io.BufferedOutputStream").init(fos,arrayLen(buffer)); 
```

您也可以使用的`getLength( array )`方法，`java.lang.reflect.Array`但与使用相比，创建另一个实例似乎有点过头了`arrayLen()`

# ios - 使用空值填充 NSString

> ID：15094710
> 
> 赞同：1
> 
> 时间：2013-02-26T16:49:29.697
> 
> 标签：ios, objective-c, json, nsstring

简而言之，我需要一个包含 null 的字符串，而不是 (null)。

例如：

```
NSString *jsonRequest = [NSString stringWithFormat:@"{\"ename\":%@}", nil]; 
```

形成一个如下所示的请求：

```
{ "ename" : (null) } 
```

但我需要它看起来像

```
{ "ename" : null } 
```

用 Nil、NULL、[NSNull null] 替换 nil 都等同于相同的输出字符串。

有没有办法做到这一点？当我将请求发送到服务器并尝试解析它，但不喜欢 null 周围的括号时，问题就出现了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:51:41.797

您需要对以下参数进行特殊处理`stringWithFormat`：

```
NSString *ename = nil;
NSString *jsonRequest = [NSString stringWithFormat:@"{\"ename\":%@}",
                        ename != nil ? ename : @"null"]; 
```

或者创建一个宏：

```
#define STR_OR_NULL(x) (x) != nil ? (x) : @"null"

NSString *jsonRequest = [NSString stringWithFormat:@"{\"ename\":%@}", STR_OR_NULL(ename)]; 
```

# android - AndroidManifest 错误

> ID：15094714
> 
> 赞同：0
> 
> 时间：2013-02-26T16:49:44.193
> 
> 标签：android, android-manifest

我的 AndroidManifest 文件中出现错误，“解析 xml 时出错：文档后的垃圾”IDE 没有突出显示错误，而是在“android:versionName="1.0">”处标记错误有什么想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.ballincoliig.gun.powder.mills.walking.trail"
        android:versionCode="1"
        android:versionName="1.0" >
        <application
            android:icon="@drawable/ic_launcher-web" android:label="@ballincoliig.gun.powder.mills.walking.trai">
            <activity
                android:name="GPSActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <uses-library android:name="com.google.android.maps" />
        </application>

        <uses-sdk android:minSdkVersion="4" />

        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.INTERNET" />

    </manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:56:17.493

> 我想这可能是因为 res 文件夹中图像的命名约定。
> 
> **命名约定**是文件名必须仅包含**[a-z0-9_.]**

```
<application android:icon="@drawable/ic_launcher-web" android:label="@ballincoliig.gun.powder.mills.walking.trai" > <!--Problem here-->... 
```

*   将 res 文件夹中的此图像重命名为**ic_launcer_web**和此处。

*   **在strings.xml**中定义一个属性

 **`<string name="app>GPS</string>`

并在 Android Manifest.xml 中这样设置

```
<application android:icon="@drawable/ic_launcher_web" android:label="@string/app"> 
```**

# java - 显示删除字段的 ArrayList

> ID：15094716
> 
> 赞同：0
> 
> 时间：2013-02-26T16:49:47.347
> 
> 标签：java, arraylist

我正在做一个项目，我的程序是从文本文件中读取有关员工的某些信息（ID、名字和姓氏、可用日期、年薪等）。我创建了一个员工类，以及`hashCode`和`equals`方法以及所有的getter、setter、变量声明等等。
我遇到的问题是在主课上。这是我的代码：

```
public static void main(String[] args) throws FileNotFoundException {
    ArrayList<Employee> db = new ArrayList<>();
    try {
        Scanner fin = new Scanner(new File("employeeDB.txt"));
    } catch (FileNotFoundException e) {
        System.out.println(e);
    }

    Scanner fin = new Scanner(new File("employeeDB.txt"));
    while (fin.hasNextLine()) {
        String line = fin.nextLine();
        String[] fields = line.split(",", 0);
        Employee emp = new Employee(Integer.parseInt(fields[0]), fields[1],
                fields[2], fields[3], fields[4], Integer.parseInt(fields[5]),
                Boolean.parseBoolean(fields[6]), fields[7], fields[8],
                Double.parseDouble(fields[9]), fields[10]);
        db.add(emp);
    }

    listAllEmployee(db);
    System.out.println("");
    listAllEmployeeEidAndName(db);

}
public static void listAllEmployee(ArrayList<Employee> list) {
    System.out.println("List all employees:");
    for (Employee emp : list) {
        System.out.println(emp);
    }
}

public static void listAllEmployeeEidAndName(ArrayList<Employee> list) {
    System.out.println("List all empoyee eid and name:");
    for (Employee emp : list) {
        System.out.println("Employee{eid=" + emp.getEid()
                + ", firstName=" + emp.getFirstName()
                + ", lastName=" + emp.getLastName());
    }
}

public static void listEmployeeByField(ArrayList<Employee> list,
        int field) {
    } 
```

我不确定如何做最后一种方法。我唯一的想法是以与我为该`listAllEmployeeEidAndName`方法所做的类似的方式编写一个巨大的 switch 语句，但这似乎不切实际。

有没有办法让它删除字段并只显示`listEmployeeByField`调用方法时给出的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:55:21.757

您可以创建一个将字段映射到员工列表的映射。就像是：

```
Map<String, List<Employee>> map = new HashMap<String, List<Employee>>();

for(Employee e : list)
{
   if(e.containsKey(e.getField())
   {
      List<Employee> list = map.get(e.getField());
      list.add(e);
      map.put(e.getField(), list);
   }
   else
   {
      List<Employee> list = new ArrayList<Employee>()l
      list.add(e);
      map.put(e.getField(), list);
   }
} 
```

最后，您可以遍历地图的键并按字段打印出所有员工。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:00:29.353

通过字段，我看到您指的是 id、name 等属性...您可以尝试这样做，因为您已经发现需要使用开关，这是正确的。

```
public static void listEmployeeByField(ArrayList<Employee> list, int field) {
        for(Employee e : list) {
            switch(field) {
                case 0: System.out.println(e.getId());
                        break;
                case 1: System.out.println(e.getFirstName());
                        break;
                case 2: System.out.println(e.getLastName());
                        break;
                // .... and so on
        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:02:40.943

我会添加这样的方法`Employee`

```
public String selectField(int... fields) {
    StringBuilder strb = new StringBuilder("Employee{");
    if (fields.length == 0) {
        strb.append("No fields selected ");
    } else {
        for (int i = 0; i < fields.length; i++) {
            switch(fields[i]) {
                case 0: strb.append("eid=" + id + ","); break;
                case 1: strb.append("firstName=" + firstName + ","); break;
                //... and so on
                default: strb.append("-->Field " + fields[i] + " doesn't exist<--");  
            }
        }
    }
    strb.replace(strb.length() - 1, strb.length(), "}");
    return strb.toString();
} 
```

并像这样编写您的方法：

```
public static void listAllEmployeeByField(List<Employee> list, int... fields) {
    System.out.println("Listin all empoyee by fields "+ Arrays.toString(fields) + ":");
    for (Employee emp : list) {
        System.out.println(emp.selectField(fields));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:20:58.283

最简单的方法是在 Employee 类中存储一个字符串数组 - fields[]，其中位置“field”的值是字段（字符串）的名称。例如，假设“ID”是存储在 0 的字段，“Name”是存储在位置 1 的字段，那么您的 fields 数组在内存中将如下所示：

字段 = {"Id","Name", ...... ,}

然后你需要做的就是在正确的位置打印字符串：

public static void listEmployeeByField(ArrayList list, int field) {

```
 for (Employee emp : list) 
    System.out.println(emp.fields[field]); 
```

}

通过将 main 中的字符串数组“fields”传递给类构造函数，您可以在为类的其他成员赋值的同时构造这个数组。

# git - 撤消推送到裸 git repo

> ID：15094718
> 
> 赞同：2
> 
> 时间：2013-02-26T16:49:54.537
> 
> 标签：git

我刚刚将一大堆我不应该有的提交推送到一个裸仓库，它将它收到的所有更改的文件复制到我们的 web 根目录

```
GIT_WORK_TREE=/var/www git checkout -f 
```

在一个`post-receive`钩子里。

因为一次推送了一大堆提交，所以我不知道 repo 收到的上一个健康提交的 id 是什么。

有什么办法可以撤消这个推送吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-10T13:07:33.223

这真的做不到。

[`git reflog`](http://git-scm.com/docs/git-reflog)，它显示了您已签出的提交以及在它们之间移动了哪些操作的完整历史记录，通常是使用 Git 存储库从无能导致的灾难中恢复的合适工具；您只需查看历史记录，直到看到在您做任何愚蠢和破坏性的事情之前所做的提交，然后检查该提交。

不幸的是，对于裸 repos，reflog[默认是禁用的](https://stackoverflow.com/a/3877483/1709587)。除非您`core.logAllRefUpdates`在 repo 的配置中明确启用，`git reflog`否则只会返回没有输出。如果你觉得有必要阅读这个问题，很可能你还没有明确启用`core.logAllRefUpdates`.

[正如 Matthieu Moy 所描述的](https://stackoverflow.com/a/30152246/1709587)，您仍然可以通过查看开发机器上的远程跟踪分支的 reflogs（或您推送到裸存储库的任何存储库）来获得所需的信息。但是，如果您无法访问进行最后一次健康推送的任何开发机器，那么即使是该选项也可能对您不可用。

如果这是你的情况，我怕你完蛋了。你唯一的办法——假设你对应该签出的提交有*一些*了解——是`git log`通过肉眼查看完整的提交历史并尝试检查你认为可能是你想要的提交。启用 reflog 或下次更加小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-10T13:54:47.587

正如 Mark Amery 所说，reflog 很可能在服务器上被禁用。*但是*，如果您有您从中推送的存储库的副本，仍然有希望。当你进行推送时，Git 更新了一个远程跟踪分支（如`refs/remotes/origin/master`），并且可能更新了这个远程跟踪分支的 reflog。

在 的输出中，您应该找到与您的推送相对`git reflog show origin/master`应的条目。`update by push`之前的条目对应于您在推送之前的位置。

您还可以直接查看日志文件（例如`.git/logs/refs/remotes/origin/master`）并找到类似的条目

```
acb60f2759717796f807197f6997708528260255 59dbeca4120db70db34144ee14d05cc526b1f5ab Your Self <Your.Self@example.com> 1427137007 +0100  update by push 
```

第一个 sha1 是你之前的位置，第二个是你之后的位置。

但是没有魔法：这只会给你这个存储库看到的远程跟踪的历史，而不是谁推送的详细历史。

# python - 未绑定的本地错误

> ID：15094719
> 
> 赞同：0
> 
> 时间：2013-02-26T16:49:54.273
> 
> 标签：python, global-variables

我在 python 中使用以下代码不断收到未绑定的本地错误：

```
xml=[]       
global currentTok
currentTok=0                     

def demand(s):
    if tokenObjects[currentTok+1].category==s:
        currentTok+=1
        return tokenObjects[currentTok]
    else:
        raise Exception("Incorrect type")

def compileExpression():
    xml.append("<expression>")
    xml.append(compileTerm(currentTok))
    print currentTok
    while currentTok<len(tokenObjects) and tokenObjects[currentTok].symbol in op:
        xml.append(tokenObjects[currentTok].printTok())
        currentTok+=1
        print currentTok
        xml.append(compileTerm(currentTok))
    xml.append("</expression>")

def compileTerm():
    string="<term>"
    category=tokenObjects[currentTok].category
    if category=="integerConstant" or category=="stringConstant" or category=="identifier":
        string+=tokenObjects[currentTok].printTok()
        currentTok+=1
    string+="</term>"
    return string

compileExpression()
print xml 
```

以下是我得到的确切错误：

```
UnboundLocalError: local variable 'currentTok' referenced before assignment. 
```

这对我来说毫无意义，因为我清楚地初始化`currentTok`为我的代码的第一行之一，我什`global`至将它标记为只是为了安全并确保它在我所有方法的范围内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:51:22.210

您需要将该行`global currentTok`放入您的*功能*，而不是主模块。

```
currentTok=0                     

def demand(s):
    global currentTok
    if tokenObjects[currentTok+1].category==s:
        # etc. 
```

该`global`关键字告诉您的函数它需​​要在全局范围内查找该变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:51:41.700

您需要在函数定义中声明它是全局的，而不是在全局范围内。

否则，Python 解释器看到它在函数内部使用，假设它是一个局部变量，然后当你做的第一件事是引用它而不是分配给它时会抱怨。

# facebook - Facebook 在使用他们的搜索 API 时提供什么样的排名？

> ID：15094720
> 
> 赞同：0
> 
> 时间：2013-02-26T16:49:58.127
> 
> 标签：facebook, facebook-graph-api

Facebook 使用具有不同对象类型的查询提供搜索，不知道 Facebook 对结果施加的排名是什么，或者是否有办法影响该排名（即通过喜欢或分享的数量等）

此外，我没有找到通过查看下面提供的 API 来指定对象类型“照片”的方法，有没有办法将“照片”指定为要搜索的对象类型？

[https://developers.facebook.com/docs/reference/api/search/](https://developers.facebook.com/docs/reference/api/search/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:00:17.867

可以合理地假设 Facebook 的相关性算法不是一个简单的全面解决方案。相反，它可能因人而异。如果我的很多朋友都喜欢一个页面，我会比你更有可能在结果中看到它。这就是`access_token`发挥作用的地方。

回答你的第二个问题：`Post`对象有一个`type`参数。显然，如果您发布到照片端点等，很明显它是一张照片。我不是 100% 确定，但可以合理地假设当你 POST 到`/me/feed`端点时，facebook 会弄清楚围绕着什么“主要”动作。如果涉及链接，则可能是链接。如果是带照片的签到，那可能都是签到。等等。

# c++ - 生成 AES (AES-256) 查找表

> ID：15094722
> 
> 赞同：5
> 
> 时间：2013-02-26T16:50:00.370
> 
> 标签：c++, matrix, cuda, aes, lookup

我正在尝试使用 nVidia CUDA 在 CTR 模式下实现 AES-256。我已经成功编写了用于密钥扩展的 CPU 代码，现在我需要实现实际的 AES-256 算法。根据维基百科，我见过的一些代码，特别是[这个 PDF](http://www.hyperelliptic.org/SPEED/slides09/kasper-aes_speedcc09_slides.pdf)（第 9 页），AES 轮次可以实现为一系列表查找。我的问题是如何生成这些表？我知道我需要 4 KB 来存储这些表，这不是问题。我花了一整天的时间试图找到这些表，但没有成功。我发布的 PDF 链接提到了查找表 T0、T1、T2 和 T3，但我不知道这些是什么。它还提到了轮键 4、5、6 和 7，但我也不明白这些索引指的是什么。

我最接近弄清楚如何生成这些查找表的方法来自[这个项目](http://code.google.com/p/engine-cuda/)。在代码中，有一条注释说：

```
Te0[x] = S [x].[02, 01, 01, 03];
Te1[x] = S [x].[03, 02, 01, 01];
Te2[x] = S [x].[01, 03, 02, 01];
Te3[x] = S [x].[01, 01, 03, 02]; 
```

但是，我不完全确定我知道该符号的含义（是矩阵乘法还是其他什么？）。我唯一认识的是混合列部分常数矩阵，以及 S-box 矩阵。

[编辑] 现在有人指出了 - 查找实现实际上如何变慢？在这里没有查找表的情况下实现 AES 是否明智？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:00:21.200

T 表是矩阵形式的 AES 轮转换的直接描述。要构建它们，请参阅原始[Rijndael NIST 提案](http://csrc.nist.gov/archive/aes/rijndael/Rijndael-ammended.pdf)，第 5.2.1 节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T08:18:37.870

如果有人仍然感兴趣，可以在 Go 编程语言的标准库中找到这些查找表 - [http://golang.org/src/crypto/aes/const.go#L80](http://golang.org/src/crypto/aes/const.go#L80)

还有关于如何在同一个包的测试文件中生成表的说明。

# c# - “Id”字段验证失败

> ID：15094725
> 
> 赞同：0
> 
> 时间：2013-02-26T16:50:02.790
> 
> 标签：c#, asp.net-mvc, validation

我有一个简单的 MVC 模型，如下所示：

```
public class SomeClass
{
    public int Id { get; set; }

    [Required(ErrorMessage = "Please provide a name for the blah blah blah")]
    public string Name { get; set; }
} 
```

...我有这样的看法（简化）：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<CompanyName.Web.Models.SomeClassViewModel>" %>

<form method="post" action="/someclass/add">
    <%=Html.HiddenFor(m => m.SomeClass.Id)%>

    <div>
        <%=Html.LabelFor(m => m.SomeClass.Name)%>
        <%=Html.TextBoxFor(m => m.SomeClass.Name, new { @class = "form-medium" })%>
    </div>
</form> 
```

在提交表单时，我的控制器会验证`ModelState`类似的内容：

```
[HttpPost]
public ActionResult Add(Models.SomeClassViewModel model)
{
    if (ModelState.IsValid)
    {
        ...
    }
} 
```

我得到一个模型验证错误

> “ID 字段是必需的。”

为什么会出现这种情况？

默认情况下，该`Id`字段被分配为 0（应该如此），然后它将被传递到数据层以创建记录，所以我看不出问题出在哪里？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:46:05.540

好的，所以我发现了问题所在。

在我的视图模型类 ('SomeClassViewModel') 的构造函数中，我添加了一行代码，该代码调用了 'SomeClass' 属性的默认构造函数。

我通过检查“Id”验证键的 ModelState 错误发现了这一点，并看到“AttemptedValue”属性是一个空字符串，它应该是 0。将此属性实例化为“SomeClass”的实例修复了它。

我希望这可以帮助可能遇到同样问题的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:56:35.967

如果您更改 Id 变量的名称或将数据类型更改为字符串，会发生什么情况？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:56:53.343

确保`Models.SomeClassViewModel`该类也具有`Id`相同类型和变量名称的字段。

如果不是这种情况，你也可以试试这个：

```
[HttpPost]
public ActionResult Add(SomeClass model)
{
    if (ModelState.IsValid)
    {
        ...
    }
} 
```

# c - 将 strcat() 与字符串和 int 一起使用的最有效方法是什么？

> ID：15094726
> 
> 赞同：3
> 
> 时间：2013-02-26T16:50:02.617
> 
> 标签：c, casting, int, concatenation, strcat

我正在尝试`char * rv`与将返回`int`. `fib()`返回一个整数。我遇到的主要问题是`strcat()`签名需要 a`const char *`因为它是第二个参数：

```
char * strcat ( char * destination, const char * source ); 
```

这是我的代码的一个小示例。`fib()`计算第 n 个斐波那契数 - 在本例中为第 7 个斐波那契数。

```
char * rv;
int num;

rv = (char*)malloc(2048*sizeof(char));
num = 7;

...

strcat(rv, (const char *)itoa(fib(num), rv,10)); 
```

显然这是错误的，不会编译。最干净的方法是什么？我是否需要另一个`char * var`来存储第一个的结果`itoa()`，而不是使用`rv`？

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:55:37.317

用于[`snprintf()`](http://en.cppreference.com/w/c/io/fprintf)构造一个包含 的缓冲区`int`，然后将其连接到您的`rv`缓冲区。不要**尝试**`rv`将同一调用中的现有内容连接到`snprintf()`：

```
snprintf(rv, 2048, "%s%d", rv, itoa(fib(num), rv,10))); 
```

因为这意味着输入和输出缓冲区重叠，这是未定义的行为。

还：

*   `sizeof(char)`保证是`1`
*   请参阅[是否强制转换 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

所以`malloc()`电话是：

```
rv = malloc(2048);
if (rv)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:55:23.547

你可以这样做

```
sprintf(dest,"%s %d",rv,num); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T16:58:25.667

您需要一个中间`char`数组来在`strcat`ing 之前打印数字，或者您可以直接`sprintf`将数字打印到`rv`，但为此您需要一个指向末尾的指针，

```
char *rv = malloc(2048);
char *rv_end = rv;
...
rv_end += sprintf(rv_end, "%d", fib(num)); 
```

并`rv_end`在将其他内容附加到缓冲区时更新指针。

（感谢[jthill](https://stackoverflow.com/users/1290731/jthill)使用 的返回值进行改进`sprintf`。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T20:01:44.293

```
char * strcat ( char * destination, const char * source ); 
```

source 上的“const”只是告诉编译器 strcat 函数不会修改“source”。否则，

```
strcat(buffer, "hi"); 
```

不会被允许的。

这并不意味着您的源必须是常量，也不应该具有 const 修饰符。

```
strcat(rv, (char *)itoa(fib(num), rv,10)); 
```

(no "const") 是完全合法的，不应产生任何编译器警告。

唯一的问题是，如果您不知道源的长度，您就会面临缓冲区溢出。在这种特殊情况下，您可以计算出 itoa 返回的时间并相应地调整目的地的大小。然而，对我们 snprintf 来说，控制它的大小可能更安全。

# java - hbm2ddl：关于删除集空问题

> ID：15094729
> 
> 赞同：0
> 
> 时间：2013-02-26T16:50:24.523
> 
> 标签：java, hibernate, database-schema, hbm2ddl

我正在使用休眠 hbm2ddl 功能生成模式。在定义实体之间的 Realtionship 时，我想为子类设置 ON DELETE SET NULL。但是hibernate不允许我们注释性地定义这样的约束。我想定义这个注释。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:49:04.690

看看[5.6。NHibernate 参考中的辅助数据库对象](http://nhforge.org/doc/nh/en/index.html#mapping-database-object)。您可以编写一个 ALTER 命令根据需要调整约束。

# vb.net - 将日期插入 Oracle

> ID：15094732
> 
> 赞同：0
> 
> 时间：2013-02-26T16:50:38.470
> 
> 标签：vb.net, oracle

我想在 oracle 的日期字段中插入一个日期时间。到目前为止，我一直使用 sysdate，它工作得很好，但是我需要为其他事情使用相同的时间戳。

有谁知道我如何创建一个与 oracle 的日期字段兼容的日期时间变量？我尝试的一切都会导致错误。

我已经尝试过这样的变化：

```
Dim timestamp As DateTime = CDate(Now.ToString("yyyy/MM/dd HH:mm:ss"))

.......more code....

insertBuilder.Append("date = to_date(" & timestamp & ")") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:59:51.127

`DateTime`首先，您似乎对对象和该对象的格式化`String`表示之间的区别感到困惑`DateTime`。 `Now`，甚至更好，`DateTime.Now`已经是一个`DateTime`对象，因此将其格式化为字符串然后解析字符串以`DateTime`再次将其恢复为值是没有意义的。所以，你可以简单地这样做来完成同样的事情：

```
Dim timestamp As Date = Date.Now 
```

请注意，在 VB.NET 中，`Date`是 的缩写，`DateTime`就像.`Integer``Int32`

其次，您不应该将`DateTime`值直接附加到 SQL 命令字符串中。您应该使用参数化查询。将`DateTime`值附加到 SQL 字符串时，必须确保其格式正确（通过调用`timestamp.ToString(...)`）。然而不幸的是，哪种格式是正确的将完全取决于服务器的文化设置。因此，最好使用 DB 参数，将参数值设置为与实际`DateTime`对象相等，然后让 DB 提供程序为您进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:10:40.407

参数化查询是一个好的开始，因为您可以将本机 .Net DateTime 对象传递到企业库（例如）并指定它属于`DbType.DateTime`并让 EL 担心它。但是，如果您不能这样做，因为您没有使用 EL 或类似的东西，并且坚持使用问题中发布的 SQL 字符串，那么您需要了解 Oracle 如何在内部处理日期，特别是在格式方面。

使用 SQL Developer 或 SQLPlus，执行以下命令：

```
Select To_Char(sysdate) from Dual; 
```

如果您使用 To_Date 和 Oracle 将在 To_Char 中使用，显示的格式是您的 Oracle 实例期望日期的格式。如果您在任一调用中偏离该格式，那么您将遇到问题。但是，无论使用哪种默认格式，您都可以通过在调用中指定它来覆盖它：

```
Select To_Char(sysdate, 'YYYY/MM/DD HH:MI:SS') from Dual;
Select To_Date('2013/02/26 05:03:27', 'YYYY/MM/DD HH:MI:SS') from Dual; 
```

您可以通过设置 NLS_DATE_FORMAT 参数来设置希望 Oracle 隐式使用的默认值：

```
ALTER SESSION SET NLS_DATE_FORMAT='YYYY/MM/DD HH:MI:SS'; 
```

请注意，前面的语句仅更改**执行它的会话**的默认值。我们在我们的 Oracle 系统中使用自定义格式，并确保我们在使用登录后触发器的所有会话中都能获得它：

```
create or replace TRIGGER NLS_Parameters_OnLogon  AFTER LOGON ON SCHEMA BEGIN    

-- This makes the database case insensitive for sorting and searching and sets the default date format for TO_CHAR and TO_DATE    

    EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_COMP=LINGUISTIC';   
    EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_SORT=BINARY_CI';  
    EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_DATE_FORMAT=''YYYY/MM/DD HH:MI:SS'''; 
End; 
```

可以通过编辑一些 Oracle 配置文件来更改整个 Oracle 服务器的默认日期格式，但由于我们必须部署到我们无法控制的客户端服务器，因此我们使用此方法。

[本文](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html)涵盖了与我刚刚拥有的相同的基础，并以示例的方式提供了更多内容。

# javascript - 如何确定哪个 javascript 类设置了内联样式

> ID：15094744
> 
> 赞同：1
> 
> 时间：2013-02-26T16:51:25.880
> 
> 标签：javascript, css

我是一个有大量 javascript 类（16-20 个文件）和许多动态功能的项目的新手。有一个元素，它的高度和最大高度从 javascript 文件内联设置。有没有办法从哪个文件设置？

```
<div class="ccass" style="width: 100%; height: 67px; max-height: 67px;"> 
```

调整为

```
<div class="ccass" style="width: 100%; height: 307px; max-height: 307px;"> 
```

调整窗口大小时。我需要禁用调整大小并设置固定高度 - 至少对于某些页面。

是否有一些开发工具可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:55:57.277

如果你有 Firefox，你可以在 HTML 选项卡中检查“属性更改中断”选项。只需右键单击目标元素，就会弹出菜单。之后，调整窗口大小，它将在更改属性的脚本行中中断。

![使用萤火虫](../Images/49663a7e289abfae59931284a904b7fd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:56:36.830

grep js 源以*调整大小*或*onresize*事件/方法，然后从那里开始。

# maven - 如何使用以太获取所有 Maven 依赖项？

> ID：15094751
> 
> 赞同：4
> 
> 时间：2013-02-26T16:51:44.447
> 
> 标签：maven, aether

我正在尝试使用以太获取 Maven 工件的依赖项。我看到一个 RepositorySystem.collectDependencies()，但它只获取编译和运行时范围的依赖项。如何获取工件的所有依赖项，包括测试和提供？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:13:29.307

看一下[jcabi-aether](http://www.jcabi.com/jcabi-aether/index.html)（我是一名开发人员），它是 Sonatype Aether 的包装器：

```
File repo = this.session.getLocalRepository().getBasedir();
Collection<Artifact> deps = new Aether(this.getProject(), repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  JavaScopes.RUNTIME
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-08T15:54:35.680

假设您正在使用`DefaultRepositorySystemSession`，您可以执行以下操作：

```
defaultRepositorySystemSession.setDependencySelector(new DependencySelector() {
    @Override
    public boolean selectDependency(Dependency dependency) {
        return true;
    }

    @Override
    public DependencySelector deriveChildSelector(DependencyCollectionContext context) {
        return this;
    }
}); 
```

接着

```
CollectResult result = repositorySystem.collectDependencies(defaultRepositorySystemSession, request); 
```

[这是一个执行此操作的示例项目。](https://github.com/ivarref/collect-provided-dependencies)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T10:54:55.207

您可以`DependencyFilter`在 Eclipses Aether 中使用。下面的示例的[完整版本](https://github.com/eclipse/aether-demo/blob/master/aether-demo-snippets/src/main/java/org/eclipse/aether/examples/ResolveTransitiveDependencies.java)可以在这组很棒的[Aether 片段中找到。](https://github.com/eclipse/aether-demo/find/master)

```
DependencyFilter classpathFilter = DependencyFilterUtils.classpathFilter(JavaScopes.COMPILE, JavaScopes.PROVIDED);

CollectRequest collectRequest = new CollectRequest();
collectRequest.setRoot( new Dependency( artifact, JavaScopes.COMPILE ) );
collectRequest.setRepositories(repositories);

DependencyRequest dependencyRequest = new DependencyRequest( collectRequest, classpathFilter );

List<ArtifactResult> artifactResults =
    system.resolveDependencies( session, dependencyRequest ).getArtifactResults(); 
```

**更新**

0.9.0M3 版本与 Maven 3.1.0 不兼容，所以不要在 Maven 内部，即在插件中使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-19T17:07:26.750

这三个文件：

[https://github.com/terraframe/Runway-SDK/tree/v1.8.0/runwaysdk-server/src/main/java/com/runwaysdk/business/generation/maven](https://github.com/terraframe/Runway-SDK/tree/v1.8.0/runwaysdk-server/src/main/java/com/runwaysdk/business/generation/maven)

是一个使用 Aether 的独立工作示例。

它工作了几个月，然后我突然弹出一个问题，有时在 Mac JRE 上会在 com.sun:tools.jar 上抛出 DependencyResolutionException。

祝你好运，如果你决定使用它，我将改为使用 maven-dependency-plugin `dependency:build-classpath`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-31T16:47:53.213

看看这个 github 项目：[https](https://github.com/Gemba/mvn-dd)
://github.com/Gemba/mvn-dd 它下载所有依赖项，包括测试和提供。
它使用以太的库来获取它们。

# kernel - 编写 e1000 驱动程序时内核冻结

> ID：15094757
> 
> 赞同：1
> 
> 时间：2013-02-26T15:57:07.753
> 
> 标签：kernel, drivers, linux-kernel, ethernet

我正在为 e1000 卡编写网络驱动程序。在执行接收部分时，我看到内核在到达 netif_rx(skb) 调用时会冻结。使用硬编码 skb 数据的裸机驱动程序时，我能够重现相同的错误。

请参阅下面的测试功能的代码。数据是 TCP 数据包的数据（带有 IP 和以太网标头）。当我将驱动程序加载到虚拟机中时，我看到 VM 进程在主机中占用了 100% 以上的 CPU。此后操作系统不响应输入。如果我注释掉 netif_rx 行，它似乎工作正常。

```
static void test_skb(void){

            unsigned char t[] = {0x52,0x54,0x00,0x12,0x34,0x56,0x52,0x55,0x0a,0x00,0x02,0x02,0x08,0x00,0x45,0x00,0x00,0x2c,0x00,0x1c,0x00,0x00,0x40,0x06,0x62,0xa0,0x0a,0x00,0x02,0x02,0x0a,0x00,0x02,0x0f,0xc6,0x1a,0x1e,0xdb,0x4c,0x81,0x18,0x01,0x00,0x00,0x00,0x00,0x60,0x02,0x22,0x38,0x14,0x66,0x00,0x00,0x02,0x04,0x05,0xb4};
            int len = 58;
            struct sk_buff *skb;
            skb = dev_alloc_skb (len + 2);
            if (skb) {
               printk("Allocated skb buffer\n");
               memcpy(skb_put(skb, len), t, len);
               printk("step1\n");
               //skb_put(skb, len);
               //skb->dev = dev;
               printk("step2\n");
               //skb->protocol = eth_type_trans(skb, dev);
               skb->protocol = ETH_P_IP;
               printk("step3\n");
               skb->ip_summed = CHECKSUM_UNNECESSARY;
               printk("step4\n");
               //netif_rx (skb);
               printk("step5\n");
            }

        printk(KERN_INFO"All Done");
        if(skb){
           dev_kfree_skb(skb);
        }

} 
```

# linux - 如何使用 ANSI 转义打印包含文本的文件

> ID：15094758
> 
> 赞同：0
> 
> 时间：2013-02-26T16:52:10.253
> 
> 标签：linux, bash, shell, command-line

我想打印一个包含带有 ANSI 转义的文本的文件。

这是文件内容（使用 bash 脚本生成）：

```
\033[1m bold message example \033[0m
normal font message 
```

*   在终端中将文件打印到屏幕时，效果很好：

    ```
     cat example.txt 
    ```

    显示：

    > **粗体消息示例**
    > 
    > 正常字体消息

*   但是当我尝试将它发送到打印机时我的问题：

    ```
     lp example.txt 
    ```

    印刷：

    > 1mbold message example2m
    > 
    > 正常字体消息

有没有办法正确打印这个文件？也许与 groff （可用于打印样式手册页），但我没有设法得到任何有效的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:58:17.070

也许[a2ps](http://www.gnu.org/software/a2ps/)可能能够处理（但我不确定，你应该尝试）。

而且我宁愿建议更改使用[ANSI 转义](http://en.wikipedia.org/wiki/ANSI_escape_code)获取此类文件的方式（即，还提供一些替代输出格式）。我的意思是生成这样一个文件（或这样一个输出）的程序可以改为产生一个更可打印的输出（也许通过生成一些中间形式，例如 LaTeX、Lout、或 groff 或 HTML 格式，然后分叉适当的命令来打印它. 该程序还可以通过[libharu](http://libharu.org/)或[poppler](http://poppler.freedesktop.org/)等直接生成 PDF ......）

此外，它可能取决于您的打印机和驱动程序。

# ruby-on-rails - Mandrill API 模板

> ID：15094759
> 
> 赞同：5
> 
> 时间：2013-02-26T16:52:11.670
> 
> 标签：ruby-on-rails, ruby, email, heroku, mandrill

我正在使用 Mandrill 的 Ruby API Gem 并使用以下简单模板进行测试：

```
<html>

    <body>
        <h1 mc:edit="header">testastic</h1>
        <hr/>
        <br/><br/>
        <div mc:edit="main_section"></div>
        <hr/>
        <div mc:edit="footer"></div>
    </body>
 </html> 
```

按照 Heroku 指南上的示例，我有以下 Ruby 代码：

```
require 'mandrill'
  m = Mandrill::API.new
  rendered = m.templates.render 'test-template', [{:header => 'some header text', :main_section => 'The main content block', :footer => '<h3>asdf</h3>'}]

  mail(:to => "Jayson Lane <jayson@domain.com>", :subject => "Test Email") do |format|
       format.html { rendered['html'] }
       #format.text { render "test" }
  end 
```

这很好用，电子邮件可以很好地发送我的模板，但是，它不会替换模板 mc:edit 变量。我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T17:30:25.620

您需要为要替换的每个元素构造一个哈希。例如，我在模板中有这个：

```
 <h3 mc:edit="plan_info_name"> </h3>
   <span mc:edit="plan_info_description"> </span>
   <span mc:edit="plan_info_benefits"> </span> 
```

这在邮件中：

```
mandrill.messages.send_template(template,[
    {
     :name => 'plan_info_name',
     :content => extra[:membership_info].name
    },
    {
     :name => 'plan_info_description',
     :content => extra[:membership_info].long_description   
    },
    {
     :name => 'plan_info_benefits',
     :content => benefits_list 
    }
  .... 
```

# android - 如何设置 GCM 用户注册？

> ID：15094761
> 
> 赞同：0
> 
> 时间：2013-02-26T16:52:14.667
> 
> 标签：android, eclipse, google-cloud-messaging

在我的应用程序中，我已经有一个注册页面，其中包含我的应用程序所需的详细信息。我正在关注本教程[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)它在这里说我需要制作一个用户将在那里填写的注册页面，其中包含全名和电子邮件。有必要吗？有人可以解释一下为什么用户需要填写电子邮件吗？如何将其与我的注册页面合并？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:22:18.903

不，您不需要**电子邮件**或除 regId 之外的任何其他内容即可将 GCM 发送到特定设备上的特定应用程序。**方便**的是在设备所有者/项目组合和存储在服务器数据库中的 regID 之间进行一对一的映射。因此，您决定使用什么作为唯一密钥完全取决于您。

# mysql - MySQL 时间戳数学在使用 unix_timestamp() 后表现不同

> ID：15094762
> 
> 赞同：3
> 
> 时间：2013-02-26T16:52:16.770
> 
> 标签：mysql

我试图弄清楚 MySQL 在时间戳的数学运算期间在做什么。

结果问题的图片：

![在此处输入图像描述](../Images/2c575c265e7388a978723da20a307085.png)

你会在左边看到我有两个时间戳，开始和结束，我需要找到从开始到结束的持续时间，所以我这样做：

结束 - 开始

我得到了一些非常奇怪的结果。您可以看到仅 3 小时的持续时间，我得到的结果表明该数量是该数量的 2 到 3 倍。

当我首先转换为 UTC 时，数学计算结果很好。

谁能解释一下 SQL 对左边的时间戳做了什么？我一直认为所有时间戳都是 UTC 引擎盖下的，这就是为什么像最小值、最大值、小于等这样的东西可以在不转换的情况下工作。

谢谢！

代码：

```
select  
    min(timestamp) start, 
    max(timestamp) end, 
    max(timestamp) - min(timestamp) start_to_end, 
    unix_timestamp(min(timestamp)) startUTC, 
    unix_timestamp(max(timestamp)) endUTC,
    unix_timestamp(max(timestamp)) - unix_timestamp(min(timestamp)) start_to_end_UTC
from post_snapshots group by permalink; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:46:00.167

These examples have nothing to do with timezone conversions -- when you subtract one date directly from the other, MySQL generates a integer from all existing date parts and then makes the math operations. For example, this query:

```
select now()+1; 
```

returns (it was '2013-02-26 14:38:31' + 1):

```
+----------------+
| now()+1        |
+----------------+
| 20130226143832 |
+----------------+ 
```

So the difference between "2013-02-19 16:49:21" and "2013-02-19 19:07:31" turns out to be:

```
20130219190731 - 20130219164921 = 25810 
```

The correct way for getting this subtraction is to either convert the dates to timestamps (like you did) or to use `TIMESTAMPDIFF(SECOND, start_date, end_date)`, which would return 8290.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:40:22.083

这不是`DATETIME`vs.`TIMESTAMP`或时区问题。

MySQL 通过将每个值转换为数字来将日期时间作为减法（或其他数学运算）的操作数来处理，但它不是秒数，它只是将日期时间数字加在一起。以您的数据为例：

`2013-02-19 16:49:21`变成`20130219164921`

`2013-02-19 19:07:31`变成`20130219190731`

这两个数字之间的差是... 25810，这是您看到的减法运算结果的值。正如您所指出的，这不是几秒钟内的结果。这实际上并没有多大用处。

相比之下，[`TIMESTAMPDIFF()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)（或像您所做的那样预先转换为 Unix 时间戳）实际上使用适合时间的数学来执行差异，如果您正在寻找差异对于排序之外的意义重大：

```
SELECT TIMESTAMPDIFF(SECOND, '2013-02-19 16:49:21', '2013-02-19 19:07:31')
>>> 8290 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:40:19.603

发生的事情是您不能在 mysql 中减去日期/日期时间。对于所有数学运算，mysql 时间戳数据类型的行为类似于 datetime 数据类型。你可以改用

```
 select  
    TIMESTAMPDIFF(SECOND,min(timestamp),max(timestamp))
  from post_snapshots group by permalink; 
```

# ios - 如何从 sqlitedb 查询中的第一个字符获取字符串

> ID：15094765
> 
> 赞同：0
> 
> 时间：2013-02-26T16:52:28.310
> 
> 标签：ios, objective-c, sqlite

我有一个 sqlitedb，其中有一个名为症状表的表，其中包含 ID (Integer) 和 SymptomName(String) 作为列。我创建了一个 sqlite 查询，我在其中根据症状名称的第一个字母获取症状名称

例如：- ..如果第一个字母包含字母“A”获取那些单词，“B”获取那些单词等等..

现在我想从 ID 反转过程我想根据第一个字母获取 symptonName ...如果症状名称从字母“D”开始，我想获取从字母“D”开始的项目列表，换句话说，我想要获取 SymptomName 列表，其中包含来自 ID .. 的第一个字母并返回 Indexpath

**在查询 NSString *alphabetString=[NSString stringWithFormat:@"%c",i]; 从这段代码中我得到了字符。**

```
-(NSMutableDictionary *)indexReadData
{
    NSMutableDictionary *indexDict=[[NSMutableDictionary alloc]init];
    int i;  
    NSString *dbPath=[[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"QuickCureNew1.sqlite"];
    if (sqlite3_open([dbPath UTF8String], &quickAppNew)==SQLITE_OK) 
    {
        for (i=65; i<=90; i++) 
        {
            NSString *alphabetString=[NSString stringWithFormat:@"%c",i];
            NSString *sqlStmtReadIndexSymptom=[NSString stringWithFormat:@"select * from Symptom where Symptom like '%@%%'",alphabetString];
            const char *sqlCharReadIndexSymptom=[sqlStmtReadIndexSymptom UTF8String];
            sqlite3_stmt *selectStmtReadIndexSymptom;
            if (sqlite3_prepare_v2(quickAppNew, sqlCharReadIndexSymptom, -1, &selectStmtReadIndexSymptom, NULL)==SQLITE_OK)
            {
                NSMutableArray *indexArray=[[NSMutableArray alloc] init];
                while (sqlite3_step(selectStmtReadIndexSymptom)==SQLITE_ROW) 
                {
                    indexIdNo=[[NSNumber alloc]initWithInt:(int)sqlite3_column_int(selectStmtReadIndexSymptom,0)];
                    symptomIndexTxt=[[NSString alloc] initWithUTF8String:(char*) sqlite3_column_text(selectStmtReadIndexSymptom, 1)];
                    symptomsIndexDict=[[NSMutableDictionary alloc] initWithObjectsAndKeys: 
                                       symptomIndexTxt,@"SymptIndexName",
                                       indexIdNo,@"SymptIndexID",nil];
                    [indexArray addObject:symptomsIndexDict];
                }
                if (indexArray.count>0) 
                {
                    [indexDict setObject:indexArray forKey:alphabetString];
                }
            }
        }
        sqlite3_close(quickAppNew);
    }
    return indexDict;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:58:17.133

因为`CoreData`它是一个`NSPredicate`：

```
NSPredicate *bPredicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] 'a'"]; 
```

这一切都在 Apple Developer 参考中： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)

也许这为您指明了正确的方向。

# java - Android - 像 http 服务器一样的套接字，将嵌入图像发送到浏览器

> ID：15094766
> 
> 赞同：0
> 
> 时间：2013-02-26T16:52:29.510
> 
> 标签：java, android, httpserver

我为我的 android 应用程序实现了一个简单的 HTTP 服务器，它通过套接字传递 html 标记，一切都按预期进行。

但我尝试在客户端（浏览器）中加载一个简单的嵌入图像（http://localhost:1234/img.jpg\" />），但我不知道如何让套接字加载它。谁能帮忙我给出坐标来制作它？

我的简单http服务器：

```
public class MainClass extends Activity {
  // Called when the activity is first created 
  // It was called from onCreate method surrounded with try catch 
    [...]

ServerSocket ss = new ServerSocket(1234);
while (true) {
  Socket s = ss.accept();
  PrintStream out = new PrintStream(s.getOutputStream());
  BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
  String info = null;
  while ((info = in.readLine()) != null) {
    System.out.println("now got " + info);

    if(info.equals(""))
        break;
  }
  out.println("HTTP/1.0 200 OK");
  out.println("MIME_version:1.0");
  out.println("Content_Type:text/html");
  String c = "<html>" +
     "<head></head>" + 
     "<body>" + 
     "<img src=\"http://localhost:1234/img.jpg\" />" + // << Does not load in the browser
     "<h1> hi </h1>" + 
     "</body>" +
     "</html>";

  out.println("Content_Length:" + c.length());
  out.println("");
  out.println(c);
  out.close();
  s.close();
  in.close();
}

[...]

}

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:28:47.857

图像未加载的原因`http://localhost:1234/img.jpg`是您的应用程序未提供该文件。当一个`<img />`标签被处理时，浏览器将转到 src 路径并将该文件加载到页面中。

我不知道如何临时实现（我之前没有实现过 HTTP）。但是您至少必须处理输入的`GET`请求，并区分基本网页和图像请求。

# cakephp - db 列中的时事通讯标志设置为 2？

> ID：15094770
> 
> 赞同：0
> 
> 时间：2013-02-26T16:52:35.710
> 
> 标签：cakephp

我想在数据库表中将时事通讯标志设置为 2，但是当我这样做时 $this->data['User']['newsletter'] = 2; 它始终设置为 1。它是注册页面上的一个复选框。谁能帮我把它设置为2。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:57:35.703

如果它是一个复选框，则您的时事通讯字段为 tinyint(1)。这是是/否，1/0 的布尔表示。所以要么你只想存储一个布尔值（因此视图中的复选框），要么你需要将你的字段更改为 tinyint(2) 以允许某种枚举（不仅仅是两个确定的状态）。但是，您还需要在视图中使用此处的选择。

那么你到底想做什么？你不能两全其美。

# php - 如何验证对特定目录中文件的直接请求

> ID：15094771
> 
> 赞同：0
> 
> 时间：2013-02-26T16:52:41.240
> 
> 标签：php, security, .htaccess, wordpress

我们的网站由 Wordpress 提供支持，我正在使用允许用户上传文件的插件。我们有合理的安全措施来防止恶意文件被用户加载到服务器，但这些文件随后可供公众直接访问。例如，任何人都可以像这样直接访问这些文件中的任何一个：

```
http://www.website.com/path/to/files/file_1.pdf
http://www.website.com/path/to/files/file_2.pdf
http://www.website.com/path/to/files/file_3.docx 
```

这是一个安全/隐私问题，因为这些文件可能包含不应提供给任何人的个人数据。

我知道我可以使用 .htaccess 阻止对整个目录的访问，但是插件将停止工作。相反，我认为我需要使用 .htaccess 将这些请求重定向到一个脚本，该脚本检查当前用户是否有权查看它们。棘手的部分是对这些文件的直接请求绕过了 Wordpress 应用程序，因此`is_user_logged_in()`如果我重定向到某个中间页面，则没有任何核心功能（如 ）可用。

似乎我要么需要编写一个脚本来手动检查 Wordpress 授权 cookie（这听起来很麻烦），要么以某种方式在 Wordpress 中循环。

对于在不破坏插件的情况下添加此安全层的优雅方式有什么建议吗？

# dos - 获取第二天日期的方法

> ID：15094772
> 
> 赞同：0
> 
> 时间：2013-02-26T16:52:42.620
> 
> 标签：vbs, dos

在 dos 中是否有一种简单的方法可以以这种格式获得第二天的第二天：`mm/dd/yyyy`？

在[vbs](/questions/tagged/vbs "显示标记为“vbs”的问题")中是：

```
DateAdd("d",1,dtmStart) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:08:06.277

DOS 有 %DATE% 变量来存储可以从命令提示符调用的日期信息。您可以使用字符串操作来显示您认为合适的字符串。将 %DATE% 显示为 MM/DD/YYYY 格式的一些示例。

```
ECHO %DATE:~3,2%/%DATE:~0,2%/%DATE:~-4,4% 
```

# groovy - 使用 groovy 类别添加动态属性

> ID：15094773
> 
> 赞同：5
> 
> 时间：2013-02-26T16:53:01.150
> 
> 标签：groovy, metaclass

扩展[这篇博](http://joesgroovyblog.blogspot.com/2007/09/and-miles-to-go-before-i-sleep.html)文，我试图使用一个类别来创建一个简单的 DSL 以用于`javax.measure`（JSR-275）类（类似于时间间隔的 TimeCategory）

但是，我不想为每个可能的可用方法（getMeter、getMilliMeter、getKelvin、getSecond 等）添加样板代码。我认为覆盖该`getProperty(String)`方法会起作用，但是，在直接访问该属性时，似乎`getProperty`没有使用该类别中定义的方法。

下面是一些简化的代码来演示： import javax.measure.quantity.Length; 导入 javax.measure.unit.Unit；导入 javax.measure.Measure；

```
@Category(Number)
class LengthCategory {      
    public Measure<BigDecimal, Length> getProperty(String unit){
        return Measure.valueOf(this,Unit.valueOf(unit));
    }
}

use(LengthCategory){
    println 3.getProperty("m")  // this works
    println 3.m                 // this reports a non-exisiting property
    prinlln 3.'m'               // as does this
} 
```

假设其他动态添加属性到运行时对象的方法（例如`Expando`，子类化`GroovyInterceptible`、混合和其他元类操作）是不可行的，我真的宁愿不必为每个可能的单位和 SI 前缀组合手动编写 getter。显然还有其他方法可以创建用于测量的 DSL，但我仍然想了解为什么这种方法不起作用。

有人可以解释为什么该`getProperty`类别的方法不会覆盖`.propertyName`使用情况吗？我显然错过了在运行时使用元类解析属性名称的重要内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:17:02.467

我不知道为什么`getProperty`不适用于类别。但是您可以`get`在它们上定义一个基本相同的方法（我认为）。这有效：

```
@Category(Number)
class LengthCategory {      
    def get(String unit) {
        "$this $unit"
    }
}

use (LengthCategory) {
    println 3.m   // 3 m
    println 3.'m' // 3 m
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T17:37:33.960

据我所知，您实际上不能使用 Category 来扩展具有完整（即可读和可写）属性的整数——只能使用方法。

您可以通过使用属性的方法版本来使用只读属性扩展 Integer。您甚至可以通过包含 set 方法使其可写。但是，似乎没有办法将传入的值存储在静态变量中，这最终会影响所有整数。

例子：

```
$ cat catprop
#!/usr/local/bin/groovy

@Category(Integer)
class CatInteger {
  private static String str = "default"
  public static String setN(Integer i, String _str) { str = _str }
  public static String getN(Integer i) { return str }
}

use (CatInteger) {
  3.n = "333a"
  println "3.n is " + 3.n

  3.n = "333b"
  println "3.n is " + 3.n

  4.n = "444"
  println "4.n is " + 4.n
  println "3.n is " + 3.n
}
$ catprop
3.n is 333a
3.n is 333b
4.n is 444
3.n is 444
$ 
```

请注意，在最后一行 3.n 中返回“444”，因为存储的字段是静态的。我想人们可以使用私有 HashMap 并为每个访问的 Integer 存储一个值，但这太难看了。

另一种可能性是使用 MetaClass 接口的 getProperty() 和 setProperty()。但是，我还没有研究过，所以我不知道它是否会起作用（只是一个想法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-28T12:23:18.470

不错的答案，但不确定，既然[JSR-363](https://jcp.org/en/jsr/detail?id=363)是最终版本，您是否仍想使用 JSR-275？;-)

# ruby-on-rails - 使用 Nokogiri 解析 XML

> ID：15094778
> 
> 赞同：0
> 
> 时间：2013-02-26T16:53:11.100
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在使用 rest-client 从另一个网站返回 XML 并尝试使用 Nokogiri 来解析它。XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?> ... 
<MXAUTOKESet>
  <AUTOKEY>
    <AUTOKEYID>27</AUTOKEYID> 
    <AUTOKEYNAME>WORKORDERNUM</AUTOKEYNAME> 
    <ORGID>xxxx</ORGID> 
    <PREFIX>12-</PREFIX> 
    <SEED>38979</SEED> 
    ... 
```

我想提取“PREFIX”和“SEED”数字。

我的视图代码如下所示：

```
<% xml_data = RestClient.get "URL (sorry can't display it in this question)" %>
<%= xml_doc  = Nokogiri::XML(xml_data)%> 
```

第二行在页面上显示返回的 XML，因此，我知道 rest-client 正在工作，但我不知道如何访问已解析的 XML。

* * *

更新1：

我能够`creationDateTime`使用以下方法摆脱 XML 标头。但是，我仍然无法获得 SEED 值：

```
<%= doc = Nokogiri::XML(xml_data)%>    
<h4>Creation Date</h4>
<% root = doc.root %>
<%= root["creationDateTime"] %>
<h4>SEED</h4>
<%= seed = root.xpath("SEED").text %> 
```

或者

```
 <%= seed = doc.xpath("//SEED").inner_text %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:14:55.167

您的代码中有几处错误，所以这就是我的处理方式：

从此代码开始：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<?xml version="1.0" encoding="UTF-8"?>
<MXAUTOKESet>
  <AUTOKEY>
    <AUTOKEYID>27</AUTOKEYID> 
    <AUTOKEYNAME>WORKORDERNUM</AUTOKEYNAME> 
    <ORGID>xxxx</ORGID> 
    <PREFIX>12-</PREFIX> 
    <SEED>38979</SEED> 
EOT

puts doc.to_xml 
```

我得到这个输出，表明 Nokogiri 做了一些修复来关闭打开的标签，确保合理正确的 XML 块：

```
<?xml version="1.0" encoding="UTF-8"?>
<MXAUTOKESet>
  <AUTOKEY>
    <AUTOKEYID>27</AUTOKEYID>
    <AUTOKEYNAME>WORKORDERNUM</AUTOKEYNAME>
    <ORGID>xxxx</ORGID>
    <PREFIX>12-</PREFIX>
    <SEED>38979</SEED>
</AUTOKEY></MXAUTOKESet> 
```

`xpath`需要一个 XPath 访问器，并返回一个 NodeSet，它就像一个节点数组：

```
doc.xpath("//SEED").class
=> Nokogiri::XML::NodeSet
doc.xpath("//SEED")
=> [#<Nokogiri::XML::Element:0x3fdf890e3208 name="SEED" children=[#<Nokogiri::XML::Text:0x3fdf890e3000 "38979">]>] 
```

问题是 ,[`xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-xpath)及其[`css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)对应物将返回他们在文档中找到的每个目标，如果有两个或更多“SEED”标签，这不是您想要的。相反，您希望[`at`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at)or [`at_xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_xpath)or [`at_css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_css)which 返回找到的第一个匹配项；我建议在您的第一次测试中使用`at`(or `search`) 和 CSS，因为它比 XPath 更容易理解。

转换为使用`at`和 CSS：

```
doc.at("SEED").class
=> Nokogiri::XML::Element
doc.at("SEED")
=> #<Nokogiri::XML::Element:0x3fdf890e3208 name="SEED" children=[#<Nokogiri::XML::Text:0x3fdf890e3000 "38979">]> 
```

请注意，它`doc.at("SEED")`返回了“Nokogiri::XML::Element”，这是 Nokogiri 描述节点的方式，而不是来自`xpath`(AKA ) 的 NodeSet (AKA Array `search`)。

拥有节点后，获取文本很简单：

```
doc.at("SEED").text
=> "38979" 
```

下面是我如何获取两个值并将它们分配给两个变量，给定小的 XML 片段：

```
seed, prefix = %w[SEED PREFIX].map{ |t| doc.at(t).text }
=> ["38979", "12-"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:07:03.027

您的最后一行代码`puts doc.xpath("//SEED").inner_text`, 应该可以工作。真正的 XML 是否有任何名称空间？如果是这样，请尝试以下操作：`puts doc.css("SEED").inner_text`

# java - 将网页文本放入 textview (Android)

> ID：15094785
> 
> 赞同：1
> 
> 时间：2013-02-26T16:53:31.153
> 
> 标签：java, android, html

我想将网页中的文本放到 Android 3.0 上的文本视图中。我有这个代码：

```
public class Biografie extends Activity {
    private TextView outtext;
    private String HTML;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_biografie);

        outtext= (TextView) findViewById(R.id.textview1); 

        try { 
        getHTML();
    } catch (Exception e) {
        e.printStackTrace();
    }       
    outtext.setText("" + HTML);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.biografie, menu);
        return true;
    }

    private void getHTML() throws ClientProtocolException, IOException 

    {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet("http://artistone.appone.nl/api/biografie.php?dataid=998"); //URL!
        HttpResponse response = httpClient.execute(httpGet, localContext);
        String result = "";

        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        String line = null;
        while ((line = reader.readLine()) != null) {
            result += line + "\n";
            HTML = result;
        }

    }

} 
```

我的 TextView 返回“null”而不是页面中的文本。请帮我解决这个问题。对此表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:59:33.223

将您的代码更改为：

```
while ((line = reader.readLine()) != null) {
    result += line + "\n";
}
HTML = result; 
```

试试这个： `outtext.setText(Html.fromHtml(HTML));`

而不是在主线程中执行网络操作，我建议您在单独的线程中使用`AsyncTask`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:13:41.390

问题是你得到`NetworkOnMainThreadException` 那是因为你在主线程（活动线程）上下载网络内容。

相反，您需要使用后台线程来下载该内容，或使用**AsynchTask**。

应该解决此问题的简单代码：

```
 final Handler handler = new Handler();
    Thread thread = new Thread() {
        public void run() {
            try {
                getHTML();
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        outtext.setText("" + HTML);

                    }
                });
            } catch (Exception e) {
                e.printStackTrace();
                    handler.post(new Runnable() {
                    @Override
                    public void run() {
                        outtext.setText(e.toString());

                    }
            }
        }
    };
thread.start(); // I forgot to start the thread. sorry ! 
```

代替 ：

```
 try { 
           getHTML();
    } catch (Exception e) {
        e.printStackTrace();
     }       
    outtext.setText("" + HTML); 
```

还可以看看这个关于 android 线程的教程：[教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

# asp.net - 如何使用“first-child”将css规则应用于表格列的所有单元格？

> ID：15094803
> 
> 赞同：0
> 
> 时间：2013-02-26T16:54:42.117
> 
> 标签：asp.net, css

我有下表

```
 <table class = "new-hire-table">                                    
   <tr>
      <th>First Name</th>
      <td><asp:TextBox ID="txtFName" runat="server" /></td>
      <th>Last Name</th>
      <td><asp:TextBox ID="txtLName" runat="server" /></td>
   </tr>
   <tr>
      <th>Title</th>
      <td><asp:DropDownList ID="ddlTitle" runat="server"></td>

      <th>Position</th>
      <td><asp:DropDownList ID="ddlPosition" runat="server"></td>
   </tr>
 </table> 
```

我想将第一列的大小设置为 50px，将最后一列的大小设置为 200px；**该表具有名为new-hire-table 的**css 类。只是为了测试 css 规则，我正在尝试应用背景颜色。

```
.new-hire-table tr th:first-child
{
  background-color: Blue;
} 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:55:39.933

我猜它不起作用，因为你有`:firs`而不是`:first-child`在你的 CSS 中。

这是一个工作示例：http: [//jsfiddle.net/4UGVe/1/](http://jsfiddle.net/4UGVe/1/)

```
.new-hire-table tr th:first-child{
   background-color: Blue;
    width: 50px;
}

.new-hire-table tr td:last-child{
   background-color: red;
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:23:28.577

在你的评论中你说：“它只在 FF 和 Chrome 中工作，而不是在 IE 中”（你应该添加到问题中）。

由于发布的确切代码在符合标准的文档中使用时可以在 IE 上运行，因此问题显然是由[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)引起的，其中许多“新”CSS 属性被忽略。

如果您正在开发一个新页面，请将其添加`<!doctype html>`为 HTML 文档的第一行并按照标准对页面进行编码。如果这是一个依赖 Quirks Mode 的旧页面，从它切换出去可能会导致不可预知的问题；在这种情况下，请考虑向`class`相关单元格添加属性并使用类选择器而不是`:first-child`.

# liferay-6 - 如何在 Liferay 服务构建器中定义新的列类型

> ID：15094807
> 
> 赞同：2
> 
> 时间：2013-02-26T16:54:48.827
> 
> 标签：liferay-6

我想定义一个实体，如下所示：

```
<entity name="Book" local-service="true" remote-service="true">
    <column name="bookId" type="long" primary="true" />

    <column name="bookPrice" type="BigDecimal"  />
</entity> 
```

我的liferay是6.0.6。

如何在 liferay 服务构建器中创建新类型，如 BigDecimal 或其他类型？

# type-conversion - 28k/56k 调制解调器仿真器/解码器

> ID：15094808
> 
> 赞同：1
> 
> 时间：2013-02-26T16:55:02.897
> 
> 标签：type-conversion, converter, modem, ogg

我在 ogg 中有一个无损调制解调器记录。主要问题是我不知道如何将数据翻译成某种可以理解的形式。是否有任何调制解调器工具能够将数据转换为有意义的格式？

如果不是，那么在调制之前强行找出原始内容的最佳做法是什么？我的意思是生成可能的数据，直到原始数据文件和生成的文件匹配。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:26:08.567

我会问这个人： http: [//www.whence.com/minimodem/](http://www.whence.com/minimodem/)

他已经在 minimodem 中实现了早期协议，但可能知道用于最新协议的另一种工具。

# sql - sql最小值来自一列，另一列组唯一三分之一

> ID：15094811
> 
> 赞同：0
> 
> 时间：2013-02-26T16:55:18.180
> 
> 标签：sql, sql-server-2008

我有这个查询，我从三个表中选择

```
select 
    min(t.ReminderDt) as 'rem dt',  
    m.Group_Id, m.AccountNumber 
from 
    ACE_AccsLevelTran t, ACE_AccsLevelMaster m 
where 
    t.MasterAccNumber = m.AccountNumber 
group by  
    m.Group_Id, m.AccountNumber; 
```

这导致：

```
rem dt | Group_Id| AccountNumber
--------------------------------    
2/8/2013 | 3 | 4216985
2/22/2013 | 4 | 4274863
2/7/2013 | 3 | 4366383
2/28/2013 | 4 | 7151712 
```

如何仅获取 3 和 4 的最短日期的行，如结果 -

```
2/7/2013 | 3 | 4366383
2/22/2013 | 4 | 4274863 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:59:19.287

只需从 group by 中删除 account_number 并用`min()`or包围它：`max()``select`

```
select min(t.ReminderDt) as 'rem dt',  m.Group_Id, min(m.AccountNumber)
from ACE_AccsLevelTran t,     ACE_AccsLevelMaster m 
where t.MasterAccNumber=m.AccountNumber
group by  m.Group_Id 
```

这将返回一个任意帐号。要获得具有最小值的*行*`row_number()`，最好的方法是使用：

```
select *
from (select t.ReminderDt) as 'rem dt',  m.Group_Id, m.AccountNumber,
            row_number() over (partition by group_id order by reminderdt desc) as seqnum
      from ACE_AccsLevelTran t join ACE_AccsLevelMaster m 
           on t.MasterAccNumber=m.AccountNumber
     ) t
where seqnum = 1 
```

此外，您应该学习在此查询中使用的 ANSI 标准 JOIN 语法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T17:05:35.160

如果您的 accountNumber 也是唯一的，您可以这样做：

```
Select m.Group_Id ,X.MinReminderDT,m.AccountNumber 
from ACE_AccsLevelMaster m join(
select min(t.ReminderDt) as MinReminderDT,t.MasterAccNumber
from ACE_AccsLevelTran t
Group By t.MasterAccNumber) X on X.MasterAccNumber=m.AccountNumber 
```

# java - 如何检查是否需要升级 h2 数据库？

> ID：15094815
> 
> 赞同：3
> 
> 时间：2013-02-26T16:55:36.517
> 
> 标签：java, database, h2

在[H2 下载站点上](http://h2database.com/html/download.html)，有一个`Database Upgrade Helper File`用于从 1.1 升级到更新版本。我想知道是否有一种很好且干净的方法来检查数据库是否需要升级。到目前为止，我所做的是使用新驱动程序打开与旧数据库的连接，捕获异常然后进行迁移。如果可能的话，我想在 Java 中进行检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:05:09.867

如果您`Database Upgrade Helper File`的类路径中有 ，并且数据库是使用 H2 1.1 版创建的，那么数据库会自动升级。

除此之外，您不需要升级数据库，因为自 H2 版本 1.2 以来数据库文件没有更改（使用 1.2.x 版本创建的数据库可以使用最新版本打开）。至少，这是计划。如果它在某些情况下不起作用，那么请告诉我们问题所在。

# java - 使用 Comparator 而不是 equals() 比较两个 Java 集合

> ID：15094818
> 
> 赞同：18
> 
> 时间：2013-02-26T16:55:40.963
> 
> 标签：java, collections, equals, comparator

# 问题陈述

我有两个要比较的相同类型对象的集合。在这种情况下，我想根据不考虑`equals()`对象的属性来比较它们。在我的示例中，我使用了 Names 的排名集合，例如：

```
public class Name {
    private String name;
    private int weightedRank;

    //getters & setters

    @Override
    public boolean equals(Object obj) {
        return this.name.equals(obj.name); //Naive implementation just to show
                                           //equals is based on the name field.
    }
} 
```

我想比较两个集合以断言，对于`i`每个集合中的位置，`weightedRank`该位置的每个名称的值是相同的。我做了一些谷歌搜索，但没有在 Commons Collections 或任何其他 API 中找到合适的方法，所以我想出了以下内容：

```
public <T> boolean comparatorEquals(Collection<T> col1, Collection<T> col2,
        Comparator<T> c)
{
    if (col1 == null)
        return col2 == null;
    if (col2 == null) 
        return false;

    if (col1.size() != col2.size())
        return false;

    Iterator<T> i1 = col1.iterator(), i2 = col2.iterator();

    while(i1.hasNext() && i2.hasNext()) {
        if (c.compare(i1.next(), i2.next()) != 0) {
            return false;
        }
    }

    return true;
} 
```

# 问题

还有另一种方法可以做到这一点吗？我是否错过了 Commons Collections 中的一个明显方法？

# 有关的

我也在 SO 上发现[了这个问题](https://stackoverflow.com/questions/11758220/a-mechanism-for-having-different-equals-physical-equals-and-logical-equals-on)，虽然在这种情况下我认为覆盖`equals()`更有意义。

## 编辑

与此非常相似的内容将在不久的将来（在撰写本文时）发布[Apache Commons Collections 。](http://commons.apache.org/proper/commons-collections/)请参阅[https://issues.apache.org/jira/browse/COLLECTIONS-446](https://issues.apache.org/jira/browse/COLLECTIONS-446)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:45:28.413

您可以使用 Guava [Equivalence](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html)类来解耦“比较”和“等价”的概念。您仍然需要编写接受 Equivalence 子类而不是 Comparator 的比较方法（AFAIK Guava 没有），但至少您的代码不会那么混乱，并且您可以根据任何等价标准比较您的集合。

使用等价包装对象的集合（请参阅[Equivalence 中的 wrap 方法](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html#wrap%28S%29)）将类似于 sharakan 提出的基于适配器的解决方案，但等价实现将与适配器实现分离，允许您轻松使用多个等价标准。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-27T09:21:48.947

您可以使用从版本 4 开始`isEqualCollection`添加的新方法`CollectionUtils`。该方法使用`Equator`接口实现提供的外部比较机制。请检查这个 javadocs：[CollectionUtils.isEqualCollection(...)](https://commons.apache.org/proper/commons-collections/javadocs/api-4.4/org/apache/commons/collections4/CollectionUtils.html#isEqualCollection-java.util.Collection-java.util.Collection-org.apache.commons.collections4.Equator-)和[Equator](https://commons.apache.org/proper/commons-collections/javadocs/api-4.4/org/apache/commons/collections4/Equator.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:04:05.243

我不确定这种方式实际上更好，但它是“另一种方式”......

获取原始的两个集合，并为每个基础对象创建包含一个适配器的新集合。适配器应该具有`.equals()`并`.hashCode()`实现为基于`Name.calculateWeightedRank()`. 然后你可以使用普通的集合相等来比较适配器的集合。

*** 编辑 ***

使用 Eclipse 的标准 hashCode/equals 生成`Adapter`. 您的代码只需在每个基本集合上调用 adaptCollection，然后 List.equals() 这两个结果。

```
public class Adapter {

    public List<Adapter> adaptCollection(List<Name> names) {
        List<Adapter> adapters = new ArrayList<Adapter>(names.size());

        for (Name name : names) {
            adapters.add(new Adapter(name));
        }

        return adapters;
    }

    private final int name;

    public Adapter(Name name) {
        this.name = name.getWeightedResult();
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + name;
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Adapter other = (Adapter) obj;
        if (name != other.name)
            return false;
        return true;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:11:38.387

**编辑**：删除旧答案。

您拥有的另一个选项是创建一个名为的接口`Weighted`，如下所示：

```
public interface Weighted {
    int getWeightedRank();
} 
```

然后让你的`Name`类实现这个接口。然后你可以改变你的方法看起来像这样：

```
 public <T extends Weighted> boolean weightedEquals(Collection<T> col1, Collection<T> col2)
{
    if (col1 == null)
      return col2 == null;
     if (col2 == null) 
      return false;

  if (col1.size() != col2.size())
      return false;

  Iterator<T> i1 = col1.iterator(), i2 = col2.iterator();

  while(i1.hasNext() && i2.hasNext()) {
      if (i1.next().getWeightedRank() != i2.next().getWeightedRank()) {
          return false;
      }
  }

  return true;
} 
```

然后，当您发现需要加权和比较的其他类时，您可以将它们放入您的集合中，并且它们也可以相互比较。只是一个想法。

# c# - 如何使用 C# 连接到远程 MySQL 服务器？

> ID：15094819
> 
> 赞同：7
> 
> 时间：2013-02-26T16:55:44.503
> 
> 标签：c#, mysql

我有一个 C# 应用程序可以访问另一台计算机上的 MySQL 服务器。我正在尝试通过 IP 来实现。这是我的连接字符串：

```
server = "192.168.10.221";
database = "restaurantdb";
uid = "root";
password = "";
string connectionString;
connectionString = "SERVER=" + server + "; PORT = 3306 ;" + "DATABASE=" + database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";
mycon = new MySqlConnection(connectionString); 
```

现在的想法是，我将通过两台计算机都连接到的 Internet 或 Wi-Fi 连接来连接它。然后，我将通过 C# 上编码的 SQL 字符串访问数据库。现在我也可以通过 LAN 网络连接它们，但我不知道如何。

我在我的代码中遇到了这个异常

```
{"Access denied for user 'root'@'Crave-PC.lan' (using password: NO)"}   System.Exception {MySql.Data.MySqlClient.MySqlException} 
```

有什么想法可以通过网络访问服务器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T17:04:51.133

问题出在 MySQL 服务器端，root 用户没有远程连接的权限。要授予 root 用户远程连接的权限，只需在 mysql 命令行上键入：

```
GRANT ALL PRIVILEGES ON *.* TO root@"%" IDENTIFIED BY 'rootPass'; 
```

只需将“rootPass”更改为您当前的 root 密码，如果 root 没有密码 MySQL 不会让您连接，因此您必须为它定义一个。

附注：**作为一种安全最佳实践，您应该定义一个不同于 root 的用户来从客户端应用程序访问您的 mysql 数据库。**

希望能帮助到你，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T11:42:16.747

该线程的一个补充：

在某些情况下，两台计算机连接到同一网络，尽管配置了源计算机并从客户端计算机为用户授予了权限，但上面定义的连接字符串可能仍然不起作用。

在这种情况下，请考虑（在进一步移动并对源计算机进行更严重的操作之前，例如修改 Mysql 配置文件等）“使用计算机名称作为服务器名称而不是 IP 地址”。

IE

*   首先，如上所述授予用户权限，
*   但不是上面建议的连接字符串，而是尝试以下连接字符串：

所以，连接字符串看起来像：

```
server = "pc-name-whateveritis";
database = "restaurantdb";
uid = "root";
password = "";
string connectionString;
connectionString = "SERVER=" + server + "; PORT = 3306 ;" + "DATABASE=" + database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";
mycon = new MySqlConnection(connectionString); 
```

源计算机的名称在许多情况下可能有效，源计算机的 IP 地址返回错误。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T21:00:04.313

从 root 更改为不同的用户名并设置密码适用于远程访问，因为 root 只有在您位于 localhost 时才具有完全访问权限。在局域网上使用 IP 地址会出错，因此请使用计算机名称。

# java - 如何让 CXF 为 WSDL 生成外部 XSD？

> ID：15094826
> 
> 赞同：6
> 
> 时间：2013-02-26T16:56:06.903
> 
> 标签：java, web-services, jakarta-ee, cxf

我正在使用带有`@WebService`注释的 CXF。它将 WSDL 文件生成为一个大文件，有没有办法告诉它`wsdl:types`在 XSD 文件中生成外部文件并将它们导入 WSDL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:43:26.237

1）您最好的选择是使用 CXF `JavaToWS`，只需为您的实现类和域对象提供`"-createxsdimports"`选项，它将为您创建单独的 WSDL 和 XSD 文件，

**从我的网站**看下面的例子

 **[http://www.javatips.net/blog/2012/09/cxf-java2wsdl-example](http://www.javatips.net/blog/2012/09/cxf-java2wsdl-example)

2) 您可以使用 SOPERA 套件[http://www.sopera.de/en/downloads/sopera-asf-331](http://www.sopera.de/en/downloads/sopera-asf-331)并将其转换为单独的 WSDL 和 XSD**

# c# - 有没有办法支持一个类而不在程序集中包含该类？

> ID：15094827
> 
> 赞同：0
> 
> 时间：2013-02-26T16:56:07.853
> 
> 标签：c#, dependency-injection

我正在开发一个帮助类来使用 Lucene。它的意思是将一个对象带入一个工厂，并用一种​​索引对象的方法来装饰对象，根据提供的对象类型添加索引策略。代码看起来像这样：

```
class IndexWrapper
{
    public interface IDocumentable
    {
        Document BuildDocument();
    }

    public interface IDocumentBuilder
    {
        Type SupportedType { get; }

        Document BuildDocument(object o);
    }

    public class StringDocumentBuilder : IDocumentBuilder
    {
        public Type SupportedType { get { return typeof(string); } }

        public Document BuildDocument(object o)
        {
            Document doc = new Document();
            doc.Add(new Field("string", o as string, Field.Store.YES, Field.Index.ANALYZED));
            return doc;
        }
    }

    public static class IndexableFactory
    {
        public static IDocumentable GetIndexableObject(object o)
        {
            return GetIndexableObject(o, DocumentBuilderFactory.GetBuilder(o));
        }

        public static IDocumentable GetIndexableObject(object o, IDocumentBuilder builder)
        {
            return new IndexableObject(o, builder);
        }
    }

    public static class DocumentBuilderFactory
    {
        private static List<IDocumentBuilder> _builders = new List<IDocumentBuilder>();

        public static IDocumentBuilder GetBuilder(object o)
        {
            if (_builders.Count == 0)
            {
                _builders = Assembly.GetExecutingAssembly()
                                   .GetTypes()
                                   .Where(type => typeof(IDocumentBuilder).IsAssignableFrom(type) && type.IsClass)
                                   .Select(type => Activator.CreateInstance(type))
                                   .Cast<IDocumentBuilder>()
                                   .ToList();
            }

            return _builders.Where(builder => builder.SupportedType.IsAssignableFrom(o.GetType())).FirstOrDefault();
        }
    }

    private class IndexableObject : IDocumentable
    {
        object _o;
        IDocumentBuilder _builder;

        public IndexableObject(object o) : this(o, DocumentBuilderFactory.GetBuilder(o)) { }
        public IndexableObject(object o, IDocumentBuilder builder)
        {
            _o = o;
            _builder = builder;
        }

        virtual public Document BuildDocument()
        {
            return _builder.BuildDocument(_o);
        }
    }
} 
```

我想知道的是：是否可以为用户最有可能看到的类类型包含一组默认策略，而不包括包含这些类的库？

# c++ - Main() 是否接受表达式？

> ID：15094828
> 
> 赞同：0
> 
> 时间：2013-02-26T16:56:11.107
> 
> 标签：c++, main

为什么此代码打印 1 而不是 5

代码：

```
main(int x=5) //this defn. is written intentionally to chec weather main accepts 
                expression or not. 
{
 printf("%d",x);  
} 
```

使用的编译器：minGW 3.2

**编辑**

我的观点是天气`x=5`执行与否。如果不是，那么为什么我没有收到任何错误或警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T16:57:49.927

因为 x 真的是 argc （你的参数计数是 1）

main 的签名是：

```
int main (int argc, char **argv) 
```

argc 是参数的计数，
而 argv 是这些参数的数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:58:01.307

**更新**

[如果我们查看C++ 草案标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)部分*Main function*第*2*段，您的`main`声明无效（*强调我的*）：`3.6.1`

 ***> 实现不应预定义主要功能。该功能不得重载。**它应该有一个 int 类型的返回类型**，否则它的类型是实现定义的。**所有实现都应允许**
> 
> > — () 的函数返回 int 和
> > 
> > — (int, pointer to pointer to char) 返回 int 的函数

所以`main`应该遵守编译器文档定义的这些标准形式或*实现定义的形式之一。*

`gcc`不管警告级别如何，都会给我一个警告，`clang`这是一个错误，所以我不确定为什么你没有看到错误。

**原始答案**

main 的第一个参数是参数计数，通常表示为 argc，例如：

```
int main(int argc, char *argv[])
{
} 
```

argv 是一个字符串数组，它代表程序的参数，第一个是命令行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:14:40.450

在`void f(int x = 5)`中，该`= 5`部分是默认参数。您可以通过两种不同的方式调用该函数：

```
f();  // uses default argument, as if f(5)
f(3); // explicit argument 
```

请注意，使用默认参数的决定是在**调用**时做出的，而不是在声明时做出的。无论是否`int main(int x = 5, char *argv[])`有效，应用程序的启动代码（编译器库的一部分）都不知道尝试的默认参数，因此不会对其进行任何操作。并且不要试图通过`main`从程序内部调用而变得棘手：这是不允许的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T16:59:11.277

因为操作系统需要这个签名`main`：

```
int main(int argc, char** argv); 
```

`argc`是参数的数量。当它调用 your`main`时，它将参数的数量 ( `argc`) 作为第一个参数传递，即 1（如果你调用不带参数的二进制文件，你仍然会得到一个参数：二进制文件名，`$0`以 bash 表示）。

请注意，这也取决于 C ABI。`main`根据 C/C++ 标准，允许多重签名。因此，根据编译器和操作系统的不同，对`main`. 你所做的并不是真正定义的行为。

您应该`main`像预期的那样声明 - 因为这是您的操作系统所期望和使用的。为您想要编程的任何内容创建另一个功能。***

# c++ - C++中对列表的迭代器？

> ID：15094833
> 
> 赞同：0
> 
> 时间：2013-02-26T16:56:22.517
> 
> 标签：c++, list, static, compiler-errors, iterator

我定义了一个对列表，并希望使用迭代器访问它们，遵循[一个示例](http://www.cplusplus.com/reference/list/list/insert/)。

```
class A{
private:
    list<pair<size_type,size_type> > l_edge_;   

public: 

void function() const{  
    list<pair<size_type,size_type> >::iterator Iter_;
    Iter_ = l_edge_.begin();
}
} 
```

但是，我遇到了编译错误。我该如何解决？

```
error: no match for 'operator=' (operand types are 'const iterator 
{aka const std::_List_iterator<std::pair<unsigned int, unsigned int> >}' and
          'std::list<std::pair<unsigned int, unsigned int> >::const_iterator 
{aka std::_List_const_iterator<std::pair<unsigned int, unsigned int> >}') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:08:06.603

我的猜测是您正在尝试编写一个 const 成员函数，而不是您在问题中复制的内容：

```
void function() const
{
    Iter_ = l_edge_.begin();
} 
```

现在，由于函数是`const`，因此`l_edge_`成员也是 const，因此`begin()`返回 a`const_iterator`而不是 plain `iterator`。但这并不重要，因为该`Iter_`成员也是 const，因此不能分配给它。

通常你不想将迭代器声明为成员变量，除非非常特殊的需要。相反，只需在需要时声明一个本地的，并且具有适当的*constness*：

```
class A
{
private:
    list<pair<size_type,size_type> > l_edge_;
public: 
    //const member function
    void function() const
    {
        list< pair<size_type,size_type> >::const_iterator iter = l_edge_.begin();
    }

    //non-const member function
    void function()
    {
        list< pair<size_type,size_type> >::iterator iter = l_edge_.begin();
    }
}; 
```

# c - 检查 Cython 的数组中是否存在值

> ID：15094834
> 
> 赞同：25
> 
> 时间：2013-02-26T16:56:27.730
> 
> 标签：c, arrays, cython

我想知道如何检查数组中是否存在值或对象，例如在 python 中：

```
a = [1,2,3,4,5]
b = 4
if b in a:
    print("True!")
else:
    print("False") 
```

我想知道 cython 中是否已经存在类似的东西。我有一个结构对象指针数组；我想知道该对象是否存在于该数组中。

喜欢

```
cdef Node *array

array = <Node *>malloc( 5 * cython.sizeof(Node))

for i in range(5):
     array[i].index = i

cdef Node test = array[3]

if test in array:
    print("True!")

cdef struct Node:
    int index 
```

上面的代码不正确，但它说明了我的意思。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-27T00:23:23.813

您几乎必须遍历数组并检查每个元素。

```
#include <stdbool.h>

bool isvalueinarray(int val, int *arr, int size){
    int i;
    for (i=0; i < size; i++) {
        if (arr[i] == val)
            return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-12-10T12:06:56.143

接下来试试：

*（阅读评论和测试以了解其工作原理）*

```
#include <stdio.h>
#include <assert.h>

/*
Return index an integer number begin from start an array,
otherwise return -1.
 */
int indexOf(int *array, int array_size, int number) {
    for (int i = 0; i < array_size; ++i) {
        if (array[i] == number) {
            return i;
        }
    }
    return -1;
}

// Tests for indexOf()
void test_indexOf() {
    int array[10] = {12, 78, -43, 0, 21, 12, 20, -9, 1, -1};
    assert(indexOf(array, 10, 12) == 0);
    assert(indexOf(array, 10, 0) == 3);
    assert(indexOf(array, 10, 2) == -1);
    assert(indexOf(array, 10, 43) == -1);
    assert(indexOf(array, 10, 11) == -1);
    assert(indexOf(array, 10, -1) == 9);
    assert(indexOf(array, 10, 1) == 8);
    assert(indexOf(array, 10, -2) == -1);
    assert(indexOf(array, 10, 3) == -1);
}

int main () {
    test_indexOf();
    return 0;
} 
```

笔记：

1.  由于 C 不支持重新加载函数，因此 indexOf() 将仅适用于整数数组类型。

2.  C 不支持数组指针的确定长度。因此，您需要手动传递数组的大小。

3.  测试环境：

-

```
$ uname -a
Linux wlysenko-Aspire 3.13.0-37-generic #64-Ubuntu SMP Mon Sep 22 21:28:38 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
$ gcc --version
gcc (Ubuntu 4.8.5-2ubuntu1~14.04.1) 4.8.5 
```

# ios - OpenGL ES 1 缩放而不改变对象上的照明？

> ID：15094837
> 
> 赞同：0
> 
> 时间：2013-02-26T16:56:35.597
> 
> 标签：ios, 3d, opengl-es-1.1

我正在实现一个像应用程序这样的 3d obj 查看器，当我在应用程序中（在 OpenGL ES 1.x 中）对我的对象进行缩放时，它变得更轻（缩小）和更暗（当我放大时）。

我有什么办法可以防止这种“灯光变化”的发生吗？即相同的亮度均匀地通过。

我想我必须对照明法线做些什么？

我的渲染方法如下：

```
void RenderingEngine::Render(const vector<Visual>& visuals, ivec2 screenSize) const
{
glClearColor(0.5f, 0.5f, 0.5f, 1);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

vector<Visual>::const_iterator visual = visuals.begin();
for (int visualIndex = 0; visual != visuals.end(); ++visual, ++visualIndex) {

    // Set the viewport transform.
    ivec2 size = visual->ViewportSize;
    ivec2 lowerLeft = visual->LowerLeft;
    glViewport(lowerLeft.x, lowerLeft.y, size.x, size.y);

    // Set the light position.
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    vec4 lightPosition(0.25, 0.25, 1, 0);
    glLightfv(GL_LIGHT0, GL_POSITION, lightPosition.Pointer());

    // Set the model-view transform.
    mat4 rotation = visual->Orientation.ToMatrix();
    mat4 translation = visual->Translate;
    mat4 scale;
    scale = scale.Scale(visual->Scale);
    rotation = rotation * scale;
    //mat4 modelview = rotation * m_translation;
    mat4 modelview = rotation * m_translation * translation;

    glLoadMatrixf(modelview.Pointer());

    // Set the projection transform.
    float h = 4.0f * size.y / size.x;
    mat4 projection = mat4::Frustum(-2, 2, -h / 2, h / 2, 5, 50);
    glMatrixMode(GL_PROJECTION);
    glLoadMatrixf(projection.Pointer());

    // Set the diffuse color.
    vec3 color = visual->Color * 0.75f;
    vec4 diffuse(color.x, color.y, color.z, 1);
    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, diffuse.Pointer());

    // Draw the surface.
    int stride = 2 * sizeof(vec3);
    const GLvoid* normalOffset = (const GLvoid*) sizeof(vec3);
    const Drawable& drawable = m_drawables[visualIndex];
    glBindBuffer(GL_ARRAY_BUFFER, drawable.VertexBuffer);
    glVertexPointer(3, GL_FLOAT, stride, 0);
    glNormalPointer(GL_FLOAT, stride, normalOffset);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, drawable.IndexBuffer);
    glDrawElements(GL_TRIANGLES, drawable.IndexCount, GL_UNSIGNED_SHORT, 0);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:07:49.793

这个解决方案对我有用。因此，我将与遇到与我相同问题的该主题的任何新手分享此内容。

利用：

```
glEnable(GL_NORMALIZE); 
```

始终将表面法线标准化为单位长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:48:33.857

首先，在平移矩阵（或矩阵）之前应用旋转和缩放矩阵。所以......而不是这个：

```
rotation = rotation * scale;
//mat4 modelview = rotation * m_translation;
mat4 modelview = rotation * m_translation * translation; 
```

做这个：

```
rotation = rotation * scale;
//mat4 modelview = rotation * m_translation;
mat4 modelview = m_translation * translation * rotation; 
```

其次，为什么你有两个翻译矩阵？您只需要一个矩阵即可将对象顶点从对象空间转换到世界空间。

第三，你为什么要创建一个正常的矩阵？除非您在旋转后修改某些剪切对象的法线，否则我真的看不出有任何理由这样做。您可以使用与顶点相同的旋转矩阵来旋转对象的法线。

# c - C中的命名空间与结构

> ID：15094841
> 
> 赞同：5
> 
> 时间：2013-02-26T16:56:43.113
> 
> 标签：c, namespaces

可以像这样在 C 中模仿命名空间：

```
#include <stdio.h>
#include <math.h>

struct math_namespace {
    double (*sin)(double);
};
const struct math_namespace math = {sin};

int main() {    
    printf("%f\n", math.sin(3));

    return 0;
} 
```

这有什么缺点，或者只是前缀更有意义的情况？这样做似乎更干净。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:12:34.600

此方法已在实际项目中使用，例如 Jacob Navia 的[C Containers Library](http://ccl.googlecode.com/svn/trunk/)。C 不是为面向对象编程而设计的。这不是很有效，因为您必须 (1) 访问结构和 (2) 取消引用函数指针。如果你真的想要前缀，我认为改变你的标识符仍然是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-01T20:05:53.997

我已经使用这种风格有一段时间了。它有助于组织程序，而没有 OOP 语言的所有多余包袱。没有性能损失，因为在 C 中访问函数指针与直接访问函数相同。我非常喜欢它，甚至写了一篇很短的论文。它可以在[http://slkpg.1eko.com](http://slkpg.1eko.com)在页面底部的“C with Structs”链接下找到。直接链接是[http://slkpg.1eko.com/cstructs.html](http://slkpg.1eko.com/cstructs.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:04:54.397

为什么要重新发明轮子？一个缺点是所有设置都可能不同步，并且要添加到名称空间中，您必须更改结构。

而且没有“使用命名空间”，所以你总是必须指定它。不同参数类型的函数又如何呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:11:17.080

好吧，这*确实*允许您导出命名空间，并且它*确实*允许客户端模块使用名为`sin`. 所以，从这个意义上说，它确实有效。

缺点是它对 ELF 不太友好。struct初始化埋在可写数据页的中间，需要修补。除非您是静态链接，否则这是加载时修复。从好的方面来说，它只是复制了 ELF 调度表所做的事情，所以我敢打赌它甚至不会更慢。在 Windows 上，我认为考虑因素是相似的。

# java - 检查字符串的格式

> ID：15094849
> 
> 赞同：0
> 
> 时间：2013-02-26T16:57:06.343
> 
> 标签：java, pattern-matching

我需要构建一个方法来检查字符串是否具有以下格式：

`[{...},{...},...,{...}]`

但我不确定什么是最好/更简单的方法来做到这一点。我应该遍历字符串还是可以使用 Pattern/Matcher 类？

一些建议或一段代码将不胜感激。

**编辑**

问题是字符串可能以错误的格式出现，因此该方法会返回错误...接下来，我将展示一些示例，说明可以返回什么以及应该返回什么：

`[{...},{...},{...}]`--> 返回有效；

`[{...},{...}]`--> 返回有效；

`[{...},{...},{...},{...}]`--> 返回有效；

`[...},{...},{...},{...}]`--> 返回错误；

`[{...},{...}{...}]`--> 返回错误；

`[{...},{...},{...},{...}`--> 返回错误；

`[{...,{...},{...},{...}]`--> 返回错误；

`[{...},{...},,{...}]`--> 返回错误；

`[asd{...},{...},{...},{...}]`--> 返回错误；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:14:32.923

这似乎解决了大部分问题，但是由于我不太擅长负前瞻，我无法破解下面唯一失败的案例

这段代码

1.  `{*},`递归地用空字符串替换模式
2.  然后`{*}`用空字符串替换最后一个
3.  剩余的 if 与 then 匹配，`[]`则称该字符串有效，否则无效。

希望你能得到我想要在这里做的事情。

```
public static boolean isValid(String input){

        // Iterates and replaces all but one substring that match {...},
        boolean replaced = true;
        int oldLength=0, newLength=0;
        while(replaced){
            oldLength=input.length();
            input = input.replaceFirst("\\{[a-z.]+},", "");
            newLength=input.length();
            if(oldLength==newLength)    replaced=false;
        }

        // Replaces the last {...} 
        // This one is done separately as comma should not be present in the last part 
        input = input.replaceFirst("\\{.*?}", "");

        //Then if the string remaining is just [] then it is valid
        if(input.equals("[]")){
            return true;
        } else {
            return false;
        }
    }

    public static void main(String[] args) {
        String[] input = {"[{...},{...},{...}]",
                            "[{...},{...}]",
                            "[{...},{...},{...},{...}]",
                            "[...},{...},{...},{...}]",
                            "[{...},{...}{...}]",
                            "[{...},{...},{...},{...}",
                            "[{...,{...},{...},{...}]",
                            "[{...},{...},,{...}]",
                            "[asd{...},{...},{...},{...}]"
                    };
        for (String s : input) {
            if(isValid(s)){
                System.out.println("VALID");
            } else {
                System.out.println("ERROR");
            }
        }
    }
} 
```

这输出 -

```
VALID
VALID
VALID
ERROR
ERROR
ERROR
VALID
ERROR
ERROR 
```

所以这是第三个没有正确处理的案例，即

```
 [{...,{...},{...},{...}] 
```

这确实需要负前瞻，即正则表达式`{*},`不应该匹配 a`{`如果它出现在 after`{`和 before `}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:53:35.137

**编辑**以反映表示不包含“[”、“]”或“{”的任意字符串的点

```
String regex = "\\[\\{[^\\[\\]{]*}(,\\{[^\\[\\]{]*})*]"; 
```

如果这看起来令人生畏，那可能更多是由于 Java 字符串字符转义而不是正则表达式本身。如果没有所有转义（必需），它看起来像：

```
\[\{[^\[\]{]*}(,\{[^\[\]{]*})*] 
```

并通过空间分隔逻辑分组来进一步澄清：

```
\[   \{[^\[\]{]*}   (,\{[^\[\]{]*})*   ] 
```

第一个和最后一个字符是开始/结束 '[' 和 ']' 的文字匹配。第二个字符表示必需的开头文字“{”，然后是一个字符类表达式，表示除“[”、“]”或“{”之外的任意（零个或多个）字符数，最后是源字符串中第一个大括号分组的结束文字“}”。

然而，之后**可能**会有额外的花括号分组，因此括号中的表达式会重复第一个并带有前面的文字逗号，并且整个表达式可能会重复零次或多次。

因此，如果这使得它更易于阅读或维护，您可以在代码中表达如下：

```
String subgrp = "\\{[^\\[\\]{]*}";
String optionalRepeatSubgrp = "(," + subgrp + ")*";

String regex = "\\[" + subgrp + optionalRepeatSubgrp + "]"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:23:02.800

为什么不迭代字符串而不是花时间思考复杂的正则表达式？

```
public boolean isValid(String str){
        if( !str.startsWith("[") || !str.endsWith("]") )
            return false;

        if( 1 < str.length() - 2 )
            return false;

        str = str.substring(1, str.length() - 2);

        String[] array = str.split(",");
        String part;

        for( int i = 0 ; i < array.length ; i ++ ){
            part = array[i];

            if(!part.startsWith("{") || !part.endsWith("}"))
                return false;

            if( 1 < part.length() - 2 )
                return false;

            part = part.substring(1, part.length() - 2);

            if(part.contains("{") || part.contains("}"))
                return false;
        }

        return true;
    } 
```

# mysql - Mysql 结果总是在 SELECT ... FROM (SELECT...) 中返回 NULL

> ID：15094857
> 
> 赞同：1
> 
> 时间：2013-02-26T16:57:34.927
> 
> 标签：mysql

因此，在我的查询中，我需要从不同位置转储结果。其中一些结果之前可能需要一个“<”或“>”符号。最终，此查询使用 INTO OUTFILE 导出，但该部分有效。发生的事情是，当我尝试将 gtlt 值的结果连接到参数的结果值时，总是会中断...我添加了 a、b、c 和 x，这样您就可以看到在哪里显示了什么...我很确定它必须与第二个 where 语句有关，但我无法弄清楚。

无论如何....这是我的代码的一个简化示例：

```
SELECT      
'VAR 1',
'VAR 2',
'VAR 3'
UNION   
(SELECT         
CONCAT(if(result.parameter = '10', result.gtlt,'a '),COALESCE(sum(if(result.parameter = '10', result.result, NULL)),'-')) as 'VAR 1',
CONCAT(if(result.parameter = '61', result.gtlt,'b '),COALESCE(sum(if(result.parameter = '61', result.result, NULL)),'-')) as 'VAR 2',
CONCAT(if(result.parameter = '78', result.gtlt,'c '),COALESCE(sum(if(result.parameter = '78', result.result, NULL)),'-')) as  'VAR 3'
FROM (  
    SELECT
        event.id,
        event.end_date,
        event_result.parameter,
        event_result.result,
        COALESCE(CAST(event_result.gtlt as CHAR), 'x') as gtlt,
        event.tag
    FROM event
    Inner Join event_result ON event_result.tag = event.tag
    Inner Join tblesdstations19 ON tblesdstations19.id = event.id
    WHERE (event.id =  '735' OR event.id =  '845' OR event.id =  '209') AND `event`.`end_date` >= '1998-01-13' AND `event`.`end_date` <= '2010-02-09') as result    
WHERE result.parameter = '10' OR result.parameter = '61' OR result.parameter = '78' group by result.id, result.end_date, result.tag
order by 
    result.id ASC, 
    result.end_date DESC ) 
```

这是返回的示例：

```
VAR 1   VAR 2   VAR 3
x17.8   b 9.49  c -
x25.8   b 9.21  c -
x17.5   b 29    c 0.36
x16.6   b 9.6   c 0.52
x26.2   b 7.4   c 0.49
x24.3   b 7.9   c 0.34
x27.5   b 9.9   c -
 a -    x7.9    c -
 a -    x8.2    c -
 a -    x5.7    c -
x16.8   b 2.16  c -
x22.2   b 1.84  c -
x26.2   b - c -
x22.7   b 0.67  c -
x18.5   b 19    c 0.15
 x14    b 1.3   c 0.91
x19.5   b 12    c 0.38
 a -    x1.2    c -
x23.5   b 0.74  c 0.92 
```

如果我剥离我们的 VAR 1 和 2 选择以及它适用于 VAR 3 的位置......

```
SELECT 'VAR 3'
UNION   
(SELECT         
CONCAT(if(result.parameter = '78', result.gtlt,'c '),COALESCE(sum(if(result.parameter = '78', result.result, NULL)),'-')) as  'VAR 3'
FROM (  
    SELECT
        event.id,
        event.end_date,
        event_result.parameter,
        event_result.result,
        COALESCE(CAST(event_result.gtlt as CHAR), 'x') as gtlt,
        event.tag
    FROM event
    Inner Join event_result ON event_result.tag = event.tag
    Inner Join tblesdstations19 ON tblesdstations19.id = event.id
    WHERE (event.id =  '735' OR event.id =  '845' OR event.id =  '209') AND `event`.`end_date` >= '1998-01-13' AND `event`.`end_date` <= '2010-02-09') as result    
WHERE result.parameter = '78' group by result.id, result.end_date, result.tag
order by 
    result.id ASC, 
    result.end_date DESC ) 
```

给我...

```
VAR 3
x0.36
>0.52
>0.49
>0.34
x0.15
>0.91
x0.38
x0.92
>0.48 
```

编辑：将参数添加到 GROUPED BY 列表会得到以下结果：

```
17.8     -   -
   -    9.49     -
25.8     -   -
   -    9.21     -
17.5     -   -
   -    29   -
   -     -  0.36
16.6     -   -
   -    9.6  -
   -     -  >0.52
26.2     -   -
etc... 
```

它显示了“<”>“符号，但没有像我需要的那样给出行中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:44:05.540

知道了！！！！我使用 GROUP_CONCAT 而不是 SUM 并将结果与​​子结果集中的“>”或“<”连接起来

```
COALESCE(GROUP_CONCAT(if(result.parameter = '10', result.result, NULL)),'-') as 'VAR 1',
...
CONCAT(COALESCE(result.gtlt,''),' ',result.result) as result, 
```

# apache - Extjs 复选框字段未在 Apache Tomcat 中呈现

> ID：15094860
> 
> 赞同：0
> 
> 时间：2013-02-26T16:57:39.710
> 
> 标签：apache, tomcat, extjs, textfield, xtype

我们正在使用 tomcat 6.0.36 并尝试做简单的复选框示例，但复选框未呈现其余一切正常

所有文本都正确呈现，我创建了一些带有选项卡、表单和网格的页面，所有页面都呈现，除了其中的复选框。

```
Ext.onReady(function() {
  Ext.QuickTips.init();

var fsf = Ext.create('Ext.form.Panel', {
    url:'save-form.php',
    frame:true,
    title: 'Simple Form with FieldSets',
    bodyStyle:'padding:5px 5px 0',
    width: 350,
    fieldDefaults: {
    msgTarget: 'side',
    labelWidth: 75
    },
    defaults: {
    anchor: '100%'
    },

    items: [{
    xtype:'fieldset',
    checkboxToggle:true,
    title: 'User Information',
    defaultType: 'textfield',
    collapsed: true,
    layout: 'anchor',
    defaults: {
        anchor: '100%'
    },
    items :[{
        fieldLabel: 'First Name',
        name: 'first',
        allowBlank:false
    },{
        fieldLabel: 'Last Name',
        name: 'last'
    },{
        fieldLabel: 'Company',
        name: 'company'
    }, {
        fieldLabel: 'Email',
        name: 'email',
        vtype:'email'
    }]
    },{
    xtype:'fieldset',
    title: 'Phone Number',
    collapsible: true,
    defaultType: 'textfield',
    layout: 'anchor',
    defaults: {
        anchor: '100%'
    },
    items :[{
        fieldLabel: 'Home',
        name: 'home',
        value: '(888) 555-1212'
    },{
        fieldLabel: 'Business',
        name: 'business'
    },{
        fieldLabel: 'Mobile',
        name: 'mobile'
    },{
        fieldLabel: 'Fax',
        name: 'fax'
    }]
    }],

    buttons: [{
    text: 'Save'
    },{
    text: 'Cancel'
    }],
    renderTo: 'build-dynaForm'
})
}); 
```

提前致谢

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:19:20.280

在您的表单上没有复选框。如果添加它们，它们将显示：

```
 {
        fieldLabel: 'Checkbox',
        xtype: 'checkbox',
        name: 'name1'
    },{
        fieldLabel: 'Checkbox',
        xtype: 'checkbox',
        name: 'name2'
    },{
        fieldLabel: 'Checkbox',
        xtype: 'checkbox',
        name: 'name3'
    } 
```

见[http://jsfiddle.net/3FBzM/](http://jsfiddle.net/3FBzM/)

# r - 如何在矩阵中查找最大值？

> ID：15094861
> 
> 赞同：1
> 
> 时间：2013-02-26T16:57:40.410
> 
> 标签：r, matrix

我有一个看起来像这样的表：

```
 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30
  586  0 0 0 1 0 0 0 1 3  1  0  1  0  0  0  0  0  1  0  2  0  3  0  0  0  4  0  1  2  0
  637  0 0 0 0 0 0 2 3 2  2  0  4  0  0  0  0  1  0  0  2  0  1  1  1  0  0  0  0  0  1
  989  0 0 1 0 0 0 2 1 0  0  0  2  1  0  0  1  2  1  0  3  0  2  0  1  1  0  1  0  1  0
  1081 0 0 0 1 0 0 1 0 1  1  0  0  2  0  0  0  0  0  0  3  0  5  0  0  2  1  0  1  1  1
  2922 0 1 1 1 0 0 0 2 1  0  0  0  2  0  0  0  1  1  0  1  0  3  1  1  2  0  0  1  0  1
  3032 0 1 0 0 0 0 0 3 0  0  1  0  2  1  0  1  0  1  1  0  0  3  1  1  1  1  0  0  1  1 
```

第一行的数字 1 到 30 是我的标签，列是我的项目。我想为每个项目找到计数最多的标签。例如 586 有 4 个 26，这是该行中的最高数字，所以对于 586，我想分配 26。

我可以使用 max(table1[1,])) 获得每一行的最大值，这让我获得了第一行的最大值，但没有得到它对应的标签，但我不知道如何进行。感谢所有帮助！

输入：

```
structure(c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 0L, 
0L, 1L, 0L, 1L, 0L, 1L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 2L, 2L, 1L, 0L, 0L, 1L, 3L, 1L, 
0L, 2L, 3L, 3L, 2L, 0L, 1L, 1L, 0L, 1L, 2L, 0L, 1L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 1L, 1L, 4L, 2L, 0L, 0L, 0L, 0L, 0L, 1L, 2L, 2L, 
2L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 
0L, 0L, 1L, 0L, 1L, 2L, 0L, 1L, 0L, 1L, 0L, 1L, 0L, 1L, 1L, 0L, 
0L, 0L, 0L, 0L, 1L, 2L, 2L, 3L, 3L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 3L, 1L, 2L, 5L, 3L, 3L, 0L, 1L, 0L, 0L, 1L, 1L, 0L, 1L, 1L, 
0L, 1L, 1L, 0L, 0L, 1L, 2L, 2L, 1L, 4L, 0L, 0L, 1L, 0L, 1L, 0L, 
0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 1L, 1L, 0L, 2L, 0L, 1L, 1L, 0L, 
1L, 0L, 1L, 0L, 1L, 1L, 1L), .Dim = c(6L, 30L), .Dimnames = structure(list(
    c("586", "637", "989", "1081", "2922", "3032"), c("1", "2", 
    "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", 
    "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", 
    "24", "25", "26", "27", "28", "29", "30")), .Names = c("", 
""))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:03:13.873

`max.col`将为您提供对应于每行最大值的列号向量。

```
> max.col(df, tie='first')
[1] 26 12 20 22 22 8 
```

您可以使用该向量来获取每一行的列名。

```
> colnames(df)[max.col(df, tie='first')]
[1] "26" "12" "20" "22" "22" "8" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T17:02:18.347

也许您正在寻找`which.max`. 假设您的矩阵称为“temp”：

```
> apply(temp, 1, which.max)
 586  637  989 1081 2922 3032 
  26   12   20   22   22    8 
```

`apply`with `MARGIN = 1`（第二个参数）将按*row*应用函数。

# drupal-7 - 在响应式站点上聚合和压缩 CSS 文件

> ID：15094875
> 
> 赞同：0
> 
> 时间：2013-02-26T16:58:27.477
> 
> 标签：drupal-7, responsive-design

在响应式网站上聚合和压缩 CSS 文件的最佳做法是什么。当我在 Drupal 7 中的性能下选择聚合和压缩 CSS 文件选项并查看移动设备上的站点时，它使用的是来自主站点的样式表，而不是为该设备指定的样式表。我正在使用[AdaptiveTheme](http://drupal.org/project/adaptivetheme)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:30:22.607

您的网站性能不会减慢。它在其他地方，而不是 CSS 缩小。[Online YUI Compressor](http://refresh-sf.com/yui/)可以正确缩小页面加载速度，而不是减慢页面加载速度，而是提高页面速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T19:47:17.103

好吧，根据文档

*   您需要打开生产模式
*   您所做的任何其他更改都需要重新保存主题（以便可以再次正确呈现）
*   所有响应式主题都放在一个完整的文件中
*   还强烈建议安装[AT Tools](http://drupal.org/project/at_tools)，因为它具有帮助您解决此问题的附加功能

> 响应式风格 - 生产模式
> 
> 在生产模式下，所有响应式样式表都聚合到一个文件中，并使用嵌入的 @media 查询。AT Core 将自动聚合来自每个开发模式样式表的 CSS，并将其包装在正确的媒体查询中。这将 HTTP 请求的数量从 5 个减少到 1 个。
> 
> 此文件始终称为：ThemeName.responsive.styles.css
> 
> 默认情况下会在以下位置找到此文件：~/[public files]/adaptivetheme/[ThemeName]/ThemeName.responsive.styles.css
> 
> 但是，您可以选择将 AT 生成的文件保存在何处，例如，您可以将它们直接保存到您的主题或输入自定义目录路径 - 请参阅文件生成系统。
> 
> 注意：请参阅下面标题为“响应式样式中的相对路径”的部分。

参考：[参考 AdaptiveThemes 文档](http://adaptivethemes.com/documentation/css)

# php - 如何从 php 文件“制作”pdf 文件？

> ID：15094877
> 
> 赞同：0
> 
> 时间：2013-02-26T16:58:34.970
> 
> 标签：php, pdf, header

假设我有以下文件：

布局.php

```
<?php
session_start();
?>
<table width="700" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <th>Id</th>
    <th>Nombre</td>
  </tr>
  <tr>
    <td><?php echo $_SESSION['id']; ?></td>
    <td><?php echo $_SESSION['nombre']; ?></td>
  </tr>
</table> 
```

有没有办法可以将该文件下载为 PDF 格式，并像您在浏览器中看到的那样输出该文件？

我试过了，但没有用：

```
<?php
session_start();

header("Content-type:application/pdf");
header("Content-Disposition:attachment;filename=info_user.pdf");
readfile('layout.php');
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:00:35.650

有几个软件包可以让您生成 PDF 文件。你可以看看这些：

*   [PHP的PDF类](http://php.net/manual/en/book.pdf.php)
*   [FPDF](http://www.fpdf.org/)
*   [TCPDF](http://www.tcpdf.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:04:08.370

PHP 的 PDFlib 库可能是为此开发最多的库。

[您可以在](http://www.php.net/manual/en/ref.pdf.php)PHP dev 上阅读它们。

其他备用库包括：

*   [tcPDF](http://www.tcpdf.org/)
*   [fPDF](http://www.fpdf.org/)
*   [Zend_PDF](http://framework.zend.com/manual/en/zend.pdf.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:01:21.757

如果对您有帮助，Chrome 可以将网页保存为 PDF。

# header - 出现在滚动条上的粘性导航

> ID：15094885
> 
> 赞同：1
> 
> 时间：2013-02-26T16:58:57.430
> 
> 标签：header, navigation, sticky

一旦用户开始向下滚动页面，我正在尝试创建一个隐藏但固定在顶部的菜单。到目前为止，我已经设法创建了一个菜单，该菜单在滚动时会粘在顶部，但我一直坚持如何最初隐藏这个菜单。

这是我到目前为止使用的代码：（我正在使用 wordpress-headway）

查询：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
 //STICKY NAV
 var isMobile = {
 Android: function() {
 return navigator.userAgent.match(/Android/i) ? true : false;
 },
 BlackBerry: function() {
 return navigator.userAgent.match(/BlackBerry/i) ? true : false;
 },
 iOS: function() {
 return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
 },
 Windows: function() {
 return navigator.userAgent.match(/IEMobile/i) ? true : false;
 },
 any: function() {
 return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
 }
 };
//Calculate the height of <header>
 //Use outerHeight() instead of height() if have padding
 var aboveHeight = $('.top-row').outerHeight();

 //when scroll
 $(window).scroll(function(){

 //if scrolled down more than the header’s height but this isn't mobile
 if ($(window).scrollTop() > aboveHeight && !isMobile.any()){

 // if yes, add “fixed” class to the <nav>
 // add padding top to the #content 
 // (value is same as the height of the nav)
 $('.block-type-navigation').addClass('fixed').css('top','0').next()
 .css('padding-top','42px');

 } else {

 // when scroll up or less than aboveHeight,
 // remove the “fixed” class, and the padding-top
 $('.block-type-navigation').removeClass('fixed').next()
 .css('padding-top','0');
 }
 });
});
</script> 
```

CSS：

```
.fixed {
     position:fixed !important;
      left: 0;
      text-align: center;
}
.fixed .block-content {
      display: inline-block;
      text-align: left;
      width: 940px; /* This should be the width of your grid!!! */
      float:none;
}
.fixed {
position:fixed !important;    
 left: 0;      
text-align: center;
display: block !important;
} 
```

这让我发疯，所以我很感激任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:00:34.323

如果您不希望导航显示，除非用户滚动通过某个点，那么它不能总是固定在屏幕顶部之外：

```
.menu {
    position:fixed;
    top:-42px;
} 
```

然后通过切换类显示或隐藏

```
.menu.is-visible {
    top:0;
} 
```

使用滚动监听器。

```
$win = $(window);
$win.on('scroll', function() {
    $(".menu").toggleClass('is-visible', $win.scrollTop() > 42);
}); 
```

你甚至可以在`top`属性中添加一些 CSS 动画

```
.menu {
    -webkit-transition: top 0.2s ease-in-out;
} 
```

得到一个很酷的过渡。

注意：所有这些代码都是在这里输入的，未经测试。

注意：你也应该对滚动处理程序进行[限制。](http://underscorejs.org/#throttle)

# javascript - 为什么 forEach 不适用于儿童？

> ID：15094886
> 
> 赞同：49
> 
> 时间：2013-02-26T16:58:59.473
> 
> 标签：javascript, for-loop, foreach, parent-child

我有一个`<div>`孩子`<div>`在里面。例如

```
<div id="niceParent">
  <div></div>
  <div></div>
  <div></div>
  <div></div>
</div> 
```

我试图用函数遍历它们`forEach`，因为我认为这`document.getElementById("niceParent").children`是一个数组，因为我可以使用

```
console.log(document.getElementById("niceParent").children[1]);
console.log(document.getElementById("niceParent").children[2]);
console.log(document.getElementById("niceParent").children[3]);
console.log(document.getElementById("niceParent").children[4]); 
```

因此我尝试了

```
document.getElementById("niceParent").children.forEach(function(entry) {
  console.log(entry);
}); 
```

这是行不通的。我明白了

```
TypeError: document.getElementById(...).children.forEach is not a function 
```

作为一种解决方法，我还尝试了一个更复杂的 <code>for..in 循环：

```
for (var i in document.getElementById("niceParent").children) {
  if (document.getElementById("niceParent").children[i].nodeType == 1) console.log(document.getElementById("niceParent").children[i]);
} 
```

按预期工作。

为什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-26T17:00:50.500

因为`.children`包含[`HTMLCollection` *^([MDN])*](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection)，而不是数组。`HTMLCollection`对象是一个类*数组*对象，它公开一个`.length`属性并具有数值属性，*就像*数组一样，但它不继承自`Array.prototype`，因此不是数组。

您可以使用以下方法将其转换为数组`Array.prototype.slice`：

```
var children = [].slice.call(document.getElementById(...).children); 
```

* * *

**ECMAScript 6**引入了一个新的 API，用于将迭代器和类似数组的对象转换为真正的数组：[`Array.from` *^([MDN])*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)。如果可能，请使用它，因为它使意图更加清晰。

```
var children = Array.from(document.getElementById(...).children); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-26T17:01:16.973

[`Element.children`](https://developer.mozilla.org/en-US/docs/DOM/Element.children)不是**数组**。它是一个称为 的对象`HTMLCollection`。这些没有数组的方法（尽管它们确实具有`length`属性）。

要遍历它，您必须将其转换为数组，您可以使用[`Array.prototype.slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
var children = Array.prototype.slice.call(document.getElementById("niceParent").children);

children.forEach(…); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-09-19T09:59:26.490

`HTMLCollection`将like转换为`.children`要使用的数组`forEach()`（或`map()`等）的一种更简洁、更现代的方法是在数组中使用[扩展语法`...`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)`[]`。

```
var children = [...document.getElementById('x').children]; 
```

例如：

```
[...document.getElementById('x').children].forEach(child => console.log(child)) 
```

这是 es6 的一个特性。它适用于所有现代浏览器。

```
[...document.getElementById('niceParent').children].forEach(child => console.log(child.textContent))
```

```
<div id="niceParent">
  <div>a</div>
  <div>b</div>
  <div>c</div>
  <div>d</div>
</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T17:08:27.273

你也可以这样做：

```
NodeList.prototype.forEach = HTMLCollection.prototype.forEach = Array.prototype.forEach; 
```

在此之后，您可以在您的收藏中调用 forEach：

```
document.getElementById("niceParent").children.forEach(...) 
```

最好和最安全的方法实际上是仅在 forEach 不存在的情况下添加：

```
if (window.NodeList && !NodeList.prototype.forEach) {
   NodeList.prototype.forEach = Array.prototype.forEach;
}
if (window.HTMLCollection && !HTMLCollection.prototype.forEach) {
   HTMLCollection.prototype.forEach = Array.prototype.forEach;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-03T00:35:56.300

如果您需要使用轻量级 npm 模块的干净方法来解决上述问题，请查看[https://www.npmjs.com/package/foreach-array](https://www.npmjs.com/package/foreach-array)

前任：

```
import each from 'foreach-array';

const array = ['First Name', 'Last Name', 'Country'];

each(array, (value, index, array) => {
    console.log(index + ': ' + value);
});

// Console log output will be:
//      0: First Name
//      1: Last Name
//      2: Country 
```

对于您的场景，它`document.getElementById("niceParent").children`不是`array`上面的示例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-27T19:57:18.260

也许这可能是一个简单的解决方案：

```
document.getElementById("niceParent").childNodes.forEach(function(entry) {
  console.log(entry);
}); 
```

# coldfusion - 如何获取选定的值

> ID：15094891
> 
> 赞同：0
> 
> 时间：2013-02-26T16:59:04.363
> 
> 标签：coldfusion, coldfusion-9

我无法弄清楚如何遍历 questionTypes 并获取选定的 questionType 值。根据所选的 questionType，我必须为多选项问题添加答案，例如在选择正确答案时，我们提供了四个选项，我们必须从中选择一个作为正确答案。

我曾尝试使用`cfswitch`，但似乎不起作用：

```
<html>
  <head> <script src="http://code.jquery.com/jquery-latest.js"></script></head>
<body>
<cfoutput>

    <cfif not IsDefined('rc.questionType')>
        <form class="form form-horizontal" action="#buildUrl('question.new')#" method="post">
            <input type="hidden" name="surveyId" value="#rc.surveyId#">
                <fieldset>

                <div class="control-group">
                <label class="control-label" for="questiontype">Question type</label>
                    <div class="controls">
                    <select name="questionType" onchange="this.form.submit()">
                        <option value="0" >Select question type</option>
                    <cfloop query="rc.types">
                        <option value="#id#">#name#</option>
                    </cfloop> 
                    </select>
                    </div>
                </div> 
                </fieldset>
        </form> 

    <!--- if question type is defined, display question form --->
    <cfelse>
        <form class="form form-horizontal" action="#buildUrl('question.save')#" method="post">
            <input type="hidden" name="id" value="0">
            <input type="hidden" name="surveyId" value="#rc.data.fksurveyId#">
            <input type="hidden" name="questionTypeId" value="#rc.data.fkquestionTypeId#">
            <input type="hidden" name="rank" value="#rc.data.rank#">

            <fieldset>

            <div class="control-group">
            <label class="control-label" for="question">Question</label>
                <div class="controls">
                    <input class="input-xxlarge" type="text" name="question" id="question" required="true" placeholder="write your question">
                </div>
            </div>

            <div class="control-group">
            <label class="control-label" for="Required">Required</label>
                <div class="controls">
                <select name="Required">
                    <option value="1" selected>Yes</option>
                    <option value="0">No</option>
                </select>
                </div>
            </div>                 

            <!--- question arguments for selected type, this will be for multioption questions --->

           <!--- <cfif rc.questiontype is "multiple choice (single selection),Multiple Choice (Multi Selection) with Other,Multiple Choice (Single Selection) with Other,Multiple Choice (Multi Selection)"> --->
           <cfswitch expression="#rc.questiontypeid#">
                <cfcase value="multiple choice (single selection),Multiple Choice (Multi Selection) with Other,Multiple Choice (Single Selection) with Other,Multiple Choice (Multi Selection)">
                 <div class="control-group">
                    <label class="control-label" for="answer">Answer</label>
                      <div class="controls">
                         <input class="input-xxlarge" type="text" name="new_answer" id="new_answer">
                      </div>
                </div>

               <div class="control-group">
                   <label class="control-label" for="rank">rank</label>
                      <div class="controls">
                         <input class="input-mini" type="text" name="rank" id="rank">
                     </div>
               </div>

                <div class="control-group">
                    <label class="control-label" for="answer">Answer</label>
                      <div class="controls">
                         <input class="input-xxlarge" type="text" name="new_answer" id="new_answer">
                      </div>
                </div>

               <div class="control-group">
                   <label class="control-label" for="rank">rank</label>
                      <div class="controls">
                         <input class="input-mini" type="text" name="rank" id="rank">
                     </div>
               </div>
          </cfcase>
        </cfswitch>

            <!---  --->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Save</button>
                <a href="#buildUrl(action='admin:question.list', querystring='surveyid=#rc.surveyId#')#" class="btn">Cancel</a>
            </div>
            </fieldset>
        </form> 
    </cfif>
<cfdump var="#rc#">

</cfoutput>
</body>
</html> 
```

这是我添加新问题的控制器方法：

```
<cffunction name="new" returntype="void" access="public">
        <cfargument name="rc" type="struct" required="true">
        <!---call service to get the textfields, checkboxes etc,. based on questiontype selection --->
        <!--- call service to get question types for select box --->
        <cfset rc.types = getQuestionService().types()> 
        <cfset rc.action = 'New Question'>
        <!--- if user select question type --->
        <cfif isdefined('arguments.rc.questionType')>
            <cfset rc.data = getQuestionService().new(arguments.rc.surveyId, arguments.rc.questionType)>
        </cfif> 
    </cffunction> 
```

我在单页中有两个表格。在第一种形式中，我选择 questionType。根据所选的 questionType，我必须显示一个添加问题表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:07:07.590

为了确保我正在阅读这段代码应该如何工作：

1\. 这是一个创建问题的表格，而不是回答它。
2\. rc 是一个以您的基本问题定义为键的结构，并且您还有其他现有代码可确保 rc 结构将存在于此页面上。
（而不是 isDefined("rc.questionType") 我会使用 structKeyExists(rc, "questionType")，但这是一个完全不同的讨论
。3\. 当您更改问题类型的值时，该字段将被提交回来，其他代码创建并填充 rc 结构的 questionType 键。所以 isDefined('rc.questionType') 现在应该为 TRUE（将您移动到 ​​cfelse 块）。
4\. 您现在返回到带有输入问题的字段的同一页面，无论是否需要，您正在寻找基于 questionType 的答案输入框。

如果所有这些假设都是正确的，那么这就是您需要遍历选项以获得答案的关键。cfswitch/cfcase 是正确的，但其中一些多项选择选项的处理方式需要稍有不同。带有“其他”选项的选项在此端和答案跟踪端将需要更多处理。您必须为该已检查答案添加一个文本框。

因此，您需要对 rc 结构中的问题进行更多定义。您需要跟踪哪个是正确答案（一个简单的复选框）。如果您想允许动态数量的多项选择答案，则需要跟踪您需要多少答案。如果您跟踪答案是否为“其他”，您甚至可以将这些多选答案选项放在一起。这也将允许您在多选选项中有多个“其他”类型的选择。当然，这会将您对这是否是一个多项选择题的选择减少到只有一个，只是“多项选择”。让答案确定它是单选还是“其他”选择。如果您想使用单选按钮而不是复选框来进行单选，那么您就可以 d 必须做的是计算问题的答案。然后，您可以分别担心每个基本问题类型。

更好地跟踪答案（正确和“其他”选项）的代码也需要被拉回，可能在 getQuestionService() 函数中，我假设你正在提取你的问题定义并填充 rc结构。

您是否打算将此表格用作 UPSERT，或者这只是一个 INSERT，您将在其他地方更新/编辑问题？

无论如何，回到你原来的问题。我建议的第一件事是在页面顶部也 cfdump rc 结构。查看您最初使用的数据。

在您需要添加答案的地方，cfswitch 是正确的方法。您可能与此处的任何案例都不匹配。在此处输出 rc.questionTypeID 以查看您的值是多少。我会为问题类型使用整数 ID，而不是问题类型的名称。它将提供更快、更精确的处理。当你得到正确的案例时，你需要在这里循环你的答案。

要选择哪个是正确的，只需在 cfif 中添加 selected="selected" 或 checked="checked"（取决于输入类型），以检查当前答案是否为正确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:50:39.340

由于 switch 表达式设置为`rc.questiontypeid`，因此 case 值应该是 possible `rc.questiontypeid`，而不是问题类型名称。

# javascript - 无法在 Google 散点图中显示标签

> ID：15094892
> 
> 赞同：0
> 
> 时间：2013-02-26T16:59:06.970
> 
> 标签：javascript, google-visualization, scatter-plot

我似乎无法让这个 Google Chart Scatter Plot 将 score.partner 显示为标签。我只能让它们显示为工具提示。

我究竟做错了什么？

```
drawChart: function() {
    var self = this;

    var gdpMin = parseFloat(self.scores[0].gdpScore);
    var gdpMax = gdpMin;
    var teaMin = parseFloat(self.scores[0].teaScore);
    var teaMax = teaMin;

    var data = new google.visualization.DataTable();
    data.addColumn('number', 'GDP Score');
    data.addColumn('number', 'TEA Score');
    data.addColumn({type:'string', role:'label'});

    $.each(self.scores, function(i, score) {
        gdpScore = parseFloat(score.gdpScore);
        teaScore = parseFloat(score.teaScore);
        data.addRows([[gdpScore, teaScore, score.partner]]);

if (gdpScore < gdpMin) gdpMin = gdpScore;
        if (gdpScore > gdpMax) gdpMax = gdpScore;

if (teaScore < teaMin) teaMin = teaScore;
        if (teaScore > teaMax) teaMax = teaScore;
    });

    var options = {
      title: 'GDP and TEA Scores',
      hAxis: {title: 'GDP', minValue: gdpMin, maxValue: gdpMax},
      vAxis: {title: 'TEA', minValue: teaMin, maxValue: teaMax},
      legend: 'none',
      colors: ['#3B7CBF']
    };

    var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
    chart.draw(data, options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:33:47.257

[来自Google Visualization API Group](https://groups.google.com/forum/?hl=en&fromgroups#!forum/google-visualization-api)中的用户**asgalant**：

> 您想在 ScatterChart 上标记各个点吗？ **这是不支持的。** 根据您的数据结构，您可能能够以类似于 ScatterChart 的方式使用 LineChart。在此处查看示例：jsfiddle.net/asgallant/YFMga/

你有它。使用 Google Visualization API 的散点图不支持标签。

[jqPlot](http://www.jqplot.com/tests/bubble-plots.php)可能是一个可接受的替代方案。

# ssrs-2008 - 如何在 ssrs 中显示/隐藏子报表？

> ID：15094893
> 
> 赞同：0
> 
> 时间：2013-02-26T16:59:08.007
> 
> 标签：ssrs-2008

我是 SSRS 的新手。我要做的是为每个表名创建一个下拉列表，并显示从下拉列表中选择的表并隐藏其余表。

# mfc - SetWindowHookEx 在嵌套窗口中阻止 WM_ERASEBKGND

> ID：15094894
> 
> 赞同：0
> 
> 时间：2013-02-26T16:59:10.010
> 
> 标签：mfc, setwindowshookex

我有以下 MFC 应用程序 UI 结构：

```
Main Frame
- CView derived class
 - CWnd derived class
 --- CMFCTabCtrl derived class
 ---- CDialog derived class 
```

CMFCTabCtrl 可以依次保存 CWnd 派生类等等……

如果你把它想象成一棵窗口树，让我们将上面的定义为深度 0。

当树的深度为 1 时会出现问题，这意味着：

```
Main Frame
- CView derived class
 - CWnd derived class
 --- CMFCTabCtrl derived class
 ----- CWnd derived class
 ------- CMFCTabCtrl derived class
 -------- CDialog derived class 
```

我将以下代码添加到我的应用程序中：

```
extern HHOOK hHook = nullptr;
LRESULT CALLBACK HookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    return CallNextHookEx(hook, nCode, wParam, lParam);
}
hHook = SetWindowsHookEx(WH_CALLWNDPROC, &HookProc, AfxGetInstanceHandle(), GetCurrentThreadId()); 
```

然后我运行应用程序并调整主框架的大小，我注意到以下内容：

1.  在树深度为 0 的情况下，`WM_ERASEBKGND`在对话中接收到消息。
2.  在树深度为 1 的情况下，`WM_ERASEBKGND`对话中不会收到消息。

我希望我的解释足够清楚。

设置钩子会以如此戏剧性的方式影响行为，这似乎很奇怪。

你们之前有没有遇到过这种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:57:15.337

我想我找到了问题所在。每次我们调整下一个嵌套窗口的大小时，内核堆栈都会增加，直到它没有足够的堆栈来调用 wndproc 并且我们停止接收消息。

更多细节可以在这里找到：http: [//blogs.msdn.com/b/alejacma/archive/2008/11/20/controls-won-t-get-resized-once-the-nesting-hierarchy-of-windows -exceeds-a-certain-depth-x64.aspx](http://blogs.msdn.com/b/alejacma/archive/2008/11/20/controls-won-t-get-resized-once-the-nesting-hierarchy-of-windows-exceeds-a-certain-depth-x64.aspx)

# html - 如何让 Firefox 在 HTML5 中运行视频

> ID：15094895
> 
> 赞同：0
> 
> 时间：2013-02-26T16:59:10.660
> 
> 标签：html, firefox, video

我正在使用 HTML5，但无法在 Firefox 中运行视频。它在 Safari 和 Chrome 中运行。我已经提出了 .ogv、.webm 和 .mp4 格式，但仍然没有运气。

它在我的计算机上的 Firefox 中运行，但不在 GoDaddy 服务器上。

这是链接：[http ://www.buildersclass.org/_img/2013/2013Feb/2013_Feb_chili.html](http://www.buildersclass.org/_img/2013/2013Feb/2013_Feb_chili.html)

我曾尝试在 Windows 和 Mac 上使用 Firefox。两者都给我相同的错误信息：`No video with supported format and MIME type found`.

这是`.htaccess`我在服务器上使用的文件：

```
AddType video/mp4  mp4 m4v    
AddType audio/mp4  m4a    
AddType video/ogg  ogv    
AddType audio/ogg  ogg oga    
AddType video/webm webm 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:53:35.317

从评论线程中，答案是从 .htaccess 中删除一个尾随句点。以便获取 MIME 类型

# sql - 删除表的旧值并使用相同查询的结果更新表

> ID：15094901
> 
> 赞同：-1
> 
> 时间：2013-02-26T16:59:29.073
> 
> 标签：sql

我的问题很简单，但我找不到删除表的旧值并使用相同查询的结果更新同一个表的方法。

**更新**

该查询是对表 A 的 SELECT，结果是表 B。表 B 上的结果与表 A 上的最后一个查询的结果没有什么不同。

我有一个很大的表，我需要定期处理记录并创建一个新表。该表的旧值不重要，只有新值。

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:19:48.977

如果您只需要一个会话，您可以使用一个临时表来存储您正在使用的结果。当您退出时，它会自动被删除。

你没有说你正在使用什么数据库，但试试这个

```
create temp tableB AS select * from tableA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:35:18.527

观点呢？如果您只需要表 B 来查询。您说您在表 A 上有一个选择。假设您的选择是`SELECT * FROM TableA WHERE X = Y`。那么你的陈述将是

```
CREATE VIEW vwTableB AS 
   SELECT * FROM TableA WHERE X = Y 
```

然后，您将查询 vwTableB，而不是查询 tableB。对表 A 中数据的任何更改都会反映在视图中，因此您不必自己继续运行脚本。

这是 vwTableB 中的数据将保持更新，您不必继续删除并插入到第二个表中。

# c# - DbSet<>.Local 是否需要特别小心使用？

> ID：15094903
> 
> 赞同：18
> 
> 时间：2013-02-26T16:59:33.420
> 
> 标签：c#, entity-framework, dbcontext, dbset

几天来，我一直在努力从存储库 ( `DbContext`) 中检索我的实体。

我正在尝试将所有实体保存在原子操作中。因此，不同的实体一起代表了对我有价值的东西。如果所有实体都是“有效的”，那么我可以将它们全部保存到数据库中。实体“a”已存储在我的存储库中，需要检索以“验证”实体“b”。

这就是问题出现的地方。我的存储库依赖于`DbSet<TEntity>`与 Linq2Sql 配合使用的类（`Include()`例如导航属性）。但是，`DbSet<TEntity>`不包含处于“添加”状态的实体。

所以我有（据我所知）两种选择：

*   使用`ChangeTracker`来查看哪些实体可用，并根据它们将它们查询到一个集合中`EntityState`。
*   使用该`DbSet<TEntity>.Local`物业。

这`ChangeTracker`似乎需要一些额外的努力才能让它以某种方式工作，以便我可以使用 Linq2Sql 来`Include()`导航属性，例如

这`DbSet<TEntity>.Local`对我来说似乎有点奇怪。可能只是名字。我刚读到一些它表现不佳的东西（比 DbSet<> 本身慢）。不确定这是否是虚假陈述。

具有重要 EntityFramework 经验的人可以对此有所了解吗？要遵循的“明智”之路是什么？还是我看到鬼了，我应该一直使用该`.Local`物业吗？

**更新代码示例**：

* * *

## 出错的一个例子

```
 public void AddAndRetrieveUncommittedTenant()
    {
        _tenantRepository = new TenantRepository(new TenantApplicationTestContext());

        const string tenantName = "testtenant";

        // Create the tenant, but not call `SaveChanges` yet until all entities are validated 
        _tenantRepository.Create(tenantName);

        //
        // Some other code
        //

        var tenant = _tenantRepository.GetTenants().FirstOrDefault(entity => entity.Name.Equals(tenantName));

        // The tenant will be null, because I did not call save changes yet,
        // and the implementation of the Repository uses a DbSet<TEntity>
        // instead of the DbSet<TEntity>.Local.
        Assert.IsNotNull(tenant);

        // Can I safely use DbSet<TEntity>.Local ? Or should I play 
        // around with DbContext.ChangeTracker instead?
    } 
```

* * *

## 我想如何使用我的示例`Repository`

在我的`Repository`我有这个方法：

```
 public IQueryable<TEntity> GetAll()
    {
        return Context.Set<TEntity>().AsQueryable();
    } 
```

我以这种方式在业务代码中使用它：

```
 public List<Case> GetCasesForUser(User user)
    {
        return _repository.GetAll().
            Where(@case => @case.Owner.EmailAddress.Equals(user.EmailAddress)).
            Include(@case => @case.Type).
            Include(@case => @case.Owner).
            ToList();
    } 
```

这主要是我喜欢坚持`DbSet`喜欢变量的原因。我需要`Include`导航属性的灵活性。如果我使用`ChangeTracker`我检索 a 中的实体`List`，这不允许我在以后的时间点延迟加载相关实体。

如果这接近于难以理解的废话*t，请告诉我，以便我改进问题。我迫切需要一个答案。

提前很多！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-06T18:34:17.913

如果您希望能够“轻松地”对 DbSet 发出查询并让它找到新创建的项目，那么您需要在创建每个实体后调用 SaveChanges()。如果您使用“工作单元”样式的方法来处理持久实体，这实际上没有问题，因为您可以让工作单元将 UoW 中的所有操作包装为数据库事务（即，当 UoW已创建，并在 UoW 完成时对其调用 Commit()）。使用这种结构，更改将发送到 DB，并且将对 DbSet 可见，但对其他 UoW 不可见（以您使用的任何隔离级别为模）。

如果您不想要这样的开销，那么您需要修改您的代码以在适当的时候使用 Local（这可能涉及查看 Local，然后如果您没有找到您想要的内容，则针对 DbSet 发出查询正在寻找）。DbSet 上的 Find() 方法在这些情况下也很有帮助。它将通过本地或数据库中的主键查找实体。因此，如果您只需要通过主键定位项目，这非常方便（并且还具有性能优势）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-22T23:06:16.273

正如 Terry Coatta 所提到的，如果您不想先保存记录，最好的方法是检查两个来源。

例如：

```
public Person LookupPerson(string emailAddress, DateTime effectiveDate)
{
    Expression<Func<Person, bool>> criteria = 
        p =>
            p.EmailAddress == emailAddress &&
            p.EffectiveDate == effectiveDate;

    return LookupPerson(_context.ObjectSet<Person>.Local.AsQueryable(), criteria) ?? // Search local
           LookupPerson(_context.ObjectSet<Person>.AsQueryable(), criteria); // Search database
}

private Person LookupPerson(IQueryable<Person> source, Expression<Func<Person, bool>> predicate)
{
    return source.FirstOrDefault(predicate);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T18:29:14.653

对于后来的人，我遇到了一些类似的问题，并决定尝试 .Concat 方法。我没有进行广泛的性能测试，所以比我有更多知识的人可以随意插话。

本质上，为了正确地将功能分解成更小的块，我最终遇到了一种情况，即我有一个方法不知道当前 UoW 中对同一方法的连续或先前调用。所以我这样做了：

```
var context = new MyDbContextClass();
var emp = context.Employees.Concat(context.Employees.Local).FirstOrDefault(e => e.Name.Contains("some name")); 
```

# cassandra - DataStax Enterprise 3.0 Visual Cluster Provisioning 失败

> ID：15094904
> 
> 赞同：0
> 
> 时间：2013-02-26T16:59:43.300
> 
> 标签：cassandra, datastax-enterprise

使用新的 DSE 3.0 Visual Cluster Provisioning 工具我在节点初始化期间收到错误 -**找不到包 dse-libpig 的匹配版本**

`/var/lib/opscenter-agent/agent.log`包含：

```
INFO [Thread-9] 2013-02-26 15:30:41,929 Running apt-get install dry-run ERROR [Thread-9] 2013-02-26 15:30:42,966 Installation failed: 
#<RuntimeException java.lang.RuntimeException: slingshot.ExceptionInfo: throw+: {:type :installation-error, :message Could not find a matching version for package dse-libpig}>    java.lang.RuntimeException: slingshot.ExceptionInfo: throw+: {:type :installation-error, :message Could not find a matching version for package dse-libpig}
          LazySeq.java:47 clojure.lang.LazySeq.sval
          LazySeq.java:63 clojure.lang.LazySeq.seq
      ChunkedCons.java:59 clojure.lang.ChunkedCons.chunkedNext
      ChunkedCons.java:43 clojure.lang.ChunkedCons.next
              RT.java:560 clojure.lang.RT.next
              core.clj:61 clojure.core/next
            core.clj:3399 clojure.core/nthnext
        core_print.clj:55 clojure.core/print-sequential
       core_print.clj:138 clojure.core/fn
         MultiFn.java:167 clojure.lang.MultiFn.invoke
            core.clj:2812 clojure.core/pr-on
            core.clj:2824 clojure.core/pr
             AFn.java:161 clojure.lang.AFn.applyToHelper
          RestFn.java:132 clojure.lang.RestFn.applyTo
             core.clj:540 clojure.core/apply
            core.clj:2830 clojure.core/pr
          RestFn.java:139 clojure.lang.RestFn.applyTo
             core.clj:540 clojure.core/apply
            core.clj:2863 clojure.core/print
          RestFn.java:137 clojure.lang.RestFn.applyTo
             core.clj:540 clojure.core/apply
            core.clj:3716 clojure.core/print-str
          RestFn.java:436 clojure.lang.RestFn.invoke
             proc.clj:136 opsagent.proc/sudo
          RestFn.java:423 clojure.lang.RestFn.invoke
              deb.clj:157 opsagent.installation.deb/dry-run
             Var.java:369 clojure.lang.Var.invoke
             AFn.java:163 clojure.lang.AFn.applyToHelper
             Var.java:482 clojure.lang.Var.applyTo
             core.clj:540 clojure.core/apply
           install.clj:18 opsagent.installation.install/package-specific
          RestFn.java:439 clojure.lang.RestFn.invoke
           install.clj:50 opsagent.installation.install/run-installation[fn]
              AFn.java:24 clojure.lang.AFn.run
          Thread.java:662 java.lang.Thread.run Caused by: slingshot.ExceptionInfo: throw+: {:type :installation-error, :message Could not find a matching version for package dse-libpig}
              deb.clj:138 opsagent.installation.deb/make-versioned-package
            core.clj:2096 clojure.core/map[fn]
          LazySeq.java:42 clojure.lang.LazySeq.sval

 INFO [Thread-9] 2013-02-26 15:30:42,967 Request 737078db-3e68-46e9-bf95-88c9921e0451 finished with state :error : Could not find a matching version for package dse-libpig 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:11:11.340

这是 OpsCenter 如何为包指定版本号的一个错误。当包实际上是 3.0 时，它使用的是 3.0.0。

您可以通过编辑“/etc/opscenter/definitions/packages-1.json”并将 DSE 版本列表中的“3.0.0”替换为“3.0”来临时修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:43:37.067

OpsCenter 3.0.1 现在可用，并解决了这个问题。

# regex - 如何使用正则表达式创建扫描仪？

> ID：15094909
> 
> 赞同：1
> 
> 时间：2013-02-26T17:00:01.110
> 
> 标签：regex, antlr

自动扫描仪构造是指用于自动创建扫描仪的正则表达式，但是，我不确定这是如何发生的。我正在阅读“工程编译器”以获得一些理解，但我可能忽略了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:09:13.893

《**Engineering a Compiler**》一书，IIRC，掩盖了词汇扫描仪的构建，这是其他书籍很好解决的一个主题。

你想获得 Aho/Sethi/Ullman 的书**Compilers**（在任何地方都很容易找到），我认为它很好地处理了如何从正则表达式构造词法分析器。

# c# - C# WPF 标签可见性异常

> ID：15094910
> 
> 赞同：1
> 
> 时间：2013-02-26T17:00:03.590
> 
> 标签：c#, wpf, xaml, label, visibility

我正在尝试根据组合框的选定值显示标签。我正在使用VS2010。

这是代码：

```
private void pointsSettings_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (this.pointsSettings.SelectedValue.ToString() == "between")
        {
           pointsAboveLabel.Visibility = Visibility.Collapsed;
        }
        else
        {
           pointsAboveLabel.Visibility = Visibility.Visible;
        }
    } 
```

和 XAML：

```
 <ComboBox Name="pointsSettings" SelectionChanged="pointsSettings_SelectionChanged">
     <ComboBoxItem Content="between" />
     <ComboBoxItem Content="above" IsSelected="True" />
     <ComboBoxItem Content="below" />
 </ComboBox>
 <Label Content="points" Name="pointsAboveLabel" />
 <Label Content="and" Name="pointsBetweenLabel" Visibility="Collapsed" /> 
```

这是我得到的错误： ![在此处输入图像描述](../Images/11881868cb7987a6376e66e79eca1f2b.png) Text reads: *"Object reference not set to an instance of an object"*。

我知道还有另一个与此非常相似的问题 - 实际上有相同的错误 - 但是提供的解决方案（将变量初始化移动到 InitializeComponent() 方法调用之上）不适合我，因为我没有对象初始化。

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T17:16:06.920

发生这种情况是因为 pointsSettings_SelectionChanged 发生在 UI 完全初始化之前（您可以在调用堆栈中看到它来自 InitializeComponents() 调用）。因此标签尚未在 UI 中初始化，因此代码隐藏中指向该标签的变量为空。所以它实际上与另一个问题是相同的问题，但是初始化变量的是 WPF 框架，而不是你。

您的 XAML 是按顺序评估的，因此它`ComboBox`会在标签初始化之前点击并初始化它（包括最初选择的值）并触发 SelectionChanged 事件。您会注意到，如果您更改 XAML 的顺序以使`Label`位于*上方*，`ComboBox`您将不会遇到问题，因为`Label`将在事件触发之前初始化。

为了解决这个问题，我建议向 pointsSettings_SelectionChanged 方法添加一个条件，以在 pointsAboveLabel 为空时返回：

```
private void pointsSettings_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if(pointsAboveLabel == null) return;
    //rest of code
} 
```

并且由于您在 中对最初选择的值进行硬编码`ComboBox`，因此您可以对 . 的初始值进行硬`Visibility`编码`Label`。

但是您的代码中还有另一个问题- the `SelectedValue`of the`ComboBox`永远不会是字符串，因为您现在已经设置了它。将`SelectedValue`是一个`ComboBoxItem`. 为了查看您放入的字符串值`ComboBoxItem`，您需要查看该`Content`属性。所以你需要这样的东西：

```
ComboBoxItem item = pointsSettings.SelectedValue as ComboBoxItem;
if(item.Content.ToString() == "between")
{
  ...
} 
```

# opacity - 有什么方法可以让文本阴影不显示在文本后面？

> ID：15094912
> 
> 赞同：3
> 
> 时间：2013-02-26T17:00:07.863
> 
> 标签：opacity, alpha, css

我想要有阴影/发光的文本，但问题是文本本身有点透明，阴影从它后面显示出来，给文本着色。

```
color: rgba(226,229,226,0.88);
-webkit-text-stroke-width: .5px;
-webkit-text-stroke-color: #9c9c9c;
text-shadow: 0px 1px 29px #333; 
```

有没有实现这一点的 CSS 方法？box-shadow 似乎不会影响投射阴影的略微透明项目的颜色，因此这种行为是不一致的（尤其是当您希望文本具有与框相同的外观时）。

这是一个 jsfiddle 来解释我在说什么：http: [//jsfiddle.net/cutcopypaste/KzxrK/](http://jsfiddle.net/cutcopypaste/KzxrK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:13:12.900

您可以在文本后面添加完全相同的文本，使用背景颜色和相同的大小和形状。

使用类似这样的东西和相应的CSS：

```
<h1>█&lt;/h1><h1 class="c1">█&lt;/h1> 
```

编辑：如此处所示，您编辑的 jsfiddle [http://jsfiddle.net/KzxrK/2/](http://jsfiddle.net/KzxrK/2/)

# php - 带有属性 colspan 和 rowspan 的 HTML 表到 PHP 数组

> ID：15094913
> 
> 赞同：0
> 
> 时间：2013-02-26T17:00:10.500
> 
> 标签：php, html, arrays, html-table

我需要将 HTML 表（行和列）转换为 PHP 数组。例如：

```
<tr>
   <th rowspan="2">Username</th>
   <th colspan="2">Personal</th>
</tr>
<tr>
    <th>Name</th>
    <th>Birth date</th>
</tr> 
```

在 PHP 中我需要它变成：

```
array(
     [0] => array(
                 [0] => array(
                             ["value"] => "Username", 
                             ["rowspan"] => "2"),
                 [1] => array(
                             ["value"] => "Personal", 
                             ["colspan"] => "2")
                 ),
     [1] => array(
                 [0] => array(
                             ["value"] => "Name"
                             ),
                 [1] => array(
                             ["value"] => "Birth date"
                             )
                 )
); 
```

所以，想法是，第一个数组将保留行，在每一行内我想要一个列数组，在列内我想要一个包含单元格值和属性的数组，我只需要像 rowspan 这样的属性和科尔斯潘。所以如果你有这个想法并且知道怎么做，请分享，我不需要你为我做，我只需要知道我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:03:23.047

你应该使用数组的组合，比如

```
array(
       array("rowspan"=>3,"colspan=>"2","class"=>"abc",id=>"row_1","value"=>array(1,2)
      ); 
```

第一个数组包含属性数组和显示数据的值数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-15T19:51:35.863

## 解决方案（2013 年 3 月 1 日）

所以，这里是解决方案：首先我发送一个表单，其中包含一个包含 html 表格标签的字段。然后我得到包含 html 的字符串，我正在使用 symfony 进行操作，所以在我的操作中我写道： `$stringHeader = $request->getParameter('htmlTable');`htmlTable 是包含 html 表的表单中的字段（输入）的名称，然后我将字符串转换为 XML：

```
$xmlstring = <<<XML
<?xml version='1.0'?> 
<document>
$stringHeader
</document>
XML; 
```

最后将数据放入数组中，html的结构如前所述。

```
$xml = simplexml_load_string($xmlstring);
$header = array();
$columns = array();
foreach ($xml->tr as $tr) {
    foreach ($tr->th as $th) {
        if (isset($th->attributes()->rowspan)) {
            $rowspan = $th->attributes()->rowspan;
            $columns[] = array("value" => "$th", "rowspan" => "$rowspan");
        } elseif (isset($th->attributes()->colspan)) {
            $colspan = $th->attributes()->colspan;
            $columns[] = array("value" => "$th", "colspan" => "$colspan");
        } else {
            $columns[] = array("value" => "$th");
        }

    }
    $header[] = $columns;
    unset($columns);
    $columns = array();
} 
```

# javascript - 按钮消失，溢出需要以最大宽度启动

> ID：15094914
> 
> 赞同：1
> 
> 时间：2013-02-26T17:00:11.797
> 
> 标签：javascript, jquery, css, overflow, z-index

所以基本上，我有一个标签栏，你有一个添加按钮来克隆标签，然后编辑它们。我的问题是，一旦添加了这么多标签，我的（左右箭头）和我的添加按钮就会被删除。如何添加标签，但不让我的按钮消失？固定位置不是一个选项，我想要最新选项卡旁边的按钮，一旦栏达到最大宽度，按钮就会留在那里。箭头用于滚动选项卡以查看将在溢出时隐藏的选项卡。[http://jsfiddle.net/pHraC/1/](http://jsfiddle.net/pHraC/1/)

**html**

```
<div class="tabBox" style='max-width:800px'>
  <ul class="tabs">
    <li class="selected"><a href="#">Certificate of Quantity</a></li>
    <li><a href="#">COQ - Products/Chemicals</a></li>
    <li><a href="#">Movement Summary</a></li>
    <li><a href="#">Barge Survey</a></li>

    <ul class="tabButtons">
      <li><a href="#" class="tabNavLeft"><-</a></li>
      <li><a href="step-2b.html" class="tabNavRight">-></a></li>
      <li><div class="tabNavAdd" title="Add another report form to nomination" style="margin-top:6px">
      <input type='button' value='add' class='addTab' /></div></li>
    </ul>            
    </ul>  
</div> 
```

**jQuery**

```
// add new tab
$("input.addTab").live("click", function (event) {
  var ultab = $(this).closest('.tabs'); // cache ul.tabs
  var li = ultab.children('li:not(.selected)').first(); // cache the row  
  ultab.children('li:last').after(li.clone().find('a').attr("href", "#").text('New Tab').end());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:20:57.987

首先，我建议您将`.tabButtons`表格分开`.tabs`

```
<div class="tabBox" style='max-width:800px'>
    <ul class="tabs">
        <li class="selected"><a href="#">Certificate of Quantity</a>
        </li>
        <li><a href="#">COQ - Products/Chemicals</a>
        </li>
        <li><a href="#">Movement Summary</a>
        </li>
        <li><a href="#">Barge Survey</a>
        </li>
    </ul>
    <ul class="tabButtons">
        <li><a href="#" class="tabNavLeft"> <- </a>
            </li>
        <li><a href="step-2b.html" class="tabNavRight">-></a>
        </li>
        <li>
            <div class="tabNavAdd" title="Add another report form to nomination" style="margin-top:6px">
                <input type='button' value='add' class='addTab' />
            </div>
        </li>
    </ul> 
```

然后，用于`position:absolute`将它们放在您喜欢的位置：

```
.tabBox { position:relative; 
```

显示：内联块；-webkit-box-sizing：边框框；-moz-box-sizing：边框框；box-sizing：边框框；填充：0 50px 0 0;} .tabButtons { 位置：绝对；顶部：0px；右：10px；z-索引：2；}

您还必须定义静态以外的位置才能`.tabBox`使其工作并为添加按钮添加一些填充。

最后，`.tabs li`像这样设置样式：

```
.tabBox .tabs li {
    display: inline-block;
    list-style: none;
    margin: 9px 0 0 0;
    padding: 3px 1px 0;
    height: 36px;
    overflow: hidden;
    position: relative;
    z-index: 1;
} 
```

`white-space:nowrap;`并将和添加`display:inline-block;`到`.tabBox .tabs`

结果如下：http: [//jsfiddle.net/pavloschris/pHraC/4/](http://jsfiddle.net/pavloschris/pHraC/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:35:10.143

最简单的方法是用填充偏移顶层`<ul>`并将按钮放置为绝对位置。

这是一个快速演示。

[http://jsfiddle.net/ionko22/vURkK/](http://jsfiddle.net/ionko22/vURkK/)

哦，也许最好把你的孩子`<ul>`放在一个`<li>`.

# php - 哪个 php 框架默认扩展了 module/bundle/whatever-reusable-package？

> ID：15094919
> 
> 赞同：0
> 
> 时间：2013-02-26T17:00:22.163
> 
> 标签：php, codeigniter, zend-framework, cakephp, laravel

现在我发现使用 MX HMVC 在 CodeIgniter 框架中扩展模块非常糟糕，默认情况下不支持，我在 MY_Controller 中有一个自定义函数，你需要做一个“hack”..重点是它不起作用好的。

我的问题是，如果 CodeIgniter 没有提供带有其他模块的扩展模块，例如 Drupal 模块方式。例如，您有核心 Views 模块和扩展 Views 的模块，因此您可以将 Slideshow 作为视图，然后将另一个添加到幻灯片中，并且每个模块都使用层次结构中先前模块中的某些内容，例如：

视图 -> 视图幻灯片 -> 视图幻灯片扩展

哪些 PHP 框架以模块化方式具有这种“扩展”能力。**我不是在寻找经典 MVC 控制器/模型的扩展，例如：**

```
class Views Slideshow extends Views {... 
```

**我需要一个考虑扩展模块/捆绑包/whatever-packages的PHP框架**

我在使用 CodeIgniter 时遇到了困难，所以我正在寻找其他一些能够在核心内实现此功能的框架。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:06:52.257

Symfony2 肯定有这一点，因为一切都是`Bundle`. 甚至框架也是一个`Bundle`.

考虑到您使用服务容器而不是硬依赖项，您几乎可以重载 Symfony2 中的几乎所有内容。请注意，这可能会引入一些复杂性（重载功能的代价）。您还可以降低复杂性（和学习曲线），因为使用服务容器不是强制性的。

请查看 Symfony2: [Architecture](http://symfony.com/doc/2.0/quick_tour/the_architecture.html)的文档，更具体地说是[了解捆绑系统](http://symfony.com/doc/2.0/quick_tour/the_architecture.html#understanding-the-bundle-system)

# javascript - 在 Chrome 中阻止默认的“ctrl pageup”和“ctrl pagedown”

> ID：15094920
> 
> 赞同：8
> 
> 时间：2013-02-26T17:00:22.917
> 
> 标签：javascript, jquery, event-handling, cross-browser, keyboard-shortcuts

我有一些代码可以为 Web 应用程序创建热键。所有热键都可以在 IE 和 Firefox 中使用，但是`Ctrl`+`PgUp`和`Ctrl`+`PgDn`在 Chrome 中不起作用。

在四处寻找答案并编写了一些自定义测试代码之后，我相信我已经确定这是因为这些事件在 Chrome 中是在 keyup 而不是 keydown 上触发的。

这些事件的默认 Chrome 处理程序正在触发而不是我的（或至少首先触发）并将浏览器切换到下一个或上一个选项卡。如果我使用热键通过我的应用程序切换回选项卡，那么我的处理程序会捕获该事件。

所以我的问题是，有没有办法在 Chrome 中捕获这些事件并阻止默认功能运行？

有问题的代码是：

```
 //These work in IE and Firefox
            $(this).bind('keydown', 'ctrl+pageup', (evt) => {
                this.prevPage();
                return false;
            });

            $(this).bind('keydown', 'ctrl+pagedown', (evt) => {
                this.nextPage();
                return false;
            });

           //These catch the event in chrome, but it's too late
           $(this).bind('keyup', 'ctrl+pageup', (evt) => {
                this.prevPage();
                return false;
            });

            $(this).bind('keyup', 'ctrl+pagedown', (evt) => {
                this.nextPage();
                return false;
            }); 
```

它完全符合我在 IE 和 Firefox 中的要求，但不是 Chrome。我试过了`evt.preventDefault()`，`evt.stopImmediatePropagation`和`evt.stopPropagation`。但是，它不起作用（我相信是因为在浏览器处理程序之后调用了我的处理程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T16:01:19.870

检查此链接上的类似问题：

[Chrome - Javascript 阻止默认的 Ctrl + MouseWheel 行为](https://stackoverflow.com/questions/17864249/chrome-javascript-prevent-default-ctrl-mousewheel-behavior)

他们说它在 chrome 上是不可能的，而且仍在解决中！

# sql - 如何更新列的每个数据？

> ID：15094926
> 
> 赞同：0
> 
> 时间：2013-02-26T17:00:43.427
> 
> 标签：sql, postgresql

我有一个名为 class 的表

```
|Record_No [PK] | Student_No  | Class_No  | Seat_No  |
=====================================================
|1              | 200910      | 2         | 20       |
|2              | 201234      | 2         | 13       |
|3              | 200965      | 2         | 1        |
|4              | 200920      | 2         | 8        |
|5              | 200911      | 2         | 9        |
|6              | 200955      | 1         | 10       |
|7              | 200924      | 1         | 9        |
|8              | 200922      | 1         | 1        |
|9              | 200901      | 2         | 11       |
|10             | 200902      | 2         | 18       | 
```

是否可以按从 1 到最后一个座位号的顺序更新座位号中的数字，其中座位号的等级等于 2？

该表应如下所示：

```
|Record_No [PK] | Student_No  | Class_No  | Seat_No  |
=====================================================
|1              | 200910      | 2         | 1        |
|2              | 201234      | 2         | 2        |
|3              | 200965      | 2         | 3        |
|4              | 200920      | 2         | 4        |
|5              | 200911      | 2         | 5        |
|6              | 200955      | 1         | 10       |
|7              | 200924      | 1         | 9        |
|8              | 200922      | 1         | 1        |
|9              | 200901      | 2         | 6        |
|10             | 200902      | 2         | 7        | 
```

截至目前，我只能通过使用来实现这一点

```
UPDATE class SET Seat_No = 1 WHERE Class_No = 2 AND Student_No = 200910;
UPDATE class SET Seat_No = 2 WHERE Class_No = 2 AND Student_No = 201234;
... 
```

等等..

如果不将每个 student_no 都放在查询中，我该如何解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:09:18.007

```
update class
set seat_no = s.rn
from (
    select
        row_number() over(order by record_no) rn,
        record_no
    from class
    where class_no = 2
) s
where class.record_no = s.record_no 
```

如果要更新所有类：

```
update class
set seat_no = s.rn
from (
    select
        row_number() over(partition by class_no order by record_no) rn,
        record_no
    from class
) s
where class.record_no = s.record_no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:02:51.317

假设您的 Record_No 在您的示例中为 1-5，您可以使用它：

```
UPDATE class SET Seat_No = Record_No WHERE Class_No = 2 
```

如果不是，则取决于您的 RDBMS。

这是postgresql方法：

```
UPDATE  Class C
SET     Seat_No = t.rn
FROM    (
       SELECT Record_No, ROW_NUMBER() OVER (ORDER BY Record_No) rn
        FROM Class
       WHERE Class_no = 2
        ) t
WHERE   C.Record_No = t.Record_No 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!1/77645/1)

# android - ScrollView 布局没有填满整个屏幕

> ID：15094928
> 
> 赞同：81
> 
> 时间：2013-02-26T17:00:51.060
> 
> 标签：android, android-layout, android-fragments

我有`Activity`两个`Fragment`s （一个列表一个正常）。并且法线`Fragment`膨胀 a`Scrollview`包含 a `LineaLayout`（垂直）并且此布局包含`TextViews`. `ScrollView`and`layout_width`和`layout_height`are `match_parent`，所以我认为应该使用整个屏幕。但在底部仍然有一个“差距”。我希望你能帮助我。

滚动视图.xml

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/scrollView1"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/titlescreen_bg"
    android:orientation="vertical"
    android:paddingTop="60dp"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/tv_headline"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingBottom="60dp"
        android:paddingTop="60dp"
        android:textIsSelectable="false"
        android:textSize="@dimen/fontsize_slogan_titlescreen" />

    <TextView
        android:id="@+id/tv_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:paddingBottom="30dp"
        android:paddingTop="30dp"
        android:textIsSelectable="false"
        android:textSize="@dimen/fontsize_slogan_titlescreen" />
</LinearLayout>

</ScrollView> 
```

扩展此布局的片段。

```
package wak.iage.layout;

import wak.iage.R;
import android.app.Fragment;
import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MenuContentFragment extends Fragment
{
LinearLayout.LayoutParams   relativeParams  = new LinearLayout.LayoutParams(
                                                    LayoutParams.MATCH_PARENT,
                                                    LayoutParams.MATCH_PARENT);
LinearLayout                topLayout       = null;
TextView                    body            = null;
TextView                    head            = null;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.menu_content_main, container);
    return v;
}

public void changeText(String title, String content) {
    topLayout = (LinearLayout) getActivity().findViewById(
            R.id.LinearLayout1);
    head = (TextView) getActivity().findViewById(R.id.tv_headline);
    body = (TextView) getActivity().findViewById(R.id.tv_content);

    if (body == null) {
        topLayout.removeViews(1, topLayout.getChildCount() - 1);
        body = new TextView(getActivity().getApplicationContext());
        body.setPadding(0, 30, 0, 20);
        body.setTextColor(Color.BLACK);
        body.setTextSize(22);
        body.setGravity(Gravity.CENTER_HORIZONTAL);
        topLayout.addView(body, relativeParams);
    }

    body.setText(content);
    head.setText(title);
}

public void addGlossary() {
    if (body != null) {
        topLayout.removeView(body);
    }

    int i = 0;

    for (int id : GLOSSARY) {
        TextView glossary = new TextView(getActivity()
                .getApplicationContext());
        glossary.setText(getString(id));
        glossary.setTextColor(Color.BLACK);
        if (i % 2 == 0) {
            glossary.setTypeface(Typeface.DEFAULT_BOLD);
            glossary.setTextSize(22);
            glossary.setPadding(0, 10, 0, 10);
        }
        topLayout.addView(glossary, relativeParams);
        i += 1;
    }
}

public static final int[]   GLOSSARY    = {
        R.string.GlossaryAndroidOSTitle, R.string.GlossaryAndroidOSContent,
        R.string.GlossaryAppTitle, R.string.GlossaryAppContent,
        R.string.GlossaryCloudTitle, R.string.GlossaryCloudContent,
        R.string.GlossaryDonwloadTitle, R.string.GlossaryDonwloadContent,
        R.string.GlossaryFacebookTitle, R.string.GlossaryFacebookContent,
        R.string.GlossaryGPSTitle, R.string.GlossaryGPSContent,
        R.string.GlossaryHomescreenTitle,
        R.string.GlossaryHomescreenContent, R.string.GlossaryPasswordTitle,
        R.string.GlossaryPasswordContent, R.string.GlossaryRouterTitle,
        R.string.GlossaryRouterContent, R.string.GlossarySDTitle,
        R.string.GlossaySDContent, R.string.GlossayStandbyTitle,
        R.string.GlossayStandbyContent, R.string.GlossaryTabletTitle,
        R.string.GlossaryTabletContent, R.string.GlossaryTouchscreenTitle,
        R.string.GlossaryTouchscreenContent, R.string.GlossayWidgetsTitle,
        R.string.GlossayWidgetsContent, R.string.GlossayWLANTitle,
        R.string.GlossayWLANContent };
} 
```

非常感谢。

编辑：即使问题已经解决了：android:fillViewPort="true"，我想告诉你这个问题。

但是我没有足够的声誉来发布图片。对不起！

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2013-02-26T17:11:01.530

如果我没记错的话，`ViewGroup`' 高度（`LinearLayout`在您的情况下是 ' 高度），即 a 中的（唯一）子`ScrollView`项，总是被解释为 wrap_content，因为该内容可能大于`ScrollView`' 高度（因此滚动条）。

这也意味着如果内容*较小*，则`ScrollView`的内容（子项）可能不一定会拉伸以填满屏幕。

为了直观地帮助您解决此问题，我们需要查看您的问题的屏幕截图。

也许设置`android:fillViewport="true"`将`ScrollView`解决您的问题：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-24T12:55:46.853

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:fadeScrollbars="false"
    android:scrollbars="vertical" > 
```

在你`ScrollView`添加一个属性，即。

```
android:fillViewport="true" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T17:04:19.997

```
inflater.inflate(R.layout.menu_content_main, container); 
```

应该

```
inflater.inflate(R.layout.menu_content_main, container, false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-26T00:57:46.047

我遇到了类似的问题，只能使用 Helper Class 来解决。我在网上找到了原始代码，这是我的实现。

### Java类：

```
public class ImageViewHelper extends android.support.v7.widget.AppCompatImageView {

    public ImageViewHelper(Context context) {
        super(context);
    }

    public ImageViewHelper(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ImageViewHelper(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        Drawable d = getDrawable();
        if (d != null) {
            int w = MeasureSpec.getSize(widthMeasureSpec);
            int h = w * d.getIntrinsicHeight() / d.getIntrinsicWidth();
            setMeasuredDimension(w, h);
        }
        else super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

### XML:

```
<com.example.app.ImageViewHelper
    android:id="@+id/img"
    android:src="@drawable/start"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:adjustViewBounds="true" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-03T12:43:37.643

将 ScrollView 替换为 NestedScrollView 也可以解决嵌套滚动的问题。

```
<androidx.core.widget.NestedScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/scrollView1"
android:layout_width="match_parent"
android:layout_height="match_parent">

</androidx.core.widget.NestedScrollView> 
```

# magento - Magento 加载产品集合，包括禁用的产品

> ID：15094930
> 
> 赞同：7
> 
> 时间：2013-02-26T17:01:01.890
> 
> 标签：magento

我需要按禁用状态过滤 magento 产品集合。Magento 在加载集合时似乎默认忽略禁用的产品。

所以我的问题有两个部分：

1 - 我如何在magento中加载仅包含禁用产品的集合？2 - 为什么magento一开始就没有在集合中加载禁用的产品？

我正在使用标准代码来加载集合：

```
$collction = Mage::getModel('catalog/product')->getCollection() 
```

这永远不会加载禁用的产品。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:32:50.283

如果使用产品扁平结构，那么

```
$col = Mage::getModel('catalog/product')->getCollection(); 
```

将使用平面表（例如`catalog_product_flat_1`），并且`disabled`产品不属于该表。

将配置更改`Use Flat Catalog Product`为“否”，您将拥有集合中的所有产品： ![目录平面](../Images/d6fae50b7f78cba6f1ef6c38a438e944.png)

它将以这种方式加载所有产品。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-10T08:17:11.297

如果您不想在后台更改配置（以保持良好的性能），我发现这个解决方案可以在处理您的请求时更改值，因为我只希望禁用产品用于特定功能：

```
Mage::app()->getStore()->setConfig('catalog/frontend/flat_catalog_product', 0); 
```

您必须在第一次调用之前设置：

```
Mage::getModel('catalog/product')->getCollection() 
```

我注意到您无法在同一请求期间将其设置回 1，可能是因为集合模型存储将此标志保留在内存中。

这样，我的数据库中的配置就没有改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-20T15:33:04.610

获得收藏后，您可以使用 ->joinTable('cayaloginventory/stock_item','product_id=entity_id',array('stock_status'=>'is_in_stock')) 加入表格

只需添加 ->addAttributeToFilter('status', array('eq' => 1) )... 这将仅加载 AVAILABLE .. 如果您想加载您需要的有库存产品的表加载 DISABLE 将状态更改为 2

获得所有产品的残疾人收藏

```
 $collection = Mage::getModel('catalog/product')
                    ->getCollection()
                    ->joinTable( 'cataloginventory/stock_item', 'product_id=entity_id', array("stock_status" => "is_in_stock") )        
                    ->addAttributeToFilter('status', array('eq' => 2 ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-20T15:13:25.070

启用平板产品后，您最好使用

```
$collection = Mage::getResourceModel('catalog/product_collection') 
```

您将能够检索禁用和启用的产品。

请参阅此答案以获得更好的解释： [https ://magento.stackexchange.com/a/40001/32179](https://magento.stackexchange.com/a/40001/32179)

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-02-26T20:24:56.723

这应该加载由禁用产品过滤的集合。

```
 $products = Mage::getModel('catalog/product')->getCollection()
        ->setStoreId(Mage::app()->getStore()->getId())
        ->addAttributeToFilter('status', '0'); 
```

# ruby-on-rails - Rails 在我的 Mac 上安装 fcgi

> ID：15094936
> 
> 赞同：2
> 
> 时间：2013-02-26T17:01:07.910
> 
> 标签：ruby-on-rails, fastcgi

我正在使用 Rails 3.2 和 ruby​​ 1.9.2。我已将 gem 'fcgi' (fastcgi) 添加到我的 Gemfile 中，但是当我运行 bundle install 时，它在 fcgi 上失败了。

输出：

```
Installing fcgi (0.9.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /Users/johndcowan/.rvm/rubies/ruby-1.9.2-p318/bin/ruby extconf.rb 
checking for fcgiapp.h... no
checking for fastcgi/fcgiapp.h... no

make
make: *** No targets.  Stop.

Gem files will remain installed in /Users/johndcowan/.rvm/gems/ruby-1.9.2-p318/gems/fcgi- 0.9.1 for inspection.
Results logged to /Users/johndcowan/.rvm/gems/ruby-1.9.2-p318/gems/fcgi-0.9.1/ext/fcgi/gem_make.out
An error occured while installing fcgi (0.9.1), and Bundler cannot continue.
Make sure that `gem install fcgi -v '0.9.1'` succeeds before bundling.
Installing fcgi (0.9.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/Users/johndcowan/.rvm/rubies/ruby-1.9.2-p318/bin/ruby extconf.rb 
checking for fcgiapp.h... no
checking for fastcgi/fcgiapp.h... no

make
make: *** No targets.  Stop.

Gem files will remain installed in /Users/johndcowan/.rvm/gems/ruby-1.9.2-p318/gems/fcgi-0.9.1 for inspection.
Results logged to /Users/johndcowan/.rvm/gems/ruby-1.9.2-p318/gems/fcgi-0.9.1/ext/fcgi/gem_make.out
An error occured while installing fcgi (0.9.1), and Bundler cannot continue.
Make sure that `gem install fcgi -v '0.9.1'` succeeds before bundling. 
```

然后，我按照建议运行了 gem install：

```
johns-MacBook-Pro:drywall johndcowan$ sudo gem install fcgi -v '0.9.1'
Fetching: fcgi-0.9.1.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing fcgi:
ERROR: Failed to build gem native extension.

/Users/johndcowan/.rvm/rubies/ruby-1.9.2-p318/bin/ruby extconf.rb
checking for fcgiapp.h... no
checking for fastcgi/fcgiapp.h... no

make
make: *** No targets.  Stop.

Gem files will remain installed in /Users/johndcowan/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/gems/1.9.1/gems/fcgi-0.9.1 for inspection.
Results logged to /Users/johndcowan/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/gems/1.9.1/gems/fcgi-0.9.1/ext/fcgi/gem_make.out
johns-MacBook-Pro:drywall johndcowan$ 
```

我找到了一个有同样问题的用户，他/她使用 yum 安装了 fcgi_devel，这解决了他/她的 fcgi 问题。我尝试使用端口安装，但它不起作用。同一个网站说我不需要百胜。

```
sudo port install fcgi-devel
Error: Port fcgi-devel not found 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:22:34.130

如果使用 Homebrew，请先尝试`brew install fastcgi`。

# ajax - ITHit Ajax 浏览器上传取消问题，截断文件留在服务器上

> ID：15094937
> 
> 赞同：1
> 
> 时间：2013-02-26T17:01:08.277
> 
> 标签：ajax, webdav, ithit-ajax-file-browser

如果用户在 Ajax 浏览器中取消上传，似乎部分文件留在了服务器上。我希望部分上传的文件被删除。有针对这个的解决方法吗？或者是否可以删除 UI 中的取消选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:42:37.270

是的，您可以从上传面板上下文菜单中删除取消项目。请使用以下代码：

```
ITHit.Events.AddListener(ajaxFileBrowser.GetMenuManager(), 'OnShowMenu', onShowMenu);

...

function onShowMenu(menu, aContextMenuHierarchyItems) {
    if (menu.Id == 'UploadProgressPanelMenu'){  
        var index = getMenuIndexByMenuId(menu, 'CancelUpload');
           if (index != -1) {
           menu.Children.splice(index, 1);
        }
    }
}

function getMenuIndexByMenuId(menu, menuId) {
    for (var i = 0, l = menu.Children.length; i < l; i++) {
        if (menu.Children[i].Id == menuId) {
           return i;
        }
    }
    return -1;
} 
```

[在这里](http://www.webdavsystem.com/ajaxfilebrowser/programming/context_menu_customization)您可以找到有关菜单自定义的更多信息。上下文菜单 ID（如上例中的“CancelUpload”）位于 ITHitAJAXFileBrowser.js 中，您可以在 Phrases 块中轻松找到它们，这部分代码没有被缩小。顶级菜单 ID（如“UploadProgressPanelMenu”）在菜单对象描述中[列出](http://www.webdavsystem.com/ajaxfilebrowser/programming/settings_reference)。

如果您在服务器端使用 IT Hit WebDAV Server Engine，您可以删除[IResumableUpload.C​​ancelUpload](http://doc3.webdavsystem.com/default.aspx?main=http://doc3.webdavsystem.com/ITHit.WebDAV.Server.ResumableUpload.IResumableUpload.CancelUpload.html)实现中的文件。请注意，一旦取消上传命令是异步操作，上传可能会继续，并且您的文件可能会在您的存储中被阻止。

因为取消上传是异步的，这就是为什么Ajax文件浏览器在取消上传执行过程中不能直接删除文件的原因。在大多数情况下，该文件在服务器端被上传阻止。

# ios - 用子层放大 CALayer 会导致子层之间的小间隙

> ID：15094938
> 
> 赞同：0
> 
> 时间：2013-02-26T17:01:10.330
> 
> 标签：ios, calayer, catransform3d

**简而言之：** 我有一个包含许多子图层的图层，因为瓷砖像素完美地布置在这个超级图层上。当超层按比例放大（使用 UIScrollview，但在内部使用 CATransform3D）时，子层会按比例放大，但图块（子层）之间会出现小间隙

**论文：**
它基于使用浮点数或双精度数的小数学不准确性。此插值帧无法 100% 正确显示

看起来边缘是插值的。

你认为有什么帮助？您需要更多详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:23:00.733

简单的答案是：边缘抗锯齿！！！

如果您在 Info.plist 文件中启用了该标志，您将无法获得精确的边缘，看起来像瓷砖之间的间隙:-)

希望对其他人也有帮助。

# c# - 在 C# 屏幕保护程序中旋转显示文本和图像

> ID：15094943
> 
> 赞同：0
> 
> 时间：2013-02-26T17:01:18.537
> 
> 标签：c#, screensaver

我正在用 C# 编写一个屏幕保护程序。我希望它执行以下操作：

从一段文字开始。大约 3 秒或更长时间后，隐藏文本并显示图像。在接下来的 3 秒后，隐藏图像显示文本并继续循环，直到用户执行退出屏幕保护程序的操作。

我所做的：我从一个简单的文本标签和一个计时器控件开始。我能够在每 3 秒后获得屏幕上的文本标签更改位置。我更新了我的代码以包含一个图片框，并且在我的 timer_tick 方法中，我插入了一个 if-else 语句来检查，当调用该方法时，如果显示了 textlabel，则隐藏它并显示图片框。否则，如果显示图片框，则隐藏它并显示文本框。代码如下所示：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Cursor.Hide();
        TopMost = true;

        moveTimer.Interval = 3000;
        moveTimer.Tick += new EventHandler(moveTimer_Tick);
        moveTimer.Start();
    }

    private void moveTimer_Tick(object sender, System.EventArgs e)
    {
        //Move text to new Location
        //textLabel.Left = rand.Next(Math.Max(1, Bounds.Width - textLabel.Width));
        //textLabel.Top = rand.Next(Math.Max(1, Bounds.Height - textLabel.Height));

        if (pictureBox1.Enabled == true)
            {
                pictureBox1.Hide();
                textLabel.Show();
            }

        if (textLabel.Enabled == true)
            {
                textLabel.Hide();
                pictureBox1.Show();
            }
    } 
```

这就是问题所在：当我运行屏幕保护程序时，屏幕以文本开始，3 秒后变为图片并停在那里。

我该怎么做才能让它在一个连续的循环中移动，显示/隐藏文本标签或图片框？

我是否以正确的方式实现了这一点？

请清晰简洁的解释/答案将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:04:52.707

也许您可以将状态保存在可以切换的变量中

```
private bool state = false; 

private void moveTimer_Tick(object sender, System.EventArgs e)
{
    //Move text to new Location
    //textLabel.Left = rand.Next(Math.Max(1, Bounds.Width - textLabel.Width));
    //textLabel.Top = rand.Next(Math.Max(1, Bounds.Height - textLabel.Height));

    if (state)
    {
        pictureBox1.Hide();
        textLabel.Show();
    }
    else
    {
        textLabel.Hide();
        pictureBox1.Show();
    }
    state = !state;
} 
```

这样的事情怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:09:32.260

Enabled 表示对象是否可以接收输入。可见是说它是否可见。

您会看到它只更改一次，因为所有对象都已启用。第一个`if`成功，隐藏图片并显示文本。但随后第二个`if`也成功了，显示图片并隐藏文本。由于这是一个事件回调，您永远不会看到第一个`if`发生，因为第二个会覆盖它。

正如您在评论中所意识到的那样，答案是不启用检查。相反，请检查可见。确保也使用 an `else`，否则您可能仍然会遇到同样的问题，即两者都为真。

```
private void moveTimer_Tick(object sender, System.EventArgs e)
{
    //Move text to new Location
    //textLabel.Left = rand.Next(Math.Max(1, Bounds.Width - textLabel.Width));
    //textLabel.Top = rand.Next(Math.Max(1, Bounds.Height - textLabel.Height));

    if (pictureBox1.Visible == true)
        {
            pictureBox1.Hide();
            textLabel.Show();
        }
    else
        {
            textLabel.Hide();
            pictureBox1.Show();
        }
} 
```

# c# - 输入字符串的格式不正确

> ID：15094945
> 
> 赞同：0
> 
> 时间：2013-02-26T17:01:25.477
> 
> 标签：c#, asp.net, string, asp.net-mvc-4, int

我在使用asp.net mvc 4的这段代码中遇到错误“输入字符串的格式不正确”我知道为什么会出现此错误，因为我正在使用Marca进行搜索过滤器（品牌，我用西班牙语制作)，品牌在表中的下拉列表是字符串值，但项目表中它们相关的行是 int 值。搜索结果 http post 尝试使用字符串值来执行此操作，并且我收到错误消息，如果我在 url 中手动键入我想要搜索的品牌的 int id 查询通过。这是我的代码示例，抱歉我的英语不好。

```
public ActionResult Index(string marcas, string search_query)
    {
var MarcaLst = new List<string>();

var MarcaQry = from d in db.Marcas // table Brand
               orderby d.Marca1 // string row of the table Brand
               select d.Marca1;
MarcaLst.AddRange(MarcaQry.Distinct());
ViewBag.marcas = new SelectList(MarcaLst);

var marca = from m in db.Marcas
            select m;

if (!String.IsNullOrEmpty(search_query))
{
    descripcion = descripcion.Where(s => s.Descripcion.ToUpper().Contains(search_query.ToUpper()));
}

if (string.IsNullOrEmpty(marcas))
    return View(descripcion.ToList());
else
{
    int marcasint = Convert.ToInt32(marcas); // I get the error here from a work around to make the page load
    return View(descripcion.Where(x => x.MarcaID == marcasint)); //MarcaID is the int value of the Items table for the Brand
}
} 
```

> > url/articulos?search_query=a&marcas=BSN //错误
> > 
> > url/articulos?search_query=a&marcas=1 //通过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:04:30.663

您正在尝试将字符串转换为整数。因此字符串必须采用正确的格式。例如，您不能将“abc1”转换为整数。您可以使用`Int32.TryParse(stringVal)`来检查类型转换和转换的可能性。上述方法返回布尔值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:12:03.800

不要只是将一个字符串放入 Convert 中，如果它不为 null 或为空，则假定它是一个有效的整数。改用 TryParse：

```
int marcasint;
bool success = Int32.TryParse(marcas, out marcasint);
if (success){
    return View(descripcion.Where(x => x.MarcaID == marcasint));
} else {
    return View(descripcion.ToList());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:10:16.393

尝试 Int32.TryParse 方法尝试将字符串转换为整数。所有主要数字格式都有 TryParse 方法：

文档：http: [//msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:11:14.113

尝试使用`TryParse`方法

```
 int marcasint;
 if(Int32.TryParse(marcas, out marcasint))
 {
    return View(descripcion.Where(x => x.MarcaID == marcasint));
 }
 else
 {
    //change eles part as required.
    return View(descripcion.Where(x => x.MarcaID == -1));
 } 
```

阅读您的评论后，我认为您不需要按`MarcaID`名称过滤记录。所以试试这个并`BrandName`用正确的字段名替换。

```
 return View(descripcion.Where(x => x.BrandName == marcas)); 
```

# spring - Tomcat... web 应用启动顺序

> ID：15094946
> 
> 赞同：1
> 
> 时间：2013-02-26T17:01:28.247
> 
> 标签：spring, tomcat, spring-jmx

是否可以确定 Tomcat 中的启动顺序...让 app1 等待另一个 app2 完成部署。

我已经阅读了建议Tomcat不允许任何保证的文档....但是使用spring应用程序可以确定何时部署了应用程序...然后让已部署的子应用程序监听主应用程序触发将触发它们启动的事件 - init..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:33:24.153

没有tomcat不支持这个。

没有办法订购它。

# iphone - AVPlayer - 快速向后/向前流

> ID：15094948
> 
> 赞同：8
> 
> 时间：2013-02-26T17:01:32.980
> 
> 标签：iphone, ios, xcode, avplayer, forward

这是我在 viewDidLoad 中的代码：

```
AVPlayerItem* playerItem = [AVPlayerItem playerItemWithURL:[NSURL URLWithString:@"http://groove.wavestreamer.com:7321/listen.pls?sid=1"]];

[playerItem addObserver:self forKeyPath:@"timedMetadata" options:NSKeyValueObservingOptionNew context:nil];

music = [[AVPlayer playerWithPlayerItem:playerItem] retain];
[music play]; 
```

我的问题：
我怎样才能创建一个按钮，当它被按下时快进/快退 5 秒？

谢谢您的回答... ：）

编辑：我怎样才能添加到我当前的时间......

```
CMTime currentTime = music.currentTime; 
```

……5秒？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-06-19T08:09:39.013

**在斯威夫特**，

```
fileprivate let seekDuration: Float64 = 5

@IBAction func doForwardJump(_ sender: Any) {
    guard let duration  = player.currentItem?.duration else{
        return
    }
    let playerCurrentTime = CMTimeGetSeconds(player.currentTime())
    let newTime = playerCurrentTime + seekDuration

    if newTime < CMTimeGetSeconds(duration) {

        let time2: CMTime = CMTimeMake(Int64(newTime * 1000 as Float64), 1000)
        player.seek(to: time2)
    }
}
@IBAction func doBackwardJump(_ sender: Any) {

    let playerCurrentTime = CMTimeGetSeconds(player.currentTime())
    var newTime = playerCurrentTime - seekDuration

    if newTime < 0 {
        newTime = 0
    }
    let time2: CMTime = CMTimeMake(Int64(newTime * 1000 as Float64), 1000)
    player.seek(to: time2)

} 
```

**在 Objective-C 中，**

```
#define seekDuration (float)5

- (IBAction)backwardButtonAction:(UIButton *)sender {
    float playerCurrentTime = [self getCurrentTime];
    float newTime = playerCurrentTime - seekDuration;

    if (newTime < 0) {
        newTime = 0;
    }
    CMTime time = CMTimeMake(newTime*1000, 1000);
    [self.player seekToTime:time completionHandler:^(BOOL finished) {
        dispatch_async(dispatch_get_main_queue(), ^{
            playerSliderisScrubbing = NO;
        });
    }];
}
- (IBAction)forwardButtonAction:(UIButton *)sender {
    float duration = [self getPlayerDuration];
    float playerCurrentTime = [self getCurrentTime];
    float newTime = playerCurrentTime + seekDuration;

    if (newTime < duration) {
        CMTime time = CMTimeMake(newTime*1000, 1000);
        [self.player seekToTime:time completionHandler:^(BOOL finished) {
            dispatch_async(dispatch_get_main_queue(), ^{
                playerSliderisScrubbing = NO;
            });
        }];

    }
}
- (float)getCurrentTime {
    float seconds = 0;
    if (_player) {
        seconds = CMTimeGetSeconds([_player currentTime]);
    }
    return seconds;
}
- (float)getPlayerDuration {
    float seconds = 0;
    if (_player) {
        seconds = CMTimeGetSeconds([[_player currentItem] duration]);
    }
    return seconds;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-30T13:12:53.870

**斯威夫特 4、4.2 和 5**

```
var player : AVPlayer!

@IBAction func fastForwardBtn(_ sender: UIButton) {
        let moveForword : Float64 = 5

        if player == nil { return }
        if let duration  = player!.currentItem?.duration {
        let playerCurrentTime = CMTimeGetSeconds(player!.currentTime())
        let newTime = playerCurrentTime + moveForword
        if newTime < CMTimeGetSeconds(duration)
        {
            let selectedTime: CMTime = CMTimeMake(value: Int64(newTime * 1000 as Float64), timescale: 1000)
            player!.seek(to: selectedTime)
        }
        player?.pause()
        player?.play()
        }

    }

@IBAction func rewindBtn(_ sender: UIButton) {
            let moveBackword: Float64 = 5
            if player == nil
            {
                return
            }
            let playerCurrenTime = CMTimeGetSeconds(player!.currentTime())
            var newTime = playerCurrenTime - moveBackword
            if newTime < 0
            {
                newTime = 0
            }
            player?.pause()
            let selectedTime: CMTime = CMTimeMake(value: Int64(newTime * 1000 as Float64), timescale: 1000)
            player?.seek(to: selectedTime)
            player?.play()
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T17:04:09.427

使用 AVPlayer 方法`seekToTime`

```
AVPlayer *player=..;
 [player seekToTime:time toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero]; 
```

这是一个[参考](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-24T09:26:32.203

您可以使用 avPlayer.rate 快退/快进

费率：1.0 正常 0.0 暂停

但首先，您应该检查 avPlayerItem 是否可以执行您的操作

欲了解更多信息：[https ://developer.apple.com/LIBRARY/ios/documentation/AVFoundation/Reference/AVPlayer_Class/index.html#//apple_ref/occ/instp/AVPlayer/rate](https://developer.apple.com/LIBRARY/ios/documentation/AVFoundation/Reference/AVPlayer_Class/index.html#//apple_ref/occ/instp/AVPlayer/rate)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-04T13:34:03.367

Swift 5 向前或向后搜索的功能

```
private let seekDuration: Float64 = 15

private func seekPlayback(isForward: Bool) {
    guard
        let player = player,
        let duration = player.currentItem?.duration
    else {
        return
    }

    let currentElapsedTime = player.currentTime().seconds

    var destinationTime = isForward ? (currentElapsedTime + seekDuration) : (currentElapsedTime - seekDuration)

    if destinationTime < 0 {
        destinationTime = 0
    }

    if destinationTime < duration.seconds {
        let newTime = CMTime(value: Int64(destinationTime * 1000 as Float64), timescale: 1000)
        player.seek(to: newTime)
    }
} 
```

# ruby-on-rails - 如何在 Rails 中缩小 JSON 输出？

> ID：15094951
> 
> 赞同：6
> 
> 时间：2013-02-26T17:01:38.260
> 
> 标签：ruby-on-rails, views, minify

我正在使用 .json.erb 视图而不是调用 to_json 方法。

我发现了一些关于 JSON 输出缩小的建议。一些讲述压缩 Web 应用程序的所有输出，其他人建议使用，`after filter`或者`before render`但他们没有解释如何缩小 JSON 元素之间的空格和制表符，以及从哪里获取 JSON 输入以及将缩小结果放在哪里。第三个建议严格说明了缩小 JavaScript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-02T12:23:36.160

最简单的方法是让 Ruby 解析整个响应并使用`after_filter`. 试试下面的代码`app/controllers/application_controller.rb`。

```
class ApplicationController < ActionController::Base
  after_filter :minify_json

  private

  def minify_json
    response.body = JSON.parse(response.body).to_json if request.format.json?
  end
end 
```

如果您决定要美化 JSON 而不是缩小 JSON，可以使用以下代码：

```
class ApplicationController < ActionController::Base
  after_filter :beautify_json

  private

  def beautify_json
    response.body = JSON.pretty_generate(JSON.parse(response.body)) if request.format.json?
  end
end 
```

或者，您可以允许请求者使用参数指定：

```
class ApplicationController < ActionController::Base
  after_filter :format_json

  private

  def format_json
    if request.format.json?
      json = JSON.parse(response.body)
      response.body = params[:pretty] ? JSON.pretty_generate(json) : json.to_json
    end
  end
end 
```

# php - 如何使用 php 将此多维数组转换为正确的 JSON？

> ID：15094952
> 
> 赞同：0
> 
> 时间：2013-02-26T17:01:38.590
> 
> 标签：php, xml, arrays, json, multidimensional-array

我有一个包含多个书籍条目的数组。我将每个书籍元素都以其唯一的 id 作为其键存储在每个元素中。我正在努力从中生成正确的 JSON。

当我在数组上进行 json_encode 时，它​​只会生成每个子数组 json，而不是按键对元素进行分组，而是按它们所在的数组进行分组。

这是我的多维数组

```
$booksarray = array("book title" => array(), "book isbn" => array(), "book borrowedcount" => array()); 
```

我完全失去了如何从每个子数组中获取元素然后将它们组合在一起以便它们输出类似的东西，

```
{"results": 
 {"course": "CC120", "books": 
   { "book": 
     [{"id": "12345", "title": "javascript", "isbn": "123456789", "borrowedcount": "45"}] } } 
```

我的 XML 输出如下

```
<results>
 <course>cc120</course>
  <books>
   <book id="9876" title="html" isbn="000001234" borrowedcount="56">
   <book id="12345" title="javascript" isbn="123456789" borrowedcount="45">
   <book id="222" title="php5" isbn="55555555" borrowedcount="22">
   <book id="23788" title="XML" isbn="99988877" borrowedcount="5">
  </books>
</results> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:07:49.110

将数组转换为所需的格式，然后`json_encode()`：

```
$newArray = array();

foreach($booksarray["book title"] as $key => $title)
{
    $newArray[] = array(
        'id' => $key,
        'title' => $title,
        'isbn' => $booksarray["book isbn"][$key],
        'borrowedcount' => $booksarray["book borrowedcount"][$key]
    );
}

echo json_encode($newArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:05:41.260

看起来您的数组不是您希望它首先采用的格式。一旦您的 php 数组与您希望 json 所在的结构相同， json_encode 就会起作用。

例如

```
$resultsArray = array(
    "results" => array(
        "course" => "CC120", 
        "books" => array(
            "book" => array(
                "id" => "12345", 
                "title" => "javascript"
                )
            )
        )
    );

$strJson = json_encode($resultsArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:07:31.283

我认为问题可能出在您构建数组的方式上。你能改变它吗？

我建议一个数组结构如下：

```
$booksarray = array(
    "9876" => array(
         "title" => "html",
         "isbn" => "000001234", 
         "borrowedcount" => "56"
    ),
    "12345" => array(
         "title" => "javascript",
         "isbn" => "123456789", 
         "borrowedcount" => "45"
    )
); 
```

json_encode() 然后应该以您想要的格式输出它。

例如

```
{"9876":{"title":"html","isbn":"000001234","borrowedcount":"56"},"12345":{"title":"javascript","isbn":"123456789","borrowedcount":"45"}} 
```

# ruby-on-rails - 使用 AssetSync 部署到 S3 存储桶子目录

> ID：15094953
> 
> 赞同：0
> 
> 时间：2013-02-26T17:01:40.523
> 
> 标签：ruby-on-rails, amazon-s3, asset-pipeline

我正在使用 AssetSync 同步到 S3 存储桶。它似乎工作正常。但是，我希望能够向 S3 存储桶添加版本控制。因此，我想将部署的资产放入一个子目录中，而不仅仅是存储桶名称

我的桶/v1/

我尝试将“v1”文件夹添加到 FOG_DIRECTORY env var，但这似乎不是要做的事情。有没有一种简单的方法来指定存储桶的子目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:12:27.477

自己找到了答案。谢谢你。

AssetSync.config.assets.prefix

# c# - 从可能存在或不存在的字典中读取值的线程安全方式

> ID：15094956
> 
> 赞同：3
> 
> 时间：2013-02-26T17:01:44.290
> 
> 标签：c#, dictionary, thread-safety, locking

所以，我被 ConcurrentDictionary 宠坏了，这是一个很棒的`TryGetValue`方法。但是，我只能使用常规 Dictionary，因为它位于针对手机和其他平台的可移植类库中。我正在尝试编写一个非常有限的 Dictionary 子集并以线程安全的方式公开它。

[`GetOrAdd`](http://msdn.microsoft.com/en-us/library/ee378674.aspx)我基本上需要来自 ConcurrentDictionary 的东西。现在，我的实现如下：

```
 lock (lockdictionary)
        {
            if (!dictionary.ContainsKey(name))
            {
                value = new foo();
                dictionary[name] = value;
            }
            value = dictionary[name];
        } 
```

这基本上和我能得到的一样好吗？我认为只有在密钥不存在并且添加它时才*真正需要锁定，但是，没有好的“如果存在则获取值，否则返回 null”方法。*如果我要省略 ContainsKey 位，则当密钥不存在时，我会收到异常，因为密钥不存在。

无论如何我可以把它变成一个更精简的版本吗？或者这只是普通字典所能做的最好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:03:47.640

即使在并发写入者存在的情况下**读取**也需要锁定。所以，是的，如果你改变字典，这将是最好的。

当然，每次编写某些内容时，您总是可以创建整个字典的**副本。**这样读者可能会看到一个过时的版本，但他们可以安全地阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:13:09.727

您可以尝试使用`ReaderWriterLockSlim`. 例如：

```
ReaderWriterLockSlim locker = new ReaderWriterLockSlim();

//..

public string GetOrAdd(string name)
{
    locker.EnterUpgradeableReadLock();
    try
    {
        if(!dictionary.ContainsKey(name))
        {
            locker.EnterWriteLock();
            try
            {
                dictionary[name] = new foo();
            }
            finally
            {
            locker.ExitWriteLock();
            }
        }
        value = dictionary[name];
    }
    finally
    {
        locker.ExitUpgradeableReadLock();
    }
    return value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:04:51.583

这是最好的。

锁定是必需的，因为字典不保证您可以并行更新和阅读。由于内部数据结构的更改，即使单个调用以使元素与其他线程上的更新同时运行也可能会失败。

请注意，该行为已在[Dictionary的 Thread Safety 部分中明确介绍](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

> 只要不修改集合，字典就可以同时支持多个阅读器。即便如此，通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:07:11.743

你的实现很好。**请注意，在非竞争**访问的情况下，锁实现的性能损失可以忽略不计。但是，为了实现真正的线程安全，您必须在使用字典的每个操作中使用锁定 - 我建议编写包装类，例如`SynchronizedDictinory`将同步逻辑保留在一个地方

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T17:27:04.540

您可以使用双重检查模式，如下所示：

```
if (!dictionary.ContainsKey(name))
{
    lock (lockdictionary)
    {
        if (!dictionary.ContainsKey(name))
        {
            value = new foo();
            dictionary[name] = value;
        }
        value = dictionary[name];
    }
} 
```

这可确保您仅在实际需要时才锁定，但也确保一旦锁定，您仍*需要*添加值。性能应该比总是锁定要好。但不要相信我的话。运行测试！

# c# - 获取新的下拉列表框在具有不同 ID 的 asp.net c# 中单击按钮并分配数据源，以及选择更改的功能

> ID：15094957
> 
> 赞同：0
> 
> 时间：2013-02-26T17:02:10.283
> 
> 标签：c#, asp.net

我需要在添加按钮单击事件上动态生成 3 个 DropDownList 框。生成 DDL 后，我应该能够为其分配数据源，并在 c# asp.net 中对它们执行 DDL-selectedEventChanged 功能。
下面的链接正是我正在寻找的，但我无法分配数据源或我无法执行任何功能

"[通过单击按钮添加多个 DropDownLists](https://stackoverflow.com/questions/11051728/adding-multiple-dropdownlists-with-a-button-click) "

任何更好的想法请帮助

如果我按下按钮，我需要一次获得 3 个 DDL，如果我再次按下它应该再次生成，所以点击次数 = 否。每行包含三个 DDL 的行数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:41:57.407

这是示例代码。唯一的技巧是您需要在回发后再次加载这些动态控件。否则，您将无法访问这些内容。

![在此处输入图像描述](../Images/8c1fb5bf73dc49970c356af06961d49b.png)

```
<asp:PlaceHolder runat="server" ID="PlaceHolder1"></asp:PlaceHolder>
<asp:Button runat="server" ID="AddButton" OnClick="AddButton_Click" Text="Add" />

private List<int> _controlIds;

private List<int> ControlIds
{
    get
    {
        if (_controlIds == null)
        {
            if (ViewState["ControlIds"] != null)
                _controlIds = (List<int>)ViewState["ControlIds"];
            else
                _controlIds = new List<int>();
        }
        return _controlIds;
    }
    set { ViewState["ControlIds"] = value; }
}

private List<string> DataSource
{
    get { return new List<string> { "One", "Two", "Three" }; }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        var dataSource = DataSource;

        foreach (int id in ControlIds)
        {
            var ddl = new DropDownList();
            ddl.ID = id.ToString();

            foreach (var data in dataSource)
                ddl.Items.Add(new ListItem(data));

            PlaceHolder1.Controls.Add(ddl);
        }
    }
}

protected void AddButton_Click(object sender, EventArgs e)
{
    var dataSource = DataSource;
    for (int i = 0; i < 3; i++)
    {
        var reqs = ControlIds;
        int id = ControlIds.Count + 1;

        reqs.Add(id);
        ControlIds = reqs;

        var ddl = new DropDownList();
        ddl.ID = id.ToString();

        foreach (var data in dataSource)
            ddl.Items.Add(new ListItem(data));

        PlaceHolder1.Controls.Add(ddl);
    }
} 
```

# ibm-doors - DOORS DXL 用于将版本化链接更改为特定目标基线

> ID：15094959
> 
> 赞同：3
> 
> 时间：2013-02-26T17:02:18.510
> 
> 标签：ibm-doors

我希望能够更改源模块中所有外链的基线属性。有谁知道一些可用于执行此操作的 DXL 代码？

必须有一种更简单的方法，而不是手动删除以前的外链（即 ModuleVersion BL [1.20] 并重新创建指向特定新基线的外链（即 ModuleVersion BL [1.21]）。

对于所有的 outLink (Object srcObject) -> (string linkModName) do { ... targetVersion(outLink) ... }

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:44:50.533

这是 dxl 的方法：

```
Link ol
Object o
Object othero
Module m = current
string LinkModName = "FULLPATHTOLINKMODULE"
Module tMod
ModName_ tModName
ModuleVersion mv
Baseline b
int tAbs

  // Current Version of the Links
string cVersion = "1.20"

  // Target Major, Minor and Suffix
int tMajor = 1
int tMinor = 21
string tSuffix = ""

for o in m do
{
  for ol in all(o -> LinkModName) do
  {
    mv = targetVersion(ol)
    tModName = target(ol)
    tMod = read(fullName(tModName),false)
    if(isBaseline(mv))
    {
      if(versionString(mv) "" == cVersion)
      {
        if(!isBaseline(tMod))
        {
          b = baseline(tMajor,tMinor,tSuffix)
          if(baselineExists(tMod,b))
          {
            tMod = load(tMod, b, true)
          } else {
            ack "Baseline [" tMajor "." tMinor " " tSuffix "] was not found"
            halt
          }
        }
        tAbs = targetAbsNo(ol)
        othero = object(tAbs,tMod)
        if(!null othero)
        {
          o -> LinkModName -> othero
          delete ol
        }
      }
    }
  }
}
flushDeletions()
save m 
```

不要忘记插入链接模块的路径，并在必要时更新当前和目标的基线信息。

如果您决定不删除旧链接，则可以省略`delete ol`and 。`flushDeletions()`

# lua - Lua - 相当于外部

> ID：15094960
> 
> 赞同：0
> 
> 时间：2013-02-26T17:02:19.953
> 
> 标签：lua, extern

lua 中是否有任何变量等效于 C++ 中的外部变量？

我希望能够在一个脚本中定义变量并在另一个脚本中读取/使用这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:22:57.437

来自lua-users wiki 上的[范围教程，](http://lua-users.org/wiki/ScopeTutorial)

> 任何未按原样定义的变量`local`都在*全局范围内*。所有内部范围都可以访问全局范围内的任何内容。

对于您的问题；假设我有文件**`one.lua`**和**`two.lua`**

## 一.lua

```
local x = 3
y = 17 
```

## 二.lua

```
dofile( "one.lua" )
print( x, y ) 
```

* * *

输出应为

```
nil        17 
```

If you're still unsure if some variable will be `local` or `global`; you can use `_G` table for them. Like this:

```
_G.y = 17      -- Same as y = 17 in one.lua 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:16:34.800

它们被称为*全局变量*。任何使用但未声明为局部变量的变量都是全局变量。

换句话说，这已经是默认设置了。你不必做任何特别的事情。

# sql - 连接可能不存在连接的两个表

> ID：15094961
> 
> 赞同：0
> 
> 时间：2013-02-26T17:02:25.833
> 
> 标签：sql, oracle11g

我在为 Oracle 编写 join 语句时遇到了一些问题。我想我想使用左连接，但我不是 100% 确定。

这是我的两张桌子

```
**VisibilityTable**
Industry
ProductID
Visibility
etc

**ItemTable**
ProductID
Other Info
etc 
```

这就是问题所在。我有大约 15 个行业。每个行业都希望能够根据自己的喜好将产品（~15000）标记为公共或私有。当您想要查看设置为公共或私有的特定行业的产品时，我可以使用该查询。

我遇到的问题是在一个产品被标记为一个行业的公共或私有之后，它不再出现在它尚未标记的行业中。到目前为止，这是我的查询：

```
SELECT v.*, NVL(b.VISIBILITY,'Not Marked') Visibility 
FROM ItemTable v 
LEFT OUTER JOIN VisibilityTable b ON b.ProductID = v.ProductID
WHERE (
(v.STATUS LIKE 'Filter' or 'Filter' LIKE 'All') AND 
(v.MODEL LIKE 'Filter' or 'Filter' LIKE 'All') AND 
(v.DUTY LIKE 'Filter' or 'Filter' LIKE 'All') AND 
(v.CERTIFICATION LIKE 'Filter' or 'Filter' LIKE 'All')
) 
```

这可以让我获得标记为“未标记”、“私人”、“公共”的项目，但我无法让它撤回在所选行业中未标记的项目。

编辑：添加了完整的 where 子句。这是动态生成的，然后根据来自配置文件的值传入。

例如，ProductID 85322 已标记为 Private for Industry EPGBio，但当我选择 Industry EPGMethane 时，它​​不会显示为“未审核”。它显示为标记为私有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:10:15.383

我认为这是因为您正在过滤掉未出现在 where 子句中的结果。

当您在 where 子句中引用“b”表时，您将隐式更改`left outer join`为`inner join`. （除非你碰巧在做`is null`。）

将条件移到`on`子句中。

我想我终于明白了。您试图区分为`b.Visibility`NULL 和不存在的记录。为此，您需要一个`case`声明：

```
select v.*,
       (case when b.ProductId is null then 'Not Marked at All'
             when b.Visibility is null then 'Marked as NULL'
             else b.Visibility'
        end) as Visibility 
```

我更改了生成的字符串以明确发生了什么。你可以随心所欲地制作它们。关键是利用join key上的条件判断记录是否存在，然后看value，判断value是否存在。

# java - 无法将图像上传到服务器 java.lang.IndexOutOfBoundsException：

> ID：15094964
> 
> 赞同：0
> 
> 时间：2013-02-26T17:02:35.913
> 
> 标签：java, servlets, file-upload

我正在尝试将一些图像文件上传到我的数据库。当我运行我的代码时，它会产生错误`java.lang.IndexOutOfBoundsException:`。但同样的代码在另一种形式下也能很好地工作。

我的代码是：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    PrintWriter out = response.getWriter();
    String uname = (String) request.getSession().getAttribute("uname");
    //set content type
    response.setContentType("text/html");

    DiskFileItemFactory  fileItemFactory = new DiskFileItemFactory ();

     fileItemFactory.setSizeThreshold(1*1024*1024); //1 MB

    ServletFileUpload uploadHandler = new ServletFileUpload(fileItemFactory);
    try {
            if (! ServletFileUpload.isMultipartContent(request)) {
            System.out.println("sorry. No file uploaded");
            return;
        }

        // parse request
        List<?> items = uploadHandler.parseRequest(request);  //getting error
        System.out.println(items.size());
         // get uploaded file
        FileItem file = (FileItem) items.get(0);

                Connection con=prepareConnection();
                con.setAutoCommit(false);

                 //Part photo=request.getPart("photo");
                BufferedImage originalImage=ImageIO.read(file.getInputStream());
                int type = originalImage.getType() == 0? BufferedImage.TYPE_INT_ARGB : originalImage.getType();
                BufferedImage resizeImageJpg = resizeImage(originalImage, type);
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                ImageIO.write(resizeImageJpg, "png", baos);
                baos.flush();
                InputStream is = new ByteArrayInputStream(baos.toByteArray());

                StringBuilder sb=new StringBuilder(1024);
                sb.append("insert into ").append(uname).append("PROFILEPICTURE values(?,?)");
                String query = sb.toString();
                PreparedStatement ps = con.prepareStatement(query);
                ps.setInt(1, 1);
                ps.setBinaryStream(2, is);

                int i=ps.executeUpdate();
                con.commit();
                con.close();

                if(i==1)
                {
                RequestDispatcher dispatcher = request.getRequestDispatcher("/sp/profile");
                if(dispatcher != null) {
                    dispatcher.forward(request, response);
                }
                }
                else
                {
                    out.println("Error ocuured");
                }
            out.close();

        }
        catch(Exception ex) {
        ex.printStackTrace();
    }
} 
```

控制台输出：

```
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at java.util.ArrayList.rangeCheck(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at skypark.AddProfilePict.doPost(AddProfilePict.java:79)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我的表格是：

```
<form id="form" method="post" action="AddProfilePict" enctype="multipart/form-data">
    <input type="file" accept="image/*" style="width: 450px; border:0px; background:none; margin-top:5px; width:245px;" value="">
<input class="upld" type="submit" value="Upload">
</form> 
```

谁能帮我找出导致错误的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:04:54.327

`items`确实应该是空的。您应该首先检查它的长度，然后尝试使用

```
if(! items.isEmpty()) {
    FileItem file = (FileItem) items.get(0); 
} 
```

或者

```
if(items.size() > 0) {
    FileItem file = (FileItem) items.get(0); 
} 
```

# bash - 在 bash 脚本中的变量之间复制值

> ID：15094968
> 
> 赞同：24
> 
> 时间：2013-02-26T17:02:42.747
> 
> 标签：bash

如何将变量中的数值复制到 bash 脚本中的另一个变量。如果这是C，我会做

```
int a=0;
int b;
a=b; 
```

我正在尝试这样做：

```
if [ $countip -gt $totalip ]; 
then
    $countip -eq $srctip # <-- My problem is here!
    echo $srctip
fi 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-26T17:10:32.743

说啊

```
countip=$srctip 
```

这就是赋值在 bash 中的工作方式。这会将 countip 设置为 srctip 的值。如果你想分配 srctip 然后写

```
srctip=$countip 
```

根据下面的评论，这看起来像你想要的。

# linux - 共享内存的访问权限

> ID：15094969
> 
> 赞同：2
> 
> 时间：2013-02-26T17:02:44.430
> 
> 标签：linux, shared-memory

我有 2 个应用程序通过共享内存进行通信。

进程1创建共享内存`/dev/shm`，权限为600

但是，尽管进程 2 在同一用户下运行，但它无法访问内存。将权限更改为 666 即可解决此问题。

但为什么？来自同一用户的 2 个进程应该能够访问它，还是我这里有问题？

# java - 如何将超级分配给变量？

> ID：15094972
> 
> 赞同：2
> 
> 时间：2013-02-26T17:02:57.090
> 
> 标签：java

我想做以下事情：

```
public class Sub extends Super {
  public Sub(Super underlying) {
    if (underlying == null) {
      underlying = super; // this line is illegal
    }

    this.underlying = underlying;
  }

  @Override
  public void method() {
    underlying.method();
  }
} 
```

这样的事情怎么能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:11:53.493

你没有`super`正确理解java中的关键字。参考[javadoc 了解 super](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

> 如果您的方法覆盖了它的超类的方法之一，您可以通过使用关键字 super 来调用被覆盖的方法。您也可以使用 super 来引用隐藏字段（尽管不鼓励隐藏字段）

另外，`super()`用于调用父类的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:19:34.507

如果您愿意为所涉及的方法添加和调用特定于子类的方法名称，我认为可以完成您想要的事情：

```
public class Test {
  public static void main(String[] args) {
    Super sup = new Super();
    Sub sub1 = new Sub(null);
    Sub sub2 = new Sub(sup);
    sub1.subMethod();
    sub2.subMethod();
    sup.method();
  }
}

class Super {
  public void method(){
    System.out.println("Using method from "+this);
  }
}

class Sub extends Super {
  private Super underlying;
  public Sub(Super underlying) {
    if (underlying == null) {
      underlying = this;
    }

    this.underlying = underlying;
  }

  public void subMethod() {
    underlying.method();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:10:30.293

看起来您想要实现[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)。

简单扩展 Super，让您的 IDE 通过创建 super 调用来覆盖所有方法。

然后替换“超级”。与“底层”。

容易出错，但仅此而已。

```
public class Sub extends Super {
    Super underlying;
    public Sub(Super underlying) {
        this.underlying = underlying;
    }

    @Override
    public void f() {
        underlying.f();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:14:23.897

```
public class Sub extends Super {
  public Sub(Super underlying) {
    this.underlying = (underlying == null)
        ? new Super()
        : underlying;
  }

  @Override
  public void method() {
    underlying.method();
  }
} 
```

由于正在创建另一个对象，它并不完全相同，但它的行为符合预期。

# canvas - 如何在屏幕中间居中画布

> ID：15094976
> 
> 赞同：1
> 
> 时间：2013-02-26T17:03:02.867
> 
> 标签：canvas, center

我怎样才能使我的画布居中？我已经尝试了命令 <center> 但左上角居中但我希望我的画布中间是中心。

这是我想要居中的画布：http: [//www.inserttalent.nl/~gm15561/project_1.2/periode2.html](http://www.inserttalent.nl/~gm15561/project_1.2/periode2.html)

我使用 html5 Kineticjs 和 javascript。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T17:25:17.173

如果我理解你的问题是正确的，你可以说：

```
#myCanvas {
    border: 1px solid #9C9898;
    background-color:#CFF;
    position:absolute;
    left:100px; // go messing with the value until it's centered.
} 
```

或者

```
#myCanvas {
    border: 1px solid #9C9898;
    background-color:#CFF;
    position:center;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-12T07:09:06.500

使用 CSS。尝试，

```
canvas {

   border: 1px solid #000000;
   position:        relative;
   left:               500px; (Play with this # to position horizontally)
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-26T04:21:50.710

```
//Canvas stuff
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d"); 
	ctx.fillStyle = "black";
	ctx.fillRect(0, 0, 30, 30);
```

```
<!DOCTYPE html>
<html>
<head>
<style>

</style>
</head>
<body>
    <canvas id= "canvas"  width=30px; height=30px; style='display: block;margin: auto;' ></canvas>
</body>
</html>
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T17:23:19.890

使用纯 CSS。

尝试

```
Canvas {

    Width: 300px;
    Margin: 0 auto;
    Vertical-align: middle;

} 
```

# java - 从Java中的哈希表中的值中检索键

> ID：15094977
> 
> 赞同：2
> 
> 时间：2013-02-26T17:03:02.927
> 
> 标签：java, collections, map, hashtable

我是收藏界的新手，但仍然，在我下面的课程中，我有哈希表，因为我必须选择哈希表，并且我想根据值检索键，下面是我的课程..

```
public class KeyFromValueExample
 {
public static void main(String args[]) 
{
Hashtable table = new Hashtable();
        table.put("Sony", "Bravia");
        table.put("Samsung", "Galaxy");
        table.put("Nokia", "Lumia");
System.out.println("does hash table has Lumia as value : " + table.containsValue("Lumia"));
        System.out.println("does hash table Lumia as key : " + table.containsKey("Lumia"));

        //finding key corresponding to value in hashtable - one to one mapping
        String key= null;
        String value="Lumia";
        for(Map.Entry entry: table.entrySet()){
            if(value.equals(entry.getValue())){
                key = entry.getKey();
                break; //breaking because its one to one map
            }
        }
        System.out.println("got key from value in hashtable key:  "+ key +" value: " + value);

//finding key corresponding to value in hashtable - one to many mapping
        table.put("HTC", "Lumia");
        Set keys = new HashSet();

        for(Map.Entry entry: table.entrySet()){
            if(value.equals(entry.getValue())){
                keys.add(entry.getKey()); //no break, looping entire hashtable
            }
        }
        System.out.println("keys : " + keys +" corresponding to value in hash table:  "+ value); 
```

输出 ：-

```
does hash table has Lumia as value : true
does hash table has Lumia as key : false
got key from value in hashtable key:  Nokia value: Lumia
keys : [Nokia, HTC] corresponding to value in hash talbe:  Lumia 
```

现在请告知是否有其他更好的方法来实现相同的目标，请告知是否有其他更好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:09:51.057

这看起来很明显它对我做了什么。我不确定是否有更有效的方法，但也许如果您需要定期查找值以找到键，那么您使用的映射类型是错误的。我建议您将值转换为键并`Map<String, Set<String>>`改为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:09:07.867

如果您的地图同时具有唯一键和值，请考虑使用 Guava 集合中的 BiMap -> [http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)

使用该库，您可以只使用简单`containsKey`和`containsValue`测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:04:23.107

```
Is there  a way to find the key of a particular value in HashTable without iterator??
like String getvalue(key); ??

for(Map.Entry entry: table.entrySet()){
            if(value.equals(entry.getValue())){
                keys.add(entry.getKey()); //no break, looping entire hashtable
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:09:39.920

我不知道这是否是你想要的，但你为什么不反转你的键和值呢？所以，你可以使用

```
table.put("Lumia", new List<String>("HTC", "Nokia")); 
```

如果上面是合法的，那么类似的东西。

# mysql - 如何选择仅具有一个值的行？

> ID：15094988
> 
> 赞同：4
> 
> 时间：2013-02-26T17:03:32.787
> 
> 标签：mysql, select

这是我的桌子的样子：

```
╔══════╦═══════╗
║ USER ║ COLOR ║
╠══════╬═══════╣
║ a    ║ Red   ║
║ b    ║ Blue  ║
║ c    ║ Blue  ║
║ b    ║ Red   ║
║ a    ║ Red   ║
║ c    ║ White ║
╚══════╩═══════╝ 
```

我只需要*只有*颜色=“红色”的行。
它必须返回“a”（“b”也包含值“Blue”）。

如何设置选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:06:18.607

您可以使用：

```
select *
from yourtable t1
where color = 'red'
  and exists (select user
              from yourtable t2
              where t1.user = t2.user
              group by user
              having count(distinct color) = 1) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ecba2/8)

或者没有子查询，您可以使用：

```
select *
from yourtable
group by user
HAVING  SUM(color = 'red') = COUNT(*) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/45fa1/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:07:26.010

尝试他的查询

```
Select * 
from tbl 
where color = 'RED' AND USER not in 
(Select USER from tbl where color <> 'RED'); 
```

# java - 管理 Eclipse RCP 部件的贡献类的良好做法是什么

> ID：15094991
> 
> 赞同：0
> 
> 时间：2013-02-26T17:03:39.263
> 
> 标签：java, annotations, eclipse-rcp, e4

我只是想知道在管理Eclipse RCP 开发中的贡献`Class`时有什么好的做法？`Part`我知道，当`Part`get 关注应用程序时，它会调用`Class`链接到 that 的`Part`，并且`Class`您可以使用诸如`@PostContruct`和之类的注释`@Focus`来指示某些行为。

我想知道的是我是否应该在`Class`每次用户切换时销毁并重新加载它`Parts`？如果我不这样做或者不需要`Class`每次都销毁并重新加载它是不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:36:39.543

DI 框架将为您控制贡献类的生命周期，并在适当时调用带注释的方法。所以你不需要手动销毁它。

看看这个解释零件注释的教程： [http ://www.vogella.com/articles/EclipseRCP/article.html#programmingmodel_annotation](http://www.vogella.com/articles/EclipseRCP/article.html#programmingmodel_annotation)

# jquery - JSON响应和bootstrap-ajax问题

> ID：15094995
> 
> 赞同：0
> 
> 时间：2013-02-26T17:03:58.547
> 
> 标签：jquery, ajax, json, post, twitter-bootstrap

我正在尝试使用此处找到的 bootstrap-ajax 插件，我可能会犯一些非常基本的初学者错误： [bootstrap-ajax](https://github.com/eldarion/bootstrap-ajax/blob/master/README.md)

我有一个非常基本的表单，其中包含一个提交按钮，该按钮应该对外部页面执行 GET 请求，然后从该外部页面的 JSON 响应中更新指定的 div。

```
<div class="done-score" data-refresh-url="ajaxrefreshdiv.php">
Refresh Div
</div>

<div class="done-list">
Append Div
</div>

<a 
href="ajaxrefreshdiv.php" 
class="btn ajax" data-method="GET"
data-append=".done-list"
data-refresh=".done-score"
>

<i class="icon icon-check">
</i>
Done
</a> 
```

在外部 php 页面上，我有以下代码：

```
<?
header('Content-type: application/json');
echo '
        [{"html":"THIS IS MY TEST"}]
     ';
?> 
```

我也尝试过回显：

```
var data = {"html":"This is a test"}; 
```

从我看到的所有示例和教程中，这似乎是正确的响应方式，但字符串没有显示在页面上，微调器也没有停止旋转（就像它仍在等待确认该页面已响应）。但是，刷新 div 确实删除了初始文本并更新为空 div，因此我知道刷新工作正常。

我究竟做错了什么？

# 更新

我已经验证问题肯定是我的 json 响应格式。我能够使用 php 创建一个数组，然后使用 json_encode 回显该数组，并且我的“html”键的值现在显示在 div 中。

```
$data=array(
'html' => '<div class="row-fluid">THIS IS MY TEST</div>'
);
echo json_encode($data)
; 
```

然而，微调器仍在旋转，好像脚本仍在等待某种类型的验证一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:17:55.743

我找到了我的问题的答案。以防万一其他人遇到同样的问题，这里是解决方案：

**div 没有更新或刷新的问题**（至少在这种特殊情况下）是由于 json 响应的格式不正确造成的。

**包含初始按钮或表单消失或微调器持续旋转的 div 问题：** 查看工作示例的源代码后，我意识到您必须发回包含 html 代码的片段数组，以便为​​包含 ajax 按钮的 div 刷新或ajax形式。

# python - 如何使用 python.mechanize 查找执行后 AJAX 页面重定向到的 url？

> ID：15094997
> 
> 赞同：0
> 
> 时间：2013-02-26T17:04:00.750
> 
> 标签：python, mechanize

执行 AJAX 页面代码后，浏览器会打开一个不同的 url（用 指定`window.location.href`）。我如何使用机械化来获取它？

```
import mechanize
response = mechanize.urlopen(url)
return response.geturl() 
```

将返回初始网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:09:24.310

Mechanize 不处理 Javascript。尝试改用[Selenium](https://pypi.python.org/pypi/selenium)

# libspotify - 在 libspotify 中搜索播放列表，似乎无法从结果中获取元数据

> ID：15094999
> 
> 赞同：0
> 
> 时间：2013-02-26T17:04:03.787
> 
> 标签：libspotify

不确定搜索播放列表的正确处理，对艺术家、曲目、专辑没有问题。开发人员资源似乎不包括这一点，当然这是我似乎正在努力解决的部分。

[https://developer.spotify.com/technologies/libspotify/docs/12.1.45/search_8c-example.html](https://developer.spotify.com/technologies/libspotify/docs/12.1.45/search_8c-example.html) 进行搜索但不处理播放列表结果。

search.c 中的 spshell 有此引用，但仅靠名称无济于事，我看到 sp_search_playlist 已注释掉，但未记录在案。我以为它会返回一些我可以传递给 sp_playlist_num_tracks、sp_playlist_name 等的东西。但这似乎不起作用。

```
for (i = 0; i < sp_search_num_playlists(search); ++i) {
    // print some readily available metadata, the rest will
    // be available from the sp_playlist object loaded through
    // sp_search_playlist().
    printf("  Playlist \"%s\"\n", sp_search_playlist_name(search, i));
} 
```

那么如何正确地将搜索播放列表转换为一些元数据和曲目呢？

任何帮助或建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:52:04.220

好的，我似乎已经解决了这个问题。我需要等到 playlist_update_in_progress 并且 done 标志为真才能获取数据。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:39:07.073

我不确定为什么它不在在线文档中，但 sp_search_playlist 记录在 api.h 中：

```
/**
 * Load the playlist at the given index in the given search object
 *
 * @param[in]  search     Search object
 * @param[in]  index      Index of the wanted playlist. Should be in the interval [0, sp_search_num_playlists() - 1]
 *
 * @return                A playlist object. This reference is owned by the caller and should be released with sp_playlist_release()
 */
SP_LIBEXPORT(sp_playlist *) sp_search_playlist(sp_search *search, int index); 
```

请注意，与 API 的许多类似部分不同，它表示调用者拥有引用。

或者，如果您因为文档记录不充分而对使用它感到不舒服，您可以改为从搜索中获取播放列表 URI，从中创建一个链接，然后从该链接创建一个播放列表。