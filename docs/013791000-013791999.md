# StackOverflow 问答 13791000-13791999

# c++ - 如何测试我的 const_reverse 迭代器以匹配参数列表？

> ID：13791001
> 
> 赞同：-1
> 
> 时间：2012-12-09T19:38:08.480
> 
> 标签：c++, iterator, constants

我正在构建自己的通用链表，并且正在尝试测试我的 const 反向迭代器。这就是我想要做的：

```
sorted_list<int> constIteratorList;
int we = 7;
int io = 1;
int pl = 12;
int jk = 4;
int zx = 13;
constIteratorList.add(we);
constIteratorList.add(io);
constIteratorList.add(pl);
constIteratorList.add(jk);
constIteratorList.add(zx);
const sorted_list<int>& reference = constIteratorList
sorted_list<int>::const_reverse_iterator constIt = reference.rbegin(); 
```

但是编译器用红色波浪线突出显示 constIteratorList 并说没有合适的用户定义转换 from `SortedListReverseIterator<int>`to `SortedListReverseIterator<const int>`。我有一个名为 SortedListReverseIterator 的类和一个实现我的迭代器和反向迭代器的 SortedListReverseIterator。我在 sorted_list 类中键入了四种类型的迭代器——const_reverse_iterator、reverse_iterator、iterator 和 const_iterator。

编辑：我现在尝试在 constIteratorList 的 const 引用上调用 rbegin()，但现在在我的排序列表调用中，它说我无法从`Node<T> * const`to转换为`SortedListReverseIterator<T>`.

这是我对 rbegin() 的实现：

```
template <typename T>  
SortedListReverseIterator<const T> sorted_list<T>::rbegin() const  
{  
    return SortedListReverseIterator<const T>(tail);
} 
```

我认为错误消息试图说的是 SortedListReverseIterator 的构造函数不接受 const T，所以我尝试为 const T 创建另一个复制构造函数，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:03:33.260

constIteratorList 未声明为 const，因此不会使用 rbegin 的 const 版本（假设它已被定义）。一个可能的解决方法是创建一个对列表的 const 引用，然后在其上调用 rbegin。

# c++ - 向量的唯一（）向量c ++

> ID：13791003
> 
> 赞同：-3
> 
> 时间：2012-12-09T19:38:11.993
> 
> 标签：c++, vector, unique

> **可能重复：**
> [在 C++ 中的向量向量上使用“unique()”](https://stackoverflow.com/questions/3773015/using-unique-on-a-vector-of-vectors-in-c)

我正在尝试对向量上的向量使用唯一算法。

我面临的错误是“独特的不能用作函数”

问题是即使使用 int 的法线向量，我也无法使用命令 unique()。

我正在尝试做的事情是擦除向量中的每个重复向量。

所以：

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

void resettaPuntatore(int puntatore, int lunghezza)
{
    puntatore = lunghezza;
}

int main()
{
    vector<int> v_main;
    vector<int> v_reverse;
    vector<vector<int> > v_contenitore;
    string parola;
    int lunghezza_parola;
    int puntatore;

    cout << "Inserire la parola da permutare.\n";
    cin >> parola;

    lunghezza_parola = parola.length();
    puntatore = lunghezza_parola-1;

    for(int i = 0; i < lunghezza_parola; i++)
    {
        v_main.push_back(i+1);
    }

    for(int i = 0; i < lunghezza_parola; i++)
    {
        v_reverse.push_back(v_main[lunghezza_parola-1-i]);
    }

    while(v_main != v_reverse)
    {
        v_main[puntatore]++;
        if(v_main[puntatore] > lunghezza_parola)
        {
            v_main[puntatore] = 1;
            puntatore--;
        }
        else
        {
            resettaPuntatore(puntatore, lunghezza_parola);
        }
        v_contenitore.push_back(v_main);
    }
    vector<vector<int> >::iterator itr = unique(v_main.begin(), v_main.end());

} 
```

然后我会擦除从 itr 到向量末尾的所有其他项目

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:54:29.477

要么你没有正确的包含，要么你错过了`std::`某个地方。这个例子编译得很好：

```
#include <algorithm>
#include <vector>

int main()
{
  using std::vector;
  using std::unique;
  vector<vector<int> > v_main;
  v_main.push_back(vector<int>(10));
  v_main.push_back(vector<int>(10, 5));
  v_main.push_back(vector<int>(10, 6));
  vector<vector<int> >::iterator itr = unique(v_main.begin(), v_main.end());
} 
```

# c# - 无法使用 ContentTypeReader 加载模型

> ID：13791010
> 
> 赞同：2
> 
> 时间：2012-12-09T19:39:07.333
> 
> 标签：c#, asp.net, xna, xna-4.0

我正在编写一个我想使用 ContentTypeReader 的游戏。像这样加载我的模型时：

```
terrain = Content.Load<Model>("Text/terrain"); 
```

我收到以下错误：

```
Error loading "Text\terrain". Cannot find ContentTypeReader
AdventureGame.World.HeightMapInfoReader,AdventureGame,Version=1.0.0.0,Culture=neutral. 
```

我读过这种错误可能是由程序集名称中的空格引起的，所以我已经将它们全部删除了，但仍然会发生异常。

这是我的内容类：

```
[ContentTypeWriter]
public class HeightMapInfoWriter : ContentTypeWriter<HeightmapInfo>
{
    protected override void Write(ContentWriter output, HeightmapInfo value)
    {
        output.Write(value.getTerrainScale);
        output.Write(value.getHeight.GetLength(0));
        output.Write(value.getHeight.GetLength(1));

        foreach (float height in value.getHeight)
        {
            output.Write(height);
        }       
    }

    public override string GetRuntimeType(TargetPlatform targetPlatform)
    {
        return
            "AdventureGame.World.Heightmap,AdventureGame,Version=1.0.0.0,Culture=neutral";
    }

    public override string GetRuntimeReader(TargetPlatform targetPlatform)
    {
        return
        "AdventureGame.World.HeightMapInfoReader,AdventureGame,Version=1.0.0.0,Culture=neutral";        
    }
} 
```

以前有没有人遇到过这种错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:57:59.943

我已经遇到同样的问题一周了，最后决定对整个“装配”部分进行快速检查。

我找到了解决办法！

本质上，当您进入 AssemblyInfo.cs 时，您将看到所有属性（即标题、描述等）

遗憾的是，由 XNA 制作的标题并不是您的运行时读者所指的。它实际上获得了项目的初始名称，它使用它来追踪您项目中的应用程序 (exe) 文件。尝试从头开始重新制作您的项目，确保**您的命名空间与您的项目相同并且永远不要更改它**，或者尝试重新**命名您的 exe 文件，在您的项目的 debug/obj 文件夹中找到（我相信）**。希望我有帮助！

-将要

# ruby-on-rails - 使用 Rails 构建 Mongo 查询？如何？

> ID：13791012
> 
> 赞同：1
> 
> 时间：2012-12-09T19:39:14.923
> 
> 标签：ruby-on-rails, ruby, mongodb

这就是我开始查询一个特定元素的方式。

```
results << read_db.collection("users").find(:created_at => {:$gt => initial_date}).to_a 
```

现在，我试图查询不止一个。

```
db.inventory.find({ $and: [ { price: 1.99 }, { qty: { $lt: 20 } }, { sale: true } ] } ) 
```

现在我如何建立我的查询？基本上我会有一堆 if 语句，如果是真的，我想扩展我的查询。我听说在另一种语言中有一个 .extend 命令，在 ruby​​ 中有类似的东西吗？

基本上我想这样做：

```
if price
query = "{ price: 1.99 }"
end

if qty
query = query + "{ qty: { $lt: 20 } }"
end 
```

而不仅仅是拥有

```
 db.inventory.find({ $and: [query]}) 
```

这种语法是错误的，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:13:49.583

你想得到这样的结果：

```
db.inventory.find({ :$and => some_array_of_mongodb_queries}) 
```

请注意，我已切换到 hashrocket 语法，您不能将 JavaScript 表示法与不是标签的符号一起使用。的值`:$and`应该是单个查询的数组，而不是字符串数组；所以你应该建立一个数组：

```
parts = [ ]
parts.push(:price => 1.99)         if(price)
query.push(:qty => { :$lt => 20 }) if(qty)
#...
db.inventory.find(:$and => parts) 
```

顺便说一句，您可能会遇到一些浮点问题`:price => 1.99`，您可能应该为此使用整数并以美分而不是美元工作。某种`parts`非空的支票也可能是个好主意。

# css - HTML5占位符文本在Safari中添加宽度导致滚动条和闪烁

> ID：13791013
> 
> 赞同：9
> 
> 时间：2012-12-09T19:39:28.387
> 
> 标签：css, html

在 Safari 和 Chrome 中，该`placeholder`属性似乎增加了不可见的宽度，当窗口水平调整大小时，会导致水平滚动条和类似闪烁的渲染。

`overflow: hidden;`可以应用于父元素来抑制问题。但是，它剪辑了我的表单域焦点效果。

有没有办法使用某些供应商前缀值来防止这种情况，例如`::-webkit-input-placeholder {}`或其他方式？

将属性添加到表单输入时，水平滚动条会在 webkit 浏览器上水平调整大小时闪烁。具体来说，是什么风格触发了这种行为？以及如何防止或覆盖这种行为！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T16:29:40.620

我在 Chrome 和 Safari 中查看了您的网站，但似乎没有您提到的问题。但是，您的顶部图像溢出到顶部，因为您将溢出设置为隐藏并且您没有为标题设置上边距。因此，我继续创建了该边距：

```
 #header img {
  margin-top: 50px;
 } 
```

这解决了问题。我希望我可以发布一张图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T05:14:40.400

许多输入元素具有默认填充。当您声明时`width: 100%`，它会导致元素宽度为 100% + 填充。为了防止填充增加宽度，只需使用`box-sizing: border-box;`

# java - Java中的一些斐波那契乐趣

> ID：13791014
> 
> 赞同：0
> 
> 时间：2012-12-09T19:39:28.950
> 
> 标签：java, fibonacci

我在 Java 简介书中遇到了一个问题。情况如下：用户必须输入一个数字，然后我必须找到该数字的斐波那契。我得到了这个列出数字的方程式（见代码）。虽然是的，但我得到了这个工作，但我想知道如何从中计算我的斐波那契。哦，顺便说一句，“记事本++”因为没有“公共静态无效主（字符串[] args）”而对我大喊大叫。有解决办法吗？

```
public class Fibonacci
{
public static void main(String[] args)
{

}

public int Fib(int n)
{
    FibonacciJDialog userInput =  new FibonacciJDialog();
    int in1=1,in2=1;
    int sum=1;//initial value
    int index;

    index = userInput.getUserInput();

    while (index <= n)
    {
        sum = in1+in2;// sum=the sum of 2 values;
        in1=in2;// in1 gets in2
        in2 = sum;// in2 gets sum
        index++;// increment index
    }
    return sum;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T19:42:28.790

唯一的“解决方法”是添加一个 main()。这是启动 Java 程序的唯一方法

顺便说一句，我会使用为 Java 设计的 IDE，例如 Netbeans、Eclipse 或 IntelliJ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:51:05.127

我不确定你得到什么答案，但你应该考虑在主函数中执行用户输入部分，然后将其作为 n 传递给函数。然后，在 fib 函数中，您可以从 0 循环到 n，而不是索引到 n。虽然，这取决于问题的性质。例如，如果 1 和 1 是序列的前两个数字，并且您想要返回索引 n 处的斐波那契数，那么您应该从索引 3 开始（因为 sum 将是 1+1 = 2，这是第三个数字在序列中）。然后你可以循环直到你到达n。

# java - 使用 ubuntu 的 oracle 自解压安装程序时 Java 不可见

> ID：13791021
> 
> 赞同：0
> 
> 时间：2012-12-09T19:40:42.150
> 
> 标签：java, linux, ubuntu, installation

我想在 ubuntu 中为所有使用 oracles 网站 (jdk-6u37-linux-x64.bin) 上的自解压安装程序的用户安装 oracle jdk 6

这是我一步一步做的：

**1-**下载 jdk-6u37-linux-x64.bin

**2-**在unix系统资源中创建一个文件夹并将下载的文件移动到那里

> sudo mkdir -p /usr/local/java
> 
> sudo mv /home/sfrj/Downloads/jdk-6u37-linux-x64.bin /usr/local/java

**3-**使文件可执行

> sudo chmod 700 jdk-6u37-linux-x64.bin

**4.**执行安装程序

> 须藤 ./jdk-6u37-linux-x64.bin

**5.**删除安装程序（不再需要它）

> sudo rm jdk-6u37-linux-x64.bin

**6.**创建符号链接

> sudo ln -s jdk1.6.0_37 /usr/local/java/latest

**7.**编辑文件 /etc/environment

```
JAVA_HOME="/usr/local/java/jdk1.6.0_37"
JRE_HOME="/usr/local/java/jdk1.6.0_37/jre"
PATH="/usr/local/java/jdk1.6.0_37/bin:\/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games" 
```

**8.**重新加载环境文件

> 源 /etc/环境

到目前为止一切顺利，毕竟在没有关闭终端的情况下我输入：***java -version*** 我看到了这个：

> java 版本“1.6.0_37”Java(TM) SE 运行时环境（构建 1.6.0_37-b06）Java HotSpot(TM) 64 位服务器 VM（构建 20.12-b01，混合模式）

问题是，当关闭终端时，再次打开它并再次键入命令**java -version**，我看到了：

```
The program 'java' can be found in the following packages:
 * default-jre
 * gcj-4.6-jre-headless
 * gcj-4.7-jre-headless
 * openjdk-7-jre-headless
 * openjdk-6-jre-headless
Try: sudo apt-get install <selected package> 
```

我很困惑：

-为什么是这样？

-我是否正确安装了jdk？

-什么不见了？

我想以这种方式安装它，而不使用apt-get，所以请不要回答我使用apt-get install ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:18:08.917

这是我的在线指南。有一些差异，它对我有用。

[JDK 安装 - Ubuntu](http://pabloabbate.blogspot.com.ar/2012/12/jdk-installation-ubuntu-distribution.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T19:53:12.940

> -为什么是这样？

您没有以自动重新加载的方式设置路径。

> -我是否正确安装了jdk？

有两种安装方法。对于自解包版本，这是正确的。

> -什么不见了？

您的环境设置不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:02:41.780

Debian 风格的 linux 发行版具有解决此类问题的替代机制。它们将 /usr/bin/java 链接到 /etc/java，后者又链接到正确的二进制文件。

```
sudo update-alternatives --install /usr/bin/java java /usr/local/java/jdk1.6.0_37/bin/java 1
sudo update-alternatives --install /usr/bin/javac javac /usr/local/java/jdk1.6.0_37/bin/javac 1
sudo update-alternatives --install /usr/bin/javaws java /usr/local/java/jdk1.6.0_37/bin/javaws" 1
sudo update-alternatives --install /usr/bin/jar jar /usr/local/java/jdk1.6.0_37/bin/jar 1
sudo update-alternatives --config java
sudo update-alternatives --config javac
sudo update-alternatives --config jar
sudo update-alternatives --config javaws 
```

您可能希望对 wsimport 等其他命令重复此操作。看看[https://help.ubuntu.com/community/Java](https://help.ubuntu.com/community/Java)。还列出了其他选项，例如使用 PPA，但如果您严格不想使用 apt-get，这不是一个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T23:03:02.350

[这些脚本](https://github.com/flexiondotorg/oab-java6)将帮助您在 Ubuntu 上安装 sun 的 jdk。效果很好。

# php - 自动完成概念

> ID：13791022
> 
> 赞同：0
> 
> 时间：2012-12-09T19:40:44.080
> 
> 标签：php, jquery, autocomplete

我正在用 PHP、SQL 和 JQuery 为我的网站编写搜索引擎。我有使用数据库中现有数据添加自动完成功能的经验（即搜索文章标题）。但是，如果我想使用用户键入的最常见的搜索查询，类似于 Google 的搜索查询，而没有太多用户参与数据的创建（最常见的查询），该怎么办？是否有某种带有自动完成数据的开源 SQL 表或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:46:30.893

1.  截至目前，使用您拥有的静态数据进行自动完成。
2.  在您的数据库中创建另一个表来存储实际的用户查询。表的模式可以`<queryID, query, count>`是每次其他用户 [Kind of Rank] 提供相同查询时计数增加的地方。N-Gram 索引（这样当人们只输入“United”时，您也可以自动完成类似“Manchester United”之类的内容，即不仅仅是使用起始字符串）查询并在使用 count 排序后简单地返回前 N 个。
3.  当您的用户群开始增加时，上表将逐渐改进。
4.  还有一件事，完成任务的算法非常简单。然而，真正的挑战在于在几秒钟内返回要显示的数据。因此，当您的查询数据库/存储大小增加时，您可以使用像 Solr/Sphinx 这样的搜索引擎来搜索您，这将很快返回要呈现的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:53:06.653

谷歌有（并且有）数千个条目，这些条目是根据（日期、时间、地理位置、语言......）排列的，并且随着用户条目的增加而增加，每当用户输入一个单词时，系统都会检查“大部分使用过的词属于那个位置+天+时间”+（如果没有答案）然后是“一般词”。因此，您应该对用户输入的每个单词进行分类，或者制作您数据库的通用单词关系表，其中将引用最合适的搜索答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:31:03.113

昨天我偶然发现了一些回答我问题的东西。Google 会从此 XML 文件中提取自动完成建议，因此如果您的用户很少使用关键字创建自己的数据库，那么使用它是明智的：

```
http://google.com/complete/search?q=[keyword]&output=toolbar 
```

只需将 [keyword] 替换为某个单词即可给出有关该单词的建议，然后任务只是解析返回的 xml 并格式化输出以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T19:48:41.267

![Lucene](../Images/c4526d06154adaeb87978b29547e8a6a.png)您可以使用 Lucene 搜索引擎来实现此功能。请参阅此[链接](http://www.mediawiki.org/wiki/Manual:Enabling_autocomplete_in_search_box)

或者你也可以看看 Lucene Solr Autocomplete...

# cassandra - Cassandra 查询执行时间计算

> ID：13791023
> 
> 赞同：2
> 
> 时间：2012-12-09T19:40:50.647
> 
> 标签：cassandra, execution-time

有没有办法使用 cql 或 cli 在 Cassandra 1.1 中计算查询执行时间？还有其他方法吗？我找不到任何解决方案。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-03T11:54:31.567

您可以[在 cqlsh 中使用跟踪](http://www.datastax.com/dev/blog/tracing-in-cassandra-1-2)。它为查询的每个阶段提供时间戳，精度为毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:20:25.443

如果您想分析 Cassandra 中的查询执行时间/读取性能，您会发现以下统计数据很有帮助。

1）**nodetool cfstats：** 它提供关于参数数量的统计信息，其中一个是读取延迟。

2）**Cassandra Cli：**当您使用 cassandra-cli 查询 cassandra 时，它会显示“以毫秒为单位的经过时间”（不确定这是否是确切的时间，但相比之下它可能会有所帮助）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-22T16:29:02.650

对 linux 使用这个命令：

`cqlsh> TRACING ON`

您可以从此链接阅读更多信息： [https ://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlshTracing.html](https://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlshTracing.html)

# php - 交叉引用 MySQL 条目

> ID：13791025
> 
> 赞同：1
> 
> 时间：2012-12-09T19:40:58.617
> 
> 标签：php, mysql

这是我第一次使用这个地方，如果我在这里完全愚蠢，请原谅我。

基本上，我正在编写一个系统，其中用户 A 为机构注册服务，接收该机构成员的验证码，然后作为该机构的一部分的用户 B 输入唯一验证码进行注册。

注册用户 A 的代码有效——它分配了一个唯一的自动递增 ID（数据库中的 sid 或 uid）和一个随机验证码（验证）——我对此感到满意（除了安全问题，但我需要学习如何处理这些）。

我的问题是，每当有人尝试注册为用户 B 并使用验证码时，系统都会拒绝它，并说验证码与该特定 sid 下的验证码不匹配。我感觉这与我用来查找验证 ID 的代码有关，但我不知道我哪里出错了。

当前代码：

```
$getsid = mysql_query(
"SELECT *
FROM schools
WHERE uid='$sid'");

while($row = mysql_fetch_array($getsid)) {
    $origver = $row['verification'];
    }

if ($pwd != $conf) {
        header('Location: register.php?error=1');
    }
elseif ($ver != $origver) {
    header('Location: register.php?error=2');
    }
else { 
```

仅供参考，`$ver`是用户 B 输入的验证号，用于匹配`$origver`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:19:15.390

看来您必须添加一些调试语句才能查看发生了什么

```
var_dump($sid);
$getsid = mysql_query(
"SELECT *
FROM schools
WHERE uid='$sid'");

while($row = mysql_fetch_array($getsid)) {
    var_dump($row);
    $origver = $row['verification'];
}

var_dump($pwd, $conf);
if ($pwd != $conf) {
        header('Location: register.php?error=1'); 
```

# python - 在 Django 中安装 South 导致 500 错误

> ID：13791029
> 
> 赞同：0
> 
> 时间：2012-12-09T19:41:26.607
> 
> 标签：python, django, django-south

我正在尝试在 Django 中安装 South。我正在做相对简单的步骤。

我在使用 Virtualenv 的虚拟环境中运行 Dreamhost（它使用Passenger WSGI）。虚拟环境使用 Python 2.7.3 和 Django 1.4.2。

首先，我在具有 manage.py 文件 easy_install South 的同一目录中进行了操作。(v 0.7.6-py2.7)

然后我进入我唯一的settings.py，使INSTALLED_APPS看起来像这样：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'blog',
    'South', # i tried lowercase 's' here too, no difference
) 
```

然后我运行 pkill pyton 进行更改。我刷新了我的网站，并收到 500 内部服务器错误。如果我从 INSTALLED_APPS 中删除 'South' 并 pkill python 并再次刷新，错误就会消失。

我可以使用 South 工具来执行迁移和所有这些工作。一切都在终端中运行。就在我在浏览器中加载网站时，我收到 500 错误。从已安装的应用程序中删除南可以消除错误。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:10:47.330

所以我能够让它工作。这是一个奇怪的修复，但它有效。

我曾经`easy_install`安装过South，它把它放在以下目录中：

```
/env/lib/python2.7/site-packages/South-0.7.6-py2.7.egg 
```

如果你打开那个 egg 文件夹，你会看到另一个名为`south`.

我所做的只是将该`south`文件夹上移一个目录，在`site-packages`.

而已。之后它才开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:44:53.220

要调试它，首先在 Django 设置中打开 debug=True 。

南也是具有较低s的“南”。

要检查它是否正常工作，你可以做

```
./manage.py shell
>> import south 
```

这样你会得到一个错误的python shell，你会看到发生了什么。

# arrays - 在可观察数组的切片上计算的淘汰赛，这可能吗

> ID：13791032
> 
> 赞同：0
> 
> 时间：2012-12-09T19:41:28.463
> 
> 标签：arrays, knockout.js, slice, computed-observable

我正在尝试提供一种机制来编辑可观察数组中的条目。显示器将有两个部分。第一个是显示有限数量字段的数组条目，第二个将允许用户编辑所选条目的所有字段。

为此，我为数组的每个显示条目提供了一个双击事件，该事件将使用索引和计算出的 observable 来选择数组的一个切片。希望我可以使用这种方法来编辑数组条目。

问题是计算似乎不起作用，我找不到可以满足我要求的方法。我创建了一个小提琴，说明我很抱歉尝试完成这项工作

[http://jsfiddle.net/rscidmore/YrsCj/](http://jsfiddle.net/rscidmore/YrsCj/)

您的帮助将不胜感激。

我的代码如下所示：

```
var contactModel = function() {
  var self = this;
  self.id = ko.observable();
  self.name = ko.observable();
  self.addresses= ko.observableArray();
  self.selectIndex = ko.observable(0);
  self.selectedAddress = ko.computed(function() {
    return self.addresses.slice(self.selectIndex ());
  });  
};
var addressModel = function(id, type, address) {
  var self = this;
  self.id       = ko.observable(id);
  self.type     = ko.observable(type);
  self.address  = ko.observable(address);
};

var contact = new contactModel();
contact.id = 1;
contact.name = 'John Smith';
var addr = new addressModel('1', 'billing', '123 Your Street')
contact.addresses.push(addr);
addr = new addressModel('2', 'shipping', 'ABC Your Avenue')
contact.addresses.push(addr);
addr = new addressModel('3', 'home', 'XYZ Your Drive')
contact.addresses.push(addr);

ko.applyBindings(contact); 
```

我的 html 看起来像这样：

```
<!DOCTYPE html>
<html>
  <head>
  </head>
  <body class='ui-widget'>
    <div class='contactInfo'>
      <span class='id' data-bind="text: id"></span>  :
      <span class='dat1' data-bind="text: name"></span>   
    </div>
    <div class='container'>
       <!-- ko foreach: addresses -->       
         <div class='addrs' data-bind="event: { dblclick: function() {
           $parent.selectIndex($index());}}">
           <span class='id' data-bind="text: id"></span>  :
           <span class='dat1' data-bind="text: type"></span>
           <span class='dat2' data-bind="text: address"></span>
         </div>
       <!-- /ko -->
    </div>
    <div class='contactInfo'>
      <span class='id' data-bind="text: selectIndex"></span>  :
      <input class='dat2' type='text' data-bind="value: selectedAddress.address" />  
    </div>      
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:01:18.467

通常，您想要做的是将您的“选定”项目表示为可观察的。通过`event`/`click`绑定连接的处理程序接收当前数据项作为第一个参数。这可用于直接填充您的“选定”可观察对象。

所以，它会像：

```
var ContactModel = function() {
  this.id = ko.observable();
  this.name = ko.observable();
  this.addresses= ko.observableArray();
  this.selectedAddress = ko.observable();    
}; 
```

然后，您可以像这样绑定它：

```
<div class='container'> 
   <!-- ko foreach: addresses -->       
     <div class='addrs' data-bind="event: { dblclick: $parent.selectedAddress }">
       <span class='id' data-bind="text: id"></span>  :
       <span class='dat1' data-bind="text: type"></span>
       <span class='dat2' data-bind="text: address"></span>
     </div>
   <!-- /ko -->
</div> 
```

请注意，您可以在联系人模型上创建一个名为“selectAddress”的函数，并`selectedAddress`使用作为第一个参数传递的项目进行填充。然而，由于 observable 已经是一个函数并使用传递给它的第一个参数填充它的值，所以在上面的示例中，我`dblclick`直接绑定到 observable。

示例：http: [//jsfiddle.net/rniemeyer/2DmUf/](http://jsfiddle.net/rniemeyer/2DmUf/)

使用函数进行示例，而不是直接绑定到此处的可观察对象：http: [//jsfiddle.net/rniemeyer/mDKGV/](http://jsfiddle.net/rniemeyer/mDKGV/)（只是为了帮助说明）

与“选定”可观察对象有关的一件方便的事情是`with`在区域周围使用绑定，因此每当您更改为新的选定项目时它都会重新渲染，并在该项目为空时提供保护。

```
<div class='contactInfo' data-bind="with: selectedAddress">
  <input class='dat2' type='text' data-bind="value: address" />  
</div> 
```

# angularjs - angular.js 表格过滤

> ID：13791036
> 
> 赞同：0
> 
> 时间：2012-12-09T19:42:11.520
> 
> 标签：angularjs

我试图在每列的顶部创建一个带有过滤器的表。

我无法弄清楚为什么 Any 过滤器正在工作，而不是单个列过滤器。

我有代码@http: [//plnkr.co/edit/6ghH02](http://plnkr.co/edit/6ghH02)

我也尝试在设置 ng-model 后编译元素，但它不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:18:42.053

如果您摆脱指令并使用 input[text] 的 ng-change 属性，则可以执行此操作，如下所示：

```
function TestController ($scope) {
    $scope.valueChanged = function (name, value) { 
        if (!$scope.search) {
            $scope.search = {};
        }
        $scope.search[name] = value;
    }
};

<body ng-controller="TestController">

<th ng-repeat="sortName in columnNames">
    <input type=text ng-model="value" ng-change="valueChanged(sortName, value)">
</th> 
```

关于为什么您的原始代码不起作用的简短答案是[ngRepeat 创建了一个新范围](http://docs.angularjs.org/api/ng.directive%3angRepeat)，并且 ng-model 中的值必须是一个可分配的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:27:26.710

正如@Ryan 指出的那样，ng-repeat 的嵌套范围是诀窍。编写控制器方法的另一种方法是使用子作用域的 $parent 属性来访问父作用域中的搜索属性：

```
<th ng-repeat="sortName in columnNames">
   <input type=text ng-model="$parent.search[sortName]"></th> 
```

与@Ryan 的解决方案一样，不需要指令。但是，需要创建/初始化其他搜索属性：

```
<div ng-init="search.name = ''; search.phone = ''"></div> 
```

[http://plnkr.co/edit/wT34vh?p=preview](http://plnkr.co/edit/wT34vh?p=preview)

# ios - iOS PullToRefreshView，添加 didFinishRefreshing 方法

> ID：13791038
> 
> 赞同：0
> 
> 时间：2012-12-09T19:42:26.013
> 
> 标签：ios, uitableview, uiview

我正在使用 Grant Paul 的 PullToRefreshView，我想知道是否可以在代码中添加一个 didFinishRefreshing 方法，以便在它完成它的事情时调用几个事件。我该怎么做呢？

这是您调用以停止刷新过程的代码：

```
- (void)finishedLoading {
    if (state == PullToRefreshViewStateLoading) {
        [UIView animateWithDuration:0.3f animations:^{
            [self setState:PullToRefreshViewStateNormal];
        }];
    }
} 
```

但我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:58:35.903

尝试`pullToRefreshViewShouldRefresh`像这样实现该方法：

```
- (void)pullToRefreshViewShouldRefresh:(PullToRefreshView *)view
{
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //refresh data source here

        dispatch_async(dispatch_get_main_queue(), ^(void) {
            //Code here is run when the above is complete
            [self.tableView reloadData];
            [self.pullView finishedLoading];
            //Perform any additional tasks here
        });
    });
} 
```

`pullView`你的`PullToRefreshView`实例在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:11:15.160

虽然我喜欢 sooper 的回答，但在更复杂的情况下（例如，您有不同的视图控制器希望被告知可能已经在进行的后台更新），您可以使用[通知](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)。因此，

*   任何需要了解完成的视图控制器（或任何对象）都可以通过[`addObserver`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-CHDCIGGB)或 via注册通知[`addObserverForName`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-SW1)；

*   该通知的选择器/块可以执行您需要的刷新指示器的任何结束；

*   如果视图不再需要接收通知（例如，您正在关闭它，或其他），您可以执行[`removeObserver`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-CHDBABDE)；和

*   然后，更新过程可以[`postNotificationName`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-CHDBAFID)在更新完成时执行，允许观察者执行任何适当的 UI 更新。

这对于简单的情况来说是多余的，但对于更复杂的情况来说，它是一个有用的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:03:36.760

拉动刷新只是视觉上的事情。当然，您有一个“刷新”事物的方法，然后在完成后调用“finishedLoading”？你不能使用完成你的刷新方法来做你需要的事情吗？

# javascript - 我无法使用 ge 插件加载 kml 文件以移动到最后一个纬度/经度

> ID：13791042
> 
> 赞同：2
> 
> 时间：2012-12-09T19:42:54.953
> 
> 标签：javascript, geospatial, google-earth-plugin

我有一个网页加载了一个 kml 文件，以便使用 Google Earth ge 插件查看。文件加载并显示正常。但是，我可以让插件移动到文件末尾的纬度/经度。负载始终将相机留在与 kml 文件的终点相对应的纬度/经度。

这是代码：

```
var ge;

google.load("earth", "1");
google.load("maps", "2");

function init() {
  google.earth.createInstance('map3d', initCallback, failureCallback);
}

function initCallback(instance) {
  ge = instance;
  ge.getWindow().setVisibility(true);
  ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);
  ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, true);
  ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, true);
  ge.getOptions().setFlyToSpeed(ge.SPEED_TELEPORT);

  var url = 'http://rallyroadie.org/wordpress/ge/vladi_finish.kml';
  google.earth.fetchKml(ge, url, finished);
}

function finished(object) {
  if (!object) {
    setTimeout(function() {
      alert('Bad or null KML.');
    }, 0);
    return;
  }
  ge.getFeatures().appendChild(object);

  var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);

  // Set new latitude and longitude values.
  lookAt.setLatitude(43.023157);
  lookAt.setLongitude(131.853040);

  // Update the view in Google Earth.
  ge.getView().setAbstractView(lookAt);
}

function failureCallback(errorCode) {
}

google.setOnLoadCallback(init); 
```

[您可以在http://rallyroadie.org/wordpress/ge/vladi.html](http://rallyroadie.org/wordpress/ge/vladi.html)看到该页面

TIA，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:14:25.713

您想知道如何设置初始视图吗？如果是这样：

您当前正在使用此代码进行设置 -

```
 var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);

  // Set new latitude and longitude values.
  lookAt.setLatitude(43.023157);
  lookAt.setLongitude(131.853040);

  // Update the view in Google Earth.
  ge.getView().setAbstractView(lookAt); 
```

尝试使用不同的纬度和经度数字，您会看到差异。您还可以使用诸如lookAt.setRange、lookAt.setTilt 和lookAt.setAltitude 之类的东西

有关详细信息，请参阅[此链接](https://developers.google.com/earth/documentation/camera_control)

它与您加载的 .kml 文件无关。

# scheme - 计划素数

> ID：13791047
> 
> 赞同：2
> 
> 时间：2012-12-09T19:44:06.220
> 
> 标签：scheme, primes

这可能是一个基本的问题，但我在使用 Scheme 编写的程序时遇到了麻烦。该过程应返回小于或等于 N 的所有素数（N 来自输入）。

```
(define (isPrimeHelper x k)
  (if (= x k) #t
  (if (= (remainder x k) 0) #f
      (isPrimeHelper x (+ k 1)))))

(define ( isPrime x )
    (cond
      (( = x 1 ) #t)
      (( = x 2 ) #t)
      ( else (isPrimeHelper x 2 ) )))

(define (printPrimesUpTo n)
    (define result '())
    (define (helper x)
        (if (= x (+ 1 n)) result
        (if (isPrime x) (cons x result) ))
        ( helper (+ x 1)))
    ( helper 1 )) 
```

我对主要作品的检查，但该功能`printPrimesUpTo`似乎永远循环。基本上这个想法是检查一个数字是否是素数并将其放入结果列表中。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:40:52.597

您有几处错误，并且您的代码非常不习惯。首先，数字 1 不是素数；事实上，它既不是素数也不是合数。其次，`result`变量并没有像你想象的那样做。第三，你的使用`if`到处都是不正确的；`if`是一个表达式，而不是一些其他编程语言中的语句。而且，作为一种风格，右括号堆叠在行尾，并且不占用自己的一行。你需要和你的教授或助教谈谈，以澄清对 Scheme 的一些基本误解。

找到小于*n*的素数的最佳算法是埃拉托色尼筛法，大约 22 世纪前由一位希腊数学家发明，他发明了闰日和经纬度系统，精确测量了地球的周长和距离从地球到太阳，是亚历山大托勒密图书馆的首席图书管理员。这是他算法的一个简单版本：

```
(define (primes n)
  (let ((bits (make-vector (+ n 1) #t)))
    (let loop ((p 2) (ps '()))
      (cond ((< n p) (reverse ps))
            ((vector-ref bits p)
              (do ((i (+ p p) (+ i p))) ((< n i))
                (vector-set! bits i #f))
              (loop (+ p 1) (cons p ps)))
            (else (loop (+ p 1) ps)))))) 
```

调用 as `(primes 50)`，返回列表`(2 3 5 7 11 13 17 19 23 29 31 37 41 43 47)`。正如您尝试做的那样，它比通过试除法测试素数要快得多。如果必须，这里有一个适当的素数检查器：

```
(define (prime? n)
  (let loop ((d 2))
    (cond ((< n (* d d)) #t)
          ((zero? (modulo n d)) #f)
          (else (loop (+ d 1)))))) 
```

两种算法都可以进行改进。如果你有兴趣，我谦虚地在我的博客上推荐这篇[文章。](http://programmingpraxis.com/essays)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T19:49:54.127

`(if)`您函数中的`(helper)`表达式不是函数的尾部表达式，因此不会返回，但控制将始终继续`(helper (+ x 1))`并递归。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T16:41:51.987

首先，用缩进来表达嵌套结构是一种很好的风格，所以*视觉上很明显；*并且还要将`if`'s 的每个子句，即*consequent*和 the *alternative*，放在它自己的行上：

```
(define (isPrimeHelper x k)
  (if (= x k) 
      #t                           ; consequent
      (if (= (remainder x k) 0)    ; alternative
  ;; ^^ indentation
          #f                               ; consequent
          (isPrimeHelper x (+ k 1)))))     ; alternative

(define (printPrimesUpTo n)
    (define result '())
    (define (helper x)
        (if (= x (+ 1 n)) 
            result                  ; consequent
            (if (isPrime x)         ; alternative
                (cons x result) ))         ; no alternative!
        ;; ^^ indentation
        ( helper (+ x 1)))
    ( helper 1 )) 
```

现在可以清楚地看到，您的函数所做的最后一件事就是始终使用递增的值`helper`调用自身。`x`没有停止条件，即这是一个无限循环。

另一件事是，调用`(cons x result)`不会`result`以任何方式改变 ' 值。为此，您需要设置它，如下所示`(set! result (cons x result))`：您还需要将此表达式放在一个`begin`组中，因为它不是根据其值进行评估，而是根据其[*副作用*](http://en.wikipedia.org/wiki/Side_effect_(computer_science))进行评估：

```
 (define (helper x)
        (if (= x (+ 1 n)) 
            result        
            (begin 
                (if (isPrime x) 
                    (set! result (cons x result)) )   ; no alternative!
                (helper (+ x 1)) ))) 
```

通常，显式使用`set!`被认为是不好的风格。表达循环的一种标准方法是使用*命名 let的*[尾递归](http://en.wikipedia.org/wiki/Tail_call)代码，通常使用规范名称“ ”（但它可以是任何名称）：*`loop`*

 *```
(define (primesUpTo n) 
  (let loop ((x n) 
             (result '())) 
    (cond 
      ((<= x 1) result)      ; return the result
      ((isPrime x) 
            (loop (- x 1) (cons x result)))   ; alter the result being built
      (else (loop (- x 1) result)))))         ; go on with the same result 
```

在存在[尾调用优化](http://en.wikipedia.org/wiki/Tail_call)的情况下，它实际上等同于以前的版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-22T23:50:33.103

更有效`prime?`的（来自 Sedgewick 的“算法”）：

```
(define (prime? n)
  (define (F n i) "helper"
    (cond ((< n (* i i)) #t)
          ((zero? (remainder n i)) #f)
          (else
           (F n (+ i 1)))))
 "primality test"
 (cond ((< n 2) #f)
     (else
      (F n 2)))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T20:30:12.530

你可以做得更好。我重新编写了您的代码：

```
(define (prime? x)
  (define (prime-helper x k)
    (cond ((= x k) #t)
          ((= (remainder x k) 0) #f)
          (else
           (prime-helper x (+ k 1)))))
  (cond ((= x 1) #f)
        ((= x 2) #t)
         (else
          (prime-helper x 2))))

(define (primes-up-to n)
  (define (helper x)
    (cond ((= x 0) '())
          ((prime? x)
           (cons x (helper (- x 1))))
          (else
           (helper (- x 1)))))
  (reverse
    (helper n)))

scheme@(guile-user)> (primes-up-to 20)
$1 = (2 3 5 7 11 13 17 19) 
```

请不要像 C 或 Java 那样编写 Scheme ——为了便于阅读，请查看 lisp 系列语言的这些[样式规则](http://mumble.net/~campbell/scheme/style.txt)：不要使用驼峰式大小写，不要将括号放在自己的行上，用标记谓词`?`，注意正确的缩进，不要在括号内添加额外的空格。*

# sql - 如何约束邻接表以排除其隐含图中的循环？

> ID：13791048
> 
> 赞同：0
> 
> 时间：2012-12-09T19:44:06.310
> 
> 标签：sql, postgresql, database-design

我有一个包含两列的表：节点 ID 和父节点 ID。此表表示一个图表。我希望它代表一棵树，所以我需要禁用会在图中形成循环的行的插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:10:38.507

以下不起作用，因为您可以批量插入创建循环的行[http://sqlfiddle.com/#!12/ea0cd/7](http://sqlfiddle.com/#!12/ea0cd/7)

您可以通过一次只允许通过存储过程插入一行来解决它。

创建一个具有自引用的表`ParentId`：

```
Create Table Tree (
  Id int not null primary key,
  ParentId int foreign key references Tree(Id) -- might need to add constraint afterwards
); 
```

不允许更新表，只允许插入和删除。您无法创建没有更新的循环。

如果您的树节点有其他数据，则为此创建一个单独的备用表：

```
Create Table Node (
  Id int not null primary key,
  data1 varchar(10),
  constraint FK_Tree Foreign Key (Id) References Tree (Id)
); 
```

# node.js - 是否可以使用同一个端口启用 tcp、http 和 websocket？

> ID：13791050
> 
> 赞同：16
> 
> 时间：2012-12-09T19:44:15.513
> 
> 标签：node.js, sockets, websocket, socket.io

我正在尝试在同一端口上启用[tcp](http://nodejs.org/api/net)、[http](http://nodejs.org/api/http.html)和[websocket.io通信。](https://github.com/LearnBoost/websocket.io)我从 tcp 服务器（//// 行上方的部分）开始，它起作用了。然后我运行了[在 websocket.io 上找到的回显服务器示例](https://github.com/LearnBoost/websocket.io/blob/master/examples/echo/server.js)（在 //// 行下方），它也可以工作。但是当我尝试将它们合并在一起时，tcp 不再起作用。

那么，是否可以使用同一个端口启用 tcp、http 和 websockets？还是我必须在另一个端口上监听 tcp 连接？

```
var net = require('net');
var http = require('http');
var wsio = require('websocket.io');

var conn = [];

var server = net.createServer(function(client) {//'connection' listener
    var info = {
        remote : client.remoteAddress + ':' + client.remotePort
    };
    var i = conn.push(info) - 1;
    console.log('[conn] ' + conn[i].remote);

    client.on('end', function() {
        console.log('[disc] ' + conn[i].remote);
    });

    client.on('data', function(msg) {
        console.log('[data] ' + conn[i].remote + ' ' + msg.toString());
    });

    client.write('hello\r\n');
});

server.listen(8080);

///////////////////////////////////////////////////////////

var hs = http.createServer(function(req, res) {
    res.writeHead(200, {
        'Content-Type' : 'text/html'
    });
    res.end(['<script>', "var ws = new WebSocket('ws://127.0.0.1:8080');", 'ws.onmessage = function (data) { ws.send(data); };', '</script>'].join(''));
});

hs.listen(server);

var ws = wsio.attach(hs);
var i = 0, last;

ws.on('connection', function(client) {

    var id = ++i, last

    console.log('Client %d connected', id);

    function ping() {
        client.send('ping!');
        if (last)
            console.log('Latency for client %d: %d ', id, Date.now() - last);
        last = Date.now();
    };

    ping();
    client.on('message', ping);

}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-10T16:54:26.907

同一个端口可以处理多个不同的协议，但有一些注意事项：

*   服务器必须有某种方式来检测（或协商）客户端希望使用的协议。您可以将单独的端口视为检测客户端希望使用的协议的正常方式。

*   只有一个服务器进程可以实际监听该端口。此服务器可能仅用于检测协议类型，然后转发到多个其他服务器，但每个端口由单个服务器进程拥有。

*   您不能支持服务器首先发言的多个协议（因为无法检测客户端的协议）。您可以支持具有多个客户端优先协议的单个服务器优先协议（通过在接受后添加一个短暂的延迟以查看客户端是否会发送数据），但这有点不稳定。

WebSocket 协议的一个明确设计目标是允许 WebSocket 和 HTTP 协议共享相同的服务器端口。初始 WebSocket 握手是一个 HTTP 兼容的升级请求。

websockify服务器/网桥是可以在同一端口上使用 5 种不同协议的服务器示例：HTTP、HTTPS（加密 HTTP）、WS（WebSockets）、WSS（加密 WebSockets）和 Flash 策略响应[。](https://github.com/kanaka/websockify)服务器查看传入请求的第一个字符以确定它是 TLS 加密的（HTTPS 或 WSS）还是以“<”开头（Flash 策略请求）。如果是 Flash 策略请求，则它会读取请求、响应并关闭连接。否则，它读取 HTTP 握手（加密或未加密），连接和升级标头确定它是 WebSocket 请求还是纯 HTTP 请求。

*免责声明：我制作了 websockify*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:08:09.173

简短的回答 - 不，您不能在同一端口上运行不同的 TCP/HTTP/Websocket 服务器。

冗长的答案 - websockets 和 HTTP 都在 TCP 之上工作。因此，您可以将 http 服务器或 websocket 服务器视为自定义 TCP 服务器（具有某些状态管理和协议特定的编码/解码）。一台机器上不可能有多个套接字绑定到同一个端口/协议对，因此第一个将获胜，接下来的将获得套接字绑定异常。

# java - 将 ImageView 固定到垂直 LinearLayout 中的右下角

> ID：13791052
> 
> 赞同：-1
> 
> 时间：2012-12-09T19:44:21.007
> 
> 标签：java, android, android-linearlayout, android-sdk-2.3

我正在使用 android 2.3.3 (api v10) 编写一个 android 应用程序

我有一个使用具有以下属性的 LinearLayout 编写的菜单：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
```

我想在页面的右下角固定一个小徽标。那可能吗？如果是这样怎么办？

谢谢你！

冷杉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:53:31.087

你可以为此使用RelativeLayout

```
<RelativeLayout ....>
<LinerLayot
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:layout_alignParentTop="true"
android:id="@+id/layout"
>

.
.   // your elements
.
</LinerLayout>
<ImageView
src="your logo"
android:layout_below="@+id/layout"
 android:layout_alignParentBottom="true"
/>
</RelaytiveLayout> 
```

# ruby - 如何在 ruby 中创建哈希值

> ID：13791059
> 
> 赞同：0
> 
> 时间：2012-12-09T19:45:05.997
> 
> 标签：ruby

更新：答案在我下面，需要一个简单的 .merge 。

我需要从我的 build_virtual_boards_hash 方法中获取一个哈希值作为输出我无法弄清楚如何将哈希值添加到哈希值堆栈中。或者甚至如何创建这样的东西......首先我将列出方法，然后向您展示我得到的输出。

这是使用的两种方法...问题位于'build_virtual_boards_hash'内部...

```
def build_virtual_boards_hash(board, player)
  virtual_board = board.dup

  virtual_board_hash = {}
  new_board_hash = {}

  empty_spaces_on_board = virtual_board.grid.select{ |k, v| v == " " }.keys
  index_mark = 'VB'+empty_spaces_on_board.length.to_s

  #THIS IS WHERE I THINK THE PROBLEM IS
  #HOW DO I ADD EACH LOOP RESULT TO -SOMETHING- 
  #THAT CAN BE CALLED ON LATER AFTER THE LOOP ENDS
  #SO I GET THE DESIRED RESULTING OUTPUT?
  # 
  empty_spaces_on_board.each do |empty_space_symbol|
    # create a hash
    new_board_hash = {index_mark => move_as_somebody(board, player, empty_space_symbol).grid} #value
    p new_board_hash  
  end

end

#takes board....returns new board
def move_as_somebody(board, player, empty_space)
  new_board = board
  if player == 'X'
    new_board.grid[empty_space] = player
  else
    player == 'O'
    new_board.grid[empty_space] = player
  end
  return new_board
end 
```

我目前从这两种方法中得到这个输出......

```
{"VB7"=>{:a1=>"X", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "}}
{"VB7"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "}}
{"VB7"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "}}
{"VB7"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "}}
{"VB7"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>"X", :c2=>" ", :c3=>" "}}
{"VB7"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>"X", :c2=>"X", :c3=>" "}}
{"VB7"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>"X", :c2=>"X", :c3=>"X"}} 
```

我需要的是这个...

```
virtual_boards = {
    {"VB7"=>{:a1=>"X", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "}},
    {"VB6"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "}},
    {"VB5"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "}},
    {"VB4"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "}},
    {"VB3"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>"X", :c2=>" ", :c3=>" "}},
    {"VB2"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>"X", :c2=>"X", :c3=>" "}},
    {"VB1"=>{:a1=>"X", :a2=>"X", :a3=>"X", :b1=>"X", :b2=>"O", :b3=>"X", :c1=>"X", :c2=>"X", :c3=>"X"}}
} 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:41:47.327

通常哈希哈希的问题是如何初始化深度哈希。

这个问题已经解决并提交到[Ruby Facets](http://rubyworks.github.com/rubyfaux/?doc=http://rubyworks.github.com/facets/docs/facets-2.9.3/core.json#api-class-Hash/api-method-Hash-d-autonew)

```
h = Hash.autonew 
```

现在您可以通过这种方式轻松初始化哈希：

```
h[:h1][:key] = 'value'
h[:h2][:key] = 'value'
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:53:57.927

而答案是......

```
#builds hash of hash of fake boards
def build_virtual_boards_hash(board, player)
  virtual_board = board.dup
  i = 0
  virtual_board_hash = {}
  new_board_hash = {}

  empty_spaces_on_board = virtual_board.grid.select{ |k, v| v == " " }.keys

  while i < empty_spaces_on_board.length do
    p empty_space_symbol = empty_spaces_on_board[i]
    p index_mark = 'VB'+i.to_s

    new_board_hash = {index_mark => move_as_somebody(board, player, empty_space_symbol).grid}

    virtual_board_hash = virtual_board_hash.merge(new_board_hash)        

    i += 1
  end
  p virtual_board_hash
end 
```

# c# - EF 接口 - 按相关类型获取对象

> ID：13791060
> 
> 赞同：0
> 
> 时间：2012-12-09T19:45:07.730
> 
> 标签：c#, entity-framework, design-patterns, code-first, entity-framework-5

我正在尝试构建一组可重用的 EF 模型和接口。一个这样的接口称为`ICategorised`，如下所示：

```
public interface ICategorised {
    int CategoryID { get; set; }
    Category Category { get; set; }
} 
```

这是 Category 对象的样子：

```
public class Category {
    public int CategoryID { get; set; }
    public string Title { get; set; }
    public Type Type { get; set; } // Is 'Type' the wrong type for this?
    public string Description { get; set; }
} 
```

我非常喜欢这个原理，但我对如何最好地获取和设置任何实现的对象的类型感到有些困惑`ICategorised`。我的最终目标是能够创建一个对象，例如：

```
public class Car : ICategorised {
    public int CarID { get; set; }
    public string CarName { get; set; }
    public int CategoryID { get; set; }
    public Category Category { get; set; }
} 
```

.. 并且能够以某种方式查询`Categories`where `Type==Car`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:39:36.603

我认为您应该重新考虑当前`ICategorized`作为 Existential Type 的用法。在我看来，这实际上应该是`Category`，因为它为其中`Category`的所有内容提供了定义，`ICategorized`但目前并没有真正实现它。如果你想保留`ICategorized`，我会把`Category`它作为第一点来实施。

其次，我会做`Category abstract`，因为它不应该直接实例化。然后，您`Car`和您创建的任何其他分类类将直接从`abstract Category`. `ICategorized`如果您如上所述更改层次结构，这也会使它们固有地产生。

这将实现我所想的你，并导致一个更清晰的层次结构，可以为未来的类型扩展。然后，您可以`Type`直接查询，因为每个特定`Category`的子类都有一个明确的`Type`集合，例如`Car`.

希望这会有所帮助，或者至少是朝着正确方向迈出的一步。

# url - Nginx 每个位置/将重写的 uri 传递给 proxy_pass

> ID：13791062
> 
> 赞同：15
> 
> 时间：2012-12-09T19:45:10.497
> 
> 标签：url, nginx, rewrite, proxypass

如果您想通过基于位置的 proxypass 将 URL 请求代理到两个不同的后端，那么最快和最干净的解决方案是什么。

```
location /app1/ {
    alias /var/www/ruby/public;
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header  Host $http_host;
    proxy_redirect    off;
    try_files $uri $uri/ @ruby;
}

location @ruby {
    proxy_pass http://127.0.0.1:3000;
}

location /app2/ {
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header  Host $http_host;
    proxy_redirect    off;
    try_files $uri $uri/ @other;
}

location @other {
    proxy_pass http://127.0.0.1:8080;
} 
```

使用此配置，nginx 将“/app1”或“/app2”传递给代理，后端无法识别 url/command ..

例如`http://127.0.0.1:3000`只想`/messages`在访问时传递给`http://<nginx>/app1/messages`- 但在上面的配置中也传递`/app1/`为`http://127.0.0.1:3000/app1/messages`. 同样适用`/app2`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T18:18:50.880

尝试将“/”放在上游名称的末尾，例如

```
proxy_pass http://127.0.0.1:8080/; 
```

请看这篇文章： [如何使用 nginx proxy_pass 保存请求 url](https://stackoverflow.com/questions/5834025/how-to-preserve-request-url-with-nginx-proxy-pass)

# jquery - 将鼠标悬停在 Colorbox 图像上时添加“固定”按钮

> ID：13791065
> 
> 赞同：1
> 
> 时间：2012-12-09T19:45:27.817
> 
> 标签：jquery, wordpress, colorbox

我正在为客户改进 wordpress 博客。我有一个 Colorbox 灯箱库，当您在 Colorbox 运行时将鼠标悬停在单个全尺寸图像上时，需要显示 Pinterest“pin-it”按钮。

无论如何，我似乎在颜色框中的全尺寸图像上附加了一个类，它不会改变任何东西。我想我在这里误解了一个基本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:52:04.870

将图像放在“div”容器中，将该 div 的样式设置为 position:relative。

然后除了带有 position:absolute; 的图像之外，在该容器内添加另一个 div；顶部：5px；左：5px；显示：隐藏。

然后，如果您的容器 div 类是“imagecontainer”，而 Pinterest 的 div 被称为“socialbuttons”，那么下面的 CSS 就可以解决问题：

```
.imagecontainer:hover socialbuttons { display:block; } 
```

就是这样。

# java - Java Socket - 当客户端连接到服务器时，服务器中的连接重置到客户端

> ID：13791071
> 
> 赞同：0
> 
> 时间：2012-12-09T19:45:55.320
> 
> 标签：java, client, serversocket

所以我正在尝试建立一个客户端 <-> 服务器连接。我不断收到最烦人的错误，因为客户端和服务器无法连接，但在我打电话时只发送一次“cpc”

```
print("cpc"); 
```

这是我正在使用的代码。这包含在扩展 Thread 的类中。

```
BufferedReader in = null;
out = new PrintWriter(socket.getOutputStream(), true);
in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
String inputLine, outputLine;
print("cpc");
try{
    while ((inputLine = in.readLine()) != null) {
        outputLine = process(inputLine);
        if (!outputLine.equals("")){
            print(outputLine);
        }

    }
} catch (Exception e){
    e.printStackTrace();
} 
```

错误出现在 'while ((inputLine = in.readLine()) != null) {' 的位置。

如果您需要它，这是错误。

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
at sun.nio.cs.StreamDecoder.read(Unknown Source)
at java.io.InputStreamReader.read(Unknown Source)
at java.io.BufferedReader.fill(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at javaclient.Client.run(Client.java:28) 
```

**这是 print() 代码**

```
public void print(String s){
    out.println(s);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:52:40.503

~~您正在阅读线路，但您没有发送线路。尝试使用 println() 而不是 print()。~~ “连接重置”的最常见原因是您已写入已被对等方关闭的连接。您通常不是在该写入时获得它，而是在随后的读取或写入时获得它。基本上这是一个应用程序协议错误。

# android - Android：尝试使用 AsyncTask 与 Web 服务器对话

> ID：13791073
> 
> 赞同：0
> 
> 时间：2012-12-09T19:46:10.753
> 
> 标签：android

我正在尝试使用 `doInBackground`方法`AsyncTask`向网络服务器发送消息。然后使用 `onPreExecute()`和`onPostExecute(String result)`方法`AsyncTask`将文本控件从发送数据更改为 Fineshed。

问题是在 AsyncTask String 类内部，我无法访问在外部类中声明的任何变量。因此，我无法在这些方法中更改我的 TextView。我明白了，所以 `mSEnd.setText("Sending data")`给了我`mSend`未定义的。

有没有办法使用我在外部类中声明的变量？

```
public class EndOfWorldActivity  extends cBase  implements OnClickListener {

     TextView textCountDown;
     TextView textPercent;

  public void onClick(View v) {
        Intent i;
        switch(v.getId())
        {

        case R.id.butVote3:
                 // Start ASync Task
             new SendTextOperation().execute("");     
            break;

        case R.id.buGame:
                 // Start ASync Task
             new SendTextOperation().execute("");  
        break;
        }
    }

    private class SendTextOperation extends AsyncTask<String, Void, String> {

        @Override
        protected void onPreExecute() {

          //Update UI here
          mSEnd undefined error
          mSend.setText("Sending your vote to server");
          mSend.invalidate();
        }

        @Override
        protected String doInBackground(String... params) {
              // Talk to server here to avoid Ui hanging 
              // talk to server method undefined                 
              TalkToServer( mYes[mPes-1] );
              return null;
        }      

        @Override
        protected void onPostExecute(String result) {  
              // Update screen here after talk to server end

                  UpdateScreen(); 
                  mSend .setText("");
        }

  }
} // end of class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:49:33.930

采用

```
new SendTextOperation().execute(); 
```

而不是这个

```
new SendTextOperation().execute(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T10:45:26.610

下面的链接中给出了一个完整的示例。

应用程序将 HTTP 查询发送到 Web 服务器并取回查询的内容：

[示例：使用 AsyncTask 的 Android 双向网络套接字](https://stackoverflow.com/questions/5135438/example-android-bi-directional-network-socket-using-asynctask)

# download - 在 Fossil repo 中下载最新版本的文件？

> ID：13791074
> 
> 赞同：2
> 
> 时间：2012-12-09T19:46:38.537
> 
> 标签：download, fossil

我看到 Fossil UI 允许在 url /raw/directory/filename?name=artifactID 下载文件（“工件”）。有没有办法在不知道 artifactID 的情况下始终获取文件的最新版本？我试过 ?name=trunk、?name=current、?name= 和 ?name=tip。我得到的唯一结果是返回到存储库的主页，或者给出一个文本文件，其中包含存储库中的文件列表。我还尝试了 /doc/directory/filename，但这只是按预期将文件内容作为网页提供给我。

作为背景，我想在不克隆存储库的情况下下载一个脚本，但我想要一个指向该文件最新版本的“永久链接”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:59:19.050

您正在寻找的内容描述如下：

[http://fossil-scm.hwaci.com/fossil/doc/trunk/www/embeddeddoc.wiki](http://fossil-scm.hwaci.com/fossil/doc/trunk/www/embeddeddoc.wiki)

简而言之，你会写`<baseurl>/doc/tip/<filename>`

您可以在上面读取`<filename>`文件的路径，就像工件内容页面中“文件”之后显示的那样。换句话说：通过用户界面，您可以转到“文件”并导航要链接到的文件。进入文件后，页面标题将为“工件内容”，并在“文件”之后显示完整路径（在顶部，工件 ID 之后）

# html - 重叠图像

> ID：13791081
> 
> 赞同：0
> 
> 时间：2012-12-09T19:47:27.287
> 
> 标签：html, css, image

我正在尝试使用不规则（非矩形）按钮对导航进行编码。边缘在 Y 轴上相互重叠，所以我不确定如何在 HTML/CSS 中执行此操作。我可以使用图像映射，但宁愿不使用。有人可以指出我正确的方向吗？谢谢！（我在这里包含了图片链接）：

[示例导航图像](http://development.mediatavern.com/sample_nav.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:52:08.850

以下是一些选项：

1.  使用带有图像映射的单个图像
2.  使用应用了 CSS 旋转变换的覆盖 div。将点击处理程序添加到这些 div。
3.  使用 SVG 形状并将链接应用到它们。我添加了一个例子。

* * *

演示：http: [//jsfiddle.net/Phu5x/](http://jsfiddle.net/Phu5x/)

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<a xlink:href="/svg/index.html">
   <polygon points="15,10  95, 10  85, 30  5, 30"
        style="fill: red; stroke: black;"/>
 </a>
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:09:23.880

如果您想要鼠标悬停效果，请尝试使用带有图像映射的单个透明 PNG 图像。`<area>`如果您需要对旧 IE 的支持，请将事件处理程序放在元素上。

# c++ - 如何创建代理类？

> ID：13791083
> 
> 赞同：1
> 
> 时间：2012-12-09T19:47:49.270
> 
> 标签：c++, boost, c++11, boost-preprocessor

拥有`N`没有公共数据字段的不同类，只有方法（不重叠），如何通过 boost 预处理器创建统一它们的所有代理类？

例如，我们有类：A 有方法`do();`，B 有方法`data();`。我想知道是否有一种方法（例如使用 Boost Preprocessor）来创建一个代理类，该类将具有来自 A 和 B 的所有方法（此处`do()` `data()`）和一个构造函数，该构造函数接收指向该类实例的指针——一个用于 A，一个用于 B ?

所以我们会得到类似这样的伪代码的api：

```
JOIN(A, B, C);// or if needed JOIN("path_to_A.h", "path_to_B.h", C)
//...
A * a = new A();
B * b = new B();
C * c = new C(a, b);
c->data();
c->do(); 
```

是否可以使用 boost::preprocessor 在 C++11 中创建这样的东西，或者这样的东西已经在 boost 中了？

此外，如果使用外部生成器可以实现这样的事情，那对我来说没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:34:01.780

如果您不介意列出 A 和 B 中的所有方法，我们可以使用 SFINAE 来完成。这里的本质是我们定义了两个方法`C::data()`，分别转发到`A::data()`和`B::data()`。编译器会过滤掉那些不能编译的，这样我们就可以把它转发给正确的成员。

```
#include <type_traits>
#include <boost/preprocessor/seq/for_each.hpp>

#define CALLER_NAME(method_name) BOOST_PP_CAT(BOOST_PP_CAT(_, method_name), _caller__)

#define GEN_CALLER(r, ignored, method_name) \
    template <typename K, typename... T> \
    static auto CALLER_NAME(method_name)(K* k, T&&... args) -> decltype(k->method_name(std::forward<T>(args)...)) { \
        return k->method_name(std::forward<T>(args)...); \
    } \
    template <typename... T> \
    auto method_name(T&&... args) -> decltype(CALLER_NAME(method_name)(_first__, std::forward<T>(args)...)) { \
        return CALLER_NAME(method_name)(_first__, std::forward<T>(args)...); \
    } \
    template <typename... T> \
    auto method_name(T&&... args) -> decltype(CALLER_NAME(method_name)(_second__, std::forward<T>(args)...)) { \
        return CALLER_NAME(method_name)(_second__, std::forward<T>(args)...); \
    }

#define JOIN(FIRST, SECOND, NAME, METHODS) \
    struct C { \
        FIRST* _first__; \
        SECOND* _second__; \
        NAME(FIRST* _first__, SECOND* _second__) : _first__(_first__), _second__(_second__) {} \
        BOOST_PP_SEQ_FOR_EACH(GEN_CALLER, , METHODS) \
    } 
```

例如：

```
struct A {
    int x;

    void a() {
        std::cout << "an a! " << x << "\n";
    }
};

struct B {
    double x;

    double b(double k) {
        std::cout << "b! " << x << ", " << k << "\n";
        return x - k;
    }

    void b() {
        std::cout << "b! " << x << ", ?\n";
    }
};

JOIN(A, B, C, (a)(b));

int main() {
    A a {12};
    B b {24};

    C c (&a, &b);

    c.a();
    c.b();
    std::cout << c.b(2445) << std::endl;
} 
```

* * *

这个想法可以推广到两个以上的类：

```
#include <type_traits>
#include <boost/preprocessor/seq/for_each.hpp>
#include <boost/preprocessor/seq/for_each_i.hpp>
#include <boost/preprocessor/punctuation/comma_if.hpp>

#define CALLER_NAME(method_name) \
    BOOST_PP_CAT(BOOST_PP_CAT(_caller_, method_name), __)
#define FIELD_NAME(ClassName) \
    BOOST_PP_CAT(BOOST_PP_CAT(_field_, ClassName), __)
#define INVOKER_IMPL(method_name, ClassName) \
    CALLER_NAME(method_name)(FIELD_NAME(ClassName), std::forward<T>(args)...)
#define CALLER_IMPL(method_name) \
    k->method_name(std::forward<T>(args)...)
#define FORWARD(IMPL) -> decltype(IMPL) { return IMPL; }

#define GEN_INVOKER(r, method_name, i, ClassName) \
    template <typename... T> \
    auto method_name(T&&... args) \
        FORWARD(INVOKER_IMPL(method_name, ClassName))

#define GEN_CALLER(r, ALL_CLASSES, method_name) \
private: \
    template <typename K, typename... T> \
    static auto CALLER_NAME(method_name)(K* k, T&&... args) \
        FORWARD(CALLER_IMPL(method_name)) \
public: \
    BOOST_PP_SEQ_FOR_EACH_I_R(r, GEN_INVOKER, method_name, ALL_CLASSES)

#define GEN_FIELD(r, IGNORED, ClassName) \
    ClassName* FIELD_NAME(ClassName);
#define GEN_ARG(r, IGNORED, i, ClassName) \
    BOOST_PP_COMMA_IF(i) ClassName* FIELD_NAME(ClassName)
#define GEN_CTOR(r, IGNORED, i, ClassName) \
    BOOST_PP_COMMA_IF(i) FIELD_NAME(ClassName)(FIELD_NAME(ClassName))

#define JOIN(ALL_CLASSES, ClassName, METHODS) \
    struct ClassName { \
    private: \
        BOOST_PP_SEQ_FOR_EACH(GEN_FIELD, , ALL_CLASSES) \
    public: \
        ClassName(BOOST_PP_SEQ_FOR_EACH_I(GEN_ARG, , ALL_CLASSES)) \
            : BOOST_PP_SEQ_FOR_EACH_I(GEN_CTOR, , ALL_CLASSES) {} \
        BOOST_PP_SEQ_FOR_EACH(GEN_CALLER, ALL_CLASSES, METHODS) \
    } 
```

用法：

```
struct A {
    int x;

    void a() {
        std::cout << "an a! " << x << "\n";
    }
};

struct B {
    double x;

    double b(double k) {
        std::cout << "b! " << x << ", " << k << "\n";
        return x - k;
    }

    void c() {
        std::cout << "b! " << x << ", ?\n";
    }
};

struct C {
    double x;

    double c(double k) {
        std::cout << "c! " << x << ", " << k << "\n";
        return x + k;
    }

    void b() {
        std::cout << "c! " << x << ", ?\n";
    }
};

JOIN((A)(B)(C), D, (a)(b)(c));

int main() {
    A a {12};
    B b {24};
    C c {36};

    D d {&a, &b, &c};

    d.a();
    d.b();
    d.c();
    std::cout << d.b(48) << std::endl;
    std::cout << d.c(64) << std::endl;
} 
```

# facebook - Facebook graph api：如何过滤应用程序提要

> ID：13791084
> 
> 赞同：1
> 
> 时间：2012-12-09T19:47:48.647
> 
> 标签：facebook, facebook-graph-api

我使用图形 api 来显示应用程序的所有提要。这是我的简单代码：

```
$url = $facebook->api('/' . $_REQUEST["app"] . '/feed?date_format=U&limit=10');
$feed = $url[data];
<pre><?php print_r($feed); ?></pre> 
```

如您所见，这非常容易。

pb：我只想要来自应用程序的提要，而不是来自所有发表评论的用户。显然，这取决于应用程序的配置，但我想知道它是否存在对 [from] 参数的过滤器？

谢谢文斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:08:28.950

您最好的选择是在 /fql 端点上使用 FQL 查询。

您将对表使用查询并在`stream`表上使用子查询`stream_filter`。关于[stream](https://developers.facebook.com/docs/reference/fql/stream)和[stream_filter的文档](https://developers.facebook.com/docs/reference/fql/stream_filter)

# objective-c - 如何让用户使用路径目标 c 创建文件

> ID：13791085
> 
> 赞同：-3
> 
> 时间：2012-12-09T19:47:52.783
> 
> 标签：objective-c, file, path, save

我需要能够获得用户定义的路径：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager createFileAtPath:Usersetpath  contents:data attributes:nil]; 
```

我需要定义用户集路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:14:47.807

这是如何选择路径的示例：

```
__block NSOpenPanel* panel= [NSOpenPanel openPanel]; // __block because it's used
                                                     // inside the block
__block NSString* path;
[panel setCanChooseDirectories: YES];
[panel setCanChooseFiles: NO];
[panel beginSheetModalForWindow: self.window completionHandler:^(NSInteger result)
 {
     if(result==NSOKButton)
     {
         path= [[panel URL] absoluteString]; // This is the path the user choosed
     }
     // Check also for the case that the user did hit the cancel button
     panel=nil; // The panel retains the block and the block retains the panel
                // so break the strong ref cycle by setting panel to nil.
 }]; 
```

**编辑**

我忘了说您应该将文件名附加到路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:59:49.893

什么样的“来自用户的路径”？您可以使用文本字段让用户输入字符串并使用它来提示他输入路径 - 但不清楚您的问题到底是什么。

另外，请注意，在典型的 iOS 应用程序中，用户通常不会遇到路径结构。您实际上应该对用户隐藏路径，并将文件存储在适当的目录中。

编辑：刚刚看到你没有指定 iOS 或 Mac OS，所以我上面的评论当然适用于 iOS ......

# ruby - 为什么以空格开头的字符串转换为：！' 与 Ruby/YAML

> ID：13791097
> 
> 赞同：7
> 
> 时间：2012-12-09T19:49:32.017
> 
> 标签：ruby, yaml

我正在使用 YAML 将 Ruby 哈希写入文件。

```
File.open(output_file, "w") {|file| file.puts YAML::dump(final)} 
```

哈希包含作为键的字符串和作为值的浮点数。

当我的字符串只包含字母时，它们会在文件文件中这样输出：

```
abc: 1.0
bcd: 1.0
cde: 1.0 
```

当字符串以空格开头时，输出如下：

```
! ' ab': 1.0 
```

当我再次读回文件时，一切正常，但我想知道为什么会发生这种情况以及这意味着什么。

我搜索了 YAML 文档，它说单个感叹号用于表示本地数据类型。

为什么在以空格开头的字符串上会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:31:42.897

被[`!`称为“非特定标签”](http://yaml.org/spec/1.2/spec.html#id2785512)。它强制 YAML 引擎将以下项目解码为字符串、散列或数组。它基本上禁止将其解释为不同的类型。我不确定引擎为什么会这样标记它们；似乎不需要。也许它只是过分热心地试图消除歧义？

编辑：无论哪种方式，它都是不需要的语法：

```
YAML.dump({' a'=>0})
=> "---\n! ' a': 0\n"
YAML.load("---\n! ' a': 0\n") # with the bang
=> {" a"=>0}
YAML.load("---\n' a': 0\n")   # without the bang
=> {" a"=>0} 
```

# javascript - 颜色框不是对象的方法

> ID：13791099
> 
> 赞同：2
> 
> 时间：2012-12-09T19:49:38.900
> 
> 标签：javascript, html, colorbox

我正在修复[leefest.org.uk](http://leefest.org.uk)上的一个错误，但我无法让 Colorbox 正常工作。多人参与了这个项目，所以我为混乱道歉。它们是具有多个文档就绪功能的多个插件。

据我所知：

*   jQuery 在颜色框之前被加载
*   在 colorbox 调用之前加载 Colorbox
*   colorbox 调用在文档就绪函数中

任何人？![leefest 彩盒错误](../Images/f4a912e7d1d798c7cab2fb2b7f81b6ae.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T04:44:01.607

如果 jQuery 被加载两次，就会发生这种情况。jQuery 的第一个版本将使用 colorbox 插件进行扩展。再次包含 jQuery 将替换原始实例，并且不会包含颜色框。

大多数情况下，我看到这种情况发生是当人们加载 ajax 内容时，该内容包含一个来自 jQuery 库的脚本元素，或者他们在他们的主文档中包含一个他们没有意识到其中包含 jQuery 的脚本。

# jquery - 带有json可靠选择的jquery不起作用

> ID：13791104
> 
> 赞同：0
> 
> 时间：2012-12-09T19:50:14.700
> 
> 标签：jquery, json

试图创建一个从数据库中获取 json 值的依赖选择函数，但我无法从 select 传递第二个值来获取最后一个选项，这是我的代码：

```
<?php
include("../../cons/cons.php");
$busco = "SELECT distinct(HostCountry) as country From schools WHERE 1 order by country asc";
$bus = mysql_query($busco) or die(mysql_error());
?>
<html>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1"> 

 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$(document).ready(function() {

//first, detect when initial DD changes
$("#states").change(function() {
    //get what they selected
    var selected = $("option:selected",this).val();
    //no matter what, clear the other DD
    //Tip taken from: http://stackoverflow.com/questions/47824/using-core-jquery-how-do-you-remove-all-the-options-of-a-select-box-then-add-on
    $("#cities").children().remove().end().append("<option value=\"\">Select a City</option>");
    //now load in new options if I picked a state
    if(selected == "") return;
    $.getJSON("getcities.php?method=getcities&returnformat=json",{"stateid":selected}, function(res,code) {
        var newoptions = "";
        for(var i=0; i<res.length; i++) {
            //In our result, ID is what we will use for the value, and NAME for the label
            newoptions += "<option value=\"" + res[i].VALOR + "\">" + res[i].NOMBRE + "</option>";
        }
        alert (newoptions);
        $("#cities").children().end().append(newoptions);
    });
});

// mi mano

$("#cities").change(function() {
    //get what they selected
    var selected2= $("select.cities").val();
    alert( selected2);
    //no matter what, clear the other DD
    //Tip taken from: http://stackoverflow.com/questions/47824/using-core-jquery-how-do-you-remove-all-the-options-of-a-select-box-then-add-on
    $("#subject").children().remove().end().append("<option value=\"\">Select a Subject</option>");
    //now load in new options if I picked a state
    if(selected2 == "") return;
    $.getJSON("getsubject.php?method=getsubject&returnformat=json",{"cityid":selected2}, function(res2,code) {
        var newoptions = "";
        for(var i2=0; i2<res2.length; i2++) {
            //In our result, ID is what we will use for the value, and NAME for the label
            newoptions2 += "<option value=\"" + res2[i2].VALOR + "\">" + res2[i2].NOMBRE + "</option>";
        }
        $("#subject").children().end().append(newoptions2);
    });
});
//hasta aca

})
</script>
</head>
<body>

<form method="post" action="">
<select name="states" id="states">
<option value="">Select Country</option>
<?php while ($b = mysql_fetch_array($bus)){
$dato = $b['country'];
$valor = str_replace(" ","_", $dato);
echo "<option value = '$valor'>$dato</option>";
}
?>
</select>

<select name="cities" id="cities">
<option value="">Select a City</option>
</select>  

<select name="subject" id="subject">
<option value="">Select a Subject</option>
</select>   

</form>

</body>
</html> 
```

你能给我一个提示吗？我在第二次警报中未定义.....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:57:03.613

没有`select`with class`cities`它有 id `cities`，所以使用

```
var selected2= $("#cities").val(); 
```

或者

```
var selected2= $(this).val(); 
```

代替

```
var selected2= $("select.cities").val(); 
```

# c# - 定时器在自身之上绘制，不清除

> ID：13791106
> 
> 赞同：2
> 
> 时间：2012-12-09T19:50:32.063
> 
> 标签：c#, xna, spritefont

有趣的问题！基本上，我的 UI 有一个计时器，它从 99 开始倒计时。除了在旧时间之上绘制新时间之外，一切正常。（上一次没有清除）GameplayScreens 绘制调用中发生了明显的事情......这很奇怪。

这是我的相关功能：

**GameplayScreen.cs**（或者我们常用的 Game1）

```
public override void Update(GameTime gameTime)
{
    m_GameUI.Update(gameTime);
    m_GameCam.lookAt(m_Hero.Position);//feeds the camera's lookAt function the players vector2 position
    m_GameUI.lookAt(m_GameCam.Position); //Look at the camera's position :D
}

public override void Draw(GameTime gameTime)
{

    ScreenManager.GraphicsDevice.Clear(ClearOptions.Target,
                                       Color.CornflowerBlue, 0, 0);

    SpriteBatch spriteBatch = ScreenManager.SpriteBatch;

    m_BackgroundManager.Draw(spriteBatch, m_GameCam);      
    //Begin the Spritebatch Drawing
    spriteBatch.Begin(SpriteSortMode.Immediate, null,
        null,
        null,
        null,
        null, m_GameCam.ViewMatrix);

    //Call EntityManager.DrawAllEntities()
    EntityManager.Instance.DrawAllEntities(gameTime, spriteBatch);

    //End the spritebatch drawing
    spriteBatch.End();

    spriteBatch.Begin();
    m_GameUI.Draw(gameTime, spriteBatch);
    m_PlayerUI.Draw(gameTime, spriteBatch);
    spriteBatch.End();
 } 
```

**游戏UI.cs**

```
SpriteFont m_Font;
double m_Timer;

public virtual void Update(GameTime gameTime)
{

    m_Timer -= gameTime.ElapsedGameTime.TotalSeconds;

}

public virtual void Draw(GameTime gameTime, SpriteBatch spriteBatch)
{

    spriteBatch.Draw(UITexture, Position, Color.White);
    spriteBatch.DrawString(m_Font, "" + (int)m_Timer + "", new Vector2(380, 45), Color.White);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:41:41.900

最终成为一个非常愚蠢的错误，我有一个从 UI 派生的类，它调用 base.draw()，因此更新的时钟和原始值同时显示在屏幕上。基本上是糟糕的代码设计，每个人一开始都是新手，对吧？

感谢您调查它:)

# javascript - 将 Bson 转换为字符串 - MongoDB/Javascript

> ID：13791112
> 
> 赞同：2
> 
> 时间：2012-12-09T19:51:08.060
> 
> 标签：javascript, string, mongodb, bson

如何将 bson obj 转换为字符串？我读过[Convert MongoDB BsonDocument into a string](https://stackoverflow.com/questions/5937665/convert-mongodb-bsondocument-into-a-string)但这是针对 c# 的。我正在为 Mongodb 使用 Javascript

它将被应用在这样的地方：

```
myvar = db.mycol.stats(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T21:12:25.643

您可以`tojson`像这样使用该功能：

```
str = tojson(db.mycol.stats()); 
```

# coldfusion - Windows 2k8 上的 Coldfusion 10 - .com/ 加载正常，但 .com/index.cfm 给出 404

> ID：13791113
> 
> 赞同：2
> 
> 时间：2012-12-09T19:51:40.520
> 
> 标签：coldfusion, iis-7.5, coldfusion-10

我正在按照 Pete Freitag 的新 CF10 锁定指南设置新服务器 (CF10 W2K8)。我安装了一个测试站点，如果我打开 www.mydomain.com，它会很好地加载默认文档 (index.cfm)。但是，如果我尝试 www.mydomain.com/index.cfm（或任何其他特定的 .cfm 页面），我会得到 404 not found。

IIS 日志确实记录了 404 错误。如果我创建一个 .htm/.html 页面，它会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:48:51.253

我也有这个问题。在 Windows Server 2008 R2 上运行。

我发现一些线程建议我重新运行随 CF 10 ({cfroot}\cfusion\runtime\bin\wsconfig.exe) 安装的“Web 服务器配置工具”。

我尝试了几件事，包括使用服务器名称（而不是本地主机）的“添加...”。然后当我删除它（使用服务器名称的连接）时，我可以看到 IIS 命令被执行以删除所有连接设置。我还删除了本地主机连接。但是，使用“添加...”尝试将 localhost 添加回来从未奏效。

所以，对我来说，这个工具只适用于删除允许 CF 工作的 cfm/IIS 设置。我的下一步是重新安装 CF 10。但是，我找到了指向此页面的链接：

[http://helpx.adobe.com/coldfusion/kb/coldfusion10-iis-manual-connector-configuration.html](http://helpx.adobe.com/coldfusion/kb/coldfusion10-iis-manual-connector-configuration.html)

我按照该页面上的说明进行操作，但有一些例外。我不需要遵循步骤#1 和#2。该文件 (isapi_redirect.dll) 仍然存在。步骤 #3 - #5 已验证（文件存在并且其中包含正确的信息）。完成这些步骤后，一切正常，除了文档根文档（[http://website.com/](http://website.com/)）。我所要做的就是将 index.cfm 添加为服务器范围的“默认文档”。Adobe 在他们的说明中忘记了这一步。

我不知道为什么“Web 服务器配置工具”无法在我的服务器上安装。我什至尝试“以管理员身份运行”运行它，但没有成功。

我还必须将虚拟目录（CFIDE 和 jakarta）添加到服务器上的所有站点。

如果您有多个站点要管理，您可以使用这些方便的命令行片段来加速该过程：

rem 添加 cfide 虚拟目录（CF 10）：

```
 %systemroot%\System32\inetsrv\appcmd add vdir /app.name:"site.com/" /path:/CFIDE /physicalPath:"{cfroot}\cfusion\wwwroot\CFIDE" 
```

rem 添加 jakarta 虚拟目录（CF 10）：

```
 %systemroot%\System32\inetsrv\appcmd add vdir /app.name:"site.com/" /path:/jakarta /physicalPath:"{cfroot}\config\wsconfig\1" 
```

只需替换“site.com”和 {cfroot} 值即可与您的服务器一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:36:53.873

设置其他站点时，您必须创建一个名为 jakarta 的虚拟目录，该目录映射到 /config/wsconfig/1 文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T10:30:43.233

抱歉 - 忘记将此标记为已关闭。我按照 CF10 锁定指南重新格式化并重新安装了所有内容，并且当时它工作正常。

我知道我遇到的一个问题是在 IIS 中映射一个虚拟的“jakarta”目录，但我从来没有为 domain.com/index.cfm 问题想出一个具体的解决方案。

# php - 通过 PHP SDK 启动 VPC EC2 实例

> ID：13791121
> 
> 赞同：2
> 
> 时间：2012-12-09T19:52:17.647
> 
> 标签：php, amazon-web-services, amazon-ec2, amazon-vpc

我一直在搜索 AWS SDK 示例和教程，终于找到了有关[启动 Amazon EC2 实例](http://docs.amazonwebservices.com/AWSSdkDocsPHP/latest/DeveloperGuide/how-to-ec2.html)的官方文档，但问题是它没有描述如何在 VPC 中启动 EC2 实例；另外如何在 PHP 中创建 VPC。由于文档不佳，我在使用 AWS 开发工具包时遇到了很多问题，作为一个附带问题，如果有人可以向我指出涵盖许多主题的 .Net 和/或 PHP AWS 开发工具包教程，我将不胜感激。

更新我终于有机会测试上面的链接，它对 EC2 非常有效，所以我开始查看文件`./aws/services/ec2.class.php`，它有一个签名的函数`run_instances($image_id, $min_count, $max_count, $opt = null)`在数组`$opt`中，您指定创建实例的设置，我发现其中有一个可选数组`$opt`，`NetworkInterface`其中包含`SubnetId`. 这表明这就是魔法所在。我尝试使用这些选项，但实例无法启动。希望这些细节对您有所帮助，并再次感谢您的宝贵时间。

# android - Android - 数组添加到现有的 ArrayAdapter (ListView)

> ID：13791129
> 
> 赞同：0
> 
> 时间：2012-12-09T19:52:49.837
> 
> 标签：android, listview, android-arrayadapter

我如何将数组添加到现有的 ArrayAdapter？

这是第一次调用：

```
ArrayAdapterMessage adapter = new ArrayAdapterMessage(this, m_id, m_von_user, m_user_id, m_username, m_name, m_pic_id, m_zeit, m_msg);
    lv.setAdapter(adapter); 
```

# css - 笔记本电脑的移动设计

> ID：13791130
> 
> 赞同：0
> 
> 时间：2012-12-09T19:52:49.977
> 
> 标签：css, mobile

我需要整理我的网站的移动版本，但我没有 iPhone，我只有这台 MacbookPro w/Lion，17 英寸。

我只有这台笔记本电脑。如何构建我的网站的移动版本？我正在寻找一般性建议；谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:54:55.517

有许多工具可以帮助您模拟移动浏览器，例如[https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_View 。](https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_View)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:56:33.177

iPhone 也不够用。您将不得不测试许多手机。:)

通常，您可以通过缩小浏览器窗口来进行大量测试。这至少会触发 CSS 媒体查询，您可以测试它们是否有效。

网上也有很多工具，要么几乎是完整的模拟器，要么只是检查常见错误的网站。[看看 10 款用于测试移动网站的优秀工具](http://sixrevisions.com/tools/10-excellent-tools-for-testing-your-site-on-mobile-devices/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T19:58:03.363

有一些非常好的移动模拟器可以帮助您开发移动网站：

*   [http://iphone4simulator.com/](http://iphone4simulator.com/)
*   [http://developer.android.com/tools/help/emulator.html](http://developer.android.com/tools/help/emulator.html)

使用这些模拟器应该可以让您设计和开发一个相当不错的移动网站。

# django - Django - 如何从两个模型返回标记的内容

> ID：13791131
> 
> 赞同：0
> 
> 时间：2012-12-09T19:52:49.863
> 
> 标签：django, django-models, django-views

我正在研究使用 django 基本应用程序的遗留代码。基本的博客应用程序有标签结果页面。

我想知道如何扩展此方法以从两个模型返回标记的内容。Post 模型和其他一些模型。

```
def tag_detail(request, slug, template_name='blog/tag_detail.html', **kwargs):
    tag = get_object_or_404(Tag, name__iexact=slug)

    return list_detail.object_list(
        request,
        queryset=Post.objects.filter(tags__name__iexact=slug, status=2),
        extra_context={'tag': tag},
        template_name=template_name,
        **kwargs
    ) 
```

**编辑**

这是我最终做的

```
quertsetA = A.objects.filter(tags__name__iexact=slug, status=2)
querysetB = B.objects.filter(tags__name__iexact=slug, status=2)

result_list = list(chain(quertsetA, querysetB)) 
```

这在 python shell 中有效，但只有 quertsetA 的值被传递给模板。

这是视图的相关部分

```
return list_detail.object_list(
    request,
    queryset=result_list,
    template_name=template_name,
    **kwargs
) 
```

和模板

```
{% for post in object_list %}
    {{ post }}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:16:08.233

如果您将查询集转换为列表，那么您可以将它们连接起来

```
quertsetA = [p for p in Post.objects.filter(tags_name_iexact=slug, status=2)]
querysetB = [o for o in Other.objects.filter(tags_name_iexact=slug...)]
queryset = querysetA+querysetB 
```

# php - 选择复制与基于字符串的变量（对象属性）创建

> ID：13791132
> 
> 赞同：0
> 
> 时间：2012-12-09T19:52:59.783
> 
> 标签：php

我有这样的代码：

```
$something_type = $this->db
    ->where('something_type_id', $something->something_type_id)
    ->get('something_types')
    ->row();
if(!$something_type) {
  $something->type = lang('data_not_specified');
} else {
  $something->type = $something_type->something_type_name;
}

// everything is exactly the same here except for one word
$something_category = $this->db
    ->where('something_category_id', $something->something_category_id)
    ->get('something_categories')
    ->row();
if(!$something_category) {
  $something->category = lang('data_not_specified');
} else {
  $something->category = $something_category->something_category_name;
}

...

// and so on, about four times 
```

我想到的一种解决方案是：

```
$classfications = array('type', 'category');
foreach ($classifications as $classification) {
  $id_property = "something_{$classificiation}_id";
  $something_classification = $this->db
      ->where("something_{$classification}_id", $something->$id_property)
      ->get("something_{$classification}s")
      ->row();
  if(!$something_classification) {
    $something->$classification = lang('data_not_specified');
  } else {
    $name_property = "something_{$classificiation}_name";
    $something->$classification = $something_classification->$name_property;
  }  
} 
```

当然，阅读这可能会导致某人出现不适，那么我该怎么办呢？这可能是一个非常常见的问题，但我无法命名它，所以在谷歌搜索时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:09:38.537

您在寻找[拐点](http://en.wikipedia.org/wiki/Inflection)吗？

问题中代码片段的最大挑战是您提供的分类具有不同的复数形式（例如，“类型”变为“类型”，而“类别”变为“类别”）。为了在不变形的情况下构造这些数据，您可以创建一个嵌套数组哈希，例如，

```
$classifications = array(
  'type' => array(
    'plural' => 'something_types',
    'id'    => 'something_type_id',
  ),
  // etc.
);

foreach ($classifications as $singular => $data) {
  /*
   * Produces:
   * $singluar = 'type';
   * $data['plural'] = 'something_types';
   * $data['id'] = 'something_type_id';
   */
} 
```

但是，我使用的大多数 PHP 框架都包含一个*Inflector*类（或类似的）来处理语言中的细微差别，这些细微差别使得将单数和复数名称一起使用是有问题的（并且将避免需要嵌套数据结构，如上所述）。

查看[CodeIgniter 的 Inflector Helper](http://ellislab.com/codeigniter/user-guide/helpers/inflector_helper.html)以了解这意味着什么。如果您已经在使用一个框架（您`$db`可能会使用帮助程序），那么还要确保查看它是否支持[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)，它会自动处理这种情况。

# java - LinkedList 数组添加新节点

> ID：13791133
> 
> 赞同：1
> 
> 时间：2012-12-09T19:53:00.253
> 
> 标签：java, linked-list

我通过以下方式创建了一个数组（使用[此方法](https://stackoverflow.com/questions/217065/cannot-create-an-array-of-linkedlists-in-java)的第二个答案）：

```
public static LinkedList<Connection>[] map;
...  // later ....
map = (LinkedList<Connection>[]) new LinkedList[count]; 
```

当我运行我的程序时，我在这个`for`循环内的行中得到一个 NullPointerException：

```
for (int j = 0; j < numOfConnections; j++) {
    map[i].add(new Connection(find(s.next()), s.nextDouble(), s.next()));  // NPE!
} 
```

有人可以告诉我为什么会抛出这个异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:54:50.703

您`map`充满了`null`创建数组的时间。您需要自己初始化每个成员。

```
// Initialize.
for (int j = 0; j < numOfConnections; j++) {
//                  ^ I assume this means 'count' here.
    map[j] = new LinkedList<Connection>();
}

// Fill
for (int j = 0; j < numOfConnections; j++) {
    map[j].add(new Connection(find(s.next()), s.nextDouble(), s.next()));
//      ^ BTW I think you mean `j` here.
} 
```

（如果你愿意，可以结合这两个步骤。）

# javascript - Express：是否可以绕过静态文件的会话？

> ID：13791136
> 
> 赞同：7
> 
> 时间：2012-12-09T19:53:22.270
> 
> 标签：javascript, node.js, express, passport.js

我正在使用 Express + Mongoose + Passport + Connect-mongo 的非常简单的设置，一切正常。唯一让我感到困惑的是，我`passport.unserializeUser`什至可以看到静态文件的调用，从我的应用程序的角度来看，这绝对没有意义。

我可以理解在某些情况下您也希望在某种授权下提供静态文件，但我想知道如何“跳过”整个会话中间件，以防我提供静态文件。

（在生产环境中，我无法将 cookie 用于资产）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T01:51:24.477

中间件按照添加的顺序被调用。只需将静态中间件移动到您的`app.js`.

例如：

```
app.use(express.static(__dirname + "/public"));
// any other middleware
app.use(passport()); // or whatever your passport config looks like 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:24:44.843

您可以从根本不存储任何 cookie 的另一个域提供静态文件。这也意味着您在提供这些文件之前不能进行任何（安全）检查。

这种技术被各种网站使用，例如 StackOverflow、Facebook 和 LinkedIn。

# ruby-on-rails - 如何分段缓存“喜欢”按钮？（Rails 3.2，内存缓存）

> ID：13791149
> 
> 赞同：1
> 
> 时间：2012-12-09T19:54:35.837
> 
> 标签：ruby-on-rails, memcached, ruby-on-rails-3.2

我的 Rails 应用程序有`Post`和`Member`模型。内`posts/:id/show`包含一个“喜欢”按钮，会员可以单击该按钮，如果`@member`已经“喜欢”了这个按钮，则为“不喜欢” `@post`。

（此按钮将链接到执行一些 ajax 并使“喜欢”按钮变为“不喜欢”按钮的发布操作）

缓存按钮的最佳做法是什么？（下面的代码显然没有缓存按钮 html）。

我应该添加`:touch => true`，`member.rb`然后为按钮制作一个缓存键`<% cache ['V1', @post, @member, 'like_button']`吗？（似乎多余？）

**post.rb**

```
has_many :likes 
```

**喜欢.rb**

```
belongs_to :member
belongs_to :post 
```

**成员.rb**

```
has_many :likes 
```

**帖子/show.html.erb **

```
<% cache ['V1', @post, 'show'] do %>
  <h1>@post.title</h1>
  <div class="content">@post.content</div>
<% end %> 
  <%= render 'like_button', :post=> @post, :member => @member %> 
```

** 帖子/_like_button.html.erb **

```
<% if member.liked_post?(post) %> 
  <%= link_to unlike_post_path(post), :method => :post, :remote => true, :class => 'btn' %>
<% else %> 
  <%= link_to like_post_path(post), :method => :post, :remote => true, :class => 'btn' %>  
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:55:01.633

您可以按照以下方式做一些事情：

```
<% cache ['V1', @post, @member.liked_post?(@post), 'show'] do %>
  <h1>@post.title</h1>
  <div class="content">@post.content</div>
  <%= render 'like_button', :post=> @post, :member => @member %> 
<% end %> 
```

这为您提供了 2 个不同的片段缓存版本 - 每个用于“喜欢”和“不喜欢”状态。这比每个用户 1 个版本要好。

您在这里冒着有人将代码添加到使用更多 @member 参数的**like_button**部分的风险，这不是缓存键的一部分，因此您将得到不正确的结果。

对于这种情况，我将更改**like_button**部分以采用与缓存调用相同的参数 - **@member.liked_post(@post)** - 以明确这是部分代码中使用的唯一值。

```
<%= render 'like_button', :post=> @post, :liked => @member.liked(@post) %> 
```

使用新的部分：

```
<% if liked %> 
  <%= link_to unlike_post_path(post), :method => :post, :remote => true, :class => 'btn' %>
<% else %> 
  <%= link_to like_post_path(post), :method => :post, :remote => true, :class => 'btn' %>  
<% end %> 
```

# java - 编程“添加方法”数组似乎不起作用

> ID：13791158
> 
> 赞同：1
> 
> 时间：2012-12-09T19:55:53.480
> 
> 标签：java

嗨，我对 java 很陌生，我目前正在尝试创建一个学生姓名和标记菜单，但我的 add 方法有问题，我认为这与我的数组有关，但我想不通出来，任何帮助将不胜感激。

下面是我的`unitResult`方法

```
public class UnitResults 
{
    private String unitTitle;
    private String [] fName;
    private String [] surname;
    //private String [] UnitResults;
    private int [] Marks;
    private int Mark;

    private int pointer ;

    private static String course = "HND Computing"; 

    public UnitResults(int Size,String title)
    {            
        this.fName = new String [Size];
        this.surname = new String [Size];
        this.Marks = new int [Size];
        pointer = 0;

        fName[pointer] = "Daniel";
        surname[pointer] = "Scullion";

        Marks[pointer] = 60;
        unitTitle  = title;

        pointer ++;
    }

    public Boolean add( String tempfName, String tempsName, int newGrade)
    { 
        if (pointer == fName.length)
        {
            System.out.println("The Students Database is full");
            return false;
        }

        else
        {
            fName [pointer] = tempfName;
            surname [pointer]  = tempsName;
            Marks[pointer] = newGrade;

            pointer ++;
            return true;
        }
    }// end Add 
```

但是当我尝试使用下面的菜单系统添加它时

```
int option = 0;
option = menuSystem();

while (option != 6)
{
    System.out.println("");
    switch(option)
    {
    case 1:
        System.out.println(" Please Enter The Students First Name");
        String tempfName = keyb.nextLine();

        System.out.println("Please Enter The Students Last Name");
        String tempsName = keyb.nextLine();

        System.out.println(" Please Enter The Students Mark");
        int newGrade = keyb.nextInt();
        myUnit.add(tempfName, tempfName,newGrade);   

        break; 
```

当我输入选项 1 时，我得到的输出是：

```
Please Enter The Students First Name

Please Enter The Students Last Name 
```

任何想法这里有什么问题已经搜索了很长时间，可能很简单，但我不知道：/

编辑：下面是我的菜单类

```
import java.util.Scanner;

public class MenuResults {
    static Scanner keyb = new Scanner(System.in);

    public static int menuSystem()
    {
        System.out.println("*********************************");
        System.out.println("                                 ");
        System.out.println("1.Add New Student");
        System.out.println("2.Display Students Details");
        System.out.println("3.Delete a Students");
        System.out.println("4.Update Student Details");
        System.out.println("5.Sort Students By Mark");
        System.out.println("6.Sort Students By Surname");
        System.out.println("7.Search For A Student");
        System.out.println("                                 ");
        System.out.println("**********************************");

        System.out.print("\n Enter choice:");
        int option = keyb.nextInt();
        return option;
    }

    public static void main(String[] args) {
        UnitResults myUnit = new UnitResults(3, "Java");

        int option = 0;
        option = menuSystem();

        while (option != 6)
        {
            System.out.println("");
            switch(option)
            {
            case 1:                   

                System.out.println(" Please Enter The Students First Name");
                String tempfName = keyb.nextLine();

                System.out.println("Please Enter The Students Last Name");
                String tempsName = keyb.nextLine();

                System.out.println(" Please Enter The Students Mark");
                int newGrade = keyb.nextInt();
                myUnit.add(tempfName, tempsName,newGrade);   

                break;
            case 2:
                myUnit.display();
                break;
            case 3:

                break;
            case 4:

                break;
            case 5:

            case 6:

                break;
            default:
                System.out.println(" Invalid Entry");
            }//end switch 
        }
    }
} 
```

有我要求的整个菜单课。

编辑：当我忘记用户输入并使用硬输入时：`myUnit.add("John","tommy",12);`

我得到`"Student Database is full"`了大约一百次..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:20:10.203

大胆猜测，当您使用菜单并键入时，`1`回车`ENTER`符 ( `\n`)`ENTER`仍然存在于您的`Scanner`after`nextInt()`中。

因此，下一次调用`readLine()`将使用`\n`(remaining `ENTER`) 作为该行，并且不会等待用户输入。

可能的更正：

```
public static int menuSystem()
{
    final Scanner keyb = new Scanner(System.in);
    // ...
}

public static void main(String[] args) {
    final UnitResults myUnit = new UnitResults(3, "Java");
    int option = menuSystem();
    while (option != 6) {
        final Scanner keyb = new Scanner(System.in);
        // ...
        option = menuSystem();
    }
} 
```

并删除静态`kbd`声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:20:31.523

更好的解决方案是在调用`keyb.nextLine()`后简单地调用`keyb.nextInt()`以处理行尾标记。很简单地改变这个：

```
System.out.println(" Please Enter The Students Mark");
int newGrade = keyb.nextInt();
myUnit.add(tempfName, tempsName,newGrade); 
```

对此：

```
System.out.println(" Please Enter The Students Mark");
int newGrade = keyb.nextInt();
keyb.nextLine();  // ****** add this *******
myUnit.add(tempfName, tempsName,newGrade); 
```

# c# - 在循环期间将焦点设置到文本框

> ID：13791166
> 
> 赞同：0
> 
> 时间：2012-12-09T19:57:19.033
> 
> 标签：c#

我想做一个小型计算器。这个计算器会随机选择 1 到 1000 之间的数字，你必须回答它们。你会从好的和错误的答案中得分。只要我只运行一次，一切正常。

如果我设置一个循环，它只允许我最后一次回答。如何让我的程序在每个循环后停止？我试图将焦点设置到您应该给出答案的文本框，但直到最后一个循环完成后才设置焦点。

```
for (int i = 1; i <= 5; i++)
{
    txtResultaat.Focus();
} 
```

显然，这使它在循环中运行了 5 次，但它只让我有机会在文本框中输入一些内容。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:43:41.437

另一种设计（使用 while 循环而不是 for 循环）使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:37:36.937

好吧，如果我想严格地讲理论，那么您的问题的答案是：使用**break**指令。

```
for (int i = 1; i <= 5; i++)
{
    txtResultaat.Focus();
    break;
} 
```

这将实现您的要求：

> 谁能告诉我如何让我的程序在每次循环后停止？

如果它能让你的程序正确运行并做你想做的事……那我的朋友，是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:23:48.213

好吧，您根本没有告诉程序实际停止，因为您只是让它循环 5 次，并且每次都将焦点设置到文本框。一个更好的方法是维护某种计数器，记录他们到目前为止已经回答了多少次（对于这个级别的程序来说，全局变量是最简单的。然后在程序加载时让程序要求第一个数字，然后让该事件结束。当用户单击答案按钮时，在按钮事件中您确定他们是对还是错。然后在事件结束时，您输出新问题。

# google-app-engine - GAE Mailhandler 到 Google Analytics

> ID：13791167
> 
> 赞同：1
> 
> 时间：2012-12-09T19:57:20.237
> 
> 标签：google-app-engine, google-analytics

我在 GAE 上运行一个应用程序，它可以做很多事情。其中之一是接收带有附件的电子邮件并回复带有 CSV 附件的邮件。使用此选项的人的类别，从不访问该网站。

是否可以在我的邮件处理程序中添加一些内容，以便将收到的每封邮件作为 Google Analytics 中的页面访问处理？

我使用 Jinja2 作为框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:20:21.237

您可以使用[Google Analytics for Mobile Websites](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)。它允许服务器端调用。

基本上它只是生成一个在移动站点加载时触发 GA 的图像 url。在您的情况下，您应该使用自己的参数调用此 url。这是一个示例网址：

```
http://www.google-analytics.com/__utm.gif?utmwv=4&utmn=769876874&utmhn=example.com&utmcs=ISO-8859-1&utmsr=1280x1024&utmsc=32-bit&utmul=en-us&utmje=1&utmfl=9.0%20%20r115&utmcn=1&utmdt=GATC012%20setting%20variables&utmhid=2059107202&utmr=0&utmp=/auto/GATC012.html?utm_source=www.gatc012.org&utm_campaign=campaign+gatc012&utm_term=keywords+gatc012&utm_content=content+gatc012&utm_medium=medium+gatc012&utmac=UA-30138-1&utmcc=__utma%3D97315849.1774621898.1207701397.1207701397.1207701397.1%3B... 
```

[有关参数的完整列表，](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting?hl=en#gifParametershttp://)请参见此处。

# mysql - mysql SELECT * WHERE 日期 + 7 天 >= $today

> ID：13791169
> 
> 赞同：1
> 
> 时间：2012-12-09T19:57:27.910
> 
> 标签：mysql, date

我只想知道是否有一种方法可以执行此过程，只需调用一次数据库即可。我基本上需要计算今天日期早于字段“date_out”+ 7 天的数据库中的条目。我在想这样的事情：

```
$today = date("Y-m-d"); //this is the format of date_out in my db!

$count_query = "SELECT count(*) FROM `group` WHERE ADDDATE('date_out', INTERVAL 7 DAY) <= $today  ";
$count_result = mysql_query($count_query) or trigger_error("SQL", E_USER_ERROR);
$query_data = mysql_fetch_row($count_result);
$number_ty = $query_data[0];

if ($number_ty >= 1) {
// do something
} 
```

使用此代码，$number_ty 始终为 0。如前所述，此问题的目标是了解是否可以仅通过一次 mysql 调用而不是两次来完成计数。我的目标是简单、清洁和懒惰:-)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T19:59:49.067

你不应该引用`date_out`：

```
ADDDATE(date_out, INTERVAL 7 DAY) 
```

你*应该*引用`$today`：

```
<= '$today' 
```

这是一个更正的查询。不过，我建议您查看 Mysqli 或 PDO。您正在使用的库已弃用。

```
$count_query = "SELECT count(*) FROM `group` WHERE ADDDATE(date_out, INTERVAL 7 DAYS) <= '$today'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:09:12.413

正如其他人正确回答的那样，您需要使用正确的引号类型。单引号用于字符串文字和日期文字。MySQL 使用反引号作为列名分隔符。

此外，我将不理会该`date_out`列，并将计算应用于固定日期 $today。这将使 MySQL 更容易在`date_out`.

MySQL 还具有内置函数[`CURDATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)，因此您可以避免插入 PHP 变量，因此更容易防止 SQL 注入。

```
. . .
$count_query = "SELECT COUNT(*) FROM `group` 
    WHERE `date_out` <= SUBDATE(CURDATE(), INTERVAL 7 DAY)";
. . . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T20:00:01.153

`'date_out'``"date_out"`表示具有无效日期值的字符串

``date_out`` 是一个列名，你想使用这个

你已经混合`'`了```（带反引号的引号）。~~在 postgres`'`中具有不同的含义（列名）但是~~在[MySQL 中，它是字符串转义字符](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)。

你也可以使用构造：

```
$today = date("Y-m-d", time() - 7*24*3600); // 7 days 
```

或者在 SQL 中：

```
WHERE date_out <= ADDDATE( NOW(), INTERVAL -7 DAYS)" 
```

# sql - 如何连接列具有我想要的所有值的表？

> ID：13791170
> 
> 赞同：0
> 
> 时间：2012-12-09T19:57:39.833
> 
> 标签：sql

我有一个表 A 的列 B_ID 引用表 B 中的 B_ID 表 B 有 B_ID 作为主键，C_ID 引用表 C 中的 C_ID

我想从 A_ID 上的 A 连接 B 中选择 B.C_ID = 5 AND B.C_ID = 4

例如，当我这样做时：

```
select from A join B on B.A_ID = A.A_ID 
```

如果结果是：

```
A_ID  |  B_ID  |  C_ID
 1    |   1    |   4
 1    |   2    |   5 
```

然后我希望查询返回两行但是如果结果是：

```
A_ID  |  B_ID  |  C_ID
 1    |   1    |   4 
```

我希望查询返回 0 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:13:04.580

```
SELECT * FROM A INNER JOIN B ON A.B_ID = B.B_ID
WHERE EXISTS(SELECT * FROM B WHERE C_ID = 4)
AND EXISTS(SELECT * FROM B WHERE C_ID = 5) 
```

会奏效 - 不过可能有更好的方法，让我想想......

（当然，上面假设您在表中只有 1/2 行）

或者

```
SELECT * FROM A
INNER JOIN B ON A.B_ID = B.B_ID
WHERE (SELECT COUNT(*) FROM B WHERE C_ID IN (4,5)) > 1 
```

玩它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:31:59.997

```
 select B.* from
    A join B on B.B_ID = A.B_ID, 
    (
    select 1 as test from 
    (
    select distinct c_Id from 
    A join B on B.B_ID = A.B_ID
    where c_Id in (4,5)
    ) tmp
    having COUNT(*) = 2
    ) tmp2
    where tmp2.test = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:06:48.297

尝试这个

```
SELECT
    whatever
FROM
    A
    INNER JOIN B
        ON A.A_ID = B.A_ID
WHERE
    B.C_ID IN (4, 5) 
```

或者

```
SELECT
    whatever
FROM
    A
    INNER JOIN B
        ON A.A_ID = B.A_ID
WHERE
    B.C_ID = 4 OR B.C_ID = 5 
```

* * *

**更新**

如果你只想要匹配的对

```
SELECT
    whatever
FROM
    A
    INNER JOIN B
        ON A.A_ID = B.A_ID
WHERE
    A.A_ID IN (SELECT A_ID
               FROM B
               WHERE C_ID IN (4, 5)
               GROUP BY A_ID
               HAVING COUNT(*) = 2) AND
    B.C_ID IN (4, 5) 
```

子选择`A_ID`对记录进行分组和计数。HAVING 子句的工作方式与 WHERE 子句类似，但在分组后执行。所以内部选择只返回`A_ID`对应于 (4, 5)-pairs of 的 s `C_ID`。整个查询总是返回偶数条记录，例如

```
A_ID | B_ID | C_ID
 1 | 1 | 4
 1 | 2 | 5
 2 | 3 | 4
 2 | 4 | 5

```

* * *

**编辑**

如果您只想要 A_ID，其中不仅存在 C_ID 4 和 5，而且不存在其他 C_ID，则将查询更改为

```
SELECT B.*
FROM A INNER JOIN B ON A.A_ID = B.A_ID
WHERE B.C_ID IN (4, 5) AND
      A.A_ID IN (SELECT A_ID
                 FROM B
                 GROUP BY A_ID
                 HAVING MIN(C_ID)=4 AND MAX(C_ID)=5 AND COUNT(*)=2) 
```

如果这两个数字（本例中为 4 和 5）总是连续的，您可以删除该`COUNT(*)=2`部分。

（注意：根据您的评论之一，加入在`A_ID`列上。我在所有示例中都更改了它。）

**罗宾更新**

谢谢，在您的帮助下，我想出了这个：

```
SELECT
    *
FROM
    A a
    INNER JOIN B
        ON a.A_ID = B.A_ID
WHERE
    (SELECT COUNT(*) FROM B b WHERE b.A_ID = a.A_ID and C_ID IN (4, 5)) =
 (SELECT COUNT(*) FROM A aa INNER JOIN B b ON aa.A_ID = b.A_ID WHERE b.A_ID = a.A_ID) 
```

# ios - 抑制 HTML5 的“粉红色”验证在 iOS 上

> ID：13791172
> 
> 赞同：2
> 
> 时间：2012-12-09T19:57:51.187
> 
> 标签：ios, html, textfield

我在 iOS 的 HTML5 Web 应用程序上使用“type=number”作为我的标签。我想要的行为是，当用户选择要编辑的文本字段时，iOS 上的字母数字键盘的数字端会显示出来，而它目前就是这样做的。

问题在于，当将带小数点的数字放入字段时，文本字段的背景会在 iOS 设备上变为粉红色。有没有办法关闭它或解决它？

![粉色验证](../Images/db5341161ba65479ae09c6278d1cec84.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:18:21.780

尝试将`novalidate`属性添加到`form`.

```
<form novalidate>
     <input type="number" />
</form> 
```

# css - @font-face 没有得到正确的字体

> ID：13791180
> 
> 赞同：0
> 
> 时间：2012-12-09T19:58:45.557
> 
> 标签：css, fonts, font-face

我在使用 CSS 中的 @font-face 标记来使用自定义字体时遇到问题。我有一个名为 Project 的文件夹，其中包含字体、css 和图像文件夹。我正在尝试使用 @font-face 来使用自定义字体。

这是我的代码：

HTML - index.html

```
<div id="hello">Hello</div> 
```

CSS - css/typography.css

```
@font-face{
font-family: 'ranger';
src: url('fonts/Ranger.ttf');
}

#hello{
font-family: 'ranger';
font-size: 70px;
color: white;
text-align: center;
padding-top: 30px;
white-space: nowrap;
} 
```

我将它用于多种其他字体，除了其他两种字体外，它们都可以使用。代码或字体文件类型没有区别。对于其中一种字体，它使用常规字体而不是我指定的字体。另一个只是使用浏览器默认值。这两种字体今天早上工作，直到我将所有 CSS 移到它自己的文件夹中，并将所有字体移到它们自己的文件夹中。

请帮忙！我对 CSS/HTML 很陌生，所以我真的一点也不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:02:34.600

你的路径是错误的。由于您的 CSS 文件在`/css/`其中，您必须上一个目录才能访问`/fonts/`。

```
@font-face{
    font-family: 'ranger';
    src: url('../fonts/Ranger.ttf');
} 
```

# java - Android中的多线程

> ID：13791182
> 
> 赞同：4
> 
> 时间：2012-12-09T19:58:48.607
> 
> 标签：java, android, multithreading, opencv

我正在尝试多线程一些 OpenCV4Android 代码。我将 432x432 图像分成 9 个 144x144 段，并将每个段传递给不同的线程：

```
Thread[] threads = new Thread[9];
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 3; j++) {
        threads[3*i+j] = new Thread(new MyThread(image.rowRange(144*i, 144*(i+1)).colRange(144*j, 144*(j+1))));
        threads[3*i+j].start();
    }
}

for (Thread thread : threads) try {thread.join();} catch (InterruptedException e) {}; 
```

这是线程类：

```
public class MyThread implements Runnable {
    final Mat block;

    public MyThread(Mat block) {
        this.block = block;
    }

    public void run() {
        /* do image processing on block */
        Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_ELLIPSE, new Size(19,19));
        Mat closed = new Mat();
        Imgproc.morphologyEx(block, closed, Imgproc.MORPH_CLOSE, kernel);
        Core.divide(block, closed, block, 1, CvType.CV_32F);
        Core.normalize(block, block, 0, 255, Core.NORM_MINMAX);
        block.convertTo(block, CvType.CV_8UC1);     
        Imgproc.threshold(block, block, -1, 255, Imgproc.THRESH_BINARY_INV+Imgproc.THRESH_OTSU);
    }
} 
```

我有两个问题：

1.  尽管线程正在正确修改各个块，但修改并未显示在最终图像中。如果按值传递给线程，这将是有意义`Mat block`的，但 Java 应该将其引用传递给线程。

2.  运行时*比*非线程代码长 - 在我的模拟器中，它从 ~1200 上升到 ~1500 毫秒。这是模拟器的问题，还是由于某种原因多线程在这里是一个非常糟糕的主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:21:31.337

我没有使用 OpenCV 的经验，所以我将只解决第二个问题。

线程需要一个 CPU 才能运行（或一个充当虚拟 CPU 的核心）。因此，您将永远不会同时运行比设备中可用的实际内核数更多的线程。

假设您有一个具有 2 个内核的设备，并且您将工作分成 9 个线程。最终结果是 9 个线程中只有 2 个线程将同时运行，而其余 7 个线程将在队列中等待轮到它们获得 CPU。

由于线程创建和切换是有成本的，因此整体性能结果会比只有 2 个线程更差。

如果出于性能原因在线程之间拆分工作，请不要使线程数超过设备中的内核数。

我相信市场上的大多数设备都仅限于 1 或 2 个核心......

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:17:51.173

第一个问题是由`block`本节中将 Mat 转换为不同类型引起的：

```
Core.divide(block, closed, block, 1, CvType.CV_32F);
Core.normalize(block, block, 0, 255, Core.NORM_MINMAX);
block.convertTo(block, CvType.CV_8UC1); 
```

我不确定为什么这应该是一个问题，但我通过将中间浮点矩阵存储在`closed`其中并将最终答案放回中来修复它`block`：

```
Core.divide(block, closed, closed, 1, CvType.CV_32F);
Core.normalize(closed, block, 0, 255, Core.NORM_MINMAX, CvType.CV_8U); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:07:51.033

Luis 解决了第二个问题。我认为第一个问题是因为你处理了一个新的 Mat 到线程，对新 Mat 的修改不会影响旧的。

我找到了 rowRange 的源代码，有一些本机代码，但显然它创建了一个新对象。

```
 public Mat rowRange(int startrow, int endrow)
 {

     Mat retVal = new Mat(n_rowRange(nativeObj, startrow, endrow));

     return retVal;
 } 
```

# jquery - jQuery删除带有类名的重复div

> ID：13791183
> 
> 赞同：7
> 
> 时间：2012-12-09T19:59:00.187
> 
> 标签：jquery

所以基本上我的 div 生成如下：

```
<div class="test className">content</div>
<div class="test className">content</div>
<div class="test className">content</div>
..
<div class="test className">content</div> 
```

我正在尝试删除重复的 div 并只保留最后一个！有什么快速的想法吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T20:06:14.700

基于您提供的标记的*快速想法。*

```
var $div = $('div.test.className:contains(content)');

if ($div.length > 1) {
   $div.not(':last').remove()
} 
```

[但我会首先防止重复。]

**编辑**：这是另一种使用`filter`and`slice`方法：

```
$('.test.className').filter(function() {
    return this.textContent === 'content';
}).slice(0, -1).remove(); 
```

在上面的代码片段中，`-1`作为方法的第二个参数，`.slice`集合中的最后一个元素被忽略。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T20:02:48.850

像这样的东西：

```
​$('.className').not(':last')​.remove();​​​​​​​​​​​​​ 
```

用 选择所有 div `.className`，从选择中删除最后一个，删除 div 集合，您将只保留最后一个。

演示：http: [//jsfiddle.net/j5728/](http://jsfiddle.net/j5728/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:26:57.190

**原件（见下面的编辑）**

正如[Jan Dvorak](https://stackoverflow.com/users/499214/jan-dvorak)所问的那样，我不确定您认为哪些属性可以确定一个元素是另一个元素的重复，但是，对于您的问题，以下不是特别*快速*但更通用的解决方案：

```
(function($) {
  $.fn.removeDuplicates = function() {
    var original = [];

    this.each(function() {
      var el = this, $el, isDuplicate;

      $.each(original, function() {
        $el = $(el);

        // check whichever properties 
        // you believe determine whether 
        // it's a duplicate or not
        if (el.tagName === this.tagName && 
            el.className === this.className && 
            el.id === this.id && 
            el.value === this.value && 
            el.href === this.href && 
            $el.html() === $(this).html()) {
          isDuplicate = true;
          $el.remove();
        }
      });

      if (!isDuplicate) {
        original.push(el);
      }
    });
  };
}(jQuery)); 
```

你会像这样使用它：

```
$('.test').removeDuplicates();

// .. or even
$('div').removeDuplicates();

// .. or even
$('.test.className').removeDuplicates(); 
```

以上所有内容都应按预期工作，如此[处所示](http://jsbin.com/ukayom/1/edit)。

**编辑**

自从我写这篇文章以来已经有几年了，我已经了解了[Node.isEqualNode](https://developer.mozilla.org/en-US/docs/Web/API/Node/isEqualNode)。它提供了一种更简洁的方式来执行此操作，因此更新后的插件将如下所示（并将返回原始元素以进行链接）：

```
(function($) {
  'use strict';

  $.fn.removeDuplicates = function() {
    var $original = $([]);

    this.each(function(i, el) {
      var $el = $(el),
          isDuplicate;

      $original.each(function(i, orig) {
        if (el.isEqualNode(orig)) {
          isDuplicate = true;
          $el.remove();
        }
      });

      if (!isDuplicate) {
        $original = $original.add($el);
      }
    });

    return $original;
  };

}(jQuery)); 
```

[这里演示了](http://jsbin.com/lovakulope/edit?html,js,output)一个工作示例。

# c# - 在 WPF MVVM 应用程序的 ComboBox 中设置默认选定项

> ID：13791184
> 
> 赞同：1
> 
> 时间：2012-12-09T19:59:13.230
> 
> 标签：c#, wpf, mvvm, combobox

我已经被这个问题困扰了好几个小时......我想做的实际上很简单 - 在 ComboBox 中设置一个默认选定项（我使用的是 MVVM 模式）。

我的视图中有以下组合框的 XAML：

```
<ComboBox ItemsSource="{Binding Schools}" 
          DisplayMemberPath="Acronym" 
          SelectedValue="{Binding SelectedSchool}" 
          SelectedValuePath="Id" 
/> 
```

在我的 ViewModel 中，我有一个 ObservableCollection，Schools：

```
 public ObservableCollection<School> Schools { get; private set; }

    public CourseFormViewModel()
    {
        Schools = new ObservableCollection<School>();

        try
        {
            // Gets schools from a web service and adds them to the Schools ObservableCollection
            PopulateSchools();
        }
        catch (Exception ex)
        {
            // ...
        }
    }

    public int SelectedSchool
    {
        get { return schoolId; }
        set
        {
            schoolId = value;
            OnPropertyChanged("SelectedSchool");
        }
    } 
```

最后，School 是一个简单的业务对象：

```
[DataContract]
public class School
{
    [DataMember]
    public int Id { get; set; }
    [DataMember]
    public string Acronym { get; set; }
    [DataMember]
    public string Name { get; set; }
} 
```

问题是，当应用程序启动时，组合框没有获得默认值。我尝试在 XAML 中将 SelectedIndex 设置为 0，但无济于事。我已经尝试在代码隐藏中的 Window_Loaded 事件处理程序中设置 SelectedIndex（这有效），但是因为我使用的 MVVM 模式感觉有点脏。我对整个 WPF/MVVM 的东西还是新手，所以如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:17:13.780

您可以像这样设置 SelectedSchool：

```
public void CourseFormViewModel()
    {
        Schools = new ObservableCollection<School>();

        try
        {
            // Gets schools from a web service and adds them to the Schools ObservableCollection
            PopulateSchools();

            SelectedSchool = 3;
        }
        catch (Exception ex)
        {
            // ...
        }
    } 
```

测试数据：

```
 Schools.Add(new School { Id = 1, Name = "aaa", Acronym = "a" });
 Schools.Add(new School { Id = 2, Name = "bbb", Acronym = "b" });
 Schools.Add(new School { Id = 3, Name = "ccc", Acronym = "c" }); 
```

您将获得选定的项目“c”。

如果您想要具有最小 Id 的 init ComboBox，您可以使用以下代码：

```
SelectedSchool = Schools.Min(x => x.Id); 
```

而不是分配常量值。

# php - 组合foreach不显示PHP中的所有数组值

> ID：13791191
> 
> 赞同：0
> 
> 时间：2012-12-09T19:59:49.310
> 
> 标签：php, foreach

我正在尝试使用 foreach 循环显示 2 个数组，但由于某种原因，当数组中的值设置为 0 时，仅显示数组的最后一项

假设我有以下数组值：

```
users array ( 0 => user1, 1 => user2)
occurrences array ( 0 => 0, 1 => 3)   //the key represents the user from the users array 
```

foreach 循环的输出将正确显示

```
//output
user1 0
user2 3 
```

但是，如果两个值都为 0，则只会显示 user2

```
users array ( 0 => user1, 1 => user2)
occurrences array ( 0 => 0, 1 => 0);   //the key represents the user from the users array

//output (should also display user1 0)
user2 0 
```

这是我的 foreach 循环。

```
?>
<table>
<th>User</th><th># of Occurrences</th>
<?
foreach (array_combine($occurrences, $users) as $occur => $user){
    ?>
    <tr><td><? echo $user; ?></td><td><? echo $occur; ?></td></tr>
    <?
}
?></table>
<? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:07:33.863

```
$users = array(1 => 'user2', 0 => 'user1');
$occurences = array(0 => 0, 1 => 3);

$count = count($users);
$result = array();
for($i = 0; $i < $count; $i++)
{
  $result[$users[$i]] = $occurences[$i];
}
var_dump($result); 
```

注意 $users 数组顺序。使用 array_combine，在这种情况下你会得到错误的值。

```
array (size=2)
  'user1' => int 0
  'user2' => int 3 
```

我无法重现您所说的内容：

```
var_dump(array_combine([0 => 'user_1', 1 => 'user_2'], [0 => 0, 1 => 0])); 
```

结果：

```
array (size=2)
  'user_1' => int 0
  'user_2' => int 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:11:48.870

问题中的代码执行以下操作：

> *对于每个出现值键，提供一个用户。*

我想你是在相反的行为之后：

> *对于每个用户键，提供一个出现值*

尝试在通话中交换`$occurrences`和`$users`，即

`array_combine($users, $occurrences)`

您只看到 user2 的原因是 array_combine 考虑条目`0 => 0 and 1 => 0`并将`0 0`作为密钥列表接收。因此，它只能在结果数组散列中产生一个键（它使用出现数组中的值来构建键列表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:01:26.557

尝试以这样的方式做到这一点怎么样：

```
<?php
foreach($users as $userId => $userName) {
 if(isset($occurrences[$userId])) {
?>
  <tr><td><?php echo $userName; ?></td><td><?php echo $occurrences[$userId]; ?></td></tr>
<?php
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T20:10:13.867

如果您的键只是跟随数字，为什么要使用关联数组？

这对我有用：

```
<?php 
$user = array('user1','user2');
$occur = array(0,0);

foreach (array_combine($user, $occur) as $key => $value) {
    echo $key . " : " . $value;
}
 ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T20:11:04.317

> 如果两个值都为 0

然后，对于两个不同的值，您有两个相同的键，并用第二个值覆盖第一个值；因此，在数组中，只有一个值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T20:11:38.953

PHP 将其中的*值*组合为结果组合数组中`$occurances`的数组键。由于您已`0`两次指定该值，`user2`因此将始终假定数组中的第一个位置。

对于您的解决方案，这不是更好吗：

```
foreach($occurances as $userindex => $occurs)
{
    echo '<tr><td>'.$users[$userindex].'</td><td>'.$occurs.'</td></tr>';
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-09T20:09:57.543

为什么不做

```
if(count($occurrences)==count($users)){
    foreach($occurences as $k, $v){
        ?><tr><td><? echo $users[$k]; ?></td><td><? echo $v; ?></td></tr><?
    }
} 
```

确认两个数组的大小匹配，然后实现所需的输出。

# php - getimagesize() 和 basename() 错误 wordpress

> ID：13791195
> 
> 赞同：2
> 
> 时间：2012-12-09T20:00:13.880
> 
> 标签：php, wordpress

从今天早上开始，我试图知道为什么我的 wordpress 全新安装会出现这个错误。当我尝试将图像放在帖子预览中时，它会附加。预览不起作用，因为 src 上的 url 错误

```
<img src="http://myname.com/wp-content/uploads/2012/12/" width="" height="" style="position: absolute; opacity: 0;"/> 
```

apache2 日志：

```
[Sun Dec 09 15:54:44 2012] [error] PHP Warning:  getimagesize() expects parameter 1 to be string, object given in /var/www/wordpress/wp-content/themes/montezuma/includes/thumb.php on line 222
[Sun Dec 09 15:54:44 2012] [error] PHP Warning:  basename() expects parameter 1 to be string, object given in /var/www/wordpress/wp-content/themes/montezuma/includes/thumb.php on line 223 
```

我的 php 版本：带有 Suhosin-Patch (cli) 的 PHP 5.3.3-7+squeeze14

我的 wordpress 版本：版本 3.4.2

thumb.php 中的行：

```
220                 // no cache files - let's finally resize it
221                 $new_img_path = image_resize( $file_path, $width, $height, $crop );
222                 $new_img_size = getimagesize( $new_img_path );
223                 $new_img = str_replace( basename( $image_src[0] ), basename( $new_img_path ), $image_src[0] ); 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:05:09.557

我找到了完全相同的问题的解决方案。

图片在上传时需要至少 900 像素宽。

# php - 在 Windows 上使用 wkhtmltopdf

> ID：13791196
> 
> 赞同：12
> 
> 时间：2012-12-09T20:00:15.957
> 
> 标签：php, shell, wkhtmltopdf, shell-exec, wkhtmltoimage

我正在尝试设置漂亮的 HTML 到图像插件，称为 wkhtmltopdf，但我遇到了非常困难的时间。

**到目前为止我做了什么：**

1.  下载了 wkhtmltopdf zip 包并在我的网站根文件夹中解压了文件

2.  作为测试，我在 index.php 文件中包含以下代码，我希望将 bbc.com 网站的内容作为 .jpg 图像保存在我的网站根文件夹中：..

    shell_exec('./wkhtmltopdf --quality 50 [http://www.bbc.com](http://www.bbc.com) bbc.jpg');

似乎什么也没有发生。PHP**没有**在安全模式下运行，所以这不是问题。shell_exec 正在执行，我能够使用它创建一个 .txt 文档。

我已经研究了好几天了，我向任何人提供了**100 赏金**，任何人都可以提出一个清晰、简化的分步工作指南，说明如何在 Widows 上设置 wkhtmltopdf 以使用 PHP 运行。

**更具体地说**，我正在寻找有关如何：

*   使用 php 设置 wkhtmltopdf 在 Windows 上运行（包括常见问题的详细信息以及如何克服这些问题）。

*   单击按钮或链接：将“当前”网页打印为 pdf，包括所有填写的**输入**值（包括此部分的示例代码）。带有改变页面内容的事件的网页，应该打印出页面的**当前**版本，而**不是**页面的初始状态。

*   创建 .pdf 的下载链接，onClick 与上述创建和打印到 pdf 的相同功能（包括此部分的示例代码）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T15:53:08.693

很难弄清楚这里的实际问题是什么，但我做[了一篇关于让 wkhtmltopdf 在 Windows 7 / PHP Environment 中响应的博文教程](http://nenotlep.blogspot.fi/2012/12/php-wkhtmltopdf-and-win-7-eleven-steps.html)。询问您是否需要更多详细信息 - 我确信这不包括您的问题。

就像我在评论中所说的那样，您的函数调用`shell_exec('./wkhtmltopdf --quality 50 http://www.bbc.com bbc.jpg');`将失败，因为 wkhtmltopdf 和 wkhtmltoimage 是不同的程序并接受不同的命令行选项。在该命令中将 wkhtmltopdf 替换为 wkhtmltoimage，您可能会生成一个输出文件。我相信在您的情况下，像这样的测试执行`shell_exec('c:\wkhtmltopdf\wkhtmltopdf www.google.com goog.pdf 2>> err3.txt 1>> out3.txt');`将是最有趣的，因为您可以看到 wkhtmltopdf 所做的所有不同的输入/输出。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-09T04:57:43.917

我意识到这是一个老问题，但由于它是我发现的唯一一个可以从 HTML 打印到 PDF 并保留图像和背景颜色的库，所以我使用 Windows 命令提示符。我曾经使用 PDF Architect，但它永远无法处理背景颜色。

当您安装 wkhtmltopdf 时，它将进入 c:\Program Files\wkhtmltopdf\ 或 c:\Program Files (x86)\wkhtmltopdf。

假设您有一个本地 PHP 环境，该环境`http://localhost/`设置为您的起点。假设您有一个名为 html_invoice.html 的文件，并且您想将其打印到名为 dev_invoice_200.pdf 的文件中，并将其放入 xampp Web 服务器内的 invoices 文件夹中。为此，您将启动 Windows 命令提示符（即开始 -> 所有程序 -> 附件 -> 命令提示符或开始 -> 运行 -> cmd）并键入：

```
c:\Program Files\wkhtmltopdf\bin\wkhtmltopdf http://localhost/html_invoice.html c:\xampp\htdocs\invoices\dev_invoice_200.pdf 
```

这将在正确的位置创建 PDF。

由于我们使用的是 Windows 命令提示符，因此真的没有理由使用 PHP。相反，我们可以使用批处理文件，如果需要自动化，可以使用 Windows 任务计划程序调用批处理文件（开始 -> 所有程序 -> 附件 -> 系统工具 -> 任务计划程序）。

如果您从未编写过批处理文件，您只需将要执行的命令输入到纯文本文件中，然后使用 .bat 扩展名保存。

因此，假设我们希望始终在同一位置将文件 html_invoice.html 打印到名为 dev_invoice.pdf 的发票文件夹中，并且我们将在它到达那里后更改名称。您只需将上面的行减去“_200”放入文本文件并将其另存为 .bat，然后在 Windows 中双击它或通过任务计划程序运行它。

# c# - 如何在windows phone 7中添加字体

> ID：13791199
> 
> 赞同：2
> 
> 时间：2012-12-09T20:00:18.687
> 
> 标签：c#, windows-phone-7, fonts, windows-phone-7.1

我下载并安装了[Neverwinter](http://cooltext.com/Download-Font-Neverwinter)字体，但在 FontFamily 中找不到它。我怎样才能添加它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:19:49.203

也许[这里](http://www.markermetro.com/2011/06/technical/windows-phone-7-custom-fonts/)描述的技术对你有用？

# c# - 网络浏览器包装

> ID：13791201
> 
> 赞同：0
> 
> 时间：2012-12-09T20:00:30.763
> 
> 标签：c#, winforms, webbrowser-control

是否有任何包装器允许我使用 c# 直接从 winforms 应用程序中的 webbrowser 对象访问和修改原始请求数据（如标题、正文、cookies？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:05:40.523

我在那里看到的唯一可以让您询问浏览器正在做什么的是 Fiddler，它有一个[API](http://fiddler.wikidot.com/fiddlercore-api)。您可能想检查一下，但我个人不会考虑在我的生产软件中使用它，除非我对它有真正的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:40:41.233

您也可以尝试实现自己的[Asynchronous Pluggable Protocol](http://msdn.microsoft.com/en-us/library/aa767743%28v=vs.85%29.aspx)。因此，您将能够访问和修改请求，然后使用例如[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)原始套接字将它们转发到目的地。

您可能认为对入门有用的一些链接：

*   [在 C# 中实现无需 IIS 即可查看 aspx 页面的简单协议](http://www.codeproject.com/Articles/6120/A-Simple-protocol-to-view-aspx-pages-without-IIS-i)
*   [Internet Explorer 异步协议库](http://ieasyncprotocol.codeplex.com/)

虽然，在这种情况下使用异步可插拔协议仍然看起来像一个 hack（至少对我来说）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:47:40.810

好的......所以我在过去的 4 天里一直在网上搜寻需要这样的功能的可靠解决方案。主要是能够访问原始出站请求，以及与 .Net 中的 webBrowser 控件相关联的原始入站响应。结果绝对令人失望。为什么会有这么大的一笔交易？为什么 MSFT 不能只修复该控件并为 rawRequest 和 RawResponse 添加属性？如果您仔细观察，您会发现在过去的 5 到 10 年里，开发人员一直在尝试解决这个问题。没有人提出解决方案？真的吗？怎么回事？？？

*   “WebBrowser.CreateSink 方法”

    *   巨大的蠕虫罐头。去这里会打破你的想法。
*   《最完整的 C# Webbrowser 封装控件》

    *   在 Win7 上，尝试从 2006 年开始 regsrv32 所需的旧 ass ATL DLL 会导致错误。
*   “子类化 WebBrowser 控件”

    *   无法访问实际的请求/响应 HTTP 数据包数据。

...叹

# text - 查找和替换帮助，从文本中删除某些内容

> ID：13791203
> 
> 赞同：0
> 
> 时间：2012-12-09T20:00:38.607
> 
> 标签：text, replace, notepad++, notepad

我的文件包含 18k 行文本，其中包含链接和 rondom ID 代码，如下所示：

"

```
http://arduino.cc/en/Main/ArduinoBoardNano
SC09661
http://arduino.cc/en/Main/ArduinoBoardUno
http://www.farnell.com/datasheets/1639172.pdf

SC09670
http://arduino.cc/en/Main/ArduinoBoardUno
SC09665
http://arduino.cc/en/Main/ArduinoEthernetShield
SC09662
http://arduino.cc/en/Main/ArduinoXbeeShield
CS23020
http://bcove.me/zypzpy2q
SC09147
http://cache.national.com/ds/LM/LM134.pdf
SC08546
http://cache.national.com/ds/LM/LM2574.pdf
SC08540
http://cache.national.com/ds/LM/LM2576.pdf 
```

“我需要从这个文本中删除所有那些 ID 代码 (SC08540,SC09662,...) 和不以 .pdf 结尾的链接，我知道它可以通过 Notepad++ 和其他程序使用 Replace funkction，但我不知道如何准确我应该这样做。也许我可以得到帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:54:46.390

我还没有找到使用 Notepad++ 一次性完成此操作的方法，但这应该可以：

*   打开替换框 ( `Search --> Replace...`) 并选择`Regular expression`
*   搜索`^.*[^\.][^p][^d][^f]$`
*   确保`Replace with`为空
*   `Replace All`

现在您有了一个包含空行和所需链接的文件。至少有两种方法可以摆脱空行：

方法一：**TextFX插件**

*   选择所有文本
*   `TextFX --> TextFX Edit --> Delete blank lines`

方法二：**替换**

*   确保光标位于文档的开头
*   打开替换框 ( `Search --> Replace...`) 并选择`Extended`
*   搜索`\n\r`
*   确保`Replace with`为空
*   `Replace All`

# finite-automata - DFA 可以有 epsilon/lambda 转换吗？

> ID：13791205
> 
> 赞同：12
> 
> 时间：2012-12-09T20:00:51.373
> 
> 标签：finite-automata, state-machine, automata, dfa, automata-theory

找不到任何肯定的东西。具有任何 epsilon 转换的 NFA 是 epsilon-NFA 吗？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-09T20:08:59.493

DFA 没有 epsilon 转换。如果有，它可以在没有任何输入的情况下从当前状态转换到其他状态，即没有任何输入，甚至没有 {} 或 phi。作为定义，我们知道输入必须来自输入集。希望这可以消除您的疑问...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-17T08:08:45.767

From the definition of DFA ,"Deterministic Finite Automata is a machine that can't move on other state without getting any input".And since epsilon means nothing.Hence DFA can't move on epsilon moves.

Whereas from the definition of NFA,"Non deterministic Finite Automata is a machine that may move on other state without getting any input".So NFA can move on epsilon moves.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T07:43:05.103

DFA 必须有明确的输入符号才能从一种状态移动到另一种状态。DFA 中不允许 Epsilon 移动，因为它会将 DFA 更改为 NFA。例如，假设您处于状态 Q1，并且您有一个转移 (Q1, e) = Q2，在这种情况下您可以不应用任何输入直接进入 Q2 或者您可以停留在 Q1 状态，因此您有两个选择机会在状态 Q1。对于 DFA，您不能有任何选择标准。这就是 DFA 没有 epsilon 移动的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-18T19:53:23.717

如果开始状态也是结束状态，则 fa 接受 lamda。此外，如果 fa 使用 lamda 明确显示从一个状态到下一个状态的转换，则可以将 lamda 视为输入。

# php - 使用 GD 获取图像所有像素图的更好方法

> ID：13791207
> 
> 赞同：8
> 
> 时间：2012-12-09T20:00:55.840
> 
> 标签：php, gd

以下代码使用[SimpleImage 库](http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php)

我有一个从图像中获取像素的函数：

```
function getPixel($x, $y) {

    $colors = imagecolorsforindex($this->image, imagecolorat($this->image, $x, $y));
    $n[0] = $colors['red'];
    $n[1] = $colors['green'];
    $n[2] = $colors['blue'];
    $str = "#";
    for($x=0;$x < 3; $x++){
        $n[$x] = intval($n[$x],10);
        if (is_nan($n[$x])) return "00";
        $n[$x] = max(0, min($n[$x],255));
        $bam = "0123456789ABCDEF";
        $str .= $bam{($n[$x]-$n[$x]%16)/16} . $bam{$n[$x]%16};
    }
    return $str; 
} 
```

为了获取图像中的每个像素，我使用这个循环：

```
$arr = [];
for($y = 0;$y < $image->getHeight(); $y++){
    $arr[$y] = [];
    for($x = 0; $x < $image->getWidth(); $x++){
        $arr[$y][$x] = $image->getPixel($x, $y);
    }
} 
```

我想知道是否有更快的方法来使用 GD 和 PHP 做到这一点？

编辑

我在想的是某种方法可以在没有 PHP 循环的情况下从 GD 获取每个像素的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-09T06:00:45.660

这是丑陋的蛮力方法，在每个像素上使用 imagecolorat()。在我对大型（6.5Mpixel）图像的测试中，它比@cleong 提出的更优雅的 GD hack 快了大约 3.6 秒，或者说快了大约 1.1 秒。它还具有简单粗暴的优点，并且独立于未记录的内部 GD2 格式。

```
$alphaLookup = array(
    0x00000000=>"\xff",0x01000000=>"\xfd",0x02000000=>"\xfb",0x03000000=>"\xf9",
    0x04000000=>"\xf7",0x05000000=>"\xf5",0x06000000=>"\xf3",0x07000000=>"\xf1",
    0x08000000=>"\xef",0x09000000=>"\xed",0x0a000000=>"\xeb",0x0b000000=>"\xe9",
    0x0c000000=>"\xe7",0x0d000000=>"\xe5",0x0e000000=>"\xe3",0x0f000000=>"\xe1",
    0x10000000=>"\xdf",0x11000000=>"\xdd",0x12000000=>"\xdb",0x13000000=>"\xd9",
    0x14000000=>"\xd7",0x15000000=>"\xd5",0x16000000=>"\xd3",0x17000000=>"\xd1",
    0x18000000=>"\xcf",0x19000000=>"\xcd",0x1a000000=>"\xcb",0x1b000000=>"\xc9",
    0x1c000000=>"\xc7",0x1d000000=>"\xc5",0x1e000000=>"\xc3",0x1f000000=>"\xc1",
    0x20000000=>"\xbf",0x21000000=>"\xbd",0x22000000=>"\xbb",0x23000000=>"\xb9",
    0x24000000=>"\xb7",0x25000000=>"\xb5",0x26000000=>"\xb3",0x27000000=>"\xb1",
    0x28000000=>"\xaf",0x29000000=>"\xad",0x2a000000=>"\xab",0x2b000000=>"\xa9",
    0x2c000000=>"\xa7",0x2d000000=>"\xa5",0x2e000000=>"\xa3",0x2f000000=>"\xa1",
    0x30000000=>"\x9f",0x31000000=>"\x9d",0x32000000=>"\x9b",0x33000000=>"\x99",
    0x34000000=>"\x97",0x35000000=>"\x95",0x36000000=>"\x93",0x37000000=>"\x91",
    0x38000000=>"\x8f",0x39000000=>"\x8d",0x3a000000=>"\x8b",0x3b000000=>"\x89",
    0x3c000000=>"\x87",0x3d000000=>"\x85",0x3e000000=>"\x83",0x3f000000=>"\x81",
    0x40000000=>"\x7f",0x41000000=>"\x7d",0x42000000=>"\x7b",0x43000000=>"\x79",
    0x44000000=>"\x77",0x45000000=>"\x75",0x46000000=>"\x73",0x47000000=>"\x71",
    0x48000000=>"\x6f",0x49000000=>"\x6d",0x4a000000=>"\x6b",0x4b000000=>"\x69",
    0x4c000000=>"\x67",0x4d000000=>"\x65",0x4e000000=>"\x63",0x4f000000=>"\x61",
    0x50000000=>"\x5f",0x51000000=>"\x5d",0x52000000=>"\x5b",0x53000000=>"\x59",
    0x54000000=>"\x57",0x55000000=>"\x55",0x56000000=>"\x53",0x57000000=>"\x51",
    0x58000000=>"\x4f",0x59000000=>"\x4d",0x5a000000=>"\x4b",0x5b000000=>"\x49",
    0x5c000000=>"\x47",0x5d000000=>"\x45",0x5e000000=>"\x43",0x5f000000=>"\x41",
    0x60000000=>"\x3f",0x61000000=>"\x3d",0x62000000=>"\x3b",0x63000000=>"\x39",
    0x64000000=>"\x37",0x65000000=>"\x35",0x66000000=>"\x33",0x67000000=>"\x31",
    0x68000000=>"\x2f",0x69000000=>"\x2d",0x6a000000=>"\x2b",0x6b000000=>"\x29",
    0x6c000000=>"\x27",0x6d000000=>"\x25",0x6e000000=>"\x23",0x6f000000=>"\x21",
    0x70000000=>"\x1f",0x71000000=>"\x1d",0x72000000=>"\x1b",0x73000000=>"\x19",
    0x74000000=>"\x17",0x75000000=>"\x15",0x76000000=>"\x13",0x77000000=>"\x11",
    0x78000000=>"\x0f",0x79000000=>"\x0d",0x7a000000=>"\x0b",0x7b000000=>"\x09",
    0x7c000000=>"\x07",0x7d000000=>"\x05",0x7e000000=>"\x03",0x7f000000=>"\x00"
); // Lookup table for chr(255-(($x >> 23) & 0x7f)).

$chr = array(
    "\x00","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\x08","\x09","\x0A","\x0B","\x0C","\x0D","\x0E","\x0F",
    "\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1A","\x1B","\x1C","\x1D","\x1E","\x1F",
    "\x20","\x21","\x22","\x23","\x24","\x25","\x26","\x27","\x28","\x29","\x2A","\x2B","\x2C","\x2D","\x2E","\x2F",
    "\x30","\x31","\x32","\x33","\x34","\x35","\x36","\x37","\x38","\x39","\x3A","\x3B","\x3C","\x3D","\x3E","\x3F",
    "\x40","\x41","\x42","\x43","\x44","\x45","\x46","\x47","\x48","\x49","\x4A","\x4B","\x4C","\x4D","\x4E","\x4F",
    "\x50","\x51","\x52","\x53","\x54","\x55","\x56","\x57","\x58","\x59","\x5A","\x5B","\x5C","\x5D","\x5E","\x5F",
    "\x60","\x61","\x62","\x63","\x64","\x65","\x66","\x67","\x68","\x69","\x6A","\x6B","\x6C","\x6D","\x6E","\x6F",
    "\x70","\x71","\x72","\x73","\x74","\x75","\x76","\x77","\x78","\x79","\x7A","\x7B","\x7C","\x7D","\x7E","\x7F",
    "\x80","\x81","\x82","\x83","\x84","\x85","\x86","\x87","\x88","\x89","\x8A","\x8B","\x8C","\x8D","\x8E","\x8F",
    "\x90","\x91","\x92","\x93","\x94","\x95","\x96","\x97","\x98","\x99","\x9A","\x9B","\x9C","\x9D","\x9E","\x9F",
    "\xA0","\xA1","\xA2","\xA3","\xA4","\xA5","\xA6","\xA7","\xA8","\xA9","\xAA","\xAB","\xAC","\xAD","\xAE","\xAF",
    "\xB0","\xB1","\xB2","\xB3","\xB4","\xB5","\xB6","\xB7","\xB8","\xB9","\xBA","\xBB","\xBC","\xBD","\xBE","\xBF",
    "\xC0","\xC1","\xC2","\xC3","\xC4","\xC5","\xC6","\xC7","\xC8","\xC9","\xCA","\xCB","\xCC","\xCD","\xCE","\xCF",
    "\xD0","\xD1","\xD2","\xD3","\xD4","\xD5","\xD6","\xD7","\xD8","\xD9","\xDA","\xDB","\xDC","\xDD","\xDE","\xDF",
    "\xE0","\xE1","\xE2","\xE3","\xE4","\xE5","\xE6","\xE7","\xE8","\xE9","\xEA","\xEB","\xEC","\xED","\xEE","\xEF",
    "\xF0","\xF1","\xF2","\xF3","\xF4","\xF5","\xF6","\xF7","\xF8","\xF9","\xFA","\xFB","\xFC","\xFD","\xFE","\xFF",
); // Lookup for chr($x): much faster.

function lookUpImageBytes($canvas) {
    global $alphaLookup, $chr;
    $imageWidth = imagesx($canvas);
    $imageHeight = imagesy($canvas);
    // Faster than append, and >500mb more memory efficient for a 6.5MPx image!
    $imageData = str_repeat("\x00\x00\x00\x00", $imageWidth * $imageHeight);

    // Loop over each single pixel.
    $j = 0;
    for ($y = 0; $y < $imageHeight; $y++) {
        for ($x = 0; $x < $imageWidth; $x++) {
            // Grab the pixel data.
            $argb = imagecolorat($canvas, $x, $y);
            $imageData[$j++] = $alphaLookup[$argb & 0x7f000000]; // A (convert from GD).
            // NB: three $chr arrays to replace the shifts WON'T improve speed.
            $imageData[$j++] = $chr[($argb >> 16) & 0xFF]; // R
            $imageData[$j++] = $chr[($argb >> 8) & 0xFF]; // G
            $imageData[$j++] = $chr[$argb & 0xFF]; // B
        }
    }
    return $imageData;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:54:04.257

有一种更快的方法，但它非常棘手。它所涉及的是将图像导出为 GD2 格式，然后直接访问字节。GD 将像素存储在块中，因此循环遍历像素并不是直截了当的。如果做得好，它确实会产生更好的性能，因为您不再需要在每个像素上调用函数的开销。

这是我编写的一些代码，用于从图像中捕获 alpha 通道。如您所见，由于分块，循环并不是那么明显：

```
 imagesavealpha($image, true);
    ob_start();
    imagegd2($image);
    $gdRawData = ob_get_clean();

    $array = unpack("Nheader/nversion/nimageWidth/nimageHeight/nchunkSize/ndataFormat/ncolumnCount/nrowCount", $gdRawData);
    $imageWidth = $array['imageWidth'];
    $imageHeight = $array['imageHeight'];

    $chunkWidth = $chunkHeight = $array['chunkSize'];
    $columnCount = $array['columnCount'];
    $rowCount = $array['rowCount'];
    $lastColumnWidth = $imageWidth - ($columnCount - 1) * $chunkWidth;
    $lastRowHeight = $imageHeight - ($rowCount - 1) * $chunkHeight;

    static $transparencyToAlpha = array("\x7f" => "\x00", "\x7f" => "\x01", "\x7e" => "\x02", "\x7e" => "\x03", "\x7d" => "\x04", "\x7d" => "\x05", "\x7c" => "\x06", "\x7c" => "\x07", "\x7b" => "\x08", "\x7b" => "\x09", "\x7a" => "\x0a", "\x7a" => "\x0b", "\x79" => "\x0c", "\x79" => "\x0d", "\x78" => "\x0e", "\x78" => "\x0f", "\x77" => "\x10", "\x77" => "\x11", "\x76" => "\x12", "\x76" => "\x13", "\x75" => "\x14", "\x75" => "\x15", "\x74" => "\x16", "\x74" => "\x17", "\x73" => "\x18", "\x73" => "\x19", "\x72" => "\x1a", "\x72" => "\x1b", "\x71" => "\x1c", "\x71" => "\x1d", "\x70" => "\x1e", "\x70" => "\x1f", "\x6f" => "\x20", "\x6f" => "\x21", "\x6e" => "\x22", "\x6e" => "\x23", "\x6d" => "\x24", "\x6d" => "\x25", "\x6c" => "\x26", "\x6c" => "\x27", "\x6b" => "\x28", "\x6b" => "\x29", "\x6a" => "\x2a", "\x6a" => "\x2b", "\x69" => "\x2c", "\x69" => "\x2d", "\x68" => "\x2e", "\x68" => "\x2f", "\x67" => "\x30", "\x67" => "\x31", "\x66" => "\x32", "\x66" => "\x33", "\x65" => "\x34", "\x65" => "\x35", "\x64" => "\x36", "\x64" => "\x37", "\x63" => "\x38", "\x63" => "\x39", "\x62" => "\x3a", "\x62" => "\x3b", "\x61" => "\x3c", "\x61" => "\x3d", "\x60" => "\x3e", "\x60" => "\x3f", "\x5f" => "\x40", "\x5f" => "\x41", "\x5e" => "\x42", "\x5e" => "\x43", "\x5d" => "\x44", "\x5d" => "\x45", "\x5c" => "\x46", "\x5c" => "\x47", "\x5b" => "\x48", "\x5b" => "\x49", "\x5a" => "\x4a", "\x5a" => "\x4b", "\x59" => "\x4c", "\x59" => "\x4d", "\x58" => "\x4e", "\x58" => "\x4f", "\x57" => "\x50", "\x57" => "\x51", "\x56" => "\x52", "\x56" => "\x53", "\x55" => "\x54", "\x55" => "\x55", "\x54" => "\x56", "\x54" => "\x57", "\x53" => "\x58", "\x53" => "\x59", "\x52" => "\x5a", "\x52" => "\x5b", "\x51" => "\x5c", "\x51" => "\x5d", "\x50" => "\x5e", "\x50" => "\x5f", "\x4f" => "\x60", "\x4f" => "\x61", "\x4e" => "\x62", "\x4e" => "\x63", "\x4d" => "\x64", "\x4d" => "\x65", "\x4c" => "\x66", "\x4c" => "\x67", "\x4b" => "\x68", "\x4b" => "\x69", "\x4a" => "\x6a", "\x4a" => "\x6b", "\x49" => "\x6c", "\x49" => "\x6d", "\x48" => "\x6e", "\x48" => "\x6f", "\x47" => "\x70", "\x47" => "\x71", "\x46" => "\x72", "\x46" => "\x73", "\x45" => "\x74", "\x45" => "\x75", "\x44" => "\x76", "\x44" => "\x77", "\x43" => "\x78", "\x43" => "\x79", "\x42" => "\x7a", "\x42" => "\x7b", "\x41" => "\x7c", "\x41" => "\x7d", "\x40" => "\x7e", "\x40" => "\x7f", "\x3f" => "\x80", "\x3f" => "\x81", "\x3e" => "\x82", "\x3e" => "\x83", "\x3d" => "\x84", "\x3d" => "\x85", "\x3c" => "\x86", "\x3c" => "\x87", "\x3b" => "\x88", "\x3b" => "\x89", "\x3a" => "\x8a", "\x3a" => "\x8b", "\x39" => "\x8c", "\x39" => "\x8d", "\x38" => "\x8e", "\x38" => "\x8f", "\x37" => "\x90", "\x37" => "\x91", "\x36" => "\x92", "\x36" => "\x93", "\x35" => "\x94", "\x35" => "\x95", "\x34" => "\x96", "\x34" => "\x97", "\x33" => "\x98", "\x33" => "\x99", "\x32" => "\x9a", "\x32" => "\x9b", "\x31" => "\x9c", "\x31" => "\x9d", "\x30" => "\x9e", "\x30" => "\x9f", "\x2f" => "\xa0", "\x2f" => "\xa1", "\x2e" => "\xa2", "\x2e" => "\xa3", "\x2d" => "\xa4", "\x2d" => "\xa5", "\x2c" => "\xa6", "\x2c" => "\xa7", "\x2b" => "\xa8", "\x2b" => "\xa9", "\x2a" => "\xaa", "\x2a" => "\xab", "\x29" => "\xac", "\x29" => "\xad", "\x28" => "\xae", "\x28" => "\xaf", "\x27" => "\xb0", "\x27" => "\xb1", "\x26" => "\xb2", "\x26" => "\xb3", "\x25" => "\xb4", "\x25" => "\xb5", "\x24" => "\xb6", "\x24" => "\xb7", "\x23" => "\xb8", "\x23" => "\xb9", "\x22" => "\xba", "\x22" => "\xbb", "\x21" => "\xbc", "\x21" => "\xbd", "\x20" => "\xbe", "\x20" => "\xbf", "\x1f" => "\xc0", "\x1f" => "\xc1", "\x1e" => "\xc2", "\x1e" => "\xc3", "\x1d" => "\xc4", "\x1d" => "\xc5", "\x1c" => "\xc6", "\x1c" => "\xc7", "\x1b" => "\xc8", "\x1b" => "\xc9", "\x1a" => "\xca", "\x1a" => "\xcb", "\x19" => "\xcc", "\x19" => "\xcd", "\x18" => "\xce", "\x18" => "\xcf", "\x17" => "\xd0", "\x17" => "\xd1", "\x16" => "\xd2", "\x16" => "\xd3", "\x15" => "\xd4", "\x15" => "\xd5", "\x14" => "\xd6", "\x14" => "\xd7", "\x13" => "\xd8", "\x13" => "\xd9", "\x12" => "\xda", "\x12" => "\xdb", "\x11" => "\xdc", "\x11" => "\xdd", "\x10" => "\xde", "\x10" => "\xdf", "\x0f" => "\xe0", "\x0f" => "\xe1", "\x0e" => "\xe2", "\x0e" => "\xe3", "\x0d" => "\xe4", "\x0d" => "\xe5", "\x0c" => "\xe6", "\x0c" => "\xe7", "\x0b" => "\xe8", "\x0b" => "\xe9", "\x0a" => "\xea", "\x0a" => "\xeb", "\x09" => "\xec", "\x09" => "\xed", "\x08" => "\xee", "\x08" => "\xef", "\x07" => "\xf0", "\x07" => "\xf1", "\x06" => "\xf2", "\x06" => "\xf3", "\x05" => "\xf4", "\x05" => "\xf5", "\x04" => "\xf6", "\x04" => "\xf7", "\x03" => "\xf8", "\x03" => "\xf9", "\x02" => "\xfa", "\x02" => "\xfb", "\x01" => "\xfc", "\x01" => "\xfd", "\x00" => "\xfe", "\x00" => "\xff");

    $alphaDataSize = $imageWidth * $imageHeight;
    $alphaData = str_repeat("\x00", $alphaDataSize);

    // loop through all rows 
    for($r = 0, $j = 23; $r < $rowCount; $r++) {
        $rowHeight = ($r == $rowCount - 1) ? $lastRowHeight : $chunkHeight;
        // loop through chunks in each row
        for($c = 0; $c < $columnCount; $c++) {
            $columnWidth = ($c == $columnCount - 1) ? $lastColumnWidth : $chunkWidth;
            $firstY = $r * $chunkHeight;
            $lastY = $firstY + $rowHeight;
            // loop through scanlines in each chunk
            for($y = $firstY; $y < $lastY; $y++) {
                $firstX = $c * $chunkWidth;
                $firstAlphaPosition = $y * $imageWidth + $firstX;
                $lastAlphaPosition = $firstAlphaPosition + $columnWidth;
                // loop through each pixel in each chunk scanline
                for($i = $firstAlphaPosition; $i < $lastAlphaPosition; $i++, $j+= 4) {
                    $alphaData[$i] = $transparencyToAlpha[$gdRawData[$j]];
                }
            }
        }
    } 
```

每个像素由四个字节组成：alpha、red、green 和 blue。在这里，我只捕获第一个字节。

# c# - System.Timers.Timer 调用 WPF 组件的方法

> ID：13791215
> 
> 赞同：0
> 
> 时间：2012-12-09T20:01:48.110
> 
> 标签：c#, wpf, events, timer, invoke

我有一个类，负责经典蛇游戏逻辑的逻辑，它使用`System.Timers.Timer`. 因为完全相同的类用于完全相同的项目的 Windows 窗体版本，所以我不想更改它。

如何将 WPF 窗口的方法连接到设计用于 WinForms ( `ISynchronizeInvoke`) 的事件？我正在寻找相当长的时间来实现这一目标，而无需重写我的逻辑类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:14:17.950

您可以使用`Dispatcher`调用 UI 线程

```
private void ThreadingTimerTick(object state)// or whatever your method is.
{
   Dispatcher.Invoke(DispatcherPriority.Background, (Action)delegate()
   {
     // do stuff
   });
} 
```

# objective-c - 当文本字段等于字符串时，ios制作按钮更改视图

> ID：13791217
> 
> 赞同：2
> 
> 时间：2012-12-09T20:01:50.283
> 
> 标签：objective-c, ios, button, if-statement, uitextfield

我正在制作这种密码来跳过游戏中的关卡。但我不知道我需要什么代码来更改按钮视图控制器......

* * *

```
- (IBAction)button:(id)sender {
    if ([txt.text isEqualToString:@"passwordToSkipLevel1"]) {
   // Code to change View Controller???
  }
} 
```

我不确定到目前为止是否正确，我也不确定如何让它更改视图控制器......

有任何想法吗？

额外：有什么方法可以使密码不区分大小写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:09:28.420

就目前而言，您所拥有的似乎还不错。要使比较不区分大小写，您可以使用

```
if ([txt.txt localizedCaseInsensitiveCompare:@"passwordToSkipLevel1"] == NSOrderedSame) {
    // ...
} 
```

要更改 ViewController... 这是基于故事板的设计吗？如果是这样，你可以写

```
if ([txt.txt localizedCaseInsensitiveCompare:@"passwordToSkipLevel1"] == NSOrderedSame) {
    [self performSegueWithIdentifier:@"SegueToLevel2VC" sender:self];
} 
```

您在哪里`SegueToLevel2CV`是您为进入下一个级别的 segue 提供的标识符，在您构建故事板时输入到 Interface Builder 中。

# ssh - 使用 ECDSA 对 Amazon AWS EC2 服务器进行 SSH 指纹验证？

> ID：13791219
> 
> 赞同：39
> 
> 时间：2012-12-09T20:02:32.600
> 
> 标签：ssh, amazon-web-services, amazon-ec2, fingerprint, ecdsa

`ssh`当我创建一个新的 Amazon EC2 服务器时，我像往常一样使用它连接到它。

我看到了典型的警告：

```
$ ssh myserver  
The authenticity of host 'ec2-12-34-567-890.compute-1.amazonaws.com (12.34.567.890)'     can't be established.
ECDSA key fingerprint is 31:66:15:d2:19:41:2b:09:8a:8f:9f:bd:de:c6:ff:07.
Are you sure you want to continue connecting (yes/no)? 
```

登录前如何验证指纹？

理想情况下，答案基于原始创建控制台日志之外的其他内容——因为日志可能在系统重新启动后或在生成大量输出的大型系统安装脚本期间被刷新，或者连接到旧系统在创建时未跟踪的密钥。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-07-16T06:47:32.737

正如@joelparkerhenderson 的回答所涵盖的，您可以在生成主机密钥时（通过`cloud-init`脚本）从服务器的初始启动日志中收集主机密钥指纹：

[![在此处输入图像描述](../Images/8f7ed453ac000dc1a77f6769108e18e0.png)](https://i.stack.imgur.com/G5Fej.png)

* * *

如果您无法通过这种方式收集密钥，您可以通过从私有 Amazon 网络中的另一个受信任实例连接到您的目标实例来获取它们，从而保护您自己免受中间人攻击。

在受信任的实例（您知道指纹的那个）终端上，您可以使用以下命令收集指纹（`172.33.31.199`是私有 IP）：

```
$ ssh-keyscan 172.33.31.199 > ec2key
$ ssh-keygen -l -f ec2key
256 SHA256:oZHeiMEPLKetRgd3M5Itgwaqr2zJJH93EvSdx5UoHbQ <ip> (ED25519)
2048 SHA256:8zg105EUFFrPFpVzdfTGsgXnxuSpTiQd85k0uNapUio <ip> (RSA)
256 SHA256:L7UXLw0djE5B9W7ZhvrkYVSTZyi1MEQ2dBaRtpkkUGY <ip> (ECDSA) 
```

* * *

如果您没有另一个您知道其指纹的实例，请创建新的临时实例，仅用于收集密钥。首先使用它的初始启动日志找到新临时实例的密钥。从公共网络连接到临时实例。然后通过私有 Amazon 网络从临时实例连接到目标实例来收集目标实例的密钥。之后，您可以丢弃临时实例。

* * *

我已经准备好[使用 WinSCP 安全连接到 EC2 实例的指南](https://winscp.net/eng/docs/guide_amazon_ec2)。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-09T21:31:45.887

以下是在创建 EC2 系统期间对我有用的两个解决方案。

**解决方案 1：使用 Amazon EC2 控制面板**

*   转到[https://console.aws.amazon.com](https://console.aws.amazon.com)
*   点击“EC2”链接。
*   点击左侧栏中的“实例”
*   点按您想要的实例名称
*   点击选择按钮“操作”并选择“获取系统日志”（又名“控制台输出”）
*   在控制台输出中，您应该看到正在生成的密钥

**解决方案 2：使用 AWS EC2 命令行**

您可以使用`aws`命令或`ec2-get-console-output`命令。两者都可以从亚马逊下载。

要使用您的 EC2 私钥 pem 文件、证书 pem 文件、区域和实例：

```
ec2-get-console-output \
  --private-key pk-ABCDEF1234567890.pem \
  --cert cert-ABCDEF1234567890.pem \
  --region us-east-1c \
  i-e706689a 
```

输出显示 ssh 主机密钥指纹，如下所示：

```
ec2: -----BEGIN SSH HOST KEY FINGERPRINTS-----
ec2: 1024 e0:79:1e:ba:2e:3c:71:87:2c:f5:62:2b:0d:1b:6d:7b  root@ip-10-243-118-182 (DSA)
ec2: 256 31:66:15:d2:19:41:2b:09:8a:8f:9f:bd:de:c6:ff:07  root@ip-10-243-118-182 (ECDSA)
ec2: 2048 ce:ec:3b:d3:34:3f:f3:45:76:81:9e:76:7a:d9:f5:e8  root@ip-10-243-118-182 (RSA)
ec2: -----END SSH HOST KEY FINGERPRINTS----- 
```

该`aws`工具的工作原理类似。

注意：这些解决方案仅在创建期间或您可以获得控制台日志时有效。有关任何时候都可以使用的更广泛的解决方案，请参阅 Martin 的回答。

# c++ - 检查具有特定格式的 char 数组值

> ID：13791222
> 
> 赞同：0
> 
> 时间：2012-12-09T20:02:42.693
> 
> 标签：c++, validation, char

此部分代码检查 char 数组中的特定格式。

```
char emp_id[10];

    cout<<"Employee ID\t\t: ";

    while(cin.getline(emp_id,10)) {
        if (emp_id[0] == 'e' || emp_id[0] == 'E'){
            break;
        }
        std::cout << "Input error. Invalid employee ID format." << std::endl;
        cout<<"\nEmployee ID\t\t: ";
    } 
```

接受的格式是`e<employee ID number>`. 例如：`e3`或`E59`。后面的任何字母`e`都不接受，例如`Eg`,`e56h`等`e77$`。

我设法检查数组中的第一个字母是上面的代码`e`还是`E`上面的代码。然后我不知道如何检查无效格式，例如`Eg`or `e56h`。如果之前有人问过这个问题，请指向答案页面，因为我不确定应该使用什么搜索关键字。请帮助我，并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:10:02.020

尝试在第一个 char 之后使用 substring 并转换为 int，如下所示：

```
 int myNum = atoi(emp_id.substr(1, emp_id.length()).c_str()); 
```

如果成功则好，否则失败。

# python - 将表单中的字段成对呈现

> ID：13791225
> 
> 赞同：2
> 
> 时间：2012-12-09T20:03:06.547
> 
> 标签：python, django, forms

```
 <form action="/contact/" method="post">
 {% for field in form %}
 <div class="fieldWrapper">
    {{ field.errors }}
    {{ field.label_tag }}: {{ field }}
 </div>
{% endfor %}
<p><input type="submit" value="Send message" /></p>
</form> 
```

该代码与每行数据输入完美配合，但为了节省空间，我想以每行 2 组呈现数据..（即每行 2 个字段和使用`<br>`）

它应该看起来像

```
field1.tag : field1,   field2.tag: field2. 
```

或一些类似的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:33:38.483

## 最佳解决方案：造型

最好的解决方案是在样式级别上解决它。

像那样（[见演示](http://jsfiddle.net/Xjmc8/)）：

*   模板：

    ```
    <form action="/contact/" method="post">
        {% for field in form %}
            <div class="fieldWrapper">
                {{ field.errors }}
                {{ field.label_tag }}: {{ field }}
            </div>
        {% endfor %}
        <p><input type="submit" value="Send message" /></p>
    </form> 
    ```

*   CSS：

    ```
    .fieldWrapper {
        float: left;
        width: 50%;
    }​ 
    ```

## 替代解决方案：文档结构

或者，您可以使用更复杂的模板代码来生成行和列。为此，您可以使用[Django 的`for`循环变量](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)，例如：

*   `forloop.counter`(或`forloop.counter0`) - 包含循环中当前元素的编号，
*   `forloop.first`-`True`如果当前元素是第一个，`False`否则，
*   `forloop.last`-`True`如果当前元素是最后一个，`False`否则，

但是应该在样式层解决演示问题（“节省屏幕空间”）。

# sql - 在一个连接表上使用组合条件连接

> ID：13791226
> 
> 赞同：0
> 
> 时间：2012-12-09T20:03:14.423
> 
> 标签：sql, postgresql, join

我加入了一个表格，将歌曲加入流派。该表有一个“来源”列，用于标识找到该流派的位置。流派可以从博客、艺术家、标签和帖子中找到。

所以，

```
songs | song_genre                 | genres 
id    | song_id, source, genre_id  | id 
```

我想要构建的是一个类似这样的歌曲 SELECT 查询，因为我已经有一个genre_id：

```
IF exists song_genre with source='artist' AND a song_genre with source='blog'
OR exists song_genre with source='artist' AND a song_genre with source='post'
OR exists song_genre with source='tag' 
```

我打算通过做一堆连接来做到这一点，但我确信我做得不是很好。

使用 Postgres 9.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:00:56.030

kgu87 的查询是正确的，但可能会产生一个相对昂贵的计划，其中包含对子选择的大量计数。`case`所有这些计数都可以通过在源上 s 和 a的流派表上一次通过来累积`group by song_id`。如果没有样本数据，很难说这是否更快，但我怀疑它是可能的。我认为无论如何它更简单。

```
select g.song_id
from song_genre g
group by g.song_id
having
  ( sum(case when g.source = 'tag' then 1 else 0 end) > 0 )
  or
  ( sum(case when g.source = 'artist' then 1 else 0 end) > 0
    and (
      sum(case when g.source = 'blog' then 1 else 0 end) > 0
      or
      sum(case when g.source = 'post' then 1 else 0 end) > 0
    )
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:11:13.653

```
select id
from
(
    select distinct
    id,
    (
        select
        count(*) from
        song_genre b
        where a.id = b.song_id
        and b.source = 'artist'
    ) as artist,
    (
        select
        count(*) from
        song_genre b
        where a.id = b.song_id
        and b.source = 'blog'
    ) as blog,
    (
        select
        count(*) from
        song_genre b
        where a.id = b.song_id
        and b.source = 'post'
    ) as post,
    (
        select
        count(*) from
        song_genre b
        where a.id = b.song_id
        and b.source = 'tag'
    ) as tag
    from songs A
) AA
where
(AA.artist > 0 AND AA.blog > 0)
OR
(AA.artist > 0 AND AA.post > 0)
OR
(AA.tag > 0) 
```

# matlab - 在 Matlab 中处理符号链接？

> ID：13791228
> 
> 赞同：2
> 
> 时间：2012-12-09T20:03:15.710
> 
> 标签：matlab

Matlab 函数 exists() 和 dir() 似乎忽略了符号链接。你能告诉我如何找出符号链接是否存在吗？

```
>> exist('./path/to/symlink', 'file') 

ans =

     0

>> size(dir('./path/to/symlink'),1) 

ans =

     0 
```

编辑：这个问题实际上比仅仅检查存在更糟糕。通常的功能甚至不能按照符号链接来打开文件。尝试使用`dlmread()`, 例如返回“没有这样的文件或目录”错误。

编辑：现在我无法重现该问题。这一定是某种用户错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T20:27:28.207

你确定吗？它们在我的安装（ubuntu+R2012a）上工作得很好。

请注意，在 linux 中，路径名是区分大小写的，而在 Windows 上则不然！

`ls`您应该通过在终端中 -ing 来测试链接是否没有断开：

```
ls -l 
```

并查看链接指向的文件是否也存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-05T23:34:47.510

在 MATLAB 中，您可以使用

```
~isempty(dir(symLinkPath))  % Returns 0 if the symlink itself does not exist 
```

检查符号链接本身是否存在（而不是它链接到的目标）。要检查符号链接目标是否存在，您可以使用

```
exist(symLinkPath)  % Returns 0 if target of symlink does not exist 
```

# c# - Linq 查询结果更改不起作用

> ID：13791236
> 
> 赞同：0
> 
> 时间：2012-12-09T20:03:53.923
> 
> 标签：c#, .net, linq

```
var query = from table1 in dtSzotar
            where errorList.Any(word => table1.angol.Equals(word)) ||
                  errorList.Any(word=> table1.magyar.Equals(word))
            select new QueryObject
            {
                Lesson = table1.lesson,
                English = table1.angol,
                Hungarian = table1.magyar,
                Answer = "",
            };
foreach (QueryObject row in query)
{
      String tmp;
      ((App)Application.Current).Answer.TryGetValue(row.English, out tmp); 
      row.Answer = tmp;
}

dgInCorrect.ItemsSource = query.ToList(); 
```

我也试图在数据网格中显示错误的用户答案。`tmp`包含答案，但未添加到`row.Answer`. 在数据网格的末尾还有一个额外的空行。我究竟做错了什么？

这是 QueryObject.cs：

```
class QueryObject
{
    private int lesson;
    private String english;
    private String hungarian;
    private String answer;

    public int Lesson { get { return lesson; } set { lesson = value; } }
    public String Hungarian { get { return hungarian; } set { hungarian= value; } }
    public String English{ get { return english; } set { english= value; } }
    public String Answer{ get { return answer; } set { answer= value; } }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:10:26.520

你正在循环一个`IEnumerable<QueryObject>`. 相反，先将您的查询转换为列表，然后它应该可以工作：

```
var query = (from table1 in dtSzotar
            where errorList.Any(word => table1.angol.Equals(word)) ||
                  errorList.Any(word=> table1.magyar.Equals(word))
            select new QueryObject
            {
                Lesson = table1.lesson,
                English = table1.angol,
                Hungarian = table1.magyar,
                Answer = "",
            }).ToList();

// now query is a List<QueryObject>
foreach (QueryObject row in query)
{
      String tmp;
      ((App)Application.Current).Answer.TryGetValue(row.English, out tmp); 
      row.Answer = tmp;
}

dgInCorrect.ItemsSource = query; 
```

# css - div定位问题中的CSS列表

> ID：13791237
> 
> 赞同：0
> 
> 时间：2012-12-09T20:04:12.877
> 
> 标签：css, css-float

我正在更新我公司网站的页面。这里的页脚：applebees.com 可以正常工作，但是我将代码移植到了我的 WHMCS 模板中，并且它错误地定位了站​​点地图。有什么想法吗？[http://applebees.com/clients](http://applebees.com/clients)

```
<footer class="row1">
  <div class="container1">
    <div class="row1">
      <div class="span2">
        <h3>Sitemap</h3>
        <ul>
          <li><a href="https://wwww.applebees.com/" title="">Home</a></li>
          <li><a href="clients/cart.php?gid=1" title="">Pricing</a></li>
        </ul>
      </div>
      <div class="span2">
        <br><br>
        <ul>
          <li><a href="mailto:sales@applebees.com" title="">Reseller</a></li>
          <li><a href="mailto:sales@applebees.com" title="">Dedicated</a></li>
          <li><a href="https:clients/clientarea.php" title="">Support</a></li>
        </ul>
      </div>
      <div class="span2">
        <br><br>
        <ul>
          <li><a href="https:assets/legal" title="">Terms Of Service</a></li>     
          <li><a href="https:assets/privacy" title="">Privacy Policy</a></li>           
          <!--<li><a href="#" title="">#</a></li>-->
        </ul>
      </div>
      <div class="span4">
        <h3>Contact</h3>
        <address>
    <strong>applebees, LLC</strong><br>
    San Francisco, CA<br>
    Los Angeles, CA<br>
    sales@applebees.com<br>
  </address>
      </div>
    </div> <!-- /row -->    
  </div> <!-- /container -->
</footer> 
```

上述页面的 CSS 文件：site/clients/templates/default/css/whmcs.css

index.html页面CSS（不能发布超链接）：site/assets/css/style.min.css

我很困惑，因为我正确地移植了代码，我认为 div 以某种方式把它搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:10:14.130

在您的情况下，“噪音”类在 armourshark.com 中给出了您的 div 的一些高度。当您移植该区域时，您没有得到“噪音”分类的 div。您可以通过在 row1 类上添加`height:`属性来解决。

# c++ - 每帧改变一个顶点的颜色（OpenGL）

> ID：13791241
> 
> 赞同：3
> 
> 时间：2012-12-09T20:04:28.493
> 
> 标签：c++, opengl

我正在使用本教程：[http ://www.opengl-tutorial.org/beginners-tutorials/tutorial-4-a-colored-cube/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-4-a-colored-cube/)

这是练习：一旦你完成了，让颜色在每一帧都改变。您必须每帧调用 glBufferData 。确保之前绑定了适当的缓冲区（glBindBuffer）！

我不知道该怎么做。我知道如何修改颜色缓冲区来改变颜色，但不知道如何每帧改变它们。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:08:26.693

正如练习所述：呼叫`glBufferData`！您已经完成了第一次设置颜色。

更改数据后，使用 重新绑定颜色缓冲区`glBindBuffer`，然后重复调用`glBufferData`- 两者都使用与第一次相同的参数 - 您的新颜色缓冲区数据将被发送到 GPU。

例如，关于如何实际更改数据，您可以使用如下循环在颜色数据数组的每个单元格中插入相同的值：

```
for (int i = 0; i < 12 * 3; ++i) // Replace 12 with the correct amount of points if it's wrong, the 3 is the amount of components per colour
{
    g_color_buffer_data[i] = 1.0f; // Replace 1.0f with your desired colour component value
} 
```

或者，如果您想在颜色的每个*组件*中插入特定值：

```
for (int i = 0; i < 12; ++i)
{
    g_color_buffer_data[i*3+0] = 1.0f; // i * 3 is the start of a colour
    g_color_buffer_data[i*3+1] = 0.5f; // i * 3 + 1 is the second component
    g_color_buffer_data[i*3+2] = 0.0f; // This you should be able to figure out
    // Again, replace component values with your own ones
} 
```

这些循环应该位于调用之前`glBufferData`，在渲染循环内。

# ruby-on-rails - 在rails中选择字符串的多个部分

> ID：13791245
> 
> 赞同：0
> 
> 时间：2012-12-09T20:05:12.427
> 
> 标签：ruby-on-rails, regex, string, match

我正在尝试分割字符串并遇到麻烦。

在 Rails 中，我有一个很长的字符串，在其中，这样的事情发生了 3-6 次：

```
bunchofotherstringstuffandcharacters"hisquote":"The most important aspect of the painting was the treatment of lighting.","lp":andthenalotmorestringandcharacters 
```

我想删掉“这幅画最重要的方面是灯光的处理。”，以及其他介于他的引用和 lp 之间的实例。

它之前的“hisquote”对于我想要的字符串是唯一的，它之后的 .","lp 也是如此

如何取回这两个标识符之间的所有字符串实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:06:15.813

所以像这样的东西？我假设您的分隔符在整个字符串`:`中`,`是一致的，并且使用双引号`"`将所需的字符串括起来。

```
# escape double quotes
longstring = %q(bunchofotherstringstuffandcharacters"hisquote":"The most important aspect of the painting was the treatment of lighting.","lp":andthenalotmorestringandcharacters)

# split on double quotes
substrings = longstring.split("\"").to_enum

# somewhere to sure the strings you want
save = []

# use a rescue clause to detect that the enumerator 'substrings' as reached an end
begin
    while true do
        remember = substrings.next
        case substrings.peek # lets see if that next element is our deliminator
        when ":" # Once the semicolon is spotted ahead, grab the three strings we want.
            save << remember
            substrings.next # skip the ":"
            save << substrings.next
            substrings.next # skip the ","
            save << substrings.next
        end
    end
rescue StopIteration => e
    puts "End of Substring Enumeration was reached."
ensure
    puts save.inspect   #=>  ["hisquote", "The most important aspect of the painting was the treatment of lighting.", "lp"]
end 
```

# javascript - jquery 加载和 javascript

> ID：13791246
> 
> 赞同：0
> 
> 时间：2012-12-09T20:05:25.733
> 
> 标签：javascript, jquery, jquery-load, getscript

我在这个网站上看到了很多关于使用 jquery 加载和在 html 片段中加载脚本的主题。不幸的是，我无法让这些方法（getscript）中的任何一个起作用。这是加载 html 和假定的 javascript 的代码。

```
<script type="text/javascript">
    $.ajaxSetup ({
        cache: false
    });
   $(document).ready(function(){
    $("#x").click(function() {  
    event.preventDefault();
    $("#content").load("content.html", function(){
        $.getScript("imagemod.js")});
        return false;
          });
   });
</script> 
```

但是，在加载碎片页面加载时，页面 javascript 似乎不起作用。当我不通过 ajax 加载页面时，脚本似乎可以工作。这是假设 javascript 工作但不是的[页面。](http://dogsrfun.comze.com/project.html)通过单击美国狗菜单的“大”可以访问相关页面。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:31:52.303

您正在使用未定义的变量“事件”并忘记了分号...

```
<script type="text/javascript">
   $.ajaxSetup ({
     cache: false
   });
   $(document).ready(function () {
     $("#x").click(function(event) {  // event object is passed as first arg
       event.preventDefault();
       $("#content").load("content.html", function () {
         $.getScript("imagemod.js");
       });  // semicolon
       return false;
     });
   });
</script> 
```

另请注意，如果您加载 html 文档，例如

```
<html>...</html> 
```

而不是像这样的片段

```
<div>...</div> 
```

浏览器不会正确地将其导入现有文档，因为它是一个独立的 DOM 文档。要执行 ajax 和部分 html，请加载像`<div>...</div>`.

# php - 在 int 前面添加小数点的问题

> ID：13791247
> 
> 赞同：1
> 
> 时间：2012-12-09T20:05:31.757
> 
> 标签：php

所以我试图在 (10) 中的整数前面添加一个小数点问题是我正在尝试使用`sprintf();`但它似乎对我不起作用:(。

代码：

```
sprintf(".",($percentamount)); 
```

让我知道我做错了什么谢谢！

我已经试过了`"%.f"`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T20:36:27.207

如果我理解正确，您将采用必须包含 10 作为其值的 $percentamount 变量，然后输入“。” 在它前面制作字符串'0.1' - 对吗？如果是，则可以将 10 作为数字并将其放在字符串中，如下所示：

```
sprintf('.%d', 10); // %d stands for digit and means digit should be your second parameter 
```

如果你想有 10 作为字符串输入，你可以这样写：

```
sprintf('.%s', '10'); 
```

如果这不是您正在寻找的解决方案，请更好地描述它，我会尽力提供帮助

# javascript - ReferenceError：未定义函数 - JavaScript

> ID：13791248
> 
> 赞同：15
> 
> 时间：2012-12-09T20:05:36.043
> 
> 标签：javascript, html

我正在尝试在后端创建一个`Javascript`聊天。`Python`这是我正在使用的代码...

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>UDP Chat</title>
  <!-- including JQuery just to simplify things -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="javascript/text">
    var chat_room_id = undefined;
    var last_received = 0;

    /**
     * Initialize chat:
     * - Set the room id
     * - Generate the html elements (chat box, forms & inputs, etc)
     * - Sync with server
     * @param chat_room_id the id of the chatroom
     * @param html_el_id the id of the html element where the chat html should be placed
     * @return
     */
    function init_chat(chat_id, html_el_id) {
        chat_room_id = chat_id;
        layout_and_bind(html_el_id);
        sync_messages();
    }

    /**
     * Asks the server which was the last message sent to the room, and stores it's id.
     * This is used so that when joining the user does not request the full list of
     * messages, just the ones sent after he logged in.
     * @return
     */
    function sync_messages() {
        $.ajax({
            type: 'POST',
            data: {id:window.chat_room_id},
            url:'/chat/sync/',
            dataType: 'json',
            success: function (json) {
                last_received = json.last_message_id;
            }
        });

        setTimeout("get_messages()", 2000);
    }

    /**
     * Generate the Chat box's HTML and bind the ajax events
     * @param target_div_id the id of the html element where the chat will be placed
     */
    function layout_and_bind(html_el_id) {
            // layout stuff
            var html = '<div id="chat-messages-container">'+
            '<div id="chat-messages"> </div>'+
            '<div id="chat-last"> </div>'+
            '</div>'+
            '<form id="chat-form">'+
            '<input name="message" type="text" class="message" />'+
            '<input type="submit" value="Say"/>'+
            '</form>';

            $("#"+html_el_id).append(html);

            // event stuff
            $("#chat-form").submit( function () {
                var $inputs = $(this).children('input');
                var values = {};

                $inputs.each(function(i,el) {
                    values[el.name] = $(el).val();
                });
                values['chat_room_id'] = window.chat_room_id;

                $.ajax({
                    data: values,
                    dataType: 'json',
                    type: 'post',
                    url: '/chat/send/'
                });
                $('#chat-form .message').val('');
                return false;
        });
    };

    /**
     * Gets the list of messages from the server and appends the messages to the chatbox
     */
    function get_messages() {
        $.ajax({
            type: 'POST',
            data: {id:window.chat_room_id, offset: window.last_received},
            url:'/chat/receive/',
            dataType: 'json',
            success: function (json) {
                var scroll = false;

                // first check if we are at the bottom of the div, if we are, we shall scroll once the content is added
                var $containter = $("#chat-messages-container");
                if ($containter.scrollTop() == $containter.attr("scrollHeight") - $containter.height())
                    scroll = true;

                // add messages
                $.each(json, function(i,m){
                    if (m.type == 's')
                        $('#chat-messages').append('<div class="system">' + replace_emoticons(m.message) + '</div>');
                    else if (m.type == 'm')
                        $('#chat-messages').append('<div class="message"><div class="author">'+m.author+'</div>'+replace_emoticons(m.message) + '</div>');
                    else if (m.type == 'j')
                        $('#chat-messages').append('<div class="join">'+m.author+' has joined</div>');
                    else if (m.type == 'l')
                        $('#chat-messages').append('<div class="leave">'+m.author+' has left</div>');

                    last_received = m.id;
                })

                // scroll to bottom
                if (scroll)
                    $("#chat-messages-container").animate({ scrollTop: $("#chat-messages-container").attr("scrollHeight") }, 500);
            }
        });

        // wait for next
        setTimeout("get_messages()", 2000);
    }

    /**
     * Tells the chat app that we are joining
     */
    function chat_join() {
        $.ajax({
            async: false,
            type: 'POST',
            data: {chat_room_id:window.chat_room_id},
            url:'/chat/join/',
        });
    }

    /**
     * Tells the chat app that we are leaving
     */
    function chat_leave() {
        $.ajax({
            async: false,
            type: 'POST',
            data: {chat_room_id:window.chat_room_id},
            url:'/chat/leave/',
        });
    }

    // attach join and leave events
    $(window).load(function(){chat_join()});
    $(window).unload(function(){chat_leave()});

    // emoticons
    var emoticons = {
        '>:D' : 'emoticon_evilgrin.png',
        ':D' : 'emoticon_grin.png',
        '=D' : 'emoticon_happy.png',
        ':\\)' : 'emoticon_smile.png',
        ':O' : 'emoticon_surprised.png',
        ':P' : 'emoticon_tongue.png',
        ':\\(' : 'emoticon_unhappy.png',
        ':3' : 'emoticon_waii.png',
        ';\\)' : 'emoticon_wink.png',
        '\\(ball\\)' : 'sport_soccer.png'
    }

    /**
     * Regular expression maddness!!!
     * Replace the above strings for their img counterpart
     */
    function replace_emoticons(text) {
        $.each(emoticons, function(char, img) {
            re = new RegExp(char,'g');
            // replace the following at will
            text = text.replace(re, '<img src="/media/img/silk/'+img+'" />');
        });
        return text;
    }  
    </script>
</head>
<body>
  <div id="chat">
  </div>

  <script type="text/javascript">
    $(window).ready(function(){
       var chat_id = 1;
       init_chat({{ chat_id }}, "chat");
    })
  </script>
</body>
</html> 
```

当我加载页面时`Firefox`，我得到：

```
ReferenceError: init_chat is not defined    
init_chat({{ chat_id }}, "chat"); 
```

但是，功能`init_chat`是明确定义的。我究竟做错了什么？ **我为页面创建了一个[jsFiddle](http://jsfiddle.net/9Pwb9/)**。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-09T20:09:44.037

当您在`head`部件中定义函数并调用它们时，会发生这种情况，此时`document`尚未初始化。移动`script`发生初始化的部分并尝试一下。

由于您使用的是**jQuery**，如果您可以初始化变量并将整个脚本封装在一个函数下并在`document`的就绪状态下调用该函数，它可能会更好。

```
$(document).ready(function(){
   var chat_id = 1;
   init_chat({{ chat_id }}, "chat");
   // Something wrong here. Is it really chat_id inside {{ }}?
}); 
```

# c# - 新的 FontStyle 应用于 RichTextBox 中的不同位置

> ID：13791254
> 
> 赞同：0
> 
> 时间：2012-12-09T20:06:07.277
> 
> 标签：c#, richtextbox, selection

我正在尝试编写一个自动格式化参考书目的程序，它使用以下模式：

```
int ct = 0;
private void button1_Click(object sender, EventArgs e)
{
    richTextBox1.Text += ct.ToString() + textBox1.Text;
    richTextBox1.Text += textBox2.Text;
    richTextBox1.Text += "\n\r";
    ct = ct + 1;
} 
```

效果很好，问题是我希望第二个 textBox 中的文本为斜体。当我尝试使用

```
richTextBox1.Find(textBox2.Text, RichTextBoxFinds.MatchCase);
richTextBox1.SelectionFont = new Font(richTextBox1.Font, FontStyle.Italic); 
```

那么只有最后一个“textBox2.Text”是斜体的；以前的被重置为常规字体。如果有人能告诉我如何解决这个问题，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:04:57.927

我使用 StringReader 和第二种形式找到了解决方案：

```
 int ct = 0;
    private void button1_Click(object sender, EventArgs e)
    {
        richTextBox1.Text += "\n\r";
        richTextBox1.Text += ct.ToString()+". "+textBox1.Text;
        richTextBox1.Text += ", " + textBox2.Text;
        form2.richTextBox1.Text += textBox2.Text + "\n";
        ct = ct + 1;
        using (StringReader reader = new StringReader(form2.richTextBox1.Text))
        {
            for (int i = 0; i < ct; i++)
            {
                string A = reader.ReadLine();
                richTextBox1.Find(A, RichTextBoxFinds.MatchCase);
                richTextBox1.SelectionFont = new Font(richTextBox1.Font, FontStyle.Italic);
            }
        }
    } 
```

# java - Java调用构造函数多次

> ID：13791260
> 
> 赞同：4
> 
> 时间：2012-12-09T20:06:27.073
> 
> 标签：java

我有一个基本上像这样的课程：

```
class Child extends Parent {
  public void reinitialize() {
    super();  // illegal
  }
} 
```

基本上，我想再次调用构造函数来重新初始化。我无法将初始化代码重构为自己的方法，因为`Parent`我无法修改其源代码。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T20:08:56.877

不，没有办法做到这一点。即使在 JVM 字节码级别，`<init>`也可以在任何给定对象上最多调用一次方法链（构造函数）。

通常的答案是将代码重构为普通的实例方法，但正如您所说，这是不可能的。

您能做的最好的事情就是找到一种重新设计的方法来解决重新初始化的需要。或者，如果您需要父构造函数中的特定行为，您可以自己复制它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T20:23:49.803

解决此问题的唯一方法是

*   每次需要“重新初始化”它时创建一个新对象。
*   使用委托而不是继承，即使您必须同时使用两者。通过使用委托，您可以替换实例。
*   创建一个 re-initialise 方法，它与父构造函数做很多相同的事情。例如替换字段或清除集合，如果必须使用反射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T20:08:43.367

一种方法是提供一个静态方法，该方法返回一个新的 Child 对象。或者，您可以简单地在客户端代码中创建一个新的 Child 对象。无论哪种方式，听起来您将无法重用现有对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T12:55:28.680

有几种方法可以实现这一点。其中之一是创建另一种方法，例如“init”。应该从构造函数或重新初始化方法调用此“init”方法。

# java - Firefox 驱动程序无法单击单选按钮

> ID：13791262
> 
> 赞同：0
> 
> 时间：2012-12-09T20:06:39.197
> 
> 标签：java, firefox, selenium

有一个奇怪的问题，在 firefox 16 和 selenuim webdriver 2.26.0 中，单选按钮没有被点击，之后：

```
driver.findElement(By.xpath("path_to_radio_button")).click(); 
```

没有例外，但也没有结果。在 Chrome 中，它被点击了。

什么可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:31:39.353

尝试使用这个

```
IWebElement radio = driver.FindElement(By.ID(//radiobutton id));
  if(radio.Selected)
 {
    //do something here.
  } 
```

或者

```
 driver.findElement(By.xpath("//input[@type='radio' and @value='Radio2']")).isSelected(); 
```

# opengl - 学习 OpenGL 1

> ID：13791268
> 
> 赞同：1
> 
> 时间：2012-12-09T20:07:41.083
> 
> 标签：opengl

我从 3 个学期开始学习计算机科学，我们刚开始使用 openGl 1.0。我们正在做非常基础的工作（api 背后的数学）。

讲座分为 4 个部分，为期 4 个学期。

现在我真的很想在听这个讲座的时候读一本书，但我不确定我应该读哪本书。

我应该买一本 opengl 1 还是 opengl 3+ 的书？

还是我应该等到我们从 opengl3 开始，同时阅读一本关于数学的书，[诸如此类](https://rads.stackoverflow.com/amzn/click/com/1435458869)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T00:30:50.237

旧版本的 OpenGL 用于学习 3D 图形没有任何问题。C 编程语言已有 40 年的历史，Lisp 甚至更久，但它们仍然具有相关性。我确实认为至少使用 OpenGL 1.3 或 2.0/2.1 是很重要的，因为与大多数软件一样，OpenGL 1.0 有一些可怕的地方很快在以后的版本中得到修复。

使用 OpenGL 1.x 或 2.x，您将学习 3D 图形的基础知识：多边形几何、嵌套变换、灯光和材质、纹理映射。使用 OpenGL 1 或 2 比使用 3 或 4 更容易学习，因为 OpenGL 1/2 中有更多的内置功能以及多年的书籍和在线教程作为指导。

阅读书籍：“红皮书”OpenGL 编程指南，最好是较旧的第 3 版或第 4 版；或 OpenGL SuperBible，同样是第 2 版或第 3 版。您还可以查看优秀的 NeHe 网络教程 - 对于 OpenGL 1/2，这些现在称为“旧版教程”。对于 3D 图形背后的数学，我推荐 Dunn & Parberry 的 3D Math Primer for Graphics and Game Development。

你在 OpenGL 1.x 中没有得到的是现代 GPU 的着色器。一旦你掌握了基础知识，你就可以从 OpenGL 2 中的顶点和片段着色器开始。一旦你对这些感到满意，就开始为 OpenGL 4 编程。（我建议跳过 3 直接进入 OpenGL 4 / DirectX 11.)

这是假设您想自上而下学习，从为您完成大部分工作的内置 API 函数开始，然后逐渐进入更多细节。相反，如果您更愿意深入研究，则需要 OpenGL SuperBible 第 5 版和带有 OpenGL 4 的现代 GPU。这不是我喜欢的方法，因为恕我直言 OpenGL 3/4 是“3D 汇编语言”和学习曲线非常陡峭，但有些人确实喜欢它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:06:38.220

OpenGL-1.0 – 哇，已经有 20 多年的历史了。或者你的意思是OpenGL-1.1，仍然超过15岁。无论如何，请告诉您的教授或助教将来教一些有用的东西；您可能不在计算机图形古生物学课程中。

您绝对应该学习 OpenGL-3 及更多。版本 3 确实引入了早该进行的 API 清理，而且从长远来看，所有事情都必须使用着色器的要求实际上使事情变得更容易。

# css - 不使用 jQuery 的嵌入式 SVG（带回退）

> ID：13791272
> 
> 赞同：2
> 
> 时间：2012-12-09T20:08:15.160
> 
> 标签：css, svg, embed, external, fallback

我需要一种方法来 1）嵌入带有 PNG 后备的 SVG，2）在外部样式表中使用 CSS 来设置 SVG 某些部分的颜色样式，而 3）**不**使用 jQuery。

**背景：**
在工作中，我们跨多个网站链接到我们服务器上的相同资源，因此如果我们对资源进行更新，我们不必在 20 个站点上单独更新它。使用外部样式表，因此我们可以使资源（在本例中为 SVG）模仿我们放置它的任何网站的主题。

**我的解决方案：**
我最初是用 jQuery 做的，但后来我的老板告诉我们需要一个简单的 JS 解决方案，因为他不想在我们拥有的一些旧网站上加载 jQuery（这对我来说听起来很傻，但是我不是老板）。

我使用的原始解决方案：

1.  [http://www.noupe.com/tutorial/svg-clickable-71346.html](http://www.noupe.com/tutorial/svg-clickable-71346.html)（解决方案 3a.）用于 SVG 后备，以及
2.  [如何使用 CSS（jQuery SVG 图像替换）更改 SVG 图像的颜色？](https://stackoverflow.com/questions/11978995/how-to-change-color-of-svg-image-using-css-jquery-svg-image-replacement/11978996)用于嵌入 SVG。

    ```
    <a href="link-to-another-page" >  
    <img class="svg" src="awesome.svg" alt="An awesome SVG" width="186" height="235" onerror="this.removeAttribute('onerror'); this.src='not-as-awesome.png'" /> 
    </a>  
    <!--followed by the jQuery code in item #2--> 
    ```

它工作得很好，但使用 jQuery。我是一个 JS 初学者，所以尝试将 jQuery 代码转换为常规 JS 对我来说太混乱了。

任何建议都会有所帮助，但就像我说的，这需要：

1.  可点击
2.  不使用 jQuery
3.  允许在外部样式表中使用 SVG 样式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:22:56.590

我建议您`<img/>`完全删除您的标签并使用一些带有背景图片的标签

例如，您可以改用一些链接：

```
<style>

.logo {
    display: inline-block;
    width: 400px;
    height: 200px;
    background-color: #some-color;
    background-image: url('url.png');
    background-image: url('url.svg'); //browsers that not support svg should ignore it completely and .png background would be applied and modern browsers would reassign background image
}

</style>

<a class="logo" href=""></a> 
```

另一种方法是直接嵌入 svg，因为它在 html5 中没有问题：

```
<style>

​svg {
    background: #f7f7f7;
    border: 1px solid #efefef;
}
​.logo {
    display:inline-block;
    width: 400px;
    height: 200px;
    background: yellow url('some iamge url here');
}​

</style>

<a class="logo" href="">
    <svg xmlns="http://www.w3.org/2000/svg"
        version="1.1" baseProfile="full"
        width="100%" height="100%" viewBox="0 0 700 400">
        <rect x="100" y="100" width="500" height="200" fill="white" stroke="black" stroke-width="20px"/>
    </svg>
</a>​ 
```

*好消息是 html5 在应用display: block* to link 元素时没有问题我认为*inline-block*不应该有任何问题，因为你想用链接标签包装你的徽标，即使 ie7 没有问题，它也应该是完美的解决方案应用 display: 与其他内联元素一样的带有链接元素的块。我更喜欢第一种方法，因为它具有更好的浏览器支持，您可以检查它[嵌入内联 SVG](http://caniuse.com/svg-html5)和[SVG 作为背景图像](http://caniuse.com/svg-css)

PS 样式标签在您的 html 中没有位置，但我想每个人都知道：) 如果您不知道如何使用内联 svg，只需打开带有 xml 编辑器的inkscape，您就可以复制您的 svg 并将其粘贴到 html 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:17:35.813

SVGeezy 正是您正在寻找的：

[https://github.com/benhowdle89/svgeezy](https://github.com/benhowdle89/svgeezy)

这是一个 js 文件，只有几行处理纯 javascript 中的位图回退。

# javascript - 如何在谷歌应用脚 本中添加和相乘文本框？

> ID：13791274
> 
> 赞同：0
> 
> 时间：2012-12-09T20:08:23.670
> 
> 标签：javascript, google-apps-script

如何将以下文本框与以下逻辑一起添加？

```
oneTextBox = $120.00,
twoTextBox = .03*oneTextBox,
threeTextBox = oneTextBox + twoTextBox 
```

我还希望每个文本框的单位为美元 ($)。

* * *

```
function doGet(e) {
  var app = UiApp.createApplication();

  var VertPanel = app.createVerticalPanel().setId('VertPanel');

  var oneTextBox = app.createTextBox().setText("$120.00").setId("oneTextBox").setName("oneTextBox");
  var twoTextBox = app.createTextBox().setId("twoTextBox").setName("twoTextBox");
  var threeTextBox = app.createTextBox().setId("threeTextBox").setName("threeTextBox");

  app.add(VertPanel);
  VertPanel.add(oneTextBox).add(twoTextBox).add(threeTextBox);

  return app;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:03:23.710

处理函数中 e.parameter.oneTextBox 返回的值是一个字符串，在您的示例中它应该是“$120.00”，而您想要的是一个数值......我建议使用 a`replace()`来删除所有非数字字符并将其转换为如下数字：

```
var oneTextBoxNumValue = Number(e.parameter.oneTextBox.replace(/[^0-9]/g,''));// the regex ^0-9 takes everything not between 0 and 9 (and replace by '') 
```

在其他文本框上使用相同的过程，您可以在此转换后对数学运算做任何您想做的事情。

要以 $ 形式获得结果，只需在结果中添加一个 '$'

```
getElementById('oneTextBox').setText(resultNumeric+"$") 
```

唯一棘手的是小数点，您需要在转换中考虑到这一点：`$120.00,`数值将变为 12000，所以不要忘记将结果除以某处，否则您的东西会变得非常昂贵！;-) 另外我有时会遇到一些舍入错误，但总是可以很容易地处理，例如在类似的情况下，我不得不使用类似的东西来获得正确的结果：（*如果 quant = 2 in，则为 2.00 而不是 1.99下面的例子，注意我把整数除以 100 得到 2 位小数的值）*

```
 var total = parseInt(Number(quant)*valtotal*100+0.01)/100; 
```

希望它会给一些想法开始。

**编辑：**这是一个小代码来说明：

```
function calcTest() {
  var app = UiApp.createApplication().setTitle('TextField Calculator');
  var button = app.createButton('Calculate');
  var handler = app.createServerHandler('calc');
  button.addClickHandler(handler); 
  var grid = app.createGrid(5, 2);
  grid.setText(0, 0, 'value1 ');
  grid.setWidget(0, 1, app.createTextBox().setName('value1').setText('$ 45.00/unit'));
  grid.setText(1, 0, 'value2');
  grid.setWidget(1, 1, app.createTextBox().setName('value2').setText('3 units'));
  grid.setText(2, 0, 'press button to calculate');
  grid.setWidget(2, 1, button);
  grid.setText(3, 0, 'value3 = value1*1.35');
  grid.setWidget(3, 1, app.createTextBox().setId('value3').setEnabled(false));
  grid.setText(4, 0,'sum value1 + value2 + value3');
  grid.setWidget(4, 1, app.createTextBox().setId('sum').setEnabled(false));
  handler.addCallbackElement(grid);
  app.add(grid);
  var ss = SpreadsheetApp.getActive();
  ss.show(app);
  }

function calc(e){
   var app = UiApp.getActiveApplication();
   var value1 = Number(e.parameter.value1.replace(/[^0-9]/g,''))/100;
   var value2 = Number(e.parameter.value2.replace(/[^0-9]/g,''));
   var calcvalue = parseInt(value1*1.35*100)/100
   var sumcalc = calcvalue+value1+value2
   app.getElementById('value3').setText('$ '+calcvalue)
   app.getElementById('sum').setText(sumcalc+' without unit;)')
   return app
  } 
```

![在此处输入图像描述](../Images/e90627511dbffde8891a73300d01a1f6.png)

**编辑 2：**这是另一个代码，我在应用程序中使用一个函数将字符串值转换为欧元，它的方法略有不同，但效果很好。

```
 function toEuro(val){
  if(val==''){temp='';return temp}
  var temp = val.toString().replace(/[^\d\.-]/g,'').split('.');
  if(temp[0]==''){temp[0]='0'}
  if(temp.length==1){var result = temp[0]+',00 €'}
  else{
  var int = temp[0]
  var dec = temp[1]
      if(dec.length==1){var result=int+','+dec+'0 €'}else{var result=int+','+dec+' €'}
  }
  return result
} 
```

# javascript - javascript 变量在控制台日志中未定义

> ID：13791279
> 
> 赞同：0
> 
> 时间：2012-12-09T20:08:35.087
> 
> 标签：javascript, jquery, websocket

我的全局变量“数据”收到一条消息：

```
 [undefined × 4] 
```

在控制台日志中。这应该是错误的，因为我已将 4 个元素推入数组。这是代码

```
var data = [];

         ws.onmessage = function(evt){

         var distances = JSON.parse(evt.data);
         console.log(distances);
            for(var i=0; i<buffer.length; i++) {
                if(buffer[i][0] == distances.miles) {
                    buffer[i][1][0]++;
                    }
            }               
            console.log(buffer);

            for (var i=0; i<buffer.length; i++) { 
                data.push(buffer[i][1][0]); 
            }
            console.log(data);
            draw();//redraw the graph
            data.length=0;
        } 
```

如您所见，数据现在应该是一个包含元素的数组。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:14:48.837

控制台它是内存中变量的实时表示，您使用`data.length=0;`. 您应该`console.log($.clone(data));`在之前尝试（来自 jQuery）之类的东西`data.length=0;`。

这是假设您绝对确定您期望的数据确实存在。

# c++ - 无限 Qt 动画（没有指定持续时间）

> ID：13791280
> 
> 赞同：4
> 
> 时间：2012-12-09T20:08:41.827
> 
> 标签：c++, qt

我正在使用 c++ 和 Qt 开发 Block Breaker 克隆，我想知道如何为球的运动创建无限（或无界）动画。

我应该坚持动画框架（通过子类化 QAbstractAnimation），还是考虑创建和管理新线程来处理动画？

一些有经验的指导会很有帮助，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T07:44:49.173

所以最后我想通了：使用`QPropertyAnimation::setLoopCount(-1)`成员函数使动画永远运行，直到`QPropertyAnimation::stop()`信号停止...

# algorithm - 计算数组中的所有索引对，使得 arr[i] < arr[j]

> ID：13791288
> 
> 赞同：0
> 
> 时间：2012-12-09T20:09:14.040
> 
> 标签：algorithm

> **可能重复：**
> [计算数组中的反转](https://stackoverflow.com/questions/337664/counting-inversions-in-an-array)

给定一个未排序的数组`arr`，如何计算所有可能的索引`(i, j)`对`arr[i] < arr[j]`？复杂度应该是线性的或接近线性的（`O(n^2)`解决方案很明显）。

编辑：

对不起，我忘了提，但`i < j`指数的条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:19:18.517

暗示：

对于每对索引 (i, j)，这些陈述中只有一个是正确的：

`(a[i]<a[j])`, `(a[i]=a[j])`, `(a[i]>a[j])`.

您必须遍历数组并计算 a[] 中每个值的实例数

那么，这只是一个组合学的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:25:20.333

[重要]：以下是初始问题的答案，没有条件 i < j

你可以排序`O(N * log(N))`然后在里面找到答案`O(N)`，它会给你`O(N * log(N))`一共。下面是第二部分的代码（数组排序后）：

```
int count = 0;
int curBefore = 0;
for (int i = 1; i < sorted.Length; i++)
{
    if (sorted[i] > sorted[i - 1])
    {
        curBefore = i;
    }
    count += curBefore;
} 
```

是的，也有一个线性（伪，因为字典操作在一般情况下不是线性的）解决方案！但它需要额外的内存并使用类似字典的数据结构：

```
int res = sorted.Length * (sorted.Length - 1) / 2;
Dictionary<int, int> dict = new Dictionary<int, int>();
for (int i = 0; i < sorted.Length; i++)
{
    if (!dict.ContainsKey(sorted[i]))
    {
        dict.Add(sorted[i], 0);
    }
    dict[sorted[i]]++;
}
foreach (var pair in dict)
{
    res -= (pair.Value - 1) * pair.Value / 2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:41:14.177

您可以使用自定义的二叉树动态计算此计数。因此，每个节点将包含三个值：节点上的值在`(v, lc, ec)`哪里，左树上的节点数以及发现等于 的值的数量。如您所见，这些计数器可以在您向树中插入新值时更新。`v``lc``ec``v`

最终答案将保存在全局变量中，并在每次将新值插入树时更新。这个想法是，当一个新的值被插入到树中时，它会经过某个路径，沿着这条路径的节点会确切地知道有多少值小于通过的值，所以在这些节点上最终的答案可以适当更新。

请注意，只有当新值大于当前节点上的值（即，当它将新值转发到右子树时）时，才会更新最终答案 - 这是因为您有额外的约束`i < j`。

希望这可以帮助！

# mongodb - MongoDB 嵌套或拆分最佳实践

> ID：13791293
> 
> 赞同：1
> 
> 时间：2012-12-09T20:09:46.983
> 
> 标签：mongodb, mongodb-query

我想知道是否有人知道您是否可以在 MongoDB 上过度使用嵌入。不是说像 100 层那样深，在我的应用程序中，我的平均文档大小会变得非常大，简单的测试显示文档为 177kb。

该应用程序用于日志记录，例如，我获取 Apache 访问日志并从中获取很多信息，例如所有被调用页面的列表、所有 IP 地址的点亮等等。这些都是按分钟完成的。

我不太可能拥有一个处于 MongoDB 文档大小限制的文档，但想知道我是否将每个子列表保留为自己的文档，这是否会提高性能，返回子集信息（查询对于发生在 5 分钟内的所有 IP 地址）。

当我运行查询时，我过滤以仅显示 IP 地址，如果我将每一分钟分组到一个文档中，我是否会浪费数据库性能，或者如果我将每个列表拆分为自己的文档，我是否会浪费它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:20:51.927

您希望以反映您打算如何使用数据的方式来构建您的集合和文档。如果您要执行大量复杂查询，尤其是子文档，您可能会发现将文档拆分为单独的集合更容易。这方面的一个例子是从博客文章中拆分评论。

您的评论可以存储为子文档数组：

```
# Example post document with comment subdocuments
{
    title: 'How to Mongo!'
    content: 'So I want to talk about MongoDB.',
    comments: [
        {
            author: 'Renold',
            content: 'This post, it's amazing.'
        },
        ...
    ]
} 
```

但是，如果您只想对评论进行复杂查询（例如，从*所有*帖子中选择最新评论或获取一位作者的所有评论），这可能会导致问题。如果您打算进行这些复杂查询，那么您会更好关闭创建两个集合：一个用于评论，另一个用于帖子。

```
# Example post document with "ForeignKeys" to comment documents
{
    _id: ObjectId("50c21579c5f2c80000000000"),
    title: 'How to Mongo!',
    content: 'So I want to talk about MongoDB.',
    comments: [
        ObjectId("50c21579c5f2c80000000001"),
        ObjectId("50c21579c5f2c80000000002"),
        ...
    ]
}

# Example comment document with a "ForeignKey" to a post document
{
    _id: ObjectId("50c21579c5f2c80000000001"),
    post_id: ObjectId("50c21579c5f2c80000000000"),
    title: 'Renold',
    content: 'This post, it's amazing.'
} 
```

这类似于您在关系数据库中存储“外键”的方式。像这样规范化您的文档可以轻松查询评论和帖子。此外，由于您正在拆分文档，因此每个文档将占用更少的内存。但是，权衡是，`ObjectId`只要任一文档发生更改（例如，当您插入/更新/删除评论或帖子时），您都必须维护引用。而且由于 Mongo 中没有事件挂钩，因此您必须这样做您的应用程序中的所有这些维护。

另一方面，如果您不打算对文档的子文档进行任何复杂的查询，您可能会从存储单体对象中受益。例如，用户的偏好不是您可能会查询的内容：

```
# Example user document with address subdocument
{
    ObjectId("50c21579c5f2c800000000421"),
    name: 'Howard',
    password: 'naughtysecret',
    address: {
        state: 'FL',
        city: 'Gainesville',
        zip: 32608
    }
} 
```

# php - How to force regional letters to appear correctly in OOP structure with jQuery

> ID：13791294
> 
> 赞同：1
> 
> 时间：2012-12-09T20:09:46.707
> 
> 标签：php, jquery, html, character-encoding

How would I go about forcing national letters such as the Danish Æ, Ø and Å letters, in an OOP structure, where the individual .php documents that are concerned with the query and the output, are not under the charset of the HTML doc?

To be more specific I have an index.php file with the following div:

```
<div id="box_tekst"></div> 
```

I then have the page.js document concerned with handling the asynchronized requests

```
page.content = function(id) {

    $.ajax({

        url: 'core/page.php',
        type: 'POST',
        data: { method: 'content', id: id },
        success: function(data) {
            $('#box_tekst').html(data);
        }

    });

} 
```

Finally I have the page.php file refered to in the .js document which serves the query in the following maner:

```
$id = $_POST['id'];
$page = new Page();
$content = $page->getPage($id);

if(!empty($content)) {

    foreach($content as $input) { 
    ?>
        <h1><?= ucfirst($input['title']) ?></h1>
        <p><?= nl2br(ucfirst($input['pg'])) ?></p>
    <?
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:15:36.263

Php allows to modify the http response header using the [header()](http://php.net/manual/en/function.header.php) function.

```
header('Content-type: text/html; charset=utf-8'); 
```

For exemple the above line sets the response charset to utf-8.

# objective-c - 检查方法调用之间的时间差objective-c

> ID：13791300
> 
> 赞同：0
> 
> 时间：2012-12-09T20:10:20.217
> 
> 标签：objective-c

我有这个方法：

```
- (void) receivedData {
} 
```

这应该大约每 50 到 100 毫秒运行一次。有没有办法检查自上次调用以来的时间并将上次打印到 NSString？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:26:58.873

```
@interface MyClass() {
    NSDate* receivedDataTimestamp;
    ....
}

...

-(void)receivedData {
    NSDate* now = [NSDate date];
    if (receivedDataTimestamp != nil) {
        NSTimeInterval delta = [now timeIntervalSinceDate:receivedDataTimestamp];
        NSLog(@"%f seconds since recevedData was called last", delta);
    }
    receivedDataTimestamp = now;
    ....
} 
```

# winapi - 拥有 HMENU 句柄是否可以从该菜单中以编程方式运行项目？

> ID：13791301
> 
> 赞同：1
> 
> 时间：2012-12-09T20:10:23.783
> 
> 标签：winapi, menu, window

我有一个 HMENU 并且我知道该项目位于给定位置，拥有该信息是否可以执行以下操作：`RunMenuItem(hMenu,3)`该项目的位置在哪里 3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:17:43.810

当您从菜单中选择一个项目时，可能会发生以下两种情况之一：

*   一条`WM_COMMAND`消息被发布到菜单的父窗口，包含菜单项 ID，或者
*   如果菜单`TrackPopupMenu` **与**标志一起显示，则`TPM_RETURNCMD`所选项目 ID 作为调用的结果返回`TrackPopupMenu`。

在第一种情况下，您可以通过简单地`WM_COMMAND`使用适当的参数自己发布消息来以编程方式模拟这一点。您需要查询`HMENU`菜单项 ID（使用`GetMenuItemInfo`）。

在第二种情况下，没有简单的方法来模拟它，因为它依赖于调用线程实际调用`TrackPopupMenu`和处理结果。

# jquery - 让 Jquery 1.4.3 和 Rails.js 一起玩得很好

> ID：13791306
> 
> 赞同：1
> 
> 时间：2012-12-09T20:10:47.700
> 
> 标签：jquery, ruby-on-rails-3

我继承了一个使用 jquery 1.4.3 的 Rails 应用程序，并且使用了一些阻止我升级到 1.4 系列的插件。

话虽如此，我需要 Rails.js 来做一些不显眼的 javascripting。但是，我能找到的唯一 2 个 rails.js 文件是适用于 1.4.0、1.4.1 和 1.4.2 的 1.4 系列，但不适用于 1.4.3。另一个需要最少的 jquery 1.6 或更高版本。

我也无法降级到 jquery 1.4.2，因为这会破坏我正在使用的其他一些插件。

关于如何让 1.4.3 和 rails.js 发挥出色的任何想法？

我尝试将 1.4 版本的 rails.js 与 jquery 1.4.3 一起使用，并且有一个警告说：

```
var jqueryVersion = $().jquery;
if (!( (jqueryVersion === '1.4') || (jqueryVersion === '1.4.1') || (jqueryVersion === '1.4.2') )){
  alert('This rails.js does not support the jQuery version you are using. Please read documentation.')
} 
```

我对此发表了评论，一切似乎都有效，但我担心这些台词是有原因的。或者他们忘记在这个警报中添加 1.4.3 只是一个过度网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:21:21.660

我找到了一个支持 1.4.3 和 1.5 系列的旧版本，我在 github 页面上找不到。不知道为什么这是隐藏的，但我在 RefineryCMS 的代码库中找到了它：

[https://github.com/rails/jquery-ujs/blob/900d714300b284d7480e1e3f09fbecf8f0e23b27/src/rails.js](https://github.com/rails/jquery-ujs/blob/900d714300b284d7480e1e3f09fbecf8f0e23b27/src/rails.js)

# python - windows下python 2.7 32位的python调试器为什么会缩写错误信息？

> ID：13791307
> 
> 赞同：1
> 
> 时间：2012-12-09T20:10:53.737
> 
> 标签：python, windows, exception, interpreter, pdb

有时调试器会缩写运行时错误消息，如下所示

```
(Pdb) n
> p:\hhu\updater4.py(136)make_and_execute_insert()
-> result = dbops.do( db.cursor, query.encode( 'utf-8' ) )
(Pdb) n
UnicodeDecodeError: UnicodeD...ge(128)')
> p:\hhu\updater4.py(136)make_and_execute_insert()
-> result = dbops.do( db.cursor, query.encode( 'utf-8' ) )
(Pdb) 
```

当它这样做时，我无法阅读错误消息。有人可以告诉我如何阻止这种情况发生吗？

# servlets - 在其他页面上包含 servlet

> ID：13791308
> 
> 赞同：1
> 
> 时间：2012-12-09T20:10:58.063
> 
> 标签：servlets

我正在做一个广告页面，它提供代码以粘贴到某人的页面上并获取图片或文本。

我得到了 servlet，它只显示数据库中的图片或文本，并希望将其包含在某人的页面上。

我尝试 `<script src="http://mylocalhost/myservlet?someparameters=x"></script>` 但它不起作用。

当我做简单的 HTML 页面并 `<img src="http://mylocalhost/myservlet?someparameters=x">` 显示图像时（我需要提供参数和 servlet 解析它应该是图像或文本）。

我的小服务程序：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    try {
        String wielkosc = request.getParameter("wielkosc");
        String typ = request.getParameter("typ");
        ArrayList<Integer> lista = new ArrayList<Integer>();
//WYŚWIETLANIE OBRAZKÓW  -------------------------------------------------------------------------
        if (typ.equals("1")) {

            PreparedStatement ps = con.prepareStatement("SELECT Id FROM Reklamy WHERE Typ=? AND Size=?");
            if (wielkosc.equals("0")) {
                ps.setInt(1, 1);
                ps.setInt(2, 0);
            } else if (wielkosc.equals("1")) {
                ps.setInt(1, 1);
                ps.setInt(2, 1);
            }

            ResultSet rs = ps.executeQuery();
            while (rs.next()) {
                lista.add(rs.getInt("Id"));
            }
            Random r = new Random();
            PreparedStatement ps2 = con.prepareStatement("SELECT Content FROM Reklamy WHERE Id=?");
            int los = r.nextInt(lista.size());
            ps2.setInt(1, lista.get(los));

            rs = ps2.executeQuery();
            if (rs.next()) {
                Blob blob = rs.getBlob(1);
                InputStream stream = blob.getBinaryStream();
                int len = (int) blob.length();
                System.out.println(len);
                byte[] rb = new byte[len];
                int read = stream.read(rb, 0, len);
                response.setContentType("image/jpg");
                response.getOutputStream().write(rb, 0, len);
                response.getOutputStream().flush();
            }
// WYŚWIETLANIE TEKSTU -------------------------------------------------------------------------
        } else if (typ.equals("0")) {
            PreparedStatement ps = con.prepareStatement("SELECT Id FROM Reklamy WHERE Typ=? AND Size=?");
            if (wielkosc.equals("0")) {
                ps.setInt(1, 0);
                ps.setInt(2, 0);
            } else if (wielkosc.equals("1")) {
                ps.setInt(1, 0);
                ps.setInt(2, 1);
            }

            ResultSet rs = ps.executeQuery();
            while (rs.next()) {
                lista.add(rs.getInt("Id"));
            }
            System.out.println(lista.size());
            Random r = new Random();
            PreparedStatement ps2 = con.prepareStatement("SELECT Content FROM Reklamy WHERE Id=?");
            int los = r.nextInt(lista.size());
            ps2.setInt(1, lista.get(los));                
            rs = ps2.executeQuery();
            if (rs.next()) {
                Blob blob = rs.getBlob(1);
                InputStream stream = blob.getBinaryStream();
                int len = (int) blob.length();
                System.out.println(len);
                byte[] rb = new byte[len];
                int read = stream.read(rb, 0, len);
                response.setContentType("text/html;charset=UTF-8");
                response.getOutputStream().write(rb, 0, len);
                response.getOutputStream().flush();
            }
        }
    } 
```

# python - Python：列表字典理解

> ID：13791310
> 
> 赞同：1
> 
> 时间：2012-12-09T20:11:11.450
> 
> 标签：python, dictionary, iteration

我有以下代码：

```
letters = 'defghijklmno'
K = {letters[i]:(i*i-1) for i in range(len(letters))} 
```

我知道我正在迭代字母的序列变量以及如何计算值，但我对如何将键设置为字符串的单个字符感到困惑。特别是因为我有字母被索引为我的键。基本上，我只是想弄清楚python如何评估这个表达式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:16:34.263

这种`dict`理解基本上是以下的同义词：

```
k = {}
for i in range(len(letters)):
    k[letters[i]] = i*i - 1 
```

不同之处在于它创建了一个新范围而不是使用外部范围：

```
>>> letters = 'defghijklmno'
>>> K = {letters[i]:(i*i-1) for i in range(len(letters))}
>>> i          # was defined in an inner scope
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'i' is not defined
>>> k = {}
>>> for i in range(len(letters)):
...     k[letters[i]] = i*i - 1
... 
>>> i     # still defined!
11 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T20:18:40.520

解释：

```
>>> letters = 'defghijklmno'
>>> range(len(letters))
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11] 
```

这意味着

```
>>> [letters[i] for i in range(len(letters))]
['d', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o'] 
```

同时

```
>>> [(i*i-1) for i in range(len(letters))]
[-1, 0, 3, 8, 15, 24, 35, 48, 63, 80, 99, 120] 
```

因此，您的字典理解构建了对`'d':-1, 'e':0, 'f':3, ...`（等）的字典。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T20:15:48.323

好吧，首先，这是一种相当糟糕的做法。在 Python 中按索引循环是一种非常糟糕的做法（它更慢，而且读起来很糟糕），所以更好的方法是：

```
letters = 'defghijklmno'
K = {letter: (i*i-1) for i, letter in enumerate(letters)} 
```

这一切都是一个简单的[字典理解](http://www.youtube.com/watch?v=pShL9DCSIUw)。当我们遍历一个字符串时，我们会得到组成它的各个字符。我们使用`enumerate()`内置函数给我们匹配的数字，然后生成一个字典，从字母到数字的平方，减一。

如果您正在为理解本身而苦苦挣扎，它相当于一个 for 循环（除了更快），我建议您观看[我的视频](http://www.youtube.com/watch?v=pShL9DCSIUw)以获取完整的解释，其中包含字典理解的示例以及它的表亲（列表/集合理解和生成器表达式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T20:16:33.793

第二行是字典理解。它就像一个普通的列表推导式或生成器表达式，只是它生成键值对，然后用于形成字典。

代码大致相当于

```
letters = 'defghijklmno'
K = {}
for i in range(len(letters)):
    key = letters[i]
    val = (i*i-1)
    K[key] = val 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T20:18:19.850

您可以将 Dict 理解重写为循环

```
K = {} # empty dict
for i in range(len(letters)): # i goes from 0 to 11
    K[letters[i]] = i*i-1 
```

所以在你的单次迭代中

```
K['d'] = -1
K['e'] = 0
K['f'] = 3
# ... 
```

等等。dict 理解只是编写此循环的一种更短（并且在大多数 Python 程序员看来）更优雅的方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T20:18:21.497

为了理解它，它有助于查看发生的事情的各个部分。`for i in range(len(letters))`循环不会遍历字母的单个字符，而是遍历字符串的 indizes 。那是因为您可以使用它们的索引访问字符串的单个字符。所以`letters[0]`指的是第一个字符，`letters[1]`第二个，`letters[len(letters)-1]`最后一个。

所以，让我们分别看一下字典的键：

```
>>> [letters[i] for i in range(len(letters))]
['d', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o'] 
```

因此，您可以按原始顺序单独获取所有字母。

现在，让我们看一下字典的值：

```
>>> [(i*i-1) for i in range(len(letters))]
[-1, 0, 3, 8, 15, 24, 35, 48, 63, 80, 99, 120] 
```

所以，现在我们既有键又有值；字典理解现在所做的就是将这些键链接到值——按照上面的顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-09T20:18:50.840

对于每个`i`从`i == 0`到`i == 11`（最后一个字母的索引`letters`），都会将一个条目添加到结果字典中，其中键为`letters[i]`，其关联值为`i*i-1`。这给出了：

```
K['d'] == -1
K['e'] == 0
K['f'] == 3 
```

等等。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-09T20:33:38.843

您实际上并没有迭代`letters`本身的字母；相反，您通过从, to , to , ..., to变化来迭代,的*长度*。随着您的变化，您将创建一个字典条目，其键是 的第一个字母，其值为。`letters``i``0``1``2``11``i``i``letters``i*i - 1`

换句话说，您创建了一个字典，其中的每个条目都包含一个`k`来自的字母（键） `letters`，与一个等于`k`的指数平方减去的值配对`1`。

您可以用简单的英语将字典理解理解为：所有字母（键）的字典，`k`带有`letters`index `i`，与 value 配对`i*i - 1`。

# android - 保存相机图像android ....它们旋转了90度

> ID：13791312
> 
> 赞同：2
> 
> 时间：2012-12-09T20:11:14.727
> 
> 标签：android, android-intent, android-camera

我正在使用 commonware 的相机示例来尝试创建一个拍照的 android 应用程序。预览显示相机旋转了 90 度，我通过应用进行了纠正：

```
camera.setDisplayOrientation(90); 
```

但是，图像仍以另一种方式旋转 90 度保存。我该如何调整它，以便在保存图像时，它们保存在与查看器相同的“方面”？

请告知，TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T21:43:46.440

根据[这篇文章](https://stackoverflow.com/questions/13517200/photo-rotate-90-degree-while-capture-in-some-phones)，这仅在某些设备中发生，并且取决于制造商。

我设法通过检测设备的方向角度并相应地应用旋转来解决这个问题，如下所示：

```
 ExifInterface exitInterface = new ExifInterface(imagePath);

            int orientation = exitInterface.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_UNDEFINED);
            int degree = 0;

            switch (orientation){
            case ExifInterface.ORIENTATION_ROTATE_90:
                degree = 90;
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                degree = 180;
                break;
            case ExifInterface.ORIENTATION_ROTATE_270:
                degree = 270;
                break;
            } 
```

然后我使用自定义方法旋转我的位图：

```
 public static Bitmap rotateImage(Bitmap src, float degree) 
{
        // create new matrix
        Matrix matrix = new Matrix();
        // setup rotation degree
        matrix.postRotate(degree);
        Bitmap bmp = Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
        return bmp;
} 
```

# sql - 如何处理 Violation of PRIMARY KEY 约束错误

> ID：13791313
> 
> 赞同：-1
> 
> 时间：2012-12-09T20:11:17.470
> 
> 标签：sql, sql-server, database, sql-server-2008

我在使用此脚本的存储过程中遇到了真正的问题：

```
 INSERT INTO #tr_TxnDetails       
    SELECT 
        b.pid,
        b.etc
    FROM tbl_SomeTableA as a
    JOIN tbl_SomeTableB as b ON a.etc = b.etc 
        AND a.SomeColumn = b.SomeColumn 

    -- This is throwing error: Violation of PRIMARY KEY constraint. Cannot insert duplicate key in object 'dbo.tr_TxnDetails'. 
    INSERT INTO tr_TxnDetails
    ([id], [etc])
    SELECT  a.[id],
            a.[etc]
    FROM #tr_TxnDetails as a
    WHERE not exists (select 1 from tr_TxnDetails as b where a.[id] = b.[id]); 
```

如何确保在对它的`INSERT INTO`语句期间`tr_TxnDetails`没有插入具有相同主键的行：`pid`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:02:59.863

```
INSERT INTO #tr_TxnDetails       
SELECT 
    b.pid,
    b.etc
FROM tbl_SomeTableA as a
JOIN tbl_SomeTableB as b ON a.etc = b.etc 
    AND a.SomeColumn = b.SomeColumn 
  WHERE b.pid NOT IN (select distinct id from tr_TxnDetails) --<<--

INSERT INTO tr_TxnDetails
([id], [etc])
SELECT  a.[id],
        a.[etc]
FROM #tr_TxnDetails as a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:41:45.940

我认为您的第一`INSERT ... SELECT`条语句正在产生重复项，然后这些重复项在您的第二次选择中导致主键错误。您的`WHERE EXISTS`子句仅防止插入与现有行重复的重复项。

稍后我会回答您的问题，但只是为了说明您可以通过以下一组语句非常简单地导致此错误：

```
create table TableA
(
  Pid INT PRIMARY KEY,
  etc INT
 );

INSERT INTO TableA
SELECT 1, 0
UNION 
SELECT 1, 2 
```

这是错误：

```
Violation of PRIMARY KEY constraint 'PK__TableA__C57059387F60ED59'. Cannot insert duplicate key in object 'dbo.TableA'.: INSERT INTO TableA SELECT 1, 0 UNION SELECT 1, 2 
```

现在回到您的查询，简单的重写是确保查询只返回`DISTINCT`行：

```
INSERT INTO #tr_TxnDetails       
SELECT DISTINCT
    b.pid,
    b.etc
FROM tbl_SomeTableA as a
JOIN tbl_SomeTableB as b ON a.etc = b.etc 
    AND a.SomeColumn = b.SomeColumn 

INSERT INTO tr_TxnDetails
([id], [etc])
SELECT  a.[id],
        a.[etc]
FROM #tr_TxnDetails as a
WHERE not exists (select 1 from tr_TxnDetails as b where a.[id] = b.[id]); 
```

这应该为您解决问题。

还有一点是，在您的示例中，您应该取消临时表步骤，除非有充分的理由，例如这两个语句之间的一些其他处理。这是重写的查询：

```
INSERT INTO tr_TxnDetails       
SELECT DISTINCT
        b.pid,
        b.etc
FROM tbl_SomeTableA as a
JOIN tbl_SomeTableB as b ON a.etc = b.etc 
     AND a.SomeColumn = b.SomeColumn 
WHERE not exists (
    select 1 
    from tr_TxnDetails as c 
    where a.[id] = C.[id]
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T09:39:36.143

```
DECLARE @ChoiceID INT 

SET @ChoiceID = (SELECT MAX([CHOICE_ID]) FROM BI_QUESTION_CHOICE) -- FOR SOMETABLE.ID

INSERT BI_QUESTION_CHOICE
                (
                    [choice_id],
                    [choice_descr],
                    [sequence],
                    [question_id],
                    [is_correct],
                    [created_by],
                    [created_dt],
                    [modified_by],
                    [modified_dt]
                )
                (SELECT @ChoiceID+ROW_NUMBER() OVER (ORDER BY @ChoiceID),  
                    pref.value('(ChoiceText/text())[1]', 'varchar(50)'),  
                    pref.value('(Sequence/text())[1]', 'varchar(50)') ,
                    @QuestionID, 
                    pref.value('(IsCorrect/text())[1]', 'bit'),
                    'mbathini',  
                     GETDATE(),  
                    'mbathini', 
                    GETDATE()  
                FROM @xmlstring.nodes('/ArrayOfBI_QA_ChoiceEntity/BI_QA_ChoiceEntity') AS Responses(pref)) 
```

# php - 如何从网页中提取有意义和有用的内容？

> ID：13791316
> 
> 赞同：12
> 
> 时间：2012-12-09T20:11:30.930
> 
> 标签：php, python, html-parsing, web-scraping, data-extraction

我想解析一个网页并从中提取有意义的内容。我所说的有意义，是指用户希望在该特定页面中看到的内容（仅文本）（不包括广告、横幅、评论等的数据）。我想确保当用户保存页面时，他想要的数据读取已保存，仅此而已。

简而言之，我需要构建一个像 Readability 一样工作的应用程序。( [http://www.readability.com](http://www.readability.com) ) 我需要获取网页的这些有用内容并将其存储在单独的文件中。我真的不知道该怎么做。

我不想使用需要我连接到互联网并从他们的服务器获取数据的 API，因为数据提取过程需要离线完成。

我能想到的方法有两种：

1.  使用基于机器学习的算法（例如：[http](http://ai-depot.com/articles/the-easy-way-to-extract-useful-text-from-arbitrary-html/) ://ai-depot.com/articles/the-easy-way-to-extract-useful-text-from-arbitrary-html/ ）

2.  开发一个可以令人满意地从网页中清除所有混乱的网络刮刀。

是否有现有的工具可以做到这一点？我遇到了锅炉管库（[http://code.google.com/p/boilerpipe/](http://code.google.com/p/boilerpipe/)），但没有使用它。有人用过吗？它是否给出了令人满意的结果？有没有其他工具，特别是用 PHP 或 Python 编写的，可以进行这种网络抓取？

如果我需要构建自己的工具来做到这一点，你们会建议做什么？

因为我需要在开始解析之前清理凌乱或不完整的 HTML，所以我会使用像 Tidy ( [http://www.w3.org/People/Raggett/tidy/](http://www.w3.org/People/Raggett/tidy/) ) 或 Beautiful Soup ( [http: //www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)）来完成这项工作。

但是我不知道在这一步之后如何提取内容。

PS。我是一名业余爱好者，如果有准备好使用开源工具来执行此操作，并且可以轻松集成到我将用 PHP 或 Python 编写的代码中，我会很高兴。或者，如果我必须编写自己的代码，我很想得到以前做过此类工作的指导！：） 非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T20:46:26.607

你在谷歌中输入了“python 可读性”吗？github 上有一个非常受欢迎的（200 多个关注者）库。

[https://github.com/buriy/python-readability](https://github.com/buriy/python-readability)

此外，如果您要输入“php 可读性”，还有一个 php，尽管它有 100 个关注者，但它已经有近两年没有活动了 [https://github.com/feelinglucky/php-readability](https://github.com/feelinglucky/php-readability)

最后最受欢迎（350+ github 关注者）是 ruby​​ 可读性端口 [https://github.com/iterationlabs/ruby-readability](https://github.com/iterationlabs/ruby-readability)

至少您可以看到这 3 个不同的项目如何完成解析网页的“重要部分”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T22:32:34.530

您可以使用 html。

```
import htql
page="..."
query="&html_main_text"

result=htql.query(page, query) 
```

# sql - 如果 A、B、C 上有索引，那么 A、B 上的索引是否多余？

> ID：13791317
> 
> 赞同：12
> 
> 时间：2012-12-09T20:11:33.213
> 
> 标签：sql, sql-server, indexing

拥有多年的 DBA 经验，我相信我知道问题的答案，但我认为检查我的基础永远不会有坏处。

使用 SQL Server，假设我有一个表，它在 column`A`和 column上有一个索引`B`，在 columns `A`、`B`和上有一个第二个索引`C`，删除第一个索引是否安全，因为第二个索引基本上会满足将从中受益的查询第一个索引？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-09T20:17:37.760

这取决于，但答案通常是“是的，您可以将索引放在 (A,B) 上”。

反例（您不会删除 (A,B) 上的索引）是当 (A,B) 上的索引是强制执行约束的唯一索引时；那么您不想在 (A,B) 上删除索引。(A,B,C) 上的索引也可以是唯一的，但唯一性是多余的，因为 (A,B) 组合是唯一的，因为另一个索引。

但是在没有这种异常情况的情况下（例如，如果 (A,B) 和 (A,B,C) 都允许重复条目），则 (A,B) 索引在逻辑上是多余的。但是，如果列 C 是“宽”列（可能是 CHAR(100) 列），而 A 和 B 很小（比如 INTEGER），则 (A,B) 索引比 (A,B,C) 更有效) 索引，因为您可以获得 (A,B) 索引的每页读取的更多信息。因此，即使 (A,B) 是多余的，它也可能值得保留。您还需要考虑表格的波动性；如果表很少更改，则额外的索引无关紧要；如果表变化很大，额外的索引会减慢对表的修改。这是否重要很难猜测。您可能需要进行性能测量。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-09T20:16:28.577

第一个索引涵盖在 上查找的查询，`A`第二`A,B`个索引可用于涵盖在 上查找的查询`A`，`A,B`或者`A,B,C`显然是第一种情况的超集。

If`C`非常宽，但是索引`A,B`可能仍然有用，因为它可以用更少的读取来满足某些查询。

例如，如果`C`是一`char(800)`列，则以下查询可能会因提供更窄的索引而受益匪浅。

```
SELECT a,b
FROM YourTable
ORDER BY a,b 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-09T20:17:09.677

是的，这是一个常见的优化。任何将从 A、B 上的索引中受益的查询也可以从 A、B、C 上的索引中受益。

在 MySQL 社区中，甚至还有一个工具可以在整个架构中搜索冗余索引： [http ://www.percona.com/doc/percona-toolkit/pt-duplicate-key-checker.html](http://www.percona.com/doc/percona-toolkit/pt-duplicate-key-checker.html)

可能的例外情况是，如果 A、B 上的索引更紧凑且使用更频繁，并且您想控制哪个索引保持加载在内存中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-28T07:55:37.277

我在想的大部分内容都是[乔纳森](https://stackoverflow.com/users/15168/jonathan-leffler)在之前的[回答](https://stackoverflow.com/a/13791383/15168)中写的。独特性，更快的工作，以及我认为他错过的另一件事。

如果第一个索引是`A desc, B asc`第二个`A asc, B asc, C asc`，那么删除第一个索引并不是真正可行的方法，因为第二个索引不是第一个索引的超集，如果排序为，您的查询不能从第二个索引中受益写在第一个。

在某些情况下，例如当您使用第一个索引时，您可以`order by A desc, B asc`（当然） and `A asc, B desc`，但您也可以进行查询以使用该索引的任何部分，例如`Order by A desc`.

但是像`order by A asc, B asc`, 这样的查询不会被第一个索引“覆盖”。

所以我想加起来，您通常可以删除第一个索引，但这取决于您的表配置和查询（当然还有索引）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-28T20:26:24.727

我通常会在包含历史数据的表中找到这个“几乎”相似的索引。如果`column C`是日期或整数列，请小心。它最有可能用于满足 MAX 中的函数`WHERE tblA.C = MAX(tblB.C)`，它完全跳过表并使用仅索引访问路径。

# java - 用于排除 REQUIRES_NEW 方法上的死锁的 DataSource 配置

> ID：13791322
> 
> 赞同：2
> 
> 时间：2012-12-09T20:11:45.460
> 
> 标签：java, jpa, transactions, datasource, stress-testing

`JPA`在对我的基础层进行压力测试`DAO`时（在单独的线程中同时运行 500 个同时更新）。我遇到以下问题 - 系统总是卡住无法取得任何进展。

问题是，在某个时候任何线程都没有可用的连接，所以没有运行线程可以取得任何进展。

我已经对此进行了一段时间的调查，根源是`REQUIRES_NEW`我`add`的一个`JPA DAO's`.

所以场景是：

1.  测试开始获取新`Connection`的从`ConnectionPool`开始事务。
2.  在某个初始阶段之后，我调用`add`my `DAO`，导致它请求另一个没有的，因为到那时，所有这些`Connection`都是由并行运行的测试进行的。`ConnectionPool``Connections`

我尝试使用 DataSource 配置

1.  `c3p0`卡住
2.  `DBCP`卡住
3.  `BoneCP`卡住
4.  `MySQLDataSource`使某些请求失败，并出现错误 - 超出允许的连接数。

虽然我通过阅读 REQUIRES_NEW 解决了这个问题，所有数据源都可以完美地工作，但最好的结果似乎仍然是 MySQLDataSource，因为它没有卡住而只是失败了:)

*因此，如果您期望高吞吐量，您似乎根本不应该使用 REQUIRES_NEW。*

我的问题：

*是否有任何数据源的配置可以防止这个 REQUIRES_NEW 问题？*

* * *

我在 c3p0 中使用了结帐超时，并且测试开始失败，正如预期的那样。

*   2 秒 - 8 % 通过
*   4 秒 - 12 % 通过
*   6 秒 - 16 % 通过
*   8 秒 - 26 % 通过
*   10 秒 - 34 % 通过
*   12 秒 - 36 % 通过
*   14/16/18 秒 - 40 % 通过

***这当然是非常主观的。***

***具有简单配置的 MySQLDataSource 提供了 20% 的通过测试。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:21:48.117

为获取连接配置超时怎么样？如果在 2 秒内无法获得连接，则池将中止并抛出异常。

另请注意，这`REQUIRES`是更典型的。通常，您希望调用链共享事务，而不是为链中的每个新调用启动新事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:00:47.293

可能任何连接池都可以配置为以多种方式处理此问题。最终，所有 REQUIRES_NEW 可能会迫使您的应用程序为每个客户端获取多个连接，这会增加压力测试的压力。如果池挂起，可能是因为它们的连接用完了。如果您设置了足够大的池大小，您可能会解决该问题。或者，正如 Arjan 上面建议的那样，如果客户端必须等待连接，您可以将池配置为“快速失败”而不是无限期挂起。使用 c3p0，其配置参数将是 checkoutTimeout。

当您说连接池“卡住”时，如果没有更多关于究竟发生了什么的信息，这必然是猜测。但是在非常高的并发负载下，对于任何连接池，您要么需要提供大量资源（c3p0 中的高 maxPoolSize + numHelperThreads），要么踢掉多余的客户端（checkoutTimeout），或者让客户端忍受很长时间（但有限！ ) 等待时间。

# xml - 使用 XSLT 对数据进行分组时缺少结果

> ID：13791323
> 
> 赞同：0
> 
> 时间：2012-12-09T20:11:46.953
> 
> 标签：xml, xslt

我遇到了一些问题 XML，我正在尝试从中创建可用的 XML，但我的 XSLT 无法正常工作。我有顶部工作，但我无法让数据出现在下半部分。

以下是 XML 数据的示例：

```
<crystalreports>
<Group Level="1">
<Group Level="2">
<Group Level="3">
<Details Level="4">
<Section SectionNumber="0">
<ACPGDEGREE1>AAS</ACPGDEGREE1>
<CCD11/>
<ACPGCOMMENTS1>The Accounting program is designed to provide the theoretical and practical background necessary for supervisory and administrative careers in accounting and accounting-related areas. This degree requires a minimum of 64 credits in program requirements, program electives, and general education as listed below.</ACPGCOMMENTS1>
<ICCB1>3203</ICCB1>
<DEPARTMENT12>ACCOU</DEPARTMENT12>
<ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
<CRSNO1>1150</CRSNO1>
<CRSTITLE11>Managerial Accounting</CRSTITLE11>
<CRSMINCRED1>4.00</CRSMINCRED1>
<ACRBPRINTEDSPEC1/>
<ACPGHOMELANGNOTREQDRSN1>General Education - 12 to 16 (In addition to those listed above)  Total Credits Required - 64 to 70</ACPGHOMELANGNOTREQDRSN1>
</Section>
</Details>
<Details Level="4">
<Section SectionNumber="0">
<ACPGDEGREE1>AAS</ACPGDEGREE1>
<CCD11/>
<ACPGCOMMENTS1>The Accounting program is designed to provide the theoretical and practical background necessary for supervisory and administrative careers in accounting and accounting-related areas. This degree requires a minimum of 64 credits in program requirements, program electives, and general education as listed below.</ACPGCOMMENTS1>
<ICCB1>3203</ICCB1>
<DEPARTMENT12>ACCOU</DEPARTMENT12>
<ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
<CRSNO1>2205</CRSNO1>
<CRSTITLE11>Federal Taxation I</CRSTITLE11>
<CRSMINCRED1>3.00</CRSMINCRED1>
<ACRBPRINTEDSPEC1/>
<ACPGHOMELANGNOTREQDRSN1>General Education - 12 to 16 (In addition to those listed above)  Total Credits Required - 64 to 70</ACPGHOMELANGNOTREQDRSN1>
</Section>
</Details>
<GroupFooter>
<Section SectionNumber="0"/>
</GroupFooter>
</Group>
<GroupFooter>
<Section SectionNumber="0"/>
</GroupFooter>
</Group>
<GroupFooter>
<Section SectionNumber="0"/>
</GroupFooter>
</Group>
<Group Level="1">
<Group Level="2">
<Group Level="3">
<Details Level="4">
<Section SectionNumber="0">
<ACPGDEGREE1/>
<CCD11>ACAC</CCD11>
<ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.    </ACPGCOMMENTS1>
<ICCB1>4207</ICCB1>
<DEPARTMENT12>ACCOU</DEPARTMENT12>
<ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
<CRSNO1>1221</CRSNO1>
<CRSTITLE11>Introduction to Spreadsheets</CRSTITLE11>
<CRSMINCRED1>3.00</CRSMINCRED1>
<ACRBPRINTEDSPEC1/>
<ACPGHOMELANGNOTREQDRSN1/>
</Section>
</Details>
<Details Level="4">
<Section SectionNumber="0">
<ACPGDEGREE1/>
<CCD11>ACAC</CCD11>
<ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.   </ACPGCOMMENTS1>
<ICCB1>4207</ICCB1>
<DEPARTMENT12>ACCOU</DEPARTMENT12>
<ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
<CRSNO1>1150</CRSNO1>
<CRSTITLE11>Managerial Accounting</CRSTITLE11>
<CRSMINCRED1>4.00</CRSMINCRED1>
<ACRBPRINTEDSPEC1/>
<ACPGHOMELANGNOTREQDRSN1/>
</Section>
</Details>
<Details Level="4">
<Section SectionNumber="0">
<ACPGDEGREE1/>
<CCD11>ACAC</CCD11>
<ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
<ICCB1>4207</ICCB1>
<DEPARTMENT12>ACCOU</DEPARTMENT12>
<ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
<CRSNO1>1175</CRSNO1>
<CRSTITLE11>Microcomputer Accounting</CRSTITLE11>
<CRSMINCRED1>2.00</CRSMINCRED1>
<ACRBPRINTEDSPEC1/>
<ACPGHOMELANGNOTREQDRSN1/>
</Section>
</Details>
<GroupFooter>
<Section SectionNumber="0"/>
</GroupFooter>
</Group>
<GroupFooter>
<Section SectionNumber="0"/>
</GroupFooter>
</Group>
<GroupFooter>
<Section SectionNumber="0"/>
</GroupFooter>
</Group>
</crystalreports> 
```

这是 XSLT：

```
<?xml version="1.0"?><!-- DWXMLSource="STX049 Course Catalog Parsed.xml" -->
<!DOCTYPE xsl:stylesheet>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="no"/>

<xsl:key name="degrees-by-title" match="Group/Group/Group/Details" use="Section/DEPTSDESC1" />

<xsl:template match="CrystalReport">

<crystalreports>
<xsl:for-each select="Group/Group/Group/Details[count(. | key('degrees-by-title', Section/DEPTSDESC1)[1]) = 1]">
<department>
<Degreetitle><xsl:value-of select="Section/ACPGDEGREE1"/></Degreetitle><xsl:text> DEGREE 
</xsl:text><DegreeDesc><xsl:value-of select="Section/ACPGCOMMENTS1"/></DegreeDesc><xsl:text> 
ICCB Code </xsl:text><ICCBcode><xsl:value-of select="Section/ICCB1"/></ICCBcode><xsl:text> | Field of Study     Code: </xsl:text><ProgramID><xsl:value-of select="Section/ACADPROGRAMSID1"/></ProgramID><xsl:text> 
Program Requirements
</xsl:text>
<xsl:for-each select="key('degrees-by-title', Section/DEPTSDESC1)">
<xsl:sort select="Section/DEPARTMENT12" />
<Details> 
<class><deptname><xsl:value-of select="Section/DEPARTMENT12"/></deptname><xsl:text> </xsl:text><courseno>    <xsl:value-of select="Section/CRSNO1"/></courseno><classname><xsl:value-of select="Section/CRSTITLE11"/>    </classname><xsl:text> </xsl:text><classcredit><xsl:value-of select="Section/CRSMINCRED1"/></classcredit>    </class><xsl:text>
</xsl:text> 
</Details>
</xsl:for-each>
</department><xsl:text>
</xsl:text>
</xsl:for-each>
</crystalreports>
</xsl:template>
</xsl:stylesheet> 
```

上半部分有效，但我在底部循环中没有得到任何数据，也不知道为什么。

基本上，我试图以这样的方式结束：

```
<crystalreports>
<department>
<Degreetitle>ACPGDEGREE1</Degreetitle> DEGREE 
<DegreeDesc>ACPGCOMMENTS1</DegreeDesc>
ICCB Code <ICCBcode>ICCB1</ICCBcode> | Field of Study  Code: <ProgramID>ACADPROGRAMSID1</ProgramID>

Program Requirements
<xsl:for-each select="key('degrees-by-title', Section/DEPTSDESC1)">
<xsl:sort select="Section/DEPARTMENT12" />
<Details> 
<class><deptname>DEPARTMENT12</deptname><courseno>CRSNO1</courseno><classname>CRSTITLE11</classname <classcredit>CRSMINCRED1</classcredit></class>
</Details>
</xsl:for-each>
</department>
</xsl:for-each>
</crystalreports> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:36:11.343

假设 XML 示例中的多个根是 OP​​ 的错误，解决方案如下。

出了什么问题：

*   `xsl:template match="CrystalReport"`需要替换为要匹配的 XML 元素路径（`CrystalReport`源 XML 中没有标记；
*   密钥使用了不存在的`degrees-by-title`节点名称。

**解决方案**

```
<?xml version="1.0"?>
<!-- DWXMLSource="STX049 Course Catalog Parsed.xml" -->
<!DOCTYPE xsl:stylesheet>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="no"/>

  <xsl:key name="degrees-by-title" match="Group/Group/Group/Details" use="Section" />

  <xsl:template match="Group/Group/Group">
    <crystalreports>
      <xsl:for-each select="Details[count(. | key('degrees-by-title', Section/DEPTSDESC1)[1]) = 1]">
        <department>
          <Degreetitle>
            <xsl:value-of select="Section/ACPGDEGREE1"/>
          </Degreetitle>
          <xsl:text> DEGREE 
</xsl:text>
          <DegreeDesc>
            <xsl:value-of select="Section/ACPGCOMMENTS1"/>
          </DegreeDesc>
          <xsl:text> 
ICCB Code </xsl:text>
          <ICCBcode>
            <xsl:value-of select="Section/ICCB1"/>
          </ICCBcode>
          <xsl:text> | Field of Study     Code: </xsl:text>
          <ProgramID>
            <xsl:value-of select="Section/ACADPROGRAMSID1"/>
          </ProgramID>
          <xsl:text> 
Program Requirements
</xsl:text>
          <xsl:for-each select="key('degrees-by-title', Section)">
            <xsl:sort select="Section/DEPARTMENT12" />
            <Details>
              <class>
                <deptname>
                  <xsl:value-of select="Section/DEPARTMENT12"/>
                </deptname>
                <xsl:text> </xsl:text>
                <courseno>
                  <xsl:value-of select="Section/CRSNO1"/>
                </courseno>
                <classname>
                  <xsl:value-of select="Section/CRSTITLE11"/>
                </classname>
                <xsl:text> </xsl:text>
                <classcredit>
                  <xsl:value-of select="Section/CRSMINCRED1"/>
                </classcredit>
              </class>
              <xsl:text>
</xsl:text>
            </Details>
          </xsl:for-each>
        </department>
        <xsl:text>
</xsl:text>
      </xsl:for-each>
    </crystalreports>
  </xsl:template>
</xsl:stylesheet> 
```

# c - 我可以使用列表重置数组值吗？

> ID：13791326
> 
> 赞同：2
> 
> 时间：2012-12-09T20:12:18.183
> 
> 标签：c, arduino

我正在为 Arduino 编程。我想使用一个数组，但我想更改数组的内容，而代码正在使用我用来初始化数组的相同代码运行：

我可以做这个：

```
boolean framebuffer[6][5] = {
    {0,0,1,0,0},
    {0,0,0,1,0},
    {0,0,1,0,0},
    {0,1,0,0,0},
    {1,0,0,0,0},
    {1,1,1,1,1}
  }; 
```

但我不能这样做：

```
 framebuffer = {
    {0,0,1,0,0},
    {0,0,0,1,0},
    {0,0,1,0,0},
    {0,1,0,0,0},
    {1,0,0,0,0},
    {1,1,1,1,1}
  }; 
```

有没有可能像这样设置数组内容？我不想单独分配每个数组元素，如下所示：

```
 framebuffer[0][0] = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:25:00.273

您不能直接这样做，但是您可以预定义所有数组，然后将`memcpy`它们`framebuffer`：

```
// Put all your preconstructed items in some array.....
// You'd typically make this a global.

boolean glyphs[2][6][5] = {
    {
        {0,0,1,0,0},
        {0,0,0,1,0},
        {0,0,1,0,0},
        {0,1,0,0,0},
        {1,0,0,0,0},
        {1,1,1,1,1}
    },
    {
        {1,1,1,1,1},
        {1,0,0,1,1},
        {1,0,1,0,1},
        {1,1,0,0,1},
        {1,0,0,0,1},
        {1,1,1,1,1}
    }
};

// Then whereever you want to change the framebuffer in your code:
// copy the second into a framebuffer:
memcpy(framebuffer, glyphs[1], sizeof(boolean)*6*5); 
```

# android - 在 Android WebView 的 loadUrl 之间保持会话

> ID：13791328
> 
> 赞同：4
> 
> 时间：2012-12-09T20:12:25.493
> 
> 标签：android, session, cookies, webview

有几个关于同步 cookie 的问题，但所描述的解决方案似乎都不适合我。

我的 Android 应用中有一个 webView。第一次展示时，我使用 HTTP POST 让用户登录，服务器显示主页。只要我留在这个 web 视图中，会话就会被保留。但是，一旦我在 webview 上执行新的 loadUrl，会话就会丢失，服务器要我再次登录。

我试过[android-share-session-between-webview-and-httpclient](https://stackoverflow.com/questions/11224454/android-share-session-between-webview-and-httpclient)。它似乎不起作用，在我的 onPageStarted 中，cookie 列表始终为空。

我还尝试在 webView 的初始 loadURL（带有 POST）之前开始同步 cookie：

```
CookieManager cookieManager = CookieManager.getInstance(); 
cookieManager.setAcceptCookie(true);

CookieSyncManager.createInstance(getBaseContext());
CookieSyncManager.getInstance().startSync(); 
```

然后在 onPageFinished 中：

```
CookieSyncManager.getInstance().sync(); 
```

这也不起作用，所以现在我真的不知道该怎么办。有没有人有这方面的经验，可以向我解释怎么做？

# perl - 无法弄清楚如何在 perl 中修复此脚本

> ID：13791329
> 
> 赞同：2
> 
> 时间：2012-12-09T20:12:26.960
> 
> 标签：perl, skype, argv

我在 perl 中运行这个脚本并正确输入 id 和端口。但是，我不断收到“标量在第 16 行附近的操作员预期的位置”'skype://1024,'$ARGV”

```
 #!usr/perl/bin
    use LWP::UserAgent;
    system("color a");
    system("title Skype <<");
    system("cls");
    if(!$ARGV[0]||!$ARGV[1]) {
    print q {

    Usage : perl skype.pl [userid] [port=1024,80,433]
    };
    }
    else {
    use IO::Socket;
    my $sock = new IO::Socket::INET (
    PeerAddr => 'skype://'.$ARGV[0],
    PeerPort => 'skype://1024,'$ARGV[1],
    Proto => 'tcp',
    );
    die "Video Call Error: $!\n" unless $sock;
    print $sock "skype://0x77656263616d5f647269766572\n";
    system("start ".$sock);
    }
    # jvoid(document.write(document.currentUser.id)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T20:15:53.460

你有一个错字：

```
PeerPort => 'skype://1024,'$ARGV[1], 
```

应该：

```
PeerPort => 'skype://1024,'.$ARGV[1],
           #               ^--- missing period 
```

# java - 使用结果集

> ID：13791330
> 
> 赞同：0
> 
> 时间：2012-12-09T20:12:30.323
> 
> 标签：java

我正在尝试从我的 derby 数据库中的特定表中获取计数，但是当我运行代码时，我一直在当前光标位置获得 Invalid operation

```
 public int getNumUsers(){
    ResultSet rs = null;
    int size = -1;
    try {
        stmt = conn.createStatement();
        rs = stmt.executeQuery("select count(*) from USERS");
        while(rs.next()){
            size = rs.getInt("COUNT");
        }
        stmt.close();
    } catch (SQLException sqe) {
        sqe.printStackTrace();
    }
    return size;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:13:48.760

将您的查询更改为

```
select count(*) As COUNT from USERS 
```

或将您的函数调用更改为

```
rs.getInt(1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:13:40.587

**在您的select 语句**中为 count(*)提供**别名**。在**mysql**中，我们使用别名来命名。虽然我不知道 derby，但认为它会相似。 ****`as`****

 ****```
rs = stmt.executeQuery("select count(*) as count from USERS");
        while(rs.next()){
            size = rs.getInt("count");
        } 
```****

# java - 缩放 GWT ImageBundle 的图像大小？

> ID：13791331
> 
> 赞同：1
> 
> 时间：2012-12-09T20:12:59.313
> 
> 标签：java, gwt

如何更改以下列方式使用的图像资源的大小：

```
 public static interface SelectionImages extends ImageBundle {
            @Resource("image.png")
            AbstractImagePrototype selectionAll();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:17:28.283

我不确定您是尝试在运行时更改大小还是通过 GWT 代码在编译时更改大小。

1）您可以设置/更改图像的宽度/高度属性，如下所述 -

```
http://code.google.com/p/google-web-toolkit/wiki/ImageResource
https://developers.google.com/web-toolkit/doc/latest/DevGuideUiImageBundles 
```

2）缩放图像 - [http://fvisticot.blogspot.in/2010/01/scalable-image-with-gwt20-and.html](http://fvisticot.blogspot.in/2010/01/scalable-image-with-gwt20-and.html)（这有点过时但使用的原理类似）

3）缩放与图像调整大小不同 - [https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/a88J6-sixW0](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/a88J6-sixW0)

# c++ - 如何在 C++ 中创建具有动态维度大小的数组？

> ID：13791333
> 
> 赞同：3
> 
> 时间：2012-12-09T20:13:06.423
> 
> 标签：c++, arrays, vector, multidimensional-array, dynamic-allocation

我正在寻找创建一个数组（或向量？）来表示一些文件。

基本上，我将拥有可变数量的输入文件。每个文件的每一行都可以被视为一个自定义对象（我称它们为“符号”）。每个文件中有可变数量的行。

所以我想进行这种表示：

数组[x][y]

其中 x 将引用该文件，而 y 将引用该文件中的行。

我在 stackoverflow 上看到了一些主题，这些主题提出了一些建议

```
symbol **snapShots = new symbol*[usableFiles];
for(int i = 0; i < usableFiles; ++i) {
   snapShots[i] = new symbol[longestFile];
} 
```

这在构建时给了我一个奇怪的错误消息：

```
Undefined symbols for architecture x86_64:
   "symbol::symbol()", referenced from:
       _main in MarketDataGenerator.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
Info: Parallel threads used: 3 
```

有什么想法我会怎么做？或者在读回以进行进一步处理之前，我是否会更好地将信息暂时存储在文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:20:06.847

您是否考虑过使用`std::vector<symbol>`or `std::vector<std::vector<symbol> >`？您的链接器试图告诉您的是，您已经为您的类声明了一个默认构造函数，`symbol`但没有定义它（至少没有在您链接的文件中）。

# c# - 为 asp.net 网络服务获取 HttpHandler

> ID：13791335
> 
> 赞同：1
> 
> 时间：2012-12-09T20:13:18.607
> 
> 标签：c#, asp.net, web-services, asmx

我正在使用 asp.net`RouteTable`为 WebService 注册自定义路由，但是 asp.net WebServices 不会从`IHttpHandler`接口继承，因此将调用传递给底层`HttpHandler`.

目前，唯一的官方/记录方法是使用`WebServiceHandlerFactory`为服务获取正确的处理程序：

```
IHttpHandler handler = new WebServiceHandlerFactory().GetHandler(HttpContext.Current, "*", "url", "path"); 
```

但是，这需要服务的虚拟路径，这不是我想要的！我发现的另一个解决方法实际上是`WebServiceHandlerFactory`使用反射并调用内部`CoreGetHandler`方法：

```
var wshf = new WebServiceHandlerFactory();
var coreGetHandler = wshf.GetType().GetMethod("CoreGetHandler", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
var httpHandler = (IHttpHandler)coreGetHandler.Invoke(wshf, new object[] { typeof(MyWebService), context, context.Request, context.Response }); 
```

但这不是官方/记录在案的方式，并且可能会在未来的版本中发生变化，所以我的问题是，是否有**任何**方法可以`HttpHandler`仅根据其类型而不是其虚拟路径来获得 asp.net WebService 的权利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:17:04.577

传统的 asmx WebServices 有一个替代方案，使用 WCF Web 服务更加容易和可扩展。[我终于从这里](https://stackoverflow.com/questions/2921802/serviceroute-webservicehostfactory-kills-wsdl-generation-how-to-create-extens)找到了如何将 WCF 服务与 IIS 路由管道集成的解决方案

这是一个快速的片段：

```
RouteTable.Routes.Add(new ServiceRoute("CustomServiceAddress", new ServiceHostFactory(), typeof(WCFService))); 
```

# c# - 如何使用 ContactPicker 获取联系人的图像？

> ID：13791337
> 
> 赞同：1
> 
> 时间：2012-12-09T20:13:23.887
> 
> 标签：c#, windows-8

为 Windows 8 开发并希望在 People App 中使用联系人的图片。但是你将如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:32:24.187

使用联系信息api使用[`GetThumbNailAsync`方法](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contactinformation.getthumbnailasync.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。

# c# - Visual Studio 2012 + IIS 8.0 = 如何在 localhost 上部署 WCF 服务？

> ID：13791348
> 
> 赞同：1
> 
> 时间：2012-12-09T20:14:12.147
> 
> 标签：c#, .net, wcf, iis

我有一个`Wcf Service Application`项目被不同的项目引用和使用。启动 Visual Studio 2012 时一切正常 - IIS Express 已启动，托管在 localhost 上。

我试图`Publish`在我的`Wcf Service Application`. 我创建了一个新的发布配置文件：

![连接设置](../Images/c9c71548db23b8d2e3eba624a7ee0df2.png) ![设置](../Images/477e694866db2762faf841840a285e2f.png)

击球`Publish`有效。我可以通过互联网浏览器访问它`http://localhost`。但是，当我通过 bin/Debug 中的可执行文件正常启动我的应用程序时 - 它不起作用（应用程序崩溃）。我应该怎么办？我可以上传它并使用 IIS 管理器轻松配置它（尝试过，但出现一些访问错误）？我需要在我没有安装任何 VS 的虚拟机中使用它。

令我困扰的是，在我`Wcf Service Application`的项目`Web.config`文件中，我指定了这样的基地址：`http://localhost:8733/WcfServiceLibrary/MailingListService/`而在客户端中，`App.config`我的端点的地址如下：`http://localhost/MailingListService.svc`. 是否可以有不同的端口和地址（一个在 root，另一个在`WcfServiceLibrary`）？在 Visual Studio 中运行时效果很好。

`Web.config`：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="NewsletterEntities" connectionString="metadata=res://*/NewsletterDAL_EF.csdl|res://*/NewsletterDAL_EF.ssdl|res://*/NewsletterDAL_EF.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=(local)\SQLEXPRESS;Initial Catalog=Newsletter;Integrated Security=True;Pooling=False;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="WCFHost.MessageService">
        <endpoint address="" binding="basicHttpBinding" contract="WCFHost.IMessageService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/WcfServiceLibrary/MessageService/" />
          </baseAddresses>
        </host>
      </service>
      <service name="WCFHost.MailingListService">
        <endpoint address="" binding="basicHttpBinding" contract="WCFHost.IMailingListService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/WcfServiceLibrary/MailingListService/" />
          </baseAddresses>
        </host>
      </service>
      <service name="WCFHost.RecipientService">
        <endpoint address="" binding="basicHttpBinding" contract="WCFHost.IRecipientService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/WcfServiceLibrary/RecipientService/" />
          </baseAddresses>
        </host>
      </service>
      <service name="WCFHost.SenderService">
        <endpoint address="" binding="basicHttpBinding" contract="WCFHost.ISenderService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/WcfServiceLibrary/SenderService/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

`App.config`：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IMessageService" />
                <binding name="BasicHttpBinding_IRecipientService" />
                <binding name="BasicHttpBinding_IMailingListService" />
                <binding name="BasicHttpBinding_ISenderService" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:2433/MessageService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMessageService"
                contract="MessageServiceReference.IMessageService" name="BasicHttpBinding_IMessageService" />
            <endpoint address="http://localhost/RecipientService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IRecipientService"
                contract="RecipientServiceReference.IRecipientService" name="BasicHttpBinding_IRecipientService" />
            <endpoint address="http://localhost/MailingListService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMailingListService"
                contract="MailingListServiceReference.IMailingListService"
                name="BasicHttpBinding_IMailingListService" />
            <endpoint address="http://localhost/SenderService.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_ISenderService" contract="SenderServiceReference.ISenderService"
                name="BasicHttpBinding_ISenderService" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T17:42:59.117

不要打扰任何事情。只需执行以下操作： 1) 在服务 url 字段中输入 localhost。2) 您在网站字段的 inetmgr 中添加的网站名称。

# opencv - 几种透视变换的矩阵

> ID：13791353
> 
> 赞同：1
> 
> 时间：2012-12-09T20:15:02.430
> 
> 标签：opencv, geometry, transformation, perspective

我正在使用 OpenCV 编写一些图像处理程序。

我需要使用几个透视变换来变换图像。透视变换由矩阵定义。我知道，我们可以通过简单变换矩阵（旋转、平移等）的乘法来获得复杂的仿射变换。但是当我尝试将两个透视变换矩阵相乘时，我没有得到对应于随后使用的第一个和第二个矩阵的变换矩阵。

那么，我怎样才能得到几个随之而来的透视变换的矩阵呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:07:31.740

让你有两个透视矩阵 C:(x,y)->(u,v) 和 D:(u,v)->(r,g)：

你试图得到 M:(x,y)->(r,g)

您应该将 (1),(2) 中的 ui 和 vi 代入方程 (3),(4)。

 ui = (c00*xi + c01*yi + c02) / (c20*xi + c21*yi + c22) (1)

 vi = (c10*xi + c11*yi + c12) / (c20*xi + c21*yi + c22) (2)

 ri = (d00*ui + d01*vi + d02) / (d20*ui + d21*vi + d22) (3)

 gi = (d10*ui + d11*vi + d12) / (d20*ui + d21*vi + d22) (4)

之后你可以看到 M = D*C

# objective-c - 单击按钮时UITabbar消失

> ID：13791354
> 
> 赞同：0
> 
> 时间：2012-12-09T20:15:08.527
> 
> 标签：objective-c, uitableview, uiviewcontroller, uitabbarcontroller, uitabbar

我在我的应用程序中使用**UITabBar**。在我的一个标签栏中，我在**UIViewController中有一个****UITableView** ，其根视图控制器是**Navigation Controller**。当我点击一个单元格时，我会进入我的自定义编辑模式，即**UIViewController**。

 ******在我的编辑模式下，我有一个**backButton**，它向我显示**UIViewController**和**TableView**。

我的问题是当我单击**backButton**时，我的**TabBar**消失了。

你知道为什么我的**TabBar**会消失吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:06:21.787

在后退按钮单击中，添加以下代码。

```
[self.navigationController popViewControllerAnimated:YES]; 
```******

# c++ - 布冯的针 C++

> ID：13791355
> 
> 赞同：2
> 
> 时间：2012-12-09T20:15:11.670
> 
> 标签：c++, pi

我正在尝试编写一个程序来找到 pi 的近似值。我想实现布冯的针法。我的程序找到 0 到 1 的随机 x 坐标形式和随机角度（0 到 360）。如果 [sin(angle)*1/2 lenght of needle] 大于 x，则为正试验。该程序在循环中进行 n amonunt 试验。最后一部分是使用等式（针的长度 * n）/阳性试验来计算 pi。

针长 = 0.9

间隔 = 1

n=10000000 的结果是 pi=3,12...我在程序中找不到任何错误。我在做什么不正确？

```
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <ctime>
#include <math.h>

using namespace std;

int main()
{
    double x; // x coordinate of needle's center 
    double k; // angle between vertical position and needle
    double l; // lenght of the needle
    double n; // amount of trials
    double p = 0; // positive trials
    double y; // sin(angle) * l
    double pi;
    long i; // loop counter

srand(time(NULL));

cout << "number of trials ";
cin >> n;

l = 0.9;

for (i=0; i<n; i++)
{
    k = (double)rand()/(RAND_MAX)*360;       // random angle

    x = (double)rand()/(RAND_MAX*2);         // random x (0 do 1)

    y = (l/2) * sin (k);

    if (x<=y)                                    
    {
        p++;                                    
    }

}

pi = (l*n)/(p);

cout << "n = ";
cout << n << endl;
cout << "p = ";
cout << p << endl;

cout << pi;

return 0; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:21:31.673

一方面，sin 将弧度作为参数，而不是度数，因此随机角度不应介于 0 到 360 度之间。我知道这是因为程序

```
#include <iostream>
#include <cmath>
using namespace std;
int main(void) {
    cout << sin(30) << endl;
    return 0;
} 
```

返回 -0.988032，而不是 0.5。

此外

```
(double)rand() / (RAND_MAX * 2) 
```

生成 0 到 0.5 之间的随机数，而不是 0 到 1 之间的随机数。这是因为 rand() “返回 0 到 RAND_MAX 范围内的伪随机整数”。

# templates - Kohana Framework 3.3 中的模板

> ID：13791356
> 
> 赞同：2
> 
> 时间：2012-12-09T20:15:13.063
> 
> 标签：templates, frameworks, kohana

我正在使用 Kohana 框架，这实际上是我使用的第一个框架。我只是想知道如何在视图中正确添加模板。我现在正在做的是。

在控制器中。

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Welcome extends Controller_Template {

    public $template = 'site';

    public function action_index()
    {
        $this->template->header = View::factory('templates/header');
        $this->template->header->title = 'Page name - Welcome';
        $this->template->header->description = 'Blah blah blah.';
    } 
```

现在在视图内部，我创建了一个名为 site.php 的文件（视图）并在顶部回显变量 $header 以便它显示页面的内容，并且它工作正常但它实际上是正确的方法吗？我的意思是在每个视图中都显示标题？我确信必须有更复杂或更好的方法来做到这一点。我还听说不鼓励使用 Kohana Templete。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:46:05.337

看看 Kohana 的[Mustache](http://mustache.github.com) Plugin **[KOstache](https://github.com/zombor/KOstache/)**。IMO 将布局与逻辑分开的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:27:20.620

看看[Kostache](https://github.com/zombor/KOstache/) 它可以让你做一些简单的事情，比如

```
<li>{{kostachevariable}}</li> 
```

您只需创建扩展 Kostache 类的视图即可。一旦你这样做，你可以使用设置变量

```
$pagetitle="My Title"
$myview-bind('mypagetitle',$pagetitle) 
```

在您的模板文件中，您只需要

```
<head>
<title>{{mypagetitle}}</title> 
```

它还有许多其他不错的功能。

# django - 如何将项目添加到 Django 中的查询集对象？

> ID：13791358
> 
> 赞同：0
> 
> 时间：2012-12-09T20:15:39.820
> 
> 标签：django, django-haystack

我在 django 中使用 haystack 制作了一个 searchqueryset，并且我有一个查询集：

```
results = SearchQuerySet().auto_query(q) 
```

我需要的是向该查询集的每个对象添加一个项目。我所拥有的是这样的：

```
results[0].object.name
results[0].object.age 
```

等等当我在我的视图中得到这个查询集时，我想为每个值添加一个项目，可能类似于“x_number”并分配它。因此，当我检索我拥有的每个项目的 de 值时：

```
results[0].object.name
results[0].object.age
results[0].object.x_number 
```

（显然 x_number 可能有一个价值......这就是我实际需要做的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:28:06.493

在 SearchQuerySet 中，.object 只是对模型的引用。

如果你想添加一个字段，你可以在你的模型上定义它，然后随意分配它。如果你想动态地添加一个字段到一个模型中，这里已经讨论了[在 django 中创建动态模型字段](https://stackoverflow.com/questions/3712688/creation-of-dynamic-model-fields-in-django)。

# algorithm - 黑白棋/黑白棋游戏的 Alpha-Beta 修剪算法中的启发式函数

> ID：13791360
> 
> 赞同：1
> 
> 时间：2012-12-09T20:15:47.320
> 
> 标签：algorithm, artificial-intelligence, alpha-beta-pruning

我正在实现一个 Alpha-Beta 修剪算法，该算法将用于在奥赛罗游戏中获得最佳移动。当算法到达叶节点（即没有有效移动或达到最大深度）时，我基于此计算该节点的启发式值：

最大化玩家（运行算法并将使用算法返回的移动的玩家）在该节点的棋盘上有多少砖？（每块砖+1）

最大化玩家在这个节点有多少有效移动？（每步+10）

最大化玩家有多少个角砖？（每个角砖+100）

问题是：如果不是最大化玩家在叶子节点上交，我该怎么办？然后不可能计算他的有效动作，因为轮不到他。我可能误解了整个 alpha-beta 修剪算法，或者至少误解了启发式函数应该如何工作。有人可以给我一个提示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T03:32:30.520

无论您是使用算法的传统极小极大公式，还是负极大公式，您都应该从要移动的一侧来评估棋盘。

然后，两种算法对值的处理方式不同；minimax 只是有单独的代码片段，无论是轮到 MAX 还是 MIN 玩家，而 negamax 分配“val = - negamax(child)”。

ChessProgrammingWiki 有很好的解释和伪代码：[Minimax](https://chessprogramming.wikispaces.com/Minimax)和[Negamax](https://chessprogramming.wikispaces.com/Negamax)。

# build - 使用 Google Maps API 构建应用程序错误

> ID：13791364
> 
> 赞同：3
> 
> 时间：2012-12-09T20:15:52.860
> 
> 标签：build, sencha-touch-2

我在构建我的 sencha touch 2 应用程序以进行生产时遇到问题，使用以下命令：“sencha app build production”。我看到以下问题：

```
C:\xampp\htdocs\eiamobile\eiamobile\i>sencha app build production
[INFO] Deploying your application to C:\xampp\htdocs\eiamobile\eiamobile\i\build\production
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[ERROR] UNKNOWN, unknown error 'C:\xampp\htdocs\eiamobile\eiamobile\i\build\production\http:' 
```

如果我在 app.json 文件中使用外部 JS（谷歌几何）文件，我只会看到：

```
 "js": [
    {
        "path": "sdk/sencha-touch.js"
    },
    {
        "path": "app.js",
        "bundle": true,  /* Indicates that all class dependencies are concatenated into this file when build */
        "update": "delta"
    },
    {
        "path": "http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=geometry",
        "bundle": true,  /* Indicates that all class dependencies are concatenated into this file when build */
        "update": "delta"
    }

] 
```

任何帮助将不胜感激

编辑：

添加我的 index.html 文件

```
 <html manifest="" lang="en-US">
 <head>
 <meta charset="UTF-8">
 <title>eia-sencha</title>
 <style type="text/css">
     /**
     * Example of an initial loading indicator.
     * It is recommended to keep this as minimal as possible to provide instant feedback
     * while other resources are still being loaded for the first time
     */
    html, body {
        height: 100%;
        background-color: #1985D0
    }

    #appLoadingIndicator {
        position: absolute;
        top: 50%;
        margin-top: -15px;
        text-align: center;
        width: 100%;
        height: 30px;
        -webkit-animation-name: appLoadingIndicator;
        -webkit-animation-duration: 0.5s;
        -webkit-animation-iteration-count: infinite;
        -webkit-animation-direction: linear;
    }

    #appLoadingIndicator > * {
        background-color: #FFFFFF;
        display: inline-block;
        height: 30px;
        -webkit-border-radius: 15px;
        margin: 0 5px;
        width: 30px;
        opacity: 0.8;
    }

    @-webkit-keyframes appLoadingIndicator{
        0% {
            opacity: 0.8
        }
        50% {
            opacity: 0
        }
        100% {
            opacity: 0.8
        }
    }
 </style>
 <!-- The line below must be kept intact for Sencha Command to build your application -->
<script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=geometry"></script>

 </head>
 <body>
   <div id="appLoadingIndicator">
    <div></div>
    <div></div>
    <div></div>
   </div>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:33:19.520

尝试添加`"remote": true`app.json

[http://mitchellsimoens.com/2012/07/sencha-touch-2/going-remote-with-sencha-command/](http://mitchellsimoens.com/2012/07/sencha-touch-2/going-remote-with-sencha-command/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:00:16.447

[来自 Sencha Touch 文档](http://docs.sencha.com/touch/2-1/#!/api/Ext.Map)

要使用此组件，您必须包含来自 Google 的附加 JavaScript 文件：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

所以，我想你可以尝试以这种方式加载 API，这实际上是他们在框架附带的地图示例中执行此操作的方式。

此外，如果您的应用启动时未定义 google，我想您可以异步加载 GM API：

[http://www.senchafiddle.com/#MhAME](http://www.senchafiddle.com/#MhAME)

希望这可以帮助

# domain-driven-design - 领域驱动设计类图

> ID：13791368
> 
> 赞同：6
> 
> 时间：2012-12-09T20:16:14.490
> 
> 标签：domain-driven-design, uml, class-diagram

我想知道是否有人有一个关于如何在使用域驱动设计时组织 UML 类图的好示例。

我真的不知道如何使用存储库和服务制作合适的实体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:23:53.493

我最终为 DDD 绘制的 UML 图通常是手绘的、非正式的，并且不严格遵守所有准则。从 UML 的角度来看，实体、存储库和服务都是简单的类；为了清楚起见，类可以用[刻板印象](http://en.wikipedia.org/wiki/Stereotype_%28UML%29)标记。

此外，我并不会单独过多地强调类图。从行为的角度考虑模型通常会更有成效，这是序列图可以提供帮助的地方，尽管它们很快就会变得过于技术化。类图可以帮助您识别聚合和实体，但它们也可能由于过于强调名词而不是动词而使您误入歧途。

DDD 中另一种重要的图表类型是[上下文映射](http://en.wikipedia.org/wiki/Domain-driven_design#Context_map)，可以将其视为有界上下文的类图。没有任何明确的 UML 实践来表达上下文映射，因此非正式的方法效果最好。

总的来说，对我有用的是低摩擦、低仪式和非正式的。用方框来表示概念，用它们之间的线来表示关系。除此之外的任何事情肯定会有所帮助，但不应以其他方面为代价。

您还应该了解图表的用途。它们是为了促进设计和建模过程吗？他们是为了文件吗？为了引发对话？为了交流？这些原因中的每一个都可能有特定的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T19:14:07.560

我的建议：为每个 DDD 构建块（例如 <>、<、<> 等）构建原型，用其中一个原型对每个类进行签名，仅使用“使用”连接...（仅用于聚合的复合）

# powershell - 写主机“” - 替代

> ID：13791369
> 
> 赞同：1
> 
> 时间：2012-12-09T20:16:22.677
> 
> 标签：powershell, powershell-2.0

是否有替代方法：Write-Host "" 在 powershell 中返回回车？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:40:21.837

其他选项：

```
 write-host

 $host.UI.WriteLine()

 [console]::WriteLine() # this also  in ISE v3.0 
```

字符串内部：

```
"Firts line`r`n`r`nThird Line" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:49:06.877

也许也是一个选择：

```
Write-Host "Line1"
"" #Line2
Write-Host "Line3" 
```

# java - TestNG 使用提供的数据初步执行 @BeforeClass 多次运行所有类方法

> ID：13791374
> 
> 赞同：7
> 
> 时间：2012-12-09T20:16:40.773
> 
> 标签：java, selenium, webdriver, testng, selenium-webdriver

我正在使用 TestNG 和 Selenium WebDriver 为 webapp 编写测试套件。

我需要的是为不同的经过身份验证的用户多次运行测试类的所有方法（数据在运行时提取：从数据库中）。所以我需要将数据传递给具有数据提供程序的类，它提供所有用户的凭据，然后我需要为每个用户创建一个 Web 驱动程序（为了实验的纯度）并在`@BeforeClass`方法中使用提供的凭据进行身份验证，运行所有`@Test`类的方法，并`@AfterClass`拆除关闭网络驱动程序。

我怎样才能做到这一点？

我的尝试在这里： [https ://gist.github.com/4246674](https://gist.github.com/4246674)

Attempt1 是`@Test(dataProvider="getUsersIdAndName")`在课堂上放置一个。它不起作用，因为事实证明`@Test(dataProvider=)`，类并不意味着应该使用提供的数据调用类的所有方法。结果是根本没有调用该方法，因为没有数据可以传递给它的参数。我得到奇怪的测试报告，其中该方法被标记为通过，执行时间为 0 秒。（这是一个在 NetBeans 中打开的 Maven 项目，如果这有意义的话。）

`@Test(dataProvider=)`上课有什么意义吗？

Attempt2 是`@Test`在方法的注释上添加 dataProvider 。它不起作用，因为这意味着在单个类运行期间调用了两次测试方法。结果是第二次失败，因为它试图重复测试，而 Web 驱动程序没有重新初始化：浏览器已经呈现另一个页面。

第一次和第二次尝试也有缺点，即登录本身是在测试方法中完成的，而不是在`@BeforeClass`方法中，因为我不知道如何从数据提供者那里提供数据。

Attempt3 是对单一方法的组合`@BeforeClass`和绝望尝试。`@Test`它不起作用，因为`@BeforeClass`还要求`@Parameters`带注释的方法是否具有参数列表。结果是这个方法被调用了 3 次：第一次是因为上述原因而失败时作为类设置，而在成功时因为数据提供者被调用了两次。

然后我发现 TestNG 没有提供一种方法来使用不同的数据多次调用所有类方法：http: [//comments.gmane.org/gmane.comp.java.testng.user/864](http://comments.gmane.org/gmane.comp.java.testng.user/864)

关于如何归档相同的效果，我还有另外两个想法。

Idea4是`@Test(dataProvider=)`在每个测试方法上放置一个，每个方法都会自己进行身份验证和`isAuthenticated()`测试，然后进行自己的测试。无效且丑陋。

看起来最实惠的 Idea5 是使用`@Test`一种方法进行标记，该方法将聚合所有其他测试方法：它从数据提供者接收数据，执行给定用户的身份验证，然后运行 ​​isAuthenticated 测试和所有其他必要的测试。在这种情况下`@BeforeClass`，`@AfterClass`只是设置和拆除 web 驱动程序。这种方法的缺点是我失去了使用能力`@BeforeMethod`，`@AfterMethod`但这对我来说是负担得起的：看起来我不需要它们。

有没有更好的方法来存档相同的效果？

对不起，长消息。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T09:19:09.973

您可以根据自己的需要尝试探索工厂。Factory 将允许您运行具有不同数据的类的所有使用 @Test 注释的方法。在这种情况下，你可以在你的课前初始化你的 webdriver。[在这里](http://testng.org/doc/documentation-main.html#factories)解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:44:40.283

好的，让我根据我对 testNG 和 webdriver 的经验来回答你的问题。

问：类上的@Test(dataProvider=) 是否意味着任何东西？
A. 不，dataProvider 是方法级别的注释，而不是类级别。[正如这里](http://testng.org/doc/documentation-main.html#parameters-dataproviders)提到的。它应该是一个以 Object[][] 格式为 Test 方法提供数据的方法。

Q. 如何实现您提到的场景？（假设我了解您的情况..）
A. 您应该使用 @BeforeMethod 而不是 @BeforeClass 来实例化 webdriver 对象。这样，您可以为每种方法创建不同的 WD 对象。并且 dataProvider 可以将多个数据传递给 isAuthenticated() 方法。如果你想在类级别传递一个配置文件，你可以保留@BeforeClass，其中只包含属性文件加载逻辑。这样该属性文件将为整个类加载一次。显然，您还应该使用 @AfterMethod 来关闭 webdriver 对象。

# android - Google Analytics（分析）移动版不算

> ID：13791377
> 
> 赞同：1
> 
> 时间：2012-12-09T20:17:11.247
> 
> 标签：android, google-analytics

发生了一件奇怪的事情，我最近开始计算我的应用程序的访问者，它运行良好。过了一会儿，我在谷歌分析上看到了，你可以指出它是网站还是手机。我创建了一个新的配置文件，选择了“移动”，替换了我的应用程序中的代码，但从那以后，它不再计数了。我等了超过 24 小时。

我用

```
mGATracker = GoogleAnalyticsTracker.getInstance();
            mGATracker.startNewSession("UA-xxxxxxxx-x", this);
            mGATracker.trackPageView("/About"); 
```

并在 onDestroy 方法中调度：@Override

```
public void onDestroy() {
        try {
            super.onDestroy();
            mGATracker.dispatch();
            mGATracker.stopSession();
        } catch (Exception error) {
            Log.e("<YOUR_TAG>", "onDestroy: " + error.toString());
        }
    } 
```

还有其他人经历过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:52:41.063

GA 版本 1 需要“网站”类型的面板。

# opengl-es - 如何重置opengl模型视图矩阵？

> ID：13791381
> 
> 赞同：-1
> 
> 时间：2012-12-09T20:17:31.643
> 
> 标签：opengl-es, matrix

虽然我使用的是opengl es 1.1，但我想尝试使用我自己的矩阵东西，我构建了一个fps相机矩阵函数，称为：fpsmatrixupdate(); 然后我这样称呼它：

```
fpsmatrixupdate(); //this function generated a matrix called mat
drawbox(min,max) 
```

一切都很好，直到我试图画另一个盒子：

```
fpsmatrixupdate(); //this function generated a matrix called mat
drawbox(min,max);
glLoadIdentity();  // I tried to call this before drawbox2 but box2 doesn't show
drawbox2(min,max); 
```

问题：为什么这样有效？

```
fpsmatrixupdate(); //this function generated a matrix called mat
drawbox(min,max);
glLoadMatrixf(mat);  // mat is fps camera update function generated matrix,
drawbox2(min,max); 
```

如果我想绘制 200 个不同位置的框，我必须调用 glLoadMatrixf(mat) 200 次吗？如果我不调用 glLoadMatrixf(mat) 来重置矩阵，则第二个框的变换基于第一个框..

如果有人想看代码，他们几乎 99% 都是从这个演示中复制的：http: [//www.codesampler.com/oglsrc/oglsrc_5.htm#ogl_fps_controls](http://www.codesampler.com/oglsrc/oglsrc_5.htm#ogl_fps_controls)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:59:30.387

是的，如果您想将对象的放置基于每个对象的转换，则每次都必须执行 glLoadMatrix。一次计算变换矩阵并将它们存储在每个对象的场景数据中以便于访问是有意义的。

# python - pygame set_at 函数似乎无法正常工作。有人可以解释它的行为并帮助我解决它吗？

> ID：13791384
> 
> 赞同：0
> 
> 时间：2012-12-09T20:17:38.333
> 
> 标签：python, pygame

我正在尝试使用 python 的 pygame 库逐个像素地编辑 png 文件。这是基本过程：我加载 png 并循环遍历所有像素。该循环将当前像素的 rgb 值传递给一个函数，该函数找到与一组预定义的 rgb 值（如果您愿意，可以使用调色板）最接近的欧几里德距离匹配。然后我使用 surface.set_at() 函数将像素颜色更改为匹配函数返回的颜色。

我一直在努力确定为什么结果根本不是我所期望的。最终我注意到了这一点。

```
>>> image.set_at((0,0),(160, 130, 95, 255))
>>> image.get_at((0,0))
(152, 128, 96, 255) 
```

很清楚地看到 set_at() 函数对传递的颜色进行了某种类型的舍入。这对我来说是个问题，所以我有两个问题。

> 1) 为什么 set_at() 函数会做出这种改变？
> 
> 2）我该如何解决这个问题并将rgb值明确设置为我想要的？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:57:20.610

免责声明，这是基于阅读文档，而不是基于实践经验。

来自[http://www.pygame.org/docs/ref/image.html#pygame.image.load](http://www.pygame.org/docs/ref/image.html#pygame.image.load)

> 返回的 Surface 将包含与其来源文件相同的颜色格式、颜色键和 alpha 透明度。您经常需要调用 Surface.convert - 更改不带参数的图像的像素格式，以创建将在屏幕上更快绘制的副本。

也许在你的代码之前尝试这样的事情......

```
converted_image = image.convert_alpha() 
```

# jquery - 使用 jQuery 清除多选列表而不调整其大小

> ID：13791397
> 
> 赞同：0
> 
> 时间：2012-12-09T20:19:17.707
> 
> 标签：jquery, select

这是我的代码：

```
 var select = $('#subjectslist');
   select.each(function(index, option) 
    {
        $(option).remove();
    });
   $.each(subjects, function(key, subject) 
   {
       if (select.find('option[value="' + subject + '"]').length === 0 && subject!="") 
   {
     //Ajouter la nouvelle catégorie dans la liste
      $('<option>', {
       value: subject,
       text: subject
       }).appendTo(select);
  } 
```

});

这是我的问题：

由于第一个**每个**循环，我的多选完全消失了。如何在不调整大小的情况下再次填充之前使其清空多选？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:44:54.383

当你的变量`option`在你的循环中被调用时，你的循环实际上是在`select`元素上循环（只有一个被 id 发现），然后将自己从 DOM 中删除。

你真正想要的是 var options = `$('#subjectslist option')`or or or or `select.find('option').each(function(index, option)`or `select.children().remove();`or some 优选版本。

# java - 从 Internet 加载数组

> ID：13791400
> 
> 赞同：0
> 
> 时间：2012-12-09T20:19:35.163
> 
> 标签：java, android, json

我希望加载位于网站上的数据`http://www.example.com/file.extension`。该文件很可能是 .txt，但如果我可以将数据保存为数组，也许是 .csv，并将数据加载为数组，因为这将在应用程序端使用。JSON 突然出现在我的脑海中，但我不知道如何使用该网站端。您将如何从 Internet 加载此文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:33:20.957

最简单的方法可能是 URLConnection。有一个很好的[Oracle 示例](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html)，说明如何将远程 URL 的响应加载到字符串中。然后你可以用任何看起来最简单的方式解析字符串。

URLConnection 属于 java.net 包，它在 Android 中似乎与标准 Java API 中的相同，因此使用 Oracle 文档非常安全。但是，为了保证与 Android 的一致性，您可能还需要查看[Android 文档](http://developer.android.com/reference/java/net/URLConnection.html)，该文档也提供了一个很好的示例。

# java - Java - 将双值格式化为美元金额

> ID：13791409
> 
> 赞同：33
> 
> 时间：2012-12-09T20:20:22.703
> 
> 标签：java, formatting, double

我需要将双“amt”格式化为美元金额 println("$" + dollar + "." + cents) 以便小数点后有两位数。

这样做的最佳方法是什么？

```
if (payOrCharge <= 1)
{
    System.out.println("Please enter the payment amount:");
    double amt = keyboard.nextDouble();
    cOne.makePayment(amt);
    System.out.println("-------------------------------");
    System.out.println("The original balance is " + cardBalance + ".");
    System.out.println("You made a payment in the amount of " + amt + ".");
    System.out.println("The new balance is " + (cardBalance - amt) + ".");
}
else if (payOrCharge >= 2)
{
    System.out.println("Please enter the charged amount:");
    double amt = keyboard.nextDouble();
    cOne.addCharge(amt);
    System.out.println("-------------------------------");
    System.out.println("The original balance is $" + cardBalance + ".");
    System.out.println("You added a charge in the amount of " + amt + ".");
    System.out.println("The new balance is " + (cardBalance + amt) + ".");
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-09T20:23:04.437

使用[NumberFormat.getCurrencyInstance()](https://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html#getCurrencyInstance())：

```
double amt = 123.456;    

NumberFormat formatter = NumberFormat.getCurrencyInstance();
System.out.println(formatter.format(amt)); 
```

输出：

```
$123.46 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-09T20:22:57.027

您可以使用 DecimalFormat

```
DecimalFormat df = new DecimalFormat("0.00");
System.out.println(df.format(amt)); 
```

这将为您提供始终 2dp 的打印输出。

但实际上，由于浮点问题，您应该使用 BigDecimal 来赚钱

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-09T20:23:35.320

用于`DecimalFormat`以所需格式打印十进制值，例如

```
DecimalFormat dFormat = new DecimalFormat("#.00");
System.out.println("$" + dFormat.format(amt)); 
```

如果您希望以美国数字格式显示 $ 金额，请尝试：

```
DecimalFormat dFormat = new DecimalFormat("####,###,###.00");
System.out.println("$" + dFormat.format(amt)); 
```

使用`.00`，它总是打印两个小数点，无论它们是否存在。如果您只想在它们存在时打印小数，则`.##`在格式字符串中使用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-09T20:25:53.750

您可以将 printf 用于一个衬里

```
System.out.printf("The original balance is $%.2f.%n", cardBalance); 
```

这将始终打印两位小数，并根据需要四舍五入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T20:28:10.570

对货币类型使用 BigDecimal 而不是 double。在 Java Puzzlers 书中，我们看到：

```
System.out.println(2.00 - 1.10); 
```

你可以看到它不会是 0.9。

String.format() 具有格式化数字的模式。

# c# - Streamreader 没有从我的文本文件中返回正确的值，无法弄清楚如何正确读取我的文本文件 C#

> ID：13791411
> 
> 赞同：0
> 
> 时间：2012-12-09T20:21:03.407
> 
> 标签：c#, datagridview, counter, streamreader, streamwriter

我正在运行三个计数器，一个返回字符总数，一个返回“|”的数量 我的 .txt 文件中的字符（总计）。还有一个是阅读我的文本文件中有多少单独的行。我假设我的计数器是错误的，我不确定。在我的文本文件中有一些额外的 '|' 字符，但这是我需要稍后修复的错误...

```
The Message Boxes show  
"Lines = 8"   
"Entries = 8"   
"Total Chars = 0" 
```

不确定它是否有帮助，但 .txt 文件是使用 streamwriter 编译的，并且我将 datagridview 保存到字符串中以创建输出。这些功能似乎一切正常。

## 这是我正在阅读的文本文件的副本

```
Matthew|Walker|MXW320|114282353|True|True|True  
Audrey|Walker|AXW420|114282354|True|True|True    
John|Doe|JXD020|111222333|True|True|False  
|||||| 
```

## 这是代码。

```
 private void btnLoadList_Click(object sender, EventArgs e)
    {
        var loadDialog = new OpenFileDialog
            {
                InitialDirectory = Convert.ToString(Environment.SpecialFolder.MyDocuments),
                Filter = "Text (*.txt)|*.txt",
                FilterIndex = 1
            };
        if (loadDialog.ShowDialog() != DialogResult.OK) return;
        using (new StreamReader(loadDialog.FileName))
        {
            var lines = File.ReadAllLines(loadDialog.FileName);//Array of all the lines in the text file
            foreach (var assocStringer in lines)//For each assocStringer in lines (Runs 1 cycle for each line in the text file loaded)
            {
                var entries = assocStringer.Split('|'); // split the line into pieces (e.g. an array of "Matthew", "Walker", etc.)
                var obj = (Associate) _bindingSource.AddNew();
                if (obj == null) continue;
                obj.FirstName = entries[0];
                obj.LastName = entries[1];
                obj.AssocId = entries[2];
                obj.AssocRfid = entries[3];
                obj.CanDoDiverts = entries[4];
                obj.CanDoMhe = entries[5];
                obj.CanDoLoading = entries[6];
            } 
      }
   } 
```

希望你们在这里找到错误。抱歉，如果格式草率，我是自学的，不上课。欢迎任何额外的建议，尽可能诚实和严厉，不会伤害任何感情。

## 总之

为什么这个程序没有从我正在使用的文本文件中读取正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:06:44.803

不完全确定我得到了你想要做的事情，所以如果我离开了，请纠正我，但如果你只是想获得文件的行数、管道 (|) 计数和字符计数，以下应该给你。

```
var lines = File.ReadAllLines(load_dialog.FileName);
int lineCount = lines.Count();
int totalChars = 0;
int totalPipes = 0; // number of "|" chars

foreach (var s in lines)
{
    var entries = s.Split('|');  // split the line into pieces (e.g. an array of "Matthew", "Walker", etc.)
    totalChars += s.Length;   // add the number of chars on this line to the total
    totalPipes = totalPipes + entries.Count() - 1; // there is always one more entry than pipes
} 
```

*Split()*所做的就是将整行拆分为字符串中各个字段的数组。由于您似乎只关心管道的数量而不是字段，因此除了通过获取字段的数量并减去一个来确定管道的数量（因为您没有尾随管道）之外，我并没有做太多的事情在每一行）。

# haskell - 基于数据库中的值的表单验证

> ID：13791412
> 
> 赞同：0
> 
> 时间：2012-12-09T20:21:26.380
> 
> 标签：haskell, validation, yesod

我有一个表单，用户可以在其中更新其用户名。用户名应该是唯一的。我想过使用 Yesod 书中提到的标准验证：[Forms](http://www.yesodweb.com/book/forms)，但我不明白......相关的数据库定义：

```
Profile
    username Text
    user UserId
    UniqueProfile user
    UniqueUsername username 
```

如果没有验证，用户将收到一个错误页面（因为 db 级别的用户名唯一性约束）。我希望它更友好。

我该如何解决这个问题？我在想验证应该计算填充用户名的行，并且应该与登录的 UserId 不同（用户也可以更新其他项目并保留其用户名）。但是如何让该结果用于`Left`验证部分？

* * *

**解决方案**：

```
profileForm :: Maybe ProfileForm -> Form ProfileForm
profileForm mpf = renderBootstrap $ ProfileForm
        <$> areq usernameField (FieldSettings {fsLabel = "Username", fsTooltip = Nothing, fsId = Nothing, fsName = Nothing, fsAttrs = [("autofocus","autofocus")]}) (pfUsername <$> mpf)
    where
        unav x = do
            (Entity uid _) <- requireAuth
            usernamecount <- runDB $ count [ ProfileUsername ==. x 
                                          , ProfileUser !=. uid ]
            return $ if usernamecount > 0
                        then Left ("Username already taken" :: Text)
                        else Right x

        usernameField = checkM unav textField 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:30:40.873

我认为您正在寻找该[`checkM`](http://hackage.haskell.org/packages/archive/yesod-form/1.2.0.2/doc/html/Yesod-Form-Functions.html#v%3acheckM)功能，该功能将允许您在验证字段期间执行任意操作。

# html - CSS - 获得不需要的水平空间

> ID：13791415
> 
> 赞同：3
> 
> 时间：2012-12-09T20:21:38.837
> 
> 标签：html, css, google-chrome

我正在尝试设计一个简单的倒数计时器 - 但我遇到了一个我不明白的问题。

我在两个我不想要的[内联 div （带有绿色边框的）之间获得了空间。](http://jsfiddle.net/PeteGO/nnZdF/7/)查看 Chrome 的“检查元素”中的 CSS，我看不出它来自哪里——我也无法摆脱它。

![数字之间不需要的空格](../Images/282a351b4cdba9c106123cd74e1a3144.png)

我注意到绿色边框在第一个计时器间隔也发生了变化 - 任何人都知道这是为什么以及如何阻止它？如何管理这 2 个 div 之间的空间？

最终，我想要类似[codecanyon](http://codecanyon.net/theme_previews/106012-fliptimer)计时器之类的东西，但我不希望有人为此提供完整的 CSS，只是帮助我理解上述问题。

我正在使用**Google Chrome 版本 23.0.1271.95m**。

[小提琴](http://jsfiddle.net/PeteGO/nnZdF/7/)示例中的代码：

html。

```
<div id="timer1-wrapper">
    <div class="timer">
        <div class="timer-values-wrapper">
            <div class="timer-value-wrapper">
                <div class="minutes-value-1">
                    1
                </div>
                <div class="minutes-value-2">
                    4
                </div>
            </div>
            <span>minutes</span>
        </div>
        <div class="timer-values-wrapper">
            <div class="timer-value-wrapper">
                <div class="seconds-value-1">
                    5
                </div>
                <div class="seconds-value-2">
                    9
                </div>
            </div>
            <span>seconds</span>
        </div>
    </div>
</div>​ 
```

Javascript。

```
var minutes = 14;
var seconds = 59;

var secondsTimer = setInterval(function () {
    seconds--;
    if (seconds < 0) {
        if (minutes == 0) {
            clearInterval(secondsTimer);
            alert('Time is up');
            return false;
        }
        else {
            minutes -= 1;
           var minutesString = minutes < 10 ? '0' + minutes.toString() : minutes.toString();
           $('.minutes-value-1').text(minutesString.substr(0, 1));
           $('.minutes-value-2').text(minutesString.substr(1, 1));
           seconds = 59;
       }
    }
    var secondsString = seconds < 10 ? '0' + seconds.toString() : seconds.toString();
    $('.seconds-value-1').text(secondsString.substr(0, 1));
    $('.seconds-value-2').text(secondsString.substr(1, 1));
}, 1000);​ 
```

CSS。

```
.timer {
    border: 1px solid Red;
    font-family: "Trebuchet MS", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Tahoma, sans-serif;
}

.timer-values-wrapper {
    border: 1px solid Blue;
    font-size: 4em;
}

.timer-values-wrapper span {
    border: 1px solid Black;
    font-size: 0.5em;
}

.timer-value-wrapper {
    border: 1px solid Purple;
}

.timer-value-wrapper div {
    border: 1px solid Green;
    display: inline;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:26:39.630

当您有两个内联元素时，标记中的空白就是屏幕上的空白。如果您将标记更改为标记中`<div style="white-space: nowrap;" class="timer-value-wrapper"><div class="seconds-value-1">4</div><div class="seconds-value-2">3</div></div>`没有空格，那么空格就会消失。您的另一个选择是使用浮动 div 或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:28:37.817

HTML 源代码中的空白是这里唯一的问题

[**演示**](http://jsfiddle.net/nnZdF/9/)

HTML

```
<div class="timer-value-wrapper"><div class="seconds-value-1">5</div><div class="seconds-value-2">9</div></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T20:25:40.220

如果你浮动 div，这应该消除额外的空间：

[http://jsfiddle.net/nnZdF/8/](http://jsfiddle.net/nnZdF/8/)

```
.timer-value-wrapper div {
    border: 1px solid Green;
    display: inline;
    float: left;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T20:25:58.883

最简单的解决方案是将 div 放在一起：

```
<div class="seconds-value-1">
    5
</div><div class="seconds-value-2">
    9
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T20:26:55.610

空白仅在块元素之前和之后被忽略，而不是内联元素。您的 HTML 代码中有空格、换行符和制表符空格。

# mysql - Mysql IF 长度 > 然后更新示例

> ID：13791418
> 
> 赞同：1
> 
> 时间：2012-12-09T20:22:14.650
> 
> 标签：mysql, sql

我只是想说一个变量是否有长度更新一个表。这就是我所拥有的，但我不确定如何构建查询。

```
if(@CName length > 0) then 
  update mytableset IDName= @CName where mytable.ID = @CID end if; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:23:59.850

不需要逻辑——您可以在子句`IF/ELSE`中使用变量。`WHERE`使用`LENGTH()`字符串函数和布尔值`AND`。

```
UPDATE mytable SET IDName = @CName WHERE LENGTH(@CName) > 0 AND mytable.ID = @CID 
```

为了进行更新，两个条件都必须为真，但`WHERE`子句条件不一定必须应用于表列。它们可以是任何计算结果为真或假的任意表达式。

# r - 使用“for”循环将许多子集保存为数据帧

> ID：13791419
> 
> 赞同：1
> 
> 时间：2012-12-09T20:22:28.447
> 
> 标签：r

这个问题可能很简单，但我没有找到解决它的好方法：我有一个包含许多子组的数据集，需要一起单独分析。因此，我想对组使用子集并将它们用于以后的分析。同样，作为分析的子集的定义应部分使用循环来完成，以节省空间并确保对所有子组进行相同的分析。

这是我的代码示例，它使用了引导包中的示例数据框：

```
data(aids)
qlist <- c("1","2","3","4")
for (i in length(qlist)) {
    paste("aids.sub.",qlist[i],sep="") <- subset(aids, quarter==qlist[i])
} 
```

包含我数据集中子组的变量存储为字符串，因此我添加了 qlist 部分，否则不需要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T20:46:08.970

使用 lapply 列出子集：

```
lapply(qlist, function(x) subset(aids, quarter==x)) 
```

等效地，避免`subset()`：

```
lapply(qlist, function(x) aids[aids$quarter==x,]) 
```

使用列表可能会使后续代码更易于编写和理解。您可以对列表进行子集化以获得单个数据框（就像您可以使用其中一个子集一样，如下所示）。但是您也可以迭代它（使用`for`or `lapply`）而不必构造变量名。

要按照您的要求完成工作，请使用`assign`：

```
for (i in qlist) {
   assign(paste("aids.sub.",i,sep=""), subset(aids, quarter==i))
} 
```

请注意该`length()`函数的删除，并且 this 直接在`qlist`.

# mapreduce - 用 mapreduce 模拟 LEFT JOIN？

> ID：13791421
> 
> 赞同：0
> 
> 时间：2012-12-09T20:22:59.210
> 
> 标签：mapreduce, left-join

使用 mapreduce 模拟 INNER JOIN 是相对简单的，在完成工作的 reducer 中映射公共键和连接值。但是当涉及到 LEFT OUTER JOIN 时，当左表中的键不存在于右表中时，就会面临组合填充右表的空缺的问题。映射到reducer时将丢弃不匹配的键，然后如何从左表中添加这些不匹配的键？

例如，假设我们有两个文件：

```
Left = {'matches': 1}
Right = {'matches': 2,
         'matches_not': 3} 
```

有人会想要这样的输出：

```
Output: {'matches-matches': [1, 2],
         'matches-matches_not': [1, None]} 
```

从映射器发出公用键“匹配”没有问题，因为左和右的出现都会使用公用键到达减速器，但是如果它从未到达减速器，如何获得“matches_not”的组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:01:24.103

即使匹配的记录不存在，reducer 也会映射所有记录。您只需为每个键/值对添加一个指示符，显示它来自哪一侧。该指标将帮助您的 reduce() 方法确定您为每个键处理的确切情况。

有关如何设置的更多详细信息，请参阅[我](https://stackoverflow.com/questions/13767045/join-with-hadoop-in-java)对有关加入的不同问题的回答。

# android - 如何使用 API 级别 8 查找是否有活动下载？

> ID：13791423
> 
> 赞同：0
> 
> 时间：2012-12-09T20:23:09.147
> 
> 标签：android

有没有办法以编程方式在 API 级别 8 上查找是否有活动下载？如果没有活动下载，我需要为 android 做一个关闭 wifi 的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:35:57.770

> 有没有办法以编程方式在 API 级别 8 上查找是否有活动下载？

不，对不起。您可以做的最接近的事情是监控`TrafficStats`并查看是否有任何 Internet 流量。这些是否代表“下载”取决于使用互联网的应用程序。

# java - 如果它是最终的，那么为什么要放置静态？

> ID：13791425
> 
> 赞同：2
> 
> 时间：2012-12-09T20:23:42.860
> 
> 标签：java, android

有时我会看到类似的东西：

```
public class MainActivity extends Activity
{
    public static final String url_google = "http://www.google.com";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }    
} 
```

我实际上没有得到的是为什么使用`public static final`, 而不是 `public final`or`final`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-09T20:24:32.830

我说的很笼统，但如果它是最终的，那么无论如何你只需要它的一个实例，因此它通过使其成为静态来节省内存。

更具体地说，`final`关键字意味着不能更改任何变量存储。这意味着一旦变量有了值，您就可以使用该变量，但不能以任何方式修改它。通常，要为最终变量赋值，您可以直接从声明中进行，例如`final int variable = 12`. 如您所见，我在示例中使用了 int，但是您可以使用任何东西，包括引用变量。引用变量虽然很特殊，因为您无法更改变量指向的内容，但您可以更改 Object 本身（例如使用 get/set 方法）。

这归结为，一旦你创建了一个最终变量，它就会占用内存空间。既然我们不能进一步修改这个变量，为什么我们每次实例化我们的类时都要重新创建它？所以我们使用`static`关键字。这允许变量被创建一次，并且只在内存中创建一次。

但是，在某些特定情况下，您不想使用`static`并且只使用 final。一个示例可能是时间敏感变量，例如存储对象实例化的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T20:25:27.980

`static`意味着只会`url_google`创建一个。如果它是一个实例字段（不是静态的），那么`url_google`每个活动实例都会创建一个新的，而您实际需要的只是一个`url_google`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T20:26:25.057

Java`final`关键字非常松散地用于表示“不能改变”的东西。

它与表明它是“类变量”的关键字无关，`static`这意味着所有实例共享该变量的相同副本。类变量可以直接用类访问，而不需要创建实例。

它们有不同的含义，可以一起使用，也可以单独使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T05:56:34.450

我认为 A--C 的回答具有误导性：“我说得非常笼统，但如果它是最终的，那么无论如何你只需要它的一个实例，因此它通过使其成为静态来节省内存。” 正如其他人指出的那样，他将静态和最终混合在一起，这是两个非常不同的东西。恕我直言，这不是广义的，但不够精确，尤其是在解释基本概念时。

静态变量与类相关联，而不是与任何对象相关联。类的每个实例共享一个类变量，该变量位于内存中的一个固定位置。任何对象都可以更改类变量的值，但也可以在不创建类实例的情况下操作类变量。

另一边的最终变量是只能初始化一次的变量。它们的值不必在编译时知道，但可以在运行时设置。如果最终变量是实例变量，则该变量可以有许多实例，所有实例都具有不同的值。

静态最终变量是一个常量，因为只有一个，并且一旦初始化就不能在运行时更改。在 Java 中，至少在编译时不必知道该值。

现在这都是非常理论的，所以让我们举一个例子来展示这些类型的变量的用途：

```
public class Circle implements Serializable {
    private static final long serialVersionUID = -1990742486979833728L;
    private static int sNrOfCircles;
    private final double mArea;

    public Circle(double radius) {
        sNrOfCircles++;
        mArea = radius*radius*Math.PI;
    }
} 
```

serialVersionUID 将版本号与反序列化期间使用的 Circle 类相关联，以验证发送方和接收方是否已为该对象加载了与序列化兼容的类。serialVersionUID 永远不会改变，并且对于 Circle 的所有实例都是相同的。

sNrOfCircles 计算 Circle 实例的数量。它随着 Circle 的每个新实例而变化（而 serialVersionUID 从来没有）。

mArea 定义圆的面积。它也会随着 Circle 的每个实例而变化，但与 sNrOfCircles 相比，它与 Circle 对象相关联，而不是与 Circle 类相关联，而且它也不能被更改，而 sNrOfCircles 将在创建另一个 Circle 对象时发生变化。

简而言之：如果是 Class 属性（我们有多少个 Circles？），则使用 static，如果值在初始化后不会改变（具有给定半径的圆的区域），则使用 final，如果是，则使用 static final两个都。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T20:26:00.377

主要原因是您无需类的实际实例即可访问该值。

在您的示例中，任何代码都可以访问 url_google 值，而无需 MainActivity 的实例。

# c++ - 计算一个字符出现在数组中的次数？

> ID：13791426
> 
> 赞同：-1
> 
> 时间：2012-12-09T20:23:42.740
> 
> 标签：c++, visual-c++

我一直在思考很长一段时间，并没有得到程序的任何地方。我不知道从哪里开始。分配需要使用单个函数 main 并且仅使用 iostream 库。任务是声明一个包含 10 个元素的 char 数组。接受用户的输入。确定数组是否包含超过 1 次的任何值。不显示仅出现 1 次的字符。

```
Sample output:
a 2
b 4
.. 
```

a 和 b 是字符。2 和 4 表示它们在数组 B 中出现的次数。

我尝试使用嵌套循环将一个字符与数组中的所有字符进行比较，并在每次出现类似字符 id 声音但出现意外结果时递增一个计数器。

这是代码

```
#include <iostream>
using namespace std;
void main()
{

    char ara[10];
    int counter=0;
    cout<<"Enter 10 characters in an array\n";
    for ( int a=0; a<10; a++)
        cin>>ara[a];

    for(int i=0;  i<10;  i++)
    {
       for(int j=i+1; j<10;  j++)
     {
         if(ara[i] == ara[j])
               {
                  counter++;
                  cout<<ara[i]<<"\t"<<counter<<endl;
               }
     }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:58:33.460

算法 2：std::map
声明/定义容器：

```
std::map<char, unsigned int> frequency; 
```

1.  打开文件
2.  读一封信。
3.  找到这封信： `frequency.find(letter)`
4.  如果字母存在，增加频率：频率[字母]++；
5.  如果不存在字母，则插入频率：频率[字母] = 1；
6.  处理完所有字母后，*遍历*`map`显示字母及其频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:09:02.167

在这里，我会告诉你应该做什么，你自己编写代码：

> 包含头文件（stdio libs）
> 
> 定义 main （您的应用程序的入口点）
> 
> 声明输入数组 A[amount_of_chars_in_your_input]
> 
> 写输出请求用户输入
> 
> 收集输入
> 
> 现在主要部分：
> 
> 声明另一个无符号短裤数组 B[]
> 
> 声明计数器 int i = 0
> 
> 声明计数器 int j = 0
> 
> 遍历数组 A[] （换句话说 i < sizeof ( A ); 或 a[i] != '\0' ）
> 
> 现在循环尽可能多的数组 A 中有不同的字母
> 
> 在 B[] 中存储字母的数量
> 
> 打印出来

现在有一些技巧可以应用它，但你可以处理它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:55:27.320

这是解决此问题的一种可能方法。我没有给你完整的代码；仅仅为其他人的作业提供完整的实现被认为是不好的。

首先，用唯一字符填充一个新数组。例如，如果输入是：

```
abacdadeff 
```

新数组应该只有：

```
abcdef 
```

也就是说，每个字符都应该只出现一次。不要忘记 -`\0`终止它，以便您知道它的结束位置（因为它的长度可以小于 10）。

然后创建一个新的数组`int`（或者`unsigned`，因为你不能有负出现）值，它保存原始输入数组中唯一数组中每个字符的出现频率。每个值最初都应为 1。您可以通过如下声明来实现：

```
unsigned freq[10] = { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }; 
```

现在，遍历唯一数组，每次在原始输入数组中找到当前字符时，增加频率数组的相应元素。所以最后，对于上述输入，您将拥有：

```
a b c d e f (unique array)
3 1 1 2 1 2 (frequencies array) 
```

你完成了。您现在可以知道每个字符在输入中出现的次数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T21:52:21.090

尝试这个：

```
unsigned int frequency[26] = {0};
char         letters[10]; 
```

## 算法：

1.  打开文件/阅读一封信。
2.  在数组中搜索`letters`新字母。
3.  如果新字母存在：增加该字母的频率槽： `frequency[toupper(new_letter) - 'A']++;`
4.  如果缺少新字母，则添加到数组并将频率设置为 1。
5.  处理完所有字母后，打印出频率数组：`cout << 'A' + index << ": " << frequency[index] << endl;

# c# - 进入第三方源代码

> ID：13791430
> 
> 赞同：3
> 
> 时间：2012-12-09T20:23:58.633
> 
> 标签：c#, vb.net, visual-studio, debugging

我有我在我的 vb.net 项目中使用的第三方控件的 C# 源代码。我在实际项目中将第三方源代码设置为项目参考。我试图通过我的项目进入第三方源代码，但它不起作用 - 调试器继续在我的项目代码中继续运行，并且没有进入第三方方法。我在调试选项中取消选中“只是我的代码”，并且不确定我还需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:33:31.133

您可以使用[Reflector Pro](http://www.reflector.net/)（试用版）调试第三方程序集。它允许在 Visual Studio 中进行动态反编译，并在反编译的源代码上设置断点。

# jquery - jQuery CSS 转换器不起作用

> ID：13791433
> 
> 赞同：0
> 
> 时间：2012-12-09T20:24:04.267
> 
> 标签：jquery, html, css

因此，我早些时候发布了一个关于此的问题，在得到有用的回复后，我开始尝试尝试该代码。我以前没有使用过 JQuery，所以这对我来说是一个超越的一步。

我正在做的是使用下面的代码来更改网站的 CSS，几乎就像一个模板，但是，当按下按钮时，没有任何变化。我已经包含了链接到 Google 的 JQuery 脚本。代码本身很容易解释，当您按下按钮时，它应该加载不同的样式表。我不确定这是否是永久性更改，但只是测试一下。任何帮助表示赞赏！

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js?ver=1.4.2'></script>

<script type="text/javascript">

$("button#grayscale").click(function() { 
    $("link[rel=stylesheet2]").attr({href : "css2.css"}); });

$("button#original").click(function() { 
    $("link[rel=stylesheet]").attr({href : "css.css"}); });
}); 
```

```
<button id="original">Original</button><br />
                <button id="grayscale">Grayscale</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:31:51.237

我认为您应该遵循@undefined 的建议并将类前缀应用于您的所有规则。然后，您可以将该类应用于高处的元素，这意味着如果您更改类，一切都将遵循：

CSS：

```
body.grayscale div{
    color: gray;
}

body.normal div{
    color: green;
} 
```

JS：

```
$("button#original").click(function() { 
    $("body").removeClass("grayscale"); 
    $("body").addClass("normal"); 
});

$("button#grayscale").click(function() { 
    $("body").removeClass("normal"); 
    $("body").addClass("grayscale"); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:41:34.197

像这样的东西会切换样式表，但不会是永久性的改变：

HTML：

```
<div id="theme-switcher">
    <button data-theme="css2.css">Greyscale</button>
    <button data-theme="css.css">Original</button>
</div> 
```

jQuery：

```
$('#theme-switcher').on('click', 'button', function() {
    $('link[rel=stylesheet]').attr('href', $(this).data('theme'));
}); 
```

要使其永久化，您可以通过 AJAX 请求将值发送到服务器端脚本页面，该页面将值保存在数据库中。`<link />`然后可以从数据库服务器端提取该值，并在呈现标签时将其插入 HTML 。

使用示例 AJAX 更新了 jQuery：

```
$('#theme-switcher').on('click', 'button', function() {
    var theme = $(this).data('theme');

    // if it was a PHP based project
    $.post('save-theme.php', { theme: theme }).done(function() {
        $('link[rel=stylesheet]').attr('href', theme);
    });
}); 
```

save-theme.php 中发生的事情是服务器端的东西，所以很遗憾不是我的专业领域，对不起！

# oracle - 如何在 Oracle SQL 开发人员中创建用户

> ID：13791434
> 
> 赞同：16
> 
> 时间：2012-12-09T20:24:06.007
> 
> 标签：oracle

我是 oracle sql developer 3.1.07.42 的新手，刚刚在我的机器上安装了它。我想建立一个新的连接，但它需要一个我不知道的用户和密码。很多天以来，我一直在谷歌上搜索它，并且了解到有一些命令可以创建用户，但我不知道应该在哪里运行这些命令，因为在创建连接之前我无法运行查询/命令。谁能让我知道我该怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-17T10:37:24.607

创建新用户的步骤：

1）打开Sql Developer，建立新连接。

2）使用系统用户名和密码登录（在安装过程中）。

3）一旦你连接，展开系统用户（在连接下，在左窗格中）并向下滚动到其他用户。然后右键单击用户并添加新用户。

4）提供其用户名和密码并选择适当的系统权限。

5）你现在完成了，通过建立新的连接来检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-02T03:54:00.510

使用以下简单命令创建用户

```
-- Create a user
CREATE USER youruser IDENTIFIED BY yourpassword;
--Grant permissions
GRANT CONNECT, RESOURCE, DBA TO demo; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:39:56.403

我认为您应该使用“数据库配置助手”来创建新数据库，并且您可以设置用户名和密码并在 oracle SQL Developer 中使用它！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T00:33:05.197

您应该在本地 PC/笔记本电脑中安装数据库软件，然后在数据库中创建用户，然后您可以通过 sql developer 通过键入已创建的用户名和密码连接数据库。如果您想像上一步一样连接到其他数据库相同的步骤但在此之前，您需要指向远程数据库。

# google-chrome - 向上滚动时出现在 iFrame 中的行

> ID：13791435
> 
> 赞同：2
> 
> 时间：2012-12-09T20:24:18.607
> 
> 标签：google-chrome, iframe

因此，我有一个带有链接的 CSS 下拉菜单，当您单击链接时，页面会加载到位于 css 菜单下方的 iframe 中。我有两个问题。

1）在谷歌浏览器中，向上滚动时iFrame中会出现一些灰线，当您实际向上拖动滚动条时，灰线更多且更紧凑。

2) 一些链接指向 PDF 文件，当它们加载到 iFrame 中时，它们会显示在 CSS 菜单的顶部。

有任何想法吗？我发现了几篇关于细线有类似问题的文章，但我见过的解决方案似乎都没有奏效。

```
 <!DOCTYPE html>

<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>AHCS - eLearning Portal - Caregiver Welcome</title>
  <link rel="stylesheet" type="text/css" href="portal.css" />

</head>

<body>
  <div id="cgframeinner">
    <div id="reflibcontainer">
    <div id="reflibhead">
        <h2>Reference Library</h2>
    </div>
  <div id="reflibnav">
    <span style="display:block;"><ul id="css3menu1" class="topmenu">
        <li class="toproot"><a href="#" style="height:16px;line-height:16px;"><span>COPD</span></a>
        <ul>
            <li><a href="http://copdfoundation.org/COPDYou/COPDTrainingVideos.aspx" target="frame2">COPD Training Videos</a></li>
            <li><a href="http://copdfoundation.org/" target="frame2">COPD Foundation</a></li>
            <li><a href="http://copdfoundation.org/portals/0/files/pdfs/4-fact-sheet-LMBB.pdf" target="frame2">COPD Fact Sheet</a></li>
            <li><a href="http://copdfoundation.org/portals/0/files/pdfs/BreathingBetterwithCOPD.pdf" target="frame2">Breathing Better With COPD</a></li>
            <li><a href="http://copdfoundation.org/COPDYou/Glossary.aspx" target="frame2">COPD Glossary of Terms</a></li>
            <li><a href="http://copdfoundation.org/Portals/0/Files/pdfs/What%20is%20COPD1.pdf" target="frame2">What is COPD?</a></li>

        </ul></li>
        <li class="toproot"><a href="#" style="height:16px;line-height:16px;"><span>CHF</span></a>
        <ul>
            <li><a href="http://www.heart.org/HEARTORG/Conditions/CongenitalHeartDefects/TheImpactofCongenitalHeartDefects/Congestive-Heart-Failure_UCM_307111_Article.jsp" target="frame2">American Heart Association</a></li>
            <li><a href="http://www.webmd.com/heart-disease/guide-heart-failure" target="frame2">WebMD CHF Guide</a></li>
        </ul></li>
        <li class="topmenu"><a href="#" style="height:16px;line-height:16px;">Pneumonia</a></li>
        <li class="topmenu"><a href="#" style="height:16px;line-height:16px;">Fall Risk</a></li>
        </ul></span>
    </div>
    <iframe src="" width="500px" height="350px" name="frame2"></iframe>
</div>
</div>

</body>
</html> 
```

# android - 非常长的字符串 Eclipse Android

> ID：13791443
> 
> 赞同：6
> 
> 时间：2012-12-09T20:25:10.040
> 
> 标签：android, eclipse, string

几天前我开始了 Android 编程，并使用 JSON 请求制作了一个简单的应用程序。我在将字符串的内容打印到输出控制台时遇到了一些问题。事实上，JSON 响应非常大（.length() return 93k），当我使用 System.out.println 打印它时，只有 4013 个打印字符。如何检索整个字符串？（或将其写入日志文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:31:27.750

您可以使用递归，例如

```
private void longMsg(String msg) {
    if (msg.length() > 4000) {
        System.out.println(msg); // or whatever you want
        longMsg(msg.substring(4000));
    } else {
        System.out.println(msg); // or whatever you want
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:34:15.027

在设备屏幕上输出它会更好吗？作为*TextView*元素。

[或者使用这样](https://stackoverflow.com/questions/4228699/write-and-read-strings-to-from-internal-file)的解决方案将其写入文件。

不要忘记在 AndroidManifest.xml 中添加权限

```
<uses-permission 
        android:name="android.permission.WRITE_EXTERNAL_STORAGE"
        /> 
```

***对于未来，解析org.json***包中的 JSON 使用类，它们非常简单和有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:30:30.610

Eclipse 中可能设置了控制台缓冲区大小。

`Goto Window -> Preferences -> Run/Debug -> Console -> Uncheck Limit Console output`

# android - 预计何时 GC_CONCURRENT？

> ID：13791444
> 
> 赞同：0
> 
> 时间：2012-12-09T20:25:17.340
> 
> 标签：android, android-memory

目前正在编写我的第一个 Android 应用程序，但对其他编程语言的多线程有合理的理解。我注意到的一点是，`GC_CONCURRENT`几乎每次我完成`AsyncTask`（偶尔随机）时，日志都会吐出消息。这不会经常发生，因为我`AsyncTask`的 s 相对较少，但这足以引起我的注意 - 可能每两个片段/活动开始就有一个。

这是可以接受的，还是正确的？这里有内存问题吗？我已经尝试过搜索，大多数问题都是以无限循环或列表的形式出现的明显内存泄漏——我没有收到大量的`GC_CONCURRENT`消息转储，只是每隔几秒缩放一次应用程序。也许是 AsyncTask 结果的垃圾收集？大多数是来自 HTTP 的 JSON 编码字符串，仅用于`ArrayList<MyClass>`在被丢弃之前读取。

在此先感谢 - 为一个可能微不足道的问题道歉，但我想避免由于无知而早早养成任何不良习惯/做法。

# vb.net - VB 2010中的表格与数据库无关

> ID：13791449
> 
> 赞同：0
> 
> 时间：2012-12-09T20:25:47.723
> 
> 标签：vb.net

我想知道是否可以在 VB 2010 中创建一个与数据库无关的表。该表将能够在其单元格中显示文本并更改其行号。如果有一个允许这样做的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:23:54.010

该对象同名`DataTable`，您可以手动创建它：

```
Dim dt as New DataTable
'...
dt.Columns.Add(...)
'...
dt.Rows.Add(...) 
```

# r - R：有没有办法获得围绕预测值的置信度/预测区间

> ID：13791457
> 
> 赞同：0
> 
> 时间：2012-12-09T20:26:25.417
> 
> 标签：r, confidence-interval

> **可能重复：**
> [获取R中回归线上一点的置信区间？](https://stackoverflow.com/questions/12732424/get-confidence-interval-for-one-point-on-regression-line-in-r)

我在 R 中创建了一个线性模型，使用数据框，在给定回归变量的更新输入的情况下预测变量的下一个结果。（我不得不使用 calc 手动计算预测值，因为我不明白如何将值插入线性模型变量。）

我的问题是如何找出我刚刚找到的预测值在 95% 水平的置信区间？有没有办法在 R 中做到这一点，还是我必须使用统计公式手动计算这个预测值的 CI？

当我运行 predict(LM,data=x,interval="confidence") 时，我只得到集合中每条数据的间隔。

（知道了这一点，我尝试手动将预测的依赖项和更新的回归量添加到我的数据框中，但失败了，因为我找不到合适的代码将数据添加到数据框中的特定列）

使困惑。

# c++ - 如何在不复制的情况下进行稳定排序？

> ID：13791458
> 
> 赞同：4
> 
> 时间：2012-12-09T20:26:31.893
> 
> 标签：c++, copy-constructor, c++03, stable-sort

为什么`stable_sort`需要复制构造函数？（`swap`应该足够了，对吧？）
或者更确切地说，我如何在`stable_sort`不复制任何元素的情况下设置范围？

```
#include <algorithm>

class Person
{
    Person(Person const &);  // Disable copying
public:
    Person() : age(0) { }
    int age;
    void swap(Person &other) { using std::swap; swap(this->age, other.age); }
    friend void swap(Person &a, Person &b) { a.swap(b); }
    bool operator <(Person const &other) const { return this->age < other.age; }
};

int main()
{
    static size_t const n = 10;
    Person people[n];
    std::stable_sort(people, people + n);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:56:30.687

我不拥有该标准的副本。值得一提的是，这是免费提供的 2010 年草案中的措辞：

25.4.1.2 稳定排序

[...]

要求：*first 的类型应满足 Swappable 要求（表 37）、MoveConstructible 要求（表 33）和 MoveAssignable 要求（表 35）。

使用最新的 Visual C++ 进行测试，当定义了移动构造函数但复制构造函数是私有的时，它确实允许排序。

所以回答你的问题：你不走运。使用 std::stable_sort 以外的东西或使用包装类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:57:05.533

扩展 OP 中的讨论，因为我发现它很有趣，所以这里有一个解决方案，它只使用交换对原始向量进行排序（通过使用指针包装器对索引进行排序）。

编辑：这是解决方案 v2，它就地交换。

编辑（由 OP）：不需要 C++11 的 STL 友好版本。

```
template<class Pred>
struct swapping_stable_sort_pred
{
    Pred pred;
    swapping_stable_sort_pred(Pred const &pred) : pred(pred) { }

    template<class It>
    bool operator()(
        std::pair<It, typename std::iterator_traits<It>::difference_type> const &a,
        std::pair<It, typename std::iterator_traits<It>::difference_type> const &b) const
    {
        bool less = this->pred(*a.first, *b.first);
        if (!less)
        {
            bool const greater = this->pred(*b.first, *a.first);
            if (!greater) { less = a.second < b.second; }
        }
        return less;
    }
};

template<class It, class Pred>
void swapping_stable_sort(It const begin, It const end, Pred const pred)
{
    typedef std::pair<It, typename std::iterator_traits<It>::difference_type> Pair;
    std::vector<Pair> vp;
    vp.reserve(static_cast<size_t>(std::distance(begin, end)));
    for (It it = begin; it != end; ++it)
    { vp.push_back(std::make_pair(it, std::distance(begin, it))); }
    std::sort(vp.begin(), vp.end(), swapping_stable_sort_pred<Pred>(pred));
    std::vector<Pair *> vip(vp.size());
    for (size_t i = 0; i < vp.size(); i++)
    { vip[static_cast<size_t>(vp[i].second)] = &vp[i]; }

    for (size_t i = 0; i + 1 < vp.size(); i++)
    {
        typename std::iterator_traits<It>::difference_type &j = vp[i].second;
        using std::swap;
        swap(*(begin + static_cast<ptrdiff_t>(i)), *(begin + j));
        swap(j, vip[i]->second);
        swap(vip[j], vip[vip[j]->second]);
    }
}

template<class It>
void swapping_stable_sort(It const begin, It const end)
{ return swapping_stable_sort(begin, end, std::less<typename std::iterator_traits<It>::value_type>()); } 
```

# c# - Lucene.Net 阿拉伯语

> ID：13791460
> 
> 赞同：2
> 
> 时间：2012-12-09T20:26:43.310
> 
> 标签：c#, lucene, lucene.net, arabic

简而言之，是否有任何支持 Lucene.Net 的阿拉伯语分析器。因为我想索引大量的阿拉伯语 txt 文件。我可以使用标准分析器或空白分析器来解析阿拉伯文件吗？

```
analyzer = new WhitespaceAnalyzer(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:07:09.410

Lucenete.Net.Contrib 包含一个阿拉伯语分析器，位于`Lucene.Net.Analysis.Analyzer.ArabicAnalyzer`.

使用 NuGet 安装它：

[https://nuget.org/packages/Lucene.Net.Contrib/3.0.3](https://nuget.org/packages/Lucene.Net.Contrib/3.0.3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-27T10:02:58.873

Lucenete.Net.Contrib 包含一个阿拉伯语分析器，但正确的命名空间是：

**Lucene.Net.Analysis.AR.ArabicAnalyzer**

见附件截图：

[![在此处输入图像描述](../Images/be6ba8b884cf91856de7e298b5ff173b.png)](https://i.stack.imgur.com/HLQi7.png)

# ios - 如何在 iOS6 中将区域居中

> ID：13791465
> 
> 赞同：1
> 
> 时间：2012-12-09T20:27:02.680
> 
> 标签：ios, objective-c, mapkit

我在将地图居中到特定区域时遇到问题。我不知道问题出在哪里

地图.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface Map : UIViewController {
    MKMapView * mapView;
}

@property(nonatomic,retain) IBOutlet MKMapView * mapView;

- (IBAction)setMap:(id)sender;

- (IBAction)getLocation:(id)sender;

@end 
```

地图.m

```
#import "Map.h"
#import "Annotation.h"

@interface Map ()

@end

//define coordinates

#define Sofia_LATITUDE 42.745826;
#define Sofia_LONGITUDE 23.270186;

#define Plovdiv_LATITUDE 42.1333;
#define Plovdiv_LONGITUDE 24.75;

#define Varna_LATITUDE 43.2;
#define Varna_LONGITUDE 27.9167;

#define THE_SPAN 3.8;

@implementation Map

@synthesize mapView;

- (IBAction)getLocation:(id)sender {
    mapView.showsUserLocation = YES;
    [self.view addSubview:mapView];

}

- (IBAction)setMap:(id)sender {
    switch (((UISegmentedControl *)sender).selectedSegmentIndex) {
        case 0:
            mapView.mapType = MKMapTypeStandard;
            break;
        case 1:
            mapView.mapType = MKMapTypeSatellite;
            break;
        case 2:
            mapView.mapType = MKMapTypeHybrid;
            break;
        default:
            break;

    }
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];

    MKCoordinateRegion myRegion;

    //Center the map

    CLLocationCoordinate2D center;
    center.latitude = 42.1333;
    center.longitude = 24.75;

    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = center;
    myRegion.span = span;

    [mapView setRegion:myRegion animated:TRUE];

    NSMutableArray * locations = [[NSMutableArray alloc]init];
    CLLocationCoordinate2D  location;
    Annotation * myAnn;

    //make annotations

    myAnn = [[Annotation alloc]init];
    location.latitude = Sofia_LATITUDE;
    location.longitude = Sofia_LONGITUDE;
    myAnn.coordinate = location;
    myAnn.title = @"Милото";
    myAnn.subtitle = @"Моята любов е ТУК!!!";
    [locations addObject:myAnn];

    myAnn = [[Annotation alloc]init];
    location.latitude = Plovdiv_LATITUDE;
    location.longitude = Plovdiv_LONGITUDE;
    myAnn.coordinate = location;
    myAnn.title = @"Plovdiv";
    myAnn.subtitle = @"Plovdiv";
    [locations addObject:myAnn];

    myAnn = [[Annotation alloc]init];
    location.latitude = Varna_LATITUDE;
    location.longitude = Varna_LONGITUDE;
    myAnn.coordinate = location;
    myAnn.title = @"Varna";
    myAnn.subtitle = @"Varna";
    [locations addObject:myAnn];

    [self.mapView addAnnotations:locations];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

注释.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface Annotation : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString * title;
@property (nonatomic, copy) NSString * subtitle;

@end 
```

注释.m

```
#import "Annotation.h"

@implementation Annotation

@synthesize coordinate, title, subtitle;

@end 
```

因此，当我启动程序并单击按钮查看地图时，它会出现但未居中。当我向后移动并再次单击以查看地图时，一切正常。问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:58:40.050

您需要为地图视图设置区域。该区域有一个坐标（中间）和一个跨度（跨度的数字代表地图上显示的世界的度数），使用跨度数字来获得您想要的结果。您可以在设置坐标时设置区域。

```
MKCoordinateRegion region;
MKCoordinateSpan span;
span.latitudeDelta = 0.2;
span.longitudeDelta = 0.2;
region.span = span;
region.center = self.coordinate;
[mapView setRegion:region animated:YES]; 
```

# java - 在 c++ 或 java 中以响应模式使用 cmd

> ID：13791470
> 
> 赞同：10
> 
> 时间：2012-12-09T20:27:46.540
> 
> 标签：java, c++, openssl, cmd, exec

我在我的 c++ 应用程序中使用 OpenSSL，问题是如果我使用`exec("Open ssl command")` Then 它会执行那个特定的命令，但实际上这个命令是响应式的，我的意思是它进一步问你`"Are you sure you want to do this Y/N?"` 我不知道如何满足这种情况。我该怎么做使用 java 或 C++ 运行响应式命令行，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T22:14:58.853

在Java中很容易。只是：

1.  获取[进程](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)句柄。
2.  读取[Process 的输入流](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getInputStream%28%29)以获取写入标准输出的提示。
3.  通过写入[Process 的输出流](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)来响应提示。

这是一个快速的 Groovy 示例，因为它比 Java 更容易：

```
def cmd = ... // the command you want to run
def process = cmd.execute()
def processStdout = new Scanner(process.inputStream)
def processStdin = process.outputStream
def outputLine = processStdout.nextLine()
if (outputLine == 'some prompt written to stdout') {
    processStdin << 'your response\n'
} 
```

如果你跟不上 Groovy，我可以把它扩展成 Java。

请注意，此示例不处理确保嵌套进程的 stdout 和 stderr 被完全消耗以防止阻塞的潜在重要任务，也不处理确保进程干净退出的处理。

**更新：**这是 Java 中的相同内容：

```
import java.io.OutputStream;
import java.util.Scanner;

public class SubprocessIO {
    public static void main(String[] args) throws Exception {
        String[] cmd = { ... your command as a series of strings ... };
        Process process = Runtime.getRuntime().exec(cmd);
        Scanner processStdout = new Scanner(process.getInputStream());
        OutputStream processStdin = process.getOutputStream();
        String outputLine = processStdout.nextLine();
        if (outputLine.equals("some prompt written to stdout")) {
            processStdin.write("your response\n".getBytes());
            processStdin.flush();
        }
    }
} 
```

我忘记在第一次循环中记`\n`下响应中的 至关重要，假设应用程序希望您输入一些内容然后按 Enter。此外，您最好使用[`line.separator`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29)系统属性

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-15T21:26:00.530

基本上，您只需要确保在命令行上输入所有必需的信息，并使用`-batch`以避免进一步的问题，例如：

```
openssl ca -days 3650 -out client.crt -in client.csr -config \path\to\configs -batch -passin pass:PASSWORD -key password 
```

如果这不适用于任何特定的 openssl 命令，请在您的问题中指定您需要执行哪个命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T23:18:01.183

对于 openssl，Wimmel 的答案是正确的方法。根据您的具体用例，您可能需要准备或构建一个包含重复参数的配置文件，并在命令行上指定不同的参数（以及指向配置文件的指针）。-batch 选项，至少可用于管理证书的常用 openssl 命令将确保不发生交互 - 如果您指定的参数不足，命令将失败。

要运行命令并评估其结果，您仍然需要相应的功能。在 Java 中，您使用 ProcessBuilder 和 Process 类。在 C++ 中没有标准的方法来做到这一点（system() 函数对于大多数用途来说太有限了），因此您需要使用特定于平台的 C 函数（例如 CreateProcess、posix_spawn 或 fork/exec）或找到合适的 C++ 库.

但是对于以编程方式直接回答交互式问题，这些界面可能是不够的。交互式对话可能相当复杂。通常，这并不像将所有输入和输出都视为简单的字符流那么简单。细节取决于平台和程序，但您可能需要类似 expect 的东西（参见[http://en.wikipedia.org/wiki/Expect](http://en.wikipedia.org/wiki/Expect)）来处理这个问题。

更新：当然，为所有这些调用外部 CLI 的方法不一定是最好的，并且引入了一组全新的无关副作用。您最好使用合适的加密 API（例如 BouncyCastle [http://www.bouncycastle.org/](http://www.bouncycastle.org/)）

# winjs - 显示不允许在 WinJS 中嵌入 iframe 的外部网页

> ID：13791472
> 
> 赞同：1
> 
> 时间：2012-12-09T20:27:54.290
> 
> 标签：winjs

我目前的理解是，在 WinJS 应用程序中显示外部网页的唯一方法是使用 iframe。这似乎是一个限制，因为我无法嵌入 youtube 链接或 twitter 搜索链接。

例如。[http://www.youtube.com/watch?v=diP-o_JxysA](http://www.youtube.com/watch?v=diP-o_JxysA)

我该如何去显示这些网页？除了运行您自己的代理解决方案之外，是否有任何解决此限制的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:30:51.917

您不能不运行自己的代理并修改标头，或者直接在主机服务器上修改标头。

请注意，对于其他类型的资源，例如不喜欢 iframe 的登录页面（例如 Salesforce.com），您可以使用[WebAuthenticationBroker](http://msdn.microsoft.com/en-us/library/windows/apps/hh750287.aspx)。

# php - post方法ajax

> ID：13791473
> 
> 赞同：0
> 
> 时间：2012-12-09T20:27:59.853
> 
> 标签：php, javascript, jquery

我做了这个代码。第一个中有两个文件（index.html 和 jeu.php），当我提交表单时，我将被重定向到另一个页面（jeu.php）所以问题出在点击事件中

```
<html>
<head>
<title>Jeu de dammes</title>
</head>
<style>
form { margin-left:500px;margin-top:300px;  width:300px }
  </style>
<body>
<form id="formulaire" style="margin-left:100px, padding: 15px" method="post" >
<table>
<tr><td><h4> The first player</h4></td>
    <td><input   type="text"   id="premier" name="premier"></td>
</tr>
<tr><td><h4> The second player</h4></td>
    <td><input   type="text"   id="deuxieme" name="deuxieme"></td>
</tr>
<tr>
<td></td>
<td>
<button   id="action">Play</button></td>
</tr>
</table>
</form>
<script   src="jquery-1.5.1.js"></script>
<script>
$(function () {
    $('#formulaire').submit(function(e) {
    e.preventDefault();
    var j1 = $('#premier').val();
    var j2 = $('#deuxieme').val();
    if (j1 == "") alert('saisir le nom du premier joueur');
    if (j2 == "") alert('saisir le nom du deuxieme joueur');
    if (j2 != "" && j1 != "") {
    $.post('jeu.php',   {  premier:   j1,   deuxieme:   j2});
     window.location.href = "jeu.php";          
    }
});
    $('body').css('background-image', 'url(flower2.jpg)').css('background-size', '100%');
    $("#formulaire").css('background-image', 'url(flower.jpg)');
    });
</script>
</body>
</html> 
```

在另一个文件（jeu.php）中：

```
<?php
echo $_POST["premier"]."<br/>";
echo $_POST["deuxieme"]."<br/>";
?> 
```

问题：jeu.php 页面始终为空

1.  为什么？
2.  我怎样才能更正我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:44:57.763

如果您使用的是 AJAX，那么 jeu.php 页面将永远不会被“看到”... 发生的情况是：

1.`index.html`将数据发送到`jeu.php`，然后
2.`jeu.php`接收该数据，对其进行处理，然后返回响应到`index.html`. 然后，
3.`index.html`对接收到的数据做一些事情——这部分必须在.ajax方法的success函数中完成`index.html`。

我建议您使用 jQuery AJAX 方法的替代形式，因为它更容易查看如何布置您的代码。就像是：

```
$.ajax({
    type: "POST",
    url: "jeu.php",
    data: 'premier=' + j1 + '&deuxieme=' + j2,
    success: function(data) {
        alert('Server-side response was: ' + data);
    }
}); 
```

笔记：

1.  上面的代码进入 index.html
2.  来自 jeu.php 的响应返回到这个结构并且（在这个例子中）在成功函数中被警告
3.  上面的代码替换了这段代码：

`$.post('jeu.php', { premier: j1, deuxieme: j2});`
`window.location.href = "jeu.php";`

# php - PHP和Javascript之间的通信

> ID：13791474
> 
> 赞同：5
> 
> 时间：2012-12-09T20:28:05.167
> 
> 标签：php, javascript

我想从 PHP 向 Javascript 发送一些数据。（这两个文件是同一文件夹中的不同文件）例如，如果我在 PHP 端计算一些值，我想将数据发送到 javascript 并使用数据。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T20:30:43.583

[互联网上](http://www.w3schools.com/ajax/default.asp)[`AJAX`](http://en.wikipedia.org/wiki/Ajax_%28programming%29)有很多教程调用了完整的技术。

并且已经有一个很棒且易于部署的实现 -[在`jQuery`](http://api.jquery.com/jQuery.ajax/).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-26T04:25:39.063

在实践中，你可以使用这个：

文件：index.php

```
<HTML>
    <body>      
        <input type="text" id="test" value="123"><br>
        <input type="button" id="btn" onclick="send_to_php()" value="send to php">

        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>

                function send_to_php() {
                        $.ajax({
                            url: 'js_php.php',
                            type: 'POST',               
                            // Form data
                            data: function(){
                                var data = new FormData();
                                data.append('test', $("#test").val() );     
                                return data;
                            }(),
                            success: function (data) {
                                var obj = JSON.parse(data);
                                $("#test").val( obj.result );                   
                            },
                            error: function (data) {
                                console.log(data);
                            },
                            complete: function () {                 

                            },
                            cache: false,
                            contentType: false,
                            processData: false
                        });
                }

        </script>
    </body>
</HTML> 
```

文件：js_php.php

```
<?php
    //FILE: js_php.php

    $test = $_POST["test"];
    $test .= "456";

    $arrResult = array(     
        'result' => $test
    );          

    print json_encode($arrResult);
    die();
?> 
```

文件“index.php”是 JavaScript 和 PHP 之间使用 jQuery Ajax 方法的通信。当点击“send to php”按钮将运行“send_to_php()”，它将获取输入id“test”的值并通过ajax发送“js_php.php”文件。反过来，文件“js_php.php”将接收这个变量作为 POST，修改并打印 JSON 格式的值。ajax 函数“send_to_php()”实现的方法将“监听”所有“js_php.php”打印。

返回成功后，javascript将文本“js_php.php”打印在一个JSON对象上，然后JS能够在javascript代码内处理：

```
success: function (data) {
    var obj = JSON.parse (data);
    $("# test").val(obj.result);
}, 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T20:33:29.793

```
<script type='text/javascript'>
var myVar = <?php echo $myVar; ?>;
</script> 
```

简而言之。不过，还有更复杂的沟通方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T20:31:47.000

看看这个 AJAX 教程： http: [//news.php.net/php.general/219164](http://news.php.net/php.general/219164)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T20:29:51.703

在 PHP 页面的 script 标签中分配一个 JavaScript 全局变量，并在后面包含其他 javascript 文件。

样本：

```
<html>
  <head>
    <script type='text/javascript'>var testGlobal = <?php echo $globalJSValue ?></script>
    <script type='text/javascript' src="url"></script>
    <script type='text/javascript' src ="url"></script>
  </head>
</html> 
```

testGlobal 变量现在可用于两个 javascript 文件。

# html - 图像不会采用指定的宽度？

> ID：13791477
> 
> 赞同：0
> 
> 时间：2012-12-09T20:28:17.600
> 
> 标签：html, image

我正在使用 Firefox，从我的研究来看，这似乎是问题的一部分。我在`<img>`标签中指定宽度应为 360，高度为 215，但宽度为 382，高度为 215。我检查了一下，这保持了我在调整大小时试图打破的原始比例。为什么它会这样做，我该如何让它停止？如果我愿意，我应该能够使其高度为 124358907，宽度为 1。

```
<img src="myfile.png" height="215" width="360" /> 
```

然后，当我单击图像属性时，它说宽度是 382，并且根据它与其他正确调整大小的图像相比的外观，我可以确认它有点太宽了。

火狐版本 17.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:54:08.843

只是好奇，是在所见即所得编辑器中图像显示不正确还是实际上在浏览器中？我记得在旧版本的 Dreamweaver 中遇到过这样的问题，某些内容会在 Dreamweaver 的显示中显示异常，但是当您在浏览器中实际打开 HTML 文件时，所有内容都会按应有的方式显示。与旧的 Microsoft Front Page 相同。我现在只使用 Sublime Text 或 Notepad++ ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:36:28.040

认真的哥们？看看这个，你可以调整你的`img`标签，你可能在你身边做错了什么

[**演示**](http://jsfiddle.net/R2AbX/)

CSS

```
img {
    height: 15px;
    width: 200px;
} 
```

# protobuf-net - Proto-Buf 继承问题

> ID：13791481
> 
> 赞同：3
> 
> 时间：2012-12-09T20:28:51.733
> 
> 标签：protobuf-net

我有一个 3 级继承图。ProtoBuf 2.0.0.611

```
QueryRequest
VenueQueryRequest
VenueQueryRequestV1 
```

都标有

```
[DataContract, System.Serializable, ProtoBuf.ProtoContract] 
```

查询请求包括：

```
[ProtoInclude(10, typeof(VenueQueryRequest))]
[ProtoInclude(11, typeof(VenueQueryRequestV1))] 
```

当我为 VenueQueryRequestV1 调用 SerializeWithLengthPrefix 时，我得到“未知子类型：VenueQueryRequestV1”

如果我在拨打任何电话之前添加（而不是替换）

```
RuntimeTypeModel.Default[typeof(QueryRequest)].AddSubType(10, typeof(VenueQueryRequest));
RuntimeTypeModel.Default[typeof(QueryRequest)].AddSubType(11, typeof(VenueQueryRequestV1)); 
```

我得到“检测到重复的字段编号；10 on：Designertech.AzureServices.Messages.QueryRequest”如果我只添加第二个，我会得到同样的错误，但是是 11 而不是 10。

如果我更换，我会得到原来的错误

这让我觉得它应该知道子类型

我是否可能会在某个演员或某处搞砸事情？目前，只有基类声明了任何属性。

```
[ProtoMember(1)]
IList<string> RequestedFields 
```

这让我发疯了。

顺便说一句，这用于生成要馈送到 CloudFX Azure 服务总线框架的消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:34:38.157

每个级别只需要通知**直接**子类型：

```
[ProtoContract, ProtoInclude(10, typeof(VenueQueryRequest))
Class QueryRequest {...}

[ProtoContract, ProtoInclude(11, typeof(VenueQueryRequestV1))
Class VenueQueryRequest : QueryRequest {...}

[ProtoContract]
class VenueQueryRequestV1 : VenueQueryRequest {...} 
```

# java - 如何从 URL 中提取值

> ID：13791482
> 
> 赞同：0
> 
> 时间：2012-12-09T20:28:54.993
> 
> 标签：java, jsp, url, parameters, uri

我有一个 URL www.test.com/myshort/myapp/mypage.jsp，其中`myshort`是我数据库中的列值。

我稍后将查询我正在执行的这个 shortName 的 id（在本例中为“myshort”）

```
select id from mytable where shortName='myshort'; 
```

如何从整个 URL 中提取“myshort”值？我不能这样做，`request.getParameter()`因为这不是 url 参数的一部分。所以我正在尝试使用`request.getURI()`.

你能告诉我如何使用 解析和获取 shortName`request.getURI()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:32:13.193

我建议对这种类型的服务器编程使用[Spring MVC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)框架。它使您能够将请求模式与实际 url 映射并从 URL 中提取此类值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:35:11.370

我想出了一个解决方案/替代我的问题。我可以继续编辑 web.xml 并在那里指定 url 格式。

但这就是我解决问题的方法。我从 url 中取出 shortName 并将其作为 URL 参数粘贴。这比我之前想的要容易得多。

# map-projections - 笛卡尔到地理/空间坐标

> ID：13791484
> 
> 赞同：0
> 
> 时间：2012-12-09T20:29:17.967
> 
> 标签：map-projections

我有一个以米坐标表示的城镇的 dxf 文件。我需要从地图中提取折线并将它们转换为地理坐标。我的想法是在已知坐标的地图上添加 3 或 4 个点。我将使用谷歌地图作为参考放置它们。这 3 或 4 个点将放置在交叉路口道路上，因此我无法放置它们，因为它们定义了一个矩形（我认为这会更简单）。我不知道要转换地图对象的所有坐标需要进行什么计算。

谷歌地图地球半径：6378137米。所以，如果我考虑 3 点，我将有 3 个关系： (x1,y1) 与 (lat1, lng1) (x2,y2) 与 (lat2, lng2) (x3,y3) 与 (lat3, lng3)

我做了一个简单的转换，只有 2 分，但我想要一个更准确的结果。我最好使用 c/c++ 来完成它。

一个等效点的示例： 纬度：-2.148707 经度：-79.876270 x：2012078.15 y：498355.88

它不是 UTM，我从[这里](http://home.hiwaay.net/~taylorc/toolbox/geography/geoutm.html)验证它。因为我不知道它是否标准化。

我用谷歌搜索了很多，我找到了图书馆，但不知道 tmy 坐标是否符合特定格式，我认为我不能使用一个。

无论如何，感谢阅读，我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:31:22.493

这并不容易。首先，您需要知道您使用的是哪个参考椭球体（例如 WGS-84），然后是哪个投影。我不会尝试手动实现它，而是使用 postgis，它会为您完成所有这些丑陋的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:22:01.293

正确的方法是向文件的提供者询问坐标系与什么有关。dxf 不是真正合适的格式。您需要具有已定义地理坐标系的 ESRI Shp 文件或 mif/mid 等格式。否则有点不清楚数据是否足够精确，可用于地理参考。但是，在米和 wgs84 纬度之间进行转换并不困难，特别是如果该区域不超过 10-20 英里。您可以先尝试圆柱等距变换，它只有几行简单的代码。还要查看 dxf 文件中的 y-achsis 是否指向北极，否则您必须找出错误的北向量并旋转回北方。MapInfo Professional 是一款免费试用期的工具，该工具可以为此类未知坐标系指定参考点。
但是如果你是一个专业的软件开发者，你应该拒绝那个文件并要求一个 wgs84 lat lon 的版本。

# python - 如何在 sqlalchemy 中提交之前应用列默认值

> ID：13791487
> 
> 赞同：22
> 
> 时间：2012-12-09T20:29:52.437
> 
> 标签：python, sqlalchemy

我有一个声明式模型：

```
class User(Base):
    id = Column(Integer, primary_key=True)
    money = Column(Integer, default=100) 
```

然后我跑

```
>>> u = User()
>>> u.money
None 
```

如何在*不*向数据库写入任何内容的情况下使用 sqlalchemy 填充默认值？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-09T21:03:52.177

`.flush()`列默认值仅适用于 INSERT 和 UPDATE 语句，因此在会话之前不会应用。

要在刷新之前在新实例上看到相同的值，您需要在创建新实例时应用默认值；在对象的`__init__`方法中`User`：

```
class User(Base):
    __tablename__ = 'users'

    def __init__(self, **kwargs):
        if 'money' not in kwargs:
             kwargs['money'] = self.__table__.c.money.default.arg
        super(User, self).__init__(**kwargs)

    id = Column(Integer, primary_key=True)
    money = Column(Integer, default=100) 
```

如果没有`money`设置属性，我们直接根据为该列配置的默认值添加一个。

请注意，默认值是*SQL 表达式*，而不是 Python 值，因此您可能必须先将它们映射到 Python 对象。例如，布尔字段将具有默认值`'false'`或字符串值，而`'true'`不是Python 布尔对象。`False``True`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-25T21:37:35.547

我发现了一种在创建实例时自动填充一些默认值的机制。我正在从在实例创建时设置默认值的内部 ORM 迁移，因此我需要保留此行为，并且我不想触及每个模型定义。

```
BaseModel = declarative_base()

class Base(BaseModel):
    __abstract__ = True

    def __init__(self, **kwargs):
        for attr in self.__mapper__.column_attrs:
            if attr.key in kwargs:
                continue

            # TODO: Support more than one value in columns?
            assert len(attr.columns) == 1
            col = attr.columns[0]

            if col.default and not callable(col.default.arg):
                kwargs[attr.key] = col.default.arg

        super(Base, self).__init__(**kwargs) 
```

主要限制是仅支持不可调用的默认值。可调用默认值和使用数据库查询的默认值需要在实例创建时不可用的执行上下文。另外，我还没有发现`len(ColumnProperty.columns) != 1`不支持但也不支持的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T20:55:38.010

由于我不一定在构造函数中需要默认值，但有时来自其他地方，我想出了一个函数，我将它添加到我的基 Object 类中：

```
Base = declarative_base()
class ItemBase(Base):
    __abstract__ = True
    def _ensure_defaults(self):
        for column in self.__table__.c:
            if getattr(self, column.name) is None and column.default is not None and column.default.is_scalar:
                setattr(self, column.name, column.default.arg) 
```

这显然不适用于可调用对象。我不知道怎么称呼它，也许它是为了更好（感觉就像已经在破解这个想法了）。

有了这个，我可以做类似的事情：

```
class User(ItemBase):
    # ... inheritance, columns and stuff
    def __init__(self):
        self._ensure_defaults() 
```

我也可以调用 not in 中的方法`__init__`，也可以调用其他方法，以防我只需要在特殊情况下依赖这些值（后来我最终将其删除，因为它太混乱了）。在某些情况下，这可能比@JamesEmerton 的解决方案更灵活。

# c# - 如何进行多次拆分

> ID：13791489
> 
> 赞同：2
> 
> 时间：2012-12-09T20:30:09.923
> 
> 标签：c#

如何进行多次拆分？

**例子**

`string eq = SIN(X)/3`

我可以像这样拆分这个，`string equation[] = eq.Split['/']`但是如果我`+, -, *, /`的方程式中有，我怎么能拆分这个？

**例子**

`string eq = SIN(X) + 3 / 3 * 4`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T20:32:20.490

[`string.Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)允许传入多个字符：

```
var result = eq.Split('/', '+', '-', '*'); 
```

话虽如此，使用字符串运算来评估此类表达式并不是一个好主意。您应该为此任务使用数学解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:33:42.627

使用[**Regex.Split**](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)并使用正则表达式来匹配以下运算符：

```
string[] equation = Regex.Split(eq, "[/\+\*-]"); 
```

在正则表达式中提供所有可能的运算符。

# c++ - 在规则引擎中动态配置规则

> ID：13791491
> 
> 赞同：-1
> 
> 时间：2012-12-09T20:30:23.840
> 
> 标签：c++, design-patterns, software-design, rule-engine

我正在设计一个简单的规则引擎。让我从概述开始。

引擎使用配置文件初始化，该配置文件指定要运行的规则以及这些规则打算使用的参数。

例子：

我有一个传入的订单对象，我想对其进行一些完整性检查，例如订单数量不能大于某个数量 X（x 作为参数传递给引擎。）这是一个参数的简单示例通过了。

一个复杂的例子：

一些订单类型.一些地区.一些办公桌.订单数量 = X

一些订单类型.一些地区.一些柜台.一些交易者.数量 = y。

一些订单类型.一些地区.一些产品.每日交易量 = A

一些订单类型.一些地区.一些办公桌.每日交易量 = B

很多像这样的参数用于初始化引擎，这些参数打算被规则使用。

问题：

这些初始化参数应该如何传递给 API？——JSON、XML ？？？

表示、处理和存储这些参数的最佳软件设计实践是什么，以便规则可以使用这些信息（比如交易者组允许的数量是多少？对传入的订单对象进行完整性检查）

我打算在 C++ 中实现它

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:11:47.917

在开始创建新规则引擎之前，您应该真正意识到所涉及的复杂性，例如[Rete 算法](http://en.wikipedia.org/wiki/Rete_algorithm)，如果您计划维护超过数千条规则，这是有道理的，因为从这些数字开始，如果您按顺序评估规则，它会变得令人望而却步。 ，而性能在交易系统中尤为重要。我实际上会研究和探索重用现有的规则引擎，例如[CLIPS](http://en.wikipedia.org/wiki/CLIPS)、[drools](http://www.jboss.org/drools/)、 JRules 等。

另一个有希望的可能性是在您的进程中嵌入某种脚本语言（通常可能在 Java 中），它可以访问您的内存域模型，例如[嵌入一个 Python](http://docs.python.org/2/extending/embedding.html)解释器并将其用作您的“规则引擎”。如果您绝对必须实现自己的，那么您可以使用 yacc 和 lex 但上次我使用它时，我记得它并不是很有趣，您必须意识到复杂性，即如果您计划拥有数千个或更多规则。

对于规则管理，即簿记、编辑、注释、版本控制等，您将需要 XML 并将实际规则放在`CDATA`元素下。

# java - 全部替换 ”？” 和 ”\\？” 在爪哇

> ID：13791495
> 
> 赞同：11
> 
> 时间：2012-12-09T20:31:20.263
> 
> 标签：java, regex, string

是否可以用“\？”替换所有问号（“？”）?

假设我有一个字符串，我想删除该字符串的某些部分，其中一部分包含一个 URL。像这样：

```
String longstring = "..."; //This is the long String
String replacestring = "http://test.com/awesomeness.asp?page=27";
longstring.replaceAll(replacestring, ""); 
```

但！据我了解，您不能将 replaceAll() 方法与包含一个问号的字符串一起使用，您必须使它们像这样“\？” 第一的。

所以问题是；有没有办法用“\”替换问号？在字符串中？不，我只能更改字符串。

在此先感谢，希望有人理解我！（抱歉英语不好……）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-09T20:38:19.390

不要用`replaceAll()`，用`replace()`！

这是一种常见的误解，即`replaceAll()`替换*所有*出现的事件并`replace()`仅替换一个或某物。这是完全不正确的。

`replaceAll()`名字不好 - 它实际上替换了*regex*。
`replace()`替换简单的字符串，这是您想要的。

这两种方法都会替换**所有**出现的目标。

只需这样做：

```
longstring = longstring.replace(replacestring, ""); 
```

这一切都会奏效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T20:32:52.767

也逃脱`\`，使用`\\\\?`.

```
String longstring = "..."; //This is the long String
String replacestring = "http://test.com/awesomeness.asp?page=27";
longstring=longstring.replaceAll(replacestring, "\\\\?"); 
```

但正如其他答案所提到的，`replaceAll`有点矫枉过正，只是`replace`应该工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T20:32:46.503

使用[`String.replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence))代替[`String.replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))：

```
longstring = longstring.replace("?", "\\?"); 
```

[`String.replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，而[`String.replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.String,%20java.lang.String))使用纯文本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T20:32:53.117

`replaceAll`采用正则表达式，`?`在正则表达式世界中具有特殊含义。

您应该[`replace`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)在这种情况下使用，因为您不需要正则表达式。

```
String longstring = "..."; //This is the long String
String replacestring = "http://test.com/awesomeness.asp?page=27";
longstring = longstring.replace(replacestring, ""); 
```

* * *

哦，字符串是不可变的！！`longstring = longstring.replace(..)`，注意分配。

# php - << 是什么意思 可能重复： 在 PHP 中，“<<<”代表什么？ 问问题

> ID：13791503
> 
> 赞同：3
> 
> 时间：2012-12-09T20:31:48.257
> 
> 标签：php

> **可能重复：**
> [在 PHP 中，“<<<”代表什么？](https://stackoverflow.com/questions/3700042/in-php-what-does-represent)
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我在 PHP 脚本中遇到了这个问题。

（请注意，我是新手，所以我可能看起来很愚蠢）

```
$Var['Text'] = <<<OUT
String Here
OUT; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:32:43.327

这称为标记字符串的 Heredoc 语法。**[一探究竟！](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:33:05.253

这是一个heredoc。想想多行字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:33:30.333

它被称为 heredoc，请参见[此处](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。这是另一种创建字符串的方法。

# java - JFrame 关闭问题

> ID：13791512
> 
> 赞同：1
> 
> 时间：2012-12-09T20:32:14.007
> 
> 标签：java, swing, user-interface, jframe, jpanel

我有 Main 类，StartFrame 扩展了 JFrame，而 UserPanel 扩展了我添加到 StartFrame 的 JPanel。我在 UserPanel 中有按钮，当我按下按钮时如何关闭 StartFrame（我熟悉事件处理，问题是如何将信息发送到 StartFrame）。或者最好只是改变框架的面板（如果需要的话）并重新使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:34:47.800

如果要关闭包含组件的窗口，则需要对该窗口的引用，而 SwingUtilities 有一个方法可以帮助您获取此信息：`getWindowAncestor(Component c)`. 然后你可以调用`dispose()`返回的窗口。

IE，

```
Window win = SwingUtilities.getWindowAncestor(myJPanel); 
win.dispose(); 
```

请注意，如果您使用它来结束 GUI，这很好，但如果您的目标是交换视图，那么更好的建议不是交换 Windows，而是让主 JFrame 可见，而是交换它显示的组件使用 CardLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:43:05.080

该按钮已经在框架上（在右上角，这里）。只需`JFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE)`在构建时调用它，它就会按用户期望的那样工作。

### 其他提示

不要扩展框架或面板，而只是创建和使用它们。

# php - 在 PHP/MySQL 中只获取一行

> ID：13791514
> 
> 赞同：14
> 
> 时间：2012-12-09T20:32:21.213
> 
> 标签：php, mysql, database, fetch

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

这里的简单问题。

我有一个 SELECT 查询

```
SELECT FROM friendzone WHERE ID = '$editID'" 
```

我确信这只会给我一行结果，因为 ID 不能在我的数据库中重复。

如何访问列值？

```
$row = mysql_fetch_array($query); 
```

我认为这是没用的，因为我不必制作任何数组。我只有一行！

如果我不把它放到一个While cicle中，并尝试做例如

```
.$row['ID']. 
```

我得到：

```
mysql_fetch_array() expects parameter 1 to be resource, boolean given 
```

提前谢谢大家。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T20:35:12.127

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)。它们不再被维护，并且 已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到 [**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

尝试：

```
$query = mysql_query("SELECT * FROM friendzone WHERE ID = '$editID'");
$row = mysql_fetch_array($query);

print_r($row); 
```

MySQLi 代码：

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
$conn = new mysqli('host', 'username', 'password', 'database');
$stmt = $conn->prepare("SELECT * FROM friendzone WHERE ID = ?");
$stmt->bind_param("s", $editID);
$stmt->execute();
$result = $stmt->get_result();
$row = $result->fetch_assoc();

print_r($row); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T20:37:40.867

可能你`$query`是平等的`false`，因为出了点问题，试着`mysql_error()`看看有什么问题。

和 2 个小建议：

1.  最好使用`PDO`od `mysqli`，因为不推荐使用 mysql_* 函数。

2.  `mysql_real_escape_string()`在将值放入 SQL 字符串之前至少使用转义值

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-09T20:40:05.770

因为我不知道您尝试选择哪些列，所以 select 的一般语法是

```
"SELECT column1, column2, column3 FROM friendzone WHERE ID ='$editID'" 
```

或者，如果您想选择所有列，只需键入

```
"SELECT * FROM friendzone WHERE ID = '$editID'" 
```

# java - 如何在hadoop级联中获取输入文件名

> ID：13791524
> 
> 赞同：2
> 
> 时间：2012-12-09T20:33:11.257
> 
> 标签：java, hadoop, mapreduce, cascading

在 map-reduce 中，我将提取输入文件名，如下所示

```
public void map(WritableComparable<Text> key, Text value, OutputCollector<Text,Text> output, Reporter reporter)
        throws IOException {

      FileSplit fileSplit = (FileSplit)reporter.getInputSplit();
      String filename = fileSplit.getPath().getName();
      System.out.println("File name "+filename);
      System.out.println("Directory and File name"+fileSplit.getPath().toString());

    process(key,value);

} 
```

我怎样才能用级联做类似的事情

```
Pipe assembly = new Pipe(SomeFlowFactory.class.getSimpleName());
Function<Object> parseFunc = new SomeParseFunction();
assembly = new Each(assembly, new Fields(LINE), parseFunc);
...

public class SomeParseFunction extends BaseOperation<Object> implements Function<Object> {
...

 @Override
    public void operate(FlowProcess flowProcess, FunctionCall<Object> functionCall) {

how can I get the input file name here ???    
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:07:45.563

我不使用级联，但我认为使用 functionCall.getContext() 访问上下文实例就足够了，以获得您可以使用的文件名：

```
String filename= ((FileSplit)context.getInputSplit()).getPath().getName(); 
```

但是，似乎级联使用旧 API，如果上述方法不起作用，您必须尝试：

```
Object name = flowProcess.getProperty( "map.input.file" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-02T12:58:56.713

感谢Engineiro分享答案。但是，当调用 hfp.getReporter().getInputSplit() 方法时，我得到了 MultiInputSplit 类型，它不能在级联 2.5.3 中直接转换为 FileSplit 类型。在深入研究了相关的级联 API 之后，我找到了一种方法并成功检索了输入文件名。因此，我想分享这个来补充Engineiro的答案。请看下面的代码。

```
HadoopFlowProcess hfp = (HadoopFlowProcess) flowProcess;
MultiInputSplit mis = (MultiInputSplit) hfp.getReporter().getInputSplit();
FileSplit fs = (FileSplit) mis.getWrappedInputSplit();
String fileName = fs.getPath().getName(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T19:38:00.350

You would do this by getting the reporter within the buffer class, from the provided flowprocess argument in the buffer operate call.

```
HadoopFlowProcess hfp = (HadoopFlowProcess) flowprocess; 

FileSplit fileSplit = (FileSplit)hfp.getReporter().getInputSplit();
.
.//the rest of your code
. 
```

# c# - 解析 2 个字符内的字符串的最佳方法是什么

> ID：13791527
> 
> 赞同：1
> 
> 时间：2012-12-09T20:33:22.990
> 
> 标签：c#

我有这个字符串：

**“本地主机上的网络适配器‘Realtek PCIe GBE 系列控制器’”**

仅返回 "'" 之间的字符串的最佳方法是什么？（Realtek PCIe GBE 系列控制器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:37:23.673

如果您对正则表达式感到满意，则可以使用如下模式：

```
/'[^']*'/ 
```

捕获单引号之间的所有内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:41:49.657

您可以使用正则表达式，如下所示：

```
var s = "hello 'world' hehe";
var m = Regex.Match(s, "'([^']*)'");
string res = null;
if (m.Success) {
    res = m.Groups[1].ToString();
}
Console.WriteLine(res); 
```

解决方案的关键是这个正则表达式：

```
'([^']*)' 
```

它在找到单引号时开始匹配，并继续直到找到结束引号，捕获其间的所有内容。然后通过`Regex`API 检索捕获的组。请注意，您定义的捕获组从 index 开始`1`；索引零被保留以表示“整个匹配”。

看看[ideone 上的演示](http://ideone.com/46IfFZ)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:38:57.950

您可以使用该`Substring()`方法将其切碎。

```
tempStr = str.Substring(str.IndexOf("'")+1);
yourStr = tempStr.SubString(0, tempStr.IndexOf("'")); 
```

# javascript - 如何让 jQtree 从 HTML 的源代码中读取初始树

> ID：13791528
> 
> 赞同：3
> 
> 时间：2012-12-09T20:33:23.627
> 
> 标签：javascript, jquery, html, json, jqtree

到目前为止，我一直在使用[jQuery TreeView](https://github.com/jzaefferer/jquery-treeview)作为[我网站的](http://www.shlomifish.org/)导航菜单，但现在由于主导航菜单（在左侧窗格中）变得太大（Vim 报告它需要 40869 字节超出典型页面的 67054 字节）我想使其在原始 HTML 中的全面性降低，并使用获取 JSON 的 AJAX 调用填充其余部分。

但是，jQuery Treeview 不能做到这一点（它的作者声称它不完整），所以我正在研究[jqTree](http://mbraak.github.com/jqTree/)。jqTree 似乎能够处理 AJAX 的东西，但我从文档中不明白如何让它从 HTML 中的一些 <ul><li> 标记中读取初始树骨架，我想为人们保留其浏览器不支持 JavaScript 或默认阻止它（我使用 NoScript 将我默认的所有域列入黑名单，并且经常对没有 JavaScript 的网站甚至无法正确显示感到恼火）。

我想我可以编写一些 jQuery 代码来使用 jQuery 的 DOM 支持递归遍历 <ul><li> 结构并从中构造一些 JSON（有一些困难），但我想知道这是否是一个已解决的问题？

提前致谢，

— 什洛米鱼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:47:28.497

Jqtree 不支持从 html 获取数据。

我认为支持没有 javascript 的浏览器的最佳方法是在 html 中生成树并使用 json 数据初始化树。这当然意味着你需要做更多的工作。您必须生成 html 和 json 数据。

Jstree，另一个树组件，确实支持这一点。请参阅[http://www.jstree.com/documentation/html_data](http://www.jstree.com/documentation/html_data)。

# jquery - iframe jquery firefox/ie 奇怪的错误

> ID：13791532
> 
> 赞同：0
> 
> 时间：2012-12-09T20:33:33.587
> 
> 标签：jquery, iframe

我有一个网络应用程序（[http://phppetar.heliohost.org/htmlxray.html](http://phppetar.heliohost.org/htmlxray.html)），其中包括找出用户给定网页（位于 iframe 内）内的所有文本节点，并使用 jquery FadeTo 函数将它们淡出当有人点击淡入淡出按钮时。

Chrome 中的一切都按预期工作，但由于某种原因它不在 FireFox 或 IE 中......这是我从 Firebug 控制台得到的错误：

*错误：访问属性“nodeType”的权限被拒绝*

当我尝试使用此代码访问 iframe 内容时：

```
.contents().filter(function() {return (this.nodeType == 3) && ($.trim(this.data).length >0 )}) 
```

这不是跨域问题，因为我有 PHP 代理来处理给定的 url ......为了让事情变得更加奇怪，即使在 FireFox 和 IE 上，一切都适用于某些网页（www.google.com，www.fesb.hr， www.forum.hr ....) 但它不适用于我尝试过的大多数网站，例如 www.foxnews.com、www.cnn.com、www.nbc.com、www.digg.com、www。 Dailymotion.com ...

我没有发现有效的网站和无效的网站之间有任何联系，它们没有相同的文档类型，其中一些包含自己的 jquery，有些则没有....

# python - 使用特定单词在 String 中查找 n 个单词的最优雅方法

> ID：13791538
> 
> 赞同：2
> 
> 时间：2012-12-09T20:34:36.590
> 
> 标签：python, regex, string

有一个大字符串，我需要找到所有包含正好 N 个单词的子字符串（如果可能的话）。

例如：

```
big_string = "The most elegant way to find n words in String with the particular word"
N = 2
find_sub(big_string, 'find', N=2) # => ['way to find n words'] 
```

我试图用正则表达式来解决它，但它碰巧比我最初预期的要复杂。我刚刚忽略了一个优雅的解决方案吗？

**更新**

我们所说的单词是指由 \b 分隔的所有内容

N参数表示'find'每边应该有多少个单词

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:40:47.967

对于您的具体示例（如果我们使用正则表达式的“单词”定义，即包含字母、数字和下划线的任何内容），正则表达式将如下所示：

```
r'(?:\w+\W+){2}find(?:\W+\w+){2}' 
```

`\w`匹配所述单词字符之一。`\W`匹配任何其他字符。我认为你的参数在模式中的位置很明显。您可以将模式与[`re.search`](http://docs.python.org/2/library/re.html#re.search)或一起使用[`re.findall`](http://docs.python.org/2/library/re.html#re.findall)。

问题是您的查询周围的单词数量是否少于所需数量（即，如果它太靠近字符串的一端）。但你应该能够逃脱：

```
r'(?:\w+\W+){0,2}find(?:\W+\w+){0,2}' 
```

由于贪婪的重复。请注意，在任何情况下，如果您想要多个结果，*匹配项永远不能重叠*。所以如果你使用第一个模式，你只会得到第一个匹配，如果两个出现`find`彼此接近，而在第二个中，你不会`n`在第二个之前得到单词`find`（已经消耗的单词将是失踪）。特别是，如果两次出现的`find`距离比第二次更近`n`，那么第二次`find`就已经是第一次匹配的一部分，那么你根本无法获得第二次匹配。

如果您想将单词视为不是空格字符的任何内容，则该方法看起来相似：

```
r'(?:\S+\s+){0,2}find(?:\s+\S+){0,2}' 
```

我猜，对于其他任何事情，您都必须自己提出角色类。

# python - 如何从 mongoengine FileField 获取文件系统路径

> ID：13791542
> 
> 赞同：0
> 
> 时间：2012-12-09T20:34:51.163
> 
> 标签：python, mongodb, path, mongoengine, filefield

我需要从 a 获取路径`FileField`，以便根据给定的文件系统路径检查它，以了解我插入 mongo 数据库的文件是否已经存在。是否可以？

我得到的只是一个`GridFSProxy`，但我无法理解如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:43:54.110

你不能，因为它将数据存储到数据库中。如果您需要存储原始路径，则可以创建一个 EmbeddedDocument，其中包含一个 FileField 和一个带有路径字符串的 StringField。但请记住，存储的文件和您可能在该路径上找到的文件并不相同

# c++ - 在GLUT，c ++中按下按键时清除屏幕

> ID：13791543
> 
> 赞同：0
> 
> 时间：2012-12-09T20:34:57.800
> 
> 标签：c++, opengl, glut

我有一个程序可以监视文本文件的更改，并且在检测到更改后，用户可以选择根据该文本文件的内容重新显示屏幕。我的问题是，当请求新屏幕时，前一个屏幕的内容会保留，而新内容会与它重叠。我希望在将新数据放在屏幕上之前清除屏幕。

这是我所拥有的：

```
void keyboard(unsigned char key, int x, int y){
    if(key == 'c'){
        c_pressed++;
        cout<<"c pressed: "<<c_pressed<<"sound.txt cleared..."<<endl;
        clear_file();
    }
    if(key=='v'){
        v_pressed++;
        cout<<"v pressed: "<<v_pressed<<"displaying new configuration..."<<endl;
        glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
        glutPostRedisplay();
    }
} 
```

当按下“c”键时，文本文件被清除。我已经验证这可以正常工作。然后在一个单独的程序将新数据加载到文本文件中之后，用户按“v”来加载这些新指令。我尝试将 clear 函数放在“v”语句中，以及在 display 函数中......

```
void display(void){ 
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    read_in_sound();    
    cout<<"Number of sound events:  "<<numLines<<endl;

    for(int j=0; j<numLines; j++){
        if(data[0+j*4]==1){
            circle(0,0,200,50);
        }

        if(data[1+j*4]==1){
            circle(0,400,200,50);
        }

        if(data[2+j*4]==1){
            circle(400,400,200,50);
        }

        if(data[3+j*4]==1){
            circle(400,0,200,50);
        }       
    }
    glFlush();
    glutSwapBuffers();
} 
```

但是当我调用 redisplay 时，旧屏幕和新屏幕都会显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:03:42.743

作为一般规则，您应该仅从显示函数执行 OpenGL 绘图调用（并且清除场景是绘图调用）。如果 OpenGL 场景中的某些内容发生更改，规范的方法是重新绘制整个内容。因此，作为对任何事件的反应，您更改程序状态并发出重绘，最终将使用 OpenGL 重绘场景。

如果场景非常复杂，您只想用不透明的几何图形更新场景（任何需要混合的东西都需要完全重绘），您应该使用将场景颜色和深度缓冲区存储到纹理并使用它们从明确定义的状态开始. 理想情况下，您为此使用帧缓冲区对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:40:15.720

这可能不是世界上最好的方法，但我添加了一个矩形对象，它是与每次我想“重绘”时调用的黑色背景相匹配的窗口大小。它可以节省时间，而不必像前面的答案建议的那样写入帧缓冲区。

# oracle - 删除子选择以优化此查询

> ID：13791547
> 
> 赞同：0
> 
> 时间：2012-12-09T20:35:55.293
> 
> 标签：oracle, query-optimization

我有这个查询需要大约 5 分钟才能返回一个结果集，但我想不出更好的方法来做到这一点。有问题的表始终有大约 15 或 2000 万行，其架构可以总结为

```
create table conversation(
  id raw, -- GUID
  vendor varchar,
  snumber number
  rcvdate date
) 
```

在我们存储从供应商发送或发送给供应商的消息的地方，每条消息都有一个由所有对话（相关消息集）共享的序列号。问题出现是因为供应商可以有父代，而消息可以有父代的代码（我们可以假设在查询时我们知道供应商的代码及其父代的代码）。假设 A 和 B 是 2 个具有共同父 P 的供应商，表格可能看起来像

```
Vendor  snumber    date
------------------------------
A       1          01-JAN-2012
P       1          02-JAN-2012
A       1          02-JAN-2012
A       2          03-JAN-2012
P       2          03-JAN-2012
B       3          03-JAN-2012
P       3          04-JAN-2012
A       2          04-JAN-2012 
```

我们需要查询来自/到 A 的最后 N 条消息，并获取 vendor=A 或（vendor=P 和 vendor=A 和相同 snumber 的另一条记录）的消息，即：

```
Vendor  snumber    date
------------------------------
A       1          01-JAN-2012
P       1          02-JAN-2012
A       1          02-JAN-2012
A       2          03-JAN-2012
P       2          03-JAN-2012
A       2          04-JAN-2012 
```

我所做的是将与 A 之间的对话存储在临时表 T(id, snumber) 中，然后返回

```
 select * from ( 
       select * from conversations c 
       where 
       exists (select id from T where T.id  = C.id) or 
       ( c.vendor=l_parent and exists (select snumber from T where T.snumber=c.snumber )
   ) where rownum <= l_N 
```

这两个子查询正在扼杀性能。对话表在本示例中包含的所有列中都有索引。我认为必须是一种巧妙的方式来对这些信息进行分组，而不必使用临时表或子查询，但我想不出一个。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:05:26.640

听起来你想要这样的东西：

```
SQL> select vendor, snumber, rcvdate
  2    from (select vendor, snumber, rcvdate,
  3                 max(case when vendor = 'A' then 'Y' end) over (partition by snumber) has_vendor
  4            from conversation
  5           where vendor in ( 'A', 'P' )
  6           order by rcvdate desc)
  7   where has_vendor = 'Y'
  8     and rownum <= 100
  9   order by rcvdate;

V    SNUMBER RCVDATE
- ---------- --------------------
A          1 01-jan-2012 00:00:00
P          1 02-jan-2012 00:00:00
A          1 02-jan-2012 00:00:00
P          2 03-jan-2012 00:00:00
A          2 03-jan-2012 00:00:00
A          2 04-jan-2012 00:00:00 
```

IE

```
max(case when vendor = 'A' then 'Y' end) over (partition by snumber) has_vendor 
```

表示如果那个号码中有一个“A”供应商，那么你想为“P”arent 供应商返回它，否则没有。

# ruby-on-rails - 如何重定向到页面中的某个位置？

> ID：13791556
> 
> 赞同：6
> 
> 时间：2012-12-09T20:36:31.113
> 
> 标签：ruby-on-rails, redirect

我有一个带有评论的博客应用程序。目前，评论控制器有一个标准的创建动作

```
def create    
  @comment = current_user.build(params[:comment])
  respond_to do |format|
  if @comment.save
    format.html { redirect_to @comment.post }
  end
end 
```

创建后，用户将被重定向到发表评论的博客文章。如何在页面下方重定向到新评论所在的位置？

**帖子/show.html.erb**

```
<div id="post_show">
  <%= @post.content %>
  <%= render @post.comments %>
</div> 
```

**评论/_comment.html.erb**

```
<div id="comment_partial">
  <%= comment.content %>
</div> 
```

有什么我可以添加到我的 HTML 中，然后在我的控制器中引用的吗？我是否需要以某种方式“保存”该位置？感谢您帮助新手！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T20:41:22.830

您可以`anchor`在路径助手中使用该选项，例如

```
redirect_to post_path(@comment.post, anchor: 'some-id') 
```

# javascript - 从单选按钮的值选择中添加总和

> ID：13791557
> 
> 赞同：0
> 
> 时间：2012-12-09T20:37:10.910
> 
> 标签：javascript, jquery, jquery-selectors, jquery-events

例如，单选按钮一 = 值 1，单选按钮二 = 值 2。

这是我的代码：

脚本文件：

```
<script type="text/javascript">

$(document).ready(function () {

    $("div[data-role='footer']").prepend('<a href="#" data-rel="back" data-icon="back">Back</a>');

    $(".Next").click(function () {

        $.mobile.changePage("#" + $("#Answer").val());
    });

    $("input[type=radio]").click(function () {
        var answer = $(this).val();
        $("#Answer").val(answer);

    });
    $('.Answer').live("click", function () {
        var NextQuestionID = $(this).attr('NextQuestionId');
        if (NextQuestionID == '') {
            location.href = "/Surveys/Index";
        }
        $("#survey").load('/Questions/GetQuestion', { Id: NextQuestionID }, function () {
            $('#answerInput').textinput();
            $(".Answer").button();
        });

    });
}); 
```

这是我的标记：

```
<input type="radio" name="Answer" id="radio-choice-1" value="Question2" />

     <input id="Answer" class="Answer" type="hidden" value="first" />
        <div class="innerspacer">
        <a href="" class="Next" data-theme="d" data-role="button">Next</a> 
</div> 
```

如何将单选按钮分配为 1 到 4 的值并总结所有问题的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:51:04.393

您的问题有很多内容，不清楚您想要什么。我猜测并假设您有 5 个单选按钮，并且您希望第 5 个单选按钮值是其他 4 个值的总和。那是对的吗？

这是一个这样做的例子：[jsfiddle](http://jsfiddle.net/xPx6a/)

HTML：

```
<div id="container">
    <label>
        <input type="radio" name="something" value="1">
        A?
    </label>
    <label>
        <input type="radio" name="something" value="3">
        B?
    </label>
    <label>
        <input type="radio" name="something" value="5">
        C?
    </label>
    <label>
        <input type="radio" name="something" value="">
        All?
    </label>
</div> 
```

JavaScript：

```
$(document).ready(function() {
    var choices = $('input[name="something"]');
    var total = 0;
    choices.each(function() {
        var choice = $(this);
        var value = parseInt(choice.val(), 10);
        if (!isNaN(value)) {
            total += value;
        }
    });
    choices.filter(':last').val(total);
}); 
```

您需要根据您的 HTML 进行调整。

# php - 为这个简单的代码减少许多 SQL 查询

> ID：13791560
> 
> 赞同：0
> 
> 时间：2012-12-09T20:37:31.990
> 
> 标签：php, sql

我有一个包含事件开始日期的数据库表。一个事件在下一个事件开始时结束。给定开始日期和结束日期，我希望创建一个具有相应事件 ID 的日期数组。

目前我为每个日期运行一个 SQL 查询。伪代码：

```
$currDate = $startDate
While $currDate++ < $endDate
  echo $currDate . " - " . dbQuery("SELECT TOP 1 ID FROM events WHERE eventDate <= '$currDate' ORDER BY eventDate DESC");
Loop 
```

我怎样才能提高效率（在 PHP 中）？

**编辑：**感谢您的回答，但我意识到问题并不清楚。设法编写了一些在我的服务器上快速执行（<10ms）的 SQL，日期跨度为数年。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:58:08.533

```
select distinct
e1.eventDate,
ID = (
        select top 1 e2.ID 
        from Events e2 
        where e2.eventDate <= e1.eventDate 
        order by e2.eventDate desc
    )
from 
Events e1 
```

当您从查询中获取结果时，您会在代码中循环它们并显示结果。使您的实现更高效的关键是减少数据库往返次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:01:31.280

您可以使用类似下面的查询，这样您将一次检索整个事件 ID、日期开始和结束日期列表：

```
select id, date_start,(select min(date_start) from eventss where date_start > e.date_start) as date_end from
eventss e where date_start >= @DateStart
and 
(select min(date_start) from eventss 
where date_start > e.date_start) <= @DateEnd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:09:41.603

这是使用 SQL 的解决方案：

[SQL小提琴](http://sqlfiddle.com/#!3/c3a8e/1)

**MS SQL Server 2008 架构设置**：

```
Create Table dbo.Events (
  ID int not null primary key nonclustered,
  EventDate datetime not null
);

Insert Into dbo.Events (ID, EventDate) Values
  (1, '2011-11-19'),
  (2, '2011-11-25'),
  (3, '2011-12-12'),
  (4, '2012-01-02'),
  (5, '2012-01-05'),
  (6, '2012-02-10'); 
```

**查询 1**：

```
DECLARE @dtStart DATETIME,
        @dtEnd   DATETIME

SET @dtStart = '2011-11-01'
SET @dtEnd = '2012-02-20'

SELECT thedate,
       eventID = (SELECT TOP 1 id
                  FROM   events
                  WHERE  eventdate <= thedate
                  ORDER  BY eventdate DESC)
FROM   (SELECT Dateadd(DAY, number, @dtStart) AS theDate --build dates from the start to end date
        FROM   (SELECT DISTINCT number
                FROM   master.dbo.spt_values
                WHERE  name IS NULL) n --returns integer values from 0 to 2037
        WHERE  Dateadd(DAY, number, @dtStart) < @dtEnd) x 
```

**[结果](http://sqlfiddle.com/#!3/c3a8e/1/0)**：

```
|                         THEDATE | EVENTID |
---------------------------------------------
| November, 01 2011 00:00:00+0000 |  (null) |
| November, 02 2011 00:00:00+0000 |  (null) |
| November, 03 2011 00:00:00+0000 |  (null) |
| November, 04 2011 00:00:00+0000 |  (null) |
| November, 05 2011 00:00:00+0000 |  (null) |
| November, 06 2011 00:00:00+0000 |  (null) |
| November, 07 2011 00:00:00+0000 |  (null) |
| November, 08 2011 00:00:00+0000 |  (null) |
| November, 09 2011 00:00:00+0000 |  (null) |
| November, 10 2011 00:00:00+0000 |  (null) |
| November, 11 2011 00:00:00+0000 |  (null) |
| November, 12 2011 00:00:00+0000 |  (null) |
| November, 13 2011 00:00:00+0000 |  (null) |
| November, 14 2011 00:00:00+0000 |  (null) |
| November, 15 2011 00:00:00+0000 |  (null) |
| November, 16 2011 00:00:00+0000 |  (null) |
| November, 17 2011 00:00:00+0000 |  (null) |
| November, 18 2011 00:00:00+0000 |  (null) |
| November, 19 2011 00:00:00+0000 |       1 |
| November, 20 2011 00:00:00+0000 |       1 |
| November, 21 2011 00:00:00+0000 |       1 |
| November, 22 2011 00:00:00+0000 |       1 |
| November, 23 2011 00:00:00+0000 |       1 |
| November, 24 2011 00:00:00+0000 |       1 |
| November, 25 2011 00:00:00+0000 |       2 |
| November, 26 2011 00:00:00+0000 |       2 |
| November, 27 2011 00:00:00+0000 |       2 |
| November, 28 2011 00:00:00+0000 |       2 |
| November, 29 2011 00:00:00+0000 |       2 |
| November, 30 2011 00:00:00+0000 |       2 |
| December, 01 2011 00:00:00+0000 |       2 |
| December, 02 2011 00:00:00+0000 |       2 |
| December, 03 2011 00:00:00+0000 |       2 |
| December, 04 2011 00:00:00+0000 |       2 |
| December, 05 2011 00:00:00+0000 |       2 |
| December, 06 2011 00:00:00+0000 |       2 |
| December, 07 2011 00:00:00+0000 |       2 |
| December, 08 2011 00:00:00+0000 |       2 |
| December, 09 2011 00:00:00+0000 |       2 |
| December, 10 2011 00:00:00+0000 |       2 |
| December, 11 2011 00:00:00+0000 |       2 |
| December, 12 2011 00:00:00+0000 |       3 |
| December, 13 2011 00:00:00+0000 |       3 |
| December, 14 2011 00:00:00+0000 |       3 |
| December, 15 2011 00:00:00+0000 |       3 |
| December, 16 2011 00:00:00+0000 |       3 |
| December, 17 2011 00:00:00+0000 |       3 |
| December, 18 2011 00:00:00+0000 |       3 |
| December, 19 2011 00:00:00+0000 |       3 |
| December, 20 2011 00:00:00+0000 |       3 |
| December, 21 2011 00:00:00+0000 |       3 |
| December, 22 2011 00:00:00+0000 |       3 |
| December, 23 2011 00:00:00+0000 |       3 |
| December, 24 2011 00:00:00+0000 |       3 |
| December, 25 2011 00:00:00+0000 |       3 |
| December, 26 2011 00:00:00+0000 |       3 |
| December, 27 2011 00:00:00+0000 |       3 |
| December, 28 2011 00:00:00+0000 |       3 |
| December, 29 2011 00:00:00+0000 |       3 |
| December, 30 2011 00:00:00+0000 |       3 |
| December, 31 2011 00:00:00+0000 |       3 |
|  January, 01 2012 00:00:00+0000 |       3 |
|  January, 02 2012 00:00:00+0000 |       4 |
|  January, 03 2012 00:00:00+0000 |       4 |
|  January, 04 2012 00:00:00+0000 |       4 |
|  January, 05 2012 00:00:00+0000 |       5 |
|  January, 06 2012 00:00:00+0000 |       5 |
|  January, 07 2012 00:00:00+0000 |       5 |
|  January, 08 2012 00:00:00+0000 |       5 |
|  January, 09 2012 00:00:00+0000 |       5 |
|  January, 10 2012 00:00:00+0000 |       5 |
|  January, 11 2012 00:00:00+0000 |       5 |
|  January, 12 2012 00:00:00+0000 |       5 |
|  January, 13 2012 00:00:00+0000 |       5 |
|  January, 14 2012 00:00:00+0000 |       5 |
|  January, 15 2012 00:00:00+0000 |       5 |
|  January, 16 2012 00:00:00+0000 |       5 |
|  January, 17 2012 00:00:00+0000 |       5 |
|  January, 18 2012 00:00:00+0000 |       5 |
|  January, 19 2012 00:00:00+0000 |       5 |
|  January, 20 2012 00:00:00+0000 |       5 |
|  January, 21 2012 00:00:00+0000 |       5 |
|  January, 22 2012 00:00:00+0000 |       5 |
|  January, 23 2012 00:00:00+0000 |       5 |
|  January, 24 2012 00:00:00+0000 |       5 |
|  January, 25 2012 00:00:00+0000 |       5 |
|  January, 26 2012 00:00:00+0000 |       5 |
|  January, 27 2012 00:00:00+0000 |       5 |
|  January, 28 2012 00:00:00+0000 |       5 |
|  January, 29 2012 00:00:00+0000 |       5 |
|  January, 30 2012 00:00:00+0000 |       5 |
|  January, 31 2012 00:00:00+0000 |       5 |
| February, 01 2012 00:00:00+0000 |       5 |
| February, 02 2012 00:00:00+0000 |       5 |
| February, 03 2012 00:00:00+0000 |       5 |
| February, 04 2012 00:00:00+0000 |       5 |
| February, 05 2012 00:00:00+0000 |       5 |
| February, 06 2012 00:00:00+0000 |       5 |
| February, 07 2012 00:00:00+0000 |       5 |
| February, 08 2012 00:00:00+0000 |       5 |
| February, 09 2012 00:00:00+0000 |       5 |
| February, 10 2012 00:00:00+0000 |       6 |
| February, 11 2012 00:00:00+0000 |       6 |
| February, 12 2012 00:00:00+0000 |       6 |
| February, 13 2012 00:00:00+0000 |       6 |
| February, 14 2012 00:00:00+0000 |       6 |
| February, 15 2012 00:00:00+0000 |       6 |
| February, 16 2012 00:00:00+0000 |       6 |
| February, 17 2012 00:00:00+0000 |       6 |
| February, 18 2012 00:00:00+0000 |       6 |
| February, 19 2012 00:00:00+0000 |       6 | 
```

# javascript - 使用元素选择器进行隐藏和单击功能的区别

> ID：13791563
> 
> 赞同：1
> 
> 时间：2012-12-09T20:37:50.870
> 
> 标签：javascript, jquery, show-hide

我无法理解为什么`$('#mdiv input')[1].hide();`不工作，同时为什么`$('#mdiv input')[1].click();`工作正常？

首先我想知道为什么？其次，如何在没有元素 id 的情况下使其工作？

[这是 JSFiddle 链接](http://jsfiddle.net/samiciit/5h5vE/2/)，看看我正在尝试什么以及我需要什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:40:56.710

那是因为您将 jQuery 对象转换为没有`hide`方法的 DOM 元素对象，您的第二个代码作为 DOM 元素对象具有`click`类似 jQuery 对象的方法。您可以改用`eq`返回 jQuery 对象的方法。

```
$('#mdiv input').eq(1).hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:49:42.927

如果您**不想**按 id 选择标签，可以使用

```
$('input[name="firstname"]')...
// or
$('input[type="text"][name="firstname"]')... 
```

# android - 如何从游标填充的微调器中获取值

> ID：13791565
> 
> 赞同：1
> 
> 时间：2012-12-09T20:38:03.967
> 
> 标签：android, database, spinner

我已经像这样填充了我的微调器：

```
DatabaseConnector dbConnector = new DatabaseConnector(this);
    dbConnector.open();
    Cursor c = dbConnector.raw("SELECT _id, nombrecasa FROM casa");
    startManagingCursor(c);
    String[] from = new String[]{"nombrecasa"};
    int[] to = new int[]{android.R.id.text1};
    SimpleCursorAdapter adapter =
    new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    casaSpinner = (Spinner) findViewById( R.id.casaspinner);
    casaSpinner.setAdapter(adapter);
    dbConnector.close();
    } 
```

当我尝试将值设为：

```
String idcasa   = casaSpinner.getSelectedItem().toString(); 
```

它只返回这个：

```
android.database.sqlite.SQLiteCursor@40539880 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:25:11.163

您的微调器已将 a`SimpleCursorAdapter`作为适配器，其数据集是 a `Cursor`。当您在微调器上选择一个项目时，您只是将光标移动到特定行，当您调用时，`getSelectedItem()`您仍在请求数据集对象 - 它仍然是一个光标对象。做你想做的事，你可以简单地打电话：

```
c.getString(1); 
```

一旦您做出选择。对于我所说的更基本的说明。

```
((Cursor) casaSpinner.getSelectedItem()).getString(1); 
```

# java - ejb 3.1 JBoss AS 7 线程池 @Asynchronous

> ID：13791566
> 
> 赞同：2
> 
> 时间：2012-12-09T20:38:06.947
> 
> 标签：java, jboss, threadpool, java-ee-6

在 Java EE 6 中，我无法控制线程池，并且在不违反规范的情况下无法创建自己的线程池（使用 java.concurrent）。

所以我的问题是，如果我通过带`@Asynchronous`注释的方法启动 10000 个线程，服务器是否会以任何方式将其排入队列，或者它是否会尝试一次全部生成（这会非常糟糕）？

或者我应该更好地使用任何特定于 jboss 的功能吗？

我还查看了基于计时器（quarz, `@Schedule`）的解决方案，这些解决方案并不完全符合我的需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:45:16.513

我将完整引用的[JBoss 社区论坛](https://community.jboss.org/message/600702)的学分：

EJB3 异步调用的线程池大小由`JBOSS_HOME/server/<servername>/deployers/jboss-ejb3-async-deployer.jar/META-INF/ejb3-async-deployer-jboss-beans.xml`文件中定义的 ExecutorService 控制：

```
 <bean name="org.jboss.ejb3.async.ExecutorService" class="org.jboss.threads.JBossScheduledThreadPoolExecutor">
    <constructor>
      <parameter>10</parameter>
    </constructor>
  </bean> 
```

如您所见，默认值为 10，但您可以更改它。

PS：谷歌是你的朋友:)。第一个结果搜索`jboss @asynchronous size`

# java - java.lang.NoSuchMethodException: org.jboss.ejb.StatelessSessionContainer.initHome()

> ID：13791567
> 
> 赞同：0
> 
> 时间：2012-12-09T20:38:12.847
> 
> 标签：java, jboss, ejb, nosuchmethoderror

我使用 JBoss 5.0.1。

我尝试部署一些 EJB 3.0 bean。

这是我在 JBoss 启动期间的日志：

```
 23:19:15,955 ERROR [AbstractKernelController] Error installing to Create: name=jboss.j2ee:jndiName=MyServiceFacadeBean/remote,service=EJB state=Configured mode=Manual requiredState=Create
java.lang.NoSuchMethodException: org.jboss.ejb.StatelessSessionContainer.initHome()
at java.lang.Class.getMethod(Class.java:1605)
at org.jboss.ejb.StatelessSessionContainer.setupHomeMapping(StatelessSessionContainer.java:132)
at org.jboss.ejb.SessionContainer.createService(SessionContainer.java:168)
at org.jboss.system.ServiceMBeanSupport.jbossInternalCreate(ServiceMBeanSupport.java:344)
at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:320)
at sun.reflect.GeneratedMethodAccessor107.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:189)
at $Proxy36.create(Unknown Source) 
```

似乎 Jboss 所需类的版本不正确，或者我使用一些旧/新代码进行 EJB 部署。

请不要告诉使用不同的 JBoss 版本或更改我的**ejb-jar.xml**我只是想了解在哪里可以找到此类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:42:31.460

问题是您没有使用一个版本的 JBoss。如果你是这将不会发生。问题是您正在使用两个不同且不兼容的 JBoss 库，当一个调用另一个时，您会收到此错误。

只要确保您拥有一个版本的 JBoss。

# html - 指定 HTML5 本地存储项的默认值？

> ID：13791569
> 
> 赞同：26
> 
> 时间：2012-12-09T20:38:18.390
> 
> 标签：html, local-storage

如果您尝试获取不存在的本地存储项目，是否可以为该项目设置默认值？

例如，假设在您的 Web 应用程序中，各种 UI 首选项保存在本地存储中。当用户离开您的网站然后返回时，UI 会根据从其本地存储中提取的值进行设置。这很好用。

但是，当用户第一次访问您的 Web 应用程序时，这些本地存储值还不存在。因此，当您的 JavaScript 尝试获取这些本地存储项时，它们都将是未定义的。在不存在的情况下，是否没有办法为每个本地存储项指定默认值？

大多数处理保存键/值对的编程语言都提供了某种方式来指定默认值（想想 .ini 配置文件接口）。我期待这样的事情：

```
var preference = localStorage.getItem('some-key', 'Default Value'); 
```

另外，我知道我可以通过测试它们是否为空/未定义并相应地设置值来轻松地以编程方式设置默认值，但我想看看这是否内置在本地存储键/值对获取中，也许我只是没看到。如果这个特性不存在，我最终会写一些基本的本地存储包装函数来添加这个特性。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-09T20:41:20.993

不，没有这样的内置功能。请参阅[`Storage`接口](http://www.w3.org/TR/webstorage/#the-storage-interface)规范：

```
interface Storage {
  readonly attribute unsigned long length;
  DOMString? key(unsigned long index);
  getter DOMString getItem(DOMString key);
  setter creator void setItem(DOMString key, DOMString value);
  deleter void removeItem(DOMString key);
  void clear();
}; 
```

以下行只是为了进一步确认：

> 该`getItem(key)`方法必须返回与给定键关联的当前值。如果与对象关联的列表中不存在给定键，则**此方法必须返回 null**。

您可以使用通常的技术。这样的事情应该没问题：

```
var preference = localStorage.getItem('some-key') || 'Default Value'; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-15T21:06:42.330

詹姆斯的解决方案：

```
var preference = localStorage.getItem('some-key') || 'Default Value'; 
```

仅当您从不保存空字符串或布尔值或您的变量可以为 0 时才有效。

更长但始终有效的解决方案：

```
var preference = localStorage.getItem('some-key');
if(null === preference)
{
    preference = 'Default Value';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-05T09:19:58.347

您可以将此方法用于对象

```
/*
Helper function that return an object from local storage or a default value
*/
function getObjectFromLocalstorage(key, default_value){
  var value = localStorage.getItem(key);
  if (value === null){
    return default_value;
  }
  return JSON.parse(value);
} 
```

以下是一些示例输出：

```
console.log(getObjectFromLocalstorage("some_undefined_key", {}));
>>> {}

console.log(getObjectFromLocalstorage("some_undefined_key", []));
>>> []

var value = {a: 1}; 
localStorage.setItem("defined_key", JSON.stringify(value));
getObjectFromLocalstorage("defined_key", {});
>>> {a: 1} 
```

# delphi - delphi如何显示进度条？

> ID：13791571
> 
> 赞同：0
> 
> 时间：2012-12-09T20:38:19.930
> 
> 标签：delphi, progress-bar, delphi-7

> **可能重复：**
> [如何显示进度条？](https://stackoverflow.com/questions/13790917/how-to-display-progress-bar)

我创建了一个 steganalisys 应用程序，我想添加一个进度条来显示该过程的工作时间。

```
procedure TForm2.Button2Click(Sender: TObject);
var
   q,x,y,leastSigBit,currentPixel,newPixelValue: integer;
   pixels: PByteArray;
   bmp: TBitmap;
  begin

   memo1.lines.clear;
   Image2.Picture.Assign(Image1.Picture.Bitmap);
   bmp := Image2.Picture.Bitmap;

   for y := 0 to bmp.Height-1 do
   begin
      pixels := bmp.ScanLine[y];
      for x := 0 to bmp.Width-1 do
      begin
         currentPixel := pixels[x];
         leastSigBit := getBit(currentPixel, 0);
         newPixelValue:=setBit(newPixelValue ,7,leastSigBit);
         newPixelValue:=setBit(newPixelValue ,6,leastSigBit);
         newPixelValue:=setBit(newPixelValue ,5,leastSigBit);
         newPixelValue:=setBit(newPixelValue ,4,leastSigBit);
         newPixelValue:=setBit(newPixelValue ,3,leastSigBit);
         newPixelValue:=setBit(newPixelValue ,2,leastSigBit);
         newPixelValue:=setBit(newPixelValue ,1,leastSigBit);
         newPixelValue:=setBit(newPixelValue ,0,leastSigBit);
        end;

         pixels[x] := newPixelValue;
         memo1.lines.append('pixel ke ' + inttostr(x) + ',' + inttostr(y) + ' desimal ' + inttostr(currentPixel) + ' (biner ' + toBinary(currentPixel) + ') ' +
         ' desimal baru ' + inttostr(newPixelValue) + ' (biner ' + toBinary(newPixelValue) + ')');
        end;
   end;
   memo1.lines.append('All done!');
   Button4.Enabled:=True;
   Button2.Enabled:=False;
   Button1.Enabled:=False;
   Button5.Enabled:=True;
        end; 
```

如何为该过程制作进度条？我必须把命令进度条放在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:49:24.110

做这样的事情的正确方法是在后台线程中进行计算。否则，您的 GUI 将冻结，并且您可能无法添加`Abort`按钮。因此，您必须学习如何使用线程（例如`TThread`）来正确执行此操作。然后你的代码必须是线程安全的，你应该只在线程代码和 GUI 之间以安全的方式进行通信，例如使用消息。主要思想见[我之前的回答](https://stackoverflow.com/questions/13790917/how-to-display-progress-bar)。

总之，如果你是出于教育目的或私人需要，或许上面提到的问题并没有那么严重。然后你可以像这样简单地做：

```
procedure TForm2.Button2Click(Sender: TObject);
var
  ...
begin

  ProgressBar1.Min := 0;
  ProgressBar1.Max := bmp.Height;
  ProgressBar1.Position := 0;
  ProgressBar1.Step := 1;

  for y := 0 to bmp.Height-1 do
  begin

    for x := 0 to bmp.Width-1 do
    begin
    end;

    ProgressBar1.StepIt;
    ProgressBar1.Update;

  end;

end; 
```

要尝试此操作，请创建一个新的 VCL 项目。添加一个`TProgressBar`和一个`TButton`。在`OnClick`按钮的情况下，添加以下代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  i, j: integer;
begin
  ProgressBar1.Min := 0;
  ProgressBar1.Max := 100;
  ProgressBar1.Position := 0;
  ProgressBar1.Step := 1;

  for i := 0 to 99 do
  begin

    for j := 0 to 200 do
    begin
      sleep(1);
    end;

    ProgressBar1.StepIt;
    ProgressBar1.Update;

  end;
end; 
```

但是，请务必注意这种方法的最重要的背面。应用程序在整个“计算”期间冻结。您甚至可能无法移动应用程序窗口，而且您肯定无法与其 GUI 交互。Windows 甚至可能报告程序已冻结，并为您提供终止它并发送错误报告的选项...最后，由于整个 GUI 已关闭，因此无法添加“停止计算”按钮。解决方案？肮脏的一个是使用`ProcessMessages`和其他肮脏的伎俩。如前所述，正确的做法是将计算放在自己的线程中。

# intellij-idea - 在 IntelliJ 中为 Scala 项目设置 Javadoc

> ID：13791572
> 
> 赞同：3
> 
> 时间：2012-12-09T20:38:28.620
> 
> 标签：intellij-idea, javadoc, scaladoc

设置我的 Scaladoc 后，我发现 IDE 中仍然缺少一些文档

在我看来（非常感谢[彼得](https://stackoverflow.com/users/57695/peter-lawrey)注意到这一点）：

*   非粗体的函数没有文档
*   加粗字体的函数有最低限度
*   带下划线的函数有完整的文档

**没有文档（正常的非粗体字体）** ![在此处输入图像描述](../Images/949e4883ea808a9c5aec6861814641d4.png)

**最低限度的文档（粗体）** ![在此处输入图像描述](../Images/2e6cab093504d05adbcf19f03d682309.png)

**完整的文档（下划线）** ![在此处输入图像描述](../Images/c2ccfeb43a93993d0286ac38486e7777.png)

作为记录，我的scaladoc安装如下

```
doc
├── scala-devel-docs
│   └── api
│       ├── index
│       ├── lib
│       └── scala
│           ├── actors
│           │   ├── remote
│           │   └── scheduler
│           ├── annotation
│           │   ├── meta
│           │   └── unchecked 
```

并且配置如下：

![在此处输入图像描述](../Images/184e515072be5eca7506fd10c21f852b.png)

## 编辑：

[从Oracle](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载 Javadoc并放入`/Library/Scala/2.10.0-RC2/doc/javadoc`

```
javadoc/api
├── index-files
├── java
│   ├── applet
│   │   └── class-use
│   ├── awt
│   │   ├── class-use
│   │   ├── color
│   │   │   └── class-use
│   │   ├── datatransfer
│   │   │   └── class-use 
```

向 IDEA 添加了 1 个条目：

![在此处输入图像描述](../Images/b04445d677d51d30b424b1efed6b7090.png)

似乎没有帮助。

**请说清楚**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:00:01.877

您还应该安装 Javadocs - 这些大胆的方法实际上有大量文档，因为它们来自 Java。关于突出显示的含义，我已经在您的另一个线程上回答了。

要添加 JavaDocs，请看下图：![IDEA 12 配置的快照](../Images/9a545f4137002aeb1d46cb6db65cb02a.png).

从您的快照中，我很想猜测您将它们添加到同一个库的 ScalaDocs 旁边。但是，JavaDocs/ScalaDocs 与特定的库相关联，因此您应该撤消您所做的步骤 - IDEA 只会在您指定的路径中查找 Scala 库类的文档。图片显示在“项目结构”对话框中，您需要转到 SDK，选择您正在使用的 Java SDK，转到文档路径并按下底部的“+”按钮之一。图片显示如何添加到 Internet 文档的链接，但使用另一个“+”按钮可以添加您下载的本地文档（访问速度会更快）。您指定的路径似乎正确。

# c# - C# 恒定流 pop3

> ID：13791573
> 
> 赞同：2
> 
> 时间：2012-12-09T20:38:30.823
> 
> 标签：c#, c#-4.0, pop3

好的，所以我遇到了一个问题，我认为我用一个蹩脚的钻机解决了这个问题，但从长远来看它失败了，所以我来问你们正确的方法。这是我遇到的问题，我正在制作一个应用程序以通过 POP3（使用 ActiveUp api）过滤掉某种类型的电子邮件，但我需要它与 POP3 服务器保持持续连接......这就是我所拥有的马上：

```
public static void Main (string[] args) 
    {
        while(true)
        {           
            POP3();
            Console.Title = "Waiting for "+GetSubject+POST;
            Thread.Sleep(5000);
        }
    }
    public static void POP3()
    {
        Pop3Client pop3 = new Pop3Client();
        try
        {
            pop3.ConnectSsl("pop.gmail.com",995,"", "");
            if(pop3.MessageCount > 0)
            {
                int CurrentMessage = pop3.MessageCount;
                ActiveUp.Net.Mail.Message message = pop3.RetrieveMessageObject(CurrentMessage);
                if(message.Subject == GetSubject+POST)
                {
                Console.WriteLine("command reconized from {0}: {1}\n Sending responce now!",message.From.Email, message.Subject);
                SMTP (message.From.Email, _message);
                POST++;
                pop3.Close();
                }
            }
            else
            {
                Console.WriteLine("no mail found"); 
            }
        }
        catch(Pop3Exception iex)
        {
            Console.WriteLine(iex); 
            pop3.Close();
        }
    } 
```

一切都很完美，直到它运行大约 10 到 20 分钟我被踢出谷歌的 POP3 服务器并不得不重新启动应用程序......我现在运行应用程序并重新编辑我的错误问题......但在那之前你们可以请帮我？谢谢！

错误：

```
nhandled Exception: System.Net.Sockets.SocketException: No such host is known
  at System.Net.Dns.hostent_to_IPHostEntry (System.String h_name, System.String[] h_aliases, System.String[] h_addrlist) [0x00000] in <filename unknown>:0 
  at System.Net.Dns.GetHostByName (System.String hostName) [0x00000] in <filename unknown>:0 
  at System.Net.Dns.GetHostEntry (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0 
  at System.Net.Dns.GetHostAddresses (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0 
  at System.Net.Sockets.TcpClient.Connect (System.String hostname, Int32 port) [0x00000] in <filename unknown>:0 
  at ActiveUp.Net.Mail.Pop3Client.ConnectSsl (System.String host, Int32 port, System.String user, System.String pass, ActiveUp.Net.Security.SslHandShake sslHandShake) [0x00000] in <filename unknown>:0 
  at ActiveUp.Net.Mail.Pop3Client.ConnectSsl (System.String host, Int32 port, System.String user, System.String pass) [0x00000] in <filename unknown>:0 
  at AutoThreadOwnerCopy.MainClass.POP3 () [0x00006] in /home/m44m31/AutoThreadOwnerCopy/AutoThreadOwnerCopy/Main.cs:35 
  at AutoThreadOwnerCopy.MainClass.Main (System.String[] args) [0x00019] in /home/m44m31/AutoThreadOwnerCopy/AutoThreadOwnerCopy/Main.cs:25 
[ERROR] FATAL UNHANDLED EXCEPTION: System.Net.Sockets.SocketException: No such host is known
  at System.Net.Dns.hostent_to_IPHostEntry (System.String h_name, System.String[] h_aliases, System.String[] h_addrlist) [0x00000] in <filename unknown>:0 
  at System.Net.Dns.GetHostByName (System.String hostName) [0x00000] in <filename unknown>:0 
  at System.Net.Dns.GetHostEntry (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0 
  at System.Net.Dns.GetHostAddresses (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0 
  at System.Net.Sockets.TcpClient.Connect (System.String hostname, Int32 port) [0x00000] in <filename unknown>:0 
  at ActiveUp.Net.Mail.Pop3Client.ConnectSsl (System.String host, Int32 port, System.String user, System.String pass, ActiveUp.Net.Security.SslHandShake sslHandShake) [0x00000] in <filename unknown>:0 
  at ActiveUp.Net.Mail.Pop3Client.ConnectSsl (System.String host, Int32 port, System.String user, System.String pass) [0x00000] in <filename unknown>:0 
  at AutoThreadOwnerCopy.MainClass.POP3 () [0x00006] in /home/m44m31/AutoThreadOwnerCopy/AutoThreadOwnerCopy/Main.cs:35 
  at AutoThreadOwnerCopy.MainClass.Main (System.String[] args) [0x00019] in /home/m44m31/AutoThreadOwnerCopy/AutoThreadOwnerCopy/Main.cs:25 
```

# android - 在代码中更改 Android 2.2 LinearLayout 中的高度

> ID：13791575
> 
> 赞同：0
> 
> 时间：2012-12-09T20:38:52.913
> 
> 标签：android, layout, height

我试图通过代码更改布局的高度但没有成功。我已经尝试了我在这里和其他网站看到的所有示例，我的应用程序一直在关闭。

```
xml code:

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/main_lay"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<LinearLayout 
    android:id="@+id/layout_add"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
   >   
</LinearLayout>

<LinearLayout 
     android:layout_width="fill_parent"
     android:layout_height="50dp"
     android:background="@color/green">

    <ImageView
       android:layout_width="fill_parent"
       android:contentDescription="@string/desc"
       android:layout_height="45dp"
       android:layout_gravity="center_vertical|left"
       android:scaleType="fitStart"
       android:background="@color/orange"
       android:src="@drawable/logo"
       >
    </ImageView>

</LinearLayout>
</LinearLayout>

Java code:
main_layout=(LinearLayout)findViewById(R.id.main_lay);
main_layout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
main_layout.setBackgroundResource(R.color.white);

layout_add = (LinearLayout) findViewById(R.id.layout_add);
layout_add.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.FILL_PARENT,50 ));
layout_add.setBackgroundResource(R.color.dark_grey); 
```

我无法理解我做错了什么。我尝试了不同的方法来修复它。背景设置工作正常。谢谢你们尼罗

这是日志猫

```
12-09 16:12:39.007: E/AnalyticsSDKTest.cpp(6338): Time w/ UTC Offset: 2012-12-09   
12-09 16:16:14.517: E/ActivityManager(121): fail to set top app changed!
12-09 16:16:14.547: E/InputDispatcher(121): channel '4056b9c8  com.nirosadvice.converter/com.nirosadvice.converter.MainActivity (server)' ~ Consumer      closed input channel or an error occurred.  events=0x8
12-09 16:16:14.547: E/InputDispatcher(121): channel '4056b9c8 com.nirosadvice.converter/com.nirosadvice.converter.MainActivity (server)' ~ Channel is  unrecoverably broken and will be disposed!
12-09 16:16:18.071: E/PVWmdrmProxy(5716): binder died for component: ComponentInfo{com.pv.wmdrmservice/com.pv.wmdrmservice.PVWmdrmService}
12-09 16:16:18.161: E/AndroidRuntime(18911): FATAL EXCEPTION: main
12-09 16:16:18.161: E/AndroidRuntime(18911): java.lang.RuntimeException: Unable to   start activity    ComponentInfo{com.nirosadvice.converter/com.nirosadvice.converter.MainActivity}:    java.lang.RuntimeException: Binary XML file line #1: You must supply a layout_width attribute.
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1821)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.os.Looper.loop(Looper.java:150)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.ActivityThread.main(ActivityThread.java:4263)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at java.lang.reflect.Method.invoke(Method.java:507)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at dalvik.system.NativeStart.main(Native Method)
12-09 16:16:18.161: E/AndroidRuntime(18911): Caused by: java.lang.RuntimeException: Binary XML file line #1: You must supply a layout_width attribute.
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:3684)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:3764)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.widget.FrameLayout$LayoutParams.<init>(FrameLayout.java:457)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.widget.FrameLayout.generateLayoutParams(FrameLayout.java:423)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.widget.FrameLayout.generateLayoutParams(FrameLayout.java:47)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:231)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.Activity.setContentView(Activity.java:1715)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at com.nirosadvice.converter.MainActivity.onCreate(MainActivity.java:87)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
12-09 16:16:18.161: E/AndroidRuntime(18911):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
12-09 16:16:18.161: E/AndroidRuntime(18911):    ... 11 more 
```

谢谢

在我将属性添加到 XML 之后 - 这就是我得到的：

```
CatLog:
12-09 16:42:33.168: E/AndroidRuntime(19065): FATAL EXCEPTION: main
12-09 16:42:33.168: E/AndroidRuntime(19065): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:360)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.view.View.measure(View.java:8526)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.view.View.measure(View.java:8526)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.view.View.measure(View.java:8526)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.view.ViewRoot.performTraversals(ViewRoot.java:902)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.os.Looper.loop(Looper.java:150)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at android.app.ActivityThread.main(ActivityThread.java:4263)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at java.lang.reflect.Method.invoke(Method.java:507)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 16:42:33.168: E/AndroidRuntime(19065):    at dalvik.system.NativeStart.main(Native Method)
12-09 16:42:39.023: E/AnalyticsSDKTest.cpp(6338): Time w/ UTC Offset: 2012-12-09 21:42:39-05:00
12-09 16:42:49.013: E/AndroidRuntime(19095): FATAL EXCEPTION: main
12-09 16:42:49.013: E/AndroidRuntime(19095): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:360)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.view.View.measure(View.java:8526)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.view.View.measure(View.java:8526)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.view.View.measure(View.java:8526)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.view.ViewRoot.performTraversals(ViewRoot.java:902)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.os.Looper.loop(Looper.java:150)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at android.app.ActivityThread.main(ActivityThread.java:4263)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at java.lang.reflect.Method.invoke(Method.java:507)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 16:42:49.013: E/AndroidRuntime(19095):    at dalvik.system.NativeStart.main(Native Method)
12-09 16:44:00.913: E/AndroidRuntime(19148): FATAL EXCEPTION: main
12-09 16:44:00.913: E/AndroidRuntime(19148): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:360)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.view.View.measure(View.java:8526)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.view.View.measure(View.java:8526)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.view.View.measure(View.java:8526)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.view.ViewRoot.performTraversals(ViewRoot.java:902)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.os.Looper.loop(Looper.java:150)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at android.app.ActivityThread.main(ActivityThread.java:4263)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at java.lang.reflect.Method.invoke(Method.java:507)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 16:44:00.913: E/AndroidRuntime(19148):    at dalvik.system.NativeStart.main(Native Method)
12-09 16:44:02.935: E/InputDispatcher(121): channel '4056b9c8 com.nirosadvice.converter/com.nirosadvice.converter.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
12-09 16:44:02.935: E/InputDispatcher(121): channel '4056b9c8 com.nirosadvice.converter/com.nirosadvice.converter.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
12-09 16:45:25.075: E/AndroidRuntime(19210): FATAL EXCEPTION: main
12-09 16:45:25.075: E/AndroidRuntime(19210): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:360)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.view.View.measure(View.java:8526)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.view.View.measure(View.java:8526)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.view.View.measure(View.java:8526)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.view.ViewRoot.performTraversals(ViewRoot.java:902)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.os.Looper.loop(Looper.java:150)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at android.app.ActivityThread.main(ActivityThread.java:4263)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at java.lang.reflect.Method.invoke(Method.java:507)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 16:45:25.075: E/AndroidRuntime(19210):    at dalvik.system.NativeStart.main(Native Method)
12-09 16:50:34.507: E/AndroidRuntime(19358): FATAL EXCEPTION: main
12-09 16:50:34.507: E/AndroidRuntime(19358): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:360)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.view.View.measure(View.java:8526)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.view.View.measure(View.java:8526)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.view.View.measure(View.java:8526)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.view.ViewRoot.performTraversals(ViewRoot.java:902)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.os.Looper.loop(Looper.java:150)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at android.app.ActivityThread.main(ActivityThread.java:4263)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at java.lang.reflect.Method.invoke(Method.java:507)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 16:50:34.507: E/AndroidRuntime(19358):    at dalvik.system.NativeStart.main(Native Method) 
```

第三次尝试 - 将 Frame 更改为 Linear 后：

```
12-09 17:42:39.076: E/AnalyticsSDKTest.cpp(6338): Time w/ UTC Offset: 2012-12-09   22:42:39-05:00
12-09 17:55:44.141: E/ActivityManager(121): Fix ANR:broadcast when App died
12-09 17:55:44.722: E/AndroidRuntime(19469): FATAL EXCEPTION: main
12-09 17:55:44.722: E/AndroidRuntime(19469): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:360)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.view.View.measure(View.java:8526)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.view.View.measure(View.java:8526)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.view.View.measure(View.java:8526)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.view.ViewRoot.performTraversals(ViewRoot.java:902)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.os.Looper.loop(Looper.java:150)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at android.app.ActivityThread.main(ActivityThread.java:4263)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at java.lang.reflect.Method.invoke(Method.java:507)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 17:55:44.722: E/AndroidRuntime(19469):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:30:00.690

你应该尝试给你的`layout_add`线性布局 layout_width 和 layout_height。我不确定这是不是问题，但是日志猫的这一行让我觉得可能是

```
Caused by: java.lang.RuntimeException: Binary XML file line #1: You must supply a layout_width attribute. 
```

你得到的第二个错误看起来好像正在发生，因为这个

```
main_layout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT)); 
```

应该是这个

```
main_layout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:30:10.313

即使您计划稍后在代码中覆盖它们，您也需要在 XML 中为您的所有 LinearLayouts（以及通常的所有 Views 和 ViewGroups）提供一个`layout_width`和一个属性。`layout_height`

# servlets - 映射在 /* 上的 Servlet 过滤器导致浏览器错误“服务器正在以永远不会完成的方式重定向对该地址的请求”

> ID：13791577
> 
> 赞同：1
> 
> 时间：2012-12-09T20:39:08.620
> 
> 标签：servlets, redirect, browser, servlet-filters

我正在开发一个动态 JSP/Servlet Web 应用程序。为了处理会话，我使用了一个映射`/*`在`web.xml`. 当我在 Firefox 中打开一个页面时，它会给出以下 Firefox 特定的错误消息：

> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求

Chrome 中显示了类似的错误。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:15:45.733

您的过滤器正在重定向到一个 URL，该 URL 再次以相同的条件调用相同的过滤器，从而导致新的重定向等。您的过滤器基本上是在无限循环中重定向到自身。Web 浏览器在大约 20 个请求后阻止了无限循环，以将最终用户从设计不良的 Web 应用程序中拯救出来。

您需要相应地修复您的过滤器，使其在已经执行时不执行重定向。让我们假设一个登录过滤器的基本真实世界示例，它映射到`/*`当用户未登录时，该过滤器应重定向到登录页面，该登录页面由`user`会话中的属性标识。如果当前请求登录页面本身，您显然希望过滤器不应该重定向到登录页面。

```
@WebFilter("/*")
public class LoginFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);
        String loginURL = request.getContextPath() + "/login.jsp";

        boolean loggedIn = session != null && session.getAttribute("user") != null;
        boolean loginRequest = request.getRequestURI().equals(loginURL);

        if (loggedIn || loginRequest) {
            chain.doFilter(request, response); // Logged-in user found or already in login page, so just continue request.
        } else {
            response.sendRedirect(loginURL); // No logged-in user found and not already in login page, so redirect to login page.
        }
    }

    // ...
} 
```

你看，如果你想允许/继续一个请求，只需调用`chain.doFilter()`而不是`response.sendRedirect()`. 仅当您想将请求更改到其他目的地时才使用重定向。

# ubuntu - 运行 rake run:android (Rhomobile) 时出现错误，说明 rm_f 对于 AndroidTools::Module 未定义

> ID：13791578
> 
> 赞同：0
> 
> 时间：2012-12-09T20:39:15.760
> 
> 标签：ubuntu, android-emulator, rhomobile, linux-mint

我已经重新安装了两次操作系统并进行了大约 10 个小时的调试。我很茫然。

我正在运行 Linux Mint 14（基本上是 Ubuntu）并且在运行 32 位和 64 位时遇到了同样的问题。

我从 64 位开始，在安装 32 位库之后，我遇到了与现在使用 32 位时完全相同的错误。

我已经在以前编写的源（几个月前工作）上运行了该脚本，并且我还在一个虚拟源上运行了它（只是运行`rhogen store`然后将其提供给 rake 命令）。

如果我搜索此错误，Google 上实际上只有一个结果，即[我在 rhomobile Google group 上的帖子](https://groups.google.com/forum/?fromgroups=#!topic/rhomobile/gdyfRdHeK78)。由于这还没有产生任何结果，我想我会在这里重新询问，看看是否有人有任何见解。

为了完整起见，[这](http://varuagdiary.blogspot.com/2011/05/setting-up-rhodes-on-ubuntu-1004.html)是我用于正确安装 Rhodes 的指南。（官方文档太可怕了！）

这是失败的堆栈跟踪`rake run:android`：

```
rm -rf /media/radnadz/Methuselah/Programming/Rhodes/store/bin/target/android/store-tmp.apk
** Execute run:android:emulator
rake aborted!
undefined method `rm_f' for AndroidTools:Module
/var/lib/gems/1.9.1/gems/rhodes-3.5.1.12/platform/android/build/android_tools.rb:211:in `run_emulator'
/var/lib/gems/1.9.1/gems/rhodes-3.5.1.12/platform/android/build/android.rake:1971:in `block (3 levels) in <top (required)>'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/var/lib/gems/1.9.1/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>'
Tasks: TOP => run:android:emulator 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:32:43.250

答案非常简单（如果你知道在哪里看的话）。

正如堆栈跟踪所暗示的那样，问题出在 211 行`/var/lib/gems/1.9.1/gems/rhodes-3.5.1.12/platform/android/build/android_tools.rb`。

如果您将行从 更改`rm_f $applog_path if !$applog_path.nil?`为`FileUtils.rm_f $applog_path if !$applog_path.nil?`则问题已解决。

感谢 rhomobile Google Group 的 Alexey 提供的解决方案！

# .net - 是否可以查看 Visual Studio 运行以构建解决方案或项目的脚本？

> ID：13791579
> 
> 赞同：2
> 
> 时间：2012-12-09T20:39:17.480
> 
> 标签：.net, visual-studio, msbuild

我正在尝试编写一个脚本，在启用了 nuget 恢复的解决方案中为 MVC 项目创建部署包。当我手动编写它时，如果失败并出现不同的错误。但是当我尝试使用 Visual Studio 2012（我单击“发布”并选择“文件系统”）时，它工作得很好，所以我可以看看 VS 是如何构建它的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:56:18.247

增加 MSBuild 的详细程度：

## 通过命令行：

```
msbuild myproject.csproj /v:diag > build.log 
```

*或者 -*

## 在 Visual Studio 中：

工具 > 选项 > 项目和解决方案 > 构建和运行：

![MSBuild 详细程度](../Images/da34db97ff7d4cb3f45544419fcb9a0b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:28:36.700

将构建输出重定向到日志文件并定义所需的详细程度：

msbuild buildFile.msbuild /fileLogger /fileLoggerParameters:LogFile=LogFile.log;Verbosity=Diagnostic;Encoding=UTF-8

[详细类型](http://social.msdn.microsoft.com/Forums/eu/msbuild/thread/43b87c20-f81a-4858-8a0f-7f4d1878f32f)：

**安静**：仅显示您的 msbuild 的结果。

**最小**：显示您的 msbuild 和 CSC 任务的一些配置。

**normal**：这将显示所有目标及其主要步骤。

**详细**：除了正常之外，此目标还显示任务及其在每个目标中的实现。

**诊断**：包含一个MSBuild需要和产生的所有信息，开关、参数、前提条件等。目标和任务的输入参数，还包含输入和输出参数的值，任务执行的详细步骤. 每个任务的执行时间。

# asp.net-mvc-4 - 返回值类型时，ASP.NET Web API 中的 JSON 结果问题？

> ID：13791581
> 
> 赞同：1
> 
> 时间：2012-12-09T20:39:21.897
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在学习 aspnet mvc 4 web api，并且发现它很容易通过简单地返回 apicontrollers 中的对象来实现。

但是，当我尝试返回 bool、int、string 等值类型时，它根本不会以 JSON 格式返回。（在 Fiddler 中，它在 raw 和 webview 中显示“真/假”结果，但在 JSON 中根本没有内容。

任何人都可以帮助我吗？

谢谢。

TestApiController 的一些示例代码：

```
public bool IsAuthenticated(string username)
{
    return false;
} 
```

jQuery 用法的一些示例代码：

```
function isAuthenticated(string username){
        $.getJSON(OEliteAPIs.ApiUrl + "/api/membership/isauthenticated?username="+username,
            function (data) {
                alert(data);
                if (data)
                    return true;
                else
                    return false;
            });
} 
```

注意：上面的 jquery 没有返回任何内容，因为返回了 EMPTY 内容 - 但是，如果您在 fiddler 中检查它，您实际上可以看到在 webview 中返回“false”。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:33:05.500

在您的回调函数被调用之前，返回数据被传递给 jquery [parseJSON](http://api.jquery.com/jQuery.parseJSON/)方法，该方法期望数据为 JSON 格式。如果响应格式不正确，jQuery 将忽略响应数据并返回 null。您有两个选择，将返回布尔值包装在类或匿名类型中，以便 web api 将返回 JSON 对象：

```
return new { isAuthentication = result } 
```

或者不要使用 jQuery 中的 getJSON，因为您没有返回格式正确的 JSON 响应。也许只是使用[$.get](http://api.jquery.com/jQuery.get/)代替。

下面是对 jQuery 文档的引用：

> 重要提示：从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败。因此，请避免频繁手动编辑 JSON 数据。JSON 是一种数据交换格式，其语法规则比 JavaScript 的对象文字表示法更严格。例如，在 JSON 中表示的所有字符串，无论是属性还是值，都必须用双引号括起来。有关 JSON 格式的详细信息，请参阅[http://json.org/](http://json.org/)。

# iphone - CGAffineTransformMakeRotation 总是逆时针

> ID：13791582
> 
> 赞同：8
> 
> 时间：2012-12-09T20:39:36.107
> 
> 标签：iphone, ios, xcode, ipad

当用户触摸它并在其上顺时针方向移动手指时，我试图使 a`UIImageView`逆时针旋转。
基本上，一旦触摸结束，我希望 UIImageView 回到其原始位置，并且它应该以逆时针方向移动。

我遇到的问题是，每次角度（以度为单位）大于 180 时，图像都会顺时针旋转回其原始位置。它显然采取了最短的路径。至于 179 度或更小的角度，图像逆时针旋转（我需要）。

我尝试了这两段代码，它们的行为方式相同。有什么建议么？

注意：这里的角度变量是双精度的，它的初始化为零，并且在我的代码中保持为 0

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [self handleObject:touches withEvent:event isLast:YES];

    /* this doesn't make rotation counter clockwise for rotations greater than 180 */
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationCurve: UIViewAnimationCurveLinear];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationRepeatCount:1]; 
    CGAffineTransform transform = CGAffineTransformMakeRotation(angle);
    circle1ImgVw.transform = CGAffineTransformRotate(transform, angle);
    // ends animation
    [UIView commitAnimations];

    /* this doesn't make rotation counter clockwise for rotations greater than 180 */
    [UIView animateWithDuration:1.0 animations:^{
            circle1ImgVw.transform = CGAffineTransformMakeRotation(angle);
        }];
} 
```

我尝试查看[这篇文章](https://stackoverflow.com/questions/1149635/how-can-i-enforce-an-specific-direction-i-e-clockwise-of-rotation-in-core-ani)，但有几个问题

*   动画完成后我无法再触摸和旋转图像
*   它总是以顺时针方向动画，我无法弄清楚如何让它从用户结束旋转图像的点顺时针顺时针旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:52:20.530

我有一个类似的问题，检查接受的答案，它可能会帮助你：

[将 UIView 顺时针旋转大于 180 度的角度](https://stackoverflow.com/questions/12825356/rotate-a-uiview-clockwise-for-an-angle-greater-than-180-degrees)

* * *

作为对评论的回应，也许这会有所帮助：

在我的代码中，我实际使用

```
rotationAnimation.fromValue
rotationAnimation.toValue 
```

代替

```
rotationAnimation.byValue. 
```

如果 toValue 小于 fromValue，则旋转总是逆时针方向。你的价值观是正面的还是负面的并不重要，重要的是它们之间的关系。

弄清楚你的起始角度是什么，弄清楚你想要旋转的方向并弄清楚你的结束角度是什么。如果你想逆时针走，请确保它小于你的起始角度。这是我用于从 12:00 到当前时间顺时针设置时钟指针的代码。

```
-(void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self updateClockArmAngle];
}

- (void)updateClockArmAngle
{
    // Get the time
    NSDate *date = [NSDate date];
    NSCalendar* calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
    [calendar setTimeZone:[NSTimeZone timeZoneWithName:@"America/Toronto"]];
    NSDateComponents* components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:date];

    CGFloat hour = [components hour];
    CGFloat angle = (hour/24.0)*(2*M_PI);

    CGFloat minute = [components minute];
    angle += (minute/(24*60))*(2*M_PI);

    [self rotateViewAnimated:self.clockArm withDuration:1.5 byAngle:angle];
}

- (void) rotateViewAnimated:(UIView*)view
               withDuration:(CFTimeInterval)duration
                    byAngle:(CGFloat)angle
{    
    CABasicAnimation *rotationAnimation;
    rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.fromValue = 0;
    rotationAnimation.toValue = [NSNumber numberWithFloat:angle];
    rotationAnimation.duration = duration;
    rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [rotationAnimation setRemovedOnCompletion:NO];
    [rotationAnimation setFillMode:kCAFillModeForwards];
    [view.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:48:22.987

我使用的技术是将旋转角度除以 2 并将旋转分成两个单独的动画，`completion:`由`animateWithDuration:delay:options:animations:completion:`. 但是，由于视图已旋转到其当前位置，您需要从该位置开始并“不旋转”回零，而不是尝试从零旋转 CCW。

# python - tkinter 中的 AttributeError

> ID：13791583
> 
> 赞同：5
> 
> 时间：2012-12-09T20:39:38.753
> 
> 标签：python, tkinter

我正在尝试用 tkinter 编写一个程序。我还没有完成该程序，但试图运行它只是为了看看我的窗口会是什么样子，我在 tkinter 中得到一个错误。

我不知道现在该怎么办。有谁知道这是怎么回事？

这是消息

```
Traceback (most recent call last):
  File "<string>", line 420, in run_nodebug
  File "<module1>", line 53, in <module>
  File "<module1>", line 50, in main
  File "<module1>", line 23, in __init__
  File "C:\Python33\lib\tkinter\__init__.py", line 2110, in __init__
    Widget.__init__(self, master, 'button', cnf, kw)
  File "C:\Python33\lib\tkinter\__init__.py", line 2036, in __init__
    classes = [(k, v) for k, v in cnf.items() if isinstance(k, type)]
AttributeError: 'str' object has no attribute 'items'

import tkinter
import tkinter.messagebox

#---------------------- define GUI class
class CalcMPG:
    def __init__(self):
        self.main_window = tkinter.Tk()

        #-------------- create 3 frames ---------
        self.uframe= tkinter.Frame(self.main_window) #upper frame
        self.mframe= tkinter.Frame(self.main_window) #middle frame
        self.bframe= tkinter.Frame(self.main_window) #button frame

        #------------ create the 3 label widgets ------------
        self.lblgal= tkinter.Label(self.uframe, text="Enter # of gallons used")
        self.lblmiles= tkinter.Label(self.mframe, text="Enter miles travelled")

        #------------ create the 2 Entry widgets ------------
        self.entgal= tkinter.Entry(self.uframe, width=10)
        self.entmiles= tkinter.Entry(self.mframe, width=10)

        #------------ create the 2 Button widgets -----------
        self.mpgbtn = tkinter.Button(self.bframe, "Calcualte MPG")
        self.extbtn = tkinter.Button(self.bframe, "Exit")

        #-------- pack upper frame -----------
        self.lblgal.pack(side='left')
        self.entgal.pack(side='right')

        #------- pack middle frame ----------
        self.lblmiles.pack(side='left')
        self.entmiles.pack(side='right')

        #------- pack bottom frome ----------
        self.mpgbtn.pack(side= 'left')
        self.extbtn.pack(side= 'right')

        #------- pack frames --------
        self.uframe.pack(side='top')
        self.mframe.pack(side='top')
        self.bframe.pack(side='top')

        tkinter.mainloop()

#--------------- define main function  ----
def main():
    calcmpg = CalcMPG()

#--------- invoke main function -------
main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:42:51.243

您需要像这样创建按钮，即明确指定这些字符串值是按钮的 text 属性的值，就像您对标签所做的那样：

```
self.mpgbtn = tkinter.Button(self.bframe, text="Calculate MPG")
self.extbtn = tkinter.Button(self.bframe, text="Exit") 
```

# c# - 如何在给定接口的情况下创建对象？

> ID：13791585
> 
> 赞同：2
> 
> 时间：2012-12-09T20:39:46.663
> 
> 标签：c#, generics, testing

我知道我们只能创建类的实例，但我想为我的方法设置一个接口，并在我的 Deserialize() 方法中创建一个实例：

```
 public T Deserialize(string contents)
        {
            Type type = typeof(T);

            var obj = Activator.CreateInstance(type); 
```

我想这样使用它：

```
var customSerializer = new CustomSerializer<IPerson>();
IPerson person = customSerializer.Deserialize(contents); 
```

它创建什么对象并不重要，它只需要具有我的 T 接口提供的基本属性即可。

我怎么能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:42:53.483

如果我正确理解您的问题 - 因为您指定了 tags `"testing"`，`"unit"`我相信您正在寻找一个可以`mock`为给定界面创建一个模拟框架。

有很多框架可供使用，这是一篇很好的文章，可以帮助您做出决定：

[使用什么 C# 模拟框架？](https://stackoverflow.com/q/37359/485076)

如果您不是在寻找单元测试解决方案 - 请删除这些标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:03:05.710

您可以通过使用[即兴接口](https://code.google.com/p/impromptu-interface/)库来实现这一点。

创建一个动态对象，然后使用`ActLike<IMyInterface>()`它使其表现得就像它是实现`IMyInterface`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:56:37.287

其他答案已经涵盖了为单元测试创​​建模拟对象。这是关于“在不知道实际类型的情况下反序列化到接口”。

对于一般情况，无法对接口进行反序列化。序列化数据和接口上的属性值之间没有映射关系。

以下示例显示了一些问题：

```
interface IPerson 
{
  string Name {get;}
}

class Person: IPerson
{
   string realName;
   public string Name 
   {
     get {return realName;} 
     set {realName=value;}
   }
}

class FakePerson : IPerson
{
   public string Name {get {return "Bob";} }
} 
```

现在，如果您进行序列化`Person`，您将无法读取除 person 之外的任何内容，因为`realName`和之间没有明确的映射`Name`。`FakePerson`更糟糕的是，因为根本没有序列化`Name`。

# c++ - C++ 优化级别会影响 Swig Python 模块性能吗

> ID：13791587
> 
> 赞同：4
> 
> 时间：2012-12-09T20:40:01.173
> 
> 标签：c++, python, optimization, g++, swig

我有一个大的 Swig Python 模块。C++ 包装器最终大约是 320,000 LoC（包括我猜的标头）。我目前使用 -O1 编译它，g++ 生成一个大小为 44MiB 的二进制文件，编译大约需要 3 分钟。

如果我关闭优化 (-O0)，则二进制文件的大小为 40MiB，编译需要 44 秒。

使用 -O0 编译包装器会显着损害 python 模块的性能吗？在我去分析模块在不同优化级别的性能之前，有没有人做过这种分析或者对它是否重要有任何见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:49:51.463

-O0 停用 gcc 执行的所有优化。优化很重要。

因此，如果您的应用程序没有很多知识，我可能会建议这会损害您的应用程序的性能。

通常使用的安全优化级别是 -O2。

您可以在以下网址查看 GCC 执行的优化类型：http: [//gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)。

但最后，如果你想确切地知道你应该在不同的级别和配置文件上编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:57:45.710

无论是否使用 SWIG 模块，这都很糟糕。即使您阻止它们发生，也会发生*许多*优化。`gcc -O1`

您可以通过检查您选择的编译器生成的 asm 来检查差异。其中我知道的这些将对 SWIG 生成的包装器有害：

1.  死码消除：

    ```
    void foo() {
      int a = 1;
      a = 0;
    } 
    ```

    使用 -O1，这个完全没有意义的代码将被完全删除：

    ```
    foo:
            pushl   %ebp
            movl    %esp, %ebp
            popl    %ebp
            ret 
    ```

    而使用 -O0 则变为：

    ```
    foo:
            pushl   %ebp
            movl    %esp, %ebp
            subl    $16, %esp
            movl    $1, -4(%ebp)
            movl    $0, -4(%ebp)
            leave
            ret 
    ```

2.  寄存器分配将在具有大量局部变量的函数中受到不利影响 - 大多数 SWIG 包装器函数都会因此受到影响。但是，很难给出一个简洁的例子。

3.  另一个例子，gcc 为原型编译 SWIG 包装器的输出：

    ```
    int foo(unsigned int a, unsigned int b, unsigned int c,  unsigned int d); 
    ```

    生成`-O0`：

    ```
    Java_testJNI_foo:
            pushl   %ebp
            movl    %esp, %ebp
            subl    $88, %esp
            movl    16(%ebp), %eax
            movl    %eax, -48(%ebp)
            movl    20(%ebp), %eax
            movl    %eax, -44(%ebp)
            movl    24(%ebp), %eax
            movl    %eax, -56(%ebp)
            movl    28(%ebp), %eax
            movl    %eax, -52(%ebp)
            movl    32(%ebp), %eax
            movl    %eax, -64(%ebp)
            movl    36(%ebp), %eax
            movl    %eax, -60(%ebp)
            movl    40(%ebp), %eax
            movl    %eax, -72(%ebp)
            movl    44(%ebp), %eax
            movl    %eax, -68(%ebp)
            movl    $0, -32(%ebp)
            movl    -48(%ebp), %eax
            movl    %eax, -28(%ebp)
            movl    -56(%ebp), %eax
            movl    %eax, -24(%ebp)
            movl    -64(%ebp), %eax
            movl    %eax, -20(%ebp)
            movl    -72(%ebp), %eax
            movl    %eax, -16(%ebp)
            movl    -16(%ebp), %eax
            movl    %eax, 12(%esp)
            movl    -20(%ebp), %eax
            movl    %eax, 8(%esp)
            movl    -24(%ebp), %eax
            movl    %eax, 4(%esp)
            movl    -28(%ebp), %eax
            movl    %eax, (%esp)
            call    foo
            movl    %eax, -12(%ebp)
            movl    -12(%ebp), %eax
            movl    %eax, -32(%ebp)
            movl    -32(%ebp), %eax
            leave
            ret 
    ```

    与之相比，`-O1`仅生成：

    ```
    Java_testJNI_foo:
            pushl   %ebp
            movl    %esp, %ebp
            subl    $24, %esp
            movl    40(%ebp), %eax
            movl    %eax, 12(%esp)
            movl    32(%ebp), %eax
            movl    %eax, 8(%esp)
            movl    24(%ebp), %eax
            movl    %eax, 4(%esp)
            movl    16(%ebp), %eax
            movl    %eax, (%esp)
            call    foo
            leave
            ret 
    ```

4.  使用`-O1`g++ 可以生成更智能的代码：

    ```
    %module test

    %{
    int value() { return 100; }
    %}

    %feature("compactdefaultargs") foo;

    %inline %{
      int foo(int a=value(), int b=value(), int c=value()) {
        return 0;
      }
    %} 
    ```

简短的回答是完全禁用优化，GCC 会生成非常幼稚的代码——这对于 SWIG 包装器和任何其他程序一样都是如此，如果不是更多的话，因为自动生成的代码的风格。

# javascript - 如何编辑这个 jquery 片段，以便我使用背景图像而不是背景颜色？

> ID：13791590
> 
> 赞同：-2
> 
> 时间：2012-12-09T20:40:14.980
> 
> 标签：javascript, jquery, function

我有这个片段：

```
 <script type="text/javascript">

 $(document).ready(function(){
 $("button").click(function(){
     $("#button_layer").hide();
    $("#images_layer").show();
    $("#container").css("background","yellow");
 })
 });
 </script> 
```

如何更改 .css("background","yellow"); 说一个像 url('image.png'); 这样的背景图像；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:42:48.903

```
$("#container").css("background-image","url('image.png')"); 
```

如果要同时设置多个 CSS 属性，请传递带有属性和值的 hashmap：

```
$("#container").css({
    backgroundImage:"url('img.jpg')",
    width:"400px"
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:42:32.027

只需将其更改为：

**`$("#container").css("background-image","url('image.png')");`**

# android - 使用 GSON 解析 Android Youtube API JSON-C

> ID：13791593
> 
> 赞同：2
> 
> 时间：2012-12-09T20:40:35.487
> 
> 标签：android, json, youtube, gson

我正在尝试开发一个 Android 应用程序来检索特定用户的视频，我想使用 JSON-C 响应格式来保持较小的大小。一旦我得到我的回复，格式如下：

```
{
"apiVersion":"2.1",
"data":{
    "updated":"2012-12-02T14:40:07.424Z",
    "totalItems":175,
    "startIndex":1,
    "itemsPerPage":25,
    "items":[
        {
            "id":"rnzJ5x3sWyk",
            "uploaded":"2012-12-01T20:19:07.000Z",
            "updated":"2012-12-01T20:19:07.000Z",
            "uploader":"user",
            "category":"News",
            "title":"L'ALLUVIONE HA DISTRUTTO LE ROULOTTE DELLE VACANZE",
            "description":"Ad Albinia,in un rimessaggio per roulotte, il proprietario, i volontari e i vacanzieri che sono soliti passare l'estate qui, si sono rimboccati le maniche per ripulire dal fango le tante \"case delle vacanze\" distrutte dall'alluvione",
            "thumbnail":{
                "sqDefault":"http://i.ytimg.com/vi/rnzJ5x3sWyk/default.jpg",
                "hqDefault":"http://i.ytimg.com/vi/rnzJ5x3sWyk/hqdefault.jpg"
            },
            "player":{
                "default":"http://www.youtube.com/watch?v=rnzJ5x3sWyk&feature=youtube_gdata_player",
                "mobile":"http://m.youtube.com/details?v=rnzJ5x3sWyk"
            },
            "content":{
                "5":"http://www.youtube.com/v/rnzJ5x3sWyk?version=3&f=user_uploads&app=youtube_gdata",
                "1":"rtsp://v1.cache2.c.youtube.com/CigLENy73wIaHwkpW-wd58l8rhMYDSANFEgGUgx1c2VyX3VwbG9hZHMM/0/0/0/video.3gp",
                "6":"rtsp://v6.cache2.c.youtube.com/CigLENy73wIaHwkpW-wd58l8rhMYESARFEgGUgx1c2VyX3VwbG9hZHMM/0/0/0/video.3gp"
            },
            "duration":136,
            "viewCount":2,
            "favoriteCount":0,
            "commentCount":0,
            "accessControl":{
                "comment":"allowed",
                "commentVote":"allowed",
                "videoRespond":"moderated",
                "rate":"allowed",
                "embed":"allowed",
                "list":"allowed",
                "autoPlay":"allowed",
                "syndicate":"allowed"
            }
        },
and others items.... 
```

当我设置我的模型类以反序列化它时它应该是什么样子我必须包含所有元素，即使是那些我不感兴趣的元素？

```
 public class SearchResponse {

    public Container data;

  } 
```

指的是

```
import java.util.ArrayList;

import com.google.gson.annotations.SerializedName;

public class Container {

public ArrayList<Items> results;

@SerializedName("totalItems")
public int totalItems;

@SerializedName("startIndex")
public int startIndex;

@SerializedName("itemsPerPage")
      public int itemsPerPage;
} 
```

对于每个项目：

```
import com.google.gson.annotations.SerializedName;

public class Items {

@SerializedName("id")
public String id;

@SerializedName("uploaded")
public String uploaded;

@SerializedName("category")
public String category;

@SerializedName("title")
public String title;

@SerializedName("description")
public String description;

public Thumbnail thumbnail;

@SerializedName("duration")
public int duration;

} 
```

对于每个缩略图

```
import com.google.gson.annotations.SerializedName;

public class Thumbnail {

@SerializedName("sqdefault")
      public String sqdefault;

@SerializedName("hqdefault")
public String hqdefault;

} 
```

我认为是“数据”部分正在杀死我。

如果您已经这样做了，有人可以帮忙或给我一些例子吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:25:54.363

这个：

```
public ArrayList<Items> results; 
```

需要是：

```
public ArrayList<Items> items; 
```

或者：

```
@SerializedName("items") public ArrayList<Items> results; 
```

它应该可以正常工作。

不，您不必在 POJO 中包含所有字段。JSON 中存在的任何您没有的字段都将被静默忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:52:43.423

你不必使用 GSON，你可以自己做 - 保持简单并自己学习一些 JSON :-)

[http://blog.blundell-apps.com/show-youtube-user-videos-in-a-listview/](http://blog.blundell-apps.com/show-youtube-user-videos-in-a-listview/)

[https://github.com/blundell/YouTubeUserFeed](https://github.com/blundell/YouTubeUserFeed)

这是一个摘录：

```
 // Create a JSON object that we can use from the String
        JSONObject json = new JSONObject(youTubeJsonResult);

        // Get are search result items
        JSONArray jsonArray = json.getJSONObject("data").getJSONArray("items");

        // Create a list to store are videos in
        List<Video> videos = new ArrayList<Video>();
        // Loop round our JSON list of videos creating Video objects to use within our app
        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            // The title of the video
            String title = jsonObject.getString("title");
            // The url link back to YouTube, this checks if it has a mobile url
            // if it doesnt it gets the standard url
            String url;
            try {
                url = jsonObject.getJSONObject("player").getString("mobile");
            } catch (JSONException ignore) {
                url = jsonObject.getJSONObject("player").getString("default");
            }
            // A url to the thumbnail image of the video
            // We will use this later to get an image using a Custom ImageView
            // Found here http://blog.blundell-apps.com/imageview-with-loading-spinner/
            String thumbUrl = jsonObject.getJSONObject("thumbnail").getString("sqDefault");

            // Create the video object and add it to our list
            videos.add(new Video(title, url, thumbUrl));
        } 
```

视频只是：

```
public class Video {
    String title;
    String url;
    String thumbUrl
} 
```

# c# - gridview中的父文件夹名称

> ID：13791597
> 
> 赞同：0
> 
> 时间：2012-12-09T20:40:48.293
> 
> 标签：c#, winforms, datagridview

我想在 中显示文件根/父`DataGridView`，但我不知道如何。我列出了一个根文件夹中子目录中的所有文件，但我也希望每个文件都有其父文件夹，显示在`DataGridView`. 无论如何可以从`System.IO`图书馆获取这些信息吗？

这是我的代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    label2.Text = LocationX;
    s1 = Directory.GetFiles(@LocationX, "#", SearchOption.AllDirectories);

    for (int i = 0; i <= s1.Length - 1; i++)
    {
        if (i == 0)
        {   
            dt.Columns.Add("Paren Folder Name");  
            dt.Columns.Add("File_Name");
            dt.Columns.Add("Version");
            dt.Columns.Add("File_Type");
            dt.Columns.Add("File_Size");
            dt.Columns.Add("Create_Date");
        }

        FileInfo f = new FileInfo(s1[i]);
        FileSystemInfo f1 = new FileInfo(s1[i]);

        dr = dt.NewRow();
        dr["Root"] = f1.????????     //is it possible to do show parent folder this way?
        dr["File_Name"] = f1.Name;
        dr["File_Type"] = f1.Extension;
        dr["File_Size"] = (f.Length / 1024).ToString();
        dr["Create_Date"] = f1.CreationTime.Date.ToString("dd/MM/yyyy");
        dt.Rows.Add(dr);
    }

    if (dt.Rows.Count > 0)
    {
        dataGridView1.DataSource = dt;
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:46:39.353

用于[`FileInfo.Directory`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.directory.aspx)获取文件的目录名：

```
dr["Root"] = f.Directory.Name; 
```

还将列创建移出循环。我认为循环应该只用于将数据添加到表中。

* * *

```
dt.Columns.Add("Paren Folder Name");  
dt.Columns.Add("File_Name");
dt.Columns.Add("Version");
dt.Columns.Add("File_Type");
dt.Columns.Add("File_Size");
dt.Columns.Add("Create_Date");

DirectoryInfo directory = new DirectoryInfo(@LocationX);
foreach(FileInfo file in directory.GetFiles("#", SearchOption.AllDirectories))
{
    dr = dt.NewRow();
    dr["Root"] = file.Directory.Name; 
    dr["File_Name"] = file.Name;
    dr["File_Type"] = file.Extension;
    dr["File_Size"] = (file.Length / 1024).ToString();
    dr["Create_Date"] = file.CreationTime.Date.ToString("dd/MM/yyyy");
    dt.Rows.Add(dr);
} 
```

# c - 将未初始化的二维字符数组传递给函数

> ID：13791600
> 
> 赞同：2
> 
> 时间：2012-12-09T20:40:59.313
> 
> 标签：c, multidimensional-array, char, parameter-passing

我正在尝试传递一个在 main 中声明的未初始化的 2-D char 数组并在函数中定义它。

我收到分段错误，调试器说：

`Program received signal SIGSEGV, Segmentation fault. 0x00000000004005af in initialize_world (array=0x7fffffffdff0, maxRows=6, maxCols=5) at ec.c:33 33 array[i][j]='-';`

下面是原型、main 和函数的代码：

```
#include <stdio.h>
#include <string.h>
#define ROWS 10
#define COLS 12

void initialize_world(char array[][COLS],int maxRows,int maxCols);

int main(int argc, char *argv[])  {
    char array[ROWS][COLS];
    int numOfRows, numOfCols; 

    numOfRows = 6;
    numOfCols = 5;

    initialize_world(array,numOfRows,numOfCols);

    return 0;
}   

void initialize_world(char array[][COLS],int maxRows,int maxCols)    {
    int i,j;   

    for(i=0; i < maxRows;i++)   {
        for(j=0; j < maxCols;i++)   {
            array[i][j]='-';
        }         
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T20:46:11.477

平庸，您使用的是 i 而不是 j：

```
for(j=0; j < maxCols;i++) 
```

打字错误，你应该写了j++，这就是你溢出的原因。

# java - LinkedHashSet 等于方法

> ID：13791601
> 
> 赞同：3
> 
> 时间：2012-12-09T20:41:04.640
> 
> 标签：java, hashset, linkedhashset

我有两组`LinkedHashSet`对象，在这些对象中，我还有其他具有更多`LinkedHashSet`.

**我的问题是：**

该`equals`方法（默认）是否检查所有内部`HashSets`是否相同？还是我必须覆盖它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T20:43:49.980

默认情况下，它将确保 HashSet 的内容是 equals()。LinkedHashSet 也是有序的，但这在 hashCode 或 equals 中没有使用，因此它们可以有不同的顺序，但仍然是 equals = true。

简而言之，对于HashSets的equals，顺序无关紧要，“equals”不是“same”。“相同”通常表示其相同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:45:36.500

契约`Set.equals()`是每个集合的每个成员都包含在另一个集合中。每个`contains`测试都依赖于`equals()`集合中对象的方法。

该规范要求任何`Set`实现都不能依赖于 的默认实现`equals()`，即对象标识。（就`Set`规范而言，集合中的对象可以自由使用默认值`Object.equals()`来测试相等性。但是如果您有一组集合，则（外部）集合中的对象本身就是`Set`对象，因此受到相同的约束`Set`合同有关`equals()`。）

有关详细信息，请参阅 和 的[`Set.equals()`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#equals%28java.lang.Object%29)文档[`Set.contains(Object)`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#contains%28java.lang.Object%29)。

# c++ - 文本文件中的第一个字符导致 .substr() 错误

> ID：13791602
> 
> 赞同：0
> 
> 时间：2012-12-09T20:41:16.873
> 
> 标签：c++, parsing, substr

我有一个文本文件，内容如下：

```
this is an email file with DummyTest@my.test and some other text for the test
ATest@my.test
BTest@my.test 
```

然后我有 a `substr (s, e - s)`，其中 s 是行的开头， e 是结尾，这会给我这个：

```
terminate called after throwing an instance of 'std::out_of_range'
what():  basic_str`entering::substr
Aborted 
```

这仅发生在底部两行，第一行将打印 DummyTest@my.test

我知道的问题是，当`s`在行首并且之前没有字符（即“ATest@my.test”或“BTest@my.test”）时，会发生此错误。可以添加什么来防止这种情况发生？

```
while (getline(fin, lines))
{
for (int i = 0; i < lines.length(); i++)
{
if (lines[i] == '@')
{
int s;

if (i == 0 || i == 1) break;
for (s = i - 1; s < lines.length() ; s--)
{
if(validChar(lines[s]) == false )
 {
 s = s + 1;
 break;
 }
} //for 

 int e; 
 bool hasDot = false;  

 for (e = i + 1; e < lines.length(); e++)
 {
 if (e == lines.length()) break;
 if(validChar(lines[e]) == false )
 {
 break;
 } // if in for

 if(lines[e] == '.') hasDot = true;
 } // for 

anEmail = lines.substr (s,  e - s);
if (s < i && e > i && hasDot == true)
cout << anEmail << endl; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:56:08.537

显然，由于抛出了 out_of_range 异常，您的参数之一超出了范围。我会进行一些测试以确保值 s 和 e 是您所期望的。

# javascript - 如何识别哪个IFRAME是哪个？

> ID：13791603
> 
> 赞同：0
> 
> 时间：2012-12-09T20:41:16.643
> 
> 标签：javascript, html

[此回复](http://www.sencha.com/forum/showthread.php?147118-Access-Components-in-an-iframe)`IFRAME`中显示了如何引用 an 内部的组件。它的工作原理是假设只有一个（或者我们确定第零个就足够了）。但是，我想知道如何识别我想要戳的实际。`IFRAME``IFRAME`

我需要更改的语法：

```
window.frames[0].document. + my stuff 
```

变成类似的东西：

```
window.frames["theIdOfMyIFrame"].document. + my stuff 
```

但我做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:49:26.243

我之前处理过这个问题。

如果您在 iframe 中显示跨站点请求的响应，则新浏览器将拒绝访问此 iframe，因为同源策略或跨站点脚本/请求禁止。
有关更多信息，请参见此处：[IFrame 权限被拒绝](http://davidwalsh.name/iframe-permission-denied)

如果您想动态添加内容，此解决方案可能会对您有所帮助：[添加动态内容](http://thomas.bindzus.me/2007/12/24/adding-dynamic-contents-to-iframes/)

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:43:28.000

使用`document.getElementById`而不是讨厌的弃用`window.frames`属性：

```
document.getElementById("theIdOfMyIFrame").contentDocument ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:53:50.630

1.  我会避免使用*window.frames*。（可能是因为他们缺乏经验。）
2.  当网络上的回复是形式*something[0]*时，请小心。糟糕的编码风格，**可能**。
3.  应该使用对您的*theIdOfMyIFrame的引用。*
4.  内部文档就在*contentDocument*之下。

您可以像这样引用嵌入式组件。

```
document.getElementById("theIdOfMyIFrame")
  .contentDocument.getElementById("controlIdInTheembeddedPage")
    .value = "Christophe has eyes for details!"; 
```

# javascript - 在 WebGL 中从画布加载透明背景图像

> ID：13791613
> 
> 赞同：0
> 
> 时间：2012-12-09T20:42:16.357
> 
> 标签：javascript, html, canvas, opengl-es, webgl

我有一个有趣的问题。我正在将带有自定义字体的文本绘制到画布上，然后将该画布的图像数据加载到 GL 纹理中。问题是背景的透明度。我无法让 GL 纹理具有正确的 alpha。它的背景是黑色的。

看这里：

`http://24.2.20.166/`

（Stackoverflow 不允许我直接发布链接……抱歉……）

相关代码：

```
this.ctx.clearRect(0,0, this.textCanvas.width, this.textCanvas.height); 
this.ctx.fillText(textObj.text, this.textCanvas.width / 2, this.textCanvas.height / 2);

gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false); 
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas); 
```

编辑：我是个白痴。

```
this.gl.enable (this.gl.BLEND);
this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA); 
```

# java - 移动玩家时的延迟峰值

> ID：13791614
> 
> 赞同：1
> 
> 时间：2012-12-09T20:42:22.247
> 
> 标签：java, swing, jframe, jpanel

播放器是一个面板，它被移除，位置改变，然后重新添加到另一个面板（包含此方法），该面板被绘制到主框架。还有许多其他包含草精灵的小面板被绘制到主面板作为地形图块。我认为问题在于，当我调用 时`revalidate()`，它也会重新验证所有这些小面板。我该如何解决这个问题？

编辑：我应该提到我`RelativeLayout`用来将玩家定位在主面板上。

```
private class MainKeyAdapter extends KeyAdapter {

    @Override
    public void keyPressed(KeyEvent evt) {
        // TODO add your handling code here:
        if(AttentionedPlayer != null)
        {
            if (evt.getKeyCode() == KeyEvent.VK_UP) {
                AttentionedPlayer.Ypos -= 16;
            }
            if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
                AttentionedPlayer.Ypos += 16;
            }
            if (evt.getKeyCode() == KeyEvent.VK_LEFT) {
                AttentionedPlayer.Xpos -= 16;
            }
            if (evt.getKeyCode() == KeyEvent.VK_RIGHT) {
                AttentionedPlayer.Xpos += 16;
            }
            remove(AttentionedPlayer);
            AttentionedPlayer.movePlayer();
            System.out.println("!!!!"+AttentionedPlayer.constraints.toString());
            add(AttentionedPlayer, AttentionedPlayer.constraints, AttentionedPlayer.Zpos);
            AttentionedPlayer.revalidate();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:48:20.183

`AttentionedPlayer.movePlayer();`似乎是一项密集的操作，您可以从[EDT](http://en.wikipedia.org/wiki/Event_dispatching_thread)（GUI 线程）中执行它。相反，从新线程或[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)中执行它。

阅读[此答案](https://stackoverflow.com/a/11546203/597657)以了解有关[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T21:26:31.323

@Eng.Fouad 对他有一个很好的点 +1，虽然我个人从来没有因为这个确切的原因需要这个，但你的移动方法可能非常占用 cpu。

*`JPanel`只是为了展示一个使用您的游戏逻辑*的示例（从我的评论中扩展），如果*正确*实施，则不需要`revalidate()`玩家移动（通过`setLocation(..)`），这也可能导致大量延迟，尤其是在有很多组件的情况下。正如您将看到我的`GamePanel`扩展`JPanel`和使用`Null`/`Absolute`布局（但在游戏中我们想要更多地控制布局）。

也用`KeyBinding`s 向你展示它们的用途。

![在此处输入图像描述](../Images/544986ddc0944a2017ec15ad3848069f.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import javax.swing.border.LineBorder;

public class GameLogic {

    public GameLogic() {
        initComponents();
    }

    private void initComponents() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Entity entity = new Entity("Player", 100, 100, 50, 50);//starting location 100,100 and width/height 50x50

        GamePanel gp = new GamePanel(300, 300);
        gp.addEntity(entity);

        setGamePanelKeyBindings(gp, entity);

        frame.add(gp);

        frame.pack();
        frame.setVisible(true);
    }

    private void setGamePanelKeyBindings(GamePanel gp, final Entity entity) {
        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("D"), "D pressed");
        gp.getActionMap().put("D pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.move(Entity.RIGHT);
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("A"), "A pressed");
        gp.getActionMap().put("A pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.move(Entity.LEFT);
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("W"), "W pressed");
        gp.getActionMap().put("W pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.move(Entity.UP);
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("S"), "S pressed");
        gp.getActionMap().put("S pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.move(Entity.DOWN);
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new GameLogic();
            }
        });
    }
}

class Entity extends JPanel {

    private int width = 50, height = 50;
    private int speed = 5;
    public static final int UP = 1, DOWN = 2, LEFT = 3, RIGHT = 4;

    public Entity(String text, int x, int y, int width, int height) {
        this.width = width;
        this.height = height;
        add(new JLabel(text));
        setBorder(new LineBorder(Color.BLACK));
        setBounds(x, y, width, height);
    }

    public void move(int direction) {
        switch (direction) {
            case UP:
                setLocation(getX(), getY() - speed);
                break;
            case DOWN:
                setLocation(getX(), getY() + speed);
                break;
            case LEFT:
                setLocation(getX() - speed, getY());
                break;
            case RIGHT:
                setLocation(getX() + speed, getY());
                break;
        }

    }

    @Override
    public void setBounds(int x, int y, int w, int h) {
        super.setBounds(x, y, width, height);
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        grphcs.setColor(Color.CYAN);
        grphcs.fillRect(0, 0, getWidth(), getHeight());
    }
}

class GamePanel extends JPanel {

    private int width, height;

    GamePanel(int w, int h) {
        setLayout(null);
        width = w;
        height = h;
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    public void addEntity(Entity e) {
        add(e);
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        grphcs.setColor(Color.GREEN);
        grphcs.fillRect(0, 0, getWidth(), getHeight());
    }
} 
```

对不起，我无法阻止自己

如果您有兴趣，这里有一些高级版本，可以暂停游戏循环，可以设置帧速率等，2个键（例如`W`并且`D` 可能同时按下，从而导致`JPanel`对角线移动）：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.util.ArrayList;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import javax.swing.border.LineBorder;

public class GameLogic {

    public GameLogic() {
        initComponents();
    }
    final GamePanel gp = new GamePanel(500, 500);

    private void initComponents() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Entity entity = new Entity("Player", 100, 100, 100, 100);

        gp.addEntity(entity);

        setGamePanelKeyBindings(gp, entity);

        frame.add(gp);

        frame.pack();
        frame.setVisible(true);

        //start the game loop which will repaint the screen
        runGameLoop();
    }
    //Starts a new thread and runs the game loop in it.

    public void runGameLoop() {
        Thread loop = new Thread(new Runnable() {
            @Override
            public void run() {
                gp.running = true;
                gp.gameLoop();
            }
        });
        loop.start();
    }

    private void setGamePanelKeyBindings(GamePanel gp, final Entity entity) {
        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("D"), "D pressed");
        gp.getActionMap().put("D pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.RIGHT = true;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("A"), "A pressed");
        gp.getActionMap().put("A pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.LEFT = true;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("W"), "W pressed");
        gp.getActionMap().put("W pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.UP = true;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("S"), "S pressed");
        gp.getActionMap().put("S pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.DOWN = true;
            }
        });
        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released D"), "D released");
        gp.getActionMap().put("D released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.RIGHT = false;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released A"), "A released");
        gp.getActionMap().put("A released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.LEFT = false;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released W"), "W released");
        gp.getActionMap().put("W released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.UP = false;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released S"), "S released");
        gp.getActionMap().put("S released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.DOWN = false;
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new GameLogic();
            }
        });
    }
}

class Entity extends JPanel {

    private int width = 50, height = 50;
    private int speed = 5;
    public boolean UP = false, DOWN = false, LEFT = false, RIGHT = false;

    public Entity(String text, int x, int y, int width, int height) {
        this.width = width;
        this.height = height;
        add(new JLabel(text));
        setBorder(new LineBorder(Color.BLACK));
        setBounds(x, y, width, height);
    }

    public void move() {
        if (UP) {
            setLocation(getX(), getY() - speed);
        }
        if (DOWN) {
            setLocation(getX(), getY() + speed);
        }
        if (LEFT) {
            setLocation(getX() - speed, getY());
        }
        if (RIGHT) {
            setLocation(getX() + speed, getY());
        }

    }

    @Override
    public void setBounds(int x, int y, int w, int h) {
        super.setBounds(x, y, width, height);
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        grphcs.setColor(Color.CYAN);
        grphcs.fillRect(0, 0, getWidth(), getHeight());
    }
}

class GamePanel extends JPanel {

    private int width, height;
    private int frameCount = 0;
    private int fps = 0;
    public static boolean running = false, paused = false;
    final ArrayList<Entity> entities = new ArrayList<>();

    GamePanel(int w, int h) {
        setLayout(null);
        width = w;
        height = h;
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    public void addEntity(Entity e) {
        add(e);
        entities.add(e);
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);

        grphcs.setColor(Color.GREEN);
        grphcs.fillRect(0, 0, getWidth(), getHeight());

        grphcs.setColor(Color.BLACK);
        grphcs.drawString("FPS: " + fps, 5, 10);

        frameCount++;
    }

    //Only run this in another Thread!
    public void gameLoop() {
        //This value would probably be stored elsewhere.
        final double GAME_HERTZ = 30.0;
        //Calculate how many ns each frame should take for our target game hertz.
        final double TIME_BETWEEN_UPDATES = 1000000000 / GAME_HERTZ;
        //At the very most we will update the game this many times before a new render.
        //If you're worried about visual hitches more than perfect timing, set this to 1.
        final int MAX_UPDATES_BEFORE_RENDER = 5;
        //We will need the last update time.
        double lastUpdateTime = System.nanoTime();
        //Store the last time we rendered.
        double lastRenderTime = System.nanoTime();

        //If we are able to get as high as this FPS, don't render again.
        final double TARGET_FPS = 60;
        final double TARGET_TIME_BETWEEN_RENDERS = 1000000000 / TARGET_FPS;

        //Simple way of finding FPS.
        int lastSecondTime = (int) (lastUpdateTime / 1000000000);

        while (running) {
            double now = System.nanoTime();
            int updateCount = 0;

            if (!paused) {
                //Do as many game updates as we need to, potentially playing catchup.
                while (now - lastUpdateTime > TIME_BETWEEN_UPDATES && updateCount < MAX_UPDATES_BEFORE_RENDER) {
                    updateGame();
                    lastUpdateTime += TIME_BETWEEN_UPDATES;
                    updateCount++;
                }

                //If for some reason an update takes forever, we don't want to do an insane number of catchups.
                //If you were doing some sort of game that needed to keep EXACT time, you would get rid of this.
                if (now - lastUpdateTime > TIME_BETWEEN_UPDATES) {
                    lastUpdateTime = now - TIME_BETWEEN_UPDATES;
                }

                drawGame();
                lastRenderTime = now;

                //Update the frames we got.
                int thisSecond = (int) (lastUpdateTime / 1000000000);
                if (thisSecond > lastSecondTime) {
                    System.out.println("NEW SECOND " + thisSecond + " " + frameCount);
                    fps = frameCount;
                    frameCount = 0;
                    lastSecondTime = thisSecond;
                }

                //Yield until it has been at least the target time between renders. This saves the CPU from hogging.
                while (now - lastRenderTime < TARGET_TIME_BETWEEN_RENDERS && now - lastUpdateTime < TIME_BETWEEN_UPDATES) {
                    //allow the threading system to play threads that are waiting to run.
                    Thread.yield();

                    //This stops the app from consuming all your CPU. It makes this slightly less accurate, but is worth it.
                    //You can remove this line and it will still work (better), your CPU just climbs on certain OSes.
                    //FYI on some OS's this can cause pretty bad stuttering. Scroll down and have a look at different peoples' solutions to this.
                    //On my OS it does not unpuase the game if i take this away
                    try {
                        Thread.sleep(1);
                    } catch (Exception e) {
                    }

                    now = System.nanoTime();
                }
            }
        }
    }

    private void updateGame() {
        for (Entity e : entities) {
            e.move();
        }
    }

    private void drawGame() {

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                repaint();
            }
        });
    }
} 
```

# optimization - 在 x86 和 ARM 中移动内存的最佳方式？

> ID：13791620
> 
> 赞同：0
> 
> 时间：2012-12-09T20:42:37.187
> 
> 标签：optimization, assembly, x86, arm

我很想知道在 x86 架构上进行大容量内存复制的最佳方法。我意识到这取决于机器特定的特性。主要目标是过去 4-5 年制造的典型台式机。

我知道在过去，带有 REPE 的 MOVSD 名义上是最快的方法，因为您一次可以移动 4 个字节，但我读到现在 MOVSB 一样快并且更易于编写，所以您不妨做一个字节移动并忘记 4 字节移动的复杂性。

一个围绕的问题是 MOVxx 指令是否值得。如果 CPU 的运行速度比内存总线快得多，那么使用 CISC 移动可能毫无意义，您不妨使用普通的 MOV。这将是最有吸引力的，因为这样我就可以在 ARM 等其他处理器架构上使用相同的算法。这就提出了一个类似的问题，即 ARM 用于大容量内存移动的专用指令（与 Intel 完全不同）是否值得。

* * *

注意：我已阅读《英特尔优化参考手册》中的第 3.7.6 节，因此我熟悉基础知识。我希望有人能将本手册中没有的领域的实践经验联系起来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T00:12:43.350

现代英特尔和 AMD 处理器对 REP MOVSB 进行了优化，如果可以的话，它可以一次复制整个缓存行，使其成为复制批量数据的最佳（可能不是最快，但非常接近）方法。

至于 ARM，它取决于架构版本，但通常使用展开循环将是最有效的。

# java - 使用 IntelliJ，我如何确定特定函数是来自 Java 还是 Scala

> ID：13791622
> 
> 赞同：4
> 
> 时间：2012-12-09T20:42:41.617
> 
> 标签：java, scala, intellij-idea

让我们采取一个

```
val m = "Scala is fun" 
```

`IntelliJ`帮助找出很多可以用这个做的事情

![在此处输入图像描述](../Images/a14ac1a19ddc619fcb81e215ab0dd50b.png)

**有没有办法让我知道这些函数中哪些来自 Scala，哪些来自 Java？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:58:05.153

在 IDEA 的自动补全中，粗体条目是在对象本身的类型上定义的方法，而带下划线的函数是通过隐式转换和 pimp-my-library 添加的（有关说明，请参见例如[此处](http://www.artima.com/weblogs/viewpost.jsp?thread=179766)或在 StackOverflow 或 Google 上搜索）。

但是，对于在 Java 中定义的类型的特殊情况（例如`String`的类型`m`），您碰巧对 Java-vs-Scala 的区别是正确的：粗体方法是真正的方法，必须在`m`（这里`String`），因此在 Java 中。虽然 pimp-my-library 是 Scala 模式，但通常带下划线的函数将用 Scala 编写（这只是一个经验法则，但我从未见过例外）。

非粗体函数只是继承。

对于文档的数量，根据经验，Java 标准库具有相当全面的文档（它应该是该方法的规范），而 Scala 的文档通常在越来越少和越来越少之间变化。

我已经搜索了如何更改 IntelliJ 11 中用于突出显示的字体，但我没有找到太多 - 您可以更改用于突出显示代码的字体，但我怀疑这在这里​​没有什么区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:06:49.667

如果您有 IDEA 12，您可以在弹出窗口中的任何选定方法上按 Ctrl-Q 以查看该方法的“快速文档”，不仅如此，您还可以遍历方法列表，快速文档将更改以适应新的选择。

如果您在没有快速帮助的情况下发现任何条目，最好打赌这将是一个 Scala 方法；@)

我也会检查 IDEA 11。

编辑：它也适用于 IDEA 11 CE 和 Ultimate。

# powershell - 替换输出结果

> ID：13791626
> 
> 赞同：0
> 
> 时间：2012-12-09T20:42:51.523
> 
> 标签：powershell, powershell-2.0

获取备份数据库01 | 佛罗里达州

```
Name   : Database01
ID     : 1263232392323
Status : 1 
```

如何用“可用”一词替换状态的“1”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:51:33.220

尝试

```
Get-Backup Database01 | fl Name,ID, @{n="Status";e={ if ($_.status -eq 1) { "Available" }}} 
```

# java - 在许多类之间共享链表中的对象（java）

> ID：13791627
> 
> 赞同：-6
> 
> 时间：2012-12-09T20:42:50.853
> 
> 标签：java, class, object, linked-list, share

我正在从事一个涉及许多类和许多对象的项目....我有一个类（主）将对象保存到链表中，稍后其他类（主类）将显示保存的任何对象的属性在链表中根据用户需要。我想知道如何将第一个主类中保存的对象共享给其他类...然后修改其他类中的列表并更新列表..

这是我将对象添加到链表时的代码...

```
LinkedList list = new LinkedList();
int i;
i=(combo.getSelectionIndex());
problema.setUsuario(combo.getItem(i));
problema.setLugar(text.getText());
problema.setCodigoequipo(text_3.getText());
lista.add(problema);//the adding
shell.close(); 
```

稍后...当我咨询其他类中的对象时，我需要显示它们的一些属性。我会很感激你的回答:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:47:05.770

链表具有对其包含的所有对象的引用。为了共享对象，您只需要传递对链表的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:20:38.547

你需要熟悉 java.util.Collection 和相关的类......并在谷歌上搜索完整的 java 类名，他们会告诉你很多......如果需要，添加*教程......*

# hyper-v - Windows 8 Hyper-v - 启用网络和远程连接

> ID：13791633
> 
> 赞同：3
> 
> 时间：2012-12-09T20:43:34.693
> 
> 标签：hyper-v, vhd

我有一个 vhd 文件，我需要在上面启用网络和远程连接。在 vhd 上安装了 Windows Server 2008 R2 和 SharePoint 开发平台，VS 2010 ...

我的笔记本电脑运行 Windows 8 x64 Hyper-v。我可以将 vhd 运行到 hyper-v 中并且效果很好，没问题。但我不知道 hyper-v 配置和设置。

我想通过桌面远程连接（从 Windows 8）到运行 Windows Server 2008 R2（域 contoso.com）的 vhd 文件，但我不知道如何配置 hyper-v 以允许网络连接......如果我开始远程桌面连接到我的 Windows 8 并输入服务器名称或域\服务器...它不起作用。

知道如何配置 hyper-v 以便我可以在 VHD 中访问 Internet 并使用远程桌面连接连接到它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:33:15.310

我猜您正在笔记本电脑上使用 Wi-Fi 连接。Hyper-V 不会自动使用 wi-fi 连接，因为它是一种服务器技术。

但是有一些方法 - 这是一篇来自 MS 帅哥的文章，解释了如何使用开关来桥接您的 wi-fi。

[http://blog.credera.com/topic/technology-solutions/microsoft-solutions/using-your-windows-8-wireless-connection-inside-hyper-v/](http://blog.credera.com/topic/technology-solutions/microsoft-solutions/using-your-windows-8-wireless-connection-inside-hyper-v/)

# c++ - 简单的 GLUT 库问题

> ID：13791637
> 
> 赞同：2
> 
> 时间：2012-12-09T20:44:07.830
> 
> 标签：c++, glut

这将是我在 stackoverflow 上的第一篇文章。所以，我正在使用 GLUT 库制作一个简单的程序（VISUAL STUDIO 2012）。我基本上尝试显示一个圆环，但我得到了一个黑屏。

```
#include<gl/glut.h>
#include<math.h>

GLfloat r=8;
GLint spin=0;
GLfloat light_position[]={0.0,0.0,0.0,1.0};
GLfloat ex,ey=0, ez, upx=0, upy=0, upz=0;

void init(){
glClearColor(1.0,1.0,1.0,1.0);
glShadeModel(GL_FLAT);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glEnable(GL_DEPTH_TEST);
}

void display(void){
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_TEST);
glPushMatrix();
double sine = (float)sin((float)spin);
double cosine =  (float)cos((float)spin);
ex=r*sine;
ez=r*cosine;
gluLookAt(ex,ey,-5.0,0,0,0,upx,upy,upz);
glColor3b(1.0,0,0);
glutSolidTorus(0.275,0.85,8,15);
glPopMatrix();
glFlush();
}

void reshape(int w, int h)
{
glViewport(0,0,(GLsizei) w, (GLsizei) h);
glMatrixMode (GL_PROJECTION);
glLoadIdentity();
gluPerspective(40.0, (GLfloat) w/(GLfloat) h, 1.0,20.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glLightfv( GL_LIGHT0, GL_POSITION, light_position);
}

void mouse(int button, int state, int x, int y)
{
switch(button)
{
case GLUT_LEFT_BUTTON:
    if( state == GLUT_DOWN){
        spin = (spin+15)%360;
        glutPostRedisplay();
}
    break;
default:
    break;

    }
}

void main(int argc, char **argv)
{
glutInit(&argc,argv);
glutInitDisplayMode(GLUT_RGBA);
glutInitWindowSize(800,600);
glutInitWindowPosition(300,300);
glutCreateWindow("Light Rotating Torus");
init();
glutDisplayFunc(display);
glutReshapeFunc(reshape);

glutMouseFunc(mouse);
glutMainLoop();
} 
```

有人可以修改它/给出提示，所以它会显示一些东西吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:58:21.720

最明显的问题是您的 UP 矢量。您设置`upx`和。这不是一个有效的向上向量，请尝试更改为. 因此，您的圆环可能已渲染到屏幕外。`upy``upz``upy``1.0f`

此外， glClear 不将 GL_DEPTH_TEST 作为参数。正确的调用应该是：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

因此，您的屏幕没有被清除并保持黑色（当您将 glClearColor 设置为白色时）。

最后，主函数应该*总是*返回 int，永远不会 void（尽管它不会改变你的情况）

# python - Python & lxml / xpath：解析 XML

> ID：13791640
> 
> 赞同：3
> 
> 时间：2012-12-09T20:45:00.353
> 
> 标签：python, xml, xpath, lxml

我需要从此链接获取 FLVPath 的值：[http ://www.testpage.com/v2/videoConfigXmlCode.php?pg=video_29746_no_0_extsite](http://www.testpage.com/v2/videoConfigXmlCode.php?pg=video_29746_no_0_extsite)

```
from lxml import html

sub_r = requests.get("http://www.testpage.co/v2/videoConfigXmlCode.php?pg=video_%s_no_0_extsite" % list[6])
sub_root = lxml.html.fromstring(sub_r.content)

for sub_data in sub_root.xpath('//PLAYER_SETTINGS[@Name="FLVPath"]/@Value'):
     print sub_data.text 
```

但是没有返回数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:52:03.330

您`lxml.html`用于解析文档，这会导致 lxml 将所有元素和属性名称小写（因为这在 html 中无关紧要），这意味着您必须使用：

```
sub_root.xpath('//player_settings[@name="FLVPath"]/@value') 
```

或者，当您无论如何都在解析 xml 文件时，您可以使用`lxml.etree`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:49:16.643

你可以试试

```
print sub_data.attrib['Value'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:56:24.353

```
url = "http://www.testpage.com/v2/videoConfigXmlCode.php?pg=video_29746_no_0_extsite"
response = requests.get(url)

# Use `lxml.etree` rathern than `lxml.html`, 
# and unicode `response.text` instead of `response.content`
doc = lxml.etree.fromstring(response.text)

for path in doc.xpath('//PLAYER_SETTINGS[@Name="FLVPath"]/@Value'):
     print path 
```

# node.js - 数据未存储 node.js mongodb

> ID：13791645
> 
> 赞同：0
> 
> 时间：2012-12-09T20:45:44.363
> 
> 标签：node.js, mongodb

我在 mongoDb 中存储数据时遇到问题，

这是我的模型：

```
module.exports = function(app) {

    var collection = 'chat_user';
    var Schema = app.mongoose.Schema;

    var schema = new Schema({
        user_id: String,
        ws: Object
    }, { collection: collection });

    this.model = app.db.model(collection, schema);

    return this;
}; 
```

但是当我尝试存储时：

```
chat.user = new models.chat_user({
    user_id: app.locals.session.user._id,
    ws: ws
})
console.log(chat.user)
chat.user.save(); 
```

console.log 返回了很好的结果，但我的数据库中什么都没有，也许对象 si 太大了？

如果我删除它，我的 object_id 将存储在我的数据库中

谢谢

# android - 如何修复错误无法执行dex：多个dex文件定义Lcom/google/android/gcm/GCMBaseIntentService;？

> ID：13791647
> 
> 赞同：4
> 
> 时间：2012-12-09T20:45:57.933
> 
> 标签：android, dex

我经常遇到以下两个错误：

```
[2012-12-09 21:39:50 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/google/android/gcm/GCMBaseIntentService;
[2012-12-09 21:39:50 - TimeTable] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/google/android/gcm/GCMBaseIntentService; 
```

我是Android新手，所以我自己没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:17:44.357

我有同样的问题。我的错误是我在同一个包名中使用了相同的类名，就像我在项目的库中使用的一样。当我删除这个类并只使用库中的那个时，一切正常。所以尝试删除库或尝试从构建路径中排除“GCMBaseIntentService”类。希望这会帮助你

# php - Git 补丁到 HTML 解析器

> ID：13791651
> 
> 赞同：2
> 
> 时间：2012-12-09T20:46:11.630
> 
> 标签：php, git, diff

我花了两天时间研究一个库或某种 PHP 函数来解析 git patch GitHub 的 API 返回，但我找不到任何可以使用的东西。

我能够从 Phabricator 中取出相当数量的代码，但它有太多的依赖项。

有谁知道将解析如下内容的 php 代码：

```
 commit d87635a1001a23d3a20422fcc8f2484b6bf3ab1b
        Author: Stav <st@gmail.com>
        Date:   Thu Dec 6 23:59:16 2012 +0200

            #666390 test chargify create and cancel subscription.

        diff --git a/.gitignore b/.gitignore
        index 796276b..b7fc8a1 100644
        --- a/.gitignore
        +++ b/.gitignore
        @@ -1,2 +1,3 @@
         application/config/config.php
        -application/config/database.php
        \ No newline at end of file
        +application/config/database.php
        +/local_file.php
        diff --git a/testing/Unit/libs/ChargifyTest.php b/testing/Unit/libs/ChargifyTest.php
        new file mode 100644
        index 0000000..f6ea674
        --- /dev/null
        +++ b/testing/Unit/libs/ChargifyTest.php
        @@ -0,0 +1,38 @@
        +<?php
        +
        +require_once dirname(__FILE__).'/../../../local_file.php';
        + 
```

进入这样的html表：

![phabricator 解析工具](../Images/5c3a1d1c49fc57af262260380cd8d04e.png)

先感谢您 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:51:14.483

这是我想出的。

```
 <? foreach( $commit['files'] as $file ) { ?>
        <div><h3><?=$file['filename']?></h3>
           <?
            $firstLine = true;
            $patch = explode("@@",$file['patch']);
            $lines_info = explode(",",$patch[1]);
            $st_ln_num = substr($lines_info[0], 2);
            $start_line['original'] = $st_ln_num;
            $start_line['left'] = $st_ln_num;
            $start_line['right'] = $st_ln_num;
            $lines = explode("\n",$file['patch']);
            ?>
            <div style="overflow: auto">
            <table class="parseDiff" cellpadding="0" cellspacing="0">
                <? foreach ($lines as $line) {
                    if (! $firstLine) {
                            $line_left = "";
                            $line_right = "";
                            $char = strlen($line) ? $line[0] : '~';
                            $type = "neutral";
                            switch ($char) {
                                case '-':
                                    $line_left = $start_line['left']++;
                                    $type = "removed";
                                    $line = $line;
                                    break;
                                case '+':
                                    $line_right = $start_line['right']++;
                                    $type = "added";
                                    $line = $line;
                                    break;
                                default:
                                    $line_left = $start_line['left']++;
                                    $line_right = $start_line['right']++;
                                    $type = "neutral";
                                    break;
                            }
                    ?>
                    <tr class="line-type-<?=$type?>">
                        <td class="line-number line-number-left"><?=$line_left?></td>
                        <td class="line-number line-number-right"><?=$line_right?></td>
                        <td class="line-code"><pre><?=htmlspecialchars($line)?></pre></td>
                    </tr>
                <?
                    } else {
                ?>
                    <tr class="line-type-first">
                        <td class="line-number  line-number-left">&middot;&middot;&middot;</td>
                        <td class="line-number  line-number-right">&middot;&middot;&middot;</td>
                        <td class="line-code"><pre><?=htmlspecialchars($line)?></pre></td>
                    </tr>
                <?
                        $firstLine = false;
                    } // end if firstLine
                } // end foreach
                ?>
            </table>
            </div>
        </div>
    <? } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T15:28:49.107

我还制作了一个在 Joomla 上下文中使用的简单 PHP 脚本。只需最少的修改，它就可以在每个 PHP 应用程序上运行。源代码可以在我的 Joomla 附件扩展中找到。这是提交的链接：

[https://github.com/Digital-Peak/DPAttachments/commit/1cf5ee5bda858fe036032ecc20b5f437d761b013#diff-8](https://github.com/Digital-Peak/DPAttachments/commit/1cf5ee5bda858fe036032ecc20b5f437d761b013#diff-8)

# java - Windows批处理文件多次运行jar文件

> ID：13791654
> 
> 赞同：5
> 
> 时间：2012-12-09T20:46:31.123
> 
> 标签：java, for-loop, batch-file, jar

我想制作一个从用户输入运行 jar X 次的批处理文件。我一直在寻找如何处理用户输入，但我并不完全确定。在这个循环中，我想增加发送到 jar 的参数。

到目前为止，我不知道

*   操作for循环中的变量，numParam，strParam

所以，当我从命令行运行这个小 bat 文件时，我可以进行用户输入，但是一旦进入 for 循环，它就会吐出“命令的语法不正确

到目前为止，我有以下

```
@echo off

echo Welcome, this will run Lab1.jar
echo Please enter how many times to run the program
:: Set the amount of times to run from user input
set /P numToRun = prompt

set numParam = 10000
set strParam = 10000
:: Start looping here while increasing the jar pars
:: Loop from 0 to numToRun
for /L %%i in (1 1 %numToRun%) do (
    java -jar Lab1.jar %numParam% %strParam%

)
pause
@echo on 
```

任何建议都会有所帮助

**编辑：** 随着最近的变化，它似乎没有运行我的 jar 文件。或者至少似乎没有运行我的测试回显程序。似乎我的用户输入变量没有设置为我输入的内容，它保持在 0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:33:11.423

如果您阅读文档（键入`help for`或`for /?`从命令行），那么您将看到执行 FOR 循环固定次数的正确语法。

```
for /L %%i in (1 1 %numToRun%) do java -jar Lab1.jar %numParam% %strParam% 
```

如果要使用多行，则必须使用续行

```
for /L %%i in (1 1 %numToRun%) do ^
  java -jar Lab1.jar %numParam% %strParam% 
```

或括号

```
for /L %%i in (1 1 %numToRun%) do (
  java -jar Lab1.jar %numParam% %strParam%
  REM parentheses are more convenient for multiple commands within the loop
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:32:17.447

发生的事情是我的最后一个问题是变量如何扩展。这实际上是 dreamincode.net 上的答案：[这里](http://www.dreamincode.net/forums/topic/303379-how-to-manipulate-variables-in-batch-loop/page__view__findpost__p__1764502)

最终代码：

```
@echo off

echo Welcome, this will run Lab1.jar
:: Set the amount of times to run from user input
set /P numToRun= Please enter how many times to run the program: 

set /a numParam = 1000
set /a strParam = 1000

setlocal enabledelayedexpansion enableextensions

:: Start looping here while increasing the jar pars
:: Loop from 0 to numToRun
for /L %%i in (1 1 %numToRun%) do (
    set /a numParam = !numParam! * 2
    set /a strParam = !strParam! * 2
    java -jar Lab1.jar !numParam! !strParam!

    :: The two lines below are used for testing
    echo %numParam%  !numParam!
    echo %strParam%  !strParam!
)

@echo on 
```

# mysql - Mysql Query 运行速度更快

> ID：13791656
> 
> 赞同：4
> 
> 时间：2012-12-09T20:46:49.040
> 
> 标签：mysql

表结构：

```
CREATE TABLE IF NOT EXISTS `logs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user` bigint(20) unsigned NOT NULL,
  `type` tinyint(1) unsigned NOT NULL,
  `date` int(11) unsigned NOT NULL,
  `plus` decimal(10,2) unsigned NOT NULL,
  `minus` decimal(10,2) unsigned NOT NULL,
  `tax` decimal(10,2) unsigned NOT NULL,
  `item` bigint(20) unsigned NOT NULL,
  `info` char(10) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `item` (`item`),
  KEY `user` (`user`),
  KEY `type` (`type`),
  KEY `date` (`date`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 PACK_KEYS=0 ROW_FORMAT=FIXED; 
```

询问：

```
SELECT logs.item, COUNT(logs.item) AS total FROM logs WHERE logs.type = 4 GROUP BY logs.item; 
```

表包含 110k 记录，其中 50k 类型 4 记录。执行时间：0.13秒

我知道这很快，但我可以让它更快吗？

我预计有 100 万条记录，因此时间会增长很多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:15:31.423

使用 EXPLAIN 分析查询：

```
mysql> EXPLAIN SELECT logs.item, COUNT(logs.item) AS total FROM logs 
    WHERE logs.type = 4 GROUP BY logs.item\G

           id: 1
  select_type: SIMPLE
        table: logs
         type: ref
possible_keys: type
          key: type
      key_len: 1
          ref: const
         rows: 1
        Extra: Using where; Using temporary; Using filesort 
```

“使用临时；使用文件排序”表示一些昂贵的操作。因为优化器知道它不能依赖每个值`item`存储在一起的行，所以它需要扫描整个表并收集临时表中每个不同项目的计数。然后对生成的临时表进行排序以产生结果。

您需要按该顺序在列（类型、项目）上的日志表上建立索引。然后优化器知道它可以利用索引树在移动到下一个值之前完全扫描 logs.item 的每个值。通过这样做，它可以跳过临时表来收集值，并跳过结果的隐式排序。

```
mysql> CREATE INDEX logs_type_item ON logs (type,item);

mysql> EXPLAIN SELECT logs.item, COUNT(logs.item) AS total FROM logs 
    WHERE logs.type = 4 GROUP BY logs.item\G

           id: 1
  select_type: SIMPLE
        table: logs
         type: ref
possible_keys: type,logs_type_item
          key: logs_type_item
      key_len: 1
          ref: const
         rows: 1
        Extra: Using where 
```

# r - 从数组生成数据框以进行逻辑回归

> ID：13791657
> 
> 赞同：3
> 
> 时间：2012-12-09T20:46:56.187
> 
> 标签：r

假设你有一个数组

```
dat <-  array(c(126, 100, 35, 61, 908, 688, 497, 807, 913, 747, 336, 598, 235, 172, 58, 121,402, 308, 121, 215, 182, 156, 72, 98, 60, 99, 11, 43, 104, 89, 21, 36), dim = c(2, 2, 8),dimnames = list(a = c(1, 0), b = c(1, 0), c = 1:8))

> > dat
, , c = 1

   b
a     1  0
  1 126 35
  0 100 61

, , c = 2

   b
a     1   0
  1 908 497
  0 688 807

, , c = 3

   b
a     1   0
  1 913 336
  0 747 598

, , c = 4

   b
a     1   0
  1 235  58
  0 172 121

, , c = 5

   b
a     1   0
  1 402 121
  0 308 215

, , c = 6

   b
a     1  0
  1 182 72
  0 156 98

, , c = 7

   b
a    1  0
  1 60 11
  0 99 43

, , c = 8

   b
a     1  0
  1 104 21
  0  89 36 
```

并且您想要拟合逻辑回归来预测 a。有没有一种简单的方法可以从此数组生成数据框以在 glm 中使用？即像这样的数据框

```
a b c
1 1 1 for 126 rows then
...
0 1 1 for 100 rows, etc. 
```

基本上，当给定带有计数的表时，我需要获取适合逻辑回归的数据。似乎应该有一种简单的方法来做到这一点，而无需手动生成数据。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:29:51.033

一种方法是从包`melt`中的函数开始`reshape2`：

```
library(reshape2)

datM <- melt(dat)
head(datM, 2)
#   a b c value
# 1 1 1 1   126
# 2 0 1 1   100 
```

然后`dcast`该数据获得一行上的结果数量：

```
dat2 <- dcast(datM, b + c ~ a)
head(dat2, 2)
#   b c   0   1
# 1 0 1  61  35
# 2 0 2 807 497 
```

然后，您可以使用此数据执行 a `glm`，其中响应是一个 2 列矩阵，给出成功和失败的数量：

```
response <- as.matrix(dat2[, c(4, 3)])
bb <- dat2[, "b"]
cc <- dat2[, "c"]
glm1 <- glm(response ~ bb + cc, family = binomial(link = "logit")) 
```

* * *

但是，模型自由度（和对数似然等）不会反映您在问题中要求的数据结构。要获得您所针对的特定数据结构，您可以返回`datM`对象。

**编辑：**

以下循环遍历除列`datM`之外的所有列`value`，重复值`datM$value`次：

```
datRep <- lapply(datM[-grep("value", names(datM))], rep, times = datM$value) 
```

然后将其转换`cbind`为 a`matrix`并转换为`data.frame`以获得您想要的数据结构：

```
dat3 <- as.data.frame(do.call(cbind, datRep))

glm2 <- glm(a ~ b + c, data = dat3, family = binomial(link = "logit")) 
```

两个模型的系数相同：

```
> coef(glm1)
(Intercept)          bb          cc 
-0.43854838  0.77039283 -0.03328575 
> coef(glm2)
(Intercept)           b           c 
-0.43854838  0.77039283 -0.03328575 
```

但是，如前所述，自由度等不会是：

```
> glm1$deviance
[1] 29.39535
> glm2$deviance
[1] 11381.87 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:25:01.157

像罪一样丑陋，但为这个例子做了你需要的。

```
dat1 <- data.frame(value = as.vector(dat),
    a=dimnames(dat)$a,
    b=rep(dimnames(dat)$b, each=length(dimnames(dat)$a)),
    c=rep(dimnames(dat)$c, each=length(dimnames(dat)$a)*length(dimnames(dat)$b))) 
```

最好使用`melt`，如@BenBarnes 的回答。这更加灵活并且避免了因子的产生。

```
dat1 <- melt(dat) 
```

然后要获得扩展的行，您可以使用`rep`

```
dat2 <- data.frame(a=rep(dat1$a, dat1$value),
                   b=rep(dat1$b, dat1$value),
                   c=rep(dat1$c, dat1$value)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T23:27:41.723

另一种使用基本函数来获取计数数据的替代方法，然后您可以将其扩展为@MatthewLundberg 的答案：

```
dat1 <- data.frame(do.call(expand.grid,dimnames(dat)),value=as.vector(dat))

   a b c value
1  1 1 1   126
2  0 1 1   100
3  1 0 1    35
4  0 0 1    61
5  1 1 2   908
... 
```

扩展为从先前的答案中窃取...

```
dat2 <- data.frame(a=rep(dat1$a, dat1$value),
                   b=rep(dat1$b, dat1$value),
                   c=rep(dat1$c, dat1$value)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-02T12:51:17.707

承担第一部分的最小方法是将数组转换`data.frame`为`as.data.frame.table`. 然后按照@MatthewLundberg 或@thelatemail 的建议进行操作。

```
df0 <- as.data.frame.table(dat)

head(df0)
#    a b c Freq
# 1  1 1 1  126
# 2  0 1 1  100
# 3  1 0 1   35
# 4  0 0 1   61
# 5  1 1 2  908
# 6  0 1 2  688 
```

# c++ - 仅威胁唯一字符串 - 什么是更快的向量 或者只是 std::string

> ID：13791658
> 
> 赞同：0
> 
> 时间：2012-12-09T20:47:00.757
> 
> 标签：c++, string, stl, vector, find

我从文件中读取了一些字符串，我需要忽略我已经处理过的字符串。首先，我的想法是创建`vector<std::string>`我将存储字符串的位置，并在收到新的字符串后检查它是否已经在向量中。但是后来我虽然可以使用 just 来做同样的事情`std::string`，但我认为它更快并且使用更少的内存，但是这种方式在使用 vector 时并不那么明显。哪种方法更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:48:16.150

更好的解决方案是将您读过的字符串存储在`std::set<string>`.

集合查找通常比 . 中的查找更快`vector`，因为 C++ 标准库中的集合组织为二叉树。如果您将所有字符串放在一个长字符串中，您的搜索将保持线性，并且您还有一个问题需要解决：处理*单词别名*。如果没有分隔符，您将无法按原样连接字符串，因为您无法区分`"abc"+"xyz"`和`"abcxyz"`

# c++ - 使用 C++11 迭代语法时从 STL 列表中删除

> ID：13791662
> 
> 赞同：4
> 
> 时间：2012-12-09T20:47:45.510
> 
> 标签：c++, for-loop, c++11

> **可能重复：**
> [在基于范围的 for 循环内从容器中删除元素](https://stackoverflow.com/questions/8624686/erasing-an-element-from-a-container-while-inside-a-range-based-for-loop)

[与此类似](https://stackoverflow.com/questions/596162/can-you-remove-elements-from-a-stdlist-while-iterating-through-it)`for( auto item : list )`，您能否在使用新语法对其进行迭代时从 STL 列表中删除？

这是一个完整的示例（崩溃了！）

```
#include <list>
using namespace std ;

int main()
{
  list<int> li;
  li.push_back( 4 ) ;
  li.push_back( 5 ) ;
  li.push_back( 6 ) ;
  for( auto num : li )
  {
    if( num == 5 )
      li.remove( num ) ;
    else
      printf( "%d\n", num ) ;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:01:57.657

你不能。您的示例崩溃是因为您使用`li.remove(num)`不正确并且内部 for 循环迭代器无效。

`li.remove(num)`不应在循环中使用，而应作为独立语句使用。List 成员函数`remove`遍历列表的所有元素并删除等于 value 的元素。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-12-09T22:08:13.510

我只需将您的代码输入编译器，看看它是否有效。

# java - 为什么我无法刷新 ListWindow 的内容

> ID：13791666
> 
> 赞同：1
> 
> 时间：2012-12-09T20:48:16.227
> 
> 标签：java, timer, jframe, invalidation, pack

所以这就是我的情况：我有一个计时器，它会在后台更新值，直到某个值达到某个点。

但是为了让我看到每个值的更新，我目前必须添加一个“new ListWindow();” 我的 for 循环中的语句。

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
/**
 * Write a description of class Timing here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class Timing
{

/**
 * Constructor for objects of class Timing
 */
public static void Timer()
  {
    Timer timer = new Timer(250, new TimerListener());
    timer.start();
  }

private static class TimerListener implements ActionListener
  {
    public void actionPerformed(ActionEvent e)
    {
        while(valX != 100)
        {
            Timer();
            MainProg.valX += 5;   
            // new ListWindow(); //statement goes here. it creates a new window
                                 //each time it updates the value.
        }
    }
  }
} 
```

我的问题是：我不想要一个新窗口。我希望该值来自的列表（见下文）更新其值并刷新当前窗口中的列表。也许点击按钮。

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.Component.*;

/**
 * Write a description of class ListWindow here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class ListWindow extends JFrame
{
    private    JPanel StatsPanel; //holds stats
    private    JPanel ButtonPanel; //holds stats
    private    JList StatList; //inventory

    private    JButton RefreshButton; // a button

    private    String[] Stats = 
               {"Stuff " + Stuff, "Value " + valX, "Test " + per};

/**
 * Constructor 
 */
public ListWindow()
{
    setTitle("STATS");

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    setLayout(new BorderLayout());

    buildStatsPanel();
    buildButtonPanel();
    RefreshButton.addActionListener(new ButtonListener());
    add(StatsPanel, BorderLayout.CENTER);
    add(ButtonPanel, BorderLayout.SOUTH);

    pack();
    setVisible(true);
}

public    void buildStatsPanel()
{
    StatsPanel = new JPanel();

    StatList = new JList(Stats);

    StatList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

    StatsPanel.add(StatList);
}

public    void buildButtonPanel()
{
    ButtonPanel = new JPanel();

    RefreshButton = new JButton("Refresh");

    ButtonPanel.add(RefreshButton);

}
private    class ButtonListener
implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        String actionCommand = e.getActionCommand();
        if(actionCommand.equals("Refresh"))
        {
            pack();
            invalidate();
            validate();
        }
    }
}

public    void RunMain(String[] args)
{
    new ListWindow();
}

} 
```

另外：这是我运行东西的主要方法。您还应该注意到，我在此处粘贴的另外两个片段中有主要方法。我这样做是为了可以单独运行，以便快速调试和将来使用。

```
/**
 * Write a description of class MainProg here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class MainProg
{
public static int stuff = 100;
public static int valX = 0;
public static int per = 100;    
/**
 * Constructor for objects of class Game
 */
public static void main()
{
  new MoveWindow();
  new ListWindow();
  while (valX != 100)
  {
      Timing.Timer();
    }
}
} 
```

我对 java 很陌生，我一直在寻找其他解决方案，但无法找到我认为我需要的东西。也许我确实找到了它，并且没有将其视为解决方案。

感谢所有帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:57:28.200

使用新值调用更新列表的函数（`JList` `ListModel`提供 Object 数组时使用的默认值相当不灵活，您可能需要使用不同的`ListModel`而不是默认值）。

# c# - Ubuntu linux 上的 Monodevelop + NAudio 告诉我“表达式表示方法组的类型

> ID：13791669
> 
> 赞同：1
> 
> 时间：2012-12-09T20:49:01.433
> 
> 标签：c#, linux, ubuntu, monodevelop, naudio

我已经在我的项目中引用了 NAudio 库，但是当我运行我的代码时，它会告诉我一些类似于“表达式表示 a `type`，其中 a`method group`是预期的。

这是我的代码，错误在`waveFile = WaveFileReader("somefile.wav");`

```
using System;
using Gst;
using GLib;
using Gst.BasePlugins;

using NAudio;
using NAudio.Wave;

namespace record_audio_simple_test
{

    class MainClass
    {

        //Define class variables
        private NAudio.Wave.WaveFileReader waveFile = null;
        private NAudio.Wave.DirectSoundOut output = null;

        public static void Main (string[] args)
        {
            waveFile = WaveFileReader("somefile.wav");
        }
    }
} 
```

我正在使用 MonoDevelop、Ubuntu Linux 和 NAudio，我的目标硬件是一个嵌入式 linux 盒子，但首先我需要让它工作，然后我尝试将它移植到我正在使用 NAudio 的嵌入式盒子，因为我认为它会是交叉的- 兼容，只要它们是安装在目标系统上的受支持的编解码器（如 Gstreamer 或 w/e）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:52:37.323

看看你的代码，你确定它不会看起来像这样吗？：

```
 WaveFileReader waveFile = new WaveFileReader("somefile.wav"); 
```

如果我错了，请纠正我。如果我没记错的话，希望我能有所帮助。

# vb.net - 从 SerialPort.Read() 获取无效的跨线程操作

> ID：13791674
> 
> 赞同：0
> 
> 时间：2012-12-09T20:49:20.553
> 
> 标签：vb.net, exception-handling, serial-port, arduino

我正在用 Visual Basic 编写一个程序，它将从串行端口读取使用外部控制器（Arduino）发送的文本命令。但是，当我尝试测试代码时出现错误：

> 跨线程操作无效

代码如下所示：

```
 Private Sub SerialPort1_DataReceived(sender As Object, e As SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived
    Dim Data As String = SerialPort1.ReadExisting()
    If Data = "l" Then
        LeftRadio.Checked = True
    ElseIf Data = "r" Then
        RightRadio.Checked = True
    ElseIf Data = "c" Then
        CenterRadio.Checked = True
    End If
End Sub

Private Sub connect_Click(sender As Object, e As EventArgs) Handles connect.Click
    If Not SerialPort1.IsOpen Then
        SerialPort1.PortName = "COM3"
        SerialPort1.Open()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:45:25.213

我发现该`DataReceived`事件通常不会按照您的想法工作，并且可能会在事件中运行代码时阻塞串行端口。

我的偏好是以`Timer`合理的速度（例如每秒 5 次）运行的表单添加一个。

在 Timer`OnTick`事件中，您可以测试`SerialPort1.BytesAvailable`数据是否已到达。然后`ReadExisting()`像上面一样使用。

计时器代码将不太容易出现跨线程问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:56:48.183

请参阅[无效的跨线程操作和无效](https://stackoverflow.com/a/5037487/41956)的[跨线程操作：控件从创建它的线程以外的线程访问](https://stackoverflow.com/questions/142003/cross-thread-operation-not-valid-control-accessed-from-a-thread-other-than-the)

简短回答：您在不允许的非 UI（主）线程中执行 UI 操作。

在 VB.NET 中应该是这样的：

```
Dim check = Sub()
                LeftRadio.Checked = True
            End Sub
LeftRadio.Invoke(check) 
```

# algorithm - 带路径压缩的加权快速联合 - 实现

> ID：13791680
> 
> 赞同：3
> 
> 时间：2012-12-09T20:49:45.117
> 
> 标签：algorithm, data-structures, union-find

我正在为联合/查找结构实现快速联合算法。**[在“Java 中的算法”图书站点](http://algs4.cs.princeton.edu/15uf/WeightedQuickUnionPathCompressionUF.java.html)**给出的实现中，普林斯顿实现在实现路径压缩（在`find()`方法中）时未能保持树的大小不变。这不应该对算法产生不利影响吗？还是我错过了什么？另外，如果我是对的，我们将如何修改大小数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:08:38.033

除非我弄错了，否则我认为这段代码确实保持了每棵树的根存储其子树中节点数的不变量。

创建数据结构时，请注意构造函数`sz[i] = 1`为林中的每个节点设置。这意味着这些值开始时是正确的。

在**联合**操作期间，数据结构正确调整合并树的根的大小。因此，在任何**联合**操作之后，所有的树根都有正确的大小。

**虽然您在查找**步骤中的路径压缩期间没有更新大小是正确的，但数据结构没有理由在这里改变大小。路径压缩只是减少从某些树中的节点到树根的路径长度。它不会更改存储在该树中的节点数。因此，在进行路径压缩的树的根部的大小信息不需要改变。尽管一些内部子树可能会因为它们在树中更高的位置而失去一些子树，但这无关紧要，因为联合/查找结构只需要在其树的根部维护大小信息，而不是在内部节点处。

总的来说，这意味着数据结构确实正确地存储了大小信息。对运行时没有不利影响，也不需要纠正任何事情。

希望这可以帮助！

# python - Pi的莱布尼茨公式 - Python

> ID：13791684
> 
> 赞同：-5
> 
> 时间：2012-12-09T20:49:51.350
> 
> 标签：python

我在编写一个函数来使用莱布尼茨符号计算 pi 的近似值时遇到问题。

莱布尼茨公式：

[http://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80#Inefficiency](http://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80#Inefficiency)

如果有人可以帮助我指出这样做的正确方向，那就太好了

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:57:25.557

那么这是我的想法，使用`sum`和生成器表达式：

```
n = 5000000  # terms of sequence to include

print 4 * sum((-1.)**k / (2*k + 1) for k in xrange(n))
print math.pi  # for comparison 
```

```
3.14159245359
3.14159265359

```

使用您发布的身份：

![在此处输入图像描述](../Images/5b4bd756042706a863d9b1e198c7ed39.png)

如果您还没有阅读过它，那么这个和的收敛速度相当慢，因此它不是一个特别好的近似 pi 的方法。

# ruby-on-rails - 在“填空”时使用 Ruby 迭代不规则数据

> ID：13791685
> 
> 赞同：2
> 
> 时间：2012-12-09T20:50:02.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, highcharts

我正在滚动以下内容：

*   导轨 3.2.9
*   海图
*   状态机

我有一组不规则的数据，代表了数百个 linux 机器的状态变化。每个盒子每两分钟检查一次中央 ping 服务器。

每次设备心跳时，ping 服务器都会检查设备的当前状态是否为离线，如果是，则将状态更改为在线，并将心跳表的在线列设置为 true，并插入发生这种情况的时间。

在 ping 服务器上，我们有一个每 5 分钟运行一次 rake 任务的 cron。这会发现所有设备的心跳小于现在的时间减去 5 分钟。

如果发现设备离线，则将设备状态设置为离线，并用最后一次心跳的时间和 0 标记到心跳表。

我们已经这样做了一段时间，这似乎是一种有效的方式来存储正常运行时间数据，而无需每 5 分钟为 500 台设备创建一行。

该表看起来有点像这样：

```
+---------------------+--------+--------+
| created_at          | dev_id | online |
+---------------------+--------+--------+
| 2012-10-08 16:29:16 |   2345 |      0 |
| 2012-11-21 16:40:22 |   2345 |      1 |
| 2012-11-03 19:15:00 |   2345 |      0 |
| 2012-11-08 09:15:01 |   2345 |      1 |
| 2012-11-08 09:18:03 |   2345 |      0 |
| 2012-11-09 17:57:22 |   2345 |      1 |
| 2012-12-09 13:57:23 |   2345 |      0 |
| 2012-12-09 14:57:25 |   2345 |      1 |
| 2012-12-09 15:00:30 |   2345 |      0 |
| 2012-12-09 15:57:31 |   2345 |      1 |
| 2012-12-09 16:07:35 |   2345 |      0 |
| 2012-12-09 16:37:38 |   2345 |      1 |
| 2012-12-09 17:57:40 |   2345 |      0 |
+---------------------+--------+--------+ 
```

按照 Ryan Bate 在 Highcharts 上的精彩[Railscast](http://railscasts.com/episodes/223-charts)，我可以创建一个不规则间隔的数据折线图。

**图表和数据系列**

按照这个例子：

[http://www.highcharts.com/demo/spline-irregular-time](http://www.highcharts.com/demo/spline-irregular-time)

并使用这样的数据系列：

```
 = @devices.heartbeats.map { |o|  o.online == true ? 1 : 0 } 
```

它很好地绘制了折线图。

**我被困在哪里**

图表在最后一次签入时完成，我需要图表显示现在的一个点。在 Ryan 的示例中，如果没有值，他会将零映射到日期。我无法翻译这部分。

我正在尝试实现类似于堆栈条形图的图形，但无法对数据进行排序。

[http://www.highcharts.com/demo/bar-stacked](http://www.highcharts.com/demo/bar-stacked)

如何格式化我的查询，以便我获取直到现在的数据以及每个单独的点，以便我可以创建这样的图表？

# ruby - 在 OSX Mountain Lion (localmemcache) 上安装 Google-api-client Ruby 失败

> ID：13791687
> 
> 赞同：1
> 
> 时间：2012-12-09T20:50:43.820
> 
> 标签：ruby, gem, memcached, google-api-client, google-api-ruby-client

由于 localmemcache gem（我认为），尝试在 Mountain Lion 上为 Ruby 安装 Google-api-client 失败（我认为）。这是发生的事情：

```
Building native extensions.  This could take a while...
ERROR:  Error installing localmemcache:
    ERROR: Failed to build gem native extension.

        sh ./configure --prefix=/Users/rental/.rvm/gems/ruby-1.9.3-p125/gems/localmemcache-0.4.4/src/ruby-binding
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for ranlib... ranlib
checking for apple OS X... 
->  Apple OS X is not supported because it doesn't have 
    sem_getvalue and sem_timedwait!
    You may set the environment variable LMC_FORCE_BUILD 
    to build a version of localmemcache that cannot recover 
    from crashes. 
```

重要提示：使用 --development 安装时会发生这种情况：

```
sudo gem install google-api-client --development --force --no-rdoc --no-ri 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:04:42.290

不确定 lmc 来自哪里，但它不是库的直接依赖项，也不是正常使用所必需的。现在，建议跳过开发依赖项并安装：

```
gem install google-api-client 
```

# javascript - Greasemonkey 可以在新页面上保持脚本数据和连接活动或重新加载吗？

> ID：13791692
> 
> 赞同：1
> 
> 时间：2012-12-09T20:51:29.913
> 
> 标签：javascript, persistence, greasemonkey

我正在尝试制作一个将聊天添加到网页的脚本。我正在通过`node.js`服务器运行聊天`socket.IO`。

聊天有效，但我的问题是：

重新加载或更改页面时，旧连接（会话）和数据丢失，脚本在新页面上重新开始。每次打开新页面时，都需要时间来建立连接并传输过去的数据（聊天日志）。

我想知道是否可以在重新加载（页面更改）之间保持连接和数据。换句话说，在页面更改时保持聊天“不受影响”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:56:32.927

不看[**细节**](http://sscce.org/)，只能笼统地回答。

所以，是的，Greasemonkey 可以保留会话。

1.  使用 cookie 来保存与您的服务器的会话状态。请注意，它会[`GM_xmlhttpRequest()`](http://wiki.greasespot.net/GM_xmlhttpRequest)发送与普通 Firefox 请求相同的 cookie。

2.  与其从服务器获取聊天记录，不如使用[`localStorage`](https://stackoverflow.com/tags/local-storage/info).

# html - 在 a 内对齐

> ID：13791694
> 
> 赞同：1
> 
> 时间：2012-12-09T20:51:40.617
> 
> 标签：html, css, vertical-alignment

 我正在尝试在`<a>`内部对齐标签，`<li>`但我可以垂直对齐。但是`<a>`总是在顶部，**我想**将`<a>`标签垂直和水平居中

![描述情况的图片](../Images/c67b2d6880ebf18419e714809125454c.png)

您如何在图像中看到。**我需要 A. 但得到 B.**

这是 HTML

```
<ul>
<li><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a></li>
<li><a href="#">Link 3</a></li>
<ul>​ 
```

这就是 CSS

```
ul {
    line-height: 85px;
}

li {
    float: left;
    height: 85px;
    line-height: 85px;
    border: 1px solid red;
}

a {
    height: 40px;
    line-height: 40px;
    width: 40px;
    display: block;
    text-align: center;
    border: 1px solid blue;
} 
```

​可以看到jsfiddle 

[http://jsfiddle.net/Mum5e/](http://jsfiddle.net/Mum5e/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:01:23.943

您可以从该站点尝试一种方法：http: [//phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

我整理了一个快速的小提琴来展示这个：http: [//jsfiddle.net/Mum5e/1/](http://jsfiddle.net/Mum5e/1/)

基本上，通过使用绝对定位，顶部指向相对定位元素内的中间标记（50%），我们可以使其居中。然而，由于我们想要链接的中心，而不是链接的顶部，在 50% 标记处，我们更改链接的上边距以将其偏移一半高度。

注意：通过将链接更改为绝对，我们必须给`li`a 宽度，因为`a`将不再强制a`li`采用它的宽度。

CSS：

```
ul {
    line-height: 85px;
}

li {
    float: left;
    height: 85px;
    width: 40px;
    line-height: 85px;
    border: 1px solid red;
    position: relative;
}

a {
    position: absolute;
    top: 50%;
    margin-top: -20px;
    height: 40px;
    line-height: 40px;
    width: 40px;
    display: block;
    text-align: center;
    border: 1px solid blue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T21:04:13.617

您可以尝试使用`display:table-cell`和`vertical-align:middle`。我记得，这是一个跨浏览器解决方案。

看到这个[小提琴](http://jsfiddle.net/rdiaz/Mum5e/2/)

**编辑：**固定宽度的锚点：[小提琴](http://jsfiddle.net/rdiaz/Mum5e/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:09:33.577

一种解决方案是给它 21px 的上边距（容器的高度，减去元素的框高度（在本例中为边框+高度）除以 2）。

另一种解决方案是给它一个 85px 的高度和行高，有效地使文本居中，但使元素更高。

归根结底，我可能会选择 rdiazv 的解决方案，主要是因为它最简单、最容易维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T21:09:35.990

好吧，我玩了一下，这对我有用：

```
a {
height: 40px;
width: 40px;
margin-top:22.5px;
    border: 1px solid blue;
text-decoration:none;
 } 
```

# php - 如果似乎没有工作

> ID：13791695
> 
> 赞同：1
> 
> 时间：2012-12-09T20:51:40.603
> 
> 标签：php

是的，我将直接进入这个。

我正在构建一个添加朋友按钮。如果此人与会话（登录的人）在同一行，则不应回显添加朋友。

如果该人的姓名在行中，并且页面 id 与会话 id 不匹配，它应该回显一个按钮。但是名称可能在两行中，我使用简单的“||” 分开。但我的 if 不起作用。尽管它在最后，但它返回“添加朋友”。我删除了第二个“或”因素，只使用了一个语句，它起作用了。

RelatedUser 和 RelatingUser 是页面 id 结果可能存在的两个可能字段。

我的代码如下：

```
 $session_username_query = mysql_query("SELECT * FROM users WHERE username='{$_SESSION['user_login']}'");
    $session_username_assoc = mysql_fetch_assoc($session_username_query);
    $session_username = $session_username_assoc['username']; //the person who is logged in

    $profile_view_query = mysql_query("SELECT * FROM friend WHERE RelatedUser='$session_username' OR RelatingUser='$session_username'");
     $profile_view_assoc = mysql_fetch_assoc($profile_view_query);
     $related = $profile_view_assoc['RelatedUser'];
     $relating = $profile_view_assoc['RelatingUser']; 

      if ($username != $relating && $_GET['id'] != $session_username_assoc['id'] || $username != $related && $_GET['id'] != $session_username_assoc['id']) {
 $addAsFriend = '<input type="submit" name="addfriend" value="Add Friend">';
    echo $addAsFriend;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:11:43.167

我认为删除 OR 操作数 (||) 会给你想要的结果。

```
if (
    $username != $relating &&
    $username != $related &&
    $_GET['id'] != $session_username_assoc['id']
) {
    $addAsFriend = '<input type="submit" name="addfriend" value="Add Friend">';
    echo $addAsFriend;
} 
```

**编辑**

也许我误读了你的问题。这会起作用吗？

```
if (
    ($username != $relating || $username != $related) &&
    $_GET['id'] != $session_username_assoc['id']
) {
    $addAsFriend = '<input type="submit" name="addfriend" value="Add Friend">';
    echo $addAsFriend;
} 
```

# java - 如何在 ListView 中控制 LinearLayout 的子级？

> ID：13791696
> 
> 赞同：0
> 
> 时间：2012-12-09T20:51:47.637
> 
> 标签：java, android, android-linearlayout, android-arrayadapter

我刚刚将我的 ArrayAdapter 设置为 convertView 对我有利，但现在我想知道如何控制在该 listview 中使用的 LinearLayouts 的子级，假设我在 Linearlayout 中有一个 TextView ，我想调用 setText ，但我没有不知道怎么做，或者我有一个我想调用 setOnClickListener 的按钮，我不知道怎么做！

这是我的 getView 代码：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        if (convertView == null){
            convertView = inf.inflate(R.layout.normal_row, parent , false);
        }
        switch(position){
        case(0):
            // here is where my first LinearLayout goes , containing an Image and Switch which I need to program in onCheckedChangeListener ...
            convertView = (LinearLayout) inf.inflate(R.layout.row_switch, parent,false);

            break;

        case(1)
        // here I need to set the Text for the following two options on some basis , they are both linearLayouts containing a single textView which I want to call setText for each case  1 and 2.
             break;
            case(2)

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:17:36.747

假设您的 normal_row 布局中有一个 ID 为 @id/my_text_view 的 TextView。然后你会设置文本像

```
TextView view = (TextView) convertView.findViewById(R.id.my_text_view);
view.setText("Some text"); 
```

您可以以类似的方式访问您通过其 id 膨胀的布局中的任何内容。

需要注意的一件事是，您似乎在夸大两种类型的视图。假设您尝试使用我给您的代码，但`my_text_view`仅在 normal_row 中。然后，如果您膨胀了`row_switch`视图，findViewById() 将返回 null，因为它找不到具有给定 id 的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:17:52.600

使用 onItemClick 并通过 OnItemClickListener 为您提供的视图找到您的视图！

例如：`mListView.setOnItemClickListener(new OnItemClickListener() {

```
 @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

        }

    });` 
```

通过传递的 View 在每个 listView 子项中找到您的 textview 或您的按钮。

例子：`TextView tempTextView = (TextView) arg1.findViewById(R.id.myTextView);`

textview 的 id 是您在每一行的膨胀布局中分配给它的那个！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:19:11.950

```
TextView textview = (TextView) convertView.findById(R.id.txt); 
text.setText("textview");

Button btn  = (Button) convertView.findById(R.id.btn); 

btn.setTag(textview); 

btn.setOnClickListener(...)
{
   onClick(..){
      TextView t = (Textview)btn.getTag():
      t.setText("new value")

   }
} 
```

我建议你看看我之前回答的[问题](https://stackoverflow.com/questions/13738888/i-have-a-listview-where-each-row-contains-an-edittext-field-and-textview-what/13741285#13741285)。

# html - 如何安排像 pinterest 这样的内容块？

> ID：13791697
> 
> 赞同：1
> 
> 时间：2012-12-09T20:51:48.877
> 
> 标签：html, css

[http://pinterest.com/](http://pinterest.com/)有一个有趣的块结构。我怎样才能做到这一点？

现在我有这个代码：
`li {`
`float:left;`
`margin-right:10px;`
`}`

我得到了这个结果：http: [//imageshack.us/photo/my-images/339/49022374.png](http://imageshack.us/photo/my-images/339/49022374.png)

但是，我需要这个：http: [//imageshack.us/photo/my-images/197/86816998.png](http://imageshack.us/photo/my-images/197/86816998.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:00:56.807

为什么要涉及 JS？

您只需要一些带有内部 div 的浮动列 div

这是一个简单的[小提琴](http://jsfiddle.net/M34e2/)

HTML

```
<div class="col">
   <div>
       Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velitmentum vestibulum. Aenean faucibus nunc sed quam vehicula laoreet. Aliquam
</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis ligula, et sagitti</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagitti
</div>
</div>
<div class="col">
    <div>
       Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis ligula, et sagittis nibh nulla eget purus. Nunc nec tellus massa. Cras sit amet tortor nec libero condimentum vestibulum. Aenean faucibus nunc sed quam vehicula laoreet. Aliquam
</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis ligula, et sagitti</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis ligula, et sagittis nibh nulla eget purus. Nunc nec tellus massa. Cras sit amet tortor nec libero condimentum vestibulum. Aenean faucibus nunc sed quam vehicula laoreet. Aliquam
</div>
</div>
<div class="col">
    <div>
       Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante 
</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis ligula, et sagitti</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis l
</div>
</div>
<div class="col">
    <div>
       Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ant
</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis ligula, et sagitti</div>
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porta arcu quis risus ultricies viverra ac at velit. Morbi congue, tellus a faucibus euismod, velit ante sagittis li
</div>
</div> 
```

​ CSS

```
.col {
width:20%;
    float:left;

}
.col div {
margin:10px;
    padding:5px;
    border:1px solid black;
}
​ 
```

# c# - 如何在C#中截取网页截图

> ID：13791699
> 
> 赞同：0
> 
> 时间：2012-12-09T20:52:01.887
> 
> 标签：c#, webbrowser-control

我对 C# 编码完全陌生 - 我正在尝试截取网页的屏幕截图，这些网页的 URL 最初是从在同一表单上上传的记事本中提取的。

当我阅读`web_browser`MSDN 中有关控件的文档时。我确实得到了以下代码 - 但是当我运行时，我只得到白屏

我尝试上传一个`.txt`（谷歌/雅虎网址作为两行测试数据）

有人可以说除了处理我在 MSDN 中读到的应该得到我想要的东西之外，我还应该注意什么。

PS：如果我在编码风格上大错特错，请原谅..如前所述，我刚刚开始我的 C# 编码:)

我试过的代码...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace MSDN_wbc_tut1
{
    public partial class Form1 : Form
    {
        public int temp = 0;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void FileUploadButton1_Click(object sender, EventArgs e)
        {
            //once a file is uploaded i want Pgm to read contents & browse them as URLS

            OpenFileDialog openFileDialog = new OpenFileDialog();
            openFileDialog.CheckFileExists = true;
            openFileDialog.AddExtension = true;
            openFileDialog.Multiselect = true;

            //Filtering for Text files alone
            openFileDialog.Filter = "text files (*.txt)|*.txt";

            //if file is selected we must then do our coding part to proceed hecneforth

            if (openFileDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                //my code to say pgm wat to do once upload done...

                //Getting my Chosen file's name
                string Fileuploaded = openFileDialog.FileName;

                //Read all line opens files - reads till EOF & closes ,prevents a while condition
                string[] FileuploadedContent = System.IO.File.ReadAllLines(Fileuploaded);

                foreach (string s in FileuploadedContent)
                {
                    NavigateContent(s);
                }
            }
        }

        private void NavigateContent(string lineasurl)
        {
            // Add an event handler that images the document after it loads.

            try
            {
                webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler
                (takescreen);
                webBrowser1.Navigate(new Uri(lineasurl));
                //webBrowser1.Navigate(lineasurl); also works

            }                
            catch (System.UriFormatException)
            {
                return;
            }
        }

        private void takescreen(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            //specifying sample values for image or screenshot size
            int x = 600, y = 700;
            Bitmap bitmap = new Bitmap(x, y);
            webBrowser1.DrawToBitmap(bitmap, new Rectangle(0, 0, x, y));

            //to give each screen a unique name - i append some no onto it
            temp = temp + 1;

            string TempFname = "Screenshotref" + temp.ToString() + "." + "jpg";
            bitmap.Save(TempFname);
        }
    }
} 
```

# mysql - 数据库连接错误（2）：无法在本地机器上连接 MySQL for Yoomla

> ID：13791703
> 
> 赞同：-1
> 
> 时间：2012-12-09T20:52:23.870
> 
> 标签：mysql, joomla, cpanel

今天我有一个在 Joomla 中的新项目。我在我的电脑上下载了网站代码。网站管理面板是 cpanel。

我以前从未对 Joomla 网站做过任何事情。

当我在本地机器 (http://localhost/ppp/public_html/index.php) 上打开网站时，它显示数据库连接错误 (2)：无法连接到 MySQL。但是，我已经更改了 configuration.php 文件（我猜我需要更改它）：

```
//Before my changes it was the following:
public $host = 'localhost';
public $user = 'reiuser_reiuser';
public $password = 'password';
public $db = 'reiuser_reiuser';

//After my changes:
public $host = '174.121.134.94'; //IP was displayed in cpanel
public $user = 'reiuser_reiuser';
public $password = 'password';
public $db = 'reiuser_reiuser'; 
```

我已阅读有关此错误的信息，并且大多数人说要检查连接数据。但是，我可以使用这些连接数据成功连接 HeidiSql（用户/密码/数据库已更改）。

也许这里没有足够的信息，但也许 Joomla 开发人员可以建议做什么？哪个 Joomla 文件正在连接？也许我可以做一些回声来了解错误的原因？网站正在使用 CPanel。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:05:30.180

你可以试试 mysql_connect(); 就在你的 conf 在异常之后使用 die() 以确保这是使用的配置而不是其他配置文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:35:40.947

当我尝试直接使用 mysql_connect 时，我得到了类似 mysql_connect() [function.mysql-connect]: Premature end of data (mysqlnd_wireprotocol... The link for a sollution I have found [here](https://stackoverflow.com/questions/6099434/premature-end-of-data-error-with-php)之类的东西。

“出现上述问题是因为PHP和MySql版本不兼容，多半是远程访问db时出现。”

我降级了我的 php 和 apache（我正在使用 wamp），现在连接正常。

# c# - 调试时显示奇怪的对象成员

> ID：13791704
> 
> 赞同：3
> 
> 时间：2012-12-09T20:52:24.447
> 
> 标签：c#, visual-studio-2010, debugging, .net-4.0, console

使用 VS2010 Ultimate SP1 调试器检查类的实例（普通类，由字符串、整数和布尔值组成）时，我可以看到我在类中定义的所有道具，但我也注意到了一些不应该存在的东西。

它们带有一个蓝色框符号和一个“？”。

这些是什么？

我的班级生病了吗？它们是类肿瘤吗？（哈哈）……甚至更糟。

我的 VS2010 有癌症吗？

这是一个屏幕截图，所以你可以明白我的意思。

提前致谢

![在此处输入图像描述](../Images/aac52dbfcbbb792290504678bb849e01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:25:36.130

是的，我的 VS2010 有一些奇怪的**退行性疾病**。我希望它只是我的。

我发现那些'？是 VS2010 在检查对象时创建的垂直空间中通常无法显示的类的成员。

**1）**你检查一个对象。VS 向您显示 (x) 第一个成员和一个向下箭头。

![第一个检查员屏幕](../Images/4768644af9742646e0e2b102e1b764e0.png)

**2）**您将鼠标悬停在向下箭头上，VS 将显示您缺少的内容。

![成员的正常扩展](../Images/3c317a273fa7fa1270a46dc3432d8dff.png)

**3）**如果你重复练习（再次加载检查器）但使用鼠标滚轮而不是使用向下箭头中的鼠标悬停，你会看到奇怪的东西。

![阿尔茨海默病 VS2010](../Images/96a5a0c682c9a5dfedbf0b0e1c056713.png)

# windows-8 - 如何访问从链中上一个任务返回的变量？

> ID：13791705
> 
> 赞同：1
> 
> 时间：2012-12-09T20:52:30.367
> 
> 标签：windows-8, c++-cx

我有以下任务链，我想`decoder`在最后一个任务中访问变量，但在更早的任务中创建。

```
create_task(file->OpenReadAsync()).then([](IRandomAccessStream^ inStream) {
    return BitmapDecoder::CreateAsync(inStream);

}).then([localFolder](BitmapDecoder^ decoder) {
    return localFolder->CreateFileAsync("map.png", CreationCollisionOption::ReplaceExisting);

}).then([](StorageFile^ outFile) {
    return outFile->OpenAsync(FileAccessMode::ReadWrite);

}).then([](IRandomAccessStream^ outFileStream) {
    return BitmapEncoder::CreateAsync(BitmapEncoder::PngEncoderId, outFileStream);

}).then([](BitmapEncoder^ encoder) {
    BitmapPixelFormat pixelFormat = decoder->BitmapPixelFormat; // how do I make decoder available here?
    // Do stuff that uses encoder & decoder
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:40:29.990

最后，我只是将我需要的变量分配给包含任务链的函数的本地变量。

# jboss - 基于表单的 JAAS 身份验证：登录 index.xhtml 并停留在 index.xhtml

> ID：13791708
> 
> 赞同：1
> 
> 时间：2012-12-09T20:52:55.723
> 
> 标签：jboss, jaas

*我想这个问题之前已经在某个地方得到了回答，但是搜索 jaas 和基于表单的身份验证并没有帮助：*

我想在我的 JSF 应用程序中使用 JAAS，因为我喜欢您可以在不更改应用程序的情况下将登录模块从数据库更改为 Ldap 的想法。

但是，`web.xml`登录配置似乎仅限于`BASIC`, `CLIENT-CERT`,`FORM`等，我不想使用其中任何一个。基于表单的身份验证似乎接近我的需要，但我没有严格区分公共页面和受限页面。

**我只希望用户能够（*可选地*）登录但无需任何重定向即可`index.xhtml`继续登录。`index.xhtml`**

如何在没有`<url-pattern>`约束的情况下使用 HTML 表单向 JAAS 进行身份验证`web.xml`？

PS：如果相关：我使用的是 JBoss AS 7.1。和JSF 2

# php - Zend Framework - 导致重写规则问题的图像链接

> ID：13791709
> 
> 赞同：1
> 
> 时间：2012-12-09T20:53:25.280
> 
> 标签：php, zend-framework, mod-rewrite

我有一个问题，我试图通过带有 target=blank 的锚链接在新窗口中简单地显示我的图像文件夹中的图像。

我将重写规则添加到公共文件夹 .htaccess 中，如以下帖子中所述：[Zend keep front controller from blocking image requests](https://stackoverflow.com/questions/10442338/zend-keep-front-controller-from-blocking-image-requests)但它仍然给我如下错误并且无法弄清楚原因。

页面中使用的所有其他图像都可以正常显示，只有链接为：

```
<a href="/images/balloon.jpeg" target="_blank">Balloon</a> 
```

异常消息是

```
Exception information:

Message: Invalid controller specified (images)
Stack trace:

#0 /home/euphoria/public_html/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#1 /home/euphoria/public_html/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#2 /home/euphoria/public_html/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#3 /home/euphoria/public_html/public/index.php(25): Zend_Application->run()
#4 {main}  

Request Parameters:

array (
'controller' => 'images',
'action' => 'profile_uploads',
'module' => 'default',
) 
```

我的公用文件夹 .htaccess 是

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule !\.(js|ico|txt|gif|jpg|png|css)$ index.php
RewriteRule ^.*$ index.php [NC,L] 
```

我的图像文件夹中有另一个 .htaccess 文件，通过使用图像文件来停止 php 执行，其内容是

```
php_flag engine off 
```

Zend 尝试重定向到“图像”控制器的上述问题仅在我将上述 .htaccess 添加到图像文件夹时才开始发生。

当我删除具有“php_flag engine off”规则的 .htaccess 时，问题消失了

图像及其文件夹是 CHMOD 777，并且该站点位于共享托管环境中的自己的域中。（相对于子域）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:06:44.773

并且您确定在您的 DOCUMENT_ROOT 文件夹中有一个文件夹“images”，并且它包含一个名为“balloon.jpeg”的图像？

第二个重写规则本质上是无用的。

1.  它不会检测到您的“jpeg”图像，它只会检测到“jpg”图像。
2.  只有当第一条规则和所有 RewriteCond 行无法检测到您请求的资源是服务器上实际存在的文件时，才会达到此规则。
3.  尽管如此，第三条规则最终还是会发生，因为第二条规则没有被标记为“最后评估的规则”。

把它扔掉。Zend 框架的标准重写工作。如果您的情况不是这样，那么您做错了什么，很可能您没有将图像放在它所属的位置。

# ruby-on-rails - update_attributes 清除日期字段

> ID：13791713
> 
> 赞同：2
> 
> 时间：2012-12-09T20:53:49.780
> 
> 标签：ruby-on-rails, date, update-attributes

我在表单中将日期作为字符串输入，并将其作为实际日期字段存储在数据库中。在对其调用 update_attributes 时，Rails 似乎在我可以访问它之前的某个时间点清除了该值 - 即使我手动设置它，它实际上并没有被设置。

桌子：

```
 Table "public.my_objects"
   Column   |            Type             |                         Modifiers                         
------------+-----------------------------+-----------------------------------------------------------
 id         | integer                     | not null default nextval('my_objects_id_seq'::regclass)
 date       | date                        | 
 created_at | timestamp without time zone | not null
 updated_at | timestamp without time zone | not null 
```

模型：

```
class MyObject < ActiveRecord::Base
  attr_accessible :date
end 
```

安慰：

```
1.9.3p327 :001 > my_object = MyObject.new
 => #<MyObject id: nil, date: nil, created_at: nil, updated_at: nil>
1.9.3p327 :002 > my_object.date = "12-15-2012"
 => "12-15-2012"
1.9.3p327 :003 > my_object.date
 => nil 
```

现在，当我尝试使用 update_attributes 时，我想我可能能够修改 before_validation 回调中的值，但该值甚至在那里不可用：

为类添加回调：

```
class MyObject < ActiveRecord::Base
  ...
  before_validation :print_date
  def print_date
    puts "Date value: #{self.date}"
    puts "Date value: #{date}"
    puts "before validation"
  end
end

1.9.3p327 :001 > my_object = MyObject.create
   (0.2ms)  BEGIN
Date value: 
Date value: 
before validation
  SQL (72.0ms)  INSERT INTO "my_objects" ("created_at", "date", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Sun, 09 Dec 2012 20:56:04 UTC +00:00], ["date", nil], ["updated_at", Sun, 09 Dec 2012 20:56:04 UTC +00:00]]
   (0.7ms)  COMMIT
 => #<MyObject id: 15, date: nil, created_at: "2012-12-09 20:56:04", updated_at: "2012-12-09 20:56:04"> 
1.9.3p327 :002 > my_object.update_attributes :date => "12-15-2012"
   (0.1ms)  BEGIN
Date value: 
Date value: 
before validation
   (0.1ms)  COMMIT
 => true 
```

关于如何处理此问题以便它与 update_attributes 一起使用的任何想法？显然，我可以编写自定义的 setter 和 getter，但这些不会被 update_attributes 调用。

## 更新

我尝试将列更改为“thingdate”，结果相同。

目前，我已经解决了以下问题：

```
class MyObject < ActiveRecord::Base
  attr_writer :date
  attr_accessible :date

  def date= value
    update_column :date, value
  end
end 
```

无论出于何种原因，这都允许将值 - 实际上，任何看起来可能是日期的值（可能限制在 postgres 上） - 保存并存储在对象中。我不完全确定 Rails 对对象做了什么使得像这样覆盖它是必要的。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:37:29.683

看起来您的字符串不是 ActiveRecord 日期字段可以解析为日期的形式。理想情况下，您应该以可以解析的形式（例如`Fri, 03 May 2013 10:55:49 UTC +00:00`）获取数据，或者覆盖 settor 使其执行以下操作：

```
def date= value
  write_attribute :date, do_stuff_to_the_value(value)
end 
```

在数据到达对象之前对其进行操作是最好的，但无论如何在设置时将其写入数据库并不是您想要做的事情。

# java - ICS 中的 ACTION_USER_PRESENT 导致强制关闭

> ID：13791719
> 
> 赞同：0
> 
> 时间：2012-12-09T20:54:06.297
> 
> 标签：java, android, eclipse, broadcastreceiver

我试图在屏幕解锁时接收事件 ACTION_USER_PRESENT。我有一个注册的广播接收器，它应该在屏幕打开时给出一条日志消息，然后解锁。它会在屏幕上显示消息，但会在屏幕解锁期间使应用程序崩溃（用户在场）。

有任何想法吗？我已经搜索了很多次，但没有运气。顺便说一句，我在 ICS 4.0+ 上并在多个设备上进行了测试。

**这是我的广播**

```
 @Override
        public void onReceive(Context context, Intent intent) {
        Log.d("BRODCASTRECEIVER", "MAIN");

        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            // do whatever you need to do here
            Log.d("BRODCASTRECEIVER", "SCREEN OFF");
        }
        else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            // and do whatever you need to do here
            Log.d("BRODCASTRECEIVER", "SCREEN ON");
        }
        else if (intent.getAction().equals(Intent.ACTION_USER_PRESENT)) {
            Log.d("BRODCASTRECEIVER", "UNLOCK");
        }
        }
    }; 
```

**这是我如何注册它**

```
 IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(Intent.ACTION_USER_PRESENT);
intentFilter.addAction(Intent.ACTION_SCREEN_ON);
intentFilter.addAction(Intent.ACTION_SCREEN_OFF);
    registerReceiver(Receiver, intentFilter); 
```

**这是清单**

```
 <receiver android:name=".MyBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.SCREEN_ON" />
            <action android:name="android.intent.action.SCREEN_OFF" />
            <action android:name="android.intent.action.USER_PRESENT" />
        </intent-filter>
            </receiver> 
```

**日志猫**

```
12-09 12:39:45.582: E/AndroidRuntime(12710): FATAL EXCEPTION: main
12-09 12:39:45.582: E/AndroidRuntime(12710): java.lang.RuntimeException: Unable to instantiate receiver jp.dip.sugarhouse.lockscreenoverlay.MyBroadcastReceiver: java.lang.ClassNotFoundException: jp.dip.sugarhouse.lockscreenoverlay.MyBroadcastReceiver
12-09 12:39:45.582: E/AndroidRuntime(12710):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2100)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at android.os.Looper.loop(Looper.java:137)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at android.app.ActivityThread.main(ActivityThread.java:4424)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at java.lang.reflect.Method.invoke(Method.java:511)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at dalvik.system.NativeStart.main(Native Method)
12-09 12:39:45.582: E/AndroidRuntime(12710): Caused by: java.lang.ClassNotFoundException: jp.dip.sugarhouse.lockscreenoverlay.MyBroadcastReceiver
12-09 12:39:45.582: E/AndroidRuntime(12710):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-09 12:39:45.582: E/AndroidRuntime(12710):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2095)
12-09 12:39:45.582: E/AndroidRuntime(12710):    ... 10 more 
```

# mysql - MYSQL为每个用户选择最快的时间和最低的点击次数

> ID：13791722
> 
> 赞同：1
> 
> 时间：2012-12-09T20:54:24.893
> 
> 标签：mysql, greatest-n-per-group

我真的很难创建一个选择语句，它将为每个用户返回最快时间的记录。如果秒数相同，则应选择最低的“点击次数”。

如果我的表中有以下记录

```
user    seconds     clicks
1       10.23       10
1       10.12       12
1       10.12       14
2       12.11       16
3       12.34       18
3       12.00       16 
```

我需要每个用户最少的时间和点击次数，所以我需要一个查询来返回

```
user    seconds    clicks
1       10.12       12
2       12.11       16
3       12.00       16 
```

我试过的查询是

```
select user, min(seconds), min(clicks) from mytable group by user 
```

但它选择秒 10.12 并为用户 1 单击 10，这是不正确的。我可以在 1 个查询中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:02:14.083

尝试与 self 进行内部连接，如下所示：

```
 select a.user, a.seconds, a.clicks 
 from mytable a JOIN
      (SELECT user, min(seconds) as MIN_SECONDS
       FROM mytable 
       GROUP BY USER) AS b
 ON a.user = b.user AND a.seconds = b.MIN_SECONDS; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:04:28.417

这是`greatest-n-per-group`经常出现的问题的变体。

```
SELECT m.*
FROM mytable AS m
LEFT OUTER JOIN mytable AS m2 ON m.user = m2.user
  AND (m.seconds > m2.seconds OR m.seconds = m2.seconds AND m.clicks > m2.clicks)
WHERE m2.user IS NULL; 
```

解释：

我们希望`m`成为每个用户拥有最低秒数的行，或者如果最低秒数相同，则点击次数最低。换句话说，该用户不应该有其他具有较低秒数或较低点击次数的行。

使用*排除联接*尝试查找具有较低秒数或较低点击次数的任何行。如果没有找到这样的行，`m`则为具有最低值的行。

* * *

如果有多行的秒数*和*点击次数最少，则仍然可能导致平局并为用户返回多行。在这种情况下，您需要解决与其他列的关系，希望是唯一的列。

例子：

```
SELECT m.*
FROM mytable AS m
LEFT OUTER JOIN mytable AS m2 ON m.user = m2.user
  AND (m.seconds > m2.seconds OR m.seconds = m2.seconds AND (m.clicks > m2.clicks
  OR m.clicks = m2.clicks AND m.id > m2.id))
WHERE m2.user IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:47:09.437

这应该工作

```
SELECT c.userid, c.seconds, min(c.clicks) FROM clicks as c
INNER JOIN (select userid, min(seconds) as s from clicks group by userid) AS sq 
ON (c.userid=sq.userid AND c.seconds=sq.s) group by c.userid; 
```

但没有任何加入就无法完成。

您可能必须更改列和表的名称。

# ruby - Ruby中的字符串比较不起作用

> ID：13791723
> 
> 赞同：0
> 
> 时间：2012-12-09T20:54:25.310
> 
> 标签：ruby, sqlite

我不确定这里发生了什么。我需要对 Times 的两个变量进行字符串比较。一个变量是使用 .mtime 函数的 Time 对象。另一个变量取自 sqlite3 数据库。我想比较这些时间，看看修改日期是否与 sqlite3 表中列出的最后修改日期不同。这是该部分的代码。

当我打印出它们看起来相同的值时......那么为什么比较不起作用

```
def scanfile
  dir = Dir.new(Dir.pwd)
  dir.each do |file|
    fileName = File.basename(file)
    modTime = File.mtime(file).strftime("%F %T")
    lastMod = nil
    exists = checkDB(fileName)
    if exists == true
      $db.execute("SELECT DateMod FROM Files WHERE fileName = '#{fileName}'") do |mod|
        lastMod = mod
      end
      mod = modTime.to_s

      printf("modTime: #{mod} lastMod: #{lastMod}\n")
      if mod != lastMod
        $db.execute("UPDATE Files SET NumMods=NumMods+1 WHERE fileName = '#{fileName}'")
        $db.execute("UPDATE Files SET DateMod='#{modTime}' WHERE fileName = '#{fileName}'")
        print "#{fileName} updated...\n"
      end
    else
      if fileName != "." && fileName != ".."    
        inputRecord(fileName, modTime, modTime, 1)
        print "#{fileName} inserted...\n"
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:18:07.160

当您使用[`execute`](http://rubydoc.info/gems/sqlite-ruby/2.1.0/SQLite/Database%3aexecute)（或[此版本](http://rubydoc.info/gems/sqlite3-ruby/1.2.5/SQLite3/Database%3aexecute)）时，您将使用结果集的行作为字符串数组，而不是简单的字符串。所以在这里：

```
$db.execute(...) do |mod|
  #...
end 
```

你`mod`将是一个包含单个字符串的数组。问题是您要保存该数组并将其视为字符串；通过足够的`to_s`调用和类似的处理，你会得到一个对你和 Ruby 来说都是正确的字符串，并且一切都会正常工作。

您应该自己解压缩行数组：

```
$db.execute(...) do |mod|
  lastMod = mod.first
  # ------------^^^^^
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:12:50.667

好吧，我想通了。我不确定为什么要修复它，因为我认为我基本上是这样做的，但是使用：

```
if !modTime.to_s.eql? lastMod.to_s 
```

效果很好。。

# matlab - 高斯高通滤波器公式

> ID：13791727
> 
> 赞同：4
> 
> 时间：2012-12-09T20:54:54.043
> 
> 标签：matlab, image-processing

据我所知，生成高斯低通滤波器的公式是：

```
[x y] = meshgrid(round(-N/2):round(N/2), round(-N/2):round(N/2));
GaussianFilter = exp((-x.^2/(2*sigma^2)-y.^2/(2*sigma^2))); 
```

在这种情况下，高通滤波器的公式应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-18T01:33:11.003

我写的答案是基于这个[- MATLAB Image Sharpening - Gaussian High Pass Filter using (1- Gaussian Low Pass Filter)](https://stackoverflow.com/questions/15854228/matlab-image-sharpening-gaussian-high-pass-filter-using-1-gaussian-low-pass?rq=1)和评论。

```
 GaussianFilterHigh  = 1 - exp((-x.^2/(2*sigma^2)-y.^2/(2*sigma^2))); 
```

# android - 尝试声明 Spinner 时出现 Java.lang.NullPointerException

> ID：13791728
> 
> 赞同：0
> 
> 时间：2012-12-09T20:55:06.617
> 
> 标签：android, android-asynctask, nullpointerexception, spinner, android-spinner

```
public void directionSpinner (String directions []) {
        //Does some stuff to assign namedDirections [0] and namedDirections[1] a value.

        dirSpinner = (Spinner) findViewById(R.id.route_direction_spinner); //THIS IS LINE 87
        dirSpinner.setOnItemSelectedListener(this);
        ArrayAdapter<CharSequence> adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        adapter.add(namedDirections[0]);
        adapter.add(namedDirections[1]);
        dirSpinner.setAdapter(adapter);

        Log.i(TAG, "spinner populated");
} 
```

日志猫：

```
12-09 20:50:13.497: E/AndroidRuntime(857): FATAL EXCEPTION: main
12-09 20:50:13.497: E/AndroidRuntime(857): java.lang.NullPointerException
12-09 20:50:13.497: E/AndroidRuntime(857):  at android.app.Activity.findViewById(Activity.java:1839)
12-09 20:50:13.497: E/AndroidRuntime(857):  at com.nicotera.colton.londontransitguide.RoutesActivity.directionSpinner(RoutesActivity.java:87)
12-09 20:50:13.497: E/AndroidRuntime(857):  at com.nicotera.colton.londontransitguide.MyInnerClass.onPostExecute(RoutesActivity.java:142)
12-09 20:50:13.497: E/AndroidRuntime(857):  at com.nicotera.colton.londontransitguide.MyInnerClass.onPostExecute(RoutesActivity.java:1) 
```

无论如何， route_direction_spinner 定义正确。directionSpinner() 在 AsyncTask 完成后运行。

完整代码：

```
package com.nicotera.colton.londontransitguide;

import java.io.IOException;
import java.text.DecimalFormat;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.jsoup.*;
import org.jsoup.nodes.Attributes;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class RoutesActivity extends Activity implements OnItemSelectedListener {
    Spinner dirSpinner;
    Spinner routeSpinner;

    static String [] namedDirections = new String [2];
    private static final String TAG = "RoutesActivity";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_routes);
        dirSpinner = (Spinner) findViewById(R.id.route_direction_spinner); // Create an ArrayAdapter using the string array and a default spinner layout
        routeSpinner = (Spinner) findViewById(R.id.route_name_spinner); // Create an ArrayAdapter using the string array and a default spinner layout
        routeSpinner.setOnItemSelectedListener(this);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.routes_array, android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // Apply the adapter to the spinner
        routeSpinner.setAdapter(adapter);
        Log.i(TAG, "second spinner populated");
    }

    public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {
        Log.i(TAG, "Item selected");
        //DecimalFormat df = new DecimalFormat("00##");
        int tempPos = pos;
        Log.i(TAG, ("Position of selected item: " + tempPos));
        int routeSelected;
        if (tempPos < 17)
            routeSelected = (tempPos + 1);
        else if (tempPos >= 17 && tempPos < 29)
            routeSelected = (tempPos + 2);
        else
            routeSelected = (tempPos + 3);
        String temp;
        if (routeSelected < 10)
            temp = ("0") + routeSelected;
        else
            temp = ("") + routeSelected;
        String url = "http://www.ltconline.ca/WebWatch/MobileAda.aspx?r=" + temp;
        new MyInnerClass().execute(url);

    }

    public void directionSpinner (String directions []) {
        int temp;
        for (int i = 1; i <=2; i++)
        {
            temp = Integer.parseInt(directions[i]);
            if (temp == 1)
                namedDirections[(i-1)] = "Eastbound";
            else if (temp == 2)
                namedDirections[(i-1)] = "Northbound";
            else if (temp == 3)
                namedDirections[(i-1)] = "Southbound";
            else if (temp == 4)
                namedDirections[(i-1)] = "Westbound";               
        }
        //setContentView(R.layout.activity_routes);

        dirSpinner.setOnItemSelectedListener(this);
        ArrayAdapter<CharSequence> adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        adapter.add(namedDirections[0]);
        adapter.add(namedDirections[1]);
        dirSpinner.setAdapter(adapter);
        Log.i(TAG, "spinner populated");
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
}

class MyInnerClass extends AsyncTask<String, Void, String> {
    String [] directions = new String [3];
    String [] directionNames = new String [3];
    private static final String TAG = "RoutesActivity";
       @Override
       protected void onPreExecute() {
       super.onPreExecute();

       }

       @Override
       protected void onPostExecute(String result) {
       super.onPostExecute(result);
       RoutesActivity tc = new RoutesActivity();
       tc.directionSpinner(directions);
       }

    @Override
    protected String doInBackground(String... params) {
        try{
            Pattern routeDirPattern = Pattern.compile("\\&d=(\\d{1,2})");
            Connection conn = Jsoup.connect(params[0]);
            Document doc = conn.get();
            int i = 0;
            Elements routeLinks = doc.select("a[href]");
            for (Element routeLink : routeLinks) {
                i = (i + 1);
                String name = routeLink.text();
                Attributes attrs = routeLink.attributes();
                String href = attrs.get("href");
                Matcher m = routeDirPattern.matcher(href);
                if (m.find()) {
                        String number = m.group(1);
                        directions [i] = number;
                        directionNames [i] = name;
                        Log.i(TAG, directionNames [i]);
                }
            }
            }catch(Exception e){Log.d("doinbackground exception", e.toString());}
           return ("Done");
    }
} 
```

基本上，这会从公交网站获取一些值。到目前为止，这部分代码只是根据所选路线获取路线的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:16:29.233

（您`directionSpinner()`发布的两个片段中的方法不同，我正在使用稍后添加的那个，但假设问题相同，此解决方案应该适用于两个片段）

您的问题是您没有正确遵循 Activity 生命周期。

你打电话时：

```
RoutesActivity tc = new RoutesActivity();
tc.directionSpinner(directions); 
```

您实际上是在创建一个全新的`RoutesActivity`. 而且由于您将其作为标准 Java 类调用，因此它永远不会遵循 Activity 生命周期，这意味着它`onCreate()`永远不会被调用，这反过来意味着您的两个微调器对象保持为空（当您在 中为它们分配值时`onCreate()`）。

因此，当您使用：

```
dirSpinner.setOnItemSelectedListener(this); 
```

`dirSpinner`实际上`null`导致了一个`NullPointerException`.

相反，请尝试使用：

```
RoutesActivity.this.directionSpinner(directions); 
```

代替：

```
RoutesActivity tc = new RoutesActivity();
tc.directionSpinner(directions); 
```

# php - Magento 中 PDP 页面的自定义模板或主题（页眉和页脚）

> ID：13791729
> 
> 赞同：0
> 
> 时间：2012-12-09T20:55:07.187
> 
> 标签：php, templates, magento, themes

我们正在重做 Magento 中的主题以使用网格系统 (semantic.gs)，而我的任务是设置 PDP 页面以使用这个新的网格系统模板。我们最终会希望在所有页面上都使用此模板，但目前，仅在 PDP 页面上专门要求使用此模板。所以基本上我想设置一个可以在某些页面上加载的自定义主题/模板（包括页眉和页脚，而不仅仅是列）。谁能指出我如何去做这件事的方向？广泛的 SO 和 google 搜索结果毫无结果。

至今：

我在 app/design/frontend/[my_interface]/[my_theme]/template/page 中创建了一个名为 2columns-left-grid.phtml 的新布局

我修改了这些行：

```
<?php echo $this->getChildHtml('header') ?> 
```

和

```
<?php echo $this->getChildHtml('footer') ?> 
```

成为：

```
<?php echo $this->getChildHtml('header2') ?> 
```

和

```
<?php echo $this->getChildHtml('footer2') ?> 
```

我复制了 header.phtml 并将其命名为 header2.phtml，并复制了 footer.phtml 并将其命名为 footer2.html

我的问题：这是否可行，如果可行，我还需要修改哪些其他代码（xml 文件等） 我如何才能让此模板暂时仅应用于 PDP 页面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:13:35.470

您好，您可以覆盖产品标签

<catalog_product_view translate="标签">

> /app/design/frontend/base/default/layout/catalog.xml

从进入您的新模块布局 xml

# c++ - VS 2012 - XP 问题

> ID：13791733
> 
> 赞同：5
> 
> 时间：2012-12-09T20:55:28.030
> 
> 标签：c++, visual-studio-2012, windows-xp

我也安装了 VS 2012 Professional 和 XP 更新。我在 VS 2012 上使用平台工具集构建了我的项目`v110_xp`。我的项目的 .msi 包在 Win 7 上安装良好，但在 Win XP SP3 上安装失败。XP SP3 上报告的错误是 -

> “无法在动态链接库 Kernel32.dll 中找到过程入口点 FlushProcessWriteBuffers”。

虽然从 VS 2005 构建的同一项目在 XP SP3 上安装良好。我不确定 VS 2012 发生了什么。`_WIN32_WINNT`设置为`0x0501`. 有人可以指导如何解决问题吗？

非常感谢任何帮助，

马赫什。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T21:28:25.743

是的，C 运行时依赖于 FlushProcessWriteBuffers()。msvcrt110.dll 和 libcmtl.lib 的更新版本，与更新一起获得的，不再直接链接到该函数，它们使用 GetProcAddress() 找到它，如果它丢失，它们会一瘸一拐地走。所以你永远不应该得到这个错误。

您部署错误版本的 msvcrt110.dll（旧版本而不是更新版本）的可能性非常高。您可以在 c:\windows\system32 中找到它，查看属性。我的是版本 11.00.51106.1，日期为 2012 年 11 月 5 日。[此处](http://www.microsoft.com/en-us/download/details.aspx?id=30679)提供了一个单独的安装程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T20:58:07.547

您正在安装的 VS2012 运行时使用 XP 中不存在的功能。请参阅这篇 MS 文章：[在 Visual Studio 2012 中使用 C++ 定位 Windows XP，](http://blogs.msdn.com/b/vcblog/archive/2012/06/15/10320645.aspx)其中解释了更多信息并提供了一些解决方法。

[VS2012 的更新 1](http://www.microsoft.com/visualstudio/eng/visual-studio-update#story-update-1)解决了这个问题。

> 但更新 1 不仅仅是关于新的 Windows 平台。它还使您能够使用 Visual Studio 2012 中的本机 C++ 应用程序以 Windows XP 为目标。

如果您正在使用更新 1 构建并且仍然遇到问题，那么我怀疑您正在安装过时的运行时。您需要部署更新 1 提供的运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:27:51.300

您可以通过在安装程序中包含开发机器中的 VC11 合并模块（程序文件\通用文件\合并模块）来解决此问题。这比在安装程序中运行 redist exe 更容易。

如果您使用 WIX：[合并模块添加](http://wix.sourceforge.net/manual-wix2/authoring_merge_modules.htm)

我已经在服务器 03、xp64 和 xp32 上进行了测试。

# jquery - 带有ajax的jQuery延迟加载

> ID：13791740
> 
> 赞同：9
> 
> 时间：2012-12-09T20:56:44.267
> 
> 标签：jquery, ajax, lazy-loading

我在我的电子商务网站上使用了lazyload()。lazyload() 效果很好。我使用这段代码来做到这一点：

```
$(function(){
  $("img.lazy").lazyload({ 
  effect : "fadeIn"
          });
}); 
```

还有一些过滤器，如颜色、价格等，运行 ajax 并显示新结果。当新结果出现时，lazyload() 不起作用。我知道我必须将lazyload() 与live()、delegate() 或on() 一起使用。但我是 jquery 的新手，我做不到。任何人都可以帮助我吗？我的 jquery 版本是 1.7.2，我们可以使用 on()。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-03T17:28:20.287

很快，**最好的优化方法**是**在你的 ajax 的成功**函数中调用延迟加载：

```
$.ajax({
    url: "your url here",
    type: "Post",
    success: function(response){
        // handle your success callback here
        $("img.lazy").lazyload({ 
              effect : "fadeIn"
        });
    }
}); 
```

* * *

但是如果你想**集中调用**lazyload插件，你有**两个选择**：

**第一：（**不推荐，因为性能受到影响）

```
$(document).on('DOMNodeInserted', '#container', function() {
    $("img.lazy").lazyload({
        effect: 'fadeIn'
    });
}); 
```

但请注意这里的“#container”，它是容器的选择器，您将在其中显示新加载的内容，因此上面的代码将在此容器内侦听任何新添加的内容，以便在新图像上再次运行延迟加载，

**第二：（**推荐）

通过将其添加到您的 JQuery 来调用您的自定义延迟加载：

```
$.fn.myLazyLoad = function() {
    this.lazyload({ 
          effect : "fadeIn"
    });
}; 
```

然后，在所有 AJAX 请求中调用它：

```
$.ajax({
    url: "your url here",
    type: "Post",
    success: function(response){
        // handle your success callback here
        $("img.lazy").myLazyLoad();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:09:23.110

**注意：在接受此答案时，此方法有效。延迟加载插件已更改，现在已损坏。我不能不接受答案，也不能删除它。**

还有另一个问答建议将其作为负责插入附加 DOM 的 AJAX 请求的一部分进行处理：

[将图像延迟加载绑定到 ajax 请求后插入的新图像](https://stackoverflow.com/questions/10035985/binding-image-lazy-loading-to-new-images-inserted-after-ajax-request)

但是，这就是我的做法：

```
$(document).on('DOMNodeInserted', 'img.lazy', function() {
    $(this).lazyload({
        effect: 'fadeIn'
    });
}); 
```

演示：[jsfiddle](http://jsfiddle.net/4vx8v/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T17:16:01.877

窗口加载后加载的图像的延迟加载（例如 AJAX）在滚动事件之前不会显示任何图像。这是因为它在内部进行了硬编码以在窗口加载事件之后触发初始更新。目前，上述所有答案都是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-20T21:03:26.383

除了 AbdelHady 的回答之外，您还可以在成功时延迟加载新图像作为回调或使用`when()`这种方式：

```
 $.when(load_new_image()).done(function(i){

            if($('img.lazy').length){

                 $('img.lazy').lazyload({ 

                          effect:'fadeIn'

                 }).removeClass('lazy').addClass('lazyloaded');

            }

        });

        function load_new_image() {

            return $.ajax({
                url: "your url here",
                type: "Post",
                success: function(response){

                     //append new content
                    $('#container').append(response);

                }
            });
        } 
```

**诺塔贝尼**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-05T19:55:34.157

我有同样的问题，当使用带有延迟加载图像的航点无限滚动时。（但不适用于 ajax 内容）。

我用这个解决了这个问题：

```
$("img.lazy").lazyload({
    effect : "fadeIn",
    event: "scrollstop",
    skip_invisible : true
}).removeClass('lazy');

$(document).bind('DOMNodeInserted', function(e) {
    $("img.lazy").lazyload({
        effect : "fadeIn",
        event: "scrollstop",
        skip_invisible : true
    }).removeClass('lazy');
}); 
```

`DOMNodeInserted`我在事件上绑定了延迟加载配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-29T22:47:03.490

对于我在加载页面时的场景，我将获得带有模板 ID 的模板列表。基于该模板 ID，我使用[jQuery Lazy](http://jquery.eisbehr.de/lazy/#examples)加载使用 ajax 的 base64 编码图像并在我的页面上延迟加载图像。

希望你能对我的方法有所了解

```
$(document).ready(function() {
  let imageArray = [0, 1, 10, 100, 1000, 1001];

  let parsedImageArray = $.map(imageArray, function(value) {
    return "<div class='lazy' data-loader='ajaxLoader' data-src='/echo/html/' data-method='post' contentId='" + value + "'></div><br>";
  });

  $("#content").html(parsedImageArray);

  console.log("Here" + parsedImageArray)
});

$(document).bind('DOMNodeInserted', function(e) {
  $('.lazy').lazy({
    effect: "fadeIn",
    event: "scrollstop",
    skip_invisible: true,
    removeAttribute: false,
    ajaxLoader: function(element, response) {
      let thumbnailId = element.attr("contentId");
      console.log("Here" + thumbnaiId);
      $.get("https://picsum.photos/id/" + thumbnailId, function(srcValue, status) {
        //for me i have to pull the base64 encode image from my server 
        let defaultImageDom = generateThumbnailImage(tempSrc);
        element.html(defaultImageDom);
        element.removeClass('lazy');
      }).fail(function(jqXHR, textStatus, errorThrown) {
        let defaultImageDom = generateThumbnailImage("");
        element.html(defaultImageDom);
        element.append("<em>Error Getting Thumbnail Preview</em>");
        element.removeClass('lazy');
      });
    },
  });
});

function generateThumbnailImage(srcValue) {
  let defaultImageDom = new Image();
  defaultImageDom.height = 200;
  defaultImageDom.style.borderColor = "#d5d5d5";
  defaultImageDom.style.borderWidth = "1px";
  defaultImageDom.style.borderStyle = "solid";

  if (srcValue && srcValue.length > 0) {
    defaultImageDom.src = srcValue;
  } else {
    //set your fallback image link
    defaultImageDom.src = "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=";
  }
  return defaultImageDom;
}
```

```
.lazy {
  width: 700px;
  height: 467px;
  display: block;
  /* optional way, set loading as background */
  background-image: 'data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=';
  background-repeat: no-repeat;
  background-position: 50% 50%;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.lazy/1.7.9/jquery.lazy.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.lazy/1.7.9/jquery.lazy.plugins.min.js"></script>

<div id="content">
</div>
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-10T20:57:28.840

我使用下面的代码并且它有效：

```
$(document).on('ajaxStop', function() {
   $("img.lazy").lazyload({
        effect: 'fadeIn'
    });
}); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-04-07T04:46:42.073

```
 $(document).ajaxStop(function() {$('.loading').removeClass('in');
    $("img.lazy").lazyload({
                effect: "fadeIn",
               container: $("#scrollable"),
               threshold: 100,
            })

      }); 
```

适用于 ajax 图像。但是，默认情况下不显示第一张图像。不会触发更新。

# c# - 尝试一次搜索 2 个数组 C# 并打印出任何匹配的信息

> ID：13791742
> 
> 赞同：3
> 
> 时间：2012-12-09T20:56:50.423
> 
> 标签：c#

我有一种搜索方法，它试图将导演名称与一个和/或两个数组中的条目匹配。但是，如果导演在任一数组中有多个电影，我无法弄清楚如何打印多个标题的名称。

现在我的代码如下所示：

```
if (director == myDVDs[i].Director || director == myBlu[i].Director)
{
    Console.WriteLine("{0}: {1}", i + 1, myBlu[i].Title);

    EndOptions();

}
else if (director != myDVDs[i].Director && director != myBlu[i].Director)
{
    Console.WriteLine("{0} does not have a movie in the database try again",     director);
    Console.Clear();
    Search();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:00:45.353

您可以使用 LINQ `Concat`，如下所示：

```
var matching = myDVDs.Concat(myBlu).Where(d => d.Director == director);
int count = 1;
foreach (var m in matching) {
    Console.WriteLine("{0}: {1}", count++, m.Title);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:07:24.877

简化添加新电影类型的通用解决方案。要查找使用 LINQ [Select()](http://msdn.microsoft.com/en-us/library/bb548891.aspx)、[Where()](http://msdn.microsoft.com/en-us/library/bb534803.aspx)、[SelectMany()](http://msdn.microsoft.com/en-us/library/bb534336.aspx)的标题，您可能需要添加`using System.Linq`以使用这些方法：

```
var dvds = new List<IMovie>
           {
              new DvdMovie {Title = "DVD1", Director = "Director1"},
              new DvdMovie {Title = "DVD2", Director = "Director1"},
              new DvdMovie {Title = "DVD3", Director = "Director2"}
           };

var bluerays = new List<IMovie>
           {
               new BlueRayMovie {Title = "BR1", Director = "Director3"},
               new BlueRayMovie {Title = "BR2", Director = "Director3"},
               new BlueRayMovie {Title = "BR3", Director = "Director1"}
           };

var allMovies = new List<IEnumerable<IMovie>> {dvds, bluerays};
string searchFor = "Director1";

// Main query, all other initialization code and types are below
IEnumerable<string> titles = allMovies.SelectMany(l => 
    l.Where(sl => sl.Director == searchFor)
    .Select(m => m.Title));

if (titles != null && titles.Count() > 0)
{
    // OUTPUTs: DVD1, DVD2, BR3
    foreach (var title in titles)
    {
       Console.WriteLine(title);
    }
}
else
{
    Console.WriteLine("Nothing found for " + searchFor);
} 
```

# 类型

```
public interface IMovie
{
    string Director { get; set; }
    string Title { get; set; }
}

// TODO: Make immutable. 
// Make setter private and introduce parametrized constructor    
public class DvdMovie : IMovie
{
    public string Director { get; set; }
    public string Title { get; set; }
}

// TODO: Make immutable. 
// Make setter private and introduce parametrized constructor                
public class BlueRayMovie : IMovie
{
    public string Director { get; set; }
    public string Title { get; set; }
} 
```

# php - PHP从数组键中删除方括号

> ID：13791745
> 
> 赞同：1
> 
> 时间：2012-12-09T20:57:15.943
> 
> 标签：php, arrays, key

**回答：**

所以我的问题原来是 $eventValue 而不是关键。我假设密钥在添加到 $days 数组时被括在括号中，但事实并非如此。var_export 向我展示了真正添加到数组中的内容。

为了解决这个问题，我从 $eventValue 中删除了括起来的引号以及结尾的 , 逗号。

**以下是原始问题：**

道歉，因为我不知道很多 PHP，但我正在努力实现一些我希望这里有人可以提供帮助的东西。

我有一个循环，它正在寻找一个月中要在日历上突出显示的特定日期。为了让日历突出显示特定日期并将其包装在一个类和一个链接标签中，我需要数组采用以下格式：

```
$days = array(

    2 => array('/weblog/archive/2004/Jan/02', 'linked-day'),
    3 => array('/weblog/archive/2004/Jan/03', 'linked-day'),
    8 => array('/weblog/archive/2004/Jan/08', 'linked-day'),
    22 => array('/weblog/archive/2004/Jan/22', 'linked-day'),

); 
```

在我的循环中，我有这两个变量：

```
$eventDay = substr("$str", -2, 2);
$eventValue = "array('http://example.com', 'linked-day'),"; 
```

在我的循环结束时，我有这个：

```
$days[$eventDay] = $eventValue; 
```

问题是，当我 print_r ($days) 时，我的 $eventDay 键包含在 [] 方括号中，因此日历无法找到这一天。我需要找到一种方法来防止它被括在括号中。

也许我正在接近这一切都是错误的。如果有人有一些建议，我将不胜感激。

我正在使用 Keith Devens 的 PHP 日历脚本来执行此操作：

[http://keithdevens.com/software/php_calendar](http://keithdevens.com/software/php_calendar)

谢谢！

**完整代码：**

[http://pastie.org/5503664](http://pastie.org/5503664)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:26:33.663

代替

```
$eventValue = "array('http://example.com', 'linked-day'),"; 
```

和

```
$eventValue = array('http://example.com', 'linked-day'); 
```

在馅饼的第 44 行

# java - 无限循环无法弄清楚如何停止它java

> ID：13791750
> 
> 赞同：0
> 
> 时间：2012-12-09T20:57:37.903
> 
> 标签：java, for-loop

嗨，我正在尝试慢慢学习 Java，但我遇到了无限循环的问题。下面是我的代码。从构造函数开始到显示方法结束，如何在添加最后一个条目后停止循环？

```
public UnitResults(int Size, String title)
{            
    this.fName = new String [Size];
    this.surname = new String [Size];
    this.Marks = new int [Size];
    pointer = 0;

    fName[pointer] = "Daniel";
    surname[pointer] = "Scullion";

    Marks[pointer] = 60;
    unitTitle  = title;

    pointer ++;

}

public Boolean add( String tempfName, String tempsName, int newGrade)
{ 
    if (pointer == fName.length)
    {
    System.out.println("The Students Database is full");
    return false;
    }
    else
    { 
        fName [pointer] = tempfName;
        surname [pointer]  = tempsName;
        Marks[pointer] = newGrade;
        pointer ++;
        System.out.println("Student Added");
        return true;
    }
} // end Add

public void display()
{
    System.out.println("Students Results\n");
    for (int index = 0; index < pointer; index++)
    {
        System.out.println( unitTitle + "\n" 
            + fName[index] + "\n"  
            + surname[index] + "\n" 
            + Marks[index] + "\n"
            + "\n" );  
        index++;
    }
} 
```

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:04:05.483

索引++；line 不是必需的，实际上可能是您无限循环的原因。index++ 已在 for() 语句中指定。再次添加 is 意味着每个循环的索引都增加 2。

```
for (int index=0; index < pointer;  index ++)
{

    System.out.println( unitTitle + "\n" 
            + fName[index] + "\n"  
            + surname[index] + "\n" 
            + Marks[index] + "\n"
            + "\n" );  
    index++; // <<<----- this line should not be here

} 
```

# c# - 创建一个字符串数组并将索引和值显示到控制台

> ID：13791753
> 
> 赞同：-3
> 
> 时间：2012-12-09T20:57:55.717
> 
> 标签：c#

这是我到目前为止的代码：

```
string[] animals = { "cow", "pig", "dog", "cat", "mouse", "giraffe", "moose", "deer", "lion", "hippo" };
Console.WriteLine("{0,5}{1,8}", "animal", "index");
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:04:28.143

```
for(int i = 0; i < animals.length();i++) //Go through the whole array
{
     Console.WriteLine(animals[i] + " " + i); //Output the animal and the index
}
Console.ReadLine();  //Wait for user input. 
```

# android - 键盘输入的广播意图

> ID：13791760
> 
> 赞同：2
> 
> 时间：2012-12-09T20:58:26.857
> 
> 标签：android, android-intent, android-softkeyboard, data-collection

是否有为键盘发送数据以“键入”的意图？

这比实际更理论，但是否可以广播键盘接收到的意图。意图将包含一个字符串，然后将其“键入”到活动输入字段中。或者，意图可以包括一个目标字段，键盘可以使用它来选择视图中的正确字段或防止数据输出到错误的字段。

# 为什么？

我正在想象这可能对数据收集应用程序有用。

**示例 1：**蓝牙秤

假设您有一个跟踪体重的应用程序。每天早上你启动应用程序，称体重，输入你的体重。如果秤与手机上的应用程序无关服务配对，您只需选择重量字段并在秤上加紧。该值将发送到您的手机并使用此意图传递到默认键盘。

**示例 2：** NFC 身份标签

服务表单申请需要 16 位机器序列号。机器上有一个包含序列号的 NFC 标签。NFC 读取意图不是手动输入，而是由服务捕获，该服务通过意图将值传递给默认键盘。

**批评：**

1.  该应用程序可以/应该直接与秤集成。
    *反驳论点：*不适用于网络应用程序，并且您依赖于支持（并保持支持）您的特定解决方案（例如蓝牙设备）的应用程序。
2.  将输入字段替换为启动结果意图的按钮。
    *反驳论点：*同上，但需要更多的用户交互；点击和时间是优质商品。

如果它不存在，那么键盘实现这样的意图接收器会是最糟糕的主意吗？或者它会为糟糕的应用程序设计打开大门？安全方面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:08:08.543

> 是否有为键盘发送数据以“键入”的意图？

幸运的是，没有，出于明显的安全原因。一个应用程序不能在非常选择的情况（例如，JUnit 测试应用程序）之外强制输入另一个应用程序。

> 该应用程序可以/应该直接与秤集成。

正确的。

> 不适用于 Web 应用程序

然后编写一个原生应用程序。

> 您依赖于支持（并保持支持）您的特定解决方案（例如蓝牙设备）的应用程序

无论如何，您都需要它，因为不可能说出任意蓝牙并获得适合任意本机应用程序或 Web 应用程序中任意文本字段的输入。否则，您建议的软键盘将尝试从您的蓝牙耳机中获取数据并将其输入 Twitter，您的音乐可能会超过 140 个字符。

> 键盘实现这样的意图接收器会是最糟糕的主意吗？

这取决于您对“最差”的定义。我希望这样一个输入法编辑器的实施者有一个非常大的法律辩护基金，用于因如此巨大的安全漏洞而导致的不可避免的诉讼。

# php - 将带有反向引用的正则表达式从 PHP 移植到 Objective-C

> ID：13791762
> 
> 赞同：2
> 
> 时间：2012-12-09T20:58:35.160
> 
> 标签：php, objective-c, regex

我用 PHP 编写了一个开源项目，作为练习，我正在创建一个 Objective-C 端口以在 OSX 中作为桌面应用程序运行。

我很难将以下正则表达式从 PHP 转换为 Objective-C。问题是我什至不知道该使用什么类。我尝试使用 NSRange 和 NSRegularExpression，但没有取得多大成功。

这是我的 PHP 代码：

```
$pattern = '/' .
           '([\p{Han}]+)' .          // One or more kanji
           '（([\p{Hiragana}]*)）' . // Hiragana between japanese style parentheses
           '/u';

return preg_filter($pattern, '<ruby><rb>$1</rb><rp>(</rp><rt>$2</rt><rp>)</rp></ruby>', $this->_text); 
```

这应该变成这样：

> 林（はやし）さんは英语（えいご）は话（はな）せます。</p>

进入这个：

```
<ruby><rb>林&lt;/rb><rp>(</rp><rt>はやし&lt;/rt><rp>)</rp></ruby>さんは&lt;ruby><rb>英語</rb><rp>(</rp><rt>えいご&lt;/rt><rp>)</rp></ruby>は&lt;ruby><rb>話&lt;/rb><rp>(</rp><rt>はな</rt><rp>)</rp></ruby>せます。 
```

* * *

编辑：

我在[Apple Docs](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)中尝试了一些字符串替换示例，但我永远无法正确的部分是实际的正则表达式模式。我不知道如何在 Objective-C 中表示 \p{Han} 和 \p{Hiragana} 子集。

```
NSError *error = NULL;
NSRegularExpression *regex = 
    [NSRegularExpression regularExpressionWithPattern:@"some pattern here"
    options:NSRegularExpressionCaseInsensitive
      error:&error]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:49:45.777

这通常是当我踢自己的头时...

事实证明，Objective-C 确实接受了`\p{Han}`，除了我必须转义反斜杠，否则它无法识别它！

# java - Java FileInputStream 找不到文件 (LibGDX)

> ID：13791764
> 
> 赞同：1
> 
> 时间：2012-12-09T20:58:39.520
> 
> 标签：java, libgdx, bufferedreader

所以我有这个类：

[http://pastebin.com/EwXFwuZz](http://pastebin.com/EwXFwuZz)

而这个目录树： [http ://s14.directupload.net/file/d/3099/uskko5mo_png.htm](http://s14.directupload.net/file/d/3099/uskko5mo_png.htm)

我正在这个项目上使用 LibGDX 框架。这基本上是我的问题：

我有一个文件，其中包含“块”中的级别信息。每行是一个块。我想每行读取文件行。不幸的是，LibGDX 的内置 FileHandling 系统不支持逐行读取，所以我想坚持使用股票 Java 系统。

但是我得到了这个“FileNotFound”异常：

```
java.io.FileNotFoundException: ./assets/data/lvls/example.txt (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at java.io.FileReader.<init>(FileReader.java:55)
    at gemini.cute.game.xvii.database.LevelReader.<init>(LevelReader.java:49)
    at gemini.cute.game.xvii.core.MainLauncher.create(MainLauncher.java:40)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:124)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:107) 
```

使用 LibGDX 可以找到该文件，但将其读入一个巨大的字符串。并且由于某种原因具有相同的路径（甚至从根目录开始），找不到该文件。

对于不熟悉 LibGDX 的人，我在上面的“CuteGameXVII”项目中编码，但为了编译，我在“CuteGameXVII-desktop”中运行“Main”。资产文件夹是通过 eclipse 链接的，并且到目前为止可用于其他资源。

我在这里错过了一些非常明显的东西吗？如果是这样，请帮助我：P 提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:02:32.077

如果您从带有 path 的目录运行 Java 程序`$DIR`，则输入文件应位于`$DIR/assets/data/lvls/example.txt`. 根据您收到的异常，此位置不存在输入文件。

我建议您首先尝试在代码中使用输入文件的绝对路径。然后，找出它的相对路径是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-02T17:09:03.440

我也遇到过这个问题。为了使用 LibDGX 从您的资产目录中读取文件，您必须使用 LibGDX 方法替换：

```
new FileInputStream("SomeFile.txt") 
```

经过

```
Gdx.files.internal("SomeFile.txt").read() 
```

assuming "someFile.txt" is in your asset root folder.

# php - 控制台进程的php实时输出

> ID：13791765
> 
> 赞同：1
> 
> 时间：2012-12-09T20:58:41.113
> 
> 标签：php, real-time, echo, popen, shell-exec

我想在控制台中运行命令，然后通过日志文件“回显”它。我写了以下代码。但它不起作用。如果我将命令直接放在“popen”中，它会首先等待页面加载.. 可以做什么？

```
shell_exec("nohup $cmd > out.log 2>&1");  

if( ($fp = popen("tail out.log" , "r")) ) { 
       while(  strpos($txt, "FINISH") == false){ 
        $txt = fread($fp, 1024); 
        echo $txt; 

        flush();
       }     
} 
```

# objective-c - 单击按钮时更改视图，但仅当文本字段 = 密码时

> ID：13791768
> 
> 赞同：0
> 
> 时间：2012-12-09T20:59:19.023
> 
> 标签：objective-c, ios, button, textfield, viewcontroller

> **可能重复：**
> [当文本字段等于字符串时，ios制作按钮更改视图](https://stackoverflow.com/questions/13791217/ios-making-a-button-change-view-when-text-field-equals-string)

我这里有这个问题。我想要相同的按钮来更改视图控制器，具体取决于文本字段中写入的内容......到目前为止这是我的代码：

```
 - (IBAction)button:(id)sender {
  if ([txt.text isEqualToString:@"passwordToSkipLevel1"]) {
  // Code to change View Controller to Level1?
  } else if ([txt.text isEqualToString:@"passwordToSkipLevel2"]) {
  // Code to change View Controller to Level2?
  } else if ([txt.text isEqualToString:@"passwordToSkipLevel3"]) {
  // Code to change View Controller to Level3?
  } else if ([txt.text isEqualToString:@"passwordToSkipLevel4"]) {
  // Code to change View Controller to Level4?
  } 
} 
```

这里我的问题是，如果每个按钮上只能有一个 segue，但我希望一个按钮可以将 View Controller 更改为多个不同的视图，具体取决于文本字段中写入的密码。

PS：如果在文本字段中没有任何内容或文本中没有任何正确密码的情况下按下按钮，我根本不希望按钮如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:01:25.270

将你所有的 segues 连接到控制器，并在 IB 中提供你的 segues 标识符并使​​用：

[self performSegueWithIdentifier:identifier sender:nil];

# ruby-on-rails - 如何本地化 Rails 3 中的现有内容？

> ID：13791777
> 
> 赞同：0
> 
> 时间：2012-12-09T21:00:33.187
> 
> 标签：ruby-on-rails, locale, generator

我已经根据默认文档中的 Post、Comment 示例设置了一个简单的 Rails 应用程序。-> [http://edgeguides.rubyonrails.org/getting_started.html](http://edgeguides.rubyonrails.org/getting_started.html)

从这些帖子中本地化现有内容的适当方法是什么？

如果我假设 Post 有一个 :title 和“内容，并且我希望这个内容不仅可以用英语输入，还可以用德语和荷兰语输入，那么如果我希望最终结果看起来类似于这 ：

`http://0.0.0.0:3000/en/posts.json`分别用英语和 `http://0.0.0.0:3000/de/posts.json`德语获得所有帖子？

我还没有找到可以支持这种多语言内容的宝石。

我见过 doe，许多现有的方法，主要是在 Wordpress 或 Drupal 之类的应用程序中，它们不是基于 Rails 的。

我想首选的方法是将 EN 和 DE 帖子存储在单独的表中（但是如何添加新语言？），或者将所有翻译放在同一个数据库表中，但以不同的方式单独翻译，但如何获得他们很容易以正确的语言在 json 中输出？

我真的很困惑和不解，为什么 Rails 默认没有解决这样一个“常见”问题，或者我只是找错地方了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:16:16.703

[Globalize3](https://github.com/svenfuchs/globalize3)会做你想做的事。它将特定模型的所有翻译存储在一个单独的表中，其中有一`locale`列标识特定翻译的语言是什么。这使得无需迁移数据库就可以添加新语言，因此该方法具有很强的可扩展性。

还有其他用于翻译内容的 gem，例如[Traco](https://github.com/barsoom/traco)是我所知道的，但是这个将翻译存储在与模型相同的表中，因此当您添加新语言时，您必须迁移每个模型表。我个人更喜欢 Globalize3 方法，尽管它使 gem 本身在内部更加复杂。

# backbone.js - Backbone.js：如何利用 router.navigate 来操作浏览器历史记录？

> ID：13791781
> 
> 赞同：0
> 
> 时间：2012-12-09T21:01:11.207
> 
> 标签：backbone.js, pushstate

我正在编写一个包含几个步骤的注册过程，我想让它成为一个类似单页的系统，所以在学习了 Backbone.js 之后是我的选择。

每次用户完成当前步骤时，他们将单击我创建的 NEXT 按钮，然后我使用 router.navigate 方法更新 url，以及加载下一页的内容并使用 javascript 进行一些花哨的转换。

结果是，URL 更新，页面不刷新，用户体验流畅。但是，当用户单击浏览器的后退按钮时，URL 会更新为上一步的 URL，但内容保持不变。我的问题是通过什么方式我可以捕获这样的事件并当前加载上一步的内容并将其呈现给用户？或者更好的是，我可以依靠浏览器缓存来加载之前加载的页面吗？

编辑：特别是，我正在尝试类似[本文](http://artsy.github.com/blog/2012/06/25/replacing-hashbang-routes-with-pushstate/)中提到的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:56:29.273

您不应该使用 route.navigate 而是让路由器根据当前路由决定显示哪种形式。

例子：

您当前注册过程中的链接：

```
<a href="#form/2" ... 
```

在路由器定义中：

```
routes:{
  "form/:formNumber" : "gotoForm"
},

gotoForm:function(formNumber){
 // the code to display the correct form for the current url based on formNumber
} 
```

然后用于`Backbone.history.start()`引导路由

# c++ - Tilemap 2D 逼真的流体物理

> ID：13791782
> 
> 赞同：5
> 
> 时间：2012-12-09T21:01:14.957
> 
> 标签：c++, 2d, physics

我有兴趣尝试为 2D 游戏创建逼真的流体（水）。这个游戏类似于泰拉瑞亚。我听说过如何在场景上拍打一堆碰撞粒子并在其上进行渲染，瞧，逼真的表演水。

Terraria 使用基于瓷砖的水，我不喜欢它。我想要更高级的东西。

我考虑过使用子弹 3D 物理（box2d 有我会达到的限制）。对于非碰撞粒子效果，我正在考虑使用 SPARK 之类的东西，因为我认为这会给我带来两全其美的效果。

我正在考虑的问题是，每个块都是 16x16，所以在 1600x900 的场景中，大约有 5000 个图块。

所以我需要告诉物理引擎这些图块是可碰撞的。当然，也有被认为是不可碰撞的虚空瓦片。

有人对此有想法吗？语言是 C++，但我怀疑这是否相关。

编辑：我想我将不得不屈服并使用基于网格的水。我想，回想起来，基于粒子只会让一切变得更加困难，但有什么好处呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:09:37.923

您的问题是关于平铺流体，但您似乎实际上是在询问基于粒子的方法。

如果是这种情况，您正在寻找的是“平滑粒子流体动力学”或 SPH，这是一种在实时情况下用于 2D 和 3D 流体模拟的非常流行的技术。

是的，它基本上只是一个粒子系统，每个粒子以合理（数学上稳定）的方式响应环境中的力（重力、碰撞等），并结合它们必须保持一定距离的约束，以便流体是不可压缩的。

如果你有足够多的粒子，你可以将粒子渲染为点，或者你可以将它们用作导出表面的源（例如使用行进立方体，尽管在 2D 中我不会担心这一点）。

[http://en.wikipedia.org/wiki/Smoothed-particle_hydrodynamics](http://en.wikipedia.org/wiki/Smoothed-particle_hydrodynamics)

它的优点是编码相对容易，并且确实可以在 GPU 上加速。

事实上，我认为它们可能是比尝试某种基于图块的方法更好的方法，并且您会得到一些更有趣的结果，例如喷射喷射、波浪冲击物体边缘等。这并不难一些令人愉快的工作，我会试一试。

# c# - 使用外部文件设置窗体的背景图像 - Windows 窗体

> ID：13791788
> 
> 赞同：2
> 
> 时间：2012-12-09T21:01:45.150
> 
> 标签：c#, winforms

我正在尝试为我的 Windows Froms 应用程序添加一个选项，该选项将允许用户将某个表单的背景更改为他计算机中的图片（假设是 .png 类型的文件）...

如何从计算机获取文件并将其“转换”为图像类型？我是否需要以某种方式将其添加到 properties.resources lib？（如果是这样，如何？）。

我试图这样做（显然，它没有用......）：

```
var FD = new System.Windows.Forms.OpenFileDialog();
FD.Filter = "png files|*.png";
if (FD.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    string fileToOpen = FD.FileName;

    System.IO.FileInfo File = new System.IO.FileInfo(FD.FileName);
    BackgroundImage = FD.OpenFile();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:10:37.133

替换此行

```
 BackgroundImage = FD.OpenFile(); 
```

对这个

```
 BackgroundImage = Image.FromFile(FD.FileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:27:47.610

试试这个以在表单中绘制加载的图像

```
OpenFileDialog openDialog = new OpenFileDialog();
if (openDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
  Graphics graphics = this.CreateGraphics();
  Image image = new Bitmap(openDialog.FileName);
  graphics.DrawImage(image, new Point(0, 0));
} 
```

如果需要，您可以添加过滤器选项。

# html - 在 Ruby 中将 HTML 解析器转换为 DOM

> ID：13791789
> 
> 赞同：3
> 
> 时间：2012-12-09T21:01:52.933
> 
> 标签：html, ruby, dom, html-parsing, nokogiri

Ruby 中是否有任何 HTML 解析器将 HTML 文档读入 DOM 树并将 HTML 标签表示为 DOM 元素？

我知道 Nokogiri，但它不会将 HTML 解析为 DOM 树。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T21:54:25.977

尽管你这么说，Nokogiri 是要走的路：

```
doc = Nokogiri::HTML('<body><p>Hello, worlds!</body>') 
```

它甚至可以解析无效的 HTML 并返回一个 DOM 树：

```
>> doc.class
=> Nokogiri::HTML::Document
>> doc.root.class
=> Nokogiri::XML::Element
>> doc.root.children.class
=> Nokogiri::XML::NodeSet
>> doc.root.children.first.content
=> "Hello, worlds!" 
```

# ruby-on-rails - Rails 记录器配置 - 显示查询数据库的代码行

> ID：13791797
> 
> 赞同：0
> 
> 时间：2012-12-09T21:03:06.693
> 
> 标签：ruby-on-rails

我已经构建了一个相当大的 Rails 应用程序。现在我在某些页面上有很多查询。我真的很希望 Rails 开发日志显示我的代码中发出查询请求的行，这样我就可以轻松删除一些。

这就是我要的。

```
[called from ProjectsController.rb line 32]CACHE (0.0ms)  SELECT "firms".* FROM "firms" WHERE "firms"."subdomain" = 'testing' LIMIT 1 
```

config/environments/development.rb 文件中是否有标签

这会很棒！

```
config.log_tags = [:code_line_call] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:20:58.543

我没有找到在日志中获取代码行的方法。

解决方案是[Miniprofiler](https://github.com/SamSaffron/MiniProfiler/tree/master/Ruby)

它是在代码中查找 sql 请求的好工具

瑞恩·贝茨（Ryan Bates）对此进行了一次railscast

[railscasts 368-miniprofiler](http://railscasts.com/episodes/368-miniprofiler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-24T07:10:38.177

一个更轻量级的解决方案是[Active Record Query Tracer](https://github.com/ruckus/active-record-query-trace/tree/master) ，它完全符合您的要求。

# ruby-on-rails - 将表单数据发送到取决于表单值的 URL 的 Rails 约定是什么？

> ID：13791799
> 
> 赞同：0
> 
> 时间：2012-12-09T21:03:41.420
> 
> 标签：ruby-on-rails, forms, input, controller, routes

我想要在 url 提交的表单

```
/index/fruit 
```

提交表单数据到

```
/index/:identifier 
```

其中 :identifier 由表单的值确定

在这种情况下，rails 约定是什么？有没有办法在没有控制器级别重定向或 javascript 更新提交 URL 的情况下实现这一点？

***路线.rb***

```
match 'smasher(/:action(/:id))', :controller => "customcontroller", :as => :smasher, :defaults => { :action => :index, :id => :fruit } 
```

***index.html.erb***

```
<%= semantic_form_for :d, :url => smasher_path,  :html => { :method => :get } do |f| %>
  ... form data ... 
  <%= f.input :identifier, :as => :hidden %>
<% end %> 
```

我目前的实现类似于[这个答案](https://stackoverflow.com/a/6435746/1758006)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:16:25.550

对此并没有真正的“约定”，而是其中有不止一种方法可以做到的事情之一。

您可以这样做的一种方法仍然是将表单发送到控制器中的一个且只有一个操作，然后*在控制器*中委托要执行的操作，如下所示：

```
def smasher
  if params[:identifier] == 'this'
    smash_this!
  else
    smash_that!
  end
end

def smash_this!
  # code goes here
end

def smash_that!
  # code goes here
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:32:40.030

这是 javascript 版本（尽管从技术上讲，它全部在*erb* html 模板上），如果您愿意的话。

```
<%= f.input :identifier, :as => :hidden, :onchange => "$(this).setAction()" %>

<script>
// While you can this script block here within your erb template
// but best practice says you should have it included somehow within `<head></head>` 
$(function() {

    //create a method on the Jquery Object to adjust the action of the form
    $.fn.setAction = function() {
        var form = $(this).parents('form').first();
        var action = form.attr('action')
        form.attr('action', action.substr( 0, action.lastIndexOf('/')+1 ) + $(this).val());
    }
});
</script> 
```

这是**纯javascript版本：**

```
$(function() {

    //create a method on the Jquery Object to adjust the action of the form
    $.fn.setAction = function() {
        var form = $(this).parents('form').first();
        var action = form.attr('action')
        form.attr('action', action.substr( 0, action.lastIndexOf('/')+1 ) + $(this).val());
    }

    //we gotta bind the onchange here
    $('input[name="identifier"]').change($.fn.setAction);          

}); 
```

# java - Java Reflect 泛型类 DAO 类型

> ID：13791801
> 
> 赞同：1
> 
> 时间：2012-12-09T21:03:47.220
> 
> 标签：java, reflection

我想访问类类型名称以指定运行时类型。例如

```
DAO<?> i  = DAO<?> DOA.class.forName(”Student”).newInstance(); 
```

我想做的是我有一个名为 Student 的类，在运行时我想指定 DAO。运行代码时，我得到一个 ClassCastException。

有什么方法可以获取 Student 类型而不是 String 以便可以完成以下操作

```
DAO<?> = new DAO<Student>(); 
```

通过指定 ?

# c++ - 运算符++：引用与值返回和未使用的参数

> ID：13791805
> 
> 赞同：2
> 
> 时间：2012-12-09T21:04:07.713
> 
> 标签：c++, reference, operator-overloading, increment

我将此 C++ 代码视为一个更大示例的一部分：

```
Date &Date::operator++()
{
    helpIncrement();
    return *this;
}

Date Date::operator++( int )
{
    Date temp = *this;
    helpIncrement();
    return temp;
} 
```

首先如果`Date temp = *this`，那么我不明白为什么这两个函数的返回类型有什么不同？一个返回`*this`，另一个返回`temp`，分配给`*this`哪个？

其次，为什么第二个函数的参数没有变量名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T21:08:16.717

`this`第一个返回作为引用指向的对象。也就是说，返回的对象*是*`operator++`被调用的对象。但是，当您这样做时`Date temp = *this`，`temp`是从 的值构造的副本`*this`。然后将其从函数中复制出来。你从第二个函数得到的是一个全新的对象。对第二个问题的回答中解释了为什么这些功能有这种差异。

增量运算符有两种类型 - 一种是后增量 ( `i++`)，另一种是前增量 ( `++i`)。为了能够单独重载它们中的每一个（尽管它们具有相同的名称，`operator++`），C++ 标准指定后增量运算符采用`int`具有未指定值的类型的参数。这只是为了让您可以在每次使用运算符时重载函数。由于您不太可能想要使用该未指定的值，因此您不妨将其保留为未命名。

现在，预递增运算符的预期行为是它递增对象并评估为该对象。这就是为什么它在这种情况下返回一个引用。后增量的预期行为是它保留原始值的副本，递增对象，然后返回原始值。因此，它返回`temp`副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:07:21.680

这是一个很好的问题——它突出了 C++ 的设计者采取的一个相当愚蠢的设计选择：

*   没有参数的重载是预递增的；带有*未使用* `int`参数的重载是后增量。
*   这就是为什么前增量版本可以返回一个引用，而后增量必须在增加值本身之前复制原始版本。
*   添加参数的`int`原因只有一个——区分两个重载；否则它是没有意义的，这就是为什么它的值从未被使用过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:07:38.140

第一个运算符是预增量的：它增加值并返回结果。第二个是后增量：它增加值，并返回前一个值。在该代码中，`temp`保存前一个值，`helpIncrement()`递增该值，然后`temp`返回前一个值 ( )。参数没有名称的原因是它没有被使用。这有点骇人听闻。编译器知道`++my_value`应该翻译成`my_value.operator++()`，并且`my_value++`应该翻译成`my_value.operator++(1)`. 也就是说，是否存在整数参数决定了调用哪个重载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T21:10:18.377

1.  第一个函数在递增后返回对此的引用。第二个返回这个副本，在它增加之前。

2.  第二个函数中未使用的参数区分`int`++ 运算符的前缀（无参数）和后缀（单参数）版本。

这是一个基本主题，请阅读有关重载的内容`operator++`。你可以从这里开始：[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T21:16:51.023

> 首先如果 Date temp = *this，那么我不明白为什么这两个函数的返回类型有什么不同？

让我们将其与`++`on good old的情况进行比较`int`。考虑

```
int i = 1;
int j = i++; 
```

在此之后，`j`保留 的旧值`i`，但`i`它本身会递增。所以`i`必须在增量之前被复制，好像`++`on`int`被定义为

```
class int { // pseudocode
  public:
    int operator++(int)
    {
        int temp = *this;
        *this += 1;
        return temp;
    }
}; 
```

OTOH，之后

```
int i = 1;
int j = ++i; 
```

`i`并`j`具有相同的值，因此`++`必须已实现为

```
int &operator()
{
    *this += 1;
    return *this;
} 
```

`int`从到的更改带来`int&`了便利：无需制作副本，并且可以`++i`在需要参考的情况下使用。

> 其次，为什么第二个函数的参数没有变量名？

因为它永远不应该被使用。该参数是作为句法噱头存在的，因此编译器可以将两种类型的`operator++`（前增量和后增量）区分开来，但它没有任何明确定义的值。给它一个名字会在编译器中触发一个“未使用的标识符”选项，并启用适当的警告。

# python - Django 动态链接

> ID：13791813
> 
> 赞同：2
> 
> 时间：2012-12-09T21:04:42.433
> 
> 标签：python, django

我是 Django 的新手，所以这可能是一个愚蠢的问题，但是我正在努力寻找搜索 Goolge 的答案。我的问题如下...

在其他语言中，当在 HTML 页面中创建链接时，您会使用 buildURL(page) 函数来创建动态链接，即

```
<a herf="buildURL(pageName,queryObjects) >link</a> 
```

这将生成带有参数的 URL。

Django 中是否有以正确格式构建 URL 的函数，即生成带有参数的 Django 页面的完全限定 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:25:45.653

在您的模板中，您永远不应该硬写 url 视图。取而代之的是，一个好的做法是命名每个 url 并在模板中引用该名称。

命名一个网址：

```
from django.conf.urls import patterns, url
urlpatterns = patterns('',
    #...
    url(r'^article/(\d+)/$', 'news.views.article', name='article_by_id'),
    #...
) 
```

要在模板中引用 url：

```
<ul>
{% for article in articles %}
<li><a href="{% url article_by_id article.pk %}">Article {{article.name}} </a></li>
{% endfor %}
</ul> 
```

[在URL Distpatchar django](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls)文档中了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T19:36:22.547

从我在 django 文档中看到的应该是

```
<ul>
{% for article in articles %}
<li><a href="{% url 'article_by_id' article.pk %}">Article {{article.name}} </a></li>
{% endfor %}
</ul> 
```

即“article_by_id”而不是article_by_id。这对我有用

# scala - Guice 可以注入 Scala 对象吗

> ID：13791815
> 
> 赞同：24
> 
> 时间：2012-12-09T21:05:20.483
> 
> 标签：scala, guice

在 Scala 中，我可以使用[Guice](http://code.google.com/p/google-guice/)来注入 Scala`object`吗？

例如，我可以注入`s`以下对象吗？

```
object GuiceSpec {
  @Inject
  val s: String = null

  def get() = s
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-09T21:05:20.483

对 Google 的一些研究表明，您可以按以下方式完成此操作（以下代码是[ScalaTest](http://www.scalatest.org)单元测试）：

```
import org.junit.runner.RunWith
import org.scalatest.WordSpec
import org.scalatest.matchers.MustMatchers
import org.scalatest.junit.JUnitRunner
import com.google.inject.Inject
import com.google.inject.Module
import com.google.inject.Binder
import com.google.inject.Guice
import uk.me.lings.scalaguice.ScalaModule

@RunWith(classOf[JUnitRunner])
class GuiceSpec extends WordSpec with MustMatchers {

  "Guice" must {
    "inject into Scala objects" in {
      val injector = Guice.createInjector(new ScalaModule() {
        def configure() {
          bind[String].toInstance("foo")
          bind[GuiceSpec.type].toInstance(GuiceSpec)
        }
      })
      injector.getInstance(classOf[String]) must equal("foo")
      GuiceSpec.get must equal("foo")
    }
  }
}

object GuiceSpec {
  @Inject
  var s: String = null

  def get() = s
} 
```

这假设您使用的是[scala-guice](https://github.com/codingwell/scala-guice)和[ScalaTest](http://www.scalatest.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-25T14:24:35.007

上面的答案是正确的，但是如果你不想使用`ScalaGuice`Extensions，你可以这样做：

```
val injector = Guice.createInjector(new ScalaModule() {
    def configure() {
      bind[String].toInstance("foo")
    }

    @Provides
    def guiceSpecProvider: GuiceSpec.type = GuiceSpec
  }) 
```

# c - 程序正在运行，但测试引发分段错误

> ID：13791816
> 
> 赞同：2
> 
> 时间：2012-12-09T21:05:21.707
> 
> 标签：c

我必须使用链表概念创建一个程序。它适用于 ubuntu、ideone.com，但是当我将其提交给大学测试人员时，它会报告分段错误/总线错误/超出内存限制/超出堆栈限制（列表之一）。

可能问题是内存释放，因为只有 DevCpp 崩溃，它会导致我使用免费的一段代码。

所以，我使用了Valgrind，但是我不太明白，日志中写了什么，但它仍然在写“Invalid read of size 8”或Invalid write of size 8。而且它与内存分配有关（sizeof blocks是8，但我认为并非总是如此）。此外，还写了-“错误摘要：来自 48 个上下文的 76 个错误（抑制：2 个来自 2）”和“总堆使用量：20 个分配，20 个释放，160 个字节分配”（我认为这些行很重要）。

最后，有一段可能有问题的代码。

```
TITEM *borrowItem(const char *to)
{ 
    TITEM *newItem = (TITEM *)malloc(sizeof(newItem));
    newItem->m_Next = NULL;
    newItem->m_To=(char *)malloc(sizeof(to));
    strcpy(newItem->m_To,to);
    newItem->m_Cargo = NULL;
    return newItem;
} 
```

我想这个问题已经在分配中了。此函数用于创建新的列表项指针。内存在这里被释放：

```
void freeItem(TITEM *item)
{
    free(item->m_To);
    free(item);     
    return;    
} 
```

m_To 是字符串，m_Next 是下一项指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:09:50.730

您不能复制这样的字符串：

```
newItem->m_To=(char*)malloc(sizeof(to));
strcpy(newItem->m_To,to); 
```

的值`sizeof(to)`将是指针占用的字节数（4 或 8）。

你应该这样做：

```
newItem->m_To = malloc(strlen(to) + 1);
strcpy(newItem->m_To,to); 
```

或者使用库函数`strdup`，它基本上做同样的事情。

```
newItem->m_To = strdup(to); 
```

请注意，我还`(char*)`从`malloc`通话中删除了演员阵容。您还应该删除其他`malloc`通话中的演员表。如果这是直C，那就是……

* * *

> **试纸**说：正确但可能不完整。newItem 的 malloc 不也只是分配指针的大小。

你应该像这样分配你的结构：

```
TITEM *newItem = malloc(sizeof(TITEM)); 
```

# android - 在 SupportMapFragment 中引用 MapView

> ID：13791820
> 
> 赞同：5
> 
> 时间：2012-12-09T21:05:36.000
> 
> 标签：android, android-fragments, android-maps, supportmapfragment

我有一个扩展 SupportMapFragment 的片段。

```
public class PlaceMapsFragment extends SupportMapFragment {
    private GoogleMap mMap;
    private LatLng mPosFija;

    public PlaceMapsFragment() {
        super();
    }

    public static PlaceMapsFragment newInstance(LatLng posicion) {
        PlaceMapsFragment frag = new PlaceMapsFragment();
        frag.mPosFija = posicion;
        return frag;
    }

    @Override
    public GoogleMap getMap() {
        // TODO Auto-generated method stub
        return super.getMap();
    }

    @Override
    public void onCreate(Bundle arg0) {
        // TODO Auto-generated method stub
        super.onCreate(arg0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = super.onCreateView(inflater, container, savedInstanceState);
        //initMap();
        return view;
    }

    private void initMap() {
        UiSettings settings = getMap().getUiSettings();
        settings.setAllGesturesEnabled(false);
        settings.setMyLocationButtonEnabled(false);

        getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(mPosFija, 16));
        getMap().addMarker(
                new MarkerOptions().position(mPosFija)
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.marker)));
    }

} 
```

现在我想引用自动生成的 MapView，以便我可以将我的功能添加到地图中。

当我尝试`initMap();`得到`NullPointerException`

错误：

```
12-10 02:54:20.171: E/AndroidRuntime(4339): FATAL EXCEPTION: main
12-10 02:54:20.171: E/AndroidRuntime(4339): java.lang.NullPointerException
12-10 02:54:20.171: E/AndroidRuntime(4339):     at maps.ar.b.a(Unknown Source)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at maps.y.h.a(Unknown Source)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at maps.y.au.a(Unknown Source)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at maps.y.ae.moveCamera(Unknown Source)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.google.android.gms.maps.internal.IGoogleMapDelegate$Stub.onTransact(IGoogleMapDelegate.java:83)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.os.Binder.transact(Binder.java:297)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.google.android.gms.maps.internal.IGoogleMapDelegate$a$a.moveCamera(Unknown Source)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.google.android.gms.maps.GoogleMap.moveCamera(Unknown Source)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.m7.nomad.PlaceMapsFragment.initMap(PlaceMapsFragment.java:55)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.m7.nomad.PlaceMapsFragment.onCreateView(PlaceMapsFragment.java:46)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.m7.nomad.PlaceActivity$TabManager.onTabChanged(PlaceActivity.java:153)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:379)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.widget.TabHost.setCurrentTab(TabHost.java:364)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:150)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:540)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.view.View.performClick(View.java:3591)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.view.View$PerformClick.run(View.java:14263)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.os.Handler.handleCallback(Handler.java:605)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.os.Looper.loop(Looper.java:137)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at android.app.ActivityThread.main(ActivityThread.java:4507)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at java.lang.reflect.Method.invoke(Method.java:511)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-10 02:54:20.171: E/AndroidRuntime(4339):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T23:30:12.530

这是预期的行为。

`getMap()`只有在 Fragment 通过后才能调用`onCreateView()`，否则它会给你一个`null`. `null`如果 Google Play 服务不可用，您也可以收到。

换句话说，调用`initMap()`.`onResume()`

你可以[在这里](http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html)查看更多。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T09:17:34.443

我终于解决了，您不必重写`getMap()`，也不需要 mMap 变量，GoogleMap 包含在类中。最后你需要在 onResume 中调用 initMap()：

```
public class PlaceMapsFragment extends SupportMapFragment {
    private LatLng mPosFija = new LatLng(37.878901,-4.779396);

    public PlaceMapsFragment() {
        super();
    }

    public static PlaceMapsFragment newInstance(LatLng posicion) {
        PlaceMapsFragment frag = new PlaceMapsFragment();
        frag.mPosFija = posicion;
        return frag;
    }

   @Override
   public void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    initMap();
   }

    @Override
    public void onCreate(Bundle arg0) {
        // TODO Auto-generated method stub
        super.onCreate(arg0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = super.onCreateView(inflater, container, savedInstanceState);
        //initMap();
        return view;
    }

    private void initMap() {
        UiSettings settings = getMap().getUiSettings();
        settings.setAllGesturesEnabled(false);
        settings.setMyLocationButtonEnabled(false);

        getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(mPosFija, 16));
        getMap().addMarker(
                new MarkerOptions().position(mPosFija)
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.marker)));
    }

} 
```

希望它可以帮助其他开始使用 google maps api v2 的人（比如我：D）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T20:57:41.080

问题出在 onCreateView 中。你忘了调用 super.onCreateView()。检查[这个](https://stackoverflow.com/a/13756694/1081827)

# google-chrome - 我的一些字体可以工作，有些不能（404 错误）Chrome 和 Aurora

> ID：13791822
> 
> 赞同：4
> 
> 时间：2012-12-09T21:05:47.673
> 
> 标签：google-chrome, fonts

我使用来自同一网站的两种字体，位于同一目录中，并且我使用相同的 CSS 来加载它们，但其中一个不会从服务器加载。当我在本地打开网站时，一切正常。我想明确一点，我没有在子域上托管字体，所以我猜这不是 ACAO 问题。这是代码：

```
@font-face {
font-family: 'OpenSansLight';
src: url('OpenSans-Light-webfont.eot');
src: url('OpenSans-Light-webfont.eot?#iefix') format('embedded-opentype'),
     url('OpenSans-Light-webfont.woff') format('woff'),
     url('OpenSans-Light-webfont.ttf') format('truetype'),
     url('OpenSans-Light-webfont.svg#OpenSansLight') format('svg');
font-weight: normal;
font-style: normal; }

@font-face {
font-family: 'OpenSansBold';
src: url('OpenSans-SemiBold-webfont.eot');
src: url('OpenSans-SemiBold-webfont.eot?#iefix') format('embedded-opentype'),
     url('OpenSans-SemiBold-webfont.woff') format('woff'),
     url('OpenSans-SemiBold-webfont.ttf') format('truetype'),
     url('OpenSans-SemiBold-webfont.svg#OpenSansLight') format('svg');
font-weight: normal;
font-style: normal; } 
```

只有粗体版本不起作用。

这是您可以查看的网站：[http ://www.kromaentreprises.com/2/](http://www.kromaentreprises.com/2/)

# java - 调用“查找”后，本地网络上的 RMI 出现 NotBoundException-Exception

> ID：13791823
> 
> 赞同：0
> 
> 时间：2012-12-09T21:05:56.953
> 
> 标签：java, rmi

我在 RMI 上遇到问题：

我的 RMI-Client 尝试获取 192.168.1.37 的注册表

```
Registry registry = LocateRegistry.getRegistry("192.168.1.37",1099);
String[] s = registry.list();
    for( String obj : s ) {
        System.out.println("  " + obj);
    }
IMaster master = (IMaster) registry.lookup ("rmi://192.168.1.37:1099/Master"); 
```

我的 RMI 服务器看起来像这样：

```
Registry registry = LocateRegistry.getRegistry();
IMaster m = new Master(3, 3);
registry.rebind ("Master", m);
System.out.println ("Master Server is ready."); 
```

注册表列表 [String[] s = registry.list();] 知道“主”绑定。这意味着：网络上没有问题并且注册表存在。该对象也已导出。（我为 RMI 使用了一个 Eclipse 插件）。

但是在客户端的查找行中，我遇到了一个异常：

```
java.rmi.NotBoundException: rmi://192.168.1.37:1099/Master
at sun.rmi.registry.RegistryImpl.lookup(RegistryImpl.java:136)
at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:409)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:267)
at sun.rmi.transport.Transport$1.run(Transport.java:177)
at sun.rmi.transport.Transport$1.run(Transport.java:174)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:377)
at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
at philosoper.client.ClientServer.main(ClientServer.java:37)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at net.genady.rmi.logger.Runner.main(Runner.java:137) 
```

有谁知道如何解决这个问题？：） 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:21:39.900

尝试改变

```
IMaster master = (IMaster) registry.lookup ("rmi://192.168.1.37:1099/Master"); 
```

至

```
IMaster master = (IMaster) registry.lookup ("Master"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:21:25.657

服务器不知道自己的 IP。所以你必须通过告诉他你的服务器的ip来启动它。

我使用 Eclipse 插件：genady

所以在eclipse中的服务器上：点击“Run Configurations...”->“RMI VM Properties”并将该IP添加到“java.rmi.server.hostname”

和：

```
IMaster master = (IMaster) registry.lookup ("Master"); 
```

就这样。谢谢你的帮助:)

# android - Android NDK：ARMv6 的硬件浮点数

> ID：13791828
> 
> 赞同：1
> 
> 时间：2012-12-09T21:06:15.423
> 
> 标签：android, android-ndk, arm

我知道 android 提供对`ARMv5TE`和`ARMv7a`CPU 的支持。（`armeabi`和`areabi-v7a`文件夹）现在大多数 Android 手机的 CPU 都是`ARMv6`不带`VFP`、`ARMv6`带`VFP`和`ARMv7`带的`VFP`。

我的应用程序有物理模拟，我希望只针对具有硬件浮点的设备。( `VFP`)。我不希望支持没有`VFP`.

如何配置 NDK 项目以编译`ARMEABI`代码以`ARMv6`使用`VFP`而不是`ARVv5TE`？

上传 APK 时，我可以通过 Google Play 界面`ARMv6`阻止旧`VFP`设备。`ARmv5`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:27:38.987

NDK 并没有真正提供任何方便的方法来更改默认构建选项。您只能添加其他标志，但不能覆盖标准选项。

默认`LOCAL_CFLAGS`和大多数其他选项对您不起作用，因为 NDK 将其选项放在您的选项之后并覆盖您的标志。我知道的唯一解决方案是`APP_CFLAGS`在`Application.mk`. 因此，以下应该会导致针对具有 VFPv2 的 armv6 优化的二进制文件：

```
APP_CFALGS += -march=armv6 -mno-soft-float -mfloat-abi=softfp -mfpu=vfp 
```

另外，如果我没记错的话，armv6 硬件上的 vfp 指令需要在 arm 模式（而不是 thumb）下编译您的代码。为实现这一`LOCAL_ARM_MODE := arm`目标的每个目标指定。`Android.mk`

顺便说一句，我认为你不会对 armv6 设备的性能感到满意。即使是最新的高端 armv7 处理器也比现代英特尔酷睿 CPU 慢 10 倍。

# file - 从字符串解析后如何从文件中解析？

> ID：13791836
> 
> 赞同：2
> 
> 时间：2012-12-09T21:07:11.333
> 
> 标签：file, buffer, bison, input-buffer

我的 bison / flex 解析器首先从文件中读取输入：

```
FILE *myfile = fopen(file.c_str(), "r");
yyin = myfile;
yyparse(); 
```

在那之后的某个时刻，它从内存中的字符串读取并解析输入：

```
yy_scan_string(str.c_str());
yyparse();
yy_delete_buffer(YY_CURRENT_BUFFER); 
```

到目前为止，它似乎运作良好。但是，当程序需要使用第一个代码再次读取和解析文件中的输入时，它不起作用（以分段错误终止）。这个问题有解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T02:47:51.830

问题是在上面的第二个代码块之后，flex 的输入缓冲区 ( `YY_CURRENT_BUFFER`) 指向您在其中创建`yy_scan_string`并删除的缓冲区`yy_delete_buffer`。`yylex`因此，对(from )的下一次调用`yyparse`可能会因取消悬空指针而崩溃。因此，您需要做的是`yy_switch_to_buffer`在调用之后和再次调用`yy_delete_buffer`之前将缓冲区状态设置为有效的缓冲区`yyparse`。正如您所注意到的，您可以使用 push/pop 来做到这一点（尽管该代码确实泄漏了两个创建的缓冲区并且从不释放它们）。或者您可以更直接地从字符串中保存和恢复解析周围的旧缓冲区：

```
YY_BUFFER_STATE temp = YY_CURRENT_BUFFER;
yy_scan_string(str.c_str());
yyparse();
yy_delete_buffer(YY_CURRENT_BUFFER);
yy_switch_to_buffer(temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:54:50.360

我想我想通了，只是通过推送和弹出缓冲区。而不是上述，我使用：

```
yypush_buffer_state(yy_create_buffer( yyin, YY_BUF_SIZE ));

yypush_buffer_state(yy_scan_string(str));

yypop_buffer_state(); 
```

来源： [http ://westes.github.io/flex/manual/Multiple-Input-Buffers.html](http://westes.github.io/flex/manual/Multiple-Input-Buffers.html)

# offset - 在 C# 中使用偏移量

> ID：13791839
> 
> 赞同：1
> 
> 时间：2012-12-09T21:07:22.903
> 
> 标签：offset

## 标题

你好，

我怎样才能转换这个字符串：

```
string test = "0x17D"; 
```

到一个整数。

我需要这个来指定十六进制文档中的位置。

```
FileStream fs = new FileStream("C:\\test.dat", FileMode.Open, FileAccess.ReadWrite);
fs.Position = Convert.ToInt64(test); //doesnt work 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:17:14.583

```
fs.Position = Convert.ToInt64(test, 16); 
```

# mysql - PhpMyAdmin 显示字符不正确

> ID：13791841
> 
> 赞同：1
> 
> 时间：2012-12-09T21:07:33.957
> 
> 标签：mysql, character-encoding, phpmyadmin

当我尝试浏览表或进行查询时，PhpMyAdmin 无法正确显示字符（或我希望它们显示的方式）。但是，如果 'SET NAMES LATIN1;'，一切都会正确显示 包含在查询之前。此外，使用命令行客户端时，一切都在服务器端正确显示。我试图在 phpMyAdmin 首页上将 MySQL 连接排序规则设置更改为 latin1，但它没有效果。我不明白为什么会这样。这是由通信问题或双重编码引起的还是什么？

MySql 服务器设置（来自命令行客户端）：

```
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | latin1                     |
| character_set_connection | latin1                     |
| character_set_database   | latin1                     |
| character_set_filesystem | binary                     |
| character_set_results    | latin1                     |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+

+----------------------+-------------------+
| Variable_name        | Value             |
+----------------------+-------------------+
| collation_connection | latin1_swedish_ci |
| collation_database   | latin1_swedish_ci |
| collation_server     | latin1_swedish_ci |
+----------------------+-------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:27:49.990

`ini_set('default_charset', 'UTF-8');`在您的查询上方添加。

或者，如果您使用的是 mysqli：

```
$dbc = mysqli_connect($host, $user, $password, $database)
    or die('Error connecting to the database');

if (!mysqli_set_charset($dbc, "utf8")) {
    printf("Error loading character set utf8: %s\n", mysqli_error($dbc));
} else {
    printf("Current character set: %s\n", mysqli_character_set_name($dbc));
} 
```

# c++ - 不为持有 C++ 对象的属性调用 observeValueForKeyPath？

> ID：13791846
> 
> 赞同：1
> 
> 时间：2012-12-09T21:08:19.280
> 
> 标签：c++, ios, objective-c, key-value-observing

我有一个奇怪的问题。

我的类声明了一个属性，它只保留一个指向 C++ 对象的指针：

`@property (assign) CPPObject *representedObject;`

然后，在`init`那个 Obj-C 类中，我将类本身注册为观察者，以便在有人为我的属性分配某些东西时得到通知（是的，我可以编写一个自定义设置器……anywho！）。

```
 [self addObserver:self
          forKeyPath:@"representedObject"
             options:NSKeyValueObservingOptionNew
             context:nil]; 
```

注册为观察者后转储`observationInfo`看起来没问题 - 应该已经注册了。

但是我的`observeValueForKeyPath:ofObject:change:context:`方法永远不会被调用。

浏览相关的 StackOverflow 主题并没有让我更接近解决这个问题。
该属性是通过 setting`object.representedObject`等正确设置的。

**任何线索**这里可能有什么可疑之处..？在方法
中注册的坏主意..？`self``init`

**编辑#1**

当使用手动设置器而不是合成的设置器时*，将调用*该设置器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:22:33.113

如果您的观察结果根本没有被调用，我首先会怀疑合成访问器没有被调用，可能是因为有人直接访问了 ivars，而正是这个原因您不应该这样做。尝试实现一个自定义设置器（它可以做一个正常的分配）并确保它被调用。

* * *

编辑：我的下一个测试是确保您正确命名了观察方法。我不知道这是 Mac 还是 iOS；在 Mac 上，错误地命名观察方法不会导致应用程序崩溃。在 iOS 上它会崩溃，除非你碰巧在其他地方实现了它（超类，或者在你的实现中的其他地方实现）。

就个人而言，我可能会在一个新项目中提取一个最小的测试用例，看看是否可以在单个文件中重现它。我敢肯定，当你完成后，它会变得很愚蠢。命名错误的方法。同一类的两个不同实例（而您正在查看错误的实例）。方法以您不期望的顺序运行。类似的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-07T12:37:07.647

您应该使用`keyword`动态来实现 KVO，如 Apple 的文档[KVO Observing中所述](https://developer.apple.com/library/mac/documentation/Swift/Conceptual/BuildingCocoaApps/AdoptingCocoaDesignPatterns.html#//apple_ref/doc/uid/TP40014216-CH7-XID_5)

# c++ - Win32 API 会对我的计算机造成危险吗？

> ID：13791855
> 
> 赞同：3
> 
> 时间：2012-12-09T21:09:45.037
> 
> 标签：c++, winapi

学习Win32 API时是否可能意外格式化硬盘，以某种方式损坏操作系统？

这个问题是这里提出的问题的扩展：

[学习 C 或 C++ 会对我的计算机造成危险吗？](https://stackoverflow.com/questions/1419041/can-learning-c-or-c-be-dangerous-to-my-computer)

我问的原因如下。

愚蠢的是，我创建了一个 HWND 数组，但在其边界之外循环。当我运行该程序时，我注意到我桌面上*其他*程序中的窗口已关闭。

我不相信我对计算机或任何其他软件造成了任何损坏，但不能确定。

这或 Win32 API 编程中的其他形式的错误是否会对我的计算机/计算机上的其他软件造成危险？

**编辑：** 抱歉，当我说其他程序中的窗口已关闭时，我应该说隐藏，我的循环正在调用 ShowWindow(..., SW_HIDE)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T21:15:47.323

很难造成任何真正的伤害。您不会意外格式化驱动器。执行此操作所需的 API 调用使用起来非常棘手。您不能偶然成功地调用它们。

你可以很容易地从机器上删除一堆文件。但是你需要编写调用函数喜欢`DeleteFile`这样做的代码。无论如何，只要您启用了 UAC，系统安全性就不会让您删除系统文件或程序文件。

我认为你不必过度担心。

# javascript - 列表中的sencha触摸过滤器存储？

> ID：13791858
> 
> 赞同：0
> 
> 时间：2012-12-09T21:10:13.590
> 
> 标签：javascript, extjs, filter, sencha-touch, store

我正在尝试应用从 localStorage 商店获得的几个过滤器。

我加载商店并可以应用一些过滤器：

```
var newsStore = Ext.getStore("cityStore");

newsStore.filter(Ext.create('Ext.util.Filter', {
  filterFn: function(item) {
    return item.get('name') == 'city1' || item.get('name') == 'city2';  
}
})); 
```

但是现在我有一个项目列表，并且想遍历列表中的所有项目并将它们应用于商店过滤器。

问题是恕我直言，我无法遍历循环并一次又一次地返回 item.get('name') == 'variable' 因为这只会过滤最后一次返回，但我想应用列表中的每个项目如上所示的过滤器。

希望我能在这里找到一些帮助...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:49:48.857

想象一下，您有一个数组，其中包含您必须用于过滤商店的名称，我们将此数组称为“名称”：

```
var names = ['Lucas', 'Pablo', 'Noelia']; 
```

如果记录包含您的**名称**数组中列出的**一些值，您在 filterFn 中必须做的是返回 true。**神奇之处在于**某些**功能。

 ****```
store.filter(Ext.create('Ext.util.Filter', {
  filterFn: function(item) {
      return names.some(function(name){ return name === item.get('name')});  
  }
})); 
```

例如，以下商店将仅包含 2 行（应用过滤器后）：Lucas 和 Pablo：

```
var names = ['Lucas', 'Pablo', 'Noelia'];

var store = Ext.create('Ext.data.ArrayStore', {
    fields: ['id', 'name'],    
    data: [
        [ 1, 'Lucas' ],
        [ 2, 'Pablo' ],
        [ 3, 'Francisco' ]
    ]
});

store.filter(Ext.create('Ext.util.Filter', {
  filterFn: function(item) {
      return names.some(function(name){ return name === item.get('name')});  
}
}));

// display the filtered record in the console
store.each(function(record){ console.log(record.get('name'))})​ 
```

你也可以在这里工作：http: [//jsfiddle.net/lontivero/5TWq9/3/](http://jsfiddle.net/lontivero/5TWq9/3/)

我希望这很有用。祝你好运！****

# javascript - 使用Javascript在一个网页上动态向多个表添加行

> ID：13791861
> 
> 赞同：0
> 
> 时间：2012-12-09T21:10:25.710
> 
> 标签：javascript, html, dynamic, html-table, row

这可能是我缺乏 html5 的经验，但我有一些代码非常适合使用 Javascript 和 TBODY 标记节点将行动态添加到表中，但是当我在页面上有多个表（我这样做）时我需要在输入数据时动态填充....它不起作用...

我的问题是我不知道如何参考我也想添加信息的部分。

我尝试创建一个带有特定标签的节点，但它不是一个可识别的标签，所以它添加了数据但不在表内......奇怪。

这是我正在使用的 Javascript 代码

```
document.getElementById("sendNoteToDispatch").onclick=function()
    {
        event.preventDefault();
        console.log("Made it to note entry.");
        var noteTxt = $('#noteEntry').val();
        var noteEntBy = 'BGM';
        var nowNote = Date();
        var noteEntDate = dateFormat(nowNote, "mm/dd/yyyy HH:MM:ss");
        if (!document.getElementsByTagName) return;
        tabBody=document.getElementsByTagName("TBODY").item(0);
        row=document.createElement("TR");
        cell1=document.createElement("TD");
        cell2=document.createElement("TD");
        cell3=document.createElement("TD");
        textnode1=document.createTextNode(noteEntDate);
        textnode2=document.createTextNode(noteEntBy);
        textnode3=document.createTextNode(noteTxt);
        cell1.appendChild(textnode1);
        cell2.appendChild(textnode2);
        cell3.appendChild(textnode3);
        row.appendChild(cell1);
        row.appendChild(cell2);
        row.appendChild(cell3);
        tabBody.appendChild(row);
        document.getElementById("noteEntry").value = '';
        document.getElementById("noteEntry").focus();
       }

}); 
```

这是它使用的html代码。

```
<div id="Notes" class='acceptEnterNotes'>
            <form>
                <input type="text" name="noteEntry" id="noteEntry" class="noteEntryField" placeholder="Note Entry" size="115" />
                <button type="submit" id="sendNoteToDispatch" class="noteEntryButton buttonAddNote" value="Submit">
                    Submit Note
                </button>
            </form>
            <br />
            <br />
            <div id="filterNotesGriddiv">
                <input type="text" name="filterNotesGrid" id="filterNotesGrid" class="tableFilterInput" size="75" placeholder="Search the Table Below..." />
            </div>
            <div id="notesEntered">
                <table id="notesEnteredGrid" class="lowerSectionTable">
                    <tbody>
                        <tr class="enteredNotesHeader">
                            <td class="tableHeaderCells cellDateEntered">Date Entered</td><td class="tableHeaderCells cellEnteredBy">Entered by</td><td class="tableHeaderCells cellNoteEntered">Note</td>
                        </tr>
                    </tbody>
                </table>

            </div>

        </div> 
```

我尝试将 tbody 标签更改为 tbodyNotes 之类的标签，但这不起作用，然后我尝试向 tbody 节点添加一个 ID，但这也不起作用......所以任何可以帮助的东西，以便我可以添加另一个有不同桌子的部分......会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:43:02.153

因此，目前您正在页面中获得第一个 TBODY 标记：

```
tabBody=document.getElementsByTagName("TBODY").item(0); 
```

然后构建一行单元格，然后将该行插入到 tbody 中：

```
tabBody.appendChild(row); 
```

如果您将另一个表放入您的页面中，其中包含一个 TBODY，您可以获得第二个表的 TBODY 标记：

```
tabBody2=document.getElementsByTagName("TBODY").item(1); 
```

一般来说，尽管您似乎使用了大量的猜测和（可能）剪切和粘贴的代码。当您说您尝试过 ID 并且它们不起作用时，这有点荒谬。元素上的 ID 可以正常工作，即使是 TBODY 标签。如果有疑问，请尝试首先从 firebug 或 chromebug 控制台调用它们，并获取您的代码行以使 TBODY 标记首先在那里工作，然后将其放入您的代码中。试试这个：将两个带有 tbody 的表放入您的 html 页面。给 tbody 标签 id，比如“tbody1”和“tbody2”，然后打开你的 firebug 控制台并输入： document.getElementById("tbody1") 将鼠标悬停在结果上以查看页面中突出显示的元素。然后对 tbody2 进行相同的尝试。

And finally, none of this is HTML5, it's just plain old boring HTML and Javascript. You can look at the DOM API level 2, HTML4 spec and Javascript reference on mozilla dev to find out more about any of those commands.

# html - 如何使段落的最后一个图像在其中？

> ID：13791865
> 
> 赞同：2
> 
> 时间：2012-12-09T21:10:58.893
> 
> 标签：html, css

我想将图像放在段落的末尾，并希望它像这样的图像在段落内： ![在此处输入图像描述](../Images/f211289c9192e1968ad02250a1941b5a.png)

我给图像浮动，但它只经过一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:40:51.353

是的，不幸的是，没有简单的方法可以用 CSS 做到这一点。正如 Pekka 所说，除非您确切知道将图像放在标记中的哪个位置，否则您可能会遇到麻烦。

# asp.net - 使用 ActionLink GET 调用发送数据

> ID：13791867
> 
> 赞同：0
> 
> 时间：2012-12-09T21:11:11.103
> 
> 标签：asp.net, html.actionlink

我应该如何在不使用 RouteData.Values["id"]; 的情况下执行此操作

我正在使用视图中的此操作调用

```
@Html.ActionLink("Post","Create","Post", new {id=item.Id }, null) 
```

这就是行动

```
 // GET: /Post/Create
    public ActionResult Create()
    {
        var x = (string)RouteData.Values["id"];
        var model = new Post() { DateCreated = DateTime.Now, BlogID = int.Parse(x)};

        return View(model);
    } 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:14:54.623

好吧，通常的做法是：

```
public ActionResult Create(string id)
{
    int intID;

    if (int.TryParse(id, out intID)) {
        //...   
    }

    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:22:53.393

```
@Html.ActionLink("Post","Create","Post") 
```

不要忘记，您也可以随时编写 HTML：`<a href="/Post/Create">Post</a>`

# html - IE7 和 IE8 的 flash 视频回退不起作用

> ID：13791871
> 
> 赞同：3
> 
> 时间：2012-12-09T21:11:32.733
> 
> 标签：html, video, fallback

我一直在寻找并尝试为 IE7 和 8 找到合适的视频后备。到目前为止，我还没有找到一个。最干净的代码（我想使用）粘贴在下面。它来自每个人的视频。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     
"http://www.w3.org/TR/XHTML1/DTD/XHTML1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/XHTML" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/HTML; charset=utf-8" />
<title>video</title>
</head>
<body>

<video width="640" height="360" controls autoplay>
    <source src="changePassword.MP4"  type="video/mp4" />
    <source src="changePassword.OGG"  type="video/ogg" />
    <object width="640" height="360" type="application/x-shockwave-flash" data="flowplayer.SWF">
        <param name="movie" value="flowplayer.SWF" />
        <param name="flashvars" value="autostart=true&amp;controlbar=over&amp;image=__POSTER__.JPG&amp;file=__VIDEO__.MP4" />
        <img src="__VIDEO__.JPG" width="640" height="360" alt="__TITLE__"
             title="No video playback capabilities, please download the video below" />
    </object>
</video>
<p> <strong>Download Video:</strong>
    Closed Format:  <a href="changePassword.MP4">"MP4"</a>
    Open Format:    <a href="changePassword.OGG">"Ogg"</a>
</p>

</body>
</html> 
```

有人看到错误或可能的改进吗？谢谢！蒂斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:15:30.020

1.  First thing make sure you have used correct video path file.

2.  If that's not a problem then in video for everybody website they mentioned to include JW player or any other video player as a video fallback. In their [demo page](http://camendesign.com/code/video_for_everybody/test_yt.html) they have embed to YouTube video. Make sure you included the video player.

> Replace "**FLASH**.SWF" with the path to the Flash video player you are using. I use JW Player (download and place ‘player.swf’ in the right place), but this could be any Flash resource including YouTube. Sample code for using YouTube can be seen on the Video for Everybody YouTube Test Page

# wordpress - 我将如何使用 Walker 修改 wp_list_pages 以仅在 WordPress 的最低级别显示缩略图？

> ID：13791872
> 
> 赞同：1
> 
> 时间：2012-12-09T21:11:37.267
> 
> 标签：wordpress, hierarchy

我在一个作家的网站上工作。这些页面的结构如下：

```
All Books
   Series
     Series A
        Book 1, Book 2, etc.
      Series B
        Book 1, Book 2, etc.
   Stand-alone novels
      Book 1, Book 2, etc. 
```

每本书都有自己的页面。

我可以使用 wp_list_pages 在我想要的任何级别生成链接列表。我需要做的是使用 Walker 类来自定义 wp_list_pages[这样](http://badfunproductions.com/create-a-custom-walker-class-to-extend-wp_list_pages/)的，但是*只有*最低的书级别使用特色图片（=书封面）作为链接。

我该怎么做呢？也就是说，我如何*只*在最低级别放置图像，这与树的不同部分从顶部向下的步数不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:14:49.347

检查页面是否有孩子：

```
class Thumbnail_walker extends Walker_page {
    function start_el(&$output, $page, $depth, $args, $current_page) {
        if ( $depth )
            $indent = str_repeat("\t", $depth);
        else
            $indent = '';

        extract($args, EXTR_SKIP);
        $css_class = array('page_item', 'page-item-'.$page->ID);
        if ( !empty($current_page) ) {
            $_current_page = get_page( $current_page );
            _get_post_ancestors($_current_page);
            if ( isset($_current_page->ancestors) && in_array($page->ID, (array) $_current_page->ancestors) )
                $css_class[] = 'current_page_ancestor';
            if ( $page->ID == $current_page )
                $css_class[] = 'current_page_item';
            elseif ( $_current_page && $page->ID == $_current_page->post_parent )
                $css_class[] = 'current_page_parent';
        } elseif ( $page->ID == get_option('page_for_posts') ) {
            $css_class[] = 'current_page_parent';
        }

        $css_class = implode( ' ', apply_filters( 'page_css_class', $css_class, $page, $depth, $args, $current_page ) );

        $children = get_children( 'post_type=page&numberposts=1&post_parent=' . $page->ID );
        if ( empty($children) ) {
            $link_contents = $link_before . apply_filters( 'the_title', '' ) . $link_after . get_the_post_thumbnail($page->ID, array(72,72));
        }
        else {
            $link_contents = $link_before . apply_filters( 'the_title', $page->post_title, $page->ID ) . $link_after;
        }
        $output .= $indent . '<li class="' . $css_class . '"><a href="' . get_permalink($page->ID) . '">' . $link_contents .'</a>';

        if ( !empty($show_date) ) {
            if ( 'modified' == $show_date )
                $time = $page->post_modified;
            else
                $time = $page->post_date;

            $output .= " " . mysql2date($date_format, $time);
        }
    }
} 
```

# iphone - 比较 int 和 string

> ID：13791876
> 
> 赞同：1
> 
> 时间：2012-12-09T21:11:54.417
> 
> 标签：iphone, objective-c, ios, nsstring, int

> **可能重复：**
> [了解 Objective-C 中的 NSString 比较](https://stackoverflow.com/questions/3703554/understanding-nsstring-comparison-in-objective-c)

我想比较一个 int 和一个字符串，但我的代码不起作用。这是我的代码：

```
NSLog(@"enterPressed was called");
int answer = firstNumber + secondNumber;
NSLog(@"Real Answer: %d", answer);

NSString *numberFromTextField = inputTextField.text;
NSLog(@"Number From Text Field: %@", numberFromTextField);

if (numberFromTextField == [NSString stringWithFormat:@"%d", answer]) {
    NSLog(@"Correct!");
} 
```

这是控制台：

> 2012-12-09 13:10:55.087 MathQuiz[10728:c07] enterPressed 被调用
> 
> 2012-12-09 13:10:55.087 MathQuiz[10728:c07] 真实答案：60
> 
> 2012-12-09 13:10:55.088 MathQuiz[10728:c07] 文本字段中的数字：60

为什么不说“正确！”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:20:11.350

`==`除非您想知道这两个对象是否**相同**（即，双方`==`指的是完全相同的对象，而不是具有相同值的两个不同的对象），否则您不能使用它来比较两个 Objective-C 对象。

要比较字符串是否相等，您必须使用：

```
if ([str1 isEqualToString:str2])

// or, compare to a constant string:

if ([str1 isEqualToString:@"String 2"])

// or, compare to a string made up on the spot:

if ([str1 isEqualToString:[NSString stringWithFormat:@"%d", answer]) 
```

但是，在您的场景中，比较两个整数而不是两个字符串可能更好，因此，您需要将文本字段中的字符串转换为整数：

```
int num = [numberFromTextField intValue];

if (num == answer)
{
    NSLog(@"Correct!");
} 
```

请注意，`intValue`当字符串不包含有效数字时将返回 0，因此如果`answer`为 0，并且用户输入了无效数字，则在技术上不正确时将确定它是正确的。考虑使用 an`NSNumberFormatter`甚至 an`NSScanner`来确定输入是否有效，然后再以`answer`任何方式进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:12:47.257

您需要将其比较为，

```
if ([numberFromTextField intValue] == answer) 
```

`(numberFromTextField == [NSString stringWithFormat:@"%d", answer])`正在比较两个字符串的内存地址。不是价值观。以下将为您提供正确的值，

```
if ([numberFromTextField isEqualToString:[NSString stringWithFormat:@"%d", answer]]) 
```

# c++ - malloc 调用在看似很小的请求后失败

> ID：13791877
> 
> 赞同：-1
> 
> 时间：2012-12-09T21:12:01.323
> 
> 标签：c++, winapi, malloc

```
void StaticControl::addText(LPWSTR text)
{
    lpCurrentText = (LPWSTR)malloc((GetWindowTextLength(hStatic) + 1) * sizeof(LPWSTR));
    GetWindowText(hStatic, lpCurrentText, GetWindowTextLength(hStatic) + 1);

    lpInput = text;
    chInput = (char*)malloc(sizeof (lpInput) *sizeof(LPWSTR)/sizeof(char*));
    chCurrent = (char*)malloc(sizeof (lpCurrentText) *sizeof(LPWSTR)/sizeof(char*));
    wcstombs(chCurrent, lpCurrentText, wcslen(lpCurrentText) + 1);
    wcstombs(chInput, lpInput, wcslen(lpInput) + 1);
    strcat(chCurrent, chInput);
    lpNewText = (LPWSTR)malloc(strlen(chCurrent) * sizeof(char*)); //this is where it crashes
    mbstowcs(lpNewText, chCurrent, strlen(chCurrent) + 1);
    SetWindowText(hStatic, lpNewText);
    return;
}
//where
HWND hStatic;
LPWSTR lpCurrentText;
LPWSTR lpInput;
LPWSTR lpNewText;
char*  chInput;
char*  chCurrent; 
```

这段代码可以很好地向控件添加文本，直到字符串变成大约 20 个字符长，程序崩溃。单步执行程序，它在我为 lpNewText 缓冲区分配内存的地方崩溃。我不知道怎么了。Visual Studio 崩溃时将我带到 malloc.h 标头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:25:58.567

首先，我建议您放弃`malloc`并使用 C++ 内存分配技术。比如`new`, `new[]`, `std::vector<>`,`std::string`等`std::wstring`。

也就是说，我可以在您的代码中看到以下错误：

```
lpCurrentText = (LPWSTR)malloc((GetWindowTextLength(hStatic) + 1) * sizeof(LPWSTR));
// should be sizeof(*lpCurrentText), i.e. size of a wide char 
// and not size of a pointer as you have it

chInput = (char*)malloc(sizeof (lpInput) *sizeof(LPWSTR)/sizeof(char*));
// sizeof(lpInput), sizeof(LPWSTR) and sizeof(char*) are all equal to the
// same thing, the size of a pointer

chCurrent = (char*)malloc(sizeof (lpCurrentText) *sizeof(LPWSTR)/sizeof(char*));
// as above

lpNewText = (LPWSTR)malloc(strlen(chCurrent) * sizeof(char*)); 
// sizeof(char*) is the size of a pointer, not what you want

return;
// rather pointless when the return type is void 
```

我真的不知道您的代码要做什么，所以我不会尝试重新编写它并更正所有内容。您遇到的基本问题是，当您实际需要字符元素的大小时，您系统地编写 sizeof(...) 并计算指针的大小。

也许你真正需要做的是扔掉所有这些可怕的代码并`std::wstring`用来做你的连接。

# css - 移动 CSS：减小所有内容的大小

> ID：13791878
> 
> 赞同：2
> 
> 时间：2012-12-09T21:12:06.490
> 
> 标签：css, mobile

我刚刚使用在线移动模拟器测试了我的网站，该网站似乎运行良好。我唯一想做的就是缩小所有东西的大小。

我有一个插件允许我在 CSS 中执行此操作：

```
.mobile {change any css I want} 
```

例如：

```
#container {width:800px}  <-- normal css 
```

我可以：

```
.mobile #container {width:340px} <-- specific css for all mobile devices 
```

这很棒，但你可以看到这将是多么乏味。我的 css 文件有 2000 行长。

所以我想知道是否有一种捷径可以改变一切。有没有办法将网站缩小到原始大小的 30%？也许是一个 jquery shrinkSite 插件？我希望以尽可能少的步骤来做到这一点，因为我对移动设备的兴​​趣为零（因为我没有）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:36:52.697

无需做大量工作即可达到此目的的最接近方法是：

```
<meta name="viewport" content="width=640"/> 
```

默认缩放在大型 Android 设备上无法正常工作（需要用户手动放大）。但它确实可以统一扩展整个网站。上面的代码适用于 640 像素宽的网站。

如果您需要比这更多的移动支持，您开始进入需要更多努力的响应式设计，自适应内容（布局发生变化但大部分内容无法缩放）或流体网格（布局保持不变）和所有的内容规模，有点统一）。

自适应内容是关于设计一个不同的网站以支持移动设备，而流体网格试图迫使传统的桌面网站在移动设备上扩展（这不是浏览器的设计工作方式）。

自适应内容是行业标准，但在设计和构建页面之前需要进行大量规划。对于非平凡的网站，Fluid Grid 实施起来存在很大问题，我不推荐它（之前使用过它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:01:32.217

如果你想让**所有东西都**变小，你可以使用元标记，就像[这个问题](https://stackoverflow.com/questions/8154505/how-can-i-force-a-site-to-scale-to-fix-for-mobile-iphone-android)的答案一样。

`<meta name="viewport" content="user-scalable = yes">`

这样，移动用户将看到网站的整个宽度，并且可能需要放大才能浏览。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:57:37.043

你试过@media 查询吗？

例如，如果您有正常的代码：

```
#container {
    width: 800px;
} 
```

您可以按如下方式使用它们：

```
#container {
    width: 800px;
}

@media screen and (max-width: 480px) and (min-width: 320px) {
    #container {
         width: 800px;
    }
} 
```

我使用了一个范围来定位特定设备，但您可以指定最大值，@media 查询中的代码将适用于低于该分辨率的所有设备。您可能还有其他顾虑，因为视网膜显示出来了，您可能想使用浏览器代理。但首先尝试深入研究@media 查询技术，您肯定会在[mozilla 开发博客上找到更多材料](https://developer.mozilla.org/de/docs/CSS/Media_queries)

# ruby-on-rails-3 - Omniauth Facebook 手动 Rails 路线

> ID：13791879
> 
> 赞同：1
> 
> 时间：2012-12-09T21:12:09.860
> 
> 标签：ruby-on-rails-3, devise, omniauth

我正在尝试在 Rails 3 应用程序中使用 Omniauth facebook 和两个设计模型。目前，使用omniauthable 和设计助手不可能做到这一点。

一个类似的问题回答了如何做到这一点：

[Omniauth “与” STI 并设计](https://stackoverflow.com/questions/13567113/omniauth-with-sti-and-devise)

“..将您的omniauth 配置从devise.rb 移动到omniauth.rb 并创建您自己的omniauth 路由。”

但是我在定义这些路线和助手时遇到了麻烦，即对于 facebook，我使用了这样的设计助手：

```
user_omniauth_authorize_path(:facebook) 
```

..它重定向到 facebook，然后在我的 devise_for 范围内放置了一个回调 URL。

**如果手动设置，对于omniauth-facebook 策略，我的路线/助手会是什么样子？**

我已经拥有了omniauth-facebook，并且之前为“用户”模型设计了很好的工作，所以我有各种各样的

```
@user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user, params[:state]) 
```

..零件准备就绪，但现在有两种型号。我只是在更换我认为的设计助手时遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:01:52.043

您的链接应如下所示：

```
<%= link_to "Sign in with Facebook", "/auth/facebook" %> 
```

您还必须创建一些回调路由，有两种方法可以做到这一点。您可以：

1.  定义一个捕获所有回调并重定向到单个控制器操作的路由：

    ```
    get "/auth/:provider/callback" => "authentications#create" 
    ```

    然后，您可以使用`params[:provider]`来获取提供者的名称。`if`然后，您可以根据提供者的不同来做不同的事情。

2.  或者为每个提供者定义一个路由，您可以在其中指向控制器中的不同操作：

    ```
    get "/auth/twitter/callback" => "authentications#twitter"
    get "/auth/facebook/callback" => "authentications#facebook" 
    ```

    这些路由也可以浓缩为一条路由：

    ```
    get "/auth/:action/callback",
      :to => "authentications",
      :constraints => { :action => /twitter|facebook/ } 
    ```

    然后，您需要定义这些操作。例如，在 twitter 操作中，您可以获取用户的推文，在 facebook 操作中，您可以获取用户的帖子。

另外，不要忘记创建`failure`操作来处理用户未授权使用某个提供商登录的情况。

现在，你会遇到一个问题。您如何找出链接应该指向的位置？对于 Twitter 和 Facebook，这似乎很明显（`/auth/twitter`和`/auth/facebook`，分别）。

但是，如果您使用`omniauth-google-oauth2`gem 通过 Google+ 登录怎么办？您唯一的希望是每个omniauth gem（[在此处列出](https://github.com/intridea/omniauth/wiki/List-of-Strategies)）都有一些好的文档。

在任何情况下，如果您不知道应该使用的 url，或者您只是不喜欢某个 gem 使用的 url，您可以随时更改它！

例如，网址`/auth/google_oauth2`肯定不漂亮，至少与 facebook 和 twitter 的网址相比。要更改 url，请使用该`name`选项。

```
# omniauth.rb, when using pure omniauth
provider :google_oauth2, ENV['GOOGLE_KEY'], ENV['GOOGLE_SECRET'],
  {
    name: 'google'
  }

# devise.rb, when using omniauth+devise
config.omniauth :google_oauth2, ENV['GOOGLE_KEY'], ENV['GOOGLE_SECRET'],
  {
    name: 'google',
  } 
```

现在你可以使用 url`/auth/google`了，好多了。

**注意：**我多次提到了 an`AuthenticationsController`但也许你所拥有的是 a`CallbacksController`或 an`OmniauthCallbacksController`，你怎么称呼它并不重要。

# jquery - jQuery .ajax 调用在 IE9 中触发 quirks 模式

> ID：13791881
> 
> 赞同：1
> 
> 时间：2012-12-09T21:12:21.890
> 
> 标签：jquery, ajax, internet-explorer

编辑：使用不同版本的 jQuery 解决了问题。我有以下ajax调用

```
$.validator.addMethod("UserIDEmail", function(value, element) {
return (this.optional(element) || value.slice(-8) == "FXCM.com" || value.slice(-8) == "fxcm.com");
}, "You must use a @FXCM.com email address");
$("#FXCMLogIn").validate({
errorContainer: "#messageBox",
errorLabelContainer: "#messageBox ul",
errorElement: "li",
submitHandler: function(form) {
    $('input[type="submit"]').next(".processing").show();
    var dataString = $(form).serialize();
    $.ajax({
        type: $(form).attr('method'),
        url: form.action,
        data: dataString,
        clearForm: true,
        success: function(data) {

            var answer = $(data).find("td:eq(3)").text();
            var message = $(data).find("td:eq(5)").text();
            if (answer==="True") {
                $("#bottomContent").load("FXCM-Conversion-Content.php #FXCMForm");

            } else {
                $('.processing').hide();
                $('input[type="text"], input[type="password"]').val("");
                $('#messageBox').show().html('<ul><li>' + message + '</li></ul>');
            }
        }
    });
    return false;
},
rules: {
    payerEmail: {
        required: true,
        email: true,
        UserIDEmail: true
    },
    password: {
        required: true,
        minlength:3,
        maxlength:15
    }
},
messages: {
    payerEmail: {
        required: "Please Enter Your User ID"
    },
    password: {
        required: "Please Enter Your Password",
        minlength: "Must be at least 3 characters",
        maxlength: "Must be less than 15 characters"
    }
}
}); 
```

它没有显示正确的触发内容/页面部分，而是切换到“浏览器模式：IE9 文档模式：Quirks”并在控制台“HTML1113：文档模式从 IE9 标准重新启动到 Quirks”。进行调用的页面和正在加载的页面内容都具有有效的 DOCTYPE。我试过元标签`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`，但无济于事。有人遇到类似的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:41:47.147

见上面的编辑。使用 jQuery 1.6.4 解决了它。将来将删除所有 .live 调用并使用当前版本的 jQuery，但目前无法对整个站点进行这些更改。

# javascript - jQuery自动运行分页

> ID：13791888
> 
> 赞同：0
> 
> 时间：2012-12-09T21:13:13.350
> 
> 标签：javascript, jquery

我用 jquery 创建分页，这个脚本工作正常，但我希望脚本工作并在自动模式下调用不同的页面：

```
<script>

$(document).ready(function(){
$("#article_load_favourites").load("indexer_favourites_news.php");
});
</script>

<script>
function pagination(id)
{
$("#article_load_favourites").load("indexer_favourites_news.php?pg_d="+id);
} 
```

/// 调用脚本函数

```
setInterval(function() {

pagination(i+1);

}, 4000);

</script> 
```

它的想法是加载脚本并从cero开始，在4秒之前转到第一页，在其他4秒之前转到另一页并继续到最后，在这一点上，我尝试这样做，但我没有工作

我需要运行这个分页脚本并从第 1 页转到最后一页并在其他时间重复

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:51:10.850

我认为当您调用时您的 HTML 尚未加载`setInterval`。尝试移动`setInterval`内部`$(document).ready()`功能。

```
<script>

function pagination(id)
{
  $("#article_load_favourites").load("indexer_favourites_news.php?pg_d="+id);
}

$(document).ready(function() {
  $("#article_load_favourites").load("indexer_favourites_news.php");

  var i = 1;

  setInterval(function() {
    pagination(i+1);
  }, 4000);
});

</script> 
```

# ios - 附加到 NSString 的推荐方法是什么

> ID：13791889
> 
> 赞同：3
> 
> 时间：2012-12-09T21:13:19.940
> 
> 标签：ios, iphone, cocoa-touch, nsstring, nsmutablestring

我正在执行一些字符串连接来创建数据库查询。作为其中的一部分，我需要分配和重新分配 NSString 变量以附加到它。

我目前正在使用此代码：

```
NSString *retVal = [[NSString alloc]init];
NSString *concat = @"";
retVal = [NSString stringWithFormat:@"%@%@ myfield= 'myvalue'", retVal, concat]; 
```

请注意，只要 retVal 和 concat 持有“”（空字符串），我就会在 retVal 中得到空字符串。这绝对不是预期的，因为我应该得到“myfield='myvalue'”。

我错过了什么？

更新：

这是我最后一次尝试：

```
NSMutableString * retVal =  [[NSMutableString alloc] init]; 
NSString * concat = @"";

[retVal appendString:@"appendstring"];

NSLog(@"%@", retVal); // prints <object returned empty description>  

[retVal appendString:concat];
[retVal appendString:@"appendstring1"];

NSLog(@"%@", retVal);  // prints %@ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:33:33.490

```
 NSString *retVal = @"";
    NSString *concat = @"";
    //do whatever stuff you want with retVal and concat 
    //once finished then do this below
    if(retVal.length==0||concat.length==0)
    {
    retVal = @"myfield= 'myvalue'";
    }
    else
    retVal = [NSString stringWithFormat:@"%@%@ myfield= 'myvalue'", retVal, concat]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:25:50.513

使用`NSMutableString`with `appendString:`、 use`stringByAppendingString:`或使用单个 构建完整的字符串，一次`stringWithFormat:`插入您需要的所有值。

# c# - 获取组合框设置值作为字符串

> ID：13791891
> 
> 赞同：4
> 
> 时间：2012-12-09T21:13:23.780
> 
> 标签：c#, combobox

找到了几种方法，但它们都不适合我。我有一个带有可变数量选项的组合框（取自动态 xml 文件）。接下来，我需要知道用户选择了什么，我不知道该怎么做。这是我找到并尝试过的方法之一：

```
string myString = myCombobox.SelectedValue.ToString(); 
```

至少我没有收到错误，但是当我尝试显示该字符串时，它什么也不做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-16T14:05:40.010

有类似的问题，试试这个：

```
string myString = ((ComboBoxItem)myCombobox.SelectedItem).Content.ToString(); 
```

这个对我有用！

试着理解看`myCombobox`设计。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-12T20:00:09.340

```
myCombobox.SelectedItem.ToString(); 
```

应该为您解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T21:17:10.260

```
string myString = myCombobox.Text; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T05:55:43.740

使用`mycombobox.SelectedItem.ToString();`代替`SelectedValue`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T21:15:43.220

尝试使用`myCombobox.SelectedValue.Value.ToString()`or `myCombobox.SelectedValue.Text.ToString()`。无论如何，这个问题对于这个论坛来说质量太低了。在询问之前，您需要做一些研究。这就是我投票反对你的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T21:15:52.400

试试 myCombobox.SelectedItem.ToString();

如果您使用这种方式将项目添加到组合框中，它将起作用：

```
 comboBox1.Items.Add("Item"); 
```

例如

```
 myComboBox.Items.Add("Item1");
        myComboBox.Items.Add("Item2");
        myComboBox.Items.Add("Item3");

        myComboBox.SelectedIndex = 1; //force change selection
        Console.WriteLine(myComboBox.SelectedItem.ToString()); //will output Item2 
```

# entity-framework - 集成测试后重置实体框架 CodeFirst 数据库

> ID：13791892
> 
> 赞同：1
> 
> 时间：2012-12-09T21:13:37.247
> 
> 标签：entity-framework, integration-testing, code-first

在我的集成测试中，我可以运行它

```
 [ClassInitialize()]
    public static void MyClassInitialize(TestContext testContext)
    {
        SeedDb.Init(); //static method that initializes db and seeds with data  
       //public class SeedData : DropCreateDatabaseAlways<MyContext>
    } 
```

但是在类清理中运行相同的代码不会出错，但也不会重置数据库。数据库中的数据是集成测试留下的数据。

```
 [ClassCleanup]
    public static void MyClassTearDown()
    {
        SeedDb.Init();
    } 
```

我可以在清理方法中删除数据库，但是对 SeedDb.Init() 的调用失败。

```
 Database.Delete(DbConnectionString); //this does delete the database 
```

我正在处理集成测试中的上下文。是否有允许在类清理方法中重置代码优先的模式？

# javascript - 多次调用一个javascript函数

> ID：13791894
> 
> 赞同：4
> 
> 时间：2012-12-09T21:13:45.413
> 
> 标签：javascript, jquery

我有几个：

```
 <div class="enunt">text here</div>
        <div class="ans"><input type="text" id="amount1" style="border: 0; color: #f6931f; font-weight: bold;" /></div>
        <div id="slider1" class="slide"></div> 
```

其他的具有相同的结构，但 id 的索引号不同。我需要一个函数来设置 JQuery 滑块。我所做的是这样的：

```
 function slider(i) {
                $( '#slider' + i ).slider({
                    value:4,
                    min: 1,
                    max: 7,
                    step: 1,
                    slide: function( event, ui, i ) {
                        $( '#amount' + i ).val( ui.value );
                    }
                });
                $( '#amount' + i ).val( $( '#slider' + i ).slider( "value" ) );
            } 
```

并这样称呼它：

```
for (var i=1; i<6; i++)
    slider(i); 
```

这根本不起作用。我的错误在哪里？这是我的第一个 JQuery 应用程序，所以请善待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:33:42.583

您似乎在那里使事情稍微复杂化了……您可能只需要这样的东西（我在代码中添加了大量注释以尝试解释发生了什么）：

```
var amountFields = [],
    selector = '.slide',
    opts = {
      value: 4,
      min: 1,
      max: 7,
      step: 1,
      slide: function(e, ui) {
        var i = ui.handle.closest(selector).data('sliderId');
        amountFields[i].val(ui.value);
      }
    };

// because you have used a '.slide' class 
// name on your sliders, you can use .each() 
// to iterate through them instead of using
// your for loop that assumes there are only 
// ever 5 sliders
$(selector).each(function() {
  // get 'i' from the sliders id attribute
  var i = this.id.replace(/[a-z\-_]/gi, '');

  // initialise slider on the element 
  // and store 'i' within the elements
  // data for easy access in the
  // slide method later
  $(this).slider(opts).data('sliderId', i);

  // DOM querying is a hit on performance 
  // so cache the jQuery object for re-use 
  // in the slide method instead of 
  // re-querying the DOM
  amountFields[i] = amountFields[i] || $('#amount' + i);

  // set the amounts initial value using 
  // the opts object instead
  amountFields[i].val(opts.value);
}); 
```

尚未对此进行测试，因此不是 100% 以上没有错误，但类似的东西应该可以工作。

==================================== 更新============== =========================

由于您认为上面的代码看起来更复杂，这里是完全相同的代码，没有注释和缓存，以向您展示它实际上是多么简单：

```
var opts = {
  value: 4,
  min: 1,
  max: 7,
  step: 1,
  slide: function(e, ui) {
    var i = ui.handle.closest('.slide').data('sliderId');
    $('#amount' + i).val(ui.value);
  }
};

$('.slide').each(function() {
  var i = this.id.replace(/[a-z\-_]/gi, '');
  $(this).slider(opts).data('sliderId', i);
  $('#amount' + i).val(opts.value);
}); 
```

我之前在缓存中添加了性能，所以没有它，它会执行得更慢但仍然可以工作。该`.replace()`位正在获取滑块 ID 并删除任何字母、连字符或下划线以仅留下数字，即我们需要的位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:51:56.120

您分配给的函数`slide`只需要两个参数，它应该是

```
 function slider(i) {
            $( '#slider' + i ).slider({
                value:4,
                min: 1,
                max: 7,
                step: 1,
                slide: function( event, ui ) {
                    $( '#amount' + i ).val( ui.value );
                }
            });
            $( '#amount' + i ).val( $( '#slider' + i ).slider( "value" ) );
        } 
```

还要确保包含 jquery ui JS 和 CSS 文件

[http://jsfiddle.net/mowglisanu/Z2aaE/1/](http://jsfiddle.net/mowglisanu/Z2aaE/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:27:19.373

看起来`}`您的`function slide(i)`. 否则你的剧本对我来说就像一个魅力。

将来，您应该发布您遇到的错误，或者您没有获得区域。您可以从任何现代 Web 浏览器的**控制台**中检查您的代码是否存在错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T21:16:33.627

像这样传递`i`到您的幻灯片功能：

```
slide: function( event, ui, i ) {
         $( '#amount' + i ).val( ui.value );
       } 
```

# android - Android SDK源码（Eclipse）某些地方无法设置断点

> ID：13791901
> 
> 赞同：4
> 
> 时间：2012-12-09T21:15:26.920
> 
> 标签：android, debugging

我不能在 Android SDK 的私有或包访问方法或类中放置断点。我可以将它们公开或保护。为什么？如果可能的话，我该如何改变呢？

更确切地说，不工作的情况是在类签名中添加了一个断点，它显示“类：类名”。但是调试器永远不会在这个类中停止。

它根本不适用于某些类，也不适用于公共方法……例如 Gallery 类。但它适用于其他类，例如 AnalogClock（与 Gallery 位于同一包中）。或查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T05:12:14.757

无法设置断点的原因之一是 Android sdk 类不包含实现详细信息。

你可以使用Java Decompiler打开/(sdk path)/platforms/android-xx/android.jar文件查看sdk类的详细信息，你会发现所有方法的实现如下：

```
 public int getVerticalScrollbarWidth()
  {
    throw new RuntimeException("Stub!");
  } 
```

并且不包含私有方法。所以eclipse java调试器不知道如何设置断点，因为附加源与sdk类不完全对应。

我有一个不太好的方法来处理这个问题。1.将源文件（例如/android/view/View.java）复制到eclipse中的任何android/java项目。2.在步骤1中的文件中设置断点。 3.现在你可以打断点了。

# angularjs - AngularJS：不同格式的指令的隔离范围是否不一致？

> ID：13791902
> 
> 赞同：0
> 
> 时间：2012-12-09T21:15:27.853
> 
> 标签：angularjs

我发现使用隔离范围将变量传递给指令对于同一指令的不同实例化的工作方式不同。

例如，这是一个基本指令，它接受一些任意数据并将其显示在一个简单的模板中：

```
var module = angular
    .module('myModule', [])
    .directive('isolatedScopeDirective', function() {
        return {
            restrict: 'CA',
            template: '<div>data: {{data}}</div>',
            scope: {
                data: '='
            }
        };
    }); 
```

这里有一些标记，它通过类实例化一次，一次通过注释：

```
<body ng-app='myModule' ng-init='anArray=[1,2,3]'>
    <h1>Directive using class:</h1>
    <div class='isolatedScopeDirective' data='anArray'></div>

    <h1>Same directive using annotation:</h1>
    <div isolated-scope-directive='{{data=anArray}}'></div>
</body>​​​​​​​​​​​​​​​​​ 
```

我从中得到的结果是：

```
Directive using class:
data: [1,2,3]

Same directive using annotation:
data: 
```

（自己看：http: [//jsfiddle.net/Prnbe](http://jsfiddle.net/Prnbe)）

如果我从指令中删除范围属性，这意味着我停止使用隔离范围，那么在这两种情况下数据都会正确传递。对我来说，这说明我的设置是正确的，并且隔离范围的类或注释处理被破坏了。

难道我做错了什么？或者这是 AngularJS 中的一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:26:42.930

根据您的代码设置方式，我相信您的属性用法应该如下所示：

```
<div isolated-scope-directive data='aString'></div> 
```

这个：

```
<body ng-app='myModule' ng-controller='myController'>
    <h1>Directive using class:</h1>
    <div class='isolatedScopeDirective' data='aString'></div>
    <br/>
    <h1>Same directive using annotation:</h1>
    <div isolated-scope-directive data='aString'></div>
</body>​​​​​​ 
```

输出：

```
Directive using class:
data: test

Same directive using annotation:
data: test 
```

# android - ScaleGestureDetector 不适用于 ICS 及以下的 Fragment 或 ViewGroup 布局中的视图

> ID：13791904
> 
> 赞同：2
> 
> 时间：2012-12-09T21:15:33.407
> 
> 标签：android, android-fragments, android-2.2-froyo

我的应用程序使用支持包`Fragment`在 2.2 以上实现 s。

我有一个`View`子类（我们称之为`ZoomableView`），`ScaleGestureDetector`用于检测捏缩放事件。这是以熟悉的方式完成的；也就是说，在 内`onTouchEvent()`，`MotionEvent`s 使用 传递给检测器`mScaleDetector.onTouchEvent(event)`。A`SimpleOnScaleGestureListener`用于接收缩放事件。

此类`ZoomableView`始终显示为 a 中的唯一`View`（`Fragment`我们称之为它`ZoomableFragment`）。在应用程序中有两个用例。在一个用例中，布局仅包含`ZoomableFragment`，包含`ZoomableView`. 在第二个用例中，`ZoomableFragment`将显示在另一个 Fragment 旁边。另一个`Fragment`恰好是容纳 a `MapView`，但使用`MapView`与问题无关（如果第二个`Fragment`只包含一个普通的 ，问题仍然存在`View`）。

实际问题是，在 Jellybean 之前的设备（特别是 Froyo 手机）上进行测试时，当使用`Activity`显示双`Fragment`布局的 ' 时，`ZoomableFragment`'`ZoomableView` `ScaleGestureDetector`不起作用。当我说“不起作用”时，我可以在调试器中看到它处理`MotionEvent`s，但没有`SimpleOnScaleGestureListener`调用 s 中的任何方法。但是，当使用*仅*`Activity`包含的 时，比例检测确实有效。如果我在我的 JellyBean 设备上试用该应用程序，双胞胎情况绝对可以正常工作；即接收到缩放手势。*`ZoomableFragment``Fragment`*

 *我四处搜索，我能找到的唯一问题是人们在哪里实施`OnScaleGestureListener`并通过从`onScaleBegin()`. 这不是我的问题。

因此，总而言之，当在 Froyo（Android 2.2）上的多支持布局上`ScaleGestureDetector`使用时，a 不会调用它的侦听器，我假设包括 ICS。但是，如果这是屏幕上唯一的一个，则检测器工作正常。此外，在我的 4.1+ Jellybean 设备上不存在任何问题。`View``Fragment``Fragment`

**编辑 1**在我的双片段布局中，`ZoomableFragment`始终根据方向放置在右侧或底部。我刚刚做出的一个有趣的观察是，如果我翻转布局，使其`ZoomableFragment`在纵向的顶部（而不是下部的片段），或者在水平方向的左侧，那么比例检测器就可以工作了！因此，我怀疑这与使用 Fragments 时`MotionEvent` `getRawX()`/ `getX()`（和 Y 类似）方法的结果之间的关系有关。但是当我像这样翻转布局时，捏缩放不适用于相邻`MapView` `Fragment`！因此，总而言之，在 Froyo 上，它似乎`ScaleGestureDetector`只适用于在屏幕 0,0 处具有角的 a 中`View`包含的 a 。`Fragment`

**编辑 2**`ScaleGestureDetector`在检查grepcode的源代码后，我现在自己用一个简单的解决方案回答了这个问题。因为即使 ICS 使用了`getRawX()`/的来源`getRawY()`，我已经更新了这个问题以说明 ICS 受到影响（我相信），而不仅仅是我最初想到的 Froyo。

**编辑 3**我做了一个简单的测试，以完全消除与`Fragment`s 或我的应用程序中的任何其他内容有关的任何内容。我采用了简单的 Google`MapView`示例项目并简单地更改了布局，以便屏幕的大部分被一个（重量 0.9）占据，而底部的`TextView`一个微小的重量仅为 0.1。`MapView`在我的 Froyo 设备上，它不会再捏缩放。在我的 JB 设备上，确实如此。所以看来我不会发疯，我在 ICS 及以下（我认为 - 当然是 Froyo，无论如何）上遇到了问题，`GestureScaleDetector`答案给出了解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:23:58.300

通过检查 grepcode 上的源代码，`ScaleGestureDetector`我看到 Jellybean 版本`ScaleGestureDetector`不使用. 但是，早期版本（Froyo、ICS 等）*确实*使用并用于 slop 计算。这就是问题所在，因为这意味着如果目标的左上角不在 0,0 附近，比例检测器将无法工作。`getRawX()``getRawY()``MotionEvent`*`getRawX()``getRawY()``View`*

 *我`ScaleGestureDetector`可以在我的 custom 上工作`ZoomView`，即使它被放置在右侧或底部，只需在以下范围内执行此操作`onTouchEvent()`：

```
event.setLocation(event.getRawX(), event.getRawY());    
mScaleDetector.onTouchEvent(event); 
```

这会导致调整`MotionEvent`' 的内部偏移变量，以使`getX/Y`和`getRawX/Y`方法现在返回完全相同的值。这可以防止 slop 计算失败。比例检测器当然适用于相对值，因此 X / Y 的绝对值无关紧要。如果您有更多依赖于绝对值的代码，您可以按照我所做的操作来恢复它们：

```
 float originalY = event.getY();
    float originalX = event.getX();     
    event.setLocation(event.getRawX(), event.getRawY());
    mScaleDetector.onTouchEvent(event);
    event.setLocation(originalX, originalY); 
```

此外，如果我想将`Fragment`包含 a 的`MapView`内容放在底部或右侧，我已经在使用自定义子类，`MapView`所以我只是添加了这个：

```
public boolean onTouchEvent(MotionEvent event) {

    // Work around required for ScaleGestureDetector.
    // Before calling the scale detector, perform a work-around that is needed for earlier APIs (I suspect
    // ICS and below, judging from inspection of ScaleGestureDetector) to make the MotionEvent give the 
    // same values for getY / getRawY and getX / getRawX. Wildly different values, caused by the View
    // being nowhere near the screen origin (i.e. the View is on the right or the bottom) means the 
    // detector doesn't work. 

    event.setLocation(event.getRawX() - getLeft(), event.getRawY() - getTop());
    return super.onTouchEvent(event);
} 
```

现在，我`MapView`也会正确地捏秤，无论它`Fragment`放在哪里。（顺便说一句 - 这个问题完全 OT，但如果有人想知道，我将 a`MapView`放入`Fragment`成功使用`LocalActivityManager`StackOverflow 上给出的解决方案中）。**编辑**：实际上，有些事情不是 100% 正确的：地图不会围绕捏合手势的中心进行缩放。我认为这与在`getTop()`.**

# php - javascript getElementById 重新填充多行

> ID：13791920
> 
> 赞同：0
> 
> 时间：2012-12-09T21:17:18.557
> 
> 标签：php, javascript, getelementbyid

我从网络公式中得到一些东西，使用：

```
 echo "<tr>";
 echo "<td>" . $row['platform_name'] . "</td>";
 echo "<td><input name='id[]' type='hidden' value='".$row['id']."' /><input name='id_acc_ref[]' type='hidden' value='".$row['id_acc_ref']."' /><input name='platform_type[]' type='hidden' value='".$row['platform_type']."' /><input name='platform_name[]' type='hidden' value='".$row['platform_name']."' />Every <input id='scan_freq1' name='scan_freq1[]' type='number' style='width:50px;text-align:center' min='0' max='256' value='".$row['scan_frequency']."' placeholder='0000-00-00' /> week(s)</td>";
 echo "<td><input type='text' class='datepicker' name='first_scan_date1[]' style='text-align:center' value='".$row['first_scan_date']."' placeholder='0000-00-00' /></td>";
 echo "<td><input id='next_scan_date1' name='next_scan_date1[]' type='text' readonly='readonly' style='text-align:center' placeholder='".$row['next_scan_date']."' /></td>";
 echo "<td style='text-align:center'><img src='../images/ok.gif' id='save_conf1'></td>";
 echo "</tr>"; 
```

如您所知，它们都是数组，这取决于数据库中元素的数量。我有一些简单的代码，从数据库中获取结果并基于它们，我想让图像在该表单的范围内可见（提交按钮封面）。

```
function test(resp)
  {
    if (resp == 1) 
    {
        document.getElementById('save_conf1').style.visibility = 'visible';
    } 
```

但是在仅更新第一个元素（图像）之后它确实是可见的，无论我选择哪个，有什么想法可以为所有人填充它吗？

谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:54:13.997

如果每个`<img src=...>`都有一个唯一的`id`( `id='save_conf1'`, `id='save_conf2'`, `id='save_conf3'`, `etc.`) 你可以使用一个`for`循环 -

```
function test(resp)
  {
    if (resp == 1) 
    {
        var max = ... //total number of <img src=...> with id='save_conf#'
        for (var i=1;i<=max;i++)
        { 
        document.getElementById('save_conf'+i).style.visibility = 'visible';
        }
    } 
```

另一种方法是使用`class`and `getElementByClassName`。
IE。`<img src=... class='save_conf'>`

```
function test(resp)
  {
    if (resp == 1) 
    {
        document.getElementByClassName('save_conf').style.visibility = 'visible';

    } 
```

使用`getElementByClassName`适用于大多数现代浏览器，但不适用于 IE < 8。另请参阅 - [stackoverflow.com/questions/1933602/how-to-getelementbyclass-instead-of-getelementbyid-with-javascript](https://stackoverflow.com/questions/1933602/how-to-getelementbyclass-instead-of-getelementbyid-with-javascript)

# algorithm - 算法分析 - 理论方法

> ID：13791921
> 
> 赞同：2
> 
> 时间：2012-12-09T21:17:33.533
> 
> 标签：algorithm, theory, analysis

我正在学习与算法分析相关的课程。问题是课程更侧重于理论部分。我的意思是我们实际上并没有采用真正的算法来研究它们，我们只是采用随机递归或非常基本的例子。我已经搜索了这个网站，并且我还在谷歌上进行了一般搜索，以寻找一本包含更多算法分析示例的书。例如：课程只是介绍了一些递归函数分析，方法有：迭代、主定理、替换、递归树。在研讨会或实验室中，我们被介绍了一些问题，但是对于任何类似计算的东西，您不能仅通过观看 2 或 3 个示例然后一遍又一遍地做这些来学习它。要真正理解它们，你必须做很多例子。有没有人知道一本有很多例子的书，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:32:25.627

我推荐你教授。Tim Roughgarden 的[算法：设计与分析：第一部分](https://class.coursera.org/algo/lecture/preview)，来自斯坦福。这是在线课程，但您无需注册即可观看视频。我记得 [大师定理](http://en.wikipedia.org/wiki/Master_theorem)解释得很完美，有很多很好的例子。如果您有兴趣，还有本课程的第二部分。

关于算法的经典书籍（圣经）是Cormen 等人的[算法介绍。](http://books.google.pl/books/about/Introduction_To_Algorithms.html?id=NLngYyWFl_YC&redir_esc=y)

# macos - osx macport Xlib：显示“：0”上缺少扩展“RECORD”

> ID：13791924
> 
> 赞同：1
> 
> 时间：2012-12-09T21:17:39.773
> 
> 标签：macos, macports, xlib

我正在尝试使用 Macport 安装（2.1.2）在 OSX 上运行 gnee，我刚刚使用

sudo 端口安装 gnee。

它已安装并且可以正常启动，但是当我去录制时，我会在标题中收到消息。

从网上看，我发现这很可能意味着我的 X11 安装中缺少 librecord.so 模块。

我不知道如何解决这个问题。任何人都可以帮助我为 macport 安装做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:47:14.060

错误消息告诉您的 X 服务器没有启用 RECORD 扩展。你可以看到你的服务器支持的扩展列表`xdpyinfo | grep -r extensions -A 30`）

如果您使用的是 XQuartz 服务器，那么此命令可能会有所帮助：（`defaults write org.x.X11 enable_test_extensions -boolean true`请参阅 XQuartz[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/Xquartz.1.html)中的自定义部分）

# jquery - jQuery 和 Java Servlet：请求参数从未被检测为 null，尽管它是如此

> ID：13791925
> 
> 赞同：1
> 
> 时间：2012-12-09T21:17:41.303
> 
> 标签：jquery, servlets, select

我有一个 JSP 文件，其中 jQuery 应该向服务器发送一个包含我在多选框中勾选的元素（类别）的 POST 请求。服务器将分析包含所有勾选类别的字符串并返回一个主题列表，供 jQuery 分析它并在另一个多选中显示主题。

唯一的问题是，当我不勾选任何类别时，jQuery 确实向服务器发送了一个空参数，**但服务器永远不会将其检测为 null！**

我尝试了一个显示“”的警报，但它不起作用！服务器崩溃借口与 if 条件中的代码相关的 NullPointerException 显然。

这是我的代码：

```
 === JSP ===

<script>
                $(document).ready(function ()  
                    {
                        $('#subjectCategories').change(function()
                            {
                                var selectedOptions = $('#subjectCategories option:selected');
                                var selectedValues = $.map(selectedOptions ,function(option) 
                                {
                                    return option.value;
                                }).join(',');

                                $.ajax({
                                       type: "POST",
                                       url: "creation",
                                       data: 'selectedSubjectCategories='+selectedValues,
                                       success: function(data)
                                       {
                                           if (data!=null)
                                            {
                                                   //alert("\""+data+"\"");
                                                   var subjects = data.split(',');
                                                   var select = $('#subjectslist');
                                                    $('#subjectslist').children().remove();
                                                   $.each(subjects, function(key, subject) 
                                                   {
                                                       if (select.find('option[value="' + subject + '"]').length === 0 && subject!="") 
                                                       {
                                                             //Ajouter la nouvelle catégorie dans la liste
                                                               $('<option>', {
                                                                 value: subject,
                                                                 text: subject
                                                                 }).appendTo(select);
                                                       }
                                                   });
                                            }
                                           else
                                            {
                                                $('#subjectslist').children().remove();
                                            }
                                       }
                                     });
                            }
                        );
                    }).change();
              </script> 
```

=== 伺服器 ===

```
 if (request.getParameter("selectedSubjectCategories")!=null)
        {
            String[] categoryList = request.getParameter("selectedSubjectCategories").split(",");

            ArrayList<String> pourDoublons = new ArrayList<String>();
            String subjectsToShow = new String();

            for (int i=0; i<categoryList.length; i++)
            {
                if (categorySubjectsHashMap.containsKey(categoryList[i]))
                {
                    ArrayList<String> subjectsOfCategory = categorySubjectsHashMap.get(categoryList[i]);
                    for (int j=0; j<subjectsOfCategory.size(); j++)
                    {
                        if (!pourDoublons.contains(subjectsOfCategory.get(j)))
                        {
                            subjectsToShow += subjectsOfCategory.get(j)+",";
                            pourDoublons.add(subjectsOfCategory.get(j));
                        }
                    }
                }
            }
            categoryList = null;
            pourDoublons = null;
            response.setContentType("text/plain");  
            response.setCharacterEncoding("UTF-8");
            response.getWriter().write(subjectsToShow.substring(0,subjectsToShow.length()-1));
        }
        else
        {
            response.setContentType("text/plain");  
            response.setCharacterEncoding("UTF-8");
            response.getWriter().write("");
        } 
```

为什么我的参数不能被检测为空？我也尝试了 .equals(null) 和很多类似的东西，但没有任何效果！:(

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:24:50.737

只有在根本没有发送参数时`request.getParameter(name)`才会返回。*发送参数时*`null`它将返回一个空字符串，但没有值。这允许更容易地区分已发送的参数和未发送的参数。

 *如果您还想检查空虚，则基本上需要使用`String#isEmpty()`检查。

所以，你需要更换

```
if (request.getParameter("selectedSubjectCategories")!=null) 
```

经过

```
String selectedSubjectCategories = request.getParameter("selectedSubjectCategories");

if (selectedSubjectCategories != null && !selectedSubjectCategories.isEmpty()) 
```

或许

```
if (selectedSubjectCategories != null && !selectedSubjectCategories.trim().isEmpty()) 
```

请注意，`string != ""`charlieftl 评论中建议的检查绝对不是检查空字符串的正确方法。( `!=`and `==`) 通过引用而不是值来比较对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T13:53:40.783

```
if (request.getParameter("selectedSubjectCategories")!='') 
```

工作正常。:)*

# wordpress - wordpress 动态和静态页面

> ID：13791926
> 
> 赞同：2
> 
> 时间：2012-12-09T21:17:44.847
> 
> 标签：wordpress, templates, wordpress-theming

我创建了我的第一个 wp 主题，我的首页是动态的帖子等。我想创建一个与主页面不同的页面。以静态内容为主要内容，并在侧面发布帖子的页面模板。例子; 我想创建一个关于我们的页面并有一个静态文本来告诉观众我们在做什么，但我也希望在旁边发布帖子。我已经创建了页面的动态部分，但我遇到了静态部分的问题。

这是动态部分的样子：

```
 <div class="latest-posts eightcol">
      <?php  the_post(); ?>
         <article class="post">
            <h2><a title="<?php the_permalink(); ?>"> <?php the_title(); ?></a></h2>

    <div class="entry-meta links-turquoise">
      <?php the_time('F j, Y'); ?> &mdash;

           <span class="author"> <?php the_author(); ?>utvecklare</span>
              </div><!-- .entry-meta .links-turquoise -->
      <div>
         <?php the_content(); ?>
            </div>
         </article>

      </div><!-- .latest-posts .eightcol --> 
```

我不知道如何写的是静态部分。我想创建这个模板，以便我可以将相同的布局应用于不止一个页面。

我希望你明白我在找什么。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:23:01.853

要创建页面模板，您只需在模板文件顶部添加模板名称作为注释，如下所示：

```
<?php 

/* Template Name: Contact us */

//code 
```

然后它将被您的 wordpress 编辑器识别，您将能够选择它作为页面模板

![联系我们模板](../Images/a04115dc8209546f596f186905f95d40.png)

您可以在加载帖子之前加载页面静态内容，即在循环之前，只需调用`the_post()`and`the_content()`因为*默认帖子是加载的页面*。（`var_dump($post)`自己试试看）。如果您想在循环之后调用它，您可以使用`wp_reset_query();`它返回起点

# objective-c - 选中时将单元格标题设置为粗体

> ID：13791929
> 
> 赞同：1
> 
> 时间：2012-12-09T21:18:09.027
> 
> 标签：objective-c, ios, cocoa-touch

我在更复杂的模式对话框中内置了一个 tableview。在显示对话框之前，我在外部提供了所选单元格的索引，并在 tv:willDisplayCell: 中提供了对话框进程，以便正确的单元格具有粗体字体。但是当对话框最终弹出时，我需要允许它在我选择其他行时也发生变化。
我可能遗漏了一些东西，但我该怎么做呢？如何将选定的单元格标题字体设置为粗体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:20:20.767

您可以在适当的委托方法中更改字体：

```
- (void)tableView:(UITableView *)tv didSelectRowAtIndexPath:(NSIndexPath *)ip
{
    UITableViewCell *c = [tv cellForRowAtIndexPath:ip];
    c.textLabel.font = [UIFont boldSystemFontOfSize:14.0]; // for example
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:26:50.530

为了使它健壮，您需要将所选单元格的索引存储在`tableView:didSelectRowAtIndexPath:`不只是更新单元格中。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
{
    NSIndexPath *previousIndexPath = self.selectedIndexPath;
    self.selectedIndexPath = indexPath;
    [tableView reloadRowsAtIndexPaths:@[ previousIndexPath, indexPath]
                     withRowAnimation:UITableViewRowAnimationNone];
} 
```

现在，先前选择的单元格和新选择的单元格都将被重新加载，并且假设您`cellForRowAtIndexPath:`使用某种方式执行此操作，您当前的使文本变为粗体的实现应该可以工作

```
if ([indexPath isEqual:self.selectedIndexPath]) {
  // bold
} else {
  // not bold
} 
```

这比简单地更新单元格更强大的原因`tableView:didSelectRowAtIndexPath:`是，如果您将单元格滚动到屏幕之外，当它重新打开时，它将正确突出显示。在这里，我们不仅更新了视图，还更新了模型。

# asp.net - asp.net HTTP 处理程序

> ID：13791930
> 
> 赞同：0
> 
> 时间：2012-12-09T21:18:13.103
> 
> 标签：asp.net, vb.net, oop, class, httphandler

我需要一些帮助来解决一个困扰我一段时间的工作应用程序问题。

基本我正在使用一个编写 VB.net 的 HTTP 处理程序，它似乎不时出现一些奇怪的行为。下面是我看到错误的一段代码示例。我已经简化了变量，因为其中一些包含公司数据

```
Public Class wmf
Implements IHttpHandler, IRequiresSessionState

Public ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
    Get
        ' Return false in case your Managed Handler cannot be reused for another request.
        ' Usually this would be false in case you have some state information preserved per request.
        Return True
    End Get
End Property

Private EmployeeID As string
Private Category As string

Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

'' handles user session and writes to database using the private variables above.

End Sub 
```

这主要是伪代码（因此忽略任何最佳实践），但我遇到了一些问题，当从会话数据（或可能与每个实例化不同的任何数据）填充此类中的私有变量时，有时似乎或似乎) 的行为类似于共享（静态）变量。

你们中是否有人看到将这样的私有变量放在 HTTP 处理程序中会被多个用户遇到并发问题的问题？

实际上，我已经让这个类与一个基本的记录器显示一个变量，保留来自访问该站点并创建该类实例的用户的值。这可能与它的设置方式还是我想象的那样？

感谢您的任何见解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:22:30.193

我的猜测是`IsReusable`返回 true 会导致您的问题。它将导致值被保留，因为该对象被多个请求重用。

# java - Java bean 持久性模式

> ID：13791931
> 
> 赞同：1
> 
> 时间：2012-12-09T21:18:13.363
> 
> 标签：java, jpa

我是 JPA 的新手，我正在尝试一些入门示例项目。我尝试了 GraniteDS 示例项目（“Hello, World”应用程序），并找到了一种`hello`更新或插入 java bean 的方法。它看起来对我来说有点糟糕，但另一方面我不确定它应该如何看起来更好。

**更新** 我不喜欢 Query 必须抛出异常才能知道不`Welcome`存在实体的结果。有没有办法以优雅的方式检查是否有任何记录？

```
 package info.alekna.project.services;

import java.util.List;
import java.util.Date;
import java.text.SimpleDateFormat;

import javax.persistence.Query;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.NoResultException;

import org.granite.tide.data.DataEnabled;
import org.granite.tide.data.DataEnabled.PublishMode;

import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import info.alekna.project.entities.Welcome;

@Service
@DataEnabled(topic="welcomeTopic", publish=PublishMode.ON_SUCCESS)
public class WelcomeServiceImpl implements WelcomeService {

    @PersistenceContext
    private EntityManager entityManager;

    @Transactional
    public Welcome hello(String name) {
        if (name == null || name.trim().length() == 0)
            throw new RuntimeException("Name cannot be null or empty");

        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        Welcome welcome = null;
        try {
            Query q = entityManager.createQuery("select w from Welcome w where w.name = :name");
            q.setParameter("name", name);
            welcome = (Welcome)q.getSingleResult();
            welcome.setMessage("Welcome " + name + " (" + sdf.format(new Date()) + ")");
        }
        catch (NoResultException e) {
            welcome = new Welcome();
            welcome.setName(name);
            welcome.setMessage("Welcome " + name + " (" + sdf.format(new Date()) + ")");
            entityManager.persist(welcome);
        }
        return welcome;
    }

    @Transactional(readOnly=true)
    public List<Welcome> findAll() {
        return entityManager.createQuery("select w from Welcome w order by w.name", Welcome.class).getResultList();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:33:23.217

好吧，您可以调用`getResultList()`并`Query`检查结果`List`'`size()`是否正好是 1。

但是，如果您绝对确定查询必须只返回一个结果，那么调用`getSingleResult()`并捕获两者都是有意义的，`NoResultException`并且`NonUniqueResultException`- 如果发生其中任何一个异常，那是因为只返回一个结果的假设是错误的，并且它应该作为错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:35:19.330

（回答评论中的问题）您可以随时使用`q.getResultList()`并检查列表的大小。这样做的问题是它会导致桌子上的完整运行，如果不需要，应该避免它。

`NoResultException`如果您显式调用它是一种合乎逻辑的抛出，`getSingleResult`因为它是一种异常状态:-)

# java - Bison/Java 类型的自动对话

> ID：13791934
> 
> 赞同：1
> 
> 时间：2012-12-09T21:18:33.353
> 
> 标签：java, bison

我正在使用 Bison 和 Java 进行解析器，但我遇到了一些问题。我使用我自己的类型“TreeNode”作为默认语义值。这是我的 .y 文件中的代码：

```
prog: def_var TERMINATOR inc_val {
    TreeNode t = new TreeNode();
    t = $1;
} 
```

它的代码由 Bison 生成：

```
TreeNode t = new TreeNode();
t = ((Integer)(yystack.valueAt (9-(1)))); 
```

而且我有错误“不可转换的类型”，因为我的 TreeNode 无法转换为整数。如何禁用此自动转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:35:44.153

我不相信您引用的代码来自您引用的野牛规范，因为我不相信野牛会更改变量名，即使在 Java 中也是如此。因此，您应该尝试追踪实际产生该编译时错误的产品。我怀疑您会发现`b`从该生产中分配的任何内容都有 type `Integer`。

bison 总是为其 Java 对象堆栈使用一些基本类型（我猜你会说是超级类型），它可以保存来自任何终端或令牌的任何语义值。默认情况下，它使用，`Object`但如果您愿意，您可以定义更严格的内容。因此它必须将对象堆栈上的值转换为令牌或终端的已知（声明的）值。这就是它的`(Integer)`来源。

# watir - Watir 更快的点击链接方式

> ID：13791936
> 
> 赞同：0
> 
> 时间：2012-12-09T21:18:45.110
> 
> 标签：watir

我在 .rb 脚本中使用以下命令来单击我正在开发测试计划的网页的链接。然而，似乎在执行此命令时，在启动和系统识别它之间有 3 秒的延迟。我可以手动点击链接，几乎是瞬间完成的。

b.link(:text, "提交 ITSM").click

我在循环之前添加了“b.speed = :fast”，其中包含上面的点击但没有改进。

是否有某些“:names”比“:id”之类的工作更快？任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:51:15.707

我找到了答案。改用以下内容：

b.div(:id, "(id)").link(:class, "(class)").click

# android - 从sharedpreferences更新android视图寻呼机片段

> ID：13791937
> 
> 赞同：0
> 
> 时间：2012-12-09T21:18:51.147
> 
> 标签：android, tabs, settings, android-viewpager, preferences

我成功地将我的应用程序从活动转换为带有 2 个选项卡/片段并在它们之间滑动的选项卡式/分段式应用程序 :)

现在我有 2 个选项卡： 1 - 主选项卡 - 根据存储在共享首选项中的设置显示文本字段和内容。2 - 设置 - 提供一些输入来更改这些共享偏好。

问题是当我更改设置（共享首选项）时，主选项卡不会根据新的共享首选项进行更新。

我正在寻找一种解决方案来更新主选项卡，并且可能在未来的另一个或两个选项卡中，当共享首选项（从设置选项卡）发生尽可能多的解耦时。我不希望设置选项卡显式保存对其他片段的引用并执行更新......

我尝试实现某种观察者模式，其中设置选项卡宣布在设置更改后需要更新，但没有找到如何让其他选项卡实际执行更改，因为它们位于视图寻呼机中，这使事情变得复杂。 .

任何帮助表示赞赏。我正在使用来自：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html的 TabsAdapter](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:32:52.130

您有 2 个选项：

1.  `getActivity()`通过在设置片段中使用，通过主 Activity 重新加载所有片段。

2.  创建和命名`SettingsListener`的接口将具有类似的功能`onSettingsChanged()`，并在应该更新的片段中实现它。设置片段将包含一个侦听器列表。

# matlab - 在 MATLAB 中预分配结构

> ID：13791940
> 
> 赞同：0
> 
> 时间：2012-12-09T21:18:59.947
> 
> 标签：matlab, struct

我有矩阵 A，它是一个 1*11470 结构，每个 A，例如 A(1,1) 有两个元素，nPoints 和矩阵。我将进行一些计算，在这些计算之后，A.matrix 中的元素数量将增加 8 倍，但 A.nPoints 将相同。我想为这个过程做预分配，但我不知道怎么做。请你帮助我好吗？

注意：为了让我的问题更清楚，我添加了两个屏幕截图。我想要的是，例如 A(1,2).matrix 有 3 个元素。在进行某些计算后，我将在该矩阵中有 24 个元素，我需要预先分配一个 A2 矩阵，它与 A 具有相同的长度 (1*110470)，nPoints 的大小相同，但 A 的大小大 8 倍（ 1,k).矩阵。

问候，

![在此处输入图像描述](../Images/bc4a6fe447a4d0e77af4cdfcc8870c40.png)

![在此处输入图像描述](../Images/664986198efad4d69e4f0e895a252bee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:02:21.243

我无法了解您问题的确切细节，但预分配大小变化的矩阵的一般解决方案是将其从头初始化为最大大小。然后，如果您暂时需要在其中保存一组较小的数字，请通过对其进行索引而不是重置其大小来实现。

例如，如果您需要的最大大小是 1x11470，请将变量初始化为这个大小

```
a = NaN(1, 11470); 
```

然后，如果您需要在其中存储一个较小尺寸的矢量，您可以这样做

```
a(1:5) = rand(1,5); 
```

如果您需要访问此向量，那么您可以

**1\. 即时找到它的索引，**

```
 a(~isnan(a)) 
```

**2\. 每次修改时跟踪子数组的大小**

```
a.mat = nan(1,11470)
a.idx = 5; 
a.mat(1:a.idx) = rand(1,a.idx); 
```

如果你关心速度，那么第二种方法更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:03:13.263

我想这可以解决你的问题：

```
B = struct ('nPoints',repmat({zeros(1)},1,110470), 'matrix',repmat ({zeros([(max([tracks(:).nPoints])^3) 3])},1,110470)); 
```

如果没有，请告诉我。

# linq - 有效地查询列表中的列表

> ID：13791942
> 
> 赞同：0
> 
> 时间：2012-12-09T21:19:10.883
> 
> 标签：linq, linq-to-sql

我正在尝试查询产品列表，每个产品都有一个订单列表。

所以是这样的：

```
from s in products
join o in orders on s.ProductID = o.ProductID
select new ProductRecord
{
  ProductName = s.Name,
  OrderList = o.Select(x=>new OrderRecord(OrderID = x.OrderID, OrderName = x.OrderName).ToList()
} 
```

OrderList 是一个`List<OrderRecord>`

我的查询比这复杂得多，但这说明了这个想法。

最后，我想在我的网页上列出这样的内容：

```
Product 1
    Order 1
    Order 2
    Order 3

Product 2
    Order 4
    Order 5
    Order 6 
```

这虽然不是很好。这是一个缓慢的查询，Mini Profiler 说我的页面上有 100 个重复查询。如果我把那些`OrderList`东西拿出来，一切都会变得活泼。

我想我在处理这个问题时都错了。我如何有效地查询这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:22:47.163

`ToList`从查询中删除。还可以使用 group join 来获取产品订单：

```
var query = from s in context.Products
            join o in context.Orders on s.ProductID equals o.ProductID into g
            select new ProductRecord
            {
                  ProductName = s.Name,
                  OrderList = g.Select(x => new OrderRecord() 
                                            { 
                                                OrderID = x.OrderID, 
                                                OrderName = x.OrderName
                                            })
            }; 
```

OrderList 应该是`IEnumerable<OrderRecord>`. 以下是 SQL Profiler 针对此类查询向我显示的内容：

```
SELECT 
[Project1].[C1] AS [C1], 
[Project1].[Name] AS [Name], 
[Project1].[C2] AS [C2], 
[Project1].[OrderID] AS [OrderID]
FROM ( SELECT 
    [Extent1].[Name] AS [Name], 
    1 AS [C1], 
    [Extent2].[OrderID] AS [OrderID], 
    CASE WHEN ([Extent2].[OrderID] IS NULL) 
         THEN CAST(NULL AS int) ELSE 1 END AS [C2]
    FROM  [dbo].[Products] AS [Extent1]
    LEFT OUTER JOIN [dbo].[Orders] AS [Extent2] 
         ON [Extent1].[ProductID] = [Extent2].[ProductID]
)  AS [Project1]
ORDER BY [Project1].[ProductID] ASC, [Project1].[C2] ASC 
```

# javascript - 用两个对象渲染 json

> ID：13791945
> 
> 赞同：0
> 
> 时间：2012-12-09T21:19:28.260
> 
> 标签：javascript, ruby-on-rails, json, render

我需要用两个对象渲染 json 怎么做呢？

最初的版本是：

*/controller/comments_controller.rb*

```
 def create
          ....
          respond_to do |format|
            format.html { redirect_to @comment.commentable, flash[:notice] => t('comment.actions.added') }
            format.json { render :json => @comment }
          end
    end 
```

*javascripts/comment.js：*

```
submitComment = function(form) {
  $.ajax("/comments/?format=json", {
    type: "post",
    data: form.serializeArray(),
    success: function(comment) {
      $.get("/comments/" + comment.id, function(commentHtml) {
        newComment = $(commentHtml).hide();
        commentsList = $('#' + comment.commentable_type + comment.commentable_id + 'Comments');
        commentsList.append(newComment);
        newComment.show('slow');
      });
      $(form.selector + " textarea").val("");
    },
    error: function() {
      showMessage({
        title: "Error",
        message: "Error occured. Please try resubmit the data."
      });
    }
  });
} 
```

我想添加动态更新数量的评论，我认为这样做是：

```
def create
      ....
      respond_to do |format|
        format.html { redirect_to @comment.commentable, flash[:notice] => t('comment.actions.added') }
        format.json { render :json => {comment: @comment, comments_count: @comment.commentable.comments.count }
      end
end 
```

但我不明白如何将 comments_count 添加到脚本 javascripts/comment.js 中。我插入 comments_count 的所有尝试，例如：

```
$('#comments_count').html(comments_count); 
```

我得到一个错误或答案“真”

请帮我！并提前感谢！

**==== 更新 =====**

[eicto](https://stackoverflow.com/users/815386/eicto)，谢谢，目前的功能是：

```
submitComment = function(form) {
  $.ajax("/comments/?format=json", {
    type: "post",
    dataType: 'json',
    data: form.serializeArray(),
    success: function(comment) {
      $("h2#comments_count").text(comment.comments_count);
      $.get("/comments/" + comment.comment.id, function(commentHtml) {
        newComment = $(commentHtml).hide();
        commentsList = $('#' + comment.comment.commentable_type + comment.comment.commentable_id + 'Comments');
        commentsList.append(newComment);
        newComment.show('slow');
      });
      $(form.selector + " textarea").val("");

    },
    error: function() {
      showMessage({
        title: "Error",
        message: "Error occured. Please try resubmit the data."
      });
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:47:07.093

据我了解，您返回的对象如下：

`{comment: [], comments_count: 100 };`或者它可能是`{comment: {}, comments_count: 100 };`

无论如何，这里只有返回对象的两个根属性......

所以你应该将它解析为 json 并在回调中放置元素：

```
submitComment = function(form) {
  $.ajax("/comments/?format=json", {
    type: "post",
    dataType: 'json', // <- HERE
    data: form.serializeArray(),
    success: function(comment) {
      $('#comments_count').text(comment.comments_count); // <- AND HERE
      $.get("/comments/" + comment.id, function(commentHtml) {
        newComment = $(commentHtml).hide();
        commentsList = $('#' + comment.commentable_type + comment.commentable_id + 'Comments');
        commentsList.append(newComment);
        newComment.show('slow');
      });
      $(form.selector + " textarea").val("");
    },
    error: function() {
      showMessage({
        title: "Error",
        message: "Error occured. Please try resubmit the data."
      });
    }
  });
} 
```

这里还有其他奇怪的事情，比如为什么你将评论数组解释为单个评论并试图获取它的属性 id ......但它与问题无关。

# database - 表索引和默认范围

> ID：13791946
> 
> 赞同：0
> 
> 时间：2012-12-09T21:19:33.207
> 
> 标签：database, ruby-on-rails-3

在我们的多租户应用程序`where account_id = ...`中（几乎）添加到每个查询中。几乎每个表都有一个 account_id 列。

在这样的设置中，当为表的外键添加索引时，我是否应该始终在索引中包含 account_id？

例如：

```
add_index 'projects', ["customer_id"]
OR
add_index 'projects', ["customer_id","account_id"] 
```

我们的应用程序的设置方式在没有 account_id 条件的情况下永远不会在项目表上运行查询，所以我希望第二个选项是正确的。但我不是数据库专家..

在我们的案例中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:29:08.830

这在很大程度上取决于任何特定客户 ID 值的 Projects 表中将存在多少行。如果您永远不会拥有超过几百个左右，我不确定我是否会费心添加帐户 ID 列。当然，真正确定这一点的最佳方法是进行一些性能测试，无论是否使用索引。

# objective-c - 如何在 Xcode Instruments 中演示内存泄漏和僵尸对象？

> ID：13791948
> 
> 赞同：1
> 
> 时间：2012-12-09T21:19:47.227
> 
> 标签：objective-c, xcode, memory-leaks, instruments, nszombie

我想在一个类上演示 Xcode Instruments 中的内存泄漏和僵尸对象。我发现很难故意触发，尤其是在 ARC 开启的情况下。你知道我怎么能创造它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:03:20.340

## 对于泄漏：

创建两个类，A 和 B。A 应该有一个强引用 B 实例的 @property。B 应该有一个强引用 A 实例的 @property。

```
A *a = [A new];
B *b = [B new];
a.b = b;
b.a = a; 
```

这会造成泄漏。

## 对于僵尸

创建一个类型为 @property `assign`（或类型为 的变量`__unsafe_unretained`。然后：

```
A *a = [A new];
A.dangerDanger = [NSObject new]; 
```

那应该会造成僵尸的情况；更具体地说，是一个悬空指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T08:10:17.850

显示泄漏的更优雅的方法是让一个类具有指向自身的强指针

```
A* a = [A new];
a.leakingpointer=a; 
```

# r - 编译 RSweave 文件：文件不是 ASCII

> ID：13791952
> 
> 赞同：2
> 
> 时间：2012-12-09T21:20:26.047
> 
> 标签：r, latex, pdflatex, rstudio

这是我的问题：

```
\begin{verbatim}

Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

\end{verbatim} 
```

编译时不断收到此错误消息：

> grDevices::pdf.options(useDingbats = FALSE); utils::Sweave('Applied04.Rnw')
> 错误：'Applied04.Rnw' 不是 ASCII 并且没有声明编码
> 执行停止

我不知道发生了什么。我已经逐字使用了。有人可以告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T21:24:10.560

用撇号替换“智能”（非 ASCII）单引号。

我不太确定您为什么要逐字逐句地说明：这是调试练习的一部分，还是您真的想要这样？更有可能，你想要

```
\usepackage[utf8]{inputenc} 
```

在您的 LaTeX 序言中*或*

```
options(useFancyQuotes=FALSE) 
```

在您的 R 设置代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T11:55:04.753

该错误可能是由于使用了作为所选本地键盘布局一部分的任何花哨符号引起的，例如，我在 Rnw 文件的某处使用了德语变音符号，然后我收到了此错误消息。因此，如果您收到此错误消息，请查看整个文件中的非 ASCII 字母或符号，如果出于其他原因您不想添加 \usepackage[utf8]{inputenc}，请适当替换它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-20T17:40:54.403

通常这个错误是由您使用的编码引起的。保存文件时需要小心，确保它们采用 utf8 格式，有时某些程序默认采用 ISO 8859-1 或其他格式（这里有一点解释[https://en.wikipedia.org/wiki/UTF- 8](https://en.wikipedia.org/wiki/UTF-8) ).

所以这是一个可能的解决方案：

```
Stangle("Applied04.Rnw",output="Code.R",encoding="utf8") 
```

# magento - Magento FancyBox 确认对话框

> ID：13791956
> 
> 赞同：1
> 
> 时间：2012-12-09T21:20:39.403
> 
> 标签：magento, fancybox

当我从 Magento 的搜索结果页面将商品添加到购物车时，它不会显示 FancyBox 确认框。该项目确实被添加到购物车中。在主类别页面上，它会在将商品添加到购物车时显示确认框 OK。

FancyBox 的 JS 和 CSS 包含在类别和搜索结果页面中，我已手动检查源。

如果我更换

```
jQuery.fancybox.close(); 
```

和

```
alert(data.message); 
```

然后它会显示一个标准的 Javascript 警报，说明它已添加到购物车并显示正确的项目详细信息。FancyBox 是首选，但带有产品图像。

这是**app\design\frontend\custom_package\default\template\catalog\product\list.phtml**的代码，Javascript 位于末尾。感谢您查看：D

```
<?php
    $_productCollection=$this->getLoadedProductCollection();
    $columnCount = themeOptions('column_count');
    $this->setColumnCount($columnCount);
    $_helper = $this->helper('catalog/output');   

?>
<?php if(!$_productCollection->count()): ?>
<p class="note-msg"><?php echo $this->__('There are no products matching the selection.') ?></p>
<?php else: ?>
<div class="category-products">
    <?php echo $this->getToolbarHtml() ?>
    <?php // List mode ?>
    <?php if($this->getMode()!='grid'): ?>
    <?php $_iterator = 0; ?>
    <?php $imgSize = 192; ?>
    <ol class="products-list" id="products-list">
    <?php foreach ($_productCollection as $_product): ?>
        <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?>">
            <?php include('view/labels.phtml')  ?>   
            <?php $mainImg = $this->helper('catalog/image')->init($_product, 'small_image')->resize($imgSize); ?>
            <?php $backImg = $this->getLayout()->createBlock("ajax/listmedia")->setTemplate("catalog/product/list/media.phtml")->setData('size', $imgSize)->setData('product', $_product)->toHtml();  ?>               
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image">
                <?php if($backImg != 'null'): ?><img src="<?php echo $backImg ?>" width="<?php echo $imgSize ?>" height="<?php echo $imgSize ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /><?php endif; ?>
                <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize($imgSize) ?>" <?php if($backImg != 'null'): ?>onmouseover="hideImage(this)" onmouseout="showImage(this)"<?php endif; ?> width="<?php echo $imgSize ?>" height="<?php echo $imgSize ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
            </a>

             <?php // Product description ?>
            <div class="product-shop">
                <div class="f-fix">
                    <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                    <?php if($_product->getRatingSummary()): ?>
                    <?php echo $this->getReviewsSummaryHtml($_product) ?>
                    <?php endif; ?>
                    <div id="productimgover<?php echo $_product->getId()?>" style="display: none;"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(64); ?>" width="64" height="64" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></div>
                    <div id='productname<?php echo $_product->getId()?>' style='display:none'><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></div>
                    <div class="desc std">
                        <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                    </div>
                    <?php if(themeOptions('addto')): ?>
                        <ul class="add-to-links">
                            <?php if ($this->helper('wishlist')->isAllow()) : ?>
                                <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                            <?php endif; ?>
                            <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                                <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                            <?php endif; ?>
                        </ul>
                    <?php endif; ?>
                </div>
                <div style="clear: both;"></div>
            </div>
            <div class="addtocont">
                <?php echo $this->getPriceHtml($_product, true) ?>
                <?php if($_product->isSaleable()): ?>
                    <?php if ( !($_product->getTypeInstance(true)->hasRequiredOptions($_product) || $_product->isGrouped()) ) { ?>
                        <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocationAjax('<?php echo $this->getAddToCartUrl($_product) ?>','<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                    <?php } else { ?>
                        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="showOptions('<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                        <a href='<?php echo $this->getUrl('ajax/index/options',array('product_id'=>$_product->getId()));?>' class='fancybox' id='fancybox<?php echo $_product->getId()?>' style="display: none;" ><?php echo $this->__('Add to Cart') ?></a>
                    <?php }  ?>
                <?php else: ?>
                <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>            
            </div>
        </li>
    <?php endforeach; ?>
    </ol>
    <script type="text/javascript">decorateList('products-list', 'none-recursive')</script>

    <?php else: ?>

    <?php // Grid Mode ?>

    <?php $_collectionSize = $_productCollection->count() ?>
    <?php 

        $_columnCount = $this->getColumnCount(); 

        if($_columnCount == 4){
            $imgSize = 180;
        }elseif($_columnCount == 3){
            $imgSize = 245;
        }

    ?>

    <?php $i=0; foreach ($_productCollection as $_product): ?>
        <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid columns<?php echo $_columnCount ?>">
        <?php endif ?>
            <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
                <?php if($_product->getRatingSummary()): ?>
                    <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
                <?php include('view/labels.phtml')  ?>
                <?php $mainImg = $this->helper('catalog/image')->init($_product, 'small_image')->resize($imgSize); ?>
                <?php $backImg = $this->getLayout()->createBlock("ajax/listmedia")->setTemplate("catalog/product/list/media.phtml")->setData('size', $imgSize)->setData('product', $_product)->toHtml();  ?>               
                <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image">
                    <?php if($backImg != 'null'): ?><img src="<?php echo $backImg ?>" width="<?php echo $imgSize ?>" height="<?php echo $imgSize ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /><?php endif; ?>
                    <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize($imgSize) ?>" <?php if($backImg != 'null'): ?>onmouseover="hideImage(this)" onmouseout="showImage(this)"<?php endif; ?> width="<?php echo $imgSize ?>" height="<?php echo $imgSize ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
                </a>

                <div id="productimgover<?php echo $_product->getId()?>" style="display: none;"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(64); ?>" width="64" height="64" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></div>

                <div class="moreinfo">
                    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                    <div id='productname<?php echo $_product->getId()?>' style='display:none'><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></div>
                    <?php echo $this->getPriceHtml($_product, true) ?>
                        <?php if($_product->isSaleable()): ?>
                            <?php if ( !($_product->getTypeInstance(true)->hasRequiredOptions($_product) || $_product->isGrouped()) ) { ?>
                                <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocationAjax('<?php echo $this->getAddToCartUrl($_product) ?>','<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>

                            <?php } else { ?>
                                <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="showOptions('<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                                <a href='<?php echo $this->getUrl('ajax/index/options',array('product_id'=>$_product->getId()));?>' class='fancybox' id='fancybox<?php echo $_product->getId()?>' style="display: none;" ><?php echo $this->__('Add to Cart') ?></a>
                            <?php }  ?>
                        <?php else: ?>
                            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                        <?php endif; ?>
                        <div class="clear"></div>
                        <?php if(themeOptions('addto')): ?>
                            <ul class="add-to-links">
                                <?php if ($this->helper('wishlist')->isAllow()) : ?>
                                    <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                                <?php endif; ?>
                                <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                                    <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                                <?php endif; ?>
                            </ul>
                        <?php endif; ?>
                        <div class="clear"></div>
                </div>
            </li>
        <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
        <?php endif ?>
        <?php endforeach ?>
        <script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>

    <?php endif; ?>
        <script type="text/javascript">
        jQuery.noConflict();
        jQuery('.fancybox').fancybox({
            hideOnContentClick : true,
            width: 582,
            autoDimensions: true,
            type : 'iframe',
            showTitle: false,
            scrolling: 'no',
            onComplete: function(){ //Resize the iframe to correct size
            jQuery('#fancybox-frame').load(function() { // wait for frame to load and then gets it's height
                jQuery('#fancybox-content').height(jQuery(this).contents().find('body').height()+30);
                jQuery.fancybox.resize();
             });

            }
        });        
        function showOptions(id){
            jQuery('#fancybox'+id).trigger('click');
        }
        function setAjaxData(data,iframe){
            if(data.status == 'ERROR'){
                alert(data.message);
            }else{
                if(jQuery('.block-cart')){
                    jQuery('.block-cart').replaceWith(data.sidebar);
                }
                if(jQuery('.header .block-cart-header')){
                    jQuery('.header .block-cart-header').replaceWith(data.topcart);
                } 
                jQuery.fancybox.close();
            }
        }
        function setLocationAjax(url,id){
            url += 'isAjax/1';
            url = url.replace("checkout/cart","ajax/index");
            var msgHtml;
            var productImg = jQuery('#productimgover' + id).html();
            var windowOver = jQuery('#addedoverlay');
            var windowBox = jQuery('#added');
            var titleForBox = jQuery('#productname' + id).text();
            windowOver.show();
            windowBox.show().css({
                backgroundImage: "url('<?php echo $this->getSkinUrl('images/loading.gif')?>')"
            });
            try {
                jQuery.ajax( {
                    url : url,
                    dataType : 'json',
                    success : function(data) {
                        if(data.status == 'SUCCESS'){    
                            msgHtml = '<div class="added-content"><div style="float:left;">' + productImg + '</div><em>' + titleForBox + '</em> <?php echo $this->__('was successfully added to your shopping cart.') ?><div style="clear:both;"></div><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a></div>';             
                        }else{
                            msgHtml = '<div class="added-content"><p class="error-msg" style="margin-bottom:15px;">' + data.message + '</p><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a></div>';
                        }            
                        setAjaxData(data,false);

                        windowBox.css({
                              backgroundImage: 'none'
                        }).html(msgHtml);                      
                        windowOver.one('click',function(){
                            hidewindow(windowBox,windowOver);                    
                        });        

                        jQuery('#hidewindow').click(function(){
                            hidewindow(windowBox,windowOver);                    
                        });                        
                    }
                });
            } catch (e) {
            }
        }
        function hidewindow(windowBox,windowOver){
            windowOver.fadeOut(400);
            windowBox.fadeOut(400).html('');    
        }        
        function hideImage(img){
            jQuery(img).animate({
                'opacity' : 0
            },150);
        }

        function showImage(img){
            jQuery(img).animate({
                'opacity' : 1
            },150);
        }

        </script>
    <div class="toolbar-bottom">
        <?php echo $this->getToolbarHtml() ?>
    </div>
</div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:30:12.890

您似乎有很多代码，我不能 100% 确定它们的用途。看看[@fancybox options/apis](http://fancyapps.com/fancybox/)

尝试这个

```
success : function(data) {
    if(data.status == 'SUCCESS'){    
        msgHtml = '<div class="added-content"><div style="float:left;">' + productImg + '</div><em>' + titleForBox + '</em> <?php echo $this->__('was successfully added to your shopping cart.') ?><div style="clear:both;"></div><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a></div>';             
    }else{
        msgHtml = '<div class="added-content"><p class="error-msg" style="margin-bottom:15px;">' + data.message + '</p><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a></div>';
    } 

    jQuery.fancybox({
         content: msgHtml,
         modal: true
    });           

} 
```

请参阅[如何使用内联 div 以编程方式触发 fancybox？](https://stackoverflow.com/questions/5811415/how-to-programatically-trigger-fancybox-with-an-inline-div)

同样在`function setAjaxData(data,iframe)`成功的情况下，您似乎正在使用关闭fancybox`jQuery.fancybox.close();`

改变这个

```
<a id="hidewindow" href="javascript:void(0);">?php echo $this->__('Continue shopping') ?>... 
```

到（类似）

```
<a href="#" onclick="jQuery.fancybox.close();">... 
```

# c++ - C++ 程序每隔一行读取输入文件，而不是每一行

> ID：13791958
> 
> 赞同：1
> 
> 时间：2012-12-09T21:21:23.477
> 
> 标签：c++

我正在做一项家庭作业，该作业使用外部文件计算 GPA 和课程平均值。代码并没有完全充实，但我已经构建了足够多的代码，它至少应该能够向我展示它可以从外部文件（在 TextWrangler 中创建的纯文本文件）中提取数据，并计算数字.

但是，当我运行它时，它似乎只会拉出输出文件的每一*行*。关于我可能出错的地方有什么想法吗？

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>
using namespace std;

int main()
{

    int studentID, studentCounter=0;
    double grade1, grade2, grade3, grade4, course1Sum=0, course2Sum=0, course3Sum=0, course4Sum=0, course1Average, course2Average, course3Average, course4Average, GPA;
    ifstream inputFile;
    string filename;

    for (int x=1; x<=3; x++) {

        // Get the filename from the user.
        // /Users/etc/Desktop/HW5test.txt - valid set
        // /Users/etc/Desktop/HW5testset.txt - test set

        cout<<"Enter the filename: ";
        cin>>filename;

        // Open the file.
        inputFile.open(filename.c_str());
        // If the file successfully opened, process it.
        if (inputFile) {
            // Read the numbers from the file and display them.
            while (inputFile>>studentID>>grade1>>grade2>>grade3>>grade4)
            {
                if (studentCounter==0) // Prints header if at the start of the program.
                    cout<<"Header placeholder"<<endl;

                inputFile>>studentID>>grade1>>grade2>>grade3>>grade4;
                GPA=(grade1+grade2+grade3+grade4)/4;
                cout<<studentID<<" "<<GPA<<" "<<"Special message (if needed)."<<endl;

                // Course Average and Student Accumulators
                course1Sum+=grade1;
                course2Sum+=grade2;
                course3Sum+=grade3;
                course4Sum+=grade4;
                studentCounter++;

            } // Ends while() loop.

            if (studentCounter==0)
                cout<<"File contains no data."<<endl;

            else {

            // Perform course averages here, after all data has been read.
            course1Average=course1Sum/studentCounter;
            cout<<"Course 1 average: "<<course1Average<<endl;
            course2Average=course2Sum/studentCounter;
            cout<<"Course 2 average: "<<course2Average<<endl;
            course3Average=course3Sum/studentCounter;
            cout<<"Course 3 average: "<<course3Average<<endl;
            course4Average=course4Sum/studentCounter;
            cout<<"Course 4 average: "<<course4Average<<endl<<endl;

            } // Ends "else" of file empty error check.

            // Close the input file.
            inputFile.close();
        } // Ends "if" of if/else().
        else {
            cout<<"Error opening the file.\n";
        } // Ends "else" of if/else().

    } // Ends for() loop.

    return 0;
} // Ends main(). 
```

输入文件数据：

```
1001 3.0 2.7 2.0 2.8 
1002 3.7 3.5 4.0 4.0 
1003 0.0 1.0 2.2 1.0 
1004 4.0 3.0 3.5 3.5 
```

我的输出看起来像这样（请记住，仍在处理部分，但请注意它只是拉动所有其他条目：

```
Enter the filename: /Users/etc/Desktop/HW5testset.txt
Header placeholder
1002 3.8 Special message (if needed).
1004 3.5 Special message (if needed).
Course 1 average: 3.85
Course 2 average: 3.25
Course 3 average: 3.75
Course 4 average: 3.75 
```

会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:23:36.017

`inputFile>>studentID>>grade1>>grade2>>grade3>>grade4`出现在您的 while 语句和 while 语句中。删除不在while条件下的实例（`GPA=`.

您阅读了 while 语句中的行，然后阅读了下一行，因此永远看不到这两行中的第一行。仅仅因为代码在其中`while()`并不意味着它没有副作用

## 编辑

也让你的

```
if (studentCounter==0) // Prints header if at the start of the program.
    cout<<"Header placeholder"<<endl; 
```

进入：

```
if (studentCounter==0) { // Prints header if at the start of the program.
    studentCounter++;
    cout<<"Header placeholder"<<endl;
    continue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:32:13.860

您的 while 循环已经将输入流读入 studentID、grade1、grade2、grade3、grade4。

它们已经在循环的每次迭代中设置。通过在打印标题后再次读取输入流，您正在更新变量，这就是您读取所有偶数行的原因。

```
while (inputFile>>studentID>>grade1>>grade2>>grade3>>grade4) { // reads 1001
    // grade1-grade4 are already set
    if (studentCounter==0) // Prints header if at the start of the program.
    cout<<"Header placeholder"<<endl;
    inputFile>>studentID>>grade1>>grade2>>grade3>>grade4; // reads 1002, remove this line
    GPA=(grade1+grade2+grade3+grade4)/4;
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:33:04.667

通过`inputFile>>studentID>>grade1>>grade2>>grade3>>grade4`在代码中执行两次，每次`while`循环迭代时都会读取输入文件的两行。您应该删除其中之一，可能是 while 循环内的那个。

# php - PHP & MySQL 在数据库中保存公式以生成报告

> ID：13791961
> 
> 赞同：3
> 
> 时间：2012-12-09T21:21:34.423
> 
> 标签：php, mysql, codeigniter, report

我正在开发/维护一个 Web 应用程序，其中必须根据一段时间的设置和公式方法自动生成门户上的不同报告和网页。

例如，一个月的计算可以是 ($a+$b)，而下个月的计算可以是 (($a+$b)/2)，甚至是 ($a+$b)/2*100 对于一个组/一个月内的个人类型...

最重要的是，我希望用户（管理员）能够在特定时间段内设置公式方法，**但我未能达到这个目标**

我认为这一定是一个很好的解决方案，因为我的应用程序有一个计算中心，可以将计算分发到 PDF 报告、XLS 导出、实时网页......并且所有这些地方的数字**必须准确且相同**

现在的问题是：

有没有办法在数据库中存储代码（php脚本、代码片段）以及日期间隔，以便可以评估“eval（）”并执行计算？

如果是，是否有一种方法可以创建允许最终用户（没有编程技能）设置公式的用户界面？

任何文档？链接阅读？

供您参考，我使用 CodeIgniter PHP 框架构建我的 Web 应用程序

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:42:12.880

**不要**让用户编写`eval()`针对您的数据库进行 -ed 的代码。

数据库是用于数据的。代码是为了代码。

您会发现在 PHP 中的模型类中编写自定义报告有以下好处：

*   开发速度更快
*   更容易调试
*   运行速度更快
*   在安全漏洞方面更安全地执行

让用户指定标准，然后您编写应用程序代码来解释他们的标准并将其映射到您编写的代码中。

一些用户的条件只是日期范围等的特定值，您可以将它们添加为[查询参数绑定](http://ellislab.com/codeigniter/user-guide/database/queries.html)。

其他标准会改变报告查询的逻辑，对于这些，您需要调用您已编码的不同报告编写器。

用户在撰写报告时要求*任意*的灵活性是不合理的。他们不会对结果感到满意，无论是在性能还是安全方面。

# contiki - Contiki IPv4 UDP广播数据包不发送

> ID：13791962
> 
> 赞同：1
> 
> 时间：2012-12-09T21:21:37.963
> 
> 标签：contiki

我目前正在 Contiki 在 Telos bmote 上实现我的第一个应用程序并遇到了问题。

对于我的应用程序（使用 uIP IPv4 堆栈），我需要能够向所有节点广播消息。

我查看了源代码，发现在 uip_over_mesh.c 中发现数据包是针对外部网络的，然后被发送到网络上的网关节点，而不是分发到所有节点。如果不存在网关节点，它只会丢弃数据包。所以事实上，不是将数据包广播到网络中的所有节点，它要么只是被丢弃，要么只是被发送到网关节点和外部网络。

我的问题是我需要它广播到网络中的其他节点（应该如此），是否有我遗漏的步骤或者我做错了什么？

谢谢 ：）

ps 这是获取要发送的消息的粗略代码。

```
struct uip_udp_conn *udp_conn = udp_broadcast_new(UIP_HTONS(5001), state);
udp_bind(udp_conn,UIP_HTONS(5001));
uip_udp_packet_send(udp_conn, "hello",5); 
```

* * *

抱歉，我的问题似乎不清楚。为了澄清我想要做的是将 IPv4 UDP 数据包发送到广播地址，即使用 allones addr 发送到网络上的所有设备。但是我发现发送设备只会将消息转发到网络上存在的网关节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T13:49:17.340

问题尚不清楚，但我从您想向所有邻居微尘匿名广播消息的问题中了解到。你有两个选择。

1.  如果您使用的是 Contiki 的 RIME 堆栈。在 example/rime/example-broadcast.c 下已经有一个代码（看看第 79,80 行（packetbuf_copyfrom("Hello", 6); broadcast_send(&broadcast))）；我已经测试了代码，它运行良好在 teleosB 下很好。我强烈建议您使用 RPL 使用 uIP (IPv6) 堆栈。对于大型网络，维护 rime 堆栈将非常困难。

2.  您可以使用示例/ipv6/simple-udp-rpl 中的基于 udp 的 ipv6 启用广播示例。除非您想要更多附加功能，否则您无需为接收器功能进行任何更改。该函数将打印接收端口、发送端口和数据长度。如果要打印 IP 地址，可以在接收器函数中从“uip_ipaddr_t”添加“addr”。对于发件人，代码行是 (76-91)。您无需更改“hello”之类的简单消息。我测试了代码，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T15:36:11.730

在大量阅读 Contiki 源代码后，我发现问题出在 uip_over_mesh.c 中。当发送广播消息（255.255.255.255）时，发送函数将检查目标是否在本地网络内（基于网络掩码和目标地址），它会跳闸。否则，它将尝试将其发送到本地网关（如果存在）以将其路由到网络之外。

虽然 IPv4 UDP 广播已内置到 api 中，但我没有看到它实际上在 uip_over_mesh.c 中实现的证据（我可能错了，完全错过了它）。因此，为了解决这个问题，我添加了一个广播 RIME 频道，并添加了对前面提到的网关检查所在的所有地址的检查。还实现了一种接收广播消息的方法，以确保正确接收广播消息并将其传递给上层。

从我从这里收集的信息和邮件列表来看，IPv6 是重点，没有多少人了解或使用 IPv4 uip 堆栈。当我有时间时，我会挖掘我修改后的 uip_over_mesh.c 并查看是否可以推送修改，尽管由于上述缺乏兴趣，我确信它有点小技巧并且没有多大用处。

# ruby - 如何让 Ruby 脚本每秒运行一次？

> ID：13791964
> 
> 赞同：3
> 
> 时间：2012-12-09T21:21:41.863
> 
> 标签：ruby

我有一个需要每秒运行一次的 Ruby 脚本。我正在使用 Ruby 脚本来跟踪目录中文件的修改，并希望脚本在“实时”时间跟踪更新。

基本上，我希望我的脚本做与在 Unix shell 上运行“top”相同的事情，屏幕每秒左右更新一次。Ruby 中是否有`setInterval`类似 JavaScript 的等价物？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-09T21:34:07.100

有几种方法可以做到这一点。

快速和肮脏的版本：

1.  贝壳（康沃尔语）：

    ```
    while :; do
       my_ruby_script.rb
       sleep 1
    done 
    ```

2.  手表（1）：

    ```
    shell$ watch -n 1 my_ruby_script.rb 
    ```

    这将每秒运行一次脚本，并在终端中显示最近运行的输出。

3.  在红宝石中：

    ```
    while true
       do_my_stuff
       sleep 1
    end 
    ```

这些都遭受同样的问题：如果实际的脚本/函数需要时间来运行，它会使循环运行的时间少于每秒。

这是一个 ruby​​ 函数，它将确保（几乎）每秒准确地调用该函数，只要该函数花费的时间不超过一秒：

```
def secondly_loop
    last = Time.now
    while true
        yield
        now = Time.now
        _next = [last + 1,now].max
        sleep (_next-now)
        last = _next
    end
end 
```

像这样使用它：

```
secondly_loop { my_function } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T21:31:23.580

[无论何时](https://github.com/javan/whenever)，您都可能会发现这颗宝石很有趣

您可以通过这种方式对重复任务进行编码：

```
every 1.second do
  #your task
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-09T23:24:42.650

如另一个答案所述， rb-inotify 非常适合这种事情。如果您不想使用它，那么一个简单的方法是使用线程：

```
a = Thread.new { loop { some_method; Thread.stop } }
b = Thread.new { loop { sleep 1; break unless a.alive?; a.run } } 
```

要停止轮询，请使用`a.kill`或确保 some_method`Thread.kill`在满足某些条件时终止其自己的线程。

像这样使用两个线程可确保 some_method 至少每秒运行一次，而不管操作的长度如何，而不必花任何时间检查自己（当然，在线程调度的粒度范围内）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-09T23:00:46.897

您可能需要考虑使用 rb-inotify 之类的东西来获取文件更改的通知。这样可以避免“睡觉”，保持“活着”的感觉。

Guard Gem 文档的“高效文件系统处理”部分有一些有用的信息：[https ://github.com/guard/guard#efficient-filesystem-handling](https://github.com/guard/guard#efficient-filesystem-handling)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-09T08:55:48.027

或者您可以使用[Concurrent Ruby](http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/TimerTask.html "并发红宝石") gem中的 TimerTask

```
timer_task = Concurrent::TimerTask.new(execution_interval: 1) do |task|
  task.execution_interval.times{ print 'Boom! ' }
  print "\n"
  task.execution_interval += 1
  if task.execution_interval > 5
    puts 'Stopping...'
    task.shutdown
  end
end

timer_task.execute 
```

从同一链接中提取的代码

# javascript - 为什么 document.write("-->") 不能按预期工作？

> ID：13791969
> 
> 赞同：5
> 
> 时间：2012-12-09T21:22:27.943
> 
> 标签：javascript, html, document.write

```
<p>hello</p>
<script type="text/javascript">
document.write("<!--");
</script>
<p>world</p>
<script type="text/javascript">
document.write("-->");
</script>
<p>nihao</p> 
```

我认为这段 HTML 的输出是

```
hello
nihao 
```

但结果如下：

```
hello
");
nihao 
```

我应该如何达到我的预期？这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T21:30:41.033

好吧，第一个 JavaScript 元素被执行，导致如下表示：

```
<p>hello</p>
<!--
<p>world</p>
<script type="text/javascript">
document.write("-->");
</script>
<p>nihao</p> 
```

因此，您刚刚将 HTML 注释开始添加到下一个 JavaScript 元素中，结果输出与您描述的一样。要回答您的第二个问题，以下有什么问题？

```
<p>hello</p>
<script type="text/javascript">
document.write("<!--<p>world</p>-->");
</script>
<p>nihao</p> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T21:24:59.563

这是因为`<!--`在 JavaScript 运行之前，您的 javascript 中的 被解析为注释的开头。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-09T21:32:27.687

有一些有用的答案，但如果您真的想创建评论并将其插入到您的文档中，那么您需要使用该[`createComment()`功能](https://developer.mozilla.org/en-US/docs/DOM/document.createComment)：

```
var comment = document.createComment("This is a comment") 
​document.appendChild(comment);​ 
```

将输出：

```
<!--This is a comment--> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T21:31:04.810

要获得您期望的准确结果：

```
<p>hello</p>
<script id="ahh" type="text/javascript">
document.write("<!"+"--"+"<p>world<p>--"+">");
document.getElementById('ahh').remove()
</script>
<p>nihao</p>​ 
```

无论如何，这是一个非常糟糕的主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-07T22:56:28.803

如果您像我一样遇到这个问题，希望在启用 JavaScript 时隐藏元素，请考虑改用`<noscript>`标签！

# java - 按内部 ArrayList 中的索引对 ArrayList 的 ArrayList 进行排序

> ID：13791973
> 
> 赞同：1
> 
> 时间：2012-12-09T21:22:46.190
> 
> 标签：java, class, sorting, arraylist

我有一个包含名字、姓氏、地址、电子邮件和电话号码的数组列表，以及一个包含多个“条目”的数组列表，每个条目都包含所有 5 个索引。获取和设置所有 5 个值的方法都在 Entry 类中，而添加、修改、删除和排序条目在类 Contact List 中完成。

我正在尝试按姓氏对条目进行排序并在 ContactList 类中打印出来。我有：

```
public void listEntries()
    {
        Collections.sort(entries);

        for (int i = 0; i < entries.size(); i++)
        {

            entries.get(i).print();
        }
    } 
```

我知道我遗漏了一些东西来定义排序依据，但我什至不确定我是否应该使用 Collections.sort。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:33:18.223

您具有给定条目的类（我认为该条目就是那个类）必须实现[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.htmlComparable)接口。然后您可以对您的收藏使用排序。顺序是通过自然顺序给出的（在 Comparable 接口的实现方法中由您自己决定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:33:41.247

你错过了一个比较器作为一个额外的参数`sort`- 例如

```
Collections.sort(entries, new Comparator<List<String>>() {
    @Override
    public int compare(List<String> o1, List<String> o2) {
        return o1.get(1).compareTo(o1.get(1));
    }
}); 
```

# c# - C# 获取 Windows 8 启动/地铁进程

> ID：13791979
> 
> 赞同：0
> 
> 时间：2012-12-09T21:23:23.300
> 
> 标签：c#, windows-8, microsoft-metro

是否有可能获得 Windows 8 启动/地铁进程？
如果是，比如何？

我试图列出所有正在运行的进程，但我不知道哪个是开始
如果你问我需要它做什么> 我需要，因为我想将它永久地放在我的一个屏幕上而不被最小化/关闭。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:25:13.320

与旧版本中的开始菜单一样，开始屏幕是资源管理器的一部分。我相当肯定你不能做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:55:21.810

编辑！！

我知道启动应用程序的方法有两种。您可以通过 FA（文件关联）或 PH（协议处理程序）（Windows.System.Launcher.LaunchUriAsync 和 Windows.System.Launcher.LaunchFileAsync）启动应用程序

我几天前回答了这个问题。但我的回答中并未提及所有内容。

> 所有 Metro 风格的应用程序都在高度沙盒环境中工作，无法直接启动外部应用程序。
> 
> 您可以尝试[使用 Launcher](http://msdn.microsoft.com/en-us/library/windows/apps/br241801.aspx)类 - 取决于您的需要，它可能会为您提供可行的解决方案。

在此处检查[原始问题](https://stackoverflow.com/questions/13734315/start-process-in-windows-8-metro-application/13734520#13734520)！

# php - cURL SSL：验证并允许使用另一个站点证书的站点

> ID：13791980
> 
> 赞同：1
> 
> 时间：2012-12-09T21:23:35.110
> 
> 标签：php, curl, openssl

站点 A 使用站点 B 的 SSL 证书。我希望我的 PHP 代码使用 cURL 通过 HTTPS 连接到站点 A，并且我希望它尽可能安全。（注意：我无法让站点 A 或 B 更改其设置）。

我完成这项工作的一种方法是在浏览器中访问站点 A，将证书保存到服务器，然后使用 CURLOPT_CAINFO 指向该证书（并将 CURLOPT_SSL_VERIFYPEER 设置为 true）。但是，在这种情况下，我必须将 CURLOPT_SSL_VERIFYHOST 设置为 0（因为站点 B 的名称在证书上）。

当且仅当站点 A 使用站点 B 的证书（上面有站点 B 的名称）时，我更愿意以某种方式告诉 cURL 允许连接。

有没有办法使用 PHP cURL 或通过更改服务器设置来做到这一点？或者，是否有其他 PHP 库可以让我尽可能透明地执行此操作？

补充：这可能会或可能不会使事情复杂化，但我正在尝试加载[https://SomeSmallShoppingSiteIDontControl.com](https://SomeSmallShoppingSiteIDontControl.com)（“站点 A”），它使用仅对 SomeMajorShoppingSiteProviderIAlsoDontControl.com（“站点 B”）有效的证书。

# java - 将背景图像添加到面板

> ID：13791984
> 
> 赞同：1
> 
> 时间：2012-12-09T21:23:50.930
> 
> 标签：java, image, swing, jpanel, paintcomponent

我有一个`JPanel`，我想添加一个图像作为它的背景。我怎样才能做到这一点 ？

```
frame = new JFrame("Some frame");
panel1 = new JPanel();
panel1.setBorder(new EmptyBorder(5, 5, 5, 5));
// NEED TO ADD AN IMAGE TO THIS PANEL

panel1.setLayout(cardlayout);
frame.getContentPane().add(panel1);

frame.setLocationByPlatform(true);
frame.setVisible(true); 
```

我需要添加图像，我该`panel`怎么做？

更新 1

```
 panel1 = new JPanel()
    {
    private static final long serialVersionUID = 1L;

    @Override
    public void paintComponent(Graphics g)
    {

        g.drawImage(Toolkit.getDefaultToolkit().createImage("1.jpg"), 0, 0, null);
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:25:42.820

您需要重写[JPanel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)[`paintComponent(Graphics g)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)的方法并在[Graphics](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html)对象上使用，如[本例所示](https://stackoverflow.com/a/11026881/597657)。[`drawImage()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.Color,%20java.awt.image.ImageObserver%29)`g`

* * *

[另外，通过@trashgod](https://stackoverflow.com/users/230513/trashgod)检查这两个示例：

1.  [例子](https://stackoverflow.com/a/5655843/597657)。
2.  [例子](https://stackoverflow.com/a/6432291/597657)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T22:25:33.463

您有资源定位问题。

`Toolkit#createImage`如果找不到资源，可能会返回空图像。

我建议你改用[`ImageIO`](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)API，它支持更广泛的图像格式，但如果找不到图像或无法加载图像也会抛出异常。

加载图像的方式还取决于图像的位置。

如果图像存在于文件系统中，您可以简单地使用`File`对象引用，如果图像是嵌入式资源（在您的应用程序中），则需要使用`Class#getResource`来获取`URL`它。

![在此处输入图像描述](../Images/a62ab0785c79c8a1e3be060e3fb78f9c.png)

```
public class TestGraphics {

    public static void main(String[] args) {
        new TestGraphics();
    }

    public TestGraphics() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(new PaintTest());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintTest extends JPanel {

        private BufferedImage image;

        public PaintTest() {

            setLayout(new BorderLayout());
            try {
                // Use this if the image exists within the file system
                image = ImageIO.read(new File("/path/to/image/imageName.png"));
                // Use this if the image is an embedded resource
//                image = ImageIO.read(getClass().getResource("/path/to/resource/imageName.png"));
            } catch (Exception e) {
                e.printStackTrace();
            }

        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? super.getPreferredSize() : new Dimension (image.getWidth(), image.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                int x = (getWidth() - image.getWidth()) / 2;
                int y = (getHeight()- image.getHeight()) / 2;
                g.drawImage(image, x, y, this);
            }
        }

    }

} 
```

# c++ - 对列表中的每个对象调用成员函数，以改变对象所在的列表

> ID：13791986
> 
> 赞同：1
> 
> 时间：2012-12-09T21:24:02.683
> 
> 标签：c++, list, object, stl

`std::list`当您遍历该列表时，您如何管理其中的对象需要移动它们的位置，甚至从该列表中删除它们自己的情况？

下面是一个复杂的例子。

你有一个*有序* `list`的对象。

```
list< Object* > objects ; 
```

你有一个循环遍历每个

```
for( list< Object* >::iterator iter = objects.begin() ; iter != objects.end() ; ++iter )
{
    // call "move()" on each
    (*iter)->move() ;
} 
```

现在这是问题所在。 `Object::move()`有时会**重新排序 list**，也就是我们用上面的循环迭代的那个列表。

我不知道如何设计这个。如何编写和调用一个成员函数`Object::move()`，每次调用它时都*可能*重新排序列表，并遍历列表中的每个元素`objects`，调用?`Object::move()``Object``list`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:35:36.773

整体上。

在包含的对象中放置一个知道和操作容器的成员几乎是一个糟糕的设计选择。你想要容器->包含但不包含->容器。

您的排序例程将必须是这样，一个排序例程使用任何“移动”规则，否则将用于决定何时交换事物。当您在其所有元素上调用“移动”时，您基本上是按某种条件对列表进行排序，因此您只需将元素移动到它们被知道如何排序的东西移动的想法改变。当然，当您这样做时，对于不同的客户需求，条件可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:38:39.237

我想我可以在打电话之前记住下一个**应该是***谁* ，并且总是使用它。**`move()`**

 **```
for( list< Object* >::iterator iter = objects.begin() ; iter != objects.end() ; )
{
    // call "move()" on each
    list< Object* >::iterator shouldBeNext = iter ;
    ++shouldBeNext ;

    (*iter)->move() ;

    iter = shouldBeNext ;
} 
```

在调用这个循环之前，我可以`moved`在每个内部设置一个标志，当被调用时，该标志被切换为真。这样，如果对象在列表中移动较早（没关系），并且如果对象在列表中移动较晚，则不会被要求两次。这也确保了*每个*对象都被要求至少移动一次，并消除了由于在列表中向下移动而跳过许多元素而导致对象被跳过的情况。`object``false``Object::move``::move`*`iter``++iter`***

# java - 单击 JButton 后，键盘输入在 Swing 应用程序（计算器）中停止工作

> ID：13791987
> 
> 赞同：4
> 
> 时间：2012-12-09T21:24:04.230
> 
> 标签：java, swing, jbutton, calculator, keylistener

我正在使用 Swing 制作计算器。到目前为止，我已经创建了一个由带有 BorderLayout 的 JFrame 组成的 GUI，并在其中心放置了一个 JPanel，该 JPanel 具有一个 JLabel（代表计算器的屏幕）和一些 JButton（代表按键）。

我希望计算器能够直接从键盘接收输入，因此我将方法 addKeyListener 包含在扩展 JFrame 的类中，并将对实现 KeyListener 的类的对象的引用作为参数。

当我运行应用程序时，它接受键盘输入，直到我单击其中一个 JButton。之后使用键盘不再起作用。

我怀疑问题出在焦点上，但这不是我可以通过单击应用程序的任意位置来解决的问题。我添加了以下代码：

```
setFocusable(true); 
```

到 JFrame 但它没有帮助。我读过使用 Key Bindings 可能比使用 KeyListener 更好，但我不太确定这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:35:37.040

Swing 组件是*轻量级*的并且可以使用[`KeyBindings`](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，其中s 代表*重量级*`KeyListener`的 AWT 组件。并且已知在与 Swing 组件混合时会出现焦点问题。因此我建议改为（但我看到你听说过）。你会像这样使用它们：*`KeyBindings`*

 *```
final JButton b=..;

//method to add keybindings to a JComponent ie JButton,JPanel,JTextField etc
private void addKeyBindings(JComponent jc) {

    //not the getInputMap(..) call it could also be JComponent.WHEN_FOCUSED etc
    jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("D"), "D pressed");

    jc.getActionMap().put("D pressed", new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            //do something when d is pressed
            b.doClick();
        }
    });
} 
```

对于一般知识，一个非常hacky的解决方案是在失去焦点时调用`requestFocusInWindow()`侦听器所附加的组件（例如在按钮单击后等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T11:30:44.060

这是另一种 hacky 方法，但是您可以在创建 JButton 时更改它的属性，以便它不能首先获得焦点，即：

```
myJbutton.setFocusable(false); 
```

这对我有用。*

# c - 具有 realloc 的程序在 Valgrind 中的行为不同

> ID：13791993
> 
> 赞同：2
> 
> 时间：2012-12-09T21:24:20.327
> 
> 标签：c, valgrind, realloc

我编写了一个函数来使用 fgets 读取字符串，该函数使用 realloc() 使缓冲区在需要时增长：

```
char * read_string(char * message){
    printf("%s", message);
    size_t buffsize = MIN_BUFFER;
    char *buffer = malloc(buffsize);
    if (buffer == NULL) return NULL;
    char *p;
    for(p = buffer ; (*p = getchar()) != '\n' && *p != EOF ; ++p)
        if (p - buffer == buffsize - 1) {
            buffer = realloc(buffer, buffsize *= 2) ;
            if (buffer == NULL) return NULL;
        }
    *p = 0;
    p = malloc(p - buffer + 1);
    if (p == NULL) return NULL;
    strcpy(p, buffer);
    free(buffer);
    return p;
} 
```

我编译了该程序并尝试了它，它按预期工作。但是当我使用 valgrind 运行它时，当读取的字符串 >= MIN_BUFFER 并且 valgrind 说：

> ```
> (...)
> ==18076==  Invalid write of size 1
> ==18076==    at 0x8048895: read_string (programme.c:73)
> ==18076==    by 0x804898E: main (programme.c:96)
> ==18076==  Address 0x41fc02f is 0 bytes after a block of size 7 free'd
> ==18076==    at 0x402BC70: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
> ==18076==    by 0x8048860: read_string (programme.c:76)
> (...)
> ==18076== Warning: silly arg (-48) to malloc()
> (...) 
> ```

我在 *p=0; 之间添加了一个 printf 语句 和 p=malloc... 它确认传递的 arg 的值为 -48。我不知道单独启动和使用 valgrind 时程序的运行方式不同。我的代码有问题还是只是一个 valgrind 错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T21:27:46.723

当您重新分配缓冲区时，您的指针“p”仍指向旧缓冲区。

这将占用内存，并导致未来的分配使用虚假值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:26:32.997

`realloc`返回一个指向所请求大小的新缓冲区的指针，其内容与传入的指针相同，假设传入的指针先前由`malloc`or返回`realloc`。它不保证它是同一个指针。Valgrind 很可能会修改 的行为`realloc`，但将其保持在规范内。

由于您在循环中调整内存大小，因此最好通过跟踪您的位置`buffer`作为从开头的偏移量`buffer`而不是指针来为您提供更好的服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:45:15.847

正如 man 3 realloc 所说

> ...该函数可能会将内存块移动到新位置。

这意味着什么

```
p = malloc(p - buffer + 1); 
```

是问题所在。如果调用 realloc()，缓冲区可能指向一个新的内存块和表达式

```
(p - buffer) 
```

没有任何意义。

# git - git 只支持平面标签结构吗？

> ID：13791997
> 
> 赞同：2
> 
> 时间：2012-12-09T21:25:09.577
> 
> 标签：git, svn, version-control, git-tag

我要从`svn`到`git`。我曾经有`svn`一个这样的标签结构：

```
tags
| fixes
| | 14
| | 31
| | 46
| betas
| | 1.1b
| | 1.1b2
| releases
| | 1.0
| | 1.1
| | 1.2 
```

这不可能`git`吗？`git`我读过的每个文档都只提到了带有名称的简单平面标记，但没有层次结构：

```
$ git tag
v1.0
v1.1
v1.2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:33:56.210

你可以`/`输入你的 Git 标签名称，这样你就可以：

```
git tag fixes/14
git tag betas/1.1b 
```

等等。我会认为它有点多余，因为它已经很明显`1.1b`是一个测试版。

请注意 Git 标签和 Subversion 标签是非常不同的。Git 标签是历史上的一个命名点，而 Subversion 标签是一个目录。因此，您可以使用 之类的历史工具浏览 Git 标签`gitk`，因此您可能会发现不需要分层名称。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-15T11:02:16.490

请阅读文档！

让我引用一段[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html)，它解释了 Apache Subversion（以及分支 btw）中标签背后的概念。

> Subversion 没有用于分支或标记的特殊命令，而是使用所谓的“廉价副本”。廉价副本类似于 Unix 中的硬链接，这意味着不是在存储库中制作完整的副本，而是创建一个内部链接，指向特定的树/修订。因此，分支和标签的创建速度非常快，并且几乎不占用存储库中的额外空间。

[SVNBook](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.tags.html)中也描述了标签。