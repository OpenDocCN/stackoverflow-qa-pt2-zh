# StackOverflow 问答 14135000-14135999

# jsf - richfaces 4 tabpanel 和 3 个 tabs-Beans 用于所有三个包括在调用主页时调用

> ID：14135008
> 
> 赞同：1
> 
> 时间：2013-01-03T07:57:48.230
> 
> 标签：jsf, jsf-2, include, richfaces, managed-bean

下面是我的主页，其中包括三个选项卡。问题是当我加载这个主页时，每个页面的托管 bean 都会被立即调用。我的理解是，如果我们将开关类型用作“服务器”，bean 将仅在相应的选项卡单击上引用。如果错误，请纠正我我正在使用的所有托管 bean 都是会话 bean。我将其更改为请求好吧，但这种行为仍然持续存在。

```
 <ui:include src="/xhtml/Page1.xhtml" />
    </rich:tab>

<rich:tab name="Page2" id="tab2" label="PageTab2">
<!-- Tab content here -->

       <ui:include src="/xhtml/Page2.xhtml" />

</rich:tab>
<rich:tab name="Page3" id="tab3" label="PageTab3">
<!-- Tab content here-->

    <ui:include src="/xhtml/Page3.xhtml" />
</rich:tab> 
```

# java - 将像素即rgb存储在二维数组中

> ID：14135017
> 
> 赞同：-1
> 
> 时间：2013-01-03T07:58:42.347
> 
> 标签：java, rgb

我想将像素返回给调用函数，但只有最后一个值是 getin，这意味着它会覆盖该值...

get_pixel_info() 方法正在调用 getPixelData()，在 getPixelData() 方法中，第一个像素 rgb 的值存储在 rgb[] 数组中并返回 rgb 返回到调用函数，因为 for 循环再次控制敌人到 getPixelData() 方法和这个时间覆盖第一个像素上的第二个像素的值，依此类推..我想要所有像素的所有值，但只得到 1

像素 rgb 的值应该返回给调用函数请帮助

```
public static int[] get_pixel_info() 
{
    int[] rgb={0};
    int[][] rgb2 = new int[0][0];

    BufferedImage img;
    try 
    {
        img = ImageIO.read(new File(IMG));
        int[][] pixelData = new int[img.getHeight() * img.getWidth()][3];
        int counter = 0;
        for(int i = 0; i < img.getWidth(); i++) 
        {
            for(int j = 0; j < img.getHeight(); j++) 
            {
                rgb = getPixelData(img, i, j);

                for(int k = 0; k < rgb.length; k++) 
                {
                    pixelData[counter][k] = rgb[k];
                }

                counter++;                
            }            
        }
    } 
   catch (IOException e) 
   {
        e.printStackTrace();
   }
    return rgb;
}

public static int[] getPixelData(BufferedImage img, int x, int y) 
 {
    int argb = img.getRGB(x, y);   
    int rgb[] = new int[] {            
        ((argb >> 16) & 0xff), //red             
        (argb >> 8) & 0xff, //green
        (argb ) & 0xff //blue
    };

    System.out.println("rgb: " + Integer.toBinaryString(rgb[0]) + " " +        Integer.toBinaryString(rgb[1]) + " " + Integer.toBinaryString(rgb[2]));

    return rgb;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:51:34.477

仔细查看您的代码，尤其是您返回的变量。您正在返回 rgb。您没有使用 rgb2 或 PixelData

当你在它的时候。看一下 Java 中的命名约定。变量不应以大写字母开头，名称应使用驼峰式大小写而不是下划线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:22:26.067

你的意思是使用：

```
 pixelData[counter] = getPixelData(img, i, j); 
```

而不是第三个嵌套循环（`k`）？

但是请注意，您的“转换”实际上并没有提供什么好处，只是它使用的内存比`BufferedImage`表示要多得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:33:04.127

这个对我有用：

```
public static int[] getPixelData(BufferedImage img, int x, int y) {
    int argb = img.getRGB(x, y);
    int rgb[] = new int[3];
    rgb[2] = argb & 0xff;         // b
    rgb[1] = (argb >> 8) & 0xff;  // g
    rgb[0] = (argb >> 16) & 0xff; // r
    return rgb;
} 
```

# jsf-2 - PF DynaForm 中的 commandButton 问题

> ID：14135024
> 
> 赞同：0
> 
> 时间：2013-01-03T07:59:34.353
> 
> 标签：jsf-2, primefaces, primefaces-extensions

我对 JSF 和 Primefaces 有点陌生，只是学习一本书并尝试边做边学 ;-) 这样做我遇到了一个问题，我显然不会单独解决。

下面的xhtml代码

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

    <h:head>
        <title>My Testpage</title>
    </h:head>
    <h:body>

        <h:panelGroup>

            <pe:dynaForm id="form_kairos" value="#{kairosController.model}" var="m">

                <pe:dynaFormControl type="input" for="txt">  
                    <p:inputText cols="80" id="txt" value="#{m.value}" required="true"/>  
                </pe:dynaFormControl> 

                <f:facet name="buttonBar">  
                    <p:commandButton value="Submit" 
                                     action="#{kairosController.submitForm}"
                                     style="margin-left: 5px;"/>

                </f:facet>
            </pe:dynaForm>

        </h:panelGroup>

    </h:body>
</html> 
```

按预期显示我的输入字段和提交按钮 - 很好！但是按下按钮不会跳转到 submitForm 方法 :o 。

我的 Bean 代码尽可能简单（目前），如下所示：

```
import de.hlg.kairos.TextInput;
import java.io.Serializable;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.bean.ViewScoped;
import org.primefaces.extensions.model.dynaform.DynaFormControl;
import org.primefaces.extensions.model.dynaform.DynaFormLabel;
import org.primefaces.extensions.model.dynaform.DynaFormModel;
import org.primefaces.extensions.model.dynaform.DynaFormRow;

@ManagedBean
@SessionScoped
public class KairosController implements Serializable {

    private DynaFormModel model;  
    private TextInput myValue;

    public KairosController() {

        model = new DynaFormModel();  
        myValue = new TextInput("myValue");
        DynaFormRow row = model.createRegularRow();
        DynaFormLabel label11 = row.addLabel("my label", 1, 1);  
        DynaFormControl control12 = row.addControl(myValue, "input", 1, 1);  
        label11.setForControl(control12);  

    }

    public DynaFormModel getModel() {
        Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, "getModel()");
        return model;
    }

    public String submitForm() {
        Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, "submitForm()");
        return null;
    }
} 
```

我已经阅读了一些关于嵌套表单的线程，它们似乎不适用于 commandButton。其他人说 ajax="false" 可以帮助按钮，但在我的示例中，这些提示没有帮助，所以我认为我的代码可能有其他问题（对于更有经验的人来说可能非常明显:lol: ） .

[不幸的是，我必须提到，我在PFE 展示](http://fractalsoft.net/primeext-showcase-mojarra/sections/dynaform/basicUsage.jsf)中看到完全相同的行为，所以我无法与工作的东西相提并论。

任何使命令按钮在 dynaForm 组件中无需 ajax 即可工作的建议或工作示例？

干杯，乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:44:18.560

我仔细研究了您的示例以及`"form"`primeface 扩展的动态。dynaForm 没有生成`form`. 它“仅”生成一个`table`. 因此，当您尝试通过向其`commandButton`添加属性来制作非 ajax`ajax=false`时，commandButton 将抱怨不`form`存在周围环境。

添加周围`form`元素。那么你的请求应该按照你期望的方式工作。

```
<h:form id="mainForm">
    <pe:dynaForm id="form_kairos" value="#{kairosController.model}" var="m">

        <pe:dynaFormControl type="input" for="txt">
        <p:inputText cols="80" id="txt" value="#{m.value}" required="true" />
        </pe:dynaFormControl>

        <f:facet name="buttonBar">
            <p:commandButton id="commandButton" value="Submit" ajax="false"
             actionListener="#{kairosController.submitForm}" style="margin-left: 5px;" />

        </f:facet>
    </pe:dynaForm>
</h:form> 
```

# c++ - Lex/Yacc Parser 解析列中包含标题和值的文件

> ID：14135026
> 
> 赞同：1
> 
> 时间：2013-01-03T07:59:56.897
> 
> 标签：c++, bison, yacc, lex

我正在尝试为一个日志文件编写一个解析器，该文件具有多个标题和与每个标题关联的值。格式类似于以下：

```
Field1 Field2 Field3 
---------------------
Val1   Val2  Val3 
```

任何人都可以帮助我使用 lex 文件来扫描以下格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:18:27.370

这将识别 lex 中的令牌“标识符”

```
 id [a-z A-Z_][a-zA-Z0-9_]* 
```

您可以将此语法用于解析器。

```
 S : E '\n' V  {printf("Accepted\n");}
    E : E ' ' ID;
    V : V ' ' ID; 
```

`ID`必须从 lex 作为令牌返回

但我认为你应该学习 Flex 和 Bison 教程。那就足够了。如果您使用的是 Linux，Bison 的信息页面有丰富的细节。

# regex - sed 中的正则表达式用于一个语句中的多个替换

> ID：14135027
> 
> 赞同：36
> 
> 时间：2013-01-03T07:59:58.940
> 
> 标签：regex, sed, sublimetext2, regex-group

我想清理一些输入并用可接受的输入替换几个字符，例如丹麦语 ' `å`' 和 ' `aa`'。

这很容易使用多个语句完成，例如`/æ/ae/`, `/å/aa/`, `/ø/oe/`，但由于工具限制，我希望能够在单个正则表达式中完成此操作。

`/[(æ)(ø)(å)(Æ)(Ø)(Å)]/`我可以捕捉到所有相关案例（

```
 $ temp="RødgrØd med flæsk"

 $ echo $temp
 RødgrØd med flæsk

 $ echo $temp | sed 's/[(æ)(ø)(å)(Æ)(Ø)(Å)]/(ae)(oe)(aa)(Ae)(Oe)(Aa)/g'
 R(ae)(oe)(aa)(Ae)(Oe)(Aa)dgr(ae)(oe)(aa)(Ae)(Oe)(Aa)d med fl(ae)(oe)(aa)(Ae)(Oe)(Aa)sk 
```

（第一回声线是为了表明它不是编码问题）

顺便说一句，工具问题是我还想在[Sublime Text 2 片段](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=10509)中使用相同的正则表达式。

谁能看出我的正则表达式有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-03T08:03:40.553

将其拆分为多个`sed`语句，由 分隔`;`：

```
sed 's/æ/ae/g;s/ø/oe/g;s/å/aa/g;s/Æ/Ae/g;s/Ø/Oe/g;s/Å/Aa/g' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T08:04:09.683

和

```
sed -e 's/Find/Replace/g;s/Find/Replace/g;[....];/Find/Replace/g' 
```

你会成功的。

所以，翻译成你需要的

```
sed -e 's/æ/ae/g;s/ø/oe/g;s/å/aa/g;s/Æ/Ae/g;s/Ø/Oe/g;s/Å/Aa/g' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T09:29:52.197

这可能对您有用（GNU sed）：

```
sed -r 's/$/\næaeøoeåaaÆAeØOeÅAa/;:a;s/([æøåÆØÅ])(.*\n.*\1(..))/\3\2/;ta;s/\n.*//' file 
```

它的工作原理是在行尾添加一个查找表，循环直到所有键都被替换，然后删除查找表。

# java - 实施可比

> ID：14135043
> 
> 赞同：-4
> 
> 时间：2013-01-03T08:01:36.310
> 
> 标签：java

```
 import java.util.*;  
    class A implements Comparable<A>  
    {  
        int a;  
        public int compareTo(A other)  
        {  
            A a1 = (A) other; //No need of cast  
            if(this.a == other.a ) return 0;  
            if(this.a < other.a )  return -1;  
            return 1;  
        }  
    }  
    class ctest  
    {  
        public static void main(String args[])  
        {    
            String[] names = {"OOP","BITS","PILANI"};  
            Arrays.sort(names);  
            int[] data = { 10,-45,87,0,20,21 };  
            Arrays.sort(data);    

            A[] arr = new A[5];  
            arr[0] = new A();  
            arr[1] = new A();  
            arr[2] = new A();  
            arr[3] = new A();   
            arr[4] = new A();  
            Arrays.sort(arr);  
        }  
    } 
```

这给出了错误：

```
Exception in thread "main" java.lang.ClassCastException: A cannot be cast to java.lang.Comparable  
    at java.util.ComparableTimSort.countRunAndMakeAscending(Unknown Source)  
    at java.util.ComparableTimSort.sort(Unknown Source)  
    at java.util.ComparableTimSort.sort(Unknown Source)  
    at java.util.Arrays.sort(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:50:14.100

> 线程“main”java.lang.ClassCastException 中的异常：A 无法转换为 java.lang.Comparable

这意味着`A`您正在运行的版本不可比较。很可能您有两个版本的 A 或者您没有正确构建类。我建议使用 IDE 来构建你的类并进行干净的构建应该可以解决这个问题。

顺便说一句：你所有的 A 都是一样的，所以对它们进行排序不会有任何作用。修复构建后，您可以修复这些问题。

# sql-server - 在系统数据库正常的情况下，ms sql server 2005 sa 帐户无法访问我创建的数据库

> ID：14135046
> 
> 赞同：0
> 
> 时间：2013-01-03T08:01:38.563
> 
> 标签：sql-server, sa

就像标题所说的那样。我尝试编写一个教程来展示如何与 ms sql server 进行通信。

我可以与系统数据库如master和model进行通信。但是当我手动创建数据库时，我无法访问数据库。我得到的只是：无法打开请求数据库。

```
 String driverName="com.microsoft.sqlserver.jdbc.SQLServerDriver";
       String dbURL = "jdbc:sqlserver://127.0.0.1:1433; DatabaseName=ddf"; //ddf is what I created.
       String userName = "sa";
       String userPwd = "123456";
       Class.forName(driverName);
   dbConn = DriverManager.getConnection(dbURL, userName, userPwd);
   System.out.println("Connection Successful!"); 
   Statement stmt = dbConn.createStatement();
   String sql = "select * from ddf..ff";
   ResultSet rs = stmt.executeQuery(sql);
   while(rs.next()){
       System.out.println(rs.getRow());
   }
   rs.close();
   stmt.close();
   dbConn.close(); 
```

# selenium-ide - 如何清除 Selenium IDE 中的“最近的测试套件”列表？

> ID：14135052
> 
> 赞同：0
> 
> 时间：2013-01-03T08:02:08.243
> 
> 标签：selenium-ide

即使不再找到文件，Selenium IDE 也不会从“最近的测试套件”列表中删除旧条目。如何将它们移除？

编辑：如今，人们可以轻松地做到这一点`Options -> Clear history -> Clear recent test suites history`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:59:06.493

我也在找这个，在这里找到了：

*   在 Firefox 地址栏中，键入`about:config`

*   在搜索栏中，输入`recentTestCases`

*   对于每一行：在上下文菜单中单击鼠标右键，然后单击`Reset`

![用于 Firefox 的 Selenium IDE 插件 about:config](../Images/98ec983a10021fb41f2e4cc4e4d610a8.png)

# jquery - jquery动画函数重叠页脚

> ID：14135053
> 
> 赞同：0
> 
> 时间：2013-01-03T08:02:10.430
> 
> 标签：jquery, html, jquery-animate

我目前在一个网站上工作，其中一个页面包含一个 jQuery 动画函数，`div`当我沿着页面滚动时它会移动一个容器。这很好用，但是当我放大或放大屏幕时，它会与页脚重叠。

我怎样才能解决这个问题？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Title</title>
<link rel="stylesheet" type="text/css" href="../css/css.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js "></script>
<script type="text/javascript" src="../js/js.js"></script>

<script type="text/javascript"> 
$(document).ready(function(){

//Larger thumbnail preview 

$("#thumbImages.thumb p").hover(function() {

    $(this).css({'z-index' : '10'});
    $(this).find('img').addClass("hover").stop()
        .animate({
            marginTop: '-110px', 
            marginLeft: '-110px', 
            top: '50%', 
            left: '50%', 
            width: '170px', 
            height: '170px',
            padding: '20px' 
        }, 200);

    } , function() {
    $(this).css({'z-index' : '0'});
    $(this).find('img').removeClass("hover").stop()
        .animate({
            marginTop: '0', 
            marginLeft: '0',
            top: '0', 
            left: '0', 
            width: '100px', 
            height: '100px', 
            padding: '5px'
        }, 400);
});

//Swap Image on Click
    $("#thumbImages.thumb p a").click(function() {

        $('#wrapper').append('<span id="imageLoad">LOADING...</span>');  
        $('#imageLoad').fadeIn('normal'); 

        var mainImage = $(this).attr("href"); //Find Image Name
        $("#main_view img").attr({ src: mainImage }, hideLoader());
        return false;       

    function hideLoader() {  
        $('#imageLoad').fadeOut('normal');  
    }
    });

});
</script>

<script>
    $().ready(function() {
        var $main_view = $("#main_view");

        $(window).scroll(function(){            
            $main_view
                .stop()
                .animate({"marginTop": ($(window).scrollTop() - 14) + "px" }, "slow" );

        });
    });

</script>
  </head>

  <body>
  <div id="wrapper">

  <h1>Header</h1>
     <ul>
        <li id="nav1"><a href="../index.html">Welcome</a></li>
        <li id="nav1"><a href="about.html">Why Us</a></li>
        <li><a href="facilities.html">Facilities</a></li>
        <li id="nav1"><a href="services.html">Services</a></li>
        <li id="nav1"><a href="products.html">Products</a></li>
        <li><a href="portfolio.html">Portfolio</a></li>
        <li><a href="other.html"> Other </a>
        <ul>
        <li><a href="7RepairSteps.html"> Repair Steps</a></li>
        <li><a href="scaletrix.html">Scaletrix</a></li>
        <li><a href="reviews.html">Customer Reviews</a></li>
        </ul>
        </li>
        <li id="nav1"><a href="contact.html">Contact Us</a></li>
    </ul>

    <div id="content">

    <div id="portfolioImages" style="height:900px;">
    <h2>Our Work</h2>

    <div class="thumb" id="thumbImages">
    <p style="z-index: 0;"><a href="../images/portfolio/before1.jpg"><img  class="" src="../images/portfolio/before1.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/before1i.jpg"><img  class="" src="../images/portfolio/before1i.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/after1.jpg"><img  class="" src="../images/portfolio/after1.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/after1i.jpg"><img  class="" src="../images/portfolio/after1i.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/before2.jpg"><img  class="" src="../images/portfolio/before2.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/after2.jpg"><img  class="" src="../images/portfolio/after2.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/before3.jpg"><img  class="" src="../images/portfolio/before3.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/after3.jpg"><img  class="" src="../images/portfolio/after3.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/before4.jpg"><img  class="" src="../images/portfolio/before4.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/after4.jpg"><img  class="" src="../images/portfolio/after4.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/before5.jpg"><img  class="" src="../images/portfolio/before5.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/before5i.jpg"><img  class="" src="../images/portfolio/before5i.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/after5.jpg"><img  class="" src="../images/portfolio/after5.jpg" alt=""></a></p>
    <p style="z-index: 0;"><a href="../images/portfolio/after5i.jpg"><img  class="" src="../images/portfolio/after5i.jpg" alt=""></a></p>
    </div>

    <div style="border:solid; width:410px; overflow:hidden; float:right"" id="main_view"><a href="" title="" target=""><img src="../images/portfolio/before1.jpg" alt="" /></a></div>

    </div>

    </div>
    <div id="foot" style="position:relative;"> Footer Information </div>

    </div>
  </body>

</html> 
```

CSS：

```
#content a:link {color:#686868; text-decoration:none;}
#content a:visited {color: #686868; text-decoration:none;}
#content a:hover {color: #686868; text-decoration:none; font-weight:bold;}
#content a:active {color: #686868; text-decoration:none;}
#content a:focus{color: #686868; text-decoration:none;}

body {
    font: 0.8em "Lucida Sans Unicode", "Lucida Grande", Arial, Helvetica, sans-serif;
    color: #343434;
    background: #7DC623;
    margin: 0;
    padding: 0;

}
#wrapper {
    width: 710px;
    margin: 30px auto;
    background: #0d0d0d url(../images/header.jpg) no-repeat;
    padding: 55px 25px 25px 25px;
    border: 12px solid #2e2e2e;
    position:relative;
}
h1 {
    text-transform: uppercase;
    text-align: center;
    margin: 0;
    padding: 0.3em 0;
    text-indent:-99999px;
}

    ul {

    list-style: none;
    padding: 0;
    margin: 10px 0 20px 0;
    background: #2e2e2e url(../images/nav_bar.jpg) repeat-x;
    display: block;
    font-size: 0.9em;
    height:33px;
    text-transform:capitalize;
    text-align: center;
    }
    ul li {
        display: block;
        position: relative;
        float: left;
    }
    li ul {
        display: none;
        margin-top: 0;
    }
    ul li a {
        display: block;
        text-decoration: none;
        color: #49BDEF;
        padding: 10px 20px;
        margin-top: 0;
        text-align: center;

    }

    input{
        color: #49BDEF;
        padding: 10px 20px;
        margin-top: 0;
        background: #2e2e2e url(../images/nav_bar.jpg) repeat-x;
    }

    li:hover ul {
        display: block;
        position: absolute;
    }
    li:hover li {
        float: none;
        font-size: 11px;
    }
    li:hover a { background: #1b1b1b url(../images/nav_bar_o.jpg) repeat-x;}

    li:hover li a:hover {
        background: #1e7c9a;
    }

#load {
    display: none;
    position: absolute;
    right: 10px;
    top: 10px;
    background: url(../images/ajax-loader.gif);
    width: 43px;
    height: 11px;
    text-indent: -9999em;
}

#imageLoad {
    display: none;
    position: absolute;
    right: 10px;
    top: 10px;
    background: url(../images/loader.gif);
    width: 43px;
    height: 11px;
    text-indent: -9999em;
}

#content {
}

h2 {
    margin: 0;
    padding: 0.5em 0;
    color:#568945;
    font-family:Helvetica, Arial, Sans-serif;
}
p {
    margin: 0;
    padding: 0.4em 0;
    color:#686868;
    line-height:1.4em;
}
#content img.right {
    float: right;
    margin: 0 0 8px 8px;

}

#content img.left {
    float: left;
    margin: 0 8px 2px 4px;

}

#productImage{
width: 193px; 
height:145px
}

#productImage:hover{
    width: 250px;
    height:200px;
}

#sampleImage{
    width: 193px; 
    height:145px;
    border: 1px solid #CCCCCC;
}

#sampleImage:hover{
    width: 250px;
    height:200px;
    border: 1px solid #CCCCCC;
}

#foot {
    padding: 15px;
    color: white;
    text-align: center;
    margin: 30px 0 0 0;
    border-top:1px solid #222222;
}

#searchbox
{

    height: 30px;

    position: relative;
    overflow: hidden;
    border-style: solid;
    border-color: #0d0d0d;

}

#searchbox:hover
{

    height: 100%;

    position: relative;
    border-style: solid;
    border-color: #0d0d0d;
}

#content {
}

#thumbImages.thumb {
    float:left;
    list-style: none;
    margin: 0; padding: 10px;
    width: 260px;
}
#thumbImages.thumb p {
    margin: 0; padding: 5px;
    position: relative;
    width: 110px;
    float:left;
    height: 110px;

}
#thumbImages.thumb p img {
    width: 100px; height: 100px;
    border: 1px solid #ddd;
    padding: 5px;
    background: #f0f0f0;
    position: absolute;
    left: 0; top: 0;
    -ms-interpolation-mode: bicubic; 
}
#thumbImages.thumb p img.hover {
    background:none;
    border: none;
}

#main_view img {
    height: 310px;
    width: 410px;
    border: none;

} 
```

# c# - 将 Page.Request 传递给 Web 服务？

> ID：14135055
> 
> 赞同：1
> 
> 时间：2013-01-03T08:02:18.680
> 
> 标签：c#, ajax, web-services, http, httprequest

是否可以将`Page.Request`对象传递给 Web 服务？

`Page.Request`我需要一个 Web 服务来向浏览器客户端提供数据，但是如果没有签名中需要的对象，我就无法检索这些数据。

另一种方法似乎是创建在查询字符串中接受参数的页面并使用 $.get() 调用它们，这似乎在顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:10:48.837

假设请求是通过 HTTP 发出的（WCF 端点并非总是如此），您可以简单地`HttpContext.Current.Request`在代码中使用。

```
[AspNetCompatibilityRequirements( RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed )]
public class MyService {

    [OperationContract]
    public string Foo() {

        var request = System.Web.HttpContext.Current.Request;   
    }
} 
```

# django - Django REST API - 在 Backbone.js 中重新使用单个调用中的数据

> ID：14135060
> 
> 赞同：0
> 
> 时间：2013-01-03T08:03:03.503
> 
> 标签：django, rest, django-views, tastypie

我已经建立了一个普通的 Django 应用程序（没有主干.js 或其他 MVC 框架）并集成了 Tastypie。

从本质上讲，我在每个页面上需要的所有信息都可以通过对 API 的一次调用获得。某些页面（例如“mysite.com/cityA”）只会将该信息过滤到仅城市 A 的信息。

我习惯于使用backbone.js，其中一个集合可以由多个视图共享。我怎么能在普通的 Django 中做到这一点？我会在“index.html”模板中进行调用，并从中扩展其他模板吗？我对最佳实践有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:11:23.547

通常在 Django 中，您会编写一个[视图](https://docs.djangoproject.com/en/dev/topics/http/views/)，然后渲染它并在模板中包含 URL。Backbone 可以重用所有请求的数据，因为当用户使用应用程序时它通常不需要进行 HTTP 往返，因为与 Django 的典型交互会起作用。

我会说默认的交互模型是不同的。如果你在后端有一个数据库，你可能想在你的 Django 视图中使用某种缓存——这会缩短响应时间（但你会保留 HTTP 往返）。您可以使用一些客户端缓存（例如通过[localstorage](http://diveintohtml5.info/storage.html)），但默认的 Django 模型仍然是在视图和呈现的模板之间摆动。

# android - 如何在 OnCreate() android 中调用 Web 服务

> ID：14135065
> 
> 赞同：1
> 
> 时间：2013-01-03T08:03:31.677
> 
> 标签：android

我想调用 Web 服务来获取一些必须显示在我的第一个屏幕中的数据。我用过`OnCreate()`，它抛出了一些异常。如何在`OnCreate()`方法中调用Web Service？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:12:42.023

因此，您想从 OnCreate() 调用 Web 服务，而不是像这样使用：

```
String NAMESPACE = "Target Name Sapce/";
String URL = "URL generated in WSDL";
String SOAP_ACTION = "Name Sapce/Method name";
String METHOD_NAME = "Method Name";

//Initialize soap request + add parameters
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

//Use this to add parameters
request.addProperty("Parameter1",Parameter1);
request.addProperty("Parameter2",Parameter2);

//Declare the version of the SOAP request
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);

HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
try {              
    androidHttpTransport.debug = true;
    //this is the actual part that will call the  
    androidHttpTransport.call(SOAP_ACTION, envelope);
    // Get the SoapResult from the envelope body.
    SoapObject result = (SoapObject)envelope.bodyIn;
    String validate = result.getProperty(0).toString();

    //Get the first property and change the label text
    Toast.makeText(getApplicationContext(), "Connected "+result.getProperty(0).toString(),Toast.LENGTH_LONG).show();

} catch (Exception e) {
      e.printStackTrace();
} 
```

这将帮助您从 OnCreate() 调用 Web 服务而不会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:50:32.630

无论是否在`onCreate()`，您都不应该在*ui 线程*内建立网络。如果你想从网络上获取数据，你可以使用[这个](http://loopj.com/android-async-http/)基于回调的库。覆盖它`onStart()`以显示一些“请稍候...”的东西，并覆盖它的`onSuccess()`,`onFailure()`和`onFinish()`（如果需要）以继续执行。

# javascript - 缺少上传文件时表单未提交

> ID：14135066
> 
> 赞同：0
> 
> 时间：2013-01-03T08:03:33.390
> 
> 标签：javascript, jquery, html, submit, form-submit

当我尝试提交带有文件的表单时遇到问题，当要上传的文件在选择后但在提交表单之前发生更改（例如重命名文件）时。表单根本不提交。这是我的示例代码：

```
<form action="test.htm" method="post" enctype="multipart/form-data" id="test">
    <input type="file" name="file" />
    <input type="submit" value="Submit" />
</form>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $('#test').submit(function() {
        console.log("IT WORKS!");
        return true;
    });
});
</script> 
```

**更新**

使用以下代码更简化：

```
<form action="upload.asp" method="post" enctype="multipart/form-data">
    <input type="file" name="file" />
    <input type="submit" value="Submit" />
</form> 
```

尝试这样做： 1) 从您的系统中选择一个文件 2) 在您的系统上重命名该文件 3) 提交表单。

什么都没发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:08:01.903

如果您想知道为什么`console.log`没有显示，那是因为表单已经被提交。

只需添加一个`event.preventDefault`以确保您的代码运行。

```
$(document).ready(function() {
    $('#test').submit(function(e) {
        e.preventDefault();
        console.log("IT WORKS!");
        return true;
    });
}); 
```

[**演示**](http://jsbin.com/aqanor/1/edit)

**更新**

您的操作路径是`.htm`文件。您将需要一种服务器端语言来处理`POST`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:09:55.510

你的 javascsript 函数没用..因为

```
<input type="submit".. 
```

将在调用之前提交表单

一种方法是`preventDefault()`在您的功能中使用..

```
$(document).ready(function() {
 $('#test').submit(function(e) {
    e.preventDefault();
    console.log("IT WORKS!");
    return true;
 });
}); 
```

或将您的输入设为按钮

```
<button id="submit">Submit</button>

$('#submit').click(function(){
$('#test').submit(function() {
   console.log("IT WORKS!");
   return true;
 });
}); 
```

# ruby-on-rails - 为什么我的验证正在运行？

> ID：14135073
> 
> 赞同：0
> 
> 时间：2013-01-03T08:04:18.727
> 
> 标签：ruby-on-rails, validation, paperclip

我正在创建具有附件的对象。我通过拆分真实字段（可能是我的问题的真正来源）来伪造字段。另外，这些工作正常，但是当我附加文件时，我的验证似乎在我的控制器逻辑执行之前运行，并且我最终得到如下所示的错误：

```
undefined method `match` for nil:Nil at line ... 
```

验证是由回形针触发的吗？如何在验证运行之前将其关闭或让我自己的逻辑运行？

我的模型如下所示：

```
attr_accessible :zipcode
has_attached_file :attachment

#this is the line referred to by the error message
validates :zipcode, format: { with: /a_meaningful_regex_here/i}

def initialize
  zipcode = '-'
end
def set_zipcode(params={})
  zipcode = "#{params[:zipcode1]}-#{params[:zipcode2]}"
end
def zipcode1
  zipcode.split('-')[0]
end
def zipcode2
  zipcode.split('-')[1]
end 
```

我的表格如下所示：

```
<%= form_for @foo do |f| %>
  <%= f.file_field :attachment %>
  <%= text_field_tag  :zipcode1,@foo.zipcode1%> - 
  <%= text_field_tag  :zipcode2,@foo.zipcode2%>
  <%= f.submit %>
<% end %> 
```

我的控制器如下所示：

```
def create
  @foo = Foo.new(params[:foo])
  @foo.set_zipcode(params)
  if @foo.save
    redirect_to @foo
  else
    render action: 'new'
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:18:37.203

尝试类似：

```
before_validation(:on => :zipcode) { set_zipcode } 
```

# php - 将静态值添加到下拉菜单

> ID：14135075
> 
> 赞同：-1
> 
> 时间：2013-01-03T08:04:31.643
> 
> 标签：php, html, sql

我有一个在不同文件中生成的下拉菜单。它是通过 while 循环生成的，我想添加一个静态值（ Select contract ）。

现在下拉菜单如下所示：

```
1234
4321
2323
3232 
```

我想让它像这样：

```
Select contracr
1234
4321
2323
3232 
```

这是我在 index.php 中的代码：

```
<select id="text2" name="text2">

</select> 
```

这是我在 process.php 中的代码（生成项目的地方）：

```
<?php
$selectedKey = $_GET['selected_key'];
$query = "SELECT * FROM `1 received` WHERE Key = '".$selectedKey."'";
$run = mysql_query($query);
while($row = mysql_fetch_assoc($run)) {
    echo "<option value='".$row['Number']."'>".$row['Number']."</option>";
}
?> 
```

阿贾克斯代码：

```
<script>
$("select#select2").change(function(){
    $.ajax({
        type: "GET",
        url: "process.php",
        data: "selected_key=" + $(this).val(),
        success: function(result) {
            $("select#text2").html(result);
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:10:15.040

我觉得你想多了。

在添加数据库中的所有其他值之前，只需添加一个额外的选项`<select>`- 即文字值，而不是 PHP 生成的东西。给它一个像“0”或“NotSelected”这样的值，然后在你的验证例程中检查它。

哦，作为一个不相关的问题，不要这样做：

```
$selectedKey = $_GET['selected_key'];
$query = "SELECT * FROM `1 received` WHERE Key = '".$selectedKey."'"; 
```

您正在向 SQL 注入敞开心扉。如果你不知道那是什么，请查一下。您应该为此使用准备好的/参数化的查询。PDO 和 mysqli 扩展都具有此功能，因此您应该使用其中一个而不是 mysql 扩展，后者已在最新版本中被弃用（即“这将很快从语言中删除，因此停止使用它”） PHP 的。

* * *

更新：

基于您使用 AJAX 请求直接更新 HTML 以获取`<select>`元素的新内容这一事实，您需要将`<option>`我提到的项目移动到您在 AJAX 请求中调用的脚本的一部分。

具体来说，您应该在`foreach`循环之前直接执行此操作：

```
<?php
$selectedKey = $_GET['selected_key'];

// DO SOME VALIDATION ON $selectedKey here
// Remember what I said about SQL injection and using mysqli/PDO

$query = "SELECT * FROM `1 received` WHERE Key = '".$selectedKey."'";
$run = mysql_query($query);
echo "<option value='NotSelected'>Select Contract</option>";
while($row = mysql_fetch_assoc($run)) {
    echo "<option value='".$row['Number']."'>".$row['Number']."</option>";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:07:41.877

```
<?php
$selectedKey = $_GET['selected_key'];
$query = "SELECT * FROM `1 received` WHERE Key = '".$selectedKey."'";
$run = mysql_query($query);

echo "<option value='0'>Select Contractor</option>"; //Simply add this

while($row = mysql_fetch_assoc($run)) {
    echo "<option value='".$row['Number']."'>".$row['Number']."</option>";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:09:12.993

试试这个..

```
<?php
$selectedKey = $_GET['selected_key'];
$query = "SELECT * FROM `1 received` WHERE Key = '".$selectedKey."'";
$run = mysql_query($query);
$str = "<option value='0'>Select anyone</option>";
while($row = mysql_fetch_assoc($run)) {
    $str .= "<option value='".$row['Number']."'>".$row['Number']."</option>";
}
echo $str;
?> 
```

Likt 这个你可以添加静态选项

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-03T08:12:04.743

```
please used this code......
<?php
$selectedKey = $_GET['selected_key'];
$query = "SELECT * FROM `1 received` WHERE Key = '".$selectedKey."'";
$run = mysql_query($query);

$str = "<option value='0'>Select Contractor</option>"; //Simply add this

while($row = mysql_fetch_assoc($run)) {
    $str .= "<option value='".$row['Number']."'>".$row['Number']."</option>";
}
?>

echo $str variable into your select box like this:-

<select id="text2" name="text2">
<?php echo $str;?>
</select> 
```

# c++ - QML 访问不可调用的函数

> ID：14135081
> 
> 赞同：2
> 
> 时间：2013-01-03T08:05:14.497
> 
> 标签：c++, qt, qml, qt-quick, qtscript

我需要访问未标记为 Q_INVOKABLE 或 Q_SLOTS 的函数。Qt 脚本模块具有称为[defaultPrototype](http://doc.qt.digia.com/qt/script-defaultprototypes.html)的机制。我想知道在 QML 中是否可能？

我看到 QtDevDays 展示了[QtDD12 - QtQuick under the hood - Thomas McGuire](http://www.youtube.com/watch?v=NtXSaYpqaSQ)并在 18 分钟时，Thomas 展示了纯 QML 小部件应用程序。我认为如果不将一些不可调用的函数导出/公开到脚本环境，你就无法实现它。

QML 中是否有类似 QtScript 中的 defualtPrototype 的机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:30:26.580

QML 在后台使用 Qt Script，因此使用默认原型机制是完全可能的。唯一的问题是获取声明式引擎的脚本引擎，因为它们没有明显的 API。看看 libkdeclarative 中的[代码](https://projects.kde.org/projects/kde/kdelibs/repository/revisions/master/entry/experimental/libkdeclarative/kdeclarative.cpp)，尤其是`KDeclarative::initialize()`，对于一个可行的 hack 这样做。

# iphone - 如何使用 ASIHTTPRequest 处理低互联网连接

> ID：14135084
> 
> 赞同：0
> 
> 时间：2013-01-03T08:05:38.840
> 
> 标签：iphone, objective-c, ios, networking, asihttprequest

我正在开发一个执行大量 API 获取的应用程序，如果互联网连接非常低，比如 5 kbps，应用程序会在该`main`方法中崩溃。我认为当队列中有很多请求时会发生这种情况，因此操作系统会终止应用程序。我正在使用 ASIHTPPRequest 和基于块的异步请求。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:24:02.170

您需要为整个应用程序使用单个网络队列。严重依赖 Internet 连接的应用程序应优化并发网络操作的数量。不幸的是，`ASIHTPPRequest`框架不这样做。我建议您使用`MKNetworkKit`已构建的，特别是牢记移动应用程序。

> 大多数移动网络 (3G) 不允许来自给定 IP 地址的两个以上并发 HTTP 连接。边缘更糟糕。在大多数情况下，您不能打开多个连接。在传统的家庭宽带 (Wifi) 上，这个限制相当高（六个）。在任何正常情况下，iDevice 大多连接到 3G 网络，这意味着您只能并行上传两张照片。现在，伤害的不是缓慢的上传速度。
> 
> 当您打开一个加载照片缩略图的视图（比如在不同的视图上）而此上传操作在后台运行时，就会出现真正的问题。当您没有正确控制整个应用程序的队列大小时，您的缩略图加载操作将超时，这并不是真正的正确方法。执行此操作的正确方法是优先考虑您的缩略图加载操作或等到上传完成并加载缩略图。这要求您在整个应用程序中拥有一个队列。MKNetworkKit 通过为它的每个实例使用一个共享队列来自动确保这一点。虽然 MKNetworkKit 本身不是单例，但共享队列是。

[来源](http://blog.mugunthkumar.com/products/ios-framework-introducing-mknetworkkit/)

# testing - 模拟类

> ID：14135087
> 
> 赞同：1
> 
> 时间：2013-01-03T08:05:58.273
> 
> 标签：testing, jmock

我遇到了3年前提出的这个问题：

[jMock 模拟类和接口](https://stackoverflow.com/questions/968171/jmock-mocking-classes-and-interface)

我的问题是你怎么能 jmock 不是接口的类？据我所知，类 jmocking 只能通过 @Mock 注释发生，以 JMock 版本表示，该版本至今还不稳定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:19:44.123

jMock 食谱为您提供了一个条目。

这是链接：[http ://www.jmock.org/mocking-classes.html](http://www.jmock.org/mocking-classes.html)

# regex - 正则表达式不匹配`]`符号

> ID：14135088
> 
> 赞同：0
> 
> 时间：2013-01-03T08:06:15.167
> 
> 标签：regex, grep

我的目标是只显示最后一个`]`符号之后的文本。

```
echo MY_TEXT | grep -o "[^\]]*$" 
```

输出只是最后一个符号。如果我将“]”符号更改为任何字母，它会按预期工作。

例子：

```
$ echo Hello World | grep -o '[^o]*$'
rld  # and this is correct!
$ echo He]ll]o Wo]rld | grep -o "[^\]]*$"
d   # but expected: rld 
```

`o`为什么符号和的行为不同`]`？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:09:43.773

您不需要转义`]`：

```
echo 'He]ll]o Wo]rld' | grep -o "[^]]*$" 
```

产生：`rld`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:12:37.083

有几件事：`[`不需要在字符类中转义，您可以使用`--color`仅查看匹配的字母并注意`-o`将每个匹配项拆分为新行：

```
$ echo "He]ll]o Wo]rld" | grep -o '[^]]*$'
rld

$ echo "He]ll]o Wo]rld" | grep --color '[^]]*'
He]ll]o Wo]rld

$ echo "He]ll]o Wo]rld" | grep -o '[^]]*'
He
ll
o Wo
rld 
```

您可以使用许多其他方式剥离`]`字符：`tr`

```
$ echo "He]ll]o Wo]rld" | tr -d ']'
Hello World 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:07:57.010

删除了转义字符，它对我有用。

```
$ echo He]ll]o Wo]rld | grep -o "[^]]*$"
> rld 
```

# hadoop - 我如何在我的 Windows 64 位机器上安装 hadoop 和 hive？我是一个初学者，对此有点天真。请赐教

> ID：14135090
> 
> 赞同：0
> 
> 时间：2013-01-03T08:06:54.373
> 
> 标签：hadoop, hive

我想学习`hadoop`在我的机器上安装和配置单元。`windows 64 bit`操作系统。请告诉我确切的步骤。这对像我这样的初学者会有很大帮助。我尝试并下载了一个`hadoop (1.1.1) version`但无法安装它。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:03:12.840

您可以下载 Microsoft HDInsight Server for Windows 的开发人员预览版。请注意，它是一个开发者预览版，原生平台上的许多功能还没有。在我看来，最重要的是 HBase。但是有 Hive、Pig 和运行标准 MapReduce 作业的可能性。玩起来很有趣。

[HDInsight 服务器下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=35397)

还有一个 .NET SDK 可供使用。这个处于预发布阶段并且非常无证，但是具有一些知识和一些 Google 技能，您应该能够管理它。

[SDK](http://hadoopsdk.codeplex.com/)

# android - java.lang.OutOfMemoryError: 位图大小超出 VM 预算在线 Drawable.createFromStream(((java.io.InputStream) new URL(url), "") in android

> ID：14135091
> 
> 赞同：1
> 
> 时间：2013-01-03T08:06:56.807
> 
> 标签：android, bitmap, android-listview, out-of-memory, android-drawable

首先，我通过解析 json 响应创建图像和图像信息的 Arraylist

```
`JSONArray jsonArray = jsonObj.getJSONArray("result");
                for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject jsonObjInner = jsonArray.getJSONObject(i);

                    ImageInfo imageInfo = new ImageInfo();
                    imageInfo.setImageUrl("http://www.dvimaytech.com/markphoto/" + jsonObjInner.getString("image"));

                    new GetDrawableFromUrl(imageInfo).execute();

                    imageInfo.setEmail(jsonObjInner.getString("emailid"));
                    imageInfo.setImage_id(jsonObjInner.getString("image_id"));
                    imageInfo.setImage_name(jsonObjInner.getString("image_name"));
                    imageInfo.setAmount(jsonObjInner.getString("amount"));
                    imageInfo.setImage_description(jsonObjInner.getString("image_description"));
                    imageInfo.setDate_created(jsonObjInner.getString("date_created"));
                }` 
```

然后我使用代码从服务器另一个异步任务中获取图像

```
public class GetDrawableFromUrl extends AsyncTask<Void, Void, Drawable> {
    public ImageInfo imageInfoObj;

    GetDrawableFromUrl(ImageInfo imageInfo) {
        imageInfoObj = imageInfo;
    }

    @Override
    protected Drawable doInBackground(Void... params) {
        try {
            return Drawable.createFromStream(((java.io.InputStream) new java.net.URL(imageInfoObj.getImageUrl()).getContent()), "src_name");
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Drawable drawable) {
        if (drawable != null) {
            imageInfoObj.setImage(drawable);
            listImageInfo.add(imageInfoObj);
            showImagesInList();
        }
    }
} 
```

我的适配器类代码

```
public class MyImageListAdapter extends BaseAdapter {

    private LayoutInflater inflater = null;

    public MyImageListAdapter() {
        inflater = (LayoutInflater) HomeActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return listImageInfo.size();
    }

    public Object getItem(int position) {
        return listImageInfo.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if (convertView == null) {
            vi = inflater.inflate(R.layout.list_row, null);
        }

        TextView tvName = (TextView) vi.findViewById(R.id.tv_name);
        TextView tvTime = (TextView) vi.findViewById(R.id.tv_time);
        ImageView image = (ImageView) vi.findViewById(R.id.iv_image);
        final Button btnDelete = (Button) vi.findViewById(R.id.btn_delete);

        image.setImageDrawable(listImageInfo.get(position).getImage());

        tvName.setText("Name: " + listImageInfo.get(position).getImage_name());
        tvTime.setText("Date: " + listImageInfo.get(position).getDate_created());

        btnDelete.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                final int position = listView.getPositionForView((View) v.getParent());
                positionOgBtnToDelete = position;
                Log.v("delete btn clicked", "delete btn no: " + position);
                Toast.makeText(HomeActivity.this, "Btn delete position: " + position, Toast.LENGTH_LONG).show();
                showAlertToConfirmDelete();
            }
        });
        return vi;
    }
} 
```

现在我的列表只包含 5-6 张图片。但是我在线收到错误 OutOfMemory 错误

```
return Drawable.createFromStream(((java.io.InputStream) new java.net.URL(imageInfoObj.getImageUrl()).getContent()), "src_name"); 
```

我的日志 - 猫是

```
 E/dalvikvm-heap(10927): 7680000-byte external allocation too large for this process.
: D/dalvikvm(10927): GC_FOR_MALLOC freed 0K, 55% free 3286K/7303K, external     54717K/56765K, paused 32ms
: E/GraphicsJNI(10927): VM won't let us allocate 7680000 bytes
: D/skia(10927): libjpeg error 105 <  Ss=%d, Se=%d, Ah=%d, Al=%d> from allocPixelRef [1600 1200]
 D/skia(10927): --- decoder->decode returned false
 W/dalvikvm(10927): threadid=9: thread exiting with uncaught exception (group=0x40018578)
 E/AndroidRuntime(10927): FATAL EXCEPTION: AsyncTask #1
 E/AndroidRuntime(10927): java.lang.RuntimeException: An error occured while executing doInBackground()
 E/AndroidRuntime(10927):   at android.os.AsyncTask$3.done(AsyncTask.java:200)
 E/AndroidRuntime(10927):   at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
 E/AndroidRuntime(10927):   at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
 E/AndroidRuntime(10927):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
 E/AndroidRuntime(10927):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
 E/AndroidRuntime(10927):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
 E/AndroidRuntime(10927):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
 E/AndroidRuntime(10927):   at java.lang.Thread.run(Thread.java:1019)
 E/AndroidRuntime(10927): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
 E/AndroidRuntime(10927):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
 E/AndroidRuntime(10927):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:573)
 E/AndroidRuntime(10927):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:439)
 E/AndroidRuntime(10927):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
 E/AndroidRuntime(10927):   at android.graphics.drawable.Drawable.createFromStream(Drawable.java:657)
 E/AndroidRuntime(10927):   at com.markphoto_activities.DisplayImagesActivity$GetDrawableFromUrl.doInBackground(DisplayImagesActivity.java:257)
 E/AndroidRuntime(10927):   at com.markphoto_activities.DisplayImagesActivity$GetDrawableFromUrl.doInBackground(DisplayImagesActivity.java:1)
 E/AndroidRuntime(10927):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
 E/AndroidRuntime(10927):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
 E/AndroidRuntime(10927):   ... 4 more
 D/dalvikvm(10927): GC_EXTERNAL_ALLOC freed 122K, 55% free 3329K/7303K, external 55034K/56765K, paused 49ms
 E/dalvikvm-heap(10927): 4194304-byte external allocation too large for this process.
 D/dalvikvm(10927): GC_FOR_MALLOC freed <1K, 55% free 3329K/7303K, external 55034K/56765K, paused 32ms
 E/GraphicsJNI(10927): VM won't let us allocate 4194304 bytes 
```

而不是这个，我在另一个活动中显示相同的列表，我正在执行相同的过程。

还有其他两个活动：1.我使用相机意图捕获图像并上传到服务器（调用 api 并使用 Http Multipart Entity），以及 2.我从画廊上传图像。

这不是我收到此错误的唯一地方，实际上在其他地方很多。但是这条线上有 90% 的错误。

我想知道，问题是否出现是因为所有图像的单个大尺寸图像一起占用更多内存。以及如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:15:16.940

使用图像加载器你可以在[这里找到一个例子](https://github.com/novoda/ImageLoader)

# android - 我们可以在不使用任何 Parsers 或 Api 的情况下在 android 中解析 Xml 文件吗？

> ID：14135092
> 
> 赞同：0
> 
> 时间：2013-01-03T08:07:00.570
> 
> 标签：android

我一直在使用`sax`and`Dom parsers`来解析一个`Xml`文件。`android`但是我们可以在`xml`不使用 any`parsers`或 any的情况下解析任何文件`Api`吗。如果是的话，有人会为我提供一些这样做的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:13:31.550

如果您在使用传统解析方法时遇到问题，您可以尝试一个框架，它可以为您执行从 XML 到 Object 的映射，例如[Simple xml](http://simple.sourceforge.net/)

# json - Request.JSON 与页面加载一起运行

> ID：14135093
> 
> 赞同：0
> 
> 时间：2013-01-03T08:07:07.167
> 
> 标签：json, mootools

[http://mootools.net/demos/?demo=Request.JSON](http://mootools.net/demos/?demo=Request.JSON)

单击 时会加载 JSON 数据`load JSON Data`。

页面打开时是否可以加载此数据（类似的功能`onload`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:14:18.323

```
<head>
    <script type="text/javascript">
    window.addEvent("domready",function(){
        var request = new Request.JSON({
            url: '/echo/json/',
            onRequest: function(){
                gallery.set('text', 'Loading...');
            },
            onComplete: function(jsonObj) {
                gallery.empty();
                addImages(jsonObj.previews);
            },
            data: { // our demo runner and jsfiddle will return this exact data as a JSON string
                json: JSON.encode(data)
            }
        }).send();

    });
    </script>
</head> 
```

# ios - sha-512 在 IOS 模拟器上无法正常工作

> ID：14135103
> 
> 赞同：0
> 
> 时间：2013-01-03T08:08:06.777
> 
> 标签：ios

我正在实现将在 IOS 上运行的移动应用程序 sha-512 功能，该功能在包括 Safari 在内的所有浏览器上都可以正常工作。

我正在使用 IOS 模拟器测试我的应用程序。

我的应用程序从一页/单击中调用 sha-512 函数三次。问题是，第一次调用 sha-512 函数会产生正确的结果，但在第二次和第三次调用时会产生错误的结果。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:15:39.137

这是我的代码

```
//Creating Hash Value
NSString *hashkey = [NSString stringWithFormat:@"data"];
// PHP uses ASCII encoding, not UTF
NSLog(@"hashkey : %@",hashkey);
const char *s = [hashkey cStringUsingEncoding:NSASCIIStringEncoding];
NSData *keyData = [NSData dataWithBytes:s length:strlen(s)];

// This is the destination SHA512_Final
uint8_t digest[CC_SHA512_DIGEST_LENGTH] = {0};
// This one function does an unkeyed SHA1 hash of your hash data
CC_SHA512(keyData.bytes, keyData.length, digest);

// Now convert to NSData structure to make it usable again
NSData *out = [NSData dataWithBytes:digest length:CC_SHA512_DIGEST_LENGTH];
// description converts to hex but puts <> around it and spaces every 4 bytes
NSString *hash = [out description];
hash = [hash stringByReplacingOccurrencesOfString:@" " withString:@""];
hash = [hash stringByReplacingOccurrencesOfString:@"<" withString:@""];
hash = [hash stringByReplacingOccurrencesOfString:@">" withString:@""]; 
```

希望对你有帮助。。

# java - 适合添加到上限 ArrayList 的方法参数

> ID：14135104
> 
> 赞同：-1
> 
> 时间：2013-01-03T08:08:11.207
> 
> 标签：java, generics, wildcard, bounded-wildcard, upperbound

以下代码是抽象类的一部分，该抽象类旨在被子类化以管理特定类型的 Shape。（它实际上是特定类的存储库，但现在不相关）

```
protected ArrayList<? extends Shape> shapesOfSpecificType;

public addShape(Shape shape){
    getShapes; //make sure shapeOfSpecificType is instantiated and load stuff from db
    shapesOfSpecificType.add(shape); //gives an compile error
} 
```

如何接受 Shape 子类作为 addShape 中适合添加到 ArrayList 的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:20:13.393

首先，与问题无关，我建议您根据集合接口编写代码，而不是具体的类：

```
protected List<? extends Shape> shapesOfSpecificType; 
```

其次，如果您希望添加扩展`Shape`到列表的对象，您需要将其定义为

```
protected List<? super Shape> shapesOfSpecificType; 
```

所以任何东西*都`Shape`*可以在列表中。

但正如其他人指出的那样：为什么需要一个有界列表，为什么不只是一个`List<Shape>`？

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:26:18.530

您可以`protected List<Shape> shapesOfSpecificType;`按照评论中的说明使用。您可以将任何 Shape 类型的对象添加到此列表中，例如：

```
Circle extends Shape {
 //body
}
Square extends Shape {
 //body
}
shapesOfSpecificType.add(new Circle());//valid
shapesOfSpecificType.add(new Square());//valid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:27:11.767

当您尝试将 Shape 插入 List < ? extends Shape> 编译器抱怨，因为它不知道列表中实际有哪些元素。考虑一下：

```
List<Triangle> triangles = new List<Triangle>();
List<? extends Shape> shapes = triangles; // that actually works 
```

现在，当您尝试插入将 Shape 扩展为形状的 Square 时，您会将 Square 插入到三角形列表中。这就是编译器抱怨的原因。你应该只取一个 List<Shape>：

```
List<Triangle> triangles = new List<Triangle>();
List<Shape> shapes = triangles; // does not work!

// but
List<Shape> shapes = new List<Shape>();
shapes.insert(new Triangle()); // works
shapes.insert(new Square()); // works as well 
```

看看：[http ://www.angelikalanger.com/Articles/JavaPro/02.JavaGenericsWildcards/Wildcards.html](http://www.angelikalanger.com/Articles/JavaPro/02.JavaGenericsWildcards/Wildcards.html)

此页面很好地解释了类型化集合的有效和无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T08:28:58.137

我会写这样的代码：

```
protected ArrayList<Shape> shapesOfSpecificType;

//Triangle can be added
public void addShape(Shape shape){
    shapesOfSpecificType.add(shape);
}

//List<Triangle> can be added
public void addShapes(List<? extends Shape> shapes){
     shapesOfSpecificType.addAll(shapes);
} 
```

# iphone - 核心数据翻译

> ID：14135106
> 
> 赞同：3
> 
> 时间：2013-01-03T08:08:26.683
> 
> 标签：iphone, core-data, translation

我有一个应用程序，它提供了大量参考术语及其多种语言的翻译。据我们所知，这是这些术语中唯一可用的此类“字典”。因此，管理层非常热衷于保护这些数据免受黑客攻击（我们当前的一个应用程序之前已被破坏和复制）。

在此背景下，我不想像普通（[或其他！！](http://thejoysofcode.com/post/38234612725/when-i-must-tell-my-boss-i-have-released-a-bug-in)）那样简单地将翻译放入字符串文件中。我很确定我不能再使用 NSLocalizedString 了？所以我正在考虑将字符串放入我们将随应用程序发布的核心数据种子文件中。安全字符串可以使用基于 CommonCrypto 的 NSValueTransformer 进行转换。

**我的问题是如何管理一个核心数据实体，它作为一个可以有多个翻译的属性？**

例如，假设实体`Car`有一个属性`modelName`，并且`modelName`有各种翻译。存储这种关系的最佳方式是什么？

注意：我做过类似的事情，每种语言都有一个 sqlite 文件，当用户切换语言时，核心数据持久存储发生了变化。但这在这个应用程序中不会很顺利（我认为，可能是多个 MOC？）因为我们需要同时提供多个翻译。

# php - 如何取回最后插入的行mysql

> ID：14135111
> 
> 赞同：0
> 
> 时间：2013-01-03T08:08:44.687
> 
> 标签：php, mysql, sql, insert

好吧，我一直在寻找这个，并没有真正找到我的问题的答案。

目前我得到了这个语法：

```
$sql = sprintf("INSERT INTO users (***, ***, ***, ***) VALUES ('%s', '%s', '%s', %d)", mysql_real_escape_string($***), mysql_real_escape_string($***), mysql_real_escape_string($***), $***);
if(!mysql_query($sql)) { die('error: '.mysql_error()); }
return mysql_insert_id(); 
```

这很好用，当我想从最后插入的行中取回一个项目时，我可以使用我得到的 id 进行另一个查询。

但我的问题是，是否有可能一次性归还整排？这样我就不必运行另一个查询来从最后插入的行中获取项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:15:06.120

不，没有类似的实施。

我认为这是正确的，因为[插入语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)更复杂（例如，参见`on duplicate key`, `insert ignore`），并且在某些情况下预期的返回可能是模棱两可的

# php - mysql_query 中的更新有时会返回 null

> ID：14135120
> 
> 赞同：0
> 
> 时间：2013-01-03T08:09:27.227
> 
> 标签：php, mysql

我使用此代码更新记录`mysql`
这是我的代码：

```
<?php
    $query = "update seeds set status='success' where id = $x";
    $result = mysql_query($query);
    if(!$result){
         echo 'failed'.$result;
         print_r($result);
    }else{
         echo 'successfully';
    }

?> 
```

总是`successfully`打印出来。
但是当服务器拥挤时，“失败”字符串被打印出来，“结果”变量没有任何值。
此查询始终正常工作，但有时会返回`NULL`。
我怎样才能解决这个问题？

* * *

有一个问题。
我对这个查询使用事务。事实上我的实际代码是这样的：

```
<?php
.
.
.
$QUERY_TRANSACTION = mysql_query('START TRANSACTION');
if(!$QUERY_TRANSACTION){
    echo "error 101" ;
    exit;
}
$seed_query = "INSERT INTO seeds VALUES('','$username','$theTime','در انتظار')";
$seed_result = mysql_query($seed_query);
if(mysql_affected_rows()!=1){
    $QUERY_TROLLBACK = mysql_query('ROLLBACK');
    echo "error 102";       
    exit;       
}
$seed_id = mysql_insert_id();                           
$_SESSION['SEED_ID'] = $seed_id;

$query_values = "(NULL,'$list_number[0]',0,$seed_id)";                  
for($i=1;$i<count($list_number);$i++){
    $query_values .= ",(NULL,'$list_number[$i]',0,$seed_id)";
}                
$r_query = "INSERT INTO rc_members VALUES $query_values";
$r_result = mysql_query($r_query);
if(mysql_affected_rows()<=0){
    $QUERY_TROLLBACK = mysql_query('ROLLBACK'); 
    echo "error 103";       
    exit;       
}
$QUERY_COMMIT = mysql_query('COMMIT');
//--------------
$QUERY_TRANSACTION = mysql_query('START TRANSACTION');
if(!$QUERY_TRANSACTION){
    echo "error 104" ;
    exit;
}
$s_status = the_process($list_number,$m,$seed_id);                                          
if($s_status == 'successful_proc'){
    $s_query = "UPDATE seeds SET status='انجام شده' WHERE id=$seed_id";                                                     
    $s_result = mysql_query($s_query);
    //----------------logg file
    $filename = "debug.txt" ;
    $filepointer =fopen($filename ,"w") ;
    fwrite($filepointer , print_r($s_result,true)) ;
    fclose($filepointer) ;              
    //-----------------------
    if(!$s_result){
        echo "error 105".$s_result;                 
        exit;
    }
    $QUERY_COMMIT = mysql_query('COMMIT');
    echo 'successfuly process';
}else{
    $QUERY_TROLLBACK = mysql_query('ROLLBACK');
    echo 'error 106';
    exit;
}
$QUERY_COMMIT = mysql_query('COMMIT');  

?> 
```

“成功”总是打印出来。但有时会打印出“错误 105”。

可能是事务是这个错误的原因？

执行了 db 中的更新但返回 null？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:21:19.223

如果 mysql_query 返回 NULL，那么这将是 PHP 的一个错误。你怎么知道它实际上返回了 NULL？

对于更新语句 mysql_query 应该只返回 TRUE 或 FALSE。所以你的错误检查代码很好。至于找出哪里出了问题，您将不得不调用其他函数 - mysql_error() 会给您一个关于哪里出了问题的简介。所以在你的 false 块中打印 mysql_error() 的值。像这样：

```
 echo 'failed. SQL Err: '. mysql_error() 
```

这样做，您可能会知道“记录是如何更新的，但返回值是假的”。它不应该发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:12:56.103

**$result**在这种情况下只是一个资源，它不包含原因。

> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

来源：[PHP 手册](http://us.php.net/mysql_query)

因此，您只能在更新查询中从中获取 TRUE / FALSE。它不会告诉你原因。但是正如您所说，当您的服务器人满为患时会发生这种情况，因此原因可能是“连接太多”

# android - Android中服务内的Http响应

> ID：14135121
> 
> 赞同：0
> 
> 时间：2013-01-03T08:09:30.317
> 
> 标签：android, service, android-activity, httpresponse

嗨，我在 Android 中有一项服务，可以处理下面指定的 HTTP 方法 POST。现在，我需要调用 Intent

> 替换资源段（）

方法。它有一个处理程序，需要将近 90 秒才能完成任务。在这段时间内，控制退出处理程序块。但我希望我的程序在 POST 处理程序中继续。简而言之，我希望我的服务在 POST 处理程序中暂停一段时间，直到我的 Intent（带有处理程序）完成其执行并且我需要延迟发送 HTTP Post 的响应。有人可以指导我如何执行此操作吗？

```
 if(method.equals("POST"))
        {   
        conn.receiveRequestEntity((HttpEntityEnclosingRequest)request);             
        HttpEntity entity = ((HttpEntityEnclosingRequest)request).getEntity();          
        String content_type = ""+entity.getContentType();
        JSONReceived = EntityUtils.toString(entity);
        if(content_type.contains("json"))
        {       
        Log.d(TAG,"Content received is: "+JSONReceived);
        bufferedWriter = new BufferedWriter(new FileWriter(new File(getFilesDir()+File.separator+constants.UPDATED_SCRIPT_FILE)));
        bufferedWriter.write(JSONReceived);
        bufferedWriter.close();            
        try {
            parseJSON(JSONReceived);
            replaceResourceSegment(); //Call to an intent with startActivityForResult()
            continueExecution(); //Continue the execution from here                                             
        } catch (IOException e) {
            e.printStackTrace();
            Log.d(TAG,"IOException line 157");
        } 
```

发回响应的代码：

```
 HttpResponse postResponse = new BasicHttpResponse(HttpVersion.HTTP_1_1, 200, "OK");
        postResponse.setEntity(new StringEntity("Got it"));
        conn.sendResponseHeader(postResponse);
        conn.sendResponseEntity(postResponse); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:54:52.287

我设法通过使用默认值为 false 的布尔变量来解决问题。它将定期检查并将控件保存在 POST 方法的处理程序中。

```
android.os.SystemClock.sleep(30000); //Sleeps for 30 seconds and invoke busy waiting in a thread
Thread syncThread = new Thread(new LoopCheck());
syncThread.start();
synchronized(syncThread)
{
Log.d(TAG,"Inside synchronized blockk");
try
{
syncThread.wait();
}catch(InterruptedException ie){
ie.printStackTrace();
}
} 
```

线程类定义如下：

```
class LoopCheck extends Thread{
public LoopCheck(){
}
public void run(){
while(true)
{
try {
Thread.sleep(10000);                    
if(write)
{                           
write = false;
synchronized(syncThread)
{
syncThread.notify();
}
break;
}                           
} catch (InterruptedException e) {
e.printStackTrace();
}
}
}       
} 
```

# c++ - 与朋友功能混淆

> ID：14135123
> 
> 赞同：2
> 
> 时间：2013-01-03T08:09:41.120
> 
> 标签：c++, compiler-errors, friend

FileTwo.h 内部

```
#ifndef FILETWO
#define FILETWO
#include"FileOne.h"
class FileOne ;
class FileTwo
{
public:
    int Test(FileOne One){
        return (One.var1+One.var2);}

    FileTwo(void);
    ~FileTwo(void);
};
#endif 
```

FileOne.h 内部

```
#ifndef FILEONE
#define FILEONE
#include"FileTwo.h"
class FileTwo ;
class FileOne
{
private:
     int var1 , var2 , var3 ;
public :
    friend int FileTwo::Test(FileOne One);
    FileOne(){
        var1= 12;var2 = 24;
    }

};
#endif 
```

main.cpp 内部

```
#include<iostream>
using namespace std ;
#include"FileOne.h"
#include"FileTwo.h"

int main(){
FileOne one ;
FileTo two ;
cout<<two.Test(one);
} 
```

在编译期间我收到以下错误

```
 1-- error C2027: use of undefined type 'FileOne' c:\users\e543925\documents\visual studio 2005\projects\myproject\filetwo.h
   2--error C2027: use of undefined type 'FileOne'  c:\users\e543925\documents\visual studio 2005\projects\myproject\filetwo.h  

   3--error C2228: left of '.var1' must have class/struct/union c:\users\e543925\documents\visual studio 2005\projects\myproject\filetwo.h
   4--error C2228: left of '.var2' must have class/struct/union c:\users\e543925\documents\visual studio 2005\projects\myproject\filetwo.h 
```

我找到了一种解决方法，例如在 FileTwo.cpp 中定义 Test 函数。但我想知道如何在头文件中解决上述问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:17:36.157

您的问题是您将两个文件都包含在彼此中。当您的编译器进入 parse`FileOne.h`时，它​​包含`FileTwo.h`，因此它会读取，跳过`FileOne.h`（感谢 include 保护；否则，您将进入无限循环）并尝试使用`FileOne`尚未定义的 class 。

实际上，这就像您没有包含`FileOne.h`在`FileTwo.h`; 您不能调用方法，`One`因为它的类型 ( `FileOne`) 尚未定义。与朋友班无关。或者还没有（稍后你会遇到这个问题）。

从您的代码来看，您似乎想使用 class `FileTwo`to test `FileOne`。在这种情况下，`FileOne`并不需要了解太多`FileTwo`，只需让它看看它的内脏（也就是让它成为朋友）。所以你的代码可以归结为：

文件一.h：

```
#ifndef FILEONE
#define FILEONE
class FileOne
{
  friend class FileTwo; // This is all FileOne needs from FileTwo
private:
  int var1 , var2 , var3 ;
public :
  FileOne(){
    var1= 12;var2 = 24;
  }
};
#endif 
```

文件二.h：

```
#ifndef FILETWO
#define FILETWO
#include"FileOne.h"
class FileTwo
{
public:
  int Test(FileOne One) {
    return (One.var1+One.var2);
  }

  FileTwo();
  ~FileTwo();
};
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:14:26.270

至少在这个简单的示例中，您不需要包含`FileOne.h`inside 。`FileTwo.h`但总的来说，循环包含意味着您的设计有问题。

你必须让整个班级成为朋友，而不仅仅是一个方法。我也会重新考虑这种友谊，因为这会引入类之间的主要耦合。你不能用公共方法完成同样的事情吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:26:30.023

你所拥有的是一个循环依赖，它可以通过使用不完整的类型声明来解决。就目前而言，您的代码需要在两个文件中进行完整的类型声明：

1）在 FileOne.h 中：（`friend int FileTwo::Test(FileOne One);`您要求编译器查找 的成员函数`FileTwo`）

2）在 FileTwo.h 中：（`int Test(FileOne One){ return (One.var1+One.var2);}`您要求编译器查找 的一些成员变量`FileOne`）

您必须在至少一个文件 ( `class FileOne;` `class FileTwo;`) 中使用不完整的类型声明。您已经在尝试这样做，但使用`#include`指令会破坏这一点。你有两个选择：

一种是结交整个班级`FileTwo`的朋友`FileOne`，因为这是使用不完整类型所允许的。删除`#include "FileTwo.h"`.

另一个你自己已经找到的：

> 我找到了一种解决方法，例如在 FileTwo.cpp 中定义 Test 函数。

`#include "FileOne.h"`在这种情况下从 FileTwo.h 中删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T08:34:49.860

您的朋友声明很好，您遇到的问题是`circular include`。您可以通过将类实现之一放入 cpp 文件来打破循环包含。

例如，将 FileTwo 类分解为 FileTwo.h 和 FileTwo.cpp 应该可以解决您的问题。或者，声明`friend FileTwo;`一个前向声明就足够了：

文件一.h

```
#ifndef FILEONE
#define FILEONE

class FileTwo;
class FileOne
{
private:
     int var1 , var2 , var3 ;
public :
    friend FileTwo;
    FileOne(){
        var1= 12;var2 = 24;
    }

};
#endif 
```

文件二

```
#ifndef FILETWO
#define FILETWO

#include "FileOne.h"
class FileTwo
{
public:
   inline int Test(FileOne One)
    {
      return (One.var1+One.var2);
    }

    FileTwo(void){}
    ~FileTwo(void){}
};
#endif 
```

# javascript - Onclick 与 addEventListener

> ID：14135126
> 
> 赞同：10
> 
> 时间：2013-01-03T08:09:57.987
> 
> 标签：javascript, events, addeventlistener

使用“onclick”“onmousedown”作为 HTML 元素的属性，我有点困惑。

如：

```
<button onclick="my_JS_function()"></button> 
```

或者

```
<div onmousedown="my_another_JS_funciton"></div> 
```

但是有些人说，添加“听众”的唯一“正确”方式是

```
document.getElementById("my_id").addEventListener("onclick", my_JS_function, false); 
```

什么是更“正确”更受支持的方式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T08:13:40.787

如果您已经知道函数和元素是 html 的一部分，即不能动态添加，那么您可以内联添加函数而不是使用像“addEventListener”这样的额外方法调用

**还有一点需要注意**

虽然**onclick 适用于所有浏览器**，但 addEventListener 不适用于旧版本的 Internet Explorer，它使用 attachEvent 代替。

**OnClick**是**DOM 级别 0**属性。**AddEventListener**是**DOM Level 2**定义的一部分。阅读：[http ://www.w3.org/TR/DOM-Level-2-Events/events.html](http://www.w3.org/TR/DOM-Level-2-Events/events.html)

作为 HTML 标记属性添加的内联事件处理程序，例如：

```
 <a href="gothere.htm" onlick="alert('Bye!')">Click me!</a> 
```

上述技术很简单，但也有一些**缺点**：它们允许每个元素只有一个事件处理程序。此外，使用内联事件处理程序时，JavaScript 代码与 HTML 标记的分离效果很差。

```
document.getElementById("my_id").addEventListener("onclick", my_JS_function, false); 
```

**优点**：您可以添加多个事件处理程序。还分开 html 和 javascript 代码

有关更多详细信息，您可以阅读：[**添加事件处理程序**](http://www.javascripter.net/faq/addeventlistenerattachevent.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T08:11:43.060

后者 ( `addEventListener()`) 是最好的方法，因为您可以将多个相同类型的事件附加到同一个元素。

通过分配 to`onclick`等，您将覆盖现有的处理程序。

# xcode - 使用命令 xcodebuild 构建 iphonesimulator6.0 目标失败，但使用 Product--> Build in xcode UI 成功

> ID：14135128
> 
> 赞同：1
> 
> 时间：2013-01-03T08:10:21.470
> 
> 标签：xcode, command, xcodebuild

错误信息：

> clang：错误：部署目标'-mios-simulator-version-min = 4.3'的无效架构'arm'

**命令 xcodebuild**和**Product-->Build**有什么区别？

# excel - Excel VBA :: 使用循环复制值 & 运行时错误 9

> ID：14135136
> 
> 赞同：0
> 
> 时间：2013-01-03T08:11:10.243
> 
> 标签：excel, for-loop, runtime-error, vba

我对 VBA 很陌生，所以下面的问题应该不会太难。但是由于我花了大约一个半小时来编写代码，我想我只是缺乏一些基本的了解它应该是什么样子，所以我认为值得在这里发布它。

代码所做的基本上是将值从一个工作表中的一个范围复制到包含某种计划的同一活动工作簿中的另一个工作表中的另一个范围。

在本节中的循环的第一次运行中，我已经收到“运行时错误'9'下标超出范围”错误消​​息

```
'Subject
Morning = Worksheets("ExamSchedule").Cells(Weeknr + 2, Day) 
```

我在一个空白工作簿中尝试了代码，所以错误不应该是由于格式化（如果这可能是原因）。但是，如果您需要有关上下文等的更多信息，我当然可以提供更多详细信息。

谢谢您的回答！

帕特里克

```
Sub SetData_new()
' SubModule to copy the data from 'Master_Plan' to particular sheets

Dim CurrWS As Long, StartWS As Long, EndWS As Long
StartWS = Sheets("W_1").Index
EndWS = Sheets("L_1").Index
Dim Weeknr As Integer
Weeknr = 5
Dim Day As Long
Dim Morning As Range, Afternoon As Range, Noon As Range

For CurrWS = StartWS To EndWS

   'Set updated ranges
   Set Morning = Worksheets(CurrWS).Cells(4, 4)
   Set Afternoon = Worksheets(CurrWS).Cells(8, 4)
   Set Noon = Worksheets(CurrWS).Cells(12, 4)

    For Day = 3 To 21 Step 3
    'Subject
       Morning = Worksheets("ExamSchedule").Cells(Weeknr + 2, Day)
       Afternoon = Worksheets("ExamSchedule").Cells(Weeknr + 4, Day)
       Noon = Worksheets("ExamSchedule").Cells(Weeknr + 6, Day)

     'Category
       Morning.Offset(0, 1) = Worksheets("ExamSchedule").Cells(Weeknr + 2, Day + 1)
       Afternoon.Offset(0, 1).Value = Worksheets("ExamSchedule").Cells(Weeknr + 4, Day + 1)
       Noon.Offset(0, 1).Value = Worksheets("ExamSchedule").Cells(Weeknr + 6, Day + 1)

     'Type
       Morning.Offset(0, 2) = Worksheets("ExamSchedule").Cells(Weeknr + 2, Day + 2)
       Afternoon.Offset(0, 2).Value = Worksheets("ExamSchedule").Cells(Weeknr + 4, Day + 2)
   Noon.Offset(0, 2).Value = Worksheets("ExamSchedule").Cells(Weeknr + 6, Day + 2)

     'Specifications
       Morning.Offset(0, 3) = Worksheets("ExamSchedule").Cells(Weeknr + 3, Day)
       Afternoon.Offset(0, 3).Value = Worksheets("ExamSchedule").Cells(Weeknr + 5, Day)
       Noon.Offset(0, 3).Value = Worksheets("ExamSchedule").Cells(Weeknr + 7, Day)

     'Increment
       Morning = Morning.Offset(12, 0)
       Afternoon = Afternoon.Offset(12, 0)
       Noon = Noon.Offset(12, 0)
     Next Day

    Wochennummer = Wochennummer + 9
Next CurrWS

Worksheets("ExamSchedule").Activate

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:08:20.057

错误是由于`Variant`不合格的默认类型`Dim`

发生了什么是线

```
Morning = Worksheets("ExamSchedule").Cells(Weeknr + 2, Day) 
```

将值 from `ExamSchedule`into`Morning`并将其类型设置为任何单元格值类型。

当线

```
Morning.Offset(0, 1) = Worksheets("ExamSchedule").Cells(Weeknr + 2, Day + 1) 
```

运行，`Morning`不是 type `Range`，所以它没有`Offset`属性和错误

使用

```
Dim Morning as Range 
```

等应该可以解决您的问题。

**编辑**

为了简化一点，试试这个
为工作表使用变量
明确`Value`引用

```
Sub SetData_new()
    ' SubModule to copy the data from 'Master_Plan' to particular sheets
    Dim Wochennummer As Long ' unless this is a global variable?
    Dim CurrWS As Long, StartWS As Long, EndWS As Long
    StartWS = Sheets("W_1").Index
    EndWS = Sheets("L_1").Index
    Dim Weeknr As Long
    Weeknr = 5
    Dim Day  As Long
    Dim Morning As Range, Afternoon As Range, Noon As Range

    Dim ws As Worksheet
    Set ws = Worksheets("ExamSchedule")

    For CurrWS = StartWS To EndWS

       'Set updated ranges
       Set Morning = Worksheets(CurrWS).Cells(4, 4)
       Set Afternoon = Worksheets(CurrWS).Cells(8, 4)
       Set Noon = Worksheets(CurrWS).Cells(12, 4)

        For Day = 3 To 21 Step 3
        'Subject
           Morning.Value = ws.Cells(Weeknr + 2, Day).Value
           Afternoon.Value = ws.Cells(Weeknr + 4, Day).Value
           Noon.Value = ws.Cells(Weeknr + 6, Day).Value

         'Category
           Morning.Offset(0, 1).Value = ws.Cells(Weeknr + 2, Day + 1).Value
           Afternoon.Offset(0, 1).Value = ws.Cells(Weeknr + 4, Day + 1).Value
           Noon.Offset(0, 1).Value = ws.Cells(Weeknr + 6, Day + 1).Value

         'Type
           Morning.Offset(0, 2) = ws.Cells(Weeknr + 2, Day + 2)
           Afternoon.Offset(0, 2).Value = ws.Cells(Weeknr + 4, Day + 2)
           Noon.Offset(0, 2).Value = ws.Cells(Weeknr + 6, Day + 2)

         'Specifications
           Morning.Offset(0, 3).Value = ws.Cells(Weeknr + 3, Day).Value
           Afternoon.Offset(0, 3).Value = ws.Cells(Weeknr + 5, Day).Value
           Noon.Offset(0, 3).Value = ws.Cells(Weeknr + 7, Day).Value

         'Increment
           Morning.Value = Morning.Offset(12, 0).Value
           Afternoon.Value = Afternoon.Offset(12, 0).Value
           Noon.Value = Noon.Offset(12, 0).Value
         Next Day

        Wochennummer = Wochennummer + 9
    Next CurrWS

    ws.Activate
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:33:30.963

对于所有感兴趣的人，我最终实现的版本如下所示。它在 Windows 上工作得很好，也应该在 Mac 上工作：

```
Sub SetData_new_my()
' SubModule to copy the data from 'Master_Plan' to particular sheets

Dim CurrWS As Long, StartWS As Long, EndWS As Long, ScheduleWS As Long
StartWS = Sheets("W_1").Index
EndWS = Sheets("L_1").Index

Dim Weeknr As Long
Weeknr = 5
Dim Day As Long

Dim Morning As Range, Afternoon As Range, Noon As Range    
Dim ExamSchedule As Worksheet
Set ExamSchedule = Worksheets("ExamSchedule")

For CurrWS = StartWS To EndWS
   'Set updated ranges
   Set Morning = Worksheets(CurrWS).Cells(4, 4)
   Set Afternoon = Worksheets(CurrWS).Cells(8, 4)
   Set Noon = Worksheets(CurrWS).Cells(12, 4)

    For Day = 3 To 21 Step 3
    'Subject
       Morning.Value = ExamSchedule.Cells(Weeknr + 2, Day).Value
       Afternoon.Value = ExamSchedule.Cells(Weeknr + 4, Day).Value
       Noon.Value = ExamSchedule.Cells(Weeknr + 6, Day).Value

     'Category
       Morning.Offset(0, 1).Value = ExamSchedule.Cells(Weeknr + 4, Day + 1).Value
       Afternoon.Offset(0, 1).Value = ExamSchedule.Cells(Weeknr + 4, Day + 1).Value
       Noon.Offset(0, 1).Value = ExamSchedule.Cells(Weeknr + 6, Day + 1).Value

     'Type
       Morning.Offset(0, 2).Value = ExamSchedule.Cells(Weeknr + 1, Day + 2).Value
       Afternoon.Offset(0, 2).Value = ExamSchedule.Cells(Weeknr + 4, Day + 2).Value
       Noon.Offset(0, 2).Value = ExamSchedule.Cells(Weeknr + 6, Day + 2).Value

     'Specifications
       Morning.Offset(0, 3).Value = ExamSchedule.Cells(Weeknr + 3, Day).Value
       Afternoon.Offset(0, 3).Value = ExamSchedule.Cells(Weeknr + 5, Day).Value
       Noon.Offset(0, 3).Value = ExamSchedule.Cells(Weeknr + 7, Day).Value

     'Increment
       Set Morning = Morning.Offset(12, 0)
       Set Afternoon = Afternoon.Offset(12, 0)
       Set Noon = Noon.Offset(12, 0)
     Next Day

    Weeknr = Weeknr + 9
Next CurrWS

ExamSchedule.Activate

End Sub 
```

# javascript - 在 CKEditor 中，无法上传图片。？

> ID：14135139
> 
> 赞同：1
> 
> 时间：2013-01-03T08:11:25.377
> 
> 标签：javascript, ckeditor

我正在使用 CKEditor (3.62)，从图像按钮上传图像时，图像未加载到 CKEditor 中。如何解决这个问题呢。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:45:13.113

我在 ckeditor 中集成了 ckfinder。当我上传图像时，它会出现脚本错误，即在 ckfinder.html 中。我不知道如何在 ckeditor 中设置 ckfinder。如何解决问题。

![@philipp 这里是脚本错误页面。](../Images/946210c9cbd199d5bfce84c404531189.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T09:08:42.647

给出路径可能存在一些问题。尝试执行以下步骤。

1.下载CKEditor和CKFinder。集成代码可在[http://dwij.co.in/ckeditor-ckfinder-integration-using-php/](http://dwij.co.in/ckeditor-ckfinder-integration-using-php/)
上获得 2\. 将两者的提取代码放在 xampp 内的一个文件夹中，如下所示。3\. 创建包含编辑器的索引文件（index.html），代码如下。

```
 <html>
    <head>
    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
    <script type="text/javascript" src="ckfinder/ckfinder.js"></script>
    </head>
    <body>
        <h1>CKEditor CKFinder Integration using PHP</h1>
        <textarea id="editor1" name="editor1" rows="10" cols="80"></textarea>
    <script type="text/javascript">
    var editor = CKEDITOR.replace( 'editor1', {
        filebrowserBrowseUrl : 'ckfinder/ckfinder.html',
        filebrowserImageBrowseUrl : 'ckfinder/ckfinder.html?type=Images',
        filebrowserFlashBrowseUrl : 'ckfinder/ckfinder.html?type=Flash',
        filebrowserUploadUrl : 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files',
        filebrowserImageUploadUrl : 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images',
        filebrowserFlashUploadUrl : 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash'
    });
    CKFinder.setupCKEditor( editor, '../' );
    </script>
    </body>
    </html> 
```

所以你的文件夹结构将是这样的：

```
文档
|_集成
    |_ckeditor
    | |_config.js
    | |_...
    |_ckfinder
    | |_config.php
    | |_...
    |_上传
    |_index.html

```

1.  现在在 ckfinder 中打开文件 config.php 并进行以下更改：

    ```
    function CheckAuthentication() {
        // WARNING : DO NOT simply return "true". By doing so, you are allowing
        // "anyone" to upload and list the files in your server. You must implement
        // some kind of session validation here. Even something very simple as...
        // return isset($_SESSION['IsAuthorized']) && $_SESSION['IsAuthorized'];
        return true; // not good option though; go for sessions
    }
    $baseUrl = 'http://localhost/integrated/uploads/';
    $enabled = true;
    $config['SecureImageUploads'] = false;
    $config['ChmodFolders'] = 0777 ; 
    ```

2.  现在打开 url`http://localhost/integrated/`并尝试上传图片。

# installation - 使用 NSIS 设计一个简单的 UI 来控制应用程序

> ID：14135141
> 
> 赞同：0
> 
> 时间：2013-01-03T08:11:34.143
> 
> 标签：installation, nsis, win32gui

我需要为 Windows 平台设计一个简单的 UI，其中包含几个按钮，如启动服务器、停止服务器、启动客户端、检查更新等。这个 UI 将前端批处理脚本，这样用户就不必寻找特定的批处理脚本来跑。

我已经在使用 NSIS 来安装软件，发现它非常酷且易于使用。我正在考虑使用 NSIS 来设计这个简单的 UI，这样我就不必编写很多 Win SDK 代码。

仅仅因为 NSIS 主要用于创建安装程序就使用 NSIS 创建这个前端会是一个坏主意吗？

有没有像设计带有按钮的简单窗口一样简单的东西？

我也有一个担心。当 NSIS 安装程序正在运行时，它可以阻止另一个不相关的安装程序运行。我不希望我的 UI 在运行时阻止其他安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:42:23.800

使用 NSIS/ [nsDialogs](http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html)创建应用程序对于简单的小事情来说是可以的，我自己已经做过好几次了。它不应阻止其他安装程序，但确实会尝试阻止重新启动...

您还可以查看[AutoHotKey](http://www.autohotkey.com/docs/commands/Gui.htm)或创建[HTA 应用程序](http://msdn.microsoft.com/en-us/library/ms536496%28v=vs.85%29.aspx)。

# sql - 在一个脚本中创建两个可能的存储过程之一

> ID：14135145
> 
> 赞同：1
> 
> 时间：2013-01-03T08:11:51.627
> 
> 标签：sql, sql-server-2008, stored-procedures, proc

我想做一个检查（if 语句），然后创建两个可能的过程之一。

现在我正在尝试在`IF EXISTS`语句中使用`CREATE PROCEDURE`语句。

```
CREATE PROCEDURE [dbo].[TestProc]
AS

SET NOCOUNT ON
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER OFF

IF EXISTS (select * from table)
BEGIN
DECLARE @region NVARCHAR(100)

SELECT *
INTO #TempTable
FROM User 
```

...用#TempTable 等做一些事情。

```
DROP #TempTable
END

ELSE
BEGIN
DECLARE @region NVARCHAR(100)

SELECT *
INTO #TempTable
FROM User 
```

...用#TempTable 等做其他事情

```
DROP #TempTable
END 
```

我收到以下 2 个错误

```
There is already an object named 'TempTable' in the database.

The variable name '@region' has already been declared. Variable names must be unique within a query batch or stored procedure. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:28:18.163

a) 首先在存储过程中创建临时表，然后使用`INSERT INTO (...) SELECT ...`来填充它，或者 b) 在两个分支中为临时表使用不同的名称。

T-SQL 解析器是一个非常简单的野兽，*控制流*不会影响它对哪些对象存在或不存在的解释——所以如果你在一个分支中声明一个临时表`IF`，你不能在另一个分支中单独声明它分支 - 无论控制流是否进入分支，它都“存在” `IF`。

类似的论点适用于变量。

显然，`a`仅当临时表结构相同时，选项才有效。

* * *

如何忽略控制流的简单示例：

```
if 1=2
begin
    declare @a int
end

set @a = 5

print @a 
```

打印`5`。只是：

```
set @a = 5

print @a 
```

产生错误`Must declare the scalar variable "@a".`，这表明声明（在未遵循的分支内`if`）仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:48:57.420

1.您需要使用两个不同的临时表，并在 SELECT * INTO 语句之前删除它们

2.变量需要在body过程中声明一次。在您的情况下，如果存在之前

```
CREATE PROCEDURE [dbo].[TestProc]
AS
SET NOCOUNT ON
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER OFF

DECLARE @region NVARCHAR(100)

IF EXISTS(SELECT 1 FROM dbo.test6)
BEGIN
  IF OBJECT_ID('tempdb.dbo.#TempTable') IS NOT NULL DROP TABLE dbo.#TempTable
  SELECT *
  INTO #TempTable
  FROM dbo.test6
END
ELSE
BEGIN
  IF OBJECT_ID('tempdb.dbo.#TempTable2') IS NOT NULL DROP TABLE dbo.#TempTable2
  SELECT *
  INTO #TempTable2
  FROM dbo.test6
END 
```

# objective-c - EventKit：提醒到期日期组件与警报

> ID：14135147
> 
> 赞同：7
> 
> 时间：2013-01-03T08:11:57.743
> 
> 标签：objective-c, ios, eventkit

我想从我的应用程序创建一个提醒，所以我创建了一个提醒 (EKReminder) 并设置了一个警报：

```
NSTimeInterval timeInterval = 100000;
NSDate *alarmDate = [NSDate dateWithTimeIntervalSinceNow:timeInterval];
EKAlarm *alarm = [EKAlarm alarmWithAbsoluteDate:alarmDate];
[reminder setAlarms:@[alarm]]; 
```

但我看到 EKReminder 上还有一个 dueDateComponents 属性。设置闹钟和dueDateComponents有什么区别？

还有一种方法可以创建警报：`alarmWithRelativeOffset:(NSTimeInterval)offset`但是文档说偏移参数可以是负数，过去怎么可能发出警报？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T06:50:25.540

项目有点`EKReminder`像待办事项列表中的任务，具有可选的开始日期和截止日期，该`dueDateComponents`属性允许您指定何时完成任务。例如，它将允许您显示过期项目。这是信息性的，与警报分开。

在提醒上设置警报将导致提醒应用程序在警报响起时通知用户。

我想这有点令人困惑，因为提醒应用程序似乎不允许您设置截止日期，而只能设置警报日期。然而，在这篇博文中，它显示了您过去是如何在 icloud.com 上设置截止日期但没有提醒日期的：http: [//blog.truthdialogue.com/2012/07/setting-due-dates-in-the -os-x-mountain-lion-reminders-app.html](http://blog.truthdialogue.com/2012/07/setting-due-dates-in-the-os-x-mountain-lion-reminders-app.html)。自开发 API 以来，Apple 似乎已经简化了应用程序。

偏移量`alarmWithRelativeOffset:`是从事件的开始日期/时间开始的。因此，例如，您可以将警报设置为在事件发生前 x 分钟响起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-04T11:25:17.717

```
let alarmist : EKAlarm = EKAlarm()
alarmist.relativeOffset = -0
reminder.addAlarm(alarmist)
NSLog("reminder has alarm ->" + reminder.hasAlarms.description) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T07:17:42.157

```
 EKAlarm *reminder = [EKAlarm alarmWithRelativeOffset:-00];
        [event addAlarm:reminder]; 
```

# jquery - jQuery模式视图中带有formtastic的Client_side_validations gem不起作用

> ID：14135148
> 
> 赞同：0
> 
> 时间：2013-01-03T08:12:03.993
> 
> 标签：jquery, ruby-on-rails, formtastic, client-side-validation

我正在尝试让 client_side_validations gem 在 jquery 模式视图中验证我的表单，但是没有发生验证（至少在错误没有出现内联的情况下）。

我也在使用 formtastic gem，所以我安装了 client_side_validations 和 client_side_validations-formtastic gem 来支持 formtastic。

注意：我在 app/views/layouts/application.html.erb 中包含 rails.validations javascript

这是我的代码：

**应用程序/views/home/index.html.erb：**

```
 <script type="text/javascript">
      $(document).on("click", "btn-signup", function trans() {
            Modal.prototype.hideWithTransition = function(){
                  $("#signup").fadeIn();
            };
      });
    </script>
    <script type="text/javascript">
      $('#new_user').enableClientSideValidations();
      $('#new_user').on('shown', function() {
        $(ClientSideValidations.selectors.forms).validate();
      });
    </script>
    <div class="row">
      <div class="twelvecol last">
        <div id="vidplaceholder">
          <div id="landing-action">
            <p></p>
            <fieldset>

              <!-- The sign up modal view -->
               <div id="signup" class="modal hide fade in" style="display: none;">  
                <% @user = User.new %>
                <%= semantic_form_for @user, :remote => true, :validate => true do |f| %>
                <div class="modal-header">  
                  <a class="close" data-dismiss="modal">×</a>  
                  <h3>Test header </h3>
                </div>  
                <div class="modal-body">  
                    <div class="field">
                      <%= f.input :email %>
                    </div>
                    <div class="field">
                      <%= f.input :website %>
                    </div>
                    <div class="field">
                      <%= f.input :projects %>
                    </div>
                </div>
                <div class="modal-footer">  
                <button type="submit" class="btn btn-success">Submit</button>
                </div>  
               </div>  
              <% end %>

               <!-- The modal view is triggered here -->
                <a data-toggle="modal" href="#signup" class="btn btn-primary
                btn-large btn-signup">Sign up</a>
              </fieldset>
            <p></p>
          </div>
        </div>
      </div>
    </div>

   <script type="text/javascript">
     $("#new_user").on("submit", function hide_form() {
        $("#signup").modal('hide');
     });
    </script> 
```

**应用程序/模型/user.erb：**

```
class User < ActiveRecord::Base

  attr_accessible :email, :website, :projects

  before_save { |user| user.email = email.downcase }

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true 
  validates :email, format: { with: VALID_EMAIL_REGEX }
  validates :email, uniqueness: { case_sensitive: false }

  validates :website, :format => URI::regexp(%w(http https)), :allow_blank => true

end 
```

**配置/初始化程序/client_side_validations.rb：**

```
# ClientSideValidations Initializer

require 'client_side_validations/formtastic' if defined?(::Formtastic)

# Uncomment to disable uniqueness validator, possible security issue
# ClientSideValidations::Config.disabled_validators = [:uniqueness]

# Uncomment the following block if you want each input field to have the validation messages attached.
 ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
   unless html_tag =~ /^<label/
     %{<div class="field_with_errors">#{html_tag}<label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div>}.html_safe
   else
     %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
   end
 end 
```

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:01:35.133

试试看：

改变：

```
 <script type="text/javascript">
     $('#new_user').enableClientSideValidations();
     $('#new_user').on('shown', function() {
       $(ClientSideValidations.selectors.forms).validate();
     });
   </script> 
```

至：

```
 <script type="text/javascript">
      $('#new_user').validate();
      $('#signup').on('shown', function() {
        $(ClientSideValidations.selectors.forms).validate();
      });
    </script> 
```

# c# - WPF播放MediaElement暂停不会停止视频

> ID：14135154
> 
> 赞同：1
> 
> 时间：2013-01-03T08:12:38.247
> 
> 标签：c#, wpf, mediaelement

编程 C# WPF 媒体播放器应用程序。
我已经放置了一个画布，在该画布上我放置了一个媒体元素和按钮，当单击我想要暂停视频的按钮时，我做了以下功能：

```
private void button1_Click(object sender, RoutedEventArgs e)
{ mediaElement1.Pause(); } 
```

当我调试时，它进入功能但不暂停视频。

这是为什么 ？

谢谢

媒体元素：

```
<MediaElement Canvas.Left="72" Canvas.Top="33" Height="168" Name="mediaElement1"    Width="271" Source="C:\Users\ilans\Documents\Visual Studio 2010\Projects\SampleWPFVideoApp\SampleWPFVideoApp\SampleWPFVideoApp\Wildlife.wmv" UnloadedBehavior="Manual">
            </MediaElement> 
```

按钮：

```
<Button HorizontalAlignment="Center" VerticalAlignment="Center" Height="45" Width="45" Canvas.Left="70" Canvas.Top="150" Panel.ZIndex="1" Click="button1_Click">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <StackPanel>
                        <ContentPresenter Content="{TemplateBinding Content}" />
                    </StackPanel>
                </ControlTemplate>
            </Button.Template>
            <Image Source="Images\play.png"/>
        </Button> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T11:10:14.200

尝试`LoadedBehavior = Manual`

来自[MediaElement msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.loadedbehavior.aspx)：

> LoadedBehavior 必须设置为 Manual 才能使用 Play、Pause 和 Stop 方法交互控制媒体。

# javascript - 如何为具有相同布局的多个 Web 应用程序设计 UI 框架？

> ID：14135159
> 
> 赞同：2
> 
> 时间：2013-01-03T08:13:07.863
> 
> 标签：javascript, asp.net, css, frameworks, cdn

我正在尝试为多个 Web 应用程序设计一个 ui 框架，但在为我们的情况设计基础架构时遇到了麻烦：

*   使用 asp.net mvc 构建 7 个（或更多）分离的 Web 应用程序
*   内部服务器上的一些 Web 应用程序，一些托管
*   都具有相同的基本 css/images/javascript（每个应用程序可以使用的共享组件）
*   每个应用程序都有一些独特的 css 和 javascript
*   每个应用程序都有自己的 TFS 分支和解决方案
*   每个应用程序都有自己的发布管理（每月/每年/等）

我想要达到的目标：

*   一次性修复 UI 错误，而不是针对所有应用程序
*   所有应用程序的一致用户界面
*   不要用 UI 的东西打扰其他开发人员

什么是智能基础设施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:29:08.800

以我的经验，在 web 项目之间共享非编译代码的困难主要是源代码控制问题。我们使用内部 NuGet 服务器来共享已编译的代码，但这对于未编译的代码效果不佳。对于这些东西（HTML、sripts、内容），我发现将框架的所有常见组件保存在一个层次结构中是最简单的，可以将其作为独立项目或子模块存储在您使用的任何源代码控制系统中，例如

```
/myframework/scripts
/myframework/styles
/myframework/images 
```

如果“myframework”作为子模块进行管理，您应该能够独立于包含它的项目来维护它。这对于 git 和 svn 来说很简单。

您的应用程序特定脚本和内容可以像往常一样保存在您喜欢的任何正常层次结构中，例如

```
/scripts
/styles
/images 
```

您还可以查看流行的前端框架在其默认配置中的设置情况。例如，[Zurb Foundation](http://foundation.zurb.com/)提供了一组脚本、样式和内容模板。默认情况下，所有内容都存储在文件夹`Content`下`Javascripts`，他们建议您不要更改他们的样式表，而是在单独的样式表中覆盖任何自定义样式。这使您免受对共享框架的更改的影响。将类似的策略应用于您自己的内部框架似乎是明智的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:21:04.847

我们最终使用 NuGet 将 css/js/images 分发到所有不同的项目。全局 ui 有自己的团队项目，可以自动为我们的内部 nuget 服务器创建 nuget 包。

# wix - 从其他属性设置属性值

> ID：14135160
> 
> 赞同：7
> 
> 时间：2013-01-03T08:13:12.173
> 
> 标签：wix, wix3.5

我有一个自定义控件（禁用编辑），我想在其中显示当前登录`Domain\User`。

我这样设置属性：

```
<Property Id="PROP_DOMAINUSER" Value="[%USERDOMAIN]\[LogonUser]"></Property> 
```

但是我在编辑框中看到的是确切的文本 -`[%USERDOMAIN]\[LogonUser]`而不是实际的域和用户。

那么如何从另一个属性初始化属性值呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T09:18:04.093

您需要创建类型 51 自定义操作来设置属性，这可以使用[SetProperty](http://wix.sourceforge.net/manual-wix3/wix_xsd_setproperty.htm)元素来实现。请记住在您的自定义控件显示之前安排此时间。

```
<SetProperty Id="INSTALL_USERNAME" Value="[%USERDOMAIN]\[%USERNAME]" /> 
```

然后，您应该在控件中使用该属性`[INSTALL_USERNAME]`。

**编辑：**

要安排自定义操作，请使用 Before 或 After 属性，如果您不确定在哪里安排它，请使用 orca 之类的工具查看事情发生的顺序，这是在 After="InstallInitialize" 之后运行的自定义操作的示例

```
<SetProperty Id="INSTALL_USERNAME" Value="[%USERDOMAIN]\[%USERNAME]" After="InstallInitialize" /> 
```

# php - php session_start 生成警告

> ID：14135161
> 
> 赞同：1
> 
> 时间：2013-01-03T08:13:15.790
> 
> 标签：php, session

我正在尝试在我的服务器中运行此代码

```
<?php
session_start();
?> 
```

我收到以下警告消息。我以前从未见过这样的警告。

```
Warning: session_start() [function.session-start]: open(/var/chroot/home/content/00/6684400/tmp/sess_uoouukt8m6efc0nc2ar5t2vq94, O_RDWR) failed: No such file or directory (2) in /home/content/00/6684400/html/html-tweetcomments/y.php on line 2

Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/content/00/6684400/html/html-tweetcomments/y.php:2) in /home/content/00/6684400/html/html-tweetcomments/y.php on line 2

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/content/00/6684400/html/html-tweetcomments/y.php:2) in /home/content/00/6684400/html/html-tweetcomments/y.php on line 2

Warning: Unknown: open(/var/chroot/home/content/00/6684400/tmp/sess_uoouukt8m6efc0nc2ar5t2vq94, O_RDWR) failed: No such file or directory (2) in Unknown on line 0

Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct () in Unknown on line 0 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:15:27.733

权限问题。

检查`tmp`文件夹权限。使其可写。

```
Failed to write session data (files). 
```

另外，检查之前没有 HTML 或空格`session_start()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:29:24.523

确保文件夹`/var/chroot/home/content/00/6684400/tmp`存在并且可由 PHP 写入

```
sudo mkdir -p /var/chroot/home/content/00/6684400/tmp/
sudo chmod 1777 /var/chroot/home/content/00/6684400/tmp/ 
```

`session_start()`设置一个包含会话 id 的 cookie。在 HTTP 协议中，Cookie 是在 HTTP 标头中发送的`Set-Cookie`。

如果您发送任何输出（包括 PHP 警告），这将被写入 HTTP 答案正文，并且 PHP 不再能够发送标头。

为了确保 HTTP 响应正文写在最后，您可以`ob_start()`在 PHP 脚本的最开始添加一个。

这将创建一个输出缓冲区，当脚本到达末尾时，该缓冲区将自动刷新到输出。

**参考**

*   [PHP 会话](http://php.net/manual/en/function.session-start.php)
*   [粘性位](http://en.wikipedia.org/wiki/Sticky_bit)
*   [HTTP Cookie](http://en.wikipedia.org/wiki/HTTP_cookie#Setting_a_cookie)
*   [PHP ob_start()](http://php.net/manual/en/function.ob-start.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:16:01.457

> 警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由 /home 中的（输出开始于 /home/content/00/6684400/html/html-tweetcomments/y.php:2）发送/content/00/6684400/html/html-tweetcomments/y.php 在第 2 行

**在session_start**调用之前打印了一些东西。在打电话之前检查 html 中的任何回声甚至任何空格

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T08:17:34.310

线索是第一个错误：

```
open(/var/chroot/home/content/00/6684400/tmp/sess_uoouukt8m6efc0nc2ar5t2vq94, O_RDWR)
failed: No such file or directory (2) 
```

看起来会话文件所引用的目录要么不存在，要么 Web 用户（运行 Web 服务器的用户）不可写。

*   检查目录是否存在 - 如果不存在，请创建它。
*   确保它对 Web 服务器用户是组可写的。

第一个错误是导致其余错误的原因；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T12:01:41.457

如果 php 代码之前有相同的输出，请将其移到 php 代码之后 示例：

```
<script>
...javascript code... 
</script>
<?php
session_start();
?> 
```

将脚本标签移到 php 标签之后。像这样：

```
<?php
session_start();
?>
<script>
...javascript code... 
</script> 
```

# iphone - 在将其上传到应用商店之前获取 iTunes 链接的 ID

> ID：14135163
> 
> 赞同：0
> 
> 时间：2013-01-03T08:13:29.990
> 
> 标签：iphone, objective-c, ios, itunes

> **可能重复：**
> [在提交之前获取应用程序的 iTunes 链接](https://stackoverflow.com/questions/4137426/get-itunes-link-for-app-before-submitting)

我想提供**`ituens link in share app page before submitting page`**

当我去扔一些示例应用程序 iTunes 链接时，它们具有以下模式。

[https://itunes.apple.com/us/app/cap-that!/id542207157](https://itunes.apple.com/us/app/cap-that!/id542207157)

[https://itunes.apple.com/app/cap-that!/id542207157](https://itunes.apple.com/app/cap-that!/id542207157)

在这两个链接中，我们都有**`idxxxxxxx`**如何获取我的应用程序的这个 ID

位置 id us/en 是可选的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:18:35.013

当您在 iTunes connect 中创建应用程序时，您将收到该应用程序的 Apple ID。因此，创建应用程序，然后当您单击它以编辑详细信息时，您将在左上角看到所有这些详细信息，如下所示：

[http://cl.ly/image/0I3y2I3N213c](http://cl.ly/image/0I3y2I3N213c)

在这里您可以看到我的应用程序 ID 是 472985456，所以只需将其余的 url 添加到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:41:53.887

对的，这是可能的。

首先，只需在 iTunes Connect 中创建应用程序并填写必要的数据。

然后会有一个链接，如“在 AppStore 上查看”或类似的东西。当您单击链接时，当您的应用上线时，它将成为您的应用链接。目前不会打开任何应用程序，因为您尚未上传应用程序。

因此，通过这种方式，您可以获得您的应用程序 url，并在您的代码中使用它来共享和创建捆绑包然后提交。

干杯并享受编码！

# android - Android 地图只显示网格不显示任何地图视图

> ID：14135166
> 
> 赞同：2
> 
> 时间：2013-01-03T08:13:45.807
> 
> 标签：android, google-maps, geolocation

我正在开发小型 android 应用程序，我想在其中向用户显示地图上的当前位置。出于这个原因，我正在使用谷歌地图 API。我遵循获取地图 api 密钥所需的所有设置。我在位置 <.android/debug.keystore> 获得默认密钥库。我从这些密钥（如 SHA1 密钥和 MD 5 密钥）中获取所有必需的值。然后在 Google API 控制台上，我使用 SHA1+package_name 获取 API 密钥。我还启用了 Google 地图 API v2 服务。

现在在我的项目方面，我做了以下事情。

```
// in main.xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
    android:id="@+id/myLocationText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
        android:text="@string/hello_world"
    tools:context=".WhereAmI" />

    <com.google.android.maps.MapView
        android:id="@+id/myMapView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="AIzaSyD6EHgxObm01ooCF9DsMzOppJbNp8O2_j4"
    />

</LinearLayout>

// In manifest file 

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_GPS"/>
<uses-permission android:name="android.permission.INTERNET"/>

<uses-library android:name="com.google.android.maps"/>

//mapactivity..........
public class mapview extends MapActivity {

    private MapController mapController;

    @Override
    protected boolean isRouteDisplayed() {
    return false;
    }

    private final LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
        updateWithNewLocation(location);

        }
        public void onProviderDisabled(String provider) 
        {

        }
        public void onProviderEnabled(String provider) 
        {

        }
        public void onStatusChanged(String provider, int status,
        Bundle extras) 
        {

        }
        };
        LocationManager locationManager;
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView myMapView = (MapView)findViewById(R.id.myMapView);
    mapController = myMapView.getController();
    myMapView.setSatellite(true);
    myMapView.setBuiltInZoomControls(true);
    mapController.setZoom(17);

    //LocationManager locationManager;
    String svcName = Context.LOCATION_SERVICE;
    locationManager = (LocationManager)getSystemService(svcName);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setSpeedRequired(false);
    criteria.setCostAllowed(true);
    String provider = locationManager.getBestProvider(criteria, true);

    //dis(provider);
    //Location l = locationManager.getLastKnownLocation(locationManager.NETWORK_PROVIDER);
    Location l = locationManager.getLastKnownLocation(provider);

    updateWithNewLocation(l);

    locationManager.requestLocationUpdates(provider, 2000, 10, locationListener);

    }

    private void updateWithNewLocation(Location location) 
    {
        TextView myLocationText;
        myLocationText = (TextView)findViewById(R.id.myLocationText);
        String latLongString = "No location found";
        String addressString = " No address found";
        //Toast.makeText(this, "inside update location", Toast.LENGTH_SHORT).show();

        if (location != null) 
        {
            double lat = location.getLatitude();
            double lng = location.getLongitude();
            latLongString = "Lat:" + lat + "\nLong:" + lng;
            Geocoder gc = new Geocoder(this, Locale.getDefault());
            Double geoLat = location.getLatitude()*1E6;
            Double geoLng = location.getLongitude()*1E6;
            GeoPoint point = new GeoPoint(geoLat.intValue(),geoLng.intValue());
            mapController.animateTo(point);

            try {
                List<Address> addresses = gc.getFromLocation(lat, lng, 1);
                StringBuilder sb = new StringBuilder();
                if (addresses.size() > 0) {
                Address address = addresses.get(0);
                for (int i = 0; i < address.getMaxAddressLineIndex(); i++)
                sb.append(address.getAddressLine(i)).append("\n");
                sb.append(address.getLocality()).append("\n");
                sb.append(address.getPostalCode()).append("\n");
                sb.append(address.getCountryName());
                }
                addressString = sb.toString();
                } catch (IOException e) {}

                myLocationText.setText("Your Current Position is:\n" +
                latLongString + "\n\n" + addressString);

        }

    }

    @Override
    public void onDestroy() 
    {
    super.onDestroy();
    locationManager.removeUpdates(locationListener);
    }

} 
```

现在我的问题是，当我在模拟器或设备上运行这个应用程序时，它给了我正确的坐标和位置，但它没有显示地图视图。它仅显示灰色网格视图。我知道有很多关于同一问题的重复问题，但我仍然无法摆脱这个问题。我还创建了自定义调试密钥并使用该密钥的 SHA1 值，但输出没有变化。有什么办法可以解决这个问题吗...需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:08:54.103

如果您无法下载地图，则可能是以下两个问题之一：

1) 您正在使用已弃用的 API 版本。2）您没有快速的互联网连接。

您显示的代码使用 API v1，并且您使用 API v2 的密钥。我不确定这是否有效，但使用带有 v2 密钥的 API v2 肯定有效。看[这里](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)。也使用片段而不是 Mapview。

也可以在真实设备上尝试，因为模拟器有一些问题，如下[所示](https://code.google.com/p/android/issues/detail?id=8816)

# java - Spock-Spring - 如何控制围绕数据驱动测试的事务何时回滚？

> ID：14135169
> 
> 赞同：1
> 
> 时间：2013-01-03T08:13:56.920
> 
> 标签：java, spring, groovy, spock

我将 Spock 测试框架与 Spock-Spring 扩展一起使用，它允许您使用 Springs 的 @Transactional 和 @Rollback 注释。鉴于我得到了这样的数据驱动测试：

```
@Transactional
@Rollback
def "Some Test"(int foo) {
  when:
  someDao.insert(foo);

  then:
  notThrown(Exception)

  where:
  foo << [0..100]
} 
```

现在当我运行它时会发生什么，这个测试用不同的“foo”值执行了 101 次。还会发生的情况是，每次测试后事务都会回滚。我想要的是事务仅在运行 101 次测试后才回滚，而不是在每次测试后回滚。我当然可以在测试中编写一个循环，但如果我可以控制事务回滚的时间会更好 - 在每次测试之后或在所有测试之后。有什么办法可以控制这个还是我被困在循环中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:27:12.453

根据设计，Spock 将数据驱动的特征方法的每次迭代都视为单独的测试。spock-spring 插件尊重这一点，目前没有办法绕过它（不修改插件）。

# android - 当并行运行 2 个 http AsyncTasks 时，有时会交换结果

> ID：14135173
> 
> 赞同：0
> 
> 时间：2013-01-03T08:14:10.733
> 
> 标签：android, android-asynctask

我的应用程序中有一个奇怪的问题。

我有一个使用 AsyncTasks 并行获取 2 或 3 个东西的活动

当我简单地执行以下操作时

```
new getMessages().execute("someID");
new getNotifications().execute("someID"); 
```

并且两个 AsyncTasks 的代码如下：

（除了每个方法请求的 URL 不同之外，它们都是相同的）。

**注意：我稍微修改了这段代码，只是为了删除任何不需要的额外内容，比如在 http 请求中发送的额外参数**

```
// in the other Async task "notifications" is changed with  "messages"
    public class getNotifications extends AsyncTask<String, Void, String> {
        ProgressDialog dialog;
        Integer verified = 0;

        protected void onPreExecute() {

        }

        @Override
        protected String doInBackground(String... args) {
                    // getRequestsCount just perfomrs http request and grabs JSON data
            String result = getRequestsCount(args[0] , "notifications");
            return result;
        }

        protected void onPostExecute(String result) {
                    // This is just a method that handles the result 
                    // When I log result I found that results are exchanged.
            displayResults(result);
        }

    }
public String getRequestsCount(String id, String type){

HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new

        HttpPost(GlobalSettings.apiURL + "/getcount/" + type );

Log.i("will contact",GlobalSettings.apiURL + "/getcount/" + type);

        HttpResponse response = httpclient.execute(httppost);

        BufferedReader reader = new BufferedReader(new InputStreamReader( response.getEntity().getContent(), "UTF-8"));
        String responseMessage = reader.readLine().toString().trim();

 // Response is always 1 line of JSON data

Log.i("Response for "+type,responseMessage);
return responseMessage;

} 
```

现在我的问题是有时会交换结果。

即 getMessages 接收从 getNotifications 请求的 JSON 数据，反之亦然。

# sql - 如何使用 CHARINDEX 在另一个字符串中搜索一个字符串？

> ID：14135175
> 
> 赞同：0
> 
> 时间：2013-01-03T08:14:11.730
> 
> 标签：sql

我正在尝试使用 CHARINDEX 在另一个字符串中搜索一个字符串。

我的代码示例如下：

```
declare @TypeBigAC char(3)
select @TypeBigAC='333'
CASE WHEN CHARINDEX(@TypeBigAC, [ACType Iata])<>0 THEN ' Big AC' ELSE '' 
```

这段代码有效，但是，我想将 @TypeBigAC 默认设置为超过 1 个值。例如，当可以在 [ACType Iata] 中找到 @TypeBigAC '333' 或 '340' 或 '332' 时，我希望返回 'Big AC'。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:27:43.077

根据我对您所问内容的理解，听起来您想要这样的东西：

```
SELECT
    CASE
        WHEN CHARINDEX('333',[ACType Iata]) > 0 THEN 'Big AC'
        WHEN CHARINDEX('340',[ACType Iata]) > 0 THEN 'Big AC'
        WHEN CHARINDEX('332',[ACType Iata]) > 0 THEN 'Big AC'
        ELSE ''
    END AS MyColumn
FROM
    [MyTable] 
```

# jquery - jquery post和django响应

> ID：14135179
> 
> 赞同：0
> 
> 时间：2013-01-03T08:14:20.780
> 
> 标签：jquery, ajax, django

我正在使用 jquery post 进行分页。django 收到 post 请求并发出响应。

问题是我没有看到浏览器中显示的响应。

这是我正在使用的 js：

```
 $.ajax({
         type:"POST",
         url:"/company/sort/",
         data: {
                'type': type,
                'page': page
         },
    }); 
```

如何显示来自 django 的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:15:37.883

您必须将“onsucess”函数添加到结构中，该函数将处理来自 Django 的响应。

```
 success: function(data) {
        alert(data);
    } 
```

您必须添加到`$.ajax`call 的字典参数：

```
$.ajax({
    type:"POST",
    url:"/company/sort/",
    data: {
            'type': type,
            'page': page
    },
    success: function(data) {
        alert(data);
    }
}); 
```

**更新**

如果您从脚本获得的答案不是 URL，而是页面的新内容，则可以使用将其加载到当前页面

```
$('body').replaceWith(data); 
```

或者

```
$('body').html(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:26:22.640

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

包含一些很好的例子。

我个人更喜欢：

```
$.post('url', {'data':'data'}, function(response){
    console.log(response);
}); 
```

您可能还需要形成来自 django 的回复。这是我经常使用的一个片段：

```
import json

def json_response(result, data):
    response = json.dumps({"result" : result, "data" : data })
    return HttpResponse(response, mimetype="application/json")

def my_view(request):
    json_response(True, 'Right away Michael') 
```

# ravendb - Ravendb“在哪里”查询未按预期工作

> ID：14135182
> 
> 赞同：0
> 
> 时间：2013-01-03T08:14:29.347
> 
> 标签：ravendb

我不明白为什么 Q2 不会返回结果，如果 Q1 会。我错过了什么吗？

```
var q1 = session.Query<Comp>().Where(x => x.ptype=="RTC"||x.ptype=="FLT"); //works

var q2 = session.Query<Comp>().Where(x => x.ptype.In(new string[] {"RTC","FLT"})); //does not 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:40:22.473

发生这种情况是因为我在 RavenHQ（使用 v1.0）上针对 db 使用 2.0 客户端。

# c++ - 将c++ dll粗略反汇编成机器码

> ID：14135184
> 
> 赞同：1
> 
> 时间：2013-01-03T08:14:30.603
> 
> 标签：c++, assembly, binary-data

我知道您不能拥有 C++ dll 并期望将其作为源代码，对吗？但同时，当我使用 DUMPBIN 将 C++ dll 还原为原始数据时，可以做一些事情来解释它，对吧？例如，我们知道大多数流行运算符的基本映射。

有没有一种工具可以将原始机器数据粗略地解释为看起来更像代码或指令的东西？问题是我没有足够的时间自己写它来从头开始！所以我正在寻找一个工具或东西来做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:20:56.083

你需要一个**反汇编器**，它是一个接受二进制对象（如编译文件、库甚至可执行文件）并尝试将其内容重新解释为汇编的工具。

使用这样的工具，您通常可以检索内部符号的名称（当然，除非二进制图像被剥离，但动态喜欢的库并非如此）。

对于 C++ 来说，这也有点困难，因为 name [mangling](http://en.wikipedia.org/wiki/Name_mangling)。

尝试看一下[Objdump](http://en.wikipedia.org/wiki/Objdump)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:09:00.727

在我看来，最好的反汇编程序是 IDA（交互式反汇编程序）。它有点贵，因为它是针对专业用途的，但是您可以尝试免费软件（旧）版本：

[http://www.hex-rays.com/products/ida/support/download_freeware.shtml](http://www.hex-rays.com/products/ida/support/download_freeware.shtml)

[Hex-Rays Decompiler](http://www.hex-rays.com/products/decompiler/index.shtml) （IDA的一个插件）可以从反汇编中生成 C 伪代码，在许多情况下可以再次重新编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:48:30.877

你可以反汇编 DUMPBIN /DISASS 的代码部分——但是如果你想要像 C++ 这样的“代码”，那么你需要一个反编译器。然而，它们远不是很好，而且经常会产生非常不可读的代码——是的，你可以将它输入到编译器中，但这几乎不是我所说的“人类可读”。

# python - 使用python在html中查找特定标签的父级的问题

> ID：14135190
> 
> 赞同：1
> 
> 时间：2013-01-03T08:15:07.717
> 
> 标签：python, html, html-parsing, beautifulsoup, findall

我正在尝试使用下面提到的代码获取特定标签的父元素：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup
from itertools import islice
page1= urllib2.urlopen('http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&typesmartphone=se-android&typesmartphone=se-apple&typesmartphone=se-bada&typesmartphone=se-rim-blackberry&typesmartphone=se-windows&p=0').read()
soup1 = BeautifulSoup(page1)
price_parent = soup1.findParents('div')
print price_parent 
```

**问题：**运行此代码后我得到的输出返回 Null 数组`[]`，如果我使用`findParent`而不是父母，那么它也返回`None`值。

我的实际问题类似于这个[BeautifulSoup - findAll not within certain tag](https://stackoverflow.com/questions/10777250/beautifulsoup-findall-not-within-certain-tag)

为了解决我的实际问题，我需要获得我正在获得`None`价值的元素的父母，如上所述。

请帮助我解决这个问题并原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:24:15.547

`.findParents()`不做你认为它做的事。*它找到与搜索匹配的当前元素*的父元素。您正在尝试查找已经是顶级元素的页面元素的父级。

如果你有这样的结构：

```
<html>
    <body>
        <div class="foo">
            <span id="bar">Some text</span>
        </div>
    </body>
</html> 
```

`soup`整个结构的 BeautifulSoup 变量在哪里，你可以找到`span`：

```
spanelement = soup.find('span', id='bar') 
```

然后调用`.findParent('div')`会返回一个结果，即`<div class="foo">`元素。

因此，调用`.findParents()`顶级元素将*始终*返回一个空结果，*没有父母*。在确实有父元素的东西上调用它。

# javascript - 将类添加到过渡元素触发太快

> ID：14135192
> 
> 赞同：0
> 
> 时间：2013-01-03T08:15:14.257
> 
> 标签：javascript, css, css-transitions

我正在尝试为页面上的某些元素设置动画。我需要动画的属性之一是`bottom`，但是，我还需要能够在不动画的情况下重新定位元素，这就是为什么我向它添加了一个单独的类：`.anim`

```
.slideshow_footer {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    color: #fff
}
.slideshow_footer.anim {
    -webkit-transition:bottom 0.3s ease-out;
    -moz-transition:bottom 0.3s ease-out;
    -o-transition:bottom 0.3s ease-out;
    -ms-transition:bottom 0.3s ease-out;
    transition:bottom 0.3s ease-out;
} 
```

在我的 Javascript 中，我执行以下操作：

```
var footer = $('#footer');
// do some magic with the footer
// ...
// ...
setCss(footer, 'bottom', -100); // position it so it's hidden, this should be immediate
addClass(footer, 'anim'); // add the animation class
setCss(footer, 'bottom', ); // animate the footer sliding in 
```

*请注意，我没有使用 jQuery 或任何东西，它是一个内部 javascript 框架。*

我找到了解决问题的解决方法，但它非常难看：

```
var footer = $('#footer');
// do some magic with the footer
// ...
// ...
setCss(footer, 'bottom', -100); // position it so it's hidden, this should be immediate
addClass(footer, 'anim'); // add the animation class
setTimeout(function() {
    setCss(footer, 'bottom', ); // animate the footer sliding in
}, 0); // even no timeout works... 
```

谁能向我解释发生了什么以及如何最好地解决这个问题？可能更改 addClass 和 setCss 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:43:20.417

回答我自己的问题：

使用 timeOut 是正确的方法。

*在整个 JavaScript 完成之前，浏览器不会更新可见的 HTML。如果是这样，在“底部”之后设置“右”会移动元素两次。从浏览器的角度来看，元素立即获得了“anim”和bottom 0。 setTimeout 和0 timeout 告诉浏览器尽快执行代码，而不是在同一轮JavaScript 中。*

*该解决方法实际上被许多人采用为运行代码的“异步”方式*

# python - python：类对象的多维排序

> ID：14135195
> 
> 赞同：1
> 
> 时间：2013-01-03T08:15:21.587
> 
> 标签：python, sorting, object

有没有一种方法可以先对 x 的列表进行排序，然后再对 y 和 z 进行排序。我不确定我的代码是否会这样做：（ch 是具有属性 left_edge 的对象）

```
ch.sort(cmp=lambda x,y: cmp(x.left_edge[0], y.left_edge[0]))
ch.sort(cmp=lambda x,y: cmp(x.left_edge[1], y.left_edge[1]))
ch.sort(cmp=lambda x,y: cmp(x.left_edge[2], y.left_edge[2])) 
```

简单的例子：

```
unsorted
(1,1,2),(2,1,1),(1,1,3),(2,1,2)
sorted
(1,1,2),(1,1,3),(2,1,1),(2,1,2) 
```

但我需要排序的对象......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T08:16:47.303

这正是默认`tuple`比较器的工作方式：

```
>>> l = [(1, 1, 2), (2, 1, 1), (1, 1, 3), (2, 1, 2)]
>>> sorted(l)
[(1, 1, 2), (1, 1, 3), (2, 1, 1), (2, 1, 2)] 
```

[请参阅文档](http://docs.python.org/2/reference/expressions.html#not-in)中的比较描述：

> 相同类型的对象的比较取决于类型：
> 
> *   元组和列表使用对应元素的比较按字典顺序进行比较。这意味着要比较相等，每个元素必须比较相等，并且两个序列必须是相同的类型并且具有相同的长度。
>     
>     
>     
>     **如果不相等，则序列的排序与其第一个不同的元素相同**。例如， cmp([1,2,x], [1,2,y]) 返回与 cmp(x,y) 相同的结果。如果对应的元素不存在，则先排序较短的序列（例如，[1,2] < [1,2,3]）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:42:50.610

你应该避免使用: 如果你想升级到 Python 3.x的`cmp`参数，你会发现它不再存在。`sort`请改用该`key`参数：

```
ch.sort(key=lambda x: x.left_edge) 
```

如果看起来该`left_edge`属性只是一个列表或元组，那么只需将其直接用作键值，它应该都能正常工作。如果它是可下标但不比较的不寻常的东西，则构建元组：

```
ch.sort(key=lambda x: (x.left_edge[0],x.left_edge[1],x.left_edge[2])) 
```

# spring - Spring EhCache 抽象通用 DAO

> ID：14135202
> 
> 赞同：1
> 
> 时间：2013-01-03T08:15:51.353
> 
> 标签：spring, dao, ehcache

我使用 spring 使用 ehcache 创建了一个通用 dao，但我想知道如何使用 @Cacheable、@CachePut。

通用DAO.java

```
/**
 * 
 */
package com.breeze.bis.core.service.jdbcTemplate;

import java.sql.SQLException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.log4j.Logger;
import org.checkthread.annotations.ThreadSafe;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.jdbc.core.BatchPreparedStatementSetter;
import org.springframework.jdbc.core.CallableStatementCreator;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.PreparedStatementCallback;
import org.springframework.jdbc.core.PreparedStatementCreator;
import org.springframework.jdbc.core.SqlParameter;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Repository;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Isolation;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.dao.DataAccessException;
/**
 * @author peter.wong
 *
 */
@Repository
@Qualifier("genericDaoImpl")
@Transactional(propagation=Propagation.REQUIRED, isolation=Isolation.DEFAULT, rollbackFor={Exception.class, SQLException.class, DataAccessException.class}, timeout=9999)
public class GenericDAOImpl implements GenericDAO {

    private JdbcTemplate jdbcDao;

    private static final Logger logger = Logger.getLogger(GenericDAOImpl.class);

    private static final int FETCH_SIZE = 500;
    private static final int MAX_ROW = 500;
    // =========================================================================================================

    /**
     * 
     */
    public GenericDAOImpl() {

    }

    /**
     * @return the jdbcDao
     */
    public JdbcTemplate getJdbcDao() {
        return jdbcDao;
    }

    /**
     * @param jdbcDao the jdbcDao to set
     */
    public void setJdbcDao(JdbcTemplate jdbcDao) {
        this.jdbcDao = jdbcDao;
    }

    /**
     * 
     */
    public void initJDBC() {
        jdbcDao.setFetchSize(FETCH_SIZE);
        jdbcDao.setMaxRows(MAX_ROW);
    }

    /* (non-Javadoc)
     * @see com.breeze.bis.core.service.jdbcTemplate.GenericDAO#createObject(java.lang.String, java.lang.Object)
     */
    @Override
    @CachePut(value = "genericDao")
    @SuppressWarnings({ "rawtypes", "unchecked" })
    @ThreadSafe
    public int insert(String sql,  Map<Integer, Object> paramMap) {

        boolean hasResult = true, hasKey = true;
        Integer id = -1;

        IStatementExecutor stmtExecutor = new UpdateStatementExecutor(hasKey);
        IExtractor integerExtr = new IntegerExtractor(null, hasResult);

        IDatabaseExecutor executor = new GenericDatabaseExecutor(stmtExecutor, integerExtr);
        PreparedStatementCreator stmtCreator = new GenericPreparedStatementCreator(hasKey, sql, paramMap);

        PreparedStatementCallback stmtCallback = new GenericPreparedStatementCallback(executor);

        try {
            id = this.jdbcDao.execute(stmtCreator, stmtCallback);   
        } catch (DataAccessException exp) {
            logger.error(exp.getMessage());
        }

        return id;
    }

    /* (non-Javadoc)
     * @see com.breeze.bis.core.service.jdbcTemplate.GenericDAO#update(com.breeze.bis.core.service.jdbcTemplate.GenericPreparedStatementCreator)
     */
    @Override
    @CachePut(value = "genericDao")
    @ThreadSafe
    public int update(PreparedStatementCreator stmt) {
        int num = -1;

        try {
            num = this.jdbcDao.update(stmt);
        } catch (DataAccessException exp) {
            logger.error(exp.getMessage());
        }

        return num;
    }

    /* (non-Javadoc)
     * @see com.breeze.bis.core.service.jdbcTemplate.GenericDAO#batchUpdate(java.lang.String, java.util.List)
     */
    @Override
    @CachePut(value = "genericDao")
    @ThreadSafe
    public int[] batchUpdate(String sql, BatchPreparedStatementSetter stmtSetter) {

        int num[] = null;

        try {
            num = this.jdbcDao.batchUpdate(sql, stmtSetter);
        } catch (DataAccessException exp) {
            logger.error(exp.getMessage());
        }

        return num;
    }

    /* (non-Javadoc)
     * @see com.breeze.bis.core.service.jdbcTemplate.GenericDAO#callProcedure()
     */
    @Override
    @Cacheable(value = "genericDao")
    @ThreadSafe
    public Map<String, Object> callProcedure(CallableStatementCreator stmt, List<SqlParameter> paramList) {
        Map<String, Object> result = null;

        try {
            result = this.jdbcDao.call(stmt, paramList);
        } catch (DataAccessException exp) {
            logger.error(exp.getMessage());
        }

        return result;

    }

} 
```

这个GenericDAO适用于很多表，这里的缓存策略如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:11:30.450

在实施缓存策略之前先测量。

# backbone.js-collections - 更改的集合值未反映在主干.js 中

> ID：14135203
> 
> 赞同：1
> 
> 时间：2013-01-03T08:15:51.797
> 
> 标签：backbone.js-collections

当我单击提交按钮时，尽管每次单击复选框更改事件都会触发，但我看不到对集合所做的更改

```
//Model

    Wine = Backbone.Model.extend({
        // Toggle the `IsSelected` state of this todo item.
        toggle: function () {
            debugger;
            this.save({
                IsSelected: !this.get('IsSelected')
            });
        }

    });
//Collection

    WineCollection = Backbone.Collection.extend({
        model: Wine,
        url: "http://localhost/Industries/data/data.json"

    }); 
```

//这是一个列表视图集合和单个列表项，在这里我们绑定复选框的单击事件，并在此处的提交按钮中检查更改的值

```
 WineListView = Backbone.View.extend({
        el: $('#wineList'),
        initialize: function () {
            alert($('#divBtnSubmit'));
            wineList.bind("reset", this.render, this);
        },
        render: function () {
            wineList.each(function (wine) {
                $(this.el).append(new WineListItemView({ model: wine }).render().el);
            }, this);
            return this;
        }
    });
//Submit button

    WinedivBtnSubmit = Backbone.View.extend({
        el: $('#divBtnSubmit'),
        initialize: function () {
            this.render();
        },
        render: function () {

            // Load the compiled HTML into the Backbone "el"
            var template = _.template($("#save-div").html(), {});
            this.$el.append(template);
        },
        events: {
            "click #divBtnSubmit1": "saveWine"
        },
        saveWine: function () {
            debugger;
            wineList.each(function (wine) {
                alert(wine.get('ID') + '<<>>' + wine.get('IsSelected'));
            });
            return false;
            // alert(this.modelmodels);
        }
    });
//Indiviual list item

     WineListItemView = Backbone.View.extend({
            tagName: "li",
            template: _.template($('#wine-list-item').html()),
            initialize: function () {
            },
            events:
            {
                'click .toggle': 'toggleVisible'
            },
            toggleVisible: function () {
                this.model.toggle();
            },
            render: function (eventName) {
                $(this.el).html(this.template(this.model.toJSON()));
                return this;
            }
        });

    var AppRouter = Backbone.Router.extend({
        routes: {
            "": "list",
            "wines/:id": "wineDetails"
        },
        initialize: function () {

        },

        list: function () {
           // this.wineList = new WineCollection();
            this.wineListView = new WineListView();
            this.btn = new WinedivBtnSubmit();
          //  wineList.fetch();
        },

        wineDetails: function (id) {
            this.wine = this.wineList.get(id);
            this.wineView = new WineView({ model: this.wine });
            this.wineView.render();
        }
    });

        wineList = new WineCollection();
        wineList.fetch();
    // on every click of checkbox this event is fired
        wineList.bind("change", function () {
            alert('list changed');
        });
        var app = new AppRouter();
        Backbone.history.start(); 
```

# android - 片段 getItem 方法仅在下载完成时返回

> ID：14135206
> 
> 赞同：1
> 
> 时间：2013-01-03T08:16:03.227
> 
> 标签：android, android-asynctask, fragment

我有`fragments`，`View pager`这是它的`getItem`方法：

```
 @Override
public Fragment getItem(int position) {

    fragmentPosition = position;
    Log.e("PageAdapter", "Creating fragment at: " + position);
    DefinedValues.thumbnailInfo.put("activity", DefinedValues.images);
    DefinedValues.thumbnailInfo.put("type", "info");
    DefinedValues.thumbnailInfo.put("page", position+ 1 + "");

    String request = Json.stringToJson(DefinedValues.thumbnailInfo);
    DefinedValues.thumbnailInfo.clear();

    StringAsyncRetriever net = new StringAsyncRetriever();
    net.setListener(MyPagerAdapter.this);
    net.execute(request, DefinedValues.GET_DATA);
    Log.d(TAG, "got item @ " + position);

    myFragment = new fragment1();
    myFragment.position = position;
    return myFragment;
    //return null;      

} 
```

是否可以仅在`asyncTask`完成而不冻结线程的情况下返回？

# ios - 如何获取iOS设备屏幕的高度和宽度

> ID：14135207
> 
> 赞同：22
> 
> 时间：2013-01-03T08:16:14.373
> 
> 标签：ios, objective-c, uiscreen

> **可能重复：**
> [iPhone/iPad：如何以编程方式获取屏幕宽度？](https://stackoverflow.com/questions/3655104/iphone-ipad-how-to-get-screen-width-programmatically)
> [如何获得与方向相关的屏幕高度和宽度？](https://stackoverflow.com/questions/7905432/how-to-get-orientation-dependent-height-and-width-of-the-screen)

考虑到各种 iOS 设备和方向，获取当前屏幕分辨率（包括高度和宽度）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-01-03T08:21:37.897

[`UIScreen`](https://developer.apple.com/library/ios/#documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html)是你的朋友吗？

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T08:22:59.090

```
CGRect screenBounds = [[UIScreen mainScreen] bounds]; 
```

这将为您提供整个屏幕的分辨率（以点为单位），因此对于 iPhone，它通常是 320x480。即使 iPhone4 的屏幕尺寸更大，iOS 仍然返回 320x480 而不是 640x960。这主要是因为较旧的应用程序中断。

希望对你有帮助。。

# android - AsyncTask 使用

> ID：14135209
> 
> 赞同：3
> 
> 时间：2013-01-03T08:16:21.643
> 
> 标签：android, android-asynctask

我对使用`AsyncTask`Android sdk 提供的类有疑问。我正在我的代码中从活动中开始一项任务，该活动的工作是定期发送电子邮件（根据指定的时间）。我在中重新启动任务`onPostExecute()`。它确实会定期发送电子邮件，但一段时间后电子邮件停止发送。按后退键有影响吗？

我正在浏览[AsyncTask](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)上的以下链接，发现`AsyncTask`在活动的方向改变或失焦后需要刷新。我需要单独处理吗？`context`每次`activity`失焦或其方向发生变化时，我是否需要刷新？我正在根据上下文进行某些数据库操作。

这是我的`AsyncTask`代码：

```
public class SendEmailTask extends AsyncTask<String, Void, String> {
    private static final String LOG_TAG = "EmailTask";
    private static final int MESSAGE_SENT = StringConstants.CONSTANT_YES_FLAG;
    private Context context;

    public SendEmailTask(Context context) {
        this.context = context;
    }

    @Override
    protected String doInBackground(String... time) {
        // String message = "Message sent at ";
        try{
            //DB operations
            Validator validator = new Validator(context);
            int emailInterval = validator.validForSendingEmail(settingsMap);

            String emailId = settingsMap.get(DBSetting.COLUMN_EMAILID);
            String emailPwd = settingsMap.get(DBSetting.COLUMN_EMAIL_PWD);

            if (emailId != null && emailPwd != null && emailInterval > 0) {
                Thread.sleep((Integer.valueOf(emailInterval) * 60000));

                // TODO: formatting of email body
                DALLog dalLog = DALLog.getDALLogInstance();
                dalLog.init(context);

                GMailSender sender = new GMailSender(emailId, emailPwd);
                sender.sendMail("Mail From Auto responder",
                        result, emailId,
                        emailId);

                dalLog.close();
            }
            return null;
        }
        catch (NumberFormatException e) {
            e.printStackTrace();
            Log.d(LOG_TAG, e.getMessage());
        }
        catch (InterruptedException e) {
            e.printStackTrace();
            Log.d(LOG_TAG, e.getMessage());
        }
        catch (Exception e) {
            Log.d(LOG_TAG, e.getMessage());
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        //DB operations
        Validator validator = new Validator(context);
        int emailInterval = validator.validForSendingEmail(settingsMap);

        // Start EmailTask thread if not started already
        SendEmailTask emailTask = new SendEmailTask(context);
        if (emailTask.getStatus() != AsyncTask.Status.RUNNING) {
            emailTask.execute(new String[]{});
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:22:09.410

当您启动使用 Activity 上下文的任务时，该任务将在与 Activity 相同的生命周期中运行。当 Activity 被销毁时，它的上下文将随之丢失，如果没有有效的上下文，任务将失败。

如果您想要一个在应用程序的生命周期内可用的上下文，您应该使用`getApplicationContext()` 不需要活动活动的上下文（因此不应该用于修改活动）。

不正确的使用也可能导致垃圾收集问题 - 对象漂浮在周围。

正如您问题的评论部分中提到的那样，如果您希望能够在应用程序不在前台时运行 AsyncTask（即，在不需要用户输入的情况下在后台运行），那么最好的前进方式, 是**创建一个**AsyncTask 可以在其中运行的服务。

Service 将有自己的上下文供您使用，如果您希望两者之间直接通信，您可以将 Service 绑定到您的 Activity。

有关服务的更多信息，请参阅[这篇 Android 开发者文章](http://developer.android.com/guide/components/services.html)，其中概述了它们的使用

# web - 网页仅在点击刷新时出现

> ID：14135214
> 
> 赞同：1
> 
> 时间：2013-01-03T08:17:00.720
> 
> 标签：web, error-handling, refresh, lamp

我的网站[www.999designs.in](http://999designs.in)不会立即打开，它会显示错误，但是一旦刷新它就可以正常工作！
我已经将它托管在一个`LAMP`环境中，它是否需要任何特定的服务器设置？

首先它给出了一个错误“找不到您要查找的页面”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:54:34.780

我认为问题的原因是您使用错误的图像文件名初始化滑块。看看 function.js 第 240 行：

```
$(['img/woman1.png','img/woman2.png','img/woman3.png']).preload(); 
```

如果您重新加载“banner-slide-woman-1”的图像，则称为*woman.png*而不是*woman1.png*。

HTH安迪

# iphone - IOSurfaces - 视频中的伪影，无法抓取视频表面

> ID：14135215
> 
> 赞同：4
> 
> 时间：2013-01-03T08:17:14.217
> 
> 标签：iphone, objective-c, ios, ios4, iphone-privateapi

这是一个两部分的问题。我有以下代码工作，它抓取当前显示表面并从表​​面创建视频（一切都在后台发生）。

```
for(int i=0;i<100;i++){
        IOMobileFramebufferConnection connect;
        kern_return_t result;
        IOSurfaceRef screenSurface = NULL;

        io_service_t framebufferService = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("AppleH1CLCD"));
        if(!framebufferService)
            framebufferService = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("AppleM2CLCD"));
        if(!framebufferService)
            framebufferService = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("AppleCLCD"));

        result = IOMobileFramebufferOpen(framebufferService, mach_task_self(), 0, &connect);

        result = IOMobileFramebufferGetLayerDefaultSurface(connect, 0, &screenSurface);

        uint32_t aseed;
        IOSurfaceLock(screenSurface, kIOSurfaceLockReadOnly, &aseed);
        uint32_t width = IOSurfaceGetWidth(screenSurface);
        uint32_t height = IOSurfaceGetHeight(screenSurface);
        m_width = width;
        m_height = height;
        CFMutableDictionaryRef dict;
        int pitch = width*4, size = width*height*4;
        int bPE=4;
        char pixelFormat[4] = {'A','R','G','B'};
        dict = CFDictionaryCreateMutable(kCFAllocatorDefault, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
        CFDictionarySetValue(dict, kIOSurfaceIsGlobal, kCFBooleanTrue);
        CFDictionarySetValue(dict, kIOSurfaceBytesPerRow, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &pitch));
        CFDictionarySetValue(dict, kIOSurfaceBytesPerElement, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &bPE));
        CFDictionarySetValue(dict, kIOSurfaceWidth, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &width));
        CFDictionarySetValue(dict, kIOSurfaceHeight, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &height));
        CFDictionarySetValue(dict, kIOSurfacePixelFormat, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, pixelFormat));
        CFDictionarySetValue(dict, kIOSurfaceAllocSize, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &size));

        IOSurfaceRef destSurf = IOSurfaceCreate(dict);

        IOSurfaceAcceleratorRef outAcc;
        IOSurfaceAcceleratorCreate(NULL, 0, &outAcc);

        IOSurfaceAcceleratorTransferSurface(outAcc, screenSurface, destSurf, dict, NULL);

        IOSurfaceUnlock(screenSurface, kIOSurfaceLockReadOnly, &aseed);
        CFRelease(outAcc);

        // MOST RELEVANT PART OF CODE

        CVPixelBufferCreateWithBytes(NULL, width, height, kCVPixelFormatType_32BGRA, IOSurfaceGetBaseAddress(destSurf), IOSurfaceGetBytesPerRow(destSurf), NULL, NULL, NULL, &sampleBuffer);

        CMTime frameTime = CMTimeMake(frameCount, (int32_t)5);

        [adaptor appendPixelBuffer:sampleBuffer withPresentationTime:frameTime];

        CFRelease(sampleBuffer);
        CFRelease(destSurf);
        frameCount++;
    } 
```

PS：最后4-5行代码最相关（如果需要过滤）。

1) 制作的视频有人工制品。我以前做过视频，以前也遇到过这样的问题。我想这可能有两个原因：
i。传递给适配器的 PixelBuffer 在处理（编码 + 写入）完成之前被修改或释放。这可能是由于异步调用。但我不确定这本身是否是问题以及如何解决它。
ii. 传递的时间戳不准确（例如，具有相同时间戳的 2 帧或具有比前一帧更低时间戳的帧）。我注销了时间戳值，这似乎不是问题。

2) 上面的代码在播放视频或玩游戏时无法抓取表面。我得到的只是输出中的一个空白屏幕。这可能是由于在这种情况下发生的硬件加速解码。

对问题的两个部分中的任何一个的任何输入都将非常有帮助。此外，如果您有任何关于 IOSurfaces 的一般阅读链接，请在此处发布。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T06:13:28.687

我做了一些实验并得出结论，即使在内容传输完成之前，从中复制内容的屏幕表面也在发生变化（调用 IOSurfaceAcceleratorTransferSurface() ）。我正在使用一个锁（尝试了异步和只读），但它被 iOS 覆盖了。我将锁定/解锁部分之间的代码更改为以下最小值：

```
IOSurfaceLock(screenSurface, kIOSurfaceLockReadOnly, &aseed);
aseed1 = IOSurfaceGetSeed(screenSurface);
IOSurfaceAcceleratorTransferSurface(outAcc, screenSurface, destSurf, dict, NULL);
aseed2 = IOSurfaceGetSeed(screenSurface);
IOSurfaceUnlock(screenSurface, kIOSurfaceLockReadOnly, &aseed); 
```

GetSeed 函数告诉表面的内容是否已经改变。而且，我记录了一个计数，指示种子更改的帧数。计数非零。所以，下面的代码解决了这个问题：

```
if(aseed1 != aseed2){
//Release the created surface
continue; //Do not use this surface/frame since it has artefacts
} 
```

然而，这确实会影响性能，因为许多框架/表面由于伪影而被拒绝。对此的任何添加/更正都会有所帮助。

# angularjs - Angular JS 视图没有正确更新

> ID：14135216
> 
> 赞同：17
> 
> 时间：2013-01-03T08:17:18.063
> 
> 标签：angularjs, javascript-framework

我有以下动作

**ng-click**在我的视图中**->**这又调用了一个显示 jQuery Qtip的**jQuery ajax函数****->**在 Qtip 弹出窗口中我有一个**ng-click**元素-> 它执行**$http 发布**并有一些**回调来更新 $scope价值观**。

所以所有这些事情都在正常发生。但是根据最后阶段回调中所做的更改，更新并没有反映在视图中。

在我看来，我有一个“ng-mousemove”功能。因此，每当我移动鼠标时，视图中的更新都会反映出来。

我在这里做错了什么？是因为有角度和无角度之间的过渡吗？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-03T08:42:09.943

正如[文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24eval)解释的那样：

> $apply() 用于从 Angular 框架外部执行 Angular 表达式。（例如来自浏览器 DOM 事件、setTimeout、XHR 或第三方库）。因为我们正在调用 Angular 框架，所以我们需要执行适当的异常处理范围生命周期，执行 watch。

所以如果你有一个**像**

```
$('#myDiv').on('click', function() {
  // do stuff
  $scope.$apply();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T08:31:24.993

你必须告诉 angular Js 有些东西已经改变了`$scope.$apply()`。

这是一个很好的博客为什么：[http ://www.yearofmoo.com/2012/10/more-angularjs-magic-to-supercharge-your-webapp.html#apply-digest-and-phase](http://www.yearofmoo.com/2012/10/more-angularjs-magic-to-supercharge-your-webapp.html#apply-digest-and-phase)

# php - 提交空表单输入字段

> ID：14135217
> 
> 赞同：0
> 
> 时间：2013-01-03T08:17:18.573
> 
> 标签：php, input

我有几个输入字段，我希望它在只有一个字段具有输入值而其他字段为空（更新用户数据）时提交。我现在使用 isset() 工作，但这仅在填写每个字段时发送表单：

```
if (isset
   ($_POST['submit']) AND 
   ($_POST['firstname']) AND 
   ($_POST['lastname']) AND 
   ($_POST['address']) AND 
   ($_POST['ZIP']) AND 
   ($_POST['phonenumber']) AND 
   ($_POST['mail']) AND 
   ($_POST['group'])
) 
```

稍后我检查邮件模板（另一个文件）是否有值以及是否在邮件中显示它：

```
{if !empty($firstname)}{translate text='First Name'}: {$firstname|escape} {/if} 
```

我的想法可以吗，还是有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:23:34.753

第一个**if**语句与您的要求相冲突；您要求使用**AND**操作填写所有字段 - 使用**OR**，它将适用于任何单个字段值。

正如马特推荐的那样，应该/也可以通过使用 javascript 在页面本身上执行验证。

为确保只设置一个字段，请执行以下操作，您可以计算 _POST 中的条目数

```
if(count($_POST) == 1 AND 
   (isset($_POST['submit']) OR 
    isset($_POST['firstname']) OR 
    isset($_POST['lastname']) OR 
    isset($_POST['address']) OR 
    isset($_POST['ZIP']) OR 
    isset($_POST['phonenumber']) OR 
    isset($_POST['mail']) OR 
    isset($_POST['group'])
   )) 
```

无论哪种方式，这都不是一种非常优雅的方式 - 但它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:20:24.837

除了服务器端检查之外，一个建议是在表单上使用`javascript`和您的功能。`onSubmit`使用它，您可以检查所有字段，并在将其提交到服务器之前提醒用户填写一些字段。

在 javascript 函数中检查所有输入是否正确，如果数据全部正确填写，则允许将数据发送到服务器，或者弹出一个警报，说明在提交之前还需要做什么。

严格执行服务器端检查将需要服务器请求每次都检查输入，而不是让客户端检查它，并且只有在一切正确时才提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:24:36.110

假设您想在至少有一个字段已填写的情况下发送表单，您可以使用以下 if 语句：

```
if(count($_POST) > 1) 
```

这允许您提交表单并填写至少一个字段，但您也可以填写更多字段。

如果您只想在填写了一个字段时发送表单，您可以将上述 if 语句更改为以下内容：

```
if(count($_POST) == 2) 
```

这允许您只填写一个字段。我使用“== 2”的原因是因为提交按钮也是将被发送的东西。

如果要允许所有字段为空，可以使用以下 if 语句：

```
if(count($_POST) > 0) 
```

这将允许您提交按钮并将所有其他字段留空。

之所以可行，是因为 $_POST 是一个预定义的数组变量。

为了确保用户只使用您希望他们使用的字段并且仍然保持代码干净，您可以使用数组。

请执行下列操作：

```
$allowed_fields = array('firstname','lastname','address','ZIP','phonenumber','mail','group'); 
```

然后只需将以下内容添加到您的 if 语句中：

```
if(count($_POST) == 2 AND in_array($allowed_fields, $_POST)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T08:24:42.140

如果您只需要设置为 required 的字段中的一个值（如果可能，请使用 javascript，或者 HTML5 有一个`required`属性），只需忽略其他字段中的其他值：

```
<?php
     if ( isset( $_POST['submit'] ) ) {
         $wanted_value = addslashes( strip_tags( $_POST['input_name'] ) ); 
         // preventing from sql injection
         // ignore other values
         // and start manipulating it
     }
?> 
```

# java - 无法将 JDBC 连接到 SQL 服务器？

> ID：14135219
> 
> 赞同：-1
> 
> 时间：2013-01-03T08:17:25.013
> 
> 标签：java, sql-server, database, jdbc

我正在尝试连接到我在 SQL sever 2008 中创建的本地数据库，但我已经尝试了所有方法，但出现了同样的错误，我在数据库资源管理器中连接，但需要从我的应用程序连接到数据库以注册页面和登录。这是我的错误：

```
 #
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (classFileParser.cpp:3470), pid=5644, tid=5492
#  Error: ShouldNotReachHere()
#
# JRE version: 7.0-b147
# Java VM: Java HotSpot(TM) 64-Bit Server VM (21.0-b17 mixed mode windows-amd64 compressed oops)
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Users\christiej\workspace\MainActivity\hs_err_pid5644.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# 
```

这是我的代码：

```
 public class Example
{
   public static void main (String[] args) throws SQLException, ClassNotFoundException{

   Class.forName("com.sqlserver.jdbc.Driver"); // Setup the connection with the DB

   Connection connect = DriverManager.getConnection("jdbc:sqlserver://192.168.0.13:1433/Risk_ProfilingV2","sa","Dsolve01#");  

 // Statements allow to issue SQL queries to the database
    java.sql.Statement statement = connect.createStatement();

 // Result set get the result of the SQL query
 ResultSet resultSet = null;
try {
    resultSet = statement.executeQuery("select * from User_Table");
} catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

     while (resultSet.next()) {  //retrieve data
         String data = resultSet.getString("User_Name");

      }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:46:45.377

这个类似的问题有一个有用的答案： [Java运行时环境的致命错误](https://stackoverflow.com/questions/2543106/fatal-error-by-java-runtime-environment)

指向此页面： [http ://dtmilano.blogspot.com/2008/11/android-testing-on-android-platform.html](http://dtmilano.blogspot.com/2008/11/android-testing-on-android-platform.html)

# logging - 将 Jersey ContainerRequest 和 ContainerResponse 数据日志一起推送到数据存储

> ID：14135221
> 
> 赞同：2
> 
> 时间：2013-01-03T08:17:35.213
> 
> 标签：logging, filter, jersey

我们目前正在使用`Jersey`OAuth 过滤器。要求是我们需要将数据报（以及任何适用的异常）一起推`ContainerRequest`送到提供异步工作`ContainerResponse`的 API 的第三方数据存储。`push`我已经阅读了`ContainerRequestFilters`和`ContainerResponseFilters`接口和`LoggingFilter`（它使用 a`Logger`来写入数据）。我不想分别调用两次`push`来发送请求和响应数据报，而是想将其组合成一个调用。我看到`ContainerResponseFilters`两者都需要`ContainerRequest`和`ContainerResponse`，因此实现该接口以将这些数据推送到一起是否可行且良好。即使 OAuth 过滤器抛出一些其他异常，这也会起作用吗？还有其他更好的选择吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-05T16:31:34.790

替别人回答，

AFAIK，没有直接的方法将请求和响应数据放在一起，因为`ContainerRequestFilters`实现处理`ContainerRequest`并读取输入流并且`ContainerResponseFilters`实现处理`ContainerResponse`对象。`filter`在实现方法中仍然可以访问请求标头`ContainerResponseFilters`，但不能访问实体。我不得不使用属性映射（似乎是可变的）作为临时映射来放置请求实体并在响应过滤器中检索它。它看起来像一个肮脏的黑客，但我没有找到任何其他方法。

# c# - 找不到 ObjectDataSource 'ObjectDataSource1' 的 TypeName 属性中指定的类型

> ID：14135223
> 
> 赞同：1
> 
> 时间：2013-01-03T08:17:38.070
> 
> 标签：c#, objectdatasource

我使用`VS2008`with `.Net Framework 3.5`，我从`File`-> `New`->创建了一个站点`Web Site`，我添加了一个母版页和默认内容页。我添加了对象`DetailsView`和`ObjectDataSource`. 要在 App_Code 文件夹中填充数据，我创建了三个类，db（连接到 db 并填充表、数据集和数据读取器等） Screen（模型类） ScreenDALC（数据访问层类） 请注意，文件后面的所有代码都不在任何特定命名空间

```
<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" 
AllowPaging="True" AutoGenerateRows="False" DataSourceID="ObjectDataSource1">
<Fields>
    <asp:BoundField DataField="ScreenID" HeaderText="ScreenID" 
    SortExpression="ScreenID" />
    <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
    <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" 
    ShowInsertButton="True" />
</Fields>
</asp:DetailsView>

<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
DataObjectTypeName="Screen" DeleteMethod="Delete" 
InsertMethod="Insert" OldValuesParameterFormatString="original_{0}" 
SelectMethod="GetScreen" TypeName="ScreenDALC" UpdateMethod="Update">
</asp:ObjectDataSource> 
```

当我运行应用程序时，它运行没有错误，我可以在表单上看到数据。但是当我打开带有 url 的页面时，`http://localhost/irfu/irfulabs/newcpanel/default.aspx`我会收到主题中的错误消息。

另请注意，我已经尝试过，我将整个项目放在命名空间中并收到相同的错误消息，我将所有文件放在一个文件夹中但仍然收到相同的错误消息。我还添加了 System.ComponentModel; 为所有方法添加签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:15:39.667

由于代码没有问题，在我的网络托管错误中设置应用程序文件夹和虚拟目录后，页面打开成功。

# windows-phone-7 - 需要windows phone 7中的ftp代码

> ID：14135227
> 
> 赞同：-3
> 
> 时间：2013-01-03T08:18:16.360
> 
> 标签：windows-phone-7, ftp, windows-phone-7.1, windows-phone-8

我正在开发一个`windows phone 7.1 application`，我需要将图像上传到一个`ftp client`。我已经创建了一个 ftp 客户端。我需要一个代码

1.  ftp地址
2.  ftp 用户名
3.  ftp密码

请帮助我，我刚刚进入服务器端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:01:38.183

查看此链接： [http](http://www.eldos.com/sbb/net-ftps.php) ://www.eldos.com/sbb/net-ftps.php 或者您可以移植 silverlight ftp 客户端： [http](http://silverlightftp.codeplex.com/) ://silverlightftp.codeplex.com/ 另外，请参阅此问题以获取一些有用的示例如果您不想使用第三方客户端，请编写代码： [Windows Phone 7 - 将文件上传到 FTP 服务器](https://stackoverflow.com/questions/8617150/windows-phone-7-upload-file-to-ftp-server)

# android - Linkify、ListView 和 ActionMode。常规文本不再可点击

> ID：14135228
> 
> 赞同：4
> 
> 时间：2013-01-03T08:18:20.817
> 
> 标签：android, android-listview, linkify, actionmode

所以我有一个显示随机文本的列表视图。textview 有时可能是常规文本，但也可以是 URL 等。我在 BaseAdapter 的代码中添加了以下行：

```
Linkify.addLinks(mHolder.content, Linkify.WEB_URLS); 
```

其中 mHolder 是 ViewHolder 的一个实例，用于加快 listView 的速度，内容是该 viewHolder 内的 TextView，我只愿意突出显示 Web Urls。

第一个问题，

由于添加了该行代码，一些只有常规文本（如“asdfg”）的项目现在在单击时不再突出显示。澄清一下，当我的意思是“突出显示”时，我只是指单击 listView 项目时发生的常规突出显示，无论是否提供了处理 onClick 事件的代码。

我知道这里的问题是那行代码，因为删除它会使 listView 上的所有项目在单击时突出显示。我试图通过这个[截图来描述这个](https://www.dropbox.com/s/2g2zqz6t1yucomn/No_Linkify_vs_Linkify.png)

第二个问题，

我在 listView 中添加了一个**MultiChoiceModeListener**来处理 ActionMode；但是，鉴于 textViews 中的链接现在是可点击的并且将启动浏览器，它们在 ActionMode 下不再正常运行，因为它们不关心我们是否处于 ActionMode 并仍然启动浏览器而不是按照里面的代码**onItemCheckedStateChanged**方法。

例如，在 ActionMode 中，用户单击的每个项目都将添加到名为**itemsChecked**的 ArrayList 中，该列表稍后将通过**onActionItemClicked**使用。但是，当使用 linkify 时，这不再可行，因为当用户单击具有 Web Url 作为文本的 ListView 项目时，应用程序将被发送到后台，因为调用浏览器来处理链接。

我的问题是**我可以做些什么来潜在地解决我的代码中的这些问题？**

我希望链接突出显示和可点击，但不以这个成本为代价。我应该使用 Linkify 以外的其他东西来突出显示链接并使其可点击吗？还是“可点击性”总是会干扰 ListView 项的常规行为。

仅供参考，我为 ActionMode 和 ListView 运行的代码如下：（**请记住，代码在不使用 Linkify 时可以正常工作**

```
private MultiChoiceModeListener modeListener = new MultiChoiceModeListener() {

     @SuppressLint("NewApi")
    @Override
        public void onItemCheckedStateChanged(ActionMode mode, int position,
                                              long id, boolean checked) {   
            String text =  listItems.get(position);
            if (checked) {
                itemsChecked.add(text);
            }
            else {
                int index = itemsChecked.indexOf(text);
                itemsChecked.remove(index);
            }               
        }

        @SuppressLint("NewApi")
        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            switch (item.getItemId()) {
                case 0:
                    mode.finish();
                    return true;
                case R.id.menu_merge:
                    mergeStrings();
                    mode.finish();
                    return true;                 
                case R.id.menu_star:
                    return false;                
                default:
                    return false;
            }
        }

        @SuppressLint("NewApi")
        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            inActionMode = true;
            itemsChecked = new ArrayList<String>();
            MenuInflater inflater = mode.getMenuInflater();
            inflater.inflate(R.menu.context_menu, menu);
            return true;
        }

        @SuppressLint("NewApi")
        @Override
        public void onDestroyActionMode(ActionMode mode) {
            inActionMode = false;
        }

        @SuppressLint("NewApi")
        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }
};

@SuppressLint("NewApi")
private void initViews () {

    listView = (ListView) findViewById(R.id.home_list_view);
    if (isOldAPI) {
        registerForContextMenu(listView);
    }
    else {
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
        listView.setMultiChoiceModeListener(modeListener);          
    }
    mAdapter = new MyAdapter(this, listItems, isOldAPI);                
    listView.setAdapter(mAdapter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:54:03.130

好的，所以在潜伏了一段时间后，我终于得到了答案，这要归功于[AOSP MMS 代码。](https://github.com/rascarlo/platform_packages_apps_mms/blob/jb-ras-mr1/res/layout/message_list_item_send.xml)感谢 Rascarlo 在 github 上发帖，尽管我认为我也可以通过 CM 和其他项目获得。

所以，问题是我在适配器中使用了这行代码：

```
Linkify.addLinks(mHolder.content, Linkify.WEB_URLS); 
```

当所有这些都可以更好地解决 textview 的 XML 时，通过使用预构建的属性[android:autoLink](http://developer.android.com/reference/android/widget/TextView.html#attr_android:autoLink)，必须将其设置为您喜欢的任何方案 - 在我的情况下是 web；和[android:linksClickable](http://developer.android.com/reference/android/widget/TextView.html#attr_android:linksClickable)，如果您希望点击突出显示订单项，则**必须**将其设置为**FALSE 。**将其设置为 true 也可以，通过 longclick 的上下文菜单可以工作，但它只是没有突出显示。请注意，通过将其设置为 false，您将不得不通过代码而不是通过点击来处理此类链接的打开。

这是我的 ListView 项的 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"    
android:orientation="horizontal" >

<TextView
    android:id="@+id/clip_list_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_margin="4dp"
    android:autoLink="web"
    android:linksClickable="false"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

希望对想不通的人有所帮助。

# git - 获取最新远程提交的 SHA1

> ID：14135233
> 
> 赞同：8
> 
> 时间：2013-01-03T08:18:30.750
> 
> 标签：git, bash

> **可能重复：**
> [git bash：如何检查是否有新的提交可用](https://stackoverflow.com/questions/6006759/git-bash-how-to-check-if-theres-a-new-commit-available)

我正在编写一个脚本，我想将最新的本地提交与最新的上游提交进行比较，以便告诉用户有要提取的提交。

最新的本地提交 SHA 显示为`git log | head -n 1 | awk '{print $2}'`.

是否有打印最新上游提交的 SHA1 的等价物？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-03T08:22:20.907

当地负责人：

```
$ git rev-parse HEAD 
```

遥控头：

```
$ git ls-remote <url> <refs> 
```

> 显示远程存储库中可用的引用以及关联的提交 ID。

例子：

```
$ cd ~/github/scrapy/scrapy
$ git rev-parse HEAD
9f003a73daec59a73c23a2214b1b8d15a4391a2f
$ git ls-remote git://github.com/scrapy/scrapy.git HEAD
9f003a73daec59a73c23a2214b1b8d15a4391a2f 
```

您可以使用 diff 来比较两者的输出：

```
$ diff <(git ls-remote git://github.com/scrapy/scrapy.git HEAD) \
       <(git rev-parse HEAD) 
```

# jqgrid - 在调整 jqgrid 表头大小时，表头会失真

> ID：14135235
> 
> 赞同：2
> 
> 时间：2013-01-03T08:18:40.757
> 
> 标签：jqgrid, resize

我在调整 jqgrid 标头大小时遇到​​问题。当我尝试调整它们的大小时，标题与实际的行数据不匹配（如下面的快照所示）。

我希望标题行与数据行一起调整大小。请帮忙。

我已将图片上传到以下链接：[Image-describing-shrink-issue](http://i46.tinypic.com/27xku8j.jpg)

谢谢，美联社

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T08:04:08.983

1.  要更改 jqgrid 中的列标题宽度，请使用以下代码

    `$('.ui-jqgrid-labels > th:eq(2)').css('width','400px');`

2.  要更改 jqgrid 中的列单元格宽度，请使用以下代码

    `$('#gridId tr').find("td:eq(2)").each(function(){$(this).css('width','400px');});`

[如何在 jqgrid](https://stackoverflow.com/a/21930205/1624035)代码示例中更改标题和列宽。

# c# - 屏幕截图（CopyFromScreen 不能完全工作）

> ID：14135239
> 
> 赞同：0
> 
> 时间：2013-01-03T08:18:56.010
> 
> 标签：c#, screen-capture

> **可能重复：**
> [如何获取包含调用窗口的屏幕截图（在 XP 上）](https://stackoverflow.com/questions/10233055/how-to-get-screenshot-to-include-the-invoking-window-on-xp)

我目前正在使用`CopyFromScreen(0, 0, 0, 0, imageSize)`捕获桌面，但不幸的是，它没有捕获特定的 winform 内容（其余的都可以）。

这个winform的工作很简单；这只是一个股票程序。黑色背景和每毫秒左右移动的标签，仅此而已。没有边界。

我不能使用 Directx 的 CaptureScreen（我已经尝试过），因为显卡的驱动程序不允许我访问前缓冲区（后缓冲区中没有任何内容）。我也不能使用`SendKey({PRTSC})`，因为我不能覆盖剪贴板的内容。

然而有趣的是，通过按下键盘的“打印屏幕”并将其粘贴到 MS Paint 中，自动收录程序被完美捕获。`CopyFromScreen`它只是在代码中不起作用。我如何让它工作，或者在不诉诸 win32 API 的情况下是否有任何其他解决方法？

**编辑：**

我发现了为什么它不起作用。

事实证明，我的代码程序的表单将 TransparentKey 设置为*null 以外的任何值*（在本例中为栗色）。当 TransparentKey*不为 null*时， CopyFromScreen 将不起作用。它只是复制一个空白图像。

有谁知道如何让两者（TransparentKey 和 CopyFromScreen）一起工作？哈哈

**编辑 2（已解决）：**

如下所示，我发现 CopyFromScreen 实际上是 BitBlt 的包装器。我没有调用 CopyFromScreen，而是在这里使用了 BitBlt 调用：

[如何将屏幕截图直接保存到 Windows 中的文件？](https://stackoverflow.com/questions/158151/how-can-i-save-a-screenshot-directly-to-a-file-in-windows)

但是，我稍微修改了代码。将调用更改为：

```
WIN32_API.BitBlt(hMemDC, 0, 0,size.cx,size.cy, hDC, 0, 0, WIN32_API.SRCCOPY | WIN32_API.CAPTUREBLT); 
```

并将其添加到 WIN32_API 类：

```
public const int CAPTUREBLT = 1073741824 
```

现在可以使用透明键捕获桌面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:42:40.083

[将屏幕捕获为位图](https://stackoverflow.com/questions/362986/how-may-i-capture-the-screen-in-a-bitmap) 或 [http://www.csharphelp.com/2006/11/capturing-the-screen-image-using-c/](http://www.csharphelp.com/2006/11/capturing-the-screen-image-using-c/)可能会有所帮助。

# codeblocks - 如何在 CodeBlocks 中查看库函数的源代码？

> ID：14135241
> 
> 赞同：4
> 
> 时间：2013-01-03T08:19:05.873
> 
> 标签：codeblocks

我正在使用 CodeBlocks 10.05 并在 C 中使用 ffmpeg 库进行编程。如何查看库函数的源代码？

**例如：**我在我的程序中使用 avformat_open_input(parameters)。我想看看函数的主体。我怎么看？

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-11-25T18:20:47.877

使用Linux系统。然后 ：

1.  类型`man 3 <function-name>`
2.  手册页将始终告诉您哪个头文件具有声明。

# c# - 在 C# 中使用 Python 时文件未初始化

> ID：14135242
> 
> 赞同：0
> 
> 时间：2013-01-03T08:19:07.943
> 
> 标签：c#, python, file, variables, encoding

我与这个问题作斗争。我尝试打开一个文件并将其保存到一个变量中。然后我想用我包含的海报库对其进行编码。

所以这是代码中不起作用的部分......（你不必担心其余的）

```
try:
    poster.streaminghttp.register_openers()
    #Open File to be Uploaded
    file = open("D:\\HC1100\config.cfg", "rb")
    print "uplaod process"

    #Encode Parameters for the Device
    params = [('restore', file), ('upload', 'PC ==> Unit')]
    datagen, headers = poster.encode.multipart_encode(params, 'ff2fbffcc75148fb9b7ba9885a1cf146')
    file.close() 
```

所以我收到以下错误消息：“无法将'Microsoft.Scripting.Runtime.Uninitialized'类型的对象转换为'System.Exception'”

有趣的是，如果我用相同的代码编写一个 .txt……然后我用 IronPython.exe 执行它，它就可以工作！但如果我在 C# Python 项目中这样做，它就不起作用。

感谢您的帮助，祝您 2013 年快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:33:26.087

似乎 Visual Studio 中包含的 IronPython 编译器无法结合海报库处理这种文件处理。

但是可以使用 C# 项目而不是 C#-Python 项目来调用 Python 文件。

# c# - 如何在 C# 项目 Metro 应用程序中使用 Json

> ID：14135250
> 
> 赞同：0
> 
> 时间：2013-01-03T08:19:54.093
> 
> 标签：c#, javascript, windows-8, microsoft-metro

我们用 C# 开发项目，我们想在项目中使用 js 库或 Json 调用。是否可以？我们如何在 Windows 8 Metro 应用程序的 C# 项目中使用 js 库？有没有样品所以请分享链接谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:12:26.833

不，您不能将`C#`和`JavaScript`一起用于 Win8 开发。请注意，这两种技术的渲染引擎甚至不同。如果您想`JSON`在您的应用程序中使用一些退货服务，您`XAML WinRT`仍然可以这样做。您需要做的就是`JSON`在获取它之后反序列化。

# css - 如何从有和没有背景大小的文件夹创建精灵（使用指南针）

> ID：14135256
> 
> 赞同：6
> 
> 时间：2013-01-03T08:20:53.117
> 
> 标签：css, compass-sass, css-sprites

我想为两种不同的场景使用 Compass 生成的图标精灵。

1.  使用原始大小的图标。
2.  使用与使用 CSS3 属性的较小版本相同的图标`background-size`。

我首先这样做：

```
$logo-spacing: 20px;
@import "logo/*.png";
@include all-logo-sprites; 
```

现在我可以使用一般创建的 CSS 类等`.logo-twitter`。

两个实现了第二个结果，我可以使用它（[darren131 / gist:3410875 - resize sprites in Compass](https://gist.github.com/3410875)）：

```
@mixin resize-sprite($map, $sprite, $percent) {
  $spritePath:    sprite-path($map);
  $spriteWidth:   image-width($spritePath);
  $spriteHeight:  image-height($spritePath);
  $width: image-width(sprite-file($map, $sprite));
  $height: image-height(sprite-file($map, $sprite));

  @include background-size(ceil($spriteWidth * ($percent/100)) ceil($spriteHeight * ($percent/100)));
  width: ceil($width*($percent/100));
  height: ceil($height*($percent/100));
  background-position: 0 floor(nth(sprite-position($map, $sprite), 2)  * ($percent/100) );
}

.my-other-div-with-small-logos {
    .logo-twitter {
        $spriteName: twitter;
        $percentage: 40;

        @include resize-sprite($logo-sprites, $spriteName, $percentage);
    }
} 
```

但是，如果我有大约 30 个徽标，我需要为每个精灵类手动重复此操作。

是否可以两次导入文件夹，一次是原始大小，第二次是`backround-size`属性？或者修改上述方法以在另一个`<div class="my-other-div-with-small-logos">`图标应该看起来更小的地方自动创建所有类？

还是我在这里想错了方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:25:46.157

这样做。它遍历整个地图：

```
@each $sprite in sprite_names($logo-sprites) {
    .logo-#{$sprite} {
        @include resize-sprite($logo-sprites, $sprite, 40);
    }
} 
```

这有助于：[在地图中迭代精灵的方法](https://github.com/chriseppstein/compass/issues/1046)

在现代浏览器中缩小精灵而不加载另一个生成的精灵图像是很棒的。如果徽标有时是 50 像素，但在其他地方也应该是 20 像素，这很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-22T21:50:39.820

谢谢大家。有用！现在，我继续扩展它，因为我需要一些更动态的东西，其中图标是基于 ico-[size] ico-[image] 和 swatch-[color] 构建的

```
$myicons-spacing: 20px;

@import "icons/myicons/*.png";
@include all-myicons-sprites;

@mixin resize-sprite($map, $sprite, $percent) {
  $spritePath    :  sprite-path($map);
  $spriteWidth   :  image-width($spritePath);
  $spriteHeight  :  image-height($spritePath);
  $width         :  image-width(sprite-file($map, $sprite));
  $height        :  image-height(sprite-file($map, $sprite));

  @include background-size(ceil($spriteWidth * ($percent/100)) ceil($spriteHeight * ($percent/100)));

  width                :  ceil($width*($percent/100));
  height               :  ceil($height*($percent/100));
  background-position  :  0 floor(nth(sprite-position($map, $sprite), 2)  * ($percent/100) );
}

@each $sprite in sprite_names($myicons-sprites) {
  .ico-xsmall.myicons-#{$sprite} {
    @extend .myicons-#{$sprite};
    @include resize-sprite($myicons-sprites, $sprite, 35);
  }

  .ico-small.myicons-#{$sprite} {
    @extend .myicons-#{$sprite};
    @include resize-sprite($myicons-sprites, $sprite, 50);
  }

  .ico-medium.myicons-#{$sprite} {
    @extend .myicons-#{$sprite};
    @include resize-sprite($myicons-sprites, $sprite, 87.5);
  }

  .ico-large.myicons-#{$sprite} {
    @extend .myicons-#{$sprite};
    @include resize-sprite($myicons-sprites, $sprite, 100);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T22:09:55.087

为每个循环创建占位符，然后在需要的地方包含占位符。例如：

```
@mixin resize-sprite($map, $sprite, $percent) {
  $spritePath:    sprite-path($map);
  $spriteWidth:   image-width($spritePath);
  $spriteHeight:  image-height($spritePath);
  $width: image-width(sprite-file($map, $sprite));
  $height: image-height(sprite-file($map, $sprite));

  @include background-size(ceil($spriteWidth * ($percent/100)) ceil($spriteHeight * ($percent/100)));
  width: ceil($width*($percent/100));
  height: ceil($height*($percent/100));
  background-position: 0 floor(nth(sprite-position($map, $sprite), 2)  * ($percent/100) );
}

@each $image in twitter, facebook, pinterest {
  %logo-#{$image} {
    @include resize-sprite($logo-sprites, $image, 40);
  }
}

.my-other-div-with-small-logos {
    .logo-twitter {
        @extend %logo-twitter;
    }
} 
```

请注意，这假设所有图像都应调整 40% 的大小。如果您需要为不同的徽标指定不同的百分比，则需要进行更多的创意迭代。

更好的是，也许只是在循环中生成类？

```
.my-other-div-with-small-logos {
  @each $image in twitter, facebook, pinterest {
    .logo-#{$image} {
      @include resize-sprite($logo-sprites, $image, 40);
    }
  }
} 
```

# objective-c - 将 UIImages 导出为 MP4

> ID：14135258
> 
> 赞同：4
> 
> 时间：2013-01-03T08:20:57.090
> 
> 标签：objective-c, ios, avfoundation

好的，所以我陷入了困境，我盯着这个看太久了，无法清楚地思考。

基本上，我所需要的只是一种接收`NSArray`图像并将 mp4 或其他视频格式写入磁盘的方法。

我不担心监视用户的手势或类似的事情。图像已经存在于磁盘上——我只需要进行转换。

我知道我需要一个 AVWriter 和类似的东西：

```
- (CVPixelBufferRef) pixelBufferFromCGImage: (CGImageRef) image
{
  NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey,
                         [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
                         nil];
  CVPixelBufferRef pxbuffer = NULL;

  CVPixelBufferCreate(kCFAllocatorDefault, CGImageGetWidth(image),
                    CGImageGetHeight(image), kCVPixelFormatType_32ARGB, (CFDictionaryRef) options,
                    &pxbuffer);

  CVPixelBufferLockBaseAddress(pxbuffer, 0);
void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);

  CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
  CGContextRef context = CGBitmapContextCreate(pxdata, CGImageGetWidth(image),
                                             CGImageGetHeight(image), 8, 4*CGImageGetWidth(image), rgbColorSpace,
                                             kCGImageAlphaNoneSkipFirst);

  CGContextConcatCTM(context, CGAffineTransformMakeRotation(0));

//    CGAffineTransform flipVertical = CGAffineTransformMake(
//                                                           1, 0, 0, -1, 0, CGImageGetHeight(image)
//                                                           );
//    CGContextConcatCTM(context, flipVertical);

//    CGAffineTransform flipHorizontal = CGAffineTransformMake(
//                                                             -1.0, 0.0, 0.0, 1.0, CGImageGetWidth(image), 0.0
//                                                             );
//
//    CGContextConcatCTM(context, flipHorizontal);

  CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image),
                                       CGImageGetHeight(image)), image);
  CGColorSpaceRelease(rgbColorSpace);
  CGContextRelease(context);

  CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

  return pxbuffer;
} 
```

我只是看不出如何将它全部放入一个干净的助手中。在你问之前我已经看到：[如何从图像](https://stackoverflow.com/questions/8635036/how-to-display-video-from-images)等中显示视频，但只是在 UIImageView 中运行图像并不是我在这里寻找的。这需要 App Store 合法，所以 FFMPeg 不是一个选项。

有什么想法/指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:43:14.617

[https://github.com/meslater/MSImageMovieEncoder](https://github.com/meslater/MSImageMovieEncoder)将图像编码为 H.264。您必须提供图像作为上下文参考或 CVPixelBufferRefs（请参阅[此处的示例代码](http://iphonedevsdk.com/forum/iphone-sdk-development/93803-convert-uiimage-to-cvimagebufferref.html)）实现

```
-(BOOL)nextFrameInCVPixelBuffer:(CVPixelBufferRef*)pixelBuf; 
```

每次调用此方法都应返回一个缓冲区和 YES。如果没有更多图像返回 NO，您将在磁盘上找到该电影。

有关更多详细信息，请阅读[如何将 UIImage 数组导出为电影？](https://stackoverflow.com/questions/3741323/)（它基本上是相同的代码）或阅读 github 文件。

# java - 如何在for循环中为两个不同的值断言true？

> ID：14135259
> 
> 赞同：1
> 
> 时间：2013-01-03T08:20:59.233
> 
> 标签：java, mongodb, junit, assert

我在 mongo 中有需要验证的数据：

```
"items" : [
            {
                    "item" : 0,
            },
            {
                    "item" : 1,
            }
    ], 
```

我的代码中有一个 for 循环：

```
for (Object a : getItems()){
 HashMap<?, ?> b = (HashMap<?, ?>)a;
 assertTrue(b.containsValue(0));
} 
```

这里有一个问题，因为 items 的值为 1 和 0，如果它也包含 1，我需要为第二次迭代断言。如何验证 1 和 0 是否都存在？

有没有其他的断言方法可以做到这一点？

编辑：

```
List lt1 = new ArrayList();
lt1.add(0);
lt1.add(1);
List lt2 = new ArrayList();

for (Object a : getItems()){
 HashMap b = (HashMap)a;
 lt2.add(b.get("item");
}

assertThat(lt2, hasItems(lt1)); 
```

这会在 assertThat.. 行引发调用目标异常。此外，JUNIT 显示一个断言错误，如下所示：

```
Expected : A collection of [0,1]
Got : [0,1] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:03:28.157

由于您使用的是 JUnit，[从](http://junit.sourceforge.net/doc/ReleaseNotes4.4.html)v4.4 开始，该库可以使用[hamcrest](http://code.google.com/p/hamcrest/wiki/Tutorial)匹配器库，该库提供了丰富的 DSL 来构建测试表达式。这意味着您可以完全删除循环并编写单个断言，测试所有预期值的存在。

例如，hamcrest 有一个内置功能[`hasItems()`](http://www.jarvana.com/jarvana/view/org/hamcrest/hamcrest-library/1.3.RC2/hamcrest-library-1.3.RC2-javadoc.jar!/org/hamcrest/Matchers.html#hasItems%28org.hamcrest.Matcher...%29)（v1.3.RC2 的文档链接，但 v1.3 已发布 - 抱歉找不到最新链接）。

```
import java.util.List;
import java.util.Arrays;
import static org.hamcrest.Matchers.hasItems;
import static org.junit.Assert.assertThat;

@Test
public void bothValuesShouldBePresent() {
    List<Integer> itemValues = Arrays.asList(new Integer[]{ 0, 1, 2, 3 });
    Integer[] expected = { 0, 1 };
    assertThat(itemValues, hasItems(expected));
} 
```

当然，这假设您可以修改您的`getItems()`方法以返回一个简单的`List<Integer>`.

最后，根据您使用的 JUnit 版本，hamcrest 可能捆绑也可能不捆绑。JUnit 在 v4.4 和 v4.10 之间内联 hamcrest-core。因为它只是[hamcrest-core](http://search.maven.org/#artifactdetails%7Corg.hamcrest%7Chamcrest-core%7C1.3%7Cjar)，所以我在我的项目中明确添加了[hamcrest-all](http://search.maven.org/#artifactdetails%7Corg.hamcrest%7Chamcrest-all%7C1.3%7Cjar)依赖项。从 JUnit v4.11 起，hamcrest 不再内联（恕我直言），因此如果您想使用匹配器，您将始终需要显式添加依赖项。

此外，这是一篇关于 hamcrest 集合匹配的[有用博客文章。](http://martinaharris.com/2010/04/hamcrest-collection-matching-with-junit-4-8/)

**编辑：**

我试图考虑你`getItems()`可能会返回什么，这是一个更新的测试示例。请注意，您需要将*预期*值转换为数组 - 请参阅[为什么尝试使用 Hamcrest 的 hasItems 的代码无法编译？](https://stackoverflow.com/questions/1092981/hamcrests-hasitems)

```
@Test
public void bothValuesShouldBePresent() {
    List lt1 = new ArrayList();
    lt1.add(0);
    lt1.add(1);
    List lt2 = new ArrayList();

    List fakeGetItems = new ArrayList() {{ add(new HashMap<String, Integer>() {{ put("item", 0); }}); add(new HashMap<String, Integer>() {{ put("item", 1); }} ); }};

    for (Object a : fakeGetItems) {
     HashMap b = (HashMap)a;
     lt2.add(b.get("item"));
    }

    assertThat(lt2, hasItems(lt1.toArray(new Integer[lt1.size()])));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T20:55:40.533

[使用AssertJ](https://github.com/joel-costigliola/assertj-core/wiki)更容易

```
@Test
public void bothValuesShouldBePresent1()  {
  List<Integer> lt2 = Arrays.asList(0, 1);
  List<Integer> lt1 = Arrays.asList(0, 1);
  assertThat(lt2).containsExactlyElementsOf(lt1);
}

@Test
public void bothValuesShouldBePresent2()  {
  List<Integer> lt2 = Arrays.asList(0, 1);
  assertThat(lt2).containsExactly(0, 1);
}

@Test
public void bothValuesShouldBePresent3()  {
  List<MyItem> lt2 = Arrays.asList(new MyItem(0), new MyItem(1));
  assertThat(extractProperty("item").from(lt2))
      .containsExactly(0, 1);
} 
```

# python - 如何在 Python 脚本中存储 Github 的 OAuth 令牌？

> ID：14135260
> 
> 赞同：2
> 
> 时间：2013-01-03T08:21:00.230
> 
> 标签：python, oauth, github, github-api

我正在开发一个使用基本身份验证访问 Github 的 Python 脚本。我想使用 OAuth，这样用户就不必在每次使用脚本时都输入凭据。最重要的是，用户的密码不会保存在`.bash_history`.

[这个 Github API 具有使用Basic authentication](http://developer.github.com/v3/oauth/#create-a-new-authorization)获取令牌的代码。

```
`curl -u $USER_NAME --silent https://api.github.com/authorizations` 
```

要求用户输入密码并在响应中获取令牌。

1.  现在我在哪里安全地保存这个令牌，以便下次运行脚本时用户不必输入任何内容？
2.  目的是避免在每次使用脚本时存储密码或要求用户输入。还有其他方法可以实现这些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:01:37.117

您可能应该将令牌保存在用户主目录的配置文件中。最好，您可以限制文件的权限，以确保只有该用户可以访问配置文件。

# javascript - 在 Javascript 中切换点击处理程序

> ID：14135264
> 
> 赞同：6
> 
> 时间：2013-01-03T08:21:33.180
> 
> 标签：javascript, jquery, events, click, handler

我有一个使用 jQuery 附加事件的 HTML 按钮`bind()`，如下所示：

```
$('#mybutton').bind('click', myFirstHandlerFunction); 
```

在`myFirstHandlerFunction`中，我希望这个处理程序用一个新的处理程序替换自己`mySecondHandlerFunction`，就像这样：

```
function myFirstHandlerFunction(e) {
    $(this).unbind('click', myFirstHandlerFunction).bind('click', mySecondHandlerFunction);
} 
```

在第二个单击处理程序中`mySecondHandlerFunction`，我想将按钮切换回其原始状态：取消绑定`mySecondHandlerFunction`处理程序并重新附加原始处理程序，`myFirstHandlerFunction`如下所示：

```
function mySecondHandlerFunction(e) {
    $(this).unbind('click', mySecondHandlerFunction).bind('click', myFirstHandlerFunction);
} 
```

这很好用，除了一个小细节：因为点击事件还没有通过按钮的每个点击处理程序传播，所以点击事件被传递到按钮的下一个点击处理程序，它恰好是刚刚绑定的处理程序前一个处理程序。最终结果`mySecondHandlerFunction`在执行后立即`myFirstHandlerFunction`执行。

通过调用每个处理程序可以轻松解决此问题`e.stopPropagation()`，但这具有取消可能已独立附加的任何其他单击处理程序的负面影响。

有没有办法在两个点击处理程序之间安全、一致地切换，而不必停止点击事件的传播？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T08:26:02.420

> **更新：**由于在 jQuery 1.9 中删除了这种形式，`toggle()`下面的解决方案不再起作用。请参阅[此问题](https://stackoverflow.com/questions/2459153/alternative-to-jquerys-toggle-method-that-supports-eventdata)以获取替代方案。

看起来[toggle()](http://api.jquery.com/toggle-event/)可以解决您的问题：

```
$("#mybutton").toggle(myFirstHandlerFunction, mySecondHandlerFunction); 
```

上面的代码将注册`myFirstHandlerFunction`并`mySecondHandlerFunction`在交替点击时被调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T08:24:37.693

只需使用布尔值来切换处理程序的功能，无需调整正在侦听的处理程序：

```
$('#mybutton').bind('click', myHandlerFunction);
var first = true;

function myHandlerFunction(e) {
    if(first){
        // Code from the first handler here;
    }else{
        // Code from the second handler here;
    }
    first = !first; // Invert `first`
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T17:00:26.427

此解决方案是一种 hack，但对于您的粗略工作来说，它又*短*又甜：

```
$('#myButton').click(function() {
  (this.firstClk = !this.firstClk) ? firstHandler(): secondHandler();
}); 
```

这是一个 hack，因为它直接在其上放置了一个新属性`this`，即点击目标 HTML DOM 元素，这可能不是最佳实践。但是，它因此避免了创建任何新的全局变量，并且可以同时在不同按钮上不加改变地使用它。

请注意，三元运算的第一部分使用`=`and not `==`or `===`，即它是一个赋值，而不是一个比较。另请注意，第一次单击按钮时，`this.firstClk`未定义但立即被否定，使得三元运算的第一部分计算为`true`第一次。

这是一个工作版本：

```
$('#a > button').click(function() {(this.firstClk = !this.firstClk) ? a1(): a2();});
$('#b > button').click(function() {(this.firstClk = !this.firstClk) ? b1(): b2();});

function a1() {$('#a > p').text('one');}
function a2() {$('#a > p').text('two');}

function b1() {$('#b > p').text('ONE');}
function b2() {$('#b > p').text('TWO');}
```

```
div {display: inline-block;width: 10em;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="a"><p>not yet clicked</p><button>click</button></div>
<div id="b"><p>NOT YET CLICKED</p><button>CLICK</button></div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-10T16:14:05.737

我今天正在看这个，并意识到如果没有列出全局变量，仍然没有办法做到这一点。我想出了以下将位置添加到 ESRI 底图的方法，但它通常也可以工作：

```
function addLocationClickHandler() {
    var addLocationClick = overviewMap.on('click', function (event) {
        addLocationClick.remove();
    })
    $('#locationAddButton').one('click', function (cancelEvent) {
        addLocationClick.remove();
        $('#locationAddButton').on('click', addLocationClickHandler)
    });
}

$('#locationAddButton').on('click', addLocationClickHandler) 
```

这应该允许您在覆盖点击处理程序的部分中放置其他内容，而不需要全局变量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-27T18:08:23.840

这将有助于`data-click-state`在您的按钮上添加属性

```
$(document).ready(function() {
    $('#mybutton').on('click', function() {
        if ($(this).attr('data-click-state') == 1) {
            $(this).attr('data-click-state', 0)
            myFirstHandlerFunction();
        } else {
            $(this).attr('data-click-state', 1)
            mySecondHandlerFunction();
        }
    });
}); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-03T08:25:52.937

像这样：

```
$(this).bind('click', myMasterHandler);

handler = 0;

function myMasterHandler(e) {
    if(handler == 0) {
        myFirstHandler(e);
        handler = 1;
    } else {
        mySecondHandler(e);
        handler = 0;
    }
} 
```

# jsf - 当我在 web.xml 中添加与 JSF 相关的标签时，没有任何效果

> ID：14135271
> 
> 赞同：0
> 
> 时间：2013-01-03T08:22:19.010
> 
> 标签：jsf

当我将`JSF`相关标签添加到*web.xml*时，没有任何工作，并且出现错误。*如果我删除web.xml*中的 XML 标记，那么所有 .jsp 和 servlet 都可以正常工作。我还将 jsf-api.jar、jsf-impl.jar、jstl.jar 和 standard.jar 添加到我项目的 lib 文件夹中，但它仍然无法正常工作，所以我也将这些 jar 文件添加到了 tomcat 中的 lib 文件夹中，但仍然没有在职的。

带有 index.xhtml 到 url 的 Error1：

> XML 解析错误：未找到元素
> 位置：[http](http://www.touchegolfmart.com/index.xhtml)
> ://www.touchegolfmart.com/index.xhtml 第 1 行，第 1 列：

Erro2 没有 index.xhtml 到 url

找不到文件 Firefox 在[http://www.touchegolfmart.com/](http://www.touchegolfmart.com/)
上找不到该文件。

我的 web.xml 文件是

* * *

```
<?xml version="1.0" encoding="UTF-8"?>

   <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
 <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
 </context-param>
 <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
 </servlet-mapping>
 <session-config>
    <session-timeout>
        30
    </session-timeout>
 </session-config>
 <welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
   </welcome-file-list>
</web-app> 
```

`server.xml`在tomcat的conf文件夹中的上下文路径是：

```
 <Host name="touchegolfmart.com" appBase="/home/rathan">
      <Alias>www.touchegolfmart.com</Alias> 
      <Context path="" reloadable="true" docBase="public_html" debug="1"/>
     <!-- <Context path="/manager" debug="0" privileged="true"
          docBase="/usr/local/jakarta/tomcat/server/webapps/manager">
      </Context>-->
   </Host> 
```

文件夹结构为：index.jsp
WEB-INF/classes
WEB-INF/lib
WEB-INF/faces-config.xml
WEB-INF/web.xml
WEB-lib/lib/jsf-api.jar,jsf-impl.jar ，jstl.jar，标准.jar。
META-INF/context.xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:30:25.583

不要手动将文件放在 appBase 文件夹中，而是放置一个 .war 文件并通过 jar 命令将其解压缩，然后重新启动 tomcat 使我的应用程序工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:25:02.973

我很快举了一些例子。在 webapp 文件夹中创建 T 文件夹。创建文件 hello.xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <title>JSF 2.0 Hello World</title>
    </h:head>
    <h:body>
        <h3>JSF 2.0 Hello World Example</h3>
        <h:form>

            <h:commandButton value="Click" action="welcome"></h:commandButton>
        </h:form>
    </h:body>
</html> 
```

创建文件welcome.xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <title>JSF 2.0 Hello World</title>
    </h:head>
    <h:body bgcolor="white">
        <h2>JSF 2.0 Hello World Example</h2>
    </h:body>
</html> 
```

在此之后在 T 文件夹中创建文件夹 WEB-INF 并创建了 2 个文件：web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>JSFHelloWorld</display-name>
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>
  <welcome-file-list>
    <welcome-file>faces/hello.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>
</web-app> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

</faces-config> 
```

还在 T/WEB-INF 文件夹中创建了文件夹 lib，其中包含 jsf-api-2.1.12.jar、jsf-impl-2.1.12.jar、jstl-1.2.jar 文件。

这行得通，但我没有使用任何 POJO。

# android - TextView - OnClick - Android

> ID：14135273
> 
> 赞同：8
> 
> 时间：2013-01-03T08:22:22.037
> 
> 标签：android, textview

是否可以将 onclick 添加到 textview 的某些部分？例如我的代码是这样的，

```
String content = "Hello this a test.. For more details contact @Peter";
someTextView.setText(content); 
```

我想为“@Peter”添加一个 onClick 事件。那可能吗？

TIA。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T08:27:33.733

简单的： -）

```
SpannableString link = makeLinkSpan("@Peter", new View.OnClickListener() {          
        @Override
        public void onClick(View v) {
            // Peforme Click
        }
    });
String content = "Hello this a test.. For more details contact";
someTextView.setText(content);
someTextView.append(link); 
```

方法`makeLinkSpan()`是

```
private SpannableString makeLinkSpan(CharSequence text, View.OnClickListener listener) {
    SpannableString link = new SpannableString(text);
    link.setSpan(new ClickableString(listener), 0, text.length(), 
        SpannableString.SPAN_INCLUSIVE_EXCLUSIVE);
    return link;
} 
```

**`ClickableString`** 班级

```
private static class ClickableString extends ClickableSpan {  
    private View.OnClickListener mListener;          
    public ClickableString(View.OnClickListener listener) {              
        mListener = listener;  
    }          
    @Override  
    public void onClick(View v) {  
        mListener.onClick(v);  
    }        
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T10:25:34.973

感谢@user370305 的回复。但是他在回答中错过了一些代码片段。为了其他人的利益，我粘贴了对我有用的整个代码，

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView someTextView = (TextView)findViewById(R.id.someTextView);

        String content = "Hello this a test.. For more details contact";
        someTextView.setText(content);

        SpannableString link = makeLinkSpan("@Peter", new View.OnClickListener() {          
                @Override
                public void onClick(View v) {
                    //Do something here..
                }
            });
            someTextView.append(link); 
        }
        makeLinksFocusable(someTextView);
    }

    private void makeLinksFocusable(TextView tv) {
        MovementMethod m = tv.getMovementMethod();  
        if ((m == null) || !(m instanceof LinkMovementMethod)) {  
            if (tv.getLinksClickable()) {  
                tv.setMovementMethod(LinkMovementMethod.getInstance());  
            }  
        }  
    }

    private SpannableString makeLinkSpan(CharSequence text, View.OnClickListener listener)                 {
        SpannableString link = new SpannableString(text);
        link.setSpan(new ClickableString(listener), 0, text.length(), 
            SpannableString.SPAN_INCLUSIVE_EXCLUSIVE);
        return link;
    }

    private static class ClickableString extends ClickableSpan {  
        private View.OnClickListener mListener;          
        public ClickableString(View.OnClickListener listener) {              
            mListener = listener;  
        }          
        @Override  
        public void onClick(View v) {  
            mListener.onClick(v);  
        }        
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T08:25:44.333

在你的 XML 中添加这个，`android:clickable="true"`

在你的活动中这样使用，

```
textView.setOnClickListener(new View.OnClickListener(){
    public void onClick(){

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T08:24:09.400

使用 Java 代码可以做到这一点：

```
someTextView.setOnClickListener(new View.OnClickListener(){
    public void onClick(){
        //Do Stuff
    }
}); 
```

但首先确保将其设置为可点击。

```
someTextView.setClickable(true); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T08:43:55.017

尝试这个：

```
SpannableString str = new SpannableString("@Peter");
str.setSpan(new ClickableSpan() {

            @Override
            public void onClick(View widget) {
                // TODO Auto-generated method stub

            }
        }, 0, str.length(), Spannable.SPAN_INCLUSIVE_EXCLUSIVE); 
```

然后附加`str`到您的 TextView。

您还需要调用`setMovementMethod(LinkMovementMethod.getInstance());`您的 TextView

# python - django unindent 不匹配任何外部缩进级别

> ID：14135274
> 
> 赞同：0
> 
> 时间：2013-01-03T08:22:38.313
> 
> 标签：python, django, indentation

我注意到每当我使用重定向语句时，都会出现错误

```
unindent does not match any outer indentation level (views.py, line 16) 
```

我不确定我在这里做错了什么。只要我删除重定向代码并放置 render_to_response 我就能看到响应。我究竟做错了什么？

```
/Library/Python/2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/handlers/base.py in get_response
                        response = callback(request, *callback_args, **callback_kwargs) ...
▶ Local vars
/Users/priyank/dev/projects/asome/asom/usr/views.py in dashboard

def dashboard(request):    
    if not request.user.is_authenticated():
        return redirect('/login/?next=%s' % request.path)
    else:
        user = request.user
        user_orders = Order.objects.filter(user=user.user_id)    
        return render_to_response('views/usr/dashboard.html',{'my_orders':user_orders}) 
```

在此站点上查看类似问题后，我也尝试了此命令。

```
python -m tabnanny views.py 
```

但它没有给出任何错误。

这是我的文件。

```
from django.shortcuts  import render_to_response,redirect
from django.contrib.auth import logout
import helper as uhelper
from django.contrib.auth.models import User
from business.models import BusinessUser
from utils.core_classes import UserContext
import utils.constants as constants
from order.models import Order

def signup(request):
    if request.method == 'GET':
        return render_to_response('views/usr/register.html')
    elif request.method == 'POST':
        params = request.POST
        user = User.objects.create_user(params['email'], params['email'], params['password'])
        user.save()
        return authenticate(request)

def login(request):
    return render_to_response('views/usr/login.html')

def logout_user(request):
    logout(request)
    return redirect('/');

def dashboard(request):    
    if not request.user.is_authenticated():
        return redirect('/login/?next=%s' % request.path)
    else:
        user = request.user
        user_orders = Order.objects.filter(user=user.user_id)    
        return render_to_response('views/usr/dashboard.html',{'my_orders':user_orders})

def profile(request):
    user = request.user
    if request.method == 'GET':
        return render_to_response('views/usr/profile.html')
    elif request.method == 'POST':
        return render_to_response('views/usr/profile.html')

def authenticate(request):
    user_dict = request.POST
    user = User()
    user = uhelper.authenticate_user(user_dict['email'], user_dict['password'])
    if user != None:
        return redirect('/usr/dashboard') 
```

这是一个回溯

```
/Library/Python/2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/handlers/base.py in get_response
                        response = callback(request, *callback_args, **callback_kwargs) ...
▶ Local vars
/Users/priyank/dev/projects/stuffednow/stuffed/usr/views.py in dashboard
        return redirect('/login/?next=%s' % request.path) ...
▶ Local vars
/Library/Python/2.7/site-packages/Django-1.4.2-py2.7.egg/django/shortcuts/__init__.py in redirect
        return redirect_class(urlresolvers.reverse(to, args=args, kwargs=kwargs)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-11T15:08:27.553

有问题：

```
def logout_user(request):
logout(request)
return redirect('/'); 
```

删除“;” 在代码末尾

# php - PHP中基于距离增加的概率

> ID：14135281
> 
> 赞同：2
> 
> 时间：2013-01-03T08:23:37.437
> 
> 标签：php, random, distance, probability

我正在尝试根据概率从数据集中随机选择，该概率由游戏的 PHP 中映射点之间的距离量决定。此外，数据集中包含的潜在记录也由距离决定。

我有一张等级从 1 到 20 的怪物表。我希望能够首先根据用户是否已经走了足够的距离来选择怪物。

示例 1：

*   如果距离在 1 - 100 之间，则只能包含 1,2,3 级的怪物
*   而且距离越接近100，他们就越有可能得到更高等级的怪物（例如，如果你在100距离，你最有可能得到3级怪物，不太可能得到2级和获得 1 级的可能性更小；如果您距离 50 岁，那么最有可能获得 2 级，同样可能获得 1 级或 3 级。

示例 2：

*   如果距离在 1 - 200 之间，则潜在怪物为 1,2,3,4,5,6 级
*   与示例 1 相同的概率方法，但分布跨越更多怪物级别和更多潜在距离。

我发现有两篇文章让我朝着正确的方向思考：

[根据概率分布获取结果](https://stackoverflow.com/questions/10914678/get-result-based-on-probability-distribution)

[php 百分比机会](https://stackoverflow.com/questions/8806006/php-percentage-chance)

* * *

我很容易根据距离确定怪物分组。例如，我可以从文章 1 中的函数中看到，如果我知道怪物组内所有可能的距离，我可以像这样为它们分配权重：

```
function weighted_random($values, $weights){ 
$count = count($values); 
$i = 0; 
$n = 0; 
$num = mt_rand(0, array_sum($weights)); 
while($i < $count){
    $n += $weights[$i]; 
    if($n >= $num){
        break; 
    }
    $i++; 
} 
return $values[$i]; 
}

$values = array('A','B','C','D','E'); // Potential monster levels
$weights = array(1,20,50,75,100); // Possible distance ranges

$weighted_value = weighted_random($values, $weights); 
```

问题是，我只知道该组最大潜在距离内的实际距离。换句话说，对于怪物组 1（A、B、C、D、E），我知道玩家必须在 1 到 100 英里之间旅行，并且我特别知道他们走了多远（即 85 英里）。所以我不能为其他怪物级别创建权重（或不知道如何）。

请注意，如果这个问题不够具体，请告诉我，我会进一步考虑解决方案并发布/更新。我希望有人至少能给我一些关于方法的最佳实践想法，从那里我可能会弄清楚如何编写一些代码来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:03:33.323

一种方法是使用`weighted_random`您发现的功能，但以不同的方式。

构建与在不同距离找到怪物类的概率相对应的数组：

```
$a=array(1,2,3,4,5,6,7,8,9,10);
$b=array(0,0,0,0,1,2,3,4,5, 6);
$c=array(0,0,0,0,0,0,0,1,2, 3); 
```

这表示在距离 0 处怪物类 A 的概率为 100%。同时，在距离 9 处，怪物等级 A 为 10/19，B 为 6/19，C 为 3/19。当然，您可以更改数组中的数字以构建您喜欢的任何概率分布。

为了在我们的程序中使用这些数组，我们将它们转换为二维数组：

```
$probtable=array();
for($i=0;$i<count($a);$i++){
   $probtable[$i]=array($a[$i],$b[$i],$c[$i]); 
```

现在，如果行进的距离是，`$d`则给出适当的怪物权重，`$probtable[$d]`并通过以下方式检索类别：

```
weighted_random($values, $probtable[$d]) 
```

根据需要调整初始数组以获得正确的概率分布。

# selenium-webdriver - 在 webdriver 中使用 java 从 csv 文件中读取数据

> ID：14135286
> 
> 赞同：1
> 
> 时间：2013-01-03T08:24:00.807
> 
> 标签：selenium-webdriver, data-driven-tests

如何使用 Java 读取 Selenium WebDriver 中每个单元格的数据？

我尝试过以下代码：

```
CSVReader reader = new CSVReader(new FileReader("D:/data1.csv"));
expectedLabels = reader.readNext();
FieldNames = reader.readNext();
FieldValues = reader.readNext(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:08:02.610

```
File file = new File("D:/data.csv");
if(file.exists()){
 System.out.println("File Exists");
}
BufferedReader bufRdr;
bufRdr = new BufferedReader(new FileReader(file));
String line = null;

while((line = bufRdr.readLine()) != null){
    StringTokenizer st = new StringTokenizer(line,",");
    col=0;
    while (st.hasMoreTokens()){
        //Following stroing the data of csv
    numbers[row][col] = st.nextToken();
    col++;
    }
    System.out.println();
    row++;
    }
    bufRdr.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T16:29:15.800

使用 OPENCSV jar 文件读取 csv 文件变得非常容易。我已经使用这个 jar 文件几次来读取文件。

1.  我们有一个名为 CSVReader 的预定义类，创建一个对象并传递 csv 文件路径

2.  调用 readAll() 方法，它将返回 List 中的 csv 内容

3.  使用Iterator，您可以迭代所有值并根据应用程序使用

我已经写了这篇文章，看看它可能对你有帮助。

[http://learn-automation.com/how-to-read-csv-files-using-java/](http://learn-automation.com/how-to-read-csv-files-using-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T23:30:34.237

我无法在函数中提供字符串类型变量，在缓冲区读取器 fn 中`FileReader()`传递带有参数的方法时显示错误`filereader()`

代码如下所示：

```
String f1= (System.getProperty("User.dir") + "\\Module9TestNG\\src\\TestLogin.xlsx");       
BufferedReader bufRdr;
bufRdr = new BufferedReader(new FileReader(file));
String record; 
String url= null;

while ((record = bufRdr.readLine()) != null)
{
     String fields[] = record.split(",");
     url= fields[0].toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-21T11:39:13.633

```
 private String Fpath ="D:\\CkycApps.csv";   
    String line;
    File file = new File(Fpath);

    BufferedReader bufRdr;
    bufRdr = new BufferedReader(new FileReader(file));

    while((line = bufRdr.readLine()) != null){
        System.out.println(line);       
        String[] cell= line.split(",");
            String FirstName=cell[0];
            String MiddleName=cell[1]; 
```

}

# android - 在这种情况下首选的应用导航设计/布局？

> ID：14135290
> 
> 赞同：1
> 
> 时间：2013-01-03T08:24:35.360
> 
> 标签：android, android-layout, user-interface

我对如何设计 1\. 类别视图和 2\. 我的应用程序的详细信息/编辑视图感到困惑。在这种情况下，首选方式/最佳实践是什么？（对不起下面的“文本层次结构”，但我是这里的新用户，还不允许发布图像）。

首页
|-
   |- 添加汽车
   |- 选择汽车
     |- 类别 1
       |- 查看 1
       |- 编辑 1
     |- 类别 2
       |- 查看 2
     |- 类别 3
       |- 查看 3
       |- 添加 3
       |- 统计 3
     |- 类别4
       |- 查看 4
       |- 添加 4
     |- 类别 5
       |- 查看 5

当前的应用程序结构：
我有两个选择的顶级视图：添加新车或选择现有的。我在整个应用程序中都使用 ActionBarSherlock。

如果选择了汽车，则会出现类别视图，其中每个类别都有一个图像按钮。“Category 1”、“Category 2”和“Category 5”的导航层次结构很简单，但“Category 3 和 4”的导航层次结构更深。

目前，当触摸“类别 4 或 5”的图像按钮时，会出现一个弹出菜单。如果选择了“类别 4”，则可以从弹出菜单中选择“添加”、“查看”和“统计”。

替代应用程序结构：
我已经为类别视图考虑了几种设计，因为我对这里的弹出菜单并不完全满意。

备选方案 1：仍然使用图像按钮进行类别，但没有弹出菜单。相反，如果用户触摸“类别 3”按钮，则应显示类别 3 的“查看活动”。然后“添加”和“统计”活动可以从操作栏（顶级操作栏）中的图标访问，或者从顶级操作栏下方的操作栏，使用固定选项卡。这种替代方法的一个缺点是您必须先转到视图活动，即使您可能想立即转到“添加活动”。

备选方案 2：在类别视图中，使用滚动选项卡将每个类别放置在 ActionBar 中。我实际上对这个替代方案并不满意，因为我有五个彼此之间没有太大关系的类别。所以它们都应该同时可见。

备选方案 3：在类别视图中，使用某种多窗格视图来选择每个类别。

目前，我正在考虑大多数替代方案 1，要么使用从顶级 ActionBar 可访问的“详细/编辑视图”，要么通过固定选项卡 ActionBar。

您认为我的案例的最佳做法是什么？我的选择之一还是您有更好的主意？我已经阅读了 Android 设计指南等，但发现很难决定走哪条路。

# c# - datetime 在哪里从 asp.net / c# 获取数据

> ID：14135296
> 
> 赞同：2
> 
> 时间：2013-01-03T08:24:50.070
> 
> 标签：c#, asp.net, session, datetime

我想知道，在哪里

```
DateTime.Now; 
```

从中获取数据？

它会从我的桌面获取数据吗？实际上，当我在调试下观察时确实如此。我将桌面时间改回了一个小时，而 datetime.now 给了我完全相同的日期/时间。

我真正的问题是，部署项目时这仍然适用吗？我的网站会继续从用户的电脑中获取时间吗？

这个问题的原因是，因为我将使用会话变量，我想在 x 分钟后处理这些变量。如果 datetime.now 从用户计算机获取时间，那么这将是一种安全问题。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T08:26:06.400

ASP.NET 在服务器上运行。它正在*服务器*上获取时间。请注意，在开发过程中，服务器通常*恰好是*“用户的 PC”，但这是巧合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T08:28:11.780

你的分析有对有错。DateTime.Now 将从运行代码的机器上获取时间。我假设您在 ASP 脚本上拥有该部分，当您部署它们时，它将在 Web 服务器上运行。因此，时间将是 Web 服务器而不是用户的 PC。

您可以通过客户端脚本从用户 PC 获取时间；像 JS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:36:23.827

您需要正确保存服务器日期。由于您的代码将在服务器上运行，您将继续获得正确的时间。更改客户端计算机日期不会影响服务器时间。您后面的所有代码（服务器端代码）都将获得正确的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T08:39:28.213

在 asp.net 或 c# DateTime.Now 中显示应用程序正在运行的服务器的时间。

# jquery-mobile - 使用 JQuery 淘汰多个 ViewModel

> ID：14135297
> 
> 赞同：1
> 
> 时间：2013-01-03T08:25:09.253
> 
> 标签：jquery-mobile, asp.net-mvc-4, knockout.js

我有这个[小提琴](http://jsfiddle.net/bcus2/)

它在小提琴中完美运行，但是一旦我将所有内容放入 ASP.NET MVC4 应用程序中，第二个 ViewModel 就没有加载！这通常仅在我将以下脚本标记添加到我的项目时

```
<script src="../../Scripts/jquery.mobile-1.2.0.js" type="text/javascript"></script> 
```

我需要一些 JQuery 函数来加载第二个 ViewModel 还是我做错了什么？;)

这是我的代码：

```
<form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }"> 
 //SomeCode
</form>

<form action="" data-bind=" template:{ 'if': startVM, data: startVM}"> 
//Some Code
</form>

<script type="text/javascript">

        var masterViewModel = {

            loginVM: ko.observable(),
            startVM: ko.observable(),
            projektUnterbrechen: ko.observable(),
            logout : ko.observable(),
            projectStartVM: ko.observable()

        };

        var LoginVM = function () {
            var self = this;
            self.mandant = ko.observable();
            self.user = ko.observable();
            self.password = ko.observable();
            self.showDetails = function () {
                if ((self.user() == "Gregor") && (self.password() == "gregrech")) {
                    masterViewModel.loginVM(null);
                    masterViewModel.startVM(new StartVM());
                    **//alert(masterViewModel.startVM()!=null) //==True** 

                }
                else {
                    alert("Username oder Passwort falsch");
                }

            };
        };

        var StartVM = function () {
            self = this;
            **//alert(masterViewModel.startVM()!=null) //==False**
            //Um weiterzumachen muss man eingeloggt sein
            self.favoriten = ko.observableArray([
                {
                    projectName: "Favorit1"
                },
                {
                    projectName: "Favorit2"
                },
                {
                    projectName: "Favorit3"
                }
                ]);
            //Die zuletzt verwendeten Projekte
            self.zuletzt = ko.observableArray([
            {
                lastProjName: "Zuletzt1"
            },
            {
                lastProjName: "Zuletzt2"
            },
            {
                lastProjName: "Zuletzt3"
            }
            ]);
            self.showStart = function (projectName, data, event) {
                masterViewModel.projectStartVM(new ProjectStartVM(projectName));
                masterViewModel.startVM(null);
            };
        };
        masterViewModel.loginVM(new LoginVM());
        $(document).on('pageinit', function () {
            ko.applyBindings(masterViewModel);
        });

</script> 
```

谢谢您的回答

编辑：我发现，如果我比较我的 masterViewModel.startVM()!= null 即使它必须相同，我也会得到不同的值！也许这对你有帮助！请查看我的代码中带有“**”的注释以了解我的意思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:37:13.990

尝试在就绪事件而不是 pageinit 事件中加载视图模型。

```
$(document).ready(function () {
    ko.applyBindings(masterViewModel);
}); 
```

# php - Zend Framework 2 - ZFCUser 模块安装

> ID：14135298
> 
> 赞同：2
> 
> 时间：2013-01-03T08:25:15.897
> 
> 标签：php, authentication, doctrine-orm, zend-framework2, zfcuser

我的`ZF2`项目需要一个身份验证模块。

ZFCUser 似乎很好，我成功安装了它。但是现在由于缺少任何进一步的文档（或者我只是不知道在哪里寻找它），我有点迷失了。

**1）我想包含[ZFCUser-DoctrineORM](https://github.com/ZF-Commons/ZfcUserDoctrineORM)但自述文件基本上说的是模块的名称，仅此而已。我该怎么做才能让它工作？**

在尝试了一段时间后，我在 URL 下找到了登录页面`/user/`和一个[代码片段](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-embed-the-login-form-on-another-page)，它显示了如何在另一个页面上包含表单。

**2) 但是我如何让我的所有其他页面或模块都需要登录？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:49:08.513

**问题 1**

好吧，现在想通了……其实很简单！

*作曲家.json*

```
"zf-commons/zfc-user-doctrine-orm": "dev-master" 
```

跑

```
php composer.phar update 
```

在 application.config下添加*应用*

```
'ZfcUserDoctrineORM' 
```

跑`Doctrine CLI`

```
doctrine-module orm:schema-tool:update --force 
```

**问题2**

以下是[检查登录状态](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-check-if-the-user-is-logged-in)的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:32:45.010

这是 ZfcUser 的 wiki：[https ://github.com/ZF-Commons/ZfcUser/wiki](https://github.com/ZF-Commons/ZfcUser/wiki)

如果你还没有[https://github.com/ZF-Commons/ZfcUser ，你也可以看这里](https://github.com/ZF-Commons/ZfcUser)

编辑您的 composer.json 的 require 部分添加

```
"require": {
    "zf-commons/zfc-base": "dev-master",
    "zf-commons/zfc-user": "dev-master",
    "doctrine/doctrine-orm-module": "dev-master"
} 
```

现在通过运行命令告诉作曲家下载：

```
$ php composer.phar update 
```

# c# - IBM db2 驱动部署/安装

> ID：14135302
> 
> 赞同：1
> 
> 时间：2013-01-03T08:25:46.007
> 
> 标签：c#, .net, ado.net, db2

我正在尝试使用 C# 应用程序连接到 IBM DB2 数据库。起初我已经安装`IBM Data Server Driver Package`了，根据[文档](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.swg.im.dbclient.install.doc/doc/c0022612.html)，它*适用于使用 ODBC、CLI、.NET、OLE DB、PHP、Ruby、JDBC 或 SQLJ 的应用程序，使用 IBM Data Server Driver Package*。然后我想我可以使用`IBM.Data.DB2`汇编并愉快地连接。它根本不起作用，因为该应用程序`db2app.dll`在其当前工作目录中查找时不断崩溃。

然后我安装了`IBM Data Server Client`，它在“bin”目录中有这个dll，我将它添加到系统路径中。这没有帮助，所以我将它复制到我的应用程序的构建目录中，它现在可以工作了。但我不认为这是正确的，因为我还必须将`msg\en_US\db2nmp.xml`文件复制到我的构建目录以获取异常错误文本。

我认为从 DB2 安装中复制所有这些文件是错误的，我应该能够以某种方式强制`IBM.Data.DB2`程序集在系统路径中查找所需的文件，而不是在其工作目录中。我也认为这`Data Server Driver Package`应该足够了，但是`IBM.Data.DB2.dll`直到我安装了更大的`Data Server Client`.

我认为问题出在我身上，而不是 IBM，所以我在做一些明显或微妙的错误。

我的问题是：如何使用较小`IBM Data Server Driver Package`的 .NET 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:10:38.217

我认为您正在寻找 DB2 手册中提供的这些信息：http: [//pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.swg.im.dbclient.adonet.doc/doc /c0010960.html](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.swg.im.dbclient.adonet.doc/doc/c0010960.html)

也许这也有帮助：http: [//www.ibm.com/developerworks/wikis/display/DB2/DB2%20and%20.NET%20FAQs#DB2and.NETFAQs-WherecanIfindtheDB2.NETproviderandVSAddins%3F](http://www.ibm.com/developerworks/wikis/display/DB2/DB2%20and%20.NET%20FAQs#DB2and.NETFAQs-WherecanIfindtheDB2.NETproviderandVSAddins?)

一般来说，我认为您应该从这里安装 IBM Database Add-Ins for Visual Studio（需要 IBM 注册）： [https ://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source= swg-daivs](https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source=swg-daivs)

# r - 如何从文本块列表创建类似 DTM 的文本矩阵？

> ID：14135303
> 
> 赞同：1
> 
> 时间：2013-01-03T08:25:44.900
> 
> 标签：r, text-mining, corpus

一段时间以来，我一直在使用该`textmatrix()`功能来创建可以进一步用于 LSI 的 DTM。

```
dirLSA<-function(dir){
  dtm<-textmatrix(dir)
  return(lsa(dtm))
}

textdir<-"C:/RProjects/docs"
dirLSA(textdir)

> tm
$matrix
                  D1 D2 D3 D4 D5 D6 D7 D8 D9
1\. 000             2  0  0  0  0  0  0  0  0
2\. 20              1  0  0  1  0  0  1  0  0
3\. 200             1  0  0  0  0  0  0  0  0
4\. 2014            1  0  0  0  0  0  0  0  0
5\. 2015            1  0  0  0  0  0  0  0  0
6\. 27              1  0  0  0  0  0  0  1  0
7\. 30              1  0  0  0  1  0  1  0  0
8\. 31              1  0  2  0  0  0  0  0  0
9\. 40              1  0  0  0  0  0  0  0  0
10\. 45             1  0  0  0  0  0  0  0  0
11\. 500            1  0  0  0  0  0  1  0  0
12\. 600            1  0  0  0  0  0  0  0  0
728\. bias          0  0  0  2  0  0  0  0  0
729\. biased        0  0  0  1  0  0  0  0  0
730\. called        0  0  0  1  0  0  0  0  0
731\. calm          0  0  0  1  0  0  0  0  0
732\. cause         0  0  0  1  0  0  0  0  0
733\. chauhan       0  0  0  2  0  0  0  0  0
734\. chief         0  0  0  8  0  0  1  0  0 
```

Textmatrix() 是一个函数，它接受一个目录（文件夹路径）并返回一个文档方面的词频。这用于进一步分析，如潜在语义索引/分配（LSI/LSA）

但是，我遇到的一个新问题是，如果我在批处理文件中有推文数据（~500000 条推文/批处理）并且我想对这些数据执行类似的操作。

我有代码模块来清理我的数据，我想将清理后的推文直接传递给 LSI 函数。我面临的问题是`textmatrix()`不支持它。

我尝试查看其他包和代码片段，但这并没有让我更进一步。有什么方法可以创建各种行项矩阵？

我尝试发送`table(tokenize(cleanline[i]))`到一个循环，但它不会为矩阵中不存在的单词添加新列。任何解决方法？

更新：我刚试过这个：

```
a<-table(tokenize(cleanline[10]))
b<-table(tokenize(cleanline[12]))

df1<-data.frame(a)
df1
df2<-data.frame(b)
df2

merge(df1,df2, all=TRUE) 
```

我懂了：

```
> df1
    Var1 Freq
1           6
2      "    2
3    and    1
4   home    1
5   mabe    1
6 School    1
7   then    1
8   xbox    1
> b<-table(tokenize(cleanline[12]))
> df2<-data.frame(b)
> df2
        Var1 Freq
1              13
2          "    2
3  BillGates    1
4       Come    1
5       help    1
6        Mac    1
7       make    1
8  Microsoft    1
9     please    1
10   Project    1
11    really    1
12   version    1
13      wish    1
14     would    1
> merge(df1,df2)
  Var1 Freq
1    "    2
> merge(df1,df2, all=TRUE)
        Var1 Freq
1               6
2              13
3          "    2
4        and    1
5       home    1
6       mabe    1
7     School    1
8       then    1
9       xbox    1
10 BillGates    1
11      Come    1
12      help    1
13       Mac    1
14      make    1
15 Microsoft    1
16    please    1
17   Project    1
18    really    1
19   version    1
20      wish    1
21     would    1 
```

我想我很接近了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:57:01.677

尝试这样的事情

```
 ll <- list(df1,df2)
  dtm <- xtabs(Freq ~ ., data = do.call("rbind", ll)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:30:49.587

对我有用的东西：

```
textLSA<-function(text){

  a<-data.frame(table(tokenize(text[1])))
  colnames(a)[2]<-paste(c("Line",1),collapse=' ')
  df<-a

  for(i in 1:length(text)){
    a<-data.frame(table(tokenize(text[i])))
    colnames(a)[2]<-paste(c("Line",i),collapse=' ')
    df<-merge(df,a, all=TRUE)
  }

  df[is.na(df)]<-0
  dtm<-as.matrix(df[,-1])
  rownames(dtm)<-df$Var1

  return(lsa(dtm))
} 
```

你觉得这段代码怎么样？

# actionscript-3 - 将应用程序状态保存在磁盘或某个位置，以便用户稍后访问它

> ID：14135313
> 
> 赞同：3
> 
> 时间：2013-01-03T08:26:35.363
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.6

在**flex builder 4.5**中，我正在开发像[cacoo](http://www.cacoo.com)这样的项目。我想在将应用程序关闭之前保存到某个地方，而不是在应用程序**再次打开**`diagrams(display object,ui components,text)`后能够访问。

 ****更清楚： -**如果用户在此项目上编辑一些 uml 图并将其保存以供稍后编辑并关闭应用程序。几天后他/她想编辑**以前保存的图。** 现在我如何保存此图表以供将来编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:41:28.387

您可以通过 SharedObject 存储图表状态，以便更好地创建一个包含所有图表状态的类，以便以后可以使用

SharedObject 使用[http://livedocs.adobe.com/flex/3/html/help.html?content=lsos_5.html](http://livedocs.adobe.com/flex/3/html/help.html?content=lsos_5.html)

您可以`registerClassAlias`用于存储在 sharedobject 中的自定义类。

```
myClassInstance = new MyClass();
myClassInstance.x = 100;
myClassInstance.y = 100;
myClassInstance.text = "diagrams";

registerClassAlias("com.path.to.MyClass", MyClass);
myStuff = SharedObject.getLocal("myAppStuff");
myStuff.data.whatINamedIt = myClassInstance;
myStuff.flush(); 
```

现在什么时候把它拿回来......你可以说：

```
myStuff = SharedObject.getLocal("myAppStuff");
var mySavedClass:MyClass = myStuff.data.whatINamedIt as MyClass; 
```

读取 mySavedClass 实例值，然后在再次打开时注入您的图表模型。

实现应用程序关闭事件

[http://www.flexer.info/2007/10/25/fabridge-warn-on-flex-application-exit/](http://www.flexer.info/2007/10/25/fabridge-warn-on-flex-application-exit/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:48:28.533

如果保存/打开对话框对您有用，您可以`FileReference`使用 API。在这样做之前，您必须将您的状态序列化/反序列化到/从//`String`对象中。`ByteArray``XML`

```
private var fileReference:FileReference;

// due to security restrictions, this method must be called from an
// event handler that responds to a user event (mouse click or key
// press), otherwise it will fail.

private function saveState(serializedState:*, fileName:String):void {
    fileReference = new FileReference();

    fileReference.addEventListener(Event.COMPLETE, onSaved);
    fileReference.addEventListener(IOErrorEvent.IO_ERROR, onSavingError);

    try {
        fileReference.save(serializedState, fileName); // will open save dialog
    } catch (e:Error) {
        trace("error saving data: " + e.toString());
        freeListeners();
    }
}

private function onSaved(e:Event):void {
    trace("saved!");
    freeListeners();
}

private function onSavingError(e:ErrorEvent):void {
    trace("error saving data: " + e.toString());
    freeListeners();
}

private function freeListeners():void {
    fileReference.removeEventListener(Event.COMPLETE, onSaved);
    fileReference.removeEventListener(IOErrorEvent.IO_ERROR, onSavingError);
} 
```

与恢复状态类似（使用[`FileReference.browse()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29), then [`FileReference.load()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#load%28%29)）。

如果您需要在没有任何对话框的情况下保存/恢复应用程序状态，那么您可能应该使用 AIR（或者`SharedObject`，正如 Raja Jaganathan 建议的那样）。但似乎并非如此，因为您希望用户能够在另一个系统中重新打开图表。为此，您应该允许用户将他的工作保存到适当的位置，以便稍后他可以将其移动到另一台机器/系统并使用您的应用程序重新打开它。

另一种选择是将所有内容存储在服务器上并为用户提供已保存文件的列表（就像 Cacoo 所做的那样）。如果采用这种方式，则必须实现相应的服务器端 API。它可能是 REST API 或类似 RTMP 服务器的东西。在 REST API 的情况下，用于`FileReference.upload()`将数据上传到您的服务器，然后`URLLoader.load()`将其取回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:01:20.593

Sprite 或MovieClip 等DisplayObject 对象不能直接序列化。所以你应该存储对象信息（原点x，y，宽度，高度，颜色，子信息......）。使用 ByteArray 或 Array 或 Dictionary ... 并保存到 ShareObjects。稍后从 ShareObject 回滚并重新创建原始对象。MovieClip 或 Sprite 的适当用途是容器。

这是我的测试代码。

## 1\. 创建一个影片剪辑。目的是容器。

![在此处输入图像描述](../Images/7696e3b930608c5038691db492ba4981.png)

## 2.使用图形绘制一个矩形。并设置坐标。

```
var drawWidth:Number = 500;
var drawHeight:Number = 300;

var rect:MovieClip = new MyRect();
rect.graphics.beginFill(0xffffff*Math.random(),1);
rect.graphics.drawRect(0,0,drawWidth,drawHeight);
rect.graphics.endFill();
rect.x= 300;
rect.y= 100; 
```

## 3\. 将信息存储在数组中。

```
var myRectInformation:Array = new Array();
myRectInformation.push(rect.x);
myRectInformation.push(rect.y);
myRectInformation.push(drawWidth);
myRectInformation.push(drawHeight);
var bmd:BitmapData = new BitmapData(rect.width, rect.height,true,0);
bmd.draw(rect);
//is byteArray.
myRectInformation.push(bmd.getPixels(new Rectangle(0,0,bmd.width,bmd.height))); 
```

## 4.保存到SharedObjects，数组。

```
var mySaveData:SharedObject = SharedObject.getLocal("myStorage")
mySaveData.data.myRectInformation = myRectInformation;
mySaveData.flush(); 
```

## 5\. 这是从 SharedObject 加载存储的数据。并重新创建对象。

```
var rect:MovieClip = new MyRect();
var loadBmd:BitmapData = new BitmapData(mySaveData.data.myRectInformation[2], mySaveData.data.myRectInformation[3], true, 1);
loadBmd.setPixels(new Rectangle(0,0,loadBmd.width,loadBmd.height), mySaveData.data.myRectInformation[4]);
var bmp:Bitmap = new Bitmap(loadBmd);
rect.addChild(bmp);
rect.x = mySaveData.data.myRectInformation[0];
rect.y = mySaveData.data.myRectInformation[1];
addChild(rect); 
```**

# plugins - 请求 node_element 的成员导致“未定义”

> ID：14135317
> 
> 赞同：1
> 
> 时间：2013-01-03T08:26:54.480
> 
> 标签：plugins, opa

我正在将 Opa 用于一个学校项目，其中必须在几个用户之间对文本字段进行一些同步。解决此问题的简单方法是，只要其中一位用户执行更改，就传输完整的字段。更好的方法当然是只传输更改。

我的想法是在文本字段中使用插入符号位置。当用户键入时，可以根据插入符号的位置（只是插入符号之前的字符）获取最后键入的字符。DOM 元素有一个易于使用的字段，称为 selectionStart。我有这个小Javascript：

```
document.getElementById('content').selectionStart 
```

如果插入符号位于字段中的第五个字符，则正确返回 5。在 Opa 中，我不能在 DOM 或 dom_element 上使用 selectionStart，所以我想我会写一个小插件。结果是这样的：

```
##extern-type dom_element

##register jsGetCaretPosition: dom_element -> int
##args(node)
{
    return node.selectionStart;
} 
```

这与 opp-builder 一起编译没有任何问题，当我将这一小行代码放入我的 Opa 脚本时：

```
#pos = %%caret.jsGetCaretPosition%%(Dom.of_selection(Dom.select_id("content"))); 
```

这也可以毫无问题地编译。但是，当我运行脚本时，它总是返回“未定义”，我不知道我做错了什么。我查看了 API，`Dom.of_selection(Dom.select_id("content"))`看起来是获取相应 dom_element 类型数据以提供给插件的正确方法。插件返回“未定义”的事实似乎表明所选元素不知道成员“selectionStart”，尽管我在 Javascript 中的测试代码另有建议。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:04:08.970

在 Opa dom_element 中是 jQuery 选择的结果（即 dom 节点数组）。因此，如果我很好地理解了您的程序，您应该编写类似的东西`node[0].selectionStart`而不是`node.selectionStart`.

此外，您应该注意不包含 textarea 节点的空选择和选择（没有 selectionStart 属性）。也许正确的代码是`tmp == undefined ? -1 : tmp = node[0].selectionStart == undefined ? -1 : tmp`

# php - 为什么代码返回false

> ID：14135320
> 
> 赞同：-3
> 
> 时间：2013-01-03T08:27:29.650
> 
> 标签：php, joomla

即使我上传具有有效扩展名的文件，我也有以下代码返回 false ？

```
$file = JRequest::getVar('filename', null, 'files', 'array');

jimport('joomla.filesystem.file');

if(strtolower(JFile::getExt($file)) == 'pdf' || strtolower(JFile::getExt($file)) == 'gif' || strtolower(JFile::getExt($file)) == 'jpg' || strtolower(JFile::getExt($file)) == 'png') {
  // ..
}
else {
  // ..
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:48:30.497

`JFile::getExt()`joomla API 的函数返回任何文件的扩展名，但我认为有一个错误，如果您的文件没有扩展名，例如没有任何扩展名的自述文件，在这种情况下它应该返回 null，但它返回完整的文件路径。

所以，我们应该使用这个更好的选择

```
pathinfo ($file_path,PATHINFO_EXTENSION); 
```

[**阅读更多**](http://php.net/manual/en/function.pathinfo.php)

[**阅读此内容，例如**](http://www.electrictoolbox.com/php-filename-extension/)& [**This too**](https://stackoverflow.com/questions/5214366/how-to-make-pathinfo-return-the-right-extension)

# iphone - 将子视图添加到显示奇怪行为的单元格视图

> ID：14135322
> 
> 赞同：0
> 
> 时间：2013-01-03T08:27:41.110
> 
> 标签：iphone, objective-c, cocoa-touch

我正在尝试将单元格添加到 tableView

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *MyIdentifier = @"MyIdentifier";
        UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
        [cell setSelectionStyle:UITableViewCellEditingStyleNone];
        // Set up the cell

        cell.backgroundColor = [UIColor clearColor];
        UIButton *buyBtn = [UIButton buttonWithType:UIButtonTypeCustom];
        UIImageView *img;
        UILabel *lbl;
        UIImageView *backImage;
        UILabel *textLabel;
        UILabel *detailTextLabel;

        NSInteger val = [indexPath row] * 3;

        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        {
            //*buyBtn = [[UIButton alloc] initWithFrame:CGRectMake(x, y, w, h)];
            [buyBtn setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];

            //*img = [[UIImageView alloc] initWithFrame:CGRectMake(x, y, w, h)];
            [img setImage:[UIImage imageNamed:@""]];
            //*lbl = [[UILabel alloc] initWithFrame:CGRectMake(x,y,w,h)];
        }
        else
        {
            backImage =  [[UIImageView alloc] initWithFrame:CGRectMake(2, 4, 316, 62)];
            [buyBtn setFrame:CGRectMake(257, 100, 57, 24)];
            img = [[UIImageView alloc] initWithFrame:CGRectMake(257, 75, 57, 24)];

            lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 57, 24)];
            textLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 4, 230, 25)];
            detailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 25, 230, 30)];

            backImage.image = [UIImage imageNamed:@"shop-bg.png"];
            [buyBtn setImage:[UIImage imageNamed:@"buy_button"] forState:UIControlStateNormal];
            [img setImage:[UIImage imageNamed:@"price_button.png"]];

            lbl.center = img.center;
            lbl.textAlignment =  UITextAlignmentCenter;
            lbl.text = [self.original_List objectAtIndex:val+2];
            lbl.backgroundColor = [UIColor clearColor];

            textLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:14];
            textLabel.backgroundColor = [UIColor clearColor];
            textLabel.text = [self.original_List objectAtIndex:val];

            detailTextLabel.text = [self.original_List objectAtIndex:val+1];
            detailTextLabel.backgroundColor = [UIColor clearColor];
            detailTextLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:10];
            textLabel.textColor = [UIColor blackColor];
            detailTextLabel.textColor = [UIColor whiteColor];
            detailTextLabel.numberOfLines = 2;
        }

        [buyBtn setTag:[indexPath row]];
        [buyBtn addTarget:self action:@selector(buyBtnPressed:) forControlEvents:UIControlEventTouchDown];
        [cell addSubview:backImage];
        [cell addSubview:detailTextLabel];
        [cell addSubview:textLabel];
        [cell addSubview:buyBtn];
        [cell addSubview:img];
        [cell addSubview:lbl];

        return cell;
    } 
```

从图中可以看出，第一个单元格不包含添加的图像、标签和按钮，但是如果滚动其他单元格，那些失去视图的单元格将变为透明，而那些在视图中的单元格则正常。

为什么我的三个子视图没有从第一个单元格中添加，我的 textLabel 和 detailTextLabel 是按应有的方式添加的。

![在此处输入图像描述](../Images/483bfb492c9c7b500785d4228f658a19.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:44:31.167

首先，您不会使单元格出列，并且总是在不重复使用的情况下创建一个新单元格。尝试添加这样的内容（不确定是否需要自动释放，取决于您使用 ARC 的天气）：

```
RecentsTableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
        cell = [[[RecentsTableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                            reuseIdentifier:cellIdentifier] autorelease];
} 
```

其次，如果您没有使用 ARC（自动参考计数），那么您会在这里丢失大量参考。

[[Class alloc] init] 添加 ref 并且 addSubview 也添加了 ref。我想知道xcode“分析”构建对此有何看法。

第三，恕我直言，您添加到单元格的所有标签还需要设置它们的“框架”属性，而不仅仅是行数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:10:46.293

您是否不断将子视图添加到单元格而不删除任何子视图？在添加子视图时检查条件，**比如**我写的代码不准确：

```
 if ([[cell.contentView subviews] count]==0) {
  [self.contentView addSubview:imageView];
 } 
```

如果单元格内容视图不包含该视图，则添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:11:39.623

以前的答案是正确的，尽管您可以解决更多问题。

添加子视图的代码部分只应在单元格未出列的情况下调用。否则，您将添加相同按钮、视图等的多个实例。

```
[cell addSubview:backImage];
[cell addSubview:detailTextLabel];
[cell addSubview:textLabel];
[cell addSubview:buyBtn];
[cell addSubview:img];
[cell addSubview:lbl]; 
```

另外我想最好添加到 cell.contentView 而不是直接添加到单元格。所以它应该看起来像这样：

```
RecentsTableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[[RecentsTableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                        reuseIdentifier:cellIdentifier] autorelease];

    /*Create your subviews here*/

    [cell.contentView addSubview:backImage];
    [cell.contentView addSubview:detailTextLabel];
    [cell.contentView addSubview:textLabel];
    [cell.contentView addSubview:buyBtn];
    [cell.contentView addSubview:img];
    [cell.contentView addSubview:lbl];
}

// Below just set properties of existing subviews of the cell: color, textColor, text etc.
// You need to retrieve them and one way is to assign them to properties in 
// RecentsTableViewCell or set the tag property of the subviews and retrieve
// them using e.g. [cell.contentView viewWithTag:kBuyButtonTag].
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    ...
}
else {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:00:03.867

这是我如何做到的示例。我创建了单元类派生了你需要的东西（在我的例子中是 CopyableCell）。

这是 *.h 文件。

```
#import <UIKit/UIKit.h>
#import "CopyableCell.h"

@interface RecentsTableViewCell : CopyableCell

@property (readonly, retain) UILabel *titleLabel;
@property (readonly, retain) UILabel *detailsLabel;
@property (readonly, retain) UILabel *subdetailsLabel;
@property (readonly, retain) UILabel *subtitleLabel;

@end 
```

这是 *.m 文件。

```
#import "RecentsTableViewCell.h"

@interface RecentsTableViewCell ()

// Redeclare property as readwrite
@property (readwrite, retain) UILabel *titleLabel;
@property (readwrite, retain) UILabel *subtitleLabel;
@property (readwrite, retain) UILabel *detailsLabel;
@property (readwrite, retain) UILabel *subdetailsLabel;

@end

@implementation RecentsTableViewCell

@synthesize titleLabel;
@synthesize subtitleLabel;
@synthesize detailsLabel;
@synthesize subdetailsLabel;

- (void) layoutSubviews
{
        int leftMargin = 30;
        int rightMargin = 6;

        [super layoutSubviews];

        CGRect cellRect = self.contentView.frame;
        int width = cellRect.size.width - (leftMargin + rightMargin);

        CGSize constraintSize = CGSizeMake(300, MAXFLOAT);
        CGSize titleSize = [titleLabel.text sizeWithFont:titleLabel.font
                                       constrainedToSize:constraintSize
                                 lineBreakMode:UILineBreakModeTailTruncation];
        CGSize detailsSize = [detailsLabel.text sizeWithFont:detailsLabel.font
                                           constrainedToSize:constraintSize
                                     lineBreakMode:UILineBreakModeTailTruncation];

        if (titleSize.width > titleLabel.frame.size.width ||
            detailsSize.width > detailsLabel.frame.size.width) {
                CGRect detailsFrame = detailsLabel.frame;
                detailsFrame.size.width = detailsSize.width;
                detailsFrame.origin.x = cellRect.size.width -
                        (detailsSize.width + subdetailsLabel.frame.size.width + rightMargin);

                CGRect titleFrame = titleLabel.frame;
                titleFrame.size.width = width - detailsSize.width - subdetailsLabel.frame.size.width - 5;

                titleLabel.frame = titleFrame;
                detailsLabel.frame = detailsFrame;
        }
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
        self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
        if (self) {
                CGRect cellRect = self.contentView.frame;
                cellRect.size.height = 61;
                self.contentView.frame = cellRect;

                int leftMargin = 30;
                int rightMargin = 6;
                int x = cellRect.origin.x + leftMargin;
                int y = cellRect.origin.y;
                int width = cellRect.size.width - (leftMargin + rightMargin);
                int height = cellRect.size.height;

                int titleWidth = width * 0.75;
                int alldetailsWidth = width - titleWidth;
                int detailsWidth = alldetailsWidth * 0.65;
                int subdetailsWidth = alldetailsWidth - detailsWidth;

                int titleHeight = height * 0.38;
                int subtitleHeight = height - titleHeight;

                self.titleLabel = [[[UILabel alloc]
                                    initWithFrame:CGRectMake(x, y, titleWidth, titleHeight)] autorelease];
                self.titleLabel.font = [UIFont boldSystemFontOfSize:18.0f];
                self.titleLabel.highlightedTextColor = self.textLabel.highlightedTextColor;
                self.titleLabel.textAlignment = UITextAlignmentLeft;
                self.titleLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth |
                        UIViewAutoresizingFlexibleBottomMargin;
                [self.contentView addSubview:titleLabel];

                self.detailsLabel = [[[UILabel alloc]
                                 initWithFrame:CGRectMake(cellRect.size.width -
                                                          (detailsWidth + subdetailsWidth + rightMargin),
                                                          y + 4, detailsWidth, titleHeight - 4)] autorelease];
                self.detailsLabel.font = [UIFont boldSystemFontOfSize:13.0f];
                self.detailsLabel.textColor = [UIColor colorWithRed:0.12 green:0.439 blue:0.847 alpha:1];
                self.detailsLabel.textAlignment = UITextAlignmentRight;
                self.detailsLabel.highlightedTextColor = self.textLabel.highlightedTextColor;
                self.detailsLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin |
                        UIViewAutoresizingFlexibleHeight;
                [self.contentView addSubview:detailsLabel];

                self.subdetailsLabel = [[[UILabel alloc]
                                initWithFrame:CGRectMake(cellRect.size.width - (subdetailsWidth + rightMargin),
                                                         y + 6, subdetailsWidth, titleHeight - 6)] autorelease];
                self.subdetailsLabel.font = [UIFont systemFontOfSize:11.0f];
                self.subdetailsLabel.textColor = [UIColor colorWithRed:0.12 green:0.439 blue:0.847 alpha:1];
                self.subdetailsLabel.textAlignment = UITextAlignmentCenter;
                self.subdetailsLabel.highlightedTextColor = self.textLabel.highlightedTextColor;
                self.subdetailsLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin |
                        UIViewAutoresizingFlexibleHeight;
                [self.contentView addSubview:subdetailsLabel];

                self.subtitleLabel = [[[UILabel alloc]
                                  initWithFrame:CGRectMake(x, y + titleHeight, width, subtitleHeight - 2)] autorelease];
                self.subtitleLabel.highlightedTextColor = self.textLabel.highlightedTextColor;
                self.subtitleLabel.font = [UIFont systemFontOfSize:13.0f];
                self.subtitleLabel.textColor = [UIColor darkGrayColor];
                self.subtitleLabel.numberOfLines = 2;
                self.subtitleLabel.lineBreakMode = UILineBreakModeTailTruncation;
                self.subtitleLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth |
                        UIViewAutoresizingFlexibleTopMargin;
                [self.contentView addSubview:subtitleLabel];

                self.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
        return self;
}

- (id) init
{
        return [self initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"RecentsCell"];
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
        [super setSelected:selected animated:animated];
}

- (void) dealloc
{
        self.titleLabel = nil;
        self.subtitleLabel = nil;
        self.detailsLabel = nil;
        self.subdetailsLabel = nil;
        [super dealloc];
}

@end 
```

请注意，我没有使用 ARC，因此如果您使用此代码，请相应地对其进行修改。这是我在表视图控制器中使用此类的方法。

```
- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *cellIdentifier = @"TransactionCell";
        NSMutableArray *data = searching ? searchResult : dataSource;
        NSDictionary *object = [data objectAtIndex:[indexPath row]];

        RecentsTableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:cellIdentifier];
        if (cell == nil) {
                cell = [[[RecentsTableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                                    reuseIdentifier:cellIdentifier] autorelease];
        }
        cell.selectionStyle = UITableViewCellSelectionStyleBlue;
        cell.indexPath = indexPath;
        cell.delegate = self;

        cell.titleLabel.text = @"Transaction title";
        if (pendingTransaction) {
                cell.titleLabel.textColor = [UIColor grayColor];
                cell.titleLabel.font = [UIFont systemFontOfSize:cell.titleLabel.font.pointSize];
        } else {
                if (!isGreen)
                        cell.titleLabel.textColor = [UIColor colorWithRed:0.733 green:0.098
                                                                     blue:0.098 alpha:1];
                else
                        cell.titleLabel.textColor = cell.textLabel.textColor;
                cell.titleLabel.font = [UIFont boldSystemFontOfSize:cell.titleLabel.font.pointSize];
        }
        cell.subtitleLabel.text = @"Transaction subtitle";
        cell.detailsLabel.text = @"Some details like location";
        cell.subdetailsLabel.text = @"200 USD";
        return cell;
} 
```

这会生成与您在 iphone 通话应用程序中看到的非常相似的表格，即标题、副标题、单元格最右侧位置的蓝色子详细信息等。

您可以在应用商店的 Torchoo 应用中看到它。它是免费使用的，您可以使用测试帐户登录并查看它作为示例。

希望这个对你有帮助。

# emacs - 如何在 Gmail 中使用 GNUS？

> ID：14135325
> 
> 赞同：2
> 
> 时间：2013-01-03T08:27:44.010
> 
> 标签：emacs, gmail, gnus

我搜索了几个邮件客户端，但都搞砸了。我能找到的最好的是 gnus，我设法将其配置为从 Gmail 中检索数据。然而：

1.  当我在 gnus 中阅读消息时，它仍然在 gmail 上标记为未读
2.  我找不到如何为电子邮件分配标签
3.  我找不到如何排序或删除消息（最好使用键绑定）？

我认为我的问题是 gnus 使用了让我感到困惑的新闻组术语。

网上有没有只关注这个的教程？

我的问题是如何测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T08:28:37.600

我对您的 1 感到惊讶，因为当我在 gnus 中阅读邮件时，它们在 gmail 中被标记为已读。

其余的，gmail 将标签映射到 IMAP 文件夹，所以

```
B m nnimap+gmail:commande 
```

将文章移动到命令标签，并用命令标签标记它。如果需要，GNUS 将创建该文件夹。

可能，复制邮件`B c`会添加标签，但我不使用它。

```
B m nnimap+gmail:[Gmail]/Trash 
```

将其放入垃圾文件夹，然后将其删除。

`B Del`使用到期 ( )删除它`E`只会删除标签或归档邮件。我已经设置：

```
(setq gnus-parameters
      '(("nnimap\\+gmail:INBOX" (expiry-wait . 2)))) 
```

这将在收到邮件两天后存档标记为过期的邮件。

# java - 通过Java代码创建静态表

> ID：14135330
> 
> 赞同：1
> 
> 时间：2013-01-03T08:28:07.263
> 
> 标签：java, jsp

我想使用`Java`代码创建一个静态表，将其与数据库中的另一个表连接起来。

我知道列数和行数以及数据，它们都不会改变，所有值都是恒定的。

该表不会在数据库中创建，它仅在代码中，将在应用程序启动时创建。

我是 Java 编码的新手，我以前在 C# 上工作，我在互联网上搜索了很多，我发现的只是如何在数据库中创建表，这不是我想要的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:24:15.290

你可以使用`ResultSet`，但你会发现它不像`DataTable`在 c# 中你可以参考这个链接，也许它会帮助你 [在 Java 中等效的 DataTable](https://stackoverflow.com/questions/1340283/datatable-equivalent-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:46:38.137

有关在 JSP 中使用表的示例，请参见[此处的答案](https://stackoverflow.com/questions/3241487/jsp-java-table-issue)

在您的情况下，您可以拥有一个静态列表并将其添加到您从数据库中获得的“汽车”中。

此外，如果您希望表格正确排序，请查看实现 Comparable 接口。

# iphone - 从我的 iOS 应用中找出谁来电

> ID：14135332
> 
> 赞同：0
> 
> 时间：2013-01-03T08:28:11.280
> 
> 标签：iphone, ios, core-telephony

有没有可能找出我的应用程序启动时或在后台调用的人（没关系）。一般来说，我可以从代码中获取联系人姓名（例如 John Doe）吗？我搜索了 Core Telephony Framework，但 CTCall 中只有一个 CallID 属性 - 但没有像联系人这样的属性。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:36:01.203

它`not possible`在`iOS`.

但在`jailbreak`它可能是`possible`。我不知道那件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:39:15.187

你无法得到谁在打电话。没有官方的api。也许你可以在越狱中做到这一点。

# javascript - 城市/国家 - 网页上的邮政/邮政编码匹配/验证检查

> ID：14135334
> 
> 赞同：0
> 
> 时间：2013-01-03T08:28:27.757
> 
> 标签：javascript, jquery, html, jquery-plugins

我目前正在寻找可能的方法来在我的“联系我们”网页上实施邮政编码/邮政编码检查机制，在该网页上，用户选择一个国家和/或城市，系统列出或验证相关的邮政编码/邮政编码该地区可用且有效的邮政编码最好通过 JavaScript 或 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:09:02.597

这可以通过 AJAX 和一些 MySQL 查询在 JavaScript 或 jQuery 中完成，您可以使用几个免费的邮政编码数据库......我不建议尝试将其作为独立的 JavaScript 或 jQuery 脚本来实现......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:11:57.827

另一种选择可能是使用寻址 API 验证 posdtcode（例如 Postcode Anywhere's，我工作的公司：[http ://www.postcodeanywhere.co.uk/support/webservices/PostcodeAnywhereInternational/Interactive/RetrieveByPostalCode/v2.2/ default.aspx](http://www.postcodeanywhere.co.uk/support/webservices/PostcodeAnywhereInternational/Interactive/RetrieveByPostalCode/v2.2/default.aspx)）来检查是否存在邮政编码以及验证它的格式。这可以通过 JavaScript 轻松完成。它还允许您验证城市是否匹配。

# java - 向 Chrome 同步服务发送 HTTPS 请求 - 收到错误 404

> ID：14135336
> 
> 赞同：4
> 
> 时间：2013-01-03T08:28:53.663
> 
> 标签：java, sockets, ssl

我正在尝试向位于[https://clients4.google.com](https://clients4.google.com)的 Chrome 同步服务发送 POST 请求。我正在使用那一小段代码来发送我之前在 BURP Suite 的帮助下捕获并保存到文件中的请求。这是 Chrome 在连接到同步服务时发送的内容。该代码打开一个 SSLSocket，连接到 Chrome 服务器并发送该文件的内容（见下文）：

```
private void sendRequest() {
    SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();
    SSLSocket socket = (SSLSocket) sslsocketfactory.createSocket("clients4.google.com", 443);
    socket.startHandshake();

    BufferedWriter out = new BufferedWriter(
            new OutputStreamWriter(socket.getOutputStream(), "UTF8"));
    BufferedReader in = new BufferedReader(
            new InputStreamReader(socket.getInputStream()));

    sendMessage(out, new File("request.bin"));
    readResponse(in);

    out.close();
    in.close();
}

private void sendMessage(BufferedWriter out, File request) throws IOException {
    List<String> result = getContents(request);
    for (String line : result) {
        out.write(line + "\r\n");
    }
    out.write("\r\n");
    out.flush();
}

private void readResponse(BufferedReader in) throws IOException {
    String line;
    while ((line = in.readLine()) != null) {
        System.out.println(line);
    }
}

private List getContents(File file) throws IOException {
    List<String> contents = new ArrayList<String>();
    BufferedReader input = new BufferedReader(new FileReader(file));
    String line;
    while ((line = input.readLine()) != null) {
        contents.add(line);
    }
    input.close();
    return contents;
} 
```

request.bin 文件如下所示（这是一个没有 SSL 的明文请求）：

```
POST /chrome-sync/command/?client=Google+Chrome&client_id={VALID_CLIENT_ID} HTTP/1.1
Host: clients4.google.com
Connection: keep-alive
Content-Length: 1730
Authorization: GoogleLogin auth={MY_VALID_AUTH_DATA}
Content-Type: application/octet-stream
User-Agent: Chrome WIN 23.0.1271.97 (171054)
Accept-Encoding: gzip,deflate,sdch
Accept-Language: de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

{binary data} 
```

现在此请求失败，因为服务器返回*HTTP/1.0 404 Not Found*。但是为什么会这样呢？这与 Chrome 发送的请求完全相同，不是吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T22:07:11.090

在这里回答我自己的问题：问题出在编码上。请求正文中的二进制数据稍作修改，导致 Google 服务器响应错误代码 404（这非常令人困惑）。现在我使用了正确的编码，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:17:04.383

如果您`chrome://sync/`在 chrome 的地址栏中输入，您将看到服务器 url 为：

```
https://clients4.google.com/chrome-sync/dev 
```

您可以在此链接中找到更多信息：

[http://code.google.com/p/chromium/issues/detail?id=90811](http://code.google.com/p/chromium/issues/detail?id=90811)

和/命令？需要认证。我发现一些信息可能对你有帮助。检查此问题的评论： [http ://code.google.com/p/chromium/issues/detail?id=108186](http://code.google.com/p/chromium/issues/detail?id=108186)

希望能帮助到你

# javascript - 检索数据绑定 d3

> ID：14135338
> 
> 赞同：1
> 
> 时间：2013-01-03T08:29:07.507
> 
> 标签：javascript, plugins, d3.js

我正在尝试创建一个 d3 插件，这个 stackoverflow 问题：

[如何制作一个d3插件？](https://stackoverflow.com/questions/13983864/how-to-make-a-d3-plugin)

但在他展示的例子中

```
(function() {
    d3.selection.prototype.editable = d3.selection.enter.prototype.editable = function() {
        return this.attr('data-editable', true);
      };
})(); 
```

我看不出他如何实际检索与选择相关的数据。这是否甚至可以通过 d3.selection 的扩展来检索？我对 d3 源代码进行了一点处理，但发现自己比以前更加困惑。

写过 d3 扩展/插件的人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:15:16.263

在 javascript 中，`this`引用的对象（通常在上面的示例代码中）由调用`this`出现的函数的对象确定。

因此，该行将`return this.attr('data-editable', true);`返回与调用完全相同的 d3 选择对象`editable`。

因此，您将获得正常的旧 d3 选择对象，就像在普通的 d3 方法链接模式中一样。一旦你有了它，获取数据[只是查找 d3 选择对象的 API 的问题。](https://github.com/mbostock/d3/wiki/Selections#wiki-data)

如果您对如何取回数据特别感兴趣，请查看 data 方法。从上面的链接中，当没有参数调用该方法时：

> 如果未指定值，则此方法返回选择中第一组的数据数组。返回数组的长度将匹配第一组的长度，并且返回数组中每个数据的索引将匹配选择中的相应索引。如果选择中的某些元素为空，或者它们没有关联数据，则数组中的相应元素将是未定义的。

# dns - domain.com 有效，但 www.domain.com 在亚马逊 ec2 上无效

> ID：14135340
> 
> 赞同：1
> 
> 时间：2013-01-03T08:29:14.977
> 
> 标签：dns, amazon-web-services, amazon-ec2

任何人都知道为什么我的域在我输入 mydomain.com 到地址栏时有效，但如果我输入 www.mydomain.com 则无效？

我正在使用亚马逊的 EC2 服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T11:45:57.750

如果您使用的是 AWS 的 Route 53；我们可以创建一个别名并进行配置，以便将非 www 重定向到 www。您需要在 Route 53 上创建的记录集是假设 example.com [第一个文本框中的空白]。键入 A。别名为 Yes。别名目标为 www.example.com。路由策略很简单。

如果您不使用 Route 53；您可以使用 .htaccess 文件；或在您的 web.xml 中创建一个过滤器以实现相同的重定向。

# php - 减小链接 (URL) 大小

> ID：14135342
> 
> 赞同：2
> 
> 时间：2013-01-03T08:29:18.977
> 
> 标签：php, javascript, url, hyperlink, reduce

是否可以通过 PHP 或 JS 减小链接的大小（以文本形式）？

例如，我可能有这样的链接：

```
http://www.example.com/index.html                     <- Redirects to the root
http://www.example.com/folder1/page.html?start=true   <- Redirects to page.html
http://www.example.com/folder1/page.html?start=false  <- Redirects to page.html?start=false 
```

目的是找出链接是否可以缩短并仍然指向同一位置。在这些示例中，可以减少前两个链接，因为第一个指向根，第二个具有可以省略的参数。
第三个链接就是这种情况，其中参数不能省略，这意味着除了删除`http://`.

所以上面的链接会像这样减少：

```
Before: http://www.example.com/index.html
After:  www.example.com

Before: http://www.example.com/folder1/page.html?start=true
After:  www.example.com/folder1/page.html

Before: http://www.example.com/folder1/page.html?start=false
After:  www.example.com/folder1/page.html?start=false 
```

这可以通过 PHP 或 JS 实现吗？

**笔记：**

`www.example.com`不是我拥有或通过 URL 访问的域。这些链接可能是未知的，我正在寻找一个类似于自动链接缩短器的东西，它可以通过获取 URL 而不是其他东西来工作。

实际上，我正在考虑类似链接检查器之类的东西，它可以检查链接在自动修剪之前和之后是否有效，如果没有，那么将在链接的修剪较少的版本中再次进行检查。但这似乎有点矫枉过正......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:07:50.393

由于您想自动执行此操作，并且您不知道参数如何更改行为，因此您必须通过反复试验来做到这一点：尝试从 URL 中删除部分，并查看服务器是否以不同的页面响应.

在最简单的情况下，这可能会像这样工作：

```
<?php
    $originalUrl = "http://stackoverflow.com/questions/14135342/reduce-link-url-size";

    $originalContent = file_get_contents($originalUrl);

    $trimmedUrl = $originalUrl;

    while($trimmedUrl) {
        $trialUrl = dirname($trimmedUrl);
        $trialContent = file_get_contents($trialUrl);
        if ($trialContent == $originalContent) {
            $trimmedUrl = $trialUrl;
        } else {
            break;
        }
    }

    echo "Shortest equivalent URL: " . $trimmedUrl;
    // output: Shortest equivalent URL: http://stackoverflow.com/questions/14135342
?> 
```

对于您的使用场景，您的代码会稍微复杂一些，因为您必须依次测试每个参数以查看是否有必要。有关起点，请参阅[parse_url()](http://php.net/parse_url)和[parse_str()](http://php.net/parse_str)函数。

请注意：此代码非常慢，因为它会对您要缩短的每个 URL 执行大量查询。此外，它可能无法缩短许多 URL，因为服务器可能在响应中包含时间戳等内容。这使得问题变得非常困难，这就是为什么像谷歌这样的公司有很多工程师考虑这样的事情:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:38:14.967

是的，这是可能的：

JS：

```
var url = 'http://www.example.com/folder1/page.html?start=true';
url = url.replace('http://','').replace('?start=true','').replace('/index.html',''); 
```

php:

```
$url = 'http://www.example.com/folder1/page.html?start=true';
$url = str_replace(array('http://', '?start=true', '/index.html'), "", $url); 
```

（其中的每一项`array()`都将替换为`""`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:46:11.740

这是给你的JS。

```
function trimURL(url, trimToRoot, trimParam){
    var myRegexp = /(http:\/\/|https:\/\/)(.*)/g;
    var match = myRegexp.exec(url);
    url = match[2];
    //alert(url);  // www.google.com
    if(trimParam===true){
        url = url.split('?')[0];
    }
    if(trimToRoot === true){
        url = url.split('/')[0];
    }
    return url
}

alert(trimURL('https://www.google.com/one/two.php?f=1'));
alert(trimURL('https://www.google.com/one/two.php?f=1', true));
alert(trimURL('https://www.google.com/one/two.php?f=1', false, true)); 
```

小提琴：http: [//jsfiddle.net/5aRpQ/](http://jsfiddle.net/5aRpQ/)

# asp.net-mvc - 为什么 StructureMap 不注入属性？

> ID：14135344
> 
> 赞同：1
> 
> 时间：2013-01-03T08:29:24.863
> 
> 标签：asp.net-mvc, nhibernate, inversion-of-control, structuremap

我创建了一个从该类继承的`Registry`类。在这个类中，我想注入一个属性：

```
ForConcreteType<Person>()
    .Configure
    .Setter(s => s.PersonSpecializationManager)
    .Is(t => t.GetInstance<IPersonSpecializationManager>()); 
```

属性定义如下：

```
/// <summary>
/// Gets or sets the person specialization manager
/// </summary>
public virtual IPersonSpecializationManager PersonSpecializationManager
{
    get
    {
        return _personSpecializationManager;
    }
    set
    {
        _personSpecializationManager = value;
    }
} 
```

我不能使用构造函数注入，因为它`Person`是由 NHibernate 创建的。而且由于 NHibernate 需要一个空的构造函数，我不得不这样做。我知道我可以引入另一个处理这些`_personSpecializationManager`东西的类，但我不能这样做。

上述继承自该类的`Registry`类是在 StructureMap 中配置的。当我在 line 放置断点时`ForConcreteType<Person>() ...`，断点被命中。所以我知道它应该由 StructureMap 处理。

所以，我的问题是，为什么 StructureMap 注入不是我的财产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:32:54.713

> 我不能使用构造函数注入，因为 Person 是由 NHibernate 创建的。

让我强调一下你句子中一个极其重要的部分，其中包含你问题的答案：

> **因为 Person 是由 NHibernate 创建的。**

因此 StructureMap 完全无法控制此类的实例化。所以你不可能期望在这个类中发生任何注入。如果你想在你的 NHibernate 实体中进行一些注入，你将不得不找到一种方法（我的脑袋不记得了）来控制它们的实例化。IIRC 这可以通过订阅 NHibernate 中的一些事件来实现。因此，在虚构的*OnCreated*事件中，您可以进行注入。但是这又一次是假注入，因为您现在应该查询 StructureMap 以检索此 Person 的实例。这就是人们通常所说的定位器模式。这被认为是一个[`Anti-Pattern`](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx).

# python - Python 中全局的替代方案

> ID：14135345
> 
> 赞同：7
> 
> 时间：2013-01-03T08:30:02.520
> 
> 标签：python, global

我目前有这样的代码：

```
cache = 1
def foo():
    global cache
    # many
    # lines
    # of code
    cache = 2 
```

但是，这可能会导致将来出现难以发现的错误，因为读者可能不会注意到`global cache`上面某处出现的错误`cache = 2`。或者，贡献者可能会错误地添加`def bar(): cache = 2`并忘记添加`global cache`.

我怎样才能避免这个陷阱？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T08:45:12.130

```
class Cache:
     myvar = 1

def foo():
    Cache.myvar = 2 
```

这种方式，`Cache.myvar`实际上是一个“全局”。可以从任何地方读/写它。

我更喜欢它而不是字典替代品，因为它允许自动完成变量名。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T08:31:34.200

```
cache = 1
def foo():
    return 2
cache = foo() 
```

或者

```
d = {'cache': 1}
def foo(x):
    x['cache'] = 2
foo(d) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T08:33:43.973

“读者可能无意中认为全局变量已更新”并不是一个陷阱。您必须期望阅读您的代码的人知道 Python 是如何工作的。如果您想让它更加清晰，请使用评论。这就是他们的目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T08:50:52.743

使用全局变量不是一个好的编程习惯。将变量作为参数传递：make 函数返回一些东西并在另一个函数中使用它。函数可以赋值给变量，这就是 Python 的工作方式。

# eclipse-cdt - 在 Eclipse 中组织大型 c/c++ 项目

> ID：14135346
> 
> 赞同：1
> 
> 时间：2013-01-03T08:30:09.780
> 
> 标签：eclipse-cdt, project-organization

我正在尝试为一个大型开发项目设置 eclipse cdt (Indigo)，并且在组织 eclipse 工作区方面需要一些帮助。该项目正处于启动阶段，部分已完成，但还有更多内容有待开发。该项目涵盖多个产品，每个产品都包含多个流程和一组通用库。结构大致如下：

```
top/
  Library/
    Math/
    Sys/
    Com/
  Include/
    Math/
    Sys/
    Com/
  Product/
    Prod1/
    Prod2/ 
```

我创建了一个顶级工作区，并希望将其用于整个项目。我目前正在努力解决 Library 和 Include 部分。我需要在 Include 分支下创建一个名为 Err 的新库和一个相应的 Err 目录，这超出了在 Library 文件夹下创建的项目的范围。我应该在 Eclipse 中将其创建为单独的 Err 项目吗？我试过了，Library下的文件夹很好，但是如何在Include分支下创建相应的文件夹和文件？

这是组织项目的最佳方式，还是应该为所有库使用一个通用项目，或者将整个项目划分为多个工作区？

# silverlight - 如何在 datagrid Silverlight mvvm 中选中复选框？

> ID：14135347
> 
> 赞同：0
> 
> 时间：2013-01-03T08:30:22.177
> 
> 标签：silverlight, entity-framework, mvvm

在我的 silverlight5 和 MVVM 项目中，我有一个疑问。

我有一个 Datagrid 控件，我加载了一些客户的详细信息。

我的数据网格结构如下。

```
[CheckBox] | CustomerName | CustomerAge
________________________________________
[CheckBox] | Raj          | 23
----------------------------------------
[CheckBox] | Ravi         | 24
----------------------------------------
[CheckBox] | Rajkumar     | 25
________________________________________

<sdk:DataGrid ItemsSource="{Binding Details}" AutoGenerateColumns="False" SelectedItem="{Binding SelectedItem,Mode=TwoWay}" Name="DG">
<sdk:DataGridTemplateColumn>
  <sdk:DataGridTemplateColumn.HeaderStyle>
     <Style TargetType="sdk:DataGridColumnHeader">
        <Setter Property="Template">
          <Setter.Value>
             <ControlTemplate>
                <Grid>
                  <CheckBox VerticalAlignment="Center" HorizontalAlignment="Center" 
                            Command="{Binding AllCheckedCommand}"/>
                </Grid>
             </ControlTemplate>
          </Setter.Value>
        </Setter>
     </Style>
   </sdk:DataGridTemplateColumn.HeaderStyle>
   <sdk:DataGridTemplateColumn.CellTemplate>
   <DataTemplate>
           <CheckBox IsChecked="{Binding IsSelected,Mode=TwoWay}" Content="Select All" 
                     VerticalAlignment="Center" HorizontalAlignment="Center"/>
   </DataTemplate>
   </sdk:DataGridTemplateColumn.CellTemplate>
   </sdk:DataGridTemplateColumn>

   <sdk:DataGridTemplateColumn Header="Name" MinWidth="130" MaxWidth="180">
   <sdk:DataGridTemplateColumn.CellTemplate>
       <DataTemplate>
           <TextBlock Text="{Binding Name,Mode=TwoWay}" />
       </DataTemplate>
   </sdk:DataGridTemplateColumn.CellTemplate>
   </sdk:DataGridTemplateColumn>

   <sdk:DataGridTemplateColumn Header="Age" MinWidth="130" MaxWidth="180">
   <sdk:DataGridTemplateColumn.CellTemplate>
       <DataTemplate>
           <TextBlock Text="{Binding Age,Mode=TwoWay}" />
       </DataTemplate>
   </sdk:DataGridTemplateColumn.CellTemplate>
   </sdk:DataGridTemplateColumn>
 </sdk:DataGrid.Columns> 
```

如果我检查了顶部标题 CheckBox 意味着所有的 CheckBox 也检查了。如何建立这一点。

注意：这里 (ItemsSource="{Binding Details}") Details 是一个包含名称和年龄的类。

如何实现这一目标..？请帮我这样做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:53:05.130

我们在 WPF 聊天室中对此进行了整理。事实证明，正在使用的模型`DataContext`没有`IsSelected`属性，因此代码没有运行（或编译）。

# android - 水平居中 GridView 的子项

> ID：14135354
> 
> 赞同：2
> 
> 时间：2013-01-03T08:30:48.070
> 
> 标签：android, gridview

我希望我的网格视图行放置在中心（水平）
我有两列宽度相同。
每个项目将被放置在相应列的中心。

我试图遵循其他答案。他们都没有工作。当简单的布局不能按预期工作时，真是令人沮丧……

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                >
  <GridView
      android:id="@+id/gridView_album"
      android:numColumns="2"

      android:stretchMode="columnmWidth"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:verticalSpacing="10dp"
      android:horizontalSpacing="10dp"
      android:gravity="center"
      android:layout_gravity="center"
      >
  </GridView>

</RelativeLayout> 
```

行的 xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              >

  <LinearLayout
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginLeft="5dp"
      android:layout_marginRight="5dp"
      android:orientation="vertical" >

    <TextView
        android:id="@+id/textView_albumTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="album title" />

  </LinearLayout>

  <ImageView
      android:id="@+id/imageView1"
      android:layout_width="105dp"
      android:layout_height="100dp"
      android:src="@drawable/abs__ab_share_pack_holo_light" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:55:08.070

这就是我的做法

你的 gridView.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <GridView
        android:id="@+id/home_grid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:listSelector="@drawable/holo_blue_color"
        android:numColumns="2"
        android:layout_marginTop="10dip"
        android:verticalSpacing="10dip" >
    </GridView>

</LinearLayout> 
```

现在你的 gridView 项目 xml

```
 <?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:padding="3dp"
    android:textColor="#000000"
    android:textSize="16dip"
    android:textStyle="normal" >

</TextView> 
```

现在我做了一个适配器类来设置图像和文本

```
class MyGridAdapter extends BaseAdapter {

        ArrayList<String> name;
        ArrayList<Integer> resId;
        LayoutInflater inflater;

        public MyGridAdapter(Context context, ArrayList<String> name,
                ArrayList<Integer> resId) {
            this.name = name;
            this.resId = resId;

            inflater = LayoutInflater.from(context);
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return name.size();
        }

        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return resId.get(arg0);
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            convertView = inflater.inflate(R.layout.grid_textview, null);

            TextView tv = (TextView) convertView.findViewById(R.id.textview);
            tv.setText(name.get(position));
            tv.setCompoundDrawablesWithIntrinsicBounds(0, resId.get(position),
                    0, 0);

            return convertView;
        }

    } 
```

您不需要包含 ImageView。您可以使用围绕 TextView 对齐图像`setCompoundDrawablesWithIntrinsicBounds`

现在您的活动中只有两行

```
final MyGridAdapter adapter = new MyGridAdapter(this, name, resId);

gridView.setAdapter(adapter); 
```

# java - 在 Java 中按国家/地区获取时区

> ID：14135355
> 
> 赞同：0
> 
> 时间：2013-01-03T08:30:48.410
> 
> 标签：java, timezone

我的应用程序托管在美国。服务器时区为 GMT。现在，当人们从全球范围内访问此应用程序时，我想获取访问它的国家/地区的时区。说 - 我正在从欧洲的某个地方访问。我想获取该特定地区的时区。我希望这可以在 Java 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:02:42.150

您需要先将客户端 IP 地址映射到地理位置。

有很多数据库都有这些信息。
例如，查看[DB-IP](http://db-ip.com/db/)，这是一个数据库，其中包含 IP 地址到各种位置信息的映射信息。
您可以将数据加载到本地数据库并使用调用 IP 地址进行查询。（`HttpRequest`当您使用 Java Servlets 时，您的 . 中有这个。）
数据库的商业版本（90 美元）也包含时区。

其他可能性包括使用 Web 服务，例如[IP2Location](http://www.ip2location.com)。当客户端发出请求时，您将从服务请求数据。当然，这可能会很慢，并且您依赖于远程服务的可用性。

周围还有其他数据库和服务，请找到适合您需求的数据库和服务。

我没有找到一个免费的并且里面有时区信息的。当涉及到更大的国家时，一个国家的信息肯定是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:14:30.367

您可以采取两种方法：

1.  检测平台设置
2.  IP地理编码

方法 1 是为此使用 javascript。我使用了一个我在[这里](https://github.com/scottwater/jquery.detect_timezone)找到的模块，效果很好。我在“跳转页面”上使用了与此类似的代码，它只获取时区，然后在登录流程中重定向（将时区作为参数传递）。

```
<script type="text/javascript" src="/script/detect_timezone.js"></script>
<script type="text/javascript">
var tz_info = jstz.determine_timezone();
var timezone = tz_info.timezone;
var tz_id='';
if (timezone != 'undefined') {
    timezone.ambiguity_check();
    tz_id = timezone.olson_tz;
    alert(tz_id); // olson timezone, e.g. "Europe/London", "Asia/Tokyo" etc.
}               
</script> 
```

这比搞乱 IP 地理定位要容易得多，而且由于大多数人都将他们的计算机/设备设置为他们的“正确”时区，所以大部分时间都是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:48:05.173

我不完全确定您实际上在问什么，因为我相信您可以自己回答这个问题。

**您无法直接从 http 请求中获取时区，如此处所述：**

[是否有另一种方法可以从 Spring MVC 中的 HttpServletRequest 对象获取用户的时区？](https://stackoverflow.com/questions/6091804/is-there-another-way-to-get-a-users-time-zone-from-a-httpservletrequest-object)

**但是你可以通过ip地址来判断。这里提到：**

[如何以编程方式查找传入http请求的地理位置？](https://stackoverflow.com/questions/6006915/how-to-programmatically-find-geo-location-of-incoming-http-request)

**您也可以使用 getTimeZoneOffset()。这里提到：**

[用户从不同国家/地区登录时，需要在本地时间显示交易。](https://stackoverflow.com/questions/12143697/user-needs-to-display-transaction-in-there-local-time-as-they-login-from-differe)

在注册中提示用户输入 gmt 或国家代码（并从中计算 gmt）似乎仍然更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:19:15.343

首先，我们必须[找到客户端的时区](http://www.roseindia.net/java/java-get-example/java-get-system-timezone.shtml)。

然后根据时区，我们必须按如下方式获取时间：

```
public String getLocalTime(String timezone) {
    TimeZone tz = TimeZone.getTimeZone(timezone);
    Calendar localtime = new GregorianCalendar(tz);
    String strLocalTime = localtime.get(Calendar.HOUR_OF_DAY) + ":"
            + localtime.get(Calendar.MINUTE) + ":" + localtime.get(Calendar.SECOND);
    return strLocalTime;
} 
```

# c# - Devexpress 从 gridview child 获取值

> ID：14135357
> 
> 赞同：2
> 
> 时间：2013-01-03T08:31:11.587
> 
> 标签：c#, winforms, devexpress, devexpress-windows-ui

我使用此代码生成数据并将其输出到我的 gridview

```
string sql = "Sql Query";
string sqlCredit= "Sql Query";
string sqlCreditPayment = "Sql Query";

  SqlDataAdapter da = new SqlDataAdapter();

    DataSet ds = new DataSet();
    ds.EnforceConstraints = false;
    ds.DataSetName = "Receivables";

    ds.Tables.Add((con.ShowResult(sql, ref da)).Tables[0].Copy());
    ds.Tables[0].TableName = "dtReceivables";

    ds.Tables.Add((con.ShowResult(sqlCredit, ref da)).Tables[0].Copy());
    ds.Tables[1].TableName = "dtCredit";
    ds.Tables[1].Columns[1].ColumnMapping = MappingType.Hidden;
    ds.Tables[1].Columns[7].ColumnMapping = MappingType.Hidden;

    ds.Tables.Add((con.ShowResult(sqlCreditPayment, ref da)).Tables[0].Copy());
    ds.Tables[2].TableName = "dtCreditPayment";
    ds.Tables[2].Columns[0].ColumnMapping = MappingType.Hidden;

    DataRelation dr0 = new DataRelation("CreditList", ds.Tables[0].Columns["Id"], ds.Tables[1].Columns["DocSupplierId"]);

    ds.Relations.Add(dr0);

    DataRelation dr1 = new DataRelation("CreditPaymentList", ds.Tables[1].Columns["Id"], ds.Tables[2].Columns["SourceId"]);
    ds.Relations.Add(dr1);

    slipDashBoard.DataSource = ds.Tables["dtReceivables"];

    slipDashBoard.ForceInitialize();
    gridView1.BestFitColumns(); 
```

伙计们。请帮忙。当我点击gridview的孩子时，我想实现这样的目标。提前谢谢

![在此处输入图像描述](../Images/c7e6036a8d68066a1dc09e4c0f118599.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T08:42:08.243

在这种情况下，主要思想是获取被单击的 GridView 类的实例。XtraGrid 创建在设计时创建的模式视图的克隆，并使用这些克隆来显示数据。这是应该工作的代码：

```
GridView gridView = sender as GridView;
var value = gridView.GetRowCellValue(gridView.FocusedRowHandle, gridView.Columns["Num"));
MessageBox.Show(value.ToString()); 
```

由于您的子 GridView 是自动创建的，因此有两种方法：

1) 处理 GridControl 的 Click 事件处理程序：

```
private void gridControl1_Click(object sender, EventArgs e) {
    GridControl grid = sender as GridControl;
    Point p = new Point(((MouseEventArgs)e).X, ((MouseEventArgs)e).Y);
    GridView gridView = grid.GetViewAt(p) as GridView;
    if(gridView != null)
        MessageBox.Show(gridView.GetFocusedRowCellDisplayText("Num"));
} 
```

2) 处理 GridView1 MasterRowExpanded 事件处理程序：

```
 private void gridView1_MasterRowExpanded(object sender, CustomMasterRowEventArgs e) {
        GridView master = sender as GridView;
        GridView detail = master.GetDetailView(e.RowHandle, e.RelationIndex) as GridView;
        detail.Click += new EventHandler(detail_Click);
    }

    void detail_Click(object sender, EventArgs e) {
            GridView gridView = sender as GridView;
var value = gridView.GetRowCellValue(gridView.FocusedRowHandle, gridView.Columns["Num"));
MessageBox.Show(value.ToString());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:28:29.370

如果您在运行时创建网格，您将拥有一个类似 gridview2 的实例。现在您可以添加点击事件`gridview2.Click += new EventHandler(gridview2_Click);`

然后你会得到某事。像这样：

```
 void view_Click(object sender, EventArgs e)
    {
       //take the code from platons post...
    } 
```

# java - 如何使用 Java 日历忽略周末？

> ID：14135358
> 
> 赞同：4
> 
> 时间：2013-01-03T08:31:15.560
> 
> 标签：java, date, calendar

我试图通过忽略周末来获得两个特定时间实例之间的分钟数。这就是我所做的。

```
public static final List<Integer> NON_WORKING_DAYS;
static {
    List<Integer> nonWorkingDays = new ArrayList<Integer>();
    nonWorkingDays.add(Calendar.SATURDAY);
    nonWorkingDays.add(Calendar.SUNDAY);
    NON_WORKING_DAYS = Collections.unmodifiableList(nonWorkingDays);
}

public static int getMinsBetween(Date d1, Date d2, boolean onlyBusinessDays)
{
    int minsBetween = (int)((d2.getTime() - d1.getTime()) / (1000 * 60));
    int minsToSubtract = 0;
    if(onlyBusinessDays){
        Calendar dateToCheck = Calendar.getInstance();
        dateToCheck.setTime(d1);
        Calendar dateToCompare = Calendar.getInstance();
        dateToCompare.setTime(d2);

        //moving the first day of the week to Tues so that a Sat, sun and mon fall in the same week, easy to adjust dates
        dateToCheck.setFirstDayOfWeek(Calendar.TUESDAY);
        dateToCompare.setFirstDayOfWeek(Calendar.TUESDAY);

        //moving the dates out of weekends
        if(!isBusinessDay(dateToCheck, NON_WORKING_DAYS)){
            dateToCheck.set(Calendar.DAY_OF_WEEK, Calendar.SATURDAY);
            dateToCheck.set(Calendar.HOUR, 0);
            dateToCheck.set(Calendar.MINUTE, 0);
            dateToCheck.set(Calendar.SECOND, 0);
            dateToCheck.set(Calendar.MILLISECOND, 0);
        }

        if(!isBusinessDay(dateToCompare, NON_WORKING_DAYS)){
            dateToCompare.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
            dateToCompare.set(Calendar.HOUR, 0);
            dateToCompare.set(Calendar.MINUTE, 0);
            dateToCompare.set(Calendar.SECOND, 0);
            dateToCompare.set(Calendar.MILLISECOND, 0);
        }

        for(; dateToCheck.getTimeInMillis() < dateToCompare.getTimeInMillis() ; dateToCheck.add(Calendar.DAY_OF_MONTH, 1)){
            if(isBusinessDay(dateToCheck, NON_WORKING_DAYS)){
                minsToSubtract = minsToSubtract + 1440;
            }
        }
    minsBetween = minsBetween - minsToSubtract; 
    }
    return minsBetween;
}

private static boolean isBusinessDay(Calendar dateToCheck, List<Integer> daysToExclude){
    for(Integer dayToExclude : daysToExclude){
        if(dayToExclude != null && dayToExclude == dateToCheck.get(Calendar.DAY_OF_WEEK)) {
            return true; 
        }
        else continue;
    }
    return false;
} 
```

有人可以告诉我我的逻辑是否正确，如果不正确，该怎么做？我不太确定当周末月份发生变化时这段代码会如何表现。

一些测试用例的预期输出：

1.  周五下午 6 点，周一早上 6 点 - 应该返回 12 小时
2.  星期六 12 pm，星期日 12 pm - 应该返回 0 小时
3.  周六中午 12 点，周一早上 6 点 - 应该返回 6 小时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:44:32.613

我强烈建议将[Joda-Time](http://www.joda.org/joda-time/)用于与 Java 中的日期操作有关的任何事情，因为它具有许多有用的功能，可以使代码不那么复杂。

此代码使用 JodaTime：

```
public static final List<Integer> NON_WORKING_DAYS;
static {
    List<Integer> nonWorkingDays = new ArrayList<Integer>();
    nonWorkingDays.add(DateTimeConstants.SATURDAY);
    nonWorkingDays.add(DateTimeConstants.SUNDAY);
    NON_WORKING_DAYS = Collections.unmodifiableList(nonWorkingDays);
}

public static Minutes getMinsBetween(DateTime d1, DateTime d2,
        boolean onlyBusinessDays) {

    BaseDateTime startDate = onlyBusinessDays && !isBusinessDay(d1) ?
                new DateMidnight(d1) : d1;
    BaseDateTime endDate = onlyBusinessDays && !isBusinessDay(d2) ?
                new DateMidnight(d2) : d2;

    Minutes minutes = Minutes.minutesBetween(startDate, endDate);

    if (onlyBusinessDays) {
        DateTime d = new DateTime(startDate);

        while (d.isBefore(endDate)) {
            if (!isBusinessDay(d)) {
                Duration dayDuration = new Duration(d, d.plusDays(1));
                minutes = minutes.minus(int) dayDuration.getStandardMinutes());
            }
            d = d.plusDays(1);
        }
    }
    return minutes;
}

private static boolean isBusinessDay(DateTime dateToCheck) {
    return !NON_WORKING_DAYS.contains(dateToCheck.dayOfWeek().get());
} 
```

测试此代码时，它会给出以下结果：

```
DateTime d1 = new DateTime(2013, 1, 4, 18, 0); // a Friday, 6 pm
DateTime d2 = new DateTime(2013, 1, 7, 6, 0);  // the following Monday, 6 am

Minutes minutes = getMinsBetween(d1, d2, true);
System.out.println(minutes.toStandardHours().getHours()); // outputs "12" (in hours)

d1 = new DateTime(2013, 1, 5, 12, 0); // a Saturday, 12 pm
d2 = new DateTime(2013, 1, 6, 12, 0); // the following Sunday, 12 pm

minutes = getMinsBetween(d1, d2, true);
System.out.println(minutes.toStandardHours().getHours()); // outputs "0" (in hours)

d1 = new DateTime(2013, 1, 5, 12, 0); // a Saturday, 12 pm
d2 = new DateTime(2013, 1, 7, 6, 0);  // the following Monday, 6 am

minutes = getMinsBetween(d1, d2, true);
System.out.println(minutes.toStandardHours().getHours()); // outputs "6" (in hours) 
```

我刚刚测试了一个周末月份变化的情况：从 3 月 29 日星期五（下午 6 点）到 4 月 1 日星期一（早上 6 点）：

```
d1 = new DateTime(2013, 3, 29, 18, 0);
d2 = new DateTime(2013, 4, 1, 6, 0);

minutes = getMinsBetween(d1, d2, true);
System.out.println(minutes.toStandardHours().getHours()); 
```

结果是 12 小时，因此它适用于月份更改。

* * *

我的第一个解决方案没有正确处理夏令时。我们必须在减去分钟时确定每一天的持续时间，因为夏令时更改的天数不会是 24 小时：

```
if (!isBusinessDay(d)) {
    Duration dayDuration = new Duration(d, d.plusDays(1));
    minutes = minutes.minus(int) dayDuration.getStandardMinutes());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:01:58.683

JodaTime 是要走的路，所以@KatjaChristiansen 走在正确的轨道上。如果您需要使用 Java 日历，我的解决方案如下所示：

```
private static final long MILLIS_OF_WEEK = TimeUnit.DAYS.toMillis(7);
private static final long MILLIS_OF_WORKWEEK = TimeUnit.DAYS.toMillis(5);

public static int getMinsBetween(Date d1, Date d2, boolean onlyBusinessDays) {
    long duration = d2.getTime() - d1.getTime();
    if (onlyBusinessDays) {
        Date sat = toSaturdayMidnight(d1);
        long timeBeforeWeekend = Math.max(sat.getTime() - d1.getTime(), 0);
        if (duration > timeBeforeWeekend) {
            Date mon = toMondayMidnight(d2);
            long timeAfterWeekend = Math.max(d2.getTime() - mon.getTime(), 0);
            long numberOfWeekends = Math.max((duration / MILLIS_OF_WEEK) - 1, 0);
            duration = numberOfWeekends * MILLIS_OF_WORKWEEK + timeBeforeWeekend + timeAfterWeekend;
        }
    }
    return (int) TimeUnit.MILLISECONDS.toMinutes(duration);
}

private static Date toMondayMidnight(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    switch (cal.get(Calendar.DAY_OF_WEEK)) {
        case Calendar.SATURDAY:
        case Calendar.SUNDAY:
            cal.add(Calendar.DAY_OF_MONTH, 7);
    }
    cal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
    toMidnight(cal);
    return cal.getTime();
}

private static Date toSaturdayMidnight(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.set(Calendar.DAY_OF_WEEK, Calendar.SATURDAY);
    toMidnight(cal);
    return cal.getTime();
}

private static void toMidnight(Calendar cal) {
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
} 
```

这些测试通过：

```
@Test
public void testWithinSameDay() {
    assertMinsBetween(30, "2013-01-03 9:00", "2013-01-03 9:30");
} 
```

```
@Test
public void testOverWeekend() {
    assertMinsBetween(60, "2013-01-04 23:30", "2013-01-07 0:30");
} 
```

```
@Test
public void testWeekendStart() {
    assertMinsBetween(30, "2013-01-05 23:30", "2013-01-07 0:30");
} 
```

```
@Test
public void testTwoWeeks() {
    assertMinsBetween((int) TimeUnit.DAYS.toMinutes(10), "2013-01-08 23:30", "2013-01-22 23:30");
} 
```

```
@Test
public void testTwoWeeksAndOneDay() {
    assertMinsBetween((int) TimeUnit.DAYS.toMinutes(11), "2013-01-08 23:30", "2013-01-23 23:30");
} 
```

```
@Test
public void testOneWeekMinusOneDay() {
    assertMinsBetween((int) TimeUnit.DAYS.toMinutes(4), "2013-01-09 23:30", "2013-01-15 23:30");
} 
```

```
private void assertMinsBetween(int expected, String start, String end) {
    try {
        assertEquals(expected, getMinsBetween(FORMAT.parse(start), FORMAT.parse(end), true));
    }
    catch (ParseException e) {
        throw new IllegalStateException(e);
    }
} 
```

# php - 为什么这不会改变我行中表格的类？

> ID：14135361
> 
> 赞同：0
> 
> 时间：2013-01-03T08:31:26.283
> 
> 标签：php, html, mysql

我可以看到生成的 html 表，但是根据我定义的名为“匹配”的 CSS 类，行没有突出显示？我的目标是突出显示满足 SQL 查询中定义的匹配条件的每一行。我认为该错误与`match`SQL 查询中定义的变量有关，而不是 PHP？

```
<?php
require_once 'config.php';

$dbh = new PDO($dsn, $dbuser, $dbpass);

$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$result = $dbh->query("
    SELECT a_aif.aif_id,
      a_aif.fee_source_id,
      a_aif.company_name_per_sedar,
      a_aif.document_filing_date,
      IF (a_aif_remaining.aif_id IS NULL, 0, 1) `match`
    FROM  a_aif
      LEFT JOIN a_aif_remaining
        ON a_aif_remaining.aif_id = a_aif.aif_id
    ORDER BY aif_id DESC");

$result->setFetchMode(PDO::FETCH_ASSOC);

if ( !empty($result) ) : endif;

?>

<table>
<tr>
    <th><b>Document ID</b></th>
    <th><b>Pubco Name</b></th>
    <th><b>Filing Date</b></th>
    <th><b>PDF</b></th>
</tr>

<?php foreach($result as $index => $row) : ?>
<tr class="<?=$v["match"] ? "match" : ""?>">
    <td><?php echo $row[fee_source_id]; ?></td>
    <td><?php echo $row[company_name_per_sedar]; ?></td>
    <td><?php echo $row[document_filing_date]; ?></td>
    <td></td>
</tr>
<?php endforeach;
$dbh = NULL;
?>
</table> 
```

# c# - 通过自定义 msi 安装程序修改 app.config

> ID：14135364
> 
> 赞同：2
> 
> 时间：2013-01-03T08:31:34.133
> 
> 标签：c#, .net, windows-installer, app-config

我需要在 app.config 中创建一个地址字符串：

```
<client>
       <endpoint address="http://ServerName/xxx/yyy.svc"
                    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IClientIInfoService"
                    contract="DocuHealthLinkSvcRef.IClientIInfoService" name="BasicHttpBinding_IClientIInfoService" />
</client> 
```

`ServerName`需要用户在安装时输入。为此，我在安装程序中创建了一个新的 UI 对话框。我还写了一个`Installer.cs`类并覆盖了`install ()`：

```
public override void Install(System.Collections.IDictionary stateSaver)
        {

            base.Install(stateSaver);

            string targetDirectory = Context.Parameters["targetdir"];

            string ServerName = Context.Parameters["ServerName"];

            System.Diagnostics.Debugger.Break();

            string exePath = string.Format("{0}myapp.exe", targetDirectory);

           Configuration config = ConfigurationManager.OpenExeConfiguration(exePath);

            config.AppSettings.Settings["ServerName"].Value = ServerName;

            config.Save();
        }
    } 
```

但是我如何在我的中使用它`ServerName`来`app.config`创建指定的字符串。我正在开发 VS2010。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:33:37.320

您可以使用[WiX（Windows Installer XML 工具集）](http://wixtoolset.org/)来构建您的 MSI，在这种情况下，您可以使用[XmlFile](http://wix.sourceforge.net/manual-wix2/wix_xsd_xmlfile.htm)实用程序标签来更新服务器名称：

```
 <util:XmlFile Id="UpdateServerName" File="[INSTALLLOCATION]AppName.exe.config" Action="setValue" ElementPath="/client/endpoint" Name="address" Value="http://[SERVERNAME]/xxx/yyy.svc" /> 
```

您可以在安装期间使用[WixUI](http://wix.sourceforge.net/manual-wix2/WixUI_dialog_library.htm)扩展表单捕获服务器名称。

WiX 的优点：WiX 与 msbuild 兼容（与 .vdproj 文件不同），并为您提供对安装程序的更细粒度的控制[等](https://stackoverflow.com/questions/2635671/why-use-windows-installer-xml-wix-over-vdproj)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T05:36:36.650

假设您在 app.config 中使用完整的 ServiceModel 部分组

基本上你遵循以下步骤：

1.  加载 ServiceModel 配置部分
2.  获取客户部分
3.  获取 ChannelEndpoint 元素
4.  通过用输入的值替换字符串“ServerName”来更改地址值
5.  将地址属性设置为新值
6.  保存配置

    ```
    public override void Install(System.Collections.IDictionary stateSaver)
    {

        base.Install(stateSaver);  

        string targetDirectory = Context.Parameters["targetdir"];  

        string ServerName = Context.Parameters["ServerName"];  

        System.Diagnostics.Debugger.Break();  

        string exePath = string.Format("{0}myapp.exe", targetDirectory);  

        Configuration config = ConfigurationManager.OpenExeConfiguration(exePath);  

        config.AppSettings.Settings["ServerName"].Value = ServerName;  

        //Get ServiceModelSectionGroup from config  
        ServiceModelSectionGroup group = ServiceModelSectionGroup.GetSectionGroup  (config);

        //get the client section
        ClientSection clientSection = group.Client;

        //get the first endpoint
        ChannelEndpointElement channelEndpointElement = clientSection.Endpoints[0];

        //get the address attribute and replace servername in the string.
        string address = channelEndpointElement.Address.ToString().Replace("ServerName", ServerName);

        //set the Address attribute to the new value
        channelEndpointElement.Address = new Uri(address);

        config.Save();
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T06:08:32.490

在一天结束时，`app.config`是`xml`文件。您可以使用[Linq To XML](http://msdn.microsoft.com/en-us/library/bb387052.aspx)或[XPathNavigator](http://msdn.microsoft.com/en-us/library/zx28tfx1.aspx)来替换元素的`address`属性。`endpoint`

下面的代码使用 Linq to Xml

```
 using System.Xml.Linq;
    public override void Install(System.Collections.IDictionary stateSaver)
    {

        base.Install(stateSaver);

        string targetDirectory = Context.Parameters["targetdir"];

        string ServerName = Context.Parameters["ServerName"];

        System.Diagnostics.Debugger.Break();

        string configPath = string.Format("{0myapp.exe.config", targetDirectory);

        XElement root = XElement.Load(configPath);
        var endPointElements = root.Descendants("endpoint");
        foreach(var element in endPointElements)
        {
            element.Attribute("address").Value = ServerName;
        }
        root.Save(configPath);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T13:12:34.507

因为你有一个 windows-installer 标签，我假设你有一个 MSI 包，或者可以创建一个......

然后：

*   您可以创建一个公共 MSI 属性，例如安装期间需要的 ENDPOINTSERVER。
*   添加修改 app.config 以在“InstallFinalize”之后运行的自定义操作，其值为 ENDPOINTSERVER

可以使用以下方式进行静默安装：

```
msiexec /i app.msi ENDPOINTSERVER=www.MyServer.com /qb- 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T15:30:23.310

在保存配置文件更改之前尝试使用以下两行：

```
config.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection("Section Name");
 root.Save(configPath); 
```

PS：如果您使用 F5 运行它，它不会更新解决方案项“app.config”，但会更新 bin/ 文件夹中的“.exe.config”项。

# mysql - 在mysql中选择当前日期到当前日期3个月之间的日期

> ID：14135366
> 
> 赞同：3
> 
> 时间：2013-01-03T08:31:38.513
> 
> 标签：mysql

我想选择当前日期和 3 个月前之间的所有日期。我尝试使用此查询，但它无法正常工作。

```
$sql = mysql_query("
    SELECT * 
    FROM date 
    WHERE d_date BETWEEN NOW() AND NOW() - INTERVAL 3 MONTH 
"); 
```

如果你能帮我写出正确的语法，请。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:34:28.597

你需要交换你的边界，它会起作用：

```
SELECT * FROM date
WHERE d_date BETWEEN now() - INTERVAL 3 MONTH AND now() 
```

例如，此查询返回 true ( [SQLFiddle](http://www.sqlfiddle.com/#!2/b1698/25) )：

```
SELECT (now() - interval 1 month)
    BETWEEN now() - interval 3 month AND now() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T12:32:42.477

```
SELECT * FROM Table 
WHERE anydate_col BETWEEN NOW() AND DATE_ADD( NOW() , INTERVAL +3 MONTH) 
```

# android - 寻找有关 NFC 代码和或 NDEF 的一些指导

> ID：14135367
> 
> 赞同：0
> 
> 时间：2013-01-03T08:31:41.103
> 
> 标签：android, nfc

我有一个 ACR122 NFC 阅读器，我通过 USB 连接到 Android 设备。Android 设备正在运行 ICS，并且没有原生 NFC 功能。

ACR122 附带的 SDK 附带一个示例应用程序，该应用程序相当密集且文档很少，但是，我可以看到它们以 APDU 十六进制数组的形式发送消息。我对此很陌生，所以对这些命令的实际工作方式以及在什么情况下有点不清楚。

同时，似乎现在有一个叫做 NDEF 的东西，它抽象了 APDU 并允许更不混乱的消息交换（至少按照[本](http://www.netmagazine.com/tutorials/getting-started-nfc-android)教程），但是，它只在支持 NFC 的设备上可用（或者看起来如此）。 .. 我希望有某种方法可以将它与 ACR122 结合使用。

所以，我的问题是：

有谁知道我是否可以将 NDEF 与 ACR122 的 SDK 一起使用？我不想做任何复杂的事情，我只想读写标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:39:48.350

如果我没记错的话，NFC 类是 ICS SDK 的一部分，但总是会返回没有 NFC 可用。

对于 ACR 122，[我的经验](http://code.google.com/p/nfc-eclipse-plugin/)纯粹是通过[NFC Tools for Java](https://github.com/grundid/nfctools)，它很可能包含一些可以移植到 Android 的有趣部分。它也有自己的 NDEF 解析/序列化部分。

有关替代 NDEF 解析/序列化库，请参见[此处](http://code.google.com/p/ndef-tools-for-android)

# javascript - JavaScript 意外异步

> ID：14135372
> 
> 赞同：0
> 
> 时间：2013-01-03T08:32:15.053
> 
> 标签：javascript, jquery, file-upload, asynchronous

我正在尝试为我的博客系统制作一个文件上传器，它只会让用户将文件放入其中，然后它会自动将它们上传到服务器。奇怪的是（对我来说），`console.log`在它被填充之前输出 dataArray ，而在超时后调用它会正确输出它。

例如，如果我在放置区放置 4 个文件，我会得到：

```
[]
[file1, file2, file3, file4] 
```

然后我在不上传/刷新的情况下再删除 4 个文件，我得到：

```
[file1, file2, file3, file4]
[file1, file2, file3, file4, file5, file6, file7, file8] 
```

所以我的脚本由于某种原因异步工作？有人可以告诉我我在这里做错了什么吗？

```
var dataArray    = [];

$('.dropArea').bind(
{
    drop: function(e)
    {
        e.stopPropagation();
        e.preventDefault();
        var files = e.dataTransfer.files;

        $.each(files, function(index, file)
        {
            var fileReader = new FileReader();

            fileReader.onload = (function(file)
            {
                return function(e)
                {
                    var image = this.result;

                    dataArray.push({
                        name : file.name,
                        value: image
                    });
                }
            })(files[index]);

            fileReader.readAsDataURL(file);
        });

                    console.log(dataArray);
        setTimeout(function() { console.log(dataArray) }, 1000);
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:39:14.347

你应该`console.log()`在回调中。

```
fileReader.onload = (function(file)
{
    return function(e)
    {
        var image = this.result;

        dataArray.push({
            name : file.name,
            value: image
        });

        console.log(dataArray);
    }
})(files[index]); 
```

如果您在回调之外调用它，它将在图像**开始加载**后立即运行，而不是在图像**完成加载**时运行。

我已经快速绘制了一张图片以进行澄清：

![描述](../Images/e6cb1919a38b26382307a99c61a55189.png)

您可以通过比较丢弃的图像数量和完成加载的图像数量来解决此问题，如下所示：

```
var dataArray    = [];
var count = 0; // amount of files dropped
var ready = 0; // amount of files finished loading

$('.dropArea').bind(
{
    drop: function(e)
    {
        ...

        $.each(files, function(index, file)
        {
            count++; // we start handling a file here so we increment

            ...

            fileReader.onload = (function(file)
            {
                return function(e)
                {
                    ...

                    ready++; // this image has finished loading so we increment
                }
            })(files[index]);
        });

        setTimeout(function() {
            if(ready === count) {
                // all images have been loaded
                console.log(dataArray);
            }
        }, 1000);
    },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:11:48.950

正如@Tim S. 回答的那样，文件**开始**加载时会触发 onload 事件，并且可能需要一些时间，具体取决于文件大小。以下是我如何解决发现是否所有文件都已加载的问题。

```
drop: function(e)
    {
        e.stopPropagation();
        e.preventDefault();
        var files = e.dataTransfer.files;
        console.log(files.length + " queued for upload");

        var counter = 0;
        var loaded = 0;
        $.each(files, function(index, file)
        {
            counter++;
            console.log("File #"+counter+" loading started.")
            if (!files[index].type.match('image.*'))
            {
                $('.dropArea').html(message.error.onlyImage);
                errorMessage++;
            }
            var fileReader = new FileReader();

            fileReader.onload = (function(file, count)
            {
                return function(e)
                {
                    var image = this.result;

                    dataArray.push({
                        name : file.name,
                        value: image
                    });

                    loaded++;
                    console.log("File #"+count+" loaded.");

                    if (loaded == files.length) {
                        console.log("Loading finished!");
                    }
                }
            })(files[index], counter);

            fileReader.readAsDataURL(file);
        });
    } 
```

实际上，控制台日志输出如下所示：

```
4 queued for upload 9a840a0_part_2_dragndrop_2.js:25
File #1 loading started. 9a840a0_part_2_dragndrop_2.js:32
File #2 loading started. 9a840a0_part_2_dragndrop_2.js:32
File #3 loading started. 9a840a0_part_2_dragndrop_2.js:32
File #4 loading started. 9a840a0_part_2_dragndrop_2.js:32
File #2 loaded. 9a840a0_part_2_dragndrop_2.js:52
File #4 loaded. 9a840a0_part_2_dragndrop_2.js:52
File #3 loaded. 9a840a0_part_2_dragndrop_2.js:52
File #1 loaded. 9a840a0_part_2_dragndrop_2.js:52
Loading finished! 
```

可以看出，文件#2 是最先加载的，因为它是最小的，而#1 是最后加载的，而它是最大的。

# ios - UITableViewCell 附件在编辑模式下滑入和滑出方向

> ID：14135373
> 
> 赞同：0
> 
> 时间：2013-01-03T08:32:25.983
> 
> 标签：ios, uitableview

我有一个用于 UITableViewCell.accessoryView 的 UISwitch 和一个用于单元格中 UITableViewCell.editingAccessoryType 的 UITableViewCellAccessoryDisclosureIndicator 。像这样：

```
cell.accessoryView = switchView;
cell.editingAccessoryType = UITableViewCellAccessoryDisclosureIndicator; 
```

当表格进入编辑模式时，UISwitch 在 Disclosure 指示器出现之前滑到单元格的右侧。当表格进入编辑模式时，我希望 UISwitch 和披露指示器从右侧向左滑入。当您编辑闹钟时间列表时，Apple 自己的时钟应用程序正是这样做的。

我发现当我反转开关和显示指示器时，我可以使附件从右侧滑入，这样：

```
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
cell.editingAccessoryView = switchView; 
```

但是，这不是我想要的，因为我希望非编辑模式显示开关。我怎样才能让它像苹果的时钟应用程序一样做我想做的事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T13:17:27.103

将您的 UISwitch 作为单元格 contentView 的子视图

# android - 如何动态制作 TextView 的 setVisibility(View.GONE)？

> ID：14135374
> 
> 赞同：1
> 
> 时间：2013-01-03T08:32:28.120
> 
> 标签：android

我正在显示一个包含名称、start_date 和 day 的 3 个 Textview 的列表。现在我希望如果任何 start_date 值为空，Listview 不得显示该 TextView。我知道“GONE”的功能。但就我而言，我使用的是 hashmap。我不知道在哪里申请“GONE”。

这是我的代码：

```
ListAdapter adapter = new SimpleAdapter(this, hashList,
                R.layout.list_item, new String[] { TAG_NAME,
                        TAG_START_DATE, TAG_DAYS }, new int[] {
                        R.id.name, R.id.startdate, R.id.days }); 
```

这里`R.id.name`, `R.id.startdate`,`R.id.days`是`Textview`s。在这里， start_date 可能可用也可能不可用，因此如果 hashmap 对此没有价值，则`R.id.startdate`必须应用。`Visibility` `Gone`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:36:38.630

您必须创建自己的适配器，`BaseAdapter`例如扩展。然后，当`getView()`回调被调用时，您可以检查您的状况并相应地显示信息

# jsp - 如何在 JSP 中呈现递归集合

> ID：14135376
> 
> 赞同：7
> 
> 时间：2013-01-03T08:32:38.910
> 
> 标签：jsp, user-interface, view, collections, jstl

我有一个后端服务返回一个`Info`对象。该`Info`对象具有对象列表，`FolderGroup`对象列表又具有`FolderGroup`对象列表，依此类推。

基本上它是代表文件夹和子文件夹。但是在我的 JSP 页面中，我不知道要迭代到什么深度。JSTL 如何处理这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T10:14:40.557

创建一个`WEB-INF/tags/folderGroups.tag`包含以下代码的 JSP 标记文件 ( )：

```
<%@ attribute name="list" required="true" %>
<%@ taglib tagdir="/WEB-INF/tags" prefix="myTags" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<c:if test="${!empty list}">
    <ul>
    <c:forEach var="folderGroup" items="${list}">
        <li><c:out value="${folderGroup.name}"/></li>
        <myTags:folderGroups list="${folderGroup.subGroups}"/>
    </c:forEach>
    </ul>
</c:if> 
```

标签以递归方式调用自身以生成文件夹树。

在你的 JSP 里面，做

```
<%@ taglib tagdir="/WEB-INF/tags" prefix="myTags" %>
...
<myTags:folderGroups list="${info.folderGroups}"/> 
```

# c++ - 有没有关于如何设计数据文件结构的参考/资源？

> ID：14135380
> 
> 赞同：6
> 
> 时间：2013-01-03T08:33:00.377
> 
> 标签：c++, c, file, reference

> **可能重复：**
> [设计（二进制）文件格式时有哪些重点？](https://stackoverflow.com/questions/323604/what-are-important-points-when-designing-a-binary-file-format)

我将开发一个将数据存储在文件中的程序。

文件可能很大。文件中的数据基本上是由变长记录组成的。我需要随机访问记录。

我只想阅读一些有关如何设计数据文件结构的资源/书籍。但我还找不到。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:41:10.550

您可能会发现[http://decoy.iki.fi/texts/filefd/filefd](http://decoy.iki.fi/texts/filefd/filefd)很有用。这是要考虑的技术的一般起点。

还要在 SO 上查看这个问题：[设计（二进制）文件格式时有哪些重点？](https://stackoverflow.com/questions/323604/what-are-important-points-when-designing-a-binary-file-format)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:02:00.680

您描述的问题是*数据库理论*的中心主题。

关于这个主题的任何体面的文字都应该给你一些好主意。uni 的标准文本是：

[数据库系统基础 - Elmasari 和 Nava (PDF)](http://web2.aabu.edu.jo/tool/course_file/lec_notes/901331_Fundamentals_of_Database_Systems,_6th_Edition_(0136086209).pdf) [(Amazon)](https://rads.stackoverflow.com/amzn/click/com/0136086209)

另一种方法是使用结构的内存映射数组，看看我[对类似问题的丰富回答](https://stackoverflow.com/a/9953018/1131467)

另一种方法是使用像[Google protobuf](http://code.google.com/p/protobuf/)这样的二进制协议，并在写入时将数据“发送”到文件，并在写入时“接收”它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T09:23:24.837

如果您正在寻找的答案是“读什么书”，我无能为力。

如果“如何做到这一点”对你也有好处，我有一些建议。

Srykar 提出的一种很好的解决方案。我只想补充一点，我会使用 SQLite 而不是 MySQL。它是一个可以嵌入到程序中的开源 C 库。它允许您将数据存储在数据库中，就像您使用 SQL 语句一样，而是调用库 C 函数。在您的情况下，您可以将所有内容保存在内存中，然后在适当的时候将数据保存到磁盘。

参考： [http ://www.sqlite.org](http://www.sqlite.org)

另一种选择是旧的“自己动手”。我的意思是：将数据存储到文件中没有什么复杂的（除非您的数据非常结构化，但在这种情况下我会选择 nr. 1 选项）。

您写下您希望文件结构如何的计划。在将文件写入磁盘和读取文件将数据重新存储到内存时，您都遵循该计划。

如果你有**n**条记录。**将n**写入磁盘，然后写入每条记录。

如果每条记录都有可变长度，则在写入记录之前写入每条记录的长度。

您在问题中谈论“随机访问”。可能您的意思是该文件非常大，并且在访问时您只想从磁盘读取您感兴趣的部分。

如果是这样，计划建立一个索引；该索引将告诉文件开头的每个元素的偏移量（以字节为单位）。将索引存储在文件的开头，然后存储数据。

当您读取文件时，您开始读取索引，获取所需数据的偏移量，然后读取文件的该部分。

这些是非常基本的例子，只是为了理解......

希望他们有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T08:36:20.900

您是否有任何理由不考虑将这些数据放在像 mysql 这样的持久数据库存储中？这些系统旨在处理具有适当索引的随机数据访问，以加快您的数据检索。另外，在读取文件时，您必须读取整个文件才能获得所需的内容，因为没有索引和查询语言。

除此之外，他们还拥有适当的系统，以确保多个正在运行的进程可以访问相同的数据而不会损坏数据。它提供了数据不一致的情况下的恢复。

所以只是存储是简单的部分，它并没有就此结束。您最终必须提供所有其他解决方案。更好地使用可用的东西。

# c# - 无法将“X”类型的对象转换为“X”类型

> ID：14135383
> 
> 赞同：0
> 
> 时间：2013-01-03T08:33:12.457
> 
> 标签：c#, json, windows-phone-7, parsing, windows-phone-8

我正在尝试为 Windows Phone 应用程序解析 JSON 文件，我当前的代码是：

```
 private void Button1_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        Button1.FontSize = 15;
        Button1.Content = "Fetching...";
        var client = new WebClient();
        client.OpenReadCompleted +=
            (s, eargs) =>
            {
                var serializer = new DataContractJsonSerializer(typeof(RootObject));
                if (eargs.Error != null)
                {
                    if (eargs.Error.Message.Contains("NotFound"))
                    {
                        MessageBox.Show("Could not retrieve playlist", "Error", MessageBoxButton.OK);
                        Button1.Content = "Could not retrieve playlist";
                    }
                    else
                    {
                        MessageBox.Show("Could not retrieve playlist", "Error", MessageBoxButton.OK);
                        Button1.Content = "Could not retrieve playlist";
                    }
                }
                else
                {
                    var songHistory = (station1)serializer.ReadObject(eargs.Result);
                    Button1.Content = songHistory.text;
                }
            };
        var uri = new Uri("<JSONGOESHERE>");
        client.OpenReadAsync(uri);
    }

    public class station1
    {
        public string station { get; set; }
        public string title { get; set; }
        public string artist { get; set; }
        public string text { get; set; }
    }

    public class station2
    {
        public string station { get; set; }
        public int listeners { get; set; }
        public string title { get; set; }
        public string artist { get; set; }
        public string text { get; set; }
    }

    public class station3
    {
        public string station { get; set; }
        public int listeners { get; set; }
        public string title { get; set; }
        public string artist { get; set; }
        public string text { get; set; }
    }

    public class RootObject
    {
        public station1 station1 { get; set; }
        public station2 station2 { get; set; }
        public station3 station3 { get; set; }
    } 
```

稍后我也需要为“station2”和“station3”获取相同的文本，这就是我将它们留在里面的原因。

目前，当我在线运行时出现以下错误

```
var songHistory = (station1)serializer.ReadObject(eargs.Result); 
```

用户代码未处理 InvalidCastException 在 APP.DLL 中发生“System.InvalidCastException”类型的异常，但未在用户代码中处理 无法将“RootObject”类型的对象转换为“station1”类型。

我已经使用 json2csharp 生成器来创建上述内容，所以我不确定出了什么问题。

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:50:43.993

您为 type 创建了一个序列化程序`RootObject`。所以输出`ReadObject`就是那个类型。只需正确转换（没有通用重载`ReadObject`）：

```
var root = (RootObject)serializer.ReadObject(eargs.Result);
var songHistory = root.station1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:39:38.000

您确定该方法也不必将 Type 作为反序列化的参数吗？

```
var songHistory = (station1)serializer.ReadObject(eargs.Result, typeof(station1)); 
```

或者它有一个通用的重载，可以进行反序列化并直接返回一个 T ？

```
var songHistory = serializer.ReadObject<station1>(eargs.Result); 
```

# c# - 无法读取现有的 Excel 文件

> ID：14135384
> 
> 赞同：1
> 
> 时间：2013-01-03T08:33:24.967
> 
> 标签：c#, epplus

下面是我读取现有 excel 文件的代码：

```
FileInfo newFile = new FileInfo("C:\\Excel\\SampleStockTakeExceptionReport.xlsx");
using (ExcelPackage xlPackage = new ExcelPackage(newFile))
{
    var ws = xlPackage.Workbook.Worksheets.Add("Content");
    ws.View.ShowGridLines = false;
    ws.Column(4).OutlineLevel = 1;
    ws.Column(4).Collapsed = true;
    ws.Column(5).OutlineLevel = 1;
    ws.Column(5).Collapsed = true;
    ws.OutLineSummaryRight = true;
    //Headers
    ws.Cells["B1"].Value = "Name";
    ws.Cells["C1"].Value = "Size";
    ws.Cells["D1"].Value = "Created";
    ws.Cells["E1"].Value = "Last modified";
    ws.Cells["B1:E1"].Style.Font.Bold = true;
    System.Diagnostics.Process.Start("C:\\Excel\\SampleStockTakeExceptionReport.xlsx");
} 
```

当我运行代码时。它会引发运行时错误。
错误。

```
System.InvalidOperationException: A worksheet with this name already exists in the workbook
at OfficeOpenXml.ExcelWorksheets.Add(String Name)
at Report.Form1.ExportToExcel1(DataTable Tbl, String ExcelFilePath) in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Form1.cs:line 43 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T08:35:40.130

这很简单：

*   首先检查工作表是否存在，并且仅当它不存在时才执行您的代码
*   只需删除现有工作表（如果存在）并使用您的值再次添加它
*   修改现有工作表“内容”的这些值

* * *

尝试这样的事情也许：

```
FileInfo newFile = new FileInfo("C:\\Excel\\SampleStockTakeExceptionReport.xlsx");
using (ExcelPackage xlPackage = new ExcelPackage(newFile))
{
    //Check if worksheet with name "Content" exists and retrieve that instance or null if it doesn't exist       
    var ws = xlPackage.Workbook.Worksheets.FirstOrDefault(x => x.Name == "Content");
    //If worksheet "Content" was not found, add it
    if (ws == null)
    {
       ws = xlPackage.Workbook.Worksheets.Add("Content");
    }

    //Rest of code 
} 
```

# php - 将 codeigniter 连接到 MSSQL 2008 间歇性连接

> ID：14135387
> 
> 赞同：2
> 
> 时间：2013-01-03T08:33:34.783
> 
> 标签：php, sql-server-2008, codeigniter

我目前有一个在 VM 上运行的开发 LAMP 堆栈（交钥匙），我使用 codeigniter 作为我的 MVC 框架，并在 LAN 的后端使用 MSSQL 2008。

大多数时候，这工作正常，但是我在加载页面时间歇性地收到以下错误：

```
A Database Error Occurred

Unable to select the specified database: Lslite

Filename: core/Loader.php

Line Number: 346 
```

刷新页面通常可以解决此问题。

我的 Database.php 配置：

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'sserver';
$db['default']['username'] = 'username';
$db['default']['password'] = 'Password';
$db['default']['database'] = 'Lslite';
$db['default']['dbdriver'] = 'mssql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

数据库没有问题，它是 .Net 应用程序的后端，同样，凭据也没有问题，它们与 .Net 应用程序共享。

任何有关追踪问题的指针将不胜感激，我现在​​有点迷路了。

# github - 使用 github 在团队中工作

> ID：14135389
> 
> 赞同：3
> 
> 时间：2013-01-03T08:33:57.160
> 
> 标签：github, git-workflow

在 github 项目中与团队合作时，哪种方式是首选方式？每个成员都应该有自己的分叉，还是我应该创建一个组织，其中主要项目是并且团队中的每个人都复制该项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:05:42.660

使用**[组织](https://github.com/blog/674-introducing-organizations)**是您的团队直接协作到*一个*GitHub 存储库的最简单方法。
请参阅“[用户、组织和项目页面](https://help.github.com/articles/user-organization-and-project-pages)”。
这允许您管理一个*组*拥有的存储库（或多个存储库）。

您甚至可以[将现有帐户（用户）转换为组织](https://help.github.com/articles/converting-a-user-into-an-organization)。

请注意，在所有情况下（分叉或组织），任何团队成员都需要*本地*克隆来处理项目。
问题是：本地克隆正在克隆什么？您的初始存储库，还是您的团队成员创建的多个分叉之一？管理一个集中式存储库更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:37:55.560

对我来说，分叉意味着永久的分歧，而团队项目绝对不是这种情况。因此，请使用通常的克隆和合并工作流程。

# android - Android：确定代码应该驻留在活动还是自定义视图中

> ID：14135391
> 
> 赞同：6
> 
> 时间：2013-01-03T08:34:23.387
> 
> 标签：android

随着我对活动和自定义视图的使用越来越熟悉，我一直不得不决定与视图及其父 Activity 相关的代码应该放在哪里。添加需要两者访问的自定义对象，以及如何构造代码的选项是无穷无尽的。这是我的问题的具体情况：

**相关类/文件：**
*GameActivity*扩展了 Activity：它使用的布局包含一些自定义视图。

*MapView* extends View：这包含在 GameActivity 使用的布局中

*World*：定义自定义 World 对象的自定义类

**预期结果：** GameActivity 拉起包含 MapView 的布局。MapView 的 onDraw() 函数使用来自 World 对象的信息在画布上绘制地图。

**问题：** MapView 需要的 World 对象是从以前保存的文件中加载的。我可以通过多种不同的方式将该对象获取到 MapView，这就是我优柔寡断的地方。我经历了以下迭代。（注意，它们都有效。我正在寻找的是使用一种方式而不是另一种方式的理由。）

**版本 1 ：** *GameActivity*：它所做的只是 setContentLayout(layout_with_mapview_in_it.xml)

*MapView*：具有从文件加载 World 对象的所有代码，并使用它来引用所需的绘图参数

*World*：一个简单的自定义类，其构造函数中有 3 个参数

然后我决定从文件中加载 World 对象应该是 World 类本身的一个方法，而不是 MapView 的 onCreate() 方法中的某个方法。由于加载世界文件是没有世界对象的事情，所以它应该是类方法是有道理的。所以我在 World 类中创建了一个 loadWorld(String world_name) 方法。现在文件看起来像这样：

**版本2 ：** *GameActivity*：它所做的只是 setContentLayout(layout_with_mapview_in_it.xml)

*MapView*：使用构造函数创建一个新的 World 对象，然后调用它的 loadWorld() 方法以使用文件信息更新它

*World*：一个简单的自定义类，在它的构造函数中带有 3 个参数，以及一个 loadWorld() 方法

最后，我决定只有绘图活动应该在 MapView 中。拥有 World 对象的全部意义在于能够传递它，对吗？因此，我将 World 构建/加载从 View 移到了 Activity 中。这导致必须在 MapView 中创建一个 setter 方法，以便能够从创建它的父活动传递 World 对象。

**Version3:** *GameActivity* : 设置布局，创建一个 World 对象并调用它的 loadWorld() 方法从文件中加载它。通过 Id 引用 MapView，然后调用 MapView 的 setWorld() 方法将 World 对象的实例传递过来

*MapView*：世界对象是从外部设置的。使用此对象的信息绘制地图

*World*：一个简单的自定义类，在它的构造函数中带有 3 个参数，以及一个 loadWorld() 方法。

好的，这就是我目前所在的位置。我的问题是，虽然我喜欢我选择的约定，即视图仅包含绘图相关代码，并将与类相关的方法保留在自己的类中 - 似乎当我切换到该方法时，我突然更多地创建了临时对象经常将对象从活动传递到活动以查看等等。这似乎是更多的开销，但同时这就是抽象的全部意义，对吧？抽象出一个类，以便您可以从中实例化一个对象并传递它。然而不知何故，在我看来，我越抽象事物，处理对象就越复杂。

我想我想在这里问的是，我是否通过不从 MapView 本身的文件中加载世界而使事情变得更加复杂？我是否只是固执地不想拥有涉及从 View 类中的文件中读取对象的代码？将它放在自己的班级或活动中会更好吗？在做出这些决定时我需要考虑什么？有没有我什至不知道的困境的解决方案？

我认为答案将取决于个人喜好，但我想知道是否有惯例可以以一种或另一种方式做到这一点，或者是否有充分的理由来构建某种方式。我一直在尝试寻找这个问题的答案，但我认为我使用了错误的搜索词。我经常遇到描述如何构建活动/视图结构的东西，但对里面的代码一无所知。当有代码时，不可避免地有人教如何在活动之间传递数据，或者在活动和视图之间传递数据等。我知道所有这些方法。我只是不知道该用哪一个。

我一直在查看的一些链接：
[具有多个视图的 Android 应用程序 - 最佳实践？](https://stackoverflow.com/questions/3080287/android-app-with-multiple-views-best-practices)
[Android - 活动与视图](https://stackoverflow.com/questions/3208445/android-activities-vs-views)
[Android 活动和视图](https://stackoverflow.com/questions/3318709/android-activities-and-views)
[Android：哪个更好 - 多个活动或手动切换视图？](https://stackoverflow.com/questions/2072244/android-what-is-better-multiple-activities-or-switching-views-manually)

编辑：包含有关应用程序结构和代码示例的更多详细信息

游戏活动：

```
/*IMPORT STATEMENTS REMOVED*/

public class GameActivity extends Activity implements OnTouchListener {

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);  
    Log.d("LOGCAT", "GameActivity Started");

    //get the world_name from MenuActivity
    Intent intent = getIntent();
    String world_name = intent.getStringExtra(MenuActivity.EXTRA_MESSAGE);

    //load the world
    World world = loadWorld(world_name);

    //create a tilemap and get the tile translator array from it 
            //need to convert this to a static Map
    TileMap tileMap = new TileMap(this);    
    Map<Integer,Bitmap> tileTranslator = tileMap.getTileTranslator();

    //Create a reference to the MapView object and set the translator
    MapView mapView = (MapView) findViewById(R.id.map_view);
    mapView.setArgs(world, tileTranslator);

    //implement the OnTouchSwipeListener
    mapView.setOnTouchListener(new OnSwipeTouchListener() {

            /*CODE REMOVED*/
    });

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public World loadWorld(String world_name) {

//Create a dummy world to load into - why?!
    World dummy_world = new World();

    //load the world 
    Log.d("LOGCAT", "Loading the World");
    try {
        World world = dummy_world.loadWorld(this, world_name);
        return world;
    } catch (IOException e) {
    //do nothing!
    } catch (ClassNotFoundException f) {
    //do nothing!
    }

    return dummy_world; //if world load fails, send back the default world
                        // NOTE: it's not saved!!!

}

} 
```

地图视图：

```
/*IMPORT STATEMENTS REMOVED*/

public class MapView extends View implements OnClickListener {

protected Context context;
public World world;
public Map<Integer,Bitmap> tileTranslator;

    //hardcoded variables for testing
private int tile_width = 50;
private int tile_height = 50;
public int screen_width = 12;
public int screen_height = 6;
public int playerX = 4;
public int playerY = 7;

public MapView(Context context, AttributeSet attrs) {

    super(context, attrs);
    this.context = context;
    Log.d("LOGCAT", "MapView created"); 

    setOnClickListener(this);

}

@Override
public void onDraw(Canvas canvas) {

        /*CODE REMOVED*/
    }

//ugly method, need to break it out into individual setters
public void setArgs(World world, Map<Integer,Bitmap> tileTranslator){

    this.world = world;
    this.tileTranslator = tileTranslator;

}

} 
```

世界：

```
/*IMPORT STATEMENTS REMOVED*/

public class World implements Serializable {

public String world_name;
public int world_width;
public int world_height;
public int[][] world_map;

public World() { //default world - I don't even want this constructor here!

    world_name = "default_world";
    world_width = 1;
    world_height = 1;

    world_map = createWorld(world_width, world_height);

}

public World(String world_name, int world_width, int world_height) {

    //set the world attributes
    this.world_name = world_name;
    this.world_width = world_width;
    this.world_height = world_height;

    //generate the map
    world_map = createWorld(world_width, world_height);

}

private int[][] createWorld(int world_width, int world_height) {

    //create a local tile map 
    int[][] world_map = new int[world_width][world_height];

    //get a randomizer to fill the array with - {temporary solution}
    Random rand = new Random();

    //fill the tile map array with random numbers between 0 and 2
    for(int row = 0; row < world_map.length; row++) {
        for (int col = 0; col < world_map[row].length; col++) {
            world_map[row][col] = rand.nextInt(3);  //static number, needs variable!
                                                    //3 is the number of tile types
        }
    }

    return world_map;

}   

public void saveWorld(Context context, String world_name, World world) throws IOException {

    FileOutputStream fos = context.openFileOutput(world_name, Context.MODE_PRIVATE);
    ObjectOutputStream oos = new ObjectOutputStream(fos);
    oos.writeObject(world);
    oos.close();

}

public World loadWorld(Context context, String world_name) throws IOException, ClassNotFoundException {

    FileInputStream fis = context.openFileInput(world_name);
    ObjectInputStream ois = new ObjectInputStream(fis);
    World world = (World)ois.readObject();

    /*this.world_name = world.world_name;
    this.world_width = world.world_width;
    this.world_height = world.world_height;
    this.world_map = world.world_map;*/  //why doesn't this work?
    return world;

}

} 
```

删除了一些代码以节省空间。让我知道是否有任何已删除的代码或其他活动对查看有用。

有关幕后发生的事情的更多详细信息：

该应用程序从一个 MenuActivity 开始，它有 2 个按钮，每个按钮都指向另一个 Activity：WorldGenerationActivity 或 WorldSelectionActivity。

在 WorldGenerationActivity 中，向用户显示了一个 TextEdit 屏幕和一个按钮。他们为想要生成的世界输入参数（world_name、world_width、world_height）。一旦他们单击按钮，就会创建一个 World 对象并将其保存到使用给定 world_name 作为文件名的文件中。文件保存是通过 World 类中可用的 saveWorld(String world_name) 方法完成的。新创建的 World 对象的实例调用了它的 saveWorld() 方法，文件被保存，并且用户通过调用 finish() 被踢回父 MenuActivity。

在 WorldSelectionActivity 中，向用户显示了一个插入 ArrayAdapter 的 ListView。从世界保存目录中包含的文件创建文件名数组，适配器使列表视图能够在列表中显示这些文件名。用户选择一个，然后通过intent.putExtra() 将选择作为字符串发送回parentMenuActivity。WorldSelectionActivity 为结果而启动，所以它结束，我们回到 MenuActivity。

一旦 MenuActivity 从 WorldSelectionActivity 获得结果，它会将 putExtra() 消息存储在一个参数中，然后调用 GameActivity。它通过另一个 putExtra() 将消息发送到 GameActivity。

GameActivity 接收消息并将其存储在名为 world_name 的变量中。然后它创建一个 World 对象并将 world_name 字符串传递给 World 类的 loadWorld(String world_name) 方法，该方法会加载用户之前从以前的文件保存中请求的特定 World。在我之前的解释中，我有点掩饰了这是如何处理的。由于我需要一个 World 对象来加载世界，我不得不首先在 GameActivity 中创建一个虚拟的 World 对象，然后调用它的 loadWorld 方法，并将结果传递给另一个新创建的 World 对象。这导致我不得不在我不想要的 World 类中包含一个没有参数的构造函数。我不确定为什么不先创建一个虚拟世界就无法让它工作。我尝试将文件读取逻辑放入无参数构造函数中，但这似乎也不起作用。我想我在这里遗漏了一些东西，但这不是我目前最关心的问题。

MapView 是 GameView 中包含的视图之一。其 onDraw() 方法中的登录需要来自 World 对象的信息。我曾经在这里完成所有世界的加载和构建，那时我只需要创建一个世界，然后用它做任何我想做的事情。一旦我将 loadWorld() 方法从 MapView 移到 World 类本身，并将该方法的调用从 MapView 移到 GameActivity 中，我似乎突然在各处创建了临时 World 对象。我想知道是否有一种更清洁的方法来解决这个问题，并且仍然将事情保留在有意义的类中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:42:17.390

我认为您的**版本 3**确实比其他版本 2 更好：您的模型（即`World`）独立于您的视图（`MapView`）并且您的控制器（`GameActivity`）将它们绑定在一起。

我认为您可以改进`World`使用 Builder 模式创建对象的方式，以便创建它的工作在一个单独的类中。让我告诉你我的意思：

```
public class WorldBuilder {

    private File worldFile;
    private String name = "default_world";
    private int width = 1;
    private int height = 1;

    public static WorldBuilder fromFile(File worldFile){
        WorldBuilder worldBuilder = new WorldBuilder();
        worldBuilder.worldFile = worldFile;
        return worldBuilder;
    }

    public WorldBuilder withName(String name){
        this.name= name;
        return this;
    }

    public WorldBuilder withWidth(int width){
        this.parameter2 = param2;
        return this;
    }

    public WorldBuilder withHeight(int height){
        this.height = height;
        return this;
    }

    public World build(){
        World world = new World(name,width,height);
        if(worldFile!=null)
            world.loadWorld(worldFile);
        return world;
    }    
} 
```

在 GameActivity 中，您可以使用这行代码创建世界：

```
World world = WorldBuilder.fromFile(worldFile)
        .withName(p1)
        .withWidth(p2)
        .withHeight(p3)
        .build(); 
```

如果您需要使用默认参数创建一个世界，您可以简单地编写：

```
World world = WorldBuilder.fromFile(null).build(); 
```

**编辑**

在哪里写代码？

**除了只**依赖于数据的所有计算代码`World`都可以写在`World`类中。**永远不要**将其`MapView`作为`World`方法的参数传递（保持模型独立于视图）。

尽可能尝试以不使用`MapView`. `MapView`必须只包含与显示直接相关的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T09:10:13.123

使用几个静态方法来检索必要的信息，让你的世界级成为一个单例。

这是一些疯狂的例子：

```
public class World {
    private Rect mWorldAABB;
    private static World sInstance = null;
    private World() {
    // Put your code to read whatever you want from file
    };

    private static World getInstance() {
        if (sInstance == null) {
             sInstance = new World();
        }
         return sInstance;
    }

    private Rect getWorldRect() {
        return mWorldAABB;
    }
    public static Rect getWorldDimensions() {
        return getInstance().getWorldRect();
} 
```

在这个实现中，您可以通过静态方法调用 a-la World.getWorldDimensions() 从 Activity 和 View 访问您的“世界”。世界实例是私有的和静态的。此外，由于延迟初始化，它只会在您第一次请求有关“世界”的任何内容时创建和初始化。在此示例中，一旦调用 World.getWorldDimensions()，getInstance() 方法将创建 World 类的对象，随后对 getWorldDimensions 的任何调用都将重新使用该对象。因此，基本上，您可以使用此框架并添加任意数量的模式“公共静态”方法。

# java - 在 Java 中签名和验证方法调用

> ID：14135392
> 
> 赞同：1
> 
> 时间：2013-01-03T08:34:27.137
> 
> 标签：java, security, cryptography

我们有一个要求，要求我们对应用程序中某些关键功能的参数进行签名。方法调用是用 RMI 完成的。我的第一个想法是为参数构建一个包装类并使用 SignedObject 对其进行签名。但这会导致许多包装器对象。

有人对如何以更一般的方式完成此任务有任何想法吗？可能会覆盖 RMI 中的发送和接收功能以及广告签名和验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:57:31.000

您可以通过 SSL 运行 RMI。Sun 有几个 JSR 来执行此操作，但被专家委员会投票否决。所以现在你必须选择一种非标准的方式，我相信大多数应用服务器都会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:36:25.937

当然有几种方法可以做到这一点。一个确实是对数据流进行签名。另一种是对编码为字节数组的参数对象实例和基本类型进行签名。两者都要求您在某个时候连接到 RMI。

可能更好的是把 RMI 服务放在 SOAP 服务后面，例如[这里](http://www.comscigate.com/JDJ/archives/0706/gupta/index.html)描述的。然后，您可以创建一个 Web 服务。一旦你有了一个网络服务，你就可以部署[WS-Security](http://en.wikipedia.org/wiki/WS-Security)。在这种情况下，您可以依靠预定义和研究的消息格式来确保传输层安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:41:50.943

对调用该方法的用户进行身份验证并授予他相关权限还不够吗？通过这种方式，您可以传递您想要的任何参数，并且您只需验证一次。您应该能够假设，如果他们可以模拟用户，他们也可以使用代码对参数进行签名。

除非他们从其他地方（最初可能来自您？）获取参数，在这种情况下，如果参数是字符串，则创建参数值的任何人都可以使用他们的私钥加密它们，您可以使用公钥解密，这意味着它们是那些真正唱出参数值的人。使用签名包装器包装所有参数可能会产生很高的开销。

# soap - 松散的 xsd 验证

> ID：14135398
> 
> 赞同：1
> 
> 时间：2013-01-03T08:34:56.983
> 
> 标签：soap, xsd, xsd-validation

我正在调用 web 服务，我想通过 xsd 验证来验证 soap 响应。我真的不想进行严格的 xsd 验证，我只想知道响应中是否存在某些元素“历史”。

因此，当存在“历史元素”时，xsd 验证应该成功，而当该元素不存在时，验证应该失败。我一直从下面的 xsd 开始。我只想用我强制的“历史”元素来扩展它。我怎样才能做到这一点？

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:ns="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        targetNamespace="http://schemas.xmlsoap.org/soap/envelope/"
        elementFormDefault="qualified" attributeFormDefault="unqualified">

    <xsd:element name="Envelope">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:any namespace="##any" minOccurs="0" maxOccurs="unbounded" processContents="skip"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

**肥皂反应**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header/>
   <soapenv:Body>
      <p793:TuDetailsResponse xmlns:p793="http://gls-group.eu/Tracking/">
         <p793:History>
            <p793:Date>
               <p793:Year>2012</p793:Year>
               <p793:Month>10</p793:Month>
               <p793:Day>12</p793:Day>
               <p793:Hour>9</p793:Hour>
               <p793:Minut>52</p793:Minut>
            <p793:ReasonName/>
         </p793:History>
         <p793:History>
            <p793:Date>
               <p793:Year>2012</p793:Year>
               <p793:Month>10</p793:Month>
               <p793:Day>12</p793:Day>
               <p793:Hour>5</p793:Hour>
               <p793:Minut>45</p793:Minut>
            </p793:Date>
            <p793:ReasonName/>
         </p793:History>
      </p793:TuDetailsResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:11:55.797

如果您让 XSD 验证器知道*TuDetailsResponse*和*History*元素，那么当它在*any*中看到它们时，它应该使用为它们定义的规则。

**主要.xsd**

![主要.xsd](../Images/713f68eab72006d7f59abe3b16341321.png)

**TuDetailsResponse.xsd**

![TuDetailsResponse.xsd](../Images/f0ad6c72695d6ae1d0ffb88f96d4138f.png)

**主要.xsd**

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com)-->
<xs:schema xmlns:ns0="http://gls-group.eu/Tracking/"
           elementFormDefault="qualified"
           targetNamespace="http://schemas.xmlsoap.org/soap/envelope/"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:import schemaLocation="C:\Temp\TuDetailsResponse.xsd"
               namespace="http://gls-group.eu/Tracking/" />
    <xs:element name="Envelope">
        <xs:complexType>
            <xs:sequence>
                <xs:any minOccurs="0"
                        maxOccurs="unbounded"
                        namespace="##any"
                        processContents="lax" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

**TuDetailsResponse.xsd**

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com)-->
<xs:schema xmlns:tns="http://gls-group.eu/Tracking/"
           elementFormDefault="qualified"
           targetNamespace="http://gls-group.eu/Tracking/"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="TuDetailsResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="History"
                            maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:any minOccurs="0"
                                    maxOccurs="unbounded"
                                    namespace="##any" />
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

**示例有效 XML 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com) -->
<Envelope xmlns:tns="http://gls-group.eu/Tracking/"
          xmlns="http://schemas.xmlsoap.org/soap/envelope/"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://schemas.xmlsoap.org/soap/envelope/ Main.xsd">
    <Body>
        <tns:TuDetailsResponse>
            <tns:History></tns:History>
        </tns:TuDetailsResponse>
    </Body>
</Envelope> 
```

注意 Body 元素可能会导致生成警告。

**无效的 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com) -->
<Envelope xmlns:tns="http://gls-group.eu/Tracking/"
          xmlns="http://schemas.xmlsoap.org/soap/envelope/"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://schemas.xmlsoap.org/soap/envelope/ file:///C:/Temp/WSDL%20Sample.xsd">
    <Body>
        <tns:TuDetailsResponse>
        </tns:TuDetailsResponse>
    </Body>
</Envelope> 
```

产生错误

*[(9:11) 错误命名空间“ http://gls-group.eu/Tracking/](http://gls-group.eu/Tracking/) ”中的元素“TuDetailsResponse”内容不完整。预期的可能元素列表：命名空间“ [http://gls-group.eu/Tracking/](http://gls-group.eu/Tracking/) ”中的“历史”。*

但是您确实应该使用一些肥皂包装器，这应该根据 WSDL 中的模式验证响应，并正确地整理所有失败消息。有一些工具可以为大多数平台和语言生成 SOAP 包装器。

注意：此示例中的验证是使用 .Net 类完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:17:35.357

在 Hashmap/Map 中添加所有必需实体及其命名空间，同时解析响应读取实体一一并检查实体是否存在于 Map 中。

# opengl - 矩形和 mipmap 纹理

> ID：14135399
> 
> 赞同：1
> 
> 时间：2013-01-03T08:35:04.543
> 
> 标签：opengl, textures

如果我们有支持 NPOT 纹理的 mipmap，那么矩形纹理有什么用？是否有任何与性能相关或与图像质量相关的改进？另外，我认为，mipmapping 会占用大量内存，因为它为每个级别创建。那么，使用矩形纹理不是更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:51:08.783

矩形纹理：

1.  永远不会有 mipmap。
2.  使用非归一化纹理坐标。

#1 并不重要，因为您可以通过使用[glTexStorage2D](http://www.opengl.org/wiki/GLAPI/glTexStorage2D)并将[mipmap 级别数设置为 1](http://www.opengl.org/wiki/Texture_Storage#Immutable_storage)或通过[正确设置纹理的基本/最大级别](http://www.opengl.org/wiki/Texture#Mipmap_range)和/或使用[最小过滤参数](http://www.opengl.org/wiki/Sampler_Object#Filtering)来实现相同的效果不要使用 mipmap。

#2 更难模仿。texelFetch函数在纹理空间中工作，但它使用整数纹理坐标[。](http://www.opengl.org/wiki/Sampler_%28GLSL%29#Direct_texel_fetches)矩形纹理坐标是浮点值。这允许他们使用双线性甚至各向异性过滤。你不能用`texelFetch`.

您可以通过规范化纹素空间纹理坐标来模拟矩形纹理。但这需要手动工作：您必须查询纹理的大小`textureSize`或将大小传递`uniform`给着色器。然后你必须做一个划分来标准化坐标。这可能是现代硬件在幕后所做的（特别是因为像 Vulkan 这样的新 API 没有它们），但如果明确支持矩形纹理，手动工作可能会绕过它。

*#2 确实是你现在*使用矩形纹理的主要原因。它们非常适合渲染目标，因为您可以使用窗口空间坐标从它们中获取值，而无需规范化纹理坐标。但总的来说，它们是非常特殊的纹理类型。

性能问题纯粹是推测性的和特定于硬件的。

# java - 在 MacBook Pro 上使用 Eclipse 创建支持 Retina 的程序

> ID：14135400
> 
> 赞同：1
> 
> 时间：2013-01-03T08:35:06.520
> 
> 标签：java, eclipse, macos, retina-display, screen-resolution

我刚刚在我的新 MacBook Pro Retina 上下载了 Eclipse，它看起来非常糟糕。然后我在互联网上搜索，发现了一个小“hack”，它让 Eclipse 在 Retina 显示屏上看起来不错。但是当我想运行一个java项目时，整个程序又看起来很糟糕。

是否有任何“hack”可以让开发的程序以高分辨率显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:44:48.100

现在，您可以拥有使用 Swing 或 AWT 的支持视网膜的程序的唯一方法是在客户端计算机上运行 Java 6。编译在什么 IDE 中并不重要，重要的是客户端正在运行什么。这是因为用于 Mac 的 Java 6 是由 Apple 创建的，并且他们使用了一些专有的渲染技术，而 OpenJDK 项目下的 Java 7 没有这些技术。

[但是，已向 Mac OS X OpenJDK 端口提交](http://mail.openjdk.java.net/pipermail/macosx-port-dev/2013-April/005491.html)了一个修复程序，该端口为 Java 8 中的 Aqua 外观提供 HiDPI（即视网膜）支持。一旦它更稳定并已集成，[计划](http://mail.openjdk.java.net/pipermail/macosx-port-dev/2013-April/005508.html)将其向后移植到 Java 7进入Java 8。

还应该注意的是，Eclipse 在 Java 7 中看起来并不模糊，因为它使用 SWT，而不是 AWT 或 Swing。基本上，它使用一种完全依赖 Mac OS X 来提供其布局内容的不同技术，并在需要时提供 HiDPI 图像。如果您运行 SWT 而不是 Swing 或 AWT，您可以获得相同的效果，但是您必须将其转换为 Cocoa 应用程序并修改该应用程序的 Info.plist 文件（说明[在](https://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Explained/Explained.html#//apple_ref/doc/uid/TP40012302-CH4-SW1)底部）。

# r - 无法加载 R 包“adabag”

> ID：14135401
> 
> 赞同：1
> 
> 时间：2013-01-03T08:35:20.417
> 
> 标签：r

我在 R (2.14.2) 中成功安装了 'adabag' 包，但是当我加载它时，我收到以下错误：

```
Loading required package: caret
Error : object 'parallelplot' not found whilst loading namespace 'caret'
Error: package ‘caret’ could not be loaded 
```

我不确定“parallelplot”是否是一个包。我也尝试安装“parallelplot”包，但它不适用于 R 版本 2.14.2。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T16:53:24.053

我在 R v. 2.14.2 上遇到了同样的问题，我通过安装包解决了这个问题`lattice`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-03T22:16:54.367

这个回复有点晚了，但这对我有用。

... install.packages("robustbase")，然后（假设成功），重新启动 R 并尝试再次加载 adabag。

ef [https://community.rstudio.com/t/i-am-having-trouble-loading-adabag-package/16252](https://community.rstudio.com/t/i-am-having-trouble-loading-adabag-package/16252)

# android - 序列中的两帧动画

> ID：14135404
> 
> 赞同：0
> 
> 时间：2013-01-03T08:35:39.043
> 
> 标签：android, animation, frame, sequence

我有一个应用程序，它的主页上有一个恒定的帧动画。我使用`setBackgroundResource`来显示动画。

有时我需要显示其他帧动画 ( `secondary`)，然后返回到主动画。我遇到的问题是，如果我先调用`Animate`( `secondary`)，然后调用`Animate`( ) `primary`，则主要与次要重叠，就好像它正在立即处理一样，而无需等待次要动画完成。我怎样才能等待次要动画完成，然后才能回到主要动画。

谢谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T10:31:12.620

您可以设置动画侦听器以在第二个动画完成后启动第一个动画。

```
secondAnimation.setAnimationListener(new AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            firstAnimation.startNow()
        }
    }); 
```

# java - WAS 6.1 的 JPA 问题

> ID：14135406
> 
> 赞同：1
> 
> 时间：2013-01-03T08:35:41.227
> 
> 标签：java, jpa, websphere, websphere-6.1

我在 WAS 6.1（通过 WID 6.1）上安装了一个应用程序，并在运行该应用程序时出现以下异常。

> 原因：org.apache.openjpa.util.MetaDataException：类声明生成器名称“system-uuid”，但使用 AUTO 生成类型。AUTO 下唯一有效的生成器名称是“uuid-hex”和“uuid-string”。

我已经更改了数据库，但问题仍然存在。该类确实声明`Authorization_ID`为 System-UUID，但它在 WAS7 中运行良好。请提供您的意见。这是该课程的一个片段：

```
@Id
@GeneratedValue(generator="system-uuid")
@GenericGenerator(name="system-uuid", strategy="uuid")
@javax.persistence.Column(name="AUTHORIZATION_ID")
@XmlID 
@XmlAttribute
public String getKey() {
    return this.key;
}
public void setKey(String key) {
    this.key = key;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:42:44.717

我有一个类似的问题。这是因为 WAS 使用它自己的 JPA 的 openJPA 实现，而我打算使用休眠。

通过删除 EJB 3.0 的 WAS 功能包解决了这个问题

希望这可以帮助。

# ruby-on-rails-3 - 在新的 jqueryui 选项卡中打开

> ID：14135411
> 
> 赞同：1
> 
> 时间：2013-01-03T08:36:14.027
> 
> 标签：ruby-on-rails-3, jquery-ui

我想在新的 jquery-ui 选项卡中打开编辑操作

我的链接是

```
<%= link_to 'Show', student %> 
```

我想在新的 jqueryui 选项卡中打开它。

怎么做？

这是我的索引页

```
<html>
<head>
    <title>jQuery UI Accordion</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script>
    $(document).ready(function() {
        var $tabs = $("#container-1").tabs();
    });  
    </script>
</head>
<body>

<div id="container-1">
    <ul>
        <li><a href="#fragment-1">List</a></li>
        <li><a href="#fragment-2">Knockout Test</a></li>
        <li><%= link_to 'New Student', {:controller => "students", :action => "new"} %></li>
    </ul>

    <div id="fragment-1">
        <h1>Listing students</h1>

        <table>
          <tr>
        <th><%=t :Name%></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>

        <% @students.each do |student| %>
          <tr>
            <td><%= student.name %></td>
            <td><%= link_to 'Show', student %></td>
            <td><%= link_to 'Edit', edit_student_path(student) %></td> 
            <td><%= link_to 'Destroy', student, :method => :delete, :data => { :confirm => 'Are you sure?' } %></td>
          </tr>
        <% end %>
        </table>
    </div>

    <div id="fragment-2">
        <p>First name: <input data-bind="value: firstName" /></p>
        <p>Last name: <input data-bind="value: lastName" /></p>
        <p>Full name: <strong data-bind="text: fullName"></strong></p>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:41:24.157

```
$('#container-1').tabs("add", 'newtab', 'Title');
$('#newtab').html(newtabhtml); 
```

# javascript - 通过jquery ajax获取javascript数组

> ID：14135413
> 
> 赞同：0
> 
> 时间：2013-01-03T08:36:14.753
> 
> 标签：javascript, jquery, charts

也许你可以帮助我。

我的 jquery ajax 调用结果用“||”分割 它创建了一个值数组。这些值之一是这样的字符串：

```
[['2012-11-18', 33, 2], ['2012-11-19', 162, 11], ['2012-11-20', 140, 13]] 
```

我需要把它作为一个可行的 javascript 数组传递给谷歌图表 drawchart(myarray) 函数来使用它与 data.addRows(myarray);

谁能帮我实现它？

我可以让这个 ajax 返回的数组看起来像任何东西，重要的是我可以使用这个数组来更新谷歌图表。

好的，这是我的ajax成功代码：

```
success: function(response)
     {
        response_d = response.split("||");
        response_message = response_d[0];

        if(response_message == 'ok') {
           $("#contr_count").html(response_d[1]); 
           $("#contr_average").html(contr_time(response_d[2])); 
           $("#contr_space_average").html(contr_time(response_d[3]));
           var chartdata = $.parseJSON(response_d[4]);
           drawChart(chartdata);
           $("#contr_list").html(response_d[5]); 
        }
        else {

        }
     } 
```

这是绘图功能

```
function drawChart(chartdata) {
 var data = new google.visualization.DataTable();
  data.addColumn('string', 'Minutit tagasi');
  data.addColumn('number', 'T pikkus');
  data.addColumn('number', 'T vahe pikkus');

  data.addRows(chartdata);

data.addRows(dateArray);
 var options = {
   title:                 'T pikkuse ja vahe graafik (viimane 60 min)',
   backgroundColor:          '#fdf3e9', 
   colors:                ['#FF7F00','#437C17'],
   curveType:             'function',
   enableInteractivity:      true, 
   legend:                {position: 'bottom'},
   vAxis:                 {direction: -1},
   hAxis:                 {direction: -1},
   chartArea:             {width: '85%'}
 };

 var chart = new google.visualization.LineChart(document.getElementById('contr_graph'));
 chart.draw(data, options); 
```

}

该代码给出了 json 错误 "SyntaxError: JSON.parse: unexpected character" ar firebug。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:49:38.503

您需要先替换`'`为`"`。尝试：

```
var s = "[['2012-11-18', 33, 2], ['2012-11-19', 162, 11], ['2012-11-20', 140, 13]]";
var arr = $.parseJSON(s.replace(/'/g,'"')) 
```

[这是一个带有工作示例的 jsfiddle](http://jsfiddle.net/xYMpm/)。打开 javascript 控制台以查看结果。

# qt - 如何将 Qt Linguist 用于 Qt UI 文件？

> ID：14135416
> 
> 赞同：3
> 
> 时间：2013-01-03T08:36:21.180
> 
> 标签：qt, user-interface, translation, linguistics

我正在使用 Qt 语言学家翻译`ui`文件。我`ts`使用 获得了它的文件`lupdate`，并翻译了这些单词和短语。现在我想将它添加到我的代码中，但我从它的教程中发现似乎我必须添加`tr()`到我的代码中的每一个单词和短语中。我理解正确吗？我可以只加载翻译`qm`文件一次进行翻译吗？如果是这样，我该如何在这个`ui`文件中做到这一点？

提前致谢。

**更新**

在更改 Jens 提到的属性后，在我的 ui 头文件中，我可以看到如下语句：

```
buttonSetupData->setText(QApplication::translate("MainWindow", "Set Data", 0, QApplication::UnicodeUTF8)); 
```

在 Ajith 的回答之后，我更改了代码，现在我`retranslateUi`在`ui_main.h`文件中的函数如下所示：

```
void retranslateUi ( QMainWindow *MainWindow )
{
    QTranslator translator;
    translator.load ( " ...\Test.ts " );
    QApplication::installTranslator ( &translator );

    MainWindow->setWindowTitle ( QApplication::translate ("MainWindow",  "The Sentioscope - Beta v2.0 for Soccer", 0, QApplication::UnicodeUTF8));

    ...
} 
```

但它仍然没有工作。

**最近更新**

我当前读取“.qm”文件的功能是这样的：

```
void MainWindow::translate()
{
     QTranslator translator;
     translator.load ( "Test.qm", "D:\\" );
     qApp->installTranslator ( &translator );
     retranslateUi ( this );
 } 
```

然后我这样调用这个函数：

```
MainWindow::MainWindow ( QWidget *parent ) : QMainWindow ( parent )
{
    setupUi(this);
    translate();
} 
```

在 Ajith 的最新回答之后，我以这种形式更改了警告/消息框的每个字符串（例如）：

```
QMessageBox::warning( this, QMessageBox::tr("ERROR"), QMessageBox::tr("Invalid IP adress") ); 
```

通过`lupdate`我可以读取所有这些字符串，翻译并将它们保存在一个 qm 文件中。现在的问题是，它可以将这些字符串转换为 ui，但不能在执行后转换为警告/消息框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:51:15.143

我不完全确定你想从这个问题中完成什么。我认为您正在寻找一种在运行时从 C++ 代码加载“qm”文件的方法。如果是这样，您需要做的是使用[QTranslator](http://doc-snapshot.qt-project.org/4.8/qtranslator.htm)类..

```
QTranslator translator;
translator.load("file.qm", "dir");
qApp->installTranslator(&translator); 
```

**更新**

这对我有用..

主窗口.cpp

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow),
    isChinese(false)
{
    ui->setupUi(this);
    msgbox = new QMessageBox(QMessageBox::NoIcon, "", "", QMessageBox::NoButton, this);
    pbtn = msgbox->addButton("Ok", QMessageBox::AcceptRole);

    doRetranslate();

    QObject::connect(ui->pushButton, SIGNAL(clicked()), this, SLOT(doTranslate()));
    QObject::connect(ui->pushButton, SIGNAL(clicked()), msgbox, SLOT(show()));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::doTranslate()
{
    QTranslator translator;
    if (!isChinese) {
        translator.load("test_zh_TW.qm", "../TestTranslator");
        qApp->installTranslator(&translator);
        isChinese = true;
    } else {
        translator.load("", ""); // Default is english
        qApp->installTranslator(&translator);
        isChinese = false;
    }
    ui->retranslateUi(this);
    doRetranslate();
}

void MainWindow::doRetranslate()
{
    msgbox->setWindowTitle(QObject::tr("ERROR"));
    msgbox->setText(QObject::tr("Invalid IP adress"));
    pbtn->setText(QObject::tr("Ok"));
} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QMessageBox>
#include <QPushButton>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

    void doRetranslate();
public slots:
    void doTranslate();

private:
    Ui::MainWindow *ui;
    bool isChinese;
    QMessageBox *msgbox;
    QPushButton *pbtn;
};

#endif // MAINWINDOW_H 
```

主窗口.ui

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>400</width>
    <height>300</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralWidget">
   <widget class="QLabel" name="label">
    <property name="geometry">
     <rect>
      <x>100</x>
      <y>70</y>
      <width>181</width>
      <height>17</height>
     </rect>
    </property>
    <property name="text">
     <string>Hello World!</string>
    </property>
    <property name="alignment">
     <set>Qt::AlignCenter</set>
    </property>
   </widget>
   <widget class="QPushButton" name="pushButton">
    <property name="geometry">
     <rect>
      <x>140</x>
      <y>120</y>
      <width>93</width>
      <height>27</height>
     </rect>
    </property>
    <property name="text">
     <string>translate</string>
    </property>
   </widget>
  </widget>
  <widget class="QMenuBar" name="menuBar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>400</width>
     <height>23</height>
    </rect>
   </property>
  </widget>
  <widget class="QToolBar" name="mainToolBar">
   <attribute name="toolBarArea">
    <enum>TopToolBarArea</enum>
   </attribute>
   <attribute name="toolBarBreak">
    <bool>false</bool>
   </attribute>
  </widget>
  <widget class="QStatusBar" name="statusBar"/>
 </widget>
 <layoutdefault spacing="6" margin="11"/>
 <resources/>
 <connections>
  <connection>
   <sender>pushButton</sender>
   <signal>clicked()</signal>
   <receiver>label</receiver>
   <slot>update()</slot>
   <hints>
    <hint type="sourcelabel">
     <x>199</x>
     <y>165</y>
    </hint>
    <hint type="destinationlabel">
     <x>206</x>
     <y>114</y>
    </hint>
   </hints>
  </connection>
 </connections>
</ui> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:26:02.853

你描述的基本正确。QtDesigner/QtCreator 允许每个 ui-Element 选择是否应翻译其文本（请参阅每个 ui-Element 的属性）。如果选择了翻译，则将 tr() 放入生成的 ui_xxx.h 文件中，并从那里像任何其他可翻译单词一样呈现。

# php - mongodb'document'变量在PHP中定义

> ID：14135424
> 
> 赞同：3
> 
> 时间：2013-01-03T08:37:05.913
> 
> 标签：php, codeigniter, mongodb, mongodb-php

我正在将**Codeigniter**与**PHP**一起使用。我们可以为**mongodb**查询定义空数组，如下所示，

```
$db->user->insert(array('report'=> array())); 
```

我如何`document`在 PHP 中为 mongodb 定义空（数据类型）`?`

在这里我知道，我可以`document`在使用另一个运行时查询（使用**$set**或其他）时创建变量。但是我需要创建`document`变量，当我`insert`。

如果我创建如下文档变量，

```
$a = array();
$db->user->insert(array('report'=> $a)); 
```

以下代码不起作用，

```
$db->user->update(
    array('user' => $user ), 
    array('$set' => array(
        'report.' . $number => 
             array('id'=>$number, 'on' => time(), 'status'=> 0)
    ))); 
```

这里，`$number`是字符串变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T13:17:03.283

*最后*没办法回答我的问题。我搜索了很多方式。因此，我们可以`document`在使用另一个运行时查询（使用**$set**或其他方式）时创建变量。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:04:00.613

MongoDB PHP 驱动程序支持发送要保存的空对象（它最终没有验证以确保您发送有价值的东西），但检测到这种保存对象的方法在不知道`_id`您刚刚保存的对象的情况下将是无用的你可以做：

```
$a = array();
$db->user->insert($a);
var_dump($a['_id']); 
```

因为如果传递一个变量，MongoDB 的插入函数将修改（通过引用）原始变量并将`_id`字段添加到它。

但是，您不能将“空”对象（没有 immutable 的对象`_id`）保存到普通集合中。这对于封顶集合之类的东西当然有所不同。

# sql - 如果 sql server 中的语句无法识别临时表字段？

> ID：14135432
> 
> 赞同：1
> 
> 时间：2013-01-03T08:38:47.717
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有这个代码：

```
CREATE TABLE #CategoriesTable
(
   CategoryId INT,
   HasAssessment BIT,
   IsScorm BIT, 
   IsExternal BIT,
   ExternalLink varchar(256), 
   SingleArtifact BIT, 
   ScormModuleUrl varchar(256),
   WindowHeight varchar(256), 
   WindowWidth varchar(256),
   DateTimeCreated date,
   HintText nvarchar(256),
   UserId INT
)

select ct.HasAssessment from #CategoriesTable ct
  where UserId = @UserId  
IF (ct.HasAssessment = 1)
BEGIN
  UPDATE #CategoriesTable SET HintText = 'With Assessment'
END    
else
BEGIN
 UPDATE #CategoriesTable SET HintText = 'With No Assessment'    
END      

SELECT *
  FROM #CategoriesTable 
```

我收到以下错误：无法绑定多部分标识符“ct.HasAssessment”。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:06:08.673

您不需要 IF 语句。更新可以完全通过标准 SQL 完成。

```
UPDATE #CategoriesTable
SET    HintText = CASE WHEN HasAssessment = 1 
                       THEN 'With Assessment' 
                       ELSE 'With No Assessment' 
                  END 
WHERE  UserID = @UserID 
```

如果您确实希望使用该`IF`语句*（不建议）*，您需要声明一个变量来保存您的 select 语句的结果并在`IF`语句中使用该变量。

请注意，这种情况下的 select 语句应该只返回一个结果，这是完全在 SQL 中执行更新的另一个原因。

# php - 使用 php 变量选择框自动提交

> ID：14135433
> 
> 赞同：-1
> 
> 时间：2013-01-03T08:38:48.140
> 
> 标签：php, javascript, jquery, forms

我正在尝试创建一个自我提交选择框，每次用户从下拉列表中选择时，都会将其带到一个新页面。目前它没有做任何事情，只是带我到“//website.com/listing/?col=1&brand=”，没有任何 id 将其指向正确的 url。

请问我做错了什么？

```
<form method="post" action="">
<select onchange="this.form.submit()">
<? foreach($arrayCollection['brands'] as $id => $name):value ?>
    <option value="//website.com/listing/?col=1&brand=<?php echo $id; ?>">
       <?php echo $name; ?>
   </option>
<? endforeach; ?>
</select>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:59:22.383

**由于您已在 jquery 中标记：**

尝试这个：

```
<script type="text/javascript" src="jquery-1.2.6.pack.js"></script>
    <form method="post" action="">
    <select id="selectDropDown">
    <? 
    $arrayCollection['brands'] = array(0=>'zero',1=>'first',2=>'second',3=>'three',4=>'four');
    foreach($arrayCollection['brands'] as $id => $name):value ?>
        <option value="<?php echo $id; ?>">
           <?php echo $name; ?>
       </option>
    <? endforeach; ?>
    </select>
    </form>
    <script>
    $('#selectDropDown').change(function(){
    window.location= '//website.com/listing/?col=1&brand='+$(this).val();
    });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:57:13.777

你可以试试这个：

```
<form method="post" action="">
<select onchange="this.form.submit()">
<?php foreach($arrayCollection['brands'] as $id => $name):value ?>
//^^^---------------------missed it
    <option value="//website.com/listing/?col=1&brand=<?php echo $id; ?>">
       <?php echo $name; ?>
   </option>
<?php endforeach; ?>
//^^^---------------------missed it
</select>
</form> 
```

可能对 foreach 文档有用：http: [//php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

# jsf - 当我将 @SessionScoped 更改为 @ViewScoped 时，我总是遇到 JDOM 异常

> ID：14135435
> 
> 赞同：1
> 
> 时间：2013-01-03T08:39:02.027
> 
> 标签：jsf, session-scope, view-scope

我想将一个jsf页面@SessionScoped的范围更改为@ViewScoped，但我总是遇到这个异常，我不明白为什么。我检查了构建路径和依赖项似乎都很好。堆栈错误：

```
WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.ClassNotFoundException: org.jdom.JDOMException
    at com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)
    at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:696)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getDeclaredMethod(Class.java:1952)
    at java.io.ObjectStreamClass.getPrivateMethod(ObjectStreamClass.java:1411)
    at java.io.ObjectStreamClass.access$1700(ObjectStreamClass.java:69)
    at java.io.ObjectStreamClass$2.run(ObjectStreamClass.java:481)
    at java.io.ObjectStreamClass$2.run(ObjectStreamClass.java:455)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.io.ObjectStreamClass.<init>(ObjectStreamClass.java:455)
    at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java:352)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1130)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at java.util.HashMap.writeObject(HashMap.java:1100)
    at sun.reflect.GeneratedMethodAccessor79.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at java.util.HashMap.writeObject(HashMap.java:1100)
    at sun.reflect.GeneratedMethodAccessor79.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)
    at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
    at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

有人可以告诉我如何避免/解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:59:17.583

```
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
...
at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166) 
```

看起来您的 Web 应用程序中缺少依赖项 (jar)。

您的应用程序配置为在请求之间序列化您的视图[状态](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#writeObject%28java.lang.Object%29)[，](http://docs.oracle.com/javaee/6/api/javax/faces/application/StateManager.html)而会话在请求之间保留在内存中。

Java 延迟加载类。序列化视图范围的 bean 的行为导致了`JDOMException`在正常执行类型期间不需要的类 ( ) 的解析。

# php - 负环视正则表达式

> ID：14135440
> 
> 赞同：-1
> 
> 时间：2013-01-03T08:39:16.410
> 
> 标签：php, regex

我有以下字符串

```
.proxy.com  TRUE    /   FALSE   0   COOKIE%253BCartID%253B%252F%253Bwww.proxy.com   1914104745%253B 
```

和下面的正则表达式

```
[a-zA-Z0-9\%]{14,15} 
```

我只想匹配 1914104745%253B 但它正在接收 COOKIE%253BID，我试图做这样的否定断言

```
[a-zA-Z0-9\%]{14,15}[?!COOKIE] 
```

但这不起作用

任何人都可以帮助这个正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:43:07.877

为什么不只是锚定到字符串的末尾`[a-zA-Z0-9%]{14,15}$`

```
$str=".proxy.com  TRUE    /   FALSE   0   COOKIE%253BCartID%253B%252F%253Bwww.proxy.com   1914104745%253B";
preg_match('/[a-zA-Z0-9%]{14,15}$/',$str,$match); 
echo $match[0];

>>> 1914104745%253B 
```

如果您要匹配的字符串部分是严格格式化的，您可以使用类似的东西，如果匹配不总是在字符串的末尾，`\d{10}%\d{3}[A-Z]$`您可以删除，无论哪种方式都只会在您的示例中匹配。 `$``1914104745%253B`

注意：`%`不需要转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:48:10.093

试试这个

```
(?<=\s)[\w%]{14,15}(?:(?=\s)|$) 
```

[演示](http://regexr.com?339r3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:52:51.623

前瞻使用圆括号，而不是方括号。但我不认为单靠前瞻会有所帮助：

```
(?!COOKIE)[a-zA-Z0-9\%]{14,15} 
```

会阻止它匹配`COOKIE%253BCart`，但它会简单地匹配`OOKIE%253BCartI`。使用尾随将匹配锚定在行尾`$`可能是最简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T20:17:02.247

您是否只是想获取最后一行非空白字符？然后用这个

```
(\S+)$ 
```

您还可以使用`preg_split`在空格上拆分并获取它返回的数组的最后一个元素。

# javascript - 字符串到 Int（数字）

> ID：14135441
> 
> 赞同：-1
> 
> 时间：2013-01-03T08:39:17.697
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何在 JavaScript 中将字符串转换为整数？](https://stackoverflow.com/questions/1133770/how-do-i-convert-a-string-into-an-integer-in-javascript)

我有以下代码：

```
 $.ajax({
      type: "GET",
      url: 'index.php?act=ajax&op=getShippingPrice&id='+shippingID,
      success: function(data) {
        var currentPrice = Number($("#finalPrice").html());
        var newPrice = Number(currentPrice + data);
        $("#finalPrice").html(newPrice);
      }
    }); 
```

我尝试计算新价格。但我实际上得到了一串 newPrice，其中包含当前价格，然后是来自 ajax 的数据。

如果当前价格是 1500，而来自 ajax 的数据是 10，我得到的是 150010，而不是 1510。

我也尝试使用 parseInt，可能没有正确使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:41:12.537

用这个：

假设带有小数的价格，使用`parseFloat`，如果没有，使用`parseInt`。

```
$.ajax({
  type: "GET",
  url: 'index.php?act=ajax&op=getShippingPrice&id='+shippingID,
  success: function(data) {
    var currentPrice = parseFloat($("#finalPrice").html());
    var newPrice = currentPrice + parseFloat(data));
    $("#finalPrice").html(newPrice.toFixed(2));
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:41:27.523

这样做：

```
var newPrice = parseInt(currentPrice) + parseInt(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:42:36.457

这将帮助您：

```
 var newPrice = 1*currentPrice + 1*data; 
```

乘以`1`不改变结果，但它会改变变量类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T08:42:44.687

首先将您的 HTML 派生值转换为数字（并确保您提供 radix 参数以处理前导零）。

您还应该删除可能存在的任何空白：

```
var currentPrice = parseInt($.trim($("#finalPrice").html()), 10);
var newPrice = currentPrice + data; 
```

如果服务器的输出不是 JSON 格式，那么您还应该`data`在添加之前转换该字段：

```
data = parseInt(data, 10); 
```

最后，如果您的数字实际上不是整数，请使用`parseFloat`而不是`parseInt`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-03T08:43:20.187

尝试像这样修改：

$.ajax({ type: "GET", url: 'index.php?act=ajax&op=getShippingPrice&id='+shippingID, 成功: function(data) {

```
 var newPrice = Number(currentPrice + Number($("#finalPrice").html()));
    $("#finalPrice").html(newPrice);
  }
}); 
```

至少你会得到错误。

# sql - 将 sql 语句转换为 cakephp 语句

> ID：14135444
> 
> 赞同：0
> 
> 时间：2013-01-03T08:39:22.207
> 
> 标签：sql, cakephp, cakephp-2.1

我正在使用 cakephp 2.1 并编写如下的 sql 语句。

```
SELECT * FROM industry
LEFT JOIN movie ON movie.industry_id = industry.id
LEFT JOIN (
        SELECT MAX(id) AS TID ,movie_id FROM trailer
        GROUP BY movie_id

      ) AS c ON c.movie_id = movie.id
LIMIT 0, 4; 
```

其中行业是“行业”模型，电影是“电影”模型，预告片是“预告片”模型，我试过这个。

```
$options['joins'] = array(
        array(
            'table' => 'movies',
            'alias' => 'Movie',
            'type' => 'left',
            'conditions' => array('Industry.id = Movie.industry_id')), 
        array(
            'table' => 'movie_trailers',
            'alias' => 'Trailer',
            'type' => 'left',
            'conditions' => array('Trailer.movie_id = Movie.id')));

    $trailers = $this->Industry->find('all', $options); 
```

所以请建议我将此语句转换为 cakephp 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:32:24.443

您的 SQL 是`join`带有 a 的`sub query`，而 Cake 代码是`join`唯一的。

您可以进行[子查询](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#sub-queries)，但我会寻找一种仅通过连接来完成的方法。

鉴于您的问题缺乏详细信息，我无法提供更好的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T05:21:52.993

很难说出您要通过查询来完成什么。但看起来您真正想要的是有关四个最新预告片的信息。

既然如此，您总是可以将其全部放入连接中：

```
$records = $this->Industry->find('all', array(
    'fields' => array('Trailer.id', 'Industry.id', 'Industry.Name', 'Movie.id', 'Movie.name'),
    'limit' => 4,
    'joins' => array(
        array(
            'table' => 'movies',
            'alias' => 'Movie',
            'type' => 'LEFT',
            'conditions' => array(
                'Movie.industry_id = Industry.id'
            ),
        ),
        array(
            'table' => '(SELECT MAX(id) As id, movie_id FROM trailers GROUP BY movie_id)',
            'alias' => 'Trailer',
            'type' => 'LEFT',
            'conditions' => array(
                'Trailer.movie_id = Movie.id'
            ),
        ),
    ),
)); 
```

由于在连接表中抛出查询，它会破坏 ORM 的可移植性，但它可以工作。

这是另一个可能有用的问题：[CakePHP and subquery](https://stackoverflow.com/questions/5770032/cakephp-and-subquery)

# android - 适用于 Android 的 Picasa API

> ID：14135447
> 
> 赞同：0
> 
> 时间：2013-01-03T08:39:28.857
> 
> 标签：android, picasa, google-data-api

有人知道我在哪里可以找到一个好的 API 来从我的 Android 手机向 Picasa 发送和接收照片吗？我一直在寻找超过 2 天，但我找不到一个好方法。`HttpRequests`我认为最好的方法是通过和使用来做到这一点`OAuth2`。有人对此有一个很好的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:49:16.257

他们有一个面向公众的 API，如下所述：

[https://developers.google.com/picasa-web/docs/2.0/developers_guide_java](https://developers.google.com/picasa-web/docs/2.0/developers_guide_java)

你说的对。您必须使用 OAuth 对您的应用程序进行身份验证，然后使用提供的 API 发送 HTTP 请求。

它应该适用于Android。如果您需要有关如何在 Android 上使用 RESTful Web 服务的示例，您可以从 google 中查看此示例：

[http://code.google.com/p/apps-for-android/source/browse/#git%2FPhotostream%2Fsrc%2Fcom%2Fgoogle%2Fandroid%2Fphotostream](http://code.google.com/p/apps-for-android/source/browse/#git%2FPhotostream%2Fsrc%2Fcom%2Fgoogle%2Fandroid%2Fphotostream)

这是一个使用 flickr API 流式传输照片的示例应用程序。

# actionscript-3 - 如何处理数据不一致？AS3 IExternalizable.readExternalData + sqlstatement.execute()

> ID：14135449
> 
> 赞同：0
> 
> 时间：2013-01-03T08:39:48.750
> 
> 标签：actionscript-3, sqlite, iexternalizable

我进行 AS3 Air 开发并使用 SQLite 在会话之间存储对象，这在[AS3 Developer Guide](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a5497-7fb4.html)和[AS3 SDK Reference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/data/SQLStatement.html#event%3aerror)中有详细记录。

存储在数据库中的类实现 IExternalizable，以便可以使用 BLOB 存储和恢复实例。这很有效，但我很难找到如何正确应对错误的反序列化。问题出现在以下情况：

1.  对象序列化
2.  对象已保存
3.  班级改变和程序更新
4.  序列化数据不再匹配保存的数据

我最初的方法是这样的：

```
public class SampleClass implements IExternalizable
{
    public static const version:int = 1; //increments upon program update
    public var idata:int;

    public function readExternal(data:IDataInput):void{
        if(version != data.readInt()) //check for corrupted data
            throw new IOError();

        idata = data.readInt();
    }

    public function writeExternal(data:IDataOutput):void{
        data.writeInt(version);
        data.writeInt(idata);
    }
} 
```

可悲的是，在 readExternal 中抛出错误会导致我的 SQLStatement.execute() 严重失败，并且 try..catch 没有用。

我目前处理这个问题的想法：

1.  程序更新时擦除数据库中的所有数据（哎哟）
2.  向类添加标志以指示反序列化错误
3.  使 SQLStatement.execute() 对抛出的错误做出正确反应

1和2我知道怎么做，但都不漂亮。3 我没有找到解决方案（还没有？）

其他想法或专业知识表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:09:16.270

嗨，这在 Adob​​e AIR 1.5 Cookbook（9.13 迁移 ActionScript 中的序列化更改）中有记录，由[Greg Jastrab](http://www.smartlogicsolutions.com)提供，他建议使用命名空间进行版本更改，如下面的代码示例：

```
public class WeatherData implements IExternalizable {
    namespace wd1_0 = "WD1.0";
    namespace wd1_1 = "WD1.1";

    protected var version:String;
    public var date:Date;
    public var low:Number;
    public var high:Number;

    public function WeatherData() {
        version = "WD1.1";
        date = new Date();
        low = high = 0;
    }
    public function readExternal(input:IDataInput):void {
        version = input.readUTF();
        var ns:Namespace = new Namespace(version);
        ns::parse(input);
    }
    public function writeExternal(output:IDataOutput):void {
        output.writeUTF(version);
        output.writeObject(date);
        output.writeFloat(low);
        output.writeFloat(high);
    }
    wd1_0 function parse(input:IDataInput):void {
        date = input.readObject() as Date;
        high = input.readFloat();
    }
    wd1_1 function parse(input:IDataInput):void {
        date = input.readObject() as Date;
        low = input.readFloat();
        high = input.readFloat();
    }
} 
```

我已经使用了这个解决方案，它按承诺工作:) 以下是在未来版本中添加新成员的“算法”

1.  添加新变量
2.  修改 writeExternal 以将其包含在序列化中
3.  在构造函数中增加版本字符串
4.  为新版本添加新命名空间
5.  添加一个作用域为新命名空间的解析函数并实现 readExternal 以匹配修改后的 writeExternal

此致

# linux - 如何以 Debian 稳定版为目标，但在测试中开发？

> ID：14135450
> 
> 赞同：1
> 
> 时间：2013-01-03T08:39:54.520
> 
> 标签：linux, debian, cross-compiling, chroot, binary-compatibility

我们有一些专门为 Debian stable (x86) 开发的 C++ 应用程序。

目前，这些应用程序的开发也是使用 Debian stable (x86) 系统完成的，因此开发人员拥有与目标系统上相同的所有库版本。
有时，我还需要处理这些组件，它一直困扰着我，我被一个非常过时的 KDevelop 版本（4.0.1 与最新的 4.4.1）所困扰。我想使用更新的系统进行开发（如最新的 Ubuntu 或 Debian 测试），但如何创建适合目标系统的二进制文件？
有没有一些简单的方法可以告诉编译器/链接器使用仅在目标平台上可用的库版本？
我看了[Emdebian](http://www.emdebian.org/)和他们的交叉编译包，但我认为这对我不起作用。他们似乎只有针对 ARM 等其他架构的软件包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:33:30.580

我建议使用 schroot。

```
$ sudo apt-get install schroot debootstrap

$ sudo debootstrap squeeze /opt/squeeze 
```

然后在 /etc/schroot/schroot.conf 添加和条目如下：

```
[squeeze]
type=directory
description=Debian squeeze
directory=/opt/squeeze
users=myusername
root-users=myusername 
```

之后，您就可以在 chroot 中安装软件包了：

```
$ schroot -c squeeze -u root
(squeeze)# aptitude 
```

安装完所有需要的包后，就可以以普通用户身份进入chroot（只要你在schroot.conf文件中列出）：

```
$ schroot -c squeeze 
```

schroot 程序对于在旧桌面上运行较新的 X11 应用程序也很有用，您也只需要传递环境：

```
$ schroot -c squeeze -p 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:44:02.323

一个简单的解决方案是`chroot`在例如测试（或不稳定）Debian 发行版（或者甚至一些非 Debian 但 Debian“兼容”的东西，如 Mint 或 Ubuntu）下安装 stable -ed Debian 发行版。

您想使用[debootstrap](http://wiki.debian.org/Debootstrap)实用程序（安装 chrooted 发行版），并且需要[绑定挂载](https://fermilinux.fnal.gov/documentation/tips/mount-bind-chroot)伪文件系统，例如`/proc/`、`/dev/`，`/sys/`也许还有您的`/home`. 然后使用`schroot`进入您的稳定 Debian（并在其中编译）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:43:37.707

你可以：

1.  在您的工作站上安装 Debian 测试
2.  创建一个 chroot 监狱。
3.  将 Debian stable 安装到 chroot 监狱
4.  从监狱中编译您的项目。

# javascript - 用javascript关闭弹出窗口？

> ID：14135454
> 
> 赞同：0
> 
> 时间：2013-01-03T08:40:22.767
> 
> 标签：javascript

我想知道是否有人可以帮助我。我基本上有一个 jquery 弹出窗口来查看图像。目前关闭弹出窗口的唯一方法是单击弹出窗口的外部或所谓的页面正文。

我在一个 div 中添加了一个关闭按钮，我用弹出窗口打开它，我想在单击以关闭弹出窗口时使用 javascript 告诉它。

所以这就是我得到的效果很好，它会关闭弹出窗口，但是如果用户想在关闭弹出窗口后再次点击另一张照片，那么它不会打开弹出窗口？

有什么想法可以调整我的 javascript 以在单击后超时或类似的东西吗？

谢谢。

```
<script> 
 $(function(){ 
  $('.close-button-window').click(function(){   
  $('.photo-window').fadeOut(); //hide the button 
    $('.close-button-window').fadeOut(); //hide the button 

}); 
}); 

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:02:47.320

如果这是一个实际的弹出窗口，而不是一个对话框，这样的东西应该可以工作

`<a href="self.close()">Close this Window</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:44:12.350

在打开弹出窗口的功能中，确保您具有以下（或类似的）

```
$('.photo-window').fadeIn(); //hide the button 
$('.close-button-window').fadeIn(); //hide the button 
```

# java - 为一个类只创建一个对象并重复使用相同的对象

> ID：14135459
> 
> 赞同：8
> 
> 时间：2013-01-03T08:40:56.197
> 
> 标签：java

我只想创建一个类的对象并一遍又一遍地重用同一个对象。有什么有效的方法可以做到这一点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T08:45:34.770

```
public final class MySingleton {
    private static volatile MySingleton instance;

    private MySingleton() {
        // TODO: Initialize
        // ...
    }

    /**
      * Get the only instance of this class.
      *
      * @return the single instance.
      */
    public static MySingleton getInstance() {
        if (instance == null) {
            synchronized (MySingleton.class) {
                if (instance == null) {
                    instance = new MySingleton();
                }
            }
        }
        return instance;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:43:25.863

这通常使用[单例模式](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)实现，但实际需要它的情况非常罕见，这不是一个无害的决定。

在做出决定之前，您应该考虑[替代解决方案。](https://stackoverflow.com/questions/1300655/whats-alternative-to-singleton)

关于[为什么静态变量可能是邪恶](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)的另一篇文章也是一个有趣的阅读（单例是静态变量）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:30:52.060

创建具有一个实例的类的最简单方法是使用`enum`

```
public enum Singleton {
    INSTANCE
} 
```

您可以将此与史蒂夫泰勒的答案进行比较，以了解它比替代方案简单得多。

顺便说一句：我只建议你使用无状态单例。如果你想要有状态的单例，你最好使用依赖注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T08:43:25.670

那将是[单例模式](https://stackoverflow.com/questions/2832297/java-singleton-pattern)- 基本上你阻止使用私有构造函数进行构造，并使用静态同步 getter “获取”实例，如果它不存在，它将创建单个实例。

干杯，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T08:43:36.500

有一种设计模式叫做 Singleton。如果你实施它，你会得到你所需要的。

看看[这个](http://en.wikipedia.org/wiki/Singleton_pattern)，看看实现它的不同方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T08:43:48.370

是的。它被称为[单例](http://en.wikipedia.org/wiki/Singleton_pattern)类。您创建一个且唯一的实例并在整个代码中使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T08:43:48.247

您正在寻找[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。阅读 wikipedia 文章，您将找到如何在 Java 中实现它的示例。

也许您还想了解更多有关设计模式的信息，那么我建议您阅读[“Head First Design Patterns”一](https://rads.stackoverflow.com/amzn/click/com/0596007124)书或Erich Gamma 等人[的原始设计模式一书](https://rads.stackoverflow.com/amzn/click/com/0201634988)（前者提供 Java 示例，后者没有t)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-03T08:44:21.450

您正在寻找的是[Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)。

# ios - 神秘日程2

> ID：14135464
> 
> 赞同：4
> 
> 时间：2013-01-03T08:41:25.583
> 
> 标签：ios, iphone

在[iOS 开发者程序许可协议](https://developer.apple.com/programs/terms/ios/standard/ios_program_standard_agreement_20120912.pdf)中，有一个神秘的引用，叫做“Schedule 2”。我能找到的最接近来源的是这个模糊的句子：

> 可单独购买，以涵盖通过 App Store 分发付费许可应用程序

有人知道这东西到底在哪里吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T08:56:50.970

要查看附表 2，请访问[http://itunesconnect.apple.com/](http://itunesconnect.apple.com/)并登录。然后单击“协议、税务和银行业务”链接。如果您已接受附表 2，您的一份合同将在合同区域“全部（参见合同）”下，合同类型为“付费申请”。该合同是附表 2。下载合同 PDF，您会看到它的开头是“通过单击以同意此附表 2，……”</p>

# c# - Linq to Entities - 加入包含实体集的列表

> ID：14135467
> 
> 赞同：0
> 
> 时间：2013-01-03T08:41:32.827
> 
> 标签：c#, linq, entity-framework, linq-to-entities, anonymous-types

我可以使用 listname.Join() 方法将列表（集合）与实体集连接起来。

例如，

```
var query = listName.Join(repository.GetQuery<MyCustomType>(),
 list => list.CustomTypeId,
 customType => customType.id,
 (list, customType) => list); 
```

这工作正常，但它只返回与实体中的列表集合相关的行。我还想要结果集中的“MyCustomType”实例。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:02:25.423

```
var query = listName.Join(repository.GetQuery<MyCustomType>(),
 list => list.CustomTypeId,
 customType => customType.id,
 (list, customType) => new { l = list, c = customType } ); 
```

# sdk - 报告计划

> ID：14135468
> 
> 赞同：1
> 
> 时间：2013-01-03T08:41:43.573
> 
> 标签：sdk, scheduling, cognos

我已经使用 java 编写了一个 SDK 来与 Cognos 集成。

这在正常使用 cognos 功能时工作正常。但是当我使用我的自定义命名空间直接登录到 cognos 并安排报告时，我遇到了一个异常（se 异常部分）

当我用谷歌搜索这个异常时，我知道我的 SDK 代码应该生成 TrustedCredentials 才能运行调度。我的 JDBCVisa 类中已经有该代码。但我仍然得到同样的例外。

请查看异常和 JDBCVisa 类代码（具体为 generateTrustedCredentials）：

> 例外 =================================================== ================================= CM-CAM-4005 无法验证。检查您的安全目录服务器连接并确认登录时输入的凭据。errorcamAuthUnrecoverableCAM-AAA-0194 对命名空间“xxx”的身份验证失败。CAM-AAA-0180 第 3 方提供商返回用户可恢复异常。1提供的凭据无效。无法对用户进行身份验证。请联系您的安全管理员。
> 
> # SOAP-ENC:arrayType="cm:baseClass[0]">

```
public ITrustedCredential generateTrustedCredential(
    IBiBusHeader theAuthRequest) throws UserRecoverableException,
    SystemRecoverableException, UnrecoverableException
{
    CreateLog.LogMsg("generateTrustedCredential: Called  ");
    boolean isValidCredentials = true;
    String[] theUsername = null;
    String[] thePassword = null;

    // 1 - Look for credentials coming from SDK request
    theUsername = theAuthRequest.getCredentialValue("username");
    thePassword = theAuthRequest.getCredentialValue("password");

    if (theUsername == null && thePassword == null)
    {
        // 2 - Look for credentials in formfield
        theUsername = theAuthRequest.getFormFieldValue("CAMUsername");
        thePassword = theAuthRequest.getFormFieldValue("CAMPassword");
    }

    if (theUsername != null && theUsername.length == 1
        && theUsername[0].equals(username) && thePassword.length == 1)
    {
        isValidCredentials = this.validateConnection(theUsername[0], thePassword[0]);
    }
    else
    {
        isValidCredentials = this.validateConnection(this.username, this.password);
    }

    if (!isValidCredentials)
    {
        CreateLog.LogMsg("generateTrustedCredential: Invalid credos  ");
        UserRecoverableException e = new UserRecoverableException(
            "Please type your credentials for authentication.",
            "The provided credentials are invalid.");

        e.addDisplayObject(new ReadOnlyDisplayObject("User ID:",
            "CAMUsername", this.username));
            e.addDisplayObject(new TextNoEchoDisplayObject("Password:",
            "CAMPassword"));

        throw e;
    }

    TrustedCredential tc = new TrustedCredential();
    //tc.addCredentialValue("username", username);
    //tc.addCredentialValue("password", password);
    CreateLog.LogMsg("generateTrustedCredential: Successful  ");
    return tc;
} 
```

# iphone - UITableView 滚动速度

> ID：14135477
> 
> 赞同：-1
> 
> 时间：2013-01-03T08:42:32.917
> 
> 标签：iphone, objective-c, ios, performance, uitableview

我正在开发一个类似于 Facebook 的 iPhone 应用程序，但目的不同。`UITableView`我在内容、照片、点赞数、评论、标题等中的每一行都有一组数据。我有自定义单元格，它继承`UITableviewcell`了我在其中创建了所有 UI 对象，例如`UIIMageView`, `UILabel`,`UIButton`等等。在滚动我的时候，`UITableView`我会将我的数据提供给这个自定义单元格，它工作正常。

我的问题是滚动速度！

每当我滚动时，它就会被击中并且滚动很慢。我所有的 UI 组件分配都在主线程中完成。

有什么方法可以提高滚动速度或在单独的线程中为我的 UI 组件分配值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:45:50.603

就是这个问题，`All my UI components assignment are done in main thread.`！！

不应使用主线程来获取 url 或其他资源。会影响用户体验。获取图像 url 等应在单独的后台线程中执行，然后在下载完成后使用图像数据更新主线程。这应该可以解决您的问题。

还要弄清楚在主线程中执行了哪些任务，并查看哪些与 UI 无关，将这些任务移至后台线程...

[在 UITableViewCell 中延迟加载图像](https://stackoverflow.com/questions/531482/lazy-load-images-in-uitableviewcell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:03:00.550

尝试以下链接在 tableview 中创建延迟加载，这将使您的 tableview 滚动平滑

[https://github.com/enormego/EGOImageLoading](https://github.com/enormego/EGOImageLoading)

[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

快乐编码！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:41:44.333

我不知道我是否真的得到了你的要求，但是当你滚动你的 tableview 时，它看起来像是滞后吗？因为获取数据？

试试这个： [https ://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

说明很容易理解和理解。这就是我尝试制作我的 Youtube 提要时所做的事情（包括图片、视频标题、视频描述、发布日期等）。希望它可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:44:25.653

我使用[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)加载图像`UITableViewCells`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T08:51:30.170

您可以通过以下方式执行此操作：

1）采用自定义表格视图单元格。（不是必需的，但更好看和优化的代码）。

2）对单元格中的图像实施延迟加载。

延迟加载是快速滚动和内存优化的好方法。

您将在表格视图中准备好延迟加载的演示，并且苹果也提供了相同的演示。

这将解决您的问题。

干杯和快乐编码！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T09:01:35.940

这个问题是由于下载图像而出现的。当您向下滚动表格并释放其他单元格时，会创建表格单元格。创建单元格时，它会下载该单元格的图像，这就是当时主线程暂停的原因。下载图像后，它会移动到下一个单元格。

您需要在另一个线程中下载图像，而不是在主线程中。developer.apple.com 上的示例代码已提供，请检查此内容。我认为它对你有帮助。

[懒人Loding的示例项目代码](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

# javascript - 在 javascript 中获取根网站 url 以进行重定向

> ID：14135479
> 
> 赞同：7
> 
> 时间：2013-01-03T08:42:37.587
> 
> 标签：javascript, asp.net, window.location

我想在会话超时后从我网站的每个页面重定向到登录页面。我尝试将 window.location 设置为登录页面：

```
var ParentUrl = encodeURIComponent(window.parent.location.href);
document.location.href = "~/Login.appx?ReturnUrl=" + ParentUrl; 
```

但“~”似乎不受支持。我的登录页面位于我的根文件夹下。

例如：* *http://server/website/* *Login.aspx

如何在 javascript 中获取此网址？

非常感谢，

英巴尔。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-18T08:53:11.827

我会使用 window.location.origin。它将为您返回第一部分，然后只需对父 url 进行 Uri 编码，就完成了！

```
var parentUrl = encodeURIComponent(window.location.href),
    loginUrl = window.location.origin+"/Login.appx?ReturnUrl=" + parentUrl;

window.location.href = loginUrl; 
```

跨浏览器功能的一个小技巧是使用 window.location。它在所有兼容的浏览器上都是读/写的。虽然 document.location 在某些（即）中是只读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:51:29.470

为什么用~？乍一看，我会说删除它可以解决您的问题。像这样。

```
 document.location.href = "/Login.appx?ReturnUrl=" + ParentUrl; 
```

[编辑] 回复第一条评论...

我相信这可以解决问题：

```
function getLoginPage() {
    var urlParts = document.location.href.split("/");
    return "/" + urlParts[2] + "/" + urlParts[3] + "/Login.aspx";
}

document.location.href = getLoginPage() + "?ReturnUrl=" + ParentUrl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T08:55:17.327

```
function getURL() { 
    var arr = window.location.href.split("/"); 
    delete arr[arr.length - 1]; 
    return arr.join("/"); 
} 
```

你可以像这样使用它：

```
document.location.href = getURL() + "Login.appx?ReturnUrl="; 
```

我的函数和第一个答案之间的区别在于“/”将重定向到服务器/页面，而我的代码将重定向（在您的示例 URL 中）到服务器/网站/页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T08:55:10.973

“/website”部分通常是服务器端信息。JavaScript 无法自行确定这一点。

因此，您必须将其从服务器传递到客户端。你不妨一次通过“http://server/website”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-05T16:43:44.027

此函数将返回当前 url 的根（基本）URL。

你有类似的东西：[http](http://www.example.com/something/index.html) ://www.example.com/something/index.html 你想要：[http ://www.example.com/something/](http://www.example.com/something/)

```
function getBaseUrl() {
    var re = new RegExp(/^.*\//);
    return re.exec(window.location.href);
} 
```

此处的详细信息：[Javascript：获取基本 URL 或根 URL](https://www.404it.no/en/blog/javascript_get_base_url_or_root_url)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-26T12:02:05.443

```
function homepage_of(url) { 
    var arr = url.replace('//','@@').split("/");
    return arr[0].replace('@@','//');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-03T01:21:10.633

我修改了 PerKristian 的答案，所以它适用于我的情况，

```
function getBaseUrl() {
    var re = new RegExp(/^.*\/\/[^\/]+/);
    return re.exec(window.location.href);
} 
```

匹配所有内容，直到第一个孤单/

例如

`http://stackoverflow.com/questions/14135479/get-root-website-url-in-javascript-for-redirect`

将返回`http://stackoverflow.com`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-07T09:37:00.850

我通常会创建一个“settings.js”文件，在其中存储应用程序的一组设置。在这种情况下：

`settings = { "root": "myAppRoot/" /*, ... */ };`

然后在脚本中，例如我调用

`myDynamicDiv.load("/" + settings.root + "urlPart1/urlPart2/app"`

# javascript - 如何从 JavaScript 调用 iMacro？

> ID：14135483
> 
> 赞同：7
> 
> 时间：2013-01-03T08:42:48.190
> 
> 标签：javascript, webpage, imacros

我有一个 iMacro ' **Test.iim** '，我想从附加到我网页中按钮单击事件的 javascript 中播放或调用此**iMacro 。**
请帮助一些示例代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T03:20:20.830

答案是这样的。

```
iimPlay("Test.iim") 
```

在宏文件夹中调用宏时，将“”放在宏周围，它将播放它。您也可以像这样为该宏添加计时器。

```
iimPlay("Test.iim",60) 
```

这意味着宏最多需要 60 秒才能完成。

当播放在 .js 文件中声明为变量的宏时，你可以这样做

```
var test;

test ="CODE:";
test +="SET !ERRORIGNORE YES "+"\n";
test +="URL GOTO=www.google.com "+"\n";

iimPlay(test,60) 
```

仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:19:38.640

简单的示例代码是：

```
iimPlay(Test.iim); 
```

在这里您可以找到有关它的其他信息：[http ://wiki.imacros.net/iimPlay](http://wiki.imacros.net/iimPlay)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T20:56:22.620

您还可以使用[imacros java 脚本转换器](https://xs-sol.com/imacros-java-script-converter/)，在其中复制粘贴整个脚本，然后将最终代码作为 java 脚本接收。

# android - Android ScrollView 高度

> ID：14135492
> 
> 赞同：1
> 
> 时间：2013-01-03T08:43:13.073
> 
> 标签：android, scrollview, height, android-scrollview, android-wrap-content

我在让 ScrollView 包装内容时遇到问题。

我不知道为什么，但是 ScrollView 的高度比我拥有的内容要大，我读到了一些解决这个问题的方法，但它们没有用。

( `layout_weight`, `fill_parents`, `wrap_content`, `android:fillViewport="true"`)。

所以我想我在我的代码中犯了一个简单的错误：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/title_bg"
        android:gravity="center"
        android:text="Profile"
        android:textColor="#fff"
        android:textSize="20sp" />

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true" >

        <LinearLayout
            android:id="@+id/LinearLayout01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/background"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/TextView02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="8dp"
                    android:text="@string/mother"
                    android:textAppearance="? android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/etMother"
                    android:layout_width="0sp"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginTop="8dp"
                    android:layout_weight="1"
                    android:ems="10"
                    android:hint="@string/enter_your_name"
                    android:inputType="textPersonName" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <ToggleButton
                    android:id="@+id/tbDueDateLMP"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="8dp"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:background="@drawable/button_red"
                    android:checked="true"
                    android:textColor="#fff"
                    android:textOff="@string/due_date"
                    android:textOn="@string/lmp" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/bPlusDay"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"
                    android:background="@drawable/button_blue"
                    android:onClick="onClick"
                    android:text="@string/plus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bPlusMonth"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"
                    android:background="@drawable/button_blue"
                    android:onClick="onClick"
                    android:text="@string/plus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bPlusYear"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_weight="0.69"
                    android:background="@drawable/button_blue"
                    android:onClick="onClick"
                    android:text="@string/plus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/tvDay"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"
                    android:background="@drawable/black_back"
                    android:padding="3dp"
                    android:text="00"
                    android:textColor="#000"
                    android:textSize="59sp" />

                <TextView
                    android:id="@+id/tvMonth"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"
                    android:background="@drawable/black_back"
                    android:padding="3dp"
                    android:text="00"
                    android:textColor="#000"
                    android:textSize="59sp" />

                <TextView
                    android:id="@+id/tvYear"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_weight="0.69"
                    android:background="@drawable/black_back"
                    android:padding="3dp"
                    android:text="0000"
                    android:textColor="#000"
                    android:textSize="59sp" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/bMinusDay"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginTop="4dp"
                    android:layout_weight="1"
                    android:background="@drawable/button_blue"
                    android:onClick="onClick"
                    android:text="@string/minus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bMinusMonth"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginTop="4dp"
                    android:layout_weight="1"
                    android:background="@drawable/button_blue"
                    android:onClick="onClick"
                    android:text="@string/minus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bMinusYear"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginTop="4dp"
                    android:layout_weight="0.69"
                    android:background="@drawable/button_blue"
                    android:onClick="onClick"
                    android:text="@string/minus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />
            </LinearLayout>

            <Button
                android:id="@+id/bProfileSave"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8dp"
                android:background="@drawable/button_pink"
                android:onClick="onClick"
                android:text="@string/save"
                android:textColor="#fff" />

            <TextView
                android:id="@+id/tvProfileInfo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="8dp"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#F00" />
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:03:47.810

请看一下这段代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"   
    android:background="@android:color/darker_gray"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white"
        android:text="TEST" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/LinearLayout01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/TextView02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="8dp"
                    android:text="mother" />

                <EditText
                    android:id="@+id/etMother"
                    android:layout_width="0sp"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginTop="8dp"
                    android:layout_weight="1"
                    android:ems="10"
                    android:hint="enter_your_name"
                    android:inputType="textPersonName" />
            </LinearLayout>
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <ToggleButton
                    android:id="@+id/tbDueDateLMP"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="8dp"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"

                    android:checked="true"
                    android:textColor="#fff"
                    android:textOff="due_date"
                    android:textOn="lmp" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/bPlusDay"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"

                    android:onClick="onClick"
                    android:text="plus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bPlusMonth"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"                   
                    android:onClick="onClick"
                    android:text="plus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bPlusYear"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_weight="0.69"                   
                    android:onClick="onClick"
                    android:text="plus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/tvDay"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"                   
                    android:padding="3dp"
                    android:text="00"
                    android:textColor="#000"
                    android:textSize="59sp" />

                <TextView
                    android:id="@+id/tvMonth"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_weight="1"                   
                    android:padding="3dp"
                    android:text="00"
                    android:textColor="#000"
                    android:textSize="59sp" />

                <TextView
                    android:id="@+id/tvYear"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_weight="0.69"                 
                    android:padding="3dp"
                    android:text="0000"
                    android:textColor="#000"
                    android:textSize="59sp" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/bMinusDay"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginTop="4dp"
                    android:layout_weight="1"                  
                    android:onClick="onClick"
                    android:text="minus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bMinusMonth"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginTop="4dp"
                    android:layout_weight="1"                
                    android:onClick="onClick"
                    android:text="minus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/bMinusYear"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginTop="4dp"
                    android:layout_weight="0.69"                   
                    android:onClick="onClick"
                    android:text="minus"
                    android:textColor="#fff"
                    android:textSize="20sp"
                    android:textStyle="bold" />
            </LinearLayout>

            <Button
                android:id="@+id/bProfileSave"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8dp"               
                android:onClick="onClick"
                android:text="save"
                android:textColor="#fff" />

            <TextView
                android:id="@+id/tvProfileInfo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="8dp"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#F00" />
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:47:04.893

您可以尝试将顶部线性布局设置为包装垂直内容而不是填充父级，这会使整个布局使用全高

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T18:19:02.717

我认为罪魁祸首在 android:fillViewport="true" 中。如果设置了此项，那么即使没有足够的内容来占用空间，并且即使您有冲突的属性 android:layout_height="wrap_content"，它也会填充视口。fillViewport 优先。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-26T15:30:19.637

可以尝试设置`android:layout_height = "0dp"` 它就像一个魅力

# entity-framework - 实体框架 - 在 InverseProperty 上命名“自动生成”表

> ID：14135501
> 
> 赞同：0
> 
> 时间：2013-01-03T08:43:47.537
> 
> 标签：entity-framework, entity-relationship

我做了一些搜索，但找不到相同的问题/问题。当 EF 创建遇到 InverseProperty DataAnnotation 的表时，我对表命名（在数据库中）有疑问

“虚拟/演示代码”：

```
public class User
{
    public Guid Id { get; set; }
    public String Name { get; set; }

    public virtual List<Event> InvitedEvents { get; set;}
    public virtual List<Event> AcceptedEvents { get; set;}
    public virtual List<Event> DeclinedEvents { get; set;}
}

public class Event
{
    public String Name { get; set;}

   [InverseProperty("InvitedEvents")]
   public virtual List<User> InvitedUsers { get; set; }
   [InverseProperty("AcceptedEvents")]
   public virtual List<User> AcceptedUsers { get; set; }
   [InverseProperty("DeclinedEvents")]
   public virtual List<User> DeclinedUsers { get; set; }

} 
```

这一切正常并创建了查找表，但我的问题是 ***如何给该表命名？***

他们现在被命名（类似） - EventUser - EventUser_1 - EventUser_2

我想给它一些更“可读”的名字。

希望很清楚。

**更新！**

正如[Ladislav Mrnka](https://stackoverflow.com/users/413501/ladislav-mrnka)所回答的那样，流畅的 API 是解决方案。我删除了 [InverseProperty] 属性并将关系的创建添加到 DataContext 类中。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Event>()
        .HasMany(e => e.InvitedEvents )
        .WithMany(u => u.InvitedUsers )
        .Map(mc =>
            {
                mc.ToTable("%TABLENAME%");
                mc.MapLeftKey("UniqueId");
                mc.MapRightKey("UniqueId");
             });
} 
```

您需要确保每个类都包含一个 UniqueId 列（在我的演示示例 EventId、UserId 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T10:12:47.540

答案也在答案中更新

正如 Ladislav Mrnka 所回答的那样，流畅的 API 是解决方案。我删除了 [InverseProperty] 属性并将关系的创建添加到 DataContext 类中。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Event>()
        .HasMany(e => e.InvitedEvents )
        .WithMany(u => u.InvitedUsers )
        .Map(mc =>
            {
                mc.ToTable("%TABLENAME%");
                mc.MapLeftKey("UniqueId");
                mc.MapRightKey("UniqueId");
             });
} 
```

# java - 定义 DAY_OF_WEEK 和 Calendar.HOUR_OF_DAY 类型的变量

> ID：14135503
> 
> 赞同：1
> 
> 时间：2013-01-03T08:43:49.450
> 
> 标签：java

我是 Java 新手。如何定义类型的**枚举**`DAY_OF_WEEK` `HOUR_OF_DAY`。我想使用日历对象。我不创建自己的**枚举**。我想有同样的：

```
 public DAY_OF_WEEK fromDayOfWeek; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:17:20.570

如果你想直接玩`Date`对象。您可能不需要编写自己的类来使用`Calendar`. 您可以使用 apache commons [DateUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/DateUtils.html)。
希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:23:08.757

`DAY_OF_WEEK`不是为了这个。它用于标记日历字段。例如，在[get()](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#get%28int%29)方法中，您通过`DAY_OF_WEEK`指定您要检索日历的星期几字段。

PS 如果您想使用抽象的星期几进行操作，请使用 normal `int`，基于 7。如果想将它与日历联系起来——使用日历并只从它们中获取星期几。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:40:22.767

只需添加已经提供的答案，如果您真的想使用枚举，您也应该传递该`int`值：

```
public enum DayOfWeek {
    MONDAY(Calendar.MONDAY), 
    ...;

    private final int dayOfWeek;

    DayOfWeek(int dayOfWeek) {
        this.dayOfWeek = dayOfWeek;
    }

    public int intValue() {
        return dayOfWeek;
    }
} 
```

您可能还想查看[Joda Time](http://joda-time.sourceforge.net)的日期/时间操作。

# c - 增加 oled 上的文本大小（Cortex M3、Stellaris LM3S6965）

> ID：14135509
> 
> 赞同：1
> 
> 时间：2013-01-03T08:44:20.030
> 
> 标签：c, text, cortex-m3

我正在使用 Cortex M3、Stellaris® LM3S6965 评估板。我正在尝试在正在工作的 oled 屏幕上显示文本。但我不知道如何增加文本大小。

有人知道该怎么做吗？

我当前的代码：

```
 #include "inc/hw_types.h"
#include "driverlib/debug.h"
#include "driverlib/sysctl.h"
#include "drivers/rit128x96x4.h"

//*****************************************************************************
//
// The error routine that is called if the driver library encounters an error.
//
//*****************************************************************************
#ifdef DEBUG
void
__error__(char *pcFilename, unsigned long ulLine)
{
}
#endif

//*****************************************************************************
//
// Display scrolling text plus graphics on the OLED display.
//
//*****************************************************************************
int
main(void)
{
    unsigned long ulRow, ulCol, ulWidth, ulHeight;
    volatile int iDelay;
    unsigned char *pucRow;
    static char pucHello[] =
    {
        "                      "
        "Current selected timezone: +2 GMT - Brussels"
        "                      "
    };

    //
    // Set the clocking to run directly from the crystal.
    //
    SysCtlClockSet(SYSCTL_SYSDIV_1 | SYSCTL_USE_OSC | SYSCTL_OSC_MAIN |
                   SYSCTL_XTAL_8MHZ);

    //
    // Initialize the OLED display.
    //
    RIT128x96x4Init(1000000);

    // Simple scrolling text display
    //
    ulCol = 0;
    while(1)
    {
        //
        // Display the text.
        //
        RIT128x96x4StringDraw(&pucHello[ulCol++], 8, 8, 11);

        //
        // Delay for a bit.
        //
        for(iDelay = 0; iDelay < 100000; iDelay++)
        {
        }

        //
        // Wrap the index back to the beginning of the string.
        //
        if(ulCol > 53)
        {
            ulCol = 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:56:55.113

当然，不能保证你可以。

嵌入式系统在字体使用方面通常没有太大的自由度。动态缩放非常昂贵，并且许多字体是作为特定大小的预渲染二进制位图的句柄。

您需要查看`rit128x96x4.h`标头定义的 API：s，因为这似乎是特定于显示的功能。

您没有说您当前获得的字体有多大；在小至 128x96 的显示器上，我不希望有任何超大字体，因为通常提供小字体以最大化屏幕上可以容纳的文本量会更有用。

**更新**：如果[这个随机的谷歌命中](http://code.google.com/p/lm3s8962-example/source/browse/trunk/examples/4_gui_tetris/rit128x96x4.h?r=15)是准确的，提供的图形 API 并不完全丰富，而且似乎没有办法切换字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:18:28.293

StellarisWare 下的 grlib\fonts 文件夹中有一个字体编号。您可以使用 API 调用 GrContextFontSet() 更改字体

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:13:24.880

字体通常只是位图数组。您可以为您想要的任何字体重新定义位图。如果要增加大小，则可能还需要更改其他常量，以便绘图例程知道如何在渲染字符时对其进行间隔。

# android - 添加整数并计算百分比并使用进度条显示百分比

> ID：14135513
> 
> 赞同：0
> 
> 时间：2013-01-03T08:44:48.497
> 
> 标签：android, progress-bar

我正在开发财务应用程序，它应该包含总工资和相应事物的支出金额，比如杂货、电费、交通、互联网。我已经取了值并计算了百分比，现在问题是因为计算在`double`. 但是下面的语句`int`只取值，但我想显示在`progress bar`not in 中`progress dialog`。

```
progressDialog.incrementProgressBy(x);
int amount2 = b.getInt("restaurant",2);
double res = ((double)amount2/amount) * 100;
TextView txt2 = (TextView) findViewById(R.id.tv2);
txt2.setText("percentage2\t" + res); 
```

金额是总工资，`amount2`是餐厅账单。所以现在百分比值是 in`double`并且现在必须显示在`progress bar`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:59:41.903

要么我不完全理解你的问题，要么就是这么简单：

```
int totalIncome = getTotalIncome(); //or however you retrieve the totalIncome
int restaurantExpense = bundle.getInt("restaurant", 2);
double percentage = ((double)restaurantExpense/totalIncome) * 100;
((ProgressBar)findViewById(R.id.myprogressbar)).setProgress((int)percentage); 
```

但是我还是不知道你为什么用a `ProgressDialog`，然后说你不想用。

编辑：您也可以使用`totalIncome`as 最大值：

```
myProgressbar.setMax(totalIncome);
myProgressbar.setProgress(restaurantExpense); 
```

现在您可以省略计算，并且不必将任何内容转换为`int`.

# java - 在 Java 中加密 Zip 条目而不是整个 Zip 文件

> ID：14135527
> 
> 赞同：3
> 
> 时间：2013-01-03T08:46:11.120
> 
> 标签：java, encryption, zip

我知道如果我正在创建和写入一个 zip 文件，我将 ZipOutputStream 包装在一个 OutputStream （或子类）周围，如下所示：

> fos = new FileOutputStream(fileName)
> zOut = new ZipOutputStream(fos);

我还知道如何创建一个 zip 文件以及需要指定何时添加新条目并关闭条目。我想做的是加密存档中的文件，但不加密存档，以便仍然很容易找到条目。（部分原因是因为不同的条目将在不同的时间被读取 - 如果我加密整个 zip 文件，那么我每次都必须从头开始读取它，即使我需要的 zip 条目是第 99 个。如果整个文件被加密，我将无法随机访问条目。）

我通常知道要加密（或解密），我将一个流包裹在另一个流周围，如下所示：

> fos = new FileOutputStream("ciphertext");
> CipherOutputStream cos = new CipherOutputStream(fos, key);

我假设如果我正在写入 ZipOutputStream 并且想要加密条目，以创建 ZipOutputStream，我可以执行我在第一个示例中所做的事情，然后当需要为 zip 条目写入数据时，我将 ZipOutputStream 包装在 CipherOutputStream 中，如下所示：

> fos = new FileOutputStream(fileName)
> zOut = new ZipOutputStream(fos);
> ...
> CipherOutputStream cos = new CipherOutputStream(zOut, key);

但这提出了几个问题：

1.  一般来说，对于这样的事情，流的顺序是否重要？如果我将 CipherOutputStream 包装在 ZipOutputStream 中，或者我可以反过来做吗？换句话说，如果整个文件都被加密了，哪个流包裹在哪个流周围有关系吗？
2.  如果我按照上述方式进行操作，并对每个条目中的数据使用 CipherOutputScream，那么当我需要关闭该条目并继续下一个条目时该怎么办？我可以销毁 CipherOutputStream 而不影响它所包裹的流吗？
3.  有没有更好的方法只加密 zip 条目而不加密 zip 文件中的目录和其他数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:06:39.063

不要与流混淆。有一个流可以在磁盘 ( `ZipOutputStream`) 上创建/更新存档文件。此流未编码，因此您必须单独保留此代码。

您想要的是加密各个条目的*数据*。因此，当您向存档添加新条目时，请`putNextEntry()`照常添加新条目。

现在加载要加密的数据并创建一个`CipherOutputStream`写入`ByteArrayOutputStream`. 以这种方式编码所有数据，然后将字节附加`ByteArrayOutputStream`到存档中：

```
ByteArrayOutputStream buffer = new ByteArrayOutputStream();

CipherOutputStream cos = new CipherOutputStream(buffer, key);
... encode data ...

byte[] data = buffer.toByteArray();
zOut.write( data, 0, data.length ); 
```

请注意，您可能希望使用来阅读存档，`ZipFile`因为它为`InputStream`您可以包装的每个条目提供了一个单独的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T10:46:59.780

我是新来的，因此我无法对 Aaron Digulla 的帖子发表评论。这是对他的职位的补充。

加密将数据冗余降至最低，因此加密后的压缩是无效的。压缩后的输出通常大于未压缩的输入。为防止更大的输出，请使用 0 压缩级别。仅当 zip 文件只是一个容器时，此解决方案才有效。

# php - 获取最后一个论坛帖子

> ID：14135530
> 
> 赞同：0
> 
> 时间：2013-01-03T08:46:20.883
> 
> 标签：php, sql

我正在创建一个论坛，其中一个数据库表中包含所有主线程帖子，而另一个数据库表中包含所有答案。到目前为止，拥有两张桌子简直就是地狱。

```
forum_threads
thread_id | title | post

forum_answers
answer_id | ref_thread_id (foreign key) | post 
```

如何选择最新的帖子，包括主题标题？线程可能没有任何答案，在这种情况下，所有数据都应该来自 forum_thread。但是如果它有一个答案数据应该从forum_answers中选择，还有在forum_threads中找到的标题。

希望你能理解！

如果我将所有内容都放在一张表、答案和主要帖子中，这会容易得多。虽然有人告诉我这是最好的方法，但不太确定......我正在考虑切换回只有一张桌子。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:53:54.563

这应该可以得到你想要的，但你真的应该在这些表中存储日期。

```
SELECT
    ft.thread_id,
    ft.title,
    COALESCE(fa.post,ft.post) AS post
FROM
    forum_threads ft
LEFT JOIN
    forum_answers fa
    ON  (ft.thread_id = fa.ref_thread_id)
ORDER BY
    ft.thread_id
LIMIT 1; 
```

除非该线程没有线程，否则它将为您提供`post`价值`forum_answers`，然后它只会为您提供`post`价值`forum_threads`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:51:06.147

试试这个。

```
SELECT fa.post, ft.title
FROM forum_threads ft INNER JOIN forum_answers fa ON
     ft.thread_id = fa.ref_thread_id
ORDER BY fa.answer_id
LIMIT 1; 
```

# regex - 无论如何，如何插入确切的字符串

> ID：14135532
> 
> 赞同：0
> 
> 时间：2013-01-03T08:46:30.230
> 
> 标签：regex, sed

我正在尝试使用 sed 在文件中插入（-i）确切的代码行。这是要插入的行：

> “一些文字”。$索引++ 。"\t" 。'虚拟文本' 。"\t"'\

这是我尝试过的（shell脚本）：

```
sed -i '66 i\"Sometext" . $index++ . "\t" . 'dummytext' . "\t"' filename 
```

这是文件名中的结果：

> “一些文字”。$索引++ 。“”。虚拟文本。" "

它应该在哪里：

> “一些文字”。$索引++ 。"\t" 。'虚拟文本' 。"\t"

显然，某些字符被 sed 解释为 sed 命令，我想避免这种情况。

请记住上述示例的任何指针/提示/提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:53:03.433

一些额外的转义和引号：

```
sed -i '2 i\"Sometext" . $index++ . "\\t" . '\''dummytext'\'' . "\\t"' filename 
```

# html - 在样式标签中编辑滚动条

> ID：14135538
> 
> 赞同：2
> 
> 时间：2013-01-03T08:47:15.147
> 
> 标签：html, css, tags, styles, scrollbar

首先，我和我的朋友大多使用 Chrome，所以每个人都知道。我了解 webkits 在 Chrome 中工作。

好的，我需要弄清楚的是如何将 webkit 滚动条编辑选项放入我的 HTML 样式标签中。我知道如何在 CSS 样式表中编辑滚动条，但我无法访问样式表。所以我唯一的选择是尝试使用“style =”进行编辑。但是，我似乎无法编辑我的滚动条，我真的很喜欢这里显示的简单示例：http: [//css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)。

有什么办法可以在标签中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:30:59.997

恕我直言，这是不可能的。

因为您可以应用`style=`到 HTML 文件中的现有元素（虽然不建议这样做，并且这种编程习惯已被弃用），但`::-webkit-scrollbar`还有一些`psuedo-elements`您不能在 HTML 中声明。因此，您不能在 HTML 文件中设置滚动条样式。:-(

但是，如果有人知道任何解决方法，那么我会很高兴知道它。:-)

# javascript - 如何使用 Javascript 打印输出流 PDF

> ID：14135540
> 
> 赞同：0
> 
> 时间：2013-01-03T08:47:21.330
> 
> 标签：javascript, pdf, printing

我将 PDF 文件作为**输出流**并希望使用**Javascript**打印它。有一些关于打印 PDF 文件或 iframe 的提示。但我需要在打印请求后打印服务器生成的 PDF 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:57:38.553

JavaScript 无法访问任何本地资源，例如文件系统或附加的打印机，因此无法直接访问。

您需要将 PDF 转换为 HTML5。然后在浏览器中显示并调用`document.print()`打印它。

[pdf.js](https://github.com/mozilla/pdf.js)项目已经很好地将 PDF 转换为 HTML。

# c# - 使用数据表代替 linq 中的列表

> ID：14135541
> 
> 赞同：1
> 
> 时间：2013-01-03T08:47:29.323
> 
> 标签：c#, asp.net, linq

我在 LINQ 中编写了以下查询：
`memberlist`is `List`of`membershipuserwrapper`

```
List<usercodes> testlist = new List<usercodes>();
                testlist.Add(new usercodes { usercode = "na02\\srosner" });
                testlist.Add(new usercodes { usercode = "Schie@testtest.com" });

var filtered = (from c in memberList
                where (from t in testlist 
                       select t.usercode.ToLower())
                       .Contains(c.UserName.ToLower())
                select c)
                .ToList(); 
```

现在，我有`DataTable`一个用户列表来代替，`testlist`我想用它`DataTable`来代替我的 LINQ 查询。

我可以用那个方法来做`DataTable`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:52:11.180

您应该能够使用：

```
from t in testlist.AsEnumerable()
select t.Field<string>("usercode").ToLower() 
```

代替原来的：

```
from t in testlist
select t.usercode.ToLower() 
```

不过，就我个人而言，我会说这`List<usercodes>`是 a 的巨大改进`DataTable`，并且会鼓励您追求原始版本（可能将类名更改为`UserCodes`或类似）。

# python - 元组在 CPython 中是如何实现的？

> ID：14135542
> 
> 赞同：31
> 
> 时间：2013-01-03T08:47:31.653
> 
> 标签：python, data-structures, tuples, cpython, python-internals

我一直在尝试了解如何在场景下实现 CPython。Python 是高级别的很好，但我不喜欢把它当作一个黑盒子。

考虑到这一点，元组是如何实现的？我已经查看[了源 (tupleobject.c)](https://github.com/python/cpython/blob/master/Objects/tupleobject.c)，但它超出了我的想象。

我看到了`PyTuple_MAXSAVESIZE = 20`，`PyTuple_MAXFREELIST = 2000`什么是保存和“免费列表”？（长度为 20/21 或 2000/2001 的元组之间会有性能差异吗？是什么强制最大元组长度？）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-03T09:14:26.947

需要注意的是，此答​​案中的所有内容均基于我从查看您链接的实现中收集到的内容。

元组的标准实现似乎只是一个数组。但是，有很多优化可以加快速度。

首先，如果您尝试创建一个空元组，CPython 将返回一个代表空元组的规范对象。因此，它可以节省大量仅分配单个对象的分配。

接下来，为了避免分配一堆小对象，CPython 为许多小列表回收内存。有一个固定常数 ( `PyTuple_MAXSAVESIZE`) 使得所有小于此长度的元组都有资格回收它们的空间。每当一个长度小于该常量的对象被释放时，与其关联的内存有可能不会被释放，而是将根据其大小存储在“空闲列表”中（下一段中将详细介绍） . 这样，如果您需要分配一个大小为 n 的元组，而其中一个已被分配且不再使用，CPython 可以回收旧数组。

空闲列表本身被实现为一个大小数组，`PyTuple_MAXSAVESIZE`存储指向未使用元组的指针，其中数组的第 n 个元素指向 NULL（如果没有大小为 n 的额外元组可用）或指向一个大小为 n 的回收元组。如果有多个不同的大小为 n 的元组可以重用，则它们通过将每个元组的第零个入口点指向下一个可以重用的元组，以一种链表的形式链接在一起。（由于只分配了一个长度为零的元组，因此永远不会有读取不存在的第零元素的风险）。通过这种方式，分配器可以存储一定数量的每个大小的元组以供重用。为了确保这不会使用太多内存，还有第二个常量`PyTuple_MAXFREELIST`控制任何桶内任何这些链表的最大长度。然后有一个二级长度数组，`PyTuple_MAXSAVESIZE`用于存储每个给定长度的元组的链表长度，这样就不会超过这个上限。

总而言之，这是一个非常聪明的实现！

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-03T09:12:21.887

因为在正常操作过程中 Python 会创建和销毁*大量*的小元组，Python 会为此目的保留一个小元组的内部缓存。这有助于减少大量的内存分配和释放流失。出于同样的原因，从 -5 到 255 的小整数被保留（制成单例）。

`PyTuple_MAXSAVESIZE`定义控制符合此优化条件的元组的最大大小，定义`PyTuple_MAXFREELIST`控制这些元组中*有多少*保留在内存中。当长度为 < 的元组`PyTuple_MAXSAVESIZE`被丢弃时，如果仍有空间（in `tupledealloc`）将其添加到空闲列表中，以便在 Python 创建新的小元组（in ）时重新使用`PyTuple_New`。

Python 在如何存储这些方面有点聪明；对于长度大于 0 的每个元组，它将重用每个缓存元组的第一个元素，将`PyTuple_MAXFREELIST`元组链接到一个链表中。所以`free_list`数组中的每个元素都是一个 Python 元组对象的链表，并且这样一个链表中的所有元组都是相同大小的。唯一的例外是空元组（长度为 0）；这些中只需要一个，它是一个单例。

所以，是的，对于超过长度的元组，`PyTuple_MAXSAVESIZE`python 保证必须为新的 C 结构单独分配内存，如果你创建*和*丢弃这样的元组很多，这可能会影响性能。

如果你想了解 Python C 的内部结构，我建议你学习[Python C API](http://docs.python.org/3/c-api/)；它将更容易理解 Python 用于在 C 中定义对象、函数和方法的各种结构。

# python - 如何在 Pyqt4 中设置 QTableView 标头名称

> ID：14135543
> 
> 赞同：5
> 
> 时间：2013-01-03T08:47:32.833
> 
> 标签：python, header, pyqt4, qtableview

我想知道如何在 QTableview 中设置自定义标题名称

当我创建一个 QTableview 时，我得到列和行标题名称为 1、2、3、4。我想知道如何设置自己的列和标题。

* * *

我得到了所需的[解决方案](http://pastebin.com/he125QmB)，希望它可以帮助遇到同样情况的人

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T10:01:07.400

如果您将 a`QTableView`与您自己的模型一起使用，则需要在模型中实现该[`headerData()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qabstractitemmodel.html#headerData)方法以返回标头的数据。这是一个仅显示列标题的片段 - 更改`header_labels`值以更改标题文本。

```
class TableModel(QAbstractTableModel):

    header_labels = ['Column 1', 'Column 2', 'Column 3', 'Column 4']

    def __init__(self, parent=None):
        QAbstractTableModel.__init__(self, parent)

    def headerData(self, section, orientation, role=Qt.DisplayRole):
        if role == Qt.DisplayRole and orientation == Qt.Horizontal:
            return self.header_labels[section]
        return QAbstractTableModel.headerData(self, section, orientation, role) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T09:34:35.833

原始发布者生成了以下代码作为解决方案（最初发布在被版主删除的 pastebin 链接中）：

```
from PyQt4 import QtCore, QtGui

class myWindow(QtGui.QMainWindow):

    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)
        self.centralwidget  = QtGui.QWidget(self)
        self.view           = QtGui.QTableView(self.centralwidget)
        self.view.setSortingEnabled(True)
        self.gridLayout = QtGui.QGridLayout(self.centralwidget)
        self.gridLayout.addWidget(self.view, 1, 0, 1, 3)

        self.setCentralWidget(self.centralwidget)

        self.model = QtGui.QStandardItemModel(self)

        for rowName in range(3) * 5:
            self.model.invisibleRootItem().appendRow(
                [   QtGui.QStandardItem("row {0} col {1}".format(rowName, column))
                    for column in range(3)
                    ]
                )
        for column in range(3):
            self.model.setHeaderData(column, QtCore.Qt.Horizontal,
                                      'Column %d' % int(column+1))
            for row in range(3 * 5):
                self.model.setHeaderData(row, QtCore.Qt.Vertical,
                                            'Row %d' % int(row+1))

        self.proxy = QtGui.QSortFilterProxyModel(self)
        self.proxy.setSourceModel(self.model)

        self.view.setModel(self.proxy)

if __name__ == "__main__":
    import sys

    app  = QtGui.QApplication(sys.argv)
    main = myWindow()
    main.show()
    main.resize(400, 600)
    sys.exit(app.exec_()) 
```

# android - 如何更改android中微调器分隔线的颜色？

> ID：14135544
> 
> 赞同：4
> 
> 时间：2013-01-03T08:47:46.320
> 
> 标签：android, android-spinner

如何更改android中微调器分隔线的颜色？

我努力了 ：

```
<style name="My_Theme_Name">
    <item name="android:spinnerStyle">@style/App_Style_Spinner</item>
</style>

<style name="App_Style_Spinner">
    <item name="android:dividerHeight">10dip</item>
    <item name="android:divider">@color/another_blue</item>
</style> 
```

我已将活动的主题设置为 My_Theme_Name。但这不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:58:33.867

我认为您应该尝试使用此链接。

[设置微调器主题](https://stackoverflow.com/a/13144302/556975)

问题可能是`parent`定义中的属性`themes`。

谢谢。

# java - 任何人都可以解释 asserTrue 为什么它失败了？

> ID：14135545
> 
> 赞同：0
> 
> 时间：2013-01-03T08:47:50.150
> 
> 标签：java, selenium

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我是 Selenium 和 Java 的新手。

我已尝试以下方法将姓氏的字段值与我提供的字段值进行比较。

```
String lastname=selenium.getValue("//*[@id='lastName']");
System.out.println(lastname);
assertTrue (lastname == "xxx"); 
```

它一直在失败。

只是试图在 Eclipse 的帮助下更改最后一行（只是反复试验）

```
assertTrue("lastname.equals("xxx")); 
```

它工作正常......为什么它在第一种情况下失败了？== 不允许比较字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:50:30.530

简短的回答：`==`检查相同的对象`.equals`检查相同的值。

更多信息在[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:50:43.027

`equals`函数检查`lastname`. `==`运算符检查对对象的引用是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:51:05.490

正如您所猜测的，您必须使用 equals() 将字符串与 Java 进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T08:51:18.407

当您使用字符串时，您实际上是在比较*指针*（或真正的引用相等） 。`==`换句话说，您正在测试两个对象是否相同，而不是对象的*内容*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T08:52:00.307

为了比较字符串的相等性，我们使用 equals() 方法。java中有两种比较方式。一个是“==”运算符和另一个“equals()”方法。"==" 比较字符串对象的引用值，而 equals() 方法存在于 java.lang.Object 类中。此方法比较字符串对象的内容。

# java - 有没有办法在没有 DTO 的情况下将 Hibernate 实体公开为 RESTful 资源？

> ID：14135547
> 
> 赞同：6
> 
> 时间：2013-01-03T08:48:02.203
> 
> 标签：java, hibernate, rest, jpa-2.0

我正在开发一个简单的 webapp，它将域模型公开为 RESTful 资源。我打算将 JPA2(Hibernate) 与 SpringMVC REST 支持一起使用。

在将 Hibernate 实体编组为 XML/JSON 时，如果实体被分离，它将为惰性子关联抛出 LazyLoadingException。如果实体仍然附加到 Hibernate Session，它将几乎加载整个数据库。

我尝试使用 Dozer CustomFieldMapper 来确定该属性是否是未加载的惰性 Hibernate 集合，然后返回 NULL。

**但是，如果我们有**双向关联，Hibernate 会急切地加载多对一，而 Dozer 将尝试复制属性，这些属性最终会陷入无限循环，从而导致 StackOverflow 错误。

我知道解决此问题的唯一解决方法是使用 DTO 并将所需的属性仅复制到干净的 POJO（DTO）中，然后编组为 XML/JSON。但是复杂的领域模型手动复制属性是非常痛苦的。

有没有其他更干净/更简单的方法来（取消）编组 Hibernate 实体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:02:32.363

我可能听起来太保守了，但我认为使用 DTO 仍然是一个好主意。

映射的复杂性与资源 API 的粒度成正比，换句话说，越粗糙越复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T09:02:05.127

我在 GWT 应用程序中来回传递 Hibernate 的 VO 时遇到了类似的问题，并且在某些项目中使用 Dozer 效果很好，而在其他项目中使用了[本文](http://management-platform.blogspot.dk/2011/05/detaching-hibernate-objects-to-pass-to.html)中描述的方法，这基本上是编组之前的休眠代理。

希望对你有帮助，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-12T20:42:59.577

在这门课上掠夺：[https ://github.com/viniciuspires/reqlist/blob/master/src/main/java/org/reqlist/arch/HibernateAwareObjectMapper.java](https://github.com/viniciuspires/reqlist/blob/master/src/main/java/org/reqlist/arch/HibernateAwareObjectMapper.java)

我将 Jackson 用作 JSON 序列化器/反序列化器，我必须创建此类并为其添加 Hibernate4Module 以验证是否`Hibernate.isInitialized`意外初始化该属性。

之后，您只需将其配置为您的`ObjectMapper`，并将其传递给`MessageConverters`数组，就像我在这一行中所做的那样：

[https://github.com/viniciuspires/reqlist/blob/master/src/main/resources/META-INF/org.reqlist.context.xml#L21](https://github.com/viniciuspires/reqlist/blob/master/src/main/resources/META-INF/org.reqlist.context.xml#L21)

这对我来说就像一个魅力。

# search - 谷歌高级新闻搜索

> ID：14135548
> 
> 赞同：0
> 
> 时间：2013-01-03T08:48:03.567
> 
> 标签：search, google-news

我想在 Google 新闻搜索中搜索多个字词并消除重复项。

谷歌提供了几个布尔值，但没有一个完全符合我的要求。

拿 ：：`Fiscal cliff, US debt, UK bank exposure, IMF`

我想在过去 24 小时的新闻提要中查看所有这些的结果，但每个搜索都好像是单独完成的。

使用`"Fiscal cliff" OR "US debt"`etc... 会这样做，但会搜索确切的短语。

使用`Fiscal cliff OR US debt`etc... 还可以搜索财政债务和美国悬崖。

如果我单独搜索它们，我希望它们中的每一个都能像它们一样工作，给我过去 24 小时内每个术语的所有结果。

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:56:57.710

括号似乎可以解决问题。我没有在 Google 新闻中看到确切的结果计数，但我在普通的旧 Google 中看到了它：

```
"Fiscal cliff" OR "US debt" 
```

约 82,200,000 条结果

```
(Fiscal cliff) OR (US debt) 
```

约 358,000,000 个结果

# iphone - 检测视频将在 UIWebView 中播放

> ID：14135552
> 
> 赞同：4
> 
> 时间：2013-01-03T08:48:34.637
> 
> 标签：iphone, uiwebview, media-player

我想要类似的东西：
[https ://itunes.apple.com/us/app/video-download-ibolt-downloader/id481606548?mt=8](https://itunes.apple.com/us/app/video-download-ibolt-downloader/id481606548?mt=8)

我想检测网页中是否有任何视频，并希望将该流下载到 iPhone 设备中。

在控制台媒体播放器中告诉它正在将电影路径设置为某个 URL。必须有一种方法可以下载流并保存在本地设备中。

PS：我知道如何下载视频文件。我希望它使用在线流媒体或不提供下载链接的网站。

P.S++：[从 HTML + UIWebView 下载视频](https://stackoverflow.com/questions/12319278/video-download-from-html-uiwebview)没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T21:01:20.760

The post is old but it might be worth to clear this

Those apps are probably using undocumented API. Apple doesn't accept private API when apps are submitted to the app store, however they might not be looking for usage of undocumented notifications

You can find more information in [here](https://stackoverflow.com/questions/8518719/how-to-receive-nsnotifications-from-uiwebview-embedded-youtube-video-playback) and [here](https://stackoverflow.com/questions/8253111/get-notification-when-a-video-starts-or-stops-in-uiwebview)

Those apps show you the download button after you click video, and after the video starts. So probably they are listening for media playback notifications and get the url from MPMoviePlayer instance.

By the way, apple doesn't allow apps that download videos from youtube. There might be some apps on the app store that does that, but I recently got rejected because of this. It might not be worth the hassle, as most big video streaming websites don't want people downloading their videos and work hard to make sure that they don't.

# opa - MongoDriver.sndrcv（查询）：通讯错误（无法重新连接）

> ID：14135553
> 
> 赞同：1
> 
> 时间：2013-01-03T08:48:35.360
> 
> 标签：opa

成功编译后运行我的 Opa 脚本时突然出现一个奇怪的错误：

```
Jeroens-MacBook-Pro:CollabTextEditor jeroen$ ./CollabTextEditor.exe 
Http serving on http://Jeroens-MacBook-Pro.local:8080
DbGen/Mongo Looking for MongoDB in directory '/Users/jeroen/.opa/mongo'
DbGen/Mongo MongoDB seems launched (pid:438)
MongoDriver.sndrcv(query): comms error (Can't reconnect)
File "lib/stdlib/apis/mongo/log.opa", line 73, characters 5-16, (73:5-73:16 | 2930-2941)
fail: -1 
```

快速的谷歌搜索没有给我任何答案：s 所以我试图找到错误消息中提到的文件 log.opa 但`sudo find / -name "log.opa"`什么也没返回。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:52:52.107

在尝试了将近 2 天后，我找到了自己的答案。

问题在于 MongoDb。MongoDb 以某种奇怪的方式使数据损坏，导致我的问题出现错误。我为解决它所做的就是自己启动 MongoDb。首先，我杀死了所有与 MongoDb 相关的进程并手动启动了 MongoD：

```
./mongod --dbpath /Users/jeroen/.opa/mongo/data/ -v 
```

我必须启动 Opa 而无需通过以下方式启动 MongoDb 实例：

```
./CollabTextEditor.exe --db-remote localhost:27017 
```

（CollabTextEditor.exe 是编译我的 Opa 代码的结果）。然后我浏览到 localhost:8080（运行 Opa 的地方），在 MongoD 中得到以下输出：

```
Jeroens-MacBook-Pro:bin jeroen$ ./mongod --dbpath /Users/jeroen/.opa/mongo/data/ -v
Fri Jan  4 10:03:05 BackgroundJob starting: DataFileSync
Fri Jan  4 10:03:05 versionCmpTest passed
Fri Jan  4 10:03:05 versionArrayTest passed
Fri Jan  4 10:03:05 shardObjTest passed
Fri Jan  4 10:03:05 shardKeyTest passed
Fri Jan  4 10:03:05 isInRangeTest passed
Fri Jan  4 10:03:05 [initandlisten] MongoDB starting : pid=15654 port=27017 dbpath=/Users/jeroen/.opa/mongo/data/ 64-bit host=Jeroens-MacBook-Pro.local
Fri Jan  4 10:03:05 [initandlisten] db version v2.0.2, pdfile version 4.5
Fri Jan  4 10:03:05 [initandlisten] git version: 514b122d308928517f5841888ceaa4246a7f18e3
Fri Jan  4 10:03:05 [initandlisten] build info: Darwin erh2.10gen.cc 9.6.0 Darwin Kernel Version 9.6.0: Mon Nov 24 17:37:00 PST 2008; root:xnu-1228.9.59~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_40
Fri Jan  4 10:03:05 [initandlisten] options: { dbpath: "/Users/jeroen/.opa/mongo/data/", verbose: true }
Fri Jan  4 10:03:05 [initandlisten] journal dir=/Users/jeroen/.opa/mongo/data/journal
Fri Jan  4 10:03:05 [initandlisten] recover : no journal files present, no recovery needed
Fri Jan  4 10:03:05 [initandlisten] Accessing: local for the first time
Fri Jan  4 10:03:05 [initandlisten] query local.system.namespaces reslen:20 0ms
Fri Jan  4 10:03:05 [initandlisten] enter repairDatabases (to check pdfile version #)
Fri Jan  4 10:03:05 [initandlisten]     CollabTextEditor
Fri Jan  4 10:03:05 [initandlisten] Accessing: CollabTextEditor for the first time
Fri Jan  4 10:03:05 [initandlisten] done repairDatabases
Fri Jan  4 10:03:05 BackgroundJob starting: snapshot
Fri Jan  4 10:03:05 BackgroundJob starting: ClientCursorMonitor
Fri Jan  4 10:03:05 BackgroundJob starting: PeriodicTask::Runner
Fri Jan  4 10:03:05 [initandlisten] fd limit hard:9223372036854775807 soft:256 max conn: 204
Fri Jan  4 10:03:05 [websvr] fd limit hard:9223372036854775807 soft:256 max conn: 204
Fri Jan  4 10:03:05 [websvr] admin web console waiting for connections on port 28017
Fri Jan  4 10:03:05 [initandlisten] waiting for connections on port 27017
Fri Jan  4 10:03:46 [initandlisten] connection accepted from 127.0.0.1:54604 #1
Fri Jan  4 10:03:46 [conn1] Accessing: CollabTextEditor for the first time
Fri Jan  4 10:03:46 [conn1] query CollabTextEditor.user reslen:20 0ms
Fri Jan  4 10:03:46 [conn1] query CollabTextEditor.room nreturned:1 reslen:3379 0ms
Fri Jan  4 10:04:05 [DataFileSync] flushing mmap took 2ms  for 3 files
Fri Jan  4 10:04:05 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took: 0ms
Fri Jan  4 10:04:05 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took: 0ms
Fri Jan  4 10:04:05 [PeriodicTask::Runner] task: WriteBackManager::cleaner took: 0ms
Fri Jan  4 10:04:05 [clientcursormon] mem (MB) res:30 virt:2594 mapped:80
Fri Jan  4 10:04:32 [conn1] query CollabTextEditor.user idhack:1 reslen:20 0ms
Fri Jan  4 10:04:32 [conn1] update CollabTextEditor.user query: { _id: "test" } update: { $set: { value: { some: { name: "test" } } } } fastmodinsert:1 0ms
Fri Jan  4 10:04:32 [conn1] run command CollabTextEditor.$cmd { getlasterror: 1 }
Fri Jan  4 10:04:32 [conn1] command CollabTextEditor.$cmd command: { getlasterror: 1 } ntoreturn:1 reslen:85 0ms
Fri Jan  4 10:04:32 [conn1] query CollabTextEditor.room nreturned:1 reslen:3379 0ms
Fri Jan  4 10:04:32 [journal] lsn set 55971
Fri Jan  4 10:05:01 [conn1] end connection 127.0.0.1:54604 
```

有些查询似乎返回`nreturned:1`了（查看输出中的最后几行），有些并不意味着我的数据可能有问题。这导致了我的问题中的错误。

我实际解决它的方法是分别连接到 Mongo 并在 mongod 实例已经运行后删除数据库：

```
Jeroens-MacBook-Pro:bin jeroen$ ./mongo localhost:27017
MongoDB shell version: 2.0.2
connecting to: localhost:27017/test
> use CollabTextEditor
switched to db CollabTextEditor
> db.dropDatabase()
{ "dropped" : "CollabTextEditor", "ok" : 1 }
> exit
bye 
```

在此之后，脚本不再返回任何错误。所以我可以得出结论，MongoDB 可能崩溃了（原因未知），导致数据损坏，导致滚雪球效应。相当愚蠢的错误，如果在 MongoDb 和 Opa 中有更好的错误报告，我可能不会浪费这么多宝贵的时间。希望这对其他人有帮助:)

# c++ - 使用 popen 提取系统命令的输出

> ID：14135554
> 
> 赞同：1
> 
> 时间：2013-01-03T08:48:37.427
> 
> 标签：c++, unix, posix-api

我正在使用以下代码提取系统命令的输出。我没有在 PATH 变量中为“pic”设置路径。我想存储命令的输出`"which pic"`并且不想在控制台上显示它。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
using namespace std;
int main ()
{
    FILE *fp;
  int status;
  char path[1035];
char *command = "which pic";

  /* Open the command for reading. */
  fp = popen(command, "r");
  if (fp == NULL) {
    printf("Failed to run command\n" );
    exit(0);
  }

  /* Read the output a line at a time - output it. */
  while (fgets(path, sizeof(path)-1, fp) != NULL) {
   cout<<"<<<<<<<<<<,"<<endl;
    printf("%s", path);
  }

  /* close */
  pclose(fp);

  return 0;
} 
```

但它在控制台中显示以下输出：

```
which: no pic in(/usr/kerberos/bin:/usr/local/bin:/usr/bin:/bin:/usr/X11R6/bin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:30:51.543

`"which pic 2>&1"`按照您的命令运行。您想从 捕获所有输出`which`，包括其错误（发送到 stderr）。

# iphone - 如何在 jQuery-BlockUI 中覆盖覆盖 css

> ID：14135559
> 
> 赞同：2
> 
> 时间：2013-01-03T08:48:57.563
> 
> 标签：iphone, ios, css, jquery-blockui

我正在使用 jquery BlockUI 插件，但遇到了问题。

在 iOS 设备中，当处于纵向模式时，叠加层很好，但当用户切换到横向模式时，叠加层会出现，但具有与肖像模式相同的分辨率，看起来很奇怪。

那么有什么方法可以覆盖覆盖层的 CSS 而无需编辑 jQuery BlockUI 插件中的任何内容，或者我需要做任何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T14:26:47.147

问题可能是页面以较大的宽度绘制，并且当您将分辨率切换到纵向视图时，设备不会重绘页面而是调整页面大小。这是一个可以解决您的问题[的 jquery 函数。](http://zurb.com/forrst/posts/jQuery_redraw-BGv)

当您检测到窗口调整大小时，只需调用该函数。

# excel - 如何在excel中只粘贴值

> ID：14135560
> 
> 赞同：3
> 
> 时间：2013-01-03T08:49:13.263
> 
> 标签：excel, vba

我对 Excel 很陌生，对这个论坛完全陌生。

我从下面的论坛中获取了代码并根据我的需要进行了修改。

[http://pressf1.pcworld.co.nz/showthread.php?90122-Creating-Macro-to-copy-and-paste-data-into-the-next-empty-column](http://pressf1.pcworld.co.nz/showthread.php?90122-Creating-Macro-to-copy-and-paste-data-into-the-next-empty-column)。

```
Sub copyTotals()
    Dim TargetSht As Worksheet, SourceSht As Worksheet, SourceRow As Integer, SourceCells As Range
    Set SourceSht = ThisWorkbook.Sheets("DUN - Jan")
    Set TargetSht = ThisWorkbook.Sheets("DUN Jan - Jan,Feb,Mar,Apr")
    Set SourceCells = SourceSht.Range("L36,N36")
    If TargetSht.Range("C11").Value = "" Then
        SourceRow = 1
    ElseIf TargetSht.Range("C41") <> "" Then
        MsgBox ("The sheet is full, you need to create a new sheet")
    Else
        SourceRow = TargetSht.Range("C41").End(xlUp).Row + 1
    End If

    SourceCells.Copy TargetSht.Cells(SourceRow, 3)
End Sub 
```

问题是粘贴的值具有源格式，我只想粘贴这些值。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:56:52.647

将 .Copy 与 .PasteSpecial 一起使用。代替：

```
SourceCells.Copy TargetSht.Cells(2, SourceCol) 
```

做这个：

```
SourceCells.Copy
TargetSht.Cells(2, SourceCol).PasteSpecial xlPasteValues 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T23:30:28.443

使用宏记录器会产生这种情况。卡住时我经常使用它。

```
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-02T08:42:23.830

您不需要复制和粘贴来执行此操作（我认为至少在 Excel 2010 及更高版本中）。您只需将范围的 .Value 设置为等于自身。例如：

```
rng.Value = rng.Value 
```

或者

```
Sheet1.Range("A1:A10").Value = Sheet1.Range("A1:A10").Value 
```

since .Value "返回或设置一个表示指定范围值的 Variant 值。"

请注意，这仅适用于值，而不是格式。

[http://msdn.microsoft.com/en-us/library/office/ff195193(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/ff195193(v=office.15).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T08:51:06.737

右键单击单元格并选择特殊粘贴，然后您只能选择值

编辑：对于宏其相同的原则使用 .PasteSpecial xlPasteValues 像这里

```
Set rng6 = .Range("A3").End(xlDown).Offset(0, 41)
rng6.Copy
ActiveSheet.Paste Destination:=Worksheets("Positions").Range("W2") 
```

# java - 谷歌应用引擎实例是否共享堆和堆栈？

> ID：14135562
> 
> 赞同：1
> 
> 时间：2013-01-03T08:49:23.810
> 
> 标签：java, google-app-engine, heap-memory

如果我有一个单例对象和一个弹簧单例范围 bean。

如果应用引擎激活多个实例会发生什么？

还会是“单身”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:33:59.243

不，GAE 实例在不同 JVM 中的不同机器上运行。GAE 是一种分布式架构，您应该根据它来构建您的应用程序。

如果您启用了多线程，则同一实例上的请求将看到相同的单例，但不同实例上的请求不会。

要拥有通用的数据结构，您应该使用 memcache 或 datastore。

# jquery - 使用 Jquery 添加可排序的内容

> ID：14135566
> 
> 赞同：0
> 
> 时间：2013-01-03T08:49:51.497
> 
> 标签：jquery, jquery-ui-sortable

我有一个带有可排序元素的页面。这是页面代码的一部分：

```
...
<head>
   <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
   <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
   <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"</script>
   <script>
        $(function() {
            $( ".sortable" ).sortable();
            $( ".sortable" ).disableSelection();
        });
   </script>
</head>
<div id="screen-page" data-role="page" data-theme="c">
</div>
... 
```

我正在动态加载“屏幕页面” HTML 内容 - 使用 $('#screen-page').append(html)- 从数据库加载。这个内容是这样的：

```
<div data-role="header">Hello</div>
<div id="screenBody" data-role="content" class="sortable">
   (div elements)
</div>
<div id="...">...</div> 
```

问题是：加载该内容后，“screenBody”内的元素不可排序。我认为问题是在加载页面后添加可排序的 DIV（“screenBody”），因此该脚本不适用于“新”内容。

我该如何解决这个问题？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:22:04.687

您应该`$( ".sortable" ).sortable();` *在*加载内容后立即致电 - 就在您`$("#screen-page").append(html);`致电之后。

例如，使用`jQuery.get`：

```
$.get('/get-screenpage-content.php', function(html){
   $('#screen-page').append(html);
   $('.sortable').sortable();
   $('.sortable').disableSelection();
}); 
```

你能展示你用来向你的`#screen-page`div 添加内容的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:54:12.053

解决了。我添加了这段代码：

```
$("#screen-page").on("DOMSubtreeModified", function() {  
    $( ".sortable" ).sortable();
    $( ".sortable" ).disableSelection();
}); 
```

# java - 将 JPanel 添加到图形面板并使 JPanel 透明，对象除外

> ID：14135567
> 
> 赞同：3
> 
> 时间：2013-01-03T08:50:00.360
> 
> 标签：java, swing, jpanel, transparency, java-2d

我正在尝试制作二十一点游戏，我想设计我的程序的方式是使用图形面板（图像、卡片绘制等），并在该面板顶部有一个带有按钮的 JPanel。我希望这个 JPanel 是透明的，这样下面的图形面板是可见的，但 JButtons 也不会变成透明的。

如果有人可以向我发送正确的方向？

图形层：

```
public class GraphicsBoard {
    String[] fileName = { "cards.png", "BlackJackBoard.png" };
    ClassLoader cl = GraphicsBoard.class.getClassLoader();
    URL imgURL[] = new URL[2];
    Toolkit tk = Toolkit.getDefaultToolkit();
    Image imgCards, imgBG;

    public GraphicsBoard() throws Exception {
        for (int x = 0; x < imgURL.length; x++)
            imgURL[x] = cl.getResource("pictures/" + fileName[x]);
        imgCards = tk.createImage(imgURL[0]);
        imgBG = tk.createImage(imgURL[1]);
    }

    public void paintComponent(Graphics g) {
        g.drawImage(imgBG, 0, 0, 550, 450, 0, 0, 551, 412, this);

        Graphics2D g2 = (Graphics2D) g;
        for (int x = 0; x <= 550; x += 50) {
            g2.drawLine(x, 0, x, 450);
            g2.drawString("" + x, x + 5, 20);
        }
        for (int y = 5; y <= 450; y += 50) {
            g2.drawLine(0, y, 550, y);
            g2.drawString(" " + y, 0, y + 20);
        }
    }
} 
```

按钮层：

```
public class OverBoard extends JPanel implements ActionListener{
    JButton btnDeal = new JButton("Deal");

    public OverBoard(){
        btnDeal.addActionListener(this);
        add(btnDeal);
        setOpaque(false);
    }
} 
```

我希望 ButtonLayer 位于 GraphicLayer 之上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:28:40.087

> 我希望这个 JPanel 是透明的，这样下面的图形面板是可见的，但 JButtons 也不会变成透明的。

一个[OverlayLayout](http://docs.oracle.com/javase/7/docs/api/javax/swing/OverlayLayout.html) JPanel[会做你所描述的](http://www.java2s.com/Tutorial/Java/0240__Swing/1401__OverlayLayout.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:59:46.500

有几种方法，适当的可能是

*   使用[GlassPane](https://stackoverflow.com/questions/8715807/layering-multiple-glasspanes-in-a-root-container)，必须`consume()`或重新调度`KeyEvents`

*   [JLayer (Java7)，基于 JXLayer(Java6)](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

# in-app-purchase - 可用产品的 Android 应用内结算列表

> ID：14135571
> 
> 赞同：11
> 
> 时间：2013-01-03T08:50:13.997
> 
> 标签：in-app-purchase, google-play, in-app-billing

是否有可能从 Play 商店获取所有可用产品的列表？

我想要做的是获取所有可用项目，然后在 ListView 中显示它们。每当有人点击 ListView 时，就会在 Google Play 商店中打开正确的项目。

那可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-13T10:27:57.213

正如[这篇](https://stackoverflow.com/a/41118738/3283790)文章中提到的，现在可以使用 Google Play Developer API（又名`android-publisher`）来实现：

[https://developers.google.com/android-publisher/](https://developers.google.com/android-publisher/)

特别是[Inappproducts: 列表](https://developers.google.com/android-publisher/api-ref/inappproducts/list)API：

> 列出 Android 应用的所有应用内商品，包括订阅和托管的应用内商品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-25T06:24:18.933

第三方 API 和服务不可靠。目前还没有可靠方便的生产方式。例如，您必须将其存储在您的服务器上加密的 json 数据文件中，没有任何 php/java/something，只是静态文件。

或者，您可以在代码中猜测项目 skus，甚至检查不存在的项目：例如 myitem_00-myitem_99。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:08:16.880

该网址将向您展示如何操作：

[http://developer.android.com/training/in-app-billing/list-iab-products.html#QueryDetails](http://developer.android.com/training/in-app-billing/list-iab-products.html#QueryDetails)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:02:38.307

你可以试试这个[Google Play Store Api](http://code.google.com/p/google-playstore-api/)，或者你也可以看看这个[Android Market API](http://code.google.com/p/android-market-api/)。

但是这两个都是**非官方**的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-08-14T12:27:41.817

你必须做下面的事情。

*   在您的应用和 google play 应用之间建立连接。
*   获取在您的 google 控制台中注册的产品列表。
*   prapare arraylist 包含产品的 id 名称并放入 Bundle
*   购买代码
    `ArrayList<String> skuList = new ArrayList<String> (); skuList.add("premiumUpgrade"); skuList.add("gas"); Bundle querySkus = new Bundle(); querySkus.putStringArrayList(“ITEM_ID_LIST”, skuList);`

    *   最后一种方法是在我们需要调用的 google_play_app 中重新开始
*   `Bundle skuDetails = mService.getSkuDetails(3, getPackageName(), "inapp", querySkus);`

*   在 In-app Billing Version 3 API 上调用 getSkuDetails 方法，并将 In-app Billing API 版本（“3”）、调用应用的包名称、购买类型（“inapp”）和捆绑是我们的回应

*   提取捆绑包并获取产品名称并将其显示在 ativity 中。

# php - 在php中创建前十项列表

> ID：14135574
> 
> 赞同：-4
> 
> 时间：2013-01-03T08:50:28.610
> 
> 标签：php

我想创建一个应用程序，我的用户可以在其中创建他们的前十部电影，分配从 1 到 10 的值。每个用户都可以从我的电影数据表中进行选择。例如，我的数据包含 100 部电影，每个用户可以为其中的 10 部电影提供值（1 到 10）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:04:06.987

为此，首先您必须从数据库中获取电影并列出它们。

例如，一个简单的选择查询，它选择所有电影并使用 while 循环将它们显示给用户。

```
$get_movies = mysqli_query("SELECT * FROM `movies`");

while($row_movies = mysql_fetch_array($get_movies);)
{
echo $row_movies['title'];
} 
```

然后，您允许用户使用可以在同一行上显示的选择框对电影进行评分。

现在，当用户选择时，例如 4；您将该值保存到数据库（使用 javascript 自动发布表单），然后重新加载页面。下次加载列表时，选择框包含从 1 到 10 的每个数字，除了 4，因为它已经被使用过。您也可以使用[AJAX](http://www.w3schools.com/ajax/default.asp)来执行此操作。

当然，您需要在数据库中有一列保存电影的评分。此外，为了确保选择了正确的行，您始终可以每行创建一个表单，将电影的 ID 保存在隐藏字段中。

为确保用户不会通过停用 javascript 来欺骗您的脚本，您始终可以使用 PHP 过滤您的脚本，以确保只发送一个表单，并确保该 ID 确实存在于您的数据库中。另外，不要忘记转义 mysql 查询中使用的字符串。

# html - 配置 IIS 7.5 以启用“.html”扩展名的服务器端包含 (SSI)

> ID：14135582
> 
> 赞同：6
> 
> 时间：2013-01-03T08:50:53.510
> 
> 标签：html, windows, iis, iis-7.5, ssi

我想在 IIS 7.5中配置**服务器端包含 (SSI) 。**默认情况下，指示文件应作为 SSI 文件处理的文件扩展名是**.shtml**。但是，我想配置 IIS，以便将扩展名为***.html***的文件作为 SSI 文件处理。这是为了使我能够通过更改名为**footer.html**的单个文件来更改多个**.html**页面的页脚。

 **这是可能的吗？如果可以，是否有任何警告？

我也会接受有关通过仅更改单个文件来更改多个 HTML 页面上的页脚的**替代方法的建议。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:13:59.277

嘿得到了答案，只需要再上网一下 这是您可以配置 IIS 服务器以使用 .html 页面的服务器端包含作为其为 .shtml 提供的默认设置的链接，但我不想要那个。这个链接很有帮助

[http://tech.mikeal.com/blog1.php/server-side-includes-for-html-in-iis7](http://tech.mikeal.com/blog1.php/server-side-includes-for-html-in-iis7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:58:35.380

你可以试试下面的东西。

**配置示例**

以下配置示例禁用默认网站中 SSI 文件的 #exec 命令。

```
<location path="Default Web Site">
   <system.webServer>
      <serverSideInclude ssiExecDisable="true" />
   </system.webServer>
</location> 
```

**C# 文件如下所示**

```
using System;
using System.Text;
using Microsoft.Web.Administration;

internal static class Sample
{
   private static void Main()
   {
      using (ServerManager serverManager = new ServerManager())
      {
         Configuration config = serverManager.GetApplicationHostConfiguration();

         ConfigurationSection serverSideIncludeSection = config.GetSection("system.webServer/serverSideInclude", "Default Web Site");
         serverSideIncludeSection["ssiExecDisable"] = true;

         serverManager.CommitChanges();
      }
   }
} 
```

您可以获得更多信息[**Server Side Include**](http://www.iis.net/configreference/system.webserver/serversideinclude)

**对于您的第二个问题：**

您可以使用**母版页**。然后所有继承的页面将同时具有页眉和页脚。

我希望这对你有帮助。**

# ruby-on-rails - net/http rails 问题仅在控制台中有效

> ID：14135585
> 
> 赞同：0
> 
> 时间：2013-01-03T08:51:03.680
> 
> 标签：ruby-on-rails, json, net-http

在 ruby​​ on rails 控制台 'net/http' 中有效，但在控制器中无效并给出超时错误。

```
require 'net/http'
uri = URI('http://localhost:3000/api_json.json')
json = Net::HTTP.get(uri)
parsed_json = ActiveSupport::JSON.decode(json) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:28:49.813

很可能您使用的是默认 Webrick 服务器，它一次服务一个请求。因此，从控制台它可以正常工作，但是当您尝试从控制器调用它时会失败（当 Webrick 工作人员已经很忙时）。

您可以尝试设置和运行另一台服务器，如 unicorn 或 Thin，或者在不同的端口上运行两个 Webrick 实例：

```
rails server
rails server -p 3001 
```

并转到本地主机：3001

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T17:55:28.440

@dimuch 的解决方案可能已经解决了您的问题，但它可能会帮助面临类似情况的人。我将详细解释问题和解决方案（@dimuch 解决方案的扩展）。

问题：

您可能有一个类似于 some:"/test_controller/test_method" 的控制器，并且您可能希望在控制器中调用一个方法，例如 /api/v1/some_test_api，并面临诸如 Completed 500 Internal Server Error in 60004.4ms [27580c5c46770812c550188346c2dd3e] 之类的错误[127.0.0.1] [/xauth_test/sanity_oauth_login] 超时::错误（超时::错误）：

解决方案：

正如@dimuch 所说，“很可能您使用的是默认 Webrick 服务器，它一次服务一个请求......”。1\. 您需要在不同的端口上运行应用程序，例如 rails s -p 3000 和 rails s -p 3001，然后从 3001 发出请求。如果您遇到“服务器已在运行。检查 /tmp/ pids/server.pid.Exiting”，然后尝试运行 rails s -p 3001 -P PROCESS_ID。2.使用其他服务器，如独角兽或彪马。

注意：如果您只想在本地进行测试，那么我建议您使用第一个解决方案，它既简单又简单。我很抱歉英语不好，我从其他堆栈溢出页面和网站中找到了大多数解决方案，我在下面附上了（参考链接），如果我错过了一些要参考的东西，我很抱歉。希望这可以帮助某人。

Refs：对于运行多个实例：

[运行多个 Rails Server 实例](https://stackoverflow.com/questions/4928680/running-multiple-instances-of-rails-server)

类似的错误及其处理方式：

[Rails HTTParty 超时::错误](https://stackoverflow.com/questions/14004130/rails-httparty-getting-timeouterror?rq=1)

[使用omniauth（自定义策略）/门卫的法拉第超时错误](https://stackoverflow.com/questions/11857182/faraday-timeout-error-with-omniauth-custom-strategy-doorkeeper)

[控制器操作中的render_to_string和HTTParty出现奇怪的超时::错误](https://stackoverflow.com/questions/16764175/strange-timeouterror-with-render-to-string-and-httparty-in-controller-action)

配置独角兽&彪马：

[http://vladigleba.com/blog/2014/03/21/deploying-rails-apps-part-3-configuring-unicorn/](http://vladigleba.com/blog/2014/03/21/deploying-rails-apps-part-3-configuring-unicorn/)

[https://github.com/puma/puma](https://github.com/puma/puma)

# vb.net - .Invoke(“SetPassword”, ...) 导致“RPC 服务器不可用”错误

> ID：14135590
> 
> 赞同：0
> 
> 时间：2013-01-03T08:51:17.607
> 
> 标签：vb.net, iis, active-directory, directoryservices, adsi

我有一个页面可以使用 VB.NET 在我们的活动目录中创建新用户我正在使用以下代码

```
Dim rootEntry As New DirectoryEntry
With rootEntry
    .Path = "LDAP://" & strServer & "/" & strLDAP
    .AuthenticationType = AuthenticationTypes.Secure
    .Username = strServerUsername
    .Password = strServerPassword
End With

Dim newUser As DirectoryEntry = rootEntry.Children.Add("CN=" & strCN, "user")
With newUser
    .CommitChanges()
    .Properties("userPrincipalName").Value = TextPN.Text 
    .Properties("sAMAccountName").Value = TextAlias.Text
    .Properties("givenname").Value = TextGivenname.Text
    .Properties("sn").Value = TextSurname.Text
    ……
    .CommitChanges()

    .Invoke("setPassword", New Object() {strDefaultPassword})
    .CommitChanges()
    .Properties("userAccountControl").Value = &H0001
    .CommitChanges()        
End With 
```

该代码过去运行良好。现在我们已经将我们的网络服务器迁移到 Windows Server 2008 R2 和 IIS 7.5，突然代码不再工作了。（.net framework 是 2.0，不能更改） 用户仍然在我们的活动目录中创建，但帐户被自动禁用，并且没有设置密码。

调查此问题表明在该行引发了异常

```
 .Invoke("setPassword", New Object() {strDefaultPassword}) 
```

例外

```
The RPC server is unavailable. (Exception from HRESULT: 0x800706BA) 
```

用于连接 AD 的用户帐户仍然相同，并且具有域管理员权限。由于代码没有任何变化，我认为这肯定有另一个原因不再起作用？防火墙设置，IIS 配置，..？

有任何想法吗？？

我知道这里有类似的情况[尝试创建一个新的 Active Directory 用户， Invoke("SetPassword",pwd) 抛出 "The RPC server is available"](https://stackoverflow.com/questions/3954819/trying-to-create-a-new-active-directory-user-invokesetpassword-pwd-throws) ，但这对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:49:29.683

DirectoryEntry.Invoke() 需要 AuthenticationType.Secure。这意味着它需要能够通过 Kerberos 或 NTLM 对请求进行身份验证。

它首先尝试使用 LDAPS (TCP 636)，然后在由于缺少或无效证书而超时或失败时回退到 CiFS (TCP445)。如果这些端口都没有打开，它将失败并出现“RPC 服务器不可用”异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:35:41.697

检查防火墙上的 TCP/UDP 445 端口是否打开。要从域外连接到 AD 服务器，您需要打开以下端口： . TCP/UDP 389 (LDAP)。TCP 3268 (GC)。TCP/UDP 445（基于 IP 的 SMB）

# jquery - jquery鼠标右键单击div

> ID：14135591
> 
> 赞同：3
> 
> 时间：2013-01-03T08:51:20.043
> 
> 标签：jquery, right-click

> **可能重复：**
> [如何用 jQuery 区分鼠标左键和右键](https://stackoverflow.com/questions/1206203/how-to-distinguish-between-left-and-right-mouse-click-with-jquery)

当我在 div 内单击鼠标右键时如何打开上下文菜单。因为当我在 div 内用鼠标右键单击时，它的淡出？

Javascript

```
$("#link").click(function(e){
   e.stopPropagation();
   div = $("#mydiv").fadeToggle(300);
});

$("#mydiv").click(function(e){
   e.stopPropagation();
});

$(document).click(function(e){
   $('#mydiv').fadeOut(200);
}); 
```

HTML

```
<a id="link">Click</a>
<div id="mydiv" style="width: 200px; height: 200px;">Hello</div> 
```

更新：

Javascript

```
$("#link").click(function(e){
   e.stopPropagation();
   div = $("#mydiv").fadeToggle(300);
});

$("#good_buttom").click(function(e){
   e.stopPropagation();
   div = $("#hide").fadeToggle(300);
});

$("#mydiv").mousedown(function(e) {
switch (e.which) {
    case 1:
         e.stopPropagation();
         $('#mydiv').fadeOut(200);
        break;
    case 2:
        alert('2');
        break;
    case 3:
        alert('3');
        break;
    default:
        alert('You have a strange mouse');
}
}); 
```

HTML

```
<a id="link">Click</a>
<div id="mydiv" style="width: 200px; height: 200px;">
    <button id="good_button">Click IT</button>
    <div id="hide" style="display:none;">Show up.</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:05:34.580

`click`只能通过鼠标左键触发，而`mousedown`可以通过鼠标左/中/右键触发。因此，只需在您的代码中替换`click`为`mousedown`，并通过检查来区分左/中/右键单击`event.which`。请查看[如何使用 jQuery 区分鼠标左键和右键单击以](https://stackoverflow.com/questions/1206203/how-to-distinguish-between-left-and-right-mouse-click-with-jquery)获取示例。

顺便说一句：检查此[链接](http://www.quirksmode.org/js/events_mouse.html)`click`可以帮助您了解,`mousedown`和`mouseup`事件之间的关系。这篇文章：[Javascript Madness：鼠标事件](http://unixpapa.com/js/mouse.html)也许也有帮助。根据经验，当您需要对鼠标事件进行更多控制时，最好处理低级别事件，例如`mousedown`or`mouseup`而不是高级事件，例如`click`or 。`dblclick`

另一个问题是您`mydiv`在 HTML 中前面添加了一个多余的“#”。

更新：根据您的新要求，您可以添加以下代码以避免事件传播。

```
$("#good_button").mousedown(function(e) {
    e.stopPropagation(); // avoid triggering its parent
    div = $("#hide").fadeToggle(300);
}); 
```

# c# - 如何使用 XML 序列化序列化包含相同类的类

> ID：14135596
> 
> 赞同：1
> 
> 时间：2013-01-03T08:52:08.893
> 
> 标签：c#, .net, xml, xml-serialization

我的班级目前看起来像这样

```
[Serializable()]
public class TreeViewItem
{
  private string _sTexte;
  [System.Xml.Serialization.XmlElement("Texte")]
  public string Texte 
  {
    get { return _sTexte; }
    set { Label = _sTexte = value; } 
  }

  [System.Xml.Serialization.XmlElement("Parent")]
  public TreeViewItem Parent { get; set; }
} 
```

`Parent`使用属性序列化此类时出现错误。

但是，如果我忽略以下`Parent`属性，我可以成功序列化：

```
[System.Xml.Serialization.XmlIgnore]
public TreeViewItem Parent { get; set; } 
```

如何将此类序列化为包含该`Parent`属性的文件？

# emacs - Emacs cond，子句之间可能发生事情吗？

> ID：14135597
> 
> 赞同：1
> 
> 时间：2013-01-03T08:52:10.510
> 
> 标签：emacs, conditional, elisp

几个月前我编写了一些带有很多`if`语句的代码。如果`region-active-p`，如果`beginning-of-line`，诸如此类的事情。

在了解了`cond`lisp 之后，我想知道我是否可以大大改进我的代码。

问题是，据我所知，这`cond`只是在“真实”时才做的事情，而我实际上需要`back-to-indentation`在这些检查之间移动。

为了正确跳过最后一个子句，我什至必须设置变量值。

```
(defun uncomment-mode-specific ()  
  "Uncomment region OR uncomment beginning of line comment OR uncomment end"
  (interactive)
  (let ((scvar 0) (scskipvar 0))
    (save-excursion
      (if (region-active-p)
         (progn (uncomment-region (region-beginning) (region-end))
         (setq scskipvar 1))
        (back-to-indentation))   ; this is that "else" part that doesn't fit in cond

      (while (string= (byte-to-string (following-char)) comment-start) 
       (delete-char 1) 
       (setq scskipvar 1))
      (indent-for-tab-command)

      (when (= scskipvar 0)
         (search-forward comment-start nil t)
         (backward-char 1)
         (kill-line))
    )))
) 
```

所以基本上我的问题是，在检查另一个子句之前，我有点想对一个子句不“真实”给出一些后果。这可能吗？如果没有，最好的办法是什么？

编辑：由于我们将此作为解决方案的示例案例，因此我将其写下来以便更容易理解。

如果区域处于活动状态，请从区域中删除评论。如果没有，将点移至意向。

只要后面的字符是注释字符，就删除它。然后，缩进这一行。

如果它没有执行上述任何操作，请向前搜索注释字符，然后终止该行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:14:17.187

```
(defmacro fcond (&rest body)
  (labels ((%substitute-last-or-fail 
            (new old seq)
            (loop for elt on seq
                  nconc
                  (if (eql (car elt) old)
                      (when (cdr elt)
                        (error "`%S' must be the last experssion in the clause" 
                               (car elt)))
                    (list new)
                    (list (car elt))))))
    (loop with matched = (gensym)
          with catcher = (gensym)
          for (head . rest) in body
          collect
          `(when (or ,head ,matched)
             (setq ,matched t)
             ,@(%substitute-last-or-fail `(throw ',catcher nil) 'return rest))
          into clauses
          finally
          (return `(let (,matched) (catch ',catcher ,@clauses))))))

(macroexpand '(fcond
               ((= 1 2) (message "1 = 2"))
               ((= 1 1) (message "1 = 1"))
               ((= 1 3) (message "1 = 3") return)
               ((= 1 4) (message "1 = 4"))))
(let (G36434)
  (catch (quote G36435)
    (when (or (= 1 2) G36434)
      (setq G36434 t)
      (message "1 = 2"))
    (when (or (= 1 1) G36434)
      (setq G36434 t)
      (message "1 = 1"))
    (when (or (= 1 3) G36434)
      (setq G36434 t)
      (message "1 = 3")
      (throw (quote G36435) nil))
    (when (or (= 1 4) G36434)
      (setq G36434 t)
      (message "1 = 4")))) 
```

这里有一些快速做的事情，我认为你可能会追求，即模仿`switch`C 中的行为的东西。

这个想法是顺序测试所有子句的相等性，如果一个匹配，则执行所有后续子句，直到`return`关键字（它会`break`在 C 中，但 Lisp`return`在循环中用于类似目的，所以我认为这`return`会会更好）。因此，上面的代码将打印：

```
1 = 1
1 = 3 
```

从技术上讲，这不是`switch`C 中的工作方式，但它会产生相同的效果。

为了简单起见，我在这里做了一件事，你想避免/解决不同的问题 -`return`关键字的使用，你可能想对它的搜索方式施加更严格的规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T10:27:35.973

```
(defun delete-on-this-line (regex)
  (replace-regexp regex "" nil (line-beginning-position) (line-end-position)))

(defun delete-leading-comment-chars ()
  (delete-on-this-line (eval `(rx bol (* space) (group (+ ,comment-start)))))) 

(defun delete-trailing-comment-chars ()
  (delete-on-this-line (eval `(rx (group (+ ,comment-end)) (* space) eol))))

(defun delete-trailing-comment ()
  (delete-on-this-line (eval `(rx (group (+ ,comment-start) (* anything) eol)))))

(defun uncomment-dwim ()
  (interactive)
  (save-excursion
    (if (region-active-p) 
        (uncomment-region (region-beginning) (region-end))
      (or (delete-leading-comment-chars) 
          (delete-trailing-comment-chars)
          (delete-trailing-comment))))) 
```

* * *

**编辑：**一点解释：进行正则表达式替换比管理循环进行删除要容易得多，这样就可以摆脱状态。而且这些步骤都是互斥的，所以你可以只使用`or`每个选项。

该`rx`宏是一个小 DSL，可以编译成有效的正则表达式，它也适合 lispy 语法转换，因此我可以使用当前模式的注释字符动态构建正则表达式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T09:18:12.257

# 条件

Cond 评估列表中的一系列条件，列表中的每一项都可以是一个条件，然后是可执行指令。

Emacs Lisp 手册中的示例足以说明它是如何工作的，我在这里对其进行了注释以帮助您理解它是如何工作的。

```
 (cond ((numberp x) x) ;; is x a number? return x
        ((stringp x) x) ;; is x a string? return x
        ((bufferp x) ;; is x a buffer? 
         (setq temporary-hack x) ;; set temporary-hack to buffer x
         (buffer-name x))        ;; return the buffer-name for buffer x
        ((symbolp x) (symbol-value x))) ;; is x a symbol? return the value of x 
```

条件的每个部分都可以按照您喜欢的任何方式进行评估，上述事实`x`在每个条件中都是巧合的。

例如：

```
 (cond ((eq 1 2) "Omg equality borked!") ;; Will never be true
       (t "default")) ;; always true 
```

所以与 switch 的比较有点有限，它本质上是一个 if 语句的列表，它执行/返回第一个 true 条件的主体列表。

希望这可以帮助您更好地理解**cond**。

```
 (cond (condition body ... ) ;; execute body of 1st passing  
       (condition body ... ) ;; condition and return result  
       (condition body ... ) ;; of the final evaluation.
       ;; etc
 ) 
```

# 或者

您可以执行类似于使用 OR 切换的操作，具体取决于您构建代码的方式。

这不是函数式风格，因为它依赖于副作用来做你想做的事，然后返回一个布尔值用于流控制，这里是一个伪 lisp 的例子。

# （或者）

```
(or
     (lambda() (do something)
            (evaluate t or nil) ; nil to continue; t to quit.
     )
     (lambda() (do something)
            (evaluate t or nil) ; nil to continue; t to quit.
     )
     (lambda() (do something)
            (evaluate t or nil) ; nil to continue; t to quit.
     )
     (lambda() (do something)
            (evaluate t or nil) ; nil to continue; t to quit.
     )
) 
```

这是使用类似开关的结构的工作示例`or`

```
(or
 (when (= 1 1) 
   (progn 
   (insert "hello\n")
           nil))
 (when (= 1 2)  ;; condition fails.
   (progn 
   (insert "hello\n")
           nil)) ;; returns false (nil)
 (when (= 1 1) 
   (progn 
   (insert "hello\n")
           t)) ;; returns true, so we bail.
 (when (= 1 1) 
   (progn 
   (insert "hello\n")
           nil))
) 
```

插入：

```
hello
hello 
```

# （和）

and 运算符（不仅在 Lisp 中）也非常有用，它不会评估所有内容直到为真，它会评估为真的条件，直到评估为假。

or & and 都可以用来构建有用的逻辑树。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:48:59.897

根据 Chris 的想法，我现在就是这样做的，将其分解为单独的函数会更容易。

编辑：现在还应用`or`了从 Slomojo 获得的这个线程中获得的知识（没有更多的变量！）

```
(defun sc-uncomment ()
  (interactive)
  (or 
   (if (region-active-p) 
     (uncomment-region (region-beginning) (region-end))
    (back-to-indentation)
    nil)
   (if (string= (byte-to-string (following-char)) comment-start)
     (sc-check-start)
    (sc-end))))

(defun sc-check-start ()
  (interactive)
  (while (string= (byte-to-string (following-char)) comment-start) 
    (delete-char 1)) 
)

(defun sc-end ()
  (interactive)
  (search-forward comment-start nil t)
  (backward-char 1)
  (kill-line))
) 
```

# jquery - 在 Spring mvc 应用程序中，不使用 jquery ajax 方法检索作为响应体从控制器返回的对象？

> ID：14135604
> 
> 赞同：0
> 
> 时间：2013-01-03T08:52:50.593
> 
> 标签：jquery, ajax, json, spring, model-view-controller

ajax方法中没有返回对象，也没有抛出异常。控制器方法中的代码：

我从这个方法返回一个 EmployeeBean 对象为`@Responsebody`

```
@RequestMapping(value="/anki")
public @ResponseBody EmployeeBean hhh(@RequestParam("name")String name){
    System.out.println("new method");
    EmployeeBean e=new EmployeeBean();
    e.setId("1001");
    e.setName("ankita");
    return e;
} 
```

Bean 类 EmployeeBean

```
package com.controller;

public class EmployeeBean {

    private String id;
    private String name;
    public String getId() {
            return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

在 ajax 方法响应没有成功，URL 在控制器中正确匹配。

javascript代码：

```
function abc(){
    alert('here!!');
    $.ajax({
        url:'anki',
        data:({name : "me"}),   
        success:function(data){
            alert('here gain');
            $('#time').html(data.name);
        }
    });
}

<input type="button" name="submit" title="submit" onclick="abc()"/>
<div id="time"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:42:41.523

如果您的类路径中没有 Jackson 库，请添加它。添加 jackson-core-asl-1.6.4 和 jackson-mapper-asl-1.6.4 罐子

# iphone - iOS上带有圆角和透明背景的Quartz UIImage

> ID：14135607
> 
> 赞同：2
> 
> 时间：2013-01-03T08:53:03.560
> 
> 标签：iphone, ios, uiimage, quartz-graphics, rounded-corners

我已使用[此解决方案](https://stackoverflow.com/a/14071921/384864)将角半径应用于`UIImage`in `Quartz`。它工作正常，就像我预测的那样。

然而，图像外部的角落区域不是透明的，而是有点白色：

![用 Quartz 制作的带有圆角的 UIImage](../Images/93f8586de42c549bdc236392d8da0857.png)

上图显示了处理后图像的左上角不透明且不透明。

我希望裁剪的边缘完全透明。我怎样才能做到这一点？

**编辑：**如果我想这样做，`UIImageView`我已经这样做了。所以请记住，我想用`Quartz`on `UIImage`object not来做这个`UIImageView`。

**解决方案：**问题实际上不在于绘图代码，而在于将该图像写入文件系统。我已将图像保存为 JPEG 而不是 PNG。这就是角落不透明的原因，因为 JPEG 没有 alpha 过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:14:59.980

我通常使用在 UIImage 上实现的自定义类别来裁剪带有圆角的图像。这是取自[这个](https://stackoverflow.com/a/2119286/643109)答案。

```
void addRoundedRectToPath(CGContextRef context, CGRect rect, float ovalWidth, float ovalHeight, BOOL top, BOOL bottom)
{
    float fw, fh;
    if (ovalWidth == 0 || ovalHeight == 0) {
        CGContextAddRect(context, rect);
        return;
    }
    CGContextSaveGState(context);
    CGContextTranslateCTM (context, CGRectGetMinX(rect), CGRectGetMinY(rect));
    CGContextScaleCTM (context, ovalWidth, ovalHeight);
    fw = CGRectGetWidth (rect) / ovalWidth;
    fh = CGRectGetHeight (rect) / ovalHeight;
    CGContextMoveToPoint(context, fw, fh/2);
    CGContextAddArcToPoint(context, fw, fh, fw/2, fh, 0);

    NSLog(@"bottom? %d", bottom);

    if (top) {
        CGContextAddArcToPoint(context, 0, fh, 0, fh/2, 3);
    } else {
        CGContextAddArcToPoint(context, 0, fh, 0, fh/2, 0);
    }

    if (bottom) {
        CGContextAddArcToPoint(context, 0, 0, fw/2, 0, 3);
    } else {
        CGContextAddArcToPoint(context, 0, 0, fw/2, 0, 0);
    }

    CGContextAddArcToPoint(context, fw, 0, fw, fh/2, 0);
    CGContextClosePath(context);
    CGContextRestoreGState(context);
}

- (UIImage *)roundCornersOfImage:(UIImage *)source roundTop:(BOOL)top roundBottom:(BOOL)bottom {
    int w = source.size.width;
    int h = source.size.height;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);

    CGContextBeginPath(context);
    CGRect rect = CGRectMake(0, 0, w, h);
    addRoundedRectToPath(context, rect, 4, 4, top, bottom);
    CGContextClosePath(context);
    CGContextClip(context);

    CGContextDrawImage(context, CGRectMake(0, 0, w, h), source.CGImage);

    CGImageRef imageMasked = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    return [UIImage imageWithCGImage:imageMasked];    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:01:02.263

为了`transparent`使用这个：

```
 const float colorMasking[6] = {1.0, 1.0, 0.0, 0.0, 1.0, 1.0};
 yourImage = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(yourImage.CGImage, colorMasking)]; 
```

**编辑**：在 UIImage 类别的方法中添加这两行

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextClearRect(context, rect); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:15:27.423

在您的 drawRect 方法中添加这些波纹管..

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextClearRect(context, rect);
    ///your another code here
} 
```

在创建 Context 之后，它需要从该 Rect 中清除另一个上下文...所以在该行之后添加这一行`CGContextClearRect(context, rect);`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:52:11.033

问题实际上不在于绘图代码，而在于将该图像写入文件系统。我已将图像保存为 JPEG 而不是 PNG。这就是角落不透明的原因，因为 JPEG 没有 alpha 过滤器。

刚刚替换了这行代码：

```
[UIImageJPEGRepresentation(image, 0.75) writeToFile:path atomically:YES]; 
```

......有了这个：

```
[UIImagePNGRepresentation(image) writeToFile:path atomically:YES]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-03T08:58:41.020

试试这个代码

```
Image.layer.cornerRadius = 10.0;
Image.layer.borderColor = [UIColor blackColor].CGColor;
Image.layer.borderWidth = 0.5;
Image.clipsToBounds = YES;
Image.backgroundColor = [UIColor clearColor]; 
```

希望对你有帮助

编辑 ：-

我想你只需要添加这个： -

```
Image.clipsToBounds = YES; 
```

# c# - 如何将字典值转换为列表？

> ID：14135610
> 
> 赞同：0
> 
> 时间：2013-01-03T08:53:48.740
> 
> 标签：c#, linq, windows-phone-7, dictionary, windows-phone

在 windows phone 中，我在数据库中检索了一个表作为 LINQ 中的字典。我的字典是这样的

```
Dictionary<int, StudentTable> 
```

我从 LINQ 检索表为

```
var studentDictionary = studContext.StudentList.Select(p => new { p.RollNo, p }).AsEnumerable().ToDictionary(kvp => kvp.RollNo, kvp => kvp); 
```

但我想将 studentDictionary 中的所有值作为

```
List<StudentTable> 
```

我知道可以通过使用 for 循环将每个字典值添加到列表中。我怎么能在没有循环的情况下做到这一点。? 除了循环还有其他更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T08:56:00.290

您可以使用`studentDictionary.Values`.

PS：同样适用于键，使用`studentDictionary.Keys`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:55:23.863

您的字典包含`Value`which 是 type 的对象`StudentTable`。您可以从字典中选择它并应用`ToList`方法。

```
var list = studentDictionary.Values.ToList(); 
```

或者

```
var list = studentDictionary.Select(r => r.Value).ToList(); 
```

# ruby-on-rails - 程序“rails”可以在以下软件包中找到 - 某些应用程序和 RVM 有问题？

> ID：14135612
> 
> 赞同：16
> 
> 时间：2013-01-03T08:53:58.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我刚刚从 github 下载了一个应用程序代码，当我尝试运行命令`rails s`时，我收到了这个错误 -

```
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2 
```

这仅针对此应用程序，有人可以告诉我如何解决此问题吗？我正在使用 RVM

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-19T03:33:01.087

万一其他人有这个问题，但上述方法不起作用。尝试运行：

```
/bin/bash --login 
```

然后运行

```
rvm use 2.0.0 #or whatever your version number is... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T09:15:36.217

不太确定你的问题到底是什么。如果您使用 rvm 并安装了 Rails，您可能必须使用

```
rvm use 1.9.3 
```

（版本号可能取决于您的安装）。那么你可能有也可能没有这个宝石。所以：

```
bundle install 
```

应该在这个 gemset 中安装 Rails gem。也许使用

```
rvmsudo bundle install 
```

或者只是手动安装 Rails gem。但这部分取决于应用程序预期的 Rails 版本。还有其他选择，但这应该最有效。

要永久设置版本，您可以使用：

```
rvm use 1.9.3 --default 
```

为此，您必须具有以下内容：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

在你的 ~/.bash_profile 中。

此外，您可以在项目中拥有类似 .rvm 的文件夹，如果您需要经常在不同版本之间切换，您可以在项目级别设置 rvm 选项（我自己没有使用这个，但 rvm 主页上应该有文档）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T23:37:55.250

`/bin/bash --login`在遇到同样的错误后，我在树莓派上使用了我的 ubuntu。它现在正在工作。

# php - 如何在yii中获取子字符串

> ID：14135613
> 
> 赞同：0
> 
> 时间：2013-01-03T08:54:02.770
> 
> 标签：php, yii, substring, textfield

```
 <tr style="display:none">       
  <td><?php echo $form->labelEx($model,'classcode'); ?></td>
        <td>    
            <?php echo $form->textField($model,'classcode',array('size'=>60,'maxlength'=>100,'id'=>'new-base-ref-si-classification-classcode','disabled'=>'')); ?>
            <?php echo $form->error($model,'classcode'); ?>

        </td>
    </tr>   
    <tr>
        <td><?php echo $form->labelEx($model,'Classification'); ?></td>
        <td>    
            <?php echo $form->textField($model,'Classification',array('size'=>60,'maxlength'=>100,'id'=>'new-base-ref-si-classification-Classification','disabled'=>'')); ?>
            <?php echo $form->error($model,'Classification'); ?>
        </td>
    </tr> 
```

我很难弄清楚该怎么做请帮助我..我需要的是隐藏类代码..当我输入aa字符串时，它的代码将获得第一个字母，然后它将在之前的类代码中输入点击提交按钮

例如，我在分类文本字段中输入了办公用品，代码将获得 O 和 S，然后在提交之前将其输入到 classcode texfield

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:56:34.543

由于此字段不显示并且根本不会接收用户输入，因此您在视图文件中不需要它。

最好的方法是将类代码设置为不安全，这样它就不能被大量分配

然后在您的模型中提交后在服务器端计算：

```
public function rules()
{
    return array(
        // ... snip ... other rules here
        array('classcode', 'unsafe'), // will not be massively assigned, prevents hacks
        array('Classification', 'filterClasscode'), // custom validator
    );
}

/**
 * Custom filter to set classcode
 * @param string $attribute field to set classcode from
 */    
public function filterClasscode($attribute)
{
    $this->classcode = '';
    foreach (explode(' ', $this->$attribute) as $val) {
        $this->classcode .= substr($val, 0, 1);
    }

    $this->classcode = strtoupper($this->classcode);
} 
```

# mvvm - 动态更改 XamGrid 列标题

> ID：14135615
> 
> 赞同：0
> 
> 时间：2013-01-03T08:54:11.677
> 
> 标签：mvvm, silverlight-4.0

我让用户组从 wcf 服务返回并使用视图模型将其绑定到视图中的 xamgrid，由于网格具有自动生成列，因此网格列标题与属性名相同（没有空格）。

我想更改列标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:08:46.240

有几种方法可以做到这一点。如果您仍然想要自动生成列，那么您可以订阅网格中的 AutoGeneratingColumn 事件并监听每一列并将列标题设置为您想要的名称。另一个不确定它是否适用于您的情况的选项是在模型中，您可以使用组件模型注释[http://msdn.microsoft.com/en-us/library/cc490428(v=vs.95) 来装饰每个成员。 aspx](http://msdn.microsoft.com/en-us/library/cc490428(v=vs.95).aspx)或[在 WCF RIA 服务中使用 DataAnnotations (DisplayColumn)](https://stackoverflow.com/questions/6343676/using-dataannotations-displaycolumn-in-wcf-ria-services)

# ios - MKStoreKit 通知

> ID：14135619
> 
> 赞同：6
> 
> 时间：2013-01-03T08:54:47.077
> 
> 标签：ios, in-app-purchase, mkstorekit

我正在使用 MKStoreKit 进行自动更新订阅，一切正常，但我不知道这些通知有什么作用。（`kSubscriptionsPurchasedNotification`和`kSubscriptionsInvalidNotification`）。

当我在`ViewDidLoad`or`didFinishLaunchingWithOptions`函数中调用它们时，它们对应的方法被调用但`if([MKStoreManager isFeaturePurchased:@"myFeature"])`总是返回 false 并进入 else 语句。那么为什么会发生这种情况以及使用它们有什么好处呢？

其次，就像我说的我正在使用自动续订订阅，当订阅期限到期时，订阅不会自动续订，用户必须再次按下才能登录我的应用并手动订阅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T18:08:07.850

如果您正在使用订阅，您应该使用：

```
[[MKStoreManager sharedManager] isSubscriptionActive:@"myFeature"]; 
```

而不是：*[MKStoreManager isFeaturePurchased:@"myFeature"]*

```
isFeaturePurchased: 
```

用于检查“消耗品”应用内购买。

# radio-button - chrome和firefox中的单选按钮文本对齐问题

> ID：14135627
> 
> 赞同：0
> 
> 时间：2013-01-03T08:55:25.327
> 
> 标签：radio-button, vertical-alignment

我面临以下链接中发布的相同问题。但这个答案对我不起作用。

[单选按钮文本对齐问题](https://stackoverflow.com/questions/6183867/radiobutton-text-alignment-issue)

此对齐问题仅在 safari、chrome 和 firefox 中发生

代码：

```
<asp:RadioButton ID="StorageRadio" GroupName="FormatRadios" 
 TextAlign="Right" Text="Export for storage" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:57:59.460

我通过添加以下样式得到了解决方案

代码：

```
label, input[type="radio"] 
{
  font-size: 12px;
  vertical-align: middle;
  margin-top: -1px;
} 
```

# android - 创建一个新的线程服务来启动连接并写入数据库

> ID：14135631
> 
> 赞同：0
> 
> 时间：2013-01-03T08:55:59.430
> 
> 标签：android, json, service, connection

我正在向前迈出一些脚步，但是我遇到了一些问题，当我调用服务时，它应该连接到一个 json 资源，获取结果并将它们写入数据库，嗯......接缝什么都没有发生：

**电话：**

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    //Toast.makeText(this, String.valueOf(strdomanda), Toast.LENGTH_LONG).show(); 
    datasource.setRispostaSelezionata(Long.toString(id));   
    datasource.setDomandaFatta(strdomanda);
    datasource.close();
    Intent intent = new Intent(this, updateDemocracyService.class);
    startService(intent);

    finish();

    } 
```

**服务 ：**

```
public class updateDemocracyService extends IntentService{
    public updateDemocracyService() {
        super("updateDemocracyService");
        // TODO Auto-generated constructor stub
    }
    private pollDataSource datasource;
     int mStartMode;       // indicates how to behave if the service is killed
        IBinder mBinder;      // interface for clients that bind
        boolean mAllowRebind; // indicates whether onRebind should be used
        // url to make request
        private static String url = "http://lnx.ggservice.com/democracy/domande.php";

        // JSON Node names
        private static final String TAG_DOMANDE = "domande";
        private static final String TAG_ID = "id";
        private static final String TAG_TESTO = "testo";

        // contacts JSONArray
        JSONArray contacts = null;

        @Override
        protected void onHandleIntent(Intent intent) {
            datasource = new pollDataSource(this);
            datasource.open();
            Thread t = new Thread(){
                public void run(){

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);

            try {

                // Getting Array of Contacts
                contacts = json.getJSONArray(TAG_DOMANDE);

                // looping through All Contacts
                for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_TESTO);
                    datasource.createCategoria(name);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

                }
            };
            t.start();

            Toast.makeText(this,"faccio cose", Toast.LENGTH_LONG).show();   

        }

} 
```

服务可能会启动，我不知道如何检查，但实际上它什么也没做，也许它连接到服务器，但很可能我弄错了什么......你看到有什么问题吗？为什么服务什么都不做？在此之前我正在执行中的大部分代码`onStartCommand`，但我看到我必须使用`onHandleIntent`

**更新：**

现在它给出了这些错误：

```
01-03 09:28:39.582: D/dalvikvm(17584): GC_CONCURRENT freed 157K, 3% free 9328K/9607K, paused 13ms+15ms
01-03 09:28:40.162: W/dalvikvm(17584): threadid=12: thread exiting with uncaught exception (group=0x409c01f8)
01-03 09:28:40.242: E/AndroidRuntime(17584): FATAL EXCEPTION: Thread-124
01-03 09:28:40.242: E/AndroidRuntime(17584): java.lang.NullPointerException
01-03 09:28:40.242: E/AndroidRuntime(17584):    at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
01-03 09:28:40.242: E/AndroidRuntime(17584):    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:115)
01-03 09:28:40.242: E/AndroidRuntime(17584):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1718)
01-03 09:28:40.242: E/AndroidRuntime(17584):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1591)
01-03 09:28:40.242: E/AndroidRuntime(17584):    at com.ggservice.democracy.pollDataSource.createCategoria(pollDataSource.java:41)
01-03 09:28:40.242: E/AndroidRuntime(17584):    at com.ggservice.democracy.updateDemocracyService$1.run(updateDemocracyService.java:63)
01-03 09:28:41.851: W/MessageQueue(17584): Handler (android.os.Handler) {412f6590} sending message to a Handler on a dead thread
01-03 09:28:41.851: W/MessageQueue(17584): java.lang.RuntimeException: Handler (android.os.Handler) {412f6590} sending message to a Handler on a dead thread
01-03 09:28:41.851: W/MessageQueue(17584):  at android.os.MessageQueue.enqueueMessage(MessageQueue.java:196)
01-03 09:28:41.851: W/MessageQueue(17584):  at android.os.Handler.sendMessageAtTime(Handler.java:473)
01-03 09:28:41.851: W/MessageQueue(17584):  at android.os.Handler.sendMessageDelayed(Handler.java:446)
01-03 09:28:41.851: W/MessageQueue(17584):  at android.os.Handler.post(Handler.java:263)
01-03 09:28:41.851: W/MessageQueue(17584):  at android.widget.Toast$TN.hide(Toast.java:358)
01-03 09:28:41.851: W/MessageQueue(17584):  at android.app.ITransientNotification$Stub.onTransact(ITransientNotification.java:55)
01-03 09:28:41.851: W/MessageQueue(17584):  at android.os.Binder.execTransact(Binder.java:338)
01-03 09:28:41.851: W/MessageQueue(17584):  at dalvik.system.NativeStart.run(Native Method) 
```

数据源：

```
public class pollDataSource {
    // Database fields
      private SQLiteDatabase database;
      private MySQLiteHelper dbHelper;
      private String[] allCategorieColumns = { MySQLiteHelper.COLUMN_ID,
          MySQLiteHelper.COLUMN_PREF, MySQLiteHelper.COLUMN_NOME };   
      private String[] allSondaggiColumns = { MySQLiteHelper.COLUMN_ID,
              MySQLiteHelper.COLUMN_CATID,MySQLiteHelper.COLUMN_WEBID,MySQLiteHelper.COLUMN_FATTA, MySQLiteHelper.COLUMN_DOMANDA };   
      private String[] allRisposteColumns = { MySQLiteHelper.COLUMN_ID, 
              MySQLiteHelper.COLUMN_SONDID,MySQLiteHelper.COLUMN_WEBID, MySQLiteHelper.COLUMN_RISPOSTA, 
              MySQLiteHelper.COLUMN_SELEZIONATA };

      public pollDataSource(Context context) {
            dbHelper = new MySQLiteHelper(context);
          }

      public void open() throws SQLException {
            database = dbHelper.getWritableDatabase();
          }

      public void close() {
            dbHelper.close();
          }

      public categorie createCategoria(String categoria) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_NOME, categoria);
            values.put(MySQLiteHelper.COLUMN_PREF, 0);
            long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            categorie newCategoria = cursorToCategorie(cursor);
            cursor.close();
            return newCategoria;
          } 

      public void deleteCategoria(categorie categoria) {
            long id = categoria.getId();
            System.out.println("Categoria cancellata, id: " + id);
            database.delete(MySQLiteHelper.TABLE_CATEGORIE, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          }

      public sondaggi createSondaggio(String domanda, int catid, int webid) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_DOMANDA, domanda);
            values.put(MySQLiteHelper.COLUMN_CATID, catid);
            values.put(MySQLiteHelper.COLUMN_WEBID, webid);
            values.put(MySQLiteHelper.COLUMN_FATTA, "0");
            long insertId = database.insert(MySQLiteHelper.TABLE_SONDAGGI, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                allSondaggiColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            sondaggi newSondaggio = cursorToSondaggi(cursor);
            cursor.close();
            return newSondaggio;
          }

      public void deleteSondaggio(sondaggi sondaggio) {
            long id = sondaggio.getId();
            System.out.println("Sondaggio cancellato, id: " + id);
            database.delete(MySQLiteHelper.TABLE_SONDAGGI, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          } 

      public Cursor getAllCategorie() {
            List<categorie> categorie = new ArrayList<categorie>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, null, null, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              categorie categoria = cursorToCategorie(cursor);
              categorie.add(categoria);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
           // cursor.close();
            return cursor;
          }

      public Cursor getDomanda(String id) {
            List<sondaggi> domande = new ArrayList<sondaggi>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                    allSondaggiColumns,
                    MySQLiteHelper.COLUMN_ID + "=?",
                    new String[] { id }, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              sondaggi sondaggio = cursorToSondaggi(cursor);
              domande.add(sondaggio);
              cursor.moveToNext();
            }

            return cursor;
          }

      private categorie cursorToCategorie(Cursor cursor) {
          categorie categorie = new categorie();
          categorie.setId(cursor.getLong(0));
          categorie.setPreferita(cursor.getLong(1));
          categorie.setNome(cursor.getString(2));
            return categorie;
          }

      private sondaggi cursorToSondaggi(Cursor cursor) {
          sondaggi sondaggi = new sondaggi();
          sondaggi.setId(cursor.getLong(0));
          sondaggi.setDomanda(cursor.getString(1));
          sondaggi.setCatid(cursor.getLong(2));
          sondaggi.setwebid(cursor.getLong(3));
          return sondaggi;
          }

    public Cursor getAllDomandeCategoria(String catid) {
        List<sondaggi> domande = new ArrayList<sondaggi>();

        Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                allSondaggiColumns,
                MySQLiteHelper.COLUMN_CATID + "=? AND " + MySQLiteHelper.COLUMN_FATTA + "='0'",
                new String[] { catid }, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
          sondaggi sondaggio = cursorToSondaggi(cursor);
          domande.add(sondaggio);
          cursor.moveToNext();
        }

        return cursor;
    }

    public Cursor getTestoRisposte(String strdomanda) {

        List<testo_risposte> domande = new ArrayList<testo_risposte>();    
        Cursor cursor = database.query(MySQLiteHelper.TABLE_TESTORISPOSTE,
                allRisposteColumns,
                MySQLiteHelper.COLUMN_SONDID + "=?",
                new String[] { strdomanda }, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
         testo_risposte sondaggio = cursorToTestoRisposte(cursor);
          domande.add(sondaggio);
          cursor.moveToNext();
        }

        return cursor;
    }

    private testo_risposte cursorToTestoRisposte(Cursor cursor) {
        testo_risposte testo_risposte = new testo_risposte();
        testo_risposte.setId(cursor.getLong(0));
        testo_risposte.setCatid(cursor.getLong(1));
        testo_risposte.setWebid(cursor.getLong(4));
        testo_risposte.Setselezionata(cursor.getLong(2));
        testo_risposte.setDomanda(cursor.getString(3));
     return testo_risposte;
    }

    public void setRispostaSelezionata(String id) {     
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_SELEZIONATA, "1");
        database.update(MySQLiteHelper.TABLE_TESTORISPOSTE,values,MySQLiteHelper.COLUMN_ID + "=?", new String[] { id });    
    }

    public void setDomandaFatta(String strdomanda) {
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_FATTA, "1");
        database.update(MySQLiteHelper.TABLE_SONDAGGI,values,MySQLiteHelper.COLUMN_ID + "=?", new String[] { strdomanda });

    }

} 
```

# iframe - Likebox 对不同用户的显示方式不同

> ID：14135633
> 
> 赞同：1
> 
> 时间：2013-01-03T08:56:15.720
> 
> 标签：iframe, facebook-likebox

当我在我的网站上使用类似 iFrame 的标准框时，它对大多数用户来说都很好。除了我自己。在我看来，人脸下面的名字不显示，边框总是#ccc，我无法更改。我附上了一个截图来澄清。

![左侧是 Firefox（未登录），右侧是 Chrome（已登录 FB）。 两个窗口中的设置相同。](../Images/9f0bbce24d85d72f5ee60c22829c56c9.png)

这仅在我登录时发生。因此我认为这是因为我自己的隐私设置，但这并不能解释为什么边界会出现意外行为。我找不到合适的解释，有什么想法吗？

# php - 如何从 Codeigniter 中的 form_dropdown() 中检索值

> ID：14135635
> 
> 赞同：0
> 
> 时间：2013-01-03T08:56:18.327
> 
> 标签：php, javascript, codeigniter

我正在使用 codeigniter。我有简单的 form_dropdown()。我想为我的下拉菜单执行一个 onchange() 函数。

我将获得通过 JavaScript 选择的字符串。

这是我的代码，但它不起作用

```
$js ="onChange=message()";
echo "<script type=\"text/javascript\" > function message(){ var no=document.getElementById('name').value;

alert(sr);
}
</script>";
echo form_dropdown('name',$data,'large',$js); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:04:32.010

form_dropdown 不会自动向元素添加 id，因此`getElementById`不会像所写的那样工作。

另外，为了理解起见，指南没有很好地解释第四个参数。调用它`$js`会产生误导，因为它会将您提供的任何内容添加到属性列表中。

将一行代码更改为此（还要注意 onChange 函数周围的引号）：

```
 $js = 'id = "name" onChange="message();"'; 
```

确保您在输出后查看源代码，以验证它是否也在输出有效的 html。

此外，在 Chrome 上，F12 会调出你的开发者工具，按下 esc 键会切换显示你的 JavaScript 控制台，如果一切都没有按计划进行，这可能会给你带来有意义的错误。

编辑：

看起来您正在设置一个名为 的变量的值`no`，但提醒一个名为 的变量`sr`，该变量似乎没有被定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T06:29:51.587

您也可以简单地从函数调用中传递 ref 而不是从中获取值`document.getElementById()`，当您在 select dropdowm 中添加 id 时它将起作用

试试这个代码

```
<?php 
echo "<script type=\"text/javascript\" > 
        function message(element){ 
           var no=element.value;
           alert(no);
         }
</script>";

echo form_dropdown('name',$data,'large', 'onChange="message(this);"'); 

?> 
```

# android - 如何在 Android NDK 中使用 Asio（独立于 Boost）？

> ID：14135636
> 
> 赞同：4
> 
> 时间：2013-01-03T08:56:19.083
> 
> 标签：android, c++, android-ndk, boost-asio

Asio（没有 Boost）应该只可以使用标题，对吗？

> 默认情况下，Asio 是一个只有头文件的库。( [http://think-async.com](http://think-async.com) )

我知道 Asio 内部仍然依赖于 Boost。

这是我的设置。

**安卓.mk**

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE        := gatelib
LOCAL_SRC_FILES     := gatelib.cpp
LOCAL_C_INCLUDES    += /cygdrive/l/asio-1.5.3/include
LOCAL_C_INCLUDES    += /cygdrive/l/boost/boost_1_49_0

include $(BUILD_SHARED_LIBRARY) 
```

**应用程序.mk**

```
APP_STL := stlport_static
APP_CFLAGS += -DBOOST_DATE_TIME_NO_LIB -DBOOST_REGEX_NO_LIB 
```

**门库.cpp**

```
#include <jni.h>
#include <asio.hpp>

#ifdef __cplusplus
extern "C" 
{
#endif
    // rest of code ...

#ifdef __cplusplus
}
#endif 
```

**构建脚本**

```
@echo on

@set BASHPATH="L:\cygwin\bin\bash"
@set PROJECTDIR="/cygdrive/l/AsioAndroid/AsioDemo"
@set NDKDIR="/cygdrive/l/android-ndk-r8c/ndk-build"

%BASHPATH% --login -c "cd %PROJECTDIR% && %NDKDIR%

@pause: 
```

**输出**

[http://pastebin.com/XiJjvNmp](http://pastebin.com/XiJjvNmp)

所以基本上，我想要实现的是，让 Asio 在 Android 上工作（通过 NDK）。是的，*只是*Asio 本身，而不是 Boost 中包含的 Asio。问题在输出中显示。我一点头绪都没有。。

PS。没有 Asio 标签，所以我想 Boost-Asio 标签现在必须要做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:49:33.767

这就是我所做的。

**应用程序.mk**

```
APP_STL := gnustl_static
APP_CFLAGS += -DBOOST_DATE_TIME_NO_LIB -DBOOST_REGEX_NO_LIB
APP_CPPFLAGS += -fexceptions 
```

Stack Overflow 上到处都是线索和提示。一旦拼凑起来，它就起作用了！

# iphone - 如何在 iphone 的 iCarousel 上设置 CustomFrame？

> ID：14135639
> 
> 赞同：3
> 
> 时间：2013-01-03T08:56:44.973
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想根据我的需要设置 iCarousel 的框架。首先它显示在模拟器的中间，但我尝试了我的代码，现在它显示在模拟器的顶部。

我正在尝试这段代码：

```
// Try to add custom view for setting height and width of iCarousel

UIView *Carasouel_Customview = [[UIView alloc]initWithFrame:CGRectMake(10, -245, 768, 245)];
[self.view addSubview:Carasouel_Customview];

// Initialize and configure the carousel

//carousel = [[iCarousel alloc] initWithFrame:self.view.bounds];
carousel = [[iCarousel alloc] initWithFrame:Carasouel_Customview.bounds];
//carousel = [[iCarousel alloc] initWithFrame:CGRectMake(20, 200, 179, 245)];
carousel.autoresizingMask = UIViewAutoresizingFlexibleWidth |    UIViewAutoresizingFlexibleHeight;
carousel.type = iCarouselTypeRotary;
carousel.dataSource = self;
carousel.delegate = self;
[self.view addSubview:carousel]; 
```

专家的任何提示都将非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T07:53:27.907

```
self.carousel = [[iCarousel alloc]initWithFrame:CGRectMake(0.0, 0.0, 200.0, 150.0)];
self.carousel.delegate = self;
self.carousel.dataSource = self;
self.carousel.type = iCarouselTypeLinear;

self.carousel.clipsToBounds = YES; //This is main point

[self.view addSubview:self.carousel]; 
```

当我们将 customFrame 设置为[iCarousel](https://github.com/nicklockwood/iCarousel)时，我们得到它的全屏宽度。所以只需设置它的**clipsToBounds**属性`YES`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:47:45.263

您将 y 坐标设置`-245`为`Carasouel_Customview`，然后设置`carousel.frame`-`Carasouel_Customview.bounds`这里 y 坐标为 0。

您正在添加`carousel`，`self.view`而不是`Carasouel_Customview`- 那么您期望什么？

解决方案：添加`carousel`为子视图`Carasouel_Customview`或`carousel.frame`使用自定义值设置。

# svn - Mercurial - 如何管理多个模块

> ID：14135644
> 
> 赞同：2
> 
> 时间：2013-01-03T08:57:03.767
> 
> 标签：svn, version-control, mercurial

我在一个使用 Subversion 的团队中工作，我们正在考虑改用 Mercurial。

我们有多个独立的代码项目，以及一些项目之间共享的代码。为简单起见，假设有 2 个项目`SpaceGame`和`SeaGame`，它们都使用来自`GraphicsEngine`. `GraphicsEngine`在某种程度上独立于游戏开发。假设我们需要`SpaceGame`从几个月前更新到修订版 467；`SpaceGame`需要回到 467 版，并且`GrpahicsEngine`需要回到 467 版时的版本`SpaceGame`，`GraphicsEngine`不能停留在最新版本。使用 Subversion 实现这一点的唯一方法是我们将所有项目都放入一个大存储库（外部不会给我们所需的行为）。但是，这给我们的团队带来了很多问题；回购是巨大的，几乎没有人想要对其进行全面检查，他们只检查他们需要的项目。

Mercurial 将如何处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:36:50.740

这听起来像是[Mercurial 子存​​储库](http://mercurial.selenic.com/wiki/Subrepository)的用例。

这意味着您可以将`GraphicsEngine`作为子存储库放入`SpaceGame`.
*（或者如果您遵循[推荐的结构](http://mercurial.selenic.com/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)，请创建一个包含`GraphicsEngine`and`SpaceGame`和子存储库的精简“包装器”存储库）*

子存储库的工作方式`SpaceGame`并不总是包含最新版本`GraphicsEngine`...它指向某个固定修订版，如果`GraphicsEngine`同时更新，`SpaceGame`则**不会**自动获得这些更改...您必须进行显式更新得到他们。
这意味着`SpaceGame`永远不会因为其他人对`GraphicsEngine`.

这也意味着*（这就是您所问的）*当您`SpaceGame`“从几个月前更新到修订版 467”时，`GraphicsEngine`子存储库[会自动更新到它`SpaceGame`在 467](http://mercurial.selenic.com/wiki/Subrepository#Synchronizing_in_subrepositories)时的修订版。

* * *

**编辑：**

不，`GraphicsEngine`它仍然是一个单独的存储库，不为任何人“拥有”。
如果您将它用作子存储库，它只是从父存储库“链接”（并且它可以从多个父存储库链接）。它仍然是一个单独的存储库。

使用子存储库，这样的事情是可能的：

```
GraphicsEngine      // main GraphicsEngine repo, current revision: 300

SpaceGame           // main SpaceGame repo
  └ GraphicsEngine  // GraphicsEngine subrepo, current revision: 265

SeaGame             // main SeaGame repo
  └ GraphicsEngine  // GraphicsEngine subrepo, current revision: 241 
```

两者`SpaceGame`都有`SeaGame`一个`GraphicsEngine`子回购。
每个子存储库“指向”某个版本`GraphicsEngine`（在我的示例中为 265 和 241）。
开发`GraphicsEngine`仍在继续（`GraphicsEngine`在 rev 300），但最近的更改在 中不可见`SpaceGame`，`SeaGame`因为它们都指向旧`GraphicsEngine`版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:33:01.313

**请注意**：Christian 是对的，但我建议至少尝试使用 GuestRepo 而不是[Subrepo](https://bitbucket.org/selinc/guestrepo)，它是作为对某些 subrepos 限制和缺点的答案而创建的。

顺便提一句：

> 外部因素不会给我们我们需要的行为

只是错误的答案，是不良研究的结果。您**可以**通过两种不同的方式使用 svn:externals，两种方式（通过一些手工操作）都会为您提供所需的结果

**类似 Subrepo 的方式**

GraphicsEngine 作为外部链接，在定义中具有**固定修订。**每次，当您必须并且必须在“SuperRepository”（带有外部的存储库）中使用更多新修订时，您必须**更新**外部定义并**提交父**项目。有了这样的硬链接，Superrepo 总是为父外部定义了一对修订。

**时光倒流机中的免费链接，手动更新外部**

如果您不想担心在场景 1 中监控外部更新（在*单个外部*更新定义的情况下可以通过钩子自动更新），您可以使用外部，链接到 GraphicsEngine 的 HEAD（不要在定义）用于手动（或通过*某些脚本*）更新目录的成本，其中包含外部数据。我懒得写了，所以——只写这里的工作流程

使用 HEAD-linking，对于过去主 repo 的修订版 N，externals 必须处于修订版 M 的状态，这是修订版 N 时链接 repo 的最新修订版。幸运的是，svn 可以使用日期规范（不同的形式) 作为 -r 选项的参数。您只需要确定提交 N 的日期时间并更新外部目录（获取“混合修订工作副本”）

`svn log -q -r N`在主仓库中会给出类似的东西

```
------------------------------------------------------------------------
r34 | lazybadger | 2012-03-24 12:28:12 +0600 (Сб, 24 мар 2012)
------------------------------------------------------------------------ 
```

现在只记得日期字段“2012-03-24 12:28:12 +0600”。

`svn help up`确认，我们可以使用日期作为修订说明符

```
-r [--revision] ARG      : ARG (some commands also take ARG1:ARG2 range)
                             A revision argument can be one of:
                             ...       
                                '{' DATE '}'
                             ... 
```

在[SVN-Book](http://svnbook.red-bean.com/en/1.7/svn.tour.revs.specifiers.html)的“修订日期”一章中，我们将为我们的 (date-time-TZ) 案例找到正确的格式

```
...
$ svn checkout -r {"2006-02-17 15:30 +0230"}
...
$ svn checkout -r {2006-02-17T15:30-04:00}
...
$ svn checkout -r {20060217T1530-0500} 
```

第一种格式对我们来说是最好的选择（因为我们已经从 svn 日志中获得了它），因此 - 我们可以在 WC 中使用外部（仍然不与主版本同步）

```
cd EXTERNAL-DIR
svn up -r {"2012-03-24 12:28:12 +0600"} 
```

并以与过去相同的状态进入外部，当时主要修订版（在我的示例中）为 34

**PS**：`svn log ...| gawk {...}`可以轻松提取和存储基础修订的日期时间

# javascript - Chrome 图像预加载在第一次图像加载时不起作用

> ID：14135645
> 
> 赞同：1
> 
> 时间：2013-01-03T08:57:09.257
> 
> 标签：javascript, css, google-chrome, preloading, image-preloader

我在页面上有锚点，在鼠标悬停和鼠标移出时显示不同的背景图像。我已经预加载了图像，以避免在鼠标悬停/移出时闪烁并从服务器重新请求图像。这些脚本在 IE8/FF 上运行良好，但 Chrome 的行为不同。在最新版本的 Chrome 中，我第一次将鼠标悬停在锚点上时，从服务器重新请求图像导致闪烁，这是为什么？成功的鼠标悬停/移出工作正常，没有闪烁。

下面的代码：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>

<style type="text/css">
body:after
{
  content: url('/images/1.png') url('/images/1a.png')
  position: absolute;
  top: -9999px;
  left: -9999px;
}

.imageHover
{
   display:inherit;
   width:25px;
   height:50px;
   background:url('/images/1.png') no-repeat;
}

.imageOut
{
   display:inherit;
   width:25px;
   height:50px;
   background:url('/images/1a.png') no-repeat;
}
</style>

<script language="javascript" type="text/javascript">
    var oneSelected = new Image();
    var oneUnselected = new Image();

    oneSelected.src="/images/1.png";
    oneUnselected.src="/images/1a.png";

    function OnImageMouseOver(target) {
       $(target).toggleClass('imageHover', true);
       $(target).toggleClass('imageOut', false);
    }
    function OnImageMouseOut(target) {
       $(target).toggleClass('imageHover', false);
       $(target).toggleClass('imageOut', true);
    }
</script>
</head>
<body>
   <a href="#" class="imageOut" onmouseover="OnImageMouseOver(this)" onmouseout="OnImageMouseOut(this)"></a>
</body>
</html> 
```

将锚点转换为图像，但它仍然无法在 Chrome 中工作：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script language="javascript" type="text/javascript">    
    if (document.images) {
        var oneSelected = new Image();
        var oneUnselected = new Image();

        oneUnselected.src = '/images/1a.png';
        oneSelected.src = '/images/1.png';
    }

    function OnRatingMouseOver(target, newSrc) {
        $(target).attr('src', newSrc);
    }

    function OnRatingMouseOut(target, newSrc) {
        $(target).attr('src', newSrc);        
    }
</script>

</head>
<body>
<div id="mainDiv" style="width:400px;">
      <div id="inputDiv">
         <table id="inputTable">
            <tr>
               <td>Rating</td>
               <td>
                  <img id='rating1Anchor'
                        src='/images/1a.png'
                        onmouseover="OnRatingMouseOver(this, '/images/1.png');"
                        onmouseout="OnRatingMouseOut(this, '/images/1a.png');"
                        onclick="OnRatingClick(this, '/images/1.png', 1);">
                  </td>
           </tr>           
         </table>
      </div> 
</div>
</body>
<html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:01:56.757

它可能根本没有预加载它们，因为它没有显示它们只是添加到 DOM？尝试使用以下代码预加载您的图像。

```
var preload = new Array();

function preload_image(){
    for (var x = 0; x < preload_image.arguments.length; x++)
    {
        preload[x]     = new Image();
        preload[x].src = preload_image.arguments[x];
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T01:43:58.553

我不得不说我非常怀疑这些 pngs 实际上是从 Chrome 中的服务器重新请求的。您可以在开发工具中发布时间线的屏幕截图，显示请求两次吗？:) 我认为您更有可能只是在重绘期间稍有犹豫。

你不使用图像精灵有什么原因吗？它们是该问题的规范解决方案。这个想法很简单，加载一个包含正常和“悬停”或“活动”状态的图像。显示的图形部分使用 css“背景位置”换出。这是一个[教程](http://css-tricks.com/css-sprites/)，这是一个[支持“背景位置”的表格，](http://snook.ca/archives/html_and_css/background-position-x-y)它一直可以追溯到 IE4。

代码应如下所示：

```
<html>
<head>
    <style>

    #myCoolLink {
        background-image:url('img/image.gif');
        background-position:0px 0px;
    }
    #myCoolLink:hover,
    #myCoolLink.active {
        background-position:0px -72px; //depending of course on the image
    }
    </style>
</head>
<body>
   <a href="#" id="myCoolLink"></a>
</body>
</html> 
```

不需要脚本，而且更简洁。这样做的另一个巨大优势是，如果需要，您仍然可以随时通过切换链接上的“活动”类以编程方式将图像更改为“悬停”。

# websphere - MQRFH2.usr 进入主消息体

> ID：14135646
> 
> 赞同：1
> 
> 时间：2013-01-03T08:57:12.850
> 
> 标签：websphere, ibm-mq, websphere-6.1

将 WMQ7.0 与 WMB 6.1 一起使用

我有一个流程，我正在转换一条消息并使用**MQRFH2.usr**来保存一些数据。

但是，我面临**MQRFH2.usr**出现在主消息正文中的问题。

我在不同的环境中部署了相同的代码，但我只在一个环境中遇到了这个问题。

所以，这**似乎不是代码问题**。它与**配置有关。**

请提出可能的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:30:37.977

Check the queue's [`PROPCTL`](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzao.doc/mi203606.htm) setting. If this is set to `NONE` then the behavior is as follows:

> If the application does not create a message handle, all the message properties are removed from the MQRFH2\. Name/value pairs in the MQRFH2 headers are left in the message.

Be sure to read the [doc page](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzao.doc/mi203606.htm) through a couple of times and maybe test with different settings to understand fully how `PROPCTL` modifies the message content your app receives.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T11:36:56.697

MQRFH2 标头（如果存在）始终位于消息的有效负载部分（这是 webpshere 组织它的方式）。您可以接收一个或多个 MQRFH2 标头（结构）。

也许您只期待一个并且正在收到两个？这将解释您的消息数据留下了乱码。

我使用以下代码在收到消息后处理这些听到的消息

```
MQRFH2 header = null;

// Find and store message length
int msglen = replyMessage.getMessageLength();

MQHeaderList list = new MQHeaderList(replyMessage);
int indexOf = list.indexOf("MQRFH2");
if (indexOf >= 0) {
    header = (MQRFH2) list.get(indexOf);
    msglen = msglen - header.size();
}

String msgText = replyMessage.readStringOfCharLength(msglen); 
```

希望能帮助到你。

马丁斯

# php - 使用 PHP 和 mysql 提交 Ajax

> ID：14135648
> 
> 赞同：0
> 
> 时间：2013-01-03T08:57:20.023
> 
> 标签：php, mysql, jquery

可能有按钮子php页面。我想提交按钮的值和使用该值从表中删除记录。Ajaxz 代码是

```
$('#product-table td #delete').live("click", function () {
                var doDelete = confirm('Are you sure you want to delete this record?');
                deleteLinkObj = $(this);

                if (doDelete) {

                    var id = $(this).attr('accesskey');
        $("#deleteid").val(id); 
        $.ajax({
                    url: "purchase.php",
                    data: {deleteid:id},
                    dataType: 'html',
                    success: function() {

                    }
                });

                }
                else { return false; }
                }); 
```

在 PHP 上，我正在尝试使用 deleteid 的值，但它没有到来的 PHP 代码是

```
if(@$_POST['deleteid']!="")
                    {
                    $sql="delete from purchasedetails where purchaseid='".$_POST['deleteid']."'";
                    if(!mysql_query($sql))
                            {
                            die('Error: ' . mysql_error());
                            }
                            else
                            {
                            $msg="Data is deleted";
                            }
                    } 
```

我试过使用 isset($_POST['deleteid']) 然后它也显示错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:01:08.123

默认情况下 $.ajax 将类型作为 GET，因此您需要在代码中定义类型

你可以试试这样的[$.ajax](http://api.jquery.com/jQuery.ajax/)语法 -

```
 $.ajax({
                url: "purchase.php",
                data: $("#deleteid").val(id),
                type: POST
                dataType: 'html',
                success: function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:02:16.733

在您的 ajax 调用中，您没有将请求方法设置为`POST`，因此它将默认为`GET`，这就是您的 post var 永远不会出现的原因：

```
 $.ajax({
                type: 'POST',
                url: "purchase.php",
                data: {deleteid:id},
                dataType: 'html',
                success: function() {

                }
            }); 
```

作为 SQL 注入漏洞的快速修复，您可以将 id 强制转换为`int`，但您应该考虑升级到 PDO 或 MySQLi，因为您使用的库已弃用。

```
$sql="delete from purchasedetails where purchaseid='".(int)$_POST['deleteid']."'"; 
```

将你`purchaseid`作为元素存储 accesskey 不是最好的地方，它作为一个`data-myid`属性会更好，所以你可以使用`$(this).data('myid')`.

# jquery - 使用 jQuery 创建许多不同的元素 - 追加

> ID：14135651
> 
> 赞同：1
> 
> 时间：2013-01-03T08:57:43.453
> 
> 标签：jquery, append

```
 var i1 = $("<input type='radio' class='11' value='11' /><input type='radio' class='2' value='2' />");
    var i2 = $("<input type='radio' class='111' value='111' /><input type='radio' class='12'  value='12' /><input type='radio' class='21' value='21' /><input type='radio' class='3' value='3' />");
    var i3 = $("<input type='radio' class='1111' value='1111' /><input type='radio' class='121'  value='121' /><input type='radio' class='13' value='13' /><input type='radio' class='31' value='31' /><input type='radio' class='22' value='22' /><input type='radio' class='4' value='4' />");
    var i4 = $("<input type='radio' class='11111' value='11111' /><input type='radio' class='122'  value='122' /><input type='radio' class='212' value='212' /><input type='radio' class='23' value='23' /><input type='radio' class='32' value='32' /><input type='radio' class='14' value='14' />");
    var i5 = $("<input type='radio' class='111111' value='111111' /><input type='radio' class='123'  value='123' /><input type='radio' class='132' value='132' /><input type='radio' class='213' value='213' /><input type='radio' class='222' value='222' /><input type='radio' class='33' value='33' /><input type='radio' class='24' value='24' />");
    b.append(i1); 
```

我怎样才能使这个追加增量i1 i2 i3 i4 ...

我要点击第一个“+1”显示两个选项是i1。第二次点击“+1”显示i2。和 i3 i4 i5 i6...

并单击“-1”这个 i1.remove() i2 i3 删除...

并在“+1”之后上传/插入开关有问题..

*对不起，我的英语不好。*

[这是一个工作小提琴](http://jsfiddle.net/huZzq/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:58:52.780

将对象放在某个数组中并使用`each`循环遍历它们。

```
 var ix = [];
   ix.push( $("<input type='radio' class='11' value='11' /><input type='radio' class='2' value='2' />"));
   ix.push( $("<input type='radio' class='111' value='111' /><input type='radio' class='12'  value='12' /><input type='radio' class='21' value='21' /><input type='radio' class='3' value='3' />"));
   ix.push( $("<input type='radio' class='1111' value='1111' /><input type='radio' class='121'  value='121' /><input type='radio' class='13' value='13' /><input type='radio' class='31' value='31' /><input type='radio' class='22' value='22' /><input type='radio' class='4' value='4' />"));

$.each(ix, function(index, obj) { 
  b.append(obj);
}); 
```

# javascript - IE10 在 iframe 中使用 BLOB url

> ID：14135652
> 
> 赞同：0
> 
> 时间：2013-01-03T08:57:46.000
> 
> 标签：javascript, html, internet-explorer-10

我正在创建一个 BLOB url 并将这个 url 分配给 iframe 的位置。在 Firefox 和 Chrome 中，这没有问题，在 IE10 中，BLOB url 的内容不会显示在 iframe 中。在 IE10 调试器中，我可以看到，BLOB url 的创建没有问题。

```
var test =
{
   init: function()
   {
      var parts = ["<html><body>test</body></html>"];
      var myBlob = new Blob(parts, {"type":"text\html"}); 
      var blobUrl = URL.createObjectURL(myBlob);

      document.getElementById("test").contentWindow.location = blobUrl;
   }
}

window.addEventListener("DOMContentLoaded", test.init, true); 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:54:02.050

请尝试对每个 BlobBuilder 和 Blob 构造函数使用特征检测。

```
if (typeof Blob !== "undefined") {
   // use the Blob constructor
} else if (window.MSBlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder) {
   // use the supported vendor-prefixed BlobBuilder
} else {
   // neither Blob constructor nor BlobBuilder is supported
} 
```

另一个技巧是使用`URL.createObjectURL(blob)`相对于`window`：

```
var blobUrl = window.URL.createObjectURL(myBlob); 
```

IE对此很明智！也许这有帮助！

# delphi - ICS、WSocketServer 和同步

> ID：14135654
> 
> 赞同：1
> 
> 时间：2013-01-03T08:58:09.633
> 
> 标签：delphi, synchronization, internet-component-suite

有人可以告诉我：如果我使用 WsocketServer 并且程序如下所示：

```
 procedure TClientConnection.ConnectionDataAvailable(Sender: TObject;  Error: Word);
   var
   begin
   //code here
   end; 
```

其中 TClientConnection 类从 TWSocketClient 类下降，当我想使用特殊类型的同步时：

1.  建立与数据库的连接并修改数据，

2.  使用和修改 vcl 组件，例如 Tmemo 的类似内容，

3.  使用全局变量，例如全局数组等。

当 10-20 个客户端同时处于连接中并且它们通过 ConnectionDataAvailable 事件发送操作数据的命令时，以避免应用程序崩溃、死锁等？

非常感谢您的回答

阿尔蒂克

# java - 使用spring和java循环遍历文件中的所有属性

> ID：14135655
> 
> 赞同：5
> 
> 时间：2013-01-03T08:58:11.283
> 
> 标签：java, spring, properties

通常，当我知道属性名称时，我会使用注释填充字段，如下所示：

```
@Value("${myproperties.myValue}")
private String myString 
```

但是，我现在想遍历文件中的所有属性，当它们的名称未知时，并在那里存储值和名称。spring 和 java 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-03T10:29:01.390

实际上，如果您只需要从文件中读取属性而不需要在 Spring 的属性占位符中使用这些属性，那么解决方案很简单

```
public class Test1 {
    @Autowired
    Properties props;

    public void printProps() {
        for(Entry<Object, Object> e : props.entrySet()) {
            System.out.println(e);
        }
    } 
```

...

```
<util:properties id="props" location="/spring.properties" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:05:17.937

我找不到比这更简单的解决方案

```
class PropertyPlaceholder extends PropertyPlaceholderConfigurer {
    Properties props;

    @Override
    protected Properties mergeProperties() throws IOException {
        props = super.mergeProperties();
        return props;
    }
}

public class Test1 {
    @Autowired
    PropertyPlaceholder pph;

    public void printProps() {
        for(Entry<Object, Object> e : pph.props.entrySet()) {
            System.out.println(e);
        }
    }

    ... 
```

...

```
<bean class="test.PropertyPlaceholder">
    <property name="locations">
        <value>/app.properties</value>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:41:57.320

该`@Value`机制通过`PropertyPlaceholderConfigurer`which 又是 a起作用`BeanFactoryPostProcessor`。它使用的属性不会在运行时公开。请参阅[我以前的答案](https://stackoverflow.com/a/10823326/342852 "如何从 ApplicationContext 对象中获取属性值？ （不使用注释）")以获得可能的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-12T22:33:26.963

[使用枚举循环遍历属性](http://www.java2s.com/Tutorial/Java/0140__Collections/UsingEnumerationtoloopthroughProperties.htm)

# jsf - 消息未显示在模态面板上

> ID：14135660
> 
> 赞同：1
> 
> 时间：2013-01-03T08:58:48.900
> 
> 标签：jsf, richfaces, messages

我在使用 Spring Webflow 和 Richfaces 的模式面板上显示消息时遇到问题。在我的操作中发布到消息上下文的消息，没有组件 ID。这在我的主页上工作正常，但如果我打开`rich:modalPanel`并单击一个按钮，则不会显示消息。

谁能给我一个提示为什么会发生这种情况？模态面板不支持吗`<rich:messages global="true"/>`

我的按钮看起来像：

```
<a4j:commandButton 
    id="add"
    action="add"
    value="#{resourceBundle['button.add']}"
    reRender="adPopupPanel"/> 
```

我的消息标签如：

```
<rich:messages globalOnly="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T12:47:33.327

将属性添加到您的消息标签，例如**showSummary**和**ShowDetail**并将它们设置为 true。

# c# - 当我单击 WPF 中的按钮时，如何更改矩形按钮背景图像？

> ID：14135662
> 
> 赞同：1
> 
> 时间：2013-01-03T08:58:53.327
> 
> 标签：c#, wpf

通常，我可以将矩形的背景图像更改为以下代码：

```
ImageBrush brush1 = new ImageBrush();
BitmapImage image = new BitmapImage(new Uri(System.IO.Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName) + "\\images\\image\\MessageEtkileşim.png"));
brush1.ImageSource = image;
renctangle.Fill = brush1; 
```

但是当我将按钮设置为 renctangle 时，我不会更改按钮背景。我尝试了下面的代码但没有用。

```
ImageBrush brush1 = new ImageBrush();
BitmapImage image = new BitmapImage(new Uri(System.IO.Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName) + "\\images\\image\\MessageEtkileşim.png"));
brush1.ImageSource = image;
renctanglebutton.Background = brush1; 
```

# asp.net-mvc - html.action方法的html属性有什么用

> ID：14135665
> 
> 赞同：0
> 
> 时间：2013-01-03T08:59:08.417
> 
> 标签：asp.net-mvc, html.actionlink

我是 MVC 新手，在 asp.net 中使用 MVC 2.0。

这是 stylesheet1.css 的内容：

```
.h1{color:Red;} 
```

这是 display.aspx 的内容：

```
< head runat="server">
<## Heading ##link href="../../Content/StyleSheet1.css" rel="stylesheet" type="text/css" />
< /head> 
<## body>
<## h1 class="h1">Hiiiiiiiiiiiiiiiii  <## /h1>
<## /body> 
```

这是 index.aspx 的内容：

```
##<%= Html.ActionLink("Move to display.aspx","display","home",new {id=1}, new 
{@class="h1"}) %>

##<%= Html.ActionLink("Move to display.aspx", "display")%> 
```

我的问题是方法上的`htmlattributes`参数有什么用，`html.actionlink`因为我发现上面的链接都给出了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:28:18.737

可能您的操作链接呈现如下内容：

```
<a href="home/display/1" class="h1">Move to display.aspx</a>

<a href="display">Move to display.aspx</a> 
```

它们之间的区别在于第一个将 css 类设置为`h1`样式类（而不是标签），然后将 1 作为 url 上的 id 参数传递给家庭控制器上的显示操作方法。第二个是显示动作方法（如果它在家庭控制器的视图中，它将进入家庭控制器的显示动作方法），它没有设置任何 css 类。两个操作链接都将文本呈现为`Move to display.aspx`. 如果您没有 h1 类设置的 css，则这种情况下的 htmlAttributes 没有区别。

## 你能做什么

首先，在您的 css 文件中创建一个具有有效名称的样式表，如下所示：

```
.display {
    color: blue;
    /* other css properties*/
} 
```

`class`在您看来，使用在属性上设置的此样式表呈现链接：

```
<%=Html.ActionLink("Move To Display", "Display", "Home", new { id = 1 }, new { @class="display" }) %> 
```

## 关于 htmlAttributes

htmlAttributes 参数是一个对象，其中包含要为元素设置的 HTML 属性。例如，如果您想在输出链接中添加一个 css 类，您可以通过此参数添加此属性，例如`rel`, `title`, `tabindex`, javascript 事件等`onclick`。

您在方法中有很多重载`Html.ActionLink`。您不需要传递此参数，但如果您需要具有此参数的重载，您可以只传递，`null`并且不会在您的 html 中输出任何内容。如果你这样做：

```
@Html.ActionLink("Text Link", "Action", "Controller", new { id = 5 }, new { @class = "button", title = "Some Title Content", rel = "10" }) 
```

如果将是以下签名方法：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    Object routeValues,
    Object htmlAttributes
) 
```

它会渲染

```
<a href="Controller/Action/5" class="button" title="Some Title Content" rel="10">Text Link</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:39:00.887

您`h1`分配给链接的类被浏览器的默认样式表覆盖。（如果您想了解这方面的详细信息，请阅读[css 特异性）。](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

您需要做的就是将您的 css 类定义更改为

```
a.h1{color:Red;} 
```

（注意`a`定义前面的）

现在这个链接中的文字：

```
<%= Html.ActionLink("Move to display.aspx","display","home",new {id=1}, new 
{@class="h1"}) %> 
```

将是红色的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:18:28.097

如果您进行搜索，Google 上有大量文章，例如：

[在 Html.ActionLink 上使用 CSS](http://www.devcurry.com/2011/03/aspnet-mvc-use-css-on-htmlactionlink.html)

[ActionLink html属性](https://stackoverflow.com/questions/4108943/actionlink-htmlattributes)

[MVC HTML 助手](http://www.w3schools.com/aspnet/mvc_htmlhelpers.asp)

希望这些对你有用。

# javascript - 如何使用 jquery 更改日期格式

> ID：14135667
> 
> 赞同：0
> 
> 时间：2013-01-03T08:59:16.570
> 
> 标签：javascript, jquery, datepicker

我有一个 .ctp 页面。其中有一个按钮可以加载 div。

在那个加载的 div 中有一些日期选择器..

日期选择器已正确加载。但是当我从日期选择器中选择时，我需要为每个日期添加 6 个月。

这是我的代码：

```
<script type="text/javascript">
    $(function() {
        var cnt = $("#cnt").val();
        for(var i =0;i<cnt;i++){
            $( "#date_"+i ).datepicker({showButtonPanel: true, changeMonth: true, changeYear: true, minDate: "0", maxDate: "+10Y",dateFormat: "dd/mm/yy",
                         onSelect: function(dateText, instance) {
                        date = $.datepicker.parseDate(instance.settings.dateFormat, dateText, instance.settings);
                        date.setMonth(date.getMonth() + 6);
                        alert(date);
                    }
            });
            $( "#format" ).change(function() {
                $( "#date_"+i ).datepicker( "option", "dateFormat", $( this ).val() );
            });
        }
    });
</script> 
```

在这里，当我从 id `date_0`datepicker 中选择一个日期时。然后它将日期显示为`Tue Jul 30 2013 00:00:00 GMT+0530 (India Standard Time)`。

但我需要提醒一下`30/7/2013`。

我怎样才能做到这一点？

添加的日期正确但日期格式需要更改？给我一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:22:53.827

jQueryUI 日期选择器有一个内置的日期格式化函数，称为[`$.datepicker.formatDate`](http://docs.jquery.com/UI/Datepicker/%24.datepicker.formatDate).

```
onSelect: function(dateText, instance) {
    var date = $(this).datepicker('getDate');
    date.setMonth(date.getMonth() + 6);
    var str = $.datepicker.formatDate("dd/mm/yy", date);
    alert(str);
} 
```

请参阅上面如何使用从日期选择器`$(this).datepicker('getDate')`中提取当前`Date`对象。无论其当前格式如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:03:25.970

```
//getter
var dateFormat = $( ".selector" ).datepicker( "option", "dateFormat" );
//setter
$( ".selector" ).datepicker( "option", "dateFormat", 'yy-mm-dd' ); 
```

这些对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:04:43.653

[http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3](http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3)查看这篇文章。真的很棒。

**[Moment.js](http://momentjs.com)**

它是一个用于解析、操作和格式化日期的轻量级 (3.7 KB) JavaScript 日期库。

```
var a = moment([2010, 1, 14, 15, 25, 50, 125]);
a.format("dddd, MMMM Do YYYY, h:mm:ss a"); // "Sunday, February 14th 2010, 3:25:50 pm"
a.format("ddd, hA");                       // "Sun, 3PM" 
```

# jquery - 在 pginput 中按下 [enter] 时如何获取事件

> ID：14135670
> 
> 赞同：1
> 
> 时间：2013-01-03T08:59:20.507
> 
> 标签：jquery, jqgrid

这个问题与[这个](https://stackoverflow.com/questions/14118444/cant-get-the-current-page-as-parameter-when-the-next-button-is-clicked)问题有关

当用户将页码插入`pginput`框中并按下回车键时，我试图将页面作为参数获取。

我已经有了提醒我并将参数传递给控制器​​的代码。我需要的是一个小线索，当光标在`pginput`框中时按下回车键时如何执行代码。

是否可以？

编辑

最后代码：

```
onPaging: function(pgButton){ 
            //var status = returnUserStatus();
            window.alert("enter pressed \n page: " + page);
            if(pgButton=="next_pager"){ 
                var page = $('#userslist').getGridParam("page");
                window.alert("next clicked! \n page: " + page); 
                //loadUsers(userStatus, page);
            } 
            if(pgButton=="prev_pager"){ 
                var page = $('#userslist').getGridParam("page");
                window.alert("prev clicked! \n page: " + page); 
                //loadUsers(userStatus, page);
            } 
            if(pgButton=="last_pager"){ 
                var page = $('#userslist').getGridParam("page");
                window.alert("last clicked! \n page: " + page); 
                //loadUsers(userStatus, page);              
            }
            if(pgButton=="first_pager"){ 
                var page = $('#userslist').getGridParam("page");
                window.alert("first clicked! \n page: " + page); 
                //loadUsers(userStatus, page);
            }
        }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:01:38.317

```
$("#pginput").keypress(function(e)
 {
  if(e.keyCode==13)//pressing `Enter`
  {
   //do something
  }
   e.preventDefault();
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:01:57.443

试试这个

```
 onPaging: function(pgButton){ 
                                //var status = returnUserStatus();

                                if(pgButton=="next_pager"){ 
                                    var page = $('#userslist').getGridParam("page");
                                    window.alert("next clicked! \n page: " + page); 
                                    //loadUsers(userStatus, page);
                                } 
                                else if(pgButton=="prev_pager"){ 
                                    var page = $('#userslist').getGridParam("page");
                                    window.alert("prev clicked! \n page: " + page); 
                                    //loadUsers(userStatus, page);
                                } 
                                else if(pgButton=="last_pager"){ 
                                    var page = $('#userslist').getGridParam("page");
                                    window.alert("last clicked! \n page: " + page); 
                                    //loadUsers(userStatus, page);              
                                }
                                else if(pgButton=="first_pager"){ 
                                    var page = $('#userslist').getGridParam("page");
                                    window.alert("first clicked! \n page: " + page); 
                                    //loadUsers(userStatus, page);
                                }else {
                                    window.alert("enter pressed \n page: " );
                                }
                            }, 
```

# jquery - 在 JSON 对象上加速 Twitter Bootstrap 的 Typeahead

> ID：14135672
> 
> 赞同：1
> 
> 时间：2013-01-03T08:59:39.987
> 
> 标签：jquery, twitter-bootstrap, autocomplete

所以，我正在使用 Twitter Bootstrap 的 Typeahead 启动一个字典网络应用程序。字典对象很大（5000 个条目）。在我当前的代码下

```
$('#dictionary').typeahead({source: function(query, process){

    $.getJSON('dictionary.json', function(data){
        dict = data;
        var words = _.keys(dict);
        process(words);
    });

}, minLength: 2}); 
```

每次访问 typeahead 元素（#dictionary）时，我都会执行一次。虽然一旦条目出现在搜索框中，这会使查询变得非常快，但它会使 typeahead 几乎太慢而无法工作，因为获取 dictionary.json (1+ MB) 并解析它需要很长时间。

显然这种策略是错误的。

这就是我的想法： 1\. 将 get 放入预加载变量中，并在 dictionary.json 加载后接受加载的页面。2\. 仅使用 dictionary.json 中的键值创建一个单独的数组，并通过 get 预加载该数组（这会更小更快）。

我很好，负载需要更长的时间。我很好，搜索需要更长的时间。但是从 UI 的角度来看，让预先输入的自动完成需要很长时间是行不通的。显然，谷歌等人的大孩子。有一个窍门：谷歌预加载时间不会太长，并且在自动完成工作的同时搜索速度很快。

那么，你们如何看待我上面概述的想法？你有什么其他的建议？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:26:36.620

也许让您的后端脚本处理输入查询并返回较短的数据列表。

通过引导程序传递查询输入，服务器代码可以根据目前收到的输入返回一个较短的列表。

# java - 评估数学表达式 - 语法

> ID：14135674
> 
> 赞同：0
> 
> 时间：2013-01-03T08:59:44.767
> 
> 标签：java, class

**评估表达式的正确语法是什么？**

```
public double evaluate(){
    String ans = (expressionOne.getValue())+""+(SignOperator.getName())+""+expressionTwo.getValue()+"";

    return Double.parseDouble(ans);
} 
```

例如 expressionOne 可以是 X，其值为 5.5，而 expressionTwo 例如可以是 Y，其值为 9.0。当我试图评估某个表达式时，我得到：
线程“main”中的异常 java.lang.NumberFormatException：对于输入字符串：“5.5+9.0”

第二部分是当我想打印我创建的一些表达式时 toString()

```
public String toString() {
    String ans = expressionOne.toString()+""+SignOperator.getName()+""+expressionTwo.toString()+"";
    return ans;
} 
```

例如：

```
 Variable x = new Variable ('x',5.5);
    Variable y = new Variable ('y', 3.5);
    Constant  nine= new Constant (9.0);
    Operator plus=new Operator('+');

    BinaryExpression xPy = new BinaryExpression(x, plus, y);
    BinaryExpression xP9 = new BinaryExpression(x, plus,nine); 
```

当我打印 xPy 时会给我 x+y。当我打印 xP9 - 它会给我 x+9 （因为九是恒定的）。
我如何在一个 toString 中检查表达式是常量（只是一个数字）还是一个变量（如示例中） - 如何检测它？.

**编辑**
如您所见，有两种 BinaryExpression - 其中一种 xPy - x 和 y 是两个变量，如果我想评估它们，它会给我例如（ 3.0+5.0 ）但如果我将打印它们它将给我 x+y，对于第二个示例 xP9 - 如果我将评估它将给我 (3.0+9.0) 但如果我将打印它们它将给我 (x + 9.0) 因为九是常数（见问题） .

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:03:26.587

对于评估，您需要评估自己，`Double.parseDouble()`不会为您评估表达式然后返回结果

`Double.parseDouble()`接受一个可表示为双精度的字符串（您知道“1223.456”确实是一个双精度值，它是字符串形式，而“123.45+153.4”不是因为它包含使其无效的双精度值的“+”字符）

***我如何在一个 toString 中检查表达式是常量（只是一个数字）还是一个变量***

您可以使用`Character.isDigit()`方法知道表达式是数字（数字）还是变量（非数字）

[请参阅`Character`类 API 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:08:23.633

为什么要创建一个字符串来描述 evaluate() 中的操作？你应该在那里对双打进行操作。

我建议在类 Operator 中添加一个方法：

```
double apply(double left, double right) 
```

具有适当的实现类。

```
Operator plus = new Operator('+')
{
    double apply(double left, double right) { return left + right; }
}; 
```

然后，您只需在评估方法中调用 apply

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:11:50.753

我希望这可以帮助您在哪里尝试评估整个表达式并为您提供结果。

我了解您正在尝试编写一个表达式评估器引擎​​，您可以在其中使用下面帖子中使用的脚本引擎。

[使用脚本引擎评估字符串表达式](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T09:09:54.063

如果您想制作算术评估器，请查看`infix`和符号。`postfix`例如：

在修复符号中：

```
y = 4 + 9 + 3 / 6 * 5; 
```

后修复符号：

```
y = 4 9 3 6 / 5 * + +; 
```

**参考** [http://scriptasylum.com/tutorials/infix_postfix/algorithms/infix-postfix/index.htm](http://scriptasylum.com/tutorials/infix_postfix/algorithms/infix-postfix/index.htm)

# ruby - gem:koala: 此授权码已过期。[HTTP 400]：

> ID：14135676
> 
> 赞同：2
> 
> 时间：2013-01-03T08:59:51.810
> 
> 标签：ruby, heroku, koala

为什么这在我的本地机器上有效，但在 heroku 服务器上无效？

```
 def set_access_token
    # get the access token from wherever we can
    @access_token ||= (set_oauth_data && @oauth_access_token) || (set_facebook_cookies && @cookie_access_token)
  end 
```

错误：

```
 `get_token_from_server'
2013-01-03T08:54:54+00:00 app[web.1]: Koala::Facebook::OAuthTokenRequestError - type: OAuthException, code: 100, message: This authorization code h
as expired. [HTTP 400]: 
```

# php - 在php中使用变量作为关联数组值的错误

> ID：14135681
> 
> 赞同：2
> 
> 时间：2013-01-03T09:00:08.590
> 
> 标签：php, associative-array

出于某种原因，这给了我以下错误`syntax error, unexpected T_VARIABLE`：：

```
 $mysql = json_decode(getenv("VCAP_SERVICES"));
 $mysql = $mysql["mysql-5.1"][0]["credentials"];

class DATABASE_CONFIG {

    public $default = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'port' => $mysql['port'],  // <-- Line with error
        'login' => $mysql['username'],
        'password' => $mysql['password'],
        'database' => $mysql['name'],
        'prefix' => ''
        //'encoding' => 'utf8',
    );

    public $test = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'user',
        'password' => 'password',
        'database' => 'test_database_name',
        'prefix' => '',
        //'encoding' => 'utf8',
    );
} 
```

我知道您可以将变量用作数组中的值，那么发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:04:14.030

看起来您正在尝试将属性的默认值设置为变量。

你不能这样做，甚至在一个数组内也不能。这是 PHP 的解析器糟糕的一半，PHP 缺少适当的错误消息的四分之一，还有一点点理智。

您需要在构造函数中执行此操作，而不是通过传入`$mysql`：

```
$config = new DATABASE_CONFIG($mysql);

class DATABASE_CONFIG {

    public $default = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'port' => null,
        'login' => null,
        'password' => null,
        'database' => null,
        'prefix' => ''
        //'encoding' => 'utf8',
    );

    public function __construct($mysql) {
        $this->default['port'] = $mysql['port']; // etc
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:04:17.867

$mysql 在类中没有作用域。您需要将其作为参数注入到类构造函数中，然后为类属性定义数组值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:04:23.470

您正在尝试引用在该类*之外*定义的类中的变量。

PHP 不知道`$mysql`该类定义中的内容。

# grails - Grails 可搜索插件按映射域搜索

> ID：14135684
> 
> 赞同：2
> 
> 时间：2013-01-03T09:00:34.940
> 
> 标签：grails, query-builder, grails-searchable

我们正在使用 grails 2.1.1 和 grails searchable-plugin 0.6.4。

我们想使用 searchable 搜索具有 belongsTo 关联的域。

假设我们有一个域

```
class A {
  static belongsTo= [b:B]
} 
```

现在要使用 b 实例访问 A，我们将标准编写为

```
A.createCriteria.list{
   eq('b',B.get(1))
} 
```

现在如何使用可搜索的查询生成器编写类似的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:35:39.563

看看下面的代码（类 User 与**A**和**B**具有相同的关系）。我用这种方式来改变默认搜索的行为：

```
def searchResult = searchableService.search({
  must {
      queryString(params.q)
      must(term('deleted', "false"))
      must(term('status', STATUS_NEW))
      if (loggedUser){
          must(term('User.settings.countryCode', loggedUser.countryCode))
      }
  }
}, params, escape: false, max: 50) 
```

请注意，对象必须标记为**可搜索**。上面的编码对我来说很好。请参阅[可搜索插件文档](http://grails.org/plugin/searchable)以获取更多信息。

# java - 我的线程恰好循环了 43 次然后抛出异常

> ID：14135685
> 
> 赞同：0
> 
> 时间：2013-01-03T09:00:49.230
> 
> 标签：java, audio

我想不通。我的代码完美地运行了 43 次，然后`LineUnsupportedException`当`Clip`对象尝试重新打开该行时我得到一个。它是一个节拍器，所以精确的计时很重要，我已经把代码设计成一个主要的功能点。我创建了一个`Clip[]`对象`Clip`，一个小节中有多少节拍，我在我的while循环中循环，每个小节关闭并刷新剪辑并定义一个新`Clip[]`的剪辑对象，如果我不关闭该行不时重置音频将停止播放的所有内容，我不确定剪辑 isActive() 方法是否返回 false 或发生了什么，但该解决方案似乎已经解决了问题，直到我开始收到此异常，任何想法可能导致它？

这是我从最后一个工作循环到异常的输出......

0

打钩...

计数:: 42

循环完成时间：6

节拍持续时间应为：499

剩余睡眠时间：493

1

打钩...

数:: 43

无法获得线路

java：/build/buildd/openjdk-6-6b24-1.11.5/build/../pulseaudio/src/native/org_classpath_icedtea_pulseaudio_Stream.c:720：Java_org_classpath_icedtea_pulseaudio_Stream_native_1pa_1stream_1cork：断言“流”失败。

以及当前涉及该线程的两个类...

股票代码.java

```
package com.timer;

import java.io.IOException;

 import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;

public class Ticker extends Thread {

private App app;

private String[] soundFiles;

private Ticker() {
}

public Ticker(App app) {
    this.app = app;
    soundFiles = new String[app.getBeatsPerMeasure()];
}

private AudioInputStream stream;

private Clip[] ticks;
AudioFormat format;
DataLine.Info dataLineInfo;

public String setFileNames() {
    for (int i = 0; i < app.getBeatsPerMeasure(); i++) {
        soundFiles[i] = "firstBeatCut.au";
    }
    return "";
}

public String loadArray(int... iArray) {
    if (iArray.length != app.getBeatsPerMeasure()) {
        return "Sorry there was an error.";
    }
    for (int i = 0; i < iArray.length; i++) {
        iArray[i] = i;
        System.out.println(iArray[i]);
    }
    return "";
}

public void tick() {
    long difference, timeTaken, timeAllowedToSleep, before, after;
    long idealTime;

    int i = 0;
    int count = 0;

    ticks = new Clip[app.getBeatsPerMeasure()];

    while (app.isTicking()) {
        System.out.println("Tick...");

        before = System.nanoTime();

        try {

            stream = AudioSystem.getAudioInputStream(this.getClass()
                    .getResource("./firstBeatCut.au"));

        } catch (UnsupportedAudioFileException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (ticks[i] != null && ticks[i].isRunning()) {
            ticks[i].stop();
            if (ticks[i].isActive()) {
                ticks[i].close();
            }
        }

        count++;
        System.out.println("COUNT:: " + count);
        try {
            ticks[i] = (Clip) AudioSystem.getClip();
            if (!ticks[i].isOpen()) {
                ticks[i].open(stream);
            }
        } catch (LineUnavailableException e) {
            System.out.println(e.getMessage());

        } catch (IOException e) {
            e.printStackTrace();
        }
        ticks[i].setMicrosecondPosition(0);

        if (ticks[i].isOpen()) {
            ticks[i].setMicrosecondPosition(0L);
            ticks[i].start();
        } else {
            try {
                ticks[i].open(stream);
            } catch (LineUnavailableException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            ticks[i].setMicrosecondPosition(0);
            ticks[i].start();
        }

        idealTime = app.calculateSleep(app.getBPM())
                - ticks[i].getMicrosecondLength();

        after = System.nanoTime();

        timeTaken = (after - before);
        difference = (idealTime - timeTaken);
        System.out.println("Loop completed in: " + (timeTaken / 1000000L)
                + "\nBeat Duration should be: " + (idealTime / 1000000L)
                + "\nTime left to sleep: " + (difference / 1000000L));

        timeAllowedToSleep = difference;

        if (timeAllowedToSleep > 0) {
            try {
                Thread.currentThread().sleep(timeAllowedToSleep / 1000000L);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        System.out.println(i);

        stopTick(ticks[i], ++i);
        if (i == app.getBeatsPerMeasure()) {
            i = 0;
        }
    }
}

public void closeTick(Clip tick) {
    tick.close();
}

public void stopTick(Clip tick, int index) {
    tick.stop();
    if (index == 4) {
        closeTick(tick);

        try {
            tick = AudioSystem.getClip();
        } catch (LineUnavailableException e) {
            e.printStackTrace();
        }
    }
}

public void play(Clip tick) {
    tick.setMicrosecondPosition(0L);
    tick.start();
}

public long calculateTimeAllowedToSleep(long sTime, long time) {
    long diff = time - sTime;
    long timeToSleep;
    long ssTime = 60000 / 120;
    timeToSleep = ssTime - diff;
    return timeToSleep;

}

} 
```

ActionHandler.java

```
package com.timer;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class ActionHandler implements ActionListener, ChangeListener {

private App app;
Ticker ticker;
Thread t1;
private int beatsInMeasure;
private boolean ticking;

public ActionHandler(final App app) {
    this.app = app;
    this.ticker = new Ticker(app);
    beatsInMeasure = app.getTimeSignature()[0];
    ticking = app.isTicking();
    ticker.loadArray(0,1,2,3);
}

private Runnable doTick = new Runnable() {
    public void run() {
        while (app.isTicking()) {

            ticker.tick();

        }
    }
};

public void actionPerformed(ActionEvent e) {
    JButton b = (JButton) e.getSource();
    if (b == app.getBtnStart()) {
        if (b.getText().equalsIgnoreCase("Start")) {
            app.setStartText("Stop");
            app.resetEnabled(false);
            ticker.setFileNames();
            app.setTicking(true);
            t1 = new Thread(doTick);
            t1.start();
        } else {
            app.setStartText("Start");
            app.resetEnabled(true);
            app.setTicking(false);
            app.setTicking(false);
            try {
                t1.join();
            } catch (InterruptedException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    } else if (b == app.getBtnReset()) {
        app.reset();
    }
}

@Override
public void stateChanged(ChangeEvent e) {
    JSpinner sp = (JSpinner) e.getSource();
    SpinnerNumberModel model = app.getModel();
    if (sp.getValue() != null) {
        app.calculateSleep(Integer.parseInt(String.valueOf(
                sp.getModel().getValue()).toString()));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:06:25.977

如果您打开一条线，请在每次完成后立即关闭它。我从 Ticker 的 stop 方法中删除了 if 语句，它运行良好。我要睡觉了，感谢所有评论的人。

# python - 我们可以在这个 python 类声明中调用 foo 吗？

> ID：14135698
> 
> 赞同：0
> 
> 时间：2013-01-03T09:01:41.507
> 
> 标签：python, class, methods

> **可能重复：**
> [Python 中的类方法差异：绑定、未绑定和静态](https://stackoverflow.com/questions/114214/class-method-differences-in-python-bound-unbound-and-static)

```
class A:
    def foo():
        print 'hello world'
    def foo1(self):
        self.foo()

a = A()
a.foo1() 
```

我正在考虑使用该类私有的一些功能。我想唯一的方法是按照约定：在该函数名前面添加一个 '_' 前缀，并且仍然将第一个参数作为`self`

但是`foo()`完全没用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:05:45.217

对于所有重要的用途，是的。您可以通过方法上的各种属性获取原始函数，但在类中包含类似的东西仍然没有什么意义。

```
>>> A.foo.im_func()
hello world 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:04:39.677

尝试调用`A.foo()`. 它会输出`'hello world'`.

请注意，这仅适用于 Python 3，因为在 Python 2 中它会引发`TypeError`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:06:39.420

是的，它几乎没用。在 Python 2.x 中，调用它而不抛出异常的唯一方法是从类的内部提取函数，然后调用它。在 Python 3.x 中（假设您转换了`print`），您可以`A.foo()`直接调用。

如果`foo()`真的不需要`self`参数，那么它就不需要是一个方法：只需让它成为与定义类相同的模块中的函数。

# ruby-on-rails - 我如何最好地代表一个孩子是特例的一对多关系？

> ID：14135700
> 
> 赞同：6
> 
> 时间：2013-01-03T09:01:44.550
> 
> 标签：ruby-on-rails, database, cardinality

我有一个具有两个实体之间的父子关系的模式。它是一对多的，所以自然会实现为：

```
table Parents
  id

table Children
  id
  parent_id 
```

但是，我还需要将其中一个孩子视为特例（我们称其为“提升”孩子）。我可以想到几种方法来做到这一点，包括：

只需将属性放在`Children`：

```
table Parents
  id

table Children
  id
  parent_id
  is_promoted 
```

这显然是有缺陷的，因为数据库不能保证一致性（至少不能通过常规外键约束）

在表上创建外键`Parents`：

```
table Parents
  id
  promoted_child_id

table Children
  id
  parent_id 
```

这是我的第一个倾向，但它确实具有循环依赖的明显缺点，因此可能不是最优的。

`Children`我能想到的另一种选择是在桌子上放第二个外键：

```
table Parents
  id

table Children
  id
  parent_id
  promoted_parent_id 
```

这允许我放置一个唯一的索引，从而强制数据库的一致性。这样做的一个问题是，可能存在一种无意义的关系，其中父母 A 的孩子列为父母 B 的提升。

我能想到的最后一个选项是创建一个中间表，例如：

```
table Parents
  id

table Children
  id

table ParentChildRelationship
  parent_id
  child_id
  is_promoted 
```

`parent_id`同样，我可以在+上声明一个唯一约束`is_promoted`，强制一致性。我对此有点矛盾，因为将关系提升为一个完整的实体似乎有点矫枉过正，尽管我在它上面加上属性的那一刻（本质上`is_promoted`是），我想这是有道理的。

我想知道您认为处理此问题的规范方法是什么。特别是，我使用的是 Rails，所以这可能会影响最实用的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:18:31.127

我没有任何 Rails 经验，但在处理 1 到多个关系的默认值时遇到过类似的情况，并且通常对 db 模式使用类似这样的东西：

```
table Parents
  id

table Children
  id
  parent_id
  FK (parent_id) references Parents(id)

table PromotedChildren
  child_id
  parent_id
  FK (child_id, parent_id) references Children(id, parent_id)
  UNIQUE Key parent_id 
```

## 编辑

回答完这个问题后，我开始思考为什么我更喜欢这种表示而不是其他表示，所以我做了更多的研究并给予了更多的思考：

```
table Parents
  id

table Children
  id
  parent_id
  is_promoted 
```

如果按照 Kelvin 的建议，如果 db 忽略空值，那么 Jef 建议的对 (parent_id, is_promoted) 的唯一约束将起作用，并且可能是一个不错的选择。但是，有些人可能会争辩说，使用 null 作为 false/0 的替代是对 null 的错误使用，它有效地将字段转换为三态，即 1、0、未知。[此外 (parent_id, is_promoted](http://en.wikipedia.org/wiki/Superkey) ) 不是超级密钥，因此违反了[Domain Key Normal Form](http://en.wikipedia.org/wiki/Domain/key_normal_form)。

```
table Parents
  id
  promoted_child_id

table Children
  id
  parent_id 
```

正如您指出的那样，这可能会导致循环，并且通过将promoted_child_id 设为引用Children(id) 的FK，您仍然面临ParentA 将ParentB 的子级列为提升的数据库异常的风险。

```
table Parents
  id

table Children
  id
  parent_id
  promoted_parent_id 
```

在这里，您会遇到所描述的异常风险；在promoted_pa​​rent_id 上的唯一键也必须依赖于忽略空值的数据库；多个级联路径；作为promotion_parent_id 和parent_id 的冗余应该相同；更新 parent_id 与promoted_pa​​rent_id 不匹配的异常。

```
table Parents
  id

table Children
  id

table ParentChildRelationship
  parent_id
  child_id
  is_promoted 
```

这看起来更像是父母对孩子的多对多表示。它提出了与上述其他问题类似的问题。

至于什么对 Rails 开发最实用，我不能说。我已经使用了我提出的表示法和 Jef 的 C# 和 PHP 表示法，并没有真正注意到有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:33:46.663

`parent_id`您可以在和列上应用唯一约束`is_promoted`以确保完整性并避免您提到的其他两个解决方案的缺点。它在查询时也应该表现得很好。

# asp.net-mvc - 同一站点下的多个 IIS 应用程序的登录/注销问题

> ID：14135703
> 
> 赞同：1
> 
> 时间：2013-01-03T09:01:54.847
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authentication, iis

我在 IIS7.5 的同一个网站下有 2 个应用程序。问题如下：

1.  打开浏览器并登录第一个应用程序；
2.  打开另一个浏览器选项卡并登录第二个应用程序；
3.  第一个应用程序自动注销。

我有相同的 asp.net 身份验证数据库，但我创建了两个具有不同角色和不同 ApplicationId 的不同用户。我还在应用程序 web.config 文件的成员资格提供程序配置中设置了不同的 applicationName 属性。

你能帮我吗？对不起我的英语不好。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:27:40.650

如果 IIS 网站配置为使用基于表单的身份验证，则问题很可能是第二次登录（即不同的用户）的 cookie 覆盖了初始登录的 cookie。默认情况下，cookie 名为“.ASPXAUTH”。您应该能够通过使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的东西检查从 IIS 返回的响应标头来验证这一点。

您可以通过更改 web.config 元素中的“名称”属性来控制 IIS 用于维护会话的 cookie 名称。有关更多详细信息，请参阅[此文档](http://msdn.microsoft.com/en-us/library/1d3t3c61%28v=vs.85%29.aspx)。这部分 web.config 的示例类似于：

```
<authentication mode="Forms">
    <forms loginUrl="login.aspx" name="APP1SESS" />
</authentication> 
```

如果应用程序包含在单个单独的子文件夹中，那么您也可以使用“路径”属性来告诉浏览器仅发送该子文件夹中请求的 cookie。此处要小心，因为任何共享资源（例如*不在*子文件夹中的图像）都需要公开访问。

该`//authentication/forms`元素只能在应用程序的根级别指定。检查[此 SO 帖子](https://stackoverflow.com/questions/318816/multiple-different-authentication-settings-in-web-config)以进行讨论。

# c# - 错误：扩展器控件“AutoCompleteExtender1”不是已注册的扩展器控件

> ID：14135709
> 
> 赞同：1
> 
> 时间：2013-01-03T09:02:07.280
> 
> 标签：c#, asp.net

我在formview的insertemplate和edittemplate中使用了ajax的autocompleteextender控件，它在inserttemplate中工作正常，但是当我尝试编辑内容时，它会给出如下错误：

> 扩展器控件“AutoCompleteExtender1”不是已注册的扩展器控件。在调用 RegisterScriptDescriptors() 之前，必须使用 RegisterExtenderControl() 注册扩展器控件。

我使用了以下代码：

```
<asp:FormView ID="FV1" runat="server" DefaultMode="Insert" DataKeyNames="ID" OnItemInserting="FV1_ItemInserting"
DataSourceID="sqlds1" OnDataBound="FV1_DataBound" OnItemUpdating="FV1_ItemUpdating">
<InsertItemTemplate>
    <asp:Panel runat="server" ID="pnl1">
        <table border="0" cellspacing="0" cellpadding="0" width="100%" class="small-blocks">
            <div class="left" style="margin: 20px 10px 10px 0px;">
                <img src="images/icon-plane.png" width="25" height="21" alt="" /></div>
            <tr>
                <td>
                    list
                </td>
            </tr>
            <tr>
                <td>
                    <asp:TextBox ID="txtlist" runat="server" class="textfield-bk2" OnTextChanged="txtlist_TextChanged"
                        AutoPostBack="true"></asp:TextBox>
                    <cc1:AutoCompleteExtender ServiceMethod="Searchlist" MinimumPrefixLength="1" CompletionInterval="100"
                        EnableCaching="true" CompletionSetCount="10" TargetControlID="txtlist" ID="AutoCompleteExtender1"
                        runat="server" FirstRowSelected="true">
                    </cc1:AutoCompleteExtender>
            </tr>
        </table>
    </asp:Panel>
</InsertItemTemplate>
<EditItemTemplate>
    <asp:Panel runat="server" ID="pnl1">
        <table border="0" cellspacing="0" cellpadding="0" width="100%" class="small-blocks">
            <div class="left" style="margin: 20px 10px 10px 0px;">
                <img src="images/icon-plane.png" width="25" height="21" alt="" /></div>
            <tr>
                <td>
                    list
                </td>
            </tr>
            <tr>
                <td>
                    <asp:TextBox ID="txtlist" runat="server" class="textfield-bk2" OnTextChanged="txtFrom_TextChanged"
                        AutoPostBack="true"></asp:TextBox>
                    <cc1:AutoCompleteExtender ServiceMethod="Searchlist" MinimumPrefixLength="1" CompletionInterval="100"
                        EnableCaching="true" CompletionSetCount="10" TargetControlID="txtlist" ID="AutoCompleteExtender1"
                        runat="server" FirstRowSelected="true">
                    </cc1:AutoCompleteExtender>
            </tr>
        </table>
    </asp:Panel>
</EditItemTemplate> 
```

我应该怎么做才能解决这个问题？先感谢您。

# javascript - 构造函数或数组或 for 循环中的错误？

> ID：14135711
> 
> 赞同：1
> 
> 时间：2013-01-03T09:02:12.243
> 
> 标签：javascript

这是代码：

```
// The Person constructor
function Person(name, age) {
    this.name = name;
    this.age = age;
}

// Now we can make an array of peoples
var family = new Array();
family[0] = Person("alice", 40);
family[1] = Person("bob", 42);
family[2] = Person("michelle", 8);
family[3] = Person("timmy", 6);

// loop through our new array
for ( i=0; i < family.length; i++; ) {
    console.log(family[i].name)
}; 
```

该脚本的预期输出为：

```
alice
bob
michelle
timmy 
```

但输出是：

> 未捕获的类型错误：无法读取未定义的属性“名称”（匿名函数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:04:31.567

`new`为每个添加的关键字添加一个关键字，并在-loop中`Person`删除额外的（在 之后）`;``for``i++`

```
// Now we can make an array of people
var family = new Array();
family[0] = new Person("alice", 40);
family[1] = new Person("bob", 42);
family[2] = new Person("michelle", 8);
family[3] = new Person("timmy", 6);

// loop through our new array
for ( i=0; i < family.length; i++ ) {
    console.log(family[i].name);       // Also, added a semicolon here. Not required, but it's good practice to close your lines.
}; 
```

现在将记录：

> 爱丽丝鲍勃米
> 歇尔蒂米
> _
> _

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:05:15.543

```
// Our Person constructor
function Person(name, age) {
    this.name = name;
    this.age = age;
}

// Now we can make an array of people
var family = new Array();
family[0] = new Person("alice", 40);
family[1] = new Person("bob", 42);
family[2] = new Person("michelle", 8);
family[3] = new Person("timmy", 6);

console.info(family);
// loop through our new array
for ( i=0; i < family.length; i++ ) {
    console.log(family[i].name)
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:31:59.473

我做了这样的事情：

```
// Our Person constructor
var Person = function(name,age) {
    this.age = age;
    this.name = name;
};

// Now we can make an array of people
var family = new Array();
    family[0] = new Person("alice",40);
    family[1] = new Person("bob", 42);
    family[2] = new Person("michelle",8);
    family[3] = new Person("timmy",6);

// loop through our new array
for (var famloop in family) {
    console.log(family[famloop].name);
} 
```

# tridion - 在 Tridion 2011 SP1 中实现存储扩展时未定义命名的 bean

> ID：14135716
> 
> 赞同：3
> 
> 时间：2013-01-03T09:02:37.103
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension

我正在尝试使用以下示例实现存储扩展，

[http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx)

我创建了与上面示例中使用的名称相同的 DAO 和其他文件。创建这些文件后，我使用 eclipse 构建我的代码并将其转换为 .JAR 文件名 (cd_search_Indexer)。

1) 我将我的 jar 文件复制到我的演示文稿 tridion_home/lib 文件夹

2) 我创建了名为 search_dao_bundle.xml 的捆绑 xml，如下所示，并放置在我的 cd_storage_xml 所在的相同位置，即 tridion_home/config。

```
<?xml version="1.0" encoding="UTF-8"?>
<StorageDAOBundles>
    <StorageDAOBundle type="persistence">
        <StorageDAO typeMapping="PublishAction" class="com.tridion.storage.extension.search.JPAPublishActionDAO" />
    </StorageDAOBundle>
</StorageDAOBundles> 
```

3) 之后，我将捆绑条目添加到我的 cd_storage_conf.xml 中，如下所示：

```
<StorageBindings>
    <Bundle src="search_dao_bundle.xml"/>
</StorageBindings> 
```

在下面我创建了我的新存储类型，如下所示：

```
<Storage Type="persistence" Id="searchdb" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
    <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
    <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
        <Property Name="serverName" Value="********" />
        <!--Property Name="portNumber" Value="1433" /-->
        <Property Name="databaseName" Value="********" />
        <Property Name="user" Value="********" />
        <Property Name="password" Value="********" />
    </DataSource>
</Storage> 
```

在那之后，我在下面做了项目映射

```
<ItemTypes defaultStorageId="defaultdb" cached="false"> 
    <Item typeMapping="PublishAction" cached="false" storageId="searchdb" />
</ItemTypes> 
```

4）我重新启动了我的部署服务，在我的核心日志中出现了以下异常

```
2013-01-03 12:44:20,713 ERROR JPADAOFactory - Unable to load JPA DAO with name: PublishAction and class: com.tridion.storage.extension.search.JPAPublishActionDAO due too exception in DAO construction
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'JPAPublishActionDAO' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:527) ~[spring-beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1083) ~[spring-beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:274) ~[spring-beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198) ~[spring-beans.jar:3.0.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1087) ~[spring-context.jar:3.0.5.RELEASE]
    at com.tridion.storage.persistence.JPADAOFactory.configureBundle(JPADAOFactory.java:80) ~[cd_datalayer.jar:na]
    at com.tridion.storage.configuration.StorageFactoryConfigurationLoader.configureStorage(StorageFactoryConfigurationLoader.java:91) [cd_datalayer.jar:na]
    at com.tridion.storage.configuration.StorageFactoryConfigurationLoader.configureStorage(StorageFactoryConfigurationLoader.java:65) [cd_datalayer.jar:na]
    at com.tridion.storage.configuration.StorageFactoryConfigurationLoader.configure(StorageFactoryConfigurationLoader.java:51) [cd_datalayer.jar:na]
    at com.tridion.configuration.step.ConfigurationStepLoader.configure(ConfigurationStepLoader.java:47) [cd_core.jar:na]
    at com.tridion.storage.StorageManagerFactory.configure(StorageManagerFactory.java:139) [cd_datalayer.jar:na]
    at com.tridion.services.BaseService.<init>(BaseService.java:107) [cd_core.jar:na]
    at com.tridion.storage.StorageManagerFactory.<init>(StorageManagerFactory.java:106) [cd_datalayer.jar:na]
    at com.tridion.storage.StorageManagerFactory.reloadInstance(StorageManagerFactory.java:86) [cd_datalayer.jar:na]
    at com.tridion.storage.StorageManagerFactory.<clinit>(StorageManagerFactory.java:58) [cd_datalayer.jar:na]
    at com.tridion.storage.deploy.PageHandler.deploy(PageHandler.java:58) [cd_datalayer.jar:na]
    at com.tridion.deployer.DeploymentHandler.deploy(DeploymentHandler.java:90) [cd_datalayer.jar:na]
    at com.tridion.deployer.modules.PageDeploy.processPage(PageDeploy.java:145) [cd_deployer.jar:na]    
    at com.tridion.deployer.modules.PageDeploy.processItem(PageDeploy.java:118) [cd_deployer.jar:na]
    at com.tridion.deployer.SectionVisitor.processSection(SectionVisitor.java:83) [cd_deployer.jar:na]
    at com.tridion.deployer.SectionVisitor.processSection(SectionVisitor.java:87) [cd_deployer.jar:na]
    at com.tridion.deployer.SectionVisitor.processSection(SectionVisitor.java:87) [cd_deployer.jar:na]
    at com.tridion.deployer.SectionVisitor.processSection(SectionVisitor.java:87) [cd_deployer.jar:na]
    at com.tridion.deployer.SectionVisitor.process(SectionVisitor.java:60) [cd_deployer.jar:na]
    at com.tridion.deployer.Processor.process(Processor.java:109) [cd_deployer.jar:na]
    at com.tridion.deployer.workers.ProcessorWorker.doWork(ProcessorWorker.java:74) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.ProcessingPhase.execute(ProcessingPhase.java:73) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na]
    at com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na]
    at com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_26]
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_26]
    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26]
    at java.lang.Thread.run(Unknown Source) [na:1.6.0_26] 
```

编辑：以下是我创建 DAO、实体和接口类所遵循的步骤。

1) 打开日食 helios

2) 创建了一个名为“Storage Extension”的项目

3) 创建新文件夹“lib”并添加所有 tridion_home/lib

4）创建新包“com.tridion.storage.extension.search”

5) 添加了我的 DAO、Entity 和 Interface java 类

6) 在参考中添加了“lib”罐子

7）构建转换为jar的包（cd_storage_indexer）

8) 将构建 jar 复制到 tridion_home/lib

9）按照米海的建议休息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:09:56.160

您的类型映射错误：

```
<StorageDAO typeMapping="PublishAction" ... 
```

每个类型映射都将现有项目类型映射到该类型的（内置或自定义）DAO。A`PublishAction`不是内置项目类型，我怀疑您打算存储它们。

很可能您正在寻找替换现有项目类型之一，例如`Binary`和/或`BinaryVariant`类似于 Vinod 的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:40:20.640

这就是我为部署程序扩展配置（cd_storage_conf）所拥有的..

列出一个然后那个将用于该发布，除非它在较低级别上被覆盖。如果 storageId 定义的存储不存在，则将使用 ItemTypes 元素定义的默认存储，除非不匹配较低级别的类型映射。

```
<Publication Id="000" defaultStorageId="TridionDB" cached="false">
  <Item typeMapping="BinaryVariant" storageId="defaultCdnFile" cached="false" /> 
  <Item typeMapping="Binary" storageId="defaultCdnFile" cached="false" /> 
  </Publication>

<Storage Type="filesystem" Class="com.tridion.extensions.storage.XXX.CDNFSDAOFactory" Id="defaultCdnFile" defaultFilesystem="false">
  <Root Path="X:\XXXXX\DeployerExtension" /> 
  <Mapping PublicationId="50" BaseURL="http://XXX.com" /> 
  <Akamai Username="xxxx" Password="xxxx" /> 
  <Setting Property="https.proxyHost" Value="xxxx" /> 
  <Setting Property="https.proxyPort" Value="0000" /> 
  <Setting Property="https.proxyUser" Value="xxxx" /> 
  <Setting Property="https.proxyPassword" Value="xxxx" /> 
  <Setting Property="https.proxyDomain" Value="xx" /> 
  <Setting Property="proxySet" Value="true" /> 
  </Storage> 
```

谢谢文

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:45:02.610

Tridion 论坛用户 Pankaj Gaur 之前遇到过[同样的问题](https://forum.tridion.com/topic.asp?TOPIC_ID=7078)。

> 当我们从 Eclipse 将它们导出为 JAR 时，我们需要小心地创建类文件。要确定解决方案：在将类文件导出到 JAR 时的第一个屏幕上，确保选中“添加目录条目”选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T09:44:21.243

在上面的 Tridion 专家给出的几个 RND 和建议之后，我终于设法加载了我的 BEAN。

我没有从 Eclipse 构建 JAR，而是尝试从命令提示符 (CMD) 构建它。

转到项目的 bin 目录并在那里编写以下命令

```
jar -cvf cd_storage_extensions.jar * 
```

感谢所有专家（Nuno、Frank 和 Vinod）。

# apache - Apache2 GeoIP / mod_geoip2 自定义错误页面

> ID：14135723
> 
> 赞同：0
> 
> 时间：2013-01-03T09:02:57.453
> 
> 标签：apache, geoip

每当一个 ip 被 apache 上的 mod_geoip2 阻止时，它都会显示“Forbidden /”错误。地理 ip 阻止工作正常，但是当 ip 被阻止时是否有可能显示自定义错误页面或消息？

我看了一下广告 maxminds 文档，但没有提到任何内容。也许有人有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:21:42.643

这是示例：

```
GeoIPEnable On
GeoIPDBFile /path/to/GeoIP.dat
RewriteEngine On
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} !(US|GB|CA)$
RewriteRule ^(.*)$ /error_page.html [NC,L] 
```

希望以上规则回答您的问题

# javascript - 用于移动网络 html/javascript 的 facebook“分享按钮”

> ID：14135725
> 
> 赞同：1
> 
> 时间：2013-01-03T09:03:15.113
> 
> 标签：javascript, facebook, html, mobile-website, share-button

我想在我的移动网络应用程序中添加一个 facebook 分享按钮，用于将我的应用程序中的特定内容作为带有文本的图片等分享。

但我真的很困惑！！！

“分享按钮”是否已弃用？用什么来代替它的行为？

我在 facebook 开发者网站上阅读了很多内容，但找不到任何代码示例可以使用。

**请**帮我实现这个。欢迎任何代码！

## 这是我使用的解决方案，感谢 mrtom 解决方案（第一个选项）：

将此添加到您的 html 文件中：

```
 <a href="http://www.facebook.com/dialog/feed?app_id=your_app_id&  
link=http://developers.facebook.com/docs/reference/dialogs/&  
picture=http://fbrell.com/f8.jpg&  
name=Facebook%20Dialogs&caption=Reference%20Documentation&description=Dialogs%20provide%20a%20simple,%20consistent%20interface%20for%20applications%20to%20interact%20with%20users.&message=Facebook%20Dialogs%20are%20so%20easy!&  
redirect_uri=your_Mobile_Site_URL">share</a> 
```

您必须将`app_id`and the更改`redirect_uri`为您的。
您可以根据需要更改的其他参数

在[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)中，您可以找到您可以指定的所有属性的属性表。

询问是否有不清楚的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:44:27.043

答案取决于您想要的功能。

您可以使用提要对话框 - [https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/) - 以用户身份发布到 Facebook，即相当于用户发布状态更新

如果您拥有具有发布权限的用户访问令牌，则可以直接使用 Graph API。上面的 Feed Dialog 文档显示了如何执行此操作的示例，或查看[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)。只需连接您自己的按钮即可通过您的服务器或使用 Javascript SDK 发出请求。

您可以使用发送按钮 - [https://developers.facebook.com/docs/reference/plugins/send/](https://developers.facebook.com/docs/reference/plugins/send/) - 允许您的用户将您的内容发送给特定的朋友

或者，最后，您可以使用 sharer.php。现在找不到任何文档，但简单的谷歌搜索“Facebook sharer.php”应该可以帮助你。

# mysql - MySql::存储过程::navicat

> ID：14135730
> 
> 赞同：0
> 
> 时间：2013-01-03T09:03:44.313
> 
> 标签：mysql, stored-procedures, navicat

我在 MySql(navicat) 中有以下存储过程，但是当我添加 if st 时，我需要在更新操作后测试**RefrenceCount 。**在更新声明之后。发生语法错误

```
CREATE PROCEDURE `SP_IncDecReferenceCount`(pReferenceID int,pIncValue int)
BEGIN
update filesrefrences
set 
    filesrefrences.RefrenceCount= filesrefrences.RefrenceCount+pIncValue 
where 
        filesrefrences.ReferenceID= pReferenceID;
IF Not EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= pReferenceID and filesrefrences.RefrenceCount>0) then 
DELETE from filesrefrences WHERE filesrefrences.ReferenceID = pReferenceID;
end if 
END

[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END' at line 11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:21:33.030

你可以做

```
update filesrefrences
set 
    filesrefrences.RefrenceCount= filesrefrences.RefrenceCount+IF(pIncValue > 0,pIncValue,1)
where 
        filesrefrences.ReferenceID= pReferenceID; 
```

或者

```
update filesrefrences
    set 
        filesrefrences.RefrenceCount= filesrefrences.RefrenceCount+pIncValue
    where 
            (filesrefrences.ReferenceID= pReferenceID) AND (pIncValue > 0); 
```

# gdb - 如何使用命令输出结果作为 gdb 中的下一个命令输入信息

> ID：14135732
> 
> 赞同：0
> 
> 时间：2013-01-03T09:03:47.937
> 
> 标签：gdb, pipe

我想使用命令部分的发现作为命令输入信息

它似乎无法在 gdb 中使用管道机制。

基本上我需要模仿这个

代码：

```
info symbol 0xffffffff 
```

自动将上面的输出作为输入的下面

```
info function xxxxxxxxx 
```

在 gdb 中。有时候，我想把结果的一部分作为命令输入信息，那我该怎么办呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:51:45.890

您可以做到这一点的唯一方法是通过[Python 脚本](http://sourceware.org/gdb/onlinedocs/gdb/Python.html)。

# java - CAS：如果登录页面空闲，则不会验证凭据

> ID：14135742
> 
> 赞同：1
> 
> 时间：2013-01-03T09:04:23.050
> 
> 标签：java, cas, jasig

我有一种情况，如果登录页面保持空闲一段时间，则输入的凭据不会得到验证，也不会发生任何事情。而是显示相同的登录页面，清除输入的`username`和`password`。但是下一次尝试将起作用并且凭据得到验证。有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:27:52.837

CAS 登录页面存在超时。当向客户端提供登录页面时，会创建一个与其关联的登录票证，该票证会持续 CAS Web 会话。因此，您必须在登录票证到期之前输入凭据，这取决于 CAS Web 会话超时（在您的 web.xml 中定义）。

# php - 通过ajax在代码点火器中提交表单

> ID：14135744
> 
> 赞同：0
> 
> 时间：2013-01-03T09:04:37.850
> 
> 标签：php, jquery, ajax, codeigniter

我想通过 ajax 提交表单，但我不知道为什么表单不通过 ajax 提交。为什么 ajax 不选择提交 id..这段代码只是像往常一样提交而不是通过 ajax 帮助我哪里错了..

```
 echo form_open('Contact_Controller/submit');
 echo form_input('name', set_value('name'), 'id="name"');
 echo form_input('email', set_value('email'), 'id="email"');
 $data = array(
        'name'=> 'message',
        'id' => 'message',
        'cols'=> '35',
        'rows' => '12'

        );
 echo form_textarea($data, 'Message');
 echo form_submit('submit', 'Submit', 'id="submit"');
 ?> 
```

```
<script type = "text/javascript">
$('#submit').click(function(){

var form_data = {
        name: $('#name').val(),
        email: $('#email').val(),
        message: $('#message').val()
};

$.ajax({
    url: "<?php echo site_url('tuts_Contact_Controller/submit'); ?>",
    type: 'POST',
    data: form_data,
    success: function(msg) {
      alert(msg);
    }

});

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:13:24.243

使用这种方式：

我猜你在这个脚本上面有 jquery。

```
<script type = "text/javascript">
$(function(){       // <----------------missed the doc ready function
  $('form').submit(function(e){
    e.preventDefault(); // <------this will restrict the page refresh
    var form_data = {
        name: $('#name').val(),
        email: $('#email').val(),
        message: $('#message').val()
    };

    $.ajax({
        url: "<?php echo site_url('tuts_Contact_Controller/submit'); ?>",
        type: 'POST',
        data: form_data, // $(this).serialize(); you can use this too
        success: function(msg) {
              alert(msg);
        }

   });
 });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:09:17.637

您应该防止表单提交的默认事件，例如：

```
$('#submit').click(function(evt){
  evt.preventDefault();
  .... 
```

# mysql - 目前 Ubuntu 上的 puppetlabs-mysql 模块有什么技巧吗？

> ID：14135745
> 
> 赞同：2
> 
> 时间：2013-01-03T09:04:39.113
> 
> 标签：mysql, ubuntu, puppet, vagrant

有一个正在运行的 github 线程（它似乎已关闭并且已经完成了一堆提交/合并）。

尽管 VirtualBox 和 Vagrant 还不到 2 周：*编辑：我仍然看到与 /root/.my.cnf 相关的错误。

我将 mysql 和 stdlib 模块更新为 master。

```
# MySQL Server
class { 'mysql::server':
    config_hash => {
       'root_password' => 'foobah'
    }
 }

#class { 'mysql::server': } have tried it like this to try not having a root password. But it still attempted to use the /root/.my.cnf file. 

mysql::db { 'data_base':
    user     => 'user',
    password => 'pass',
    host     => 'localhost',
    grant    => ['all'],
    charset => 'utf8',
} 
```

每当它以root身份执行创建数据库等命令时，我都会得到：

```
err: /Stage[main]//Mysql::Db[data_base]/Database[data_base]/ensure: change from absent to present failed: Execution of '/usr/bin/mysql --defaults-file=/root/.my.cnf -NBe create database `data_base` character set utf8' returned 1: Could not open required defaults file: /root/.my.cnf
Fatal error in defaults handling. Program aborted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:01:13.477

是的，这是一个订购问题（在开发我自己的（工作的）Ubuntu mysql 清单后，我更清楚要寻找什么）。

需要 mysql::db 部分：

```
require => File['/root/.my.cnf'], 
```

修订并添加：

```
# MySQL Server
class { 'mysql::server':
    config_hash => {
       'root_password' => 'foobah'
    }
}

mysql::db { 'data_base':
    user     => 'user',
    password => 'pass',
    host     => 'localhost',
    grant    => ['all'],
    charset => 'utf8',
    require => File['/root/.my.cnf'],
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:34:21.373

我很好奇，基于提到 /root/.my.cnf 的错误——这个文件的权限是什么？你能粘贴这个命令的输出吗？

```
stat /root/.my.cnf && lsattr /root/.my.cnf 
```

这听起来像是权限可能是问题，但我需要先查看权限才能知道，因为这现在无法重现。此外，目前并不重要，但可能随着我们进一步深入研究；您正在运行哪个版本的 Puppet？

# android - 删除 ios 和 android 的 phonegap 中的启动画面

> ID：14135751
> 
> 赞同：6
> 
> 时间：2013-01-03T09:04:58.810
> 
> 标签：android, ios, cordova, phonegap-plugins

我正在尝试在 ios 和 android 的 phonegap 应用程序中完全删除启动画面。该`navigator.hide()`功能仅在加载 html 页面后才起作用，但我需要在此之前删除启动画面。请让我知道是否有任何选项可用于执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:50:37.170

**`Cordova 1.6.0`**– 该`navigator.splashscreen`接口已被删除等待跨平台支持。现在您可以使用：

```
// to hide
cordova.exec(null, null, "SplashScreen", "hide", [])
// to show
cordova.exec(null, null, "SplashScreen", "show", []) 
```

我在这里找到它：[iOS PhoneGap / Cordova – 启动画面控制](http://shazronatadobe.wordpress.com/2011/09/15/ios-phonegap-splash-screen-control/)

如果您需要其他参考，请检查[PhoneGap Android SplashScreen Just Got Better](http://adamdempsey.com/tag/phonegap/) in the Link。

您也可以浏览这个[Google Discussion](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/zXPnb2jGnO4)。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:14:51.043

看看[这个帖子](https://stackoverflow.com/questions/11015993/manually-remove-splash-screen-phonegap)

复制接受的答案以供快速参考：

在 iOS 上，您应该可以调用`navigator.splashscreen.hide();`

从 1.8.0 开始支持在 Android 中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:51:54.913

希望它会帮助某人：

使用 PhoneGap 2.6.0，我所做的只是评论：

```
<plugin name="SplashScreen" value="CDVSplashScreen" /> 
```

PhoneGap 的 config.xml 文件中的行（通常位于 iOS 项目根目录）

# mysql - 什么 MySQL ini/cnf 设置用于控制 MySQL 查询缓存内存分配？

> ID：14135755
> 
> 赞同：0
> 
> 时间：2013-01-03T09:05:25.193
> 
> 标签：mysql

什么 MySQL ini/cnf 设置用于控制 MySQL 查询缓存内存分配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:38:24.643

> 要设置查询缓存的大小，请设置 *query_cache_size* 系统变量。将其设置为 0 将禁用查询缓存。默认大小为 0，因此默认禁用查询缓存。为了显着减少开销，如果您不使用查询缓存，还请使用 *query_cache_type*=0 启动服务器。

[http://dev.mysql.com/doc/refman/5.5/en/query-cache-configuration.html](http://dev.mysql.com/doc/refman/5.5/en/query-cache-configuration.html)和[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables。 html#sysvar_query_cache_size](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_query_cache_size)

# sql - 我需要 LEFT JOIN SQL 查询的帮助

> ID：14135756
> 
> 赞同：0
> 
> 时间：2013-01-03T09:05:27.900
> 
> 标签：sql, sql-server-2008, join

我需要帮助来编写一个简单的程序。让我解释一下我想要做什么。

我有 3 张桌子

1.  tJobOffer
2.  t应用
3.  tApplicationStatus

我想创建一个程序，向我返回一个 tJobOffer 列表，其中包含响应此 tJobOffer 的候选人数量。Candidate 是我的表 tApplicationStatus 的状态。此表链接到链接到 tJobOffer 的 tApplication。申请可以是候选/接受/拒绝/忽略/...

我创建了这个查询：

```
 SELECT 
        [T].[JobOfferId],
        [T].[JobOfferTitle],
        COUNT([A].[ApplicationId]) AS [CandidateCount]

    FROM        [tJobOffer] AS [T]
    LEFT JOIN   [tApplication] AS [A]
        ON      [A].[JobOfferId] = [T].[JobOfferId]
    LEFT JOIN   [tApplicationStatus] AS [S]
        ON      [S].[ApplicationStatusId] = [A].[ApplicationStatusId]
        AND     [S].[ApplicationStatusTechnicalName] = 'CANDIDATE'

    GROUP BY
            [T].[JobOfferId],
            [T].[JobOfferTitle]
            --[A].[ApplicationStatusId]

    ORDER BY [T].[JobOfferTitle] 
```

结果是

```
> 52ED7C67-21E1-49BB-A1F8-0601E6EED1EA  Annonce 1   0
> F26B228D-0C81-4DA8-A287-F8F997CC1F9C  Annonce 1b  0
> 9DA60B23-F113-4C7F-9707-2B90C1556D5D  Announce 25 2
> 258E11A7-79C1-47B6-8C61-413AA54E2360  Announce 3  0
> DA582383-5DF4-4E1D-837C-382371BDEF57  Announce 6  2 
```

这是不正确的，因为我只有 1 个 Announce 6 候选人。如果设置我的行

```
 --AND     [S].[ApplicationStatusTechnicalName] = 'CANDIDATE' 
```

在评论中结果是一样的。我的查询似乎忽略了这一行。怎么了？

编辑 -

我的正确结果应该是

```
> 52ED7C67-21E1-49BB-A1F8-0601E6EED1EA  Annonce 1   0
> F26B228D-0C81-4DA8-A287-F8F997CC1F9C  Annonce 1b  0
> 9DA60B23-F113-4C7F-9707-2B90C1556D5D  Announce 25 2
> 258E11A7-79C1-47B6-8C61-413AA54E2360  Announce 3  0
> DA582383-5DF4-4E1D-837C-382371BDEF57  Announce 6  1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:24:25.560

我猜你想要这个：

```
SELECT 
    [T].[JobOfferId],
    [T].[JobOfferTitle],
    COUNT([A].[ApplicationId]) AS [CandidateCount]

FROM        [tJobOffer] AS [T]
LEFT JOIN   [tApplication] AS [A]
    INNER JOIN  [tApplicationStatus] AS [S]
        ON      [S].[ApplicationStatusId] = [A].[ApplicationStatusId]
        AND     [S].[ApplicationStatusTechnicalName] = 'CANDIDATE'
    ON      [A].[JobOfferId] = [T].[JobOfferId]

GROUP BY
        [T].[JobOfferId],
        [T].[JobOfferTitle]

ORDER BY [T].[JobOfferTitle] ; 
```

您还可以先加入 2 个“应用程序”表，分组，然后将派生表加入`JobOffer`：

```
SELECT 
    [T].[JobOfferId],
    [T].[JobOfferTitle],
    COALESCE([G].[Cnt], 0) AS [CandidateCount]

FROM        [tJobOffer] AS [T]
LEFT JOIN   
            ( SELECT 
                  [A].[JobOfferId],
                  COUNT(*) AS [Cnt]

              FROM        [tApplication] AS [A]
              INNER JOIN  [tApplicationStatus] AS [S]
                  ON      [S].[ApplicationStatusId] = [A].[ApplicationStatusId]
                  AND     [S].[ApplicationStatusTechnicalName] = 'CANDIDATE'

              GROUP BY
                          [A].[JobOfferId]
            ) AS [G]
    ON      [G].[JobOfferId] = [T].[JobOfferId]

ORDER BY [T].[JobOfferTitle] ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:38:54.237

根据您的要求，首先您需要在必须使用内部联接之后使用左联接。

试试下面的

```
SELECT 
    [T].[JobOfferId],
    [T].[JobOfferTitle],
    COUNT([A].[ApplicationId]) AS [CandidateCount]

FROM        [tJobOffer] AS [T]
LEFT JOIN   [tApplication] AS [A]
    INNER JOIN   [tApplicationStatus] AS [S]
        ON      [S].[ApplicationStatusId] = [A].[ApplicationStatusId]
        AND     [S].[ApplicationStatusTechnicalName] = 'CANDIDATE'
    ON      [A].[JobOfferId] = [T].[JobOfferId]

GROUP BY
        [T].[JobOfferId],
        [T].[JobOfferTitle]

ORDER BY [T].[JobOfferTitle] ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:09:43.097

试试这个：

```
SELECT 
        [T].[JobOfferId],
        [T].[JobOfferTitle],
        COUNT([A].[ApplicationId]) AS [CandidateCount]

    FROM        [tJobOffer] AS [T]
    LEFT JOIN   [tApplication] AS [A]
        ON      [A].[JobOfferId] = [T].[JobOfferId]
    LEFT JOIN   
         (SELECT ApplicationStatusId FROM [tApplicationStatus]
          WHERE  [ApplicationStatusTechnicalName] = 'CANDIDATE') [S]
        ON      [S].[ApplicationStatusId] = [A].[ApplicationStatusId]
    GROUP BY
            [T].[JobOfferId],
            [T].[JobOfferTitle]
    ORDER BY [T].[JobOfferTitle] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:25:23.270

我不确定您是否在问为什么您使用第二个 LEFT JOIN 的 ON 子句过滤的行仍然显示在最终结果中。

如果这是你的问题，那么答案是：

基于 ON 谓词的过滤器不是最终的，即 ON 谓词不决定该行是否会出现在输出中，只决定它是否会与其他表中的行匹配。

另一方面，WHERE 子句是最终子句，在 FROM 子句之后处理——即，在处理完所有表运算符之后，并且（在外连接的情况下），在生成所有外部行之后。

因此，当您需要在生成外部行之后应用过滤器并且希望过滤器是最终过滤器时，请在 WHERE 子句中指定谓词。

# android - 将图像存储到 SD 卡

> ID：14135764
> 
> 赞同：0
> 
> 时间：2013-01-03T09:05:57.703
> 
> 标签：android, android-imageview, android-sdcard, android-image

我在我的 android 应用程序中使用裁剪功能，它工作正常，但我想将裁剪的图像保存到我的`SD Card`. 为此需要遵循哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:15:21.867

试试这个 ：

```
public void saveBitmap(Bitmap bmp)
{
    String file_path = Environment.getExternalStorageDirectory().getAbsolutePath() + 
                                "/NewFolder";
        File dir = new File(file_path);
        if(!dir.exists)
           dir.mkdirs();
        File file = new File(dir, "myImage.png");
        FileOutputStream fOut = new FileOutputStream(file);

        bmp.compress(Bitmap.CompressFormat.PNG, 85, fOut);
        fOut.flush();
        fOut.close();
} 
```

文件中需要以下权限`Manifest`：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T07:42:11.517

首先在 sdcard 中获取图像存储：-

```
public static String storeImage(Bitmap bitmap, String filename) {

        String stored = null;

        File sdcard = Environment.getExternalStorageDirectory();
        File file = new File(sdcard, filename + ".png");

        if (file.exists())
            file.delete();

        try {
            FileOutputStream out = new FileOutputStream(file);
            bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
            out.flush();
            out.close();
            stored = "success";
        } catch (Exception e) {
            e.printStackTrace();
        }
        return stored;
    } 
```

第二个从 sdcard 获取图像：-

```
public static File getImage(String imagename) {

        File mediaImage = null;
        try {
            String root = Environment.getExternalStorageDirectory().toString();
            File myDir = new File(root);
            if (!myDir.exists())
                return null;

            mediaImage = new File(myDir.getPath() + imagename);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return mediaImage;
    } 
```

**3 将图像从 sdcard 转换为位图**

```
File file = CommonUtils.getImage("/CoverPic.png");

                String path = file.getAbsolutePath();

                if (path != null)
                    picture = BitmapFactory.decodeFile(path); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:14:01.857

如果`Bitmap`你裁剪的被称为`yourBitmap`

```
File sdcard = Environment.getExternalStorageDirectory();
File f = new File (sdcard, "filename.png");
FileOutputStream out = new FileOutputStream(f);
yourBitmap.compress(Bitmap.CompressFormat.PNG, 90, out) 
```

# php - 来自控制台应用程序的资产管理，Yii

> ID：14135767
> 
> 赞同：1
> 
> 时间：2013-01-03T09:05:59.080
> 
> 标签：php, command-line, yii, console-application, assets

**如何使用 Yii 资产管理器从控制台应用程序访问作为资产发布的图像？**

我正在使用`commands`Yii（控制台应用程序）发送时事通讯。我无法在我的邮件模板中使用作为资产发布的图像。

我在`protected/assets/images/`文件夹中有实际的图像。当我使用 发布它们时`asset manager`，它们将在`root/assets/6f3434/images/`文件夹中可用。

通常我在 Yii 的 Web 应用程序中访问图像的代码是

`<img src="<?php echo $this->assetBase ?>/images/a.png" />`where`$this->assetBase`指的是已发布文件夹的 url，在本例中为`root/assets/6f3434`.

如果我从控制台应用程序运行代码，这同样不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:55:23.287

您没有解释到底是什么不起作用。所以这里只是一个一般的指导方针。

您必须`assetManager`在控制台应用程序中配置一个组件。而且您需要调整一些设置，以便最终获得相同的资产路径。您应该将这样的内容添加到您的`console.php`：

```
<?php
  'aliases' => array(
      'webroot' => realpath(__DIR_.'/../..'),
  ),
  'components' => array(
      'assetManager'=>array(
          'class'     =>'CAssetManager',
          'basePath'  =>realpath(__DIR__.'/../../assets'),
          'baseUrl'   =>'/assets',
      ),
      'request' => array(
          'baseUrl' => '',
      ),
  ),
      //... 
```

# asp.net - VS2012 在哪里运行我的 asp.net 代码？

> ID：14135772
> 
> 赞同：1
> 
> 时间：2013-01-03T09:06:08.777
> 
> 标签：asp.net, visual-studio-2012

我在 VS2012 中有一个 asp.net 项目

在这个项目中，我创建了一些文件，现在我想在我的文件资源管理器中查看它们，问题是：

我不知道 VS2012 在哪里运行我的项目。这是我可以找到正在运行的文件的路径`localhost:498xx`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:09:31.957

文件可能被隐藏了，尝试点击VS 右上角的**“显示所有文件” 。**

此外，如果您右键单击任何项​​目，则会出现一个选项**“在文件资源管理器中打开文件夹”**。

# python - 为什么“打印”会两次运行命令？

> ID：14135773
> 
> 赞同：2
> 
> 时间：2013-01-03T09:06:12.240
> 
> 标签：python

所以我有这段代码，它返回一系列关于文件的信息。它会返回两次输出，如第二个片段所示。

```
list = os.listdir(".")
print Style.BRIGHT + "size        info        last-accessed    last-changed     filename" + Style.RESET_ALL
for f in list:
    info = os.stat(f)
    # "  size          info        last-accessed    last-changed     filename
    print " ", info[ST_SIZE], "                                                  " + f 
```

和输出：

```
 size        info        last-accessed    last-changed     filename
  6243                                                   .bash_history
  55                                                   .bash_profile
  3                                                   .CFUserTextEncoding
  15364                                                   .DS_Store
  102                                                   .fontconfig
  105                                                   .sh_history
  102                                                   .ssh
  442                                                   .Trash
  0                                                   .Xauthority
  105                                                   console
  6688                                                   console.py
  272                                                   Desktop
  238                                                   Documents
  442                                                   Downloads
  2924                                                   Folder
  1156                                                   Library
  204                                                   Movies
  102                                                   Music
  136                                                   Pictures
  204                                                   Public
  170                                                   Sites
  3914                                                   xetch
size        info        last-accessed    last-changed     filename
  6243                                                   .bash_history
  55                                                   .bash_profile
  3                                                   .CFUserTextEncoding
  15364                                                   .DS_Store
  102                                                   .fontconfig
  105                                                   .sh_history
  102                                                   .ssh
  442                                                   .Trash
  0                                                   .Xauthority
  105                                                   console
  6688                                                   console.py
  272                                                   Desktop
  238                                                   Documents
  442                                                   Downloads
  2924                                                   Folder
  1156                                                   Library
  204                                                   Movies
  102                                                   Music
  136                                                   Pictures
  204                                                   Public
  170                                                   Sites
  3914                                                   xetch 
```

抱歉，它是一个网格，但正如您所注意到的，它返回了两次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:19:11.917

您显示的代码仅打印`size info...`一次标题。由于您看到它打印了两次，这意味着*整个代码块被执行了两次*。如果没有看到更多代码，就不可能知道为什么会出现这种情况。

# ios - 为 iOS 创建 google api

> ID：14135774
> 
> 赞同：5
> 
> 时间：2013-01-03T09:06:15.473
> 
> 标签：ios, google-maps, google-maps-sdk-ios

[https://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start)

我已在 ( [https://developers.google.com/maps/ios-access](https://developers.google.com/maps/ios-access) )`GoogleAPIs`控制台中注册以获取`Apikey`google maps sdk for `iOS`. 但我没有得到，也没有找到 google maps sdk for ios 选项以在`Google API`s 控制台中启用。任何人都可以建议我获取 api 密钥

ios 的谷歌地图 api 密钥在 API 项目的 API 访问面板中不可见..

控制台的 API 访问窗格中缺少创建新的 iOS 密钥。按照我的操作

[https://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start)

# javascript - Windos 8 Html5 和 Javascript：在快照视图中标记 AppbarCommand

> ID：14135782
> 
> 赞同：0
> 
> 时间：2013-01-03T09:06:56.107
> 
> 标签：javascript, html, windows-runtime, winjs

使用 HTML5 和 JavaScript 开发适用于 Windows 8 的应用程序，我试图在快照视图中显示 appbar 的 appbarcommand 标签。

正如我在[Microsoft 文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh465302.aspx)中发现的那样：

*“当人们捕捉您的应用程序时，Windows 会自动隐藏标签并为您调整填充”*

我曾想过的一种解决方法是在我想显示的文本中添加一个跨度，但我认为这有点棘手。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:09:21.707

覆盖在捕捉模式下设置的样式`ui-light/ui-dark.css`，以便它不会隐藏标签。

您应该能够通过在应用程序被捕捉时查看 DOM Explorer 中的文本并查看正在应用的 CSS 规则来得出这一点。

# c# - 确定字符串是否包含有效的 javascript 代码

> ID：14135783
> 
> 赞同：4
> 
> 时间：2013-01-03T09:07:03.243
> 
> 标签：c#, javascript, validation, syntax

我正在寻找一个`C#`函数，`true`如果字符串包含有效的 javascript 语法则返回。

例如：

```
IsValidJavascript("alert('hello');"); 
```

会回来`true`，但是

```
IsValidJavascript("alertXXhelloZ);"); 
```

会回来`false`的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:10:04.850

您需要使用**[解释器](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)**。
你可以试试**[Jint](http://jint.codeplex.com/)**，它是一个 .js 的 Javascript 解释器`.NET`。

# jquery - 部分页面更新和 Jquery

> ID：14135786
> 
> 赞同：0
> 
> 时间：2013-01-03T09:07:18.027
> 
> 标签：jquery, html, ajax

我是网页设计的新手，我有一个关于如何最好地组织和布局我的代码的问题。

我正在编写一个 Web 应用程序，它有一个主布局，左侧有一个树视图，页面顶部有一个导航菜单。菜单和树的变化不大。

然后在导航树的右侧和导航菜单下方，我有我的主要显示区域（因为缺少更好的词）。这个内容非常有活力。

目前我正在使用 Jquery 的 $.get 函数和 .html 来调用我的后端服务器，该服务器基于传递的参数返回 html 以放置在这个主显示区域中。

即下面这样的东西。

```
(".getUser").click(function(){
$.get('/getUser'), {username: $(this).attr("id"), role: 'user'},
  function (data) {
        // put html into the section
        $("div#displaycontent").html(data);
    })
}); 
```

所以我的问题是

1) 这是只更新主显示区域的可接受方式吗？

2) 更新后的显示区域可能有编辑框和按钮等...然后绑定到其他jquery代码。该 jquery 代码是否应该已经放在我的主 HTML 页面的底部，或者我应该只将脚本包含在从我的 .get 函数返回的“数据”中以及其余的 HTML 中？使用我的新 HTML 作品将其作为“数据”的一部分返回，但我不确定这是否是一种糟糕的做事方式。

# ios - 在设备上的应用程序上运行泄漏命令行工具

> ID：14135790
> 
> 赞同：1
> 
> 时间：2013-01-03T09:07:28.623
> 
> 标签：ios, macos, memory-leaks, instruments

我能够在使用 XCode 在设备上运行的应用程序上运行泄漏工具。

我想要做的是使用泄漏命令行工具（https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/leaks.1.html），在在模拟器上运行的应用程序。

有人已经这样做了吗？如果是的话，有人可以告诉我该怎么做吗？

（在模拟器上运行的应用程序的 PID 在我的 Mac 上不可用）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-03T09:14:48.403

不知道 PID 就不能使用命令行版本。命令行版本需要一个 PID。

PID虽然在活动监视器中。

我个人建议使用 GUI，因为它更容易。

[https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/ManagingMemory/Articles/FindingLeaks.html](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/ManagingMemory/Articles/FindingLeaks.html)

# node.js - curl: (56) 在 vi rtualbox 上接收失败 node.js

> ID：14135793
> 
> 赞同：3
> 
> 时间：2013-01-03T09:07:41.133
> 
> 标签：node.js, curl, virtualbox

我已经在虚拟机上安装了**node.js。**我从 nodejs.org 启动 webserver 示例，从虚拟机卷曲并得到“hello world”。然后我在主机上
转发到来宾上的示例端口。`port 8000`当我卷曲客人上的转发端口时，我得到：

```
curl: (56) Recv failure: Connection reset by peer 
```

问题是什么？

# java - 为什么 Linux Java UI 比 Windows Java UI 大？

> ID：14135798
> 
> 赞同：2
> 
> 时间：2013-01-03T09:08:01.517
> 
> 标签：java, windows, eclipse, user-interface, fedora

我正在使用 Fedora 17 和 Windows 7 进行软件开发，并且我正在使用 Eclipse。

我注意到 Fedora 17 和 Windows 7 中的 Eclipse 的一件事是工作区。显然 Fedora 中的元素间距比 Windows 7 大得多，导致 Fedora 中 Eclipse 的输入区域比 Windows 7 小。

我还注意到，大元素间距不仅发生在 Eclipse 中，而且发生在我在 Fedora 17 上运行的任何 Java GUI 程序上。

有谁知道如何处理这种问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:54:51.707

基本上是因为它们是不同的操作系统，并且它们具有不同的 UI 设计指令。此外，虽然 SWT 等 java UI 库有一个通用接口，但它们的实现在每个平台上都不同，并且使用本地库。

# asp.net-mvc - 当通过 ASP.NET MVC 使用时，有没有办法使 jQuery 验证有条件？

> ID：14135804
> 
> 赞同：0
> 
> 时间：2013-01-03T09:08:23.137
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

这个问题已经在 StackOverflow 上被问过很多次了，但是我没有看到任何可以满足我需求的东西。我想通过使用服务器端数据注释来驱动客户端，即 jQuery，验证是有条件的。

也就是说，我正在尝试构建一个通用下拉模型，如果用户从 DropDownList 中选择“其他”，`Other`则调用的耦合文本字段是强制性的。如何使用下拉模型属性上的属性来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:21:09.927

是的，这是可能的。看看[MVC Foolproof 框架](http://foolproof.codeplex.com/)，它有许多不错的附加功能，例如`[RequiredIf]`验证属性。他们还与客户端验证一起工作。

如果您对如何实现这一点的细节感兴趣，可以查看这些属性的源代码。这是相当多的工作。您需要让您的属性覆盖`IClientValidatable`接口，然后在客户端编写自定义的不显眼的适配器。

我写了一个这样的实现的例子[`here`](https://stackoverflow.com/a/10446355/29407)。它不处理条件验证，但技术完全相同。您只需要根据您的需要调整客户端适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:22:33.883

周围有许多 RequiredIf 实现，例如下面的一个：

[http://blogs.msdn.com/b/stuartleeks/archive/2011/10/06/flexible-conditional-validation-with-asp-net-mvc-3.aspx](http://blogs.msdn.com/b/stuartleeks/archive/2011/10/06/flexible-conditional-validation-with-asp-net-mvc-3.aspx)

另一种选择是 FluentValidation，它不是基于属性的验证，但非常灵活。

# variables - 如何在 Grails 配置文件中定义私有变量？

> ID：14135805
> 
> 赞同：1
> 
> 时间：2013-01-03T09:08:25.930
> 
> 标签：variables, grails, configuration

我们可以重用在 Grails 配置文件中定义的属性。一个简单的例子：

```
accountFake = '12345678901234567890'
accountValid = '09876543210987654321'

environments {
    development {
        payments.info.transfer.accountNumber = "${accountFake}"
    }
    test {
        payments.info.transfer.accountNumber = "${accountFake}"
    }
    preproduction {
        payments.info.transfer.accountNumber = "${accountFake}"
    }
    production {
        payments.info.transfer.accountNumber = "${accountValid}"
    }
} 
```

是否可以将此变量的范围定义为私有？我不希望在配置文件之外读取这些变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:15:23.057

通过添加将它们变成声明而不是绑定分配`def`：

```
def accountFake = '12345678901234567890' 
```

这使它成为配置脚本中的局部变量，并且不包括最终值`grailsApplication.config`

# extjs - Sencha Architect：建造一棵树

> ID：14135806
> 
> 赞同：2
> 
> 时间：2013-01-03T09:08:28.797
> 
> 标签：extjs, tree, treenode, sencha-architect

如何在Sencha **Architect中****建树**？我在网上找到的所有内容都与编辑在我的情况下是只读的代码有关。我能做些什么呢？

 **请帮忙！我真的很感激，因为我一直很难弄清楚。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:27:17.597

1.  `TreeStore`使用下面指定的配置添加一个*
2.  添加一个`TreePanel`{store: 'TreeStore', rootVisible: false}

*

```
fields: [{
    name: 'text'
}],
//please note that you need to wrap the root config inside an object {}
root: {
    expanded: true,
    children: [
            { text: "detention", leaf: true },
            { text: "homework", expanded: true, children: [
                { text: "book report", leaf: true },
                { text: "algebra", leaf: true}
            ] },
            { text: "buy lottery tickets", leaf: true }
    ]
} 
```

**Edit1：**
按此绿色图标以编辑根配置。
![编辑模式](../Images/435be31c38ddbe84672223187d845426.png)**

# c# - 设置 MVC 应用程序后访问被拒绝错误

> ID：14135813
> 
> 赞同：13
> 
> 时间：2013-01-03T09:09:01.967
> 
> 标签：c#, asp.net-mvc-4

> 访问被拒绝。
> 
> 说明：访问处理此请求所需的资源时出错。服务器可能未配置为访问请求的 URL。
> 
> 错误消息 401.2.：未经授权：由于服务器配置，登录失败。根据您提供的凭据和 Web 服务器上启用的身份验证方法，验证您是否有权查看此目录或页面。请与 Web 服务器的管理员联系以获得更多帮助。版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET > 版本：4.0.30319.18010

[我按照这里](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)的简单教程，运行应用程序并收到此消息。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-05T04:36:02.003

检查您的项目属性并确保 Anonymous Authentication = **Enabled**。如果您`<authentication mode="Windows" />`的 web.config 中有，您还需要为项目设置 Windows Authentication = **Enabled**（单击解决方案资源管理器中的项目）：

![特性](../Images/2869a65e5b63c690cb142933c2956d15.png)

这样做的效果是更改项目文件（.csproj），使其不再说：

```
<IISExpressAnonymousAuthentication />
<IISExpressWindowsAuthentication /> 
```

至：

```
<IISExpressAnonymousAuthentication>enabled</IISExpressAnonymousAuthentication>
<IISExpressWindowsAuthentication>enabled</IISExpressWindowsAuthentication> 
```

所以你也可以手动完成，或者通过修改内网项目模板来永久修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T21:47:19.457

所以我只是想插话一些对我有用的东西。我创建了一个新的“ASP.Net MCV 4 Web 应用程序”并使用了“Intranet Application”项目模板。我必须启用“Windows 身份验证”。我认为这是因为我选择了*Intranet*应用程序模板而不是*Internet*应用程序模板。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-10T09:39:25.290

**基本上首先允许用户或角色访问**

默认 web.config 拒绝访问

```
<authorization>
  <deny users="?" />
</authorization> 
```

所以确保你允许自己

```
<authorization>
  <allow users="domain\User" />
  <deny users="?" />
</authorization> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T16:39:39.060

我今天在 Visual Studio 中构建应用程序时遇到了同样的问题。项目文件以某种方式损坏。不允许做任何事情（修改 web.config 文件）。关闭一切并重新打开。在匿名身份验证 = 启用 Windows 身份验证 = 禁用之前，它使用相同的配置。

# spring - Bean 名称“empDetails”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：14135815
> 
> 赞同：0
> 
> 时间：2013-01-03T09:09:05.833
> 
> 标签：spring

很抱歉问我在许多答案中看到的那个错误，但我无法解决我的错误，所以请帮助我。我的要求是根据`id no`我使用注释在我的控制器中获取参数来获取员工，但我不知道为什么会出现这个错误

```
 SEVERE: Servlet.service() for servlet [jsp] in context with path [/EmployeeWebSpring] threw exception [java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'empDetails' available as request attribute] with root cause
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'empDetails' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.Search_jsp._jspx_meth_form_005flabel_005f0(Search_jsp.java:229)
    at org.apache.jsp.Search_jsp._jspx_meth_form_005fform_005f0(Search_jsp.java:157)
    at org.apache.jsp.Search_jsp._jspService(Search_jsp.java:95)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
3 Jan, 2013 2:23:33 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
3 Jan, 2013 2:23:33 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jsp] in context with path [/EmployeeWebSpring] threw exception [An exception occurred processing JSP page /Search.jsp at line 26

23: 
24: 
25:             <tr>
26:                 <td><form:label path="employeeNo">Employee_ID</form:label> <form:input
27:                         path="employeeNo" /></td>
28:                 <td><input type="submit" name="method" value="FindById" /></td>
29:             </tr>

Stacktrace:] with root cause 
```

这是我的控制器

包 com.nousinfo.tutorial.controllers；

```
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.dao.EmptyResultDataAccessException;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

import com.nousinfo.tutorial.service.impl.EmployeeServiceImpl;
import com.nousinfo.tutorial.service.model.EmployeeBO;
@Controller

public class SearchEmployeeController  {
    private EmployeeServiceImpl employeeServiceImpl;

    public void setEmployeeServiceImpl(EmployeeServiceImpl employeeServiceImpl) {
        this.employeeServiceImpl = employeeServiceImpl;
    }
    @ModelAttribute("empDetails")
    @RequestMapping(value="/search.spring" ,method=RequestMethod.POST)
    public ModelAndView searchByEmpNo(@RequestParam("employeeNo") long employeeNo) throws Exception {
        EmployeeBO empDetails = null;
        try {
            if (employeeServiceImpl.getEmployee(employeeNo) != null) {
                empDetails = employeeServiceImpl.getEmployee(employeeNo);
            }
        } catch (EmptyResultDataAccessException e) {
            return new ModelAndView("successSingleEmp", "empDetails",
                    empDetails);
        }
        return new ModelAndView("successSingleEmp", "empDetails", empDetails);
    }
} 
```

这是我的jsp文件

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>

<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<fmt:setBundle basename="ApplicationResources" />
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Employee Search Page</title>
</head>
<body>
<form:form action="/search.spring" method="post" modelAttribute="empDetails">
        <table border="0">

            <tr>
                <td><form:label path="employeeNo">Employee_ID</form:label> <form:input
                        path="employeeNo" /></td>
                <td><input type="submit" name="method" value="FindById" /></td>
            </tr>
            <tr>
                <td><form:label path="empName">Employee_Name</form:label>
                <form:input path="empName"/></td>
                <td><input type="submit" name="method" value="FindByName" /></td>
                </tr>

            <tr>
                <td><form:label path="deptNo">Employee_Name</form:label>
                <form:input path="deptNo"/></td>
                <td><input type="submit" name="method" value="FindByDeptNO" /></td>
                </tr>
            <tr>
                <td colspan="2" align="center"><font size=3>For
                        Searching the employees by<b>Employee Name</b><br />you can use %
                        match all the records with the given pattern
                </font><br /> <font size="2"> <i>e.g <b> for search by</b>EmployeeName<br />
                            matches alL the employees whose name starts with character <b>S</b></i></font></td>
            </tr>
        </table>
    </form:form>
</body>
</html> 
```

这是我的 webConfig-context.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context-3.2.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

<context:annotation-config />
  <context:component-scan base-package="com.nousinfo.tutorial." />
   <mvc:annotation-driven />

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/"
      p:suffix=".jsp" />

    <!-- configuring BeanNameViewResolver -->
    <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"></bean>

    <!-- configuring exception Resolver -->
    <bean
        class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
        <property name="exceptionMappings">
            <props>
                <prop key="org.springframework.dao.DAOException">dberrorView</prop>
                <prop key="java.lang.NumberFormatException">notANumber</prop>
            </props>
        </property>
    </bean>
    <!-- configuring views required to render the view for /search.spring -->
    <bean name="successSingleEmp" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/EmployeeDetail.jsp" />
    </bean>
    <bean name="successMultipleEmps" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/EmployeeList.jsp" />
    </bean>
    <bean name="dberrorView" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/DBError.jsp" />
    </bean>
    <bean name="notANumber" class="org.springframework.web.servlet.view.JstlView">
        <property name="url" value="/WEB-INF/NotANumberError.jsp" />
    </bean>
    <!-- CONFIGURING THE MEASSAGE RESOURCES FOR THIS APPLICTION CONTEXT -->
    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="/com/nousinfo/resources/ApplicationResources" />
    </bean>
</beans> 
```

这是 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>EmployeeWebSpring</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/webConfig-context.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <!-- The front controller of this Spring Web application, responsible for 
        handling all application requests -->
    <servlet>
        <servlet-name>ds</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/services-context.xml, /WEB-INF/webConfig-context.xml</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>
    <!-- Map all requests to the DispatcherServlet for handling -->
    <servlet-mapping>
        <servlet-name>ds</servlet-name>
        <url-pattern>*.spring</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:13:08.013

我的猜测是您没有将 empDetails 添加到初始视图中

错误告诉你

```
@ModelAttribute("empDetails") 
```

不作为 POST 请求的一部分出现。如果您始终将其设置为 null，为什么这是该方法的模型属性？

# javascript - Javascript 日期之间的月份和日期

> ID：14135818
> 
> 赞同：1
> 
> 时间：2013-01-03T09:09:21.437
> 
> 标签：javascript, date

我想知道是否有人有一个 JavaScript 函数来返回两个日期之间的月数和天数？例如，如果通过 01/01/2013 和 03/01/2015（英国日期格式），它将返回 24 Months 2 Days。我有几个月的部分，但我正在努力处理这些日子。我的表格上有 2 个日期字段，格式为 dd/mm/yyyy。这是我到目前为止的代码：

```
function calculateDateDifference(){
var startDateValue=document.forms[0].StartDate.value;
var endDateValue=document.forms[0].EndDate.value;

var startDateArray=startDateValue.split("/");
var endDateArray=endDateValue.split("/");

var startDate= new Date(startDateArray[2], startDateArray[1], startDateArray[0]);
var endDate= new Date(endDateArray[2], endDateArray[1], endDateArray[0]);

var diffYears = endDate.getFullYear()-startDate.getFullYear();
var diffMonths = endDate.getMonth()-startDate.getMonth();
var diffDays = endDate.getDate()-startDate.getDate();

var months = ((diffYears*12) + diffMonths);
if (diffDays<0){
    months=months-1;
    }
alert(months + " months");
} 
```

在此先感谢，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:19:45.667

此函数将以英国（小尾数）格式计算两个日期之间的天数。

```
​function subtractDates(firstDate, secondDate){
        var fdObj, sdObj;
        firstDate = littleToMiddleEndian(firstDate);
        secondDate = littleToMiddleEndian(secondDate);
        function littleToMiddleEndian(led){
            var a = led.split("/")
            return [a[1],a[0],a[2]].join("-");
        }
        fdObj = new Date(firstDate);
        sdObj = new Date(secondDate);
        return sdObj-fdObj/86400000;
    }
    var daysBetween = subtractDates("10/01/12","17/01/12");
    console.log(daysBetween); 
```

首先，它使用内部函数将日期从小端格式 (dd-mm-yy) 转换为`Date`对象所需的中端格式 (mm-dd-yy)。然后它创建两个 Date 对象并从另一个中减去一个，然后除以 86400000（一天中的毫秒数），得到一个整数，表示两个日期之间的天数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:03:51.230

感谢@Zazerat 在[这篇文章中的回答](https://stackoverflow.com/questions/5645058/how-to-add-months-to-a-date-in-javascript "这个帖子")

我想出了一个解决方案。@Jazerat 提供了 JSDate 的精简版本，我将其包括在内，以便轻松调整日期的月份。这是最终的代码：

```
 Date.isLeapYear = function (year) { 
    return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0)); 
};

Date.getDaysInMonth = function (year, month) {
    return [31, (Date.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
};

Date.prototype.isLeapYear = function () { 
    var y = this.getFullYear(); 
    return (((y % 4 === 0) && (y % 100 !== 0)) || (y % 400 === 0)); 
};

Date.prototype.getDaysInMonth = function () { 
    return Date.getDaysInMonth(this.getFullYear(), this.getMonth());
};

Date.prototype.addMonths = function (value) {
    var n = this.getDate();
    this.setDate(1);
    this.setMonth(this.getMonth() + value);
    this.setDate(Math.min(n, this.getDaysInMonth()));
    return this;
};

function daysInMonth(month,year) {
    return new Date(year, month, 0).getDate();
}

function calculateLeasePeriod(){

var startDateValue=document.forms[0].StartDate.value;
var endDateValue=document.forms[0].EndDate.value;

if (endDateValue!="" && startDateValue!=""){

    var startDateArray=startDateValue.split("/");
    var endDateArray=endDateValue.split("/");

    var startDate= new Date(startDateArray[2], startDateArray[1], startDateArray[0]);
    var endDate= new Date(endDateArray[2], endDateArray[1], endDateArray[0]);

    var diffYears = endDate.getFullYear()-startDate.getFullYear();
    var diffMonths = endDate.getMonth()-startDate.getMonth();
    var diffDays = endDate.getDate()-startDate.getDate();

    var months = ((diffYears*12) + diffMonths);
    if (diffDays<0){
        months=months-1;
        var adjStartDate = startDate.addMonths(months);
        diffDays = endDate.getDate()-adjStartDate.getDate();
        if (diffDays<0){
            diffDays=daysInMonth(adjStartDate.getMonth(), adjStartDate.getYear())+ diffDays;
            }
        }

    $("#PrimaryLeasePeriod").html(months + " months and " + diffDays + " days");

    }else{
        $("#PrimaryLeasePeriod").html("");
    }
} 
```

我希望其他人觉得这很有用！

# java - 如何对具有不同输入的相同方法使用泛型

> ID：14135821
> 
> 赞同：2
> 
> 时间：2013-01-03T09:09:29.887
> 
> 标签：java

```
private Set<String> extractOfferKeysForAbstractOffers(List<AbstractOfferDto> selectedOffers) {
        Set<String> offerKeys = new HashSet<String>();
        for (AbstractOfferDto offer : selectedOffers) {
            offerKeys.add(offer.getOfferKey());
        }
        return offerKeys;
    }

 private Set<String> extractOfferKeysForOffers(List<OfferDto> selectedOffers) {
        Set<String> offerKeys = new HashSet<String>();
        for (OfferDto offer : selectedOffers) {
            offerKeys.add(offer.getOfferKey());
        }
        return offerKeys;
    } 
```

我想使用泛型，而不是使用几乎相同的方法，只是输入不同。我像这样创建它。

```
private <T> Set<String> extractOfferKeysForOffers(List<T> offers) {
        Set<String> offerKeys = new HashSet<String>();
        for (T offer : offers) {
            offerKeys.add(offer.getOfferKey());
        }
        return offerKeys;
    } 
```

但问题是`offer.getOfferKey()`不被认可。提供的唯一选项是`AbstractOfferDto`或`OfferDto`。

我如何在这个例子中使用泛型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:12:15.773

告诉编译器抽象类型：

```
private <T extends AbstractOfferDto> Set<String> extractOfferKeysForOffers(List<T> offers) {
        Set<String> offerKeys = new HashSet<String>();
        for (T offer : offers) {
            offerKeys.add(offer.getOfferKey());
        }
        return offerKeys;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T09:12:57.357

是的你可以：

```
 public interface IOffer {
     String getOfferKey();
  }

  public class OfferDto implements IOffer { ... }

  public class AbstractOfferDto implements IOffer { ... }

  class X {    
    private <T extends IOffer> Set<String> extractOfferKeysForOffers(List<T> offers) {
        Set<String> offerKeys = new HashSet<String>();
        for (T offer : offers) {
            offerKeys.add(offer.getOfferKey());
        }
        return offerKeys;
    }
  } 
```

以上是通用解决方案。如果`OfferDto`extends `AbstractOfferDto`，则不需要额外的接口：

```
 class X {    
    private <T extends AbstractOfferDto> Set<String> extractOfferKeysForOffers(List<T> offers) {
        Set<String> offerKeys = new HashSet<String>();
        for (T offer : offers) {
            offerKeys.add(offer.getOfferKey());
        }
        return offerKeys;
    }
  } 
```

# php - 使用 .htaccess 文件从 URL 中删除 .php 扩展名

> ID：14135823
> 
> 赞同：0
> 
> 时间：2013-01-03T09:09:32.253
> 
> 标签：php

> **可能重复：**
> [使用 .htaccess 隐藏扩展名和变量](https://stackoverflow.com/questions/11674705/htaccess-hide-extension-and-variables)

我想更改我的网址。

例如，

从：[http](http://domain-name.com/dir/page1.php) ://domain-name.com/dir/page1.php 到：[http ://domain-name.com/dir/?page1](http://domain-name.com/dir/?page1)

.htaccess 文件代码是什么？

我没有使用任何 CMS。这只是一个简单的 PHP 网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:28:52.573

不应该进行您想要的转换，因为`?`URL 中的一个特殊字符代表“这里开始查询字符串”。

对于`page.php`转换`page`这里的代码：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ $1 [R=301,L]

RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ $1 [R=301,L]

RewriteRule ^([^/.]+)$ $1.php [L] 
```

# android - 将预期消息传递到 android 应用程序后，我的服务器能否收到来自 GCM 的确认？

> ID：14135825
> 
> 赞同：8
> 
> 时间：2013-01-03T09:09:34.173
> 
> 标签：android, google-cloud-messaging

我已经开始将 GCM 集成到我的 android 应用程序中。[在启动教程](http://developer.android.com/google/gcm/index.html)的帮助下，我设置了示例演示，效果非常好。我也了解了当我的服务器向 GCM 发送消息时收到的不同[响应状态](http://developer.android.com/google/gcm/gcm.html#response)，我认为这表示我的服务器和 GCM 服务器之间的通信状态。

我的问题是，有没有办法获取 GCM 服务器和 android 应用程序之间的通信状态？基本上是表示预期消息是否已成功传递的确认。我还读到，[默认超时](http://developer.android.com/google/gcm/adv.html)为 4 周，除非设置了 time_to_live 标志，这使我理解 GCM 维护队列并且肯定会确保消息传递。

但是，为了确保可靠性，作为第三方服务器，我是否需要重试发送相同的消息（如果 GCM 基础设施尚未处理）？如果我需要照顾重试，如何确定失败？

我的一种方法是，定义一个推送 id 并将其与消息一起发送，一旦收到，android 应用程序将使用相应的推送 id 报告服务器。如果在指定时间内没有收到响应，则服务器将重试发送消息。这种方法在[帖子](https://stackoverflow.com/questions/13967883/android-gcm-delivery-monitoring)的第二个答案中定义，将有助于监控 GCM 所花费的时间（特别是对于 QA 团队）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:35:20.703

我不相信可以从 GCM 服务器获取该信息。这意味着您将不得不依赖成功接收您的消息的客户端应用程序与您的服务器之间的另一种通信方法（如您所述）。

您从 GCM 服务器（如您所知）获得的响应只是让[您知道](http://developer.android.com/google/gcm/gcm.html#success)：

```
success: Number of messages that were processed without an error. 
```

或者

```
failure: Number of messages that could not be processed. 
```

这意味着您可以知道哪些注册 ID 被正确处理（例如，有效值，仍然在 GCM 中注册），但不知道消息是否成功传递到实际设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-07T07:26:18.753

根据谷歌的 GCM 文档......这可能会有所帮助：

[http://developer.android.com/google/gcm/ccs.html#receipts](http://developer.android.com/google/gcm/ccs.html#receipts)

# android - 使用 Intent.createchooser 时是否可以使用 .mp3 文件的持续时间进行过滤？

> ID：14135828
> 
> 赞同：8
> 
> 时间：2013-01-03T09:09:52.977
> 
> 标签：android

在我的 android 应用程序中，我使用下面的代码列出了 mp3 文件以供选择和上传。
我想知道是否可以根据文件的持续时间及其类型来过滤文件。

```
Intent intent = new Intent();
intent.setType("audio/*");              
intent.setAction(Intent.ACTION_GET_CONTENT);
try {
    startActivityForResult(Intent.createChooser(intent, "Select your Audio"), Global.FILE_FROM_SD);
} 
catch (android.content.ActivityNotFoundException ex) {
    // Potentially direct the user to the Market with a Dialog
    Toast.makeText(WizardStep1.this,
            "Please install a File Manager.",
            Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:11:39.170

AFAIK，这是不可能的。意图接收器可以处理 MIME 类型，例如`audio/*`

MIME 类型的目的是表达您期望/请求/接受的媒体类型。它不支持任何属性（AFAIK）

即使是这样，我认为只有少数 Android 应用程序会费心支持它来满足您的场景。

如果您能找到支持接受此类额外数据的应用程序，则使用[Intent.putExtra (String name, Bundle value)传递特定于应用程序的“额外”数据会更好。](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29)流行的[ES 文件资源管理器](http://www.estrongs.com/en/support/developers.html)应用程序似乎不支持它，所以我认为这不适用于您的大多数用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:22:45.383

我不这么认为，或者至少不是你开始的方式。

我相信一旦您创建了意图选择器并打开了另一个文件管理器，那么您将无法控制向您显示该特定文件管理器的哪些数据，例如按特定条件过滤。

我在这里看到的解决方案是创建一个方法，[将 sdcard 中的所有音频文件返回](https://stackoverflow.com/questions/8994625/display-all-music-on-sd-card)到一个数组中，然后使用过滤器来确定文件的扩展名（.mp3）以及[获取文件持续时间的](https://stackoverflow.com/questions/4802398/determining-the-duration-and-format-of-an-audio-file)方法。
将过滤后的内容添加到新数组中，然后对过滤后的文件执行您想要的操作，例如显示在 a 中`ListView`并让用户选择他要上传的文件。

伪代码将如下所示：

```
ArrayList<String> filteredFiles = new ArrayList<String>();

String[] audioFiles = getAllAudioFiles();
for (String file : audioFiles) {
    if (file.endsWith(".mp3") && getDuration(file) >= DURATION_CONSTANT) {
        filteredFiles.add(file);
    }
} 
```

然后显示 a 的内容`filteredFiles`并`ListView`提供适当的逻辑来选择/上传文件。

# php - 如何从第一个插入中检索 id 以便在第二个插入中使用

> ID：14135830
> 
> 赞同：0
> 
> 时间：2013-01-03T09:09:59.933
> 
> 标签：php, sql, mysqli

下面我有一个使用 php 和 mysqli 的 INSERT 数据库函数：

```
for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; $i++) {

        $insertsql = "
  INSERT INTO Session
    (SessionName, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room)
  VALUES
    (?, ?, ?, ?, ?, ?, ?, ?, ?)
";
if (!$insert = $mysqli->prepare($insertsql)) {
  // Handle errors with prepare operation here
}

    $sessname = $_SESSION['id'] . ($n == 1 ? '' : $i);
    $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

    $insert->bind_param("sssisiiis", $sessname, $_SESSION['timeChosen'], $sessdate,
                 $_SESSION['totalWeight'], $time, $_SESSION['textMarks'],
                 $_SESSION['hiddenmodule'], $teacherid, $_SESSION['rooms']);

    $insert->execute();

    if ($insert->errno) {
      // Handle query error here
    }

    $insert->close();

} 
```

上面的代码将把这些数据一次性插入到下面的数据库中作为示例：

```
SessionId (Auto) SessionName  SessionTime  //etc
1                ADFGR1       01:00:00
2                ADFGR2       13:00:00
3                ADFGR2       09:00:00 
```

无论如何，您可以看到我没有包含`SessionId`在上面的代码中，因为它是一个自动增量，这意味着它无论如何都会显示。

但我遇到的问题是，在这个插入下面，我想做的是当上面的插入完成后，我想在下面做另一个插入：

```
 $insertsession = "
  INSERT INTO Session_Complete
    (SessionId)
  VALUES
    (?)
";
if (!insertdb = $mysqli->prepare($insertsession)) {
  // Handle errors with prepare operation here
}

    insertdb->bind_param("i",$value);

    insertdb->execute();

    if (insertdb->errno) {
      // Handle query error here
    } 
```

但是我对上述插入的问题是它需要`SessionId`第一个插入中已经插入的 's 才能将这些 id 插入其表中。我的问题是如何`SessionId`从第一个插入中检索，以便我可以将它们包含在第二个插入中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:14:28.183

如果你愿意，你可以使用`TRIGGER`它，例如。

```
delimiter $$
CREATE TRIGGER `trigger_Name` 
  AFTER INSERT ON `Session`
FOR EACH ROW 
BEGIN
  INSERT INTO Session_Complete (SessionId) values (LAST_INSERT_ID());
END$$
delimiter ; 
```

触发器所做的是在成功插入表后`Session`，它还将在表中插入最后插入的 ID `Session_Complete`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:15:00.217

看看[如何在 PHP 中获取 MySQL 表的最后插入 ID？](https://stackoverflow.com/questions/1685860/php-how-to-get-last-inserted-id-of-a-table)获取插入后的最后一个插入 ID，`Session`并在以下插入中使用该值`Session_Complete`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:15:48.250

应该是这样的：

```
$insert->insert_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:13:07.953

使用 MySQL 函数[LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.6/en/information-functions.html#function_last-insert-id)。

> LAST_INSERT_ID()（不带参数）返回一个 BIGINT（64 位）值，表示作为最近执行的 INSERT 语句的结果为 AUTO_INCREMENT 列成功插入的第一个自动生成的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T09:15:52.210

就像您的其他问题中的其他表格一样，`Session_Complete`看起来像另一个过度不必要的表格。
无论你想从这张表中得到什么信息，你都可以从中得到`Session`。
所以，根本没有下面的插入物。

您似乎需要修改您的数据库结构，或者 - 甚至更好 - 将其作为一个单独的问题发布在这里，并就如何正确组织它获得很好的建议。

# css - 在输入按钮上使用 :first-letter 伪元素

> ID：14135832
> 
> 赞同：1
> 
> 时间：2013-01-03T09:10:08.027
> 
> 标签：css, button, pseudo-element

我正在尝试创建一个只有第一个字母下划线的按​​钮。显然我不能使用标签，然后我会用 css 实现它，通过使用伪元素：first-letter。它在其他情况下工作得很好，但在按钮中不起作用。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:31:33.810

由于您尚未共享代码，因此我将在这里大胆猜测。

您正在使用`<input type="button" value="Some Value">`，因为里面没有实际的文本（显示的文本来自`value=`属性），`:first-letter`所以不起作用（因为它适用于元素内部的文本）。

相反，使用`<button>Some Value</button>`它应该可以正常工作。

# javascript - html5 基本警报和文本框

> ID：14135837
> 
> 赞同：1
> 
> 时间：2013-01-03T09:10:23.797
> 
> 标签：javascript, html, alert

我是 HTML5 和 javascript 的新手。我想要一个警报框来显示数据（名字和姓氏）。数据必须取自表单上的文本框。我的代码在下面，但是警报框不起作用。

```
<!DOCTYPE html>
<html>
<body>

<form action="demo_form.asp" method="get">
First name: <input type="text" name="fname" /><br>
Last name: <input type="text" name="lname" /><br>

</form>
<script>
function display_alert()
  {
   alert(fname +lname);
  }
</script>

<input type="button" onclick="display_alert()" value="Display alert box">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:23:00.850

您可以使用 jQuery。

html:

```
First name: <input type="text" id='fname' /><br>
Last name: <input type="text"  id='lname'/><br>
<input type="button" onclick="display_alert();" value="Display alert box"> 
```

脚本：

```
function display_alert() {
    fname = $('#fname').val();
    lname = $('#lname').val();
    alert(fname+' '+lname);
}​ 
```

[演示](http://jsfiddle.net/XGrpf/#update)

Jquery 可能对未来有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:17:20.557

您需要为输入标签提供 id

```
 <form>
        <input id="a" type="text"/>
        <input id="b" type="text"/>
        <input type="button" onclick="display_alert();" />
    </form> 
```

然后在你的 js 代码中使用它们：

```
<script lang="javascript">
    function display_alert() {
        var fn = document.getElementById('a');
        var ln = document.getElementById('b');
        alert(fn.value + ' ' + ln.value);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:15:09.197

您需要在脚本中使用[getElementsByName函数获取值。](http://www.w3schools.com/jsref/met_doc_getelementsbyname.asp)

尝试使用以下脚本更改您的脚本。

```
<script> 
  function display_alert()
  {
     var fname = document.getElementsByName("fname")[0].value;
     var lname = document.getElementsByName("lname")[0].value;
     alert(fname + ' ' + lname); 
  }
</script> 
```

**注意：**仅供参考，与`HTML5`此无关。

# actionscript-3 - AS3 使用 HTTPService 处理没有互联网连接

> ID：14135838
> 
> 赞同：1
> 
> 时间：2013-01-03T09:10:45.797
> 
> 标签：actionscript-3, apache-flex, flex3

当没有互联网连接时，我需要重试特定的 HTTP 服务调用。有什么建议么。我的 FaultEvent 带有 errorID == 0 的错误。对我来说，出现一个非常具体的错误代码是有意义的，因此我可以确定如何处理这种特定情况。我得到错误代码的唯一地方是来自 FaultEvent 的 rootCause。任何人都有关于如何确保互联网连接发生故障的建议。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:56:46.050

如果有人对我如何解决问题感兴趣。这不是一个完美的解决方案，基本上我所做的就是进行我所谓的虚拟服务器 ping。直接从 Flex ping 服务器并不容易，但您可以对服务器上的某些内容发出 HTTP 请求。即使您在线时链接不存在，您也会从服务器获得状态代码 404，而不是离线时出现的 0。所以我对 mydomain//nofile.html 进行了 Http 调用。该链接不存在，因此服务器向我发送了 404，我知道我在线。

为我工作。

戴夫

# php - 使用 phpunit 进行测试时，ServiceManager 无法按完整命名空间查找类

> ID：14135840
> 
> 赞同：0
> 
> 时间：2013-01-03T09:10:48.977
> 
> 标签：php, unit-testing, zend-framework2, servicemanager

在某些情况下，我会通过它们的完整类名从 ServiceManager 中检索实例，例如：

```
$someThing = $serviceManager->get('MyModule\Some\Nice\Lib\SomeThing'); 
```

这对于 HTTP MVC 请求非常有效，但是，当使用 phpunit 时，ServiceManager 找不到它。（它会抛出`Zend\ServiceManager\Exception\ServiceNotFoundException`异常消息“`Zend\ServiceManager\ServiceManager::get`无法获取或创建...的实例”）

我正在使用[文档](http://zf2.readthedocs.org/en/latest/user-guide/unit-testing.html)中的默认测试引导示例，并且我在不同机器上的两个不同项目中遇到了这个问题，所以我想这是一个普遍的问题。

我的第一个猜测是它与 MVC 或应用程序有关，因为这很可能是测试和 http 之间唯一真正的区别。我什至在两种模式下都转储了 SM 实例并将它们相互比较，查看源代码并搜索网络。

不幸的是，由于我的劳动合同，我无法粘贴任何代码。但是，正如我所说，我认为这是一个普遍问题，因此您应该能够轻松地重现它。

有谁知道是什么导致了这个问题以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:05:22.223

确保您将模块添加到测试配置：

```
return array(
    'modules' => array(
        'MyModule',
        //...
    ),
    //...
); 
```

否则 ModuleManager 将不会尝试加载它，因此模块自动加载器将不会被注册

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:14:37.440

我设法找到了问题所在。

当您使用创建具有完整类名的实例时`ServiceManager`，实际上默认情况下无法创建它。但是，如果可能，它会将任务委托给附加到它的抽象工厂。

现在，当您使用 DiFactory 创建 Di 实例时，工厂会将 a 注册`DiAbstractServiceFactory`到 SM。而且，你猜对了，这个抽象工厂能够通过类的全名来实例化类。

我`Di`在这个项目中很少使用（因为我并没有真正适应它并且一开始就用错了；我现在知道得更好了），这就是为什么我实例化的唯一点`Di`是在模块的方法内部`onBootstrap()`。这在 MVC 上下文中很好，但是，作为`onBootstrap()`HTTP MVC 事件处理程序，它不会在我的测试应用程序中调用。因此， no`Di`​​在任何时候都被实例化，因此，`ServiceManager`没有`DiAbstractServiceFactory`附加到它，因此它不能委托`get()`调用，因此它无法通过它们的完整类名来实例化类。

就这么简单！:-)

显而易见的解决方案：在测试应用程序中创建一个`Di`实例。

# html - 将希伯来文（或西里尔文）字符复制/粘贴到 Notepad++ 或其他编辑器中

> ID：14135843
> 
> 赞同：3
> 
> 时间：2013-01-03T09:11:02.193
> 
> 标签：html, character-encoding, notepad++, hebrew

我以前从未使用过希伯来语字符，但现在我有一个 asp（或 html），只需将一些希伯来语句子复制/粘贴到我的 html 中。我正在使用记事本++。目前给定文件中所有现有的希伯来语文本如下所示：

```
<title>&#1492;&#1506;...</title> 
```

或者

```
<p align="right" dir="RTL">&#1488;&#1504;&#1493; ...</p> 
```

因此显示了 unicode 数字。

**所以问题如下：**

我的电子邮件中有一个希伯来语句子。我需要把它放到 HTML 中。如果我复制/粘贴到记事本++中，我得到了???? 而不是字符或数字。这个怎么做？也许我需要以某种方式将现有的希伯来语句子转换为 unicode 数字？

我正在使用 Notepad++，但也许还有其他编辑器可以处理这个问题。

**编辑（解决了我的问题）：** 我找到了以下工具：[http](http://www.pinyin.info/tools/converter/chars2uninumbers.html) ://www.pinyin.info/tools/converter/chars2uninumbers.html 我可以在那里复制一个文本并将其转换为 Unicode 数字，然后我可以将其复制到记事本++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:40:13.507

对于 Cyrillic 脚本，我有时需要它，我使用 N++ 的[HTML Tag plugin](http://sourceforge.net/projects/npp-plugins/files/HTMLTag/)。

安装插件后，在 N++ 中选择您的文本（不带标签，否则它也会对其进行编码），转到插件 | HTML 标签 | 编码实体或按 Ctrl+E。

还要确保 N++ 的编码设置为 UTF-8（在 Encoding | Encode in UTF-8 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:10:38.640

有趣的是，普通的 Windows 记事本在 Unicode 方面通常更稳定。只要您将文件保存为 UTF-8，您就不会看到带有问号、字符编号和其他奇怪内容的惊喜。Notepad++ 可以支持 Unicode，但有时也有惊喜。

如果你需要一个字符数字的在线转换器，我最喜欢的是 [http://rishida.net/tools/conversion/](http://rishida.net/tools/conversion/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-20T06:36:42.020

这是我的解决方案（旧的 VB6 程序中的希伯来语字符也有同样的问题）：（使用 VB6->Notepad @ Windows 10）：

1.  打开新的记事本（现在你有一个空文件）
2.  单击使用 Unicode 编码保存。<- 关键步骤
3.  从源代码编辑器（VB6 或其他）复制您需要的内容
4.  将其粘贴到好的旧记事本中
5.  保存您的工作（又一个关键步骤 :)）

瞧！

# jboss - 访问 jBPM 数据库

> ID：14135844
> 
> 赞同：0
> 
> 时间：2013-01-03T09:11:08.757
> 
> 标签：jboss, jbpm, business-process-management

我正在尝试将 REST api 与 jbpm 控制台一起使用。

我成功了。我可以通过控制台为用户创建任务。

但是当我尝试访问 DB ( `jdbc:h2:tcp://localhost/runtime/task`)中的任务详细信息时

包括表格在内的所有`task`表格都是空的。

我是否指向正确的数据库。

我在访问 jbpm 控制台数据库时犯了什么错误。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:37:27.127

但是你在创建任务吗？如果您没有任何运行人工任务的进程，则不会填充任务表。你确定你访问的是 H2 数据库的同一个实例吗？您可以做的一个快速测试是使用 MySQL 安装所有内容，并确保您使用相同的数据库运行两个应用程序（控制台和您的应用程序）。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:40:27.217

1.  停止 jBOSS
2.  ant start.human.task（为任务创建表）
3.  启动 Jboss 并使用 jbpm-console 进行验证

# php - 在 PHP 中获取参数值作为参考

> ID：14135845
> 
> 赞同：1
> 
> 时间：2013-01-03T09:11:12.373
> 
> 标签：php, reference

> **可能重复：**
> [如何在 PHP 中通过引用传递可变参数函数的参数？](https://stackoverflow.com/questions/2612086/how-can-arguments-to-variadic-functions-be-passed-by-reference-in-php)

我需要从 a`method`或的参数中获取值`function`。我知道我可以做到这一点`func_get_args()`。但我真的需要通过引用来获取论点。有没有办法做到这一点？

我目前有这个：

```
<?php
class Test
{
    function someFunc ( $arg1, $arg2 )
    {
        print_r ( func_get_args() );
    }
}

$t = new Test();
$t->someFunc('a1', 'a2');
?> 
```

在我的真实代码中，参数值被传递给另一个`class->method()`. 在那里我希望能够更改参数值。如果我可以将这些值作为参考，这将是可能的。

有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:20:27.490

现在没有什么能阻止你..只要让它成为一个`variable instead`如果不是 PHP 就会返回`Fatal error: Cannot pass parameter 1 by reference`

```
class Test {

    function someFunc(&$arg1, &$arg2) {
        var_dump(func_get_args());

        $arg1 = strtoupper($arg1);
        $arg2 = strtoupper($arg2);
    }
}

echo "<pre>";

$arg1 = "a1";
$arg2 = "ar2";
$t = new Test();
$t->someFunc($arg1, $arg2);

var_dump($arg1, $arg2); 
```

输出

```
array (size=2)
  0 => string 'a1' (length=2)
  1 => string 'ar2' (length=3)

string 'A1' (length=2) // modified
string 'AR2' (length=3) // modified 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T09:19:32.017

```
 <?php
    class Test
    {
        function someFunc ( &$arg1, &$arg2)
        {
//    used the variable as per you want it....
        }
    }

    $t = new Test();
    $t->someFunc('a1', 'a2');
    ?>

    You have to add & to the arguement so that it can be used as reference... 
```

# windows-8 - 与 python 33 / isdir() 的字符串连接总是返回 True？（3小时撞头）

> ID：14135846
> 
> 赞同：2
> 
> 时间：2013-01-03T09:11:13.330
> 
> 标签：windows-8, python-3.x

[ 好的，我编辑了我的问题，因为我刚刚得到了与我之前帖子的第一行相对应的答案，实际上这不是问题......所以如果你发布 smtg，请先测试并阅读整个内容，然后再认为我需要知道如何在 python 中测试路径；）]

整个脚本，详情如下： http: [//www.pasteall.org/38511/python](http://www.pasteall.org/38511/python)

**该脚本在 Windows 8 / python33 和 winXP / python 322 上返回的结果不同** ，这是关于 Windows 框上的 dir 存在测试。

说我使用带有 python 3.3 的 windows 8 框

```
sys.version_info(major=3, minor=3, micro=0, releaselevel='final', serial=0) 
```

我的高清上有这个现有路径：

```
D:\ImHere\meToo 
```

确认我这些目录存在的简单脚本（我使用 cmd 管理员提示符来执行脚本）：

```
import os
from os import path
import sys
print(sys.version_info)

def there(p) :
    print('%s %s'%(p,'exists' if os.path.isdir(p) else 'does not exist'))

# got True, ok
print('\nusuals')
path = "D:\ImHere\meToo"
there(path)

# got False, ok
path += "\ImNot"
there(path)

# a bit more academic, tests ok
elms = path.split('\\')
jpath = ''
for elm in elms :
    jpath = os.path.join(jpath,elm)
    there(jpath)

# ... ok
rpath = elms[0] + os.sep + elms[1] + os.sep + elms[2] + os.sep + elms[3]
there(rpath) 
```

这在控制台中返回：

```
usuals
D:\ImHere\meToo exists
D:\ImHere\meToo\ImNot does not exist
D: exists
D:ImHere exists
D:ImHere\meToo exists
D:ImHere\meToo\ImNot does not exist
D:\ImHere\meToo\ImNot does not exist 
```

但比较一下：

```
# now, this 'flat loop' is ok too
print('\nflat loop')
wpath = elms[0]
wpath += os.sep + elms[1]
wpath += os.sep + elms[2]
wpath += os.sep + elms[3]
there(wpath) 
```

得到 ：

```
flat loop
D:\ImHere\meToo\ImNot does not exist 
```

有了这个 ：

```
# but if one calls isdir() in the process
# something is altered, and this ALWAYS returns dir exists
print('\nfails ?')
wpath = elms[0]
wpath += os.sep + elms[1]
there(wpath)
wpath += os.sep + elms[2]
there(wpath)
wpath += os.sep + elms[3]
there(wpath) 
```

**win8/python 33：KO**

```
fails ?
D:\ImHere exists
D:\ImHere\meToo exists
D:\ImHere\meToo\ImNot exists 
```

**winXP/python 322：好的**

```
fails ?
D:\ImHere exists
D:\ImHere\meToo exists
D:\ImHere\meToo\ImNot does not exist 
```

似乎对 isdir() 的调用会破坏字符串中的某些内容？

*第一篇文章*

 *（对不起，如果它是重复的，我想 [Python 中的这个字符串连接](https://stackoverflow.com/questions/3371745/string-concatenation-in-python) 可以帮助解决这个问题，但是当我今晚生气时，我需要分享这个。）

我在一个模块中编写了这个小循环，以在它们不存在时创建递归目录。这在 xp、python 3.2 上运行良好：

```
def mkdir(path) :
    path = clean(path)  # this one generates unix like path
    parts = path.split('/')
    tpath = parts[0]
    for pi in range(1,len(parts)) :
        tpath += '/%s'%parts[pi]
        if os.path.isdir(tpath) == False :
            os.mkdir(tpath) 
```

但是当使用 windows8 + python 33 时，目录 test 总是返回 true.. ？经过数小时的挖掘和试验引号和斜线的东西..我发现问题出在这一行：

```
tpath += '/%s'%parts[pi] 
```

和

```
tpath = '%s/%s'%(tpath,parts[pi]) 
```

解决了这个案子。

对我来说很奇怪的是，奇怪的是我的意思是绝对迷幻的是，无论代码看起来如何，生成的字符串都是相同的：

```
print(os.path.isdir(tpath),tpath==path) 
```

在第一种情况下，最后一个目录给了我'True True'：生成的字符串和输入的字符串是相同的（并且类型是字符串），但是最后一个目录不存在..

并且在版本之后它应该返回一个'False True'。* 

*我非常害怕。几个小时后，世界看起来很奇怪。什么附加字符串 += 连接类型是好的， bool() 测试是好的......？请让我免于疯狂..非常感谢。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:06:38.953

总结一下：正如 Mark Dickinson 提到的，python 3.3 中的 os.path.isdir() 存在与 Unicode 格式相关的错误（[#17137](http://bugs.python.org/issue17137)）。它看起来会在下一个版本和 alpha 版本中修复。

同时，为了测试给定路径中是​​否存在文件夹名称，无论 os 和 python >= 3.2 版本是什么，我都得到了一致的结果，在测试循环中使用 os.path.join() 而不是 "path +=" 字符串连接：

```
path = "D:\ImHere\meToo\Imnot"

def there(p) :
    print('%s %s'%(p,'exists' if os.path.isdir(p) else 'does not exist'))

elms = path.split('\\')
jpath = ''
for elm in elms :
    jpath = os.path.join(jpath,elm)
    there(jpath) 
```

所以，不要在 python 3.3 中使用 + 与 isdir() 连接，并与 join() 连接

*[等待标记批准:)]*

# compact-framework - Visual Studio 设备：连接到 .Net CF CLR Profiler 时出现不支持的指令集错误

> ID：14135850
> 
> 赞同：1
> 
> 时间：2013-01-03T09:11:36.993
> 
> 标签：compact-framework, remote-debugging, windows-embedded-compact

我无法使用 连接到我的设备`.Net CF CLR profiler`。

我收到错误`Visual Studio Device: Unsupported Instruction Set`。

我正在使用通过连接运行的ARM`V7`处理器。`WEC7``USB ActiveSync`

任何想法为什么我可能会收到此错误？

# java - 计算日期之间的天数

> ID：14135856
> 
> 赞同：1
> 
> 时间：2013-01-03T09:11:56.513
> 
> 标签：java

我知道计算两个日期之间的天数。

[Java，计算两个日期之间的天数](https://stackoverflow.com/questions/7103064/calculate-the-number-of-days-between-two-dates)

但我无法理解如何在下面的代码中进行计算。特别是下面突出显示的那个。

`return (int)( (d2.getTime() - d1.getTime()) / (`**1000** `*`**60** `*`**60** `*`**24**`));`

请让我知道这背后的逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:15:55.880

您链接的问题有[Jon Skeet 的答案](https://stackoverflow.com/a/7103102/961113)。你应该考虑到这一点。对于您的代码，两个日期之间的差异以**毫秒**返回。要转换为一天，计算方法是：

```
(1000       *    60     *  60     *    24));
 millisecond  seconds    minutes    hours in day ==> One day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:16:11.447

时间以毫秒表示，所以你有**24 * 60 * 60 * 1000**因为

```
24 * there are 24 hours in a day
60 * there are 60 minutes in an hour
60 * there are 60 seconds in a minute
1000 * there are 1000 milliseconds in a second 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:16:34.367

Dude`getTime()`方法为您提供以毫秒为单位的时间。所以差异只有毫秒，然后您尝试通过将其除以 1000 将其转换为秒，然后通过将其除以 60 转换为分钟，然后转换为小时，然后再转换为天（1 天是 24 小时）。

我希望你能明白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:17:07.603

方法 getTime() 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来由该 Date 对象表示的毫秒数，如下所述：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)

而且我相信我什至不必描述其余部分，因为这是您可能不清楚的唯一事情；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T09:21:25.900

这很直接。

1.  (d2.getTime() - d1.getTime()) 给你区别没有。两个日期之间的毫秒数。

2.  1000 * 60 * 60 * 24 为您提供一天中的毫秒数。

3.  显式转换为 (int) 为您提供确切的天数。

仅此而已。

# php - 如何将模板集成到 Codeigniter 中？

> ID：14135857
> 
> 赞同：1
> 
> 时间：2013-01-03T09:11:57.137
> 
> 标签：php, codeigniter-2

我是 Codeigniter 的新手。您如何集成模板？就像是：

header_template.php 等...

现在我这样做：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Page extends CI_Controller {

    public function index()
    {   
        $this->load->view('head_template.php');
        $this->load->view('header_template.php');
        $this->load->view('navigation_template.php');
        $this->load->view('page_view.php');
        $this->load->view('footer_template.php');

    }
} 
```

虽然这很好，但必须有更好的方法。我必须将它包含在每个控制器中，这有点吓人。

我知道模板引擎，但这不是我想要的。另外，它在 Codeigniter 文档中说它很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:16:30.277

使用[这个寺庙引擎](http://williamsconcepts.com/ci/codeigniter/libraries/template/index.html)也很容易和很好的文档

检查这个 git repo 以获取带有 CI 和模板引擎的示例应用程序

[github.com/mrsrinivas/ci_template](http://github.com/mrsrinivas/ci_template)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:26:04.650

```
 public function index()
{   
    $data["header"]     = $this->load->view('head_template.php',"",true);
    $data["navigation"] = $this->load->view('navigation_template.php',"",true);
    $data["footer"] = $this->load->view('footer_template.php',"",true);
    $this->load->view('page_view.php', $data, false);
} 
```

在你的“page_view.php”里面

```
<html>
<body>
<?php
  echo $header;
  echo $navigation;
  echo $footer;
?>
</body>
</html> 
```

您可以在 -http://www.codeignitor.com/user_guide/general/views.html 找到更多信息

包含的代码仅用于模板包含的示例-

```
class Template extends CI_Controller{

 public function __construct(){
    parent :: __construct();
}

/**
 * TODO: Get the template from database or some configuration file
 * 
 * 1) Get Template hook
 * 2) Get Header
 * 3) Get Footer
 * 4) Get other hooks
 */
public function loadTemplate($viewName, $headerData = "", 
                            $viewData="", $footerData=""){
    $headerData["userId"] = (is_numeric($this->CI->session->userdata("userId")))
                            ? $this->CI->session->userdata("userId") : null;                            
    $this->CI->load->view('header/header', $headerData);
    $this->CI->load->view($viewName, $viewData);
    $this->CI->load->view('footer/footer', $footerData);
}
} 
```

// 模板类以进一步的代码结束

```
// Login.php that extends template class
class Login extends Template {
  public function Login() {
    parent :: __construct();
}

  public function getUserDetails(){
    $userDetails = $this->loadTemplate("myDataNeedToshow");

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T05:30:34.237

助手可以帮助您进行干净的集成。我的示例代码：

[辅助函数](https://github.com/hashimi/onlineBook/blob/master/application/helpers/template_helper.php)

[控制器](https://github.com/hashimi/onlineBook/blob/master/application/controllers/admin/home.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:24:52.623

上一个评论者列出的模板引擎很好，但是很长一段时间没有更新，对于您的目标可能有点矫枉过正。

虽然这可能有效，但我相信[这个非常简单的布局库](https://github.com/EllisLab/CodeIgniter/wiki/layout-library)正是您正在寻找的。

这是非常非常基本的，但可以完成工作。我过去已经扩展它以轻松地允许多个“内容部分”，但我通常使用它只是为了快速获取 html 页眉和页脚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T20:07:11.457

我所做的是在视图文件夹中有一个名为 template.php 的文件，如下所示：

```
views/template.php:
<?= $this->load->view('header_view');?>
<?= $this->load->view($load_page);?>
<?= $this->load->view('footer_view');?> 
```

然后在控制器中我这样称呼它：

页面.php：

```
$page = array(
        'meta_title' => 'Register Package',
        'load_page' => 'package_view'
        );
        $this->load->view('template', $page); 
```

我确定有更好的方法，但我会在有时间的时候研究一下

# jpa - 在 JPA 中急切地获取所有集合

> ID：14135858
> 
> 赞同：2
> 
> 时间：2013-01-03T09:11:57.777
> 
> 标签：jpa, jpa-2.0, eclipselink, jpql

是否可以仅在特定查询中急切地获取实体层次结构中的所有集合？

例如，

实体**Department**有一个实体**Employee**的列表。**Employee**有一个实体**Address** 列表和一个实体**Credentials**列表。**Department** 有另一个实体**Project**列表。

我想在特定查询中而不是在其他情况下急切地获取所有这些集合（在我的实际情况下有更多集合）`SELECT dept FROM Department dept`（因此不能使用 FetchType.EAGER 进行注释）。可能吗？

我正在使用 Eclipselink。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T14:00:16.223

您可以使用连接提取、批量提取或加载组。

我会推荐批量获取而不是连接获取，因为它会在多个集合中表现得更好。

看，

[http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html](http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html)

此外， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/q_batch.htm#batch](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/q_batch.htm#batch)

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/q_join_fetch.htm#fetch](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/q_join_fetch.htm#fetch)

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#Load_Examples](http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#Load_Examples)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T10:04:50.293

JPA 不允许嵌套提取连接，您应该使用 EclipseLink 查询提示`eclipselink.join-fetch`。[请参阅此问题](https://stackoverflow.com/questions/8195252/jpa-fetch-join-query)的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:25:50.730

如果我没记错的话，您需要[`FETCH JOIN`](http://docs.oracle.com/cd/E11035_01/kodo41/full/html/ejb3_langref.html#ejb3_langref_fetch_joins)在查询中使用语句。

> 另请参阅：[获取连接](http://docs.oracle.com/cd/E13189_01/kodo/docs40/full/html/ejb3_overview_query.html#ejb3_overview_join_fetch)

# java - GWT 为我的所有 Web 应用程序启用 esc 键

> ID：14135859
> 
> 赞同：0
> 
> 时间：2013-01-03T09:11:57.597
> 
> 标签：java, gwt, keyboard

当我在 Web 应用程序的每个面板中按 esc 键时，我需要添加一个功能。特别是当我在我的 Web 应用程序中按 esc 键时，我需要显示一个面板，如果需要从 Web 应用程序退出，该面板会发出警报。

我的问题是：如何启用 esc 快捷键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:11:14.873

在 GWT 中，您通常使用[`NativePreviewHandler`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/Event.html#addNativePreviewHandler%28com.google.gwt.user.client.Event.NativePreviewHandler%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:25:23.193

这是我从事的一个项目的一个片段，它应该让你知道该怎么做：

```
public class MyDialogBox extends com.google.gwt.user.client.ui.DialogBox 
{
    @Override
    protected void onPreviewNativeEvent(Event.NativePreviewEvent event)
    {
        super.onPreviewNativeEvent(event);
        switch (event.getTypeInt())
        {
            case Event.ONKEYDOWN:
                if (event.getNativeEvent().getKeyCode() == KeyCodes.KEY_ESCAPE) 
                {
                    // do stuff
                }
                break;
        }
    }
} 
```

# sql - SQL SELECT 列字母前缀

> ID：14135861
> 
> 赞同：2
> 
> 时间：2013-01-03T09:12:03.693
> 
> 标签：sql, sql-server, tsql, select

我讨厌不得不发布这个问题，因为我确信这很容易，但我似乎无法在任何地方找到答案。我正在从两个表中提取数据，并希望在 ID 前面加上一个字母以指示它来自哪个表。例如

```
SELECT 'A' + ID as originID FROM theTable 
```

但是我收到了错误

```
Conversion failed when converting the varchar value 'A' to data type int. 
```

我认为这是因为“+”加号导致 SQL 尝试将两个值相加。我尝试了几种不同的方法，但得到了相同的结果，例如：

```
DECLARE @a VARCHAR(1) SET @a = 'A' "
SELECT @a & [ID] AS originID 
```

在 PHP 中，我通常会使用“。” 用于连接，“+”用于加法。在 SQL 中是否有另一种连接字符串的方法？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T09:13:07.623

利用`CAST`

```
SELECT 'A' + CAST(ID as VARCHAR(15))
FROM... 
```

*   [CAST 和 CONVERT ( *Transact-SQL* )](http://msdn.microsoft.com/en-us/library/ms187928.aspx) ^(归功于**Vaze**)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:51:28.943

你也可以试试|| 用于连接。这应该工作：

```
SELECT 'A' || ID as originID FROM theTable 
```

# c# - RhinoMocks - 当一个方法被调用n次时，如何在n-k次调用中测试它的参数

> ID：14135869
> 
> 赞同：6
> 
> 时间：2013-01-03T09:12:30.827
> 
> 标签：c#, unit-testing, rhino-mocks

我有一个方法可以准确地调用另一个方法 4 次，每次都使用不同的参数。我想编写 4 个不同的单元测试用例来检查方法是否被调用，每次调用都有一个特定的值。

这是我的方法的外观：

```
public void MainMethod()
{
    IServiceProvider serviceProvider = GetServiceProvider();

    string value1 = GetValueFromStorage("SomeArg1");
    // Call AnotherMethod
    serviceProvider.AnotherMethod(value1);

    string value2 = GetValueFromStorage("SomeArg2");
    // Call AnotherMethod
    serviceProvider.AnotherMethod(value2);

    string value3 = GetValueFromStorage("SomeArg3");
    // Call AnotherMethod
    serviceProvider.AnotherMethod(value3);

    string value4 = GetValueFromStorage("SomeArg4");
    // Call AnotherMethod
    serviceProvider.AnotherMethod(value4);
} 
```

这是我的测试方法：

```
public void TestMainMethod()
{
    // Stub storage
    IDataStorage dataStorage = MockRepository.GenerateStub<IDataStorage>();

    // Stub serviceProvider
    IServiceProvider dataStorage = 
         MockRepository.GenerateStub<IServiceProvider>();

    // stub for SomeArg1
    dataStorage.Stub(x => x.GetValueFromStorage(null)
                           .IgnoreArguments().Return("Value1"))
                           .Repeat.Once();

    // stub for SomeArg2
    dataStorage.Stub(x => x.GetValueFromStorage(null)
                           .IgnoreArguments().Return("Value2"))
                           .Repeat.Once();

    // stub for SomeArg3
    dataStorage.Stub(x => x.GetValueFromStorage(null).IgnoreArguments()
                           .Return("Value3")).Repeat.Once();

    // stub for SomeArg4
    dataStorage.Stub(x => x.GetValueFromStorage(null).IgnoreArguments()
                           .Return("Value4")).Repeat.Once();

   // call MainMethod
   MainMethod();

   // Assert that third call is called with "Value3"
   serviceProvider.AssertWasCalled(x => x.AnotherMethod("Value3"));
} 
```

这里似乎我不能忽略其他调用，而只是验证第三个调用是使用特定参数调用的（或者就此而言，序列中的任何其他调用）。看来我必须四次调用“AssertWasCalled”并按顺序检查各个参数。那么我怎样才能做到这一点呢？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:27:06.310

我认为你可以使用`GetArgumentsForCallsMadeOn(Action<T>)`. 自从我使用它以来已经很长时间了，但它为您提供了一个包含对象数组的列表，这些对象是每次调用的调用参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:09:17.667

如果 RhinoMocks 支持类似 Moq 的回调语法，您可以为 IServiceProvider.AnotherMethod 实现回调（或等效），并让该回调将 AnotherMethod 的参数放入列表中以供以后检查。起订量是这样的：

```
var anotherMethodParams = new List<string>();
var serviceProvider = new Mock<IServiceProvider>();

//Setup in Moq seems to be somewhat analogous to Stub in RhinoMocks
serviceProvider.Setup(sp => sp.AnotherMethod(It.IsAny<string>()))
               .Callback((string s) => { anotherMethodParams.Add(s); }));

var x = GetTheObjectThatWillCallServiceProviderAnotherMethod();
x.GetValueFromStorage("Value1");
x.GetValueFromStorage("Value2");
x.GetValueFromStorage("Value3");

//Assert that the parameter to the second call of AnotherMethod is as expected.
Assert.AreEqual("Value2", anotherMethodParams[1]); 
```

对不起，起订量的例子，但这是我所熟悉的。

# android - 无法导入 android.os.strictmode

> ID：14135871
> 
> 赞同：0
> 
> 时间：2013-01-03T09:12:34.400
> 
> 标签：android, android-strictmode

关于开发带有 web 服务的 android 应用程序。它使用：

```
 <uses-sdk android:minSdkVersion="8"
         android:targetSdkVersion="8" /> 
```

我在导入时遇到问题`import android.os.StrictMode;`（无法解决），我的代码给了我一个异常“ `java.net.SocketException: Permission denied for android`”，因为这个。如果 api 8 不支持 strictmode。它的替代方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:19:15.160

嘿 StrictMode 类是在 API 级别 9 中引入的，您的项目目标是 API 级别 8。请参考此[链接](http://developer.android.com/reference/android/os/StrictMode.html)。所以你得到了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:24:55.670

转到 AndroidManifest.xml 文件

在你的文件中 minSdkVersion 是 8

```
<uses-sdk android:minSdkVersion="8" /> 
```

将 SDK 版本更改为 9，如下所示

```
<uses-sdk android:minSdkVersion="9" /> 
```

它会解决你的问题。

有关 StrictMode 的更多信息，请参见下面的链接。

[Android - 严格模式](http://developer.android.com/reference/android/os/StrictMode.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:34:46.513

如果您仍想使用 API Level 8。

检查此链接：

[适用于所有平台版本的 Android StrictMode](http://www.simpligility.com/2011/01/android-strictmode-for-all-platform-versions/)

谢谢。

# algorithm - 有效地计算一行中给定“块”集的排列

> ID：14135873
> 
> 赞同：2
> 
> 时间：2013-01-03T09:12:38.573
> 
> 标签：algorithm, language-agnostic, permutation

我正在开发一个应用程序，其中我有许多应该放在一条线上的块。即有不同数量的块，每个块都有不同的长度，应该放在线上。块之间至少需要有一个空元素。

我想有效地获得在线上所有可能的块排列。

例如，我有一条长度为 15 的线，想放置 1、6 和 1 大小的块。

顺序很重要，即在我的示例中，1-size 块始终应位于 6-size 块的左侧和右侧。

可能的排列是

```
X.XXXXXX.X.....
X..XXXXXX.X....
...
.....X.XXXXXX.X 
```

如何有效地生成高级语言（例如 Java）中所有可能的排列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:24:08.480

一种方法是递归地处理它：

1.  如果存储所有块之间只有一个空格所需的最小总长度超过可用空间，则无法放置块。
2.  否则，如果你没有要放置的方块，那么放置方块的唯一方法就是让所有方块都空着。
3.  否则，有两种选择。首先，您可以将第一个块放置在行中的第一个位置，然后在行首留下一个额外的空白空间后，递归地将剩余的块放置在行内的剩余空间中。其次，您可以将行中的第一个空格留空，然后递归地将同一组块放置在该行的剩余空间中。尝试这两个选项并将结果组合在一起应该会给您正在寻找的答案。

将这种递归逻辑转换为实际的 Java 应该不会太困难。下面的代码是为了可读性而设计的，可以稍微优化一下：

```
public List<String> allBlockOrderings(int rowLength, List<Integer> blockSizes) {
    /* Case 1: Not enough space left. */
    if (spaceNeededFor(blockSizes) > rowLength)) return Collections.EMPTY_LIST;

    List<String> result = new ArrayList<String>();

    /* Case 2: Nothing to place. */
    if (blockSizes.isEmpty()) {
        result.add(stringOf('.', rowLength));
    } else {
        /* Case 3a: place the very first block at the beginning of the row. */
        List<String> placeFirst = allBlockOrderings(rowLength - blockSizes.get(0) - 1,
                                                    blockSizes.subList(1, blockSizes.length()));
        for (String rest: placeFirst) {
             result.add(stringOf('X', blockSizes.get(0)) + rest);
        }

        /* Case 3b: leave the very first spot open. */
        List<String> skipFirst = allBlockOrderings(rowLength - 1, blockSizes);
        for (String rest: skipFirst) {
             result.add('.' + rest);
        }
    }
    return result;
} 
```

您需要实现该`spaceNeededFor`方法，该方法返回可能包含给定块列表的最短行的长度，以及该`stringOf`方法，该方法接受一个字符和一个数字，然后返回一个包含那么多副本的字符串给定的字符。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:50:42.897

对我来说，以另一种方式思考这个问题似乎更容易：

我们有固定顺序的固定块，用点分隔。我们可以通过将剩余的点分布在允许的位置上来创建所有排列。

线的这个固定部分的长度是：

```
fixed_len = length_of_all_blocks + number_of_blocks - 1 
```

剩余点数为

```
free_dots = length_of_line - fixed_len. 
```

空缺职位数为

```
pos_count = number_of_blocks + 1 
```

现在我们必须找到如何将 free_dots 放入 pos_count 的所有排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:30:41.813

很难确定什么是“有效实现”，因为输出可能非常大，因此即使是快速实现也不够快。

我会为此类任务使用动态编程和递归技术。递归函数应该采用两个参数 - 未使用数字的列表和行的剩余长度。里面将是一个简单的循环。您应该存储您已经知道的结果。我相信你可以自己处理细节。编辑：我们的朋友已经为您做到了:-)。

顺便问一下，这样的任务的目标是什么？我仍然对网格中的图片感兴趣，其中每一行和每一列都有这样的数字，你需要对图片进行解码。有更好的方法来解决此类问题。

# php - 如何生成由连字符分隔的随机密钥

> ID：14135877
> 
> 赞同：0
> 
> 时间：2013-01-03T09:12:50.860
> 
> 标签：php, random, yii

我正在研究 Yii。我想生成 20 位随机密钥。我写了一个函数 -

```
public function GenerateKey()
{
    //for generating random confirm key
     $length = 20;
     $chars = array_merge(range(0,9), range('a','z'), range('A','Z'));
     shuffle($chars);
     $password = implode(array_slice($chars, 0, $length));
     return $password;
} 
```

此功能正确生成 20 位密钥。但我想要像
“g12a-Gh45-gjk7-nbj8-lhk8”这样的格式的密钥。即用hypen分隔。那么我需要做哪些改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T10:56:18.793

你可以使用这个 Yii 内部函数：

```
Yii::app()->getSecurityManager()->generateRandomString($length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:54:33.257

You can use [chunk_split()](http://php.net/manual/en/function.chunk-split.php) to add the hyphens. [substr()](http://php.net/manual/en/function.substr.php) is used to remove the trailing hyphen it adds, leaving only those hyphens that actually separate groups.

```
return substr(chunk_split($password, 4, '-'), 0, 24); 
```

However, note that [shuffle()](http://php.net/manual/en/function.shuffle.php) not only uses a [relatively poor PRNG](http://php.net/manual/en/function.rand.php) but also will not allow the same character to be used twice. Instead, use [mt_rand()](http://php.net/manual/en/function.mt-rand.php) in a for loop, and then using chunk_split() is easy to avoid:

```
$password = '';
for ($i = 0; $i < $length; $i++) {
    if ( $i != 0 && $i % 4 == 0 ) { // nonzero and divisible by 4
        $password .= '-';
    }
    $password .= $chars[mt_rand(0, count($chars) - 1)];
}
return $password; 
```

(Even mt_rand() is not a cryptographically secure PRNG. If you need to generate something that must be *extremely* hard to predict (e.g. an encryption key or password reset token), use [openssl_random_pseudo_bytes()](http://php.net/manual/en/function.openssl-random-pseudo-bytes.php) to generate bytes and then a separate function such as [bin2hex()](http://php.net/manual/en/function.bin2hex.php) to encode them into printable characters. I am not familiar with Yii, so I cannot say whether or not it has a function for this.)

# ruby-on-rails - Rails Admin 在heroku 上空了

> ID：14135878
> 
> 赞同：0
> 
> 时间：2013-01-03T09:12:54.643
> 
> 标签：ruby-on-rails, heroku, rails-admin

我正在尝试在 heroku 上使用 Rails Admin。它在生产和开发中都能完美运行，但是当我尝试通过 heroku 访问 /admin 时，仪表板呈现完全空白（它具有基本的 Rails Admin 脚手架，但没有我的内容）。该网站的其余部分工作正常。heroku 日志中没有错误，如下所示：

```
2013-01-03T09:05:48+00:00 app[web.1]: 
2013-01-03T09:05:48+00:00 app[web.1]: 
2013-01-03T09:05:48+00:00 app[web.1]: Started GET "/admin/" for 76.93.177.75 at 2013-01-03 09:05:48 +0000
2013-01-03T09:05:48+00:00 app[web.1]: Processing by RailsAdmin::MainController#dashboard as HTML
2013-01-03T09:05:48+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/rails_admin-0.0.3/app/views/rails_admin/main/dashboard.html.haml within layouts/rails_admin/application (0.3ms)
2013-01-03T09:05:48+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/rails_admin-0.0.3/app/views/layouts/rails_admin/_secondary_navigation.html.haml (1.3ms)
2013-01-03T09:05:48+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/rails_admin-0.0.3/app/views/layouts/rails_admin/pjax.html.haml (2.1ms)
2013-01-03T09:05:48+00:00 app[web.1]: Completed 200 OK in 20ms (Views: 17.2ms | ActiveRecord: 1.4ms)
2013-01-03T09:05:48+00:00 heroku[router]: at=info method=GET path=/admin/ host=rocky-oasis-1876.herokuapp.com fwd=76.93.177.75 dyno=web.1 queue=0 wait=0ms connect=12ms service=43ms status=200 bytes=2603
2013-01-03T09:05:48+00:00 heroku[router]: at=info method=GET path=/assets/rails_admin/rails_admin-b54745219c9cfcf789963ed61310c222.css host=rocky-oasis-1876.herokuapp.com fwd=76.93.177.75 dyno=web.1 queue=0 wait=0ms connect=1ms service=29ms status=200 bytes=129747
2013-01-03T09:05:48+00:00 heroku[router]: at=info method=GET path=/assets/rails_admin/rails_admin-713b6f759f0edf80a0c69b3ced027e1e.js host=rocky-oasis-1876.herokuapp.com fwd=76.93.177.75 dyno=web.1 queue=0 wait=0ms connect=1ms service=34ms status=200 bytes=283158
2013-01-03T09:05:49+00:00 heroku[router]: at=info method=GET path=/assets/glyphicons-halflings-f6675c325532ec11a984d58e172b8e2a.png host=rocky-oasis-1876.herokuapp.com fwd=76.93.177.75 dyno=web.1 queue=0 wait=0ms connect=1ms service=7ms status=200 bytes=13826 
```

我不确定还包括什么，因为一切都在“工作”。我正在使用 rails 3.2.9 和 rails_admin 0.0.3，以及最新的 heroku 工具带。如果有人有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:17:38.237

你不是一个人。我也有这个，似乎其他人也有。对我有用的解决方案是升级 rails_admin。之所以可行，是因为在以后的版本中已将修复提交给 rails_admin；这是一个链接：

[https://github.com/sferik/rails_admin/pull/1184](https://github.com/sferik/rails_admin/pull/1184)

这个拉取请求是在你说你正在使用的版本 0.0.3 之后出现的，所以我认为升级会对你有所帮助。

```
bundle update rails_admin 
```

完成此操作后，请记住提交您的 Gemfile.lock、预编译资产（如果您通常这样做，这取决于您的设置）并在部署之前运行您的测试。

# c# - StyleCop - 运算符优先级的 CSharp.Maintainability 警告

> ID：14135885
> 
> 赞同：5
> 
> 时间：2013-01-03T09:13:19.963
> 
> 标签：c#, .net, math, stylecop, brackets

考虑以下算术计算。为了简单起见，我尽可能地缩短了它们：

```
x = y + y * z;

x = y + z - y * z; 
```

这在没有 StyleCop 的情况下是完全合法的，并且可以推测，计算遵循 BODMAS（任何算术计算也应该如此）。

当它通过 StyleCop 时，它会显示以下警告：

> CSharp.Maintainability ：在算术表达式中插入括号以声明运算符优先级。

据推测，我需要做的就是在插入括号时遵循 BODMAS 的规则，如下所示：

```
x = y + (y * z);

x = (y + z) - (y * z); 
```

正如我在我的假设中纠正的那样，如果我想要执行计算，StyleCop 希望我明确定义 BODMAS 的规则，就像没有括号一样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T09:16:48.133

它是正确的。StyleCop 基本上假设您对运算符优先级不太满意，并希望将其明确写出来。如果稍后有人在公式上工作，这可能会导致更稳定的代码。它在技术上是不需要的——但是你假设你的假设是绝对正确的，编译器将如何处理它。当然，通常情况下（BODMAS）。

最后，这是一个“你可能不知道你在做什么，所以我们确保你把它写出来”的情况。这不是一个坏态度——代码稳定性是主要问题——但你也可以关掉这个警告。

# css - Bootstrap 样式表的正确顺序

> ID：14135887
> 
> 赞同：1
> 
> 时间：2013-01-03T09:13:26.820
> 
> 标签：css, twitter-bootstrap

[Twitter Bootstrap API](http://twitter.github.com/bootstrap/components.html#navbar)告诉我添加我的css 以向`bootstrap`css 和css之间的 body 元素添加填充`bootstrap-responsive`。我已经在`_master`文件中这样做了，但它似乎还没有添加填充。

我读错了还是可能有其他问题？

**我的`_master`头部分**

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get Bootstrapped</title>
<link href="@Url.Content("~/css/bootstrap.css")" rel="stylesheet" />
<link href="@Url.Content("~/css/skin.css")" rel="stylesheet" />
<link href="@Url.Content("~/css/bootstrap-responsive.css")" rel="stylesheet" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <a class="brand" href="#">Title</a>
                <ul class="nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                </ul>
            </div>
        </div>
        <div>
            @RenderBody()
        </div>
    </div>
    <script src="~/js/bootstrap.js"></script>
</body> 
```

**CSS**

```
body {
    padding-bottom: 40px;
} 
```

**身体填充不工作的可视化（一直滚动到顶部）** ![在此处输入图像描述](../Images/92e6cb7e843ac4b3259337ee23c7c233.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:06:33.633

你需要做的是给`padding-top: 40px`包含身体的 div 一个。

例如：[小提琴](http://jsfiddle.net/arunpjohny/P4YWT/)

```
<div class="container">
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <a class="brand" href="#">Title</a>
            <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Link</a></li>
                <li><a href="#">Link</a></li>
            </ul>
        </div>
    </div>

    <div style="padding-top: 40px">
        some content 1<br />
        some content 2<br />
        some content 3<br />
        some content 4<br />
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:38:52.693

我想你可能想`padding-top: 40px`改用？

# internationalization - 如何在 Yii 控制台应用程序中使用翻译？

> ID：14135891
> 
> 赞同：1
> 
> 时间：2013-01-03T09:14:16.487
> 
> 标签：internationalization, yii, console-application

我创建了一个控制台 Yii 应用程序，它作为 Web 应用程序的后台工作人员 - 它发送电子邮件，并且需要发送带有翻译消息的电子邮件。

但是由于某种原因，使用时不会翻译消息`Yii::t`

如果我使用 将语言设置为英语以外的语言`Yii::app->setLanguage('et_ee')`，并检查它是否真的改变了`Yii::app->getLanguage()`，文本总是用英语。

当我从 web 运行相同的命令时，文本被正确翻译。

我想我必须做一些特别的事情才能让翻译在控制台应用程序中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T14:47:09.487

You need to specify the `messages` component in your `console.php` configuration

```
'messages' => array(
  'class' => 'CDbMessageSource',
  'forceTranslation'=>true,
  'sourceMessageTable' => 'source_message',
  'translatedMessageTable' => 'translated_message',
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T23:26:04.567

只需添加字符串（例如 - 俄语）：

```
'language' => 'ru' 
```

在 config/console.php 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:53:13.007

我有这个错误。我不知道如何修复它。我将 lang array trow require('path/to/message/ru/message.php') 放入 var 并使用它。这是错误的，但它对我有用。

# sharepoint - 无法将大文件上传到 Office 365 站点

> ID：14135897
> 
> 赞同：0
> 
> 时间：2013-01-03T09:14:45.597
> 
> 标签：sharepoint, file-upload, office365

我们有一个 Office 365 网站。当我们从浏览器上传几 MB 的文档时，它们已成功上传到文档库，但是当我们尝试上传大小大于 50MB 的文件时，我们收到连接关闭/中断错误

在 IE 中，我们得到： ![在此处输入图像描述](../Images/26af89309d06cd49fe908667bb927b62.png)

在 Chrome 中，我们得到

![在此处输入图像描述](../Images/51672a71516fb6104b59b2bf745850d8.png)

据我所知，Office 365 支持最大 250MB 的文件大小。请让我们知道，如果我们需要在客户端或服务器端设置任何设置/配置。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:06:50.533

是的，SharePoint online 的限制是 250MB 的单个文件。

建议：

1.  尝试映射驱动器并拖放
2.  尝试使用 SharePoint Workspace 等客户端工具
3.  检查出站防火墙超时。也许尝试另一个位置？

谢谢罗伯特·克兰 www.ciaops.com

# css - 如何从 twitter bootstrap 中删除未使用的样式？

> ID：14135905
> 
> 赞同：24
> 
> 时间：2013-01-03T09:15:05.860
> 
> 标签：css, twitter-bootstrap, responsive-design

我的引导样式表大小约为 120kb。

但我只使用了 25% 的样式表代码。

我不想要那个 span* 类。[我通过在引导程序自定义页面](http://twitter.github.com/bootstrap/customize.html)中对其进行自定义来尝试它。

我未选中网格系统，但我仍然`span1 - span12 class`在表单、表格和响应式布局中看到。

有人可以帮我删除这些代码吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-03-28T02:40:59.733

在与 grunt 斗争了一个小时后，我决定自己尝试[uncss](https://github.com/giakki/uncss)，它要简单得多。如果您只有几页要做，或者不介意手动操作，我建议您这样做。

uncss 页面有完整的说明，但总结一下：

1.  安装 node.js。
2.  `npm install -g uncss`
3.  从[uncss](https://github.com/giakki/uncss)页面复制示例文件，并将其命名为任何带有 .js 扩展名的名称。我将其命名为 uncss.js。
4.  用您的 html 文件替换 files 数组。（看起来像`var files = ['my', 'array', 'of', 'HTML', 'files']`）
5.  用您的样式表替换样式表数组。（看起来像`stylesheets : ['lib/bootstrap/dist/css/bootstrap.css', 'src/public/css/main.css']`）。如果需要，同样更改“csspath”的值。
6.  运行`node uncss.js`（或任何你调用你的 uncss 文件）。它将优化后的 CSS 直接输出到命令行，因此将其保存到一个类似`node uncss.js > mynewcss.css`.

有很多选项可以定制行为。我忽略了所有这些，它工作得很好，但如果你想要它们，它们就在那里。我测试它的页面从 138kb 变成了 9kb。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-11T11:14:49.897

我遇到了完全相同的问题！

我写了一个工具来删除 bootstrap.css 中所有未使用的 CSS 样式规则

结果，**59% 规则**被删除，css 文件大小从**121KB 减少到 59KB**，在使用[Google PageSpeed](https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Fcoupon4share.com%2F)测试时**增加了大约 5 分**

源代码在这里[css-optimizer](https://github.com/thoqbk/css-optimizer)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T10:12:12.067

您是否更关心文件大小对用户加载时间的影响？或者想让你更容易阅读/理解CSS（如果它更短）？

无论哪种方式，我建议您不要花太多时间担心删除每一个额外的 CSS 样式。取消选中您不打算使用的 Bootstrap 元素并下载自定义版本。对于您网站的实时/生产版本，请使用 CSS 的最小化版本，这将进一步减小文件大小。

如果您只是想让代码更简单以供您使用，那绝对可以理解，但 Bootstrap 团队在组织它方面做得很好。花一点时间来处理它。

考虑尝试完全删除所有`span*`引用将删除您可能使用的功能，例如控制表单字段的宽度。即使您不使用网格，这些也非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:09:30.590

我认为 twitter 引导程序严重依赖这些`span*`类。当我只切换“Base CSS”下的“table”复选框时，我仍然会`span*`在编译的 css 中获得类，因为它们无论如何都会被渲染。看看[https://github.com/twitter/bootstrap/blob/master/less/tables.less](https://github.com/twitter/bootstrap/blob/master/less/tables.less)：

```
// R.185: Change the column widths to account for td/th padding
.table td,
.table th {
  &.span1     { .tableColumns(1); }
  &.span2     { .tableColumns(2); }
  &.span3     { .tableColumns(3); }
  &.span4     { .tableColumns(4); }
  &.span5     { .tableColumns(5); }
  &.span6     { .tableColumns(6); }
  &.span7     { .tableColumns(7); }
  &.span8     { .tableColumns(8); }
  &.span9     { .tableColumns(9); }
  &.span10    { .tableColumns(10); }
  &.span11    { .tableColumns(11); }
  &.span12    { .tableColumns(12); }
} 
```

所以恐怕你不能用定制器删除它们，只能手动删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-06T19:44:09.460

我有一个使用 Bootstrap 2 的模板，这是 Joomla 所需的系统。我只是手动完成了这项工作，发现它很容易做到。Bootstrap CSS 文件的结构非常好，并且在部分中排序良好。我将文件的全部内容删除到`bootstrap_unused.css`，然后也将其复制到`bootstrap_original.css`.

然后我从`bootstrap_unused.css`我知道的正在使用的文件中删除，小心地保留顺序，然后将其粘贴回去。大部分都是第一次工作，并将文件大小从 144KB 减少到 14KB。然后我需要为表单等添加一些零碎的东西，最终达到 30KB。

如果我将来需要任何其他功能，我可以将它们拉回来，`bootstrap_unused.css`我总是可以`bootstrap_original.css`参考。

# excel - 分裂什么的

> ID：14135916
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:15:37.027
> 
> 标签：excel

我正在使用 MS Excel。

我有两个数据表（逗号分隔）。

数据表 1 包含各种数据记录，但重要的是邮政编码。

数据表 2 包含邮政编码的第一部分（因此是 1 个字符或 2 个字符）以及这些邮政编码所链接到的英格兰地区。

我需要用整个邮政编码检查数据表 2 中邮政编码的第一部分，并将数据表 2 中的相应区域添加到数据表 1 上的记录中。

我确信 V-Lookup 或 Match 可能会起作用，但我真的无法理解它。

编辑

这是一个例子

数据表 1 -![在此处输入图像描述](../Images/0b985bd22f11cddd30f37f906b86b460.png)

数据表 2 -![在此处输入图像描述](../Images/9356b7e577d417fbea7805611f211ec3.png)

注意苏格兰（南部和中部）只有 1 个字符的部分邮政编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:56:51.603

希望这会对你有所帮助。

```
=IF(MATCH(VLOOKUP(MID(A2,1,1),F2:G6,2,FALSE),G2:G6,0)=1,VLOOKUP(MID(A2,1,1),F2:G6,2,FALSE),VLOOKUP(MID(A2,1,2),F2:G6,2,FALSE)) 
```

但是要注意保持索引的 $ 符号必须是恒定的。

![在此处输入图像描述](../Images/6e861b0b99b3f3b0ce23bb5bb259b72f.png)

# c# - 模板 IEnumerable 的 C# 模板方法 . 是否可以？

> ID：14135925
> 
> 赞同：0
> 
> 时间：2013-01-03T09:16:10.353
> 
> 标签：c#, templates, c#-3.0

有人可以帮我解决这个问题吗？

我有一个基类：

```
public class BaseShowFilter {
    public int    TotalCount { get; set; }  
    public int    FromNo { get; set; }
    public int    ShowCount { get; set; }
    public string SortFieldName { get; set; }
    public bool   SortAsc { get; set; }
} 
```

以及来自这个基类的几个 ChildClasses。然后我有一些其他类存储在（例如）

```
IEnumerable<OtherClassXXX> = .... 
```

我想使用 BaseShowFilter 中实现的相同方法对所有这些过滤器应用一些过滤器：

例如我需要

```
dstList = srcList.Skip(this.FromNo-1).Take(this.ShowCount); 
```

所以我需要在 BaseShowFilter 中实现一个函数，该函数将在参数 IEnumerable 中接受并且还将返回 IEnumerable

我该怎么写？在纯 C++ 中，它会像 1,2,3 一样简单......但在这里我不知道怎么做。结果可能是这样的：

```
public class BaseShowFilter {
    public int    TotalCount { get; set; }  
    public int    FromNo { get; set; }
    public int    ShowCount { get; set; }
    public string SortFieldName { get; set; }
    public bool   SortAsc { get; set; }

    public T FilterList<T>(T SrcList) where T :IEnumerable<> {
        return srcList.Skip(this.FromNo-1).Take(this.ShowCount);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:19:07.347

这是通常的方法：

```
public IEnumerable<T> FilterList<T>(IEnumerable<T> source)
{
    return source.Skip(this.FromNo - 1).Take(this.ShowCount);
} 
```

# jquery - find element is hidden or not

> ID：14135927
> 
> 赞同：1
> 
> 时间：2013-01-03T09:16:12.380
> 
> 标签：jquery

I have some labels on my html page, I use them for validation errors, If all the input data is right then I hide those labels, and if not, showing accordingly. I want, if any of the label is shown then, disable the submit button.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:18:46.407

try this

```
 if($('label:visible').length)
      {
          //disable the submit button here
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:19:53.050

try `:visible` to check if it is not hidden and `length()` to count the elements

```
if($('label:visible').length).. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:19:57.920

You can use jQuery [.is(":visible")](http://api.jquery.com/visible-selector/) to find if an element is visible.

# android-activity - DialogFragments 和活动，传递信息

> ID：14135928
> 
> 赞同：1
> 
> 时间：2013-01-03T09:16:12.880
> 
> 标签：android-activity, android-dialogfragment

我正在尝试向`DialogFragment`用户显示他的姓名，我需要将此字符串返回到我的主要活动中。

我按照 android 指南创建了一个自定义对话框片段：http: [//developer.android.com/guide/topics/ui/dialogs.html#CustomLayout](http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)

在我的代码中，为了响应用户点击肯定按钮，我可以在我的主要活动中调用一个函数：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // Get the layout inflater
    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.textdialog, null)).setPositiveButton("OK", new DialogInterface.OnClickListener(){
               @Override
               public void onClick(DialogInterface dialog, int id) {
                   ((mainActivity)getActivity()).doPositiveClick();
               }
           }).setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   ((mainActivity)getActivity()).doNegativeClick();
               }
           });      
    return builder.create();
} 
```

其中 R.layout.textdialog 是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<EditText
        android:id="@+id/textdraw"
        android:inputType="textEmailAddress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="4dp"
        android:hint="introduce text" />

</LinearLayout> 
```

我的问题是，如何在我的对话片段中获取用户编写的文本并将其发送回我的主要活动？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:03:59.723

好吧，我自己解决了（但不确定这是否是更好的方法）

我在我的`onCreateDialog`.

1.  将视图保存在变量中：

    `View v= inflater.inflate(R.layout.textdialog, null);`

2.  将编辑文本保存在变量中：

    `final EditText ed=(EditText)v.findViewById(R.id.textdraw);`

3.  当用户单击肯定按钮时，发回 edittext 变量中的值：

    `getActivity()).doPositiveClick(ed.getText().toString());`

完整代码在这里：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // Get the layout inflater
    LayoutInflater inflater = getActivity().getLayoutInflater();
    // Inflate and set the layout for the dialog
    // Pass null as the parent view because its going in the dialog layout
    View v= inflater.inflate(R.layout.textdialog, null);
    // reference to the edittext
    final EditText ed= (EditText)v.findViewById(R.id.textdraw);

    builder.setView(v).setPositiveButton("OK", new DialogInterface.OnClickListener(){
               @Override
               public void onClick(DialogInterface dialog, int id) {
                   ((mainActivity)getActivity()).doPositiveClick(ed.getText().toString());
               }
           }).setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   ((mainActivity)getActivity()).doNegativeClick();
               }
           });      
    return builder.create();
} 
```

和主要活动中的代码：

```
public void doPositiveClick(String ed){
    Toast.makeText(this, "Hi, "+ed, Toast.LENGTH_SHORT).show();
} 
```

# android - 通过 IClipboardDataPasteEventImpl 的内存泄漏

> ID：14135931
> 
> 赞同：8
> 
> 时间：2013-01-03T09:16:21.663
> 
> 标签：android, memory-leaks, android-ui

我注意到我的一项活动中出现了奇怪的记忆增加。因此我进行了一个小测试：我多次打开对话框（打开 - 关闭 - 打开 - 关闭 ....）并且内存不断增加。所以我使用 DDMS 转储一个 HPROF 文件并在[MAT](http://www.eclipse.org/mat/)（内存分析器）中打开它。泄漏嫌疑报告指出，内存消耗增长的主要原因是：

![在此处输入图像描述](../Images/c136f1f19c5d9d8d3ee1721e7f38bbdd.png)

所以我做了一个直方图，检查我运行测试的那个对话框，以及是什么让它保持活力。事实证明，它通过**AutoCompleteTextViews**保持活动状态，而 AutoCompleteTextViews 又通过**android.widget.TextView$IClipboardDataPasteEventImpl 保持活动状态。**但是，IClipboardDataPasteEventImpl 没有直接的支配者（当然，GC Root 除外）。我试图在互联网上找到 IClipboardDataPasteEventImpl 并搜索了 grepcode（android 源代码），但我唯一能想到的就是这个[博客条目](http://splash5.blogspot.de/2012/03/galaxy-s2-memory-leak-with-textview.html). 我看不懂那是什么语言，但我能读到的是英文单词，这表明它可能是三星 Galaxy SII 上的一个错误（我正在使用的手机，运行 android 2.3.x），与剪贴板管理器相关。但是我不确定这一点（我想解决这个问题，因此我不愿意简单地接受它是一个无法修复的错误）而且我不知道这个剪贴板是在哪里产生的以及为什么。我将非常感谢有关此事的任何指示/想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-28T11:05:47.677

### 调查

以下是我的研究结果：

*   它发生在任何`Activity`内容视图包含`EditText`. `finish()`在引用`Activity`它时不会对其进行垃圾收集，如下所示：

    ```
    activity com.example.MyActivity
    <- mContext android.widget.TextView
        <- this$0 android.widget.TextView$IClipboardDataPasteEventImpl
            <- this$1 android.widget.TextView$IClipboardDataPasteEventImpl$1
                <- referent java.lang.ref.FinalizerReference 
    ```

*   它发生在运行*Android 4.0.4**的 Samsung Galaxy Tab GT-P7300*上，但不会发生在运行*Android 2.2.1**的 Samsung Galaxy Mini GT-S5570*上。

****   实际上，这些`IClipboardDataPasteEventImpl`对象最终会被释放，但只是有时似乎是不可预测的。***

 ***由于它们被 引用`java.lang.ref.FinalizerReference`，我相信这些`IClipboardDataPasteEventImpl`对象正在等待被`finalize()`'d，这仅在 JVM 愿意时才会发生。有关详细信息，请查看以下 SO 问题：

*   [是内存泄漏吗？为什么 java.lang.ref.Finalizer 吃掉这么多内存](https://stackoverflow.com/q/8355064/1402846)
*   [很奇怪的OutOfMemoryError](https://stackoverflow.com/q/10436140/1402846)

* * *

### ~~解决方案/~~解决方法

抱歉，没有解决方案，但这是我最好的解决方法：

**在`onDestroy()`您的`Activity`中，尽可能多地释放对其他对象的引用**（尤其是大对象，例如您的活动的位图、集合和子视图），如下所示：

```
@Override
protected void onDestroy()
{
    // Free reference to large objects.
    m_SomeLargeObject = null;
    m_AnotherLargeObject = null;

    // For ArrayList, if you are a paranoid to null, you may call clear() and then trimToSize().
    m_SomeLargeArrayList.clear();
    m_SomeLargeArrayList.trimToSize();

    // Free child views.
    m_MyButton = null;

    // Free adapters.
    m_ListViewAdapter = null;

    ... etc.

    // Don't forget to chain the call to the superclass.
    super.onDestroy();
} 
```

`IClipboardDataPasteEventImpl`这样，我们至少可以减少伤亡，并希望在 JVM 有心情完成并收集所有这些邪恶的对象之前不会出现内存不足。

在垃圾收集环境的理想世界中，这是不必要的，但我想我们都应该意识到我们的世界并不完美，我们只能忍受这些缺陷。

* * *

以下是我对问题中提到的[原始博客条目（中文）的翻译。](http://splash5.blogspot.com/2012/03/galaxy-s2-memory-leak-with-textview.html)希望这可以让大家更好地理解这个问题。

> ### 带有 TextView 的 Galaxy S2 内存泄漏
> 
> 不知道是不是哪弄边错

不知道哪里出错了

> 但是galaxy s2的textview会产生内存泄漏

但是*galaxy s2*会导致`textview`内存*泄漏*

 **> 泄漏是发生在android.widget.TextView$IClipboardDataPasteEventImpl这个接口上</p>

*泄漏*发生在`interface` `android.widget.TextView$IClipboardDataPasteEventImpl`

> 它会抓住mContext造成整个活动没办法被gc

它持有`mContext`, 阻止`activity`被*gc* 'ed

> 的程序在htc sense(2.3.4)跟se xperia arc(2.3.4)和acer liquid(2.1)都没有问题</p>

*在htc sense(2.3.4)*、*se xperia arc(2.3.4)*和*acer liquid(2.1)*上使用相同的应用程序没有这样的问题

 *> 网路上完全找不到android.widget.TextView$IClipboardDataPasteEventImpl相关的资料</p>

`android.widget.TextView$IClipboardDataPasteEventImpl`而且，我在网上根本找不到任何相关的东西

> android源代码里也找不到看起来应该是三星自己加的东西...

甚至在*android源代码*中也没有，所以它似乎是*三星*自己添加的东西......

> 之前的opengl viewport bug 已经够头痛了

*opengl viewport 的 bug*已经很让人头疼了，*soundpool*相关的*bug*让很多人感到沮丧

> 现在这个内存泄漏又来困扰局...

现在，这里出现了*内存泄漏*问题......

> 看来手机外型还是比较重要的 /_\... 外型好先到人来买虫子再慢慢吸修就好了

看来手机的外观更重要/_\...好看的外观吸引顾客；*错误*可以稍后修复

> [后记]

[PS]

> 一些试验立即按HOME按钮回到桌面，那些leak被释放掉...

经过一些测试，我发现可以通过按*HOME 按钮*返回桌面来释放*泄漏...*

 *> logcat会显示一行在开始输入时隐藏剪贴板对话框：由其他人完成...！

*它在开始输入时*显示隐藏剪贴板对话框：由其他人完成...！在*日志中*

> 看起来 galaxy s2 里面有偷偷对剪贴板做一些操作...

似乎*galaxy s2*正在引擎盖下的*剪贴板*上运行......

> 但如果一直保持在应用程序里面准许的话，那些泄漏还是会存在……最后应该会发生OOM异常

但是如果我们留在*应用程序*中，这些*泄漏*仍然存在……最终会发生*OOM 异常*

> 现在只能修改galaxy s2的ics版会掉这个订婚怪问题了……

现在我们只能希望这个奇怪的问题能在*galaxy s2的**ics*版本中得到解决……

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T13:52:56.530

我的 memleak 调查也把我带到了这里。我遇到了 Activity 在 EditText 上泄漏的问题。android.widget.TextView$IClipboardDataPasteEventImpl 对象持有持有活动的 EditText。这发生在三星 Galaxy Tab 10.1 和 Galaxy Tab 2 10.1、7.0 上。我无法在其他非三星设备（华硕、宏碁）上重现它。

不好的是我还没有找到解决方案:)********

# php - 我应该使用 mysqli_real_escape string() 还是 mysql_real_escape_string() 来获取表单数据？

> ID：14135932
> 
> 赞同：12
> 
> 时间：2013-01-03T09:16:21.913
> 
> 标签：php, mysql, mysqli, mysql-real-escape-string

> **可能重复：**
> [mysql_escape_string VS mysql_real_escape_string](https://stackoverflow.com/questions/3665572/mysql-escape-string-vs-mysql-real-escape-string)

我需要将 company_name（由用户通过表单提供）输入到我的 mysql 数据库中。当我使用

```
$company = mysqli_real_escape_string($_POST['company_name']) 
```

我收到一个错误

```
Warning: mysqli_real_escape_string() expects exactly 2 parameters, 1 given in     /opt/lampp/htdocs/Abacus-Version-2/admin/Company/insert_company.php on line 58 
```

但是使用时一切似乎都很好

```
$company = mysql_real_escape_string($_POST['company_name']) 
```

在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T09:23:00.663

使用哪个取决于您使用的是`MySQLi`扩展程序还是`MySQL`扩展程序

```
// procedural mysqli 
$db = new mysqli; 
$sql = sprintf("INSERT INTO table (id,name,email,comment) VALUES (NULL,'%s','%s','%s')", 
   mysqli_real_escape_string($db,$name), 
   mysqli_real_escape_string($db,$email), 
   mysqli_real_escape_string($db,$comment) ); 

// mysql 
$conn = mysql_connect(); 
$sql = sprintf("INSERT INTO table (id,name,email,comment) VALUES (NULL,'%s','%s','%s')", 
   mysql_real_escape_string($name,$conn), 
   mysql_real_escape_string($email,$conn), 
   mysql_real_escape_string($comment,$conn) ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T09:19:21.457

`mysql_real_escape_string()`旨在使数据安全地插入数据库而不会出现错误。（例如转义斜杠等 IE 不会破坏您的代码）。

您应该使用`mysql_`or`mysqli_`函数来匹配您的连接字符串。“mysqli”是 mysql 函数集的面向对象的实现，因此函数以面向对象的方式调用。“mysql”是程序性的。我建议改用“mysqli”，因为我相信在未来的版本中一直在谈论贬低“mysql”功能。

如果您的连接字符串是：

```
mysql_connect() 
```

然后使用：

```
mysql_real_escape_string($_POST['']) 
```

如果是：

```
$mysqli = new mysqli(); 
```

然后使用：

```
$mysqli->real_escape_string($_POST['']) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T09:22:01.070

# 绝对没有

这两个函数都与表单数据无关。**它们只能**
用于格式化插入到 SQL 查询中的**字符串文字**。 这个函数属于SQL查询，不属于任何形式。甚至查询的非常有限的部分 - 字符串文字。

 **因此，每次您要在查询中插入字符串文字（坦率地说，是用引号括起来的一部分数据）时，都应该无条件地使用此函数。
对于任何其他情况，根本不应该使用它。

至于你得到的错误 - 它非常不言自明：这个函数需要 2 个参数，而不是一个。只需按照此功能的手册页中的说明传递正确的参数，就可以了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T09:21:30.160

如果您使用程序样式，应该是这样的：

```
$city = mysqli_real_escape_string($link, $city); 
```

其中链接是连接

或者当您使用面向对象的样式时：

```
$city = $mysqli->real_escape_string($city); 
```

查看 php 手册： http: [//php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T09:18:23.267

两种变体都很好*（请查看我的更新）。

当您使用`mysql_connect`then 时，您应该坚持`mysql_real_escape_string()`并传递连接句柄。

当您使用 a `mysqli_connect`then 时，您应该坚持使用`mysqli_real_escape_string()`.

**更新**

正如 Jeffrey 在评论中指出的那样，使用`mysql_`函数**并不**好。我同意这一点。我只是指出，您需要使用您正在使用的 MySQL 扩展所使用的函数。

我想到，问题不是使用哪个 MySQL 扩展，而是使用哪个函数来转义数据。

如果你问我：

*   使用`mysqli`or `PDO`，因为`mysql`不推荐和不推荐使用。
*   将连接句柄传递给转义函数或更好
*   使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)（[PDO-Style](http://php.net/manual/en/pdo.prepared-statements.php)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T09:21:09.610

由于所有`MySQL`扩展都已被[弃用](http://nl1.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)，因此您最好使用这些`MySQLi`方法，它更具未来性。**

# html - 旋转组并在一个阶段在组上涂鸦.. 使用代码发布

> ID：14135936
> 
> 赞同：1
> 
> 时间：2013-01-03T09:16:40.867
> 
> 标签：html, kineticjs

请这个小提琴我已经在这里复制了我的完整项目如果你在输出中打开小提琴你可以看到一个图像，在图像选择笔上涂鸦，添加文本等（像这样执行一些功能）。然后使用旋转旋转组按钮，然后尝试乱涂乱画，您就会明白到底是什么问题。

在我看来问题是我有一个舞台，一个图层被添加到舞台，一个组被添加到图层，不同的元素（如线条文本等）被添加到组中。然后组旋转，我试图根据舞台的鼠标位置画线。但它不正确，因为组旋转了 x 和 y，我们用来画线的东西来自舞台。我需要从组而不是从舞台上取 x 和 y 是他们的任何方式。如果不明白，请询问我或发表回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:30:30.477

这应该让你相当接近：http: [//jsfiddle.net/k4qB8/24/](http://jsfiddle.net/k4qB8/24/)

```
// This rotates that added active line along with your group.
// This makes the draw direction correct
activeline.setRotationDeg(0-rootGroup.getRotationDeg());

// Here you'll have to figure a way to calculate how much to move the 
// line over so the draw is on the correct spot
// This is as close as I got it
     if(Math.abs(rootGroup.getRotationDeg()%360)==0)
           activeline.move(rootGroup.getX()-375, rootGroup.getY()-175);
     if(Math.abs(rootGroup.getRotationDeg()%360)==90)
           activeline.move(rootGroup.getX()-175, rootGroup.getY()+375);
     if(Math.abs(rootGroup.getRotationDeg()%360)==180)
           activeline.move(rootGroup.getX()+375, rootGroup.getY()+175);
     if(Math.abs(rootGroup.getRotationDeg()%360)==270)
           activeline.move(rootGroup.getX()+175, rootGroup.getY()-375); 
```

此外，为逆时针旋转添加更多逻辑，因为这不是 100% 工作的。

我认为真正的解决方案是为每次旋转绘制单独的图层，有点像这样：

```
 if (rotation is 90) : draw on lineLayer1;
 if (rotation is 180) : draw on lineLayer2;
 if (rotation is 270) : draw on lineLayer3;
 if (rotation is 360 || 0) : draw on lineLayer4; 
```

这样，您可以只旋转未绘制的图层来模拟旋转的感觉。

# c# - 如何创建 .csproj 文件的 DLL

> ID：14135937
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:16:42.933
> 
> 标签：c#, csc

```
csc /target:library /out:MyMaths.dll ClassLibraryFunction.csproj 
```

我正在使用此代码在 VS.Cmd 编译器中为整个解决方案生成一个 DLL。但是，我收到一个编译错误，并且没有生成 DLL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:25:49.357

`csc`不适用于`.csproj`文件。你有几个选择：

1.  使用`msbuild`；例如

    ```
    msbuild ClassLibraryFunction.csproj 
    ```

    注意您可能需要更改项目的输出类型（在 IDE 中这是项目属性、应用程序、输出类型；在 csproj 文件中是`<OutputType>Library</OutputType>`）

2.  `csc`配合`/recurse`开关使用；例如：

    ```
    csc /target:library /out:MyMaths.dll /recurse:*.cs 
    ```

    （这将编译`.cs`当前文件夹或子文件夹中的所有文件）

3.  什么都不做，只使用你已经拥有的 exe；.NET exe 可以像任何其他程序集一样被引用，并且`public`可以使用任何类型

# iphone - 新 UILabel 与现有 UILabel 之间的约束

> ID：14135939
> 
> 赞同：0
> 
> 时间：2013-01-03T09:16:55.990
> 
> 标签：iphone, ios, interface, custom-controls, uilabel

我有一个名为 Ntoolbar 的工具栏。它包含一些 UILabel，并有一个方法“insertTitle:(NSString) *title”：

```
- (void) insertTitle:(NSString *)title{
   UILabel *newlabel = [ [UILabel alloc ] initWithFrame:CGRectMake((self.bounds.size.width / 2), 0.0, 150.0, 43.0) ];
   newlabel.textAlignment =  UITextAlignmentCenter;
   newlabel.textColor = [UIColor whiteColor];
   newlabel.backgroundColor = [UIColor darkGrayColor];
   newlabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(14.0)];
   [_ribbon_title addSubview:newlabel];

   newlabel.text = [NSString stringWithFormat: @"%@", title];
} 
```

在 ViewController 中，我有一个出口：@property (strong, nonatomic) IBOutlet NToolBar *nToolBar; 而在 ViewDidLoad() 中，我调用这个方法来添加一个 UILabel

```
- (void)viewDidLoad
{
     [super viewDidLoad];
     [_nToolBar insertTitle:@"edit"];
} 
```

图片：添加新标签之前：http: [//nt9.upanh.com/b2.s32.d2/9a3ff99d74de684dcc2075e98274a6e0_52281369.screenshot20130103at4.png](http://nt9.upanh.com/b2.s32.d2/9a3ff99d74de684dcc2075e98274a6e0_52281369.screenshot20130103at4.png)

添加新标签后，旧的UILabel被新的UILabel覆盖了吗？
[http://nt5.upanh.com/b1.s33.d1/e6dd9ef7e8748dc445d71a5cc28a0d3c_52281635.screenshot20130103at4.png](http://nt5.upanh.com/b1.s33.d1/e6dd9ef7e8748dc445d71a5cc28a0d3c_52281635.screenshot20130103at4.png)。

如何在它们之间添加约束？

# jquery - 特定按键后的jQuery自动完成

> ID：14135942
> 
> 赞同：2
> 
> 时间：2013-01-03T09:17:09.960
> 
> 标签：jquery, autocomplete

如何在 @ 或 # （主题标签）之类的按键之后添加事件以使用自动完成，而不是将变体格式化为要插入的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:24:31.460

使用 jquery：[jquery autocomplete](http://jqueryui.com/autocomplete/)

```
auto_options = { 
    serviceUrl: '/getpincodes',
    width: 300,
    minChars:1,
    delimiter: /(@|#)\s,
    deferRequestBy: 0, //miliseconds
    type: "POST",
    isLocal:true,
    enable: true,
    onSelect: function(value, data){
        return data;
    },
    noCache: true //set to true, to disable caching
};

$(document).ready( function() {
    $('#inputId').autocomplete(auto_options);
}); 
```

# python - 使用 SWIG 的模块级 numpy 数组

> ID：14135946
> 
> 赞同：1
> 
> 时间：2013-01-03T09:17:29.120
> 
> 标签：python, numpy, swig

我正在为我编写的科学 C 库创建一个 python 包装器。该库包含一个在编译时全局定义的常量数组，即

```
const double arr[NARR] = { 200.0, 201.0, ... 899.0, 900.0 }; 
```

我想在我的 python 模块中使用 SWIG 使其成为模块级 numpy 数组，即

```
>>> import foo
>>> foo.arr
array([200.0, 201.0, ..., 889.9, 900.0]) 
```

我似乎无法在文档中找到任何内容来使用常量数组执行此操作。一切似乎都处理从函数返回 numpy 数组，或定义非数组常量。

我知道如何通过手动包装数组来做到这一点：

```
npy_intp dim[1] = { NARR };
PyObject *a = PyArray_SimpleNewFromData(1, dim, NPY_DOUBLE, arr);
PyObject_SetAttrString(module, "arr", a); 
```

我只是无法让它与 SWIG 一起工作。当我尝试将上述代码放入 foo.i 文件的 init 块中时，“arr”变量不会出现在 foo 模块中。

谁能告诉我如何让它正常工作？

**编辑**

根据 seberg 的建议，更改了手动包装数组的代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:20:26.117

我已经找到了解决这个问题的方法，但它非常hackish。

我在我的`foo.i`文件中包含了两个代码扩展，一个在 C 中，另一个在 python 中。C 扩展创建一个返回 C 数组的函数，以及一个告诉 SWIG 创建一个包装器，该包装器将此 C 数组作为 numpy 数组返回：

```
/* Tell SWIG I want the function to output a numpy array */
%apply double ARGOUT_ARRAY1[ANY] { double a[NARR] };
/* Create a function that returns a copy of the array */
%inline %{
void _get_arr(double a[NARR]) {
    for (int i = 0; i < NARR; i++)
        a[i] = arr[i];
}
%} 
```

python 扩展调用此函数并将其放入模块级 numpy 数组变量中`arr`（我将其设为只读以更好地衡量）：

```
%pythoncode %{
# Make the arr array a read-only module-level numpy array
arr = _get_arr()
arr.flags.writeable = False
%} 
```

因为我打算将它作为一个*包*分发，所以我可以控制文件中导入的函数，`__init__.py`因此`_get_arr`不会使用`foo`.

我现在得到了想要的结果：

```
>>> import foo
>>> foo.arr
array([200.0, 201.0, ..., 889.9, 900.0])
>>> foo.arr[0] = 10
RuntimeError: array is not writeable
>>> foo._get_arr()
AttributeError: 'module' object has no attribute '_get_arr' 
```

# android - android中alertdialog中的进度指示器

> ID：14135951
> 
> 赞同：0
> 
> 时间：2013-01-03T09:17:57.607
> 
> 标签：android

在 android 中需要一个类似的屏幕，即在警报视图中放置一个进度指示器。

![在此处输入图像描述](../Images/3999c0997fac901476929c5455afb88b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:35:49.040

Android`ProgressDialog`可以做几乎相同的事情，显示一个对话框，显示一个标题和一条消息，还显示一个不确定的进度指示器，但它看起来与你的屏幕截图有点不同。

但是，`ProgressDialog`Android 文档不建议使用 来指示加载或不确定的进度：

> **避免 ProgressDialog**
> Android 包含另一个名为 ProgressDialog 的对话框类，它显示带有进度条的对话框。但是，如果您需要指示加载或不确定的进度，则应遵循[Progress & Activity](http://developer.android.com/design/building-blocks/progress.html)的设计指南，并在布局中使用 ProgressBar。

因此，[您需要定义自定义对话框。](http://androidresearch.wordpress.com/2012/04/16/creating-and-displaying-a-custom-dialog-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:22:53.917

1.  为对话框内容创建一个布局 xml。
2.  将其膨胀为视图。
3.  使用您的视图调用 ALertDialog.setView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:31:41.857

```
 private static final int DIALOG_PROGRESS = 4;
  private ProgressDialog mProgressDialog;
        private int mProgress;
        private Handler mProgressHandler;

        @Override
        protected Dialog onCreateDialog(int id) {
            switch (id) {
            case DIALOG_PROGRESS:
                mProgressDialog = new ProgressDialog(Test.this);
                mProgressDialog.setIconAttribute(android.R.attr.alertDialogIcon);
                mProgressDialog.setTitle("R.string.select_dialog");
                mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                mProgressDialog.setMax(MAX_PROGRESS);
                mProgressDialog.setButton(DialogInterface.BUTTON_POSITIVE,
                        "R.string.alert_dialog_hide", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        /* User clicked Yes so do some stuff */
                    }
                });
                mProgressDialog.setButton(DialogInterface.BUTTON_NEGATIVE,
                        "R.string.alert_dialog_cancel", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        /* User clicked No so do some stuff */
                    }
                });
                return mProgressDialog;
            }
            return null;
        }

        /**
         * Initialization of the Activity after it is first created.  Must at least
         * call {@link android.app.Activity#setContentView(int)} to
         * describe what is to be displayed in the screen.
         */
        @Override
      protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            showDialog(DIALOG_PROGRESS);
            mProgressHandler = new Handler() {
                @Override
                public void handleMessage(Message msg) {
                    super.handleMessage(msg);
                    if (mProgress >= MAX_PROGRESS) {
                        mProgressDialog.dismiss();
                    } else {
                        mProgress++;
                        mProgressDialog.incrementProgressBy(1);
                        mProgressHandler.sendEmptyMessageDelayed(0, 100);
                    }
                }
            };
        }
    } 
```

[从这里开始](http://www.java2s.com/Code/Android/UI/DialogwithProgress.htm)你应该通过 Handler 方法处理并轻松获取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:33:12.763

通过从布局中膨胀视图来创建`CustomAlertDialog`。

布局应该是 in `RelativeLayout`，这样您就可以`ProgessDialog`通过赋予属性 as`CENTER_HORIZONTAL`和来放置该布局的中心`CENTER_VERTICAL`。

参考：[链接](http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)

# wpf - 动态分配 UI 权限 WPF

> ID：14135953
> 
> 赞同：1
> 
> 时间：2013-01-03T09:18:04.753
> 
> 标签：wpf, permissions

> **可能重复：**
> [在后面的代码中设置 WPF UI 权限](https://stackoverflow.com/questions/14257877/setting-wpf-ui-permissions-in-code-behind)

我开始使用 WPF 并希望创建一个应用程序，该应用程序将根据用户（AD）和他的角色（自定义）显示/隐藏控件。

我设法通过使用继承 MarkupExpension 和 IValueConverter 的类来完成这项工作。

```
public class RoleToVisibilityConverter : MarkupExtension,IValueConverter
{
    public RoleToVisibilityConverter()
    {

    }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var principal = value as GenericPrincipal;
        bool IsValidUser = false;
        if (principal != null)
        {
            foreach (String role in parameter.ToString().Split(';'))
            {
                if (principal.IsInRole(role))
                {
                    IsValidUser = true;
                    break;
                }  
            }
            return IsValidUser ? Visibility.Visible : Visibility.Collapsed;
        }

        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }
} 
```

在 XAML 中，我为 Visibility 添加了以下绑定：

Visibility="{Binding Source={x:Static systhread:Thread.CurrentPrincipal}, ConverterParameter=admin;editor;readonly, Converter={rv:RoleToVisibilityConverter}}

注意：我还需要将 xmlns:systhread="clr-namespace:System.Threading;assembly=mscorlib" 添加到 MainWindow.xaml。

我的问题是：

上面的示例是完成此操作的最佳方法，还是（正如我所想的）动态加载可见性绑定的最佳方法。

任何帮助，将不胜感激。

诺埃尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:47:25.683

您可以尝试改用行为。我创建了一些您可以查看的简单代码：

```
public class Permission
{
    private List<string> roles = new List<string>();
    public List<string> Roles
    {
        get { return roles; }
        set { roles = value; }
    }
}

public class PermissionBehavior
{
    // Static behaviour parameters
    public static readonly Dictionary<FrameworkElement, PermissionBehavior> Instances = new Dictionary<FrameworkElement, PermissionBehavior>();

    public static readonly DependencyProperty PermissionProperty =
        DependencyProperty.RegisterAttached("Permission", typeof(Permission), typeof(PermissionBehavior),
                                            new PropertyMetadata(OnPermissionPropertyChanged));

    public static readonly DependencyProperty RoleProperty =
        DependencyProperty.RegisterAttached("Role", typeof(string), typeof(PermissionBehavior),
                                            new PropertyMetadata(OnRolePropertyChanged));

    private static void OnPermissionPropertyChanged(DependencyObject dependencyObject,
                                                  DependencyPropertyChangedEventArgs e)
    {
        SetPermission(dependencyObject, (Permission) e.NewValue);
    }

    public static void SetPermission(DependencyObject obj, Permission value)
    {
        var behavior = GetAttachedBehavior(obj as FrameworkElement);
        behavior.AssociatedObject = obj as FrameworkElement;
        obj.SetValue(PermissionProperty, value);

        behavior.CurrentPermission = value;
        behavior.UpdateVisibility();
    }

    public static object GetPermission(DependencyObject obj)
    {
        return obj.GetValue(PermissionProperty);
    }

    private static void OnRolePropertyChanged(DependencyObject dependencyObject,
                                                  DependencyPropertyChangedEventArgs e)
    {
        SetRole(dependencyObject, (string) e.NewValue);
    }

    public static void SetRole(DependencyObject obj, string value)
    {
        var behavior = GetAttachedBehavior(obj as FrameworkElement);
        behavior.AssociatedObject = obj as FrameworkElement;
        obj.SetValue(RoleProperty, value);

        behavior.RoleList = value.Split(',').ToList();
        behavior.UpdateVisibility();
    }

    public static object GetRole(DependencyObject obj)
    {
        return obj.GetValue(RoleProperty);
    }

    private static PermissionBehavior GetAttachedBehavior(FrameworkElement obj)
    {
        if (!Instances.ContainsKey(obj))
        {
            Instances[obj] = new PermissionBehavior { AssociatedObject = obj };
        }

        return Instances[obj];
    }

    static PermissionBehavior()
    {

    }

    // Class instance parameters
    private FrameworkElement AssociatedObject { get; set; }
    private Permission CurrentPermission { get; set; }
    private List<string> RoleList { get; set; }

    private void UpdateVisibility()
    {
        if(RoleList == null || CurrentPermission == null)
            return;

        if (RoleList.Intersect(CurrentPermission.Roles).Any())
        {
            AssociatedObject.Visibility = Visibility.Visible;
            AssociatedObject.IsEnabled = true;
        }
        else
        {
            AssociatedObject.Visibility = Visibility.Hidden;
            AssociatedObject.IsEnabled = false;
        }
    }
} 
```

XAML

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:my="clr-namespace:WpfApplication2"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
            <Button Content="Requires Admin" Margin="6" my:PermissionBehavior.Permission="{Binding UserPermission, Mode=TwoWay}" my:PermissionBehavior.Role="Admin"/>
            <Button Content="Requires User" Margin="6" my:PermissionBehavior.Permission="{Binding UserPermission, Mode=TwoWay}" my:PermissionBehavior.Role="User"/>
        </StackPanel>
        <Button Content="Change user" HorizontalAlignment="Left" Margin="10,88,0,0" VerticalAlignment="Top" Width="75" Click="ButtonBase_OnClick"/>

    </Grid>
</Window> 
```

代码

```
public partial class MainWindow : Window, INotifyPropertyChanged
{

    private Permission userPermission;

    public Permission UserPermission
    {
        get { return userPermission; }
        set
        {
            userPermission = value;
            OnPropertyChanged("UserPermission");
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        UserPermission = new Permission {Roles = new List<string>{"Admin","DumbUser"}};
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }

    private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
    {
        var p = new Permission();
        p.Roles = new List<string> {"User", "Supervisor"};
        UserPermission = p;
    }
} 
```

我想用你使用的东西来改变我的 Permission 对象和逻辑是微不足道的。

# wordpress - wordpress 中的案例研究部分

> ID：14135957
> 
> 赞同：0
> 
> 时间：2013-01-03T09:18:23.377
> 
> 标签：wordpress

我想在网站的“关于我们”部分中有一个“案例研究”部分。我已经有一个新闻栏目正在拉入“新闻”帖子。我的网站结构目前如下所示：

*   首页（页面） 关于我们（页面）
    *   历史（页）
    *   认识团队（页面）
    *   案例研究（将案例研究帖子显示为标题和摘录的页面）
*   服务（页面）
*   新闻（最新消息）
*   联系方式（页面）

我已将案例研究设置为一个新类别，并使用自定义循环将帖子拉到案例研究页面模板上。这是有效的，但是在预览完整的案例研究帖子时，它会显示在新闻部分下（可能是因为这是默认页面，永久链接问题？）。

我怎样才能让它显示完整的帖子，但留在“关于我们”部分？我知道它跳转到新闻页面，因为我在菜单中的锚链接突出显示为活动页面。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:37:40.773

您需要自定义帖子类型。[您可以使用'register_post_type()'](http://codex.wordpress.org/register_post_type)添加那些。你特别需要看看这个`rewrite`论点。因为在这里您可以自定义帖子类型的基本 url。像这样的东西：

```
//other args
 'rewrite' = array (
    'slug' => 'URLBASE' // puth the url base here
),
//other args 
```

这应该让你开始。如果您需要更多帮助，请询问。

# c# - 在 Visual Studio 中通过 C# 在 Windows 资源管理器中编辑文件

> ID：14135959
> 
> 赞同：0
> 
> 时间：2013-01-03T09:18:33.210
> 
> 标签：c#, visual-studio, file-io, filesystems

我正在创建一个应用程序，使用户能够用不同的徽标替换程序的徽标。用户可以选择多种方式来执行此操作，但是我想使用的其中一种方法是将原始徽标替换为新徽标。所以基本上：

*   将旧徽标重命名为“ *OldLogo* (Backup)”
*   将新项目*NewLogo*添加到旧项目的位置

然后相反的过程应该用户选择：

*   删除添加的*NewLogo*
*   *将OldLogo*重命名为其原始名称

上述要点的代码或其背后的理论将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:22:18.900

1) 打开文件对话框以选择新徽标文件 2) 重命名旧徽标 3) 将所选文件复制到旧徽标子文件夹并反向更改其名称 1) 删除当前徽标文件 2) 将旧徽标文件重命名为正确名称

您将使用 .NET 中的 Dictionary 和 File 类执行的大部分操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:23:51.793

正如 Yorye Nathan 已经提到的那样，File 类允许您寻找很多东西： [MSDN File Class](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)

您可以根据需要使用复制来备份和覆盖您的徽标。

# javascript - 如果内容超过使用 JavaScript 的 html 表格的固定宽度，则将文本拆分到下一行

> ID：14135962
> 
> 赞同：3
> 
> 时间：2013-01-03T09:18:49.413
> 
> 标签：javascript, html, css, jsp, html-table

我有一个 div，它由应用了 td 的不同样式的表组成。

我正在尝试实现布局，如果文本超过表格 td 的宽度，它应该转到下一行。

但我不能这样做。我的代码是

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "w3.org/TR/html4/loose.dtd"> 
<html>
<head>
<title>HTML Div Overflow scrollbars</title>
<style type="text/css">
.mainDiv {
    height: 230px;
    width: 600px;
    overflow: scroll;
}
.divScroll-1 {
    width: 70%;
    white-space:nowrap;
    overflow-y: scroll;

}
.divScroll-2 {
    width: 30%;
    float:right;
     white-space:nowrap;

}

</style>
<script>
    function getText() {
        var str = document.getElementById("no").value;
        var div = document.getElementById("divScroll-1");
        var ss = document.getElementById("div33");
        var textarea = document.getElementById("mainDiv");

        if (div.innerHTML == "" ) {
            div.innerHTML += str ;
        } else {
            div.innerHTML += "</br>"  + str ;
        }

        if(ss.innerHTML == ""){
            ss.innerHTML = "Time" ;
        }else{
            ss.innerHTML  +=  "</br>"+"Time";
        }
    }
</script>
</head>
<body>
<h3>Vertical Overflow Scroll</h3>
<table align="center" width="100%" border=1>
    <tr>
        <td>
<div class="mainDiv" id="mainDiv">

<table width="100%" align="left" style="table-layout:fixed">
    <tr>
        <td height="200px" style="max-width:150px;" valign="top" class="divScroll-1" id="divScroll-1">
        </td>
        <td valign="top" class="divScroll-2" id="div33">
        </td>
    </tr>
</table>
</div>
</td></tr>
    <tr>
        <td>
<input type="text" id="no" size="20" />
<input type="button" onclick="getText()" value="Insert Text" />
</td></tr></table>
</body>
</html> 
```

我正在使用 Javascript 将文本附加到表格中。如果我插入一个大于 td 宽度的长文本，剩余的文本将被隐藏。

我需要将剩余内容放入下一行。

请提供一些建议或更正我的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T13:20:11.497

试试这个，已经在stackoverflow上

[CSS：如何在 <td> 内包装没有空格的文本？](https://stackoverflow.com/questions/3247358/css-how-do-i-wrap-text-with-no-whitespace-inside-a-td)

如下更新您的 css 类（“divScroll-1”）

```
.divScroll-1 {
     white-space: -moz-pre-wrap !important;  /* Mozilla, since 1999 */
     white-space: -pre-wrap;      /* Opera 4-6 */
     white-space: -o-pre-wrap;    /* Opera 7 */
     white-space: pre-wrap;       /* css-3 */
     word-wrap: break-word;       /* Internet Explorer 5.5+ */
     word-break: break-all;
     white-space: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:34:01.317

`white-space: nowrap;`在你的 CSS 中删除。

# git - 查找 git 提交的子项，而不是在当前分支或任何分支上

> ID：14135968
> 
> 赞同：2
> 
> 时间：2013-01-03T09:19:10.497
> 
> 标签：git

我有可能找到提交的孩子吗？我在手册页或其他人的建议中找到的所有命令通常都涉及分支名称。

我有效地做的是：我有一个提交树：

```
A-B-C-D
      ^ 
```

我的分支指向 D。

然后我回滚到 C，并提交 E：

```
A-B-C-D
     \
      E
      ^ 
```

然而`git rev-list`，在 Sourcetree 或可视化工具（如 Sourcetree）中，毫不奇怪，它显示为

```
A-B-C-E
      ^ 
```

没有参考 D。

显然，提交 D 仍然在我的仓库中，但是没有提交 ID，我很难找到它。是否有显示提交的子项的命令，无论它们在哪个分支上，或者它们是否在一个分支上？

**编辑**

从下面 Nevik 的回答来看，`--all`似乎没有显示未引用的提交。采用这个提交结构：

```
> git log --graph --oneline
* 0ff0f06 d
* ac06e14 c
* 3c45cce b
* b3aa730 a 
```

然后回滚到 c：

```
> git reset --soft ac06
> git log --graph --oneline --all
* ac06e14 c
* 3c45cce b
* b3aa730 a 
```

然后重置回d：

```
> git reset --soft 0ff0
> git log --graph --oneline --all
* 0ff0f06 d
* ac06e14 c
* 3c45cce b
* b3aa730 a 
```

所以提交肯定仍在回购中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:24:08.010

试试`git reflog`/ `git log -g`( `git log --walk-reflogs`) 或`git reflog <branch>`.

* * *

## 一个例子：

让我们从以下情况开始

```
> git log --graph --oneline
* 84be53e d
* 8932c9a c
* 05cbe59 b
* 469baa5 a 
```

“删除”顶部提交。`git commit --amend`这与纠正顶部（最新）提交非常相似：

```
> git reset --soft HEAD~1 
```

[*注意：这相当于`git reset --soft 8932c`*]

正如您所写`--all`的那样，在这种情况下没有帮助，因为 84be53e 变得无法访问。

```
> git log --graph --oneline --all
* 8932c9a c
* 05cbe59 b
* 469baa5 a 
```

[`git reflog`](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)救援... :-)

```
> git reflog
8932c9a HEAD@{0}: reset: moving to HEAD~1
84be53e HEAD@{1}: commit: d
8932c9a HEAD@{2}: commit: c
05cbe59 HEAD@{3}: commit: b
469baa5 HEAD@{4}: commit (initial): a 
```

如果您在分支之间切换，那么特定于分支的 reflog 可能会更好：

```
> git branch
* master
> git reflog master
8932c9a master@{0}: reset: moving to HEAD~1
84be53e master@{1}: commit: d
8932c9a master@{2}: commit: c
05cbe59 master@{3}: commit: b
469baa5 master@{4}: commit (initial): a 
```

[*注意：如果您使用 git-aware shell 提示来显示当前分支，则`git branch`不需要使用检查当前分支。*]

现在您可以使用`git reset --soft 84be5`or`git reset --soft HEAD@{1}`或`git reset --soft master@{1}`（或使用更短的形式表示最新：）`git reset --soft @{1}`。

```
> git reset --soft @{1}
> git log --graph --oneline --all
* 84be53e d
* 8932c9a c
* 05cbe59 b
* 469baa5 a 
```

**另请参阅：** [reflog，您](http://gitready.com/intermediate/2009/02/09/reflog-your-safety-net.html)在[gitready](http://gitready.com)上的安全网（例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:20:28.420

您可以使用`--all`开关[`git log`](http://git-scm.com/docs/git-log)来[`git rev-list`](http://git-scm.com/docs/git-rev-list)显示来自所有分支的提交（甚至是那些不在分支上的提交）。

# ruby-on-rails - 资源 ID 应该出现在 url 中吗？

> ID：14135974
> 
> 赞同：4
> 
> 时间：2013-01-03T09:19:25.723
> 
> 标签：ruby-on-rails, url, rest

在资源 id 可以通过其他方式识别的情况下（例如 current_user 用于需要身份验证的页面），从 url 中省略 id 是否是个好主意？（例如，`/students/1/homework`到`/students/homework`）。

另外，这会对网址的宁静有什么影响吗？我怀疑它适用于 HTTP 动词，但对于自定义操作我不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:31:30.580

我想这取决于您的应用程序以及对客户有用的内容。如果您的连接用户是可以查看所有学生作业的管理员，那么该`/students/1/homework`路径是有意义的，但是如果只有学生使用此资源，那么该路径`/students/homework`更有意义。
本质上，后者可以被认为是`namespace`所有学生资源的一种。
我发现拆分这些资源非常有用，`namespaces`以免混淆客户端编写者并保持您的授权非常清晰（谁可以看到/做什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T08:45:20.260

URL 应始终指向一个特定资源。它们可以是绝对的，也可以是相对的。把它想象成一个文件系统。在某些情况下（安全性/可扩展性），您不能允许列表。

*   **基于会话/相对资源** `/students/me`, `/students/latest`,`/students/latest/homework/lastest`
*   **绝对** 资源`/students/3`,,,`/students/3/homework``/teachers/3/homework/3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:42:42.913

在您的示例中，这 2 个 URI 标识不同的资源：

*   用户#1的作业，
*   当前用户的作业。

选择很大程度上取决于您认为人们想要参考的资源（例如通过电子邮件或书签）。

我不认为第二种解决方案是不稳定的，但我更喜欢第一种，因为它与许多附加功能兼容（例如，教师可以访问学生作业的表示）。

# asp.net - 如何从asp.net中的Web表单中截取URL？

> ID：14135983
> 
> 赞同：1
> 
> 时间：2013-01-03T09:19:56.673
> 
> 标签：asp.net, webforms, webpage-screenshot

有没有办法在没有任何 exe 文件或 3rd 方的东西的情况下做到这一点？我不能在 Web 应用程序中使用 Windows 窗体组件，我需要以编程方式截取不同 URL 的屏幕截图。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:29:03.333

类似的问题：[使用 HTML5/Canvas/JavaScript to take screenshots](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)

> JavaScript 可以读取 DOM 并使用画布呈现相当准确的表示。我 [@Niklas] 一直在研究将 html 转换为画布图像的脚本。

另见：[http ://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

**编辑：**

注意：您需要编写一个接受 base64 编码字符串作为输入参数的 Web 服务/Web 方法，然后保存该字符串（以其原始形式，或转换为文件。）

html2canvas 的示例用法：

```
var imageAsBase64;

$('body').html2canvas({
    onrendered: function(canvas) {
        imageAsBase64 = canvas.toDataURL();

        // You now have a base64 string, representing a "screenshot" of 
        // your <body> element, which you can POST to your web service.

  }
}); 
```

# javascript - 在执行回调之前我不知道如何返回真或假

> ID：14135984
> 
> 赞同：0
> 
> 时间：2013-01-03T09:20:18.920
> 
> 标签：javascript, ajax, backbone.js

我在骨干模型的函数内部有一个 ajax 函数。我希望函数 fetchByFBID 根据返回的数据包含的内容返回 true 或 false。但是由于在执行回调之前我不知道数据是什么，因此我不知道如何在该函数中返回 true 或 false。有小费吗？

```
 var UserModel = Backbone.Model.extend({
    urlRoot: '/API/users',
    defaults: { 
      "fbID": "", 
      "firstName": "", 
      "lastName": "", 
      "gender": "", 
      "email": "",
      "site": ""
    },
    fetchByFBID: function(fbID) {
      var that = this;
      console.log(this);
      $.ajax({url: "/API/users/fbID/"+fbID, type: 'GET', success: function(data) {
        if(data === "false") {  
          return false;
        } else {
          that.set(JSON.parse(data));
          return true;
        }
      }});
    }
  }); 
```

要调用该函数，我只需执行以下操作：

```
var fbUser = new UserModel();
fbUser.fetchByFBID(response.id); 
```

我的目标是能够做类似的事情：

```
var fbUser = new UserModel();
if(fbUser.fetchByFBID(response.id))
  //do something
else
  //do something else 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:33:56.180

您可以：

*   将回调作为参数添加到您的函数中，并使用 true 或 false 异步调用它

    ```
    var fbUser = new UserModel();
    fbUser.fetchByFBID(response.id, function (result) {
      if (result) {
         // do something
      } else {
        // do something else
      }
    ); 
    ```

这应该很容易

```
 fetchByFBID: function(fbID, callback) {

   .... do your work .... 
     if(data === "false") {  
      callback.call(null,true); // or callback(true), callback.call(whatever, true), etc...
    } else {
      that.set(JSON.parse(data));
      callback.call(null,false);
    } 
```

*   而不是真或假，让你的函数返回一个“承诺”，这样你就可以写一些类似的东西

    ```
    var fbUser = new UserModel();
    fbUser.fetchByFBID(response.id).whenDone(function (result) {
      if (result) {
          // do something
       } else {
          // do something else
       }
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:25:31.573

我会添加额外的隐藏或任何 div。在回调函数中，将其内容设置为“真”或“假”或您喜欢的任何其他值，并使用事件通知您已经获得 ajax 答案的操作。该解决方案使用一种观察者模式。

# intellij-idea - IntelliJ 12 - maven 多模块无法解析传递依赖

> ID：14135985
> 
> 赞同：14
> 
> 时间：2013-01-03T09:20:22.383
> 
> 标签：intellij-idea

我已经导入了 maven 多模块项目并且一些传递依赖没有解决。同样的项目构建在 Jenkins/Eclipse/Console 中。

我试过两个分别导入每个项目，也只导入父 pom - 两者都不起作用。

我有以下结构：`Project A`并且`Project B`有共同的父级，并且两者都被定义为这个父级中的模块。`Project A`包含作为依赖jackon-jar，`Project B`没有它。`Project A`在默认范围内包含 jackson-jar - jar 在编译和测试运行期间可见。现在`Project B`导入`Project A`并使用jackson-jar - 这是问题所在 - jackson-jar in not visible in `Project B`:( 当我明确指定它时`Project B`一切正常，但它应该作为传递依赖自动来自`Project A`......

这是常见的问题吗？有解决方法吗？

以下是 POM 示例：

家长：

```
<project ....>
    <modelVersion>4.0.0</modelVersion>

    <version>1.0-SNAPSHOT</version>
    <groupId>miklas.test</groupId>
    <artifactId>my-parent</artifactId>
    <packaging>pom</packaging>

    <modules>
        <module>my-project-a</module>
        <module>my-project-b</module>
        <module>my-project-c</module>
    </modules>
</project> 
```

项目-A

```
<project ....>
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>miklas.test</groupId>
        <artifactId>my-parent</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>my-project-a</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jackson-provider</artifactId>
            <version>2.3.4.Final</version>
        </dependency>
    </dependencies>

</project> 
```

项目-B

```
<project >
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>miklas.test</groupId>
        <artifactId>my-parent</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>my-project-b</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>miklas.test</groupId>
            <artifactId>my-project-a</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>

</project> 
```

下面也是我真实项目的屏幕截图 - 这将`Project B`来自上面的简化示例。我们可以看到左侧`resteasy-jackoson-provider`有 4 个依赖 jar，而右侧只有两个。两个视图都显示同一个项目：

![在此处输入图像描述](../Images/0da002ed862ab309cb2d7e0fec2dc7ec.png)

现在来自相同的屏幕截图`Project A`

![在此处输入图像描述](../Images/65c9b69eed9bf3c0e0e53090a81e951b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T22:29:13.627

这似乎是 IntelliJ 12 中的一个错误。请参阅[http://youtrack.jetbrains.com/issue/IDEA-98425](http://youtrack.jetbrains.com/issue/IDEA-98425)，如果它对您很重要，请为该问题投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:04:27.303

[http://youtrack.jetbrains.com/issue/IDEA-98425](http://youtrack.jetbrains.com/issue/IDEA-98425)中提到的对我和其他人有用的解决方法是转到“设置 - Maven - 多项目构建失败策略”。将其设置为“最终失败”。

# web-services - Amazon.com 产品广告 API 的请求限制是什么？

> ID：14135988
> 
> 赞同：2
> 
> 时间：2013-01-03T09:20:46.743
> 
> 标签：web-services, api, amazon, amazon-product-api

我想创建一个在网页 amazon.com 上搜索产品的 WS。我有一个简单的问题。我可以从一个 IP 向亚马逊发送多少请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:25:36.500

查看[Amazon.com Product Advertising API](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html) to `Advertise`, `search for Amazon products`, `discover Amazon products`. 关于使用限制和请求，请查看 [使用指南：产品广告 API 许可协议](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html#usage)

# java - Tomcat WebDAV 缺少 Content-Length 标头

> ID：14135989
> 
> 赞同：0
> 
> 时间：2013-01-03T09:20:49.833
> 
> 标签：java, tomcat, servlets, response, webdav

我正在使用 Tomcat 的 WebDAV servlet，当我发出 PUT 请求时，我似乎无法获得标题“Content-Length”。

如何获取我正在“放置”的文件的内容长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:44:50.387

假设您的意思是您正在编写作为服务器端 PUT 操作一部分的代码 - 即您正在扩展 webdav servlet 或其他东西。然后，如果客户端通过 PUT 发送了一个文件并且没有 content-length 标头，那么您需要缓冲字节（可能到磁盘），然后使用生成的缓冲数据为您提供长度。

客户端发送没有内容长度的文件是完全合法的。在这种情况下，他们只需断开 TCP 连接以指示 EOF。

请注意，如果您正在扩展 tomcat webdav servlet，您可能还需要考虑使用 milton.io。它是一个旨在允许可插入后端的 webdav servlet。它还附带了一个与 tomcat 的 webdav servlet 等效的文件系统实现。

# xml - Metro 应用程序 - 翻译 UI 资源 - 从外部 xml 导入内容

> ID：14135996
> 
> 赞同：2
> 
> 时间：2013-01-03T09:21:29.110
> 
> 标签：xml, localization, import, microsoft-metro, translation

我已经开始按照这个文档[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)翻译一个 Windows 8 Metro 应用程序。我的问题是：有没有办法从外部 .xml（用于同一应用程序的 android 版本）导入 .resw 文件中的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:24:54.727

有，如果你有翻译工具。

首先，您需要将 .resw 文件转换为大多数翻译工具都可以使用的文件。[Visual Studio 2012](http://msdn.microsoft.com/en-us/windows/apps/hh848309.aspx)的多语言应用工具包可以将其转换为 .xlf (XLIFF) 文件。

我们在内部使用 SDL Trados，但还有其他可以处理 XML 的工具。您可以导入您的 Android XML 并将其放入 TM（翻译记忆库）中，然后使用 TM 自动翻译您的 Win8 resw 文件。没有从 Android 到 .rews 的自动转换，Trados 所做的是匹配已经翻译的字符串。
例如，在 Android 中：DE = "Daten speichern" -> EN = "Save data" 您的 Android 中可能有 DE 版本，并且在 .resw 文件中。因此，Trados 也会自动翻译 .resw 文件中的相同字符串。

有 SLD Trados 的免费试用版可用。

# c++ - Dijkstra 的算法不起作用

> ID：14135999
> 
> 赞同：0
> 
> 时间：2013-01-03T09:21:39.547
> 
> 标签：c++, algorithm, dijkstra

我正在为一个学校项目创建一个游戏，我想使用 Dijkstra 的算法作为 AI 的一部分，用于玩家需要躲避的物体。

所以我有一个图（邻接矩阵），我想使用 Dijkstra 来获取从每个对象到玩家的路径，但是现在当我调用算法时，如果玩家跟随对象，它将找不到玩家。

据我了解，Dijkstra 的算法应该访问所有节点，直到找到目的地，但在我的情况下不是。

这是我的算法到目前为止的样子：

```
Node* Graph::DijkstrasAlgorithm(Node* sNode, Node* dNode){
    std::cout<<"Hello Dijkstra!!"<<std::endl;
    for(unsigned int i = 0; i < this->nodeList.size(); ++i){
        nodeList.at(i)->setDistance(INT_MAX);
        nodeList.at(i)->setVisited(false);
    }
    std::cout<<"everything is set"<<std::endl;
    sNode->setDistance(0);
    int numberVisited = 0;
    Node* u = new Node();
    std::cout<<"before while lus"<<std::endl;
    while(numberVisited < numberOfNodes){
        u->setDistance(INT_MAX);
        for(unsigned int j = 0; j < this->nodeList.size(); ++j){
            if((u->getDistance() > this->nodeList.at(j)->getDistance()) && !this->nodeList.at(j)->isVisited() ){
                u = this->nodeList.at(j);
                u->setVisited(true);
                numberVisited++;
            }
        }

    std::cout<<u->getNodeName()<<"=="<<dNode->getNodeName()<<std::endl;
        if((u == dNode) || (u->getDistance() == INT_MAX)){
            std::cout<<"true"<<std::endl;
            break;
        }

        for(int k = 0; k < u->numberOfneighbors(); ++k){
            if(!u->getNeighbors(k)->isVisited())
            {
            //  std::cout<<u->getDistance()<<std::endl;
                int alt = u->getDistance() + 1;
                if( alt < u->getNeighbors(k)->getDistance()){
                     u->getNeighbors(k)->setDistance(alt);
                     u->getNeighbors(k)->setPrevious(u);
                }
            }
        }

    }
    std::vector<Node* > stack;
    u = dNode;
    while(u->getPrevious() != NULL){
        stack.insert(stack.begin(), u);
        u = u->getPrevious();
    }
    if(!stack.empty())
        return stack.at(0);
    else
        return sNode;

} 
```

在这种情况下，`dNode`是目的节点，`sNode`是起始节点。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:29:00.103

在 Dijkstra 算法中，您仅将最短增广路径指向的节点标记为已访问。我可以看到你在这里犯的一个错误：

```
u = this->nodeList.at(j);
u->setVisited(true); 
```

不要立即将节点标记为已访问。

仅标记为已访问的节点`u`将在循环后指向

```
for(unsigned int j = 0; j < this->nodeList.size(); ++j){ 
```

否则，对于每一项改进，您都会将节点标记为已访问，甚至不会处理所有节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:44:24.397

它甚至不像 Dijkstra 算法。

要实现 Dijkstra 算法，您需要维护两个节点列表：

*   搜索到的节点列表
*   边缘节点的排序列表。
    此列表中的每个节点都有到达此位置的成本。

我在您的代码中都没有看到这些列表。

您还将成本存储在节点中。这将不起作用，因为到达节点的成本将取决于路线（除非您可以存储与节点关联的多个成本）。

我希望代码看起来像这样：

```
 // pseudo code.
 // Note all features used are strictly available
 //
 Node* Graph::DijkstrasAlgorithm(Node* sNode, Node* dNode)
 {
     std::list<Node*>                    searchedNodes;
     std::list<std::pair<Node*, cost>>   edgeNodes;

     edgeNodes.push_sorted(sNode, 0);

     while(!edgeNodes.empty())
     {
          std::pair<Node*, cost>  next = edgeNodes.pop_front();
          searchedNodes.push_back(next.first);

          if (next.first == dnode)
          {   // We found the route
              return STUFF;
          }

          for(Edge* edge, next.first->getEdges())
          {
              if (searchedNodes.find(edge->dst) != searchedNodes.end())
              {   continue;
              }

              edgeNodes.push_sorted(dest.dst, next.second + edge->cost);
          }
     }
 } 
```