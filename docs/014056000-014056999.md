# StackOverflow 问答 14056000-14056999

# c++ - 使用 std::make_tuple 时如何避免构造函数的未定义执行顺序

> ID：14056000
> 
> 赞同：20
> 
> 时间：2012-12-27T14:10:15.480
> 
> 标签：c++, c++11, tuples, variadic-templates

如果构造函数的执行顺序很重要，我该如何使用 std::make_tuple？

例如我猜A类的构造函数和B类的构造函数的执行顺序是未定义的：

```
std::tuple<A, B> t(std::make_tuple(A(std::cin), B(std::cin))); 
```

在阅读了对该问题的评论后，我得出了这个结论

[将 std::tuple 转换为模板参数包](https://stackoverflow.com/questions/14033828/translating-a-stdtuple-into-a-template-parameter-pack)

说这个

```
template<typename... args>
std::tuple<args...> parse(std::istream &stream) {
  return std::make_tuple(args(stream)...);
} 
```

implementation 具有未定义的构造函数执行顺序。

**更新，提供一些上下文：**

为了给我想要做的事情提供更多背景，这里有一个草图：

我想借助*CodeSynthesis* **[XSD](http://www.codesynthesis.com/projects/xsd/)**二进制解析/序列化从标准输入读取一些序列化对象。以下是如何完成此类解析和序列化的示例：[example/cxx/tree/binary/xdr/driver.cxx](http://scm.codesynthesis.com/?p=xsd/xsd.git;a=blob;f=examples/cxx/tree/binary/xdr/driver.cxx;h=495eafc35fccaff622fe706615c66ab934d69ab0;hb=HEAD)

```
xml_schema::istream<XDR> ixdr (xdr); 
std::auto_ptr<catalog> copy (new catalog (ixdr)); 
```

我希望能够指定序列化对象具有的类的列表（例如，目录、目录、3 个序列化对象的 someOtherSerializableClass）并将该信息存储为 typedef

```
template <typename... Args>
struct variadic_typedef {};

typedef variadic_typedef<catalog, catalog, someOtherSerializableClass> myTypes; 
```

正如[是否可以在不扩展模板参数包的情况下“存储”它？](https://stackoverflow.com/a/4693493/757777)

并找到一种在解析完成后获取 std::tuple 的方法。草图：

```
auto serializedObjects(binaryParse<myTypes>(std::cin)); 
```

其中 serializedObjects 将具有类型

```
std::tuple<catalog, catalog, someOtherSerializableClass> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T15:28:52.003

简单的解决方案*不是*一开始就使用`std::make_tuple(...)`，而是直接构造一个`std::tuple<...>`：成员的构造函数被调用的顺序是明确定义的：

```
template <typename>
std::istream& dummy(std::istream& in) {
    return in;
}
template <typename... T>
std::tuple<T...> parse(std::istream& in) {
    return std::tuple<T...>(dummy<T>(in)...);
} 
```

功能模板`dummy<T>()`仅用于扩展某些内容。该顺序由 中元素的构造顺序强加`std::tuple<T...>`：

```
template <typename... T>
    template <typename... U>
    std::tuple<T...>::tuple(U...&& arg)
        : members_(std::forward<U>(arg)...) { // NOTE: pseudo code - the real code is
    }                                        //       somewhat more complex 
```

在下面的讨论和 Xeo 的评论之后，似乎更好的选择是使用

```
template <typename... T>
std::tuple<T...> parse(std::istream& in) {
    return std::tuple<T...>{ T(in)... };
} 
```

大括号初始化的使用是有效的，因为大括号初始化列表中参数的求值顺序是它们出现的顺序。的语义`T{...}`在 12.6.1 [class.explicit.init] 第 2 段中描述，说明它遵循列表初始化语义的规则（注意：这与仅适用于同质类型的 std::initializer_list 无关）。排序约束在 8.5.4 [dcl.init.list] 第 4 段中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:43:10.363

正如评论所说，你可以只使用初始化列表：

```
return std::tuple<args...>{args(stream)...}; 
```

这将适用于`std::tuple`和类似（支持初始化列表）。

但是我得到了另一个更通用的解决方案，并且在不能使用初始化列表的情况下很有用。所以让我们在不使用初始化列表的情况下解决这个问题：

```
template<typename... args>
std::tuple<args...> parse(std::istream &stream) {
  return std::make_tuple(args(stream)...);
} 
```

在我解释我的解决方案之前，我想先讨论一下这个问题。事实上，一步一步地思考问题也有助于我们最终找到解决方案。因此，为了简单的讨论（和思考过程），让我们假设`args`扩展为 3 种不同的类型，即。`X`, `Y`, `Z`, ie`args = {X, Y, Z}`然后我们可以沿着这些思路思考，一步一步地找到解决方案：

*   首先，`X`,`Y`和的构造函数`Z`可以按任何顺序执行，因为C++ 标准*未指定函数参数的求值顺序。*

*   但是我们`X`要先构造，然后构造 ，然后`Y`构造`Z`。或者至少我们想模拟这种行为，这意味着`X`必须用输入流开头的数据（比如*数据*是`xData`）`Y`构建，并且必须用紧跟*在*xData 之后的数据构建，依此类推。

*   众所周知，X 不能保证首先被构造，所以我们需要*假装*。基本上，我们会从流中读取数据，**就好像**它在流的开头一样，即使`Z`是先构造的，这似乎是不可能的。只要我们从*输入流*中读取是不可能的，但是我们从一些*可索引*的 数据结构中读取数据，例如`std::vector`，那么它是可能的。

*   所以我的解决方案是这样做的：它会先填充一个`std::vector`，然后所有参数都会从*这个*向量中读取数据。

*   我的解决方案假定流中的每一行都包含构造任何类型的对象所需的所有数据。

代码：

```
//PARSE FUNCTION 
template<typename... args>
std::tuple<args...> parse(std::istream &stream) 
{
  const int N = sizeof...(args);
  return tuple_maker<args...>().make(stream, typename genseq<N>::type() );
} 
```

并且`tuple_maker`定义为：

```
//FRAMEWORK - HELPER ETC

template<int ...>
struct seq {};

template<int M, int ...N>
struct genseq  : genseq<M-1,M-1, N...> {};

template<int ...N>
struct genseq<0,N...>
{
   typedef seq<N...> type;
};

template<typename...args>
struct tuple_maker
{
   template<int ...N>
   std::tuple<args...> make(std::istream & stream, const seq<N...> &)
   {
     return std::make_tuple(args(read_arg<N>(stream))...);
   }
   std::vector<std::string> m_params;
   std::vector<std::unique_ptr<std::stringstream>> m_streams;
   template<int Index>
   std::stringstream & read_arg(std::istream & stream) 
   {
     if ( m_params.empty() )
     {
        std::string line;
        while ( std::getline(stream, line) ) //read all at once!
        {
                m_params.push_back(line);
        }
     }
     auto pstream = new std::stringstream(m_params.at(Index));
     m_streams.push_back(std::unique_ptr<std::stringstream>(pstream));
     return *pstream;
   }
}; 
```

## 测试代码

```
///TEST CODE

template<int N>
struct A 
{
    std::string data;
    A(std::istream & stream) 
    {
        stream >> data;
    }
    friend std::ostream& operator << (std::ostream & out, A<N> const & a)
    {
        return out << "A" << N << "::data = " << a.data ;
    }
};

//three distinct classes!
typedef A<1> A1; 
typedef A<2> A2;
typedef A<3> A3;

int main()
{
    std::stringstream ss("A1\nA2\nA3\n");
    auto tuple = parse<A1,A2,A3>(ss);
    std::cout << std::get<0>(tuple) << std::endl;
    std::cout << std::get<1>(tuple) << std::endl;
    std::cout << std::get<2>(tuple) << std::endl;
} 
```

输出：

```
A1::data = A1
A2::data = A2
A3::data = A3 
```

这是预期的。[自己在 ideone 上](http://ideone.com/0z0DxE)查看演示。:-)

请注意，此解决方案通过读取第一次调用中的所有行来避免从流中读取的顺序问题`read_arg`，并且所有后续调用都`std::vector`使用索引从 中读取。

现在你可以在类的构造函数中放一些printf，看看构造的顺序和函数模板的模板参数的顺序是**不**一样的`parse`，这很有趣。此外，这里使用的技术对于无法使用列表初始化的地方很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T14:27:04.767

这里没有什么特别之处`make_tuple`。C++ 中的任何函数调用都允许以未指定的顺序调用其参数（允许编译器自由优化）。

我真的不建议使用具有副作用的构造函数，使得顺序很重要（这将是维护的噩梦），但如果你绝对需要这个，你总是可以显式地构造对象来设置你想要的顺序：

```
A a(std::cin);
std::tuple<A, B> t(std::make_tuple(a, B(std::cin))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:41:03.733

这个答案来自我对[模板包问题的评论](https://stackoverflow.com/questions/14033828/translating-a-stdtuple-into-a-template-parameter-pack)

由于`make_tuple`从构造的组件中推导出元组类型并且函数参数具有未定义的评估顺序，因此构造必须在机器内部进行，这就是我在评论中提出的。在这种情况下，没有必要使用`make_tuple`; 您可以直接从元组类型构造元组。但这也没有命令施工；我在这里所做的是构造元组的每个组件，然后构建一个对组件的引用的元组。如果组件易于移动或复制，引用元组可以轻松转换为所需类型的元组。

这是稍微修改的解决方案（来自评论中的 lws 链接），并进行了一些解释。这个版本只处理类型不同的元组，但更容易理解；下面还有另一个版本可以正确执行。和原来的一样，元组组件都被赋予了相同的构造函数参数，但改变它只需要`...`在用`// Note: ...`

```
#include <tuple>
#include <type_traits>

template<typename...T> struct ConstructTuple {
   // For convenience, the resulting tuple type
   using type = std::tuple<T...>;
   // And the tuple of references type
   using ref_type = std::tuple<T&...>;

   // Wrap each component in a struct which will be used to construct the component
   // and hold its value.
   template<typename U> struct Wrapper {
      U value;
      template<typename Arg>
      Wrapper(Arg&& arg)
          : value(std::forward<Arg>(arg)) {
      }
   };

   // The implementation class derives from all of the Wrappers.
   // C++ guarantees that base classes are constructed in order, and
   // Wrappers are listed in the specified order because parameter packs don't
   // reorder.
   struct Impl : Wrapper<T>... {
      template<typename Arg> Impl(Arg&& arg)        // Note ...Arg, ...arg
          : Wrapper<T>(std::forward<Arg>(arg))... {}
   };

   template<typename Arg> ConstructTuple(Arg&& arg) // Note ...Arg, ...arg
       : impl(std::forward<Arg>(arg)),              // Note ...
         value((static_cast<Wrapper<T>&>(impl)).value...) {
   }
   operator type() const { return value; }
   ref_type operator()() const { return value; }

   Impl impl;
   ref_type value;
};

// Finally, a convenience alias in case we want to give `ConstructTuple`
// a tuple type instead of a list of types:
template<typename Tuple> struct ConstructFromTupleHelper;
template<typename...T> struct ConstructFromTupleHelper<std::tuple<T...>> {
  using type = ConstructTuple<T...>;
};
template<typename Tuple>
using ConstructFromTuple = typename ConstructFromTupleHelper<Tuple>::type; 
```

让我们试一试

```
#include <iostream>

// Three classes with constructors
struct Hello { char n;   Hello(decltype(n) n) : n(n) { std::cout << "Hello, "; }; };
struct World { double n; World(decltype(n) n) : n(n) { std::cout << "world";   }; };
struct Bang  { int n;    Bang(decltype(n)  n) : n(n) { std::cout << "!\n";     }; };
std::ostream& operator<<(std::ostream& out, const Hello& g) { return out << g.n; }
std::ostream& operator<<(std::ostream& out, const World& g) { return out << g.n; }
std::ostream& operator<<(std::ostream& out, const Bang&  g) { return out << g.n; }

using std::get;
using Greeting = std::tuple<Hello, World, Bang>;
std::ostream& operator<<(std::ostream& out, const Greeting &n) {
   return out << get<0>(n) << ' ' << get<1>(n) << ' ' << get<2>(n);
}

int main() {
    // Constructors run in order
    Greeting greet = ConstructFromTuple<Greeting>(33.14159);
    // Now show the result
    std::cout << greet << std::endl;
    return 0;
} 
```

[在liveworkspace](http://liveworkspace.org/code/2oEzQ0)上查看它的实际效果。验证它在 clang 和 gcc 中的构造顺序是否相同（libc++ 的元组实现以与 stdlibc++ 相反的顺序保存元组组件，所以我猜这是一个合理的测试。）

为了使这与可能具有多个相同组件的元组一起工作，有必要修改`Wrapper`为每个组件的唯一结构。最简单的方法是添加第二个模板参数，它是一个顺序索引（libc++ 和 libstdc++ 在它们的元组实现中都这样做；这是一种标准技术）。让“索引”实现来做这件事会很方便，但为了说明目的，我刚刚做了一个快速而肮脏的递归：

```
#include <tuple>
#include <type_traits>

template<typename T, int I> struct Item {
  using type = T;
  static const int value = I;
};

template<typename...TI> struct ConstructTupleI;
template<typename...T, int...I> struct ConstructTupleI<Item<T, I>...> {
   using type = std::tuple<T...>;
   using ref_type = std::tuple<T&...>;

   // I is just to distinguish different wrappers from each other
   template<typename U, int J> struct Wrapper {
      U value;
      template<typename Arg>
      Wrapper(Arg&& arg)
          : value(std::forward<Arg>(arg)) {
      }
   };

   struct Impl : Wrapper<T, I>... {
      template<typename Arg> Impl(Arg&& arg)
          : Wrapper<T, I>(std::forward<Arg>(arg))... {}
   };

   template<typename Arg> ConstructTupleI(Arg&& arg)
       : impl(std::forward<Arg>(arg)),
         value((static_cast<Wrapper<T, I>&>(impl)).value...) {
   }
   operator type() const { return value; }
   ref_type operator()() const { return value; }

   Impl impl;
   ref_type value;
};

template<typename...T> struct List{};
template<typename L, typename...T> struct WrapNum;
template<typename...TI> struct WrapNum<List<TI...>> {
  using type = ConstructTupleI<TI...>;
};
template<typename...TI, typename T, typename...Rest>
struct WrapNum<List<TI...>, T, Rest...>
    : WrapNum<List<TI..., Item<T, sizeof...(TI)>>, Rest...> {
};

// Use WrapNum to make ConstructTupleI from ConstructTuple
template<typename...T> using ConstructTuple = typename WrapNum<List<>, T...>::type;

// Finally, a convenience alias in case we want to give `ConstructTuple`
// a tuple type instead of a list of types:
template<typename Tuple> struct ConstructFromTupleHelper;
template<typename...T> struct ConstructFromTupleHelper<std::tuple<T...>> {
  using type = ConstructTuple<T...>;
};
template<typename Tuple>
using ConstructFromTuple = typename ConstructFromTupleHelper<Tuple>::type; 
```

[在这里](http://liveworkspace.org/code/ymZUD)进行测试。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-27T16:25:32.873

我相信手动展开定义的唯一方法。像下面这样的东西可能会起作用。我欢迎尝试让它变得更好。

```
#include <iostream>
#include <tuple>

struct A { A(std::istream& is) {}};
struct B { B(std::istream& is) {}};

template <typename... Ts> 
class Parser
{ };

template <typename T>
class Parser<T>
{
public:
   static std::tuple<T> parse(std::istream& is) {return std::make_tuple(T(is)); }
};

template <typename T, typename... Ts>
class Parser<T, Ts...>
{
public:
   static std::tuple<T,Ts...> parse(std::istream& is) 
   {
      A t(is);
      return std::tuple_cat(std::tuple<T>(std::move(t)),
         Parser<Ts...>::parse(is));
   }
};

int main()
{
   Parser<A,B>::parse(std::cin);
   return 1;
} 
```

# osx-lion - oh-my-zsh 主题无法正确显示（背景保持白色）

> ID：14056007
> 
> 赞同：25
> 
> 时间：2012-12-27T14:10:49.687
> 
> 标签：osx-lion, zsh, zshrc

我试图弄清楚为什么我的 oh-my-zsh 主题不能正常工作。颜色正确显示，但背景保持白色（带有黑色文本）。下面是我的 /.zshrc 文件和当前路径变量：

```
 # Path to your oh-my-zsh configuration.
    ZSH=$HOME/.oh-my-zsh

    export PATH="$HOME/.rbenv/bin:$PATH"
    eval "$(rbenv init -)"

    # Set name of the theme to load.
    # Look in ~/.oh-my-zsh/themes/
    # Optionally, if you set this to "random", it'll load a random theme each
    # time that oh-my-zsh is loaded.
    export ZSH_THEME="robbyrussell"

    # Example aliases
    # alias zshconfig="mate ~/.zshrc" 
    # alias ohmyzsh="mate ~/.oh-my-zsh"

    # Set to this to use case-sensitive completion
    # CASE_SENSITIVE="true"

    # Comment this out to disable weekly auto-update checks
    # DISABLE_AUTO_UPDATE="true"

    # Uncomment following line if you want to disable colors in ls
    #DISABLE_LS_COLORS="true"

    # Uncomment following line if you want to disable autosetting terminal title.
    # DISABLE_AUTO_TITLE="true"

    # Uncomment following line if you want red dots to be displayed while waiting for   completion
    # COMPLETION_WAITING_DOTS="true"

    # Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
    # Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/
    # Example format: plugins=(rails git textmate ruby lighthouse)
    plugins=(git rails ruby brew)

    source $ZSH/oh-my-zsh.sh

    # Customize to your needs...
    autoload -U colors
    colors 
```

这是 $PATH ：

```
 ➜  ~  echo $PATH
    /Users/natascha/.rbenv/shims:/Users/natascha/.rbenv/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/usr/texbin 
```

我在 Mac OS X 10.7.5 上并在几个月前安装了 oh-my-zsh。我在 git 问题上发表了一篇文章，[https://github.com/robbyrussell/oh-my-zsh/issues/929# issuecomment-11652602](https://github.com/robbyrussell/oh-my-zsh/issues/929#issuecomment-11652602)，好像还没有解决？我的插件可以工作（即我可以为“rails 控制台”键入 rails c）。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-04T02:33:25.810

简短的回答：不，`zsh`在这里帮不了你。您需要更改*终端模拟器*颜色设置，而不是`zsh`设置。

这是您目前看到的：

![你所看到的](../Images/ddc0e4f413e8f336c9184e9e74343397.png)

这就是您期望看到的：

![RobbyRussell 主题](../Images/b0ca22f11d87e56afd2f76956fdcb502.png)

这是产生此提示的行：

```
PROMPT='%{$fg_bold[red]%}➜ %{$fg_bold[green]%}%p %{$fg[cyan]%}%c 
%{$fg_bold[blue]%}$(git_prompt_info)%{$fg_bold[blue]%} % %{$reset_color%}' 
```

Z-Shell*确实*有一些设置`foreground`，`background`您可以在`PROMPT`- 这就是`fg_bold`意思（*前景*到*粗体*）中使用。您可以将其替换`bg_`为 for background，并省略`bold`以使用非粗体字体。

例如，我们可以通过添加来设置`PROMPT`to的背景：`green``%{bg[green]%}`

```
PROMPT='%{$bg[green]%}%{$fg_bold[red]%}➜ %{$fg_bold[green]%}%p %{$fg[cyan]%}%c 
%{$fg_bold[blue]%}$(git_prompt_info)%{$fg_bold[blue]%} % %{$reset_color%}' 
```

这导致：

![提示中的绿色背景](../Images/9b939056e2e7ebb5b0facbc3ad83f9c6.png)

但是，这很可能**不是您想要**的。注意几点：

1.  `bg[green]`不会延伸到终端窗口的边缘 -设置仅**适用于绘制线条的***位置*。`PROMPT`
***   背景颜色在提示结束时重置为“默认” - 这是由`%{$reset_color%}`（需要将`foreground`颜色更改为默认值）完成的。获得一致的整行背景颜色很快就会变得混乱。**

 **### 颜色如何工作

大致（我可能在细节上是错误的，但我相信总体要点是正确的）：您使用的 shell 将 a 发送`color code`到*终端仿真器*。*终端仿真器*负责解释该颜色代码，并将其显示在屏幕上。这意味着您可以使用两种设置：

1.  `shell`颜色设置。这就是你在你的`zshrc`. 首先，这允许一致性 - 您可以说“将提示的*这一位与提示的**那位*显示相同”。这**并不**意味着用户会在;中*看到*提示。是一个标签，仅此而已。`$COLOR`****`$COLOR``$COLOR`****
*****   显示的*颜色设置*。这就是您设置首选`font`的 , `background`,`text color`等的地方。在这里您可以说“将 shell 所说的所有内容显示`$COLOR_1`为`red`, `$COLOR_2`as `green`”等。****

 ****您可以在`ANSI`终端中使用 16 种颜色，它们可能会或可能不会正确显示。检查[此表](http://en.wikipedia.org/wiki/ANSI_escape_code#Colors)以了解一些常见的终端颜色，并注意它们之间显示的差异！

### 修复你的颜色

如果您正在使用`Terminal.app`（在 OS X 上，我建议`iTerm2`），请打开终端 ( `command`+ `,`) 的首选项，然后选择“设置”。有一堆“配置文件”可供您选择——为了模拟`robbyrussell`上面的屏幕截图，您需要稍微调整一下颜色。“自制”非常接近，但有不同的“文本”颜色（绿色而不是白色）。

[这里是Terminal.app 配置文件的`robbyrussell` `zsh`主题：`Homebrew`

![Robby Russel <code>zsh</code> 主题与 <code>Homebrew</code> Terminal.app 配置文件](../Images/9614d165a68e8bf40014ba78e75fd36c.png)

如果您想要一个好的、预设的、易于使用的配色方案，请查看[Solarized](http://ethanschoonover.com/solarized)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-01T10:12:01.193

就像上面的答案中所说的那样，*“您需要更改终端模拟器颜色设置：”*

我找不到任何更改终端应用程序的理由，最简单的方法是将主题更改为以下链接中的可用主题之一，您可以找到适合 oh-my-zsh 主题的主题。

[osx 终端主题](https://github.com/lysyi3m/osx-terminal-themes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-12T22:27:14.577

对我来说，修复是在首选项面板中找到的，我必须取消选择覆盖主题的选项...

我在 Red Hat 实例上使用 gnome-terminal。

位于：终端 -> 首选项 -> 未命名 -> 颜色 -> 使用系统主题中的颜色

（我花了很长时间才意识到这一点......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-19T20:04:13.053

我很惊讶这也不是开箱即用的。但是，只需对主题进行一些小的更改，我就可以非常接近 `Basic`：

[![在此处输入图像描述](../Images/84e478181f36bfea7daf4ff73c933b35.png)](https://i.stack.imgur.com/ZF9nx.jpg)

*   将背景更改为深色
*   将文本更改为浅色
*   更改选择/不透明度以获得良好的高光

此外，在选择颜色时，请使用滴管获得您正在寻找的确切颜色：

[![在此处输入图像描述](../Images/21f38d742b79e0cb879ba4705ff11c39.png)](https://i.stack.imgur.com/pzkKhm.png)

使用吸管和[他的主题图片](https://github.com/ohmyzsh/ohmyzsh/wiki/Themes#robbyrussell)，您应该可以非常接近。******

# actionscript-3 - 如何使用 ActionScript 3.0 创建可编辑的文本区域

> ID：14056009
> 
> 赞同：1
> 
> 时间：2012-12-27T14:11:05.340
> 
> 标签：actionscript-3, textarea, flash-cs5

我正在使用 adobe flash 开发课件。我有一个想法，为`textarea`每一章添加一个，以便用户可以写关于该特定章节的注释[与 MS PowerPoint 相同]。同时，他们也可以编辑笔记。我只有关于 ActionScript 的基本概念，所以我不确定如何实现它。我只是想知道：

*   是否需要创建数据库来保存/编辑文本？如果，那么我可以使用什么样的数据库？

*   还有其他方法可以实现这个想法而不是使用`textarea`？

任何形式的帮助表示赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:04:53.110

Flash 运行时为持久存储提供了多种选项。您使用哪一种取决于您的应用程序的设计。我强烈推荐 ActionScript 开发人员指南（[PDF 版本](http://help.adobe.com/en_US/as3/dev/as3_devguide.pdf)或[在线版本](http://help.adobe.com/en_US/as3/dev/index.html)）。具体见：

*   第 7 章：使用原生 JSON 功能
*   第 38 章：使用文件系统
*   第 39 章：存储本地数据

本地存储的主要模式有：

*   使用类似cookie的[SharedObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)在本地存储少量用户数据
*   如果您使用 AIR，则为本地 SQL 数据库（开发指南中的第 40 章或在线：使用 AIR 中的[本地 SQL 数据库](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a5497-7fb4.html)）
*   在本地存储外部文件（例如 XML 文件或使用[ByteArray](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html)操作的自定义文件二进制格式）

此外，ActionScript 可以创建和使用直接套接字和 HTTP 连接。借助这些，Flash 或 AIR 应用程序可以像任何其他 Web 应用程序一样处理远程数据，例如通过 RESTful 服务（请参阅 XML 和 JSON 章节），或通过 PHP 或 ASP 的 Web 服务器介导的数据库访问。

# c - HTTP POST 多部分“错误请求”

> ID：14056011
> 
> 赞同：1
> 
> 时间：2012-12-27T14:11:22.610
> 
> 标签：c, http-headers, http-post, winsock

我正在尝试使用 POST 上传文件

这是我的要求：

```
POST /upload.php HTTP/1.1
Host: localhost
Content-Type: multipart/form-data; boundary=---------------------------552335022525
Content-Length: 192
-----------------------------552335022525
Content-Disposition: form-data; name="userfile"; filename="12.txt"
Content-Type: text/plain

blabla
-----------------------------552335022525-- 
```

使用 HTTP live headers firefox 插件一切正常

但是当将其放入 char *buffer 并使用 winsocksapi 发送时，我收到 400 Bad Request 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:51:52.083

您需要在标头和有效负载之间有一个空行。

```
Content-Length: 192

-----------------------------552335022525 
```

这是 HTTP 协议的一部分。HTTP 请求标头以第一个空行结尾（CR-LF 本身。）您发送的内容会生成字符串

```
-----------------------------552335022525 
```

被（连同以下两行）作为请求标头，当然，它不是。服务器无法对此做出决定，因此它以 400 Bad Request 响应。

此外，使用 multipart/form-data 发送 Content-length 不是必需的，甚至不是一个好主意，因为错误的值可能会产生问题。MIME 多部分格式是自我描述的。

# jquery - 加载时隐藏 JSON 内容

> ID：14056015
> 
> 赞同：0
> 
> 时间：2012-12-27T14:11:36.207
> 
> 标签：jquery, json, preload

我试图隐藏动态填充的内容 div (#photographs)，而它正在由 JSON 填充。

```
$(window).load(function() { 

$("#loader").fadeIn("fast");

$.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photosets.getPhotos&photoset_id=' + photoset_id + '&per_page=1000' + '&page=1' + '&api_key=' + apiKey + '&user_id=' + userId + '&jsoncallback=?', function(data) {
    var fullPhotoURL, flickrLink;

    $.each(data.photoset.photo, function(i, flickrPhoto){
        var basePhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/'
        + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_z.jpg";  

        var fullPhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/'
        + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_l.jpg";          

        $("<img/>").attr("src", basePhotoURL).appendTo("#photographs").wrap(("<div class='item'></div>"))
    });

    $("#loader").fadeOut("fast");

});
}); 
```

以上当然在一定程度上有效。加载动画 (#loader) 在加载时淡入，在 JSON 调用**开始**时淡出。我需要的是，在加载时，图片不会显示（所以将#photographs 设置为显示：无？），并且**在**所有内容加载后，#loader 会淡出（当然图片也是如此）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:18:04.737

为什么不等到加载所有照片后再将 img 标签附加到#photographs？

例如

```
$.getJSON(...) {
  var images = [];

  $.each(data.photoset.photo, function(i, flickrPhoto){
     ...
     images.push($("<img/>").attr("src", basePhotoURL));
  });
  $.each(images, function(index, img) {
     img.appendTo("#photographs").wrap(("<div class='item'></div>"));
  });
}); 
```

# bash - 从网页源获取链接的绝对路径

> ID：14056016
> 
> 赞同：2
> 
> 时间：2012-12-27T14:11:37.587
> 
> 标签：bash, shell, wget

我想从网页源中找到链接的绝对路径。
例如在网页源代码中，有这样一行：

```
href="lectures/lecture04.pdf" 
```

但是这个的绝对路径是

```
www.abc.com/courses/cs101/lectures/lecture04.pdf 
```

有没有办法在 bash shell 中获取这条路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:39:02.637

尝试：

```
$ wget --convert-links URL 
```

从[`wget`手册](http://www.gnu.org/software/wget/manual/html_node/index.html)中，开关`--convert-links`描述如下：

> Wget 尚未下载的文件的链接将更改为包括主机名和它们指向的位置的绝对路径。
> 
> 示例：如果下载的文件 /foo/doc.html 链接到 /bar/img.gif（或 ../bar/img.gif），则 doc.html 中的链接将被修改为指向`http://hostname/bar/img.gif`.

# arrays - AS3：在数组中的一定数量的影片剪辑后没有命中检测

> ID：14056017
> 
> 赞同：1
> 
> 时间：2012-12-27T14:11:38.707
> 
> 标签：arrays, actionscript-3, loops, for-loop

我意识到描述有点模糊，如果不显示代码我无法解释这个问题！

基本上，我在 AS3 中制作了一款游戏，其中包含一个在平台风格关卡收集物品中移动的角色。这些项目都是同一实例 (vinyl1a) 的单独影片剪辑。

对关卡中每个项目的引用存储在一个数组中，如下所示：

```
vinylArray=[mapbg.misc.vinyl1, mapbg.misc.vinyl2, mapbg.misc.vinyl3, mapbg.misc.vinyl4,...] 
```

实际数组最多可包含 40 个项目。碰撞检测是通过一个 for 循环完成的，如下所示：

```
var i:int;
for (i=0; i < maxVinyl; i++){ //iterate from 0 to maximum amount of vinyl
    if (woody.hitTestObject(vinylArray[i])) { //checks if woody collides with vinyl
        if (vinylArray[i].visible == true) { //checks if the vinyl has already been taken
        vinylArray[i].visible = false; //removes vinyl from map
        vinylCollected++; //adds to score
        updateScore();
        }
        }
    } 
```

在这种情况下，“木本”是角色。现在，问题是，我已经让它对多达 10 个“乙烯基”物品工作得很好，涵盖了游戏的前 3 个关卡。现在我已经进入第 4 级，我在地图中添加了更多的“乙烯基”电影剪辑（数组始终有 40 个值，但 for 循环仅迭代到为每个单独级别设置的“maxVinyl”）和一些原因是碰撞检测不起作用。

没有错误消息，前 10 个影片剪辑仍然可以正确检测到，但 11 之后的则不是。

任何帮助将不胜感激 - 如果您需要有关该问题的更多信息，请询问！

干杯

编辑：忘了提，我在第一级测试了 10 多个乙烯基并且检测工作正常 - 情况是所有乙烯基影片剪辑都存储在每个级别的单独关键帧中，在名为 misc 的影片剪辑中。所以我可以在第一级做10+，但似乎就是这样..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:20:28.617

我想正在发生的事情是 maxVinyl 没有设置为数组的正确长度。

一个简单的 ：

```
maxVinyl = vinylArray.length; 
```

在 for 循环之前，应确保该数组中的所有对象都按需要被 hitTest。

根据一些评论，听起来您的方法还有一些其他问题可能是更大的问题。

# java - 通过 Java 程序备份和恢复 MS SQL Server 数据库

> ID：14056021
> 
> 赞同：0
> 
> 时间：2012-12-27T14:11:54.937
> 
> 标签：java, sql-server-2005, backup, restore

我已经开发了一个带有 MS-SQL Server 数据库的 Java Swing 应用程序，现在我想在我的 java swing 应用程序中提供备份和恢复选项，单击一个按钮它应该备份数据库和恢复数据库我怎么能通过java来做。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:51:32.420

有两种方法可以做到这一点。备份和恢复只是 sql 命令，因此您可以像执行任何其他 sql 一样执行它们，例如 sql insert 语句，不幸的是，您需要对系统有一些了解才能执行它们，并且您将没有进度指示器。使用 SQLSMO 是另一种可能性，但不确定是否从 java 中访问 .net dll。您可以使用 SQLDMO (pre.net)，但您需要安装向后兼容工具，而且您会因为 SQL2012 不支持 DMO（虽然它似乎可以工作）而让自己升级头疼。两者都有一个事件，您可以在进度条上打勾，当然，如果备份速度相当快，您可以不用理会它。

但是，还有一些需要考虑。您可以在系统运行时进行备份，但是当您这样做时，您将不清楚系统所在的位置。

恢复需要独占访问和高级别的特权，所以这不是你分发的东西，你需要让每个人都离开数据库。

最后但并非最不重要的是，如果您无意中恢复了与应用程序不再匹配的数据库版本，那将是非常糟糕的......

就我个人而言，我会说被授权这样做的人应该能够在没有你的工具的情况下做到这一点。简化它意味着需要大量代码来确保他们不会从您在八个版本之前发布的试用版中恢复 sql2000 备份。

我们做了类似的备份恢复代码大约占应用程序的 2%。例如，我们使用 dbcc 等进行备份前检查，以确保他们没有成功备份损坏的数据库......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:49:31.177

您可以编写一个简单的[脚本](https://stackoverflow.com/questions/122690/what-is-a-simple-command-line-program-or-script-to-backup-sql-server-databases)来备份您的数据库并从[java](http://www.dzone.com/snippets/execute-shell-command-java)调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:20:43.790

你真的需要在这里付出一点努力。

由于您已经可以连接到数据库服务器并向其发送 SQL 命令，因此请阅读[此](http://msdn.microsoft.com/en-us/library/ms187510.aspx#TsqlProcedure)内容以使用 TSQL 进行备份。

对于数据库还原，请阅读[此](http://msdn.microsoft.com/en-US/library/ms186858%28v=sql.90%29.aspx).

您需要具有适当的权限和对硬件的访问权限才能使其正常工作。

# vb.net - VB.Net 仅使用 TCP 获取 1 个图像

> ID：14056024
> 
> 赞同：1
> 
> 时间：2012-12-27T14:11:57.567
> 
> 标签：vb.net, image, networking, tcp, stream

我最近决定创建一个应用程序来查看其他计算机的桌面，到目前为止我可以看到桌面，但它似乎只发送 1 个图像：？我在客户端使用 TCP 客户端和一些线程（查看桌面的那个）。当服务器发送图像后，它似乎被锁定并成为无响应的 **客户端接收代码：**

```
 Private Sub check()
    If sock.Connected = True Then
        sock.SendTimeout = 5000
        Try
            Application.DoEvents()
            Dim nstream As NetworkStream
            Dim bf As New BinaryFormatter
            nstream = sock.GetStream
            PictureBox1.Image = Nothing
            PictureBox1.Image = bf.Deserialize(nstream)
            If nstream.DataAvailable = True Then
                MsgBox(nstream)
            End If
        Catch ex As Exception
            check()
        End Try
    End If
End Sub 
```

然后这是发送它的代码 **发送代码：**

```
 Public Function Desktop() As Image
    Dim bounds As Rectangle = Nothing
    Dim screenshot As System.Drawing.Bitmap = Nothing
    Dim graph As Graphics = Nothing
    bounds = Screen.PrimaryScreen.Bounds
    screenshot = New Bitmap(bounds.Width, bounds.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb)
    graph = Graphics.FromImage(screenshot)
    graph.CopyFromScreen(bounds.X, bounds.Y, 0, 0, bounds.Size, CopyPixelOperation.SourceCopy)
    Return screenshot
End Function

Private Sub SendDesk()
    If sock.Connected = True Then
        Try
            Dim nstream As NetworkStream
            Dim bf As New BinaryFormatter
            nstream = sock.GetStream
            bf.Serialize(nstream, Desktop())
        Catch ex As Exception
        End Try
    End If
End Sub 
```

我已经在 Vb.net 中编码了一段时间（基本的东西，一些 HTTP 的东西），但我对 TCP 和网络流很陌生，非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-27T21:23:57.953

您需要重复图像发送过程...

```
While sock.Connected = True
        Try
            Dim nstream As NetworkStream
            Dim bf As New BinaryFormatter
            nstream = sock.GetStream
            bf.Serialize(nstream, Desktop())
        Catch ex As Exception
        End Try
    End While 
```

# asp.net - asp.net 表单身份验证 cookie 在 ie8 中不起作用

> ID：14056028
> 
> 赞同：0
> 
> 时间：2012-12-27T14:12:21.020
> 
> 标签：asp.net, form-authentication

在我们的 asp.net 应用程序中，我们使用表单身份验证。

我们使用 iframe 进行布局，但 src 的所有链接都在我们的域内。

有时如果用户使用ie8登录，他总是会重定向到登录页面，然后我使用开发者工具，我发现浏览器中没有设置cookie。

但是，在其他一些机器上，用户可以使用 ie8 登录。

它在firefox和ie7中运行良好。

我们服务器的名称是`sbl21`，没有不允许的字符。

这是表单配置：

```
<forms name="LoginCookieName" loginUrl="login.aspx" timeout="40" /> 
```

如果我们添加`cookieless="UseUri"`，则用户可以登录，但如果他单击页面中的任何链接，则会显示一个警告框，显示用户未登录。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:45:53.890

我是作者，这个问题解决了。

为什么用户无法登录是因为cookie一旦写入ie就过期了。

这是因为服务器计算机中的时间比客户端计算机中的时间旧。

（出于某种考虑，我们更改了服务器计算机时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:15:03.110

Chances are some of your pages using subdomain, like `http://www.sbl21` and others using `http://sbl121`. Browser under such circumstances consider the domain to be different.

# javascript - 图像作为后变量

> ID：14056038
> 
> 赞同：2
> 
> 时间：2012-12-27T14:13:19.020
> 
> 标签：javascript, jquery, canvas

我正在一个网站上工作，该网站有一项功能，用户可以使用无画布钢笔工具直接在网页上签名。当用户单击“应用签名”按钮时，用户绘制的签名将转换为图像并保存在页面上`<img src="">`（如下面的代码所示）。到目前为止，一切都很好。

问题是，当用户提交表单时，我试图让新创建的画布图像将其作为 post 变量提交，并在`process.php`页面上呈现为已签名的签名。看起来图像 (toDataURL()) 作为 post 变量传递，但由于某种原因，它没有呈现在 process.php 页面上。似乎找不到图像源。

我是 javascript 的新手，我已经尝试解决这个问题好几天了，如果能帮助我解决这个问题，我将不胜感激。提前谢谢了！

标记

```
<div class="signature-field">
    Sign:
    <span class="sketch-container">
       <canvas id="simple_sketch" width="350" height="100"></canvas>
    </span> 
    Date: <input name="signature-date" type="text"><br/>
    <div class="signature-buttons">
        <span class="save-signature">Apply Signature | </span> 
        <span class="reset-canvas">| Reset Signature</span><br/>
    </div>
</div>

<form method="post" action="process.php">
    <input type="text" name="fname">
    <input id="signature" name="signature" type="hidden">
   <input type="submit">
</form> 
```

JavaScript

```
$(function () {
    var sktch = $('#simple_sketch').sketch();
    var cleanCanvas = $('#simple_sketch')[0];

    $('.save-signature').click(function () {
        /* replace canvas with image */
        var canvas = document.getElementById("simple_sketch");
        var img = canvas.toDataURL("image/png");
        $('#simple_sketch').replaceWith('<img src="' + img + '"/>');
        $('.signature-buttons').replaceWith('');
        document.getElementById("signature").value = $('.sketch-container').html();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:20:51.203

我不太确定您在这里做什么，但是如果您想通过隐藏`signature`字段发布图像数据，只需执行以下操作：

```
document.getElementById("signature").value = document.getElementById("simple_sketch").toDataURL("image/png"); 
```

就目前而言，您似乎正在发布包含`<img>`标签 ( `"<img src="<DataUrl>"/>"`)的图像数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:20:39.427

你的服务器端代码怎么样，img 参数输出是空的吗？您确定正在通过请求发送 img 数据吗？尝试一些数据包嗅探工具，如 Fiddler 或 Wireshark 并分析请求的内容（您也可以使用 Firebug 快速查看）。

也许您可以尝试其他方法来转换 img 数据： [https ://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)

# excel - 创建动态链接

> ID：14056039
> 
> 赞同：2
> 
> 时间：2012-12-27T14:13:29.880
> 
> 标签：excel, excel-2010

我需要创建一个如下所示的链接

```
 =CONCATENATE("http://servernaem/SMSReporting/Report.asp?ReportID=104&AdvertID=SCCM20067&Name=", A5) 
```

问题是当我单击链接时，`A5`缺少来自的数据。（它确实出现在 Excel 电子表格中。

什么是首选的解决方案是让工作状态报告出现在单元格中而不是 URL 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:11:08.487

您需要将您的连接放入超链接函数中。

`=HYPERLINK(CONCATENATE("http://servernaem/SMSReporting/Report.asp?ReportID=104&AdvertID=SCCM20067&Name=", A5))`

连接两个字符串的更好方法是使用这样的`&`字符

`=HYPERLINK("http://servernaem/SMSReporting/Report.asp?ReportID=104&AdvertID=SCCM20067&Name="& A5)`

# asp.net - 为 ASP.NET 应用程序收集性能计数器数据的首选方法

> ID：14056040
> 
> 赞同：1
> 
> 时间：2012-12-27T14:13:38.723
> 
> 标签：asp.net, .net, iis, windows-server-2008-r2, performancecounter

假设我有一个在 Windows Server 2008 R2 + IIS 7.5（或 Windows Server 2012 + IIS 8）上运行的 ASP.NET 应用程序，它使用 SQL Server 作为其数据存储。

以前有人问过[要监视哪些 ASP.NET 性能计数器的](https://stackoverflow.com/questions/161737/what-are-the-best-asp-net-performance-counters-to-monitor)问题，但我找不到任何好的资源来自动收集性能计数器数据。

我心中的想法如下：

> 在特定的时间间隔内（可能是 10 秒？）收集指定的性能计数器，并将它们放入存储系统（SQL Server 数据库、Windows Azure 表存储、Windows Azure Blob 存储、MongoDB 等）。

以下是我考虑的方式：

*   实现上述动作的 PowerShell 脚本。我以前没有这样做过，但我认为有一种方法可以将此脚本与 Windows 调度程序相关联，以便在特定时间间隔内自动调用。
*   实现上述动作的一个 Windows 服务。

大局是我将有一个仪表板应用程序，它将读取这些数据以显示图形输出（图表等）。

你有什么想法和以往的经历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:50:01.477

根据我以前的经验，Windows 服务是我最后的选择。实际上，使用 powershell 完成此类任务对我来说更易于维护和轻松。现在我正在尝试为计数器和事件日志集成 RavenDB，以获得有关 IIS 应用程序的详细报告。

# java - 可以去掉zkoss Events.echoEvent吗？

> ID：14056042
> 
> 赞同：1
> 
> 时间：2012-12-27T14:13:40.760
> 
> 标签：java, zk

我正在尝试执行以下操作：

1.  发送长执行请求（我在这里使用`Events.echoEvent`）

2.  使用“取消”按钮显示模式对话框（等待...）

3.  如果用户按下“取消”，对话框将被隐藏并且不应执行事件方法。

4.  如果用户不按下按钮并等待。事件方法被调用并关闭等待对话框

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:44:41.483

ZK 通常在单个线程中为服务器上的单个请求完成所有工作。`Events.echoEvent`让您通过完成请求，然后立即在一个全新的请求（和线程）中回调服务器来解决这个问题。用户与客户端的交互会触发一个新请求，因此这也将是一个新线程。

因此，在上面的示例中，您将使用三个线程：

1.  对于调用的原始请求`echoEvent`
2.  对于由创建的新请求`echoEvent`
3.  对于用户单击“取消”时创建的请求

显然，当最后两个被调用时，第一个将早已不复存在，但这是您需要考虑的问题才能解决您的问题。

你会在 StackOverflow 上找到很多关于让两个线程进行交互的讨论，或者更具体地说，让一个线程中断另一个线程。

我将向您推荐[“如何在 Java 中停止线程？”](https://stackoverflow.com/questions/1611862/how-to-stop-threads-in-java) 接受的答案倾向于共享某种“停止标志”而不是直接调用`interrupt`线程。

在您的场景中，这将在长时间运行的过程中发挥作用，同时定期检查停止标志（一个简单的`boolean`）。当用户单击“取消”时，您只需将标志翻转为`true`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:30:40.400

你可以试试

1.  创建一个线程来做上面提到的Sean的长操作（这是一个独立的线程，不是ZK请求线程）

2.  创建一个计时器以定期检查该线程的状态。（这将创建一个 javascript 计时器以在客户端定期发送 ajax 请求）

3.  并通过 ZK 客户端编程自定义忙掩码，添加取消按钮。（按钮单击执行另一个 ajax 请求）

    请参考 stackoverflow 上的类似文章： [Override “Processing” in ZK](https://stackoverflow.com/questions/12153847/override-processing-in-zk)

编辑：

在我的博客中有一些相关的文章：

[ZK：为 showBusy 自定义掩码](http://ben-bai.blogspot.tw/2012/04/zk-customize-mask-for-showbusy.html)

[ZK：在忙掩码中添加中止按钮](http://ben-bai.blogspot.tw/2012/09/zk-adding-abort-button-to-busy-mask.html)

[ZK：手动屏蔽页面](http://ben-bai.blogspot.tw/2012/07/introduction-sometimes-we-may-need-to.html)

# google-maps-api-3 - Ember.js：谷歌地图视图

> ID：14056044
> 
> 赞同：3
> 
> 时间：2012-12-27T14:13:48.203
> 
> 标签：google-maps-api-3, ember.js

我正在尝试为谷歌地图创建一个视图，并根据我找到的一些示例实际让它工作。

问题是地图仅在页面第一次显示时正确绘制，如果路线改变然后再次绘制地图，它看起来“扭曲”。

我发现的示例是应用程序的“一页”部分。

看法：

```
App.LocationView = Ember.View.extend({
    templateName: 'location',
    MapView: Ember.View.extend({
        map: null,
        latitudeBinding: 'controller.content.geometry.lat',
        longitudeBinding: 'controller.content.geometry.lng',
        didInsertElement: function() {
            var mapOptions = {
                center: new google.maps.LatLng(0, 0),
                zoom: 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: false
            };
            var map = new google.maps.Map(this.$().get(0),mapOptions);
            this.set('map',map); //save for future updations
            this.$().css({ width: "550px", height: "400px" });
        },
        reRenderMap : function(){
            var newLoc = new google.maps.LatLng(this.get('latitude'), this.get('longitude'));
        this.get('map').setCenter(newLoc);
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(this.get('latitude'), this.get('longitude')),
                map: this.get('map')
            });
        }.observes('latitude','longitude')
    })
}); 
```

我`{{view view.MapView}}`在我的“位置”模板中显示带有 div#map-holder 的地图。

我还将这个 CSS 应用到 div 以“修复”Bootstrap 与地图控件混淆：

```
#map-holder img {
    max-width: none;
} 
```

我怎样才能解决这个问题 ？

编辑：jsfiddle - [http://jsfiddle.net/bsphere/jYfg3/](http://jsfiddle.net/bsphere/jYfg3/) 转到“设置”，然后返回“地图”查看扭曲的地图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T09:00:37.803

似乎这与 Ember 不完全相关，但与地图重绘和调整大小有关。用你的小提琴，如果你调整浏览器窗口的大小，你可以看到地图正确显示。当我看到它时，我尝试将它放在`this.$().css({ width: "550px", height: "400px" });`地图的构造之前，它似乎可以工作。

# backbone.js - 获取后骨干模型没有属性

> ID：14056045
> 
> 赞同：0
> 
> 时间：2012-12-27T14:13:53.037
> 
> 标签：backbone.js

因此，在获取模型并尝试将其渲染到下面此视图中的模板后，我遇到了问题。我四处搜索，发现我必须做一个`_.bindAll`等，但它仍然不起作用。在我试图获取用户名的第一个 console.log 中，它返回未定义。我尝试将`this.render()`（由于 fetch 的异步性质）放入成功回调中，但没有奏效。当我检查`console.log(data)`产量时，我确实看到了我想要的值，但似乎没有任何东西被传递给模板。

```
 define([
  'jquery',
  'underscore',
  'backbone',
  'models/UserModel',
  'text!/assets/templates/dashboard.html'
  ], function($, _, Backbone, UserModel, dashboardTemplate) {

    window.DashboardView = Backbone.View.extend({

    el: $(".content"),

    initialize: function() {
      _.bindAll(this, 'render');

      this.user = new UserModel();
      this.user.fetch({
        success: console.log(this.user.get("name")),
        error: function(model, response) {
          console.log("error fetching model");
          console.log(model);
          console.log(response);
        }
      });
    },

    render: function() {

      console.log(this);
      var data = {
        user: this.user,
        _: _
      };
      console.log(data);

      var compiledTemplate = _.template(dashboardTemplate, data);
      $(this.el).html(compiledTemplate);
    }
  });

  return DashboardView;

}); 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:37:11.413

您的第一个问题是您`console.log`立即运行，而不是成功。

```
this.user.fetch({
    success: console.log(this.user.get("name")),
    // ... 
```

表示您正在调用`log`，然后将其返回值作为`success`回调传递。您需要传递一个匿名函数。

```
var view = this;
this.user.fetch({
    success: function(){
        console.log(view.user.get("name")),
        view.render();
    },
    // ... 
```

其次，当您渲染模板时，您需要将模型的属性传递给它，但目前您正在传递模型本身。为此，您可以使用`toJSON`将模型转换为标准对象。

```
var data = {
    user: this.user.toJSON(),
    // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:34:17.577

您可能想检查`this`成功回调中的值是什么，我怀疑它是否`View`如您所愿，这就是您得到未定义的原因。在您的模板中，您可以调用`console.log`额外的调试。

我在您的代码中看到的主要问题是`_.template()`返回的函数不是静态内容。因此你应该打电话给`$(this.el).html(compiledTemplate());`.

传入`data`compiledTemplate 设置将嵌入数据并使您的模板静态化。您通常应该只将您的模板代码传递给`_.template`然后使用当前数据调用已编译的函数：`compiledTemplate(this.user.toJSON());`

# php - 此应用程序已禁用向其他用户发布动态消息

> ID：14056046
> 
> 赞同：7
> 
> 时间：2012-12-27T14:13:55.593
> 
> 标签：php, facebook, sdk, oauth

在我的朋友墙上发帖时，我收到了这个错误：

> 此应用程序禁用向其他用户发布动态消息。

我是否需要在 Facebook 提交申请，还是我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T14:16:31.230

此功能正在被删除。

[https://developers.facebook.com/roadmap/#february-2013](https://developers.facebook.com/roadmap/#february-2013)

> **移除通过 Graph API 向朋友墙发帖的功能**
> 
> 我们将删除通过 Graph API 向用户朋友的墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅[此博客文章](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)。

# octave - MacPorts 无法使用

> ID：14056051
> 
> 赞同：1
> 
> 时间：2012-12-27T14:14:16.387
> 
> 标签：octave, macports

我最近按照 MacPorts 网站上的说明安装了 MacPorts。整个过程都很顺利。我的主目录中的 .profile 文件已更新（在此文件中，路径“/opt/local/bin”和“/opt/local/sbin”被添加到环境变量 PATH 中）并且所有 macports 文件都在目录“/选择”。当我在 shell 中键入“哪个端口”时，它会返回“/opt/local/bin/port”。

但是当我要求安装端口“octave-devel”时发生了一些奇怪的事情（我首先安装了 MacPorts 以在我的 Mac 上使用 Octave）。因此，当我在终端中输入命令“sudo port install octave-devel +atlas+docs”（如[GNU Octave wiki](http://wiki.octave.org/Octave_for_MacOS_X)中所述）并输入我的密码时，shell 会回复“错误：未找到端口 octave-devel”。然而，端口“octave-devel”似乎存在，因为我在macports 网站的[这个页面上找到了它的描述。](https://trac.macports.org/browser/trunk/dports/math/octave-devel/Portfile)

因为我必须快速使用 Octave，所以我首先想卸载 MacPorts 并安装 Fink，我尝试了 MacPorts 网站上描述的方法，但在我输入“sudo port -fp uninstall installed”后它返回“错误：没有端口与给定的表达式匹配”。我什至无法卸载这个软件！我真的认为这是 MacPorts 本身的问题，而不是八度端口的问题，但我找不到确切的问题。

最终我在 Windows 计算机上使用了 Octave，但不知道我的计算机上的 MacPorts 出了什么问题让我很恼火。主要是，我希望能够在我的 Mac 上使用 GNU Octave，因为我在学校需要它。

提前谢谢你，节日快乐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-03T18:01:02.640

我不确定您正在运行哪个版本的 OSX，但是，我在运行 OSX 10.9.1 的机器上通过 macports 安装了 octave（不是 octave-devel）版本 3.6.4。这是使用以下内容构建的：

sudo 端口安装八度

这会产生一个已知的错误，该错误会构建由于缺少 fortran 编译器而导致的 atlas 依赖项。此时，您有两个选择。在尝试安装 octave 之前，首先尝试单独安装 atlas，或者使用 gcc4x 标志覆盖标准 clang 编译器，或者使用以下命令安装 atlas：

sudo 端口安装 atlas +nofortran

使用clang运行良好。安装 atlas 后，octave 应该构建完成，尽管您可能会发现有关 Apple 使用 arpack 作为矢量库的错误。首选使用 +arpack，因此在开始 octave 安装之前手动加载它可能会很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-05T23:30:37.697

尝试使用 MacPorts 安装 Octave 我遇到了类似的问题。

**概括**

我的解决方案是首先使用 gcc47 而不是默认的 mpclang34 分别清理和构建图集。然后构建默认的八度。

**细节**

这是在运行旧操作系统 (10.7.5) 的 MacBook 上，标准 Octave (3.8.2) 包无法构建 - 它挂在构建 atlas 依赖项上。

解决方案：

```
sudo port clean atlas
sudo port -v install atlas +gcc48
sudo port -v install octave +atlas+docs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T15:46:27.610

我还遇到了在 OSX 10.10.1 上使用 Macports 安装 Octave 的问题并解决了这些问题，类似于@Tom_N_PDX 和@isak。

### 精简版

我使用@isak 描述的选项之一让它工作。

### 更详细的版本

`sudo port install octave`由于缺少 Fortran 编译器问题，运行失败。

接下来我使用 Macports 安装了 Fortran `sudo port install gcc48`，然后尝试重新安装 Octave

```
sudo port clean octave    
sudo port install octave 
```

正如其他人所提到的，这个“挂”在阿特拉斯上，虽然我现在意识到它只需要很长时间，我在它完成之前就把它杀死了。可能它会起作用，因为输出表明它找到了 Fortran

> 选择的 C 编译器：/usr/bin/clang
> 
> 选择的 F77 编译器：gfortran48

`+gcc48`然后我按照@isak 的建议使用标志单独安装了地图集

```
sudo port install atlas +gcc48 
```

但它显示了与上面相同的编译器信息（与我的猜想一致，即上面会起作用）。这个过程大约需要4个小时。您可以在日志文件（使用命令找到）中监控任务的进度`sudo port logfile atlas`，这可以让您放心，它正在做某事而不是“挂起”。（奇怪的是，输出确实在消息中间停止，但它最终总是恢复。还有很多警告消息。）

最后，运行以下工作：

```
sudo port clean octave
sudo port install +arpack 
```

实际上，我首先尝试不使用该`+arpack`选项并且它有效，但我收到以下消息，与@isak 的回答一致

> 警告：依赖 'arpack' 是使用 +accelerate 变体安装的，使用 Apple 的矢量库，如果在 arpack 中使用某些函数，可能会导致 Octave 崩溃的一些已知错误。+atlas 变体在 Octave 上没有这些问题，但即使在现代硬件上编译也需要很多小时。

当我用`+arpack`flag 重新安装 Octave 时，不到一分钟（因为我已经安装了 Atlas）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T11:02:45.950

我目前正在通过 MacPorts 安装 Octave。我使用了在 Shifteleven.com 上找到的以下命令：

```
sudo port install octave-devel +gcc45 
```

到目前为止，它似乎正在工作。您还需要确保已安装 Xcode 命令行工具，这是我第一次尝试时忘记做的事情。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-11-26T13:32:12.577

我对 MacPorts 也有类似的问题。我建议改用 HomeBrew。以下是在 HomeBrew 上安装 Octave 的命令：

```
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

brew update

brew upgrade

brew install octave 
```

# html - Internet Explorer 中的 100% 高度问题

> ID：14056054
> 
> 赞同：1
> 
> 时间：2012-12-27T14:14:25.420
> 
> 标签：html, css, internet-explorer

我有一个应用程序，其中我的布局是动态的。它可以像一张桌子（1X1、2X2 或 3X3）。在 Firefox 和 Chrome 中，我的 div ViewPortContent 以正确的方式调整大小。但在 IE 中什么也没有发生。ViewPortContent 没有调整大小，以便像 Firefox 或 Chrome 一样填充剩余的内容。100% 高度属性不能正常工作？你能帮我吗？

下面是我的 JsFiddle（在 IE 和 Mozilla 中尝试）

```
.dhDivTable{
height:500px;
width:100%;
background:black;
display: table;
table-layout:fixed;
}
.dhDivRow {
display: table-row;
}
.dhViewPortWrapper {
display: table-cell;
padding: 3px;  }

.dhViewPortContent{
 border: solid 1px violet;
 height:100%;
 width:100%;
 display: table;
 position:relative;
 color:white;
} 
```

[http://jsfiddle.net/qqTtQ/1/](http://jsfiddle.net/qqTtQ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:47:11.800

Palash 在一般情况下是正确的，但您的情况稍微复杂一些。您需要在`.dhViewPortWrapper`类中添加一个高度指令才能导出高度，但您设置的高度必须是分配给当前行的表格高度的比例。您将需要动态分配它。因此，如果您知道将有两行，您可以将`dhViewPortWrapper`div 定义为：

```
<div class="dhViewPortWrapper" style="height: 50%;"> 
```

如果您需要行具有动态高度，则需要弄清楚如何计算高度并应用它们。

# ios - UINavigationController 疯了吗？

> ID：14056055
> 
> 赞同：0
> 
> 时间：2012-12-27T14:14:28.493
> 
> 标签：ios

我有两个我不明白的问题，希望有人能提供帮助。

此代码不适用于从拆分视图控制器获取我现有的 UINavigationController 层次结构并使用它接管屏幕。我只是得到一个黑屏

```
UINavigationController* myself = self.navigationController;
[myself removeFromParentViewController];

UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"QuestionnaireViewController"];
[myself pushViewController:controller animated:YES];

AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
app.window.rootViewController = myself; 
```

但是，此代码确实有效。为什么我可以将 rootViewController 设置为新的 UINavigationController 而不是 self.navigationController？

```
UINavigationController *navController = [[UINavigationController alloc] init];
UINavigationController* myself = self.navigationController;
[myself removeFromParentViewController];
navController.viewControllers = myself.viewControllers;

UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"QuestionnaireViewController"];
[navController pushViewController:controller animated:YES];

AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
app.window.rootViewController = navController; 
```

我的第二个问题是当用户“返回”时将导航控制器恢复到 splitViewController。我从经验中知道我可以将新的 UINavigationController 分配给 detailView，但我无法分配 self.navigationController。

我认为这些问题是同一个问题。由于某种原因，新的 UINavigationController 与 UIView 的 navigationController 不同。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:25:25.020

插手`UIWindow`不是很安全。

根据您要实现的目标，我可以想到 2 个相当简单的选项

a) iOS 5.1+ 有一个选项来显示/隐藏`RootViewController`你的拆分和滑动手势显示，并使用它

b）创建自己的`UIViewController`模拟`UISplitViewController`，并在需要时隐藏左侧部分

# ruby-on-rails - 为什么它不会检测到请求来自编辑页面？

> ID：14056056
> 
> 赞同：0
> 
> 时间：2012-12-27T14:14:33.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在编辑页面，如果我将验证码留空，然后按“保存按钮”，它会将我带到#new 页面并显示“验证码错误！”。事实上，它应该让我再次编辑页面。
为什么我的控制器不会检测到请求来自编辑页面？

**社区主题控制器.rb**

```
before_filter :simple_captcha_check, :only => [:update, :create] 

def simple_captcha_check
    if !simple_captcha_valid?
        flash[:error] = 'Wrong Captcha!'

        if request.put? # We came from an edit request
          @community_topic = CommunityTopic.find(params[:id])
          @community_topic.attributes = params[:community_topic]
          render :action => :edit
        elsif request.post? # We came from a new request
          @community_topic = CommunityTopic.new params[:community_topic]
          render :action => :new
        end

    end
end 
```

**_form.html.erb**

```
<%= form_for :community_topic, url: community_topic_index_url, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :title, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :body, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :body, :class => 'text_area' %>
    </div>
  </div>

  <div class="control-group">
      <div class="controls">
  <%= show_simple_captcha(:label => "human authentication") %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                community_topic_index_path, :class => 'btn' %>
  </div>
<% end %> 
```

更新：

**路线.rb**

```
resources :communities, :path => "shop", do
    resources :community_topics, :path => "topic", :as => :'topic'
end 
```

新更新：

**耙路线 | grep community_topic**

```
 community_topic_index GET    /shop/:community_id/topic(.:format)          community_topics#index
                                 POST   /shop/:community_id/topic(.:format)          community_topics#create
             new_community_topic GET    /shop/:community_id/topic/new(.:format)      community_topics#new
            edit_community_topic GET    /shop/:community_id/topic/:id/edit(.:format) community_topics#edit
                 community_topic GET    /shop/:community_id/topic/:id(.:format)      community_topics#show
                                 PUT    /shop/:community_id/topic/:id(.:format)      community_topics#update
                                 DELETE /shop/:community_id/topic/:id(.:format)      community_topics#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:09:45.770

@MKK`<%= form_for :community_topic, url: community_topic_url(@community_topic), :html => { :class => 'form-horizontal' } do |f| %>`但在您的 rake 路线中检查它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:19:01.493

因为请求方法是post而不是put。要使用 put 请求，您应该编写：

```
<%= form_for @community_topic, url: community_topics_url, 
```

# cuda - 具有浮点坐标的 CUDA 纹理内存

> ID：14056065
> 
> 赞同：1
> 
> 时间：2012-12-27T14:15:09.507
> 
> 标签：cuda, textures, linear-interpolation

对于非整数坐标，是否可以为纹理内存分配值？

即假设我们有一个一维纹理内存数组。我知道我们可以在整数坐标处分配数组元素。然后我们可以使用线性插值读取分数坐标的值。

我的问题是：CUDA 是否允许程序员将值写入小数坐标？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T18:46:31.620

无法写入分数坐标。硬件将无处存储新值。即使您可以使用线性插值读取，执行插值的值也只能存储在内存中的整数位置。

实现这一点的一种方法可能是编写一个内核，该内核读取您的初始值数组并创建具有插值的更高分辨率数组。然后，您将新值写入这个新数组中与您实际要写入的位置最接近的整数位置。

# jquery - how change options from lightbox?

> ID：14056072
> 
> 赞同：0
> 
> 时间：2012-12-27T14:15:42.523
> 
> 标签：jquery, lightbox, lightbox2

I'm using lightbox2\. i went through the example and it works fine. furthermore, a gallery! But when I change some options for lightbox2, for example, `labelImage` , the option more easy is change code from ligthbox2.js.

I try change options as follow:

```
$.LightboxOptions.labelImage="My image"; 
```

But this does not work.

What should be the right way to set the option?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:27:34.827

The [`lightbox`](https://github.com/lokesh/lightbox2/blob/v2.5-ie8fixed/js/lightbox.js#L336) instance is not accessible from the global scope and it [automatically initiates after all DOM elements completes loading](https://github.com/lokesh/lightbox2/blob/v2.5-ie8fixed/js/lightbox.js#L333-L337).

```
$(function() {
  var lightbox, options;
  options = new LightboxOptions;
  return lightbox = new Lightbox(options);
}); 
```

You can't modify the options without modifying the **lightbox2** script.

# objective-c - 尝试添加为子视图时，ScrollView 不起作用

> ID：14056073
> 
> 赞同：1
> 
> 时间：2012-12-27T14:15:46.783
> 
> 标签：objective-c, scrollview, addsubview

我的滚动视图有问题！我有一个名为 Rootview 的视图，我想将三个子视图添加到滚动视图中。当我将滚动视图添加为子视图时，中间视图和三个子视图消失了。这是我的代码.. Rootview（整个窗口）和滚动视图是出口。

```
UIView *middleView = [[UIView alloc] initWithFrame:CGRectMake(0, 218, 2024, 218)];
[middleView setBackgroundColor: [UIColor yellowColor]];
[RootView addSubview:middleView];

//create new views for sap systems beginning from left

UIView *firstSystem1 = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 218)];
[firstSystem1 setBackgroundColor: [UIColor grayColor]];
[middleView addSubview:firstSystem1];

UIView *secondSystem1 = [[UIView alloc] initWithFrame:CGRectMake(305, 0, 300, 218)];
[secondSystem1 setBackgroundColor: [UIColor grayColor]];
[middleView addSubview:secondSystem1];

UIView *thirdSystem1 = [[UIView alloc] initWithFrame:CGRectMake(610, 0, 300, 218)];
[thirdSystem1 setBackgroundColor: [UIColor grayColor]];
[middleView addSubview:thirdSystem1];

CGSize scrollViewContentSize1 = CGSizeMake(2024, 218);

 [middleScrollView setContentSize:scrollViewContentSize1];
[middleScrollView addSubview:middleView]; 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:20:02.617

问题是你没有在`middleScrollView`任何地方添加你的

改变这个

```
[RootView addSubview:middleView]; 
```

为了这

```
[RootView addSubview:middleScrollView]; 
```

# android - Facebook feedDailog 无法与 Asynctask 一起使用

> ID：14056074
> 
> 赞同：0
> 
> 时间：2012-12-27T14:16:03.033
> 
> 标签：android, facebook, android-asynctask

在我的 android 应用程序中，我打开了 facebook 提要对话框，因为加载需要时间，所以我尝试在提要对话框开始之前实现一个进度对话框，在 oncreate() 中我打开了进度对话框，但它在这里不起作用对话框正在打开但没有进度对话框，然后我尝试放入 AsyncTask ，现在我可以看到 progressDialog 但 fb feeddialog 没有显示..下面是我的代码

```
public class ShareOnFacebook extends Activity {
    private String TAG = ShareOnFacebook.class.getSimpleName();
    private static final String APP_ID = "130985523722347";
    private static final String[] PERMISSIONS = new String[] { "publish_stream" };

    private static final String TOKEN = "access_token";
    private static final String EXPIRES = "expires_in";
    private static final String KEY = "facebook-credentials";

     private ProgressDialog pd = null;
     private Object data = null;

    private Facebook facebook;
    private String messageToPost;
    private ProgressDialog dialogFBMessage;
    public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY,
                Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    }

    public boolean restoreCredentials(Facebook facebook) {
        SharedPreferences sharedPreferences = getApplicationContext()
                .getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();
    }

    @TargetApi(9)
    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

         //this.pd = ProgressDialog.show(this, "Working..", "Downloading Data...", true, false);

        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                    .permitAll().build();
            StrictMode.setThreadPolicy(policy);
        }
        dialogFBMessage = new ProgressDialog(this);
        dialogFBMessage.setCanceledOnTouchOutside(false);
        dialogFBMessage.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialogFBMessage.setMessage("Please Wait.............. ");
        dialogFBMessage.show();
        Log.d(TAG, "FBMessage Loading Step 01");
        facebook = new Facebook(APP_ID);
        restoreCredentials(facebook);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        // setContentView(R.layout.facebookdialog);
        //Looper.prepare();
        //new MyFetchTask().execute();
        //Looper.loop(); 

    String facebookMessage = getIntent().getStringExtra("facebookMessage");
    if (facebookMessage == null) {
        facebookMessage = "Post From My Neighborhood "
                + new java.util.Date().getTime();
    }
    messageToPost = facebookMessage;
    if (!facebook.isSessionValid()) {
        loginAndPostToWall();
    } else {
        try {
            postToWall(messageToPost);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }}
    public void loginAndPostToWall() {
        facebook.authorize(ShareOnFacebook.this, PERMISSIONS,
                Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
    }

    /* public class MyFetchTask extends AsyncTask<Object, Object, Object>
    {

        @Override
        protected Object doInBackground(Object... params) {
            // TODO Auto-generated method stub

            String facebookMessage = getIntent().getStringExtra("facebookMessage");
            if (facebookMessage == null) {
                facebookMessage = "Post From My Neighborhood "
                        + new java.util.Date().getTime();
            }
            messageToPost = facebookMessage;
            if (!facebook.isSessionValid()) {
                loginAndPostToWall();
            } else {
                try {
                    postToWall(messageToPost);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

            return null;
        }

        @Override
        protected void onPostExecute(Object result) {

            ShareOnFacebook.this.data = result;

            if (ShareOnFacebook.this.pd != null) {
                ShareOnFacebook.this.pd.dismiss();

        }

    }

    }
*/

     public void postToWall(String message) {

         final Dialog dialog = new Dialog(this, R.style.FullHeightDialog);
        dialog.setContentView(R.layout.customdialog);
        String fbUser = "";
        String neighbourhood = "";
        final Bundle parameters = new Bundle();
        try {

            JSONObject me = new JSONObject(facebook.request("me"));     
            String id = me.getString("id");
            // String namespace=me.getString("namespace");
            // Log.d(TAG, "FB namespace----->"+namespace);
            ImageView picture;
            ImageView map;
            TextView properties;
            TextView details;
            String lang = Constants.searchLocation.getLongitude() + "";
            String lat = Constants.searchLocation.getLatitude() + "";
            String url = Constants.fbindexURL + "lang=" + lang + "&lat=" + lat
                    + "&userid=" + fbUser;
            String mapKey = Constants.API_KEY;
            neighbourhood = Constants.loadedNeighborhood.getName();

            details = (TextView) dialog.findViewById(R.id.textView1);
            details.setText(parameters.getString("properties"));

            fbUser = me.getString("name");
            picture = (ImageView) dialog.findViewById(R.id.imageView1);
            properties = (TextView) dialog.findViewById(R.id.textView2);
            URL image_value = new URL("http://graph.facebook.com/" + id + "/picture");
            Bitmap profPic = BitmapFactory.decodeStream(image_value.openConnection().getInputStream());
            picture.setImageBitmap(profPic);
            properties.setText(getString(R.string.app_name));
            map = (ImageView) dialog.findViewById(R.id.imageView5);
            URL image_map = new URL("http://maps.googleapis.com/maps/api/staticmap?markers=" + lat + "%2C" + lang + "&zoom=12&size=300x300&key=" + mapKey + "&sensor=false&callback=myCallback&param=myParam");
            Bitmap mapimg = BitmapFactory.decodeStream(image_map.openConnection().getInputStream());
            map.setImageBitmap(mapimg);

            TextView via = (TextView) dialog.findViewById(R.id.textView3);
            via.setText("Via");

            Log.d(TAG, "FB User----->" + fbUser);
        } catch (Exception e) {
            Log.e(TAG, "FB User----->", e);

        }

        String lang = Constants.searchLocation.getLongitude() + "";
        String lat = Constants.searchLocation.getLatitude() + "";
        String url = Constants.fbindexURL + "lang=" + lang + "&lat=" + lat
                + "&userid=" + fbUser;
        String mapKey = Constants.API_KEY;// getResources().getString(R.string.apikey)
        String mapUrl = "http://maps.googleapis.com/maps/api/staticmap?markers="+ lat+ "%2C"+ lang+ "&zoom=12&size=300x300&key="+ mapKey+ "&sensor=false&callback=myCallback&param=myParam";
        Log.e(TAG, "url----->" + url);
        Log.e(TAG, "mapUrl" + mapUrl);

        neighbourhood = Constants.loadedNeighborhood.getName();

        parameters.putString("name", neighbourhood);
        parameters.putString("caption", "my neighborhood");
        parameters.putString("description", "click on below link..");
        parameters.putString("link", mapUrl);
        parameters.putString("properties", "{\" \": {\"text\":\"Reply / Recommend\", \"href\": \"" + url + "\"}}");
        try {

            final EditText edittext = (EditText) dialog.findViewById(R.id.fbedittext);

            Button dialogButton = (Button) dialog.findViewById(R.id.fbshare);
            Button dialogcancelButton = (Button) dialog.findViewById(R.id.fbcancel);

            dialogcancelButton.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    dialog.dismiss();

                    finish();
                }

            });
            dialogButton.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    String messageText = edittext.getText().toString();
                    if (messageText != null) {

                        parameters.putString("message", messageText);
                        try {
                            facebook.request("me");
                            String response = facebook.request("me/feed",
                                    parameters, "POST");
                            Log.d("Tests", "got response: " + response);
                            if (response == null || response.equals("")
                                    || response.equals("false")) {
                                showToast("Blank response.");
                            } else {
                                showToast("Message posted to your facebook wall!");
                            }
                            finish();
                        } catch (Exception e) {
                            showToast("Failed to post to wall!");
                        }

                    }
                }

            });

            try {
                dialog.show();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            dialogFBMessage.dismiss();
            Log.d(TAG, "FBMessage Loading Step 02");
        } catch (Exception e) {
            showToast("Failed to post to wall!");
            e.printStackTrace();
            finish();
        }
    } 

    class LoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
            saveCredentials(facebook);
            if (messageToPost != null) {

                postToWall(messageToPost);

            }
        } 
```

我很震惊，不知道哪里出错了……低于错误日志

```
 FATAL EXCEPTION: main
12-27 18:52:38.235: E/AndroidRuntime(6693): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.appright.myapp/org.apps.myapp.activity.ShareOnFacebook}: java.lang.RuntimeException: Only one Looper may be created per thread
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.os.Looper.loop(Looper.java:137)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.app.ActivityThread.main(ActivityThread.java:4898)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at java.lang.reflect.Method.invoke(Method.java:511)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at dalvik.system.NativeStart.main(Native Method)
12-27 18:52:38.235: E/AndroidRuntime(6693): Caused by: java.lang.RuntimeException: Only one Looper may be created per thread
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.os.Looper.prepare(Looper.java:78)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at android.os.Looper.prepare(Looper.java:73)
12-27 18:52:38.235: E/AndroidRuntime(6693):     at org.appright.myapp.activity.ShareOnFacebook.onCreate(ShareOnFacebook.java:96) 
```

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:47:25.593

如果您正确实施，Facebook 提要对话框在加载弹出对话框时已经有自己的加载/进度微调器。

我的应用程序使用提要对话框，它已经有自己的进度对话框。尝试下载[我们的示例应用程序](https://github.com/facebook/facebook-android-sdk/tree/master/samples/Hackbook)，并验证您在点击更新状态时是否看到进度对话框。

# parallel-processing - 是否有并行的洪水填充实现？

> ID：14056075
> 
> 赞同：6
> 
> 时间：2012-12-27T14:16:06.830
> 
> 标签：parallel-processing, flood-fill

我可以使用 openMP 和 MPI，并且想知道是否有人遇到过任何洪水填充算法的并行版本（最好在 c 中）。如果没有，我会对如何并行化它的草图感兴趣 - 考虑到它基于递归，它甚至可能吗？

如果您需要刷新关于洪水填充的记忆，维基百科有一篇非常好的[文章。](http://en.wikipedia.org/wiki/Flood_fill)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-15T01:31:04.787

洪水填充没有“固有”递归，只是为了做一些工作，你需要一些关于先前发现的“边界”单元的信息。如果您这样想，很明显并行性是非常可能的：即使使用单个队列，您也可以使用四个线程（每个方向一个），并且仅在每个线程检查单元格时才移动队列的尾部线。或者等效地，四个队列。以这种方式思考，人们甚至可以想象将空间划分为多个队列——也许是按坐标范围划分的。

一个基本问题是问题定义通常包含一个条件，即永远不会重新访问任何单元格。这意味着每个工作人员都需要一个最新的地图，其中包含已考虑的单元格（全局）。可变的全局信息在性能方面是有问题的，尽管不难想办法限制在全球范围内传播更新的必要性......

# sql - PL/SQL：ORA-00905：缺少关键字

> ID：14056076
> 
> 赞同：-1
> 
> 时间：2012-12-27T14:16:09.903
> 
> 标签：sql, database, triggers, oracle10g

```
create or replace TRIGGER TRG_DecreaseQuantity   
AFTER INSERT   
ON V_SALE FOR EACH ROW   
BEGIN     
  UPDATE VEHICLE    
     SET V.V_QUANTITY=(SELECT CASE    
                              WHEN V.V_QUANTITY >= S.QUANTITY AND
                                   V.VEHICLE_ID = S.VEHICLE_ID_FK 
                              THEN V.V_QUANTITY = V.V_QUANTITY-S.QUANTITY    
                              WHEN V.V_QUANTITY < S.QUANTITY 
                              THEN V.V_QUANTITY = S.QUANTITY   
                         FROM VEHICLE V,
                              V_SALE S    
                        WHERE V.VEHICLE_ID=S.VEHICLE_ID_FK
                       )   
   WHERE V.VEHICLE_ID = :NEW.VEHICLE_ID_FK;  
END; 
```

我们有一个`autoGallery`数据库，其中有表。有两个表`V_SALE`必须`VEHICLE`控制。当我出售车辆时，我想控制车辆的数量，然后减少或不减少数量。

```
Vehicle(
   Vehicle_ID Primary key, 
   V_QUANTITY 
   ...
)

V_SALE(
  VEHICLE_ID_FK FOREIGN KEY, 
  QUANTITY 
  ...
) 
```

我收到以下错误：

```
Compilation failed, line 5 (16:03:48) The line numbers associated with compilation errors are relative to the first BEGIN statement. This only affects the compilation of database triggers.
PL/SQL: ORA-00905: missing keyword
Compilation failed, line 2 (16:03:48) The line numbers associated with compilation errors are relative to the first BEGIN statement. This only affects the compilation of database triggers.
PL/SQL: SQL Statement ignored 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:51:08.273

尝试像这样给出别名：

```
UPDATE VEHICLE V    
     SET V.V_QUANTITY=CASE WHEN V.V_QUANTITY >= :NEW.QUANTITY 
                                  THEN V.V_QUANTITY-:NEW.QUANTITY    
                                  WHEN V.V_QUANTITY < :NEW.QUANTITY 
                                  THEN :NEW.QUANTITY   
                              END
   WHERE V.VEHICLE_ID = :NEW.VEHICLE_ID_FK; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:20:14.667

正确的 CASE 语句必须以 END 结尾。在 THEN 子句中不能有等号，既不能作为比较也不能作为赋值。

```
CASE 
    WHEN V.V_QUANTITY >= S.QUANTITY AND V.VEHICLE_ID = S.VEHICLE_ID_FK 
        THEN V.V_QUANTITY - S.QUANTITY 
    WHEN V.V_QUANTITY < S.QUANTITY 
        THEN S.QUANTITY
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:57:12.603

你不应该只需要这个吗？

```
UPDATE VEHICLE V   
     SET V.V_QUANTITY=CASE WHEN V.V_QUANTITY >= :NEW.QUANTITY 
                                  THEN V.V_QUANTITY-:NEW.QUANTITY    
                                  WHEN V.V_QUANTITY < :NEW.QUANTITY 
                                  THEN :NEW.QUANTITY   
                              END
   WHERE V.VEHICLE_ID = :NEW.VEHICLE_ID_FK; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:23:50.250

```
create or replace TRIGGER "TRG_DecreaseQuantity"
AFTER INSERT
ON V_SALE FOR EACH ROW
BEGIN     
     UPDATE VEHICLE V    
     SET V.V_QUANTITY=CASE WHEN V.V_QUANTITY >= :NEW.QUANTITY 
                                  THEN V.V_QUANTITY-:NEW.QUANTITY    
                                  WHEN V.V_QUANTITY < :NEW.QUANTITY 
                                  THEN V.V_QUANTITY   
                              END
   WHERE V.VEHICLE_ID = :NEW.VEHICLE_ID_FK;
END; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T14:21:15.900

试试这个，`'CASE WHEN...END'`语法错误

```
create or replace TRIGGER TRG_DecreaseQuantity   
AFTER INSERT   
ON V_SALE FOR EACH ROW   
BEGIN     
      UPDATE VEHICLE    
      SET V.V_QUANTITY=(SELECT    
      CASE    
      WHEN V.V_QUANTITY >=S.QUANTITY AND V.VEHICLE_ID=S.VEHICLE_ID_FK THEN V.V_QUANTITY-S.QUANTITY    
      WHEN V.V_QUANTITY<S.QUANTITY THEN S.QUANTITY END  
      FROM VEHICLE V,V_SALE S    
      WHERE V.VEHICLE_ID=S.VEHICLE_ID_FK)   
      WHERE V.VEHICLE_ID=:NEW.VEHICLE_ID_FK;  
      END; 
```

正如您要求的 IF ELSE 示例，我正在添加此示例示例并根据您的需要应用，

```
CREATE OR REPLACE TRIGGER  "TRG_PAYMONEY" 
AFTER INSERT
ON PAYMENTDEVICE FOR EACH ROW
BEGIN
IF :NEW.MEALTYPE='GUEST' THEN
UPDATE CARD
SET CREDIT = CREDIT - 5
WHERE CARDID = :NEW.CHARGEDCARDID;
ELSE
UPDATE CARD
SET CREDIT = CREDIT - CHARGE
WHERE CARDID = :NEW.CHARGEDCARDID;
END IF;
END; 
```

# java - Java - 重构类似方法的代码

> ID：14056079
> 
> 赞同：1
> 
> 时间：2012-12-27T14:16:45.060
> 
> 标签：java, exception-handling, refactoring, salesforce

我有以下问题：

我有一些方法基本上用于从 Salesforce 获取一些东西。

这是一个例子：

```
 public Map<String, Customer> findSomethingByIds(String[] somethingIds) throws... {
     return binding.findSomethingByIds(somethingIds);
 } 
```

由于多种原因，我需要在极少数情况下重试执行此方法（fe session expires 等），所以我使用[了这个](http://fahdshariff.blogspot.com/2009/08/retrying-operations-in-java.html).

所以现在我有这样的事情：

```
 public Map<String, Something> findSomethingByIds(final String[] somethingIds) throws ... {       
    Map<String, Something> myList = null;                
    Callable<Map<String, Something>> task = new Callable<Map<String, Something>>() {
        @Override
        public Map<String, Something> call() throws Exception {
            return binding.findSomethingByIds(somethingIds);
        }
    };

    RetriableTask<Map<String, Something>> r = new RetriableTask<>(2, 1000, task);
    try {
        myList = r.call();
    } catch (Exception e) {
        // Ex. handling
    }
    return myList;
} 
```

现在，我的代码中有很多这样的方法，所以如果我想使用 RetriableTask 接口，我必须在这些方法中添加很多代码，类似于上面的那个，我想不惜一切代价避免。所有这些方法几乎都返回不同的东西，所以我不能在这里使用工厂（或者我不知道如何使用）。有谁知道任何解决方案？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:20:15.837

如果您有一个方法做类似的事情，唯一的区别是返回类型，请尝试使用[泛型](http://docs.oracle.com/javase/tutorial/java/generics/types.html)：

```
public Map<String, T> findSomethingByIds(final String[] somethingIds) throws ... {       

} 
```

这将允许您对不同的对象类型执行等效处理，而无需到处复制和粘贴代码。

回应评论，如果它们采用不同的参数类型，您仍然可以在参数中使用泛型。如果您的意思是它们具有不同*数量*的参数（即具有完全不同的签名），那么您可以创建包装器方法来执行该对象类型独有的处理，然后您可以将控制权传递给通用方法对所有对象类型通用的处理。

# visual-studio - 如何使用 Visual Studio 2012 的 NUnit 测试适配器运行 SharePoint 测试？

> ID：14056080
> 
> 赞同：2
> 
> 时间：2012-12-27T14:16:46.500
> 
> 标签：visual-studio, unit-testing, visual-studio-2012, nunit, test-explorer

VS 2012的[NUnit 测试适配器](http://nunit.org/index.php?p=vsTestAdapter&r=2.6.2)允许您通过测试资源管理器从 Visual Studio 2012 IDE 中运行 NUnit 测试。但是，我首先进行 NUnit 测试的原因是因为我有针对 SharePoint 2010 编写的测试（我知道，这些是集成测试，而不是单元测试），由于需要通过 64 访问 SharePoint API -bit 客户端意味着 MSTest/VS 无法运行它们。

我希望使用 NUnit 测试适配器，但是，我能够从 Visual Studio 的测试资源管理器中运行 SharePoint 测试，但我不断收到错误消息：

```
SetUp failed for test fixture xyz
SetUp : System.IO.FileNotFoundException : The Web application at http://sp could not be found. Verify that you have typed the URL correctly. If the URL should be serving existing content, the system administrator may need to add a new request URL mapping to the intended application. 
```

这向我表明 NUnit 测试适配器作为 32 位进程运行（我怀疑该进程是`vstest.executionengine.x86.clr20.exe`）。

有没有办法使用 Visual Studio 2012 中的 NUnit 测试适配器和测试资源管理器来运行针对 SharePoint 2010 的 NUnit 测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:11:54.943

要在 64 位进程中运行测试：

*   在 Visual Studio 2012 中，选择 TEST->Test Settings->Default Processor Architecture->x64 菜单项
*   使用 vstest.console.exe，指定 /Platform:x64 命令行选项。

您可能还对[SharePoint Emulators](http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/26/introducing-sharepoint-emulators.aspx)感兴趣，它允许您单独运行 SharePoint 集成测试。

# delphi - 在某些计算机上，Indy FTPES 客户端返回“SSL 在此服务器上不可用”

> ID：14056081
> 
> 赞同：1
> 
> 时间：2012-12-27T14:16:48.590
> 
> 标签：delphi, indy, ftps, ftpes

我有一个奇怪的问题。我正在使用 Indy 在我的应用程序中实现 FTPES 连接，并从我的应用程序连接到同一台服务器可以在某些计算机上运行，​​但不是在所有计算机上运行，​​返回“SSL 在此服务器上不可用”。

我正在使用来自[http://indy.fulgan.com/SSL/](http://indy.fulgan.com/SSL/) (openssl-1.0.1c-i386-win32.zip) 的 DLL。DLL 位于应用程序的目录中。它们被加载（我无法在应用程序运行时删除它们并且 WhichFailedToLoad() 为空）。

任何想法可能导致这种情况以及尝试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:55:59.863

错误消息意味着 SSL/TLS 握手失败，这可能由于多种原因而发生。尝试使用 IOHandler 的`OnStatusInfo/Ex`事件来获取更多信息。或者使用数据包嗅探器，例如 Wireshark，来分析实际的握手数据。

# javascript - 如何在 SVG “使用” DOM 树中添加事件？

> ID：14056084
> 
> 赞同：1
> 
> 时间：2012-12-27T14:16:57.790
> 
> 标签：javascript, events, svg, d3.js

我想要两个（几乎）相同的带有事件的内联 SVG 图形（我在使用 d3 创建期间添加）。第二个元素是在第一个元素完成后创建的（完全带有绑定和东西），如下所示：

```
d3.select("#part2")
        .append("svg")
        .append("use")
            .attr("xlink:href", "#myfirstelement"); 
```

基本上我认为这应该可以完成这项工作。但它不会以任何方式做出反应，要解决这个问题，我可能需要单独添加（和同步）它。有没有机会避免这种情况？

示例：http: [//jsfiddle.net/uCSE5/](http://jsfiddle.net/uCSE5/)

# php - 将日期数据转换为mysql日期格式

> ID：14056085
> 
> 赞同：2
> 
> 时间：2012-12-27T14:17:05.873
> 
> 标签：php, mysql, date

我想转换我有格式的数据

```
$dateToday = date("d-m-Y"); 
```

所以 $dateToday 的值是**27-12-2012**

然后我想用mysql数据类型将它保存到数据库中*date*。如何保持**27-12-2012**的值可以以**2012-12-27**格式存储在 mysql 数据库中？请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:26:20.477

是的，您可以使用`strtotime();`

```
$dateToday = date("d-m-Y");
$newDate = date("Y-m-d", strtotime($dateToday)); 
```

输出：**2012-12-27**

然后您可以将数据存储到您的数据库中。

当您必须恢复日期时，您可以像这样反转此操作：

```
$dateFromDatabase = "2012-12-27";
$reverseDate = date("d-m-Y", strtotime($dateFromDatabase)); 
```

输出：**27-12-2012**

（在第二次约会中将“Ymd”更正为“dmY”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:19:33.850

如果要以这种格式将数据存储在 MYSQL 表中，则需要将列声明为`varchar`.

因为`datetime` 存储日期的格式不同，例如`'yyyy-mm-dd hh:mm:ss'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:29:47.373

这是它的工作原理：

您必须以正确的 mysql 格式**存储**数据。它将允许您进行任何排序、聚合、过滤和计算日期。

但是当您需要**显示**`DATE_FORMAT()`数据时，您可以使用 mysql函数将其转换为您希望的任何格式：

```
SELECT DATE_FORMAT(dt,'%d-%m-%Y') as dtf FROM TABLE 
```

将为您提供`dtf`以您的自定义格式格式化的字段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:37:55.110

我会告诉你怎么做。为了解释我创建了一个名为它的表`testtable1`，它只包含一个名为 `col1`DATE 类型的列 表创建查询如下所示

```
CREATE TABLE `testtable1` (
    `col1` DATE NULL DEFAULT NULL
) 
```

以下查询将根据您的需要工作。在第一行中，我声明了一个字符串变量。在第二行中，我将该字符串转换为您需要的日期格式并插入到表中。

```
set @var1='27-12-2012';
insert into testtable1 values(STR_TO_DATE(@var1, '%d-%m-%Y')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T14:42:17.140

您还可以尝试使用 mysql 函数将字符串转换为日期，即 [STR_TO_TIME](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date) 。SQL查询可能是

```
INSERT INTO foo_table (foo_date)
VALUES (STR_TO_DATE('27-12-2012','%d,%m,%Y')) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-24T09:37:28.767

输出错误 这不能显示数据库中的日期。这显示 1970/01/01..... $date=Date($year."/".$month."/".$day); $date=Date("Ymd", strtotime($date)); 回声$日期；`enter code here`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-27T14:24:55.657

试试这个

```
$dateToday = date("d-m-Y");
$dateForMysql = date('Y-m-d', $dateToday)); 
```

# java - Android——如何以编程方式改变（不是第一次设置）LinearLayout的高度和topMargin？

> ID：14056086
> 
> 赞同：1
> 
> 时间：2012-12-27T14:17:10.727
> 
> 标签：java, android

**如果我第**一次设置 LL 的 topMargin ，它就可以了。

```
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(bar.getLayoutParams());
lp.height = MAX_HEIGHT * values.get(i)/MAX_VAL;
bar.setLayoutParams(lp); 
```

至于xml，基本上就是LL中的LL（bar）。**当我第二**次尝试调用此代码时，**视觉上**没有任何变化（LogCat 显示高度发生了变化）。我尝试使用**invalidate()**、**requestLayout()**、**forceLayout()**方法——没有任何反应。谷歌搜索没有帮助——人们似乎有不同的问题。请帮忙。

编辑：是的，它是在 UI 线程上调用的，因此 postInvalidate() 不起作用。

# java - 如何将 Jmeter 连接到 Java 类？

> ID：14056089
> 
> 赞同：3
> 
> 时间：2012-12-27T14:17:21.597
> 
> 标签：java, jmeter

我是 Jmeter 的新手。目前我已经在 J​​meter 中测试了 Web 服务调用。我已经通过 Web 服务调用向服务器发送了一个请求。我的输入是 xml 文件及其加密形式。所以我在 PostBody 中给出了加密字符串。

我的问题是我无法在 Jmeter 中进行加密过程。
所以我决定将jmeter连接到我的java类并发送到服务器。

```
Jmeter--->Java class--->server. 
```

我用过 Jmeter 2.8

有没有可能将 Jmeter 连接到 java 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:27:39.933

我不确定是否理解，但如果您想要做的是以下内容：

1.  加密一些 XML
2.  将其作为原始帖子正文传递给 HTTP 采样器，该采样器将调用您的网络服务

那么答案如下：

1.  在 JMETER_HOME/lib 文件夹中添加 groovy-all.jar

2.  在 HTTP 采样器上使用[JSR223 预处理器](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_PreProcessor)，并放入以下 ​​Groovy 代码：

    ```
    import org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase;
    import org.apache.jmeter.protocol.http.util.HTTPArgument;

    HTTPSamplerBase httpSamplerBase = (HTTPSamplerBase) sampler;

    HTTPArgument argument = 
                httpSamplerBase.getArguments().getArgument(0);

    String valueToEncrypt = argument.getValue();
    // Do you encryption here, in this example I put ENC for testing
    valueToEncrypt = "ENC"+valueToEncrypt;
    httpSamplerBase.getArguments().clear();
    httpSamplerBase.addNonEncodedArgument("", valueToEncrypt, ""); 
    ```

3.  在[HTTP Sampler](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)中，将要加密的原始 XML 放在 Raw Post Body 文本区域中

计划将具有以下结构（HTTP 镜像服务器仅用于我的测试）：

![在此处输入图像描述](../Images/698be10cbc6c3679a7a9d8803b9c94af.png)

**注意：我使用当前的 JMeter 每晚构建，所以我有脚本编译缓存部分，该部分尚不可用，将在 2.9 中。而是将您的脚本放在外部文件中并在文件名字段中引用它。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:22:11.050

jMeter 可以处理很多事情（参见Apache 的[这个列表](http://jmeter.apache.org/)）。一个是 JMS，它可能用于连接到您的 java 服务器。或http（通常用于）。这完全取决于您的 java 类能够响应什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T06:42:52.450

您还可以制作一个 java 类的 jar，并将其附加到您的测试计划中。然后，您可以使用 groovy 引擎从 JSR223 预处理器中引用它们。[![添加了 lib 的 Jmeter](../Images/cb56b3bdf72f6de9b3dfe969b109fcc0.png)](https://i.stack.imgur.com/2nS3o.png)

# code-coverage - 非 web 服务模块的声纳 + jacoco 代理代码覆盖率

> ID：14056092
> 
> 赞同：2
> 
> 时间：2012-12-27T14:17:44.410
> 
> 标签：code-coverage, sonarqube, functional-testing, multi-module, jacoco

我正在尝试使用 JaCoCo 代理通过添加`"-javaagent..."`到 Jetty 并运行外部 Selenium 测试（或例如手动测试）来收集网站的 FT 代码覆盖率。

在测试结束时，我只得到了 web 模块的结果，它实际上是在 Jetty 中运行的，而不是 web 模块中使用的“核心”模块（在同一个项目中）。那么，是否有能力收集项目**所有**模块的调用？

事实上，我现在尝试使用相同的 JaCoCo 报告目标（即）启动所有项目 Web 服务（它有 5 个）`/tmp/jacoco-res.exec`，`append=true`然后运行：

```
mvn sonar:sonar -Dsonar.jacoco.itReportPath=/tmp/jacoco-res.exec 
```

因此，sonar 现在为项目中的每个模块使用**相同**的JaCoCo 报告文件，并且 sonar 显示了 jetty-run 和核心模块的测试覆盖率。

这种方法是否适用并且覆盖结果是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:18:47.433

几天前，我在[Sonar User 论坛上提出了一个类似的问题。](http://sonar.15.n6.nabble.com/IT-Testing-code-coverage-with-Jacoco-td5006840.html)

简而言之，您的方法是正确的，也是由 Sonar 顾问提出的（如帖子所示）。

*   对每个 Maven 项目执行声纳分析。
*   对于每个分析，重用报告并传递您的 JaCoCo 报告（使用 -Dsonar.jacoco.itReportPath）
*   Sonar 将从这个 JaCoCo 报告中检索与正在分析的 Maven 项目相关的覆盖率数据。（您的核心项目之一）
*   因此，对于每个 Maven 项目，您都将获得集成测试的覆盖率。
*   最后，为了让您的集成测试覆盖您的 Web 服务，您必须使用 Views 插件： http: [//www.sonarsource.com/products/plugins/governance/portfolio-management/](http://www.sonarsource.com/products/plugins/governance/portfolio-management/)
*   创建一个视图，该视图是构成 Web 服务的所有 Maven 项目的聚合。
*   对其 Maven 项目之一运行 Sonar 分析，以便 Sonar 计算视图。
*   在视图仪表板上，您将能够通过集成测试获得 Web 服务的代码覆盖率。

# java - org.hibernate.MappingException：没有 JDBC 类型的方言映射：1111

> ID：14056093
> 
> 赞同：6
> 
> 时间：2012-12-27T14:17:47.223
> 
> 标签：java, hibernate, postgresql

```
Initial SessionFactory creation failed.org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111
    27 Dec, 2012 6:38:34 PM org.apache.catalina.core.StandardWrapperValve invoke
    SEVERE: Servlet.service() for servlet commission threw exception
    org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111
        at org.hibernate.dialect.TypeNames.get(TypeNames.java:79)
        at org.hibernate.dialect.TypeNames.get(TypeNames.java:104)
        at org.hibernate.dialect.Dialect.getTypeName(Dialect.java:347)
        at org.hibernate.mapping.Column.getSqlType(Column.java:208)
        at org.hibernate.mapping.Table.sqlCreateString(Table.java:419)
        at org.hibernate.cfg.Configuration.generateSchemaCreationScript(Configuration.java:930)
        at org.hibernate.tool.hbm2ddl.SchemaExport.<init>(SchemaExport.java:105)
        at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:383)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
        at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
        at com.core.commission.HibernateUtil.<clinit>(HibernateUtil.java:15)
        at com.core.commission.service.BaseCommissionService.saveRules(BaseCommissionService.java:48)
        at com.core.commission.service.BaseCommissionService.processSave(BaseCommissionService.java:22)
        at com.core.web.CommissionServlet.processRequest(CommissionServlet.java:51)
        at com.core.web.CommissionServlet.doPost(CommissionServlet.java:34)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 
```

启动 Web 服务器时出现上述错误。我已经使用 enity 类的枚举映射。就像是...

```
@Column(name = "commission_type")
        @Type(type = "com.core.commission.model.FNEnumUserType", parameters = @Parameter(name = "type", value = "com.core.commission.dto.CommissionType"))
        private CommissionType commissionType; 
```

有什么问题，我错过了配置中的任何内容吗？谢谢 ！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T14:49:26.437

堆栈跟踪告诉您的是，Hibernate 正在初始化自身，特别是正在执行`Configuration.generateSchemaCreationScript`，它会遍历所有映射表并为它们生成 DDL。作为其中的一部分，它查询现有列并将它们转换为内部 Hibernate 表示。它通过调用[`ResultSetMetaData::getColumnType`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html#getColumnType%28int%29)然后[`TypeNames::get`](http://www.docjar.com/html/api/org/hibernate/dialect/TypeNames.java.html)使用生成的类型代码调用来做到这一点。问题是`getColumnType`返回的类型代码为 1111，表示“[其他](http://docs.oracle.com/javase/6/docs/api/constant-values.html#java.sql.Types.OTHER)”），而 Hibernate 不知道如何处理它。

基本上，您的一个表中的某处是 Hibernate 无法处理的类型的列。如果你能弄清楚是哪一列，你就可以开始考虑如何处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:22:19.070

尝试在数据库端进行跟踪，在应用程序代码中放置一些断点或添加一些日志条目，以识别生成此错误的查询是什么，即在错误发生之前正在执行的查询。

获得查询后，尝试通过将语句分解为小块来缩小根本原因，并查看方言不支持哪种列/变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T11:43:30.727

在您的查询中，我认为某些数据类型正在检索为未知类型。请将类型转换为您在 Java bean 中使用的适当数据类型。如果您使用 Postgres 作为数据库。在您的 Java 代码中，您可以将其类型转换为例如：`select column_name :: desired type as \"desired_name\"` 例如：`select type_name :: text as \"typeName\"`

如果“ **::** ”这会产生任何问题，请使用**\ \:\ \:** 即您包含转义字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:16:15.050

I managed to solve the error.

1111 is for a `Null` value and in my case that column is mandatory and at any time there will be one value from an enum type. Hence no need to set `1111`, I changed it to `ARCHAR` sql type.

Finally it works.

# android - 只要按下按钮，如何更改图像......然后在按钮上显示默认值 unpress android

> ID：14056098
> 
> 赞同：0
> 
> 时间：2012-12-27T14:18:10.933
> 
> 标签：android, android-layout, android-relativelayout

我想在用户按住按钮时更改 imageview 的图像，并在用户释放按钮时将图像更改回默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:22:36.683

使用 OnFocusChangeListener(view) 方法并覆盖 OnFocusChange() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:24:10.647

为此，您需要使用 XML 选择器。你可以为你想要的任何状态指定你想要的任何可绘制对象。

文档在这里：http: [//developer.android.com/reference/android/graphics/drawable/StateListDrawable.html](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)

您将创建一个 XML，其中包含对您要应用样式的每个状态的引用，然后在将可绘制对象分配给视图（例如按钮）而不是特定可绘制对象时引用。

检查此 SO 问题以获取更多详细信息：[Android 选择器和文本颜色](https://stackoverflow.com/questions/1219312/android-selector-text-color)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:29:26.123

您可以将 设置`OnTouchListener`为`ImageView`和 ，`OnTouchListener`您可以设置要在其中显示的图像并在 中`MotionEvent.ACTION_DOWN`恢复旧图像`MotionEvent.ACTION_UP`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:39:58.893

您可以像这样创建自定义 Button 类

```
public class MButton extends Button {
    public MButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

    public MButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub

    }

    public MButton(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    // define style
    /**
     * Send resource ids for normal, selected, pressed in respective order
     * 
     * @param mImageIds
     */
    public void setDrawablePressedBg(Integer... mImageIds) {
        StateListDrawable bg = new StateListDrawable();
        Drawable normal = this.getResources().getDrawable(mImageIds[0]);
        Drawable selected = this.getResources().getDrawable(mImageIds[1]);
        Drawable pressed = this.getResources().getDrawable(mImageIds[2]);

        bg.addState(View.PRESSED_ENABLED_STATE_SET, pressed);
        bg.addState(View.ENABLED_FOCUSED_STATE_SET, selected);
        bg.addState(View.ENABLED_STATE_SET, normal);
        bg.addState(View.FOCUSED_STATE_SET, selected);
        bg.addState(View.EMPTY_STATE_SET, normal);
        this.setBackgroundDrawable(bg);
    }

    // define style
    public void setBackgroundPressedBg(Integer p1, Integer p2, Integer p3) {

        StateListDrawable bg = new StateListDrawable();
        Drawable normal = this.getResources().getDrawable(p1);
        Drawable selected = this.getResources().getDrawable(p2);
        Drawable pressed = this.getResources().getDrawable(p3);

        bg.addState(View.PRESSED_ENABLED_STATE_SET, pressed);
        bg.addState(View.ENABLED_FOCUSED_STATE_SET, selected);
        bg.addState(View.ENABLED_STATE_SET, normal);
        bg.addState(View.FOCUSED_STATE_SET, selected);
        bg.addState(View.EMPTY_STATE_SET, normal);
        this.setBackgroundDrawable(bg);
    }
} 
```

您可以在 onCreate 方法中像这样使用它

```
this.book_appointment = (MButton) this._view
                .findViewById(R.id.btn_book);

        this.book_appointment.setBackgroundPressedBg(R.drawable.btnnormal,
                R.drawable.btnsel, R.drawable.btnsel); 
```

这将在您的 xml 布局文件中进行

```
 <com.packageName.custom.MButton
        android:id="@+id/btn_book"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/tv_time1"
        android:layout_marginTop="20dp"
        android:background="@drawable/bookapointment" /> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-12T20:35:38.570

在这篇文章中，您可以找到解决方案：

[https://stackoverflow.com/a/18196156/2000517](https://stackoverflow.com/a/18196156/2000517)

小心！;)

# java - 我已将我的 Maven 依赖项的范围更改为提供

> ID：14056103
> 
> 赞同：0
> 
> 时间：2012-12-27T14:18:45.160
> 
> 标签：java, spring, tomcat, maven

我已将我的 maven 依赖项的范围更改为提供并手动复制到 tomcat/lib（以减少我的 war 文件大小）。

我的应用程序现在无法部署，出现可怕的内存不足错误。

```
 java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "http-bio-8080-exec-3 
```

它是一个 java/spring/hibernate 应用程序。stacktrace 上的两个迭代错误

```
Dec 27, 2012 2:22:37 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [spring] in context with path [] threw exception [Handler processing failed; nested exception is java.lang.OutOfMemoryError: PermGen space] with root cause
java.lang.OutOfMemoryError: PermGen space 
```

其次是

```
Dec 27, 2012 2:22:38 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [spring] in context with path [] threw exception [java.lang.ClassNotFoundException: org.apache.jsp.jsp.myLogin_jsp] with root cause
java.lang.ClassNotFoundException: org.apache.jsp.jsp.myLogin_jsp 
```

这在我的 IDE 之外，当我使用 intellij 运行时它工作正常......？

**在我的启动脚本中设置 CATALINA_OPTS 可以解决问题，为什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:37:14.837

添加例如 -XX:MaxPermSize=128M JVM 参数，看看发生了什么。

你做了一件有趣的事。这里有描述[。](http://cdivilly.wordpress.com/2012/04/23/permgen-memory-leak/)很快，战争会更小，但运行时内存消耗会更高。

# android - Android：ScrollView 不能与 View 类一起使用

> ID：14056120
> 
> 赞同：1
> 
> 时间：2012-12-27T14:20:01.830
> 
> 标签：android, android-layout, view, scrollview

我创建了一个用于绘制图形的类，该类扩展了 View，它看起来就像这里[的 How to draw a line in android](https://stackoverflow.com/questions/3616676/how-to-draw-a-line-in-android)。

在一个活动中，我用这个展示它

```
 drawView = new DrawView(this);
    drawView.setBackgroundColor(Color.WHITE);
    setContentView(drawView); 
```

但是当我[`ScrollView`](http://developer.android.com/reference/android/widget/ScrollView.html)在活动的 xml 中的 LinearLayout 中添加 时，它不起作用，我的意思是我不能向下滚动，就像没有[`ScrollView`](http://developer.android.com/reference/android/widget/ScrollView.html). 可能是什么问题？

这是xml代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/background_image"
android:orientation="vertical" >

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:31:12.717

这是因为您正在使用不同的方法添加两个视图：一个是系统从 xml 布局中膨胀的，另一个是在活动内部创建的。
这样，当您调用 setContentView(drawView); 时，来自 xml 布局的内容将被丢弃；
更好的说法是，**替换**为方法中的`DrawView`created `OnCreate`。
您应该在活动中扩展 xml 布局：

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

ScrollView container = getLayoutInflater().inflate(R.layout.main_layout, null));
setContentView(drawView);
drawView = container.findViewById(R.id.my_draw_view);
drawView.setBackgroundColor(Color.WHITE);  
} 
```

活动布局应如下所示：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical">

<com.yourcompany.DrawView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/>

</LinearLayout>
</ScrollView> 
```

如果有帮助，请不要害羞地接受它或 +1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:07:26.120

您可以通过编程方式创建 ScrollView 并将 DrawView 作为子项添加到其中。稍后将 ScrollView 设置为 Activity 的内容。像这样的东西：

```
drawView = new DrawView(this);
drawView.setBackgroundColor(Color.WHITE);

ScrollView sv = new ScrollView(this);
sv.setLayoutParams( new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT ) );
scrollView.addView( drawView );

setContentView(sv); 
```

# tridion - Tridion CMS 自定义页面 - Window.close 在 FF 中不起作用

> ID：14056124
> 
> 赞同：0
> 
> 时间：2012-12-27T14:20:12.920
> 
> 标签：tridion

我们创建了一个由组件作为自定义 URL 触发的自定义页面，

我们在页面上有一个关闭按钮，它调用了 window.close 的 js 函数，

它适用于 Ie 和 Chrome，但不适用于 FF。

我们还尝试使用接收 window.open("","_self") 的本地 var 并关闭它，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:45:58.383

这是一个浏览器问题，并不特定于 Tridion。看看这个回答类似问题的线程：[如何在 Mozilla Firefox 3 上使用 Javascript 关闭窗口？](https://stackoverflow.com/questions/760422/how-can-i-close-a-window-with-javascript-on-mozilla-firefox-3)

# google-app-engine - 应用引擎 https spdy

> ID：14056132
> 
> 赞同：1
> 
> 时间：2012-12-27T14:20:36.943
> 
> 标签：google-app-engine, https, spdy

我在 appengine 上使用 https。我检查了并非所有请求都在 Firefox 中使用 https spdy。是否需要配置任何东西以使所有请求都使用 spdy ？

![在此处输入图像描述](../Images/9d952bed7c21af307611a7a175d3098d.png)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:33:26.050

只要文件通过**https**和 appengine 服务器提供，那么它将通过 SPDY 提供 - 如果浏览器支持 SPDY。从您的屏幕截图中无法判断..但是如果这些文件中的任何一个来自不同的来源（例如，第三方小部件），那么如果这些文件不支持 SPDY，则可以通过普通 HTTPS 提供这些文件。

# sql - 在 CASE 语句 sqllite 中重用 SELECT 语句的结果

> ID：14056134
> 
> 赞同：1
> 
> 时间：2012-12-27T14:20:39.647
> 
> 标签：sql, sql-server, sqlite

我想创建一个重用select语句结果的SQL语句（使用sqllite ..所以我不能使用函数、IF语句等）。这就是它目前的样子

```
INSERT INTO search_email(many_fields, threadid) VALUES ('many_fields',
    CASE 
    WHEN
            (
                (SELECT COUNT(tableX.threadid) %threadIDquery% 
                ) > 0
            )
    THEN

                (SELECT tableX.threadid %threadIDquery% LIMIT 1)

    ELSE 
            0
    END
) 
```

我想重用第一次选择的结果，而不是必须制作另一个（几乎相同的）选择语句。

**更新：**对于那些想知道我要做什么的人..这是查询的完整版本：

```
INSERT INTO search_email(meta, subject, body, sender, tos, ccs, folder, threadid) VALUES ('meta1','subject1','body1','sender1', 'tos1',' ccs1','folder1',
    CASE 
    WHEN
            (
                (SELECT COUNT(search_email.threadID) FROM search_email 
                                                            WHERE search_email.subject MATCH '%query%'  AND 
                                                            (
                                                                (search_email.sender = '%sender' AND search_email.tos = '%receiver%')
                                                                OR 
                                                                (search_email.sender = '%receiver%' AND search_email.tos = '%sender%')
                                                            )
                ) > 0
            )
    THEN

            (SELECT search_email.threadID FROM search_email 
                                                        WHERE search_email.subject MATCH '%query%'  AND 
                                                        (
                                                            (search_email.sender = '%sender%' AND search_email.tos = '%receiver%')
                                                            OR 
                                                            (search_email.sender = '%receiver%' AND search_email.tos = '%sender%')
                                                        )  LIMIT 1
            )

    ELSE 
            //generate new thread ID
    END
) 
```

基本上我试图找出是否已经存在接收电子邮件的电子邮件线程..所以我检查主题是否匹配，如果匹配，我检查电子邮件的发件人和收件人是否匹配（在任一方向） ..如果电子邮件线程存在，我只需插入相同的电子邮件线程ID，否则我生成一个新的线程ID

**更新 2：**只是为了澄清，我正在寻找一种方法来保存 sqllite 编译器，使其免于进行两次相同的搜索.. 而不是简单地节省打字（或使其更具可读性等）

**更新 3：**我想知道如果 threadID 是从 dbase 中检索到的，而不是生成的，此语句是否有办法返回生成的 threadID。你可以在[这里找到答案](https://stackoverflow.com/a/14056652/766570)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:58:20.577

这是构造查询的另一种方法：

```
INSERT INTO search_email(meta, subject, body, sender, tos, ccs, folder, threadid)
    SELECT 'meta1', 'subject1', 'body1', 'sender1', 'tos1', 'ccs1', 'folder1',
            coalesce((SELECT search_email.threadID
                      FROM search_email 
                      WHERE search_email.subject MATCH '%query%' AND 
                            ((search_email.sender = '%sender%' AND search_email.tos = '%receiver%') OR
                             (search_email.sender = '%receiver%' AND search_email.tos = '%sender%')
                            )
                      LIMIT 1
                     ),
                     <generate new thread id here>
                    ) 
```

这是使用 a`select`而不是`values`. 它获取与条件匹配的线程 id，如果不匹配，则为 NULL。的第二个子句`coalesce`在第一个为 NULL 时运行。您可以在那里生成新的 id。

我确实对这种方法有疑问。对我来说，您似乎应该有一个管理线程的线程表。ThreadId 应该是此表中的自动递增 id。然后 emails 表可以引用这个 id。换句话说，我认为需要更详细地考虑数据模型。

以下查询不会查询工作，但它提供了将线程移动到子查询的想法：

```
INSERT INTO search_email(meta, subject, body, sender, tos, ccs, folder, threadid)
    SELECT 'meta1', 'subject1', 'body1', 'sender1', 'tos1', 'ccs1', 'folder1',
            coalesce(t.threadID,
                     <generate new thread id here>
                    )
    from (SELECT search_email.threadID
          FROM search_email 
          WHERE search_email.subject MATCH '%query%' AND 
                ((search_email.sender = '%sender%' AND search_email.tos = '%receiver%') OR
                 (search_email.sender = '%receiver%' AND search_email.tos = '%sender%')
                )
          LIMIT 1
         ) t 
```

它不起作用的原因是该`from`子句将不返回任何行，而不是返回 1 行具有 NULL 值。所以，要得到你想要的，你可以使用：

```
 from (SELECT search_email.threadID
          FROM search_email 
          WHERE search_email.subject MATCH '%query%' AND 
                ((search_email.sender = '%sender%' AND search_email.tos = '%receiver%') OR
                 (search_email.sender = '%receiver%' AND search_email.tos = '%sender%')
                )
          union all
          select NULL
          order by (case when threadId is not null then 1 else 0 end) desc
          LIMIT 1
         ) t 
```

这样可以确保在没有线程时返回 NULL 值。

# php - Magento 在自定义模型上保存多选数组

> ID：14056140
> 
> 赞同：1
> 
> 时间：2012-12-27T14:21:20.197
> 
> 标签：php, arrays, magento, model, multi-select

我在 Magento 中创建了一个自定义模型，可以在管理员中访问和编辑。但是，我在处理数组时遇到了麻烦。当我去保存模型时，文本字段保存得很好，但多选字段只是保存为“数组”，然后我无法去编辑它。

我需要知道如何在模型中保存和检索这个数组数据。在简单过滤的产品数据中显示在多选字段中的数据数组。

有人可以帮忙吗？非常感谢任何帮助！！！

![在此处输入图像描述](../Images/3236b2394a6a1161a93c319e9111cb17.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T15:03:14.640

想出来了 - 在你的控制器的 saveAction() 上，在这个下面：

```
$data = $this->getRequest()->getPost() 
```

我只是添加了以下代码：

```
foreach ($data as $key => $value)
        {
            if (is_array($value))
            {
                $data[$key] = implode(',',$this->getRequest()->getParam($key)); 
            }
        } 
```

# google-fusion-tables - 对 Google Fusion Tables 的数量请求的硬性限制？定价计划？

> ID：14056141
> 
> 赞同：2
> 
> 时间：2012-12-27T14:21:24.320
> 
> 标签：google-fusion-tables

我们每天可以向 Fusion Tables 发出的请求数量是否有硬性限制？如果是这样，有多少人知道超出该限制的定价计划（如果有）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T19:52:47.413

限制为每天 25000 个请求，读取方法计为 1 个请求，写入请求计为 5 个：

[https://developers.google.com/fusiontables/docs/v1/release_notes](https://developers.google.com/fusiontables/docs/v1/release_notes)

您还可以在 Google API 控制台的“配额”标签下查看所有 Google API 的配额：

[https://code.google.com/apis/console](https://code.google.com/apis/console)

那里也有申请更多配额的表格。

# sql-server - 如何在 sql server 2005 中的 try catch 中捕获错误时防止事务回滚

> ID：14056142
> 
> 赞同：2
> 
> 时间：2012-12-27T14:21:36.460
> 
> 标签：sql-server, sql-server-2005, try-catch, sqltransaction

我有一个包含记录的表 Table1

```
Table1
-------------------------------
ID  F1
-------------------------------
01  1
02  OK
03  52
04  53
05  Null
------------------------------ 
```

这里我想将 F1 Varchar 的数据类型更改为 Decimal(3,0); 然后我创建一个具有新结构的新表。

我想通过将 varchar 显式转换为十进制来将旧表的每个记录插入到新表中。所以我在 try catch 块中写这个命令。如果产生错误，那么在 catch 块中我可以用它的默认值填充它。但是这整个工作是在开始事务和提交事务块之间执行的。因此，当 catch 块中捕获到错误时，无法执行进一步的工作，就会发生错误

> 当前事务无法提交，也无法支持写入日志文件的操作。回滚事务。

即使在 try catch 块中发生错误，如何防止此事务回滚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:25:47.920

你不能。您必须始终[检查 XACT_STATE 并采取相应措施](http://msdn.microsoft.com/en-us/library/ms175976.aspx)：

> **不可提交事务和 XACT_STATE**
> 如果 TRY 块中产生的错误导致当前事务的状态无效，则该事务被归类为不可提交事务。当错误发生在 TRY 块内时，通常在 TRY 块外结束事务的错误会导致事务进入不可提交状态。不可提交的事务只能执行读取操作或 ROLLBACK TRANSACTION。该事务不能执行任何会生成写操作或 COMMIT TRANSACTION 的 Transact-SQL 语句。如果事务已被归类为不可提交事务，则 XACT_STATE 函数返回值 -1。批处理完成后，数据库引擎会回滚任何活动的不可提交事务。如果事务进入不可提交状态时没有发送错误消息，批处理完成后，将向客户端应用程序发送一条错误消息。这表示检测到并回滚了一个不可提交的事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T15:17:52.930

不幸的是，这对于 SQL SERVER 是不可能的。

任何错误都会导致事务失败，并且失败的事务无法提交，也无法展开到保存点。

唯一的解决方案是：使用另一个数据库引擎...

# c# - 根据 URL 在 ASP.NET 中重定向网页

> ID：14056144
> 
> 赞同：2
> 
> 时间：2012-12-27T14:21:39.453
> 
> 标签：c#, asp.net, asp.net-mvc-3, redirect

我有一个名为 mywebsite.com 的域名，但我更喜欢用户通过 www 子域访问我的网站。

如何在 asp.net mvc3 中轻松实现验证和重定向？

当我使用 php 时，我做了类似的事情：

```
if($_SERVER['SERVER_NAME'] != "www.mywebsite.com")
     header('Location: www.mywebsite.com'); 
```

我想找到一种类似的方法来在 asp.net (C#) 中实现这种重定向（我不想设置 301 重定向，而只是像我在 PHP 中使用的那样设置软重定向）。

我知道我可以在我的每个控制器操作方法中进行验证，如果用户不在子域 www.mywebsite.com 上，我可以重定向用户，但我更愿意在验证和重定向后写一次，但我找不到在哪里 ：/

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:33:12.257

你可以使用：

```
Request.Url.ToString() 
```

这将返回 URL ，然后您可以快速检查它是否包含“www”。如果为真，则重定向。但是，我建议您在 IIS 中的 URL 重写中处理此问题。

按照此处的指南操作：http: [//www.dotnetexpertguide.com/2011/08/iis-7-redirect-domaincom-to.html](http://www.dotnetexpertguide.com/2011/08/iis-7-redirect-domaincom-to.html)这是为了让 domain.com 转到 www.domain.com，但它的工作原理相同相反的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:42:44.343

如果我在这里没有完全遗漏一些东西，你不能在 IIS 设置中为该站点设置主机头以包括 www.domain.com 和 domain.com 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:38:47.910

实际上，原始问题专门要求“软”重定向（201 或 202）而不是永久移动/找到（301/302），所以我认为条件行应该是 Response.Redirect 而不是：

```
 if(!Request.Url.Host.Equals("www.mywebsite.com"))
 {
      HttpContext.Current.Response.Headers.Add("Location", "www.mywebsite.com");
 } 
```

编辑：我相信状态也可以直接设置，与 Response.Redirect 结合使用：

```
 if(!Request.Url.Host.Equals("www.mywebsite.com"))
 {
      HttpContext.Current.Response.Redirect("www.mywebsite.com");
      HttpContext.Current.Response.Status = "201 Created";
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:38:52.620

如果您只想添加/附加标头信息，请使用[Response.AppendHeader()](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.appendheader.aspx)。

可以根据 Ryan 的回答检查 Request.Url.ToString() 属性以查找您要查找的 url。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T14:28:54.667

你可以试试这样的

```
 if(!Request.Url.Host.Equals("www.mywebsite.com"))
 {
      Response.Redirect("website");
 } 
```

# python - Python中链式赋值的状态

> ID：14056146
> 
> 赞同：2
> 
> 时间：2012-12-27T14:21:44.537
> 
> 标签：python

有几次我偶然发现了 Python 中的 C 风格赋值，例如`a = b = 0`. 通过勤奋的谷歌搜索，我发现这被称为链式赋值：[ [1](http://en.wikipedia.org/wiki/Assignment_%28computer_science%29#Chained_assignment) ]，[ [2](https://stackoverflow.com/questions/11498441/what-is-this-kind-of-assignment-in-python-called-a-b-true) ]，[ [3](https://stackoverflow.com/questions/7601823/how-do-chained-assignments-work) ]。[但是，官方文档](http://docs.python.org/3/reference/simple_stmts.html#assignment-statements)中似乎没有提及此功能。

这是否意味着链式分配仍处于实验阶段，或者仅仅是官方文档稍微落后于开发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T14:24:52.267

看起来官方文档确实提到了它？

```
assignment_stmt ::=  (target_list "=")+ (expression_list | yield_expression)
                                      ^ here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:53:00.343

您可以使用链式赋值，但它不是 Pythonic 风格。

来自 Python 之禅；；“平面比嵌套好。”

# c++ - QtPlugin 无法加载库

> ID：14056149
> 
> 赞同：2
> 
> 时间：2012-12-27T14:21:51.480
> 
> 标签：c++, qt, plugins

我在带有 GCC 的 Linux 上使用 Qt 4.8.3。我正在尝试使用 QtPlugin 创建模块化应用程序。该应用程序描述了一些基本功能，然后大量插件将提供所有独特的功能。每个插件使用一个工厂来提供一个类的多个实例，并由工厂类和要提供的类组成。

目前，应用程序正在编译，但没有执行，我收到了诸如`Cannot load library ~: (~: undefined symbol: _ZTI8Base16staticMetaObjectE)`. 我不确定如何解决此错误。删除对 Base 的所有提及可以解决问题，但是实例需要从该类派生，所以我认为这不会起作用。

我在下面的项目结构中包含了可执行文件和一个插件（它们目前都是相同的并且有相同的问题）。

非常感谢你的协助。

### 目录结构

```
main_project
+- main_project.pro
+- app/
| +- app.pro
| +- main.cpp
| +- factoryinterface.h
| +- base.h
| +- base.cpp
|
+- counter/
  +- counter.pro
  +- counter.h
  +- counterfactory.cpp
  +- counterfactory.h
  +- counter.cpp 
```

### main_project.pro

```
TEMPLATE = subdirs

SUBDIRS += \
    app \
    counter 
```

### 应用程序.pro

```
QT       += core

QT       -= gui

DESTDIR = ../
TARGET = app_exec
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp \
    base.cpp

HEADERS += \
    base.h \
    factoryinterface.h 
```

### 工厂接口.h

```
#ifndef FACTORYINTERFACE_H
#define FACTORYINTERFACE_H

#include <QtPlugin>
#include "base.h"

class FactoryInterface {
public:
    virtual ~FactoryInterface() {}
    virtual Base *get() = 0;
    virtual QString name() = 0;
};

Q_DECLARE_INTERFACE(FactoryInterface,
                    "com.example.FactoryInterface/1.0")

#endif // FACTORYINTERFACE_H 
```

### 基础.h

```
#ifndef BASE_H
#define BASE_H

#include <QObject>

#include <QString>
#include <QStringList>
#include <QHash>

class Base : public QObject {
    Q_OBJECT
public:
    Base(QObject *parent = 0);
    virtual ~Base();

    virtual QString name();

signals:

public slots:

protected:
    QString name_;
};

#endif // BASE_H 
```

### 基础.cpp

```
#include "base.h"

Base::Base(QObject *parent) :
    QObject(parent)
{
}

Base::~Base()
{
}

QString Base::name()
{
    return name_;
} 
```

### 主文件

```
#include <QtCore/QCoreApplication>

#include <QDir>
#include <QPluginLoader>
#include <QDebug>
#include "factoryinterface.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QDir pluginDir(a.applicationDirPath());
    pluginDir.cd("plugins");
    foreach(QString filename, pluginDir.entryList(QDir::Files))
    {
        QPluginLoader loader(pluginDir.absoluteFilePath(filename));
        QObject *plugin = loader.instance();

        if (plugin)
        {
            FactoryInterface *i = qobject_cast<FactoryInterface*>(plugin);

            if (i)
            {
                qDebug() << " :" << i->name();
            }
        } else {
            qDebug() << loader.errorString();
        }
    }

    return a.exec();
} 
```

### 计数器.pro

```
QT       -= gui
CONFIG   += plugin

TARGET = $$qtLibraryTarget(counter)
TEMPLATE = lib

DEFINES += COUNTER_LIBRARY

SOURCES += counter.cpp \
    counterfactory.cpp

HEADERS += counter.h \
    counterfactory.h

INCLUDEPATH += ../app

DESTDIR = ../plugins

symbian {
    MMP_RULES += EXPORTUNFROZEN
    TARGET.UID3 = 0xE5B38B75
    TARGET.CAPABILITY = 
    TARGET.EPOCALLOWDLLDATA = 1
    addFiles.sources = counter.dll
    addFiles.path = !:/sys/bin
    DEPLOYMENT += addFiles
}

unix:!symbian {
    maemo5 {
        target.path = /opt/usr/lib
    } else {
        target.path = /usr/lib
    }
    INSTALLS += target
} 
```

### 计数器.h

```
#ifndef COUNTER_H
#define COUNTER_H

#include <QObject>
#include "base.h"

class Counter : public Base {
    Q_OBJECT
public:
    Counter();
};

#endif // COUNTER_H 
```

### 计数器.cpp

```
#include "counter.h"

Counter::Counter()
{
    name_ = "Counter";
} 
```

### 反工厂.h

```
#ifndef COUNTER_H
#define COUNTER_H

#include <QObject>
#include "factoryinterface.h"
#include "base.h"
#include "counter.h"

class CounterFactory : public QObject, public FactoryInterface
{
    Q_OBJECT
    Q_INTERFACES(FactoryInterface)
public:
    explicit CounterFactory(QObject *parent = 0);
    Base *get();
    QString name();

signals:

public slots:

};

#endif // COUNTER_H 
```

### 反工厂.cpp

```
#include "counterfactory.h"

CounterFactory::CounterFactory(QObject *parent) :
    QObject(parent)
{
}

Base *CounterFactory::get()
{
    return new Counter;
}

QString CounterFactory::name()
{
    return "Counter";
}

Q_EXPORT_PLUGIN2(counter, CounterFactory) 
```

**编辑：**在调试模式下编译后更新错误消息。

**编辑：**我尝试导出/导入 BaseNode 类，但这也不起作用。我不确定这是完全不正确还是我做错了。对 Base 类进行了以下更改（将 BASE_LIBRARY 添加到 app.pro 文件中的 DEFINES 中）：

```
#include <QtCore/qglobal.h>

#if defined(BASE_LIBRARY)
#  define BASESHARED_EXPORT Q_DECL_EXPORT
#else
#  define BASESHARED_EXPORT Q_DECL_IMPORT
#endif

class BASESHARED_EXPORT Base : public QObject { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:21:49.003

最终解决方案是将 Base 类添加到 counter.pro 文件中。我在下面列出了完整更新的 counter.pro 文件，但唯一的变化是添加了 HEADERS 和 SOURCES。

### 计数器.pro

```
QT       -= gui
CONFIG   += plugin

TARGET = $$qtLibraryTarget(counter)
TEMPLATE = lib

DEFINES += COUNTER_LIBRARY

SOURCES += counter.cpp \
    counterfactory.cpp \
    ../app/base.cpp

HEADERS += counter.h \
    counterfactory.h \
    ../app/base.h

INCLUDEPATH += ../app

DESTDIR = ../plugins

symbian {
    MMP_RULES += EXPORTUNFROZEN
    TARGET.UID3 = 0xE5B38B75
    TARGET.CAPABILITY = 
    TARGET.EPOCALLOWDLLDATA = 1
    addFiles.sources = counter.dll
    addFiles.path = !:/sys/bin
    DEPLOYMENT += addFiles
}

unix:!symbian {
    maemo5 {
        target.path = /opt/usr/lib
    } else {
        target.path = /usr/lib
    }
    INSTALLS += target
} 
```

# r - 从数据框中删除连续的重复项

> ID：14056153
> 
> 赞同：13
> 
> 时间：2012-12-27T14:22:11.700
> 
> 标签：r, range

我有一个数据框，我想删除连续的重复项（在基础中）。我知道`rle`在这里可能会有所帮助，但想不出如何使用它。示例输出将有助于阐明我的要求。

**生成样本数据：**

```
set.seed(12)
samps <- sample(1:5, 20, T)
dat <- data.frame(v1=LETTERS[samps], v2=month.abb[samps])
dat[10, 2] <- "Mar" 
```

**样本数据：**

```
 v1  v2
1   A Jan
2   E May
3   E May
4   B Feb
5   A Jan
6   A Jan
7   A Jan
8   D Apr
9   A Jan
10  A Mar
11  B Feb
12  E May
13  B Feb
14  B Feb
15  B Feb
16  C Mar
17  C Mar
18  C Mar
19  D Apr
20  A Jan 
```

**期望的结果：**

```
 v1  v2
1   A Jan
3   E May
4   B Feb
7   A Jan
8   D Apr
10  A Mar
11  B Feb
12  E May
15  B Feb
18  C Mar
19  D Apr
20  A Jan 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T14:34:57.433

这是一种方法，不是 with `rle`，而是一种方法：

```
dat[with(dat, c(TRUE, diff(as.numeric(interaction(v1, v2))) != 0)), ] 
```

正如您的示例数据所暗示的那样，这假设您正在使用`factor`列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:33:22.737

这是使用过滤器的快速解决方案

```
dat[(filter(dat,c(-1,1))!= 0)[,1],]
     v1   v2
1     A  Jan
3     E  May
4     B  Feb
7     A  Jan
8     D  Apr
10    A  Mar
11    B  Feb
12    E  May
15    B  Feb
18    C  Mar
19    D  Apr
NA <NA> <NA> 
```

您需要将原始数据的最后一个值添加到结果中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T14:40:02.077

使用`rle`我想出了这个

```
ind <- cumsum(rle(as.character(dat$v1))$length)
dat[ind, ] 
```

`ind`指示连续条目的第一个或最后一个。

编辑：

Matthews 评论的一个简单解决方案是

```
dat[15, 2] <- "May"
dat[cumsum(rle(paste0(dat$v1, dat$v2))$length), ] 
```

# iphone - 未从 Twitter 获得完整的关注者列表

> ID：14056156
> 
> 赞同：1
> 
> 时间：2012-12-27T14:22:19.513
> 
> 标签：iphone, objective-c, ios, twitter

在我的应用程序中，我想显示 Twitter 关注者列表。我尝试使用以下代码完成此操作：

```
NSString *urlstring = [NSString stringWithFormat:
    @"https://api.twitter.com/1/followers.json?screen_name=%@", username];

NSURL *url = [[NSURL alloc]initWithString:urlstring];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request startSynchronous]; 
```

但是我只返回了 20 个关注者（来自一个有 1045 个关注者的帐户）。所以我尝试了：

```
NSString *urlstring = [NSString stringWithFormat:
    @"https://api.twitter.com/1/followers.json?cursor=-1&screen_name=%@&count=10000",
    username];

NSURL *url = [[NSURL alloc]initWithString:urlstring];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request startSynchronous]; 
```

现在我有 200 个追随者，这仍然不是正确的总数。Twitter API 是否有限制，这会阻止我在一次通话中获得关注者总数？或者这个问题可能是由于其他原因造成的？欢迎所有有关如何解决此问题的建议。

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:07:44.427

来自 Twitter 文档

“REST API 的第 1 版现已弃用，并将在未来几个月内停止运行。今天迁移到 1.1 版。”

并根据 Twitter API 1.1

您应该使用`https://dev.twitter.com/docs/api/1.1/get/followers/list`API 调用和

“目前，结果是按照最近的顺序排列的——但是，这种顺序会受到未宣布的更改和最终一致性问题的影响。结果以**20 个用户**为一组给出，并且可以使用后续请求中的 next_cursor 值。”

# objective-c - 根据标签更改 UIButton 的颜色

> ID：14056157
> 
> 赞同：0
> 
> 时间：2012-12-27T14:22:20.103
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

有一堆 UIButtons，其中一些需要根据情况改变颜色，目前处理如下：

```
UIButton *button;
button = [self.view viewWithTag:positionInArray];
[button setBackgroundColor:[UIColor cyanColor]];
button = [self.view viewWithTag:positionInArray-1];
[button setBackgroundColor:[UIColor cyanColor]];
button = [self.view viewWithTag:positionInArray+3];
[button setBackgroundColor:[UIColor cyanColor]]
button = [self.view viewWithTag:positionInArray+4];
[button setBackgroundColor:[UIColor cyanColor]]; 
```

它可以工作，但是将按钮设置为标签的代码会引发以下警告：

“使用 'UIView *' 类型的表达式初始化 'UIButton *__strong' 的不兼容指针类型”

我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:27:18.790

问题是，这`viewWithTag:`可能会返回 UIView 的任何子类。如果你知道它肯定会返回一个 UIButton ，你可以像这样转换它：

```
button = (UIButton *)[self.view viewWithTag:positionInArray]; 
```

这将隐藏警告，但当视图不是按钮时可能会产生意想不到的结果！更好的解决方案是检查返回的 UIView 子类是否是 UIButton：

```
UIView *view = [self.view viewWithTag:positionInArray];
if ([view isKindOfClass:[UIButton class]]) {
   button = (UIButton *)view;
   [button setBackgroundColor:[UIColor cyanColor]];
} else {
   NSLog(@"Ooops, something went wrong! View is not a kind of UIButton.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:27:51.467

问题是`viewWithTag:`返回 a`UIView`因为它可以是 的任何子类`UIView`，包括`UIButton`.

这取决于设计，如果您没有任何其他具有此标签的子视图，那么您应该像其他答案一样简单地将结果转换为 UIButton 并完成它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:25:47.140

您需要像这样将 UIViews 转换为 UIButtons：

```
button = (UIButton *)[self.view viewWithTag:positionInArray]; 
```

最好通过执行以下操作来验证您的视图实际上是按钮：

```
UIView *button = [self.view viewWithTag:positionInArray];
if ([button isKindOfClass[UIButton class]] {
    [button setBackgroundColor:[UIColor cyanColor]]; 
} 
```

在这个例子中，不需要强制转换为 UIButton，因为 UIViews 也有这个方法。如果您只想更改 UIButton 的颜色，则只需要 if 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:37:53.783

**向下转换的替代方案**

viewWithTag：返回一个 UIView，但它可能指向 UIView 对象的任何子类。
由于多态是有效的，并且消息是动态的，你可以这样做：

```
UIView *button;
button = [self.view viewWithTag:positionInArray];
[button setBackgroundColor:[UIColor cyanColor]]; 
```

你从 UIView 继承了 backgroundColor，所以没有任何问题。
但是，您始终可以使用类型 id，这是一种“快乐”。

# joomla - jupgrade-joomla 从 1.5 升级到 2.5

> ID：14056160
> 
> 赞同：0
> 
> 时间：2012-12-27T14:22:25.260
> 
> 标签：joomla, upgrade

很久以前，我使用 jUpgrade 插件进行 joomla 升级。但是现在没有使用插件/组件将joomla版本从1.5升级到2.5

是否有任何其他免费软件插件用于迁移？

我使用了以下组件。
Gavick Pro
Jcomments
jcraweler
jfusion
Joomfish 和
k2

请提供一些建议以将 joomla 从 1.5 升级到 2.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:30:46.127

jUpgrade 由于下载链接断开而未发布，但是在其官方网站上发生了变化，仍然可以下载：

[http://redcomponent.com/redcomponent/jupgrade](http://redcomponent.com/redcomponent/jupgrade)

我忘了提到 jUpgrade 不会升级您的 3rd 方扩展，例如 JEvents。不幸的是，您必须为每一个下载 Joomla 2.5 兼容版本。网站模板也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T11:32:14.827

我知道这是一个老问题，但 redComponent 上的情况又发生了变化。他们现在在网站上没有可用的安装程序。

但是，如果 redMigrator（JUpgrade 替代品）不能满足您的需求（就像我今天的特殊情况一样），他们会将 JUpgrade 源代码放在 GitHub 上

[https://github.com/fastslack/jUpgrade](https://github.com/fastslack/jUpgrade)

只需将 repo 克隆下来，然后运行 ​​release/make_release.sh

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:32:25.363

[http://redcomponent.com/redcomponent/jupgrade](http://redcomponent.com/redcomponent/jupgrade)

它仍然可以从制造商网站获得。由于某种原因，刚刚在 JED 上未发表。就我而言，继续像以前一样使用它。

没有其他公认的免费软件升级，只有付费的[SP 升级](http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/15609)（请注意对这个扩展的支持，因为它是付费扩展，但对于使用 jUpgrade 的通用升级棒来说要好得多）。但是，确实存在免费升级，可以在 JED的[本节下找到。](http://extensions.joomla.org/extensions/migration-a-conversion)

# python - 当在 pyqt4 中按下修饰键时，将所有键盘命令自动通过管道传输到嵌入式 mplayer 实例

> ID：14056163
> 
> 赞同：5
> 
> 时间：2012-12-27T14:22:32.913
> 
> 标签：python, keyboard, qt4, pyqt4, mplayer

这是此答案的后续问题：[https](https://stackoverflow.com/a/11939294/406686) ://stackoverflow.com/a/11939294/406686 ：

考虑以下代码，它将 mplayer 嵌入到`QWidget`. 问题是它不会对任何 mplayer 键盘快捷键做出反应，例如用于向前搜索的右箭头等。

很明显，我可以手动重新实现每个快捷方式。但是，只要按下修饰键（例如 ALT 或 Win-Key），有没有办法将所有键盘序列自动传送到 mplayer？

例如：按`ALT`+`→</kbd> = seek forward...`

```
import mpylayer
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.container = QtGui.QWidget(self)
        self.container.setStyleSheet('background: black')
        self.button = QtGui.QPushButton('Open', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.container)
        layout.addWidget(self.button)
        self.mplayer = mpylayer.MPlayerControl(
            'mplayer', ['-wid', str(self.container.winId())])

    def handleButton(self):
        path = QtGui.QFileDialog.getOpenFileName()
        if not path.isEmpty():
            self.mplayer.loadfile(unicode(path))

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(640, 480)
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:06:10.000

我不确定，如果我解决了你的问题。您可以轻松地将`keyPressEvent`和`keyReleaseEvent`方法添加到您的`Window`类中：

```
class Window(QtGui.QWidget):
    def __init__(self):
        # same code as above
        self.setFocus()
        self.__modifier_pressed = False

    def keyPressEvent(self, event):
        if event.key() == QtCore.Qt.Key_Alt:
            self.__modifier_pressed = True
        elif self.__modifier_pressed:
            self.mplayer.run_command("key_down_event", event.nativeVirtualKey())

    def keyReleaseEvent(self, event):
        if event.key() == QtCore.Qt.Key_Alt:
            self.__modifier_pressed = False 
```

此示例仅适用于 Modifier+ONE 其他键。如果您还需要更复杂的快捷键，例如`Alt`+ `Ctrl`+ `Shift`+ `→`，您可能需要列表来保存当前按下的键，但基本思想应该很清楚。

在我的电脑上，python 的按键和从 mplayer 收到的按键是不同的，但是我使用了一种非常不常见的键盘布局（[Neo-Layout](http://www.neo-layout.org)），所以这可能是这个原因。

# asp.net - 如何获取 data.d 的所有元素

> ID：14056165
> 
> 赞同：0
> 
> 时间：2012-12-27T14:22:36.083
> 
> 标签：asp.net, ajax

我有一个服务器方法，它返回我的自定义类的实例集合。我知道在 AJAX 成功回调函数中访问这些对象我可以说`data.d`。并访问我要写的第一个对象`data.d[0]`。但是如何获取 data.d 的所有元素呢？我不会遍历所有对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:38:01.857

好吧，你知道`data.d`是一个数组。在你的成功回调中，只需遍历数组中的项目：

```
 success: function (data) {
        for (var i = 0; i < data.d.length; i++) {
            console.log(data.d[i]);
        }
    } 
```

如果你使用 jQuery，你也可以使用[$.each()](http://api.jquery.com/jQuery.each/)。它需要一个带有两个参数的回调 - 集合中的索引和该索引处的值：

```
 success: function (data) {
        $.each(data.d, function (i, v) {
            console.log(i, v);
        });
    } 
```

# arduino - Arduino Uno 上传失败

> ID：14056166
> 
> 赞同：3
> 
> 时间：2012-12-27T14:22:42.393
> 
> 标签：arduino, arduino-uno

作为我正在进行的项目的一部分，我收到了一个 arduino uno 和一些代码。我以前从未与他们合作过，所以这对我来说是一种全新的体验。

我正在使用他们网站上的 Arduino 应用程序，当我编译代码时它工作正常。但是，当我上传时，出现错误：

```
avrdude: stk500_getsync(): not in sync: resp=0x41 
```

我查看了为此返回的每一个谷歌结果，但我没有得到任何结果。我尝试在 3 台不同的机器上上传，每台机器上至少有两个不同的操作系统。我到底怎么让它接受这个代码？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T14:29:36.767

在对器件进行编程期间，RX 和 TX 引脚应断开。检查这个。

# android - 使用 performClick() 调用按钮两次

> ID：14056170
> 
> 赞同：1
> 
> 时间：2012-12-27T14:23:03.017
> 
> 标签：android, button, onclick, onclicklistener

我有一个 ImageButton 加。单击时，我需要对视图进行膨胀。

我的问题是，当我使用 performClick 时，Imagebutton 被调用了两次，并同时执行了两次充气。

我不明白为什么会这样。

这是我的一些代码：

```
 private ImageButton addPhone;
    addPhone = (ImageButton)view.findViewById(R.id.ac_ibAddClientPhone);

    addPhone.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                inflationFields = new InflatationFields(getActivity());
                inflationFields.inflateNewField("phone", containerPhone, view, adapterPhone);
            }
        }); 
```

在代码的另一部分我调用按钮并尝试单击执行单击

```
 try{
     if(ccPhone.moveToFirst())  
         do{
             if(flag_first==true){ 
                 phone =  ccPhone.getString(ccPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                 Log.d(ClientEditContact.class.getName(), "PHONE: " +phone); 
                 type = ccPhone.getInt(ccPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                 etPhone = (EditText)viewPrincipal.findViewById(R.id.ac_etAddClientPhone);
                 etPhone.setText(phone + "" +etPhone.getTag().toString());
                 spPhone.setSelection(convertTypeToIdSpinner(type)); 
                 flag_first=false; 
             } 
             else if(flag_first == false){
                     addPhone.performClick(); 
                     phone = ccPhone.getString(ccPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                     type = ccPhone.getInt(ccPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                     etPhone = (EditText)viewContainerPhone.findViewWithTag("etTagPhone" + count);
                     etPhone.setText(phone + "" + etPhone.getTag().toString());

                     count = count + 1;
                     if(count==ccPhone.getCount()){
                         break;
                     }
             } 
         }while(ccPhone.moveToNext());       
     Log.d(ClientEditContact.class.getName(), "LAST PHONE ---> " +phone);
     }finally{
         if(ccPhone != null && ! ccPhone.isClosed()){
         ccPhone.close();
         }
     } 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T16:20:08.403

有点晚了，但是当单击按钮时系统会自行调用 performClick() ，因此您不应该在代码中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:26:05.937

仔细检查您调用的代码部分`addPhone.performClick();`。可能是那部分被调用了两次。

# java - 使用 ScheduledExecutorService 以固定间隔并行运行多个线程

> ID：14056172
> 
> 赞同：6
> 
> 时间：2012-12-27T14:23:16.533
> 
> 标签：java, multithreading, concurrency, executorservice, scheduledexecutorservice

目标：每 5 秒监控 5 个 json URL，其中 5 个线程并行运行。

我想运行多个并行线程以每个 n 秒的间隔监控 JSON URL。我正在使用`ScheduledExecutorService`这个。

```
ScheduledExecutorService executor = Executors.newScheduledThreadPool(5);

for(NetworkBwXmlObject x : xmlDsList) {
    executor.scheduleAtFixedRate(new processJsonUrl(x.getJsonUrl(),x.getId(), ctx), 0, 5, TimeUnit.SECONDS);
}

class processJsonUrl implements Runnable {

} 
```

这是创建 5 个线程来监控 5 个 URL 的正确方法吗？我不想在这里使用线程池。在应用程序的生命周期之前，所有 5 个线程都必须处于活动状态。

可以`ScheduledExecutorService`在我的情况下提供帮助还是有另一种方法可以实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T14:27:09.400

ScheduledExecutorService 是一个线程池，它会做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:26:57.183

我会用 Quartz 来实现它，这是实现涉及计划任务的良好解决方案的一种简单方法：http: [//quartz-scheduler.org/](http://quartz-scheduler.org/)

# ruby-on-rails - 控制器 A 调用模型 B：代码气味？

> ID：14056174
> 
> 赞同：2
> 
> 时间：2012-12-27T14:23:28.793
> 
> 标签：ruby-on-rails, model-view-controller

我有一个`toys`控制器，用户可以用它来认领玩具。现在，该`claim`方法在控制器级别实现（正如这个[答案](https://stackoverflow.com/a/14042080/592229)所建议的那样）。

但是，现在声称真正不应该存在的逻辑变得有点胖了：如果一个孩子已经拥有 3 个玩具，他们就不能声称一个玩具，一个孩子不能声称另一个孩子声称的玩具，等等. 该逻辑的合理点（在我看来）在`child`模型中，因为我正在描述孩子的行为（他们可能会做和可能不会做的事情）。

也就是说，如果我这样做，`toys#claim`控制器操作将调用`child`模型中的方法。这是代码异味/不好的做法吗？

（我猜有人会建议我为此使用服务对象。如果你这样做了，你能指出一个简单的教程吗？最近关于这个的 RailsCast 对我来说有点太复杂了。）

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T14:55:18.140

一般来说（在 Rails 之外），它根本不是一种气味。事实上，我认为在“模型”和“控制器”之间进行纯粹的 1:1 映射是一种味道。

*注意：*我不是 ROR 开发人员。我在 ROR 或它如何实现事物方面没有经验。但是，我确实非常了解设计模式，并且了解应用程序架构。照这样说：

与其担心 1:1 映射，不如退一步考虑一下应用程序的结构。

控制器应该做什么？好吧，一般来说，它应该将用户操作路由到应用程序。这只是一个管道步骤。

那么模型（层）应该做什么？通常，模型是一个包含应用程序中所有业务逻辑的层。它将处理数据库交互、访问控制、业务操作等。因此，模型实际上是您应用程序的绝大多数。

另一方面，视图是您的表示层。它应该处理所有渲染，从模型层提取数据。

基于这种理解，您的模型、视图和控制器应该能够相互独立地变化。一般来说，我希望看到控制器和视图之间的关系相当 1:1。我的意思是每个存在的控制器，我都希望看到一个视图。但是可能存在没有用户交互的视图。在这些情况下，您可能需要一个控制器（来渲染视图），或者根据您的架构，您可能不需要一个。

但是“模型类”是模型层的一小部分（充当较低模型功能的代理或适配器）与控制器或视图可能是或可能不是 1:1。例如，您可能有一个从多个模型中提取数据的视图。您可以拥有一个作用于多个模型的控制器。

现在您可以退后一步说，如果控制器需要对多个模型进行操作，则创建一个抽象该操作的新模型。有时这是正确的做法。有时不是。这一切都归结为所涉及的具体操作和关系......

归根结底，这里没有“对”或“错”之分。在构建应用程序时，确实需要做出设计决策。我不会太担心“气味”组件，只要它在您的应用程序中有意义......

# richfaces - rich:inplaceinput 文本颜色问题

> ID：14056176
> 
> 赞同：0
> 
> 时间：2012-12-27T14:23:48.180
> 
> 标签：richfaces

当我专注于一个单元格并取消聚焦时，我遇到了 Rich:inplaceInput 问题 inPlaceInput 组件的文本变为灰色 如何使文本保持黑色？请帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:01:11.297

从您写的内容来看，我认为您使用的是 blueSky 皮肤，并且您正在谈论框中显示的默认文本，以防它没有更改。默认文本有一个 CSS 类 ( **rf-ii-dflt-lb** )，在 blueSky 中它以灰色显示文本。您需要在页面中覆盖此类，例如

```
.rf-ii-dflt-lbl {
    color: black;
} 
```

您还可以[在此处检查可用于 inplaceInput 的所有 css 类](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_inplaceInput.html#d0e35058)

# c# - MediaElement 将音频输出重定向到扬声器

> ID：14056179
> 
> 赞同：1
> 
> 时间：2012-12-27T14:24:14.127
> 
> 标签：c#, silverlight-4.0, windows-phone, mediaelement

我正在实现 VOIP 应用程序，我必须配置输出设备，并且应该提供音频输出设备之间的切换，
意味着

-- 与普通电话一样，可以在耳机和扬声器之间切换，

有没有办法我可以实现...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:18:56.167

这在 WP7 中不支持，在 WP8 中支持，唯一的问题是我们必须使用 WASAPI 框架。

# c++ - 音频转换 (LAME) C++ WAV -> MP3

> ID：14056188
> 
> 赞同：2
> 
> 时间：2012-12-27T14:24:59.387
> 
> 标签：c++, mp3, wav, lame

下午好。抱歉，我的英语不太好。

几天来，我尝试将 WAV 转换为 MP3。为此，我使用 LAME。我可以通过命令提示符使用以下命令转换文件：

```
lame.exe-B128 - resample 8-mj \ "C: \ \ test.wav \" \ "C: \ \ test.mp3 \" 
```

但我不想通过命令行（为了跨操作系统的可移植性），但我不能在 C++ 中做到这一点（通过 LAME 库）。

这是我的代码：

```
int main()
{
//...
//...
// extraction of PCM audio data file .wav in file.pcm
short read, write;

FILE *pcm = fopen("file.pcm", "rb");
FILE *mp3 = fopen("file.mp3", "wb");

const int PCM_SIZE = 18424;
const int MP3_SIZE = 13424;

short int pcm_buffer[PCM_SIZE];
unsigned char mp3_buffer[MP3_SIZE];

lame_t lame = lame_init();

if ( lame == NULL ) {
    cout<<"Unable to initialize MP3"<<endl;
    return -1;
}

lame_set_num_channels(lame, 1);
lame_set_in_samplerate(lame, 8000);
lame_set_out_samplerate(lame, 8000);
lame_set_brate(lame, 128);
lame_set_mode(lame, MONO);
lame_set_quality(lame, 2);
lame_set_bWriteVbrTag(lame, 0);
if (( lame_init_params(lame)) < 0) {
    cout << "Unable to initialize MP3 parameters"<<endl;
    return -1;
}

do {
    read = fread(pcm_buffer,sizeof(short), PCM_SIZE, pcm);
    if (read == 0)
        write = lame_encode_flush(lame, mp3_buffer, MP3_SIZE);
    else
        write = lame_encode_buffer_interleaved(lame, pcm_buffer, read, mp3_buffer, MP3_SIZE);
    fwrite(mp3_buffer, write, 1, mp3);
} while (read != 0);

lame_close(lame);
fclose(mp3);
fclose(pcm);

return 0;
} 
```

我得到一个质量很差的 MP3 文件（并且持续时间比原始文件短）。

有什么想法可以解决这个问题吗？

这是我的信息。

```
Wav:
- Frequency= 8000
- BlocSize= 16
- Canal Nomber= 1 (mono)
- BytePerSec= 16000
- BytePerBloc= 2
- BitsPerSample= 16
- Bitrate= 128
- .wav size: 13466 (ie size of PCM: 13422) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-19T10:57:59.400

```
 @try
 {
int read, write;
FILE *pcm = fopen([cafFilePath cStringUsingEncoding:1], "rb");  //source
fseek(pcm, 4*1024, SEEK_CUR);                                   //skip file header

mp3 = fopen([mp3FilePath cStringUsingEncoding:1], "wb");  //output
const int PCM_SIZE = 8192*3;
const int MP3_SIZE = 8192*3;
short int pcm_buffer[PCM_SIZE*2];
unsigned char mp3_buffer[MP3_SIZE];

lame_t lame = lame_init();
lame_set_in_samplerate(lame, 11025*2);
lame_set_VBR(lame, vbr_default);
lame_init_params(lame);

int nTotalRead=0;

do {
    read = fread(pcm_buffer, 2*sizeof(short int), PCM_SIZE, pcm);

    nTotalRead+=read*4;

    if (read == 0)
        write = lame_encode_flush(lame, mp3_buffer, MP3_SIZE);
    else
        write = lame_encode_buffer_interleaved(lame,pcm_buffer, read, mp3_buffer, MP3_SIZE);
    // write = lame_encode_buffer(lame, pcm_buffer,pcm_buffer, read, mp3_buffer, MP3_SIZE);

    fwrite(mp3_buffer, write, 1, mp3);
} while (read != 0);

lame_close(lame);
fclose(mp3);
fclose(pcm);
}
@catch (NSException *exception)
{
    NSLog(@"%@",[exception description]);
} 
```

# android - 混合 Android 小部件新旧主题

> ID：14056191
> 
> 赞同：2
> 
> 时间：2012-12-27T14:25:05.220
> 
> 标签：android, themes, android-edittext, android-4.0-ice-cream-sandwich

我正在启动我的第二个 Android 应用程序，发现我想主要使用 HOLO 深色主题作为应用程序。

除了 EditTexts，我更喜欢使用带有圆角的旧 Gingerbread 样式（看起来更接近 iOS）。

我对如何实现这一目标有点迷茫。如果有人可以放弃一些将不胜感激的提示或链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:47:43.660

在您的主题中：

```
<style name="myTheme"  parent="android:Theme.Holo">
<item name="editTextStyle">@style/MyWidget.EditText</item>
</style>

<style name="MyWidget.EditText" parent="android:Widget.EditText">
        <item name="android:background">@drawable/edit_text</item>
</style> 
```

[现在您可以从Github](https://github.com/android/platform_frameworks_base/tree/gingerbread/core/res/res)（来自框架的 Gingerbread 分支）获取引用的可绘制对象

# cocoa-touch - cocoa-touch 如何在 UITextview 中找到选定文本到 NSString 中的文本

> ID：14056212
> 
> 赞同：0
> 
> 时间：2012-12-27T14:26:21.613
> 
> 标签：cocoa-touch, uitextview

如何在 NSString 中的 UITextview 中找到选定的文本

```
//Declare 

NSString* myText = @"This is the first row and This is the second row";
myUITextview.text = myText;
// we have the same results in here "This is the" and "row"

//Then check it when text in UITextview is selected
- (void)textViewDidChangeSelection:(UITextView *)textView
{
   NSString *selectedText = [textView.text substringWithRange:[textView selectedRange]];
   //selectedText "This is" from the second not from the first
} 
```

有没有办法承认这一点？相比？检查范围还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:31:06.907

为了在 UITextView 中所选文本之前和之后添加文本，您应该这样做：

```
NSString *fullText = textView.text;
NSRange selectedRange = [textView selectedRange];
NSString *selectedText = [fullText substringWithRange:selectedRange];

NSString *addBeforeSel = @"abc";
NSString *addAfterSel = @"def";

NSString *replace = [NSString stringWithFormat:@"%@%@%@", addBeforeSel, selectedText, addAfterSel];

NSString *result = [fullText stringByReplacingCharactersInRange:selectedRange withString:replace]; 
```

# java - Caps Lock 键冻结 JavaFX 应用程序线程

> ID：14056214
> 
> 赞同：1
> 
> 时间：2012-12-27T14:26:28.743
> 
> 标签：java, ubuntu, javafx-2, javafx, ubuntu-12.04

当我运行任何 JavaFX 代码（甚至是 hello world [http://docs.oracle.com/javafx/2/get_started/hello_world.htm](http://docs.oracle.com/javafx/2/get_started/hello_world.htm)）并按下大写锁定键时，应用程序会冻结，直到我关闭大写锁定。

我在 Kubuntu 12.04 中运行 JavaFX，可能是 kubuntu 的错误，我没有机会尝试其他操作系统。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:42:37.233

显然，该错误已在 2.2.6 版[http://javafx-jira.kenai.com/browse/RT-27502上修复](http://javafx-jira.kenai.com/browse/RT-27502)

# excel - 使用 Outlook vba 更新现有的 excel 文件

> ID：14056216
> 
> 赞同：1
> 
> 时间：2012-12-27T14:26:38.493
> 
> 标签：excel, vba, outlook

我正在尝试自己学习 VBA，我试图获取电子邮件的正文，将其解析出来，然后仅将数组的一个元素保存到 Excel 文件中。我就是这样做的，我的问题是我似乎无法让它更新文件中已有的内容。它只是用新的电子邮件信息重写并保存它。我对你的问题是：我的代码需要什么才能继续写入我的 excel 文件而不摆脱已经存在的内容。

```
Sub FMK(Item As Outlook.MailItem)

Const PathName = "C:\Users\carter\Desktop\fmk.xlsx"

Dim arrLines As Variant, _
varLines As Variant, _
RowNext As Integer, _
xlApp As Excel.Application, _
ExcelWkBk As Excel.Workbook, _
excWkb As Object, _
excWks As Object, _
temp As String

arrLines = Split(Item.Body, vbCrLf)

Set xlApp = Application.CreateObject("Excel.Application")
Set excWkb = xlApp.Workbooks.Add()
Set excWks = excWkb.ActiveSheet
temp = Trim(arrLines(32))

RowNext = 1
With excWks
    excWks.Cells(RowNext, 1) = temp
End With
RowNext = RowNext + 1

excWkb.SaveAs PathName
excWkb.Close

'this is just for testing purposes  I will remove later 
MsgBox (arrLines(32))
End Sub 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:47:38.670

您将需要识别最后使用的行并将新数据放在其后。就像是：-

```
RowNext = excWks.Cells.SpecialCells(xlCellTypeLastCell).Row + 1
with excWks
... 
```

（并且您可能希望将 RowNext 设为 Long 而不是 Integer）

xlCellTypeLastCell 可能不可靠，因为它仅在保存文件时才重置 - 也许这足以满足您的需求。如果没有，请参阅[OzGrid](http://www.ozgrid.com/VBA/ExcelRanges.htm)以获取其他建议。

# php - 正则表达式爆炸sql查询

> ID：14056217
> 
> 赞同：2
> 
> 时间：2012-12-27T14:26:40.287
> 
> 标签：php, regex

我整天都在寻找和寻找解决我的问题的方法，但找不到任何适合我的问题的方法。我有一个需要通过正则表达式“分解”的查询。我想在 where 条件（不检查本身）之后获取选定的字段、表格和字段。

```
SELECT `a`, `b`, `c` FROM `d` WHERE `e` > 1 OR `d` > 1 
```

我的尝试如下所示：

```
/SELECT (?<selectedFields>(,*?)\`(.*?)\`) FROM (?<tableName>\`(.*?)\`) WHERE (?<checkFields>\`(.*?)\`)/ 
```

我遇到的问题是正则表达式在 where 条件的第一个字段之后停止。我得到的输出如下所示。

```
Array
(
[0] => Array
    (
        [0] => SELECT `a`, `b`, `c` FROM `d` WHERE `e`
    )

[selectedFields] => Array
    (
        [0] => `a`, `b`, `c`
    )

[1] => Array
    (
        [0] => `a`, `b`, `c`
    )

[2] => Array
    (
        [0] => 
    )

[3] => Array
    (
        [0] => a`, `b`, `c
    )

[tableName] => Array
    (
        [0] => `d`
    )

[4] => Array
    (
        [0] => `d`
    )

[5] => Array
    (
        [0] => d
    )

[checkFields] => Array
    (
        [0] => `e`
    )

[6] => Array
    (
        [0] => `e`
    )

[7] => Array
    (
        [0] => e
    )

) 
```

我需要在我得到所选字段的同一类型的数组中的“checkFields”。我究竟做错了什么？第二件事是正则表达式中的 selectFields 不是预期的每个字段名的数组，它由'，'分隔......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:34:00.270

您不应该使用正则表达式解析 sql 查询，因为使用正则表达式解析 sql 查询与使用正则表达式解析 html 非常相似。[这个答案](https://stackoverflow.com/a/1732454/1283847)清楚地说明了为什么你不应该这样做。

你最好使用一些解析器（例如[这个](http://code.google.com/p/php-sql-parser/)）。

小样本：

```
$sql = 'SELECT `a`, `b`, `c` FROM `d` WHERE `e` > 1 OR `d` > 1';
$sqlParser = new PHPSQLParser($sql);
echo '<pre>';
print_r($sqlParser->parsed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:32:29.723

使用 REGEX，您不会走得太远。考虑所有可能的 SQL 查询：

```
SELECT * FROM tbl1 JOIN tbl2 
SELECT field as field2 FROM table1 as alias
etc 
```

为此，您需要一个解析器。试试：[http ://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)

此外，我什至建议您根本不要解析 SQL，数据库中内置的 SQL 解析器非常复杂，模仿它们的行为并不容易。

如果您需要这样的行为，您可以创建一个简单的类来执行相反的操作（构建您的 SQL），例如：

```
$s = new SQL();
$s->setFrom('table');
$s->addCondition('condition1','value1');
$s->select('*');  //> outputs SELECT * FROM table WHERE condition1 = 'value1' 
```

所以你可以有一个方法来检索所有部分：

```
$s->getConditions();
$s->getSelect(); 
```

# c# - 在 C# 中使用数组实现通用堆栈

> ID：14056224
> 
> 赞同：5
> 
> 时间：2012-12-27T14:27:11.363
> 
> 标签：c#, generics, stack

我正在使用数组实现一个通用堆栈。但我得到错误：

**无法将带有 [] 的索引应用于“T”类型的表达式**

在线上：

```
 data[SP] = data; 
```

如何解决这个问题？我也检查了这个链接：

[无法将索引应用于“T”类型的表达式](https://stackoverflow.com/questions/7143474/cannot-apply-indexing-to-an-expression-of-type-t)

我也应该在我的情况下实施相同的修复吗？还是有其他最好的选择？

这是我的代码：

```
public class MyStack<T> 
{
    private T[] data { get; set; }
    private int SP { get; set; }
    private int Capacity { get; set; }
    public MyStack(int capacity)
    {
        this.Capacity = capacity;
        data = new T[Capacity];
        SP = -1;
        // it works here, dont know why??? ;)
        data[0] = default(T);
    }
    public void Push(T data)
    {
        ++SP;
        if(SP>=Capacity) growArray();
        // This is where i get error.
        data[SP] = data;
    }
    public T Pop()
    {
        if (SP < 0) throw new InvalidOperationException();
        T value = data[SP];
        data[SP] = default(T);
        SP--;
        return value;
    }
    public T Peak()
    {
        if (SP < 0) throw new InvalidOperationException();
        return data[SP];
    }
    private void growArray()
    {
        throw new NotImplementedException();
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:32:22.490

这是一个范围问题，在行中

```
data[SP] = data; 
```

`data``data`在这两种情况下都指的是类型为 的本地参数，`T`而不是`T[]`，因此是错误。您可以使用以下方法重命名局部变量或显式引用成员变量`this`：

```
this.data[SP] = data; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T14:35:07.577

我怀疑您在考虑形式参数时希望*指的是形式参数，而当您考虑*该`data`领域时，*您*希望指的是形式参数。C# 编译器无法读懂你的想法；在这种情况下，将始终表示形式参数，它不是数组。`data``this.data`*`data`*

 *而不是“数据”，将数组命名为“值”，并将被推送的值命名为“值”。

此外，使用私有自动属性而不是私有字段是合法但不寻常的。你这样做有什么原因吗？大多数人只对公共、受保护或内部属性使用自动属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T14:29:58.840

您应该将方法 (Push) 中的参数“数据”重命名为另一个名称。

```
 public void Push(T d)
        {
         .
         .
         data[SP] = d;
         .
         . 
```

如果存在同名的字段和参数，则参数更强，或者可以使用'this'关键字并将此行更改为：

```
 this.data[SP] = data; 
```

顺便说一句，您可以使用[`Stack<T>`.net 现成的课程](http://msdn.microsoft.com/en-us/library/3278tedw.aspx)，除非您出于教育原因而实施！

[这是.net现成的代码`Stack<T>`](http://typedescriptor.net/browse/types/12824-System.Collections.Generic.Stack%601)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T14:32:43.943

你有一个参数`Push()`被调用`data`。编译器更喜欢使用范围更窄的变量，而不是名为`data`. 因为参数是 a`T`而不是`T[]`，所以您不能使用索引器访问它。

解决方案是简单地重命名该参数，或使用`this.data`. 我强烈建议重命名参数。*

# python - 检查多个文件中的单词，如果相同则用空格替换

> ID：14056226
> 
> 赞同：0
> 
> 时间：2012-12-27T14:27:15.487
> 
> 标签：python

在 test01.txt

```
are
lol
test
hello
next 
```

在 text02.txt

```
lol : positive
next : objective
sunday! : objective
are : objective
you : objective
going? : neutral
mail : objective 
```

我的代码：

```
file1 = open('C://Users/Desktop/test01.txt')
file2 = open('C://Users/Desktop/test02.txt')

rfile1 = file1.readlines()
rfile2 = file2.read()

for test2 in rfile2.split("\n"):
    testt2 = test2.split("\t")
    for test1 in rfile1:
        slsw1 = test1.split()
        for wttest2 in testt2:
            sttestt2 = wttest2.split(" ")
        if sttestt2[0] in slsw1[0]:
            sttestt2[0] = sttestt2[0].replace(sttestt2[0], "")
            print sttestt2[0], ":", sttestt2[2] 
```

预期成绩：

```
 : positive
 : objective
sunday! : objective
 : objective
you : objective
going? : neutral
mail : objective 
```

我正在尝试用空格替换“test02.txt”中的相同单词并打印出来以查看结果，但我只打印出空格。我想按预期结果打印所有结果。

我错过了什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:36:59.440

```
# Open test02.txt in read mode
with open("C:/Users/Desktop/test02.txt", "r") as infile:
    # Read the content of the file
    content = infile.read()

# Open test01.txt in read mode
with open("C:/Users/Desktop/test01.txt", "r") as infile:
    # Loop through every line in the file
    for line in file:
        # Get the word from the line
        word = line.strip()
        # Replace "word :" with " :" from test02.txt content
        content.replace("%s :"%word, " :")

# Open test02.txt in write mode
with open("C:/Users/Desktop/test02.txt", "w") as outfile:
    # Write the new, replaced content
    outfile.write(content) 
```

此外，您应该真正考虑学习一些更好的命名方法。`rfile`真的什么都没说，除了它与文件有关。我宁愿使用`file_content`左右`file_lines`。

还有：`test2, testt2, test1, slsw1, wttest2, sttestt2`……什么？

尝试命名您的变量，以便名称说明变量的用途，这对您自己和我们来说都会容易得多。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:38:55.290

```
#Create a set of all the records from the first file
lookup = set(open("test01.txt").read().splitlines())
#and then open the second file for reading and a new out file
#for writing
with open("test02.txt") as fin, open("test02.out","w") as fout:
    #iterate through each line in the file
    for line in fin:
        #and split it with the seperator
        line  = map(str.strip, line.split(":"))
        #if the key is in the lookup set 
        if line[0] in lookup:
            #replace it with space
            line[0] = " "
        #and then join the line tuple and suffix with newline
        line = ":".join(line) + "\n"
        #finally write the resultant line to the out file
        fout.write(line) 
```

# android - 动态加载图像到列表视图

> ID：14056228
> 
> 赞同：0
> 
> 时间：2012-12-27T14:27:21.553
> 
> 标签：android, android-listview, android-scroll

我有 4 组联系人（类型 1、2、3、无）。我想为 Type1、2、3 加载不同的图像 3，如果联系人属于无，那么列表视图不应包含任何图像。这是我的代码

```
@Override       
public View getView(int position, View convertView,
ViewGroup parent) {             
// return super.getView(position, convertView, parent);

        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) ContactsListActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.contacts_list_row_view, null);
        }

        try {
            contactsData = (ContactsItem) getItem(position);
        } catch (Exception e) {

        }

        if (null != contactsData){
            final CheckBox contactsSelectedCheck = (CheckBox) v.findViewById(R.id.contact_selected_check);
            TextView contactNameText = (TextView) v.findViewById(R.id.contact_name_text);
            TextView contactNumberText = (TextView) v.findViewById(R.id.contact_number_text);
            ImageView contactImage = (ImageView) v.findViewById(R.id.contact_image);

            contactNameText.setText(contactsData.getContactName());
            contactNumberText.setText(contactsData.getContactNumber());             

            if(contactNameText != null && contactNumberText != null){
            if(contactsData.getContactProfileType() == DBConstants.TYPE_1){                 contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_1));
            } else if(contactsData.getContactProfileType() == DBConstants.TYPE_2){                  contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_2));
            } else if(contactsData.getContactProfileType() == DBConstants.TYPE_3){                  contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_3));
            }else{

            }
            }

            if (selectedContactsTable.containsKey(contactsData.getContactNumber())) {
                contactsSelectedCheck.setChecked(true);             
            } else {
                contactsSelectedCheck.setChecked(false);                
            }

            contactsSelectedCheck.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    if (contactsSelectedCheck.isChecked()) {
                        LinearLayout r_layout = (LinearLayout) v.getParent();
                        TextView contactName = (TextView) r_layout.getChildAt(1);
                        TextView contactNumber = (TextView) r_layout.getChildAt(2);
                        selectedContactsTable.put(contactNumber.getText().toString(), contactName.getText().toString());
                    }else{
                        LinearLayout r_layout = (LinearLayout) v.getParent();
                        TextView contactNumber = (TextView) r_layout.getChildAt(2);
                        selectedContactsTable.remove(contactNumber.getText().toString());
                    }
                }
            });

        }
        return v;
    }
} 
```

问题是如果我将一些联系人分配给类型 1 对应的图像，这种类型加载正确，但是当我滚动列表时，相同的图像也会加载到一些未分配的图像，我的代码有什么问题，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:50:08.100

尝试为您的观点创建一个持有者类。然后在 if(v==null) 块中，您可以使用 setTag() 并在 else 块中使用 getTag() 。这是一些代码。

```
public static class ViewHolder {
    TextView contactNameText;
    TextView contactNumberText;
    ImageView contactImage;
} 
```

这是一个包含您的视图的持有者类。getView() 方法的第一部分应如下所示：

```
View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) ContactsListActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.contacts_list_row_view, null);
        holder = new ViewHolder();
        holder.contactNameText = (TextView) v.findViewById(R.id.contact_name_text);
        holder.contactNumberText = (TextView) v.findViewById(R.id.contact_number_text);
        holder.contactImage = (ImageView) v.findViewById(R.id.contact_image);
        v.setTag(holder);
    }
    else{
        holder = (ViewHolder) v.getTag();
    }

    try {
        contactsData = (ContactsItem) getItem(position);
    } catch (Exception e) {

    }

    if (null != contactsData){
        final CheckBox contactsSelectedCheck = (CheckBox) v.findViewById(R.id.contact_selected_check);
        holder.contactNameText.setText(contactsData.getContactName());
        holder.contactNumberText.setText(contactsData.getContactNumber());             

        if(contactNameText != null && contactNumberText != null){
        if(contactsData.getContactProfileType() == DBConstants.TYPE_1){                 holder.contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_1));
        } else if(contactsData.getContactProfileType() == DBConstants.TYPE_2){                  holder.contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_2));
        } else if(contactsData.getContactProfileType() == DBConstants.TYPE_3){                  holder.contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_3));
        }else{

        }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:59:10.907

做另一个问题建议的班级持有人。并为您创建的每个适配器制作支架。

要回答您的问题，请尝试以下编辑：

```
 contactImage.setVisibility(View.Visible);
       if(contactsData.getContactProfileType() == DBConstants.TYPE_1){                 contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_1));
        } else if(contactsData.getContactProfileType() == DBConstants.TYPE_2){                  contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_2));
        } else if(contactsData.getContactProfileType() == DBConstants.TYPE_3){                  contactImage.setImageDrawable(getResources().getDrawable(R.drawable.icon_3));
        }else{
            contactImage.setVisibility(View.GONE);
        } 
```

# javascript - 禁用 div 点击事件

> ID：14056229
> 
> 赞同：0
> 
> 时间：2012-12-27T14:27:25.873
> 
> 标签：javascript, jquery, html

我有`<div>`宽度和高度属性。我想把`<div>`它放过去，这样第一个的点击事件`<div>`就不会再注册了。

例如，我有 div 并且当我单击它时发生了一些事情，但是当我将第二个`<div>`放在第一个上时，单击第一个`<div>`区域现在将不再触发该单击事件。

```
<div id="firstDiv" style="width:100px; height:100px">bla bla</div> 
```

如何将另一个`<div>`放在“firstDiv”上，这样我将无法更改其元素？是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:30:50.400

只是为了禁用一个 div 的点击事件不要在它上面放置额外的 div 只是使用`on()`和`off()`来自 jQuery

**详细信息：** [开](http://api.jquery.com/on/)、[关](http://api.jquery.com/off/)

**仍然如果您想将一个 div 放在另一个上，请尝试使用[css 定位](http://www.w3schools.com/css/css_positioning.asp)和[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:38:32.753

我已经看到它完成并自己完成的一个好方法是使用模态“掩码”覆盖。

覆盖整个页面的灰色透明蒙版，您正在与之交互的元素除外，例如。模态弹出窗口。

你可以在弹出窗口中做一个迷你版，然后用 CSS z-index 将三个非活动 div 推到它后面。

另一种方法是使用[jQuery BlockUI 插件](http://jquery.malsup.com/block/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T15:40:12.860

我个人喜欢使用这样的东西

```
pointer-events:none; 
```

禁用点击事件

# c - 如何获取 UTF-8 字符的值

> ID：14056230
> 
> 赞同：5
> 
> 时间：2012-12-27T14:27:29.447
> 
> 标签：c, utf-8

我有一个中文或阿拉伯文的 utf-8 字符。我需要获取该 UTF-8 字符的值，例如获取 ASCII 字符的值。我需要在“C”中实现它。你能提供你的建议吗？

例如：

```
char array[3] = "ab";
int v1,v2;

v1 = array[0];
v2 = array[1]; 
```

在上面的代码中，我将在 v1 和 v2 中得到相应的 ASCII 值。以与 UF8 字符串相同的方式，我需要获取字符串中每个字符的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:39:16.760

只有 C 语言的 C11 标准版本提供 UTF-8 支持，因此根据您所针对的标准，您可以使用 C11 功能 ( `<uchar.h>`) 或依赖 UTF 库，例如[ICU](http://site.icu-project.org/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T14:40:28.373

没有 UTF-8 字符这样的东西。有 Unicode 字符，也有 Unicode 字符的编码，例如 UTF-8。

您可能想要的是将几个字节（以 UTF-8 编码并表示单个 Unicode 字符）解码为 Unicode 代码点。

网上有很多这方面的 C 源代码。只是谷歌[UTF-8 解码 C](https://www.google.ch/search?q=utf-8+decoding+c)。

**更新：**

您显然要寻找的不仅仅是一个字符的 UTF-8 解码，即将字节数组（UTF-8 解码文本）解码为整数数组（Unicode 代码点）的函数。

答案保持不变：使用谷歌。那里有很多 C 代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-27T15:42:43.990

C 和 C++ 模型是编码与语言环境相关联，因此使用该模型的代码适用于语言环境的编码，无论它是什么。

如果您的语言环境使用 UTF8 进行窄编码。请参阅`mbtowc()`、、和`mbrtowc()`，它们应该非常易于使用。`mbstowcs``mbsrtocws()`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-27T15:58:23.530

[使用 icu，您可以使用U8_NEXT](http://www.icu-project.org/apiref/icu4c/utf8_8h.html#a57f3e5429ae4edb27a42367c627aa482)跳过 utf8 字符

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>
#include <unicode/utf.h>
#include <unicode/ustring.h>

int main(int argc, char **argv)
{
    const char s[] = "日本語";

    UChar32 c;
    int32_t k;
    int32_t len = strlen(s);

    for (k = 0; k < len;) {
        U8_NEXT(s, k, len, c);
        printf("%d - %x\n", k, c);
    }

    return 0;

} 
```

编译`gcc utf.c -o utf $(icu-config --ldflags --ldflags-icuio)`

这里的索引表示第 th 个字符`k`编码的起始偏移量。`j`并`c`包含字符的 unicode 值（32 位）。

# javascript - 如何一键打开多个外部 URL 但不会被浏览器弹出窗口阻止程序阻止？

> ID：14056231
> 
> 赞同：3
> 
> 时间：2012-12-27T14:27:31.117
> 
> 标签：javascript, jquery, asp.net

如何一键打开多个外部 URL 但不会被浏览器弹出窗口阻止程序阻止？[特别是铬]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:43:13.027

为具有多个用于在新窗口/选项卡中打开链接的`onclick`任何锚标记编写事件。`windows.open`

```
<a href="http://bloggersentral.blogspot.com/" target="_blank" onclick="window.open(&quot;http://www.tourism.gov.my/&quot;); window.open(&quot;http://www.tic.kelantan.gov.my/&quot;);">This anchor opens three links in a single click</a> 
```

上面的锚点将打开三个链接单击。你可以写多个`window.open`相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:34:32.727

使用 onclick ，您可以在其中编写多个 window.open ，并在单个 onclick 中打开指定的相应网址.....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:29:55.977

```
<a href="http://bloggersentral.blogspot.com/" target="_blank" 
 onclick="window.open(&quot;http://www.tourism.gov.my/&quot;); 
 window.open(&quot;http://www.tic.kelantan.gov.my/&quot;);">This anchor opens three links in a single click</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:31:30.900

如果存在弹出窗口阻止程序，则无法在新窗口中打开它们。但是，您可以定位 iFrame

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T14:37:56.147

如果我需要这个，我会打开几个内部页面，每个页面都只包含带有目标站点的 iframe。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-28T01:29:31.687

首先，您需要取消阻止浏览器的弹出窗口并且代码可以工作。

> chrome://settings/contentExceptions#popups

[![Chrome浏览器设置](../Images/8ad5dd1ac6ba5224754a4e89c9910cc9.png)](https://i.stack.imgur.com/6qLEq.png)

# android - 多边形不是没有填充android mapview

> ID：14056233
> 
> 赞同：1
> 
> 时间：2012-12-27T14:27:34.703
> 
> 标签：android, google-maps, canvas, fill, polygons

我正在尝试在我的应用程序的地图视图上绘制一个填充的多边形。无论我尝试过什么，它都不会被填充。我可以让笔触显示出来，但我不能让它填充。下面是我的多边形类的绘制方法。它覆盖覆盖。

```
public void draw(Canvas canvas, MapView mapv, boolean shadow) {
            super.draw(canvas, mapv, shadow);

            Paint mPaint = new Paint();

            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setColor(Color.BLACK);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(6);

            Paint mPaintFill = new Paint();

            mPaintFill.setStyle(Paint.Style.FILL);
            mPaintFill.setColor(Color.GREEN);

            Path path = new Path();

            GeoPoint start = route.get(0);
            for (int i = 1; i < route.size(); ++i) {
                    Point p1 = new Point();
                    Point p2 = new Point();

                    Projection projection = mapv.getProjection();
                    projection.toPixels(start, p1);
                    projection.toPixels(route.get(i), p2);

                    path.moveTo(p2.x, p2.y);
                    path.lineTo(p1.x, p1.y);

                    start = route.get(i);
            }              

            canvas.drawPath(path, mPaint);
            canvas.drawPath(path, mPaintFill);
            //canvas.clipPath(path, Op.DIFFERENCE); 
    } 
```

上面的代码对我来说将正确绘制线条，但它没有被填充。删除 canvas.drawPath(path, mPaint); 并且只留下填充一个会导致地图上不显示任何内容。我什至尝试将 Paint.Style.STROKE 设置为 Paint.Style.FILL_AND_STROKE。我完全不知所措，此时我认为这很简单，我在看。

# html - 哪个更适合标记属性/值对中的属性：还是字体粗体：粗体？

> ID：14056234
> 
> 赞同：2
> 
> 时间：2012-12-27T14:27:35.733
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T14:32:12.793

而不是`<span>`，使用[定义列表](http://www.w3.org/TR/html401/struct/lists.html#h-10.3)！

然后，如果它们还没有，您可以设置`<dt>`s 的样式。`font-weight: bold`

这是它的使用示例（感谢发布它的其他人！）：

```
<dl>
    <dt>Setting</dt>
    <dd>Suburban</dd>
</dl> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T14:32:36.283

如果要标记属性/值对列表，则可能需要考虑使用[`<dl>`标记](http://www.w3.org/TR/2011/WD-html5-author-20110809/the-dl-element.html#the-dl-element)：

```
<dl>
    <dt>Setting:</dt>
    <dd>Suburban</dd>
</dl> 
```

这实际上表明“设置：”是“郊区”的标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T14:33:41.133

我会说这两个选项在语义上都很糟糕，因为您的标记存在问题。听起来您需要的是一个`dl`标签，而不是一个`ul`或`ol`，因为您在这里有一个名称 - 值对列表。

```
<dl>
  <dt>Setting:</dt>
  <dd>Suburban</dd>
</dl> 
```

Good description on the `dl` can be found here - [http://html5doctor.com/the-dl-element/](http://html5doctor.com/the-dl-element/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:33:40.967

这完全取决于您的喜好。看到`<strong>`并`font-weight:bold`最终在视觉上做几乎相同的事情（除非你明确指定 css 为强）。

当您尝试创建语义正确且更具可读性的标记时，差异就会显现出来。

有了`<strong>`你将不得不少写一点，我认为标记将更具可读性。

# ipad - 使用 jfree 图像的 jQuery 触摸事件滚动

> ID：14056237
> 
> 赞同：0
> 
> 时间：2012-12-27T14:27:41.770
> 
> 标签：ipad, jquery-mobile, touch, jfreechart

我有一个使用 ipad 的 jfree 图表绘制的图表。图表图像显示在一个 div 中。我必须为图表实现滚动功能。
在滚动：

*   新图表将在服务器端生成并显示。

我正在使用向左滑动和向右滑动来执行此操作。
我无法实现触摸和滚动。
如图所示。我尝试使用 touchstart 和 touch move 但滑动事件不起作用。
有没有办法做到这一点？

![在此处输入图像描述](../Images/42eb73290268b099cb3adf61b4dcd483.png)

在图像中触摸并向左滚动。我应该能够识别与向左滑动和向右滑动不同的触摸和滚动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:51:30.057

我没有工作示例，但面临类似问题。一个可能的解决方案可能是 iScrollview（JQM 的 iScroll）[https://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)。

另请参阅 PINCH/ZOOM：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

```
iScroll - Example: http://cubiq.org/dropbox/iscroll4/examples/zoom/ 
```

**让我知道它是否有效。**

# python - Python 秩和元组

> ID：14056238
> 
> 赞同：0
> 
> 时间：2012-12-27T14:27:47.607
> 
> 标签：python, tuples, rank

我想做的是从配置文件中读取列表：

```
import re
from configobj import ConfigObj
config = ConfigObj('food.conf')
meal_list = config['MainConfig']['MealList'] 
```

配置中的`MealList`部分看起来像`Turkey|Hamburger|Chicken`等等。

之后，我需要通过以下方式运行它们：

```
for meal in meal_list:
    if re.search( config[meal][ingredients]['Allowlist'], badingredients, re.M|re.I): 
```

我的第一个问题来了。我如何正确加入他们？因为在这`for`部分之后，我将它们传递给 rank 函数。那么如何将“允许的”加入到元组中呢？等级也在配置文件中定义。

```
meal_allowed = ('Hamburger', 2),('Chicken', 3),('Turkey', 4)

food = sorted(meal_allowed, key=lambda student: student[1])
food_to_eat = str(food).translate(None, "-[]()'0123456789").replace(" ",      "").replace(",,",",")
print food_to_eat 
```

所以简而言之，我如何使用 .join() 然后将其转换为元组？

### 编辑

我正在寻找的另一个例子。

```
meals = 'hamburger', 'Turkey', 'Chicken'
for meal in meals:
 rank = config[meal][rank]
 if re.search( config[meal][ingredients]['Allowlist'], badingredients, re.M|re.I):
  eatable = meal + meal + rank 
```

可食用的应该是 ('Hamburger', 2),('Chicken', 3),('Turkey', 4) 格式。否则我无法排名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:45:58.617

这是你想要的吗？

```
meal_allowed = tuple(('Hamburger', 2), ('Chicken', 3), ('Turkey', 4)) 
```

**编辑：**

对于每个`meal`：

```
meals = ['hamburger', 'Turkey', 'Chicken']
for meal in meals:
    rank = config[meal][rank] 
```

你必须定义什么是`rank`变量`rank = config[meal][rank]`。在此之后，您可以构建一个元组列表，例如：

```
eatable = list()
meals = ['hamburger', 'Turkey', 'Chicken']
for meal in meals:
    rank = config[meal][rank]
    if re.search( config[meal][ingredients]['Allowlist'], badingredients, re.M|re.I):
        eatable.append((meal, rank))

print eatable 
```

无论如何，您不应该说“可食用”而不是“可食用”吗？或者他们都是对的？^^

# android - 使用 Timer 类延迟画布更新

> ID：14056240
> 
> 赞同：3
> 
> 时间：2012-12-27T14:27:54.400
> 
> 标签：android, android-canvas, android-view

我创建了一个视图类型类，在其中我正在绘制一些框的 onDraw() 方法。我没有成功的是，我想在 3-5 秒后消失这些框。为此，我正在使用计时器和 timerTask。在 TimerTask 中，我重写了将 Paint 对象的颜色更改为白色的方法 run()。背景颜色也是白色的，所以它会产生删除框的效果。你们能帮帮我吗？？

```
 public class PlayView extends View
{
private float width,height;
private int touchatX, touchatY;
private boolean isanyBox, clearCanvas;
private Point  points[];
private Paint  box;
Timer timer;
TimerTask task;

  //  Set the number of points to be generated so we print that number of boxes on the board
public void nPoints(int n)
{
    points = new Point[n];
    box = new Paint();
    box.setColor(Color.BLUE);
}

public void init()
{
        isanyBox = false;
        clearCanvas = true;
        timer = new Timer();
        task = new TimerTask()
        {
            @Override
            public void run()
            {
                box.setColor(Color.WHITE);
            }
        };
}

      @Override
     protected void onSizeChanged(int w, int h, int oldw, int oldh) 
 {
// TODO Auto-generated method stub

   width = w/6f;
   height = h/6f;

   Log.d("playview", getWidth()+" "+getHeight());
    super.onSizeChanged(w, h, oldw, oldh);
}

public PlayView(Context context)
   {
       super(context);
       setFocusable(true);
       setFocusableInTouchMode(true);
       init();
   }

// Randomly generate the points and draw boxes on these points
public void generatePoints(int np)
{
    Time sec = new Time();

    Random random_Xpoints = new Random();
    Random random_Ypoints = new Random();

    random_Xpoints.setSeed(sec.second);
    random_Ypoints.setSeed(sec.second);
    nPoints(np); // set the number of points to be generated

    for(int i=0; i<np; i++)
    {
        points[i] = new Point();

        points[i].setX( ((random_Xpoints.nextInt(getWidth())/(int)width)*(int)width));
        points[i].setY( ((random_Ypoints.nextInt(getHeight())/(int)height)*(int)height));

        Log.d("Point "+1, points[i].getX()+" "+points[i].getY());
    }
}

     @Override
    public boolean onTouchEvent(MotionEvent event) 
     {
      // TODO Auto-generated method stub

   invalidate();
   isanyBox = true;
   touchatX = (int) ((int) (event.getX()/width)*width);
   touchatY = (int) ((int) (event.getY()/height)*height);
   Log.d("onTouchEvent", event.getX()+" "+event.getY()+" "+touchatX+" "+touchatY);
      invalidate(); 
    return super.onTouchEvent(event);
}

    public void onDraw(Canvas canvas)
  {
   Paint lineColor = new Paint();
   lineColor.setColor(Color.BLACK);

   //Box property
   Paint boxColor = new Paint();
   boxColor.setColor(Color.BLUE);

   //Draw horizontal lines
   for(int i=0; i<6; i++)
   {
      canvas.drawLine(0, i*height, getWidth(), i*height, lineColor);
   }

   //Draw vertical lines
   for(int j=0; j<6; j++)
   {
       canvas.drawLine(j*width, 0, j*width, getHeight(), lineColor);
   }

   if(isanyBox)
   {
   canvas.drawRect(touchatX+2, touchatY+2, touchatX+width-1, touchatY+height-2, boxColor);
   }

       generatePoints(5);
       for(int j=0; j<5; j++)
       {
           canvas.drawRect(points[j].getX()+2, points[j].getY()+2, points[j].getX()+width-1, points[j].getY()+height-2, box);
           Log.d("BoxColor", ""+box);
       }

       if(clearCanvas)
       {

           timer.schedule(task, 3000);
           clearCanvas = false;
           invalidate();
       }

   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:26:34.173

`invalidate();`更改颜色后调用。这将强制系统`onDraw()`再次调用。

```
 @Override
        public void run()
        {
            box.setColor(Color.WHITE);
            invalidate();
        } 
```

**编辑：**

我从不喜欢计时器，现在我现在为什么，这就是为什么并且出于某种原因，Android 团队建议人们不要使用它们，因为它可以在这里阅读：http: [//developer.android.com/reference/java/util /定时器.html](http://developer.android.com/reference/java/util/Timer.html)

因为你在一个扩展视图的类上，你应该调用`postDelayed();`

```
 if(clearCanvas)
   {
       clearCanvas = false;
       postDelayed(new Runnable{
        @Override
        public void run(){
            box.setColor(Color.WHITE);
            invalidate();
        }
       }, 3000);
   } 
```

# iphone - 无法打开 UIImagePickerController

> ID：14056243
> 
> 赞同：0
> 
> 时间：2012-12-27T14:27:58.633
> 
> 标签：iphone, ios6

我在按钮操作功能中使用此代码：

```
picker = [[UIImagePickerController alloc] init];
picker.delegate = self;
picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
picker.allowsEditing = NO;
picker.wantsFullScreenLayout = YES;
[self presentViewController:picker animated:YES completion:nil]; 
```

我也在执行委托。`UIImagePickerControllerDelegate`

但它会崩溃 `[self presentViewController:picker animated:YES completion:nil];`

有人可以帮我解决我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:05:37.430

这适用于 IOS 6。这些委托方法仅在 IOS 6 中受支持。我得到了自己问题的答案。我的应用程序仅针对横向模式开发。所以 imagePickerView 无法展示自己，因为它的默认方向是横向。所以我让我的应用程序支持横向和纵向模式。在应用程序委托中，我使用了该方法，

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    return UIInterfaceOrientationMaskAll;
else  /* iphone */
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

在 rootViewController 中，我使用以下委托强制 viewController 处于横向模式并保持横向模式。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    return YES;
else
    return NO;
}
- (BOOL)shouldAutorotate
{
return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscapeRight;
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
return UIInterfaceOrientationLandscapeRight;

} 
```

它奏效了。

# android - 向按钮显示一组值

> ID：14056245
> 
> 赞同：1
> 
> 时间：2012-12-27T14:28:25.953
> 
> 标签：android, arrays, button

我有一个包含 12 个值的数组，我想一个接一个地显示它。最初在应用程序运行时，我显示 6 个值。在按钮上单击我想一一显示其他 6 个值。

```
prevbutton-> value1 value2 value3 value4 value5 value6 -> nextbutton 
```

所以在下一个按钮点击它应该是这样的。

```
prevbutton-> value2 value3 value4 value5 value6 value7 -> nextbutton 
```

这应该持续到 12 个值，并且在**prevbutton 的情况下应该发生相反的情况。**

我已经使用了这段代码，但它不起作用：

```
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.radionextstn:
        forwardtune();
        break;
    }
}

public void forwardtune(){
    Button[] buttons = new Button[5];
    buttons[0] = (Button)findViewById(R.id.radiostation1);
    buttons[1] = (Button)findViewById(R.id.radiostation2);
    buttons[2] = (Button)findViewById(R.id.radiostation3);
    buttons[3] = (Button)findViewById(R.id.radiostation4);
    buttons[4] = (Button)findViewById(R.id.radiostation5);
    buttons[5] = (Button)findViewById(R.id.radiostation6);
    if(currentlyDisplayingFromPosition + 6 >= arraySize)
        return;
    for(int i=0; i<arraySize; i++) {
        buttons[i].setText("");
    }
    for(int i=currentlyDisplayingFromPosition; i<=currentlyDisplayingFromPosition+6; i++){
        if (frequency[i] == 0.0)
            buttons[i].setText("");
        else
            buttons[i].setText("" + frequency[0]);
    }
} 
```

我正在显示前 6 个值，如下所示：

```
public void autoTune() {
    Log.i("autotune", " called");

    if (frequency[0] == 0.0)
        station1.setText(""); // station1 is a button
    else
        station1.setText("" + frequency[0]); // station1 is a button
    if (frequency[1] == 0.0)
        station2.setText(""); // station2 is a button
    else
        station2.setText("" + frequency[1]);  // station2 is a button
    if (frequency[2] == 0.0)
        station3.setText("");  // station3 is a button
    else
        station3.setText("" + frequency[2]); // station3 is a button
    if (frequency[3] == 0.0)
        station4.setText("");   // station4 is a button
    else
        station4.setText("" + frequency[3]);  // station4 is a button
    if (frequency[4] == 0.0)
        station5.setText("");  // station5 is a button
    else
        station5.setText("" + frequency[4]);   // station5 is a button
    if (frequency[5] == 0.0)
        station6.setText("");  // station6 is a button
    else
        station6.setText("" + frequency[5]);  // station6 is a button
}

@Override
protected Boolean doInBackground(Context... params) {
    // TODO Auto-generated method stub
    Log.i("in autotune", " before freq length");
    int[] freq = { 911, 943, 947, 932, 901, 964, 843, 835, 946,904,908,873 };
    freqCounter = 0;
    Log.i("in autotune", "after freq length : " + freq.length);
    frequency = new double[freq.length];
    Log.i("in autotune", "after frequency length : " + frequency.length);
    for (int k = 0; k < freq.length; k++) {
        Log.i("In Radio.java", "Freq : " + freq[k]);
        frequency[k] = freq[k];
        frequency[k] = frequency[k] / 10;
        if (frequency[k] == 0.0)
            break;
        freqCounter++;
        Log.i("In Radio.java", "Frequency : " + frequency[k]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:38:01.913

根据您的需要对其进行修改。

```
Button[] btns = new Button[8];
List<String> pages = new ArrayList<String>();
int mStart = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dialog_activiy);
    btns[0] = (Button) findViewById(R.id.pr);
    btns[1] = (Button) findViewById(R.id.b1);
    btns[2] = (Button) findViewById(R.id.b2);
    btns[3] = (Button) findViewById(R.id.b3);
    btns[4] = (Button) findViewById(R.id.b4);
    btns[5] = (Button) findViewById(R.id.b5);
    btns[6] = (Button) findViewById(R.id.b6);
    btns[7] = (Button) findViewById(R.id.nt);

    btns[0].setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            rearrangeBy(-1);
        }
    });
    btns[btns.length - 1].setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            rearrangeBy(1);
        }
    });
    // setup listeners
    for (int i = 1; i < btns.length - 1; i++) {
        btns[i].setOnClickListener(mClickListener);
    }
    for (int i = 0; i < 12; i++) {
        pages.add((i + 1) + "");
    }
    setUpButtons();
}

final View.OnClickListener mClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        Toast.makeText(DialogActiviy.this, v.getTag() + "",
                Toast.LENGTH_SHORT).show();

    }
};

private void rearrangeBy(int by) {
    mStart += by;
    setUpButtons();
}

private void setUpButtons() {
    // setup previous button
    btns[0].setEnabled(!(mStart == 1));
    // setup next button
    int end = pages.size() - btns.length + 2 + 1;
    btns[btns.length - 1].setEnabled(!(mStart == end));
    // setup intermediate buttons
    for (int i = 1; i < btns.length - 1; i++) {
        String text = (mStart + i - 1) + "";
        btns[i].setText(text);
        btns[i].setTag(text);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:55:15.173

解决方案 ：

```
if(currentlyDisplayingFromPosition + 6 >= arraySize)
    return;

for(int i=0; i<6; i++){
    buttons[i].setText("" + frequency[currentlyDisplayingFromPosition+i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:38:34.570

我看到的第一个错误，您声明了一个包含 5 个按钮的数组并尝试放置 6 个按钮：

```
Button[] buttons = new Button[5]; 
```

你应该做：

```
Button[] buttons = new Button[6]; 
```

# xml - 在 XSD Schema 验证中防止相同的重复 n 次数字

> ID：14056254
> 
> 赞同：0
> 
> 时间：2012-12-27T14:29:13.457
> 
> 标签：xml, validation, xsd

总体目标是防止美国电话号码中出现相同的重复数字。请参阅以下示例数据：

*   0000000000 - 不合法
*   7777777777 - 不合法
*   9549867899 - 合法
*   3051234567 - 合法

我正在尝试在 XSD 验证中使用正则表达式模式。特别是，消极的前瞻方法。不幸的是，XML Schema (XSD) 正则表达式是有限的。以下正则表达式**`^(?!(\d)\1{9,})`**在其他任何地方都可以完成这项工作，但不能在 XSD 模式中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:28:27.403

XSD Schema 有其自身相当受限的正则表达式方言，其中不包括前瞻。

我能想到的唯一方法是相当笨拙

```
0[0-9-[0]]|1[0-9-[1]]|2[0-9-[2]]|3[0-9-[3]]|.... 
```

只有当字符串包含一对不同的数字时才会成功。

# postgis - 使用 RGeo::Geographic.simple_mercator_factory 的点投影方法的结果是什么

> ID：14056265
> 
> 赞同：0
> 
> 时间：2012-12-27T14:30:09.557
> 
> 标签：postgis, rgeo

我有工厂`RGEO_FACTORY = RGeo::Geographic.simple_mercator_factory`

我有一个点（POINT（28.97566007 41.01452809）），它的 srid 是 3785。

然后我使用`RGEO_FACTORY.point(lon, lat).projection`. 它是`POINT (3225555.7243913896 5014484.790030423)`

现在，我需要使用 sql 来查询以提高速度。像这样：`"SELECT ST_AsText(ST_Transform(lat_lon, 4326)) from points WHERE points.id = 1"`。我希望得到与 相同的结果`POINT (3225555.7243913896 5014484.790030423)`。但我无法得到它。

而且我尝试过其他 srid 来转换点的坐标，但徒劳无功。

我应该怎么做才能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-12T16:30:53.373

当您使用`RGeo::Geographic.simple_mercator_factory`创建点时，就像使用 一样`RGEO_FACTORY.point(lon, lat)`，它们的 srid 是工厂预定义的，不是 3785，而是 4326，请自行查看[文档](http://rubydoc.info/github/dazuma/rgeo/master/RGeo/Geographic.simple_mercator_factory)。这些点的`projection`方法返回 3785 中的点。使用 ST_SRID(lat_lon) 了解您的 lat_lon 字段的实际 srid，如果它是几何类型，然后找出您要将其转换为哪个 srid。

涵盖了更详细的回答[另一个类似的问题](https://stackoverflow.com/questions/14064107/how-to-express-the-projection-using-pure-sql/15366393#15366393)。

# java - jsp中的response.sendRedirect错误

> ID：14056266
> 
> 赞同：0
> 
> 时间：2012-12-27T14:30:11.803
> 
> 标签：java, jsp

我是一名 Java 新手/爱好者程序员，我正在编写一些代码来帮助我将记录添加到、搜索和更新我广泛的电影收藏数据库。我已经编写了使用 JSP 添加和搜索记录的代码，并且运行良好。但是，我遇到了更新记录的代码问题。我在我的 JSP 中收到以下错误，这似乎是在引用`response.sendRedirect()`我使用的方法：

* * *

> org.apache.jasper.JasperException：在第 63 行处理 JSP 页面 /updateRecord.jsp 时发生异常
> 
> 63: response.sendRedirect("updaterecordsuccess.html");

* * *

问题是我在另一个 JSP 中使用了基本相同的代码，除了一个 sql 更新字符串，它工作正常。给出错误的 JSP 页面的完整代码如下。该`response.sendRedirect`方法在代码的最后一行。我想我已经检查了所有内容，但无法弄清楚。

```
 <%@ page contentType="text/html; charset=UTF-8" language="java" import="java.sql.*"    import="java.text.ParseException" import="java.text.SimpleDateFormat" errorPage="" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<%
  Connection conn = null;

  Class.forName("com.mysql.jdbc.Driver").newInstance();
  conn = DriverManager.getConnection("jdbc:mysql://localhost/VideoDB?  user=user&password=password");

  PreparedStatement psUpdateRecord=null;
  String sqlUpdateRecord=null;

  String title=request.getParameter("title");
  String sDateVwd=request.getParameter("sDateVwd");
  int rating=Integer.parseInt(request.getParameter("rating"));
  String comments=request.getParameter("comments");

  try {

        java.util.Date utilDateVwd = new SimpleDateFormat("dd MMM   yyyy").parse(sDateVwd);
        java.sql.Date sqlDateVwd = new java.sql.Date(utilDateVwd.getTime());

    try {

     sqlUpdateRecord="UPDATE vidtb SET date_vwd = ?, rating = ?, comments = ? WHERE  title = ?";
     psUpdateRecord=conn.prepareStatement(sqlUpdateRecord);
     psUpdateRecord.setDate(1,sqlDateVwd);
     psUpdateRecord.setInt(2,rating);
     psUpdateRecord.setString(3,comments);
     psUpdateRecord.setString(4,title);       
     psUpdateRecord.executeUpdate();

      } finally {
    }

  } 
  catch (ParseException e) {
    e.printStackTrace();
  }

  catch(Exception e)
  {
      response.sendRedirect("rateRecord.jsp");//// On error it will send back to   rateRecord.jsp page
  }

    try{
      if(psUpdateRecord!=null)
      {
       psUpdateRecord.close();
      }

      if(conn!=null)
      {
       conn.close();
      }
    }
    catch(Exception e)
    {
      e.printStackTrace(); 
    }

response.sendRedirect("updaterecordsuccess.html");

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:49:18.560

我的错！我在家里随便用另一台电脑工作，决定尝试更新数据库中的一条记录，结果成功了。我猜我另一台计算机上的浏览器正在缓存糟糕的结果。所以所有的代码都很好。无论如何感谢您的建议。

# android - Proguard 返回错误 1 - 项目 bin 文件夹中没有 proguard.txt 文件？

> ID：14056267
> 
> 赞同：1
> 
> 时间：2012-12-27T14:30:13.113
> 
> 标签：android, proguard

我刚开始使用 proguard，并使用在此站点上找到的文件作为我的 proguard.cfg 文件：

> -optimizationpasses 5 -dontusemixedcaseclassnames -dontskipnonpubliclibraryclasses -dontpreverify -verbose -optimizations !code/simplification/arithmetic,!field/ *,!class/merging/*
> 
> -keep 公共类 * 扩展 android.app.Activity -keep 公共类 * 扩展 android.app.Application -keep 公共类 * 扩展 android.app.Service -keep 公共类 * 扩展 android.content.BroadcastReceiver -keep 公共类 * 扩展android.content.ContentProvider -keep 公共类 * 扩展 android.app.backup.BackupAgentHelper -keep 公共类 * 扩展 android.preference.Preference -keep 公共类 com.android.vending.licensing.ILicensingService
> 
> -keepclasseswithmembernames class * { native ; }
> 
> -keepclasseswithmembers 类 * { public (android.content.Context, android.util.AttributeSet); }
> 
> -keepclasseswithmembers 类 * { public (android.content.Context, android.util.AttributeSet, int); }
> 
> -keepclassmembers 类 * 扩展 android.app.Activity { public void *(android.view.View); }
> 
> -keepclassmembers enum * { public static * *[] values(); 公共静态 ** valueOf(java.lang.String); }
> 
> -keep 类 * 实现 android.os.Parcelable { public static final android.os.Parcelable$Creator *; }

当我使用 eclipse 进行签名 apk 导出的最后一步时，出现错误：

> Proguard 返回错误代码 1。请参阅控制台

控制台说明了这一点：

> Proguard 返回错误代码 1。请参阅控制台 [2012-12-27 14:23:16 - FlashActivity] java.io.FileNotFoundException: C:\Users\Liam\workspace\FlashActivity\bin\proguard.txt（系统找不到指定的文件）[2012-12-27 14:23:16 - FlashActivity] 在 java.io.FileInputStream.open（本机方法） [2012-12-27 14:23:16 - FlashActivity] 在 java.io.FileInputStream .（未知来源）[2012-12-27 14:23:16 - FlashActivity] 在 java.io.FileReader.（未知来源）[2012-12-27 14:23:16 - FlashActivity] 在 proguard.FileWordReader.（ FileWordReader.java:39) [2012-12-27 14:23:16 - FlashActivity] 在 proguard.ConfigurationParser.parseIncludeArgument(ConfigurationParser.java:217) [2012-12-27 14:23:16 - FlashActivity] 在 proguard。 ConfigurationParser.parse(ConfigurationParser.java:124) [2012-12-27 14:23:16 - FlashActivity] 在 proguard.ProGuard.main(ProGuard.java:484)

从输出来看，我会说`proguard.txt`我的应用程序`bin`文件夹中应该有一个文件，但没有。

如果我制作，这个文件应该包含什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:34:51.503

从 adt 17 开始，proguard 配置文件不是 proguard.cfg 而是 proguard-project.txt

见[http://tools.android.com/recent/proguardimprovements](http://tools.android.com/recent/proguardimprovements)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T10:23:31.817

您应该使用交互式工具更新您的 Android SDK，`android`然后使用

```
android update project --path MyProjectDirectory 
```

这应该创建`proguard-project.txt`并更新`project.properties`以指向该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T12:20:52.583

当 eclipse 无法从 sdk 目录读取 progaurd 文件时，也会出现此问题。

对我来说，dump.txt 文件出现了错误，即使它存在于我的项目中。

我通过更改 project.properties 文件中的 sdk 路径解决了这个问题

从

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

到

```
progaurd.config=D:\Backup\Desktops\adt-bundle-windows-x86_64-20140702\adt-bundle-windows-x86_64-20140702\sdk\tools\proguard\proguard-android.txt:proguard-project.txt 
```

我的sdk所在的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T07:22:06.110

```
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt')
    }
} 
```

确保 minifyEnabled 为 false

# sqlite - 使用 LEFT JOIN 时的 SqliteDataReader 和重复的列名

> ID：14056270
> 
> 赞同：3
> 
> 时间：2012-12-27T14:30:23.380
> 
> 标签：sqlite

是否有关于 Sqlite3 的文档/规范可以描述在以下情况下应该发生的情况？

接受这个查询：

```
var cmd = new SqliteCommand("SELECT Items.*, Files.* FROM Items LEFT JOIN Files ON Files.strColName = Items.strColName"); 
```

两者`Items`都有`Files`一个列名“ *strColName* ”。如果 中存在条目`Files`，则将其连接到结果中，如果不存在，则为 NULL。假设我总是需要*strColName*的值，无论它是来自`Items`还是来自`Files`。如果我执行阅读器：

```
var reader = cmd.ExecuteReader(); 
```

如果 , 中有匹配项`Files`，`reader["strColName"]`显然会包含正确的结果，因为该值已设置并且在两个表中都是相同的。但是如果 中没有匹配`Files`项， NULL 值是否会`Files`覆盖 的非 NULL 值`Items`？

我真的在寻找一些规范来定义 Sqlite3 实现必须如何处理这种情况，以便我可以信任任何一个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T15:02:26.000

SQLite 返回多个标有相同名称的列没有问题。`SELECT`但是，列将始终以与它们在语句中写入的顺序完全相同的顺序返回。因此，当您搜索 时`"strColName"`，您会找到第一个，来自`Items`。

建议使用显式列名而不是`*`这样，以便顺序清晰，并且您可以根据需要通过列索引访问值（并且您检测到表结构中的不兼容更改）。

# tfs - Visual Studio 团队服务 API

> ID：14056271
> 
> 赞同：6
> 
> 时间：2012-12-27T14:30:31.540
> 
> 标签：tfs, sdk, azure-devops

有谁知道是否有 Visual Studio Team Services ( [http://visualstudio.com/](http://visualstudio.com/) ) API？请注意，我指的是“服务”而不是“服务器”。

我一直在寻找，但一直找不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T17:19:36.160

请参阅：[Team Foundation Server OData API](https://tfsodata.visualstudio.com/)

阅读，然后按照“ **Team Foundation Service authentication:** ”中的说明设置您的帐户/配置文件以访问 Api。

然后，您可以通过 Web Api 访问资源。

该页面顶部附近还有一些使用此 Api/OData 的示例应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:13:39.227

正如 Edward 和 Christopher 所指出的，TFS 的云版本和本地版本的客户端对象模型是相同的，但并非所有 API 都适用于这两个系统。您可以从以下位置下载客户端对象模型安装程序：

*   [2012](http://visualstudiogallery.msdn.microsoft.com/f30e5cc7-036e-449c-a541-d522299445aa)
*   [2010 SP1](http://visualstudiogallery.msdn.microsoft.com/a37e19fb-3052-4fc9-bef7-4a4682069a75)和[前向兼容性 GDR](http://www.microsoft.com/en-us/download/details.aspx?id=29082)

哪个 API 在哪个系统上的工作不断变化，因为新功能一直添加到云版本中，而某些功能目前仅在内部部署版本中可用（例如共享点集成和报告）。

除此之外，还有一个用于本地 TFS 2010 的 OData API，预计该 API 将在不久的将来为 TFSvc 和 TFS 本地发布。可能首先来到 TFSvc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T23:55:30.320

Visual Studio Team Services 和 Team Foundation Server 现在还具有 REST API、服务挂钩和扩展框架：

[https://www.visualstudio.com/docs/integrate/overview](https://www.visualstudio.com/docs/integrate/overview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-05T09:19:45.050

Microsoft 确实提供了 REST ful 以及基于客户端对象模型 (DLL) 的 API，这些 API 适用于本地 Team Foundation Server 和 Visual Studio Team Services。但是，REST ful API 仍然不完整，例如，仍然没有获取下拉字段值的端点。因此建议使用 COM DLL API。

# layout - ExtJs Form Items定位inline和under，复杂

> ID：14056280
> 
> 赞同：0
> 
> 时间：2012-12-27T14:30:56.283
> 
> 标签：layout, extjs, positioning

我使用 ExtJs 4 创建了一个表单

```
xtype: 'prg-formPanel',
             id: 'blog-edit-form', // id fixed : id: 'upload-form-'+this.filetype,
             url: baseUrl + "crud",
             border: 0,
             bodyStyle: {
                 padding: '10px 20px'
             },                    
             height: 600,
             defaultType: 'textfield',
             defaults: {
                 anchor: '95%',
                 allowBlank: true,
                 msgTarget: 'side',
                 labelWidth: 60
             },
             layout: {
                type: 'table',
                columns: 2
             },
             items: [{
                    inputType: 'hidden',
                    id: 'actionType',
                    name: 'actionType',
                    value: this.actionType,
                    scope: this
                },{
                     inputType: 'hidden',
                     id: 'id',
                     name: 'id',
                     value: (Ext.isEmpty(this.record)?null:this.record.get('id'))
                },{
                     inputType: 'textfield',
                     id: 'title',
                     fieldLabel: 'Başlık',
                     name: 'title',
                     labelWidth: 60,
                     value: (Ext.isEmpty(this.record)?null:this.record.get('title')),
                     colspan:2
                },{
                     inputType: 'textfield',
                     id: 'name',
                     fieldLabel: 'İsim',
                     name: 'name',
                     labelWidth: 60,
                     value: (Ext.isEmpty(this.record)?null:this.record.get('name')),
                     colspan:2
                },
                new Prg.checkBox({
                    fieldLabel: 'Aktif mi?',
                    name: 'activeFlag',
                    labelWidth: 60,
                    checked: (Ext.isEmpty(this.record)?false:this.record.get('activeFlag'))
                }),
                new Prg.idCombo({
                    fieldLabel : 'Dil',
                    labelWidth: 60,
                    emptyText : 'Dili seçiniz...',
                    id: 'langId',
                    name : 'langId',
                    store : this.ds_language,
                    scope: this
                }),{
                     inputType: 'textfield',
                     id: 'targetURL',
                     fieldLabel: 'Link',
                     name: 'targetURL',
                     labelWidth: 60,
                     value: (Ext.isEmpty(this.record)?null:this.record.get('targetURL')),
                     colspan:2
                },{
                    xtype: "TinyMCEEditor",
                    fieldLabel: "İçerik",
                    width: 800,
                    height: 400,
                    colspan:2,
                    name: "contentHTML",
                    id: "contentHTML",
                    tinyMCESettings: {
                        mode: "exact",
                        theme: "advanced",
                        skin: "o2k7",
                        // Tiny Settings Here
                            //...
                    value: (Ext.isEmpty(this.record)?"":this.record.get('contentHTML'))
                },
                new Ext.form.field.ComboBox({
                    id: "categories",
                    name: "categories",
                    fieldLabel: 'Kategori',
                    multiSelect: true,
                    displayField: 'name',
                    forceSelection: true,
                    labelWidth: 60,
                    store: this.ds_tags,
                    queryMode: 'remote',
                    scope: this,
                    colspan:2
                })
                ] // Form items closure
        }];
        this.buttons = [new Prg.btn({
            text: btnUploadMsg,
            handler: this.onSave,
            scope: this
        }),new Prg.btn({
            text: btnCancelMsg,
            handler: function() {
                this.hide();
            },
            scope: this
        })];
        this.callParent(arguments);
        this.form = this.getComponent('blog-edit-form').getForm(); // 'upload-form-'+this.filetype
    } 
```

如您所见，我使用了表格布局，一些表单项应该是内联的，其他的应该在新行中。我已经通过表格完成了，但是，现在项目宽度是固定的......我还想给它们 95% 的值，以便在调整窗口大小时自动调整它们的大小。我找不到路。尝试添加`anchor`，`width: '90%'`但它不起作用。

![这是我的表格](../Images/b88f7e67d59ee7bb1d53065aa29a4715.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:37:22.077

也许你可以使用[Resizer](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.resizer.Resizer)？

下面是一些[例子](http://dev.sencha.com/deploy/ext-4.0.2a/examples/resizer/basic.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:42:12.977

使用表单的默认布局：`form`并使用`FieldContainer` [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.FieldContainer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.FieldContainer)您需要在同一行显示两个字段。

通过这种方式，您可以利用`anchor`并仍然创建您想要的复杂布局。

这*应该*有效（由于自定义类型，我无法对其进行测试）

```
Ext.define('Prg.FormPanel', {
initComponent: function() {
    Ext.applyIf(this, {
        xtype: 'prg-formPanel',
        id: 'blog-edit-form',
        // id fixed : id: 'upload-form-'+this.filetype,
        url: baseUrl + "crud",
        border: 0,
        bodyStyle: {
            padding: '10px 20px'
        },
        height: 600,
        defaultType: 'textfield',
        defaults: {
            anchor: '95%',
            allowBlank: true,
            msgTarget: 'side',
            labelWidth: 60
        },
        layout: {
            type: 'form'
        },
        items: [{
            inputType: 'hidden',
            id: 'actionType',
            name: 'actionType',
            value: this.actionType,
            scope: this
        }, {
            inputType: 'hidden',
            id: 'id',
            name: 'id',
            value: (Ext.isEmpty(this.record) ? null : this.record.get('id'))
        }, {
            inputType: 'textfield',
            id: 'title',
            fieldLabel: 'Başlık',
            name: 'title',
            labelWidth: 60,
            value: (Ext.isEmpty(this.record) ? null : this.record.get('title'))
        }, {
            inputType: 'textfield',
            id: 'name',
            fieldLabel: 'İsim',
            name: 'name',
            labelWidth: 60,
            value: (Ext.isEmpty(this.record) ? null : this.record.get('name'))
        }, {
            xtype: 'fieldcontainer',
            layout: 'hbox',
            items: [
            new Prg.checkBox({
                fieldLabel: 'Aktif mi?',
                name: 'activeFlag',
                labelWidth: 60,
                checked: (Ext.isEmpty(this.record) ? false : this.record.get('activeFlag'))
            }), new Prg.idCombo({
                fieldLabel: 'Dil',
                labelWidth: 60,
                emptyText: 'Dili seçiniz...',
                id: 'langId',
                name: 'langId',
                store: this.ds_language,
                scope: this
            })]
        }, {
            inputType: 'textfield',
            id: 'targetURL',
            fieldLabel: 'Link',
            name: 'targetURL',
            labelWidth: 60,
            value: (Ext.isEmpty(this.record) ? null : this.record.get('targetURL'))
        }, {
            xtype: "TinyMCEEditor",
            fieldLabel: "İçerik",
            width: 800,
            height: 400
            name: "contentHTML",
            id: "contentHTML",
            tinyMCESettings: {
                mode: "exact",
                theme: "advanced",
                skin: "o2k7",
                // Tiny Settings Here
                //...
                value: (Ext.isEmpty(this.record) ? "" : this.record.get('contentHTML'))
            },
            new Ext.form.field.ComboBox({
                id: "categories",
                name: "categories",
                fieldLabel: 'Kategori',
                multiSelect: true,
                displayField: 'name',
                forceSelection: true,
                labelWidth: 60,
                store: this.ds_tags,
                queryMode: 'remote',
                scope: this
            })] // Form items closure
        });
    this.buttons = [new Prg.btn({
        text: btnUploadMsg,
        handler: this.onSave,
        scope: this
    }), new Prg.btn({
        text: btnCancelMsg,
        handler: function() {
            this.hide();
        },
        scope: this
    })];
    this.callParent(arguments);
    this.form = this.getComponent('blog-edit-form').getForm(); // 'upload-form-'+this.filetype
    }
}); 
```

希望这可以帮助。

# objective-c - UIScrollview 中的多个 Tableview

> ID：14056287
> 
> 赞同：2
> 
> 时间：2012-12-27T14:31:35.603
> 
> 标签：objective-c, ios, uitableview, uiscrollview

我正在根据数组计数将多个表视图添加到滚动视图中......代码在这里

```
int currentX = 3;
for(int i=0;i<[restNameArray count]; i++)
{

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setFrame:CGRectMake(currentX, 0, 150, 35)];
    button.tag = i+1;
    //[button setUserInteractionEnabled:NO];
    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [button setBackgroundImage:[UIImage imageNamed:@"ohris_applytics_ipad_middle_oc.png"] forState:UIControlStateNormal];
    button.titleLabel.font = [UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:15.0f];
    [button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [button setTitle:[NSString stringWithFormat:@"%@", [restNameArray objectAtIndex:i]] forState:UIControlStateNormal];

    restaurantTable = [[UITableView alloc] initWithFrame:CGRectMake(currentX, 35, 150, 310) style:UITableViewStylePlain];
    [restaurantTable setTag:i+1];
    [restaurantTable setBackgroundColor:[UIColor whiteColor]];
    restaurantTable.delegate = self;
    restaurantTable.dataSource = self;
    [scrollView addSubview:button];
    [scrollView addSubview:restaurantTable];

    NSLog(@"tag %d",restaurantTable.tag);
    currentX = restaurantTable.frame.size.width+currentX+3;

    [tagArray addObject:[NSString stringWithFormat:@"%d", restaurantTable.tag]];
}
NSLog(@"aaaa %@", tagArray);
[scrollView setContentSize:CGSizeMake(currentX, 349)]; 
```

它在模拟器中显示良好。我需要用数组填充表格视图。cellforrowatindexpath 的代码是

```
 if(tableView == restaurantTable){
    for (int i =0;i<[tagArray count];i++)
    {
      table1Array = [[[restSalesArray objectAtIndex:i]componentsSeparatedByString:@","]mutableCopy];

    NSLog(@"Sales array :%d %@", i, table1Array);
    cell.textLabel.text = [formatter stringFromNumber:[NSNumber numberWithInteger:[[table1Array objectAtIndex:indexPath.row]intValue]]];
    cell.textLabel.textAlignment = NSTextAlignmentCenter;
    }
} 
```

但问题是，它只在最后一个表格视图中填充.. 剩下的都是空的......请帮帮我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:44:41.267

你想做的事情没关系。但是您正在覆盖`restaurantTable`for 循环中的变量。所以变量是最后一个表视图。您需要将它们添加到数组或单独的变量中，以便能够与您的`cellForRowAtIndexPath`方法中的 if 进行比较。

_allTableViews 在你的头文件中定义

你for循环

```
_allTableViews = [NSMutableArray array];  

for (.....) {
.
.
.
UITableView *tableView = [[UITableView alloc] initWith....];

.
.
.

[_allTableViews addObject tableView];
} 
```

cellForRowAtIndePath

```
NSInteger tableIndex = [_allTableViews indexOfObject:tableView];
// Now you have the index of table view
switch (tableIndex) {
case 0:
// first table
break;
case 1:
// second table
break;
default:
break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:38:13.493

您需要通过其插座名称或标签来比较每个 tableView。

作为 ：

```
if(tableView == _restaurantTableOutlet){ 
    ...
}
else  if(tableView == _barTableOutlet){
    ...
}
else  if(tableView == _loungeTableOutlet){
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T06:55:57.620

您必须首先为每个 tableView 分配标签。然后，您可以通过以下代码获取特定表的选定行：-

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    int tableTag = tableView.tag;
    if(tableTag==0)
    {
         //do something here
    }
    else if(tableTag==1)
    {
         //do something here
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:34:59.743

您将每个表视图存储到`restaurantTable`中，因此对先前表视图的引用将丢失。要么将它们全部存储在一个数组中，要么不存储它们中的任何一个

你为什么要检查`if(tableView == restaurantTable)`？您应该按标签检查表格并分别处理每个表格

# java - 使用 Android 音频和方向传感器进行机械安全破解

> ID：14056288
> 
> 赞同：8
> 
> 时间：2012-12-27T14:31:55.487
> 
> 标签：java, android, algorithm, android-sensors

我正在编写一个应用程序，帮助锁匠安全操作，主要是通过创建他们需要的图表。当试图通过操纵进入保险箱时，需要对“轮组”进行详细分析，并通过绘制“栅栏”在“门”上的相对深度来完成。如果包装上的所有门都对齐，栅栏杆将落入凸轮门，锁将打开。如果有人对更详细的解释感兴趣，您可以在这里找到 Matt Blaze 的精彩处理（从 3.3 开始）：www.crypto.com/papers/safelocks.pdf

制作图表很重要，它真正需要的是一遍又一遍地准确测量表盘上的两个位置，并记录两个声音之间的表盘距离。因此，假设“插入”点在 10 和 15 之间，声音事件可能发生在 11.5 和 14.5，或者下一次可能发生在 12 和 15。锁匠制作了这些之间的距离图表数字并在图表上寻找缩小的数字，或者可能只是图表上的最低位置。

我正在通过我的 Android 耳机插孔使用老式无线电棚电话拾音器（吸盘麦克风）来收听声音事件。为了精确测量事件发生的表盘，我用魔术贴简单地将手机安装到表盘上，并使用 SensorManager 根据手机从音频尖峰事件旋转到尖峰的距离来计算声音之间的距离-事件。这很好，但我想在不将电话安装到拨号盘的情况下这样做。过去有几家公司通过使用网络摄像头查看表盘本身来完成此操作，但这似乎远不如仅安装手机准确，因为我可以使用小数度旋转获得更高的精度。

一旦你进入插入位置，你总是会打一个声音，然后将表盘备份到下一个声音，所以我想我可以简单地听一下声音事件，然后一旦表盘反转方向测量到下一个声音事件，但这需要表盘恒定移动，这在现实生活中不会发生。我想我可以通过使用 dynamixel 或伺服来移动锁匠的表盘来做到这一点，但同样，这不是一个好的解决方案。所以我的问题是，你们中的任何一个聪明人是否可以想办法在不将手机安装到表盘的情况下量化这些相关速率（声音事件之间的距离和表盘位置的变化）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:52:57.480

不是一个完整的答案，但我可以向您提出一些想法：

从控制系统工程师的角度来看，我可以告诉你，在不直接接触轴的情况下准确测量旋转的方法是使用[编码器](http://en.wikipedia.org/wiki/Rotary_encoder)。

因此，也许您可​​以使用[Android 附件模式](http://developer.android.com/tools/adk/adk2.html)来读取您将安装在表盘上的编码器（通过 Arduino）（可能在编码器轴上放置一个橡胶盘并将其与安全表盘接触）。

整个努力只是为了避免将整个手机粘在表盘上并获得一些额外的精度。

另一种方法可能是在表盘上附加其他会产生`click`噪音的东西，您可以过滤这些噪音以区分安全声音。但这肯定会降低您的精度。

# python - csv、txt、xls切换日期格式（MM/DD/YYYY和M/D/YY）导致的Python输出错误

> ID：14056291
> 
> 赞同：0
> 
> 时间：2012-12-27T14:32:18.263
> 
> 标签：python, csv, python-2.7, xlwt

我编写了一个 python 脚本，该脚本采用具有 M/D/YYYY 格式日期的 csv，然后将它们与 xlwt 生成的 .xls 文件中的日期进行匹配。我想知道为什么只有一些日期匹配，然后我注意到唯一匹配的日期是 10 个字符长的字符串（2011 年 11 月 14 日）和不是 10 个字符长的日期（2011 年 1 月 14 日或 1 /7/2012) 不匹配。如何让 csv 文件将日期保存在 10 个字符长的字符串中？还是我应该将 csv 文件转换为 txt 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:35:12.117

`csv`*对日期*一无所知；它只是读取文本。您正在将字符串与其他字符串进行比较，并且`'1/7/2012'`完全`'01/07/2012'`是不同的字符串。

阅读时，您需要将日期解析为*可以*比较的内容。使用该`datetime.datetime.strptime()`功能：

```
import datetime

dt = datetime.datetime.strptime(datecolumn, '%m/%d/%Y').date() 
```

上面的`strptime()`格式会将`1/7/2012`和都`01/07/2012`变成 a `datetime.date(2012, 1, 7)`，并且该实例的两个副本`date()`将比较相等。

# css - 选择菜单选项边框无

> ID：14056300
> 
> 赞同：21
> 
> 时间：2012-12-27T14:32:45.033
> 
> 标签：css

我正在尝试更改`select option`边界但无法做到这一点，我已经尝试了很多次但没有找到合适的解决方案。我附上了屏幕截图。

![在此处输入图像描述](../Images/09ab5b68f22e0d773cd80798ede8e88c.png)

```
<head>
  <style>
    select option {
      background:transparent;
      border:0;
    }
  </style>
</head>

<body>
  <select>
    <option>hello</option>
    <option>hello</option>
    <option>hello</option>
    <option>hello</option>
    <option>hello</option>
  </select>
</body> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-27T14:37:55.210

选择的下拉列表是所谓的[ShadowDOM](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)的一部分。在当前的 CSS 规范第 3 级中，没有办法针对大多数 ShadowDOM 元素。[您可以在此处](http://www.w3.org/TR/shadow-dom/)阅读有关 ShadowDOM 的规范，尽管关于您想要的内容并不多。

Chrome 有一些专有的选择器来改变*一些*shadowDOM 元素，但不是全部。Firefox 甚至更少（据我所知），而 Opera 则没有。IE 可能同样糟糕或更糟。

考虑到兼容性，最好的办法是使用 Jquery 插件来模拟使用其他 HTML 元素的选择，如果你真的想设置它的样式的话。[这是一个整洁的](http://harvesthq.github.com/chosen/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:12:24.933

据我所知，这是不可能的，属性取决于每个浏览器，过去没有任何问题可能会让事情变得更清楚。

问候。

也许这可能会有所帮助：

[如何在没有 JavaScript 的情况下仅使用 CSS 设置 <select> 下拉菜单的样式？](https://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T09:17:59.133

**简短的回答**：

**这不能用一个`select`元素来完成**

**可能的解决方案**：

使用任何 UI 库（[bootstrap](https://getbootstrap.com/docs/5.0/components/dropdowns/)、[jquery UI](https://jqueryui.com/selectmenu/)或[任何其他](https://www.sitepoint.com/13-jquery-selectboxdrop-down-plugins/)）来制作自定义的 select-like 元素，您可以根据需要设置样式（它们都使用其他自定义友好元素生成控件，如`ul`, `li`, `div`.... )

# java - 用于 Enter 键的 Java 可编辑 JCombobox Keylistener 事件

> ID：14056301
> 
> 赞同：6
> 
> 时间：2012-12-27T14:32:46.797
> 
> 标签：java, swing, jcombobox, keylistener, enter

我有可编辑的 JCombobox，并为组合框编辑器组件添加了 keylistener。当用户按下“Enter 键”并且可编辑组合框上没有文本时，我需要使用 JOptinoPane 显示消息框。我已经在 keyrelease 事件中完成了必要的代码，它按预期显示了消息。

问题是，当我们得到消息框并且如果用户在 JOptionPane 的“确定”按钮上按下回车键时，组合框编辑器 keyevent 会再次触发。因此，当用户在消息框上按 Enter 键时，JoptionPane 会连续显示。

知道如何解决这个问题吗？

请注意，我不能为此使用 Action 侦听器。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-16T08:01:46.880

请检查此代码是否对您有帮助！！！

```
JFrame frame = new JFrame("Welcome!!");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JComboBox cmb = new JComboBox();
cmb.setEditable(true);
cmb.getEditor().getEditorComponent().addKeyListener(new KeyAdapter() {

    @Override
    public void keyReleased(KeyEvent event) {
        if (event.getKeyChar() == KeyEvent.VK_ENTER) {
            if (((JTextComponent) ((JComboBox) ((Component) event
                    .getSource()).getParent()).getEditor()
                    .getEditorComponent()).getText().isEmpty())
                System.out.println("please dont make me blank");
        }
    }
});
frame.add(cmb);

frame.setLocationRelativeTo(null);
frame.setSize(300, 50);
frame.setVisible(true); 
```

大多数人会因为这个选角而感到困难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-29T19:06:55.750

我们需要在组合框用于为编辑提供服务的组件上添加一个键侦听器。

```
JTextComponent editor = (JTextComponent) urCombo.getEditor().getEditorComponent();
editor.addKeyListener(new KeyAdapter() {
   public void keyReleased(KeyEvent evt) {
      // your code
   }
}); 
```

希望这段代码有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:30:37.087

```
Note that I can't use Action listener for this. 
```

这没有任何意义，然后使用 ItemListener

```
Any idea how to solve this? 
```

*   永远不要使用[KeyListene](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html) r ，而是`Swing JComponents`使用 ( `Note that I can't use Action listener for this`.) [KeyBindings ，](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

*   默认情况下`ENTER key`为`JComboBox`in实现通知，必须从`API``ENTER key pressed`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T01:17:30.933

一种选择是用您自己的替换 KeySelectionManager 接口。您想替换 JComboBox.KeySelectionManager 因为它负责获取输入的字符并返回应选择的行号（作为 int ）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-18T06:47:43.067

请检查事件ASCII码，`ev.getkeycode()`并检查它是数字还是字符。如果它既不是数字也不是字符，则什么也不做。如果这是您想要的，请执行此过程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-19T09:04:40.383

如果您使用的是 Netbeans，则右键单击您的组合框并选择自定义代码。添加以下代码行

```
JTextComponent editor = (JTextComponent) Code.getEditor().getEditorComponent();
editor.addKeyListener(new KeyAdapter() {
   public void keyReleased(KeyEvent evt) {
        if(evt.getKeyCode()==10)
            //do your coding here.
   }
}); 
```

# python - 在 django 查询集中比较日期

> ID：14056306
> 
> 赞同：1
> 
> 时间：2012-12-27T14:33:21.497
> 
> 标签：python, django

我有一个查询字符串，我用它来获取所有存档（通过）的会议

喜欢

```
 get_meetings =  Meeting.objects.filter(created_by = user_id.id,meeting_datetime__lte =  datetime.now()) 
```

这是模型结构

```
 meeting_datetime = models.DateTimeField(default=datetime.datetime.now,blank=True, null=True) 
```

上面的查询返回了所有的会议，这些会议也将在 12 月 29 日举行。

我想要现在之前所有会议的细节。

请告诉我我在这里做错了什么>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:35:46.047

要获得严格的条件，您应该使用[小于`__lt`](https://docs.djangoproject.com/en/1.3/ref/models/querysets/#lt)而不是“小于等于”。此外，为避免包括会议日，您可以获得“第一分钟日”：

```
today_min = datetime.datetime.combine(date.today(), datetime.time.min)
get_meetings = ( Meeting
                .objects
                .filter(created_by = user_id.id,
                        meeting_datetime__lt =  today_min
                       )
               ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:36:48.593

`lte`意味着`less than or equal to`你需要`lt`这意味着`less than`

```
get_meetings =  Meeting.objects.filter(created_by__id = user_id.id,
                                       meeting_datetime__lt=datetime.now()) 
```

# scala - Scala - 调用时没有参数方法和曲线括号的`apply()`

> ID：14056307
> 
> 赞同：4
> 
> 时间：2012-12-27T14:33:24.923
> 
> 标签：scala, dsl

我正在用 Scala 构建一个 DSL，我有这样一个对象：

```
object block {
  def apply(content: String): String = "{\n" + content + "}\n"
  def apply(): String = block("empty block")
} 
```

所以稍后在我的 DSL 中我可以说：

```
block {
  "good stuff goes here"
} 
```

没关系，但是`apply()`我想使用第二种方法来允许用户编写空块，以便稍后填充它们。但是编译器不允许使用大括号调用无参数`apply()`方法......除了使用括号之外，还有什么方法可以解决吗？如果不是，那为什么不允许这样做？

**更新：**供参考：这两个答案应该结合起来以获得全貌。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T14:47:53.300

代替没有任何参数的 apply 方法，您可以让它接受一个`Unit`被忽略的类型的参数：

```
def apply(ignored: Unit) = "{\n}\n" 
```

然后你可以写

```
block {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:42:04.870

**最后**

```
object block { 
  def apply[T](content: => T) = "{\n" + 
    (content match { 
      case s: String => s
      case u: Unit => ""
      case a => a.toString 
    }) + "}\n" 
} 
```

**编辑**

做一个`block {}`工作：

```
object block { def apply(content: => Unit) = "{\n" + content + "}\n" } 
```

我坚持使用按名称参数，而不仅仅是`Unit`在另一个答案中。因为`=> Unit`确实创建了一个可以由`block.apply()`方法执行的函数，并且`content: Unit`只是将一个代码块作为参数，该代码块将就地执行（之前`block.apply()`）。

假设这`block.apply`将打印“Hoho”。现在：

```
// content: Unit
block { println("Haha") }
// Haha
// Hoho

// content: => Unit
block { println("Haha") }
// Hoho
// Haha 
```

**...**

使用按名称参数：

```
object block { def apply(content: => String) = "{\n" + content + "}\n" } 
```

# netbeans - 我可以对函数变量使用@FXML 注释吗？

> ID：14056312
> 
> 赞同：3
> 
> 时间：2012-12-27T14:33:38.547
> 
> 标签：netbeans, javafx-2, netbeans-7, fxml

我有一个 fxml 文件，其中有一个 id = "startButton" 的按钮，现在我应该可以在我的代码中使用它，如下所示：

```
@FXML
Button startButton;
startButton.addActionLisetner... 
```

但 NetBeans 说：注解类型不适用于这种声明

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:45:21.570

您只能使用`@FXML`在`Controller`fxml 文件中专门设置的内容，并且只能用于该类的**字段。**

这是必需的，因为这些字段将在创建该类的对象期间自动初始化。

```
public class MyController implements Initializable{
     @FXML
     Button startButton;

     void initialize(java.net.URL location, java.util.ResourceBundle resources) {
          startButton.addActionLisetner(...);
     }
} 
```

# alfresco - 使用 CMIS 从 Alfresco 获取用户组结构

> ID：14056313
> 
> 赞同：0
> 
> 时间：2012-12-27T14:33:40.537
> 
> 标签：alfresco, opencmis

是否可以使用 CMIS 会话从 Alfresco 检索用户组的结构，如果可以，我该怎么做？

我使用 GXT (Java) 和 Apache 的化学 openCMIS API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T18:13:12.653

不，这是不可能的，如果你搜索了露天论坛，那么你就不必问这个问题；）。

[这](https://forums.alfresco.com/en/viewtopic.php?f=45&t=45603)是论坛上类似的问题和答案。

# sockets - Socket.receive 秒返回 0 但端口有数据

> ID：14056321
> 
> 赞同：0
> 
> 时间：2012-12-27T14:34:12.993
> 
> 标签：sockets

我正在编写一个服务器应用程序来接收请求并使用 vb.net 套接字类进行应答。我正在使用 socket.receive，第一次没问题，但第二次总是返回 0 个字节。我可以通过嗅探器看到端口中有数据。我可以看到我们已经通过了通信的前 3 个步骤，并且我可以看到端口中的数据，但是我的 socket.receive 指令总是返回 0 字节（有时它在第一次和第二次停止时工作，但有些时候因为第一次返回0）我遵循了很多建议，但没有任何效果，例如：在指令socket.receive之前使用socket.available，将socket.receive放在一个循环中等待完整的消息，清除套接字缓冲区。这是我的 socket.receive 指令代码的一部分：

```
Try
    While True
      If vConnectionSocket.Available > 0 Then
        vNumOfBytesReceived = vConnectionSocket.Receive(Data, 0, vMessageLength, SocketFlags.None)
        Array.Copy(Data, indbuf, vClientMessage, indbuf, vNumOfBytesReceived)

        If vStrMsg.IndexOf(ChrW(3)) > -1 Then
          Exit While
        End If
        Array.Clear(Data, 0, Data.Length)
      End If
    End While
Catch ex As SocketException
  If vConnectionSocket.Connected Then vConnectionSocket.Close()
    MessageBox.Show("Receiving error >" + ex.ErrorCode.ToString + ":" + ex.Message.ToString)   
  Exit Sub
End Try 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:52:52.650

[阅读文档](http://msdn.microsoft.com/en-us/library/aa329735.aspx)：

> 如果您使用的是面向连接的 Socket，则 Receive 方法将读取尽可能多的数据，最多可达 size 参数指定的字节数。**如果远程主机使用 Shutdown 方法关闭了 Socket 连接，并且已经接收到所有可用数据，则 Receive 方法将立即完成并返回零字节**。

也就是说，当 Receive() 返回 0 时，连接被对方​​关闭。没有更多数据可供读取。关闭连接的一端。

# python - GAE 选择导入的 CSV 的第一列

> ID：14056324
> 
> 赞同：1
> 
> 时间：2012-12-27T14:34:23.423
> 
> 标签：python, google-app-engine, listproperty

我正在将一个简单的 CSV 文件导入到我的 GAE 应用程序中，并且想要选择列表的第一项。下面的代码导入一个 CSV 文件并将每一行保存为一个列表。现在我希望它只显示每个列表项的第一个条目，但如果我使用 data[1] 它表示这超出了范围。我想我错过了一些明显的东西，但似乎无法弄清楚。任何帮助将不胜感激！

```
class CSVImport(webapp2.RequestHandler):
def post(self):
  csv_file = self.request.get('csv_import')
  fileReader = csv.reader(csv_file.split("\n"))
  dataset = []
  dataset.extend(fileReader)
  for data in dataset:
    self.response.out.write(data) 
```

**编辑 1**

有关信息，初始代码给出了以下响应：['name', 'description', 'url', 'category', 'deliverycost', 'returning', 'provider', 'prov_id', 'logo', 'last_update ']['Amazon', 'Changed the desc', 'http://www.url.com', 'Meta', '5 Euro', 'Gratis', 'Affilinet', 'Test', '/images/ logos/amazon.jpg', '2012-12-26 13:11:22.519000']['B 店', '', 'http://www.url.com', '', '', '', '', '', '', '2012-12-26 13:19:01.545000']['Otto', 'Test something', 'http://amazon.de', 'Meta', '', ' sdgs'，'sdgsdg'，'sdgds'，'dsgdsg'，'2012-12-26 13:09：10.716000'][]

根据 RocketDonkey 的回答，我将代码改写为以下内容：

```
class CSVImport(webapp2.RequestHandler):
def post(self):
   csv_file = self.request.get('csv_import')
   with open(csv_file, 'rb') as f:
      fileReader = csv.reader(f)
      for data in fileReader:
        print data[0] 
```

然而，这会产生以下错误：IOError: [Errno 13] file not accessible: 'name,description,url,category,deliverycost,returning,provider,prov_id,logo,last_update\r\nAmazon,Changed the desc,http:// www.url.com,Meta,5 Euro,Gratis,Affilinet,Test,/im​​ages/logos/amazon.jpg,2012-12-26 13:11:22.519000\r\nB Shop,,http://www.url .com,,,,,,,2012-12-26 13:19:01.545000\r\nOtto,Test something,http://amazon.de,Meta,,sdgs,sdgsdg,sdgds,dsgdsg,2012-12- 26 13:09:10.716000\r\n'

' *accessible:* ' 之后的内容是 CSV 文件的确切内容，这就是为什么我发现错误 'file notaccessible' 非常显着的原因。CSV 文件通过 HTML 表单进入，如下所示：

```
<form action="/admin/shop/import" method="post" enctype="multipart/form-data">
   <p><strong>Import:</strong>
   <input type="file" name="csv_import" id="csv_import" accept=".csv">
   <input type="submit" value="Import"></p>
</form> 
```

我知道 RemoteAPI 可能是一个更好的解决方案，但是我在 Windows 7 下设置它时遇到了麻烦，这就是为什么我现在尝试将其构建为一种解决方法。因此，一旦我能够从 CSV 文件的单个列中选择数据，我就会将其与我定义的数据库模型相匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:12:56.337

在 python 中，数组从 0...n-1 开始，因此当您尝试仅显示每个列表项的第一个条目时，绝对应该使用数组 [0]，无论如何它都不应该是数据 [1] .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:47:52.370

**编辑：**根据您更新的响应，看起来您正在获取实际文件内容`csv_file`，并且您的换行符分隔符是`\r\n`. 因此，我建议尝试以下方法：

```
In [1]: import csv

In [2]: csv_file = # Copied the response from your error into this variable

In [3]: reader = csv.reader(csv_file.split('\r\n'))

In [4]: for row in reader:
   ...:     if row:
   ...:         print row[0]
   ...:         
   ...:         
name
Amazon
B Shop
Otto 
```

检查完成是因为您可以看到 CSV 字符串的`if row`结尾是`\r\n`，这意味着当您拆分`\r\n`字符时，列表的最后一项将为空。当该空元素被 读取时 `csv.reader`，结果是一个空列表，如您所知，`IndexError`如果您尝试按索引进行任何类型的访问，该列表将失败。或者，您可以事先执行此操作以确保所有“行”都包含值：

```
In [8]: csv_file = [row for row in csv_file.split('\r\n') if row]

In [9]: reader = csv.reader(csv_file)

In [10]: for row in reader:
   ....:     print row[0]
   ....:     
   ....:     
name
Amazon
B Shop
Otto 
```

* * *

我不确定您的用例，但如果您正在使用代码将数据上传到您的应用程序，我建议您查看[远程 API](https://developers.google.com/appengine/docs/python/tools/remoteapi) - 这提供了一种非常简洁的方法来执行此操作并阻止您必须使用特殊的处理程序等。

我会假设您传递的是实际的 CSV（不是文件的字符串名称 - 如果您传递的是文件名，请参见下文），所以是这样的：

```
some_csv = 'header1,header2\nvalue1,value2' 
```

您正在做的是在换行符上拆分并传递`csv.reader`一个要迭代的对象，其结果是一个`csv.reader`对象。请注意，您可以直接迭代此对象，因此您不需要创建单独的`dataset`变量：

```
In [1]: import csv

In [2]: some_csv = 'header1,header2\nvalue1,value2'

In [3]: fileReader = csv.reader(some_csv.split("\n"))

In [4]: fileReader
Out[4]: <_csv.reader object at 0x1306440>

In [5]: for data in fileReader:
   ...:     print data
   ...:     
   ...:     
['header1', 'header2']
['value1', 'value2'] 
```

Using`print data[1]`将打印每个列表的第二项（如@sadaf2605 所述，Python 使用从零开始的索引，因此第一个元素实际上是`data[0]`）。您的错误表明每行只有一个元素，因此首先要检查的是您是否实际上将逗号分隔的值传递给该参数。

但是，您还提到您正在导入 CSV**文件**- 您的 URL 参数是对文件名本身的字符串引用吗？如果是这样，那将导致问题，因为您实际上不会打开文件 - 您将迭代一个仅包含文件本身名称的对象，而不是数据：

```
In [1]: import csv

In [2]: some_csv = 'some_csv.csv'

In [3]: fileReader = csv.reader(some_csv.split("\n"))

In [4]: for data in fileReader:
   ...:     print data
   ...:     
   ...:     
['some_csv.csv'] 
```

再次在从零开始的索引上，您可以看到该数组没有第二个元素，因此您将获得`IndexError`. 如果这是你的情况，你可以试试这个（虽然我会再次建议远程 API :)）

```
In [1]: import csv

In [2]: some_csv = 'some_csv.csv'

In [3]: with open(some_csv, 'rb') as f:
   ...:     fileReader = csv.reader(f)
   ...:     for data in fileReader:
   ...:         print data[0]
   ...:         
   ...:         
header1
value1 
```

# elasticsearch - 弹性搜索分组查询

> ID：14056326
> 
> 赞同：1
> 
> 时间：2012-12-27T14:34:33.913
> 
> 标签：elasticsearch

我正在索引一个键值对数组。键始终是 UUID，值是用户输入的值。我一直在浏览文档，但我不知道如何在这种情况下查询示例模式：

```
{
  "id": 1,
  "owner_id": 1,
  "values": [
    { "key": "k3kfa23rewf", "value": "the red card" },
    { "key": "23a2dd23108", "value": "purple balloons" },
  ]
},
{
  "id": 2,
  "owner_id": 1,
  "values": [
    { "key": "k3kfa23rewf", "value": "the blue card" },
    { "key": "23a2dd23108", "value": "purple balloons" },
  ]
} 
```

我想查询：

```
{ "term": { "owner_id": 1 },
{ "term": { "values.key": "23a2dd23108" }, "match": { "values.value": "purple" } },
{ "term": { "values.key": "k3kfa23rewf" }, "match": { "values.value": "blue" } } 
```

以便返回 ID 为 2 的记录。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:00:21.257

我认为您需要在这里使用[嵌套文档](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)。

这样，您将能够创建[BoolQueries](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)，其中一个 Must 子句在 owner_id 上带有一个 TermQuery，两个 must 子句带有[嵌套查询](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)`values.key`，在and上带有 Term 和 Match 查询`values.value`。

它有帮助吗？

# php - 来自其他工作表的 PHPExcel 公式 COUNTIFS

> ID：14056327
> 
> 赞同：1
> 
> 时间：2012-12-27T14:34:45.467
> 
> 标签：php, phpexcel

我正在处理一张非常大的工作表，该工作表是从数据库创建的，有 40 列，超过 3000 行，我`Backup Data`在 Php Excel 中设置了它的标题

现在我创建了一个新工作表，可以在其中设置不同单元格的值。我需要使用 countifs 公式来显示从工作`Backup Data`表到工作`Summary`表的结果

```
$sheetSummary->setCellValue('E39', '=COUNTIFS(\'Backup Data\'!$H:$H,"=KTM", \'Backup Data\'!$J:$J,"=Full Size", \'Backup Data\'!$Y:$Y,"<>SPD", \'Backup Data\'!$U:$U, ">=1-Dec-12", \'Backup Data\'!$U:$U, "<=31-Dec-12")'); 
```

当我在 php 中使用公式时

提示一个文件，但是当我在记事本中打开文件时，它会显示此文本[http://pastie.org/5584430](http://pastie.org/5584430)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:41:22.773

问题是 PHPExcel 的公式尚不支持使用列引用，例如 $H:$H 和 $J:$J。改用范围（例如 $H1:$H3000）或禁用保存时的预计算

**编辑**

要在保存时禁用预计算：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->setPreCalculateFormulas(FALSE);
$objWriter->save('myFile.xlsx'); 
```

# javascript - 使用 Java Script 将可变数量的答案保存到单个文本框

> ID：14056334
> 
> 赞同：2
> 
> 时间：2012-12-27T14:34:57.920
> 
> 标签：javascript, html

我正在学习 JS，但我还不熟悉内部工作。有人可以指出我的想法中的错误吗？

基本思想是提出一个复杂的问题，用 JS（以 CSV 语法）构造答案并将其提供给文本框。（从这里它将被处理到一个数据库。）下面的例子：你有几个孩子？他们的名字和年龄是多少？

也许，第一个按钮生成的新元素没有添加到文档中？如何做到这一点，或者如何解决其中的价值？

在添加新行的情况下，如何使提交到前一行的值保持不变。例如`'Jack'`，`'10'`写入第一行，用户按下添加新行，比此信息应该留在第一行。

不正确的工作示例：如果添加了循环中的代码，则保存按钮将停止工作。

```
<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
    </head>
    <body>

        <p>How many children do you have? What is their names and age?</p>
        <input type="text" id="qchildren" />
        <div id="qchildren-answer-wrapper"></div>

        <button type="button" onclick="addNew()">Add new entry</button>
        <button type="button" onclick="save()">Save</button>
        <script>
        var lines = 0;

        function addNew() {
            lines++;
            document.getElementById("qchildren-answer-wrapper").innerHTML += 'Gyermek neve:<input type="text" id="qchildrenname' + window.lines + '" /> Gyermek eletkora:<input type="text" id="qchildrenage' + window.lines + '" /><br/>';
        }

        function save() {
            var answer = '';
            for (var ii = 0; ii < window.lines; ii++) {
                answer += document.getElementById('qchildrenname' + ii.toString()).value.toString() + ',' + document.getElementById('qchildrenage' + ii.toString()).value.toString() + ';';
            }
            document.getElementById("qchildren").value = answer;
        }
        < /script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:42:19.877

试试这样的代码：

```
function addNew()
{
    var div = document.createElement('div');
    div.innerHTML = 'Gyermek neve:<input type="text" id="qchildrenname'+window.lines+'" /> Gyermek eletkora:<input type="text" id="qchildrenage'+window.lines+'" /><br/>';
document.getElementById("qchildren-answer-wrapper").appendChild(div );
lines++;
} 
```

演示：http: [//jsfiddle.net/JByVg/8/](http://jsfiddle.net/JByVg/8/)

在您的情况下发生的情况是，所有先前创建的元素都被重新创建，因为`element.innerHTML += "some_html"`等于`element.innerHTML = element.innerHTML + "some_html"`或更清楚，我想，`var oldHtml = element.innerHTML;element.innerHTML = ""; element.innerHTML = oldHtml + "some_html"`

浏览器不会填充用户输入的 value="..." 当您这样做时`var oldHtml = element.innerHTML`以及在`+=`您重新创建没有用户输入值的旧元素之后。同时，appendChild 不会重新创建旧元素。

[此](http://jsfiddle.net/JByVg/4/)示例演示如何`.innerHTML`仅返回初始 HTML（我已将 value="test" 添加到您的`qchildrenname`元素代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:42:23.933

=下面的代码应该可以工作（AddNew 函数已更改）：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
</head>
<body>

<p>How many children do you have? What is their names and age?</p>
 <input type="text" id="qchildren" />
 <div id="qchildren-answer-wrapper"></div>

<button type="button" onclick="addNew()">Add new entry</button>
<button type="button" onclick="save()">Save</button>

<script>
var lines=0;
function addNew()
{
lines++;
var newElement = document.createElement("span");
  newElement.innerHTML =  'Gyermek neve:<input type="text" id="qchildrenname'+window.lines+'" /> Gyermek eletkora:<input type="text" id="qchildrenage'+window.lines+'" /><br/>';
document.getElementById("qchildren-answer-wrapper").appendChild(newElement);
}

function save()
{
var answer='';
for (var ii=1;ii<=window.lines;ii++)
{ 
answer+=document.getElementById('qchildrenname'+ii.toString()).value.toString()+','+document.getElementById('qchildrenage'+ii.toString()).value.toString()+';';
}
document.getElementById("qchildren").value=answer;
}
</script>

</body>
</html>​ 
```

# c++ - TCP winsock 使用 C++ TransmitFile 和重叠 I/O 上传文件

> ID：14056336
> 
> 赞同：0
> 
> 时间：2012-12-27T14:34:59.727
> 
> 标签：c++, winsock

我正在编写一个负责将文件上传到服务器的应用程序，在 C++ Winsock 中，我使用多线程技术成功编写了它，它工作正常，没有错误。但是当我想使用 Overlapped I/O 技术时，我遇到了一个问题，即并非所有文件都被服务器接收。

我将发布与发送和接收文件相关的代码部分。

```
int iRecv = WSARecv(AcceptSocket, &DataBuf, 1, &RecvBytes, &Flags, &AcceptOverlapped, NULL);
int iBytesReceived = 0;
while(true)
{   
    printf("error =%d\r",WSAGetLastError());
    // Step 7:
    //  Determine the status of the overlapped
    //  request
    WSAGetOverlappedResult(AcceptSocket, &AcceptOverlapped, &BytesTransferred, FALSE, &Flags);

    // Step 5:
    //  Wait for the overlapped I/O call to complete
    Index = WSAWaitForMultipleEvents(EventTotal, EventArray, FALSE, WSA_INFINITE, FALSE);

    // Index should be 0 because we 
    // have only one event handle in EventArray
    // Step 6:
    //  Reset the signaled event
    WSAResetEvent(EventArray[Index - WSA_WAIT_EVENT_0]);
    if( iRecv>=0)
    {    
        iBytesReceived += RecvBytes;
        fwrite(DataBuf.buf,sizeof(char), RecvBytes,flUploadedFile);
    }
    if (lReceivedBytes>=iFilesize)  break;

    Flags = 0;
    ZeroMemory(&AcceptOverlapped, sizeof(WSAOVERLAPPED));
    AcceptOverlapped.hEvent = EventArray[Index - WSA_WAIT_EVENT_0];

    DataBuf.len = DATA_BUFSIZE;//1024
    DataBuf.buf = buffer;

    iRecv=WSARecv(AcceptSocket, &DataBuf, 1, &RecvBytes, &Flags, &AcceptOverlapped, NULL);
} 
```

我不得不提到服务器正在正确接收文件名和文件大小。

客户端

```
void UploadFile(....)
{
    .
    .
    .   
hFile = CreateFile(fp,GENERIC_READ, FILE_SHARE_READ, NULL,   OPEN_EXISTING,FILE_FLAG_SEQUENTIAL_SCAN,NULL);
bTrans= TransmitFile(connectedSocket,hFile,0,0,NULL,NULL,0) ;     
    .
    .
} 
```

他们在我的代码中是否存在任何错误？有什么建议或帮助吗？我被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T07:49:06.913

似乎第一个`WSARecv()`立即返回数据的第一部分（文件名和大小）。然后代码阻塞，因为您想在操作系统发出信号表明结果可用（通过设置事件句柄）之前获得重叠的结果。

在使用重叠 I/O 时，也许您应该使用完成例程，这将使它更容易。

# asp.net-mvc - ASP.NET MVC 4 中如何配置服务器端日期验证的格式？

> ID：14056337
> 
> 赞同：0
> 
> 时间：2012-12-27T14:35:06.050
> 
> 标签：asp.net-mvc, date, asp.net-mvc-4, datepicker, validation

ASP.NET MVC 4 中服务器端日期验证的格式是如何配置的？例如，以下模型字段（'BirthDate'）仅根据客户端上的格式 'MM/dd/yyyy' 进行验证。在我的服务器上，当 POST 数据绑定到模型时，显然需要格式“dd/MM/yyyy”。

```
[Required]
[Display(Name = "Date of Birth")]
[DisplayFormat(DataFormatString="{0:MM/dd/yyyy}", ApplyFormatInEditMode=true)]
[DataType(DataType.Date)]
public DateTime BirthDate { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:35:06.050

ASP.NET MVC 服务器上的日期验证与配置的区域性相关联。默认情况下，文化是未指定的，而是采用 Web 客户端的文化。因此，例如，要在服务器上使用美国日期约定，请按如下方式编辑 Web.config的[configuration/system.web/globalization](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx)`uiCulture`元素（不应影响此验证，但我已将其添加为良好的衡量标准） ：

```
<globalization culture="en-us" uiCulture="en-us"></globalization> 
```

# sql - SQL 检查值在可变（和多个）范围内

> ID：14056341
> 
> 赞同：0
> 
> 时间：2012-12-27T14:35:16.567
> 
> 标签：sql, sql-server-2008

我有一个 SQL 表，其中包含描述一系列 ID 的两列；这些范围需要与第二个表中特定 ID 列下的单元格进行比较 - 如果它在范围内，包括在内，第二个表的行将包含在返回中。

编辑：可用范围受用户提供的日期范围的限制。

我只熟悉SQL的基础知识；在我开始研究循环和预定义的表格函数之前，有人有什么建议吗？

```
SELECT * FROM [ADataBase].[dbo].[AFirstTable]
  WHERE [ALongIDNumber] <=
     (SELECT [StartOfIDRange] FROM [DHL].[dbo].[ASecondTable]
     WHERE [date] BETWEEN '2010-01-21' AND '2010-01-22')
  AND   [ALongIDNumber] >=
     (SELECT [EndOfIDRange] FROM [DHL].[dbo].[ASecondTable]
      WHERE [date] BETWEEN '2010-01-21' AND '2010-01-22') 
```

目前，这会返回错误 `Msg 512, Level 16, State 1, Line 2` `Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.` ，我猜这是因为选择返回了几行而导致它起毛。

我研究过，遇到了[一个类似的问题](https://stackoverflow.com/questions/4344197/sql-query-for-finding-a-value-in-multiple-ranges)，唯一的答案是固定数量的范围。因为我在表格中查询范围，所以范围的数量会改变。

由于这种情况的性质，修改数据库是最后的手段。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:33:45.620

从您的叙述中我真的不清楚，但我认为您*可能*正在寻找的是 Join 的概念：

```
SELECT * FROM
   [ADataBase].[dbo].[AFirstTable] first
       inner join
   [DHL].[dbo].[ASecondTable] second
       on
          first.[ALongIDNumber] between second.[StartOfIDRange] and second.[EndOfIDRange]
WHERE
   second.[date] BETWEEN '20100121' AND '20100122' 
```

这将找到`first`适合任何 ID 值范围的行，这些 ID 值在`second`. 这确实意味着，如果第二个 ID 值的范围重叠，您可能会在结果集中收到多行，而`first`.

> 在我开始研究循环之前...

不。尽管有一些粗略的方法可以在 SQL 中执行循环，但你真的不应该去那里。SQL 背后的想法是您描述*您*想要的结果，SQL 引擎会找出实现该结果的最佳方法（无论是在幕后、循环、创建哈希表、将项目溢出到磁盘等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:39:18.067

这是一个简单的连接：

```
select st.*
from SecondTable st join
     FirstTable ft
     on st.id between ft.StartOfIdRange and ft.EndOfIdRange 
```

您似乎对日期有附加条件。您没有在问题中解释它们，所以我不确定如何将它们合并到查询中。

我仔细阅读后发现日期在第一个表中。好吧，您可以在`on`子句或`where`子句中添加范围：

```
select st.*
from SecondTable st join
     FirstTable ft
     on st.id between ft.StartOfIdRange and ft.EndOfIdRange and
        ft.[date] BETWEEN '2010-01-21' AND '2010-01-22' 
```

如果您有重叠的范围，您可能需要执行 a`distinct`来删除重复项：

```
select distinct st.* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:40:22.507

假设`2010-01-21`and`2010-01-22`分别是最小和最大日期，您可以使用`MIN()`and`MAX()`函数在每个子查询中获取单个 ID：

```
SELECT * 
FROM [ADataBase].[dbo].[AFirstTable]
WHERE [ALongIDNumber] BETWEEN
(
    SELECT MIN(ID)
    FROM [DHL].[dbo].[ASecondTable]
)
AND
(
    SELECT MAX(ID)
    FROM [DHL].[dbo].[ASecondTable]
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:53:34.563

oracle有Between关键字来检查范围，请这样。关键字之间的示例

```
SELECT * FROM [ADataBase].[dbo].[AFirstTable]
      WHERE [ALongIDNumber] between
         (SELECT [StartOfIDRange] FROM [DHL].[dbo].[ASecondTable]
         WHERE [date] BETWEEN '2010-01-21' AND '2010-01-22')
      AND   
         (SELECT [EndOfIDRange] FROM [DHL].[dbo].[ASecondTable]
          WHERE [date] BETWEEN '2010-01-21' AND '2010-01-22') 
```

# java - 解组 XML 的一部分

> ID：14056345
> 
> 赞同：3
> 
> 时间：2012-12-27T14:35:32.160
> 
> 标签：java, xml, xml-parsing, jaxb, unmarshalling

我有这个 XML

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <ns2:listItemsResponse xmlns:ns2="http://soap.ws.server.wst.fit.cvut.cz/">
            <return>
                <code>OK</code>
                <data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xsi:type="ns2:items">
                    <item>
                        <itemId>1540041177</itemId>
                        <price>5109</price>
                    </item>
                    <item>
                        <itemId>696734629</itemId>
                        <price>5453</price>
                    </item>
                    <item>
                        <itemId>1853843391</itemId>
                        <price>5088</price>
                    </item>
                </data>
            </return>
        </ns2:listItemsResponse>
    </soap:Body>
</soap:Envelope> 
```

我想将`data`元素解组到我的 POJO（不是整个 XML，只是其中的一部分）。JAXB可以吗？

```
@XmlRootElement(name = "data")
public class Data {

    private List<Item> items;

    public Data() {
    }

    @XmlElement(name = "item")
    public List<Item> getItems() {
        return items;
    }

    public void setItems(List<Item> items) {
        this.items = items;
    }

    @Override
    public String toString() {
        return "Data [" + (items != null ? "items=" + items : "") + "]";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:49:28.933

您可以使用 StAX`XMLStreamReader`前进到您感兴趣的内容，然后将其解组。

**了解更多信息**

*   [http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html](http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:53:21.287

我忘了提到我正在使用 DOM。但我找到了解决方案

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
document = builder.parse(new ByteArrayInputStream(body.getBytes()));
document.getDocumentElement().normalize(); 
```

当我遍历文档中的节点时，我可以简单地（当我有我想要的节点时）

```
JAXBContext jaxbContext = JAXBContext.newInstance(Data.class);
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
Data data = (Data) jaxbUnmarshaller.unmarshal(node); 
```

# codeigniter - codeigniter : 在视图的 div 中加载视图

> ID：14056347
> 
> 赞同：0
> 
> 时间：2012-12-27T14:35:48.433
> 
> 标签：codeigniter, codeigniter-2

可以说我hv这个观点（主要）

```
<body>
lorem epsim
<div table></div>
lorem epsim
</body> 
```

在控制器 control1.php 我做

```
$this->load->view('header');
$this->load->view('main',$data);
$this->load->view('footer'); 
```

现在我需要从另一个视图（tbl.php）加载 div=table 的内容，它是从另一个控制器调用的

控制2.php

```
function load_table(){
$data['x']=1;
$this->load->view('tbl.php',$data);
} 
```

tbl.php 视图

```
<ul>$x</ul> 
```

我怎样才能做到这一点 ？

我试图从控制器 1 加载控制器 2 并将函数 load_table 分配给变量并将其传递给主视图，但它没有工作，因为 load->view 被执行而不是将输出保存到变量..

**原因：** 我需要这样做是因为 tbl.php 视图是一个复杂的表，我需要通过 ajax 调用刷新和加载，所以我需要它单独在不同的视图上，所以有人可以向我解释我该如何工作出去 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T20:34:37.960

您不能从另一个单独的控制器调用一个控制器方法。但是，您可以获取表格视图的输出并使用它：

```
// main.php
<body>
lorem epsim
<div table><?php echo $table_content; ?></div>
lorem epsim
</body> 
```

.

```
// control1.php

$table_data['x'] = 1;
$data['table_content'] = $this->load->view('tbl.php', $table_data, TRUE);

$this->load->view('header');
$this->load->view('main',$data);
$this->load->view('footer'); 
```

因此，您将数据传递给 tbl.php 视图并将其传递给 load->view 方法 - 也`TRUE`作为第三个参数传递 - 它将将该视图的内容作为字符串返回（而不是将其输出到浏览器）。现在，您有一个 $data 变量要传递给`main`包含表 html 的视图，您可以在主视图中回显它。

如何`$data['table_content']`从视图中获取数据取决于您。**您可以在**control1.php中创建另一个控制器方法，您可以创建一个帮助文件，该文件可以将视图加载到字符串中并返回，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:59:07.627

也许您可以在其中创建一个包含表格代码的视图，然后您可以在 div 中执行 ajax

```
<div id="for_ajax">
       <?php $this->load->view('table'); ?>
</div> 
```

我有类似的需求，但我的需求就像问题的评论墙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T17:07:27.910

在 php 块中使用以下视图

```
$CI = &get_instance();
$CI->load->view('view_name'); 
```

# deprecated - 不推荐使用 CCMenu::menuWithItems()

> ID：14056348
> 
> 赞同：0
> 
> 时间：2012-12-27T14:35:53.150
> 
> 标签：deprecated

我创建了一个 CCMenu 对象并想向其中添加一个项目，但 menuWithItem() 方法似乎已弃用，因此该项目不会添加到我的菜单中。以下是我的使用方法：

```
 CCMenuItemFont* pExitButton = CCMenuItemFont::itemWithString(
                                                             "Exit",
                                                             this,
                                                          SEL_MenuHandler(CallbackOnExit));

    CCMenu* pMenu = (CCMenu::menuWithItem(pExitButton, NULL); 
```

完成这项工作的另一种可能方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:17:02.357

试试这个： CCMenuItemFont* pExitButton = CCMenuItemFont:: **itemFromString** ( "Exit", this, SEL_MenuHandler(CallbackOnExit));

# sql-server - TSQL忽略UNION之后的where语句

> ID：14056349
> 
> 赞同：0
> 
> 时间：2012-12-27T14:35:54.440
> 
> 标签：sql-server, tsql

在对两个表进行联合之后，现在它忽略了我的 WHERE 语句的 @Badge 参数。代码如下。

```
SELECT     TOP (100) PERCENT ID_BADGE, LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) 
                      + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime, DATE_TRX, CODE_TRX

FROM omi.DCUTRX_ZERO 

UNION ALL 

SELECT     TOP (100) PERCENT ID_BADGE, LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) 
                      + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime, DATE_TRX, CODE_TRX
FROM omi.TAHIST_ZERO 

WHERE     (ID_BADGE = '     ' + @Badge)  AND (DATE_TRX BETWEEN @Date AND @Date2) AND (SEQ_REC IN ('0', '1000')) AND (CODE_TRX IN ('100', '101')) 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:40:07.600

如果您希望将 WHERE 应用于两者，则需要包装语句并将其应用于结果集，如下所示：

```
SELECT *
FROM (
    SELECT TOP (100) PERCENT ID_BADGE,
        LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime,
        DATE_TRX,
        CODE_TRX
    FROM omi.DCUTRX_ZERO 
    UNION ALL 
    SELECT TOP (100) PERCENT ID_BADGE,
        LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime,
        DATE_TRX,
        CODE_TRX
    FROM omi.TAHIST_ZERO
) q
WHERE (ID_BADGE = '     ' + @Badge)  AND
    (DATE_TRX BETWEEN @Date AND @Date2) AND
    (SEQ_REC IN ('0', '1000')) AND
    (CODE_TRX IN ('100', '101')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:40:45.283

如果要将 WHERE 子句应用于所有结果，请尝试以下操作：

```
select * from (
SELECT TOP (100) PERCENT 
    ID_BADGE, 
    LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime, 
    DATE_TRX, 
    CODE_TRX
FROM omi.DCUTRX_ZERO 

UNION ALL 

SELECT TOP (100) PERCENT 
    ID_BADGE, 
    LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime, 
    DATE_TRX, 
    CODE_TRX
FROM omi.TAHIST_ZERO 
) omi
WHERE (omi.ID_BADGE = '     ' + @Badge)  
    AND (omi.DATE_TRX BETWEEN @Date AND @Date2) 
    AND (omi.SEQ_REC IN ('0', '1000')) 
    AND (omi.CODE_TRX IN ('100', '101')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:27:27.220

WHERE 过滤器应用于最后一个 UNION SELECT ..

更好的 SQL 如下：

```
SELECT     TOP (100) PERCENT ID_BADGE, LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) 
+ ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime, DATE_TRX, CODE_TRX
FROM omi.DCUTRX_ZERO 
WHERE     (ID_BADGE = '     ' + @Badge)  AND (DATE_TRX BETWEEN @Date AND @Date2) AND (SEQ_REC IN ('0', '1000')) AND (CODE_TRX IN ('100', '101'))

UNION ALL 

SELECT     TOP (100) PERCENT ID_BADGE, LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) 
                  + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime, DATE_TRX, CODE_TRX
FROM omi.TAHIST_ZERO
WHERE     (ID_BADGE = '     ' + @Badge)  AND (DATE_TRX BETWEEN @Date AND @Date2) AND (SEQ_REC IN ('0', '1000')) AND (CODE_TRX IN ('100', '101')) 
```

# java - 了解字符串比较在 Java 中的工作原理

> ID：14056356
> 
> 赞同：0
> 
> 时间：2012-12-27T14:36:35.413
> 
> 标签：java, string, string-comparison

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我是 Java 新手，很难理解字符串比较。谁能解释以下场景之间的区别？

**方案 1：**

```
String a = "abc";    
String b = "abc"; 
```

当我运行`if(a == b)`它返回true。

**方案 2：**

```
String a = new String("abc");    
String b = new String("abc"); 
```

然后运行`if(a == b)`它返回false。

有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:37:02.790

`==`运算符比较内存中两个对象的引用。如果它们指向相同的位置，则返回 true。`String`java中的对象是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的，所以当你像在scenario1中那样创建字符串时，它并没有创建新的字符串。它只是将第二个字符串指向第一个字符串的内存位置。

但是，`.equals()`方法比较字符串的内容。当字符串具有相同的值时，此方法返回 true。

因此，一般建议使用`equals()`method 而不是`==`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T14:37:57.830

这是因为*Java String 常量内存池*。相同值的文字存储一次。

```
String a = "abc";
String b = "abc";
// Now there is 1 string ("abc") and 2 references pointing to it.

String a = new String("abc");
String b = new String("abc");
// Now you have 2 string instances and 2 references. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T14:50:01.563

创建字符串的两种方法是 1) String s ="hello"; 字符串文字数 = 1 即“hello” - 堆上的字符串对象数 = 0

2) 字符串 s= 新字符串（“你好”）；- 字符串文字数 =1 和字符串对象数 =1

Java 维护一个“LITERALS”字符串池，对象将留在堆上。

字符串池的优点：1）减少内存使用*（PermGenSpace问题）2）更快的比较，即==比较3）更快的查找缺点：1）维护池的开销

如何池化字符串对象？在字符串上使用 Intern() 将其添加到池中。实习的缺点： 1）您可能忘记实习一些字符串并通过 == 比较它们导致意外结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T14:38:42.573

在 Java 中，您需要像这样使用`if(str.equals(str2))`比较字符串的实际值而不是引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T14:39:51.160

**情况1：**

```
 String a = "abc";
    String b = "abc";
    if(a == b) 
```

在这种情况下`abc`，*缓存在字符串常量池中*，因此不会创建新字符串， `String b = "abc";` `b`只是指由它创建的字符串，**它**返回 true，`a`并且`b`都指向内存中的同一个对象。

**案例2：**

```
String a = new String("abc");
String b = new String("abc");
and run if(a == b) then it returns false. 
```

这里创建了两个字符串，`==`操作员只检查两个引用是否指向同一个引用，在这种情况下它没有，因此它返回 false

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T14:40:46.397

原因是 String 文字`"abc"`将在所有出现时都变成全局 String 实例，**它将是同一个 String 实例**，因此您可以确定`"abc" == "abc"`. 编译器可以这样做，因为 String 实例是不可变的。但是，如果您显式分配 String ，它们将是两个不同的实例，并且它们也将不同于编译器隐式创建的 String 实例，即`new String("abc") != new String("abc")`和`"abc" != new String("abc")`.

另一个了解编译器在做什么的好例子是看这段代码：

```
"abc".contains("a"); 
```

您会看到文字的行为类似于 String 类型的实例。您可以利用它来最小化编程错误，例如

```
// this is OK and the condition will evaluate to false
String myStringValue = null;
if ("abc".equals(myStringValue)) { // false 
```

而此代码会导致 NPE：

```
// this will produce a NPE    
String myStringValue = null;
if (myStringValue.equals("abc")) { // NPE 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-27T14:37:55.483

由于编译器优化，场景 1 返回 true。

一般来说，您应该使用`equals()`而不是`==`比较字符串。

# php - Python、nginx 和 Flask，如何执行 php post 脚本 - 405 METHOD NOT ALLOWED

> ID：14056365
> 
> 赞同：0
> 
> 时间：2012-12-27T14:37:12.587
> 
> 标签：php, python, nginx

我有一个需要执行的客户端脚本。它是一个发布帖子的 php 脚本。我的 web 框架是使用 uWSGI 作为中间件的 python flask 和 nginx。php 文件是将 dhtmxlGrid 导出到 excel 的脚本。当尝试导出时...以下错误是我得到的。我对PhP一无所知。

这是我要执行的命令。我在服务器上安装了 php，所以我相信。刚刚做了一个apt-get install php5。

```
<input type="image" src="static/pix/excel.png" WIDTH=25 HEIGHT=25 value="Get as Excel" onclick="mygrid.toExcel('static/js/dhtmlxGrid/codebase/grid-excel-php/generate.php');"> 
```

这是我单击导出到 excel 按钮时遇到的 FireFox 错误。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<title>405 Method Not Allowed</title>
<h1>Method Not Allowed</h1>
<p>The method POST is not allowed for the requested URL.</p> 
```

更新：

我将以下内容添加到 nginx.conf 文件中。

```
location /static/js/dhtmlxGrid/codebase/grid-excel-php/generate.php {
            access_log   off;
            allow 127.0.0.1;
        } 
```

同样的错误。405。

如果我在 broser 中调用[http://dashboard.com/static/js/dhtmlxGrid/codebase/grid-excel-php/generate.php ，我会得到一个下载 generate.php 对话框，我可以在其中看到代码。](http://dashboard.com/static/js/dhtmlxGrid/codebase/grid-excel-php/generate.php)所以......猜测php没有被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:46:17.820

Flask 或 Python 不知道如何解释 PHP，您还允许在任何路由上使用 POST 方法，最好的办法是在 nginx 中捕获请求并从 php 解释器中提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:22:24.100

您需要`location`在您的 nginx 配置中添加一个指令，该指令指向`static/generate.php`并使用 PHP 解释器呈现它。然后在您的烧瓶应用程序中，您发布到您的 nginx 配置中定义的 URL。

# r - 将字符串直接转换为 IDateTime

> ID：14056370
> 
> 赞同：13
> 
> 时间：2012-12-27T14:37:21.960
> 
> 标签：r, datetime, data.table

我正在使用新版本，`data.table`尤其是 AWESOME`fread`功能。我的文件包含作为字符串加载的日期（因为我不知道该怎么做）看起来像`01APR2008:09:00:00`.

我需要在这些日期时间对 data.table 进行排序，然后才能有效地以`IDateTime`格式（或我还不知道的任何其他内容）进行排序。

```
> strptime("01APR2008:09:00:00","%d%b%Y:%H:%M:%S")
[1] "2008-04-01 09:00:00"

> IDateTime(strptime("01APR2008:09:00:00","%d%b%Y:%H:%M:%S"))
        idate    itime
1: 2008-04-01 09:00:00

> IDateTime("01APR2008:09:00:00","%d%b%Y:%H:%M:%S")
Error in charToDate(x) : 
character string is not in a standard unambiguous format 
```

看来我做不到`DT[ , newType := IDateTime(strptime(oldType, "%d%b%Y:%H:%M:%S"))]`。

我的问题是：

1.  有没有办法直接转换为`IDateTime`from `fread`，这样我就可以有效地进行排序？
2.  如果不是，那么知道我希望能够按此日期时间列对 DT 进行排序的最有效方法是什么

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T00:27:34.700

不幸的是（为了提高效率）`strptime`产生了一个 POSIXlt 类型，它不受它的支持，`data.table`并且总是由于它的大小（每个日期 40 字节！）和结构。尽管`strftime`产生了更好的 POSIXct，但它仍然通过 POSIXlt 来实现。更多信息在这里：

```
http://stackoverflow.com/a/12788992/403310 
```

寻找诸如 之类的基本函数`as.Date`，它也使用`strptime`从存储为双精度的纪元（奇怪地）创建一个整数偏移量。中的`IDate`（和朋友）类`data.table`旨在实现整数时代偏移量存储为，嗯，整数。适合快速排序`base::sort.list(method = "radix")`（实际上是计数排序）。`IDate`并不是真正的目标是快速（通常是一次性）转换。

因此，为了正确或错误地转换字符串日期/时间，我倾向于推出自己的辅助函数。

如果字符串日期是`"2012-12-24"`我倾向于：`as.integer(gsub("-", "", col))`并继续使用`YYYYMMDD`整数日期。同样，时间可以是`HHMMDD`整数。两列：如果您通常希望在一天之内使用`date`，单独使用可能很有用，但不是前一天。按月分组简单快捷：. 添加和减去天数很麻烦，但无论如何您都不想添加日历日，而是添加工作日或工作日。因此，无论如何，这都是对您的工作日向量的查找。`time``roll = TRUE``by = date %/% 100L`

在您的情况下，字符月份需要转换为`1:12`. 您的日期“01APR2008”中没有分隔符，因此 a`substring`将是一种方式，后跟 a `match`or`fmatch`在月份名称上。您可以控制文件格式吗？如果是这样，数字最好采用自然排序的明确格式，例如`%Y-%m-%d`, 或`%Y%m%d`。

我还没有弄清楚如何最好地做到这一点`fread`，所以日期/时间目前保留为字符，因为我还不确定如何检测日期格式或输出哪种类型。它确实需要输出整数或双日期，而不是低效的字符。我怀疑我对`YYYYMMDD`整数的使用被视为非常规，所以我有点犹豫是否将其设为默认值。它们有自己的位置，并且基于纪元的日期也有利弊。我建议的只是日期不必*总是基于时代。*

你怎么看？顺便说一句，感谢您的鼓励`fread`；很高兴看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:19:58.517

我不知道您的文件的结构，但从您的评论中您想使用日期字段作为键。为什么不将其作为时间序列阅读并在阅读时对其进行格式化？

这里我使用zoo来做。（这里我假设日期列是第一个，否则参见`index.colum`参数）

```
ff <- function(x) as.POSIXct(strptime(x,"%d%b%Y:%H:%M:%S"))

h <- read.zoo(text = "03avril2008:09:00:00  125
                      02avril2008:09:30:00  126
                      05avril2008:09:10:00  127
                      04avril2008:09:20:00  128
                      01avril2008:09:00:00  128"
                      ,FUN=ff) 
```

您可以以正确的格式对日期进行排序并进行排序。

从 POSIXct 到 IDateTime 的转换很自然

```
 IDateTime(index(h))
        idate    itime
1: 2008-04-01 09:00:00
2: 2008-04-02 09:30:00
3: 2008-04-03 09:00:00
4: 2008-04-04 09:20:00
5: 2008-04-05 09:10:00 
```

在这里确保您仍然进行 2 次转换，但是您在读取数据时执行此操作，而第二次您执行此操作而不处理任何格式问题。

# java - 从 URL 设置联系人照片

> ID：14056371
> 
> 赞同：1
> 
> 时间：2012-12-27T14:37:29.717
> 
> 标签：java, android, contact

我使用此代码从联系人的电话号码中设置图片。从电话号码我得到一个联系人 ID，从这个 ID 我可以得到一个照片 URL。

我试图在 imageview 中设置图片： mPhotoView.setImageURI(uri); 但它不会工作。我已经调试并且 URL 不等于 null。

该 URL 包含以下内容：content://com.android.contacts/contacts/502/photo

有谁知道如何解决这一问题？

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ImageView mPhotoView = (ImageView) findViewById(R.id.imageView1);

    Uri uri = getPhotoUri(Long.parseLong(fetchContactIdFromPhoneNumber(YOUR_PHONENUMBER))); //Set a number for yourself!
    if (uri != null) {
            mPhotoView.setImageURI(uri);
    } else {
            mPhotoView.setImageResource(R.drawable.ic_launcher);
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public String fetchContactIdFromPhoneNumber(String phoneNumber) {
    Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(phoneNumber));
    Cursor cursor = this.getContentResolver().query(uri,
            new String[] { PhoneLookup.DISPLAY_NAME, PhoneLookup._ID },
            null, null, null);

    String contactId = "";

    if (cursor.moveToFirst()) {
        do {
            contactId = cursor.getString(cursor
                    .getColumnIndex(PhoneLookup._ID));
        } while (cursor.moveToNext());
    }

    return contactId;
}

public Uri getPhotoUri(long contactId) {
    ContentResolver contentResolver = getContentResolver();

    try {
        Cursor cursor = contentResolver
                .query(ContactsContract.Data.CONTENT_URI,
                        null,
                        ContactsContract.Data.CONTACT_ID
                                + "="
                                + contactId
                                + " AND "

                                + ContactsContract.Data.MIMETYPE
                                + "='"
                                + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE
                                + "'", null, null);

        if (cursor != null) {
            if (!cursor.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }

    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }

    Uri person = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, contactId);
    return Uri.withAppendedPath(person,
            ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
} 
```

}

# android - GPS 提供程序返回空值

> ID：14056374
> 
> 赞同：0
> 
> 时间：2012-12-27T14:37:43.007
> 
> 标签：android, gps

我尝试使用 GPS 提供商获取当前位置。

*   但据我所知，它不能正常工作。在网络提供商的情况下，它返回 Tower 值，而不是卫星值。
*   在这里，我附上了一些与 GPS Provider 相关的代码示例。

* * *

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f,this);

public void onLocationChanged(Location location) {
    if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        String currentLocation = "Lat: " + lat + " Lng: " + lng;
        txted.setText(currentLocation);
        p = new GeoPoint((int) lat * 1000000, (int) lng * 1000000);
        mc.animateTo(p);
    }
}

public void onProviderDisabled(String provider) {
    // required for interface, not used
}

public void onProviderEnabled(String provider) {
    // required for interface, not used
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // required for interface, not used
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:44:20.797

尝试这个

```
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,this); 
```

稍后您会根据您的要求获得更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:20:27.590

确保启用“使用 GPS 卫星”，从设置 -> 位置和安全 -> 使用 GPS 卫星。

# cuda - 将矩阵乘以标量

> ID：14056383
> 
> 赞同：1
> 
> 时间：2012-12-27T14:38:17.370
> 
> 标签：cuda, cublas

我是 cuda 和 cublas 的新手。

我想将矩阵中的每个元素（我使用 cublasSetMatrix）与一个标量值相乘。

我可以为此使用 cublasscal() 吗？文档说它是用于向量的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:50:05.343

是的，假设您的矩阵是连续存储的，您也可以将其用于矩阵缩放操作。这意味着您使用平面指针做了一个普通的 cudaMalloc 来存储矩阵。在这种情况下，即使它是一个“矩阵”，它也会连续存储在内存中，因此存储看起来与向量相同。如果您有一个 MxN 矩阵，则将 MxN 作为向量中的元素数传递。

例如，类似（为了清晰/简洁而省略错误检查）：

```
float *mymatrix, *d_mymatrix;
int size = M*N*sizeof(float);
mymatrix = (float *)malloc(size);
cudaMalloc((void **)&d_mymatrix, size);
... (cublas/handle setup)
cublasSetVector(M*N, sizeof(float), mymatrix, 1, d_mymatrix, 1);
float alpha = 5.0;
cublasSscal(handle, M*N, &alpha, d_mymatrix, 1); 
```

# c++ - 无法使用“朋友”到达不同类中的向量

> ID：14056389
> 
> 赞同：-1
> 
> 时间：2012-12-27T14:38:40.533
> 
> 标签：c++

我有 2 个课程：`company`和`cpworker`.

我试图将公司中的向量传递给 的函数`cpworker`，但是当我尝试到达向量时它不允许我：

在`company`课堂上：

```
vector<project> projects;
friend void cpworker::registerWork(); 
```

在`cpworker`课堂上：

```
void cpworker::registerWork()
{   
    for (int i = 0; i < company.projects.size(); i++)
    {

    }
} 
```

如您所见，我试图达到向量的大小，但它不允许我.. 另外，我没有使用`get`公司的方法来返回项目的大小，因为我需要完全访问它在循环内。

这是我遇到的错误（全部在 for 循环行中）：

> `* left of .projects must have class/struct/union`
> `* left of .size must have class/struct/union`
> `* type name is not allowed`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:50:19.523

`company`是一个类，除非项目被贴花为静态，否则如果没有该类的实例，您将无法访问它。创建一个实例或使项目成为静态成员。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:24:18.507

不可能创建成员函数`friend`声明，您可以将全局函数或整个类声明为朋友，另请参阅：[C++ ref、友谊和继承](http://www.cplusplus.com/doc/tutorial/inheritance/)。

一般来说，使用朋友根本不是一个好的设计理念，因为它将类强耦合在一起。更好的解决方案是耦合接口（无论如何都不需要公开可见）。在极少数情况下，这可能是一个好的设计决策，但几乎总是适用于内部细节。

# jquery - 在 FF 上动态创建后输入文本不会自动对焦

> ID：14056391
> 
> 赞同：1
> 
> 时间：2012-12-27T14:38:43.353
> 
> 标签：jquery, firefox, autofocus

我单击一个跨度，使用属性创建输入文本`autofocus`（我也尝试使用 autofocus="focus"）。

在 Chrome、Opera、Safari 甚至 IE 上，输入文本会自动对焦，但只有 Firefox 不会自动对焦（我在 FF V 16 和 18 上测试过）

无论如何，我不得不为其他浏览器进行后备，所以我通过 jQuery 添加了焦点，但是在创建输入后，FF 仍然不会接受它。

这就是我通过 jQuery 添加它的方式：

```
<span onclick=" createdTextInput('idOffline','edit'); 
$(function(){ $('#idOfCreatedInput').focus(); });" title=""> clickMe </span> 
```

创建后，我在新创建的 Input 上调用 focus() 。

我什至尝试过使用如下选择器：

```
 $(function() {$('[autofocus]').focus()}); 
```

和

```
 $('input[type="text"]').focus(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:40:43.147

试试这个：

```
$('#idOfCreatedInput').trigger('focus') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T11:04:15.067

我用一个`setTimeout()`和选择器修复了它，`autofocus`因为输入ID它不起作用..

```
setTimeout(function() {
  $("[autofocus]").focus(); 
}, 0); 
```

# windows-8 - 如何在 WinJS 中创建位图裁剪控件

> ID：14056396
> 
> 赞同：0
> 
> 时间：2012-12-27T14:38:54.800
> 
> 标签：windows-8, windows-store-apps, winjs

我想创建控件，让用户以常见的方式决定位图的裁剪区域，在图像上有四个角。我看到微软网站上有一个示例 C# 应用程序 - [http://www.microsoft.com/en-us/showcase/details.aspx?uuid=bef08d57-fa4d-4d9c-9080-6ee55b8623c0](http://www.microsoft.com/en-us/showcase/details.aspx?uuid=bef08d57-fa4d-4d9c-9080-6ee55b8623c0)

但我无法弄清楚如何严格执行 WinJS。我是否需要创建自定义控件 - 如果需要，如何创建？任何示例代码都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:02:05.313

我的[codeSHOW](http://apps.microsoft.com/windows/app/codeshow/afc95986-7be9-4088-820d-4a20d1925c0d)项目中有一个示例。这是一个名为 Rx Crop 的演示。它使用反应式扩展（顺便说一句，这很棒），但如果你不想要那种依赖，你可能只需要使用这个例子来弄清楚如何在没有它的情况下做到这一点。

顺便说一句，codeSHOW 项目目前存在错误和可用性问题。我有更新的认证。现在，只需确保在主屏幕上选择 Rx Crop 演示，然后单击查看代码。如果您在未选择演示的情况下点击查看代码，它将崩溃。

帮我一个忙并评价该应用程序。谢谢。

# appfabric - 基于 Windows Server AppFabric 缓存超时的失效回调

> ID：14056401
> 
> 赞同：0
> 
> 时间：2012-12-27T14:39:14.450
> 
> 标签：appfabric, appfabric-cache

我在启用本地缓存的应用程序中使用 Windows Server AppFabric 缓存。这配置如下：

```
<localCache isEnabled="true" sync="TimeoutBased" objectCount="1000" ttlValue="120"/> 
```

我设置了基于超时的失效，超时间隔为 120 秒。根据此配置，本地缓存将在每 120 秒后从内存缓存中删除项目，并从缓存集群中检索项目。是否可以添加一个回调，每当本地缓存尝试命中缓存集群以检索项目而不是在本地获取它们时，该回调就会被触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:25:35.373

不幸的是，没有办法知道数据是否在本地获取。有缓存服务器通知，但它们不可靠。

在您的场景中，一个好的方法可能是 Read-Through 和 Write-Behind 功能。它并不适合所有情况，但您可以快速浏览一下。

以下是一些链接：

*   [http://msdn.microsoft.com/en-us/library/hh377669.aspx](http://msdn.microsoft.com/en-us/library/hh377669.aspx)
*   [http://blogs.msdn.com/b/prathul/archive/2011/12/06/appfabric-cache-read-from-amp-write-to-database-read-through-write-behind.aspx](http://blogs.msdn.com/b/prathul/archive/2011/12/06/appfabric-cache-read-from-amp-write-to-database-read-through-write-behind.aspx)

# android - 在android wheelview中获取所选项目

> ID：14056413
> 
> 赞同：1
> 
> 时间：2012-12-27T14:40:03.387
> 
> 标签：android

我在我的 android 应用程序中使用 Wheelview 作为 Datepicker，我需要获取所选项目，例如“January”。我尝试了 getCurrentItem() 但我猜它只能获取项目位置而不是确切的文本。

这是我的代码

```
WheelView wheelview = new (WheelView) findViewById(R.id.wheelview1);
String[] ampArray = new String[] {"January", February", "March"}
ArrayWheelAdapter<String> amp = new ArrayWheelAdapter<String>(this, ampArray);
wheelview.setViewAdapter(amp);
wheelview.getCurrentItem(); 
```

任何人都可以对他有更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:57:31.077

从 WheelView 获取当前文本为：

```
String strselected_txt=ampArray[wheelview.getCurrentItem()]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T14:10:35.277

```
protected WheelView getWheel(int id) {
        // TODO Auto-generated method stub
        return (WheelView) findViewById(id);
    }

String variable_name = (ampArray[getWheel(R.id.WheelView_Name).getCurrentItem()]); 
```

# visual-studio - 设置从 Visual Studio/TFS 到 Windows Azure VM 的连续部署

> ID：14056415
> 
> 赞同：3
> 
> 时间：2012-12-27T14:40:04.060
> 
> 标签：visual-studio, deployment, azure

从 Visual Studio/TFS 成功构建后，是否可以自动部署到 Windows Azure VM？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:31:53.473

如果您正在寻找 Windows Azure 虚拟机或 Windows Azure 云服务的解决方案，您的问题并不完全清楚。

**Windows Azure 虚拟机：** 使用 Windows Azure 虚拟机，您拥有自己的虚拟机，这就是您需要配置您决定的任何部署机制的原因。为 Windows Azure 部署的 OS VHD 可能是您上传的那个，也可能是您为图库获取的那个，因此除非有人先配置它们，否则不会运行基本的部署服务。例如，如果您将选择基于 Windows Server 的 Windows Azure 虚拟机，那么您可以在 Azure VM 中安装 Web 部署服务，然后配置您的 VS/TFS 以持续部署它，或者您可以设置基于 FTP 的服务来部署您的应用程序。[这个 SO 讨论](https://stackoverflow.com/questions/11553689/in-visual-studio-can-i-deploy-c-sharp-to-my-own-azure-virtual-machines-rather-t)更多地讨论了这方面。

**Windows Azure 云服务：** 如果您直接从 VS 中寻找解决方案，那么您可以使用 Poweshell 命令添加构建后脚本。该解决方案根本不依赖于 TFS。还**[描述](http://code.msdn.microsoft.com/Automating-a-deployment-ecd7bf3b)**了一些不依赖于 powershell 的解决方案。

使用 Visual Studio 和 Team Foundation 服务器组件，您可以配置 MsBuild 和 PowerShell 脚本的组合，如此处和[此处所述](http://blogs.msdn.com/b/tomholl/archive/2011/12/06/automated-build-and-deployment-with-windows-azure-sdk-1-6.aspx)[（与 Herve 相同）](https://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/)。

如果您正在寻找直接从 Windows Azure TFS（基于云）的解决方案，**[本文](https://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)**包括所需的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:44:44.033

您可以在此处找到有关自动部署的一些信息：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/)

# macos - 终端显示的用户名与登录名不同

> ID：14056419
> 
> 赞同：2
> 
> 时间：2012-12-27T14:40:25.593
> 
> 标签：macos, terminal

我以用户名 geoff 登录到自己的计算机。当我打开终端时，我有提示：

```
Geoffs-MacBook-Air:~ org1$ 
```

org1 是我的*工作*用户名！我没有登录这台计算机的用户名，除非我需要在家访问工作，我使用 VPN 进行此操作。目前VPN没有连接。

我的电脑在做什么？我需要做什么才能获得正常提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:18:53.473

我在 Ask Different 中发布了一个类似的问题。我按照那里的解决方案中的说明进行操作。似乎“您的用户名可以是 Geoff 和帐户的内部（unix）短名称 org1，一切都会得到解释。” 完整信息位于：[https ://apple.stackexchange.com/questions/76068/whoami-is-not-who-i-am](https://apple.stackexchange.com/questions/76068/whoami-is-not-who-i-am)

# sql - 删除临时日志会影响其他用户吗？

> ID：14056428
> 
> 赞同：0
> 
> 时间：2012-12-27T14:40:57.583
> 
> 标签：sql, teradata

由于错误“数据库 DBC 中没有更多空间”，Teradata SQL 助手无法创建新表。我发现 Transient Journal 占用了太多空间。

就我个人而言，不需要期刊。我可以放弃期刊而不会对其他用户造成影响吗？`modify database xxx as drop default journal table;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:05:03.387

您是否将临时日志与桌子上的永久日志混淆了？

Transient Journal 将使用系统上的所有可用空间（TD 13.x 和可能的 TD 12）来保持回滚对系统上的一个或多个事务所做的更改的能力。如果没有需要日志的事务，则不会消耗瞬态日志空间。请记住，某些操作（例如加载空表）可能不需要临时日志，因为回滚状态将是空表。

如果临时日志的可用空间不足，错误消息仍会报告数据库 DBC 因空间不足而出现故障，即使 Teradata 正在消耗系统上用于临时日志的所有可用空间。

另一方面，永久日志是您似乎在使用该 DDL 语句删除的内容。如果您确定永久日志不会对您的应用程序、ETL 流和/或灾难恢复计划的环境和恢复操作产生负面影响，则可以删除它。

# java - 从 CheckBoxTree 节点中删除复选框

> ID：14056430
> 
> 赞同：2
> 
> 时间：2012-12-27T14:40:59.707
> 
> 标签：java, swing, jtree, renderer, jcheckbox

我正在使用 CheckBoxTree 组件来获得一种带有复选框的特殊 JTree。但是，我希望能够在高级节点上没有复选框，因为它们永远不应该被选中，它们只是“分支的名称”。这是树的一个简单示例：

元数据 - 产品 - 产品 A - 产品 B - 等等 - 模型 - 等等

因此，节点“元数据”是树模型的根。由于提供了方便的 setRootVisible 方法（如在 JTree 中），该节点是不可见的。但除了使根不可见之外，我还希望删除第二级复选框。所以基本上，应该只有来自 prod A、prod B 等和向下级别的复选框（可以低几个级别）。但我仍然想要二级的标签。

我尝试根据描述 checkboxtree 组件的该站点实现自定义 CheckboxTreecellRenderer：

[http://www.javaworld.com/javaworld/jw-09-2007/jw-09-checkboxtree.html?page=3](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-checkboxtree.html?page=3)

不幸的是，这不起作用。与网站上的示例相比，我尝试移动添加标签和按钮（我不会使用单选按钮，只是使用它来尝试删除标签以保持简单，但我仍然会如果我让它以某种方式工作，请使用复选框）。我移动它们是为了尝试仅在节点将元数据节点作为其父节点时才设置按钮，从而从第二级删除按钮。

但这没有用。令人惊讶的是，这个概念本身似乎有效，因为 button.setEnabled(false); （在下面注释掉）确实有效。这会禁用正确级别的按钮。但是，如果我尝试不在那里添加按钮，那么我在任何地方都没有按钮......

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package se.expertinfo.ditaplugin;

import it.cnr.imaa.essi.lablib.gui.checkboxtree.CheckboxTree;
import it.cnr.imaa.essi.lablib.gui.checkboxtree.CheckboxTreeCellRenderer;
import it.cnr.imaa.essi.lablib.gui.checkboxtree.TreeCheckingModel;
import java.awt.Color;
import java.awt.Component;
import java.awt.FlowLayout;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JTree;
import javax.swing.UIManager;
import javax.swing.tree.TreePath;

/**
 *
 * @author Anders
 */
public class CustomTreeCellRenderer implements CheckboxTreeCellRenderer {

    JPanel panel = new JPanel();
    JLabel label = new JLabel();
    JRadioButton button = new JRadioButton();

    public CustomTreeCellRenderer() {
        label.setFocusable(true);
        label.setOpaque(true);
        panel.setLayout(new FlowLayout(FlowLayout.LEFT, 0, 0));
//        panel.add(button);
//        panel.add(label);
        button.setBackground(UIManager.getColor("Tree.textBackground"));
        panel.setBackground(UIManager.getColor("Tree.textBackground"));
    }

    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row,
            boolean hasFocus) {
        label.setText(value.toString());
        if (selected) {
            label.setBackground(UIManager.getColor("Tree.selectionBackground"));
        } else {
            label.setBackground(UIManager.getColor("Tree.textBackground"));
        }
        TreeCheckingModel checkingModel = ((CheckboxTree) tree).getCheckingModel();

        TreePath path = tree.getPathForRow(row);

        boolean enabled = checkingModel.isPathEnabled(path);
        boolean checked = checkingModel.isPathChecked(path);
        boolean grayed = checkingModel.isPathGreyed(path);

        button.setEnabled(enabled);

        if (path != null) {
            TreePath parent = path.getParentPath();
            if (parent != null) {
                if (parent.getLastPathComponent().toString().equalsIgnoreCase("metadata")) {
//                    button.setEnabled(false);                    
                    panel.add(label);
                } else {                    
                    panel.add(button);
                    panel.add(label);
                    button.setSelected(checked);
                }
            }
        }

        if (grayed) {
            label.setForeground(Color.lightGray);
        } else {
            label.setForeground(Color.black);
        }
        button.setSelected(checked);
        return panel;
    }

    @Override
    public boolean isOnHotspot(int x, int y) {
        return (button.getBounds().contains(x, y));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:39:34.017

此[示例](http://www.java2s.com/Code/Java/Swing-JFC/CheckBoxNodeTreeSample.htm)`isLeaf()`在 的实现中使用，`isCellEditable()`以将编辑仅限于叶节点。

附录：要排除在某个级别以上的编辑，您可以使用如下谓词检查路径上的元素数量：`path.getPathCount() > 2`.

# javascript - 使用 Div 类的 setInterval 循环的困难

> ID：14056434
> 
> 赞同：2
> 
> 时间：2012-12-27T14:41:25.520
> 
> 标签：javascript, jquery, animation, loops

```
$(document).ready(function fadeIt() {

    $("#cool_content > div").hide();

    var sizeLoop = $("#cool_content > div").length;
    var startLoop = 0;

    $("#cool_content > div").first().eq(startLoop).fadeIn(500);

    setInterval(function () {
        $("#cool_content > div").eq(startLoop).fadeOut(1000);

        if (startLoop == sizeLoop) {
            startLoop = 0
        } else {
            startLoop++;
        }

        $("#cool_content > div").eq(startLoop).fadeIn(1500);

    }, 2000);
}); 
```

在这里，我想要一类 div 无限动画！

但是，因为间隔设置为两秒，所以有一段时间没有显示 div！

循环这些 div 的动画的合适方法是什么？

我考虑过使用 for 循环，但不知道如何将一类 div 作为参数传递。感谢您的所有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:46:58.823

好的，一般来说，你应该知道 Javascript 是一个单线程环境。除此之外，计时器事件通常不会准确地准时。我不确定 jQuery 是如何进行淡入和淡出的，但如果它不使用 CSS3 转换，它将使用 timeOut 和 Intervals。所以基本上，有很多计时器正在运行。

如果你在这个上使用 for 循环，你会阻塞单线程，所以这不是前进的方式。您必须在 setInterval 中自己进行淡入/淡出。

设置每个间隔调用的不透明度。像`div.css('opacity', (opacity -= 10) + '%')`

如果您尝试按顺序淡入和淡出，我认为这段代码可能会有所帮助

```
var opacity = 100,
    isFadingIn = false;
window.setInterval(function() {
    if (isFadingIn) {
        opacity += 10;
        if (opacity === 100) isFadingIn = false;
    } else {
        opacity -= 10;
        if (opacity === 0) isFadingIn = true;
    }

    $('#coolContent > div').css('opacity', opacity + '%');
}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:53:33.633

考虑以下 JavaScript / jQuery：

```
$(function(){
    var divs = $('#cool_content > div').hide();
    var curDiv;
    var counter = 0;
    var doUpdate = function(){
        // Hide any old div
        if (curDiv)
            curDiv.fadeOut(1000);

        // Show the new div
        curDiv = divs.eq(counter);
        curDiv.fadeIn(1000);

        // Increment the counter
        counter = ++counter % divs.length;
    };
    doUpdate();
    setInterval(doUpdate, 2000);
}); 
```

这会在 div 中无限循环。它也比您的代码更有效，因为它只在 DOM 中查询 div 列表一次。

更新：[分叉的小提琴](http://jsfiddle.net/3efrJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:01:13.580

代替

```
if (startLoop == sizeLoop)
{
    startLoop = 0
}
else
{
    startLoop++;
} 
```

采用

```
startLoop =(startLoop+1)%sizeLoop; 
```

检查演示[http://jsfiddle.net/JvdU9/](http://jsfiddle.net/JvdU9/) - 1st div 在 4th 消失后立即被动画化。

**UPD：** 不确定我是否理解了您的问题，但我会尝试回答:) 循环的 div 数量无关紧要 - 4、5 或 10，因为帧数是自动计算的

`x=(x+1)%n`意味着`x`永远不会大于`n-1`:`x>=0`和`x<n`.

`x=(x+1)%n`只是缩短相当于

```
if(x<n-1)
    x++;
else
    x=0; 
```

至于我，第一个变体可读性很强:)
对不起，我上次给你错误的演示。正确一个 - [http://jsfiddle.net/JvdU9/2/](http://jsfiddle.net/JvdU9/2/)

# java - 数据对齐与缓存局部性

> ID：14056437
> 
> 赞同：1
> 
> 时间：2012-12-27T14:41:39.000
> 
> 标签：java, android, caching, memory-access

从内存中，数据只能以体系结构的自然字长读取。例如，在 32 位系统上，数据以 4 字节块的形式从内存中读取。如果将 2 字节或 1 字节的值添加到内存中，它们的读取仍需要访问 4 字节的字。（对于 2 字节值，如果值存储在字边界上，则可能需要两次 4 字节访问。）

因此，当需要访问单个单词时，访问单个值是最快的，并且需要最少的额外工作（例如掩码）。如果我是正确的，这就是虚拟机（例如*JVM*或*Android 的 Dalvik*`Object` ）在实例中以 4 字节边界布置成员变量的原因。

另一个概念是缓存友好性，即局部性（例如L1、L2）。如果许多值必须在彼此之后直接遍历/处理，则将它们彼此靠近存储（理想情况下，在连续块中）是有益的。这是空间局部性。如果这是不可能的，那么至少对相同值的操作应该在相同的时间段内完成（时间局部性——即在对其执行操作时，该值很有可能保留在缓存中）。

据我所知，上述两个概念在某些情况下可能是“矛盾的”，它们之间的选择取决于它们的使用场景。例如，较少量的连续数据比大量（微不足道的）数据对缓存更友好，但如果某些数据通常需要随机访问，则字对齐（但更大）结构可能是有益的——**除非**整个结构适合缓存。因此，我认为，是否应该首选局部性（~arrays）或对齐优势取决于*如何操纵这些值*。

有一个场景对我来说很有趣：让我们假设一个寻路算法将输入图（*和*其他辅助结构）作为数组接收。（它的大部分输入数组存储的值都是 <= 32767。）

寻路算法对数组执行非常多的**随机**访问（在几个循环中）。从这个意义上说，`int[]`输入数据（在 Android/ARM 上）可能需要一个，因为访问时这些值将位于字边界上。（另一方面，如果需要顺序遍历，则建议使用较小的数据类型——尤其是对于大型数组——因为缓存友好的可能性更高。）

但是，如果（随机访问的）输入数据在指定为 a 时适合 L1/L2 `short[]`，但如果指定为 则不适合`int[]`怎么办？在这种情况下，`int[]`随机访问的 4 字节对齐的优势是否会被 的缓存友好性所抵消`short[]`？

当然，在具体应用中，我会进行测量以进行比较。然而，这不一定能回答上述问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:47:25.430

如果您可以确保移动到短会导致显着更好的位置（也就是所有内容都在缓存中），那么这会超过对齐惩罚。

访问缓存在低纳秒<10ns，访问内存是60-80ns

# android - 按下后退按钮时调用 onResume()

> ID：14056451
> 
> 赞同：0
> 
> 时间：2012-12-27T14:42:53.273
> 
> 标签：android, activity-lifecycle, back-stack

当我按下后退按钮时发生了一件奇怪的事情，同样`Activity`的`onResume()`方法被调用了。

`Activity`这是否意味着堆栈中有不止一个这样的实例？

有人可以告诉我发生了什么吗？

编辑：

```
12-27 19:51:44.595: D/IPCThreadState(10777): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x1947378
12-27 19:51:44.624: I/not null recipientlist(10777): show
12-27 19:51:44.624: I/in getconversation for complete mesages(10777): show
12-27 19:51:44.812: D/dalvikvm(10777): GC_EXPLICIT freed 1064K, 17% free 10334K/12359K, paused 2ms+3ms
12-27 19:51:45.606: D/JpgDecHal(10777): JpgDecHal::JpgDecHal
12-27 19:51:45.607: D/skia(10777): The file input width: 102, height: 102, output width: 102, height: 102, format: 6, prefer size: 0, dither: 0
12-27 19:51:45.607: D/JpgDecHal(10777): JpgDecHal::start -> config jpeg path
12-27 19:51:45.607: D/JpgDecHal(10777): Decoder Src Addr:0x19a9100, width/height:[102, 102]           
12-27 19:51:45.607: D/JpgDecHal(10777): Decoder Dst Addr:0x415e7450, width/height:[102, 102], format:3
12-27 19:51:45.607: D/JpgDecHal(10777): Decoder Dither:0, RangeDecode:0 [6649455 0 0 0]
12-27 19:51:45.610: D/JpgDecHal(10777): jpeg decoder result:0 
12-27 19:51:45.613: D/JpgDecHal(10777): JpgDecHal::~JpgDecHal
12-27 19:51:45.639: D/IPCThreadState(10777): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x18d8178
12-27 19:51:45.642: D/IPCThreadState(10777): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x1947378
12-27 19:51:45.836: D/OpenGLRenderer(10777): Flushing caches (mode 0) 
```

这从我按后退时开始

```
12-27 19:51:48.650: I/not null recipientlist(10777): show
12-27 19:51:48.650: I/in getconversation for complete mesages(10777): show
12-27 19:51:49.103: D/dalvikvm(10777): GC_EXPLICIT freed 587K, 14% free 10675K/12359K, paused 2ms+5ms
12-27 19:51:49.644: D/IPCThreadState(10777): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x18d8178
12-27 19:51:49.647: D/IPCThreadState(10777): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE  cookie 0x1947378
12-27 19:51:49.770: D/OpenGLRenderer(10777): Flushing caches (mode 0) 
```

当我再次按下时

```
12-27 19:51:51.606: I/not null recipientlist(10777): show
12-27 19:51:51.607: I/in getconversation for complete mesages(10777): show
12-27 19:51:52.383: D/dalvikvm(10777): GC_EXPLICIT freed 615K, 13% free 10781K/12359K, paused 1ms+6ms
12-27 19:51:52.511: D/IPCThreadState(10777): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x18d8178
12-27 19:51:52.513: D/IPCThreadState(10777): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x1947378
12-27 19:51:52.631: D/OpenGLRenderer(10777): Flushing caches (mode 0)
12-27 19:51:56.522: D/OpenGLRenderer(10777): Flushing caches (mode 0) 
```

这取决于`recipientlist`我通过意图从上一个活动中获取的大小。如果它的大小为 1，则返回工作正常，如果大小为 2，则返回需要两次连续按下才能返回上一个活动，因为已显示日志对于大小 = 3 的情况。getconversation 是当我签入我的 onResume() 时调用的方法，该列表不为空

# javascript - 将日期列值与系统时钟进行比较

> ID：14056452
> 
> 赞同：0
> 
> 时间：2012-12-27T14:42:52.660
> 
> 标签：javascript, jquery, html, css

我有一个数据表，其中包含一个名为“计划时间”的特定列，该列正在使用“时间”变量。我想知道将表中的预定时间与系统时间进行比较的最简单方法是什么，并反过来更改行的背景颜色。

到目前为止我的代码

```
var currentTime = new Date(); /* not sure if this is the correct time object to use */
var scheduledTime = scheduledTime();

if (scheduledTime >= 15mins) {
  return 'background-color:red;'
} else if (scheduledTime > 15mins <= 30mins) {
  return 'background-color:yellow;'
} else if (scheduledTime > 30mins <= 2hours) {
  return 'background-color:green;'
} else if (scheduledTime > 2hours) {
  return 'background-color:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:52:12.570

这应该有效：

```
var currentTime = new Date();
// Assuming scheduledTime()'s output is a "ms since epoch" timestamp.
var scheduledTime = scheduledTime();
var diff = (scheduledTime - currentTime) / 1000 / 60; // Difference in minutes.

return (diff < 15) /*if(d<15) */ ? 'background-color:red;'
     : (diff < 30  && diff > 15) ? 'background-color:yellow;'
     : (diff < 120 && diff > 30) ? 'background-color:green;'
     : /* else */                  'background-color:none;'; 
```

我在那里使用[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#JavaScript)作为普通块的简写`if/else`。

# javascript - 使用 mongoose 对 node.js 进行单元测试的结构

> ID：14056454
> 
> 赞同：8
> 
> 时间：2012-12-27T14:43:06.223
> 
> 标签：javascript, node.js, nodeunit

几个月来我一直在使用 node.js 进行开发，但现在我正在开始一个新项目，我想知道如何构建应用程序。

当谈到单元测试时，我的问题就出现了。我将使用 nodeunit 来编写单元测试。

我也使用 express 来定义我的 REST 路由。

我正在考虑编写在两个“单独”文件中访问数据库的代码（显然，它们会更多，但我只是想简化代码）。会有路线代码。

```
var mongoose = require('mongoose')
 , itemsService = require('./../../lib/services/items-service');

// GET '/items'
exports.list = function(req, res) {
    itemsService.findAll({
        start: req.query.start,
        size: req.query.size,
        cb: function(offers) {
            res.json(offers);
        }
   });  
  }; 
```

而且，正如我在那里使用的那样，项目服务仅用于访问数据层。我这样做是为了在单元测试中仅测试数据访问层。它会是这样的：

```
var mongoose = require('mongoose')
  , Item = require('./../mongoose-models').Item;

exports.findAll = function(options) {
    var query = Offer
        .find({});
    if (options.start && options.size) {
        query
            .limit(size)
            .skip(start)
    }
    query.exec(function(err, offers) {
        if (!err) {
                options.cb(offers);
            }
    })
}; 
```

这样，我可以通过单元测试检查它是否正常工作，并且我可以在任何我想要的地方使用此代码。我唯一不确定是否正确完成的是我传递回调函数以使用返回值的方式。

你怎么看？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T02:48:23.720

是的，很容易！您可以使用[mocha](http://visionmedia.github.com/mocha)之类的单元测试模块以及节点自己的 assert 或其他诸如[should](https://github.com/visionmedia/should.js)之类的模块。

作为示例模型的测试用例示例：

```
var ItemService = require('../../lib/services/items-service');
var should = require('should');
var mongoose = require('mongoose');

// We need a database connection
mongoose.connect('mongodb://localhost/project-db-test');

// Now we write specs using the mocha BDD api
describe('ItemService', function() {

  describe('#findAll( options )', function() {

    it('"args.size" returns the correct length', function( done ) { // Async test, the lone argument is the complete callback
      var _size = Math.round(Math.random() * 420));
      ItemService.findAll({
        size : _size,
        cb : function( result ) {
          should.exist(result);
          result.length.should.equal(_size);
          // etc.

          done(); // We call async test complete method
        }
      }, 
    });

    it('does something else...', function() {

    });

  });

}); 
```

等等，令人作呕。

然后，当你完成编写测试时——假设你已经`$ npm install mocha`'d——那么你只需运行`$ ./node_modules/.bin/mocha`或者`$ mocha`如果你使用了 npm 的 -g 标志。

取决于如何~~直肠~~/详细你想成为真的。我一直被建议并且发现更容易： 首先编写测试，以获得清晰的规范视角。*然后*针对测试编写实现，任何额外的见解都是免费的。

# hibernate - 左连接获取重复

> ID：14056457
> 
> 赞同：0
> 
> 时间：2012-12-27T14:43:16.957
> 
> 标签：hibernate, jpa, fetch, lazy-evaluation

我在使用 JPA(Hibernate) 和 LazyFetching 时遇到了一些麻烦

我有一些**实体**：任务、奖励、合同

**关系**（都是懒惰的）：

*   Quest One2Many 奖励；Quest Many2Many 合约；
*   合约 One2Many 奖励；合同Many2Many任务；
*   奖励Many2One查询；奖励Many2One合约；

DB 包含这些数据：Quest1 有 Reward1、Reward2 和 Contract1、Contract2；

在某些情况下，我需要 Quest 及其奖励和合同，所以我在 JPArepository 中这样做：

```
@Query("select Q from Quest Q left join fetch Q.rewards left join fetch Q.contracts")
List<Quest> getAllQuestsWithRewardsAndContracts(); 
```

问题是我收到了
一个带有 4 个（但它只有 2 个）奖励（Reward1，Reward2，Reward1，Reward2）和两个合同的任务。
我得到重复的奖励！
我不明白为什么！
如果我这样做：

```
@Query("select distinct Q from Quest Q left join fetch Q.rewards")
List<Quest> getAllQuestsWithRewardsRew(); 
```

我收到一个任务有两个奖励（Reward1，Reward2）

为什么 ？为什么我有重复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T16:35:13.883

这就是 Hibernate 工作的本质。它不会删除由 LEFT OUTER JOINS 生成的重复项。您可以明确指定您需要不同的结果

例如，如果您使用标准来获取数据，您可以指定

```
criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

查看获取数据时生成的 SQL。这是一个常见问题解答，它解释了为什么 Hibernate 会以这种方式[运行。](https://community.jboss.org/wiki/HibernateFAQ-AdvancedProblems#Hibernate_does_not_return_distinct_results_for_a_query_with_outer_join_fetching_enabled_for_a_collection_even_if_I_use_the_distinct_keyword)

同样在第一个查询中，您正在同一 SQL 中加载多个集合（奖励和合同），这可能会导致笛卡尔积。Hibernate 有一个**Futures** API，它使用比生成笛卡尔积的 SQL 更简单的 SQL 来帮助加载多个子集合。（我不确定 Futures 是否可以与 JPA 一起使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:52:26.497

一个表的行数可能比另一个表多。所以给一些条件以避免重复......

# ios - 只显示一次启动画面 IOS

> ID：14056459
> 
> 赞同：0
> 
> 时间：2012-12-27T14:43:19.573
> 
> 标签：ios, ipad, splash-screen, uiwindow, hig

我了解，使用默认启动图标和启动画面是一种 HIG 违规行为，但我有这样的要求，我只需要第一次显示启动画面，是否可以实现？我能想到的一个简单的解决方案是：在 UIwindow 上显示为 imageView，然后根据计时器将其删除。我正在寻找其他选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:51:42.987

我的建议是重新设计您的视图层次结构，以便第一个视图模仿您希望显示的初始屏幕（嵌入 uiimage 的视图控制器应该可以正常工作）。然后在您的特定时间段后将“主屏幕”推到该视图的顶部。一些代码来确保这种情况只在第一次运行时发生，并且你应该很高兴去。

我不建议直接使用 UIWindow。这样做会导致各种头痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:52:10.510

那很简单。

但是您不需要操作启动图像，而是您的应用程序加载的图像。为了防止第二次启动，您可以在内部存储中设置一个标志。

确保使用延迟加载/初始化技术并尽可能快地显示图像，而不是初始化。

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:59:57.983

所以你知道它违反了 HIG，但正在寻找一些解决方法。在上传应用程序并在首次启动时显示时，您必须拥有启动图像。我假设您不关心应用商店中的应用评论。

让我们想想

启动图像必须在主包中。并且主包对于您的代码是只读的。我有一些解决方法，但它可能仅适用于第二次启动以显示启动图像，然后不再显示。

1.  添加任何名称的启动图像

2.  将符号链接添加到名为 Default.png 的应用程序包中，该链接在 3\. 步骤中显示该文件

3.  在首次启动时将该启动图像复制到您的应用程序目录文件夹（应用程序包中的符号链接显示该文件）。

4.  第二次启动应用程序并查看启动图像

5.  删除复制的图像。

当您的应用找不到符号链接显示的 png 文件时，它无法显示启动图像

PS：就我个人而言，我没有尝试过，但可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:37:20.373

如果你使用iOS6，你可以使用恢复功能。在第一次运行你的应用程序将显示启动图像。所有其他运行它将显示最后状态屏幕截图。

# jsp - 使用 CommandLink 在 JSF 中显示值

> ID：14056461
> 
> 赞同：2
> 
> 时间：2012-12-27T14:43:21.887
> 
> 标签：jsp, jsf, jakarta-ee, javabeans, commandlink

我正在 JSF 中创建一个 CRUD 应用程序。![在此处输入图像描述](../Images/3b547bf3fa56443a51d1e719df8e6d07.png) 我已经使用了 MovieName 和`RespectiveID`.The Moviename 在标签中。`CommandLink`现在我希望如果有人点击电影，它将显示相应电影的详细信息。如果是 PHP，我可以轻松附加`ID`并`parameter` `movieDetail.php?id=12`使用它来查询 DB。但是据我所知，在 JSF 中我们使用`actionLIstener`并调用了一个 bean 函数。除了查询以显示结果之外，我不知道我会在 bean 函数中写什么......任何可以帮助我的人谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:10:30.797

创建一个视图 movieDetail.jsf 并在输出电影名称时通过附加电影 ID 创建链接。例如 movieDetail.jsf?id=12 。

在 movieDetail.jsf 添加`<f:viewParam>`标签并将 id 值设置为 bean 属性。然后加

`<f:event type="preRenderView" listener="#{bean.listener}">`并用电影细节填充 bean。

`preRenderView`在视图渲染之前触发事件。因此，这是用电影细节填充 bean 的最佳时机。在 preRenderView 事件中，侦听器方法将使用 id 属性来查询数据库并查找电影的详细信息。

`<f:metadata>`在你的 movieDetail.jsf 中使用两个标签：

```
<f:metadata>
<f:viewParam name="id" value="#{bean.id}"/>
<f:event type="preRenderView" listener="#{bean.listener}"/> 
</f:metadata> 
```

当用户访问您的视图时，例如，movieDetail.jsf?id=12，id 值 12 被设置为 bean 的 id 属性。在呈现视图之前，监听器方法，即在这种情况下`public void listener()`调用 bean，它用电影细节填充 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:09:44.547

正如 Sandeep 建议的那样，您绝对应该使用单独的 JSF 页面，但我认为您可能会受益于使用数据表来显示电影列表。查看此[链接](http://balusc.blogspot.com/2006/06/using-datatables.html#GetSelectedDatatableRow)以了解如何使用它们。

您应该创建一个简单的类，该类包含您希望在列表中显示的每部电影的数据类型（名称和 ID）。然后，您可以创建这些对象类型的列表并使用该列表填充数据表。然后使用 binding 属性，您可以将数据表绑定到支持 bean 中的 HtmlDataTable 对象，并获取对用户单击的行的引用。在处理用户点击的方法中，可以设置指定影片所需的数据，并返回显示单个影片的视图名称。

# jquery - 如何在悬停顶级时展开所有菜单项，并在超出范围时再次删除它们？

> ID：14056462
> 
> 赞同：0
> 
> 时间：2012-12-27T14:43:22.600
> 
> 标签：jquery, css

我有一个三级菜单。进入站点时，除一级菜单外，所有级别的菜单都应隐藏。悬停在 1 级时，应显示所有子菜单（2 级和 3 级）

我的菜单如下所示：

[http://jsfiddle.net/3Whn6/1/](http://jsfiddle.net/3Whn6/1/)

```
<ul class="nav">
<li id="menu-item-60" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-60 actives hover"><a href="#/?page_id=37">CHAPTERS</a>
<ul class="sub-menu" style="display: block;">
    <li id="menu-item-77" class="menu-item menu-item-type-taxonomy menu-item-object-product_cat menu-item-77 arrow hover"><a href="#/?product_cat=one">ONE</a>
    <ul class="sub-menu" style="display: none;">
        <li id="menu-item-76" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-76 hover"><a href="#/?product=test">ROMAN NET</a></li>
        <li id="menu-item-80" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-80 hover"><a href="#/?product=white-shadow">WHITE SHADOW</a></li>
        <li id="menu-item-81" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-81 hover"><a href="#/?product=armor">ARMOR</a></li>
    </ul>
    </li>
    <li id="menu-item-83" class="menu-item menu-item-type-taxonomy menu-item-object-product_cat menu-item-83 arrow hover"><a href="#/?product_cat=two">TWO</a>
    <ul class="sub-menu" style="display: block;">
        <li id="menu-item-85" class="menu-item menu-item-type-post_type menu-item-object-product menu-item-85 hover"><a href="#/?product=coming-soon">coming soon</a></li>
    </ul>
    </li>
</ul>
</li>
</ul> 
```

我想出的CSS目前是这样的：

```
ul.nav li > ul > li { display: none } 
```

这使得网站只显示顶层。

如何在悬停时扩展所有其他级别，并在取消悬停时再次删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:53:09.020

以最简单的形式，

```
 ul.nav li > ul > li { display: none; }
​    ul.nav li:hover li { display: block; }
    ul.nav > li { background-color: #eee; } 
```

[在 JSFiddle 上查看](http://jsfiddle.net/xqGAp/)

您的其中一个`ul`已`style="display: none;"`对其进行内联...如果您想显示它，请摆脱它。[在 JSFiddle 上查看该编辑](http://jsfiddle.net/xqGAp/1/)。

# c++ - 如何与另一个应用程序交互？

> ID：14056464
> 
> 赞同：-1
> 
> 时间：2012-12-27T14:43:32.717
> 
> 标签：c++, qt

我想在另一个应用程序中进行用户操作。可以说，我想从我的应用程序中关闭 Chrome 的标签。如何使用 c++ 实现这一点？最好是Qt

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:27:34.867

在 Windows 上，您可以使用 WinAPI 函数[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)将事件发送到另一个应用程序。这可用于模拟另一个应用程序的用户输入。为此，您需要获取其窗口句柄 (hWnd)。您可以使用 WinAPI 函数[FindWindow](http://msdn.microsoft.com/en-us/library/ms633499%28v=VS.85%29.aspx)来做到这一点。

# java - 如何开始使用 Objectify v4？

> ID：14056466
> 
> 赞同：-1
> 
> 时间：2012-12-27T14:43:41.717
> 
> 标签：java, google-app-engine, objectify

这看起来像一个荒谬的问题，但我在开始使用 appengine 中的 Objectify v4 进行编码时遇到了问题。

objectify 页面的介绍说你应该使用**ofy**来完成所有的操作。为此，他们已经证明可以使用

```
import static com.googlecode.objectify.ObjectifyService.ofy;

Thing th = ofy().load().key(thingKey).get(); 
```

现在事情在我的 Eclipse 自动建议中，它没有显示我的**ofy()** 事情。当我导入上面写的第一行时，它显示错误。

我只想知道如何让 ofy() 使用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T12:30:34.733

假设正确的 jar 在您的构建路径上，您是否调整了您最喜欢的内容辅助设置？至少它可能会抛出一个可以帮助你的错误。

来自：[http ://code.google.com/p/objectify-appengine/wiki/Setup](http://code.google.com/p/objectify-appengine/wiki/Setup)

> 在 Eclipse 中启用静态导入
> 
> 此步骤是可选的，但有助于防止您一遍又一遍地键入 ObjectifyService.ofy()。
> 
> 组织导入时 Eclipse 不会自动添加静态导入。默认情况下，当您键入 ofy[cmd-space] 时，它甚至不会完成静态导入。如果您想为自己节省大量输入，请为 ObjectifyService.ofy() 添加“Favorite”静态导入。
> 
> **访问窗口 » 首选项 » Java » 编辑器 » 内容辅助 » 收藏夹并添加：** com.googlecode.objectify.ObjectifyService.ofy
> 
> 现在，当您键入 ofy[cmd-space] 时，Eclipse 将为您添加一个静态导入。

[Eclipse Optimize Imports to Include Static Imports](https://stackoverflow.com/questions/288861/eclipse-optimize-imports-to-include-static-imports)也可能有所帮助。

# asp.net-mvc - Asp.Net MVC4 从控制器返回日期和时间到视图

> ID：14056468
> 
> 赞同：0
> 
> 时间：2012-12-27T14:43:52.927
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我正在使用 Asp.Net MVC4，我需要从服务器而不是客户端检索日期和时间。要在我必须单击视图中的按钮时恢复它们，例如按钮“Nuevo”的名称，并且从我定义的视图中，事件由 JavaScript 在 Action 中调用，定义控制器 (Home) 和 ActionResult (Nuevo) ：

```
<script type= "text/javascript">
    function Nuevo() {
        $.ajax({
           url: '@Url.Action("Nuevo", "Home")',
           type: 'POST',
           contentType: 'application/json; charset=utf-8',
           dataType: 'json',
           data: JSON.stringify({ }),
           success: function () {}
        });
     }
</script> 
```

收到 New ActionResult 中的数据控制器后，如下所示：

```
[HttpPost]
public ActionResult Nuevo()
{
     Persona persona = new Persona();
     persona.Fecha = DateTime.Now;
     persona.Hora = DateTime.Now;
     return View(persona);
} 
```

这是我的观点，我使用类型化的视图：

```
@model MvcJavaScript.Models.Persona
<script type= "text/javascript">
    function Nuevo() {
        $.ajax({
            url: '@Url.Action("Nuevo", "Home")',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: JSON.stringify({}),
            success: function (data) {
            }
        });
    } 
</script>
<h2>Registro persona</h2>
@using (Html.BeginForm("", "", FormMethod.Post, new { id = "formPersona" })){ 
   <table cellpadding="4" class="td.headerTabsColor">
     <tbody>
       <tr>
             <td><label>Fecha : </label>@Html.TextBoxFor(u => u.Fecha, new { sololectura = true })</td> 
       </tr> 
       <tr>
         <td><label>Sexo : </label>@Html.TextBoxFor(u => u.Sexo, new { style = "width:225px", sololectura = false })</td>
       </tr>
       <tr>
            <td><label>Hora : </label>@Html.TextBoxFor(u => u.Hora, new { sololectura = true })</td>  
       </tr>
     </tbody>
  </table>
} 
```

我需要做的是插入一条新记录（通过单击“Nuevo”按钮）我在不同的文本框中加载默认的服务器时间和日期。

运行这个例子进入New ActionResult但是返回数据查看TextBox是无效的，我尝试了其他字段和相同的结果。

任何有关此问题的建议或帮助。

问候

里卡多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:17:01.707

在创建 AJAX 操作时，您通常会采用两种不同的方式：让服务器呈现 HTML，或者只是将数据发送回浏览器并让浏览器呈现 HTML。您发布的代码是两者的混合 - 这就是它不起作用的原因。jQuery AJAX 调用期望从服务器返回 JSON 数据，但服务器正在发送`Views\Home\Nuevo.cshtml`视图呈现的 HTML。让我们看看这两种不同的方法可能是什么样子。

## 服务器渲染的方法

您需要添加一个 HTML 元素来显示结果。我们将调用它`NuevoResult`。我们还需要一些将响应放在那里的代码。最简单的方法是 jQuery 的`.html()`方法。

```
<div id="NuevoResult"></div>
<script type= "text/javascript">
    function Nuevo() {
        $.ajax({
            url: '@Url.Action("Nuevo", "Home")',
            type: 'POST',
            // ... also 'contentType' and 'data' if you're actually sending anything to the server...
            dataType: 'html',
            success: function (data) {
                $('#NuevoResult').html(data);
            }
        });
    }
</script> 
```

我们还需要一个`Views\Home\Nuevo.cshtml`视图供服务器渲染。它可能看起来像：

```
@model MyCoolNamespace.Persona

<h3>New person created!</h3>
<p>Created on @string.Format("{0:d}", Model.Fecha) at @string.Format("{0:t}", Model.Hora).</p> 
```

这是我们希望从此操作返回的所有 HTML。我们不希望它被包裹在任何布局中。为此，我们需要确保我们`return PartialView(persona)`而不是`return View(persona)`.

## 浏览器渲染方法

对于浏览器呈现的方法，我们将继续在浏览器上准备好 HTML，但将其隐藏。当我们收到服务器的响应时，我们将用正确的信息填写并显示它。

```
<div id="NuevoResult" style="display:none">
    <h3>New person created!</h3>
    <p>Created on <span id="Fecha"></span> at <span id="Hora"></span>.</p>
</div>
<script type= "text/javascript">
    function ParseJSONDateTime(value) {
        // from http://stackoverflow.com/questions/206384/how-to-format-a-json-date/2316066#2316066
        return new Date(parseInt(value.substr(6)));
    }
    function Nuevo() {
        $.ajax({
            url: '@Url.Action("Nuevo", "Home")',
            type: 'POST',
            // ... also 'contentType' and 'data' if you're actually sending anything to the server...
            dataType: 'json',
            success: function (data) {
                $('#Fecha').text(ParseJSONDateTime(data.Fecha).toLocaleDateString());
                $('#Hora').text(ParseJSONDateTime(data.Hora).toLocaleTimeString());
                $('#NuevoResult').show();
            }
        });
    }
</script> 
```

然后在 MVC 动作中，使用`return Json(persona)`将数据发送回浏览器。

## 还有一些注意事项...

.NET DateTime 结构同时包含日期和时间信息，因此不需要单独的`Fecha`和`Hora`属性。考虑用单个`CreatedTimestamp`属性替换。

如果您仍然遇到问题，[Firefox 的 Firebug 扩展程序](https://getfirebug.com/)、[Internet Explorer 的开发人员工具](http://msdn.microsoft.com/en-us/library/hh772704.aspx)和[Chrome 的开发人员工具](https://developers.google.com/chrome-developer-tools/)可以非常有助于找出问题所在，让您准确查看从服务器返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:56:05.420

嗨，如果我是正确的，问题是在您触发该函数后文本框值仍然为空。这背后的原因是您的 javascript 函数返回了

`success : function() {}`部件中的数据。
因此，您要做的就是返回某种 Json，然后将正确的值放入文本框中。

Javascript：

```
$.ajax({
   url: '@Url.Action("Nuevo", "Home")',
   type: 'POST',
   success: function(data) {
   //Do stuff with your data 
  }
}); 
```

C＃：

```
[HttpPost]
public ActionResult Nuevo()
{
     Persona persona = new Persona();
     persona.Fecha = DateTime.Now;
     persona.Hora = DateTime.Now;
     return Json(persona, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:38:41.647

如果您只从 post 调用返回一个 json 对象，您可以在您的 ajax post 中编写成功函数，如下所示。

```
success : function(data) {
 $('#inputFecha').html(data.Fecha);
  $('#inputHora').html(data.Hora);
} 
```

但是，如果您要返回视图本身（从您的代码中看起来像），请像这样编写成功函数

```
success : function(data) {
 $('#formContainer').html(data); // where formContainer is the control containing your form - may be an html body.
} 
```

编辑

既然您已经发布了视图，请更改 Fecha 和 Hora 的 Html.TextBoxFor 行，如下所示，并使用下面进一步给出的成功函数，

```
@Html.TextBoxFor(u => u.Fecha, new { sololectura = true, id="inputFecha" })
@Html.TextBoxFor(u => u.Hora, new { sololectura = true, id="inputHora" })

success : function(data) {
     $('#inputFecha').html(data.Fecha);
      $('#inputHora').html(data.Hora);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:09:31.303

你可以试试这个：

C＃

```
[HttpPost] // Why do you need to use POST method?
public JsonResult Nuevo()
{
     return Json(new { Fecha = DateTime.Now, Hora = DateTime.Now });
     // if use get: return Json(object, JsonRequestBehavior.AllowGet);
} 
```

HTML：

```
<button id="button-nuevo">Nuevo</button>

<h2>Registro persona</h2>
@using (Html.BeginForm("", "", FormMethod.Post, new { id = "formPersona" })){ 
   <input type="hidden" id="url-nuevo" value="@Url.Action("Nuevo", "Home")" />
   <table cellpadding="4" class="td.headerTabsColor">
     <tbody>
       <tr>
             <td><label>Fecha : </label>@Html.TextBoxFor(u => u.Fecha, new { @readonly=true })</td> 
       </tr> 
       <tr>
         <td><label>Sexo : </label>@Html.TextBoxFor(u => u.Sexo, new { style = "width:225px", sololectura = false })</td>
       </tr>
       <tr>
            <td><label>Hora : </label>@Html.TextBoxFor(u => u.Hora, new { @readonly = true })</td>  
       </tr>
     </tbody>
  </table>
} 
```

JS

```
function dateFormat(d) {

   var date = d.getDate(), 
       month = d.getMonth() + 1,
       year = d.getFullYear();

   retur (month > 9 : month ? '0' + month) + "/" + (date > 9 : date ? '0' + date) + "/" + year;
} 

$('#button-nuevo').bind('click', function(event) {
    var $formContext = $('#formPersona');
    $.post($('#url-nuevo').val(), {}, function(data){

        //UPDATE
        var fecha = new Date(parseInt(data.Fecha.substr(6, 13)));
        var hora = new Date(parseInt(data.Hora.substr(6, 13)));

        $formContext.find('#Fecha').val(dateFormat(fecha));
        $formContext.find('#Hora').val(dateFormat(hora));

    }, "json");
}); 
```

**根据这个[答案](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)**更新****

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T16:18:46.863

这是我的观点，我使用类型化的视图：

```
@model MvcJavaScript.Models.Persona
<script type= "text/javascript">
    function Nuevo() {
        $.ajax({
            url: '@Url.Action("Nuevo", "Home")',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: JSON.stringify({}),
            success: function (data) {
            }
        });
    } 
</script>
<h2>Registro persona</h2>
@using (Html.BeginForm("", "", FormMethod.Post, new { id = "formPersona" })){ 
   <table cellpadding="4" class="td.headerTabsColor">
     <tbody>
       <tr>
             <td><label>Fecha : </label>@Html.TextBoxFor(u => u.Fecha, new { sololectura = true })</td> 
       </tr> 
       <tr>
         <td><label>Sexo : </label>@Html.TextBoxFor(u => u.Sexo, new { style = "width:225px", sololectura = false })</td>
       </tr>
       <tr>
            <td><label>Hora : </label>@Html.TextBoxFor(u => u.Hora, new { sololectura = true })</td>  
       </tr>
     </tbody>
  </table>
} 
```**

# c++ - glDisable(GL_COLOR_MATERIAL) 无法正常工作

> ID：14056474
> 
> 赞同：0
> 
> 时间：2012-12-27T14:44:17.333
> 
> 标签：c++, opengl, glut

我需要用三角形和球体绘制一个对象。我的对象有自己的材质属性，我用 glMaterialfv 定义它们。球体只是一个有颜色的球体。但是，我的对象的某些部分（它是它的多边形之一）用球体的颜色着色。我怎么解决这个问题？

我的对象函数

```
void drawObject()
{glDisable(GL_COLOR_MATERIAL);

    for(int i=0;i<j;i++)
    {   glBegin(GL_TRIANGLES);
        glNormal3f(..);
        glVertex3f(..);

        glNormal3f(..);
        glVertex3f(..);

        glNormal3f(..);
        glVertex3f(..);

        GLfloat ambientValues[]={..};
        GLfloat specularValues[]={..};
        GLfloat diffuseValuse[]={..};
        glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT,ambientValues);
        glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE,diffuseValues);
        glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR,specularValues);

        glEnd();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:19:10.053

这里有两个错误： 必须在绘图操作之前设置材料。并且`glMaterialfv`在 glBegin/glEnd 块中无效。顺便说一句，您首先不应该使用立即模式 (glBegin/glEnd)。15 年多来一直不鼓励使用它。

# jquery - 关闭fancybox窗口后我的图片隐藏了

> ID：14056476
> 
> 赞同：5
> 
> 时间：2012-12-27T14:44:28.600
> 
> 标签：jquery, fancybox

我正在尝试使用fancyBox，我想知道为什么当我关闭fancyBox 窗口时，我的元素会显示为“display:none;” 风格。有什么办法可以避免这种情况吗？

我的 html 文件包括：

```
<script type="text/javascript" src="../js/jquery.fancybox.pack.js"></script>
<link rel="stylesheet" href="../css/jquery.fancybox.css" type="text/css" media="screen" /> 
```

目标元素是这样的：

```
<div id="cadre" class="planche"><a id="inline" href="#photo"><img src="../img/new/img/1_ADELE_HAENEL_Actress-H.jpg" alt="ADELE HAENEL" id="photo"></a></div> 
```

我的 Fancybox js 是：

```
$(document).ready(function() {

    /* This is basic - uses default settings */

    $("a#single_image").fancybox();

    /* Using custom settings */

    $("a#inline").fancybox({
        'hideOnContentClick': false
    });

    /* Apply fancybox to multiple items */

    $("a.group").fancybox({
        'transitionIn'  :   'elastic',
        'transitionOut' :   'elastic',
        'speedIn'       :   600, 
        'speedOut'      :   200, 
        'overlayShow'   :   false
    });

}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-23T06:04:53.523

我遇到了同样的问题，解决方案是用有效的 href 填充 a 元素的 href 属性

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-15T07:31:50.477

将有效的**href**标记添加到**a**元素。下面是一个简单的例子。我遇到了同样的问题并解决了这个问题。

```
<a class="fancybox" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a> 
```

然后调用fancybox。

```
$(".fancybox").fancybox({}); 
```

JsFiddle 演示示例

[http://jsfiddle.net/FM82s/](http://jsfiddle.net/FM82s/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-23T14:05:21.123

首先要检查几件事。您应该针对`<A>`标签*而不是*图像调用 .fancybox() ：

您的 HTML 格式应为：

```
<a href="image-url" class="fancybox" ...>
   <img src="image-url" />
</a> 
```

你的jQ：

```
$('.fancybox').fancybox() 
```

其次，如果您的 URL 不包含已知的图像扩展名或`data:image`字符串，那么“isImage”调用将失败并且不会打开花式框（很可能只是退回到标准行为）。

isImage 函数，供您参考（2.1.5）：

```
isImage: function (str) {
    return isString(str) && str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i);
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-04T19:07:09.910

有同样的问题。

解决方案是为标签使用另一个类名，然后是标签。搜索了数周...：/

# ruby - 如何仅使用 Thin 部署 sinatra 应用程序？

> ID：14056477
> 
> 赞同：2
> 
> 时间：2012-12-27T14:44:28.817
> 
> 标签：ruby, linux, deployment, sinatra, thin

我用 Sinatra 编写了一个小应用程序。

现在，在这个项目的根目录中，我运行“thin start”，它就可以工作了。这只是一个小项目，只能在我的本地机器上运行。所以我不需要使用 Nginx，我打算只使用“瘦”。

好吧，应用程序应该在服务器启动时自动运行。我怎么能做到这一点？

我跑了：

```
sudo thin install
sudo update-rc.d -f thin defaults 
```

似乎瘦可以自动运行但是，我在哪里可以配置它来运行我的应用程序？

呃....也许这个问题与sinatra或thin无关。我只需要在机器启动时自动运行一些东西。我对Linux不熟悉o(////)o

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:13:03.453

据我所知，您需要将配置文件放入 /etc/thin/ 我认为您可以在 /etc/thin/thin.yml 中找到示例

```
--- 
user: www-data
group: www-data
pid: tmp/pids/thin.pid
timeout: 30
wait: 30
log: log/thin.log
max_conns: 1024
require: []
environment: production
max_persistent_conns: 512
servers: 1
threaded: true
no-epoll: true
daemonize: true
socket: tmp/sockets/thin.sock
chdir: /path/to/your/apps/root
tag: a-name-to-show-up-in-ps aux 
```

# c++ - 如何从 Linux 上的 C++ 中使用 libexpect 创建的 FILE* 读取标准输出？

> ID：14056481
> 
> 赞同：0
> 
> 时间：2012-12-27T14:44:42.670
> 
> 标签：c++, linux, file-io, expect

使用 C++，我使用 libexpect 创建了一个 FILE*：

```
FILE* fd = exp_popen("ssh root@sunblaze"); 
```

我使用以下命令进入命令行：

```
exp_fexpectl(fp , exp_exact , "password: " , 1 , exp_end); 
```

现在 bash shell 中的其他成员，我想在那里获取文件的内容，所以我必须运行命令`cat /port1/port` 并将它的所有内容打印到 char 缓冲区中。我怎么做？

`fgets`似乎不起作用...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:37:33.583

找到了一种方法，在按照我的方式创建连接后，外壳是：

```
[root@sanblaze ~]# 
```

我使用例如向它写一个命令：

```
fputs("echo LinkReset > /port4/port\r" , fp);
exp_fexpectl(fp, exp_exact , "]# " , 1 , exp_end); 
```

使用 grep 读取文件内容：

```
fputs("cat /port4/port | grep -w Mode\r" , fp);
exp_fexpectl(fp, exp_exact , "]# " , 1 , exp_end); 
```

完成上述操作后，“exp_buffer”女巫是一个全局变量，其中包含上次“exp_fexpectl”运行时来自远程 shell 的所有文本，女巫仅表示我的命令的输出。剩下的就是解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:56:52.060

假设您的机器和“sunblaze”位于防火墙关闭、相当安全的环境中，我将使用“ssh-keygen”和“ssh-copy-id root@sunblaze”来允许您的用户 ID 无需密码即可登录 sunblaze . 这样，您的代码中就没有别人可以查看的密码。

是的，我知道，这不是你要问的...

我实际上不明白为什么`fgets(str, size, fd);`-我会玩一点游戏来弄清楚...

这绝对有效：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <tcl8.5/expect.h>
#include <errno.h>

int main()
{
    char str[512];
    FILE *f = exp_popen("ssh user@mybox ls -lR");
    if (f==NULL)
    {
        printf("Failed (%s)\n", strerror(errno));
        return 1;
    }
    while(fgets(str, sizeof(str)-1, f))
    {
        printf("%s", str);
    }
    return 0;
} 
```

但是，如果 ssh 的输出没有换行符，显然 fgets() 不会完成。当我第一次尝试时，它卡在了密码问题上 - 但是当我将它更改为无需密码即可登录的机器时，它运行良好。

# php - 滚动到窗口顶部时，加载结果 jQuery

> ID：14056483
> 
> 赞同：0
> 
> 时间：2012-12-27T14:44:56.400
> 
> 标签：php, javascript, jquery, ajax

我有一个功能，当我单击一个按钮时，我会从我的表格中调用更多结果，当按钮位于窗口顶部 100px 时，我试图让它工作，但我似乎无法让它工作......

```
 $(function(){
  $('#showMore').click(function(event) {
     event.preventDefault();
     var number = $(".directory").children().length;
    $.ajax({
       type: "POST",
       url: "getentries.php",
       data: "count="+number,
       success: function(results){
         $('.directory').append(results);
       }
     });

  }); 
```

});

到目前为止我试过

```
 $(function(){
  $('#showMore').offset(function(event) {
    .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:46:30.817

jQuery`.offset()`函数不用于建立事件处理程序。你正在寻找`.scroll()`. 在“滚动”事件的事件处理程序中，您可以使用它`.offset()`来找出当前位置。

我要提醒一下，浏览器会触发**大量**滚动事件，因此您可能需要在执行任何认真的工作以响应用户滚动窗口之前引入延迟。

# perl - 我如何在 perl 会话中存储对象

> ID：14056484
> 
> 赞同：1
> 
> 时间：2012-12-27T14:44:54.663
> 
> 标签：perl, mod-perl

我有一个带有字段的 Emp（类）对象`name`，`id`并且`password`：

```
$emp = new Emp({name=>'pavan', id=>101, password=>'05cc11'});

$serializble = freeze($emp); 
```

存储在会话中：

```
$session->param("emp",$serializble); 
```

但是当我打开存储在 tmp 目录中的会话对象时，emp 值为`undef`.

### 更新

使用 Storable 序列化对象后更新。

```
$serializble = freeze($emp);

$session->param("emp",$serializble); 
```

这是会话文件（添加了换行符以提高可读性）：

```
$D = {'_SESSION_ID' => 'dd75c6042893334a6bf26794b4ce5c74',
'_SESSION_ATIME' => 1356628765,
'emp' => '^D^G^D1234^D^D^D^H^Q^CPEmp^C^B^@^@^@ ^Epavan^D^@^@^@name^H�^B^@^@^@id',
'_SESSION_REMOTE_ADDR' => '127.0.0.1',
'_SESSION_CTIME' => 1356628765};;$D 
```

当我尝试从会话中返回对象时，它返回`undef`：

```
$recoverable = thaw($session->param('emp');

print $recoverable; 
```

这是我的总代码

**Emp类：**

```
package Emp;

sub new{
    my ($class, $args) = @_;

    my $self = bless{}, $class;

    $self->{name} = $args->{name};
    $self->{id}=$args->{id};

    return $self;
}

sub getEmpname{
    my $self = shift;
    return $self->{name};
}

1; 
```

**emp.cgi**

```
$query = new CGI();

$session = new CGI::Session("driver:File", undef, {Directory => "/tmp"});

$emp = new Emp( { name => $query->param('username'),
                  id   => 101
                } );
my $serialized = freeze($emp);

$session->param("emp", $serialized);

$login = $emp->getEmpname();  #it is the method of Emp class

$cookie  = $query->cookie( -name    => $login,
                           -value   => $session->id,
                           -expires => '+3M',
                         );

print $query->header( -type    => 'text/html',
                      -cookie  => $cookie,
                    ); 
```

**欢迎.cgi**

```
$q = new CGI();

$sid = $q->cookie('login') || $q->param('login') || undef;

$session = new CGI::Session(undef, $sid, {Directory=>'/tmp'});

print $q->header('text/html');
print $q->start_html('title');
print "<br>";
print Dumper $session->param('emp');
my $emp = thaw( $session->param('emp') );  //which is saved in session object.
print $emp->getEmpname();
print end_html; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:35:35.927

您不能简单地将对象存储在需要字符串的位置。

如果我们有一个`$o`class的对象`Emp`，并假设该对象是使用哈希实现的，那么该对象的*字符串化*将类似于`Emp=HASH(0x9bc8880)`. 此字符串化中包含的信息不允许从该字符串中恢复对象。

相反，您必须选择对象的序列化，以便您可以恢复对象。

该[`Data::Dumper`模块](https://metacpan.org/module/Data%3a%3aDumper)将数据结构序列化为 Perl 代码，可以对其进行`eval`编辑以重新创建原始值。该[`Storable`模块](https://metacpan.org/module/Storable)以二进制格式存储数据，可能适用于此。

您可以通过 序列化数据结构（或对象）`freeze`，并通过 恢复它`thaw`。

```
use strict; use warnings; use Storable qw(freeze thaw); use Data::Dumper;

my $o = bless {a => 1, b => 2}, 'Emp';

print "> Dumper representation of original ($o)\n";
print Dumper $o;
print "> serializing the object...\n";
my $serialized = freeze($o);
print "> restoring the object...\n";
my $restored = thaw($serialized);
print "> Dumper representation of copy ($restored)\n";
print Dumper $restored; 
```

输出：

```
> Dumper representation of original (Emp=HASH(0x8de78c8))
$VAR1 = bless( {
                 'a' => 1,
                 'b' => 2
               }, 'Emp' );
> serializing the object...
> restoring the object...
> Dumper representation of copy (Emp=HASH(0x8f5df64))
$VAR1 = bless( {
                 'a' => 1,
                 'b' => 2
               }, 'Emp' ); 
```

或类似的。请注意，恢复的对象具有不同的内存位置，但在其他方面是等效的。

如果要将数据结构序列化为文件，可以使用`store`and`retrieve`代替；有关更多示例，请参阅文档。

# google-places-api - Google Places API：next_page_token 错误

> ID：14056488
> 
> 赞同：13
> 
> 时间：2012-12-27T14:45:26.433
> 
> 标签：google-places-api

我正在收集有关商店位置的信息。搜索是：

```
<?php
...
$url='https://maps.googleapis.com/maps/api/place/search/json?key=[my_key]&location=40.420989,-3.706812&radius=1000030&=&sensor=false';
$body=file_get_contents($url);
...
?> 
```

我返回一个没有问题的 Json，并表明还有另一页结果。我会回来打另一个电话如下

```
<?php
...
$url2='https://maps.googleapis.com/maps/api/place/search/json?key=[my_key]&pagetoken=ClREAAAAQXKNHPVGCkTC_MdjSqi2T0KBDMWjEu4KF1Ylw1761Po-67AnNSp4zw0wXD4oocGpx4olSl4k2LyklJBl3mBF4VPmxp3IoOCHDRlXVmivaDsSEBuG_V1GvCH1gS5s0LCuy3EaFNXxUzzHhZ5ZRYNfeGHuqewR6Zk7&sensor=false';
$body=file_get_contents($url2);
...
?> 
```

如果我在第二次调用时运行它，我会收到错误

“状态”-> INVALID_REQUEST

但是当我在结果中粘贴 ulr2 浏览器时是正确的。

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-12-10T16:24:31.140

它与请求之间的时间有关，如果您一个接一个地立即运行它们，则 pagetoken 还无效，您必须在连续请求之间等待几秒钟。

这是因为 google 的许可条款不允许您一次获取所有结果并将它们一次全部返回给用户。您应该有一个用户操作要求更多结果，这会增加几秒钟的延迟。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-19T05:31:19.630

请求之间的 sleep(2) 将解决问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-15T05:55:00.453

睡眠（1.3）是似乎工作的最短时间。换句话说，下一页令牌在上一个 API 请求中返回后大约 1.3 秒变为活动状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-28T11:48:35.270

请尝试下面的代码，我使用 sleep(2) 函数来延迟请求之间的时间，因为下一个 pagetoken 需要在谷歌服务器上进行验证。您甚至可以使用循环来消除代码重复。

// 你的查询在这里

```
$query = ""; 
```

//这里的api键

```
$api_key = ""; 
```

// api调用代码

```
 try {
        echo $url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=" . $query . "&location=40.420989,-3.706812&radius=1000030&=&sensor=false&key=" . $api_key;
        echo "<br>";
        $result = file_get_contents($url);
        $query_results = json_decode($result, true);
        echo "First set" . "<br>";
        print_r($query_results);
        $next_page_token = $query_results['next_page_token'];
        unset($query_results);
        $query_results = array();

        sleep(2);
        echo $url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=" . $query . "&location=40.420989,-3.706812&radius=1000030&=&sensor=false&key=" . $api_key . "&pagetoken=" . $next_page_token;
        echo "<br>";
        $result = file_get_contents($url);
        $query_results = json_decode($result, true);
        echo "Second set" . "<br>";
        print_r($query_results);
        $next_page_token = $query_results['next_page_token'];
        unset($query_results);
        $query_results = array();

        sleep(2);
        echo $url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=" . $query . "&location=40.420989,-3.706812&radius=1000030&=&sensor=false&key=" . $api_key . "&pagetoken=" . $next_page_token;
        echo "<br>";
        $result = file_get_contents($url);
        $query_results = json_decode($result, true);    
        echo "Third set" . "<br>";
        print_r($query_results);
        unset($query_results);
        $query_results = array();
    } catch (Exception $e) {
        $e->getCode();
        $e->getLine();
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-27T16:54:46.787

第一个查询将生成第二页令牌。您只需在 uri 中添加“&pagetoken=tokenvalue”。

当然可以。没有其他选择。

# css - 带有 css div 的 Autocenter 主容器

> ID：14056490
> 
> 赞同：0
> 
> 时间：2012-12-27T14:45:33.250
> 
> 标签：css, html, containers, center

我试图让我的站点的主容器在资源管理器窗口较大时自动居中，或者在资源管理器窗口变窄时保持在左侧。

我将如何使用 CSS 实现这一目标？

现在大多数网站都这样做，例如bloomingdales.com。

当您将浏览器缩小时，主容器保持在左侧，一旦您在右侧打开浏览器，主容器就会自动居中。

谢谢！

我的网站：www.tahara.es

* * *

添加CSS：

```
body {
margin: 0 auto;
font-size: 11px;
font-family: Arial,Helvetica,Verdana,Sans-serif;
color: black;
font-weight: normal;
}

.mainContainer
{
position: absolute;
width: 850px;
min-width: 850px;
margin: 0 auto;
border: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:01:58.783

```
body {
font-size: 11px;
font-family: Arial,Helvetica,Verdana,Sans-serif;
color: black;
font-weight: normal;
}

.mainContainer
{
width: 850px;
min-width: 850px;
margin: 0 auto;
border: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:47:35.640

这应该这样做：

```
body {
  font-size: 11px;
  font-family: Arial,Helvetica,Verdana,Sans-serif;
  color: black;
  font-weight: normal;
}

.mainContainer {
  width: 850px;
  min-width: 850px;
  margin: 0 auto;
  border: 0;
} 
```

[在 JSFiddle 上查看](http://jsfiddle.net/JYRFu/)

关键是你的div上没有`position: absolute;`。该属性将元素从正常的文档流中移除，这样它就没有父元素。`margin: 0 auto;`确定父元素的左右边距。把两个和两个放在一起，你可以看到它们是不相容的。

# mysql - MySQL 中表的最大命中数

> ID：14056491
> 
> 赞同：0
> 
> 时间：2012-12-27T14:45:35.043
> 
> 标签：mysql, usage-statistics

我需要对我的 MySQL 系统中的表使用情况进行一些分析。任何人都可以指出正确的方向，以确定在给定时间段内*最常查询哪个表的方法，即如果有 30 个表，我想知道哪个表被访问最多。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:55:48.860

您应该使用[pt-table-usage](http://www.percona.com/doc/percona-toolkit/2.1/pt-table-usage.html)来分析[一般查询日志](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)。它会提供有关表使用情况的很好的信息（只要您不使用存储过程或存储函数，因为它们会被遗漏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:53:01.117

在您的应用程序运行时临时启用[查询日志记录](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)并查看日志。它可能会对性能产生一些影响，因此您不想让它永久启用。

# c# - 完全编码 url

> ID：14056493
> 
> 赞同：2
> 
> 时间：2012-12-27T14:45:48.290
> 
> 标签：c#, urlencode, url-encoding

我在编码 URL 时遇到了问题。我理解 和 之间的区别`UrlPathEncode`，`UrlEncode`但我似乎遇到了一个两者都无济于事的例子。

我想对以下内容进行编码`my-page-???-testing`。使用时`UrlPathEncode`，它会忽略第一个之后的任何内容`?`，并将`UrlEncode`所有空格转义为`+`，这不是我想要的。

有没有一种我可以用来编码问号的方法？

# jquery - 将外部页面加载到 DIV

> ID：14056494
> 
> 赞同：1
> 
> 时间：2012-12-27T14:45:56.623
> 
> 标签：jquery, html, jquery-load

这段代码在 IE 中运行良好，但在 Chrome 中不行。有人能指出我正确的方向，让它在大多数当前的浏览器中工作。

当您单击链接时，它应该将页面加载到 div 中。代码复制自： [webdeveloper.com](http://www.webdeveloper.com/forum/showthread.php?73180-load-HTML-into-lt-div-gt/)

```
<script>
function processAjax(url) {
      if (window.XMLHttpRequest) { // Non-IE browsers
      req = new XMLHttpRequest();
      req.onreadystatechange = targetDiv;
      try {
        req.open("GET", url, true);
      } catch (e) {
        alert(e);
      }
      req.send(null);
    } else if (window.ActiveXObject) { // IE
      req = new ActiveXObject("Microsoft.XMLHTTP");
      if (req) {
        req.onreadystatechange = targetDiv;
        req.open("GET", url, true);
        req.send();

      }
    }
}

function targetDiv() {
    if (req.readyState == 4) { // Complete
          if (req.status == 200) { // OK response
              document.getElementById("MyDivName").innerHTML = req.responseText;
          } else {
            alert("Problem: " + req.statusText);
          }
    }
}  
</script>

<a href="javascript:processAjax('test.html');">CLICK ME</a>
<div id="myDivName"></div> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:07:28.853

在 jQuery 中，你可以这样做：

```
$("#myDivName").load("test.html", function(response, status, xhr) {
   if (status == "error") {
      var msg = "Sorry but there was an error: ";
      alert(msg + xhr.status + " " + xhr.statusText);
   }
 }); 
```

看一看：[jQuery API load() 函数](http://api.jquery.com/load/)

# xml - 如何使用 XML API 获取 Jenkins 作业列表

> ID：14056497
> 
> 赞同：5
> 
> 时间：2012-12-27T14:45:58.727
> 
> 标签：xml, perl, jenkins

我从 Jenkins REST API 获得了原始 xml 数据`http://jenkins-host:8080/api/xml`。现在我正在努力从这个 xml 中获取作业名称列表到 perl 数组或变量中。以下是xml API的格式

```
<hudson>
<job>
  <name>Test_Job1</name>
  <url>http://jenkins-host:8080/job/Test_job1/</url>
  <color>red</color>
</job>
<job>
  <name>Test_job2</name>
  <url>http://jenkins-host:8080/job/Test_job2/</url>
  <color>red</color>
</job>
<view>
  <name>Test_View</name>
  <url>http://jenkins-host:8080/</url>
</view>
</hudson> 
```

在这里，我只想将作业名称存储到数组中，而不是视图名称。前任：

```
@list = (Test_job1, Test_job2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:10:59.617

使用 XML::Twig 将是：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

my @jobs;
XML::Twig->new( twig_roots => { 'job/name' => sub { push @jobs, $_->text; } })
         ->parseurl( 'http://jenkins-host:8080/api/xml'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:39:08.400

```
my $xml = <<XML;
<hudson>
<job>
  <name>Test_Job1</name>
  <url>http://jenkins-host:8080/job/Test_job1/</url>
  <color>red</color>
</job>
<job>
  <name>Test_job2</name>
  <url>http://jenkins-host:8080/job/Test_job2/</url>
  <color>red</color>
</job>
<view>
  <name>Test_View</name>
  <url>http://jenkins-host:8080/</url>
</view>
</hudson>
XML

my @rules = (
  'hudson' => sub { $_[1]->{name} },
  job  => sub { '@name' => $_[1]{name} },
  name => 'content',
  _default => undef,
);
my $xr = XML::Rules->new(rules => \@rules);
my $data = $xr->parse($xml);

print Dumper $data; 
```

或者：

```
my @jobs;
my @rules = (
  job  => sub { push @jobs, $_[1]{name} },
  name => 'content',
  _default => undef,
);
my $xr = XML::Rules->new(rules => \@rules);
$xr->parse($xml);

print Dumper \@jobs; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T18:11:30.573

最简单的事情就是这个正则表达式。

```
my @matches = ( $xml =~ m(<name>(.*?)</name>)gs) ; 
```

如果您的 XML 格式经常更改，那么您将需要考虑使用 XML 解析器而不是这种简单的正则表达式匹配。

* * *

编辑：添加解释

正则表达式假定您在一个标量变量中拥有所有 XML，'s' 修饰符告诉 Perl 将整个字符串视为一个长行（'.' 将匹配换行符），而 'g' 修饰符告诉 Perl搜索整个字符串，而不是在第一次匹配时退出。

正则表达式本身只是查找所有名称标签对，并捕获它们之间的内容。通过添加问号来修改'。*' 模式，我们告诉 perl 是非贪婪的，所以当它看到第一个结束名称标签时停止捕获。除此以外 '。*' 会匹配到最后一个结束标签，这不是我们想要的。

我们也可以将捕获写为 ([^<]+)。我想这是一个偏好问题。

# iphone - 使用 iPhone 模拟器扫描条形码（使用 ZBar SDK 生成）？

> ID：14056500
> 
> 赞同：0
> 
> 时间：2012-12-27T14:46:16.277
> 
> 标签：iphone, objective-c, ios, barcode-scanner, zbar-sdk

我想使用 iPhone 相机测试我的条码扫描器。

我正在使用 ZBar SDK 进行条码扫描。

我有一个扫描按钮。当我点击扫描按钮时，它向我显示消息，“**相机模拟，用两根手指点击并按住以选择图像**”。当我这样做时，它显示“无照片”另一种看法。

我正在这样做：

```
-(IBAction) scanButtonTapped
{
//Barcode reader that scans from camara feed
reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
reader.supportedOrientationsMask = ZBarOrientationMaskAll;
ZBarImageScanner *scanner = reader.scanner;
//disable rarely used I2/5 to improve performance
[scanner setSymbology:ZBAR_QRCODE config:ZBAR_CFG_ENABLE to:0];
reader.readerView.zoom = 1.0;
//present and release the controller
[self presentModalViewController:reader animated:YES];

}
-(void)imagePickerController:(UIImagePickerController *)picker   didFinishPickingMediaWithInfo:(NSDictionary *)info
{
//get decode result
id<NSFastEnumeration> results = [info objectForKey:ZBarReaderControllerResults];
ZBarSymbol *symbol = nil;
for (symbol in results) {
    break;
}
resultText.text = symbol.data;
resultImage.image = [info objectForKey:UIImagePickerControllerOriginalImage];
[reader dismissModalViewControllerAnimated:YES];
} 
```

我正在尝试扫描二维码。

**谁能告诉我如何选择条形码图像并使用模拟器扫描它？**

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:47:56.577

你不能。相机仅在设备上可用。

# ruby-on-rails - 尽管安装了 ruby racer 和 nodejs，但找不到 JavaScript 运行时

> ID：14056503
> 
> 赞同：8
> 
> 时间：2012-12-27T14:46:20.927
> 
> 标签：ruby-on-rails, ruby, node.js, execjs, therubyracer

我正在尝试在 CentOS 5 上运行 Rails 应用程序并不断收到[此错误](http://clip2net.com/s/2EoCm)：

> 找不到 JavaScript 运行时。有关可用运行时的列表，请参阅[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)。(ExecJS::RuntimeUnavailable)

我同时安装了 NodeJS (v0.8.15) 和 therubyracer (libv8)。

这是我的`gem list`：

```
*** LOCAL GEMS ***

actionmailer (3.2.9, 3.2.8)
actionpack (3.2.9, 3.2.8)
activemodel (3.2.9, 3.2.8)
activerecord (3.2.9, 3.2.8)
activerecord-sqlserver-adapter (3.2.10)
activeresource (3.2.9, 3.2.8)
activesupport (3.2.9, 3.2.8)
arel (3.0.2)
builder (3.1.4, 3.0.4)
bundler (1.2.3, 1.2.2)
capistrano (2.13.5)
commonjs (0.2.6)
daemon_controller (1.1.0)
diff-lcs (1.1.3)
erubis (2.7.0)
execjs (1.4.0)
factory_girl (4.1.0)
factory_girl_rails (4.1.0)
fastthread (1.0.7)
haml (3.1.7)
haml-rails (0.3.5)
highline (1.6.15)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.1.4, 2.1.3)
json (1.7.5)
less (2.2.2)
less-rails (2.2.6)
libv8 (3.11.8.4)
mail (2.5.3, 2.4.4)
mime-types (1.19)
multi_json (1.5.0, 1.3.7)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.6.2, 2.6.1)
net-ssh-gateway (1.1.0)
nokogiri (1.5.6, 1.5.5)
passenger (3.0.18)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.9, 3.2.8)
railties (3.2.9, 3.2.8)
rake (10.0.3, 10.0.2, 10.0.1)
rdoc (3.12)
ref (1.0.2)
rspec-core (2.12.2, 2.12.0)
rspec-expectations (2.12.1, 2.12.0)
rspec-mocks (2.12.1, 2.12.0)
rspec-rails (2.12.0)
ruby-odbc (0.99994)
rubygems-bundler (1.1.0)
rvm (1.11.3.5)
sass (3.2.4, 3.2.3)
sass-rails (3.2.5)
sprockets (2.8.2, 2.2.2, 2.1.3)
sqlite3 (1.3.6)
therubyracer (0.11.0, 0.11.0beta8 x86-linux, 0.10.2)
thor (0.16.0)
tilt (1.3.3)
tiny_tds (0.5.1)
treetop (1.4.12)
twitter-bootstrap-rails (2.1.9, 2.1.6)
tzinfo (0.3.35)
uglifier (1.3.0)
webrat (0.7.3)
will_paginate (3.0.3)
will_paginate-bootstrap (0.2.1) 
```

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'haml'
gem 'will_paginate'
gem 'will_paginate-bootstrap'
gem 'activerecord-sqlserver-adapter'
gem 'ruby-odbc'
gem 'tiny_tds'
gem 'jquery-rails'
gem 'execjs'
gem 'therubyracer', :platforms => :ruby

group :assets do
  gem 'execjs'
  gem 'sass-rails'
  gem 'therubyracer', :platforms => :ruby
  gem 'uglifier'
  gem 'jquery-rails'
  gem 'twitter-bootstrap-rails'
end

group :test do
  gem 'rspec-rails'
  gem 'webrat'
  gem 'factory_girl_rails'
end    

group :development do
  gem 'rspec-rails'
  gem 'haml-rails'
end 
```

我做错了什么，我该怎么做才能让 execjs 看到安装的任何 JS 运行时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:55:15.717

解决这个问题的最简单和最快的方法就是[安装 NodeJS](https://serverfault.com/questions/299288/how-do-you-install-node-js-on-centos)。

如果你确实安装了 NodeJS，那可能是 SElinux 的问题，试试这个：

```
setenforce 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-09T16:27:01.143

下面的答案怎么样：安装 execjs 并且它应该自动为你使用节点：

```
gem install execjs 
```

或者，您也可以尝试安装 therubyracer 并将其包含在您的 gem 文件中

```
gem install therubyracer 
```

然后将其添加到您的 Gemfile 中：

```
gem "therubyracer" 
```

来源：[https ://teamtreehouse.com/forum/rails-server-error-could-not-find-a-javascript-runtime](https://teamtreehouse.com/forum/rails-server-error-could-not-find-a-javascript-runtime)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-24T20:04:06.900

由于没有人可以直接帮助解决这个问题，我找到了自己的解决方案。

它不能直接解决所描述的问题，但它对我有用

我已经将操作系统从 centos 重新安装到 Ubuntu Server - 问题不仅消失了，而且 Rails 的一般配置完美无缺。之后，我设置了大约 20-30 台服务器，其中一些带有非常奇特的软件——没有一个问题，我在谷歌搜索结果的第一页找不到解决方案。我猜 CentOS 并不是很适合 Rails。

希望这个经验对遇到同样问题的人有所帮助。

# windows - 使用 Windows 批处理脚本为文件夹中的每个文件应用命令

> ID：14056506
> 
> 赞同：0
> 
> 时间：2012-12-27T14:46:33.253
> 
> 标签：windows, for-loop, batch-file, ffmpeg

我试图弄清楚如何创建一个脚本，它将所有视频文件放在文件夹 videos\*.* 中，然后在每个文件上使用 ffmpeg 并将文件输出到文件名相同的 convert\*.mp4 。

但是，我不知道如何使`for`循环工作，以便提取正在处理的文件的名称和扩展类型。

```
for %%f IN (videos\*.*) DO (convert.bat %%f) 
```

转换.bat

```
ffmpeg.exe -i %1 -f mp4 converted\%~n.mp4 
```

我试过带双引号和不带双引号。但是，它不会识别该文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:10:26.273

一个班轮批处理文件命令：

```
for %%F in (videos\*.*) do ffmpeg.exe -i "%%~fF" "%%~dpF\converted\%%~nF.mp4" 
```

* * *

你有两个班轮：（添加了`call`命令、引号和`~`）

```
for %%F IN (videos\*.*) DO (call convert.bat "%%~fF") 
```

convert.bat（更正参数使用`~`，选项和引号）

```
ffmpeg.exe -i "%~f1" "%~dp1\converted\%~n1.mp4" 
```

* * *

请参阅[`for /?`](http://technet.microsoft.com/en-us/library/cc754900%28v=ws.10%29.aspx), [`call /?`](http://technet.microsoft.com/en-us/library/cc732835%28v=ws.10%29.aspx),[`ffmpeg`](http://ffmpeg.org/ffmpeg.html)寻求帮助。

# c# - 将 foreach 循环更改为 lambda

> ID：14056508
> 
> 赞同：1
> 
> 时间：2012-12-27T14:46:57.980
> 
> 标签：c#, linq, lambda

> **可能重复：**
> [C# 语法 - Lambda 表达式示例 - ForEach() over Generic List](https://stackoverflow.com/questions/339199/c-sharp-syntax-example-of-a-lambda-expression-foreach-over-generic-list)

我想简化我的代码并将其更改为更短且仍然可读的代码。

```
List<string> onlineModelsNumbers = new List<string>();

foreach (OnlineModel om in OnlineModels)
    onlineModelsNumbers.Add(om.model_id.ToString()); 
```

在这里，我正在考虑在 lambda 表达式中编写相同的内容。但是我该怎么做呢？

```
List<string> onlineModelsNumbersL = onlineModelsNumbers.ForEach(...) 
```

或者

```
List<string> onlineModelsNumbersL = new List<string>(onlineModelsNumbers.ForEach(...)) 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:48:48.197

```
List<string> onlineModelsNumbers = OnlineModels.Select(om => om.model_id.ToString()).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T14:48:52.363

怎么样：

```
onlineModelsNumbers.AddRange(OnlineModels.Select(o => o.model_id.ToString()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T14:49:23.183

```
var onlineModelsNumbers = OnlineModels.Select(m => m.model_id.ToString())
                                      .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:48:33.800

LINQ[故意不附带`ForEach`扩展名](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)（以便 LINQ 函数保持纯粹），但很容易编写自己的`foreach`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T14:49:01.570

您的代码已经很简单了。您可以考虑使用隐式类型的循环变量：

```
foreach(var om in OnlineModels)
{
    onlineModelNumbers.Add(om.model_id.ToString());
} 
```

或者你可以使用`AddRange`：

```
onlineModelNumbers.AddRange(OnlineModels.Select(om => om.model_id.ToString())); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T14:49:16.430

您在这里不需要 foreach，select 将为您完成：

```
IEnumerable<string> = OnlineModels.Select(x => x.model_id.ToString()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T14:49:51.127

只需转换并将其添加为范围：

```
List<string> onlineModelsNumbers = new List<string>(OnlineModels.Select(om => om.model_id.ToString())); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T14:51:58.353

您希望对 OnlineModels 的每个成员执行“foreach”，因此希望将模型的 model_id 字符串表示形式添加到 onlineModelsNumbers。

我希望将表达式编写如下：

```
onlineModels.ForEach(om => onlineModelsNumbers.Add(om.model_id.ToString())) 
```

# java - 在特定节点之后搜索第一个匹配元素（XPath 和 ITunes XML）

> ID：14056510
> 
> 赞同：3
> 
> 时间：2012-12-27T14:47:06.437
> 
> 标签：java, xml, xpath, itunes

不必发布我的完整代码，因为我只有一个简短的问题。我在 XML Doc 中使用 XPath 搜索文本值。我有一个 XML Like

```
<key>Name</key>
<string>Dat Ass</string> 
<key>Artist</key>
<string>Earl Sweatshirt</string> 
<key>Album</key>
<string>Kitchen Cutlery</string> 
<key>Kind</key>
<string>MPEG-Audiodatei</string> 
```

我有一个这样的表达式：

```
//string[preceding-sibling::key[text()[contains(., 'Name')]]]/text() 
```

但这给了我所有以下字符串标签，我只想要第一个带有歌曲标题的标签。

迎接亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:37:00.043

**使用**：

```
(//string[preceding-sibling::key[1] = 'Name'])[1]/text() 
```

**或者，可以使用只进表达式：**

```
(//key[. = 'Name'])[1]/following-sibling::string[1]/text() 
```

**请注意**：

这是一个常见的错误。任何类型的表达：

```
//someExpr[1] 
```

不选择“从所有由`//someExpr`”选择的节点中的文档中的第一个节点。实际上它可以选择*很多*节点。

上面的表达式选择任何被选择的节点并且是`//someExpr`其父节点的第一个这样的子节点。

这就是为什么如果没有括号，这个问题的其他答案通常是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:05:19.350

您可以添加另一个谓词`[1]`来选择第一个匹配节点。嵌套谓词 using`text()`应该是不必要的：

```
//string[preceding-sibling::key[contains(., 'Name')]][1]/text() 
```

选择此节点的另一种可能更有效的方法是

```
//key[contains(., 'Name')]/following-sibling::*[1][self::string] 
```

这将选择想要的`key`节点之后的第一个节点（具有任何名称）并测试其名称是否为`string`.

# ruby-on-rails - 瘦 Web 服务器拒绝在 Windows 7 x64 中运行

> ID：14056521
> 
> 赞同：-1
> 
> 时间：2012-12-27T14:47:54.640
> 
> 标签：ruby-on-rails, windows-7, webserver, thin

我从 Github 获取了一个项目，但无法使其在 Windows 7 x64 中运行。

当我尝试在 RubyMine 中启动调试器时，我得到了这个：

```
runnerw.exe C:\Ruby193\bin\ruby.exe -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) C:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-debug-ide-0.4.17.beta14/bin/rdebug-ide --dispatcher-port 19743 --port 19744 -- D:/Work/angular-devise/script/rails server -b 127.0.0.1 -p 3000 -e development
Fast Debugger (ruby-debug-ide 0.4.17.beta14, ruby-debug-base 0.11.30.pre10) listens on 127.0.0.1:19744
Uncaught exception: cannot load such file -- thin_parser
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in 'require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in 'block in require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in 'load_dependency'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in 'require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/thin-1.5.0/lib/thin.rb:39:in '<top (required)>'
    C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in 'require'
    C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in 'require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in 'block (2 levels) in require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in 'each'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in 'block in require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in 'each'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in 'require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler.rb:119:in 'require'
    D:/Work/Paul/Documents/PROGRAMM/Hill30/Projects/trainer-common/StringsEditor/angular-devise/config/application.rb:13:in '<top (required)>'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in 'require'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in 'block in <top (required)>'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in 'tap'
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in '<top (required)>'
    D:/Work/Paul/Documents/PROGRAMM/Hill30/Projects/trainer-common/StringsEditor/angular-devise/script/rails:6:in 'require'
    D:/Work/Paul/Documents/PROGRAMM/Hill30/Projects/trainer-common/StringsEditor/angular-devise/script/rails:6:in '<top (required)>'

Process finished with exit code 0 
```

如果我尝试使用`rails server`命令运行应用程序，我会得到：

```
D:\Work\angular-devise>rails server
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in 'require': cannot load such file -- thin_parser (LoadError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in 'block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in 'load_dependency'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in 'require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/thin-1.5.0/lib/thin.rb:39:in '<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in 'require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in 'block (2 levels) in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in 'each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in 'block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in 'each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in 'require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler.rb:119:in 'require'
        from D:/Work/Paul/Documents/PROGRAMM/Hill30/Projects/trainer-common/StringsEditor/angular-devise/config/application.rb:13:in '<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in 'require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in 'block in <top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in 'tap'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in '<top (required)>'
        from script/rails:6:in 'require'
        from script/rails:6:in '<main>' 
```

并且不知道该怎么做。谷歌不知道这个错误。你能在消除错误的过程中指导我吗？

瘦 1.5.0 已安装。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T15:15:38.367

I had quite a bit of trouble setting up a dev environment on Windows myself. This error is only the first you'll be seeing of many (that's my guess, at least).

My solution was to set up Ubuntu in VirtualBox and install everything (including RubyMine) there. It works perfectly, and is a joy to use. As a bonus, I can save the machine state whenever I'm done coding, and when I get back to work, everything's right there exactly as I left it.

The actual files I work with are in a folder shared between my VM and my "real" machine, so the backup system for my computer backs them up automatically (in addition to pushing up to BitBucket).

Some people also use [Vagrant](http://vagrantup.com/) to quickly create development VMs which let you keep using Windows (because you only need to SSH into your VM, and can keep editing files on Windows). A matter of taste, I guess.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T15:18:06.870

尝试使用“bundle exec rails s”来启动服务器。

# python - converting string to int python

> ID：14056524
> 
> 赞同：1
> 
> 时间：2012-12-27T14:48:23.723
> 
> 标签：python

how can I convert a string to an int in python say I have this array

```
['(111,11,12)','(12,34,56)'] to [(111,11,12),(12,34,56)] 
```

Any help will be appreciated thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T14:50:05.997

```
import ast
a = "['(111,11,12)','(12,34,56)']"
[ast.literal_eval(b) for b in ast.literal_eval(a)]
# [(111, 11, 12), (12, 34, 56)] 
```

**EDIT**: if you have a list of strings (and not a string), just like @DSM suggests, then you have to modify it:

```
a = ['(111,11,12)','(12,34,56)']
[ast.literal_eval(b) for b in a]
# [(111, 11, 12), (12, 34, 56)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:21:57.790

You could try some re:

```
import re
src = ['(111,11,12)', '(12,34,56)']
[tuple([int(n) for n in re.findall(r"(\d+),(\d+),(\d+)", s)[0]]) for s in src] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:58:09.057

By reading your question I see you have a list of strings:

```
l = ['(111,11,12)','(12,34,56)'] 
```

and you want to convert that to a list of numbers...

```
# some cleaning first
number_list = [x.strip('()').split(',') for x in l]
for numbers in number_list:
    numbers[:] = [int(x) for x in numbers]
print number_list 
```

Sorry for that list comprehension parsing, if you're new that looks weird but is a very common python idiom and you should get familiar with it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T17:26:05.180

Have fun!

```
def customIntparser(n):
    exec("n="+str(n))
    if type(n) is list or type(n) is tuple:
        temps=[]
        for a in n:
            temps.append(customIntparser(str(a)))
        if type(n) is tuple:
            temps=tuple(temps)
        return temps
    else:
        exec("z="+str(n))
        return z 
```

Sample tests:

```
>>>s = "['(111,11,12)','(12,34,56)']"
>>>a=customIntparser(s)
>>> a
# [(111, 11, 12), (12, 34, 56)]
>a[0][1]
# 11 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-27T14:52:38.567

You can convert a string to an int with the int() keyword:

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> int('42')
42 
```

But the example you give seems to indicate that you want to do this for an entire tuple, not a single integer. If so, you can use the builtin eval function:

```
>>> eval('(111,111)')
(111, 111) 
```

# javascript - 暂时禁用所有 onclick 事件并将它们绑定回来

> ID：14056534
> 
> 赞同：0
> 
> 时间：2012-12-27T14:48:57.297
> 
> 标签：javascript, jquery, cross-browser, bookmarklet

如何禁用页面上的所有onclick事件，绑定我的自定义函数，并在执行后启用所有以前的事件？

我正在构建一个书签，它应该适用于任何已经加载的页面，并且我正在使用 jQuery 来处理我的自定义逻辑（页面在加载后会被查询）。请注意，我无法控制绑定哪些事件以及何时绑定。

目前我找到的最好的稳定解决方案是取消绑定事件，通过自定义函数绑定以防止默认操作，然后重新加载页面。这可行，但是我想避免重新加载。部分解决方法是重新加载页面并滚动到上一个位置（如何实现此效果？）。一些可能的解决方案会使用 iframe，但我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T14:53:55.937

放置一个 div 元素更容易......就像

**CSS**

```
.noclick {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 9999; /* or maybe higher */

    background-color: transparent;
} 
```

**jQuery**

```
jQuery(document).ready(function() {
    jQuery('body').append('<div class="noclick" />');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:55:59.667

我已经看到它完成并自己完成的一个好方法是使用模态“掩码”覆盖。

覆盖整个页面的灰色透明蒙版，您正在与之交互的元素除外，例如。模态弹出窗口。

另一种方法是使用[jQuery BlockUI 插件](http://jquery.malsup.com/block/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:05:15.087

您可以将 onclick 重新分配给另一个属性，然后覆盖它。

一个元素的例子

```
var btn = document.getElementById("button");
btn._onclick = btn.onclick;
btn.onclick = function(){ return false; }; 
```

以及当您想将其转移回原始事件时

```
var btn = document.getElementById("button");
if (btn._onclick) {
    btn.onclick = btn._onclick;
    btn._onclick = null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:57:30.500

这取决于您的 onclick 事件是否依赖于被单击的元素（即是否需要知道单击了哪个元素）：

如果它是独立的，那么您可以将事件处理程序添加到 body 元素或其他父元素（因为首先调用父事件，然后是子事件，这就是您想要的）：

```
$('body').click(function() { /* your code here */}); 
```

它取决于元素，然后您可以访问已在正在单击的元素的“单击”属性中注册的上一个 onclick 事件代码，所以像这样（可能对选择器更具体一点） ：

```
$('body *').each(function() {
  var previousClick = this.click;
  this.click = null; // remove previous
  $(this).click(function() { /* your code here */});
  $(this).click(function() { previousClick();}); // run the code that was already there.
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-07T06:28:09.923

一些修改算法的答案。这个想法是用透明元素“覆盖”链接。您可以使用伪元素（例如**:after**）。

为了防止“tab键”设置tabindex：

`<a href="..." tabindex="-1">`

单击时将链接标记为“已禁用”：

`$('a').on('click', function(){ $(this).addClass('disabled') })`

添加CSS：

`a.disabled:after { position: absolute; content: ""; display: block; background: white; opacity: 0.5; // optional z-index: 999; left: 0; top: 0; bottom: 0; right: 0; }`

```
$('a').on('click', function(){ $(this).addClass('disabled') });
```

```
a.disabled:after {
    position: absolute;
    content: "";
    display: block;
    background: white;
    opacity: 0.5; // optional 
    z-index: 999;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
  }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<a hreh="#" tabindex="-1">The Link</a>
```

# datepicker - 剑道 DatePicker 最大日期问题

> ID：14056544
> 
> 赞同：5
> 
> 时间：2012-12-27T14:49:44.500
> 
> 标签：datepicker, kendo-ui

我有两个剑道 DatePickers 来选择工作的开始和结束日期。作业由多个任务组成，其中包含自己的完成日期（任务在网格中列出，每个记录使用 kendo DatePicker 选择完成日期）

当用户设置作业开始和结束日期时，我设置每个任务的最大值和最小值。我使用剑道将数据与剑道绑定（通过剑道淘汰赛）。

问题是当用户清除作业的结束日期时，我将任务级别 DatePicker 的最大日期设置为 (2099, 11.31)，但是当我单击任务级别 datepicker 时，我无法立即导航到下个月。如果我点击其他一些日期选择器可以导航。当我删除工作级别的开始或结束日期时会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:56:29.277

好吧，这个问题似乎不再是“活跃的”，但作为参考，我在设置新值后通过在剑道控件上调用 .enable() 设法解决了这个问题（我使用的是 ko + ko-kendo 但其他比它完全相同）小提琴：http: [//jsfiddle.net/AlexPaven/m5M46/2/](http://jsfiddle.net/AlexPaven/m5M46/2/)

小提琴中的代码：

```
var vm = {
    val: ko.observable(new Date()),
    mx: ko.observable(new Date())
};

ko.applyBindings(vm);

setTimeout(function() { 
    vm.mx(new Date(2099, 11, 31)); 
    var d = $('#a').data('kendoDatePicker');
    d.enable(); // commenting this exhibits the problem - max constraint isn't updated visually
}, 3000); 
```

我有理由确定这没有副作用；如果您想保留启用状态，我相信您可以检查状态并调用启用+禁用或禁用+启用。

天哪，这很烦人。

编辑：错了，我被更多涉及的行为所愚弄。只有在每次设置新的最大值时都打开日期选择器才会出现错误；第一次确认更改，但随后不确认。我想我会再花几分钟的时间...

# php - Smarty 如何从 foreach 获取第一个索引？

> ID：14056545
> 
> 赞同：6
> 
> 时间：2012-12-27T14:49:46.993
> 
> 标签：php, foreach, smarty

构造是这样的：

```
<!-- projects list -->
            {if !empty($userObjects)}
                <select id="projects-list" tabindex="1" name="project">
                    {if !isset($selected)}<option value="0">Choose project</option>{/if}
                {foreach from=$userObjects item=v}
                    <option value="{$v.Id}" {if $selected==$v.Id}selected="selected"{/if} }>{$v.Name}

                        {* if it's 1st element *}
                        {if $smarty.foreach.v.index == 0}
                            {if isset($limit)}<br /><span id="projlimit">{$limit}</span> {$currency->sign}{/if}
                        {/if}

                    </option>
                {/foreach}
                </select> 
```

如你所见，我做到了

```
{if $smarty.foreach.v.index == 0} 
```

但它出错了。在这种情况下，所有`options`元素都有一个 $limit 值。怎么做才好？我只需要第一个。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-10T14:27:29.613

我不想显得粗鲁，但邦迪的回答并非在所有情况下都有效。由于 PHP 的数组是有序映射，所以第一个键的值不会总是 0。

在这些情况下，您可以使用`@index`、`@iteration`或`@first`属性。更多详细信息在[http://www.smarty.net/docs/en/language.function.foreach.tpl#foreach.property.iteration](http://www.smarty.net/docs/en/language.function.foreach.tpl#foreach.property.iteration)`foreach`上的 smarty文档中

您的问题的可能解决方案之一如下：

```
{foreach $rows as $row}
    {if $row@iteration == 1}
        First item in my array          
    {/if}            
{/foreach} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-25T10:17:14.200

您可以使用以下代码：

```
{foreach from=$userObjects item=v name=obj}

    {if $smarty.foreach.obj.first}
        This is the first item
    {/if}

    {if $smarty.foreach.obj.last}
        This is the last item.
    {/if}
{/foreach} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-27T15:23:18.223

你可以通过数组键来做到这一点吗？

```
{foreach from=$rows key=i item=row}
     {if $i == 0}
         First item in my array
     {/if}
{/foreach} 
```

# iphone - 使用 CLLocationDistance 计算最外层坐标？

> ID：14056556
> 
> 赞同：0
> 
> 时间：2012-12-27T14:50:25.093
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我在地图上放置了 1-12 个地标。我在计算最外面的两个点时遇到了麻烦，因此我可以缩小地图以显示所有引脚。

```
CLLocationDistance distLong = [zoomLocationMax.longitude getDistanceFrom:zoomLocationMin.longitude];
CLLocationDistance distLat = [zoomLocationMax.latitude getDistanceFrom:zoomLocationMin.latitude];

MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(m_MapView.userLocation.coordinate, distLat, distLong);
MKCoordinateRegion adjustedRegion = [m_MapView regionThatFits:viewRegion];

m_MapView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
[m_MapView setRegion:adjustedRegion animated:YES]; 
```

我一直在愚弄上面的代码，但我可以预见到一些问题：

1) 前两行给了我一个 Bad receiver type 'CLLocationDegres' (aka double'} 错误。2) 我真的不希望用户位置作为中心点，理想情况下我希望有两个最远点的中心.

任何代码片段、示例或解释都会有很大帮助！！

谢谢

编辑以显示 zoomLocatin 的计算方式。我基本上采用日志和纬度并确定最小值和最大值......也不确定这是否正确：

```
CLLocationCoordinate2D zoomLocationMin;
CLLocationCoordinate2D zoomLocationMax;
if (coordinate.latitude < zoomLocationMin.latitude)
    zoomLocationMin.latitude = coordinate.latitude;
if (coordinate.longitude < zoomLocationMin.longitude)
    zoomLocationMin.longitude = coordinate.longitude;
if (coordinate.latitude > zoomLocationMax.latitude)
    zoomLocationMax.latitude = coordinate.latitude;
if (coordinate.longitude > zoomLocationMax.longitude)
    zoomLocationMax.longitude = coordinate.longitude; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:35:24.193

也许您应该尝试使用此代码来处理完全适合您的地标：

```
- (void)zoomMapViewToFitAnnotations:(MKMapView *)mapView animated:(BOOL)animated
{ 
    NSArray *annotations = mapView.annotations;
    int count = [mapView.annotations count];
    if ( count == 0) { return; } //return if no annotations

    //convert NSArray of id <MKAnnotation> into an MKCoordinateRegion that can be used to set the map size
    //can't use NSArray with MKMapPoint because MKMapPoint is not an id
    MKMapPoint points[count]; //C array of MKMapPoint struct
    for( int i=0; i<count; i++ ) //load points C array by converting coordinates to points
    {
        CLLocationCoordinate2D coordinate = [(id <MKAnnotation>)[annotations objectAtIndex:i] coordinate];
        points[i] = MKMapPointForCoordinate(coordinate);
    }
    //create MKMapRect from array of MKMapPoint
    MKMapRect mapRect = [[MKPolygon polygonWithPoints:points count:count] boundingMapRect];
    //convert MKCoordinateRegion from MKMapRect
    MKCoordinateRegion region = MKCoordinateRegionForMapRect(mapRect);

    //add padding so pins aren't scrunched on the edges
    region.span.latitudeDelta  *= ANNOTATION_REGION_PAD_FACTOR;
    region.span.longitudeDelta *= ANNOTATION_REGION_PAD_FACTOR;
    //but padding can't be bigger than the world
    if( region.span.latitudeDelta > MAX_DEGREES_ARC ) { region.span.latitudeDelta  = MAX_DEGREES_ARC; }
    if( region.span.longitudeDelta > MAX_DEGREES_ARC ){ region.span.longitudeDelta = MAX_DEGREES_ARC; }

    //and don't zoom in stupid-close on small samples
    if( region.span.latitudeDelta  < MINIMUM_ZOOM_ARC ) { region.span.latitudeDelta  = MINIMUM_ZOOM_ARC; }
    if( region.span.longitudeDelta < MINIMUM_ZOOM_ARC ) { region.span.longitudeDelta = MINIMUM_ZOOM_ARC; }
    //and if there is a sample of 1 we want the max zoom-in instead of max zoom-out
    if( count == 1 )
    { 
        region.span.latitudeDelta = MINIMUM_ZOOM_ARC;
        region.span.longitudeDelta = MINIMUM_ZOOM_ARC;
    }
    [mapView setRegion:region animated:animated];
} 
```

因此，您必须定义填充、最大度数弧和最小缩放弧。对于前。应该是这样的：

```
#define MINIMUM_ZOOM_ARC 0.05 //approximately 1 miles (1 degree of arc ~= 69 miles)
#define ANNOTATION_REGION_PAD_FACTOR 1.25
#define MAX_DEGREES_ARC 360 
```

希望你会喜欢它，干杯

# php - PHP中的警报输入名称

> ID：14056558
> 
> 赞同：0
> 
> 时间：2012-12-27T14:50:45.107
> 
> 标签：php, javascript, html

我有一个按钮，单击该按钮会打开一个带有输入文本的新窗口（警报）。现在输入文本有一个名称，比方说`name="test"`，但是我在将这个名称从 JS 到 PHP 时遇到了问题。我可以这样做吗？

这是代码：

```
if (isset($_POST['edit'])){
    $editfile = $_POST['member'];
    $alertname = $_GET['test'];
    rename('social/'.$editfile.'.xml', 'social/'.$alertname.'.xml');
} 
```

JS：

```
<input type="submit" name="edit"
    onclick="prompt('Please type new member name:', 'Member new name');"
    value="Edit" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:57:33.137

您必须使提示填充将要提交的表单元素。就像是：

```
<input type="hidden" id="prompt-data" name="prompt">
<input type="submit" name="edit" onclick="document.getElementById('prompt-data').value = prompt('Please type new member name:', 'Member new name');" value="Edit" /> 
```

然后你可以在你的 PHP 中使用`$_POST['prompt']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:05:23.577

从它的声音来看，您有**提示（...）**而不是警报。您需要通过 POST 将其发送到 php。在这种情况下，您可以在 HTML 中包含以下内容：

```
<form action="myphpscript.php" method="POST">
    <input type="hidden" id="test" value="">
    <input type="button" value="Click to enter something" onClick="storeSomething()">
</form>
<script language="javascript">
    storeSomething = function () {
        var test = document.getElementById('test');
        test.value = prompt("Please enter something", "something");
    }
</script> 
```

# mysql - MySQL/CakePHP 中的子序列

> ID：14056562
> 
> 赞同：0
> 
> 时间：2012-12-27T14:51:15.807
> 
> 标签：mysql, cakephp

在我的 mysql 表中，我有一个字段是 4 个字母的 Myers-Briggs 个性类型。当性格类型与查询中的性格类型匹配时，我想通过表格进行搜索并匹配，因为它有两个共同点。我理解这一点的方式，实际上只是找到两者中最长的公共子序列并测试它是否 >= 2

例子：

'ISTJ' 会匹配 'INFJ'，因为公共子序列的长度是 'IJ' >= 2

和

'ISTJ' 不会与 'INFP' 匹配，因为公共子序列的长度是 'I' <= 2

有没有办法在 mysql 查询中做到这一点？我正在使用 CakePHP 进行查询，所以如果您知道如何使用 Cake 进行此操作，那也会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:07:09.523

Myer-Briggs 人格类型是位置性的。这意味着您可以逐个字符进行比较。

这是一种方法，您只需输入一次比较字符串：

```
select t.*
from (select t.*,
             (case when substring(t.MyerBriggs, 1, 1) = substring(const.comp, 1, 1)
                   then 1 else 0
              end) as MB1,
             (case when substring(t.MyerBriggs, 2, 1) = substring(const.comp, 2, 1)
                   then 1 else 0
              end) as MB2,
             (case when substring(t.MyerBriggs, 3, 1) = substring(const.comp, 3, 1)
                   then 1 else 0
              end) as MB3,
             (case when substring(t.MyerBriggs, 4, 1) = substring(const.comp, 4, 1)
                   then 1 else 0
              end) as MB4
      from t cross join
           (select 'INFJ' as comp) const
     )
where (MB1+MB2+MB3+MB4) >= 2 
```

您实际上可以在 MySQL 中将其简化为：

```
 select t.*
      from t cross join
           (select 'INFJ' as comp) const
      where (if(substring(t.MyerBriggs, 1, 1) = substring(const.comp, 1, 1), 1, 0) +
             if(substring(t.MyerBriggs, 2, 1) = substring(const.comp, 2, 1), 1, 0) +
             if(substring(t.MyerBriggs, 3, 1) = substring(const.comp, 3, 1), 1, 0) +
             if(substring(t.MyerBriggs, 4, 1) = substring(const.comp, 4, 1), 1, 0)
            ) >= 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:05:07.340

如果我正确理解 Myers-Briggs 的话，四个分类轴中的每一个都有两种可能性，并且字母的顺序是恒定的（因此没有任何意义）。

在这种情况下，您可以使用如下所示的四个二态列，而不是一个字符串：

```
CREATE TABLE profile (
    user_id INT,
    EI ENUM ('E', 'I'),
    SN ENUM ('S', 'N'),
    TF ENUM ('T', 'F'),
    JP ENUM ('J', 'P')
); 
```

配置文件“ISTJ”将像这样插入：

```
INSERT INTO profile VALUE (1, 'I', 'S', 'T', 'J'); 
```

与配置文件“INFJ”匹配如下所示：

```
SELECT * FROM profile WHERE
   (EI = 'I') + (SN = 'N') + (TF = 'F') + (JP = 'J') >= 2 
```

# linux - OpenMP：“隐式屏障”中有 20% 的时间？

> ID：14056564
> 
> 赞同：2
> 
> 时间：2012-12-27T14:51:22.203
> 
> 标签：linux, performance, profiling, solaris, openmp

我正在查看一些使用 OpenMP 的代码，尽管我对它不太熟悉。（代码也不是 OpenMP。）

在针对它运行分析器时，我看到该程序据称在“OMP 隐式屏障”函数中花费了大约 20% 的挂钟时间。

这是 OpenMP 的典型特征，还是（可能）意味着工作负载在线程之间分布不均？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T16:25:28.757

大多数 OpenMP 结构的末尾都有隐式障碍，例如`for`（在 C/C++ 中）或`do`（在 Fortran 中），`sections`并且`single`（但是，在结构的末尾没有障碍`master`）。如果算法允许不同线程在工作共享指令之后不同步运行，则该`nowait`子句可用于禁用这些隐式屏障。另一个隐式屏障位于每个并行区域的末尾，作为 fork/join 执行模型的一部分。

您已经正确猜到，隐式障碍等待时间的高百分比通常意味着工作共享远非最佳。可能存在（很多）大型`single`结构，也可能存在并行循环（`for`/`do`结构），每次迭代的执行时间不同。如果不平衡来自每次迭代中计算时间不同的循环（典型示例是绘制 Mandelbrot 集），则可以将循环调度更改为`dynamic`使用`schedule(dynamic,chunk)`子句，其中`chunk`是块大小 (>= 1)。块大小越小，负载平衡越好，但动态循环调度程序的开销会更高。块大小越大，开销越低，但会出现更多的负载不平衡。最佳值通常取决于问题的类型和硬件，因此必须调整该值才能在执行代码的特定系统上获得最佳性能。

# php - 仅当为 Null php/mysql 时才更新值

> ID：14056566
> 
> 赞同：1
> 
> 时间：2012-12-27T14:51:32.857
> 
> 标签：php, mysql

感谢您查看我的问题。我试图仅在该字段为空时更新我的​​数据库中的值（因此，如果有人尝试注册一个已准备就绪的位置并且将输出错误消息，则不会覆盖现有用户）。我在下面列出了我尝试过的 2 个最新脚本。如果 select 语句不存在，第一个脚本用于更新数据库，但如果在同一天和同一时间输入，则会覆盖用户。谢谢大家！

```
$sql = ("SELECT `player1` FROM `users` where id = '$id' and Times = '$time'"); 

$result = $conn->query($sql);

if ($result->fetch_assoc === NULL) {
$update_player = ("UPDATE users SET player1 = '$name' where id = '$id' AND Times =   '$time'")

if($update_player){
echo "Date for $name inserted successfully!";
}
}

else {
  echo 'That spot is all ready taken!';
}

//2nd script 

$query=mysql_query("UPDATE users SET 
player1 = isNULL (player1, $name) 
where id = '$id' AND Times = '$time'" );

if($query){

 echo "Data for $name inserted successfully!";
}

else {
 echo 'That spot is all ready taken!';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:00:45.130

以下代码应该可以解决问题：

```
$query=mysql_query("UPDATE users SET 
player1='$name' 
where id = '$id' AND Times = '$time' AND player1 IS NULL" );

if(mysql_affected_rows() == 1){
  echo "Data for $name inserted successfully!";
}
else {
  echo 'That spot is all ready taken!';
} 
```

请注意，您应该改用`pdo`or`mysqli`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:02:47.243

试试这个。

```
 while($row = $result->fetch_assoc) {
    if($row['player1'] == NULL){
      $update_player = ("UPDATE users SET player1 = '$name' where id = '$id' AND Times =   '$time'")
    } 
```

# android - Android：带有附加参数的onClick回调？

> ID：14056569
> 
> 赞同：1
> 
> 时间：2012-12-27T14:51:46.633
> 
> 标签：android, buttonclick

从此开始

```
<Button
            android:onClick="onBtnClicked"
            android:id="@+id/btn_edit_shared_preferences"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btn_show_map"
            android:layout_centerHorizontal="true"
            android:text="Edit Shared Preferences" /> 
```

[这里](http://developer.android.com/guide/topics/ui/controls/button.html)说发送到 onClick 回调函数的唯一参数是 View 对象。

好吧，我可能需要一些“额外参数”，比如在这种情况下：我有一个处理活动启动的函数，所以它会是

```
openActivity(View v){..} 
```

另一方面，在我想要的布局中

```
:onclick="openActivity(activityClassName)" 
```

做类似的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:57:09.157

您可以`android:tag="YouActivity"`与您的`android:onClick="openActivity"`

现在你可以有这样的`Activity`名字`openActivity()`：

```
void openActivity(View v)
{
    String activityName = v.getTag().toString();
    Class<?> aClass = null;
    try {
            aClass = Class.forName("your.package."+activityName);
    } catch (ClassNotFoundException e) {
            e.printStackTrace();
    }
    startActivity(new Intent(this, aClass));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:58:29.087

好吧，View 对象只是事件获取的参数，但您可以通过[Context](http://developer.android.com/reference/android/content/Context.html)对象`onClick`获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:01:22.687

一个按钮可以对应一个方法。没有办法通过额外的参数。例如，在您的情况下，您希望按钮启动一个活动。一种方法是编写一个仅用于启动该活动的方法。

```
<Button
        android:onClick="launchPreferencesActivity"
        android:id="@+id/btn_edit_shared_preferences"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btn_show_map"
        android:layout_centerHorizontal="true"
        android:text="Edit Shared Preferences" /> 
```

然后在您的活动中：

```
public void launchPreferencesActivity(View v){
        //start Activity
} 
```

不同的按钮可以对应不同的方法来处理点击事件。或者，如果您愿意，您可以使用 View 参数来区分哪个视图正在调用该方法并以这种方式处理它。

如果还有其他因素可能会改变按钮的行为，您可以随时更改代码中的 onClickListener。但总的来说，我认为上述方法更适合您尝试做的事情。

# android - Android - 使用linkedIn-j：有时不会发送电子邮件邀请

> ID：14056570
> 
> 赞同：0
> 
> 时间：2012-12-27T14:51:44.813
> 
> 标签：android, email, linkedin, invitation, linkedin-j

我正在使用 LinkedIn 开发，我的应用程序向用户发送邀请。好的，直到这里。但是我注意到有时邀请不会发送到我之前已经发送过的电子邮件，而且我还注意到过了一段时间（我不知道多长时间）邀请会再次发送到该电子邮件。

在一段时间内每封电子邮件发送邀请是否有限制？

我想了解这一点，因为我在文档中没有找到任何关于它的信息。

谢谢您的帮助

# android - 替换或处理 WebView 上的“开始”按钮

> ID：14056575
> 
> 赞同：4
> 
> 时间：2012-12-27T14:52:28.007
> 
> 标签：android, webview

我有一个 WebView，它从服务器获取一个 HTML 页面。HTML 页面不在我的控制之下。它可以是任何东西。我只是从服务器获取 URL，我使用 WebView 加载它。现在问题是：对于某些网页，我收到了一组带有提交和重置按钮的问题。例如：拥有一个带有提交和重置按钮的 TextView。当我专注于文本框时 - 键盘以 Go 按钮打开。如果用户按下 Go 按钮，表单数据将被提交，这是我不想要的。它有一个提交按钮，为什么 go 按钮要做同样的事情。

我尝试了几件事： - 禁用 GO 按钮（我猜不可能） - 用 Enter 替换 Go 按钮（没有运气） - 处理 Go 按键（没有运气）

基本上，如果我想从键盘禁用/删除 Go 按钮。

任何人都可以为此提供可能的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T05:42:41.900

请查看 Menifest.xml 文件中的以下技巧，了解您的 webview 活动

```
<activity android:name="..."
   ...
   android:imeOptions="actionSend|flagNoEnterAction"
   ...
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T04:55:36.180

WebView 已过时，正在使用 AbsoluteLayout 进行渲染，这在 API V3 上已被弃用，[请参阅此处](http://developer.android.com/reference/android/webkit/WebView.html)。

我想唯一的方法是定制你的软键盘，

请参阅下面的链接，

*   [http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)

*   [https://github.com/rciovati/Android-KeyboardView-Example](https://github.com/rciovati/Android-KeyboardView-Example)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T05:49:55.987

我没有成功隐藏操作按钮；但是，您可以轻松更改它的功能。

```
public class MyWebView extends WebView
{
    public MyWebView(Context context) { super(context); }

    @Override public InputConnection onCreateInputConnection(EditorInfo ei) {
        return new MyConnection(super.onCreateInputConnection(ei));
    }

    private class MyConnection extends InputConnectionWrapper
    {
        public MyConnection(InputConnection wrapped) { super(wrapped, false); }

        @Override public boolean performEditorAction(int action) {
            // do what you want
            return true;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T14:59:24.293

```
android:imeOptions="actionDone" 
```

将此添加到您的 editText 的 XML 中，它将用一个“完成”按钮替换它，该按钮只是关闭键盘，它根本不会继续表单

# linux - 每行只保留第二个属性

> ID：14056577
> 
> 赞同：1
> 
> 时间：2012-12-27T14:52:37.563
> 
> 标签：linux, bash, sed, awk, cut

我有一个 csv 文件，每行有 4 个属性，用逗号分隔。我试图想出一个`sed`命令来只保留每行的第二个属性。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:54:41.933

你会更好`cut`：

```
cut -d "," -f 2 file.txt 
```

如果您想删除欺骗，并且您不介意条目的顺序，只需执行以下操作：

```
cut -d "," -f 2 file.txt | sort -u 
```

并扩展到 attrs 1 和 to，只需使用：

```
cut -d "," -f 1,2 file.txt | sort -u 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:01:52.973

为此，您不需要 sed。最快的是`cut`：

```
cut -d, -f2 file 
```

但是，如果你想要 sed ，你可以这样做：

```
sed '/[^,]*,\([^,]*\).*/ sxx\1x' file 
```

# vb6 - VB6：在 adodb.Connection 对象上调用 .Open 时出错（适用于特定上下文）

> ID：14056581
> 
> 赞同：1
> 
> 时间：2012-12-27T14:52:56.810
> 
> 标签：vb6, odbc

我目前正在使用小型旧 VB6 应用程序。

这是我的问题：当用户单击按钮时，程序正在打开与 Oracle 数据库的连接。这在从 IDE 运行或在 Windows 95 或 Windows 98 兼容模式下运行 .exe 时效果很好，否则会崩溃。它确实在另一个工作站上工作，但我不知道为什么（不同的配置，但我不知道那可能是什么！）

这是按下按钮时调用的代码（它在另一个没有设置兼容性设置但可能有一些其他配置差异的工作站上工作）。大多数代码与连接无关，但为了完整起见，我将其保持不变。

```
Private Sub Form_Load()
'
'   Loads the list of printers (as defined in a table of the SQL DB)
'
    On Error GoTo error_handler

    '   icon
    Screen.MousePointer = vbHourglass

    'Dim conn As New adodb.Connection
    'Dim cmd As New adodb.Command
    'Dim rcs As New adodb.Recordset
    Dim conn As adodb.Connection
    Dim cmd As adodb.Command
    Dim rcs As adodb.Recordset

    Set conn = New adodb.Connection
    Set cmd = New adodb.Command
    Set rcs = New adodb.Recordset

    'Dim fs As New FileSystemObject
    Dim fs As FileSystemObject
    Set fs = New FileSystemObject
    Dim fic As File
    Dim texte As textStream
    Dim req As String

    Dim i As Integer
    Dim chem As Variant

    Dim buffer As String
    Dim retstring As String
    Dim rc As Long

    If fs.FileExists(Appli_Rep & "Queries\System\printers_list.txt") Then
        Set fic = fs.GetFile(Appli_Rep & "Queries\System\printers_list.txt")
        Set texte = fic.OpenAsTextStream(ForReading)
    End If

    '
    '   Reads connection string
    '
    buffer = String(145, " ")
    rc = GetPrivateProfileString("Requete", "DRIVER", "1", buffer, Len(buffer) - 1, Appli_Rep & "suivi__.ini")
    DoEvents
    retstring = Left(buffer, InStr(buffer, Chr(0)) - 1)

    '
    '   Gets the PATH environment variable
    '   So that we know where to find tnsname.ora
    '
    i = 0
    chem = Split(Environ("TNS_ADMIN"), ";")
    Do
        If Len(Dir(chem(i) & "\Tnsnames.ora")) <> 0 Then
            ChDrive chem(i)
            ChDir chem(i)
            Exit Do
        End If
        i = i + 1
        DoEvents
    Loop Until i > UBound(chem)

    ' Opens a connection (no DSN)

    'Set conn = New adodb.Connection
    conn.ConnectionString = "uid=_uid;pwd=_pwd;DRIVER=" & retstring & ";server=__PROD;"
    'conn.ConnectionTimeout = 30
    conn.ConnectionTimeout = 3000    ' (no change)

    conn.Open   ' -2147467259 [Microsoft][ODBC driver for Oracle][Oracle]ORA-06413: Connexion non ouverte
        ' Connexion non ouverte = french for "connection is closed".

    Set cmd.ActiveConnection = conn

    cmd.CommandText = texte.ReadAll

    DoEvents

    Set texte = Nothing
    Set fic = Nothing
    Set fs = Nothing

    Set rcs = cmd.Execute

    DoEvents

    rcs.MoveFirst

    Do
        Me.cbo_Imprimantes.AddItem (rcs.Fields("IMPRIMANTE").Value)
        rcs.MoveNext
        DoEvents
    Loop Until rcs.EOF

    '   Close connections / free objects
    Set rcs = Nothing
    Set cmd = Nothing
    If conn.State = 1 Then
        conn.Close
    End If
    Set conn = Nothing

    '   icon back to normal
    Screen.MousePointer = vbDefault

    Exit Sub

error_handler:

    '   retour normal
    Screen.MousePointer = vbDefault

    If Err.Number <> 0 Then
        MsgBox Err.Number & " " & Err.Description, vbCritical + vbOKOnly, "Erreur !!!"
        MsgBox Err.Source
    End If

    On Error Resume Next
    '   Fermeture des objets
    Set rcs = Nothing
    Set cmd = Nothing
    Set conn = Nothing
    Set texte = Nothing
    Set fic = Nothing
    Set fs = Nothing

End Sub 
```

它在“conn.Open”语句上崩溃。两种情况下的连接字符串都是相同的（我已将其显示在消息框中以确保“retstring”有效）。

谢谢你的时间。

# iphone - 如何从应用程序委托、情节提要、iOS6 中获取我的视图控制器的实例

> ID：14056585
> 
> 赞同：0
> 
> 时间：2012-12-27T14:53:07.273
> 
> 标签：iphone, ios, pointers, uiviewcontroller, appdelegate

试图从应用程序委托中“实例化”我的初始视图控制器。我试图从应用程序委托中填充 NSMutableArray。视图控制器“myMutabelArray”的属性获取在应用程序委托中创建的数组。使用下面的代码，数组不受影响，即使它的计数是 4（有四个对象），正如在应用程序委托中创建的那样。

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];
ViewController *controller = (ViewController*)[mainStoryboard instantiateInitialViewController];
controller.myMutableArray = mutableArrayCreatedInAppDelegate; 
```

当我从 AppDelegate 中记录计数时，我得到`4`. 当我从 ViewController 中记录计数时，我得到`0`.

我还尝试了以下操作，这让我怀疑我没有根据需要获得指向视图控制器的指针。

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];
ViewController *controller = (ViewController*)[mainStoryboard instantiateInitialViewController];
[controller.view setBackgroundColor:[UIColor lightGrayColor]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:57:40.523

尝试以下操作：

```
ViewController *controller = (ViewController*)self.window.rootViewController; 
```

它将返回主故事板的初始视图控制器。

# macos - 如何在不打开终端的情况下启动可执行文件？

> ID：14056595
> 
> 赞同：1
> 
> 时间：2012-12-27T14:54:01.053
> 
> 标签：macos, applescript

我编写了一个简单的命令行可执行文件，并试图在我打开其封闭文件夹时启动它。我正在使用打开 AppleScript 的文件夹操作。到目前为止，AppleScript 是：

```
 tell application "Finder"
        open document file "Feed the Beast Launcher" of folder "Feed The Beast" of folder "Desktop" of folder "Matthew" of folder "Users" of startup disk
    end tell 
```

可执行文件是：

```
 export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home
    java -jar ~/Desktop/Feed\ The\ Beast/FTB_Launcher.jar 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:11:29.503

使用 Jar Bundler.app 创建你的 jar 文件的独立应用程序并使用类似的东西

```
tell application "FTB_Launcher.app" to activate 
```

启动应用程序。

# c# - 在 Visual Studio 中如何为调试和发布版本添加特殊情况？

> ID：14056596
> 
> 赞同：6
> 
> 时间：2012-12-27T14:54:07.243
> 
> 标签：c#, visual-studio-2010, debugging

> **可能重复：**
> [用于调试与发布的 C# if/then 指令](https://stackoverflow.com/questions/2104099/c-sharp-if-then-directives-for-debug-vs-release)

我正在处理一个 C# 项目，并且我想知道如何在调试模式下在调试器中运行程序时添加特殊情况，我可以访问某些资源，而这些资源在发布版本中通常是没有的。

这是不断发生的事情，我在程序中内置了管理工具，仅用于调试，例如一个按钮，表示测试并将我想要的任何代码放入其中。不断发生的事情我忘记隐藏那个按钮，我把它释放给客户。我希望只有当它在调试模式下运行时才有那个测试按钮，而不是任何其他时间。

这会打开我的管理工具

```
rpg_Admin.Visible = true; 
```

这会关闭我的管理工具

```
rpg_Admin.Visible = false; 
```

有没有一种简单的方法可以做到这一点？

```
if Debug Mode
    rpg_Admin.Visible = true 
```

或者也许当它在视觉工作室中运行时

```
rpg_Admin.Visible = true 
```

但是当它自己运行时

```
rpg_Admin.Visible = false 
```

我在 Visual Studio 2010 上运行

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T15:06:06.363

使用您的示例，添加一些 #if / #else / #endif 指令，如下所示：

```
#if DEBUG
    rpg_Admin.Visible = true;
#else
    rpg_Admin.Visible = false;
#endif 
```

您还可以将`System.Diagnostics.ConditionalAttribute`属性应用于仅在调试版本中使用的任何代码。这将从发布版本中完全删除任何不必要的代码。例子：

```
[Conditional("DEBUG")]
public static void MyDebugOnlyMethod()
    {
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:58:03.147

将调试代码包装在#ifdef DEBUG/#endif 中：

```
#ifdef DEBUG

// debug only code here

#endif 
```

# perl - PERL - 从目录/子目录/..提取文件时出现问题？

> ID：14056597
> 
> 赞同：0
> 
> 时间：2012-12-27T14:54:12.480
> 
> 标签：perl, file, recursion, directory, extract

*快速说明：我已经被这个问题困扰了好几天，我不一定希望找到答案，但任何可能“启发”我的帮助。我还想提一下，我是 Perl 的初学者，所以我的知识不是很广，在这种情况下递归不是我的强项。开始：*

我希望我的 Perl 脚本执行以下操作：

*   将目录作为参数
*   进入传递的目录及其子目录以查找 *.xml 文件
*   将找到的 *.xml 文件的完整路径存储到一个数组中。

以下是我到目前为止的代码，但我还没有设法使它工作：

```
#! /usr/bin/perl -W

my $path;
process_files ($path);

sub process_files
{
    opendir (DIR, $path) or die "Unable to open $path: $!";

    my @files =
        # Third: Prepend the full path
        map { $path . '/' . $_ }
        # Second: take out '.' and '..'
        grep { !/^\.{1,2}$/ }
        # First: get all files
        readdir (DIR);

    closedir (DIR);

    for (@files)
    {
          if (-d $_)
          {            
            push @files, process_files ($_);
          }
          else
          {
             #analyse document
          }
    }
    return @files;
} 
```

有人有任何线索可以为我指明正确的方向吗？或者更简单的方法？

谢谢你，sSmacKk :D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:00:11.353

听起来你应该使用`File::Find`. 它的`find`子程序将递归地遍历一个目录。

```
use strict;
use warnings;
use File::Find;

my @files;
my $path = shift;
find(
    sub { (-f && /\.xml$/i) or return; 
           push @files, $File::Find::name; 
    }, $path); 
```

该子例程将在它找到的文件上执行它包含的任何代码。这只是将 XML 文件名（带有完整路径）推送到`@files`数组中。[在该模块的文档中`File::Find`](http://search.cpan.org/perldoc?File%3a%3aFind)阅读更多信息，该模块是 perl 5 中的核心模块。

# php - 将 strtotime 和 mktime 输出合并到 Month 中

> ID：14056607
> 
> 赞同：0
> 
> 时间：2012-12-27T14:55:00.527
> 
> 标签：php, date, strtotime

我创建了一个脚本，它根据用户输入创建一个时间段。对于此示例，我们将使用每周时间范围。用户访问我的网站并希望每周接收一次潜在客户，从他们输入的设定日期开始，每 7 天将潜在客户发送给用户。我需要输出的是当月发送了多少潜在客户，而不是从脚本生成的星期几。基本上结合每周的日子，然后区分哪一天是一月，二月等。

```
<input type='hidden' name='start_date' value='12/27/2012'>

 $date1 = $_POST['start_date'];
 $date2 = date('M j, Y', strtotime($date1 . ' + 7 Day')); // echo Jan 3, 2013 sent 5 leads
 $date3 = date('M j, Y', strtotime($date2 . ' + 7 Day')); // echo Jan 10, 2013 sent 3 leads
 $date4 = date('M j, Y', strtotime($date3 . ' + 7 Day')); // echo Jan 17, 2013 sent 7 leads
 $date5 = date('M j, Y', strtotime($date4 . ' + 7 Day')); // echo Jan 24, 2013 sent 9 leads
 $date6 = date('M j, Y', strtotime($date5 . ' + 7 Day')); // echo Jan 31, 2013 sent 8 leads
 $date7 = date('M j, Y', strtotime($date6 . ' + 7 Day')); // echo Feb 7, 2013 sent 1 leads
 $date8 = date('M j, Y', strtotime($date7 . ' + 7 Day')); // echo Feb 14, 2013 sent 8 leads
 $date9 = date('M j, Y', strtotime($date8 . ' + 7 Day'));
 $date10 = date('M j, Y', strtotime($date9 . ' + 7 Day'));
 $date11 = date('M j, Y', strtotime($date10 . ' + 7 Day'));
 $date12 = date('M j, Y', strtotime($date11 . ' + 7 Day'));
 $date13 = date('M j, Y', strtotime($date12 . ' + 7 Day'));
 $date14 = date('M j, Y', strtotime($date13 . ' + 7 Day'));
 $date15 = date('M j, Y', strtotime($date14 . ' + 7 Day'));
 $date16 = date('M j, Y', strtotime($date15 . ' + 7 Day')); 
```

我想输出 1 月 32 日的线索和 2 月 9 日的线索。我不能简单地添加变量，因为它基于不同的开始日期。请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:17:21.193

如果我是你，我会使用 DatePeriod 因为它完全是你想要的：

```
$start = DateTime::createFromFormat('M j, Y',$_POST['start_date']);
$interval = new DateInterval('P1D');
$period = new DatePeriod($start,$interval,16);//as you want 16 iteration
foreach($period as $iteration=>$date){
   //use $iteration to know which one you are processing 
   echo $date->format('M j, Y');
} 
```

# c++ - 有没有办法推断对象的类型？

> ID：14056609
> 
> 赞同：0
> 
> 时间：2012-12-27T14:55:08.587
> 
> 标签：c++, dispatch

这可能是一个愚蠢的问题，我怀疑我知道答案（不），因为我似乎在这里碰壁了。

鉴于我有一组从某个类派生的对象：

```
class BaseClass;
class DerivedA: public BaseClass;
class DerivedB: public BaseClass;
class DerivedC: public BaseClass;
std::vector<BaseClass> myCollection; 
```

我想根据特定类的类型调用方法：

```
class Processor {
  void doSomething(DerivedA a, DerivedB b);
  void doSomething(DerivedA a, DerivedC c);
} 
```

问题是，如果我访问集合中的各个项目并尝试调用“处理器”中的“doSomething”方法，它将无法决定使用哪种方法（afaik）。所以我的问题是：有没有办法用正确的派生类型来获取集合中的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:37:12.310

如果您要保持`doSomething`方法不变，这就是所谓的[多重分派](http://en.wikipedia.org/wiki/Multiple_dispatch)，目前 C++ 不支持。

如果它是一个虚成员函数，`BaseClass`那么是的，它将是在它被调用的对象上运行磨机 C++ 多态性，但它仍然不会自动推断争论的类型。

为了解决这个问题，您可以执行之前链接中建议的操作

```
void collideWith(Thing& other) {
     // dynamic_cast to a pointer type returns NULL if the cast fails
     // (dynamic_cast to a reference type would throw an exception on failure)
     if (Asteroid* asteroid = dynamic_cast<Asteroid*>(&other)) {
         // handle Asteroid-Asteroid collision
     } else if (Spaceship* spaceship = dynamic_cast<Spaceship*>(&other)) {
         // handle Asteroid-Spaceship collision
     } else {
         // default collision handling here
     }
 } 
```

基本上保持转换为各种可能的派生类，直到一个工作并适当地调用其中一种方法（无需特别努力，因为编译器知道您要转换为哪种类型）。

重要提示：正如@WhozCraig 指出的那样，您的向量需要保存指针以避免[对象切片](https://stackoverflow.com/a/13907543/1520364)并使整个问题变得毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:34:39.723

好的，是的，您应该如上所述使用多态性。如果您的函数需要处理 2 个对象，尽管它变得非常复杂。

如果派生形成一个有限的集合并且彼此了解，则可以使用双重调度。它并不完美，但它解决了这种特殊情况。

```
class DerivedA;
class DerivedB;
class DerivedC;

class BaseClass
{
 public:
     virtual ~BaseClass();

     virtual void doSomethingWithBase( BaseClass & b2 ) = 0;
     virtual void doSomethingWithDerivedA( DerivedA & da ) = 0;
     virtual void doSomethingWithDerivedB( DerivedB & db ) = 0;
     virtual void doSomethingWithDerivedC( DerivedC & dc ) = 0;
};

class DerivedA : public BaseClass
{
   public:

      void doSomethingWithBase( BaseClass & b2 )
      {
           b2.doSomethingWithDerivedA( *this );
      }

      void doSomethingWithDerivedA( DerivedA & da )
      {
           // implement for two DerivedA objects
      }

      void doSomethingWithDerivedB( DerivedB & db )
      {
           // implement for an A and B
      }

      void doSomethingWithDerivedC( DerivedC & dc )
      {
          // implement for an A and C
      }
 };

 // implement DerivedB to call doSomethingWithDerivedB on its parameter
 // implement DerivedC to call doSomethingWithDerivedC on its parameter. 
```

你明白了。从你打电话的地方你不需要知道你有哪两种类型，你也不需要实际查找。但是，如果您添加了更多的实现，您将需要编辑大量代码，并且可能会考虑使用某种查找表。

如果你需要一个类来定义自己，你可以使用某种虚拟 id。

```
 class BaseClass
  {
      public:
         virtual int id() const = 0;
  }; 
```

然后让类显示它们的 id 并根据这些 id 在表中找到处理这两个对象的处理程序。id 不必是整数，它们可以是字符串，这样更容易避免命名冲突，这比不知道其派生类或它们彼此认识的基类的双重调度方法具有优势，并且是可扩展的。您也不必处理每一对。

# java - 无法在 JPanel 上绘制椭圆

> ID：14056610
> 
> 赞同：2
> 
> 时间：2012-12-27T14:55:11.603
> 
> 标签：java, swing, jpanel, java-2d, paintcomponent

我有一个使用 Netbeans 的 GUI 构建器创建的 JFrame，它只包含一个 JPanel。我创建了一个方法`getPanel`来获取对此 JPanel 的引用：

```
public class ShowDrawings extends JFrame {

    public ShowDrawings() {
        initComponents();
    }

    public JPanel getPanel(){
        return panel;
    }

    private JPanel panel;
} 
```

在我的主要功能中，我正在做：

```
public class Main {
    public static void main(String[] args){
        ShowDrawings sd = new ShowDrawings();
        sd.setSize(800, 600);
        Graphics g = sd.getPanel().getGraphics();
        g.setColor(Color.BLACK);
        g.drawOval(400, 300, 50, 50);
        sd.getPanel().paint(g);
        sd.repaint();
        sd.setVisible(true);
    }
} 
```

但它不画任何东西。请帮我。我看过一些相关的问题，但他们都建议扩展`JPanel`和覆盖它的`paint`方法。但我不想那样做。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T15:28:54.660

> 我看过一些相关的问题，但他们都建议扩展`JPanel`和覆盖它的`paint`方法。但我不想那样做

您不应该覆盖`JPanel` `paint()`方法，而是`paintComponent(..)`. 这是最佳实践，如果您想要不会产生异常的代码，应该这样做。在您当前的方法中（如您所见）也这样做会使创建持久性图纸变得更加困难，因为它们会被抹去`repaint()`

而是扩展`JPanel`和覆盖`paintComponent(Graphics g)`不要忘记`super.paintComponent(g)`在覆盖`paintComponent(..)`方法中作为第一个调用调用。也不要忘记覆盖`getPreferredSize()`，`JPanel`以便我们可以返回正确的尺寸并`pack()`可以被调用`JFrame`（+1 到 @mKorbels 评论）：

这是一些示例代码：

![在此处输入图像描述](../Images/7d96002dd7a8f4dc699163e2df14a581.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel testPanel = new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);

                Graphics2D g2d = (Graphics2D) grphcs;

                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

                g2d.setColor(Color.GREEN);
                //g2d.drawOval(10,10,100,100);//I like fill :P
                g2d.fillOval(10,10,100,100);

            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(150, 150);
            }
        };

        frame.add(testPanel);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:12:00.067

第一次在`repaint()`你的`ShowDrawings sd`框架中，你画过的任何东西 ( `sd.getPanel().getGraphics().drawOval(...)`) 都会被原始`JPanel#paintComponent()`方法擦除。

正如[安德鲁汤普森所写](http://pscode.org/guifaq.html#2.4)：

> 不要使用 Component.getGraphics()。相反，子类化并覆盖paint() (AWT) 或paintComponent() (Swing) 方法。
> 
> Component.getGraphics() 根本无法工作。Java 使用回调机制来绘制图形。您不应该使用 getGraphics() 将图形信息“推送”到组件中。相反，您应该等到 Java 调用您的**paint()/paintComponent()**方法。那时您应该向组件提供您想要做的图纸。

如果您只是检查/调试某些内容，您甚至可以执行以下操作：

```
class Test {
    private JPanel panel = new JPanel() {
        public void paintComponent(Graphics g) {
             g.setColor(Color.BLACK);
             g.drawOval(400, 300, 50, 50);
        }
    };
} 
```

# c - 在 tcp 服务器中处理客户端缓冲区

> ID：14056618
> 
> 赞同：4
> 
> 时间：2012-12-27T14:55:45.647
> 
> 标签：c, tcp, buffer

因为我阅读了很多关于套接字编程的文本和代码，所以我决定这样做：

TCP 服务器：

*   套接字复用
*   异步 I/O

我希望能够同时处理 800-1200 个客户端连接。我如何处理客户端缓冲区？我阅读的每个示例都只使用一个单独的缓冲区。为什么人们不使用类似的东西：

```
typedef struct my_socket_tag {
    socket sock;
    char* buffer;
} client_data; 
```

现在我能够将缓冲区从接收器线程提供给调度请求线程，并且在处理第一个客户端特定缓冲区时，接收可以在另一个套接字上继续。

这是常见的做法吗？我错过了重点吗？

请给一些提示，下次如何改进我的问题，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:18:13.760

示例通常过于简单化。可扩展性是一个严重的问题，我建议最好从更简单的应用程序开始；处理一千个客户端连接是可能的，但在大多数应用程序中，它需要非常仔细的开发。套接字编程可能会变得棘手。

有不同种类的服务器应用程序；没有一种方法可以完美地适应所有任务。有很多细节需要考虑（*它是面向流还是面向数据报的服务？连接（如果有的话）是否持久？它是否涉及大量小数据传输、少量大传输或大量大传输？等等等等等等*）。这就是为什么您不太可能在书中看到任何常见示例的原因。

如果选择线程方式，注意不要创建太多线程；每个客户端一个线程通常（但不总是）是一个糟糕的选择。在某些情况下，您甚至可以在单个线程中处理所有事情（使用异步 IO），而不会牺牲任何性能。

话虽如此，我还是推荐学习 C++ 和 boost asio（或类似的框架）。它解决了许多与可伸缩性相关的问题，因此重新发明轮子没有意义。

您可以学习《开源应用程序架构》一书（[免费提供](http://www.aosabook.org)）。有很多相关示例可能对您有用。

# php - 使用 MCrypt 和 TripleDES 解密字符串

> ID：14056621
> 
> 赞同：1
> 
> 时间：2012-12-27T14:56:01.387
> 
> 标签：php, encryption, mcrypt

我制作了这段代码来加密数据库中的数据（在测试期间它被存储为纯文本）：

```
try {
$link = new PDO("mysql:host=localhost;dbname=MAIN", 'USER', 'PASSWORD');
$stmt = $link->prepare("SELECT * FROM workers WHERE crypt = '0'");
$stmt->execute();
$prepared = $stmt->fetchAll(PDO::FETCH_ASSOC);

$sentinel = mcrypt_module_open(MCRYPT_3DES,'',MCRYPT_MODE_CBC,'');
$key_c = substr(sha1(microtime()),0,24);
$iv = substr(sha1(microtime()),24,8);
mcrypt_generic_init($sentinel, $key_c, $iv);
for($key=0; $key<count($prepared); $key++)
{

    $sort = mcrypt_generic($sentinel, $prepared[$key]['sort']);
    $account = mcrypt_generic($sentinel, $prepared[$key]['account']);
    $bank_name = mcrypt_generic($sentinel, $prepared[$key]['bank_name']);
    $bank_holder = mcrypt_generic($sentinel, $prepared[$key]['bank_holder']);
    $address = mcrypt_generic($sentinel, $prepared[$key]['address']);
    $post_code = mcrypt_generic($sentinel, $prepared[$key]['post_code']);

    $mobile = mcrypt_generic($sentinel, $prepared[$key]['mobile']);
    $phone = mcrypt_generic($sentinel, $prepared[$key]['phone']);

    $kin_name = mcrypt_generic($sentinel, $prepared[$key]['kin_name']);
    $kin_rel = mcrypt_generic($sentinel, $prepared[$key]['kin_relation']);
    $kin_phone = mcrypt_generic($sentinel, $prepared[$key]['kin_phone']);

$stmt = null;
$stmt = $link->prepare("UPDATE workers SET sort = :sort, account = :acc, bank_name = :bank_name, bank_holder = :bank_holder, address = :address, post_code = :post_code, crypt = '1', mobile = :mobile, phone = :phone, kin_name = :kin_name, kin_relation = :kin_rel, kin_phone = :kin_phone WHERE reference = :id");

$stmt->bindParam('sort', base64_encode($sort));
$stmt->bindParam('acc',base64_encode($account));
$stmt->bindParam('bank_name', base64_encode($bank_name));
$stmt->bindParam('bank_holder', base64_encode($bank_holder));
$stmt->bindParam('address', base64_encode($address));
$stmt->bindParam('post_code', base64_encode($post_code));
$stmt->bindParam('mobile', base64_encode($mobile));
$stmt->bindParam('phone', base64_encode($phone));
$stmt->bindParam('kin_name', base64_encode($kin_name));
$stmt->bindParam('kin_rel', base64_encode($kin_rel));
$stmt->bindParam('kin_phone', base64_encode($kin_phone));
$stmt->bindParam('id',$prepared[$key]['reference']);

$stmt->execute();

$stmt=null;

$stmt= $link->prepare('INSERT INTO crypt VALUES (\'\', :id, :key, :iv);');
$stmt->bindParam('id', $prepared[$key]['reference']);
$stmt->bindParam('key', base64_encode($key_c));
$stmt->bindParam('iv',base64_encode($iv));

$stmt->execute();
}
} catch (PDOException $e) {

var_dump($e);
} 
```

数据库中的一切看起来都很好。直到我尝试解密数据...：

```
$lnk=new PDO("mysql:host=localhost;dbname=MAIN", 'USER', 'PASSWORD');
$stmt=$lnk->prepare("SELECT * FROM crypt WHERE reference = :ref");
$stmt->bindValue('ref', $result['reference']);
$stmt->execute();
$crypt = $stmt->fetch(PDO::FETCH_ASSOC);
        $key_c = base64_decode($crypt['key']);
        $iv = base64_decode($crypt['iv']);

print mcrypt_decrypt ( MCRYPT_3DES , $key_c , base64_decode($result['address']) , MCRYPT_MODE_CBC , $iv)."<br />"; 
```

所有数据都已到位，base64 编码的密钥和向量一切都很完美，但地址的解密显示如下输出：

> 8×Áê kâäase 大道

这个问题与所有数据有关......

谁能解释为什么会这样？

> PHP 版本 5.3.15 MCrypt 版本 2.5.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:08:50.630

编码 IV 时出现问题。如果 IV 值不正确，则（仅）解密输出的前 8 个字节将不正确，可能是`8×Áê kâä`. `se Avenue`很可能是正确的。

# extjs - 使用 ExtJs 向服务器发送数据

> ID：14056623
> 
> 赞同：1
> 
> 时间：2012-12-27T14:56:06.787
> 
> 标签：extjs

是写语法吗？在参数部分我想添加这个字段以发送到服务器但不工作

```
 Ext.Ajax.request({

                url:'http://localhost:8084/org.servlet/url_servlet',
                method:'GET',

 params:{

        myname:document.getElementById('firstname').value//this is the field i want to send to the servlet

    } ,  
              success: function (response){
            Ext.Msg.alert('Succesfully added ');

     },
          failure: function (){
           Ext.Msg.alert('Error in server');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:04:31.567

你可以用ajax来做

示例代码

```
Ext.Ajax.request({
    url: 'page.php',
    params: {
        id: 1
    },
    success: function(response){
        var text = response.responseText;
        // process server response here
    }
}); 
```

# mysql - Mysql LOAD DATA INFILE 性能，Windows 与 Unix

> ID：14056628
> 
> 赞同：1
> 
> 时间：2012-12-27T14:56:40.257
> 
> 标签：mysql, performance, load-data-infile, multiplatform

我创建了`LOAD DATA`将数百万条记录插入不同表的多项操作的基准。

当我发现在 Windows 上我的基准测试在 1.15 小时后完成时，我感到很惊讶，而在 Unix 上它在 1.45 小时后完成。

然后我为读取操作创建了不同的基准，其中涉及使用单一时间索引的全表扫描（我的测量具有非唯一的时间值）。

对于第二个基准测试，我在 Unix 与 Windows 上的结果要好 5 倍。

这可能是什么原因？（我只有 MyISAM 表）

# jquery - 选择第一个父母

> ID：14056630
> 
> 赞同：1
> 
> 时间：2012-12-27T14:56:56.067
> 
> 标签：jquery

js

```
$(".deletable").live('click',function(){
      $(this).parent().effect('explode', 500, function(){
            $(this).parent().remove();
      })
}); 
```

html

```
<table>
    <tr>
        <td class='deletable'>hi</td>
    </tr>
</table>

<ul>
    <li>
        <span class=deletable>hi</span>
    </li>
</ul> 
```

我想删除`tr`案例`td`被点击和`li`案例`span`被点击。

由于某种原因，这不起作用，而是整个`ul`/`table`被删除。

为什么这样 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:05:31.490

> 由于某种原因，这不起作用，而是删除了整个 ul/table。
> 
> 为什么这样 ？

在您当前的代码`this`中，click 事件指的是 clicked 元素。
然后你遍历元素的父元素来调用`effect`它`$(this).parent().effect...`。

在效果调用`this`中现在引用父级 ( `li/tr`)，但您调用`$(this).parent().remove();`遍历父级 ( `ul/table`) 的父级，因此删除了整个`list/table`.

将代码更改为仅`$(this).remove();`在效果调用中使用，因为它已经引用了所需的父元素 ( `li/tr`)，如下所示：

```
$(".deletable").live('click',function(){
      $(this).parent().effect('explode', 500, function(){
            $(this).remove();
      })
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:01:45.913

尝试

```
$(".deletable").live('click',function(){
    $(this).parent().effect('explode', 500, function(){
        // $(this) is still your parent
        $(this).remove();
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:58:28.533

您也可以将选择器用于 .parent。[http://api.jquery.com/parent/](http://api.jquery.com/parent/)

```
$(this).parent("tr").remove(); 
```

如果您正在查看调试工具并且 table/ul 只有 1 个子元素，您如何理解整个 table/ul 被删除，浏览器也可以删除 table/ul，因为没有子元素它们毫无意义。

当 table/ul 有多个孩子时，你可以试试这个吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:59:48.473

用这个

```
$(this).parents("li:first").remove(); 
```

# delphi - TDelphiTwain 组件，损坏了 delphi 表单（dfm 文件）

> ID：14056631
> 
> 赞同：3
> 
> 时间：2012-12-27T14:57:04.790
> 
> 标签：delphi, delphi-7, twain

我已经下载了开源的 delphi twain 组件（TDelphiTwain）。有趣的是，当放置并保存在表单上时，它会为自己创建错误的 dfm 条目。

```
 object DelphiTwain: TDelphiTwain
    OnSourceDisable = DelphiTwainSourceDisable
    OnSourceSetupFileXfer = DelphiTwainSourceSetupFileXfer
    TransferMode = ttmMemory
    SourceCount = 0
    Info.MajorVersion = 1
    Info.MinorVersion = 0
    Info.Language = tlDanish
    Info.CountryCode = 1
    Info.Groups = [tgControl, tgImage, tgAudio, MinorVersion]
    Info.VersionInfo = 'Application name'
    Info.Manufacturer = 'Application manufacturer'
    Info.ProductFamily = 'App product family'
    Info.ProductName = 'App product name'
    LibraryLoaded = False
    SourceManagerLoaded = False
    Left = 520
    Top = 136
  end 
```

问题出在这条线上：

```
 Info.Groups = [tgControl, tgImage, tgAudio, MinorVersion] 
```

只有三个可能的元素：

```
tgControl, tgImage and tgAudio 
```

每次我保存表单时，它都会添加 MinorVersion。运行应用程序时，我收到错误信息，即 Info.Groups 的属性无效。当我手动修复坏部分并且不离开 dfm 文件时，应用程序启动正常。

我在网上查了一下，有一个关于这些奇怪问题的询问，不幸的是它还没有解决。

我认为存在某种内存损坏。在互联网的帖子中，出现了奇怪的迹象......

有没有人使用过该组件或者可以给我一些提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:29:00.827

该错误似乎在 TTwainIdentity.GetGroups 中，结果未初始化。您可以尝试通过替换来更改代码

```
Include(Result, tgControl); 
```

和

```
Result := [tgControl]; 
```

您必须重新编译包以使此更改在 IDE 中起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:33:59.287

我不知道该组件，但我认为问题在于 TTwainIdentity.GetGroups 方法。它是这样开始的：

```
begin
  Include(Result, tgControl); 
```

这意味着它假设 Result 被初始化为一个空集。但是，Result 可能包含垃圾，不一定是空集。将此方法更改为如下所示：

```
function TTwainIdentity.GetGroups(): TTwainGroups;
  {Convert from Structure.SupportedGroups to TTwainGroups}
begin
  Result := [tgControl];
  if DG_IMAGE AND Structure.SupportedGroups <> 0 then
    Include(Result, tgImage);
  if DG_AUDIO AND Structure.SupportedGroups <> 0 then
    Include(Result, tgAudio);
end; 
```

某些结果类型不会引发关于未初始化的编译器警告，但这并不意味着它们为空。例如，对于字符串也是如此。另见：http: [//qc.embarcadero.com/wc/qcmain.aspx ?d=894](http://qc.embarcadero.com/wc/qcmain.aspx?d=894)

但是，发生这种情况仍然很奇怪。显然，Delphi 试图在集合中查找给定项的名称，但意外地找到了另一个属性的名称。在我看来，如果发生这种情况，在编写 dfm 时会缺少一些检查。:)

# hibernate - 如何使用标准 api 生成计数查询

> ID：14056634
> 
> 赞同：2
> 
> 时间：2012-12-27T14:57:07.357
> 
> 标签：hibernate, hibernate-criteria

我想计算使用标准 api 构造的查询返回的结果。我不想重写任何这些查询。我试过了

```
(Integer)criteria.setProjection(Projections.rowCount()).uniqueResult(); 
```

这可能有效，但取决于 Hibernate 3.2.4 将生成的连接和限制

> 无效的 sql（DB2：com.ibm.db2.jcc.b.co：DB2 SQL 错误：SQLCODE=-119，SQLSTATE=42803，这意味着“在 HAVING CLAUSE 中的列或表达式无效”）。下面的例子...

如果原来的sql是

```
select * from ... where ... order by ... 
```

然后计数投影基本上只是替换 *`count(*)`给出类似的东西

```
select count(*) as y0_ from ... where ... order by ... 
```

这可能会引发错误。这可以通过包装原始 SQL 并预先添加来轻松纠正`select count(*)`：

```
select count(*) from (select * from ... where ... order by ...); 
```

如何实现这一点，或者您还有什么建议？

* * *

这里是一个无效 sql 的例子：

```
select count(*) as y0_
from UZI.Ereignis this_
left outer join UZI.Zaehlerzustand zaehlerzus1_ on this_.zustandHz_id=zaehlerzus1_.id
left outer join UZI.Mandant mandantali3_ on zaehlerzus1_.mandant_id=mandantali3_.id
left outer join UZI.Zaehlerzustand zaehlerzus2_ on this_.zustandNz_id=zaehlerzus2_.id
left outer join UZI.Mandant mandantali4_ on zaehlerzus2_.mandant_id=mandantali4_.id
where (zaehlerzus1_.zaehlernummer like ? or zaehlerzus2_.zaehlernummer like ?)
and (mandantali3_.id=? or mandantali4_.id=?)
order by this_.id desc 
```

# css - div 采取的奇怪位置

> ID：14056640
> 
> 赞同：6
> 
> 时间：2012-12-27T14:57:32.693
> 
> 标签：css, position

我有一个奇怪的情况，我的中间`div`稍微向下。这是一个屏幕截图： ![在此处输入图像描述](../Images/8d5ad07dcc4f6ab2dc1ebe2f3e281aef.png)

HTML：

```
<div id="footer">
    <div class="content">
        <div id="info1">
            <img src="img/temp.png" alt="About me" />
            <h4>About Me</h4>
            <p>this is about me section</br>and this is the other line</br>and this is a third line</p>
        </div>
        <div id="info2">                                            
            <h4>Random Photos</h4>
            <div id="randomPhotos"></div>
        </div>
        <div id="info3">
            <h3>Follow Me</h3>
            <div>
            <img src="img/temp.png" alt="facebook" /><a href="#">Facebook</a>
            </div>
            <div>
            <img src="img/temp.png" alt="twitter" /><a href="#">Twitter</a>
            </div>
            <div>
            <img src="img/temp.png" alt="email" /><a href="#">E-mail</a>
            </div>            
        </div>
    </div>
</div> 
```

CSS：

```
#info1, #info2, #info3
{    
    padding: 10px;
    display:inline-block;
}

#info1
{
    width:20%;
}

#info1 img
{
    margin-right:3px;
    width:20px;
    height:20px;
    background-image:url('../img/glyphicons-halflings.png');
    background-repeat:no-repeat;
    background-position:-162px 1px;
}

#info1 img, #info1 h4
{
    display:inline-block;
}

#info2
{
    width:55%;
    border-left:1px solid gray;
    border-right : 1px solid gray;
}
#info3
{
    width:15%;
}

#info3 img 
{
    width:20px;
    height:20px;
    margin-right:5px;
}

#info3 img[alt="facebook"]
{
    background : url('../img/result.png') no-repeat 0px -30px;    
}

#info3 img[alt="twitter"]
{
    background : url('../img/result.png') no-repeat 0px -60px;
}

#info3 img[alt="email"]
{
    background : url('../img/result.png') no-repeat 0px 0px;
}

#info2 div 
{
    padding:3px;

}

#randomPhotos 
{
    height : 100px;
} 
```

我真的不擅长 CSS，所以这可能是一个小问题。我就是找不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:11:23.637

大多数浏览器，对于使用的元素`display:inline-block`将自动`vertical-align:baseline`在该元素上使用，除非您使用 CSS 重置（这也可能将事实上的标准定义为`vertical-align:baseline`。）

这就是您所看到的原因，您的每个信息 div 都与基线对齐。由于中央`div`高度较小，因此您会在顶部看到间隙。

要解决这个问题：

```
#info1, #info2, #info3
{    
    padding: 10px;
    display:inline-block;
    vertical-align:top;
} 
```

您可能会遇到的第二个问题是，现在它顶部对齐，底部有一个“间隙”，没有左右边框。要么让边界由全高 div 管理，要么让所有 div 高度相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:00:31.097

我建议您添加`float: left`到每个 div 中。这解决了你的问题。

[例子](http://jsfiddle.net/LGSgx/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:06:51.433

你也可以尝试

```
position:absolute; 
```

容器内的 div 然后指定

```
top:0px;
left: (left div with)px; 
```

我一直在与absolute合作，希望它有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T15:11:21.660

```
#info2
{
  vertical-align: top
} 
```

应该做的伎俩。

# php - 在 Codeigniter 中重定向页面时出错

> ID：14056642
> 
> 赞同：0
> 
> 时间：2012-12-27T14:57:37.293
> 
> 标签：php, codeigniter

我想就重定向页面寻求一些帮助。我想要的是在添加数据后我希望我的页面直接到显示所有产品的某个页面。我期待的链接是

'http://localhost/CrudApp/index.php/GetProductController' ，但我得到的是：

'http://localhost/CrudApp/index.php/index.php/index.php/GetProductController' 导致找不到 404 页面.. 请帮忙。提前致谢..

这是我的代码：

添加产品.php

```
 <form method="POST" action="SaveProductController"></br></br></br>
        <table border='1' align='center'>
            <tr>
                <td>ID: </td><td><input type="text" name="id" 
                                        value="<?php echo $GetProductId->id + 1; ?>" readonly="readonly"></td>
            </tr>
            <tr>
                <td>Description: </td><td><input type="text" name="description"></td>
            </tr>
            <tr>
                <td>Price: </td><td><input type="text" name="price"></td>
            </tr>
            <tr>
                <td>Size: </td><td><input type="text" name="size"><td>
            </tr>
            <tr>
                <td>Aisle: </td><td><select name="aisle">
                        <?php
                        foreach ($GetAisle as $row) {
                            printf("<option value='" . $row['id'] . "'>" . $row['description'] . "</option>");
                        }
                        ?>
                    </select></td>
            </tr>
            <tr>
                <td></td><td><input type="submit" name="addProduct" value="Add Product"><td>
            </tr>
        </table>
    </form> 
```

和我的控制器：SaveProductController.php

```
function index() {
    $this->load->model('ProductDao');
    $id = $this->input->post('id');
    $description = $this->input->post('description');
    $price = $this->input->post('price');
    $size = $this->input->post('size');
    $aisle = $this->input->post('aisle');
    //$this->ProductDao->saveProduct($id, $description, $price, $size, $aisle);
    redirect('/GetProductController');
} 
```

我还配置了我的 config.php，我的 baseurl 是 'index.php'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:22:43.400

在 CI 进行路由的正确方法是编写：

类/方法所以在你的情况下你必须写

```
redirect('GetProductController/index'); 
```

其他选项是在 1 个控制器上设置不同的功能并将它们访问为：（当我们谈论相同的“产品”时）

```
Product/set
Product/get 
```

没有逻辑点来为同一个项目的每个不同的 ACTION 制作控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:53:19.260

斯维特里奥是对的。此外，如果您在谈论产品，您应该创建一个产品控制器，并在此控制器中设置您的所有功能：添加、编辑、awesomefunction，等等......

所以你可以这样做：

```
redirect(site_url('products/where_you_want_go_function')); 
```

或者

```
redirect('products/where_you_want_go_function'); 
```

# jquery - 谷歌地图不能使用覆盖的 div

> ID：14056646
> 
> 赞同：1
> 
> 时间：2012-12-27T14:58:06.140
> 
> 标签：jquery, google-maps-api-3

我正在开发一个 google maps javascript v3 应用程序，其中 UI 必须覆盖在地图上（也就是说，使用全屏 div 和 z-index 本身没有问题），我遇到了一个问题：

```
<div id="mapCanvas" style="z-index: -1"></div>
<div id="uiContainer" style="pointer-events: none; z-index: 0; width: 100%; height: 100%...">
    <My UI Here/>
</div> 
```

即使地图本身可以正常工作，并且 uiContainer 覆盖也适用于我的 AJAX UI 和指针事件：没有工作（单击 uiContainer 或其任何子项的处理程序将无法工作，除非这些子项用指针事件覆盖它: all) 我无法与 uiContainer 下面的地图进行交互。

任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:19:53.823

我终于明白了。

Maps API 不喜欢它的容器以任何方式改变它的 z-index。

# java - values() 方法的类型

> ID：14056649
> 
> 赞同：-5
> 
> 时间：2012-12-27T14:58:15.430
> 
> 标签：java

我在任何地方都找不到 HashMap 中的 values() 方法返回的类型。实际上，由于我想在与具有要遍历的哈希图的类不同的类中使用它，因此我想在正确的类中对该方法执行访问器，如下所示：

```
 public xxxxxx values(){
return this.values();
} 
```

我应该放什么而不是 "xxxxxx" ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:58:54.813

它返回**`java.util.Collection<v>`**

`v`您的地图中的价值类型在哪里

检查[**API**](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#values%28%29)：

```
Collection<V> values() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:59:44.993

它返回`Collection<V>`

您可以在[Javadoc中看到它](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#values%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:00:42.623

如果您的地图被参数化为`HashMap<K,V>`then`values()`将返回 type 的集合`V`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:08:57.017

它将返回类型为 java.util.List 并且 keyset 将返回 Set

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T15:00:39.270

根据 API：

**values()** - 返回此地图中包含的值的集合视图。它返回**java.util.Collection类型**

# php - php 解析 print_r 输出

> ID：14056650
> 
> 赞同：1
> 
> 时间：2012-12-27T14:58:19.423
> 
> 标签：php

当我使用 打印对象时`print_r`，php 中是否有任何特定的实用程序函数可以将输出转换为对象？

似乎有足够的输出来重建对象，但我找不到完成此任务的确切函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:01:44.200

没有将`print_r`值更改回对象的自动方法。您还缺少重要信息，例如键（字符串或数字或..）中存储的类型

您可以使用`var_dump`来获取更详细的输出，这些输出可以更改回对象。但这并不意味着它有一个自动功能。

最后，您可以使用`var_export`( [http://php.net/manual/en/function.var-export.php](http://php.net/manual/en/function.var-export.php) ) 获取您可以使用的有效 PHP 输出。

您还可以使用[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)来传递对象。

# android - 带有选项卡的 ActionBarSherlock 下拉菜单

> ID：14056659
> 
> 赞同：1
> 
> 时间：2012-12-27T14:58:34.930
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试使用选项卡实现 ActionBarSherlock，但在某些选项卡的操作栏中允许下拉菜单。我已经读过，获得两者的唯一方法是为下拉创建一个自定义 actionProvider。这是我编写的实现代码：

menu_with_dropdown.xml（带有一个单独的溢出菜单，工作正常）

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/motivate_picker"
        android:showAsAction="always"
        android:title="Right Here"
        android:actionProviderClass=".ActionBarSpinner">

    </item>

    <item
        android:id="@+id/menu_item"
        android:showAsAction="always"
        android:icon="@drawable/action_bar_plus_icon">
        <menu>
            <item android:id="@+id/menu_1"
                  android:title="@string/menu_1" />
            <item android:id="@+id/menu_2"
                  android:title="@string/menu_2" />
            <item android:id="@+id/menu_3"
                  android:title="@string/menu_3"/>
            <item android:id="@+id/menu_4"
                  android:title="@string/menu_4"/>
        </menu>
    </item>
</menu> 
```

使用此下拉的选项卡片段在此处对其进行膨胀

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu,inflater);
    menu.clear();
    getSherlockActivity().getSupportActionBar().setDisplayShowTitleEnabled(false);
    getSherlockActivity().getSupportMenuInflater().inflate(R.menu.menu_with_dropdown, menu);

} 
```

ActionBarSpinner.java

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import com.actionbarsherlock.view.ActionProvider;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.view.SubMenu;

public class ActionBarSpinner extends ActionProvider implements
        MenuItem.OnMenuItemClickListener {

    Context context_;

    public ActionBarSpinner(Context context) {
        super(context);
        context_ = context;

    }

    @Override
    public View onCreateActionView() {

        LayoutInflater layoutInflater = LayoutInflater.from(context_);
        View view = layoutInflater.inflate(R.layout.actionbar_menu,null);

        //return view;  //Will have formatted pulldown but not register clicks for submenu    
        return null;  //Will register clicks and expand submenu but not be formatted as desired
    }

    @Override
    public boolean onPerformDefaultAction() {

        return false;
    }

    @Override
    public boolean hasSubMenu() {

        return true;
    }

    @Override
    public void onPrepareSubMenu(SubMenu subMenu) {
        MenuItem item = subMenu.add("Test1");
        item.setOnMenuItemClickListener(this);
        item = subMenu.add("Test3");
        item.setOnMenuItemClickListener(this);

        item = subMenu.add("Test2");
        item.setOnMenuItemClickListener(this);
    }

    @Override
    public boolean onMenuItemClick(MenuItem item) {
        return true;
    }

} 
```

actionbar_menu.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    style="@android:style/Widget.ActionButton"
    android:clickable="true">

    <TextView
        android:id="@+id/motivate_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Friend Picker"
    />
    <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|right"
            android:src="@drawable/switcher_arrow"/>

</LinearLayout> 
```

因此，当我在 ActionBarSpinner 中调用 onCreateActionView() 时，就会出现问题。如果我返回 actionbar_menu.xml 的膨胀视图，它永远不会扩展我创建的子菜单。如果我在 onCreateActionView() 中返回 null，则当我单击它时子菜单会展开，但它没有我制作的自定义布局（它实际上什么都不显示）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:10:19.683

您必须返回 null 才能调用 onPrepareSubMenu()。

然后，onCreateActionView() 中的所有这些设置都需要进入可能 MainActivity 中的 onCreateOptionsMenu() 中。

例如，

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_activity, menu);

    // Get the SearchView and set the searchable configuration
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search)
            .getActionView();
    searchView.setSearchableInfo(searchManager
            .getSearchableInfo(getComponentName()));

    // Override the default language icon to the language is being used
    MenuItem mI = menu.findItem(R.id.menu_locale);
    Locale locale = Locale.getDefault();
    String locLan = locale.getLanguage();

    if (locLan.equals(Locale.CHINESE.getLanguage())) {
        mI.setIcon(R.drawable.insready);
    } else if (locLan.equals(Locale.ENGLISH.getLanguage())) {
        mI.setIcon(R.drawable.ic_action_locale_en);
    } else if (locLan.equals(Locale.FRENCH.getLanguage())) {
        mI.setIcon(R.drawable.ic_action_search);
    }

    return true;
} 
```

# php - php & mysql：使用一个表作为另一个表的过滤器列表

> ID：14056661
> 
> 赞同：5
> 
> 时间：2012-12-27T14:58:47.857
> 
> 标签：php, mysql, filter, comparison

我有两个mysql表。一个是坏词列表，另一个是与坏词列表进行比较的表格。本质上，我想过滤掉并返回一个包含在坏词表中没有出现**任何单词的域的行列表。**几个示例表：

**坏话列表**

```
+----------+------------------+
| id       | words            |
+----------+------------------+
| 1        | porn             |
| 2        | sex              |
+----------+------------------+ 
```

**要比较的域表**

```
+----------+------------------+
| id       | domain           |
+----------+------------------+
| 56       | google.com       |
| 57       | sex.com          |
+----------+------------------+ 
```

**我想返回结果，例如**

```
+----------+------------------+
| id       | domain           |
+----------+------------------+
| 56       | google.com       |
+----------+------------------+ 
```

需要注意的是，这些表没有任何共同点，所以我什至不确定这是最好的方法。我在 PHP*中*使用了一个比较函数，但是在搜索数十万行时这似乎太慢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:07:48.653

像这样的数据通常需要在插入时而不是在获取时预先计算。您应该向 Domains 添加一列，例如“bad_words boolean default null”。

null 表示“不知道”，在某些情况下可以解释为“不安全显示”。false 表示“没有坏话”，而 true 表示“包含坏话”。

每次更新坏词列表时，所有列都会重置为空，并且一些后台工作将再次开始处理它们。可能是sql以外的另一种语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:17:31.260

可以从mysql获取。像这样：

```
SELECT
    d.*
FROM 
    domains d 
LEFT JOIN
    words w ON(d.domain LIKE CONCAT('%',w.word,'%') ) 
GROUP BY
    d.domain
HAVING
    COUNT(w.id) < 1 
```

但它不是最优的，并且会随着两个表中的更多记录而变得越来越慢。

# .net - 当您运行基于 Microsoft .NET Framework 4 的应用程序时出现“错误模块名称：clr.dll”错误消息

> ID：14056667
> 
> 赞同：7
> 
> 时间：2012-12-27T14:59:40.643
> 
> 标签：.net

在我继续使用 Dot net framework 4 之前，我有一个运行良好的应用程序。现在，每当我安装并打开我的应用程序时，它都会崩溃并显示以下错误消息。

```
 Problem signature:
 Problem Event Name:    APPCRASH
 Application Name:  Myapplication.exe
 Application Version:   8.0.18428.531
 Application Timestamp: 50dc3ecf
 Fault Module Name: clr.dll
 Fault Module Version:  4.0.30319.1
 Fault Module Timestamp:    4ba21eeb
 Exception Code:    c00000fd
 Exception Offset:  000000000010791f
 OS Version:    6.1.7601.2.1.0.256.1
 Locale ID: 1033
 Additional Information 1:  4598
 Additional Information 2:  45986a8b8021cca3bd025450731a9c6a
 Additional Information 3:  e90e
 Additional Information 4:  e90e0a2cf591d6675172685f07f0ec36 
```

我做了一些谷歌搜索，发现我们并不是唯一面临这个问题的人。然后我找到了这个链接 [http://support.microsoft.com/kb/2640103](http://support.microsoft.com/kb/2640103) ，它告诉了 Dot net framework 4 的问题，并建议安装一个解决这个问题的修补程序。问题是？我不知道从哪里获得他们正在谈论的修补程序。

有人建议此修复程序链接 [https://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=29638](https://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=29638)

我下载并安装了它，但仍然出现同样的错误。我安装了正确的修补程序吗？请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-17T07:11:39.880

.NET 4.0 CLR.DLL（仅在 XP 下）我也遇到了这个问题。OP的问题中提到的[修补程序确实有所帮助。](http://support.microsoft.com/kb/2640103)获取方法如下：

[http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2640103&kbln=en-us](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2640103&kbln=en-us)

（可以应用于任何修补程序，如此[处](http://blogs.msdn.com/b/mmcintyr/archive/2008/09/02/how-can-you-download-a-hotfix-without-contacting-microsoft.aspx)所述）。

**[更新]**此修补程序已被[http://support.microsoft.com/kb/2889629](http://support.microsoft.com/kb/2889629)（在发布此内容时）取代。

# android - 创建数据库和默认数据

> ID：14056668
> 
> 赞同：1
> 
> 时间：2012-12-27T14:59:41.517
> 
> 标签：android, sqlite, android-sqlite

我想在我的 sqlite 数据库中插入一个默认数据。

这就是我所做的：

```
private static final String DATABASE_CREATE_position = "CREATE TABLE position(latitude VARCHAR(20), longitude VARCHAR(20), address VARCHAR(100))";

@Override
public void onCreate(SQLiteDatabase db) {
    // Create the table
    db.execSQL(DATABASE_CREATE_position);   

    ContentValues defaultPos = new ContentValues();
    defaultPos.put("latitude", "40.604398");
    defaultPos.put("longitude", "-3.709002");
    defaultPos.put("address", "Avenida del parque ");   

    db.insert("position", null, defaultPos);

    db.close();

} 
```

但是数据库是空的，哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:06:42.737

解决方案 ：

```
private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {           
        db.execSQL(DATABASE_CREATE_position);

        db.execSQL("insert into position (latitude,longitude,address) values (40.604398,-3.709002,'Avenida del parque ')");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:24:37.567

去掉 onCreate() 函数中的 db.close() ，它会从我在你周围写的测试代码中很好地插入。否则它会抛出 IllegalStateException 并声明数据库未打开。

# jquery - jquery .hover 不适用于 AJAX 呈现的元素

> ID：14056671
> 
> 赞同：5
> 
> 时间：2012-12-27T14:59:48.310
> 
> 标签：jquery, ajax

我有一些从 AJAX 调用创建的元素。在这些元素中，有一个子元素在悬停时需要显示另一个动态创建的子元素。当我`.hover`在小提琴中运行 jquery 时，它工作正常。当我在我的代码中实现它时，它不想工作。

我想知道它是否取决于`.hover`加载脚本的时间与从 AJAX 加载元素的时间。一个需要先于另一个吗？是否应该在脚本运行`.promise`之前等待 AJAX 元素加载？`.hover`

这是我的例子的一个[小提琴](http://jsfiddle.net/7dcuh/14/)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T15:06:53.867

对于动态生成的元素，事件应该从元素或文档对象的静态父对象之一委托，您可以使用`on`或`delegate`方法。

```
$(document).on({
    mouseenter: function() {
        $(this).next('.show').fadeIn(800);
    },
    mouseleave: function() {
        $(this).next('.show').delay(800).fadeOut(800);
    }
}, '.touch'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T15:07:12.003

我理解您的问题意味着您将事件附加到可能尚不存在的元素。`.hover()`您应该将其委托给永久容器元素，而不是绑定到元素（这是简写）。您可以使用其中一个`delegate()`或`.on()`取决于 jQuery 版本来执行此操作。

这是你的小提琴中的样子：http: [//jsfiddle.net/7dcuh/15/](http://jsfiddle.net/7dcuh/15/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T15:14:20.053

您应该尝试在 ajax 响应中插入脚本。像

```
 <script> </script> 
```

或者您在 ajax 调用完成或成功时提供脚本

```
jQuery.ajax({

success:function(){jQuery('selector').yourfunction();},

        }); 
```

如果你不这样做，脚本将运行并且在 dom 中找不到选择器并且脚本不会再次运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T15:08:11.180

使用 .on() 函数检查延迟事件。您可以进行如下活动：

```
$('#parent').on('hover', '.touch', function() {
    $(this).next('.show').fadeIn(800);
},
function(){
    $(this).next('.show').delay(800).fadeOut(800);
}); 
```

或者，纯 CSS 解决方案是：

```
.touch + .show {
    display:none;
}
.touch:hover + .show {
    display:block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T15:05:44.407

插入元素后，需要在 AJAX 的成功回调中执行 .hover 脚本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T15:05:54.187

如果内容是用 Ajax 生成的，你应该使用[livequery](http://docs.jquery.com/Plugins/livequery)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T15:07:52.013

这可能不是正确的答案，但我发现了在函数中创建的元素。需要在函数中声明它们的选择器。像这样：

```
function createEle(){
    $('#element').after('<div id="newEle"><div id="inner" style="display:none;"></div></div>');
    $('#newEle').hover(function(){
        $('#inner','#newEle').show();
    },function(){
        $('#inner','#newEle').hide();
    });
} 
```

# objective-c - Objective-C 宏来检测变量是否是原始的

> ID：14056674
> 
> 赞同：13
> 
> 时间：2012-12-27T15:00:05.580
> 
> 标签：objective-c, objective-c-runtime

我正在寻找一个宏来检测一个变量是Objective-C中的对象还是原语。

在这种情况下，我知道参数必须是变量并且永远不会是表达式。

这是我想出的最好的东西：

```
#define IS_OBJECT(x)    ( @encode(__typeof__(x))[0] == '@' )
#define IS_PRIMITIVE(x) ( !IS_OBJECT(x) ) 
```

用法：

```
NSString *testString = @"test";
NSString *nilString = nil;
NSInteger testInteger = 1;

STAssertTrue(IS_OBJECT(testString), @"IS_OBJECT(testString) must be YES");
STAssertTrue(IS_OBJECT(nilString), @"IS_OBJECT(nilString) must be YES");
STAssertFalse(IS_OBJECT(testInteger), @"IS_OBJECT(testInteger) must be NO"); 
```

一定会有更好的办法。

* * *

**更新**

考虑到@ChrisDevereux 的评论，我更新了 IS_OBJECT 宏。

```
#define IS_OBJECT(x) ( strchr("@#", @encode(__typeof__(x))[0]) != NULL ) 
```

它现在通过了：

```
NSString *testString = @"test";
NSString *nilString = nil;
NSInteger testInteger = 1;
Class classTest = [NSString class];

STAssertTrue(IS_OBJECT(testString), @"IS_OBJECT(testString) must be YES");
STAssertTrue(IS_OBJECT(nilString), @"IS_OBJECT(nilString) must be YES");
STAssertFalse(IS_OBJECT(testInteger), @"IS_OBJECT(testInteger) must be NO");
STAssertTrue(IS_OBJECT(classTest), @"IS_OBJECT(classTest) must be YES"); 
```

我仍然不喜欢这个答案，并希望有一些更光滑的东西。运行时库中有什么东西可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T16:25:10.047

这是使用 C11 的[通用选择机制](http://www.robertgamble.net/2012/01/c11-generic-selections.html)的另一种方式。`_Generic`是标准（现代）C 语言，并在 clang 中得到了一段时间的支持。

```
#define IS_OBJECT(T) _Generic( (T), id: YES, default: NO) 
```

对我来说，它的运行时感觉有点少，所以我更喜欢它`@encode`。但老实说，我只是将它用于这个答案，因为我喜欢`_Generic`宏赋予的力量，并且认为更多的人应该开始使用它。如果您不知道，您应该阅读上面链接的 Robert Gamble 的文章。

# php - 从头开始创建 php 验证码

> ID：14056675
> 
> 赞同：1
> 
> 时间：2012-12-27T15:00:08.697
> 
> 标签：php

我需要在注册表单中添加一个简单的验证码，例如单词验证码或数学验证码。但是代码不起作用。以下是代码：（请帮助我修复代码）

```
<?php
session_start();
//random string generator function
function random($length){
//create a or array string called chars
        $chars ="abcdefghijklmnopqrstuvwxyz23456789";
         $str = "";
        //is the variable which is equal to the length of the string called chars
        $size = strlen($chars);
        for($i=0; $i<$length; $i++){
             $str .= $chars[rand(0, $size-1)];

    }
    return $str;
}
//the gd image adaptor in xampp
$cap = random(7);
$_SESSION['real'] = $cap;
$image = imagecreate(100, 20);
$background = imagecolorallocate($image, 0, 0, 0);
$foreground = imagecolorallocate($image, 255, 255, 255);
//this is going to write our string in the image
imagestring($image, 5,5,1,$cap,$foreground);
header("Content-type: image/jpeg");
imagejpeg($image);
?> 
```

注册页面代码

```
 <?php
//This function will display the registration form
function register_form(){

$date = date('D, M, Y');
echo "<form action='?act=register' method='post'>"
    ."Username: <input type='text' name='username' size='30'><br>"
    ."Password: <input type='password' name='password' size='30'><br>"
    ."Confirm your password: <input type='password' name='password_conf' size='30'><br>"
    ."Email: <input type='text' name='email' size='30'><br>"
    ."<img src= 'captcha.php'>  <input type='text' name='captcha'<br>"
    ."<input type='hidden' name='date' value='$date'>"
    ."<input type='submit' value='Register'>"
    ."</form>";

}

//This function will register users data
function register(){

//Connecting to database
$connect = mysql_connect("localhost", "root", "nokiae71");
if(!$connect){
die(mysql_error());
}

//Selecting database
$select_db = mysql_select_db("forumStructure", $connect);
if(!$select_db){
die(mysql_error());
}

//Collecting info
$username = $_REQUEST['username'];
$password = $_REQUEST['password'];
$pass_conf = $_REQUEST['password_conf'];
$email = $_REQUEST['email'];
$date = $_REQUEST['date'];
$guess = $_POST['captcha'];

//Here we will check do we have all inputs filled

if(empty($username)){
die("Please enter your username!<br>");
}

if(empty($password)){
die("Please enter your password!<br>");
}

if(empty($pass_conf)){
die("Please confirm your password!<br>");
}

if(empty($email)){
die("Please enter your email!");
}

$real = (isset($_SESSION['real'])) ? $_SESSION['real'] : "";

if (empty($guess))
{ 
    die("Please enter the correct CAPTCHA.<br>");
} 
/*if ($real != $guess){
    die("things are bad");
}*/
if (!empty($guess) && $guess !== $real)
{
    die("Please enter the correct CAPTCHA.<br>");
}

//Let's check if this username is already in use

$user_check = mysql_query("SELECT username FROM users WHERE username='$username'");
$do_user_check = mysql_num_rows($user_check);

//Now if email is already in use

$email_check = mysql_query("SELECT email FROM users WHERE email='$email'");
$do_email_check = mysql_num_rows($email_check);

//Now display errors

if($do_user_check > 0){
die("Username is already in use!<br>");
}

if($do_email_check > 0){
die("Email is already in use!");
}

//Now let's check does passwords match

if($password != $pass_conf){
die("Passwords don't match!");
}

//If everything is okay let's register this user

$insert = mysql_query("INSERT INTO users (username, password, email) VALUES ('$username', '$password', '$email')");
if(!$insert){
die("There's little problem: ".mysql_error());
}

echo $username.", you are now registered. Thank you!<br><a href=login.php>Login</a> | <a href=index.php>Index</a>";

}
$act = isset($_GET['act']) ? $_GET['act'] : '';
switch($act){

default;
register_form();
break;

case "register";
register();
break;

}

?> 
```

谢谢我只是php的新手，我想学习如何做到这一点。我在 stackoverflow 上获得了注册码，仅用于学习目的...您的帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:55:51.927

你缺少 session_start(); 在顶部和 > 上 `<img src= 'captcha.php'> <input type='text' name='captcha'><br>"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T02:05:01.230

您可以使用此代码 -

```
<?php
 //
// PHP module for easy utilization of the free captchas.net CAPTCHA service
//
// For documentation look at http://captchas.net/sample/php/
//
// Written by
//   Sebastian Wilhelmi <seppi@seppi.de> and
//   Felix Holderied <felix@holderied.de>
// This file is in the public domain.
//
// ChangeLog:
//
// 2014-04-27: Fixed missing initialization 
//
// 2011-04-25: Added function captchas_image_reload
//
// 2011-03-08: Added color option (Alfred Vink)
//
// 2006-08-16: New optional features integrated
//
// 2006-03-01: Only delete the random string from the repository in
//             case of a successful verification.
 //
 // 2006-02-14: Add new image() method returning an HTML/JavaScript
//             snippet providing a fault tolerant service.
//
// 2005-06-02: Initial version.
 //

 class CaptchasDotNet
  {
 function CaptchasDotNet ($client, $secret,
                       $random_repository = '/tmp/captchasnet-random-strings',
                       $cleanup_time      = 3600,
                       $alphabet          = 'abcdefghijklmnopqrstuvwxyz',
                       $letters           = 6,
                       $width             = 240,
                       $height            = 80,
                       $color             = '000000'
                       )
   {
   $this->__client = $client;
  $this->__secret = $secret;
     $this->__random_repository = $random_repository;
     $this->__cleanup_time      = $cleanup_time;
     $this->__time_stamp_file   = $random_repository . '/__time_stamp__';
     $this->__alphabet          = $alphabet;
     $this->__letters           = $letters;
     $this->__width             = $width;
     $this->__height            = $height;
     $this->__color             = $color; 
     $this->__random_file       = ""; 
   }

   function __random_string ()
    {
      // The random string shall consist of small letters, big letters
      // and digits.
      $letters = "abcdefghijklmnopqrstuvwxyz";
      $letters .= strtoupper ($letters) + "0123456789";

      // The random starts out empty, then 40 random possible characters
      // are appended.
      $random_string = '';
      for ($i = 0; $i < 40; $i++)
      {
        $random_string .= $letters{rand (0, strlen ($letters) - 1)};
      }

      // Return the random string.
      return $random_string;
    }

    // Create a new random string and register it.
    function random ()
    {
      // If the repository directory is does not yet exist, create it.
      if (!is_dir ($this->__random_repository))
      {
        mkdir ($this->__random_repository);
      }

      // If the time stamp file does not yet exist, create it.
      if (!is_file ($this->__time_stamp_file))
      {
        touch ($this->__time_stamp_file);
      }

      // Get the current time.
      $now = time ();

      // Determine the time, before which to remove random strings.
      $cleanup_time = $now - $this->__cleanup_time;

      // If the last cleanup is older than specified, cleanup the
      // directory.
      if (filemtime ($this->__time_stamp_file) < $cleanup_time)
      {
        $handle = opendir ($this->__random_repository);
  while (true)
  {
    $filename = readdir ($handle);
    if (!$filename)
    {
      break;
    }
    if ($filename != '.' && $filename != '..')
    {
      $filename = $this->__random_repository . '/' . $filename;
      if (filemtime ($filename) <  $cleanup_time)
      {
        unlink ($filename);
      }
          }
        }
        closedir ($handle);

        touch ($this->__time_stamp_file);
      }

      // loop until a valid random string has been found and registered,
      // but at most 20 times. If no valid random has been found during
      // that time, there is something really wrong. Also show the error
      // in the last run.
      for ($remaining = 20; $remaining > 0; $remaining--)
      {
        // generate a new random string.
        $random = $this->__random_string ();

        // open a file with the corresponding name in the repository
        // directory in such a way, that the creation fails, when the
        // file already exists. That should be near to impossible with
        // good seeding of the random number generator, but it's better
        // to play safe. If this is the last run, show the possible
        // error message.
        $filename = $this->__random_repository . '/' . $random;

        if ($remaining == 1)
        {
          $file = fopen ($filename, 'x');
        }
        else
        {
          $file = @fopen ($filename, 'x');
        }

        if ($file)
        {
          fclose ($file);
          break;
        }

        // if the file already existed, rerun the loop to try the next
        // string.
      }

      // return the successfully registered random string.
      $this->__random = $random;
      return $random;
    }

    //
    // Generates image-URL Parameters are only atached if different from default
    //
    function image_url ($random = False, $base = 'http://image.captchas.net/')
    {
      if (!$random)
      {
        $random = $this->__random;
      }
      $image_url  = $base;
      $image_url .= '?client='   . $this->__client;
      $image_url .= '&amp;random='   . $random;
      if ($this->__alphabet!='abcdefghijklmnopqrstuvwxyz') {$image_url .= '&amp;alphabet=' . $this->__alphabet;};
      if ($this->__letters!=6) {$image_url .= '&amp;letters='  . $this->__letters;};
      if ($this->__width!=240) {$image_url .= '&amp;width='    . $this->__width;};
      if ($this->__height!=80) {$image_url .= '&amp;height='   . $this->__height;};
      if ($this->__color!='000000') {$image_url .= '&amp;color='   . $this->__color;};
      return $image_url;
    }

    //
    // Same as image_url but without width and height
    //
    function audio_url ($random = False, $base = 'http://audio.captchas.net/')
    {
      if (!$random)
      {
        $random = $this->__random;
      }
      $audio_url  = $base;
            $audio_url .= '?client='   . $this->__client;
      $audio_url .= '&amp;random='   . $random;
      if ($this->__alphabet!='abcdefghijklmnopqrstuvwxyz') {$audio_url .= '&amp;alphabet=' . $this->__alphabet;};
      if ($this->__letters!=6) {$audio_url .= '&amp;letters='  . $this->__letters;};
      return $audio_url;
    }

    //
    // Generates complete html-sample with javascript to reload image from
    // backup server
    //
    function image ($random = False, $id = 'captchas.net')
    {
      $image = <<<EOT
    <a href="http://captchas.net"><img
        style="border: none; vertical-align: bottom"
        id="@ID@" src="@URL@" width="@WIDTH@" height="@HEIGHT@"
        alt="The Captcha image" /></a>
    <script type="text/javascript">
      <!--
      function captchas_image_reload (imgId) 
      {
        var image_url = document.getElementById(imgId).src;
        image_url+= "&";
        document.getElementById(imgId).src = image_url;
      }

      function captchas_image_error (image)
      {
        if (!image.timeout) return true;
        image.src = image.src.replace (/^http:\/\/image\.captchas\.net/,
                                       'http://image.backup.captchas.net');
        return captchas_image_loaded (image);
      }

      function captchas_image_loaded (image)
      {
        if (!image.timeout) return true;
        window.clearTimeout (image.timeout);
        image.timeout = false;
        return true;
      }

      var image = document.getElementById ('@ID@');
      image.onerror = function() {return captchas_image_error (image);};
      image.onload = function() {return captchas_image_loaded (image);};
      image.timeout
        = window.setTimeout(
           "captchas_image_error (document.getElementById ('@ID@'))",
           10000);
      image.src = image.src;
      //-->
    </script>
  EOT;
      $image = str_replace ('@HEIGHT@', $this->__height, $image);
      $image = str_replace ('@WIDTH@', $this->__width, $image);
      $image = str_replace ('@ID@', $id, $image);
      $image = str_replace ('@URL@', $this->image_url (), $image);
      return $image;
    }

    function validate ($random)
    {
      $this->__random = $random;

      $file_name = $this->__random_repository . '/' . $random;

      // Find out, whether the file exists
      $result = is_file ($file_name);

      // if the file exists, remember it.
      if ($result)
      {
        $this->__random_file = $file_name;
      }

      // the random string was valid, if and only if the corresponding
      // file existed.
      return $result;
    }

    function verify ($input, $random = False)
    {
      if (!$random)
      {
        $random = $this->__random;
      }
      $password_letters = $this->__alphabet;
      $password_length  = $this->__letters;

      // If the user input has the wrong lenght, it can't be correct.
      if (strlen ($input) != $password_length)
      {
        return False;
      }

      // Calculate the MD5 digest of the concatenation of secret key and
      // random string. The digest is a hex string.
      $encryption_base = $this->__secret . $random;
      // This extension is needed for secure use of optional parameters
      // In case of standard use we do not append the values, to be
      // compatible to existing implementations
      if(($password_letters  != 'abcdefghijklmnopqrstuvwxyz') || ($password_length != '6'))
      {
        $encryption_base = $encryption_base . ':' . $password_letters  . ':' . $password_length;
      }
      $digest = md5 ($encryption_base);

      // Check the password according to the rules from the first
      // positions of the digest.
      for ($pos = 0; $pos < $password_length; $pos++)
{
  $letter_num
    = hexdec (substr ($digest, 2 * $pos, 2)) % strlen ($password_letters);

  // If the letter at the current position is wrong, the user
  // input isn't correct.
  if ($input[$pos] != $password_letters[$letter_num])
  {
    return False;
  }
}

// if the file exists, remove it.
if ($this->__random_file)
{
  unlink ($this->__random_file);
  unset ($this->__random_file);
}

      // The user input was correct.
      return True;
    }

  }

  ?> 
```

它是图书馆。

现在是 HTML 代码——

```
<?php

  require 'CaptchasDotNet.php';

  // Required Parameters
  // Replace the values you receive upon registration at http://captchas.net.
  //
  //   client: 'demo'
  //
  //   secret: 'secret'
  //
  // Optional Parameters and defaults
  //
  //   repository_prefix: '/tmp/captchasnet-random-strings' path to repository
  //   ATTENTION SAFE-MODE, YOU HAVE TO CHOOSE SOMETHING LIKE
  //   '/writable/path/captchasnet-random-strings'
        //
  //   cleanup_time: '3600' (means max 1 hour between query and check)
  //
  //   alphabet: 'abcdefghijklmnopqrstuvwxyz' (Used characters in captcha)
  //   We recommend alphabet without ijl: 'abcdefghkmnopqrstuvwxyz'
  //
  //   letters: '6' (Number of characters in captcha)
  //
  //   width: '240' (image width)
  //
  //   height: '80' (image height)
  //
  //   color: '000000' (image color in rgb)
  //
  //   language: 'en' (audio language, append &language=fr/de/it/nl to audio-url)
  //
  //   Usage
  //   $captchas = new CaptchasDotNet (<client>, <secret>,
  //                                   <repository_prefix>, <cleanup_time>,
  //                                   <alphabet>,<letters>,
  //                                   <height>,<width>,<color>);
  //
  // Don't forget same settings in check.php

  // Construct the captchas object.

  $captchas = new CaptchasDotNet ('demo', 'secret',
                            '/tmp/captchasnet-random-strings','3600',
                            'abcdefghkmnopqrstuvwxyz','6',
                            '240','80','000088');
  ?>

  <html>
    <head>
      <title>Sample PHP CAPTCHA Query</title>
    </head>
    <h1>Sample PHP CAPTCHA Query</h1>
    <form method="get" action="check.php">
      <table>
  <tr>
    <td>
      <input type="hidden" name="random" value="<?= $captchas->random () ?>" />
        Your message:</td><td><input name="message" size="60" />
    </td>
  </tr>
  <tr>
    <td>
      The CAPTCHA password:
    </td>
    <td>
      <input name="password" size="6" />
    </td>
  </tr>
  <tr>
    <td>
    </td>
    <td>
      <?= $captchas->image () ?> <a href="javascript:captchas_image_reload('captchas.net')">Reload Image</a>
      <br> <a href="<?= $captchas->audio_url () ?>">Phonetic spelling (mp3)</a>
      <br> <a href="<?= $captchas->audio_url () ?>&language=de">Buchstabieren (mp3)</a>
      <br> <a href="<?= $captchas->audio_url () ?>&language=it">Compitare (mp3)</a>
      <br> <a href="<?= $captchas->audio_url () ?>&language=nl">Spellen (mp3)</a>
      <br> <a href="<?= $captchas->audio_url () ?>&language=fr">Epeler (mp3)</a>
    </td>
  </tr>
  <tr>
    <td>
    </td>
    <td>
      <input type="submit" value="Submit" />
    </td>
  </tr>
</table> 
```

现在检查 -

```
<?php

  require 'CaptchasDotNet.php';

  // See query.php for documentation

  $captchas = new CaptchasDotNet ('demo', 'secret',
                            '/tmp/captchasnet-random-strings','3600',
                            'abcdefghkmnopqrstuvwxyz','6',
                            '240','80','000088');

  // Read the form values
  $message       = $_REQUEST['message'];
  $password      = $_REQUEST['password'];
  $random_string = $_REQUEST['random'];
  ?>

  <html>
    <head>
      <title>Sample PHP CAPTCHA Query</title>
    </head>
    <h1>Sample PHP CAPTCHA Query</h1>

  <?php
    // Check the random string to be valid and return an error message
    // otherwise.
    if (!$captchas->validate ($random_string))
    {
      echo 'The session key (random) does not exist, please go back and reload form.<br/>';
      echo 'In case you are the administrator of this page, ';
      echo 'please check if random keys are stored correct.<br/>';
      echo 'See http://captchas.net/sample/php/ "Problems with save mode"';
    }
    // Check, that the right CAPTCHA password has been entered and
    // return an error message otherwise.
    elseif (!$captchas->verify ($password))
    {
      echo 'You entered the wrong password. Aren\'t you human? Please use back button and reload.';
    }
    // Return a success message
    else
    {
      echo 'Your message was verified to be entered by a human and is "' . $message . '"';
    }
  ?>

  </html> 
```

想想，对你有很大帮助

# visual-studio-2010 - 部署服务器更改为具有不同 IP 地址的新服务器

> ID：14056678
> 
> 赞同：-2
> 
> 时间：2012-12-27T15:00:18.897
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008

我有 Server1（具有源代码的发布服务器）、Server 2（部署服务器）和已经使用应用程序并指向 Server2 的客户端机器。想将此服务器 2 移动到新服务器并删除服务器 2。我不想在客户的系统中手动更改它。此服务器 2 和新服务器将拥有不同的 IP 地址。如何将服务器 2 更改为新服务器。请有人尽快建议我一个解决方案。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:05:04.203

如果你使用的是click-once部署，你可以把域的DNS改成指向第二台服务器，把文件放在同一个虚拟路径下，应该没有问题。

# php - 使用 Propel 在 Symfony 中进行批量更新

> ID：14056683
> 
> 赞同：0
> 
> 时间：2012-12-27T15:00:40.490
> 
> 标签：php, join, symfony-1.4, propel

当我的选择条件加入时，如何使用推进在 symfony 中进行批量更新？这是我正在尝试做的一个例子。

```
$conn = Propel::getConnection(BudgetLinePeer::DATABASE_NAME);
// Create a Criteria object that will select the correct rows from the database
$selectCriteria = new Criteria();            
$selectCriteria->add(BudgetLinePeer::IDCOL1, $idcol1, Criteria::EQUAL);
$selectCriteria->addJoin(ProjectBudgetLinePeer::IDBUDGET_LINE, BudgetLinePeer::IDBUDGET_LINE);
$selectCriteria->add(ProjectBudgetLinePeer::IDCLIENT, $idclient, Criteria::EQUAL);
$selectCriteria->add(ProjectBudgetLinePeer::IDPROJECT, $project->getIdproject(), Criteria::EQUAL);
// Create a Criteria object includes the value you want to set
$updateCriteria = new Criteria();
$updateCriteria->add(BudgetLinePeer::STATUS, $status);
// Execute the query
BasePeer::doUpdate($selectCriteria, $updateCriteria, $conn); 
```

我正在尝试在表 BudgetLine 中进行更新（更新新状态）。

**编辑**：这是我得到的错误片段：

> 在第 369 行的 /Applications/MAMP/htdocs/proj_ict_new/trunk/cbm/plugins/sfPropelORMPlugin/lib/vendor/propel/runtime/lib/util/BasePeer.php 中为 foreach() 提供的参数无效

这与 join 语句有关。我尝试使用`useXYZQuery()->filterCon()->endUse()`. 但最终再次出现同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:01:01.733

我能够想出另一种方法来解决这个问题。这是解决方案：

```
$budgetLine_ids = BudgetLineQuery::create()
                 ->filterByIdcol1($col1)
                 ->useProjectBudgetLineQuery()
                 ->filterbyIdproject()->endUse()->find()->toArray('budgetline_id');

$selectCriteria = BudgetLineQuery::create()->filterByIdbudgetLine(array_keys($budgetLine_ids));      

// Create a Criteria object includes the value you want to set
$updateCriteria = new Criteria();
$updateCriteria->add(BudgetLinePeer::STATUS, $status);
// Execute the query
BasePeer::doUpdate($selectCriteria, $updateCriteria, $conn); 
```

# ide - Aptana - 在浏览器快捷方式中预览？

> ID：14056686
> 
> 赞同：1
> 
> 时间：2012-12-27T15:00:44.907
> 
> 标签：ide, keyboard-shortcuts, aptana

![在浏览器快捷方式中预览](../Images/ef4ae5a0d37b40a8750056a52337e8ab.png)

在 Aptana Studio 3 的网络浏览器中预览的快捷方式是什么？我一直在四处寻找，但仍然找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T23:12:26.913

没有用于预览文件的默认键绑定，但您可以从“首选项”>“常规”>“键”页面定义一个并查找“显示预览”：

![在此处输入图像描述](../Images/0e57ccf7ecace6e9055f6f9ed713f0b1.png)

希望这可以帮助。

# ios - 如何检测用户何时按下 iPhone 中的幻灯片关机按钮？

> ID：14056687
> 
> 赞同：1
> 
> 时间：2012-12-27T15:00:44.840
> 
> 标签：ios, uiapplicationdelegate

如果用户按下 iPhone/iPad 中的幻灯片关机按钮，我需要从我的应用程序向服务器发送警报消息。怎么做？一些帮助表示赞赏..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:07:23.323

你不能。它不是公共/记录 API 的一部分。

# noise - 锯齿状单纯形噪声

> ID：14056691
> 
> 赞同：1
> 
> 时间：2012-12-27T15:01:29.087
> 
> 标签：noise

我决定使用单纯形噪声而不是 Perlin 噪声。这是我从 Java 移植到 C# 的噪声实现：[SimplexNoise](http://code.google.com/p/toxiclibs/source/browse/trunk/toxiclibs/src.core/toxi/math/noise/SimplexNoise.java?r=188)

![平滑 Perlin 噪声](../Images/5e0cc6014673e5407c288042e16ca96b.png)平滑 Unity Perlin 噪声

![锯齿状单纯形噪声](../Images/6eeb53fc890ad777c54d16f4d39851e5.png)锯齿状单纯形噪声

我怎样才能让单纯形噪声看起来更“平滑”，就像 Unity 的 Perlin 噪声一样？模糊是一种解决方案，但有没有更简单的方法来调整单纯形噪声的某些参数？我希望我的单纯形噪声看起来类似于 Perlin 噪声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:38:16.167

您的单纯形噪声看起来不对：我怀疑您没有将其归一化到 (0,1) 范围内，因此一些噪声被截断为零。

它们应该看起来非常相似，请参阅此页面上的图像：

*   [http://clojurefunc.wordpress.com/2012/08/05/perlin-noise-vs-simplex-noise/](http://clojurefun.wordpress.com/2012/08/05/perlin-noise-vs-simplex-noise/)

# javascript - par.rowIndex 在此代码中为空

> ID：14056698
> 
> 赞同：0
> 
> 时间：2012-12-27T15:01:58.190
> 
> 标签：javascript

我对 JavaScript 真的很陌生，但我不知道为什么这个程序不起作用。
当我单击位于动态创建的表中的单元格中的动态创建的按钮时，我想要获取`rowindex`按钮所在行的 。

在此先感谢 - 这是我的代码：

```
<html>
    <head>
        <script>
            function whichrow(obj) {
                var par = obj.parentNode;
                while(par.nodeName.toLowerCase()! = 'tr') {
                    par = par.parentNode;
                }
                alert(par.rowIndex);
            }
        </script>
    </head>
    <body> 
        <script>
        mybody = document.getElementsByTagName("body")[0];
        mytable = document.createElement("table");
        mytablebody = document.createElement("tbody");
        for(var i = 0; i<5; i++) {
            mycurrent_row = document.createElement("tr"); 
            mycurrent_row.id = "row"+i;

            for(var j = 0; j<4; j++) {
                mycurrentcell = document.createElement("td");  
                currenttext = document.createTextNode("Row" + i + "Column" + j);
                mycurrentcell.appendChild(currenttext);
                mycurrent_row.appendChild(mycurrentcell);
            }   
            mybutoncell = document.createElement("td");
            but = document.createElement("button");
            mybutoncell.appendChild(but);

            mycurrent_row.appendChild(mybutoncell);

            mytablebody.appendChild(mycurrent_row);
            but.onClick = whichrow(this);
        }
        mytable.appendChild(mytablebody);
        mybody.appendChild(mytable);

        mytable.setAttribute("border", "2"); 
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:15:53.437

好的，这里有几点需要注意。

在 javascript 事件系统中，系统根据发生的情况使用包含不同属性的事件对象调用您的回调。

所以，这里是错误：

1.  当您分配给事件处理程序时，当您说`but.onclick = whichrow(this)`您正在设置 but.onclick 的结果时`whichrow`，这是`undefined`因为您无论如何都没有返回任何内容。当用户单击您的按钮时，它应该`but.onclick = whichrow;`会调用。`whichrow`传递的参数是一个[MouseEvent](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)对象。我提供的[链接应该可以作为一个好的开始，以了解您可以使用哪些类型的属性。](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)

2.  我必须检查一下，因为我经常使用 el.addEventListeners，但`onclick`需要小写，而不是像你所做的那样使用 camelCase。

3.  在事件回调中，`this`通常指的是被点击的元素，所以你应该使用它。

4.  没有`rowIndex`财产。

现在，试图找到解决您问题的方法。rowIndex 可以通过遍历 dom 来收集。我不确定这将起到什么作用，因为无论如何您都是手动创建 DOM 并且已经知道 rowIndex，但如果它是未知的，这就是我要做的

```
function whichRow(e) {
  // here this should be the button.
  var curRow = this.parentElement.parentElement,
      rowIndex = 0;

  while(curRow) {
    curRow = curRow.previousElementChild; 
    rowIndex++;
  }

  return rowIndex;
} 
```

我是在脑海中写下这篇文章，但重点是要给出主要思想。在上面的代码片段中，我采用了按钮父级的父级，因为这里是按钮部分的大致标记：

```
<tr>
  <td>
    <button></button>
  </td>
</tr> 
```

因此，按钮元素的 parentElement 的 parentElement 应该为您提供`<tr>`. 然后我们将向后遍历，直到我们没有任何先前的元素，边计数。一旦前一个元素为空，则返回计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:07:54.000

`obj`你传递给的`whichrow()`是一个按钮，我假设它在一个`TD`. 所以你的`while`循环将在它的第一次迭代中退出，导致`par`持有一个`TD`- 它没有一个名为的属性`rowIndex`

# jsf-2 - JSF 2.0 @managedproperty 不能从一个 viewScoped bean 到另一个 viewScoped bean

> ID：14056700
> 
> 赞同：0
> 
> 时间：2012-12-27T15:02:10.237
> 
> 标签：jsf-2, facelets, managed-bean, view-scope

我有一个**@viewScoped** bean（比如**bean1）**，它有一个inputText 作为属性。从facelet 中，我正在设置这个inputtext 字段的值。但是，在另一个 facelet（其托管 bean 说**bean2**在**@viewScoped**中）也被加载时提交操作之后，我需要检索 bean1 inputText 值但我无法检索。我知道在 viewscoped bean 中状态丢失了一次我们移到下一个视图，但有没有办法检索值？因为我需要在下一个 facelet 中显示值......顺便说一下，我正在使用 ajax，所以 bean 必须是 viewscoped

我什至在 bean2 (@viewScoped) 中尝试了以下代码。但下面显示的 sysout 始终为空

```
@ManagedProperty(value="#{bean1}")
private Bean1 bean1;

System.out.println(bean1.getinputtext()); 
```

两个 bean 都必须在 @viewScoped 中。有没有办法可以检索 bean 1 到 bean 2 的值？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T12:36:28.267

您不能再访问第一个视图范围的 bean。您可以将数据添加到会话，从第二个 bean 读取该数据并删除数据。

# xml - Xpath 添加条件以排除具有特定后代元素但没有值的元素

> ID：14056705
> 
> 赞同：0
> 
> 时间：2012-12-27T15:02:49.897
> 
> 标签：xml, xpath, filter, selector

具有以下 xml：（[完整 xml）](https://www.dropbox.com/s/2akoux8m14h9zg1/example.xml)

```
 <Matrix>
  <AffectsFormMode>1</AffectsFormMode>
  <BackColor>-1</BackColor>
  <Description></Description>
  <DisplayDesc>0</DisplayDesc>
  <Enabled>0</Enabled>
  <FontSize>-1</FontSize>
  <ForeColor>-1</ForeColor>
  <FromPane>1</FromPane>
  <Height>263</Height>
  <Layout>0</Layout>
  <Left>6</Left>
  <LinkTo></LinkTo>
  <RightJustified>0</RightJustified>
  <TextStyle>0</TextStyle>
  <Top>5</Top>
  <ToPane>1</ToPane>
  <Type>127</Type>
  <UniqueID>1</UniqueID>
  <Visible>1</Visible>
  <Width>544</Width>
  <ColumnsInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_72</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>#</Title>
      <Type>16</Type>
      <UniqueID>0</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>20</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Indicador de retenci&#243;n</Title>
      <Type>16</Type>
      <UniqueID>1</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>80</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Nombre impuesto retenci&#243;n</Title>
      <Type>16</Type>
      <UniqueID>15</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>80</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_67</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Ret.%</Title>
      <Type>16</Type>
      <UniqueID>17</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>80</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>1</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title></Title>
      <Type>16</Type>
      <UniqueID>36</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>10</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_70</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>1</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>N&#186; folio</Title>
      <Type>16</Type>
      <UniqueID>73</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_60</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>N&#250;mero de documento</Title>
      <Type>116</Type>
      <UniqueID>18</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>90</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Fecha de documento</Title>
      <Type>16</Type>
      <UniqueID>22</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>90</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Fecha de pago</Title>
      <Type>16</Type>
      <UniqueID>38</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>90</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_78</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe documento</Title>
      <Type>16</Type>
      <UniqueID>39</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>100</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_79</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>1</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe neto factura</Title>
      <Type>16</Type>
      <UniqueID>72</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_61</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe base</Title>
      <Type>16</Type>
      <UniqueID>23</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_62</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe sujeto a impuestos</Title>
      <Type>16</Type>
      <UniqueID>24</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>100</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_63</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe de retenci&#243;n</Title>
      <Type>16</Type>
      <UniqueID>25</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>90</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_64</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe del pago</Title>
      <Type>16</Type>
      <UniqueID>26</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>90</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_65</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe exento</Title>
      <Type>16</Type>
      <UniqueID>28</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_66</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Importe no sujeto</Title>
      <Type>16</Type>
      <UniqueID>29</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>105</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>1</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>abs entry</Title>
      <Type>116</Type>
      <UniqueID>32</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>1</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>TYPE</Title>
      <Type>16</Type>
      <UniqueID>33</UniqueID>
      <ValidValues>
        <ValidValue>
          <Description>A/P Invoice</Description>
          <Value>18</Value>
        </ValidValue>
      </ValidValues>
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_75</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>1</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>IsHeaderLine</Title>
      <Type>16</Type>
      <UniqueID>34</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind />
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>1</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>0</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>N&#250;mero referencia</Title>
      <Type>16</Type>
      <UniqueID>37</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>0</Visible>
      <Width>0</Width>
    </ColumnInfo>
    <ColumnInfo>
      <AffectsFormMode>1</AffectsFormMode>
      <BackColor>-1</BackColor>
      <ChooseFromListAlias></ChooseFromListAlias>
      <ChooseFromListUID></ChooseFromListUID>
      <DataBind>
        <Alias>SYS_81</Alias>
        <DataBound>1</DataBound>
        <TableName></TableName>
      </DataBind>
      <Description></Description>
      <DisplayDesc>0</DisplayDesc>
      <Editable>0</Editable>
      <FontSize>-1</FontSize>
      <ForeColor>-1</ForeColor>
      <RightJustified>1</RightJustified>
      <TextStyle>0</TextStyle>
      <Title>Total no sujeto a impuestos</Title>
      <Type>16</Type>
      <UniqueID>540000075</UniqueID>
      <ValidValues />
      <ValOFF></ValOFF>
      <ValON></ValON>
      <Visible>1</Visible>
      <Width>105</Width>
    </ColumnInfo>
  </ColumnsInfo>
  <Rows>
    <Row>
      <Visible>1</Visible>
      <Columns>
        <Column>
          <ID>0</ID>
          <Value>1</Value>
        </Column>
        <Column>
          <ID>1</ID>
          <Value>A01</Value>
        </Column>
        <Column>
          <ID>15</ID>
          <Value>Actividad modulos</Value>
        </Column>
        <Column>
          <ID>17</ID>
          <Value>1.0000</Value>
        </Column>
        <Column>
          <ID>36</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>73</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>18</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>22</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>38</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>39</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>72</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>23</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>24</ID>
          <Value>2,914.83 EUR</Value>
        </Column>
        <Column>
          <ID>25</ID>
          <Value>29.14 EUR</Value>
        </Column>
        <Column>
          <ID>26</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>28</ID>
          <Value>0.00 EUR</Value>
        </Column>
        <Column>
          <ID>29</ID>
          <Value>0.00 EUR</Value>
        </Column>
        <Column>
          <ID>32</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>33</ID>
          <Value>18</Value>
        </Column>
        <Column>
          <ID>34</ID>
          <Value>1</Value>
        </Column>
        <Column>
          <ID>37</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>540000075</ID>
          <Value>0.00 EUR</Value>
        </Column>
      </Columns>
    </Row>
    <Row>
      <Visible>0</Visible>
      <Columns>
        <Column>
          <ID>0</ID>
          <Value>0</Value>
        </Column>
        <Column>
          <ID>1</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>15</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>17</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>36</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>73</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>18</ID>
          <Value>TT 5887</Value>
        </Column>
        <Column>
          <ID>22</ID>
          <Value>01/04/2011</Value>
        </Column>
        <Column>
          <ID>38</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>39</ID>
          <Value>52.65 EUR</Value>
        </Column>
        <Column>
          <ID>72</ID>
          <Value>44.55 EUR</Value>
        </Column>
        <Column>
          <ID>23</ID>
          <Value>45.00 EUR</Value>
        </Column>
        <Column>
          <ID>24</ID>
          <Value>45.00 EUR</Value>
        </Column>
        <Column>
          <ID>25</ID>
          <Value>0.45 EUR</Value>
        </Column>
        <Column>
          <ID>26</ID>
          <Value>52.65 EUR</Value>
        </Column>
        <Column>
          <ID>28</ID>
          <Value>0.00 EUR</Value>
        </Column>
        <Column>
          <ID>29</ID>
          <Value>0.00 EUR</Value>
        </Column>
        <Column>
          <ID>32</ID>
          <Value>34271</Value>
        </Column>
        <Column>
          <ID>33</ID>
          <Value>18</Value>
        </Column>
        <Column>
          <ID>34</ID>
          <Value>2</Value>
        </Column>
        <Column>
          <ID>37</ID>
          <Value>28 15793/0128/1</Value>
        </Column>
        <Column>
          <ID>540000075</ID>
          <Value>0.00 EUR</Value>
        </Column>
      </Columns>
    </Row>
    <Row>
      <Visible>1</Visible>
      <Columns>
        <Column>
          <ID>0</ID>
          <Value>2</Value>
        </Column>
        <Column>
          <ID>1</ID>
          <Value>BI</Value>
        </Column>
        <Column>
          <ID>15</ID>
          <Value>Arrendamiento Bienes Inmuebles</Value>
        </Column>
        <Column>
          <ID>17</ID>
          <Value>21.0000</Value>
        </Column>
        <Column>
          <ID>36</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>73</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>18</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>22</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>38</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>39</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>72</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>23</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>24</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>25</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>26</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>28</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>29</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>32</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>33</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>34</ID>
          <Value>1</Value>
        </Column>
        <Column>
          <ID>37</ID>
          <Value></Value>
        </Column>
        <Column>
          <ID>540000075</ID>
          <Value></Value>
        </Column>
      </Columns>
    </Row>
  </Rows>
</Matrix> 
```

而这个 xpath 选择器：

```
/Matrix/Rows/Row[descendant::Visible='1']/Columns/Column[descendant::ID='1']/Value/text() 
```

我怎么能和以下条件：从选择中排除具有 Column/ID='24' 并且它是 Column/Value/text()='' 的 Row 节点

尝试过这样的事情（没有用）：

```
/Matrix/Rows/Row[descendant::Visible='1' and (descendant::ID='24' and descendant::Value!='')]/Columns/Column[descendant::ID='1']/Value/text() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:06:43.720

您应该使用`not()`并指定您正在为此过滤器寻找的节点：

```
/Matrix/Rows/Row[descendant::Visible='1' and not(./Columns/Column[ID='24' and Value=''])]/Columns/Column[descendant::ID='1']/Value/text() 
```

# android - 应用升级时旧文件会怎样？

> ID：14056706
> 
> 赞同：1
> 
> 时间：2012-12-27T15:02:51.413
> 
> 标签：android, installation, upgrade

我有一个通过 JNI 使用一些本机库 (.so) 的 Android 应用程序。在下一个版本中，我进行了很多更改，其中一些原生库不再使用或已重命名。

我的问题是，当用户重新安装我的应用程序时，这些“已弃用”文件是否会被删除？

我应该开发另一个程序来处理旧文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:09:50.910

本机库是 APK 的一部分。APK 不会在 Android 上提取，而是按原样以存档形式使用。升级会替换整个 APK，因此一旦更新完成，您的旧库将不再存在。你不必做任何特别的事情。

# codeigniter - 创建一个全局变量并在函数中递增 - CodeIgniter

> ID：14056709
> 
> 赞同：0
> 
> 时间：2012-12-27T15:03:01.033
> 
> 标签：codeigniter, global-variables

我试图在我的模型中创建一个全局变量来增加我的 mysql 表中的一个 id 字段，但是 CI 不允许我创建全局变量。

我四处搜索，人们提到必须创建一个库并在那里声明全局变量，然后将库加载到模型中并使用该变量。

我理解这种方法，但是我如何/在哪里能够增加变量值，以便下次在函数中调用它时为 +1？

预先感谢您的任何帮助

编辑：我想做的是每当我在表中插入新行时，我想从最后一个条目的 id 号继续，即表中的最后一个 id 号是 9，我想从那个数字开始递增并使新行 id 编号为 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:33:30.857

如果您能够通过 CI 访问数据库，则可以使用 Active Record count_all() 函数。

来自 CI 文档[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

> 允许您确定特定表中的行数。在第一个参数中提交表名。例子：
> 
> `echo $this->db->count_all('my_table');`
> 
> // 产生一个整数，比如 25

您只需获取返回的表中的行数，然后为新条目中的行添加 1。

# javascript - javascript中是否有其他可用的，除了$（美元）用作速记

> ID：14056710
> 
> 赞同：1
> 
> 时间：2012-12-27T15:03:06.617
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 变量名称的有效字符](https://stackoverflow.com/questions/1661197/valid-characters-for-javascript-variable-names)

我意识到很多 js 框架都使用 $ 作为 jQuery 中的简写。javascript中是否还有其他可用符号，以便我可以分配：

```
$ = function(){console.log('working')} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:07:31.210

除了美元符号 ( `$`) 和下划线 ( `_`)，我认为没有任何“基本”字符不被基本操作或字符串分隔符所采用。

**编辑：**

[基本上，这意味着如果你希望你的代码与jQuery](http://jquery.com/) / [underscore.js](http://underscorejs.org/)结合使用，你必须给你的速记起一个不同的名字

但是，就像评论中提到的[Deestan](https://stackoverflow.com/questions/14056710/is-there-any-other-available-in-javascript-other-than-dollar-to-use-as-shor#comment19425925_14056710)一样，您可以（几乎）使用任何 ASCII 字母作为变量名，只要不使用它。那么，这只是一个方便的问题。
像这样的口音`û`相对容易输入。更复杂的字符可能需要手动输入其 ASCII 代码，这违背了速记别名的目的。

例如，虽然无法输入，但这是有效的 js：

.

ḣ̶̤̟͍ͦe̱̺̺̮̗̼̖ͫͭ͜͟ͅe̱̺̺̮̗̼̖ͫͭ͜͟ͅo͎͓̘̭̱̩ͮ͂ͯ̿ͩͨ͂́̚̕M̬͎̜̪͋͛̏M̬͎̜̪͋͛̏S̸͔̜͇̔͊͢ ='一些文本';

.

^(（没有语法格式，因为这会破坏效果）)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:06:10.023

大多数库也有一个 noConflict 变量。所以，就像在 jQuery 中一样，如果你愿意，你可以使用 jQuery.fn 而不是 $.fn。

还有另一个使用 _ 的大库，它也被称为下划线。从来没有想太多。但是当您在全局代码中使用公共变量时，您应该始终考虑冲突。

# c# - StreamSocket 下 DataWriter 的 StoreAsync 是如何工作的？

> ID：14056714
> 
> 赞同：3
> 
> 时间：2012-12-27T15:03:26.217
> 
> 标签：c#, sockets, windows-store-apps, socketstream

我正在 Windows Store (8\Metro\RT) 应用程序中创建套接字客户端 (TCP)，并且我正在尝试使用以下代码发送数据：

```
await _socket.ConnectAsync(new HostName(ipAddress), port);
_dataWriter = new DataWriter(_socket.OutputStream);
_dataWriter.WriteBytes(bytes);
await _dataWriter.StoreAsync();
//Does execution in this line mean that bytes were sent 
//and TCP packet acknowledge has been received? 
```

所以问题在评论中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:06:07.417

不会。写操作的完成仅意味着数据已被复制到操作系统缓冲区。

当您收到数据的 TCP ACK 时，没有办法得到通知；但是，如果您*没有*得到一个（在内置 TCP 重试之后），那么您对套接字执行的*下一个*操作将导致错误。

# java - 为特定注释禁用 Jackson 映射器

> ID：14056716
> 
> 赞同：7
> 
> 时间：2012-12-27T15:03:43.120
> 
> 标签：java, json, annotations, jackson

使用 Jackson，可以轻松禁用给定`ObjectMapper`. 有没有办法只禁用一个给定的注释？

```
// disable all
ObjectMapper mapper = new ObjectMapper()
mapper.disable(MapperFeature.USE_ANNOTATIONS);

// disable one?
ObjectMapper mapper = new ObjectMapper()
mapper.disable(@JsonIgnore); 
```

使用`@JacksonAnnotationsInside`，我定义了一个自定义 Jackson 注释，我只希望它在某些情况下使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T00:26:44.737

这是我遇到的最好的。我想我在某个地方的杰克逊用户组论坛上看到了它。

本质上，它创建了一个自定义注解内省器，如果它看到它有一个特定的注解（在本例中为 JsonTypeInfo），则返回 null

```
JacksonAnnotationIntrospector ignoreJsonTypeInfoIntrospector = new JacksonAnnotationIntrospector() {
            @Override
            protected TypeResolverBuilder<?> _findTypeResolver(
                    MapperConfig<?> config, Annotated ann, JavaType baseType) {
                if (!ann.hasAnnotation(JsonTypeInfo.class)) {
                    return super._findTypeResolver(config, ann, baseType);
                }
                return null;
            }
        };

        mapper.setAnnotationIntrospector(ignoreJsonTypeInfoIntrospector); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T13:15:51.887

我认为重写`findPropertiesToIgnore`这样的方法是一个更好的主意：

```
 JacksonAnnotationIntrospector ignoreJsonTypeInfoIntrospector = new JacksonAnnotationIntrospector() {
        @Override
        public String[] findPropertiesToIgnore(AnnotatedClass ac) {
            ArrayList<String> ret = new ArrayList<String>();
            for (Method m : ac.getRawType().getMethods()) {
                if(ReflectionUtils.isGetter(m)){
                    if(m.getAnnotation(Transient.class) != null)
                        ret.add(ReflectionUtils.getPropertyName(m));

                }
            };
            return ret.toArray(new String[]{});
        }
    };
    objectMapper = new ObjectMapper();
    objectMapper.setAnnotationIntrospector(ignoreJsonTypeInfoIntrospector); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-30T15:39:28.773

这个解决方案对我有用。检查[此](https://github.com/FasterXML/jackson-databind/issues/133)以获取更多信息

```
 private static final JacksonAnnotationIntrospector IGNORE_ENUM_ALIAS_ANNOTATIONS = new JacksonAnnotationIntrospector() {

    @Override
    protected <A extends Annotation> A _findAnnotation(final Annotated annotated, final Class<A> annoClass) {
        if (!annotated.hasAnnotation(JsonEnumAliasSerializer.class)) {
            return super._findAnnotation(annotated, annoClass);
        }
        return null;
    }
}; 
```

还有我的自定义注释：

```
@Retention(RetentionPolicy.RUNTIME)
@JacksonAnnotationsInside
@JsonSerialize(using = JsonEnumSerializer.class)
public @interface JsonEnumAliasSerializer {
} 
```

和对象映射器：

```
 final ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.setAnnotationIntrospector(IGNORE_ENUM_ALIAS_ANNOTATIONS); 
```

# html - 找不到删除 div 上的“悬停”的方法

> ID：14056718
> 
> 赞同：0
> 
> 时间：2012-12-27T15:03:53.563
> 
> 标签：html, css

我有一个当前出现在另一个 div 上的悬停的 div。

我需要它一直保持打开状态，并且我也在尝试修复它，以便访问者可以将其最小化。

问题是我不知道如何实现一直保持打开状态。我看到出现在 CSS 上的“悬停”类，但我无法在 php/html 文件中找到它。

不确定代码是否有帮助，但这是我所拥有的：

```
<div id="main_navigation" class="hor_navigation clearfix">
        <?php wp_nav_menu( array( 'sort_column' => 'menu_order', 'theme_location' => 'header', 'depth' =>'2', 'container' => 'none' ) ); ?>
    </div><!-- #navigation -->

    <?php if ( !is_user_logged_in() ): ?>
        <div id="nav_subscription" class="subscription_form clearfix">
            <span id="subscribe_dd" class="contrast"><?php gb_e( 'Get the Latest Deals' ) ?></span>
            <div id="subscription_form_wrap" style="display: block;">
            <a id="dialog-minimize" href="#" onclick="minimize();" style="display: block;"><span>Min</span></a>
                        <a id="dialog-minimize-return" href="#" onclick="minimize_restore();" style="display:none;"><span>Min</span></a>
</div>
</div><!-- #header_subscription.subscription_form -->
    <?php endif ?> 
```

CSS

```
#subscription_form_wrap {
    -webkit-border-bottom-right-radius: 8px;
    -webkit-border-bottom-left-radius: 8px;
    -moz-border-radius-bottomright: 8px;
    -moz-border-radius-bottomleft: 8px;
    border-bottom-right-radius: 8px;
    border-bottom-left-radius: 8px;
    background: none;
    background: none;
    background-color: white;
    padding: 0 8px 10px 8px;
    float: right;
    position: absolute;
    top: 28px;
    right: 0;
    height: auto;
    min-width: 200px;
    display: block;
    font-size: 13px;
    }

    #subscribe_dd {
    font-weight: bold;
    text-align: right;
    white-space: nowrap;
    padding: 10px 20px 5px;
    height: 10px;
    text-shadow: rgba(0, 0, 0, 0.5) 0 1px;
    position: absolute;
    top: 0;
    right: 0;
    -moz-border-radius-bottomright: 8px;
    -webkit-border-bottom-right-radius: 8px;
    border-bottom-right-radius: 8px;
    z-index: 10;
    border-bottom: 1px solid #CCC;
    border-bottom: 1px solid rgba(255, 255, 255, .2);
    line-height: 5px;
    background-color: #999999;
    color: #FFFFFF;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:13:01.473

您需要删除 display: block; 从元素

```
 <div id="subscription_form_wrap" style="display: block;"> 
```

变成

```
 <div id="subscription_form_wrap"> 
```

当您单击灰色块时，javascript会处理添加该额外样式的问题，因为它当前默认情况下会通过包含该样式来显示它。

# backbone.js - 用 Jasmine 监视 Backbone.js 视图函数

> ID：14056720
> 
> 赞同：2
> 
> 时间：2012-12-27T15:04:00.487
> 
> 标签：backbone.js, jasmine

我正在尝试编写 Jasmine 规范来验证在将模型添加到视图的集合时是否调用了视图的函数。

在视图的初始化函数中我做

```
this.collection.on('add', this.fooAdded, this); 
```

在我的茉莉花规格中，我正在做：

```
describe('Foo View', function() {
   it('should call fooAdded when a Foo is added', function() {
      var view = new FooView({collection: new FooCollection()});
      spyOn(view, 'fooAdded').andCallThrough();
      view.delegateEvents();
      view.collection.add({name: 'foo'});
      expect(view.fooAdded).toHaveBeenCalled();
   });
}); 
```

我的 fooAdded() 实现将一些内容记录到控制台，所以我知道它正在被调用。然而，间谍没有看到 fooAdded() 已被调用。

见我的[jsFiddle](http://jsfiddle.net/erturne/j8YuM "jsFiddle")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:42:31.330

您的问题是`spyOn`用新的包装函数替换了被监视的函数，但您在使用该函数*后*替换它。当您调用`spyOn(view, 'fooAdded')`附加间谍时，对原始的引用`fooAdded`已经在集合的侦听器列表中，因此监视该回调为时已晚。

如果您在实例化视图*之前*`fooAdded`在视图的原型中窥探：

 *```
spyOn(FooView.prototype, 'fooAdded');
var view = new FooView(...);
view.delegateEvents();
//... 
```

那么事情应该会更好。演示： http: [//jsfiddle.net/m5Baw/1/](http://jsfiddle.net/m5Baw/1/)（感谢[amiuhle](https://stackoverflow.com/users/500999/amiuhle)更新演示中的 Jasmine 链接）。

顺便说一句，我认为您的视图发生了一些奇怪的事情，您不需要`view.delegateEvents()`在视图的代码之外，所以您可能想仔细看看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:09:34.103

我正要回应，“亩太短”正是重点。证明您的间谍未注册的第一件事是使用以下代码而不是您的代码`spyOn(view, 'fooAdded').andCallThrough();`

```
spyOn(FooView.prototype, 'fooAdded').andCallFake(function(){
           console.log('fake "fooAdded" called');
        }); 
```

这将永远不会被调用，因为`fooAdded`它已经在集合侦听器中注册。这是更新的[jsFiddle](http://jsfiddle.net/j8YuM/3/)*

# java - 相当于 Struts 2 中的 TagUtils.getInstance().lookup() Struts1

> ID：14056722
> 
> 赞同：1
> 
> 时间：2012-12-27T15:04:06.340
> 
> 标签：java, struts2, struts, taglib, struts-1

我在 Struts 1 中有这个功能：

```
/*
 * (non-Javadoc)
 * 
 * @see org.apache.struts.taglib.bean.WriteTag#doStartTag()
 */
public int doStartTag() throws JspException {

    Carac carac = (Carac) TagUtils.getInstance().lookup(pageContext, name, property, scope);
    // Code here
    return SKIP_BODY;
} 
```

我正在尝试在 Struts 2 中创建相同的标签，但不知道这样做的目的是什么：

```
TagUtils.getInstance().lookup() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:05:53.967

我找到了一个解决方案，将我的对象从视图中获取到 struts 2 中的标签：

我的标签：

```
<%@ taglib uri="wells/taglib/produit" prefix="produit"%>

         <produit:produitPhoto prod="row" /> 
```

以下是如何获得它：

```
 getStack().findValue(this.prod, Produit.class); // return Object Produit 
```

参考：[类 TagUtils](http://struts.apache.org/maven/struts2-core/apidocs/org/apache/struts2/views/jsp/TagUtils.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:15:03.063

Precisely what [the documentation](http://struts.apache.org/1.x/apidocs/org/apache/struts/taglib/TagUtils.html#lookup%28javax.servlet.jsp.PageContext,%20java.lang.String,%20java.lang.String,%20java.lang.String%29) says: it returns the named bean's property from the provided scope.

# python - 将数据导入python调试器并以交互方式编写python程序

> ID：14056723
> 
> 赞同：0
> 
> 时间：2012-12-27T15:04:11.520
> 
> 标签：python, linux

假设您有一个包含 LETTER,NUMBER 逗号分隔标记的大文件。您想编写一个从标准输入读取并为每行打印出 NUMBER+1 的程序。很琐碎的程序，我明白了。但是，这是一个限制——您只能在管道中一次性读取此标准，并且您必须从编写一个空文件开始。

例如：

猫文件.csv | python empty_program.py

这应该会弹出一个交互式会话，允许您编写任何您想要的代码。由于 empty_program.py 没有调用 stdin.readline()，所以 stdin 缓冲区是适当的。

这样的事情可能吗？

可以做到这一点的一个例子是 Excel VBA 调试器/IDE。它允许您暂停执行——在程序源代码中添加新行并继续执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:44:41.697

`cat FILE.csv | python empty_program.py` 好吧，python 将尝试读取“empty_program.py”，并且在其中找不到任何内容，假设有文件，然后退出。如果该文件不存在，则会出现错误。我对其进行了测试[您也应该能够做到这一点，并不需要太多的努力-可能比去 SO 写问题所需的要少得多]。

所以，我的下一个想法是使用交互式 python 进程，但由于你是通过标准输入输入东西，它不会工作 - 我没有一个好的 csv 文件，所以我做了“cat somefile.c|python”，并且在“int main()”处出现“无效语法”。我很惊讶它会走到这一步，但我想这是因为#include 被视为评论。

大多数交互式编程语言都是从标准输入读取的，所以你不能用它们中的任何一个来做你所描述的事情。

我不确定你为什么要这样做。如果你的第一个程序可以产生相关的程序代码，你为什么不把它放在一个文件中让 python 读取那个文件......而不是跳过箍？请注意，IDE 与命令行程序不同。我很确定，如果您在某件事上足够努力，您可以编写一个 C 程序来使用 Python 插件访问 Eclipse IDE。但这真的很难。为什么有人愿意花这么多精力来实现这么少，我不明白。

对不起，但我真的不明白你想要做什么 - 我相信你有一些好主意，但我确信需要处理实施细节。

# objective-c - 适用于 iOS 的多媒体 PDF 查看器

> ID：14056724
> 
> 赞同：1
> 
> 时间：2012-12-27T15:04:21.997
> 
> 标签：objective-c, ios, pdf, multimedia, pdf-viewer

我想实现一个查看 PDF 文件的 iOS 应用程序。我之前在其他一些应用程序中使用[过 vfr/Reader](https://github.com/vfr/Reader)。但现在我需要在 iOS 上显示支持多媒体的 PDF 文件，包括视频、动画等。我的客户使用 InDesign 创建这些 PDF。

我进行了一项研究，但找不到合适的基于 iOS 的框架来实现这一目标。Adobe、FastPDFKit 等解决方案的数量确实有限，但它们非常昂贵，而且没有“一次性费用”选项。

您有任何开源建议或价格较低的建议吗？

编辑：进行了几天和几天的研究，但没有解决方案。是否有任何其他工具可以创建交互式电子书或杂志？可能是 HTML5 或带有编辑器本身的东西？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:33:14.137

我之前使用[过 QLPreviewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)打开本地 PDF 文件，它工作得很好，实现起来也不难——而且它支持多个文档。

这是我遵循的一个很好的教程：http: [//mobiledevelopertips.com/data-file-management/preview-documents-with-qlpreviewcontroller.html](http://mobiledevelopertips.com/data-file-management/preview-documents-with-qlpreviewcontroller.html)

我没有测试过观看视频或任何东西——我拥有的 PDF 很简单。但它是 Apple 控件，具有所有基本的 PDF 查看功能，如捏缩放，但就像我说的我的 PDF 只有文本，但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T15:58:44.717

经过长时间的研究和讨论，遗憾的是没有具有这些功能的免费解决方案。只有付费解决方案，Adobe Publishing Suite 占据了主导地位，尽管它是最昂贵的解决方案之一

# asp.net-mvc - 如何为除 MVC3 中的一个特殊 URL 之外的所有 URL 运行自定义路由

> ID：14056725
> 
> 赞同：2
> 
> 时间：2012-12-27T15:04:23.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我已经为某些 URL 做了一些 URL 路由。

```
routes.MapRoute(
                "ProductDetails",
                "Product/{name}/{*other}",
                new { controller = "Product", action = "Details" }
            ); 
```

上面的代码会将所有类型的 url 路由`/Product/{name}`到`/Product/Details/{parameter}`. 它工作正常，现在我希望如果我输入 url `/Product/List`，这必须通过默认路由处理。

而且我不想再为 List 创建一条路线。

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:09:40.480

为参数添加约束`name`（不等于列表）：

```
routes.MapRoute(
    name: "ProductDetails",
    url: "Product/{name}/{*other}",
    defaults: new { controller = "Product", action = "Details" },
    constraints: new { name = "^(?!List$).*$" }
); 
```

此路由将不匹配`/Product/List`url

*如果您还想排除其他名称，请*更新：*`^(?!(List|Foo|Bar)$).*$`*

# ruby-on-rails - 通过 Graph/FQ 获得洞察力：如仪表板中

> ID：14056726
> 
> 赞同：1
> 
> 时间：2012-12-27T15:04:28.990
> 
> 标签：ruby-on-rails, facebook-graph-api, facebook-fql

我正在尝试导入见解仪表板流量 > 流发布上显示的 FB 见解。已发布的故事，可用（我猜是 application_stream_stories）故事印象，我似乎在 de docs 中找不到。故事点击，我似乎也找不到这个。

有谁知道在哪里看/尝试什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:33:15.717

您可以在明天成功部署后找到它们

# sql - 如何提高类似sqlite的语句性能

> ID：14056731
> 
> 赞同：10
> 
> 时间：2012-12-27T15:04:44.423
> 
> 标签：sql, performance, sqlite, sql-like

我创建一个表使用这样的模式：

```
CREATE TABLE wordIndex(id integer primary key, word varchar(128), offset integer, length integer);
CREATE INDEX word_idx on wordIndex(word); 
```

现在表有大约 450,000 行记录。当我在 ipod4 上使用下面的 Like 语句时，性能不好： select * from wordIndex where word like 'test acces%'; 使用解释输出：

```
explain select * from wordIndex where word like 'test acces%';
0|Trace|0|0|0||00|
1|Goto|0|16|0||00|
2|OpenRead|0|2|0|4|00|
3|Rewind|0|14|0||00|
4|String8|0|2|0|test acces%|00|
5|Column|0|1|3||00|
6|Function|1|2|1|like(2)|02|
7|IfNot|1|13|1||00|
8|Rowid|0|4|0||00|
9|Column|0|1|5||00|
10|Column|0|2|6||00|
11|Column|0|3|7||00|
12|ResultRow|4|4|0||00|
13|Next|0|4|0||01|
14|Close|0|0|0||00|
15|Halt|0|0|0||00|
16|Transaction|0|0|0||00|
17|VerifyCookie|0|2|0||00|
18|TableLock|0|2|0|wordIndex|00|
19|Goto|0|2|0||00| 
```

可能我需要建立一个额外的倒排索引来提高性能还是......？提前谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T15:11:58.077

索引`like`在大多数数据库中并不一致。最好的办法是尽可能将查询重写为范围查询，因为随后将使用索引：

```
select *
from wordIndex
where word between 'test acces' and 'test acces{' 
```

（左大括号是紧跟在“z”之后的 ASCII 字符。）

如果您正在寻找单词开头的模式（例如“%test”），那么您可能不得不让自己接受全表扫描。

编辑：

如今，当模式以常量开头时，大多数数据库中的索引和`like`*do` 都可以相处，因此您可以这样做：

```
select *
from wordIndex
where word like 'test acces%' ; 
```

不过，我不是 100% 确定 SQLite，所以请检查执行计划以查看它是否使用索引。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T15:16:37.593

Try this:

```
SELECT * FROM wordIndex
WHERE word COLLATE NOCASE BETWEEN @SearchString AND @SearchString || '~~~~~~~~~~' 
```

"~" is the biggest ASCII symbol.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T13:13:13.527

I will have a slightly different answer than Gordon Linoff, but with the same approach.

If you want to keep any characters that follow 'test acces' you should try this:

```
SELECT * FROM wordIndex
WHERE word > 'test acces' AND word < 'test accet'; 
```

# ruby-on-rails - Uuid 和 Redis

> ID：14056738
> 
> 赞同：3
> 
> 时间：2012-12-27T15:05:16.870
> 
> 标签：ruby-on-rails, performance, redis, uuid

Antirez 在这篇文章中详细讨论了使用哈希进行内存优化 - [http://redis.io/topics/memory-optimization](http://redis.io/topics/memory-optimization)

我有一个正在生产的应用程序，它有大约 50 个实体（表）和几百万个 uuid，它们结合了各种实体。我希望大量利用 Redis 的 Sorted Set、Lists 和 Hashes。

从内存和性能的角度来看，如果有的话，将 uuids/guids 作为 redis 键（以及集合和列表的成员）有什么影响？

我使用 postgre 作为另一个数据存储和 rails 3.2.9 和 ruby​​ 1.9.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T16:36:21.330

如果您使用排序集、列表和散列，则没有特定含义。

您可以将 uuid 存储为字符串，例如：

```
 110E8400-E29B-11D4-A716-446655440000 
```

在这种情况下，每个值将占用 38 个字节。如果您不关心存储人类可读的值，您可能更喜欢利用 Redis 存储二进制数据（键和值）的能力，并将 uuid 仅存储为 16 个字节。

您的短列表、排序集和哈希将按照 Redis 文档中的说明进行序列化。您可能需要调整以下参数以根据您的工作负载调整 Redis 行为：

```
# Hashes are encoded using a memory efficient data structure when they have a
# small number of entries, and the biggest entry does not exceed a given
# threshold. These thresholds can be configured using the following directives.
hash-max-ziplist-entries 512
hash-max-ziplist-value 64

# Similarly to hashes, small lists are also encoded in a special way in order
# to save a lot of space. The special representation is only used when
# you are under the following limits:
list-max-ziplist-entries 512
list-max-ziplist-value 64

# Sets have a special encoding in just one case: when a set is composed
# of just strings that happens to be integers in radix 10 in the range
# of 64 bit signed integers.
# The following configuration setting sets the limit in the size of the
# set in order to use this special memory saving encoding.
set-max-intset-entries 512

# Similarly to hashes and lists, sorted sets are also specially encoded in
# order to save a lot of space. This encoding is only used when the length and
# elements of a sorted set are below the following limits:
zset-max-ziplist-entries 128
zset-max-ziplist-value 64 
```

现在，如果您打算使用集合（简单集合，而不是排序集合），则有一个称为 intset 的特定优化，如果您使用 UUID 作为键，您将无法从中受益。一个 intset 只能用于编码 64 位数字，因此 16 字节 UUID 不适合。如果您计划存储大量集合，则添加间接寻址可能会有好处，并使用整数作为主键而不是 UUID。否则毫无意义。

# z3 - 通过近似的非线性整数算术的可满足性检查

> ID：14056742
> 
> 赞同：2
> 
> 时间：2012-12-27T15:05:24.873
> 
> 标签：z3

是否可以要求 Z3 通过用线性不等式系统逼近原始系统来证明具有 2 个不同变量（或一般情况下）的整数多项式不等式系统的可满足性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:40:49.750

默认情况下，Z3 将尝试将非线性整数问题作为线性问题求解。基本技巧是处理非线性项，例如`x*y`新的“变量”。Z3 不太支持非线性整数运算，下面的帖子总结了 Z3 如何处理非线性整数运算：

*   [Z3 如何处理非线性整数运算？](https://stackoverflow.com/questions/13898175/how-does-z3-handle-non-linear-integer-arithmetic)

# ruby-on-rails - 在 Rails rake 任务中将字符串转换为模型

> ID：14056747
> 
> 赞同：2
> 
> 时间：2012-12-27T15:05:45.810
> 
> 标签：ruby-on-rails

我正在尝试在我的所有 Rails 模型上运行快速 rake 任务，但无法调用它们，因为这段代码告诉我不能`columns`在字符串上调用该方法。

我尝试`classify`了而不是`camelize`它也没有工作，也尝试在其中插入 a `class_eval`，但这似乎在这里不起作用/不太了解它。

```
task :collect_models_and_field_names => :environment do

models = Dir.glob("#{models_path}/*").map do |m|
  m.capitalize.camelize.columns.each { |n| puts n.name }
end 
```

我确实知道这行得通，所以如果需要，我可以手动访问模型，但我真的不想这样做......

```
 Model.columns.each { |c| puts c.name } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:21:30.587

尝试

```
Kernel.const_get(m.classify).columns 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:34:59.333

`classify`只需将字符串更改为看起来像一个类——即大写字母和驼峰式单数。

在使用`classify`使字符串看起来像一个类/模型之后，您需要使用`constantize`，它实际上获取字符串并将其转换为一个类。

请参阅： [http ://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:26:30.730

你可以使用这样的东西：

```
models = Dir[Rails.root.join("app", "models", "*.rb")].map do |m|
  model = File.basename(m, ".rb").classify.constantize
  model.columns.each { |n| puts n.name }
end 
```

# sql - sql server 查询不工作

> ID：14056753
> 
> 赞同：-6
> 
> 时间：2012-12-27T15:06:09.187
> 
> 标签：sql, sql-server

您好，我来自 Oracle 世界，我在 SQL Server 方面没有太多经验。有人能告诉我为什么这个查询的内部部分不起作用吗？我尝试了不同的选项，但它们似乎都不起作用：

```
select EventType, sum(Executed), sum(TriggeredScenarios), sum(OpenAlerts),sum(TotalAlerts)
from (
      select id, 
            'myEvent' as [EventType],
             TriggeredScenarios,
             Executed,
                  TotalAlerts = (select sum(cnt) as [TotalCount] 
                                             -- it breaks from here 
                                             from (select count(*) as [cnt]
                                                            from [myAlert1] aa, [Alert] bb
                                                            where aa.EventType = EventType
                                                              and aa.EventId = id
                                                              and aa.AlertId = bb.id 
                                                              and bb.DetectionAlertType = 'myAlert1'
                                            -- until here 
                                            UNION 
                                            select count(*) as [cnt]
                                                            from [myAlert2] aa, [Alert] bb
                                                            where aa.EventType = EventType
                                                              and aa.EventId = id
                                                              and aa.AlertId = bb.id 
                                                              and bb.DetectionAlertType = 'myAlert2'
                                                      ) aa),
             OpenAlerts = (select sum(cnt) as [TotalAlerts] 
                                          from ( select count(*) as [cnt]
                                                      from [Alert] aa, [myAlert1] bb
                                                where aa.currentstateid not in (select intStateID 
                                                                                                   from _AlertStates 
                                                                                                   where strGroupName like (N'AlertsClosed%')
                                                                                                )
                                                      and bb.EventType = EventType
                                                and bb.EventId = id
                                                      and bb.AlertId = aa.id
                                                      and aa.DetectionAlertType = 'myAlert1' 
                                             UNION 
                                             select count(*) as [cnt]
                                                      from [Alert] aa, [myAlert2] bb
                                                where aa.currentstateid not in (select intStateID 
                                                                                                   from _AlertStates 
                                                                                                   where strGroupName like (N'AlertsClosed%')
                                                                                                )
                                                      and bb.EventType = EventType
                                                and bb.EventId = id
                                                      and bb.AlertId = aa.id
                                                      and aa.DetectionAlertType = 'myAlert2' 
                                                ) aa )              
         from [myEvent]
         where [Timestamp] >= '11/26/2012'
           AND [Timestamp] <  '11/27/2012'
      UNION
      select id, 
                  'myEvent2' as [EventType],
             TriggeredScenarios,
             Executed,
                  TotalAlerts = (select sum(cnt) as [TotalCount] 
                                             from (select count(*) as [cnt]
                                                            from [myAlert1] aa, [Alert] bb
                                                            where aa.EventType = EventType
                                                              and aa.EventId = id
                                                              and aa.AlertId = bb.id 
                                                              and bb.DetectionAlertType = 'myAlert1'
                                            UNION 
                                            select count(*) as [cnt]
                                                            from [myAlert2] aa, [Alert] bb
                                                            where aa.EventType = EventType
                                                              and aa.EventId = id
                                                              and aa.AlertId = bb.id 
                                                              and bb.DetectionAlertType = 'myAlert2'
                                                      ) aa),
             OpenAlerts = (select sum(cnt) as [TotalAlerts] 
                                          from ( select count(*) as [cnt]
                                                      from [Alert] aa, [myAlert1] bb
                                                where aa.currentstateid not in (select intStateID 
                                                                                                   from _AlertStates 
                                                                                                   where strGroupName like (N'AlertsClosed%')
                                                                                                )
                                                      and bb.EventType = EventType
                                                and bb.EventId = id
                                                      and bb.AlertId = aa.id
                                                      and aa.DetectionAlertType = 'myAlert1' 
                                             UNION 
                                             select count(*) as [cnt]
                                                      from [Alert] aa, [myAlert2] bb
                                                where aa.currentstateid not in (select intStateID 
                                                                                                   from _AlertStates 
                                                                                                   where strGroupName like (N'AlertsClosed%')
                                                                                                )
                                                      and bb.EventType = EventType
                                                      and bb.EventId = id
                                                      and bb.AlertId = aa.id
                                                      and aa.DetectionAlertType = 'myAlert2' 
                                                ) aa )              
         from [myEvent2]
         where [Timestamp] >= '11/26/2012'
           AND [Timestamp] <  '11/27/2012'
            )
group by EventName 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:19:19.010

这是您标记为不工作的部分：

```
select count(*) as [cnt]
from [myAlert1] aa, [Alert] bb
where aa.EventType = EventType and
      aa.EventId = id and
      aa.AlertId = bb.id and
      bb.DetectionAlertType = 'myAlert1' 
```

首先，将连接条件放在子句而不是子句中是*非常*糟糕的形式。因此，让我将其重写为：`where``on`

```
select count(*) as [cnt]
from [myAlert1] aa join
     [Alert] bb
     on aa.AlertId = bb.id
where aa.EventType = EventType and
      aa.EventId = id and
      bb.DetectionAlertType = 'myAlert1' 
```

如所写，这被“解释”为：

```
select count(*) as [cnt]
from [myAlert1] aa join
     [Alert] bb
     on aa.AlertId = bb.id
where aa.EventType = aa.EventType and  -- because there is no bb.EventType
      aa.EventId = bb.id and           -- because there is no aa.id
      bb.DetectionAlertType = 'myAlert1' 
```

EventId 和 bb.Id 之间的链接可能会阻止返回任何行——或者至少，您会得到更少的行。

我怀疑`EventType`并且`id`打算成为 PL/SQL 变量。如果是这样，这些将被写成：

```
select count(*) as [cnt]
from [myAlert1] aa join
     [Alert] bb
     on aa.AlertId = bb.id
where aa.EventType = @EventType and
      aa.EventId = @id and
      bb.DetectionAlertType = 'myAlert1' 
```

# java - 从Java中的视频/视频文件中提取/提取图像/图像序列的最佳方法

> ID：14056754
> 
> 赞同：6
> 
> 时间：2012-12-27T15:06:16.533
> 
> 标签：java, image, video, ffmpeg, sequence

好吧，有 FFMPEG 和一些 Java 绑定和包装器，但我需要为每个特定平台分发正确的 FFMPEG 二进制文件。

是否有任何没有任何依赖关系的普通 Java 解决方案或库，例如用于将视频文件转换为图像序列的 FFMPEG？

FFMPEG、XUGGLER 或 JMF（已废弃）等解决方案不适用。真的没有纯Java解决方案吗？

也许至少对于特定的视频编解码器/文件？

我只想将视频文件中的图像提取为 jpeg / png 文件并将它们保存到磁盘

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:44:50.937

> [从视频流中提取图像] 真的没有纯 Java 解决方案吗？

让我们来看看。你必须：

*   解码视频。
*   至少以每秒 24 张图像的速度呈现解码图像。我想你可以跳过这一步。
*   保存解码的图像。

看来解码视频将是最具挑战性的一步。人们和公司花费数年时间为各种视频格式开发编解码器（编码器/解码器）。

SourceForge 上有一个项目，它[是 ffmpeg 的 JMF 包装器](http://sourceforge.net/projects/jffmpeg/)，它开发了一些纯 Java 视频编解码器。也许您可以查看他们的源代码并了解如何为自己开发 Java 视频编解码器。

如果您愿意，可以寻找其他纯 Java 视频编解码器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T03:12:00.993

以下编解码器有纯 Java 实现：H.264 (AVC)、MPEG 1/2、Apple ProRes、JPEG；以及以下文件格式：MP4（ISO BMF、QuickTime）、Matroska、MPEG PS 和 MPEG TS。
该库称为 JCodec ( [http://www.jcodec.org](http://www.jcodec.org) )。
目前它的文档很少，但开发团队一直在努力解决这个问题。
以下是您如何简单地从 MP4 文件中获取帧的方法（示例来自他们的网站）：

```
int frameNumber = 150;
BufferedImage frame = FrameGrab.getFrame(new File("filename.mp4"), frameNumber);
ImageIO.write(frame, "png", new File("frame_150.png")); 
```

要将 JCodec 添加到您的项目中，您只需将以下内容添加到您的 pom.xml 中：

```
<dependency>
    <groupId>org.jcodec</groupId>
    <artifactId>jcodec</artifactId>
    <version>0.1.3</version>
</dependency> 
```

有关**最新**版本，请参见[此处](https://github.com/jcodec/jcodec#getting-started)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-20T04:13:45.613

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.concurrent.ExecutionException;

import javax.imageio.ImageIO;

import org.bytedeco.javacpp.opencv_core.IplImage;
import org.bytedeco.javacv.FFmpegFrameGrabber;
import org.bytedeco.javacv.FrameGrabber.Exception;

public class Read{

    public static void main(String []args) throws IOException, Exception, InterruptedException, ExecutionException
    {
        FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber("C:/Users/Digilog/Downloads/Test.mp4");
        frameGrabber.start();
        IplImage i;
        try {
            for(int ii=0;ii<frameGrabber.getLengthInFrames();ii++){

            i = frameGrabber.grab();
            BufferedImage  bi = i.getBufferedImage();
            String path = "D:/Image/Image"+ii+".png";
            ImageIO.write(bi,"png", new File(path));

            }
            frameGrabber.stop();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

# html - 导航栏，最后一个 li 不与其他内容对齐，我不能使用导航栏的最后大约 50px？

> ID：14056760
> 
> 赞同：1
> 
> 时间：2012-12-27T15:06:53.863
> 
> 标签：html, css, navigation, html-lists

我的网站顶部有一个导航栏，但由于某种原因，最后一个“li”（联系人）没有与其他按钮对齐，并且在最后一个“li”之后有某种填充，我没有编码很奇怪。任何人都可以快速浏览一下吗？

**HTML**

```
<div class="menu">

                <nav>
                    <ul class="sf-menu">
                        <li><a href="index.html"class="current">Home<em>start here</em></a></li>
                        <li><a href="History.html">History<em>our legacy</em></a></li>
                        <li><a href="index-2.html">Repertoire<em>our dances</em></a></li>
                        <li><a href="index-3.html">Members<em>our dancers</em></a></li>
                        <li><a href="index-4.html">Join us<em>come &amp; learn</em></a></li>
                        <li><a href="Contact.html">contact<em>reach us</em></a></li>
                    </ul>
                </nav>
        </div> 
```

**CSS**

```
.menu {
    background:url(images/nav-bg.png) top center no-repeat;
    height:116px;   
    margin:0px 0 0px 0;
}
#page1 .menu {
    margin-top:-188px;
}
nav {
    padding:0px 0 0 0;
}

.sf-menu {
    margin:         0;
    padding:        0;
    list-style:     none;
    width:100%;
    background:none;
    position:relative;
    z-index:50
}
.sf-menu li {
    float:left;
    font-size:1.3333em;
    line-height:1.2307em;
    text-transform:uppercase;
    position:relative;
    padding:0 10px 0 0
}
.sf-menu .last {
    padding-right:0;
}

    .sf-menu li a {
        text-decoration:none;
        display:inline-block;
        zoom:1;
        position:relative;
        z-index:20;
        color:#000;
        text-align:center;
        padding:50px 26px 33px 26px;
        font-family: 'Cantarell', arial, serif;
}
    .sf-menu li a em {
        color:#9f9f9f;
        font-size:0.5625em;
        line-height:1.2307em;
        display:block;
    }

.sf-menu ul {
    position:absolute;
    width: 185px;
    border:none;
    padding:10px 0 10px 0px;
    background:#1c1c1c;
    border-radius:6px;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;

}

    .sf-menu li a:hover {
        background:url(images/nav-hover.png) left top repeat-x;
        color:#fff;
    }
    .sf-menu .current {
        border-radius:6px 6px 0 0;
        -moz-border-radius:6px 6px 0 0;
        -webkit-border-radius:6px 6px 0 0;
        position: relative;
        background:url(images/nav-current.gif) left top repeat-x;
    }
        .sf-menu li .current:hover {
            background:url(images/nav-current.gif) left top repeat-x;
            color:#000;
        }
            .sf-menu li .current:hover em {
                color:#9f9f9f;
            }
    .sf-menu li a:hover em {
        color:#fff;
    }

.sf-menu ul li {
    width:          100%;
}
.sf-menu li:hover {
    visibility:     inherit; /* fixes IE7 'sticky bug' */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T08:23:56.003

在您发布的代码示例中，浮动元素之后没有内容，这可能是一个问题；在您的菜单容器之后清除浮动。

```
.sf-menu:after {
  content:'';
  display:block;
  clear: both;
} 
```

* * *

此选择器当前不匹配任何内容：

```
.sf-menu ul {
  position:absolute;
  width: 185px;
  border:none;
  padding:10px 0 10px 0px;
  background:#1c1c1c;
  border-radius:6px;
  -moz-border-radius:6px;
  -webkit-border-radius:6px;
} 
```

您要选择`ul.sf-menu`吗？

* * *

您可能还想删除/修改最后一项的填充：

```
.sf-menu li:last-child {
  padding-right: 0;
}

.sf-menu li:last-child a {
  padding-right: 0;
} 
```

# android - 调用数据库时出现 NullPointerException

> ID：14056761
> 
> 赞同：0
> 
> 时间：2012-12-27T15:07:12.037
> 
> 标签：android, database, sqlite, list, nullpointerexception

正如标题所说，当我尝试从数据库中获取列表时，我得到了 NullPointerException。这是代码：

```
public List<String> getAllRockBands() {
     List<String> bandList = new ArrayList<String>();

     String selection = BAND_GENRE + "=1";

     SQLiteDatabase db = sqLiteHelper.getReadableDatabase();
     Cursor cursor = db.query(BANDDATABASE_TABLE,new String[]{BAND_NAME}, selection, null, null, null, BAND_NAME);

     int index = cursor.getColumnIndex(BAND_NAME);

     if (cursor.moveToFirst()) {
         do {
          String bandName = cursor.getString(index);
             bandList.add(bandName);
         } while (cursor.moveToNext());
     }

     return bandList;
 } 
```

`

```
public class RockAllFragment extends SherlockListFragment {

    private BandDatabaseAdapter mySQLiteAdapter;
    private List<String> bandList = mySQLiteAdapter.getAllRockBands();

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return inflater.inflate(R.layout.my_list, null);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onViewCreated(view, savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(getSherlockActivity(), android.R.layout.simple_list_item_multiple_choice, android.R.id.text1, bandList));
    }
} 
```

我仍在这种环境中学习编码，所以我想这只是一些初学者的错误？

**编辑：（**有点多，但你问了）

```
public class BandDatabaseAdapter {

 private static final String TAG = "BandDatabase";

 private static final String BANDDATABASE_NAME = "BAND_DATABASE";
 private static final String BANDDATABASE_TABLE = "BAND_TABLE";
 private static final int BANDDATABASE_VERSION = 1;
 public static final String BAND_NAME = "name";
 public static final String BAND_GENRE = "genre";
 public static final String BAND_POPULAR = "popular";
 public static final String BAND_SELECTED = "selected";

 private static final String BANDDATABASE_CREATE="CREATE TABLE IF NOT EXISTS " + BANDDATABASE_TABLE
 + " (_id integer primary key autoincrement, " + BAND_NAME
 + " TEXT NOT NULL, " + BAND_GENRE + " TEXT NOT NULL, " + BAND_POPULAR
 + " TEXT NOT NULL, " + BAND_SELECTED + " TEXT NOT NULL)";

 private SQLiteHelper sqLiteHelper;
 private SQLiteDatabase sqLiteDatabase;
 private final Context context;

 public BandDatabaseAdapter(Context c) {
       sqLiteHelper = new SQLiteHelper(c, BANDDATABASE_NAME, null, BANDDATABASE_VERSION);
       context = c;
    }

 public BandDatabaseAdapter openToRead() throws android.database.SQLException {
  sqLiteDatabase = sqLiteHelper.getReadableDatabase();
  return this; 
 }

 public BandDatabaseAdapter openToWrite() throws android.database.SQLException {
  sqLiteDatabase = sqLiteHelper.getWritableDatabase();
  return this; 
 }

 public void close(){
  sqLiteHelper.close();
 }

 public void updateBand(String name, String selected) {
     ContentValues contentValues = new ContentValues();
     contentValues.put(BAND_SELECTED, selected);
     sqLiteDatabase.update(BANDDATABASE_TABLE, contentValues, "BAND_NAME=" + name, null);
     close();
 }

 public List<String> getAllRockBands() {
     List<String> bandList = new ArrayList<String>();

     String selection = BAND_GENRE + "=1";

     SQLiteDatabase db = sqLiteHelper.getReadableDatabase();
     Cursor cursor = db.query(BANDDATABASE_TABLE,new String[]{BAND_NAME}, selection, null, null, null, BAND_NAME);

     if(cursor!=null)
     {
     int index = cursor.getColumnIndex(BAND_NAME);

     if (cursor.moveToFirst()) {
         do {
          String bandName = cursor.getString(index);
             bandList.add(bandName);
         } while (cursor.moveToNext());
     }
     }
     return bandList;
 }

 public List<String> getMyList() {
     List<String> myList = new ArrayList<String>();

     String selection = BAND_SELECTED + "=1";

     SQLiteDatabase db = sqLiteHelper.getReadableDatabase();
     Cursor cursor = db.query(BANDDATABASE_TABLE,new String[]{BAND_NAME}, selection, null, null, null, BAND_NAME);

     int index = cursor.getColumnIndex(BAND_NAME);

     if (cursor.moveToFirst()) {
         do {
          String bandName = cursor.getString(index);
             myList.add(bandName);
         } while (cursor.moveToNext());
     }

     return myList;
 }

 public class SQLiteHelper extends SQLiteOpenHelper {

  public SQLiteHelper(Context context, String name,
    CursorFactory factory, int version) {
   super(context, name, factory, version);
  }

  private boolean doesDatabaseExist(Context context, String dbName) {
        File dbFile=context.getDatabasePath(dbName);
        return dbFile.exists();
    }

  @Override
  public void onCreate(SQLiteDatabase db) {
   // TODO Auto-generated method stub
   if(!(doesDatabaseExist(context,BANDDATABASE_NAME)))
   {
      db.execSQL(BANDDATABASE_CREATE);
      loadDatabase();
   }
  }

  /**
   * Starts a thread to load the database table with bands
   */
  private void loadDatabase() {
      new Thread(new Runnable() {
          public void run() {
              try {
                  loadBands();
              } catch (IOException e) {
                  throw new RuntimeException(e);
              }
          }
      }).start();
  }

  //loads a database from a txt file
  private void loadBands() throws IOException {
      Log.d(TAG, "Loading bands...");
      final Resources resources = context.getResources();
      InputStream inputStream = resources.openRawResource(R.raw.bands);
      BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

      try {
          String line;
          while ((line = reader.readLine()) != null) {
              String[] strings = TextUtils.split(line, "^");
              if (strings.length < 4) continue;
              long id = addBand(strings[0].trim(), strings[1].trim(), strings[2].trim());
              if (id < 0) {
                  Log.e(TAG, "unable to add band: " + strings[0].trim());
              }
          }
      } finally {
          reader.close();
      }
      Log.d(TAG, "DONE loading words.");
  }

  public long addBand(String name, String genre, String popular) {
      ContentValues initialValues = new ContentValues();
      initialValues.put(BAND_NAME, name);
      initialValues.put(BAND_GENRE, genre);
      initialValues.put(BAND_POPULAR, popular);
      initialValues.put(BAND_SELECTED, "0");

      return sqLiteDatabase.insert(BANDDATABASE_TABLE, null, initialValues);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   // TODO Auto-generated method stub
    // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + BANDDATABASE_TABLE);

        // Create tables again
        onCreate(db);
  }

 }

} 
```

附加信息：有人告诉我使用 SimpleCursorAdapter，但它说它已被弃用。另外，请注意我的列表有超过 150k 行，如果需要，我会大大减少。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:10:56.683

看起来您在调用之前尚未创建 SqliteHelper 类对象`getAllRockBands()` 请检查一次，否则发布您的 SqliteHelper 类构造函数代码

在此处更改您的代码检查它。

```
public class RockAllFragment extends SherlockListFragment {

    private BandDatabaseAdapter mySQLiteAdapter;
    private List<String> bandList;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return inflater.inflate(R.layout.my_list, null);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onViewCreated(view, savedInstanceState);
    mySQLiteAdapter= new BandDatabaseAdapter(getSherlockActivity());
    bandList  = mySQLiteAdapter.getAllRockBands();

    setListAdapter(new ArrayAdapter<String>(getSherlockActivity(), android.R.layout.simple_list_item_multiple_choice, android.R.id.text1, bandList));
    }
} 
```

你得到 NullPointerException 因为你已经声明了 BandDatabaseAdapter 但没有创建它的实例。你需要创建它的实例然后调用它。在上面的代码中，我先创建了对象，然后调用。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:15:19.260

“选择”参数定义：

> 一个过滤器，声明要返回哪些行，格式化为 SQL WHERE 子句（不包括 WHERE 本身）。传递 null 将返回给定表的所有行。

在做之前：

```
int index = cursor.getColumnIndex(BAND_NAME); 
```

你应该检查光标是否为空。同样的事情：

```
if (cursor.moveToFirst()) 
```

# azure - 是否有 Bing 购物 API？

> ID：14056765
> 
> 赞同：5
> 
> 时间：2012-12-27T15:07:26.870
> 
> 标签：azure, bing-api

我尝试搜索 MS azure market 以找到 bing 购物 api 访问，但似乎没有找到，是否有或没有 bing 购物的 api 访问？

谢谢，米卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:02:11.120

Bing Shooping API 通过 shopping.com 直接维护和支持，但仍不是本文所述的 Windows Azure 数据市场的**[一部分](http://advertise.bingads.microsoft.com/en-us/search-advertising/bing-shopping)**。

[**请从此处**](http://advertise.bingads.microsoft.com/en-us/WWDocs/User/smb/en-us/BeyondSearch/Bing_Shopping_Integration_Guide.pdf)下载必应购物商家集成指南，您将了解如何将其集成到您的应用程序中，因为这提供了有关如何使用必应购物的分步详细信息。

如果您对使用 Bing 购物有任何疑问，请访问[**Bing 购物论坛页面**](http://community.bingads.microsoft.com/ads/en/api/f/31/t/68940.aspx)并提交您的问题以获得直接帮助。

# c# - 在重定向时保持 HTTP 基本身份验证活动

> ID：14056766
> 
> 赞同：7
> 
> 时间：2012-12-27T15:07:28.733
> 
> 标签：c#, web-services, http, http-headers, basic-authentication

我们正在使用具有基本身份验证的 Web 服务。一切都很好，直到 Web 服务的所有者实现了平衡服务。这只是将请求重定向到不同的 Web 服务实例。

问题是被重定向后基本身份验证失败。出现“请求身份验证凭据未通过”异常。

附加信息：

1.  我们必须手动创建请求。

    ```
     var req = (HttpWebRequest)WebRequest.CreateDefault(new Uri(Settings.Default.HpsmServiceAddress));

        req.Headers.Add("Authorization", "Basic aaaaaaaaaaa");
        req.PreAuthenticate = true;
        req.AuthenticationLevel = AuthenticationLevel.MutualAuthRequested;
        req.UserAgent = "Apache-HttpClient/4.1.1 (java 1.5)";
        req.KeepAlive = false;

        ServicePointManager.Expect100Continue = false;

        req.ContentType = "text/xml; charset=utf-8";
        req.Method = "POST";
        req.Accept = "gzip,deflate";
        req.Headers.Add("SOAPAction", actionName);
        byte[] buffer = Encoding.UTF8.GetBytes(envelop);
        Stream stm = req.GetRequestStream();
        stm.Write(buffer, 0, buffer.Length);
        stm.Close();

        WebResponse response = req.GetResponse();
        string strResponse = new StreamReader(response.GetResponseStream()).ReadToEnd();
        response.Dispose(); 
    ```

2.  我们使用 HTTP 307 重定向重定向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:22:55.823

按照 HttpWebRequest.AllowAutoRedirect 属性的 MSDN 我发现了这个：

> **Authorization 标头在自动重定向时被清除，**并且 HttpWebRequest 自动尝试重新验证到重定向的位置。实际上，这意味着如果可能遇到重定向，应用程序不能将自定义身份验证信息放入 Authorization 标头中。相反，应用程序必须实现并注册一个自定义身份验证模块。System.Net.AuthenticationManager 和相关类用于实现自定义身份验证模块。AuthenticationManager.Register 方法注册一个自定义身份验证模块。

解决方案是编写一个自定义的身份验证模块。

这是我发现的：

[http://msdn.microsoft.com/en-us/library/system.net.authenticationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.net.authenticationmanager.aspx)

这里是 AllowAutoRedirect 属性页面：

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)

## **更新**

您可以尝试使用 CredentialCache 而不是将标头添加到 webrequest 吗？

```
CredentialCache myCache = new CredentialCache();

myCache.Add(
new Uri("http://www.contoso.com/"),"Basic",new NetworkCredential(UserName,SecurelyStoredPassword));
req.Credentials = myCache; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-22T13:26:15.273

确实，`CredentialCache`工作正常。但是，如果您想添加多个基本身份验证凭据（例如，如果您知道重定向），您可以使用我制作的以下功能：

```
private void SetNetworkCredential(Uri uriPrefix, string authType, NetworkCredential credential)
{
    if (request.Credentials == null)
    {
        request.Credentials = new CredentialCache();
    }

    if (request.Credentials.GetCredential(uriPrefix, authType) == null)
    {
        (request.Credentials as CredentialCache).Add(uriPrefix, authType, credential);
    }
} 
```

我希望它会在未来对某人有所帮助。

# android - Android JNI：无法调用非Activity类中的函数

> ID：14056774
> 
> 赞同：2
> 
> 时间：2012-12-27T15:07:53.957
> 
> 标签：android, android-ndk, java-native-interface

我正在使用 jni，我可以从 c++ 类中调用常规活动中的 java 函数，但是当我尝试在非活动类中调用 java 函数时，我的代码不起作用。

我是说

```
 jclass activityclass = env->FindClass("com/example/test/MyActivity);
 jmethodID methodID = env->GetMethodID(activityclass,"FunctionName","()V");
 env ->CallVoidMethod(obj,methodID); 
```

这行得通。当我尝试从非活动常规 java 类中调用相同的函数（具有相同的名称）时，它不起作用。

```
 jclass regularclass = env->FindClass("com/example/test/MyRegularClass);
 jmethodID methodID = env->GetMethodID(regularclass ,"FunctionName","()V");
 env ->CallVoidMethod(obj,methodID); 
```

为什么我不能在非活动类中调用函数？我的错误是什么？

我的常规课程

```
public class MyRegularClass{

  public static void FunctionName(){
 Log.i("Java Worked","Java Worked");
 }
} 
```

我的活动课程

```
 public class MyActivity{

 system.load.library("mylib");

 @Override
 public void onCreate(Bundle savedInstanceState){
 ....
 ....
 testJNI();
 }

  public static void FunctionName(){
 Log.i("Activity Worked","Activity  Worked");
 }

 public native void testJNI();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:37:48.477

您需要使用`GetStaticMethodID()`and`CallStaticVoidMethod()`用于静态方法。这与是否在活动中的方法无关。

# java - 从 USB 调制解调器访问 SMS 以上传到 Android 应用程序

> ID：14056775
> 
> 赞同：0
> 
> 时间：2012-12-27T15:07:54.657
> 
> 标签：java, php, android, c, sms

我正在开发一个可以监控洪水高度的 Android 应用程序。将使用的数据来自将由 USB 调制解调器接收的 SMS 消息。SMS 中的数据随后将上传到 Internet 服务器或 FTP。此数据将由 Android 应用程序下载。我的问题是如何从 USB 调制解调器访问此 SMS。我非常熟悉 C、PHP 和其他 Web 相关语言。关于使用什么语言来访问 SMS 有什么建议吗？谢谢。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:21:25.093

我不确定使用 USB 调制解调器接收短信是否会是您的最佳选择。看到您熟悉 php 和其他 Web 语言，您是否考虑过尝试[Twilio SMS API](http://www.twilio.com/sms/api)？

# javascript - 如何在内容页面、asp.net 中使用 javascript

> ID：14056777
> 
> 赞同：3
> 
> 时间：2012-12-27T15:08:17.557
> 
> 标签：javascript, jquery, asp.net

我从教程中得到了一个 jQuery 示例代码，它甚至是一个 webform 示例。

当我将它集成到我的项目并在内容页面中使用它时，JavaScript 不起作用。

这是我的母版页代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs" Inherits="WebApplication2.Site1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

这是我的内容页面代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true"
CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication2.WebForm1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<!-- from http://encosia.com/2009/10/11/do-you-know-about-this-undocumented-google-cdn-feature/ -->
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/start/jquery-ui.css"
    type="text/css" rel="Stylesheet" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="<%= ResolveUrl("~")%>Scripts/jquery.blockUI.js"></script>
<script type="text/javascript" src="<%= ResolveUrl("~") %>Scripts/ScriptFile.js"></script>
<!-- fix for 1.1em default font size in Jquery UI -->
<style type="text/css">
    .ui-widget
    {
        font-size: 11px !important;
    }
    .ui-state-error-text
    {
        margin-left: 10px;
    }
</style>
<script type="text/javascript">
    $(document).ready(function() {
        $("#divEditCustomer").dialog({
            autoOpen: false,
            modal: true,
            minHeight: 20,
            height: 'auto',
            width: 'auto',
            resizable: false,
            open: function(event, ui) {
                $(this).parent().appendTo("#divEditCustomerDlgContainer");
            },
        });
    });

    function closeDialog() {
        //Could cause an infinite loop because of "on close handling"
        $("#divEditCustomer").dialog('close');
    }

    function openDialog(title, linkID) {

        var pos = $("#" + linkID).position();
        var top = pos.top;
        var left = pos.left + $("#" + linkID).width() + 10;

        $("#divEditCustomer").dialog("option", "title", title);
        $("#divEditCustomer").dialog("option", "position", [left, top]);

        $("#divEditCustomer").dialog('open');
    }

    function openDialogAndBlock(title, linkID) {
        openDialog(title, linkID);

        //block it to clean out the data
        $("#divEditCustomer").block({
            message: '<img src="<%=ResolveUrl("~") %>content/images/async.gif" />',
            css: { border: '0px' },
            fadeIn: 0,
            //fadeOut: 0,
            overlayCSS: { backgroundColor: '#ffffff', opacity: 1 } 
        });
    }

    function unblockDialog() {
        $("#divEditCustomer").unblock();
    }

    function onTest() {
        $("#divEditCustomer").block({
            message: '<h1>Processing</h1>',
            css: { border: '3px solid #a00' },
            overlayCSS: { backgroundColor: '#ffffff', opacity: 1 } 
        });
    }
</script>
<asp:ScriptManager ID="scriptManager" runat="server" />
<h1>
    Customers</h1>
<div id="divEditCustomerDlgContainer">
    <div id="divEditCustomer" style="display: none">
        <asp:UpdatePanel ID="upnlEditCustomer" runat="server">
            <ContentTemplate>
                <asp:PlaceHolder ID="phrEditCustomer" runat="server">
                    <table cellpadding="3" cellspacing="1">
                        <tr>
                            <td>
                                *First Name:
                            </td>
                            <td>
                                <asp:TextBox ID="txtFirstName" Columns="40" MaxLength="50" runat="server" />
                                <asp:RequiredFieldValidator ID="vtxtFirstName" runat="server" EnableClientScript="false"
                                    CssClass="ui-state-error-text" Display="Dynamic" ErrorMessage="Required." ControlToValidate="txtFirstName" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                *Last Name:
                            </td>
                            <td>
                                <asp:TextBox ID="txtLastName" Columns="40" MaxLength="50" runat="server" />
                                <asp:RequiredFieldValidator ID="vtxtLastName" runat="server" EnableClientScript="false"
                                    CssClass="ui-state-error-text" Display="Dynamic" ErrorMessage="Required." ControlToValidate="txtLastName" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                *Email:
                            </td>
                            <td>
                                <asp:TextBox ID="txtEmail" Columns="40" MaxLength="50" runat="server" />
                                <asp:RequiredFieldValidator ID="vtxtEmail" runat="server" EnableClientScript="false"
                                    CssClass="ui-state-error-text" Display="Dynamic" ErrorMessage="Required." ControlToValidate="txtEmail" />
                                <asp:RegularExpressionValidator ID="vtxtEmail2" runat="server" EnableClientScript="false"
                                    CssClass="ui-state-error-text" ControlToValidate="txtEmail" ValidationExpression=".*@.*\..*"
                                    ErrorMessage="Not a valid email." Display="Dynamic" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Phone:
                            </td>
                            <td>
                                <asp:TextBox ID="txtPhone" Columns="20" MaxLength="20" runat="server" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Date of Birth:
                            </td>
                            <td>
                                <asp:TextBox ID="txtDateOfBirth" Columns="10" MaxLength="20" runat="server" />
                                <asp:CompareValidator ID="vtxtDateOfBirth" runat="server" EnableClientScript="false"
                                    CssClass="ui-state-error-text" ControlToValidate="txtDateOfBirth" ErrorMessage="Not a valid date."
                                    Operator="DataTypeCheck" Type="Date" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" align="right">
                                <asp:Button ID="btnSave" OnClick="btnSave_Click" Text="Save" runat="server" />
                                <asp:Button ID="btnCancel" OnClick="btnCancel_Click" OnClientClick="closeDialog()"
                                    CausesValidation="false" Text="Cancel" runat="server" />
                            </td>
                        </tr>
                    </table>
                </asp:PlaceHolder>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</div>
<!-- divEditCustomerDlgContainer -->
<!--
    <br /><br />
    <input type="button" id="btnTest" onclick="onTest" value="Test" />
    <br /><br />
    -->
<asp:UpdatePanel ID="upnlCustomers" UpdateMode="Conditional" runat="server">
    <ContentTemplate>
        <asp:LinkButton ID="btnAddCustomer" Text="Add Customer" runat="server" OnClientClick="openDialogAndBlock('Add Customer', 'btnAddCustomer')"
            CausesValidation="false" OnClick="btnAddCustomer_Click"></asp:LinkButton>
        <br />
        <br />
        <asp:GridView ID="gvCustomers" runat="server" AutoGenerateColumns="False" CellPadding="4"
            CellSpacing="1" OnRowDataBound="gvCustomer_RowDataBound" OnRowCommand="gvCustomers_RowCommand">
            <Columns>
                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("FirstName") + " " + Eval("LastName")%>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="Phone" HeaderText="Phone" />
                <asp:BoundField DataField="Email" HeaderText="Email" />
                <asp:BoundField DataField="DateOfBirth" HeaderText="Date Of Birth" DataFormatString="{0:MMMM d, yyyy}" />
                <asp:TemplateField HeaderText="Actions">
                    <ItemTemplate>
                        <asp:LinkButton ID="btnEdit" Text="Edit" CommandName="EditCustomer" CausesValidation="false"
                            CommandArgument='<%#Eval("ID")%>' runat="server"></asp:LinkButton>
                        <asp:LinkButton ID="btnDelete" Text="Delete" CommandName="DeleteCustomer" CausesValidation="false"
                            CommandArgument='<%#Eval("ID")%>' runat="server"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:LinkButton ID="btnRefreshGrid" CausesValidation="false" OnClick="btnRefreshGrid_Click"
            Style="display: none" runat="server"></asp:LinkButton>
    </ContentTemplate>
</asp:UpdatePanel>
<asp:UpdatePanel ID="upnlJsRunner" UpdateMode="Always" runat="server">
    <ContentTemplate>
        <asp:PlaceHolder ID="phrJsRunner" runat="server"></asp:PlaceHolder>
    </ContentTemplate>
</asp:UpdatePanel>
<script type="text/javascript" src="Content/scripts/ScriptFile.js">
</script> 
```

在示例中，所有 script 标签和 style 标签都放在 head 标签内。我应该怎么做才能让它在内容页面的项目中工作？

* * *

编辑：

实际上这是一个 jQuery 对话框示例，它对数据执行基本的添加、编辑和删除功能（客户）

当前的问题是，当单击链接按钮“btnAddCustomer”时，对话框不显示，可能是 javascript 没有执行，但是，使用 RowCommand 的 gridview 中的编辑按钮可以弹出对话框。

为了更好地澄清我的问题，下面是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication2
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        private CustomerService _customerService;

        #region Properties
        private bool IsAdd
        {
            get
            {
                return (!EditCustomerID.HasValue);
            }
        }

        private int? EditCustomerID
        {
            get
            {
                return (int?)ViewState["EditCustomerID"];
            }

            set
            {
                ViewState["EditCustomerID"] = value;
            }
        }

        #endregion

    protected void Page_Load(object sender, EventArgs e)
    {
        _customerService = new CustomerService();

        if (!IsPostBack)
        {
            GridDataBind();
        }
    }

    private void GridDataBind()
    {
        gvCustomers.DataSource = _customerService.GetAll();
        gvCustomers.DataBind();
    }

    protected void btnAddCustomer_Click(object sender, EventArgs e)
    {
        this.EditCustomerID = null;

        ClearEditCustomerForm();    //In case using non-modal

        RegisterStartupScript("jsUnblockDialog", "unblockDialog();");
    }

    private void ClearEditCustomerForm()
    {
        //Empty out text boxes
        var textBoxes = new List<Control>();
        FindControlsOfType(this.phrEditCustomer, typeof(TextBox), textBoxes);

        foreach (TextBox textBox in textBoxes)
            textBox.Text = "";

        //Clear validators
        var validators = new List<Control>();
        FindControlsOfType(this.phrEditCustomer, typeof(BaseValidator), validators);

        foreach (BaseValidator validator in validators)
            validator.IsValid = true;
    }

    static public void FindControlsOfType(Control root, Type controlType, List<Control> list)
    {
        if (root.GetType() == controlType || root.GetType().IsSubclassOf(controlType))
        {
            list.Add(root);
        }

        //Skip input controls
        if (!root.HasControls())
            return;

        foreach (Control control in root.Controls)
        {
            FindControlsOfType(control, controlType, list);
        }
    }

    protected void gvCustomer_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.DataItem == null)
            return;

        var btnEdit = (LinkButton)e.Row.FindControl("btnEdit");
        btnEdit.OnClientClick = "openDialogAndBlock('Edit Customer', '" + btnEdit.ClientID + "')";
    }

    protected void gvCustomers_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        int customerID = Convert.ToInt32(e.CommandArgument);

        switch (e.CommandName)
        {
            //Can't use just Edit and Delete or need to bypass RowEditing and Deleting
            case "EditCustomer":
                Customer customer = _customerService.GetByID(customerID);
                FillEditCustomerForm(customer);

                this.EditCustomerID = customerID;
                RegisterStartupScript("jsUnblockDialog", "unblockDialog();");

                //Setting timer to test longer loading
                //Thread.Sleep(2000);
                break;

            case "DeleteCustomer":
                _customerService.Delete(customerID);

                GridDataBind();
                break;
        }
    }

    private void FillEditCustomerForm(Customer customer)
    {
        txtFirstName.Text = customer.FirstName;
        txtLastName.Text = customer.LastName;
        txtEmail.Text = customer.Email;
        txtPhone.Text = customer.Phone;
        txtDateOfBirth.Text = customer.DateOfBirth.HasValue ? customer.DateOfBirth.Value.ToShortDateString() : "";
    }

    private void TriggerClientGridRefresh()
    {
        string script = "__doPostBack(\"" + btnRefreshGrid.ClientID + "\", \"\");";
        RegisterStartupScript("jsGridRefresh", script);
    }

    private void RegisterStartupScript(string key, string script)
    {
        ScriptManager.RegisterStartupScript(phrJsRunner, phrJsRunner.GetType(), key, script, true);
    }

    protected void btnSave_Click(object sender, EventArgs e)
    {
        if (!Page.IsValid)
            return;

        Customer customer;

        if (this.IsAdd)
            customer = new Customer();
        else
            customer = _customerService.GetByID(this.EditCustomerID.Value);

        customer.FirstName = txtFirstName.Text;
        customer.LastName = txtLastName.Text;
        customer.Email = txtEmail.Text;
        customer.Phone = txtPhone.Text;

        if (!String.IsNullOrEmpty(txtDateOfBirth.Text))
            customer.DateOfBirth = DateTime.Parse(txtDateOfBirth.Text);

        if (this.IsAdd)
            _customerService.Add(customer);
        else
            _customerService.Update(customer);

        HideEditCustomer();

        TriggerClientGridRefresh();
    }

    private void HideEditCustomer()
    {
        ClearEditCustomerForm();

        RegisterStartupScript("jsCloseDialg", "closeDialog();");
    }

    protected void btnCancel_Click(object sender, EventArgs e)
    {
        HideEditCustomer();
    }

    protected void btnRefreshGrid_Click(object sender, EventArgs e)
    {
        GridDataBind();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:49:00.277

要获取 dom/html id，请使用[Control.ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)

就像是：

```
 $("#"+ <%= divEditCustomer.ClientID %>) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:30:51.083

关于 mandava 的回答，脚本应该在内容页面中正常工作，并且通过将其保留在那里，您将避免大多数缓存问题。我相信你的问题是这个......

查看调用 OpenDialog 函数 (btnAddCustomer) 的链接按钮。它是一个asp.net 控件。服务器端 asp.net 控件根据某些变量呈现不同的 ID 值。试试这个：

1.  构建页面
2.  查看源代码
3.  找到 asp.net 控件的呈现代码。
4.  请改用在“查看源代码”代码中找到的 ID 属性的值。

对于您在 javascript 代码中使用的任何 asp.net 控件 ID，您都必须这样做，但我只发现了一个。

或者更简单的方法是为控件分配一个唯一的类名（例如，Class="myLinkBut​​tonClass"）并使用 $(".myLinkBut​​tonClass") 在 jquery 脚本中引用它

希望有一天，我们将有一种通用且简单的方法来引用这些 asp 生成的控件 ID，但现在这是您最好的选择。祝你好运

更新：不使用 runat="server" 属性的 DIV 元素应该可以与 jquery/javascript 一起正常工作。ID 在发送到客户端之前不会被修改。我没有使用 Emmanuel 的 Control.ClientID 建议，但很想知道它是否有效。请让我们知道情况如何！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T19:18:04.310

我将添加此答案以重申...

再一次，我非常肯定这是你的问题。

1.  尝试构建页面，
2.  然后查看源码，
3.  然后找到 btnAddCustomer 链接按钮的标签，
4.  然后查看该按钮的 ID 属性值（注意它不同）。
5.  高亮这个新值并复制它。
6.  将此值粘贴到 btnAddCustomer linkBut​​ton 的 onClientClick 函数的 linkID 参数中。

多田！你都准备好了。

如果仍然不起作用，请尝试在 onClick 事件中使用该函数而不是客户端单击，但肯定需要采取上述步骤，否则它将不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T15:26:52.523

嘿，为什么不在新的 js 文件中编写脚本并将其添加到项目中，并将脚本引用包含在内容页面/母版页中。我遇到了一个类似的问题，但它可能对你有用。所以尝试这种方式不会花费很长时间.......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-29T07:32:32.137

当我将它用于内容页面时，我像这样使用它并且它对我有用

```
$("#<%= YourControlID.ClientID %>") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-22T11:50:47.847

我遇到了这个问题，我搜索了几天，但徒劳无功地
测试了以下内容：

*   在内容页面中它不起作用
*   在母版页中它正在工作
*   然后在内容页面中，我用 html 按钮替换了 asp 按钮，然后它就起作用了

所以问题出在内容页面中，即使您像这样使用参考 ID，asp 按钮也不会命中脚本

```
$("<%= yourbutton.ClientID%>").click(yourscript) 
```

# javascript - 访问 js 集合中的第一个元素

> ID：14056779
> 
> 赞同：2
> 
> 时间：2012-12-27T15:08:32.117
> 
> 标签：javascript, jquery

在我的 js 函数中，我有以下

```
success: function (result) {
     $.each(result, function (i, item) {                  
        $("#tab-" + item.myType).append(result);
     })
} 
```

现在我已经改变了这个功能，而是我有以下

```
success: function (result) {
   $("#tab-how To Access to the first result collection element ").html(result);
 }
} 
```

我试过了

```
$("#tab-" + result[0].item.myType).html(result); 
```

但这没有帮助。

问题是：如何访问结果集合对象中的第一个js元素

有什么想法吗 ？

使用 console.log(result) 我得到了在部分视图上显示的 html 片段

```
div class="product clearfix">
        <div class="l-new">
            <a href="#">
                @Model.MyType (rendered as My Type)
            </a> 
....
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:12:14.373

你可以试试：

```
result[0] // if you have numeric indices in your result collection 
```

或者

```
var firstItem = null;
for(var x in result) { // if you have named properties
    firstItem = result[x];
    break;
} 
```

# solr - Solr 和 Jetty 部署问题

> ID：14056785
> 
> 赞同：1
> 
> 时间：2012-12-27T15:08:49.403
> 
> 标签：solr, jetty

我无法让 solr + jetty 工作。我正在遵循来自 - [http://wiki.apache.org/solr/SolrJetty](http://wiki.apache.org/solr/SolrJetty)的信件的所有说明。它工作得很好。但是当我多次重新启动码头时，在 3/4 这样的重新启动后它开始挂起。管理页面无法加载，我的应用无法获得与 solr 的连接。我还创建了一个工作文件夹 - `/opt/solr/work`. 我`tmpdir`也在`/etc/default/jetty`. 我可以`tmpdir`在 args 下确认已从管理仪表板设置为新路径。因此`tmp`，操作系统清除文件基本上不是问题。

我可能会错过什么？我是否应该查看我的代码，看看我是否没有正确提交？

我的配置 - 示例中的 Solr 4.0.0 和码头。带有 Open JDK 7 的 Ubuntu 12.04。

**编辑：**

我在 Ubuntu 12.04 机器上运行 Jetty 8，与 Solr 示例捆绑在一起。当我使用 start.jar 并且服务器无法正常启动时，关闭码头会引发 ThreadPoolException - 无法停止线程。

这是堆栈跟踪的转储：

```
2012-12-27 23:00:15.084:WARN:oejut.QueuedThreadPool:1 threads could not be stopped
2012-12-27 23:00:15.084:INFO:oejut.QueuedThreadPool:Couldn't stop Thread[qtp766488133-16,5,main]
2012-12-27 23:00:15.085:INFO:oejut.QueuedThreadPool: at sun.misc.Unsafe.park(Native Method)
2012-12-27 23:00:15.085:INFO:oejut.QueuedThreadPool: at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
2012-12-27 23:00:15.085:INFO:oejut.QueuedThreadPool: at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2081)
2012-12-27 23:00:15.085:INFO:oejut.QueuedThreadPool: at java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1425)
2012-12-27 23:00:15.086:INFO:oejut.QueuedThreadPool: at java.util.concurrent.Executors$DelegatedExecutorService.awaitTermination(Executors.java:636)
2012-12-27 23:00:15.086:INFO:oejut.QueuedThreadPool: at org.apache.solr.core.SolrCore.close(SolrCore.java:835)
2012-12-27 23:00:15.086:INFO:oejut.QueuedThreadPool: at org.apache.solr.handler.admin.CoreAdminHandler.getCoreStatus(CoreAdminHandler.java:865) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:38:34.947

由于异常没有指出任何有趣的东西，我建议当它挂起时，您现在对整个服务器进行线程转储并分析它是否阻止了正确启动。这些可能需要一些试验和错误才能弄清楚什么是什么，但应该让你知道是什么阻碍了事情。请注意，线程转储中以 qtp 开头的线程很少出现问题，它们用于处理请求，因此尽管其中可能有很多线程，但这并不表示它们是问题。常见问题是诸如在池资源上“等待”的数据库池之类的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T07:06:44.807

看来问题出在`solrconfig.xml`.

如果我`/browse`从问题中删除请求处理程序`solrconfig`就会消失。所以不是 solr 或码头问题，但很可能与它的配置有关。

# android - 音轨。如何使用 sessionId？

> ID：14056790
> 
> 赞同：0
> 
> 时间：2012-12-27T15:09:01.293
> 
> 标签：android, audio

文档说： sessionId - AudioTrack 必须附加到的音频会话的 ID

我可以像这样使用它吗？：

```
MediaPlayer mp = MediaPlayer.create(this, R.raw.test);
            mp.start();

int minSize = AudioTrack.getMinBufferSize(
        44100, AudioFormat.CHANNEL_OUT_STEREO, 
        AudioFormat.ENCODING_PCM_16BIT );

    at = new AudioTrack(AudioManager.STREAM_MUSIC, 
                        44100, AudioFormat.CHANNEL_OUT_STEREO, 
                        AudioFormat.ENCODING_PCM_16BIT, minSize, 
                        AudioTrack.MODE_STREAM, mp.getAudioSessionId());

    at.setStereoVolume(0.0f, 1.0f); 
```

将音轨连接到用于媒体播放器的流的正确方法是什么。我可以使用 AudioTrack 对此流进行更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:29:40.623

您不需要指定会话 ID，因为还有一个没有 sessionId 输入参数的[AudioTrack 构造函数。](http://developer.android.com/reference/android/media/AudioTrack.html#AudioTrack%28int,%20int,%20int,%20int,%20int,%20int%29)但是，正如文档所述，如果您想**“将音频效果与 AudioTrack 的特定实例相关联”**，您应该使用带有会话 ID 的构造函数。
此会话 ID 可以从您创建的 MediaPlayer 实例中获取 - 也可以为零，在这种情况下，**“如果没有提供，将为该轨道创建一个新会话”**。

# dart - 从嵌入式服务器加载 dart 文件

> ID：14056791
> 
> 赞同：3
> 
> 时间：2012-12-27T15:09:22.680
> 
> 标签：dart

我在 sam3x（带有 rtos）上创建了一个嵌入式网络服务器。只是为了好玩，我想看看我是否也可以让飞镖跑在上面会很酷。我的问题是 dartium 如何要求 .dart 文件？

我认为它的工作方式类似于 js 文件。在我当前的实现中，当我加载一个非常基本的 index.html 时。我将 dart.js 从前沿服务器保存到 sd 卡。调试我可以看到 css、js、ico 文件正在加载，但没有 dart 文件。任何想法都会非常感谢。

```
<h1>Test_app</h1>

<p>Hello world from Dart!</p>

<div id="container">
  <p id="text"></p>
</div>

<script type="application/dart" src="test_app.dart"></script>
<script src="dart.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T14:38:58.107

我最终在 dart 网站上找到了“navigator.webkitStartDart”js 代码。这很有效，我能够加载和运行 dart 脚本，所以我对此很感兴趣。

# java - Java 语法：接口谁可以是对象？

> ID：14056799
> 
> 赞同：2
> 
> 时间：2012-12-27T15:09:52.503
> 
> 标签：java, syntax, interface, observer-pattern

我目前正在研究观察者模式，我遇到了一些困惑。

当我阅读这行代码时：

```
IObserverSubscribe user1= new ConcreteObserverYoutubeUser(); 
```

我认为界面`IObserverSubscribe user1`正在创建和实例化`new ConcreteObserverYoutubeUser()`。这让我有点困惑，因为通常被声明的同一个类也在实例化。应该是这样的：

```
IObserverSubscribe user1= new IObserverSubscribe(); 
```

为什么界面装饰能够实例化另一个类？

完整代码如下：

主要的：

```
package observerpattern;

public class ObserverPattern {

    /**
     * The observer pattern is a software design pattern in which
     *  an object, called the subject, maintains a list of its dependents,
     *  called observers, and notifies them automatically of any 
     *  state changes, usually by calling one of their methods.
     *  It is mainly used to implement distributed event handling systems.
     *  The Observer pattern is also a key part in the familiar
     *  Model View Controller (MVC) architectural pattern. 
     */
    public static void main(String[] args) {

        SubjectYouTubeChannel sytc= new SubjectYouTubeChannel();// create youtube channel
        IObserverSubscribe user1= new ConcreteObserverYoutubeUser();
        IObserverSubscribe user2= new ConcreteObserverYoutubeUser();
        IObserverSubscribe moderator1= new ConcreteObserverYoutubeModerator();

        sytc.Subscribe(user1);
        sytc.Subscribe(user2);
        sytc.Subscribe(moderator1);
        sytc.Unsubscribe(user2);

        sytc.notifySubscribers();

    }

} 
```

学科：

```
package observerpattern;

import java.util.ArrayList;
import java.util.List;
import observerpattern.IObserverSubscribe;

public class SubjectYouTubeChannel {    
    private List<IObserverSubscribe> subscribers = new ArrayList<IObserverSubscribe>(); 
    public void Subscribe(IObserverSubscribe ios){
        subscribers.add(ios);       
    }   
    public void Unsubscribe(IObserverSubscribe ios){        
        subscribers.remove(ios);
    }   
    public void notifySubscribers(){        
        for(IObserverSubscribe ios : subscribers ){         
            ios.Notify();           
        }       
    }
} 
```

界面观察者：

```
package observerpattern;

public interface IObserverSubscribe {

    void Notify();

} 
```

具体观察者：

```
package observerpattern;

public class ConcreteObserverYoutubeUser implements IObserverSubscribe{

    @Override
    public void Notify() {
        System.out.println("User watches video, comments, ect");

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:12:23.613

```
new IObserverSubscribe(); 
```

这是**非法**的，因为您**不能实例化接口**- 根据定义，它们没有任何 ... 方法定义。

```
IObserverSubscribe user1= new ConcreteObserverYoutubeUser(); 
```

这里的左边说的`user1`是**atleast** `IObserverSubscribe`类型，即指向一个**实例，其类型实现了接口**。

另一方面，右侧实际上创建**了****一个具体类型的实例**并分配给`user1`. 这是可能的，因为**具体类型实现了接口**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:12:15.167

> IObserverSubscribe user1= new ConcreteObserverYoutubeUser(); 我认为接口 IObserverSubscribe user1 正在创建和实例化新的 ConcreteObserverYoutubeUser()。这让我有点困惑，因为通常被声明的同一个类也在实例化。应该是这样的：
> 
> IObserverSubscribe user1= new IObserverSubscribe();

不，您不能实例化接口。

```
IObserverSubscribe user1= new ConcreteObserverYoutubeUser(); 
```

这将创建一个实例，`ConcreteObserverYoutubeUser`该实例是 的子类（或实现类） `IObserverSubscribe`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:46:54.757

想想接口的作用以及观察者模式的用途。

ConcreteObserverYoutubeUser 实现了 IObserverSubscribe 接口，因为它需要保证它有“Notify()”方法。因此，所有应该是“IObserverSubscribers”的类都需要在收到通知时特别做一些事情。

如果您可以执行以下操作，它将破坏观察者模式的目的：

```
 IObserverSubscribe user1= new IObserverSubscribe(); 
```

youtube 版主和 youtube 用户具有不同的功能，因此您不能对两者使用相同的 Notify 方法（请参阅下面的修改代码）：

用户等级：

```
 package observerpattern;

 public class ConcreteObserverYoutubeUser implements IObserverSubscribe{ 

     @Override
     public void Notify() {
         sendEmail("A new video was added! It might be a cat video, so you should " +
       "probably view it, vote on it, comment on it, or ignore it.");

     }
     @Override
     public void watchVideo(Video v) {
       //...
     }
     @Override
     public void giggleAtCatVideo() {
         //..
     }

 } 
```

主持人类：

```
 package observerpattern;

 public class ConcreteObserverYoutubeModerator implements IObserverSubscribe{    
     @Override
     public void Notify() {
         sendEmail("New video added, see if it should be deleted or if there is copyright infringement.");
     } 
     @Override
     public void deleteVideo(Video v) {
         //..
     }
 } 
```

为什么有用？好吧，因为您可以创建另一个类（在本例中为 SubjectYouTubeChannel），它可以保存实现“IObserverSubscribe”接口的对象。当关于该主题的某些事情发生变化时，您可以通知与该主题相关联的每个观察者，以便所有观察者都知道某些事情发生了变化。

一个更好的例子是，如果 SubjectYouTubeChannel 有一个“addVideo”方法（见下文），并且主持人类和用户类中的 notify 方法向他们发送不同的电子邮件，提醒他们注意更改。

```
package observerpattern;

import java.util.ArrayList;
import java.util.List;
import observerpattern.IObserverSubscribe;

public class SubjectYouTubeChannel {    
    private List<IObserverSubscribe> subscribers = new ArrayList<IObserverSubscribe>(); 
    public void Subscribe(IObserverSubscribe ios){
        subscribers.add(ios);       
    }   
    public void Unsubscribe(IObserverSubscribe ios){        
        subscribers.remove(ios);
    }   
    public void notifySubscribers(){        
        for(IObserverSubscribe ios : subscribers ){         
            ios.Notify();           
        }       
     }
 public void addVideo(Video v){
     //... video add code
        notifySubscribers();
 }
 } 
```

这意味着你可以做这样很酷的事情：

```
 package observerpattern;

 public class ObserverPattern {

    /**
     * The observer pattern is a software design pattern in which
     *  an object, called the subject, maintains a list of its dependents,
     *  called observers, and notifies them automatically of any 
     *  state changes, usually by calling one of their methods.
     *  It is mainly used to implement distributed event handling systems.
     *  The Observer pattern is also a key part in the familiar
     *  Model View Controller (MVC) architectural pattern. 
     */
    public static void main(String[] args) {

        SubjectYouTubeChannel sytc= new SubjectYouTubeChannel();// create youtube channel
        IObserverSubscribe user1= new ConcreteObserverYoutubeUser();
        IObserverSubscribe user2= new ConcreteObserverYoutubeUser();
        IObserverSubscribe moderator1= new ConcreteObserverYoutubeModerator();
        Video v = new Video() //imagine that class exists

        sytc.Subscribe(user1);
        sytc.Subscribe(user2);
        sytc.Subscribe(moderator1);
        sytc.Unsubscribe(user2);

        sytc.addVideo(v);
    //notifySubscribers() is called within SubjectYouTubeChannel's addVideo() so
    //all users and moderators who subscribe to the channel have been notified with 
    //messages corresponding to what they should do

    }
 } 
```

# android - API 级别 15 的 Android maven 依赖项

> ID：14056801
> 
> 赞同：0
> 
> 时间：2012-12-27T15:10:08.963
> 
> 标签：android, maven

是否可以在我的 Android 项目中添加对 API 级别 15 的 Maven 支持的依赖项？

我遵循了定义：

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>android</artifactId>
    <version>4.0.1.2</version>
    <scope>provided</scope>
</dependency> 
```

API 级别 14在哪里`4.0.1.2`。下一个可用的`4.1.1.4`是 API 级别 16。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:12:07.147

我认为您真的不需要通过依赖项降级到以前的 api 版本。您不能只更改**插件配置**中的平台级别吗？

```
 <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <sdk>
                    <platform>15</platform>
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
        </plugin> 
```

在**project.properties 中：**

```
target=android-15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:51:32.130

[Maven 中央存储库](http://search.maven.org/#browse%7C-697723448)中尚不提供 API 级别 15（Android 4.0.3、4.0.4）。

您可以通过 SDK Manager 下载 android.jar，然后手动将其安装到本地 maven 存储库中：

```
mvn install:install-file \
  -DgroupId=com.google.android \
  -DartifactId=android \
  -Dpackaging=jar \
  -Dversion= 4.0.3 \
  -Dfile=/android-sdk-home/platforms/android-15/android.jar 
```

然后开始在你的项目中使用它：

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>android</artifactId>
    <version>4.0.3</version>
    <scope>provided</scope>
</dependency> 
```

请注意，您可以在安装 jar 文件时为 groupId、artifactId 和 version 使用任何名称，例如，[maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)使用的约定是：

```
<dependency>
  <groupId>android</groupId>
  <artifactId>android</artifactId>
  <version>4.0.3_r3</version>
  <scope>provided</scope>
</dependency> 
```

# jsf - 在另一个托管 bean 中获取托管 bean 引用

> ID：14056802
> 
> 赞同：5
> 
> 时间：2012-12-27T15:10:14.010
> 
> 标签：jsf, jakarta-ee, jsf-2, managed

**由于这个BalusC**帖子，我尝试在另一个托管 bean 中获取托管 bean 的实例： [here](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name)

使用`findBean`方法，这很棒，我检索了我的 bean，但`ManagedProperty`我无法获取我的 bean。

我要注入的 bean 是这个：

```
@ManagedBean(name="locale")
@SessionScoped
public class LocaleBean {

   private String locale;

   public String getLocale() {              
        return locale;
   }

   public void setLocale(String locale) {
        FacesContext.getCurrentInstance().getViewRoot().setLocale(new Locale(locale));      
        this.locale = locale;
   }

} 
```

因此，当我调用`LocaleBean locale = findBean("locale");`我的`login`bean 时，它是有效的，但是：

```
@ManagedProperty("#{locale}") // OR localeBean, LocaleBean...
private LocaleBean locale; 
```

不工作...

> com.sun.faces.mgbean.ManagedBeanCreationException：不可能 de créer le bean géré «登录»。Les problèmes suivants ont été détectés : - La propriété «locale» du bean géré «login» n'existe pas。

告诉我为什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T18:59:01.010

您应该为带有 @ManagedProperty 注释的 bean 编写 getter/setter

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:08:04.540

我看到您的 LocaleBean 是会话范围的。您可以使用 servlet 上下文的 getSessionMap 方法直接从代码中引用另一个会话范围的托管 bean，而不是 @ManagedProperty 注释和 getter/setter：

```
LocaleBean locale = (LocaleBean) FacesContext.getCurrentInstance()
                    .getExternalContext().getSessionMap().get("locale"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T21:45:37.067

如果你想在你的登录 bean 中调用 LocaleBean 需要是 SessionScoped 或更高版本。

如果你想在 Login Bean 上调用 Locale Bean，你必须这样做

```
@ManagedProperty("#{locale}")
private LocaleBean locale; 
```

为此调用适当的 set e get 。你不需要这个

```
LocaleBean locale = findBean("locale"); 
```

您可以使用 now 语言环境，因为它在您的登录 Bean 中是本地的：

```
String s = local.getLocale(); 
```

# php - php 使用 preg_match 验证字符串

> ID：14056803
> 
> 赞同：8
> 
> 时间：2012-12-27T15:10:17.913
> 
> 标签：php, string, validation, preg-match

我正在尝试使用 preg_match 在 PHP 中验证输入字符串仅包含“az、AZ、-、_ ,0-9”字符。如果它只包含这些，则验证。

我试图在谷歌上搜索，但我找不到任何有用的东西。

有人可以帮忙吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:12:04.737

`'/^[A-Za-z0-9_-]*$/'`如果空字符串也有效，请使用模式。否则`'/^[A-Za-z0-9_-]+$/'`

所以：

```
$yourString = "blahblah";
if (preg_match('/^[A-Za-z0-9_-]*$/', $yourString)) {
    #your string is good
} 
```

另外，请注意，您希望在字符类的最后放置一个“-”作为字符类的一部分，这样它就会被读取为文字“-”，而不是两个字符之间的破折号，例如 AZ 之间的连字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:18:45.237

```
$data = 'abc123-_';
echo preg_match('/^[\w|\-]+$/', $data); //match and output 1

$data = 'abc..';
echo preg_match('/^[\w|\-]+$/', $data); //not match and output 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T12:08:13.650

您可以使用 preg_replace($pattern, $replacement, $subject)：

```
if (preg_replace('/[A-Za-z0-9\-\_]/', '', $string)) {
  echo "Detect non valid character inside the string";
} 
```

这个想法是删除任何有效的字符，如果结果不为空，则执行代码。

# java - java 1.6 中 String.split 的行为？

> ID：14056813
> 
> 赞同：2
> 
> 时间：2012-12-27T15:11:08.090
> 
> 标签：java, split, java-6

我的代码是：

```
String s = "1;;;; 23;;";
System.out.println(s.split(";").length); 
```

并给出作为输出`5`。的源代码`split`是：

```
public String[] split(String regex) {
        return split(regex, 0);
    } 
```

并且文档说：

> 此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数 split(java.lang.String,int) 方法一样。因此，尾随的空字符串不包含在结果数组中。
> 
> 例如，字符串“boo:and:foo”通过这些表达式产生以下结果：
> 
> ```
> Regex Result
> : { "boo", "and", "foo" }
> o { "b", "", ":and:f" } 
> ```

如果我打印我拥有的字符串：

```
1

 23 
```

我不应该从中得到类似的`1;;;; 23;;`东西`{"1", "", "", "", " 23", ""}`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T15:12:59.520

不，五个是正确的，正如您引用的文档所述：

> 因此，尾随的空字符串不包含在结果数组中。

这就是为什么省略数组末尾的空字符串的原因。如果您想要空字符串，请按照 Evgeniy Dorofeev 的回答执行并指定 -1 的限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:16:46.793

由于 limit = 0 不包括尾随空字符串。尝试

```
System.out.println(s.split(";", -1).length); 
```

你会得到 7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:17:12.757

它会在任何时候拆分字符串';' 呈现并放入数组。

# logging - Umbraco 日志 DependencyHandler 错误

> ID：14056814
> 
> 赞同：0
> 
> 时间：2012-12-27T15:11:09.117
> 
> 标签：logging, umbraco, client-dependency

我的 Umbraco 日志正在迅速填满如下消息：

```
At /xx/DependencyHandler.axd/f88c46d6fcf7ee6b39a67236364e7300/158/js (Referred by: http://www.mysite.com/xx/) 
```

它发生在所有路径上，也发生在 js 和 css 中。我无法在本地重现它，但在实际服务器中每分钟大约有 10 次出现此错误。

关于如何解决它的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:57:05.413

我相信您需要设置一个 HTTP 处理程序来处理这些请求：[https ://github.com/Shandem/ClientDependency/wiki/Configuration](https://github.com/Shandem/ClientDependency/wiki/Configuration)

# excel - 无效不会隐藏标签

> ID：14056816
> 
> 赞同：0
> 
> 时间：2012-12-27T15:11:16.573
> 
> 标签：excel, vba, excel-2007, ribbonx, fluent-ribbon

我试图突破我对 Office 2007/2010 框架中 Fluent Ribbon/RibbonUI 系统的理解的极限。

结合我对 WPF/Silverlight 的 XAML 设计的知识和理解，我想看看我是否可以动态显示/隐藏下面描述的 Office 菜单项，似乎我有 FUBAR 的一些东西。

请告知我哪里出错了，或者我需要进一步开发的地方：

### 自定义UI.xml

```
<group id="grpITOfficeMenu"
            label="Office Menu">
    <button id="btnShowOffice"
                label="Show"
                onAction="ShowOfficeTabs"/>
    <button id="btnHideOffice"
                label="Hide"
                onAction="HideOfficeTabs" />
</group>
<group id="grpITContextualTabs"
            label="Contextual Tabs" >
    <button id="btnShowContext" 
                label="Show" 
                onAction="ShowContextualTabs"/>
    <button id="btnHideContext"
                label="Hide"
                onAction="HideContextualTabs"/>
</group>
...
<officeMenu>
    <button idMso="FileNew"
                getVisible="OfficeGetVisible" />
    <button idMso="FileOpen"
                getVisible="OfficeGetVisible" />
</officeMenu>
<contextualTabs>
    <tabSet idMso="TabSetSmartArtTools"
                getVisible="ContextualGetVisible" />
    <tabSet idMso="TabSetChartTools"
                getVisible="ContextualGetVisible"/>
    <tabSet idMso="TabSetDrawingTools"
                getVisible="ContextualGetVisible" />
    <tabSet idMso="TabSetPictureTools"
                getVisible="ContextualGetVisible" />
    <tabSet idMso="TabSetPivotTableTools"
                getVisible="ContextualGetVisible" />
    <tabSet idMso="TabSetHeaderAndFooterTools"
                getVisible="ContextualGetVisible" />
    <tabSet idMso="TabSetTableToolsExcel"
                getVisible="ContextualGetVisible" />
    <tabSet idMso="TabSetPivotChartTools"
                getVisible="ContextualGetVisible" />
    <tabSet idMso="TabSetInkTools"
                getVisible="ContextualGetVisible" />
</contextualTabs> 
```

### VBA：

```
'Method to Refresh the RibbonUI object
Sub RefreshRibbon(tag As String)
   'Check if Ribbon variable has been initialized with Ribbon Object from Excel
   If Not (Rib Is Nothing) Then
      'Ribbon variable has been initialized.
      MyTag = tag
      Rib.Invalidate
   End If
End Sub
'Flip OfficeMenu Tabs visible based on @OffVisible value
Sub OfficeGetVisible(control As IRibbonControl, ByRef returnVal)
   returnVal = OffVisible
End Sub
'Flip Contextual Tabs visible based on @ContVisible value
Sub ContextualGetVisible(control As IRibbonControl, ByRef returnVal)
   returnVal = ContVisible
End Sub
...
'Show/Hide ContextualTabs in the IT Mode
Sub ShowContextualTabs(Optional ctrl As Variant)
   ContVisible = True
   RefreshRibbon tag:=MyTag
End Sub
Sub HideContextualTabs(Optional ctrl As Variant)
   ContVisible = False
   RefreshRibbon tag:=MyTag
End Sub
'Show/Hide OfficeMenu Tabs in the IT Mode
Sub ShowOfficeTabs(Optional ctrl As Variant)
   OffVisible = True
   RefreshRibbon tag:=MyTag
End Sub
Sub HideOfficeTabs(Optional ctrl As Variant)
   OffVisible = False
   RefreshRibbon tag:=MyTag
End Sub 
```

### 更新：

做了一些详细的测试，它在技术上是可行的，但我最终要完成的是`Home, Insert, Page Layout, Formulas, Data, Review, View, Developer, etc.`从功能区显示/隐藏选项卡的能力。我试图消除元素中`startfromscratch`属性的需要或必要性。`customui`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:03:04.130

解决了，必须查看功能区中&对象的所有`idMso`值。`TabSets``Tab`

所以这里是 CustomUI 的 XML，允许显示/隐藏一些默认（至少是我需要的）选项卡/选项卡集。使用上述相同的显示/隐藏方法。

```
<customUI onLoad="s_UIOnLoad" xmlns="http://schemas.microsoft.com/office/2006/01/customui">
  <ribbon>
    <!-- Excel File Menu options, not available through Tab or TabSets -->
    <officeMenu>
      <button idMso="FileNew" getVisible="OfficeGetVisible" />
      <button idMso="FileOpen" getVisible="OfficeGetVisible" />
    </officeMenu>
    <!-- Excel TabSets that only become visible when certain objects
    are selected (such as ListObjects, PivotTables, Charts, etc) -->
    <contextualTabs>
      <tabSet idMso="TabSetChartTools" getVisible="ContextualGetVisible"/>
      <tabSet idMso="TabSetDrawingTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetEquationTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetHeaderAndFooterTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetInkTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetPictureTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetPivotChartTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetPivotTableTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetSlicerTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetSmartArtTools" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetSparkline" getVisible="ContextualGetVisible" />
      <tabSet idMso="TabSetTableToolsExcel" getVisible="ContextualGetVisible" />
    </contextualTabs>
    <tabs>
      <!-- Excel Menu Tabs, these are not included in the TabSets and
    must be explicitely defined -->
      <tab idMso="TabAddIns" getVisible="OfficeGetVisible" />
      <tab idMso="TabBackgroundRemoval" getVisible="OfficeGetVisible" />
      <tab idMso="TabData" getVisible="OfficeGetVisible" />
      <tab idMso="TabDeveloper" getVisible="OfficeGetVisible" />
      <tab idMso="TabFormulas" getVisible="OfficeGetVisible" />
      <tab idMso="TabHome" getVisible="OfficeGetVisible" />
      <tab idMso="TabInsert" getVisible="OfficeGetVisible" />
      <tab idMso="TabPageLayoutExcel" getVisible="OfficeGetVisible" />
      <tab idMso="TabReview" getVisible="OfficeGetVisible" />
      <tab idMso="TabView" getVisible="OfficeGetVisible" />
      ...
    </tabs>
  </ribbon>
</customUI> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T21:50:11.480

白手起家

```
<?xml version="1.0" encoding="UTF-8"?>
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui" onLoad="Ribbon_Load">
  <ribbon  startFromScratch="true"/>
</customUI> 
```

它删除了除后台之外的所有内容。

如果你想把其中一些带回来

```
<?xml version="1.0" encoding="UTF-8"?>
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui" onLoad="Ribbon_Load">
  <ribbon  startFromScratch="true">
    <tabs>
      <tab idMso="TabView" visible="true"/>
    </tabs>
  </ribbon>
</customUI> 
```

# android - FindViewById 其中 ID 是动态字符串

> ID：14056817
> 
> 赞同：16
> 
> 时间：2012-12-27T15:11:21.193
> 
> 标签：android, eclipse, findviewbyid

我有一张 40 个方格的桌子，每个方格都有一个 ID。当我从另一个活动传递捆绑包时，我需要从该捆绑包中提取注释、颜色和 ID。然后应用程序将更改/添加文本并更改提取的 ID 指定的正方形的背景。每个方格都有 int 格式的 ID。从其他活动传递的每个 ID 都是字符串格式。我不知道如何使它成为 findViewById(R.id.passed_id)，以及如何让两种不同的格式一起工作。我试图更改每个正方形的 ID，但 Eclipse 说 ID 必须有一个字母和一个数字。我迷路了......这是代码：

```
package com.tt;

 import android.os.Bundle;
 import android.app.Activity;
 import android.content.Intent;
import android.content.res.Resources;
import android.util.TypedValue;
import android.view.Gravity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity
 {
String gotNotes;
String n;
String gotDOW;
String gotID;
public String Id;
String gotHour;
TextView notes;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initialize();
    Button settings = (Button)findViewById(R.id.settings);

    Bundle gotPackage = getIntent().getExtras();
    if (gotPackage != null){
    gotNotes = gotPackage.getString("AddedNote");
   // if (gotNotes.equals(" ")){n = "Empty";}else n = gotNotes;
    //gotDOW = gotPackage.getString("Day");
    //gotHour = gotPackage.getInt("Hour");
    gotID = gotPackage.getString("ID");

    Id = gotID;
    notes.setText(gotNotes + (" \n") + gotID);

    }
    else{}

  settings.setOnClickListener(new OnClickListener()
    {

          public void onClick(View v)
         {
              Intent i = new Intent(v.getContext(),Settings.class);
              startActivityForResult(i,0);
         }

     });

   }

  private void initialize() 
       {
    // TODO Auto-generated method stub

    notes = (TextView)findViewById(R.id.);
    notes.setGravity(Gravity.CENTER);
    notes.setTextSize(TypedValue.COMPLEX_UNIT_SP, 12);
}

    @Override
            public boolean onCreateOptionsMenu(Menu menu) 
             {
               getMenuInflater().inflate(R.menu.activity_main, menu);
               return true;

             }

      } 
```

***更新***

```
Ok.. here's the log:

12-27 16:18:55.661: D/AndroidRuntime(12497): Shutting down VM
12-27 16:18:55.661: W/dalvikvm(12497): threadid=1: thread exiting with uncaught exception (group=0x40abf228)
12-27 16:18:55.671: E/AndroidRuntime(12497): FATAL EXCEPTION: main
12-27 16:18:55.671: E/AndroidRuntime(12497): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tt/com.tt.MainActivity}: java.lang.NullPointerException
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.os.Looper.loop(Looper.java:154)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.ActivityThread.main(ActivityThread.java:4944)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at java.lang.reflect.Method.invokeNative(Native Method)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at java.lang.reflect.Method.invoke(Method.java:511)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at dalvik.system.NativeStart.main(Native Method)
12-27 16:18:55.671: E/AndroidRuntime(12497): Caused by: java.lang.NullPointerException
12-27 16:18:55.671: E/AndroidRuntime(12497):    at com.tt.MainActivity.initialize(MainActivity.java:69)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at com.tt.MainActivity.onCreate(MainActivity.java:30)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.Activity.performCreate(Activity.java:4531)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
12-27 16:18:55.671: E/AndroidRuntime(12497):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
12-27 16:18:55.671: E/AndroidRuntime(12497):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-27T16:49:34.227

You can get an identifier from a string by using:

```
notes = (TextView)findViewById(getResources().getIdentifier(VIEW_NAME, "id", getPackageName())); 
```

Where `VIEW_NAME` is whatever identifier string you're generating. After that, you can set the text of it like you currently are. This also works if you need to get strings and drawables as well, just change `id` to the appropriate type.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:18:56.687

Assuming you're passing in the actual string "R.id.passed_id", I would recommend passing in the integer value instead. Thus, simply pass in R.id.passed_id.

All values in the R file of an application are simply integers that are mapped to resource locations. The `findById()` methods are only looking for integers, so if you start the `Activity` and pass in the integer value of the resource you want, it will find it.

Note: **This will only work if the resources are within the same application**. R files remain constant for an application, but they can change from one app to another even if they have the same name. If, however, the two activities fall under the same application package, it will work.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-27T15:20:37.067

Man I'm not understating what exactly you want to do. **Id** is the id off an android widget then on function **initialize()** you should cast string to int this way: **Integer.ValueOf(Id)** Hope this is what you want.

# c# - 如何获得最大http请求长度时间？

> ID：14056823
> 
> 赞同：3
> 
> 时间：2012-12-27T15:11:38.163
> 
> 标签：c#, asp.net, web-config, httprequest

在我的 asp.net/c# 网站中，我发出一个请求大约需要一分钟，有时它会出现一个错误，说请求超时，我无法捕捉到它。但我想到了一个解决方法。

我可以将最大时间作为一个值，然后在执行循环时，我可以计时，如果它超过了最大时间减去 4 秒，则停止循环。

但是我怎样才能获得最大时间（来自 web.config 文件）？有我可以使用的变量吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:19:00.697

我认为您可以检查 HttpServerUtility.ScriptTimeout 属性 - 它反映了 httpRuntime 元素上 executionTimeout 属性的 web.config 值。

关于此的 MSDN 条目：

[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.scripttimeout.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.scripttimeout.aspx)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:16:44.487

也许这可以帮助您获得您正在寻找的价值：

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout%28v=vs.100%29.aspx)

另一种更简单的方法是直接读取配置：

```
HttpRuntimeSection section = ConfigurationManager.GetSection("system.web/httpRuntime") as HttpRuntimeSection;

lblDebug.Text = section.MaxRequestLength.ToString(); 
```

# android - android：当活动在后台时如何从服务中获取广播消息

> ID：14056824
> 
> 赞同：0
> 
> 时间：2012-12-27T15:11:43.823
> 
> 标签：android, service

我有一项服务和一项活动。在服务中，我广播从网络收到的消息，并在活动中显示这些消息。这很好用。但是当活动在后台时，所有消息都会丢失。

如何在 onResume（或 onCreate）活动中从服务器获取最后一条消息（如果存在）？

**编辑：** 服务中：

```
public class server extends Service implements Runnable
{
    @Override
    public void onCreate()
    {

    }

    @Override
    public IBinder onBind(Intent arg0)
    {
        return null;
    }

    @Override
    public void onStart(Intent intent, int startID)
    {   
        //initializing socket and begining listen
        new Thread(this).start();
    }

    public void run()
    {
        String readed;
        while (true)
        {
            if(reader == null) continue;
            try
            {
                if ((readed = reader.readLine()) != null)
                {
                    Intent intent = new Intent(SEND_DATA_INTENT);
                    intent.putExtra("type", "message");
                    intent.putExtra("content", readed.substring(1));
                    sendBroadcast(intent);
                    Thread.sleep(100);
                }
            }
            catch (Exception ee) { }
        }
    }
} 
```

并在活动中：

```
public class menhaj extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
    @Override
    protected void onResume()
    {
        if (dataUpdateReceiver == null) dataUpdateReceiver = new DataReciver();
        IntentFilter intentFilter = new IntentFilter(server.SEND_DATA_INTENT);
        registerReceiver(dataUpdateReceiver, intentFilter);
        super.onResume();
    };

    @Override
    protected void onPause()
    {
        if (dataUpdateReceiver != null) unregisterReceiver(dataUpdateReceiver);
        super.onPause();
    };

    private class DataReciver extends BroadcastReceiver
    {
        @Override
        public void onReceive(Context context, Intent intent)
        {
            if (intent.getAction().equals(server.SEND_DATA_INTENT))
            {
                Bundle bdl = intent.getExtras();
                String type = bdl.getString("type");
                if (type.equals("message"))
                {
                    String message = bdl.getString("content");
                    db.addMessage(message);
                    showMessage(message);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:16:00.957

If that activity is in the background, the user probably doesn't want to see messages from it. Show notifications from your services instead. Generally, an activity should de-register itself `onPause()` and register again `onResume()` when it comes back to the foreground.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:13:30.160

I would declare BroadcastReceivers , those can receive messages and bring back to from your avtivity / app

# linux - 如何确定linux中空格的确切字符？

> ID：14056825
> 
> 赞同：2
> 
> 时间：2012-12-27T15:11:47.853
> 
> 标签：linux, shell

我正在尝试获取 PID 字段`ps -aux`。我知道我可以`ps -aux | awk '{print $2}'`使用`cut`. 我的想法是指定一个分隔符并选择第二个字段，如下所示：

```
 ps -aux | cut -d[delimiter] -f2 
```

使用空格作为分隔符 ( `' '`) 不起作用，制表符 ( ) 也不起作用`\t`。

一般来说，我如何找出 linux 中空白的确切字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:18:49.980

要识别其他无法打印或外观相似的字符（如空格），请将输出通过管道传输到类似`xxd`或的工具`od -c`。例如，这会输出每个字符的十六进制值以及文本以便于查找：

```
ps -aux | xxd -g 1        # -g 1 outputs each character individually 
```

但是我认为您的问题是`ps -aux`在字段之间使用多个空格；`cut`不处理多个连续的分隔符，因此它打印第一个和第二个空格之间的任何内容，即什么也没有。

如果您真的想使用 cut ，则必须删除前导空格和重复空格：

```
ps -aux | sed 's/^ *//;s/  */ /g' | cut -d' ' -f2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:22:43.527

cut 不支持多字符作为分隔符。如果你真的想使用 cut，字段之间有多个空格：

```
ps aux | sed 's/  */ /g' | cut -d ' ' -f 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:22:12.660

要获取`ps`命令的 PID，您可以执行以下操作：

`ps -aux | cut -c10-15`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T20:51:20.627

有关信息：`u`您使用的`ps aux`表示，根据`man ps`：

> u 显示面向用户的格式

因此，您明确要求提供*人类可读*的输出，然后使用某些工具对其进行解析？这不是很合适（至少可以这么说）。如果您需要格式化 的输出`ps`，请使用`-o`（或`--format`）选项，如果您的版本`ps`接受它。因此：

```
ps ax -o pid 
```

会好*很多*。

# javascript - 如何从内部调用 iframe。

> ID：14056827
> 
> 赞同：1
> 
> 时间：2012-12-27T15:11:53.063
> 
> 标签：javascript, jquery, iframe

我想找到一个 iframe 相对于它所在页面的坐标。我试图从其中的一些点击事件中调用这个 iframe。

该页面包含多个 iframe。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:16:04.867

查看[http://api.jquery.com/position/](http://api.jquery.com/position/)和[http://api.jquery.com/offset/](http://api.jquery.com/offset/)，其中之一应该可以为您提供您正在寻找的坐标。至于点击。点击甚至应该冒泡到 dom 的 iframe 元素，因此您可以在那里收听。像这样的东西：

```
 $('#myIframe').on('click',function(){
      var coordinates = [$(this).offset().top, $(this).offset().left];
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:30:11.333

我认为缺乏对 iframe 以及框架如何通信的知识导致了我的问题。那么我能够解决这个问题的唯一方法是使用`window.postmessage`允许跨域通信。

[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

感谢帮助。

# blpapi - 彭博 API - 会话未开始

> ID：14056832
> 
> 赞同：0
> 
> 时间：2012-12-27T15:12:06.063
> 
> 标签：blpapi

首先，我需要有一个Bloomberg 帐户来试验API。我正在运行 Win 8 64 位。我运行了 C++ 版本（没有 .Net）。我运行了第一个样本来测试它。

如果我确实需要一个彭博账户，有没有其他免费的方式来提取市场数据。我知道雅虎和谷歌这样做。但是google关闭了他们的支持，并没有在雅虎上的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-07T15:48:58.237

仅当您想对数据进行试验时。它非常以商业为中心。如果您想要可靠的最新市场数据，那么您需要可靠的来源。彭博如此昂贵，因为连银行都依赖它。

每当两个交易者（不是来自同一家银行）想要进行交易时，他们都会接受例如来自彭博社的汇率。否则，他们不在同一页面上。另一个大公司是路透社。

基本上您可以通过其他方式收集市场数据，只是数据的有用性将是“仅用于车库项目”。没有人会在不说明您的市场数据来源的情况下与您打交道。

# xul - 异常错误：chrome://app/content/app1.js - EXPORTED_SYMBOLS 不是数组

> ID：14056836
> 
> 赞同：1
> 
> 时间：2012-12-27T15:12:21.067
> 
> 标签：xul

尝试使用 Components.utils.import("chrome://app/content/app1.js"); 时标记“EXPORTED_SYMBOLS 不是数组”异常。

我创建了一个 XUL 应用程序，并从其中一个 JS 文件（比如 app.js）中尝试包含另一个 JS 文件，如上所示。

app.js 和 app1.js 都放置在 content 文件夹中，并且在 chrome.manifest 文件中添加了以下行

“内容应用内容/”

在其他 JS 文件（app1.js）中，我导出了类似的符号

```
var EXPORTED_SYMBOLS = ["Fooinstance"];

var Fooinstance = {
   foo: function() {
   ...
   }
} 
```

在 app.js 中，

```
Components.utils.import("chrome://app/content/app1.js"); 
// Error: chrome://app/content/app1.js - EXPORTED_SYMBOLS is not an array 

...
Fooinstance.foo(); 
```

我在 XULRunner 17.0.1 win32 库上运行这个 XUL 应用程序。

我查看了此链接中的代码[https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Using](https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Using)

它没有帮助，如果我将它作为资源包含它可以工作，但是我不想将它作为资源的一部分包含在内。

你能指出什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T18:54:29.757

对于其他人来说，另一个可能的原因是循环依赖。我的情况有点不同，但我有两个 JSM 文件，每个文件都使用 Components.utils.import 相互导入。然后我在其中一个中遇到了这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:49:58.653

我有同样的问题，我解决了它：1）通过.jsm更改文件扩展名（.js）2）在你的模块上添加第一行导出类以共享。例如：

```
var EXPORTED_SYMBOLS = ["Xobject"];

function Xobject(){
}
Xobject.prototype.stop = function() {
    return 'stop';
}
Xobject.prototype.run = function() {
    return 'running';
} 
```

3）以这种方式调用

```
Components.utils.import('resource://gre/modules/Services.jsm' );
Components.utils.import("chrome://myFirstAddOn/content/Xobject.jsm");

var myXobject = new Xobject();
alert(myXobject.run()); 
```

希望对你有帮助

# php - 在php和mono之间共享一个域名

> ID：14056839
> 
> 赞同：0
> 
> 时间：2012-12-27T15:12:27.727
> 
> 标签：php, asp.net, apache, mono, domain-name

我有一个问题：我有一个专用服务器，我在其中使用三个不同的域名和 php.ini。现在，我有了一个用 asp.net 开发的新网站。我安装了 mono、mod_mono 并将我的程序集转移到里面`/var/www/mysite`

当我尝试访问我的网站时，我的问题出现了。我尝试了 IpAdress/mysite/，但它只给出了三个，如果我想要“IpAddress/mysite/Controller1/Action1”，它会显示 404。

正如我所说，我的服务器是 apache，并与具有多个域名的 php 网站一起使用。由于其中一个域名可以用于我自己的网站，我尝试创建一个子域名让我们说`mysite.maindomain.com` 这是文件的内容`/etc/apache/sites-enabled/mysite.maindomain.com`

```
 <VirtualHost *:80>
    ServerName mysite.maindomain.com
    ServerAdmin web-admin@mysite
    DocumentRoot /var/www/mysite

    MonoServerPath sousdomaine.domaineprincipal.com "/usr/bin/mod-mono-server2"
    MonoSetEnv mysite.maindomain.com MONO_IOMAP=all

    MonoApplications mysite.maindomain.com "/:/var/www/mysite"
    <Location "/">
      Allow from all
      Order allow,deny
      MonoSetServerAlias mysite.maindomain.com
      SetHandler mono
      SetOutputFilter DEFLATE
      SetEnvIfNoCase Request_URI "\.(?:gif|jpe?g|png)$" no-gzip dont-vary
    </Location>
    <IfModule mod_deflate.c>
      AddOutputFilterByType DEFLATE text/html text/plain text/xml text/javascript
    </IfModule>
  </VirtualHost> 
```

当我调用 mysite.maindomain.com 时，它显示“137 ERR_NAME_RESOLUTION_FAILED”

我必须进行什么配置才能使 mysite.maindomain.com 或 IpAdress/mysite/ 工作？

# python - 使用 Python 解析 HTML 文档中的文本

> ID：14056841
> 
> 赞同：0
> 
> 时间：2012-12-27T15:12:31.817
> 
> 标签：python, html, parsing

我有这样的东西`<td width='370' style='border-left: 1px solid #fff;'>text I need to get</td>`，我需要使用 Python 获取文本。

我该怎么做？我对这些事情很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:14:53.557

I personally love [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:49:45.903

尝试这个，

```
 >>> html='''<td width='370' style='border-left: 1px solid #fff;'>text I need to get</td>'''
 >>> from BeautifulSoup import BeautifulSoup
 >>> ''.join(BeautifulSoup(html).findAll(text=True))
 u'text I need to get'
 >>> 
```

这个解决方案使用 BeautifulSoup，

如果您的系统上没有安装 BeautifulSoup。你可以这样安装`sudo pip install BeautifulSoup`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:17:22.430

Python有一个内置的html解析器模块......

[http://docs.python.org/2/library/htmlparser.html](http://docs.python.org/2/library/htmlparser.html)

但我推荐[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)（不要让看起来像史前的主页欺骗了你，这是一个非常好的图书馆。）

或者，您可以尝试[lxml](http://lxml.de/)，它也非常好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:18:36.873

使用 Python xml Parser 的解决方案

```
>>> from xml.dom.minidom import parseString
>>> parseString(foo).getElementsByTagName("td")[0].firstChild.nodeValue
u'text I need to get' 
```

使用 BeautifulSOup 的解决方案

```
>>> import BeautifulSoup
>>> BeautifulSoup.BeautifulSoup(foo).getText()
u'text I need to get' 
```

使用 HTMPParser 的解决方案

```
>>> from HTMLParser import HTMLParser
>>> class MyHTMLParser(HTMLParser):
    def handle_data(self, data):
        print data          
>>> MyHTMLParser().feed(foo)
text I need to get 
```

使用正则表达式的解决方案

```
>>> import re
>>> re.findall("<.*?>(.*)<.*?>",foo)[0]
'text I need to get' 
```

# php - wordpress - Increase size of excerpt

> ID：14056849
> 
> 赞同：0
> 
> 时间：2012-12-27T15:13:02.407
> 
> 标签：php, wordpress

I want to increase the textarea size of excerpt in wordpress add new post page. I don't want to make changes in files.

Is there any method to increase the size of textarea of excerpt?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T12:51:34.917

最简单的方法可能是在以下位置添加一些 CSS：

```
#excerpt {
    height: 150px;
} 
```

这将做到你所想的。您可以通过插件或主题轻松使用挂钩将其注入仅限管理员的部分。还有一些插件可以让您添加自定义 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:00:07.407

在您的 functions.php 或任何插件文件中，粘贴以下代码

```
function admin_excerpt()
{
    echo "<style>";
    echo "textarea#excerpt { height: 27em; }";
    echo "</style>";
}
add_action('admin_head', 'admin_excerpt'); 
```

上面的代码将增加摘录文本区域的行数或高度。因此，现在它将显示一个大框，而不是一小框摘录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:03:32.877

此功能将允许您设置摘录中可以包含的单词数。只需将其放入主题的 functions.php 文件中，然后将“20”替换为您希望使用的数字或单词。将它放在文件末尾的结束`?>`标记之前。

```
//custom excerpt length
function aw_custom_excerpt_length( $length ) {
return 20; // set the number to the amount of words you want to appear in the excerpt
}
add_filter( 'excerpt_length', 'aw_custom_excerpt_length'); 
```

# objective-c - Xcode 设备日志的类型和进程都是未知的

> ID：14056856
> 
> 赞同：1
> 
> 时间：2012-12-27T15:13:28.570
> 
> 标签：objective-c, xcode

Xcode 设备日志的进程和类型都未知是什么意思？我的应用程序崩溃了，但我得到的唯一报告是：

```
Incident Identifier: 33E3CEF3-C2A2-4F21-BEB4-56FC9A20AB62
CrashReporter Key:   c51879d0d5337cafa9240e2d296c1239048a4713
Hardware Model:      iPad3,1
OS Version:          iPhone OS 5.1.1 (9B206)
Kernel Version:      Darwin Kernel Version 11.0.0: Sun Apr  8 21:52:26 PDT 2012; root:xnu-1878.11.10~1/RELEASE_ARM_S5L8945X
Date:                2012-12-27 12:11:39 -0300
Time since snapshot: 338 ms

Free pages:        7710
Active pages:      32586
Inactive pages:    19459
Throttled pages:   138248
Purgeable pages:   710
Wired pages:       51955
Largest process:   ukingdom

Processes
         Name                 UUID                    Count resident pages
     pasteboardd <6b71e15d2fe432639d1c8e127a8ede10>     256
        ukingdom <253fa43b568539b49cae65641094284f>  131217 (jettisoned) (active)
     debugserver <2408bf4540f63c55b656243d522df7b2>     316
       gputoolsd <8cd5bb538e623da98b5e85c85bd02a91>     705
      MobileMail <eed7992f4c1d3050a7fb5d04f1534030>    2094 (jettisoned)
     MobilePhone <8f3f3e982d9235acbff1e33881b0eb13>    1661 (jettisoned)
springboardservi <b74f5f58317031e9aef7e95744c816ca>     614
             atc <1e5f2a595709376b97f7f0fa29368ef1>    1849
notification_pro <373a488638c436b48ef0801b212593c4>     173
notification_pro <373a488638c436b48ef0801b212593c4>     157
notification_pro <373a488638c436b48ef0801b212593c4>     177
    syslog_relay <b07876a121a432d39d89daf531e8f2bd>     134
notification_pro <373a488638c436b48ef0801b212593c4>     173
            afcd <c3cc9d594b523fd1902fb69add11c25d>     241
            ptpd <62bc5573db7a352ab68409e87dc9abb9>    1153
        networkd <80ba40030462385085b5b7e47601d48d>     268
      aosnotifyd <8cf4ef51f0c635dc920be1d4ad81b322>     829
        BTServer <31e82dfa7ccd364fb8fcc650f6194790>     561
      aggregated <a12fa71e6997362c83e0c23d8b4eb5b7>     547
            apsd <e7a29f2034083510b5439c0fb5de7ef1>     458
            awdd <67774945965531e98d98c2e23a230526>     398
     dataaccessd <473ff40f3bfd3f71b5e3b4335b2011ee>    1341
    fairplayd.J1 <3884d48fa4393c73aa8b3febf95ca258>    1065
       fseventsd <914b28fa8f8a362fabcc47294380c81c>     571
            iapd <0a747292a113307abb17216274976be5>     741
         imagent <9c3a4f75d1303349a53fc6555ea25cd7>     544
       locationd <cf31b0cddd2d3791a2bfcd6033c99045>     897
   mDNSResponder <86ccd4633a6c3c7caf44f51ce4aca96d>     388
    mediaremoted <327f00bfc10b3820b4a74b9666b0c758>     370
    mediaserverd <f03b746f09293fd39a6079c135e7ed00>    1398
           wifid <3001cd0a61fe357d95f170247e5458f5>     512
          powerd <133b7397f5603cf8bef209d4172d6c39>     268
       lockdownd <b06de06b9f6939d3afc607b968841ab9>     542
CommCenterClassi <041d4491826e3c6b911943eddf6aaac9>     473
     SpringBoard <c74dc89dec1c3392b3f7ac891869644a>   13198 (active)
         configd <ee72b01d85c33a24b3548fa40fbe519c>     540
         syslogd <7153b590e0353520a19b74a14654eaaa>     289
         notifyd <f6a9aa19d33c3962aad3a77571017958>     255
  UserEventAgent <dc32e6824fd33bf189b266102751314f>     605
         launchd <5fec01c378a030a8bd23062689abb07f>     274

**End** 
```

使用 Xcode 4.6 并且它发生在具有不同 IOS 版本的许多不同设备上 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:03:18.197

您添加的报告并没有说明那么多。它仅显示您在崩溃时启用的进程。您可以尝试以下两件事：

1.  尝试在设备上调试时复制崩溃，正如用户 dashdom 告诉你的那样：启用僵尸
2.  `Settings`在>下启用“日志记录”，`Developer`并在正常运行应用程序时将设备连接到 Xcode。使用管理器 (⌘ + ⇧ + 2) 转到`Devices`> `(Your device)`>`Console`并查看控制台中是否弹出任何内容。这可以让你对发生的事情有更多的了解。

希望有帮助。

# php - how can i rewrite my url for only certain pages

> ID：14056860
> 
> 赞同：1
> 
> 时间：2012-12-27T15:14:10.663
> 
> 标签：php, .htaccess, url, rewrite

How can I use .htaccess to rewrite URL for certain pages only?

For example, I want it to work on index.php but not the rest of the pages on the site or on all pages but index.php.

I run in to issues with sub domains and php scripts where the URL redirecting that I am using will mess up stuff. Below is an example of the kind of script I want to use.

```
Options +FollowSymLinks -MultiViews

# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/([^/]+)/?$ index.php/?node=$1&id=$2 [L,QSA]

RewriteRule ^([^/]+)/?$ index.php/?node=$1 [L,QSA] 
```

Can anyone point me in the right direction?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:18:34.240

您可以将 URL 作为 REQUEST_URI 服务器变量传递：

```
RewriteCond %{REQUEST_URI} ^(your_url)$
RewriteRule %1 do_some_stuff 
```

举个例子：

```
RewriteCond %{REQUEST_URI} ^index.php$
RewriteRule %1 - [F] 
```

或者只是传递它`RewriteRule`：

```
RewriteRule ^index.php$ do_some_stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:18:39.747

您应该查看`RewriteCond`.htaccess 的（条件）检查[http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)以获取大量信息和示例。

您也可以只为 index.php 编写一条规则，然后将其标记为最后一条规则`[l]`

```
RewriteRule ^/index.php(.*)   /index.php$1  [L]
RedirectRule ^/(.*)$   /index.php?path=$1  [L] 
```

# java - NullPointer with SQLite creation - Android (java)

> ID：14056861
> 
> 赞同：1
> 
> 时间：2012-12-27T15:14:11.720
> 
> 标签：java, android, sqlite, nullpointerexception

I am getting a NullPointerException in my SQLite database. I am calling the DatabaseHelper class in Results.java by doing this:

```
public class Results extends Activity {
    ...
    DatabaseHelper dh;

    public void onCreate(Bundle savedInstanceState) {
    ...
    dh = new DatabaseHelper(this);
    }

    public void showResults() {
        ...
        dh.insert(1, score, percentage);
    }
} 
```

DatabaseHelper.java

```
public class DatabaseHelper extends SQLiteOpenHelper { 

    private static final int DATABASE_VERSION = 1; 
    private static final String DB_NAME = "test1"; 
    private static final String DB_PATH = "/data/data/com.example.test/databases/";
    private static final String TABLE = "HighscoresList"; 

    // Table columns names. 
    private static final String RANK = "rank"; 
    private static final String SCORE = "score"; 
    private static final String PERCENTAGE = "percentage";

    private SQLiteDatabase myDB;

    public DatabaseHelper(Context context) { 
        super(context, DB_NAME, null, DATABASE_VERSION); 
        myDB = getWritableDatabase();  //Line 25
    }

    //Insert new record.
    public long insert(int rank, long score, int percentage) {
        ContentValues values = new ContentValues();
        values.put(RANK, rank);
        values.put(SCORE, score);
        values.put(PERCENTAGE, percentage);

        return myDB.insert(TABLE, null, values);
    }

    //Delete record.
    public boolean delete(long score) {
        //Need this?
        return true;
    }

    public void openDatabase() throws SQLException {
        //Open the database.
        String myPath = DB_PATH + DB_NAME;
        myDB = SQLiteDatabase.openDatabase(myPath,  null,  SQLiteDatabase.OPEN_READONLY);
    }

    public SQLiteDatabase getDatabase(){
        return this.myDB;
    }

    public synchronized void close() {
        if(myDB != null) {
            myDB.close();
        }
        super.close();
    }

    public void onCreate(SQLiteDatabase db) {
        myDB.execSQL("CREATE TABLE " + TABLE + " ("  //Line 62
                + RANK + " INTEGER,"
                + SCORE + " LONG,"
                + PERCENTAGE + " INTEGER"
                + ");");
    }
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
} 
```

LogCat output

```
12-18 22:01:53.210: E/AndroidRuntime(6313): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Results}: java.lang.NullPointerException
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.os.Looper.loop(Looper.java:137)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at dalvik.system.NativeStart.main(Native Method)
12-18 22:01:53.210: E/AndroidRuntime(6313): Caused by: java.lang.NullPointerException
12-18 22:01:53.210: E/AndroidRuntime(6313):     at com.example.test.DatabaseHelper.onCreate(DatabaseHelper.java:62)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at com.example.test.DatabaseHelper.<init>(DatabaseHelper.java:25)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at com.example.test.Results.onCreate(Results.java:33)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.Activity.performCreate(Activity.java:5008)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-18 22:01:53.210: E/AndroidRuntime(6313):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-18 22:01:53.210: E/AndroidRuntime(6313):     ... 11 more 
```

What is causing the NPE?

Also, any help on code structure for this SQLite highscores I am trying to implement would be helpful as well.

# solr - 多个 Solr 一个应用程序服务器 (Jboss 7.1)

> ID：14056863
> 
> 赞同：1
> 
> 时间：2012-12-27T15:14:19.320
> 
> 标签：solr, jboss7.x

在同一个应用服务器中是否可以有多个 Solr？

如果是，我该怎么做？

我需要 3 个 Solr 实例，我希望它们在同一个应用程序服务器上运行。

我正在使用 Solr 3.6 和 Jboss 7.1

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:18:32.073

这基本上取决于您的要求到底是什么。

如果您的要求只是有 3 个单独的索引来搜索单个应用程序中的 3 个不同模块，那么您可能会在同一个 Solr 服务器中使用多个内核。有关 Solr 内核的更多详细信息，请参阅[http://wiki.apache.org/solr/CoreAdmin](http://wiki.apache.org/solr/CoreAdmin)。

如果您计划为 3 个独立的应用程序托管一个单独的搜索服务器，那么我建议您在不同的端口上使用 3 个 Solr，如上面的答案所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:48:43.457

是的。您可以将它们部署在不同的端口上。

```
http://localhost:8080/solr1

http://localhost:8081/solr2

http://localhost:8082/solr3 
```

等等。

查看此链接中的说明[http://wiki.apache.org/solr/SolrJBoss](http://wiki.apache.org/solr/SolrJBoss)

# php - PHP - E_STRICT：从空值创建默认对象

> ID：14056865
> 
> 赞同：0
> 
> 时间：2012-12-27T15:14:31.600
> 
> 标签：php, strict

我看到这里有大约一百个不同的问题`Creating default object from empty value`。他们似乎都没有真正帮助解决我的问题。

我在方法中分配了同一类的子对象。这会触发`Creating default object from empty value`错误。

```
class myClass {

    function __construct($rootName, $allowHTML = false, $endTag = true) {
        $this->rootElement = $rootName;
        $this->elements = array();
        $this->attributes = array();
        $this->value = "";
        $this->allowHTML = $allowHTML;
        $this->endTag = $endTag;
        $this->styles = array();
        $this->childID = 0;
    }

    // ... OTHER METHODS HERE (ALL PROPERTIES DECLARED)

    function assignElement(&$theElement) {
        // Get the index.
        $index = count($this->elements);

        // Assign the element.
        $this->elements[$index] = $theElement;

        if (get_class($theElement) == get_class($this)) {
            $this->elements[$index]->childID = $index;
        }

        // Return the node.
        return $this->elements[$index];
    }
} 
```

错误发生在`$this->elements[$index]->childID = $index;`。我该如何正确处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:39:33.270

好像你正在传递`NULL`给`assignElement`. `get_class`不带参数或 null 作为参数调用，返回定义它的对象的类，因此`if`对于 null 值，您的条件为真。你应该`is_object`先使用。

# java - 混合 JTA 和 JDBC 事务

> ID：14056872
> 
> 赞同：3
> 
> 时间：2012-12-27T15:15:06.660
> 
> 标签：java, jpa, jdbc, jms, jta

我有一个带有 JMS 和 JPA 的 Java SE(!) 场景，我可能需要分布式事务以及“常规”JDBC 事务。我必须监听一个发送服务请求的队列，在接收时保留日志，处理请求并在处理请求后更新日志。仅当请求已成功处理时，才应确认该消息。

第一个想法是只使用 JTA（由 Bitronix 提供）。但是我面临两个问题：

1.  如果无法处理请求，则不会保留任何日志
2.  如果无法更新日志，则不会处理请求（不太可能但可能）

所以另一个想法是使用常规的 JDBC 事务来创建和更新日志。只有请求事务的实体管理器会加入用户事务，而用于创建和更新日志的实体管理器会直接提交。

是否可以在单个持久性单元上“混合”JTA 和 JPA？或者我们是否已经有了这些 JMS 和 JDBC 事务的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:17:38.277

我实际上用一种稍微不同的方法解决了我的问题。我没有“混合”JTA 和 JDBC 事务，而是使用了*暂停*和*恢复*来处理不同的用户事务。

任务还是一样的：我启动一个（JTA）用户事务，其中包含一些 JMS 和 JDBC 事务（接收消息，执行一些数据库操作）。在那个工作流程的中间，我想写一个消息日志，但是当“外部”事务失败时，日志不会回滚。

所以解决方案是，在伪代码中：

```
 transactionManager.begin()
 doSomeJdbcStuff();
 Transaction main = transactionManager.suspend();

 // do the logging
 transactionManager.begin()  // <- now a new transaction is created and active!
 doSomeLogging();
 transactionManager.commit()

 // continue
 transactionManager.resume(main);
 doSomeMoreJdbcStuff();
 transactionManager.commit(); 
```

# spring-mvc - 读取列表中不存在的 bean

> ID：14056873
> 
> 赞同：0
> 
> 时间：2012-12-27T15:15:10.383
> 
> 标签：spring-mvc

我有一个 application-context-validation.xml

```
<bean id=x class=""/>
<bean id=y class=""/>
<bean id=z class=""/>
<bean id=w class=""/>

<util:list id="list1" list-class="java.util.ArrayList">
<ref bean="x" />
<ref bean="z" />
<ref bean="y" />
</util:list>

<util:list id="list2" list-class="java.util.ArrayList">
<ref bean="x" />
<ref bean="z" />
<ref bean="w" />
</util:list> 
```

在我拥有的服务类中

```
@Autowired
List<String> list1;

@Autowired
List<String> list2; 
```

但是当我阅读 list1 时，所有值 (x,y,z,w) 都会出现。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:52:40.663

更改测试中的注释以将 @Resource 用于此类 bean，通过唯一名称引用特定的集合/映射 bean。

```
@Resource(name="list1")
List<String> list1;

@Resource(name="list2")
List<String> list2; 
```

# angularjs - 如何从工厂发出事件

> ID：14056874
> 
> 赞同：33
> 
> 时间：2012-12-27T15:15:15.607
> 
> 标签：angularjs

如何从工厂或服务发出事件。我无法将 $scope 注入工厂，因此无法发出事件。

我收到以下错误 - `Unknown provider: $scopeProvider <- $scope`

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-27T15:20:14.270

注入 $rootScope 而不是 $scope，然后在 $rootScope 上发出它。

```
myApp.factory('myFactory', ['$rootScope', function ($rootScope) {
    $rootScope.$emit("myEvent", myEventParams);
}]); 
```

工厂无权访问当前的控制器/指令范围，因为没有。他们确实可以访问应用程序的根目录，这就是 $rootScope 可用的原因。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-12-27T15:22:50.930

您不能将控制器的作用域注入服务。你可以做的是：

*   将范围实例作为参数传递给您的服务功能之一：

例如

```
app.factory('MyService', function() {

   return {
      myFunction: function(scope) {
         scope.$emit(...);
         ...
      }
    };
}); 
```

*   将 $rootScope 注入您的服务：

例如

```
app.factory('MyService', ['$rootScope', function($rootScope) {

   return {
      myFunction: function() {
         $rootScope.$emit(...);
         ...
      }
    };
}]); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-19T09:45:26.483

在您的工厂中注入 $rootScope as-

```
myApp.factory('myFactory',function($rootScope){
return({
// use $rootScope as below to pass myEventParams to all below in hierarchy
$rootScope.$broadcast("myEvent",myEventParams);

})
}]); 
```

# python - 平方累加不起作用

> ID：14056875
> 
> 赞同：1
> 
> 时间：2012-12-27T15:15:18.620
> 
> 标签：python, python-3.x

以下脚本应该计算从 0 到 4 的整数平方和。

在数学上，**0²+1²+2²+3²+4²=30**，但脚本在 Python 3.2 上运行时会打印**4 ！**为什么？

```
total = 0
for val in range(5):
    vаl = val * val
    tоtal = total + val

print(tоtal) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T15:28:35.143

# javascript - javascript“小于”if语句失败

> ID：14056878
> 
> 赞同：3
> 
> 时间：2012-12-27T15:15:38.727
> 
> 标签：javascript, if-statement

这是我的功能：

```
function reCalculate(i) {
    document.getElementById("Q" + i).value = document.getElementById("C" + i).value - document.getElementById("QA" + i).value;

    if (document.getElementById("Q" + i).value < 0) {
        document.getElementById("Q" + i).value = 0;
    }
    if (document.getElementById("Q" + i).value < document.getElementById("E" + i).value && document.getElementById("Q" + i).value != 0) {
        alert(document.getElementById("Q" + i).value + " is less than " + document.getElementById("E" + i).value + "?");
        document.getElementById("Q" + i).value = document.getElementById("E" + i).value;
    }
    document.getElementById("Q" + i).value = Math.ceil(document.getElementById("Q" + i).value);
} 
```

它检查 Q，如果它小于 0，则将其设为 0。然后，如果它不为 0，但小于 E，则将其设为 E。出于某种原因，此函数有效，除非 Q 是两位数。

例如，如果 Q 为 7，E 为 2，那么它将 Q 保留为 7。但是，如果 Q 为 10，E 为 2，由于某种原因，它认为 10<2，并将 Q 更改为 2！

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T15:17:57.480

当您拉出`.value`一个元素时，它会返回一个字符串。`'10'<'2'`将返回真。

您可以简单地对值执行 parseInt/parseFloat，ala

```
var q = parseInt(document.getElementById("Q"+i).value,10) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:17:25.683

那是因为它在比较时将您`Q`视为**字符串**。

请尝试以下操作：

```
function reCalculate(i){

    var Z = document.getElementById, P = parseInt; 

    var qElem = Z("Q"+i);
    var q = P(qElem.value, 10);
    var c = P(Z("C"+i).value, 10);
    var qa = P(Z("QA"+i).value, 10);
    var e = P(Z("E"+i).value, 10);

    q = c - qa;

    if (q < 0) qElem.value = 0;

    if (q < e && q != 0){
        alert(q+" is less than "+e+"?");
        qElem.value = e;
    }

    qElem.value = Math.ceil(q);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:17:56.590

也许你应该做一个

```
parseFloat(document.getElementById("Q"+i).value) 
```

确保您在比较数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:20:59.720

您正在比较*字符串*而不是数字。使用一元`+`转换为数字：

```
if (+document.getElementById("Q" + i).value < +document.getElementById("E" + i).value ...) 
```

顺便说一下，您应该使用变量：

```
var input_one = document.getElementById("Q" + i).value,
    input_two = document.getElementById("E" + i).value;

if (+input_one < +input_two) {

} 
```

# asp.net-mvc - MVC 请求生命周期 - 何时/如果发生对象处置？

> ID：14056879
> 
> 赞同：2
> 
> 时间：2012-12-27T15:15:40.820
> 
> 标签：asp.net-mvc, httprequest, dispose, lifecycle

> **可能重复：**
> [与 ASP.NET WebForms 相比，ASP.NET MVC 页面的“页面生命周期”是什么？](https://stackoverflow.com/questions/460145/what-is-the-page-lifecycle-of-an-asp-net-mvc-page-compared-to-asp-net-webform)

在 ASP.NET MVC 中，我在我读过的大量“页面生命周期”或“请求生命周期”文章中找不到任何涉及对象处理的文章。在操作方法中，如果我创建到数据库的连接（或者可能创建到 EF 的上下文），如果我没有显式调用 dispose，它是否会被释放？

我知道模型绑定到视图可能仍然需要一个打开的连接（特别是如果它正在为具有关联的 EF 对象提供服务），但是它是否会处理在请求期间实例化的所有内容？如果是这样，有人可以向我指出这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:22:42.120

为每个请求创建一个控制器对象的新实例。这意味着一旦执行操作，对该控制器的引用就会丢失。它留给垃圾收集器来处理和关闭所有资源密集型对象。

因此，最佳实践始终是关闭并处理 action 方法本身中的所有重载对象。

我知道在绑定 EF 对象时视图需要实时连接。同样，这里的最佳实践是在绑定到视图之前枚举它们。

您的问题的答案是 - 垃圾收集器将负责处理或关闭在操作方法中保持打开的连接 - 这是灾难的公式。

**编辑** 注意：控制器类实现了 IDisposable，所以它应该在请求被处理后被处理掉。但是，当我检查 DefaultControllerFactory 的源代码时，我无法确定任何使用范围或显式处置调用。

参考

```
http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5d4159c85ff6#src/System.Web.Mvc/DefaultControllerFactory.cs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:21:50.597

在请求完成后，控制器范围或操作范围中声明的所有内容都会被释放。

# html - How to set an input's background transparency?

> ID：14056881
> 
> 赞同：-1
> 
> 时间：2012-12-27T15:15:46.620
> 
> 标签：html, css

```
input[type="text"], input[type="password"]{
    opacity:0.5;
} 
```

This fades both - input body and border. I don't want border transparent, just body, so the underlying image is visible. User-text inside the input should not be transparent, of course.

```
input [type="submit"]{
    margin-left:50px;  // here nothing works at all.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:17:24.233

不透明度适用于整个文本输入，包括其中的文本。所以你的代码不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:37:34.863

该`opacity`属性影响整个元素的不透明度。你的问题有点含糊，但我假设你想要一个半透明的背景，而内容和边框不应该有透明度。

为此，您需要为元素设置半透明背景。这称为 alpha 透明度，因为第四个颜色通道 - alpha 通道 - 用于存储透明度信息（通常在像 PNG 这样的图像中）。

在现代浏览器中，您可以使用`rgba()`该属性的值`background`：

```
/* semi-transparent white background */
background: rgba( 255, 255, 255, .5 ); 
```

在 MS IE 中，您可以使用渐变过滤器，该过滤器从 MS IE 5 开始支持 ARGB 颜色。只需从一种颜色淡入到自身：（请注意，alpha 通道首先出现，所有四个颜色值都被标记为两位十六进制数）

```
/* the same for IE 7+8, should get included in a separate MS IE specific stylesheet */
background: none;
zoom: 1;
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=#E5FFFFFF, endColorstr=#E5FFFFFF );
-ms-filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=#E5FFFFFF, endColorstr=#E5FFFFFF ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:26:35.673

选项**1** ) 你可以使用**CSS3**吗？如果是这样，请使用（当然，使用您想要的颜色）：

```
background-color: rgba(255,0,0,0.5); 
```

选项**2**）您可以将输入的背景设置为您想要看到的**图像。**

选项**3**）您可以将背景设置为**半透明纯色图像**（.gif/.png，大小可以是 1x1，并在 X 和 Y 方向重复）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:18:44.860

对于提交，您需要[删除选择器中的空间](http://jsfiddle.net/8qJjQ/)：

```
input[type="submit"]{
  margin-left:50px; 
}​ 
```

而且您无法指定要使用透明元素的哪些部分`opacity`。它适用于 err'thang。可能有各种“黑客”来实现您想要的，例如使用包装 div 来创建边框。

# java - 将 C++ 语句转换为 Java

> ID：14056887
> 
> 赞同：-3
> 
> 时间：2012-12-27T15:16:10.537
> 
> 标签：java, c++

可能我的头不工作，但我怎么能把它转换成 Java

```
int c = 0;

// Code

c = !c;
return c; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:19:16.450

如果你要返回 int 那么`return c == 0 ? 1 : 0;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:17:31.620

您可能想改用**布尔值**。

```
public boolean method() {
  boolean bool = false;    
  return !bool;
} 
```

# javascript - get CSS back on dynamic phonegap apps (jQuery) $().append issue

> ID：14056890
> 
> 赞同：1
> 
> 时间：2012-12-27T15:16:29.790
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

I am having issues getting my CSS back when I append results from my database.

Here is my function:

```
function querySuccessOrders(tx, results) {
    console.log("Successful QUERY of the orders Table");
    var len = results.rows.length;
    console.log("orders table: " + len + " rows found.");
    for (var i=0; i<len; i++){
        $('#acceptedOrdersContent').append('<li><a href="#CompleteOrderInfo'+results.rows.item(i).OrderID+'">'+results.rows.item(i).OrderID+'</a></li>');
    }
} 
```

The issue is that I am losing the formatting so the list item no longer links to anything (it's not clickable). I have tried to add the `.page()` to the end and that is not working. Can anyone show me how to add the style sheet back to the new stuff that I append from the database?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:46:10.153

如果您使用的是 jQuery 移动列表视图，则应在填充列表视图后刷新它。

可以这样做：

```
$('#acceptedOrdersContent').listview('refresh'); 
```

这是给你的一个例子：http: [//jsfiddle.net/Gajotres/8uac7/](http://jsfiddle.net/Gajotres/8uac7/)。在此示例中，我使用 $.ajax 加载一些远程数据并在列表视图中动态显示它。填充列表视图后，我正在调用***.listview('refresh');*** 重新设计它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:41:28.833

尝试这个：

```
$('#acceptedOrdersContent').trigger('create'); 
```

那应该强制`jquery-mobile`应用样式。如果它仍然不起作用，请尝试在整个页面中执行此操作。

# sql-server - F# DataTable to SQL using SqlBulkCopy

> ID：14056891
> 
> 赞同：4
> 
> 时间：2012-12-27T15:16:32.993
> 
> 标签：sql-server, f#, sqlbulkcopy

I have an F# program that creates a `DataTable`, populates it with one row and then writes the data to SQL Server using bulk insert (`SqlBulkCopy`).

Although it's working, I can't really figure out how to include a loop that will generate a number of list items / data rows which I can then insert in one statement, rather than having to bulk insert a single row at a time (which is the current case)

here's my code:

```
open System
open System.Data
open System.Data.SqlClient

let lcpSqlConnection = new SqlConnection("<my-connection-string>")
lcpSqlConnection.Open()
let bulkLoadEsgData (conn:SqlConnection) (esgTable: list<byte * byte * int * byte * byte * single>) =
    use sbc = new SqlBulkCopy(conn, SqlBulkCopyOptions.TableLock, null, BatchSize=10000, BulkCopyTimeout=1200, DestinationTableName="dbo.myTable")
    sbc.WriteToServer(
        let dt = new DataTable()
        ["Measure", typeof<byte>
        "Identifier", typeof<byte>
        "Simulation", typeof<int>
        "Time", typeof<byte>
        "Duration", typeof<byte>
         "Result", typeof<single>]
        |> List.iter (dt.Columns.Add>>ignore)

        for esgData in esgTable do
            let esg_measure, identifier, simulation, time, duration, result = esgData
            let dr = dt.NewRow()
            dr.["Measure"] <- esg_measure
            dr.["Identifier"] <- identifier
            dr.["Simulation"] <- simulation
            dr.["Time"] <- time
            dr.["Duration"] <- duration
            dr.["Result"] <- result
            dt.Rows.Add(dr)

        dt)

let myList: list<byte * byte * int * byte * byte * single> = [(byte)1,(byte)1,1, (byte)1,(byte)1,(single)0.111]

// Call method to bulk insert data row
bulkLoadEsgData lcpSqlConnection myList

lcpSqlConnection.Close() 
```

I think I need to include a for loop inside the `bulkLoadEsgData` method, to make the code run efficiently. Except I've no idea what to do / where to write that

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:55:03.840

我设法解决了这个问题

```
sbc.WriteToServer(
    let dt = new DataTable()
    dt.Columns.Add("Measure", typeof<byte>) |> ignore
    dt.Columns.Add("Identifier", typeof<byte>) |> ignore
    dt.Columns.Add("Simulation", typeof<int>) |> ignore
    dt.Columns.Add("Time", typeof<byte>) |> ignore
    dt.Columns.Add("Duration", typeof<byte>) |> ignore
    dt.Columns.Add("Result", typeof<single>) |> ignore

    for i= 1 to 100 do
        dt.Rows.Add(i, i, i, i, i, (float)i*0.11) |> ignore

    dt) 
```

# c - Getting size of field in libpq-fe

> ID：14056894
> 
> 赞同：0
> 
> 时间：2012-12-27T15:16:41.387
> 
> 标签：c, postgresql, libpq

I am using the `libpq-fe` library in `C` to contact to a postgres database.
I am calling a stored procedure from my code using `libpqfe` which returns a timestamp.
I want to store this timestamp to a char array. But to do so I first have to know the size of timestamp so that I can declare the array. To get the size I am using `int PQfsize(PGresult *res, int field_index);`. You can found more about it [here](http://www.postgresql.org/docs/6.4/static/libpq-chapter16943.htm).

It returns the value `8`. But actually the size of the timestamp(without zone) is `19`.

**Why PQfsize is returning wrong value?**

I know that size of the timestamp is constant and I can directly declare an array and then retrieve the value using `PQgetvalue`, but how to declare arrays for the fields which don't have fixed size.

How to retrieve a field from `PGresult` to store it into any variable?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T18:37:46.090

PQfsize 没有返回错误的值。

如果您运行下面的查询，您还将得到答案 8，因为在您的 Postgres 版本内部，时间戳存储为 8 字节（64 位）整数。

```
select typlen from pg_type where oid = 'timestamp'::regtype::oid; 
```

根据您链接的文档， PQfsize 返回为数据库元组中的该字段分配的空间，换句话说，服务器的数据类型二进制表示的大小。

PQgetlength 返回字段（属性）的长度（以字节为单位）。元组和字段索引从 0 开始。

这是特定数据值的实际数据长度，即 PQgetvalue 指向的对象的大小。请注意，对于 ASCII 表示的值，此大小与`PQfsize`.

为了声明没有固定大小的数组，在创建它之前使用数组的大小`PQgetlength`（应该返回 19）并通过指定将数据作为文本获取`PQexecParams`为`resultFormat`0。如果你只是使用`PQexec`then数据默认以文本形式返回。

[此处](http://momjian.us/main/writings/pgsql/aw_pgsql_book/node146.html)提供了使用 libpq 的示例。

要修改此示例，以便仅打印值，它会根据数据的长度创建一个字符数组并将数据复制到数组中，您可以将 for 循环替换为类似的内容

```
 for (i = 0; i < PQntuples(res); i++)                
      {
           int length = PQgetlength(res, i, 0);
           char result[length];
           printf("%s\n", PQgetvalue(res, i, 0));           
           strncpy (result,PQgetvalue(res, i, 0),length);
      } 
```

您还需要添加`#include <string.h>`到示例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:47:24.643

来自[精美手册](http://www.postgresql.org/docs/current/static/libpq-exec.html#LIBPQ-PQFSIZE)：

> `PQfsize`返回在数据库行中为该列分配的空间，即服务器内部数据类型表示的大小。

因此`PQfsize`返回服务器内部二进制表示中的字节数 a `timestamp`。

a[`timestamp`](http://www.postgresql.org/docs/9.2/interactive/datatype-datetime.html#DATATYPE-DATETIME-TABLE)的存储大小为 8 个字节。基本上，你得到的是服务器的内部`timestamp`字节，而不是你正在寻找的人类可读的字符串。

您可能希望使用[`PQExecParams`](http://www.postgresql.org/docs/current/static/libpq-exec.html#LIBPQ-PQEXECPARAMS)with `resultFormat`set to zero 来获取结果中的文本值，而不是二进制值。如果你这样做，你应该得到`timestamp`你期望的 a 的字符串表示，但是你必须做一些字符串解析来将 a 的内容转换为本`PGresult`机类型。

# jquery - 2个文本字段之间的JQuery验证

> ID：14056910
> 
> 赞同：-2
> 
> 时间：2012-12-27T15:17:29.757
> 
> 标签：jquery

我有两个只有数字的文本字段。在第一个文本字段中，我有数字 100。当我在第二个文本字段中写一个大于 100 的数字时，我想得到一个警报，我只能写一个小于 100 的数字。

```
Limit : <input type="text" class="inputGU" id="Sel1" readonly="readonly" value="100" >
<br><br>
Get :<input type="text" class="inputGU" id="Sel2" value="" >​ 
```

第二个文本框的值必须小于第一个文本框的值

这可以用 JQuery 吗？

[http://jsfiddle.net/ExaVH/](http://jsfiddle.net/ExaVH/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:27:17.037

使用 jQuery 是完全有可能的，你可以使用这样的东西：

```
$(document).ready(function(e){
    $('#Sel2').change(function(e){
        var val1 = $('#Sel1').val();
        if(parseInt($(this).val()) > parseInt(val1)){
            alert("The value must be smaller than "+val1);
            $(this).val('');        
        }   
    });        
});​ 
```

在这个[jsFiddle中查看它的实际效果](http://jsfiddle.net/VhLKg/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:27:52.553

怎么样：

```
$("input").change(function() {

        if(parseInt($("#Sel2").val()) > parseInt($("#Sel1").val()))
        {
            alert("exceeded limit");
        }
    }
); 
```

现场演示：http: [//jsfiddle.net/ExaVH/7/](http://jsfiddle.net/ExaVH/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:31:00.550

试试这个：

js：

```
$('#Sel2').change(function(){
    var inputGUVal = Number ($('#Sel2').val());
    var inputGULimit = Number ($('#Sel1').val());
    if (inputGUVal > inputGULimit){
        alert ('Choose a number below a ' + inputGULimit )
    }
})​ 
```

测试：http: [//jsfiddle.net/ExaVH/15/](http://jsfiddle.net/ExaVH/15/)

# php - pdo codeigniter 不执行更新查询

> ID：14056913
> 
> 赞同：0
> 
> 时间：2012-12-27T15:17:38.140
> 
> 标签：php, codeigniter

我正在尝试使用此查询更新表，但似乎不起作用。

```
 $query="UPDATE product SET qty = (qty - '$qty') WHERE barcode = '$barcode'";  
  $result = $this->db->conn_id->prepare($query);
  $result->execute(); 
```

我尝试将查询放在 try catch 块中，但它不会引发任何错误。问题在于 CodeIgniter 中的实现，因为此查询在 codeigniter 外部执行时有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:32:57.040

查看您的代码有几件事。

您没有正确使用准备好的语句。使用准备好的语句的好处是通过不同的函数传入你需要的变量，这样你就可以正确地转义它们。考虑以下：

```
$query="UPDATE product SET qty = (qty - ':qty') WHERE barcode = ':barcode'";  

$stmt = $this->db->conn_id->prepare($query);

$stmt->bindParam(':qty', $qty, PDO::PARAM_STR);
$stmt->bindParam(':barcode', $barcode, PDO::PARAM_STR);

$stmt->execute();  

echo "Rows affected: " . $stmt->rowCount(); 
```

在这里，我们进行查询并设置其中的参数。然后我们将变量绑定到语句，以便它们被正确转义。之后我们可以执行该语句，然后使用该`fetch()`函数来获取我们的响应。传入的枚举会将结果作为关联数组返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:55:49.023

如果受影响的行为零，我猜查询是正确的，看看数据库中是否存在条形码变量的值

# java - 什么时候应该在变量名中使用美元符号 ($)？

> ID：14056918
> 
> 赞同：27
> 
> 时间：2012-12-27T15:17:56.473
> 
> 标签：java, naming-conventions

美元符号 ($) 是命名变量的有效字符，例如`String superSecretFormula$;`，但是当我们谈论命名约定时，我应该什么时候使用这个符号？

例如下划线主要用于分隔单词，因为不能使用空格。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-27T15:31:06.010

来自[标识符的 Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)：

> 该`$`字符应仅用于机械生成的源代码中，或者很少用于访问遗留系统上预先存在的名称。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-27T15:22:31.240

您的问题被标记为 Java，但看起来您在询问[type characters](http://msdn.microsoft.com/en-us/library/s9cz43ek%28v=vs.80%29.aspx)，Visual Basic 仍然支持这些类型，但这些天（也不是很长时间）没有广泛使用。

这有点主观，但我认为公平地说：*从不*

在编写 JavaScript 代码以[区分 jQuery 对象](https://stackoverflow.com/questions/205853/why-would-a-javascript-variable-start-with-a-dollar-sign)时，您*可能*希望在变量名称前加上前缀。`$`

## 编辑

关于以 开头的变量名`$`，[Oracle Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)告诉我们：

> 变量的名称可以是任何合法标识符——无限长度的 Unicode 字母和数字序列，以字母、美元符号“ `$`”或下划线字符“ `_`”开头。然而，惯例是始终以字母开头变量名，而不是“ `$`”或“ `_`”。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-27T15:28:06.643

从理论上讲，您可以在变量名中使用美元符号，但强烈建议不要这样做，因为编译器内部会使用该符号（例如内部或匿名类的名称）。

请参考stackoverflow上的两个相关问题：[变量名中的$是什么意思？](https://stackoverflow.com/questions/7484210/what-is-the-meaning-of-in-a-variable-name)[如果存在内部类，则包含美元符号的 Java 类名无法](https://stackoverflow.com/questions/6167326/java-class-name-containing-dollar-sign)编译

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-11T08:09:22.760

**名称与合成字段冲突**

McDowell[引用了 JLS](https://stackoverflow.com/a/14057101/895245)，这是一个由于与合成字段的名称冲突而无法在 Oracle JDK 1.8.0_45 上编译的示例：

```
public class Assert {
    static final boolean $assertionsDisabled = false;
    public static void main(String[] args) {
        assert System.currentTimeMillis() == 0L;
    }
} 
```

问题是`javac`生成一个字段`$assertionsDisabled`来实现`assert`，这与我们的字段冲突，并`javac`说：

```
the symbol $assertionsDisabled conflicts with a compile synthesized symbol 
```

另请参阅：[Java assert 关键字有什么作用，何时应该使用它？](https://stackoverflow.com/questions/2758224/what-does-the-java-assert-keyword-do-and-when-should-it-be-used/29439538#29439538)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-07T10:49:45.880

我同意，一般来说，应该避免使用特殊符号 $，[正如 Richard 所解释的那样](https://stackoverflow.com/a/14056986/3114469)。[但是，我记得在reactor 项目](https://github.com/reactor/reactor-samples/blob/master/src/main/java/org/projectreactor/samples/EventBusSamples.java)中看到使用 $ 来定义类似 jQuery 的选择器。我认为，谨慎使用 $ 符号有助于在 Java 中定义一些漂亮的 API。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-22T12:18:18.357

在 Java 中，我使用“_”作为私有类范围的非静态变量或字段的前缀，并使用“$”作为私有类范围的静态变量的前缀。

它比使用“m”前缀更好，因为它不会阻塞读取行。当你开始阅读变量词时，你显然不会开始阅读“_”或“$”，对吧？像***_addressMap***或***$addressMap***但在 Map ***mAddressMap***中使用 m时，在您开始阅读它时可能会感到困惑。

尽管它不是传统的 Java 代码，但它对标记这些变量有很大帮助，这样您就可以迅速理解它们是否是类范围的，或者是静态的还是非静态的。当然，您必须与您的队友直接讨论这个问题。

# javascript - 基于 CSS 规则的 SlickGrid 行高

> ID：14056923
> 
> 赞同：3
> 
> 时间：2012-12-27T15:18:19.987
> 
> 标签：javascript, css, slickgrid

目前我正在以编程方式设置 SlickGrid 槽选项中的行的高度：

```
var options = {
    rowHeight: 30
}; 
```

有没有什么办法可以在不修改 slick-grid 默认实现的情况下通过 CSS 规则来做到这一点？

我问这个是因为我不想根据 CSS 媒体查询设置行高。

我最初的想法是以编程方式读取 CSS 属性（类似[这样](https://stackoverflow.com/q/324486/617996)）并像这样设置 readen 值：

```
var options = {
    rowHeight: readRowHeightCSSValue()
}; 
```

...但我不确定这是否是最好的主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:28:12.657

只需根据窗口的宽度设置行高。

```
rowHeight: $(window).width() < 1024 ? 30 : 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:09:43.740

我最初用一种不同的方法解决了我的问题，所以我分享了对我有用的解决方案。

我使用[enquire.js](http://enquire.js)与我的样式表中相同的 CSS 媒体查询：

```
enquire.register("only screen and (max-width: 1024px)", {
    match : function() {
        slickGridInitialRowHeight = 15;
    }
}).fire();

enquire.register("only screen and (min-width: 1024px)", {
    match : function() {
        slickGridInitialRowHeight = 30;
    }
}).fire(); 
```

...在那之后，我曾经`slickGridInitialRowHeight`初始化 SlickGrid。

# bash - Bash：处理日志文件输出的格式

> ID：14056925
> 
> 赞同：2
> 
> 时间：2012-12-27T15:18:25.183
> 
> 标签：bash, sed, string-formatting

我有一个字符串格式问题，虽然我知道我想做什么，但我不确定该怎么做。我希望这里的某个地方可以提供帮助。我的问题看起来像这样：

在我的脚本中，我使用函数来编写使用标准化但可变长度、标题和用户定义的消息正文的日志输出。消息的长度和终端宽度意味着消息经常环绕。我想要做的是在换行的行中插入“填充”，以便消息在日志中出现更多格式。

这是我的部分工作代码的改编和未经测试的摘录。它显示了我想要做的事情：

```
local __mgs_hdr="[${__DATE}@${__TIME} ${__script}] -> "
local __msg_body="${1}"
local __hdrlen=$(expr length $__msg_hdr)
local __msglen=$(expr length $__msg_body)
local __max_msglen=$(expr 80 - $__hdrlen)
local __line=""

if [ $__msglen -gt $__max_mslen ]; then # we need to format the message
    # Insert newline followed by "$__hdrlen" whitespaces into $__msq_body at $_hdrlen intervals
    # to align/justify log lines as blocks of text for each log header entry
    # Replace the : with a command to format $__line
    :
else
    __line="${__msg_hdr}${__msg_body}"
fi 
```

因此，我有一种方法可以确定何时填充日志行，并且我认为 sed 可以做到这一点。我只是不知道怎么做。如果有人能指出我正确的方向，我将不胜感激。

这是使用静态格式生成的示例输出。它显示了我想要达到的目标：

```
[2012-12-27@15:56:43 test.sh] -> Writing a log file entry that 
                                 is wrapped onto the next line 
                                 with appropriate formatting... 
```

我希望这使我想要实现的目标更加清晰。行长与 80 个字符的终端不匹配，但该示例是说明性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:22:06.443

这是一个可以帮助您的函数（在 bash 中）：

```
print_padded() {
    local header=$1
    local msg=( $2 )
    local width=$3
    local headerlength=${#header}
    local i=0
    local spaceleft=$((width-headerlength))
    local defaultspace=20
    (((spaceleft<0) && (spaceleft=defaultspace)))
    local buf=()
    local s
    printf "%s" "$header"
    while ((i<${#msg[@]})); do
       if ((${#msg[i]}+1<=spaceleft)); then
          printf " %s" "${msg[i]}"
          ((spaceleft-=${#msg[i++]}+1))
       else
          echo
          (((spaceleft=width-headerlength)<0 && (spaceleft=defaultspace)))
          while ((${#msg[i]}>=spaceleft)); do
             (((s=width-${#msg[i]})<0 && (s=0)))
             printf "%${s}s%s\n" '' "${msg[i++]}"
          done
          printf "%${headerlength}s" ''
       fi
    done
    echo
} 
```

然后用作，例如，

```
$ # Demo with 40 columns...
$ msg="Writing a log file entry that is wrapped onto the next line with appropriate formatting..."
$ print_padded "[2012-12-27@15:56:43 test.sh] ->" "$msg" 40
[2012-12-27@15:56:43 test.sh] -> Writing
                                 a log
                                 file
                                 entry
                                 that is
                                 wrapped
                                 onto
                                 the
                                 next
                                 line
                                 with
                             appropriate
                           formatting...
$ # Demo with 60 columns:
$ loremipsum="Lorem ipsum dolor sit amet, consectetur adipiscing \
elit. Duis erat purus, vestibulum non sollicitudin ornare, aliquam \
nec mi. In vulputate velit ut felis porta tincidunt. Integer odio \
odio, ullamcorper id ultricies a, fermentum vitae augue. \
Nunc sapien ipsum, dignissim sit amet eleifend eu, suscipit sed eros. \
In hac habitasse platea dictumst. Morbi feugiat interdum ligula \
eu consectetur. Sed congue lacinia felis, a adipiscing nibh \
aliquam in. Vestibulum ante ipsum primis in faucibus orci luctus \
et ultrices posuere cubilia Curae; Proin faucibus ultrices tincidunt."
$ print_padded "loremipsum ->" "$loremipsum" 60
loremipsum -> Lorem ipsum dolor sit amet, consectetur
              adipiscing elit. Duis erat purus, vestibulum
              non sollicitudin ornare, aliquam nec mi. In
              vulputate velit ut felis porta tincidunt.
              Integer odio odio, ullamcorper id ultricies a,
              fermentum vitae augue. Nunc sapien ipsum,
              dignissim sit amet eleifend eu, suscipit sed
              eros. In hac habitasse platea dictumst. Morbi
              feugiat interdum ligula eu consectetur. Sed
              congue lacinia felis, a adipiscing nibh
              aliquam in. Vestibulum ante ipsum primis in
              faucibus orci luctus et ultrices posuere
              cubilia Curae; Proin faucibus ultrices
              tincidunt. 
```

现在我希望您的消息中没有任何格式垃圾（例如，颜色代码等），否则此脚本将失败。

它打破了单词的行（在空格处）。正如您将在第一个输出中看到的那样，如果一条线太长而无法容纳，则将其平齐（如果可能）放在它自己的一条线上。

如果您不关心在单词中间打断，那会容易得多：

```
print_padded() {
    local header=$1
    local msg=$2
    local width=$3
    local headerlength=${#header}
    local i
    local msgspace=$((width-headerlength))
    (((msgspace<0) && (msgspace=20)))
    printf "%s %s\n" "$header" "${msg:$i:$msgspace}"
    for ((i=msgspace;i<${#msg};i+=msgspace)); do
        printf "%${headerlength}s %s\n" '' "${msg:$i:$msgspace}"
    done
} 
```

然后：

```
$ # Demo with 40 columns...
$ msg="Writing a log file entry that is wrapped onto the next line with appropriate formatting..."
$ print_padded "[2012-12-27@15:56:43 test.sh] ->" "$msg" 40
[2012-12-27@15:56:43 test.sh] -> Writing 
                                 a log fi
                                 le entry
                                  that is
                                  wrapped
                                  onto th
                                 e next l
                                 ine with
                                  appropr
                                 iate for
                                 matting.
$ # Demo with 60 columns:
$ loremipsum="Lorem ipsum dolor sit amet, consectetur adipiscing \
elit. Duis erat purus, vestibulum non sollicitudin ornare, aliquam \
nec mi. In vulputate velit ut felis porta tincidunt. Integer odio \
odio, ullamcorper id ultricies a, fermentum vitae augue. \
Nunc sapien ipsum, dignissim sit amet eleifend eu, suscipit sed eros. \
In hac habitasse platea dictumst. Morbi feugiat interdum ligula \
eu consectetur. Sed congue lacinia felis, a adipiscing nibh \
aliquam in. Vestibulum ante ipsum primis in faucibus orci luctus \
et ultrices posuere cubilia Curae; Proin faucibus ultrices tincidunt."
$ print_padded "loremipsum ->" "$loremipsum" 60
loremipsum -> Lorem ipsum dolor sit amet, consectetur adipisc
              ing elit. Duis erat purus, vestibulum non solli
              citudin ornare, aliquam nec mi. In vulputate ve
              lit ut felis porta tincidunt. Integer odio odio
              , ullamcorper id ultricies a, fermentum vitae a
              ugue. Nunc sapien ipsum, dignissim sit amet ele
              ifend eu, suscipit sed eros. In hac habitasse p
              latea dictumst. Morbi feugiat interdum ligula e
              u consectetur. Sed congue lacinia felis, a adip
              iscing nibh aliquam in. Vestibulum ante ipsum p
              rimis in faucibus orci luctus et ultrices posue
              re cubilia Curae; Proin faucibus ultrices tinci
              dunt. 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:25:20.280

如果脚本名称 is_a_really_long_name.sh 会发生什么？

```
[2012-12-27@15:56:43 is_a_really_long_name.sh] -> Writing a lo
                                                  g file entry 
                                                  that is wrapp
                                                  ed onto the n
                                                  ext line with
                                                  appropriate f
                                                  ormatting... 
```

如果您关心格式化，那么为什么不将您的标题放在一行上，并将日志消息格式化在它下面的行上

```
[2012-12-27@15:56:43 is_a_really_long_name.sh] ->
Writing a log file entry that is wrapped onto the next line with appropriate
formatting... 
```

* * *

一些代码 - 前者

```
#!/bin/bash
headerlen=40
maxlinelen=79
linelen=$maxlinelen-headerlen
spaces="                                                                               "
msg="This is a message that needs to be split into chunks that are the same width. For illustrative purpose only. Your milage mag vary."

msglen=${#msg}
start=0
while [ $start -lt  $msglen ]
do
    echo -n "${spaces:1:$headerlen}"
    echo "${msg:$start:$linelen}"
    let start=$start+$linelen
done 
```

如果你想做后者，那么你可以使用这样的东西来分割你的消息

```
#!/bin/bash

linelen=10

msg="This is a message that needs to be split into chunks that are the same width. For illustrative purpose only. Your milage mag vary."

msglen=${#msg}
start=0
while [ $start -lt  $msglen ]
do
    echo "${msg:$start:$linelen}"
    let start=$start+$linelen
done 
```

# ruby-on-rails - Mhartl，第 9 章 - 用户页面，编辑页面失败

> ID：14056935
> 
> 赞同：0
> 
> 时间：2012-12-27T15:18:54.580
> 
> 标签：ruby-on-rails, ruby, rspec, railstutorial.org

我正在学习 Michael Hartls RoR 教程，这是我的第一次编码体验。

在过去的几天里，我因 rspec 失败而失去了一些头发 - 希望你们能提供帮助。

Mhartl，第 9 章 - 清单 9.3

> bundle exec rspec spec/requests/user_pages_spec.rb -e "edit page" 运行选项：include {:full_description=>/edit\ page/}

```
 Failure:
    1) User pages edit page 
         Failure/Error: it { should have_selector('title', text: "Edit user") }
           expected css "title" with text "Edit user" to return something
         # ./spec/requests/user_pages_spec.rb:75:in `block (4 levels) in <top (required)>'

3 examples, 1 failure

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:75 # User pages edit page 
```

用户页面规范：

```
 require 'spec_helper'

    describe "User pages" do

      subject { page }

      describe "signup page" do
        before { visit signup_path }

        it { should have_selector('h1',    text: 'Sign up') }
        it { should have_selector('title', text: 'Sign up') }
      end

      describe "profile page" do
        let(:user) { FactoryGirl.create(:user) }
        before { visit user_path(user) }

        it { should have_selector('h1',    text: user.name) }
        it { should have_selector('title', text: user.name) }
      end

      describe "signup" do

        before { visit signup_path }

        let(:submit) { "Create my account" }

        describe "with invalid information" do
          it "should not create a user" do
            expect { click_button submit }.not_to change(User, :count)
          end

          describe "after submission" do
            before { click_button submit }

            it { should have_selector('title', text: 'Sign up') }
            it { should have_content('error') }
            it { should_not have_content('Password digest') }
          end
        end

        describe "with valid information" do

          before do
            fill_in "Name",         with: "Example User"
            fill_in "Email",        with: "user@example.com"
            fill_in "Password",     with: "foobar"
            fill_in "Confirmation", with: "foobar"
          end

          it "should create a user" do
            expect { click_button submit }.to change(User, :count).by(1)
          end

          describe "after saving the user" do
            before { click_button submit }

            let(:user) { User.find_by_email('user@example.com') }

            it { should have_selector('title', text: user.name) }
            it { should have_selector('div.alert.alert-success', text: 'Welcome') }
            it { should have_link('Sign out') }
          end
        end
      end

      describe "edit" do
        let(:user) { FactoryGirl.create(:user) }
        before { visit edit_user_path(user) }

        describe "page" do

          it { should have_selector('h1',    text: "Update your profile") }
          it { should have_selector('title', text: "Edit user") }
          it { should have_link('change', href: 'http://gravatar.com/emails') }
        end

        describe "with invalid information" do
          before { click_button "Save changes" }

          it { should have_content('error') }
        end
      end
    end 
```

身份验证页面规范

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }
    end

    describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile',  href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end
end 
```

用户控制器

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end
end 
```

会话助手

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end
end 
```

实用程序

```
include ApplicationHelper

def valid_signin(user)
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
end

RSpec::Matchers.define :have_error_message do |message|
  match do |page|
    page.should have_selector('div.alert.alert-error', text: message)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:09:36.150

重启服务器后故障消失！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:00:50.273

您确定它查询的页面实际上有标题吗？看起来它在 HTML 中找不到标题。检查您对该页面的视图，您应该在某处设置标题。`title`Rspec 失败看起来在 DOM 中找不到，`nil`而是返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:35:14.853

尝试添加：

```
<% provide(:title, "Edit user") %> 
```

到您的 app/views/users/edit.html.erb 文件的顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-15T14:02:49.743

此外，如果您使用它进行测试，请确保重新启动**Spork 。**我遇到了同样的问题。

# c# - ListView 中的 WPF 按钮在 ViewModel 中看不到命令

> ID：14056939
> 
> 赞同：9
> 
> 时间：2012-12-27T15:19:08.810
> 
> 标签：c#, wpf, mvvm

```
<StackPanel>
        <!--<Button Command="{Binding GetOddsCommand}" CommandParameter="{Binding}" />-->

    <ListView 
        ItemsSource="{Binding Links}"
        >
        <ListView.ItemTemplate>
            <DataTemplate>
                <Border>
                    <Button Command="{Binding GetOddsCommand}" CommandParameter="{Binding}">
                        <TextBlock >
                        <Hyperlink NavigateUri="http://www.onet.pl" >
                            <TextBlock Text="{Binding}" />
                        </Hyperlink>
                    </TextBlock>
                    </Button>
                </Border>
            </DataTemplate>
        </ListView.ItemTemplate> 
```

我有 MVVM 应用程序。在 viewmodel 我有 GetOddsCommand：

```
public ICommand GetOddsCommand
{
    get
    {
        if (_getOddsCommand == null)
            _getOddsCommand = new RelayCommand(param => GetOdds());
        return _getOddsCommand;
    }
}

private void GetOdds()
{

} 
```

当我取消注释放置在 StackPanel 命令中的第一个按钮时，效果很好。调试器进入 get，然后当我单击命令 Debugger 进入 GetOdds 方法时。但它在 ListView 中的第二个按钮中不起作用。看起来第二个按钮看不到 GetOddsCommand，但我不明白为什么

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-27T15:48:08.890

放置一个按钮并在其中放置一个超链接没有多大意义……当您单击超链接时，您期望会发生什么？
无论如何，以下代码将导致您的命令被调用：

```
<ListView ItemsSource="{Binding Links}" x:Name="ListView1">
        <ListView.ItemTemplate>
            <DataTemplate>
                <Border>
                    <Button Command="{Binding ElementName=ListView1, Path=DataContext.GetOddsCommand}" CommandParameter="{Binding}">
                         <TextBlock Text="{Binding}" />
                    </Button>
                </Border>
            </DataTemplate>
        </ListView.ItemTemplate>
</ListView> 
```

请注意，使用的 DataContext 是 ListView**而不是**ListViewItem ...
您可能希望对 CommandParameter 执行相同类型的绑定 - 取决于您真正追求的内容。

现在，在里面添加超链接会导致问题——如果你点击超链接，按钮并没有真正被点击，所以你不会得到命令，如果你点击一个没有超链接的区域，一切都会好起来的......

如果你真的*想要*那里的超链接......你可以将`IsHitTestVisible`周围的文本块设置为 false。

例如：

```
<TextBlock IsHitTestVisible="false">
    <Hyperlink NavigateUri="http://www.onet.pl"  >
    <TextBlock Text="{Binding}" />
</TextBlock> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T15:34:58.917

这是因为您将命令绑定在不同的数据上下文中。

在 StackPanel 中，您将命令绑定在当前数据上下文中，这可能是您持有命令的视图模型。

在 ListView 中，您将命令绑定到不同的数据上下文，这是当前列表项，我认为它是可能不包含命令的 Link 对象。

如果您希望命令具有与 StackPanel 中相同的行为，只需为列表视图命名并在 ListView 数据上下文而不是 ListViewItem 数据上下文上进行绑定。

```
<ListView x:Name="linksListView" ItemsSource="{Binding Links}"> 
    <ListView.ItemTemplate>
        <DataTemplate>
            <Border>
                <Button Command="{Binding DataContext.GetOddsCommand, ElementName=linksListView}"
                        CommandParameter="{Binding DataContext, ElementName=linksListView}">
                    <TextBlock>
                        <Hyperlink NavigateUri="http://www.onet.pl" >
                            <TextBlock Text="{Binding}" />
                        </Hyperlink>
                    </TextBlock>
                </Button>
            </Border>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

# firefox - 使用 Firefox 进行 iMacro 提取

> ID：14056944
> 
> 赞同：1
> 
> 时间：2012-12-27T15:19:22.597
> 
> 标签：firefox, screen-scraping, imacros

我有一个 iMacro 可以登录、执行搜索并将“结果”提取到文本文件中。我的挑战是我只得到“结果”的第一页。我想从每一页中提取所有的“结果”。有时只有一页结果，有时可能有 10 页结果。

“结果”页面 1 的格式如下（每个超链接前两个空格）： 结果页面 1 2 3

“结果”页面 2 的格式如下： 结果页面 1 2 3

“结果”页面 3 的格式如下： 结果页面 1 2 3

不知道搜索会返回多少页，当有第3页时，如何只提取第三页？

这是宏的一部分：

```
TAG POS=1 TYPE=INPUT:IMAGE FORM=NAME:form1 ATTR=ID:SEARCH

'=> Extract data of 2nd table (POS=2) on **page 1 **
TAG POS=1 TYPE=A ATTR=TXT:1
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT

'The SAVEAS statement was added manually to write the extracted table to a file
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}

'=> Extract data from 2nd table (POS=2) on **page 2**
TAG POS=1 TYPE=A ATTR=TXT:2
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}

'=> Extract data from 2nd table (POS=2) on **page 3**
TAG POS=1 TYPE=A ATTR=TXT:3
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:16:41.913

您可以简单地使用循环参数运行脚本，在其中声明要抓取的页数，您只需像这样修改它：

```
TAG POS=1 TYPE=A ATTR=TXT:{{!loop}}
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}} 
```

# extjs - EXT js model.load 返回未定义的记录

> ID：14056945
> 
> 赞同：0
> 
> 时间：2012-12-27T15:19:22.630
> 
> 标签：extjs, extjs4.1

我正在做一个与此类似的 Model.load：

```
//get a reference to the User model class
var User = Ext.ModelManager.getModel('User');

//Uses the configured RestProxy to make a GET request to /users/123
User.load(123, {
    success: function(user) {
        console.log(user.getId()); //logs 123
    }

}); 
```

在控制台中，我可以看到`User`正在加载正确的对象。正在调用正确的服务器端 Web 服务。它正在进入成功功能。然而`user`是未定义的。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:02:32.460

这是在黑暗中拍摄的，可能不是正确的答案。

我相信您没有返回正确的 JSON。`root`首先，查看模型上的代理定义以及您是否在其阅读器中设置了任何属性将很有用。

如果您尚未定义任何阅读器根目录，请尝试使用`[`and扭曲您的 JSON 响应`]`。

如果其中任何一个有效，我将解释原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:38:04.760

根据您的描述，控制台显示了一个用户对象（它只是 JSON 响应中的一堆键/值对）。
您说用户未定义，但看起来您的意思`user.getId()`是未定义。
来自 Web 服务器的 JSON 响应没有任何方法（如`getId`）——只有键/值对。

**编辑：** 您的代码看起来很像[这里](http://docs.sencha.com/ext-js/4-1/#/guide/data)给出的示例（大约在中途）。
如果您修改日志记录以说明：

```
console.log("User: " + user.get('firstname')); 
```

它会`ttes`像您在 JSON 对象中显示的那样返回吗？

# java - 哪个眼镜适合立体镜java程序？

> ID：14056946
> 
> 赞同：0
> 
> 时间：2012-12-27T15:19:27.340
> 
> 标签：java, java-3d, stereoscopy

我正在尝试用 Java 开发一个 3D 程序，它会使用立体视觉。我在这个领域很新，不知道一切是如何运作的。经过一番研究，我听说了**NVIDIA 3D Vision**和**Java3D**。

在 Java 程序中轻松显示 3D 图像需要什么？是否可以只使用 Java3D API 并购买一些特定的眼镜，或者我需要购买像**NVIDIA 3D Vision**这样的系统？它是否适用于其他系统，例如开源系统？有这个眼镜的链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:41:16.920

有三种流行的立体系统：彩色浮雕（例如红色和蓝色）、偏振系统和快门系统。

可以通过复制具有不同颜色的模型并将它们稍微分开旋转/移动来使用带有颜色浮雕的 java。终端客户需要佩戴两种颜色的眼镜才能看到 3D，但质量低。使用被动偏振系统可以获得更高的质量：立体显示器和立体眼镜（如IMAX中的眼镜）或主动快门系统（Nvidia 3D，也使用特殊显示器和眼镜），但价格较高。

Java 3D 早已死去。Oracle 的新 2D&3D 库是 JavaFX 2.0。还有一些用 Java 编写的开源 3D 游戏引擎。

要使用 Nvidia 3D Vision，您需要特殊的显示器和眼镜。有些游戏使用它来观看 3D，我认为这是 google 的一个很好的起点。我知道的唯一使用 Nvidia 3D 视觉的程序是 3Ds Max 2012+。

# css - css位置设置

> ID：14056948
> 
> 赞同：1
> 
> 时间：2012-12-27T15:19:53.110
> 
> 标签：css

我试图设置一个居中对齐的 div，无论是垂直还是水平，我试图通过设置 div 的宽度和高度来做到这一点，然后将其定位为固定中心并将边距偏移 50%。

这是我使用的 css

```
#404-wrapper    {width:400px; height:200px; position:fixed; left:50%; top:50%; margin-top:-100px; margin-left:-200px;}
#404-wrapper a  {font-size:14px; line-height:120%;} 
```

我也在这里做了一个 jsfiddle - [http://jsfiddle.net/wnGL3/](http://jsfiddle.net/wnGL3/)

但我不明白为什么它不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:22:06.957

重命名您的标记和 css，而不用前面的数字

```
#wrapper    {width:400px; height:200px; position:fixed; left:50%; top:50%; margin-      top:-100px; margin-left:-200px;}
#wrapper a  {font-size:14px; line-height:120%;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:25:29.103

`id`在 HTML5 中，属性*可以*合法地以数字开头，但在 CSS 中您仍然会遇到问题。

如果您无法更改 id，则可以使用**属性选择器**：

```
[id="404-wrapper"] {} 
```

演示：http: [//jsfiddle.net/wnGL3/10/](http://jsfiddle.net/wnGL3/10/)

只是为了好玩，还有另一种使用 unicode 转义码的方法：

```
#\00003404-wrapper {} 
```

`\000034`代表数字4。演示：http: [//jsfiddle.net/wnGL3/11/](http://jsfiddle.net/wnGL3/11/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:25:49.460

不幸的是，身份证不能以数字开头。

来自 Id 的 W3C 规范

> id = name [CS] 此属性为元素分配名称。此名称在文档中必须是唯一的。

[http://www.w3.org/TR/html4/types.html#type-name](http://www.w3.org/TR/html4/types.html#type-name)在本文中，它描述了 ID 的“名称”可以是什么。

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 (“-”)、下划线 (“_”) 、冒号（“:”）和句点（“.”）。

将 ID 更改为 wrapper-404 即可。

```
#wrapper-404    {width:400px; height:200px; position:fixed; left:50%; top:50%; margin-top:-100px; margin-left:-200px;}

#wrapper-404 a    {font-size:14px; line-height:120%;}​ 
```

[http://jsfiddle.net/rlemon/wnGL3/3/](http://jsfiddle.net/rlemon/wnGL3/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:21:30.333

使用相对位置而不是固定位置。它应该工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T15:26:05.860

ID 不能以 css 中的数字开头。

但是你可以通过改变来修复它

```
#404-wrapper 
```

至

```
[id='404-wrapper'] 
```

[这](http://jsfiddle.net/wnGL3/8/)是一个工作示例。

# ruby-on-rails-3 - Rails 在控制器外部调用 redirect_to（或渲染）

> ID：14056950
> 
> 赞同：1
> 
> 时间：2012-12-27T15:19:58.747
> 
> 标签：ruby-on-rails-3, model-view-controller, rubygems, render, sidekiq

这似乎是一个微不足道的问题，但我似乎无法在任何地方找到答案（这可能是因为 Rails 对我正在做的事情不满意）。

我正在使用 Sidekiq 来处理后台任务（例如图像处理、上传等），其中一个完成了我想将当前页面重定向到另一个页面，或者甚至更好地渲染出部分。

我当前在 perform 方法中的代码如下所示：

```
def perform(entry_id)
        @entry = Entry.find(entry_id)
        #Create, upload image, all stored in @file when complete

        if @file.save
            #render will go here
        else
            raise @file.inspect
        end
    end 
```

所以，我尝试了几种方法来做到这一点，例如：

```
render 'entry/new' 
```

还

```
render :partial => 'entry/partial' 
```

和

```
redirect_to @entry, notice: 'File Uploaded' 
```

我什至尝试过这种可怕的黑客攻击：

**entry_controller.rb**

```
# Called after the background task is completed
def self.done_loading(entry_id)
  @entry = Entry.find(entry_id)
  @entry.update
end 
```

**工人.rb**

```
EntriesController.done_loading(entry_id) 
```

我究竟做错了什么？

参考资料（我查过的东西）： [在处理错误验证时，何时使用 render 与 redirect_to](https://stackoverflow.com/questions/10070886/when-to-use-render-vs-redirect-to-when-handling-error-validations)

[https://gist.github.com/1210155](https://gist.github.com/1210155)

[http://railsforum.com/viewtopic.php?id=16885](http://railsforum.com/viewtopic.php?id=16885)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:41:19.853

对于那些投反对票的人，他的回答至少解释了他投反对票的原因。

此外，如果您想在后台作业完成后重定向/渲染，您可以使用回调，但您应该重新考虑这样做。对于用户，他们将上传一张图片，但由于您将其发送到后台作业，因此您没有具体的执行时间范围。如果作业需要 2-5 分钟才能执行怎么办？用户将在 5 分钟后被重定向？

我知道这可能不是您正在寻找的答案，但它比没有解释的否决票要好。

此外，如果您正在上传和处理图像，您应该查看

[jQuery 文件上传](https://github.com/blueimp/jQuery-File-Upload)

[Railscasts #381 jQuery 文件上传](http://railscasts.com/episodes/381-jquery-file-upload)

[Railscasts #383 上传到 Amazon S3](http://railscasts.com/episodes/383-uploading-to-amazon-s3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-03T22:55:01.633

你需要控制器实例深入的东西，所以你可以：

*   将代码放入 ApplicationController 以将控制器实例存储在线程本地存储中：`Thread.current[:controller] = self`

*   然后你可以打电话`Thread.current[:controller].redirect_to`

可怕的hacky，我知道。我没有尝试过，但我们为`User.current`.

# linux - 如何使用awk找出某 一行中的字段数？

> ID：14056951
> 
> 赞同：0
> 
> 时间：2012-12-27T15:20:11.990
> 
> 标签：linux, bash, awk

如何使用 找出某一行中的字段数`awk`，如果只有一个字段，我想在该行的末尾添加一些内容？

```
$ cat myFile
0: stackoverflow com
1: w3 org
2:
3: wikipedia org
4: 
```

我想要这样的输出：

```
$ cat myFile
0: stackoverflow com
1: w3 org
2: NULL
3: wikipedia org
4: NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:33:28.333

添加对字段数的测试：

```
awk 'NF==1 { print $0, "NULL"; next }1' file 
```

结果：

```
0: stackoverflow com
1: w3 org
2: NULL
3: wikipedia org
4: NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:35:08.547

```
 awk  'BEGIN{FS=OFS=":"}!$2{$2=" NULL"}1' file 
```

测试：

```
kent$  cat test.txt 
0: stackoverflow com
1: w3 org
2:
3: wikipedia org
4:

kent$  awk  'BEGIN{FS=OFS=":"}!$2{$2=" NULL"}1' test.txt
0: stackoverflow com
1: w3 org
2: NULL
3: wikipedia org
4: NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:27:25.933

```
$ awk '{if (NF==0){print "NULL"}else print $0}' /tmp/myFile
stackoverflow com
w3 org
NULL
wikipedia org
NULL 
```

`NF`是 awk 特殊变量，意思是 Number(of)Fields。这将是其中包含值的 NumberOfFields。`NF==1`如果您的数据确实有编号行，您可以更改该值。我以为这是使用编号实用程序或编辑器的产物。

该`else`语句的意思是“任何字段不为零的记录，因此将打印具有 1 个或多个字段的记录。

IHTH

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T15:34:08.647

一个`sed`答案（我知道我跑题了）：

```
sed 's/^\([[:digit:]]\+:\)[[:space:]]*$/& NULL/g' myFile 
```

一个bash答案（仍然离题）：

```
while read -a a; do
    if [[ -z "${a[1]}" ]]; then
        echo "$a NULL"
    else
        echo "${a[@]}"
    fi
done < myFile 
```

*给猫剥皮的方法不止一种！*

# sockets - 为什么这个代码片段会出错？

> ID：14056953
> 
> 赞同：0
> 
> 时间：2012-12-27T15:20:13.837
> 
> 标签：sockets, android-ndk

```
struct hostent *lphost;
lphost = gethostbyname("server1");
if( lphost NE NULL )
{
   unsigned long ipAddr = inet_addr(lphost->h_addr_list[0]);
} 
```

当我对上述代码片段进行 android ndk 构建时，我收到错误“取消引用指向不完整类型的指针”（对于第 5 行）。

有人可以让我知道为什么会出现此错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:22:08.193

可能您没有包含定义类型`struct hostent`的标头（显然，标头是`<netdb.h>` [http://pubs.opengroup.org/onlinepubs/009695399/basedefs/netdb.h.html](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/netdb.h.html)）。

我假设这`NE`是一个解析回`!=`.

# validation - CakePHP：验证（）失败

> ID：14056955
> 
> 赞同：-1
> 
> 时间：2012-12-27T15:20:16.637
> 
> 标签：validation, cakephp, phpunit

我的验证失败，所以我对此消息的测试`ValidationException`每次都会抛出一个。“并非所有字段都填写正确”。为什么？类似地，它适用于用户（另一种方法）。

**模型：**

```
public $validate = array(
    'name' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            'message' => 'Name can not be empty',
        ),
        'unique' => array(
            'rule' => 'isUnique',
            'message' => 'This name is already used.',
        ),
    ),
    'address' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            'message' => 'Address can not be empty',
        ), 
```

...

```
public function saveNewInstitution($institutionData, $userId) {
    $institutionData[$this->alias]['is_active'] = 1;
    $institutionData[$this->alias]['user_id'] = $userId;
    $this->create();
    $this->set($institutionData);
    if ($this->validates()) {
        return $this->save();
    } else {
        throw new ValidationException('Not all fields are filled out correct');
    }
} 
```

**测试类：**

```
public function testSaveNewInstitution() {
    $data = array(
        'Institution' => array(
            'name' => 'Spitex Staufen',
            'address' => 'Hauptweg 4',
            'postcode' => '1234',
            'city' => 'huuh',
            'phone_number' => '123 456 78 90',
            'email' => 'staufen@spitex.huuh',
            'comment' => '',
            'institution_type_id' => 5
            ));
    $expected = array(
        'Institution' => array(
            'id' => 2,
            'name' => 'Spitex Staufen',
            'address' => 'Hauptweg 4',
            'postcode' => '1234',
            'city' => 'huuh',
            'phone_number' => '123 456 78 90',
            'email' => 'staufen@spitex.huuh',
            'comment' => '',
            'is_active' => TRUE,
            'user_id' => 2,
            'institution_type_id' => 5
            ));

    $result = $this->Institution->saveNewInstitution($data, 2);
    $this->assertEqual($result, $expected);
} 
```

以及所有像这样的异常处理方法：

```
public function testSaveNewInstitutionExceptionName() {
    $this->setExpectedException('ValidationException');
    $this->Institution->saveNewInstitution($this->__nameEmpty, 2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:54:12.743

我不知道我是否真的明白了 - 你的 Testclass 是失败了还是 saveNewInstitution() 函数给你带来了麻烦？您是否尝试手动检查 saveNewInstitution() 是否正常工作 - 将一些数据以表格形式传递给您的函数？

也许这只是一件小事，并且您的数据库中有一个 id=2 的条目，并且您有一个重复的键异常被您自己的异常方法 testSaveNewInstitutionExceptionName() 覆盖。

# python - 我可以根据迭代定义变量名称吗？

> ID：14056957
> 
> 赞同：-1
> 
> 时间：2012-12-27T15:20:34.140
> 
> 标签：python, variables, iteration

```
point_list = []  
for n in field[0]:  
    point_list.append([])  
    for m in field[1]:  
        Point = FieldPoint(n, m) 
```

我也可以根据 m 和 n 创建变量名吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:24:22.737

您可以使用字典来存储键/值对，如果这是您想要的：

```
>>> my_dict = {}
>>> for n in range(10):
...     for m in range(11):
...             key = (n, m)  # creates tuple
...             value = 'foobar'
...             my_dict[key] = value
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:37:25.857

如果您想要可变命名的变量，那么您需要一个 dict 或一个列表。与其在每次迭代中创建一个新变量，不如在每次迭代中创建一个 dict，然后创建一个新的键/值对。

# css - CSS 溢出：滚动不适用于 Chrome、Safari 和 Opera 中的 iFrame

> ID：14056961
> 
> 赞同：1
> 
> 时间：2012-12-27T15:20:43.143
> 
> 标签：css, google-chrome, firefox, safari, opera

我`overflow:scroll;`在我的 css 中使用让 iFrame 窗口的滚动条始终“打开”，但它**仅**适用于 Firefox！对 Chrome、Safari 和 Opera 有任何想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:01:08.110

我对基于 webkit（safari 和 chrome）的浏览器也有类似的问题；似乎他们对 html 上的 css 样式的重视程度高于实际的 iframe 样式本身。找不到太多关于此的文档，但我确信这是问题的根源。

[http://trafficonweb.com/iframe-moves.png](http://trafficonweb.com/iframe-moves.png)当 iframe 在其主要内容上向右拉时（在导航菜单下），iframe 会向左移动。仅在 webkit 上。

当使用 scale (transform) css 属性缩小 iframe 时会发生这种情况。

这不是完美的答案，但至少是一个提示；之后会继续研究和发布。

并寻找其他人为这个问题做出贡献。谢谢。

# prolog - 如何获得最强的路径序言？

> ID：14056963
> 
> 赞同：2
> 
> 时间：2012-12-27T15:20:57.580
> 
> 标签：prolog, graph-theory, shortest-path, social

我正在尝试创建一个社交图，我必须编写一些 Prolog 以获得最小和最强的路径。

我的知识库只有以下语句：

边（源、目的地、权重）

例如：（约翰，玛丽，2）。

权重现在只能是 3：

1 - 朋友 2- 密友 3 - 家人

这是我的最小路径代码（权重较小）。

```
findapath(X, Y, W, [X,Y], _) :- edge(X, Y, W).
findapath(X, Y, W, [X|P], V) :- \+ member(X, V),
                                 edge(X, Z, W1),
                                 findapath(Z, Y, W2, P, [X|V]),
                                 W is W1 + W2.

:-dynamic(solution/2).
findminpath(X, Y, W, P) :- \+ solution(_, _),
                           findapath(X, Y, W1, P1, []),
                           assertz(solution(W1, P1)),
                           !,
                           findminpath(X,Y,W,P).

findminpath(X, Y, _, _) :- findapath(X, Y, W1, P1, []),
                           solution(W2, P2),
                           W1 < W2,
                           retract(solution(W2, P2)),
                           asserta(solution(W1, P1)),
                           fail.

findminpath(_, _, W, P) :- solution(W,P), retract(solution(W,P)). 
```

如何包含一个变量来计算经过的路径数量，然后使用它来获得最强的路径？

最强路径是路径权重/经过的路径数。

例如，

重量 = 8 N 行进路径 = 3

8/3 = 2.67 强度

这意味着我和我的目的地之间有 3 个人（这是一个社交图），他们的加权和是 8。

但在这种情况下

重量 = 7 N 行进路径 = 7

这将是最小的路径，对吧？是的，因为它是 7 和 7 < 8。但是，这不是最强的路径，因为 7/7 = 1，这意味着我和目的地之间可能有很多人不像另一个那样靠近我小路。

我该怎么做？

# .htaccess - .htaccess - 如果没有子域则重定向并将错误的子域名传递到另一个页面

> ID：14056966
> 
> 赞同：0
> 
> 时间：2012-12-27T15:21:05.747
> 
> 标签：.htaccess, redirect, subdomain

如果有人输入了错误的子域（不存在）并将这个子域短语传递到另一个页面，我想在 .htaccess 上进行重定向：

错误的子域：

```
ABC.example.org 
```

重定向：

```
my-page.com?validate=ABC 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:33:13.733

您的子域必须由 DNS 服务器解析，如果错误（不存在），浏览器将显示找不到服务器的错误。那么，浏览器无法连接您的服务器，.htaccess 文件如何工作？

# java - 在焊接中，如何在注入对象之前对其进行初始化

> ID：14056967
> 
> 赞同：0
> 
> 时间：2012-12-27T15:21:05.357
> 
> 标签：java, dependency-injection, initialization, weld

我有一个简单的 POJO 类，我将它注入到很多地方。它没有明确的生产者。我只是这样做`@Inject POJO mypojo`，而且效果很好。

现在我的问题是我想在注入到其他地方之前初始化 POJO 对象（这涉及从数据源读取）。数据源本身就像`@Resource(name = "jdbc/xx") DataSource ds;`在 POJO 中一样被注入。现在在我的 POJO 的构造函数中`ds`，它是 null，它只在构造函数完成后注入。

在创建对象之后和注入之前我可以得到一个钩子，以便我可以在注入之前初始化我的对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:50:30.797

This is what the `@PostConstruct` annotation is for. It is called after your bean is constructed by the CDI container, but before it is actually placed into service. Example:

```
public class POJO {
    public Pojo() {
        super();
    }

    @PostConstruct
    protected void initialize() {
        // initialization code here
    }
} 
```

Documentation: [http://docs.oracle.com/javaee/6/api/javax/annotation/PostConstruct.html](http://docs.oracle.com/javaee/6/api/javax/annotation/PostConstruct.html)

# hibernate - 需要调用persist()吗？

> ID：14056974
> 
> 赞同：1
> 
> 时间：2012-12-27T15:21:47.450
> 
> 标签：hibernate

`removeGroupCoordinator()`接受 2 个参数：用户名和组名。该方法将输入用户从输入组中移除。

有一个重载`removeGroupCoordinator(coordinators: Set<Long>, coordinatorIdToRemove: Long, groupId: Long)`，通过最终调用从组中删除协调器`coordinators.remove(coordinatorIdToRemove)`。

有必要`persist()`在调用flush之前调用吗？我相信它不会因为`flush()`将数据库同步到缓存，我刚刚用我的`coordinators.removeCoordinator(...).`

```
public void removeGroupCoordinator(final long followerId, final long followingId)
{
    DomainGroup groupEntity = getDomainGroup();

    Set<Person> groupCoordinators = groupEntity.getCoordinators();

    removeGroupCoordinator(groupCoordinators, followerId, followingId);

    groupEntity.setCoordinators(groupCoordinators);

    // getEntityManager().persist(groupEntity); needed? 

    getEntityManager().flush();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:14:58.023

这取决于`groupEntity`传入的实例的状态`persist()`。根据[JPA 规范](http://download.oracle.com/otndocs/jcp/ejb-3_0-fr-eval-oth-JSpec/)， 的语义`persist(X)`是：

> *   如果 X 是一个新实体，它就会成为托管实体。实体 X 将在事务提交时或之前或作为刷新操作的结果输入数据库。
>     
>     
> *   如果 X 是预先存在的托管实体，则持久操作将忽略它。但是，如果使用 cascade=PERSIST 或 cascade=ALL 注释元素值注释从 X 到这些其他实体的关系或使用等效的 XML 描述符元素指定，则持久操作将级联到 X 引用的实体。
>     
>     
> *   如果 X 是一个被移除的实体，它就会变成托管的。
>     
>     
> *   如果 X 是一个分离的对象，则在调用持久操作时可能会抛出 EntityExistsException，或者在刷新或提交时可能会抛出 EntityExistsException 或另一个 PersistenceException。
>     
>     
> *   对于由来自 X 的关系引用的所有实体 Y，如果与 Y 的关系已使用级联元素值 cascade=PERSIST 或 cascade=ALL 进行注释，则将持久操作应用于 Y。

所以，我想说 `persist()`只在以下情况下在您的代码中需要：

1.  `groupEntity`是刚刚被实例化的新实例`new()`
2.  `groupEntity` 有一些“持久的”级联关系，这些关系引用了一些刚刚由`new()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:53:29.023

调用 不是强制性的`persist()`。如果对象已经与 Hibernate 会话相关联，则对该对象的所有修改都将被保存。从手册[修改持久对象](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch11.html#objectstate-modifying)。

# c# - 在鼠标悬停时更改按钮文本和图像的前景

> ID：14056975
> 
> 赞同：1
> 
> 时间：2012-12-27T15:21:48.127
> 
> 标签：c#, wpf, xaml, wpf-controls

我有一个按钮定义如下：

```
<Button x:Name="ContactLink" Canvas.Left="20" Canvas.Top="223" Style="{StaticResource HyperlinkButton}" Click="ContactLink_Clicked">
    <WrapPanel>
        <Rectangle Width="15" Height="15">
             <Rectangle.Fill>
                 <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_new_window}" />
             </Rectangle.Fill>
        </Rectangle>
        <TextBlock Margin="5 0 0 0" FontWeight="SemiBold" Text="GET IN TOUCH" />
     </WrapPanel>
</Button> 
```

正如标题所说，我想定义一种改变 TextBlock 和 VisualBrush 前景的样式。到目前为止，我有以下风格，这是行不通的。它改变了文本块的前景和 BlackBrush 资源的定义。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ControlTemplate x:Key="HyperlinkButtonTemplate" TargetType="{x:Type Button}">
         <WrapPanel>
             <TextBlock Cursor="Hand">
                  <ContentPresenter />
             </TextBlock>
         </WrapPanel>
         <ControlTemplate.Triggers>
             <Trigger Property="Button.IsMouseOver" Value="True">
                 <Setter Property="TextBlock.Foreground" Value="#0071bc" />
             </Trigger>
         </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style x:Key="HyperlinkButton" TargetType="{x:Type Button}">
        <Setter Property="Template" Value="{StaticResource HyperlinkButtonTemplate}" />
    </Style>
 </ResourceDictionary> 
```

任何关于让它工作的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:56:29.737

您只需要删除您在触发器中定义的 SolidColorBrush

```
<Trigger Property="Button.IsMouseOver" Value="True">
              <Setter Property="TextBlock.Foreground" Value="#0071bc" />
 </Trigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T09:15:36.927

可能为时已晚，但我遇到了同样的问题并设法解决了它。只需设置 TextBlock 的 name 属性，然后您就可以在触发器中引用该名称。

```
<TextBlock Cursor="Hand" Name="MyTextBlock">
          <ContentPresenter />
</TextBlock>

<ControlTemplate.Triggers>
             <Trigger Property="Button.IsMouseOver" Value="True">
                <Setter TargetName="MyTextBlock" Property="Foreground" Value="#0071bc"/>
             </Trigger>
</ControlTemplate.Triggers> 
```

# php - 函数 http_build_url()

> ID：14056977
> 
> 赞同：10
> 
> 时间：2012-12-27T15:21:51.413
> 
> 标签：php, wamp, wampserver

我使用 WampServer 版本 2.2 php5.3.13 使用 Windows 7

我把我的项目放在 www

并在我的项目执行期间显示此错误

```
Fatal error: Call to undefined function http_build_url() in C:\wamp\www 
```

在我的项目的源代码中，我使用这种语法

```
$url = http_build_url($url); 
```

我想我需要配置 wamp

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T15:39:16.523

1.  检查您的扩展文件夹中的`php_http.dll`文件。
2.  如果文件存在，请检查您的（或任何其他包含的 .ini-s）`php_http`中是否启用了扩展名`php.ini`
3.  如果文件不存在，要么从[http://downloads.php.net/pierre/单独下载它，要么从](http://downloads.php.net/pierre/)[http://museum.php.net/](http://museum.php.net/php5/pecl-5.2.6-Win32.zip)与其他 pecl 扩展（您可能需要其中一些）一起下载[php5/pecl-5.2.6-Win32.zip](http://museum.php.net/php5/pecl-5.2.6-Win32.zip)。调整您的`php.ini`以启用扩展。
4.  重新启动您的网络服务器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-09T17:05:23.737

这有效

```
 if(!function_exists('http_build_url'))
        {
            // Define constants
            define('HTTP_URL_REPLACE',          0x0001);    // Replace every part of the first URL when there's one of the second URL
            define('HTTP_URL_JOIN_PATH',        0x0002);    // Join relative paths
            define('HTTP_URL_JOIN_QUERY',       0x0004);    // Join query strings
            define('HTTP_URL_STRIP_USER',       0x0008);    // Strip any user authentication information
            define('HTTP_URL_STRIP_PASS',       0x0010);    // Strip any password authentication information
            define('HTTP_URL_STRIP_PORT',       0x0020);    // Strip explicit port numbers
            define('HTTP_URL_STRIP_PATH',       0x0040);    // Strip complete path
            define('HTTP_URL_STRIP_QUERY',      0x0080);    // Strip query string
            define('HTTP_URL_STRIP_FRAGMENT',   0x0100);    // Strip any fragments (#identifier)

            // Combination constants
            define('HTTP_URL_STRIP_AUTH',       HTTP_URL_STRIP_USER | HTTP_URL_STRIP_PASS);
            define('HTTP_URL_STRIP_ALL',        HTTP_URL_STRIP_AUTH | HTTP_URL_STRIP_PORT | HTTP_URL_STRIP_QUERY | HTTP_URL_STRIP_FRAGMENT);

            /**
             * HTTP Build URL
             * Combines arrays in the form of parse_url() into a new string based on specific options
             * @name http_build_url
             * @param string|array $url     The existing URL as a string or result from parse_url
             * @param string|array $parts   Same as $url
             * @param int $flags            URLs are combined based on these
             * @param array &$new_url       If set, filled with array version of new url
             * @return string
             */
            function http_build_url(/*string|array*/ $url, /*string|array*/ $parts = array(), /*int*/ $flags = HTTP_URL_REPLACE, /*array*/ &$new_url = false)
            {
                // If the $url is a string
                if(is_string($url))
                {
                    $url = parse_url($url);
                }

                // If the $parts is a string
                if(is_string($parts))
                {
                    $parts  = parse_url($parts);
                }

                // Scheme and Host are always replaced
                if(isset($parts['scheme'])) $url['scheme']  = $parts['scheme'];
                if(isset($parts['host']))   $url['host']    = $parts['host'];

                // (If applicable) Replace the original URL with it's new parts
                if(HTTP_URL_REPLACE & $flags)
                {
                    // Go through each possible key
                    foreach(array('user','pass','port','path','query','fragment') as $key)
                    {
                        // If it's set in $parts, replace it in $url
                        if(isset($parts[$key])) $url[$key]  = $parts[$key];
                    }
                }
                else
                {
                    // Join the original URL path with the new path
                    if(isset($parts['path']) && (HTTP_URL_JOIN_PATH & $flags))
                    {
                        if(isset($url['path']) && $url['path'] != '')
                        {
                            // If the URL doesn't start with a slash, we need to merge
                            if($url['path'][0] != '/')
                            {
                                // If the path ends with a slash, store as is
                                if('/' == $parts['path'][strlen($parts['path'])-1])
                                {
                                    $sBasePath  = $parts['path'];
                                }
                                // Else trim off the file
                                else
                                {
                                    // Get just the base directory
                                    $sBasePath  = dirname($parts['path']);
                                }

                                // If it's empty
                                if('' == $sBasePath)    $sBasePath  = '/';

                                // Add the two together
                                $url['path']    = $sBasePath . $url['path'];

                                // Free memory
                                unset($sBasePath);
                            }

                            if(false !== strpos($url['path'], './'))
                            {
                                // Remove any '../' and their directories
                                while(preg_match('/\w+\/\.\.\//', $url['path'])){
                                    $url['path']    = preg_replace('/\w+\/\.\.\//', '', $url['path']);
                                }

                                // Remove any './'
                                $url['path']    = str_replace('./', '', $url['path']);
                            }
                        }
                        else
                        {
                            $url['path']    = $parts['path'];
                        }
                    }

                    // Join the original query string with the new query string
                    if(isset($parts['query']) && (HTTP_URL_JOIN_QUERY & $flags))
                    {
                        if (isset($url['query']))   $url['query']   .= '&' . $parts['query'];
                        else                        $url['query']   = $parts['query'];
                    }
                }

                // Strips all the applicable sections of the URL
                if(HTTP_URL_STRIP_USER & $flags)        unset($url['user']);
                if(HTTP_URL_STRIP_PASS & $flags)        unset($url['pass']);
                if(HTTP_URL_STRIP_PORT & $flags)        unset($url['port']);
                if(HTTP_URL_STRIP_PATH & $flags)        unset($url['path']);
                if(HTTP_URL_STRIP_QUERY & $flags)       unset($url['query']);
                if(HTTP_URL_STRIP_FRAGMENT & $flags)    unset($url['fragment']);

                // Store the new associative array in $new_url
                $new_url    = $url;

                // Combine the new elements into a string and return it
                return
                     ((isset($url['scheme'])) ? $url['scheme'] . '://' : '')
                    .((isset($url['user'])) ? $url['user'] . ((isset($url['pass'])) ? ':' . $url['pass'] : '') .'@' : '')
                    .((isset($url['host'])) ? $url['host'] : '')
                    .((isset($url['port'])) ? ':' . $url['port'] : '')
                    .((isset($url['path'])) ? $url['path'] : '')
                    .((isset($url['query'])) ? '?' . $url['query'] : '')
                    .((isset($url['fragment'])) ? '#' . $url['fragment'] : '')
                ;
            }
        } 
```

# android - 应用程序在galaxy tab 2 7.0 上运行，但不在galaxy tab 7.0 plus 上运行

> ID：14056992
> 
> 赞同：0
> 
> 时间：2012-12-27T15:22:44.280
> 
> 标签：android

我为孩子们开发了一个应用程序并将其上传到 Google Play。它在 Galaxy Tab 10.1、Galaxy Tab 2 7.0、Galaxy Nexus、Galaxy Note 和 Galaxy S3 上运行良好。我已将 api 级别从 2.2 更改为 4.1。一位用户在 Galaxy Tab 7.0 Plus ICS 上下载了该应用程序并抱怨了一个问题：该应用程序被挂起并且没有响应。目前我没有 Galaxy Tab 7.0 Plus，因此无法对其进行测试并找出导致应用程序挂起并使其无响应的错误。任何有关此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:28:51.450

[tab2 vs tab plus](http://www.phonearena.com/news/Samsung-Galaxy-Tab-2-7.0-vs-Galaxy-Tab-7.0-Plus-spot-the-difference_id26920)

我认为这将与操作系统版本有关。android 版本 3.0-3.2 vs 4.0 的东西

# azure - 某些字符串上的 Windows Azure DataServiceRequestException？

> ID：14056995
> 
> 赞同：1
> 
> 时间：2012-12-27T15:22:50.587
> 
> 标签：azure, azure-table-storage

我最近将我的 azure 应用程序“迁移”到了 Windows8。使用 AddObject() 添加对象并调用 SaveChanges() （在代码之后或之后立即）时，我得到了一些奇怪的 DataServiceRequestException 。据我所知，它与具有以空格结尾的字符串的对象有关。在摆弄 Fiddler 之后，我发现发送到存储的 XML 如下所示：

```
...
 <d:Remarks xmlns:space="preserve">Karangetang </d:Remarks>
... 
```

然后我还尝试使用 UpdateObject() 将对象更改为我想要的实际字符串的子字符串。只有那些以空格结尾的字符串才会引发异常，即使该字符串在其他地方包含双空格也是如此。

**请注意**，此错误仅发生在模拟器中，不会发生在已部署的应用程序中（尽管我在转到 VS12 后没有重新部署它）。

那么，为什么会这样呢？

# c++ - 设置 sfml

> ID：14056999
> 
> 赞同：1
> 
> 时间：2012-12-27T15:23:05.050
> 
> 标签：c++, graphics, installation, codeblocks, sfml

我正在关注版本 2 和代码块的 sfml 入门指南，并完成了教程告诉我要做的所有事情：

*   下载并解压sdk

*   添加了 sfml 头文件和库的路径

*   链接库图形、窗口和系统

但示例代码不起作用。我收到了缺少 sfml-graphics-d-2.dll 的错误消息。编译工作，窗口打开但仍然是黑色的，并且弹出此错误。这是教程的链接 [http://www.sfml-dev.org/tutorials/2.0/start-cb.php](http://www.sfml-dev.org/tutorials/2.0/start-cb.php)

由于我是 c++ 和代码块的新手，我将不胜感激详细的回答。

更新：我已将 SFML dll 复制到可执行文件中。现在我的程序崩溃了。我不知道为什么。它与教程中使用的代码完全相同。

更新：我已将链接库更改为 -s 版本并添加了#define SFML_STATIC。该程序仍然构建然后崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:32:29.443

似乎您没有设置要在项目内构建的静态库，而是使用与 SFML 的动态链接。几个月前我在设置 SFML 时遇到了类似的问题，回忆一下这句话：

> 此处显示的设置将导致您的应用程序链接到 SFML 的动态版本，即需要 DLL 文件的版本。如果您想摆脱这些 DLL 并将 SFML 直接集成到您的可执行文件中，则必须链接到静态版本。静态 SFML 库具有“-s”后缀：“sfml-xxx-sd”用于调试，“sfml-xxx-s”用于发布。在这种情况下，您还需要在项目的预处理器选项中定义 SFML_STATIC 宏。

确保在项目中包含静态文件

```
sfml-graphics-s-d //for debug
sfml-window-s-d   //d for debug!
sfml-system-s-d 
```

*对于发布，省略 d (sfml-graphics-s)*

接下来转到**编译器设置**- > **#Defines**并输入

```
SFML_STATIC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:12:43.333

如果您使用的是最新的 Code::Blocks 版本，其中包括 GCC 4.7.1，那么您必须自己重新编译 SFML（或使用我的[Nightly Builds](http://sfml.my-gate.net/downloads.html)），因为提供的仅适用于 GCC 版本 < 4.7.x .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-31T14:40:43.070

关于 Visual Studio 2017 和 SFML-2.5.1，我推荐[这个](https://www.wikihow.com/Set-Up-SFML-in-a-Project-on-Visual-Studio-2017)教程。设置SFML与设置SDL、GLFW、freeGLUT、GLEW类似，有两个特点：.lib文件是29个，.dll是11个。简单来说我建议：
1.上传[SFML](https://www.sfml-dev.org/download/sfml/2.5.1/)，先选择“下载”。复制下载的文件夹并粘贴到您在 C: 中创建的文件夹中。
2\. 创建空项目。
3\. 使用 C:...\SFML-2.5.1\include 配置“附加包含目录”。
4\. 使用 C:...\SFML-2.5.1\lib 配置“附加库目录”。
5\. 在“Additional Dependencies”窗口中复制并粘贴： **flac.lib; 自由类型.lib；ogg.lib；openal32.lib；sfml-audio.lib；sfml-音频-d.lib；sfml-音频-s.lib；sfml-audio-sd.lib；sfml-graphics.lib；sfml-图形-d.lib；sfml-图形-s.lib；sfml-图形-sd.lib；sfml-main.lib；sfml-main-d.lib；sfml-network.lib；sfml-网络-d.lib；sfml-network-s.lib；sfml-network-sd.lib；sfml-system.lib；sfml-系统-d.lib；sfml-系统-s.lib；sfml-系统-sd.lib；sfml-window.lib；sfml-window-d.lib；sfml-window-s.lib；sfml-window-sd.lib；vorbis.lib；vorbisenc.lib；vorbisfile.lib**
6\. 导航到 C: > ... > SFML2.5.1 > bin。复制所有 11 个 dll 文件并粘贴到项目文件夹中。

做得好。问候。