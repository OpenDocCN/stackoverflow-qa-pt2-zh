# StackOverflow 问答 13300000-13300999

# android - 活动和服务之间的偏好

> ID：13300001
> 
> 赞同：1
> 
> 时间：2012-11-08T23:54:52.707
> 
> 标签：android, android-service, android-preferences

我试图找到有关此问题的解释，但找不到任何东西。

我有一个在后台工作的远程服务。该服务从 SharedPreference 中读取一些首选项。

当我从 PreferenceActivity 更改首选项（活动和服务属于同一个应用程序和同一个包）时，我遇到了这个问题。我更改了首选项并正确保存，但是只要服务读取该首选项（服务从不修改首选项，它只会修改一些无法从 PreferenceActivity 修改的内部首选项），首选项就会“重置”并且服务获取重置的值。

CheckBoxPreference 正在发生这种情况。我不知道这是否会发生在其他类型的偏好中，因为我没有任何偏好。

更改首选项后，我应该重新启动服务吗？或者我需要“刷新”服务中的偏好？也许这是与使用 HoloEverywhere 相关的问题？

要获取 SharedPreference 对象，我使用以下代码：

```
PreferenceManager.wrap(context, getSharedPreferencesName(context), Context.MODE_MULTI_PROCESS); 
```

此代码特定于 HoloEverywhere，它等于：

context.getSharedPreferences(getSharedPreferencesName(context), Context.MODE_MULTI_PROCESS);

'getSharedPreferencesName()' 只返回一个由“package.name_preferences”组成的字符串。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:29:22.153

> I have a remote service that is working in the background.

Why did you make your service be remote?

> I change the preference and it is saved correctly, but as soon as the service reads that preference (the service never modifies the preferences, it only modifies some internal preferences that cannot be modified from the PreferenceActivity) the preference is 'resetted' and the service gets the resetted value.

That's because you made your service remote. Simply remove the `android:process` attribute from your manifest, to have all your components run in the same process, and this problem will go away. Along the way, you will make the user happier, because you won't be consuming as much RAM and battery.

> After I change the preference I should restart the service? Or I need to 'refresh' the preferences in the service?

If you truly have a legitimate reason for having a remote service -- and IMHO there's a greater chance that I will spontaneously regrow my hair -- you will need to restart the service's process, AFAIK. `SharedPreferences` are cached per process, and I don't know of a way to force Android to reload `SharedPreferences` from disk except by restarting the process.

Or, you could not have a remote service. The choice is yours.

# drupal - Drupal 7 规则：如何在电子邮件中发送上传附件的 url（节点更改后）？

> ID：13300004
> 
> 赞同：3
> 
> 时间：2012-11-08T23:55:09.263
> 
> 标签：drupal, file-upload, drupal-7, token, drupal-rules

我有一个带有自定义节点类型的 Drupal 7 站点，其中包含自定义附件字段。**在发布了（这种自定义的）节点后，我在Rules 模块**的帮助下收到了一封电子邮件。我想设置另一个规则，当有人编辑此节点并上传附件时，它会向我发送另一封电子邮件。在邮件中，我想查看上传文件的完整 url。

经过几次测试，我无法插入上传文件的完整路径。[node:field-attachment:file] 根本不起作用。我可以（手动）插入该文件所在的 url，但是在我无法插入文件名之后（所以即使文件名对我来说也足够了）。

因此，使用**[node:field-attachment:file]**时出现错误：*致命错误：在 /home/xxx/sites/all/modules/entity/entity_token 中的非对象上调用成员函数 value()。 token.inc 在第 297 行。*

这正是：

```
/**
 * Gets the token replacement by correctly obeying the options.
 */
function _entity_token_get_token($wrapper, $options) {

   if ($wrapper->value() === NULL) {
// Do not provide a replacement if there is no value.
return NULL;
} 
```

使用**[node:field-attachment]**，我收到了电子邮件，但它包含以下内容：*您可以从此处下载文件：Property 0*

当我编辑节点时，我应该使用哪个令牌来获取实际上传文件的 url（或文件名）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:53:07.097

2个解决方案

1 - 您可以编写一个简单的模块来挂钩节点提交并在那里处理 URL，然后将其邮寄。

2 - 您可以在规则模块中创建一个操作来执行自定义 PHP 代码。在那里，您将在 $node.js 中获得节点的所有详细信息。您还可以使用 drupal[邮件 API发送电子邮件](http://api.drupal.org/api/drupal/includes!mail.inc/function/drupal_mail/7)

# datatables - DataTables 过滤器默认值

> ID：13300014
> 
> 赞同：2
> 
> 时间：2012-11-08T23:55:37.750
> 
> 标签：datatables

我正在尝试为 DataTable 中的过滤器输入设置初始/默认值。在文档就绪时使用 jquery 执行此操作会导致过滤器执行对值的搜索。我搜索了 DataTables 文档，但找不到任何引用此文档的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:19:20.420

`fnInitComplete`在表初始化时使用参数：

```
$("#table").dataTable({
  "fnInitComplete": function(oSettings, json) {
      $("#" + oSettings.sTableId+"_filter input").val("value");
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-21T16:52:45.557

您可以在数据表初始化时设置**oSearch**

```
$(document).ready( function() {
  $('#example').dataTable( {
    "oSearch": {"sSearch": "Initial search"}
  } );
} ) 
```

文档： http: [//legacy.datatables.net/ref](http://legacy.datatables.net/ref)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T19:49:16.563

在我的情况下，DataTables 1.10.x 一个用于[包](https://stackoverflow.com/users/991445/package)答案的小模块：

```
"fnInitComplete": function(oSettings, json) {
    $("input[aria-controls="+oSettings.sTableId+"]").val("val");
} 
```

# css - wget 下载和相对链接转换错过了 css url() 内容的空白编码

> ID：13300017
> 
> 赞同：2
> 
> 时间：2012-11-08T23:55:48.150
> 
> 标签：css, encoding, download, whitespace, wget

当我尝试下载网站并尝试将某个域内的所有链接转换为相对链接时，我遇到了一个相当特殊的情况。我使用的 wget 命令是：

```
wget -q -r -nH -H -D{domain-name} -l 5 -p -E -k -e robots=off {url} 
```

它可以很好地下载所有必需的页面和资源。然后它继续使用相对路径转换源页面中的所有链接。在此过程中，它甚至会执行一些路径编码，以便网站从下载文件夹顺利运行。

我面临的问题是：

假设我有一个指向原始 index.html 中的样式表的链接，如下所示 -

```
<link rel="stylesheet" href="/templates/source/booga booga/foobar.css" type="text/css" /> 
```

wget 从服务器下载正确的 css 并将链接编码到 index.html 中的 css 文件，如下所示 -

```
<link rel="stylesheet" href="/templates/source/booga&#32;booga/foobar.css" type="text/css" /> 
```

到目前为止一切都很好。所有浏览器都可以很好地找到样式表。

现在，样式表 foobar.css 包含这样的部分 -

```
.foo-bar-button {
font-size: 12px;
padding: 10px 20px 10px 30px;
background: url(/templates/professional/1/main/en/gfx/booga%20booga/foo-bar.png) left 55%  no-repeat;
display: block;
width: 90px;
} 
```

wget 下载背景图像，并继续对其路径进行转换和/或编码。就这样结束了——

```
.foo-bar-button {
font-size: 12px;
padding: 10px 20px 10px 30px;
background: url(/templates/professional/1/main/en/gfx/booga booga/foo-bar.png) left 55%  no-repeat;
display: block;
width: 90px;
} 
```

下载/转换后的 css 文件中背景图像的路径现在有一个未编码的空格。IE 可以很好地找到图像并且该站点可以正常工作。Chrome/Firefox/Opera 无法处理，按钮不可见。

我有多种情况，样式表中 url() 中的空格会导致样式不正确。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:27:41.733

```
find -name *.css -exec sed -e 's/\(url([^)]*\) /\1%20/g' -i \{\} \; 
```

:). If urls can contain up to X spaces, then repeat this X times.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T14:55:58.960

我知道这是一个老问题，但我在寻找同样的问题时发现了它。

我提出了另一种解决方案：将网址放在引号之间：

```
`sed -re "s/url\((.+)\)(.+)/url\(\'\1\'\)\2/g" file.css -i;` 
```

应该做的伎俩。

# c++ - C/C++ 中的数组初始化

> ID：13300019
> 
> 赞同：2
> 
> 时间：2012-11-08T23:56:02.533
> 
> 标签：c++, c

**这段代码是否在所有**主要的 C 和 C++ 编译器中初始化数组的**所有**元素？

 **```
int arr[100] = {0}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T23:56:55.247

在所有编译器中。这是由 C 标准和 C++ 标准保证的。

例如，对于 C，这里是相关段落：

> (C99, 6.7.8p21) “如果大括号括起来的列表中的初始化程序少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组，聚合的其余部分应隐式初始化，与具有静态存储持续时间的对象相同。”

和

> （C99，6.7.8p10）“如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。如果具有静态存储持续时间的对象未显式初始化，则：[...] 如果它具有算术类型，它被初始化为（正数或无符号）零；[...]"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:47:19.647

*如果*数组恰好是*结构数组，*您很快就会遇到问题。哎呀，你甚至不能做一个单一的结构。

这个简单的示例表明，两个*主要*编译器（gcc 和 msvc）*不*遵循 ouah 的答案中引用的规范（gcc*似乎*来自其警告，而 msvc 来自其错误消息）。

考虑这个来源，foo.c / foo.cpp：

```
void foo(void) {
   struct A {
      int i;
      int j;
   };
   struct A single = {0};
} 
```

使用 gcc 和 g++ 编译：

```
$ gcc -Wall -W -c foo.c
foo.c: In function 'foo':
foo.c:6:14: warning: missing initializer
foo.c:6:14: warning: (near initialization for 'single.j')

$ g++ -Wall -W -c foo.cpp
foo.cpp: In function 'void foo()':
foo.cpp:6:27: warning: missing initializer for member 'foo()::A::j' 
```

对数组给出相同的警告。这个 gcc 只有两年的历史：`gcc --version`--> `gcc (GCC) 4.5.3`。

`{}`没有*0*的普通在 gcc 中可以正常工作，包括数组。而且您始终可以使用`-w`（小写）进行编译以禁用所有警告。

但是 MSVS 2012与此示例（包括数组）存在*相同和相反的问题。*

它*喜欢* `{0},`并将`{}`其视为*错误*：

```
Error C2059: syntax error : '}' 
```**

# linux - 显示文件的某一行，然后在 linux 中转换为大写

> ID：13300020
> 
> 赞同：1
> 
> 时间：2012-11-08T23:56:07.153
> 
> 标签：linux, command, command-line-interface

尝试显示文件的第二行，然后将其转换为大写。

试过了`head 2 file | tr [a-z] [A-Z]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:56:52.893

```
sed -n '2{p;q;}' file.txt | tr '[:lower:]' '[:upper:]' 
```

或者

```
awk 'NR==2{print toupper($0);exit}' file.txt 
```

或者

```
head -n2 file.txt | tail -n1 | tr '[:lower:]' '[:upper:]' 
```

表格`[:lower:] [:upper:]`是推荐的方式（`POSIX`类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T16:18:32.650

尝试：

```
head -2 file | tail -1 | tr "[a-z]" "[A-Z]" 
```

# python - Python 多维数组

> ID：13300029
> 
> 赞同：4
> 
> 时间：2012-11-08T23:57:01.173
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中初始化二维数组？](https://stackoverflow.com/questions/2397141/how-to-initialize-a-two-dimensional-array-in-python)

在解决一个关于二维数组的简单问题时，我在这个站点上遇到了一个解决方案，该解决方案解释了如何使用重载运算符在 Python 中声明一个。

例子：

```
Myarray = [[0]*3]*3 
```

这将产生以下数组（列表）

```
[[0,0,0],[0,0,0],[0,0,0]] 
```

在您使用它之前，这似乎很好：

例如，如果您分配一个元素：

```
Myarray [0][0] = 1 
```

你会得到意想不到的输出：

```
[[1,0, 0],[1,0,0] , [1,0,0]] 
```

实际上同时分配 Myarray [1][0] 和 Myarray[2][0]

我的解决方案：

```
Myarray = [[][][]]
for i in range(0,3):
  for j in range (0,3):
     Myarray[i].append(0) 
```

此解决方案按预期工作：

```
Marray[0][1] = 1 
```

给你

```
[[1,0, 0],[0,0,0] , [0,0,0]] 
```

有没有***更简单的方法***来做到这一点？这是一个 A 级剑桥问题的解决方案，与其他语言相比，对学生来说似乎太啰嗦了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T00:01:11.447

使用 vanilla Python，您可以使用它，一个嵌套列表推导

```
>>> m = [[0 for y in range(3)] for x in range(3)]
>>> m
[[0, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

与您在示例中显示的相乘列表不同，它具有所需的行为

```
>>> m[1][0] = 99
>>> m
[[0, 0, 0], [99, 0, 0], [0, 0, 0]] 
```

但是，为了认真使用多维数组和/或数值编程，我建议您使用[**Numpy**](http://numpy.scipy.org/)数组。

# bash - 有没有办法为 Groovy 脚本设置多行 shebang？

> ID：13300031
> 
> 赞同：1
> 
> 时间：2012-11-08T23:57:03.500
> 
> 标签：bash, groovy

以下几乎可以工作：

```
#!/bin/bash
/* 2>&1 >/dev/null
script_dir=$(dirname "$0")

export GROOVY_HOME=${script_dir}/../../../../Tools/groovy/groovy-2.0.2

exec ${GROOVY_HOME}/bin/groovy -cp "${script_dir}:$(ls ${script_dir}/build/lib/runtime/*.jar | xargs echo | sed -e 's| |:|g')" "$0"
*/ // 2>&1 >/dev/null

println("aoeu") 
```

唯一的问题是 shell glob /* 并尝试执行它。最后，我真正想做的就是能够构建 Groovy 脚本的类路径，而不必拥有两个单独的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:31:34.503

您也可以尝试下面的技术，它独立于 Groovy 语法（并且通常不会在 上产生输出`stderr`）：

```
#!/bin/sh
script_dir=$(dirname "$0")
export GROOVY_HOME="$script_dir/../../../../Tools/groovy/groovy-2.0.2"

awk 'mark_on{print}/^__END__$/{mark_on=1}' "$0" >/tmp/$$.groovy

"$GROOVY_HOME/bin/groovy" -cp "$script_dir:$(echo "$script_dir"/build/lib/runtime/*.jar | tr " " :)" /tmp/$$.groovy
status=$?

rm -f /tmp/$$.groovy

exit $status

__END__

println("aoeu") 
```

还要注意类路径计算的简化；请记住，通配符（通配符扩展）是由 shell 执行的，而不是由接受参数的命令执行的，因此在这种情况下您不必（也不想）使用`ls`。

* * *

在这种情况下，原始代码中的大括号`${}`在技术上是多余的（它们纯粹是风格）；*例如，如果*您必须在变量替换之后直接附加一个字符串，其中变量名称和后面的内容之间没有明确的分隔符，则需要它们，例如，您不能说但`$my_varsome_string`您可以写`${my_var}some_string`, 或任何`$my_var"some_string"`or`$my_var'some_string'`或`"$my_var"some_string`or `"$my_var""some_string"`。我出于“简约”的目的移除了大括号，为了说明上述内容，但同样，出于文体原因保留它们是完全可以的。

我在上面的代码中一致添加的引号可以保护您免受潜在的空白和某些其他特殊字符的影响`$GROOVY_HOME`。`$GROOVY_HOME`如果您知道不包含空格，请随意删除它们以简化引用（并保持简约） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:39:39.770

看来你想写一个 groovy / shell polyglot。

我不知道 groovy，但从文档看来 [] 是一个有效的 groovy 命令，创建一个空列表。

然后你可以这样写：

```
#!/bin/bash
[ /*  2> /dev/null > /dev/null
script_dir=$(dirname "$0")

export GROOVY_HOME=${script_dir}/../../../../Tools/groovy/groovy-2.0.2

exec ${GROOVY_HOME}/bin/groovy -cp "${script_dir}:$(ls ${script_dir}/build/lib/runtime/*.jar | xargs echo | sed -e 's| |:|g')" "$0"
*/
    ]

println("aoeu") 
```

Groovy 会读取 [] 并忽略它，而 bash 会使用 /* 调用 [，这将导致错误被忽略。但它不会运行任何意外程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-30T17:56:45.060

```
#!/bin/bash
script_dir="$(cd $(dirname $0) >/dev/null; pwd -P)"

function after-bangshe() {
  sed -e '1,/^!#$/d' "$1"
}

if [ -z "${GROOVY_HOME}" ]
then
  echo 'GROOVY_HOME must be defined.' >&2
  exit 1
fi

CLASSPATH="${script_dir}" "${GROOVY_HOME}/bin/groovy" -e "$(after-bangshe $0)" "$@"
exit
!#
println 'aoeu' 
```

的输出`cd`被重定向到`/dev/null`以防万一`CDPATH`设置（这会产生`cd`噪音）。

`CLASSPATH`设置为脚本目录，以便可以找到任何支持类。

该`sed`命令会删除该行之后的所有内容`!#`。

# shell - 将 Shell 作为 cronjobs 运行

> ID：13300033
> 
> 赞同：0
> 
> 时间：2012-11-08T23:57:05.093
> 
> 标签：shell, cakephp, cron, crontab

我正在尝试研究如何设置 Shell 以作为 cron 运行，我在 /app/Console/Command/TaskEmailerShell.php 使用以下代码创建了一个 TaskEmailerShell.php 文件：

```
App::uses('CakeEmail', 'Network/Email');

class TaskEmailerShell extends AppShell {
    public $uses = array('Task');

    public function main()
    {
        // GENERATE AND SEND THE EMAIL
        // ------------------------------------------------------------>
        $email = new CakeEmail();
        etc etc 
```

我已按照[此处](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)的说明进行操作，当 cron 运行时出现此错误：

```
/home/village/public_html/app/Console/cakeshell: line 14: cake: command not found 
```

我的 cron 命令是：

```
/home/village/public_html/app/Console/cakeshell TaskEmailer -cli /usr/bin -console /Cake/Console -app /home/village/public_html/app >> /home/village/public_html/emailer_log.log 
```

有什么建议我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:04:13.613

`cakeshell`您在此处引用的脚本要求`cake`控制台二进制文件位于 PATH 中的某个位置，或者（至少从使用示例来看），以便您使用参数指定控制台的完整路径`-console`。看起来你在那里有一条相对路径。

就我个人而言，我建议直接从您的 cron 作业中调用 cake 控制台。随着其他需求的出现，您最终可能会编写一个脚本`cakeshell`来包装控制台。你可以尝试类似的东西：

```
# m h dom mon dow command
*/5 *   *   *   * /home/village/public_html/lib/Cake/Console/cake -app '/home/village/public_html/app/' TaskEmailer >> /home/village/public_html/emailer_log.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:48:11.807

`Command not found`通常意味着你`PATH`的问题。从 cron 运行的程序甚至可能没有`PATH`设置。由 cron 启动的任何脚本都必须设置`PATH`在开头附近，否则它将找不到任何它应该运行的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:42:57.517

错误发生在文件 cakeshell: $cmd. 中的第 14 行。cmd 设置在第 4 行。

```
#!/bin/bash
TERM=dumb
export TERM
cmd="/opt/lampp/htdocs/MyApp/app/Console/cake"
while [ $# -ne 0 ]; do
if [ "$1" = "-cli" ] || [ "$1" = "-console" ]; then
PATH=$PATH:$2
shift
else
cmd="${cmd} $1"
fi
shift
done
$cmd 
```

最初第 4 行是

```
cmd="cake" 
```

将其更改为绝对路径，例如：

```
cmd="/opt/lampp/htdocs/MyApp/app/Console/cake" 
```

其中 MyApp 是应用程序目录。即使在 PATH 设置之后，我也遇到了这个问题。然后提到绝对路径解决了它。

# function - 带有 =（等号）的 Scala 方法

> ID：13300038
> 
> 赞同：2
> 
> 时间：2012-11-08T23:57:25.857
> 
> 标签：function, scala, procedure

> **可能重复：**
> [何时在 Scala 方法声明中使用等号？](https://stackoverflow.com/questions/944111/when-to-use-the-equals-sign-in-a-scala-method-declaration)

有什么区别

```
def x {} 
```

和

```
def x = {} 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:57:25.857

`def x {}`被称为“程序”风格，它是`def x: Unit = {}`（引用 Viktor Klang from [this post](https://github.com/akka/akka/pull/835#issuecomment-10210090)）的简写。

# java - Corejava 打印两个数组中的独特元素

> ID：13300042
> 
> 赞同：2
> 
> 时间：2012-11-08T23:57:37.167
> 
> 标签：java, arrays, loops

我想要一个核心 java 程序来查找两个数组之间的唯一元素。示例：Array1 - 9, 5,3,23,2,5 Array2 - 19, 5,3,23,24,53

来自两个数组的唯一元素的输出应打印为：9、2、19、24、53

请帮助我编写具有准确循环的程序。

注意：不想使用任何集合来处理相同的程序，并且只想使用循环来完成。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:18:33.983

您必须使用至少 2 个循环。

```
public void uniqueM(int arrayA[], int arrayB[]){
    boolean uniqueA = true, uniqueB = true;
    int high_size = arrayA.length, low_size = arrayB.length;

   if(arrayA.length < arrayB.length){
     low_size = arrayA.length;
     high_size = arrayB.length;
    }

    for(int i = 0; i < high_size; i++){
      for(int j = 0; j < low_size;j++)
      {
         if(i < arrayA.length && arrayA[i] == arrayB[j]) uniqueA = false;
         if(i < arrayB.length && arrayB[i] == arrayA[j]) uniqueB = false;
      }
       if(uniqueA && i < arrayA.length) System.out.println(arrayA[i]);
       if(uniqueB && i < arrayB.length) System.out.println(arrayB[i]);

       uniqueA = true;
       uniqueB = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:35:01.490

您需要根据合法整数的范围调整`counter`数组和`offset`变量的大小。但这不使用`java.util`API 中的任何内容，只使用循环。

```
public static int[] uniques(int[] array1, int[] array2) {
    // assuming your integers are 0-53, you'd have to modify this if it's different
    int[] counter = new int[54];

    // offset needs to be changed based on if negative numbers are allowed
    int offset = 0;

    for(int i = 0; i < array1.length; i++) {
        counter[array1[i] + offset]++;
    }
    for(int i = 0; i < array2.length; i++) {
        counter[array2[i] + offset]++;
    }

    int numUniques = 0;
    for(int i = 0; i < counter.length; i++) {
        if(counter[i] == 1) numUniques++;
    }

    int[] uniqueArray = new int[numUniques];
    int index = 0;
    for(int i = 0; i < counter.length; i++) {
        if(counter[i] == 1) uniqueArray[index++] = i;
    }

    return uniqueArray;
} 
```

# c# - 了解 C# 中的异步（套接字）

> ID：13300053
> 
> 赞同：2
> 
> 时间：2012-11-08T23:58:45.120
> 
> 标签：c#, asynchronous

我对 Async 方法实现了什么有点困惑。我在查找如何使服务器接受多个连接时遇到了它。在查找 Aync 在 C# 中的确切作用时，让我感到困惑的是，据我所知，它不是它自己的线程。但是，它还允许您避免锁定和停滞。例如，如果我有以下内容：

```
 ConnectionManager()
    {
        listener = new TcpListener(port);
        listener.BeginAcceptSocket(new AsyncCallback(acceptConnection), listener);
    }

    public void acceptConnection(IAsyncResult ar)
    {
        //Do stuff
    } 
```

这是否意味着一旦找到连接，它就会执行“acceptConnection”函数，然后继续通过调用者函数执行？（在这种情况下超出范围）。这如何让我创建一个能够接受多个客户端的服务器应用程序？尽管我之前使用过线程来管理服务器/客户端交互，但我对这个概念还是很陌生。如果我有点模糊，请告诉我。我在 MSDN 上查找了多个示例，但仍然有些困惑。提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:43:33.463

> 一旦找到连接，它就会执行“acceptConnection”函数

是的

> 然后通过调用者函数继续执行？

不。

> 异步方法实现了什么

如果做得好，它允许使用更少的资源处理更高数量的请求/秒。

想象一下，您正在创建一个应该接受 10 个 TCP 端口上的连接的服务器。

使用阻塞 API，您必须创建 10 个线程来接受套接字。线程是昂贵的系统资源，例如每个线程都有自己的堆栈，线程之间的切换需要相当长的时间。如果客户端连接到某个套接字，操作系统将不得不唤醒相应的线程。

使用异步 API，您可以发布 10 个异步请求。当客户端连接时，您的 acceptConnection 方法将由 CLR 线程池中的线程调用。

还有一件事情。

如果你想在等待异步 I/O 操作完成后继续执行调用函数，你应该考虑新的 C# 的 async/await 语法，它允许你这样做。该功能可作为 Visual Studio 2010 的独立库“Async CTP”使用，并包含在 Visual Studio 2012 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T00:26:37.757

我不自称是 ac# 或套接字专家，但据我了解，您上面的代码将接受第一个连接，然后不再接受。您需要建立另一个 BeginAccept。

就像是：

```
TcpListener listener = null;

ConnectionManager()
{
    listener = new TcpListener(port);
    listener.BeginAcceptSocket(new AsyncCallback(acceptConnection), listener);
}

public void acceptConnection(IAsyncResult ar)
{
    // Create async receive data code..

    // Get ready for a new connection
    listener.BeginAcceptSocket(new AsyncCallback(acceptConnection), listener);

} 
```

因此，除了异步连接之外，通过使用异步接收数据，接受连接会很快完成并设置侦听新连接。我想你也可以重新订购这个。

对于直接套接字连接（不是 TcpListener），这是我使用的：

（connectedClient 是我自己的类，它处理接收和传输功能并保存有关连接的其他信息）。

```
int Port = 7777; // or whatever port you want to listen on
IPEndPoint ipLocal = new IPEndPoint(IPAddress.Any, port);
listenSocket = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream, ProtocolType.Tcp);

listenSocket.Bind(ipLocal);

// create the call back for any client connections...
        listenSocket.BeginAccept(new AsyncCallback(OnClientConnection), null);

private void OnClientConnection(IAsyncResult asyn)
    {
        if (socketClosed)
        {
            return;
        }

        try
        {
            Socket clientSocket = listenSocket.EndAccept(asyn);

            ConnectedClient connectedClient = new ConnectedClient(clientSocket, this);

            connectedClient.MessageReceived += OnMessageReceived;
            connectedClient.Disconnected += OnDisconnection;
            connectedClient.MessageSent += OnMessageSent;

            connectedClient.StartListening();

            // create the call back for any client connections...
            listenSocket.BeginAccept(new AsyncCallback(OnClientConnection), null);

        }
        catch (ObjectDisposedException excpt)
        {
            // Deal with this, your code goes here

        }
        catch (Exception excpt)
        {
            // Deal with this, your code goes here
        }

    } 
```

我希望这已经回答了你在找什么？

# c# - 从本机 DLL 访问内存时出现 AccessViolationException

> ID：13300054
> 
> 赞同：1
> 
> 时间：2012-11-08T23:58:47.223
> 
> 标签：c#, .net

**概括：**

我用汇编程序编写了一个小型游戏引擎，并通过 DllImport 在我的 C# 项目的一个类中使用我的引擎 DLL 中的导出函数。到目前为止一切正常，但是在执行 LoadTexture 函数时我不断收到*AccessViolationException 。*

它旨在通过 .NET Frameworks Bitmap 类加载纹理，并将第一个像素数据 (mybitmap.Scan0) 的地址传递给我的本机 DLL，然后由它渲染我的纹理。但是，一旦本机代码尝试从此内存地址访问数据，我就会得到*AccessViolationException*。

这就是我的这个函数的 DllImport 代码的样子：

```
[System.Runtime.InteropServices.DllImportAttribute("engine.dll", 
    CharSet = CharSet.Ansi, 
    CallingConvention = System.Runtime.InteropServices.CallingConvention.StdCall, 
    ExactSpelling = true), 
    System.Security.SuppressUnmanagedCodeSecurity
]
private static extern void LoadTexture(int width, int height, IntPtr handle); 
```

这是调用我的本机函数的 C# 代码：

```
public static void LoadTexture(string file)
{
    Bitmap bitmap = new Bitmap(file);

    BitmapData data = bitmap.LockBits(new System.Drawing.Rectangle(0, 0, 
    bitmap.Width, bitmap.Height),
    ImageLockMode.ReadOnly, System.Drawing.Imaging.PixelFormat.Format32bppArgb);

    LoadTexture(data.Width, data.Height, data.Scan0);
} 
```

**问题：**

*   我的 DllImport 语句中可能有错误还是看起来没问题？

*   还有什么可能是这个问题的原因？

如果您需要更多可能有助于解决我的问题的信息，请随时在评论中问我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:47:41.437

您是否已将纹理位图锁定到内存中？您需要在使用`Bitmap.LockBits()`指针之前使用。

请参阅[http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)

# python - 如何读取数字文本文件并将其转换为 40x40 列表？

> ID：13300056
> 
> 赞同：2
> 
> 时间：2012-11-08T23:59:06.443
> 
> 标签：python, list

我有一个这样的文本文件：

```
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
1100111100111100111100111100111100111100
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000 
```

我如何把它变成：

```
[
    [1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0],
    [1100111100111100111100111100111100111100],
    [0000000000000000000000000000000000000000],
    [0000000000000000000000000000000000000000],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [0000000000000000000000000000000000000000],
    [0000000000000000000000000000000000000000],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [0000000000000000000000000000000000000000],
    [0000000000000000000000000000000000000000],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [0000000000000000000000000000000000000000],
    [0000000000000000000000000000000000000000],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [0000000000000000000000000000000000000000],
    [0000000000000000000000000000000000000000],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [0000000000000000000000000000000000000000],
    [0000000000000000000000000000000000000000],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [1100111100111100111100111100111100111100],
    [0000000000000000000000000000000000000000],
    [0000000000000000000000000000000000000000]
] 
```

我试过的代码是

```
content = open('filename').readlines;
for line in content:
    for c in line:
        if c in "\n": 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T00:09:59.097

```
with open('filename') as fp:
    data = [[int(c) for c in line.strip()] for line in fp] 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:05:15.867

```
def split_up(line):
    return [int(ele) for ele in line.rstrip()]

with open('yourfile.txt') as f:
    your_list = [split_up(line) for line in f] 
```

这是 minitech 的回答，他在评论中向我建议：

```
with open('yourfile.txt') as f:
    your_list = [map(int, line.rstrip()) for line in f] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T00:11:08.533

```
file = open('test.txt')
matrix = []
for line in file.readlines():
    num_list = []
    for num in line:
        if num == '\n':
            break
        else:
            num_list.append(int(num))
    matrix.append(num_list)

print matrix 
```

# c - C 源文件中的外部结构

> ID：13300060
> 
> 赞同：0
> 
> 时间：2012-11-08T23:59:34.057
> 
> 标签：c, struct, pthreads, mutex, extern

我试图在两个单独的 .c 文件中提供一个名为 dict_obj 的 dictionary_object 结构。这是在尝试为类编写 pthread TCP 服务器时。我以前没有用 C 做太多工作，并且很难弄清楚这一点。我不确定我是否正确地将其声明为外部结构，因为 netbeans 会在 clean 和 build 上抛出错误，说无效使用未定义类型。

在 db_functions.c 我有：

```
//------------------------------------------------------------------------------
//                Server Function & Variable Initialization 
//------------------------------------------------------------------------------

struct dictionary_object dict_obj;

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//                            Server Function Codes:
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//                         Database Initialization
//------------------------------------------------------------------------------

int db_initialization()
{

    dict_obj.word_count = 0;
    return 1; 
```

在 db_operations.c 我有：

```
struct dictionary_object
{
    char dictionary[DICTIONARY_SIZE][WORD_LENGTH];
    int word_count;
    pthread_mutex_t dict_mutex;

};

extern struct dictionary_object dict_obj; 
```

希望这能让你们充分了解我想要完成的工作，而不必用太多代码压倒你们。提前致谢！如果您需要查看更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:07:29.947

`struct dictionary_object`我会冒昧地猜测您的问题是 C 编译器在编译 db_functions.c 时抱怨它不知道如何为 a 分配内存。它的混乱是可以理解的，因为您要求它编译的文件根本没有告诉它是什么`struct dictionary_object`。

您应该将结构的定义移动到两个文件都包含的*头文件*`.c`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:08:51.203

您需要在包含文件中定义一次结构内容和布局。还要为那里的代码定义所有函数和静态的“外部”定义。在任何想要使用这些结构或定义的文件中，包括头文件（类似于 db_struct.h）。

db_struct.h：

```
struct dictionary_obhect {
   char dictionary ...
}
extern struct dictionary_object dict_obj;
extern int db_initialization(); 
```

db_struct.c：

```
#include "db_struct.h"

struct dictionary_object dict_obj;
int db_initiatilization() {
    dict_obc.word_count = 0;
} 
```

请注意，这都是非常老式的 C 代码。现代 C++ 等有其他方法可以做类似的事情。

# ruby-on-rails-3 - 我可以将我的 heroku git repo 导入 bitbuket 吗？如何？

> ID：13300068
> 
> 赞同：3
> 
> 时间：2012-11-09T00:00:38.890
> 
> 标签：ruby-on-rails-3, git, heroku, bitbucket

我的笔记本电脑坏了，我需要从另一台计算机上编码。

我正在使用 Heroku，我想从 Heroku 获取最新版本的代码到另一台机器上。

我了解非常推荐使用 GitHub 或 BitBucket 获取适当的远程存储库。

我决定试试 BitBucket。

在创建我的帐户时，它会询问我的 git repo 的旧 URL。由于我的机器已经死了，我希望填写 heroku URL，但这没有用。

任何想法如何进行？

这个想法是我可以从任何一台机器上提取和推送我的更改（当我的笔记本电脑来自维修时）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T00:16:05.813

您可以简单地将 Heroku 存储库克隆到本地计算机。然后将 BitBucket 添加为远程并将代码推送到那里。

在您的应用程序的设置页面上找到 Heroku repo url

*https://dashboard.heroku.com/apps/[APP]/settings*

```
git clone git@heroku.com:[APP].git
git remote add bitbucket ssh://git@bitbucket.org/[ACCOUNT]/[REPO].git
git push bitbucket master 
```

# javascript - 将表格插入内容可编辑的 div

> ID：13300073
> 
> 赞同：14
> 
> 时间：2012-11-09T00:00:59.480
> 
> 标签：javascript, jquery, html-table, rangy

我有一个[小提琴](http://jsfiddle.net/bplumb/pKEKQ/1/)显示我的代码在做什么。使用 javascript/jquery 我正在尝试将表格插入到当前插入符号位置的内容可编辑 div 中。我正在使用[Tim Down 的 Rangy](http://code.google.com/p/rangy/)库来完成此操作。我正在使用以下 javascript 执行此操作。

```
var range = getFirstRange();
var el = document.createElement("table");
var tableHtml = "";
for (var a = 0; a <= tableY; a++) {
    if(a%2==0){
       tableHtml += '<tr class="zebra">';
    }
    else{
       tableHtml += '<tr>';
    }
    for (var b = 0; b <= tableX; b++) {
       tableHtml += '<td>&nbsp;</td>';
    }
    tableHtml += '</tr>';   
}
$(el).html(tableHtml); 
range.insertNode(el);
rangy.getSelection().setSingleRange(range); 
```

以防万一它在这里有帮助的是 getFirstRange 函数。

```
function getFirstRange() {
   var sel = rangy.getSelection();
   return sel.rangeCount ? sel.getRangeAt(0) : null;
} 
```

我需要在放置此表的任何位置制作有效的 html。例如，如果插入符号位于链接中间，我会尝试避免使用以下 html。

```
<p>some text <a href="#">text 
                         <table>
                             <tr>
                               <td>table content</td>
                             </tr>
                         </table> 
              text</a> more text</p> 
```

我希望它看起来像这样。

```
<p>some text <a href="#">text</a></p>
<table>
   <tr>
     <td>table content</td>
   </tr>
</table>
<p><a href="#">text</a> more text</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:09:30.930

如果要在无法有效包含它的选定节点之后立即删除新节点，请替换此：

```
range.insertNode(el); 
```

*像**这样***：_

```
var badNodes = {a: 1, p: 1};

// starting with the node at the beginning of the range,
// iterate to the "left" until we find a node that isn't
// a text node
var n = range.startContainer;
var tag = n.nodeName;
while (tag == '#text') {
    n = n.parentNode;
    tag = n.nodeName;
}

// if the node we landed on isn't one of our bad nodes ...
if (badNodes[tag.toLowerCase()]) {

    // that we refuse to insert 'el' into, continue iterating to the
    // "left" until we find a node we're willing to place 'el' after.
    while (badNodes[n.parentNode.nodeName.toLowerCase()]) {
        n = n.parentNode;
        tag = n.nodeName;
    }
    n.parentNode.insertBefore(el, n.nextSibling);

} else {
    range.insertNode(el);
} 
```

见我的小提琴叉：http: [//jsfiddle.net/zntwL/29/](http://jsfiddle.net/zntwL/29/)

* * *

**更新** ^(（我认为这就是你想要的）)

如果要拆分无效节点并将新节点放入，请改用以下内容：

```
var badNodes = {a: 1, p: 1};

// starting with the node at the beginning of the range,
// iterate to the "left" until we find a node that isn't
// a text node
var n = range.startContainer;
var tag = n.nodeName;
while (tag == '#text') {
    n = n.parentNode;
    tag = n.nodeName;
}

// if the node we landed on is one of our "bad" nodes ...
if (badNodes[tag.toLowerCase()]) {

    // continue iterating to the "left" until we find a "good" node
    while (badNodes[n.parentNode.nodeName.toLowerCase()]) {
        n = n.parentNode;
        tag = n.nodeName;
    }

    // remove everything from our "good" node from the start of the
    // range to the end of the node. this causes all bad nodes to be
    // severed and auto-closed and auto-opened as necessary at the cut.
    range.setEndAfter(n);
    var clipped = range.extractContents();

    // drop 'el' in after the break (right where we want it)
    n.parentNode.insertBefore(el, n.nextSibling);

    // and re-attach the clipped portion of the "good" node, which
    // includes the auto-opened "bad" nodes.
    el.parentNode.insertBefore(clipped, el.nextSibling);

} else {
    range.insertNode(el);
} 
```

[http://jsfiddle.net/zntwL/31/](http://jsfiddle.net/zntwL/31/)

您的最终解决方案可能需要一些调整。您可能需要以不同的方式检测 #text 节点以兼容跨浏览器。而且您需要对其进行模块化并`badNodes`适当地填充数组。但是，我认为这是一般的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:06:46.900

怎么样的东西

```
var parentNode = range.commonAncestorContainer;
parentNode.inertNode(el); 
```

替换你的

```
range.insertNode(el); 
```

在所有情况下，您可能必须对其进行调整以使表格准确地放在您想要的位置，但至少它永远不会出现在元素的中间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T06:59:46.680

作为一名 iPhone 应用程序开发人员，我发现以下内容适用于我的可编辑内容

```
function TableOfContentForSubHeading1() {
    var level = 0;
    document.getElementById("content").innerHTML =
        document.getElementById("content").innerHTML.replace(/<h([\d])>([^<]+)<\/h([\d])>/gi, function (str, openLevel, titleText, closeLevel) {
            if (openLevel != closeLevel) {
                return str;
            }
            if (openLevel > level) {
                toc += (new Array(openLevel - level + 1)).join("<ol>");
            } else if (openLevel < level) {
                toc += (new Array(level - openLevel + 1)).join("</ol>");
            }
            level = parseInt(openLevel);
            var anchor = titleText.replace(/ /g, "_");
            toc += "<li><a href=\"#" + anchor + "\">" + titleText + "</a></li>";
            return "<h" + openLevel + "><a name=\"" + anchor + "\">" + titleText + "</a></h" + closeLevel + ">";
        });
    if (level) {
        toc += (new Array(level + 1)).join("</ol>");
    }
    document.getElementById("content").innerHTML += toc;
} 
```

希望它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-16T15:16:55.583

下面我做了一些改进，以防标题还包含 CLASS 引用或 ID。

```
<script>
window.onload = function () {
var toc = "";
var level = 0;

document.getElementById("contents").innerHTML =
    document.getElementById("contents").innerHTML.replace(/<h([\d])([^<]+)>([^<]+)<\/h([\d])>/gi,
        function (str, openLevel, classHeading, titleText, closeLevel) {
            if (openLevel != closeLevel) {
                return str;
            }

            if (openLevel > level) {
                toc += (new Array(openLevel - level + 1)).join("<ul>");
            } else if (openLevel < level) {
                toc += (new Array(level - openLevel + 1)).join("</ul>");
            }

            level = parseInt(openLevel);

            var anchor = titleText.replace(/ /g, "_");
            toc += "<li><a href=\"#" + anchor + "\">" + titleText
                + "</a></li>";

            return "<h" + openLevel + classHeading +"><a name=\"" + anchor + "\">"
                + titleText + "</a></h" + closeLevel + ">";
        }
    );

if (level) {
    toc += (new Array(level + 1)).join("</ul>");
}

document.getElementById("toc").innerHTML += toc;
};
</script> 
```

我在替换函数中添加了一个附加参数：

```
([^<]+) 
```

命名类标题并将其添加到返回函数中

```
return "<h" + openLevel + classHeading + .... 
```

以便保留用于的类。

# nosql - 数据库设计决策 (NoSQL)

> ID：13300075
> 
> 赞同：0
> 
> 时间：2012-11-09T00:01:21.943
> 
> 标签：nosql

我正在开发具有以下用例的应用程序：

*   用户上传 csv 文件，这些文件需要在应用程序重启时持久化
*   需要对 csv 文件中的数据进行查询/排序等
*   用户在上传文件时指定 csv 文件中的可查询列

目前提出的解决方案是：

*   对于小文件（更常见），将数据转换为 xml 并将其存储为 LOB 或文件系统中。对于查询，将整个数据吞入内存并使用 XQuery 之类的东西
*   对于较大的文件，在数据库 (MySQL) 中创建动态表，并在可查询列上创建索引

尽管我们已经对该解决方案进行了原型设计，并且它运行得相当好，但它使我们无法支持更复杂的文件格式，例如 XML 和 JSON。解决方案还有一些更琐碎的问题，我不会讨论。

考虑到 NoSQL 数据库的无模式特性，我认为它们可以用来解决这个问题。不过，我没有使用 NoSQL 的实际经验。我的问题是：

1.  NoSQL 是否非常适合这个用例？
2.  如果是这样，哪个 NoSQL 数据库？
3.  我们如何将 csv 文件存储在数据库中（列标题构成键和每行的数据字段构成值的键值对集合？）
4.  我们如何存储可能具有深度层次结构的 XML/JSON 文件？
5.  查询/索引和其他性能考虑如何？这与 MySQL 之类的东西相比如何？

感谢您的回复并提前致谢！

示例 csv 文件：

```
employee_id,name,address  
1234,XXXX,abcabc  
001001,YYY,xyzxyz  
... 
```

DDL 声明：

```
CREATE TABLE `employees`(  
  `id` INT(6) NOT NULL AUTO_INCREMENT,  
  `employee_id` VARCHAR(12) NOT NULL,  
  `name` VARCHAR(255),  
  `address` TEXT,  
  PRIMARY KEY (`id`),  
  UNIQUE INDEX `EMPLOYEE_ID` (`employee_id`)  
); 
```

对于 csv 文件中的每一行

```
INSERT INTO `employees`  
                (`employee_id`,  
                 `name`,  
                 `address`)  
       VALUES (...); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:07:46.203

不是一个完整的答案，但我想我可以在某些方面提供帮助。

**对于第 2**点，我至少可以给出[这个](https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)有助于整理 NoSQL 实现的链接。

**对于数字 3**，使用 SQL 数据库（但也应该适合 NoSQL 系统），我会将每一列和每一行表示为单独的表，并添加第三个表，其中包含列和行的外键，其值为细胞。您会得到一个易于过滤的大表。

**对于数字 4**，您需要“在表格中表示分层数据”

常见的方法是有一个带有属性的表，以及同一个表的外键，指向父表，例如：

```
+----+------------+------------+--------+
| id | attribute1 | attribute2 | parent |
+----+------------+------------+--------+
|  0 | potato     | berliner   | NULL   |
| 1  | hello      | jack       | 0      |
| 2  | hello      | frank      | 0      |
| 3  | die        | please     | 1      |
|  4 | no         | thanks     | 1      |
|  5 | okay       | man        | 4      |
|  6 | no         | ideas      | 2      |
|  7 | last       | one        | 2      |
+----+------------+------------+--------+ 
```

现在的问题是，如果您想获取元素 1 中的所有子元素，则必须单独查询每个项目以获取其子元素。其他一些操作很难，因为它们需要获取到对象的路径，遍历许多其他对象并进行额外的数据查询。

一种常见的解决方法，也是我使用和喜欢的一种，称为**修改的预排序树遍历**。

使用这种技术，我们需要在数据存储和应用程序之间增加一个额外的层，以便在每次结构更改修改时填充一些额外的列。我们将为每个对象分配三个属性`left`：`right`和`depth`。

和属性将从顶部开始计数每个对象，递归遍历所有树叶`left`。`right`

`left`这是对and的遍历算法的模糊近似`right`（带有的部分`depth`很容易猜测，这只是要添加的几行）：

1.  将树根（或第一个树根，如果有很多）`left` 属性设置为 1
2.  转到它的第一个（或下一个）孩子。将其`left`属性设置为最后一个数字加一（此处为 2）
3.  它有孩子吗？如果是，返回数字 2。如果不是，将其设置`right`为最后一个数字加一。
4.  转到下一个孩子，并执行与 2 相同的操作
5.  如果没有更多的孩子，转到父母的下一个孩子并执行与2中相同的操作

这是一张解释我们得到的结果的图片：

[![mptt](../Images/2ee4079a4aa0a946c3c30fe7328798e2.png)](https://i.stack.imgur.com/eSGZx.png)
[（来源：[narod.ru](http://r-aax.narod.ru/jj/sc/mptt.png)）]

现在找到一个对象的所有后代或它的所有祖先真的很容易。这可以通过一个查询来完成，使用`left`and `right`。

使用它时重要的是在数据和应用程序之间有一个良好的实现层，处理`left`,`right`和`depth`属性。在以下情况下必须调整这些字段：

*   一个对象被删除
*   添加了一个对象
*   对象的`parent`字段被修改

这可以通过使用锁的并行过程来完成。它也可以直接在数据和应用程序之间实现。

有关树木的更多信息，请参阅这些链接：

*   [在 SQL 中管理层次结构：MPTT/嵌套集 vs 邻接列表 vs 存储路径](https://stackoverflow.com/questions/8196175/managing-hierarchies-in-sql-mptt-nested-sets-vs-adjacency-lists-vs-storing-path)
*   [MPTT 与 Django 库](https://github.com/django-mptt/django-mptt)
*   [http://www.sitepoint.com/hierarchical-data-database-2/](https://www.sitepoint.com/hierarchical-data-database-2/)

我个人在使用 NoSQL 的几次 django-nonrel 和 django-mptt 方面取得了不错的成绩。

# jenkins - Jenkins - 将构建发布到文件夹

> ID：13300076
> 
> 赞同：5
> 
> 时间：2012-11-09T00:01:30.517
> 
> 标签：jenkins, post-build-event

jenkins 是否有一个后期构建过程，以便可以将构建 WAR 文件存储在特定文件夹中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T13:08:30.160

有几种不同的方法可以移动构建的文件。第一种是通过插件。您使用哪个插件取决于您想要存储东西的位置。尝试查看 Jenkins 插件列表的这些部分：

*   [工件上传者](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Artifactuploaders)
*   [其他构建后操作](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Otherpostbuildactions) （其中一些在这里“隐藏”。）

移动构建文件的第二种方法是通过创建 Jenkins 构建步骤来执行一组 shell 命令来强制移动。

# mysqldump - 将数据从一个 MySQL 数据库表导出到另一个数据库表的最佳选项

> ID：13300077
> 
> 赞同：0
> 
> 时间：2012-11-09T00:01:30.133
> 
> 标签：mysqldump

有点绞尽脑汁，试图做我认为很容易做的事情。我正在尝试使用 shell 脚本/MySQL 选项从数据库中的一个表获取数据到另一个数据库中的临时表。基本上截断表 db2.stage_customer_log，然后 db1.customer_log -> db2.stage_customer_log。我尝试了几个选项，但每个选项都取得了有限的成功，我已经准备好接受建议。

我尝试的第一个想法是：

```
mysqldump -p dbname -u uname customer_log > stage_customer_log.csv --no-create-info 
```

但事实证明这不是一个好的选择，因为生成的文件是原始表名的 INSERT。所以我必须做一些操作才能让它工作。

接下来，我用这个创建了一个 shell 脚本：

```
#!/bin/sh
mysql -h hostname -P 99999 -u uname -p --database dbname <<STOP

SELECT * FROM customer_log INTO OUTFILE 'stage_dm_customer_log.csv'
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'; 

\q
STOP
test $? = 0 && echo "Your batch job terminated gracefully" 
```

这给了我想要的结果（逗号分隔文件），但它把文件放在 MySQL 目录中（即使我输入了绝对路径，或 './' 或其他）。看到我托管在亚马逊上，第二部分（导入）不起作用，因为我遇到了访问错误。

然后，当我阅读有关选项的更多信息时，我又回到了第一个选项。我的最终命令是这样的：

```
mysqldump -p dbname -u uname customer_log --no-create-info --no-create-db --tab='/tmp/' --fields-optionally-enclosed-by='"' --fields-terminated-by=',' --fields-escaped-by='' --lines-terminated-by='\n' --verbose 
```

但再次以必须操纵的文件名结束。

我终于尝试使用 Pentaho 引入表，我不知道它是否是我们的实例，但对于这么少的记录需要相当长的时间（85,000 条记录需要 32 分钟）。所以，我不需要具体细节，但这样的最佳途径是什么？其他人实施了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:54:04.320

如果两个数据库都位于同一主机上，则可以运行以下命令：

```
INSERT INTO db2.stage_customer_log (column1, column2, ...)
SELECT column1, column2, ...
FROM db1.stage_customer_log
WHERE [your filters here] 
```

但是，如果它们在不同的服务器上，那么这可能会有所帮助：

```
mysqldump -u user1 -ppassword1 -h host1 [some options here] db1 stage_customer_log | mysql -u user2 -ppassword2 -h host2 [some options here] db2 
```

`mysqldump`始终将 csv 文件保存在服务器计算机上，并在客户端保存 sql 转储。

**更新 1**

另一个技巧，可以是使用 MySQL Workbench（您可以将转储文件保存在本地硬盘上）或使用[FEDERATED 存储引擎](http://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html)。

# mysql - MySql 样本数据中的随机日期

> ID：13300078
> 
> 赞同：3
> 
> 时间：2012-11-09T00:01:33.950
> 
> 标签：mysql, random

我在 MySql 数据库中创建了一个示例数据集，我需要使用它来测试生成一些报告。对于一个特定的表，我有 10 万条记录，这些记录都是在几个小时内创建的。由于生成示例数据的方式，我无法将 100k 记录上的日期时间列设置为所需的值。

如何使用 SQL 语句随机化 100k 记录上的日期时间列，而不是在几个小时内将它们分散在一个月内？例如，我想将记录平均分布在 2012 年 10 月 1 日到 2012 年 10 月 31 日之间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:26:00.210

我们可以使用`RAND()`函数。按照[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_rand)`R`，要获取范围内的随机整数`i <= R < j`，请使用表达式`FLOOR(i + RAND() * (j – i))`。因此，对于示例表中的每一行，您都需要运行以下查询：

```
SET @year = '2012';
SET @month = '10';
SET @day = FLOOR(1 + RAND() * (31 - 1));
SET @hour = FLOOR(0 + RAND() * (23 - 0));
SET @minute = FLOOR(0 + RAND() * (59 - 0));
SET @second = FLOOR(0 + RAND() * (59 - 0));

SET @date = CONCAT(@year,'-',@month,'-',@day,'-',@hour,'-',@minute,'-',@second);

UPDATE `sample_tbl`
   SET `date` = STR_TO_DATE(@date,'%Y-%c-%e-%k-%i-%s'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:28:32.727

有趣的问题。我以前需要类似的东西。以下是概念证明。

```
SET @start_timestamp = 1349049600;
SET @end_timestamp = 1351641600;
SET @offset = @end_timestamp - @start_timestamp;

SELECT FROM_UNIXTIME(@start_timestamp + FLOOR(RAND() * @offset)); 
```

### 失败笔记

虽然MySQL 中存在[流控制语句](http://dev.mysql.com/doc/refman/5.0/en/flow-control-statements.html)`WHILE`（ 、、`LOOP`等），但它们仅在存储程序中可用。

我试图直接`JOIN`针对现有的表`SELECT`。但是，时间戳始终是相同的值。

我尝试创建一个`dates`表并使用`BENCHMARK(100000, INSERT ...)`. 但它只接受第二个参数的标量表达式。

最后，您可以通过编写存储程序来克服上述所有问题。但是，这似乎有点矫枉过正，因为我相信在您的情况下将此 POC 改编为您的原始脚本是最有意义的。

# sql - SQL 查询 SELECT IN 和 SELECT NOT IN

> ID：13300081
> 
> 赞同：0
> 
> 时间：2012-11-09T00:01:48.417
> 
> 标签：sql, sql-server

有谁知道为什么以下 2 个查询的结果与第 3 个查询的结果不相加？

```
SELECT COUNT(leadID) FROM leads 
WHERE makeID NOT IN (SELECT uploadDataMapID FROM DG_App.dbo.uploadData WHERE uploadID = 3 AND uploadRowID = 1)
AND modelID NOT IN (SELECT uploadDataMapID FROM DG_App.dbo.uploadData WHERE uploadID = 3 AND uploadRowID = 2)

SELECT COUNT(leadID) FROM Leads 
WHERE makeID IN (SELECT uploadDataMapID FROM DG_App.dbo.uploadData WHERE uploadID = 3 AND uploadRowID = 1)
OR modelID IN (SELECT uploadDataMapID FROM DG_App.dbo.uploadData WHERE uploadID = 3 AND uploadRowID = 2)

SELECT COUNT(leadID) FROM Leads 
```

第一个查询是我需要的计数。第二个是根据 DG_App.dbo.uploadData 表的内容告诉用户有多少条记录被抑制。第三个查询只是对所有记录的直接计数。

当我运行这些查询 1 的结果 + 查询 2 的结果时，出现的记录比整个表的计数少约 46K。我玩过用 () 对 WHERE 语句进行分组，但这根本没有改变计数。

这是 MSSQL 服务器 2012。

对此的任何输入都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T00:14:00.293

你有任何 NULL 值吗？他们不会出现在第一次也不会出现在第二次计数中，我认为你错过了那些。

```
SELECT Count(leadID) FROM Leads WHERE makeID is Null or modelID is null 
```

**编辑：**我必须添加更多注意事项：因为有一个 AND 和一个 OR 条件，事情变得有点复杂！

*   **Null IN ()**始终被评估为**Null**，不会出现行
*   **Null NOT IN ()**总是被评估为**Null**，行不会出现
*   **Null AND Something**被评估为**Null**或**False**，不会出现行
*   **如果 Something 为**True ，则****Null OR Something**被评估为**True**，否则被评估为**Null**，只会出现一些行**

 ******这意味着在您的前两个查询中，一些带有 Null 的记录已经被计算在内，而另一些则没有。这是你想念的：

*   您错过了两者`makeID`都`modelID`为空的记录：

    ```
    SELECT Count(leadID) FROM Leads WHERE makeID is Null and modelID is null 
    ```

*   但是您也错过了`makeID`为 Null`modelID`且不为空且不在第二个子查询中的记录：

    ```
    SELECT Count(leadID) FROM Leads
    WHERE makeID is Null
    AND modelID NOT IN (...) 
    ```

*   还有那些`modelID`为空`makeID`且不在第一个子查询中的：

    ```
    SELECT Count(leadID) FROM Leads
    WHERE makeID is NOT IN (...)
    AND modelID is Null 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:08:43.597

我能想到的三个案例：

*   *uploadDataMapID*的uploadID*不*等于 3
*   *uploadDataMapID*的uploadRowID*不*等于 1 或 2
*   *您的潜在客户*表中有 NULL *makeID*或*modelID*条目

 *`SELECT count(leadID) FROM leads WHERE makeID IS NULL OR modelID IS NULL`

```
SELECT count(leadID) 
FROM leads AS l INNER JOIN DG_App.dbo.uploadData AS u ON l.makeID = u.uploadDataMapID
WHERE u.uploadID <> 3 OR u.uploadRowID <> 1

SELECT count(leadID)
FROM leads AS l INNER JOIN DG_App.dbo.uploadData AS u ON l.modelID = u.uploadDataMapID
WHERE u.uploadID <> 3 OR u.uploadRowID <> 2 
```

这三个查询应该为您提供丢失的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:06:19.623

这里有一些解释。

```
-- sample tables to discuss
create table innotintest (a int);
insert into innotintest values (1),(2),(3),(4),(null);
create table other (b int);
insert into other values (2),(3);
create table other1 (c int);
insert into other1 values (2),(3),(null);

select * from innotintest where a not in (select b from other); -- RESULT = 1,4
select * from innotintest where a in (select b from other);     -- RESULT = 2,3
--Overall outcome : Record with a=NULL is missing. It is neither IN nor NOT IN

select * from innotintest where a not in (select c from other1); -- RESULT = (none!)
select * from innotintest where a in (select c from other1);     -- RESULT = 2,3
--Overall outcome : Record with a=NULL is missing
--                  Moreover, when other1 contains NULL values,
--                            NOTHING is returned for NOT IN 
```

重申代码中的注释

1.  **NULL**既不是**`IN()`**也不是**`NOT IN()`**
2.  当集合**`NOT IN(...)`**中包含**NULL**时，不会匹配过滤器*******

# javascript - 在子关闭事件上执行父函数

> ID：13300082
> 
> 赞同：0
> 
> 时间：2012-11-09T00:01:56.763
> 
> 标签：javascript, javascript-events

我在这里面临一个无聊的问题。我需要在子窗口的关闭事件中调用父窗口上的函数。我的代码是这样的：

```
$(function(){
    $("#btnPlay").click(function(){
        ShowPopup("URL", 600, 600, DoSomeStuff);

    });
});
function DoSomeStuff(){
    // Do some stuff
}
function ShowPopup(url, width, height, closeCallback){
    var options = "resizable=yes, status=no, location=no, menubar=no, width= " + width + ",height=" + height;
    var w = window.open(url, "_blank", options );
    w.onunload = function(){ 
        // INVOKE DoSomeStuff of the parent window
        console.log("X");
    }

} 
```

但似乎**onunload**事件没有被调用！可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:14:38.173

我认为你非常接近。

尝试：

```
function ShowPopup(url, width, height, closeCallback){
    var options = "resizable=yes, status=no, location=no, menubar=no, width= " + width + ",height=" + height;
    var w = window.open(url, "_blank", options );
    w.onunload = function(){ 
        closeCallback();
        console.log("X");
    }
} 
```

# ruby - 如何在使用 ERB 作为主要模板引擎时在 Sinatra 中渲染 Mustache 部分

> ID：13300085
> 
> 赞同：1
> 
> 时间：2012-11-09T00:02:21.973
> 
> 标签：ruby, views, sinatra, template-engine, mustache

我有一个 sinatra 应用程序，它主要使用 erb 作为模板，但我正在为需要在服务器端和客户端呈现的 html 块添加一些小胡子部分。我有一个“视图”目录，其中保存了所有模板，包括我添加的胡子模板。例如，结构看起来像这样：

```
views/
    index.html.erb
    _wingding.html.erb
    _widget.html.mustache 
```

假设我正在使用这个端点渲染 index.html.erb：

```
get '/' do
    erb :index
end 
```

*在该模板中*，我想渲染上述两个*部分`partial`渲染组件，所以这里的问题仍然存在。*]。所以 index.html.erb 包含：

```
<%= partial :wingding %>
<%= partial :widget %> 
```

erb 部分（wingding）渲染得很好，但 mustache 部分（小部件）却没有。它会导致应用程序抛出异常：

> 找不到模板引擎：小胡子

我在项目中包含了“小胡子”宝石。我试过`'require mustache/sinatra'`了`register Mustache::Sinatra`。这两种说法都有效，但没有解决上述问题。知道如何告诉 sinatra 关于小胡子的信息，以便它可以渲染小胡子部分吗？

我通过包含以下配置来设置我的视图目录：

```
configure do
    set :views, File.join(File.dirname(__FILE__), 'views')
end 
```

版本号：

*   西纳特拉 1.3.1
*   小胡子 0.99.4
*   红宝石 1.9.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:31:15.557

因此，事实证明，我的其他答案中的解决方案中列出的 gem 缓存了输出，这意味着您不能使用它在同一请求中包含具有不同本地人的相同部分，这对于我的目的而言毫无价值。所以这是我已经确定的另一个（不可否认的hackish）解决方案。我创建了一个助手，它将只提供给定视图的内容：

```
helpers do
    def template_contents(path)
        File.open("#{settings.views}/#{path}") { |f| f.read }
    end
end 
```

然后，我只是做一个常规的`Mustache#render`：

```
<%= Mustache.render(template_contents('_widget.html.mustache'), { ... }) %> 
```

这对我的用例很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:20:35.413

我想通了。首先，我必须注意一些我在发布问题时没有意识到的事情。`partial`实际上并没有内置到 sinatra 中。它作为[sinatra-more](https://github.com/nesquena/sinatra_more) gem 的一部分包含在我的应用程序中（已停产，它的大部分功能现在都在一个名为[padrino](https://github.com/padrino/padrino-framework)的项目中，但在这个应用程序中仍然使用 sinatra-more）。部分方法是这样包含的：

```
require 'sinatra_more/render_plugin'

module Sinatra
    register SinatraMore::RenderPlugin
end 
```

无论如何，这只是添加了该`partial`方法（以及其他一些渲染助手），但是此方法依赖于内置的 sinatra 渲染代码，因此这一事实与该问题中手头的实际问题无关——sinatra 没有默认识别 mustache 模板引擎。原来有人创造了一个超级简单的 gem 来让它工作，[sinatra-mustache](https://github.com/jxson/sinatra-mustache)。您只需包含 gem 并需要库：

```
require 'sinatra/mustache' 
```

就是这样 - 它只是工作！无需额外配置。如果你好奇它是如何工作的，源代码非常简单。用 sinatra 注册一个新的模板引擎绝不是一条线（甚至说“注册”是用词不当——你基本上必须实现它），但它仍然相当简单。

*更新：此 gem 缓存给定请求/模板的输出，因此您不能在不同的本地人中再次使用它。我可以看到没问题的情况，但这对我的用例来说毫无价值。*

# php - php 在 wampserver (windows) 上创建非 ASCII 目录

> ID：13300088
> 
> 赞同：0
> 
> 时间：2012-11-09T00:02:37.993
> 
> 标签：php, wampserver, mkdir

如何在 wampserver (windows) 上创建具有非 ASCII 名称的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:21:21.910

```
$str = 'سسسس';
if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
     $str = iconv( "UTF-8", "Windows-1256", $str );
}
mkdir( $str ); 
```

如果您的`iconv`支持`Windows-1256`和包含字符串文字的 PHP 文件`'سسسس'`以 UTF-8 保存，这将起作用。

# objective-c - 输入附件视图实现

> ID：13300090
> 
> 赞同：0
> 
> 时间：2012-11-09T00:02:47.587
> 
> 标签：objective-c, ios, uitableview, uitextfield, custom-controls

绝对是初学者 obj-c 问题。过去几天我对完成我的任务感到非常沮丧，但似乎我现在遇到的问题比我的知识水平更大。在发布这个问题之前，我以不同的形式问了几次这个问题，但到目前为止我还不知道如何去做，所以我搜索了交钥匙解决方案。

任务：

带有两个部分的普通 UITableView。我只对改进输入附件视图以在单元格中的四个文本字段之间切换的第一部分感兴趣。 [http://uaimage.com/image/62f08045](http://uaimage.com/image/62f08045)

自定义单元格继承自 UITableViewCell 并在其中具有 UITextField 作为属性。所以我的任务是将第一响应者设置为不同的文本字段。

想法：

*   将 textFields 设置为 ViewController 的委托，然后在输入附件视图方法中辞职并设置第一响应者
*   标记文本字段，设置 NSMutableArray 填充此文本字段，然后在 -inputAccessoryViewNext 和 -inputAccesoryViewPrev 更改响应者
*   通过 indexPath 标记单元格并从单元格中获取 textFields

但是我无法正确实现这些进步，而且对我来说还没有任何效果，所以非常需要帮助。我在上面附加了 UITableViewController.m 和 FDTextFieldCell.m（自定义单元格）：

[https://docs.google.com/open?id=0B5rYA7McNhFlSXBrLTFVU2hVd1U](https://docs.google.com/open?id=0B5rYA7McNhFlSXBrLTFVU2hVd1U)

将很高兴奖励任何可以通过适度的声誉来提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:21:18.887

我认为您的第二个想法是正确的方法。将一个实例变量添加到您的表视图控制器`NSMutableArray *_textFields`中，并将其初始化为`viewDidLoad`.

然后，在您的`tableView:cellForRowAtIndexPath:`方法中，每次添加类似这样的内容：

```
 if ([indexPath row] == 0) {
        FDTextFieldCell *cell = [self textFieldCell];
        [[cell textLabel] setText:@"Ваше Имя"];
        [[cell textField] setPlaceholder:@"Обязательно"];
        [[cell textField] setText:[profile name]];

        [[cell textField] setReturnKeyType:UIReturnKeyNext];
        [[cell textField] setKeyboardType:UIKeyboardTypeDefault];

        // ADD THIS
        [[cell textField] setTag:[indexPath row]];
        if (![_textFields containsObject:[cell textField]]) {
            [_textFields addObject:[cell textField]];
            [_textFields sortUsingDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"tag" ascending:YES]]];
        }

        return cell;
    } 
```

从那里，您有一个排序的文本字段数组，因此您可以像这样实现您的辅助方法：

```
- (void) inputAccessoryViewDidSelectNext:(FDInputAccessoryView *)view {
    UITextField *textField = nil;
    for (textField in _textFields) {
        if ([textField isFirstResponder])
            break;
    }

    NSInteger indexOfFirstResponder = [_textFields indexOfObject:textField];
    NSInteger nextIndex = indexOfFirstResponder + 1;
    if (nextIndex == [_textFields count])
        nextIndex = 0;

    UITextField *nextField = [_textFields objectAtIndex:nextIndex];
    [nextField becomeFirstResponder];    
}

- (void) inputAccessoryViewDidSelectPrev:(FDInputAccessoryView *)view {
    UITextField *textField = nil;
    for (textField in _textFields) {
        if ([textField isFirstResponder])
            break;
    }

    NSInteger indexOfFirstResponder = [_textFields indexOfObject:textField];
    NSInteger previousIndex = indexOfFirstResponder - 1;
    if (previousIndex < 0)
        previousIndex = [_textFields count] - 1;

    UITextField *previousField = [_textFields objectAtIndex:previousIndex];
    [previousField becomeFirstResponder];
} 
```

# c# - Microsoft Solver Foundation 位置分散目标

> ID：13300094
> 
> 赞同：6
> 
> 时间：2012-11-09T00:02:56.537
> 
> 标签：c#, optimization, ms-solver-foundation

我正在尝试使用 microsoft 求解器基础，以便能够从一组位置中选择 3 个最分散的位置。我在我的模型中添加了两个目标，一个确保选择 3 个位置，另一个确保它们是最分散的 3 个位置。

```
static void Main(string[] args)
    {
        Location candidate1 = new Location(0, 43.432, -79.432);
        Location candidate2 = new Location(1, 43.0, -79.0);
        Location candidate3 = new Location(2, 23.0, 29.0);
        Location candidate4 = new Location(3, 43.0, -79.0);
        Location candidate5 = new Location(4, 43.0, -79.0);
        Location[] candidates = {candidate1, candidate2, candidate3, candidate4, candidate5};
        SolverContext solver = new SolverContext();
        Model model = solver.CreateModel();
        model.Name = "LocationModel";
        Set items = new Set(Domain.Any, "candidates");
        Decision take = new Decision(Domain.Boolean, "candidate", items);
        model.AddDecision(take);
        Parameter locations = new Parameter(Domain.RealNonnegative, "locations", items);
        locations.SetBinding(candidates, "ID", "ID");
        model.AddParameter(locations);

        var dist = from l1 in candidates from l2 in candidates select new { ID1 = l1.ID, ID2 = l2.ID, dist = Geography.GetDistance(l1.Latitude, l1.Longitude, l2.Latitude, l2.Longitude) };
        Parameter distance = new Parameter(Domain.RealNonnegative, "Location", items, items);
        distance.SetBinding(dist, "dist", "ID1", "ID2");
        model.AddParameter(distance);            
        Term goal = Model.Sum(Model.ForEach(items, i => Model.ForEach(items, j => take[i]*take[j]* distance[i, j])));

        model.AddConstraint("LocationsQuantityMax", Model.Sum(Model.ForEach(items, item => take[item])) == 3);
        model.AddGoal("Dispersion", GoalKind.Maximize, goal); 

        Directive directive = new HybridLocalSearchDirective();            
        Solution solution = solver.Solve(directive);
        List<Location> locations1 = new List<Location>();
        if (solution.Decisions.Any())
        {
            var selections = solution.Decisions.First().GetValues()
                .Where(d => (bool) d[0])
                .Select(d => Convert.ToInt32(d[1]));

            locations1.AddRange(
                from c in candidates
                join s in selections on c.ID equals s
                select c);
        }

        foreach (Location location in locations1)
        {
            Console.WriteLine("ID: {0}, Latitude: {1}, Longitude: {2}", location.ID, location.Latitude, location.Longitude);
        } 
```

此外，我的 Location 类如下所示：

```
class Location
{
    public int ID { get; private set; }
    public double Latitude { get; private set; }
    public double Longitude { get; private set; }

    public Location(int LocationID, double latitude, double longitude)
    {
        this.ID = LocationID;
        this.Latitude = latitude;
        this.Longitude = longitude;
    }
} 
```

我的距离计算是：

```
 public static double ToRad(this double num)
    {
        return num * Math.PI / 180;
    }

    public static double GetDistance(double lat1, double lon1, double lat2, double lon2)
    {
        const int r = 6371; // Radius of earth in KM

        // Convert to Radians
        lat1 = lat1.ToRad();
        lon1 = lon1.ToRad();
        lat2 = lat2.ToRad();
        lon2 = lon2.ToRad();

        // Spherical Law of Cosines
        var resultCos =
            Math.Acos(
                Math.Sin(lat1) * Math.Sin(lat2) +
                Math.Cos(lat1) * Math.Cos(lat2) * Math.Cos(lon2 - lon1)
                ) * r;

        return resultCos;
    } 
```

现在我的代码有两个问题，我不知道它们的来源，

首先，

我的代码目前适用于 5 个位置的大多数排列，其中三个是相同的经度纬度（即在此；例如候选 2、候选 4 和候选 5），但对于候选的某些排列，它不会返回最分散的 3 个（即对于相同的问题实例只是更改候选人声明的顺序）。我无法理解为什么。

第二，

如果您注释掉约束以选择至少 3 个位置，而不是像预期的那样选择所有位置，它不会选择任何位置。

我的目标适用于大多数情况这一事实似乎表明它是正确的，有人知道它为什么有时会动摇吗？

这不是家庭作业，非常感谢任何回复的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:46:19.883

我认为问题在于您指定了`HybridLocalSearchDirective`. 我从您发布的代码中删除了它并得到了最佳答案：

```
ID: 0, Latitude: 43.432, Longitude: -79.432
ID: 1, Latitude: 43, Longitude: -79
ID: 2, Latitude: 23, Longitude: 29 
```

重新排列条款甚至添加新位置仍然会产生最佳解决方案。

此外，我随后删除了约束，您的代码选择了所有五个`Location`对象作为解决方案。

我希望我能解释一下*为什么*会这样，但谈到无国界医生时，我只是一个周末战士。 [这是](http://msdn.microsoft.com/en-us/library/gg315117.aspx)我能找到的关于[`HybridLocalSearchDirective`](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.services.hybridlocalsearchdirective.aspx)它以及它如何得出解决方案的最多信息。重要的是，注意到的第一个限制是：

> 它不保证最佳结果。

这可能是您第一个问题的答案（为什么它不返回最大分散的位置）。

至于您的第二个问题（为什么删除约束不会导致更多选定的位置），我不能肯定地说。您的问题规范可能是该指令的退化案例，尽管我不知道为什么。

不是最好的答案，但我希望它有帮助！

# layout - 将图像链接添加到当前布局 - rebol

> ID：13300097
> 
> 赞同：0
> 
> 时间：2012-11-09T00:03:25.557
> 
> 标签：layout, rebol

我正在玩 Rebol，但不知道如何将用户的组件添加回我的布局。

我有一个布局，其中包含从图像 URL 获取的图像，链接到在线文章/视频。我想在线添加更多链接到其相应文章/视频的图像，从用户那里获取 2 个 url（一个用于图像，一个用于文章/视频）。

我是否使用列表，将两个链接添加到列表并使用 show 作为按钮事件再次调用视图？有没有办法在不刷新整个布局的情况下添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:47:12.573

您可以使用列表，但它是一个棘手的野兽。我将在此处包含一个示例，以便您评估它的工作方式以及它是否适合您。

使用列表，您可以定义布局，然后根据某些数据或其他数据动态修改布局。为了说明，这里有一些图标：

```
icons: [
    http://reb4.me/r/html-document.png
    http://reb4.me/r/pdf-document.png
    http://reb4.me/r/excel-document.png
    http://reb4.me/r/word-document.png
    http://reb4.me/r/zip-document.png
] 
```

列表样式由大小、布局和供应函数组成（我将在边缘进行说明）：

```
view center-face layout [
    across

    lst: list 48x240 edge none [image 48x48] supply [
        face/image: all [
            img: pick icons count
            load-image img
        ]
    ]

    btn "Random" [
        icons: random icons
        show lst
    ]
] 
```

底部包含一个按钮，用于修改我们的数据，然后*仅*重新显示列表。

*   大小是`48x240`——列表垂直工作，调用供应函数（列表高度/迭代布局高度）次。我有五个图标，所以将图标高度乘以五。

*   这`[image 48x48]`是我们的迭代布局。请注意，我们在这个例子中只定义了一张脸。与通用布局不同，列表布局是使用`layout/tight`细化创建的 - 如果您想要交替间距，则需要具体。

*   这`supply [...]`部分是我们的供应功能。这是将被创建和调用以更新列表的函数的简写。该功能是操作面的`func [face count index][...]`位置；是列表中的位置；并且是迭代布局中的偏移量。`face``count``index``face`

*   记住迭代布局只创建**一次**是关键。随着计数的增加，您只是在更改该布局中面的属性。

*   您只需要`show`列表，而不需要整个布局。

所以从这里，你可以看到数据源和显示之间的关系。

# javascript - 不使用 FB.login() 登录

> ID：13300099
> 
> 赞同：1
> 
> 时间：2012-11-09T00:03:28.927
> 
> 标签：javascript, facebook, facebook-oauth

我想知道是否有办法通过 oAuth (get-request) 而不是使用 FB.login() 登录 Facebook。

我使登录复杂化的原因是因为 FB.logout() 问题。从 Facebook 注销某人太自大了，只是因为他们想从我的网站注销。另一方面，从我的应用程序中删除用户*，每次都会提示他们接受我的条款，这似乎也不是很专业。

我正在成像的是：

1.  我从 GET 调用中获得所需的信息
2.  我存储会话cookie
3.  如果用户想注销，我会删除它们

一旦我检索到用户 ID + access_token，我可以通过简单地进行 JSON 调用来获取所有其他信息（不是吗？）。

总体而言，Facebook 存储了这么多 cookie 也让我感到烦恼（他们在做什么？）..

我试图搜索这个，但到目前为止没有运气。

*正如 DMCS 在本主题中提出的：[Can't Logout of my Facebook OAuth Session without logging User Out of Facebook](https://stackoverflow.com/questions/8828221/cant-logout-of-my-facebook-oauth-session-without-logging-user-out-of-facebook)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:41:51.407

您可以使用服务器端流程，但您必须遵守相同的策略。

无论哪种方式，听起来您都在使用 FB 的会话数据来控制身份验证状态，这是一个非常糟糕的主意 - 您应该只使用 Facebook 提供的数据作为初始声明，然后将其转换为具有相应的本地声明身份验证令牌/会话 cookie 等。

# wordpress - wordpress 中的博客部分

> ID：13300100
> 
> 赞同：0
> 
> 时间：2012-11-09T00:03:46.923
> 
> 标签：wordpress, templates, subdomain, blogs

我有一个网站，我希望该网站的一个子部分成为博客。

细节：

该网站是相当动态的。

我有通过使用特色图像的自定义帖子类型填充的图像轮播。

我有通过自定义帖子类型等填充的标题和标题......这一切都在索引文件中。

我想创建一个纯博客（即网站的新闻样式子部分，它聚合了 www.domain.com/blog 上的最新博客文章，具有发布相关内容、评论部分等的小部件区域）作为子文件夹的着陆页。

我在想我会创建一个新的 wordpress 实例并将其放在名为 blog 的域的子目录中。显然，这不是最佳解决方案。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:32:55.477

没有理由再安装一次 wordpress。只需创建一个单独的模板并从那里开始。

这两个链接应该可以帮助您入门：

[http://codex.wordpress.org/Stepping_Into_Templates](http://codex.wordpress.org/Stepping_Into_Templates) [http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

# javascript - jQuery提交后如何强制硬刷新（Internet Explorer）

> ID：13300105
> 
> 赞同：2
> 
> 时间：2012-11-09T00:04:24.010
> 
> 标签：javascript, jquery, internet-explorer

我正在尝试将图片上传到服务器。上传完成后，页面会自动刷新。在 FF、Chrome 等中一切都很好，但在 IE 中，新页面没有用新照片更新。此行为是设计使然：http: [//support.microsoft.com/kb/237885](http://support.microsoft.com/kb/237885)

有没有办法在 jQuery.submit 之后强制进行硬刷新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:08:35.140

您可以将您的网络服务器设置为为该特定图像发出无缓存标头；但这会影响每个客户的每个请求，因此并不理想。

最好的解决方案是更改资源的 URL；在 JavaScript 中或在服务器上。向 URL 添加查询字符串就足以强制刷新...例如更改：

```
/my_image.jpg 
```

到

```
/my_image.jpg?version=2 
```

要生成数字，您可以使用时间戳（`(new Date()).getTimestamp()`在 JavaScript 中）或随机数（`Math.random() * 1000000`）。

一个完整的 JavaScript 解决方案是向要刷新的图像添加一个类（例如`force-reload`），然后将其`src`作为`data-`属性；

```
<img class="force-reload" data-src="/my_image.jpg"/> 
```

然后在 jQuery 中：

```
$(document).ready(function () {
    var now = (new Date()).getTime();

    $('img.force-reload').prop('src', function () {
        return $(this).data('src') + "?" + now;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:09:32.257

将带有时间戳的查询字符串添加到图像 url，如下所示：

```
<img src="/path/to/image.jpg?1234567890"/> 
```

这将强制清除所有浏览器缓存。

# javascript - Foundation Framework Orbit 无法在幻灯片之间正确设置动画

> ID：13300107
> 
> 赞同：0
> 
> 时间：2012-11-09T00:04:41.180
> 
> 标签：javascript, zurb-foundation, orbit

我尝试将基础框架与轨道滑块一起使用，当我在浏览器上对其进行测试时，滑块会执行转换，但是动画没有被执行，只是从一个部分淡入到另一个部分。

只有当我尝试调整窗口大小时，它才能按预期工作。

经过进一步检查，显然当滑块尝试使用'horizo​​ntal-push'进行更改时，轨道滑块div的变量this.outerWIdth是1而不是div的实际宽度。

这是我使用轨道的功能滑块的标记。

```
<div id="features-wrap" class="wrapper">
            <!-- Insert Features Here -->
            <div id="features-gutter" class="row">
                <section id="features" class="row">
                    <div id="welcome">
                        <div class="eight columns">
                            <h4>Welcome</h4>
                            <p>Hello.</p>
                        </div>
                        <div class="four columns">
                            <img src="img/content/promo1.jpg" alt="Promo Image 1" width="320" height="220">
                        </div>
                    </div>
                    <div id="decorated">
                        <div class="eight columns">
                            <h4>Decorated Apparel</h4>
                            <p>Some Text</p>
                        </div>
                        <div class="four columns">
                            <img src="img/content/promo2.jpg" alt="Promo Image 1" width="320" height="220">
                        </div>
                    </div>
                    <div id="promotional">
                        <div class="eight columns">
                            <h4>Protional Products</h4>
                            <p>Some Text</p>  
                        </div>
                        <div class="four columns">
                            <img src="img/content/promo3.jpg" alt="Promo Image 1" width="320" height="220">
                        </div>
                    </div>
                </section>
            </div>
            <!-- End Insert Features Here -->
        </div> 
```

代码结束这也是我正在调用的 Javascript。

```
var featuresSlider = $('#features');
featuresSlider.orbit({fluid: '2x1', animationSpeed: 650, animation: 'horizontal-push' }); 
```

我对代码做了什么，或者它真的是当前轨道脚本的错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:23:14.513

找到了答案。为了让滑块获得正确的外宽度，我必须转到初始化滑块的 div 并覆盖 css 文件中插件设置的宽度。例如：如果功能控制我的轨道滑块，那么我需要这样做：

```
#features {
    width: <set the width here> !important;
    <any other styles here>
} 
```

谢谢

# css - jQuery UI - 使用带有 .button() 的不同图标 css

> ID：13300109
> 
> 赞同：1
> 
> 时间：2012-11-09T00:04:50.343
> 
> 标签：css, jquery-ui, twitter-bootstrap, css-sprites

想知道是否有人知道克服这个缺点的方法。

我的所有按钮操作都使用 jQuery UI 按钮，而股票图标有点无聊，我更喜欢使用 twitter 引导程序中的图标集。

在我继续之前，这里是我如何设置按钮的样式：

```
$('#juiBtnLocked').button({
    disabled: true,
    icons: {
        primary: "ui-icon-locked"
    }
}); 
```

似乎图标属性只接受 jquery ui css 样式，我不知道为什么这很重要，因为提供的值是 css 文件中的完整 css 名称，因此在逻辑上它应该在*技术上*接受任何给定的 css 规则。

我的问题是，有没有人成功地获得了另一个 css sprite 代码来使用按钮？

回答为什么我不只使用 twitter 按钮的问题，因为这破坏了 jquery ui 按钮，我使用了太多的 jquery ui 工具包来放弃它。如果 twitters 对话框更健壮，我会稍微浏览一下 jquery ui，但它对我的需求来说太有限了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:55:49.767

bažmegakapa 说的是一个很好的答案，这就是我将其标记为答案的原因，但我找到了另一种允许我两种用法的方法。我在这里写它是为了让人们知道另一种方法。

使用 twitter bootstrap，你有按钮 CSS，然后你有类似于 jquery ui 的按钮 js 代码。

我所做的只是从他们的按钮中取出 js 代码，然后使用 css 规则来设置我的按钮样式。现在jquery ui很开心，我也很开心。

我注意到同样的方法也适用于 twitter 引导程序中的其他一些事情。

这实际上是一个比我做的更好的解决方案，因为与制作按钮元素并使用 jquery ui 对其进行样式和塑造相比，它现在所有的 html 都受控制，我想这有点矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:09:38.100

您可以简单地使用 CSS 覆盖该类的样式。

```
.ui-icon-locked {
    background: url(myimage.png) no-repeat 0 0;
} 
```

`ui-icon-locked`不是 CSS 规则。它只是一个 HTML 类的钩子。样式（包括图标）的默认规则存储在`jquery-ui.css`您正在使用的主题目录中。

例如，在[`jquery-ui.css`1.9.1 的基本主题中，](http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css)您可以找到这些：

```
.ui-icon { width: 16px; height: 16px; background-image: url(images/ui-icons_222222_256x240.png)/*{iconsContent}*/; }
...
.ui-icon-locked { background-position: -192px -96px; } 
```

# django - 如何从小部件定义中访问 Django 小部件的 id？

> ID：13300110
> 
> 赞同：2
> 
> 时间：2012-11-09T00:05:06.133
> 
> 标签：django, django-forms, django-widget, django-models

我正在为日期时间字段创建自定义小部件：

```
class MySplitDateTimeWidget(forms.SplitDateTimeWidget):
    def format_output(self, rendered_widgets):
        mytimeid = self.widgets[1].attrs['id']  #####NEED HELP HERE
        temp = "javascript:$('%s').val(new Date().getHours());" % mytimeid
        temp1 = '<a href="%s">Now</a>' % temp
        return mark_safe(u'%s %s<br />%s %s %s' % \
            (_('Date:'), rendered_widgets[0], _('Time:'), rendered_widgets[1],
            temp1
        )) 
```

我需要小部件的“id”属性，但是 self.widgets 不包括 attrs 中的“id”属性。它包括所有其他属性。我不确定这个属性来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T06:11:20.737

我只是在努力解决完全相同的事情；希望这对其他人有用。“id”属性通过以下方式设置：

1.  表单被要求呈现自己
2.  表单遍历其字段
3.  对于每个字段，表单调用其自定义`__getitem__()`，将字段包装为 BoundField
4.  该`as_widget()`方法中的 BoundField 是实际设置“id”属性的内容（另请参见`auto_id()`方法）
5.  MultiWidget 然后执行它的`render()`方法，该方法呈现它的每个子小部件，然后将它们与`format_output()`

因此，要回答您的问题，您需要获取方法中的 ID`render()`而不是`format_output()`方法：

```
class MySplitDateTimeWidget(forms.SplitDateTimeWidget):
    def render(self, name, value, attrs=None):
        widgets_html = super(MySplitDateTimeWidget, self).render(name, value, attrs)

        # attrs['id'] is the ID of the entire widget, append the prefix to chose the sub-widget
        mytimeid = attrs['id'] + '_0' 
        temp = "javascript:$('%s').val(new Date().getHours());" % mytimeid
        temp1 = '<a href="%s">Now</a>' % temp

        return mark_safe(widgets_html + ' ' + temp1)

    def format_output(self, rendered_widgets):
        return mark_safe(u'%s %s<br />%s %s' % (_('Date:'), rendered_widgets[0], _('Time:'), rendered_widgets[1])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:12:25.113

除非您已将其覆盖，否则**ID**应为：

> id_[名称]

所以试试：

```
mytimeid = 'id_'+self.widgets[1].attrs['name'] 
```

# sqlite - DbLinq DbMetal - 添加外键时“字典中不存在给定的键”

> ID：13300114
> 
> 赞同：0
> 
> 时间：2012-11-09T00:05:42.823
> 
> 标签：sqlite, linq-to-sql, dml, dblinq, dbmetal

这是我最初的 SQLite 数据库

```
CREATE TABLE [Categories] (
  [ParentId] INT, 
  [Name] VARCHAR(100));

CREATE TABLE [Fees] (
  [CategoryId] INT, 
  [Name] VARCHAR(100), 
  [Value] VARCHAR(50), 
  [Info] VARCHAR(200));

CREATE TABLE [Markups] (
  [CategoryId] INT, 
  [UpTo] MONEY, 
  [Value] VARCHAR(50), 
  [Info] VARCHAR(200)); 
```

如果我运行`DbMetal /provider:Sqlite /conn "Data Source=bms4.db3" /dbml:Model.dbml`，它将成功创建 dbml 文件。

但是如果我添加一个外键，这样

```
CREATE TABLE [Fees] (
  [CategoryId] INT CONSTRAINT [fk_fees_categories] REFERENCES [Categories]([rowid]), 
  [Name] VARCHAR(100), 
  [Value] VARCHAR(50), 
  [Info] VARCHAR(200)); 
```

运行相同的命令

```
DbMetal /provider:Sqlite /conn "Data Source=bms4.db3" /dbml:Model.dbml 
```

会给出这个错误：

```
>>> Reading schema from SQLite database
DbMetal: The given key was not present in the dictionary. 
```

如何将外键关系引入 DBML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:11:33.290

根据约束中的唯一键检查外键。您尚未声明主键或唯一键，因此您需要先声明（最好确保每个表都有一个主键）

# .net - 以编程方式监视文件上的 Windows #locks，如 compmgmt.msc 中所示

> ID：13300117
> 
> 赞同：2
> 
> 时间：2012-11-09T00:05:58.327
> 
> 标签：.net, windows, locks

我们目前遇到的问题是，有太多用户试图通过使用文件锁的旧程序访问单个文件。

我正在尝试编写一个将在服务器上运行并监视此特定文件（平面文件数据库）的 dotnet 程序是否可行。每当客户端尝试访问此文件并且它被另一个用户锁定时 - 我想向他们发送一条消息，告诉他们谁正在访问该文件，以便他们可以惹恼那个人而不是我。

当我打开 compmgmt.msc 时，我可以看到文件、文件锁和锁定它的用户，所以我知道这些信息是可以访问的。但是我似乎找不到可以获取此信息的 dotnet 类（#locks，已锁定它的用户）。

有人知道可以在这里帮助我的课程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:37:29.530

底层的 winapi 函数是 NetFileEnum()。你必须[pinvoke 它](http://www.pinvoke.net/default.aspx/netapi32/NetFileEnum.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:30:28.867

您可能可以通过 WMI（Windows 管理规范）访问这些信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)

这可能是一个很好的起点： [http ://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/19b88200-3dfd-4042-b16a-1f514dd5e1f9](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/19b88200-3dfd-4042-b16a-1f514dd5e1f9)

此外，在使用 WMI Explorer 开始编码之前，请尝试获取您正在寻找的信息： [http ://www.ks-soft.net/hostmon.eng/wmi/index.htm](http://www.ks-soft.net/hostmon.eng/wmi/index.htm)

这也有帮助： select * from cim_datafile where name='d:\file.txt'

请注意使用双斜杠“\”

# php - 使用 xajax 创建分页

> ID：13300119
> 
> 赞同：0
> 
> 时间：2012-11-09T00:06:04.677
> 
> 标签：php, xajax

我有个问题。在我查询时，我显示了 100 多行，我想知道是否有人可以制作一个页面，每页只显示 25 行

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:12:44.637

LIMIT 子句可用于限制 SELECT 语句返回的行数：

```
SELECT *
FROM `table`
WHERE <conditions>
LIMIT 25 OFFSET <offset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:20:18.550

我建议使用现成的解决方案。

1.  如果您可以使用 jQuery oick[这些](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)插件之一
2.  您还可以使用[JQuery DataTable](http://datatables.net/)。检查[这个](http://www.packtpub.com/article/data-tables-datatables-plugin-jquery-1.3-with-php)例子
3.  或者您可以编写自定义解决方案。[这](http://www.andrehonsberg.com/article/php-ajax-pagination-class)可能会有所帮助

# android - 使用变量时无法从 JSON 对象获取名称/值对

> ID：13300122
> 
> 赞同：2
> 
> 时间：2012-11-09T00:07:00.293
> 
> 标签：android, json

在使用变量时无法从 JSON 对象获取名称/值对，但在对名称进行硬编码时能够读取它。

为了更好地解释：

1) 我的 JSON 对象是这样的 - {..... { "rates":{ "name1": value1, "name2": value2 ...etc } ...}

2）我能够在我的 android 应用程序中读取这个对象。

3）现在这个速率对象名称值对，我试图根据用户输入读取 -

```
 String s1 = '"'+name1+'"';  // here name1 i got from user input, & converted into string 
```

4）现在当我试图从费率对象中获取值时，我得到空异常 -

```
 JSONObject rateObject = jObject.getJSONObject("rates");  //able to get  
                                                                    complete object

            String rate1 = (String) rateObject.get(s1); // giving NULL exception 
```

5）但如果我使用硬编码字符串，它可以工作 -

```
 String rate1 = (String) rateObject.get("name1"); // working 
```

任何指针为什么它在使用变量时不起作用。

谢谢

* * *

感谢您的建议，我解决了问题。我犯了两个错误 - 1）使用其他人正确指出的引号和 2）将双精度值转换为字符串。纠正两者都解决了我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:14:11.493

就您的最终代码片段而言，您*实际上是*在做

```
String rate1 = (String) rateObject.get("\"name1\""); //note the extra quotes 
```

因为您已经用双引号字符预订了用户输入字符串。您只希望输入字符串本身没有书尾。JSON 符号中的引号用于描述每个键名；引号不是键名本身的一部分。

创建时需要省略引号`s1`：

```
String s1 = name1; 
```

或者，如果`name1`不是 String 已经：

```
String s1 = name1.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:16:06.410

代替：

```
String s1 = '"'+name1+'"'; 
```

和：

```
String s1 = name1; 
```

# facebook-opengraph - 如何防止我的 opengraph 动作故事被聚合到新闻提要中？

> ID：13300124
> 
> 赞同：2
> 
> 时间：2012-11-09T00:07:14.217
> 
> 标签：facebook-opengraph, facebook-feed, facebook-stream-story

我有一个 OpenGraph 动作发布工作。它在时间线中显示为我想要的，但仅在新闻源中显示为聚合，没有任何故事附件。如何使它在新闻源中的显示方式与它在时间线中的显示方式相同？

供参考，这里是时间线版本（这是我想要的）和提要版本（聚合，违背我的意愿）的屏幕截图：
发布的时间线版本：
[时间线故事发布 http://a.yfrog。 com/img580/6074/7ohf.png](http://a.yfrog.com/img580/6074/7ohf.png)
发布的新闻提要版本（包括过去测试用例的汇总）：
[提要故事发布 http://a.yfrog.com/img849/2553/9z2.png](http://a.yfrog.com/img849/2553/9z2.png)

2012 年 11 月 15 日编辑：我们有第二个打开图形操作，它不执行上述操作，但在时间线和提要中看起来相同（这是我们想要的）。
时间线版本：（[来源：][[yfrog.com](http://a.yfrog.com/img534/5502/ucm.png)][）]
[![时间线故事发布](../Images/0e3ae4b004900d34563896c37c2d3391.png)](https://i.stack.imgur.com/X3xjF.png)

提要版本：
[提要故事发布 http://a.yfrog.com/img203/2576/37p.png](http://a.yfrog.com/img203/2576/37p.png)

为什么这个出来的不一样？这就是我们想要的，但第一个不会这样做。

这并不是因为它们被聚合了。后一个也正确地做到了这一点，显示了我们的故事文本：
Aggregate on Feed：
[multiple feed story http://a.yfrog.com/img203/3096/knl.png](http://a.yfrog.com/img203/3096/knl.png)

2012 年 11 月 15 日编辑：交叉引用此错误报告：[https](https://developers.facebook.com/bugs/123954517762120) ://developers.facebook.com/bugs/123954517762120 。

# php - 更新命令不适用于mysql

> ID：13300127
> 
> 赞同：0
> 
> 时间：2012-11-09T00:07:30.887
> 
> 标签：php, mysql, ios

我一直在尝试通过 php 从 ios 获取 mysql 条目。我意识到我对更新命令提出了另一个问题（请参阅[MySQL Update command not working](https://stackoverflow.com/questions/13283501/mysql-update-command-not-working)），但这是我正在尝试的一个非常不同的脚本（而且更简单）。但是，我也无法更新它！我究竟做错了什么？（ps。我也试过这个命令在集合之间用 AND 而不是逗号，我也试过 $_POST ......我正在连接到我的数据库）。另外，我只是想弄清楚如何使更新命令正常工作……然后我将学习如何进行 sql 注入。我也尝试过手动值，但仍然没有。

```
<?php
$login = $_GET["log1b"];
$dogname = $_GET["dogname"];
$city = $_GET["city"];
$pass = $_GET["pass"];
$dogusername = $_GET["username"];
$mcode = $_GET["mcode"];

$con = mysql_connect("(censored)");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("(censored)", $con);
mysql_query("UPDATE login SET dogname = '$dogname', city = '$city', pass = '$pass', username = '$dogusername', mcode = '$mcode' WHERE login = '$login'");
mysql_close($con);
?> 
```

或在 xcode 中...

```
 NSString *urlString = [NSString stringWithFormat:@"http://(censored)?username=%@&dogname=%@&mcode=%@&pass=%@&city%@&log1b=%@", fldUsername.text, flddogname.text, fldmcode.text, fldpass.text, fldcity.text, log1b]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:11:13.953

我认为你缺少一个`'`around `$city`。

您也可能想使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)。

现在对我来说语法看起来不错。您应该手动尝试（使用[MySQL Toad](http://toadformysql.com/index.jspa)之类的工具）以确保查询有效。

# objective-c - 关于 MagicalRecord，MR_saveNestedContexts 和 MR_save 方法有什么区别

> ID：13300129
> 
> 赞同：0
> 
> 时间：2012-11-09T00:08:03.287
> 
> 标签：objective-c, ios, magicalrecord

在 MagicalRecord github 文档中它指出：

> MagicalRecord 提供了一个后台保存队列，以便在后台从主线程执行保存所有数据。这意味着可能需要使用 MR_saveNestedContexts 而不是典型的 MR_save 方法，以便将更改一直保存到持久存储。

查看源代码，我无法弄清楚这两种方法减去`dispatch_async`命令之间的区别。我看到它们都将所有嵌套上下文保存到根目录，因此保留到商店。但是为什么以及在什么情况下我会使用其中一种呢？

另外，至于只是将嵌套上下文保存到上一级（不持久存储），我假设我仍然会使用 NSManagedObjectContext 的`- (BOOL)save:(NSError **)error`方法？

下面是这两种方法的源代码。

```
- (void) MR_save {
    [self MR_saveErrorHandler:nil];
}

- (void) MR_saveErrorHandler:(void (^)(NSError *))errorCallback {
    [self performBlockAndWait:^{
        [self MR_saveWithErrorCallback:errorCallback];

        if (self.parentContext) {
            [[self parentContext] performBlockAndWait:^{
                [[self parentContext] MR_saveErrorHandler:errorCallback];
            }];
        }
    }];
}

- (void) MR_saveNestedContexts {
    [self MR_saveNestedContextsErrorHandler:nil];
}

- (void) MR_saveNestedContextsErrorHandler:(void (^)(NSError *))errorCallback {
    [self MR_saveNestedContextsErrorHandler:nil completion:nil];
}

- (void) MR_saveNestedContextsErrorHandler:(void (^)(NSError *))errorCallback completion:(void (^)(void))completion {
    [self performBlock:^{
        [self MR_saveWithErrorCallback:errorCallback];

        if (self.parentContext) {
            [[self parentContext] performBlock:^{
                [[self parentContext] MR_saveNestedContextsErrorHandler:errorCallback completion:completion];
            }];
        } else {
            if (completion) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    completion();
                });
            }
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:33:20.467

从 iOS5 和 Lion 开始，CoreData 中新的父/子功能，有时需要“强制”保存到磁盘。也就是说，例如，当您有 3 个上下文时，例如：

```
root <- child1 <- child2 
```

如果您保存在 child2 中，这些更改只会向上一级通知给 child1。Root不会拥有它们。为此，您必须再调用一次 save。您可以拥有任意长的这些上下文列表这一事实意味着您将不知道您的保存是否会到达根上下文，它也负责对存储（磁盘）进行持久更改。saveNestedContexts 使用递归来遍历这棵树，并确保您的保存实际上进入磁盘，当您打算这样做时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:10:44.720

'MR_save' 和 'MR_saveNestedContexts' 之间的相似性在 2.0.8 版本中发生了变化（我使用的是 2.0.7）。

这是 github 上的提交：[https ://github.com/magicalpanda/MagicalRecord/commit/f7c4350e9daf7d90eec83ba5eafeccfa7af34312](https://github.com/magicalpanda/MagicalRecord/commit/f7c4350e9daf7d90eec83ba5eafeccfa7af34312)

和讨论：[https ://github.com/magicalpanda/MagicalRecord/issues/305](https://github.com/magicalpanda/MagicalRecord/issues/305)

总而言之，在 2.0.8 版本中，“MR_save”现在只保存当前上下文，而“MR_saveNestedContexts”递归地保存到最顶层的上下文。

# orchardcms - Orchard CMS 查询多个分类

> ID：13300132
> 
> 赞同：0
> 
> 时间：2012-11-09T00:08:23.690
> 
> 标签：orchardcms

我在果园使用分类法。我有两种分类法 1：房子 > 买/租。和 2\. 位置 > 西班牙/法国/英国。我决定根据我的其他帖子和果园 cms 大师 Bertrand Le Roy 的建议使用分类法。[Orchard CMS 列表的最佳选择](https://stackoverflow.com/questions/13272473/orchard-cms-best-options-for-list/13272628#comment18118477_13272628)

**我的例子**

我有一个房屋内容类型（标题、正文、2 个分类字段 {1: HouseType > buy、rent. and 2: Location > spain, france, uk}），因此用户必须选择 1：购买或出租。然后从第二个分类中选择房屋位置，即西班牙。我有 2 所房子都使用房屋类型**购买**，但 1 座来自**西班牙**，1 座来自**英国**。

**我知道创建一个查询，这就是问题所在：如果我添加分类过滤器并选择购买，我会按预期**得到我的房子，如果我将过滤器设置为购买和西班牙（只有 1 个过滤器，但从选择中选择两者框）我仍然得到两所房子**，这是错误的，**我希望只得到 1 个。但是，如果我有 2 个单独的过滤器，1 个购买和 2 个西班牙，那么我没有返回任何结果，**这是错误的**。可以解释一下为什么这不起作用以及如何克服它。我需要能够在查询中说得到我，例如。西班牙所有类型的房子都买了，只买了那些房子。

谢谢

# node.js - 如何编辑通过 npm 安装的节点模块？

> ID：13300137
> 
> 赞同：185
> 
> 时间：2012-11-09T00:08:51.993
> 
> 标签：node.js, npm

我正在使用 node_swiz 模块，该模块又使用验证器模块。

我想对验证器模块进行更改，但我使用 npm install 来安装模块/依赖项。

我可以只更改 node_modules 中的验证器模块，还是重新创建 node_modules 依赖项并在我发布到 heroku 或下次运行 npm install 时获得最新版本？

结构如下所示：

```
myNodeApplication
  - node_modules
     - swiz
         - node_modules
            - validator [this is the library I want to edit] 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2012-11-09T04:24:22.377

您可以直接编辑该文件，但只要 npm 更新，这将被覆盖，最好的办法是直接访问源代码。

如果更改影响了整个模块的功能，并且可能对其他人有用，您可能希望为 github 上的原始源做出贡献并寻找要实施的更改。

如果这是需要的专有功能，并且对模块的开发没有帮助，最好的办法是从 github 分叉它并进行更改。您可以使用 NPM 直接从 github 安装项目，这种方法可以让您将未来的更改从原始源集成到您的自定义版本中。

要直接从 github 安装，请使用以下命令：

`npm install https://github.com/<username>/<repository>/tarball/<branch>`

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2020-06-25T03:40:56.477

您可以使用[patch-package](https://www.npmjs.com/package/patch-package)对节点模块进行更改并保持更改。

这可以通过首先更改内部包`node_modules`然后运行以下命令来完成，其中`<package name>`包含您刚刚更改的包的名称。

```
npx patch-package <package name> 
```

patch-package 然后将创建一个`patches`文件夹，其中包含一个文件，代表您的更改。然后可以将该文件提交到 git，以后可以通过运行`npx patch-package`（不带任何参数）恢复补丁。

**可选步骤：**

在 package.json 的脚本部分添加以下内容，以在执行“npm install”时自动修补依赖项。

```
"postinstall": "npx patch-package" 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-06-25T03:35:58.843

我不想发布新模块，也不想`npm install`覆盖我的更改。我找到了解决这两个问题的方法，但接受@Sdedelbrock 的建议可能会更好。但如果你想这样做，方法如下：

1.  编辑您的`package.json`文件以删除您要编辑的依赖项。
2.  进入您的项目`/node_modules`并将文件夹移动到可以提交的存储库中的其他位置。所以现在`/node_modules/dependency`在`/dependency`
3.  `cd`进入依赖目录并输入`npm link`
4.  `cd`*进入项目目录的*根目录并*输入*`npm link dependency` *`/node_modules``/dependency`*

如果一切正常，您现在应该有一个在`/node_modules/dependency`. 现在您可以运行您的项目以查看它是否有效。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-09-21T19:14:46.547

Fork Github repo 并进行必要的更改，然后您可以安装该软件包，例如

```
npm install git+https://github.com/visionmedia/express.git 
```

# mysql - 两个单独的 JOIN 中的 MySQL COUNT 行给出了错误的结果

> ID：13300143
> 
> 赞同：3
> 
> 时间：2012-11-09T00:09:45.200
> 
> 标签：mysql, sql

我正在尝试将两个表连接到我的查询中，并计算每个连接的匹配行数。不过，它似乎返回了错误的结果。结果似乎翻了一番。这是查询

```
SELECT *, COUNT(car_id) AS numCars, COUNT(van_id) AS numVans 
            FROM company_branch
            LEFT JOIN car ON car_branchid = company_branch_id
            LEFT JOIN van ON van_branchid = company_branch_id
            WHERE company_branch_userid = 1

            GROUP BY company_branch_id, 
            ORDER BY company_branch_active DESC, company_branch_name ASC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T00:12:04.610

我假设这`car_id`是表上的主键，`car`并且`van_id`是表上的主键`van`。在这种情况下，使用`DISTINCT`分别获取每个组中的计数。尝试这个：

```
SELECT *, COUNT(DISTINCT car_id) AS numCars, COUNT(DISTINCT van_id) AS numVans 
        FROM company_branch
        LEFT JOIN car ON car_branchid = company_branch_id
        LEFT JOIN van ON van_branchid = company_branch_id
        WHERE company_branch_userid = 1

        GROUP BY company_branch_id, 
        ORDER BY company_branch_active DESC, company_branch_name ASC 
```

# cuda - 多 GPU cuda 编程：从多个设备启动一个内核

> ID：13300144
> 
> 赞同：0
> 
> 时间：2012-11-09T00:09:56.840
> 
> 标签：cuda

我正在学习如何在多个 GPU 上使用 cuda 进行编码。我的设备的计算能力是 4.0，所以我知道我可以使用一个主机线程为多个 GPU 编写 cuda。首先，我参考了 SDK 示例之一“simpleMultiGPU.cpp”并使用一个和两个 GPU 运行它。我发现两种情况下的性能非常相似，即在两个 GPU 中运行代码与在一个 GPU 中运行代码一样慢/快。我知道它不是一个优化的代码，但这确实是我面前的一个例子，这是行不通的。我认为这两个设备中的代码是串行运行的。

有人在运行此 SDK 示例时遇到过同样的问题吗？

我基于这个 SDK 示例编写了一个简单的向量添加代码，它也以类似的方式执行（如预期的那样）。我正在使用异步 cuda 调用，也使用固定主机内存。我试图了解这种行为背后的原因。

任何见解都将受到高度赞赏。

这是主要代码的副本：

```
typedef struct {
float* vec;
int N;
} vector;

extern "C" {

//Define kernel for vector addition
__global__ void vecadd_kernel(float *avec, int N, float* bvec, float *cvec){
int tId=blockIdx.x*blockDim.x+threadIdx.x;

if(tId < N)
    cvec[tId]=avec[tId]+bvec[tId];

}

void launch_addvec_kernel(float *avec, int N, float* bvec, float *cvec, int THREAD_N, int BLOCK_N, cudaStream_t &s){

vecadd_kernel<<< BLOCK_N, THREAD_N, 0, s >>> (avec,N,bvec,cvec);
        getLastCudaError("reduceKernel() execution failed.\n");

}

}

int main(){

clock_t lapse;
float cpu_time;
lapse=clock();
vector avec, bvec, cvec, cvec_gpu;

int N=256*256*256;
int threads=256;

avec.N=N; 
bvec.N=avec.N; 
cvec.N=avec.N; 

avec.vec=(float*)malloc(sizeof(float)*avec.N);
bvec.vec=(float*)malloc(sizeof(float)*bvec.N);
cvec.vec=(float*)malloc(sizeof(float)*cvec.N);
cvec_gpu.vec=(float*)malloc(sizeof(float)*avec.N);

for(int i=0;i<avec.N;++i){
    avec.vec[i]=i;
    bvec.vec[i]=i;
}

//Normal CPU addition
#pragma unroll
for(int i=0;i<avec.N;++i){
    cvec.vec[i]=avec.vec[i]+bvec.vec[i];
}

cpu_time=clock()-lapse;

printf("CPU execution time = %f seconds \n",cpu_time/CLOCKS_PER_SEC);

//-------------------- Multi-GPU code -------------------------------
//-------------------- Multi-GPU code -------------------------------
//-------------------- Multi-GPU code -------------------------------

//Get number of CUDA enabled devices
lapse=clock();
int deviceCount;
cudaGetDeviceCount(&deviceCount);
//deviceCount=1;

vector apartvecs[deviceCount], bpartvecs[deviceCount], cpartvecs[deviceCount];
vector apartvecs_gpu[deviceCount], bpartvecs_gpu[deviceCount],  cpartvecs_gpu[deviceCount];

int i,j;

    //Subdividing input data across GPUs
    //Get data sizes for each GPU
for (i=0; i<deviceCount; ++i)
    apartvecs[i].N = N/deviceCount;

    //Take into account "odd" data sizes
for (i=0; i<N%deviceCount; ++i)
    ++apartvecs[i].N; 

int offset[deviceCount];

offset[0]=0;
offset[1]=apartvecs[0].N;

cudaStream_t stream[deviceCount];

    //Create streams for issuing GPU command asynchronously and allocate memory (GPU and System page-locked)
for (i=0; i<deviceCount; ++i){
        checkCudaErrors( cudaSetDevice(i) );
        checkCudaErrors( cudaStreamCreate(&stream[i]) );

    cpartvecs[i].vec=(float*)malloc(sizeof(float)*apartvecs[i].N);

    memset(cpartvecs[i].vec,'\0',sizeof(float)*apartvecs[i].N);

    //Allocate device memory
        checkCudaErrors( cudaMalloc((void**)&apartvecs_gpu[i].vec, apartvecs[i].N * sizeof(float)) );
        checkCudaErrors( cudaMalloc((void**)&bpartvecs_gpu[i].vec, apartvecs[i].N * sizeof(float)) );
        checkCudaErrors( cudaMalloc((void**)&cpartvecs_gpu[i].vec, apartvecs[i].N * sizeof(float)) );

    //Allocate pinned memory on host
        checkCudaErrors( cudaMallocHost((void**)&apartvecs[i].vec, apartvecs[i].N * sizeof(float)));
        checkCudaErrors( cudaMallocHost((void**)&bpartvecs[i].vec, apartvecs[i].N * sizeof(float)));

    for (j=0;j<apartvecs[i].N;++j){
        int j1=j+offset[i]; 
        apartvecs[i].vec[j]=avec.vec[j1];
        bpartvecs[i].vec[j]=bvec.vec[j1];
        //printf("%d \t %d \t %d \t %d \t %f\n",i,j,offset[i],j1,apartvecs[i].vec[j]);
    }
}

    //Copy data to GPU, launch the kernel and copy data back. All asynchronously
for (i=0; i<deviceCount; ++i){

        //Set device
        checkCudaErrors( cudaSetDevice(i) );

        //Copy input data from CPU
        checkCudaErrors( cudaMemcpyAsync(apartvecs_gpu[i].vec, apartvecs[i].vec, apartvecs[i].N * sizeof(float), cudaMemcpyHostToDevice, stream[i]) );
        checkCudaErrors( cudaMemcpyAsync(bpartvecs_gpu[i].vec, bpartvecs[i].vec, apartvecs[i].N * sizeof(float), cudaMemcpyHostToDevice, stream[i]) );

    int numblocks = N/threads;

//  printf("before kernel %d \n",apartvecs[i].N);
    launch_addvec_kernel(apartvecs_gpu[i].vec,apartvecs[i].N,bpartvecs_gpu[i].vec,cpartvecs_gpu[i].vec,threads,numblocks,stream[i]);

        //Read back GPU results

        checkCudaErrors( cudaMemcpyAsync(cpartvecs[i].vec, cpartvecs_gpu[i].vec, apartvecs[i].N * sizeof(float), cudaMemcpyDeviceToHost, stream[i]) );

    //printf("here 5\n");

}

    //Process GPU results
    for(i = 0; i < deviceCount; i++){

        //Set device
        checkCudaErrors( cudaSetDevice(i) );

        //Wait for all operations to finish
        cudaStreamSynchronize(stream[i]); 
```

// cudaDeviceSynchronize();

```
 for(int j=0; j<apartvecs[i].N; ++j){
        int j1=j+offset[i]; 
        cvec_gpu.vec[j1]=cpartvecs[i].vec[j];
        //printf("%d \t %d \t %d \t %d \t %f\n",i,j,offset[i],j1,cvec_gpu.vec[j1]);
    }

        //Shut down this GPU
        checkCudaErrors( cudaFreeHost(apartvecs[i].vec) );
        checkCudaErrors( cudaFreeHost(bpartvecs[i].vec) );
        checkCudaErrors( cudaFree(apartvecs_gpu[i].vec) );
        checkCudaErrors( cudaFree(bpartvecs_gpu[i].vec) );
        checkCudaErrors( cudaFree(cpartvecs_gpu[i].vec) );
        checkCudaErrors( cudaStreamDestroy(stream[i]) );

}

free(avec.vec);
free(bvec.vec);
free(cvec.vec);
free(cvec_gpu.vec);
cpu_time=clock()-lapse;

printf("GPU execution time = %f seconds \n",cpu_time/CLOCKS_PER_SEC); 
```

}

# mysql - 处理 Django 中并发 REST API 调用的数据库创建/更新操作

> ID：13300147
> 
> 赞同：2
> 
> 时间：2012-11-09T00:10:26.117
> 
> 标签：mysql, django, multithreading, transactions, locking

尽管问题非常笼统，但这更像是一个后续线程。我有一个 Django Web 应用程序，带有通过 Apache Web 服务器访问的 REST API（用 Tastepie 实现）。

我正在添加 API 调用日志记录功能，以便每次调用 Web 应用程序时，我都会在 MySQL 数据库的特定应用程序日志表中创建一个条目。

此应用程序的用户群是有限的。我不希望在此时或不久的将来有大量并发 API 调用。

我有以下选择：

`1\. multithread locking`

```
2\. multiprocess locking mechanisms
3\. ORM transaction or data base locking 
```

我不确定是否应该使用任何锁定功能来包装 MySQL 数据库条目创建/更新操作。

对于 Django Web 应用程序中的大量并发 POST API 调用，这些情况如何处理？

谢谢，

# ios - 如何测试 willSendRequestForAuthenticationChallenge:?

> ID：13300149
> 
> 赞同：0
> 
> 时间：2012-11-09T00:10:38.323
> 
> 标签：ios

我已经实现了 willSendRequestForAuthenticationChallenge: 它基于协议、主机和端口执行检查。

但是我该如何测试这个。无法让 Charles 进行反映在 iPhone 上的重定向。是否有任何简单的方法或工具来模拟即中间人等类型的场景并测试我的代码没有正确验证>

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T13:13:50.817

您可以使用类似： [http](http://test.webdav.org/auth-basic) ://test.webdav.org/auth-basic/或[http://browserspy.dk/password.php](http://browserspy.dk/password.php)来测试您的

如果您没有正确进行身份验证，那么您将无法访问您请求的页面。

# android - 如何识别imageview drawable？

> ID：13300150
> 
> 赞同：0
> 
> 时间：2012-11-09T00:10:39.993
> 
> 标签：android

我的`ImageView`应用程序中有一个可以由用户更改的可绘制对象，并`TextView`在其上显示为黑色。如果用户将此图像更改为具有黑色背景的图像，他将无法看到文本。

如何识别图像资源是否`R.drawable.imageA`可以将文本设置为不同的颜色？

我想过为 设置一个标签`ImageView`，但是当我只关心两个选项时，我必须为每个选项设置它。

我试过了：

```
if (imageview.getDrawable.equals(R.drawable.imageA)) {
    textView.setText(Color.WHITE);
    } 
```

也尝试过`getResource`，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:26:38.737

1.  Are you going to provide the user with a Dialog box / selection mechanism where the user gets to pick the image ?

2.  If the answer to the above is Yes, then this is the place where you should be able to capture this decision within your application, and then modify the color of the TextView .

3.  If the answer to 1 is no, then how does the user change the Image within your application ?

In your case, you may also be able to use reflection to achieve your goal. For example, take a look at this thread -> [Android, getting resource ID from string?](https://stackoverflow.com/questions/4427608/android-getting-resource-id-from-string)

**Added later:**

For a truly generalized solution, you may want to inspect the ImageView itself, to determine the optimal color to display. This has been demonstrated in this thread: [Automatically change text color to assure readability](https://stackoverflow.com/questions/9600295/automatically-change-text-color-to-assure-readability)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:27:07.770

Aside from WebnetMobile.com's answer, you could just have a variable related to which image is currently displayed.

IE. When it starts up:

```
boolean isImageA = true; 
```

And then change that to false when the event to change the background is triggered. All you have to do then is check whether it's true or false.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:14:33.633

你不能。您需要自己将其存储在一边并用于比较，或者扩展 ImageView 并将该功能嵌入其中（即通过添加 getDrawableId()）

# symfony - SonataAdmin Bundle 的 Not Null 字段

> ID：13300153
> 
> 赞同：2
> 
> 时间：2012-11-09T00:11:12.750
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

嗨，我对 SonataAdminBundle 有疑问。
我在数据库中创建了“工作”表，并在我的网站后端使用。

当我插入数据时，我的表 Job 中出现“非空”字段错误。

例如，我有“nb_comment”，即每个作业的评论数，因此当我在后端插入有关作业的所有信息时，我不使用 NOT NULL 字段“nb_comment”，并且出现以下错误：

```
PDOException: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'nb_comment' cannot be null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:23:55.400

我有同样的问题，我认为它对我有用。您必须使用 初始化`nb_comment`模型中的变量`null`，如下所示：

```
/**
 * @var integer $nb_comment
 */
private $nb_comment = null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:50:05.020

添加@ORM 注释**nullable=true**

```
use Doctrine\ORM\Mapping as ORM;

...

/**
 * @var integer $nb_comment
 * @ORM\Column(name="nb_comment", type="integer", nullable=true)
 */
private $nb_comment; 
```

或使用@Assert 声明添加约束验证器并在构造中初始化

```
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @var integer $nb_comment
 * @ORM\Column(name="nb_comment", type="integer")
 * @Assert\NotNull()
 */
private $nb_comment;

public function __construct()
{
    $this->nb_comment = 0;
} 
```

# asp.net - 修改 asp.net 成员资格以支持 open id

> ID：13300155
> 
> 赞同：0
> 
> 时间：2012-11-09T00:11:17.300
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-membership, openid, asp.net-4.5

我目前正在使用 .net 中包含的开箱即用的会员功能设置我的 mvc 4 Web 应用程序。

我想扩展此功能以支持开放 id 提供者，例如 facebook、twitter、my open id、dotnetopenid 等。

一旦用户使用此类登录，他们就可以更新他们的个人资料、姓名等并保存到数据库中，就像我创建了一个带密码的帐户一样。

问题是我不确定需要进行哪些修改才能支持数据库中的开放 ID。需要存储哪些信息来支持open id？是否有支持密码登录和开放 ID 登录的数据结构的任何示例？

# python - 非整数类标签 Scikit-Learn

> ID：13300160
> 
> 赞同：22
> 
> 时间：2012-11-09T00:11:41.917
> 
> 标签：python, svm, scikit-learn

scikit-learn 的快速 SVM 问题。当你训练一个 SVM 时，它就像

```
from sklearn import svm
s = svm.SVC()
s.fit(training_data, labels) 
```

有没有办法`labels`成为非数字类型的列表？例如，如果我想将向量分类为“猫”或“狗”，而不必使用某种将“猫”和“狗”编码为 1 和 2 的外部查找表。当我尝试只传递一个字符串列表时，我得到...

`ValueError: invalid literal for float(): cat`

所以，它看起来不像只是把弦塞进去就行了`labels`。有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-09T07:22:50.960

直接将字符串作为类传递是我的待办事项，但 SVM 尚不支持它。目前，我们有可以为您记账的[LabelEncoder 。](http://scikit-learn.org/dev/modules/generated/sklearn.preprocessing.LabelEncoder.html#sklearn.preprocessing.LabelEncoder)

[编辑]现在应该可以开箱即用[/编辑]

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-07-05T18:18:21.073

最新版本的 sklearn 能够使用字符串作为标签。例如：

```
from sklearn.svm import SVC
clf = SVC()
x = [[1,2,3], [4,5,6]]
y = ['dog', 'cat']
clf.fit(x,y)

yhat = clf.predict([[1,2,5]])
print yhat[0] 
```

# javascript - 从 HTML 模板制作 Wordpress 主题时 JS 无法正常工作

> ID：13300163
> 
> 赞同：0
> 
> 时间：2012-11-09T00:12:10.963
> 
> 标签：javascript, html, wordpress

这是我的问题：我有一个带有 CSS、JS 和一些图像的 HTML 模板。我按照此处非常基本且简单的说明将其转换为 wordpress 主题：http: [//thethemefoundry.com/blog/html-wordpress/](http://thethemefoundry.com/blog/html-wordpress/)。为了显示图像，我必须将它们上传到 WP 库，然后更改 index.php 和其他文件中的链接，使它们不指向 /img/picture.jpg，而是指向 www.sitename.com/ wp-uploads/2012/11/picture.jpg。

当我这样做时，图片显示得很好。但是，然后我也尝试将 JS 文件上传到库中。没问题。然后，我将 header.php 文件中指向它们的链接替换为现在指向该站点的链接。就像上面一样。但是，JS 根本没有响应。

你能给我一些关于我可能做错了什么的提示吗？我已经浏览了所有文件，看看我是否没有错过链接，但一切似乎都很好。

非常感谢您提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:17:12.197

您的 JavaScript 和 CSS 文件不应进入媒体上传器，它们应包含在您的主题中。`wp_enqueue_script`从那里，您可以使用- [http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script) - 和`wp_enqueue_style`- [http://codex.wordpress.org/Function_Reference/wp_enqueue_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)将它们排入队列以包含在您的标头中。

确定页面的正确方法是使用`get_template_directory_uri()`函数。

例如，如果您想注册`/wp-content/themes/YOUR_THEME/js/script.js`并且它依赖于`jQuery`您将在您的主题中使用它`functions.php`：

```
wp_enqueue_script('script_name', get_template_directory_uri()."/js/script.js" ,'jquery',false,true); 
```

# ios - 是否可以在 Adob e Air for iOS 中使用 Cocoa UI 元素？

> ID：13300165
> 
> 赞同：0
> 
> 时间：2012-11-09T00:12:34.623
> 
> 标签：ios, actionscript-3, flash, air

我认为这个问题很清楚。我想在我的 Air for iOS 应用程序的某些部分使用本机 UI 元素。

那可能吗？

是否有一些模仿 iOS 按钮等的 UI 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:19:15.587

这是迄今为止最好的镜头。

[http://code.google.com/p/flexpad/](http://code.google.com/p/flexpad/)

如果我找到更好的选择，我将更新这个答案。

# arrays - 填充和访问哈希数组

> ID：13300168
> 
> 赞同：0
> 
> 时间：2012-11-09T00:12:53.607
> 
> 标签：arrays, perl

我有以下 perl 代码：

```
@searchInfo = ();

sub main()
{
    processCmdLine();

    foreach my $info ( @searchInfo )
    {
        print "Search field: " . $info{field} . "\n";
        print "Search value: " . $info{value} . "\n";
    }
}

sub processCmdLine()
{
    while(@ARGV > 1)
    {
        $rec = {};
        $rec{field} = shift(@ARGV);
        $rec{value} = shift(@ARGV);
        print "$info{field} = $info{value}\n";
        push @searchInfo, $rec;
    }
} 
```

当我使用类似的命令运行它时`script.pl f1 v1 f2 v2`，我得到以下输出

```
f1 = v1
f2 = v2
Search field:
Search value:
Search field:
Search value: 
```

我将代码基于[本教程](http://perldoc.perl.org/perldsc.html#Generation-of-an-ARRAY-OF-HASHES)。

*数组内的哈希值有空值的原因是什么？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:24:58.423

一直用`use strict; use warnings;`！！！它会告诉你你正在访问一个名为`%info`and的哈希`%rec`，但你没有这样的变量。

哈希值是标量。因此，它们不能包含哈希。这可以通过使用对哈希的引用来近似。您似乎通过使用来意识到这一点`$rec = {};`，但是您再也不会使用该变量了。

使固定：

```
my $rec = {};
$rec->{field} = shift(@ARGV);
$rec->{value} = shift(@ARGV);
push @searchInfo, $rec; 
```

更清洁的修复：

```
my %rec;
$rec{field} = shift(@ARGV);
$rec{value} = shift(@ARGV);
push @searchInfo, \%rec; 
```

不要忘记也修复 fetcher：

```
print "Search field: $info->{field}\n";
print "Search value: $info->{value}\n"; 
```

* * *

但是你为什么要用一个键创建一大堆哈希？！您是否打算这样做：

```
%search_info = @ARGV; 
```

那么提取器将是

```
for my $key (keys(%search_info)) {
    my $val = $search_info{$key};
    print "Search field: $key\n";
    print "Search value: $val\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:32:16.837

您不应该在子例程中使用 @ARGV。请改用@_ 并以@ARGV 作为参数调用子例程。这样，如果您稍后想要将不同的数组传递给子例程，那么您只需更改原始调用，而不是查找硬编码定义的所有位置。这将为您和其他接触您的代码的人节省调试时间。这也将允许您在子例程中使用大量不同值的数组进行测试，而不必通过在命令行中键入 args 来进行测试。

```
 sub processCmdLine() {
        while(@ARGV > 1) {    
            $rec = {};
            $rec{field} = shift(@ARGV);
            $rec{value} = shift(@ARGV);j
            print "$info{field} = $info{value}\n";
            push @searchInfo, $rec;
        }
    } 
```

变成：

```
 sub processCmdLine() {
        while(@_ > 1) {
            my %rec;
            ($rec{field}, $rec{value}) = @_;
            print "$info{field} = $info{value}\n";
            push @searchInfo, $rec;
        }
    }
    processCmdLine(@ARGV); 
```

注意：这仅描述了我推荐的@ARGV 更改，并通过创建哈希而不是引用来修复无用的引用。它没有解决[ikegami](https://stackoverflow.com/users/589924/ikegami)提到的关于创建多个单键哈希的设计问题。

# iphone - 未使用自定义键盘调用 UItextView 委托

> ID：13300176
> 
> 赞同：4
> 
> 时间：2012-11-09T00:13:46.960
> 
> 标签：iphone, ios, uitextfield, uitextfielddelegate

我有几个 UITextView 子视图，都使用相同的自定义输入界面（基本上是带有自动填充选项和保存按钮的数字键盘）。

我的问题是，当从我的自定义键盘修改文本字段的文本时，不会调用委托方法 shouldChangeCharactersInRange: （在将文本从剪贴板粘贴到文本字段以及使用标准数字键盘时，它确实有效）。文本字段的文本会更改，但不会调用防止无效条目的委托方法。其他风格 DidBeginEditing: 的委托方法总是被调用。

尽管在此[SO LINK](https://stackoverflow.com/questions/8917172/uitextview-delegate-never-called)中说了什么，但[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html#//apple_ref/doc/uid/TP40006897-CH3-SW)指出将调用 shouldChangeCharactersInRange：委托方法：“每当用户键入新字符或删除现有字符时，文本视图都会调用此方法。”

我错过了什么？

相关代码部分：

视图控制器.h：

```
@interface ManualPositionViewController : UIViewController <UITextFieldDelegate> {
    LocationEntryTextField *latitude;
}
@property (nonatomic, retain) IBOutlet LocationEntryTextField *latitude;
@property (nonatomic, retain) IBOutlet LocationKeyboard *locationKeyboard;
.. 
```

视图控制器.m：

```
@synthesize latitude;
@synthesize locationKeyboard;
self.latitude.inputView = locationKeyboard;
self.latitude.delegate = self;

- (void)textFieldDidBeginEditing:(LocationEntryTextField *)aTextField {

    NSLog(@"textFieldDidBeginEditing called!");
    self.locationKeyboard.currentTextfield = aTextField;
}

- (BOOL)textField:(LocationEntryTextField *)editedTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)replacementString {

    NSLog(@"shouldChangeCharactersInRange called!");
    NSCharacterSet *decimalSet = [NSCharacterSet decimalDigitCharacterSet];

    if ([[replacementString stringByTrimmingCharactersInSet:decimalSet] isEqualToString:@""]) { 
        NSLog(@"Result: YES");
        return YES;
    }
    else {
        NSLog(@"Result: NO");           
        return NO;
    }
} 
```

位置键盘.h：

```
#import <UIKit/UIKit.h>
#import "LocationEntryTextField.h"

@interface LocationKeyboard : UIView {
    LocationEntryTextField  *currentTextfield; // track first responder
}
@property (weak) LocationEntryTextField *currentTextfield;
- (IBAction) numberButtonPressed:(UIButton*)sender;
- (IBAction) backspaceButtonPressed:(UIButton*)sender;
@end

- (IBAction) numberButtonPressed:(UIButton*)sender {
    NSString *entryString = @"test";
    [self.currentTextfield replaceRange:self.currentTextfield.selectedTextRange withText:entryString];
} 
```

LocationEntryTextField.h：

```
@interface LocationEntryTextField : UITextField
.. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T00:23:57.600

这一行：

```
[self.currentTextfield replaceRange:self.currentTextfield.selectedTextRange withText:entryString]; 
```

不会导致调用`textField:shouldChangeCharactersInRange:replacementString:`. 这是你所期待的吗？

由于您正在显式更改文本字段的文本，因此不会进行“键入”。

让您的自定义键盘更新文本字段的正确方法是调用“insertText:”方法。此方法将正确处理任何选择、移动光标和调用委托方法。

编辑：您可能希望在[这里查看我的答案](https://stackoverflow.com/questions/13205160/how-do-i-retrieve-keystrokes-from-a-custom-keyboard-on-an-ios-app/13205494#13205494)以获得完整的自定义键盘设置（减去实际按钮）。

# mysql - 如何从一个表中选择另一个表中存在的记录

> ID：13300188
> 
> 赞同：1
> 
> 时间：2012-11-09T00:14:32.607
> 
> 标签：mysql

我有两张桌子。`tl`和`t2`。每个表都有以下列：`ID`, `name`。这`ID`是一个 PK 和自动增量。这两个表没有相互连接。`t2.name`是 的子集，`t1.name`但`www.`在`name`. 前任：

```
`t1`.`name`= ggg
`t2`.`name`= www.ggg 
```

我想做的是：选择所有`t1.name`未插入的记录`t2`。所以我写了以下查询：

```
select concat('www.',name) 
from db.t1
LEFT JOIN db.t2 
ON t2.name = t1.name
WHERE NOT EXISTS (select name from db.t2); 
```

但是，我得到 0 结果。我确信在 t1 中有可用的记录，但在 t2 中没有。如何选择 t1 中所有不在 t2 中的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:16:23.323

```
select concat('www.',name) 
from db.t1
LEFT JOIN db.t2 ON t2.name = concat('www.', t1.name)
WHERE db.t2.name IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:19:26.407

```
SELECT CONCAT('www.', tbl1.name)
FROM db.t1 AS tbl1
WHERE NOT EXISTS (
    SELECT 1
    FROM db.t2 AT tbl2
    WHERE CONCAT('www.', tbl1.`name`) = tbl2.`name`
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:26:23.233

这应该这样做：

```
select t.name FROM
(
 select concat('www.',t1.name) AS name
 from t1
) t
LEFT JOIN t2
ON t2.name = t.name
WHERE t2.name IS NULL 
```

# dotnetnuke - DotNetNuke 错误：不推荐使用 Document.load()

> ID：13300192
> 
> 赞同：0
> 
> 时间：2012-11-09T00:15:21.077
> 
> 标签：dotnetnuke

我收到一个错误：

> 不推荐使用 Document.load()。要升级您的代码，请使用 DOM XMLHttpRequest 对象。如需更多帮助[https://developer.mozilla.org/en/XMLHttpRequest](https://developer.mozilla.org/en/XMLHttpRequest)
> [https://www.boldgroup.com/](https://www.boldgroup.com/) 第 83 行

尝试在 Chrome 中加载我的网站时，我也在 Firefox 中收到此错误。这导致网站背景无法显示，菜单无法正确显示。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:34:11.520

看起来该脚本来自您的皮肤（极简灰色玻璃）。尝试使用不同的皮肤，或与皮肤开发人员核实是否有更新。

# javascript - JQuery/JavsScript 机制来调度方法

> ID：13300193
> 
> 赞同：2
> 
> 时间：2012-11-09T00:15:22.413
> 
> 标签：javascript, jquery

我希望能够在特定时间调用特定方法。例如。

*   10秒后
*   20秒后
*   35 秒后
*   50 秒后
*   60 秒后
*   65 秒后

所有时间都从同一个起点。我正在查看 JQuery Timer 模块，但我认为这不会给我。

在 JavaScript / Jquery 中执行此操作的好方法是什么？或 CDN 提供的任何插件。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T00:20:36.013

使用函数式编程：

```
var makeIntervals = function(timeList,callback){
 intervals = []
 for(i = 0; i< timeList.length ; i++ ){
  intervals.push(setTimeout(callback,timeList[i]))
 }
 return intervals
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T00:20:50.053

此代码将为您建议的所有时间启动计时器。

```
function funcToCall()
{
}

setTimeout(funcToCall, 10 * 1000 );
setTimeout(funcToCall, 20 * 1000 );
setTimeout(funcToCall, 35 * 1000 );
setTimeout(funcToCall, 50 * 1000 );
setTimeout(funcToCall, 60 * 1000 );
setTimeout(funcToCall, 65 * 1000 ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T00:19:16.013

您可以只使用[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout), 并在数组中定义所需的间隔：

```
var method = function() { 
        console.log('did something'); 
    },
    intervals = [10, 20, 35, 50, 60, 65],
    i;

for (i = intervals.length - 1; i >= 0; i--) {
    setTimeout(method, intervals[i] * 1000);
} 
```

演示：http: [//jsfiddle.net/kelervin/Lg8P3/](http://jsfiddle.net/kelervin/Lg8P3/)

# vb.net - 将 DataTable 分配给 ComboBox，然后进行更改

> ID：13300194
> 
> 赞同：3
> 
> 时间：2012-11-09T00:15:51.340
> 
> 标签：vb.net, combobox, datatable, datasource

VB2010 我手动创建了一个 DataTable，所以它不是来自数据库。我已将它分配给一个组合框，它显示我的数据列。如果我更改 DataTable 是否必须重新建立链接？

```
'assign first table
dt = GetFirstTable()
cbo.DataSource = dt
cbo.DisplayMember = "Time"
cbo.ValueMember = "Time"

'print out items in combobox

'assign second table
dt = GetSecondTable()
'cbo.DataSource = dt 'do i have to re-connect here?

'print out items in combobox 
```

似乎如果我不重新建立链接，我会得到相同的项目。我虽然因为 cbo 已经链接到 dt 变量，所以我不需要每次都重新链接它。这是这样工作的还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T01:00:29.470

当您分配`cbo.DataSource = dt`，然后重新创建`dt`时，`cbo.DataSource`将继续指向旧表。这是在这里工作的纯指针逻辑，相同的原则适用于所有 .NET 代码。这并不意味着您正在重新使用相同的变量。相反，您可以创建`dt2`并使用它，行为将是相同的。所以是的，如果您重新创建`DataTable`，则需要`DataSource`再次重新分配。但是，如果您更改原始`dt`，即添加行，则会出现这些行，因此您无需重新分配`DataSource`。这是一个代码示例，用于说明该方法：

```
Dim _dt As DataTable

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
  _dt = New DataTable
  With _dt.Columns
    .Add("key")
    .Add("value")
  End With
  With ComboBox1
    .DisplayMember = "value"
    .ValueMember = "key"
    .DataSource = _dt
  End With
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
  _dt.Rows.Add({"item_key", "item_value"})
End Sub 
```

# function - 如何在运行时将函数导入 QTP 测试？

> ID：13300197
> 
> 赞同：2
> 
> 时间：2012-11-09T00:16:12.037
> 
> 标签：function, vbscript, import, qtp

我为我的 QTP 10 测试构建了许多函数，其中许多函数依赖于其他相关函数。我想让我的函数导入他们需要的任何其他函数。目前，我必须遍历我的每个函数并手动关联它们的每个依赖项。

虽然我知道这`ExecuteFile "C:\Functions\SampleFunction.vbs"`会起作用，但缺点是 QTP 无法显示它刚刚导入的任何代码。这意味着调试代码是一场噩梦，因为 QTP 会在与实际运行的代码不对应的行上显示黄色调试指针。长话短说，这种方法一团糟。

是否有任何其他命令可以在运行时将其他 .vbs 文件导入 QTP，所以我可以让函数导入他们需要的其他函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:16:12.037

我发现了 Anish Pillai 的一篇名为“将函数库与 QTP 脚本关联的 4 种不同方法”的帖子，其中包含一些有用的信息。（请参阅此处的原始帖子：[http](http://www.automationrepository.com/2011/09/associate-function-library-to-qtp-script/) ://www.automationrepository.com/2011/09/associate-function-library-to-qtp-script/ ）

**方法 #1**是将函数与测试相关联的常用方法；那里没有什么新鲜事。

**方法 #2**使用 AOM（自动化对象模型）
我尝试了许多不同的变体，但它们似乎都是用于从 QTP 外部启动特定测试的脚本，而不是用于向正在运行的测试添加功能的脚本。这是他们的代码，以防它被证明有用：

```
'Open QTP
Set objQTP = CreateObject("QuickTest.Application")
objQTP.Launch
objQTP.Visible = True

'Open a test and associate a function library to the test
objQTP.Open "C:\Automation\SampleTest", False, False
Set objLib = objQTP.Test.Settings.Resources.Libraries

'If the library is not already associated with the test case, associate it..
If objLib.Find("C:\SampleFunctionLibrary.vbs") = -1 Then ' If library is not already added
  objLib.Add "C:\SampleFunctionLibrary.vbs", 1 ' Associate the library to the test case
End 
```

**方法 #3**使用 ExecuteFile 方法具有我在问题中提出的相同缺点。可能有用，但在 QTP 10 中调试很糟糕。

**方法 #4**使用 LoadFunctionLibrary 方法 这是最有前途的方法。它似乎完全符合我们的需要：在测试运行时加载 vbscript 函数库。唯一的收获？**它似乎只是 QTP 11+**。因为我没有 QTP 11，所以我不能保证这种方法，但它看起来是完美的方法。

```
LoadFunctionLibrary "C:\YourFunctionLibrary_1.vbs" 'Associate a single function library
LoadFunctionLibrary "C:\FuncLib_1.vbs", "C:\FuncLib_2.vbs" 'Associate more than 1 function libraries 
```

# visual-studio - 将设置从 6.3 导入到 resharper 7

> ID：13300201
> 
> 赞同：1
> 
> 时间：2012-11-09T00:16:40.103
> 
> 标签：visual-studio, resharper, resharper-6.1, resharper-7.0

多年来，我一直是 resharper 用户，也是使用该产品的团队成员。作为一个团队，我们创建了一个通用的 resharper xml 设置文件，我们将其导入 resharper，以便我们都使用相同的设置。

我最近更新到 resharper 7，但找不到可以导入 resharper 设置文件的位置。它可能真的很明显，但我需要一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:02:12.493

在 ReSharper 顶级菜单下，单击“管理选项...”。您将看到一个名为“导入/导出设置”的下拉菜单。

# c - 总线错误和分段错误取决于输入的值

> ID：13300202
> 
> 赞同：1
> 
> 时间：2012-11-09T00:16:50.167
> 
> 标签：c, memory-management, segmentation-fault, bus

我的代码有问题，希望您能提供帮助。当我输入一个奇数时，会出现分段错误，如果是偶数，则会出现总线错误。我正在尝试将 00 添加到数据数组中，以将其从长度 Nprime 变为我输入的新的、更大长度的 Ndprime。我在函数 *fpad 中执行此操作，其中我的 paddata 数组包含 Nprime 复数（即 2*Nprime 分量），并且需要达到 2*Ndprime 的大小。

```
double *fpad(double *paddata, unsigned int Nprime, unsigned int Ndprime)
{   
   if (Nprime!=Ndprime)
   {
       paddata=(double*)realloc(paddata,(sizeof(double)*((2*Ndprime)-1)));

       for(i>=((2*Nprime));i<(2*Ndprime);i++) paddata[i]=0;  

       if(paddata==NULL)              /* Checks memory is reallocated */
       {
           printf("\nError reallocating memory.\n");
           free(paddata);
           exit(EXIT_FAILURE);
       } 
    }
  return(paddata);  
} 
```

任何帮助将不胜感激，我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:22:57.427

您正在使用未声明的变量`i`（或者它可能是全局变量）。

```
for(i>=((2*Nprime));i<(2*Ndprime);i++) paddata[i]=0; 
```

您的第一个条件检查是否`i`小于或大于`2*Nprime`（但不设置`i`）。然后它使用这个未正确初始化的值来访问数组，`i`这可能是负数，这会导致问题。

您仅在上述被诊断为有问题的循环之后检查内存重新分配是否成功。如果内存分配失败，您已经在此函数中小心地删除了指针的原始副本。释放空指针没有意义——但由于分配失败时退出，所以问题不大。

将初始化循环放在内存检查之后，括号的数量稍微少一些：

```
for (int i = 2*Nprime; i < 2*Ndprime; i++)  // C99 (and C++)
    paddata[i] = 0.0; 
```

如果不能使用 C99 表示法，`int i;`请在函数中声明。

永远不要创建名为 的全局变量`i`。

请注意编译器的警告。如果它没有警告您“无效声明”，则说明您没有打开足够的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:38:10.893

我推荐函数[memset](http://www.cplusplus.com/reference/clibrary/cstring/memset/)函数来初始化你的动态数组。我认为'for'语句中的索引'i'应该在 0 到 2*Ndprime-2 之间。

# powershell - Out-File 到网络共享，写为 hostname.txt

> ID：13300206
> 
> 赞同：2
> 
> 时间：2012-11-09T00:17:02.007
> 
> 标签：powershell

我需要`out-file`将脚本的结果保存到网络共享中`\\prod-automation\exampledir`，并且我想递归删除 30 天以上的 IIS 日志，而不是文件夹。

这是我所拥有的：

```
$WhatIfPreference = $true
$file = ("$($env:computername)$($Filename).txt")
$Directory = "C:\inetpub\logs\LogFiles*"
Get-ChildItem -path $Directory -recurse | Sort-Object Name, LastWriteTime | Format-Table Name, Fullname, LastWriteTime | out-file $file -filepath "\\\PROD-AUTOMATION\PowerShellLogs\IIS_Cleanup" -noclobber
$logpath = "C:\inetpub\logs\LogFiles\"
Get-ChildItem $logpath -recurse *.log -force | where {$_.lastwritetime -lt (get- date).adddays(-0)} | Remove-Item -force 
```

当前的问题是我得到以下信息：

```
Out-File : Cannot validate argument on parameter 'Encoding'. The argument "PROD-CONTOSCO.txt" does not belong to the set   "unicode,utf7,utf8,utf32,ascii,bigendianunicode,default,oem" specified by the ValidateSet attribute. Supply an argument that is in the set and then try the command again. 
```

需要一些帮助才能完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:46:47.610

尝试：

```
$file = "$env:computername$Filename.txt"
....
out-file -filepath "\\PROD-AUTOMATION\PowerShellLogs\IIS_Cleanup\$filepath" -noclobber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:29:42.660

尝试更改为这一行：

```
out-file -filepath $("\\PROD-AUTOMATION\PowerShellLogs\IIS_Cleanup\" + $filepath) -noclobber 
```

# actionscript-3 - Flex HGroup 中的拖动区域小于组本身

> ID：13300213
> 
> 赞同：0
> 
> 时间：2012-11-09T00:17:53.410
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flex4

我有一个 HGroup，我想将元素拖到上面。为了设置 HGroup 的样式，它实际上是一个包含 Rect 和 HGroup 的 Group。

此代码中的拖动区域仅与当前组中的元素一样大（这就是我在其中放置一个按钮来测试它的原因）。如您所见，我手动设置了 Group 和 HGroup 的宽度。一切都报告自己是 300 宽，应该是这样，但拖动区域仍然只有 HGroup 中元素的数量。这让我认为 HGroup 实际上并不是它所报告的（它报告 300`.width`在设置后访问该属性）。Rect 的宽度正好是 300，所以我可以看到放置区应该是什么。

我觉得我必须做一些非常明显的错误，但我看不到它。任何想法将不胜感激！

编辑：我想知道是否存在某种掩蔽问题。在矩形上添加一个拖动输入事件（我知道这是正确的大小，正如我所看到的）也不会导致输入事件触发。我怎么会发现这个？

```
package components
{
    import mx.core.IUIComponent;
    import mx.events.DragEvent;
    import mx.graphics.SolidColor;
    import mx.managers.DragManager;

    import spark.components.Group;
    import spark.components.HGroup;
    import spark.components.VGroup;
    import spark.primitives.Rect;

    public class TestVerticalConstraintExpression extends Group
    {
        private var expressions:VGroup;
        private var topExpression:Group;
        private var locked:Boolean = false;

        public function TestVerticalConstraintExpression()
        {
            super();

            this.width = 300;

            expressions = new VGroup();
            expressions.width = 300;

            this.addElement(getBackground());

            topExpression = new HGroup();

            expressions.addElement(topExpression);

            this.addElement(getBackground());
            this.addElement(expressions);

            topExpression.width = 300;
            topExpression.height = 50;
            topExpression.addElement(new ConstraintButton());

            // Setup listeners for when things are dropped onto the expression group
            topExpression.addEventListener(DragEvent.DRAG_ENTER,
                dragEnterHandler);
        }

        protected function getBackground():Rect
        {
            var bg:Rect = new Rect();
            bg.fill = new SolidColor(Math.round(Math.random()*0xFFFFFF));
            bg.left = 0;
            bg.right = 0;
            bg.top = 0;
            bg.bottom = 0;
            bg.percentWidth = 100;
            bg.percentHeight = 100;

            return bg;
        }

        protected function dragEnterHandler(event:DragEvent):void {
            DragManager.acceptDragDrop(event.currentTarget as IUIComponent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:56:58.130

A`Group`本质上只是一个布局容器。它没有任何图形元素，因此它是完全透明的，除了您`ConstraintButton`放置.`ConstraintButton``HGroup`

因此，您必须使用与您的 HGroup 大小相同的图形元素创建一个“命中区”。它可能将其`alpha`属性设置为，`0`以便您看不到它，但仍然可以与之交互。我能想到的两种最简单的方法：

*   将你的转换`HGroup`为`BorderContainer`一个`Horizontallayout`
*   将它们与背景`HGroup`放在`Group`一起`Rect`；像这样的东西：

.

```
<s:Group id="topExpression">
    <s:Rect left="0" right="0" top="0" bottom="0">
        <s:fill>
            <s:SolidColor alpha="0" />
        </s:fill>
    </s:Rect>

    <s:HGroup id="yourOldTopExpression" left="0" right="0" top="0" bottom="0" />
</s:Group> 
```

* * *

也就是说，为什么要在 ActionScript 中编写“视图”？它使代码更加冗长（即更多的工作）并且更难阅读。更不用说您会犯错误，例如`Rect`两次将背景添加到 main `Group`，如果您的代码是用 MXML 编写的，您会立即发现这些错误。
也许更重要的是：因为你把创建子组件的代码放在你的主类的构造函数中，你的代码实际上会导致**性能损失**。如果您想用纯 ActionScript 编写组件，您必须了解并理解 Flex 组件的生命周期。MXML 为您处理所有这些细节。
如果您担心混淆 MXML 和 ActionScript，您应该阅读 Spark 蒙皮架构。（例如，您可以查看使用 Spark 蒙皮的此答案：[自定义复合控件在添加回 VGROUP 后仅 0.5-1 秒内无法正确呈现](https://stackoverflow.com/questions/11059302/custom-composite-control-not-rendering-correctly-for-only-0-5-1-sec-after-being/11061988#11061988)）。

# c# - 温莎城堡注册多个实例

> ID：13300214
> 
> 赞同：2
> 
> 时间：2012-11-09T00:17:59.697
> 
> 标签：c#, castle-windsor

我正在尝试根据构造函数名称注册我的数据库的不同实例。我对温莎城堡中的“先胜”概念很熟悉，但显然我并不完全理解。

我希望下面的 uaxDB 参数名称向 ControllerInstaller 发出信号，以向我提供具有 UAXmongoURL、UAXmongoConnection 参数的实例。相反，我得到了第一个实例，带有 USERmongoURL 和 USERmongoconnection 参数。所以......首先获胜，但即使我使用命名实例？如何修复以使命名实例胜过任何默认排序？

注意我不只是想交换两个组件的顺序，因为我将有更多的实例，所以我需要扩展到超过 2....换句话说，我真的需要了解我是什么做错了。

```
// Trying to avoid this constructor declaration in favor of the uncommented constructor
// public DBViewerModel(IMongoConnection devDB, IMongoConnection uaxDB, IMongoConnection prodDB)
public DBViewerModel(IMongoConnection mongoConnection)
{
    //this.devMongoConnection = devDB;
    //this.uaxMongoConnection = uaxDB;
    //this.prodMongoConnection = prodDB;
    this.mongoConnection = mongoConnection;
} 
```

随着注册...

```
container.Register(
    Component
        .For<IMongoConnection>()
        .Named("dataDB")
        .ImplementedBy<MongoConnection>()
        .DependsOn(Property.ForKey("DBlocation").Eq(USERmongoURL),
                   Property.ForKey("DB").Eq(USERmongoCollection))
        .LifeStyle.PerWebRequest,

    Component
        .For<IMongoConnection>()
        .Named("uaxDB")
        .ImplementedBy<MongoConnection>()
        .DependsOn(Property.ForKey("DBlocation").Eq(UAXmongoURL),
                   Property.ForKey("DB").Eq(UAXmongoCollection))
        .LifeStyle.PerWebRequest); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:01:34.710

您可以明确指定应该通过服务覆盖注入哪些组件：

[https://github.com/castleproject/Windsor/blob/master/docs/registering-components-one-by-one.md#supplying-the-component-for-a-dependency-to-use-service-override](https://github.com/castleproject/Windsor/blob/master/docs/registering-components-one-by-one.md#supplying-the-component-for-a-dependency-to-use-service-override)

这是较旧的方法。如果您使用的是最新版本的 Windsor，最好使用`DependsOn(Dependency.OnComponent("uaxDB", "uaxDB"))`API。

# ios - NSDateFormatter 不起作用

> ID：13300217
> 
> 赞同：0
> 
> 时间：2012-11-09T00:18:12.987
> 
> 标签：ios, date, null, return, nsdateformatter

**你好 ！**

我有一个字符串 :`2012-11-07 15:22:06`我想`NSDateFormatter`对它做一个。我这样做：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"HH:mm, MMMM d, yyyy"];
NSString *date = [[NSString alloc] initWithFormat:@"%@", [df dateFromString:myString]]; 
```

但它不起作用，它返回“ `(null)`”。

希望有人能帮助我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:20:32.497

所以你设置的格式是 [df setDateFormat:@"HH:mm, MMMM d, yyyy"];

字符串 myString 是 @"2012-11-07 15:22:06"

=> 不匹配

---所以我收集到阅读您对其他答案的评论：

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
@autoreleasepool {
    NSString *myString =  @"2012-11-07 15:22:06"; //yyyy-MM-dd HH:mm:ss

    //convert to date
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"yyyy-MM-DD HH:mm:ss"];
    NSDate *myDate = [df dateFromString:myString];
    NSLog(@"%@", myDate); //2012-01-07 14:22:06 +0000

    //output it in natural language        
    NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
    [df setTimeStyle:NSDateFormatterNoStyle];
    [df setDateStyle:NSDateFormatterMediumStyle];
    [df setLocale:usLocale];
    NSLog(@"%@", [df stringFromDate:myDate]); //Jan 7, 2012
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:28:25.867

Your format isn't even close to the string's format. Use:

```
yyyy-MM-dd HH:mm:ss 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:59:50.470

使用此格式：yyyy-MM-dd HH:mm:ss 获取格式：2012-11-07 15:22:06。

获取格式：2012 年 11 月 7 日使用此函数：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
[dateFormatter setDateStyle:NSDateFormatterLongStyle];
NSString *string=[dateFormatter stringFromDate:date];
NSDate *newDate=[dateFormatter dateFromString:string]; 
```

# excel - 如何将 SQL 函数放在 Excel 中的“if”语句中

> ID：13300218
> 
> 赞同：0
> 
> 时间：2012-11-09T00:18:20.147
> 
> 标签：excel, if-statement

我在excel单元格中有一个sql语句：

```
="select BLAH from BLAH where BLAH" 
```

我希望将此 sql 语句放在基于空白单元格的 if 语句中。

我尝试执行以下操作：

```
=IF(AND(ISBLANK(G7),ISBLANK(H7)), "="select BLAH1 from BLAH1 where BLAH1"", ="select BLAH2 from BLAH2 where BLAH2"") 
```

由于嵌套引号，我在尝试执行此操作时遇到错误。是否可以将 sql 语句放在 VBA 之外的 if 语句中？或者更一般地说，是否可以将函数作为 if 语句的返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:22:19.700

您不需要`IF`语句中的等号。你已经在行的开头有了它，等号只是告诉 Excel 它是一个公式。

```
=IF(AND(ISBLANK(G7),ISBLANK(H7)), "select BLAH1 from BLAH1 where BLAH1", "select BLAH2 from BLAH2 where BLAH2") 
```

# actionscript-3 - 滚动容器对象时AS3中的坐标溢出？

> ID：13300221
> 
> 赞同：0
> 
> 时间：2012-11-09T00:18:51.117
> 
> 标签：actionscript-3, optimization, scroll, rendering, overflow

滚动图。目前，我通过绘制生成的每条数据来显示实时图表。要滚动，我只需将容器对象向左移动以补偿并擦除边界左侧的所有数据。

简单、快速、令人惊讶的内存效率……但是当我不断向右添加内容并向左滚动容器时，是否担心坐标溢出？（空）对象的 x 坐标是否有限制？恐怕如果我继续无限期地向左滚动容器并写入不断增加的 x 坐标，程序最终会行为不端。这会发生吗？如果是这样，最大坐标是多少？还是 AS3 会自动处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:55:46.423

我做了一个测试，我不断地把一个项目画到一个容器上，让它越来越大，然后把它移到左边。它在 105,000,000 像素处停止变大。之后，宽度报告为 0，`x`属性报告为 -107,374,182.4，并且不会超过该值。

但是，如果您有位图数据，则 FP10 的宽度或高度限制为 8,191 像素，并且像素总数不能超过 16,777,215 像素。

这是我用来测试的代码：

```
var b:Sprite = new Sprite();
addChild(b);

b.x = stage.stageWidth * .5;
var t:Timer = new Timer(100);
t.addEventListener(TimerEvent.TIMER,tick);
t.start();

var moveAmt:Number = 50;
function tick(e:Event):void {
    b.x -= moveAmount;
    b.graphics.beginFill(Math.random() * 0xFFFFFF);
    b.graphics.drawRect(b.width,0,moveAmount,stage.stageHeight);
    b.graphics.endFill();
    trace(b.width + "  :  " + b.x);
} 
```

# asymptotic-complexity - 恒定输入的渐近符号

> ID：13300228
> 
> 赞同：0
> 
> 时间：2012-11-09T00:19:48.803
> 
> 标签：asymptotic-complexity

如果我有一个算法，输入只是一个数字，输出是它的一组除数。所以我的输入将永远是一个数字，算法中的迭代次数将取决于数字有多大。会是什么这种算法的大符号？算法：

```
1: Set m := 2.
2: Set S := {} for S a multi-set.
3: while m  <= n^0.5
do
4: if m divides N then
5: Set S U m
6: else
7: Set m = m + 1.
 8: end if
 9: end while
 10: Return the set S of divisors found. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:32:00.247

您可以让用于渐近复杂度的大 O 表示法中的变量是输入数字*本身*，也可以是表达该数字所需*的位数。*这两种约定产生了*截然不同的*渐近分类，因此在报告结果时明确使用哪一种非常重要。

一般来说，当人们谈论数字太大以至于需要 bignums 的情况时，人们倾向于使用位数约定，而当输入受大小限制时，他们倾向于使用数字含义约定。机字。但这不是您可以依赖的东西，只能获得第一个猜测，您需要自己验证在您的特定情况下是否有意义。

选择往往与您用于算术运算的*成本模型密切相关。*当您计算位时，通常假设对 n 位值的算术需要 O(n) 时间，而当您处理输入数字的含义时，您通常假设对数字的算术在恒定时间内工作。

在你的情况下，你会得到类似 O(2^n) 或 O(sqrt(m)) 的东西，其中 n 是输入中的位数， m 是输入本身。（细节取决于你的多集基元如何执行）。

另见[伪多项式时间](http://en.wikipedia.org/wiki/Pseudo-polynomial_time)。

# python - 如何获取当前目录中所有文件夹的列表

> ID：13300230
> 
> 赞同：1
> 
> 时间：2012-11-09T00:19:49.667
> 
> 标签：python

如何获取当前目录中所有文件夹的列表。我知道我们可以获取文件和文件夹列表，`os.walk()`但我不想做额外的工作，因为在我的情况下这是不必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T00:20:49.457

```
[f for f in os.listdir('.') if os.path.isdir(f)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T00:20:53.760

```
print [fname for fname in os.listdir(".") if os.path.isdir(fname)] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T00:32:02.930

每个目录中的目录是 os.walk 返回的元组中的第二项，在每个交互中。所以，一个人可以简单地做：

```
dirs = os.walk(".").next()[1] 
```

无需遍历 os.walk 的剩余部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T00:32:30.107

```
from os import listdir
from os.path import isdir

path = '.'
dirs = filter(isdir, listdir(path)) 
```

# prolog - 后继算术和的最佳绿色削减是什么？

> ID：13300231
> 
> 赞同：6
> 
> 时间：2012-11-09T00:19:55.500
> 
> 标签：prolog, swi-prolog, successor-arithmetics, prolog-cut

为了了解 Prolog 中的绿色切割，我试图将它们添加到后继算术中 sum 的标准定义中（参见[What's the SLD tree for this query?](https://stackoverflow.com/questions/13162803)`plus`中的谓词）。这个想法是通过消除所有无用的回溯（即 no ）来尽可能“清理”输出，同时在所有可能的参数实例化组合下保持相同的行为 - 所有实例化，一/二/三个完全未实例化，以及所有变体包括部分实例化的参数。`... ; false`

这是我在尝试尽可能接近这个理想时能够做到的（我承认 false 对[如何将绿色剪辑`append/3`](https://stackoverflow.com/a/12710995/772868)作为源插入的回答）：

```
natural_number(0).
natural_number(s(X)) :- natural_number(X).

plus(X, Y, X) :- (Y == 0 -> ! ; Y = 0), (X == 0 -> ! ; true), natural_number(X).
plus(X, s(Y), s(Z)) :- plus(X, Y, Z). 
```

在 SWI 下，这似乎适用于所有查询，但形状为 的查询除外`?- plus(+X, -Y, +Z).`，至于[SWI 的谓词描述符号](http://www.swi-prolog.org/pldoc/doc_for?object=section(2,'4.1',swi('/doc/Manual/preddesc.html')))。例如，`?- plus(s(s(0)), Y, s(s(s(0)))).`产量`Y = s(0) ; false.`。我的问题是：

*   我们如何证明上述削减是（或不是）绿色？
*   我们能否比上述程序做得更好，并通过添加一些其他绿色削减来消除最后的回溯？
*   如果是，如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T15:53:44.077

首先是一个小问题：第一个和第二个参数交换的通用定义`plus/3`允许利用第一个参数索引。参见 Prolog 艺术的程序 3.3。这也应该在你[以前的帖子](https://stackoverflow.com/questions/13162803/whats-the-sld-tree-for-this-query)中改变。我将调用您的交换定义`plusp/3`和优化定义`pluspo/3`。因此，给定

```
plusp(X, 0, X) :- natural_number(X)。
plusp(X, s(Y), s(Z)) :- plusp(X, Y, Z)。

```

# 检测红色切口（问题一）

如何证明或反驳红/绿削减？首先，注意守卫中的“写”统一。也就是说，对于削减之前的任何此类统一。在您优化的程序中：

> `pluspo(X, Y, X) :- (Y == 0 -> ! ; Y = 0), (X == 0 -> ! ; true), ...`

我发现以下内容：

> `pluspo(**X**, Y, **X**) :- (...... -> **!** ; ... ), ...`

所以，让我们构造一个反例：要使这个剪切以红色方式剪切，“写统一”必须使其实际保护为`Y == 0`真。这意味着构造的目标必须以某种方式包含常量 0。只有两种可能性需要考虑。第一个或第三个参数。最后一个参数中的零意味着我们至多有一个解决方案，因此不可能删除进一步的解决方案。所以，0 必须在第一个参数中！（第二个参数从一开始就不能为 0，否则“写统一不会产生不利影响。）这是一个这样的反例：

> `?- pluspo(0, Y, Y).`

它提供了一个正确的解决方案`Y = 0`，但隐藏了所有其他的解决方案！所以在这里我们有一个如此邪恶的红色切割！并将其与提供无限多解决方案的未优化程序进行对比：

```
Y = 0 ;
Y = s(0) ;
Y = s(s(0)) ;
Y = s(s(s(0))) ;
...

```

因此，您的程序是不完整的，因此有关进一步优化它的任何问题都无关紧要。但是我们可以做得更好，让我重申一下我们想要优化的实际定义：

```
加（0，X，X）：-自然数（X）。
加（s（X），Y，s（Z））：-加（X，Y，Z）。

```

实际上，在所有 Prolog 系统中，都有第一个参数索引，这使得以下查询具有确定性：

```
?- 加(s(0),0,X)。
X = s(0)。

```

但是许多系统不支持（完整的）第三个参数索引。因此我们得到 SWI、YAP、SICStus：

```
?- 加（X，Y，0）。
X = Y, Y = 0 ;
假的。

```

你可能想写的是：

```
加号（X，Y，Z）：-
   % 第一部分：绿色削减
   ( X == 0 -> ! % 第一个参数索引
   ; Z == 0 -> ！% 3rd-argument 索引，例如 Jekejeke、ECLiPSe
   ; 真的
   ),
   % 第二部分：原始统一
   X = 0,
   Y = Z，
   自然数（Z）。
pluso(s(X), Y, s(Z)) :- pluso(X, Y, Z)。

```

请注意与以下各项的区别`pluspo/3`：现在只有在削减之前的测试！此后所有的统一。

```
?- pluso(X, Y, 0)。
X = Y，Y = 0。

```

到目前为止的优化只依赖于调查这两个子句的头部。他们没有考虑递归规则。因此，它们可以被合并到 Prolog 编译器中，而无需任何全局分析。在 O'Keefe 的术语中，这些绿色切割可能被视为蓝色切割。引用[Prolog 的工艺](http://www.google.com/search?q=%22The%20Craft%20of%20Prolog%22)，3.12：

> **蓝色**的削减是为了提醒 Prolog 系统注意它*应该*注意到但不会注意到的确定性。蓝切不会改变程序的可见行为：它们所做的只是让它变得可行。
> 
> **Green** cut 用于剪除可能成功或无关紧要或注定失败的尝试证明，但您不会期望 Prolog 系统能够分辨出这一点。

然而，关键是这些削减确实需要一些警卫才能正常工作。

现在，您考虑了另一个查询：

```
?- pluso(X, s(s(0)), s(s(s(0))))。
X = s(0) ;
假的。

```

或者说一个更简单的情况：

```
?- pluso(X, s(0), s(0))。
X = 0 ;
假的。

```

在这里，两个头都适用，因此系统无法确定确定性。但是，我们知道>无法解决目标`plus(X, s^n, s^m)`。所以通过考虑模型我们可以进一步避免选择点。休息后我马上回来：`n``m``plus/3`

* * *

# 最好使用 call_semidet/1！

它变得越来越复杂，优化可能很容易在程序中引入新的错误。优化程序也是维护的噩梦。出于实际编程目的，请使用[`call_semidet/1`](https://stackoverflow.com/a/12942551/772868). 它是安全的，如果你的假设被证明是错误的，它将产生一个干净的错误。

* * *

回到正题：这是进一步的优化。如果`Y`和`Z`相同，则第二个子句不能适用：

```
pluso2(X, Y, Z) :-
   % 第一部分：绿色削减
   ( X == 0 -> ! % 第一个参数索引
   ; Z == 0 -> ！% 3rd-argument 索引，例如 Jekejeke、ECLiPSe
   ; Y == Z，地面（Z） ->！
   ; 真的
   ),
   % 第二部分：原始统一
   X = 0,
   Y = Z，
   自然数（Z）。
pluso2(s(X), Y, s(Z)) :- pluso2(X, Y, Z)。

```

我（目前）认为这`pluso2/3`是剩余选择点的绿色/蓝色切割的最佳使用。你要求证明。好吧，我认为这远远超出了 SO 的答案......

目标`ground(Z)`是确保非终止属性所必需的。目标`plus(s(_), Z, Z)`不会终止，该属性由`ground(Z)`. 也许您认为删除无限故障分支也是一个好主意？根据我的经验，这是相当有问题的。特别是，如果这些分支被自动删除。虽然乍一看这似乎是一个好主意，但它使程序开发变得更加脆弱：原本良性的程序更改现在可能会禁用优化，从而“导致”不终止。但无论如何，我们开始吧：

# 超越简单的绿色切割

```
pluso3(X, Y, Z) :-
   % 第一部分：绿色削减
   ( X == 0 -> ! % 第一个参数索引
   ; Z == 0 -> ！% 3rd-argument 索引，例如 Jekejeke、ECLiPSe
   ; Y == Z -> ！
   ; var(Z), nonvar(Y), \+ unify_with_occurs_check(Z, Y) -> !, 失败
   ; var(Z), nonvar(X), \+ unify_with_occurs_check(Z, X) -> !, 失败
   ; 真的
   ),
   % 第二部分：原始统一
   X = 0,
   Y = Z，
   自然数（Z）。
pluso3(s(X), Y, s(Z)) :- pluso3(X, Y, Z)。

```

你能找到一个`pluso3/3`在有有限多个答案的情况下不会终止的情况吗？

# eclipse - 具有并发区域的 Eclipse GMF 状态机

> ID：13300232
> 
> 赞同：1
> 
> 时间：2012-11-09T00:20:08.840
> 
> 标签：eclipse, state-machine, eclipse-gmf

我将要创建一个模型编辑器，并且我正在考虑使用 GMF。编辑器将需要处理状态机（基于 UML 的语法，但不相同），这意味着并发区域。

我更喜欢像这样对并发区域进行建模：http: [//upload.wikimedia.org/wikipedia/en/thumb/a/aa/UML_state_machine_Fig4.png/660px-UML_state_machine_Fig4.png](http://upload.wikimedia.org/wikipedia/en/thumb/a/aa/UML_state_machine_Fig4.png/660px-UML_state_machine_Fig4.png)

有谁知道这在 GMF 中是否可行？我一直在努力寻找人们这样做但无法提出任何建议的例子。在我开始开发之前，我真的很想知道这是否可能（或需要一堆黑客）来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:17:52.867

当然有可能。这是一个称为*隔间*的 GMF 功能，它允许编辑器拥有嵌套元素。

例如，看一下：

1.  [GMF 中的分层模型](https://trac.rtsys.informatik.uni-kiel.de/trac/09ws-eclipse/wiki/Exercises/GMF/compartments)
2.  [GMF 教程](http://gmfsamples.tuxfamily.org/wiki/doku.php?id=gmf_tutorial7)

# mysql - Scala Slick：使用直接嵌入的查询不起作用

> ID：13300235
> 
> 赞同：0
> 
> 时间：2012-11-09T00:20:15.500
> 
> 标签：mysql, scala, orm, scalaquery, slick

我使用以下代码从 mysql 表中请求项目（Account 类只是表示数据库字段的案例类）

```
val res = Queryable[Account].map(_.name)

val db = Database.forURL("jdbc:mysql://localhost:3306/databasename", driver = "com.mysql.jdbc.Driver", user="username", password="password")
val backend = new SlickBackend(MySQLDriver, AnnotationMapper)

db withSession {
  val r=backend.toList(res)
  println(r.toString)
} 
```

线

```
val r=backend.toList(res) 
```

抛出以下异常：

```
[ToolBoxError: reflective typecheck has failed: ambiguous implicit values: both value StringCanBuildFrom in object Predef of type => scala.collection.generic.CanBuildFrom[String,Char,String] and method conforms in object Predef of type [A]=> <:<[A,A] match expected type T] 
```

可能是什么原因？我正在使用 Scala 2.10.0-RC1 和 Slick 0.11.2。

下面是 Account 类的样子：

```
@table("account")
case class Account (
    @column("ID") id: Long,
    ...
    @column("Name") name: String,
    ...
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:08:55.677

这意味着类型与 mysql 类型不匹配。即 id 应该是 Int 而不是 Long。

# php - 使用 $_POST 时 simple_xml_string 不起作用

> ID：13300237
> 
> 赞同：-1
> 
> 时间：2012-11-09T00:20:26.617
> 
> 标签：php, simplexml

我需要一些帮助来弄清楚为什么我不能将 $_POST['status'] 与 simplexml_load_string 一起使用。

我将一些数据发布到 php 页面，然后在 $_POST['status'] 中读取。然后需要将位于 $_POST['status'] 中的 xml 读入 php 的 simplexml_load_string，以便我可以将 xml 解析为一个对象。

如果我像这样对 simplexml_load_string() 进行硬编码：

```
$xml = simplexml_load_string('<?xml version="1.0"?>
                                <BackgroundReports userId="" password="" databaseset="">
                                  <BackgroundReportPackage>
                                    <ReferenceId>1|9</ReferenceId>
                                    <OrderId>107284</OrderId>
                                    <ScreeningStatus>
                                      <OrderStatus flag="FALSE">x:partial</OrderStatus>
                                    </ScreeningStatus>
                                    <Screenings>
                                      <Screening type="credit">
                                        <ScreeningResults type="result" mediaType="html" resultType="report">
                                          <InternetWebAddress><![CDATA[https://somewhere.com]]></InternetWebAddress> 
                                        </ScreeningResults>
                                      </Screening>
                                    </Screenings>
                                  </BackgroundReportPackage>
                                </BackgroundReports>'); 
```

并用 var_dump($xml) 转储它的输出是：

```
XML

object(SimpleXMLElement)#3 (2) {
  ["@attributes"]=>
  array(3) {
    ["userId"]=>
    string(0) ""
    ["password"]=>
    string(0) ""
    ["databaseset"]=>
    string(0) ""
  }
  ["BackgroundReportPackage"]=>
  object(SimpleXMLElement)#4 (4) {
    ["ReferenceId"]=>
    string(3) "1|9"
    ["OrderId"]=>
    string(6) "107284"
    ["ScreeningStatus"]=>
    object(SimpleXMLElement)#5 (1) {
      ["OrderStatus"]=>
      string(9) "x:partial"
    }
    ["Screenings"]=>
    object(SimpleXMLElement)#6 (1) {
      ["Screening"]=>
      object(SimpleXMLElement)#7 (2) {
        ["@attributes"]=>
        array(1) {
          ["type"]=>
          string(6) "credit"
        }
        ["ScreeningResults"]=>
        object(SimpleXMLElement)#8 (2) {
          ["@attributes"]=>
          array(3) {
            ["type"]=>
            string(6) "result"
            ["mediaType"]=>
            string(4) "html"
            ["resultType"]=>
            string(6) "report"
          }
          ["InternetWebAddress"]=>
          object(SimpleXMLElement)#9 (0) {
          }
        }
      }
    }
  }
} 
```

但是，如果我像这样使用 $_POST['status']`$xml = simplexml_load_string($_POST['status']);`而不是硬编码，那么 simplexml_load_string 将不起作用。我知道 $_POST['status'] 具有所有相同的 xml...我将其转储出来，它与我将其硬编码为 simple_xml_string 的参数时完全相同。

当我尝试使用 $_POST['status'] 时，输出现在变成了这样：

```
XML

bool(false) 
```

我需要弄清楚如何能够将其与 $_POST['status'] 一起使用，因为会员只会 POST 回我的 php 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:33:35.593

也许您在主机上启用了魔术引号。你可以做一个简单的测试表格和POST来看看。

```
<?php
if($_SERVER['REQUEST_METHOD']=='POST'){
    if(get_magic_quotes_gpc()) {
        echo 'Magic quotes enabled, so GET,POST,REQUEST,COOKIE Strings are escaped';
        $status = stripslashes($_POST['status']);
    }else{
        $status = $_POST['status'];
    }

    print_r(simplexml_load_string($status));
}else{
?>
<h1>Test XML POST</h1>
<form method="POST" action="">
  <p><textarea rows="9" name="status" cols="36"></textarea></p>
  <p><input type="submit" value="Submit"></p>
</form>
<?php } ?> 
```

也添加`error_reporting(E_ALL);`不会伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:06:29.303

感谢所有帮助我的人。这是我发现的。当我“发布”时，xml中有一个额外的行，如下所示

```
"

<?xml version="1.0"?>bla bla
" 
```

当我像这样删除空白行时，一切正常。

```
"<?xml version="1.0"?>bla bla
" 
```

# c# - 在 mvc 3 razor 视图中加载反射模型

> ID：13300238
> 
> 赞同：0
> 
> 时间：2012-11-09T00:20:28.223
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, reflection

我使用反射从数据库存储过程创建了一个类，我希望能够在不使用实体或不必为类创建强类型模型的情况下将数据表的内容显示到剃刀视图。现在我正在做以下事情：

```
public static List<object> GetPeople()
{
    DataTable dt = DataAccess.GetPersons();

    List<object> obj = MapDataTableToPerson(DataAccess.GetPersons());

    return obj;
}

private static List<object> MapDataTableToPerson(DataTable dt)
{
    List<object> returnClassObject = new List<object>();

    Type typeClass = CreateClassFromDT(dt);

    foreach (DataRow dr in dt.Rows)
    {
        object obj = Activator.CreateInstance(typeClass);

        foreach(string columnName in ColumnNames)
        {
            PropertyInfo property = typeClass.GetProperty(columnName);

            property.SetValue(obj, dr[columnName], null);
        }

        returnClassObject.Add(obj);
    }

    return returnClassObject;
} 
```

我从控制器调用 GetPeople 并传递给视图，但我不知道如何从 Razor 中创建的类中获取值，如果有人能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:37:52.577

将 DataTable 模型传递给视图并遍历列和行。我认为您不需要使用反射，只需从数据库中获取 DataTable 即可。

# c - 如果文件范围声明默认具有外部链接，为什么我们需要 C 中的“extern”关键字？

> ID：13300239
> 
> 赞同：16
> 
> 时间：2012-11-08T18:39:07.050
> 
> 标签：c

AFAIK，文件范围内的任何变量或函数声明都**默认**具有外部链接。`static`意思是“它有内部联系”，`extern`--“它可能在别处定义”，而不是“它有外部联系”。

如果是这样，为什么我们需要`extern`关键字？换句话说，`int foo;`和`extern int foo;`（文件范围）有什么区别？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-08T19:23:54.917

该`extern`关键字主要用于变量声明。前向声明函数时，关键字是可选的。

该关键字使编译器可以区分全局变量的*前向声明和变量的**定义*：

```
extern double xyz; // Declares xyz without defining it 
```

如果您自己保留此声明，然后`xyz`在您的代码中使用，您将在链接阶段触发“未定义符号”错误。

```
double xyz; // Declares and defines xyz 
```

如果将此声明保存在头文件中并从多个 C/C++ 文件中使用它，则会在链接阶段触发“多重定义”错误。

解决方案是`extern`在标头中使用，而*不是*在一个 C 或 C++ 文件中使用 extern。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T00:47:30.793

作为说明，编译以下程序：（使用 cc -c program.c 或等效程序）

```
extern char bogus[0x12345678] ; 
```

现在删除“extern”关键字，然后再次编译：

```
char bogus[0x12345678] ="1"; 
```

在这两个对象上运行 objdump（或等效的）。

你会发现*没有extern关键字*空间实际上是分配的。

*   使用`extern`关键字，整个“伪造”的东西只是一个参考。你是在对编译器说：“一定有一个`char bogus[xxx]`地方，把它修好！”
*   如果没有 extern 关键字，您会说：“我需要一个变量的空间`char bogus[xxx]`，给我那个空间！”

令人困惑的是，对象的实际内存分配被推迟到链接时：编译器只是向对象添加一条记录，通知链接器应该（或不应该）分配一个对象。在所有情况下，编译器*至少*会添加对象的名称（和大小），以便链接器/加载器可以修复它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-19T06:35:12.540

**C99标准**

我将通过引用和解释[C99 N1256 草案](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)来重复其他人所说的话。

首先，我确认您的断言，即外部链接是文件范围 6.2.2/5“标识符链接”的默认设置：

> 如果对象标识符的声明具有文件范围且没有存储类说明符，则其链接是外部的。

令人困惑的是，`extern`它不仅会改变链接，而且还会影响对象声明是否是*定义*。这很重要，因为 6.9/5“外部定义”说只能有一个外部定义：

> 外部定义是一个外部声明，它也是函数（内联定义除外）或对象的定义。如果用外部链接声明的标识符在表达式中使用（而不是作为结果为整数常量的 sizeof 运算符的操作数的一部分），则在整个程序的某处，该标识符应有一个外部定义；否则，不得超过一个。

其中“外部定义”由语法片段定义：

> ```
> translation-unit:
>   external-declaration 
> ```

所以它意味着一个“文件范围”的顶级声明。

然后 6.9.2/2“外部对象定义”说（对象表示“变量的数据”）：

> 具有文件范围的对象的标识符声明没有初始化程序，并且没有存储类说明符或具有存储类说明符 static，构成暂定定义。如果翻译单元包含一个或多个标识符的暂定定义，并且翻译单元不包含该标识符的外部定义，则行为与翻译单元包含该标识符的文件范围声明完全相同，复合类型为翻译单元的末尾，初始化器等于 0。

所以：

```
extern int i; 
```

不是一个定义，因为它*确实**有*一个存储类说明符：.*`extern`*

 *然而：

```
int i; 
```

没有存储类说明符，因此它是一个*暂定定义*。如果没有更多的外部声明，那么我们可以隐式`i`添加初始化器等于 0 ：`= 0`

```
int i = 0; 
```

因此，如果我们`int i;`在不同的文件中有多个，则链接器理论上应该会出现多个定义。

但是，GCC 4.8 不符合要求，并且作为扩展允许`int i;`跨不同文件的多个文件，如下所述：[https](https://stackoverflow.com/a/3692486/895245) ://stackoverflow.com/a/3692486/895245 。

这是在 ELF 中用一个通用符号实现的，这个扩展非常常见，以至于在 J.5.11/5 的标准中提到了通用扩展 > 多个外部定义：

> 一个对象的标识符可能有多个外部定义，无论是否显式使用关键字 extern；如果定义不一致，或者不止一个被初始化，则行为未定义（6.9.2）。

`extern`另一个有影响的地方是块范围声明，请参阅： [Can local and register variables are declared extern?](https://stackoverflow.com/questions/14335742/can-local-and-register-variables-be-declared-extern)

如果对象声明有初始化器，`extern`则无效：

```
extern int i = 0; 
```

等于

```
int i = 0; 
```

两者都是定义。

对于函数，`extern`似乎没有效果：[extern 关键字对 C 函数的影响，](https://stackoverflow.com/questions/856636/effects-of-the-extern-keyword-on-c-functions)因为没有类似的暂定定义概念。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T21:52:11.193

您只能定义一个变量一次。

如果多个文件使用相同的变量，则必须在每个文件中冗余声明该变量。如果你做一个简单的“int foo;” 你会得到一个重复的定义错误。使用“extern”来避免重复定义错误。Extern 就像对编译器说“嘿，这个变量存在但不要创建它。它是在其他地方定义的”。

C 中的构建过程并不“智能”。它不会搜索所有文件以查看变量是否存在。您必须明确指出该变量存在于当前文件中，但同时避免创建两次。

即使在同一个文件中，构建过程也不是很聪明。它从上到下，如果在使用点下方定义函数名称，它将无法识别，因此您必须在更高的位置声明它。*

# c++ - 关于 C++ 名称查找的说明

> ID：13300263
> 
> 赞同：5
> 
> 时间：2012-11-09T00:22:32.123
> 
> 标签：c++

我有一个关于我刚在工作中遇到的情况的问题。

设置：在 stringStuff.h

```
namespace n1
{
namespace n2
{
    typedef std::string myString;
}
}

namespace n1
{
namespace n2
{
    void LTrim(myString& io_string);
    void RTrim(myString& io_string);

    inline void Trim(myString& io_string)
    {
        LTrim(io_string);
        RTrim(io_string);
    }
}
} 
```

在 impl.cpp 中

```
#include "stringStuff.h" // This actually gets included via other include files
#include "globalInclude.h" // contains 'using namespace n1::n2;'. Yes, I know this isn't best practice

inline static myString Trim(const myString& in_string)
{
    // impl
}

static void impl(const myString& in_string, myString& out_string)
{
    size_t N = 10; // just some computed value.
    out_string = Trim(in_string.substr(1, N)); // This is the line with the error
} 
```

现在，我承认我不太了解 C++ 名称解析规则，但是当我看到这个时，似乎对 Trim 的调用*应该*是模棱两可的。

令人惊讶的是，它在使用 GCC 的 Linux 上编译得很好，调用了 impl.cpp 中定义的函数。当我使用其本机编译器在 HP-UX 上编译时，它似乎将调用解析为 stringStuff.h 中定义的调用，并抱怨将临时引用转换为非常量引用（这令人惊讶的是警告，而不是错误） ，以及尝试将 void 分配给 myString。

根据 C++ 标准应该发生什么，以及哪个编译器（如果有的话）是正确的？

顺便说一句，在我的情况下，我通过在对 trim 的调用前加上 :: 来“修复”它，尽管这并不理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:51:06.290

诀窍是一个采用 const 引用，另一个采用 non-const 引用，因此它们是两个不同的函数，而不是解析可能不明确的同一个函数。然后归结为调用中参数的类型。由于 substr 返回一个值，它只能绑定到 const 引用。所以它应该`::Trim`在没有警告的情况下调用。我会说 HP-UX 编译器是错误的。

# c# - VC++ 有依赖管理器吗？

> ID：13300269
> 
> 赞同：1
> 
> 时间：2012-11-09T00:23:06.090
> 
> 标签：c#, c++, dependency-management

我们的组织有很多需要集成的 C# 和 C++ 代码。对于 C#，NuGet 是一个很好的选择，因为它通过在项目文件中添加/更新引用来管理构建过程。Visual C++ 是否有类似的东西可以管理 C++ 项目之间的依赖关系？另外，有没有什么东西可以集成 C# 和 C++ 之间的依赖关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:04:52.247

www.cppdepend.com/，cppdepend可以在VC++中分析项目依赖，不是免费的。它有一个试用版，你可以看看

# linux - 合并/加入两个表快速linux命令行

> ID：13300271
> 
> 赞同：4
> 
> 时间：2012-11-09T00:23:08.067
> 
> 标签：linux, unix, join, merge, awk

假设我有两个相对较大的制表符分隔文件 file1.txt、file2.txt。

```
file1.txt
id\tcity\tcar\ttype\tmodel

file2.txt 
id\tname\trating 
```

让我们假设 file1.txt 有 2000 个唯一 ID，因此有 2000 个唯一行，而 file2.txt 只有 1000 个唯一行，因此有 1000 个唯一 ID。有没有办法合并这两个表？

案例1.file1.txt中通过id合并，当file2.txt中没有id时填写NA。

案例2。通过file2.txt中的id将它们合并，其中只有file2.txt中的id会与file1.txt和file2.txt中的字段一起打印出来。

注意：合并的新文件也应该是制表符分隔的文件，并带有头文件。笔记2。如果没有标题，我也很感激有关如何做到这一点的建议。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T01:12:20.643

```
join -j 1 <(sort file1.txt) <(sort file2.txt) 
```

您的“案例 2”是否仅使用标准的 unix 工具。当然，如果文件已排序，则可以放弃排序。

如果您包含标题，您**可能会**依赖数字 ID 将连接的标题排序到顶部：

```
join -j 1 <(sort file1.txt) <(sort file2.txt) | sort -n 
```

和

*   文件1.txt

    ```
    id  city    car type    model
    1   york    subaru  impreza king
    2   kampala toyota  corolla sissy
    3   luzern  chrysler    gravity falcon 
    ```

*   文件2.txt

    ```
    id  name    rating
    3   zanzini PG
    2   tara    X 
    ```

*   输出：

    ```
    id  city    car type    model   name    rating
    2   kampala toyota  corolla sissy   tara    X
    3   luzern  chrysler    gravity falcon  zanzini PG 
    ```

**PS**要保留 TAB 分隔符，请传递`-t`选项：

```
 join -t'    ' ... 
```

很难在 SO 上显示 ' ' 包含 TAB 字符。键入它`^V``TAB`（例如在 bash 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:52:07.830

这在案例 1 中对我有用：

`join -t $'\t' -1 1 -2 1 -a 1 -a 2 <(sort fileone.txt) <(sort filetwo.txt) | sort -n -t $'\t' > filethree.txt`

然后：

`awk '{if(NF+0<7) printf "%s\tNA\tNA\n", $0; else print $0}' filethree.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:40:44.830

尝试这样做：

```
perl -lane '
    END{print "$_$h{$_}" for sort keys %h}
    $h{$F[0]} .= "\t" .  join "\t", @F[1..$#F];
' file1.txt file2.txt 
```

此脚本加入 ids（第一个 col）。

# sql - 从 Rails 控制台执行时 SQL 查询不起作用

> ID：13300279
> 
> 赞同：0
> 
> 时间：2012-11-09T00:24:03.403
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

我试图在我的 Rails 控制台中运行以下行：

`ActiveRecord::Base.connection.execute "DELETE FROM recommendations WHERE place_id=4000000001267 AND recommender_id=2728498;UPDATE IGNORE recommendations SET place_id=4000000001267 WHERE place_id=4000000564630 AND recommender_id=2728498;"`

它只是删除旧记录并重写另一条记录以进行合并。

Rails 控制台返回以下内容：

`DELETE FROM recommendations WHERE place_id=4000000001267 AND recommender_id=2728498;UPDATE IGNORE recommendations SET place_id=4000000001267 WHERE place_id=4000000564630 AND recommender_id=2728498; ActiveRecord::StatementInvalid: Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UPDATE IGNORE recommendations SET place_id=4000000001267 WHERE place_id=40000005' at line 1: DELETE FROM recommendations WHERE place_id=4000000001267 AND recommender_id=2728498;UPDATE IGNORE recommendations SET place_id=4000000001267 WHERE place_id=4000000564630 AND recommender_id=2728498; from /Users/huynguyen/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in`查询'`

但是，当我在 Sequel Pro 中运行这个精确查询时，查询运行得非常好。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:50:33.360

它可能与 AR 的 mysql 适配器默认没有执行多个查询有关吗？

对此的快速解决方法是将查询分成两个不同的并一个接一个地执行它们。并将它们包装成一个事务，当然:)

# php - 通过 php 进行 Ftp - 连接重置

> ID：13300282
> 
> 赞同：1
> 
> 时间：2012-11-09T00:24:12.773
> 
> 标签：php, ftp

我有一些问题。我购买了虚拟服务器，但无法在 php.ini 文件中配置所有选项。php 脚本有时间执行限制。所以我将上传脚本转移到我有权访问 php.ini 的其他服务器。我进行了更改`set_time_limit, upload_max_filesize, post_max_size, max_input_time, max_execution_time`，然后创建了与我的虚拟服务器的 ftp 连接以进行文件传输。但是，当传递 2MB 时，连接会被重置。我可以更改服务器配置文件中的任何其他选项来修复此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:50:14.107

您可以在 .htaccess 文件中设置这些值，在共享主机上会产生不同的结果。

```
php_value upload_max_filesize 50M
php_value post_max_size 50M 
```

见，[http://www.sitepoint.com/how-to-override-php-configuration-settings/](http://www.sitepoint.com/how-to-override-php-configuration-settings/)

# php - 在 Codeigniter 3 中扩展会话库

> ID：13300283
> 
> 赞同：5
> 
> 时间：2012-11-09T00:24:22.067
> 
> 标签：php, codeigniter, codeigniter-3

我使用 CI 已经有一段时间了，最​​近升级到 CI 3。我注意到 Session 库现在已移动到一个文件夹中。我曾经在扩展默认 CI 库的 application/libraries 文件夹中有自己的 MY_Session.php 文件。

我还使用 autoload.php 文件来自动加载我的会话库。这不再有效，因为我无法加载请求的类：会话。

如果我删除 MY_Session.php 文件，则页面会加载，但我会丢失我的扩展功能。

有谁知道如何在 CI 3 中扩展会话库？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-16T05:23:57.517

由于 3.0 早就发布了，为了完整起见：如果你想扩展 Session 类，你需要将你的扩展类 MY_Session.php 添加到 application/libraries/Session 目录以模仿它的 system/libraries/Session/Session。 php对应。

在您拥有正确的目录结构后，您的 MY_Session.php 文件应该包含扩展系统库类的常用方法，正如@Starx 所指出的那样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T20:36:13.027

目前不可能做到这一点，但有一个[挂起的拉取请求](https://github.com/EllisLab/CodeIgniter/issues/1787)试图解决这个问题。

但是，您不应发布与尚未发布的软件相关的问题。任何处于*开发*阶段的东西都可能再次改变、过时等等，而你在这里的问题将自动变得与每个人都无关，包括你自己。您应该在存储库本身上发布/询问您的问题（当然还要搜索已经存在的问题）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T19:01:58.623

可以在 CodeIgniter 3**中**扩展 Session 类。诚然，这有点麻烦，但无论如何我只用它来修复 Session 类中长期存在的错误。这是 CI3 的示例**MY_Session.php**库：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

require_once SYSDIR . '/libraries/Driver.php';
require_once SYSDIR . '/libraries/Session/Session.php';

/*
    Change the following if you want to use a different driver.
*/
require_once SYSDIR . '/libraries/Session/drivers/Session_cookie.php';

class MY_Session extends CI_Session_cookie
{

    function __construct()
    {
        parent::__construct();
    }

    protected function _sess_update($force = false)
    {
        // Do NOT update an existing session on AJAX calls.
        if ($force || !$this->CI->input->is_ajax_request())
            return parent::_sess_update($force);
    }

}

/* End of file MY_Session.php */
/* Location: ./application/libraries/MY_Session.php */ 
```

欲了解更多信息，或者如果它发生变化，请跟上：http: [//degreesofzero.com/article/55](http://degreesofzero.com/article/55)

披露：这是我的个人博客。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-20T20:25:23.640

我设法在 Codeigniter 3.1.3 中扩展了 CI_Session。这是我所做的：

创建文件 application/libraries/Session/MY_Session.php

```
<?php                                                                                                                                                                                           
defined('BASEPATH') OR exit('No direct script access allowed');

class MY_Session extends CI_Session {

    public function __construct(array $params = array())
    {   
        if ( $this->ignore_sessions() )
            return;
        parent::__construct();
    }   

    function ignore_sessions()
    {   
        $uri = str_replace ("//", "/", $_SERVER['REQUEST_URI']);
        if ( strpos($uri, '/ignore_this_controller/') === 0 ) 
            return true;
        return false;
    }   
} 
```

您可能还想在 config/autoload.php 中添加“会话”：

$autoload['libraries'] = array('session',....)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T00:28:58.590

您可以像扩展其他核心组件一样执行此操作。

```
class MY_Session extends CI_Session {

    function __construct() 
    {
        parent::__construct();
        echo "In extended the session";
    }
} 
```

确保您也加载了会话库。像

```
$autoload['libraries'] = array('database','session'); 
```

还有，`Unable to load the requested class: Session`一般都是因为这两个原因触发的。

*   CI 不能很好的会话
*   您尚未自动加载库

另外，请确保您的电脑上有一个加密密钥`config.php`

```
$config['encryption_key'] = 'xxxxxxxxxxxxxxxxxxxxxxx'; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-25T21:56:39.277

我希望不会迟到：

当您加载（或自动加载）会话库时，您现在必须将其加载为驱动程序而不是库。这意味着调用

```
$this->load->driver('session') 
```

代替

`$this->load->library('session')`

和/或在

`$autoload['drivers']`

代替

`$autoload['libraries']`

# video - 是否可以使用“CCVideoPlayer”淡出视频

> ID：13300284
> 
> 赞同：0
> 
> 时间：2012-11-09T00:24:26.787
> 
> 标签：video, cocos2d-iphone, ccvideoplayer

我正在使用“CCVideoPlayer”在 cocos2d 中播放视频，我想知道是否有办法将视频淡出到最后？我所说的淡出视频的意思是，通常视频最后会突然停止，我需要能够慢慢淡出它，而不是视频突然结束。

# c++ - 在定义中引用变量是否合法？

> ID：13300285
> 
> 赞同：11
> 
> 时间：2012-11-09T00:24:39.447
> 
> 标签：c++, variables, initialization, standards, variable-assignment

```
int test[2] = { 45, test[0] };
int x = (x = 111);
cout << test[0] << " " << test[1] << " " << x << "\n"; // 45 45 111 
```

前两行中的分配是否合法？Visual Studio 2010 编译和运行它时没有任何错误或警告，但这似乎是一个可能未定义的奇怪情况，所以我想确认它是可以接受的。如果我做了一些公然自反（并且可能是未定义的）的事情，Visual Studio 确实会警告我，`int x = x;`所以我想知道它似乎允许的这些情况是如何处理的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T01:07:06.360

来自 C++ 标准（C++11，但在 C++98/03 中没有什么不同）：

> （第 3.3.2/1 节）名称*的声明点*紧接在其完整声明符（第 8 条）之后和其*初始化程序*（如果有）之前，[...] [ 示例：
> 
> ```
> int x = 12;
> { int x = x; } 
> ```
> 
> 这里第二个 x 用它自己的（不确定的）值初始化。—结束示例]

这也适用于用户定义的类型以及数组类型。请注意标准如何强调`x`在第二个示例中使用*不确定*值进行初始化。所以没有办法知道`x`初始化的值是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:57:24.560

我假设你在某个函数中，因为你正在调用函数等。

`test`两者的空间都`x`分配在**堆栈**上。理论上，这些家伙的空间在他们的值被填充之前应该存在。如果我们查看生成的程序集（x86 gcc），这是真的。

```
subl    $40, %esp         # Add 40 bytes of memory to the current stack
movl    $0, -20(%ebp)     # Clear test[0] to 0
movl    $0, -16(%ebp)     # Clear test[1] to 0
movl    $45, -20(%ebp)    # Place the value of 45 into test[0]
movl    -20(%ebp), %eax  # Copy that 45 into a register
movl    %eax, -16(%ebp)  # Move that register's value (45) into test[1]
movl    $111, -12(%ebp)  # Assign x to be 111, optimize out the unnecessary duplicate assignment
    ... #continues on to set up and call printf 
```

我们可以看到堆栈中添加了 40 个字节。请注意 test[0]、test[1] 和 x 的地址是如何`%ebp`以 4 字节间隔（分别为 -20、-16、-12）标记的连续地址。**它们在内存中的位置是存在的，并且在定义之前可以无错误地访问。**此处的编译器将它们都清除为 0，尽管我们可以看到这是不必要的。您可以删除这两行并且仍然可以正常运行。

**我们可以从中得出**的结论是，您的**int test[2]**和**int x**内部可以有任意数量的时髦循环引用，并且代码将编译——您的工作就是确保您的引用获取良好的数据（即以某种方式初始化数据) 而不是垃圾，你在这里所做的。这也适用于其他情况 - 编译为程序集并自己检查它是如何完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:32:23.773

这是合法的，因为变量的声明在你初始化它的时候就已经完成了。但是， 的值`test[1]`是未定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T00:32:35.180

您拥有的所有代码都是完全合法的。甚至在某些情况下，您甚至可能也*想*这样做。

# c# - C# WCF MySQL 跟踪并发用户

> ID：13300288
> 
> 赞同：4
> 
> 时间：2012-11-09T00:25:05.070
> 
> 标签：c#, wcf

什么是跟踪连接到我的 WCF 服务器的用户的好方法。EX：我有每个都有使用会话的用户帐户。如果一个用户在他的帐户上注册了 100 个会话，他可以从同一个用户名连接 100 次。跟踪连接是直截了当的。但是，如果用户断开连接，如何跟踪呢？如何通知服务器最终用户的 TCP 连接已终止？

我正在为通道关闭时创建一个处理程序。但是我现在如何将 sender / EventArgs 中的某些内容与有意义的连接数据相匹配。

```
 OperationContext.Current.Channel.Closed += _Closed;
    private void _Closed(object sender, EventArgs e)
    {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T11:54:33.063

您可以在创建连接时将连接通道保存在字典中，并在此事件中将其删除。因此您可以跟踪并发用户；）

# xml - 指定 XSD，使得一个 XML 元素必须具有另一个 XML 元素的值

> ID：13300291
> 
> 赞同：4
> 
> 时间：2012-11-09T00:25:43.937
> 
> 标签：xml, xsd

我不确定这是否可以通过 XML/XSD 实现，并且在搜索它时运气不佳。

您能否指定一个 XSD，以便在编写 XML 时，您可以拥有一个必须引用另一个 XML 元素中包含的值之一的元素？

例如，如果您有这个 XML：

```
<car>Audi</car>
<car>Ford</car>
<car>Honda</car>

<person>
  <drives>Audi</drives>
</person> 
```

如何为驱动器指定 XSD，使其必须是为汽车输入的值之一？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T01:49:53.907

XSD 1.0 可以工作。理想情况下，您应该使用相同模式类型和参照完整性的组合。

一个 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="sample">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element maxOccurs="unbounded" name="car" type="car"/>
                <xsd:element name="person">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="drives" type="car"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:key name="PKCars">
            <xsd:selector xpath="car"/>
            <xsd:field xpath="."/>
        </xsd:key>
        <xsd:keyref name="FKPersonCar" refer="PKCars">
            <xsd:selector xpath="person/drives"/>
            <xsd:field xpath="."/>
        </xsd:keyref>
    </xsd:element>
    <xsd:simpleType name="car">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="Audi"/>
            <xsd:enumeration value="Ford"/>
            <xsd:enumeration value="Honda"/>
        </xsd:restriction>
    </xsd:simpleType>
</xsd:schema> 
```

图表：

![在此处输入图像描述](../Images/594d25a4cf3bff19214bd0ff9e35036b.png)

无效的 XML：

```
<sample>
    <car>Audi</car>
    <car>Ford</car>
    <car>Honda</car>

    <person>
        <drives>Aud</drives>
    </person>
</sample> 
```

错误：

```
Error occurred while loading [], line 7 position 16
The 'drives' element is invalid - The value 'Aud' is invalid according to its datatype 'car' - The Enumeration constraint failed.
specify-xsd-such-that-an-xml-element-must-have-the-value-of-another-xml-element.xml is invalid. 
```

这个错误告诉你使用枚举值会使 key/keyref 变得多余——你不会触发它。

但是，如果您的 XSD 中不能包含枚举值列表，则至少应该为该类型强制设置一个最小长度，以避免空值造成破坏。当然，虽然建议共享类型，但您不必这样做。

修改后的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="sample">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element maxOccurs="unbounded" name="car" type="car"/>
                <xsd:element name="person">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="drives" type="car"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:key name="PKCars">
            <xsd:selector xpath="car"/>
            <xsd:field xpath="."/>
        </xsd:key>
        <xsd:keyref name="FKPersonCar" refer="PKCars">
            <xsd:selector xpath="person/drives"/>
            <xsd:field xpath="."/>
        </xsd:keyref>
    </xsd:element>
    <xsd:simpleType name="car">
        <xsd:restriction base="xsd:normalizedString">
            <xsd:minLength value="1"/>
        </xsd:restriction>
    </xsd:simpleType>
</xsd:schema> 
```

错误信息：

```
Error occurred while loading [], line 9 position 4
The key sequence 'Aud' in Keyref fails to refer to some key.
specify-xsd-such-that-an-xml-element-must-have-the-value-of-another-xml-element.xml is invalid. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T01:18:33.430

**使用 XSD 1.1，您可以使用[断言](http://www.w3.org/TR/xmlschema11-1/#cAssertions)。**

> 断言组件约束相关元素和属性的存在和值。

您可以使用 XPath 2.0 表达式在断言中执行验证/测试。

此示例模式有一个`/doc`元素断言，可确保该`/doc/person/drives`值等于其中一个`/doc/car`元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" version="1.1" elementFormDefault="qualified">

    <xs:element name="car" type="xs:string" />  
    <xs:element name="drives" type="xs:string" />

    <xs:element name="person">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="drives"/>
            </xs:sequence>     
        </xs:complexType>
    </xs:element>

    <xs:element name="doc">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="car" maxOccurs="unbounded"/> 
                <xs:element ref="person"/>
            </xs:sequence> 
            <xs:assert test="person/drives = car"/>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T00:38:13.277

这看起来像一个枚举，您的示例恰好与[w3schools](http://www.w3schools.com/schema/schema_facets.asp)示例非常相似。

```
<xs:element name="car" type="carType"/>

<xs:simpleType name="carType">
    <xs:restriction base="xs:string">
        <xs:enumeration value="Audi"/>
        <xs:enumeration value="Golf"/>
        <xs:enumeration value="BMW"/>
    </xs:restriction>
</xs:simpleType>

<xs:element name="person">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="drives" type="carType"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

如果不是，你可能想要 Pangaas 的答案。

# jquery - Model value not being set on return from View to Controller

> ID：13300292
> 
> 赞同：1
> 
> 时间：2012-11-09T00:25:53.397
> 
> 标签：jquery, asp.net, asp.net-mvc-4

I have a boolean model variable who's value is supposed to be set to TRUE in order to perform a process on return back into the Controller.

It works **absolutely fine** on my local machine, but not on the remote web server.

Can somebody PLEASE inform me what I am missing? Below is the "proof of the pudding": The boolean value in quesion is "**ShouldGeneratePdf**";

**MODEL:**

```
namespace PDFConverterModel.ViewModels
{
    public partial class ViewModelTemplate_Guarantors
    {
        public ViewModelTemplate_Guarantors()
        {
            Templates = new List<PDFTemplate>(); 
            Guarantors = new List<tGuarantor>(); 
        } 

        public int SelectedTemplateId { get; set; }
        public List<PDFTemplate> Templates { get; set; }

        public int SelectedGuarantorId { get; set; }
        public List<tGuarantor> Guarantors { get; set; }

        public string LoanId { get; set; }
        public string DepartmentId { get; set; }
        public bool isRepeat { get; set; }
        public string ddlDept { get; set; }
        public string SelectedDeptText { get; set; }
        public string LoanTypeId { get; set; }
        public string LoanType { get; set; }

        public string Error { get; set; }
        public string ErrorT { get; set; }
        public string ErrorG { get; set; }
        public bool ShowGeneratePDFBtn { get; set; }
        public bool ShouldGeneratePdf { get; set; }
    }
} 
```

**MasterPage**:

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.2.913/kendo.common.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.2.913/kendo.dataviz.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.2.913/kendo.blueopal.min.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-2.5.3.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/kendo/2012.2.913/kendo.all.min.js")"></script>
    <script src="@Url.Content("~/Scripts/kendo/2012.2.913/kendo.aspnetmvc.min.js")"></script>
</head>

<body>
    <div class="page">
        <header>
            <div id="title">
                <h1>BHG :: PDF Service Generator</h1>
            </div>
        </header>
        <section id="main">
            @RenderBody()
        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

**View**:

```
@model PDFConverterModel.ViewModels.ViewModelTemplate_Guarantors

@using (Html.BeginForm("ProcessForm", "Home", new AjaxOptions { HttpMethod = "POST" }))
{ 
    <table style="width: 1000px">

        @Html.HiddenFor(x => x.ShouldGeneratePdf)

        <tr>
            <td>
                <img alt="BHG Logo" src="~/Images/logo.gif" />
            </td>
        </tr>
        <tr>
            <td>
                @(Html.Kendo().IntegerTextBox()
                  .Placeholder("Enter Loan Id")
                  .Name("LoanId")
                  .Format("{0:#######}")
                  .Value(Convert.ToInt32(Model.LoanId))
                )
            </td>
        </tr>
        <tr>
            <td>@Html.Label("Loan Type: ")
                @Html.DisplayFor(model => Model.LoanType)
            </td>
            <td>
                <label for="ddlDept">Department:</label>
                @(Html.Kendo().DropDownListFor(model => Model.ddlDept)
                            .Name("ddlDept")
                            .DataTextField("DepartmentName")
                            .DataValueField("DepartmentID")
                            .Events(e => e.Change("Refresh"))
                            .DataSource(source =>
                            {
                                source.Read(read =>
                                {
                                    read.Action("GetDepartments", "Home");
                                });
                            })
                            .Value(Model.ddlDept.ToString())
                    )
            </td>
        </tr>

        @if (Model.ShowGeneratePDFBtn == true)
        {
            if (Model.ErrorT == string.Empty)
            {
            <tr>
                <td>
                    <u><b>@Html.Label("Templates:")</b></u>
                </td>
            </tr>
            <tr>
                @for (int i = 0; i < Model.Templates.Count; i++)
                {  
                    <td>
                        @Html.CheckBoxFor(model => Model.Templates[i].IsChecked)
                        @Html.DisplayFor(model => Model.Templates[i].TemplateId)
                    </td> 
                }

            </tr>
            }
            else
            {
            <tr>
                <td>
                    <b>@Html.DisplayFor(model => Model.ErrorT)</b>
                </td>
            </tr>
            }

            if (Model.ErrorG == string.Empty)
            {
            <tr>
                <td>
                    <u><b>@Html.Label("Guarantors:")</b></u>
                </td>
            </tr>
            <tr>
                @for (int i = 0; i < Model.Guarantors.Count; i++)
                { 
                    <td>
                        @Html.CheckBoxFor(model => Model.Guarantors[i].isChecked)
                        @Html.DisplayFor(model => Model.Guarantors[i].GuarantorFirstName)&nbsp;@Html.DisplayFor(model => Model.Guarantors[i].GuarantorLastName)
                    </td> 
                }

            </tr>
            }
            else
            {
            <tr>
                <td>
                    <b>@Html.DisplayFor(model => Model.ErrorG)</b>
                </td>
            </tr>
            }
        }
        <tr>
            <td>
                <input type="submit" name="submitbutton" id="btnRefresh" value='Refresh' />
            </td>
            @if (Model.ShowGeneratePDFBtn == true)
            {
                <td>
                    <input type="submit" name="submitbutton" id="btnGeneratePDF" value='Generate PDF' />
                </td>
            }
        </tr>
        <tr>
            <td style="color: red; font: bold">
                @Model.Error
            </td>
        </tr>

    </table>
}

<script type="text/javascript">

    $('#btnRefresh').click(function () {
        Refresh();
    });

    function Refresh() {

        var LoanID = $("#LoanID").val();

        if (parseInt(LoanID) != 0) {
            $('#ShouldGeneratePdf').val(false)
            document.forms[0].submit();
        }
        else {
            alert("Please enter a LoanId");
        }
    }

    //$(function () {
    //    //DOM loaded
    //    $('#btnGeneratePDF').click(function () {
    //        DisableGeneratePDF();
    //        $('#ShouldGeneratePdf').val(true)
    //    });
    //});

    //function DisableGeneratePDF() {
    //    $('#btnGeneratePDF').attr("disabled", true);
    //    $('#btnRefresh').attr("disabled", true);
    //}

    $('#btnGeneratePDF').click(function () {
        alert("inside click function");
        DisableGeneratePDF();
        $('#ShouldGeneratePdf').val(true)
        tof = $('#ShouldGeneratePdf').val();
        alert("ShouldGeneratePdf set to " + tof);
    });

    function DisableGeneratePDF() {
        alert("begin DisableGeneratePDF function");
        $('#btnGeneratePDF').attr("disabled", true);
        $('#btnRefresh').attr("disabled", true);
        alert("end DisableGeneratePDF function");
    }

</script> 
```

**Controller**:

```
[HttpPost]
        public ActionResult ProcessForm(string submitbutton, ViewModelTemplate_Guarantors model, FormCollection collection)

if ((submitbutton == "Refresh") || (submitbutton == null) && (model.ShouldGeneratePdf == false))
            {
}
else if ((submitbutton == "Generate PDF") || (model.ShouldGeneratePdf == true))
            {
} 
```

The "Alerts" in the script above come out to exactly what they should be on the remote server. The last alert shows that the value of the bool variable is "true". However, **when I do page source views of the hidden variable, below is the result.**

**The values of the hidden variable when the page loads and when the last alert button finishes are as follows:**

**My local machine:**

**The remote machine:**

As you can see, the value on my machine is set to **true** when the process executes. However, on the remote machine, it is set to **false** where it then doesn't excute.

**Why isn't the value in the model being returned as TRUE on the remote machine?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:56:45.070

这可能只是一个错字，但这条线

```
$('#ShouldGeneratePdf').val(true) 
```

没有收盘；

```
$('#ShouldGeneratePdf').val(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:20:00.533

发现问题出在哪里......

使用 Fiddler，我能够确定该网站在 FireFox (v16.0.2) 下运行良好。我可以看到 Fiddler 中的值更改为 true，它将执行正常过程。

对于最新版本的 Chrome，它不起作用（v23.0.1271.84）。

如果使用 IE9，访问站点时会自动跳转到兼容模式。在 IE9 中，如果正在使用 Compatability View，则它不起作用。一旦我从兼容性视图更改回 IE9，它就可以正常工作了。在 IE9（IE8 和 IE7）之前，也不起作用。

微软和谷歌如何以及何时可以解决这些问题？

在此期间有什么建议可以解决这个问题吗？

我取消选中工具 | 下的框。兼容性查看设置并取消选中“以兼容模式显示 Intranet 站点”框。

所以，现在当我进入 IE 时，它会自动让我进入常规的 IE9 模式。

有人知道Chorme的类似设置吗？

# visual-studio-2010 - Can I use MSBUILD scripts to replace SLN files?

> ID：13300294
> 
> 赞同：1
> 
> 时间：2012-11-09T00:26:05.377
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, msbuild, solution

I would like to move my builds from using Visual Studio SLN files to using MSBUILD sripts (we're approaching 100 projects in the SLN file), but I don't want to dual-maintain the SLN files for when we're editing code within Visual Studio.

What I would like is to create a dependency-tree of MSBUILD scripts, and then be able to select any one MSBUILD script from Visual Studio to use as if it were the SLN file - including all dependent projects automatically.

Can Visual Studio do this? Are there any existing tools that can dynamically create SLN files from MSBUILD scripts? Has anybody tried to write a tool to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:23:07.080

您可以按原样构建您的 csproj，如果您创建所有 csproj 的项目组并将其传递给 msbuild，则为您确定依赖顺序（只要您有项目引用而不是 dll 引用）。自动。

项目引用会导致构建速度较慢，如果使用 dll 引用构建，则构建速度会更快，但权衡是您必须知道或确定依赖顺序，然后才能确保混乱。

一个 sln 中的 100 个项目很多，会让你 VS 变慢。我倾向于每个实体都有一个 sln，例如网站、网络服务，而不是一个单一的构建和 sln。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:07:27.430

早在 2011 年 12 月，我就编写了一个动态生成 *.sln 文件的工具。不幸的是，由于工作中的政治原因，我无法部署它。我们为我们的构建系统维护了 600 多个项目文件，这对于解决方案来说太大了。好吧，至少是您实际尝试在 IDE 中加载的解决方案。

尽管如此，我们确实使用了由 MSBuild（不是 Devenv.exe）加载的动态生成的解决方案文件。据我所知，没有人试图在 IDE 中加载该解决方案文件。

无论如何，所以我编写的工具将包含我们的源代码的目录作为参数。它递归地搜索并找到其中的所有 *.vcxproj 和 *.csproj 文件。然后对于每个项目文件，它使用 MSBuild API 解析文件。当它解析每个文件时，它会查找其他项目文件之间的依赖关系。找到 *.lib 文件的本地依赖项足够聪明。找到托管 c++/CLI 的依赖项非常聪明，这些依赖项在代码文件本身中指定依赖项，例如：#using。它也很聪明，可以使用程序集引用找到正常的托管依赖项。它还通过其他几种方式找到依赖关系。

然后它会获取所有这些依赖项并生成一个解决方案文件。如果您有任何问题，请随时联系我，我们可以交谈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T23:25:16.890

只要您依赖引用项目（而不是编译的 dll）并且如果您有一些 Xml 经验，创建这样的东西应该不会太难。您将解析初始 csproj 文件（即 Xml）并读取对项目的所有引用。它们看起来像这样：

```
<ProjectReference Include="..\..\src\Test\Test.csproj" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Project>{ab709f59-aa17-4297-b827-101d086586e1}</Project>
  <Name>Test</Name>
</ProjectReference> 
```

如您所见，您已经获得了相关 csproj 文件的路径。您将收集相关项目的所有路径并递归地对每个路径执行相同操作，直到您处理所有文件（小心从多个项目（重复）引用的项目 - 否则您将进入无限循环）。请注意，csproj 元素属于非空命名空间，因此在解析 Xml 时需要考虑这一点（.NET Xml API 可以处理这些）。您可以收集所有项目（路径、名称、GUID），然后创建 sln 文件，或者您可以即时创建 - 每次找到新参考时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:25:30.527

我不知道任何现有的工具。我知道这可能不能直接回答您的问题，但我可以分享我在大型项目中工作的经验。

我们总是将大型解决方案文件拆分为多个较小的相关项目。然后你可以打开一两个视觉工作室来查看你想要从事的项目。

然后我们有一个 msbuild 脚本，它依次构建每个解决方案以生成整个产品和安装程序。

不需要动态解决方案生成。我担心维护这样的东西可能需要相当多的工作，而且你会遇到这样的情况，你不断地研究不同的动态生成的解决方案，所以你永远不会记得事情在哪里。使用一些固定的解决方案文件，您可以将项目组织到几个文件夹中，然后您就可以在脑海中对什么去哪里进行某种组织。有了一些体面的组织，我发现我只是偶尔需要同时打开并处理两个解决方案。

我们有一个或多个基础/核心解决方案，其中包含具有在其他解决方案之间共享的定义的项目。但是，我没有发现有必要从基础复制所有依赖项目以及使用它们的更高项目。您仍然可以通过依赖项目进行调试，而无需将它们包含在解决方案中。如果您确实需要进行更改，请打开基础解决方案并编辑并构建它并继续。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T08:53:23.257

看看[GYP](https://code.google.com/p/gyp/ "吉普")（生成您的项目），由 Google 为此目的创建（创建项目和解决方案文件），并在必要时自动构建。

从他们的[维基](https://code.google.com/p/gyp/wiki/GypVsCMake "GypVsCMake")：

> GYP 最初是为了生成用于构建 Chromium 的本机 IDE 项目文件（Visual Studio、Xcode）而创建的。
> 
> [..]
> 
> 此外，gyp 的一些设计是从谷歌的经验中获得的，这些项目完全是从源代码构建的 [..]。

我目前在使用[Chromium Embedded Framework](https://code.google.com/p/chromiumembedded/)时使用它，它用于为 Visual Studio 2012 生成 *.vcxproj 和 *.sln 文件。在这种情况下，它会生成一个包含 259 个项目的解决方案文件。如果使用旧版本的 Visual Studio，它还会生成 *.vcproj 文件。

作为旁注，这是将项目文件排除在版本控制系统之外并为任何新开发人员快速获取项目设置的好方法。

**编辑：**再次阅读您的问题后，我认为您无法从 MSBUILD 脚本生成 *.gyp 文件，但转换努力仍然值得。

**编辑2：**看看另一个可能也有帮助的答案，尤其是看起来很有希望的[gypfy.py：https://stackoverflow.com/a/9387350/1412348](https://stackoverflow.com/a/9387350/1412348)

# c++ - C++ 编译器错误 C2679：二进制“=”：未找到运算符

> ID：13300300
> 
> 赞同：1
> 
> 时间：2012-11-09T00:26:44.080
> 
> 标签：c++, class, visual-c++, compiler-errors

我在尝试填充一个包含我创建的类的对象的二维数组时遇到问题。错误是：

```
error C2679: binary '=' : no operator found which takes a right-hand operand of type 'Cell *' (or there is no acceptable conversion) 
```

产生错误的代码如下：

摘自 main.cpp

```
Cell cells[80][72];

for(int x = 0; x < 80; x++){
    for(int y = 0; y < 72; y++){
        cells[x][y] = new Cell();
    }
} 
```

摘自 cell.hpp

```
class Cell
{
public:
    Cell();
    int live;
    int neighbours;
}; 
```

摘自 cell.cpp

```
Cell::Cell()
{
    srand(time(0));
    this->live = rand() % 2;
    this->neighbours = 0;
} 
```

我怀疑我需要对 Cell 类的构造函数进行某种重载，但我不知道如何为这种情况实现一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:33:09.127

试试这个：

```
Cell *cells[80][72] = {} 
```

您只能将**new**用于指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:36:00.990

你正在做新的细胞你创建一个细胞*。顺便说一句，当你写 cell[X][Y] 时，没有其他东西可以分配。

如果你有，你会做一个新的：

```
cell ** matrix = new cell[X];
for(int i=0;i<X;i++){
    matrix[i]=new cell[Y];
} 
```

但是在这里，在您发送的代码中，进行“填充”是没有用的，单元格已经在那里并已分配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:40:58.247

由于`Cell`有一个无参数的构造函数

```
Cell cells[80][72]; 
```

定义了一个 80x72 的`Cell`对象数组。对象已经为您构建好了，因此`for`不需要嵌套循环。

另一方面，如果您声明`Cell`为 80x72 指针数组`Cell`，即

```
Cell* cells[80][72]; 
```

然后你必须像你想做的那样去分配每一个。如果您实际上不需要使用指针，则不要。

# php - wordpress get_children won't work after pre_get_posts

> ID：13300301
> 
> 赞同：0
> 
> 时间：2012-11-09T00:26:57.027
> 
> 标签：php, wordpress

A little help here with `get_children` function. `pre_get_posts` hook filter the main_query. After that I called `get_children` to get the attachment image but I ended up giving an 0 array result.

function.php

```
 function cstm_get_posts() {
        if ( is_post_type_archive( 'tent' ) ) {
        $query->set( 'posts_per_page', 20 );
        return;
       }
     }
 add_action('pre_get_posts', 'cstm_get_posts' ); 
```

archive.php

```
 $attachments = get_children( array(
    'numberposts' => 1,
    'order'=> 'ASC',
    'post_mime_type' => 'image',
    'post_parent' => $post->ID,
    'post_type' => 'attachment'
    ));
foreach($attachments as $attch){
 code display image here
} 
```

Code above is just a snippet.

Anyway if I don't use `pre_get_posts` the `get_children` works fine. But I need the `pre_get_posts` to filter the query. Any idea or suggestion?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:07:43.310

尝试这个

```
function cstm_get_posts($query) {
  if ( is_post_type_archive( 'tent' ) &&  $query->is_main_query() ) {
    $query->set( 'posts_per_page', 20 );
    return;
  }
} 
```

将参数添加`$query`到函数中。

# php - PHP / JQuery 克隆隐藏表格行，添加到表格末尾

> ID：13300304
> 
> 赞同：0
> 
> 时间：2012-11-09T00:27:11.013
> 
> 标签：php, jquery

我有一张桌子，第一个 TR 隐藏了 (style="display:none;")。我在表格顶部有一个按钮，允许用户向表格中添加新行。单击时，我希望将隐藏的行克隆并添加到表格的底部。我认为这是最好的方法，因为我可以预先格式化该行以准确包含我在 NEW 行中需要的内容。

这是我到目前为止的 JQuery：

```
$(document).ready(function($) {
   $(".dispadd").click(function() {
      $('#hiddenrow').clone().show().appendTo( $('#hiddenrow').parent() );
   });
}); 
```

它似乎按预期添加了行，但在一秒钟内，新行消失了。有人看到我做错了什么吗？

****_ *_* __****最新代码*****_ *_* ____*******

 *****```
$(document).ready(function($) {
    $(".dispadd").click(function(event) {
        event.preventDefault();
        $('#hiddenrow')
            .clone()
                .removeAttr('id')
                .show()
                .appendTo( $('#disptable').after().show() 
        );
    });
}); 
```

在将#hiddenrow 移到父表之外后，我不得不对其进行一些修改。如何设置克隆行中输入框之一的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:34:08.950

您的代码工作正常，因此您页面上的其他一些代码必须隐藏新行。这很可能是因为您没有`#hiddenrow`从克隆的行中删除 - 见下文：

```
$(document).ready(function($) {
    $(".dispadd").click(function() {
        $('#hiddenrow')
            .clone()
                .removeAttr('id')
                .show()
                .appendTo( $('#hiddenrow').parent() );
    });
});​ 
```

演示：http: [//jsfiddle.net/kelervin/4zrC7/2/](http://jsfiddle.net/kelervin/4zrC7/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:56:50.550

后续说明 - 如果您不从新克隆的行中删除 id #hiddenrow，您最终会得到多个具有相同 id 的行 - 请参见此处：[div class vs id](https://stackoverflow.com/questions/84378/div-class-vs-id)*****

# python - IPython Maintain namespace after run

> ID：13300306
> 
> 赞同：17
> 
> 时间：2012-11-09T00:27:17.193
> 
> 标签：python, ipython

I've tried to look everywhere for a simple way to regain MATLAB-like functionality: when I run a script, I want ipython to maintain the namespace of my functions.

I have a main function, and then I have a function `sim_loop()` that has the code I'm trying to debug. `sim_loop()` has a large array that I want to be able to display after my script runs. I can't get that functionality to work (I assume it's "interactive namespace").

I've got `pdb` to work, but if I exit out of `pdb` and want to check a variable I have to run it all again (not to mention, there's no autocomplete and other functionality). I've embedded an IPython shell into my script, but, again, that doesn't address my problem because I want to seamlessly execute a script over and over again and constantly check a variable inside my second function (not `main()`).

**To clarify** I want to be able to access the scope of a subroutine of my script after the script has run *from within ipython*.

ie: I start ipython. I then type "run script.py". It runs and works perfectly fine. I want to be able to then inspect the variable "dummy" that was within the scope: main->sim_loop->dummy

I want to be able to inspect it and then run my script again with "run script.py" and then check "dummy" again ad nauseum.

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-09T01:20:22.697

要在主 ipython 命名空间中运行脚本：

```
ipython script.py 
```

当然，这只是运行并退出。如果要在主 ipython 命名空间中运行脚本，然后放入 REPL：

```
ipython -i script.py 
```

如果您已经在 ipython 中并且想要在现有的主 ipython 命名空间中运行脚本：

```
%run -i script.py 
```

您可能需要添加其他参数——例如，如果您的脚本`sys.exit`在任何地方显式调用，您可能需要一个`-e`参数。

如果您只想在不运行“活动”代码的情况下将所有名称导入您的命名空间，您可以`%run -n -i script.py`在脚本进行`if __name__ == '__main__'`测试时执行此操作。

当然，即使没有 ipython，您也可以`execfile('script.py')`使用几乎完全相同的效果（除了与本地人的一些奇怪的交互，并且在 3.x 中不工作）。甚至`from script import *`可能足够接近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T00:38:04.230

您似乎想要的是为了开发目的打破范围，使本地人成为全局人，这可能不是最好的主意。

作为一种可能的选择，你知道[ipdb](http://pypi.python.org/pypi/ipdb)吗？

# java - updating a class within a class

> ID：13300308
> 
> 赞同：1
> 
> 时间：2012-11-09T00:27:27.547
> 
> 标签：java, class, user-interface, main

is there a way to update a class I am currently in with a new instance of that class? For example:

```
public class Test
{
  Test temp = new Test();
  this = temp;
} 
```

I am doing this because I have a save/load feature form serializable and I need a way to update the current class from it

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:36:15.357

不，Java 变量存储对对象的引用，因此`this = ...`不起作用。Java 无法跟踪引用当前实例的每个位置`Temp`并更改它们指向的内存引用。

下一个最好的事情可能是将所有字段从一个对象复制到另一个对象。[不过，这有其自身的一系列问题](https://stackoverflow.com/questions/2326758/how-to-properly-override-clone-method)。

# android - Javax.crypto Base64 help needed

> ID：13300310
> 
> 赞同：0
> 
> 时间：2012-11-09T00:27:48.830
> 
> 标签：android, encryption, base64, sharedpreferences, javax.crypto

I am a novice android programmer that needs assistance encrypting and decrypting EditText strings stored in SharedPreferences. This seems as if it should be a very common procedure and should have many tutorials covering how to accomplish this but I have not found very good information or guidance. I followed the instructions given [HERE](http://www.ravenblast.com/index.php/blog/android-password-text-encryption/) but my data shows up in clear text when checking my xml file. Any help will be greatly appreciated.

Class receives EditText string and encodes:

```
private SharedPreferences sp;

Intent i;
Button regBttn,rtnBttn;
EditText rName,rPwd;
String user, pass, chk;
String stat="a";
String key = "N@!an@jajpn!==";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{

     super.onCreate(savedInstanceState);
     setContentView(R.layout.register);

    rName=(EditText)findViewById(R.id.reg_uname);
    rPwd=(EditText)findViewById(R.id.reg_pswd);
    regBttn=(Button)findViewById(R.id.reg_button);
    rtnBttn=(Button)findViewById(R.id.rtn_button); 
    regBttn.setOnClickListener(this);
    rtnBttn.setOnClickListener(this);

    sp=this.getSharedPreferences("AccessApp", MODE_WORLD_READABLE);
    chk=sp.getString("USERNAME_KEY", "");
    if(chk.length()!=0){
    sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE); 

    i=new Intent(this,AccessApp.class);
    startActivity(i); 

    }     
   }

public void onClick(View arg0) {
    user=rName.getText().toString().trim();
    pass=rPwd.getText().toString().trim();

    if(arg0==regBttn){     
       if((user.length()!=0))
        {
         if((pass.length()!=0))
            {

        sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE);
        Editor myEditor=sp.edit();

        try {

            byte[ ] superSecretKeyBytes = Base64.decode(user);
            byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };
            for (int i = 0; i < superSecretKeyBytes.length && i < key.length; i++) {
                key[i] = superSecretKeyBytes[i];
                myEditor.putString("USERNAME_KEY", user);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
        try {

            byte[ ] superSecretKeyBytes = Base64.decode(pass);
            byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };
            for (int i = 0; i < superSecretKeyBytes.length && i < key.length; i++) {
                key[i] = superSecretKeyBytes[i];
                myEditor.putString("PASSWORD_KEY", pass);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        myEditor.commit();
        Toast.makeText(this, "Registration is successfull",10000).show();
        i=new Intent(this,AccessApp.class);
        startActivity(i);
        }
        else
         {
          Toast.makeText(this, "Please Enter password", 10000).show();  
         }
         }
        else{
            Toast.makeText(this,"Please Enter Username",10000).show();
         }
        }

    else if(arg0==rtnBttn){
        AlertDialog.Builder builder=new AlertDialog.Builder(this);
         builder.setTitle("Exit");
         builder.setMessage("Do you want to exit");
         builder.setCancelable(false);
         builder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {

  public void onClick(DialogInterface dialog, int which) {
  // TODO Auto-generated method stub
  finish();
  }
  });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
               arg0.cancel();
            }
        });
    AlertDialog alert=builder.create();
    alert.show();

    }
}
public String encrypt(String toencrypt, byte key[]) throws Exception {
    SecretKeySpec secret = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, secret);
    byte[] encryptedbytes = cipher.doFinal(toencrypt.getBytes());
    String encrypted = Base64.encodeBytes(encryptedbytes, 0);
    return encrypted;

}

} 
```

Class used to decrypt and compare:

```
public class AccessApp extends Activity implements OnClickListener {
private SharedPreferences sp;
String user,pass;
Button lBttn,cBttn;
EditText uname,pword;
Intent i;

int flag=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{ 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lBttn=(Button)findViewById(R.id.login_button);
    cBttn=(Button)findViewById(R.id.cancel_button);
    uname=(EditText)findViewById(R.id.username);
    pword=(EditText)findViewById(R.id.password);

    lBttn.setOnClickListener(this);
    cBttn.setOnClickListener(this);
}
public void onClick(View arg0) {

    sp=this.getSharedPreferences("AccessApp", MODE_WORLD_READABLE);
    user = sp.getString("USERNAME_KEY", "");
    pass = sp.getString("PASSWORD_KEY", "");

   if(lBttn.equals(arg0)){

      if((uname.getText().toString().equals(user))&& 
        (pword.getText().toString().equals(pass)))

            {
          Toast.makeText(this, "You are Logged In", 20000).show();

               Intent intent;
               intent=new Intent(this,details.class);
               startActivity(intent);
              flag=1;
            }

        else 
           {
            Toast.makeText(this, "Wrong Username or Password",20000).show();
            flag=0;   
           }       
        } 
        else if(cBttn==arg0){
            AlertDialog.Builder builder=new AlertDialog.Builder(this);
          builder.setTitle("Exit");
         builder.setMessage("Do you want to exit");
    builder.setCancelable(false);
    builder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {

 public void onClick(DialogInterface dialog, int which) {
 // TODO Auto-generated method stub
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent);

 finish();
 }
 });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
               arg0.cancel();
            }
        });
    AlertDialog alert=builder.create();
    alert.show();

        }

    }
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
 if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {

     Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
     finish();
 }
 return super.onKeyDown(keyCode, event);
}

public static String decrypt(String encryptedText, byte[ ] key) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] toDecrypt = Base64.decode(encryptedText);
    byte[] encrypted = cipher.doFinal(toDecrypt);
    return new String(encrypted);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:50:56.507

您似乎将未加密的用户名和密码保存到编辑器：

```
 byte[ ] superSecretKeyBytes = Base64.decode(pass);  
        byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };
        for (int i = 0; i < superSecretKeyBytes.length && i < key.length; i++) {
            key[i] = superSecretKeyBytes[i];
            myEditor.putString("PASSWORD_KEY", pass);
        } 
```

老实说，我不明白你为什么要这么做。你实际上在做什么似乎真的没有必要，因为你将它解码成一个字节数组，创建一个固定数量的字节数组，循环通过解码的数组，并用解码的数据替换创建的固定数量数组的数据，并且然后将未更改的字符串密码添加到编辑器（顺便说一句，您这样做太多次了）。我很确定这不是你想要做的。

我相信你在那里尝试做的实际上是对其进行加密，但你从来没有解决过它，所以让我们试试这个：

首先，您的密钥应该是一个静态变量，如果它发生变化，它将不再能够适当地加密/解密。

```
byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 }; 
```

现在要加密密码，根据您已有的内容，根据您的密钥（在本例中：key）和您要加密的字符串（在本例中：pass）调用您的 encrypt 方法：

```
String encryptedPassword = encrypt(pass, key); 
```

现在 encryptedPassword 包含基于您输入的密钥的 Base64 加密形式的密码。现在剩下要做的就是使用编辑器保存密码的加密形式，而不是像以前那样保存未加密的形式。

```
myEditor.putString("PASSWORD_KEY", encryptedPassword); 
```

所以现在当您调用 myEditor.commit() 时，您将存储加密的表单。

这是第一个源文件中编辑的 onClick 方法，用于用户名和密码加密。我没有看你的解密部分，但你应该能够根据我给你的内容弄清楚：

```
public void onClick(View arg0) {
    user=rName.getText().toString().trim();
    pass=rPwd.getText().toString().trim();

    if(arg0==regBttn){     
       if((user.length()!=0))
        {
          if((pass.length()!=0))
        {

        sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE);
        Editor myEditor=sp.edit();

        byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };

        try {
             String encryptedUser = encrypt(user, key);  
             myEditor.putString("USERNAME_KEY", encryptedUser); 
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
    try {
             String encryptedPass = encrypt(pass, key);  
             myEditor.putString("PASSWORD_KEY", encryptedPass); 

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    myEditor.commit();
    Toast.makeText(this, "Registration is successfull",10000).show();
    i=new Intent(this,AccessApp.class);
    startActivity(i);
    }
    else
     {
      Toast.makeText(this, "Please Enter password", 10000).show();  
     }
     }
    else{
        Toast.makeText(this,"Please Enter Username",10000).show();
     }
    }

else if(arg0==rtnBttn){
    AlertDialog.Builder builder=new AlertDialog.Builder(this);
     builder.setTitle("Exit");
     builder.setMessage("Do you want to exit");
     builder.setCancelable(false);
     builder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {

  public void onClick(DialogInterface dialog, int which) {
  // TODO Auto-generated method stub
  finish();
  }
  });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
                arg0.cancel();
            }
        });
    AlertDialog alert=builder.create();
    alert.show();

    }
} 
```

希望有帮助~

# .net - Increment version during publishing and check in to Team Foundation Server (TFS)

> ID：13300311
> 
> 赞同：3
> 
> 时间：2012-11-09T00:27:56.800
> 
> 标签：.net, tfs, msbuild, visual-studio-2012, publish

I am at present setting up my [ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework) 4 web application with publish profiles and the associated publishing features. My [continuous integration](http://en.wikipedia.org/wiki/Continuous_integration) (CI) environment is [Team Foundation Server](http://en.wikipedia.org/wiki/Team_Foundation_Server) (TFS) build 2010 and TFS for source control.

I have a number of requirements that I would like to achieve with this. Firstly, each time I create the publish package for release, I would like the build number to be incremented and revision number reset to 0 in my version file. I currently have one version file that contains the version number of `Major.Minor.Build.Revision`. So I would like the creation of the publishing package to do such. Is this possible and if so how is it achieved? Note as this increments the version file, as part of this process I would like this checked in to source control.

My second question is that each time a developer checks in to the TFS build server, the revision number will get incremented or at least changed to a new value. I had hoped to update my build template to achieve this, but unfortunately due to restrictions on my build server I can not incorporate any custom activities on it. So I am looking to perform this task with [MSBuild](http://en.wikipedia.org/wiki/MSBuild). Is it possible to achieve what I outlined here with MSBuild and if so, could I get an explanation please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:09:31.577

[Team Foundation Build Customization Guide](http://vsarbuildguide.codeplex.com/)有 10 页关于此主题（此处复制的内容太多了）。本指南由[Visual Studio ALM Rangers](http://blogs.msdn.com/b/willy-peter_schaub/archive/2012/03/31/understanding-the-visual-studio-alm-rangers.aspx)制作，与官方指南非常接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:28:48.950

查看这些 Stack Overflow 对*[Working automatic build increment Visual Studio addin](https://stackoverflow.com/a/15733269/505539)*和*[Auto update version numbers (C++ / C#) in Visual Studio 2005 的](https://stackoverflow.com/a/15733528/505539)*回答。

我希望你能找到解决办法。ProjectBuildCounter 是一个独立的独立设备，可以附加到项目以及 TFS 事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:09:05.723

这是一篇旧博客文章，但它可能仍然有效：*[如何：使用 MSBuild 更新程序集版本号](http://blogs.msdn.com/b/msbuild/archive/2005/11/11/how-to-update-assembly-version-numbers-with-msbuild.aspx)*。

# grails - Grails选择不返回对象而是一个字符串

> ID：13300313
> 
> 赞同：2
> 
> 时间：2012-11-09T00:28:16.023
> 
> 标签：grails

如何获取选择标记以返回对象本身而不是字符串？每当我去创建一个新的 BusinessArea 时，我都会收到一条错误消息：

“无法将 java.lang.String 类型的属性值转换为属性 businessType 的所需类型 bassscheduler.BusinessType；嵌套异常是 java.lang.IllegalStateException：无法将类型 [java.lang.String] 的值转换为所需类型 [bassscheduler。 BusinessType] 属性 businessType: 找不到匹配的编辑器或转换策略"

难道我做错了什么？我似乎找不到任何关于如何让选择标签返回对象本身而不是字符串的信息

谢谢您的帮助

我有以下型号

```
class BusinessArea {

  BusinessType businessType
  // The date and time this occurence was created
  Date dateCreated
  // The date and time that this occurrence was last maintained.
  Date lastUpdated
  // The identifier for the OPERATOR or PROGRAM that last maintained this occurrence.
  int lastMaintainer
  // The name of the business area
  String name

  static constraints = {
    lastMaintainer blank: false, nullable: false
    name blank: false, nullable: false
  }
} 
```

和控制器动作

```
def createBusinessArea() {

  def businessArea = new BusinessArea(params)
  if (!businessArea.save(flush: true)) {
    render view: "index", model : [businessArea: businessArea, activeTemplate: "businessArea"]
    return 
  }
  redirect controller: "admin", action: "index", model : [activeTemplate: "businessArea"]
} 
```

使用此表单提交给控制器操作

```
<g:form controller="admin" action="createBusinessArea"> 
  <div class="row">
    <legend>Business Area</legend>
<div class="span3">
  <label>Business Area:</label>
  <g:textField name="businessArea"/>
</div>
<div class="span3">
  <label>Business Type:</label>
  <g:select name="businessType" from="${businessTypes}" optionValue="name"/>
</div>
  </div>

  <div class="buttons">
    <div class="row">
      <div class="span7" style="padding-top: 2em">
    <g:submitButton class="btn btn-primary pull-right" name="create" value="Create" />
  </div>
    </div>
  </div>
</g:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:24:48.903

这：

```
<g:select name="businessType" from="${businessTypes}" optionValue="name"/> 
```

应该：

```
<g:select name="businessType.id" from="${businessTypes}" optionValue="name" optionKey="id" /> 
```

# javascript - Stop Div scrolling past another div

> ID：13300317
> 
> 赞同：2
> 
> 时间：2012-11-09T00:28:37.083
> 
> 标签：javascript, html, css

Basically I have this div container which holds two divs. When scrolled down and the div container is passed by the window it sticks to the top of the screen and follows the screen however when I keep scrolling down, the divs inside the container div overlap the footer.

I cant seem to figure out how to stop the footer from being overlapped, I want it so when the bottom of the div container reaches just short of the footer it stops moving however when scrolling back it up follows the screen still. Currently all it does is follow the screen down when passed and follows it back up to its original position.

Here is the JS for the following part:

```
function sticky_relocate_2() {
    var window_top = $(window).scrollTop();
    var div_top = $('.sticky-anchor').offset().top + 210;

    if (window_top > div_top) {
            $('#right_side_inner_container').addClass('sticky_2')

    } else 
            $('#right_side_inner_container').removeClass('sticky_2')

}

google.setOnLoadCallback(function() 
{
     $(window).scroll(sticky_relocate_2);
 sticky_relocate();
}); 
```

div id=right_side_inner_container thats the id of the container I want to be moving and to stop when it reaches the footer. div id=footer id for the footer.

I saw on some other sites that when it reaches a certain point it minuses from the 'top' css so every pixel scrolled past it keeps deducting from it. I cant seem to figure out how to do it though.

any help would be appreciated.

EDIT: an example

[http://www.ebuyer.com/197546-gigabyte-ga-890gpa-ud3h-890gx-socket-am3-hdmi-dvi-vga-out-8-channel-audio-ga-890gpa-ud3h](http://www.ebuyer.com/197546-gigabyte-ga-890gpa-ud3h-890gx-socket-am3-hdmi-dvi-vga-out-8-channel-audio-ga-890gpa-ud3h)

if you look at the right hand div, when you scroll past it sticks to the screen which I can do but when you keep scrolling it down after a short while it stops and doesn't continue. This is what I am struggling to do.

When I use inspect element (chrome) the top css keeps getting deducted.

EDIT 2: added styles:

```
#right_side_inner_container {
    width 300px;
    height: 600px;
    background: transparent;
    text-align: center;
    color: black;
}

#right_side_inner_container.sticky_2 {
    width: 300px;
height: 600px;
background: transparent;
position: fixed;
top: 0;
    margin-top: -8px;
}

#footer {
width: 100%;
height: 200px;
margin: 5px 0 0 0;
clear: both;
background: blue;
} 
```

I want the right inner container div to stop just before it reaches the footer div. The sticky class is added when the original div is scrolled past which allows it to follow the screen when scrolled past.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:32:37.503

您是否尝试过添加一些`padding-bottom`或`<body>`滚动 div 的容器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:48:41.777

您是否尝试过仅使用纯 CSS 来实现这一目标？您可以简单地使用该属性`overflow:scroll;`吗？我在这里设置了一个示例小提琴：http: [//jsfiddle.net/7q9Fw/5/](http://jsfiddle.net/7q9Fw/5/)

这样 div 不会重叠，您只需要使用

```
float:left;
clear:left; 
```

属性，这将使 div 与众不同。

# jquery - 使用 jQuery 时如何解决 ASP.NET Webforms 限制？

> ID：13300319
> 
> 赞同：1
> 
> 时间：2012-11-09T00:28:46.283
> 
> 标签：jquery, asp.net, ajax, webforms, postback

任何将 jQuery 与 .NET Web 应用程序一起使用的人很可能会遇到问题，即通过 jQuery 在客户端上所做的更改在回发期间不一定会持续到 Web 服务器（因为视图状态、安全性等）。

**我的场景：** 我有一个带有两个不同 ASP.NET 下拉列表的 GridView。其中一个下拉列表在 page_load 期间填充，而另一个则留空。留空的内容是这样填充的：当用户在第一个下拉列表中选择一个项目时，它会触发一个事件，该事件使用 jQuery ajax 从 Web 服务器检索数据，然后将该数据返回给客户端并填充到第二个下拉菜单。这一切都是基本的，并且易于启动。我喜欢它。

但是，我不喜欢的是，当用户在第二个下拉列表中选择一个项目（在它被 jQuery ajax 调用填充之后）并单击“保存”按钮（这会导致回发）然后下拉选择出现在服务器端为空（这实际上意味着服务器不知道下拉菜单中有项目或用户在其中选择了项目）。显然，这与视图状态中的下拉列表为空这一事实有关，我完全理解这背后的原因，但尝试将 jQuery 与 .NET 混合使用让我非常沮丧。

所以我的问题是：如何使用 jquery 填充 ASP.NET 下拉列表并让其中的项目通过回发保持不变？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:36:39.850

简单的回答：不要回发！

使用`$.post`处理程序（`.ashx`）或任何其他页面并将东西保存在那里......

还想回发？没问题，因为您已经有了第二个项目`id`，只需在处理帖子时预先填充第一个和第二个下拉列表。

但我会，从不回发...我会简单地使用`$.ajax`或者它是简单的形式`$.post`来发布我的数据，使我有 2 个不同的页面，一个用于处理布局，另一个用于处理数据...这在 ASP.NET 中很常见MVC，但是因为 WebForms 的工作方式，你需要像这样区分它。

这是我对其他问题[整个过程](https://stackoverflow.com/a/6330501/28004)的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T00:38:17.213

正如您所说，“服务器不知道下拉菜单中有项目”。

我的建议：使用一个简单的输入字段而不是第二个下拉列表，因为从服务器的角度来看，您真正在做的是发布一个文本字符串。您可以隐藏该字段，并将其与用作用户界面的纯客户端下拉菜单同步。

作为记录，这就是某些选择元素在 SharePoint 上的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T03:39:05.800

我以前遇到过这个问题。作为一种解决方法，我在第二个下拉列表旁边放置了一个 HiddenField 控件，并使用与第二个下拉列表相同的值填充该隐藏字段。在后面的代码中，您可以像这样访问 HiddenField 值：

```
HiddenFieldID.Value 
```

请注意，隐藏字段没有 text 属性，而是 value 属性。

# php - 这是封装吗？

> ID：13300332
> 
> 赞同：2
> 
> 时间：2012-11-09T00:30:05.403
> 
> 标签：php, oop, encapsulation

我读过很多次关于封装的文章，但我总是看到这样的代码，我想知道同样的事情。是这种封装吗？

```
class create_active_parent{

function __construct(){
     //something
}

function clean_queues_redis(){
    //creating in this way an object, and using it, is not encapsulation, is it?
    $redis = RedisDB::fetch_instance();        
    $redis->db->flushdb();  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:37:15.917

封装就是对外部隐藏私有**字段**。`$redis`只是一个**局部变量**，它会在`clean_queues_redis`方法执行结束时死掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T10:30:05.590

关于封装：

想象一个管理来自一群人（例如，一些大公司或银行）的敏感数据的应用程序，我们可以编写以下类来说明我们如何处理这些信息。

```
public class Test {
    public static void main(String args[]) {
        CarbonBasedLifeform joeBloggs = new CarbonBasedLifeform("Joe Bloggs", "987-65-4320");
        System.out.println(joeBloggs.name);
    }
}
class CarbonBasedLifeform {
    String name;
    String SSN;
    public CarbonBasedLifeform(String name, String SSN)
    {
        this.name = name;
        this.SSN = SSN;     
    }
} 
```

如果您运行此代码，您将创建一个名为“CarbonBasedLifeform”的类，并创建一个实例，Joe Bloggs，现在想象其他一些程序员正在向程序添加更多内容，他们开始弄乱这些数据，如果他们更改乔的社会安全号码？甚至他的名字？我们没有任何东西可以保护对类属性的访问，所以可以很容易地做到：

```
joeBloggs.SSN = "0987654321"; 
```

如果人们可以像这样修改彼此的文档并更改个人数据，那将是一个多么奇怪、令人不安的世界。Joe 是唯一可以通过官僚循环获取新文档的人，这些东西是私有的，这就是为什么向类属性添加修饰符以及控制对其值的访问的特殊方法是一种常见做法，即吸气剂和二传手：

```
class CarbonBasedLifeform {
    private String name;
    private String SSN;
    public CarbonBasedLifeform(String name, String SSN) {
        this.name = name;
        this.SSN = SSN;
    }
    public String getName() {
        return this.name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getSSN() {
        return this.SSN;
    }
    public void setSSN(String SSN) {
        if(verifyRedTape())
            this.SSN = SSN;
        }
    }
} 
```

现在，其他类无法直接更改 Joe 的属性，因为属性被标记为`private` ，并且方法提供了一种机制来控制其他类如何与此数据交互，这就是所谓的封装，或者换句话说，**不要触摸乔的私事！**

# python - Python 3：没有消息的文件结束错误

> ID：13300339
> 
> 赞同：1
> 
> 时间：2012-11-09T00:30:48.110
> 
> 标签：python, eoferror

我在弄清楚如何创建 EOFError 而不在其后打印一些东西时遇到了一些麻烦。

这是我遇到问题的程序部分：

```
def main():
  try:

    k = float(input("Number? "))

    newton(k)
    print("The approximate square root of", k,"is:",newton(k))
    print("The error is:",(newton(k))-(math.sqrt(k)))

  except EOFError:

    print("End of File") 
```

`Ctrl`我正在尝试这样做，以便在用户按下+后它不会打印任何内容`D`。该程序应该在`Ctrl`+之后立即被终止`D`。

我正在尝试这样做`print("")`，但这会产生额外的空间。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:38:55.523

```
def main():
    try:

        k = float(input("Number? "))

        newton(k)
        print("The approximate square root of", k,"is:",newton(k))
        print("The error is:",(newton(k))-(math.sqrt(k)))

    except EOFError:

        pass 
```

作为单独的说明，我注意到您在代码缩进中使用了 2 个空格。改用 4 个空格是一个好习惯。

# jquery - 具有类值增量的jQuery nextAll

> ID：13300345
> 
> 赞同：1
> 
> 时间：2012-11-09T00:31:45.327
> 
> 标签：jquery, increment

我希望有人能在这里帮忙。我有一堆 div 类 '.my-div-1'、'.my-div-2'、'.my-div-3' 等。我在每个 div 内都有一个按钮，单击该按钮会删除此 div . 我想从那里做的是更新所有正在进行的 div 类。因此，如果我删除 div 类为 '.my-div-2' 的下一个 div '.my-div-3' 将变为 '.my-div-2'，之后的下一个 '.my- div-4'，会变成 '.my-div-3' 等等。

我现在设置它的方式是使用 .nextAll() 删除旧类并添加新类，并带有动态更新编号。但是，这仅适用于下一个，并且动态数字对于以后的 div 不会增加。我不确定 nextAll 是否可以这样做，可能有更好的方法。关于如何实现这一目标的任何想法？任何帮助，将不胜感激。

编辑 - 我还应该提到每个 div 还混合了我需要保留的其他类。

HTML 是：

```
<div class="my-div-container">
   <div class="myDiv my-div-1"></div>
   <div class="myDiv my-div-2"></div>
   <div class="myDiv my-div-3"></div>
   <div class="myDiv my-div-4"></div>
</div> 
```

和点击事件中的jQuery：

```
var divIndex = $(this).parents('.myDiv').prevAll().length;      

$(this).parents('.myDiv').nextAll().removeClass('my-div-'+(divIndex+1)).addClass('my-div-'+(divIndex));
$(this).parents('.myDiv').remove(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:45:18.190

为什么不重新计算所有 div 的类值？

[例子](http://jsfiddle.net/mMtsb/3/)

**JS**

```
$('span').click(function(){

    $(this).closest('.myDiv').remove(); 

    $('.myDiv').each(function(i){
        var div = $(this); 
        var cls = div.attr('class'); 
        div.attr('class', cls.replace(/my\-div\-[0-9]/, 'my-div-' + (i+1)));
    }); 
}); ​ 
```

**HTML**

```
<div class="my-div-container">
    <div class="myDiv my-div-1"><span>Test</span></div>
   <div class="myDiv my-div-2 someotherclass"><span>Test</span></div>
   <div class="myDiv my-div-3 test"><span>Test</span></div>
   <div class="myDiv my-div-4"><span>Test</span></div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:54:46.737

这是我的解决方案：

```
​$('.myDiv').click(function()
{
  var index = $(this).index() + 1;
  $(this).nextAll().each(function(innerIndex)
  {                                               
    $(this).removeClass('my-div-' + (index + innerIndex + 1)).addClass('my-div-' + (index + innerIndex )); 
  });
  $(this).remove();
});​​​​​​​​​​​ 
```

# networking - boost::asio tcp async_accept 处理程序没有被调用，但同步连接工作正常

> ID：13300352
> 
> 赞同：2
> 
> 时间：2012-11-09T00:32:19.900
> 
> 标签：networking, boost, tcp, client, boost-asio

我有一个 TCP 客户端，在 tcp 套接字上调用常规连接可以正常工作。但是，对 async_connect 的调用永远不会触发处理程序。他们都使用几乎相同的代码。区别只是调用 connect 与 async_connect。

标题

```
#ifndef TCPCLIENT_H
#define TCPCLIENT_H

#include <boost/bind.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <boost/asio.hpp>

#include <boost/thread/thread.hpp> 
#include <boost/thread/mutex.hpp>

using boost::asio::ip::tcp;

//How about an interface for outputting errors
class BoostTCPDebugOutputInterface
{
public:
    virtual void outputError(std::string& error)=0;
    virtual void outputDebug(std::string& debug) = 0;
    virtual void outputWarning(std::string& warning) = 0;
    virtual void outputInfo(std::string& info) = 0;

};

class ShutdownCallback
{
public:
    virtual void shutdown() = 0;
};

class BoostTCPConnection 
    : public boost::enable_shared_from_this<BoostTCPConnection>
{
public:
    typedef boost::shared_ptr<BoostTCPConnection> Connection_ptr;

    static Connection_ptr create(boost::asio::io_service& io_service, BoostTCPDebugOutputInterface* output, ShutdownCallback* shutdowner)
    {
        return Connection_ptr(new BoostTCPConnection(io_service, output, shutdowner));
    }

    virtual ~BoostTCPConnection(void);

    void start();
    bool isRunning();
    void setRunning(bool running);

    void enqueueMessageToSend(boost::shared_ptr<std::string>& message);

    boost::asio::ip::tcp::socket& socket()
    {
        return socket_;
    }

    void getQueueSize(unsigned long& tcpToSend, unsigned long& tcpRead);

    void getMessages(std::list< boost::shared_ptr<std::string> >& messages);

protected:
    BoostTCPConnection(boost::asio::io_service& io_service, BoostTCPDebugOutputInterface* output, ShutdownCallback* shutdowner) : socket_(io_service), errorOutput_(output), shutdowner_(shutdowner) {}

    void send();
    void handleWrite(const boost::system::error_code& error,size_t bytes_transferred);
    void handleReceive(const boost::system::error_code& error,size_t bytes_transferred);

    void readMessage();
    void handleReceive();

    std::string hostIP_;
    unsigned int hostPort_;

    boost::asio::io_service io_service_;
    boost::asio::ip::tcp::socket socket_;

    boost::mutex runningMutex_;
    bool running_;

    boost::mutex readMutex_;
    std::list< boost::shared_ptr<std::string> > receivedMsgs_;

    boost::mutex sendMutex_;
    std::list< boost::shared_ptr<std::string> > sendMsgs_;

    BoostTCPDebugOutputInterface* errorOutput_;
    ShutdownCallback* shutdowner_;

    static const size_t HEADERSIZE = 4;
};

class TCPClient
{
public:
    TCPClient();
    virtual ~TCPClient();

    bool start(std::string& hostIP,  unsigned int& hostPort, BoostTCPDebugOutputInterface* output, ShutdownCallback* shutdowner);
    void stop();

    void getQueueSize(unsigned long& tcpToSend, unsigned long& tcpRead);

    void send(boost::shared_ptr<std::string>& message);
    void getMessages(std::list< boost::shared_ptr<std::string> >& messages);

protected:
    void threadAction();

    void handleConnect(const boost::system::error_code& error);

    BoostTCPConnection::Connection_ptr connection_;

    boost::thread_group worker_threads_;

    boost::asio::io_service io_service_;

    BoostTCPDebugOutputInterface* errorOutput_;
    ShutdownCallback* shutdowner_;
};

#endif 
```

CPP 文件

```
#include "TCPClient.h"

#include <iostream>

BoostTCPConnection::~BoostTCPConnection(void)
{
}

void BoostTCPConnection::start()
{
    setRunning(true);
    while (isRunning())
    {

        bool readData(false);
        bool wroteData(false);

        if (!socket_.is_open())
        {
            std::string info("BoostTCPConnection::start() socket is no longer open.  ");
            errorOutput_->outputError(info);
            shutdowner_->shutdown();
            //Stop this NOW!!!
        }

        //Check if there are 4 bytes for packet size 
        //If there are read the size and then do an read to get the packet
        //The handler function should put the packet on a queue.
        boost::asio::socket_base::bytes_readable command(true);

        socket_.io_control(command);
        std::size_t bytes_readable = command.get();

        if ( bytes_readable >= HEADERSIZE )
        {
            readMessage();
            readData=true;
        }

        size_t sendSize(0);
        {
            boost::mutex::scoped_lock(sendMutex_);
            sendSize = sendMsgs_.size();
        }

        if ( sendSize > 0)
        {
            send();
        }

        if ( !readData && !wroteData )
            boost::this_thread::sleep(boost::posix_time::milliseconds(5)); 
    }
}

void BoostTCPConnection::readMessage()
{
    size_t messageSize(0);

    char temp[4]="";
    std::vector<char> header(4);

    boost::system::error_code ec;

    //Read the header which is the size
    size_t read=boost::asio::read(socket_, boost::asio::buffer(header), ec);
    if (ec)
    {       
        std::string info("BoostTCPConnection::readMessage errorcode ");
        info+=ec.message();
        errorOutput_->outputError(info);
        shutdowner_->shutdown();
        //TODO Signal the GUI to stop
        return;
    }
    memcpy((void*)(&messageSize),(void*)header.data(),4);

    std::vector<char> rcvBuffer(messageSize);

    read=boost::asio::read(socket_, boost::asio::buffer(rcvBuffer),ec);
    if (ec)
    {

        std::string info("BoostTCPConnection::readMessage errorcode ");
        info+=ec.message();
        errorOutput_->outputError(info);
        shutdowner_->shutdown();
        //TODO Signal the GUI to stop
        return;
    }

    rcvBuffer.push_back('\0');

    std::string test(rcvBuffer.begin(),rcvBuffer.end());
    boost::shared_ptr<std::string> message(new std::string(rcvBuffer.begin(),rcvBuffer.end()));

    receivedMsgs_.push_back(message);

}

void BoostTCPConnection::getMessages(std::list< boost::shared_ptr<std::string> >& messages)
{

    if (messages.size() > 0)
        messages.clear();

    {
        boost::mutex::scoped_lock lock(readMutex_); 
        receivedMsgs_.swap(messages);
    }
}

void BoostTCPConnection::handleReceive(const boost::system::error_code& error, size_t bytes_transferred)
{

    if (error)
    {
        std::ostringstream oss;
        oss<< "BoostTCPConnection::handleReceive got an error Code of "<<error.value()<<" and message "<<error.message()<<" bytes_transferred = "<<bytes_transferred<<std::endl;
        errorOutput_->outputError(oss.str());
        shutdowner_->shutdown();
        return;
    }

}

bool BoostTCPConnection::isRunning()
{
    boost::mutex::scoped_lock lock(runningMutex_);
    return running_;
}

void BoostTCPConnection::setRunning(bool running)
{
    boost::mutex::scoped_lock lock(runningMutex_);
    running_=running;
}

void BoostTCPConnection::enqueueMessageToSend(boost::shared_ptr<std::string>& message)
{
    boost::mutex::scoped_lock lock(sendMutex_);
    sendMsgs_.push_back(message);
}

void BoostTCPConnection::getQueueSize(unsigned long& tcpToSend, unsigned long& tcpRead)
{
    {
        boost::mutex::scoped_lock lock(sendMutex_);
        tcpToSend=sendMsgs_.size();
    }

    {
        boost::mutex::scoped_lock lock(readMutex_);
        tcpRead=receivedMsgs_.size();
    }

}

void BoostTCPConnection::send()
{
    if (sendMsgs_.empty())
        return;

    boost::shared_ptr<std::string> message;
    {
        message=sendMsgs_.front();
        sendMsgs_.pop_front();
    }

    char temp[4];
    size_t messageSize=message->size();
    memcpy(temp,&messageSize, 4);

    message->insert(0,temp, 4);

    boost::asio::async_write(socket_, boost::asio::buffer(*message),
        boost::bind(&BoostTCPConnection::handleWrite, shared_from_this(),
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred));

}

void BoostTCPConnection::handleWrite(const boost::system::error_code& error,size_t bytes_transferred)
{
    //Success
    if (error.value() == 0) 
        return;

    std::ostringstream oss;
    oss<< "BoostTCPConnection::handleWrite  got an error Code of "<<error.value()<<" and message "<<error.message()<<" with bytes_transferred = "<<bytes_transferred<<std::endl;
    errorOutput_->outputError(oss.str());
    shutdowner_->shutdown();

}

//***************************************************
//              TCPClient
//***************************************************

TCPClient::TCPClient()
{

}

TCPClient::~TCPClient()
{

}

void TCPClient::threadAction()
{
    io_service_.run();
}

bool TCPClient::start(std::string& hostIP,  unsigned int& hostPort, BoostTCPDebugOutputInterface* output, ShutdownCallback* shutdowner)
{
    bool bResult(false);
    errorOutput_=output;
    connection_ = BoostTCPConnection::create(io_service_, output, shutdowner);
    shutdowner_=shutdowner;

    //Use multiple threads to do my bidding
    for( int x = 0; x < 3; ++x )
    {
        worker_threads_.create_thread( 
            boost::bind( &TCPClient::threadAction, this )
            );
    }

    boost::system::error_code ec;
    try
    {
        boost::asio::ip::tcp::endpoint ep( boost::asio::ip::address_v4::from_string(hostIP), hostPort);
        if (connection_)
        {

            connection_->socket().async_connect(ep,
                                                boost::bind(&TCPClient::handleConnect, 
                                                this, boost::asio::placeholders::error));

                            //Synchronous code that works fine
                            //boost::system::error_code ec;         
            //connection_->socket().connect(ep, ec);
            /*if (!ec)
            {
                worker_threads_.create_thread( 
                    boost::bind( &TCPClient::handleConnect, this, ec ));

                bResult=true;
            }
            else
            {
                std::ostringstream oss;
                oss<< "BoostTCPConnection::start has an error "<<ec.message()<<std::endl;
                errorOutput_->outputError(oss.str());

            }*/

        }
    }
    catch (std::exception& e)
    {
        std::ostringstream oss;
        oss<< "BoostTCPConnection::start received the exception "<<e.what()<<std::endl;
        errorOutput_->outputError(oss.str());
    }

    return bResult;
}

void TCPClient::handleConnect(const boost::system::error_code& error)
{

    if (error )
    {
        std::ostringstream oss;
        oss<< "BoostTCPConnection::handleConnect received the error "<<error.message()<<std::endl;
        errorOutput_->outputError(oss.str());
        shutdowner_->shutdown();
        return;
    }

    if (connection_)
        connection_->start();

}

void TCPClient::stop()
{
    if (connection_)
        connection_->setRunning(false);

    io_service_.stop();
    worker_threads_.join_all();
}

void TCPClient::getQueueSize(unsigned long& tcpToSend, unsigned long& tcpRead)
{
    if (connection_)
        connection_->getQueueSize(tcpToSend, tcpRead);
    else
    {
        tcpToSend=0;
        tcpRead=0;
    }
}

void TCPClient::send(boost::shared_ptr<std::string>& message)
{
    if (connection_)
        connection_->enqueueMessageToSend(message);
}

void TCPClient::getMessages(std::list< boost::shared_ptr<std::string> >& messages)
{ 
    if (connection_)
        connection_->getMessages(messages);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T02:10:51.920

问题是您的 io_service 在启动时有一个空队列并立即返回：

```
void TCPClient::threadAction() {
  io_service_.run();
  assert(0); // triggers right away because there's no async operation queued
} 
```

从[停止 io_service 停止工作](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service.html#boost_asio.reference.io_service.stopping_the_io_service_from_running_out_of_work)：

> 当没有更多工作要做时，某些应用程序可能需要阻止 io_service 对象的 run() 调用返回。例如，io_service 可能正在后台线程中运行，该线程在应用程序的异步操作之前启动。**run() 调用可以通过创建 io_service::work 类型的对象来保持运行。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:08:41.237

您需要运行`io_service`for async 处理程序才能触发。

# html - 滚动固定标题

> ID：13300366
> 
> 赞同：-2
> 
> 时间：2012-11-09T00:33:17.033
> 
> 标签：html, css

有没有人知道如何创建这个布局[ms ie page](http://windows.microsoft.com/en-US/internet-explorer/download-ie)。我试图完成的是一个固定的标题，但是当页面最小化时，整个页面可以滚动到右边，包括固定的标题有没有人知道如何做到这一点，这一切都是在 css 中完成的吗？我所能做的就是有一个固定的标题并只滚动内容，但我想在标题宽度不等时滚动标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:57:28.020

如果我正确理解了您的要求，您希望有一个固定的标题并仅滚动内容，并且当页面调整为较小的宽度时，您也希望标题滚动。我对吗？

为此，您应该设置`position: fixed`标题。然后使用@media 查询，您应该指定标头应该失去其**固定**属性的最大宽度。

```
Markup:

<div class="header">
Header content goes here
</div>

Style:

.header{
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

@media (max-width: 500px){
  .header{
     position: relative;
   }
} 
```

# notifications - 设备令牌虽然通知被禁用？

> ID：13300371
> 
> 赞同：2
> 
> 时间：2012-11-09T00:33:37.503
> 
> 标签：notifications, push, device, token

我有一个简短的问题：

我的应用程序收到通知，这很棒。但我很好奇：当我出于测试目的禁用所有类型的通知时，Xcode 的调试控制台仍然会告诉我我的设备令牌。

这是正常行为吗？或者我是否必须告诉应用程序我已关闭所有通知类型，因此它不再要求令牌，因此不再接收通知？

信息将不胜感激...

来自瑞士的问候，

斯蒂芬

# c# - 从 ASP.NET 读取时，更改 Javascript 中控件的属性不生效

> ID：13300378
> 
> 赞同：0
> 
> 时间：2012-11-09T00:34:55.437
> 
> 标签：c#, javascript, asp.net, c#-4.0, asp.net-4.0

我有一个通过javascript代码链接到复选框的按钮，这意味着当复选框被选中时，按钮被启用，反之亦然。按钮的初始值（在 ASP 标记中）被禁用，以及复选框

现在回发时，无论按钮是否启用（在 javascript 中播放后），该按钮在服务器端（这是初始值）被读取为（启用 false）我可以读取最后一个客户端的 .disabled 值ASP.NET（服务器端）中的按钮？如果是这样，我可以将客户端值（按钮的实际值）分配给服务器端的“启用”属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:05:24.150

当回发发生时，所有 asp.net 控件都使用其早期状态进行初始化。这意味着 enabled="false" 值将用于在您的页面回发发生时重新初始化按钮控件。因此，由您的 javascript 代码完成的启用不会在那里产生任何影响。

您必须对代码进行一些调整才能实现这一点。

1.  在您的页面上创建一个隐藏字段
2.  每当您尝试启用/禁用按钮时，在文本框 1/0 或 true/false 中设置一个值。
3.  在你的`page_load ()`

`if(ispostback){ //read the value of the hidden control and set the enabled/disabled property of the button accordingly. }`

# javascript - Slickgrid - 如何在创建网格时添加 CSS？

> ID：13300379
> 
> 赞同：1
> 
> 时间：2012-11-09T00:34:58.370
> 
> 标签：javascript, css, slickgrid

我正在使用 SlickGrid v2.1，我想在**创建时间**期间根据数据源值向我的网格行添加一个 css 类。例如，给定以下代码：

```
var data = [];

var columns = [
    {id: "title", name: "Title", field: "title", width: 120},
    {id: "duration", name: "Duration", field: "duration"}
]

... [data initialization] ...

grid = new Slick.Grid("#myGrid", data, columns, options); 
```

如果它的持续时间单元格值等于 99，我想在一行中添加一个 CSS 类“test”。如何做到这一点？我试图通过将自定义格式化程序添加到持续时间列来做到这一点，但我无法访问网格的画布方法。

我已经在网上搜索了有关此问题的信息，但没有找到任何帮助。任何帮助将非常感激！

最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T11:21:16.457

我最终得到了正确的方法来做到这一点。必须按照此处的说明实现 getItemMetadata：[https](https://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid) ://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid 。

编码：

```
 function getItemMetadata(row){
            if(data[row].duration === 99){
                return { 'cssClasses': 'test' }
            }
        } 
```

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:36:08.590

在您的格式函数中，您可以通过直接引用 DOM 组件来获取行。

```
function YourFormatter(row, cell, value, columnDef, dataContext) {

    //JavaScript
    document.getElementsByClassName('ui-widget-content slick-row')[row].className += ' test';

    //jQuery
    //$('.ui-widget-content.slick-row').eq(row).addClass('test');

} 
```

# json - 在哪里可以找到在 scenejs 中加载 json 模型的任何示例？

> ID：13300381
> 
> 赞同：0
> 
> 时间：2012-11-09T00:35:02.553
> 
> 标签：json, 3d, scenejs

我有一个使用 Blender 导出的带有顶点、uvs、索引等的 JSON 模型。它适用于其他框架。我也想尝试使用 ScenejS。但是找不到使用 SceneJS 实现 JSON 模型的体面示例。如果有人将我重定向到我可以使用 JSON 模型在 SceneJS 上学习和工作的地方，那将会很有帮助。我真的很想知道，有没有在 SceneJS 中使用 JSON 模型的演示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:04:30.273

示例在网站上，以及与 github 上的源代码捆绑在一起（您需要构建）。

[http://scenejs.org/dist/v2.0.0/extr/examples/index.html](http://scenejs.org/dist/v2.0.0/extr/examples/index.html)

此示例显示如何使用 JSON API 定义几何：

[http://scenejs.org/dist/v2.0.0/extr/examples/custom-geometry/index.html](http://scenejs.org/dist/v2.0.0/extr/examples/custom-geometry/index.html)

wiki 上有关几何定义的文档：

[https://github.com/xeolabs/scenejs/wiki/geometry](https://github.com/xeolabs/scenejs/wiki/geometry)

# javascript - Google Chrome 中打包应用程序的沙盒约束范围

> ID：13300382
> 
> 赞同：1
> 
> 时间：2012-11-09T00:35:06.060
> 
> 标签：javascript, google-chrome, sandbox

我希望以下问题足够具体。简短的核心版本是：**Google Chrome 打包应用程序能否将文件写入用户选择的文件夹？** 但是关于我想做的更多细节如下：

我想创建一个 Google Chrome 打包应用程序，但这个应用程序需要能够写入用户选择的文件夹。起初我认为这是不可能的，但后来我发现可以从用户选择的任意文件夹中*读取所有文件，我不确定。*有什么办法也可以写吗？此外，需要跨会话保留所选文件夹的（模糊）路径，以便用户无需在每次运行应用程序时重新选择它。这是可能的，还是这种临时/特定于会话的文件访问？

对我的主要问题的更模糊的骑手：如果上述任何一个由于沙盒而完全不可能，那么是否有任何其他方法可以编写一个没有这些限制的 HTML5/JS 独立应用程序。我想到了 Metro，但我真的更喜欢它是跨平台的（最好是基于 webkit）。

# ruby-on-rails - 检测rails has_many中的变化：通过关系

> ID：13300384
> 
> 赞同：11
> 
> 时间：2012-11-09T00:35:09.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many-through

我有一个具有多个 has_many 和 has_many 的模型：通过模型关系。例如，在我的 User 类中，我有：

has_many :languages，通过: :profile_languages

我希望能够使用“User.changes”函数检测何时添加或删除这些属性，该函数返回一个在使用 User.language_ids= 函数调用时已更改的属性数组。

有没有其他人尝试过这样做，或者有这方面的经验？

有关 ActiveModel 更改功能的信息：http: [//api.rubyonrails.org/classes/ActiveModel/Dirty.html](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)

编辑：根据要求，这就是我正在做的事情。

在分配用户的属性之后并在保存之前，我正在查看从 .changes 返回的所有值，以便在外部日志中记录所有更改。

所以如果我打电话给 u.name = "new name"

然后 u.changes 返回 {name: ['old name', 'new name']}

但是，当我向用户传递一堆语言 ID 时，例如

u.language_ids = [4,5]

然后创建了许多 ProfileLanguage 模型，并且 u.changes 哈希留空。

我试图在 ProfileLanguage 模型中创建一些回调，这些回调将手动创建某种哈希，但我想知道这是否确实是最好的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T16:25:13.750

我现在要使用的有点脏的解决方案是向 has_many 函数添加回调：

```
has_many :languages, through: :profile_languages, 
        :after_add => :language_add, 
        :before_remove => :language_remove 
```

并将此信息添加到自定义哈希中，当我查看 .changes 函数时，将在保存配置文件时检查该哈希。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-31T13:13:49.563

我遇到了同样的问题，我试图检查更新模型时是否创建或删除了新关系。

我尝试使用`model.relationship.any? { |a| a.changed? }`，但这仅检测到现有对象的更改，因此它不适用于创建和删除关系。

在寻找解决方案时，我发现这篇非常简短的文章解决了我们的问题：[link](https://coderwall.com/p/xvpafa/rails-check-if-has_many-changed)

使用`model.select { |a| a.new_record? || e.marked_for_destruction? }.any?`我已经能够获取所有正在创建或销毁的记录。

结合这一点，`a.changed?`我可以得到我关系中的每一个变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-01T08:59:30.770

我知道您正在寻求实现基于文本的更改日志，但我建议您通过`paper_trail`gem 研究完整的对象版本控制，以此作为实现您想要的方法。它[根据他们的 README 提供了这个功能](https://github.com/airblade/paper_trail#4b-associations)：

> PaperTrail 可以恢复三种类型的关联：Has-One、Has-Many 和 Has-Many-Through。为此，您需要在安装时使用 rails generate paper_trail:install --with-associations 选项或手动创建一个 version_associations 表。当关联记录发生更改时，PaperTrail 将在该表中存储附加信息以关联关联版本和模型版本。

我没有使用 的 has-many-through 特性`paper_trail`，但是我已经将它用于没有关联的对象，并且发现它非常好并且易​​于实现。

要制作文本文件日志以及此数据库纸迹，您可以在回调中使用[paper_trail 的差异功能。](https://github.com/airblade/paper_trail#3c-diffing-versions)`after_save`

# java - JPA：如何使用 OneToMany 注释将新项目添加到列表中

> ID：13300386
> 
> 赞同：3
> 
> 时间：2012-11-09T00:35:17.963
> 
> 标签：java, jpa, one-to-many, cascading

我有 2 张桌子。一个叫Employee，一个叫Phones，一个员工可以有多个Phone。

员工等级：

```
@Entity
@Table(name = "employee")
public class Employee {

    @Id
    @Column(name = "id", unique = true, nullable = false)
    @GeneratedValue(strategy = javax.persistence.GenerationType.IDENTITY)
    private Integer id;

    @Column(name = "name", unique = true, nullable = false, length = 25)
    private String name;

    @OneToMany(mappedBy="owner", fetch= FetchType.EAGER, orphanRemoval=true, cascade={CascadeType.ALL})
    private List<Phone> phones; 
```

电话类：

```
@Entity
@Table(name = "phone")
public class Phone {

    @Id
    @Column(name = "id", unique = true, nullable = false)
    @GeneratedValue(strategy = javax.persistence.GenerationType.IDENTITY)
    private long id;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "employee_id")
    private Employee owner;

    @Column(name = "phone_type", nullable = false, length = 25)
    private String phoneType;

    @Column(name = "phone_number", nullable = false, length = 25)
    private String phoneNumber; 
```

假设我想为现有员工添加电话。我正在这样做：

```
Phone phone = new Phone();
phone.setOwner(employee);
phone.setPhoneNumber("999-555-0001");
phone.setPhoneType("home");
employee.getPhones().add(phone);        
dao.merge(employee); // Is it possible to get this to both persist new phones and update existing phones that were changed? 
```

鉴于 phoneSet 中的某些电话已被保留，我不确定如何合并新电话。我必须手动保留每部手机吗？一个例子将不胜感激。我研究了级联，但我似乎无法让它工作。我收到的错误是：java.lang.IllegalStateException：实体副本已分配给不同的实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:44:22.717

我认为问题可能出在 Phone 类中的连接列注释中。您正在指定一个连接列，`employee_id`但在 Employee 类中`@Column`，id 字段的注释映射到该列`id`。

尝试更改/同步连接列：

```
@ManyToOne(fetch = FetchType.EAGER, targetEntity=your.package.here.Employee.class)
@JoinColumn(name = "id")
private Employee owner; 
```

或者

**雇员.java**

```
@Id
@Column(name = "employee_id", unique = true, nullable = false)
@GeneratedValue(strategy = javax.persistence.GenerationType.IDENTITY)
private Integer id; 
```

**电话.java**

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "employee_id", targetEntity=your.package.here.Employee.class)
private Employee owner; 
```

# matlab - 如何在matlab中用exp找到函数的临界点

> ID：13300399
> 
> 赞同：0
> 
> 时间：2012-11-09T00:36:49.957
> 
> 标签：matlab

快速提问，我希望有人可以在这里帮助我。我试图找到函数的所有关键点：

```
f(x,y) = 0.05 * (1-12x+20x^2) * (1-7y+10y^2) * exp(-(x^2/6+y^2/3)) 
```

当我照常做`fx = diff(f(x,y),x)`然后`fy = diff(f(x,y),y)`调用`[xcr,ycr] = solve(fx,fy)`它时，只会给我一个解决方案……我知道还有更多。

这可能是因为有无数种解决方案，而这就是其中之一吗？有没有解决的办法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T01:28:55.583

你没有分享你的确切代码，所以我不知道你做了什么来得到一个解决方案，但你可以使用符号工具箱来解决这只小狗：

```
% # Define the function f(x, y)
syms x y
f = 0.05 * (1 - 12*x + 20*x^2) * (1 - 7*y + 10*y^2) * exp(-(x^2 / 6 + y^2/3));

% # Find the partial derivatives
f_x = diff(f, x);
f_y = diff(f, y);

% # Find the critical points
[xcr, ycr] = solve(f_x, f_y);
p = double([xcr(:), ycr(:)]);

% # Discard the complex solutions
p(imag(p(:, 1)) > eps, :) = [];
p(imag(p(:, 2)) > eps, :) = [];
p = real(p);

xcr = p(:, 1)
ycr = p(:, 2) 
```

这实际上产生了 13 个解决方案：

```
xcr =             ycr =

    0.5000            0.2000
    0.5000            0.5000
    0.1000            0.2000
    0.1000            0.5000
    2.6133            1.9238
   -2.3113            1.9238
    0.2980            1.9238
    2.6133           -1.5711
   -2.3113           -1.5711
    0.2980           -1.5711
    2.6133            0.3474
   -2.3113            0.3474
    0.2980            0.3474 
```

# java - 如何抑制java xpath错误

> ID：13300402
> 
> 赞同：1
> 
> 时间：2012-11-09T00:36:55.853
> 
> 标签：java, xml, xpath, xml-parsing

当我运行下面的代码时，我收到：

```
[Fatal Error] :1:1: Content is not allowed in prolog.
org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog. 
```

我知道字符串`html`不允许内容，但我想禁止所有错误。

```
import java.io.ByteArrayInputStream;
import java.io.InputStream;

import org.w3c.dom.*;
import org.xml.sax.InputSource;

import javax.xml.xpath.*;
import javax.xml.parsers.*;
public class Test {

    public static void main(String[] args){
        String html="---<html><div id='teste'>Teste</div><div id='ola'>Ola tudo ebm!</div></html>";

        try{

            XPath xpath = XPathFactory.newInstance().newXPath();
            String xpathExpression = "//div[@id='ola']";

            InputStream is = new ByteArrayInputStream(html.getBytes()); 
            InputSource inputSource = new InputSource(is);

            NodeList nodes = (NodeList) xpath.evaluate
            (xpathExpression, inputSource, XPathConstants.NODESET);

            int j = nodes.getLength();

            for (int i = 0; i < j; i++) {
                System.out.println(nodes.item(i).getTextContent());
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:17:04.740

最好的办法是创建自己的 InputStream 版本，将其包裹在 ByteArrayInputStream 周围，以便在数据到达 xpath.evaluate 之前对其进行清理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:17:59.640

首先，XML 与 HTML 不同，XPath 作用于 XML 数据模型。

为了解决这个问题，您必须找到解析输入流的其他方法，因为当您解析该字符串时，调用的解析器是 XML 解析器，而 XML 解析器没有“忽略错误”选项定义。只允许有效输入；解析器的规范说格式错误的输入会导致致命异常。

因此，另一种选择是使用不同的解析器。那里有几个。例如，您可以使用[JTidy](http://jtidy.sourceforge.net/)。尽管它将 HTML 解析为 HTML DOM，但您可以使用一点胶水代码将其转换为适用于解析。请参阅[问题 3361263，在 Java 中使用 XPath 查询 HTML 的库](https://stackoverflow.com/questions/3361263/library-to-query-html-with-xpath-in-java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T02:50:27.483

我试图操纵你的 html，一切都对我有用。我确认当我尝试 XpathEvaluate 时我也会有一个空值，但这就是我绕过它的方式:)

```
 try {

        Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));

        Integer length = doc.getElementsByTagName("div").getLength();

        if(length != null){

            for(int i=0;i<length;i++){

                if(doc.getElementsByTagName("div").item(i).getAttributes().item(0).getTextContent().equals("ola")){
                    System.out.println(doc.getElementsByTagName("div").item(i).getTextContent());
                }

            }

        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

控制台输出：Ola tudo ebm!

**doc.getElementsByTagName("div").item(i).getAttributes().item(0) --> 是文档中'id'属性的引用。我通过 .getText() 方法检索此元素的文本内容。**

我知道这不是最有效的方法，但它有效:)

希望对你有帮助

# java - 授予对通过亚马逊 s3 中的 PutObjectRequest 上传的对象的读取权限

> ID：13300403
> 
> 赞同：5
> 
> 时间：2012-11-09T00:36:57.277
> 
> 标签：java, amazon-s3, amazon-web-services

我正在通过 java 应用程序将文本文件上传到 Amazon s3 存储桶。我想为每个人设置读取该文件的权限。有谁知道如何做到这一点 ？或引导我到一些适当的资源？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-09T00:42:44.563

您可以创建使所有资源（或与通配符匹配的资源）可用的存储桶策略。

单击 aws S3 控制台上的存储桶属性，然后将存储桶策略编辑为：

```
{
    "Version": "2008-10-17",
    "Statement": [
        {
            "Sid": "auniqueid",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::bucket/*"
        }
    ]
} 
```

参数中`bucket`的`Resource`位置是您的存储桶名称。

您还可以通过 Java API 为特定文件设置公共权限：

```
PutObjectRequest por = new PutObjectRequest(bucketName, key, file);
por.setCannedAcl(CannedAccessControlList.PublicRead);
s3.putObject(por); 
```

# wpf - 嵌套数据上下文

> ID：13300420
> 
> 赞同：3
> 
> 时间：2012-11-09T00:38:48.757
> 
> 标签：wpf, binding, datacontext, nested

我有 2 嵌套`DataContexts`在以下代码（`DataContext`和`ItemsSource`）中：

```
<TabItem Header="Something" Name="myTabItemName" d:DataContext="{Binding myViewModel}">
    <Grid>
        <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding muObservableCollection}" Name="myDataGridName" HeadersVisibility="Column">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Foo 01" Binding="{Binding Foo_01}" />
                <DataGridTextColumn Header="Foo 02" Binding="{Binding Foo_02}" />
                <DataGridTemplateColumn Header="My custom combobox">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <!-- Here I want to bind back to 'myViewModel's' myProperty. I've tried this way: -->
                            <ComboBox ItemsSource="{Binding Path=myProperty, RelativeSource={RelativeSource AncestorType={x:Type TabItem}}}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</TabItem> 
```

我想分配`myViewModel`（回）给`ComboBox's` `DataContext`. 问题是`ComboBox`已经“覆盖”`DataContext`了：

```
<DataGrid ItemsSource="{Binding muObservableCollection}" ... > 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:46:49.817

```
<ComboBox ItemsSource="{Binding Path=DataContext.myProperty, RelativeSource={RelativeSource AncestorType={x:Type TabItem}}}" /> 
```

应该做的伎俩。但是我想指出，您想要的没有意义：您将 TabItem 绑定到 Order 实例，将 DataGrid 绑定到其 Orderlines，为什么要从 DataGrid 中的 Order 中获得组合框？所有列将显示相同的值，如果您更改一行，所有行的值都会更改。

我自己也遇到过几次这种情况，我需要访问更高的级别（由于重构与命令相结合），但这种情况相当罕见。

# xcode - xcode 4.5.2 无法构建简单的 c++ 项目 (iosfwd)

> ID：13300424
> 
> 赞同：2
> 
> 时间：2012-11-09T00:39:01.230
> 
> 标签：xcode

我已经将 Xcode 升级到 4.5.2 我已经创建了简单的 c++ 项目并且没有改变任何东西。只有一个文件 main.cpp 包含以下代码

```
#include <iostream>

int main(int argc, const char * argv[])
{

// insert code here...
std::cout << "Hello, World!\n";
return 0;
} 
```

但是当我构建项目时，在文件 iosfwd 中出现一个错误

```
In file included from /Users/abhineet/Github/Wiretap/Wiretap/main.cpp:9:
In file included from   /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/ c++/v1/iostream:38:
In file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/ios:215:
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/iosfwd:90:10: fatal error: 'wchar.h' file not found 
```

我不知道为什么会出现这个错误，但是当我在 Xcode 4.5 中运行它时，没有错误

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-16T22:40:31.170

添加***使用命名空间标准；***#include 的正下方

# java - 图像的 JavaNullPointer

> ID：13300426
> 
> 赞同：0
> 
> 时间：2012-11-09T00:39:13.700
> 
> 标签：java, slick2d

我的播放器类有以下代码：

```
public class Player {

private static Image front;

int posX = 400;
int posY = 300;

public void player() throws SlickException{
    init(null, null);
    render(null, null, null);
    update(null, null, (Integer) null);

}

public void init(GameContainer gc, StateBasedGame sbg) throws SlickException {
    front = new Image("res/steveFront.png");
}

public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException {
    front.draw(posX, posY);
}

public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException {

} 
```

}

这是我的主要游戏课程：

```
public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException {
    map.render(gc, sbg, g);
    player.render(gc, sbg, g);
} 
```

当我运行代码时，它会调用 javanullpointer 异常

```
public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException {
    front.draw(posX, posY);
} 
```

为什么这样做？几个小时以来，我一直试图弄清楚这一点。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:49:04.747

通常这意味着您为图像提供的路径是错误的

```
 front = new Image("res/steveFront.png") 
```

如果这是在您的 src 文件夹中，则必须使用 getResource

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:56:03.707

尝试使变量“前”不是静态的

# c - 不了解 ARM 硬件堆栈（使用 IAR）

> ID：13300427
> 
> 赞同：4
> 
> 时间：2012-11-09T00:39:13.850
> 
> 标签：c, arm, microcontroller, microprocessors, iar

我目前正在使用 IAR Embedded Workbench 为 NXP LPC2378 micro 进行开发。我想我遇到了我的 IRQ 和 CSTACK 需要更大的问题，因为 CPU 不断崩溃，我注意到这些区域会“溢出”到周围的内存区域。我想我真的不明白这些和其他内存区域的用途是什么？我使用为 ISR 保留 RAM 的 RTOS (CMX)，但这似乎是为了不同的东西。

当我使用 RTOS 时，IRQ_STACK、CSTACK、SVC_STACK、FIQ_STACK、UND_STACK 和 ABT_STACK 是什么，或者它们是完全独立的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T01:58:59.103

LPC23XX 有几种不同的模式。每种模式都有自己的堆栈。诸如中断之类的事情涉及通过在切换到不同模式之前保存上下文寄存器（我相信是当前模式的堆栈）来切换模式等。

您正在使用 RTOS 并不会改变这些堆栈的用途，但有时 RTOS 可能对它们有要求（您可能想查找 CMX）。

*   `IRQ_STACK`- 中断 (IRQ) 模式堆栈。
*   `CSTACK`- 用户和系统模式堆栈。这是大多数时候用于代码执行的常规堆栈。
*   `SVC_STACK`- 主管模式堆栈。有些指令只能在 SVC 模式下运行。IIRC CPU 在此模式下启动，并在初始设置完成后退出。
*   `FIQ_STACK`- FIQ 中断模式堆栈。快速中断 (FIQ) 可以在 IRQ 期间发生 - 它们就像更高优先级的 IRQ。FIQ 和 IRQ 在 FIQ 中被禁用。
*   `UND_STACK`未定义的指令模式堆栈。
*   `ABT_STACK`中止模式堆栈，用于数据中止等。（您可以将处理程序设置为在触发中止时运行。）

我不熟悉 IAR，但如果这些是尺寸，那么它们相当于`UND_Stack_Size`, `SVC_Stack_Size`, `ABT_Stack_Size`, `FIQ_Stack_Size`, `IRQ_Stack_Size`, 和`USR_Stack_Size`uVision。`ISR_Stack_Size`或等价物应该是前五个的总和。

请记住，堆栈溢出会使坏事发生。你很可能需要让你的堆栈更大，但就像我说的，你可能需要查看最小值。CMX 所需的值。

# php - 如何根据用户在视图中的输入逐步探索控制器中的数组？

> ID：13300429
> 
> 赞同：0
> 
> 时间：2012-11-09T00:39:23.777
> 
> 标签：php, javascript, ajax

全部，

我正在使用 WAMPserver 构建一个小型网站。我的网站遵循 MVC 模式。有一次，我在控制器端生成了一个字符串数组。我想向用户显示每个数组元素，并且仅在用户单击视图上的按钮后才显示下一个项目。

我需要在每个步骤中捕获这些点击的信息，因此我不想将整个数组发送到浏览器——而且它可能会使事情变得太慢。

我该如何做到这一点？如果我将数组`foreach`放在控制器端的循环中，我只会将最后一个元素发送到视图。如果我尝试`foreach`使用其值在 内部更改的布尔值来控制`foreach`，我不知道如何根据用户的操作更改布尔值。

直觉上我想这需要一个 Ajax 调用，但我对 Ajax 的经验很少，所有这些都是从服务器中提取数据的。

或者，我是否应该尝试将 Javascript`submit()`函数与按钮单击事件相关联并使用它来更改`$_POST`变量（例如，作为布尔值，然后我将`foreach`在服务器上更改回内部）？

还是我想错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:02:08.390

因此，您有一个包含多个项目的数组，并且您希望用户在跟踪他们的点击时一次阅读它们？

不确定您使用的是什么框架，但大多数控制器方法都允许您使用参数。所以控制器看起来像这样：

```
class ItemController {
    public function view($id = 0) {
        DB::increment('counter to increment');
        $array = DB::get('db query here or something');
        View::render($array[$id]);
    }
} 
```

然后用户将依次访问`domain.com/item/view/0`, `domain.com/item/view/1`, `domain.com/item/view/2`。（您将通过分页提供链接）

发生了什么，您的路由器会将`request`of路由`domain.com/item/0`到`domain.com/{controller}/{method}/{id}`，因此它们有效地转到同一个控制器，但根据给定的*参数*呈现不同的视图。

**编辑**：忘记将方法放在 URI 中

不需要JS，希望有帮助。

# java - 单击鼠标时程序不执行功能

> ID：13300442
> 
> 赞同：3
> 
> 时间：2012-11-09T00:42:14.743
> 
> 标签：java, swing, mouse, awt, mouseclick-event

当鼠标左键单击时，水平相邻的颜色应该交换，右键单击时，垂直相邻的颜色应该交换。当我单击任一按钮时，什么都没有发生。

有问题的代码：

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JPanel;

import sun.java2d.loops.DrawRect;

import java.awt.event.MouseListener;
import java.awt.event.MouseEvent;

public class Board extends JPanel implements MouseListener
{
//instance variables
private int width;
private int height;
private Block topLeft;
private Block topRight;
private Block botLeft;
private Block botRight;

public Board()  //constructor
{
    width = 200;
    height = 200;
    topLeft=new Block(0,0,width/2-10,height/2-10,Color.RED);
    topRight=new Block(width/2,0,width/2-10,height/2-10,Color.GREEN);
    botLeft=new Block(0,height/2,width/2-10,height/2-10,Color.BLUE);
    botRight=new Block(width/2,height/2,width/2-10,height/2-10,Color.YELLOW);
    setBackground(Color.WHITE);
    setVisible(true);
    //start trapping for mouse clicks
    addMouseListener(this);
}

//initialization constructor
 public Board(int w, int h)  //constructor
 {
    width = w;
    height = h;
    topLeft=new Block(0,0,width/2-10,height/2-10,Color.RED);
    topRight=new Block(width/2,0,width/2-10,height/2-10,Color.GREEN);
    botLeft=new Block(0,height/2,width/2-10,height/2-10,Color.BLUE);
    botRight=new Block(width/2,height/2,width/2-10,height/2-10,Color.YELLOW);
    setBackground(Color.WHITE);
    setVisible(true);
    //start trapping for mouse clicks
    addMouseListener(this);
}

public void update(Graphics window)
{
    paint(window);
}

public void paintComponent(Graphics window)
 {
super.paintComponent(window);
topRight.draw(window);
topLeft.draw(window);
botRight.draw(window);
botLeft.draw(window);

}

 public void swapTopRowColors()
{
Color temp = topLeft.getColor();
topLeft.setColor(topRight.getColor());
topRight.setColor(temp);
repaint();
}

public void swapBottomRowColors()
{
   Color temp = botLeft.getColor();
   botLeft.setColor(botRight.getColor());
   botRight.setColor(temp);
   repaint();
}

public void swapLeftColumnColors()
{
   Color temp = botLeft.getColor();
   botLeft.setColor(topLeft.getColor());
   topLeft.setColor(temp);
   repaint();
}

public void swapRightColumnColors()
{
   Color temp = botRight.getColor();
   botRight.setColor(topRight.getColor());
   topRight.setColor(temp);
   repaint();
}

public void mouseClicked(MouseEvent e)
{
    int mouseX=e.getX();
    int mouseY=e.getY();
    int mouseButton = e.getButton();

    if(mouseButton==MouseEvent.BUTTON1)     //left mouse button pressed
    {
        if(mouseX>=topLeft.getX() && mouseX<=topLeft.getWidth() && mouseY>=topLeft.getY() && mouseY<=topLeft.getY())
        {
            this.swapTopRowColors();
        }

        else if(mouseX>=topRight.getX() && mouseX<=topRight.getWidth() && mouseY>=topRight.getY() && mouseY<=topRight.getY())
        {
            this.swapTopRowColors();
        }

        else if(mouseX>=botLeft.getX() && mouseX<=botLeft.getWidth() && mouseY>=botLeft.getY() && mouseY<=botLeft.getY())
        {
            this.swapBottomRowColors();
        }

        else if(mouseX>=botRight.getX() && mouseX<=botRight.getWidth() && mouseY>=botRight.getY() && mouseY<=botRight.getY())
        {
            this.swapBottomRowColors();
        }

    }
    //right mouse button pressed
    if(mouseX>=topLeft.getX() && mouseX<=topLeft.getWidth() && mouseY>=topLeft.getY() && mouseY<=topLeft.getY())
    {
        this.swapLeftColumnColors();
    }

    else if(mouseX>=topRight.getX() && mouseX<=topRight.getWidth() && mouseY>=topRight.getY() && mouseY<=topRight.getY())
    {
        this.swapRightColumnColors();
    }

    else if(mouseX>=botLeft.getX() && mouseX<=botLeft.getWidth() && mouseY>=botLeft.getY() && mouseY<=botLeft.getY())
    {
        this.swapLeftColumnColors();
    }

    else if(mouseX>=botRight.getX() && mouseX<=botRight.getWidth() && mouseY>=botRight.getY() &&    mouseY<=botRight.getY())
    {
        this.swapRightColumnColors();
    }

}

public void mouseEntered(MouseEvent e) { }
public void mouseExited(MouseEvent e) { }
public void mousePressed(MouseEvent e) { }
public void mouseReleased(MouseEvent e) { }

//toString
} 
```

以及启动它的代码：

```
import javax.swing.JFrame;

public class BlockGame extends JFrame
{
private static final int WIDTH = 800;
private static final int HEIGHT = 600;

public BlockGame()
{
    super("Board");
    setSize(WIDTH,HEIGHT);

    getContentPane().add(new Board(500,500));

    setVisible(true);
}

public static void main( String args[] )
{
    BlockGame run = new BlockGame();

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T03:26:23.233

你有两个问题...

```
mouseX >= topLeft.getX() && mouseX <= topLeft.getWidth() 
```

这是检查鼠标位置是否大于或等于块 x 位置（这很好）并且小于或等于它的宽度....？因此，如果我有一个 100 宽度为 10 的框，并且我单击了 105，那么此检查将失败。

```
105 >= 100 && 105 < 10 // .... ??? 
```

然后是这个...

```
mouseY >= topLeft.getY() && mouseY <= topLeft.getY() 
```

花点时间检查最后一个条件...您必须完全单击块的顶部边缘才能使此条件为真。

我会做两件事之一。

要么我会编写一个对任何块执行此计算的方法......

```
public boolean contains(Point p, Block block) {
    return p.x >= block.getX() && p.x <= block.getX() + block.getWidth() && 
            p.y >= block.getY() && p.y <= block.getY() + block.getHeight();
} 
```

这样，如果代码中有错误，它只会在一个地方......

或者（最好），我会扩展`Block`from [`Rectangle`](http://docs.oracle.com/javase/7/docs/api/java/awt/Rectangle.html)，这样我就可以简单地使用该`contains`方法......

```
public class Block extends Rectangle {

    private Color color;

    public Block(int x, int y, int width, int height, Color color) {
        super(x, y, width, height);
        this.color = color;
    }

    public void draw(Graphics2D g) {
        g.setColor(color);
        g.fill(this);
    }

    public Color getColor() {
        return color;
    }

    public void setColor(Color color) {
        this.color = color;
    }
} 
```

在你的鼠标点击事件处理程序中......

```
if (topLeft.contains(e.getPoint()) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:51:07.053

*   我认为你在这里混淆了屏幕和窗口坐标： getX() 返回**相对于源组件的**鼠标坐标，在这种特殊情况下这可能不是你想要的......
*   打印一行以检查程序是否实际到达 mouseClicked() 函数。可能想将它绑定到 mousePressed()，然后查看它是否注册。
*   你有 4 个 if 语句（if、else if、else if、else if），但是当这 4 个失败时没有最终语句，允许程序默默地通过所有这些选项。您显然不希望有任何其他选择，但这可能就是发生的情况 - 在那里打印一行带有一些调试输出（X，Y，源组件），您可能会学到很多东西。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:57:59.120

最后的代码是这样的：

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JPanel;

//import sun.java2d.loops.DrawRect;

import java.awt.event.MouseListener;
import java.awt.event.MouseEvent;

public class Board extends JPanel implements MouseListener
{
//instance variables
private int width;
private int height;
private Block topLeft;
private Block topRight;
private Block botLeft;
private Block botRight;

public Board()  //constructor
{
    width = 200;
    height = 200;
    topLeft=new Block(0,0,width/2-10,height/2-10,Color.RED);
    topRight=new Block(width/2,0,width/2-10,height/2-10,Color.GREEN);
    botLeft=new Block(0,height/2,width/2-10,height/2-10,Color.BLUE);
    botRight=new Block(width/2,height/2,width/2-10,height/2-10,Color.YELLOW);
    setBackground(Color.WHITE);
    setVisible(true);
    //start trapping for mouse clicks
    addMouseListener(this);
}

  //initialization constructor
public Board(int w, int h)  //constructor
{
    width = w;
    height = h;
    topLeft=new Block(0,0,width/2-10,height/2-10,Color.RED);
    topRight=new Block(width/2,0,width/2-10,height/2-10,Color.GREEN);
    botLeft=new Block(0,height/2,width/2-10,height/2-10,Color.BLUE);
    botRight=new Block(width/2,height/2,width/2-10,height/2-10,Color.YELLOW);
    setBackground(Color.WHITE);
    setVisible(true);
    //start trapping for mouse clicks
    addMouseListener(this);
}

public void update(Graphics window)
{
    paint(window);
}

 public void paintComponent(Graphics window)
 {
super.paintComponent(window);
topRight.draw(window);
topLeft.draw(window);
botRight.draw(window);
botLeft.draw(window);

}

  public void swapTopRowColors()
 {
Color temp = topLeft.getColor();
Color temp2 = topRight.getColor();
topRight.setColor(temp);
topLeft.setColor(temp2);

repaint();
}

public void swapBottomRowColors()
{
   Color temp = botLeft.getColor();
   Color temp2 = botRight.getColor();
   botLeft.setColor(temp2);
   botRight.setColor(temp);
   repaint();
 }

public void swapLeftColumnColors()
{
   Color temp = botLeft.getColor();
   Color temp2 = topLeft.getColor();
   botLeft.setColor(temp2);
   topLeft.setColor(temp);
   repaint();
}

public void swapRightColumnColors()
 {
   Color temp = botRight.getColor();
   Color temp2 = topRight.getColor();
   botRight.setColor(temp2);
   topRight.setColor(temp);
   repaint();
 }

public void mouseClicked(MouseEvent e)
{
    int mouseX=e.getX();
    int mouseY=e.getY();
    int mouseButton = e.getButton();
    //System.out.println("User clicked at " + e.getX() + "," + e.getY());
    if(mouseButton == MouseEvent.BUTTON1)       //left mouse button pressed
    {
        if(((mouseX>= 0 && mouseX <= topLeft.getWidth()-1) && (mouseY>= 0 && mouseY <= (topLeft.getHeight()-1))) || ((mouseX>= topRight.getX() && mouseX <= (topRight.getX()+topRight.getWidth())-1) && (mouseY>= 0 && mouseY <= (topRight.getY()+topRight.getHeight()-1))))
        {
            this.swapTopRowColors();
        }
        else
        {
            this.swapBottomRowColors();
        }

    }
    //right mouse button pressed
    else
    {
        if(((mouseX>= 0 && mouseX <= topLeft.getWidth()-1) && (mouseY>=0 && mouseY <=  (topLeft.getHeight()-1))) || ((mouseX>= botLeft.getX() && mouseX <= (botLeft.getX()+botLeft.getWidth())-1) && (mouseY>= 0 && mouseY <= (botLeft.getY()+(botLeft.getHeight()-1)))))
    {
        this.swapLeftColumnColors();
    }
        else
        {
            this.swapRightColumnColors();
        }

    }

    System.out.println(botLeft.getHeight() + ", " + botLeft.getY());

}

public void mouseEntered(MouseEvent e) {

}
public void mouseExited(MouseEvent e) { }
public void mousePressed(MouseEvent e) { }
public void mouseReleased(MouseEvent e) { }

 //toString
} 
```

它工作得很好。有一个颜色问题来自我没有发现但已修复的复制/粘贴错误。

# perl - MoveRight 方法不起作用

> ID：13300449
> 
> 赞同：1
> 
> 时间：2012-11-09T00:43:19.107
> 
> 标签：perl, perl-module, win32ole

我想逐个字符地选择一个单词，除非遇到空格。我收到一个错误，因为“如果没有包或对象引用，就无法调用方法“MoveRight””。请帮我。提前致谢。下面是我的代码：

```
#!/usr/bin/perl 
use strict;
use warnings; 
use Win32::OLE qw(in); 
use Win32::OLE::Const 'Microsoft Word';

my $selection;

my $word = new Win32::OLE 'Word.Application','' or die "Cannot start
word!\n";

$word->{visible}=0;  

my $doc = $word->Documents->Open( 'C:\\PerlScripts\\myTest.docx' );

$selection = $word->Selection;

$selection->Find->{Text} = "hi";

$selection->Find->{Forward} = 'true';

$selection->Find->{MatchWildcards} = 'true';

$selection->Find->{MatchPrefix} = 'true';

if ( $selection->Find->Execute ) {
print "The search text was found\n";
while($selection->Next ne " ")
{
    $selection = $selection->MoveRight({Unit => wdCharacter, Count => 1, Extend => wdExtend}) ;
}   
print $selection->{Text};
} else {       
print "The search text was not found\n";
} 
```

# java - 如何修复检查 Scanner 是否有另一行输入的循环？

> ID：13300454
> 
> 赞同：1
> 
> 时间：2012-11-09T00:44:17.753
> 
> 标签：java, file-io, io

我的文件程序工作正常。它使用我提交的内容创建一个 txt 文件。但是，为什么我的控制台会无限显示“真”？

![在此处输入图像描述](../Images/3d10883cbf40f481f1ce21de8b4b4226.png)

```
 Scanner input = new Scanner(System.in);
        System.out.println("What would you like the file to be called?");
        String output = input.nextLine();

        if (!output.contains(".txt")) {
            output += ".txt";
        }

        PrintWriter out = new PrintWriter(output);
        System.out.println("What would you like to print to the file? ");
        String fileContents = input.nextLine();
        out.print(fileContents);
        out.close();

        Scanner fromFile = new Scanner(new File(output));

        System.out.println("The File " + output + " contains: ");

        while (fromFile.hasNextLine()) {
            System.out.println(fromFile.hasNextLine());
        }

        System.out.println("Finished reading and writing from file.. ");
        input.close();
        fromFile.close();

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T00:46:45.270

您实际上并没有检索下一行

```
while (fromFile.hasNextLine()) {
    System.out.println(fromFile.hasNextLine());
} 
```

您的打印语句只是重新检查它是否有换行符。我想你的意思是

```
System.out.println(fromFile.nextLine()); 
```

通过调用 nextLine() 你告诉 Scanner 你想要消耗所有字符直到下一个`'\n'`（换行符）字符。有关详细信息，请参阅[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T00:46:46.077

您实际上需要在循环内获取一行，否则它将报告有下一行（第一行）。

# vb.net - FILE 不是 FILE Visual Basic 的成员

> ID：13300457
> 
> 赞同：0
> 
> 时间：2012-11-09T00:44:38.420
> 
> 标签：vb.net

> 错误 1“JonesA06HO”不是“JonesA06HO”的成员。C:\Users\Aaron\Documents\Visual Studio 2008\Projects\JonesA06HO - Copy\JonesA06HO\My Project\Application.Designer.vb 35 27 JonesA06HO

```
<Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
        Protected Overrides Sub OnCreateMainForm()
            **Me.MainForm = Global.JonesA06HO.JonesA06HO**
        End Sub 
```

我在我的 VB 应用程序中收到 JonesA06HO 不是 JonesA06HO 成员的错误消息。有人可以告诉我如何解决这个问题吗？上面的代码片段似乎是一个问题。我已将 Me.MainForm 部分加粗 - 我需要做什么才能使 JonesA06HO 文件正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:38:47.797

```
 <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
        Protected Overrides Sub OnCreateMainForm()
            Me.MainForm = JonesA06HO.BillingForm 
```

文件必须引用表格。所以即使 JonesA06HO 确实存在；它需要一个 . 以及表单本身的名称。

如果有人偶然发现这一点；我希望它能帮助他们。

# c# - 围绕 DateTimeOffset 和 TimeZones 的混淆

> ID：13300458
> 
> 赞同：0
> 
> 时间：2012-11-09T00:44:40.013
> 
> 标签：c#, sql, datetime, timezone, datetimeoffset

我目前正在开发一个将在多个不同国家和时区使用的 .net 应用程序。后端数据库是sql server。

我一直在研究 datetime、datetime2 和 datetimeoffset 数据类型，我有点困惑。

一些例子可能有助于我的困惑。假设我有一个表，其中包含产品数据以及其可用性的开始和结束日期。因此，对于开始日期和结束日期，数据将保存为 utc 日期并包括时区。

如果我查询数据库并想省略不在开始日期和结束日期之间的记录，并且会执行以下操作：

```
select * from products where stardate <= getutcdate() and enddate >= getutcdate; 
```

但是，这是无效的，因为 UTC 日期可能无法反映需要数据的国家/地区的时间，即。不应用时间偏移。那么有什么想法可以解决这个问题吗？

我的下一个问题是，当该国家/地区的日光时间发生变化时，偏移量不会有所不同吗？IE。由于偏移值不正确，数据是否会变得陈旧。

在我的应用程序中向上移动层，并进入我的 .net 代码。当我从数据库中检索数据时，我创建了一个包含结束日期/开始日期的 DateTimeOffset 变量。如果我想在我的 sql 中编写一些类似的代码来检查开始和结束日期，如果我使用 DateTime.UtcNow，我会不会遇到同样的问题？

任何有助于解决我的困惑的帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:07:35.587

UTC 日期是时区和夏令时中性的，因此在 sql server 上的所有计算都应仅在 UTC 时间中执行。时区信息（区域设置）存储在本地 pc 上，并在从 utc 转换为本地时应用日期时间类。对于网页，日期作为 utc 字符串传入并转换为本地时间通过日期对象 (tolocaltime) 时间应在发送到 sql server 之前由网页或应用程序转换

# asp.net - asp.net GridView 和 ajax 控件 -AsyncFileUpload

> ID：13300459
> 
> 赞同：0
> 
> 时间：2012-11-09T00:44:55.847
> 
> 标签：asp.net, ajax

我的 asp.net webform 上有一个 AsyncFileUpload 控件和一个 gridView 上传文件后，我试图用上传的文件列表加载我的 gridview

但是向 gridview 显示上传文件的列表不起作用。当我调试时，我可以在绑定到 gridView 之前看到预期的数据。但是我看不到带有上传文件列表的gridview。请帮忙

下面粘贴的是我的网络表单和我的cs文件

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm2.aspx.cs" Inherits="test.WebForm2" %>
<%@ Register Assembly="AjaxControlToolkit" 
    Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
         <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <cc1:AsyncFileUpload ID="AsyncFileUpload1" Width="400px" runat="server" 
OnClientUploadError="uploadError" OnClientUploadStarted="StartUpload" 
OnClientUploadComplete="UploadComplete" 
CompleteBackColor="Lime" UploaderStyle="Modern" 
ErrorBackColor="Red" ThrobberID="Throbber" 
onuploadedcomplete="AsyncFileUpload1_UploadedComplete" 
UploadingBackColor="#66CCFF" OnDataBinding="AsyncFileUpload1_DataBinding" />
    </div>
        <div>
            <asp:Label ID="lblStatus" runat="server" Style="font-family: Arial; 
    font-size: small;"></asp:Label>

        </div>
              <div class="width100pc floatLeft">
                <asp:GridView ID="grdAttachments" runat="server" ShowFooter="true" AutoGenerateColumns="false"
                    ForeColor="#333333" GridLines="None" CellPadding="2" CellSpacing="0" OnRowDeleting="grdAttachments_RowDeleting"
                    ShowHeaderWhenEmpty="true" EmptyDataText="No attachments to show" Width="100%" OnLoad="grdAttachments_Load" OnRowDataBound="grdAttachments_RowDataBound">
                    <Columns>
                        <asp:BoundField DataField="RowNumber" HeaderText="Row Number" ItemStyle-CssClass="displayNone"
                            HeaderStyle-CssClass="displayNone" FooterStyle-CssClass="displayNone" />
                        <asp:BoundField HeaderText="File name" HeaderStyle-HorizontalAlign="Left" HeaderStyle-CssClass="width100pc"
                            ItemStyle-CssClass="width100pc" DataField="FileUpload" />
                        <asp:BoundField DataField="UploadedFullFileName" HeaderText="UploadedFullFileName"
                            ItemStyle-CssClass="displayNone" HeaderStyle-CssClass="displayNone" FooterStyle-CssClass="displayNone" />
                        <asp:CommandField ShowDeleteButton="true" DeleteText="Remove" ItemStyle-HorizontalAlign="Center" />
                    </Columns>
                    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" HorizontalAlign="Left" />
                </asp:GridView>
            </div>
    </form>
</body>
</html>
<script type="text/javascript" language="javascript">

    function uploadError(sender, args) {
        document.getElementById('lblStatus').innerText = args.get_fileName(),
            "<span style='color:red;'>" + args.get_errorMessage() + "</span>";
    }

    function StartUpload(sender, args) {
        document.getElementById('lblStatus').innerText = 'Uploading Started.';
    }

    function UploadComplete(sender, args) {
        var filename = args.get_fileName();
        var contentType = args.get_contentType();
        var text = "Size of " + filename + " is " + args.get_length() + " bytes";
        if (contentType.length > 0) {
            text += " and content type is '" + contentType + "'.";
        }
        document.getElementById('lblStatus').innerText = text;
    }

</script> 
```

下面粘贴的是CS文件

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace test
{
    public partial class WebForm2 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
        protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
        {
            string uniquePath = Path.Combine(ConfigurationManager.AppSettings["fileUploadPath"].ToString(), Session.SessionID);

            if (AsyncFileUpload1.HasFile)
            {
                //string strPath = uniquePath + Path.GetFileName(e.FileName);
                //AsyncFileUpload1.SaveAs(strPath);
                AddNewARowToGrid();
            }
        }

        public void AddNewARowToGrid()
        {
            DataTable dtAttachments = new DataTable();
            int rowNumber = 1;
            string uploadedFullFileName = string.Empty;

            if (ViewState["CurrentATable"] != null)
            {
                dtAttachments = (DataTable)ViewState["CurrentATable"];
                rowNumber = dtAttachments.Rows.Count + 1;
            }
            else
            {
                dtAttachments.Columns.Add(new DataColumn("RowNumber", typeof(string)));
                dtAttachments.Columns.Add(new DataColumn("FileUpload", typeof(string)));
                // dtAttachments.Columns.Add(new DataColumn("Description", typeof(string)));
                dtAttachments.Columns.Add(new DataColumn("UploadedFullFileName", typeof(string)));
            }

            try
            {
                string uniquePath = Path.Combine(ConfigurationManager.AppSettings["fileUploadPath"].ToString(), Session.SessionID);
                if (!Directory.Exists(uniquePath))
                    Directory.CreateDirectory(uniquePath);
                uploadedFullFileName = Path.Combine(uniquePath, AsyncFileUpload1.FileName);
                AsyncFileUpload1.PostedFile.SaveAs(uploadedFullFileName);
            }
            catch (Exception ex)
            {
                               return;
            }

            DataRow drNewRow = dtAttachments.NewRow();

            drNewRow["RowNumber"] = rowNumber;
            drNewRow["FileUpload"] = AsyncFileUpload1.PostedFile.FileName;
            //drNewRow["Description"] = txtDescription.Text;
            drNewRow["UploadedFullFileName"] = uploadedFullFileName;

            dtAttachments.Rows.Add(drNewRow);

            // txtDescription.Text = string.Empty;

            ViewState["CurrentATable"] = dtAttachments;
            Session["CurrentATable"] = dtAttachments;

            BindDataGrid(grdAttachments, dtAttachments);
        }
        private void RemoveNewARowToGrid(string rowNumber)
        {
            if (ViewState["CurrentATable"] != null)
            {
                DataTable dtCurrentTable = (DataTable)ViewState["CurrentATable"];
                DataRow rowToDelete = null;

                if (dtCurrentTable.Rows.Count > 0)
                {
                    foreach (DataRow row in dtCurrentTable.Rows)
                    {
                        if (int.Parse(row["RowNumber"].ToString()) == int.Parse(rowNumber))
                        {
                            rowToDelete = row;
                            break;
                        }
                    }
                    if (rowToDelete != null)
                    {
                        dtCurrentTable.Rows.Remove(rowToDelete);

                        ViewState["CurrentATable"] = dtCurrentTable;

                        if (dtCurrentTable.Rows.Count == 0)
                            LoadEmptyAttachmentSection();
                        else
                            BindDataGrid(grdAttachments, dtCurrentTable);
                    }
                }
            }
        }

        private void BindDataGrid(GridView grd, DataTable dataTable)
        {
            if (null != Session["CurrentATable"])
            {
                dataTable = (DataTable)Session["CurrentATable"];
            }
            grdAttachments.DataSource = dataTable;
            grdAttachments.DataBind();

        }
        private void LoadEmptyAttachmentSection()
        {
            try
            {
                DataTable dtAttachments = new DataTable();
                BindDataGrid(grdAttachments, dtAttachments);
            }
            catch (Exception ex)
            {

                return;
            }
        }
        protected void grdAttachments_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            RemoveNewARowToGrid(grdAttachments.Rows[e.RowIndex].Cells[0].Text);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:13:07.587

AysncFile 上传执行异步，并且工作正常。您正在做的是绑定到未更新的网格，因为它无法重新渲染。它不在更新面板中。您基本上在后台绑定了网格，来自一个完全不同的请求，因此是 ASYNC。

将网格放到更新面板中，并在文件完成并重新绑定网格后对其调用更新。

# regex - AZ 或 1-8 的正则表达式

> ID：13300460
> 
> 赞同：-5
> 
> 时间：2012-11-09T00:45:09.223
> 
> 标签：regex

符合以下要求的正则表达式是什么： - 长度正好是一个字符 - 必须是大写字母或 1-8 的数字

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T00:46:06.577

您应该阅读[正则表达式教程](http://www.regular-expressions.info/tutorial.html)。

```
^[A-Z1-8]$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T00:46:16.360

```
/^[A-Z1-8]$/ 
```

正则表达式的哪个变体？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T00:49:43.390

[A-Z1-8] 是测试匹配一个字符的方法

# objective-c - 如何获取 OSX 上 SLRequest 返回的 NSCFDictionary 内的数据？

> ID：13300461
> 
> 赞同：0
> 
> 时间：2012-11-09T00:45:15.993
> 
> 标签：objective-c, facebook, macos

我提出这个 Facebook 请求：

```
SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                    requestMethod:SLRequestMethodGET
                                                              URL:[NSURL URLWithString:@"https://graph.facebook.com/fql"]
                                                       parameters:[NSDictionary dictionaryWithObject:@"SELECT uid, name, pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())" forKey:@"q"]];

[facebookRequest setAccount:_facebookAccount];

[facebookRequest performRequestWithHandler:^(NSData* responseData, NSHTTPURLResponse* urlResponse, NSError* error) {
     if(!error){
           id json = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
           NSLog(@"%@", [json class]); 
           //NSCFDictionary. How can i get the data that's inside this?
     }else{
           NSLog(@"error fb");
            }
     }]; 
```

关于如何检索 NSCFDictionary 中的数据的任何想法？我试过`[json valueforKey...]`但没有

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:14:34.143

使用 NSDictionary 的`-objectForKey:`方法：

```
id json = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
if ([json isKindOfClass:[NSDictionary class]]) {
    NSDictionary *dict = (NSDictionary*)json;
    for (NSString *key in dict) {
        id object = [dict objectForKey:key];
        NSLog(@"The object for key \"%@\" is: %@", key, object);
    }
} 
```

顺便说一句，不费吹灰之力就能发现 NSCFDictionary 可以像 NSDictionary 一样对待。这里有一个 SO 问题可以解释：[什么是 NSCFDictionary？](https://stackoverflow.com/q/7156835/643383)一旦你知道了这一点，你就可以通过查看 NSDictionary 的文档轻松找出如何处理它。

# android - 在 sqlite 数据库中对日期进行排序？

> ID：13300463
> 
> 赞同：5
> 
> 时间：2012-11-09T00:45:53.943
> 
> 标签：android, sqlite, android-sqlite

我开发了一个应用程序..为此我有一个数据库，它有很多表。其中一张表有日期列。我的问题是我必须对日期进行排序，并且必须从下表列中选择最旧的日期，***例如 Oct-24-2012***

Column_Date
------------

2012 年
11 月7 日 2012 年 11 月 21 日 2012 年 11 月 25 日 2012 年 10 月 25 日
2102 年
10 月 24
日

我应该怎么做......我已经将日期列存储在字符串中......如果我需要更改日期列的数据类型，请告诉我应该使用哪种数据类型。以及我应该如何对列进行排序。根据该数据类型..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T00:57:59.307

在 sqlite 中并没有真正的日期类型。您可以使用其中一种预定义格式将日期存储为字符串，有关详细信息，请参阅[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)。

时间字符串可以是以下任何一种格式：

```
YYYY-MM-DD
YYYY-MM-DD HH:MM
YYYY-MM-DD HH:MM:SS
YYYY-MM-DD HH:MM:SS.SSS
YYYY-MM-DDTHH:MM
YYYY-MM-DDTHH:MM:SS
YYYY-MM-DDTHH:MM:SS.SSS
HH:MM
HH:MM:SS
HH:MM:SS.SSS
now
DDDDDDDDDD 
```

您需要将它们存储在 YYYY-MM-DD 中，然后您可以按 asc limit 1 对它们进行排序以获得最旧的日期。所以而不是

```
Column_Date
------------
Nov-07-2012
Nov-21-2012
Nov-25-2012
Oct-25-2012
Oct-24-2102 
```

您将不得不像这样存储它们

```
Column_Date
------------
2012-11-07
2012-11-21
2012-11-25
2012-10-25
2012-10-24 
```

最后，您阅读行（如果有）

```
Cursor oldestDateCursor = db.query("DateTableName", null, null, null, null, null, "date_column ASC LIMIT 1");
if (oldestDateCursor.moveToFirst())
{
    String date = oldestDateCursor.getColumnName(oldestDateCursor.getColumnIndex("date_column"));
}
oldestDateCursor.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T00:56:00.383

您可以更改它的存储方式。而不是一列，有 3：
月、日、年；

这提供了更大的灵活性，您可以更轻松地对其进行排序。由于它是数字月份（1-12）而不是字符串，它将更容易排序。

```
SELECT month,day,year
FROM tables
ORDER BY month,day,year DESC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T00:58:55.593

首先，您不能在 sqlite 中存储类型“日期”。我确信有很多同样值得称赞的方法可以实现这一目标，但这就是我个人如何做你所要求的。我将所有日期转换为这种字符串格式：`new SimpleDateFormat("yyyyMMdd");`我将其放入我的数据库中。这很方便，我希望原因不言而喻。当我想返回我的日期时，我只需在查询中使用一个订单，如`"date DESC"`. 然后我将其重新转换为我需要的任何格式。

# iphone - 我可以更改 UINavigationController viewControllers 堆栈吗？

> ID：13300465
> 
> 赞同：3
> 
> 时间：2012-11-09T00:46:04.447
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar

我有 3 个视图控制器，从第一个到第二个，从第二个到第三个。

我想从第三个视图控制器回到第一个。

我发现的一个解决方案是创建一个自定义按钮并替换后退按钮，这样我就可以执行自己的选择器并返回到 firstVC。但是我创建的按钮看起来不像后退按钮。

所以我想到的一个解决方案是：

进入第三个视图控制器后，更改 navigationController 中的 viewControllers 数组，删除第二个视图控制器。这样它会回到第一个而不改变后退按钮。

这可能吗？我可以随意更改 UINavigationController 堆栈吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:48:42.947

您可以尝试从堆栈中删除第二个视图控制器并检查它。应该不是问题。

```
NSMutableArray *array = [[NSMutableArray alloc] initWithArray:self.navigationController.viewControllers];
[array removeObjectAtIndex:1];

self.navigationController.viewControllers = array; 
```

或者只是使用

```
[self.navigationController setViewControllers:array animated:NO]; 
```

但这不是推荐的方法，因为用户可能会感到困惑。所以当你这样做时要小心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T01:05:29.753

你可以，有一个特殊的方法 - `[UINavigationController setViewControllers:animated:]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:01:44.193

我不知道您正在做什么的详细信息，但是当用户希望使用该后退按钮返回一次时，您希望避免返回两次。我认为一个好的解决方案是对视图进行一些其他操作。

所以我从你所说的假设，如果用户去那个视图，他们需要回到开始并且不能回到第二个视图控制器。在第三个 VC 上，我将完全隐藏后退按钮或导航栏，然后在视图上有另一个按钮，该按钮清楚地执行了一些操作，然后您只需 popToRootViewController。

# javascript - 带有选项卡式用户界面的 KnockoutJs 应用程序：最佳实践是什么？

> ID：13300468
> 
> 赞同：1
> 
> 时间：2012-11-09T00:46:07.927
> 
> 标签：javascript, knockout.js, single-page-application, tabbed-interface

我正在构建一个具有多选项卡功能的单页 KnockoutJs 应用程序。

到目前为止，我已经根据我的基本想法尝试了 jQuery UI 的选项卡功能。

这是我的一个例子： [jsfiddle](http://jsfiddle.net/curiousdev/nQhn9/)

使用这个 jQuery UI 函数：

```
$(document).ready(function() {
$("#tabs").tabs();
}); 
```

您将如何在 Knockoutjs 应用程序中构建选项卡？有最佳实践吗？

这看起来是一个好的方向吗？或者有什么关于在哪里看的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:50:02.043

我建议看一下[PagerJS](http://pagerjs.com/)。

> **PagerJS**是一个基于 KnockoutJS 和 jQuery 的 JavaScript 库，它提供了以声明方式创建单页应用程序的可能性 - 将子页面嵌套在子页面内，每个子页面可以独立开发，但仍然可以相互通信。

我有一个已经完成的项目，它使用 PagerJS 作为单页应用程序，它可能对您有所帮助。[KnockoutJS & Pager 示例（未完成）](https://github.com/iamshanedoyle/KnockoutJSCarTax)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:05:48.100

看看我的绑定集合

查看[GitHub](https://github.com/AndersMalmgren/Knockout.Bindings)和[示例](http://jsfiddle.net/H8xWY/130/)链接

查看标签绑定

```
<div data-bind="tabs: tabs, tabsOptions: { selectedTab: selectedTabModel, enable: tabsEnabled }"></div> 
```

# javascript - 如何禁用自定义事件

> ID：13300469
> 
> 赞同：0
> 
> 时间：2012-11-09T00:46:13.053
> 
> 标签：javascript, jquery, twitter-bootstrap, twig

我正在尝试调试我的问题。我已经导入了一个库，该库将从播放列表中提取 YouTube URL。一旦这个库完成提取过程，它将触发一个带有`$(document).trigger('playlistDone');`. 然后我通过以下方式监听事件：

```
$(document).on('playlistDone', function() {
   alert( 'done' );
}); 
```

我从来没有收到警报。我的网站目前很大，所以很难调试。我已经通过创建一个空白页面验证了该库确实在工作，并且该库确实触发了触发器。这使我相信我网站上的某些东西导致了问题。

我也做过：

```
$(document).on('click', function() {
   alert( 'done' );
}); 
```

验证默认事件没有被禁用。我的下一步是确定是否以某种方式禁用了自定义事件。

需要注意的是，我的网站使用的是 Bootstrap 和 Twig。我祈祷他们不对我的问题负责。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:59:45.293

如果不查看更多源代码就很难判断，但找出事件是否已注册的一种方法是检查事件数据对象。

[例子](http://jsfiddle.net/AerUL/4/)

**JS**

```
$(document).on('playlistDone', function(){
    alert('hello world'); 
}); 

//jQuery 1.8+
alert($._data(document, 'events').playlistDone); 
alert($._data(document, 'events').playlistDone.length); 

//Execute the first event
$._data(document, 'events').playlistDone[0].handler();

// < jQuery 1.8
//alert($.data(document, 'events').myCustomevent); ​ 
```

# c++ - Project Only -> Clean Only Project 正在清理 Visual Studio 2012 中的其他项目

> ID：13300471
> 
> 赞同：1
> 
> 时间：2012-11-09T00:46:30.357
> 
> 标签：c++, visual-studio-2012

我在同一个解决方案中有多个项目。其中两个在同一个目录中（因此共享一个调试目录）。当我清理任何一个项目时，都会删除两者的 obj 和 lib 文件。这在 Visual Studio 2008 中没有发生。

存在不对称性，因为在我清理一个项目后，它只检测到该项目已过期，并且当我构建时出现链接器错误，因为其他项目的 obj 文件不存在。

有没有办法解决这个问题，所以只删除与清理项目关联的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T12:41:04.253

您必须在一个目录中为您的两个项目设置不同的中间目录。否则，对单个项目的清理会擦除两个项目的所有文件。

# php - 如何通过 Python 中的 SOAP 将地图传递给 Web 服务？

> ID：13300473
> 
> 赞同：2
> 
> 时间：2012-11-09T00:46:36.287
> 
> 标签：php, python, soap

我正在尝试开发一个 Web 服务，并且我正在使用 Yii PHP 框架，它可以[生成 WSDL](http://www.yiiframework.com/doc/guide/1.1/en/topics.webservice)。我有一个可用的 PHP 客户端，它使用以下形式的代码：

```
<?php

$wsdlURL='someUrl';
$client = new SoapClient($wsdlURL);
$inputArray = array('a'=>'1', 'b'=>'2');

// make the actual soap call
$client->someMethod($inputArray); 
```

这会生成以下形式的请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:SystemsControllerwsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2="http://xml.apache.org/xml-soap" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
  <SOAP-ENV:Body>
    <ns1:someMethod>
      <inputArray xsi:type="ns2:Map">
        <item>
          <key xsi:type="xsd:string">a</key>
          <value xsi:type="xsd:string">1</value>
        </item>
        <item>
          <key xsi:type="xsd:string">b</key>
          <value xsi:type="xsd:string">2</value>
        </item>
      </inputArrayArray>
    </ns1:someMethod>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我现在正在尝试对 python 做同样的事情，并且正在使用[SOAPpy](http://pypi.python.org/pypi/SOAPpy/)。这不是一个硬性要求，它只是似乎工作的 SOAP 库。（我无法获得[suds](https://fedorahosted.org/suds/)来解析我的 WSDL。）

无论如何，我有这条蟒蛇：

```
import SOAPpy

wsdlURL = 'someURL'
client = SOAPpy.WSDL.Proxy(wsdlURL)
args = {'a':'1', 'b':'2'}

soap_map = []
for key in args:
    inner = {"key":key,"value":args[key]}
    soap_map.append(inner)

wsdl.someMethod(soap_map) 
```

请求已关闭，但实际上是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:xsd="http://www.w3.org/1999/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
  <SOAP-ENV:Body>
    <ns1:someMethod xmlns:ns1="urn:SystemsControllerwsdl" SOAP-ENC:root="1">
      <v1 xmlns:ns2="http://soapinterop.org/xsd" SOAP-ENC:arrayType="ns2:SOAPStruct[6]" xsi:type="SOAP-ENC:Array">
        <item>
          <value xsi:type="xsd:string">1</value>
          <key xsi:type="xsd:string">a</key>
        </item>
        <item>
          <value xsi:type="xsd:string">2</value>
          <key xsi:type="xsd:string">b</key>
        </item>
      </v1>
    </ns1:someMethod>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我猜测由于生成此请求的名称空间不同，我的 Web 服务不知道如何处理输入。我猜我是否可以在通过 python 提交时将类型更改为正确的命名空间，我会很高兴，但我无法弄清楚如何使用 SOAPpy 来做到这一点。

# mysql - MySQL中的命名索引是否区分大小写？

> ID：13300476
> 
> 赞同：0
> 
> 时间：2012-11-09T00:46:58.170
> 
> 标签：mysql, sql

我有一个表“table2”，它有一个名为“MYINDEX”的索引
我的问题是当我使用这个索引进行连接时：

```
select a from table1 left join table2 use index (MYINDEX) 
```

是否等同于以下查询？

```
select a from table1 left join table2 use index (myindex) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:58:31.960

在 MySQL 中，数据库和表名可能区分大小写，具体取决于服务器操作系统和 mysqld 选项。列、索引、存储例程和事件名称始终不区分大小写。请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/identifier-case-sensitivity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:34:23.057

在[我之前的一篇文章](https://stackoverflow.com/questions/13225379/mysql-dump-from-linux-to-windows/13245362#13245362)之后，Linux 和 Windows 在两种操作系统存储表名的方式上存在差异（是否只允许小写）。这可以由`lower_case_table_names`系统变量控制。您的 Windows 安装可能将此值设置为 1，而您的 Linux 服务器将此值设置为 0。按照用户手册的[“标识符大小写敏感性”](http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitivity.html)部分，您有两个选择：

> `lower_case_table_names=1`在所有系统上使用。这样做的主要缺点是，当您使用`SHOW TABLES`or时`SHOW DATABASES`，您看不到原始字母大小写的名称。

或者

> `lower_case_table_names=0`在 Unix 和`lower_case_table_names=2`Windows 上使用。这将保留数据库和表名的字母大小写。这样做的缺点是您必须确保您的语句在 Windows 上始终以正确的字母大小写引用您的数据库和表名。如果您将语句转移到字母大小写很重要的 Unix，如果字母大小写不正确，它们将不起作用。

至于索引名称，我会以与数据库名称、表名称和/或列名称相同的方式处理它。为了安全起见，假设将来您可能会遇到此问题。

一些链接：

*   [lower_case_table_names 系统变量](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_lower_case_table_names)
*   [标识符大小写敏感性](http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitivity.html)

# c - 有没有办法在不执行这样的循环的情况下分配数组？

> ID：13300477
> 
> 赞同：0
> 
> 时间：2012-11-09T00:47:07.033
> 
> 标签：c, arrays, loops, multidimensional-array, initialization

我刚刚看到了多维数组，作为练习，我首先想用这段代码打印出一个字符串；唉，它没有用。

```
#include <stdio.h>
main()
{
 char a[][20] = {"Hello"};
 printf("%s" , a [1]);
 getchar();
} 
```

我设法做到这一点的唯一方法是使用循环添加每个字符：

```
#include <stdio.h> 
main()
{
char a[] = {"Hello"};
int i=0
while(a[i]!='\0')
 {
  printf("%c" , a[i]);
   i++;
  }
getchar();
} 
```

初始化字符串时我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:51:37.903

在第一个片段中，您正在访问超出范围的内存。可行的代码是：

```
#include <stdio.h>
int main(void)
{
    char a[][20] = {"Hello"};
    printf("%s\n", a[0]);
    getchar();
} 
```

C 数组从零开始索引。您只定义和初始化`a[0]`；因此，访问`a[1]`是未定义的行为。

在您的第二个示例中，您可以使用`"%s"`OK：

```
#include <stdio.h> 
int main(void)
{
    char a[] = {"Hello"};
    printf("%s\n", a);
    getchar();
} 
```

或者你可以使用：

```
 printf("%s\n", &a[0]); 
```

当然，这是一个一维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:54:48.550

或者，您也可以使用指针表示法。

```
#include <stdio.h>
int main(void)
{
    char a[][20] = {"Hello"};
    printf("%s\n", *( a + 0 ) );
    getchar();
} 
```

# ruby-on-rails - 哪些别名对 Rails 开发有用？

> ID：13300479
> 
> 赞同：0
> 
> 时间：2012-11-09T00:47:22.787
> 
> 标签：ruby-on-rails, ruby, alias, bash

我知道很多程序员都有别名

```
ror='script/rails server' 
```

和

```
p='pwd' 
```

还有其他对 Ruby on Rails 开发有用的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:55:14.237

较新版本的 rails 大大减少了命令行输入的数量，几乎到了使别名变得不必要的地步（只要您使用[binstubs](http://gembundler.com/man/bundle-exec.1.html) - 或类似 typing `bundle exec`）。例如`script/rails server`已经成为`rails s`- 不错。就个人而言，我从自定义生成器和编辑器内代码模板之类的东西中获得了更多收益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:55:10.420

for 的别名对`pwd`我来说似乎很奇怪，而且`p`太笼统而没有用或有意义。

我只有一个 zsh 插件安装的那些（我认为这就是它们的来源）：

```
rc='_rails_command console'
rd='_rails_command destroy'
rdb='_rails_command dbconsole'
rdbm='rake db:migrate db:test:clone'
rdm='rake db:migrate'
rdr='rake db:rollback'
rg='_rails_command generate'
rgm='_rails_command generate migration'
rp='_rails_command plugin'
rs='_rails_command server'
rsd='_rails_command server --debugger'
ru='_rails_command runner' 
```

除了偶尔，我从不使用它们`rc`。

IMO 别名应该反映您自己的个人工作流程，并且通用集很困难。

什么是“有用的”完全取决于您的工作方式、项目等。例如，我有几个别名在处理当前项目时被加载，因为它将日志文件放在自定义位置，所以我有别名`tail -f`两个登录问题。

# c++ - 初始化 STL `map` 大小

> ID：13300482
> 
> 赞同：8
> 
> 时间：2012-11-09T00:47:43.070
> 
> 标签：c++, map

是否可以初始化 STL`map`大小？

我知道最后我的地图中有多少元素，我想在一开始就分配所有需要的内存。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T00:54:23.960

有几种选择：

*   您可以尝试将 map 与 statefull 分配器一起使用。例如来自[Boost.Container](http://www.boost.org/doc/libs/1_52_0/doc/html/container/Cpp11_conformance.html#container.Cpp11_conformance.alloc_traits_move_traits)或来自 C++11。或者，如果您接受无状态分配器的限制，那么您甚至可以使用 C++98/03 中的 map。

*   考虑使用 unordered_map（同样来自 Boost 或 C++11）——它将桶数作为构造函数参数。它与 map 的不同之处在于它基于散列而不是严格的弱排序。

*   [另一种选择是来自Boost](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/container/flat_map.html)的 flat_map 。它具有**保留**成员功能。[平面地图/套装说明](http://www.boost.org/doc/libs/1_52_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx)：

> Boost.Container flat_[multi]map/set 容器是基于 Austern 和 Alexandrescu 指南的基于有序向量的关联容器

*   或者，如果 boost 不可用 - 那么您可以简单地使用 std::vector + std::sort + std::lower_bound （或将它们包装到类似类的小型 flat_map ）。即，只需将您的元素放入向量（无序），然后对其进行排序，然后 - 当您需要按键查询元素时 - 只需使用 lower_bound。

哪个选择更好 - 取决于您的使用模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T00:51:25.173

你不能。它是一棵树（通常是红黑树）。实际值将决定内存布局。

**但是**，您***可以***

*   使用[Boost Intrusive](http://www.boost.org/doc/libs/1_52_0/doc/html/intrusive.html)地图（使用您在另一个容器中分配的元素，如矢量），用“钩子”装饰以在其上实现地图功能

*   将 std::map 与分配器一起使用，因此您可以从固定的“池”（内存区域）分配所有实际元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T00:53:18.040

我唯一能想到的就是使用它的迭代器构造函数。唯一的窍门是，您必须创建*另一个*具有所需大小的容器，并将其迭代器提供给构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T00:53:11.333

`reserve`可以通过[N3376](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)`rehash`中的表 103 进行仿真。

```
a.rehash(n) 
Post: a.bucket_count() > a.size() / a.max_load_factor() 
      and a.bucket_count() >= n.

a.reserve(n) Same as a.rehash(ceil(n / a.max_load_factor())) 
```

[来源](https://stackoverflow.com/a/10618264/489590)

# jquery - 如何使用 RequireJS 访问定义的函数

> ID：13300484
> 
> 赞同：0
> 
> 时间：2012-11-09T00:47:48.220
> 
> 标签：jquery, requirejs, expressionengine

我正在使用 Chris Imrie 的 RequireJS for ExpressionEngine 迭代，使我的所有字段类型都兼容。我不明白的一件事是如何调用 RequireJS 中定义的函数。

[https://github.com/ckimrie/RequireJS-for-EE](https://github.com/ckimrie/RequireJS-for-EE)

这是我正在尝试做的一个基本示例...

```
var loadImage = function() {
    console.log('loaded');
}

define(function () {
    return loadImage;
}); 
```

我如何实际访问 loadImage 函数？我的代码 100% 工作，但是当我开始使用 RequireJS 时，库的行为不同。下面是我正在使用的库中的一个片段，它完全是为 RequireJS 分叉的。如果我删除 fork 并使用标准的 jQuery 调用，它可以正常工作（即使 RequireJS 加载所有脚本）。

不工作：

```
if (typeof define === 'function' && define.amd) {
    define(function () {
        return loadImage;
    });
} else {
    $.loadImage = loadImage;
} 
```

有用吗

```
$.loadImage = loadImage; 
```

为什么 jQuery 库会分叉这样的代码？我担心我忽略了一些简单的事情，但鉴于所有这些代码都使用 ExpressionEngine Fieldtypes，我在更改库时没有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T13:05:23.893

有几件事要尝试：

您的定义函数需要有一个数组作为第一个参数，因为这是您指定此模块的任何模块依赖项的地方。如果您的模块不需要任何其他脚本或模块即可工作，则此数组为空，如下所示：

```
define([], function(){
    //Your code here
}); 
```

现在这是稍微令人困惑的部分，因为 RequireJS 的工作方式是它使用模块路径作为模块名称。这真的很强大，因为它使您的模块具有高度的可移植性，而且还使指定您需要的模块及其所在位置的行为变得相同。

因此，如果上面定义的模块位于“mymodule/js/component.js”，您将能够加载它并在另一个脚本中异步使用它，如下所示：

```
//some existing script that then needs a JS module that has not been loaded yet
require(['mymodule/js/component'], function(component){
   //All loaded modules are provided as arguments in the 
   //order they are specified in the require array
   var a = component();
}); 
```

因此，您的示例变为以下内容：

```
//This script located at mymodule/js/loadImage.js
if (typeof define === 'function' && define.amd) {
    define([], function () {
        return loadImage;
    });
} else {
    $.loadImage = loadImage;
}

//Script located in another file that needs the loadImage module
require(['mymodule/js/loadImage'], function(loadImage){
    loadImage();
}); 
```

最后一点，如果您愿意，可以通过将名称指定为 define 调用的第一个参数来为您的模块提供简短的、简洁的名称。这不是推荐的，因为您需要在第一次需要它时指定文件的路径，因为 RequireJS 不会仅从一个短名称中知道它的位置。适合的地方是当您预先加载所有脚本而不是在需要它们时（建议这样做，因为所有内容都是按需加载的）。但是，这里是您如何为模块指定“短”名称的方式：

```
//This script located at mymodule/js/loadImage.js
if (typeof define === 'function' && define.amd) {
    define("loadImage", [], function () {
        return loadImage;
    });
} else {
    $.loadImage = loadImage;
} 
```

如果您知道 loadImage 模块已加载，则上述技术允许您执行以下操作：

```
//Even if loadImage has been already fetched, this is good practice since you can
//add more modules to be the dependency array if you need
require(['loadImage'], function(loadImage){
    loadImage();
});
//or sometimes this can be convenient:
var loadImage = require("loadImage")
loadImage(); 
```

## 更新

忘了提一下，如果您想创建一个需要 loadImage 模块才能运行的模块，您可以这样做：

```
//By providing the module dependencies in the first argument, RequireJS will
//fetch it and load it if needed
define(['mymodule/js/loadImage'], function(loadImage){
    loadImage();
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T16:45:33.253

为上面的答案道歉，我想我现在明白你想要做什么了。基本上，您所指的库（Javascript-Load-Image）已经在他们的库中实现了 AMD 支持（您所指的定义函数），您是否希望在自己的脚本中使用它？

RequireJS 有时会让人感到困惑，因为它能够加载普通脚本，也能够加载 AMD JS 模块。如果您有一个 JS 文件，其中包含一个 JS 构造函数或函数，您希望将其作为模块提供给代码的其他部分使用，它就像添加上面提到的 define() 调用一样简单。重要的部分是您需要确保 RequireJS 作为 AMD 模块请求它，否则它不会有模块名称。这就像省略“.js”一样简单。

所以如上面的例子：

```
//In your script that needs the loadimage library you would load it by 
//specifying the path to the JS file and omitting the ".js" extension
require(["path/to/loadimage"], function(loadimage){
    loadimage();
});

//If you KNOW that the library has already been loaded by RequireJS
//you can fetch it synchronously from RequireJS' memory by specifying 
//its path without the .js
var loadimage = require("path/to/loadimage");
loadimage() 
```

# python - 任何人都知道为什么无论 Skype 是否实际运行，skype4py 的 IsRunning 方法都会返回 False 吗？

> ID：13300487
> 
> 赞同：0
> 
> 时间：2012-11-09T00:48:16.073
> 
> 标签：python, skype4py

我猜这可能是一个错误，如果是这样，可以这么说，这是我第一次在“野外”遇到错误。所以，我不完全确定该怎么做。

### 文档：

```
Properties:
    IsRunning
    Tells if Skype client is running. 
```

### 我的代码：

```
if __name__ == '__main__':
    skype = Skype4Py.Skype()
    print skype.Client.IsRunning 
```

即使 Skype 实际上正在运行，它也会打印错误。有任何想法吗...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T14:24:51.927

我遇到了同样的问题，并在

[https://github.com/awahlig/skype4py/issues/11](https://github.com/awahlig/skype4py/issues/11)

只需更改**C:\Python27\Lib\site-packages\Skype4Py\api\windows.py中的以下行**

```
windll.user32.FindWindowA('tSkMainForm.UnicodeClass', None)) 
```

至

```
windll.user32.FindWindowA('tSkMainForm', None)) 
```

为我工作。希望它在未来对某人有所帮助

# php - Firefox 不会尝试加载网页

> ID：13300490
> 
> 赞同：2
> 
> 时间：2012-11-09T00:48:20.090
> 
> 标签：php, apache, firefox

Firefox 版本 16.0.2 - 当我尝试访问`http://127.0.0.1/`or`localhost`时，它就停止了。它停留在当前页面上并且不会尝试加载它。Wget 和 Chrome 工作正常。

通过不尝试，我的意思是，就像我从未按 Enter 键一样。地址栏会发生变化，但标题或内容不会。仿佛瞬间停了下来。

其他 php 文件工作正常。没有有效的重写规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:01:02.677

清除你的Firefox浏览器数据/缓存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:47:18.813

看来是火狐的问题。我已禁用所有插件和插件，但出现了同样的问题。删除我的个人资料并从干净状态重新开始后，Firefox 现在正在加载`http://localhost/`！

# javascript - jQuery插件奇怪的这种行为

> ID：13300497
> 
> 赞同：0
> 
> 时间：2012-11-09T00:49:30.770
> 
> 标签：javascript, jquery, jquery-plugins, this

我正在开发我的第一个插件。它将标准`select`元素转换为风格化的`div`. 如果我调用一个 jQuery 函数来收集我的所有`$(".special_selctor")` `selects`逻辑并执行逻辑，那么代码就可以正常工作，所以我决定将该逻辑拉入一个插件，这样我就可以直接调用`stylize`而`select`不是遍历我所有的特殊类。

这是来自非插件的代码片段（`$(this)`是一个`select`用我的自定义类标记的实例）：

```
var tmp = '';
tmp += '<div class="jm-select"' + (f_width ? ' style="width:' + (parseInt(f_width) + 7 + 32) + 'px;"' : '') + '>';
tmp += '<a ' + (f_width ? ' style="width:' + f_width + 'px;"' : '') + ' href="javascript:void(0)"><span class="display">' + display + '</span><span class="arrow"></span></a>';
tmp += '<div class="options"' + (f_width ? ' style="width:' + (parseInt(f_width) + 7) + 'px;"' : '') + '>';
$(this).children('option').each(function () {
  tmp += '<div class="option"><span class="display">' + $(this).html() + '</span><span class="value">' + $(this).attr('value') + '</span></div>';
});
tmp += '</div>';
tmp += '</div>';

$(this).after(tmp);
$(this).hide(); 
```

我们创建特殊`div`然后隐藏`select`

我的插件代码（注意：它在 CoffeeScript 中）：

```
if this.attr('data-width')
f_width = this.attr('data-width')
tmp = ''
tmp += '<div class="jm-select"' + (if f_width then ' style="width:' + (parseInt(f_width) + 7 + 32) + 'px;"' else '') + '>'
tmp += ' <a ' + (if f_width then ' style = "width:' + parseInt(f_width) + 'px;" ' else ' ') + ' href = "javascript:void(0)" > <span class="display" > ' + display + ' </span><span class="arrow"></span > </a>'
tmp += '<div class="options"' + (if f_width then ' style="width:' + (parseInt(f_width) + 7) + 'px;"' else '') + '>'
this.children('option').each () ->
  tmp += '<div class="option"><span class="display">' + $(this).html() + '</span><span class="value">' + $(this).attr('value') + '</span></div>'
tmp += '</div>'
tmp += '</div>'

this.after(tmp)
this.hide() 
```

`this.hide()`隐藏了和`select`新创建的`div`（`this`现在是一个数组）。如果我`this.hide()`之前打电话`this.after(tmp)`，它工作正常。

为什么要`this.hide()`迭代新的`this`“数组”而不仅仅是`this` `select`对象？

**从 CoffeeScript 转换的完整插件代码**

```
var $;

$ = jQuery;

$.fn.jmselect = function() {
  var display, f_width, name, tmp, value;
  name = this.attr('name');
  value = this.val();
  display = this.children("option:selected").text();
  if (this.attr('data-width')) {
    f_width = this.attr('data-width');
  }
  tmp = '';
  tmp += '<div class="jm-select"' + (f_width ? ' style="width:' + (parseInt(f_width) + 7 + 32) + 'px;"' : '') + '>';
  tmp += ' <a ' + (f_width ? ' style = "width:' + parseInt(f_width) + 'px;" ' : ' ') + ' href = "javascript:void(0)" > <span class="display" > ' + display + ' </span><span class="arrow"></span > </a>';
  tmp += '<div class="options"' + (f_width ? ' style="width:' + (parseInt(f_width) + 7) + 'px;"' : '') + '>';
  this.children('option').each(function() {
    return tmp += '<div class="option"><span class="display">' + $(this).html() + '</span><span class="value">' + $(this).attr('value') + '</span></div>';
  });
  tmp += '</div>';
  tmp += '</div>';
  this.hide();
  this.after(tmp);
  this.children("a").click(function(event) {
    event.stopPropagation();
    $('.jm-select').addClass('inactiveSelect');
    $(this).parent('.jm-select').removeClass('inactiveSelect');
    $('.inactiveSelect').children('.options').hide();
    return $(this).parent('.jm-select').children('.options').toggle();
  });
  this.find(".options .option").click(function() {
    var tmp2;
    tmp = $(this).children('span.value').html();
    tmp2 = $(this).children('span.display').html();
    $(this).parent('.options').parent('.jm-select').prev('select').val(tmp).trigger('change');
    $(this).parent('.options').parent('.jm-select').children('a').children('.display').html(tmp2);
    return $('.jm-select').children('.options').hide();
  });
  return this;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:19:42.107

我认为您需要将插件行为包装在一个`.each`循环中：

```
$.fn.jmselect = function() {
  return this.each(function() {
    // all your stuff here, except the final return
  });
}; 
```

# javascript - 如何从 HTML 5 中每秒更新的数字数组中绘制图表？

> ID：13300501
> 
> 赞同：0
> 
> 时间：2012-11-09T00:49:53.370
> 
> 标签：javascript, html

我每隔 n（随机）秒就有一个脉冲，我想在 div[id=item] 的底部绘制/绘制一个小图，使脉冲可视化。我正在考虑在它脉冲时生成一个高斯钟，但对于这个例子，绘制 0 和 1 很好。脉冲在某个时间 t 出现，因此根据最佳情况，数据可以是时间数组或每 1/10 秒的值数组。

如果这是选择的方式，则每 1/10 秒向 data1 添加一个新值，否则 data2 将在它脉冲时添加一个值。我希望实时更新绘图，以便旧脉冲向左移动，因此新脉冲从 div 的右侧进入。

任何人都有一些从哪里开始的代码或想法，以及关于执行此操作的建议。

```
<script>
var data1 = [0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1];
var data2 = [{1,2,3,4,5,];
</script>

    <div id="item" style="width:200px;height:100px"></div> 
```

**更新 1** 我现在在画布上画画。关于如何使其更新/动画的任何好主意？

# excel - 如何使用 SSIS Excel 目标填充存储在 TFS 中的电子表格？

> ID：13300504
> 
> 赞同：1
> 
> 时间：2012-11-09T00:50:09.910
> 
> 标签：excel, ssis

在 Excel 中，我通过选择以下选项连接到我的 Team Foundation Server (TFS) 团队项目。

```
Team -> New List -> Connect -> Input List 
```

现在，我有一个空表，我可以开始在其中输入工作项，但我想使用 SSIS Excel 目标任务来填充这个电子表格，其中包含我从另一个系统迁移的工作项。

当我进入下拉列表以选择电子表格/表格时，电子表格中定义的表格（例如：）`VSTS_9d9899c3_7126_458b_9c61_91ad928b8418`不在列表中。所有验证列表似乎都在那里，但不是主表。

如何使用 SSIS 填充连接到 TFS 的 Excel 电子表格？

# css - IE9中的子导航被推到导航上方

> ID：13300508
> 
> 赞同：0
> 
> 时间：2012-11-09T00:51:04.667
> 
> 标签：css, internet-explorer-9, position

我阅读了一些关于此的帖子，对于我的生活，我无法弄清楚我与 ie9 的问题。在我的导航上，当我将鼠标悬停在服务上时，我的子导航有点被推到导航上方。我曾尝试对某些属性进行更改，但没有任何效果。该网站的链接是 www.colossalpoint.com 也在 ie 8 我的网站完全关闭了一些请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:58:57.383

修复菜单使用相对位置而不是静态

```
<li class="MenuBarItemIE" style="position: relative;"> 
```

代替

```
<li class="MenuBarItemIE" style="position: static;"> 
```

最好使用样式表文件，而不是内联

# .net - 多部分表单 POST 对 Google 的意外响应

> ID：13300510
> 
> 赞同：1
> 
> 时间：2012-11-09T00:51:11.183
> 
> 标签：.net, post, c++-cli, multipartform-data

因此，我正在开发一个小应用程序，该应用程序当前将指定图像从硬盘发布到 Google 的反向图像搜索并处理响应。问题是我得到的响应不是预期的。我已经尽我所能复制 POST 请求的结构，但我终其一生都无法弄清楚为什么我没有得到预期的响应。我确实收到了 200 响应代码，但 HTML 输出是某种 Google 错误（按图片搜索不可用。请在几个小时后重试）。我已经使用 Fiddler 来确定请求的结构，据我所知，从我的应用程序生成的请求几乎是相同的，除了缺少 Cookie 标头（可能是这样吗？）。如果是这样，我将如何创建一个 cookie 并将其插入我的请求中？

[这是通过 Google 的上传服务发出的请求。](http://justpaste.it/1i7v)

[这是通过我的应用发出的请求。](http://justpaste.it/1i7u)

这是我的代码：（注意：我确信它可以写得更有说服力和效率（例如使用 StringBuilder），我已经硬编码了很多，但它应该足以暂时测试基本功能）

```
 String^ url = "https://www.google.com/searchbyimage/upload";
    HttpWebRequest^ request = (HttpWebRequest^) WebRequest::Create(url);
    request->Method = "POST";
    request->UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0";
    request->Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
    request->Headers["Accept-Language"] = "en-US,en;q=0.5";
    request->Headers["Accept-Encoding"] = "gzip, deflate";
    String^ boundary = "-----------------------------23281168279961";
    request->ContentType = "multipart/form-data; boundary=" + boundary;
    request->Referer = "https://www.google.com/imghp?hl=en&tab=wi";

    String^ header = boundary + "\n";
    header += "Content-Disposition: form-data; name=\"image_url\"\n\n\n";

    header += boundary + "\n";
    header += "Content-Disposition: form-data; name=\"encoded_image\"; filename=\"2010-04-09-ec52529.png\"\n";
    header += "Content-Type: image/png\n\n";

    String^ footer = "\n" + boundary + "\n";
    footer += "Content-Disposition: form-data; name=\"image_content\"\n\n\n";

    footer += boundary + "\n";
    footer += "Content-Disposition: form-data; name=\"filename\"\n\n\n";

    footer += boundary + "\n";
    footer += "Content-Disposition: form-data; name=\"num\"\n\n";
    footer += "10\n";

    footer += boundary + "\n";
    footer += "Content-Disposition: form-data; name=\"hl\"\n\n";
    footer += "en\n";

    footer += boundary + "\n";
    footer += "Content-Disposition: form-data; name=\"safe\"\n\n";
    footer += "off\n";

    footer += boundary + "\n";
    footer += "Content-Disposition: form-data; name=\"bih\"\n\n";
    footer += "578\n";

    footer += boundary + "\n";
    footer += "Content-Disposition: form-data; name=\"biw\"\n\n";
    footer += "1366\n";
    footer += boundary + "--\n";

    array<Byte>^ headerData = Encoding::ASCII->GetBytes(header);
    array<Byte>^ imageData = File::ReadAllBytes(oldImage);
    array<Byte>^ footerData = Encoding::ASCII->GetBytes(footer);

    request->ContentLength = headerData->Length + imageData->Length + footerData->Length;

    Stream^ reqStream = request->GetRequestStream();

    reqStream->Write(headerData, 0, headerData->Length);
    reqStream->Write(imageData, 0, imageData->Length);
    reqStream->Write(footerData, 0, footerData->Length);

    HttpWebResponse^ response = (HttpWebResponse^) request->GetResponse();
    StreamReader^ reader = gcnew StreamReader(response->GetResponseStream());
    String^ things = reader->ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-08T08:20:05.350

事实证明，Google 在处理请求标头时有点挑剔。我遇到了三个问题：

*   图片采用base64编码，`+`替换为`-`，`/`替换为`_`
*   `Content-Type`不得引用边界参数
*   `Content-Disposition`名称参数必须用引号引起来

如果您使用的是 C#，这里有一个`MultipartFormDataContent`处理这些怪癖的替代品，代码改编自[这里](https://github.com/mono/mono/blob/master/mcs/class/System.Net.Http/System.Net.Http/MultipartFormDataContent.cs)：

```
public class MultipartFormDataContentCompat : MultipartContent
{
    public MultipartFormDataContentCompat() : base("form-data")
    {
        FixBoundaryParameter();
    }

    public MultipartFormDataContentCompat(string boundary) : base("form-data", boundary)
    {
        FixBoundaryParameter();
    }

    public override void Add(HttpContent content)
    {
        base.Add(content);
        AddContentDisposition(content, null, null);
    }

    public void Add(HttpContent content, string name)
    {
        base.Add(content);
        AddContentDisposition(content, name, null);
    }

    public void Add(HttpContent content, string name, string fileName)
    {
        base.Add(content);
        AddContentDisposition(content, name, fileName);
    }

    private void AddContentDisposition(HttpContent content, string name, string fileName)
    {
        var headers = content.Headers;
        if (headers.ContentDisposition != null)
            return;
        headers.ContentDisposition = new ContentDispositionHeaderValue("form-data")
        {
            Name = QuoteString(name),
            FileName = QuoteString(fileName)
        };
    }

    private string QuoteString(string str)
    {
        return '"' + str + '"';
    }

    private void FixBoundaryParameter()
    {
        var boundary = Headers.ContentType.Parameters.Single(p => p.Name == "boundary");
        boundary.Value = boundary.Value.Trim('"');
    }
} 
```

并上传您的图片：

```
private static string FileToBase64(string imagePath)
{
    byte[] content = File.ReadAllBytes(imagePath);
    string base64 = Convert.ToBase64String(content).Replace('+', '-').Replace('/', '_');
    return base64;
}

public static void UploadImage(string imagePath)
{
    using (var client = new HttpClient())
    {
        var form = new MultipartFormDataContentCompat();
        form.Add(new StringContent(FileToBase64(imagePath)), "image_content");
        form.Add(new StringContent(Path.GetFileName(imagePath)), "filename");
        var response = client.PostAsync("https://images.google.com/searchbyimage/upload", form).Result;
        // Do whatever you want with the response
    }
} 
```

# google-apps-script - 谷歌脚本编辑文档表中的文本

> ID：13300515
> 
> 赞同：0
> 
> 时间：2012-11-09T00:51:37.170
> 
> 标签：google-apps-script, google-docs

因此，我通过从电子表格中提取值并以表格形式编写它们来创建 Google 文档报告。但是，文本默认为正常，我想更改行距。

我尝试从前端开始并将 insertParagraph 放在单元格文本中。我从后端尝试并编辑已经存在的文本。我试过只创建一个文档元素并手动执行每个单元格，但没有任何效果！我无计可施！帮助！

```
var a1 = sheet.getRange(1,1).getValue();
var b1 = sheet.getRange(1,2).getValue();
var a2 = sheet.getRange(2,1).getValue();
var b2 = sheet.getRange(2,2).getValue();
var a3 = sheet.getRange(3,1).getValue();
var b3 = sheet.getRange(3,2).getValue();
var a4 = sheet.getRange(4,1).getValue();
var b4 = sheet.getRange(4,2).getValue();

var RequestorInfoCells = [
 [a1, a2],
 [a2, b2],
 [a3, b3],
 [a4, b4]
 ];

var TableReqInfo = file.insertTable(0, RequestorInfoCells); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:17:46.600

我看不到您可以对脚本中的行距做任何事情，但只需使用 setFontFamily()。您可以在插入表之后链接它。

```
var TableReqInfo = file.insertTable(0, RequestorInfoCells).editAsText().setFontFamily(DocumentApp.FontFamily.CALIBRI); 
```

# php - 为什么没有将数据插入 MySql

> ID：13300518
> 
> 赞同：0
> 
> 时间：2012-11-09T00:51:45.173
> 
> 标签：php, mysql

我是 PHP/MYSql 的新手，我正在尝试构建一个提交给 MYSql 的表单。这是表单代码：

```
 <form action="insert.php" method="post">
    First Name: <input type="text" name="first"><br>
    Last Name: <input type="text" name="last"><br>
    Phone: <input type="text" name="phone"><br>

    <input type="Submit">
    </form> 
```

这是insert.php：

```
<?php 
include "db-connect.php";

$first = $_POST['first'];
$last = $_POST['last'];
$phone = $_POST['phone'];

$query = "INSERT INTO users VALUES ('', '$first', '$last', '$phone')";
$result= mysql_query($query);

if($result) {
    echo "Data entered Successfully";
} else {
    echo "You suck at coding";
}

mysql_close();

?> 
```

再说一次，我真的很新，所以如果你能像我 5 岁那样向我解释，那就太好了。

编辑：我用 myphpadmin gui 构建了表。

这些字段是：

id：INT，Primary，自动递增 first：varchar (50) last：varchar (50) phone：varchar (25)

**EDIT2：按照 Esailija 的建议，我添加了 mysql_error() 函数。这是响应：“不正确的整数值：第 1 行的列 'id' 的''”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:59:25.177

尝试

```
$query = "INSERT INTO users (first, last, phone) VALUES ('$first', '$last', '$phone')"; 
```

...其中 first、last 和 phone 是表中字段的实际名称。

并且 +1 用于用 echo mysql_error() 替换 echo“你不擅长编码”。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:57:00.367

我不太确定，因为您没有提供 mysql 表模式。

```
$query = "INSERT INTO users (first, last, phone)
          VALUES ('" . $first . "', '" . $last . "', '" . $phone . "') 
```

如果您的`id`列设置为 INTEGER 而不是`AUTO_INCREMENT`，请确保在查询中插入正确的整数，即：

```
$id = 72;
$query = "INSERT INTO users VALUES ('" . $id . "', '" . $first . "', '" . $last . "', '" . $phone . "') 
```

但如果是`AUTO_INCREMENT`，那么第一个代码应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:59:12.253

尝试

```
$query = "INSERT INTO users (`id`, `first`, `last`, `phone`) VALUES (NULL, '$first', '$last', '$phone')"; 
```

这是一个更完整的查询版本，包括要插入的列的名称。还要确保在添加到查询的字段中没有任何引号（$first、$last、$phone）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T01:07:43.333

当您`INSERT`不指定字段时，MySQL 假定您按照声明它们的顺序插入所有字段。由于`id`是数字，因此不能设置为字符串。最佳做法是指定字段名称。例如，如果表格包含更多字段，它不会破坏您现有的代码。

还没有人说过（当我开始写这篇文章的时候）你的代码有一个可怕的 SQL 注入漏洞。坚持使用`mysql`PHP 中的旧接口（不升级到`mysqli`or `PDO`），以下是您无需担心[小 Bobby 表的](http://xkcd.com/327/)方法：

```
<?php 
include "db-connect.php";

$query = sprintf(
  "INSERT INTO users (first, last, phone) VALUES ('%s', '%s', '%s')",
  mysql_real_escape_string($_POST['first']),
  mysql_real_escape_string($_POST['last']),
  mysql_real_escape_string($_POST['phone'])
);
$result = mysql_query($query);

if ($result) {
    echo 'Data entered "Successfully".';
} else {
    echo 'You suck at coding because: ', mysql_error();
}

?> 
```

PS我也可以建议使用`register_shutdown_function`“db-connect.php”来关闭数据库连接吗？我还建议跟踪`$cid`从`mysql_connect(...)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T01:19:51.247

您执行以下操作：

1) 忘记`mysql_*`函数并从一开始就以正确的方式对项目进行编码。任何教程或任何你正在浏览的东西都试图教你如何使用任何功能的 PHP+MySQL，这些功能都是从`mysql_`浏览器上的后退按钮开始的。任何新项目都应该使用 PDO 或 mysqli。PHP[手册](http://php.net/mysql_query)中有一个很大的红色警告，阻止您使用这些函数。它们将在 PHP 的未来版本中被删除，这是有充分理由的。而是使用[PDO](http://php.net/pdo)或[mysqli](http://php.net/mysqli)。

2) 来自用户的任何变量都应被视为已污染。这包括`$_POST`变量。处理这个问题的最好方法是准备好的语句，这是它们的主要目的（而且它们对于多个查询也更快）。

```
// Connect to the DB substituting the values for your values:
$dbh = new PDO('mysql:host=localhost;dbname=your_database', $db_user, $db_password);

// Get PDO to display errors. You can comment this out for the live script
$dbh->setAttribute(PDO_ATTR_ERRMODE, PDO_ERRMODE_EXCEPTION);

// Prepare the statement to be used during your query
$stmt = $dbh->prepare("INSERT INTO users (first, last, phone) VALUES ( :first , :last , :phone )");

// Bind the values to the prepared statement
$stmt->bindValue( ':first' , $first );
$stmt->bindValue( ':last' , $last );
$stmt->bindValue( ':phone' , $phone );

// Execute the query
$stmt->execute(); 
```

如果您希望优雅地处理产生的错误，这里的任何内容也可以包裹在 try-catch 块中。

# objective-c - NSMutableDictionary 返回带有重音词的错误值

> ID：13300521
> 
> 赞同：0
> 
> 时间：2012-11-09T00:52:36.067
> 
> 标签：objective-c

我正在尝试从 xml NSData *xmlData = [request responseData]; 获取字符串

```
NSString *stringData = [[NSString alloc] initWithData:xmlData encoding:NSUTF8StringEncoding];

loginParsingDelegate *loginResultParser = [[loginParsingDelegate alloc] init];
NSXMLParser *parser = [[NSXMLParser alloc] initWithData:xmlData];
[parser setDelegate:loginResultParser];
[parser parse];

 NSString *filePath = [NSString stringWithFormat:@"%@/conf.plist", DOCUMENTS_FOLDER] ;
NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] init];
   NSString *city = [parsingResult objectForKey:@"city"]; 
```

但是当有口音时，这会出错...例如：Sao Paulo = "Sao Paulo" but São Paulo I'm getting "ão Paulo"

怎么了？xml返回正确...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T01:21:32.100

我用一个简单的 XML 字符串启动了你的代码

```
<city>São Paulo</city> 
```

看起来您在委托中没有正确处理字符。因为这个 XML`- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string`实际上被调用了两次：第一次用“S”，第二次用“ão Paulo”。您应该处理这种情况，因为无论如何这种方法不能保证一次性为您提供完整的字符串。

> 解析器：找到字符：
> 
> 由解析器对象发送，以向其委托提供表示当前元素的全部或**部分字符的字符串。**

**更新：**

一个极其简单的例子。给定一个 XML

```
<cities>
    <city>São Paulo</city>
    <city>Rio de Janeiro</city>
    <city>Salvador</city>
</cities> 
```

我们可以制作这样的解析器

```
@implementation ParserClass {
    NSMutableString *elementText;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    elementText = nil; // we are not handling elements other than "city"
    if ([elementName isEqualToString:@"city"]) {
        elementText = [NSMutableString new]; // prepare an empty string for city name
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [elementText appendString:string]; // append new characters to the element text
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    // element did end - string now contains text of the element
    if ([elementName isEqualToString:@"city"]) {
        NSString *cityName = [elementText copy]; // now we have a full city name
        ...
    }
}

...

@end 
```

请注意，这*不是*解析任何 XML 的通用代码。如果您了解 SAX 解析的工作原理，您当然可以编写一门课程。

# methods - 如何获取 Nunit 自定义属性的值

> ID：13300526
> 
> 赞同：0
> 
> 时间：2012-11-09T00:53:27.923
> 
> 标签：methods, attributes, nunit

我正在使用 NUNIT。我想从 Nunit 测试 DLL 中检索某些特定类型的测试。

我已经定义了一个自定义属性，然后我将其分配给测试方法，如下所示：

```
 [Test, Tier(Tier.Second)]
    public void ThisIsMyTest()
    { ... } 
```

这是我的自定义属性定义：

```
 public enum Tier
{
    First = 1,
    Second,
    Third,
    Fourth
}

[AttributeUsage(AttributeTargets.Method, AllowMultiple = false)]
public class TierAttribute : PropertyAttribute
{
    public TierAttribute(Tier tier)
        : base(tier)
    { }
} 
```

现在我想选择使用具有特定层值的自定义属性的方法。

首先我加载我的程序集：

```
Type loadTests = ltAssm.GetType("Assm.Tests.LoadTests." + args[0]); 
```

然后我尝试仅检索带有该属性的测试：

```
 List<MethodInfo> tests = loadTests.GetMethods()
                                   .Where(m => m.GetCustomAttributes(typeof(TierAttribute), true).Count() > 0).ToList<MethodInfo>()
                                   .Where(t => (((t.GetCustomAttributes(typeof(TierAttribute), true).GetValue(0)))).ToString() == args[1]).ToList<MethodInfo>(); 
```

但它的出现是空的。

顺便说一句，我已经在上面的语句中尝试了没有第一个 WHERE 子句（并且只使用了第二个），但这会发出索引超出范围错误。

任何想法表示赞赏，谢谢！

# android - 每次应用程序启动时请求 Google Cloud Messaging (GCM) 注册 ID

> ID：13300527
> 
> 赞同：8
> 
> 时间：2012-11-09T00:53:30.447
> 
> 标签：android, push-notification, google-cloud-messaging

我已阅读有关 GCM 可能会刷新注册 ID 的文章，没有定期循环。我正在尝试使用推送通知构建应用程序，但不太确定如何处理此类刷新的注册 ID。

我的第一个策略是每次应用启动时请求注册 ID 并将其发送到应用服务器。它看起来工作，但不知何故听起来不对......

这样做可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:54:27.890

基本上，您应该在主要活动中执行以下操作：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_layout);

    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);

    final String regId = GCMRegistrar.getRegistrationId(this);

    if (regId.equals("")) {
        GCMRegistrar.register(this, GCMIntentService.GCM_SENDER_ID);
    } else {
        Log.v(TAG, "Already registered");
    }
} 
```

**之后，每当**应用收到`com.google.android.c2dm.intent.REGISTRATION`带有`registration_id`额外内容的意图时，您应该将注册 ID 发送到您的应用服务器。当 Google 定期更新应用的 ID 时，可能会发生这种情况。

您可以通过扩展`com.google.android.gcm.GCMBaseIntentService`您自己的实现来实现这一点，例如：

```
public class GCMIntentService extends GCMBaseIntentService {

    // Also known as the "project id".
    public static final String GCM_SENDER_ID = "XXXXXXXXXXXXX";

    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super(GCM_SENDER_ID);
    }

    @Override
    protected void onRegistered(Context context, String regId) {
        // Send the regId to your server.
    }

    @Override
    protected void onUnregistered(Context context, String regId) {
        // Unregister the regId at your server.
    }

    @Override
    protected void onMessage(Context context, Intent msg) {
        // Handle the message.
    }

    @Override
    protected void onError(Context context, String errorId) {
        // Handle the error.
    }
} 
```

有关更多详细信息，我会（重新）阅读[编写客户端代码](http://developer.android.com/guide/google/gcm/gs.html#android-app)的文档和[GCM 文档的高级部分](http://developer.android.com/guide/google/gcm/adv.html#reg-state)。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T13:04:57.020

注册刷新不包含在新的 GCM 库中。

科斯汀[·马诺拉切的话](https://stackoverflow.com/questions/17893117/gcm-registration-id-changed/17899972#17899972)

> “定期”刷新从未发生，并且注册刷新不包含在新的 GCM 库中。
> 
> 注册 ID 更改的唯一已知原因是应用程序在升级时收到消息会自动取消注册的旧错误。在修复此错误之前，应用程序在升级后仍然需要调用 register()，并且到目前为止注册 ID 可能会在这种情况下发生变化。显式调用 unregister() 通常也会更改注册 ID。
> 
> 建议/解决方法是生成您自己的随机标识符，例如保存为共享首选项。在每次应用升级时，您都可以上传标识符和可能的新注册 ID。这也可能有助于跟踪和调试服务器端的升级和注册更改。

# rsa - Haskell素数生成器根据非常大的数字的位

> ID：13300533
> 
> 赞同：3
> 
> 时间：2012-11-09T00:54:19.723
> 
> 标签：rsa, primes, haskell, primality-test

我刚进入haskell。我正在尝试编写一个质数生成器，它会根据我给它的位数返回一个质数。我是否使用某种埃拉托色尼筛？这会是最快的方法吗？目前，我已经有一个 Miller-Rabin 的素数检查器。有正确的方法和错误的方法吗？此外，我希望能够非常快速地生成大量数据。

前任。生成一个 32 位的素数

```
genp 32 
```

代码到此为止。

```
import System.IO
import System.Random
import Data.List
import Control.Monad
import Control.Arrow

primesTo100 = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97]

powerMod :: (Integral a, Integral b) => a -> a -> b -> a
powerMod m _ 0 =  1
powerMod m x n | n > 0 = join (flip f (n - 1)) x `rem` m where
  f _ 0 y = y
  f a d y = g a d where
    g b i | even i    = g (b*b `rem` m) (i `quot` 2)
          | otherwise = f b (i-1) (b*y `rem` m)

witns :: (Num a, Ord a, Random a) => Int -> a -> IO [a]
witns x y = do
     g <- newStdGen 
     let r = [9080191, 4759123141, 2152302898747, 3474749600383, 341550071728321]
         fs = [[31,73],[2,7,61],[2,3,5,7,11],[2,3,5,7,11,13],[2,3,5,7,11,13,17]]
     if  y >= 341550071728321
      then return $ take x $ randomRs (2,y-1) g
       else return $ snd.head.dropWhile ((<= y).fst) $ zip r fs

isMillerRabinPrime :: Integer -> IO Bool
isMillerRabinPrime n | n `elem` primesTo100 = return True
                     | otherwise = do
    let pn = pred n
        e = uncurry (++) . second(take 1) . span even . iterate (`div` 2) $ pn
        try = return . all (\a -> let c = map (powerMod n a) e in
                                  pn `elem` c || last c == 1)
    witns 100 n >>= try

type Prime = Integer

isProbablyPrime :: Prime -> Bool
isProbablyPrime n = isMillerRabinPrime n

pickFirstFrom :: Integer -> Prime
pickFirstFrom n = head $ filter isProbablyPrime [n..]

numBits = 1024
constantStdGen = mkStdGen 1234567 -- a random number

randomByBits n = fst $ randomR (2^(n-1), 2^n-1) constantStdGen

answer = pickFirstFrom (randomByBits numBits) 
```

将库函数与 RSA 一起使用：

```
import Control.Monad.Fix 
import Math.NumberTheory.Primes

rndPrime :: Int -> IO Integer
rndPrime bits =
    fix $ \again -> do
        x <- fmap (.|. 1) $ randomRIO (2^(bits - 1), 2^bits - 1)
        if isPrime x then return x else again

rndPrimes :: Int -> IO (Integer, Integer)
rndPrimes bits = do
    p <- rndPrime bits
    fix $ \again -> do
        q <- rndPrime bits
        if p /= q then return (p, q) else again 
```

谢谢大家，我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T03:17:01.670

为了生成特定位大小的奇数随机素数，实际上有这种方法，假设（通常是概率）素性测试`isPrime`：

```
rndPrime :: Int -> IO Integer
rndPrime bits =
    fix $ \again -> do
        x <- fmap (.|. 1) $ randomRIO (2^(bits - 1), 2^bits - 1)
        if isPrime x then return x else again 
```

对于 RSA：

```
rndPrimes :: Int -> IO (Integer, Integer)
rndPrimes bits = do
    p <- rndPrime bits
    fix $ \again -> do
        q <- rndPrime bits
        if p /= q then return (p, q) else again 
```

[您可以在arithmoi](http://hackage.haskell.org/package/arithmoi)包中找到现成的快速素性测试，包括当前最先进的*Baillie PSW 测试*。然后只需导入`Math.NumberTheory.Primes`模块，上面的代码就可以开箱即用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:27:26.630

你很幸运，先生。素数出现得如此频繁，以至于您可以尝试从给定的起始数字枚举所有数字并选择第一个是素数的数字。

解决方案是这样的

```
import System.Random

type Prime = Integer

isProbablyPrime :: Prime -> Bool
isProbablyPrime n = error "insert miller rabin here"

pickFirstFrom :: Integer -> Prime
pickFirstFrom n = head $ filter isProbablyPrime [n..]

numBits = 1024
constantStdGen = mkStdGen 1234567 -- a random number

randomByBits n = fst $ randomR (2^(n-1), 2^n-1) constantStdGen

answer = pickFirstFrom (randomByBits numBits) 
```

这`answer`将是您在评论中指定的。但是请注意，您必须修改此代码以允许多个常量种子！

# django - Django Celery 的处理器密集型任务

> ID：13300536
> 
> 赞同：1
> 
> 时间：2012-11-09T00:54:25.387
> 
> 标签：django, celery, django-celery

假设，只是为了举例，我有一个用于处理视频的 Django Web 应用程序，我想使用 celery 来卸载其中的一些任务。如果我在 Celery 中有一个任务，例如视频编辑，那是处理器密集型的，我不想在运行 Django 的同一台服务器上运行它。有没有办法将您在 Django 应用程序中定义的任务发送到另一台服务器上远程运行？

我刚刚阅读有关 Celery 的所有文档，但没有看到这种情况。似乎适合这种情况的唯一方法是在其他地方运行 Celery 并使用 Celery HTTP 网关向它发出 HTTP 请求。

对于 django-celery，任务在哪里执行？您在哪里设置代理 URL 或在运行 django 的机器上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:17:31.467

Celery 开箱即用地执行远程任务。假设您有一个 python 模块，其中有一个 celery worker 来处理您的视频内容，称为*videoprocessor.py*。您将其放在远程计算机上并在那里启动该工作人员：

```
celery -A videoprocessor worker 
```

（如果你想从命令行运行它）

您还可以将该模块放置在 Web 服务器机器上，但您*不会*从那里启动它。然而，它位于这样一个位置，它可以由您的 Web 服务器机器上的主脚本导入，该脚本称为 client.py 以便于论证。此外，它以与远程机器上完全相同的名称导入，例如以“MyPackage.videoprocessor”开头。

现在，当 Web 服务器上的主脚本 client.py 导入您的 videoprocessor.py 模块时，它会从该模块中的工作程序中创建一个*签名。*此签名对远程计算机上的 videoprocessor.py 也有效。而且由于那个正在运行，而服务器机器上的 videoprocessor.py 没有运行，所以每次都会使用远程工作人员。

确保远程计算机上的工作人员使用与 Web 服务器计算机上的客户端脚本相同的后端。这可能是 Redis 或 RabbitMQ 或其他东西，您至少需要指定 IP 号，可能更多（数据库、端口），具体取决于您的设置。

# algorithm - 在 O(log n) 时间内从二叉树中获取随机数

> ID：13300537
> 
> 赞同：6
> 
> 时间：2012-11-09T00:54:31.693
> 
> 标签：algorithm, random, binary-tree

是否有可能在 O(log n) 时间内从平衡的二叉搜索树中获得均匀分布的随机值（调用函数意味着它同样可能在树中获得任何值）？

我最初的想法是生成一个随机数 0、1 或 2。如果为 0，则从当前节点走左边的路径，如果为 1，则走右边的路径，否则节点的值为随机值。如果你点击一个叶子节点，取那个节点的值。我不认为这会是随机分布的。

这是出于好奇，而不是针对特定应用程序。

如果您需要任何澄清，请告诉我。

一个例子是如果你有树

```
 1
    / \
   2   5
       /
      3 
```

调用时统一返回数字1、2、3、5`int get_random_number()`

澄清：所有其他正常的 BST 操作应保持 O(log n)，如 insert()、delete() 等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T01:02:56.907

您的想法不会创建随机分布。无论树的大小，根都有 1/3 的机会被采摘。

如果你知道树中元素的数量，生成一个介于 1 和 N 之间的数字 k，并得到树中第 k 个最大的元素。有关平衡树的 O(logn) 方法，请参见[此处](https://stackoverflow.com/questions/2329171/find-kth-smallest-element-in-a-binary-search-tree-in-optimum-way/2329236#2329236)。

# oracle - 在理解 Oracle 分析功能方面需要帮助

> ID：13300546
> 
> 赞同：0
> 
> 时间：2012-11-09T00:55:44.833
> 
> 标签：oracle, duplicates, row-number, analytic-functions, rowid

我有以下代码来检测单个表中的重复项：

```
 UPDATE tab
        SET dup = 'Y'
      WHERE ROWID IN
        (SELECT tab_o.ROWID
          FROM tab tab_o,
            (SELECT *
             FROM tab tab_i
             WHERE ROWID IN
              (SELECT ROWID
               FROM
                (SELECT ROWID,
                  ROW_NUMBER() OVER(PARTITION BY a, b, c ORDER BY a, b, c) dupl
                 FROM tab
                 WHERE a IS NOT NULL
                   AND a    = 1
                   AND b    = 1
                   AND c    = 3
                )
               WHERE dupl > 1
              )
          ) res
         WHERE tab_o.a  = res.a
          AND tab_o.b   = res.b
          AND tab_o.c   = res.c
        ); 
```

我搜索了很多网站，发现大多数人都遵循这种有效的方式。但是我没有找到关于这些嵌套查询如何工作的正确解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:06:06.620

让它更简单。无需分析。

样品表：

```
12:57:37 SYSTEM@dwal> create table dupe_test
                   2  (a number, b number, c number, is_dupe char);

Table created.                                                                           

12:57:50 SYSTEM@dwal> insert all                    
12:57:50   2    into dupe_test values (1, 1, 1, 'n')
12:57:50   3    into dupe_test values (1, 1, 1, 'n')
12:57:50   4    into dupe_test values (1, 1, 1, 'n')
12:57:50   5    into dupe_test values (1, 2, 1, 'n')
12:57:50   6    into dupe_test values (1, 2, 1, 'n')
12:57:50   7    into dupe_test values (1, 2, 1, 'n')
12:57:50   8  select * from dual;                   

6 rows created. 
```

它是：

```
12:58:17 SYSTEM@dwal> select * from dupe_test;

         A          B          C I            
---------- ---------- ---------- -            
         1          1          1 n            
         1          1          1 n            
         1          1          1 n            
         1          2          1 n            
         1          2          1 n            
         1          2          1 n            

6 rows selected. 
```

独特的价值观：

```
12:59:35 SYSTEM@dwal> select rowid,  t.* 
                   2  from dupe_test t 
                   3  where rowid in (select min(rowid) 
                   4                  from dupe_test 
                   5                  group by a, b, c);

ROWID                       A          B          C I                                                                        
------------------ ---------- ---------- ---------- -                                                                        
AAARN1AABAAAO9JAAD          1          2          1 n                                                                        
AAARN1AABAAAO9JAAA          1          1          1 n 
```

更新和结果：

```
12:59:51 SYSTEM@dwal> update dupe_test t 
                   2  set is_dupe = 'y' 
                   3  where rowid not in (select min(rowid) 
                   4                      from dupe_test 
                   5                      group by a, b, c); 

4 rows updated.                                                                                                                    

13:00:45 SYSTEM@dwal> select * from dupe_test;                                                                                     

         A          B          C I                                                                                                 
---------- ---------- ---------- -                                                                                                 
         1          1          1 n                                                                                                 
         1          1          1 y                                                                                                 
         1          1          1 y                                                                                                 
         1          2          1 n                                                                                                 
         1          2          1 y                                                                                                 
         1          2          1 y                                                                                                 

6 rows selected. 
```

**更新：**

> 我想要做的是我发现表中的一个条目在同一个表中重复，所有这些条目都将被标记为 dupl 标志，包括原始条目

仍然不需要分析。只需添加`having count(*) = 1`您的子查询，因此您将只更新非唯一行。`Having`子句基本上是聚合函数的 where 条件，无需将查询包装在子查询中。最后执行。

```
11:03:00 SYSTEM@dwal> insert into dupe_test values (1,3,1,'n') -- add some unique row
11:03:09   2  /                                                                      

1 row created.                                                                       

11:03:10 SYSTEM@dwal> update dupe_test set is_dupe = 'y'                             
11:03:27   2  where rowid not in                                                     
11:03:34   3  (select min(rowid) from dupe_test                                      
11:03:51   4  group by a,b,c                                                         
11:04:00   5  having count(*) = 1);                                                  

6 rows updated.                                                                      

11:04:06 SYSTEM@dwal> select * from dupe_test;                                       

         A          B          C I                                                   
---------- ---------- ---------- -                                                   
         1          1          1 y                                                   
         1          1          1 y                                                   
         1          1          1 y                                                   
         1          2          1 y                                                   
         1          2          1 y                                                   
         1          2          1 y                                                   
         1          3          1 n                                                   

7 rows selected. 
```

# java - 处理多个数组并返回值

> ID：13300552
> 
> 赞同：0
> 
> 时间：2012-11-09T00:56:16.183
> 
> 标签：java

我一直在开发一个程序，该程序要求用户输入电路的值，并计算给定时间的电荷。我已经取得了一些进展，但是当我的一个数组拒绝返回值并且 eclipse 中提到的原因是：

*   *此行有多个标记
*   Ass1 类型中的方法 genQArray(int[], int, double[], int, int, int, int) 不适用于参数 (int[], int, double, int, int, int, int)
*   Ass1 类型中的方法 genQArray(int[], int, double[], int, int, int, int) 不适用于参数 (int[], int, int)*

老实说，我现在不知道问题出在哪里，我想找到解决方案，所以我可以继续研究这个程序。任何帮助都将不胜感激。

这是我的代码，虽然它尚未完成：

```
import java.util.* ;
public class Ass1 {

    static int VIX ; // Traversing Voltage Component in Component Value Array 
    static int CIX ; 
    static int LIX ; 
    static int RIX ; 

    public static void main (String args[]) { 
        double compArr  = getCircuitComp() ; 
        boolean outerLoopFlag ; 
        boolean innerLoopFlag ; 
        int i ; 
        int n ;
        int timeArr[] = new int[n] ; 
        int qArray[] = new int[n] ;
        Scanner input = new Scanner (System.in) ;
        while ( outerLoopFlag = true) { 

            System.out.print("Reset Component Values (y/n) ?") ; 
            String answer = input.nextLine() ; 
            char ans = answer.charAt(0) ;  
            if ( ans == 'y') { 
                compArr = getCircuitComp() ; 

            } 
            else { 
                    } 
            innerLoopFlag = true ; 
            while ( innerLoopFlag = true){ 
                System.out.print("Run a simulation?") ; 
                String answer2 = input.nextLine() ; 
                char ans2 = answer.charAt(0) ; 
                if (ans2 == 'y'){
                System.out.print("Enter a maximum time :") ; 
                double tMax = input.nextDouble(); 
                System.out.print("Enter a time step:") ; 
                double tStep = input.nextDouble();
                timeArr[n]= genTimeArray(tMax,tStep,n);  
                qArray[n] = genQArray( timeArr , n , compArr,  VIX ,  CIX ,  RIX ,  LIX) ;  
                displayQFunction(timeArr,qArray,n);

                }

                while (innerLoopFlag = false) { 
                    System.out.print("Do you want to quit (y/n)?") ;
                    String answer3 = input.nextLine() ; 
                    char ans3 = answer3.charAt(0) ; 

                }

            }   

    }

}

    public static int getCircuitComp() {
        Scanner input = new Scanner (System.in) ; 
        boolean flag = true ; 
        double compArr [] = new double[4]; 
        while (  flag = true ) { 
            System.out.print("Enter a value V ( 4 to 15):") ; 
            compArr[VIX] = input.nextDouble() ;  
            if ((compArr[VIX] >= 4.0) && (compArr[VIX] <= 15.0)){ 
                flag = false ; 
            }
            else{ 
                System.out.print("Bad Value" + compArr[VIX] ) ;
            }

        }
        flag = true  ; 
        while (flag) { 
            System.out.print("Enter a valur for R ( 5 to 10) :") ; 
            compArr[RIX] = input.nextDouble();  
            if((compArr[RIX] >= 5.0) && (compArr[RIX] <= 10.0)){
flag = false;
            }
            else{
                System.out.print("Bad Value:"+ compArr[RIX]) ; 

            }

        }
            flag = true ; 
            while(flag) { 
                System.out.print("Enter a value for C( 1e-9 to 1e-7 ): ") ; 
                compArr[CIX] = input.nextDouble();  
                if (( compArr[CIX] >= Math.pow(10, -9)) && (compArr[CIX] <= Math.pow(10, -7))){
                    flag = false ; 
                }
                else{ 
                    System.out.print("Bad Value :"+ compArr[CIX]);
                }

            }
                flag = true ; 
                while(flag){ 
                    System.out.print("Enter a value for L(1e-3 to 1e-1) "); 
                    compArr[LIX] = input.nextDouble(); 
                    if(compArr[LIX]>= Math.pow(10,-3) && compArr[LIX] <= Math.pow(10, -1)){
                        flag = false ; 
                    }
                    else{ 
                        System.out.print("Bad Value :" + compArr[LIX]) ; 

                    }
                }
                return (int) (compArr[CIX] + compArr[LIX] + compArr[RIX] + compArr[VIX]) ;  
            }

        public static int genTimeArray( double tMax , double tStep , int n ) { 
             int t[] = new int[n] ;
             n = 1 ; 
             t[0] = 0 ; 
             t[n] = (int) (t[n-1] + tStep) ; 
             n = n + 1 ; 

            return t[n] ;

        } 
        public static int genQArray( int timeArr[] , int n , double compArr [], int VIX , int CIX , int RIX , int LIX ) {
            double q[] = new double[n] ; 
            n = 1 ;  
            double s = (compArr[VIX])*(compArr[CIX]) ; 
            double t = Math.exp((-compArr[RIX])/(2*compArr[LIX])); 
            double c = (1)/((compArr[LIX])*(compArr[CIX])) ; 
            double v = Math.pow((compArr[RIX])/(2*(compArr[LIX])),2) ;
            double r = (timeArr[n])*(Math.sqrt(c-v)) ;
            q[n] = (s)*(t)*(Math.cos(r)) ; 

            return (int) q[n] ;

        }

    } 
```

在此先感谢您的帮助 ！！

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:13:08.553

您需要将`compArr`变量声明从

```
double compArr  = getCircuitComp() ; 
```

至

```
double[] compArr  = getCircuitComp() ; 
```

正确匹配方法的参数`genQArray`。这将涉及返回`double[]`from`getCircuitComp()`而不是`int`类型。

```
public static double[] getCircuitComp() { 
```

在此方法中，您可能打算返回变量：

```
double compArr [] = new double[4]; 
```

另请注意，您的变量：

```
static int VIX ; 
static int CIX ; 
static int LIX ; 
static int RIX ; 
```

例如，将全部默认为`0`so，`compArr[VIX]`并将`compArr[CIX]`指向数组中索引 0 处的相同值`compArr`。要修复，您可以指定值：

```
static int VIX = 0; 
static int CIX = 1; 
... 
```

# ruby - 改进正则表达式方法

> ID：13300554
> 
> 赞同：0
> 
> 时间：2012-11-09T00:56:23.430
> 
> 标签：ruby, regex, nokogiri

我正在尝试改进这种用于搜索演员维基页面并拉出所有电影链接的方法。目前，我正在使用 nokogiri 解析页面和正则表达式来检索标题中带有单词“（电影）”的所有链接，但这仍然错过了我需要的大部分链接。有没有人建议检索更多相关链接？

```
 def find_films_by_actor(doca, out = [])
        puts "Entering find_films_by_actor with #{find_name_title(doca)}."
        all_links = doca.search('//a[@href]')
        all_links.each do |link|
            link_info = link['href']
            if link_info.include?("(film)") && !(link_info.include?("Category:") || link_info.include?("php"))
                then out << link_info end
          end
        out.uniq.collect {|link| strip_out_name(link)}
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:50:58.420

我发现使用 css 获取您想要的链接是最干净的：

```
links = doc.search 'a[title*="(film)"]' 
```

您甚至可以进行节点集数学以缩小范围：

```
links -= doc.search 'a[title*=foo]' 
```

要获取唯一名称（来自文本）：

```
links.map(&:text).uniq 
```

# android - 我想通过给出时间限制来更新来自服务器的数据

> ID：13300555
> 
> 赞同：2
> 
> 时间：2012-11-09T00:56:24.443
> 
> 标签：android, database

我想使用时间调度每 15 分钟更新一次来自服务器的数据。有没有办法，让我们可以更新数据背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:09:37.780

使用警报管理器将其设置为每 15 分钟发送一次广播以唤醒您的 intentservice 实例并从那里进行更新。

编辑：

为了您的方便，我添加了完整的启动方式，您可能希望在打开应用程序时启动警报。无论哪种方式，只需遵循警报管理器和意图服务所在的代码即可。

首先创建一个监听启动完成的广播接收器

```
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

import com.example.CheckUpdateIntentService;

public class BootCompleteReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //Create pending intent to trigger when alarm goes off
        Intent i = new Intent(context, CheckUpdateIntentService.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);

        //Set an alarm to trigger the pending intent in intervals of 15 minutes
        AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        //Trigger the alarm starting 1 second from now
        long triggerAtMillis = Calendar.getInstance().getTimeInMillis() + 1000;
        am.setInexactRepeating(AlarmManager.RTC_WAKEUP, triggerAtMillis, AlarmManager.INTERVAL_FIFTEEN_MINUTES, pendingIntent);
    }
} 
```

现在让意图服务进行实际更新

```
import android.content.Context;
import android.content.Intent;
import android.app.IntentService;

public class CheckUpdateIntentService extends IntentService {

    public CheckUpdateIntentService()
    {
        super(CheckUpdateIntentService.class.getName());
    }

    @Override
    protected void onHandleIntent(Intent intent)
    {
        //Actual update logic goes here
        //Intent service itself is already a also a Context so you can get the context from this class itself
        Context context = CheckUpdateIntentService.this;
        //After updates are done the intent service will shutdown itself and wait for the next interval to run again
    }
} 
```

在您的 AndroidManifest.xml 中添加以下项目：

接收开机完成广播的权限

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

然后在应用程序标签中添加您创建的 BootCompleteReceiver 以及您感兴趣的相应意图过滤器，当然还有意图服务组件

```
<receiver android:name=".BootCompleteReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>
<service android:name=".CheckUpdateIntentService" ></service> 
```

这是一个非常简单的实现，如果您需要更多帮助，可以先尝试一下，让我们知道。

# php - 在 WordPress 中设置 chmod 时遇到问题

> ID：13300556
> 
> 赞同：0
> 
> 时间：2012-11-09T00:56:25.993
> 
> 标签：php, wordpress

基本上我正在为我的博客创建一个主题，我需要将其设置`customcss.css`为可写`777`，以便当我在后端更改设计时它会写入该文件。

`chmod`当我手动设置时，一切都 100% 工作`777`，但是当我尝试将 chmod 设置为时，`777`激活它时会显示以下错误消息：

> 警告：chmod()：第 74 行 /var/www/vhosts/domainname.com/wptest/wp-content/themes/ctheme/ThemeFunctions/th‌​emeinstall.php 中不允许操作

我正在使用的代码如下：

```
$rootpage = get_theme_root();
chmod($rootpage . '/ctheme/css/customcss.css', 0777); 
```

我搜索了这个网站，不幸的是没有找到类似的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:52:03.357

当您手动执行命令时，您是 shell*中允许*更改模式的用户。

当您将 php 函数`chmod`写入脚本时，它将由另一个用户执行，即执行 PHP 的用户。

因为*不允许*该用户更改文件的模式。这就是您看到错误的原因。

除非您不更改正在执行 PHP 的用户（更改最终更改模式的用户），否则此错误不会消失。

# java - Java - 遍历字符串的最有效方法

> ID：13300558
> 
> 赞同：6
> 
> 时间：2012-11-09T00:56:39.817
> 
> 标签：java, string

> **可能重复：**
> [在Java中遍历字符串字符的最简单/最好/最正确的方法是什么？](https://stackoverflow.com/questions/196830/what-is-the-easiest-best-most-correct-way-to-iterate-through-the-characters-of-a)

我考虑的是时间和效率。考虑到这些，哪种方法（在下面或其他未提及的方法中）是遍历字符串每个字符的最有效方法？

```
String str = "Foo Bar";
for(int i=0;i<str.length();i++)
   System.out.println(str.charAt(i)); // access the character using .charAt()

for(char letter: str.toCharArray)
   System.out.println(letter);       // use for-each loop with the char array. 
```

同样，可能有更好的方法来做到这一点，但我也很好奇上述两者之间是否存在重大的时间/资源差异。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T01:03:08.167

第一个版本效率更高。由于创建和填充新`char[]`的`toCharArray()`.

对于长字符串（大约超过 512 个字符），检查字符串的最快方法是使用反射来访问支持`char[]`的`String`（但仅适用于 Java 8，因为[Compact Strings](https://openjdk.java.net/jeps/254)）：

```
String data = "a really long string";
Field field = String.class.getDeclaredField("value");
field.setAccessible(true);
char[] chars = (char[]) field.get(data);

for (int i = 0, n = chars.length; i < n; i++)
    System.out.println(chars[i]); 
```

通过使用上述方法，我们能够完全避免创建新方法的需要，也无需支付每次迭代中`char[]`额外调用方法的成本。`charAt()`

看看这篇[文章](https://stackoverflow.com/a/11876086/201359)，答案包含详细的基准。两全其美，但无论如何它是一个黑客，它不再有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:01:14.027

第一种方法更快，因为`toCharArray`必须在返回任何内容之前复制字符串的内部字符数组，而`charAt`直接访问此内部数组中的元素，使其更有效。

换句话说，`charAt`是`O(1)`和`toCharArray`是`O(n)`。现在，这两种遍历字符串的方法都是`O(n)`，但第二种方法的“领先系数”比第一种方法高。

如果您查看该类的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.toCharArray%28%29)，您可以看到所有这些。`String`

# javascript - 如何触发下拉列表的onload事件？

> ID：13300559
> 
> 赞同：0
> 
> 时间：2012-11-09T00:56:46.907
> 
> 标签：javascript, html

我有两个这样的下拉列表：

```
<select onload="javascript:loadState(this.value)" onchange="javascript:loadState(this.value)" id="cntry" name="country">
    <option label="United States" value="1">United States</option>
    <option label="Afghanistan" value="2">Afghanistan</option>  

</select>

<select id="state" name="state">
    <option label="Alabama" value="1">Alabama</option>
    <option label="Alaska" value="2">Alaska</option>
    <option label="Arizona" value="3">Arizona</option>
    <option label="Arkansas" value="4">Arkansas</option>
    <option label="California" value="5">California</option>
</select>

function loadState(countryId)
{

    $j.ajax({
        type: "GET",
        url: baseUrl+'/profile/load-states/country-id/'+countryId,
        data: "",
        dataType: "xml",
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            $j("#message").html("<p>There is problem with the ajax request.</p>");
            return false;
        },
        success: function(xml){
            var htmlOptions =   '';
             $j(xml).find("State").each(function() {

                var states = $j(this);

                var stateId =   states.attr("Id");
                var stateName   =   states.attr("Name");

                htmlOptions +=  "<option value='"+ stateId +"'>"+stateName+"</option>";
             });

             if(htmlOptions){

                $j("#state").html(htmlOptions);
             }
             else
             {
                htmlOptions =   "<option value='0'>Select State</option>";
                $j("#state").html(htmlOptions);

             }

        }
    });

} 
```

在这里，当我们选择一个国家/地区时，它会自动填充该国家/地区的状态，作为 loadState 功能完美运行的第二个下拉列表。问题是当发生验证错误时，第二个下拉菜单有时会保留其默认值，这些状态与所选国家/地区无关。解决方案是在第一个下拉菜单的 onload 中触发该功能，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:03:32.633

jQuery 怎么样？请看例子。[http://jsfiddle.net/hrHWJ/](http://jsfiddle.net/hrHWJ/)

```
<script type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">

    jQuery(document).ready(function($){

        /*The country onchange starts here*/
        var orig_html;
        var orig_value;
        var state_value;

        var us_states = {AL: 'Alabama', AK: 'Alaska', AZ: 'Arizona', AR: 'Arkansas', CA: 'California', CO: 'Colorado', CT: 'Connecticut', DE: 'Delaware', DC: 'District of Columbia', FL: 'Florida', GA: 'Georgia', HI: 'Hawaii', ID: 'Idaho', IL: 'Illinois', IN: 'Indiana', IA: 'Iowa', KS: 'Kansas', KY: 'Kentucky', LA: 'Louisiana', ME: 'Maine', MD: 'Maryland', MA: 'Massachusetts', MI: 'Michigan', MN: 'Minnesota', MS: 'Mississippi', MO: 'Missouri', MT: 'Montana', NE: 'Nebraska', NV: 'Nevada', NH: 'New Hampshire', NJ: 'New Jersey', NM: 'New Mexico', NY: 'New York', NC: 'North Carolina', ND: 'North Dakota', OH: 'Ohio', OK: 'Oklahoma', OR: 'Oregon', PA: 'Pennsylvania', RI: 'Rhode Island', SC: 'South Carolina', SD: 'South Dakota', TN: 'Tennessee', TX: 'Texas', UT: 'Utah', VT: 'Vermont', VA: 'Virginia', WA: 'Washington', WV: 'West Virginia', WI: 'Wisconsin', WY: 'Wyoming'};
        var $el = $("#location-country");
        $el.data('oldval', $el.val());
        $el.change(function(){
            var $this = $(this);
            if(this.value=="US" && $this.data('oldval')!="US"){
                var str = '<select name="location-state" id="location-state">';
                orig_html = $("#location-state-div").html();
                orig_value = $("#location-state").val();
                for(var st in us_states){
                    if(st == state_value)
                        str += '<option value="'+st+'" selected="selected">'+us_states[st]+'</option>';
                    else
                        str += '<option value="'+st+'">'+us_states[st]+'</option>';
                }
                str += "</select>";
                $("#location-state-div").html(str);
                $this.data('oldval', $this.val());
            }
            else if($this.data('oldval')=="US" && $this.val()!="US"){
                state_value = $("#location-state").val();
                $("#location-state-div").html(orig_html);
                $("#location-state").val(orig_value);
                $this.data('oldval', $this.val());
            }
        });

    });

</script>

<div id="location-country-div">
    <select id="location-country" name="location_country">
    <option value=""></option> 
    <option value="US">United States</option> 
    <option value="United Kingdom">United Kingdom</option> 
    </select>
</div>

<div id="location-state-div">
    <input id="location-state" type="text" name="location_state" />
</div> 
```

# iframe - 是否有其他方法可以使用 Google Analytics 事件跟踪来跟踪 YouTube 的 API PlayerStateChange？

> ID：13300562
> 
> 赞同：0
> 
> 时间：2012-11-09T00:57:01.030
> 
> 标签：iframe, youtube, google-analytics, youtube-api

我想在不使用 API 脚本格式的情况下使用 Google Analytics 跟踪视频播放，而是跟踪嵌入的`<iframe>`. 这个选项有可能吗？嵌入的 YouTube URL 中的[enabledjsapi](https://developers.google.com/youtube/player_parameters)是否可能，以便在点击视频时跟踪状态变化？

目前使用这种格式来跟踪 Google Analytics 中的玩家状态变化。

```
<div id="player"></div>
 <script type="text/javascript">
  var tag = document.createElement('script'); 
   tag.src = "http://www.youtube.com/player_api"; 
  var firstScriptTag = document.getElementsByTagName('script')[0]; 
   firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  var player; 
  function onYouTubePlayerAPIReady() { 
   player = new YT.Player('player', { 
    height: '390', 
    width: '640', 
    videoId: 'fYmrMt01S1U', 
   events: { 
    'onReady': onPlayerReady, 
    'onStateChange': onPlayerStateChange 
 } 
  }); 
   }
   function onPlayerReady(event) { 
   /// event.target.playVideo(); 
   }
    function onPlayerStateChange(event) { 
   if (event.data ==YT.PlayerState.PLAYING) 
   {_gaq.push(['_trackEvent', 'Videos', 'Play', 
    player.getVideoUrl() ]); }
   if (event.data ==YT.PlayerState.PAUSED)
   {_gaq.push(['_trackEvent', 'Videos', 'Paused',
    player.getVideoUrl() ]); } 
   if (event.data ==YT.PlayerState.ENDED) 
   {_gaq.push(['_trackEvent', 'Videos', 'Watch to End', 
    player.getVideoUrl() ]); } } 
  // ]]>
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:56:46.153

[这篇文章很好地描述了如何在 GA 中跟踪 iframe 嵌入的 youtube 视频，](http://www.lunametrics.com/blog/2012/10/22/automatically-track-youtube-videos-events-google-analytics/) 我已经使用它几次了，效果很好。

# javascript - 使用 javascript，如何阻止图像重新加载？

> ID：13300564
> 
> 赞同：0
> 
> 时间：2012-11-09T00:57:21.220
> 
> 标签：javascript, dreamweaver

我有 2 个按钮。每个按钮显示一个不同的数组。一切都很好，除了说我想回到它重新加载图像的第一个。所以当我第一次点击按钮时，我的 6 张图片就会显示出来。第二次共12个。以此类推。有没有办法阻止这种情况发生？好像在网上找不到任何东西。

```
var picArray1 = new Array("concert1","concert2","concert3","concert4","concert5","concert6");
var picArray2 = new Array("out1","out2","out3","out4","out5","out6");

function showArray1() {
        var imgDiv = document.getElementById("gallery")
        for(i=0; i<picArray1.length; i++){
            document.getElementById("text1").innerHTML += '<img src="images/'+picArray1[i]+'.jpg">';
            document.getElementById("text2").style.display = 'none';
            document.getElementById("text1").style.display = 'block';
        }
    }

function showArray2() {
        var imgDiv = document.getElementById("gallery")
        for(i=0; i<picArray2.length; i++){
            document.getElementById("text2").innerHTML += '<img src="images/'+picArray2[i]+'.jpg">';
            document.getElementById("text1").style.display = 'none';
            document.getElementById("text2").style.display = 'block';

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:09:57.183

让我们做一些分解：

```
function show(list,galleryId,text1Id,text2Id) {
        var imgDiv = document.getElementById(galleryId)
        var text1 = document.getElementById(text1Id);
        var text2 = document.getElementById(text2Id);
        text2.innerHTML = "" // important part
        for(i=0; i<list.length; i++){
            text2.innerHTML += '<img src="images/'+list[i]+'.jpg">';
            text1.style.display = 'none';
            text2.style.display = 'block';

        }
    }
// call the function
show(['image1','image2','image3'],"gallery","text1","text2")
// not sure why you are getting imgDiv though since you are not using it. 
```

# java - 线程完成后显示共享计数器

> ID：13300565
> 
> 赞同：0
> 
> 时间：2012-11-09T00:57:38.307
> 
> 标签：java, concurrency

我的任务是在 2 个线程（一个递增一定次数，一个递减一定次数）完成后显示共享计数器。因此，当第一个线程完成时，它将显示计数器，当第二个线程完成时，它将再次显示计数器。

我已经创建了一个计数器类和countingThread 类，我认为它们工作得很好，它只是显示了我正在苦苦挣扎的共享计数器。

到目前为止，我的测试课是这样的

```
public static void main() throws InterruptedException{
    Counter counter = new Counter();    
    Thread inc = new CountingThread(counter, +1);
    Thread dec = new CountingThread(counter, -1);

    inc.start();
    dec.start();
} 
```

现在他们完成后我使用 join() 还是 isAlive() ？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:47:30.620

您想使用 join 让您的主线程等待 inc 和 dec 线程完成其工作。

```
inc.start() // starts inc thread
dec.start() // starts dec thread

inc.join() // Tells main/this thread to wait for inc thread to finish
dec.join() // Tells main/this thread to wait for dec thread to finish 
```

# dns - 在路径结束前的 URL 中插入站点名称

> ID：13300566
> 
> 赞同：1
> 
> 时间：2012-11-09T00:57:39.620
> 
> 标签：dns, proxy, rewrite, cname

我经营一个白标酒店预订网站，该网站位于：`http://secure.rezserver.com/home/?refid=4912`。

我公司的名称是 Expeditioner Hotels，因此，我希望 URL 显示：`ExpeditionerHotels.com/secure.rezserver.com/home/?refid=4912`。

这可以使用 CNAME 别名或 A 记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:12:14.880

是的，但您需要修改托管您的预订网站的服务器的配置：使用主机`ExpeditionerHotels.com`和内部 URL回答虚拟主机上的请求`/secure.rezserver.com/`

如果您不能这样做，您可以指向`ExpedtionerHotels.com`您自己的代理服务器（nginx 或 squid），它将代理请求到您的预订站点。

# java - environment().put() 和 System.getenv() Linux

> ID：13300567
> 
> 赞同：0
> 
> 时间：2012-11-09T00:57:58.730
> 
> 标签：java, linux, jar, environment-variables, processbuilder

好的，所以我有一个名为“MyOtherJar.jar”的 jar 文件，其中包含

```
String myenv = System.getenv("myenv"); 
```

我用这段代码从另一个罐子里执行那个罐子，

```
 ProcessBuilder pb = new ProcessBuilder("java", "-jar", "MyOtherJar.jar");
 pb.environment().put("myenv", "foobar-barfoo");
 Process p = pb.start();
 BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
 while ((line = r.readLine()) != null) {
      System.out.println(line);
 }
 r.close(); 
```

它在 Windows 中工作，但由于某种原因它在 linux 上它返回一个空指针异常，当我尝试访问 System.getenv("myenv");.. :/ 有没有办法在 linux 中设置和获取环境变量。 .?

# sql - 任何人都可以指导我解决 Flex 4.6 sql 问题吗？

> ID：13300568
> 
> 赞同：1
> 
> 时间：2012-11-09T00:57:58.743
> 
> 标签：sql, actionscript-3, apache-flex, flash-builder, flex4.6

我目前正在关注一个培训视频来学习 Flex，并且我正在尝试尽可能接近视频说明，我一直在尝试找出如何解决错误

错误 #2044：未处理的 SQLErrorEvent：。errorID=3115，操作=执行，消息=错误 #3115：SQL 错误。，详细信息=没有这样的表：'存档列表'

该表应根据培训使用此代码创建。

```
<fx:Script>
    <![CDATA[
        import mx.utils.OnDemandEventDispatcher;

        public var ArchiveFile:File;
        public var dbConnection:SQLConnection;

        private function createDatabase():void
        {
            ArchiveFile = File.applicationStorageDirectory.resolvePath("archive.db");
            dbConnection = new SQLConnection();
            dbConnection.addEventListener(SQLEvent.OPEN, onDatabaseOpen);
            dbConnection.addEventListener(SQLEvent.CLOSE, onDatabaseClose);

            dbConnection.openAsync(ArchiveFile);
        }

        private function onDatabaseOpen(evt:SQLEvent):void
        {
            trace("Database is now open");
            var statement:SQLStatement = new SQLStatement();
            statement.sqlConnection = dbConnection;
            statement.text = "CREATE TABLE IF NOT EXISTS archivelist (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT , journal TEXT)";

            statement.execute();

            }       

        private function onDatabaseClose(evt:SQLEvent):void
        {
            trace("Database is now closed");
        }

        private function saveJournal():void
        {

            var statement:SQLStatement = new SQLStatement();
            statement.sqlConnection = dbConnection;
            statement.text = "INSERT INTO archive (title , journal) VALUES ('"+title_txt.text+"','"+journal_txt.text+"')";

            statement.execute();

            title_txt.text = "";
            journal_txt.text = "";

        }

    ]]> 
```

## 然后使用此代码在另一个视图上调用

```
<fx:Script>
    <![CDATA[
        import flash.data.SQLConnection 
        import flash.filesystem.File
        import mx.collections.ArrayCollection;

        public var ArchiveFile:File
        public var dbConnection:SQLConnection;
        public var selectQuery:SQLStatement;

        private function createDatabase():void
        {
            ArchiveFile = File.applicationDirectory.resolvePath("archive.db");
            dbConnection = new SQLConnection();
            dbConnection.addEventListener(SQLEvent.OPEN, onDatabaseOpen);
            dbConnection.addEventListener(SQLEvent.CLOSE, onDatabaseClose);

            dbConnection.openAsync(ArchiveFile)
        }

        private function onDatabaseOpen(evt:SQLEvent):void
        {
            trace("Database is now open");
            selectQuery = new SQLStatement();
            selectQuery.sqlConnection = dbConnection;
            selectQuery.text = "SELECT * FROM archivelist ORDER BY title ASC";
            selectQuery.addEventListener(SQLEvent.RESULT, onQueryResult);   

            selectQuery.execute();  
        }

        private function onQueryResult(evt:SQLEvent):void
        {
            archivefiles.dataProvider = new ArrayCollection(selectQuery.getResult().data);
        }

        private function onDatabaseClose(evt:SQLEvent):void
        {
            trace("Database is now Closed");
        }

    ]]> 
```

重要的是要注意，在视频中，培训师在名为 database.db 的视图下有一个蓝色文件，他们没有提供这个文件或如何制作它。为了我自己的方式，我已将我的数据库重命名为归档，并将我的表重命名为归档列表。我的最终目标是制作 1 个可供多个视图访问/写入的数据库。与最佳实践，所以我试图尽可能接近培训。我非常感谢提供的任何帮助。如果有人觉得这是一个新问题，我提前道歉，我已经在谷歌上研究了这个问题，并用训练视频检查了每个角色几个小时。我发现每个人似乎都有不同的方式，我正在尝试采用最佳实践方式。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:52:33.677

始终使用异步模式进行数据库交互，以便您的 UI 永远不会冻结。

错误 #2044：未处理的 SQLErrorEvent。由于您不应该打开异步模式，它应该是同步模式（我认为您尝试在同步模式下工作）

```
dbConnection.open(ArchiveFile); //  not openAsync(ArchiveFile); 
```

或者您需要像这样处理 SQLErrorEvent

```
dbConnection.addEventListener(SQLErrorEvent.ERROR, onDatabaseCloseError); 
```

最好的办法 ：

1) 你需要阅读关于 DAO Pattern(Sun Java)

2）为您的整个应用程序使用单一连接，以便让您的 sqlconnection 在您的所有 DAO 类中可见（Sqlite 不支持并发，因此使用单一连接）。

3) 如果使用连接池，性能会提高，但会出现数据库文件当前锁定等问题。

4）使用参数化查询避免SQL注入。（也提高性能）

如果您想要示例应用程序，请点击此链接[http://coenraets.org/blog/2008/02/salesbuilder-for-air-10/](http://coenraets.org/blog/2008/02/salesbuilder-for-air-10/) 这些家伙为 sql 查询提供了出色的实用程序，还确保有 2 个版本尝试获取异步数据库操作 Salesbuilder 应用程序

请复制并粘贴它。它将按您的预期工作。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="windowedapplication1_creationCompleteHandler(event)">

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;
        protected function btnGetArchiveList_clickHandler(event:MouseEvent):void
        {
            getArchiveList();
        }

        protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
        {
            createDatabase();               
        }

        private var ArchiveFile:File
        private var dbConnection:SQLConnection;
        private var selectQuery:SQLStatement;

        private function createDatabase():void
        {
            ArchiveFile = File.applicationStorageDirectory.resolvePath("archive.db"); //Note here best practices to create db file here applicationStorageDirectory
            dbConnection = new SQLConnection();
            dbConnection.addEventListener(SQLEvent.OPEN, onDatabaseOpen);
            dbConnection.addEventListener(SQLEvent.CLOSE, onDatabaseClose);
            dbConnection.addEventListener(SQLErrorEvent.ERROR, onDatabaseError);
            dbConnection.openAsync(ArchiveFile)
        }

        protected function onDatabaseError(event:SQLErrorEvent):void
        {
            trace(event.error.getStackTrace());
        }

        private function onDatabaseOpen(evt:SQLEvent):void
        {
            trace("Database is now open");
            var statement:SQLStatement = new SQLStatement();
            statement.sqlConnection = dbConnection;
            statement.text = "CREATE TABLE IF NOT EXISTS archivelist (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT , journal TEXT)";
            statement.addEventListener(SQLEvent.RESULT, onTableCreate_ResultHandler);   
            statement.addEventListener(SQLErrorEvent.ERROR, onDatabaseError);
            statement.execute();;
        }

        protected function onTableCreate_ResultHandler(event:SQLEvent):void
        {
            trace("Table created successfully") // Here after only you need to call all query like getArchiveList()
        }

        private function getArchiveList():void
        {
            trace("Getting ArchiveList");
            var selectQuery:SQLStatement = new SQLStatement();
            selectQuery.sqlConnection = dbConnection;
            selectQuery.text = "SELECT * FROM archivelist ORDER BY title ASC";
            selectQuery.addEventListener(SQLEvent.RESULT, onQueryResult);   
            selectQuery.addEventListener(SQLErrorEvent.ERROR, onDatabaseError);   
            selectQuery.execute();
        }

        private function onQueryResult(event:SQLEvent):void
        {
            archivefilesList.dataProvider = new ArrayCollection(((event.currentTarget) as SQLStatement).getResult().data);
        }

        private function onDatabaseClose(evt:SQLEvent):void
        {
            trace("Database is now Closed");
        }

        private function saveJournal():void
        {
            var statement:SQLStatement = new SQLStatement();
            statement.sqlConnection = dbConnection;
            statement.text = "INSERT INTO archivelist (title , journal) VALUES ('"+txtTitle.text+"','"+txtJournal.text+"')"; //Note here archivelist table name
            statement.addEventListener(SQLEvent.RESULT, onInsertQuery_ResultHandler);   
            statement.addEventListener(SQLErrorEvent.ERROR, onDatabaseError);   
            statement.execute();
            txtTitle.text = "";
            txtJournal.text = "";

        }

        protected function btnSave_clickHandler(event:MouseEvent):void
        {
            saveJournal();              
        }

        protected function onInsertQuery_ResultHandler(event:SQLEvent):void
        {
            var isInserted:Boolean = ((event.currentTarget) as SQLStatement).getResult().rowsAffected > 0;

            if(isInserted)
                trace("inserted successfully")
            else
                trace("insert failed");

        }

    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:layout>
    <s:VerticalLayout/>
</s:layout>
<s:TextInput id="txtTitle"/>
<s:TextInput id="txtJournal"/>
<s:Button id="btnSave" label="Save" click="btnSave_clickHandler(event)"/>

<s:Button id="btnGetArchiveList" label="Get Archive" click="btnGetArchiveList_clickHandler(event)"/>
<s:List id="archivefilesList" labelField="title" width="200" height="300"/>

</s:WindowedApplication> 
```

# php - mysql 从其他表中获取数据

> ID：13300581
> 
> 赞同：1
> 
> 时间：2012-11-09T00:59:14.720
> 
> 标签：php, mysql, fetch

我建立了一个简单的网上商店，我需要在其中处理订购的产品。订单非常好，带有订购产品的 ID。

我希望在显示订单所有详细信息的页面上显示产品的名称和价格。可惜没效果。。

这是我的尝试：

获取订购产品的代码：

```
$query2 = mysql_query("SELECT * FROM orders_products WHERE order_id='".$_GET['order']."'");
while ($line2 = mysql_fetch_assoc($query2))
{
$row2[] = $line2;
$smarty->assign('row2', $row2);
} 
```

（尝试）获取产品名称和价格：

```
$query4 = mysql_query("SELECT * FROM products WHERE id ='".$row2['product_id']."'");
while ($line4 = mysql_fetch_assoc($query4))
{
$row4[] = $line4;
$smarty->assign('row4', $row4);
} 
```

显示它（请原谅我在 html 中使用了一些荷兰语单词）：

```
 <div class="module">
                <h2><span>Bestelde Producten</span></h2>
                {section name=row2 loop=$row2}
                 {section name=row4 loop=$row4}
                <div class="module-table-body">
                    <table id="bestelling" class="bestelling">
                        <thead>
                            <tr>
                                <th style="width:3%">#</th>
                                <th style="width:10%">Naam</th>
                                <th   style="width:10%">Bedrag</th>                         
                                <th style="width:3%">Aantal</th>                                    
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{$row2[row2].id}</td>
                                <td>{$row4[row4].name}</td>
                                <td>{$row4[row4].price}</td>
                                <td>{$row2[row2].product_amount}</td>

                            </tr>
                        </tbody>
                    </table></br>
                    <p><strong>Totaal: </strong></br>
                    <strong>BTW (21%): </strong></p>
                    </br>
                     <p><strong>Totaal Inclusief BTW: </strong></p>
                     {/section}
                    <div style="clear: both"></div>
                 </div> <!-- End .module-table-body -->         
                 </div>     
                 </div> 
```

订单产品表：

id order_id product_id product_amount

产品表：
id category_id name description slug price in_stock

* * *

谢谢你们的回答！卡米的代码对我有用。

我现在如何拥有它：

```
$queryx = mysql_query("SELECT * FROM products inner join orders_products on products.id = orders_products.product_id WHERE order_id = '".mysql_real_escape_string($_GET['order'])."'");

while ($linex = mysql_fetch_assoc($queryx))
{
$rowx[] = $linex;
$smarty->assign('rowx', $rowx);
} 
```

你觉得这安全吗？我最终会开始使用 mysqli 或 PDO，但我觉得它太难了，因为我还是个初学者..

你知道任何关于保护 php -> mysql 的好指南吗？

到目前为止感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:22:30.900

尝试

```
$queryx = mysql_query("SELECT * FROM products inner join orders_products on products.id = orders_products.product_id WHERE order_id = " . $_GET['order']);

while ($linex = mysql_fetch_assoc($queryx))
{
    $rowx[] = $linex;
    $smarty->assign('rowx', $rowx);
} 
```

我正在通过一个查询将数据链接在一起。这将允许您在一个查询中获得所有产品信息。我怀疑你的问题是周围的引号`order_id='".$_GET['order']."'"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:25:15.247

使用连接：

```
select o.id, o.product_amount, p.name, p.price
from orders_products o join products p
on p.id = o.product_id
where o.id = '" . mysql_real_escape_string($_GET['order']) . "'" 
```

如果你刚刚开始，你不应该使用 mysql_XXX 函数，它们已被弃用并且很容易获得 SQL 注入（你需要`mysql_real_escape_string`虔诚地使用它来避免它）。您应该使用带有准备好的语句的 mysqli 或 PDO 来避免这个问题。

# r - 将循环的结果附加到数值向量中

> ID：13300582
> 
> 赞同：0
> 
> 时间：2012-11-09T00:59:16.030
> 
> 标签：r, for-loop

我想创建一个带有循环结果的数字向量，例如

```
> for (i in 1:5) print(i+1)
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6 
```

没有'print'的相同表达式什么都不返回似乎很奇怪

```
> for (i in 1:5) i+1
> 
```

有人有解释/解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T01:10:09.740

这是标准行为——当你说你想创建一个数字向量时， `print`不会那样做

for 循环中的表达式是原始函数的参数`for`

从`?`for``价值部分

> for、while 和 repeat 不可见地返回 NULL。for 将 var 设置为 seq 的最后使用的元素，如果长度为零，则设置为 NULL。

`print`将结果打印到控制台。

```
for(i in 1:5) i + 1 
```

只计算`i + 1`每次迭代并且不返回任何内容

如果你想分配一些东西，那么使用`<-`, 或者不太可取的方式分配它`assign`

* * *

您可以通过使用来避免显式循环`sapply`。这（应该）避免增长向量的任何陷阱

```
results <- sapply(1:5, function(i) { i + 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:12:48.150

现在坦率地说，一定有比这更好的解决方案

```
loopee <- function(x){
  res <- vector(mode = "numeric", length(x))
  for (i in 1:x) {res[i] <- i+1}
  return(res)}

> loopee(5)
[1] 2 3 4 5 6 
```

# asp.net - 使用 ASP.NET4 进行 Web 表单路由

> ID：13300583
> 
> 赞同：0
> 
> 时间：2012-11-09T00:59:16.817
> 
> 标签：asp.net, url-rewriting, routing, webforms

我需要在每个 URL 上提供一个 pageId，但是我不需要用户看到这个 pageId。例如

```
http://{domain}/{product-name}/{product-id}/{pageid} <-- I don't want to provide this 
```

我的 Global.asax 中有：

```
routes.MapPageRoute("route-name", "path/{productName}/{product-id}", "~/ProductPage.aspx"); 
```

有没有办法配置这条路线，所以它有一个“硬编码”参数页面ID，例如像这样的东西---

```
routes.MapPageRoute("route-name", "path/{productName}/{product-id}", "~/ProductPage.aspx?pageid=1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:14:33.890

> 有没有办法配置这条路线，所以它有一个“硬编码”参数页面ID

为什么是的……是的。

[MapPageRoute 有一个重载](http://msdn.microsoft.com/en-us/library/dd784594.aspx)，它接受一组路由值的默认值。

```
//Create route and set default values
routes.MapPageRoute(
   "route-name", 
   "path/{productName}/{product-id}", 
   "~/ProductPage.aspx",
   false,
   new RouteValueDictionary{
      {"product-id", 1}
   }); 
```

所以现在如果你在没有指定“product-id”的情况下点击这条路线，它将始终默认为`1`

# python - 在 Mac OSX 上安装 Pygame 时遇到问题

> ID：13300585
> 
> 赞同：8
> 
> 时间：2012-11-09T00:59:25.533
> 
> 标签：python, macos, pygame

这是我的错误信息：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pygame
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named pygame
>>> 
```

所以2.7找不到pygame。这是在新安装的 python 上，我可以访问我的其他模块（pyo、wx、numpy）。我已经重新安装了 pygame 并查看了相应的库文件夹，但我在任何地方都找不到 pygame 模块。重新安装并不能解决此问题。有什么建议吗？

编辑：为了回答有关我如何安装 pygame 的问题，我从位于此处的 .dmg 安装[http://www.pygame.org/download.shtml](http://www.pygame.org/download.shtml) 'pygame-1.9.1release-python.org-32bit-py2.7 -macosx10.3.dmg '

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T01:49:30.177

如果您有 32 位处理器或 64 位处理器，说明会有所不同。32 位处理器的用户只需在[pygame 下载页面](http://pygame.org/download.shtml)上下载并安装标有 pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg 的二进制文件。64 位处理器的用户应遵循以下说明。

1.  Mac OS X 没有 64 位版本的 pygame。32 位版本的 pygame 只兼容 32 位版本的 python。但是，需要注意一个警告/注意事项：在 Snow Leopard 上，Apple 提供的 Tcl/Tk 版本（支持 IDLE 的 GUI 库）可能已过时并导致问题。[Snow Leopard 用户应首先从此处](http://www.activestate.com/activetcl/downloads)下载并安装更新版本，在 Mac OS X (Universal) 下标记为 ActiveTcl 8.4.19.5。这应该首先安装。Lion 用户应忽略此步骤。

2.  删除（如果已安装） Python 2.7 文件夹（很可能在 /Applications 中）。这很可能是不应该使用的 64 位版本的 Python。

3.  下载并安装Python 2.7.2 Mac OS X 32-bit i386/PPC Installer 下提供[的Python 2.7.2 的 32 位版本。](http://python.org/download/)不管下载页面说什么，这个版本在 Mac OS X Lion 上是兼容的。如果您的版本正确，则安装大小（如安装程序中所示）应该在 90 MB 左右。

4.  下载并安装 32 位版本的 pygame，位于[此处](http://pygame.org/download.shtml)。

5.  您可以通过打开 IDLE 并输入以下命令来测试这是否有效：import pygame

如果没有输出，它工作。相反，如果您收到“通用包装器中没有匹配的架构”错误，则很可能跳过了第 2 步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-26T15:25:24.373

我安装了这个[http://www.pygame.org/ftp/pygame-1.9.2pre-py2.7-macosx10.7.mpkg.zip](http://www.pygame.org/ftp/pygame-1.9.2pre-py2.7-macosx10.7.mpkg.zip)

这个：http: [//xquartz.macosforge.org/landing/](http://xquartz.macosforge.org/landing/)

都开始工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T05:23:41.940

另一种解决方法是将 pygame 模块直接复制到您的项目目录中。

安装二进制文件后，我 Mac 上 pygame 的路径是“/Library/Python/2.7/site-packages/pygame”。

# ruby-on-rails-3 - Rails：对构建“定制您的产品”流程的最佳方式感到好奇。

> ID：13300587
> 
> 赞同：1
> 
> 时间：2012-11-09T00:59:41.987
> 
> 标签：ruby-on-rails-3

我正在制作一个轨道应用程序，人们可以在其中选择不同的吉他型号，然后他们被指示选择他们的颜色，然后添加一个像脚踏开关这样的配件，以及在此之后的许多其他配件步骤。所有步骤都依赖于最后一步，因为每个步骤都需要显示一张图片，其中包含他们当前构建的完整包。

我想用rails尽可能以最干净的方式构建它，所以我想知道是否有人对可能的结构有任何建议。每个步骤都有不同的控制器和模型？（因为每个步骤也可以从后端管理区域编辑）。或者我不知道的其他一些结构。

示例步骤：

1.  选择吉他型号。
2.  选择吉他颜色（每种型号有多种颜色）
3.  选择一个调谐器（几个调谐器）
4.  选择脚踏开关或捆绑包
5.  在课程 DVD 之间进行选择。

提前致谢

# ruby-on-rails - Rolify 不持久化作用域角色

> ID：13300589
> 
> 赞同：0
> 
> 时间：2012-11-09T00:59:45.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, roles

我正在使用 gem Rolify 3.2.0 来管理用户角色。

当我像这样添加一个非范围角色时，一切正常。使用“导轨控制台”：

```
u = User.first
u.roles
 => []
u.add_role :admin
u = User.first
u.roles.first.name
 => "admin" 
```

太好了，但是当我尝试做同样的事情但角色仅限于资源时，它不会持续存在。再次使用“rails 控制台”：

```
u = User.first
u.roles
 => []
u.add_role :admin, Agency.first
u.roles.first.name
 => "admin"
u.roles.first.resource_type
 => "Agency"
u.save!
u = User.first
u.roles
 => [] 
```

所以，本地用户一切都很好，但是当我重新查询模型时，角色没有被持久化？！

我的角色模型直接来自 rolify 生成器：

```
class Role
  include Mongoid::Document

  has_and_belongs_to_many :users
  belongs_to :resource, :polymorphic => true

  field :name, :type => String
  index({ :name => 1 }, { :unique => true })

  index({
    :name => 1,
    :resource_type => 1,
    :resource_id => 1
  },
  { :unique => true})

  scopify
end 
```

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:24:21.447

问题出在模型中，名称字段上有两个唯一索引。我删除了第一个索引，现在一切正常。我还向 rolify repo 发送了一个拉取请求，看看我们是否可以为其他人解决这个问题。

# css - Z-Indexed Divs 问题下方的显示 Div

> ID：13300591
> 
> 赞同：1
> 
> 时间：2012-11-09T00:59:48.787
> 
> 标签：css, html, z-index

所以我只是在胡闹，想出了一个在屏幕上重叠三个 W 的绝妙主意。那部分工作正常。然后我想做的是在其下方显示一两行文本。无论出于何种原因，我无法弄清楚如何让文本显示在 WWW 下方，文本的 div 出现在其上方。

这是我的样式表...

```
body {
background-color:#000000;
color:#ffff00;
font-size:10pt;
font-family:arial;
}

#WWWHolder {
width:800px;
margin-left:auto;
margin-right:auto;
margin-top:100px;
display:block;
}

.w {
font-size:400px;
font-family:times;
color:#f8f8f8;
position:absolute;
}

#w1 {
z-index:2;
text-shadow:-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

#w2 {
z-index:1;
font-size:350px;
margin-left:225px;
margin-top:50px;
color:#d8d8d8;
text-shadow:-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

#w3 {
z-index:2;
margin-left:395px;
text-shadow:-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

.YReg {
color:#ffff00;
font-size:10pt;
font-family:arial;
}

.WReg {
color:#ffffff;
font-size:10pt;
font-family:arial;
} 
```

这是我的HTML代码...

```
<div id="WWWHolder">
<div id="w1" class="w" title="Winslow">W</div>
<div id="w2" class="w" title="Web">W</div>
<div id="w3" class="w" title="Works">W</div>
</div>

<div class="YReg" style="text-align:center;">
Some Text Goes Here.
</div> 
```

我敢肯定，对于你们中的一些 CSS 专家来说，这一定很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:03:14.803

使元素绝对定位会将其从文档流中移除，因此如果您检查`#WWWHolder`，您会发现它的高度为 0。

要解决问题，制作`#WWWHolder`and `#w1` `position:relative;`，并给出`#w2`和`#w3`样式`top:0; left:0;`，那么它应该可以正常工作。

见：http: [//jsfiddle.net/kelervin/WKm3M/](http://jsfiddle.net/kelervin/WKm3M/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:12:49.500

主要思想使用相对/绝对位置，[http://jsbin.com/uhagef/2/edit](http://jsbin.com/uhagef/2/edit)但有很多优雅的方法可以做到这一点，并且仅在 chrome 中进行了测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:36:29.683

您只需要将文本下推到等于或大于您的三个 W 的值：

```
.YReg {
   position: relative;
   top: 400px;
} 
```

# java - 组织 Git 子模块以在不同的 repos 中共享平台特定的 Eclipse 项目之间的平台通用 src 和测试

> ID：13300596
> 
> 赞同：0
> 
> 时间：2012-11-09T01:00:40.843
> 
> 标签：java, eclipse, git, git-submodules

我有一个跨移动平台项目，我正在尝试在单独的存储库中使用特定于平台的 Android 和 BlackBerry Eclipse 项目，该项目使用包含 J2ME 平台通用 src 和测试代码的 Git 子模块。

这是预期的布局：

```
team-lib-j2me
| - src (platform generic source code)
|   | - ...
| - test
    | - src (platform generic source code)
        | - ...

team-lib-android
| - team-lib-j2me (git submodule)
| - lib (Eclipse Android project)
|   | - AndroidManifest.xml
|   | - src (platform specific)
|   | - ...
| - test  (Eclipse Android Project)
    | - AndroidManifest.xml
    | - src (platform specific)
    | - ...

team-lib-blackberry
| - team-lib-j2me (git submodule)
| - lib (Eclipse BB Project)
|   | - BlackBerry_App_Descriptor.xml
|   | - src (platform specific)
|   | - ...
| - test (Eclipse BB Project)
    | - BlackBerry_App_Descriptor.xml
    | - src (platform specific)
    | - ... 
```

我似乎找不到一种干净简单的方法来：

1.  获取任一 Eclipse“lib”项目的源链接到相对路径“../team-lib-j2me/src”
2.  获取任一 Eclipse“测试”项目的源链接到相对路径“../team-lib-j2me/test/src”

关于如何做到这一点的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:16:15.543

明白了：[有没有办法设置相对于 .project 文件的链接资源？](https://stackoverflow.com/questions/4000039/is-there-a-way-to-setup-linked-resources-relative-to-the-project-file)

我刚刚创建了一个新的路径变量“TEAM_LIB_J2ME”="${PROJECT_LOC}..\team-lib-j2me"，然后创建了“链接源”以：

*   “团队-lib-j2me-src”= TEAM_LIB_J2ME\src
*   “团队-lib-j2me-test-src”= TEAM_LIB_J2ME\test\src

# jquery - jQuery航点函数

> ID：13300602
> 
> 赞同：1
> 
> 时间：2012-11-09T01:01:20.460
> 
> 标签：jquery, jquery-waypoints

我是 jQuery 新手，我不知道该怎么做。

我有[jQuery waypoint 插件](http://imakewebthings.com/jquery-waypoints/)，还有一个动画进度条的功能。我需要做的是在到达航点时为进度条设置动画。我有两段代码，但似乎无法将它们放在一起。

我需要把这个：

```
$(function() {
    $(".meter > span").each(function() {
        $(this)
            .data("origWidth", $(this).width())
            .width(0)
            .animate({
                width: $(this).data("origWidth")
        }, 1200);
    });
}); 
```

这里面：

```
$(function() {
    $('#skills-1').waypoint(function() {
        (function here)
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:11:03.277

```
$(function() {
    $('#skills-1').waypoint(function() {
        $(".meter > span").each(function() {
            $(this)
                .data("origWidth", $(this).width())
                .width(0)
                .animate({
                    width: $(this).data("origWidth")
            }, 1200);
        });
    });
}); 
```

把它放在里面，没有函数包装。

或者，如果您有多个航路点，最好制作一个单独的函数，如下所示：

```
function animateProgressBar(){
    $(".meter > span").each(function() {
        $(this)
            .data("origWidth", $(this).width())
            .width(0)
            .animate({
                width: $(this).data("origWidth")
        }, 1200);
    });
}
$('#skills-1').waypoint(animateProgressBar);
$('#skills-2').waypoint(animateProgressBar); 
```

# arrays - 如何将字符串转换为字符数组？

> ID：13300605
> 
> 赞同：1
> 
> 时间：2012-11-09T01:01:30.910
> 
> 标签：arrays, string, char, c99

所以我想将一个字符串放入一个字符数组中，但问题是我需要先定义数组长度，然后才能将字符放入其中，但我不知道长度是多少，因为它取决于用户输入的字符串，有办法吗？我正在使用 C99 标准编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:10:35.260

大多数人通过制作一个足够大的数组来处理他们最大的预期输入（或远远超过）来解决这个问题。

但是在您无法知道要获取并想要处理的字符数的情况下，您需要通过内存分配动态增加内存（使用某种基于日志的增长）。即，分配了 100 个字符，如果您尝试添加更多，动态分配 200，复制您已有的，然后添加新的 stuf。然后，如果你再次达到 200，再次分配到 400，然后复制、添加。（实际数字只是编出来的）

# gradle - 是否可以将 Gradle 脚本作为插件打包到 Jar 中

> ID：13300606
> 
> 赞同：0
> 
> 时间：2012-11-09T01:01:31.783
> 
> 标签：gradle

我需要在多个存储库之间分发一个 Gradle 插件，并希望将其打包为一个 jar 或至少一个工件。我可以直接在 Gradle 中编写所有功能，并且更喜欢编写 Groovy。是否可以通过“应用”将 Gradle 文件打包在一起用作 Gradle 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:29:37.513

目前，构建脚本只能通过 HTTP ( `apply from: "http://..."`) 分发。但是，二进制插件（即实现`org.gradle.api.Plugin`接口的类）可以使用与构建脚本几乎相同的语法，并且可以作为 Jar 分发。

# ruby-on-rails-3 - 简单的 Rails 计算不正确

> ID：13300607
> 
> 赞同：0
> 
> 时间：2012-11-09T01:01:32.487
> 
> 标签：ruby-on-rails-3

我无法弄清楚为什么计算是错误的。我正在尝试计算用户在我的 Rails 应用程序中得分超过中位数的时间百分比。

控制器

```
my_scores_over_median_count = 6
total_scores_over_median = 8
@my_over_median_percent = (my_scores_over_median_count / total_scores_over_median) * 100 
```

当我将它添加到我的控制器时：

```
puts my_scores_over_median_count
puts total_scores_over_median 
puts @my_over_median_percent 
```

我得到：

```
6 (correct)
8 (correct)
0 (incorrect) 
```

有人可以帮我理解为什么我得到`0`而不是`75`？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:04:13.953

经典的整数除法问题。将其更改为此并查看它的工作：

```
my_scores_over_median_count = 6.0
total_scores_over_median = 8.0
@my_over_median_percent = (my_scores_over_median_count / total_scores_over_median) * 100 
```

Ruby 将 6 解释为“Fixnum”类，本质上是一个整数。我们通过以下方式知道这一点：

```
1.9.3-p194 :001 > 6.class
 => Fixnum 
```

将任何数字除以 Fixnum 会导致 Ruby 进行整数数学运算，这意味着任何余数都会被丢弃。所以：

```
1.9.3-p194 :004 > 4 / 5
 => 0 
1.9.3-p194 :005 > 4 / 3
 => 1 
```

如果您有一个 Fixnum 变量，并且您想将其转换为浮点数以强制进行浮点除法，请使用 .to_f 方法：

```
1.9.3-p194 :007 > x = 4
 => 4 
1.9.3-p194 :008 > y = 5
 => 5 
1.9.3-p194 :009 > x / y
 => 0 
1.9.3-p194 :010 > x.to_f / y
 => 0.8 
```

# css - IE 8 不显示导航栏

> ID：13300608
> 
> 赞同：0
> 
> 时间：2012-11-09T01:01:39.813
> 
> 标签：css, internet-explorer-8

[http://www.newpathwaysretreat.com](http://www.newpathwaysretreat.com)

我被告知该站点无法在 IE8 下正常运行，导航栏未显示，通常水平穿过的链接现在只是左上角的无样式列表。

任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:08:00.923

导航栏的样式都包裹在`@media screen`其中，IE8及以下基本看不懂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:10:01.237

`<nav>`IE8 不支持该标签。

[http://www.w3schools.com/tags/tag_nav.asp](http://www.w3schools.com/tags/tag_nav.asp)

基本上，如果在 HTML5 中添加了标签，则假定 IE8 不会支持它。这就是有 IE9 的部分原因。

# petapoco - 属性中的 PetaPoco 映射属性

> ID：13300614
> 
> 赞同：1
> 
> 时间：2012-11-09T01:02:32.080
> 
> 标签：petapoco

我是 PetaPoco 的新手，最初我很喜欢它，但后来碰上了我根本不知道如何搜索的墙。我有一个对象需要在其属性之一中设置一个属性，即 Job.Min.BaseValue。该数据的来源是“min_mb”。所以基本上我的对象不是源表的直接映射

```
public class Usage
{
   public Decimal BaseValue {get;set;}
   public Decimal BaseScale {get;set;}
   public Decimal BaseUnit {get;set;} 
}

[PetaPoco.TableName("data")]
[PetaPoco.PrimaryKey("date, client_name")]
[PetaPoco.ExplicitColumns] 
public class Job
{
   [PetaPoco.Column("date")]
   public DateTime Date {get;set;}
   [PetaPoco.Column("client_name")]
   public String ClientName {get;set;}

   public Usage Min {get;set;}

   public CommvaultJob() { Min = new Usage() { BaseScale=1024, BaseUnit="MB" }; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:41:45.267

我认为当您调用 Fetch 或 Query 时，您只是缺少额外的类型。这对我有用：

调用 PetaPoco ：

```
var allData = _db.Fetch<TestJobPoco,Usage>("select * from dataTEST");
return View( allData); 
```

波科斯：

```
[PetaPoco.ExplicitColumns]
public class Usage
{
   public Usage()
   {
       BaseScale=1024;
       BaseUnit="MB";
   }

   [PetaPoco.Column("base_value")]
   public Decimal BaseValue {get;set;}

   [PetaPoco.Ignore]
   public Decimal BaseScale {get;set;}

   [PetaPoco.Ignore]
   public string BaseUnit {get;set;} 
}

[PetaPoco.TableName("dataTEST")]
[PetaPoco.PrimaryKey("id")]
[PetaPoco.ExplicitColumns]
public class TestJobPoco
{
   [PetaPoco.Column("id")]
   public int Id {get;set;}

   [PetaPoco.Column("date")]
   public DateTime Date {get;set;}

   [PetaPoco.Column("client_name")]
   public String ClientName {get;set;}

   public Usage Min {get;set;}

    public TestJobPoco()
    {
        //Min = new Usage() { BaseScale=1024, BaseUnit="MB" };
    }
} 
```

我的测试数据库有一个 id、date、client_name 和 base_value 列。主键是 id 所以它与你的略有不同，但这不应该改变 poco 映射发生的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:32:04.033

如果您的对象没有与表结构映射，那么 ORM 也无济于事。

您将需要手动进行映射或创建新的影子属性来复制其他字段的值，但是这种增加的复杂性会破坏 ORM 的目的。

# php - 在字符串中计算 {if}

> ID：13300619
> 
> 赞同：0
> 
> 时间：2012-11-09T01:03:09.500
> 
> 标签：php, eval, str-replace

我正在开发一个可标记的报告系统，其中一个文本块将存储如下信息：

```
This is a line with a {TAG} . The {TAG} will be replaced with normal text via str_replace.
{if 1==1}
    I would like to be able to do if statements like this.
{/if} 
```

所以 {TAG} 很容易被替换，但是有没有办法解析一个文本块来处理 if/else 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:04:11.383

在纯 php 中，如果您使用 heredoc 语法，您将无法在字符串中执行 if 块。

如果你对连接字符串没问题，你可以像这样使用三元运算符：

```
$myString =
    "This is a line with a {TAG}. " .
    "The {TAG} will be replaced with normal text via str_replace. " .
    ( 1==1 ? "I would like to be able to do if statements like this." : "" ) . " "
; 
```

希望有帮助。

# java - 在java中一起添加一个静态变量和一个非静态变量

> ID：13300624
> 
> 赞同：0
> 
> 时间：2012-11-09T01:03:40.913
> 
> 标签：java, oop, static

我们可以在java中同时添加一个静态变量和一个非静态变量吗？例如，

```
class Evolve{
    static int i = 1;
    static int j = 2;
    int x = 3;
    static int y = 6;

    public static void main(String args[]){
        System.out.println(i + j);
        System.out.println(x + i);
        System.out.println(i + y);
        System.out.println(x + j);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:05:20.193

直到您初始化 Evolve 的实例并将其称为

```
this.i 
```

或者像这样

```
Evolve evolve = new Evolve();
System.out.println(evolve.i + Evolve.j); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:35:01.557

由于**x**是一个实例变量，您需要一个 Evolve 对象的实例...

```
public static void main(String args[]){
  Evolve ev = new Evolve();
  System.out.println(Evolve.i + Evolve.j);
  System.out.println(ev.x + Evolve.i);
  System.out.println(Evolve.i + Evolve.y);
  System.out.println(ev.x + Evolve.j);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:05:50.127

不，*非静态*（或*实例*）变量`x`在方法的静态上下文中不可访问`main`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T01:05:52.750

您需要将非静态对象放在一个实例中，然后您可以使用添加它们`Evolve.i + this.x`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T01:08:24.050

是否可以添加它与静态/非静态无关。

这就是您应该如何访问静态和非静态（实例）变量的方式。

# javascript - 我可以同时设置 setInterval 和 setTimeout 吗？

> ID：13300625
> 
> 赞同：1
> 
> 时间：2012-11-09T01:03:56.667
> 
> 标签：javascript

根据这个线程：[一页可以同时设置多少个javascript setTimeout/setInterval 调用？](https://stackoverflow.com/questions/2553138/how-many-javascript-settimeout-setinterval-call-can-be-set-simultaneously-in-on)可以同时有多个 setIntervals。

但是，是否可以同时设置 setInterval 和 setTimeout？

这不工作...

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script> 
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script>
    $(document).ready(function() {
        init();
    }); 

    function init() {
        $('#startbutton').on('click', handleClick);
    }
</script>   
</head>
<body>
<script>

var playBeep = function () {
var snd = new Audio("beep-7.wav");
snd.play();
}

var handleClick = function () {
    var interval1 = setInterval(updateDisplay, 1); 
    makeIntervals([1,2,3], playBeep);
}

var makeIntervals = function(timeList,callback){
intervals = []
for(i in timeList){
    intervals.push(setTimeout(callback,timeList[i]))
}
return intervals
}

function updateDisplay() {
    var value = parseInt($('#timer').find('.value').text(), 10);
    value++;
    $('#timer').find('.value').text(value);
}

</script>
<button type="button" id="startbutton">Play Beep</button>
<P>
<div id="timer"><span class="value">0</span> ms</div>
<P> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:05:38.587

当然。但是，请确保您没有太多。

# windows-phone-8 - Skydrive API Windows 电话 8

> ID：13300626
> 
> 赞同：2
> 
> 时间：2012-11-09T01:03:59.027
> 
> 标签：windows-phone-8, onedrive

还有其他人对 Windows Phone 8 的 SkyDrive API 有疑问吗？我正在将我的 Windows Phone 7 代码升级到 Windows Phone 8。当我单击登录按钮 (SkyDrive) 时，我看到以下屏幕：

![在此处输入图像描述](../Images/eef98e2f7b305dca4c712037d71db0b8.png)

这段代码（从 WP7 不变）曾经在 VS2010 中工作。还有其他人有这个问题吗？是否有我应该使用的更新版本（当前版本 v2.0.50727）？

当前 XAML：

```
 HorizontalAlignment="Left" Margin="308,71,0,0" 
                 Name="signInButton1" VerticalAlignment="Top" Width="160" 
                 ClientId="[myID]" Scopes="wl.skydrive_update" 
                 TextType="SignIn" SessionChanged="btnSignin_SessionChanged"
                 Branding="Windows"/> 
```

登录代码隐藏：

```
 private void btnSignin_SessionChanged(object sender, LiveConnectSessionChangedEventArgs e)
    {
        if (e.Status == LiveConnectSessionStatus.Connected)
        {
            client = new LiveConnectClient(e.Session);
            infoTextBlock.Text = "Signed in.";
            client.GetCompleted +=
                new EventHandler<LiveOperationCompletedEventArgs>(OnGetCompleted);
            client.GetAsync("me", null);
            for (var i = 0; i < this.ApplicationBar.Buttons.Count; i++)
            {
                var button = this.ApplicationBar.Buttons[i] as ApplicationBarIconButton;
                if (button != null)
                {
                    if (button.Text == "Upload")
                    {
                        button.IsEnabled = true;
                    }
                }
            }
        }
        else
        {
            infoTextBlock.Text = "Not signed in.";
            client = null;
        }
    } 
```

**更新！**

我继续尝试，我仍然得到这个白屏。但是，我点击放大镜，然后点击后退箭头（它恢复）然后尝试再次登录并且它工作。那么这只是不稳定还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:15:50.527

经过进一步审查，我确实认为这是一个模拟器问题。如果我对它进行了足够的摆弄，最终它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T11:19:39.323

我读到不能在模拟器中使用 LiveSDK，因为你在模拟器中没有 MS 帐户。

所以尝试使用物理设备进行调试。这对我行得通。

# jquery-ui - 将数据传递到在 jQuery UI 对话框中打开的 html 页面

> ID：13300633
> 
> 赞同：1
> 
> 时间：2012-11-09T01:05:08.803
> 
> 标签：jquery-ui, jquery-ui-dialog

我已经成功地在 jQuery 对话框中打开了一个 html 页面。我还向它传递了一个名为“vendorid”的数据，但不知道如何在打开的 html 页面中检索它。

```
 $('#btnShowSupplierStats').click(function () {
            showUrlInDialog('../supplierstats.htm?vendorId=' + $(this).attr('vendorId')); return false;
            //showUrlInDialog('../Default2.aspx'); return false;
        });

        function showUrlInDialog(url) {
            var vid = $(this).attr('vendorId')
            var tag = $("<div id='statsDiv' vid ='"+ vid +"'></div>");
            $.ajax({
                url: url,
                success: function (data) {
                    tag.html(data).dialog({ show: "fadein", hide: "fadeout",
                    modal: true, minHeight: 550, minWidth: 800, autoOpen: false,
                    close: function (event, ui) { $(this).remove(); }, buttons: [{
                    text: "Close", click: function () { $(this).dialog('close'); 
                    return false; } }] }).data("vendorid", vid).dialog('open'); 
                    return false;
                }
            });
        } 
```

**更新**：Farrukh 的答案可以完成这项工作（即他提到的第二个选项，因为我使用的是 100% 客户端方法）。但是我没有将要传递的数据存储在隐藏字段中。相反，我使用了以下方法，它也始终有效：

1.  当你要通过 jQuery 打开对话框时，在此之前，设置作为对话框打开器的按钮的属性。就我而言，我在此按钮上设置了一个名为“供应商”的属性。假设开启按钮的 id 是“btnOpenVendorDialog”。所以需要使用下面的代码。

    $('#btnOpenVendorDialog').attr('vendorid', 'Vendor1234'); //在这里打开你的对话框....

2.然后，在对话框窗口中打开的html页面中，我可以轻松地检索此属性而没有任何问题。

```
var vid = $('#btnOpenVendorDialog').attr('vendorid'); 
```

**而已。你已经准备好用**这个传递的数据做任何你想做的事情了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:13:33.957

有两种方法可以做到这一点：

1.  使用服务器端并在 post 或 get 中获取传递的数据（在您的情况下，供应商 ID 是 get）并使用它来填充任何可用元素的隐藏元素或 data-vendorID 属性。
2.  如果您使用的是 javascript，那么您作为 vid 传递的数据 vendorID 在成功函数后可用，因此将其作为隐藏输入字段放置或将其作为数据供应商 ID 放置在其他 DOM 元素之一上并从那里访问它.

# git - 如何使用命令行修改 git config 文件中的 fetch 参数？

> ID：13300639
> 
> 赞同：3
> 
> 时间：2012-11-09T01:05:40.353
> 
> 标签：git, github, fetch

我知道我可以使用以下命令行

```
git remote add pullorigin git+ssh://root@git-xxx.xxxxx.com:1000/mnt/GITROOT/xxxxx.git 
```

更改 .git/config 并获取该配置文件的以下内容：

```
[remote "pullorigin"]
    url = git+ssh://root@git-xxx.xxxxx.com:1000/mnt/GITROOT/xxxxx.git
    fetch = +refs/heads/*:refs/remotes/pullorigin/* 
```

但是，我想要的是 fetch 等于

```
fetch = +refs/heads/*:refs/remotes/origin/* 
```

有没有办法使用命令行来更改 fetch 参数而不是手动编辑文件？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:02:28.490

可能就这么简单吗？

```
git config remote.pullorigin.fetch "+refs/heads/*:refs/remotes/origin/*" 
```

您可能正在寻找我也找不到的`git fetch`or命令。`git remote`

# php - PHP逐行搜索文本文件中的两个字符串然后输出行

> ID：13300644
> 
> 赞同：1
> 
> 时间：2012-11-09T01:05:59.750
> 
> 标签：php, string, file, search, text

我正在尝试在文本文件中搜索一行中的两个值。如果两个值都存在，我需要输出整行。我正在搜索的值可能不会彼此相邻，这就是我卡住的地方。我有以下代码运行良好，但仅适用于一个搜索值：

```
<?php 
$search = $_REQUEST["search"]; 
// Read from file 
$lines = file('archive.txt'); 
foreach($lines as $line) 
{ 
// Check if the line contains the string we're looking for, and print if it does 
if(strpos($line, $search) !== false) 
echo"<html><title>SEARCH RESULTS FOR: $search</title><font face='Arial'> $line <hr>"; 
} 

?> 
```

非常感谢任何帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T01:16:43.917

假设您要搜索的值由空格分隔，并且它们都将始终存在，[`explode`](http://php.net/explode)应该可以解决问题：

```
$search = explode(' ', $_REQUEST["search"]);  // change ' ' to ',' if you separate the search terms with a comma, etc.
// Read from file 
$lines = file('archive.txt'); 
foreach($lines as $line) 
{ 
    // Check if the line contains the string we're looking for, and print if it does 
    if(strpos($line, $search[0]) !== false && strpos($line, $search[1] !== false)) { 
        echo"<html><title>SEARCH RESULTS FOR: $search</title><font face='Arial'> $line <hr>";
    }
} 
```

我将由您来添加一些验证，以确保`$search`数组中始终有两个元素，等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T01:15:10.103

我还更正了 HTML 代码。该脚本查找两个值，`$search`和`$search2`. 它正在使用[stristr()](http://php.net/stristr)。对于 strstr 的区分大小写版本，请参阅[strstr()](http://php.net/strstr)。该脚本将返回包含`$search`和的所有行`$search2`。

```
<?php 
$search = $_REQUEST["search"]; 
$search2 = $_REQUEST['search2'];
// Read from file 
$lines = file('archive.txt'); 
echo"<html><head><title>SEARCH RESULTS FOR: $search</title></head><body>";
foreach($lines as $line) 
{ 
// Check if the line contains the string we're looking for, and print if it does 
if(stristr($line,$search) && stristr($line,$search2))  // case insensitive
    echo "<font face='Arial'> $line </font><hr>"; 
} 
?>
</body></html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:17:27.927

只需搜索您的其他值并使用 && 来检查两者。

```
 <?php 
        $search1 = $_REQUEST["search1"];
         $search2 = $_REQUEST["search2"];
        // Read from file 
         $lines = file('archive.txt'); 
        foreach($lines as $line) 
        { 
           // Check if the line contains the string we're looking for, and print if it does 
          if(strpos($line, $search1) !== false && strpos($line, $search2) !== false) 
             echo"<html><title>SEARCH RESULTS FOR: $search1 and $search2</title><font face='Arial'> $line <hr>"; 
        } 

       ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-08T15:18:47.373

这对我有用。您可以在 searchthis 数组中定义您喜欢的内容，它将以整行显示。

```
<?php
$searchthis = array('1','2','3');
$matches = array();

$handle = fopen("file_path", "r");
if ($handle)
{
while (!feof($handle))
{
    $buffer = fgets($handle);

    foreach ($searchthis as $param) {
    if(strpos($buffer, $param) !== FALSE)
        $matches[] = $buffer;
 }}
 fclose($handle);
 }

 foreach ($matches as $parts) {
echo $parts;
}
?> 
```

# excel - Excel VBA：将某些不连续的单元格从工作表行复制到另一个工作表的行中

> ID：13300645
> 
> 赞同：0
> 
> 时间：2012-11-09T01:06:01.390
> 
> 标签：excel, vba

我有一个工作表，其中每一行（标题除外）代表一个条目，每列一个字段（非常标准的东西）。这些字段上升到 BB 列。

我想将某些条目（与特定标识字段的特定值匹配的条目）复制到另一张纸上。但是，我不想要原始工作表上的所有字段，只有大约 10 个，它们在原始工作表上不连续。

因此，对于每个（有效）行，我想做这样的事情：

```
for each origRow in origSheet.Rows
    if strcomp(origRow.cells(idCellNumber).value, myId, vbTextCompare) = 0 then
        copySheet.Row(copySheetRowNumber).value = origRow.Range(Cells(1), Cells(8), Cells(15), Cells(4))
        copySheetRowNumber++
    end if
next 
```

显然这段代码是无效的。此外，我不能简单地复制整个条目然后删除不相关的列，因为工作表包含将被删除的现有数据。任何人都可以提出最快的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:58:01.453

```
Dim arrSourceCols, arrDestCols
Dim x As Long

arrSourceCols = Array(1, 3, 5, 7)
arrDestCols = Array(2, 4, 8, 12)

For Each origRow In origSheet.UsedRange.Rows
    If StrComp(origRow.Cells(idCellNumber).Value, myId, vbTextCompare) = 0 Then

        For x = LBound(arrSourceCols) To UBound(arrSourceCols)
            copySheet.Cells(copySheetRowNumber, arrDestCols(x)).Value = _
                                  origRow.EntireRow.Cells(arrSourceCols(x)).Value
        Next x

        copySheetRowNumber = copySheetRowNumber + 1
    End If
Next 
```

# solr - Solr分组问题

> ID：13300648
> 
> 赞同：2
> 
> 时间：2012-11-09T01:06:20.740
> 
> 标签：solr

作为 Solr 的新手（我正在从事的项目中使用了 3.6.1），我试图了解逻辑分组如何限制返回的数据。

`id:1 and id:2`当我运行基于数据返回 2 个文档的查询时，使用作为 solr 下载的一部分提供的测试数据和模式

但在下一种情况下

```
(id:1 and popularity:0) and (id:2 and popularity:7) 
```

我会假设我只会得到 1 个文档，因为没有流行度为 0 的文档，但所有 5 个文档都被返回（我只加载了 5 个）

在最后一种情况下，我`int1 and (id:2 and popularity:7)`根据我所做的测试（通过管理网页）和/或似乎返回相同数量的结果获得了三个文档。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:23:04.397

经过进一步研究，事实证明解析器（至少用于管理窗口的解析器）如此小写，将被视为默认运算符，通常定义为 OR 所以与子句必须大写 AND 不是，并且正确的结果被退回。

# google-apps - 无需 Marketplace 即可添加到 Google Apps 全球导航

> ID：13300650
> 
> 赞同：0
> 
> 时间：2012-11-09T01:06:33.883
> 
> 标签：google-apps

我已经构建了一些供我们小团队成员专门使用的实用程序。我希望它们在 Google Apps 全局导航中可用，但如果不将它们添加到 Google Apps Marketplace，我无法弄清楚如何做到这一点。

添加到 Marketplace 比它需要的更复杂（例如，我正在创建的应用程序永远不需要支持 URL），而且我不想仅仅为了这些小的内部工具。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:43:28.313

是的，您可以使用扩展控制台：

[https://developers.google.com/google-apps/extensions-console/index](https://developers.google.com/google-apps/extensions-console/index)

这允许您只指定一个清单，而无需完成所有 Marketplace 工作。

周杰伦

# android - “无法实例化活动 ComponentInfo”

> ID：13300651
> 
> 赞同：1
> 
> 时间：2012-11-09T01:06:35.113
> 
> 标签：android, eclipse, android-layout

我是所有这些 android 开发的新手，我试图找出这个异常的原因。

```
 11-09 02:29:39.897: E/AndroidRuntime(657): FATAL EXCEPTION: main
11-09 02:29:39.897: E/AndroidRuntime(657): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.yoursite.arduinoblinkled/com.yoursite.arduinoblinkled.activity_arduino_blink_led}: java.lang.ClassNotFoundException: com.yoursite.arduinoblinkled.activity_arduino_blink_led
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.os.Looper.loop(Looper.java:137)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.app.ActivityThread.main(ActivityThread.java:4424)
11-09 02:29:39.897: E/AndroidRuntime(657):  at java.lang.reflect.Method.invokeNative(Native Method)
11-09 02:29:39.897: E/AndroidRuntime(657):  at java.lang.reflect.Method.invoke(Method.java:511)
11-09 02:29:39.897: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-09 02:29:39.897: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-09 02:29:39.897: E/AndroidRuntime(657):  at dalvik.system.NativeStart.main(Native Method)
11-09 02:29:39.897: E/AndroidRuntime(657): Caused by: java.lang.ClassNotFoundException: com.yoursite.arduinoblinkled.activity_arduino_blink_led
11-09 02:29:39.897: E/AndroidRuntime(657):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-09 02:29:39.897: E/AndroidRuntime(657):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-09 02:29:39.897: E/AndroidRuntime(657):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-09 02:29:39.897: E/AndroidRuntime(657):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
11-09 02:29:39.897: E/AndroidRuntime(657):  ... 11 more 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.yoursite.arduinoblinkled" android:versionCode="1"
    android:versionName="1.0">

     <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <uses-library android:name="com.google.android.maps" />
        <activity android:name=".activity_arduino_blink_led"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
            </intent-filter>
            <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
                android:resource="@xml/device_filter" />
        </activity>

        <uses-library android:name="com.android.future.usb.accessory"></uses-library>

    </application>
</manifest> 
```

ArduinoBlinkLEDActivity.java

```
package com.example.arduinoblinkled;

import java.io.FileDescriptor;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

import com.android.future.usb.UsbAccessory;
import com.android.future.usb.UsbManager;
import com.yoursite.arduinoblinkled.R;

import android.os.Bundle;
import android.os.ParcelFileDescriptor;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.ToggleButton;

public class ArduinoBlinkLEDActivity extends Activity {

        private static final String TAG = "ArduinoAccessory";

        private static final String ACTION_USB_PERMISSION = "com.google.android.DemoKit.action.USB_PERMISSION";

        private UsbManager mUsbManager;
        private PendingIntent mPermissionIntent;
        private boolean mPermissionRequestPending;
        private ToggleButton buttonLED;

        UsbAccessory mAccessory;
        ParcelFileDescriptor mFileDescriptor;
        FileInputStream mInputStream;
        FileOutputStream mOutputStream;

        private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (ACTION_USB_PERMISSION.equals(action)) {
                    synchronized (this) {
                        UsbAccessory accessory = UsbManager.getAccessory(intent);
                        if (intent.getBooleanExtra(
                                UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                            openAccessory(accessory);
                        } else {
                            Log.d(TAG, "permission denied for accessory "
                                    + accessory);
                        }
                        mPermissionRequestPending = false;
                    }
                } else if (UsbManager.ACTION_USB_ACCESSORY_DETACHED.equals(action)) {
                    UsbAccessory accessory = UsbManager.getAccessory(intent);
                    if (accessory != null && accessory.equals(mAccessory)) {
                        closeAccessory();
                    }
                }
            }
        };

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_arduino_blink_led);

        mUsbManager = UsbManager.getInstance(this);
        mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(ACTION_USB_PERMISSION), 0);
        IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
        filter.addAction(UsbManager.ACTION_USB_ACCESSORY_DETACHED);
        registerReceiver(mUsbReceiver, filter);

        if (getLastNonConfigurationInstance() != null) {
            mAccessory = (UsbAccessory) getLastNonConfigurationInstance();
            openAccessory(mAccessory);
        }

        setContentView(R.layout.activity_arduino_blink_led);
        buttonLED = (ToggleButton) findViewById(R.id.toggleButtonLED);
    }

    @SuppressWarnings("deprecation")
    @Override
    public Object onRetainNonConfigurationInstance() {
        if (mAccessory != null) {
            return mAccessory;
        } else {
            return super.onRetainNonConfigurationInstance();
        }
    }

    @Override
    public void onResume() {
        super.onResume();

        if (mInputStream != null && mOutputStream != null) {
            return;
        }

        UsbAccessory[] accessories = mUsbManager.getAccessoryList();
        UsbAccessory accessory = (accessories == null ? null : accessories[0]);
        if (accessory != null) {
            if (mUsbManager.hasPermission(accessory)) {
                openAccessory(accessory);
            } else {
                synchronized (mUsbReceiver) {
                    if (!mPermissionRequestPending) {
                        mUsbManager.requestPermission(accessory,mPermissionIntent);
                        mPermissionRequestPending = true;
                    }
                }
            }
        } else {
            Log.d(TAG, "mAccessory is null");
        }
    }

    private void openAccessory(UsbAccessory accessory) {
        mFileDescriptor = mUsbManager.openAccessory(accessory);
        if (mFileDescriptor != null) {
            mAccessory = accessory;
            FileDescriptor fd = mFileDescriptor.getFileDescriptor();
            mInputStream = new FileInputStream(fd);
            mOutputStream = new FileOutputStream(fd);
            Log.d(TAG, "accessory opened");
        } else {
            Log.d(TAG, "accessory open fail");
        }
    }

    private void closeAccessory() {
        try {
            if (mFileDescriptor != null) {
                mFileDescriptor.close();
            }
        } catch (IOException e) {
        } finally {
            mFileDescriptor = null;
            mAccessory = null;
        }
    }

    public void blinkLED(View v){

        byte[] buffer = new byte[1];

        if(buttonLED.isChecked())
            buffer[0]=(byte)0; // button says on, light is off
        else
            buffer[0]=(byte)1; // button says off, light is on

        if (mOutputStream != null) {
            try {
                mOutputStream.write(buffer);
            } catch (IOException e) {
                Log.e(TAG, "write failed", e);
            }
        }
    }

} 
```

我尝试了很多解决方案，但问题仍然没有解决。有谁知道这可能是什么原因造成的？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:50:51.283

由于您没有为活动使用完全限定名称，请将顶部的包名称更改为 com.example.arduinoblinkled。

还将活动名称更改为 .ArduinoBlinkLEDActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:11:00.283

您已经在清单中注册了您的活动， `android:name=".activity_arduino_blink_led"`但在代码中您有活动`ArduinoBlinkLEDActivity`，因此将其更改为

```
<activity android:name=".ArduinoBlinkLEDActivity" 
```

代替

```
<activity android:name=".activity_arduino_blink_led" 
```

# php - foreach 循环返回两个幽灵项目？

> ID：13300653
> 
> 赞同：0
> 
> 时间：2012-11-09T01:07:02.137
> 
> 标签：php, loops, foreach, scandir

我正在尝试遍历一个文件夹并将其中的图像打印在一个 html 列表中。输出必须分配给 $bgFinal 变量。

它设法输出文件夹中的所有项目，但它也在输出实际存在的项目之前输出两个不存在的项目。

```
$files = scandir('../admin/js/3rd_party/tctc91_custom/bg');
if ($files !== false) 
{
    $bgFinal = '<ul>';
    foreach($files as $f) { 
        $bgFinal .= '<li><img src="../admin/js/3rd_party/tctc91_custom/bg/'.$f.'" alt="'.$f.'" id="'.$f.'" /></li>';
    }
    $bgFinal .= '</ul>';
} 
```

输出示例（bg 文件夹包含 4 个图像）：

```
<ul>
    <li><img src="../admin/js/3rd_party/tctc91_custom/bg/." alt="." id="."></li>
    <li><img src="../admin/js/3rd_party/tctc91_custom/bg/.." alt=".." id=".."></li>
    <li><img src="../admin/js/3rd_party/tctc91_custom/bg/1.png" alt="1.png" id="1.png" style="opacity: 0.6; "></li>
    <li><img src="../admin/js/3rd_party/tctc91_custom/bg/2.png" alt="2.png" id="2.png"></li>
    <li><img src="../admin/js/3rd_party/tctc91_custom/bg/3.png" alt="3.png" id="3.png"></li>
    <li><img src="../admin/js/3rd_party/tctc91_custom/bg/4.png" alt="4.png" id="4.png" style="opacity: 0.6; "></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T01:12:06.823

这些点代表[当前目录和父目录](http://upload.wikimedia.org/wikipedia/commons/9/9b/DirectoryListing1.png)。`scandir`考虑到这些以及您的其他项目。

查看[有人](http://www.php.net/manual/en/function.scandir.php#107215)在 php.net 上发布的代码：获取

`array_diff(scandir($directory), array('..', '.'))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T01:11:58.100

## 目录。（点）和..（点点）

文件名 . (dot) 代表当前工作目录；文件名..（点点）代表当前工作目录上一级的目录，通常称为父目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:14:32.117

试试这个代码

```
$files = array_diff(scandir('../admin/js/3rd_party/tctc91_custom/bg'), array('..', '.'));
if ($files !== false) 
{
    $bgFinal = '<ul>';
    foreach($files as $f) { 
        $bgFinal .= '<li><img src="../admin/js/3rd_party/tctc91_custom/bg/'.$f.'" alt="'.$f.'" id="'.$f.'" /></li>';
    }
    $bgFinal .= '</ul>';
} 
```

# .net - Thread 可以在 App 终止后存活吗？

> ID：13300656
> 
> 赞同：5
> 
> 时间：2012-11-09T01:07:17.360
> 
> 标签：.net, multithreading

如果 .NET 程序创建并启动一个`System.Threading.ThreadPool`线程，然后程序结束（自然或崩溃）：

*   是否有可能`Thread`生存并自行进行处理？
*   是否有可能由于主 UI 线程已经结束，应用程序看起来已经终止，但是后台线程继续以不可见的方式运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:11:39.710

不。根据定义，如果进程的线程之一仍在工作，那么它*实际上并没有结束*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:12:25.447

线程不能独立于进程而存在，所以不。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:14:31.953

没有。而且从[马的嘴里（MSDN）](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

> 托管线程池中的线程是后台线程。也就是说，它们的`IsBackground`属性是真实的。这意味着 `ThreadPool`在所有前台线程都退出后，线程将不会让应用程序继续运行。

# opengl - 乘以 2D/3D 矢量

> ID：13300658
> 
> 赞同：0
> 
> 时间：2012-11-09T01:07:42.360
> 
> 标签：opengl, vector

如果我有一个包含 (x,y,z) 和乘法的向量，它是否会乘以整个事物？例如：如果我的向量是 (10, 5, 10)，我将它乘以 10，结果会是 (100, 50, 100)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:18:00.793

是的。标量分布到向量的所有分量，无论大小。快速的谷歌搜索也会发现这一点。

# sqlite - 如何添加具有从其他列派生的值的列？

> ID：13300660
> 
> 赞同：-1
> 
> 时间：2012-11-09T01:07:43.123
> 
> 标签：sqlite

表中有三个字段，`quote`列`code`, `name`, `close`。
我想创建第四个字段`type`：

```
if close>10 , type=m else close<=10 , type=n 
```

我必须在 SQLite 中使用什么 SQL 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:09:18.093

[使用CASE 表达式](http://www.sqlite.org/lang_expr.html#case)更新该列：

```
ALTER TABLE quote ADD COLUMN type TEXT;
UPDATE quote SET type = CASE WHEN close > 10 THEN 'm' ELSE 'n' END; 
```

# git - git合并重命名冲突

> ID：13300675
> 
> 赞同：4
> 
> 时间：2012-11-09T01:09:28.693
> 
> 标签：git, merge, rename, rebase

我从现有分支创建了一个新分支：

```
git checkout master
git checkout -b test 
```

然后在新分支中我重命名了一个文件：

```
git mv foo.txt fooOld.txt
git mv fooNew.txt foo.txt
git commit -am "Rename file" 
```

与此同时，其他人在主分支上编辑了 fooNew.txt 并推送了更改：

```
git co master
echo "Some changes" >> fooNew.txt
git commit -am "Do some important changes"
git push origin master 
```

现在，当我尝试从 master 中提取更改时，出现错误：

```
CONFLICT (modify/delete): fooNew.txt deleted in HEAD and modified in master. 
```

如何合并这两个分支，以便最终得到一个 foo.txt 文件，其中包含对 master 上的 fooNew.txt 所做的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:44:22.190

使用你的方法，我没有问题。

```
$ git checkout -b test
Switched to a new branch 'test'

$ git mv foo.txt fooOld.txt

$ git mv fooNew.txt foo.txt

$ git commit -am "Rename file"
[test bf82f6d] Rename file
 1 files changed, 0 insertions(+), 0 deletions(-)
 rename fooNew.txt => fooOld.txt (100%)

$ git checkout master
Switched to branch 'master'

$ echo "Some changes" >> fooNew.txt

$ git commit -am "Do some important changes"
[master 653c0df] Do some important changes
 1 files changed, 1 insertions(+), 0 deletions(-)

$ git checkout test
Switched to branch 'test'

$ git merge master
Auto-merging fooOld.txt
Merge made by the 'recursive' strategy.
 fooOld.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-) 
```

# .net - 尝试安装“EntityFramework”的“5.0.0”版本，但该项目已包含不同的版本

> ID：13300679
> 
> 赞同：1
> 
> 时间：2012-11-09T01:09:39.053
> 
> 标签：.net, entity-framework, error-handling, visual-studio-2012, entity-framework-5

当我添加代码生成项时，我收到此错误：

> 尝试安装“EntityFramework”的“5.0.0”版本，但该项目已包含不同的版本。跳过...

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T06:34:29.970

尝试[在包管理器控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)中执行命令，希望对您有所帮助：

> 卸载包EntityFramework -Force

它强制卸载具有依赖项的包，并在卸载后执行：

> 安装包EntityFramework

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T22:28:01.830

谢谢，在阅读了很多其他答案之后，这几个简单的步骤实际上对我有用。

```
PM> Uninstall-Package EntityFramework -Force
Removing 'EntityFramework 5.0.0' from XXXXX.
Successfully removed 'EntityFramework 5.0.0' from XXXXX.
Uninstalling 'EntityFramework 5.0.0'.
Successfully uninstalled 'EntityFramework 5.0.0'.

PM> Install-Package EntityFramework
Installing 'EntityFramework 5.0.0'.
You are downloading EntityFramework from Microsoft, the license agreement to which is    available at http://go.microsoft.com/fwlink/?LinkId=253898&clcid=0x409\. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'EntityFramework 5.0.0'.
Adding 'EntityFramework 5.0.0' to XXXXX.
Successfully added 'EntityFramework 5.0.0' to XXXXX. 
```

Before this I had tried the following but without success: 1\. Removed the existing reference to EntityFramework, but couldn't add a new reference. 2\. Researched if EntityFramework needs to downloaded and installed differently.

Thankfully I didn't follow some other posts about installing the CTP 5\. I already have .net 4.5 and VS Express for the web installed. No other installation was required.

Disclaimer: I am a beginner, so my answer may not be entirely correct.

# android - 如何填充列表视图背景

> ID：13300681
> 
> 赞同：1
> 
> 时间：2012-11-09T01:09:39.493
> 
> 标签：android, background, android-listview

**更新 1**

行，

1.  1是什么都不做。
2.  2 是 listview.setBackground(Drawable)
3.  3是我要找的效果。

![在此处输入图像描述](../Images/8bddfd06ae990ed8e4e85b80f7adefc3.png)

* * *

listview 只填充 item 的背景，但我希望 item 的背景可以填充 listview 的空白区域。我能做些什么？

![你好](../Images/10e81abdb5610efa9f842555e0a42ffb.png)

谢谢大家，也许我的问题还不够清楚。我知道如何设置每个 Item 的背景，例如 Item 里面的红色。我也知道如何使用图像集 ListView 背景作为空文本。我希望效果是用空的Item背景来填充ListView的空viewpart。例如右图，没有项目内容，只是一个背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:45:44.030

试试这个代码...

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#CCC"
 >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<ListView 
    android:id="@+id/list1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#6cc"
    ></ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:08:46.273

试试这个：

```
<ListView
android:layout_width="match_parent "
android:layout_height="match_parent "
android:background="@drawable/background"
/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:05:54.533

好的，我尝试发布一张图片来解释它，但我不能，

我用一个项目（60 px）创建自定义布局，然后我得到活动的高度，除以 60 px 上的活动高度，我得到应该放在屏幕上的项目数

然后创建自定义适配器并在 getView() 方法中处理文本和背景颜色的逻辑。

现在我有一个像你一样的图像更新了。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:11:25.127

这只是一个猜测，但为什么不像你那样使用 setBackgroundDrawable（可绘制背景）并在你的项目上将背景设置为透明？当然你的背景会被拉伸，但这样你可以插入另一个背景图像，你不需要关心项目的背景。

# loops - 如何在 Lua 中的二维表上创建迭代器？

> ID：13300682
> 
> 赞同：4
> 
> 时间：2012-11-09T01:09:54.330
> 
> 标签：loops, multidimensional-array, lua, iterator

我有一个由表组成的 lua 表，所以它是二维的：根 -> 子 -> 孙子。

此层次结构的任何级别都不能保证是“类数组”。第一级具有“零间隙”的整数，第二级甚至没有被整数索引（而是被表索引）。

有问题的表是库中的私有结构。我想为图书馆用户提供一种解析其孙辈的方法。我不太关心它们的解析顺序，只要它们都是。

我首先想到的是使用一个接受回调的函数：

```
-- this scope has access to root 
function eachGrandChild(callback)
  for _,child in pairs(root) do
    for index,grandChild in pairs(child)
      callback(index, grandChild)
    end
  end
end 
```

用法：

```
-- no access to root, only to eachGrandChild
eachGrandChild(function(index, grandChild) print(index, grandChild) end) 
```

这么多就明白了。

**我的问题是：我可以使用[迭代器](http://www.lua.org/pil/7.1.html)来提供类似的功能吗？**

我说的是可以让我这样做的东西：

```
for index,grandChild in iterator() do
  print(index, grandChild)
end 
```

我一直在考虑这个问题，但我无法破解它。我见过的所有示例都使用数字在每次迭代中轻松“管理迭代器的状态”。由于我没有数字，我有点卡住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T01:36:27.310

[协程](http://www.lua.org/manual/5.2/manual.html#2.6)使编写这种迭代器变得容易。协程是一个可以暂停和恢复执行的函数，在概念上类似于线程。协程可以包含深度嵌套的循环，从最内层循环产生一个值，然后在恢复时从中断处继续。当它产生时，恢复它的调用者可以接收产生的值。

在您的情况下，转换为*产生*孙子`eachGrandChild`的生成器函数。

 *```
function eachGrandChild(root)
  for _,child in pairs(root) do
    for index,grandChild in pairs(child) do
      coroutine.yield(index, grandChild)
    end
  end
end 
```

然后用于`coroutine.wrap`创建一个函数，该函数将为您的生成器创建一个协程，并在每次调用该函数时恢复它。

```
function grandChildren(t)
    return coroutine.wrap(function() eachGrandChild(t) end)
end 
```

现在你有了你的迭代器：

```
for key, val in grandChildren(root) do
    print(key, val)
end 
```

[在 Lua 中的编程中有一个章节。](http://www.lua.org/pil/9.3.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T06:55:27.613

我同意 Mud 的观点，即协程是解决问题的最佳方法。

为了记录，为了比较，我写了一个没有协程的迭代器。

`eachGrandChild`为每个元素调用第一个函数。它使用一个`state`变量，包含两个索引（顶级和二级）。

```
function eachGrandChild(state)
  while state.childIndex ~= nil do
    local child           = root[state.childIndex]
    state.grandChildIndex = next(child, state.grandChildIndex)
    if state.grandChildIndex == nil then
      state.childIndex = next(root, state.childIndex)
    else
      return state.grandChildIndex, child[state.grandChildIndex]                                                                                                                  
    end 
  end 
end 
```

迭代器使用辅助函数初始化：

```
function grandChildren(root)
  return eachGrandChild, {childIndex = next(root)}
end 
```

现在迭代器可以正常使用了：

```
for key, val in grandChildren(root) do
    print(key, val)
end 
```

与基于协程的版本相比，`eachGrandChild`代码行数更多，更难阅读。*

# android - 如何在不使用 CONFLICT_REPLACE 的情况下获得“插入或更新”行为？

> ID：13300689
> 
> 赞同：1
> 
> 时间：2012-11-09T01:11:11.957
> 
> 标签：android, android-sqlite

我的 Android 应用程序使用 SQLite FTS3 表来提供全文搜索。我正在使用`insertWithOnConflict`with`CONFLICT_REPLACE`更新我的数据库，如果需要插入新行或更新现有行（如果存在）。

我很惊讶地发现我的表最终包含重复的行——但看起来这是 SQLite 的 FTS 模块的文档化“功能”：

从[SQLite FTS3 和 FTS4 扩展](http://www.sqlite.org/fts3.html)页面：

> 数据类型和列约束与每列一起指定。FTS 和 SQLite 完全忽略了这些。

从命令行复制副本非常容易：

```
sqlite> CREATE VIRTUAL TABLE test_duplicates USING FTS3
   ...> (id INTEGER PRIMARY KEY, name TEXT);
sqlite> INSERT INTO test_duplicates (id, name) VALUES (1, "George");
sqlite> INSERT INTO test_duplicates (id, name) VALUES (1, "George");
sqlite> INSERT OR REPLACE INTO test_duplicates (id, name) VALUES (1, "George");
sqlite> SELECT * FROM test_duplicates;
1|George
1|George
1|George
sqlite> 
```

我的问题是：复制 的行为的最佳（最简单、最强大）的方法是`CONFLICT_REPLACE`什么？

我目前的想法是（A）执行 SELECT，然后根据结果执行 UPDATE 或 INSERT，或者（B）盲目尝试删除现有行（可能存在也可能不存在）然后 INSERT。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:59:54.257

参考[fts 文件](http://www.sqlite.org/fts3.html)，我找到了这一段：

> ...每个 FTS 表都有一个“rowid”列。FTS 表的 rowid 与普通 SQLite 表的 rowid 列的行为方式相同，只是在使用 VACUUM 命令重建数据库时，FTS 表的 rowid 列中存储的值保持不变。*对于 FTS 表，允许将“docid”与通常的“rowid”、“oid”和“ oid* ”标识符一起作为别名。尝试使用表中已存在的 docid 值插入或更新行是错误的，就像使用普通 SQLite 表一样。

这意味着您可以使用内置`docid`列作为主键并让 fts 表对其应用它的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T08:19:33.023

我也有同样的问题。我发现当我们`CREATE VIRTUAL TABLE test_duplicates USING FTS3`将创建一个名为的列时`rowid`，它是该表的主键，因此我们只需要使用它就`rowid`可以`id`正常工作。

如果你改变： `INSERT INTO test_duplicates (id, name) VALUES (1, "George");`

到：

```
INSERT INTO test_duplicates (rowid, id, name) VALUES (1, 1, "George");
INSERT INTO test_duplicates (rowid, id, name) VALUES (2, 2, "George"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:16:58.910

我不会因此而受到赞扬。但我找不到我从中得到的原始链接。你做一个查询，然后：

```
if (cursor.moveToFirst()) {
        // record exists
    } else {
        // record not found 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T14:08:19.337

我对 INSERT OR REPLACE 使用以下查询

```
INSERT OR REPLACE INTO test_duplicates (`rowid`, `name`) VALUES 
((SELECT `rowid` FROM test_duplicates WHERE `name` = "George" LIMIT 1), "George") 
```

它有效。但在这种情况下，您无法提供`rowid`. `rowid`将由数据库本身处理。

# python - 在外部模块中实现的 Python 方法 - 无法识别

> ID：13300693
> 
> 赞同：0
> 
> 时间：2012-11-09T01:11:32.000
> 
> 标签：python

我编写了一个 Python 模块，其中包含要在其他模块中使用的方法。通过进行一些编码，在某些情况下，当从其他具有`methods_module.method()`语法的模块调用这些方法时，Python 无法看到这些方法。在哪些情况下可能出现这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:33:43.497

有点不清楚你的问题是什么，所以很难回答。但是，如果您使用以下语法导入

```
from methods_module import method 
```

那么这不会暴露`methods_module`给您的程序。因此`methods_module.method()`行不通。

# javascript - Document.getElementById() 返回名称等于指定 id 的元素

> ID：13300698
> 
> 赞同：5
> 
> 时间：2012-11-09T01:11:51.113
> 
> 标签：javascript, html, internet-explorer, dom, quirks-mode

我之前在[这个 SO](https://stackoverflow.com/questions/13281443/regex-find-elements-with-name-attribute-but-not-id)中提到过关于 IE6/7（和某些版本的 Opera）的有趣行为，它`document.getElementById`可以找到一个元素，其`name`属性已定义但属性未定义`id`，这样

```
function f() {
    document.getElementById("a1").value = ...;
}
...
<input name="a1" ...></input> 
```

实际上适用于这些版本。

通过网络搜索，我发现了 Chris Bloom 的[这个错误报告](http://www.quirksmode.org/bugreports/archives/2005/09/documentgetElementById_may_return_element_with_a_n.html)，其中一个名叫 Milo van der Leij 的用户指出了以下内容（正如他在[这个 w3c 规范](http://www.w3.org/TR/html4/struct/links.html#h-12.2.3)中所提到的）：

*在他们的辩护中：“id 和 name 属性共享相同的名称空间。”*

id 和 name 属性共享同一个命名空间是什么意思？为什么这个条件足以让 IE6/7/Opera 在他们的 JS 引擎中实现这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T01:15:37.440

该术语`"same namespace"`意味着名称和 ID 不是完全分开的。您可以在一个特定对象上使用相同的`name`和`id`，但不能`name="foo"`在一个对象和`id="foo"`另一个对象上使用。这会产生冲突。

这正是那些浏览器决定实现事物的方式。每个元素还有一个全局变量，其 id 包含 dom 元素。这就是他们实现事物的方式。这不是标准的，也不是在更现代的浏览器中做事的方式（除了一些向后兼容性）。

`id`为要检索的任何 DOM 元素使用值。在已发布的表单中使用`name`服务器标识值。

如果您不在一个对象上使用 an并在另一个对象上使用`id`相同的，您的代码将不会在名称和 id 之间发生冲突`name`，并且通常不存在为特定元素提供相同的问题`name`and `id`。

# ssas - 货币维度的 SSAS IsAggregatable

> ID：13300702
> 
> 赞同：0
> 
> 时间：2012-11-09T01:12:11.503
> 
> 标签：ssas, currency, dimension

我有一个具有源货币维度和计费货币维度的多维数据集。我将这两个都设置为 IsAggregatable = False （这似乎是推荐的，因为我不希望 All 级别自动总结不同的货币！）。当所有级别被取消时，我只剩下一个默认货币，我可以根据需要进行设置。

问题是这两个维度现在充当了彼此的一种过滤器。如果我想要按计费货币计算所有计费金额的总和并将该维度单独拖到网格上，则过滤结果以仅显示也与默认源货币匹配的交易（如果有）。反之亦然。只有当我将另一个维度拖到网格上时，我才能显示所有数据。

是否有一些设置允许维度的默认成员代表所有成员？感觉 Not Aggregatable 在一个维度的上下文中是有意义的，但在查看所有数据方面在其他维度的上下文中似乎没有什么意义。即，我想按计费货币查看交易摘要——我不在乎源货币是什么（即您可以考虑所有这些）。

我很可能在这里落入一些基本的陷阱，可能与设计有关 - 任何线索都会受到赞赏。

格伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:32:41.690

终于找到了一篇文章的参考，该文章准确地描述了这种情况，以及解决它的有趣方法。对我来说最重要的是认识到这种情况是真实的，而不是我的设计问题。

[此处描述和解决的问题](http://dlaplante.wordpress.com/2012/05/04/ssas-summing-on-different-currencies-dont-hide-your-data/)

# cassandra - 缩小 Cassandra 集群的最佳方法

> ID：13300709
> 
> 赞同：10
> 
> 时间：2012-11-09T01:12:53.337
> 
> 标签：cassandra

因此，有大量关于如何扩展 Cassandra 的文档，但是是否有关于如何“取消扩展”Cassandra 并从集群中删除节点的良好资源？是否像关闭节点、让集群再次同步并重复一样简单？

原因是一个预计流量高峰的网站，在几天内从每天的数千次点击攀升至数十万次。网站会提前“加速”，启动多个 Web 服务器实例，Cassandra 等。在请求洪流平息后，目标是关闭不再使用的实例，而不是为服务器付费只是坐在那里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T09:00:17.973

如果您只是关闭节点并重新平衡集群，您可能会丢失一些数据，这些数据仅存在于已删除的节点上并且尚未复制。

使用 nodetool 可以轻松完成安全的集群收缩。首先，运行：

```
nodetool drain 
```

...在删除的节点上，停止接受写入并刷新内存表，然后：

```
nodetool decommission 
```

要将节点的数据移动到其他节点，然后关闭节点，然后在其他节点上运行：

```
nodetool removetoken 
```

...从集群中完全删除节点。详细的文档可以在这里找到：[http ://wiki.apache.org/cassandra/NodeTool](http://wiki.apache.org/cassandra/NodeTool)

根据我的经验，我建议逐个删除节点，而不是分批删除。这需要更多时间，但在网络中断或硬件故障的情况下更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T13:54:59.563

当您删除节点时，您可能需要重新平衡集群，将一些节点移动到新令牌。在计划的缩减中，您需要：

1 - 最小化移动次数。

2 - 如果您必须移动节点，请尽量减少传输的数据量。

有一篇关于集群平衡的文章可能会有所帮助： [Balancing Your Cassandra Cluster](http://www.datastax.com/dev/blog/balancing-your-cassandra-cluster)

此外，[本视频](http://www.youtube.com/watch?v=GddZ3pXiDys)的开头是关于添加节点和删除节点操作以及在每个操作中最小化集群影响的最佳策略。

希望这 2 个参考资料可以为您提供足够的信息来计划您的降级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T10:32:19.623

首先，在将要删除的节点上，将内存（memtable）刷新到磁盘上的 SSTables：

-nodetool 刷新

二、运行命令离开集群：-nodetool decommission

此命令会将节点负责的范围分配给其他节点并适当地复制数据。

要监视进程，您可以使用命令：- nodetool netstats

找到一篇关于如何从 Cassandra 中删除节点的文章。这对我[缩小 cassandra](http://dabbledouble.com/2020/04/06/scaling-down-cassandra-cluster/)很有帮助。所有操作都在那里逐步描述。

# c++ - 我的程序产生错误的输出。为什么？

> ID：13300710
> 
> 赞同：-5
> 
> 时间：2012-11-09T01:12:59.623
> 
> 标签：c++

```
#include "stdafx.h"
#include <iostream>
#include <conio.h>
#include <math.h>
using namespace std;

void main() {
float y;
int x;
cout<<"Jep vleren e x-it:"<<endl;
cin>>x;
if (x>=1)
{
    y=(x^3 - 2*x)/(1+x^2);
    cout<<y<<endl;
}
if ((x>-1)&&(x<1))
{
    y = sqrt(1+x^2);
    cout<<y<<endl;
}
if (x<=-1) 
{
    y=x/(1+x^2);
    cout<<y<<endl;
}
_getch();
} 
```

我必须根据 x 计算 y 的值。但是有什么问题 - 当我输入时`- 3`，它说`0`。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:19:15.803

你正在使用 ^ XOR 运算符，[请参阅 MSDN](http://msdn.microsoft.com/en-us/library/3akey979%28v=vs.80%29.aspx)你想使用[pow](http://msdn.microsoft.com/en-us/library/dt5dakze%28v=VS.71%29.aspx)函数吗？

# llvm - 我需要自己计算填充来构造 StructType 吗？

> ID：13300717
> 
> 赞同：3
> 
> 时间：2012-11-09T01:13:56.860
> 
> 标签：llvm, llvm-c++-api

我正在使用 LLVM IR 生成一些结构数据。

例如：

```
struct mystruct {int a:1; int b:2; unsigned long c} = {{1, 2, 3}}; 
```

我阅读了文档并尝试了演示，似乎 API 需要用户自己处理填充和值组合。

有没有办法像这样更简单地创建结构：

```
fields.push_back(Type::getIntNTy(context, 1));
fields.push_back(Type::getIntNTy(context, 2));
fields.push_back(Type::getIntNTy(context, 64));
structTy.setBody(fields, false /* isPacked*/); 
```

布局工作真的很难，而且很可能会导致错误。组合初始化器的值也很困难。

据我了解，如果我告诉 llvm API 结构没有打包，它应该自动处理填充，对吧？

任何意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:18:54.273

填充由目标系统的 C 标准和 ABI 规定。LLVM 本身不知道这些规则（因为它们适用于 C，而不适用于 LLVM IR）。

不幸的是，您有责任处理所有的填充怪异和位域布局。通常，这是 C/C++ 前端的工作（例如 clang）。

# java - Java 抛出 NoSuchElementException

> ID：13300718
> 
> 赞同：0
> 
> 时间：2012-11-09T01:14:00.817
> 
> 标签：java, exception, if-statement, try-catch, java.util.scanner

如果在读取文件时缺少字段，我想捕获 NoSuchElementException。如果缺少字段，我只需要跳到文件的下一行。我的问题是，我在哪里实现我的 try/catch 代码来做到这一点？这是代码：

```
String petType;
int lineNumber = 0;

while(input.hasNext()) {

  petType = input.next();
  lineNumber++;

  //I'm thinking of doing it for every if(input.hasNext()) but that would be too messy to read.
  if(petType.equals("BIRD")) {
    if(input.hasNext())
      String name = input.next();
    if(input.hasNext())
      String owner = input.next();
    if(input.hasNextDouble())
      double weight = input.nextDouble();
    if(input.hasNextBoolean())
      boolean clipped = input.nextBoolean();
    Bird x = new Bird(name,owner,weight,clipped);
    object.addPet(x);
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:20:20.700

只需摆脱所有*hasNextXXX()*调用，让*nextXXX()*为您抛出异常。

```
String petType;
int lineNumber = 0;

while (input.hasNext()) {
    lineNumber++;    
    try {
        petType = input.next();
        if (petType.equals("BIRD")) {
            String name = input.next();
            String owner = input.next();
            double weight = input.nextDouble();
            boolean clipped = input.nextBoolean();
            Bird x = new Bird(name, owner, weight, clipped);
            object.addPet(x);
        }
    }
    catch (NoSuchElementException nse) {
        System.out.println("something is missing in line " + lineNumber);
    }
} 
```

话虽如此，我认为最好保留所有 hasNextXXX 调用并在其中任何一个返回 false时中断当前迭代（使用*continue ）。*这将实现与捕获异常相同的效果，但不会产生使用 try/catch 的不必要开销。

我的猜测是你的老师只是想让你了解例外，虽然......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:21:02.440

如果缺少一个字段-您的 input.hasNext()/input.hasNextDouble/input.hasNextBoolean 将返回false...您是否真的需要捕获异常-因为您正在检查字段是否存在？

如果任何 if 条件失败，您可以直接跳到下一行。

# ruby-on-rails - 如何在 Devise 中编辑实际表格？（Ruby on Rails 3+）

> ID：13300719
> 
> 赞同：0
> 
> 时间：2012-11-09T01:14:01.917
> 
> 标签：ruby-on-rails

设计中的 form_for 方法会输出一些 HTML，但是有没有办法编辑该默认 HTML？所以基本上，我希望文本框有 HTML 占位符，但默认情况下它们没有，而且我似乎无法编辑这个 HTML。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:16:32.090

您可以通过将视图文件复制到应用程序视图目录来自定义设计的默认视图。在那里，您可以根据需要修改它们。当设计动作渲染视图时，它首先会寻找你的`app/views/devise`目录。如果它在那里找到相应的视图，它将渲染它。否则它将呈现为默认值。

要复制视图，请运行以下命令：

```
rails g devise:views 
```

`app/views`这将在命名中创建一个新目录`devise`。假设您要自定义新的注册表单。它位于`app/views/devise/registrations/new.html.erb`

您可以按喜欢的方式编辑它们。要添加一个`placeholder`属性，比如说电子邮件字段，您需要编辑该行：

```
<%= f.email_field :email %> 
```

和

```
<%= f.email_field :email, :placeholder => 'Enter your email address' %> 
```

您可以以同样的方式添加任何自定义属性

# php - PHP static self::/$this-> 查询数据库时的计时

> ID：13300725
> 
> 赞同：1
> 
> 时间：2012-11-09T01:15:24.563
> 
> 标签：php, mysql, scope

我最近正在做一些数据库维护，旨在对某些事情进行一些错误检查和保护，我可以列出表并将它们存储在一个数组中而没有问题，但是当我尝试验证该字段时出现了我的问题桌子......它确实有效 - 但在第二次询问时。我错过了什么，或者这是 PHP 内部的时间问题？

**简单的表创建：**

```
CREATE TABLE `test_table` (
  `testfield1` int(11) NOT NULL AUTO_INCREMENT,
  `testfield2` int(11) NULL,
  `testfield3` int(11) NULL,
  `testfield4` int(11) NULL,
  PRIMARY KEY (`testfield1`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci; 
```

**剥离 PHP 代码：**

```
<?php
include_once("config.php");

class dbController {

    static $dbTables;
    static $curTable;
    static $dbTableFields;

    protected $dbh;

    function __construct() {
        // DB_SERVER, DB_NAME, DB_USER + DB_PASS login credentials 
        // defined in config.php.
        $this->dbh = new PDO(
            "mysql:host=". DB_SERVER .";dbname=" . DB_NAME,
            DB_USER,
            DB_PASS,
            array(PDO::ATTR_PERSISTENT => true)
        );

        // List the tables on the Database.
        $sth = $this->dbh->query("SHOW TABLES");
        $result = $sth->fetchAll(PDO::FETCH_ASSOC);
        foreach($result as $table) {
            self::$dbTables[] = $table['Tables_in_' . DB_NAME];
        }
    }

    // Check field exists in table.
    function check_fields($table, $field) {

        if (in_array($table, self::$dbTables)) {
            if (self::$curTable != $table) {
                self::$curTable = $table;
                $sth = $this->dbh->query("SHOW COLUMNS FROM `$table`");
                $result = $sth->fetchAll(PDO::FETCH_ASSOC);
                foreach ($result as $field) {
                    self::$dbTableFields[] = $field['Field'];
                }
            }
            return in_array($field, self::$dbTableFields) 
                ? "true<br />" : "false<br />";
        }
    }
} 
```

**示例**：

```
$db = new dbController();

// Calling the same command 3 times:

echo $db->check_fields('test_table','testfield1');
echo $db->check_fields('test_table','testfield1');
echo $db->check_fields('test_table','testfield1');
?> 
```

**结果：**

```
false
true
true 
```

我尝试使用 $this-> 将静态变量替换为公共变量来调用，但仍然得到相同的结果。我错过了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:49:28.990

问题是您`$field`在第一次调用函数时覆盖了变量：

```
function check_fields($table, $field) {
  ...
  foreach ($result as $field) {
                      ^^^^^^ 
```

在该循环结束时，`$field`包含一个带有最后一个值的数组，而不是您期望的字符串。

第二次调用具有相同表名的函数时，该部分将被跳过为`self::$curTable === $table`.

只需在循环中更改变量的名称：

```
foreach ($result as $i) {
   self::$dbTableFields[] = $i['Field'];
} 
```

# c++ - 单个变量的线程安全

> ID：13300729
> 
> 赞同：9
> 
> 时间：2012-11-09T01:16:06.490
> 
> 标签：c++, multithreading, thread-safety

我理解线程安全的概念。在尝试保护单个变量时，我正在寻找简化线程安全的建议。

假设我有一个变量：

```
double aPass; 
```

我想保护这个变量，所以我创建了一个互斥锁：

```
pthread_mutex_t aPass_lock; 
```

现在有两种我能想到的好方法，但它们都有令人讨厌的缺点。首先是创建一个线程安全的类来保存变量：

```
class aPass {
    public:
        aPass() {
            pthread_mutex_init(&aPass_lock, NULL);
            aPass_ = 0;
        }

        void get(double & setMe) {
            pthread_mutex_lock(aPass_lock);
            setMe = aPass_
            pthread_mutex_unlock(aPass_lock);
        }

        void set(const double setThis) {
            pthread_mutex_lock(aPass_lock);
            aPass_ = setThis;
            pthread_mutex_unlock(aPass_lock);
        }
    private:
        double aPass_;
        pthread_mutex_t aPass_lock;
}; 
```

现在这将保持`aPass`完全安全，没有什么是错误的，永远不要碰它，耶！然而，看看那些乱七八糟的东西，想象一下访问它时的混乱。总的。

另一种方法是让它们都可以访问，并确保在使用 aPass 之前锁定互斥锁。

```
pthread_mutex_lock(aPass_lock);
   do something with aPass
pthread_mutex_unlock(aPass_lock); 
```

但是，如果项目中有新人加入，如果您忘记锁定它会怎样。我不喜欢调试线程问题，它们很难。

有没有一个好方法（使用pthreads，因为我必须使用几乎没有提升支持的QNX）锁定单个变量而不需要一个大类，这比创建一个互斥锁更安全吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-09T12:42:54.957

```
std::atomic<double> aPass; 
```

前提是你有 C++11。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T01:29:49.527

为了详细说明我的解决方案，它会是这样的。

```
template <typename ThreadSafeDataType>
class ThreadSafeData{
   //....
private:
   ThreadSafeDataType data;
   mutex mut;
};

class apass:public ThreadSafeData<int> 
```

此外，为了使其独一无二，最好将所有运算符和成员设为静态。为此，您需要使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern) 即

```
template <typename ThreadSafeDataType,class DerivedDataClass>
class ThreadSafeData{
//....
};
class apass:public ThreadSafeData<int,apass> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T01:32:05.227

您可以轻松创建自己的类，在构造时锁定互斥体，并在破坏时解锁它。这样，无论发生什么情况，互斥体都会在返回时被释放，即使抛出异常或采用任何路径。

```
class MutexGuard
{
    MutexType & m_Mutex; 
public:

    inline MutexGuard(MutexType & mutex)
        : m_Mutex(mutex)
    { 
        m_Mutex.lock();
    };

    inline ~MutexGuard()
    { 
        m_Mutex.unlock();
    };
}

class TestClass
{
    MutexType m_Mutex;
    double m_SharedVar;

    public:
        TestClass()
            : m_SharedVar(4.0)
        { }

        static void Function1()
        {
            MutexGuard scopedLock(m_Mutex); //lock the mutex
            m_SharedVar+= 2345;
            //mutex automatically unlocked
        }
        static void Function2()
        {
            MutexGuard scopedLock(m_Mutex); //lock the mutex
            m_SharedVar*= 234;
            throw std::runtime_error("Mutex automatically unlocked");
        }

} 
```

`Function1()`变量 m_SharedVar 确保和之间的互斥`Function2()`，并且总是在返回时解锁。

boost 具有内置类型来完成此操作：boost::scoped_locked、boost::lock_guard。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T01:25:15.720

您可以创建一个类，该类充当您的变量的通用包装器，以同步对它的访问。

为赋值添加运算符重载，您就完成了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T01:31:04.137

考虑使用`RAII idiom`，下面的代码只是想法，它没有经过测试：

```
template<typename T, typename U>
struct APassHelper : boost::noncoypable
{
  APassHelper(T&v) : v_(v) { 
    pthread_mutex_lock(mutex_);
  }
  ~APassHelper() {
    pthread_mutex_unlock(mutex_);
  }
  UpdateAPass(T t){
    v_ = t;
  }
private:
  T& v_;
  U& mutex_;
};

double aPass;
int baPass_lock;
APassHelper<aPass,aPass_lock) temp;
temp.UpdateAPass(10); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-09T02:39:50.107

您可以使用运算符而不是 get/set 来修改 aPass 类：

```
class aPass {
public:
    aPass() {
        pthread_mutex_init(&aPass_lock, NULL);
        aPass_ = 0;
    }

    operator double () const {
        double setMe;
        pthread_mutex_lock(aPass_lock);
        setMe = aPass_;
        pthread_mutex_unlock(aPass_lock);
        return setMe;
    }

    aPass& operator = (double setThis) {
        pthread_mutex_lock(aPass_lock);
        aPass_ = setThis;
        pthread_mutex_unlock(aPass_lock);
        return *this;
    }
private:
    double aPass_;
    pthread_mutex_t aPass_lock;
}; 
```

用法：

```
aPass a;
a = 0.5;
double b = a; 
```

这当然可以被模板化以支持其他类型。但是请注意，在这种情况下，互斥锁是多余的。通常，在保护小数据类型的加载和存储时，内存屏障就足够了。如果可能，您应该使用 C++11 `std::atomic<double>`。

# c# - 查询选择最畅销的产品

> ID：13300731
> 
> 赞同：1
> 
> 时间：2012-11-09T01:16:30.063
> 
> 标签：c#, linq, entity-framework, linq-to-entities, group-by

我在实体框架模型中有这 3 个表/类：

```
Orders (OrderedItems, OrderTime)
OrderedItems (Product, Qty)
Products (Name, CreatedTime) 
```

我可以通过这样做来选择最畅销的产品

```
var items = Orders.SelectMany(o => o.OrderedItems);
var products = items.GroupBy(oi => oi.Product)
                    .OrderByDescending(g => g.Sum(oi => oi.Qty))
                    .Select(g => g.Key).Take(10); 
```

我如何选择性能最差的产品（即相反）？

注意：**订单表中可能不存在性能最差的产品，**因为它们可能永远不会被订购。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:19:47.207

```
var items = Orders.SelectMany(o => o.OrderedItems);
var products = items.GroupBy(oi => oi.Product)
                    .OrderBy(g => g.Sum(oi => oi.Qty))
                    .Select(g => g.Key).Take(10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:19:59.933

尝试

```
OrderBy(g => g.Sum(oi => oi.Qty)) 
```

它会将最低金额放在首位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T02:22:37.317

您可以从`Products`表格开始并从那里找到匹配项。一种方法是使用[join into](http://msdn.microsoft.com/en-us/library/bb311040.aspx)子句对`Products`表进行分组`OrderedItems`：

```
var items = Orders.SelectMany(o => o.OrderedItems);
var products = (from product in Products
                join item in items on product equals item.Product into matchingItems
                orderby matchingItems.Sum(oi => oi.Qty)
                select product).Take(10); 
```

另一种可能效率较低但您可能会发现更具可读性的方法是使用以下方法过滤项目`Enumerable.Where()`：

```
var items = Orders.SelectMany(o => o.OrderedItems);
var products = (from product in Products
                orderby items.Where(oi => oi.Product == product).Sum(oi => oi.Qty)
                select product).Take(10); 
```

这很好地转化为方法语法：

```
var items = Orders.SelectMany(o => o.OrderedItems);
var products = Products.OrderBy(p => items.Where(oi => oi.Product == product)
                                          .Sum(oi => oi.Qty))
                       .Take(10); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T01:20:40.060

只需更改`OrderByDescending`为`OrderBy`，它应该按升序排列它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T02:54:15.410

看来您需要从 Products 到 OrderedItems 的左外连接。`productsQty`应包含带有来自 OrderedItems 的数量的产品列表，如果没有，则为 0。

```
var productQty = from p in Products
            join oi in OrderedItems on p equals oi.Product into joined
            from poi in joined.DefaultIfEmpty()
            select new { Product = p, Qty = poi == null ? 0 : poi.Qty };
var products = productQty.GroupBy(p => p.Product).OrderBy(g => g.Sum(oi => oi.Qty)).Take(10); 
```

更新：查询已更正。

# svn - 在 Subversion 提交命令上禁用“隐式目标”

> ID：13300733
> 
> 赞同：1
> 
> 时间：2012-11-09T01:16:34.700
> 
> 标签：svn, version-control

使用 subversion 命令行客户端时，如果我在`svn commit -m"<Some message>"`没有指定任何文件的情况下发出 an，则默认行为是提交当前目录中的所有修改文件。

这在 Subversion 手册中被称为 [“隐式目标”](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.commit.html)

有时当我只想提交选定的文件时，我忘记指定它们，导致所有文件都被无意中签入。

Git 没有这种隐含的目标行为，您必须指定`git push --all`.

是否可以在颠覆中禁用隐式目标行为？

# ruby - 更改对象数组中属性的不可变方法

> ID：13300736
> 
> 赞同：0
> 
> 时间：2012-11-09T01:16:48.770
> 
> 标签：ruby

我有一个以下数组

```
Bot = Struct.new(:name, :age)

bots = %w(foo bar baz).map do |name|
  Bot.new(name, rand(10))
end

p bots
[ #<struct Bot name="foo", age=3>, 
  #<struct Bot name="bar", age=8>, 
  #<struct Bot name="baz", age=0> ] 
```

我想从属性转换的`bots`地方获取一个新数组，但我不想更改数组中的真实对象。我怎样才能做到这一点？`age``to_s``bots`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:22:20.207

```
Bot = Struct.new(:name, :age)

bots = %w(foo bar baz).map do |name|
  Bot.new(name, rand(10))
end
#=> [#<struct Bot name="foo", age=4>,
#    #<struct Bot name="bar", age=5>,
#    #<struct Bot name="baz", age=8>]

bots.map { |bot| Bot.new(bot.name, bot.age.to_s)}
#=> [#<struct Bot name="foo", age="4">,
#    #<struct Bot name="bar", age="5">,
#    #<struct Bot name="baz", age="8">] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:23:36.627

这将保留机器人：

```
new_bots = bots.map {|bot| Bot.new(bot.name, bot.age.to_s) } 
```

这**不会**保留机器人：

```
new_bots = bots.map! {|bot| Bot.new(bot.name, bot.age.to_s) } 
```

地图！修改它被调用的对象，就像大多数以 ! 结尾的方法一样。它是地图的可变版本。

map 不会修改调用它的对象的内容。大多数数组方法都是不可变的，除了那些以 ! （但这只是一个约定，所以要小心）。

# java - 构造 URL 查询字符串：字符集编码/解码

> ID：13300739
> 
> 赞同：0
> 
> 时间：2012-11-09T01:16:52.670
> 
> 标签：java, jsp, character-encoding

我正在尝试使用包含*其他*字符的查询字符串构建一个 URL（在我的例子中是希伯来语）。但是，当我的 webapp 收到请求时，提取的请求参数是 gibrish ...

我该如何解决这个问题？

```
new URL("http://localhost:8080/SRV/page.jsp?param=" + URLEncoder.encode("heb text", "UTF-8")).openConnection(); 
```

目标页面：

```
<%
    System.out.println("Receive: " + request.getParameter("param"));
%> 
```

我正在使用 tomcat6、jdk6、windows7 x64

编辑：这是我的页面声明：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:33:49.050

查看`$TOMCAT_HOME/conf/server.xml`文件并检查编码设置：

```
<Connector port="8080" ... URIEncoding="UTF-8" /> 
```

似乎 Tomcat 需要此设置才能使 UTF-8 用于 HTTP 请求值，例如请求参数。

# firefox - iframe 不会在 Firefox 中加载正确的哈希

> ID：13300745
> 
> 赞同：1
> 
> 时间：2012-11-09T01:17:10.217
> 
> 标签：firefox, iframe, pushstate, postmessage, window.location

我有一个具有不同域的 iframe，我可以通过使用 jQuery postMessage 插件与父或子通信来调整 iframe 的大小。但是，我有一个单页应用程序，它滚动完成一些步骤，然后通过 ajax 加载到结果页面中。在此结果页面上，有需要在父窗口中加载的产品链接。这也很好。我的问题是当用户单击后退按钮时，我想重新生成并显示结果，而不是页面的初始状态。在 Chrome 上，这工作正常，但在 Firefox 上却不行（当它在 iframe 中时，否则 url 直接工作）。Firefox 似乎忽略了我设置的哈希、cookie、pushState 等。我不知道如何解决这个问题，任何帮助将不胜感激。

首先，我想查看历史 API 是否可用，当我调用 app.getResults() 时，我会检查它是否可用，否则设置 location.hash = "results"。app.resultPageSetup(currentState) 以我喜欢的方式很好地加载，因为它跳过了用于获取对象的 ajax 调用，因为我已经将它保存在状态中。

```
var isHistory = function() {
 return !!(window.history && history.pushState);
};
//This "if" is for a different part of the app. Just ignore.
if ($('.not_container2').length) {
  setTimeout(function() {
    app.setFrameHeight("2500");
  }, 1000);
} else {
  if ( isHistory() === true  ) {
    var currentState = history.state;
    history.pushState('', '', '#steps');
    if (currentState !== null ) {
      $('.container').hide();
      $('.container2').show();
      app.resultPageSetup(currentState);
      app.resultPageComplete();
    } else {
      $('.container').show();
      $('.container2').hide();
      setTimeout(function() {
        if ($('.container').length){
          app.setFrameHeight("610");
        } else if ($('.not_container2').length) {
          app.setFrameHeight("2500");
        }
      }, 1000);
    }
  } else {
    //Firefox ignores this stuff. Chrome works. Doing without a cookie at all would be nice
    if (location.hash === "#results" && $.cookie("results") === "true") {
      $('.container').hide();
      $('.container2').show();
      app.getResults();
  } else if (location.hash === "") {
    $('.container').show();
    $('.container2').hide();
    $.cookie("results", null);
    setTimeout(function() {
      if ($('.container').length){
      app.setFrameHeight("610");
      } else if ($('.not_container2').length) {
        app.setFrameHeight("2500");
      }
    }, 1000);
  }
 }
} 
```

以下是链接：父级是[http://www.hhgregg.com/productfinder/tv](http://www.hhgregg.com/productfinder/tv)（选择第一个选项），iframe 源是[http://hhgregg-finders.gst.api.igodigital.com](http://hhgregg-finders.gst.api.igodigital.com)

我也可以通过在父节点上设置哈希来利用 $.postMessage，但我也遇到了麻烦。这是那里的一般想法：

```
$(function() {

  var iframe = $('#baseFrame');
  var h;
  var saved_state = "igo_steps";

  $.receiveMessage(function(e){
   var data = e.data.split("|");
   var height = data[0];
   var state = data[1];

   if (!isNaN(height)) {
    h = height;
   } else {
    h = "610";
   }
   iframe.attr("height", h);

   if (saved_state !== state) {
    window.location.hash = state;
    $.postMessage(window.location.hash, '*', document.getElementById("baseFrame").contentWindow);
   }
 }, 'http://hhgregg-finders.gst.api.igodigital.com');
}); 
```

# eclipse - 无法让 Eclipse IDE 运行

> ID：13300750
> 
> 赞同：1
> 
> 时间：2012-11-09T01:17:34.790
> 
> 标签：eclipse, java, java-7

我正在尝试安装 Eclipse IDE Classic。

我已经解压缩了文件夹，它在我的桌面上。我双击 eclipse.exe 文件并出现 Java 错误，因此在 eclipse.ini 文件中我更改了 JDK 位置，如下所示：

```
-vm
C:\Program Files\Java\jre7\bin\javaw.exe 
```

现在，我收到以下错误：

```
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

我的 JDK 是最新的，我已经更新了它，甚至尝试了全新安装。我还尝试了其他 Eclipse IDE 版本并在网上搜索了这个问题，但我找不到有效的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T01:21:12.660

在我的 eclipse.ini 文件中，-vm 和 vm 目录之间没有空格。我记得以前读过一些关于这个的东西，值得一试。

`-vmC:\Program Files\Java\jre7\bin\javaw.exe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T21:05:09.353

Thnaks Duncan Krebs，您的解决方案对我有用！我从

```
-vm C:\Program Files\Java\jdk1.8.0_101\bin\javaw.exe 
```

到

```
-vm 
C:\Program Files\Java\jdk1.8.0_101\bin\javaw.exe 
```

它对我有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:27:35.700

这是因为您的 eclipse.ini 配置不正确。很可能是因为您将参数添加到文件中的错误位置，这是一个示例。我不确定您是否需要 % 程序文件中的空间我建议您的 jdk 的文件路径没有任何空格。确保 vm 在 vm 参数之前指定，否则您将收到您遇到的错误。在这里查看一个示例，以遵循页面底部的[Eclipse INI 配置。](http://wiki.eclipse.org/Eclipse.ini)

# asp.net-mvc - 带有 PartialView 的 HttpPostedFileBase

> ID：13300752
> 
> 赞同：0
> 
> 时间：2012-11-09T01:17:53.587
> 
> 标签：asp.net-mvc, partial-views, httppostedfilebase

我有一个包含部分视图的主视图。局部视图模型有 1 个名为“HttpPostedFileBase 文件”的属性，以及其他属性

但是，当发布主视图时，该模型中的所有其他属性都会获得正确的值，但“HttpPostedFileBase 文件”为空。我已经将名称设置为与参数相同。甚至 Request.Files 也给我 0 个文件。

我做错了什么？

PS我的主视图实际上有2个部分视图。一个 PV 与主视图具有相同的模型。第二个就是我上面提到的。该模型包含对象列表和 HttpPostedFileBase 文件。像这样的代码：

```
public class MyPartialViewModel
{
    public List<MyObject> objInfos { get; set; }

    public ICollection<HttpPostedFileBase> file { get; set; }
} 
```

在 PV 中，我循环使用 @Html.EditFor(model=>model.objInfos[i]) 将其绑定到模板。

所以在主视图发布方法中，我可以获得“objInfos”列表和所有对象的值正确。但对于“文件”来说只是 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:25:36.653

尝试添加`enctype = "multipart/form-data"`为助手`htmlAttributes`中的其中之一。`@Html.BeginForm()`

**编辑：不进行视觉完整回发：**

[使用 iFrame 在 MVC3 中上传 AJAX 文件](http://www.dustinhorne.com/post/2011/11/16/AJAX-File-Uploads-with-jQuery-and-MVC-3.aspx)

在这个正确的时刻，我正在使用这种方法，在我们编写时实际实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:55:11.653

我刚刚遇到了同样的问题，并通过在 ActionResult 中放置一个额外的参数来获取文件上传参数来解决它。

```
 [Authorize]
    [HttpPost]
    public ActionResult MyActionResult(MyViewModel viewModel, HttpPostedFileBase myFileToUpload)
    {
        myViewModel.PartialViewModel.MyFileToUpload = myFileToUpload;
            //manually bind MyFileToUpload;
            //for some reason, because it's in the Partial View and it's of type HttpPostedFileBase, it won't post.

        return View(viewModel);
    } 
```

仅出于上下文：

我的 PartialViewModel 包含代码：

```
 public HttpPostedFileBase MyFileToUpload{ get; set; } 
```

和部分查看代码：

```
 <div class="editor-item">
        <div class="editor-label">
            @Html.LabelFor(model => model.MyFileToUpload)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.MyFileToUpload)
        </div>
    </div> 
```

最后，我有一个 EditorTemplate Views/Shared/EditorTemplates/HttpPostedFileBase.cshtml：

```
@model HttpPostedFileBase
<input type="file" name="@ViewData.ModelMetadata.PropertyName" /> 
```

这是一种解决方法，而不是解决方案，但确实使您能够在将 HttpPostedFileBase 留在 PartialViewModel 中的同时上传文件。

# java - 类设计：类内部或外部线程

> ID：13300761
> 
> 赞同：2
> 
> 时间：2012-11-09T01:18:52.463
> 
> 标签：java, android

我有一个类`Session`可以跟踪一堆计数器并保存到数据库中。我的问题主要是一个类设计问题，而不是特定于 Android，但我正在使用 Android，这只是因为我想确保写入数据库不会发生在*主*线程上。

我正在考虑`persist()`将会话写入数据库的方法的两种替代方法（这可能会很慢，而且我并不太担心它是否/何时成功）：

**内部并发和执行**

```
public class Session()
{
   //.. getters and setters...

   void persist()
   {
       Runnable r = new Runnable(){
          // Implement logic in run() with slow 
          // db operations
       };
       ExecutorService executor = getExistingExecutor();
       executor.submit(r);
   }
 } 
```

**并发和外部执行**

```
public class Session()
{
   //.. getters and setters...

   void persist()
   {
     // Implement logic in run() with slow 
     // db operations
   }
 } 
```

从对象设计的角度来看，我基本上想知道，整齐地包装可能运行缓慢的代码以使其易于使用的最佳方法是什么？如果存在分工问题，我也很感兴趣（`Session`会话的存储值，但也知道如何保持自身......我无法确定这是好的 OO 还是过于复杂）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:27:56.693

通常，将对象的持久性排除在对象的实现之外是一种很好的设计。您可能（将！）想要在不更改实现的情况下更改持久性的工作方式。

因此，您应该有一个单独的对象来单独负责存储和检索数据。

# java - 来自 Play 商店的 AdnEngine 错误：java.lang.NoSuchMethodError

> ID：13300762
> 
> 赞同：0
> 
> 时间：2012-11-09T01:18:53.913
> 
> 标签：java, android, andengine

我从 Android PLAY 错误中得到以下信息。游戏在模拟器上进行了测试，我自己的真机（注2）在制作时从未出现此错误。

我做错了什么？

```
Exception class java.lang.NoSuchMethodError
Source method BaseActivity.onSetContentView() 
```

和堆栈

```
java.lang.NoSuchMethodError: com.google.ads.AdView.setRotation
at net.mindzone.trafficchaos.BaseActivity.onSetContentView(BaseActivity.java:81)
at org.andengine.ui.activity.BaseGameActivity.onCreate(BaseGameActivity.java:85)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

编辑对于其他想要答案的人来说，这是 jcw 所说的一半。这确实是一种在较低 API 上不存在的方法。（在这种情况下，视图中的 setRotation 仅在 api 13 及更高版本中可用。）虽然因为我在 onSetContentView() 中调用它，但它在谷歌播放中给出了错误。

解决方案是：将方法放在 TRY ...CATCH... 块中，并恢复到视图的 oldskool 转换，以防万一失败。现在谷歌播放不再给我任何用户错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:45:12.300

我最近也遇到了这个错误。当您的应用程序包含不适用于所有设备的方法时（由于 api 级别），就会发生这种情况。您将不得不删除这些方法并用折旧的方法替换它们。

有一个更好的方法可以做到这一点，但我无法让它工作，这是页面的链接，只需修改答案以适合您的方法 - [getSize() 给我错误](https://stackoverflow.com/questions/9654016/getsize-giving-me-errors)

或者，因为我不确定您的问题是什么，您可以尝试从他们的网站下载新版本的 ad mob SDK。

# bash - 当bash无法断言作业控制时，如何告诉bash不要发出警告“无法设置终端进程组”和“此shell中没有作业控制”？

> ID：13300764
> 
> 赞同：5
> 
> 时间：2012-11-09T01:19:24.070
> 
> 标签：bash, command-line, .bash-profile, job-control

要创建一个新的交互式 bash shell，我调用`bash -i`. 由于我的环境问题，bash 无法断言作业控制（我在 GNU emacs 中使用 cygwin bash）并发出警告（“无法设置终端进程组”和“此 shell 中没有作业控制”）。- 我必须在我的环境中忍受禁用的工作控制，但我想摆脱警告：

我如何告诉 bash 不要断言作业控制并且不要发出这些警告？我显然仍然希望 shell 作为一个交互式的。

注意：我已经尝试`set -m`过`.bashrc`，但是 bash 仍然会在启动时写出警告 - 该`~/.bashrc`文件可能会在 shell 尝试断言作业控制*后执行。*是否有一个命令行选项可以工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:46:46.120

`man bash`关于`set`选项，*选项也可以指定为调用 shell 的参数。*请注意，您`+m`不需要`-m`. 诚然，手册对此并不十分清楚。

但是查看`bash`源代码（4.2 版），显然它忽略了这个标志的状态。我会说这是一个错误。

应用以下小补丁可以在启动时`bash`尊重标志。`m`不幸的是，这意味着您将不得不重新编译`bash`.

```
--- jobs.c.orig 2011-01-07 16:59:29.000000000 +0100
+++ jobs.c      2012-11-09 03:34:49.682918771 +0100
@@ -3611,7 +3611,7 @@
     }

   /* We can only have job control if we are interactive. */
-  if (interactive == 0)
+  if (interactive == 0 || !job_control)
     {
       job_control = 0;
       original_pgrp = NO_PID; 
```

在我的 linux 机器上测试，默认情况下可以使用作业控制，因此您在 mingw 上看到的错误消息不会在此处打印。不过，您仍然可以看到 bash 尊重`+m`现在。

```
$ ./bash --noprofile --norc
$ echo $-
himBH
$ fg
bash: fg: current: no such job
$ exit
$ ./bash --noprofile --norc +m
$ echo $-
hiBH
$ fg
bash: fg: no job control 
```

# python - 要转换为 nan 值的数组的零值

> ID：13300773
> 
> 赞同：4
> 
> 时间：2012-11-09T01:20:19.560
> 
> 标签：python, arrays, numpy, nan

我有一个 1200*1200 的数组。它的一些值为零。我想将零值转换为 numpy.nan 值。这是我的解决方案：

```
import numpy
for i in range(1200):
    for j in range(1200):
        if data_a[i, j] == 0:
            data_a[i, j] = numpy.nan 
```

但我收到了这个错误：`data_a[i,j] = numpy.nan ValueError: cannot convert float NaN to integer` 我不明白这个错误。任何替代方案或解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T01:30:08.310

该错误消息是因为您的数组用于存储整数：

```
>>> import numpy as np
>>> a = np.arange(3)
>>> a
array([0, 1, 2])
>>> a.dtype
dtype('int32')
>>> a[0] = np.nan
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: cannot convert float NaN to integer 
```

但是，如果您的数组用于浮点数，它将起作用。您也可以在没有循环的情况下执行此操作：

```
>>> a = np.arange(3.0)
>>> a
array([ 0.,  1.,  2.])
>>> a[a==0]
array([ 0.])
>>> a[a==0] = np.nan
>>> a
array([ nan,   1.,   2.]) 
```

如果要将数组转换为浮点数组，可以使用`astype`：

```
>>> a = a.astype(float)
>>> a
array([ 0.,  1.,  2.])
>>> a.dtype
dtype('float64') 
```

# objective-c - objective-c 字符串：为什么不需要 setter/getter？

> ID：13300787
> 
> 赞同：1
> 
> 时间：2012-11-09T01:22:04.760
> 
> 标签：objective-c

我才刚刚开始，我对此有点挂断。我可能有一个基本的误解，你可以帮助我。

为什么您可以直接将字符串值分配给 NSString* （而且，我敢肯定，还有许多其他对象类型）？例如，

> NSString* s = @"你好，世界！";

而我相信下面的代码会分配给 s2 s1 的*指针*值（因此只是顺便为 s2 提供了一个字符串值）？

> NSString* s1 = @"你好，世界！";
> 
> NSString* s2 = s1;

对于许多对象，您是否不必指定要为其分配值的属性（即实例变量）（即，使用 setter 方法）？对象本身不应该只接受指针值的赋值吗？或者诸如 NSString 之类的类是否会自动重新解释代码（例如上面的第一个示例），以使用隐含的 setter 将指示的字符串分配给隐含的实例变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:37:49.200

> 为什么您可以直接将字符串值分配给 NSString* （而且，我敢肯定，还有许多其他对象类型）？

虽然它可能看起来像，但您并没有将字符串的值“直接”分配给实例变量。您实际上是将字符串值的地址分配给您的实例变量。现在，真正的问题是当你有一个类型的表达式时，幕后发生了什么：

```
NSString * str = @"Hello World"; 
```

此表达式表示*字符串文字*的创建。在 C（以及作为 C 的严格超集的 Objective-C）中，字符串文字得到特殊处理。具体来说，会发生以下情况：

1.  编译代码后，将在程序的数据部分中创建字符串“Hello World”。
2.  当程序执行时，将在堆上分配一个实例变量“str”。
3.  “str”实例变量将指向存储实际字符串“Hello World”的静态内存位置。

第一个和第二个示例之间的主要区别在于，在第二个示例中，字符串变量的内存是在运行时在堆上动态分配的。请注意，在这两种情况下，变量“str”只是一个动态分配的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:32:17.477

或多或少是后者。类似的字符串文字`@"Hello World!"`在 Objective-C 中被视为一种特殊情况：使用该语法声明的字符串在编译时被静态分配、实例化和缓存以提高性能。`[NSString stringWithString:@"Hello World!"]`从程序员的角度来看，它与调用或使用 C 字符串的构造函数没有什么不同——您应该将其视为语法糖。

FWIW，Objective-C 最近开始扩展`@`前缀以允许声明字典和数组字面量，例如：`@{ @"key" : @"value" }`或`@[ obj1, obj2, obj3 ]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:31:54.143

这是编译器的功能，而不是语言结构。在这种情况下，编译器会识别字符串文字并插入一些代码以产生预期的结果。

@"" 本质上是 NSString 的 +stringWithUTF8String 方法的简写。

从这里获取： [@符号在objective-c中代表什么？](https://stackoverflow.com/questions/25749/what-does-the-symbol-represent-in-objective-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T01:33:10.367

```
NSString *s1 = @"Hello, world!"; 
```

本质上等同于

```
NSString *s1 = [NSString stringWithUTF8String:"Hello, world!"]; 
```

前者静态分配一个新的 NSString 对象（而不是像后者那样在运行时在堆上）。

重要的是要注意这些只是指针。当你这样做时`NSString *s2 = s1`，两者都`s1`引用`s2`同一个对象。

# windows - 将主机添加到来自不同子网的 Cain 和 Abel 嗅探器？

> ID：13300792
> 
> 赞同：1
> 
> 时间：2012-11-09T01:22:39.107
> 
> 标签：windows, subnet, man-in-the-middle

我正在尝试使用 Cain & Abel 记录我的域控制器之间的网络流量，该域控制器是 Windows 2008 服务器（机器 A）和 Windows XP 计算机（机器 B）。它们都作为虚拟机安装在我最近购买的 ESXi 服务器上，我没有将它们放在 NAT 上，而是配置了 ESXi 以使它们都桥接到我的网络。

机器 B 位于名为“test.local”的域中，IP 为：

```
 192.14.0.195 
```

机器 A 托管域“test.local”，其 IP 为：

```
 192.14.0.196 
```

我的目标是检测机器 B 发送到机器 A 的哈希值。

我能够使用嗅探器 + ARP Poising 技术记录流量。但是，我喜欢学习如何逆向工程和破解事物，然后尝试编写一些东西来“修补”或“防止”它，因为我的一个朋友早些时候告诉我，他曾使用 Cain 和 Abel 来记录相同的东西东西，但是当域控制器的 IP 类似于：

```
 192.15.0.198 
```

机器 B 的 IP 为：

```
 192.14.0.195 
```

如您所见，有不同的子网。知道这是可能的，我将如何对我的子网上的主机进行攻击，但域控制器不是？我知道它是可访问的，因为运行“nslookup”将其设置为默认服务器，并且跟踪路由和 ping 成功。我也可以对它进行 RDP。

任何帮助表示赞赏，谢谢！

# php - 在一个 mysql_query 下拉列表中发布 2 个值

> ID：13300793
> 
> 赞同：0
> 
> 时间：2012-11-09T01:22:50.540
> 
> 标签：php, mysql, database

数据库地图：

```
Carriers "table1": carriername, carrierid, ect... Post data
carrierinfo "table2": carriername, id, contact, ect... carrier list 
```

我正在使用`mysql_query`from`table2`作为我的`carriername`下拉菜单。使用它，我可以将运营商名称发布到`table1`. 我正在尝试使用相同的下拉菜单发布相关`id`的 selected `carriername`。所以简而言之，我需要一个只显示运营商名称但同时 从 table2查询`carriername`&的下拉菜单。`id`发布表格后，我需要将`carriername`&发布`carrierid`到 table1。下面是我正在使用的下拉菜单。请让我知道如何连接这些点并添加所需的内容。如果它是可能的。

```
 <?php

if (isset($_POST["submit"]) && $_POST["submit"] == "Submit")
{
    for ($count = 1; $count <= 9; $count++)
    {
        $fields[$count] = "";
        if (isset($_POST["field" . $count . ""]))
        {
            $fields[$count] = trim($_POST["field" . $count . ""]);
            //echo $fields[$count] . "<br />";
        }
    }

    $con = mysql_connect("", "", "");
    mysql_select_db("", $con);

    $carrierid = mysql_real_escape_string($_POST['carrierid']);
    $fromzip = mysql_real_escape_string($_POST['fromzip']);
    $tozip = mysql_real_escape_string($_POST['tozip']);
    $typeofequipment = mysql_real_escape_string($_POST['typeofequipment']);
    $weight = mysql_real_escape_string($_POST['weight']);
    $length = mysql_real_escape_string($_POST['length']);
    $paymentamount = mysql_real_escape_string($_POST['paymentamount']);
    $contactperson = mysql_real_escape_string($_POST['contactperson']);
    $loadtype = mysql_real_escape_string($_POST['loadtype']);
    $date = mysql_real_escape_string($_POST['date']);

    $insert = "INSERT INTO Carriers (`carriername` ,`carrierid`, `fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype` ,`date`) 
    SELECT carriername ,'$carrierid' ,'$fromzip' ,'$tozip' ,'$typeofequipment' ,'$weight' ,'$length' ,'$paymentamount' ,'$contactperson' ,'$loadtype', NOW()) FROM carrierinfo WHERE id = '$carrierid'";

    mysql_query($insert) or die(mysql_error());

    $select = "SELECT `carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype` FROM `Carriers` ORDER BY `date` DESC;";
    $result = mysql_query($select) or die(mysql_error());

}
?>
<style ="text-align: center; margin-left: auto; margin-right: auto;"></style>
</head>
<body>
<input type="button" onclick="window.location.href='search.php';" value="Search Board" /><div
 style="border: 2px solid rgb(0, 0, 0); margin: 16px 20px 20px; width: 400px; background-color: rgb(236, 233, 216); text-align: center; float: left;">
<form action="" method="post";">
  <div
  style="margin: 8px auto auto; width: 300px; font-family: arial; text-align: left;"><br>
  <table style="font-weight: normal; width: 100%; font-size: 12px;"
 border="1" bordercolor="#929087" cellpadding="6" cellspacing="0">
   <table
 style="font-weight: normal; width: 100%; text-align: right; font-size: 12px;"
 border="1" bordercolor="#929087" cellpadding="6" cellspacing="0">
    <tbody>
    <tr>
    <td style="width: 10%;">Carrier:</td><td>
 <?php  

$con = mysql_connect("", "", "");
    mysql_select_db("", $con);

$query=("SELECT * FROM carrierinfo"); 

$result=mysql_query($query) or die ("Unable to Make the Query:" . mysql_error() ); 
echo "<select name='carrierid'>";
while($row=mysql_fetch_array($result)){  
echo "<OPTION VALUE='".$row['id']."'>".$row['carriername']."</OPTION>";
}
echo "</select>"; 

?>
              </td>
        </tr>
        <tr>
              <td style="width: 10%;">Load Type:</td><td>
              <select name="loadtype">
              <option></option>
              <option value="TL">Truck Load</option>
              <option value="Partial">Partial</option>
              </select>
              </td>
        </tr>
        <tr>
              <td style="width: 35%;">Pick Zip:</td><td> <input id="fromzip" name="fromzip" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
              <td style="width: 35%;">Drop Zip:</td><td> <input id="tozip" name="tozip" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
              <td style="width: 35%;">Weight:</td><td> <input id="weight" name="weight" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
              <td style="width: 35%;">Length:</td><td> <input id="length" name="length" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
        <td style="width: 10%;">Equip:</td><td>
              <select name="typeofequipment">
              <option></option>
              <option value="AUTO">Auto Carrier</option>
              <option value="DD">Double Drop</option>
              <option value="F">Flatbed</option>
              <option value="LB">Lowboy</option>
              <option value="Rail">Rail</option>
              <option value="Ref">Reefer</option>
              <option value="RGN">Removable Goose Neck</option>
              <option value="SD">Step Deck</option>
              <option value="TANK">Tanker (Food, liquid, etc.)</option>
              <option value="V">Van</option>
              </select>
              </td>
              </tr>
              <tr>
              <td style="width: 35%;">Contact:</td><td> <input id="contactperson" name="contactperson" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
              <td style="width: 35%;">Rate:</td><td> <input id="paymentamount" name="paymentamount" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
          </tbody>
  </table>
  <p style="text-align: center;"><input name="submit" value="Submit"
 class="submit" type="submit"><input type="button" onclick="window.location.href='newcarrier.php';" value="Add Carrier" /></p>
  </div>
</form>
</div>
<p style="margin-bottom: -20px;">&nbsp;</p>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:51:55.417

使用连接：

```
SELECT t1.carrierid, t2.carriername, t2.id
FROM table1 t1 JOIN table2 t2 USING (carriername) 
```

连接表应该是您学习 SQL 时首先要学习的内容之一。

更新：

没关系，您填充下拉列表的原始查询是正确的。填充选择时，您应该执行以下操作：

```
echo "<select name='carrierid'>";
while($row=mysql_fetch_array($result)){  
  echo "<OPTION VALUE='".$row['id']."'>".$row['carriername']."</OPTION>";
}
echo "</select>"; 
```

发布数据时，去掉这一行：

```
$carriername = mysql_real_escape_string($_POST['carriername']); 
```

并将插入查询更改为：

```
$insert = "INSERT INTO Loads (`carriername` ,`carrierid`, `fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype` ,`date`) 
  SELECT carriername ,'$carrierid' ,'$fromzip' ,'$tozip' ,'$typeofequipment' ,'$weight' ,'$length' ,'$paymentamount' ,'$contactperson' ,'$loadtype', NOW())
  FROM Carriers
  WHERE id = '$carrierid'"; 
```

对表单的更改使其显示运营商名称，但在发布数据中返回 ID。然后新的 INSERT 查询使用该 ID 从表 2 中获取运营商名称，并在插入表 1 时将其与所有其他发布数据结合起来。

# visual-studio - 使用 Visual Studio 安装 nSight Studio

> ID：13300794
> 
> 赞同：2
> 
> 时间：2012-11-09T01:23:26.013
> 
> 标签：visual-studio

我想开始编程CUDA。我已经安装了 Visual Studio 2010 Express。我还安装了 nVidia nSight Visual Studio。而且我有所有常见的先决条件（Net FrameWork、Java、...）

但我在 Visual Studio 选项或项目属性中看不到任何 CUDA 选项。我应该怎么办？我还需要安装 Cuda 工具包吗？它作为一个单独的包提供，但 nSight 已经安装了一个叫做 cuda 工具包的东西。

问候

我正在使用 Windows 7 64 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:26:36.453

由于 Visual Studio Express 版本的技术限制，Nsight for Visual Studio 仅支持 Visual Studio 2008 Professional 及以上版本和 Visual Studio 2010 Professional 及以上版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:06:11.977

您需要安装 Cuda 工具包和 Nsight 进行调试。就 vs 2012 而言，您是否遵循本指南？ [http://code.msdn.microsoft.com/windowsdesktop/CUDA-50-and-Visual-Studio-20e71aa1#content](http://code.msdn.microsoft.com/windowsdesktop/CUDA-50-and-Visual-Studio-20e71aa1#content)

虽然我使它可以用于构建，但我无法使用 nsight 进行调试，因为它与 Visual Studio 2012 不兼容。我已经尝试过 nsight 3 rc2 直到现在，我还没有找到任何方法让它工作，我想我必须重新安装 VS 2010...

“Nsight Visual Studio 2012 支持将在计划于 Q2'13 的下一个版本中提供。不支持 VS2012 的一个重要原因是 CUDA 5.0 工具包不支持新的工具链。很抱歉给您带来不便。我应该提一下Nsight 3.0 的下一个候选版本将支持 VS2012 中的 C++ AMP 调试（但不支持其他图形或 CUDA 功能）”

# regex - 如何使用 htaccess 检查文件的缓存版本是否存在？

> ID：13300796
> 
> 赞同：0
> 
> 时间：2012-11-09T01:23:47.923
> 
> 标签：regex, .htaccess, rewrite

我正在使用以下代码重写对动态生成的 PHP 页面的压缩、缓存静态版本的页面请求。我有两个问题：

```
RewriteCond %{REQUEST_URI} !^/?cache/ [NC]
RewriteRule ^/?(.)(.*?)/?$ /cache/$1/$1$2.html.gz [L] 
```

1.  首先，我只希望这个规则在缓存文件确实存在的情况下生效。
2.  其次，我需要确保浏览器被指示这是一个应该被解压缩、读取和显示的 gzip 文件，而不是像当前正在发生的文件那样应该下载的文件。

页面的url结构如下：

```
http://mydomain.com/newest-coupon-codes/ 
```

它需要在不将地址栏更改为文本的情况下向用户显示以下页面：

```
http://mydomain.com/cache/n/newest-coupon-codes.html.gz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:43:21.010

### 解决方案#1：

```
<FilesMatch "\.html\.gz$">
  ForceType text/html
  Header set Content-Encoding: gzip
</FilesMatch>

RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} !\?
RewriteCond %{REQUEST_URI} !^/?cache/ [NC]
RewriteCond %{REQUEST_URI} ^/?(.)(.*?)/?$
RewriteCond cache/%1/%1%2.html.gz -f
RewriteRule ^/?(.)(.*?)/?$ /cache/$1/$1$2.html.gz [L] 
```

### 解决方案#2：

```
<FilesMatch "\.html\.gz$">
  ForceType text/html
  Header set Content-Encoding: gzip
</FilesMatch>

RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} !\?
RewriteCond %{REQUEST_URI} !^/?cache/ [NC]
RewriteCond %{REQUEST_URI} ^/?(.)(.*?)/?$ [E=CACHE:"cache/$1/$1$2.html.gz",NE]
RewriteCond %{ENV:CACHE} -f
RewriteRule ^/?(.)(.*?)/?$ /cache/$1/$1$2.html.gz [E=!CACHE,L] 
```

# iphone - 将图像添加到 AVMutableCompositionTrack

> ID：13300800
> 
> 赞同：2
> 
> 时间：2012-11-09T01:24:12.940
> 
> 标签：iphone, objective-c, ios, avfoundation

我可以[`AVMutableCompositionTrack`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVMutableCompositionTrack_Class/Reference/Reference.html)通过简单地调用`insertTimeRange:ofTrack:atTime:error:`并给它一个`AVAssetTrack`.

但是，我有一些视频轨道*和*一些静止图像（jpg、png 等），我想将它们作为静止帧插入（每个图像的持续时间为几秒钟）。我完全不知道如何插入静止图像。

有没有办法将静止图像转换成一个`AVAssetTrack`并将它们插入一个`AVMutableCompositionTrack`？我是否将被迫使用较低级别/更麻烦（尽管更强大）`AVAssetReader`/ `AVAssetWriter`？如果有某种方法可以将图像添加到`AVMutableCompositionTrack`（并指定其持续时间），我真的很想知道如何。

# java - 从二维数组中获取值

> ID：13300801
> 
> 赞同：0
> 
> 时间：2012-11-09T01:24:14.397
> 
> 标签：java, arrays, tiles

这是我的数组：

```
private static int[][] map = new int[WIDTH][HEIGHT]; 
```

我使用这个类生成一个瓦片地图：

```
public class Map {

public static final int CLEAR = 0;
public static final int STONE = 1;
public static final int GRASS = 2;
public static final int DIRT = 3;

public static final int WIDTH = 32;
public static final int HEIGHT = 24;

public static final int TILE_SIZE = 25;

private static int[][] map = new int[WIDTH][HEIGHT];

Image air, grass, stone, dirt;

Random rand = new Random();

public Map() {

    /* default map */

    /*for(int y = 0; y < WIDTH; y++){
        map[y][y] = (rand.nextInt(2));
        System.out.println(map[y][y]);
    }*/

    for (int y = 18; y < HEIGHT; y++) {
        for (int x = 0; x < WIDTH; x++) {
            map[x][y] = STONE;
        }

    }

    for (int y = 18; y < 19; y++) {
        for (int x = 0; x < WIDTH; x++) {
            map[x][y] = GRASS;
        }

    }

    for (int y = 19; y < 20; y++) {
        for (int x = 0; x < WIDTH; x++) {
            map[x][y] = DIRT;
        }

    }

    try {
        init(null, null);
    } catch (SlickException e) {
        e.printStackTrace();
    }
    render(null, null, null);

}

public void init(GameContainer gc, StateBasedGame sbg) throws SlickException {
    air = new Image("res/air.png");
    grass = new Image("res/grass.png");
    stone = new Image("res/stone.png");
    dirt = new Image("res/dirt.png");
}

public void render(GameContainer gc, StateBasedGame sbg, Graphics g) {
    for (int x = 0; x < WIDTH; x++) {
        for (int y = 0; y < HEIGHT; y++) {
            switch (map[x][y]) {
            case CLEAR:
                air.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case STONE:
                stone.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case GRASS:
                grass.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case DIRT:
                dirt.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            }
        }
    }
}

public boolean blocked(float x, float y) {
    return map[(int) x][(int) y] == STONE;
}

public static Rectangle blockBounds(int x, int y) {
    return(new Rectangle(map[0][x], map[y][0], 25, 25));
}} 
```

我想用这个代码为每个图块分配一个矩形（我知道它错了）：

```
public static Rectangle blockBounds(int x, int y) {
    return(new Rectangle(map[0][x], map[y][0], 25, 25));
} 
```

如何获取瓦片的 x 和 y 坐标并将它们放入矩形代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:32:53.713

我认为你需要这样的东西：

```
new Rectangle(x * TILE_SIZE, Y * TILE_SIZE, TILE_SIZE, TILE_SIZE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:12:27.033

我想你正在使用，

`private static int[][] map = new int[WIDTH][HEIGHT];`

代表您的地图。所以地图的每个`{x,y} 代表地图上的一个点。Rectangle类的构造函数，Rectangle(int x, int y, int width, int height) 用于构造一个新的Rectangle，其左上角指定为(x,y)，其宽高由参数指定同名。所以我认为这很容易，

```
new Rectangle(x, y, TILE_SIZE, TILE_SIZE) 
```

此外，要使用此构造函数，您必须从 {0,0} 开始导航您的地图

# ios - Storyboard Modal Segue 与委托

> ID：13300802
> 
> 赞同：4
> 
> 时间：2012-11-09T01:24:16.410
> 
> 标签：ios, xcode, delegates, storyboard, segue

我使用 iOS6 unwind segues 制作了一个应用程序，但没有意识到它们不在 iOS5 中，因此我将其拆开以支持 iOS5。到目前为止，我已经确定我需要使用委托来从模态 segue 视图中将信息返回到我的根视图，并且有几个很好的例子可以遵循，我很自信我明白了。

目前，模态转场是通过情节提要生成的，而不是通过代码生成的。

为了将它的委托设置为我的根视图，我需要通过代码生成它还是通过情节提要有办法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T03:12:52.677

在执行 segue 之前，程序将调用`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`sourceViewController（调用 segue 的视图控制器）中的方法。在这个方法中，你可以给 destinationViewController 一个 self 的引用：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [segue.destinationViewController setDelegate:self];
} 
```

当然你需要destinationViewController中的属性：

```
@property (weak, nonatomic) id<yourProtocol> delegate; 
```

希望能帮助到你。

# php - 在不打开 URL 的情况下传递 get 变量

> ID：13300803
> 
> 赞同：0
> 
> 时间：2012-11-09T01:24:27.483
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中读取网页](https://stackoverflow.com/questions/2259892/how-to-read-a-web-page-in-php)

我确信有一些简单的方法可以做到这一点。我需要将 get 变量传递给我的购物车软件以记录转换，但不重定向用户，我只希望服务器将 GET 变量发送到 URL。我宁愿不要在 php.ini 中打开 allow_url_fopen 。

有人知道最好的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:33:04.387

服务器端，您最好的选择可能是使用[cURL](http://php.net/curl) - 有关详细信息，请参阅文档，使用起来并不难。

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://www.example.com/script.php");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($ch);

curl_close($ch);

if ($response === false) {
    // Failed to connect or some error occurred
} else {
    // Everything was fine, check the response here if you need to
} 
```

# oracle - 无法使用 Oracle 检索 Hibernate 中最后插入的行的 id

> ID：13300808
> 
> 赞同：0
> 
> 时间：2012-11-09T01:24:39.077
> 
> 标签：oracle, spring, hibernate, jsp, oracle10g

我将 Hibernate Tools 3.2.1.GA 与 Spring 版本 3.0.2 一起使用。我正在尝试将最后插入的行的 id 检索到 Oracle(10g) 数据库中，如下所示。

```
Session session=NewHibernateUtil.getSessionFactory().getCurrentSession();
session.beginTransaction();

Country c=new Country();

c.setCountryId(new BigDecimal(0));
c.setCountryName(request.getParameter("txtCountryName"));
c.setCountryCode(request.getParameter("txtCountryCode"));
Zone z=(Zone) session.get(Zone.class, new BigDecimal(request.getParameter("zoneId")));
c.setZone(z);
session.save(c);

session.flush();    
System.out.println(c.getCountryId());    
session.getTransaction().commit(); 
```

在数据被序列化到数据库之后并且在事务提交之前，该语句`System.out.println(c.getCountryId());`预计会返回当前插入的 id，但它不会因为前面代码片段中的以下行（因为它可能在我看来）。

```
c.setCountryId(new BigDecimal(0)); 
```

我不确定为什么在我的情况下需要此语句（插入时）。我在任何地方都没有看到这个声明。省略此行会导致引发以下异常。

> org.hibernate.id.IdentifierGenerationException：必须在调用 save() 之前手动分配此类的 id：model.Country

`c.setCountryId(new BigDecimal(0));`在插入过程中真的需要这个语句吗？它是 Oracle 数据库中序列生成的主键，由于该行，此语句`System.out.println(c.getCountryId());`始终返回`0`实际预期返回当前会话中当前插入的 id。

那么，在这种情况下如何获取最后生成的 id 呢？我是不是走错了路，有不同的方法吗？

* * *

**编辑：**

```
CREATE TABLE  "COUNTRY" 
(   
    "COUNTRY_ID" NUMBER(35,0) NOT NULL ENABLE, 
    "COUNTRY_CODE" VARCHAR2(10), 
    "COUNTRY_NAME" VARCHAR2(50), 
    "ZONE_ID" NUMBER(35,0), 

    CONSTRAINT "COUNTRY_PK" PRIMARY KEY ("COUNTRY_ID") ENABLE, 
    CONSTRAINT "COUNTRY_FK" FOREIGN KEY ("ZONE_ID")
                            REFERENCES  "ZONE" ("ZONE_ID") ON DELETE CASCADE ENABLE
)
/

CREATE OR REPLACE TRIGGER  "BI_COUNTRY" 
before insert on "COUNTRY"               
for each row  

begin   
    select "COUNTRY_SEQ".nextval into :NEW.COUNTRY_ID from dual; 
end; 

/
ALTER TRIGGER  "BI_COUNTRY" ENABLE
/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:47:53.540

异常“必须在调用 save() 之前手动分配此类的 ids”意味着您正在使用“已分配”的标识符生成策略。

> **assign 让应用程序在调用 save() 之前为对象分配** 一个标识符。如果未指定任何元素，这是默认策略。

如果你没有定义任何策略，hibernate 默认为'assigned'。'assigned' 策略意味着 hibernate 期望应用程序提供它自己的 id。

如果要在 Oracle 中使用序列 id 生成器，可以使用以下配置进行 -

如果您使用的是 xml -

```
 <id name="countryId" type="java.lang.Integer">  
        <column name="Country_Id" />  
        <generator class="sequence">  
            <param name="sequence">Country_Id_Seq</param>               
        </generator>  
    </id> 
```

如果您使用注释 -

```
 @Id
   @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="Country_Id_Seq")
   @SequenceGenerator(name="Country_Id_Seq", sequenceName="Country_Id_Seq"  )
   private Integer sequence; 
```

你的代码应该是这样的 -

```
Country c=new Country();

c.setCountryName(request.getParameter("txtCountryName"));
c.setCountryCode(request.getParameter("txtCountryCode"));
Zone z=(Zone) session.get(Zone.class, new BigDecimal(request.getParameter("zoneId")));
c.setZone(z);
session.save(c);

session.flush();    
System.out.println(c.getCountryId()); 
```

当 'session.save(c)' 执行时，hibernate 对 Oracle 进行以下 sql 调用，检索 id 并将其设置在 Country 对象中。

```
select Country_Id_Seq.nextVal from dual; 
```

**触发器问题**

由于您在插入行时使用触发器来增加 id，这将导致休眠序列出现问题。Hibernate 使用序列来生成 id，而数据库使用触发器来增加 id。这导致 id 增加了两次。

您可以通过三个选项来解决此问题。

1.  删除触发器，因为它不是必需的。

2.  如果您仍然需要触发器，因为可以在应用程序外部更新表，您可以更新触发器，以便仅当未在插入语句中设置 [id 时生成 id](https://stackoverflow.com/questions/8002119/hibernate-issue-with-oracle-trigger-for-generating-id-from-a-sequence)

3.  创建一个自定义 id 生成器，该生成器使用触发器在数据保存到 db 之前设置数据中的 id。查看以下链接 - [https://forum.hibernate.org/viewtopic.php?t=973262](https://forum.hibernate.org/viewtopic.php?t=973262)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:48:41.837

如果将值放入由序列生成的 ID 列，则应将该序列与实体定义中的 ID 列相关联，以便在插入期间由 Hibernate 用 ID 值填充属性。

*使用注释：*

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "CountryIdSequence")
@SequenceGenerator(name = "CountryIdSequence", sequenceName = "COUNTRY_ID_SEQUENCE")
@Column(name = "COUNTRY_ID")
private BigDecimal countryId; 
```

*使用 hbm：*

```
<id name="countryId" type="big_decimal">
    <column name="COUNTRY_ID" />
    <generator class=""sequence">
        <param name="sequence">COUNTRY_ID_SEQUENCE</param>
    </generator>
</id> 
```

然后，它将在保存后可用。

在刷新对象之前，对数据库层实体所做的任何更改都不会反映在休眠实体层中。

```
session.save(c);
session.flush();    
// Refresh the object for columns modified in the DB by IDENTITY / SEQUENCE / Triggers.
session.refresh(c);
System.out.println(c.getCountryId()); 
```

# php - 未从 SELECT 查询中获得预期结果

> ID：13300815
> 
> 赞同：0
> 
> 时间：2012-11-09T01:25:55.783
> 
> 标签：php, mysql

我试图从一个有 16k 行的表中获取 10 个结果。

此表中有一行称为视图，每次查看艺术家时都会获得 +1。但我得到意想不到的结果只有顶级艺术家。我为速度索引了视图行。我知道我必须循环它，但我不确定如何获取所有 10 行

我没有处理循环或一次获取多于一行的问题，需要帮助使用新的 mysqli 对其进行格式化

[此处的示例返回数组的打印输出](http://www.thelyricsfinder.com/)

```
// Get Top Viewed Artist
$TopViewedArtist = mysql_query("SELECT * FROM  `artists` ORDER BY  `artists`.`views` DESC LIMIT 10");
$TopViewedArtistInfo = mysql_fetch_assoc($TopViewedArtist);
$TopViewedArtist_TotalRows = mysql_num_rows($TopViewedArtist);
print_r($TopViewedArtistInfo); // the data returned from the query 
```

这是以可读格式显示艺术家姓名结果的解决方案。

```
 $TopViewedArtists = mysql_query('SELECT * FROM `artists` ORDER BY `artists`.`views` DESC LIMIT 10');
    while (($TopArtist = mysql_fetch_assoc($TopViewedArtists)) !== FALSE) {
    //print_r($TopArtist);
    echo $TopArtist['artist']; echo "<br>";
    } 
```

此代码可以为其他人更改。但需要更新到mysqli

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:40:36.897

`mysql_query`返回一个`result`资源对象。把它想象成一个数组。读取该数组内容的唯一方法是遍历它。与数组`mysql_fetch_assoc`相同`each`：它返回下一行并递增内部指针。我认为这是你想要做的：

```
<?php
// Get Top Viewed Artist
$TopViewedArtists = mysql_query('SELECT * FROM `artists` ORDER BY `artists`.`views` DESC LIMIT 10');
while (($artist = mysql_fetch_assoc($TopViewedArtists)) !== FALSE) {
  print_r($artist);
}
?> 
```

还要记住，它`mysql_fetch_assoc`返回一个包含多个值的数组。该数组应该包含您看到的所有内容；`$artist['artist']`使用（输出）访问值`Gwen Stefani`。

May I suggest that you look into mysqli or PDO instead of the basic mysql functions? The only reason to use `mysql_` functions is if you're stuck with PHP 4 (no longer supported so nobody should still be using it) or old applications. This looks like neither, and as it also seems you have no existing experience with the interface you really ought to look into the better options.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:41:00.293

Basically, you want something like this:

```
$q=mysql_query("SELECT * FROM  `artists` ORDER BY  `artists`.`views` DESC LIMIT 10");
while($r=mysql_fetch_array($q)){//this will loop 10 times presuming there are at least 10 entries in your table
  //use $r here, it represents a single row
  print_r($r);
} 
```

As other people have said, you should use mysqli or pdo and not the `mysql_` functions

# ruby-on-rails - Rails：制作小部件

> ID：13300817
> 
> 赞同：0
> 
> 时间：2012-11-09T01:25:56.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想为我的 Rails 应用程序创建一个类似小部件的实体。例如，我希望能够呈现标记为特色的产品列表并让它在任何视图文件中工作。

我的第一个想法是尝试使用部分来做到这一点。这是最好的方法吗？我能否实现拥有可以在任何地方注入的小部件的总体目标？实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:30:25.823

跨多个视图文件共享的标记应放置在共享部分中。

在这种情况下，您的部分将取决于是否有可用的产品集合。您将需要在与包含小部件的页面相对应的每个控制器操作中查询此集合。这对我来说听起来是个不错的方法。

# javascript - 从 Foursquare api 解析 Json 对象

> ID：13300827
> 
> 赞同：-1
> 
> 时间：2012-11-09T01:28:24.420
> 
> 标签：javascript, android, json, foursquare

您好我正在尝试从foursquare api解析json的输出，但我不断收到错误这是我的代码

```
public FsqPlace getPlaceDetails(String reference) throws Exception{
    FsqPlace fsqplace= new FsqPlace();

    try {
        HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
        url = (API_URL+ "venues/"+reference+"?client_id="+CLIENT_ID+"&client_secret="+CLIENT_SECRET); 
        Log.d(Tag, url);

        HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl(url));
        String response     = streamToString(request.execute().getContent());
        JSONObject json = (JSONObject) new JSONTokener(response).nextValue();

        fsqplace.name = json.getString("name");
        fsqplace.id   = json.getString("id");

        // fsqplace = request.execute().parseAs(FsqVenueDetails.class); 

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.print(e);

    } 

    return fsqplace;    
}  

  private String streamToString(InputStream is) throws IOException {
    String str  = "";

    if (is != null) {
        StringBuilder sb = new StringBuilder();
        String line;

        try {
            BufferedReader reader   = new BufferedReader(new InputStreamReader(is));

            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }

            reader.close();
        } finally {
            is.close();
        }

        str = sb.toString();
    }

    return str;

}

 public class FsqPlace implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = -1776219712112491139L;

@Key
public String id; 

@Key
public String name; 

@Key
public String address; 

@Key
public String formattedphone;

@Key
public Location location;

@Key
public int ratings;

/*@Key
public Category[] categories;*/

@Override
public String toString() { 
    return name + " - " + id + " - " ; 
} 

public static class Location implements Serializable 
{ 
    @Key
    public double lat; 

    @Key
    public double lng; 
} } 
```

错误信息如下：

```
11-09 09:22:11.288: W/System.err(31379): org.json.JSONException: No value for name
11-09 09:22:11.288: W/System.err(31379):    at org.json.JSONObject.get(JSONObject.java:354)
11-09 09:22:11.288: W/System.err(31379):    at org.json.JSONObject.getString  (JSONObject.java:510)
11-09 09:22:11.288: W/System.err(31379):    at com.example.reddot.Foursquare.getPlaceDetails(Foursquare.java:159)
11-09 09:22:11.288: W/System.err(31379):    at com.example.reddot.SinglePlaceActivity$LoadSinglePlaceDetails.doInBackground(SinglePlaceActivity.java:212)
11-09 09:22:11.288: W/System.err(31379):    at com.example.reddot.SinglePlaceActivity$LoadSinglePlaceDetails.doInBackground(SinglePlaceActivity.java:1)
11-09 09:22:11.296: W/System.err(31379):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
11-09 09:22:11.296: W/System.err(31379):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-09 09:22:11.296: W/System.err(31379):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-09 09:22:11.296: W/System.err(31379):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-09 09:22:11.296: W/System.err(31379):    at   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-09 09:22:11.296: W/System.err(31379):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 
```

json响应

```
11-09 10:08:42.749: I/System.out(32470): com.google.api.client.http.HttpRequest@41b2e3f04b2f2e72f964a520ffe924e3{"meta":{"code":200,"errorType":"deprecated","errorDetail":"Please provide an API version to avoid future errors.See http:\/\/bit.ly\/vywCav"},
"response":
   {"venue":
    {"id":"4b2f2e72f964a520ffe924e3","name":"Limkokwing University of Creative    Technology",
  "contact":{"phone":"+60383178888","formattedPhone":"+60 3-8317   8888","twitter":"limkokwing_my"},
"location":{"address":"Inovasi 1-1","crossStreet":"Jalan Teknokrat 1 \/1","lat":2.940105082370034,"lng":101.6625452041626,"postalCode":"63000","city":"Cyberjaya","state":"Selangor","country":"Malaysia","cc":"MY"},
 "categories":  [{"id":"4bf58dd8d48988d1ae941735","name":"University","pluralName":"Universities","shortName":"University","icon":"https:\/\/foursquare.com\/img\/categories\/education\/default.png","parents":["Colleges & Universities"],"primary":true},{"id":"4bf58dd8d48988d19f941735","name":"College Technology Building","pluralName":"College Technology Buildings",
 "shortName":"Technology","icon":"https:\/\/foursquare.com\/img\/categories\/education\/default.png","parents":["Colleges & Universities","College Academic Buildings"]},{"id":"4bf58dd8d48988d1b1941735","name":"College  Bookstore","pluralName":"College Bookstores","shortName":"Bookstore","icon":"https:\/\/foursquare.com\/img\/categories\/education\/bookstore.png","parents":["Colleges & Universities"]}],
"verified":true,"restricted":true,"stats":{"checkinsCount":17188,"usersCount":2924,"tipCount":57},"url":"http:\/\/www.limkokwing.net\/malaysia","likes":{"count":0,"groups":[]},"specials":[],"photos":{"count":231,"groups":[{"type":"checkin","name":"Friends' check-in photos","count":0,"items":[]},{"type":"venue","name":"Venue photos","count":231,"items":[{"id":"509a0288e4b0606e3a97ab27","createdAt":1352270472,"source":{"name":"foursquare for BlackBerry","url":"https:\/\/foursquare.com\/download\/#\/blackberry"},"url":"https:\/\/is0.4sqi.net\/pix\/3324926_gRzWjsYNxPtZoXXvAsGc19rbo-WhEEAXjF4pjtKXIX4.jpg","sizes":{"count":4,"items":[{"url":"https:\/\/is0.4sqi.net\/pix\/3324926_gRzWjsYNxPtZoXXvAsGc19rbo-WhEEAXjF4pjtKXIX4.jpg","width":640,"height":480},{"url":"https:\/\/is1.4sqi.net\/derived_pix\/3324926_gRzWjsYNxPtZoXXvAsGc19rbo-WhEEAXjF4pjtKXIX4_300x300.jpg","width":300,"height":300},{"url":"https:\/\/is1.4sqi.net\/derived_pix\/3324926_gRzWjsYNxPtZoXXvAsGc19rbo-WhEEAXjF4pjtKXIX4_100x100.jpg","width":100,"height":100},{"url":"https:\/\/is1.4sqi.net\/derived_pix\/3324926_gRzWjsYNxPtZoXXvAsGc19rbo-WhEEAXjF4pjtKXIX4_36x36.jpg","width":36,"height":36}]},"user":{"id":"3324926","firstName":"ashaasa","photo":"https:\/\/is0.4sqi.net\/userpix_thumbs\/D5P5X4K24M01KXJ2.jpg","tips":{"count":1},"gender":"female","homeCity":"Jakarta, Indonesia","bio":":)","contact":{}},"visibility":"public"},{"id":"5099031be4b0c377d6b98f1f","createdAt":1352205083,"source":{"name":"Instagram","url":"http:\/\/instagram.com"},"url":"https:\/\/is1.4sqi.net\/pix\/4538289_RhjwghoFDF2j4A_W33nJxBXyhXSwYg6oi-cFQEMs3qc.jpg","sizes":{"count":4,"items":[{"url":"https:\/\/is1.4sqi.net\/pix\/4538289_RhjwghoFDF2j4A_W33nJxBXyhXSwYg6oi-cFQEMs3qc.jpg","width":612,"height":612},{"url":"https:\/\/is0.4sqi.net\/derived_pix\/4538289_RhjwghoFDF2j4A_W33nJxBXyhXSwYg6oi-cFQEMs3qc_300x300.jpg","width":300,"height":300},{"url":"https:\/\/is0.4sqi.net\/derived_pix\/4538289_RhjwghoFDF2j4A_W33nJxBXyhXSwYg6oi-cFQEMs3qc_100x100.jpg","width":100,"height":100},{"url":"https:\/\/is0.4sqi.net\/derived_pix\/4538289_RhjwghoFDF2j4A_W33nJxBXyhXSwYg6oi-cFQEMs3qc_36x36.jpg","width":36,"height":36}]},"user":{"id":"4538289","firstName":"Frah","lastName":"K.","photo":"https:\/\/is1.4sqi.net\/userpix_thumbs\/LAJSFTDT41E2DARV.jpg","tips":{"count":0},"gender":"female","homeCity":"Gadong, Brunei Darussalam","bio":"","contact":{}},"visibility":"public"},{"id":"50975836e4b0d8a7b4a6dd82","createdAt":1352095798,"source":{"name":"foursquare for BlackBerry","url":"https:\/\/foursquare.com\/download\/#\/blackberry"},"url":"https:\/\/is1.4sqi.net\/pix\/3324926_huWgYd7zJFhXqRVX0XGy6AHPSyVOIDrfflYFGC9cvQg.jpg","size 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:08:39.233

您无法获得名称，因为它不是响应的定向子。你应该这样做

```
JSONObject json = (JSONObject) new JSONTokener(response).nextValue();

        JSONObject jsonResponse = json.getJSONObject("response");
        String name = jsonResponse.getJSONObject("venue").getString("name");
        Log.v("name", "v"+name); 
```

做类似的其他领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:57:23.683

显然，您的响应不包含任何带有“名称”键的数据。您的响应字符串看起来如何？

# python - 将 C# P/Invoke 代码转换为 Python ctypes？

> ID：13300833
> 
> 赞同：1
> 
> 时间：2012-11-09T01:29:15.997
> 
> 标签：python, windows-7, ctypes

我在使用 ctypes 将此 C# 代码转换为 python 时遇到问题。此代码用于隐藏 Windows 7 启动球。这是[链接](https://stackoverflow.com/questions/1165879/hide-start-orb-on-vista-win-7-in-c-sharp)。

```
[DllImport("user32.dll")]
private static extern IntPtr FindWindowEx(
       IntPtr parentHwnd,
       IntPtr childAfterHwnd,
       IntPtr className,
       string windowText);

IntPtr hwndOrb = FindWindowEx(IntPtr.Zero, IntPtr.Zero, (IntPtr)0xC017, null); 
```

我必须定义吗

```
FindWindow = ctypes.windll.user32.FindWindowEx
FindWindow.restype = wintypes.HWND
FindWindow.argtypes = [
    wintypes.HWND, ##hWnd
    wintypes.HWND, ##hWnd
] 
```

还是直接使用？抱歉，我是使用 python ctypes 的新手。

```
hWnd = win32gui.FindWindowEx (win32gui.GetDesktopWindow(),
None,0xC017 ,None) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:01:29.610

看到您看到的错误消息会很有帮助。但是，这几乎可以肯定是因为您需要使用`user32.FindWindowExW`（或者`user32.FindWindowExA`如果您真的想要 ASCII、非 Unicode 版本）而不是直接使用 FindWindowEx。您还需要为所有四个参数指定 argtypes。

[这是文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633500%28v=vs.85%29.aspx)中的原型：

```
HWND WINAPI FindWindowEx(
  _In_opt_  HWND hwndParent,
  _In_opt_  HWND hwndChildAfter,
  _In_opt_  LPCTSTR lpszClass,
  _In_opt_  LPCTSTR lpszWindow
); 
```

那么这个呢？

```
FindWindowEx = ctypes.windll.user32.FindWindowExW
FindWindowEx.argtypes = [
    wintypes.HWND,
    wintypes.HWND,
    wintypes.LPCWSTR,
    wintypes.LPCWSTR,
]
FindWindowEx.restype = wintypes.HWND 
```

您还可以根据链接到的 C# 代码执行 FindWindow（而不是 FindWindowEx）：

```
>>> FindWindow = ctypes.windll.user32.FindWindowW
>>> FindWindow.argtypes = [wintypes.LPCWSTR, wintypes.LPCWSTR]
>>> FindWindow.restype = wintypes.HWND
>>> FindWindow('Shell_TrayWnd', '')
65670L 
```

# rest - Web API 和本机 API 兼容性

> ID：13300835
> 
> 赞同：2
> 
> 时间：2012-11-09T01:29:35.707
> 
> 标签：rest, embedded, asp.net-web-api

好的。这是我的情况：

我正在开发一个提供服务的嵌入式设备。它将向客户端（智能手机）提供一些基于 Web 的服务。目前我们正计划在设备中实现一个 REST 服务器，以便 Web 应用程序可以轻松访问和使用设备提供的服务。

未来，我们计划为我们的嵌入式设备添加显示器和更好的处理器，以便我们可以在设备本身上运行 Web 应用程序。我们希望保持应用程序的兼容性——即所有当前的 Web 应用程序都应该在设备上运行而无需任何修改。

有没有比使用 REST 和 HTTP 更好的方法来实现这一点？我担心在设备上同时运行服务器和客户端的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:57:10.250

如果您注意将 REST Api 代码与实际服务代码分开，您的新设备可以直接与服务交互（直接调用），而不是将所有内容都包装到 HTTP 和 REST 中。

话虽如此，您始终可以使用 REST api 尝试实现并验证性能是否足够。如果是，您甚至不需要添加间接。

# java - 在 Chrome 中打开 JNLP - 阻止文件下载对话框？

> ID：13300838
> 
> 赞同：3
> 
> 时间：2012-11-09T01:29:59.200
> 
> 标签：java, jnlp, java-web-start

> **可能重复：**
> [我可以从 Java 应用程序中删除下载的 JNLP 文件（Java web start/JWS）吗？](https://stackoverflow.com/questions/9348449/can-i-delete-downloaded-jnlp-file-java-web-start-jws-from-java-application)
> [无需下载即可启动 webstart……？](https://stackoverflow.com/questions/11679373/launch-webstart-without-downloading)

我创建了一个 JWS 程序，首先单击一个 HTML 链接，该链接将您带到 JNLP 文件。但是，Chrome 浏览器的作用是显示一个文件下载对话框，询问您是要“保留”还是“丢弃”文件。许多用户监督该对话框并且从不点击“保持”。

但是在某些网站中，我看到该对话框不存在，并且 JWS 会自动启动。在我的情况下，我该如何做同样的事情？

直接启动示例：

[http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T05:49:12.753

该页面使用 java 部署工具包[http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit)。

它是一个 javascript，它还可以为您做一些其他事情，例如确保在客户端机器上安装了 jre 等等。

你可以在这里找到它：http: [//java.com/js/deployJava.js](http://java.com/js/deployJava.js)或人类可读的版本：[http ://www.java.com/js/deployJava.txt](http://www.java.com/js/deployJava.txt)

基本上你像这样使用它：

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
    var url = "http://java.sun.com/javase/technologies/desktop/javawebstart apps/notepad.jnlp";
    deployJava.createWebStartLaunchButton(url, '1.6.0');
</script> 
```

# machine-learning - 聚类搜索短语

> ID：13300840
> 
> 赞同：2
> 
> 时间：2012-11-09T01:30:25.323
> 
> 标签：machine-learning, nlp, classification

正在解决这个问题，我需要根据他们正在寻找的内容对搜索短语进行聚类（现在，假设他们只在寻找地方，例如书店、超市……）

**“我在哪里可以找到芝士蛋糕？”**
可以概率地聚集到“甜点”、“餐厅”、...

**“我在哪里可以买到杂货？”**
可以概率地聚集到“超市”、“蔬菜”、...

假设一开始，一组搜索短语可以被分类到的内容已经存在。

我研究了主题建模，但我觉得我可能走错了方向。任何关于如何开始/研究什么的建议都会非常有帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:40:33.677

主题建模当然提供了一种可能的解决方案。从大型语料库中归纳出一个主题模型，尽可能代表您正在索引和搜索的文本。然后将每个查询表示为给定查询的主题的后验。如果您想获得查询集群，则可以在这个简化的集合上执行此操作，或者如果您正在执行 IR，您可以使用结果向量而不是原始的词袋。

如果这不是你想要的，你能详细说明问题吗？您希望如何处理集群查询？

# ruby - 在 ruby 中生成一个特定的数组

> ID：13300842
> 
> 赞同：1
> 
> 时间：2012-11-09T01:30:30.133
> 
> 标签：ruby

有没有办法在 Ruby 中轻松生成这个数组？

```
[[-5,'-5'],[-4,'-4'],[-3,'-3'],[-2,'-2'],[-1,'-1'],[1,'1'],[2,'2'],[3,'3'],[4,'4'],[5,'5']] 
```

基本上，它包含从 -5 到 5 的 10 个元素，带有一个整数键和字符串值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T01:32:17.170

```
(-5..5).map{ |i| [i, i.to_s] } 
```

doster 指出规范不包括`0`，其中任何一个都可以：

```
(-5..5).reject{ |i| i == 0 }.map{ |i| [i, i.to_s] }
(-5..5).reject(&:zero?).map{ |i| [i, i.to_s] }
(-5..5).map{ |i| [i, i.to_s] unless i == 0 }.compact
(-5..5).ma­p{ |i| [i, i.to_­s] unles­s i.zer­o? }.com­pact 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:43:07.370

`((-5..-1).to_a + (1..5).to_a).map { |i| [i, i.to_s] }`

# ios - 尝试在安装了较旧 Xcode（和 Cocos2d v1）的 MacBook 上移动我的 Cocos2d 2.0 项目时出现问题

> ID：13300843
> 
> 赞同：0
> 
> 时间：2012-11-09T01:30:45.650
> 
> 标签：ios, xcode, cocos2d-iphone, xcode4.2, xcode4.3

啊..救命！我有 10 个小时的飞行，我必须将我的项目从运行 Lion 的 iMac 转移到朋友的 MacBook Pro（运行 10.6.8 MacOSX）。我已经在 6 个月前创建了一个帐户，并在上面安装了 XCode 4.2。

所以现在我将项目文件夹从我的 iMac 复制到 MacBook Pro，然后尝试运行。没有成功。然后我也复制了 Cococs2D v2 库（以前我在那台 Mac 中只有 v1），但没有成功。不幸的是，我不确定复制和提取是否足够，因此我也运行“安装模板”。但我仍然遇到以下问题：

![问题](../Images/d98dc566392c03a96909e2b9ed90b9cd.png)

这似乎与没有基础课程有关，但我不知道如何解决这个问题..有什么帮助吗？？

编辑：我尝试使用“旧”XCode 4.2 在“旧”MacBook Pro 上创建一个全新的项目，但它不起作用..啊..为什么？这次它找不到 UIKit.h 文件。

我认为它完全搞砸了.. 可能我应该尝试下载一个新的 XCode 并从头开始.. 但是我认为我还必须重新配置它的开发人员证书。

这是新的错误..

![在此处输入图像描述](../Images/646e48435d5163e86ac3b69fbc2043e8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:06:03.317

下图显示了您可以在哪里看到项目中的框架。使用加号 (+) 按钮添加框架。

![在此处输入图像描述](../Images/97544828d1044d079062b5519395f864.png)

从您的 pch 文件中的错误来看，您至少需要 Foundation.framework 和 UIKit.framework。

# r - 根据单独的列值删除每行的列

> ID：13300844
> 
> 赞同：3
> 
> 时间：2012-11-09T01:30:52.893
> 
> 标签：r

给定一个如下所示的虚拟数据框：

```
Data1<-rnorm(20, mean=20)
Data2<-rnorm(20, mean=21)
Data3<-rnorm(20, mean=22)
Data4<-rnorm(20, mean=19)
Data5<-rnorm(20, mean=20)
Data6<-rnorm(20, mean=23)
Data7<-rnorm(20, mean=21)
Data8<-rnorm(20, mean=25)
Index<-rnorm(20,mean=5)

DF<-data.frame(Data1,Data2,Data3,Data4,Data5,Data6,Data7,Data8,Index) 
```

我想做的是根据索引列删除（使 NA）每行的某些列。我走了很长一段路，这样做是为了让您了解我正在尝试做的事情：

```
DF[DF$Index>5.0,8]<-NA
DF[DF$Index>=4.5 & DF$Index<=5.0,7:8]<-NA
DF[DF$Index>=4.0 & DF$Index<=4.5,6:8]<-NA
DF[DF$Index>=3.5 & DF$Index<=4.0,5:8]<-NA
DF[DF$Index>=3.0 & DF$Index<=3.5,4:8]<-NA
DF[DF$Index>=2.5 & DF$Index<=3.0,3:8]<-NA
DF[DF$Index>=2.0 & DF$Index<=2.5,2:8]<-NA
DF[DF$Index<=2.0,1:8]<-NA 
```

这工作正常，但不是很适应。如果列数发生变化，或者我需要调整条件语句，那么重写整个代码会很痛苦（实际数据集要大得多）。

我想做的是能够定义一些变量，然后运行某种循环或应用来完全按照上面的代码行所做的。

例如，为了复制我的长代码，类似于这种逻辑：

```
NumCol<-8
Max<-5
Min<-2.0

if index > Max, then drop NumCol
if index >= (Max-0.5) & <=Max, than drop NumCol:(NumCol -1)

repeat until reach Min 
```

我不知道这是否是 R 中最合乎逻辑的推理方式，而且我对循环和应用程序非常糟糕，所以我愿意接受任何可以复制上述长行代码并能够调整上述变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:08:31.970

如果您不介意将 data.frame 更改为矩阵，这里有一个使用矩阵索引的解决方案。要删除的两列索引矩阵的构建是`apply`对函数族的一个很好的回顾：

```
Seq      <- seq(Min, Max, by = 0.5)
col.idx  <- lapply(findInterval(DF$Index, Seq) + 1, seq, to = NumCol)
row.idx  <- mapply(rep, seq_along(col.idx), sapply(col.idx, length))
drop.idx <- as.matrix(data.frame(unlist(row.idx), unlist(col.idx)))

M <- as.matrix(DF)
M[drop.idx] <- NA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:14:27.577

这是一个内存高效（但我不能声称优雅）的 data.table 解决方案

它使用非常有用的函数`findInterval`来改变你小于/大于循环

```
# 
library(data.table)
DT <- data.table(DF)
# create an index column which 1:8 represent your greater than less than
DT[,IND := findInterval(Index, c(-Inf, seq(2,5,by =0.5 ), Inf))]

# the columns you want to change
changing <- names(DT)[1:8]

setkey(DT, IND)
# loop through the indexes and alter by reference
for(.ind in DT[,unique(IND)]){
   # the columns you want to change
   .which <- tail(changing, .ind)
   # create a call to `:=`(a = as(NA, class(a), b= as(NA, class(b))
   pairlist <- mapply(sprintf, .which, .which, MoreArgs = list(fmt =  '%s = as(NA,class(%s))'))
   char_exp <- sprintf('`:=`( %s )',paste(pairlist, collapse = ','))  
 .e <- parse(text = char_exp)
  DT[J(.ind), eval(.e)]

} 
```

# c - 我在将 char 变量的值附加到 C 中的字符串时遇到问题

> ID：13300845
> 
> 赞同：0
> 
> 时间：2012-11-09T01:30:59.133
> 
> 标签：c, arrays, string, char, strcat

我一直在尝试使用 strcat(array, &charVariable) 将 charVariable 添加到数组中，当我显示数组时，它会显示这个╠╠╠╠╠╠╠╠。谁能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T01:33:28.813

问题是`strcat`需要一个指向以空字符结尾的字符序列的指针。在您的情况下，您正在传递一个独立`char`变量的地址。如果紧随`char`变量后内存中的项目不为零，您将触发未定义的行为（附加垃圾字符或崩溃）。

以下是如何正确执行此操作：

```
char tmp[2];
tmp[0] = charVariable;
tmp[1] = '\0';
strcat(array, tmp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:41:11.507

`strcat`旨在用于字符串，其`\0`末尾有一个空字节。您可以尝试 dasblinkenlight 建议的方法，但更有效的方法（假设`array`有足够的空间来添加额外的字符，无论如何您都必须假设使用`strcat`）是：

```
int len = strlen(array);
array[len] = charVariable;
array[len+1] = '\0'; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-09T01:37:13.930

使用规则`strcat()`：

1.  目标字符串必须已经有一个空字符 ('\0') 终止符，否则`strcat()`将无法找到它的结尾。

2.  除了字符和它已经包含的终止空字符之外，目标字符串必须足够大以容纳要附加到它的字符串。

3.  您附加到目标字符串的源字符串也必须有一个空终止符，否则`strcat()`将无法找到它的结尾。

**附录**

@dasblinkenlight 提供了一种正确的方法。这是另一个：

```
size_t  len;
len = strlen(array);
array[len] = charVariable;
array[len+1] = '\0'; 
```

# firefox - mozCancelFullScreen() 在 Mozilla Firefox 中不起作用

> ID：13300859
> 
> 赞同：1
> 
> 时间：2012-11-09T01:32:30.453
> 
> 标签：firefox, html5-video

我创建了一个按钮来运行`mozCancelFullScreen()`方法以退出全屏模式。我不确定它为什么不运行。没有显示错误。`mozRequestFullScreen()`对我来说很好。

```
$('.screenChange').click(function() { 
    if (video.mozFullscreen) { 
        video.mozCancelFullScreen(); 
    } else if (!video.mozFullscreen) { 
       video.mozRequestFullScreen(); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T04:46:44.173

这个问题似乎在你的条件下。“mozFullscreen”不是视频元素的属性。相反，当一个元素全屏时，

```
document.mozFullScreen 
```

是真的。

还有一个问题是 mozCancelFullScreen() 不是视频元素的方法。它是文档本身的一种方法。鉴于这两个更正，您的代码应该是

```
$('.screenChange').click(function() { 
    if (document.mozFullScreen) { 
        document.mozCancelFullScreen(); 
    } else { 
        video.mozRequestFullScreen(); 
    }
}); 
```

# javascript - 为什么 console.log() 不显示从 Object.create 继承的属性？

> ID：13300863
> 
> 赞同：6
> 
> 时间：2012-11-09T01:33:07.493
> 
> 标签：javascript, node.js, inheritance

我在尝试利用`Object.defineProperty()`基础对象时遇到了挂断。我想使用 继承该对象的属性，`Object.create()`然后在派生对象中定义更多属性（可以从那里继承）。我应该注意，我的目标是 node.js。

这是一个例子：

```
var Base = {};

Object.defineProperty(Base, 'prop1', {
    enumerable:true,
    get:function(){ return 'prop1 value';}
});

Object.defineProperty(Base, 'prop2', {
    enumerable:true,
    value : 'prop 2 value'
});

Object.defineProperty(Base, 'create', {
    value:function(){
        return Object.create(Base);
    }
});

console.log(Base);

var derived = Base.create();

Object.defineProperty(derived, 'prop3', {
    enumerable:true,
    value:'prop 3 value'
});

console.log(derived); 
```

输出以下内容：

```
{ prop1: [Getter], prop2: 'prop 2 value' }
{ prop3: 'prop 3 value' } 
```

我认为 console.log() 会枚举继承的属性，以及`prop3`我在派生对象上定义的属性。它似乎不会查找以这种方式定义的属性的原型层次结构。那是对的吗？

我查看了覆盖`toString()`对象的方法，但似乎 console.log() 没有调用它。

1.  如何在无需枚举的情况下记录所有属性？
2.  这是实现继承的有效方法吗？

编辑：

1.  node.js 的库中是否还有另一个函数可以完成这项工作并记录继承的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T01:39:26.263

您可以`console.dir()`在可用的地方使用

```
console.dir(derived) 
```

它会在对象上显示`__proto__`对象的继承属性

编辑：虽然似乎没有出现在节点上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:38:35.837

Firebug*确实*记录了继承的属性：

![在此处输入图像描述](../Images/4671ea71302549a61c2810b8d2f226a4.png)

而 Chrome 为您提供了一个包含继承属性的树视图：

![在此处输入图像描述](../Images/985003383f19b132492d973f3b1d9b43.png)

# ios - 如何在 iOS 上实现协程

> ID：13300868
> 
> 赞同：3
> 
> 时间：2012-11-09T01:33:42.693
> 
> 标签：ios, arm, coroutine

我正在将一个 C++ 项目移植到 iOS，以便在 iPhone 和 iPad 上使用。这个项目广泛使用了 Boost.Coroutine 库。Boost.Coroutine 没有针对 iPhone 的 ARMv6/ARMv7 指令集的实现。

*   是否还有其他可以在 iOS 上运行的协程库？

*   如果没有，是否可以在 ARM 上编写协程行为？我可以看到一些潜在的方法来做到这一点：

    *   直接编写汇编指令来执行堆栈操作。我不太精通汇编，我担心 ARM 架构可能不包含复制和粘贴堆栈或手动移动堆栈指针所需的指令。
    *   使用类似于 pthread 或 Win32 纤程的东西编写协程。我不确定是否有类似的东西可以在 iOS 上使用。
    *   在线程之上实现协程，甚至可能是 Boost.Coroutine 本身。这似乎最有可能奏效，但肯定会有性能缺陷。

注意：Unity 在 iOS 上支持 C# 中的协程；我不确定这是否仅限于典型协程行为的一小部分。如果没有，这是否意味着 Unity 有解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T01:54:44.407

您几乎肯定不想编写汇编指令来执行堆栈操作。iOS 已经在其第三版 ARM 指令集上，从 ARMv6 到 ARMv7 再到 ARMv7s。从 iPhone 5 开始，Apple 进一步增加了人为障碍，即您不得提交带有同样支持 iPhone 5 全屏的 ARMv6 分支的应用程序。我确信 Apple 的动机是确保它可以在未来某个时候过渡到没有 ARMv6 兼容模式的处理器，但对于我们开发人员来说，这显然意味着不要过于依赖特定的指令集。

这留下了线程。iOS 拥有一整套完善的线程机制，并且 pthread 可以公开相关的子集。Grand Central Dispatch 往往是现在用来确保不同任务可以同时发生的正常解决方案，因此吞下了大部分 Internet 文档，但仍然保留了较低级别的解决方案。

显而易见的简单示例，使用[NSConditionLock](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSConditionLock_Class/Reference/Reference.html)：

```
- (void)methodOnThread1
{
    while(1)
    {
        [conditionLock lockWhenCondition:kMoreInputAvailable];

        // process whatever is currently in the common access pool

        [conditionLock unlockWithCondition:kWaitingForInput];
    }
}

- (void)methodOnThread2
{
    while(1)
    {
         // do whatever is necessary to produce more input,
         // creating it locally and taking as long as it takes

        [conditionLock lockWhenCondition:kWaitingForInput];

        // push input to common access pool, by whatever means

        [conditionLock unlockWithCondition:kMoreInputAvailable];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T10:43:45.577

boost.coroutine（来自 Oliver Kowalke；上个月从 boost 社区评论）使用支持 ARMv6（ARM Cortext Ax）的 boost.context

# java - JTable 单元格中的小部件

> ID：13300869
> 
> 赞同：4
> 
> 时间：2012-11-09T01:33:56.367
> 
> 标签：java, swing, editor, jtable, renderer

列中的小部件`JTable`应该与普通小部件无法区分，对吧？似乎存在行为差异，以[Swing 文档为例](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)，并将鼠标移到*Vegetarian*列中的复选框上......他们根本没有反应。我知道这些只是小部件代理，所以必须手动完成突出显示，那么我将如何解决这个问题？我尝试`widget.requestFocusInWindow();` 了`mouseMoved()`代理小部件事件处理程序但没有成功。还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T05:50:56.620

您可以创建自己的应用翻转效果的单元格渲染器。然后，添加一个鼠标侦听器来跟踪鼠标移动并重新绘制相关单元格。您需要将效果应用到光标下的当前单元格并清除上一个单元格。

下面是一个简短的示例，它在复选框渲染器上演示了这种方法。该示例扩展了 default `BooleanRenderer`。唯一的变化是`getModel().setRollover(...)`在`getTableCellRendererComponent()`.

```
import java.awt.Component;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.border.Border;
import javax.swing.border.EmptyBorder;
import javax.swing.plaf.UIResource;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

public class TableRolloverDemo {
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableRolloverDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final JTable table = new JTable();

        final DefaultTableModel model = new DefaultTableModel(new Object[][] {
                { false }, { false }, { true }, { true } },
                new Object[] { "Column" }) {
            public Class<?> getColumnClass(int columnIndex) {
                return Boolean.class;
            }
        };

        RolloverMouseAdapter rolloverAdapter = new RolloverMouseAdapter(table);
        RolloverBooleanRenderer renderer = new RolloverBooleanRenderer(rolloverAdapter);

        table.addMouseListener(rolloverAdapter);
        table.addMouseMotionListener(rolloverAdapter);

        table.setDefaultRenderer(Boolean.class, renderer);
        table.setModel(model);

        frame.add(new JScrollPane(table));
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    static class RolloverMouseAdapter extends MouseAdapter {
        private int row = -1;
        private int column = -1;
        private JTable table;

        public RolloverMouseAdapter(JTable table) {
            this.table = table;
        }

        public boolean isRolloverCell(int row, int column) {
            return this.row == row && this.column == column;
        }

        @Override
        public void mouseMoved(MouseEvent e) {
            int lastRow = row;
            int lastColumn = column;

            row = table.rowAtPoint(e.getPoint());
            column = table.columnAtPoint(e.getPoint());

            if (row == lastRow && column == lastColumn)
                return;

            if (row >= 0 && column >= 0) {
                table.repaint(table.getCellRect(row, column, false));
            }
            if (lastRow >= 0 && lastColumn >= 0) {
                table.repaint(table.getCellRect(lastRow, lastColumn, false));
            }
        }

        @Override
        public void mouseExited(MouseEvent e) {
            if (row >= 0 && column >= 0) {
                table.repaint(table.getCellRect(row, column, false));
            }
            row = column = -1;
        }

    }

    static class RolloverBooleanRenderer extends JCheckBox implements
            TableCellRenderer, UIResource {
        private static final Border noFocusBorder = new EmptyBorder(1, 1, 1, 1);
        private RolloverMouseAdapter adapter;

        public RolloverBooleanRenderer(RolloverMouseAdapter adapter) {
            super();
            this.adapter = adapter;
            setHorizontalAlignment(JLabel.CENTER);
            setBorderPainted(true);
        }

        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {

            getModel().setRollover(adapter.isRolloverCell(row, column));

            if (isSelected) {
                setForeground(table.getSelectionForeground());
                super.setBackground(table.getSelectionBackground());
            } else {
                setForeground(table.getForeground());
                setBackground(table.getBackground());
            }
            setSelected((value != null && ((Boolean) value).booleanValue()));

            if (hasFocus) {
                setBorder(UIManager.getBorder("Table.focusCellHighlightBorder"));
            } else {
                setBorder(noFocusBorder);
            }

            return this;
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:46:54.880

> 它是翻转（或缺少翻转）使表格中的小部件看起来死了。如果`JPanel`是真正的小部件容器，为什么`JTable`而`JTree`不是？

两者都`JTable`使用`JTree`享元[模式](http://en.wikipedia.org/wiki/Flyweight_pattern)进行渲染。[默认渲染器和编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)没有内在的鼠标悬停行为。[正如@Max所示](https://stackoverflow.com/a/13302801/230513)，您必须自己提供所需的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:38:29.517

Jtable 不会将真实组件放入单元格中。他们只使用组件的绘制方法来呈现单元格内容。

# android - 有没有一种好方法可以在没有可见子项时自动隐藏 Android 视图？

> ID：13300871
> 
> 赞同：2
> 
> 时间：2012-11-09T01:34:15.897
> 
> 标签：android, android-layout

我有一个##View##，它有许多子项，根据某些条件可能会显示也可能不会显示（通常，他们是否真的有要显示的信息）。

现在，有代码大约说：

```
if (conditionA) {
  viewA.setVisibility(VISIBILE);
} else {
  viewA.setVisibility(GONE);
}

if (conditionB) {
  viewB.setVisibility(VISIBILE);
} else {
  viewB.setVisibility(GONE);
}

...

if (conditionA || conditionB || ...) {
  parentView.setVisibility(VISIBILE);
} else {
  parentView.setVisibility(GONE);
} 
```

这似乎真的很糟糕。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:30:37.050

您可以继承 ViewGroup 并将检查放在 onDraw() 中。像这样的东西应该工作：

```
public class MyViewGroup extends ViewGroup{
    boolean anyVisible
    @Override
    protected void onDraw(Canvas canvas){
        anyVisible = false
        for(int i = 0; i < this.getChildCount(); i++){
            if(this.getChildAt(i).getVisibility() == View.VISIBILE){
                anyVisible = true;
            }
        }

        this.setVisibility(anyVisible);
        super.onDraw(canvas);
    }
} 
```

如果您使用不同的父布局，只需更改`ViewGroup`为您的父类型，即`LinearLayout`

然后在您的布局 xml 中将您的父视图更改为如下所示：

```
<com.your.package.name.MyViewGroup ...>
.
.
.
</com.your.package.name.MyViewGroup> 
```

# titanium - Titanium showCamera 和 OpenPhotoGallery 功能

> ID：13300872
> 
> 赞同：2
> 
> 时间：2012-11-09T01:34:17.283
> 
> 标签：titanium

我想问一下你们激活showCamera并在android中打开钛的照片库功能时是否有人遇到问题。它将使应用程序崩溃并自动重新启动应用程序。我搜索了很多论坛，尤其是 JIRA appcelator 和钛论坛，但大多数情况都没有解决。我在论坛里试过很多方法，但还是一样。我想知道这是钛的虫子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T21:58:26.780

从相机或图库中选择的最佳代码

```
//Create a dialog with options
var dialog = Titanium.UI.createOptionDialog({
    //title of dialog
    title: 'Choose an image source...',
    //options
    options: ['Camera','Photo Gallery', 'Cancel'],
    //index of cancel button
    cancel:2
});

//add event listener
dialog.addEventListener('click', function(e) {
    //if first option was selected
    if(e.index == 0)
    {
        //then we are getting image from camera
        Titanium.Media.showCamera({
            //we got something
            success:function(event)
            {
                //getting media
                var image = event.media; 

                //checking if it is photo
                if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
                {
                    //we may create image view with contents from image variable
                    //or simply save path to image
                    Ti.App.Properties.setString("image", image.nativePath);
                }
            },
            cancel:function()
            {
                //do somehting if user cancels operation
            },
            error:function(error)
            {
                //error happend, create alert
                var a = Titanium.UI.createAlertDialog({title:'Camera'});
                //set message
                if (error.code == Titanium.Media.NO_CAMERA)
                {
                    a.setMessage('Device does not have camera');
                }
                else
                {
                    a.setMessage('Unexpected error: ' + error.code);
                }

                // show alert
                a.show();
            },
            allowImageEditing:true,
            saveToPhotoGallery:true
        });
    }
    else if(e.index == 1)
    {
        //obtain an image from the gallery
        Titanium.Media.openPhotoGallery({
            success:function(event)
            {
                //getting media
                var image = event.media; 
                // set image view

                //checking if it is photo
                if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
                {
                    //we may create image view with contents from image variable
                    //or simply save path to image
                    Ti.App.Properties.setString("image", image.nativePath); 
                }   
            },
            cancel:function()
            {
                //user cancelled the action fron within
                //the photo gallery
            }
        });
    }
    else
    {
        //cancel was tapped
        //user opted not to choose a photo
    }
});

//show dialog
dialog.show(); 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T20:22:39.860

我正在使用此代码打开相机，它可以正常工作：

```
 Titanium.Media.showCamera({

        success:function(event)
        {
            //getting media
            var image = event.media;
            im=image;
            //checking if it is photo
            if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
            {
                imgpath= image.nativePath;
                $.userphoto.image=imgpath;//$.userphoto is an imageview
            }
        },
        cancel:function()
        {
            //do somehting 
        },
        error:function(error)
        {
            //error happened,
            var a = Titanium.UI.createAlertDialog({title:'Camera'});
            //set message
            if (error.code == Titanium.Media.NO_CAMERA)
            {
                alert('No Cam');
            }
            else
            {
                alert('error');
            }

        },
        mediaTypes:[Ti.Media.MEDIA_TYPE_VIDEO,Ti.Media.MEDIA_TYPE_PHOTO]
    });
} 
```

这是我用来打开照片库的代码（也可以正常工作）：

```
Titanium.Media.openPhotoGallery({
        success:function(event)
        {

            //check if  photo
            if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
            {   
                im=resize(event.media); //just a function to resize the photo
                imgpath= event.media.nativePath;

                $.userphoto.image=imgpath;
            }  
        },
        cancel:function()
        {
            //user cancelled 
        }
    }); 
```

顺便说一句，我现在使用的是 Titanium SDK 3.4.1 GA，但它也曾经在 3.1.3GA 上工作

# java - 如何正确实现Java匿名类的equals方法？

> ID：13300874
> 
> 赞同：3
> 
> 时间：2012-11-09T01:34:24.273
> 
> 标签：java, equals, anonymous-class

在[这篇](https://stackoverflow.com/questions/156275/what-is-the-equivalent-of-the-c-pairl-r-in-java/13299709#13299709)文章中，我提出了一个使用接口和匿名类的解决方案。但是，要实现一件事：`hashCode`and`equals`方法。

但是我发现实现接口的匿名类很难实现`equals`。在该示例中，接口是`Pair<L,R>`，并且工厂方法`Pairs.makePair`将为它返回一个匿名实现。假设我添加了一个`equals`实现。用户可以使用不同的代码实现他们自己的`Pair<L,R>`类`equals`，因此调用`userobj.equals(makepairobj)`将输入他们的代码，`makepairobj.equals(userobj)`并将输入我的代码。因为我无法控制他们的代码，所以很难确保`equals`对称，这是良好实现所必需的。

我相信这个问题在其他情况下很常见，所以我想知道这个问题一般是如何解决的？

编辑：在典型的类中，实现`equals`将检查参数类型以确保它与自己的相同。这保证只调用实现代码来比较对象。但是，匿名类没有名称，无法使用`instanceof`. 我能做的是确保它是实现接口/类的实例。这不足以防止上述情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:55:21.037

您可以使用`this.getClass()`（使用`==`或`isAssignableFrom()`）来比较类型。

### 编辑

如：

```
public boolean equals(Object obj) {
    if (getClass() == obj.getClass()) {
        // do whatever
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:08:54.563

通常，当您制作这样的接口时，它需要实现类来实现`equals`并`hashCode`遵循一些约定。例如，如果您查看`java.util.List`界面，它要求列表相等，只要它们具有相同的长度和相同顺序的相同元素，并且它指定了`hashCode`基于元素的哈希码计算的公式。

因此，“很难确保等于对称”不应该成为问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-10T15:26:06.077

您遇到的问题表明匿名类是错误的实现方式。

匿名类是实现接口或扩展类的简单方法。它是纯粹的语法糖，没有额外的功能或其他优势。它们（可能是错误的）旨在使您的代码更简单、更易读。如果匿名类反而使您的代码复杂化，请不要使用它。

许多过去非常适合匿名类的情况现在由 lambdas 更好地服务。如果一个类有两个或三个方法，试图把它放在一个匿名类中会使你的代码难以阅读；无论如何，它应该是一个内部类。

# java - SQLException: [Microsoft][ODBC Microsoft Access Driver] 参数太少。预计 1

> ID：13300876
> 
> 赞同：1
> 
> 时间：2012-11-09T01:34:37.813
> 
> 标签：java, odbc, dao

我正在访问数据库中搜索项目代码并返回项目对象，如下面的代码所示。任何关于我为什么会收到此错误的建议将不胜感激。谢谢

```
public Item getIteminfo(String itemCode) throws ClassNotFoundException, SQLException {
     Statement myStatement = getConnection();
     Item item = null;
     String itemDescription;
     int itemPrice;
     String sql = "SELECT * FROM itemCatalog WHERE ItemCode = '"+itemCode+"'";
     ResultSet results = myStatement.executeQuery(sql);

     while (results.next()){
         itemDescription = results.getString("Item Description");
         itemPrice = results.getInt("Item Price");
         item = new Item(itemDescription, itemPrice);
     }
     closeConnection();
     return item;
 }
} 
```

这是错误详细信息：

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Too few parameters. Expected 1.
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)
    at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)
    at sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(JdbcOdbc.java:3109)
    at sun.jdbc.odbc.JdbcOdbcStatement.execute(JdbcOdbcStatement.java:337)
    at sun.jdbc.odbc.JdbcOdbcStatement.executeQuery(JdbcOdbcStatement.java:252)
    at checkoutsimulation.DAO.getIteminfo(DAO.java:49)
    at checkoutsimulation.ItemCatalog.getItemdetails(ItemCatalog.java:61) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:51:11.800

我也面临同样的问题。终于什么也没解决，请检查数据库字段名称 ItemCode(WHERE ItemCode = '"+itemCode+"'") 与您的数据库当您的 SQL 上的字段名称错误时会发生此类错误....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T04:16:32.157

在这种情况下，您应该使用`PreparedStatement`

```
PreparedStatement st = con.prepareStatement(""SELECT * FROM itemCatalog WHERE ItemCode=?");
st.setString(1,itemcode);
ResultSet rs = st.executeQuery(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:43:40.613

我对 Java 或 ODBC 并不完全熟悉，但我知道数据库不喜欢带空格的列名。

尝试将列名括在括号中。

`itemDescription = results.getString("[Item Description]");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T11:10:11.347

如果您在查询的选择部分引用不存在的字段，也会发生这种情况。例如如下查询。

```
Select MisSpeltFieldName from tblStuff 
```

# python - 向 Python Thread 类添加新方法是否安全？

> ID：13300877
> 
> 赞同：3
> 
> 时间：2012-11-09T01:34:39.827
> 
> 标签：python, multithreading

我想向 Thread 子类添加一个新方法，这样我就可以告诉我的工作线程优雅地退出。像这样：

```
class MyThread(threading.Thread):
    def __init__(self):
        ...
        self.__stop_signal = False
        self.__signal_lock = threading.Lock()
        ...

    def run(self):
        ...
        self.__signal_lock.acquire(True)
        stop_signal = self.__stop_signal
        self.__signal_lock.release()
        if stop_signal:
            return
        ...

    def stop_elegantly(self):
        self.__signal_lock.acquire(True)
        self.__stop_signal = True
        self.__signal_lock.release() 
```

那么这样做是否安全？

```
thread = MyThread()
thread.start()
...
thread.stop_elegantly() 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:23:09.850

是的，它看起来不错。实际上，您可以通过以下方式更“优雅”地做到这一点：

```
def stop_elegantly(self):
    with self.__signal_lock:
        self.__stop_signal = True 
```

实际上，我认为您甚至不需要锁来访问成员变量，因为将为您的子类的每个实例分配一个单独的锁。例如，参见这个[答案](https://stackoverflow.com/questions/5564009/executing-a-function-with-a-parameter-every-x-seconds-in-python/5566638#5566638)`stop()`，它向子类添加了一个方法`threading.Thread`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:42:36.633

```
 self.__signal_lock.acquire(True)
    stop_signal = self.__stop_signal
    self.__signal_lock.release() 
```

上面的代码在循环中？如果是，我认为它运作良好。

# c# - 了解此事件示例

> ID：13300878
> 
> 赞同：0
> 
> 时间：2012-11-09T01:34:43.540
> 
> 标签：c#, c#-4.0

在阅读有关事件的在线教程后，我想我几乎知道发生了什么。我开发了以下非常简单的代码来在值大于 5 的情况下触发事件。我知道代码非常无用，但我正在使用它来表达我的观点。（而不是主我只是使用按钮事件来触发代码。）

```
//declare the delegate
public delegate void MyDelegate(string str);

public class SomeClass
{
    public event MyDelegate MyEventFromDelegate;
    private int i;
    public int I
    {
            get
            { return i; }
            set
            {
                if (value > 5)
                {
                    MyEventFromDelegate("Value Greater than 5");
                    i = 0;
                }
                else
                {
                    i = value;
                }
            }
    }

}

public partial class Form1 : Form
{
    public Form1()
    { InitializeComponent();  }

    public void Method_To_Call(String rx)
    {   MessageBox.Show("This method will be called if greater than 5");}

    private void button1_Click(object sender, EventArgs e)
    {
        SomeClass a = new SomeClass();
        a.MyEventFromDelegate +=new MyDelegate(Method_To_Call);
        a.I = 12;
    }
} 
```

我在这里唯一担心的是当我们想用声明引发事件时

```
MyEventFromDelegate("Value Greater than 5"); 
```

如果稍后（在按钮单击事件中）我们实际上要为它分配一个函数，以便在每次触发事件时调用，那么将参数传递给事件的关键是此时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:49:36.500

在您非常简单的示例中-没有意义，因为 SomeClass 实例“a”的寿命很短，并且因为您没有使用传递给 Method_To_Call 的 rx 参数。

您的表单方法 button1_Click 通过委托连接到按钮的 Click 事件。Button 不知道点击它时会执行什么代码。它所要做的就是发出被点击的信号。该信号是使用委托实现的。

您可以将您的委托定义为具有传递检查值的整数参数。然后，虽然只有当值大于 5 时才会调用事件方法，但在事件方法内部，您可以根据实际值做不同的事情。

```
//declare the delegate
public delegate void MyDelegate(int aValue);

public class SomeClass
{
    public event MyDelegate MyEventFromDelegate;
    private int i;
    public int I
    {
            get
            { return i; }
            set
            {
                if (value > 5)
                {
                    MyEventFromDelegate(value);
                    i = 0;
                }
                else
                {
                    i = value;
                }
            }
    }

}

public partial class Form1 : Form
{
    public Form1()
    {
      InitializeComponent();  
    }

    public void Method_To_Call(int aValue)
    {   
      MessageBox.Show("This method signals that value is greater than 5\. Value=" + aValue.ToString());
    }

    private void button1_Click(object sender, EventArgs e)
    {
        SomeClass a = new SomeClass();
        a.MyEventFromDelegate +=new MyDelegate(Method_To_Call);
        a.I = 12;
    }
} 
```

# css - CSS3 与 JavaScript

> ID：13300879
> 
> 赞同：3
> 
> 时间：2012-11-09T01:34:55.193
> 
> 标签：css, web

所以我试图在网页上创建一个动画，并试图找出一种使用 CSS3 的方法，但我对如何做到这一点感到很困惑。

我需要发生的是当用户单击链接元素时，我希望 div 展开并填充特定于单击的链接元素的内容。例如，当用户单击标题为“About”的链接时，链接元素下方的 div 将展开并显示一些内容。然后，当他们单击另一个链接时，说“联系”，特定于“关于”的内容将消失，特定于“联系”的内容将显示为 div 重新调整大小以适应新内容。

我想我可以用 Javascript 很容易地做到这一点，但是有人可以告诉我用 CSS3 是否更容易做到/可能吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:49:37.360

你需要的是一些判断来为你正在开发的任何东西增添趣味......如果没有错，你想要这样的东西：[CSS3 vs Jquery](http://www.solutions.x90x.net)

获取 jquery 库并在您的页面中引用它。这是一个让您快速入门的片段。

```
 <a id="home" href="home.html">Home</a> 
<a id="about" href="about.html">About</a> 
<div id="home_div"></div>
<div id="about_div"></div>
    <script type="text/javascript">
        $('#home').click(function () {
            $('html').animate({ scrollTop: 500 }, 1000);
            $('#home_div').animate().show('slow');
            $('#about_div').animate().fadeOut('slow');

            return false;
        });
       $('#about').click(function () {
            $('html').animate({ scrollTop: 500 }, 1000);
            $('#home_div').animate().fadeOut('slow');
            $('#about_div').animate().show('slow');

            return false;
        });
    </script> 
```

您可以将效果更改为其他可用的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:14:32.743

如前所述，JavaScript 是您最好的朋友。但既然你问是否可以使用 CSS3，我不得不试一试。基本上我所做的是使用**目标选择器**来触发动画。因此，当您单击一个链接时，一个 div 会扩展一些内容，如果您单击另一个链接，一个新的 div 会扩展，其中一些新内容（位于同一位置）会扩展，从而产生相同 div 扩展的错觉。

这不是一个最佳解决方案，我很快就完成了这个例子，所以它并没有完全按照你的意愿工作，但它至少为你提供了一个关于如何仅使用 CSS 完成它的图片。

希望有帮助！

这是一个[演示](http://jsfiddle.net/h59VK/)，这是我的示例中的代码：

HTML

```
<a href="#box">Box</a><br /><a href="#boxtwo">Box two</a>
<div id="box">Hello</div>
<div id="boxtwo">Hello again,</div> 
```

CSS

```
#box, #boxtwo{
    position: absolute;
    top: 50px;
    left: 50px;    
    width: 0px;
    height: 0px;
    background-color: #e3e3e3;
    color: transparent;    
}

#box:target {
      -webkit-animation: expand 1.0s ease-in forwards;
}

#boxtwo:target {
      -webkit-animation: expand 1.0s ease-in forwards;
}

@-webkit-keyframes expand {
      0%   {width: 0px; height: 0px; color: transaprent;}
      50%  {width: 100px; height: 100px; color: transparent;}
      100% {width: 100px; height: 100px; color: #000000;}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:38:47.480

单击触发动画的最简单方法是在单击时向对象添加 CSS 类，并为具有该类的任何对象配置 CSS3 过渡或动画。

然后，您隐藏该项目的第二个类可以从同一对象中删除该类名。

动画/过渡的所有细节都将在 CSS3 样式规则中指定。只有类名的添加/删除将使用 javascript 完成。

CSS3 本身可以使用`:hover`伪选择器触发动画/过渡，但功能并没有比这更强大，也不能触发基于点击的动画。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T01:43:07.857

我不认为这是一个 CSS3 与 JavaScript 的问题。即使您使用 CSS3 制作动画，您也可能需要 JavaScript 来根据点击事件触发动画。

根据您需要做的事情，我看到了几个主要选项：

1.  正如@jfriend00 所说，添加或删除执行动画的 CSS 类。
2.  使用 jQuery 的[show](http://api.jquery.com/show/)、[hide](http://api.jquery.com/hide/)、[fadeIn](http://api.jquery.com/fadeIn/)、[fadeOut](http://api.jquery.com/fadeOut/)和[animate](http://api.jquery.com/animate/) API。

# sql - 如何从 SQL Server 发送电子邮件？

> ID：13300881
> 
> 赞同：73
> 
> 时间：2012-11-09T01:35:16.643
> 
> 标签：sql, sql-server, tsql, sp-send-dbmail

如何使用 T-SQL 发送电子邮件但电子邮件地址存储在表中？我想遍历表格并能够发送电子邮件。到目前为止，我找不到这样做的好例子。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-09T09:48:26.863

**步骤 1) 创建个人资料和帐户**

您需要使用配置数据库邮件向导创建配置文件和帐户，该向导可以从管理节点中数据库邮件节点的配置数据库邮件上下文菜单访问。此向导用于管理帐户、配置文件和数据库邮件全局设置。

**第2步）**

跑：

```
sp_CONFIGURE 'show advanced', 1
GO
RECONFIGURE
GO
sp_CONFIGURE 'Database Mail XPs', 1
GO
RECONFIGURE
GO 
```

**步骤 3)**

```
USE msdb
GO
EXEC sp_send_dbmail @profile_name='yourprofilename',
@recipients='test@Example.com',
@subject='Test message',
@body='This is the body of the test message.
Congrates Database Mail Received By you Successfully.' 
```

循环遍历表格

```
DECLARE @email_id NVARCHAR(450), @id BIGINT, @max_id BIGINT, @query NVARCHAR(1000)

SELECT @id=MIN(id), @max_id=MAX(id) FROM [email_adresses]

WHILE @id<=@max_id
BEGIN
    SELECT @email_id=email_id 
    FROM [email_adresses]

    set @query='sp_send_dbmail @profile_name=''yourprofilename'',
                        @recipients='''+@email_id+''',
                        @subject=''Test message'',
                        @body=''This is the body of the test message.
                        Congrates Database Mail Received By you Successfully.'''

    EXEC @query
    SELECT @id=MIN(id) FROM [email_adresses] where id>@id

END 
```

**将此发布在以下链接[http://ms-sql-queries.blogspot.in/2012/12/how-to-send-email-from-sql-server.html](http://ms-sql-queries.blogspot.in/2012/12/how-to-send-email-from-sql-server.html)**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-02T07:34:41.213

您可以使用数据库邮件从 SQL Server 中本地发送电子邮件。这是通知系统管理员有关错误或其他数据库事件的好工具。您还可以使用它向最终用户发送报告或电子邮件消息。基本语法是：

```
EXEC msdb.dbo.sp_send_dbmail  
@recipients='user@yourdomain.com',
@subject='Testing Email from SQL Server',
@body='<p>It Worked!</p><p>Email sent successfully</p>',
@body_format='HTML',
@from_address='Sender Name <sender@yourdomain.com>',
@reply_to='sender@yourdomain.com' 
```

在使用之前，必须使用数据库邮件配置向导或 sp_configure 启用数据库邮件。数据库或 Exchange 管理员可能需要帮助您进行配置。有关详细信息，请参阅 [http://msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx) 和 [http://www.codeproject.com/Articles/485124/Configuring-Database-Mail-in-SQL-Server](http://www.codeproject.com/Articles/485124/Configuring-Database-Mail-in-SQL-Server)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-30T20:55:48.963

你也可以用光标来做。假设您已经创建了一个帐户和一个个人资料，例如“个人资料”和一个帐户，并且您拥有准备好保存电子邮件的表格，例如“EmailMessageTable”，您可以执行以下操作：

```
USE database_name
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE mass_email AS
declare @email nvarchar (50) 
declare @body nvarchar (255)  

declare test_cur cursor for             
SELECT email from [dbo].[EmailMessageTable]

open test_cur                                        

fetch next from test_cur into   
@email     
while @@fetch_status = 0       
begin                                    

set @body = (SELECT body from [dbo].[EmailMessageTable] where email = @email)
EXEC msdb.dbo.sp_send_dbmail
    @profile_name = 'profile',
    @recipients = @email,
    @body = @body,
    @subject = 'Credentials for Web';
fetch next from test_cur into  
@email 
end    
close test_cur   
deallocate test_cur 
```

之后，您所要做的就是执行存储过程

```
EXECUTE mass_email
GO 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-10T23:36:37.003

下面是一个示例，说明如何将表中的电子邮件地址连接到单个 @recipients 参数中：

```
CREATE TABLE #emailAddresses (email VARCHAR(25))

INSERT #emailAddresses (email) VALUES ('foo@foobar.com')
INSERT #emailAddresses (email) VALUES ('bar@foobar.com')
INSERT #emailAddresses (email) VALUES ('buzzlightyear@foobar.com')

DECLARE @recipients VARCHAR(MAX)
SELECT @recipients = COALESCE(@recipients + ';', '') + email 
FROM #emailAddresses

SELECT @recipients

DROP TABLE #emailAddresses 
```

结果@recipients 将是：

foo@foobar.com;bar@foobar.com;buzzlightyear@foobar.com

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-10T13:37:35.950

为了使 SQL 服务器发送电子邮件通知，您需要从管理数据库邮件创建邮件配置文件。

1）用户右键单击以获取邮件配置文件菜单并选择配置数据库邮件

2）选择第一个打开（按照以下任务设置数据库邮件），然后按下一步注意：如果没有配置SMTP，请参考下面的URL

[http://www.symantec.com/business/support/index?page=content&id=TECH86263](http://www.symantec.com/business/support/index?page=content&id=TECH86263)

3) 在第二个屏幕中填写配置文件名称并添加 SMTP 帐户，然后按下一步

4）选择邮件帐户类型（公共或私人）然后按下一步

5) 更改与发送邮件选项相关的参数，然后按下一步 6) 按完成

现在要让 SQL 服务器在动作 X 发生时发送电子邮件，您可以通过触发器或作业来执行此操作（这不是唯一的常用方法）。

1）您可以从 SQL Server 代理创建作业，然后右键单击操作员并检查邮件（例如填写您的电子邮件），然后单击确定，然后右键单击作业并选择新作业并填写所需的信息以及来自步骤，名称，...等，然后从通知选项卡中选择您创建的配置文件。

2）从触发器请参考下面的例子。

```
AS
declare @results varchar(max)
declare @subjectText varchar(max)
declare @databaseName VARCHAR(255)
SET @subjectText = 'your subject'
SET @results = 'your results'
-- write the Trigger JOB
EXEC msdb.dbo.sp_send_dbmail
 @profile_name = 'SQLAlerts',
 @recipients = 'xxxx@xxxx.com',
 @body = @results,
 @subject = @subjectText,
 @exclude_query_output = 1 --Suppress 'Mail Queued' message
GO 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-04T02:15:58.820

有时虽然没有直接找到 sp_send_dbmail。您可以使用 'msdb.dbo.sp_send_dbmail' 来尝试（在 Windows Server 2008 R2 上工作正常并经过测试）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-25T09:45:26.887

要通过 SQL Server 发送邮件，我们需要设置 DB 邮件配置文件，我们可以使用 SQL Server 中的 T-SQl 或 SQL 数据库邮件选项来创建配置文件。下面的代码用于通过查询或存储过程发送邮件。

使用以下链接创建数据库邮件配置文件

[http://www.freshcodehub.com/Article/42/configure-database-mail-in-sql-server-database](http://www.freshcodehub.com/Article/42/configure-database-mail-in-sql-server-database)

[http://www.freshcodehub.com/Article/43/create-a-database-mail-configuration-using-t-sql-script](http://www.freshcodehub.com/Article/43/create-a-database-mail-configuration-using-t-sql-script)

```
--Sending Test Mail
EXEC msdb.dbo.sp_send_dbmail
@profile_name = 'TestProfile', 
@recipients = 'To Email Here', 
@copy_recipients ='CC Email Here',             --For CC Email if exists
@blind_copy_recipients= 'BCC Email Here',      --For BCC Email if exists
@subject = 'Mail Subject Here', 
@body = 'Mail Body Here',
@body_format='HTML',
@importance ='HIGH',
@file_attachments='C:\Test.pdf';               --For Attachments if exists
```

# c# - 使用带有 Webrequest 和 WP8 的可移植类库

> ID：13300883
> 
> 赞同：2
> 
> 时间：2012-11-09T01:35:31.433
> 
> 标签：c#, .net, windows-phone-8, portable-class-library

我有一个找不到任何解决方案的问题，而且我很难相信我是唯一遇到此错误的人。

我在可移植类库中有这段 C# 代码

```
static public void GetAnimeListFromWeb(ObservableCollection<AnimeViewModel> collection, string Url, string encodedLogin = "")
    {
        WebRequest request = WebRequest.Create(Url);
        request.Headers["Authorization"] = encodedLogin;

        IAsyncResult asyncResult = request.BeginGetResponse(new AsyncCallback( s => {
            WebResponse response = (s.AsyncState as WebRequest).EndGetResponse(s);
            XDocument doc = XDocument.Load(response.GetResponseStream());

            IEnumerable<AnimeViewModel> result = ParseAnimeXML(doc);

            collection = (ObservableCollection<AnimeViewModel>)result;

        }), request);
    } 
```

当我编译它时，它会构建，并且代码也可以在我编写的用于测试它的小型控制台程序中运行。但是，在 Windows Phone 8 应用程序中进行测试时，它会崩溃

```
WebResponse response = (s.AsyncState as WebRequest).EndGetResponse(s); 
```

它抛出一个 ArgumentException。当我检查 's' 变量时，它说 AsyncWaitHandle 给出了 NotSupportedException。

那么我的问题是，我怎样才能做出适用于所有平台的适当 Webrequest？

编辑：也许有必要注意我的目标是 .NET 4.5、SL4 及更高版本、WP7 及更高版本以及适用于 Windows 商店应用程序的 .NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:47:45.703

在我看来，您需要使用最新的 Asyc/Await 概念来执行此任务，例如 DownloadStringAsync。因为 Async/Await 是 Windows 8 和 Windows Phone 8 中唯一支持的机制。但是，当您使用此代码并为多个平台构建它时，编译器将处理不同平台的复杂性并生成所需的代码。

# java - Java 压缩 try/catch 代码异常

> ID：13300887
> 
> 赞同：1
> 
> 时间：2012-11-09T01:36:06.240
> 
> 标签：java, exception, try-catch, java.util.scanner

有什么方法可以压缩 try/catch 块代码吗？现在，我的代码在 try/catch 代码中有一个 try/catch 代码。

```
if(petType.equals("DOG")) {

  try {
    String name = input.next();
    String owner = input.next();
    double weight = input.nextDouble();
    SimpleDateFormat stdDate = new SimpleDateFormat("MM/dd/yy");

    try {
      Date vaccineDate = stdDate.parse(input.next());
      boolean fixed = input.nextBoolean();
      Dog x = new Dog(name,owner,weight,vaccineDate,fixed);
      object.addPet(x);
    } 
    catch (ParseException ex) {
      System.out.println("ERROR - Vaccine date " + input.next() + " is not in mm/dd/yy format!");
      input.nextLine();
    }

  }
  catch(NoSuchElementException ex) {
    System.out.println("ERROR - Missing fields. Skipping line " + lineNumber + "...");
    input.nextLine();
  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T01:38:48.290

你可以这样做

```
if(petType.equals("DOG")) {

  try {
    String name = input.next();
    String owner = input.next();
    double weight = input.nextDouble();
    SimpleDateFormat stdDate = new SimpleDateFormat("MM/dd/yy");
    Date vaccineDate = stdDate.parse(input.next());
    boolean fixed = input.nextBoolean();
    Dog x = new Dog(name,owner,weight,vaccineDate,fixed);
    object.addPet(x);
  }
  catch(NoSuchElementException ex) {
    System.out.println("ERROR - Missing fields. Skipping line " + lineNumber + "...");
    input.nextLine();
  }
  catch (ParseException ex) {
    System.out.println("ERROR - Vaccine date " + input.next() + " is not in mm/dd/yy format!");
    input.nextLine();
  }
} 
```

或使用 Java 7

```
try {
...
} catch(ParseException | NoSuchElementException ex) {
...
} 
```

如果这就是你所说的压缩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T01:42:16.253

首先，一个try块后面可以跟一系列catch块：

```
try {
    throw IOException("msg");
    ...
    throw InterruptedException("msg");
}
catch (IOException ioe){
    ...
 } catch (InterruptedException ie) {
    ...
 } 
```

这不是最佳实践，因为您可能希望缩小 try/catch 块以处理有关异常的较小代码内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:40:31.963

您只能使用一个 try 块，然后使用 catch(Exception ex) 捕获所有这些异常。如果您想对特定类型的异常做出反应，则必须对其进行测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T01:41:21.073

你*可以*做到（见下文）。但是您可能想考虑一下代码的结构，例如，也许您可​​以进行重组，这样您就不必在每个 catch 块中调用 input.nextLine。

```
if(petType.equals("DOG")) {

  try {
    String name = input.next();
    String owner = input.next();
    double weight = input.nextDouble();
    SimpleDateFormat stdDate = new SimpleDateFormat("MM/dd/yy");

    Date vaccineDate = stdDate.parse(input.next());
    boolean fixed = input.nextBoolean();
    Dog x = new Dog(name,owner,weight,vaccineDate,fixed);
    object.addPet(x);    
  }
  catch (ParseException ex) {
    System.out.println("ERROR - Vaccine date " + input.next() + " is not in mm/dd/yy format!");
    input.nextLine();
  }
  catch(NoSuchElementException ex) {
    System.out.println("ERROR - Missing fields. Skipping line " + lineNumber + "...");
    input.nextLine();
  }    
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T01:44:09.473

就个人而言，我不喜欢嵌套 try/catch 块。我不会这样写；我更喜欢这样：

```
if(petType.equals("DOG")) {

  String vaccineDateString;
  try {
      String name = input.next();
      String owner = input.next();
      double weight = input.nextDouble();
      DateFormat stdDate = new SimpleDateFormat("MM/dd/yy");
      stdDate.setLenient(false);
      vaccineDateString = input.next();
      Date vaccineDate = stdDate.parse(vaccineDateString);
      boolean fixed = input.nextBoolean();
      Dog x = new Dog(name,owner,weight,vaccineDate,fixed);
      object.addPet(x);
    } catch (ParseException ex) {
        System.out.println("ERROR - Vaccine date " + vaccineDateString + " is not in MM/dd/yy format!");
        input.nextLine();
    } catch(NoSuchElementException ex) {
        System.out.println("ERROR - Missing fields. Skipping line " + lineNumber + "...");
        input.nextLine();
    }
} 
```

我也会怀疑您将输入与所有其他内容混合在一起。我会找到另一种方法。

# qt - Qt WebView 并点击谷歌地图

> ID：13300891
> 
> 赞同：0
> 
> 时间：2012-11-09T01:37:04.083
> 
> 标签：qt, google-maps

有没有人试图通过 QWebView 的鼠标事件方法之一单击 Qt QWebView 中显示的谷歌地图？我想以这种方式执行此操作，因为我需要在 Qt 和谷歌地图中运行一些操作（当我点击地图时，我想添加一个巴士站 - 它会加载到程序中并且标记会出现在地图）。我有一个添加地标的方法，我知道我可以调用它，但是我在传递正确的位置时遇到了问题。

```
void MyWebView::mousePressEvent(QMouseEvent * e) {
    QString command = "placeMarker(new google.maps.LatLng(";
    command.append(new QString(e->x()));
    command.append(", ");
    command.append(QString(e->y()));
    command.append("))");
    this->page()->mainFrame()->evaluateJavaScript(command);

} 
```

# javascript - 使用python迭代获取查询的不同页面

> ID：13300894
> 
> 赞同：1
> 
> 时间：2012-11-09T01:37:23.493
> 
> 标签：javascript, python, html

我正在尝试使用 python 解析一系列 html 页面，但无法以迭代方式抓取页面。网页的链接。

[米兰图书馆](http://www.biblioteche.regione.lombardia.it/OPACMI01/cat/SDF?FORMFL_OB=CHIAVE%20DI%20ORDINAMENTO%20DEL%20TITOLO&FORM_SO=Ascend&FORM_C=AND&CODICE_BIBLIO=LO1%2001&CODICE_BIBLIO_O=uguale&CODICE_BIBLIO_C=AND&COPY_BIBLIO=&COPY_BIBLIO_C=AND&GROUP=&AUTORE_O=AND&AUTORE=&TITOLO_O=AND&TITOLO=&SOGGETTO_BW_O=AND&SOGGETTO_BW=&DESCRITTORE_BW_O=&DESCRITTORE_BW=&DESCRITTORE_O=AND&DESCRITTORE=&TIPO_CLASS=&CLASSE_FULL=&CLASSE_FULL_O=AND&COLLANA_O=AND&COLLANA=&TITOLO_ORIGINALE_O=AND&TITOLO_ORIGINALE=&EDITORE_O=AND&EDITORE=sonzogno&ABSTRACT_O=AND&ABSTRACT=&INDIRIZZOWEB_O=&INDIRIZZOWEB=&COLLOCAZIONE_INC_O=&COLLOCAZIONE_INC=&TEMP500A_O=&TEMP200E_O=&TIPO_DOCUMENTO_O=uguale&TIPO_DOCUMENTO=&GENERE_O=uguale&GENERE=&DATA_PUBBLICAZIONE_O=minore&DATA_PUBBLICAZIONE=1943&LUOGO_EDIZIONE_O=AND&LUOGO_EDIZIONE=&PAESE_O=AND&PAESE=&LINGUA_O=AND&LINGUA=&DATA_COLL=&IMPRONTA_O=AND&IMPRONTA=&POSSESSORE_O=AND&POSSESSORE=&MARCHE_O=AND&MARCHE=&NOTE_ESEMP_O=AND&NOTE_ESEMP=&GENERE_A_O=uguale&GENERE_A=)

在查看源代码后，我找到了一个响应下一页按钮元素上的单击事件的函数。

```
 function SaltaAPagina() {
    var CalcPag = VAIAPAGINA.value;
    if (CalcPag > 0) {
        CalcPag=CalcPag;
    }
    else {
        CalcPag="1";
     }
    document.location = "/OPACMI01/cat/SDW?W=CODICE_BIBLIO+%3D+%27LO1+01%27+AND+EDITORE+PH+WORDS+%27sonzogno%27+AND+DATA_PUBBLICAZIONE+%3C+1943+ORDER+BY+ORDINAMENTO/Ascend&M=" + CalcPag + "&R=Y";
    } 
```

我知道我可以使用 urlencode 方法使用 pythons urllib2 模块对参数进行编码。但我不确定我应该包含什么作为参数

```
lomba_link='http://www.biblioteche.regione.lombardia.it/OPACMI01/cat/SDW?W%3DCODICE_BIBLIO+%3D+%27LO1+01%27+AND+EDITORE+PH+WORDS+%27sonzogno%27+AND+DATA_PUBBLICAZIONE+%3C+1943+ORDER+BY+ORDINAMENTO/Ascend%26M%3D1%26R%3DY'
params = urllib.urlencode([('CalcPag',4)])
# this has not worked.
req = urllib2.Request(lomba_link)
print req
response = urllib2.urlopen(req,params)
html_doc = response.read() 
```

我在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:46:24.043

您发布的 javascript 函数将几个参数传递给目标页面：

```
document.location = "/OPACMI01/cat/SDW" + // This is the path of the page
     "?W=CODICE_BIBLIO+%3D+%27LO1+01%27+AND+EDITORE+PH+WORDS+%27sonzogno%27+AND+DATA_PUBBLICAZIONE+%3C+1943+ORDER+BY+ORDINAMENTO/Ascend" + // The first parameter
     "&M=" + CalcPag + // The second parameter
     "&R=Y"; // The third parameter 
```

在您的代码中，您已经对 URL 中的所有`&`和`=`符号进行了编码，因此您传递了一个没有值的单个长参数 - 将这些符号改回它们在 javascript 函数中的样子应该可以解决问题。

```
lomba_link='http://www.biblioteche.regione.lombardia.it/OPACMI01/cat/SDW'
params = urllib.urlencode([
    ('W', 'CODICE_BIBLIO+%3D+%27LO1+01%27+AND+EDITORE+PH+WORDS+%27sonzogno%27+AND+DATA_PUBBLICAZIONE+%3C+1943+ORDER+BY+ORDINAMENTO/Ascend'),
    ('M', 4),
    ('R', 'Y')
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:49:58.400

使用辉煌的图书馆要容易得多`requests`，而不是`urllib2`图书馆......

关于POST 请求`urllib2.urlopen`。`params`不幸的是，您需要将查询字符串附加到 url 以发出 GET 请求。

例如：

```
req = urllib2.urlopen(req + '?' + params) 
```

有了请求，这会简单得多：

```
page = requests.get(some_url, params={'CalcPag': '4'}) 
```

# c++ - 调试版只崩溃

> ID：13300895
> 
> 赞同：0
> 
> 时间：2012-11-09T01:37:38.837
> 
> 标签：c++, debugging, boost

我只有调试崩溃。我正在使用 Eclipse 的 gdb。如果我没有阅读失败，那么在将对象（不是通过引用或指针）传递给接口方法时似乎会发生崩溃，恰好是在调用复制构造函数期间复制“ `many`”（`typedef std::list<boost::any> many;`）成员以将副本发送到方法。我没有使用调试构建来提升，也没有使用其他外部构建，只是为了我正在编译的代码，那么，这可能是原因吗？关于可能是什么原因的任何其他想法？

```
class Message {
public:
static const int MAX_LEVEL=5;
Message(int type=0, int destination=0);
virtual ~Message();

int type;
int destination[MAX_LEVEL];
int level;
many message;
}; 
```

还有崩溃的扇区，里面：（即使我在调试模式下构建，也没有 _DEBUG 定义，因为我没有为库构建调试二进制文件`init()`）`Game3DWin`

```
bool Game3DWin::init(){
#ifdef _DEBUG
pluginsCfg = "lib/plugins_d.cfg";
resourcesCfg = "res/resources_d.cfg";
#elif OGRE_PLATFORM == OGRE_PLATFORM_WIN32
pluginsCfg = "lib/pluginsWin.cfg";
resourcesCfg = "res/resources.cfg";
#else
pluginsCfg = "lib/plugins.cfg";
resourcesCfg = "res/resources.cfg";
#endif
ogreRoot=boost::make_shared<Ogre::Root>(pluginsCfg, "config.cfg");
if(!(ogreRoot->restoreConfig() || ogreRoot->showConfigDialog())){
    return false;
}
window = ogreRoot->initialise(true, "Crewon CLASH!");
loadResourceCfgFile();

guiRenderer = &CEGUI::OgreRenderer::bootstrapSystem();
CEGUI::SchemeManager::getSingleton().create( "TaharezLook.scheme" );
CEGUI::System::getSingleton().setDefaultFont( "DejaVuSans-10" );
CEGUI::System::getSingleton().setDefaultMouseCursor( "TaharezLook", "MouseArrow" );
CEGUI::Window* myRoot = CEGUI::WindowManager::getSingleton().createWindow( "DefaultWindow", "_MasterRoot" );
CEGUI::System::getSingleton().setGUISheet( myRoot );

    CRengine::Message msg=CRengine::Message( (int)CRengine::MESSAGE_TYPE::INPUT_INIT );
msg.message.push_front(window);
this->broadcaster.lock()->receiveMessage( msg ); //Crash here
//Unreached code due to crash
} 
```

broadcaster 是一个指向 Messageable 的指针，一个接口。

```
class Messageable {
public:
virtual ~Messageable() {};
virtual bool receiveMessage(CRengine::Message) = 0;
}; 
```

广播器初始化（能够存储“this”智能指针的工厂方法）：

```
Game3DWin* Game3DWin::create(boost::shared_ptr<CRengine::Messageable> caster, int processType, int order){
Game3DWin* temp= new Game3DWin(processType, order);
temp->broadcaster=caster;
bool success=temp->init();
if(!success){
    delete temp;
    temp=NULL;
}else{
    temp->checkRoom(); }
return temp;
} 
```

上面的代码在这里调用：

```
bool MainManager::start( boost::shared_ptr<MainManager> thisMM ){
//Some code
    boost::shared_ptr<Game3DWin> win;
    win.reset( Game3DWin::create(thisMM, CRengine::MAIN_PROCESS_TYPES::PROCESS_GUI) );
//Some code
} 
```

从 main 调用 start()，它将指针传递给 MainManager

```
boost::shared_ptr<CRengine::MainManager> app =boost::make_shared<CRengine::MainManager>();
        app->start(app); 
```

消息实现：

```
Message::Message(int type, int destination): type(type), level(0){
for(int ii=0;ii<MAX_LEVEL;ii++){
     this->destination[ii]=-1;
}
this->destination[0]=destination;
}
Message::~Message() { } 
```

`window`来自`Ogre::RenderWindow*`OGRE 3D开源渲染引擎。我试图在将其`(int)`推入之前将其强制转换`many`，以防它试图调用析构函数或其他东西，但仍然是同样的崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:10:38.300

这是一个扩展评论，太长了，无法放入评论中。

`Message`缺少实现的构造函数和析构函数。在确认问题仍然存在的同时简化类，或者向我们公开该实现。

`window`是一个未知类型的变量。由于您报告的崩溃包含该`list`类型，因此知道它是什么可能有点用处。`boost::any``window`

`this->broadcaster.lock()``shared_ptr`如果`weak_ptr`已经消失，将为空。总是，总是，总是在检查它是否有效（在ean 上下文中评估它）之后`shared_ptr<foo> pFoo = this->broadcaster.lock();`使用（或任何名称）。`pFoo``bool`

`boost::weak_ptr<CRengine::Messageable> caster`——你不知道这是否存在？您可能想要一个`boost::shared_ptr`在这里，以便在创建 Game3DWin 期间至少知道施法者存在。

这里也一样：`boost::weak_ptr<MainManager> thisMM`-- 可能应该是`shared_ptr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:47:35.550

问题不是上述任何一个。这是由于 Eclipse 无法清理造成的。这是由于使用“外部生成器”mingw32-make.exe 造成的，它在 makefile 中运行了一个`del <Filelist>`并且 Windows7 似乎对此及其参数有一些问题，所以`clean`什么也没做。由于我使用的`Debug`是主动构建，因此由于缺少 ，我遇到了崩溃`clean`，但是当我切换到`Release`它时，它并没有受到影响，因为它必须主要重建所有东西。手动删除内容`<project>/Debug`并`<project>/Release`修复问题。

# java - 使用罗马的有效 RSS 2.0

> ID：13300903
> 
> 赞同：7
> 
> 时间：2012-11-09T01:38:06.807
> 
> 标签：java, xml, rss, rome

我使用[rome 1.0](https://rometools.jira.com/wiki/display/ROME/Home)为我的 java 应用程序生成 RSS。

在我的java中：

```
 SyndFeed feed = new SyndFeedImpl();
    feed.setFeedType( "rss_2.0" );
    feed.setTitle( "My Site" );
    feed.setLink( "http://example.com" );
    feed.setDescription( "Test Site." );    

    List<SyndEntry> entries = new ArrayList<SyndEntry>();
    SyndEntry entry = null;
    SyndContent description = null;

    entry = new SyndEntryImpl();
    entry.setTitle( "Entry1" );
    entry.setLink( "http://example.com/entry1" );
    entry.setPublishedDate( new Date() );

    description = new SyndContentImpl();
    description.setType("text/html");
    description.setValue( "This is the content of entry 1." );
    entry.setDescription( description );

    entries.add( entry );
    feed.setEntries(entries);

    Writer writer = new FileWriter("/home/jr/Desktop/stream.xml");
    SyndFeedOutput output = new SyndFeedOutput();
    output.output(feed,writer);
    writer.close(); 
```

生成的 RSS：

```
<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>My Site</title>
    <link>http://example.com</link>
    <description>Test Site.</description>
    <item>
      <title>Entry1</title>
      <link>http://example.com/entry1</link>
      <description>This is the content of entry 1.</description>
      <pubDate>Fri, 09 Nov 2012 01:28:57 GMT</pubDate>
      <guid>http://example.com/entry1</guid>
      <dc:date>2012-11-09T01:28:57Z</dc:date>
    </item>
  </channel>
</rss> 
```

[在此处](http://validator.w3.org/appc/)验证 RSS 时，它具有以下建议：

*   一个项目不应同时包含 pubDate 和 dc:date
*   缺少原子：与 rel="self" 的链接

如何在罗马图书馆做推荐？生成的 RSS 是否正常？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-03T17:28:12.400

在您的自定义 SyndFeed 类中，确保您将 Date 变量命名为与 SyndFeed 类中的不同（即：而不是“publishedDate”，使用“pubDate”之类的名称。这似乎已经解决了我的问题。

```
public class CustomSyndFeed extends SyndFeedImpl {

protected Date pubDate;

    @Override
    public Date getPublishedDate() {
        return pubDate;
    }

    @Override
    public void setPublishedDate(final Date pubDate) {
        this.pubDate = new Date(pubDate.getTime());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T03:44:38.547

So this is happening because the `SyndFeedImpl` uses the same field for the date and publishedDate fields (from the DC Module) :

```
@Override
public Date getPublishedDate() {
    return getDCModule().getDate();
}

@Override
public void setPublishedDate(final Date publishedDate) {
    getDCModule().setDate(publishedDate);
} 
```

Since the `RSS093Generator` (used by the `RSS20Generator`) creates a pubDate element from the specified item, but also inherits from the DCModuleGenerator, you get both this:

```
final Date pubDate = item.getPubDate();
        if (pubDate != null) {
            eItem.addContent(generateSimpleElement("pubDate", DateParser.formatRFC822(pubDate, Locale.US)));
        } 
```

and this:

```
final Date dcDate = dcModule.getDate();
if (dcDate != null) {
    for (final Date date : dcModule.getDates()) {
        element.addContent(generateSimpleElement("date", DateParser.formatW3CDateTime(date, Locale.US)));
    }
} 
```

This interaction can be prevented by implementing a custom `SyndFeed` of your own. In this case, all you need to do is create a class variable to store your pubDate so that the `DCModule` never gets a date set, and will therefore never generate your unwanted `dc:date` element.

I ran into the exact same problem and solved it by using this `SyndFeed` implementation:

```
public class CustomSyndFeed extends SyndFeedImpl {

    protected Date publishedDate;

    @Override
    public Date getPublishedDate() {
        return publishedDate;
    }

    @Override
    public void setPublishedDate(final Date publishedDate) {
        this.publishedDate = new Date(publishedDate.getTime());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-09T18:40:49.397

Little late to the party, but no answer here works out of the box, so I figured I'd add mine.

As @Vitor points out in his comment, the correct way of doing this to extend `SyndEntryImpl` and use it as `SyndEntry entry = new CustomEntryImpl();`.

```
public class CustomEntryImpl extends SyndEntryImpl {

    protected Date pubDate;

    @Override
    public Date getPublishedDate() {
        return pubDate;
    }

    @Override
    public void setPublishedDate(final Date pubDate) {
        this.pubDate = new Date(pubDate.getTime());
    }
} 
```

# math - 判断点是否在三角形内

> ID：13300904
> 
> 赞同：42
> 
> 时间：2012-11-09T01:38:13.763
> 
> 标签：math

程序需要读取三个坐标的值

*   P1(x1,y1)
*   P2(x2,y2)
*   P3(x3,y3)

以及另一个坐标 P(x,y) 并确定该点是否在由上面的 3 点形成的三角形内。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-09T01:56:57.870

正确的方法是在给定三角形的三个点的情况下计算第四个点的[重心坐标。](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_(mathematics))计算它们的公式在“转换为重心坐标”部分的末尾给出，但我希望在这里提供一个较少数学强度的解释。

为简单起见，假设您有一个结构体 ，`point`它具有值`x`和`y`。您将您的观点定义为：

```
point p1(x1, y1);
point p2(x2, y2);
point p3(x3, y3);

point p(x,y); // <-- You are checking if this point lies in the triangle. 
```

现在，重心坐标，通常称为`alpha`、`beta`和`gamma`，计算如下：

```
float alpha = ((p2.y - p3.y)*(p.x - p3.x) + (p3.x - p2.x)*(p.y - p3.y)) /
        ((p2.y - p3.y)*(p1.x - p3.x) + (p3.x - p2.x)*(p1.y - p3.y));
float beta = ((p3.y - p1.y)*(p.x - p3.x) + (p1.x - p3.x)*(p.y - p3.y)) /
       ((p2.y - p3.y)*(p1.x - p3.x) + (p3.x - p2.x)*(p1.y - p3.y));
float gamma = 1.0f - alpha - beta; 
```

如果所有`alpha`、`beta`和`gamma`都大于`0`，则该点`p`位于由点`p1`、`p2`和组成的三角形内`p3`。

这背后的解释是，可以使用三角形的点和三个系数（每个点一个，在 [0,1] 范围内）来描述三角形内的点：

```
p = (alpha)*p1 + (beta)*p2 + (gamma)*p3 
```

重新排列此函数可为您提供计算重心坐标的公式，但我觉得这样做的步骤可能超出了问题的范围。它们在我链接到顶部的 Wikipedia 页面上提供。

因此，每个系数必须大于 0，才能使该点`p`位于三个点所描述的区域内。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-10T12:26:26.217

假设点为 A、B 和 C，而不是 P1、P2 和 P3。

```
 A(10,30)
            / \
           /   \
          /     \
         /   P   \      P'
        /         \
B (0,0) ----------- C(20,0) 
```

算法 ：

```
1) Calculate area of the given triangle, i.e., area of the triangle ABC in the above diagram. 

    Area A = [ x1(y2 - y3) + x2(y3 - y1) + x3(y1-y2)]/2

2) Calculate area of the triangle PAB. We can use the same formula for this. Let this area be A1.
3) Calculate area of the triangle PBC. Let this area be A2.
4) Calculate area of the triangle PAC. Let this area be A3.
5) If P lies inside the triangle, then A1 + A2 + A3 must be equal to A. 
```

下面给出的是 C 中的一个程序：

```
#include <stdio.h>
#include <stdlib.h>

/* A utility function to calculate area of triangle formed by (x1, y1), 
   (x2, y2) and (x3, y3) */
float area(int x1, int y1, int x2, int y2, int x3, int y3)
{
   return abs((x1*(y2-y3) + x2*(y3-y1)+ x3*(y1-y2))/2.0);
}

/* A function to check whether point P(x, y) lies inside the triangle formed 
   by A(x1, y1), B(x2, y2) and C(x3, y3) */
bool isInside(int x1, int y1, int x2, int y2, int x3, int y3, int x, int y)
{   
   /* Calculate area of triangle ABC */
   float A = area (x1, y1, x2, y2, x3, y3);

   /* Calculate area of triangle PBC */  
   float A1 = area (x, y, x2, y2, x3, y3);

   /* Calculate area of triangle PAC */  
   float A2 = area (x1, y1, x, y, x3, y3);

   /* Calculate area of triangle PAB */   
   float A3 = area (x1, y1, x2, y2, x, y);

   /* Check if sum of A1, A2 and A3 is same as A */
   return (A == A1 + A2 + A3);
}

/* Driver program to test above function */
int main()
{
   /* Let us check whether the point P(10, 15) lies inside the triangle 
      formed by A(0, 0), B(20, 0) and C(10, 30) */
   if (isInside(0, 0, 20, 0, 10, 30, 10, 15))
     printf ("Inside");
   else
     printf ("Not Inside");

   return 0;
} 
```

**时间：** O(1)

**空间：** O(1)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T01:41:03.297

取三个给定点的平均值。这个新点 P4 将始终位于三角形内。

现在检查 P 和 P4 是否位于三行`P1P2` `P2P3`和的每一行的同一侧`P3P1`。您可以通过检查叉积`(P -> P1) x (P -> P2)`和`(P4 -> P1) x (P4 -> P2)`（其中 P->P1 是从 P 到 P1 的向量）的符号，然后检查其他两对的符号来做到这一点。

# core-data-migration - RubyMotion 中的 CoreData 迁移问题

> ID：13300912
> 
> 赞同：1
> 
> 时间：2012-11-09T01:38:49.683
> 
> 标签：core-data-migration, rubymotion

我一直在研究如何在 RubyMotion 中使用 CoreData 进行模式迁移。

CoreData 模式迁移的问题在于，如果您是普通的 Obj-C iOS 开发人员并且生活很好，通常它是通过 XCode 完成的。但由于我们使用的是 RubyMotion，因此我们必须手动执行此操作。

XCode CoreData 项目附带 xcdatamodel 文件，这些文件是图表，显示应用程序的实体和属性，让您可以添加/修改它们。您可以创建版本化的 xcdatamodel 文件，并能够设置从一个版本到另一个版本的迁移；它提供了一个称为轻量级迁移的功能  [http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)只要迁移范围在范围内，它就可以执行自动迁移它的极限。

这些功能仅在 XCode 和带有 xcdatamodel 文件的项目中可用。我当前定义CoreData的属性和属性的实现都是在代码中定义的。但是这种方法不允许我们使用 XCode 方式来定义 CoreData 的结构，因此不能通过 XCode 提供迁移处理。这是我到目前为止提出的潜在方法

1.  使用 xcdatamodel 文件定义 CoreData 的模式（实体、属性等）并使用 XCode 进行轻量级迁移。Nitron 正在引用 xcdatamodel 文件来定义模型；我只是还不知道怎么做。（向 Nitron 的作者发布了一个问题  [https://github.com/mattgreen/nitron/issues/27](https://github.com/mattgreen/nitron/issues/27)  以更深入地了解他是如何做到的，但还没有回应。）还有一个名为 Xcodeproj 的 gem   [https:// github.com/CocoaPods/Xcodeproj](https://github.com/CocoaPods/Xcodeproj)  看起来你可以从 ruby​​ 与 XCode 项目进行交互，但没有让它工作，也没有花费太多时间。

2.  在代码中进行手动迁移这在理论上是可能的。我们需要的是原始 managedObjectModel 和目标 managedObjectModel 并按照“如果无法自动找到模型，请使用迁移管理器”中描述的步骤  [http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/ CoreDataVersioning/Articles/vmLightweightMigration.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html) 这里的问题是如何获得原始的 managedObjectModel。我们需要存储所有版本的 NSManagedObjectModels，就像 ruby​​-on-rails 在 db/migrate/* 中所做的那样。拥有当前的 NSManagedObjectModel 和目的地的 NSManagedObjectModel，迁移是可能的。存储所有版本的 NSManagedObjectModel 的一种方法是基于键值的持久性存储。有一个不错的 gem，叫做 NanoStore   [https://github.com/siuying/NanoStoreInMotion](https://github.com/siuying/NanoStoreInMotion)，它可以让你存储数组和字典。例如，我们可以将每个版本存储在一个数组中，并以嵌套字典格式描述模式。我还没有完成编码来练习它，但我认为这是一种方法。

3.  去他妈的 coredata 并继续使用基于键值的存储。NanoStore 看起来非常强大，它是由 sqlite 支持的持久性数据存储。如自述文件所示，它可以创建具有属性的模型，能够处理  `find`  事物，并且可以创建称为包的对象集合并对其进行操作。虽然每个模型都没有关系，但我们可以潜在地使用包来关联对象和/或我们可以定义我们自己的关系，就像我在这里做的那样  [https://gist.github.com/4042753](https://gist.github.com/4042753)

我倾向于键值存储主要是因为它的简单性，但仍然具有持久性。它如何处理架构更改？它只是向现有数据添加/删除属性（如果删除属性则删除所有列，如果向现有模型实例添加新属性则为 nil）。这很糟糕吗？我认为这没有必要，因为我们  *可以*  在必要时从服务器同步对象（我们的应用程序是基于服务器的应用程序）。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T04:55:52.890

要创建 xcdatamodel 文件，您可以使用[ruby​​-xcdm](https://github.com/infinitered/ruby-xcdm)，它可以轻松地以类似 ActiveRecord 的方式管理多个模式版本。

然后，来自同一作者的[Core Data Query](https://github.com/infinitered/cdq)将您需要手动处理的许多复杂性抽象出来。

另一个资源来看看[这个例子](https://github.com/mdiep/CoreDataInCode)，如何手动设置（轻量级）迁移，纯粹在代码中，没有 Xcode 的任何帮助。

Marcus Zarra 在 Core Data 2nd Edition 中还有一章会带您了解如何设置迁移，以便它们按顺序运行，这会在您有多个模式版本后降低复杂性。这是在 Objective-C 中，但将其移植到 RubyMotion 相对简单。

# objective-c - 获取当前 iTunes 曲目的艺术作品

> ID：13300917
> 
> 赞同：0
> 
> 时间：2012-11-09T01:40:18.190
> 
> 标签：objective-c, itunes, scripting-bridge, artwork

我在整个网络和这个网站上进行了搜索，以了解如何获取当前 iTunes 曲目的艺术作品。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:57:16.537

您可以使用以下命令生成 iTunes.h：

```
sdef /Applications/iTunes.app | sdp -fh --basename iTunes 
```

然后您可以使用`iTunes`来获取当前播放的曲目：

```
#import "iTunes.h"

iTunesApplication *app = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"];
iTunesTrack *currentTrack = app.currentTrack; 
```

然后获取当前曲目的专辑封面：

```
SBElementArray *artworks = [currentTrack artworks];
iTunesArtwork *artwork = artworks[0]; 
```

# java - 如何使用 foreach 循环来清理这个冗长的代码补丁？

> ID：13300921
> 
> 赞同：0
> 
> 时间：2012-11-09T01:40:38.347
> 
> 标签：java, android, foreach

Java/Android 初学者在这里。我在我的应用程序中使用自定义字体，并且`setTypeface()`为每段文本创建一个语句会影响我的代码质量。

当前代码：

```
Typeface Helvetica = Typeface.createFromAsset(getAssets(), "fonts/Helvetica.otf");

final TextView Nike = (TextView)findViewById(R.id.Nike);
final TextView Puma = (TextView)findViewById(R.id.Puma);
final TextView Adidas = (TextView)findViewById(R.id.Adidas);
final TextView Reebok = (TextView)findViewById(R.id.Reebok);
final TextView Umbro = (TextView)findViewById(R.id.Umbro);

Nike.setTypeface(Helvetica);
Puma.setTypeface(Helvetica);
Adidas.setTypeface(Helvetica);
Reebok.setTypeface(Helvetica);
Umbro.setTypeface(Helvetica); 
```

如何缩短此代码？我正在考虑一个带有数组的 foreach 循环，但我似乎无法弄清楚。这样的事情是否可能：

```
String[] HelveticaTextArray = {"Nike", "Puma", "Adidas", "Reebok", "Umbro"};

for ( String[] HelveticaTextArray : item ) {
    final TextView HelveticaText = (TextView).findViewById(R.id.item);
    HelveticaText.setTypeface(Helvetica);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:02:11.747

由于您对每个人都在做同样的事情，`TextView`我倾向于创建一个方便的方法来满足您的需要，并传入`R.id.xxx`and 字体。例如，

```
private void initializeViews() {
    Typeface Helvetica = Typeface.createFromAsset(getAssets(), "fonts/Helvetica.otf");

    final TextView Nike = initializeTextView(R.id.Nike, Helvetica);
    final TextView Puma = initializeTextView(R.id.Puma, Helvetica);
    final TextView Adidas = initializeTextView(R.id.Adidas, Helvetica);
    final TextView Reebok = initializeTextView(R.id.Reebok, Helvetica);
    final TextView Umbro = initializeTextView(R.id.Umbro, Helvetica);

}

private TextView initializeTextView(int textViewId, Typeface typeface) {
    TextView textView = (TextView)findViewById(textViewId);
    if (textView != null)
        textView.setTypeface(typeface);
    else
        Log.e(TAG, "some error message");
    return textView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:49:59.443

您可以存储 int ID 而不是字符串。

```
//String[] HelveticaTextArray = {"Nike", "Puma", "Adidas", "Reebok", "Umbro"};
int[] HelveticaTextArray = {R.id.Nike, R.id.Puma, R.id.Adidas, R.id.Reebok, R.id.Umbro}

for ( int[] HelveticaTextArray : item ) {
    final TextView HelveticaText = (TextView)findViewById(item);
    HelveticaText.setTypeface(Helvetica);
}; 
```

除非您永远不会对这些 TextView 做任何事情，否则我建议您不要这样做。`findViewByID()`是一个相对昂贵的调用，如果您稍后需要使用 TextView 引用，您应该保留它们而不是多次调用`findViewById()`

使用 HelveticaTextView 之类的子类继承 TextView 并在构造函数中设置字体，然后使用它而不是 TextView 可能是一个更好的主意，这样您就不必在 Activity 中弄乱字体了。

像这样的东西：

```
public class HelveticaTextView extends TextView{
    public HelveticaTextView(Context c){
        Typeface Helvetica = Typeface.createFromAsset(c.getAssets(), "fonts/Helvetica.otf");
        super(c);
        this.setTypeface(Helvetica);
    }
    public HelveticaTextView(Context c, AttributeSet attrs){
    Typeface Helvetica = Typeface.createFromAsset(c.getAssets(), "fonts/Helvetica.otf");
        super(c, attrs);
        this.setTypeface(Helvetica);
    }
    public HelveticaTextView(Context context, AttributeSet attrs, int defStyle) {
    Typeface Helvetica = Typeface.createFromAsset(c.getAssets(), "fonts/Helvetica.otf");
        super(c, attrs, defStyle);
        this.setTypeface(Helvetica);
    }
} 
```

然后在您的 xml 布局中更改

```
<TextView .../> 
```

到

```
<com.your.package.name.HelveticaTextView .../> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T01:50:03.863

```
int[] HelveticaArray = {R.id.Nike, R.id.Puma, R.id.Reebok, R.id.Umbro};

for (int item : HelveticaArray) {
    ((TextView).findViewById(item)).setTypeFace(Helvetica);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T01:50:39.973

大概是这样的：

```
TextView[] textViews = { (TextView) findViewById(R.id.Nike), (TextView) findViewById(R.id.Puma) };

for (TextView view : textViews) {
   view.setTypeface(Helvetica);
} 
```

# css - 将 div 强制向左

> ID：13300922
> 
> 赞同：0
> 
> 时间：2012-11-09T01:40:42.870
> 
> 标签：css

我怎样才能`<div id="green_bar">`重叠`<div id="top_header">`并停在徽标的左边缘？当屏幕宽度扩大时，我试图让绿色条向左扩大，但我希望它停在徽标的左边缘。

我试过`position: absolute;`了，`#green_bar`但它在屏幕上扩展了 100%。

**JSFiddle：http: [//jsfiddle.net/hfgQt/14/](http://jsfiddle.net/hfgQt/14/)**

HTML：

```
<div id="header_bar"></div><!-- Grey line on top -->
        <div id="top_header"><!-- begin top header -->
        <div id="green_bar"></div>
        <div class="wrap">
            <div id="logo">
                <a><h1>info</h1></a>
            </div>
        </div>
        </div><!-- end top header -->​ 
```

CSS

```
.wrap {
    margin:0px auto;
    width:960px;
}

#header_bar {
    background-color: #424243;
    height: 25px;
}

#top_header {
    padding:0px 0px;
    background-color:#24303d;
    background-image:url("http://i.imgur.com/kGjGG.png");
    border-bottom:1px solid rgba(0,0,0,.4);
    overflow:hidden;
}

#green_bar {
    display: block;
    height: 10px;
    width: 100%;
    background-color: green;
}

#logo {
    float:left;
    clear:both;
}

#logo h1 {
    margin:0px; 
    padding:0px;
    background:url(../images/logo.png) no-repeat;
    text-indent:-9999px;
    width:258px;
    height:56px;
}
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:22:58.520

试试下面的片段。

据我了解您的问题，诀窍是获得（浏览器宽度 - 960px）的一半。这就是左边距的数量。我使用了一个额外的包装器 div 来剪裁固定宽度（应该是 960px，但我将其更改为 480px 以使其在 jsfiddle 中看起来不错）。这是`position: absolute`为了让它脱离流动。然后内部 div ( `#green_bar`) 只需`width: 50%`将其缩减为两个边距加在一起的一半宽度 - 仅左边距的宽度。

很难理解你想要什么，所以我可能做错了。如果您需要更多帮助，请告诉我。

```
header {
    padding-bottom:5px;
    margin-bottom:35px;
    background:#ffdf85;
    border-bottom:1px solid #d4d4d4;
    background-color:#ffdf85;
}

.wrap {
    margin:0px auto;
    width:480px;
    background: rgba(128, 128, 0, .5);
    overflow: hidden;
}

#header_bar {
    background-color: #424243;
    height: 25px;
}

#top_header {
    padding:0px 0px;
    background-color:#24303d;
    background-image:url("http://i.imgur.com/kGjGG.png") no-repeat;
    border-bottom:1px solid rgba(0,0,0,.4);
    overflow:hidden;
    position: relative;
}

#green_bar_wrapper {
    position: absolute;
    padding-right: 480px;
    left: 0;
    right: 0;
    top: 0;
}
#green_bar {
    width: 50%;
    height: 10px;
    background-color: green;
}

/*    3.0.0 Logo
----------------------------------------*/

#logo {
    float:left;
    clear:both;
}

#logo h1 {
    margin:0px; 
    padding:0px;
    background:url(http://i.imgur.com/kGjGG.png) no-repeat;
    width:258px;
    height:56px;
}

#logo h1 span {
    text-indent: -9999px;
}
```

```
<header><!-- BEGIN HEADER -->
<div id="header_bar"></div><!-- Grey line on top -->
        <div id="top_header"><!-- begin top header -->
        <div id="green_bar_wrapper"><div id="green_bar"></div></div>
        <div class="wrap">
            <div id="logo">
                <h1><a><span>info</span></a></h1>
            </div>
        </div>
</div><!-- end top header -->
</header><!-- END HEADER -->
```

# iphone - 无法在动画 UIImageView 上显示文本或按钮？

> ID：13300923
> 
> 赞同：1
> 
> 时间：2012-11-09T01:40:49.967
> 
> 标签：iphone, objective-c, animation

我有一个我正在尝试为学校创建的 iPhone 游戏，但我遇到了一些麻烦。我创建了一个动画 UIImage 用作背景。问题是，这是我所到的最远的地方。我无法在 ImageView 上方显示任何按钮、文本或标签。我在 View 控制器中将它设置为 ImageView 位于底部的位置，以便所有其他对象都可以出现在上方。有谁知道我在这里做错了什么或者我可以添加什么可以解决这个问题？我已经包含了创建动画的代码。

```
 - (void)viewDidLoad 
```

{
// 创建将执行动画的视图 UIImageView* YourImageView = [[UIImageView alloc] initWithFrame:self.view.frame];

```
// load all the frames of our animation
YourImageView.animationImages = [NSArray arrayWithObjects:    
                                 [UIImage imageNamed:@"Star-Field 1.png"],
                                 [UIImage imageNamed:@"Star-Field 2.png"],
                                 [UIImage imageNamed:@"Star-Field 3.png"],
                                 [UIImage imageNamed:@"Star-Field 4.png"],
                                 [UIImage imageNamed:@"Star-Field 5.png"],
                                 [UIImage imageNamed:@"Star-Field 6.png"],
                                 [UIImage imageNamed:@"Star-Field 7.png"],
                                 [UIImage imageNamed:@"Star-Field 8.png"],
                                 [UIImage imageNamed:@"Star-Field 9.png"],
                                 [UIImage imageNamed:@"Star-Field 10.png"],
                                 [UIImage imageNamed:@"Star-Field 11.png"],
                                 [UIImage imageNamed:@"Star-Field 12.png"],
                                 [UIImage imageNamed:@"Star-Field 13.png"],
                                 [UIImage imageNamed:@"Star-Field 14.png"],
                                 [UIImage imageNamed:@"Star-Field 15.png"],
                                 [UIImage imageNamed:@"Star-Field 16.png"],
                                 [UIImage imageNamed:@"Star-Field 17.png"], 
                                 [UIImage imageNamed:@"Star-Field 18.png"], nil];

// all frames will execute in 1.75 seconds
YourImageView.animationDuration = 0.5;
// repeat the animation forever
YourImageView.animationRepeatCount = 0;
// start animating
[YourImageView startAnimating];
// add the animation view to the main window 
[self.view addSubview:YourImageView];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:57:30.240

实例化视图控制器时，首先实例化 XIB 文件中的视图。在此之后，该`viewDidLoad`方法被调用。

您正在实例化一个新的图像视图`viewDidLoad`，这个图像视图被添加到每个子视图的顶部，这就是您的按钮、标签等不显示的原因。

要解决此问题，您可以指示视图控制器的视图将新的图像视图发送到后面，如下所示：

```
[self.view addSubview:YourImageView];
[self.view sendSubviewToBack:YourImageView]; 
```

如果我正确理解了您的描述，那么您也已在 XIB 中放置了一个图像视图作为您的背景。您可以访问它而不是在方法中创建新的图像视图`viewDidLoad`。为此，您必须`IBOutlet`在 XIB 文件中为图像视图声明一个属性。

# openerp - 在 OpenERP 中分配或完成任务时发送电子邮件

> ID：13300927
> 
> 赞同：5
> 
> 时间：2012-11-09T01:41:05.007
> 
> 标签：openerp

有没有办法向在项目中分配任务的人发送电子邮件或在任务完成时向项目经理发送电子邮件？

我正在开发 OpenERP v6.1。

感谢您的回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:49:34.810

您可以覆盖按钮对象方法，

```
 obj_mail_msg = self.pool.get('mail.message')
    obj_mail_server = self.pool.get('ir.mail_server')
    mail_server_ids = obj_mail_server.search(cr, uid, [], context=context)
    mail_server_record = obj_mail_server.browse(cr, uid, mail_server_ids)[0]
    obj_mail_msg.schedule_with_attach(cr, uid, 
                            email_from, 
                            email_to = [list of email], 
                            subject='Notification for Task',
                            body=tools.ustr(mail_body) or '', 
                            mail_server_id = mail_server_ids[0]) 
```

**schedule_with_attach**将创建一个按摩，`(settings > configuration > Email > Massages)`按摩将由调度程序发送。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T09:22:12.880

解决方案是使用“email_template”模块。安装此模块，您可以在`Settings > Configuration > Email > Outgoing Mail Servers`. 在这里，您已经设置了发送邮件服务器。然后`Settings > Configuration > Email > Templates`在此处为您想要的模型添加电子邮件模板。

现在继承您的模型并在函数中（您的按钮对象更改任务状态以完成）添加搜索相应的电子邮件模板，然后使用`send_mail()`email_template 模块中的发送邮件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:11:50.587

这可以通过两种方式完成。

**工作流程**

“vanilla”方式是使用工作流：工作流活动可以触发服务器操作，在到达时发送电子邮件。您需要为您的对象创建一个工作流（例如`project.task`）。请记住将视图的状态按钮从 修改`type='object'`为`type='workflow'`。[你可以在这里](http://bazaar.launchpad.net/~openerp-commiter/openerp-mgmtsystem/trunk/view/head:/mgmtsystem_action/workflow_mgmtsystem_action.xml?start_revid=6)找到一个例子。

如果您不熟悉 OpenERP 中的模块开发，这可能会相当复杂。恕我直言，这样一个“明显”的功能很麻烦。

**自动操作**

这导致我们采用第二种方法：使用`base_action_rule`模块。不幸的是，事实证明你相当受限于你可以通过模块实现的目标。所以我写了一个扩展，[`base_action_rule_trigger`](http://apps.openerp.com/addon/7738)来简化你想要实现的自动化。

例如，在项目问题关闭时创建通知：

*   在设置模块中，选择菜单自定义»自动操作，然后创建一个新的。
*   在“条件”选项卡中：设置“规则名称”和“对象”字段。
*   将“评估表达式”设置为`changed.get('state') == 'done'`：

![放](../Images/6a41e9d387ca872341a2c00f6bca11be.png)

*   在“操作”选项卡中：设置“电子邮件模板”并选中“立即发送”标志：

![设置](../Images/6136805190f86841eeafee3b71b776b9.png)

*   新的“电子邮件模板”模块用于设计和呈现电子邮件：

![在此处输入图像描述](../Images/96204f89c51186245609ec331408adeb.png)

其他触发器表达式示例：

*   负责人从用户 X 变为用户 Y：`old.get('user_id') and new.get('user_id') and old.get('user_id') != new.get('user_id')`
*   一个新的或未分配的问题：`inserting or changed.get('state') == 'draft' or not new.get('user_id')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T08:23:01.713

您可以使用“email_template”模块发送邮件。首先，您需要为此创建一个模板。
如果您不想创建 email.template，那么您可以直接使用“mail.message”的“发送邮件方法”。

```
def send_email(cr, uid, ids, context=None):
    mail_server_obj = self.pool.get('ir.mail_server')
    mail_server_ids = mail_server_obj.search(cr, uid, [], context=context)
    if mail_server_ids:
        mail_message_obj = self.pool.get('mail.message')
        email_from = mail_server_obj.browse(cr, uid, mail_server_ids[0], context=context).smtp_user
        values = {
                'subject': your_subject,
                'body_html': your_body_message,
                'email_from': email_from,
                'email_to': email_to,
                'model': model_name,
                'res_id': ids[0],
                'mail_server_id': mail_server_ids and mail_server_ids[0],
                'date': time.strftime('%Y-%m-%d %H:%M:%S'),
                'state': 'outgoing',
                'subtype': 'html',
            }
            msg_id = mail_message_obj.create(cr, uid, values, context=context)
            if msg_id:
                mail_message_obj.send(cr, uid, [msg_id], context=context) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-09T01:50:23.940

这是我在我的一个项目中使用的。也许用你的填写邮件服务器（smtp）参数可以解决你的问题。

```
import javax.mail.*;
import javax.mail.internet.*;
Properties properties = System.getProperties(); 
properties.setProperty("mail.smtp.host", "smtp.gmail.com");
properties.setProperty("mail.smtp.auth", "true");
properties.put("mail.smtp.starttls.enable", "true");
Session session = Session.getDefaultInstance(properties, new Authenticator() {
    @Override
    protected PasswordAuthentication getPasswordAuthentication()    {
        return new PasswordAuthentication(acc, pass);
    }
});
MimeMessage mimeMessage = new MimeMessage(session);

Transport.send(mimeMessage); 
```

# g++ - 无法在 cygwin 下编译 ANTLR3 项目，在 OSX 上工作正常

> ID：13300929
> 
> 赞同：1
> 
> 时间：2012-11-09T01:41:12.727
> 
> 标签：g++, cygwin, antlr3

我正在尝试在 Cygwin 中编译一个简单的 ANTLR3 项目（使用 C 目标构建）。我已经使用标准`./configure`, `make`,`make install`方法安装了 C 运行时库，并且库似乎安装成功（头文件安装`/cygdrive/e/cygwin/usr/local/include/`在`/cygdrive/e/cygwin/usr/local/lib/`.

当我使用 g++ 编译时（我在项目的其余部分使用 c++ - C++ 目标没有生成 AST 的能力），所有文件都可以正常编译，但链接失败。使用：

```
g++ -m32 -o compile Main.o Lexer.o Parser.o 
```

给出错误

```
Main.o:Main.cpp:(.text+0xfc): undefined reference to `_antlr3AsciiFileStreamNew'
Main.o:Main.cpp:(.text+0x12b): undefined reference to `_antlr3CommonTokenStreamSourceNew'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: Main.o: bad reloc address 0x0 in section `.ctors'
collect2: ld returned 1 exit status 
```

将`-lantlr3c`标志添加到命令中也不起作用，尽管错误有所不同：

```
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lantlr3c
collect2: ld returned 1 exit status
make: *** [compile] Error 1 
```

最后，将库文件保存在本地目录中并使用“-L”。标志也不起作用：

```
Main.o:Main.cpp:(.text+0xfc): undefined reference to `_antlr3AsciiFileStreamNew'
Main.o:Main.cpp:(.text+0x12b): undefined reference to `_antlr3CommonTokenStreamSourceNew'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: Main.o: bad reloc address 0x0 in section `.ctors'
collect2: ld returned 1 exit status 
```

第一个命令在 OSX 上运行良好。有人有什么想法吗？我认为这可能与 Cygwin 奇怪的文件结构/安装位置的选择有关，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:31:07.257

我成功地在 cygwin 下构建了 python3grammar（由 Ales Teska 编写），C 运行时名为“libantlr3c-3.4”和 gcc-mingw32（ver4.7.0）。

命令：

```
gcc -m32 *.c output/*.c -Iinclude -I. -L. -lantlr3c  -o py.exe 
```

对于此错误消息；未定义对“_antlr3AsciiFileStreamNew”的引用。

这篇文章可能会有所帮助： [http](http://contrapunctus.net/blog/2012/antlr-c) ://contrapunctus.net/blog/2012/antlr-c 这适用于 ANTLR 3.2 版（debian 稳定版），但我今天也了解到最新的 3.4 版有一些重大的 C API 更改. 其一，antlr3AsciiFileStreamNew 必须替换为 antlr3FileStreamNew(filename, ANTLR3_ENC_8BIT)。

# java - 井字游戏的游戏树

> ID：13300931
> 
> 赞同：3
> 
> 时间：2012-11-09T01:41:25.313
> 
> 标签：java, tree, tic-tac-toe

首先，我是java初学者，我正在尝试模拟井字游戏。我想使用游戏树为所有状态创建一个可能的树。树中的每个节点都将代表状态并使用这棵树来决定下一步要采取的行动。我计划如下接近，

1.  接口类包括表示单个移动所需的信息。
2.  抽象/接口类包括以下方法：

    一个。返回一个新的状态对象，它表示
    应用该移动后游戏的状态。

    湾。如果当前状态代表其中一名玩家获胜，则该游戏获胜者的 id。

    C。返回当前玩家和下一个玩家ID。

3.  在一个类中包括方法，

    一个。游戏树中此节点处表示的游戏状态

    湾。给定一个 Move，向该节点添加一个子节点。

    C。给定一个 Move，返回相应的子节点。

4.  在另一个类中包含方法，

    一个。构造一棵具有初始状态的树。

    湾。返回游戏的当前状态

    C。给定一个移动，更新树，使树的根保持游戏的新状态。

    d。为这棵树生成给定深度的子节点。

我知道树的概念（二进制或 avl 或红黑），但我有点困惑从哪里开始以及如何继续。在这种情况下的任何建议都会非常有帮助。

谢谢

辛克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:57:44.513

树木对于 3x3 网格来说太过分了，只需使用 2D 玩家 ID 数组来模拟场景。要检查是否获胜，请遍历每行中的每个单元格（三行、三列和两条对角线）。如果任何这些行中的所有单元格都属于同一玩家，则该玩家获胜。

为简单起见，线条可能只是坐标列表的列表，即

```
[[[0, 0], [0, 1], [0, 2]],
...
[[0, 0], [1, 1], [2, 2]],
... 
```

FWTW，我正在为一个学校项目用 Javascript/ThreeJS 制作一个 3D tictactoe 游戏，这种方法在 4x4x4 网格上运行良好。

# php - 返回失败，期望参数作为资源？

> ID：13300932
> 
> 赞同：0
> 
> 时间：2012-11-09T01:41:30.150
> 
> 标签：php

```
 function get_total_urls(){
    $total = mysql_query("SELECT COUNT('url_key' FROM 'urls')");

    $url_total = mysql_result($total, 0);
    echo $url_total;
  } 
```

返回错误：

```
Warning: mysql_num_rows() expects parameter 1 to be resource 
```

我一直在浏览以查找原因，大多数人由于缺少 mysql_query 而得到它，但我正在使用它。

有什么想法我哪里出错了吗？我知道数据库信息是正确的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:09:06.320

试试这个

```
function get_total_urls(){
    $total = mysql_query("SELECT COUNT(`url_key`) FROM `urls` ") ;

    $url_total = mysql_num_rows($total);
    echo $url_total;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:44:33.380

您的查询失败。因此，`$total`正在接收`false`而不是*MySQL 资源*。因此错误。

这是因为您使用的是单引号而不是反引号（或什么都没有）以及`COUNT()`.

```
SELECT COUNT(`url_key`) FROM `urls`; 
```

**注意：**如有疑问，请直接针对 MySQL（从 CLI 或 PHPMyAdmin）运行查询或使用[`mysql_error()`](http://php.net/manual/en/function.mysql-error.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:45:03.447

您的 SQL 查询无效，PHP 中的正确行应该是：

```
$result = mysql_query("SELECT COUNT(url_key) FROM urls"); 
```

# key - Aptana - 添加作者信息和其他信息的快捷键

> ID：13300933
> 
> 赞同：1
> 
> 时间：2012-11-09T01:41:48.293
> 
> 标签：key, aptana, shortcut

有谁知道在模块页面中添加信息的快捷键是什么，例如版权信息，作者信息等。有一天，我不小心按下了某个键，然后出现了。但现在我想不通它是怎么来的。

# java - Android游戏中的口吃（垃圾收集？）

> ID：13300939
> 
> 赞同：2
> 
> 时间：2012-11-09T01:42:32.907
> 
> 标签：java, android

为了优化我的游戏，我让它基于网格。物体位于方格中。因此，为了进行渲染，我收集了相机可见区域中的所有对象，并将它们逐层放入列表中：

```
public ArrayList<Entity> queryRect(OBB2D rect)
{
    neighbourQueryObjs.clear();
    ArrayList<Region> reg = determineNeighbourRegions(rect);
    for(int i = 0; i < Entity.MAX_LAYERS; ++i)
    {
        for(Region r : reg)
        {
            for(Entity e : r.getStatic(i))
            {
                if(!neighbourQueryObjs.contains(e) && e.getRect().overlaps(rect))
                {
                    neighbourQueryObjs.add(e);
                }
            }

            for(Entity e : r.getDynamic(i))
            {
                if(!neighbourQueryObjs.contains(e) && e.getRect().overlaps(rect))
                {
                    neighbourQueryObjs.add(e);
                }
            }
        }
    }

    return neighbourQueryObjs;

} 
```

这很好用。游戏速度非常快。我称这个evey frame 问题是每1 或2 秒左右，游戏就会冻结大约2-300 毫秒。

我怀疑这是垃圾收集。会是这样吗？

有没有办法我可以预先分配这些东西，所以它永远不必使用 GC？我不介意浪费内存，内存没问题。

这是我的游戏循环，可能是这样：

```
public void run() {
        Canvas canvas;

        long beginTime;     // the time when the cycle begun
        long timeDiff;      // the time it took for the cycle to execute
        int sleepTime;      // ms to sleep (<0 if we're behind)
        int framesSkipped;  // number of frames being skipped 

        sleepTime = 0;

        while (running) 
        {
            canvas = null;
            // try locking the canvas for exclusive pixel editing
            // in the surface
            try 
            {

                // we have to make sure that the surface has been created
                // if not we wait until it gets created
                if (!holder.getSurface ().isValid())
                    continue;
                canvas = this.holder.lockCanvas();
            synchronized (holder) 
            {
                    beginTime = System.currentTimeMillis();
                    framesSkipped = 0;  // resetting the frames skipped
                    // update game state
                    update();
                    // render state to the screen
                    // draws the canvas on the panel
                    display(canvas);
                    // calculate how long did the cycle take
                    timeDiff = System.currentTimeMillis() - beginTime;
                    // calculate sleep time
                    sleepTime = (int)(FRAME_PERIOD - timeDiff);

                    if (sleepTime > 0) 
                    {
                        // if sleepTime > 0 we're OK
                        try 
                        {
                            // send the thread to sleep for a short period
                            // very useful for battery saving
                            Thread.sleep(sleepTime);
                        } catch (InterruptedException e) {}
                    }

                    while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) 
                    {
                        // we need to catch up
                        // update without rendering
                        update();
                        // add frame period to check if in next frame
                        sleepTime += FRAME_PERIOD;
                        framesSkipped++;
                    }
                }
            } 
            finally 
            {
                // in case of an exception the surface is not left in
                // an inconsistent state
                if (canvas != null) 
                {
                    holder.unlockCanvasAndPost(canvas);
                }
            }   // end finally
        }
    }
    protected void onDrawTransformed(GraphicsContext g)
    {   
        OBB2D view = g.getCamera().getCamRect(getWidth(), getHeight());

        ArrayList<Entity> ents = world.queryRect(view);
        for(Entity e : ents)
        {
            e.draw(g);
        }
        //city.draw(g);
        //vehicle.draw(g);
    } 
```

我能做些什么来阻止口吃？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:16:14.907

在你的`public ArrayList<Entity> queryRect(OBB2D rect)`你不断调用`neighbourQueryObjs.clear();`and `neighbourQueryObjs.add(e);`，它分配和释放内存。

要确定这是否真的是问题所在，您可以临时注释掉`clear()/add()`部分并返回始终相同（预先计算？）`neighbourQueryObjs`并查看口吃是否消失。类似的东西：

```
if( neighbourQueryObjs.length() == 0 ) {
    // calculate the neighbourQueryObjs
}
return neighbourQueryObjs; 
```

# c# - 如何使 VS2010 当前是否正在调试更可见

> ID：13300943
> 
> 赞同：2
> 
> 时间：2012-11-09T01:43:03.027
> 
> 标签：c#, asp.net-mvc, visual-studio-2010

我希望能够切换一个选项，或者安装一个插件，这将使我更清楚 VS2010 当前是否正在调试应用程序。我在一个 MVC4 站点上工作，当我在 localhost 页面、文档和 VS 之间切换时，我忘记了 VS 是否真的在运行任何东西，所以我总是`SHIFT+F5`在开始编辑我的代码之前进行混搭，只是为了确保它已经完成运行。

它在标题栏中显示“（正在运行）”，但这不像屏幕底部的彩色圆圈那样可见，ReSharper 样式。

就目前而言，我刚刚设置了即时窗口以垂直分割我的屏幕，以便我可以轻松分辨。不过希望有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:23:08.160

我认为您当前的解决方案还可以。我通常只看调试工具栏（我唯一可见的工具栏，可能是为了这个目的）

a）告诉我我在调试（不调试时不可见）和
b）它的播放选项灰显

![在此处输入图像描述](../Images/95c69c3d7217ba34fad4142a384de14c.png)

# mysql - 如何将 1 个表与另外 2 个表连接

> ID：13300952
> 
> 赞同：1
> 
> 时间：2012-11-09T01:43:48.463
> 
> 标签：mysql

我有三个表：`t1`, `t2`, `t3`。每个都有`ID`和`name`列。在`t2`, 和`t3`中，添加后插入字段名称`www.`。我需要做的是：从中选择所有`t1`不在`t2`or中的记录`t3`。

`t1`我可以从and中检索所需的记录，然后对and`t2`进行另一个类似的查询。我需要做的是在一份声明中做到这一点。`t1``t3`

以下语句用于检索 in`t2`但不在 in的名称`t1`：

```
select t1.name
from db.t1
LEFT JOIN db.t2 ON 
t2.name = concat('www.',t1.name) 
WHERE t2.name IS NULL; 
```

从 t1 和 t3 检索记录也进行了类似的操作。如何在一个声明中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:46:13.060

尝试使用`UNION`

```
select  t1.name
from    db.t1
        LEFT JOIN 
        (
            SELECT name FROM t2
            UNION 
            SELECT name FROM t3
        )   t ON t.name = concat('www.',t1.name) 
WHERE t2.name IS NULL; 
```

或使用`LEFT JOIN`（*仍然*）

```
select  t1.name
from    db.t1
        LEFT JOIN db.t2 
            ON  t2.name = concat('www.',t1.name) 
        LEFT JOIN db.t3 
            ON  t3.name = concat('www.',t1.name) 
WHERE t2.name IS NULL AND 
        t3.name IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:46:22.123

只需添加另一个联接

```
select t1.name
from db.t1
LEFT JOIN db.t2 ON 
t2.name = concat('www.',t1.name) 
LEFT JOIN db.t3 ON 
t3.name = concat('www.',t1.name) 
WHERE t2.name IS NULL and t3.name IS NULL; 
```

# php - php中的json数组解析

> ID：13300953
> 
> 赞同：1
> 
> 时间：2012-11-09T01:44:01.343
> 
> 标签：php, json

> **可能重复：**
> [JSON 可以以 [?](https://stackoverflow.com/questions/5034444/can-a-json-start-with)

这是我的问题的缩写版本。
我的`json`输出有逗号分隔的组，我怎样才能使它工作？

```
$json = '{"foo": "12345"}, {"foo": "6789"}, {"bar": "001100"}';
$obj = json_decode($json);
print $obj[0]->{'foo'}; 
```

目前它给了我一个错误`Notice: Trying to get property of non-object`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T01:46:14.027

将您的列表包装到 javascript 数组中：

```
$json = '{"foo": "12345"}, {"foo": "6789"}, {"bar": "001100"}';
$json = '[' . $json . ']';
$obj = json_decode($json);
print $obj[0]->{'foo'}; 
```

# google-apps-script - 为 http get 请求提供键值对

> ID：13300957
> 
> 赞同：0
> 
> 时间：2012-11-09T01:44:37.383
> 
> 标签：google-apps-script

我敢肯定有一个简单的答案，但谷歌脚本文档目前有点缺乏。无论如何，这里有一个问题。我有一个简单的键值映射：

```
var params = {var1: "value1", var2:"value2"}; 
```

现在我想通过 http 请求发送该数据。如果我使用 POST，那么一切都很容易，我可以提供有效负载作为选项，它会为我很好地编码：

```
UrlFetchApp.fetch(url, {method: "post", payload: params}); 
```

但是我怎样才能用 GET 请求做同样的事情呢？

在 jQuery 中，我会使用[jQuery.param](http://api.jquery.com/jQuery.param/)并将其连接到 url 上。Google Script 中有辅助方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:36:06.903

怎么样：

```
var params = {'a':1, 'speciöl':'%'};
var query = [];
for(var key in params) {
  if(Object.prototype.hasOwnProperty.call(params,key)) {
    query.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key].toString()));
  }
}
var url = "http://bla" + "?" + query.join("&"); 
```

空值不被过滤，序列化很浅。

# ruby-on-rails - 当 CanCan 可以与 access_by 一起正常工作时，它没有授权控制器操作

> ID：13300960
> 
> 赞同：0
> 
> 时间：2012-11-09T01:45:18.510
> 
> 标签：ruby-on-rails, cancan

在过去的几天里，我一直在与 CanCan 作斗争，需要一些帮助。我的用户应该能够访问他们或他们的团队成员创建的联系人。我为此设置了一个功能，它适用于收集数据（CanCan 将索引限制为只能通过“accessable_by”查看的联系人），但是当您单击联系人时，CanCan 会引发“未授权”错误。

我查看了 Contacts 表本身，可以验证 current_user 与我单击的联系人具有相同的 team_id，所以它似乎应该工作，但它没有。

感谢您的任何帮助，您可以提供。

这是ability.rb文件：

```
 class Ability
    include CanCan::Ability

    def initialize(user)
        # Define abilities for the passed in user here. For example:
        #

        user ||= User.new # guest user (not logged in)

        case user.role
            when "admin"        then 
              can :manage, :all
            when "team_admin"   then
              can :manage, Team,        :team => { :id => user.team_id }
              can :manage, Upload,      :team => { :id => user.team_id }
              can :manage, Property,    :team => { :id => user.team_id }
              can :manage, Contact,     :team => { :id => user.team_id }
              can :manage, Appointment, :team => { :id => user.team_id }
            when "user"         then                   
              can :manage, Team,        :team => { :id => user.team_id }
              can :manage, Upload,      :team => { :id => user.team_id }
              can :manage, Property,    :team => { :id => user.team_id }
              can :manage, Contact#,    :team => { :id => user.team_id }
              can :manage, Appointment, :team => { :id => user.team_id }
              can :read, User,          :user => { :id => user.id}

              can :create, Team     
              can :create, Upload       
              can :create, Property     
             # can :create, Contact 
              can :create, Appointment

              can :index, Property  
             # can :index, Contact  
        end

            # if user.role == "admin"
            #   can :manage, :all
            # else
            #   can :read, :all
            # end

        #
        # The first argument to `can` is the action you are giving the user permission to do.
        # If you pass :manage it will apply to every action. Other common actions here are
        # :read, :create, :update and :destroy.
        #
        # The second argument is the resource the user can perform the action on. If you pass
        # :all it will apply to every resource. Otherwise pass a Ruby class of the resource.
        #
        # The third argument is an optional hash of conditions to further filter the objects.
        # For example, here the user can only update published articles.
        #
        #   can :update, Article, :published => true
        #
        # See the wiki for details: https://github.com/ryanb/cancan/wiki/Defining-Abilities
    end
end 
```

这是我的联系人控制器中的显示操作：

```
 def show
    @contact = Contact.find(params[:id])
    authorize! :show, @contact

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @contact }
    end

  end 
```

这是用户模型：

```
class User < ActiveRecord::Base

  has_secure_password
  attr_accessible :email, :password, :password_confirmation, :first_name, :last_name, :team_id, :role

  belongs_to :team
  has_many :appointments
  has_many :contacts
  has_many :properties

  ROLES = %w[admin group_admin user disabled]

  validates_uniqueness_of :email

  before_create { generate_token(:auth_token) }

  def send_password_reset
    generate_token(:password_reset_token)
    self.password_reset_sent_at = Time.zone.now
    save!
    UserMailer.password_reset(self).deliver
  end

  def generate_token(column)
    begin
      self[column] = SecureRandom.urlsafe_base64
    end while User.exists?(column => self[column])
  end

end 
```

这是联系模型：

```
class Contact < ActiveRecord::Base
  attr_accessible :address_1, :address_2, :city, :first_name, :last_name, :state, :zip, :team_id
  has_and_belongs_to_many :properties
  belongs_to :user
  belongs_to :team
  has_many :appointments
end 
```

最后，这是团队模型：

```
class Team < ActiveRecord::Base
  attr_accessible :team_name

  has_many :users
  has_many :appointments
  has_many :contacts
  has_many :properties
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:15:31.070

尝试使用这个：

```
when "user"         then  
  ...
  can :manage, Contact, user_id: user.id, team_id: user.team.id
  ...
  can :create, Contact
  ... 
```

# python - Python：在浮动列表中查找最小项目的索引

> ID：13300962
> 
> 赞同：62
> 
> 时间：2012-11-09T01:45:30.733
> 
> 标签：python, list, floating-point, minimum, floating-point-precision

如何在 Python 浮点数列表中找到最小项的索引？如果它们是整数，我会简单地做：

```
minIndex = myList.index(min(myList)) 
```

但是，对于浮点数列表，我会收到以下错误，我认为是因为浮点数相等比较相当不确定。

```
ValueError: 0.13417985135 is not in list 
```

现在，我知道我可以简单地滚动列表并比较每个项目以查看它是否 < (min + 0.0000000000001) 和 > (min - 0.0000000000001)，但这有点混乱。有没有更优雅（最好是内置）的方法来查找浮动列表中最小项目的索引？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-11-09T01:54:18.760

我会使用：

```
val, idx = min((val, idx) for (idx, val) in enumerate(my_list)) 
```

然后`val`将是最小值，`idx`将是它的索引。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-11-09T01:56:19.183

您有效地扫描列表一次以找到最小值，然后再次扫描它以找到索引，您可以一次性完成：

```
from operator import itemgetter
min(enumerate(a), key=itemgetter(1))[0] 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-07-11T11:40:44.580

对 numpy 数组使用 argmin 方法。

```
import numpy as np
np.argmin(myList) 
```

但是，它不是最快的方法：它比我电脑上的 OP 答案慢 3 倍。不过，它可能是最简洁的一种。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-11-09T02:09:56.500

我认为值得在这里放一些时间以获得一些观点。

*使用 python2.7 在 OS-X 10.5.8 上完成的所有计时*

约翰克莱门特的回答：

```
python -m timeit -s 'my_list = range(1000)[::-1]; from operator import itemgetter' 'min(enumerate(my_list),key=itemgetter(1))'
1000 loops, best of 3: 239 usec per loop 
```

大卫沃尔弗的回答：

```
python -m timeit -s 'my_list = range(1000)[::-1]' 'min((val, idx) for (idx, val) in enumerate(my_list))
1000 loops, best of 3: 345 usec per loop 
```

OP的回答：

```
python -m timeit -s 'my_list = range(1000)[::-1]' 'my_list.index(min(my_list))'
10000 loops, best of 3: 96.8 usec per loop 
```

请注意，我故意将最小的项目放在列表的最后，以使其`.index`尽可能慢。有趣的是，看看迭代一次的答案将与我们在这里的迭代两次答案竞争。

当然，**速度并不是一切**，而且在大多数情况下，它甚至不值得担心......选择最容易阅读的一个，除非这是您代码中的性能瓶颈（然后在您的典型现实世界中进行分析数据——最好在你的目标机器上）。

# interface-builder - 如何使用 InterfaceBuilder 将一个 TableView 放在 UIView 中？

> ID：13300963
> 
> 赞同：1
> 
> 时间：2012-11-09T01:45:33.750
> 
> 标签：interface-builder

![在此处输入图像描述](../Images/3870487f8a1e1061b35be4330c0187a5.png)

我想换一个 UIView 有子表视图如下，如何用 IB 设置？

![在此处输入图像描述](../Images/7fb33591c25123141fbabdbe293494b6.png)

# java - 处理空值

> ID：13300965
> 
> 赞同：0
> 
> 时间：2012-11-09T01:45:36.320
> 
> 标签：java, google-app-engine, objectify

我正在尝试使用 Objectify 实现一个队列：

```
void addQueue(String bucket, String value){
    Long next = ofy().load().type(OfyQueue.class)
            .order("-id").first().get().getId(); 
    OfyQueue q = new OfyQueue(bucket, value, next);
    ofy().save().entity(q).now();
}
void removeQueue(String bucket, String value){
    OfyQueue q = ofy().load().type(OfyQueue.class)
            .filter("value", value).order("-id").first().get();
    ofy().delete().entity(q);
} 
```

这段代码有问题：

*   `next`可能为空？所以当我创建一个新的`OfyQueue`它会传递一个空值
*   在 removeQuery 方法中， q 也可能为 null，我是否需要显式测试 q 是否为 null 或 ofy().delete().entity 将忽略传递给它的 null 值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:56:50.170

假设 QfyQueue.getId() 返回带有 @Id 注释的字段，它永远不会在 addQueue() 方法中返回 null。但是，如果没有匹配条件的元素，first().get() 将返回 null。如果您想要抛出异常，则可以调用 safeGet()。

在 removeQueue() 中，您必须显式检查 null 'q'。将 null 传递给 delete 方法将产生 NPE。

# architecture - 可扩展的预订系统架构 - 严重缺陷

> ID：13300966
> 
> 赞同：0
> 
> 时间：2012-11-09T01:45:37.223
> 
> 标签：architecture, scalability, high-availability, logistics

你们对现代可扩展预订系统的工作方式有任何经验吗？例如机场或运输机构？

我们刚刚发现客户的预订系统存在严重缺陷。他们为每个搜索旅行连接的用户保留座位。这意味着如果运输能力是例如 200 并且有 200 人搜索相同的行程，所有这些人都得到了预订（超时例如 5 分钟），所以如果有营销活动并且〜成千上万的人访问该网站，他们实际上看不到大多数搜索的行程因为其他用户已经“保留”了。这是不可扩展的。

我不敢相信它会以这种方式工作，但那是真正的应用程序架构。您将如何理想地处理预订情况？

更复杂的是，从“保留”座位的数量计算价格，因此每个用户的价格都不同（价格随着座位预订的变化而变化）。

当然，我们会尝试撕掉那个预先预订的步骤，但是有些人会在预订前的最后一步被拒绝，所以这将是不利的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:31:37.070

您的客户希望销售尽可能多的座位，对吗？然后他必须明白，如果某些用户不走运（不够快），他们可能会收到（礼貌的）错误消息。

* * *

当有人点击“预订”时，我会预订座位。然后保留该座位，直到用户结帐或 X 分钟过去（因为它是基于 Web 的应用程序）。

如果从搜索到单击“保留”按钮期间保留了所有空闲座位，则仅显示错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:15:42.783

搜索完成后无需立即进行预订。

*   在搜索中显示所有已开放预订的行程。
*   在客户实际完成预订时预订座位。

您可以在座位快满时发出警报，以便安排另一个航班来满足需求。

你提到的预先预订听起来像是一个过度设计的系统。它也容易受到拒绝服务攻击，自动机器人可以预先预订座位。

# ios - 使用自定义导航栏 tintColor 保留 UIBarButtonItem 蓝色“完成”色调

> ID：13300975
> 
> 赞同：1
> 
> 时间：2012-11-09T01:46:46.690
> 
> 标签：ios, uinavigationbar, uibarbuttonitem

如here和其他地方所述：[编辑/完成按钮，更改完成按钮背景颜色](https://stackoverflow.com/questions/5673722/edit-done-button-change-done-button-background-color)

如果您自定义您`navigationBar`using的色调，您将失去按钮`navigationBar.tintColor`的默认自定义蓝色外观。`UIBarButtonItemStyleDone`我需要一个保留此自定义蓝色外观的“下一步”按钮，但需要自定义为我的`navigationBar`.

如此处所述：[https ://stackoverflow.com/a/4704198/675943](https://stackoverflow.com/a/4704198/675943)

如果您手动设置它的 RGB，`UIBarButtonItem`它看起来与系统默认值不同。

有什么方法可以让我保留系统默认的“下一步”按钮蓝色样式外观和有色导航栏？如上面链接中所述设置`tintColor`为`nil`不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:09:09.607

一种解决方案是，您可以使用自定义视图创建条形按钮项

*   (id)initWithCustomView:(UIView *)customView

将 UIButton 作为自定义视图传递。将 targrt & action 设置为 UIButton 和图像，看起来像 UIBarButtonItemStyleDone 的默认蓝色外观。

# c++ - C ++传递对字符串本身的引用，不会编译

> ID：13300976
> 
> 赞同：0
> 
> 时间：2012-11-09T01:46:49.707
> 
> 标签：c++, reference

我正在使用 Xcode，它在传递对字符串对象本身的引用时拒绝编译。

`(string &text, string remove)`

没有`&`它编译。是我的代码错误还是项目文件有问题？

这是编译器错误：

```
Undefined symbols for architecture i386:
"removeLetters3(std::string, std::string)", referenced from:
  Main() in narcissism.o
 ld: symbol(s) not found for architecture i386
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

代码：

```
string removeLetters3(string &text, string remove)
{
for (int i = 0; i < remove.length(); i++)
{
    int pos = 0;

    while ((pos = text.find(remove[i], pos)) != string :: npos)
    {
        text.replace(pos, 1, "");
    }
}
return "";
} 
```

这是函数的调用方式：

```
string text;
string rletter;
removeLetters3(text, rletter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:51:42.347

您的代码没有任何问题，但从您的错误来看，我认为调用者看到的声明是这样的：

```
string removeLetters3(string text, string remove); 
```

虽然您的实现读取

```
string removeLetters3(string &text, string remove) { 
```

因此，当您的链接器试图找到第一个的实现时，它会失败，因为没有这样的实现。

错误证明了这一点：

```
Undefined symbols for architecture i386:
"removeLetters3(std::string, std::string)", referenced from:
  Main() in narcissism.o 
```

注意签名。它**不是**说：

```
Undefined symbols for architecture i386:
"removeLetters3(std::string&, std::string)", referenced from:
  Main() in narcissism.o 
```

# spring - 数据未保留在 Spring 会话 bean 中

> ID：13300977
> 
> 赞同：3
> 
> 时间：2012-11-09T01:46:56.863
> 
> 标签：spring, session, javabeans

我在 Spring 3.1 中创建了一个简单的会话范围 bean。它应该让我可以轻松访问当前登录用户的公司。

```
@Component
@Scope(value = "session", proxyMode = ScopedProxyMode.TARGET_CLASS)
public class SessionData {

    private Company company;

    public Company getCompany() {
        return company;
    }

    public void setCompany(Company company) {
        this.company = company;
    }
} 
```

我在自定义身份验证提供程序的 authenticate() 方法中使用 Company 填充此 bean。

```
@Component(value = "authenticationProvider")
public class ProduxAuthenticationProvider implements AuthenticationProvider {

    private SessionData sessionData;
    private CompanyService companyService;

    @Autowired
    public ProduxAuthenticationProvider(SessionData sessionData, CompanyService companyService) {
        this.sessionData = sessionData;
        this.companyService = companyService;
    }

    @Override
    public Authentication authenticate(Authentication authentication) throws AuthenticationException {

        // Authentication logic (token creation) removed for readability....

        Company company = companyService.findByUserProfile(profile);

        // Set company on session bean
        sessionData.setCompany(company);

        return token;
    }
} 
```

然后我尝试访问 ManagementHomeController 中的 company 字段，该字段在身份验证成功完成后运行。

```
@Controller
@RequestMapping(value = "/manage/home")
public class ManagementHomeController {

    private CourseService userService;
    private CompanyService companyService;
    private SessionData sessionData;

    @Autowired
    public ManagementHomeController(CourseService userService, CompanyService companyService, SessionData sessionData) {
        this.userService = userService;
        this.companyService = companyService;
        this.sessionData = sessionData;
    }

    @RequestMapping(method = RequestMethod.GET)
    public String get(Model model) {
        model.addAttribute("mainContent", "content/managementHome");

        // sessionData.company is null here! Object id is same as in ProduxAuthenticationProvider

        return "main";
    }
} 
```

不知何故，在 ManagementHomeController 中，SessionData 的公司字段为空，但它是同一个对象。我可以看到，因为 sessionData 的对象 ID 在 ProduxAuthenticationProvider 和 ManagementHomeController 中是相同的。

知道为什么 SessionData 在此过程中失去了它的公司吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:05:44.143

不完全确定这是否可行，但据我了解，因为您将会话范围的 bean 注入到过滤器中，该过滤器在调用 Spring Dispatcher servlet 之前调用，范围代理正常工作所需的某些请求属性可能尚未设置正确。

解决方法是将此逻辑移动到 Spring Interceptor 或在 web.xml中注册[RequestContextListener](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/request/RequestContextListener.html)

# iphone - 以编程方式向 cocos2d 游戏添加进度条

> ID：13300983
> 
> 赞同：1
> 
> 时间：2012-11-09T01:48:09.310
> 
> 标签：iphone, objective-c, cocos2d-iphone

我正在使用 cocos2d 制作游戏，并希望实现一个进度条来代表我的玩家的健康状况。我已经参考[了如何以编程方式创建进度](https://stackoverflow.com/questions/3617093/how-to-create-progressbar-programatically)条，但 CCLayer 没有 .view 属性。有人可以指出我正确的方向或帮助我吗？

谢谢你，乔伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:22:21.813

获取以下图片：http: [//i.stack.imgur.com/O5DRf.png](http://i.stack.imgur.com/O5DRf.png)。它是 2x30。我想制作一个 15 像素高的条形图。通常，尺寸为 1x15，但由于我假设您使用的是视网膜显示器，因此我们必须将这些尺寸加倍为 2x30。

用它创建一个 CCSprite，并将锚点设置为 ccp(0.0,0.5)：

```
CCSprite *bar = [CCSprite spriteWithFile:@"MyBar.png"];   // Create it
bar.position = ccp(240,160);                                // Position it
bar.anchorPoint = ccp(0.0,0.5);                           // Anchor point 
```

现在的问题是，血条有多长（最大）？假设它有 200 像素长。因此，100% = 200 像素长。让我们将其设置为 200 像素长：

```
bar.scaleX = 200;    // The bar is 200 pixels long now 
```

那么，50%的健康呢？那么，很明显，该属性`.scaleX`应该是 100。

```
bar.scaleX = 100;    // The bar is 100 pixels long now (50% health) 
```

这几乎是您快速创建一个简单条所需的全部内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:29:23.413

cocos2d 中有一个类“CCProgressTimer”可以做到这一点。希望它会有所帮助。

```
CCProgressTimer *lifeBar=[CCProgressTimer progressWithFile:@"lifeBar.png"];
lifeBar.type=kCCProgressTimerTypeHorizontalBarLR;
lifeBar.position=ccp(384,900);
lifeBar.percentage=100;
[self lifeBar z:20];
[lifeBar runAction:[CCProgressFromTo actionWithDuration:5.0 from:100.0 to:0.0]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:21:33.660

在 cocos2d 中，您可以使用`[[CCDirector sharedDirector]openGLView]`而不是 .view

您可以将您的progressView 添加到它。这个 openGLView 的坐标系也是这样的，它的原点在左上角。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T21:31:23.013

我最终制作了自己的进度条精灵，就像 Omega 推荐的那样。我为矩形“健康栏”轮廓创建了一个精灵，另一个表示一个微小的健康段，我根据需要在其中添加和删除它们以表示正确的健康。

```
CGPoint position = ccp(150, 450);
CCTexture2D *texture = [[CCTexture2D alloc] initWithImage:[UIImage imageNamed:@"healthSegment.png"]];

// Begin at 4 because health segments have tags 4-13
for(int i = 4; i < health + 4; i++)
{
    CCSprite *healthBar = [CCSprite spriteWithTexture:texture];
    [healthBar setPosition:position];
    [self addChild:healthBar z:5 tag:i];

    position.x += 10;
} 
```

# python - numpy.next 递减而不是递增

> ID：13300984
> 
> 赞同：8
> 
> 时间：2012-11-09T01:48:18.297
> 
> 标签：python, numpy, posix, c99

我遇到了一个奇怪的案子。我尝试了 Pyson 在此处发布的三种解决方案中的任何一种：[Increment a python floating point value by the minimum possible amount](https://stackoverflow.com/questions/6063755/increment-a-python-floating-point-value-by-the-smallest-possible-amount)。当我落在这个浮点上时，所有三种解决方案都显示出一种奇怪的行为：1.15898324042702949299155079643242061138153076171875。

假设我有以下代码：

```
import numpy as np
from __future__ import division

a = 1.15898324042702949299155079643242061138153076171875
b = 0
b = np.nextafter(a,1)
print a, b 
```

由于某种原因，它不是`b`以最小的可能递增，而是递减。这是为什么？

以下是我从玩弄中得到的一些快速结果：

```
In [12]: a = 1.15898324042702949299155079643242061138153076171875

In [13]: a
Out[13]: 1.1589832404270295

In [14]: numpy.nextafter(a,1)
Out[14]: 1.1589832404270293

In [15]: numpy.nextafter(a,-1)
Out[15]: 1.1589832404270293 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T02:08:14.603

从文档（强调我的）：

```
nextafter(x1, x2[, out])

Return the next representable floating-point value after x1 **in the direction
of x2 element-wise**. 
```

第二个参数不是 +/-1 给出的方向，它是指向的值。

```
In [12]: a = 1.15898324042702949299155079643242061138153076171875

In [13]: a
Out[13]: 1.1589832404270295

In [14]: numpy.nextafter(a, 0)
Out[14]: 1.1589832404270293

In [15]: numpy.nextafter(a, 1)
Out[15]: 1.1589832404270293

In [16]: numpy.nextafter(a, 1.16)
Out[16]: 1.1589832404270297

In [17]: numpy.nextafter(a, 2)
Out[17]: 1.1589832404270297 
```

# php - 如果已经存在 php 代码，则自动重命名文件名

> ID：13300996
> 
> 赞同：-1
> 
> 时间：2012-11-09T01:50:02.113
> 
> 标签：php

**上传.php**

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
Choose a file: <input name="uploadedfile" type="file" /><br />
Choose a file1: <input name="uploadedfile1" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

![在此处输入图像描述](../Images/cbabc1c0417dcdb603258149ed74c669.png)

*upload.php 表单的图像*

**上传者.php**

```
mysql_select_db("test");

$target_path = "uploads/" . basename( $_FILES['uploadedfile']['name']);
$currentfile = $_FILES['uploadedfile']['name']; 
$target_path1 = "upload1/" . basename( $_FILES['uploadedfile1']['name']);
$currentfile1 = basename( $_FILES['uploadedfile1']['name']); 

$dbfiles = mysql_query("SELECT * FROM new WHERE amount='$currentfile' || amount='$currentfile1'");
if(mysql_num_rows($dbfiles) > 0 )
{ 

//what code should i place here??    

}
else
{
        if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path))
        {
                echo "file1: ".$_FILES['uploadedfile']['name']."<br>";
                $file1 = basename( $_FILES['uploadedfile']['name']);
                mysql_query("insert into new (amount) values('$file1')");   
        }
        if(move_uploaded_file($_FILES['uploadedfile1']['tmp_name'], $target_path1))
        {
                echo "file2: ".basename( $_FILES['uploadedfile1']['name']);
                $file2 = basename( $_FILES['uploadedfile1']['name']);
                mysql_query("insert into new (amount) values('$file2')");   
        }
} 
```

我应该在这个 if 条件中放置什么代码，`if(mysql_num_rows($dbfiles) > 0 ){ }`以便如果上传的文件的文件名已经存在，该文件应该自动更改其文件名，例如存在 abc.jpg，然后有人上传一个新文件但名称和类型与abc.jpg..相同，则新文件必须为abc_1.jpg...，如果有人上传与abc.jpg相同，则名称应为abc_2.jpg..abc_1.jpg必须是要保存到 mysql 的名称，abc_1.jpg 必须是要保存到准备好的文件夹的文件.. thx

我在这里得到了想法和代码[http://www.tizag.com/phpT/fileupload.php?MAX_FILE_SIZE=100000&uploadedfile=NeroMediaHub._63C8A7B0BBE5459F9AC436392B2FF50D.exe](http://www.tizag.com/phpT/fileupload.php?MAX_FILE_SIZE=100000&uploadedfile=NeroMediaHub._63C8A7B0BBE5459F9AC436392B2FF50D.exe)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:01:36.597

尝试这个

```
<?php
$target_path = "uploads/" . basename( $_FILES['uploadedfile']['name']); 
$target_path1 = "uploads/" . basename( $_FILES['uploadedfile1']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
}
else{
    echo "There was an error uploading the file, please try again!";
}

if(move_uploaded_file($_FILES['uploadedfile1']['tmp_name'], $target_path1)) {
    echo "The file ".  basename( $_FILES['uploadedfile1']['name']). 
    " has been uploaded";
}
else{
    echo "There was an error uploading the file1, please try again!";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:02:19.347

用这样的东西测试......

```
<?php
    $target_path = "uploads/" . basename( $_FILES['uploadedfile']['name']);
    $target_path1 = "uploads/" . basename( $_FILES['uploadedfile1']['name']);
    $file_saved = false;

    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path))
    {
        echo "The file ".  basename( $_FILES['uploadedfile']['name'])." has been uploaded";
        $file_saved = true;
    }
    if(move_uploaded_file($_FILES['uploadedfile1']['tmp_name'], $target_path1))
    {
        echo "The file ".  basename( $_FILES['uploadedfile1']['name']). 
" has been uploaded";
        $file_saved = true;
    }
    if (!$file_saved)
    {
        echo "There was an error uploading the file, please try again!";
    }
?> 
```

# mysql - 为什么 Eclipse 建议将“对象”作为数据类型“文本”的默认映射类型？

> ID：13300997
> 
> 赞同：1
> 
> 时间：2012-11-09T01:50:02.520
> 
> 标签：mysql, eclipse, jakarta-ee, dali

当使用 Eclipse（用于 Java EE 开发人员的 Juno 4.2）从表中生成 JPA 实体时，它建议`Object`将属性设置为默认映射类型为`Text`.
这很烦人，因为我必须将它们全部设置为`String`手动。
有人遇到过这种问题并且知道该怎么做吗？这是一个错误吗？Eclipse Indigo 的行为并非如此。

这是`/runtime/vendors/MySql_5.1/MySql_5.1.xmi`来自`org.eclipse.datatools.enablement.mysql.dbdefinition_1.0.4.v201109022331.jar`：（但是根据这个文件`Text`应该映射到`String`这个必须是错误的文件 - 但是如何找出正确的文件？）

```
<?xml version="1.0" encoding="ASCII"?>
<DBDefinition:DatabaseVendorDefinition xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:DBDefinition="http:///org/eclipse/datatools/modelbase/dbdefinition/dbdefinition.ecore" vendor="MySql" version="5.1" maximumIdentifierLength="64" joinSupported="true" tablespacesSupported="false" maximumCommentLength="60" schemaSupported="false" aliasSupported="true" SQLStatementSupported="true">
  <predefinedDataTypeDefinitions xmi:id="BIT_1" keyConstraintSupported="true"
maximumValue="1" minimumValue="0" primitiveType="SMALLINT" jdbcEnumType="-6"
javaClassName="byte">
    <defaultValueTypes>0</defaultValueTypes>
    <name>BIT</name>
    <name>BOOL</name>
    <name>BOOLEAN</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="TINYINT_UNSIGNED"
keyConstraintSupported="true" maximumValue="255" minimumValue="0"
primitiveType="SMALLINT" jdbcEnumType="-6" javaClassName="byte">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>TINYINT UNSIGNED</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="SMALLINT_UNSIGNED"
keyConstraintSupported="true" maximumValue="65535" minimumValue="0"
primitiveType="SMALLINT" jdbcEnumType="5" javaClassName="int">
    <defaultValueTypes>0</defaultValueTypes>
    <name>SMALLINT UNSIGNED</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="MEDIUMINT_UNSIGNED"
keyConstraintSupported="true" maximumValue="16777215" minimumValue="0"
primitiveType="SMALLINT" jdbcEnumType="4" javaClassName="int">
    <defaultValueTypes>0</defaultValueTypes>
    <name>MEDIUMINT UNSIGNED</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="INTEGER_UNSIGNED"
keyConstraintSupported="true" maximumValue="4294967295" minimumValue="0"
primitiveType="INTEGER" jdbcEnumType="4" javaClassName="int">
    <defaultValueTypes>0</defaultValueTypes>
    <name>INTEGER UNSIGNED</name>
    <name>INT UNSIGNED</name>    
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BIGINT_UNSIGNED"
keyConstraintSupported="true" identitySupported="true" primitiveType="BIGINT"
jdbcEnumType="-5" javaClassName="java.math.BigInteger">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>BIGINT UNSIGNED</name>
    <name>SERIAL</name>    
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="REAL_UNSIGNED"
keyConstraintSupported="true" primitiveType="REAL" jdbcEnumType="7"
javaClassName="float">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>REAL UNSIGNED</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="DOUBLE_UNSIGNED_PRECISION"
keyConstraintSupported="true" primitiveType="DOUBLE_PRECISION" jdbcEnumType="8"
javaClassName="double">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>DOUBLE UNSIGNED</name>
    <name>DOUBLE UNSIGNED PRECISION</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="FLOAT_UNSIGNED"
keyConstraintSupported="true" primitiveType="FLOAT" jdbcEnumType="6"
javaClassName="float">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>FLOAT UNSIGNED</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="DECIMAL_UNSIGNED"
scaleSupported="true" precisionSupported="true" maximumPrecision="64"
keyConstraintSupported="true" primitiveType="DECIMAL" jdbcEnumType="3"
javaClassName="java.math.BigDecimal">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>DECIMAL UNSIGNED</name>
    <name>DEC UNSIGNED</name>
  </predefinedDataTypeDefinitions>
    <predefinedDataTypeDefinitions xmi:id="SMALLINT_2" keyConstraintSupported="true" maximumValue="127" minimumValue="-128" primitiveType="SMALLINT" jdbcEnumType="-6" javaClassName="byte">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>TINYINT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="SMALLINT_1" keyConstraintSupported="true" maximumValue="32767" minimumValue="-32768" primitiveType="SMALLINT" jdbcEnumType="5" javaClassName="short">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>SMALLINT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="INTEGER_2" keyConstraintSupported="true" maximumValue="8388607" minimumValue="-8388608" primitiveType="INTEGER" jdbcEnumType="4" javaClassName="int">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>MEDIUMINT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="INTEGER_1" keyConstraintSupported="true" identitySupported="true" maximumValue="2147483647" minimumValue="-2147483648" primitiveType="INTEGER" jdbcEnumType="4" javaClassName="int">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>INT</name>
    <name>INTEGER</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BIGINT_1" keyConstraintSupported="true" identitySupported="true" primitiveType="BIGINT" jdbcEnumType="-5" javaClassName="java.math.BigInteger">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>BIGINT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="REAL_1" keyConstraintSupported="true" primitiveType="REAL" jdbcEnumType="7" javaClassName="float">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>REAL</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="DOUBLE_PRECISION_1" keyConstraintSupported="true" primitiveType="DOUBLE_PRECISION" jdbcEnumType="8" javaClassName="double">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>DOUBLE</name>
    <name>DOUBLE PRECISION</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="FLOAT_1" keyConstraintSupported="true" primitiveType="FLOAT" jdbcEnumType="6" javaClassName="float">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>FLOAT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="DECIMAL_1" scaleSupported="true" precisionSupported="true" maximumPrecision="64" keyConstraintSupported="true" primitiveType="DECIMAL" jdbcEnumType="3" javaClassName="java.math.BigDecimal">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>DECIMAL</name>
    <name>DEC</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="NUMERIC_1" scaleSupported="true" precisionSupported="true" maximumPrecision="64" keyConstraintSupported="true" primitiveType="NUMERIC" jdbcEnumType="2" javaClassName="java.math.BigDecimal">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>NUMERIC</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="DATE_1" keyConstraintSupported="true" primitiveType="DATE" jdbcEnumType="91" javaClassName="java.sql.Date">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>DATE</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="TIME_1" keyConstraintSupported="true" primitiveType="TIME" jdbcEnumType="92" javaClassName="java.sql.Time">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>TIME</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="TIMESTAMP_1" keyConstraintSupported="true" primitiveType="TIMESTAMP" jdbcEnumType="93" javaClassName="java.sql.Timestamp">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>TIMESTAMP</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="TIMESTAMP_2" keyConstraintSupported="true" primitiveType="TIMESTAMP" jdbcEnumType="93" javaClassName="java.util.Date">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>DATETIME</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="CHARACTER_1" lengthSupported="true" keyConstraintSupported="true" maximumLength="255" jdbcEnumType="1" javaClassName="java.lang.String">
    <defaultValueTypes>NULL</defaultValueTypes>
    <defaultValueTypes>CURRENT_USER</defaultValueTypes>
    <name>CHAR</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="CHARACTER_VARYING_1" lengthSupported="true" keyConstraintSupported="true" maximumLength="255" primitiveType="CHARACTER_VARYING" jdbcEnumType="12" javaClassName="java.lang.String">
    <defaultValueTypes>NULL</defaultValueTypes>
    <defaultValueTypes>CURRENT_USER</defaultValueTypes>
    <name>VARCHAR</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BINARY_LARGE_OBJECT_1" defaultSupported="false" maximumLength="256" primitiveType="BINARY_LARGE_OBJECT" jdbcEnumType="2004" javaClassName="java.sql.Blob">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>TINYBLOB</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BINARY_LARGE_OBJECT_2" defaultSupported="false" maximumLength="65536" primitiveType="BINARY_LARGE_OBJECT" jdbcEnumType="2004" javaClassName="java.sql.Blob">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>BLOB</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BINARY_LARGE_OBJECT_3" defaultSupported="false" maximumLength="16777216" primitiveType="BINARY_LARGE_OBJECT" jdbcEnumType="2004" javaClassName="java.sql.Blob">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>MEDIUMBLOB</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BINARY_LARGE_OBJECT_4" defaultSupported="false" primitiveType="BINARY_LARGE_OBJECT" jdbcEnumType="2004" javaClassName="java.sql.Blob">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>LONGBLOB</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="CHARACTER_LARGE_OBJECT_1" keyConstraintSupported="true" defaultSupported="false" maximumLength="256" primitiveType="CHARACTER_LARGE_OBJECT" jdbcEnumType="2005" javaClassName="java.lang.String">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>TINYTEXT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="CHARACTER_LARGE_OBJECT_2" keyConstraintSupported="true" defaultSupported="false" maximumLength="65536" primitiveType="CHARACTER_LARGE_OBJECT" jdbcEnumType="2005" javaClassName="java.lang.String">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>TEXT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="CHARACTER_LARGE_OBJECT_3" keyConstraintSupported="true" defaultSupported="false" maximumLength="16777216" primitiveType="CHARACTER_LARGE_OBJECT" jdbcEnumType="2005" javaClassName="java.lang.String">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>MEDIUMTEXT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="CHARACTER_LARGE_OBJECT_4" keyConstraintSupported="true" defaultSupported="false" primitiveType="CHARACTER_LARGE_OBJECT" jdbcEnumType="2005" javaClassName="java.lang.String">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>LONGTEXT</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="ENUM" keyConstraintSupported="false" primitiveType="CHARACTER_VARYING" jdbcEnumType="12" javaClassName="java.lang.String">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>ENUM</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="DATE_2" keyConstraintSupported="true" primitiveType="DATE" jdbcEnumType="91" javaClassName="java.sql.Date">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>YEAR</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BINARY_1" lengthSupported="true" keyConstraintSupported="true" maximumLength="255" lengthUnit="BYTE" primitiveType="BINARY" jdbcEnumType="-2" javaClassName="byte[]">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>BINARY</name>
  </predefinedDataTypeDefinitions>
  <predefinedDataTypeDefinitions xmi:id="BINARY_VARYING_1" lengthSupported="true" keyConstraintSupported="true" maximumLength="255" primitiveType="BINARY_VARYING" lengthUnit="BYTE" jdbcEnumType="-3" javaClassName="byte[]">
    <defaultValueTypes>NULL</defaultValueTypes>
    <name>VARBINARY</name>
  </predefinedDataTypeDefinitions>
  <storedProcedureDefinition/>
  <triggerDefinition/>
  <columnDefinition maximumIdentifierLength="64" identitySupported="true" identityIncrementSupported="true"/>
  <constraintDefinition clusteredPrimaryKeySupported="true" clusteredUniqueConstraintSupported="true" primaryKeyNullable="true" uniqueKeyNullable="true">
    <parentUpdateDRIRuleType>RESTRICT</parentUpdateDRIRuleType>
    <parentUpdateDRIRuleType>CASCADE</parentUpdateDRIRuleType>
    <parentUpdateDRIRuleType>SET_NULL</parentUpdateDRIRuleType>
    <parentUpdateDRIRuleType>NO_ACTION</parentUpdateDRIRuleType>
    <parentDeleteDRIRuleType>RESTRICT</parentDeleteDRIRuleType>
    <parentDeleteDRIRuleType>CASCADE</parentDeleteDRIRuleType>
    <parentDeleteDRIRuleType>SET_NULL</parentDeleteDRIRuleType>
    <parentDeleteDRIRuleType>NO_ACTION</parentDeleteDRIRuleType>
  </constraintDefinition>
  <indexDefinition maximumIdentifierLength="64"/>
  <tableDefinition maximumIdentifierLength="64"/>
  <udtDefinition/>
  <queryDefinition identifierQuoteString="`" hostVariableMarker="@" hostVariableMarkerSupported="true"/>
  <viewDefinition maximumIdentifierLength="64" checkOptionLevelsSupported="true"/>
  <SQLSyntaxDefinition>
    <keywords>ACCESSIBLE</keywords>
    <keywords>ADD</keywords>
    <keywords>ALGORITHM</keywords>
    <keywords>ALL</keywords>
    <keywords>ALTER</keywords>
    <keywords>ANALYZE</keywords>
    <keywords>AND</keywords>
    <keywords>AS</keywords>
    <keywords>ASC</keywords>
    <keywords>ASENSITIVE</keywords>
    <keywords>BEFORE</keywords>
    <keywords>BETWEEN</keywords>
    <keywords>BIGINT</keywords>
    <keywords>BINARY</keywords>
    <keywords>BLOB</keywords>
    <keywords>BOTH</keywords>
    <keywords>BY</keywords>
    <keywords>CALL</keywords>
    <keywords>CASCADE</keywords>
    <keywords>CASE</keywords>
    <keywords>CHANGE</keywords>
    <keywords>CHAR</keywords>
    <keywords>CHARACTER</keywords>
    <keywords>CHECK</keywords>
    <keywords>CHECKSUM</keywords>
    <keywords>COLLATE</keywords>
    <keywords>COLUMN</keywords>
    <keywords>COMMENT</keywords>
    <keywords>CONDITION</keywords>
    <keywords>CONNECTION</keywords>
    <keywords>CONSTRAINT</keywords>
    <keywords>CONTINUE</keywords>
    <keywords>CONVERT</keywords>
    <keywords>CREATE</keywords>
    <keywords>CROSS</keywords>
    <keywords>CURRENT_DATE</keywords>
    <keywords>CURRENT_TIME</keywords>
    <keywords>CURRENT_TIMESTAMP</keywords>
    <keywords>CURRENT_USER</keywords>
    <keywords>CURSOR</keywords>
    <keywords>DATABASE</keywords>
    <keywords>DATABASES</keywords>
    <keywords>DAY_HOUR</keywords>
    <keywords>DAY_MICROSECOND</keywords>
    <keywords>DAY_MINUTE</keywords>
    <keywords>DAY_SECOND</keywords>
    <keywords>DEC</keywords>
    <keywords>DECIMAL</keywords>
    <keywords>DECLARE</keywords>
    <keywords>DEFAULT</keywords>
    <keywords>DEFINER</keywords>
    <keywords>DELAYED</keywords>
    <keywords>DELETE</keywords>
    <keywords>DESC</keywords>
    <keywords>DESCRIBE</keywords>
    <keywords>DETERMINISTIC</keywords>
    <keywords>DISTINCT</keywords>
    <keywords>DISTINCTROW</keywords>
    <keywords>DIV</keywords>
    <keywords>DOUBLE</keywords>
    <keywords>DROP</keywords>
    <keywords>DUAL</keywords>
    <keywords>EACH</keywords>
    <keywords>ELSE</keywords>
    <keywords>ELSEIF</keywords>
    <keywords>ENCLOSED</keywords>
    <keywords>ESCAPED</keywords>
    <keywords>EXISTS</keywords>
    <keywords>EXIT</keywords>
    <keywords>EXPLAIN</keywords>
    <keywords>FALSE</keywords>
    <keywords>FETCH</keywords>
    <keywords>FLOAT</keywords>
    <keywords>FLOAT4</keywords>
    <keywords>FLOAT8</keywords>
    <keywords>FOR</keywords>
    <keywords>FORCE</keywords>
    <keywords>FOREIGN</keywords>
    <keywords>FROM</keywords>
    <keywords>FULLTEXT</keywords>
    <keywords>GOTO</keywords>
    <keywords>GRANT</keywords>
    <keywords>GROUP</keywords>
    <keywords>HAVING</keywords>
    <keywords>HIGH_PRIORITY</keywords>
    <keywords>HOUR_MICROSECOND</keywords>
    <keywords>HOUR_MINUTE</keywords>
    <keywords>HOUR_SECOND</keywords>
    <keywords>IF</keywords>
    <keywords>IGNORE</keywords>
    <keywords>IN</keywords>
    <keywords>INDEX</keywords>
    <keywords>INFILE</keywords>
    <keywords>INNER</keywords>
    <keywords>INOUT</keywords>
    <keywords>INSENSITIVE</keywords>
    <keywords>INSERT</keywords>
    <keywords>INT</keywords>
    <keywords>INT1</keywords>
    <keywords>INT2</keywords>
    <keywords>INT3</keywords>
    <keywords>INT4</keywords>
    <keywords>INT8</keywords>
    <keywords>INTEGER</keywords>
    <keywords>INTERVAL</keywords>
    <keywords>INTO</keywords>
    <keywords>INVOKER</keywords>
    <keywords>IS</keywords>
    <keywords>ITERATE</keywords>
    <keywords>JOIN</keywords>
    <keywords>KEY_BLOCK_SIZE</keywords>
    <keywords>KEY</keywords>
    <keywords>KEYS</keywords>
    <keywords>KILL</keywords>
    <keywords>LABEL</keywords>
    <keywords>LEADING</keywords>
    <keywords>LEAVE</keywords>
    <keywords>LEFT</keywords>
    <keywords>LIKE</keywords>
    <keywords>LIMIT</keywords>
    <keywords>LINEAR</keywords>
    <keywords>LINES</keywords>
    <keywords>LOAD</keywords>
    <keywords>LOCALTIME</keywords>
    <keywords>LOCALTIMESTAMP</keywords>
    <keywords>LOCK</keywords>
    <keywords>LONG</keywords>
    <keywords>LONGBLOB</keywords>
    <keywords>LONGTEXT</keywords>
    <keywords>LOOP</keywords>
    <keywords>LOW_PRIORITY</keywords>
    <keywords>MASTER_SSL_VERIFY_SERVER_CERT</keywords>
    <keywords>MATCH</keywords>
    <keywords>MAX_ROWS</keywords>
    <keywords>MEDIUMBLOB</keywords>
    <keywords>MEDIUMINT</keywords>
    <keywords>MEDIUMTEXT</keywords>
    <keywords>MERGE</keywords>
    <keywords>MIDDLEINT</keywords>
    <keywords>MIN_ROWS</keywords>
    <keywords>MINUTE_MICROSECOND</keywords>
    <keywords>MINUTE_SECOND</keywords>
    <keywords>MOD</keywords>
    <keywords>MODIFIES</keywords>
    <keywords>NATURAL</keywords>
    <keywords>NO_WRITE_TO_BINLOG</keywords>
    <keywords>NOT</keywords>
    <keywords>NULL</keywords>
    <keywords>NUMERIC</keywords>
    <keywords>ON</keywords>
    <keywords>OPTIMIZE</keywords>
    <keywords>OPTION</keywords>
    <keywords>OPTIONALLY</keywords>
    <keywords>OR</keywords>
    <keywords>ORDER</keywords>
    <keywords>OUT</keywords>
    <keywords>OUTER</keywords>
    <keywords>OUTFILE</keywords>
    <keywords>PRECISION</keywords>
    <keywords>PRIMARY</keywords>
    <keywords>PROCEDURE</keywords>
    <keywords>PURGE</keywords>
    <keywords>RANGE</keywords>
    <keywords>READ</keywords>
    <keywords>READ_ONLY</keywords>
    <keywords>READ_WRITE</keywords>
    <keywords>READ</keywords>
    <keywords>READS</keywords>
    <keywords>REAL</keywords>
    <keywords>REFERENCES</keywords>
    <keywords>REGEXP</keywords>
    <keywords>RELEASE</keywords>
    <keywords>RENAME</keywords>
    <keywords>REPEAT</keywords>
    <keywords>REPLACE</keywords>
    <keywords>REQUIRE</keywords>
    <keywords>RESTRICT</keywords>
    <keywords>RETURN</keywords>
    <keywords>REVOKE</keywords>
    <keywords>RIGHT</keywords>
    <keywords>RLIKE</keywords>
    <keywords>ROW_FORMAT</keywords>
    <keywords>SCHEMA</keywords>
    <keywords>SCHEMAS</keywords>
    <keywords>SECOND_MICROSECOND</keywords>
    <keywords>SELECT</keywords>
    <keywords>SENSITIVE</keywords>
    <keywords>SEPARATOR</keywords>
    <keywords>SET</keywords>
    <keywords>SHOW</keywords>
    <keywords>SMALLINT</keywords>
    <keywords>SONAME</keywords>
    <keywords>SPATIAL</keywords>
    <keywords>SPECIFIC</keywords>
    <keywords>SQL</keywords>
    <keywords>SQL_BIG_RESULT</keywords>
    <keywords>SQL_CALC_FOUND_ROWS</keywords>
    <keywords>SQL_SECURITY</keywords>
    <keywords>SQL_SMALL_RESULT</keywords>
    <keywords>SQL</keywords>
    <keywords>SQLEXCEPTION</keywords>
    <keywords>SQLSTATE</keywords>
    <keywords>SQLWARNING</keywords>
    <keywords>SSL</keywords>
    <keywords>STARTING</keywords>
    <keywords>STRAIGHT_JOIN</keywords>
    <keywords>TABLE</keywords>
    <keywords>TEMPTABLE</keywords>
    <keywords>TERMINATED</keywords>
    <keywords>THEN</keywords>
    <keywords>TINYBLOB</keywords>
    <keywords>TINYINT</keywords>
    <keywords>TINYTEXT</keywords>
    <keywords>TO</keywords>
    <keywords>TRAILING</keywords>
    <keywords>TRIGGER</keywords>
    <keywords>TRUE</keywords>
    <keywords>UNDEFINED</keywords>
    <keywords>UNDO</keywords>
    <keywords>UNION</keywords>
    <keywords>UNIQUE</keywords>
    <keywords>UNLOCK</keywords>
    <keywords>UNSIGNED</keywords>
    <keywords>UPDATE</keywords>
    <keywords>UPGRADE</keywords>
    <keywords>USAGE</keywords>
    <keywords>USE</keywords>
    <keywords>USING</keywords>
    <keywords>UTC_DATE</keywords>
    <keywords>UTC_TIME</keywords>
    <keywords>UTC_TIMESTAMP</keywords>
    <keywords>VALUES</keywords>
    <keywords>VARBINARY</keywords>
    <keywords>VARCHAR</keywords>
    <keywords>VARCHARACTER</keywords>
    <keywords>VARYING</keywords>
    <keywords>WHEN</keywords>
    <keywords>WHERE</keywords>
    <keywords>WHILE</keywords>
    <keywords>WITH</keywords>
    <keywords>WRITE</keywords>
    <keywords>XOR</keywords>
    <keywords>YEAR_MONTH</keywords>
    <keywords>ZEROFILL</keywords>
    <operators>:=</operators>
    <operators>||</operators>
    <operators>OR</operators>
    <operators>XOR</operators>
    <operators>&amp;&amp;</operators>
    <operators>AND</operators>
    <operators>NOT</operators>
    <operators>BETWEEN</operators>
    <operators>CASE</operators>
    <operators>WHEN</operators>
    <operators>THEN</operators>
    <operators>ELSE</operators>
    <operators>=</operators>
    <operators>&lt;=></operators>
    <operators>>=</operators>
    <operators>></operators>
    <operators>&lt;=</operators>
    <operators>&lt;</operators>
    <operators>&lt;></operators>
    <operators>!=</operators>
    <operators>IS</operators>
    <operators>LIKE</operators>
    <operators>REGEXP</operators>
    <operators>IN</operators>
    <operators>|</operators>
    <operators>&amp;</operators>
    <operators>&lt;&lt;</operators>
    <operators>>></operators>
    <operators>-</operators>
    <operators>+</operators>
    <operators>*</operators>
    <operators>/</operators>
    <operators>DIV</operators>
    <operators>%</operators>
    <operators>MOD</operators>
    <operators>^</operators>
    <operators>~</operators>
    <operators>!</operators>
    <operators>BINARY</operators>
    <operators>COLLATE</operators>
  </SQLSyntaxDefinition>
</DBDefinition:DatabaseVendorDefinition> 
```

我的 SQL：

```
CREATE DATABASE  IF NOT EXISTS `mydb` /*!40100 DEFAULT CHARACTER SET latin1 */;
USE `mydb`;
-- MySQL dump 10.13  Distrib 5.5.16, for Win32 (x86)
--
-- Host: localhost    Database: mydb
-- ------------------------------------------------------
-- Server version   5.5.28

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `flour`
--

DROP TABLE IF EXISTS `flour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `flour` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` text,
  `grain_size` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `flour`
--

LOCK TABLES `flour` WRITE;
/*!40000 ALTER TABLE `flour` DISABLE KEYS */;
/*!40000 ALTER TABLE `flour` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `bread`
--

DROP TABLE IF EXISTS `bread`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `bread` (
  `name` text,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `flour_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_bread_flour_idx` (`flour_id`),
  CONSTRAINT `fk_bread_flour` FOREIGN KEY (`flour_id`) REFERENCES `flour` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bread`
--

LOCK TABLES `bread` WRITE;
/*!40000 ALTER TABLE `bread` DISABLE KEYS */;
/*!40000 ALTER TABLE `bread` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2012-11-13  8:53:50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:29:22.563

Dali（Eclipse 中生成 JPA 实体的部分）使用 DTP（Eclipse 的另一部分）来确定特定数据类型的 Java 属性类型。这些映射是特定于数据库平台的，并`.xmi`在各种 DTP 插件的文件中指定。

例如，在 Juno 中，对于 PostgreSQL，数据类型`ABSTIME`映射到 插件 jar `java.lang.Object`中文件 中的 Java 类型。`/runtime/vendors/postgresql/postgresql_8.x.xmi``./plugins/org.eclipse.datatools.enablement.postgresql.dbdefinition_1.0.2.v201110070445.jar`

根据您的数据库平台和您安装的其他插件，这些设置可能会在 Indigo 和 Juno 之间发生变化。您可以提取适当的 .xmi 文件，对其进行编辑，然后将其返回到其 jar 中，这应该会改变实体的生成方式。