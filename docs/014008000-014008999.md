# StackOverflow 问答 14008000-14008999

# google-apps-script - 如何从 Google 脚本调用 iContact API

> ID：14008002
> 
> 赞同：0
> 
> 时间：2012-12-23T01:40:29.180
> 
> 标签：google-apps-script, google-docs

我需要在谷歌脚本中编写一个函数，通过 API 将联系人添加到 icontact。我有以下代码可用于更改联系人，但我无法成功更改代码以添加联系人...有人知道如何编写添加联系人的调用吗？

```
function sendHttpPost() {
var headers= {
"API-Username":"XXXXX",
"API-AppId":"XXXXXX",
"API-Version":"2.0",
"API-Password":"XXXXX",
"Accept":"application/json"};
var payload = 
  {
    "contactId":1976438,
    "email":"schnick@schnack.com",
    "prefix":"Mr.",
    "firstName":"X",
    "lastName":"XXXXX",

  };

  var options =
    {
      "headers" : headers,
      "method" : "post",
      "payload" : payload
    };

UrlFetchApp.fetch("https://app.icontact.com/icp/a/XXXXX/c/XXXX/contacts/1976438", options);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T13:40:25.643

根据[发布的文档](http://developer.icontact.com/documentation/contacts/)，更新和添加之间的区别在于您访问的 URL `Post`。要更新联系人，URL 路径以 结尾`{contactId}`，而要添加联系人，则将其省略。

添加：

```
https://app.sandbox.icontact.com/icp/a/{accountId}/c/{clientfolderId}/contacts/ 
```

更新

```
https://app.sandbox.icontact.com/icp/a/{accountId}/c/{clientfolderId}/contacts/{contactId} 
```

在上面的代码中，您包括`{contactId}`“1976438”。放弃它，您将添加一个新联系人。

# html - 如何从重写器中排除特定文件

> ID：14008003
> 
> 赞同：18
> 
> 时间：2012-12-23T01:40:35.237
> 
> 标签：html, .htaccess, mod-rewrite, rewrite

我来过这里：[如何在 htaccess 中排除特定文件](https://stackoverflow.com/questions/5185349/how-to-exclude-a-specific-file-in-htaccess)

在这里：[从 .htaccess 中的重写规则中排除文件](https://stackoverflow.com/questions/1839537/exclude-files-from-rewrite-rule-in-htaccess)

但都没有奏效。我可能做错了什么？

.htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^wp-content(/.*|)$ - [L] # don't take any action
RewriteRule ^wp-admin(/.*|)$ - [L] # don't take any action
RewriteRule ^wp-includes(/.*|)$ - [L] # don't take any action
RewriteCond %{REQUEST_URI} !^/pureplantessentials\.html$

RewriteRule ^moreinfo/(.*)$ http://www.kgstiles.com/moreinfo$1 [R=301]
RewriteRule ^healthsolutions/(.*)$ http://www.kgstiles.com/healthsolutions$1 [R=301]
RewriteRule ^(.*)\.html$ $1/ [R=301]
RewriteRule ^(.*)\.htm$ $1/ [R=301]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-23T01:48:14.133

要排除文件，请尝试以下操作：

```
RewriteCond %{REQUEST_URI} !^/pureplantessentials\.html$ 
```

如果文件是`pureplantessentials.html`.

# css - 对 url 使用 "" ' ' 或 none 和查找图像有什么区别

> ID：14008004
> 
> 赞同：1
> 
> 时间：2012-12-23T01:41:14.300
> 
> 标签：css

> **可能重复：**
> [CSS: url() - 需要引号吗？](https://stackoverflow.com/questions/2168855/css-url-are-quotes-needed)

你可以使用这个：

```
 background-image: url("images/rock.png"); 
```

这：

```
 background-image: url('images/rock.png'); 
```

还有这个：

```
 background-image: url(images/rock.png); 
```

什么是正确的方法还是只是一种偏好？使用 ' ' "" 有什么不同吗？我希望我的问题是有道理的。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T01:45:31.097

根据 w3 标准，和之间没有区别`'`，`"`它是可选的。参考[标准文件](http://www.w3.org/TR/CSS21/syndata.html#uri)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T01:50:23.897

如果您在 CSS 中具有特殊含义的 URL 中有字符，则需要引号，例如：

```
background-image: url("images/some);file.jpg"); 
```

否则引号是可选的。

# java - “无效的流标头”异常 - JPA 和 MySQL 的 Lob

> ID：14008011
> 
> 赞同：0
> 
> 时间：2012-12-23T01:43:03.500
> 
> 标签：java, mysql, jpa, lob

我有一个这样定义的字段

```
@MappedSupperclass
public abstract class BaseItem {

    ...
    @Lob @Basic(fetch=FetchType.EAGER)
    private String description;
    ...
}

@Entity
public class Item extends BaseItem {
} 
```

我正在使用 MySQL 5，`desccription`字段类型为`TEXT`.

在尝试读取 Item 类型的对象时，出现以下错误：

```
java.io.StreamCorruptedException: invalid stream header: 6576656E
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:782)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:279)
    at org.datanucleus.store.rdbms.datatype.BlobImpl.getObject(BlobImpl.java:121)
    at org.datanucleus.store.rdbms.mapping.AbstractLargeBinaryRDBMSMapping.getObjectForBytes(AbstractLargeBinaryRDBMSMapping.java:362)
    at org.datanucleus.store.rdbms.mapping.AbstractLargeBinaryRDBMSMapping.getObject(AbstractLargeBinaryRDBMSMapping.java:395)
    at org.datanucleus.store.mapped.mapping.AbstractContainerMapping.getObject(AbstractContainerMapping.java:228)
    at org.datanucleus.store.rdbms.fieldmanager.ResultSetGetter.fetchObjectField(ResultSetGetter.java:176)
    at org.datanucleus.state.AbstractStateManager.replacingObjectField(AbstractStateManager.java:2353)
    ... 
```

您知道造成这种情况的可能原因是什么吗？

我正在使用 JDK6 和 DataNucleus 3.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T02:42:53.290

删除 @Lob 注释解决了这个问题。

# c# - 当 C# 中的文本更改时，如何抑制对 TextBox 及其形式的关注？

> ID：14008014
> 
> 赞同：-1
> 
> 时间：2012-12-23T01:44:10.230
> 
> 标签：c#, textbox, focus, richtextbox

我在其中有一个表单 ( `Form1`) 和一个富文本框 ( `RichBox1`)。

我有许多可以附加文本的对象`RichBox1` 和其他两种形式（`Form2`，`Form3`）

发生这种情况时，如果应用程序没有焦点（例如用户正在使用计算器）并且当用户通过选择将焦点设置回应用程序时`Form2`， 如果在用户没有使用它时获得了新文本，则`Form1`首先获得焦点。`RichBox1`

我已经查看了所有属性，但找不到它。文本框的 .CanFocus 不能设置为 false，因为它只能读取。有任何想法吗？

谢谢

编辑：我添加了：

`this.GotFocus += new EventHandler(Form1_GotFocus);`

这个事件根本不会触发。

我有一大堆其他控件`Form1`，一些标签、按钮和菜单条。我不明白是什么导致了这种行为。

编辑2：

也许有人可以建议提出一个事件来`Form1`开始跟踪导致这种情况的原因。我假设它与`RichBox1`但现在不太确定。

编辑 3。

添加： `this.Activated += new EventHandler(Form1_GotFocus);`

当我执行上述操作时，此事件不会触发。也许这意味着`Form2`失去焦点，而不是`Form1`被激活？同样值得注意的是，当我右键单击时会出现这种行为`Form2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:15:23.563

尝试使用 Form Activated 事件。虽然我做了一个小测试用例，我无法复制你的问题，如果 RichTextBox 的文本更改我仍然可以选择 Form2，请确保你没有计时器或事件设置焦点到 RichTextBox

```
public Form1()
{
    InitializeComponent();
    this.Activated += new EventHandler(Form1_Activated);  
}

void Form1_Activated(object sender, EventArgs e)
{
    //Set the Focus to the Control that you want
    button1.Focus();
} 
```

# phpexcel - PHPExcel 抛出错误，语言环境？不使用语言环境

> ID：14008022
> 
> 赞同：1
> 
> 时间：2012-12-23T01:46:15.240
> 
> 标签：phpexcel

我正在尝试使用 PHPExcel，即使是最基本的东西，甚至是从某个地方（[http://blog.clock.co.uk/phpexcel-example/](http://blog.clock.co.uk/phpexcel-example/)）复制的脚本，它也会引发错误。

```
<br />
<b>Warning</b>:  Invalid argument supplied for foreach() in <b>/home/.../public_html/pear/PEAR/PHPExcel/PHPExcel/Calculation.php</b> on line <b>1685</b><br /> 
```

输出的文件将此作为文件的最顶部，Excel（或 Open Office）说它不是有效文件。如果我删除这两行，一切都很好，Excel（或 OO）可以毫无问题地打开它，并且脚本所做的一切都在那里。

Calculation.php 第 1685 行：

```
foreach (glob($localeFileDirectory.'/*',GLOB_ONLYDIR) as $filename) { 
```

它的功能是：

```
private function __construct() {
$localeFileDirectory = PHPEXCEL_ROOT.'PHPExcel/locale/';
foreach (glob($localeFileDirectory.'/*',GLOB_ONLYDIR) as $filename) {
    $filename = substr($filename,strlen($localeFileDirectory)+1);
    if ($filename != 'en') {
        self::$_validLocaleLanguages[] = $filename;
    }
}

$setPrecision = (PHP_INT_SIZE == 4) ? 12 : 16;
$this->_savedPrecision = ini_get('precision');
if ($this->_savedPrecision < $setPrecision) {
    ini_set('precision',$setPrecision);
}
}   //  function __construct() 
```

我通过 PEAR 安装了 PHPExcel。

我在 PHPExcel 设置中的任何地方都没有看到“语言环境”目录，所以我尝试创建它，但仍然遇到同样的问题。

我没有设置或使用语言环境功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:34:34.660

这样看来，PHPExcel 的 PEAR 安装存在问题，我需要对此进行调查。

您可以在 github (https://github.com/PHPOffice/PHPExcel/tree/master/Classes) 或标准 zip 发行版的源存储库中找到语言环境目录和文件；但最好使用完整的 zip 安装，以防 PEAR 安装有任何其他问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T11:40:37.860

我在 PHP 5.3 + PHPExcelv1.7.6(2011-02-27) 中遇到了这个问题。我通过更新到**PHPExcel v1.8.0(2014-03-02)解决了这个问题**

# javascript - jQuery getJSON 未定义错误

> ID：14008029
> 
> 赞同：5
> 
> 时间：2012-12-23T01:47:56.763
> 
> 标签：javascript, jquery, json

好吧，所以我做了一些搜索和尝试，但没有运气。我希望这里有人能指出我正确的方向。我有一个我正在使用的 JSON 提要，它应该输出各种数据。目前，它只是发回所有变量的“未定义”响应。这是我正在使用的 JS：

```
$("#loaduserdata").click(function(){
$("#userdata tbody").html("");
    $.getJSON("trendFetch", function(data){
            $.each(data.list, function(i, data){
                var jsondata = data.action;
                console.log (jsondata);
            });
     }
); 
```

我不确定问题出在哪里，因为控制台没有给我任何错误或任何理由认为 JSON 格式不正确：http: [//i.imgur.com/ySpdR.png](http://i.imgur.com/ySpdR.png)

不管它值多少钱，这里是我用来生成 JSON 的代码——也许这方面有问题？

```
$curl = curl_init();
$url = 'http://api.site.com';

curl_setopt_array($curl, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => $url
));

$resp = curl_exec($curl);

if($resp){
    echo $resp;
    header("Content-Type: application/json", true);
}
else {
    echo 'Error - no response!';
}

curl_close($curl); 
```

编辑 - 包括 JSON 输出：

```
{
"status": "ok",
"list": {
    "list_id": "2gz",
    "title": "Test List",
    "description": "description text...",
    "image": [
        "http://t2.gstatic.com/images?q=tbn:ANd9GcTz6_4aV6oHsI2kgJRRoSFCTWbew5ChTeBrAmXYh4Gez2J7usm8nwMOsA",
        "http://cdn.list.ly/logos/default-list-image.png"
    ],
    "views": 0,
    "item_count": 1,
    "curator_count": 1,
    "follower_count": 1,
    "listly_url": "http://api.list.ly/list/2gz-test-list",
    "items": [
        {
            "item": {
                "name": "Link 1",
                "image": "http://t2.gstatic.com/images?q=tbn:ANd9GcTz6_4aV6oHsI2kgJRRoSFCTWbew5ChTeBrAmXYh4Gez2J7usm8nwMOsA",
                "note": null,
                "url": null,
                "likes": 0,
                "dislikes": 0
            }
        }
    ],
    "suggested_items": []
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T01:50:44.580

```
echo $resp;
header("Content-Type: application/json", true); 
```

应该：

```
header("Content-Type: application/json", true);
echo $resp; 
```

您需要在输出任何内容之前发送 HTTP 标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T01:50:39.603

在任何输出之前设置标题

```
header("Content-Type: application/json", true);
echo $resp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T02:01:34.640

如果您提供 JSON 响应会有所帮助。

当我遇到这些类型的问题时，我通常会后退一步（在代码中）或`console.log()`更早。例如，`console.log(data)`在`function(data) {}`.

我认为 - 从查看输出 - 你的问题是该列表实际上不是一个列表。data.list 实际上是一个对象。因此`.each()`将遍历各个项目（如 list_id、title 等）。这些都没有`.action`属性。

我看不到任何操作属性，因此无法提出解决方案建议。它可能在列表对象中——但您仍然将它视为一个数组（好像它是`list: [{}, {}]`而不是`list: {}`）。在这种情况下，您要么需要修复返回的 JSON，要么去掉`$.each()`, 和`console.log(data.list.action)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T02:32:26.620

Musa 能够为我解决这个问题，所以如果有人用谷歌搜索，问题是我在不需要时尝试使用 $.each。如果有人感兴趣，这是正确的代码：

```
$.getJSON("trendFetch",function(data){
                var tblRow =
                    "<tr>"
                    +"<td>"+data.list.list_id+"</td>"
                    +"<td>"+data.list.title+"</td>"
                    +"<td>"+data.list.description+"</td>"
                    +"</tr>"
                $(tblRow).appendTo("#userdata tbody");

        }
); 
```

# django - 捕获 NoReverseMatch 错误：小心渲染：使用参数“（）”和关键字参数“{}”反转“update_status”

> ID：14008034
> 
> 赞同：0
> 
> 时间：2012-12-23T01:49:38.970
> 
> 标签：django

ght NoReverseMatch 错误：谨慎渲染：“update_status”的反向参数“（）”和关键字参数“{}”未找到。

我正在学习教程：[http ://blog.pythonanywhere.com/35/](http://blog.pythonanywhere.com/35/)

在 html 文件中，

```
<form method="POST" action="{% url update_status %}"  >
  <input type="hidden" name="quote" value="{{quote}}" />
  <input type="hidden" name="access_token" value="{{access_token}}" />
  <input type="submit" value="Set as my status!"/>
</form> 
```

在 urls.py 中：

```
from django.conf.urls.defaults import patterns, include, url
from regilink.myapp.views import *

urlpatterns = patterns('',
    ('^$', home),
    (r'^update_status/', update_status),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T01:58:59.337

您需要传递 name 参数，以便可以使用它

```
(r'^update_status/', update_status, name="update_status"),) 
```

# django - Django 等待批准

> ID：14008040
> 
> 赞同：1
> 
> 时间：2012-12-23T01:52:26.180
> 
> 标签：django

如果您希望用户向您的网站提交文章，但您想在将这些文章添加到文章列表之前批准这些文章，您将如何去做？

我能想到的唯一方法是拥有2个数据库；一个用于“等待批准”，另一个用于“已批准并准备展示”。但是，我的问题是是否有一种快速的方法可以在两个数据库之间传输信息？我只知道手动执行此操作。

或者已经有一个处理这个的 Django 模块？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T01:54:05.190

只需在数据库表中添加一个名为 status 的列

1 = 等待 2 = 批准 3 = 拒绝

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T09:04:16.877

正如 jordi 所说，添加一个额外的字段，但您可能还想为您的表编写一个自定义管理器，根据状态选择帖子。

请参阅 Django 文档：[https](https://docs.djangoproject.com/en/dev/topics/db/managers/) ://docs.djangoproject.com/en/dev/topics/db/managers/在那里他们设置了一个经理，过滤 sex="M" 以仅返回男性。这使您的代码更整洁，并且意味着只要您通过正确的管理器，您就不必一直记住要测试 state="Approved"。

如果您想变得更复杂，您正在做的事情称为“工作流”，并且有 django 和 python 包可以实现这一点 - 但它很快就会变得非常复杂......

# javascript - 为什么这个使用 url 的 ajax 函数不起作用？

> ID：14008043
> 
> 赞同：0
> 
> 时间：2012-12-23T01:54:00.397
> 
> 标签：javascript, html, ajax, json

在`index.html`正文标签下：

```
<a href="javascript:setTempInc()">+</a> <a href="javascript:setMode(0)">-</a> 
```

和下`<head><script type="text/javascript">:`

```
var url = "get.php";

function ajaxRequest()
{
    var xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
        {
            var jsondata = eval("(" + xmlhttp.responseText + ")"); //retrieve result as an JavaScript object

            document.getElementById("y").innerHTML = jsondata.y;

        }
    }

    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}

function setTempInc()
{
    var oldUrl = url;
    url = url + "9001" + jsondata.y;
    ajaxRequest();
    url = oldUrl;
} 
```

我不明白问题出在哪里。`url`是一个字符串并且`jsondata.y`是一个 int 但脚本不起作用！

但是，此功能可以：

```
function setMode(val)
{
    var oldUrl = url;
    url = url + "91" + val + "000";
    ajaxRequest();
    url = oldUrl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T01:58:46.100

我会认为

```
var jsondata = eval("(" + xmlhttp.responseText + ")"); 
```

无法拨打电话

```
url = url + "9001" + jsondata.y; 
```

因为它仅在`ajaxRequest`函数范围内定义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T02:02:01.010

在函数外设置变量，用作全局变量！

这可能会起作用：

```
(function() {
    var url = "get.php";
    var oldUrl = '';
    var jsondata = '';

    function ajaxRequest()
    {
        var xmlhttp = new XMLHttpRequest();

        xmlhttp.onreadystatechange = function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                jsondata = eval("("+xmlhttp.responseText+")"); //retrieve result as an JavaScript object

                document.getElementById("y").innerHTML = jsondata.y;

            }
        }

        xmlhttp.open("GET",url,true);
        xmlhttp.send();
    }

    function setTempInc()
    {
        oldUrl = url;
        url = url + "9001" + jsondata.y;
        ajaxRequest();
        url = oldUrl;
    }
})(); 
```

添加`Closure`以避免常见的安全问题

# jquery - 如何在 jQuery 中过滤具有特定值的表行？

> ID：14008044
> 
> 赞同：1
> 
> 时间：2012-12-23T01:54:02.150
> 
> 标签：jquery

我希望能够计算单元格具有特定值的所有行的计数。因此，如果给出下表，用户选中第 1 行旁边的复选框，我会得到以下信息。

选定的奖励行 = 1 选定的基本行 = 0

如果我选中第 2 行旁边的框，我会得到以下值

选定的奖励行 = 选定的 2 个基本行 = 0

如果我取消选中第二行并选中第三行，我会得到......

选定的奖励行 = 1 选定的基本行 = 1

我可以通过这种方式获得选择的总行数......

```
$(function(){
var $ck = $('input[type=checkbox]');
    $ck.filter(':checked').length;
)}; 
```

我可以以某种方式将选择器链接在一起吗？这行不通，但这是我的想法...

```
m1 = $ck.filter(':checked')
               .parents('tr:first')
               .filter('.type')
               .text('Bonus')
               .length;
alert(m1); // returns 0 
```

这是一个示例表

```
<table>
    <thead>
    <tr>
        <th>Points</th>
        <th>Bonus</th>
        <th>&nbsp;</th>
    </tr>   
</thead>
<tbody>
    <tr>
        <td class=".points">10</td>
        <td class=".type">Bonus</td>
        <td class=".chkbox"><input type="checkbox"></td>
    </tr>
    <tr>
        <td class=".points">20</td>
        <td class=".type">Bonus</td>
        <td class=".chkbox"><input type="checkbox"></td>
    </tr>
    <tr>
        <td class=".points">10</td>
        <td class=".type">Base</td>
        <td class=".chkbox"><input type="checkbox"></td>
    </tr>
    <tr>
        <td class=".points">20</td>
        <td class=".type">Base</td>
        <td class=".chkbox"><input type="checkbox"></td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T03:05:45.923

你可以试试这个

```
var chk=$('td.chkbox input:checkbox');
chk.on('change', function(){
    var checked=chk.filter(':checked');
    var bonus=0, base=0;
        checked.filter(function(){ 
        bonus+=$(this).closest('tr').find('td.type:contains("Bonus")').length;
        base+=$(this).closest('tr').find('td.type:contains("Base")').length;
    });
    $('div#result').html('Bonus rows selected = '+bonus+' Base rows selected = '+base);
}); 
```

也`class=".className"`应注意`class="className"`。

[**一个例子在这里**](http://jsfiddle.net/8ZJ3C/)。

# iphone - UIViewController 从 viewController 和后退按钮模态加载 UINavigationController

> ID：14008047
> 
> 赞同：0
> 
> 时间：2012-12-23T01:54:42.313
> 
> 标签：iphone, ios

> **可能重复：**
> [如何在 UINavigationController 的 RootViewController 上显示返回按钮？](https://stackoverflow.com/questions/11283218/how-to-show-back-button-on-the-rootviewcontroller-of-the-uinavigationcontroller)

我目前正在开发一个使用故事板的应用程序（支持 IOS 5.1-6）。我的 rootViewController 是一个`UIViewController`. 显示新内容时，我正在使用 segue 模态加载不同的 UIViewController。在一个特定的视图中，我想`UINavigationController`在底部加载一个 ToolBar，这样我就可以`UIViewController`通过点击后退按钮返回到我的视图。

我有点困惑，因为在 NavigationController 上，`NavigationController`由于没有后退按钮，我无法关闭当前。如果我添加一个后退按钮，我将看不到它，因为它`NavigationController`位于堆栈的顶部？

有人可以指出我正确的方向或在这里提供一些关于如何解除此 NavigationController 的见解，因为它是模态调用的？

与往常一样，提前感谢您的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:31:35.327

您需要`UIBarButtonItem`将`UINavigationController`. 因为您正在以模态方式呈现新视图，所以它应该是“完成/关闭”按钮（关闭模态 VC）而不是“返回”按钮（将视图弹出回来）。

当您最初呈现模态视图控制器时，您可以传递一个关闭块，当您按下关闭视图控制器的关闭按钮时将调用该块。

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion
- (void)dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion 
```

这里的关键区别是后退按钮与关闭按钮的概念。这在 Apple 的 HIG 文档中进行了解释。

[UIViewController 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

# node.js - express.favicon() 是做什么的

> ID：14008050
> 
> 赞同：19
> 
> 时间：2012-12-23T01:55:25.870
> 
> 标签：node.js, express

我想知道 express.favicon() 的作用。我焦灼，无法理解推理。

任何人都可以向我解释这一点。

```
app.use(express.favicon()); 
```

我读了一些链接，该命令将忽略 GET/favicon.ico。我正在寻找更多关于这个的理解？函数在哪里：express.favicon() 定义和所有这些信息，我在快递网站上检查了找不到这个函数的声明/定义

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T01:58:00.223

它[为您的应用程序定义了一个图标](http://www.senchalabs.org/connect/favicon.html)。默认情况下，不向 favicon 传递任何路径将提供 express favicon。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-03T19:18:51.023

据我所知，它会从您的站点加载 /favicon.ico 文件（就像加载静态处理程序一样），然后缓存它。

因此，与仅使用静态处理程序相比，使用 this 的优势在于它可以缓存更多。

[http://www.senchalabs.org/connect/favicon.html](http://www.senchalabs.org/connect/favicon.html)

# c# - 在设置表单上使用的最佳控件？

> ID：14008055
> 
> 赞同：0
> 
> 时间：2012-12-23T01:57:22.610
> 
> 标签：c#, winforms

我只是为我的应用程序设计一个设置表单，没什么花哨的，这是一个小应用程序。我只是想知道什么控件对此有好处？目前我正在使用标签、文本框和列表框，但它看起来很垃圾和尴尬，有什么正统的方法可以做到这一点吗？是更可怕的 UI 设计尝试。 ![设置表格](../Images/9d5fb2509c5cb985c51ce00b7cb87569.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T02:17:22.580

您可以使用最原始的控件和少量的创造力或灵感来制作一些非常直观、美观的界面。这是我最近创建的设置 UI：

![在此处输入图像描述](../Images/16dc918cacb62002e16204975ec71e4c.png)

## 一般提示

*   一个不错的字体选择有很长的路要走。目前我个人最喜欢的是`Segoe UI`.
*   使用设计器标尺定位控件，使它们彼此相对。也与你的定位保持一致；不要将标题放置在一个字段的 TextBox 上方和另一个字段的 TextBox 之外。
*   试着为你的控件找到一个合适的尺寸，小控件很难使用，大控件看起来很业余。
*   我认为将表单的`Maximize`属性设置为`false`并将属性更改`FormBorderStyle`为`FixedSingle`适用于小型固定表单。

获得灵感是个好主意。看看其他一些与你类似的项目，看看他们如何定位他们的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T02:21:16.707

对于快速和肮脏的东西，创建一个作为应用程序设置模型的类，如下所示：

```
public class ApplicationSettings {
    public String YourName { get; set; }
    public Color BackgroundColor { get; set; }
} 
```

然后将其与`PropertyGrid`控件一起使用：

```
ApplicationSettings settings = new ApplicationSettings();
LoadSettingsFromDB( settings );
propertyGrid.SelectedObject = settings; 
```

用户点击确定后，只需坚持。`settings`您的实例的属性值将被更新。

您还可以将 PropertyGrid 与 VS IDE 生成的 AppSettings 功能一起使用。

# windows-phone-8 - Windows Phone 8 SDK 与 Visual Studio Ultimate 2012 的集成

> ID：14008063
> 
> 赞同：2
> 
> 时间：2012-12-23T01:59:50.920
> 
> 标签：windows-phone-8

所以我安装了 Visual Studio 2012 Ultimate。我安装了 WP8 SDK，但它安装了 Windows Phone 的 express 版本，它需要第二次注册和产品密钥。我的意思是，为什么会这样？我已经注册了 Ultimate VS。为什么我需要第二个产品密钥？我知道它是免费的，但是……为什么？

此外，每当我在 VS Ultimate 上更新某些内容时，我都必须在 express 版本上再次重新更新它。

我的意思是，为什么这一切都乱七八糟？只有我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:03:08.977

我在 WP7 SDK 和 VS 2010 上有同样的问题，我通过下载并直接安装 SDK 的 ISO 映像解决了问题。

# c++ - ncurses getch() 每隔一个字符跳过一次

> ID：14008066
> 
> 赞同：3
> 
> 时间：2012-12-23T02:00:51.380
> 
> 标签：c++, c, linux, ncurses, keyboard-input

我正在编写一个俄罗斯方块游戏，其中 ncurses 使用 getch() 获取键盘输入。对于完成的游戏，nodelay() 将处于活动状态，但出于测试目的，我已将其注释掉。出于某种原因，我的游戏循环调用的输入函数忽略了每个第二个字符。例如，输入“q”会关闭我的程序。如果我输入 aqaqaqaqaq 的序列......程序将永远不会关闭，因为 q 没有注册。下面是 init 是我的 ncurses 代码的函数，下面是我的输入函数。

编辑：如果重要的话，我正在测试在 Windows 上的 virtualbox 中运行的 Ubuntu 中的代码。

```
****INIT FUNCTION****
void init_ui()
{
initscr();
cbreak();
raw();
keypad(stdscr, TRUE);
noecho();
//nodelay(stdscr, TRUE);

start_color();
init_pair(9, COLOR_BLACK, COLOR_RED);
init_pair(2, COLOR_BLACK, COLOR_WHITE);
init_pair(3, COLOR_BLACK, COLOR_CYAN);
init_pair(4, COLOR_BLACK, COLOR_YELLOW);
init_pair(5, COLOR_BLACK, COLOR_MAGENTA);
init_pair(6, COLOR_BLACK, COLOR_BLUE);
init_pair(7, COLOR_BLACK, COLOR_GREEN);
init_pair(8, COLOR_BLACK, COLOR_BLACK);
attron(COLOR_PAIR(6));
for(int i=0; i<HEIGHT; i++)
{
    mvprintw(i, 0, "#%*c", WIDTH*2+1, '#');
}
for(int i=0; i<=WIDTH; i++)
{
    mvprintw(HEIGHT, i*2, "##");
}
attroff(COLOR_PAIR(6));
}

****INPUT FUNCTION****
int get_input()
{
int ch = getch();
int result;
switch(ch)
{
    case KEY_LEFT:
        result = LEFT;
        break;
    case KEY_RIGHT:
        result = RIGHT;
        break;
    case KEY_DOWN:
        result = DOWN;
        break;
    case 'q':
        result = 'q';
        break;
    default:
        result = DOWN;
        break;
}
return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T02:38:47.947

原来我在程序的另一部分留下了一个流浪的 getch() ，我忘了删除它。只是我的一个愚蠢的错误。

# php - PayPal PHP IPN 示例指的是哪些 POST 序列化问题？

> ID：14008067
> 
> 赞同：12
> 
> 时间：2012-12-23T02:01:08.370
> 
> 标签：php, paypal-ipn

PayPal 的 PHP IPN 侦听器示例代码在顶部有以下注释/代码：

```
// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
} 
```

有人可以解释此评论所指的序列化问题吗？虽然我可以这样做，但如果知道为什么要这样做，我会感到更自在。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T02:41:11.213

我不能告诉你贝宝的动机，但我可以猜到：php 喜欢更改来自 http 请求的传入变量的键。

例如，名称`a.b [`将显示为`$_POST['a_b__']`。php 将用下划线替换空格、点和左括号：来源： http: [//php.net/manual/en/language.variables.external.php](http://php.net/manual/en/language.variables.external.php)

此外，php 会将变量名中格式良好的匹配括号解析为嵌套数组。例如，`arr[a][b]`将显示为`$_POST['arr']['a']['b']`. [http://php.net/manual/en/faq.html.php#faq.html.arrays](http://php.net/manual/en/faq.html.php#faq.html.arrays)

此外，当括号格式不正确时，php 会表现出各种疯狂和错误： [https ://bugs.php.net/bug.php?id=48597](https://bugs.php.net/bug.php?id=48597)

此外，`magic_quotes_gpc`曾经在每个 php 安装中都有它的爪子，在某些情况下也会更改变量的名称。[http://php.net/manual/en/security.magicquotes.php](http://php.net/manual/en/security.magicquotes.php)

此外，php 有`arg_seperator.input`设置，有些人喜欢将其设置为`&amp;`而不是`&`. Paypal 无法知道您喜欢哪个，并且显然`&`在制作 url 和/或 post body 以请求时总是使用，导致您的 php 引擎解析参数错误。 [http://php.net/manual/en/ini.core.php#ini.arg-separator.input](http://php.net/manual/en/ini.core.php#ini.arg-separator.input)

此外，尽管是不好的做法，但在 php 中，代码/库自动修改请求输入的情况并不少见`$_POST`，例如 xss “清理”它们或其他此类横切关注点。$_POST 是一个可写/可修改的变量，而 php://input 是只读的，所以它保证不会被库弄乱。

通过手动解析输入，您可以避免所有这些潜在问题。这个决定对他们来说似乎是一个很好的工程。

# c - 使用转换的库兼容性问题

> ID：14008070
> 
> 赞同：0
> 
> 时间：2012-12-23T02:01:21.180
> 
> 标签：c, dynamic-linking, dynamic-loading, imagemagick-convert

`convert`从命令行运行以将少量 JPG 文件合并为 PDF 时出现段错误：

```
$ convert ./file_*.jpg  p.pdf
Segmentation fault 
```

在那里，你看到了吗？为了尝试追踪发生了什么，我在调试器下运行它，得到以下结果：

```
(gdb) run ./file_*.jpg  p.pdf
Starting program: /usr/local/bin/convert ./file_*.jpg  p.pdf
warning: .dynamic section for "/usr/lib/libfreetype.so.6" is not at the expected address
warning: difference appears to be caused by prelink, adjusting expectations
warning: .dynamic section for "/usr/lib/libpng12.so.0" is not at the expected address
warning: difference appears to be caused by prelink, adjusting expectations
warning: .dynamic section for "/usr/lib/libfontconfig.so.1" is not at the expected address 
```

谁能告诉我这是什么意思？看起来好像有一个库不兼容，但我不确定我能做些什么或能做些什么。

抱歉，如果我的标签有误 - 如果您能想到更合适的标签，请随时更改。我从源代码配置并制作了转换应用程序，所以我想我并没有真正期待这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:51:33.090

`prelink`Prelink似乎是一个问题，它试图通过帮助动态链接器来加快上传时间。有关它的作用的更多信息，请参见[man prelink 。](http://linux.die.net/man/8/prelink)您可以使用以下命令取消预链接可执行文件。

`prelink --undo /path/to/executable`

这应该将可执行文件恢复为正常的动态链接。

# jquery - 你如何禁用除退格之外的所有 jQuery 键？

> ID：14008074
> 
> 赞同：4
> 
> 时间：2012-12-23T02:02:02.693
> 
> 标签：jquery

我可以成功地阻止所有键被按下：

`$this.keydown(false);`

如何禁用除退格键之外的所有键？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T02:04:14.487

检查`keyCode`事件参数的：

```
$this.keydown(function(e) {
    if(e.keyCode !== 8) {
        e.preventDefault();
    }
}); 
```

[这是一个演示。](http://jsfiddle.net/minitech/kt69H/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T02:03:28.547

使用回调，检查按下键的键码，如果是退格键则允许，否则阻止。

# python-2.7 - 如何使用 SQLAlchemy 将一个数据库会话中的多对多关系合并到另一个？

> ID：14008075
> 
> 赞同：4
> 
> 时间：2012-12-23T02:02:32.163
> 
> 标签：python-2.7, sqlalchemy

当我的 python 应用程序启动时，我想从中加载所有数据`in.db`并将其放入`out.db`（然后可能在 中进行更改`out.db`）。我使用`session.merge(loaded_object)`，但问题是它不保存相关对象。

我的数据是简单的 Person 对象，它们之间有明显的父子关系（多对多）：

```
from sqlalchemy import create_engine, Column, String, Integer, ForeignKey
from sqlalchemy.orm import sessionmaker, relationship, backref
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Person(Base):
    __tablename__ = "people"
    id = Column(Integer, primary_key=True)
    name = Column(String)

    def __init__(self, name):
        self.name = name

    def add_kid(self, kid):
        Edge(kid=kid, parent=self)
        return self

    def get_kids(self):
        return [edge.kid for edge in self.kid_edges]

    def add_parent(self, parent):
        Edge(kid=self, parent=parent)
        return self

    def get_parents(self):
        return [edge.parent for edge in self.parent_edges]

    def __repr__(self):
        return "<Person(id={id}, name={name})>".format(id=str(self.id),
                                                       name=self.name)

class Edge(Base):
    __tablename__ = "edges"
    id = Column(Integer, primary_key=True)
    kid_id = Column(Integer, ForeignKey("people.id"))
    parent_id = Column(Integer, ForeignKey("people.id"))
    kid = relationship("Person", primaryjoin="Edge.kid_id==Person.id",
                       backref=backref("parent_edges", 
                                       collection_class=set))
    parent = relationship("Person", primaryjoin="Edge.parent_id==Person.id",
                          backref=backref("kid_edges",
                                          collection_class=set))

    def __init__(self, kid, parent):
        self.kid = kid
        self.parent = parent 
```

我通过以下方式初始化会话：

```
db_in_engine = create_engine("sqlite:///in.db", echo=True)
db_in_session_factory = sessionmaker(bind=db_in_engine)
db_in_session = db_in_session_factory()
db_out_engine = create_engine("sqlite:///out.db", echo=True)
db_out_session_factory = sessionmaker(bind=db_out_engine)
db_out_session = db_out_session_factory()
Base.metadata.create_all(db_out_engine) 
```

问题是当我合并一个人时，孩子们没有合并：

```
people = db_in_session.query(Person).all()
db_out_session.merge(people[0])
db_out_session.commit() # related Edges, kids and parents of people[0] are not saved 
```

我尝试将 cascade="merge" 添加到关系和反向引用中，但这不起作用。有什么办法可以强迫它拯救所有人[0]的孩子/父母和相关的边缘？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T17:27:44.923

首先，不要感到难过，因为我必须对此进行测试以了解它为什么不起作用，然后我写了这个东西。

merge() 用例是您从离线缓存或某些本地修改的结构中获取某种应用程序内数据并将其移动到新会话中的用例。merge() 主要是关于合并*更改*，因此当它看到没有“更改”的属性时，它假定不需要特殊工作。所以它会跳过卸载的关系。如果它确实遵循卸载的关系，则合并过程将成为一个非常缓慢且繁重的操作，因为它遍历关系的完整图以递归方式加载所有内容，可能会将数据库的很大一部分加载到内存中以实现高度互连的模式。这里没有预料到“从一个数据库复制到另一个”用例。

如果您只是确保提前加载所有这些边缘，则数据确实会进入，这是一个演示。默认级联也是“保存更新，合并”，因此您不必指定。

```
from sqlalchemy import create_engine, Column, String, Integer, ForeignKey
from sqlalchemy.orm import Session, relationship, backref, immediateload
from sqlalchemy.ext.declarative import declarative_base
import os

Base = declarative_base()

class Person(Base):
    __tablename__ = "people"
    id = Column(Integer, primary_key=True)
    name = Column(String)

    def __init__(self, name):
        self.name = name

class Edge(Base):
    __tablename__ = "edges"
    id = Column(Integer, primary_key=True)
    kid_id = Column(Integer, ForeignKey("people.id"))
    parent_id = Column(Integer, ForeignKey("people.id"))
    kid = relationship("Person", primaryjoin="Edge.kid_id==Person.id",
                       backref=backref("parent_edges",
                                       collection_class=set))
    parent = relationship("Person", primaryjoin="Edge.parent_id==Person.id",
                          backref=backref("kid_edges",
                                          collection_class=set))

    def __init__(self, kid, parent):
        self.kid = kid
        self.parent = parent

def teardown():
    for path in ("in.db", "out.db"):
        if os.path.exists(path):
            os.remove(path)

def fixture():
    engine = create_engine("sqlite:///in.db", echo=True)
    Base.metadata.create_all(engine)

    s = Session(engine)
    p1, p2, p3, p4, p5 = [Person('p%d' % i) for i in xrange(1, 6)]
    Edge(p1, p2)
    Edge(p1, p3)
    Edge(p4, p3)
    Edge(p5, p2)
    s.add_all([
        p1, p2, p3, p4, p5
    ])
    s.commit()
    return s

def copy(source_session):
    engine = create_engine("sqlite:///out.db", echo=True)
    Base.metadata.create_all(engine)

    s = Session(engine)
    for person in source_session.query(Person).\
            options(immediateload(Person.parent_edges),
                        immediateload(Person.kid_edges)):
        s.merge(person)

    s.commit()

    assert s.query(Person).count() == 5
    assert s.query(Edge).count() == 4

teardown()
source_session = fixture()
copy(source_session) 
```

# eclipse - 如何在 TomEE 上使用 CDI

> ID：14008077
> 
> 赞同：0
> 
> 时间：2012-12-23T02:02:44.177
> 
> 标签：eclipse, jakarta-ee, cdi

我目前正在编写 JSF 代码并使用 Mojarra 2.1.6-FCS，使用 Tomcat 和 Eclipse Juno。现在我想转向 CDI，因为我发现它比 JSF 更实用。

我需要知道是否需要 web.xml 和 faces-config.xml 来编写和运行 CDI 代码；在 JSF 中它不是必需的。

我只需要简单的分步说明来部署到 TomEE。在我的提问中提出的任何闪光将不胜感激，谢谢一拳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:33:04.230

这里有一个示例[http://tomee.apache.org/examples-trunk/jsf-cdi-and-ejb/](http://tomee.apache.org/examples-trunk/jsf-cdi-and-ejb/)

希望对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:16:18.570

您不需要 web.xml 或 faces.config.xml 只是为了使用 CDI。您唯一需要的是[beans.xml](http://docs.oracle.com/javaee/6/tutorial/doc/gjbnz.html)（可以是一个空文件！），放在`WEB-INF`目录中。

我无法为您提供在 TomEE 上部署 CDI 应用程序的分步说明，但它与部署任何其他应用程序应该没有什么不同。你读过[TomEE 和 Eclipse](http://tomee.apache.org/tomee-and-eclipse.html)教程吗？

# jquery - 在 JQuery UI 中，如何在可放置区域之间拖动项目时减少计数？

> ID：14008079
> 
> 赞同：1
> 
> 时间：2012-12-23T02:03:02.573
> 
> 标签：jquery, html, jquery-ui, javascript

我正在使用 JQuery UI 1.8.3，请参阅下图了解我的页面设置。
我正在计算拖入可放置区域的项目数，但是当我将项目从 A 拖到 B 时计数不正确。例如，如果我将项目 1 拖到框 A，框 A 的计数 (#) 变为 1，但是如果我将项目 1 从 A 拖到 B，框 A 的计数仍然为 1，但我需要它减少到 0。

```
 +------------------------+      +-----------------------+
  | Items (Dragable items) |      | A (Droppable Area)  # |
  |------------------------|      |-----------------------|
  |  item 1                |      |                       |
  |  item 2                |      |                       |
  |  item ...              |      +-----------------------+
  |  item n                |
  |                        |      +-----------------------+
  |                        |      | B (Droppable Area)  # |
  |                        |      |-----------------------|
  |                        |      |                       |
  |                        |      |                       |
  +------------------------+      +-----------------------+ 
```

我的代码看起来像这样删除项目：

```
$(".dropArea").droppable({
    ...
    drop: function(event, ui) {
    $(this).append($(ui.draggable));

    // count the items in the box and update
    ...
} 
```

当物品从盒子 A 或 B 中掉出时，减少盒子计数的正确方法是什么？请让我知道是否有任何不妥之处。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:10:08.743

在每个放置事件中，计算每个可放置区域中的对象数量并更新您的计数器。

像这样的东西会给你对象的数量：

```
$(".dropArea").each(function (index, elem) {
    $(item).find(".count").text($(this).find("div").size());
}); 
```

# javascript - 具有不同构造函数的对象

> ID：14008083
> 
> 赞同：0
> 
> 时间：2012-12-23T02:03:44.457
> 
> 标签：javascript, constructor

我正在做一个按钮程序。我有一个`Button`分配给在 HTML 中找到的每个按钮的对象。由于有不同类型的按钮，我希望有一个不同的构造函数来使对象适合每种类型。

我知道我将如何调用这些单独的构造函数，但我不知道在构造函数中放入什么以使其将某些变量应用于`Button`对象。

**示例按钮对象：**

```
var Button = function(){
    if (buttonType == 'type1'){
        buttonType1(); //set onclick, onmouseover/mouseout, onmousedown/mouseup
    }
    else{
        buttonType2(); //set different ways to handle events
    }
} 
```

**如何`Button`创建对象：**

```
var buttons = document.getElementsByClassName('button');

Buttons = new Buttons_Objs(); //An object to store references to all Button Objs.

for (i = 0 ; i < buttons.length ; i++){
    button = buttons[i];
    buttonType = button.getAttribute('type');
    Buttons['button' + i] = new Button(button, buttonType);
} 
```

我将如何构造这些函数来设置 onclick 和东西，如果我不希望它们挤满我的`Button`对象，那么哪里是存储它们的好地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:12:50.590

您所展示的只是一个普通的 javascript 函数（不是构造函数），您可以像这样添加一个参数：

```
var Button = function(buttonType){
    if (buttonType == 'type1'){
        buttonType1(); //set onclick, onmouseover/mouseout, onmousedown/mouseup
    }
    else{
        buttonType2(); //set different ways to handle events
    }
} 
```

然后，你会这样调用：

```
Button("type1"); 
```

# javascript - 我可以使用 HTML5 在 iframe 上阅读内容吗？

> ID：14008086
> 
> 赞同：0
> 
> 时间：2012-12-23T02:04:26.407
> 
> 标签：javascript, html, iframe, cross-domain

[http://mydomain.com](http://mydomain.com)

```
<iframe src="http://otherdomain.com" frameborder="0" width="100%"></iframe> 
```

但我从我的 Chrome 中捕捉到了这条消息。域、协议和端口必须匹配。

有谁能解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T02:10:15.800

您不能直接读取其他域上 iframe 的内容，因为它会违反[同源策略](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)。[如果您同时控制 mydomain.com 和 otherdomain.com，那么您可以使用postMessage API](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)在 iframe 和顶级页面之间进行通信。例如，您可以使用`postMessage`将 iframe 中的页面内容发送到外部页面。

# gcc - ctags 是否支持 GCC 的固定原型功能？

> ID：14008088
> 
> 赞同：1
> 
> 时间：2012-12-23T02:04:57.777
> 
> 标签：gcc, vim, ctags

我发现 gcc 支持一个奇怪的函数定义，例如：

```
static void add_define P3(char *, name, int, nargs, char *, exps) 
```

使用 -D__USE_FIXED_PROTOTYPES__ 编译。而且我的 vim taglist 插件无法给出正确的结果。我试图在 ctags 的手册页中找出答案，但找不到。

**编辑** 是的，这很奇怪。宏是

```
#define P3(t1, v1, t2, v2, t3, v3) (t1 v1, t2 v2, t3 v3) 
```

并且评论告诉这是

> ANSI/K&R 兼容性的东西。

它打算与 AIX 的 c 编译器 xlc 配套。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T05:14:49.967

使用如图所示的宏定义：

```
#define P3(t1, v1, t2, v2, t3, v3) (t1 v1, t2 v2, t3 v3) 
```

这个声明：

```
static void add_define P3(char *, name, int, nargs, char *, exps); 
```

（我添加了一个尾随分号）扩展为：

```
static void add_define(char *name, int nargs, char *exps); 
```

这是一个完全普通的函数原型（假设尾随分号）。

该宏可能有另一个版本，如下所示：

```
#define P3(t1, v1, t2, v2, t3, v3) \
    (v1, v2, v3) \
    t1 v1; \
    t2 v2; \
    t3 v3; 
```

这将扩展到：

```
static void add_define(name, nargs, exps)
char *name;
int nargs;
char *exps 
```

这是一个 K&R 风格的非原型函数声明。

可能有类似的东西：

```
#ifdef __STDC__
#define P3(t1, v1, t2, v2, t3, v3) (t1 v1, t2 v2, t3 v3)
#else
#define P3(t1, v1, t2, v2, t3, v3) \
    (v1, v2, v3) \
    t1 v1; \
    t2 v2; \
    t3 v3;
#endif 
```

以及类似的宏 P0、P1、P2 等，用于不同数量的参数。或者，正如您在问题中暗示的那样，它使用用户定义的宏`__USE_FIXED_PROTOTYPES__`而不是`__STDC__`.

这将允许单个声明自动扩展为现代原型或 K&R 样式的声明；后者只有非常旧的 ANSI 前编译器才需要。

要回答标题中的问题（终于！），`ctags`对未预处理的 C 源代码进行操作。对 GNU 的快速实验`ctags`表明，它在解释模糊基本语法的宏方面并不是特别聪明。它将为宏定义本身生成标签条目，但它不会识别

```
static void add_define P3(char *, name, int, nargs, char *, exps) {
    /* ... */
} 
```

作为函数定义。（你可以通过预处理器运行源文件，但是标签会引用预处理文件，这不是特别有用。）原则上`ctags` *应该*理解完整的C语法，包括预处理器；在实践中，它没有。

如果你想`ctags`为你的源文件生成标签，你需要摆脱宏并编写可识别的原型。您将无法使用 pre-ANSI 编译器编译修改后的源代码，但现在这不太可能成为问题。如果您能够做到这一点，那么生成的代码应该更容易维护。

或者，由于 生成的输出`ctags`相当简单，手动将相关标签添加到`tags`文件中应该不会太困难（尽管自动维护它可能很困难）。

# quaternions - 像 3ds/gmax 这样的四元数加法与它的 quats

> ID：14008089
> 
> 赞同：0
> 
> 时间：2012-12-23T02:05:07.027
> 
> 标签：quaternions

我正在处理的一个项目需要一个模拟 3ds/gmax 的四元数加法的函数。(quat 1 2 3 4)+(quat 3 5 7 9) 的测试用例应该等于 (quat 20 40 54 2)。这些季铵盐在 xyzw 中。所以，我认为这是基本代数，给定干净的数字。它必须是这样的乘法函数，因为它不涉及 sin/cos：

```
 const quaternion &operator *=(const quaternion &q)      
    {
        float x= v.x, y= v.y, z= v.z, sn= s*q.s - v*q.v;
        v.x= y*q.v.z - z*q.v.y + s*q.v.x + x*q.s;
        v.y= z*q.v.x - x*q.v.z + s*q.v.y + y*q.s;
        v.z= x*q.v.y - y*q.v.x + s*q.v.z + z*q.s;
        s= sn;
        return *this;
    } 
```

[资源](http://willperone.net/Code/quaternion.php "资源")

但是，我不明白 sn= s*qs - v*qv 应该如何工作。s 是浮点数，v 是向量。将向量相乘并添加到浮点数？我什至不确定这些值代表哪些方向/旋转/方向，但如果函数满足上面的 quat 值，它就会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T21:49:52.283

找到了。结果被称为乘法。加法是乘法。向上是横向的。一点也不混乱：/

```
fn qAdd q1 q2 = (
x1=q1.x
y1=q1.y
z1=q1.z
w1=q1.w
x2=q2.x
y2=q2.y
z2=q2.z
w2=q2.w

W = (W1 * W2) - (X1 * X2) - (Y1 * Y2) - (Z1 * Z2)
X = (W1 * X2) + (X1 * W2) + (Y1 * Z2) - (Z1 * Y2)
Y = (W1 * Y2) + (Y1 * W2) + (Z1 * X2) - (X1 * Z2)
Z = (W1 * Z2) + (Z1 * W2) + (X1 * Y2) - (Y1 * X2)

return (quat x y z w) 
```

)

交换 q1 和 q2 会产生不同的结果，既不像加法也不像乘法。

[资源](http://irrlicht.sourceforge.net/docu/quaternion_8h_source.html "资源")

# c# - 我将如何读写加密的 XML 文件？

> ID：14008090
> 
> 赞同：1
> 
> 时间：2012-12-23T02:05:10.587
> 
> 标签：c#, xml, winforms, encryption

我将如何读取和写入加密的 XML 文件？我需要一种方法来保存用户最后输入的表单值，但我不希望它们像纯文本或 XML 一样可读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T02:32:06.493

您可以随时使用全面的类集合来保护`System.Security.Cryptography.Xml Namespace`.

花一些时间阅读以下文章 MSDN 文章：

*   [如何：使用对称密钥加密 XML 元素](http://msdn.microsoft.com/en-us/library/sb7w85t6.aspx)
*   [如何：使用对称密钥解密 XML 元素](http://msdn.microsoft.com/en-us/library/ms229740.aspx)
*   [如何：使用数字签名对 XML 文档进行签名](http://msdn.microsoft.com/en-us/library/ms229745.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-14)

如果您访问任何链接文章的导航菜单中的根节点，您可以查看更多关于 XML 安全性的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T02:18:52.987

我想，你可以只保存用户保存的字符串，然后用加密的字符串编写一个普通的 XML 文件？

[这是这里](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)的一个例子

```
public class Crypto
{
    private static byte[] _salt = Encoding.ASCII.GetBytes("o6806642kbM7c5");

    /// <summary>
    /// Encrypt the given string using AES.  The string can be decrypted using 
    /// DecryptStringAES().  The sharedSecret parameters must match.
    /// </summary>
    /// <param name="plainText">The text to encrypt.</param>
    /// <param name="sharedSecret">A password used to generate a key for encryption.</param>
    public static string EncryptStringAES(string plainText, string sharedSecret)
    {
        if (string.IsNullOrEmpty(plainText))
            throw new ArgumentNullException("plainText");
        if (string.IsNullOrEmpty(sharedSecret))
            throw new ArgumentNullException("sharedSecret");

        string outStr = null;                       // Encrypted string to return
        RijndaelManaged aesAlg = null;              // RijndaelManaged object used to encrypt the data.

        try
        {
            // generate the key from the shared secret and the salt
            Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(sharedSecret, _salt);

            // Create a RijndaelManaged object
            aesAlg = new RijndaelManaged();
            aesAlg.Key = key.GetBytes(aesAlg.KeySize / 8);

            // Create a decrytor to perform the stream transform.
            ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for encryption.
            using (MemoryStream msEncrypt = new MemoryStream())
            {
                // prepend the IV
                msEncrypt.Write(BitConverter.GetBytes(aesAlg.IV.Length), 0, sizeof(int));
                msEncrypt.Write(aesAlg.IV, 0, aesAlg.IV.Length);
                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                {
                    using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                    {
                        //Write all data to the stream.
                        swEncrypt.Write(plainText);
                    }
                }
                outStr = Convert.ToBase64String(msEncrypt.ToArray());
            }
        }
        finally
        {
            // Clear the RijndaelManaged object.
            if (aesAlg != null)
                aesAlg.Clear();
        }

        // Return the encrypted bytes from the memory stream.
        return outStr;
    }

    /// <summary>
    /// Decrypt the given string.  Assumes the string was encrypted using 
    /// EncryptStringAES(), using an identical sharedSecret.
    /// </summary>
    /// <param name="cipherText">The text to decrypt.</param>
    /// <param name="sharedSecret">A password used to generate a key for decryption.</param>
    public static string DecryptStringAES(string cipherText, string sharedSecret)
    {
        if (string.IsNullOrEmpty(cipherText))
            throw new ArgumentNullException("cipherText");
        if (string.IsNullOrEmpty(sharedSecret))
            throw new ArgumentNullException("sharedSecret");

        // Declare the RijndaelManaged object
        // used to decrypt the data.
        RijndaelManaged aesAlg = null;

        // Declare the string used to hold
        // the decrypted text.
        string plaintext = null;

        try
        {
            // generate the key from the shared secret and the salt
            Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(sharedSecret, _salt);

            // Create the streams used for decryption.                
            byte[] bytes = Convert.FromBase64String(cipherText);
            using (MemoryStream msDecrypt = new MemoryStream(bytes))
            {
                // Create a RijndaelManaged object
                // with the specified key and IV.
                aesAlg = new RijndaelManaged();
                aesAlg.Key = key.GetBytes(aesAlg.KeySize / 8);
                // Get the initialization vector from the encrypted stream
                aesAlg.IV = ReadByteArray(msDecrypt);
                // Create a decrytor to perform the stream transform.
                ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))

                        // Read the decrypted bytes from the decrypting stream
                        // and place them in a string.
                        plaintext = srDecrypt.ReadToEnd();
                }
            }
        }
        finally
        {
            // Clear the RijndaelManaged object.
            if (aesAlg != null)
                aesAlg.Clear();
        }

        return plaintext;
    }

    private static byte[] ReadByteArray(Stream s)
    {
        byte[] rawLength = new byte[sizeof(int)];
        if (s.Read(rawLength, 0, rawLength.Length) != rawLength.Length)
        {
            throw new SystemException("Stream did not contain properly formatted byte array");
        }

        byte[] buffer = new byte[BitConverter.ToInt32(rawLength, 0)];
        if (s.Read(buffer, 0, buffer.Length) != buffer.Length)
        {
            throw new SystemException("Did not read byte array properly");
        }

        return buffer;
    }
} 
```

# mysql - MySQL：在一个语句中组合 2 列的结果

> ID：14008092
> 
> 赞同：6
> 
> 时间：2012-12-23T02:05:32.893
> 
> 标签：mysql, sql, join, union

可以说我有2个结果集如下

```
 R1        R2
| 1 |     | 5 |
| 2 |     | 6 |
| 3 |     | 7 |
| 4 |     | 8 | 
```

我需要将这些结果组合成一个集合，所以我会有这样的东西：

```
 R3
| 1 |
| 2 |
| 3 |
| 4 |
| 5 |
| 6 |
| 7 |
| 8 | 
```

目前，我正在使用 aa UNION 执行此操作，如下所示：

```
SELECT c_1 AS result FROM table WHERE c_1=3 OR c_2=3
UNION
SELECT c_2 AS result FROM table WHERE c_1=3 OR c_2=3 
```

基本上，我最终在表上执行了两次相同的操作，每次只检索不同的行。有没有更有效的方法可以做到这一点？我需要将结果放在单个列中，因为这是 IN 的限制。从长远来看，我需要做的是

```
SELECT name FROM person WHERE person_id IN
(SELECT c_1 AS result FROM table WHERE c_1=3 OR c_2=3
UNION
SELECT c_2 AS result FROM table WHERE c_1=3 OR c_2=3) 
```

有没有更好的方法来找到所有这些？欢迎任何和所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T02:12:48.670

而不是子查询，您*可以*`IN ()`执行`INNER JOIN` *`c_1 OR c_2`*

 *```
SELECT
  name
FROM 
  person
  /* Join against the other table on *either* column c_1 or c_2 */
  INNER JOIN `table` ON `table`.c_1 = person.person_id OR `table`.c_2 = person.person_id
WHERE
  /* And the WHERE condition only needs to be applied once */
  c_1 = 3 OR c_2 = 3 
```

[http://sqlfiddle.com/#!2/4d159/1](http://sqlfiddle.com/#!2/4d159/1)*

# c# - 如何在 C# 中从 XML（XML 来自 Web 服务）创建 Crystal Report

> ID：14008094
> 
> 赞同：4
> 
> 时间：2012-12-23T02:06:13.187
> 
> 标签：c#, xml, crystal-reports, linq-to-xml, crystal-reports-2010

我想知道如何从 XML（XML 来自 Web 服务）创建水晶报表，我在一些教程中读到它需要找到文件并拖动报表中的字段，但是来自网络服务？

这是我如何从 Web 服务获取 XML 的代码

```
 var doc = XDocument.Parse(trx.GetCardTrx("xxxxx", "xxxx", "xxx", "", dateTimePicker1.Text, dateTimePicker2.Text, "", "", "", "", "", "", "", "", "", "", "", "FALSE", "", "", "", "", "", "", "", "", "", "", ""));
MessageBox.Show(doc.ToString()); 
```

所以这段代码返回这种值（`From MessageBox.Show(doc.ToString()`）

![在此处输入图像描述](../Images/5d3c5635036348f9647e7bcb20fe613c.png)

这是应该在报告中的选定值的代码

```
var summary = from r in doc.Descendants("TrxDetailCard") 
                      select new 
                      {
                          Account_Type = r.Element("Account_Type_CH").Value,
                          Captured = r.Element("Captured").Value,
                          Trans_Type_ID = r.Element("Trans_Type_ID").Value,
                          Acct_Num_CH = r.Element("Acct_Num_CH").Value,
                          Tip_Amt_MN = r.Element("Tip_Amt_MN").Value,
                          Total_Amt_MN = r.Element("Total_Amt_MN").Value,
                          Date_DT = r.Element("Date_DT").Value,
                      }; 
```

而我想要发生的是使用 Crystal Reports 创建一个具有此值的报表，而不是所有值。仅选定的值。我怎么可能做到这一点？任何想法都会有很大帮助谢谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T02:24:03.290

这尚未经过测试，但您可以尝试以下类似的方法

```
using System.Xml;
using System.Xml.Linq;

var doc = XDocument.Parse(trx.GetCardTrx("xxxxx", "xxxx", "xxx", "", dateTimePicker1.Text, dateTimePicker2.Text, "", "", "", "", "", "", "", "", "", "", "", "FALSE", "", "", "", "", "", "", "", "", "", "", ""));

  var data = new DataSet();
  var context = new XmlParserContext(null, new XmlNamespaceManager(new NameTable()), null, XmlSpace.None);
  var reader = doc
  data.ReadXml(reader);

  var report = new ReportDocument();

  report.SetDataSource(data);
  this.crystalReportViewer1.ReportSource.ReportSource = report; 
```

理论上的想法应该可以工作，但您可以从此链接引用类似的东西 [XML-based Crystal Report not updated child objects on refresh](https://stackoverflow.com/questions/13504563/xml-based-crystal-report-not-updating-child-objects-on-refresh)

# c# - 如何在不保存的情况下在 IE 中打开动态创建的 html 页面（C# + API 或 COM）

> ID：14008099
> 
> 赞同：0
> 
> 时间：2012-12-23T02:07:50.513
> 
> 标签：c#, html, api, dynamic, com

**你好！**

如何使用它的 API 或 COM 在 IE 中打开动态生成的 html 页面？ *问题是它的页面没有真正的链接地址......* 我无法在分配时将文件保存到磁盘或剪贴板。

**谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:34:48.273

查看[此链接，了解使用 javascript 从头开始​​构建 html 页面的示例](https://developer.mozilla.org/en-US/docs/DOM/DOMImplementation.createHTMLDocument)。您应该能够做类似的事情，将您似乎已经拥有（先前生成的）的所有 html 插入为新文档的 html。

# ruby-on-rails - #<# 的未定义方法“tasks_path” :0xb663b3c8>

> ID：14008100
> 
> 赞同：0
> 
> 时间：2012-12-23T02:09:08.173
> 
> 标签：ruby-on-rails

我有两个控制器：`tasks`和`workers`.

我参观了`localhost:3000/workers`。当我按下“添加新任务”（这是我放的链接：）`<%= link_to 'Add a New Task', new_worker_path %>`时，出现错误：

```
NoMethodError in Workers#new

Showing /home/alon/projects/todo/app/views/workers/new.html.erb where line #3 raised:

undefined method `tasks_path' for #<#<Class:0xb663ccf0>:0xb663b3c8>
Extracted source (around line #3):

1: <h1>New task</h1>
2: 
3: <%= form_for @workers do |f| %>
4:  <p>
5:      <%= f.label :name %><br />
6:      <%= f.text_field :name %>
Rails.root: /home/alon/projects/todo

Application Trace | Framework Trace | Full Trace
app/views/workers/new.html.erb:3:in     `_app_views_workers_new_html_erb___132490529__619346358'
app/controllers/workers_controller.rb:28:in `new'
Request

Parameters:

None
Show session dump

Show env dump

Response

Headers:

None 
```

为什么我会收到这些错误？

我创建了文件`_form.html.erb`, `index.html.erb`, `new.html.erb`,`show.html.erb`和`edit.html.erb`in `views/workers`。

我在中定义`routes.rb`：

```
resources :workers do
    resources :tasks
end 
```

这是我的`workers_controller`：

```
class WorkersController < ApplicationController

  def index
    @workers = Task.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @workers }
    end
  end

  # GET /workers/1
  # GET /workers/1.json
  def show
    #.find(params[:id])
     @workers = Task.find(params[:id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @workers }
    end
  end

  # GET /workers/new
  # GET /workers/new.json
  def new
    @workers = Task.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @workers }
    end
  end

  # GET /workers/1/edit
  def edit
    @worker = Task.find(params[:id])
  end

  # POST /workers
  # POST /workers.json
  def create
    @worker = Task.new(params[:task])

    respond_to do |format|
      if @worker.save
        format.html { redirect_to @worker, notice: 'Your task was created.' }
        format.json { render json: @worker, status: :created, location: @worker }
      else
        render "new"
      end
    end
  end

  # PUT /workers/1
  # PUT /workers/1.json
  def update
    @worker = Task.find(params[:id])

    respond_to do |format|
      if @worker.update_attributes(params[:task])
        format.html { redirect_to @worker, notice: 'Task was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @worker.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /workers/1
  # DELETE /workers/1.json
  def destroy
    @worker = Task.find(params[:id])
    @worker.destroy

    respond_to do |format|
      format.html { redirect_to tasks_url }
      format.json { head :no_content }
    end
  end

end 
```

另外，我在以下代码中编写了`models/tasks.rb`：

```
class Task < ActiveRecord::Base
  belongs_to :Worker
  attr_accessible :done, :name, :task
end 
```

这是我的`workers/new.html.erb`文件：

```
<h1>New task</h1>

<%= form_for @workers do |f| %>
<p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
</p>
<p>
    <%= f.label :task %><br />
    <%= f.text_area :task %>
</p>
<p>
    <%= f.label :done %><br />
    <%= f.check_box :done %>    
</p>
<p>
    <%= f.submit "add a new task" %>
</p>
<% end %> 
```

这是`workers/_form.html.erb`：

```
<%= form_for(@task) do |f| %>

  <% if @task.errors.any? %>
      <div id="error_explanation">
          <h2><%= pluralize(@task.errors.count, "error") %> prohibited this task from being saved:</h2>
          <ul>
              <% @task.errors.full_messages.each do |msg| %>
                 <li><%= msg %></li>
              <% end %>
          </ul>
      </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :task %><br />
    <%= f.text_area :task %>
  </div>
  <div class="field">
    <%= f.label :done %><br />
    <%= f.check_box :done %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:25:39.467

如果您输入 rake routes，您将看到：

```
$ rake routes
    worker_tasks GET    /workers/:worker_id/tasks(.:format)          tasks#index
                 POST   /workers/:worker_id/tasks(.:format)          tasks#create
 new_worker_task GET    /workers/:worker_id/tasks/new(.:format)      tasks#new
... 
```

因此，当您`new_worker_task`将**工人****传给****.**

```
<%= link_to 'Add a New Task', new_worker_task_path(worker) %> # (below) 
```

我在本地重新创建了您的应用程序并使其可以使用：

```
<table>
  <tr>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @workers.each do |worker| %>
  <tr>
    <td><%= link_to 'Show', worker %></td>
    <td><%= link_to worker.name, worker %></td>
    <td><%= link_to 'Edit', edit_worker_path(worker) %></td>
    <td><%= link_to 'New Task', new_worker_task_path(worker) %>
    <td><%= link_to 'Destroy', worker, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table> 
```

请注意，我为工作人员添加了一个“名称”属性，以使其更易于显示（将其添加到表单和索引页面，当然还有一个数据库迁移以将其添加到数据库中）。

正如 pjammer 指出的那样，您也可以通过nested_attributes 在表单中执行此操作，例如`form_for([@worker, @task])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:11:45.583

您似乎正在使用嵌套路由，但正在传入`Task.new`而不是类似的东西`Worker.new`，如果您想向工作人员添加任务，请使用`accepts_nested_attributes_for`或创建表单对象来处理任务的创建。

# c# - XAML 中的命名空间错误中不存在类

> ID：14008101
> 
> 赞同：2
> 
> 时间：2012-12-23T02:09:28.433
> 
> 标签：c#, wpf, xaml, reference, namespaces

我有一个类，它为对象选择 ItemDataTemplate。但我无法在我的 XAML 代码中引用它。（页面.资源）。

它是 XAML 中的项目页面。该类位于 commons 文件夹中，我在这里引用了 commons 文件夹：

```
xmlns:common="using:Sample_App.Common" 
```

然后当我不想将它添加到我的 XAML 时：

```
<common:MyDataTemplateSelector x:Key="Selector" AdTemplate="{StaticResource Ad}" NormalTemplate="{StaticResource Normal}"></common:MyDataTemplateSelector> 
```

我收到以下错误：

> 名称空间“using:MyDataSelector”中不存在名称“MyDataTemplateSelector”

这是 MyDataSelector 类：

```
namespace MyDataSelector
{
    private class MyDataTemplateSelector : DataTemplateSelector
    {
        public DataTemplate NormalTemplate { get; set; }

        public DataTemplate AdTemplate{ get; set; }

        protected override DataTemplate SelectTemplateCore(object item, DependencyObject container)
        {
            if (item is TestApp.Mainpage.NormalData)
                return NormalTemplate
            if (item is TestApp.Mainpage.AdData)
                return AdTemplate;

            return SelectTemplateCore(item, container);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T05:49:12.670

您的代码有几个问题。首先，您提到您的课程位于“公共文件夹”中 - 这完全无关紧要。*代码文件的位置通常对编译器*无关紧要，但您在其中声明类的命名空间却很重要。

```
namespace MyDataSelector // <- This is where your class can be found
{
    private class MyDataTemplateSelector : DataTemplateSelector
    { 
```

因此，由于您的类位于命名空间中`MyDataSelector`，因此您的 xaml 文件中的引用应如下所示：

```
<Page x:Class="WpfApplication1.Page1"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:myDataSelector="using:MyDataSelector"> 
```

你会像这样引用你的类：

```
<myDataSelector:MyDataTemplateSelector /> 
```

另一个问题是你的类被声明为私有的。这没有意义，可能不会编译。删除`private`以使您的课程成为内部课程，或将其更改为`public`.

# android - 网格初始化时的片段崩溃

> ID：14008105
> 
> 赞同：0
> 
> 时间：2012-12-23T02:11:06.270
> 
> 标签：android, view, crash, actionbarsherlock, fragment

当我使用此片段切换到选项卡时，它总是崩溃。logcat 似乎说它在 `mGrid = (GridView) (getView().findViewById(R.id.gridViewRed)); 上崩溃了 知道为什么吗？

RedScorerFragment.java

```
public class RedScorerFragment extends SherlockFragment {

    LayoutInflater infl;
    GridView mGrid;
    @Override
    public void onCreate(Bundle savedInstanceState){
        mGrid = (GridView) (getView().findViewById(R.id.gridViewRed));
        mGrid.setOnTouchListener(new OnTouchListener(){
            @Override
            public boolean onTouch(View v, MotionEvent event){
                if(event.getAction() == MotionEvent.ACTION_MOVE)
                    return true;
                return false;
            }
        });
        mGrid.setAdapter(new ImageAdapter(getActivity()));
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        infl = inflater;
        return inflater.inflate(R.layout.fragment_score_red, container, false);
    } 
```

fragment_score_red.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".RedScorerFragment">

<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    >

    <TextView 
        android:id="@+id/gridLabel__red"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:text="@string/grid_label__red"
        android:background="@color/white"
        />
    <GridView
        android:id="@+id/gridViewRed"
        android:layout_width="wrap_content"
        android:layout_height="350dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/gridLabel__red"
        android:columnWidth="40dp"
        android:numColumns="3"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="7dp"
        android:gravity="center"
        android:background="@color/white"

        >

    </GridView>

    <LinearLayout 
        android:id="@+id/linLayoutSide__red"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:layout_below="@id/gridView__red"
        android:layout_alignParentLeft="true"
        android:orientation="horizontal"
         >

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/weighted_label"
            />

        <EditText
            android:id="@+id/waitRed__red"
            android:inputType="number"
            android:maxLength="1"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:gravity="center"
            android:textColor="@color/red"
            />

        <EditText
            android:id="@+id/waitBlue__red"
            android:inputType="number"
            android:maxLength="1"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:gravity="center"
            android:textColor="@color/blue" />

    </LinearLayout>

</RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T02:13:50.623

你需要重新考虑你在哪里找到你的观点。这是因为[**之前调用了 onCreate()**](http://developer.android.com/images/fragment_lifecycle.png) `onCreateView()`

所以你应该搬家

```
mGrid = (GridView) (getView().findViewById(R.id.gridViewRed));
    mGrid.setOnTouchListener(new OnTouchListener(){
        @Override
        public boolean onTouch(View v, MotionEvent event){
            if(event.getAction() == MotionEvent.ACTION_MOVE)
                return true;
            return false;
        }
    });
    mGrid.setAdapter(new ImageAdapter(getActivity())); 
```

这意味着你不需要返回`onCreateView()`通货膨胀，而是使用它，所以你的 onCreateView() 应该是这样的：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        infl = inflater;
        View mView = inflater.inflate(R.layout.fragment_score_red, container, false);
        mGrid = (GridView) (mView.findViewById(R.id.gridViewRed));
        //rest of code above
        return   mView;
  } 
```

# ios6 - 打开“查找我的朋友”的 URL

> ID：14008110
> 
> 赞同：0
> 
> 时间：2012-12-23T02:12:53.610
> 
> 标签：ios6

在 iOS 上打开“查找我的朋友”应用程序的 URL 是什么？

我想创建一个启动 Apples 的应用程序找到我的朋友（或 AppStore，如果未安装）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:17:19.737

Handleopenurl.com 列出了大量的应用程序，也可以找到我的朋友：[http](http://handleopenurl.com/scheme/find-my-friends) ://handleopenurl.com/scheme/find-my-friends 。

# android - 如何在本地 repo 中切换 android 版本？

> ID：14008113
> 
> 赞同：19
> 
> 时间：2012-12-23T02:13:30.053
> 
> 标签：android, git, tags, repository, git-checkout

我已经使用以下命令下载了整个工作树：

```
repo init -u https://android.googlesource.com/platform/manifest
repo sync -j8 
```

同步成功后，我想将工作树切换到 android 2.3.7。你看我在“repo init”时没有用“-b”参数指定分支。所以我想应该下载所有标签信息，我可以使用以下命令轻松切换到 android 2.3.7：

```
repo forall -c git checkout android-2.3.7_r1 
```

但它会产生许多错误，例如：

```
error: pathspec 'android-2.3.7_r1' did not match any file(s) known to git. 
```

那么如何在没有“repo init -b android-2.3.7_r1”和“repo sync”的情况下切换到 android 2.3.7 呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-16T07:56:02.793

您无法使用`repo forall`.

让我们确定您当前的 Android 树是干净的 - 没有本地更改或提交，即`repo status`没有显示任何内容。

要正确切换 Android 版本，您只需更改清单存储库的分支。首先确定具有不同 Android 版本的清单的可用分支：

```
cd $ANDROID_ROOT
cd .repo/manifests
git branch -av   # see all available branches on origin 
```

选择一个版本并

```
cd $ANDROID_ROOT
repo init -b <my_selected_android_version> 
```

`repo init`这种带有`-b`（不带）的选择性`-u`只会更新清单分支，并且不会以其他方式触及您的树。

现在，只需同步它：

```
repo sync -j8 
```

一段时间后，您的 Android 树将切换到另一个版本。

`default.xml`此操作的速度主要取决于新旧 Android 版本之间的清单文件差异有多少- 因为如果在新清单中添加了一些 git 存储库，它将花费时间克隆它。如果某个存储库被删除，如果真的把它吹走。

但是，总的来说，这种方法仍然比从头开始初始化全新的 Android 树快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T08:31:29.743

如果您所在的分支和您将切换到的分支具有相同的 manifest.xml 文件，那么您可以使用以下命令来执行此操作。

```
repo forall -c git fetch aosp --tags 
repo forall -c git checkout -b john5.1.1_r14_api22 android-5.1.1_r14 
```

另请参阅 [http://johnliao52.github.io/2016/03/27/git-repo-skills.html中的详细信息](http://johnliao52.github.io/2016/03/27/git-repo-skills.html)

# html - Haml中的合并表头

> ID：14008117
> 
> 赞同：13
> 
> 时间：2012-12-23T02:13:58.370
> 
> 标签：html, haml

我试图在haml中完成这个：![在此处输入图像描述](../Images/a292f5db6e5797d164c00134c05a6b9f.png)

如何调整以下内容以合并单元格标题以完成与 excel 图片相同的操作：

```
%table
  %tbody
    %tr
      %th Name
      %th Sunday      
      %th Monday
      %th Tuesday
      %th Wednesday
      %th Thursday
      %th Friday
      %th Saturday
    %tr
      %th 1
      %th 2
      %th 3
      %th 4
      %th 5 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-23T02:19:40.077

看起来你想要`colspan`and`rowspan`属性。[这是一个演示。](http://codepen.io/joe/pen/rtdfq)

```
%table
  %tbody
    %tr
      %th{:rowspan => 2} Name 
      %th{:colspan => 5} Sunday
      %th{:colspan => 5} Monday
      %th{:colspan => 5} Tuesday
      %th{:colspan => 5} Wednesday
      %th{:colspan => 5} Thursday
      %th{:colspan => 5} Friday
      %th{:colspan => 5} Saturday
    %tr
      - 7.times do
        %th 1
        %th 2
        %th 3
        %th 4
        %th 5 
```

# jquery - jquery 命名空间：如何将默认选项从一种方法传递给子序列方法？

> ID：14008121
> 
> 赞同：3
> 
> 时间：2012-12-23T02:15:16.910
> 
> 标签：jquery, jquery-plugins, namespaces, javascript-namespaces

如何将**默认选项**从一种方法传递给**子序列方法**？

例如，我在方法中有一些**默认设置**`init`。我想将这些设置用于其他方法，例如`show`，

```
(function($) {
    var methods = {
        init: function(options) {
            var defaults = {
                element:    "selection"
            }

            var options =  $.extend(defaults, options);
            var o = options;

            alert(o.element);
        },
        show: function(o) {
            alert(o.element);
        },
        hide: function() {
            alert(o.element);
        }
    };

 $.fn.plugin = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery );

var blah = $('#hello').plugin('show'); // TypeError: o is undefined 
```

我想得到`selection`答案……有可能吗？

**编辑：**

```
(function($) {

    $.fn.plugin = function( method ) {

        if ( methods[method] ) {
          return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
          return methods.init.apply( this, arguments );
        } else {
          $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
        }    

     }; 

     $.fn.plugin.defaults = {
        attr: 'checked',
        expected: true,
        onChange: function(){}
      }; 

    var methods = {

        init: function(options) {
            var options = $.extend({}, $.fn.plugin.defaults, options);
            var o = options;

            var $this = this;

            $this.show();
            //alert(o.attr);
        },
        show: function(options) {

            var options = $.extend({}, $.fn.plugin.defaults, options);
            var o = options;

            alert(o.expected);
        },
        hide: function(object) {
            alert(o.element);
        }
    };

})( jQuery ); 
```

[参考](http://ryanflorence.com/use-your-fn-jquery-namespace/)

```
var blah = $('#hello').plugin('show',{expected:"#hello world"}); 
```

现在我得到`#hello world`（正确）

但，

```
var blah = $('#hello').plugin('init'); // returns nothing 
```

我想得到`true`答案，因为`init`正在访问`show`. 那么如何从**一个方法访问****其他方法**呢？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:58:10.600

在我看来，您正在尝试重新发明可扩展的 jquery 插件（又名 jQuery UI 小部件）。我可以向您介绍很多如何完成您正在尝试做的事情，但这确实是在重新发明轮子。jQuery UI Widget Factory 非常适合这种类型的东西。

[jQuery Widget](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory) Factory——这是他们的旧文档，但它比其他任何东西都更好地概述了小部件工厂，恕我直言。他们在 1.9/1.10 中对其进行了一些小改动，但大部分概念仍然相同。

**编辑**

这是我对您的代码的修改。我相信这可以满足您的需求。

```
(function($) {
    var methods = {
        init: function(options) {
            var defaults = {
                element:    "selection"
            }

            this.options =  $.extend(defaults, options);

            alert("init: " + this.options.element);
        },
        show: function() {
            alert("show: "  + this.options.element);
        },
        hide: function() {
            alert("hide: " + this.options.element);
        }
    };

 $.fn.plugin = function( method ) {
    if ( methods[method] ) {
      methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    } 
    return this; // this is needed to ensure chainability
 };

})( jQuery );

var blah = $('#hello').plugin('init').plugin('show');​ 
```**

# bash - Shell脚本通用模板

> ID：14008125
> 
> 赞同：64
> 
> 时间：2012-12-23T02:15:53.250
> 
> 标签：bash, shell

数以百万计的开发人员编写 shell 脚本来解决各种类型的任务。我使用 shell 脚本来简化部署、生命周期管理、安装或简单地用作[胶水语言](http://en.wikipedia.org/wiki/Glue_language)。

我注意到没有人真正关心 shell 脚本的样式和质量。许多团队花费大量时间来修复 Java、C++、... 样式问题，但完全忽略了他们的 shell 脚本中的问题。顺便说一句，通常没有标准的方法来在特定项目中实现 shell 脚本，因此人们可能会发现许多不同的、丑陋的和有缺陷的脚本，散布在代码库中。

为了在我的项目中克服这个问题，我决定创建一个通用且足够好的 shell 脚本模板。我将按原样提供我的模板，以使这个问题更有用。开箱即用的这些模板提供：

*   命令行参数处理
*   同步
*   一些基本的帮助

**参数处理：getopts**（最新版本：**[shell-script-template@github](https://github.com/RenatGilmanov/shell-script-template)**）

```
#!/bin/bash
# ------------------------------------------------------------------
# [Author] Title
#          Description
# ------------------------------------------------------------------

VERSION=0.1.0
SUBJECT=some-unique-id
USAGE="Usage: command -ihv args"

# --- Options processing -------------------------------------------
if [ $# == 0 ] ; then
    echo $USAGE
    exit 1;
fi

while getopts ":i:vh" optname
  do
    case "$optname" in
      "v")
        echo "Version $VERSION"
        exit 0;
        ;;
      "i")
        echo "-i argument: $OPTARG"
        ;;
      "h")
        echo $USAGE
        exit 0;
        ;;
      "?")
        echo "Unknown option $OPTARG"
        exit 0;
        ;;
      ":")
        echo "No argument value for option $OPTARG"
        exit 0;
        ;;
      *)
        echo "Unknown error while processing options"
        exit 0;
        ;;
    esac
  done

shift $(($OPTIND - 1))

param1=$1
param2=$2

# --- Locks -------------------------------------------------------
LOCK_FILE=/tmp/$SUBJECT.lock
if [ -f "$LOCK_FILE" ]; then
   echo "Script is already running"
   exit
fi

trap "rm -f $LOCK_FILE" EXIT
touch $LOCK_FILE

# --- Body --------------------------------------------------------
#  SCRIPT LOGIC GOES HERE
echo $param1
echo $param2
# ----------------------------------------------------------------- 
```

[Shell Flags](http://code.google.com/p/shflags/) (shFlags) 允许大量简化命令行参数的处理，所以在某个时刻我决定不忽略这种可能性。

**参数处理：shflags**（最新版本：**[shell-script-template@github](https://github.com/RenatGilmanov/shell-script-template)**）

```
#!/bin/bash
# ------------------------------------------------------------------
# [Author] Title
#          Description
#
#          This script uses shFlags -- Advanced command-line flag
#          library for Unix shell scripts.
#          http://code.google.com/p/shflags/
#
# Dependency:
#     http://shflags.googlecode.com/svn/trunk/source/1.0/src/shflags
# ------------------------------------------------------------------
VERSION=0.1.0
SUBJECT=some-unique-id
USAGE="Usage: command -hv args"

# --- Option processing --------------------------------------------
if [ $# == 0 ] ; then
    echo $USAGE
    exit 1;
fi

. ./shflags

DEFINE_string 'aparam' 'adefault' 'First parameter'
DEFINE_string 'bparam' 'bdefault' 'Second parameter'

# parse command line
FLAGS "$@" || exit 1
eval set -- "${FLAGS_ARGV}"

shift $(($OPTIND - 1))

param1=$1
param2=$2

# --- Locks -------------------------------------------------------
LOCK_FILE=/tmp/${SUBJECT}.lock

if [ -f "$LOCK_FILE" ]; then
echo "Script is already running"
exit
fi

trap "rm -f $LOCK_FILE" EXIT
touch $LOCK_FILE

# -- Body ---------------------------------------------------------
#  SCRIPT LOGIC GOES HERE
echo "Param A: $FLAGS_aparam"
echo "Param B: $FLAGS_bparam"
echo $param1
echo $param2
# ----------------------------------------------------------------- 
```

我确实认为可以改进这些模板以进一步简化开发人员的生活。

**所以问题是如何改进它们以具有以下特性：**

*   **内置日志记录**
*   **更好的错误处理**
*   **更好的便携性**
*   **占地面积更小**
*   **内置执行时间跟踪**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-04-11T14:52:27.210

这是我的脚本外壳模板的标题（可以在这里找到：[http](http://www.uxora.com/unix/shell-script/18-shell-script-template) ://www.uxora.com/unix/shell-script/18-shell-script-template ）。

它`man`与usage() 习惯于使用的外观相似，也用于diplsay 帮助。

```
#!/bin/ksh
#================================================================
# HEADER
#================================================================
#% SYNOPSIS
#+    ${SCRIPT_NAME} [-hv] [-o[file]] args ...
#%
#% DESCRIPTION
#%    This is a script template
#%    to start any good shell script.
#%
#% OPTIONS
#%    -o [file], --output=[file]    Set log file (default=/dev/null)
#%                                  use DEFAULT keyword to autoname file
#%                                  The default value is /dev/null.
#%    -t, --timelog                 Add timestamp to log ("+%y/%m/%d@%H:%M:%S")
#%    -x, --ignorelock              Ignore if lock file exists
#%    -h, --help                    Print this help
#%    -v, --version                 Print script information
#%
#% EXAMPLES
#%    ${SCRIPT_NAME} -o DEFAULT arg1 arg2
#%
#================================================================
#- IMPLEMENTATION
#-    version         ${SCRIPT_NAME} (www.uxora.com) 0.0.4
#-    author          Michel VONGVILAY
#-    copyright       Copyright (c) http://www.uxora.com
#-    license         GNU General Public License
#-    script_id       12345
#-
#================================================================
#  HISTORY
#     2015/03/01 : mvongvilay : Script creation
#     2015/04/01 : mvongvilay : Add long options and improvements
# 
#================================================================
#  DEBUG OPTION
#    set -n  # Uncomment to check your syntax, without execution.
#    set -x  # Uncomment to debug this shell script
#
#================================================================
# END_OF_HEADER
#================================================================ 
```

这是要使用的使用功能：

```
 #== needed variables ==#
SCRIPT_HEADSIZE=$(head -200 ${0} |grep -n "^# END_OF_HEADER" | cut -f1 -d:)
SCRIPT_NAME="$(basename ${0})"

  #== usage functions ==#
usage() { printf "Usage: "; head -${SCRIPT_HEADSIZE:-99} ${0} | grep -e "^#+" | sed -e "s/^#+[ ]*//g" -e "s/\${SCRIPT_NAME}/${SCRIPT_NAME}/g" ; }
usagefull() { head -${SCRIPT_HEADSIZE:-99} ${0} | grep -e "^#[%+-]" | sed -e "s/^#[%+-]//g" -e "s/\${SCRIPT_NAME}/${SCRIPT_NAME}/g" ; }
scriptinfo() { head -${SCRIPT_HEADSIZE:-99} ${0} | grep -e "^#-" | sed -e "s/^#-//g" -e "s/\${SCRIPT_NAME}/${SCRIPT_NAME}/g"; } 
```

这是您应该获得的：

```
# Display help
$ ./template.sh --help

    SYNOPSIS
    template.sh [-hv] [-o[file]] args ...

    DESCRIPTION
    This is a script template
    to start any good shell script.

    OPTIONS
    -o [file], --output=[file]    Set log file (default=/dev/null)
                                  use DEFAULT keyword to autoname file
                                  The default value is /dev/null.
    -t, --timelog                 Add timestamp to log ("+%y/%m/%d@%H:%M:%S")
    -x, --ignorelock              Ignore if lock file exists
    -h, --help                    Print this help
    -v, --version                 Print script information

    EXAMPLES
    template.sh -o DEFAULT arg1 arg2

    IMPLEMENTATION
    version         template.sh (www.uxora.com) 0.0.4
    author          Michel VONGVILAY
    copyright       Copyright (c) http://www.uxora.com
    license         GNU General Public License
    script_id       12345

# Display version info
$ ./template.sh -v

    IMPLEMENTATION
    version         template.sh (www.uxora.com) 0.0.4
    author          Michel VONGVILAY
    copyright       Copyright (c) http://www.uxora.com
    license         GNU General Public License
    script_id       12345 
```

您可以在此处获取完整的脚本模板：[http ://www.uxora.com/unix/shell-script/18-shell-script-template](http://www.uxora.com/unix/shell-script/18-shell-script-template)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-23T14:04:16.263

我会避免依赖于shell，并在[POSIX 定义的 shell 语法](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html)`bash`之上为您的解决方案建模并在 shebang 上使用。最近，当[Ubuntu 更改](https://wiki.ubuntu.com/DashAsBinSh)[为](https://wiki.ubuntu.com/DashAsBinSh).`/bin/sh`[`/bin/sh``dash`](https://wiki.ubuntu.com/DashAsBinSh)

shell 世界的另一个流行病是对退出状态代码的普遍误解。以可理解的代码退出是让其他 shell 脚本以编程方式对特定故障做出反应的原因。[不幸的是，除了“sysexits.h”头文件](http://www.opensource.apple.com/source/Libc/Libc-320/include/sysexits.h)之外，没有太多的指导。

如果您正在寻找有关良好 shell 脚本编写实践的更多信息，请关注 Korn shell 脚本资源。Ksh 编程倾向于专注于真正的编程，而不是编写随意的脚本。

就个人而言，我没有发现 shell 模板有太多用处。不幸的事实是，大多数工程师只会简单地复制和粘贴您的模板，然后继续编写同样草率的 shell 代码。更好的方法是创建一个具有明确语义的 shell 函数库，然后说服其他人使用它们。这种方法也将有助于变更控制。例如，如果您在模板中发现缺陷，那么基于它的每个脚本都会损坏并且需要修改。使用库可以在一个地方修复缺陷。

欢迎来到 shell 脚本的世界。编写 shell 脚本是一门失传的艺术，似乎正在进入复兴时期。90 年代后期有一些关于这个主题的好书 - [Burns 和 Arthur的](https://rads.stackoverflow.com/amzn/click/com/0471168947)[*UNIX Shell Programming*](https://rads.stackoverflow.com/amzn/click/com/0471168947)浮现在脑海中，尽管亚马逊对这本书的评论让它看起来很糟糕。[*恕我直言，有效的 shell 代码包含 Eric S. Raymond 在The Art of Unix Programming*](http://www.faqs.org/docs/artu/)中描述的 UNIX 哲学。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-23T12:56:15.870

如果您担心可移植性，请不要`==`在测试中使用。改为使用`=`。不要显式检查是否`$#`为 0。而是`${n?error message}`在第一次引用所需参数时使用（例如`${3?error message}`）。这可以防止发出使用语句而不是错误消息的极其烦人的做法。最重要的是，始终将错误消息放在正确的流上并以正确的状态退出。例如：

```
echo "Unknown error while processing options" >&2
exit 1; 
```

执行以下操作通常很方便：

```
die() { echo "$*"; exit 1; } >&2 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-24T22:11:36.933

这是我的 bash 样板，在评论中解释了一些理智的选项

```
#!/usr/bin/env bash

set -e  # Abort script at first error, when a command exits with non-zero status (except in until or while loops, if-tests, list constructs)
set -u  # Attempt to use undefined variable outputs error message, and forces an exit
set -x  # Similar to verbose mode (-v), but expands commands
set -o pipefail  # Causes a pipeline to return the exit status of the last command in the pipe that returned a non-zero return value. 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-25T17:42:16.810

我也会分享我的结果。所有这些例子背后的想法是鼓励整体质量。确保最终结果足够安全也很重要。

**日志记录**

从一开始就提供适当的日志记录非常重要。我只是想考虑生产使用情况。

```
TAG="foo"
LOG_FILE="example.log"

function log() {
    if [ $HIDE_LOG ]; then
        echo -e "[$TAG] $@" >> $LOG_FILE
    else
        echo "[`date +"%Y/%m/%d:%H:%M:%S %z"`] [$TAG] $@" | tee -a $LOG_FILE
    fi
}

log "[I] service start"
log "[D] debug message" 
```

**命令测试**

这是关于安全、现实生活环境和适当的错误处理。可以是可选的。

```
function is_command () {
    log "[I] check if commad $1 exists"
    type "$1" &> /dev/null ;
}

CMD=zip

if is_command ${CMD} ; then
   log "[I] '${CMD}' command found"
else
   log "[E] '${CMD}' command not found"
fi 
```

**模板处理**

可能只是我的主观意见，但无论如何。我使用了几种不同的方法来直接从脚本生成一些配置/等。Perl、sed 和其他人做的工作，但看起来有点吓人。

最近我[注意到](http://blite.ca/?t=16)一个更好的方法：

```
function process_template() {
    source $1 > $2

    result=$?
    if [ $result -ne 0 ]; then
        log "[E] Error during template processing: '$1' > '$2'"
    fi
    return $result
}

VALUE1="tmpl-value-1"
VALUE2="tmpl-value-2"
VALUE3="tmpl-value-3"

process_template template.tmpl template.result 
```

模板示例

```
echo "Line1: ${VALUE1}
Line2: ${VALUE2}
Line3: ${VALUE3}" 
```

结果示例

```
Line1: tmpl-value-1
Line2: tmpl-value-2
Line3: tmpl-value-3 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-26T00:48:49.680

对于 shell 脚本来说，没有比使用示例和已知错误列表的有据可查的行为更有帮助的了。我认为没有一个程序可以称得上是防弹的，并且每时每刻都可能出现错误（尤其是当您的脚本被其他人使用时），所以我唯一要注意的是[良好的编码风格](http://shelldorado.com/goodcoding/)并且只使用这些脚本真正需要的东西。你站在聚合的道路上，它总是会变成一个带有大量未使用模块的大型系统，这些模块很难移植，也很难支持。系统越是便携，它就越大。说真的，shell 脚本不需要以这种方式实现。它们必须尽可能小以简化进一步的使用。

如果系统真的需要大而坚固的东西，那么是时候考虑 C99 甚至 C++了。

# java - 当我尝试开始运行 jabaco 项目时遇到一些错误

> ID：14008126
> 
> 赞同：0
> 
> 时间：2012-12-23T02:16:03.667
> 
> 标签：java, jabaco

我加载 Jabaco，然后打开一个新的 sdi 项目。然后，我单击“项目”菜单和“开始”，但没有结果。但我的桌面名称中显示了一个 txt 文件：hs_err_pid9900.log

部分日志摘录：

> Java 运行时环境检测到一个致命错误：
> 
> EXCEPTION_ACCESS_VIOLATION (0xc0000005) 在 pc=0x7c343023，pid=9900，tid=10016
> 
> JRE 版本：6.0_27-b07 Java VM：Java HotSpot(TM) 客户端 VM（20.2-b06 混合模式 windows-x86）有问题的框架：C [msvcr71.dll+0x3023]

如果您想提交错误报告，请访问：http: [//java.sun.com/webapps/bugreport/crash.jsp](http://java.sun.com/webapps/bugreport/crash.jsp) 崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:27:48.227

Jabaco 论坛中[发布并讨论了](http://www.jabaco.org/board/p1615-jabaco-error.html#post1615)类似的错误。

Jabaco 是一个有趣的项目，它允许 VB6 开发人员转向和使用 Java。但是，由于依赖于单个开发人员，Jabaco 并不总是与最新的 Windows 和 Java 环境保持同步。

您的 msvcr71.dll 可能已损坏或过时。尝试使用早于 6.0_24 的旧版 Java 运行时 我上次的 Jabaco 实验在 Windows XP 上运行。如果您有更新的 Windows，则通常在使用 Jabaco 时可能会遇到问题。

# g-code - Gcode 告诉 RepRap 3D 打印机他在热床中间？

> ID：14008127
> 
> 赞同：0
> 
> 时间：2012-12-23T02:16:09.957
> 
> 标签：g-code

有没有办法使用特定的 gcode 告诉 RepRap 3D 打印机他在加热床中间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:16:21.703

您可以通过 G91 将坐标设置为从中心开始（一旦您已经在那里）：

G91：设置为相对定位

示例：G91

从现在开始的所有坐标都相对于最后一个位置

来自[http://reprap.org/wiki/G-code#M117:_Get_Zero_Position](http://reprap.org/wiki/G-code#M117:_Get_Zero_Position)

# linux - 如何使用 Inkscape 将带有汉字的 SVG 导出为 PNG？

> ID：14008129
> 
> 赞同：-1
> 
> 时间：2012-12-23T02:17:01.380
> 
> 标签：linux, ubuntu, unicode, svg, inkscape

尝试使用 Inkscape 将带有中文字符的 SVG 文件导出为 PNG 时，中文字符会消失。我在 Ubuntu 中使用这个命令：

```
inkscape /root/21.svg -e /root/1.png 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:43:50.257

尝试创建另一个 svg 文件并通过示例添加一个简单的文本：汉语 / 汉语

**我的svg：**

![在此处输入图像描述](../Images/154050c1ce93041e0173f9f4f6d1679a.png)

**我的命令：**

```
inkscape Desktop/chinese.svg -e Desktop/test.png 
```

**我的结果：**

![在此处输入图像描述](../Images/ca249f70befb9911dc9bf8adef48d1d9.png)

# facebook - 使用 Facebook php sdk 邀请用户朋友的页面

> ID：14008135
> 
> 赞同：2
> 
> 时间：2012-12-23T02:18:28.400
> 
> 标签：facebook, facebook-graph-api, invitation

我正在开发一个使用 facebook php sdk 登录用户的网站，我想向他在我的网站中与之交互的 facebook 朋友发送加入该网站的邀请。我知道他互动的 fb 用户 ID，所以我想通过 facebook php sdk 向他发送邀请。

任何想法或示例代码？我不希望用户选择他邀请的用户我已经知道我应该拒绝请求的用户是谁。

十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:25:17.553

为了通知用户的朋友让他与您的网站进行交互，您可以使用[apprequest](https://developers.facebook.com/docs/appsonfacebook/tutorial/#requests)。

# linux - 在输出文件中捕获 Rscript 错误

> ID：14008139
> 
> 赞同：41
> 
> 时间：2012-12-23T02:19:34.120
> 
> 标签：linux, r, rscript

与默认情况下会生成包含任何会导致脚本执行停止的错误消息的输出文件的类似命令不同`R CMD BATCH`，我无法找到使用`Rscript`. 我尝试在我的 linux shell 中使用管道来实现这一点：

```
RScript --no-save --no-restore --verbose myRfile.R > outputFile.Rout 
```

但这只会传递错误发生之前发生的任何输出，因此该文件`outputFile.R`不包含任何错误信息。有谁知道如何捕获使用执行 R 文件`RScript`并将其保存到文件中发生的任何错误？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-23T02:22:22.793

```
Rscript --no-save --no-restore --verbose myRfile.R > outputFile.Rout 2> errorFile.Rout 
```

将输出和错误放在同一个文件中（假设 sh/bash）

```
Rscript --no-save --no-restore --verbose myRfile.R > outputFile.Rout 2>&1 
```

# android - 确定用户字体大小选择

> ID：14008141
> 
> 赞同：10
> 
> 时间：2012-12-23T02:19:55.323
> 
> 标签：android, fonts, font-size

如果用户将其字体大小设置为特大（通过设置 -> 显示 -> 4.0 及更高版本中的字体大小），我有一个 Android 应用程序需要进行一些调整。

有没有一种简单的方法可以告诉我用户的字体大小偏好是什么

**更新：**
在我的 layout.xml 我有类似于设置按钮的行

```
android:textAppearance="?android:attr/textAppearanceMedium"
android:textStyle="bold"
android:typeface="sans" 
```

请注意，我没有直接设置字体大小。这种布局在所有情况下都有效并且看起来不错，除了**超大**设置。在这种情况下，由于空间限制，它会导致按钮的文本换行为 2 行。

**我的目标是在Extra Large**的情况下稍微改变措辞，这样它就不会换行

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T03:18:06.030

[`FONT_SCALE`](http://developer.android.com/reference/android/provider/Settings.System.html#FONT_SCALE)您应该能够查询系统的参数。我自己没有使用过它，但我想检索它的值看起来有点像这样：

```
float fontScale = Settings.System.getFloat(context.getContentResolver(), Settings.System.FONT_SCALE) 
```

但是，我还想指出，通常你不应该直接处理这个值。相反，对文本内容使用`sp`单位，这样您就不必担心自己调整到用户首选的字体大小，而是让系统来处理。

另请参阅：[为什么我们要在 Android 中使用 sp 作为字体大小？](https://stackoverflow.com/questions/7107920/why-should-we-use-sp-for-font-sizes-in-android)

# jquery - 为轮播横幅添加视差效果，使图像和文本以不同的速度移动

> ID：14008143
> 
> 赞同：2
> 
> 时间：2012-12-23T02:20:55.473
> 
> 标签：jquery, css, banner, parallax

我有轮播效果，但我不知道如何使文本和图像以不同的速度移动，如 IBM 的横幅所示：

[http://www.ibm.com/us/en/](http://www.ibm.com/us/en/)

这是我的 jQuery：

```
$.fn.zinCarousel = function(settings) {
    var settings = $.extend({}, $.fn.zinCarousel.defaultSettings, settings || {});
    return this.each(function() {
        var o = $.extend(true, {}, settings),
            $elem = $(this),
            caro = new Carousel(o, $elem);
        caro.init();
    });
}; 
```

[**jsFiddle 演示**](http://jsfiddle.net/9Dr7T/35/show)（`/show/`从 URL 中删除以访问编辑页面）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:16:17.213

这是一个以**Parallax Carousel Banner**为特色的在线教程和现场演示。

[**使用 CSS3 和 jQuery 的视差内容滑块**](http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/)

请注意，上面的示例是您在 Internet 上可以找到的众多示例之一，因为该示例`CSS3`用于现代浏览器。

直接链接到[**DEMO**](http://tympanus.net/Development/ParallaxContentSlider/)。

# java - 如何在不暴露我的 oauth 秘密令牌的情况下在开源中使用 Twitter4J？

> ID：14008144
> 
> 赞同：2
> 
> 时间：2012-12-23T02:21:02.057
> 
> 标签：java, eclipse, open-source, twitter4j

我有一个为用户生成图片的 Java 应用程序。然后，我想提议将这些图片发布到该用户的 Twitter 帐户。

我的应用程序也是开源的，这意味着我不能使用 OAuth，因为这样我的秘密令牌将在 github 上的源代码中清晰可见。

我使用了错误的库吗？还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:30:58.857

如果不暴露你的秘密令牌，你就无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:54:55.280

当您希望用户使用他们的帐户在 Twitter 上发帖时，没有理由在程序的源代码中包含有关您自己帐户的任何信息。

相反，您应该在用户安装应用程序时提示用户输入他们自己的用户名和密码。然后应用程序应将这些保存到本地文件中。

# jquery - 货币正则表达式

> ID：14008146
> 
> 赞同：3
> 
> 时间：2012-12-23T02:21:10.807
> 
> 标签：jquery, regex

我正在尝试在 jquery 中创建货币正则表达式。一切正常，除了它包含中间带减号的数字，如“1-3”

我正在使用带有以下正则表达式的匹配函数：

```
/[\$€£]\d{0,3},?\d{1,3}(.\d{2})?/g 
```

有谁知道为什么要包含减号？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T02:23:05.723

包含减号是因为您`.`的正则表达式中间有一个。`.`表示它可以匹配任何字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T02:23:08.627

转义`.`，否则它匹配任何字符。在这种情况下，它匹配`-`.

另请注意，您不需要转义，`$`因为它在字符类中没有意义`[...]`

编辑：这是我要使用的：

```
/^[$£€]\d{1,3}(?:,\d{3})*(?:\.\d{2})?$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T10:39:51.313

使用 jquery 插件的 autoNumeric 插件，该插件会在您在表单输入中键入时自动格式化货币和数字 首先 - 在标题中包含 jQuery.js 和 autoNumeric-1.9.19.js javascript 文件。

第二 - 在 HTML/JSP 文档上插入一个表单和输入字段。

第三 - 在单独的脚本中初始化 autoNumeric $('selector').autoNumeric('init')。

jQuery（函数（$）{

```
 $('#someID_defaults').autoNumeric('init', {aSign:',', pSign:'£', vMax:'99999.99' }); 
```

});

# javascript - CSS：图片而不是背面可见性=隐藏

> ID：14008153
> 
> 赞同：0
> 
> 时间：2012-12-23T02:23:32.120
> 
> 标签：javascript, css, three.js

我正在尝试用 three.js 制作 3D 图片表，一切正常，但是，我可以只用 1 个 div 背靠背地制作两张图片：

在我的元素中，我有一个背景，我会在另一侧有另一张照片。

可能吗？使用该属性`backface-visibility:hidden;`，我可以使背景消失在错误的一侧，但是如何将图片定义为“背面的背景”？

```
.element {
    width: 140px;
    height: 180px;
    box-shadow: 0px 0px 20px rgba(0,255,255,0.5);
    border: 1px solid rgba(127,255,255,0.25);
    cursor: default;
    backface-visibility:hidden;
    -webkit-backface-visibility:hidden;
    -moz-backface-visibility:hidden;
}

...

var element = document.createElement( 'div' );
element.className = 'element';
element.style.backgroundImage="url('img/img-"+(i+1)+".jpg')";
element.style.backgroundRepeat = "no-repeat";
element.style.backgroundPosition = "center"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:31:46.930

你不能，就其本身而言；`backface-visibility: hidden;`这样您就可以创建*另一个*元素，并在其后面添加包含您的背面的补充旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T02:40:00.173

您需要第二个元素作为背面。有关如何实现此功能的示例，请参见[http://css3.bradshawenterprises.com/flip/ （并将示例 CSS3 动画视为奖励）。](http://css3.bradshawenterprises.com/flip/)

# javascript - Javascript 在 CSS 中搜索和替换

> ID：14008155
> 
> 赞同：0
> 
> 时间：2012-12-23T02:24:10.397
> 
> 标签：javascript, css, search, replace

有没有办法替换加载的 css 文件中的某些值？

例如，我加载了一些 css 文件，但我不知道它的类，但我想将所有包含 #FFFFFF 的值替换为 #000000 并立即在网页上生效。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:43:29.607

那么这会做你想要的。将其放在页面顶部的脚本标记中。我不建议将此作为解决方案，因为它会遍历您页面上的所有元素以找出要更改的元素，并更改它找到的元素。

**更新**了，错过了）；在最后。

```
$(document).ready(function () {
    $('*').filter(function() { 
        return $(this).css('background-color') == "rgb(255, 255, 255)" 
    }).css('background-color', '#000')
}); 
```

# javascript - 通过 For 循环访问对象元素

> ID：14008156
> 
> 赞同：2
> 
> 时间：2012-12-23T02:24:11.187
> 
> 标签：javascript, node.js, for-loop

好吧，我已经厌倦了很多东西。而且我仍然很困惑，我知道答案会很简单，但我还是要问。

我有一个功能：

```
Module.load = function(a) {
  require("./modules/"+a+".js");
  Module.loaded.push(a);
  Log("Loaded Module: "+a); 
}; 
```

并使用`Module.load('basic');`加载基本文件。现在，我通过一个对象定义模块：

```
Modules = { basic:1,queue:0,admin:1,notify:0 } 
```

所以我写了这个函数：

```
for (x in Modules) { if (Modules[x] == 1) Module.load(x); }; 
```

但它不起作用，对于我的*生活*，我无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T02:32:17.530

代码有效：

```
var Module = {}; Module.load = function(a) {
  console.log("Loaded Module: "+a); 
};

var Modules = { basic:1,queue:0,admin:1,notify:0 }

for (var x in Modules) { if (Modules[x] == 1) Module.load(x); }; 
```

```
Loaded Module: basic
Loaded Module: admin 
```

因此问题一定出在其他地方。确保：

*   你没有任何语法错误
*   `Module.loaded`存在并且是一个数组
*   `require`被定义为一个函数并且不会崩溃
*   `Log`被定义为一个函数并且不会崩溃

# mysql - 更改 HTML 列 MySQL 中的图像子域字符串

> ID：14008158
> 
> 赞同：2
> 
> 时间：2012-12-23T02:25:07.443
> 
> 标签：mysql

我正在尝试更改“www”。到“cdn”。对于 MySQL 数据库中的每个 img 元素。

这是 HTML 列，因此其中的其他元素（例如标签）有点棘手，`a`但我只想更改`img`标签

我已经尝试过`LIKE '%test%'`，但不确定如何`UPDATE`用于这种情况

最好的方法是什么？

**下面是一个例子：**

```
&nbsp;

[nivoslider id="1952"]

&nbsp;

[one-third first]
<h2><a title="diet" href="http://www.test.com.au/diet">Diet and Nutrition</a></h2>
<a title="diet" href="http://www.test.com.au/diet"><img class="size-full wp-image-965 alignnone" title="diet-and-nutrition-information" alt="diet-and-nutrition-information" src="http://www.test.com.au/wp-content/uploads/2012/10/Optimized-diet-and-nutrition-information.jpg" width="310" height="220" /></a>
A dietitian provides assistance and education for every day meal and exercise plans and provides advice and modified diet plans to treat health and medical conditions. Our dietitian is here to educate you and your family about healthy ways of living to reduce or maintain a healthy weight, cholesterol levels and detoxify our bodies to live a longer, healthier, more active lifestyle. Combined with nutrition, our dietitian and nutritionist can assist with food intolerances, digestive system and eating disorders and sports nutrition. <a title="Diet and Nutrition" href="http://www.test.com.au/diet-and-nutrition/"><strong>Read more.</strong></a>[end-column]

[one-third]
<h2><a title="skincare" href="http://www.test.com.au/skincare">Skincare</a></h2>
<a href="http://www.test.com.au/skincare/"><img class="alignnone size-full wp-image-1793" title="skincare-information" alt="skincare" src="http://www.test.com.au/wp-content/uploads/2012/10/Optimized-skincare-information3.jpg" width="310" height="220" />
</a>Human skin is our body’s largest organ. It is a complex series of layers of cells and its function is to provide a natural barrier to many things. As with any other organ in the body, you should take care of your skin and keep it healthy. There are many basic skincare steps you can take throughout your life to keep your skin looking fresh and feeling good from cosmetics to natural procedures and techniques. Understanding, caring and treatment of skin conditions and diseases is an important part of skincare and your overall health. <strong><a title="Skincare" href="http://www.test.com.au/skincare/">Read more.</a></strong>[end-column]

[one-third last]
<h2><a title="speech-pathology" href="http://www.test.com.au/speech-pathology">Speech Pathology</a></h2>
<a title="speech-pathology" href="http://www.test.com.au/speech-pathology"><img class="size-full wp-image-967 alignnone" title="speech-pathology" alt="speech-pathology" src="http://www.test.com.au/wp-content/uploads/2012/10/Optimized-speech-pathology-information.jpg" width="310" height="220" /></a>
Speech and language pathology is concerned with issues surrounding human speech and language communication disorders. Assistance with producing words can be helpful to both children and adults who lack clear speaking skills. Conditions treated at ENT Wellbeing include cognitive-linguistic, oral motor, language, swallowing, stuttering, voice, and speech disorders. Our ENT Wellbeing speech pathologist will perform a comprehensive diagnosis so that an effective treatment plan can be customized for the patient. <strong><a title="Speech Pathology" href="http://www.test.com.au/speech-pathology/">Read more.</a></strong> [end-column]

[schemaLocalBusiness] 
```

**我在下面尝试过，但它不起作用：**

```
UPDATE posts SET post_content = replace(post_content, 'src=\"http\:\/\/www\"', 'src=\"http\:\/\/cdn\"'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:28:06.710

```
update table set column = replace(column, 'www.', 'cdn.') 
```

# gnuplot - gnuplot xrange min 不显示

> ID：14008160
> 
> 赞同：0
> 
> 时间：2012-12-23T02:26:52.923
> 
> 标签：gnuplot

我的数据集（d.asc）如下：

```
0.1 0.5
0.12 0.56
...
90.4 0.34
...
100 0.78 
```

我的绘图生成文件如下：

```
set xrange [0.1:100]
set grid
plot "d.asc" using 1:2 notitle with lines 
```

即我想在 x 轴上看到第一列，在 y 轴上看到第二列。但是，x 轴值从 0 开始并以 10 递增到 100。

[1] 为什么不是从 0.1 开始？

[2] 还有没有办法在 x 轴上只有三个（或四个等）特定值点？例如，我只想在 x 轴上看到 0.1、90.4 和 100。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:06:40.703

**[1] 为什么不是从 0.1 开始？**

Gnuplot 喜欢为其 tic 增量和位置选择整数。在您的情况下，增量为 10，因此它们将出现在 0、10、... 100。由于您手动将 x 范围设置为从 0.1 开始，直到 10 点才会出现抽动。

**[2] 还有没有办法在 x 轴上只有三个（或四个等）特定值点？**

是的，您可以使用以下语法指定特定点：

```
set xtics ("0.1" 0.1, "90.4" 90.4, "100" 100) 
```

引号中的值是出现在 tic 处的文本，数字是它出现的实际位置。（`help set xtics`有关更多格式信息。）

# java - getCurrentSession 调用在 openSession 之后立即失败

> ID：14008161
> 
> 赞同：1
> 
> 时间：2012-12-23T02:27:19.270
> 
> 标签：java, spring, hibernate

嗨，我已经使用 hibernate 配置了带有事务管理器的 sessionFactory 和 Mysql 数据源。当我尝试在 openSession() 之后立即对该工厂调用 getCurrentSession() 时，它会引发 HibernateException。我如何使它工作？

错误堆栈跟踪：

```
org.hibernate.HibernateException: No Session found for current thread
at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:978)
at com.xyz.CommonTest.initTx(CommonTest.java:56)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271) 
```

弹簧配置：

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="relationalDataSource"></property>
    <property name="packagesToScan">
        <list>
            <value>....</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}  </prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.order_updates">true</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"></property>
</bean> 
```

Java代码：

```
 logger.info("initTx called");
    // Either get a current session or open new one.
    Session session = null;
    try {
        session = sessionFactory.getCurrentSession();
    } catch (HibernateException exception) {
        logger.info("did not find a current session, will try to open a new one",
                    exception);
    }
    session = sessionFactory.openSession();
    tx = session.beginTransaction();

    try {
        session = sessionFactory.getCurrentSession();
    } catch (HibernateException exception) {
        logger.info("did not find a current session, will try to open a new one",
                    exception);
    } 
```

编辑：

你可以通过使用来做到这一点。

hibernate.current_session_context_class=thread [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

如果您正在寻找一种自动执行此操作的方法，那么 Ryan 在下面的答案是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:36:01.843

仅仅打开一个会话并不会将它与线程相关联。无论如何，您不应该手动打开会话。会话应该由 Spring 为您打开和关闭 1)[在事务开始和结束时](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)，或 2) 作为某种 open-session-in-view 实现的一部分，Spring 提供了[方便的实现](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)。使用这些选择中的任何一个，您都可以确保会话得到正确管理和清理，并且会话将与线程相关联，因此您可以使用`getCurrentSession()`.

# charts - 在谷歌柱形图中显示垂直轴单个图表标签

> ID：14008162
> 
> 赞同：0
> 
> 时间：2012-12-23T02:27:28.427
> 
> 标签：charts, google-visualization

我正在使用谷歌柱形图一段时间，我想在每列的顶部显示垂直列的值。我能够获得工具提示值，但我的要求与工具提示无关。

有没有办法在每列的顶部显示列值以便更容易可视化？我查看了选项，但无法完成这项工作。

这是我正在使用的柱形图的链接 [https://developers.google.com/chart/interactive/docs/gallery/columnchart](https://developers.google.com/chart/interactive/docs/gallery/columnchart)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T14:43:18.283

此功能备受追捧，但遗憾的是 Google Charts 仍然不支持。

经过长时间的努力，我已经对`ComboChart`（可以使用`BarChart`并且`ColumnChart`也可以进行一些更改）将标签插入 SVG 进行了破解。

看看这个小提琴：http: [//jsfiddle.net/augustomen/FE2nh/](http://jsfiddle.net/augustomen/FE2nh/)

在 Firefox 21、Chrome 27 和 IE 9 上测试。

# python - 尝试安装 Python audiolab 模块，找不到模块

> ID：14008165
> 
> 赞同：1
> 
> 时间：2012-12-23T02:28:14.793
> 
> 标签：python, module, numpy, installation

没有很好的安装经验。我想我终于安装了 scikits.audiolab-0.11.0。现在找不到该模块。

```
from audiolab import *
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named audiolab 
```

**这需要我需要将它添加到我的 PATH 中吗？我该怎么做？**

下面是 1\. 我从 scikits.audiolab-0.11.0 安装中获得的最后几行消息，然后是下面的 2\. 我机器上 echo $PATH 的结果。

```
Installed /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scikits.audiolab-0.11.0-py2.7-macosx-10.6-intel.egg
Processing dependencies for scikits.audiolab==0.11.0
Searching for numpy==1.6.1
Best match: numpy 1.6.1
Adding numpy 1.6.1 to easy-install.pth file

Using /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Finished processing dependencies for scikits.audiolab==0.11.0 
```

回声 $PATH

```
Macintosh:~ wolf$ echo $PATH
/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T03:50:48.270

您应该确保无论`audiolab`包存储在哪里，该文件路径都在您的**`PYTHONPATH`**.

`PATH`用于启动程序，`PYTHONPATH`是 Python 查找模块的地方。

# c++ - 在 Cygwin 中使用 MySQL 编译 C++ 应用程序

> ID：14008169
> 
> 赞同：0
> 
> 时间：2012-12-23T02:28:51.423
> 
> 标签：c++, mysql, unix, cygwin

我在 Cygwin 中编译我的程序时遇到了麻烦。我用 setup.exe 程序安装了 MySQL 库，我得到了这个错误 g++ 编译器。

```
build/Debug/Cygwin-Windows/db.o:db.cpp:(.text+0x19): undefined reference to `_mysql_init'
build/Debug/Cygwin-Windows/db.o:db.cpp:(.text+0x5b): undefined reference to `_mysql_real_connect'
build/Debug/Cygwin-Windows/db.o:db.cpp:(.text+0x71): undefined reference to `_mysql_error'
build/Debug/Cygwin-Windows/db.o:db.cpp:(.text+0x7b): undefined reference to `_mysql_errno'
build/Debug/Cygwin-Windows/db.o:db.cpp:(.text+0xb2): undefined reference to `_mysql_error'
build/Debug/Cygwin-Windows/db.o:db.cpp:(.text+0xbc): undefined reference to `_mysql_errno'
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: build/Debug/Cygwin-Windows/db.o: bad reloc address 0x0 in section `.ctors'
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: final link failed: Invalid operation 
```

我现在应该做什么？

解决方案...为了编译这个，我改进了我的 Makefile：

```
g++ -O3 -g funcs.o db.o main.o -lm -o myprogram $(shell mysql_config --cflags) $(shell mysql_config --libs) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:06:47.003

看看这个，我浏览了一下，我认为它可以提供帮助。 [http://cygwin.com/ml/cygwin/2006-01/msg00772.html](http://cygwin.com/ml/cygwin/2006-01/msg00772.html)

# c# - 如何在 C# 的 MonthCalendar 中获取上一个选定的日期

> ID：14008172
> 
> 赞同：1
> 
> 时间：2012-12-23T02:30:19.113
> 
> 标签：c#, memory, monthcalendar

假设我选择了日期 12/22/2012

然后我继续选择 2009 年 11 月 19 日。

然后我尝试了一些代码

`private void monthCalendar1_DateChanged(object sender, DateRangeEventArgs e)`

我如何能够检索 2012 年 12 月 22 日的日期？我需要保留一些变量来做到这一点吗？或者我可以做些什么来找回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:07:53.983

尝试调整它，在其中创建一个静态类和一个变量`previousDate`，并为其设置一些初始值，

```
private void monthCalendar1_DateChanged(object sender, DateRangeEventArgs e)
{
    string previous = myStaticClass.previousDate;
    current = monthCalendar1.SelectionRange.Start.ToShortDateString();
    myStaticClass.previousDate=current ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T02:48:18.380

尝试类似的事情：

```
private string previous { get; set; }
private string current { get; set; }
private void monthCalendar1_DateChanged(object sender, DateRangeEventArgs e)
{
    previous = current;
    current = monthCalendar1.SelectionRange.Start.ToShortDateString();
} 
```

# eclipse - java命令行和eclipse的运行结果不同

> ID：14008173
> 
> 赞同：0
> 
> 时间：2012-12-23T02:31:08.023
> 
> 标签：eclipse, shell, command-line, stdin

就像这个命令

```
java XXX a.txt < b.txt 
```

XXX 是一个类文件。如果我使用java命令行它可以正常运行。但是当使用eclipse并在eclipse的参数处输入a.txt < b.txt时，程序被阻塞了。这个符号<在eclipse中只是一个字符串，但在java命令行中有一些特殊的功能。那么如何正常制作eclipse的结果呢？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:53:58.260

在命令行上，`< b.txt`不是命令行参数*的*一部分。

```
java XXX a.txt < b.txt 
```

告诉 shell 运行`java XXX a.txt`，并将 的内容`b.txt`作为标准输入提供。

Eclipse[显然不支持这一点](https://stackoverflow.com/questions/188547/eclipse-reading-stdin-system-in-from-a-file)。但是，如果您愿意更改您的 Java 程序，您可以让它使用第二个文件名作为命令行参数，并从该文件名（如果提供）而不是标准输入中读取。

# c# - 使用另一个类的方法？不打开新表格？

> ID：14008174
> 
> 赞同：0
> 
> 时间：2012-12-23T02:31:12.717
> 
> 标签：c#, oop, inheritance, methods

嘿伙计们，我的问题是我不能使用公共类`class1 = new class();`，而只是这样做，`class1.method1();`因为如果我创建该类的新实例，它将打开一个新表单，并且该类也有一个构造函数。我只需要类中的一种方法而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:43:28.773

您可能需要重新考虑您的设计模式，就好像`class1`您所说的这是一个表单，然后阻止 UI 以这种方式显示并不是一个特别合适的设计模式。使用您当前的实施更新您的问题，以便人们可以更好地为您提供建议！

如果您在`class1`构造函数中手动实例化和显示表单，您可以考虑这样的实现：

> ```
> public Class1(bool showForm)
> {
>     if (showForm)
>     {
>         //Show UI
>     }
> } 
> ```

如果必须，您可以像这样隐藏 UI：

```
protected override void SetVisibleCore(bool value)
{
    base.SetVisibleCore(false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T02:32:50.957

要使用类的实例方法，您需要该类的实例；没有例外*。如果它的构造函数打开了一个表单，那么就让它不打开。

# android - 在android中锁定屏幕方向

> ID：14008177
> 
> 赞同：3
> 
> 时间：2012-12-23T02:31:32.817
> 
> 标签：android

我希望我的活动在设备转动时不旋转。使用

```
android:screenOrientation="nosensor" 
```

确实禁用了方向更改，但有一个警告：活动切换到纵向模式。我只希望它保持当前方向（例如，如果在活动开始时屏幕处于横向，那么即使设备旋转也保持横向模式）。这不是“无传感器”似乎在做的事情。它似乎只是与“肖像”完全相同的行为。我用错了吗？

我试过使用`setRequestedOrientation( getRequestedOrientation )`，但如果当前请求的方向未定义，那么我的活动将旋转。我只想“锁定”有效的屏幕旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T02:37:42.103

您可以做的是告诉 Android 您将自行处理方向配置更改。您可以通过指定标签`orientation`的`android:configChanges`属性来做到这一点。`activity`

```
<activity android:name=".MyActivity"
          android:configChanges="orientation"
          android:label="@string/app_name"> 
```

有关更多信息，请参阅此链接。
[http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

至于为什么`nosensor`不起作用，是因为它在文档中如下所述。

> 在不参考物理方向传感器的情况下确定方向。传感器被忽略，因此显示器不会根据用户移动设备的方式旋转。除此区别外，系统使用与“未指定”设置相同的策略选择方向。

以及`unspecified`文档中的内容

> 默认值。系统选择方向。它使用的策略以及因此在特定上下文中做出的选择可能因设备而异。

# java - 为辅助鼠标按钮Javafx添加鼠标事件

> ID：14008181
> 
> 赞同：3
> 
> 时间：2012-12-23T02:32:09.817
> 
> 标签：java, mouse, mouseevent, javafx

所以我有这个锚窗格，我希望在其中为辅助鼠标键添加鼠标侦听器，我尝试了以下操作，但我不断收到错误，有人知道问题是什么吗？

```
 mainDisplayPanel.addEventHandler(MouseButton.SECONDARY, new EventHandler<MouseButton>() {

                    @Override
                    public void handle(MouseButton event) {
                        System.out.Println("Works");

                    }
                }); 
```

为了记录，我也试过这个：

```
 mainDisplayPanel.addEventHandler(MouseButton.SECONDARY, new EventHandler<MouseEvent>() {

                @Override
                public void handle(MouseEvent event) {
                    System.out.println("WOrks");
                }
            }); 
```

堆栈跟踪：

> 绑定不匹配：Node 类型的泛型方法 addEventHandler(EventType, EventHandler) 不适用于参数（MouseButton, new EventHandler(){}）。推断的类型 MouseButton&Event 不是有界参数的有效替代品

和另外一个：

> 边界不匹配：MouseButton 类型不是 EventHandler 类型的有界参数的有效替代品

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T02:53:27.487

没有`EventType`根据`MouseButton.SECONDARY`。您需要检查`MouseEvent`自身：

```
mainDisplayPanel.addEventHandler(MouseEvent.MOUSE_CLICKED, new EventHandler<MouseEvent>() {

    @Override
    public void handle(MouseEvent event) {
        if (event.getButton() == MouseButton.SECONDARY) {
           System.out.println("Works");
        }
    }
}); 
```

# symfony - 在 symfony 2.1 中登录失败后不重定向到登录页面

> ID：14008184
> 
> 赞同：0
> 
> 时间：2012-12-23T02:32:18.820
> 
> 标签：symfony, symfony-2.1

登录失败后，应用程序不会重定向到登录页面。这是我的 security.yml 配置：

```
security:
encoders:
    Acme\SecurityBundle\Entity\Users: sha512

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER

providers:
    main:
        entity: { class: Acme\SecurityBundle\Entity\Users}

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    login:
        pattern:  ^/login$
        security: false

    secured_area:
        pattern:    ^/admin/
        form_login:
            check_path: /login_check
            login_path: /login
        logout:
            path:   /logout
            target: /home

access_control:
    - { path: ^/admin, roles: ROLE_ADMIN } 
```

这是我的控制器：

```
class LoginController extends Controller {

/**
 * @Route("/login",name="login")
 */
public function loginAction() {
    //displays login form and renders the login.html.twig
}

/**
 * @Route("/login_check", name="login_check")
 */
public function loginCheckAction() {
    // The security layer will intercept this request
} 
```

登录失败后，我收到错误消息：

```
 The controller must return a response (null given). Did you forget to add a return statement somewhere in your controller?
  500 Internal Server Error - LogicException 
```

我尝试了 symfony 附带的演示中的登录部分。我发现了同样的结果。登录失败后，我应该进行哪些修改才能重定向到登录表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:30:11.040

您不需要为登录和注销操作创建控制器类。您只需要在 中指定这些路由`routing.yml`，例如：

```
login_path:
  pattern: /login
login_check_path:
  pattern: /admin/login_check
logout_path:
  pattern: /admin/logout 
```

这些路由由安全组件自动处理。

在防火墙配置中，您`check_path`应该定义为`/admin/login_check`. 注销路径应该是`/admin/logout`.

# c# - 数据表到字典 >

> ID：14008188
> 
> 赞同：-9
> 
> 时间：2012-12-23T02:33:42.737
> 
> 标签：c#, linq, c#-4.0

此 LINQ 表达式不起作用：

```
dt.AsEnumerable().ToDictionary<Int64, List<string>> (
    dtRow => dtRow.Field<Int64>("CodeVal_1"),
    new List<string> {
        dtRow => dtRow.Field<string>("CodeVal_2"), 
        dtRow => dtRow.Field<string>("CountryCode")
    }
); 
```

`dt`是一个`DataTable`，我添加了一个引用`DataSetExtensions`。

这里完整的代码

```
 using (DataSet dsIps = DbConnection.db_Select_Query("use mydb select * from tblCountryCodes"))
    {
        using (DataTable dt = dsIps.Tables[0])
        {
            dt.AsEnumerable().ToDictionary<Int64, List<string>>(
            dtRow => dtRow.Field<Int64>("CodeVal_1"),
            new List<string> {
                    dtRow => dtRow.Field<string>("CodeVal_2"), 
                    dtRow => dtRow.Field<string>("CountryCode")
                }
            );
        }
    } 
```

错误列表![在此处输入图像描述](../Images/180adcf5ef0e4bb455b1fa32a8a0fa42.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T02:49:48.427

根据附加信息，问题在于您没有将正确的参数传递给`ToDictionary`. 它需要两个 lambda，而不是 lambda 和`List<>`.

这是修复代码的第一步：

```
dt.AsEnumerable().ToDictionary(
    dtRow => dtRow.Field<Int64>("CodeVal_1"),
    dtRow => new List<string> {
        dtRow.Field<string>("CodeVal_2"), 
        dtRow.Field<string>("CountryCode")
    }
); 
```

编辑：使用错误版本的`ToDictionary`.

# jquery-ui - jQueryUI .show() 回调不等待动画结束

> ID：14008189
> 
> 赞同：0
> 
> 时间：2012-12-23T02:34:08.587
> 
> 标签：jquery-ui, jquery-callback

我一定是遗漏了一些简单的东西，或者我做错了。我的目标很简单。我想为 .show() .hide() 制作动画，我正在使用回调来等待一个动画完成，我遇到了两个问题。

1.  动画被触发两次
2.  回调很快执行/不等待第一个动画结束，

这是我的 jQuery 代码：

```
 $('#miles').on({
    keyup: function(){if($(this).hasClass('error')){$(this).removeClass('error',animSpeed);}},
    focusin: function(){thisTime=$(this).val();if($(this).hasClass('error')){$(this).removeClass('error',animSpeed);}if($(this).val()=='miles'){$(this).val('');}},
    focusout: function(){
     if($(this).val()==''){$(this).val('miles');}
     else if(thisTime!=$(this).val()){
      if($(this).val().match(/^[0-9]+$/)&&$(this).val()>0){
       $.post('include/process.php',{q:'saveMiles',e:$('#email').val(),w:$(this).val()},function(json){
        if(json.error==null||json.error==undefined){
         $('#saved').html('last saved '+json.date);
        }else{
         $(this).addClass('error',animSpeed);
         if(json.type=='notaNumber'){$('#errorBox>p').hide('fade',animSpeedErr,function(){$('.'+json.type).show('fade',animSpeedErr);})};
        }
       },"json");
      }else{
       console.log('now');
       $(this).addClass('error',animSpeed);
       $('#errorBox>p').hide('fade',animSpeedErr,function(){console.log('now1');
        if($('#miles').val()==0){console.log('now2');$('.notZero').show('fade',animSpeedErr);}
        else{console.log('now3');$('.notaNumber').show('fade',animSpeedErr);}
       });
      }
     }
    }
   });

var animSpeed=700;
var animSpeedErr=350;
json.type = what kind of error to show 
```

#errorBox>p 有*display:none;* 在 CSS 中声明

这段代码的作用：检查#miles是否是一个数字，如果数字大于0，如果不是，隐藏以前的错误并显示当前的错误。如果我运行这个脚本，我会在控制台中得到这个：

```
now
now1
now2
now1
now2
now1
now2
now1
now2 
```

脚本位于[http://developer.sodobniinternet.eu/concertdrive](http://developer.sodobniinternet.eu/concertdrive)。只需在“英里”输入框中输入 0 或字母，您就会看到问题所在。

我试过：

```
.stop(true,true) 
```

没有成功。

还尝试从回调中删除，有时像我想要的那样工作，有时不是。这就是为什么我认为有一个回调，在前一个完成时调用一个函数。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:32:37.797

问题出在选择器上：

```
$('#errorBox>p').hide('fade',animSpeedErr,function(){console.log('now1') 
```

中有四个段落，`#errorBox`每个段落都被单独隐藏，因此`.hide()`每个`focusout`事件都会调用您的回调 4 次

# php - PHP - Glob 多个文件扩展名仅显示列出的第一个扩展名

> ID：14008191
> 
> 赞同：2
> 
> 时间：2012-12-23T02:34:29.400
> 
> 标签：php, glob

我的目录中有 jpg 和 gif 图像，我正在尝试同时显示它们。

但是，下面只会显示 gif：

```
$pictures = glob("images/*.{gif,jpg}", GLOB_BRACE); 
```

下面将只显示jpg：

```
$pictures = glob("images/*.{jpg,gif}", GLOB_BRACE); 
```

这是我正在使用的全部内容：

```
<?php
$pictures = glob("images/*.{gif,jpg}", GLOB_BRACE); 
for( $i=0; $i<=10; $i++ ){ 
echo "<img src=\"".$pictures[$i]."\" />"; 
}  
?> 
```

我也尝试过使用绝对路径并且没有这样的运气显示两者。可能是什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T02:36:46.797

您似乎将搜索限制在前 10 个匹配项。如果每个都超过十个，那么您将按照您指定的顺序获取它们（因为它们是按找到它们的方式排序的，而不是按字母顺序）。

您可以使用`foreach`循环遍历所有文件，也可以`sort($pictures)`在循环之前添加。

# c++ - 可以从同一类型的另一个对象访问私有变量吗？

> ID：14008200
> 
> 赞同：13
> 
> 时间：2012-12-23T02:37:46.870
> 
> 标签：c++, visual-c++, c++11

> **可能重复：**
> [使用private修饰符，为什么可以直接访问其他对象中的成员？](https://stackoverflow.com/questions/7396846/with-a-private-modifier-why-can-the-member-in-other-objects-be-accessed-directl)

C++ 类的私有成员被设计为对其他类实例不可见。我很困惑，因为*可以*访问私人成员，如下所示！谁能给我解释一下？

这是我的代码：

```
#include <iostream> 
using namespace std; 
class Person
{
private:
    char* name;
    int age;
public:
    Person(char* nameTemp, int ageTemp)
    {
      name = new char[strlen(nameTemp) + 1];
      strcpy(name, nameTemp);
      age = ageTemp;
    }
    ~Person()
    {
      if(name != NULL)
        delete[] name;
      name = NULL;
    }
    bool Compare(Person& p)
    {
      //p can access the private param: p
      //this is where confused me
      if(this->age < p.age) return false;
        return true;
    }
};
int main() 
{ 
  Person p("Hello, world!", 23);
  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-23T02:40:12.280

类的方法可以在所有类实例中访问其私有属性，至少在 C++ 中是这样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T02:43:19.607

任何“属于”该类型的代码片段`Person`都可以访问任何对象的`public`,`protected`和`private`变量。`Person`

类型在这里很重要，而不是实例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-23T02:42:58.337

当一个变量被指定为私有时，这意味着只有这个类的方法和可选的被指定为朋友的类和方法可以访问它。类的任何实例都可以访问同一类的所有其他实例的私有变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T02:51:11.263

课堂之外的任何访问都是“禁止的”。除非您例如使用朋友类。（这让任何其他类访问该类的私有成员）

您可以像这样定义朋友类：

```
class MyClass {
    friend class MyClassB;
public:
    MyClass();
    ~MyClass();
private:
    int number;
}; 
```

然后 MyClassB 将有权访问“MyClass”的私有变量。

如果你做这样的事情：

```
class MyClass {
public:
    MyClass();
    ~MyClass();
private:
    int number;
};

int main(int argc, char *argv[])
{
    MyClass A;
    A.number = 11; // You can't do this
    if(A.number > 10) { // Either you can't do this.
        qDebug() << "It's more than 10"; // Qt. well.
    }

    return 0;
} 
```

你会得到一个“错误”，因为你试图从课堂外访问 A.number 。

但是如果你想从类中的某个函数访问：

```
class MyClass {
public:
    myClass() {
       number = 10;
       if(number > 10) {
           qDebug() << "It's more than 10"; // Qt. well.
       }
   }
    ~MyClass();
private:
    int number;
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T02:51:34.947

```
if(this->age < p.age) return false; 
```

**p.age:** age 是私有的，可以这样访问，因为这一行在类的方法里面，所以可以访问所有的私有成员。

如果你把`p.age`类的外部方法，它会注意到错误。例如：

```
int main() 
{ 
    Person p("Hello, world!", 23);
    // will be error, because main is not inside class People
    if (p.age < 18) {   
       cout << "You are not adult" << endl;
    }
    return 0; 
} 
```

希望这有帮助:)

# c# - 上传文件并从客户端应用程序获取字符串响应到 Microsoft Stack 的好方法？

> ID：14008211
> 
> 赞同：1
> 
> 时间：2012-12-23T02:40:47.273
> 
> 标签：c#, asp.net-mvc, web-services, file-upload

我正在考虑编写一个 C# 客户端应用程序。在这个应用程序中，我需要将文件上传到服务器并让服务器响应字符串（上传文件的唯一标识符。）

我对 C# 和 ASP.Net MVC 都很熟悉，也很熟悉。我可以使用这些技术以*相对*安全的方式执行此操作，还是需要使用某种 WCF Web 服务 thingie-mah-jig？（我注意到“相对安全”，因为上传的任何内容都不会保密，而且绝对不是关键任务）

无论哪种情况，有关该主题的任何资源（即使它恰好位于 VB.Net 中）都会很棒。

非常感谢你！

编辑：发布一些代码。我有一个简单的网站，只有一个接受带有文件的 POST 的事件：

```
 [HttpPost]
    public string Upload(HttpPostedFileBase file)
    {
        string sPath = "";

        if (file != null && file.ContentLength > 0)
        {
            try
            {
                string sFileName = "test.txt";

                // Save file
                sPath = Path.Combine(Server.MapPath("~/App_Data/uploads"), sFileName).ToString();
                file.SaveAs(sPath);

                // Return val
                return sPath;
            }
            catch
            {
                return "Error on Save .. tried to save to\n" + sPath;
            }
        }

        return "no file";
    } 
```

在客户端，C# 应用程序执行以下操作：

```
 using (WebClient wc = new WebClient())
        {
            try
            {
                byte[] bResponse = wc.UploadFile("http://127.0.0.1/ISSHost/file/upload", "POST", "C:\\test.txt");
                string sResponse = System.Text.Encoding.ASCII.GetString(bResponse);
                MessageBox.Show("\nResponse received: " + sResponse);
            }
            catch(Exception exception)
            {
                string sError = exception.ToString();
                if (exception.InnerException != null)
                    sError += "\n" + exception.InnerException.ToString();

                MessageBox.Show("Error!\n" + sError);
            }
        }

        this.Dispose();
    } 
```

有用。我想知道的是，如果我以完全错误的方式处理这个问题，或者我可能会暴露什么样的安全漏洞......等等。我这样做会产生什么影响？有没有更好的办法？

更重要的是，如何防止最终用户尝试导航到上传页面（在这种情况下——`http://127.0.0.1/ISSHost/file/upload`实际上页面没有“GET”部分，所以它只有 404。）

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:52:40.627

请尝试在客户端使用 github 的 fileuploader.js 并返回字符串，您的服务器端代码将是这样的..

```
[HttpPost]    
public ActionResult Upload(string fileName)
{

------------
//your code ...

return Json(new{resultString="Uploaded Successfully."});
} 
```

# javascript - 如何让选择的部分通过电子邮件发送

> ID：14008227
> 
> 赞同：0
> 
> 时间：2012-12-23T02:44:02.413
> 
> 标签：javascript, jquery, html, forms

我已经为我的表弟制作了一个表格，将在她的工作中用于她的班级注册。代码的作用是当您从第一个框中选择一个选项时，第二个框会显示日期、日期和时间。我从最近在这里找到的一篇文章中得到了它。我的问题是有人提交后它没有出现在电子邮件中。我怎样才能让它发挥作用，以便它可以发送并显示在电子邮件中。

表单示例[http://crl.x10.mx/rosie_class_form.html](http://crl.x10.mx/rosie_class_form.html)

这是我在电子邮件中收到的...

> 消息发送时间：2012 年 12 月 22 日，星期六
> 
> 姓名：约翰·多伊
> 
> 电子邮件：yours@email.com
> 
> 电话：222-222-2222
> 
> 课程和时间：<-- 部分未出现
> 
> 评论：
> 
> 我会在那里见你

除了课程和时间部分之外，所有内容都已发送。

html 代码：（正文之间的代码）choice_1 = 类和choice_2 = 时间

```
Name  <input type="text" id="full_name" name="full_name" value="full_name" onBlur="if(this.value == ''){ this.value = 'full_name'; this.style.color = '#BBB';}" onFocus="if(this.value == 'full_name'){ this.value = ''; this.style.color = '#000';}" style="color:#BBB;" /><br /><br />
Phone <input type="text" id="phone" name="phone" value="xxx-xxx-xxxx" onBlur="if(this.value == ''){ this.value = 'xxx-xxx-xxxx'; this.style.color = '#BBB';}" onFocus="if(this.value == 'xxx-xxx-xxxx'){ this.value = ''; this.style.color = '#000';}" style="color:#BBB;"/><br /><br />
Email &nbsp;<input type="email" id="email" name="email" value="example@domain.com" onBlur="if(this.value == ''){ this.value = 'example@domain.com'; this.style.color = '#BBB';}" onFocus="if(this.value == 'example@domain.com'){ this.value = ''; this.style.color = '#000';}" style="color:#BBB;" /><br /><br />
Select your class and time. 
<br />
<select name="choice_1" id="choice_1" onChange="choice_1(this.'choice_1');">
  <option value="0" selected="selected">Class...</option>
  <option value="1">Beginners Cake</option>
  <option value="2">Basic Cake</option>
  <option value="3">Cake</option>
  <option value="4">Candy</option>
  <option value="5">Cookie</option>
  <option value="6">Sugar Cookie</option>
  <option value="7">CupCake</option>
  <option value="8">Flower</option>
  <option value="9">Fondant</option>
  <option value="10">Gum paste</option>
</select>
<br />
<select name="choice_2" id="choice_2" onChange="choice_2(this.'choice_2');">
  <option value="0" selected="selected">Time...</option>
  <option value="1">Monday 01/07/13 6:30 to 10:30pm</option>
  <option value="2">Wednesday 01/09/13 5:30 to 7:45pm</option>
  <option value="2">Wednesday 01/09/13 10:00 to 12:00am</option>
  <option value="3">12</option>
  <option value="4">11</option>
  <option value="5">13</option>
  <option value="6">10</option>
  <option value="7">9</option>
  <option value="8">7</option>
  <option value="9">5</option>
  <option value="10">4</option>
</select>
<input type="hidden" name="choice_1" id="choice_1" value=""/>

<input type="hidden" name="choice_2" id="choice_2" value=""/>
<br /><br />
Comments (<span class="optional">Optional</span>) <br />
<textarea name="message" id="message" rows="10" cols="40"></textarea>
<br /><br />
<strong>Please add these numbers:</strong>

  <span id="digit1"></span> +

  <span id="digit2"></span> =

  <input type="text" id="answer" size="2">
  <br />
 <div id="status"><button type="button" id="myBtn" onClick="ajax_postContact();">Send Now</button></div> 
```

class_signups.js（随机 js 名称）

```
function s () {

        var choice_1 = document.getElementsByName("choice_1");

        for ( var i = 0; i < choice_1.length; i++ ) {

        if ( choice_1[i].checked ){

        var val = choice_1[i].value;

        return val;

          }

        }

      }
function ajax_postContact(){

    var msg = document.getElementById("message").value;

    var answer = document.getElementById("answer").value;

    var fn = document.getElementById("full_name").value;

    var ph = document.getElementById("phone").value;

    var em = document.getElementById("email").value;

    var digit1 = parseInt(document.getElementById("digit1").innerHTML);

    var digit2 = parseInt(document.getElementById("digit2").innerHTML);

    ///// error checking ////

    var sum = digit1 + digit2;

    if(answer == null || answer == ""){

        alert("Please add the numbers");

        return false;

    }

    else if(answer != sum){

        alert("Your answer to the math problem is wrong. Please try again.");

        return false;

    }

    else if(fn == null || fn == ""){

        alert("Please type your name");

        return false;

    }

    else if(em == null || em == ""){

        alert("Please type your email address");

        return false;

    }

    else if(msg == null || msg == ""){

        alert("Please leave a message");

        return false;

    }

    else{

    var hr = new XMLHttpRequest();

    var url = "signups.php";

    var vars = "full_name="+fn+"&phone="+ph+"&email="+em+"&choice_1="+s()+"&message="+msg;

    hr.open("POST", url, true);

    hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

    hr.onreadystatechange = function() {

    if(hr.readyState == 4 && hr.status == 200){

    var return_data = hr.responseText;

    document.getElementById("status").innerHTML = return_data;

    }

}

    hr.send(vars);

    document.getElementById("status").innerHTML = "<img src='images/loaderblue.gif' alt='Loader'>";

    document.getElementById("full_name").value = "";

    document.getElementById("phone").value = "";

    document.getElementById("email").value = "";

    document.getElementById("message").value = "";

    document.getElementById("answer").value = "";

    }

} 
```

choice1&2.js（与选择部分一起使用）

```
$(document).ready(function(){
$("#choice_1").change(function() { 
if($(this).data('options') == undefined){
    /*Taking an array of all options-2 and kind of embedding it on the select1*/
    $(this).data('options',$('#choice_2 option').clone());
    } 
var id = $(this).val();
var options = $(this).data('options').filter('[value=' + id + ']');
$('#choice_2').html(options);
});
}); 
```

# mysql - 从多个表中删除多行

> ID：14008229
> 
> 赞同：2
> 
> 时间：2012-12-23T02:44:34.970
> 
> 标签：mysql, sql

我有三张桌子：

```
`MEMBERS`
with
`NAME` varchar(24) UNIQUE KEY

`LAST_LOGGED_IN` int(11) - It is a timestamp! 
```

* * *

```
`HOMES`
with
`OWNER` varchar(24) 
```

* * *

```
`CARS`
with
`OWNER` varchar(24) 
```

* * *

我对这些表使用 InnoDB，现在我的实际问题是：**如果 UNIX_TIMESTAMP()- ，我如何删除所有表中的行`MEMBERS`。`LAST_LOGGED_IN`> 864000？**

我正在尝试删除非活动成员的行，这是迄今为止最难的事情。我有大约 40K 行，并且还在增加。我经常用`DELETE FROM MEMBERS WHERE UNIX_TIMESTAMP()-LAST_LOGGED_IN> 864000`

您的任何帮助将不胜感激！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:33:48.360

我不使用 InnoDB，所以我不得不查找它，但它似乎支持参照完整性。如果您设置关系然后打开 DELETE CASCADE，则数据库本身将执行规则……即，当您删除成员时，DBMS 将负责删除关联的 Homes 和 Cars。

看[这里](https://stackoverflow.com/questions/1578217/mysql-innodb-cascade)和[这里](https://stackoverflow.com/questions/9855831/innodb-cascade-on-delete-and-update)，他们可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T04:08:55.083

如果您已经从`MEMBERS`表中删除了行，并且您想从其他两个表中删除列的值与表中任何行的值`OWNER`都不匹配的行：`NAME``MEMBERS`

```
DELETE h.*
  FROM `HOMES` h
  LEFT
  JOIN `MEMBERS` m 
    ON m.`NAME` = h.`OWNER`
 WHERE m.`NAME` IS NULL

DELETE c.*
  FROM `CARS` c
  LEFT
  JOIN `MEMBERS` m 
    ON m.`NAME` = c.`OWNER`
 WHERE m.`NAME` IS NULL 
```

（注意，这些语句还将从列中删除行，`HOMES`并将`CARS`列`OWNER`作为 NULL 值。）

我强烈建议您在运行 DELETE 之前使用 SELECT 运行这些语句的测试。（将关键字DELETE替换为关键字SELECT，即

```
-- DELETE h.*
SELECT h.*
  FROM `HOMES` h
  LEFT
  JOIN `MEMBERS` m 
    ON m.`NAME` = h.`OWNER`
 WHERE m.`NAME` IS NULL 
```

* * *

展望未来，如果您想保持这些表“同步”，您可以考虑使用 ON CASCADE DELETE 选项定义 FOREIGN KEY 约束。

或者，您可以使用删除所有三个表中的行的 DELETE 语句：

```
DELETE m.*, h.*, c.*
  FROM `MEMBERS` m
  LEFT
  JOIN `HOMES` h
    ON h.`OWNER` = m.`NAME`
  LEFT
  JOIN `CARS` c
    ON c.`OWNER` = m.`NAME`
 WHERE UNIX_TIMESTAMP()-m.`LAST_LOGGED_IN` > 864000 
```

(N.B. the predicate there cannot make use of an index on the `LAST_LOGGED_IN` column. An equivalent predicate with a reference to the "bare" column will be able to use an index.

```
WHERE m.`LAST_LOGGED_IN` < UNIX_TIMESTAMP()-864000 
```

or an equivalent:

```
WHERE m.`LAST_LOGGED_IN` < UNIX_TIMESTAMP(NOW() - INTERVAL 10 DAY) 
```

For best performance, you would need indexes on both `HOMES` and `CARS` with a leading column of `OWNER`, e.g.

```
... ON `HOMES` (`OWNER`)
... ON `CARS` (`OWNER`) 
```

# ios - 使用“copy”属性来维护一个不可变的 NSString

> ID：14008230
> 
> 赞同：7
> 
> 时间：2012-12-23T02:44:41.913
> 
> 标签：ios, properties, attributes, copy

我对 iOS 开发和 Objective-C 编程非常陌生。我一直在应用开发库上做练习。

这是我试图理解的当前练习。3\. 测试如果将可变字符串设置为人的名字会发生什么，然后在调用修改后的 sayHello 方法之前改变该字符串。通过添加复制属性来更改 NSString 属性声明并再次测试。

但是，我尝试这样做，尽管使用了复制属性，我修改的 NSString 实际上确实发生了变化。

这是我的声明和实现以及我的测试代码。

```
XYZPerson.h
#import <Foundation/Foundation.h>

@interface XYZPerson : NSObject

@property (copy) NSString *firstName;
@property NSString *lastName;
@property NSDate *dob;

- (void)sayHello;
- (void)saySomething:(NSString *)greeting;

+ (id)init;
+ (id)personWithFirstName:(NSString *)firstName lastName:(NSString *)lastName dob:(NSDate   *)dateOfBirth;

@end

//XYZPerson.m
#import "XYZPerson.h"

@implementation XYZPerson

@synthesize firstName = _firstName;
@synthesize lastName = _lastName;
@synthesize dob = _dob;

- (void)sayHello {
    [self saySomething:@"Hello World!"];
    NSLog(@"This is %@ %@", self.firstName, self.lastName);
}

- (void)saySomething:(NSString *)greeting {
    NSLog(@"%@", greeting);
}

+ (id)init {
    return [self personWithFirstName:@"Yorick" lastName:@"Robinson" dob:8/23/1990];
}

+ (id)personWithFirstName:(NSString *)firstName lastName:(NSString *)lastName dob:(NSDate   *)dateOfBirth{
    XYZPerson *person = [[self alloc] init];
    person.firstName = firstName;
    person.lastName = lastName;
    person.dob = dateOfBirth;

    return person;
}

@end

//Test code
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "XYZPerson.h"
#import "XYZShoutingPerson.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        XYZPerson *guy = [XYZPerson init];
        [guy sayHello];

        //I thought that this change would never be made, but it is everytime I run the code.
        guy.firstName = @"Darryl";
        [guy sayHello];

        XYZShoutingPerson *girl = [XYZShoutingPerson init];
        [girl sayHello];
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T03:26:31.370

考虑这个较短的示例（顺便说一句在[CodeRunner](https://itunes.apple.com/us/app/coderunner/id433335799)中运行）：

```
#import <Foundation/Foundation.h>

@interface Person : NSObject
@property (nonatomic,strong) NSString *name; // strong should be copy
@end

@implementation Person
@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        Person *p = [Person new];

        NSMutableString *name = [[NSMutableString alloc] initWithString:@"Alice"];
        p.name = name;
        NSLog(@"%@",p.name); // prints Alice

        [name appendString:@"xxx"];
        NSLog(@"%@",p.name); // prints Alicexxx
    }
} 
```

我将名称指向一个可变字符串，然后附加一些字符。结果，对象内部的名称发生了变化。但是，如果在声明属性时将 strong 替换为 copy，则会为 Person 对象创建一个新的不可变字符串。

这个故事的寓意是，当有人通过一个对象然后该对象发生变化时，使用复制可以防止副作用。

当传递一个可变字符串（NSMutableString）时，该消息`-[NSString copy]`会生成一个副本，或者当它是不可变的（NSString）时会保留该消息。因此，在声明 NSString 属性时总是复制：

```
@property (nonatomic,copy)   NSString *string;  // OK
@property (nonatomic,strong) NSString *string;  // strong should be copy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T15:45:40.503

我在写同一本书时遇到了这个问题。我添加了副本并发生了完全相同的事情，当我将某些内容附加到我用于 firstName 的 NSMutableString 变量时，它一直在变化。然后我读了这个部分：

> 如果您需要直接设置复制属性的实例变量，例如在初始化方法中，请不要忘记设置原始对象的副本：
> 
> `-(id)initWithSomeOriginalString:(NSString *)aString { self = [super init]; if (self) { _instanceVariableForCopyProperty = [aString copy]; } return self; }`

所以，我回到我的 XYZPerson.m 并查看了我的初始化代码。

我变了：

```
- (id)initWithFirstName:(NSMutableString *)aFirstName lastName:(NSString *)aLastName
        dateOfBirth:(NSDate *)aDate    {
self = [super init];

if (self) {
    _firstName = aFirstName;
    _lastName = aLastName;
    _dateOfBirth = aDate;
}

return self; 
```

}

到：

```
- (id)initWithFirstName:(NSMutableString *)aFirstName lastName:(NSString *)aLastName
        dateOfBirth:(NSDate *)aDate    {
self = [super init];

if (self) {
    _firstName = [aFirstName copy];
    _lastName = aLastName;
    _dateOfBirth = aDate;
}

return self; 
```

}

和 presto-chango：它以正确的方式工作！它复制了我使用过的 NSMutableString 的副本，当我在方法调用之前将某些内容附加到它的末尾时，它并没有发生变异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T03:30:26.220

我认为您误解了 copy 的作用。

```
NSMutableString *string = [NSMutableString stringWithString:@"test"];

XYZPerson *guy = [XYZPerson init];
guy.firstName = string;
guy.lastName = string;

[string replaceCharactersInRange:NSMakeRange(1, 1) withString:@"x"];

[guy sayHello]; 
```

* * *

输出

```
This is test txst 
```

在这个例子中，`firstName`是复制做它在改变时不`string`改变，`lastName`不是复制所以它的值在可变字符串改变时`string`改变。

* * *

这里发生的事情是`lastName`并且`string`是同一个对象，所以 when `string`is `lastName`changed 作为副作用而改变。这被认为是非常糟糕的，你永远不会想要这种行为。使用副本确保不同的对象`firstName`和`string`更改`string`无法生效`firstName`。

# dropbox-api - 以编程方式与多个用户共享文件夹

> ID：14008231
> 
> 赞同：2
> 
> 时间：2012-12-23T02:46:12.063
> 
> 标签：dropbox-api

我正在构建应用程序，我想在其中创建应用程序文件夹下的文件夹。层次结构应用程序 --project1 --project2

现在我想与 user1 和 user2 共享 project1 文件夹。同时 project2 文件夹将与 user3 和 user4 共享。

我找不到任何 API。任何身体都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T17:45:28.643

Dropbox API 目前不提供任何管理共享文件夹的调用，此外，应用文件夹与共享文件夹不兼容。在这种情况下，您需要使用“完全访问权限”并让用户手动管理共享文件夹。

# python - 存储 MySQL 密码

> ID：14008232
> 
> 赞同：2
> 
> 时间：2012-12-23T02:46:16.277
> 
> 标签：python, mysql, django, security, encryption

所以，我和一个朋友目前正在编写一个面板（在 python/django 中）来管理游戏服务器。每个客户端还通过他们的游戏服务器获得一个 MySQL 服务器。我们目前所坚持的是客户将如何找到他们的 MySQL 密码以及如何“存储”它。

密码将随机生成并在面板中呈现给用户，但是，我们显然不希望它们以明文或可逆加密的形式存储，因此我们不确定如果客户端忘记了密码该怎么办。

我们会尽量避免重置密码，因为某些客户端可能会在游戏服务器仍在尝试使用密码时重置密码，这可能会导致损坏和崩溃。

什么是安全的（但不会牺牲客户的易用性）方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T02:54:28.290

虽然这不是您要寻找的答案，但您只有三种可能性

*   存储密码明文（啊！）
*   使用可逆加密存储，例如 RSA (http://stackoverflow.com/questions/4484246/encrypt-and-decrypt-text-with-rsa-in-php)
*   不要存储它；客户只能重设密码，不能查看

第二种选择是一种安全的方式，因为 RSA 也用于您选择的银行使用的 HTTPS 协议中的 TLS 加密；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:14:02.810

你的问题体现了一个矛盾的术语。要么你不想要可逆性，要么你想要。你将不得不选择。

通常的技术是对密码进行哈希处理，并为用户提供一种在足够的替代身份证明上重置自己的密码的方法。出于法律不可否认性的原因，您永远不应向任何人显示密码。如果您不知道这意味着什么，请咨询律师。

# python - 将指标函数应用于列表

> ID：14008233
> 
> 赞同：2
> 
> 时间：2012-12-23T02:46:17.033
> 
> 标签：python, list, function, indicator

有没有一种简单的方法可以将指标函数应用于列表？即我有一个包含一些数字的列表，我想返回另一个相同大小的列表，例如，正数在原始列表中的列表和负数在原始列表中的零。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T02:48:27.290

只需使用列表理解：

```
>>> orig = [-3, 2, 5, -6, 8, -2]
>>> indic = [1 if x>0 else 0 for x in orig]
>>> indic
[0, 1, 1, 0, 1, 0] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T02:48:54.790

[列出理解](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)！

```
bysign = [int(x >= 0) for x in somelist] 
```

[这是一个演示。](http://ideone.com/zj3LqS)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T03:39:23.633

为了产生你的例子的结果，我可能会做

```
cmp_list=map(cmp, your_list)
one_zero_list=[]
for item in cmp_list:
    if item < 0:
        one_zero_list.append(0)
    elif item==0:
        one_zero_list.append(0) #you didnt actually say what to do with 0
    else:
        one_zero_list.append(1) 
```

# php - 重写 JSON 字符串 - 按值将键分组到新的两级深度数组中？

> ID：14008236
> 
> 赞同：1
> 
> 时间：2012-12-23T02:47:31.283
> 
> 标签：php, arrays, json

只是建立在我之前的问题之上：

[重写 JSON 字符串 - 按值将键分组到新数组中？](https://stackoverflow.com/questions/13896415/rewriting-a-json-string-grouping-keys-by-value-into-a-new-array)

我想知道如何遍历给定的数组并使用它，以便输出如下所示：

```
[{
"Name": "Title 1",
"Date": "2012-12-05",
"rows": [
    {
        "Subtitle": "Subtitle 1",
        "Count1": 566,
        "Count2": 105
    },
    {
        "Subtitle": "Subtitle 2",
        "Count1": 76,
        "Count2": 15
    }
    ]
}, 
{
"Name": "Title 2",
"Date": "2012-12-06",
"rows": [
    {
        "Count1": 66,
        "Count2": 5
    }... 
```

其中原始 json 数组按“名称”列分组，然后排序成这样的多级结构（用于在我们的应用程序中正确构建菜单的父/多子 json 结构）？

原始 json 数据如下所示：

```
[{
"Name": "Title 1",
"Subtitle": "Subtitle 1",
"Count1": 556,
"Count2": 5,
"Date": "2012-12-05"
}, {
"Name": "Title 1",
"Subtitle": "Subtitle 2",
"Count1": 10,
"Count2": 100,
"Date": "2012-12-05"
}, {
"Name": "Title 3",
"Subtitle": "Subtitle 3",
"Count1": 798,
"Count2": 11,
"Date": "2012-12-04"
}... 
```

显然我正在寻找 PHP 中的解决方案，因为我将读取 json 数据，对其进行处理并将其重新格式化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:57:32.947

假设关联数组并按名称对输出进行排序：

```
$output = array();

for ($data as $row) {

    if (!isset($output[$row['Name']])) {
        $output[$row['Name']] = array(
            'Name' => $row['Name'],
            'Date' => $row['Date'],
            'rows' => array()
        );
    }

    $output[$row['Name']]['rows'][] = array(
        'Subtitle' => $row['Subtitle'],
        'Count 1'  => $row['Count 1'],
        'Count 2'  => $row['Count 2'] 
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:25:55.470

```
hash = {};
result = [];
for (var i = 0; i < data.length; i++) {
    var name = data[i].Name;
    if (!hash.hasOwnProperty(name)) {
        var newitem = { Name: name,
                        Date: data[i].Date,
                        rows: []
                      };
        result.push(newitem);
        hash[name] = newitem;
    }
    hash[name].rows.push({ Subtitle: data[i].Subtitle,
                           Count1: data[i].Count1,
                           Count2: data[i].Count2
                         });
} 
```

# java - 对此 for 循环语法感到困惑

> ID：14008238
> 
> 赞同：1
> 
> 时间：2012-12-23T02:48:07.617
> 
> 标签：java, language-agnostic

你能解释一下这个for循环是如何工作的吗？

```
 for (int i = 0, ii = deck.size(); i != ii;) {

      int x = i % NUMBER_OF_CARDS;
      int y = i / NUMBER_OF_CARDS;

      Card d = deck.get(i++);

      d.setFace(true);                            // face up
      d.displayCard(40 + x * 90, y * 140 + 10);   // draw them
      println(d.getRank());                       // println
      text("Value:" + d.getRank() + " of " + d.getSuit(), 40+x * 90, y * 140 + 120);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T02:57:00.597

for 循环有三个部分，由 ; 分隔

1.  初始化;
2.  终止条件；
3.  迭代（每次循环都要做的事情）

这三个部分都是可选的。你可以写一个这样的循环`for(;;) {}`，它会永远持续下去。或者这个：`for(;;) { break; }`它会立即终止。或者像这样：

```
int i = 0;  
for(;;) {
  if (++i>=4) { break; } 
} 
```

它将在四次迭代后终止，通过`break`.

您问题的循环缺少迭代部分。（但循环变量正在循环体本身中更新，例如`i++`）。

唯一的其他特殊功能是循环在第一部分初始化两个变量，`i`并且`ii`. 它们由逗号运算符分隔，这导致逗号分隔的表达式按顺序独立评估。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T02:51:25.027

循环，

```
for (int i = 0, ii = deck.size(); i != ii;) {
    ...
    Card d = deck.get(i++);
    ...
} 
```

几乎等同于

```
for (int i =0; i < deck.size(); i++) {
    ...
    Card d = deck.get(i);
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T02:59:08.633

这个循环的两条主线是：

```
for (int i = 0, ii = deck.size(); i != ii;) {
      Card d = deck.get(i++);
} 
```

相当于：

```
for (int i = 0, ii = deck.size(); i != ii;) {
      Card d = deck.get(i);
      i++; // or i = i + 1
} 
```

但如果：

```
Card d = deck.get(++i);
// mean:
// i++; // increase i before take from deck
//card d = deck.get(i); 
```

基于此，我们将`i++`部分移动到 for 循环，而不是在函数体中增加它。所以我们可以改成“正常循环”为：

```
for (int i =0; i < deck.size(); i++) {
    Card d = deck.get(i);
} 
```

@：我仍然不知道为什么这段代码会像你的例子那样写。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T02:56:18.370

它循环直到达到甲板大小。循环变量 i 稍后在第 3 行递增。这样做有点奇怪。可读性差。

# php - array_combine 并使用 array_combine 在此数组中创建新数组

> ID：14008243
> 
> 赞同：-1
> 
> 时间：2012-12-23T02:48:59.580
> 
> 标签：php, arrays, multidimensional-array

这就是我现在所拥有的。

```
Array(
[0] => Array
    (
        [x] => 1
        [y] => 1418
        [z] => 1
    )

[1] => Array
    (
        [x] => 2
        [y] => 567
        [z] => 1
    )

[2] => Array
    (
        [x] => 3
        [y] => 2345
        [z] => 1
    )

[3] => Array
    (
        [x] => 4
        [y] => 567
        [z] => 1
    )

[4] => Array
    (
        [x] => 1
        [y] => 2134
        [z] => 2
    )

[5] => Array
    (
        [x] => 2
        [y] => 456
        [z] => 2
    )

[6] => Array
    (
        [x] => 3
        [y] => 1418
        [z] => 2
    )

[7] => Array
    (
        [x] => 4
        [y] => 676
        [z] => 2
    )
) 
```

我想要：

```
Array(
[1] => Array
    (
        [1] => Array
             (
                [y] => 1418
             )
        [2] => Array
             (
                [y] => 567
             )
        [3] => Array
             (
                [y] => 2345
             )
        [4] => Array
             (
                [y] => 567
             )
    )
[2] => Array
    (
        [1] => Array
             (
                [y] => 2134
             )
        [2] => Array
             (
                [y] => 456
             )
        [3] => Array
             (
                [y] => 1418
             )
        [4] => Array
             (
                [y] => 676
             )
    )
) 
```

现在，稍微解释一下。我想从这个数组中创建一个新数组，其中： [z] = 是第一个数组上的键 [x] = 是第二个数组上的键。

[z] 和 [x] 不必从数组中删除。

有人可以帮我怎么做吗？因为心机，不找我。特别是，我在其中创建新数组时遇到问题。

var_export：

```
array (
   0 => 
   array (
       'x' => '1',
       'y' => '1418',
       'z' => '1',
   ),
   1 => 
   array (
       'x' => '2',
       'y' => '567',
       'z' => '1',
   ),
   2 => 
   array (
       'x' => '3',
       'y' => '2345',
       'z' => '1',
   ),
   3 => 
   array (
       'x' => '4',
       'y' => '567',
       'z' => '1',
   ),
   4 => 
   array (
       'x' => '1',
       'y' => '2134',
       'z' => '2',
   ),
   5 => 
   array (
       'x' => '2',
       'y' => '456',
       'z' => '2',
   ),
   6 => 
   array (
       'x' => '3',
       'y' => '1418',
       'z' => '2',
   ),
   7 => 
   array (
       'x' => '4',
       'y' => '676',
       'z' => '2',
   ),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:57:16.797

[array_chunk](http://php.net/manual/en/function.array-chunk.php)是您正在寻找的。

你的情况是你想要的：`array_chunk($array, 4)`

# objective-c - 在 ViewDidAppear 上自动单击索引为 0 的 segmentControl

> ID：14008244
> 
> 赞同：0
> 
> 时间：2012-12-23T02:49:27.507
> 
> 标签：objective-c, ios, uisegmentedcontrol

我希望“自动”单击索引为 0 的段控制器。

我的基于 tabBar 的应用程序在 ViewDidAppear 方法的选项卡中有多个 segmentController，我希望它自动“单击”第一个分段控制器。

```
if (segmentController.selectedSegmentIndex == 0) {
    //stuff here
}

if (segmentController.selectedSegmentIndex == 1) {
    //stuff here
} 
```

有谁知道我如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:01:58.973

在您的（或）方法中设置您的`selectedSegmentIndex`属性。`UISegmentedControl``viewDidAppear``viewDidLoad`

`self.segmentedController.selectedSegemntIndex = 1;`

[UISegmentedControl 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:22:12.517

如果您以编程方式创建它，您可以像这样延迟加载它：

```
@interface ExampleViewController : UIViewController
@property (nonatomic, strong) UISegmentedControl *segmentedControl;
- (void)segmentedControlClicked:(UISegmentedControl *)segmentedControl;
@end

@implementation ExampleViewController

- (UISegmentedControl *)segmentedControl
{
    if (!_segmentedControl)
    {
        NSArray *items = @[@"First", @"Second", @"Third"];
        _segmentedControl = [[UISegmentedControl alloc] initWithItems:items];
        [_segmentedControl addTarget:self 
                           action:@selector(segmentedControlClicked:) 
                           forControlEvents:UIControlEventValueChanged];

        [_segmentedControl setSelectedSegmentIndex:0];   // Set Default selection

        CGRect frame = _segmentedControl.frame;
        frame.origin = CGPointMake(0.0f, 0.0f);     // Move to wherever you need it
        [self.view addSubview:_segmentedControl];
    }
    return _segmentedControl;
}

- (void)segmentedControlClicked:(UISegmentedControl *)segmentedControl
{

    // Whatever your code is goes here...

}
@end 
```

如果您希望最初也调用一个方法，您可以在您的`viewDidLoad:`方法中调用它，如下所示：

```
- (void)viewDidLoad
{
    [self.segmentedControl setSelectedSegmentIndex:0];  // Set desired default index (optional if set in lazy load as shown above)
    [self segmentedControlClicked:self.segmentedControl];
} 
```

因此，这将模拟对所需默认索引的点击。

小心将上面的内容放入`viewDidAppear:`（如果你真的想的话，你可以这样做），因为只要视图出现在前面，就会调用这个方法（例如，如果这个视图控制器呈现一个**模态**视图控制器，一旦模态被解除，这个视图控制器的`viewDidAppear:`方法将被调用）。

干杯!

# jquery - 启用/禁用表单提交按钮不起作用

> ID：14008248
> 
> 赞同：1
> 
> 时间：2012-12-23T02:49:54.620
> 
> 标签：jquery, forms, validation

我一直在使用一个表单，除非选择了 textarea 和 select 选项，否则我希望禁用提交按钮。

textarea 验证工作正常，问题出在选择上。问题是选择从将值传递给选择的自定义下拉菜单中获取其值，我认为这是问题所在，因为脚本不接受它，因为选择具有值。

该脚本在以下情况下有效： a) 您首先选择一个选择选项，然后在 textarea 中键入。b) 您在 textarea 中输入，选择一个选项，然后在 textarea 中再次输入。

启用/禁用按钮的脚本是这样的

```
 $(function () {
        $("#result, #content-text-ta").bind("keyup change",
  function () {      
      if ($("#content-text-ta").val() != "" && $("#result").val() != "")
          $(this).closest("form").find(":submit").removeAttr("disabled").removeClass('disabled').addClass('enabled');
      else
          $(this).closest("form").find(":submit").attr("disabled", "disabled").removeClass('enabled').addClass('disabled');      
      });
        }); 
```

将值传递给选择的文本区域和下拉列表 (id="catselect")

```
<textarea title="Post Text" name="content-text-ta" id="content-text-ta"></textarea>
<dl id="sample" class="dropdown">
                    <dt><a href="#" ><span class="cat" tabindex="1">Elige categoria</span></a></dt>
                        <dd style="z-index: 1;">
                            <ul>
                                <li><a href="#">Citas Famosas<span class="value">1</span></a></li>
                                <li><a href="#">Frases Bonitas<span class="value">2</span></a></li>
                            </ul>
                        </dd>
                    </dl>
                    <fieldset">
                        <select name='categories' id='catselect' class='tdomf_categories' size='1'>
                            <option id="result"></option>
                        </select>
                    </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:09:54.707

Use the following code:

```
function validateForm() {
    if ($("#content-text-ta").val() !== "" && $("#catselect").val().length > 0) {
        $("form").find("input[type*='submit']").removeAttr("disabled").removeClass('disabled').addClass('enabled');
    } else {
        $("form").find("input[type*='submit']").attr("disabled", "disabled").removeClass('enabled').addClass('disabled');
    }
}
$(function() {
    $("#catselect").html("");
    $(".dropdown dd ul li a").click(function() {
        var text = $(this).html();
        $(".dropdown dt a span").html(text);
        $(".dropdown dd ul").hide();
        $("#catselect").val($("#sample").find("dt a span.value").html());
        validateForm();
    });
    $("#catselect").append($("<option/>", {
        value: "",
        text: $(this).find('span').first().contents().filter(function() {
            return this.nodeType == 3;
        }).text()
    }));
    $(".dropdown dd ul li").each(function() {
        $("#catselect").append($("<option/>", {
            value: $(this).find(".value").text(),
            text: $(this).find('a').first().contents().filter(function() {
                return this.nodeType == 3;
            }).text()
        }));
        $("#catselect, #content-text-ta").bind("keyup change click", validateForm);
    });​ 
```

[Live Demo](http://fiddle.jshell.net/FkFNM/show/) | [Source](http://jsfiddle.net/cmeDF/)

# ios - 如何显示 UIScrollView 内容的小预览？

> ID：14008257
> 
> 赞同：1
> 
> 时间：2012-12-23T02:52:16.630
> 
> 标签：ios, uiscrollview, calayer

我想像 Sublime 文本编辑器一样显示 UIScrollView 当前显示区域的小预览。

想象一下，我的 UIScrollView 大小是 640x480，但内容是 640x960。

当我滚动时，我希望能够在右上角显示整个 UIScrollView 内容的小预览，从而使用户能够了解他实际查看的是 UIScrollView 的哪个部分。

我如何实现这样的目标？

CAReplicator？

CAScrollLayer？

我有点迷失在这里，所以任何提示都会很棒。

谢谢，

我最好的问候，

努诺

# java - Java Swing Thread 更改 UI - 并发症

> ID：14008260
> 
> 赞同：4
> 
> 时间：2012-12-23T02:53:01.923
> 
> 标签：java, multithreading, swing, user-interface, event-dispatch-thread

我尝试了很多小时。我有一个线程可以更改我的 UI 的 JTextField，这完全破坏了 UI。线程（我们称之为线程 A）由 ActionListener 生成。.setText() 函数调用在线程 A 创建的额外线程 (B) 中。线程 B 是 SwingUtilitis.invokeAll() 和/或 SwingUtilities.invokeAndWait() 的参数。我都试过了。这里有一些代码让它更清楚。

这是我创建线程 A 的 ActionListener - 当然缩短了：

```
public void actionPerformed(ActionEvent evt) {
    Object source = evt.getSource();
    if (source == window.getBtn_Search()) {
        Refresher refresh = new Refresher();
        refresh.start();
    }
} 
```

这是我的线程 A，稍后将线程 B 放入 EDT 队列：

```
public class Refresher extends Thread implements Runnable {

private int counter = 0;
private UI window = null;
private int defRefresh = 0;

@Override
public void run() {
    while(true){
        -bazillion lines of code-
                do {
                    try {
                        Refresher.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    if(window.canceled()) break;
                    UI.updateCounter(window.getLbl_Status(), (Configuration.getRefreshTime()-counter));
                    counter++;
                } while (counter <= Configuration.getRefreshTime());
             - more code-
    }
}
} 
```

UI.updateCounter(...) 将线程 B 排队到 EDT。

```
public static void updateCounter(final JLabel label, final int i) {
    try {
        SwingUtilities.invokeAndWait( 
            new Runnable() {
                public void run() {
                    label.setText("Refreshing in: " + i + " seconds.");
                }
            }
        );
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

现在，当最后一个函数被调用时，一切都搞砸了。我尝试了几个小时不同的东西，但没有任何效果。我也尝试过使用 SwingWorker，但有些或根本没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-21T19:45:56.543

尝试过的`invokeAndWait()`允许发布要在 EDT 上执行的 Runnable 任务，但它会阻塞当前线程并等待 EDT 完成执行任务。

但是在invokeAndWait() 中存在死锁的可能性，就像在任何创建线程相互依赖的代码中一样。如果调用代码持有一些通过 invokeAndWait() 调用的代码需要的锁（显式或隐式），则 EDT 代码将等待非 EDT 代码释放锁，这不会发生，因为非 EDT 代码正在等待完成 EDT 代码，应用程序将挂起。

正如我们在这里看到的，修改等待非 EDT 代码传递的 JLabel 组件。

**相反，我们可以使用**

`invokeLater()`负责创建和排队包含 Runnable 的特殊事件。此事件在 EDT 上按照其接收顺序进行处理，就像任何其他事件一样。时机成熟时，它通过运行 Runnable 的 run() 方法进行调度。

```
SwingUtilities.invokeLater(new Runnable() {
public void run() {
label.setText("Refreshing in: " + i + " seconds.");
}
}); 
```

**或者**

`isEventDispatchThread()`如果调用代码当前正在 EDT 上执行，则返回 true，否则返回 false。

```
Runnable code= new Runnable() {
                public void run() {
                    label.setText("Refreshing in: " + i + " seconds.");
                }
            }
        );

if (SwingUtilities.isEventDispatchThread()) {
code.run();
} else {
SwingUtilities.invokeLater(code);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T05:44:25.587

我认为您创建的中间`JPanel`s 可能算作验证根。因此`revalidate()`，当您调用时自动发生的这种情况`setText()`不会导致任何高于`JPanel`父级级别的布局更改。

我认为您实际上并不需要面板，因为 a`JLabel`可以同时包含图标和文本。请参阅[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)。

所以我的建议是删除面板，或者，如果它们有目的，请确保`isValidateRoot()`面板返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T20:31:10.913

一般来说，标签不太擅长显示变化的文本：它们的宽度变化，以及随之而来的布局。

使用只读的 JTextField，也许在样式上有适当的改变，可能是一个更好的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T22:09:41.650

更改' 文本时，`label`您至少应该调用' 最顶层容器，触发重新布局，假设调用/正确更改文本。`repaint()/revalidate()``label``label``invalidate()``revalidate()`

# html - Wordpress HTML 标题搞砸了

> ID：14008265
> 
> 赞同：0
> 
> 时间：2012-12-23T02:55:41.040
> 
> 标签：html, wordpress

我无法让我的自定义 WordPress 主题中的标题正确显示。标题属性设置如下：`<title><?php wp_title( '|', true, 'right' ); ?></title>`

我直接从 2012 主题中获取了该代码。当我激活 2012 主题时，标题看起来很完美，但是当我使用上面相同代码的自定义主题时，我将我的网站地址作为主页上的标题，而在其他每个页面上，我只得到页面名称后跟一个“|”。知道是什么原因造成的吗？我已经寻找了第二个标题标签，但到目前为止还没有。它破坏了我的搜索引擎优化。

**将此添加到我的functions.php中：**

```
function twentytwelve_wp_title( $title, $sep ) {
    global $paged, $page;

    if ( is_feed() )
        return $title;

    // Add the site name.
    $title .= get_bloginfo( 'name' );

    // Add the site description for the home/front page.
    $site_description = get_bloginfo( 'description', 'display' );
    if ( $site_description && ( is_home() || is_front_page() ) )
        $title = "$title $sep $site_description";

    // Add a page number if necessary.
    if ( $paged >= 2 || $page >= 2 )
        $title = "$title $sep " . sprintf( __( 'Page %s', 'twentytwelve' ), max( $paged, $page ) );

    return $title;
}
add_filter( 'wp_title', 'twentytwelve_wp_title', 10, 2 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:00:22.737

缺少博客名称。这就是为什么只显示页面标题的原因。尝试这样的事情有一个想法：

```
<title>
    <?php
    bloginfo( 'name' );
    echo " | ";
    if ( is_home() ) {
      _e( "Home" );
    }
    else {
      // Get the custom Title for this page, if any.
      if ( defined( 'Title' ) ) {
        $LimitWords = Title;
        echo string_limit_words( $LimitWords, 4 ) . " ...";
      }
      else {
      // Get the default Title
        $LimitWords = wp_title( '', FALSE );
        echo string_limit_words( $LimitWords, 4 ) . " ...";
      }
    }
    ?>
  </title> 
```

要使该代码正常工作，您必须`functions.php`在样式表目录中添加此函数：

```
 if ( !function_exists( 'string_limit_words' ) ) {
    function string_limit_words( $string, $word_limit ) {
      $words = explode( ' ', $string, ( $word_limit + 1 ) );
      if ( count( $words ) > $word_limit ) array_pop( $words );
      return implode( ' ', $words );
    }
  } 
```

# c# - 如何使用 JSON.NET 从具有弱类型代码的 JArray 中获取 JObject

> ID：14008270
> 
> 赞同：0
> 
> 时间：2012-12-23T02:56:53.077
> 
> 标签：c#, json, json.net

数据（JArray）：

```
[{ provinceid: "1", provincename: "北京", cityid: "33", cityname: "北京", jp: "bj", quanpin: "beijing" },
{ provinceid: "1", provincename: "北京", cityid: "600", cityname: "朝阳(北京)", jp: "cy", quanpin: "chaoyang" },
{ provinceid: "1", provincename: "北京", cityid: "601", cityname: "通州(北京)", jp: "tz", quanpin: "tongzhou" },
{ provinceid: "1", provincename: "北京", cityid: "46", cityname: "昌平", jp: "cp", quanpin: "changping" },
{ provinceid: "1", provincename: "北京", cityid: "602", cityname: "顺义", jp: "sy", quanpin: "shunyi" }] 
```

健康）状况：

`cityname == "北京"`

期望的结果（JObject）：

```
{ provinceid: "1", provincename: "北京", cityid: "33", cityname: "北京", jp: "bj", quanpin: "beijing" } 
```

问题是：如何使用条件从弱类型代码的数据中获取结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:41:23.997

```
using Newtonsoft.Json;
using System.Collections.Generic;
using System.Linq; 
```

...

```
public class City
{
    public int provinceid { get; set; }
    public string provincename { get; set; }
    public int cityid { get; set; }
    public string cityname { get; set; }
}

public void FindCity()
{
    string json = @"[{ provinceid: ""1"", provincename: ""北京"", cityid: ""33"", cityname: ""北京"", jp: ""bj"", quanpin: ""beijing"" }, { provinceid: ""1"", provincename: ""北京"", cityid: ""600"", cityname: ""朝阳(北京)"", jp: ""cy"", quanpin: ""chaoyang"" }, { provinceid: ""1"", provincename: ""北京"", cityid: ""601"", cityname: ""通州(北京)"", jp: ""tz"", quanpin: ""tongzhou"" }, { provinceid: ""1"", provincename: ""北京"", cityid: ""46"", cityname: ""昌平"", jp: ""cp"", quanpin: ""changping"" }, { provinceid: ""1"", provincename: ""北京"", cityid: ""602"", cityname: ""顺义"", jp: ""sy"", quanpin: ""shunyi"" }]";

    List<City> cities = JsonConvert.DeserializeObject<List<City>>(json);
    City 北京 = cities.Where(city => city.cityname == "北京").First();
} 
```

# mysql - phpMyAdmin 表搜索返回空结果，但 SQL 选择适用于特定表

> ID：14008274
> 
> 赞同：3
> 
> 时间：2012-12-23T02:57:26.133
> 
> 标签：mysql, phpmyadmin

发生的事情很奇怪，我以前从未见过这种情况，而且我对 mysql 非常熟悉。

使用 phpMyAdmin 表搜索功能搜索表时，无论我输入什么结果都是空的。例如，在 ID 列中搜索 77 会返回空结果。但是，如果我也在 phpMyAdmin 中运行 SQL 查询，那么就会有结果。例如 select * from table1 where id = '77';

更奇怪的是，这只发生在一张桌子上，搜索功能正常工作的所有其他桌子。

我尝试修复表，但仍然出现空结果。

我在网上的任何人身上都找不到这种情况……

还重新启动了sql server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:23:54.570

如果您的表有大量字段，则通过 phpMyAdmin 界面进行的更新可能会超过 PHP 设置“max_input_vars”的值。当发生这种情况时，phpMyAdmin 期望在您的更新发布到的页面上收到的一些内部表单字段被截断，这会导致 phpMyAdmin 失败，不幸的是，页面会在没有警告的情况下重定向到空白搜索表单。'max_input_vars' 的默认值为 1000。我将 php.ini 文件中的值提高到 5000，没有负面影响，它为我解决了这个问题。

设置 'max_input_vars' 具有 PHP_INI_PERDIR 模式，因此如果您无权访问 php.ini 文件，则可以将其设置在 .htaccess 文件、httpd.conf 文件或 .user.ini 中（ PHP 5.3) 文件，如果你有的话。我不确定 htaccess 文件需要什么代码，但下面是执行此操作的 PHP 代码。

```
ini_set('max_input_vars', '5000'); 
```

希望这能让你朝着正确的方向开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:09:58.190

您在使用 cPanel - 如果是，我刚刚在 cPanel 论坛上描述了如何解决问题：

[http://forums.cpanel.net/f5/unable-use-phpmyadmin-search-users-table-313381.html](http://forums.cpanel.net/f5/unable-use-phpmyadmin-search-users-table-313381.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-11T09:01:40.907

好简单。转到表格并显示下拉列表中显示的最大行数。然后，您可以搜索每个大页面。它不会通过所有表格获取文本。它只播放表格的一页。

# canvas - Kineticjs 中的 ctx.lineTo 等效项

> ID：14008275
> 
> 赞同：0
> 
> 时间：2012-12-23T02:57:44.360
> 
> 标签：canvas, kineticjs

我如何在动态 js 层上绘制它：

```
ctx.beginPath();
ctx.moveTo(47.1, 139.8);
ctx.lineTo(50.5, 137.6);
ctx.lineTo(50.5, 135.6);
.
.
.
ctx.bezierCurveTo(92.0, 200.2, 88.4, 201.2, 87.5, 201.2);
.
.
.
ctx.closePath();
ctx.fillStyle = color;
ctx.fill(); 
```

我已经设置了舞台和图层。我想在动力学js中绘制一个工具生成的自定义路径。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:15:48.400

您可以使用 Kinetic.Shape 构造函数创建自定义形状。这是一个例子：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)

# javascript - 如何强制浏览器重绘图像？

> ID：14008278
> 
> 赞同：0
> 
> 时间：2012-12-23T02:58:12.650
> 
> 标签：javascript, google-chrome, animation

我正在开发一个涉及扔雪球的 JavaScript 游戏。我需要雪球在其飞行路径中尽可能频繁地渲染。Chrome 会进行所有计算，包括设置 style.left 和 style.top 属性，但实际上直到雪球到达目的地才重新绘制雪球。Opera 没有这个问题。

相关的一点是，除了使用 alert() 之外，添加一个`alert()`after`renderSnowball()`修复问题是一个明显的问题。

到目前为止，这是我的代码：

```
function throwSnowball()
{
    var theta = parseFloat(angleField.value) *    Math.PI/180 ;
    var Vir = parseFloat(velocityField.value) ;

    if (!isNaN(Vir) && !isNaN(theta) )
    {

    Vix = Math.cos(theta) * Vir * 50;
    Viy = Math.sin(theta) * Vir * 50;   

time = new Date() ;
var timeThrown = time.getTime() ;

    while (snowballPosY > 0)
    {
        current = new Date() ;
        var currentTime = current.getTime() ;

        var timeElapsed = (currentTime - timeThrown)/5000 ;
        snowballPosX += Vix * timeElapsed;
        snowballPosY += Viy * timeElapsed;
        Viy -= GRAVITY * timeElapsed ;
        renderSnowball() ;      //renderSnowball() sets the style.left
                 // and style.top properties to snowballPosX pixels 
                 // and snowballPosY pixels respectively                        
        timeThrown = currentTime ;
    }

    snowballPosX = 0 ;
    snowballPosY = 50 ;
    renderSnowball() ;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:01:23.290

你完全阻塞了主线程。您是否尝试过使用`setTimeout`（即使超时为零）来允许在动画期间发生其他事情？

如果你愿意使用实验技术，[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)那就更好了。

编辑：该`setTimeout`方法看起来像这样（替换`while`循环）：

```
var drawAndWait = function() {
  if (snowballPosY > 0) {
    // movement/drawing code here
    setTimeout(drawAndWait, 20 /* milliseconds */);
  } else {
    // reset code that would normally go after your while loop
  }
};
drawAndWait(); 
```

因此，每次绘图完成时，它都会安排自己再次被调用，如果合适的话。请注意，您的`throwSnowball`函数将快速返回；直到稍后才真正完成投掷。这需要一段时间才能习惯正确地做；如果一开始不直观，请不要太担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:01:55.537

尝试摆脱紧密的循环。在您的函数退出之前，Chrome 可能不想重绘。尝试使用`setInterval`或`setTimeout`让 Chrome 有机会重新绘制。

# math - 当使用 3D 变换时，如何计算 div 指向屏幕的哪一侧？

> ID：14008279
> 
> 赞同：0
> 
> 时间：2012-12-23T02:58:41.067
> 
> 标签：math, css-transforms

我以前问过这个[，](https://stackoverflow.com/questions/13881777/what-is-the-best-way-to-calculate-an-elements-angle-when-multiple-rotates-are-a)但我的数学太差了，我还是不明白。我需要知道箭头指向屏幕的哪一侧*（上、左、下、右），以便我可以处理 div 内的拖动活动。

这个[小提琴](http://jsfiddle.net/XC7UG/2/)（代码是一团糟，它只适用于 safari/chrome）说明了这个问题。需要明确的是，箭头指向的计算应该来自立方体的确切中心，而不是箭头本身。如果你能提供一些关于数学的线索，我会做这项工作并将其张贴在这里。

*“屏幕的一侧”是指如果屏幕是时钟，它是什么角度或指向什么小时。

```
transform: rotateX(ndeg) rotateY(ndeg) rotateZ(ndeg); 
```

![在此处输入图像描述](../Images/bac6b15aaa85bad7b7e0a801d815d227.png)

在此示例中，箭头指向 4 点钟和 5 点钟之间。

# javascript - 覆盖由 FB js 库设置的 HTML“a”标签的默认属性值

> ID：14008281
> 
> 赞同：1
> 
> 时间：2012-12-23T02:59:22.123
> 
> 标签：javascript

我有一个旧的 facebook 分享按钮的例子，我想更改链接标签的 href 属性。我使用了下面的代码，但无法更改其 href 值。谁能建议为什么它不起作用？

```
<a id="shareMe" name="fb_share" type="button" href="http://www.facebook.com/sharer.php">Share Me</a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
<script type="text/javascript">
document.getElementById("shareMe").href="javascript:alert('hi');";
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:14:31.830

有几点需要考虑。

1.  此 api 已弃用，您可能知道，但功能仍然存在。
2.  `a tag`id 为**shareMe**的被替换为 FB 的 HTML，因此 href 将不存在。

检查元素，您会发现 HTML 甚至`a tag`不再是一个。

[http://jsfiddle.net/5awey/](http://jsfiddle.net/5awey/)

# c++ - 如何在 C++ 中执行 SQL 查询来定义变量

> ID：14008283
> 
> 赞同：0
> 
> 时间：2012-12-23T03:00:55.527
> 
> 标签：c++, sql, sql-server, visual-studio, visual-c++

我整天都在寻找如何在 C++ 中进行 SQL 查询，然后将结果存储为变量。

我正在使用 Visual Studio 2012，连接到 SQL 数据库，并在 Visual Studio 中成功运行以下查询：

```
SELECT Beta FROM Equity WHERE Ticker = 'AAPL' 
```

我希望能够在我的 c++ 程序中运行该查询，然后将结果存储在一个变量中，以便可以在计算中使用它。如何才能做到这一点？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:28:00.543

BY C++ 我确定您的意思是本机 C++ 应用程序，而不是托管 C++ 应用程序。您需要使用连接到 SQL Server 的库之一。选择是：

*   [ODBC](http://msdn.microsoft.com/en-us/library/windows/desktop/ms710252%28v=vs.85%29.aspx)，请参阅[ODBC 数据库示例](http://code.msdn.microsoft.com/ODBC-sample-191624ae)
*   [OLE DB](http://msdn.microsoft.com/en-us/library/windows/desktop/ms722784%28v=vs.85%29.aspx)，请参阅[示例 OLE DB 消费者应用程序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms716835%28v=vs.85%29.aspx)
*   [ADO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675532%28v=vs.85%29.aspx)，一个基于 OLE DB 的可编程性扩展。请参阅[Visual C++ 中的 ADO 代码示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677563%28v=vs.85%29.aspx)

我的建议是使用 ODBC。在您真正获得一个运行您所询问的查询的示例之前，您需要阅读和学习很多内容。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:05:14.287

您将需要获得一个[SQL 库](https://stackoverflow.com/questions/205802/best-portable-way-to-connect-to-sql-server-using-c)，这取决于您需要编写一些设置代码并执行查询。

# html - 可以将图像作为背景减慢页面的工作速度

> ID：14008286
> 
> 赞同：5
> 
> 时间：2012-12-23T03:01:45.203
> 
> 标签：html, css

我已经创建了自己的网站，并不复杂。但是，当我将背景从简单的颜色更改为图像时，网站上的一切都运行得很慢，所有的动画和一切。

工作 CSS 代码：

```
body{    
    color:#eee; 
        background-color: grey;      

} 
```

使网站变慢的 CSS：

```
body{

    color:#eee;
    background-image:url("images/bodyImage3.jpg");
        background-size: 1400px;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T03:05:36.730

是的，它会的。尝试**background-position: fixed**，可能会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T03:03:19.813

是的，一张 1400 像素的图片会降低网站的速度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T03:39:14.660

还值得一提的是 expires-headers，它允许客户端浏览器缓存背景图像，这样他们就不必在每次访问您的站点时下载它。这不会在第一次提高性能，但在随后的访问中，用户应该会注意到显着的改进。该站点列出了您可以为加快站点速度而进行的改进列表，包括一些有关过期的信息，这些信息应该可以帮助您入门。

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

# linux - Shell 脚本重命名

> ID：14008287
> 
> 赞同：0
> 
> 时间：2012-12-23T03:01:47.517
> 
> 标签：linux, shell, file-rename, batch-rename

现在我有这样的重命名脚本：

```
cd /Users/KanZ/Desktop/Project/Test/ 
n=1
for file in *.jpg; do 
    echo $file
    prefix=M
    file_name=M$n.jpg 
    echo $file_name
    n=$(( $n+1 ))
    mv $file $file_name 
done 
```

第一个如果我运行脚本，所有的 jpg 文件将是 M1.jpg M2.jpg M3.jpg 但是如果我将新文件名 A1.jpg 添加到这个目录并再次运行脚本。所有 M1.jpg M2.jpg M3.jpg 将被 M4.jpg 替换（在运行脚本之前，这个文件名为 A1.jpg），因为第一个字母是 A。它在 M 之前。这是我的问题。我想获得 M1 M2 M3 M4.jpg 并且每次如果有新文件出现，这个脚本就会生成像 M5.jpg M6.jpg 这样的继续名称。代码看起来如何？希望你明白这一点。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:26:02.747

到目前为止给出的其他答案并没有向您展示任何好的做法。

*这是假设编号是连续的*（即，没有从`M4.jpg`到跳转）的一种可能性`M6.jpg`。如果没有这个假设，脚本是安全的（它不会覆盖现有文件，但不会重命名某些文件）。

```
#!/bin/bash

shopt -s extglob
shopt -s nullglob

cd /Users/KanZ/Desktop/Project/Test/

# Determine how many files MX.jpg you have (with X a number):
files=( M+([[:digit:]]).jpg )
n=${#files[@]}

for file in !(M+([[:digit:]])).jpg; do
    file_name=M$((++n)).jpg
    mv -vn -- "$file" "$file_name"
done 
```

*   `-n`选项`mv`：no clobber（不覆盖已经存在的文件）
*   `-v`选项：`mv`冗长（所以你不需要你有的回声）
*   事情：选项结束，`--`后面只会找到参数（以防某些文件以连字符开头，这会混淆`mv`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T03:29:45.143

这个小脚本会做到这一点。

```
cd /Users/KanZ/Desktop/Project/Test/ 
n=$(ls -1 | grep '^M' -c)                    # find the number for M files 
ls -1 *.jpg| grep -v '^M' | while read file  # for each of the non-M files
do 
   n=$(($n+1));                       
   new_file=M$n.jpg                          # new name with next available M file name
   mv "$file" "$new_file"                        # rename with new file name
done 
```

看看它怎么运作。

```
test/rename$ for x in 1 2 3; do echo A$x> A$x.jpg; done;
test/rename$ ls
A1.jpg  A2.jpg  A3.jpg
test/rename$ cat ../rnm.sh 
#!/bin/bash
cd "$1"
n=$(ls -1 | grep '^M' -c)
nfiles=$(ls -1 *.jpg| grep -v '^M');
for file in $nfiles;
do 
   n=$(($n+1));
   new_file=M$n.jpg
   mv $file $new_file
done 
test/rename$ bash ../rnm.sh  ./
test/rename$ ls
M1.jpg  M2.jpg  M3.jpg
test/rename$ for x in 1 2 ; do echo B$x> B$x.jpg; done;
test/rename$ ls
B1.jpg  B2.jpg  M1.jpg  M2.jpg  M3.jpg
test/rename$ bash ../rnm.sh  ./
test/rename$ ls
M1.jpg  M2.jpg  M3.jpg  M4.jpg  M5.jpg
test/rename$ for x in *.jpg; do echo $x; cat $x; done;
M1.jpg
A1
M2.jpg
A2
M3.jpg
A3
M4.jpg
B1
M5.jpg
B2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T03:19:43.817

我理解您的要求的方式是：

将所有 .jpg 文件名从它们所拥有的任何名称更改为 M*.jpg，并在 M 后面添加一个递增数字。

在程序多次运行期间，计数应从上次运行期间设置的 M 文件的最大值开始增加。例如，如果程序的第一次运行创建了 M1、M2、M3，然后您添加了更多文件，它们应该从 M4、M5、M6 开始。

但M1、M2、M3本身不应该改变。

所以有几个建议：

您在脚本开头设置 n=1 。您应该使用上次运行的文件中存在的最大 Mx.jpg 值。

其次，当您在查找文件并对其进行迭代时，请排除所有 M*.jpg 文件，以便它们的名称不会被替换。

你认为这是你的要求。如果您有任何其他输入，请添加评论。将在下一条评论中发送脚本。

测试用例 : Existing Files, X.jpg, ASG.jpg, GER.jpg 运行后文件名 : M1.jpg, M2.jpg, M3.jpg

如果您只是在第一次运行后再次运行脚本而没有其他文件：文件名不应有任何更改：M1.jpg、M2.jpg、M3.jpg。

现在添加更多文件：Z.jpg、A.jpg、B.jpg 文件名应更改如下：

M1.jpg => M1.jpg, M2.jpg => M2.jpg, M3.jpg => M3.jpg, A.jpg => M4.jpg, B.jpg => M5.jpg, Z.jpg => M6.jpg。所以文件名将是 M1.jpg、M2.jpg、M3.jpg、M4.jpg、M5.jpg、M6jpg。

# opencv - OpenCV中的实时人脸检测

> ID：14008288
> 
> 赞同：0
> 
> 时间：2012-12-23T03:01:53.660
> 
> 标签：opencv, computer-vision, real-time, face-detection

我正在尝试编写一些简单的实时人脸检测代码，但不知何故它不起作用。（我在图像上尝试了面部检测代码并且它可以工作，但是使用下面的代码我在屏幕上得到一个灰色图像并且代码失败）

这是我尝试过的代码（它会打印“检测到面部！”一次到输出窗口）

```
CvHaarClassifierCascade *cascade;
CvMemStorage            *storage;
char *face_cascade="haarcascade_frontalface_alt2.xml";
CvRect* r;
const CvArr* img_size;
IplImage *grayscale;

void detectFacialFeatures( IplImage *img)
{ 
    grayscale = cvCreateImage(cvGetSize(img), 8, 1);
    cvCvtColor(img, grayscale, CV_BGR2GRAY);

    CvMemStorage* storage=cvCreateMemStorage(0);
    cvClearMemStorage( storage );

    cvEqualizeHist(grayscale, grayscale);

    cascade = ( CvHaarClassifierCascade* )cvLoad( face_cascade, 0, 0, 0 );
    CvSeq* faces = cvHaarDetectObjects(grayscale, cascade, storage, 1.1, 3, CV_HAAR_DO_CANNY_PRUNING, cvSize( 50, 50 ) );

    if(faces)
    {
        printf("face detected!");
        r = ( CvRect* )cvGetSeqElem( faces, 0 );
        cvRectangle( img,cvPoint( r->x, r->y ),cvPoint( r->x + r->width, r->y + r->height ), CV_RGB( 255, 0, 0 ), 1, 8, 0 ); 
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    int c;
    IplImage* color_img;
    CvCapture* cv_cap = cvCreateCameraCapture(0);
    cvSetCaptureProperty(cv_cap, CV_CAP_PROP_FRAME_WIDTH, 640);
    cvSetCaptureProperty(cv_cap, CV_CAP_PROP_FRAME_HEIGHT, 480);
    cvNamedWindow("Video",1); // create window
    for(;;) {
        color_img = cvQueryFrame(cv_cap); // get frame

        if(color_img==0)
        break;

        cvFlip(color_img, 0, 1); //mirror image

        detectFacialFeatures(color_img);
        cvShowImage("Video", color_img); // show frame

        c = cvWaitKey(10); // wait 10 ms or for key stroke
        if(c == 27)
        break; // if ESC, break and quit
    }
    /* clean up */
    cvReleaseCapture( &cv_cap );
    cvDestroyWindow("Video");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:23:10.593

1.  尝试不调用函数 cvFlip 和 cvEqualizeHistogram。
2.  查看（仅使用 cvShowImage）每个操作的结果（cvFlip、cvCvtColor、cvEqualizeHistogram） - 这些操作之一的结果可能是灰度图像。
3.  您不必每次尝试查找人脸时都加载 haar 分类器 - 在开始时加载它。对文件的操作很慢，因此它应该使您的编码速度更快。

# r - 在 R 中传递表达式的模式

> ID：14008291
> 
> 赞同：1
> 
> 时间：2012-12-23T03:02:17.717
> 
> 标签：r, lambda, closures, plyr, delayed-execution

许多 R 包允许将表达式作为参数的函数。然而，有些人更进一步。例如，`plyr`@hadley 的包大胆地定义了一个名为 的函数`.`：

```
> .
function (..., .env = parent.frame()) 
{
    structure(as.list(match.call()[-1]), env = .env, class = "quoted")
}
<environment: namespace:plyr> 
```

在我的环境中，`?'.'`产生“在任何包中都找不到主题的帮助”。从表面上看，它似乎`.()`提供了一种自动捕捉周围环境的延迟评估机制：

```
> x <- c(1,2,3)
> dot <- .(x + 10)
> dot
List of 1
 $ x + 10: language x + 10
 - attr(*, "env")=<environment: R_GlobalEnv> 
 - attr(*, "class")= chr "quoted"
> dot[[1]]
x + 10
> eval(dot[[1]])
[1] 11 12 13 
```

这就是正在发生的一切吗？我了解该`env`属性的用途，但为什么`class = "quoted"`重要？

使用 R 必须定义表达式以及延迟和强制评估的所有不同机制，使用`.()`何时传递表达式的模式有哪些好处和成本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:53:14.207

从`?'.'`

细节

类似的技巧可以用替代来执行，但是当函数可以以多种方式调用时，确保从正确的帧中提取值变得越来越棘手。替代技巧也使针对使用它们的函数进行编程变得困难，而引用类提供 as.quoted.character 以将字符串转换为适当的数据结构。

# iphone - 计算 UILabel 文本中的空格和空格

> ID：14008292
> 
> 赞同：0
> 
> 时间：2012-12-23T03:03:03.490
> 
> 标签：iphone, ios, uitableview, uilabel

我的单元格标签中有一个删除子视图，其宽度根据行中的文本进行设置。单元格标签中的行数设置为 2，当有两行时，我在标签上设置了两个删除线。

这就是我为只有一行文本的标签所做的事情：

```
 UIView *crossout = [[UIView alloc] init];
 crossout.frame = CGRectMake(x, y, w + 5, 2);
 crossout.backgroundColor = [UIColor colorWithRed: 0.0 / 255 green:175.0 / 255 blue: 30.0 / 255 alpha:1.0];
 crossout.tag = 1;
 [self.contentView addSubview:crossout]; 
```

我通过以下方式获得宽度（w）：

```
 CGFloat w = [self.label.text sizeWithFont:[UIFont systemFontOfSize:15.0f]].width; 
```

当我有第二次三振时，我只需从标签的长度中减去 w 即可得到第二次三振的宽度。

但问题是 w 不考虑标签文本中的空格或空白，因此它在换行符处看起来并不总是一致的。

如何计算 w 以使其包含空格和空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:20:16.343

我知道你可以用这个，`UITextField`但你可以试一试..

```
NSString *resultingString = self.label.text;

NSCharacterSet *whitespaceSet = [NSCharacterSet whitespaceCharacterSet];

if  ([resultingString rangeOfCharacterFromSet:whitespaceSet].location == NSNotFound)         {
//here you can put your code

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:23:55.570

要获取字符串中的内联空格数，您可以尝试以下代码：

```
NSCharacterSet* whitespaceSet = [NSCharacterSet whitespaceCharacterSet];
NSArray* substringsArray = [yourStringToCheck componentsSeparatedByCharactersInSet: whitespaceSet]
NSLog(@"Number of whitespaces : %d", [substringsArray count]); 
```

或者，甚至更好（尽管这可能不考虑标签等）：

```
NSLog(@"Number of whitespaces : %d", [[yourStringToCheck componentsSeparatedByString:@" "] count]); 
```

另一种选择（NSMutableString）：

```
NSUInteger replacementCount = [yourStringToCheck replaceOccurrencesOfString:@" " withString:@" " options:NSLiteralSearch range:NSMakeRange(0, [receiver yourStringToCheck])]; 
```

# opengl-3 - 如何在OpenGL 4.0中实现Bullet的btIDebugDraw接口

> ID：14008295
> 
> 赞同：6
> 
> 时间：2012-12-23T03:04:32.017
> 
> 标签：opengl-3, bulletphysics

Bullet 在旧 OpenGL 中实现了 btIDebugDraw 接口，用于绘制物理世界以进行调试。界面是这样的：

```
class GLDebugDrawer : public btIDebugDraw
{
int m_debugMode;

public:

GLDebugDrawer();
virtual ~GLDebugDrawer(); 

virtual void    drawLine(const btVector3& from,const btVector3& to,const btVector3&  fromColor, const btVector3& toColor);

virtual void    drawLine(const btVector3& from,const btVector3& to,const btVector3& color);

virtual void    drawSphere (const btVector3& p, btScalar radius, const btVector3& color);

virtual void    drawTriangle(const btVector3& a,const btVector3& b,const btVector3& c,const btVector3& color,btScalar alpha);

virtual void    drawContactPoint(const btVector3& PointOnB,const btVector3& normalOnB,btScalar distance,int lifeTime,const btVector3& color);

virtual void    reportErrorWarning(const char* warningString);

virtual void    draw3dText(const btVector3& location,const char* textString);

virtual void    setDebugMode(int debugMode);

virtual int     getDebugMode() const { return m_debugMode;}

}; 
```

OpenGL 1.1 实现在立即模式下工作，在每次函数调用时将顶点向下发送到 GPU。例如。这里是drawLine()

```
void    GLDebugDrawer::drawLine(const btVector3& from,const btVector3& to,const btVector3& fromColor, const btVector3& toColor)
{

    glBegin(GL_LINES);
        glColor3f(fromColor.getX(), fromColor.getY(), fromColor.getZ());
        glVertex3d(from.getX(), from.getY(), from.getZ());
        glColor3f(toColor.getX(), toColor.getY(), toColor.getZ());
        glVertex3d(to.getX(), to.getY(), to.getZ());
    glEnd();
} 
```

要将其转换为 OpenGL 4.0，我正在考虑使用定义为此类成员的顶点数组对象，例如 mVAO 和 VBO 也将成为成员。我将在 GLDebugDrawer 的 ctor 中设置 VAO，然后生成顶点并将其发送到 VBO，并在 drawLine() 中渲染它

```
drawLine()
{
    // Update buffers
    // Bind and render the buffer
} 
```

但是因为每次调用 drawLine() 时我都会发送顶点，所以我似乎没有使用 VAO 的强大功能，而是非常糟糕地模拟了立即模式！

在这个接口中实现线条绘制功能的更好方法是什么，其顶点可以在每次调用中*改变？*

我想稍后在我的 android 应用程序中使用此代码来检查我的物理特性，因此我正在重写 OpenGL 4.0 中的接口，我认为它更容易转换为 openGLES 2.0 。

我正在考虑在每次 drawLine() 调用时将顶点记录在向量中，然后在 Bullet 对 btIDebugDraw 函数的所有调用完成后更新 VBO。然后我不需要间歇性地向 GPU 发送顶点对，因为 Bullet 调用 btIDebugDraw 函数。

到目前为止，我在这里得到了一些关于管理顶点数据的信息：http: [//developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T17:55:12.340

不要马上画图`drawLine()`。:)
而是将顶点/颜色推入主机/RAM 中的缓冲区。

调用 后`dynamicsWorld->debugDrawWorld()`，您知道您`DebugDrawer`已获得框架的所有行，因此您可以执行以下操作：

1.  更新 VBO 一次
2.  `glDraw ...`
3.  清除主机缓冲区

# html - 从 sqlite db 获取时没有解释换行符？

> ID：14008300
> 
> 赞同：1
> 
> 时间：2012-12-23T03:05:53.710
> 
> 标签：html, sqlite, newline, flask

我正在使用 Flask 和 Sqlite。

我取一些包含换行符的字符串，并将其存储在数据库中。稍后我从数据库中获取它并将其包含在某个页面上，并且字符串显示时没有换行符。那是怎么回事？

例如，如果我有

```
{{ entry.content }} 
```

在我的模板中，存储的条目有内容“hello\nhello”，它在页面上显示“hellohello”。

但是，如果我有

```
{{ entry.content.replace('\r\n','<br />') }} 
```

或者

```
{{ entry.content.replace('\r\n','&#13;') }} 
```

在我的模板中，它会
在页面上显示“hello hello”或“hello hello”。

所以我的印象是换行符只是没有被浏览器解释和显示。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:38:04.617

试试 {{ entry.content|safe }} 这样 Flask/Jinja 就不会转义你的 HTML。

（不过要小心，因为任何用户输入的内容，包括脚本标签，都将按原样输出。如果您真的想谨慎并且只允许
标签，您可能想要编写自己的清理器：[Jinja2 转义除 img 之外的所有 HTML , b 等](https://stackoverflow.com/questions/8976683/jinja2-escape-all-html-but-img-b-etc))

# android - 使用 android sql lite 数据库

> ID：14008303
> 
> 赞同：-1
> 
> 时间：2012-12-23T03:07:42.060
> 
> 标签：android

再会！

我有 1000 个要添加到 Android 的 SQL 数据库中的项目列表。

900 个项目已经存在，我需要存储它，因为它可以编辑。其中 100 个将由用户使用 CRUD 添加。

我怎样才能输入 900 个项目并且只输入一次？我打算先在数据库之外创建，然后将其添加到 android 上。

我正在关注本[教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)，但在创建表格时，我不知道如何输入 900 个项目。

我打算先在数据库之外创建，然后将其添加到 android 上并使用该数据库（例如，我应该将数据库放在哪里？如何使用 java 代码调用它）。但是我该怎么做呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:15:49.440

只需将 insert 与传递给您的 sqlite 类的内容值数组一起使用，然后更新共享首选项。或者，您可以执行相同的操作，但传入一个数组列表并使用执行命令。或者甚至更多，您可以将它放在只会被调用一次的 on create 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:31:20.710

如果您在 Android 之外创建数据库，那么您可以使用添加记录所需的 SQL 创建一个文本文件，例如

```
INSERT INTO <tablename> VALUES (<_id value>,<field value>, etc etc); 
```

将其命名为 foo.sql，然后从 SQLite 提示符

```
sqlite> .read foo.sql 
```

如果 db 已经存在于 SQLite 中，您可以通过以下方式重新创建 SQL 语句

```
sqlite> .dump <tablename> 
```

这将创建 sql 语句来创建表并执行 INSERTS

# c++ - 将字符串值复制到类字段中？

> ID：14008304
> 
> 赞同：8
> 
> 时间：2012-12-23T03:08:15.787
> 
> 标签：c++, string

我是新手，正在学习 C++。我知道相当多的Java和一些C。

我想要做的是创建一个不可变名称类，它接受一个字符串值，将该字符串复制到一个类字段，然后最终将其散列到一个可以比字符串更有效地解析的 ID。

由于普遍缺乏 C++ 字符串的知识，我碰壁了。这是我到目前为止所拥有的...

```
#pragma once

#include <string>

class Name
{
public:
    Name(std::string s);
    ~Name(void);

    int getId();
    std::string getName();

private:
    int id;
    std::string name;
}; 
```

和...

```
#include "Name.h"

Name::Name(std::string s)
{

} 
```

所以我想要做的是将s的值存储在“name”私有字段中，由构造函数传入。据我所知，必须创建一个新的字符串对象，然后必须将 s 的值复制到其中。

我还*认为*参数 s 可以而且应该是字符串指针而不是字符串对象（以防止发生不必要的复制）。如果我是对的，那么构造函数应该如下所示，对吗？

```
Name::Name(std::string &s) { ... } 
```

在这种情况下，传入名称时不需要做任何特别的事情吗？IE。

```
Name n = new Name("Cody"); 
```

完全有效吗？实际上我不确定，因为据我所知，“Cody”是一个常量字符串或类似的东西。

因此，如果我都走在正确的轨道上，那么实际复制价值的正确方法是什么？我认为这是合适的，但我不确定。

```
#include "Name.h"

Name::Name(std::string s)
{
    name = new string(s);
} 
```

提前感谢您的帮助，我知道这是一个基本问题，但我正在慢慢步入 C++ 世界。:) - 科迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:25:38.120

你很接近，稍微按摩一下你的代码可以是这样的：

```
class Name
{
public:
    Name(const std::string& s);  // add const and reference
    ~Name(void);

    int getId() cosnt;           // add const
    std::string getName() const; // add const

private:
    int id;
    std::string name;
}; 
```

名称.cpp

```
Name::Name(const std::string& s):name(s)
{
} 
```

这里`:name(s)`称为`member initializer list`.

> 名称 n = 新名称（“科迪”）；完全有效吗？实际上我不确定，因为据我所知，“Cody”是一个常量字符串或类似的东西。

不，`n`不是指针，它不像 java 你需要为每个对象新建。在 C++ 中，你可以

```
Name n("Cody"); 
```

这将调用`Name(const std::string& s)`初始化对象 n 并使用“Cody”初始化名称字符串。注意：变量`n`具有自动存储期限，超出范围将被销毁。

要允许`n`动态存储持续时间，您需要使用新/删除对：

```
 Name *pn = new Name("Cody");
 delete pn; 
```

或使用智能指针，您无需调用`delete n_ptr;`，因为 n_ptr 在超出范围时也会被销毁：

```
 #include <memory>
 std::shared_ptr<Name> n_ptr(new Name("Cody")); 
```

**编辑：**

在其他类中使用 Name 类，与在 Name 类中使用字符串相同，不必使用指针。

```
class TestName
{
public:
   TestName(const Name& n):name_(n){ }

private:
  Name name_;
};

TestName tn("Cody"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:18:17.793

您应该使用对`std::string`此处的常量引用。

正如你所说，它可以防止不必要的复制。但是为什么不只是一个指针或一个常量指针呢？

常量引用将允许您将一些参数传递给您的函数，这些参数会隐式调用 right `std::string constructor`。

因此，简而言之，您可以这样做：

```
Name::Name(const std::string& s)
{
    this->name = s;
}

// Or even better..
Name::Name(const std::string& s):
    name(s)
{
}

int    main(void)
{
    Name    nick("hello");

    return 0;
} 
```

`std::string's constructors`您可以在其[cplusplus.com 的工作表](http://www.cplusplus.com/reference/string/string/string/)上找到每一个。

# c++ - 使用 Boost-Python 计算 python 中定义的函数的导数

> ID：14008307
> 
> 赞同：7
> 
> 时间：2012-12-23T03:08:48.103
> 
> 标签：c++, python, numpy, boost-python, sympy

我想编写一个 Boost-Python 程序来从用户那里获取一个符号 python 函数并在我的程序中评估它的导数。

例如，用户提供了一个 python 文件 (Function.py)，它定义了一个函数，如 F = sin(x)*cos(x)。

然后我想使用 Sympy 的符号微分能力访问 F'(x)（F(x) 的导数）。我不想使用数值微分。

有没有办法使用 Boost-Python 在 C++ 中使这样的函数 F'(x) 可访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T21:00:56.917

这是一些可以帮助您入门的代码。

主.cpp：

```
#include <boost/python.hpp>
#include <iostream>

using namespace boost::python;

int main(void) {
    Py_Initialize();

    object main_module = import("__main__");
    object main_namespace = main_module.attr("__dict__");

    exec("from __future__ import division\n"
        "from sympy import *\n"
        "x = symbols('x')\n"
        "f = symbols('f', cls=Function)\n"
        "f = cos(x) * sin(x)\n"
        "f1 = lambda u: diff(f).subs(x, u);\n",
        main_namespace);

    exec("result = f1(1.0)", main_namespace);
    double res = extract<double>(main_namespace["result"]);
    std::cout << "Out: " << res << std::endl;

    return 0;
} 
```

编译命令，替换为您的路径和编译器：

```
$ clang++ -I"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/Current/Headers/" -L"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/Current/lib/" -lpython2.7 main.cpp 
```

它可以编译，但现在对我不起作用。希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T00:26:30.983

我不是 SymPy 专家，但也许这可以帮助你：

您可以定义一个 Python 方法，如：

```
def f(x):
  return sin(x)*cos(x) 
```

您可以使用以下方法创建一个可评估函数**f1**作为**f**的导数：

```
from sympy import *
x = symbols('x')
f1 = lambdify(x, diff(f(x))) 
```

可以使用 boost::python 从 C++ 调用此函数 f1。您可以为函数 f1 创建一个对象，使用*() 运算符调用该函数并使用**extract<>*将结果转换为双精度。

这是一个例子：

```
 namespace py = boost::python;

  Py_Initialize();

  py::object main_module = py::import("__main__");
  py::object main_dict   = main_module.attr("__dict__");

  py::exec(
    "def f(x):\n"
    "  return  sin(x)*cos(x)\n",
    main_dict
  );

  py::exec(
    "from sympy import *\n"
    "x = symbols('x')\n"
    "f1 = lambdify(x, diff(f(x)))\n",
     main_dict
  );

  py::object f1 = main_dict["f1"];
  std::cout << py::extract<double>(f1(0.0)) << std::endl;
  std::cout << py::extract<double>(f1(1.0)) << std::endl;

  return 0; 
```

# java - 删除 Listview 上的项目，但这并没有从 SQLite 中删除

> ID：14008308
> 
> 赞同：0
> 
> 时间：2012-12-23T03:09:03.353
> 
> 标签：java, android, sqlite, listview

我使用此方法删除我的 SQLite 数据库中的项目：

```
public void deleteItem(String item){
    SQLiteDatabase db = this.getWritableDatabase();

    db.beginTransaction();
    db.delete(TABLE_NAME, ITEMS_COLUMN + " =?",  new String[] {item});
    db.setTransactionSuccessful();
    db.endTransaction();
    db.close();
} 
```

这对我的 ListView：

```
String nameString = (arg0.getItemAtPosition(arg2)).toString();
Log.d("itemtodelete", nameString);
db.deleteItem(nameString);
magicAdapter.remove(nameString);
magicAdapter.notifyDataSetChanged(); 
```

问题是，当我删除我`listview`的项目时，项目消失了，但是当我重新打开它时，项目仍然存在，因为这不会从数据库中删除。我将尝试用图像来解释这一点：

![我添加一个项目](../Images/d2447381c1965a86fcd88322a636d3b6.png)

![这里是](../Images/45efb45ea02721b5e9ce42dc0740d7c9.png)

![我删除这个](../Images/091de0078dc7155032f99c03293be22b.png)

![再见项目](../Images/ef764ba7900031136485d75d5f0fbdd6.png)

![重新打开列表](../Images/f5b3cacf3c047d99c82ea1cd3013ffe5.png)

![又来了！](../Images/b6496c7971120900fbb7a72e53f7cc85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:46:50.093

这意味着从数据库中删除存在一些问题。只需将您的 deleteItem() 中的第二行替换为

```
int x = db.delete(TABLE_NAME, ITEMS_COLUMN + " =?",  new String[] {item}
Log.d("deletedItem", x); 
```

这`x`将是删除的行数。删除后检查x的值，如果删除成功，应该大于0。如果不是，则意味着查询是错误的，我们需要数据库模式来纠正它。从您的`ListView`实现代码中，很明显您`nameString`自己是错误的。您正在将整个`Item`数组添加到数组列表中并传递给适配器。当您在`onItemClick`对话框中获取项目时，您正在使用此代码

```
 String nameString = (arg0
                                            .getItemAtPosition(arg2))
                                            .toString(); 
```

这里`arg0.getItemAtPosition(arg2)`将返回一个 Item 对象。你将不得不做这样的事情。

```
Item tempItem=(Item)items.get(arg2);
String nameString=tempItem.getName(); 
```

where`getName()`将返回项目的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:28:02.910

我所做的改变：

```
public void onClick(DialogInterface dialog, int which) {
    String nameString = (arg0.getItemAtPosition(arg2)).toString();

    Log.d("itemtodelete", nameString);

    db.deleteItem(nameString);

    magicAdapter.remove(nameString);
    magicAdapter.notifyDataSetChanged(); 
```

至

```
public void onClick(DialogInterface dialog, int which) {
    String nameString = (arg0.getItemAtPosition(arg2)).toString();
    String nameStringData = nameString.substring(6,
    nameString.indexOf("Priority Level:") - 1);
    Log.d("itemtodelete", nameStringData);
    db.deleteItem(nameStringData);
    magicAdapter.remove(nameString);

    magicAdapter.notifyDataSetChanged(); 
```

如果您有更好的建议，请发布答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T04:01:56.607

是的，这就是问题所在。

logCat 上的 deletedItem = 0 所以这是我的数据库：

```
public class DatabaseHolder extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "ItemsList";
    private static final String TABLE_NAME = "Items";
    private static final String ITEMS_COLUMN = "items_name";
    private static final String PRIORITY_COLUMN = "Priority";
    private static final String ID_COLUMN = "Items";

    private static int DATABASE_VERSION = 1;

    private static String QUERY = "CREATE TABLE " + TABLE_NAME + "("
            + ID_COLUMN + " INTEGER PRIMARY KEY AUTOINCREMENT, " + ITEMS_COLUMN
            + " TEXT NOT NULL, " + PRIORITY_COLUMN + " TEXT NOT NULL);";

    public DatabaseHolder(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(QUERY);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        this.onCreate(db);

    }

    // Sharer!

    public void addItem(String item_name, String priority) {

        if (!duplicate(item_name)) {
            SQLiteDatabase db = this.getWritableDatabase();

            ContentValues values = new ContentValues();
            values.put(ITEMS_COLUMN, item_name);
            values.put(PRIORITY_COLUMN, priority);

            db.beginTransaction();
            db.insert(TABLE_NAME, null, values);
            db.setTransactionSuccessful();
            db.endTransaction();
            db.close();
        }
    }

    public boolean duplicate(String name) {

        SQLiteDatabase db = this.getReadableDatabase();

        Cursor c = db.query(TABLE_NAME, null, ITEMS_COLUMN + " =?",
                new String[] { name }, null, null, null);
        int temp = c.getCount();
        c.close();
        db.close();
        if (temp > 0)
            return true;
        else
            return false;
    }

    public ArrayList<Item> getAllItems() {

        SQLiteDatabase db = this.getWritableDatabase();

        ArrayList<Item> item = new ArrayList<Item>();

        db.beginTransaction();

        Cursor cursor = db.query(TABLE_NAME, new String[] { this.ITEMS_COLUMN,
                this.PRIORITY_COLUMN }, null, null, null, null, PRIORITY_COLUMN
                + " DESC");

        while (cursor.moveToNext()) {

            Item itemTemp = new Item(cursor.getString(cursor
                    .getColumnIndexOrThrow(ITEMS_COLUMN)), new Level(
                    Integer.parseInt(cursor.getString(cursor
                            .getColumnIndexOrThrow(PRIORITY_COLUMN)))));
            item.add(itemTemp);

        }

        cursor.close();
        db.endTransaction();
        db.close();
        return item;

    }

    public void deleteItem(String item){

        SQLiteDatabase db = this.getWritableDatabase();
        int x = db.delete(TABLE_NAME, ITEMS_COLUMN + " =?",  new String[] {item});
        Log.d("deletedItem", String.valueOf(x) );
        db.beginTransaction();

        db.delete(TABLE_NAME, ITEMS_COLUMN + " =?",  new String[] {item});

        db.setTransactionSuccessful();

        db.endTransaction();

        db.close();

    }

} 
```

# wcf - 从客户端以异步方式调用 WCF 会使 WCF 服务也以异步方式运行？

> ID：14008309
> 
> 赞同：2
> 
> 时间：2012-12-23T03:09:18.440
> 
> 标签：wcf, asynchronous

当从客户端以异步方式调用 WCF 服务时，我们知道客户端应用程序未被阻止。

但是在执行异步方法调用时 WCF 端的线程是否被阻塞，或者 WCF 释放了它用来启动方法调用的线程？

例如，如果我从 ASP.Net 应用程序以异步方式调用“添加”方法，如下面的代码所示，后端的服务实例会等到方法完成吗？**WCF 使用 PerCall 的 InstanceContext。**

```
 CalculatorClient client = new CalculatorClient();

        // AddAsync
        double value1 = 100.00D;
        double value2 = 15.99D;
        client.AddCompleted += new EventHandler<AddCompletedEventArgs>(AddCallback);
        client.AddAsync(value1, value2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T12:39:25.450

WCF 对异步调用的支持严格来说只是客户端功能。

事实上，服务无法（也不应该）区分两个客户端之间的区别，一个进行同步调用，另一个进行异步调用。

无论客户端是通过异步代理还是直接通过异步调用进行调用，这都是正确的。

通过思想实验很容易证明这是真的。任何 wcf 服务都可以被异步调用，此外，这与选择的绑定无关 - 因此这必须只是一个客户端工具。

# java - 捕获块中的 Joptionpane 消息对话框

> ID：14008313
> 
> 赞同：-2
> 
> 时间：2012-12-23T03:11:10.267
> 
> 标签：java

我正在使用 Swing 将目录和文件从一台 Windows 服务器复制到另一台 Windows 服务器，效果很好。我希望在复制时 Windows 服务器意外关闭时弹出一个 Joption Messagedialog，因此将其放在 catch 块中，但当服务器关闭时它永远不会显示弹出窗口（我在复制时手动重新启动 Windows 服务器，但看不到弹出窗口）。有人可以帮忙吗，这是代码

```
try {
    textarea.append("Copying " + sourceFile.getAbsolutePath()
        + "   to " + targetFile.getAbsolutePath());
    is = new BufferedInputStream(new FileInputStream(sourceFile));
    bos = new BufferedOutputStream(new FileOutputStream(targetFile));

    long fileBytes = sourceFile.length();
    long soFar = 0;

    int theByte;

    while ((theByte = bis.read()) != -1) {
        bos.write(theByte);

        setProgress((int) (copiedBytes++ * 100 / totalBytes));
        publish((int) (soFar++ * 100 / fileBytes));
    }

    bis.close();
    bos.close();
    publish(100);
    textarea.append(" Done!\n");
} catch (Exception excep) {
    task.cancel(true);
    bos.flush();
    bis.close();
    bos.close();
    jf2 = new JFrame();
    jf2.setSize(401, 401);
    jf2.setDefaultCloseOperation(jf2.EXIT_ON_CLOSE);
    JOptionPane.showMessageDialog(jf2,
        "The Server is not accessible or it may be down because of Network Issue",
        "ERROR", JOptionPane.ERROR_MESSAGE);
} finally {
    if (bis != null) {
        bis.close();
    }
    if (bos != null) {
        bos.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:55:55.943

你的 try-catch 有点尴尬。

您尝试在异常事件和`finally`块内关闭流。

finally 保证无论如何都会被调用，因此您可以通过使用它来关闭蒸汽来为自己节省一些代码..

```
try {
    textarea.append("Copying " + sourceFile.getAbsolutePath()
                    + "   to " + targetFile.getAbsolutePath());
    is = new BufferedInputStream(new FileInputStream(sourceFile));
    bos = new BufferedOutputStream(new FileOutputStream(targetFile));

    long fileBytes = sourceFile.length();
    long soFar = 0;

    int theByte;

    while ((theByte = bis.read()) != -1) {
        bos.write(theByte);

        setProgress((int) (copiedBytes++ * 100 / totalBytes));
        publish((int) (soFar++ * 100 / fileBytes));
    }

    // Not required, finally will take care of it...
    //bis.close();
    //bos.close();
    publish(100);
    // !! THIS IS VERY, VERY NAUGHTY !!
    textarea.append(" Done!\n");
} catch (Exception excep) {

    JOptionPane.showMessageDialog(null, "The Server is not accessible or it may be down because of Network Issue", "ERROR", JOptionPane.ERROR_MESSAGE);
    task.cancel(true);

} finally {

    try {
        // techniqually, this gets taken care of when you close the stream,
        // but I tend not to trust it either...
        bos.flush();
    } catch (Exception e) {
    }

    try {
        bis.close();
    } catch (Exception e) {
    }
    try {
        bos.close();
    } catch (Exception e) {
    }

} 
```

看来您的代码正在使用 a `SwingWorker`，但您`textarea.append(" Done!\n")`在其中调用。这是非常非常糟糕的。

您的`process`方法需要能够做到这一点......基本上当您`process`收到时`100`，它应该能够更新文本区域。

您还可以允许在其他地方处理异常，允许该`doInBackground`方法抛出异常。这将允许您使用`done`方法和`get`方法来确定是否发生了异常，其额外的好处`done`是在 EDT 中调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:50:40.427

首先，我不喜欢所有手动资源管理，所以我将其更改为使用 Java 7 的[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)来为您执行此操作，这允许删除 finally 块和所有实例`close()`和`flush()`(顺便说一句，关闭电话会刷新，所以无论如何你都不需要。

其次，我不知道该消息框声明是否有效，Javadoc for`JOptionPane.showMessageDialog()`说第一个参数应该是`Component parentComponent`，但是您要声明一个新的不可见 JFrame ，所以如果您发布的这段代码在 JFrame 类中，`this`而是通过。总的来说，我会试一试：

```
try(BufferedInputStream bis = new BufferedInputStream(new FileInputStream(sourceFile));
    BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(targetFile)))
{
    textarea.append("Copying " + sourceFile.getAbsolutePath() +
                    " to " + targetFile.getAbsolutePath());
    long fileBytes = sourceFile.length();
    long soFar = 0;
    int theByte;
    while((theByte = bis.read()) != -1)
    {
        bos.write(theByte);
        setProgress((int) (copiedBytes++ * 100 / totalBytes));
        publish((int) (soFar++ * 100 / fileBytes));
    }
    publish(100);
    textarea.append(" Done!\n");
}
catch(Exception excep)
{
    task.cancel(true);
    JOptionPane.showMessageDialog(this, "The Server is not accessible or it may be down because of Network Issue", "ERROR", JOptionPane.ERROR_MESSAGE);
} 
```

# sql - SQL 将数据添加到已填充的单元格中

> ID：14008314
> 
> 赞同：2
> 
> 时间：2012-12-23T03:11:29.737
> 
> 标签：sql

我不知道这样做会被称为什么，所以我不知道如何进行大量搜索。

这是和示例数据库：

```
 name     id     code
 bob      1      Aa Bb cc DD ee
 sue      3      aa Bb Cc Dd Ee
 tom      8      AA BB cc dd EE 
```

我希望能够在“C”组和“D”组之间添加一个“F”组。所以它会是：

```
 name     id     code
 bob      1      Aa Bb cc ff DD ee
 sue      3      aa Bb Cc ff Dd Ee
 tom      8      AA BB cc ff dd EE 
```

关于如何完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:14:56.297

在 SQLServer 2005+ 中使用[STUFF](http://msdn.microsoft.com/en-us/library/ms188043%28v=sql.105%29.aspx)函数

```
SELECT name, id, STUFF(code, 9, 1, ' ff ') AS Code
FROM your_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:29:22.130

我不认为有一种标准化的方法可以做到这一点，但是许多数据库都有对表列进行正则表达式操作的方法。例如，在 PostgreSQL 中，您可以这样做：

```
UPDATE table
SET code = regex_replace(code, '(.. .. ..) (.. ..)', E'\\1 ff \\2', ''); 
```

（注意：这段代码改编自[这个答案](https://stackoverflow.com/a/1975396/520779)和[这些文档](http://www.postgresql.org/docs/8.3/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)，但我自己没有测试过，所以可能会有错误）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T07:21:11.210

由于您的列具有固定长度，因此无需搜索大小写字符的变体。您可以通过使用角色位置来获得所需的内容。使用`left()`函数提取前 8 个字符并`right()`提取后 5 个字符，并将**'ff'**夹在两者之间。

注意我已经在**SQL Server**上完成了这个，等效的功能可以很容易地在其他数据库中实现

```
UPDATE yourTable
set code = left(code,8)+' ff ' + right(code,5) 
```

**输出**

```
Aa Bb cc ff DD ee
aa Bb Cc ff Dd Ee
AA BB cc ff dd EE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T03:19:54.650

```
update mytable set code = replace(code, "cc DD", "cc ff DD") -- where is optional; 
```

以及 cc 和 dd 的其他大写变体的更多更新（总共 16 个变体）：

```
update mytable set code = replace(code, "Cc DD", "Cc ff DD") -- where is optional;
update mytable set code = replace(code, "CC DD", "CC ff DD") -- where is optional;
update mytable set code = replace(code, "cC DD", "cC ff DD") -- where is optional;
-- etc 
```

# c++ - 如何在 VIsual C++ 2010 中实现 C++ 原始字符串文字？

> ID：14008317
> 
> 赞同：3
> 
> 时间：2012-12-23T03:12:58.380
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, c++11

您可能已经知道，C++ 11 中的新字符串文字可以以非常灵活的方式表示。

`R"<delim>...<delim>";`- 在这段代码中，`<delim>`几乎可以是所有内容，也不需要转义字符。任何类型的括号都可以用来分隔字符串的结尾，原始字符串文字在定义正则表达式时特别有用：

`R"(I love those who yearn for the impossible. (Von Goethe, "Faust"))";`

可以使用相同字符的相等次数来简单地定义文本块：

`R";***************************( ; TINY BASIC FOR INTEL 8080
; VERSION 2.0
; BY LI-CHEN WANG
; MODIFIED AND TRANSLATED
; TO INTEL MNEMONICS
; BY ROGER RAUSKOLB
; 10 OCTOBER, 1976
; @COPYLEFT
; ALL WRONGS RESERVED ) ;***************************";`

更多信息可以在[这里](http://en.wikipedia.org/wiki/C++0x#New_string_literals)找到（维基百科）。

我想用 C++ 处理器来实现它，这就是我所拥有的。现在不支持双引号，我需要像C++ 11一样竞争它。有人可以帮助我吗？

```
#define STR(a) #a
#define R(var, re)  static char var##_[] = STR(re);\
const char * var = ( var##_[ sizeof(var##_) - 2] = '\0',  (var##_ + 1) ); 
```

你可以像这样使用它：

```
R(re, "\w\d");//It's OK, no warnings. 
```

代码使用不友好。所以我想要像 C++ 11 原始字符串文字这样的功能。

PS：我用的是Visual C++ 2010，不支持新特性，必须自己实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:37:18.893

一点旁注：您发布的示例不是 C++11 标准中的原始字符串文字。标记不得超过 16 个字符，并且以 ') ;' 结尾 与开始标记不匹配。不允许有空格。另一方面，这适用于 Visual Studio 2012+ CTP ( [http://scrupulousabstractions.tumblr.com/post/36204698243/setupcpp11-msvs](http://scrupulousabstractions.tumblr.com/post/36204698243/setupcpp11-msvs) )

```
#include <string>
#include <iostream>

int main()
{
    std::string x=R";************(; TINY BASIC FOR INTEL 8080
    ; VERSION 2.0
    ; 10 OCTOBER, 1976
    ; @COPYLEFT
    ; ALL WRONGS RESERVED );************";
    std::cout << x <<std::endl;    
    return 0;
} 
```

# multiplication - 如何将两个定点数相乘？

> ID：14008330
> 
> 赞同：3
> 
> 时间：2012-12-23T03:16:54.870
> 
> 标签：multiplication, fixed-point

我目前正在尝试弄清楚如何在定点表示中将两个数字相乘。

说我的数字表示如下：

```
[SIGN][2^0].[2^-1][2^-2]..[2^-14] 
```

就我而言，数字`10.01000000000000 = -0.25`.

例如，我将如何做`0.25x0.25`或`-0.25x0.25`等等？

希望你能帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T03:39:26.360

乘以一个更大的变量，然后右移定点精度的位数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T00:26:39.510

您应该使用 2 的补码表示而不是[单独的符号位](https://en.wikipedia.org/wiki/Signed_number_representations#Signed_magnitude_representation_(SMR))。对此进行数学运算要容易得多，不需要特殊处理。范围也得到了改进，因为负 0 没有浪费的位模式。要乘法，只需像正常的定点乘法一样。正常的 Q2.14 格式将为 x的位模式存储值 x/2 ^(14 ，因此如果我们有 A 和 B，那么)

[![\frac{A}{2^{14}}\times\frac{B}{2^{14}} = \frac{A \times B}{2^{14}}\times \frac{1}{ 2^{14}}](../Images/393ae09dcec0fc7b8b9ceb81fee398a7.png)](https://latex.codecogs.com/gif.latex?%5Cfrac%7BA%7D%7B2%5E%7B14%7D%7D%5Ctimes%5Cfrac%7BB%7D%7B2%5E%7B14%7D%7D%20%3D%20%5Cfrac%7BA%20%5Ctimes%20B%7D%7B2%5E%7B14%7D%7D%5Ctimes%20%5Cfrac%7B1%7D%7B2%5E%7B14%7D%7D)

因此，您只需将 A 和 B 直接相乘，然后将乘积除以 2 ^(14)即可将结果返回为 x/2 ^(14)的形式，如下所示

```
AxB = ((int32_t)A*B) >> 14; 
```

需要一个舍入步骤来获得最接近的值。您可以在[Q 数字格式#Math operations](http://en.wikipedia.org/wiki/Q_%28number_format%29#Math_operations)中找到方法。最简单的舍入到最接近的方法就是像这样加回最后移出的位（即第一个小数位）

```
AxB = (int32_t)A*B;
AxB = (AxB >> 14) + ((AxB >> 13) & 1); 
```

您可能还想阅读这些

*   [定点算术](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)。
*   [模拟定点除法/乘法](https://stackoverflow.com/q/5028986/995714)
*   [c#中的定点数学？](https://stackoverflow.com/q/605124/995714)

使用 2 位可以表示 [-2, 1] 的整数范围。因此使用 Q2.14 格式，-0.25 将存储为`11.11000000000000`. 使用 1 个符号位只能表示 -1、0、1，这会使计算更加复杂，因为您需要拆分符号位，然后在最后将其组合回来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:15:05.667

这是 C 语言中的一个简单示例：

```
int a =  0.25 * (1 << 16);
int b = -0.25 * (1 << 16);
int c = (a * b) >> 16;
printf("%.2f * %.2f = %.2f\n", a / 65536.0, b / 65536.0 , c / 65536.0); 
```

您基本上将所有内容都乘以一个常数，以将小数部分提升到整数范围，然后将这两个因子相乘，然后（可选地）除以其中一个常数，将乘积返回到标准范围，以供将来计算使用。这就像以小数美元表示的价格乘以 100，然后以美分计算（即 1.95 美元 * 100 美分/美元 = 195 美分）。

小心不要溢出要乘入的变量范围。您的常量可能需要更小以避免溢出，例如在上面的示例中使用`1 << 8`而不是`1 << 16`。

# android - Android - 如何在gridview中制作部分？

> ID：14008331
> 
> 赞同：9
> 
> 时间：2012-12-23T03:17:20.020
> 
> 标签：android

我可以在 gridview 的每个单元格中显示图像。现在我想用标题分成两个部分。这样我就可以定义要放置在不同部分的图像。有人能帮帮我吗。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-02T04:49:18.250

自定义实现是可能的。试试[StickyGridHeaders](https://github.com/TonicArtos/StickyGridHeaders)它很容易使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T03:45:06.570

这对于单个`GridView`. 然而，直观地呈现一系列带有标题/类别的网格的一种相当简单的方法是`GridView`为每个部分使用单独的。基本上，您最终可能会使用一个“根”适配器，其中包含网格部分的每个适配器。

一个好的起点是阅读以下两个类似的问题，因为它们指的是已经为您完成大部分艰苦工作的组件（无需重新发明轮子）：

*   [带有类别的Android GridView？](https://stackoverflow.com/questions/7397988/android-gridview-with-categories)
*   [带有节标题的 GridView](https://stackoverflow.com/questions/13203594/gridview-with-section-headers)

# owl - 我可以在我的 OWL 本体中使用“类”和“类型”吗

> ID：14008335
> 
> 赞同：1
> 
> 时间：2012-12-23T03:18:14.823
> 
> 标签：owl, protege, protege4

我需要有类“类”（在命名空间内）和数据属性“类型”（也在命名空间内）。

当我创建 Protege 时，他们的行为很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:52:30.153

> 我需要有类“类”（在命名空间内）和数据属性“类型”（也在命名空间内）。

这在技术上很好，而且是可能的，尽管它让人想知道为什么你需要这个，因为 OWL/RDF 已经为你提供了这两者。

> 当我创建 Protege 时，他们的行为很有趣。

奇怪的是，它总是让我觉得这是一个毫无幽默感的软件。但说真的，如果它不允许这样做，那么这就是 Protege 中的一个错误。当然，除非您没有告诉我们整个故事，并且您正在尝试做 Protege 警告您的其他事情。

# button - 特定图像或帖子而不是整个网站的社交媒体图标

> ID：14008337
> 
> 赞同：0
> 
> 时间：2012-12-23T03:18:22.453
> 
> 标签：button, blogs, social, sharing

我一直在寻找一种将共享图标添加到网站上特定帖子或图像的方法。我正在建立一个博客类型的网站，并且我已经能够为社交媒体放置共享图标，当单击时共享整个博客，但我想找到一种方法将它们放在单独的帖子上，以便用户可以共享帖子而不是整个站点。一个很好的例子是博主如何处理帖子的共享。

我正在开发的网站在这里：blog.crittersandgods.com

仅供参考，这些帖子位于具有相同类的各个 div 中，都嵌套在一个外部 div 中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:26:29.660

您可以直接从 3rd aprty 提供商那里尝试社交共享服务，该提供商提供复制粘贴的代码，一切顺利……如果您使用的是 CMS，那么它也很容易做到。试试 sharethis、loginradius 等

# python - Python：多客户端线程聊天服务器

> ID：14008339
> 
> 赞同：0
> 
> 时间：2012-12-23T03:19:48.227
> 
> 标签：python, multithreading, sockets, client-server

我正在尝试构建一个处理多个客户端的聊天服务器。我正在尝试在新线程上处理每个连接的客户端。问题是我真的很困惑如何将从客户端收到的消息转发到预期的接收者。我的意思是客户端 1 到客户端 5。我对套接字编程很陌生。因此，我们将不胜感激任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:07:26.007

这是您的服务器的伪设计。我将用与编程语言无关的术语发言。

有一个“全局哈希表”，将“客户端 ID 号”映射到相应的“套接字”（以及任何其他客户端数据）。对该哈希表的任何访问都由互斥锁保护。

每次接受新连接时，启动一个线程。我假设您的聊天协议中有一些内容，其中客户标识自己，获得分配的客户 ID 号，并被添加到会话中。线程做的第一件事就是将此客户端连接的套接字添加到哈希表中。

每当有消息进入时（例如从客户端 1 到客户端 5），在哈希表中查找“客户端 5”以获取其套接字。转发此套接字上的消息。

有一些比赛条件需要解决，但这应该是一个足够体面的设计。

当然，如果你真的想扩展，你不会采用“每个连接线程”的方法。但是，如果您被限制为同时连接大约 100 个或更少的客户端，您就可以了。之后，您应该考虑使用非阻塞 i/o 的单线程方法。

# ruby-on-rails - Rails - minitest - 测试需要登录的页面

> ID：14008342
> 
> 赞同：4
> 
> 时间：2012-12-23T03:20:30.833
> 
> 标签：ruby-on-rails, capybara, factory-bot, authlogic, minitest

我正在进行测试，但在需要 current_user 的页面上遇到了障碍。我在带有 ruby​​ 1.9.3p327 的 rails 3.2.9 中使用 minitest、capybara、factorygirl 和 authlogic。我将 minitest 作为单独的 gem 安装，并且似乎测试环境正常工作。

我有一个创建有效用户的工厂...我在这样的测试中调用该工厂：

```
 describe "UsersAcceptanceTest" do
    it "must load and include content" do
      FactoryGirl.create(:user)
      visit users_path
      page.must_have_content("cPanel")
    end
  end 
```

FAIL 通知我找不到内容“cPanel”是正确的（cPanel 是可供登录用户使用的链接）。失败错误继续提醒我在“登录，忘记密码，联系”中找不到它......这当然意味着测试正确路由到 users_path，但由于用户未登录而被 authlogic 重定向. 用户无法在我的系统中创建自己，因此在创建时不会自动登录。

如何让工厂与新创建的用户创建新的用户会话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T03:39:40.110

你可以这样做：

```
 visit signin_path
  fill_in 'email',      with: user.email
  fill_in 'password',   with: user.password
  click_button "Log in" 
```

只需根据您的登录页面结构进行编辑。

我不知道 minitest，但在 rspec 中，我会用这段代码创建单独的方法`def sign_in...end`并将其放入`support\utilities.rb`.

然后您的代码将如下所示：

```
 describe "UsersAcceptanceTest" do
    let(:user) { Factory(:user) }
    subject { page }

    it "must load and include content" do
      sign_in user 
      visit users_path
      it { should have_link("cPanel",   href: cpanel_path) }
    end
  end 
```

如您所见，我对您的代码进行了更多编辑。

# actionscript-3 - AS3 - 声音通道不重复但播放其他通道

> ID：14008344
> 
> 赞同：0
> 
> 时间：2012-12-23T03:20:45.810
> 
> 标签：actionscript-3, flash

这是我的问题

在我的主舞台上，我添加了这段代码以进行声音重复，它在这个舞台上运行良好并且循环良好

```
var HP1sound:Sound = new HP_sound();

var HP_channel:SoundChannel = new SoundChannel();

function playSound():void
{
    HP_channel=HP1sound.play();
    HP_channel.addEventListener(Event.SOUND_COMPLETE, onComplete);
}

function onComplete(event:Event):void

{
    SoundChannel(event.target).removeEventListener(event.type, onComplete);
    playSound();
}
    playSound(); 
```

但是，我已将代码添加到另一个页面（并更改了所有变量）并且正确的声音播放一次正确，但是，当它应该循环播放第一阶段的声音时。（第二页代码如下所示）

```
var Crow_sound2:Sound = new Crow_sound();

var Crow_channel:SoundChannel = new SoundChannel();

function playSound2():void

{
    Crow_channel=Crow_sound2.play();

    Crow_channel.addEventListener(Event.SOUND_COMPLETE, onComplete);
}

function onComplete2(event:Event):void
{
    SoundChannel(event.target).removeEventListener(event.type, onComplete);

     playSound2();
}
 playSound2(); 
```

所以它在重复播放声音 playSound2 它播放 playSound

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:19:40.767

您忘记更改`onComplete`为`onComplete2`：

```
Crow_channel.addEventListener(Event.SOUND_COMPLETE, onComplete);
SoundChannel(event.target).removeEventListener(event.type, onComplete); 
```

他们应该是：

```
Crow_channel.addEventListener(Event.SOUND_COMPLETE, onComplete2);
SoundChannel(event.target).removeEventListener(event.type, onComplete2); 
```

# node.js - express.js - req.body？

> ID：14008346
> 
> 赞同：15
> 
> 时间：2012-12-23T03:21:46.133
> 
> 标签：node.js, express

我是 js 新手，我在我正在阅读的代码中看到了很多

```
_.pick(req.body, ' ' , ' ') 
```

req.body 是做什么的？我什么时候可以说 req.body.something？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-23T05:02:12.317

`req.body`保存作为 POST 请求的一部分从客户端发送的参数。请参阅[API](http://expressjs.com/api.html#req.body)。

```
// POST user[name]=tobi&user[email]=tobi@learnboost.com
req.body.user.name
// => "tobi"

req.body.user.email
// => "tobi@learnboost.com"

// POST { "name": "tobi" }
req.body.name
// => "tobi" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-27T11:52:23.383

```
(req.body, ' ' , ' ') --> here req is the parameter of your function and using this parameter your can access the properties over then url.
so look this example
suppose this is form 
<form>
enter the name : <input type="text" name="name">
<button type ="submit"> submit </button> 
</form>

so if you want to access the name -- which is filled by the user end.
so for this you can 
do like this->   console.log(req.body.name);  -- this will print the name (property) in console. 
```

# asp.net - LINQ to DataTable 中单个查询的 10 行数据表列表

> ID：14008347
> 
> 赞同：0
> 
> 时间：2012-12-23T03:22:05.510
> 
> 标签：asp.net, linq, datatable

[我在这里](https://stackoverflow.com/questions/12740353/split-a-datatable-into-2-or-more-datatables-based-on-column-value)遇到了这段漂亮的小代码：

```
 List<DataTable> result = DTHead.AsEnumerable()
            .GroupBy(row => row.Field<int>("MIVID"))
            .Select(g => g.CopyToDataTable())
            .ToList(); 
```

它根据特定字段的值创建 of `List`。`DataTable`

是否可以调整此代码以根据记录数创建`List`一个`DataTables`？例如，如果我有 18 条记录，我希望将其分成 2 条`DataTables`，每条 10 行（第二个表的最后两行为空）。如果我有 35 条记录，我会得到 4 条记录，`DataTable`最后 5 行在表 4 上为空。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:32:34.227

这就像一个标准的分页机制：

```
var result = DTHead.AsEnumerable();

int pageSize = 10;
int pages = result.Count / pageSize + 1;
for (int i = 0; i < pages; i++)
{
    var page = result.Skip(i * pageSize).Take(pageSize).Select (t => t.Name)
                     .CopyToDataTable();
} 
```

当然，在循环中，您必须对`page`变量做一些有意义的事情。

# c# - 主机插件注册

> ID：14008353
> 
> 赞同：0
> 
> 时间：2012-12-23T03:23:15.180
> 
> 标签：c#, plugins, mef, registration

插件向其主机注册自己的好方法是什么？

我正在使用 C#，这是针对 WPF 应用程序的。我正在设计一个插件系统。由于我只是在设计阶段，我不需要细节。我将使用 MEF。在我的设计中，我希望每个插件都将自己注册为主机的插件。在这种情况下，“注册”是非特定的；我只想让主机能够自动找到每个可用插件。我假设唯一需要的注册数据是每个插件的 DLL 的完整路径和文件名；换句话说，在安装时，每个插件都会将自己添加到插件路径列表中。插件的安装程序需要能够找到该列表，我在问什么是实现这一目标的好方法。传统的解决方案是将所有插件放在指定的文件夹中，但这需要用户这样做。理论上，插件可以找到主机并确定要使用的文件夹，但如果我们这样做，那么插件可以更进一步，将自己添加到插件列表中。我假设可以设计一种方法，使插件开发人员更容易在插件安装中包含注册，而不是要求插件安装程序将插件安装在指定的插件目录中。无论哪种方式，它都应该让用户轻松安装插件。我假设可以设计一种方法，使插件开发人员更容易在插件安装中包含注册，而不是要求插件安装程序将插件安装在指定的插件目录中。无论哪种方式，它都应该让用户轻松安装插件。我假设可以设计一种方法，使插件开发人员更容易在插件安装中包含注册，而不是要求插件安装程序将插件安装在指定的插件目录中。无论哪种方式，它都应该让用户轻松安装插件。

例如，据说强名称是为类似目的而设计的，但微软表示不应将强名称用于 EXE。为什么不的解释不清楚，所以也许一个强名称可以用于此目的。

我基本上只是在寻求关于学习什么的指导。

# c++ - 应用修改多个文件的补丁

> ID：14008354
> 
> 赞同：0
> 
> 时间：2012-12-23T03:23:19.313
> 
> 标签：c++, diff, patch, git-diff

我试图在这里应用补丁，我将它保存为 xLoader.patch

[http://gitorious.org/x-load-omap3/mainline/commit/ee120c894c3377054bda149748eb0621f2f843c8?format=patch](http://gitorious.org/x-load-omap3/mainline/commit/ee120c894c3377054bda149748eb0621f2f843c8?format=patch)

它修改了多个文件并且不会从基本目录顺利完成，我正在使用下面的命令并收到一堆关于帅哥失败的错误，我该如何正确地做到这一点？有没有办法将文件分解成独立处理每个文件的段？

补丁 -p1 --dry-run -i xLoader.patch

错误：

```
x-loader$ patch -p1 --dry-run -i xLoader-512_patch.txt
patching file board/omap3beagle/omap3beagle.c
Hunk #1 succeeded at 310 (offset 45 lines).
Hunk #2 FAILED at 305.
1 out of 2 hunks FAILED -- saving rejects to file board/omap3beagle/omap3beagle.c.rej
patching file drivers/k9f1g08r0a.c
Hunk #1 succeeded at 221 (offset 67 lines).
Hunk #2 FAILED at 185.
1 out of 2 hunks FAILED -- saving rejects to file drivers/k9f1g08r0a.c.rej
patching file include/asm/arch-omap3/mem.h
Hunk #2 FAILED at 72.
Hunk #3 succeeded at 305 (offset 52 lines).
Hunk #4 succeeded at 364 (offset 52 lines).
1 out of 4 hunks FAILED -- saving rejects to file include/asm/arch-omap3/mem.h.rej 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:30:37.217

如果这就是您所需要的，那么是的，可以将它分成一个段，用于它修补的每个文件。`---`只需在/`+++`标题行上拆分它。这些片段中的每一个都可以作为一个独立的补丁文件很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:38:52.260

如果您正在使用 git 并应用到 git 工作目录，则可以使用 git-apply 而不是 patch。

听起来你的补丁只是没有干净地应用。没有真正需要一次仅将其应用于一个文件，它将应用于干净地应用到的文件，并为失败的文件保存拒绝。

如果您愿意，您可以将其拆分为多个部分，每个单独的文件都以带有“diff”命令的行开头。

如果您使用的是 GNU 补丁，则有一个“-U”选项可以将拒绝文件保存在统一差异而不是普通差异中。如果您习惯于阅读统一差异，那么在手动应用被拒绝的大块时，这将使您的生活变得更加轻松。

另一种选择是创建不同的 git 分支，一个是干净地应用补丁的分支，另一个是你所做的任何更改，使其不能干净地应用。然后将分支与应用到您自己的补丁上的补丁合并。这可能会给你内联 diff3 样式合并冲突而不是 .rej 文件。

# jsf - 在 managedbeans primefaces 之间传递参数

> ID：14008355
> 
> 赞同：1
> 
> 时间：2012-12-23T03:23:44.800
> 
> 标签：jsf, primefaces

我的托管豆有问题。我无法设法在它们之间传递参数。这是一个 XHTML 片段。它基本上是一个登录表单。它只是将参数发送到后台bean。

```
<h:outputLabel for="username" value="Kullanıcı Adı: *" />
  <p:inputText id="username" value="#{loginBean.username}" required="true" requiredMessage="Kullanıcı adı giriniz.">
    <f:validateLength minimum="2" />
  </p:inputText>
  <p:message for="username" display="icon"/>
  <h:outputLabel for="password" value="Şifre: *" />
  <p:inputText id="password" value="#{loginBean.password}" required="true" requiredMessage="Şifreyi giriniz!" type="password">
    <f:validateLength minimum="2" />
  </p:inputText>
  <p:message for="password" id="msgPass" display="icon"/>
  <f:facet name="footer">
    <center>
      <p:commandButton id="submit" value="Giriş" icon="ui-icon-check" action="#{loginBean.check}" style="margin:0" update="grid"/>
    </center>
  </f:facet> 
```

在我的支持 bean 中，我正在检查用户输入是否与数据库记录匹配。如果是，那我让他进入系统。同时，我要取他的全名。

我的豆豆：

```
@ManagedBean
@RequestScoped
public class LoginBean {
  public String getUsername() {
    return username;
  }
  public void setUsername(String username) {
    this.username = username;
  }
  public String getPassword() {
    return password;
  }
  public void setPassword(String password) {
    this.password = password;
  }
  public String getMgs() {
    return mgs;
  }
  public void setMgs(String mgs) {
    this.mgs = mgs;
  }
  public String getFullname() {
    return fullname;
  }
  public void setFullname(String fullname) {
    this.fullname = fullname;
  }
  public String getOriginalURL() {
    return originalURL;
  }
  public void setOriginalURL(String originalURL) {
    this.originalURL = originalURL;
  }
  private String username;
  private String password;
  private String mgs;
  private String fullname;
  private String originalURL;
  private static Logger log = Logger.getLogger(LoginBean.class.getName());
  public String check() throws Exception {
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/projetakip", "root", "");
    Statement stmt = con.createStatement();
    String md5Pass = md5(password);
    String SQL = "select * from users where username='" + username + "' and password='" + md5Pass + "'";
    ResultSet rs = stmt.executeQuery(SQL);
    while (rs.next()) {
      if (username.matches(rs.getString("username")) && md5Pass.matches(rs.getString("password"))) {
        this.fullname = rs.getString("ad") + " " + rs.getString("soyad");
        return "panel?faces-redirect=true";
      } else {
        FacesMessage msg = new FacesMessage("Yanlış kullanıcı adı/şifre.");
        FacesContext.getCurrentInstance().addMessage(null, msg);
        return "index?faces-redirect=true";
      }
    }
    return "index?faces-redirect=true";
  }
  public void getProductSetupData(ActionEvent event) {
    FacesContext context = FacesContext.getCurrentInstance();
    Data data = context.getApplication().evaluateExpressionGet(context, "#{data}", Data.class);
  } 
```

我想要的是传递`fullName`给其他bean（或页面）。如何在我的 bean 之间传递这个变量？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T11:37:54.743

[BalusC 写了一篇关于JSF 2.0 通信](http://balusc.omnifaces.org/2011/09/communication-in-jsf-20.html)的完整博客文章，真的值得你花时间。阅读它，您会发现有不止一种方法可以做到这一点，其中一种是在您的其他 bean 中注入属性本身：

```
@ManagedProperty("#{loginBean.fullName}")
private String fullName; 
```

另一个可能更合适的方法是注入 bean 本身：

```
@ManagedProperty("#{loginBean}")
private LoginBean loginBean; 
```

# python - 如何返回 Python 列表中存在的多个元素的索引？

> ID：14008357
> 
> 赞同：6
> 
> 时间：2012-12-23T03:23:45.907
> 
> 标签：python

```
L=[0,8,5,6,4,5,6,14,8] 
```

我希望能够返回 [4,5,6] 的索引（在此示例中返回 4）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:26:22.573

这是实现它的一种方法：

```
def find_in_list(l, x):
    for i in range(len(l) - len(x) + 1):
        if l[i:i+len(x)] == x:
            return i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:33:58.377

改用这个：

```
' '.join(map(str,L)).index(' '.join(map(str,x)))/2 
```

编辑：感谢 isbadawi 注意到愚蠢的错误，以及 solilo 指出了巨大的错误哈哈

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T03:36:59.220

```
In [193]: min(i for i in range(len(L)) if L[i:i+len(key)] == key)
Out[193]: 4

In [194]: L=[0,8,5,6,4,5,6,14,8]

In [195]: key=[4,5,6]

In [196]: min(i for i in range(len(L)) if L[i:i+len(key)] == key)
Out[196]: 4 
```

# objective-c - 如何在没有 UITableView 的情况下使用 UISearchBar 和 SearchDisplayController？

> ID：14008360
> 
> 赞同：-2
> 
> 时间：2012-12-23T03:24:50.047
> 
> 标签：objective-c, ios, uisearchbar

我有一个习惯`UIScrollView`，有些`UIView`喜欢`collectionView`。我想使用`UISearchBar`and`SearchDisplayController`来搜索和显示内容，如下面的 Mac OS 上的应用程序屏幕：

![在此处输入图像描述](../Images/a1f18d25cbdf56ecd103197766db99f4.png)

有人知道吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:16:11.020

为此，离开`UISearchBarController`. 如果您用于搜索，请使用`UITextField`或`UISearchBar`实现方法。`shouldChangeCharactersInRange``UITextField`

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

return YES;
} 
```

当您在 Filtered Array 中获取对象时。使用任何 GridView 来显示您的结果。你也可以使用`UICollectionView`。或一些第三方库，如`CHGridView`.

# git - 是否可以将 TortoiseSVN（在 Windows7 上）转移到 TortoiseHG（在 Linux 上）？

> ID：14008362
> 
> 赞同：0
> 
> 时间：2012-12-23T03:25:13.247
> 
> 标签：git, mercurial, tortoisesvn, tortoisehg, tortoisegit

如果我有两个都装有 Windows 操作系统的盒子，那对我来说没问题。

但是，假设我有不同的操作系统平台：我目前在我的 Windows 7 机器上使用 TortoiseSVN，但我现在将切换到使用 Ubuntu。我希望我现有的 TortoiseSVN 日志在我的 Ubuntu 机器上工作。我可以将日志从 TortoiseSVN（在 Windows 上）传输到 TortoiseHG（在 Linux 上）吗？

回顾一下：

*   我有：Windows 7 上的 TortoiseSVN
*   迁移到：Ubuntu 上的 TortoiseHG*

* 或者有没有 Tortoise + Git 可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:14:34.943

是的，这是完全可能的。但是分开处理这两个转移：

1.  *将您的 SVN 存储库迁移到 Hg（或 Git）。*有很多关于这个的教程，让你保留你的历史/日志。
2.  *将你的 repo 从 box Windows 迁移到 Linux。*对于 Hg，这只是移动存储库文件夹及其所有内容的问题，我怀疑对于 Git 这也是一样的。对于 SVN，我不完全确定，但你总是可以在你的 Linux 机器上重新检查。

至于你的第二个问题，我认为 TortoiseGit 不适用于 Linux。不过，还有其他[适用于 Linux 的 Git GUI 客户端](https://stackoverflow.com/questions/1516720/git-gui-client-for-linux)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:50:27.533

**注意**：在 Subversion 作为 CVCS 的情况下，您还**必须**记住TortoiseSVN 使用的**存储库**（它只是 Subversion 中心部分的客户端）：它们可以是远程的（http:// 或 svn:// 可访问）或本地（通过 File:/// RA 层）。为什么它对你很重要？迁移到新操作系统和新 SCM 后，您必须至少保存对 SVN-repo 的访问权限以执行一项操作：将 SVN-repo 转换为 Mercurial 存储库，如果 NTFS-disc 上的本地存储库（或 | 和 unmountable分割）。

鉴于上述条件，您的迁移路径可以是

*   在新操作系统上为新 SCM 安装新客户端
*   将桥接添加到 Subversion 到您的 DVCS（Git 和 Mercurial 都有）
*   将 Subversion 存储库转换为 DVCS 存储库
*   使用新的 DVCS 并忘记 Subversion

# kendo-ui - 不在网格中的列的网格自定义过滤器

> ID：14008371
> 
> 赞同：1
> 
> 时间：2012-12-23T03:26:43.697
> 
> 标签：kendo-ui

我有一个由页面上的另一个区域过滤的网格。我已经想出了如何通过 javascript/ajax 传递过滤器参数来过滤网格列。但是，我想传递自定义过滤器参数（没有列）来做额外的过滤服务器端。

就我而言，用户可以拥有 0:M 角色。我没有在 KendoUI Grid 中显示角色，但是我想在 multiselct 框中选择 0:M 角色并将选择传递给网格的过滤器调用，以便我可以在我的存储过程中使用值服务器端。有人知道怎么做吗？这是我目前的设置。

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Account Filter</legend>

    <table>
        <tr>
            <td style="vertical-align: top;">
                <div class="editor-label">
                    <label>User Name:</label>
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.UserName)
                    @Html.ValidationMessageFor(model => model.UserName)
                </div>

                <div class="editor-label">
                    <label>Email:</label>
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.PrimaryEmailAddress)
                    @Html.ValidationMessageFor(model => model.PrimaryEmailAddress)
                </div>

                <p>
                    <input type="button" id="btnFilter" value="Filter" />
                </p>
            </td>
            <td>&nbsp;</td>
            <td style="vertical-align: top;">
                <div class="editor-label">
                    <label>Role(s):</label>
                </div>
                <div class="editor-field">
                    @Html.DropDownListFor(model => model.RolesList, Model.RolesList, null, htmlAttributes: new { id="ddlTimeZones", multiple="multiple" })
                    @Html.ValidationMessageFor(model => model.RolesList)
                </div>
            </td>
        </tr>

    </table>
</fieldset>
}

<div style="margin-top: 10px;">
@(Html.Kendo().Grid<AccountGridModel>()    
    .Name("grdAccounts")
    .Columns(columns =>
    {
        columns.Bound(m => m.UserId);
        columns.Bound(m => m.UserName);
        columns.Bound(m => m.FirstName);
        columns.Bound(m => m.LastName);
        columns.Bound(m => m.PrimaryEmailAddress);
    })
    .Groupable(grouping => grouping
        .Enabled(true))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model => model.Id(m => m.UserId))
        .Events(events => events.Error("error_handler"))
        .Read(read => read.Action("Index", "Accounts"))
        .Sort(sort => sort.Add(m => m.UserName).Ascending())
        .PageSize(20))
    .Filterable(filtering => filtering
        .Enabled(false))
    .Pageable(paging => paging
        .Enabled(true)
        .Info(true)
        .PageSizes(false)
        .Refresh(true))
    .Scrollable(scrolling => scrolling
        .Enabled(false)
        .Height(400)
        .Virtual(false))
    .Sortable(sorting => sorting
        .Enabled(true)
        .AllowUnsort(false)
        .SortMode(GridSortMode.SingleColumn)))
</div>

@section Scripts {
@Scripts.Render("~/bundles/jqueryval")

<script type="text/javascript">
    $("#btnFilter").click(function () {
        //var dateFrom = $("#dpDateFrom").data("kendoDatePicker").value();
        var userName = $("#UserName").val();
        var primaryEmail = $("#PrimaryEmailAddress").val();

        var grid = $("#grdAccounts").data("kendoGrid");

        grid.dataSource.filter({
            logic: "and",
            filters: [
                { field: 'UserName', operator: 'contains', value: userName },
                { field: 'PrimaryEmailAddress', operator: 'contains', value: primaryEmail },
                { field: 'RoleIdList', operator: 'contains', value: '1,2,3,4' } //this errors... no column
            ]
        });
    });
</script>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:15:44.900

您应该在 dataSource.read 配置中使用名为**[data的函数。](http://docs.kendoui.com/api/framework/datasource#transportreaddata-objectstringfunction)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:39:29.087

感谢 Pechka 让我朝着正确的方向前进。您可以通过如下所示的 Read.Data javascript 函数将其他值传递给您的控制器。

```
<div style="margin-top: 10px;">
@(Html.Kendo().Grid<AccountGridModel>()    
    .Name("grdAccounts")
    .Columns(columns =>
    {
        columns.Bound(m => m.UserId);
        columns.Bound(m => m.UserName).Filterable(false);
        columns.Bound(m => m.FirstName);
        columns.Bound(m => m.LastName);
        columns.Bound(m => m.PrimaryEmailAddress).Filterable(false);
    })
    .Groupable(grouping => grouping
        .Enabled(true))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model => model.Id(m => m.UserId))
        .Events(events => events.Error("error_handler"))
        .Read(read => read.Action("Index", "Accounts").Data("additionalData"))
        .Sort(sort => sort.Add(m => m.UserName).Ascending())
        .PageSize(20))
    .Filterable(filtering => filtering
        .Enabled(true))
    .Pageable(paging => paging
        .Enabled(true)
        .Info(true)
        .PageSizes(false)
        .Refresh(true))
    .Scrollable(scrolling => scrolling
        .Enabled(false)
        .Height(400)
        .Virtual(false))
    .Sortable(sorting => sorting
        .Enabled(true)
        .AllowUnsort(false)
        .SortMode(GridSortMode.SingleColumn)))
</div>

@section Scripts {
@Scripts.Render("~/bundles/jqueryval")

<script type="text/javascript">
    function additionalData() {
        var userName = $("#UserName").val();
        var primaryEmailAddress = $("#PrimaryEmailAddress").val();
        var roleIdList = "";

        var selMulti = $.map($("#RolesList option:selected"), function (el, i) {
            return $(el).val();
        });
        roleIdList = selMulti.join(",");

        return {
            userName: userName,
            primaryEmailAddress: primaryEmailAddress,
            roleIdList: roleIdList
        };
    }

    $("#btnFilter").click(function () {
        var grid = $("#grdAccounts").data("kendoGrid");
        grid.dataSource.read();
    });
</script>
} 
```

然后，在您的控制器中，将变量添加到您的 POST 函数中，如下所示：

```
 //
    // POST: /Admin/Accounts/

    [HttpPost]
    public ActionResult Index([DataSourceRequest] DataSourceRequest request, string userName, string primaryEmailAddress, string roleIdList)
    {
    } 
```

# c++ - CMake麻烦Mingw

> ID：14008373
> 
> 赞同：-1
> 
> 时间：2012-12-23T03:26:44.213
> 
> 标签：c++, sql, visual-c++, cmake, mingw

我想使用 MinGW 和 CMake 构建 C++ 组件，但提供的文档仅列出了 Visual Studio 的示例：

> ```
> C:\>MKDIR build
> C:\>cd build
> C:\build>cmake -G "Visual Studio 10" -DWITH_BOOST=OFF -DWITH_ORACLE=OFF (...) ..\soci-X.Y.Z
> C:\build>msbuild.exe SOCI.sln 
> ```

我如何为 MinGW 构建这个？

您可能需要示例的来源： http: [//soci.sourceforge.net/doc/installation.html](http://soci.sourceforge.net/doc/installation.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:38:12.843

你试过这个吗？

```
C:\>MKDIR build
C:\>cd build
C:\build>cmake -G "MinGW Makefiles" -DWITH_BOOST=OFF -DWITH_ORACLE=OFF (...) ..\soci-X.Y.Z
C:\build>make 
```

您需要安装 MinGW 并在`%PATH%`.

# performance - Excel VBA - 常量字符串范围或定义范围名称之间的任何性能优势？

> ID：14008374
> 
> 赞同：3
> 
> 时间：2012-12-23T03:27:04.987
> 
> 标签：performance, excel, defined, named-ranges, vba

节日，

我有一个问题要帮助我更多地了解 Excel VBA 如何有效地管理已在一个地方声明的已定义范围，以便很好地执行数据。只是想在更多地研究这个项目之前确定哪两个选项（我到目前为止知道）更好或不是首选的最佳实践。

我要解决的问题是制作一个小表，其中包含一组虚构供应商的许多故障，因此该表看起来像这样（对不起，它是原始形式）

> > **“公司名称” “故障数”**
> > “Be Cool Machine” 7
> > “Coolant Quarters” 5
> > “Little Water Coolants” 3
> > “Air Mover Systems” 7
> > “Generals Coolant” 5
> > “Admire Coolants” 4

我的第一个选项（常量字符串）是这个模块/公式，如下所示。

```
Option Explicit
Public Const CountofFailures As String = "J7:J12"
Sub btnRandom()
    ' Declaration of variables
    Dim c As Range

    ' Provide a random number for failures across Suppliers
    For Each c In ActiveSheet.Range(CountofFailures)
        c.Value = Random1to10
    Next c
End Sub

Function Random1to10() As Integer
    'Ensure we have a different value each time we run this macro
    Randomize
    ' Provide a random number from 1 to 10 (Maximum number of Failures)
    Random1to10 = Int(Rnd() * 10 + 1)
End Function 
```

第二个选项（定义名称）是这个模块/公式，如下所示。

```
Option Explicit
Sub btnRandom()
    ' Declaration of variables
    Dim c As Range
    Dim iLoop As Long

    ' Provide a random number for Suppliers with Defined Range
    For Each c In ActiveWorkbook.Names("CountofFailures").RefersToRange
        c.Value = Random1to10
    Next c
End Sub

Function Random1to10() As Integer
    'Ensure we have a different value each time we run this macro
    Randomize
    ' Provide a random number from 1 to 10 (Maximum number of Failures)
    Random1to10 = Int(Rnd() * 10 + 1)
End Function 
```

任何建议 - 如果这有帮助，我稍后会做一个宏计时器测试？

如果我将单元格中列出的范围作为值获取，是否还有第三种选择？我还没有看到在实践中执行此操作的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T03:52:26.897

我不知道性能差异 - 我怀疑 const 更快。我的一般建议是“在遇到性能问题之前不要担心性能”。否则，您最终会猜测将优化时间花在什么上面，这可能是不正确的。

至于命名范围，好处是当您插入行和列时它们会移动。如果您在 I 列插入新列，则需要编辑您的第一个示例，并且您的第二个示例将继续工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T03:58:20.327

您的两个代码都遍历将成为瓶颈的范围。我建议你

1.  使用范围名称自动“定位”您的数据 - 即，如果您插入/删除行和列，您的引用将保持不变。不过我的经验是，文件中的许多范围名称最终可能会混淆工作簿的工作
2.  对该范围执行一次写入

**代码**

```
Sub QuickFill()
Randomize
Range("CountofFailures").Formula = "=Randbetween(1,10)"
Range("CountofFailures").Value = Range("CountofFailures").Value
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T12:34:47.990

我发现命名范围较慢（大概是因为 Excel 必须对名称进行内部查找以找到它所指的内容），但您不太可能找到显着的差异，除非在非常极端的情况下（数十成千上万的名称被引用数万或数十万次）。
正如迪克所说：好处远远超过了微不足道的速度损失。

# gnuplot - gnuplot xticks 不等间距

> ID：14008376
> 
> 赞同：1
> 
> 时间：2012-12-23T03:29:04.270
> 
> 标签：gnuplot

我有一个数据文件（d.asc）如下：

```
0.1  0.5
...  
1    0.34
... 
10   9.4
...
100  45.3 
```

在 0.1 和 1、1 和 10、10 和 100 之间，我有 35 个值。所以在 d.asc 文件中我总共有 109 行。但我只想让 x 轴显示这四个点值（即 0.1、1、10 和 100）。要绘制它，我使用以下内容：

```
set xtics ("0.1" 0.1, "1" 1, "10" 10, "100" 100)
set grid
plot "d.asc" using 1:2 notitle with lines 
```

但这给出了一些奇怪的东西，它将 1 和 10 放置在非常接近 0.1 的位置（有点将 1 和 10 覆盖在 0.1 之上）。所以我无法弄清楚它是 0.1、1 还是 10。然后将 100 放在最后。但我希望在 x 轴上看到彼此等距的 0.1、1、10 和 100。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:44:23.360

如果您希望它们彼此等距，则需要使用`logscale`.

```
set logscale x 
```

或者可能，

```
set logscale x 10 
```

# php - MySQL 和 PHP 行数组

> ID：14008383
> 
> 赞同：3
> 
> 时间：2012-12-23T03:30:20.433
> 
> 标签：php, mysql

好吧，所以我对 MySQL 的一切都有一种与生俱来的恐惧

这是我的桌子：

```
+----+-----------------+------+
| id | name            | age  |
+----+-----------------+------+
|  1 | Timmy Mellowman |   23 |
|  2 | Jeff Johnson    |   18 |
+----+-----------------+------+ 
```

这是我的`PHP code`（*连接到数据库之外*）

```
$raw = mysql_query("SELECT * FROM example") or die(mysql_error()); 
$row = mysql_fetch_array($raw);
echo "\n\n";
print_r($row); 
```

所以这是我的输出：

```
Array
(
    [0] => 1
    [id] => 1
    [1] => Timmy Mellowman
    [name] => Timmy Mellowman
    [2] => 23
    [age] => 23
) 
```

为什么这是输出？名字翻倍？为什么为 [1] 和 [name] 设置名称？

另一方面是他们将 PHP 与 MySQL 结合使用的更好方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T03:33:33.230

根据 mysql_fetch_array 的**[PHP 文档](http://php.net/manual/en/function.mysql-fetch-array.php)**：

> 返回与获取的行相对应的字符串数组，如果没有更多行，则返回 FALSE。返回数组的类型取决于 result_type 的定义方式。**通过使用 MYSQL_BOTH（默认），您将获得一个包含关联索引和数字索引的数组。**使用 MYSQL_ASSOC，你只能得到关联索引（因为 mysql_fetch_assoc() 有效），使用 MYSQL_NUM，你只能得到数字索引（因为 mysql_fetch_row() 有效）。

因此，在您的行中`$row = mysql_fetch_array($raw);`$row 接收一个同时具有关联索引和数字索引的数组，因为这是默认值。如果您只需要关联索引，请使用`$row = mysql_fetch_array($raw,MYSQL_ASSOC);`(or `mysql_fetch_assoc()`)，或者您是否只需要数字索引，请使用`$row = mysql_fetch_array($raw,MYSQL_NUM);`(or `mysql_fetch_row()`)。

要检索所有行，请使用以下内容：

```
while ($row = mysql_fetch_array($raw)) {
    echo "<p>" . $row['id'] . " - " . $row['name'] . " - " . $row['age'] . "</p>\n";  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T03:35:36.900

如果未指定返回类型，则默认为`mysql_fetch_array ( $raw ,MYSQL_BOTH )` 返回关联索引和数字索引，如上。

对于数字索引使用

```
$row = mysql_fetch_array($raw, MYSQL_NUM) 
```

对于关联索引使用

```
$row = mysql_fetch_array($result, MYSQL_ASSOC) 
```

要访问所有行，请使用 while 循环

```
while ($row = mysql_fetch_array($row, MYSQL_NUM)) {
    printf("ID: %s  Name: %s Age:%s", $row[0], $row[1],$row[2]);  
} 
```

或者如果使用关联索引

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    printf("ID: %s  Name: %s Age:%s", $row["id"], $row["name"],$row["age"]);
} 
```

# jquery - jQuery mobile 中更快的 mobile.changePage

> ID：14008388
> 
> 赞同：1
> 
> 时间：2012-12-23T03:30:47.077
> 
> 标签：jquery, jquery-mobile

我有一个问题。我有一个登录页面，这是我的移动应用程序的第一页，包含两个字段：用户名和密码，以及一个提交按钮。提交后，我进行 ajax 调用以检查有效性，如果成功，它将页面切换到主页。

问题：如果成功，它会显示登录页面，两个字段都空白 1-2 秒，然后最终切换到主页。非常缓慢或滞后。

```
$(document).bind('pageshow', function () {          
            $('#loginSubmit').on("click", function(){
                    $('#loginSubmit').button('disable'); 
                    var formData = $("#loginForm").serialize();
                    console.log(formData);
                    $.ajax({
                        type: "POST",
                        url: "php/checkLogin.php",
                        cache: false,
                        data: formData,
                        success: function(data){
                            var check = $.parseJSON(data);
                            console.log(check);
                            if (check.approved == 1)
                            {
                                $.mobile.changePage('#home');
                                username = $("#username").val();
                            }
                            else
                            {
                                // wrong username or password
                            }
                        }
                    });
            }); 
        }); 
```

我添加了一个全局加载微调器（此处未显示），但它只显示半秒然后消失。我不知道如何处理这个。

控制台日志：

```
POST http://localhost/jquery/php/checkLogin.php 200 OK 1.02s
POST http://localhost/jquery/ 200 OK 48ms 
```

第一个调用似乎是有效检查，我假设第二个调用正在加载主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:10:11.623

$.ajax 不是你的问题，jQuery Mobile 有一些性能问题（主要是 Phonegap 与 android 平台结合使用）。

在你的情况下，你可以做一些事情。

从我可以看到你正在提交作为点击事件的一部分。点击事件有 300 毫秒的延迟。这通常可以通过 fastclick 修复（通常是因为很多人不明白何时使用 fastclick 实现）：[https](https://github.com/drowne/jquery.mobile.fastclick) ://github.com/drowne/jquery.mobile.fastclick 。

最坏的情况，如果您正在创建移动应用程序绑定 touchstart 事件而不是单击事件。阅读本文以了解原因：[Touchstart 与 Click。引擎盖下会发生什么？](https://stackoverflow.com/questions/9633297/touchstart-vs-click-what-happens-under-the-hood)

最后，ajax spinner 消失了，因为 ajax 调用进入了成功状态，但页面仍在加载。为了解决这个问题，仍然在这个 ajax 调用点显示它：

```
beforeSend: function() {
    $.mobile.showPageLoadingMsg(true);
} 
```

但是将他隐藏在此页面事件中：

```
$('#home').live('pageshow', function (event) {
    $.mobile.hidePageLoadingMsg();
}); 
```

当页面成功加载时，这将隐藏一个微调器。

# php - 从命名空间导出类

> ID：14008395
> 
> 赞同：1
> 
> 时间：2012-12-23T03:33:01.170
> 
> 标签：php, namespaces

我命名了一个类以利用别名为一些长类名提供简写：

```
namespace some_namespace;
use \VeryLongClassnameWhichIUseOften as Short;

class MyClass {
  public static method do_stuff() {

    Short::do_something(Short::do_other_stuff());

  }
} 
```

现在有一些第三方代码需要`MyClass`在全局命名空间中。

我可以以某种方式导出`MyClass`到全局命名空间吗？

我试过了

```
class \MyClass {
  ...
} 
```

但显然这是不允许的（意外的 T_NS_SEPARATOR，期待 T_STRING）。

我也试过这个：

```
namespace some_namespace {
  use \VeryLongClassnameWhichIUseOften as Short;

  class MyClass {
    ...
  }
}

namespace {
  use \some_namespace\MyClass as MyClass;
} 
```

这不会引发任何其他错误，但 MyClass 在全局命名空间中仍然不可用（找不到类“MyClass”）。我不太明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:36:58.583

把它放在你的全局命名空间中：

```
use \some_namespace\MyClass as MyClass; 
```

我相信它应该工作。

编辑：它没有。这应该有效：

```
class_alias('\some_namespace\MyClass', 'MyClass'); 
```

# python-3.x - 如何在Python中将列表中的元素相乘

> ID：14008397
> 
> 赞同：1
> 
> 时间：2012-12-23T03:33:46.473
> 
> 标签：python-3.x

我找到了解决如何与元素值相乘的问题的答案，但我关心的是如何制作元素本身的副本。我有：

```
a = [1, 2, 3]
x = 3
b = [] 
```

我试过了：

```
b.append(a * x) 
```

但这给了我：

```
[1, 2, 3, 1, 2, 3, 1, 2, 3] 
```

我需要：

```
b = [[1, 2, 3], [1, 2, 3], [1, 2, 3]] 
```

请注意我是一个编程新手。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:35:56.303

如果您需要复制列表而不是对列表的引用，则不能使用`*`.

```
b = [a[:] for i in range(x)] 
```

（`a[:]`创建列表的副本。）

# c# - 为什么 DrawableGameComponent 可以使用实例类？

> ID：14008399
> 
> 赞同：2
> 
> 时间：2012-12-23T03:33:49.830
> 
> 标签：c#, visual-studio, xna, overriding

我注意到它`DrawableGameComponent`可以用于“实例类”

`DrawableGameComponent`包含一些“覆盖”，例如`Draw`，`LoadContent`等`Update`...看看下面的代码：

这是 Game1 的类：

```
 public class Game1 : Microsoft.Xna.Framework.Game
    {

        public Game1()
        {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Contenttt";
        graphics.PreferredBackBufferWidth = GAME_WIDTH;
        graphics.PreferredBackBufferHeight = GAME_HEIGHT;
        }
     } 
```

我另一堂课的代码：

```
public class Bullet: DrawableGameComponent //based by DrawableGameComponent
{
    public Bullet(Game1 game): base(game) //set argument for draablegamecomponent

    {
        //do something
    }
} 
```

**可绘制游戏组件：**

> > public DrawableGameComponent（游戏*游戏*）
> 
> 参数说明：
> 
> > **游戏** 类型：游戏 游戏组件应附加到的游戏。**

如您所见，参数 of`DrawableGameComponent`是一个类 `Microsoft.Xna.Framework.Game`。然后我们用我们的`Game1`类填充它。

这是我的其他类的代码，将在我的 World Game1 中影响 *DrawableGameComponent 的覆盖*

```
 protected override void Initialize()
        {
            base.Initialize();            
        }
        protected override void LoadContent()
        {             

        }

        protected override void UnloadContent()
        {
        } 
```

问题是：为什么我们可以在我自己的班级上使用他们的“覆盖”？为什么这会影响game1世界？

然而，在 c# 中，“base”语句就像

> 公共类项目符号：MyClass

我们不能让它基于“实例”类。

但是对于`DrawableGameComponent`实例类，他们可以通过他们的参数进行设置，因此他们的“覆盖无效”将适用于我们之前放置的参数类。

如果你知道怎么做，请告诉我如何上课。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:29:02.767

听起来您可能不了解`virtual`方法的概念。方法的能力`override`是可用的，因为在基类中定义的方法被标记为`virtual`。基本上这些是***模板方法***设计模式的例子。`virtual`或`abstract`方法允许它们的实现在子类中改变（或者在抽象类的情况下，完全延迟）。

```
public abstract class BaseClass
{
   public void TemplateMethod()
   {
      DoSomething();
      DoSomethingElse();
   }

   protected virtual void DoSomething()
   {
      // implementation that can be changed or extended
   }

   // no implementation; an implementation must be provided in the inheritor
   protected abstract void DoSomethingElse();
}

public sealed class SubClass : BaseClass
{
   protected override DoSomething()
   {
      // add extra implementation before
      base.DoSomething(); // optionally use base class' implementation
      // add extra implementation after
   }

   protected override DoSomethingElse()
   {
      // write an implementation, since one did not exist in the base
   }
} 
```

然后您可以执行以下操作：

```
SubClass subClass = new SubClass();

// will call the new implementations of DoSomething and DoSomethingElse
subClass.TemplateMethod(); 
```

也可以看看：

*   [遗产](http://msdn.microsoft.com/en-us/library/ms173149%28v=vs.100%29.aspx)
*   [虚拟方法](http://msdn.microsoft.com/en-us/library/aa645767%28v=vs.71%29.aspx)
*   [模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)

# java - 一封信的最简单的正则表达式

> ID：14008412
> 
> 赞同：1
> 
> 时间：2012-12-23T03:36:59.000
> 
> 标签：java, regex

只是想知道在正则表达式（在 java 中）中指定字母的最简单方法是什么，由正则表达式中的字符数来衡量。例如，`\w`不起作用，因为它包含数字和下划线。

这里有几个选项：

*   `\p{Alpha}`
*   `[a-zA-Z]`

有没有更短的？它经常出现，很高兴知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:38:43.790

这个怎么样：

```
\pL 
```

它匹配一个 Unicode 字母。

下面的表达式只匹配`[a-zA-Z]`并且它只有八个字符，但是反斜杠需要在 Java 字符串文字中进行转义，这会将字符数增加到 10。

```
[^\PL\W] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:40:03.183

这是我能想到的最短的：

```
(?i)[a-z] 
```

但是，这会`case-insensitive`为正则表达式的其余部分打开开关，因此如果正则表达式的其余部分需要区分*大小写*，则需要再次关闭开关：

```
(?i)[a-z](?-i) 
```

这使它*比*.`[a-zA-Z]`

因此，如果适合这种情况，这个答案*可能是最短的。*

# silverlight - 出现警报、提醒或电话通知时会触发哪些事件？

> ID：14008416
> 
> 赞同：1
> 
> 时间：2012-12-23T03:38:10.997
> 
> 标签：silverlight, windows-phone, reminders

我正在开发带有计时器的 WP Silverlight 游戏，因此每当发生某些事情时需要暂停游戏以将注意力从应用程序中移开。但是，PhoneApplicationService 事件不会在屏幕上出现警报或提醒时触发，也不会在电话到达时触发。

我尝试在用于游戏屏幕的页面上覆盖 OnGotFocus/OnLostFocus，但出现提醒/警报对话框时也不会调用它们。这让我们回到了我的问题——当警报、提醒或电话成为焦点时，哪些事件或覆盖会让我知道，以便我可以适当地暂停我的游戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:28:19.173

我相信这是[Obscured 事件](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationframe.obscured%28v=vs.105%29.aspx)- 请参阅[这个论坛帖子](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/a40da829-9ea8-449f-9dc4-739a5512a493)和[这个](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/0572dbcb-dacf-4cf4-a803-8d95d31d5171)帖子。

# python - 优化 Python 代码以提高效率

> ID：14008421
> 
> 赞同：3
> 
> 时间：2012-12-23T03:38:55.487
> 
> 标签：python, python-3.x

分析此代码显示大部分时间都花在了日志操作上。是否有另一种方法可以在 Python 3 中编写它以提高效率？用列表推导替换循环实际上效率较低，由于 lambdas，map 也是如此。

```
def log_total(data): 
    total = 0.0   
    log = log(data) 
    for i in range(10000): 
        total += log/(i+1)  
    return total 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T03:40:36.640

我会`log`从您的总和中扣除并缓存您的总和：

```
harmonic_series = sum(1\. / i for i in range(1, 10001))  # Thanks, @mgilson

def log_total(data): 
    return log(data) * harmonic_series 
```

你也可以使用[PyPy](http://pypy.org/)来加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:53:58.390

可以用`lambda`in在线写，像这样：

```
total = lambda data: log(data) * sum(1.0 / i for i in xrange(1, 10001)) 
```

我用过`Python 2.7.3`。

# django - 带有信号的 Django CreateView？

> ID：14008422
> 
> 赞同：1
> 
> 时间：2012-12-23T03:39:04.033
> 
> 标签：django, django-class-based-views, mixing

我有几个使用 CreateView 的模型：

```
class JsonResponseMixin(object):

    def is_valid(self, form):
        ...
        return HttpResponse(json.dumps(data))
    ...

class CarCreate(JsonResponseMixin, CreateView):
    model = Car
    form = CarForm
    success_url = '/success' 
```

我的问题是如何像`car_create.send()`在 Django CreateView 中一样发送信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T14:59:34.033

`CreateView`我通过`form_valid`发送该信号创建了一个自定义。

# api - 设置模拟 API 服务器以隔离前端-后端依赖项

> ID：14008429
> 
> 赞同：6
> 
> 时间：2012-12-23T03:40:04.887
> 
> 标签：api, mocking

我们的应用程序是一个基于 API 的应用程序，其中前端依赖于对后端的 REST API 调用。这有时会产生一个问题，即前端团队无法继续前进，除非后端 API 已经实现，因为它们总是以不同的速度前进。有没有办法设置服务器，以便前端可以独立工作而不管后端状态如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T16:27:23.840

我知道这是一篇旧文章，但我为此目的创建了一个工具，我认为我应该将它分享给任何偶然发现它的人。

它被称为 Interfake，您可以在[https://github.com/basicallydan/interfake](https://github.com/basicallydan/interfake)找到它。我经常将它用于尚未构建的 API 原型设计，事实上这是我的主要用途。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:58:00.573

我们使用的常见解决方案如下：

FE 和 BE 合约/API 已达成一致，后端 api 被模拟。BE REST API 使用我们配置的过滤器。对于所有准备好的api，过滤器重定向到正确的api，对于所有被模拟的api，过滤器重定向到模拟api。

由于 BE 团队正在构建和完成更多 api，因此对 FE 团队如此透明，他们只需更新过滤器看起来的映射，并且一旦 BE 团队准备好打开它，就会自动调用后端 api。

所以流程如下：

```
FE ->BE Rest API Server 
      |API Filter->(for apis updated in the map as complete)-->server/port with actual api  
      |------------->(for apis that are still being mocked) --> server/port with mock 
```

希望有帮助。

# php - 解析错误：语法错误，意外的 'login' (T_STRING)，期待 ',' 或 ';'

> ID：14008430
> 
> 赞同：-5
> 
> 时间：2012-12-23T03:40:05.950
> 
> 标签：php, xhtml

我正在为我的网站创建一个注册页面。当我尝试在 Firefox 中打开它时，它说：

```
Parse error: syntax error, unexpected 'login' (T_STRING), expecting ',' or ';' in C:\xampp\htdocs\register.php on line 30 
```

我不明白这是什么意思

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
include("/session.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Register | McWarfare</title>
    <link rel="stylesheet" href="/style/style.css" type="text/css" media="screen" />
</head>
<body>
    <div align="center" id="mainWrapper">
        <?php include_once("template_header.php");?>
            <div id="pageContent">
            <table bgcolor="#bbbbbb" width="100%" border="0" cellspacing="0" cellpadding="10">
            <td width="10%" valign="top" align="center">
            <?php
            if($session->logged_in){
            echo "<h1>Registered</h1>";
            echo "<p>We're sorry <b>$session->username</b>, but you're already registered. "

            }

            else if(isset($_SESSION['regsuccess'])){

            if($_SESSION['regsuccess']){
            echo "<p>Congratulations <b>".$_SESSION['reguname']."</b>, your account was successfully created! "
            }

            else{
            echo "<h1>Registration Failed</h1>";
            echo "<p>We're sorry <b>".$_SESSION['reguname']."</b>, "
            .", but your request could not be completed.<br>Please try again at a later time.</p>";
            }
            unset($_SESSION['regsuccess']);
            unset($_SESSION['reguname']);
            }

            else{
            ?>
        <h1>Register</h1>
        <?php
            if($form->num_errors > 0){
            echo "<td><font size=\"2\" color=\"#ff0000\">".$form->num_errors." error(s) found</font></td>";
            }
        ?>
        <form action="process.php" method="POST">
            <table align="left" border="0" cellspacing="0" cellpadding="3">
                <tr>
                    <td>
                    </td>
                    <td>
                        Username:
                    </td>
                    <td>
                        <input type="text" name="user" maxlength="16" value="<?php echo $form->value("user"); ?>">
                    </td>
                    <td>
                        <?php echo $form->error("user"); ?>
                    </td>
                </tr>
                <tr>
                    <td>
                    </td>
                    <td>
                        Password:
                    </td>
                    <td>
                        <input type="password" name="pass" maxlength="30" value="<?php echo $form->value("pass"); ?>">
                    </td>
                    <td>
                        <?php echo $form->error("pass"); ?>
                    </td>
                </tr>
                <tr>
                    <td>
                    </td>
                    <td>
                        Email:
                    </td>
                    <td>
                        <input type="text" name="email" maxlength="50" value="<?php echo $form->value("email"); ?>">
                    </td>
                    <td>
                        <?php echo $form->error("email"); ?>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="right">
                        <input type="hidden" name="subjoin" value="1">
                        <input type="submit" value="Register!">
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="left">Back to <a href="/login">login</a> page.
                    </td>
                </tr>
            </table>
        </form>

            <?php
        }
        ?>
        </td>
    </table>
    </div>
    <?php include_once("template_footer.php");?>
    </div>
</body>
</html> 
```

以下代码适用于@Phil 要求的 session.php。如果您需要任何其他文件，请询问。

```
<?php
include("/database.php");
include("/mailer.php");
include("/form.php");

class Session
{
   var $username;
   var $userid;
   var $userlevel;
   var $time;
   var $logged_in;
   var $userinfo = array();
   var $url;
   var $referrer;

   function Session(){
      $this->time = time();
      $this->startSession();
   }

   function startSession(){
      global $database;
      session_start();

      $this->logged_in = $this->checkLogin();

      if(!$this->logged_in){
         $this->username = $_SESSION['username'] = GUEST_NAME;
         $this->userlevel = GUEST_LEVEL;
         $database->addActiveGuest($_SERVER['REMOTE_ADDR'], $this->time);
      }

      else{
         $database->addActiveUser($this->username, $this->time);
      }

      $database->removeInactiveUsers();
      $database->removeInactiveGuests();

      if(isset($_SESSION['url'])){
         $this->referrer = $_SESSION['url'];
      }else{
         $this->referrer = "/";
      }

      $this->url = $_SESSION['url'] = $_SERVER['PHP_SELF'];
   }

   function checkLogin(){
      global $database;

      if(isset($_COOKIE['cookname']) && isset($_COOKIE['cookid'])){
         $this->username = $_SESSION['username'] = $_COOKIE['cookname'];
         $this->userid   = $_SESSION['userid']   = $_COOKIE['cookid'];
      }

      if(isset($_SESSION['username']) && isset($_SESSION['userid']) &&
         $_SESSION['username'] != GUEST_NAME){
         if($database->confirmUserID($_SESSION['username'], $_SESSION['userid']) != 0){
            unset($_SESSION['username']);
            unset($_SESSION['userid']);
            return false;
         }

         $this->userinfo  = $database->getUserInfo($_SESSION['username']);
         $this->username  = $this->userinfo['username'];
         $this->userid    = $this->userinfo['userid'];
         $this->userlevel = $this->userinfo['userlevel'];
         return true;
      }

      else{
         return false;
      }
   }

   function login($subuser, $subpass, $subremember){
      global $database, $form;

      $field = "user";
      if(!$subuser || strlen($subuser = trim($subuser)) == 0){
         $form->setError($field, "* Username not entered");
      }
      else{
         if(!preg_match("/^([0-9a-z])*$/i", $subuser)){
            $form->setError($field, "* Username not alphanumeric");
         }
      }

      $field = "pass";
      if(!$subpass){
         $form->setError($field, "* Password not entered");
      }

      if($form->num_errors > 0){
         return false;
      }

      $subuser = stripslashes($subuser);
      $result = $database->confirmUserPass($subuser, md5($subpass));

      if($result == 1){
         $field = "user";
         $form->setError($field, "* Username not found");
      }
      else if($result == 2){
         $field = "pass";
         $form->setError($field, "* Invalid password");
      }

      if($form->num_errors > 0){
         return false;
      }

      $this->userinfo  = $database->getUserInfo($subuser);
      $this->username  = $_SESSION['username'] = $this->userinfo['username'];
      $this->userid    = $_SESSION['userid']   = $this->generateRandID();
      $this->userlevel = $this->userinfo['userlevel'];

      $database->updateUserField($this->username, "userid", $this->userid);
      $database->addActiveUser($this->username, $this->time);
      $database->removeActiveGuest($_SERVER['REMOTE_ADDR']);

      if($subremember){
         setcookie("cookname", $this->username, time()+COOKIE_EXPIRE, COOKIE_PATH);
         setcookie("cookid",   $this->userid,   time()+COOKIE_EXPIRE, COOKIE_PATH);
      }

      return true;
   }

   function logout(){
      global $database;

      if(isset($_COOKIE['cookname']) && isset($_COOKIE['cookid'])){
         setcookie("cookname", "", time()-COOKIE_EXPIRE, COOKIE_PATH);
         setcookie("cookid",   "", time()-COOKIE_EXPIRE, COOKIE_PATH);
      }

      unset($_SESSION['username']);
      unset($_SESSION['userid']);

      $this->logged_in = false;

      $database->removeActiveUser($this->username);
      $database->addActiveGuest($_SERVER['REMOTE_ADDR'], $this->time);

      $this->username  = GUEST_NAME;
      $this->userlevel = GUEST_LEVEL;
   }

   function register($subuser, $subpass, $subemail){
      global $database, $form, $mailer;

      $field = "user";
      if(!$subuser || strlen($subuser = trim($subuser)) == 0){
         $form->setError($field, "* Username not entered");
      }
      else{
         $subuser = stripslashes($subuser);
         if(strlen($subuser) < 5){
            $form->setError($field, "* Username below 5 characters");
         }
         else if(strlen($subuser) > 30){
            $form->setError($field, "* Username above 30 characters");
         }
         else if(!preg_match("/^([0-9a-z])+$/i", $subuser)){
            $form->setError($field, "* Username not alphanumeric");
         }
         else if(strcasecmp($subuser, GUEST_NAME) == 0){
            $form->setError($field, "* Username reserved word");
         }
         else if($database->usernameTaken($subuser)){
            $form->setError($field, "* Username already in use");
         }
         else if($database->usernameBanned($subuser)){
            $form->setError($field, "* Username banned");
         }
      }

      $field = "pass";
      if(!$subpass){
         $form->setError($field, "* Password not entered");
      }
      else{
         $subpass = stripslashes($subpass);
         if(strlen($subpass) < 4){
            $form->setError($field, "* Password too short");
         }
         else if(!preg_match("/^([0-9a-z])+$/i", ($subpass = trim($subpass)))){
            $form->setError($field, "* Password not alphanumeric");
         }

      }

      $field = "email";
      if(!$subemail || strlen($subemail = trim($subemail)) == 0){
         $form->setError($field, "* Email not entered");
      }
      else{
         $regex = "/^[_+a-z0-9-]+(\.[_+a-z0-9-]+)*"
                 ."@[a-z0-9-]+(\.[a-z0-9-]{1,})*"
                 ."\.([a-z]{2,}){1}$/i";
         if(!preg_match($regex,$subemail)){
            $form->setError($field, "* Email invalid");
         }
         $subemail = stripslashes($subemail);
      }

      if($form->num_errors > 0){
         return 1;
      }
      else{
         if($database->addNewUser($subuser, md5($subpass), $subemail)){
            if(EMAIL_WELCOME){
               $mailer->sendWelcome($subuser,$subemail,$subpass);
            }
            return 0;
         }else{
            return 2;
         }
      }
   }

   function editAccount($subcurpass, $subnewpass, $subemail){
      global $database, $form;
      if($subnewpass){
         $field = "curpass";
         if(!$subcurpass){
            $form->setError($field, "* Current Password not entered");
         }
         else{
            $subcurpass = stripslashes($subcurpass);
            if(strlen($subcurpass) < 4 ||
               !preg_match("/^([0-9a-z])+$/i", ($subcurpass = trim($subcurpass)))){
               $form->setError($field, "* Current Password incorrect");
            }
            if($database->confirmUserPass($this->username,md5($subcurpass)) != 0){
               $form->setError($field, "* Current Password incorrect");
            }
         }

         $field = "newpass";
         $subpass = stripslashes($subnewpass);
         if(strlen($subnewpass) < 4){
            $form->setError($field, "* New Password too short");
         }
         else if(!preg_match("/^([0-9a-z])+$/i", ($subnewpass = trim($subnewpass)))){
            $form->setError($field, "* New Password not alphanumeric");
         }
      }
      else if($subcurpass){
         $field = "newpass";
         $form->setError($field, "* New Password not entered");
      }

      $field = "email";
      if($subemail && strlen($subemail = trim($subemail)) > 0){
         $regex = "/^[_+a-z0-9-]+(\.[_+a-z0-9-]+)*"
                 ."@[a-z0-9-]+(\.[a-z0-9-]{1,})*"
                 ."\.([a-z]{2,}){1}$/i";
         if(!preg_match($regex,$subemail)){
            $form->setError($field, "* Email invalid");
         }
         $subemail = stripslashes($subemail);
      }

      if($form->num_errors > 0){
         return false;
      }

      if($subcurpass && $subnewpass){
         $database->updateUserField($this->username,"password",md5($subnewpass));
      }

      if($subemail){
         $database->updateUserField($this->username,"email",$subemail);
      }

      return true;
   }

   function isAdmin(){
      return ($this->userlevel == ADMIN_LEVEL ||
              $this->username  == ADMIN_NAME);
   }

   function generateRandID(){
      return md5($this->generateRandStr(16));
   }

   function generateRandStr($length){
      $randstr = "";
      for($i=0; $i<$length; $i++){
         $randnum = mt_rand(0,61);
         if($randnum < 10){
            $randstr .= chr($randnum+48);
         }else if($randnum < 36){
            $randstr .= chr($randnum+55);
         }else{
            $randstr .= chr($randnum+61);
         }
      }
      return $randstr;
   }
};

$session = new Session;

$form = new Form;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:46:56.317

在这些行的末尾添加分号：

```
echo "<p>We're sorry <b>$session->username... 
```

和

```
echo "<p>Congratulations <b>".$_SESSION... 
```

# asp.net - 两台服务器之间的共享身份验证

> ID：14008431
> 
> 赞同：2
> 
> 时间：2012-12-23T03:40:06.360
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, forms-authentication, server-farm

我在负载均衡器后面的两台服务器上设置了同一个站点。我的 web.config 文件中有以下内容

```
<sessionState mode="SQLServer" cookieless="false" allowCustomSqlDatabase="true" 
sqlConnectionString="Data Source=server;Initial Catalog=ASPState;Persist Security 
Info=True;User ID=user;Password=password" timeout="2880" sqlCommandTimeout="10" /> 
```

它似乎正在工作，我可以看到登录时填充的 ASPState 表，但是我看到如果我在登录后刷新几次，它会在登录和未登录之间来回切换，具体取决于我点击的服务器。我错过了什么吗？

我正在使用 MVC 4 中内置的默认 webmatrix 身份验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:43:04.067

这可能是因为您的服务器上有不同的**MachineKey**或具有默认值。因此，您的身份验证 cookie 以两种不同的方式加密。

尝试在 web.config 中设置 machineKey。这是帮助生成 machineKey [http://aspnetresources.com/tools/machineKey的工具](http://aspnetresources.com/tools/machineKey)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T13:05:49.523

正如[这篇文章](https://stackoverflow.com/questions/10555000/losing-session-state-with-asp-net-sql-server)所解释的，您需要在两台服务器上拥有相同的应用程序 ID。

*“当您创建希望使用 Sql Server 共享会话状态的应用程序时，它们需要在 IIS 中配置相同的 ID。这是因为生成的会话 ID 是根据应用程序 ID 生成的。（内部应用程序 ID 类似于LM/W3SVC/1 两台服务器在 IIS 中的每个应用程序都有不同的 ID。解决方法是在每台服务器的“管理网站 -> 高级设置”下更改 ID。”*

干杯

# iphone - Amazon CloudFront 签名 URL“拒绝访问”

> ID：14008436
> 
> 赞同：19
> 
> 时间：2012-12-23T03:40:58.073
> 
> 标签：iphone, ios, amazon-web-services, amazon-s3, amazon-cloudfront

我有一个 iOS 应用程序，我在其中将对象上传到 Amazon S3 存储桶并希望从 CloudFront 分配中检索。

我将 CloudFront 与我的 Amazon S3 存储桶的私有分配一起使用，当我生成签名 URL 时它不起作用，在 Safari 中它返回 AccessDenied AccessDenied 和一些随机字母数字字符串，[我刚刚生成的我的签名 URL（24 小时内到期）](http://d3c2hwoja895bf.cloudfront.net/shray-UploadedQuote-gcg157807710786912?Expires=1356320060&Signature=cP8Jhv4j2v1jhbwMC17KSmI3uYpRJPY-CajECQ36DKzi~xCPAAqxktFOm1FQVHoSogbM5cfZbOeupZH9OYXj8gdZzzXzut8tOoTmXKB~aN4qeNixJFN-EV~BaogWMPAexB31IlK~0r78zh6r~6yDHGI8cLxVAfWY0UtH5ZBWU7I_&Key-Pair-Id=APKAJFXGRSBXF2C7HJNA) - - 现在应该过期了

我阅读了[以下站点](https://portal.aws.amazon.com/gp/aws/securityCredentials)以获取我所有的安全凭证，我还通过阅读[文档](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/private-content-task-list.html)使用我的 S3 存储桶设置了一个私有分发，并且我已经设置了[受信任的签名者](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/private-content-trusted-signers.html)，这基本上只是我的帐户

我已使用[此站点](https://forums.aws.amazon.com/thread.jspa?messageID=336955)的代码生成签名 URL

但是我再次完全没有运气，当我将链接放入 Safari 时，它返回 AccessDeniedAccessDenied 和一些随机的字母数字字符串。为什么？任何问题？我没有遵循任何步骤吗？

谢谢你的帮助！我很感激，这对我来说很重要，因为我需要创建一个 CloudFront 对于速度和国际分发非常重要的应用程序......

* * *

感谢大家的支持，我发现了我的问题。我没有按照创建访问源身份的步骤进行操作。现在它就像一个魅力。呜呼！

# c# - 在 C# 中将大数转换为两个字节

> ID：14008437
> 
> 赞同：3
> 
> 时间：2012-12-23T03:41:13.393
> 
> 标签：c#, textbox, serial-port, byte, robot

我正在尝试将文本框中的数字转换为 2 个字节，然后可以通过串行发送。数字范围从 500 到 -500。我已经有一个设置，所以我可以简单地发送一个字符串，然后将其转换为一个字节。这是一个例子：

发送序列号（“137”、“1”、“244”、“128”、“0”）

文本框编号将位于第 2 和第 3 个字节中

这将使我的 Roomba（所有这些代码用于的机器人）以 500 毫米/秒的速度向前行驶。发送的第 1 个数字告诉 Roomba 开车，第 2 和第 3 个数字是速度，第 4 和第 5 个数字是转弯的半径（在 2000 和 -2000 之间，还有一个特殊情况，即 32768 是直的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:47:24.927

```
var value = "321";
var shortNumber = Convert.ToInt16(value);
var bytes = BitConverter.GetBytes(shortNumber); 
```

或者，如果您需要 Big-Endian 排序：

```
var bigEndianBytes = new[]
{
    (byte) (shortNumber >> 8), 
    (byte) (shortNumber & byte.MaxValue)
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:56:59.563

假设您正在使用`System.IO.Ports.SerialPort`，您将编写 using`SerialPort.Write(byte[], int, int)`来发送数据。

如果您的输入是这样的：`99,255`，您将执行此操作以提取两个字节：

```
// Split the string into two parts
string[] strings = textBox1.text.Split(',');
byte byte1, byte2;
// Make sure it has only two parts,
// and parse the string into a byte, safely
if (strings.Length == 2
    && byte.TryParse(strings[0], System.Globalization.NumberStyles.Integer, System.Globalization.CultureInfo.InvariantCulture, out byte1)
    && byte.TryParse(strings[1], System.Globalization.NumberStyles.Integer, System.Globalization.CultureInfo.InvariantCulture, out byte2))
{
    // Form the bytes to send
    byte[] bytes_to_send = new byte[] { 137, byte1, byte2, 128, 0 };
    // Writes the data to the serial port.
    serialPort1.Write(bytes_to_send, 0, bytes_to_send.Length);
}
else
{
    // Show some kind of error message?
} 
```

在这里，我假设您的“字节”是从 0 到 255，这与 C# 的`byte`类型相同。我曾经[`byte.TryParse`](http://msdn.microsoft.com/en-us/library/tkktxbeh.aspx)将 解析`string`为`byte`.

# apache - .htaccess 管理文件夹的不同规则

> ID：14008438
> 
> 赞同：0
> 
> 时间：2012-12-23T03:41:48.063
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, rewrite

我已经坚持了好几天了。我想我在某个地方做错了，但我无法让它为我的生活工作。

我正在使用codeigniter，我试图让我的正常页面被重写，如：

`website.com/folder/page.html using RewriteRule ^(.*)$ index.php/$1 [L]`

哪个有效，但我试图让它不重写`website.com/folder/admin/ folder`.

但是当我使用我的追随者时，我让它工作但随后它应用它所以

```
website.com/folder/page 
```

和

```
website.com/folder/page.html 
```

我不想要我只想要`.html`。

```
<IfModule mod_rewrite.c>

RewriteEngine On
Options +FollowSymlinks
RewriteBase /folder/

# Don't rewrite admin urls
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^admin/
RewriteRule ^(.*)$ index.php/$1 [L,NC]

#Adds .html to urls without it
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^admin/
RewriteCond %{REQUEST_URI} !\.html
RewriteRule ^(.+)$ $1\.html [L]

#RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:01:25.047

您要匹配的`%{REQUEST_URI}`变量不遵守基数 ( `/folder/`)，因此您必须在您的条件下匹配它。所以而不是：

```
RewriteCond %{REQUEST_URI} !^admin/ 
```

你需要类似的东西（注意前导斜杠）：

```
RewriteCond %{REQUEST_URI} !^/folder/admin/ 
```

或者只是放弃`^`：

```
RewriteCond %{REQUEST_URI} !/admin/ 
```

# jquery - 如何将可拖动对象放入gridster

> ID：14008439
> 
> 赞同：6
> 
> 时间：2012-12-23T03:41:56.357
> 
> 标签：jquery, drag-and-drop, draggable, gridster

有谁知道是否可以将可拖动元素放入 gridster 中？ [http://gridster.net/#documentation](http://gridster.net/#documentation)

这对我的目的来说似乎很棒，但是您可以通过删除它来将它们添加到网格中吗？

我想将图像拖到网格中。有可能吗？我可以看看这个样本吗？

如果这是不可能的，你知道任何替代方案吗？

我需要将图像拖到 div 内的离散位置，并能够保存位置以及在画布内移动图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:32:40.973

你绝对可以做到这一点。它只是声明可拖动和可放置元素的问题。这个[jsfiddle](http://jsfiddle.net/PdjLE/710/)会给你一个想法。

```
 $(".gridster ul").gridster({
    widget_margins: [5, 5],
    widget_base_dimensions: [50, 50]
});

var gridster = $(".gridster ul").gridster().data('gridster');
$("#draggable").draggable();
$(".gridster ").droppable({
    drop: function (event, ui) {
        $("#draggable").removeAttr("style");
        gridster.add_widget(
       '<li class="new">
           <img src="http://www.sparity.com/images/facebookIcon.jpg" alt="facebook"> 
        </li>', 1, 1);

    }
}); 
```

# python - 如何从 Python 中的文件名中提取数字？

> ID：14008440
> 
> 赞同：12
> 
> 时间：2012-12-23T03:42:14.063
> 
> 标签：python

我只需要从文件名中提取数字，例如：

GapPoints1.shp

GapPoints23.shp

GapPoints109.shp

如何使用 Python 从这些文件中提取数字？我需要将其合并到一个`for`循环中。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-23T03:45:56.103

您可以使用正则表达式：

```
regex = re.compile(r'\d+') 
```

然后获取匹配的字符串：

```
regex.findall(filename) 
```

这将返回一个包含数字的字符串列表。如果你真的想要整数，你可以使用`int`：

```
[int(x) for x in regex.findall(filename)] 
```

如果每个文件名中只有 1 个数字，您可以使用`regex.search(filename).group(0)`（如果您确定它会产生匹配）。如果未找到匹配项，则上述行将产生一个 AttributeError 表示`NoneType`has not attribute `group`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T03:45:38.030

所以，你没有留下任何关于这些文件在哪里以及如何获取它们的描述，但我假设你会使用[`os`](http://docs.python.org/2/library/os.html)模块获取文件名。

至于从名称中获取数字，最好使用正则表达式 with [`re`](http://docs.python.org/2/library/re.html)，如下所示：

```
import re
def get_numbers_from_filename(filename):
    return re.search(r'\d+', filename).group(0) 
```

然后，要将其包含在 for 循环中，您将对每个文件名运行该函数：

```
for filename in os.listdir(myfiledirectory):
   print get_numbers_from_filename(filename) 
```

或类似的规定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T12:53:10.803

如果只有一个数字：

```
filter(lambda x: x.isdigit(), filename) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-30T18:12:27.113

听到的是我的代码，我用来在文件从谷歌学者下载文件后将论文的发表年份带到文件名的第一个。主要文件通常是这样构造的：Author+publishedYear.pdf 因此，通过实现此代码，文件名将变为：PublishedYear+Author.pdf。

```
# Renaming Pdf according to number extraction
# You want to rename a pdf file, so the digits of document published year comes first.
# Use regular expersion
# As long as you implement this file, the other pattern will be accomplished to your filename.

# import libraries
import re
import os

# Change working directory to this folder
address = os.getcwd ()
os.chdir(address)

# defining a class with two function
class file_name:
    # Define a function to extract any digits
    def __init__ (self, filename):
        self.filename = filename

    # Because we have tow pattern, we must define tow function.
    # First function for pattern as : schrodinger1990.pdf
    def number_extrction_pattern_non_digits_first (filename):

        pattern = (r'(\D+)(\d+)(\.pdf)')
        digits_pattern_non_digits_first = re.search(pattern, filename, re.IGNORECASE).group (2) 
        non_digits_pattern_non_digits_first = re.search(pattern, filename, re.IGNORECASE).group (1)
        return digits_pattern_non_digits_first, non_digits_pattern_non_digits_first

    # Second function for pattern as : 1993schrodinger.pdf
    def number_extrction_pattern_digits_first (filename):

        pattern = (r'(\d+)(\D+)(\.pdf)')
        digits_pattern_digits_first = re.search(pattern, filename, re.IGNORECASE).group (1) 
        non_digits_pattern_digits_first = re.search(pattern, filename, re.IGNORECASE).group (2)

        return digits_pattern_digits_first, non_digits_pattern_digits_first

if __name__ == '__main__':

    # Define a pattern to check filename pattern
    pattern_check1 = (r'(\D+)(\d+)(\.pdf)')

    # Declare each file address.
    for filename in os.listdir(address):

        if filename.endswith('.pdf'):
            if re.search(pattern_check1, filename, re.IGNORECASE):

                digits = file_name.number_extrction_pattern_non_digits_first (filename)[0]
                non_digits = file_name.number_extrction_pattern_non_digits_first (filename)[1]
                os.rename(filename, digits + non_digits + '.pdf')

            # Else other pattern exists.    
            else :

                digits = file_name.number_extrction_pattern_digits_first (filename)[0]
                non_digits = file_name.number_extrction_pattern_digits_first (filename)[1]
                os.rename(filename, digits + non_digits + '.pdf') 
```

# c# - 如何首先使用实体 框架代码指定字段的最大列长度

> ID：14008443
> 
> 赞同：36
> 
> 时间：2012-12-23T03:44:04.193
> 
> 标签：c#, .net, entity-framework, entity-framework-5, system.componentmodel

创建表时我可以使用一个属性吗？我试过`[StringLength]`了，但似乎被忽略了。

```
 public class EntityRegister
 {
     public int Id { get; set; }
     [StringLength(450)]
     public string Name { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-23T03:46:51.230

或者，您可以手动执行此操作`Fluent API`

采用`HasMaxLength(450)`

*   使用 Fluent API 配置属性和类型
    *   [英孚 6](http://msdn.microsoft.com/en-us/data/jj591617#1.4)
    *   [EF 核心](https://docs.microsoft.com/en-us/ef/core/modeling/max-length#fluent-api)

或者如果你想`Data Annotation`，使用`MaxLength`和`MinLength`属性

```
public class EntityRegister
{
    public int Id { get; set; }
    [MaxLength(450)]
    public string Name { get; set; }
} 
```

*   [代码优先数据注释](http://msdn.microsoft.com/en-us/data/jj591583)

# c - 链表问题

> ID：14008446
> 
> 赞同：1
> 
> 时间：2012-12-23T03:44:39.357
> 
> 标签：c, pointers, linked-list

我在使用链接列表时遇到了一些麻烦。我不明白为什么这段代码会毫无问题地遍历和打印链表：

```
struct foo {
    int data;
    struct foo * next;
};

int main(void) {
    struct foo * bar = NULL;
    ...
    print(bar);
}

void print(struct foo * bar) {
    while (bar != NULL) {
        printf("%d, bar->data);
        bar = bar->next;
    }
} 
```

然而，当我将列表放入另一个结构（如数组）中时，列表在遍历过程中被破坏，因为指针在以下位置重新分配`bar[i] = bar[i]->next`：

```
struct foo {
    int data;
    struct foo * next;
};

int main(void) {
    struct foo ** bar = (struct foo**)malloc(SIZE * sizeof(struct foo*));
    for (i = 0; i < SIZE; i++)
        bar[i] = NULL;
    ...
    print(bar);
}

void print(struct foo ** bar) {
    for (i = 0; i < SIZE; i++)
        while (bar[i] != NULL) {
            printf("%d, bar->data);
            bar[i] = bar[i]->next;
        }
} 
```

为什么会这样？我知道在这种情况下编写`print`函数的正确方法是：

```
void print(struct foo ** bar) {
    struct foo * helper;
    for (i = 0; i < SIZE; i++)
        for (helper = foo[i]; helper != NULL; helper = helper->next)
            printf("%d", helper[i]->data);
} 
```

我只是想明白*为什么*。为什么指针在第一种情况下没有被重新分配，而在第二种情况下呢？我认为这与传递值与传递引用有关，但这意味着第一个函数也会破坏列表。谁能提供一些见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:51:12.833

```
void print(struct foo* bar)
{
    while (bar != NULL)
    {
        printf("%d, bar->data);
        bar = bar->next;
    }
} 
```

此函数将 a`copy of a pointer to struct foo`作为第一个参数。不管函数用它做什么，我确信原始指针不会被修改，因为我只是在这里处理一个副本。另一方面，指针指向的值可能会被修改。

```
void print(struct foo** bar)
{
    for (i = 0; i < SIZE; i++)
        while (bar[i] != NULL)
        {
            printf("%d, bar->data);
                bar[i] = bar[i]->next;
        }
} 
```

此函数将 a`copy of a pointer to pointer to struct foo`作为第一个参数。再一次，原来指向指针的指针不能从这里修改，另一方面它指向的值，也就是`pointer to foo`这里，可以修改。当然，bar指向的指针指向的值，也可以修改。

如果您正确理解了这一点，您应该意识到为什么传递`struct something`而不是`struct something*`函数在性能方面是一个坏主意。

# php - http请求AJAX

> ID：14008449
> 
> 赞同：2
> 
> 时间：2012-12-23T03:45:20.713
> 
> 标签：php, javascript, ajax, jquery

嗨，我的代码有点问题我正在尝试测试这行代码（**ajaxmaprequest.js**）是否正在工作，使其从**xmlspitquery.php**检索字符串并在 testajax.php 中回显它。希望对我做错的事情有任何帮助。

**ajaxmaprequest.js**

```
$ ('#lgu','#category','#type').change(function(){
    var Lgu = $('#lgu').val();
    var Category = $('#category').val();
    var Type = $('#type').val();

    $.get('xmlspitquery.php',
         { input: Lgu, input2: Category, input3: Type}, 
         function(data) {
            $('#xmlreturn').text(data);
    });
}); 
```

这是来自 testajax.php

```
<select id="lgu" name="Lgu">
    <option>LGUs</option>
    <option>Bacolod City</option>
    <option>Bago City</option>
    <option>Cadiz City</option>
</select>

<select id="category" name="Category">
    <option>Categories</option>
    <option>Hotel</option>
    <option>Restaurant</option>
    <option>Attractions</option>
</select>

<select id="type" name="Type">
    <option>Tourism Type</option>
    <option>Eco</option>
    <option>Resto</option>
    <option>Fun</option>
</select>

<div id="xmlreturn"> </div> 
```

**xmlspitquery.php**

只有`echo "Test";`在完成连接后，我才会添加更多代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T04:09:04.630

改变这个：

```
$('#lgu','#category','#type') 
```

对此：

```
$('#lgu,#category,#type') 
```

# objective-c - NSArray 的“for x in”语法

> ID：14008451
> 
> 赞同：0
> 
> 时间：2012-12-23T03:45:29.030
> 
> 标签：objective-c, refactoring, nsarray

我有这样的指示：

```
[self someMethod:CGPointMake(50, 50)];
[self someMethod:CGPointMake(270, 50)];
[self someMethod:CGPointMake(50, 360)];
[self someMethod:CGPointMake(270, 360)];
... 
```

我想像这样使用 NSArray 重构代码：

```
NSArray items = [NSArray initWithObjects:
                  CGPointMake(50, 50),
                  CGPointMake(270, 50),
                  CGPointMake(50, 360),
                  CGPointMake(270, 360),
                  ...
                  nil]; 
```

我不知道正确的语法，有人可以帮助我吗？我试过了，但 XCode 告诉我“选择器元素类型 CGPoint 不是有效对象”：

```
CGPoint point = [CGPoint alloc];

for (point in items) {
    [self someMethod:point];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T03:52:12.803

`for-in`循环是用于迭代集合类（符合 NSEnumeration）的 Objective-C 概念。如果您想迭代 C 结构（如 CGPoints），请使用带有 C 数组的标准 for 循环，或将 CGPoints 包装在 NSValues 中。

下面是你的重构在现代 Objective-C 语法中的样子：

```
NSArray *items = @[
                  [NSValue valueWithPoint:CGPointMake(50, 50)], //wrap the points in an
                  [NSValue valueWithPoint:CGPointMake(270, 50)], //NSValue so they become
                  [NSValue valueWithPoint:CGPointMake(50, 360)], //first class citizens
                  [NSValue valueWithPoint:CGPointMake(270, 360)],//(Y no boxing?*)
                 ]; //End of collection literal
for (NSValue *value in items) { //iterate through the NSValues with our points
    [self someMethod:[value pointValue]]; //'un-wrap' the points by calling -pointValue
} 
```

[*我的个人结构拳击宏：]

```
#define STRUCT_BOX(x) [NSValue valueWithBytes:&x objCType:@encode(typeof(x))]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:01:05.570

没有必要求助于 NSArray。正如 CodaFi 所说，“如果您想迭代 C 结构（如 CGPoints），请使用带有 C 数组的标准 for 循环。” 那么，为什么不这样做呢？

```
static CGPoint items[] = {
    {50, 50},
    {270, 50},
    {50, 360},
    {270, 360},
};

#define ARRAY_SIZE(array) (sizeof(array) / sizeof(array[0])) 
```

这会在编译时而不是运行时创建数组！然后迭代数组：

```
for (NSUInteger i = 0; i < ARRAY_SIZE(items); ++i)
    [self someMethod:items[i]]; 
```

有关涉及字典数组的另一个示例，请参阅[Objective-C Is Still C (Not Java!)](https://qualitycoding.org/objective-c-is-c/)

# c# - Enumerable.OfType<>() 在路由集合中没有按预期工作

> ID：14008453
> 
> 赞同：5
> 
> 时间：2012-12-23T03:45:38.707
> 
> 标签：c#, linq, linq-to-objects

我发誓这没有意义。

鉴于我`HttpRouteCollection`从 Web API 获得了这个，我正在根据一些自定义路由类型进行过滤，特别是`IAttributeRoute`. 我使用`httpRoutes.OfType<IAttributeRoute>()`但循环的行为就像没有元素一样。

需要明确的是，当这个循环被命中时，整个集合都是`HttpAttributeRoute`直接实现的类型`IAttributeRoute`。此外，我在常规*的*`RouteCollection`.

**这不起作用：**

```
foreach (IAttributeRoute route in GlobalConfiguration.Configuration.Routes.OfType<IAttributeRoute>()) {
    if (!string.IsNullOrWhiteSpace(route.RouteName) && !json.ContainsKey(route.RouteName)) {
        json.Add(route.RouteName, "/" + route.Url);
    }
} 
```

**然而，这很好用：**

```
foreach (var route in GlobalConfiguration.Configuration.Routes)
{
    if (route is IAttributeRoute) // uhhhh?
    {
        var r = route as IAttributeRoute;
        if (!string.IsNullOrWhiteSpace(r.RouteName) && !json.ContainsKey(r.RouteName))
        {
            json.Add(r.RouteName, "/" + r.Url);
        }
    }
} 
```

我发誓我没有撒谎，它只适用于后面的代码。就像我说的，在正常的路由集合上这样做是可以的。正常的路由集合有其他类型，不仅仅是`IAttributeRoute`，但 HttpRouteCollection在其当前状态下*只有, （将来它可能有不同类型的路由）。*`IAttributeRoute`这可能是一个因素吗？

我是否遗漏了什么或没有`OfType`做我在内部做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T20:41:53.823

我猜这是 HostedHttpRouteCollection 处理对其内部集合的引用的方式的问题。GetEnumerator 仅返回 HttpWebRoute 类型的路由：

```
public override IEnumerator<IHttpRoute> GetEnumerator()
{
    return (
        from httpWebRoute in this._routeCollection.OfType<HttpWebRoute>()
        select httpWebRoute.HttpRoute).GetEnumerator();
} 
```

因此，虽然它使用来自 RouteTable.Routes 的所有路由进行初始化，但它不会将它们全部返回为 IEnumerable。

既然如此，我想知道当您在第二个示例中说“它有效”时，这是否意味着它实际上迭代了您期望的所有项目？查看实现并运行与您发布的等效内容，我认为它不会。

# php - 由于在 php 中使用 Simple_html_dom，我的网站变慢了

> ID：14008455
> 
> 赞同：2
> 
> 时间：2012-12-23T03:46:38.360
> 
> 标签：php, screen-scraping, simple-html-dom

我将 simple_html_dom 用于我的社交书签网站，例如 reddit，其中每页显示 15 个链接。每次我加载页面，都需要很长时间。例如，我使用类似下面的代码从新闻网站中提取数据。

```
$html = file_get_html('http://www.nytimes.com');
$img= $html->find('img',6);
echo'<img src="'.$img->src.'"style="height:100px;width:100px;float:left;margin-right:5px"/>';
$title = array_shift($html->find('title'))->innertext;
echo '<p style="font-size:13px"><strong>'.$title.'</strong></p>';
foreach($html->find('div') as $element)
 if($element->class=='article_txt'){
   echo $element->find('p',0);
   } 
```

是不是因为我使用了这段代码，导致我的网站提取数据和显示的时间太长了？如果是，那么如何减少数据提取和显示的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T03:58:39.287

每个新请求都会导致 file_get_html 函数获取远程数据，显然，您必须等待它完成。[您应该使用 memcached http://php.net/manual/en/book.memcache.php 之](http://php.net/manual/en/book.memcache.php)类的东西缓存这些结果。设置 memcached 和 Memcache 后，您可以执行以下操作：

```
// You'd have to set it up before usage
$cache = new Memcache();
$key = md5('the-url-goes-here');

if (!($html = $cache->get($key)))
{
    $html = file_get_html('http://www.nytimes.com');
    $cache->set($key, $html);
}

// other code that uses $html 
```

# ruby - 将父类初始化变量传递给子类的实例

> ID：14008462
> 
> 赞同：3
> 
> 时间：2012-12-23T03:48:58.330
> 
> 标签：ruby, class, inheritance, parent-child

（在 Ruby 中工作）首先，我提前道歉。我不是受过培训的程序员，我只是凭借方便和不断变化的世界来到这里。我需要做的是编程，我厌倦了等待别人为我编程。因此，我在此过程中错过了一些基本概念，当我问这些问题时，我有时会因此出丑。

假设我想在类中定义物种/工作关系。我想定义一个超类“BlackAnt”并有子类“Worker”“Fighter”和“Queen”

对我来说，直观地说，这看起来像这样：

```
class BlackAnt
  @legs = 6
end

class Worker < BlackAnt
  @jaws = 'small'
end 
```

但如果我再试试

```
ant1 = Worker.new
puts ant1.legs 
```

我得到一个错误。如果我将 BlackAnt 类修改为：

```
class BlackAnt
  attr_accessor :legs
  @legs = 6
end 
```

ant1.legs 返回“零”

我已经尝试过这里列出的方法：[http ://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)

这允许 Worker.legs 返回“6”，但是......唉：

```
ant1 = Worker.new
Worker.legs => '6'
ant1.legs => 'nil' 
```

猜测一下，这些父变量的值不会在每次产生新子代时被初始化。

不知何故，我觉得我对此很愚蠢，而答案无疑会让我诅咒我发现咖啡因驱动的通宵达旦的那一天。我需要做的是安排事情，以便我可以像这样创建对象：

```
ant1 = Worker.new
ant2 = Queen.new
ant3 = Fighter.new 
```

并让他们每个人获得适当数量的腿，以及在子班中分配的任何特殊特征。worker/queen/fighter 分类将由命名空间绑定，因此实际调用将是：

```
ant1 = AntBlack::Worker.new
ant2 = AntRed::Worker.new
ant3 = AntRed::Queen.new 
```

等等

然后我希望能够使用以下方法检查单个蚂蚁的腿数量：

```
ant1.legs #=> 6 
```

我可能会绕过我的肘部来接近我的拇指。如果是这样，请随时为实现相同结果的方法提供替代建议，我将非常感谢您的见解。

///更新回复：响应///

```
class AntRed
  attr_accessor :legs
  def initialize
    @legs = 6
  end
end

class Worker < AntRed
  @strength = 1
end 
```

结果：

```
irb(main):009:0> ant1 = Worker.new
#=> #<Worker:0x87616ac @strength=1>
irb(main):010:0> ant1.legs
#=> nil 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T04:26:10.770

如下定义您的 BlackAnt 类：

```
class BlackAnt
  attr_accessor :legs

  def initialize
    @legs = 6
  end
end 
```

你的 Worker 类如下：

```
class Worker < BlackAnt
  attr_accessor :strength

  def initialize
    super

    @strength = 1
  end
end 
```

您当前定义 BlackAnt 类的方式是将腿存储为[类级实例变量](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:56:47.347

> 猜测一下，这些父变量的值不会在每次产生新子代时被初始化。

在 Ruby 中，实例变量属于单个对象。看第 7 点）在我的回答开始

> 解决您的“如果它们是变量”的问题

在[为什么 Ruby 中的符号不​​被认为是一种变量？](https://stackoverflow.com/questions/13850971/why-are-symbols-in-ruby-not-thought-of-as-a-type-of-variable/13861177#13861177)

我不明白你为什么得到`irb(main):010:0> ant1.legs #=> nil`. 对我来说它有效（至少作为脚本）。

```
class AntRed
  attr_accessor :legs
  def initialize
    @legs = 6
  end
end

class Worker < AntRed
end

ant1 = Worker.new
print 'ant1.legs : '; puts ant1.legs 
```

执行 ：

```
$ ruby -w test.rb 
ant1.legs : 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T07:41:34.477

你的意思是你想要一个已经初始化的类的实例变量！

所以你可以这样做：

```
class BlackAnt
  attr_accessor :legs
  @legs = 6

  def initialize
    @legs = self.class.instance_variable_get(:@legs)
  end
end

newObj = BlackAnt.new
newObj.legs 
```

# php - 如何使用 strstr 在代码中查找 $_POST

> ID：14008464
> 
> 赞同：0
> 
> 时间：2012-12-23T03:49:59.110
> 
> 标签：php, html, search

我正在尝试`$_POST`使用`strstr`. 基本上用户提交一个代码，我的程序`$_POST`在他们的代码中搜索，当然`strstr`只找到第一次出现但仍然存在。有一个简单的 HTML 表单将代码传送到我的 PHP 脚本中。这就是我的做法：

```
$user_submit=$_POST['submit'];//code posted
$post="$_POST";//used for post search
/*search code for $_POST*/

if(strstr($user_submit,$post)){
echo "found " . $post . ".";}
else{
echo "No " . $post . " found.";} 
```

我收到`No Array found.0`错误。也许我用`strstr`错了，我是筛选字符串的新手，感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T03:54:20.043

这是因为变量替换。在 PHP 中，包括任何看起来像变量标识符的东西，例如 $variable 或 $_POST，在字符串文字中都会将其值替换到字符串中。

所以发生的事情是该字符串中的 $_POST 被 PHP 替换，将 $_POST 变量转换为其字符串表示形式，这不是 $_POST ，因此不匹配任何内容。

您可以使用单引号来避免这种情况，或者我相信转义 $ 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:53:03.040

尝试这个：

```
if(isset($_POST['submit'])){
    // Form sended!
} 
```

# java - 如何使用 System.out.printf

> ID：14008466
> 
> 赞同：9
> 
> 时间：2012-12-23T03:50:39.040
> 
> 标签：java

我尝试使用`printf`，但出现意外错误。

这段代码有什么问题：

```
System.out.printf("The date is %d/%d/%d", month,day,year); 
```

我想打印日期和`month`,`day`和`year`是双变量。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-23T03:53:31.280

根据[Formatter docs](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)，`%d`是整数值的转换，它不适用于双精度数。您需要将它们转换为整数。无论如何，为什么要将月、日和年表示为浮点数？最好使用 a[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)并为日期值使用[适当的格式化程序。](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#dt)

如果您*必须*对这些值使用双精度，您将需要`%f`而不是`%d`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T19:17:29.140

像 C 的 sprintf 一样，可以使用静态方法格式化字符串`String.format`：

```
 // Format a string containing a date.
   import java.util.Calendar;
   import java.util.GregorianCalendar;
   import static java.util.Calendar.*;

   Calendar c = new GregorianCalendar(1995, MAY, 23);
   String s = String.format("Duke's Birthday: %1$tm %1$te,%1$tY", c);
   // -> s == "Duke's Birthday: May 23, 1995" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-23T04:27:35.943

更正的代码

```
 System.out.printf("The date is %f/%f/%f", month,day,year); 
```

# jquery - 当鼠标移动图像时，jQuery mouseup 不会被触发

> ID：14008468
> 
> 赞同：5
> 
> 时间：2012-12-23T03:51:02.647
> 
> 标签：jquery, mouseup

当您在图像上时，稍微`mousedown`移动鼠标 ( ) 然后释放 ( )，不会被 jQuery 触发。`mousemove``mouseup``mouseup`

jsfiddle：http: [//jsfiddle.net/kVFTZ/](http://jsfiddle.net/kVFTZ/)

为什么是这样？在图像上移动时如何使其工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T03:56:43.977

很容易修复。添加`event.preventDefault();`到您的 mousedown 功能。

**[jsFiddle 示例](http://jsfiddle.net/j08691/kVFTZ/3/)**

```
$(document).on('mousedown', function(event) {
    event.preventDefault();
    $('#info').text('Now move the mouse and then release');
    $('#log').text('mouse down fired');
}).on('mouseup', function() {
    $('#log').text('mouse up fired');
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:38:00.957

# android - 适用于 API < 11 的 Android invalidateOptionsMenu()

> ID：14008470
> 
> 赞同：76
> 
> 时间：2012-12-23T03:51:33.863
> 
> 标签：android, menu

我使用`ActivityCompat.invalidateOptionsMenu(MainActivity.this);`这样我的菜单项“刷新”可以自动启用/禁用，而无需使用必须触摸“菜单”选项（想象用户让菜单保持打开状态......我需要“刷新”菜单项自动禁用和启用自身）。

在`ActivityCompat.invalidateOptionsMenu(MainActivity.this)`Android 11+ 中运行良好。但是我可以为 android API < 11 使用什么？:S 我已经搜索了很多，但我找不到答案。谁能帮我解决这个问题？

这在 Android API 11+ 中运行良好，使用`onPrepareOptionsMenu`and `ActivityCompat.invalidateOptionsMenu(MainActivity.this)`。问题是试图在 Android API < 11 中完成它。

这是我的`onPrepareOptionsMenu`方法：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if(menuRefreshEnable){
        menu.getItem(0).setEnabled(true);
    }
    if(!menuRefreshEnable){
        menu.getItem(0).setEnabled(false);
    }       
    return true;
} 
```

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-08-31T10:27:37.580

关于`API < 11`使用`supportInvalidateOptionsMenu()`方法

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-19T09:54:31.763

`ActivityCompat.invalidateOptionsMenu()`不回调`onPrepareOptionsMenu();`它只是直接更新菜单。放一些`Log.d()`然后自己检查。

这对我有用（我正在使用 API 8）：

```
private Menu mMenu;
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.track_fragment, menu);
    mMenu = menu;
    }
...
private void someMethod() {
...
    if (mMenu != null) {
       MenuItem item = mMenu.findItem(R.id.new_track);
       if (item != null) {
            item.setVisible(false);
            ActivityCompat.invalidateOptionsMenu(this.getActivity());
        }
    }
...
} 
```

我`someMethod()`从几个地方接到电话，甚至之前`onCreateOptionsMenu()`，所以我必须检查`mMenu != null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T04:15:01.307

This will return true if the API is above or equal to 11 and therefore supported. Before API 11, the menu is drawn when the menu button is pressed so there is no need for this method as it occurs automatically.

# javascript - 重叠半透明div没有alpha加起来？

> ID：14008473
> 
> 赞同：5
> 
> 时间：2012-12-23T03:52:01.387
> 
> 标签：javascript, css, transparency, alpha-transparency

有没有办法让半透明元素（div）重叠，并且重叠区域不加起来 2 个 alpha 值......即无缝重叠？所以如果 div 1 和 div 2 有 0.5 alpha，它们重叠的区域仍然有 0.5 alpha，而不是 0.75 alpha。

Javascript？

我见过类似的问题弹出，但从来没有一个解决分数的答案......

也许某种破解是可能的，比如阻止浏览器显示除 0.5 之外的任何其他级别的透明度？

这将允许在网站上进行非常好的设计！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:14:29.710

You could display a third, opaque div under the second but above the first to cancel out the first div's transparency. It would have the same BG color as the parent of both divs.

# scala - 将 2D 列表旋转 90 度，或者获取 2D 列表中特定列的方法

> ID：14008474
> 
> 赞同：3
> 
> 时间：2012-12-23T03:52:07.700
> 
> 标签：scala, scala-collections

我有一个像这样的二维列表：

```
type Board = List[List[Option[Move]]] 
```

看起来有点像这样：

```
None None Some(X)
None None None
None None None 
```

我可以使用通常的收集方法、map、fold 等来对行进行操作。但我希望能够以类似的方式对列进行操作。对于这样的方法，我已经尝试了大约 1 小时，但没有运气（头脑空白）：

```
def getColumn(board: Board, column: Int): List[Option[Move]] 
```

给定上面的数组，调用`getColumn(board, 2)`，我应该收到`List(None, None, Some(X))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T04:08:42.353

I believe you're looking for is List.transpose. This will essentially rotate the list such that all of the columns will be grouped together. So your method could be:

```
def getColumn(board: Board, column: Int): List[Option[Move]] = board.transpose.apply(column) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T04:24:25.610

Ryan 的回答是正确的，也是首选。我试验了几分钟，却没有意识到“转置”的存在。这是我的非内置方法：

```
def getColumn(board: Board, column: Int): List[Option[Move]] =
  for { r <- board } yield r(column) 
```

2012/12/23 - 更新以反映@dhg 评论

# c# - 具有更严格约束的继承方法？

> ID：14008478
> 
> 赞同：3
> 
> 时间：2012-12-23T03:52:36.640
> 
> 标签：c#, inheritance

假设我有以下内容：

```
class EntityContainer : Container { }
class EntityComponent : Component { } 
```

Container 有两种向容器添加新组件的方法，它们是：

```
Add(IComponent component)
Add(IComponent component, string name) 
```

但是，假设我希望我的`EntityContainer`类**只** `EntityComponent`接受对象，而不是任何实现`IComponent`.

起初，我以为我可以简单地隐藏或覆盖基类的`Add()`方法，但似乎签名必须*完全*匹配。那么，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T06:33:48.243

“覆盖” Add 方法以使其接收更具体的类型不会满足您的接口所暗示的合同。

你说Container接口有这些方法：

```
void Add(IComponent component);
void Add(IComponent component, string name); 
```

但是你只想允许 EntityContainer 实例（实现 IComponent），所以基本上你想要这个：

```
void Add(EntityComponent component);
void Add(EntityComponent component, string name); 
```

你不能像这样实现（甚至在语义上）Container 接口，因为在你的接口中你说你可以添加任何实现 IComponent 的元素。你正在改变原来的合同！

正如 Morten 在评论中指出的那样，您可以执行以下操作：

```
class EntityContainer : Container { 
   void Add(IComponent component) {
       var entityComponent = component as EntityComponent;
       if(entityComponent == null)
          throw new InvalidOperationException("Can only add EntityComponent instances");
       // Actual add...
   }
   // Other methods..
} 
```

但我建议你不要这样做。违反接口暗示的契约应该是例外，而不是规则。此外，如果你这样做，你无法知道容器真正期望什么，直到运行时。这不是一种直观的行为，它很可能会导致微妙的问题。如果您只想接受特定类型的组件，则可以使用泛型。这样，你不仅可以应用你想要的约束，还可以获得强类型，并且你的意图会更清晰。它看起来像这样：

```
interface Container<T> where T : IComponent {
   void Add(T component);
   void Add(T component, string name);
} 
```

这意味着您的容器将保存指定类型的元素，但它应该实现（或扩展，如果它是一个类）接口 IComponent。所以你不能创建一个`Container<Object>`，因为它没有实现 IComponent。

您的 EntityContainer 将如下所示：

```
class EntityContainer : Container<EntityComponent> { 
   void Add(EntityComponent component) {
       // Actual add...
   }
   // Other methods..
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T06:03:45.820

*in*参数的协方差破坏了类型系统。考虑一下：

```
void f(Container c) { c.Add(new NonEntityComponent); }
⋮
var ec = new EntityContainer();
f(ec); 
```

类型系统中没有任何东西可以阻止这种情况。派生方法 in`EntityContainer`声明为的`Add(EntityComponent ec)`事实无济于事，因为`f()`从未听说过`EntityContainer`.

允许协变参数会产生破坏类型系统的情况，例如，`EntityContainer.Add()`传递 a`NonEntityComponent`并将其视为`EntityComponent`.

可以连贯地实现某些形式的方差：协变返回类型（C++ 有这些）、协变输出参数和逆变*输入*参数。由于我不知道的原因，这些没有实施。实际上，逆变参数会有点傻，IMO，所以看到它们出现我会很惊讶。

# jquery - 从多个输入文本中获取 GD 图像

> ID：14008479
> 
> 赞同：1
> 
> 时间：2012-12-23T03:52:42.217
> 
> 标签：jquery, forms, gd

我目前有一个 GD 图像，它从我希望发送的表单中获取它的输入，而无需刷新页面。

我目前有 1 个错误，但我无法弄清楚。

我以前没有使用过 jQuery，但我查看了所有 .val 文档并尝试在其他地方寻找帮助，但并没有成功。

这是JavaScript：

```
$(function() {
    $('button').click(function() {         
        $('#imgText').html('&lt;img src="imagecreator.php?param=' + $('input[name=username1]').val() + '"&param="'+ $('input[name=username2]').val() +    '" /&gt;');
    });
});​ 
```

[这是一个jsFiddle。](http://jsfiddle.net/954zK/14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:16:30.573

You don't need to escape the html tags, and be careful with the quotes.

Try:

```
$(function() {
    $('button').click(function() {         
        $('#imgText').html('<img src="imagecreator.php?param=' + $('input[name=username1]').val() + '&param='+ $('input[name=username2]').val() +    '" />');
    });
});​ 
```

And note: You have two parameters all with name `param`, the last one will overwrite the first one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:55:26.660

尝试这个：

```
$(function() {
    $('button').click(function() {         
        $('#imgText').html('&lt;img src="imagecreator.php?param=' + $('input[name=username1]').val() + '&amp;param='+ $('input[name=username2]').val() +    '" /&gt;');
    });
});​ 
```

# r - 使用 zoo 包可视化数据时间序列

> ID：14008483
> 
> 赞同：2
> 
> 时间：2012-12-23T03:53:59.917
> 
> 标签：r, zoo

![在此处输入图像描述](../Images/be65752637b170f9bac715bff9ba44e2.png)

我正在使用该`read.zoo`函数加载时间序列数据。我注意到，当使用`zoo`包加载时间序列时，它不会显示为数据框，并且在单击时显示如图所示。

人们无法从中辨别出数据的样子。虽然使用 拉取的数据`read.csv/read.table`被标记为 data.frame 并在单击时以整洁的方式显示。我知道我可以简单地使用 View(data) 命令，但这很麻烦，很抱歉我很挑剔，但最好简单地单击数据并将其与适当的列和行一起显示。

我还注意到，当我使用数据集生成变量时，新变量永远不会附加到创建它们的数据集，因此必须使用`data=merge(data,newvariable)`命令将其与初始数据组合。

是否有任何技术可以用来解决这两个问题？

# ios6 - 使用 GLKBaseEffect 可以为纹理着色

> ID：14008492
> 
> 赞同：1
> 
> 时间：2012-12-23T03:56:50.657
> 
> 标签：ios6, opengl-es-2.0, glkit

我有一张被透明度包围的黑色形状。我已经用 GLKit 成功加载了这个纹理，我可以使用 GLKBaseEffect 将形状绘制成矩形。有没有办法改变黑色（即不透明）像素的颜色，所以我可以绘制黄色形状或蓝色形状等？或者我需要一个自定义着色器来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:18:56.763

似乎您需要一个自定义着色器（我强烈建议您使用），因为您需要检查各个纹素颜色值，但这里有一些建议先尝试：

您可以将颜色作为指向*GLKVertexAttribColor*的顶点属性数组中的每个顶点数据传递。这将允许您单独设置每个顶点（最终是面）的颜色，但很难看到它们与您的纹理对齐的位置。

您可以尝试在效果上启用以下属性：

```
effect.colorMaterialEnabled = YES; 
```

但是，对于这两种情况，如果您的纹素是完全黑色的，那么我认为不会显示任何颜色变化。

我认为自定义着色器绝对是要走的路，因为你需要做这样的事情：

```
highp vec4 finalColor;
highp vec4 textureColor = texture2D(uTexture, vTexel);
highp vec4 surfaceColor = uColor;

// If texel is non-transparent (check alpha channel)
if(textureColor.a > 0.001)
    finalColor = surfaceColor;
else
    finalColor = vec4(0.0, 0.0, 0.0, 0.0);

gl_FragColor = finalColor; 
```

*以u*为前缀的任何内容都是传递给着色器的统一变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T20:24:48.423

要获得完全着色的纹理，请使用：

```
 self.effect.texture2d0.envMode = GLKTextureEnvModeModulate; 
```

它告诉 OpenGL 采用纹理中的任何颜色并将其乘以底层几何图形的颜色。然后，您可以使用顶点着色来获得整洁的淡入淡出等等。

*注意*：您需要将纹理从黑色更改为白色（1、1、1、1），这样乘法才能正常工作。

*注意*：以下是您应该已经具备的其他一些设置：

```
 self.effect.texture2d0.enabled = GL_TRUE;
    self.effect.texture2d0.target = GLKTextureTarget2D;
    self.effect.texture2d0.name = self.texture.name;        
    self.effect.colorMaterialEnabled = GL_TRUE; 
```

*注意*：您也可以尝试使用`GLKTextureEnvModeDecal`，它将纹理混合到彩色几何体之上（如应用贴花时），因此纹理的透明部分显示下方的几何体。

# python - wxPython 嵌套面板和 Sizer

> ID：14008494
> 
> 赞同：2
> 
> 时间：2012-12-23T03:57:04.257
> 
> 标签：python, user-interface, wxpython

开始学习 wxPython，所以我可以制作一个应用程序。我特别遇到了嵌套尺寸器的问题。

```
class browser_mainPanel(wx.Panel):

   def __init__(self, parent):
     wx.Panel.__init__(self, parent=parent)
     self.toolbar()
     self.searchBar = wx.SearchCtrl(self)

     main_sizer = wx.BoxSizer(wx.HORIZONTAL)

     main_sizer2 = wx.BoxSizer(wx.VERTICAL)   
     main_sizer2.Add(self.toolBar, 0, wx.EXPAND, 5)   
     main_sizer2.Add(self.searchBar, 0, wx.EXPAND, 5)

     main_sizer.Add(main_sizer2, wx.EXPAND)

     tree_panel = wx.Panel(self)
     tree_panel.SetBackgroundColour(wx.BLACK)
     entry_panel = wx.Panel(self)
     entry_panel.SetBackgroundColour(wx.GREEN)

     main_sizer3 = wx.BoxSizer(wx.HORIZONTAL)
     main_sizer3.Add(tree_panel, 0, wx.EXPAND, 5)
     main_sizer3.Add(entry_panel, 0, wx.EXPAND, 5)
     main_sizer2.Add(main_sizer3, wx.EXPAND)
     self.SetSizer(main_sizer) 
```

对，所以问题是 main_sizer3 中的两个面板没有像我希望的那样扩展。这是一张[图片](http://d.pr/i/fl19)。

我想要的是两个面板扩展到面板的其余部分，黑色部分在宽度上小于绿色面板。无法为我的生活找到解决方案。

我计划让这两个面板有自己的特殊实例，因为它们中会发生一些事情，但现在，我希望在开始讨论细节之前尽可能简单地实现它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:49:47.487

你忘了几个比例：

```
# to use the last parameter (border), you have to
# specify which border(s) to use in the flag parameter:
# wx.TOP, wx.BOTTOM, wx.LEFT, wx.RIGHT, a combination
# of them, or wx.ALL
main_sizer2.Add(self.toolBar, 0, wx.EXPAND|wx.BOTTOM, 5)
main_sizer2.Add(self.searchBar, 0, wx.EXPAND|wx.LEFT|wx.RIGHT, 5)
# proportion missing:
main_sizer.Add(main_sizer2, 1, wx.EXPAND) 
```

```
# set the green panel to twice the size of the black one
main_sizer3.Add(tree_panel, 1, wx.EXPAND|wx.RIGHT, 5)
main_sizer3.Add(entry_panel, 2, wx.EXPAND)
# and another proportion missing:
main_sizer2.Add(main_sizer3, 1, wx.EXPAND|wx.ALL, 5) 
```

此外，您`main_sizer`只包含一个条目，这使得它变得多余。也试着给你的sizer命名一些有意义的名字，让它更容易阅读。

最后但同样重要的是，如果您希望用户能够动态调整两个面板（树和条目）的比例，您可以使用[`wx.SplitterWindow`](http://wxpython.org/docs/api/wx.SplitterWindow-class.html)：

```
# ...
layout = wx.BoxSizer(wx.VERTICAL)
layout.Add(self.toolBar, 0, wx.EXPAND|wx.BOTTOM, 5)
layout.Add(self.searchBar, 0, wx.EXPAND|wx.LEFT|wx.RIGHT,5)

splitter = wx.SplitterWindow(self,style=wx.SP_LIVE_UPDATE)

tree_panel = wx.Panel(splitter)
tree_panel.SetBackgroundColour(wx.BLACK)
entry_panel = wx.Panel(splitter)
entry_panel.SetBackgroundColour(wx.GREEN)

splitter.SplitVertically(tree_panel,entry_panel)
splitter.SetMinimumPaneSize(50)

layout.Add(splitter,1,wx.EXPAND|wx.ALL,5)
self.SetSizer(layout) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:39:14.950

您在几行代码中[为该方法提供了错误的参数。`Add`](http://wxpython.org/docs/api/wx.Sizer-class.html#Add)
的第二个参数`Add`是小部件的比例，应该是整数（通常为 1，*尽可能保持比例填充*，或 0，*保持最小尺寸*）。你在某些方面错过了它。实际上，这个参数取的值`wx.EXPAND`实际上是用于第三个参数的常量，它也作为副作用丢失了。

如果您希望 a`Panel`小于另一个（例如 50%），您可以分别为较小和较大的面板指定值 1 和 2。

[这适用于带有Phoenix](http://trac.wxwidgets.org/browser/wxPython/Phoenix/trunk?order=date&desc=1)的 Python 3.2 ：

```
 main_sizer.Add(main_sizer2, 1, wx.EXPAND)

 tree_panel = wx.Panel(self)
 tree_panel.SetBackgroundColour(wx.BLACK)
 entry_panel = wx.Panel(self)
 entry_panel.SetBackgroundColour(wx.GREEN)

 main_sizer3 = wx.BoxSizer(wx.HORIZONTAL)     
 main_sizer3.Add(tree_panel, 1, wx.EXPAND, 5)     #smaller
 main_sizer3.Add(entry_panel, 2, wx.EXPAND, 5)    #bigger
 main_sizer2.Add(main_sizer3, 1, wx.EXPAND)
 self.SetSizer(main_sizer) 
```

![在此处输入图像描述](../Images/4abcbcd6efdf955d6c91cc219f043f4b.png)

# c# - 解析 xml 子节点

> ID：14008495
> 
> 赞同：1
> 
> 时间：2012-12-23T03:57:25.783
> 
> 标签：c#, xml, list, children

将 XML 子节点解析为特定列表的最佳方法是什么？这是 XML 的一个小例子。

```
<Area Name="Grey Bathroom" IntegrationID="3" OccupancyGroupAssignedToID="141">
  <Outputs>
  <Output Name="Light/Exhaust Fan" IntegrationID="46" OutputType="NON_DIM" Wattage="0" /> 
  </Outputs>
</Area> 
```

我想创建一个列表或称为区域名称的东西，并保存输出名称和集成 ID 的信息。所以我可以调用列表并拉出输出名称和集成ID。

我可以创建一个所有区域名称的列表，然后是一个输出列表，但无法弄清楚如何创建一个名为“灰色浴室”的列表并保存 ID 为 46 的输出“Light/Exhaust Fan”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:08:52.567

```
XDocument doc = XDocument.Load(@"E:\a\b.xml");
        List<Area> result = new List<Area>();
        foreach (var item in doc.Elements("Area"))
        {
            var tmp = new Area();
            tmp.Name = item.Attribute("Name").Value;
            tmp.IntegrationID = int.Parse(item.Attribute("IntegrationID").Value);
            tmp.OccupancyGroupAssignedToID = int.Parse(item.Attribute("OccupancyGroupAssignedToID").Value);

            foreach (var bitem in item.Elements("Outputs"))
            {
                foreach (var citem in bitem.Elements("Output"))
                {
                    tmp.Outputs.Add(new Output
                    {
                        IntegrationID = int.Parse(citem.Attribute("IntegrationID").Value),
                        Name = citem.Attribute("Name").Value,
                        OutputType = citem.Attribute("OutputType").Value,
                        Wattage = int.Parse(citem.Attribute("Wattage").Value)
                    });
                }
            }
            result.Add(tmp);
        }

public class Area
{
    public String Name { get; set; }
    public int IntegrationID { get; set; }
    public int OccupancyGroupAssignedToID { get; set; }
    public List<Output> Outputs = new List<Output>();
}

public class Output
{
    public String Name { get; set; }
    public int IntegrationID { get; set; }
    public String OutputType { get; set; }
    public int Wattage { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:04:24.910

该示例使用匿名类型。你可以（我强烈建议你）使用你自己的。

```
var doc = XDocument.Parse(xml);
var areaLists = doc.Elements("Area").
                    Select(e => e.Descendants("Output").
                        Select(d => new
                        {
                            Name = (string) d.Attribute("Name"),
                            Id = (int) d.Attribute("IntegrationID")
                        }).
                        ToArray()).
                    ToList(); 
```

# php - 在复杂的嵌套数组中提取 PHP 变量（来自 Drupal 视图）

> ID：14008497
> 
> 赞同：-2
> 
> 时间：2012-12-23T03:58:17.720
> 
> 标签：php, drupal

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

我有一个复杂的数组变量，称为`$data`. 我需要提取一个非常隐蔽的值：`[url]`in `[field_website]`。这是变量的原始`print_r()`输出：`$data`

`stdClass Object ( [node_title] => CMI2 [nid] => 3 [field_data_field_website_node_entity_type] => node [field_data_field_blog_node_entity_type] => node [field_data_field_rss_node_entity_type] => node [field_data_field_twitter_node_entity_type] => node [field_data_field_yammer_node_entity_type] => node [field_data_field_facebook_node_entity_type] => node [field_data_field_flickr_node_entity_type] => node [field_data_field_youtube_node_entity_type] => node [_field_data] => Array ( [nid] => Array ( [entity_type] => node [entity] => stdClass Object ( [vid] => 3 [uid] => 1 [title] => CMI2 [log] => [status] => 1 [comment] => 1 [promote] => 0 [sticky] => 0 [nid] => 3 [type] => social_source [language] => und [created] => 1356040541 [changed] => 1356040541 [tnid] => 0 [translate] => 0 [revision_timestamp] => 1356040541 [revision_uid] => 1 [field_website] => Array ( [und] => Array ( [0] => Array ( [url] => http://cmi2.yale.edu [title] => [attributes] => Array ( ) ) ) ) [field_blog] => Array ( ) [field_rss] => Array ( ) [field_twitter] => Array ( [und] => Array ( [0] => Array ( [url] => http://twitter.com/yalecmi2 [title] => [attributes] => Array ( ) ) ) ) [field_facebook] => Array ( ) [field_youtube] => Array ( ) [field_flickr] => Array ( ) [field_yammer] => Array ( ) [rdf_mapping] => Array ( [rdftype] => Array ( [0] => sioc:Item [1] => foaf:Document ) [title] => Array ( [predicates] => Array ( [0] => dc:title ) ) [created] => Array ( [predicates] => Array ( [0] => dc:date [1] => dc:created ) [datatype] => xsd:dateTime [callback] => date_iso8601 ) [changed] => Array ( [predicates] => Array ( [0] => dc:modified ) [datatype] => xsd:dateTime [callback] => date_iso8601 ) [body] => Array ( [predicates] => Array ( [0] => content:encoded ) ) [uid] => Array ( [predicates] => Array ( [0] => sioc:has_creator ) [type] => rel ) [name] => Array ( [predicates] => Array ( [0] => foaf:name ) ) [comment_count] => Array ( [predicates] => Array ( [0] => sioc:num_replies ) [datatype] => xsd:integer ) [last_activity] => Array ( [predicates] => Array ( [0] => sioc:last_activity_date ) [datatype] => xsd:dateTime [callback] => date_iso8601 ) ) [cid] => 0 [last_comment_timestamp] => 1356040541 [last_comment_name] => [last_comment_uid] => 1 [comment_count] => 0 [name] => admin [picture] => 0 [data] => b:0; ) ) ) [field_field_website] => Array ( [0] => Array ( [rendered] => Array ( [#markup] => http://cmi2.yale.edu [#access] => 1 ) [raw] => Array ( [url] => http://cmi2.yale.edu [title] => http://cmi2.yale.edu [attributes] => Array ( ) [display_url] => http://cmi2.yale.edu ) ) ) [field_field_blog] => Array ( ) [field_field_rss] => Array ( ) [field_field_twitter] => Array ( [0] => Array ( [rendered] => Array ( [#markup] => http://twitter.com/yalecmi2 [#access] => 1 ) [raw] => Array ( [url] => http://twitter.com/yalecmi2 [title] => http://twitter.com/yalecmi2 [attributes] => Array ( ) [display_url] => http://twitter.com/yalecmi2 ) ) ) [field_field_yammer] => Array ( ) [field_field_facebook] => Array ( ) [field_field_flickr] => Array ( ) [field_field_youtube] => Array ( ) )`

（*对那个丑陋感到抱歉！*）

我到底怎么拉出那个`[url]`变量？！理想情况下，我只想将该一个值分配给另一个变量或将其打印出来。

如果有帮助，这是来自带有[Views PHP](http://drupal.org/project/views_php)模块的 Drupal 7 视图。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:18:09.660

我建议阅读有关 PHP 数组和对象的内容，因为您尝试做的事情是如此微不足道。

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

[http://php.net/manual/en/sdo.sample.getset.php](http://php.net/manual/en/sdo.sample.getset.php)

# shell - 使用 .sh 文件将 PHP 源代码从 Mercurial Repos 自动部署到 CentOS 中的 Apache 服务器

> ID：14008499
> 
> 赞同：0
> 
> 时间：2012-12-23T03:58:25.193
> 
> 标签：shell, deployment, mercurial, automation, centos

我有一个基本的部署过程，我想自动化它。我需要帮助创建一个我可以调用的 sh 文件，该文件将处理所有步骤。

关于我的设置的注意事项：

*   root 没有 FTP 访问权限。
*   另一个用户“senthil”只能通过 FTP 访问自己的文件夹 /home/senthil

部署过程

在我将代码签入 bitbucket.org 后...

1.  打开腻子，登录为`senthil`（输入用户名+密码）。
2.  导航到 repo 克隆文件夹`/home/senthil/repos/mysite`。
3.  做`hg pull`。
4.  要求时输入密码。
5.  做`hg update`。
6.  注销 senthil（腻子已关闭！）。
7.  打开putty，以root身份登录（输入用户名+密码）。
8.  导航到 repo 克隆文件夹`/home/senthil/repos/mysite`。
9.  类型`hg archive /path/to/website/root`。
10.  运行`chmod`命令，以便 apache 用户具有适当的访问权限

当我试图制作一个可以解决这个问题的 sh 文件时，我做不到。我可以只做 2 或 3 个步骤，然后我会遇到这样的问题：

1.  如何通过 sh 提示输入密码 for hg pull
2.  如何在腻子中注销并以其他用户身份登录

如何在一个可以运行的 sh 文件中自动化整个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:43:04.080

您应该使用 ssh 连接到没有密码的机器。

谷歌搜索“初学者的 ssh”或查看此链接以学习如何操作。 [http://inside.mines.edu/~gmurray/HowTo/sshNotes.html](http://inside.mines.edu/~gmurray/HowTo/sshNotes.html)

要回答您的第二个问题，要注销用户，只需在命令提示符下键入命令 exit 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:25:51.480

1.  您可以使用单个会话（我看不到任何正在进行的 FTP，只有本地 FS）
2.  您必须使用 Plink 在主机上登录，它可以执行非交互式登录并在登录后在服务器端运行命令（命令将是带有所有部署任务的 tour shell-script）：`plink HOST COMMAND`
3.  为了避免 pull 时出现密码提示（但 fetch 会更好，一个命令而不是 pull+update），您可以阅读[.hgrc 中的 [auth] 部分](http://www.selenic.com/mercurial/hgrc.5.html#auth)（全局或特定于 repo）

# distributed-system - google文件系统中的一致性模型问题

> ID：14008506
> 
> 赞同：0
> 
> 时间：2012-12-23T04:01:18.420
> 
> 标签：distributed-system, gfs

阅读文章[The Google File System](http://research.google.com/archive/gfs-sosp2003.pdf)后，我仍然对以下几点感到困惑：

1.  '追加操作'与'写操作'有什么优势？文章强调使用追加操作而不是写操作，我想知道为什么。追加比写快？

2.  为了保持一个chunk的redundancy之间的一致性，gfs使用lease让一个chunkserver作为primary，并且让primary决定操作顺序来达到一致性，我的问题是如果重试之后update操作还是不能成功，redundancys会处于不一致的状态。那么当不同的客户端来读取更新失败的相同偏移量的同一个chunk时，他们可能会读取不同的内容。gfs是如何处理这种问题的。

3.  如果追加操作发生错误，主chunkserver会选择一个新的偏移量来追加记录吗？记录是什么意思？当客户端读取文件时，它如何处理文件中的一些填充或重复记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:15:40.170

你的所有问题都直接在论文中得到解决，所以你应该更仔细地再读一遍。但我将对问题的每个部分给出简短的回答，以便为您提供一个条目：

1.  这在启用并发写入的同时保持了一致性。如果修改现有数据，对现有数据的并发写入会破坏一致性。如果你只做追加，你可以随意重新排序它们，保持 GFS 定义的一致性模型。

2.  作为一致性模型的一部分，它不处理这个问题。客户必须处理它。

3.  我不明白这部分问题。

问候， 克里斯蒂安

# sql - 如何计算Oracle中字符串中的单词数？

> ID：14008509
> 
> 赞同：8
> 
> 时间：2012-12-23T04:02:11.207
> 
> 标签：sql, oracle, oracle11g

我正在尝试计算 SQL 中的字符串中有多少个单词。

```
Select  ("Hello To Oracle") from dual; 
```

我想显示字数。在给定的示例中，它将是 3 个单词，尽管单词之间可能有多个空格。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-23T04:12:59.880

你可以使用类似的东西。这将获取字符串的长度，然后减去字符串的长度并删除空格。然后将第一个添加到那个应该会给你单词的数量：

```
Select length(yourCol) - length(replace(yourcol, ' ', '')) + 1 NumbofWords
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/6bf5b/7)

如果您使用以下数据：

```
CREATE TABLE yourtable
    (yourCol varchar2(15))
;

INSERT ALL 
    INTO yourtable (yourCol)
         VALUES ('Hello To Oracle')
    INTO yourtable (yourCol)
         VALUES ('oneword')
    INTO yourtable (yourCol)
         VALUES ('two words')
SELECT * FROM dual
; 
```

和查询：

```
Select yourcol,
  length(yourCol) - length(replace(yourcol, ' ', '')) + 1 NumbofWords
from yourtable 
```

结果是：

```
|         YOURCOL | NUMBOFWORDS |
---------------------------------
| Hello To Oracle |           3 |
|         oneword |           1 |
|       two words |           2 | 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T07:07:42.960

由于您使用的是 Oracle 11g，所以它更简单-

```
select regexp_count(your_column, '[^ ]+') from your_table 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/0ad5b/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T05:17:18.847

如果您的要求也是删除多个空格，请尝试以下操作：

```
Select length('500  text Oracle Parkway Redwood Shores CA') - length(REGEXP_REPLACE('500  text Oracle Parkway Redwood Shores CA',
'( ){1,}', ''))  NumbofWords
from dual; 
```

由于我使用了该`dual`表，因此您可以直接在自己的开发环境中进行测试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-16T11:54:17.570

```
DECLARE @List       NVARCHAR(MAX) = '   ab a 
x'; /*Your column/Param*/
DECLARE @Delimiter  NVARCHAR(255) = ' ';/*space*/
DECLARE @WordsTable TABLE (Data VARCHAR(1000));

/*convert by XML the string to table*/
INSERT INTO @WordsTable(Data)
SELECT Data = y.i.value('(./text())[1]', 'VARCHAR(1000)')
FROM 
( 
SELECT x = CONVERT(XML, '<i>' 
    + REPLACE(@List, @Delimiter, '</i><i>') 
    + '</i>').query('.')
) AS a CROSS APPLY x.nodes('i') AS y(i)

/*Your total words*/
select count(*) NumberOfWords
from @WordsTable
where Data is not null;

/*words list*/
select *
from @WordsTable
where Data is not null 
```

/*从这个逻辑你可以继续*/

# twitter-bootstrap - 在 OrchardCMS 中集成自定义 Twitter Bootstrap 主题

> ID：14008517
> 
> 赞同：4
> 
> 时间：2012-12-23T04:04:43.800
> 
> 标签：twitter-bootstrap, orchardcms, orchardcms-1.6

有没有人有关于在 Orchard CMS 中实施自定义 Twitter Boostrap 主题的指南或清单？

我有一个在 Orchard CMS 1.6 上运行的网站，并且我已经从图库中安装了[Twitter Bootstrap 主题。](http://gallery.orchardproject.net/List/Themes/Orchard.Theme.Bootstrap)现在我希望采用自定义引导设计（第 3 方）并将其集成到这个主题中。我认为这对于任何自定义引导主题都是非常标准的......基本上只是从正常引导文件结构到各种 js/css/html 文件和片段将在 Orchard 主题布局中的位置的映射。

如果这还不存在，并且您认为它会对您有所帮助，请告诉我，我会写一篇博文（如果我在这里没有得到答案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T00:23:35.043

如今，果园似乎有一个真正的引导端口。看：

[http://gallery.orchardproject.net/List/Themes/Orchard.Theme.Bootstrap](http://gallery.orchardproject.net/List/Themes/Orchard.Theme.Bootstrap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:11:19.617

您可以查看[BootTheme](http://www.boottheme.com/)，它包含许多 Bootstrap 的免费主题。只需将 CSS 文件替换为您下载的主题即可。然后你给自己一个新的主题。

# javascript - xmlHttp.responseText 不从 json webservice 返回数据

> ID：14008518
> 
> 赞同：-1
> 
> 时间：2012-12-23T04:04:55.200
> 
> 标签：javascript, ajax, json, web-services

我正在尝试从 json webservice 检索数据。

```
if (xmlHttp.status == 200 || xmlHttp.status == 0)
        {
            var result = xmlHttp.responseText;
            json = eval("(" + result + ")");
        } 
```

我对 var 结果一无所获。当我用包含 json 对象的文本文件替换 web 服务时，我可以将 json 对象检索为 responseText。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:15:30.660

首先要做的事情......**永远永远永远不要使用`eval`***。`eval`=邪恶。

如何使用`GET`AJAX...

```
try {
    http = new ActiveXObject("Msxml2.XMLHTTP");
} catch (e1) {
    try {
        http = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e2) {
        this.xmlhttp = null;
    }
}
var url = "/uri/of/web-service?val1=Laura&val2=Linney" + Math.random();
var params = "val1=Laura&val2=Linney";
http.open("GET", url, true);

http.onreadystatechange = function() {
    if(http.readyState == 4 && http.status == 200) {
        // we have a response and this is where we do something with it
        json = JSON.parse(http.responseText);
    }
}
http.send(); 
```

如何使用`POST`AJAX...

```
try {
    http = new ActiveXObject("Msxml2.XMLHTTP");
} catch (e1) {
    try {
        http = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e2) {
        this.xmlhttp = null;
    }
}
var url = "/uri/of/web-service";
var params = "val1=Laura&val2=Linney";
http.open("POST", url, true);

http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");

http.onreadystatechange = function() {
    if(http.readyState == 4 && http.status == 200) {
        // we have a response and this is where we do something with it
        json = JSON.parse(http.responseText);
    }
}
http.send(params); 
```

# python - 请解释此算法以获取字符串的所有排列

> ID：14008521
> 
> 赞同：14
> 
> 时间：2012-12-23T04:06:43.367
> 
> 标签：python, string, recursion, permutation

以下代码生成字符串的所有排列：

```
def permutations(word):
    if len(word)<=1:
        return [word]

    #get all permutations of length N-1
    perms=permutations(word[1:])
    char=word[0]
    result=[]
    #iterate over all permutations of length N-1
    for perm in perms:
        #insert the character into every possible location
        for i in range(len(perm)+1):
            result.append(perm[:i] + char + perm[i:])
    return result 
```

你能解释一下它是如何工作的吗？我不明白递归。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-23T04:11:32.960

算法是：

*   删除第一个字母
*   找到剩余字母的所有排列（递归步骤）
*   在每个可能的位置重新插入已删除的字母。

递归的基本情况是单个字母。只有一种方法可以置换单个字母。

**工作示例**

想象一下起始词是`bar`.

*   首先删除`b`.
*   找出 的排列`ar`。这给出`ar`和`ra`。
*   对于这些单词中的每一个，将其`b`放在每个位置：
    *   `ar`-> `bar`, `abr`,`arb`
    *   `ra`-> `bra`, `rba`,`rab`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-22T05:30:19.147

我已经为下面的长度为 2 的字符串和长度为 3 的字符串编写了步骤。

**排列（'ab'）**

```
len('ab') is not <= 1 
perms = permutations of 'b'
len('b') <= 1 so return 'b' in a list
perms = ['b']
char = 'a'
result = []
for 'b' in ['b']:
    for 0 in [0,1]:
        result.append('' + 'a' + 'b')
    for 1 in [0,1]:
        result.append('b' + 'a' + '')
result = ['ab', 'ba'] 
```

**排列（'abc'）**

```
len('abc') is not <= 1
perms = permutations('bc')
perms = ['bc','cb']
char = 'a'
result =[]
for 'bc' in ['bc','cb']:
    for 0 in [0,1,2]:
        result.append('' + 'a' + 'bc')
    for 1 in [0,1,2]:
        result.append('b' + 'a' + 'c')
    for 2 in [0,1,2]:
        result.append('bc' + 'a' + '') 
for 'cb' in ['bc','cb']:
    for 0 in [0,1,2]:
        result.append('' + 'a' + 'cb')   
    for 1 in [0,1,2]:
        result.append('c' + 'a' + 'b')   
    for 2 in [0,1,2]:
        result.append('cb' + 'a' + '')
result = ['abc', 'bac', 'bca', 'acb', 'cab', 'cba'] 
```

# vb.net - VB.net drop last octat from ipaddress (after 3rd decimal)

> ID：14008522
> 
> 赞同：0
> 
> 时间：2012-12-23T04:06:44.053
> 
> 标签：vb.net, string, truncation

I have an ip address as follows 192.168.10.140 i would like to drop everything from the string after the 3rd occurance of the decimal but i am not sure how to go about it

using VB.net 2010

thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:19:50.953

用于`LastIndexOf`查找最后一个索引，`.`然后用于`Substring`获取您需要的部分。

# png - Why smaller PNG image takes up more space than the original after getting resized by GraphicsMagic

> ID：14008524
> 
> 赞同：7
> 
> 时间：2012-12-23T04:07:05.327
> 
> 标签：png, image-resizing, graphicsmagick

The original PNG image is 800x1200 and takes up about 34K. After the images is resized by GraphicsMagick to 320x480 size, the resulting images takes up approximately 37K. (For comparison, if the image is resized with Paint on Windows 7 then the resulting image is 40K.) What gives? The whole point of resizing an image was to save space. How should GraphicsMagick be used to shrink the image size?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T20:47:31.080

PNG 是一种无损格式，通过首先执行一个称为预测的步骤，然后应用 zlib 中使用的相同算法来压缩图像数据。预测步骤是有效压缩文件的关键步骤，它基于早期相邻像素的值。

所以，假设你有一个大的黑白PNG（我的意思是只有黑白，有些人有时会用灰度混淆）。还假设它不是一个微小的棋盘图案。在此图像的许多区域中，您将有一个相对较大的白色区域，然后是一个相对较大的黑色区域，依此类推。当预测器在这些大区域之一内时，正确预测当前像素强度与上一个像素强度完全相等是没有问题的。这使得更好地压缩描述图像的数据变得更加容易。

现在，让我们使用一些不同于最近邻的重采样滤波器（比如 Lanczos）来缩小这个黑白图像。这很有可能将您的黑白图像变成灰度图像，灰度图像具有更大的强度范围。这可能会使预测器的工作变得更加困难，因此最终的文件大小可能会更大。

例如，这是一个黑白 256x256 PNG 图像，占用 5440 字节，将其大小（使用 3-lobed Lanczos）调整为 120x120，现在占用 7658 字节，另一个调整大小（使用最近邻）到 120x120，占用 2467 字节。

![在此处输入图像描述](../Images/c117494a01d2e9daa9adeb7119bdb788.png) ![在此处输入图像描述](../Images/62ac8d095d540cf053d77807341959e5.png) ![在此处输入图像描述](../Images/2c20dc5268e99b33426fad417d811bbd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T04:54:03.423

PNG是一种压缩格式。有时试图压缩一个最大压缩的项目实际上会导致一个更大的项目。因此，如果将 800x1200 调整为更小的尺寸，但结果会保留原始的所有内容，因为原始已经尽可能小，您可能会看到这种情况发生。为了证明这一点，尝试使用 7zip 以超压缩方式压缩一些数据。然后尝试压缩压缩文件。通常第二个压缩文件会比第一个大。

# shell - 垂直翻转画布的 Shell 脚本

> ID：14008530
> 
> 赞同：1
> 
> 时间：2012-12-23T04:08:46.397
> 
> 标签：shell, canvas, vertical-alignment, flip

我有 M1.jpg M2.jpg ....... M100.jpg 在 /Users/KanZ/Desktop/Project/Test/ 我想翻转画布垂直它们，保存和替换它们而不是旧文件。我该如何为这个问题编写脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:23:35.737

您可以使用[convert来做到这一点，在](http://linux.about.com/od/commands/l/blcmdl1_convert.htm)[find](http://linux.about.com/od/commands/l/blcmdl1_find.htm)的帮助下，您不必编写循环：

```
find /Users/KanZ/Desktop/Project/Test/ -type f -name "M*.jpg" -exec convert {} -flip {} \; 
```

**解释：**

*   `find /Users/KanZ/Desktop/Project/Test/`- 调用`find`工具并指定基目录以递归地执行文件搜索。
*   `-type f`- 仅查找文件
*   `-name "M*.jpg"`- 仅查找名称以开头`M`和结尾的文件`.jpg`
*   `-exec ... \;`- 对于找到的每个此类文件，执行以下命令`...`
*   `convert {} -flip {}`- 这是翻转图像的实际命令。`{}`'s 是作为命令一部分的语法，`find`它们表示找到的文件`find`将被替换到哪里。所以在这里我们说使用选项`convert`垂直翻转图像`-flip`，但保持文件名不变。

**或者：**

您也可以使用循环和通配符来做到这一点：

```
for file in /Users/KanZ/Desktop/Project/Test/M*.jpg; do convert "$file" -flip "$file"; done 
```

# python - 在 Python 中打开和搜索 dBase III (DBF) 数据库

> ID：14008534
> 
> 赞同：5
> 
> 时间：2012-12-23T04:09:45.037
> 
> 标签：python, dbf

我正在寻找在 python 中开发一个需要搜索 dBase III 数据库文件（DBF）的应用程序。我一直在寻找一段时间，但我找不到任何关于如何做到这一点的好文档。我试过使用 DBFpy，但找不到任何关于如何索引/搜索列的文档。我也尝试遵循[此线程](https://stackoverflow.com/questions/2373086/python-fast-querying-in-a-big-dbf-xbase-file)中的建议，但显然我的 DBF 文件已“关闭”。我查看了[此处列出](http://packages.python.org/dbf/)的调用，但无法确定如何“打开”文件。任何人都可以推荐一个 python 模块来处理带有文档的 DBF 文件，或者指导我如何正确使用其他 DBF python 模块。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T18:16:51.407

使用[我的 dbf 模块](http://python.org/pypi/dbf)，基本流程类似于：

```
import dbf

some_table = dbf.Table('/path/to/table.dbf')  # table is closed
some_table.open()
index = some_table.create_index(record_indexer)
.
.
.
records = index.search(match=(some_value,))   # returns a dbf.List of matching records 
```

并且`record_indexer`是返回适当索引值的函数；它可以很简单

```
lambda rec: rec.desired_field 
```

或根据您的需要复杂：

```
def record_indexer(record):
    if record.that_field == 'bad value':
        return dbf.DoNotIndex             # record is ignored
    return record.this_field, record.other 
```

# iphone - UILongPressGestureRecognizer - 只识别最后一次按下

> ID：14008536
> 
> 赞同：1
> 
> 时间：2012-12-23T04:09:56.423
> 
> 标签：iphone, ios, xcode, ipad, cocoa-touch

当用户将手指按到屏幕上时，我想执行一个连续的动作。这目前工作正常。但是当用户将第二根手指按在屏幕上时，我希望 UILongPressGestureRecognizer 取消/结束第一次按下并开始服从新的按下。这样做的最佳方法是什么？我需要两个吗`UILongPressGestureRecognizers`，当一个着火时，另一个

> `enabled=NO`;启用=是;

还是有更清洁的方法？

目前，只使用一个`UILongPressGestureRecognizer`，当第二根手指按下屏幕时，它的行为就像它甚至不知道它在那里一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:08:07.707

`UILongPressGestureRecognizer`只知道最少的触摸次数——默认情况下，一根手指——然后再放下另一根手指不会有太大的影响。在需要单次触摸的真实手机上尝试此操作会看到初始触摸导致识别器转换到状态 1。将第一根手指向侧面移动或第二根手指向下触摸都会导致转换到状态 2。抬起第一根手指touch down 会导致转换到状态 3 并结束手势。

我`UILongPressGestureRecognizer`在与上面第一个视图相同的视图中添加了第二个，但给这个视图一个最低的两次触摸要求。像这样：

```
 UILongPressGestureRecognizer *lpgr1 = [[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(lpgr1Method:)];
    UILongPressGestureRecognizer *lpgr2 = [[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(lpgr2Method:)];
    lpgr2.numberOfTouchesRequired = 2;
    [self.view addGestureRecognizer:lpgr1];
    [self.view addGestureRecognizer:lpgr2];
// ...
- (void)lpgr1Method:(UIGestureRecognizer *)gestureRecognizer {
    UIGestureRecognizerState state = gestureRecognizer.state;
    self.stateLabel.text = [NSString stringWithFormat:@"%d", (int)state];
}
- (void)lpgr2Method:(UIGestureRecognizer *)gestureRecognizer {
    UIGestureRecognizerState state = gestureRecognizer.state;
    self.stateLabel2.text = [NSString stringWithFormat:@"%d", (int)state];
} 
```

如果我首先用一根手指触摸并按住它，`lpgr1`则进入状态 1。如果我然后用第二根手指触摸并按住它，`lpgr1`则进入状态 2。`lpgr2`根本不会触发。

如果我同时用两根手指触碰并按住它，就会`lpgr2`触发，并且`lpgr1`永远不会触发。

所以看起来好像在整个视图中添加两个识别器只是令人困惑，并且无论你如何编程都不会达到你想要的结果。`UIGestureRecognizer`因此，我怀疑正确的方法是编写你自己的子类。

**编辑：**我也试过这个：

```
lpgr2.delegate = self;
lpgr1.delegate = self;
// ...
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return true;
} 
```

这确实允许两个识别器同时触发，并识别出第二根手指已经触地。但是，`lpgr1`一旦移除第一根手指，就会结束。我也无法做到你想要的。我会写子类，但我的注意力需要在其他地方。祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-06T10:58:21.857

我刚刚制作了一个新的手势识别器类。它很简单，并且适用于 1 或 2 次触摸的连续动作。

FCtwoTouchesRecognizer.h

```
#import <UIKit/UIKit.h>
@interface FCTwoTouchesRecognizer : UIGestureRecognizer
@end 
```

FCtwoTouchesRecognizer.m

```
#import "FCTwoTouchesRecognizer.h"
#import <UIKit/UIGestureRecognizerSubclass.h>

@implementation FCTwoTouchesRecognizer
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    if ([touches count] > 2) //only 1 or 2 touches
    {
        self.state = UIGestureRecognizerStateFailed;
        return;
    }
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    if (self.state == UIGestureRecognizerStateFailed) return;
    self.state = UIGestureRecognizerStateChanged;
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];
    if ( (self.numberOfTouches - [touches count]) == 0 )
        self.state = UIGestureRecognizerStateRecognized;
}
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesCancelled:touches withEvent:event];
    self.state = UIGestureRecognizerStateFailed;
}
@end 
```

用法：

1) 添加

```
FCTwoTouchesRecognizer *recog = [[FCTwoTouchesRecognizer alloc] initWithTarget:self action:@selector(twoTouchesGestureHandler:)];
        [self addGestureRecognizer:recog]; 
```

2) 处理

```
-(void)twoTouchesGestureHandler:(FCTwoTouchesRecognizer *)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateChanged)
    {
        NSLog(@"changed");
        if ([recognizer numberOfTouches] > 1)
        {
            CGPoint point1 = [recognizer locationOfTouch:0 inView:self];
            CGPoint point2 = [recognizer locationOfTouch:1 inView:self];
        }
        else
        {
            CGPoint point = [recognizer locationInView:self];
        }
    }

    if(recognizer.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"touches ended");
    }
} 
```

# solr - How to create text handler for solr4?

> ID：14008537
> 
> 赞同：0
> 
> 时间：2012-12-23T04:09:57.733
> 
> 标签：solr

I have a property site where in the description text field I might have sentences like - This property has a block size of 445sqm. Set on a large block of just over 1200sqm the block is 3400m² etc etc

What I would like to do is turn that into a range search. (eg land:500 TO 600) to find blocks between 500 and 600 sqm for example.

I cant see how to do this without creating a text handler looking for wildcards or strings such as *sqm or *m² and extracting that numerical value into a field called "size" on indexing.

Im struggling to find any reading on how to go about this, has anyone done this before? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:14:27.663

You can use something like - `field:[500 TO 600]`.

For more details have a look [here](http://www.solrtutorial.com/schema-xml.html)

# windows - Why FindResource always returns NULL ？

> ID：14008545
> 
> 赞同：0
> 
> 时间：2012-12-23T04:11:51.780
> 
> 标签：windows, mfc, resources

I'm trying to load a file from the resource table at runtime using:

```
/*resource.h*/
#define ID_UI_Cmd 175
/*XXX.rc*/
ID_UI_Cmd  EXAMPLES DISCARDABLE    "res\\Examples\\example.asp"

LPCTSTR lpszResourceName = MAKEINTRESOURCE (uiID);
//uiID == ID_UI_Cmd (..edited)
ASSERT(lpszResourceName != NULL);
HINSTANCE hInst = AfxFindResourceHandle(lpszResourceName, _T("Examples"));
HRSRC hRsrc = ::FindResource(hInst, lpszResourceName, _T("Examples"));
DWORD werror = GetLastError();
//werror == 1813
if (hRsrc == NULL)//always null
{
    ASSERT(FALSE);//always excuted
} 
```

I've checked that the branch "EXAMPLES" in resource viwer is in Quotes.

```
werror == 1813 
```

# javascript - How change width/Height of an asp control?

> ID：14008550
> 
> 赞同：0
> 
> 时间：2012-12-23T04:12:59.390
> 
> 标签：javascript, asp.net

```
<script language="javascript" type="text/javascript">
function resize()
{ 
//alert("ok");
       var e = document.GetElementById("ImageEdit");
      e.style.width = "500px";

}
</script>

 <asp:Image ID="ImageEdit" runat="server"  BorderWidth="4"  Width="120px" Height="120px"  name="Image1"  /></td></tr>

 <input id="Button1" type="button" value="button"  onclick="resize();" /> 
```

Why doesn't `ImageEdit` change width ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T04:17:27.170

It is:

```
getElementById() 
```

and not:

```
GetElementById() 
```

Can't believe I didn't spot that earlier.

Full code sample:

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script language="javascript" type="text/javascript">
        function resize() {
            var x = '<%= ImageEdit.ClientID %>';
            alert(x);
            var e = document.getElementById('<%= ImageEdit.ClientID %>');
            e.style.width = "500px";
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Image ID="ImageEdit" runat="server" BorderWidth="4" Width="120px" Height="120px" name="Image1" />

        <input id="Button1" type="button" value="button" onclick="resize();" />
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:54:48.603

Seany84 的回答是正确的，但是如果您打算在您的项目中使用大量的 java 脚本，我建议您使用[jQuery](http://jquery.com/download/)。它使使用 java 脚本在公园里散步！

```
<head runat="server">
    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $("#Button1").click(function () {
                $("#ImageEdit").width("500px");
            });
        });
    </script>
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:Image ID="ImageEdit" runat="server" BorderWidth="4" Width="120px" Height="120px" name="Image1" />
    <input id="Button1" type="button" value="button" />
    </form>
</body> 
```

# css - 将更多事件添加到可排序列表 jQuery UI

> ID：14008554
> 
> 赞同：0
> 
> 时间：2012-12-23T04:13:51.940
> 
> 标签：css, jquery-ui

[**这**](https://stackoverflow.com/questions/14007417/how-to-make-two-lists-interchangeable-and-when-selection-complete-save-dropped/14007856#14007856)是我已经实施的答案，并且有效。唯一的事情是，它没有在`hover`事件上应用样式......反过来也需要删除类 - on`out`。所以我试图想出一个解决方案，我确定是不合适的。

制作几个可互换列表的正确方法是允许其中一个（在这种情况下 - 保存*结果*列表的那个），有一个`hover`和`out`事件，所以你可以处理周围的 div 的添加/删除类结果清单？

`Div_TestDrargableULLI`- 保存初始列表

`Div_dropedCols`- 保存结果列表。

*   **CSS**

```
.dropableColsBorder {
  border:3px solid #000
} 
```

*   **.aspx**

```
<div id="Div_TestDrargableULLI" runat="server" style="position: absolute; top:50px; width:100px; z-index:3">
  <ul id="UL_HeadersToOmit" style="List-Style-Type : none;">
    <li id="RecordNum_1" class="CssClassLi_HeadersToOmit" style="background-color:#70878F;">
      table Row Number
    </li>
    <li id="UsrsID_2" class="CssClassLi_HeadersToOmit" style="background-color:#E6E6B8;">
      User ID
    </li>
    <li id="UsrsName_3" class="CssClassLi_HeadersToOmit" style="background-color:#70878F;">
      User Name
    </li>
    <li id="UsrsDepID_4" class="CssClassLi_HeadersToOmit" style="background-color:#E6E6B8">
      User's Department ID
    </li>
    <li id="CurrMonth_5" class="CssClassLi_HeadersToOmit" style="background-color:#70878F">
      Current Month
    </li>
    <li id="CurrYear_6" class="CssClassLi_HeadersToOmit" style="background-color:#E6E6B8">
      Current Year
    </li>
    <li id="ReportLastUpdate_7" class="CssClassLi_HeadersToOmit" style="background-color:#70878F">
      Report's Last Update
    </li>
  </ul>
</div>
<div id="Div_dropedCols"  runat="server" style="position: absolute; top:50px ; z-index:2; width:300px; height:400px; left:60%; background-color:#f0f0f0">
  <ul id="UL_dropedCols" style=" background-color:Yellow">
    <li> omitted Table Columns</li>
  </ul>
  <br />
  <p id="next">next</p>
  <br />
  <p id="FinalColsSelection" style="width:70px; background-color:Red"></p>
</div> 
```

*   **jQuery**

```
$('document').ready(function () {
  var c = 0;
  var taken = false;
  var resluts = [];
  $('#UL_HeadersToOmit').sortable({
    connectWith: '#UL_dropedCols',
    out: function () { taken = true; }
  });
  function changeClass(hoverd, done) {
    var HovClass = "dropableColsBorder";
    var dropable = $('#Div_dropedCols');
    if (hoverd && taken)
      dropable.addClass(HovClass);
    if (done)
      dropable.removeClass(HovClass);
  }
  $('#Div_dropedCols').hover(
    function () {
      changeClass(true, false);
    }).out(
      function () {
        taken = false;
        changeClass(false, true);
      }
    );
    $('#UL_dropedCols').sortable({
      tolerance: 'pointer',
      connectWith: '#UL_HeadersToOmit',
      receive: function (event, ui) {
        var curUL = $(this);
        resluts.push(ui.item.attr("id"));
      }
    });
    $('#next').click(
      function () {
        var RLength = resluts.length;
        for (var i = 0; i < RLength; i++) {
          alert(resluts[i]);
        }
      });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:32:45.010

解决了......我唯一能做的，我没有把这个标记为正确

欢迎您做出自己的答案，因为我相信有更好的选择。

```
$('#Div_dropedCols').hover(

    function () {
        changeClass(true, false);

    }, function () {
    taken = false;
     changeClass(false, true);

}); 
```

# php - 使用未定义的常量。PHP 本地主机

> ID：14008557
> 
> 赞同：-2
> 
> 时间：2012-12-23T04:14:42.480
> 
> 标签：php, localhost, constants, undefined

我最近更换了电脑并将我正在处理的网站从一台电脑转移到另一台电脑（包括数据库）。

在新电脑上加载我的网站时，我遇到了这个错误：

注意：未定义常量的使用注意：未定义索引：

我做了一些研究，发现可以通过将其添加到我的代码中来解决它：

```
<?php error_reporting (E_ALL ^ E_NOTICE); ?> 
```

这是好事吗？或者我应该更多地更改我的代码？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-23T04:15:55.207

这很可能是不同的 PHP 设置。您现在正在测试的计算机已打开通知。在您的 php.ini 文件中搜索文本“error_reporting”并将其更改为`E_ALL & ~E_NOTICE`如果您不想看到通知。

但最好在您的开发环境中保留通知

**编辑**：我看到你用答案编辑了你原来的问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T04:21:02.977

```
error_reporting(E_ALL);
ini_set('display_errors', 'On'); 
```

# asp.net-mvc - 是否有一种强命名的方法来删除 ASP.NET MVC 中的 ModelState 错误

> ID：14008561
> 
> 赞同：14
> 
> 时间：2012-12-23T04:15:52.180
> 
> 标签：asp.net-mvc, modelstate

有没有办法在 ASP.NET MVC 回发期间删除 ModelState 错误，而无需手动编写每个错误。

假设我们有一个复选框`Billing Same As Shipping`，然后我们希望在`ShippingAddress`选中它时忽略用户写的任何内容 - 通常您可能会这样做。

```
ModelState.Remove("Checkout.ShipppingAddress.FirstName");
ModelState.Remove("Checkout.ShipppingAddress.LastName");
ModelState.Remove("Checkout.ShipppingAddress.Address1");
ModelState.Remove("Checkout.ShipppingAddress.Address2");
...
ModelState.Remove("Checkout.ShipppingAddress.ZipCode"); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-23T04:26:09.623

这是我的解决方案 -`RemoveFor()`上的扩展方法`ModelState`，仿照 MVC HTML 助手：

```
 public static void RemoveFor<TModel>(this ModelStateDictionary modelState, 
                                         Expression<Func<TModel, object>> expression)
    {
        string expressionText = ExpressionHelper.GetExpressionText(expression);

        foreach (var ms in modelState.ToArray())
        {
            if (ms.Key.StartsWith(expressionText + "."))
            {
                modelState.Remove(ms);
            }
        }
    } 
```

这是它的使用方法：

```
if (model.CheckoutModel.ShipToBillingAddress == true) 
{
    // COPY BILLING ADDRESS --> SHIPPING ADDRESS
    ShoppingCart.ShippingAddress = ShoppingCart.BillingAddress;

    // REMOVE MODELSTATE ERRORS FOR SHIPPING ADDRESS
    ModelState.RemoveFor<SinglePageStoreModel>(x => x.CheckoutModel.ShippingAddress);
}

if (ModelState.IsValid) 
{
     // should get here now provided billing address is valid
} 
```

如果有人能找到改进它的方法（或者不必指定泛型类型参数），请告诉我。或者，如果它以不同的名称存在于 MvcFutures 中，我宁愿切换到该名称。

当我在这里时，这里有一个助手来检查 ModelState 是否对某个“树”有效

```
 public static bool IsValidFor<TModel, TProperty>(this TModel model,
                                                     System.Linq.Expressions.Expression<Func<TModel, TProperty>> expression,
                                                     ModelStateDictionary modelState)
    {
        string name = ExpressionHelper.GetExpressionText(expression);

        return modelState.IsValidField(name);
    } 
```

可以这样使用：

```
 if (model.IsValidFor(x => x.CheckoutModel.BillingAddress, ModelState))
 {
     _debugLogger.Log("Billing Address Valid", () => ShoppingCart.BillingAddress);
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-19T21:47:48.597

如果这是针对[MVC 6](https://github.com/aspnet/Mvc)的，建议使用`ModelBindingHelper.ClearValidationStateForModel(Type, ModelStateDictionary, IModelMetadataProvider, string)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-02T11:57:51.503

Asp core 2.2 剃须刀页面。删除 Input.ClubInfo 类型列表中的嵌套对象 modelstate(onpost) 错误。

```
 for (int i = 0; i < Input.ClubInfo?.Count; i++)
        {
            ModelState.Remove("Input.ClubInfo[" + i + "].Membershipnr2");
        } 
```

# jquery - jQuery enlarge image but keep centered

> ID：14008565
> 
> 赞同：2
> 
> 时间：2012-12-23T04:17:16.440
> 
> 标签：jquery, css

I'm trying to have an image enlarge using jQuery while keeping it centered. I've tried adding a `'right'` animation property, but it hasn't helped.

[Here](http://northviewhigh.com/index/graduation/tickets/) is the live version of the page. Click on Student or Guest to see the animation.

jQuery:

```
var studFocusWidth = 1000;
var studFocusChange = 165;
var chartSpeed = 700;

function goToStud() {
    $('#chart').attr("usemap", "studmap")
    .animate({
        'width': studFocusWidth,
        'right': studFocusChange
    }, chartSpeed)
    .attr("src", "images/chartsfocus.png");

    $('h3').html("Select a Section");
    $('#chartback').addClass("studback").fadeIn(chartSpeed);

}

// There is a second function for the guest section 
```

HTML:

```
<div id="chartframe">
    <!-- image maps omitted -->
    <img id="chart" src="images/chartstart.png" usemap="#chartmap" alt="Chart" />
</div> 
```

CSS:

```
#chartframe {
    width: 100%;
    overflow: hidden;
    text-align: center;
    margin: 0px;
}

#chart {
    width:640px;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T08:42:59.080

[**jsFiddle 缩放演示**](http://jsfiddle.net/UTceF/1/)

根据包括[聊天](https://chat.stackoverflow.com/rooms/21592/discussion-between-kobi-tate-and-arttronics)在内的先前评论，将**`28`**超大图像（**@ 1792 x 1054**）更改为较小的图像不仅会增加这些图像*的加载时间（即 14 MB 仅在 28 个图像中*），它还有助于防止在执行时出现视觉伪影*图像交换*为您的`image map`（即座位区照片）。

由于您定义的最大宽度是`600px`，因此图像宽度所需的确切尺寸取决于您要使用多少 ZOOM ......以便在该缩放级别使用时保留视觉质量。举个一般的例子，如果你要缩放图像`200%`，那么图像的最大宽度应该是`1200px`（`600px`乘以 2，`600px`你的容器在哪里是`div`固定的`width`）。

最有可能的是，您不会放大那么大，因此在计算最终宽度时使用百分比。如果您的缩放比例大 25%，那么它就是`600px times 25% which gives you 150px`, 然后将`150px`它添加到容器中`div width of 600px`，从而为您提供`750px`. 你只是刮掉**了** `1000px`不必要的图像`width`数据。

就您目前拥有的**jQuery 缩放动画**`width`而言，同时为 the和 the设置动画是正确的`height`。然而，这并不能解决缩放时的*居中*问题`image map`，这会导致未对齐在视觉上很明显。

根据我们在聊天中的评论，在这种情况下，最好的解决方案是通过属性从`CSS`到`CSS3`使用**缩放技术。****`transform:scale()`**它在所有现代浏览器中都很友好，并且可以在对象**缩放**时*同时进行***居中**。

 ***服务器上方的 jsFiddle 作为[此在线演示](http://www.solucior.com/15-Zoom_with_CSS3.html)的示例，因此您可以替换您的`image map`标记。***

# python - 如何使用 SQLAlchemy 在 MySQL 中通过“value = +1”之类的加法来更新值？

> ID：14008568
> 
> 赞同：1
> 
> 时间：2012-12-23T04:17:31.433
> 
> 标签：python, sqlalchemy

我想用现有值计算加法。

例如 MySQL：

```
 UPDATE TBL SET val = +1 WHERE id = 1 
```

在 SQLAlchemy 中我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T04:46:27.923

您可以通过 SQLAlchemy Core 仅通过引用字段名称来执行此操作（示例取自[此处](http://docs.sqlalchemy.org/ru/latest/core/tutorial.html#inserts-and-updates)）：

```
>>> conn.execute(users.update().
...                     values(fullname="Fullname: " + users.c.name)
...                 ) 
```

在你的情况下，这可能看起来像......

```
conn.execute(your_table.update().values(val=your_table.c.val + 1)) 
```

如果您需要更复杂的行为，您可以查看[相关更新](http://docs.sqlalchemy.org/ru/latest/core/tutorial.html#correlated-updates)：本质上，创建一个代表您想要的新值的选择对象（基于旧值）并将其设置为更新对象中的值`values`。

# c# - 在执行字符串 C# 代码时动态加载程序集

> ID：14008569
> 
> 赞同：0
> 
> 时间：2012-12-23T04:17:43.013
> 
> 标签：c#, dynamic, dll, reference

我正在使用“CSharpCodeProvider”动态执行 C# 代码，然后编译代码并调用该方法。我需要在编译器中包含某些 DLL 文件，以便从该 DLL 调用类。我正在使用以下方法：

```
CompilerParameters cp = new CompilerParameters();
cp.ReferencedAssemblies.Add(the path of the DLL File); 
```

但是在调用该方法时，出现错误：

```
Could not load file or assembly or one of its dependencies. The system cannot find the file specified. 
```

但是，当我只包含 Project>References>Add Reference 中的 DLL 时，调用的代码会出现任何错误。谁能告诉我如何在运行时动态添加引用以避免该错误？

这是代码：

```
CSharpCodeProvider Code = new CSharpCodeProvider();
ICodeCompiler icc = Code.CreateCompiler();
CompilerParameters cp = new CompilerParameters();

cp.ReferencedAssemblies.Add("system.dll");
cp.ReferencedAssemblies.Add("system.data.dll");
cp.ReferencedAssemblies.Add("system.windows.forms.dll");
cp.ReferencedAssemblies.Add(@"D:\AnalogClockControl.dll");
cp.CompilerOptions = "/t:library";
cp.GenerateInMemory = true;
StringBuilder sb = new StringBuilder("");
sb.Append("using System;\n");
sb.Append("using System.Data;\n");
sb.Append("using System.Windows.Forms;\n");
sb.Append("namespace CSCodeEvaler{ \n");
sb.Append("public class CSCodeEvaler{ \n");
sb.Append("public void test(){AnalogClockControl.AnalogClock _AnalogClock= new AnalogClockControl.AnalogClock();}\n");
sb.Append("} \n");
sb.Append("}\n");
CompilerResults cr = icc.CompileAssemblyFromSource(cp, sb.ToString());
if (cr.Errors.Count > 0)
{
   return  ; //"ERROR: " + cr.Errors[0].ErrorText
}
System.Reflection.Assembly a = cr.CompiledAssembly;
object o = a.CreateInstance("CSCodeEvaler.CSCodeEvaler");
Type t = o.GetType();
MethodInfo mi = t.GetMethod("test"); 
object j = mi.Invoke(o, new object[] {}); // Here where I get the exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:11:07.037

也许您需要`using`为`AnalogClockControl`命名空间添加一个状态

```
sb.Append("using AnalogClockControl;\n"); // whatever the namespace is 
```

**编辑：没关系，如果需要，那根本不应该编译。**

# java - 为了得到一个 Class 对象，我们使用 MyClass.class - 似乎“class”是“MyClass”的静态成员

> ID：14008579
> 
> 赞同：4
> 
> 时间：2012-12-23T04:21:15.423
> 
> 标签：java, class

为了得到一个 Class 对象，我们使用 MyClass.class - 似乎“class”是“MyClass”的静态成员

*   “class”是“MyClass”的静态成员吗​​？

*   如果是这样，它是什么时候添加的，谁添加了这个字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T04:24:19.700

尽管语法相似，但`class`不是每个类的静态成员。该表达式`C.class`称为*类文字*，是编译器可以理解的特殊语法。

它在[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)中定义：

> 类*字面*量是一个表达式，由类、接口、数组或原始类型或伪类型的名称组成`void`，后跟 a`'.'`和标记`class`。

# javascript - LocalStorage 在 chrome 的不同选项卡中返回 null

> ID：14008580
> 
> 赞同：12
> 
> 时间：2012-12-23T04:21:20.957
> 
> 标签：javascript, google-chrome-extension

这是我的问题：

我在新选项卡中更新了 popup.js 中的 localStorage。我在 background.js 中访问相同的 localStorage（相同的键）。

现在，除了 chrome://extensions 选项卡（当我加载扩展时）之外，每个选项卡都返回 null。

我认为 localStorage 在所有选项卡中都是持久的。

代码：

popup.js：

```
$(document).ready(function (){

    alert(localStorage.getItem('filters'));
    var oldFilters = localStorage.getItem('filters');
    //All the filters show up on the popup.html page.
    document.getElementById('td1').innerHTML = oldFilters;

    var dat = oldFilters + "," + newArray[j]
    localStorage.setItem('filters',String(dat));
} 
```

背景.js：

```
$(window).ready(function() {
  // Handler for .ready() called.

 var filters = localStorage.getItem('filters');

   alert("background + "+ filters);
    //This shows all the filters in the chrome:extensions page but always pops up "background + null" in every new tab load. 

//changeImage(filters);

}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-23T06:54:32.540

[背景](https://developer.chrome.com/extensions/background_pages.html)和[浏览器操作](https://developer.chrome.com/extensions/browserAction.html)（在您的情况下）页面生活在孤立的世界中，彼此无法访问它们的本地存储详细信息，如果您希望这种访问发生，请使用[chrome.storage](https://developer.chrome.com/extensions/storage.html)来满足您的存储需求。

它的优点很少

*   *您的扩展程序的内容脚本可以直接访问用户数据，而无需后台页面。*
*   *即使使用拆分隐身行为，用户的扩展设置也可以保留。*
*   *用户数据可以存储为对象（localStorage API 将数据存储在字符串中）。*

### 使用的方法

*   [`chrome.storage.local.get`](https://developer.chrome.com/extensions/storage.html#method-StorageArea-get)
*   [`chrome.storage.local.set`](https://developer.chrome.com/extensions/storage.html#method-StorageArea-set)
    （如果数据需要与 Google Sync 同步，则使用`sync`，而不是）`local`

### 示范

### 清单.json

确保所有权限都可用于访问存储 API。

```
{
"name":"Local Storage Demo",
"description":"This is a small use case for using local storage",
"version":"1",
"manifest_version":2,
"background":{
    "scripts":["background.js"]
},
"browser_action":{
    "default_popup":"popup.html",
    "default_icon":"logo.png"
},
"permissions":["storage"]
} 
```

### popup.html

一个简单的弹出 html 页面，它引用 popup.js 来超越 CSP。

```
<!doctype html>
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

### 背景.js

此脚本将内容设置为 chrome 存储

```
//Set some content from background page
chrome.storage.local.set({"identifier":"Some awesome Content"},function (){
    console.log("Storage Succesful");
});
//get all contents of chrome storage
chrome.storage.local.get(null,function (obj){
        console.log(JSON.stringify(obj));
}); 
```

### popup.js

此脚本从 chrome 存储中检索和设置内容

```
document.addEventListener("DOMContentLoaded",function (){
    //Fetch all contents
    chrome.storage.local.get(null,function (obj){
        console.log(JSON.stringify(obj));
    });
    //Set some content from browser action
    chrome.storage.local.set({"anotherIdentifier":"Another awesome Content"},function (){
        console.log("Storage Succesful");
    });
}); 
```

如果您查看这些 js 页面的输出，则可以实现存储通信**（Background -> popup 和 popup -> background）**。

# google-apps-script - 日历抛出 TypeError：无法从未定义中读取属性“4”。（第 30 行）

> ID：14008584
> 
> 赞同：0
> 
> 时间：2012-12-23T04:22:42.550
> 
> 标签：google-apps-script

因此，如果日历在所选范围内没有事件，则以下脚本可以正常工作。一旦运行一次，所有事件都会正确发布。假设如果计划发生变化并且通过脚本运行相同的范围，则会引发以下错误。我只是对为什么这个错误而不是日历错误有点困惑。如果您手动清除日历，然后重新运行脚本，它将正确发布。

TypeError：无法从未定义中读取属性“4”。（第 30 行）

代码：

```
function addCrewsToCalendar() {
var humCalendar = CalendarApp.getCalendarById(ScriptProperties.getProperty('humCalendar'));
var glsCalendar = CalendarApp.getCalendarById(ScriptProperties.getProperty('glsCalendar'));

var range = SpreadsheetApp.getActiveRange().getValues();

for (var i in range){
//Date Params
var startTime = range[i][1];
var endTime = range[i][2];
var recurrence = CalendarApp.newRecurrence().addDailyRule().times(7);

//Houma Air Crew
var humSO = range[i][3];
var humRS1 = range[i][5];
var humRSw = range[i][7];

//Set Houma Calendar

//Post Houma Schedule
humCalendar.createAllDayEventSeries('HUM RS1: '+humRS1, startTime, recurrence);
humCalendar.createAllDayEventSeries('HUM SO: '+humSO, startTime, recurrence);
humCalendar.createAllDayEventSeries('HUM RSw: '+humRSw, startTime, recurrence);

//Galveston Air Crew    
var glsSO = range[i][4];
var glsRS1 = range[i][6];
var glsRSw = range[i][8];

//Set Galveston Calendar
//Remove any events so there are no duplicates
var glsEvents = glsCalendar.getEvents(startTime, endTime);
for (var i in glsEvents){
  glsEvents[i].deleteEvent();
}
//Post GLS Schedule
glsCalendar.createAllDayEventSeries('GLS RS1: '+glsRS1, startTime, recurrence);
glsCalendar.createAllDayEventSeries('GLS SO: '+glsSO, startTime, recurrence);
glsCalendar.createAllDayEventSeries('GLS RSw: '+glsRSw, startTime, recurrence);    

}

} 
```

我确定我错过了一些简单的东西。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:29:17.363

这一行：

```
var glsSO = range[i][4]; 
```

正在访问变量的属性 4。似乎由于某种原因没有定义变量 range[i] 。

# javascript - Dust.js 实现，如果模板被硬编码或从其他位置获取，如果 JSON 被硬编码或被获取

> ID：14008585
> 
> 赞同：0
> 
> 时间：2012-12-23T04:22:43.677
> 
> 标签：javascript, jquery, json, mustache, dust.js

正如标题清楚地表明我想在我的应用程序中实现[dust.js。](http://akdubya.github.com/dustjs/)

我创建了一个名为的函数`tmplReplaceContent`，它接受 3 个参数`template`, `json`,`target`

我也在[mustache.js](http://mustache.github.com/)中解决了这个问题，我认为我遇到了错误，花了我大约 10 个小时，但在调试错误方面仍然没有运气。所以我决定转战*尘埃*，也是因为它的好战绩。

现在，对于这个问题，我想检查`template`是路径还是**灰尘模板**，如果是路径，那么`$.get`它，如果是模板，那么就使用它，同样适用于`json`，如果是路径照`$.getJSON`原样使用它。

这是我的*mustache*实现，如您所见，正则表达式仅检查单个`{{template}}`并且如果我有复杂的模板将不起作用，如果进行复杂的检查很麻烦，我将只从文件中获取所有模板。

```
tmplReplaceContent : function(json, tmpl, target) {
    var regex = new RegExp("\{{[a-zA-Z\.\_]*\}}"),
    view = '';
    function setOutput(template) {
        var content = Mustache.render(template, view);
        $(target).html(content).hide().fadeIn();
    }
    function doJSON(json) {
        view = json;
        if(!regex.test(tmpl)){
            /* get mustache tmpl from the path */
            $.get(msi.vars.tmpl_url + tmpl + '.mustache', setOutput);
        } else {
            setOutput(tmpl);
        }
    }
    /* json -> check if object */
    if (typeof json === 'object') {
        doJSON(json);
    } else {
        /* getJSON from the path */
        $.getJSON(msi.vars.base_url + json, doJSON);
    }
} 
```

你有什么比我想象的更好的实现吗？这种实施的缺点是什么？谢谢！

**编辑**： tmpl 作为路径的示例：

```
templates/default 
```

或者可以是

```
default 
```

因为我已经设置了实现`msi.vars.tmpl_url = base_url + 'public/templates/'`

# android - 即使捕获到异常，应用程序也会崩溃

> ID：14008588
> 
> 赞同：4
> 
> 时间：2012-12-23T04:23:05.423
> 
> 标签：android, urlconnection

我正在尝试从我正在使用的应用程序连接到我的网站`URLConnection`。我已经抓住了`UnknownHostException`，但即便如此，应用程序也崩溃了，并且 log cat 显示以下错误。

```
12-22 17:17:21.992: W/System.err(2222): java.net.UnknownHostException: Unable to resolve host "mywebsite.com": No address associated with hostname
12-22 17:17:22.012: W/System.err(2222):     at java.net.InetAddress.lookupHostByName(InetAddress.java:424)
12-22 17:17:22.012: W/System.err(2222):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
12-22 17:17:22.026: W/System.err(2222):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
12-22 17:17:22.026: W/System.err(2222):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
12-22 17:17:22.026: W/System.err(2222):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
12-22 17:17:22.026: W/System.err(2222):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
12-22 17:17:22.026: W/System.err(2222):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
12-22 17:17:22.032: W/System.err(2222):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
12-22 17:17:22.032: W/System.err(2222):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
12-22 17:17:22.032: W/System.err(2222):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)
12-22 17:17:22.042: W/System.err(2222):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
12-22 17:17:22.042: W/System.err(2222):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
12-22 17:17:22.042: W/System.err(2222):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)
12-22 17:17:22.042: W/System.err(2222):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
12-22 17:17:22.052: W/System.err(2222):     at com.example.myapp$loadMessageAsync.doInBackground(FreeSms.java:85)
12-22 17:17:22.052: W/System.err(2222):     at com.example.myapp$loadMessageAsync.doInBackground(FreeSms.java:1)
12-22 17:17:22.062: W/System.err(2222):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-22 17:17:22.062: W/System.err(2222):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-22 17:17:22.072: W/System.err(2222):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-22 17:17:22.102: W/System.err(2222):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-22 17:17:22.102: W/System.err(2222):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-22 17:17:22.102: W/System.err(2222):     at java.lang.Thread.run(Thread.java:856)
12-22 17:17:22.122: W/System.err(2222): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)
12-22 17:17:22.122: W/System.err(2222):     at libcore.io.Posix.getaddrinfo(Native Method)
12-22 17:17:22.132: W/System.err(2222):     at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:59)
12-22 17:17:22.132: W/System.err(2222):     at java.net.InetAddress.lookupHostByName(InetAddress.java:405)
12-22 17:17:22.132: W/System.err(2222):     ... 21 more
12-22 17:17:22.142: W/System.err(2222): Caused by: libcore.io.ErrnoException: getaddrinfo failed: ETIMEDOUT (Connection timed out)
12-22 17:17:22.162: W/System.err(2222):     ... 24 more
12-22 17:17:22.162: D/AndroidRuntime(2222): Shutting down VM
12-22 17:17:22.162: W/dalvikvm(2222): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-22 17:17:22.192: E/AndroidRuntime(2222): FATAL EXCEPTION: main
12-22 17:17:22.192: E/AndroidRuntime(2222): java.lang.NullPointerException
12-22 17:17:22.192: E/AndroidRuntime(2222):     at com.example.myapp$loadMessageAsync.onPostExecute(FreeSms.java:101)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at com.example.myapp$loadMessageAsync.onPostExecute(FreeSms.java:1)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at android.os.AsyncTask.finish(AsyncTask.java:631)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at android.os.Looper.loop(Looper.java:137)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at java.lang.reflect.Method.invoke(Method.java:511)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-22 17:17:22.192: E/AndroidRuntime(2222):     at dalvik.system.NativeStart.main(Native Method) 
```

**代码**

```
public class MainActivity extends Activity {

private Button btnSkipContinue;
private TextView txtMessage,txtVersion;
private StringBuilder response; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    btnSkipContinue = (Button) findViewById(R.id.btnSkipCon);
    btnSkipContinue.setVisibility(View.GONE);
    txtMessage = (TextView) findViewById(R.id.txtMsgForUsers);      
    btnSkipContinue.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            finish();
            Intent intent = new Intent(MainActivity.this, MyPage.class);
            startActivity(intent);
        }
    });

    if (isOnline()) {
        try {
            new loadMessageAsync().execute();
        } catch (Exception ex) {
            txtMessage.setText("Error while loading message. Cannot connect to server....");
            btnSkipContinue.setVisibility(View.VISIBLE);
            btnSkipContinue.setText("Continue");
        }
    } else {
        Toast.makeText(getApplicationContext(), "No Internet Access", Toast.LENGTH_SHORT).show();
    }
}

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}

private class loadMessageAsync extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {
        try {
            URLConnection connection = new URL("http://mywebsite.com/new/Messages.aspx").openConnection();
            connection.setConnectTimeout(60000);
            connection.setRequestProperty("Accept-Charset", "UTF-8");
            InputStream responseStream = connection.getInputStream();
            BufferedReader br = new BufferedReader(new InputStreamReader(responseStream));
            response = new StringBuilder();
            String line;
            while ((line = br.readLine()) != null) {
                response.append(line);
            }
        } catch (UnknownHostException ex) {
            response.append("<html><body>Error while loading message. Cannot connect to server.</body></html>");
        } catch (IOException ex) {
            response.append("<html><body>Error while loading message. Cannot connect to server..</body></html>");
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        try {
            txtMessage.setText(Html.fromHtml(response.toString()));
        } catch (Exception ex) {
            txtMessage.setText("Error while loading message. Cannot connect to server...");
        }
        btnSkipContinue.setVisibility(View.VISIBLE);
        btnSkipContinue.setText("Continue");
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:30:22.333

UnknownHostException 正在被处理，但它是一个未处理的 NullPointerException 让你崩溃。

# php - 使用 AJAX 动态更改表单操作 URL 以实现负载平衡？

> ID：14008589
> 
> 赞同：1
> 
> 时间：2012-12-23T04:23:21.573
> 
> 标签：php, jquery, ajax, upload, load-balancing

我想为文件服务器做一些负载平衡，基本上我想根据哪个服务器具有最小负载将文件上传到不同的服务器上，这必须在用户按下提交按钮后动态完成，因为我还需要考虑帐户输入文件扩展名，所以我想当用户单击提交按钮上传文件时，将对 URL 进行 AJAX 查询，该 URL 将在进行一些算法分析后返回最终目标服务器和此 AJAX 查询的结果将更改输入表单的操作字段，然后文件将上传到该服务器。那么我想知道这是否是一个好方法？或者如果有更好的方法？

# google-fusion-tables - 谷歌融合表映射不规则

> ID：14008591
> 
> 赞同：0
> 
> 时间：2012-12-23T04:23:28.170
> 
> 标签：google-fusion-tables

我开发了一个网页来使用 Google 融合表查找结构工程数据。

[http://structurology.com/geodata](http://structurology.com/geodata)

该页面包含美国大陆所有地区的数据。

我一直在测试该应用程序，当我执行搜索时，结果的速度出现了异常。有时数据会立即上升，有时需要一段时间然后才会出现。其他时候它只是放弃并说它找不到数据。发生这种情况时，如果您立即再次搜索，它将找到数据。在我连续进行了几次不同的搜索之后，它似乎更快了。

数据集非常大，我最初尝试了 7 个数据子集并遇到了上述问题。刚才，我将这些子集细分为总共 14 个，看看它是否有助于解决问题。它似乎好一点，但仍然遇到问题。

有任何想法吗？

提前致谢。

# html - 每隔一排 | Haml 中表格的第 N 列

> ID：14008593
> 
> 赞同：1
> 
> 时间：2012-12-23T04:24:16.000
> 
> 标签：html, css, ruby-on-rails, ruby, haml

尝试在 HAML 中制作表格，我有以下内容：

```
%table
  %tbody
    %tr
      %th{:rowspan => 2} Name
      %th{:class => "leftBorderS", :colspan => 5} Monday
      %th{:class => "leftBorderS", :colspan => 5} Tuesday
      %th{:class => "leftBorderS", :colspan => 5} Wednesday
      %th{:class => "leftBorderS", :colspan => 5} Thursday
      %th{:class => "leftBorderS", :colspan => 5} Friday
      %th{:class => "leftBorderS", :colspan => 5} Saturday
    %tr
      - 6.times do
        %th{:class => "leftBorderS"} A
        %th{:class => "leftBorderD"} B
        %th{:class => "leftBorderD"} C
        %th{:class => "leftBorderD"} D
        %th{:class => "leftBorderD"} E

    - @data.each do |row|
      %tr
        - row.each do |column|
          %td{:class => "leftBorderD"}= column 
```

CSS类：

```
table {
  border-collapse: collapse;
}
th {
  border: 1px solid #ccc;
  padding: 0.2em;
}
.weeklyReview .leftBorderS {
  border-left: 1px solid black;
  text-align: center;
}
.weeklyReview .leftBorderD {
  border-left: 1px dotted orange;
}
.weeklyReview .rowGray {
  background-color: gray;
}
.weeklyReview .rowWhite {
  background-color: white;
} 
```

Rails 控制器传递的示例数据：

```
@data = [["adam", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["boy", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["charles", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["david", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["echo", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["foxtro", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["gamma", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["helio", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5], ["indigo", 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5],] 
```

问题出现在代码的最后一部分。我希望每个人都有`%tr`不同的颜色。目前默认是灰色的，但这仍然意味着其他的都必须是白色的，所以我只做了两个类来在两者之间切换）。另外为了分隔日期，只有某些`%td`s 将具有实心左边框，否则，它们将具有虚线边框。

对于 HAML 标记：

1.  你如何跨过每一行？
2.  您如何仅将`n`第一个实例应用于数据单元格？

我[有](http://codepen.io/specialorange/pen/GacAz)什么，它应该是什么[样子](http://codepen.io/specialorange/pen/wFjzu)。

我主要是在寻找语法，因为它可以应用于数据单元格、行、列或任何需要解析或单步执行的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T04:37:17.850

这似乎是一个 CSS 问题。

使用`nth-of-type`并忘记所有这些额外的类：

```
table {
  background-color: salmon;
}

th {
  background: salmon;
}

tr:nth-of-type(2n) {
  background: salmon;
}
tr:nth-of-type(2n+1) {
  background: lightblue;
} 
```

您也可以使用列来执行此操作：

```
td:nth-of-type(5n-3) {
  color: white
} 
```

# linux - NASM - 应用凯撒密码后输出字符串

> ID：14008597
> 
> 赞同：0
> 
> 时间：2012-12-23T04:24:27.407
> 
> 标签：linux, ubuntu, nasm, output, encryption

我正在尝试做一个程序，它执行以下操作：它需要一个文件的输入：10 个字符，所有 CAP，每个字符在字母表中都前进 3 个位置，那些超过 Z ascii 代码的位置，然后减去 26 个位置。Z->D、A->D、D-​​>H 等。

代码：字符 + 3 if (代码 > 26) 代码：代码 - 26

我的 readByte 函数，正如它所说的那样：每一行都有很好的注释！

```
mov ecx, 0
mov edi, buffer  ; buffer is memory address of 1st char of file  

readByte:

mov al, [edi]   ; move x's position content to al    
add al, 3       ; add 3 to al
cmp al, MAXHEX  ; compare with 'Z' 
jg dec          ; if al > 'Z', jump to dec
call putChar    ; if al < 'Z', print char
jmp nextByte    ; grab next character!

dec:
sub al, 26      ; decrement al by 26
call putChar    ; print char
jmp nextByte    ; grab next char

nextByte:

cmp ecx,[filesize] ; compare counter and filesize I had returned from readFile
jge terminar       ; if it has read all chars, end program
inc ecx        ; increment counter 
inc edi            ; advance to next file address position, so as to get next character
jmp readByte       ; go read the byte again 
```

这是 putChar 宏，它被交给了我们的文章：

```
; putChar   - write a char to stdout (stdout)
;   Argument(or whatever you call it in assembly)
;      al: char to write
;   Return: has none
putChar:
    push ebx
    push ecx
    push edx
    push eax    ; al has the ascii code to write
    mov ecx, esp  ; esp points to top of stack
    mov edx, 1  ; write a character
    mov  eax, SYS_WRITE  ; 4
    mov  ebx, 1   ; channel of screen ecran - stdout
    int LINUX_CALL
    pop eax
    pop edx
    pop ecx
    pop ebx
    ret 
```

基本上，如果我改变，我可以让程序完美运行

```
add al, 3       ; add 3 to al 
```

到不同的价值。我不知道出了什么问题。在这件简单的事情上花了至少十几个小时。

# c++ - C++ 宏创建对象

> ID：14008606
> 
> 赞同：1
> 
> 时间：2012-12-23T04:26:28.550
> 
> 标签：c++, object, macros

我认为我对宏的理解是错误的。我正在使用 curses 制作游戏，我想生成一张地图（现在统一挑选瓷砖，因为我无法让任何我发现工作的分布采样器）。

```
#include "Map.h"

/*  Our ingame tiles    */
#define WATER   Tile(COLOR_BLUE,COLOR_CYAN,std::string(1, static_cast<char>(247)));
#define LAVA    Tile(COLOR_YELLOW, COLOR_RED, std::string(1, static_cast<char>(247)));
#define ANIMAL  Tile(COLOR_MAGENTA, COLOR_BLACK, std::string(1, static_cast<char>(224)));
#define PATH    Tile(COLOR_WHITE, COLOR_WHITE, std::string(1, static_cast<char>(32)));

//static int pathPx = 5;
//static int lavaPx = 2;
//static int waterPx = 2;
//static int animalPx = 1;

std::vector<Tile> tiles = {PATH, LAVA, WATER, ANIMAL};

std::vector< std::vector<Tile> > map;

Map::Map(){
    srand(time(NULL));
    int y = rand() % 10 + 10; 
    int x = rand() % 10 + 10;
    for (int j=0; j<y; j++){
        std::vector<Tile> tileRowi;
        for (int i=0; i<x; i++){
            int n = rand()%4+1;
            tileRowi.push_back(tiles[n]);
        }
    }
} 
```

错误是：

```
 First: c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h   initializing argument 1 of 'std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' [-fpermissive] 
```

第二个：`invalid conversion from 'char' to 'const char*' [-fpermissive]`

第一个说我的一个文件的第 485 行......但没有第 485 行。第二个在：

```
 std::vector<Tile> tiles = {PATH, LAVA, WATER, ANIMAL}; 
```

**编辑 -**

这是我的瓷砖课程：

```
 #include "Tile.h"

int backgroundColor;
int foregroundColor;
std::string rep;

Tile::Tile(int fc, int bc, std::string r){
    backgroundColor = bc;
    foregroundColor = fc;
    rep = r;
} 
```

**编辑 2--工作区图片** ![这是错误](../Images/fb363630c34bb855dba4e434bea9f1fa.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T04:30:09.927

C++ 不允许在函数外进行操作，请将下面的代码放入函数中

```
tiles.push_back(WATER);
tiles.push_back(LAVA);
tiles.push_back(ANIMAL);
tiles.push_back(PATH); 
```

地图.cpp：

```
void MakeTiles(std::vector<Tile>& tiles)
{
  tiles.push_back(WATER);
  tiles.push_back(LAVA);
  tiles.push_back(ANIMAL);
  tiles.push_back(PATH);
} 
```

**编辑**

由于您尚未发布 Tile 课程，因此我不得不猜测您最后发生了什么。看起来您在 Tile 中有一个 std::string 类型成员，它需要一个 char 来构造它（请参阅 Tile 的第三个参数）？一个可能的解决方法是：

```
 std::string(1, static_cast<char>(247)); 
```

最后你的宏还有额外`;`的

```
#define WATER   Tile(COLOR_BLUE,COLOR_CYAN,std::string(1, static_cast<char>(247)));
                                                                                  ^^^^ 
```

应该：

```
#define WATER   Tile(COLOR_BLUE,COLOR_CYAN,std::string(1, static_cast<char>(247))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:37:59.257

我同意上面的帖子。push_back 是要走的路。但这是宏方式，使用赋值运算符加载向量。干杯:)

```
#include <iostream>
#include <vector>

#define WHITE tiles white(1,'w') //messy ihmo
#define BLACK tiles black(-1,'b')

using namespace std;

class tiles
{
public:
tiles(int NUMBER, char LETTER):number(NUMBER), letter(LETTER){};
int number;
char letter;
};

int main()
{
WHITE; //macro overwrites here
BLACK;

vector<tiles> box; //initialize the vector
box.reserve(8); //must do this manually if you don't use stl push_back()
                //or get memory error, bounds issue.  push_back() is really the better way 
                //to go.
int i=0;
box[i++]=white;//load up the vector via the assignment operator 
box[i]=black;//same

cout<<"WHITE "<<box[0].letter<<" BLACK "<<box[1].letter<<endl;//check to screen
cout<<"WHITE "<<box[0].number<<" BLACK "<<box[1].number<<endl;

system("pause");
return 0;
} 
```

# c# - 为什么我不能用这个按钮改变这个标签？

> ID：14008607
> 
> 赞同：0
> 
> 时间：2012-12-23T04:26:39.387
> 
> 标签：c#, forms, button, label

```
using System;  
using System.Drawing;  
using System.Windows.Forms;  
namespace Test  
{  
    class mainWindow : Form  
    {  
        public mainWindow()  
        {  
            Label firstLabel = new label();  
            firstLabel.Text = "Hello";  
            this.Controls.Add(firstLabel);  
            Button firstButton = new Button();  
            firstButton.Text = "Click me";  
            firstButton.Click += firstButton_Click;  
            firstbutton.Left = 100;  
            this.Controls.Add(firstButton);  
        }  
        void firstButton_Click(object sender, EventArgs e)  
        {  
            firstlabel.Text = "Goodbye";  
        }  
    }  
    class XxX  
    {  
        static void Main()  
        {  
            mainWindow form = new mainWindow();  
            Application.Run(form);  
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T04:31:01.867

因为是一个作用域为构造函数`firstLabel`的局部变量。`mainWindow`您可以创建班级`firstLabel`的私人成员`mainWindow`：

```
class mainWindow : Form  
{  
    private Label firstLabel;
    public mainWindow()  
    {  
        firstLabel = new Label();  
        firstLabel.Text = "Hello";  
        this.Controls.Add(firstLabel);  
        Button firstButton = new Button();  
        firstButton.Text = "Click me";  
        firstButton.Click += firstButton_Click;  
        firstbutton.Left = 100;  
        this.Controls.Add(firstButton);  
    }  
    void firstButton_Click(object sender, EventArgs e)  
    {  
        firstLabel.Text = "Goodbye";  
    }  
} 
```

此外，大多数类是传统的`PascalCased`而不是`camelCased`（即`class MainWindow`代替`mainWindow`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T04:33:27.857

```
using System;
using System.Drawing;
using System.Windows.Forms;
namespace Test
{
    class mainWindow : Form
    {
        // since u need to access the control, u need to keep that control at global level
        private Button firstButton = null;
        private Label firstLabel = null;
        public mainWindow()
        {
            firstLabel = new Label();
            firstLabel.Text = "Hello";
            Controls.Add(firstLabel);
            Button firstButton = new Button();
            firstButton.Text = "Click me";
            firstButton.Click += firstButton_Click;
            firstButton.Left = 100;
            Controls.Add(firstButton);
        }
        void firstButton_Click(object sender, EventArgs e)
        {
            // now since the variable is global u can access it and change the title
            firstLabel.Text = "Goodbye";
        }
    }
    static class XxX
    {
        static void Main()
        {
            mainWindow form = new mainWindow();
            Application.Run(form);
        }
    }
} 
```

# twitter-bootstrap - bootstrap-dropdown 不显示它应该显示的下拉菜单

> ID：14008610
> 
> 赞同：1
> 
> 时间：2012-12-23T04:27:45.080
> 
> 标签：twitter-bootstrap

我正在尝试让 bootstrap-dropdown.js 工作。但它不能正常工作。它确实显示了一个下拉菜单，但不在正确的位置。

我附上了一个截图来演示这个问题。此外，这里是演示我正在处理的关于[jsfiddle的问题的链接](http://jsfiddle.net/rPRw6/)

在这方面的任何帮助将不胜感激。

![截屏](../Images/29e40ec96a7ad07d94a83240cf4a50ec.png)

这就是我添加导航药丸和下拉菜单的方式（如文档中所述）

```
<div class="navbar masthead">
        <ul class="nav nav-pills pull-right">
          <li class="active">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Abcdef</a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Action</a></li>
                <li><a href="#">Action</a></li>
              </ul>
          </li>
          <li>
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Abcdef</a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Action</a></li>
              <li><a href="#">Action</a></li>
            </ul>
          </li>
          <li>
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Abcdef</a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Action</a></li>
              <li><a href="#">Action</a></li>
            </ul>
          </li>
          <li>
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Abcdef</a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Action</a></li>
              <li><a href="#">Action</a></li>
            </ul>
          </li>
        </ul>
        <h3>Test</h3>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:34:12.303

将`"dropdown"`类添加到每个`<li>`应该有下拉菜单的类。查看编辑过的[小提琴](http://jsfiddle.net/rPRw6/1/)

# java - 查找数组的索引

> ID：14008620
> 
> 赞同：-5
> 
> 时间：2012-12-23T04:30:36.877
> 
> 标签：java

有人可以向我解释为什么结果是 6 吗？谢谢

```
String[] s = { "A", "B", "C", "D" };
String b = "ABRACADABRA";
int i = s.length - 1;
System.out.print( b.indexOf( s[ i ] ) ); 
```

我知道 s 的长度是 4，所以 i = 3，但是 s[i] 是什么意思呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T04:31:49.947

在 Java 中，字符串和数组是[0-indexed](http://en.wikipedia.org/wiki/Zero-based_numbering)。这意味着第一个元素的索引为 0，第二个元素的索引为 1，依此类推...

所以`s[3]`意味着其中的*第四个*元素`s`是`D`。表达式`b.indexOf("D")`是 6，因为它是 in`D`的*第七个*字母`ABRACADABRA`，所以它在索引 6 处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T04:35:09.460

i 表示索引，所以在 s 中，你有

```
i|s

0|A
1|B
2|C
3|D 
```

所以在括号中，你只是给它你想要的值的索引。所以s[3]给你D。然后你说找到你给它的值的索引，你给它值'D'，所以它会寻找'D'在ABRACADABRA中的位置。所以请记住数组从 0 开始计数，所以

```
0|A
1|B
2|R
3|A
4|C
5|A
6|D
.... 
```

D所在的索引是6。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T04:36:04.563

i 是数组索引。在数组中，索引总是从 0 开始。这意味着如果你想在第一个位置获取数据，你需要做 s[0] ，这会给你 'A' 。

它总是 - 1 从您想要获得的实际位置。

# android - 值未保存在 savedInstanceState 中

> ID：14008621
> 
> 赞同：1
> 
> 时间：2012-12-23T04:30:42.430
> 
> 标签：android, gridview, logcat, instances

出于某种原因，gridView 中的值没有从 Bundle 中保存。也没有任何内容输出到 logcat。我是否正确地从 gridview 获取值？它充满了编辑文本，所以它应该从那里获取值

```
public class RedScorerFragment extends SherlockFragment {

LayoutInflater infl;
GridView mGrid;

int R1C1, R1C2, R1C3;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    infl = inflater;
    View mView = inflater.inflate(R.layout.fragment_score_red, container, false);
    mGrid = (GridView) mView.findViewById(R.id.gridViewRed);

    if(savedInstanceState != null)
    {
        R1C1 = savedInstanceState.getInt("R1C1");
        R1C2 = savedInstanceState.getInt("R1C2");
        R1C3 = savedInstanceState.getInt("R1C3");

        Log.d("savedd R1C1 ", String.valueOf(R1C1));
        Log.d("savedd R1C2 ", String.valueOf(R1C2));
        Log.d("savedd R1C3 ", String.valueOf(R1C3));
    }

    mGrid.setAdapter(new ImageAdapter(getActivity()));
    return mView;
}

@Override
public void onActivityCreated(Bundle savedInstanceState){
    super.onActivityCreated(savedInstanceState);

    if(savedInstanceState != null)
    {
        R1C1 = savedInstanceState.getInt("R1C1", 0);
        R1C2 = savedInstanceState.getInt("R1C2", 0);
        R1C3 = savedInstanceState.getInt("R1C3", 0);

        Log.v("saved R1C1 ", String.valueOf(R1C1));
        Log.v("saved R1C2 ", String.valueOf(R1C2));
        Log.v("saved R1C3 ", String.valueOf(R1C3));
    }
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState){
    super.onSaveInstanceState(savedInstanceState);

    //for(int i=0;i<mGrid.getChildCount(); i++)
    Log.e("Saving", mGrid.getChildAt(0).toString());
    Log.e("Saving", mGrid.getChildAt(1).toString());
    Log.e("Saving", mGrid.getChildAt(2).toString());
    savedInstanceState.putInt("R1C1", Integer.valueOf(mGrid.getItemAtPosition(0).toString()) );
    savedInstanceState.putInt("R1C2", Integer.valueOf(mGrid.getItemAtPosition(1).toString()) );
    savedInstanceState.putInt("R1C3", Integer.valueOf(mGrid.getItemAtPosition(2).toString()) );

}

} 
```

日志猫

```
12-22 23:58:38.736: E/AndroidRuntime(2481): FATAL EXCEPTION: main
12-22 23:58:38.736: E/AndroidRuntime(2481): java.lang.RuntimeException: Unable to pause activity {org.say.upscorer/org.say.upscorer.MainActivity}: java.lang.NullPointerException
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3348)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3305)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3288)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.ActivityThread.access$2500(ActivityThread.java:125)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2040)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.os.Looper.loop(Looper.java:123)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at java.lang.reflect.Method.invoke(Method.java:521)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at dalvik.system.NativeStart.main(Native Method)
12-22 23:58:38.736: E/AndroidRuntime(2481): Caused by: java.lang.NullPointerException
12-22 23:58:38.736: E/AndroidRuntime(2481):     at org.saywatt.scoring.RedScorerFragment.onSaveInstanceState(RedScorerFragment.java:91)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.support.v4.app.Fragment.performSaveInstanceState(Fragment.java:1607)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1587)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1655)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:527)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at com.actionbarsherlock.app.SherlockFragmentActivity.onSaveInstanceState(SherlockFragmentActivity.java:127)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.Activity.performSaveInstanceState(Activity.java:1036)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1180)
12-22 23:58:38.736: E/AndroidRuntime(2481):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3330)
12-22 23:58:38.736: E/AndroidRuntime(2481):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:33:03.997

函数族`Bundle::get`以*标签*或*id*作为参数。这就是他们知道你到底要什么的方式。IE，

```
// get a String with id "R1C1", note the quotes
R1C1 = savedInstanceState.getString("R1C1"); 
```

你打电话给他们的方式，因为你正在处理，这只是偶然的工作`Strings`，实际上是要求一个`String`带有当时包含的任何内容的*id 。*`R1C1`

但是您正在`ints`打包并期望提取`Strings`，这是一个简单明了的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:54:06.050

您的清单中如何声明父`Activity`级？如果您正在处理配置更改，即

```
android:configChanges= whatever 
```

你的`Activity`，因此你的`Fragment`将不会被重建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T05:39:02.110

您可能是自动（取消）装箱的另一个受害者。我怀疑 since`Bundle.putInt()`将 a`int`作为第二个参数，而您为它提供了一个`Integer.valueOf()`返回a 的值`Integer`。`Integer`如果返回的不是 is 也没关系`null`，但拆箱将无法转换`null`为普通类型`int`并导致 NPE。

做什么实际上是特定于案例的，并且取决于您的应用程序做什么。无论如何，确保`Integer.valueOf()`不返回`null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T07:22:32.210

如果你正在设置

```
setRetainInstance(true) 
```

在您的 Fragment 内部或从 Activity 设置它：

```
myFragment.setRetainInstance(true): 
```

然后 Bundle 从`onSaveInstanceState()`to传递`onCreate()`并且`onCreateView()`将为 null，即使您在`onSaveInstanceState()`.

看到这个答案：[我如何用 setRetainInstance(true) 打破片段并将它们添加到后台堆栈？](https://stackoverflow.com/questions/13420448/how-i-can-break-things-with-fragments-with-setretaininstancetrue-and-adding-th/13773496#13773496)

# objective-c - 在基于视图的应用程序中将字符串从数组显示到 UITableView

> ID：14008627
> 
> 赞同：1
> 
> 时间：2012-12-23T04:32:14.200
> 
> 标签：objective-c, uitableview

嘿，我已经在互联网和这个网站上寻找了几个小时，但没有任何东西可以解决我的问题。我对 iPhone 编程很陌生，所以如果这个问题看起来太笨拙，我很抱歉。我正在尝试将 UITableView 添加到我的主视图控制器（基于视图的应用程序的一部分）中，然后用数组（我已经设置）中的字符串填充其单元格。我尝试从基于默认导航的应用程序中剪切和粘贴代码，但这不起作用，因为基于视图的应用程序不知道如何对代码做出反应。我的问题是我应该如何用我制作的数组填充表格（我拖到 xib 中）？任何帮助是极大的赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T04:39:30.990

在 SomeSubclassOfUITableViewController.m

首先，实现委托方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return [_myStrings count];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
} 
```

然后分配标题/副标题/等。

```
- (UITableViewCell *)tableView:(UITableView *)tableViewcellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *identifier = @"TableCellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    if (!cell) {
        cell = [[UITableViewCell alloc]
                 initWithStyle:UITableViewCellStyleDefault
                 reuseIdentifier:identifier];
    }

    cell.textLabel.text = _myStrings[indexPath.row];
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T04:43:50.603

只是想提一下，Apple 有一个很棒的教程，涵盖了 UITableViews 和其他一些基础知识。因此，如果您无法理解 John 发布的代码，请查看：[您的第二个 iOS 应用](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1)

（我打算将此添加为评论，但我还不够出色）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T05:23:59.667

UITableView 使用委托，当您第一次开始在 Objective-C 和 iOS 中编码时，这可能会很棘手。

[斯坦福大学计算机科学教授 Paul Hagerty在 iTunes U 上](https://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255?mt=10)提供了一个关于 iOS 和 Objective-C 编程的精彩系列讲座。

第 9 讲涵盖了 UITableViews 的基础知识。

# php - 使用 php 加载图像而不是直接访问

> ID：14008628
> 
> 赞同：-4
> 
> 时间：2012-12-23T04:32:18.527
> 
> 标签：php, image

我想使用 PHP 在我的网页中显示图像，而不是像 'images/pic.jpg' 这样的直接 src。

但我对此一无所知。

你能帮我吗？

我需要 php 脚本。请停止投票。

编辑：

这是我尝试过的：

```
header('Content-Type: image/jpg');
readfile($imgsrc); 
```

由于有人关闭了这个问题，我不得不说我接受并尝试过的答案是正确的，问题是 open_basedir 和文件权限。

现在问题解决了。

但它输出错误'图像无法显示，因为它包含错误'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:34:44.127

您需要使用[readfile：](http://php.net/manual/en/function.readfile.php)

```
 function user_files($file_name = "")
    {
        // Check file_name is valid and only contains valid chars
        if ((preg_match('^[A-Za-z0-9]{1,32}+[.]{1}[A-Za-z]{3,4}$^', $file_name)) 
        {
               header('Content-Type: '.get_mime_by_extension(YOUR_PATH.$file_name)));
               readfile(YOUR_PATH.$file_name);
        }
    } 
```

目录遍历等存在一些问题 - 所以你需要先检查 $file_name ，就像我使用 preg_match 一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:36:03.597

将您的图像放到 HTTP 协议无法访问的本地目录（在服务器上）。

然后创建一个简单的 PHP 脚本，它将文件名作为参数（或任何其他标识要加载的图像）并返回图像而不是本身。我的意思是像[http://www.server.com/imagescript.php?filename.jpg](http://www.server.com/imagescript.php?filename.jpg)

这非常简单，你应该可以自己做。或者指定更多细节，你的问题到底是什么。

# linux - 别名未出现在 bash 历史记录中

> ID：14008633
> 
> 赞同：4
> 
> 时间：2012-12-23T04:34:33.937
> 
> 标签：linux, bash, history, alias

HISTIGNORE 变量设置为：

```
export HISTIGNORE="&:ls*:reboot:pwd:exit:clear:[ \t]*" 
```

我有几个别名集。其中之一是

```
alias todo='emacs ~/Dropbox/Documents/todo.txt' 
```

他们都没有出现在历史上。不是我想让他们出现在历史上，而是让我感到困惑的是，为什么他们没有出现在历史上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T04:40:59.573

在 bash 中，序列`\t`仅表示`$'...'`. 这就是为什么您的模式与您的`todo`命令匹配的原因；它匹配任何以`t`.

你可以像这样修复它：

```
tab=$'\t'
export HISTIGNORE="&:ls*:reboot:pwd:exit:clear:[ $tab]*"
unset tab 
```

# java - LWJGL 可以与 Graphics2D 一起使用吗？

> ID：14008635
> 
> 赞同：1
> 
> 时间：2012-12-23T04:34:53.127
> 
> 标签：java, opengl, rendering, lwjgl, graphics2d

我的游戏目前使用 Graphics2D 进行大量绘图和文本渲染，但我想使用 LWJGL 中提供的一些功能，比如`GL11.glBegin(...)`制作自定义形状，也许还可以使用一些很酷的纹理功能。

是否有可能做到这一点？如果是这样，我需要从 LWJGL 添加哪些代码才能使其功能与我已有的功能一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:33:01.113

可以这样做，但这不是一个简单的方法。Graphics2D 是 Java 绘图 API 的一部分，而 LWJGL 只是 OpenGL API 的 Java 包装器。我的意思是，归根结底，OpenGL 期望输入是顶点和在 GPU 上组装成三角形的索引。过去我已经编写了几个工具来将矢量图形转换为多边形，所以这基本上是你可以做的：

1）将 Graphics2D 形状路径记录为数据结构。然后将它们转换为必须连续的多边形轮廓点集（数组）。例如，如果您的 2d 形状由 2 条直线边缘和 2 条贝塞尔线组成，您可以记录直线的起点/终点，并使用[此](http://en.wikipedia.org/wiki/Bernstein_polynomial)方法将贝塞尔曲线分解为线段（直线）。为什么您需要将其全部设为线段？因为稍后，您将对这些多边形进行三角剖分。

2）下一部分是对您在前一阶段创建的多边形集进行三角剖分。在这里您可以使用许多三角剖分库之一： [Poly2Tri](http://code.google.com/p/poly2tri/) - 是一个强大的库，还具有 Java 端口，可以对凸多边形集和凹多边形集进行三角剖分。还处理孔。如果您使用旧的（固定的）OpenGL 管道，另一种选择是使用 Glu Tessellator。在这种情况下，您甚至不需要寻找任何外部库，因为 glu 是 LWJGL API 的一部分。

基本上这就是你所需要的。但这确实是一个非常原始的设置。例如，在 GPU 上渲染 2D 图形时普遍存在的问题之一是共面表面。所以如果你有深度缓冲区和几个共面您将获得[“Z-fighting”工件的](http://en.wikipedia.org/wiki/Z-fighting)平面飞机。要解决此问题，您应该禁用深度写入（这不太可能在 3d 引擎中执行），或者使用模板测试（有更多关于深度/颜色的 hack写乒乓球，但它很复杂）。但是另一个更“几何方法”的选项是在对重叠的多边形进行三角剖分之前在重叠的多边形之间进行多边形裁剪操作。在这里你可以使用像[Polygon Clipper](http://www.angusj.com/delphi/clipper.php)这样的库。

所以，正如你所看到的，你想要做的不是几分钟的事情，而且还有更多的挑战，比如性能、几何和 uv 映射问题等。但它绝对是可行的。

# c++ - C ++读取/写入长值到二进制文件

> ID：14008636
> 
> 赞同：1
> 
> 时间：2012-12-23T04:35:03.873
> 
> 标签：c++, fstream

我正在尝试使用 fstream 读取一个 long 数组并将其写入二进制文件。我将数组定义如下：

```
#define MAX_SUB_BUCKETS 27    
unsigned long origin[MAX_SUB_BUCKETS];
unsigned long nextAvail[MAX_SUB_BUCKETS];
fstream fh; 
```

我打开文件并尝试以下操作：

```
fh.open(fileName.c_str(), fstream::in | fstream::out | fstream::binary);
if (fh.fail()) {
         // create new file here and write all zeroes to it (plus header)
} else {
          fh.seekg (0, ios::beg);
          for (i=0;i<MAX_SUB_BUCKETS;i++) {
                     fh.read(origin[i],sizeof(long));               
          }
          for (i=0;i<MAX_SUB_BUCKETS;i++) {
                     fh.read (nextAvail[i],sizeof(long));
          }
} 
```

编译器抱怨以下错误：

```
tld.hh:39: error: invalid conversion from 'long unsigned int' to 'char*'
tld.hh:39: error:   initializing argument 1 of 'std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::read(_CharT*, std::streamsize) [with _CharT = char, _Traits = std::char_traits<char>]'
tld.hh:42: error: invalid conversion from 'long unsigned int' to 'char*'
tld.hh:42: error:   initializing argument 1 of 'std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::read(_CharT*, std::streamsize) [with _CharT = char, _Traits = std::char_traits<char>]'
tld.hh:45: error: invalid conversion from 'void*' to 'char*'
tld.hh:45: error:   initializing argument 1 of 'std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::read(_CharT*, std::streamsize) [with _CharT = char, _Traits = std::char_traits<char>]' 
```

第 39 行是第一个 fh.read() 调用。不知道我在这里做错了什么（除了我对这些事情的基本知识缺乏）。我也确信可能有一种方法可以在单个语句而不是循环中读取整个 origin 或 nextAvail 数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:39:22.240

从错误来看，您似乎正在尝试对在s 上运行的流*执行*`read`a with s。你可以尝试这样的事情：`unsigned long`*`char`*

 *```
fh.read( reinterpret_cast< char* >( &origin[i] ), sizeof( long ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:47:42.820

由于二进制文件是字节数组，因此您需要编写一些例程，将要存储在文件中的数据转换为某种特定格式的字节数组。要读回它们，您需要编写一个例程，从文件中读取字节数组并将它们转换为您希望它们采用的任何形式。

本质上，您需要编写序列化（结构化数据到一堆字节）和反序列化（一堆字节到结构化数据）例程。您可能希望使用 XML 或 JSON（甚至原始文本）之类的格式，因为它们非常容易理解，并且可以广泛使用与这些格式相互转换的库。*

# scripting - Sun Solaris 变量不保值

> ID：14008639
> 
> 赞同：1
> 
> 时间：2012-12-23T04:35:26.950
> 
> 标签：scripting, solaris, sun

我正面临一个奇怪的问题。已经两天了，我尝试了很多东西，但没有成功。

在 sun solaris 上，我编写了一个脚本，它将检查系统的总物理内存，然后将其分配给一个变量，然后将值写入一个文件。现在，当我手动运行脚本时，变量已正确写入文件。但是如果我把脚本放在 cron 上，什么都不会发生。该文件创建正常，但没有写入任何值。我已经尝试过 printf 和 echo，如果从提示符运行但不能从 cron 运行，它们都可以工作。Printf 不向文件写入任何内容， echo 写入空行。以下是片段：

```
#!/bin/bash
total_mem=`prtconf | head -3 |grep Mem | awk -F" " '{print $3}'`
printf $total_mem >> test.txt
####i have tried echo as well
#/usr/bin/echo $total_mem >> test.txt 
```

请帮忙。

# mysql - 如何使用 MySQL 视图和 ORDER BY 子句？

> ID：14008643
> 
> 赞同：1
> 
> 时间：2012-12-23T04:37:10.910
> 
> 标签：mysql, sql-order-by

问题 #1 - 如何创建 table1 的视图，如果 table2 中存在表中的某个字段，则从视图中排除该记录？

问题 #2 - 如何按表 1 中的 id 以 DESC 顺序对结果进行排序。

```
SELECT table1.source_id
FROM table1
WHERE table1.source_id NOT IN (SELECT table2.source_id from table2)
ORDER BY table1.source_id DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:27:53.890

我建议您使用“反加入”模式。这是一个 LEFT JOIN，其谓词排除任何匹配的行，

```
SELECT t1.source_id
  FROM table1 t1
  LEFT JOIN table2 t2
    ON t2.source_id = t1.source_id 
 WHERE t2.source_id IS NULL
 ORDER
    BY t1.source_id DESC 
```

（如果 table1 和 table2 上都有索引且前导列为 source_id，则此语句的性能最佳。）

另一种选择是使用 NOT EXISTS 谓词

```
SELECT t1.source_id
  FROM table1 t1
 WHERE NOT EXISTS 
       ( SELECT 1
           FROM table2 t2
          WHERE t2.source_id = t1.source_id
       )
 ORDER
    BY t1.source_id DESC 
```

（MySQL 优化器也可以将其作为“反连接”运行，而不是作为依赖子查询；您需要检查 EXPLAIN 的输出以进行验证。）

在大型集合上，其中任何一个都将比包含派生表的查询（例如带有`NOT IN (subquery)`谓词的查询）执行得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T04:51:47.327

我不知道，你在说什么，但从你的问题我得出结论。假设`A`and`B`是两个表，它们的公共字段是`fee_id`。然后试试这个。

`select a.name,b.fee_id from A a,B a where a.fee_id=b.fee_id`

上面的查询将通过签`fee_id`入两个表来返回两个表中的所有数据。

现在，正如您所说，您需要`ORDER BY`. 然后，做类似的事情。

`select a.name,b.fee_id from A a,B a where a.fee_id=b.fee_id ORDER BY a.name DESC`

如果您想`DESC`按姓名顺序显示您的信息。

**更新**

**如何创建视图**

`create view viewname as (select * from table1)`

**第一个问题的解决方案**

假设`name`字段在两个表之间是通用的，并且您希望该视图中的那些记录在两个表中都是**唯一**的。我的意思是，如果`table1`有一个记录，但相同的记录不存在`table2`

`create view viewname as (select * from table2 UNION (select * from table1 where name not in(select name from table2)))`

**例子 ：**

```
NAME |                    NAME |
-------------            ----------------
ABC  |                   ABC   |
CDF  |                   GHI   |

It will return 

NAME |                    
-------------            
ABC  |                   
CDF  |     
GHI  | 
```

**第二题的解答**

您在问题中提供了此查询。而且，我不觉得有什么不对。

```
SELECT source_id
FROM table1
WHERE source_id NOT IN (SELECT source_id from table2)
ORDER BY source_id DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T04:39:32.910

使用(implicit distinct) or`LEFT JOIN`来获取在表和表`fee_source`中都找不到的那些，然后你可以在它的末尾放置一个子句，如下所示：`a_aif``a_proxy``UNION``UNION ALL``ORDER BY`

```
SELECT *
FROM
(
    SELECT a_aif.fee_source_id source_id
    FROM a_aif 
    left JOIN a_fees ON a_fees.fee_source = a_aif.fee_source_id 
    WHERE a_fees.fee_source IS NULL
    UNION ALL
    SELECT a_proxy.fee_source_id
    FROM a_proxy
    left JOIN a_fees ON a_fees.fee_source = a_proxy.fee_source_id
    WHERE a_fees.fee_source IS NULL
) t
ORDER BY source_id DESC; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/9a79b/6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-19T16:12:21.150

我曾经`OFFSET 0 ROWS`强制`order by`从句

```
select count(*) from (
select column_name 
from table_A
order by column_name OFFSET 0 ROWS) abc 
```

# android - android 4.0 webview 找不到标签

> ID：14008645
> 
> 赞同：1
> 
> 时间：2012-12-23T04:37:44.003
> 
> 标签：android, webkit, android-webview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:40:57.353

您缺少围绕属性的引号。像这样更正它：

```
<DIV style="Z-INDEX: 38; POSITION: absolute; WIDTH: 1px; HEIGHT: 1px; TOP: 309px; LEFT: 431px" id="GuangBo1">
 <A onmouseover="showdiv(this.parentNode);" 
   onmouseout="closediv(this.parentNode);" 
   href="app://localhost/broadcast.do">
   <IMG src="imgs/bk.gif" width="100%" height="100%">
 </A>
</DIV> 
```

此外，我在“showdiv”和“closediv”函数中修改了一些代码，因为发送给它们的变量是注释声明的。我添加的应该是将 ID 为“GuanBo1”的 div 传递给函数。

# xcode4.5 - 将自定义字体添加到 iphone 应用程序会提供 EXC_Bad_Access CFDictionaryRemoveValue

> ID：14008649
> 
> 赞同：0
> 
> 时间：2012-12-23T04:38:33.877
> 
> 标签：xcode4.5, ios5, uifont, custom-font, info-plist

我一直在向我的项目添加自定义字体，并且知道通常的清单。但最近我尝试使用文件名 ARIALUNI.TTF 添加“Arial Unicode MS”字体，但是当我在“应用程序提供的字体”下将文件名添加到我的 infoplist 时，它会以`CFDictionaryRemoveValue`.

我尝试将 .TTF 更改为 .ttf，检查目标和构建阶段，一切正常。在运行应用程序时，它甚至没有到达 appdelegate 方法并崩溃。对于我尝试添加的任何其他字体，它都可以正常工作。

**字体背景**：ArialUni 字体是付费字体，但我已经从 adobe PS 中提取了它，甚至下载了字体以确保但无济于事。当我通过从 xcode 首选项更改 xcode 字体来更改它时，它工作正常。字体文件非常大，只有 23mb。

谁能指出我正确的方向？

**编辑** 调试器不喷出任何东西，如果我从 plist 中的“应用程序提供的字体”中删除密钥，崩溃就会消失。

![堆栈跟踪](../Images/6f5652dc8e45195931290d75e1f1750b.png)

**编辑 2**在 SO 上 找到[了这个。](https://stackoverflow.com/questions/8727710/adding-a-uifont-and-looking-for-the-fontfamily-crashes-with-exc-bad-access?rq=1)所以 Arial Unicode MS 属于现有的 Arial 字体家族。这是否意味着我不能向现有系列添加新字体？

![全栈](../Images/967eb2bc44324e949c6c36ba83d79ca9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T13:04:20.167

我向 Apple 提出了支持票，他们已确认 iOS 不支持此字体。某些字符尚未在 iPhone 上呈现，因此会崩溃。将来可能会支持它，但现在我们不能使用这种字体。

# html - 使元素保持在同一位置而不换行

> ID：14008650
> 
> 赞同：0
> 
> 时间：2012-12-23T04:39:13.300
> 
> 标签：html, css, word-wrap

在此先感谢您的帮助。我创建了一个导航栏，其中包含社交小部件和页面链接。我希望该列表中的单词和社交小部件保持在同一位置，而不是在浏览器调整大小或放大时换行。您可以在此处参考 JSfiddle。[http://jsfiddle.net/kadeemlaurie/KGwWV/](http://jsfiddle.net/kadeemlaurie/KGwWV/)

这是 HTML：

```
 <div id="header-menu-wrap"> 
 <div id="header-menu">
 <div id="header-menu-items">
 <span class="menu-item-fake"></span>

  <a class="menu-item active" href="/">
   <span class="mi-wrap">
    <span class="hmi-label">+Home</span>  
     <span class="mi-arrow"></span></span></a>

  <a class="menu-item active" href="/">
   <span class="mi-wrap">
    <span class="hmi-label">Blog</span>  
     <span class="mi-arrow"></span>
      </span>
       </a>

  <div class="menu-item">
   <span class="mi-wrap">
    <span class="home-icon" data-icon="D"></span>
    <span class="hmi-label">Events</span>  
    <span class="mi-arrow"></span></span>

  <div class="submenu-item">
   <div class="submenu-content">
    <span class="submenu-hit-area"></span>
    <canvas class="submenu-triangle" width="20" height="11"></canvas>
    <ul class="drop-menu-list">

  <li>
   <a class="parent-category-lnk" href="/category/css">Maison X IESOGEN</a>
    </li>
     </ul>
      </div></div></div>

  <a class="menu-item" href="/category/freebies">
   <span class="mi-wrap">
    <span class="home-icon" data-icon="o"></span>
     <span class="hmi-label">About</span></span>
      </a>

 <span class="menu-item-fake"></span></div></form></div>      

  <div id="header-socials">
   <span id="share-post-label">Share: </span>
    <span class="fb-home-btn" style="width: 80px;">

  <a class="fb-stub" href="#" target="_blank" 
   data-shares="100" send="false" layout="button_count" width="70"  
   show_faces="true">Like

 <span class="fb-stub-arr"></span></a></span>
 <span class="twitter-home-btn">

 <a data-shares="90" class="tw-stub" style="margin-right:45px" href="#"     
 target="_blank">Tweet>

 <span class="tw-stub-ico"></span> <span class="tw-stub-arr"></span></a></span>
 </div></div> 
```

这是CSS：

```
 margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 0px
    }

    .rounded{
      -moz-border-radius: 4px; /* Firefox */
      -webkit-border-radius: 4px; /* Safari, Chrome */
      border-radius: 4px; /* CSS3 */
      behavior: url(border-radius.htc);}

    .border{border:solid px;}
    .dark{border-color:#000;}
    .olive{background-color:#fff;}

    html, body, div, span, applet, object, iframe,
    h1, h2,fo h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, font, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td, tr {

     margin: 0;
     padding: 0;
     border: none;
     outline: 0;
     font-size: 100%;
     vertical-align: baseline;
     background: transparent;
     text-decoration: none;}

    body {font-family:Helvetica, Arial, sans-serif; color:#000; 
    font-size:13px; position:absolute; width:100%; left:0; top:0; min-height:100%;
    line-height: 16px;
    background:#232323;}

    h1{ font-size:13px;  font-weight:bold; font-family: 'Arial', 'helvetica' 'sans-serif';}

    #header-socials { float:right; margin:9px 160px 0 0 ;}
    #share-post-label { height:auto;  margin:0px 5px 0 0; position:relative; top:2px; } 
    #header-socials span {vertical-align:middle; display:inline-block;        
    height:21px;color:fff;}

    #nav-bar-close-link { position:absolute;  
    top:8px; right:20px; 
    font-size:28px; text-decoration:none;
    line-height:28px;
    display:none;
    color:#666;}

    #nav-bar-close-link:hover {text-decoration:none; color:#999;}

    #header-wrap {height:302px; }
    #header-menu-wrap {background: #232323; height:30px;  position:fixed; z-index:20;   
    width:100%; font-family:Arial, Helvetica, sans-serif; font-size:12px;}

    #header-menu-wrap:hover {overflow:visible;} #header-menu {margin:0 auto; 
    max-width:1284px; font-weight:bold; font-size:13px; font-family:Arial, Helvetica, 
    sans-serif;}

    .header-menu-section { position:relative; margin-right:20px; height:30px;       
    display:block; float:left; text-align:center; /*border-right:1px solid #999;*/
    z-index:7;}

    #main-menu-select { display:none;}
    #mbl-wrap { display:none;}
    #header-menu-items {margin: -4 0 0 121;}
    #header-menu .menu-item:hover {text-decoration:none;  }

    #header-menu .menu-item:hover .mi-wrap{
    text-decoration:none;
    color:#fff;     font-family:Arial, Helvetica, sans-serif;}

    #header-menu .menu-item, .menu-item-fake {
    display: inline-block; height:30px; padding:0px 15px; float:left;
    color: #ccc; position:relative; z-index:auto;}

   .submenu-item {position:absolute; top:-9999px; left:0px; z-index:1;}

    a.parent-category-lnk {color:#ccc; font-size:14px; display:block;  padding:8px 20px; 
    white-space:nowrap;}
   .submenu-item li { display:block; border-bottom:1px solid #4C4C4C; }
   .submenu-item li:last-child { border:none;}
   .submenu-item li:hover { background:#4C4C4C; text-shadow: 0 -1px 1px black;}

   .mi-wrap {
    vertical-align:middle;
    text-decoration: none;
    position:relative; 
    z-index:auto;
    top:10px;    font-family:Arial, Helvetica, sans-serif;
    color:#ccc; text-shadow: 0 -1px 1px #000;}

    .mi-arrow { font-size:8px; vertical-align:middle; position:relative; top:0px;}

    .menu-item-fake:first-child {border-left:none; padding:0;}
    .menu-item-fake:last-child {border-right:none;  padding-right:0;}

    #md-deal-wdd-block #md-large-widget-content, #md-deal-wdd-block {text-align:center;     
    position:relative;}

    #header-content-wrap {margin:0 auto; height:108px;  position:relative; background: 
    url(http://netdna.webdesignerdepot.com/themes/wdd_new/css-images/head-tile.png);}
    #header-content {position:relative; z-index:2;
    margin: 0 auto;
    width: 1140px;}

    #header-socials #___plusone_0{ width:70px !important; }
#header-socials .fb-home-btn { margin-right:5px;}

@media screen and (max-width: 878px)  {
  #header-socials {display:none;}
}

@media screen and (max-width: 1376px)  {
  #top_link { display:none !important;}
  #nav-bar-close-link { right:5px;}
}

@media screen and (max-width: 1342px)  {
 #nav-bar-close-link { display:none !important;}
}

@media screen and (max-width: 1164px)  {
  #nav-bar-close-link { display:none !important;}
}

@media screen and (max-width: 620px) {
#header-wrap { /*height:100px;*/ height:55px; position:relative; width:100%; overflow:hidden;}

   #header-menu { text-align:center;}

    #header-menu-items { display:none;}

}

 /* SOCIAL WIDGETS STUBS */
.fb-stub {

-webkit-border-radius: 3px;
border: 1px solid #CAD4E7;
cursor: pointer;
white-space: nowrap;
color: #3B5998 !important;
padding: 1px 5px 1px 20px;
display: inline-block;
font-size:11px;
font-family: 'lucida grande',tahoma,verdana,arial,sans-serif;
font-weight:normal !important;
background:#ECEEF5 url('http://static.ak.fbcdn.net/rsrc.php/v2/yI/x/1dQf_ATK831.png') no-repeat 4px 2px;
position: relative;
margin-right:28px;
}    

.fb-stub:hover { border-color:#9DACCE; text-decoration: none !important;}

.fb-stub::before, .tw-stub::before {
  content: attr(data-shares);
  background: white;
  border: 1px solid #C1C1C1;
  color:#333 !important;
  display: inline-block;
  height: 14px;
  line-height: 14px;
  margin-left: 6px;
  min-width: 15px;
  padding: 1px 2px;
  text-align: center;
  white-space: nowrap;
  position: absolute;
  top:0;
  left:100%;
  cursor:default;
}   

.fb-stub-arr, .tw-stub-arr {
border-collapse: collapse;
 border-spacing: 0;

 position: absolute;
 border-color: transparent #D7D7D7 transparent;
 border-style: solid;
 border-width: 4px 5px 4px 0;
 display: block;
 top:5px; left:100%;

 margin-left:2px;
 height:0px !important;

}

.tw-stub-arr::after,
.fb-stub-arr::after{
  content:'';
 border-color: transparent #D7D7D7 transparent;
 border-right-color: white;
border-style: solid;
border-width: 4px 5px 4px 0;
display: block;
position: absolute;
left:2px;
top:-4px;
}

.tw-stub {
  margin-right: 20px;
  max-width: 100%;
  display: -moz-inline-stack;
  display: inline-block;
  vertical-align: bottom;
  zoom: 1;
  white-space: nowrap;
  text-align: left;

  position: relative;
background-color: #F8F8F8;
background-image: -webkit-gradient(linear,left top,left bottom,from(white),to(#DEDEDE));
background-image: -moz-linear-gradient(top,white,#DEDEDE);
background-image: -o-linear-gradient(top,white,#DEDEDE);
background-image: -ms-linear-gradient(top,white,#DEDEDE);
background-image: linear-gradient(top,white,#DEDEDE);
border: #CCC solid 1px;
-moz-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;

text-shadow: 0 1px 0 rgba(255, 255, 255, .5);
-webkit-user-select: none;
-moz-user-select: none;
-o-user-select: none;
user-select: none;
cursor: pointer;

font: normal normal normal 11px/18px 'Helvetica Neue',Arial,sans-serif;
color: #333;
font-weight: bold;
padding:0px 5px 0px 20px;

}

.tw-stub:hover, .tw-stub:active {
  text-decoration: none !important;
border-color: #BBB;
background-color: #F8F8F8;
background-image: -webkit-gradient(linear,left top,left bottom,from(#F8F8F8),to(#D9D9D9));
background-image: -moz-linear-gradient(top,#F8F8F8,#D9D9D9);
background-image: -o-linear-gradient(top,#F8F8F8,#D9D9D9);
background-image: -ms-linear-gradient(top,#F8F8F8,#D9D9D9);
background-image: linear-gradient(top,#F8F8F8,#D9D9D9);
-webkit-box-shadow: none;
-moz-box-shadow: none;
box-shadow: none;}

.tw-stub::before{
background: white;
border: #BBB solid 1px;
-moz-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;
min-width: 8px;
font-weight: normal;
}

.twitter-btn-wrap .tw-stub::before { display:none;}
.twitter-btn-wrap .tw-stub {margin-right:0;} 

.tw-stub-ico{
  width:16px; height:13px;
  position: absolute;
  top:50%;
  margin-top:-5px;
  left:2px;
  background: url('http://platform.twitter.com/widgets/images/btn.27237bab4db188ca749164efd38861b0.png') no-repeat 0px 0px;
}

/*one column here*/

#container
{
    margin: auto;
    width: 75%;
    background:#fff;
    height:900;
}

#header
{
    background:#fff;
    padding: 10px;
}

#header h1 { margin: 0; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:51:20.797

使用`inline-block`：

```
.cntranav ul{
  white-space: nowrap;    
}

.cntranav li{
  display: inline-block;
} 
```

[演示](http://jsfiddle.net/KGwWV/1/)

或添加`overflow: hidden`到`ul`. 请注意，使用这种技术，不适合的元素会消失而不是显示一半。

[演示](http://jsfiddle.net/KGwWV/2/)

但是，我也不推荐。允许包装或使用`@media`查询以确保导航始终可见，无论视口多小。

# php - 在 PHP 中保护上传的文件

> ID：14008652
> 
> 赞同：0
> 
> 时间：2012-12-23T04:39:20.217
> 
> 标签：php, security, code-access-security

我有一个包含用户登录和会话的站点。我想允许我的用户将文件上传到网络服务器，但只有他们可用于登录。

我知道如果我上传到某种公共网络目录，该文件仍然可以通过以下方式访问：

[http://www.mydomain.com/files/thefile.pdf](http://www.mydomain.com/files/thefile.pdf)

但是，我想我可以将文件存储在我的公共 HTML 根目录上方的目录中（比如 /mnt/content/web/html）。

因此，我可以创建一个名为 (/mnt/content/web/uniqueidfortheuser) 的目录并将我的文件存储在那里，然后通过 PHP 使用以下语法引用文件：

(../uniqueidfortheuser/thefile.pdf)。

我的问题 - 这足够安全还是我忽略了什么？uniqueidfortheuser 的名称将存储在数据库中，用户不知道，他们必须有一个有效的会话才能访问其文件夹的唯一名称。而且我认为他们无法从网络调用文件夹中的任何文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:42:41.963

更好的是 - 当用户上传文件时，包括文件的 user_ID。然后，当您尝试检索文件时，请确保它属于用户。

因此，即使他们猜到另一个文件 - 也没关系！

您需要使用[readfile：](http://php.net/manual/en/function.readfile.php)

```
 function user_files($file_name = "")
    {
        // Check user is logged in
        if ($user->logged_in())
        {
           // Check file_name is valid and only contains valid chars
           if ((preg_match('^[A-Za-z0-9]{1,32}+[.]{1}[A-Za-z]{3,4}$^', $file_name)) 
           {
               // Now check file belongs to user - PSUEDOCODE
               if ($filename == $user->records)
               {
                   header('Content-Type: '.get_mime_by_extension(YOUR_PATH.$file_name)));
                   readfile(YOUR_PATH.$file_name);
               } else {
                   echo 'You do not have access to this file';
                }
           }
        }
    } 
```

目录遍历等存在一些问题 - 所以你需要先检查 $file_name ，就像我使用 preg_match 一样

# c++ - C++ - 使用有什么意义吗 代替

> ID：14008654
> 
> 赞同：2
> 
> 时间：2012-12-23T04:39:22.707
> 
> 标签：c++, class, templates, types, typename

> **可能重复：**
> [模板中关键字“typename”和“class”的 C++ 差异](https://stackoverflow.com/questions/2023977/c-difference-of-keywords-typename-and-class-in-templates)

使用是否有任何要点/优势：

```
<class T> 
```

相对于：

```
<typename T> 
```

在 C++ 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T04:42:06.140

没有区别。两者可以互换使用。

# python - 将 Numpy ND 数组插入 MySQL 表

> ID：14008657
> 
> 赞同：-2
> 
> 时间：2012-12-23T04:39:50.327
> 
> 标签：python, numpy

我是 Python 新手，我有一个名为 full 的 ND numpy 数组。它的结构是这样的：

```
-------------------
id  |  url  |  date
-------------------
 1     url1    date1
 2     url2    date2
 3     url3    date3 
```

它继续（最多300行）..我想将此数组插入到具有这三列（即id，url，date）的mysql数据库表中。我听说有一个 Python 的 MySQLdb 库，我可以通过它来完成它..但不知道如何使用它。请帮忙。

使用以下代码构造数组：

```
with open("samples.txt") as f:
    url = f.readlines()
    f.close
url = map(lambda s: s.strip(), url)

import numpy

url = numpy.array(url)   #url array 1D

dates_array = numpy.loadtxt("m_dates.txt") #dates array 1D

id_array = numpy.arange(0, (len(content)), 1)   #ID array 1D

full = numpy.vstack([id_array, content])
full = full.T 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:24:49.330

通过查看您的编辑，它看​​起来应该有效：

```
In [6]: full = np.vstack(([1,'a','b'],[2,'c','d'],[3,'e','f']))

In [7]: full
Out[7]: 
array([['1', 'a', 'b'],
       ['2', 'c', 'd'],
       ['3', 'e', 'f']], 
      dtype='|S1')

In [8]: for a,b,c in full:
   ...: print a,b,c
   ...: 
1 a b
2 c d
3 e f 
```

您只需要将 print 语句替换为您想要使用的任何 sql 命令。

# jquery - 在通过 jQuery 加载图像时显示加载图像

> ID：14008659
> 
> 赞同：0
> 
> 时间：2012-12-23T04:40:02.020
> 
> 标签：jquery, gd

我有这个 javascript

```
$(function() {
    $('button').click(function() {         
        $('#imgText').html('&lt;img src="imagecreator.php?param=' + $('input[name=username1]').val() + '"&param="'+ $('input[name=username2]').val() + '" /&gt;');
    });
});​ 
```

它从外部源加载 GD 图像，并返回它。它可能很慢，我不知道如何在加载外部图像时显示加载 gif。

有输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:49:36.397

尝试使用一些第三方的东西，比如我经常使用的那个：BlockUI ( [http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/) )，你只需要阻止作为你图像容器的元素，显示自定义加载 gif，并在该图像的加载事件中取消阻止它。

编辑：

可以在这里找到一个非常粗略的代码：http: [//jsfiddle.net/EfGTS/](http://jsfiddle.net/EfGTS/)，你需要花更多的时间来玩它来满足你的需要。

代码：

```
$(function() {
    $('input').click(function() {
        $('#theContainor').block({ 
            message: '<h1><img src="http://jimpunk.net/Loading/wp-content/uploads/loading45.gif" width="300px" height="300px"/>Just a moment...</h1>', 
            css: { height: '0px'} 
            }); 
        $('#theContainor').append('<img src="http://www.ptb.de/de/aktuelles/archiv/presseinfos/pi2011/bilder/20110228_thoron_big.jpg?seed=' + Math.random() +'" width="300px" onload="$(\'#theContainor\').unblock();"/>');
    });
});​ 
```

# php - PHP 通过 PDO 释放内存

> ID：14008660
> 
> 赞同：0
> 
> 时间：2012-12-23T04:40:22.933
> 
> 标签：php, mysql, memory, pdo

我想知道 mysqli 类中是否有任何方法可以在 a 之后释放内存`get_result()`，我看到人们使用`closeCursor()`方法，但编译器说：

```
Call to undefined method mysqli_stmt::closeCursor() 
```

我通过我准备好的语句对象这样调用它`$Statement->closeCursor();`

我看到 closeCursor 方法也关闭了与数据库的连接，这是否意味着如果我想进行另一个查询，我需要再次重新实例化 mysqli 类？如果是这样，有没有其他方法可以做同样的事情，但留下一个打开的连接？我只对释放 result_sets 留下的所有变量并正常启动另一个查询感兴趣，谢谢！

顺便说一句，我正在为我正在制作的自定义 mysql 备份系统做这个，干杯！- 埃德加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T04:52:15.057

`closeCursor()`不是 mysqli 语句方法。

您正在寻找的是[free_result](http://php.net/manual/en/mysqli-stmt.free-result.php)和[免费](http://php.net/manual/en/mysqli-result.free.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T04:51:47.923

我可以找到 closeCursor 的替代方法，您可以使用它来释放结果，而无需关闭连接。（此片段发布在评论部分的手册中）

```
<?php 
/** 
 * @param PDOStatement $oStm 
 */ 
public static function closeCursor($oStm) { 
    do $oStm->fetchAll(); 
    while ($oStm->nextRowSet()); 
} 
?> 
```

来自 PHP 手册[PDOStatement::closeCursor](http://php.net/manual/en/pdostatement.closecursor.php)

按照那里的手册

PDOStatement::closeCursor() 被实现为可选的驱动程序特定方法（允许最大效率），或者如果没有安装驱动程序特定功能，则作为通用 PDO 回退。PDO 通用回退在语义上与在 PHP 脚本中编写以下代码相同：

```
<?php
do {
    while ($stmt->fetch())
        ;
    if (!$stmt->nextRowset())
        break;
} while (true);
?> 
```

希望这可以帮助

# google-sheets - 将一个 google docs 电子表格链接到另一个

> ID：14008661
> 
> 赞同：21
> 
> 时间：2012-12-23T04:40:25.547
> 
> 标签：google-sheets, formulas

我在一个谷歌文档中有数据。称之为 docA。

我想在 docB 中引用这些数据。类似的东西`=docA!Sheet1!A2`

我怎么能做到这一点？我不介意更改安全设置等

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-23T06:46:58.677

首先转到要从 (docA) 导入数据的电子表格，并观察 URL 中提到的键的值（例如：[https ://docs.google.com/spreadsheet/ccc?key=ABC#gid= 0](https://docs.google.com/spreadsheet/ccc?key=ABC#gid=0)，在这种情况下，键是“ABC”）。

现在转到 docB 中的单元格并使用 importRange 函数导入数据。

=importRange(, !:)

例如：=importRange("ABC", "Sheet1!A1:B10")

如果您只想导入一个单元格：例如 =importRange("ABC", "Sheet1!A1");

如果您不提及工作表的名称，则使用第一张工作表。

# java - Java 如何决定何时导入？

> ID：14008664
> 
> 赞同：39
> 
> 时间：2012-12-23T04:40:59.417
> 
> 标签：java, class, import

为什么 Java 不需要导入 Integer、String 等类，而需要导入其他类？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-23T04:42:03.847

有一个隐式导入`java.lang.*`。

从[Java规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html)：

> 编译单元自动访问其包中声明的所有类型，并自动导入预定义包中声明的所有公共类型`java.lang`。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-23T04:41:55.193

`java.lang`默认导入包，无需显式导入。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-23T04:42:20.907

包中的类[`java.lang`](http://docs.oracle.com/javase/7/docs/api/java/lang/package-summary.html)不需要被导入（编译器的行为就像它们总是被导入一样）。这个包包括核心类，如 String、Enum、Runnable、NullPointerException，当然还有原始包装类，如 Integer 和 Double。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-23T04:42:14.550

因为，它们属于`java.lang.*`包。而且，它是由编译器隐式导入的。如果你这样做，那么它不会抱怨你。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-23T04:46:16.530

[java.lang](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/package-summary.html)是in-build，java中隐式导入，不需要手动导入

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-23T19:07:44.147

整数、字符串等类存在于默认导入的 java.lang 包中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-23T07:11:06.173

As it contains very frequently used classes, they have made it optional to import just for your convenience

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-23T18:53:45.537

java中的每个类都在一个包中，如果没有定义包，则将其理解为默认包。并且在包的顶部是 java.lang.* 所以我们不需要导入它来导入其他类。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-09T02:48:03.017

对于“java.lang 是唯一的一个自动导入包吗？”的问题。有两个包。

1.  java.lang
2.  未命名

你可以在这里查找更多信息。 [https://www.quora.com/Which-package-is-available-by-default-in-java](https://www.quora.com/Which-package-is-available-by-default-in-java)

# jquery - 如何拥有jquery事件的图像集？

> ID：14008671
> 
> 赞同：1
> 
> 时间：2012-12-23T04:42:51.383
> 
> 标签：jquery, html, css, frontend

所以我试图获取一张图片来触发一个 jquery Show 功能。我失败了，我尝试了很多东西都无济于事。jquery 文档对我没有帮助:(

这是 jquery，直接来自 W3C。这就是我现在要做的所有事情。

```
$(document).ready(function(){
  $("#regi").click(function(){
    $("#reg").show();
  });
}); 
```

这是我要显示的 HTML，它以可见性开始：隐藏；

```
<div id="reg">
  <image src = "../media/RegPage.png">
    <input type="text" name="usernameReg" value="email" STYLE="position: fixed; top: 175px; background-color: rgb(187,187,187); font-family: 'VT323', cursive;//#9cf;"/>
    <input type="password" name="pwrdReg" value="pass" STYLE="position: fixed; top: 195px; background-color: rgb(187,187,187); font-family: 'VT323', cursive;"/>
    <input type="password" name="VpwrdReg" value="pass" STYLE="position: fixed; top: 195px; background-color: rgb(187,187,187); font-family: 'VT323', cursive;"/>
</div> 
```

这是图像。我尝试将它用作按钮并更改按钮的图像，但没有任何运气。请帮忙。想要这样点击它会触发 jquery show 事件。

```
<image id="show" src="../media/Register.png" ></image> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:44:53.037

是什么`#regi`？

尝试将其更改为：

```
$(document).ready(function(){
  $("#show").click(function(){
    $("#reg").show();
  });
}); 
```

正如@undefined 所说，将您的`image`标签更改`img`为 HTML 中没有`<image/>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:44:56.963

HTML中没有`image`标签，你应该使用`img`标签并且它没有结束标签。

```
<img id="show" src="../media/Register.png" /> 
```

另请注意，`show`方法不显示具有`visibility: hidden`属性的元素，您应该`display: none`改用，或使用`css`方法：

```
$("#reg").css('visibility', 'visible'); 
```

# django - ForeignKey 很长的列表

> ID：14008674
> 
> 赞同：1
> 
> 时间：2012-12-23T04:43:50.117
> 
> 标签：django, django-models

我有一个模型叫Director，到现在我有200多个导演。

```
class Movie(models.Model):
    title = models.CharField(max_lenth=100)
    content = models.TextField()
    director = models.ForeignKey('Director')

class Director(models.Model):
    name = models.CharField('max_length=100) 
```

我有很多导演名单，但找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:59:23.773

您可以使用 ModelAdmin 上的 raw_id 字段，或[http://packages.python.org/django-extensions/admin_extensions.html](http://packages.python.org/django-extensions/admin_extensions.html)甚至使用[http://code.google.com/p/django-autocomplete/自动完成](http://code.google.com/p/django-autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:05:25.333

调用 ForeignKey 模型时去掉引号

```
class Movie(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    director = models.ForeignKey(Director) 
```

# inventory - 为销售点 (POS) 设计库存管理系统

> ID：14008676
> 
> 赞同：2
> 
> 时间：2012-12-23T04:44:32.583
> 
> 标签：inventory, point-of-sale, inventory-management

我想设计一个定制的库存管理系统。我以前没有设计类似东西的经验。由于该科目可以深入到会计和经济学的许多领域，作为一名程序员，如果不首先了解会计（一般而言并根据一个国家的法律）或管理的一些原则，我就无法提出一个完美的系统心智模型。查找有关经济方面的信息很容易。但是，我似乎找不到任何有关以电子方式设计此类系统的更多信息。有谁知道在哪里看？

**编辑：**我认为[这个问题](https://stackoverflow.com/questions/10037710/point-of-sale-and-inventory-database-schema "堆栈溢出问题")可能已经回答了我正在寻找的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T16:02:05.003

我会从 ADempiere 作为模型开始。它是一个开源 ERP，与会计和存储有很好的联系。您可以看到他们如何实施材料收货、库存移动、实物库存、周期盘点和运输......

你是对的，因为这个领域很深很广，与其他领域有很多联系。与批号管理、fifo、lifo 等有联系...

这是我写的关于 ADempiere 的评论。[http://www.chuckboecking.com/blog/bid/196464/ADempiere-Review-Open-Source-ERP](http://www.chuckboecking.com/blog/bid/196464/ADempiere-Review-Open-Source-ERP)。我相信这份文件会帮助你思考这个领域。如果您确实想将其用作模型，它还将帮助您了解如何使用 ADempiere。

祝你好运，我希望这会有所帮助！！

Chuck Boecking [www.chuckboecking.com](http://www.chuckboecking.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T09:02:56.790

我也会更喜欢 Adempiere。它有一个默认的 POS，但它不是很有效，但对于小型应用程序来说就足够了。

如果您根据您的要求自定义 Adempiere 中现有的 POS，那将是一个很好的 POS 应用程序。

在这里也可以将 POS 与会计链接，您可以像多种货币一样进行 POS 支付以及卡支付，这些细节也可以链接到会计。

为什么我如此自信地讲述这一点是因为我们已经使用 Adempiere 为大型超市开发了 POS，并且它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-15T08:26:39.083

在该问题中，**要求设计一个**考虑会计和经济部分的POS库存管理系统。 

通常，每个使用 POS 系统的库存管理系统都会显着简化零售业务的管理、简化日常业务任务、促进业务运营、降低成本和节省资金。 

要为会计 POS 设计和定制库存管理系统，您应该首先了解为会计和财务制定的法律。然后，您应该记下员工与管理层之间的日常活动中执行了哪些业务操作。 

考虑行业的各个方面，然后开始相应地进行定制。市场上有现成的软件，例如： 

```
• Accounting software 
• Manufacturing ERP systems 
• Retail management systems 
• Distribution ERP systems 
• Warehouse management system and more 
```

首先检查现成的软件及其功能，然后分析您需要添加哪些其他功能以完美满足客户的业务需求。如果您仍然对定制感到困惑并需要了解更多信息。您可以阅读文章 -**[为销售点 (POS) 设计库存管理系统](https://i-verve.com/blog/inventory-management-systems)**

# ruby-on-rails - 在 Rails 中重新创建 NPER

> ID：14008684
> 
> 赞同：0
> 
> 时间：2012-12-23T04:46:36.063
> 
> 标签：ruby-on-rails, ruby, math

对于下面的公式，我尝试将其重新创建为在我的一个模型中命名的方法`nper`。计算结果未达到预期（使用 Excel 中的 NPER 函数进行测试），我认为这是因为我编写方法的方式。

![在此处输入图像描述](../Images/a35ece82e80bc8621fd5a2fe51dc2d6d.png)

```
def nper(rate, pmt, pv, fv = 0, type = 0)
    a = pmt * (1 + rate * type) + (-1 / rate) * fv
    b = pv * rate + pmt * (1 + rate * type)
    c = Math.sqrt(a / b)
    d = Math.sqrt(1 + rate)
    e = (c / d) * 100
end 
```

我尝试先计算括号，然后使用模块中的平方根函数`Math`来帮助计算其余部分。我正在尝试计算抵押贷款的期限。我哪里错了？

要进行测试，请执行以下操作：

`nper(((3.5/100)/12), -561.31, 125000)`

应收益率：`~360`（30年固定贷款）

利率除以 100，然后除以 12，因为是**每个期间**`rate`的利率。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:28:41.440

使用`Math.log10()`，下面的公式就像一个魅力。我稍微修改了一下，所以我可以使用 pmt 的否定版本，并使用 type 和 fv（未来值）。

```
def nper(rate, pmt, pv, fv = 0, type = 0)
  Math.log10((pmt*(1+rate*type)+(-1/rate)*fv)/(pv*rate+pmt*(1+rate*type))) / Math.log10(1 + rate)
end 
```

参考：[MrExcel.com 论坛主题](http://www.mrexcel.com/forum/excel-questions/315095-nper-mathmatical-formula.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T16:16:05.640

有一个名为 Exonio 的 gem：[https](https://github.com/Noverde/exonio) ://github.com/Noverde/exonio它实现了一些 Excel 财务方法，包括`nper`：

```
Exonio.nper(0.07 / 12, -150, 8000) # ==> 64.07334877066185 
```**

# c# - 如何通过一个处理程序处理多个事件源

> ID：14008686
> 
> 赞同：4
> 
> 时间：2012-12-23T04:47:05.787
> 
> 标签：c#, .net, events, design-patterns

我坚持为我的问题提出一个干净的设计（下）。我已经考虑过发布/订阅或观察者模式，但我的问题似乎与这些方法相反，除非我没有正确思考。也许中介者模式会起作用，但由于某种原因，它对我来说仍然不太合适。所以，这里需要什么设计方面的帮助，请告诉我:)

我的问题是我需要一个可以处理来自多个来源的事件的处理程序。我需要一个可以管理来自多个地方的事件的热键管理器。IE。如果遇到按键，则应该执行一些操作。或者，如果按下麦克风（不同来源）上的按钮，则应该发生动作。

我目前的想法是将管理器实现为单例（不是这个的超级粉丝......），并在管理器中注册类。这些类需要实现一个接口，以保证管理器将附加到某个事件（当它们被注册时）。我只是不喜欢这样，因为班级需要引发这个事件，这不是合同本身所保证的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T05:23:34.257

您当前的想法听起来不错，但我会进行以下调整：

*   经理不需要单身；

*   事件源不需要向热键管理器注册自己，其他一些类（构建器）可以负责向管理器注册它们，这消除了源对管理器的依赖。

例如

```
public class HotKeyManager
{
    public void RegisterKeySource(IKeySource source)
    {
        source.OnKeyPress += this.KeyPressHandler;
    }

    public void KeyPressHandler(object sender, KeyPressEventArgs args)
    {
        // ...
    }

    // ...
}

public interface IKeySource
{
    event EventHandler<KeyPressEventArgs> OnKeyPress;

    // ...
} 
```

其他一些类处理源注册：

```
var hotKeyManager = new HotKeyManager();

var keySource = new MyKeySource(); // Implements IKeySource

hotKeyManager.RegisterKeySource(keySource); 
```

# ruby-on-rails - Ruby on Rails has_many 关系的活动记录/关系问题

> ID：14008688
> 
> 赞同：0
> 
> 时间：2012-12-23T04:47:53.483
> 
> 标签：ruby-on-rails, activerecord, has-many

我有两个模型：社区和金融。社区有许多财务。我正在创建一个包含社区信息以及最新财务信息的页面。我的问题是：我无法隔离最近财务的活动记录。

我的控制器代码如下所示：

```
@community=Community.find(params[:id])
@financial=Financial.where(params[:id => :community_id]).maximum("year") 
```

当我运行代码时，我得到的只是年份的固定数字，而不是完整的财务信息数组。

我整天都在为此苦苦挣扎，我猜答案真的很简单……在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:55:51.430

尝试这个：

`@financial=@community.financials.order("year desc").limit(1)`

我建议看看[Active Reord Query Interface](http://guides.rubyonrails.org/active_record_querying.html)。

# ruby-on-rails - Rails 3.0 使用来自 application_helper 的 sanitize 和 simple_format

> ID：14008695
> 
> 赞同：0
> 
> 时间：2012-12-23T04:50:24.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我看来，我想用安全的 html 标签`p` `i` `br`等呈现（和截断）一些段落，我使用以下代码：

```
- @last_testimony.each do |last_testimony|
  = sanitize(simple_format(truncate(last_testimony.description, :length => 25)), :tags => %w(p i br b)) 
```

它使用 html 标签呈现段落。

但是当我将该代码传递给我的 application_helper

```
def paragraph(text, length)
  "#{sanitize(simple_format(truncate(text, :length => length)), :tags => %w(p i br b))}"
end 
```

有了这个观点

```
- @last_testimony.each do |last_testimony|
  = paragraph(last_testimony.description, 10) 
```

它呈现

```
< p>My paragraph < /p> 
```

如何解决？有没有更好的方法来呈现带有安全标签的段落？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:29:16.777

一些方法来做到这一点：

1.

```
- @last_testimony.each do |last_testimony|
  = raw paragraph(last_testimony.description, 10) 
```

2.

```
def paragraph(text, length)
  "#{sanitize(simple_format(truncate(text, :length => length)), :tags => %w(p i br b))}".html_safe
end 
```

# post - 使用表格从我的网站向其他网站发表评论

> ID：14008696
> 
> 赞同：0
> 
> 时间：2012-12-23T04:50:24.800
> 
> 标签：post, dns, comments

我想使用伪表单将一些数据从我的页面发布到其他网页。如果用户因此使用我的页面的形式发布某些内容，这将被发布到存在于不同服务器的其他域的目标页面。
假设我的站点是*http://abcd .com*，目标站点是*http://xyz.com*
如果用户使用我的表单发表评论，这将发布到 xyz.com。
首先我尝试如下： -

```
$.ajax({
    url:'http://xyz.com/cmnt_next.php',
    type:'post',
    data:{'cmntid':100,'user':'guest','cmnt':'Hello world'},
    success:function(result){
        alert("res: "+result);
    }
}); 
```

最后我发现**ajax**不会向外部域发送请求。我没有任何其他想法可以做到这一点。我想知道在他们允许的情况下，合法的做法是什么。我需要知道什么才能访问帖子，如果需要在通过我的网页发布之前“登录”到目标站点。我需要任何提示和解决方案来做这件事。
谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:53:44.783

这样做的“合法”方式是使用网站为您提供的 API 来登录和/或在 xyz.com 上发帖。如果他们不这样做，那么他们可能不希望您这样做，那么您可能不应该这样做。

# php - 一些 fb 应用程序如何在普通 http 服务器上运行

> ID：14008704
> 
> 赞同：-3
> 
> 时间：2012-12-23T04:52:29.870
> 
> 标签：php, mysql, facebook, http

我非常热衷于 fb 应用程序开发，但从 2011 年 10 月 1 日起，fb 宣布要运行 fb 应用程序，我们需要 https:// 服务器。所以这对我来说是一个悲伤的消息，因为我有正常的 http:// 服务器并且是一名学生，而我之前的活动应用程序正在关闭。

但我有一些问题，最近几天我注意到一些应用程序也从普通服务器运行，例如 [http://whaddapp.com/](http://whaddapp.com/)其中之一，还有更多，这怎么可能？

有人请指导我正确的方向，我有希望吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:07:06.513

我相信 HTTPS 要求适用于在 Facebook 框架内运行的应用程序。

您可以以相当低的成本购买和安装 SSL 证书 - 如果您自己安装，我已经看到它们只需 10 美元/年 + 来自您的主机的专用 IP 费用。如果您使用的是共享环境，您的主机可能也已经拥有 SSL 证书，您只需要使用他们的域即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:54:45.390

在查看您的问题后，我可以找到一些可用的选项，这些选项是免费的，您无需支付任何额外费用即可实现此目的

**您可以使用 Open SSL**

使用 openssl 创建一个自签名证书，并将其安装在您的网络框架上。但是，大多数浏览器都会对自签名证书发出警告，并且添加异常并不直观。Chrome 需要一些配置，如此[处](http://www.robpeck.com/2010/10/google-chrome-mac-os-x-and-self-signed-ssl-certificates/)所述。Safari 允许您继续，但不会在 Canvas 上显示输出。Firefox 似乎允许您添加异常并正确显示结果。

[这里](https://github.com/shamiksharma/myblog/wiki/Building-Facebook-Apps-with-SSL)还有很多信息和选择（低成本）

注意：- 如果您的目的只是保持您的热情，这些解决方案肯定会有所帮助。但是对于构建任何商业应用程序。您需要购买商业 SSL 证书和托管服务器。

# ruby-on-rails - 视图中的 Rails 度假村阵列

> ID：14008705
> 
> 赞同：0
> 
> 时间：2012-12-23T04:53:08.200
> 
> 标签：ruby-on-rails, ruby, parameters, controller

我是 Rails 新手，现在我有一个带有控制器和视图的简单应用程序。页面加载完毕，控制器执行大量 http 请求（无法更改）并填充结构数组。控制器对它进行排序，视图迭代并将其显示在表格中。

我希望用户能够单击几个按钮之一并以不同的方式对数据进行排序。现在，我只需传递一个带有页面重新加载的 :sort 变量，以不同的方式排序，瞧。但是，我想知道是否有一种方法可以对这个数组进行排序而不必重新填充它。这可能是一个超级简单的问题，我只是没有在寻找正确的东西。基本上，我可以将数组传回控制器，以便它可以对页面进行排序和重新加载吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:57:07.713

关于排序有一个很好的演员，我相信你在这里找到你的答案：http: [//asciicasts.com/episodes/240-search-sort-paginate-with-ajax](http://asciicasts.com/episodes/240-search-sort-paginate-with-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:29:26.463

您可以使用不会触发服务器请求的 JQuery 表。

对于演示检查

[http://datatables.net/](http://datatables.net/)

# extjs - Extjs 条件日期渲染器

> ID：14008710
> 
> 赞同：1
> 
> 时间：2012-12-23T04:53:50.823
> 
> 标签：extjs, extjs4, extjs-mvc

我的应用程序中有一个网格，它在字段中显示日期。现在，如果这一天在上周，我想以粗体格式显示该字段。但在两行显示我想要的输出。我不明白我的病情出在哪里。有人可以帮我吗？这是我的代码如下：

```
{
            text: 'Start',  
            dataIndex: 'weekstart',
            flex: 1,
            renderer: function(value, metaData){
                var day = new Date(value) - 0,
                lastDay = Ext.Date.getLastDateOfMonth(value)-0,
                lastWeek = lastDay - 7;
                console.log('day >>> '+day,'lastDay >>> '+ lastDay, 'lastWeek >>> '+lastWeek);
                    return day >= lastWeek ? '<b>' + Ext.Date.format(value, 'M d, Y') + '</b>' : Ext.Date.format(value, 'M d, Y') ;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T12:39:18.650

您的`day`and`lastDay`是时间戳，要做到这一点，您应该在`lastWeek`:中使用时间戳`lastWeek = lastDay - 7*24*3600*1000`。

无论如何，IMO 最好用于`getRowClass`格式化值。在网格配置中尝试指定`viewConfig`：

```
viewConfig: {
    getRowClass: function(record, rowIndex, rowParams, store){
        var value = record.get('lastChange'),
            day = value.getDate(),
            lastDay = Ext.Date.getDaysInMonth(value),
            lastWeek = lastDay - 6;
        return day >= lastWeek ? 'last-week' : '';
    }
} 
```

在列定义中指定类附加类：`tdCls: 'date-column'`然后您可以在css中格式化列：

```
.last-week .date-column {
    font-weight: bold;
}​ 
```

工作样本：http: [//jsfiddle.net/36n4m/1/](http://jsfiddle.net/36n4m/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:03:31.580

嗨，我已经完成了，如下所示：

```
 {
                text: 'Start',  
                dataIndex: 'weekstart',
                width: 84,
                renderer: function(value, metaData, record, row, col, store, gridView){
                    var day = value.getDate(),
                    lastDay = Ext.Date.getDaysInMonth(value),
                    lastWeek = lastDay - 6;
//                    console.log( 'row >>> '+ row,'   day >>> '+ day,'   lastDay >>> '+ lastDay, '   lastWeek >>> '+ lastWeek );
                        return day >= lastWeek ? '<b>' + Ext.Date.format(value, 'M d, Y') + '</b>' : Ext.Date.format(value, 'M d, Y') ;
                }
            } 
```

# javascript - 无论如何要在未捕获的异常时进入“调试器”模式？

> ID：14008711
> 
> 赞同：3
> 
> 时间：2012-12-23T04:53:57.803
> 
> 标签：javascript, google-chrome, google-chrome-devtools

我希望能够*在源代码中出现异常时*暂停我的脚本的执行，然后坐在控制台上，在那个时间点冻结​​所有内容，输入变量名并取回它们相应的值。

有没有办法用 Chrome devtools 做这样的事情？

对不起n00b Q。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T05:05:07.417

是的，看图片：

![在此处输入图像描述](../Images/1b17938b4816fdfaa285224f8269ad4a.png)

当发生未处理的异常时，这将停止执行。

# iphone - 使用 UIActivityViewController 附加本地视频

> ID：14008721
> 
> 赞同：11
> 
> 时间：2012-12-23T04:57:09.750
> 
> 标签：iphone, ios, video, attachment, uiactivityviewcontroller

我正在编写一个具有本地保存视频 (.mov) 的 iOS 应用程序。我正在尝试通过 UIActivityViewController 附加视频。它非常适合电子邮件。视频已成功附加并发送。保存到相机胶卷时也可以使用。
附加到消息时它不起作用。仅显示文本。Twitter 和 Facebook 也没有出现。当我删除视频附件时，Twitter 和 Facebook 终于开始显示了。我不太关心消息，但谁能告诉我为什么 Facebook 和 Twitter 没有出现？

这是我的代码：

```
- (IBAction) shareVideo {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *URL = [documentsDirectory stringByAppendingPathComponent:demoName];

    NSString* someText = demoName;
    NSURL *urlToShare = [NSURL fileURLWithPath:URL isDirectory:NO];
    NSArray* dataToShare = @[someText, urlToShare];

    UIActivityViewController* activityViewController =
    [[UIActivityViewController alloc] initWithActivityItems:dataToShare
                                      applicationActivities:nil];
    activityViewController.excludedActivityTypes = @[UIActivityTypePrint,UIActivityTypeCopyToPasteboard,UIActivityTypeAssignToContact];

    activityViewController.completionHandler = ^(NSString *activityType, BOOL completed) {
        //if (completed) {
        [self dismissViewControllerAnimated:YES completion:nil];
        //}
    };

    [self presentViewController:activityViewController animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-22T06:19:37.837

其他答案已过时。这有效：

```
 @IBAction func didTapShare(sender: AnyObject) {
    let videoURL = NSURL(fileURLWithPath:localVideoPath)
    let activityItems = [videoURL, "Check this out!" ]
    let activityController = UIActivityViewController(activityItems: activityItems, applicationActivities: nil)

    activityController.popoverPresentationController?.sourceView = self.view
    activityController.popoverPresentationController?.sourceRect = self.view.frame

    self.presentViewController(activityController, animated: true, completion: nil)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-26T09:24:17.560

在 iOS 6 或更低版本中，您无法在 Facebook、Twitter 或短信上分享视频。它仅在 iOS7 中可用。

另外，请查看[https://stackoverflow.com/a/20211603/2074320](https://stackoverflow.com/a/20211603/2074320)了解您的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T09:11:59.727

它们是隐藏的，因为您无法在 fb twitter 或短信中显示 mov

# coq - Coq 中受限的归纳类型定义

> ID：14008722
> 
> 赞同：4
> 
> 时间：2012-12-23T04:57:15.653
> 
> 标签：coq

我想以某种方式限制允许构造函数在归纳定义中采用的输入类型。假设我想说定义二进制数如下：

```
Inductive bin : Type :=
  | O : bin
  | D : bin -> bin
  | S : bin -> bin. 
```

这里的想法是 D 通过在末尾添加一个零来将非零数字加倍，而 S 将一个零作为最后一位数字并将最后一位数字变为 1。这意味着以下是合法数字：

```
S 0
D (S 0)
D (D (S 0)) 
```

而以下不是：

```
S (S 0)
D 0 
```

有没有办法以干净的方式在归纳定义中强制执行此类限制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T23:28:56.740

您可以`bin`用谓词定义 a 合法的含义，然后为`bin`服从该谓词的 s 子集命名。`Program Definition`然后你用and`Program Fixpoint`代替`Definition`and编写函数`Fixpoint`。对于递归函数，您还需要一种措施来证明函数的参数大小减小，因为函数在结构上不再是递归的。

```
Require Import Coq.Program.Program.

Fixpoint Legal (b1 : bin) : Prop :=
  match b1 with
  | O       => True
  | D O     => False
  | D b2    => Legal b2
  | S (S _) => False
  | S b2    => Legal b2
  end.

Definition lbin : Type := {b1 : bin | Legal b1}.

Fixpoint to_un (b1 : bin) : nat :=
  match b1 with
  | O    => 0
  | D b2 => to_un b2 + to_un b2
  | S b2 => Coq.Init.Datatypes.S (to_un b2)
  end.

Program Definition zer (b1 : lbin) := O.

Program Fixpoint succ (b1 : lbin) {measure (to_un b1)} : lbin := 
```

但是[这种](http://coq.inria.fr/distrib/8.4/stdlib/Coq.Numbers.BinNums.html)简单类型的方法可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T10:12:07.443

这可以通过归纳递归定义来完成——但不幸的是 Coq 不支持这些。

从面向对象编程的角度来看，`O`和`D`是`S`的子类型`bin`，它们的构造函数类型可以在不借助逻辑谓词的情况下定义，但 Coq 本身也不支持面向对象编程。

然而，Coq 确实有类型类。所以我可能会做`bin`一个类型类，让每个构造函数成为一个单独的归纳类型，每个都有一个类型类的实例`bin`。我不确定类型类的方法是什么。

# android - 单独获取 ViewGroup 的位图

> ID：14008726
> 
> 赞同：0
> 
> 时间：2012-12-23T04:59:26.283
> 
> 标签：android, android-view

我有一个有几个孩子的 ViewGroup，我希望能够在添加它的任何孩子之前获得视图组本身的位图。我需要它，因为我想在不影响孩子的情况下旋转位图。有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:02:46.923

在视图膨胀完成之前不要添加位图。换句话说，如果它在 xml 布局中，则将其取出并在 Java 中做您需要的事情。

编辑：根据您的评论。

[获取 ViewTreeObserver](http://developer.android.com/reference/android/view/View.html#getViewTreeObserver%28%29)，如下所示：

```
ViewTreeObserver theObserver = viewGroup.getViewTreeObserver(); 
```

然后将所需的任何侦听器添加到[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:21:20.747

我发现该`onDraw`函数实际上只处理视图本身的绘制。孩子，如果存在的话，在绘图过程的后期处理，所以我可以在那里做所有的位图操作。

# git - IntelliJ IDEA GitHub 集成创建存储库，但尝试推送时出现“无法授权”错误

> ID：14008730
> 
> 赞同：6
> 
> 时间：2012-12-23T05:00:12.633
> 
> 标签：git, github, intellij-idea

1.  我在 IntelliJ IDEA 中创建了一个新项目

2.  通过菜单，我转到 VCS -> 导入版本控制 -> 在 GitHub 上共享项目

3.  输入新的存储库名称，然后单击共享

4.  它通过 GitHub 进行身份验证 ok

5.  当我尝试推送到 GitHub 时，会打开一个登录窗口，上面写着“登录到[https://github.com/myemail@gmail.com/GitHubTest2.git](https://github.com/myemail@gmail.com/GitHubTest2.git) ”

6.  默认登录名是 github.com/my_username。我尝试使用该登录名登录，但我的 GitHub.com 密码和身份验证失败。我还尝试使用我的 GitHub.com 登录名（即 myemail@gmail.com）和我的 GitHub.com 密码登录。

7.  3 次尝试后，我收到以下错误消息：

推送到 GitHub 失败推送授权失败：无法授权

为什么它使用我的 GitHub.com 登录名/密码向 GitHub 进行身份验证，但在尝试将项目推送到 GitHub 时却没有？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-09T10:41:40.563

以下对我有用：

*   不要使用用户名和密码，而是使用个人访问令牌。在 GitHub 中：转到“帐户设置”>“应用程序”并生成“个人访问令牌”

在 IntelliJ 中：

*   转到“设置”>“版本控制”>“GitHub”并输入您的登录名和生成的访问令牌。现在推送到 GitHub 存储库应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:50:17.053

1.  请参阅[Git 推送需要用户名和密码](https://stackoverflow.com/questions/6565357/git-push-requires-username-and-password)。

2.  尝试使用 ssh 而不是 https（使用生成的密钥对： [https](https://help.github.com/articles/generating-ssh-keys) ://help.github.com/articles/generating-ssh-keys ）。

这可能会为您解决问题，对我来说，它只是将我在 IntelliJ 中看到的错误消息从 GitHub 更改为“远程主机意外挂起”。

然后我尝试从终端推送到 GitHub，它成功了。从终端，无论我使用 SSH 还是 https，它都可以工作。因此，我建议使用命令行 git 将代码推送到 GitHub 而不是 IntelliJ 集成。

# android - Android：计时器从活动开始而不是从按钮单击开始

> ID：14008731
> 
> 赞同：0
> 
> 时间：2012-12-23T05:00:23.783
> 
> 标签：android

我有一个计时器，我希望它从用户单击按钮时开始计数，而不是从活动开始时开始计数。目前，当用户单击按钮从 0 开始计时器时，它只显示从 Activity 开始的时间。以下是相关代码：

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.startTimer: {
            Chronometer stopWatch = (Chronometer) findViewById(R.id.chrono);
            startTime = SystemClock.elapsedRealtime();

            timer = (TextView) findViewById(R.id.timerText);
            stopWatch.setOnChronometerTickListener(new OnChronometerTickListener(){
                @Override
                public void onChronometerTick(Chronometer arg0) {
                    countUp = (SystemClock.elapsedRealtime() - arg0.getBase()) / 1000;
                    String asText = (countUp / 60) + ":" + (String.format("%02d", (countUp % 60))); 
                    timer.setText(asText);
                }
            });
            stopWatch.start();
            break;
        }
... 
```

我需要改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:09:16.510

不确定 arg0.getBase 是什么，但我认为你想改变——

```
countUp = (SystemClock.elapsedRealtime() - arg0.getBase()) / 1000; 
```

至

```
countUp = (SystemClock.elapsedRealtime() - startTime) / 1000; 
```

因为 startTime 是单击按钮的时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-14T18:13:29.043

你可以加

```
stopWatch.setBase(startTime); 
```

略低于

```
startTime = SystemClock.elapsedRealtime(); 
```

所以，你更新的代码会像，......

```
@Override
public void onClick(View v) {
switch (v.getId()) {
    case R.id.startTimer: {
        Chronometer stopWatch = (Chronometer) findViewById(R.id.chrono);
        startTime = SystemClock.elapsedRealtime();

        // this line to be added to the code
         stopWatch.setBase(startTime);

        timer = (TextView) findViewById(R.id.timerText);
        stopWatch.setOnChronometerTickListener(new OnChronometerTickListener(){
            @Override
            public void onChronometerTick(Chronometer arg0) {
                countUp = (SystemClock.elapsedRealtime() - arg0.getBase()) / 1000;
                String asText = (countUp / 60) + ":" + (String.format("%02d", (countUp % 60))); 
                timer.setText(asText);
            }
        });
        stopWatch.start();
        break;
    }
... 
```

希望这可以帮助..

# c++ - 写和读长字符串

> ID：14008732
> 
> 赞同：0
> 
> 时间：2012-12-23T05:00:37.397
> 
> 标签：c++, database, string, file-io

我正在编写一个类似于数据库的程序。它需要一个工作编号、名字、姓氏、工作描述和工作持续时间。

对于描述，我只知道如何从文件中读取单个单词字符串。这是我的代码。

```
// basic file operations
#include <iostream>
#include <fstream>
using namespace std;

int main()
{
    int jobNumber;
    string fName;
    string lName;
    string jobTask;
    int jobDuration;
    int Rate = 40;
    int Price = jobDuration * Rate;
    int totalJobs = 0;
    ifstream ClientDataBase("example.txt");

    while (ClientDataBase >> jobNumber >> fName >> lName >> jobTask >> jobDuration)
    {
        cout << jobNumber << ' ' << fName << ' ' << lName << ' ' << jobTask << ' ' << jobDuration << "hours" << endl;
        totalJobs++;
    }
    cout << "\nThere are a total of " << totalJobs << " recorded in this database" << endl;
    ofstream ClientDatabase("example.txt", ios::app);
    cout << "Enter new clients job number, first name, last name, job task, duration of task" << endl;
    cout << "press Ctrl+Z to quit\n\n" << endl;
    while (cin >> jobNumber >> fName >> lName >> jobTask >> jobDuration)
    {
        ClientDatabase << jobNumber << ' ' << fName << ' ' << lName << ' ' << jobTask << ' ' << jobDuration << endl;
    }
} 
```

使用此布局，我插入数据，关闭文件，重新打开并查看数据已存储，我可以再次添加更多。但`jobTask`只能是一个字。无论如何我可以做到，这样描述可以比一个词长，并且仍然能够以自定义格式从文件中读取它？例如`jobTask`，可能正在执行“诊断和修复”，但要将其输入到文件中，我实际上只能使用“修复”，但这可能意味着任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:20:56.603

你的文件的组织方式会给你带来麻烦，使用一些特定的字符来分隔你的数据会很有帮助。

例如，您可以执行以下操作：

```
employee1=job_number:first_name:last_name:job_description:job_duration
employee2=job_number:first_name:last_name:job_description:job_duration
employee3=job_number:first_name:last_name:job_description:job_duration
// etc.. 
```

在您的程序中，您将读取一行，将其保存在缓冲区中，处理您的缓冲区（解析它，检索您的数据，检查语法等），擦除它然后读取一个新行，等等...

由于您的单词没有用空格分隔，因此您的问题显然已经消失，以及您以后可能会遇到的许多其他问题。

使用 iostream 非常简单，这不会给您带来任何麻烦，即使这样做了，您也知道该去哪里！

祝你好运

# eclipse - 如何使用 maven-m2e-codestyle 连接器？

> ID：14008733
> 
> 赞同：0
> 
> 时间：2012-12-23T05:01:03.027
> 
> 标签：eclipse, maven, m2e

根据[https://issues.sonatype.org/browse/OSSRH-3293“Maven](https://issues.sonatype.org/browse/OSSRH-3293) m2e 代码样式和保存操作连接器”

> 此插件在配置项目时在 m2e Eclipse 插件中执行并配置 maven 项目的保存操作和代码样式选项，因此您无需将 .settings 文件提交到您的 repo

我还没有找到一个示例来说明应该如何使用这个连接器。我在 pom.xml 中放入什么来触发它，我怎么知道我的 eclipse 安装是否安装了连接器？

有人有这个连接器的示例配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T03:55:29.640

通过查看源代码，它类似于：

```
<plugin>
  <groupId>com.despegar.maven.plugin</groupId>
  <artifactId>maven-m2e-codestyle</artifactId>
  <version>1.0.3</version>
  <executions>
    <execution>
      <goals>
        <goal>configure</goal>
      </goals>
      <configuration>
        <codeStyleBaseUrl>http://some/path/to/eclipse/files/</codeStyleBaseUrl>
        <!-- Will not work. Scheme 'file' not registered. -->
        <!-- <codeStyleBaseUrl>file://localhost/some/path/to/eclipse/files/</codeStyleBaseUrl> -->
        <baseDir>${basedir}/</baseDir>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

2个配置参数是：

*   `<codeStyleBaseUrl>`
*   `<baseDir>`

它复制这三个文件：

```
${codeStyleBaseUrl}/org.eclipse.core.resources.prefs
${codeStyleBaseUrl}/org.eclipse.jdt.core.prefs
${codeStyleBaseUrl}/org.eclipse.jdt.ui.prefs 
```

至：

```
${baseDir}/.settings/ 
```

请注意，`<codeStyleBaseUrl>`必须是 http/https，因为它在后台使用 HttpClient。

# qt5 - Qt5 qconfig.h 很奇怪

> ID：14008737
> 
> 赞同：1
> 
> 时间：2012-12-23T05:01:52.090
> 
> 标签：qt5

这是我的上下文：我在 Windows 上使用 OpenGL 编译图形引擎，所以我包含了 glext.h。惊喜，它与 Qt5 中的 gl2.h 冲突 ..

我发现如果定义了 QT_OPENGL_ES_2，则包含 gl2.h（来自 gles2）。然后我发现默认定义了 QT_OPENGL_ES_2，我无法定义 QT_NO_OPENGL_ES_2 ...或者我不明白以下代码是如何应该可以工作（顺便说一句，我的 qconfig.h 中的每个块 - 来自 Qt5 msvc10 离线安装程序的块 - 看起来像这样）：

```
#if defined(QT_OPENGL_ES_2) && defined(QT_NO_OPENGL_ES_2)
# undef QT_OPENGL_ES_2
#elif !defined(QT_OPENGL_ES_2)
# define QT_OPENGL_ES_2
#endif 
```

也许是因为我睡得不多，但看起来很奇怪。但是在没有定义 QT_OPENGL_ES_2 并且定义了 QT_NO_OPENGL_ES_2 的情况下，我很确定（我的 4 个非睡眠神经元）它进入第二个分支并定义了 QT_OPENGL_ES_2 ...

如果我是他们，我会写：

```
#if defined(QT_OPENGL_ES_2) && defined(QT_NO_OPENGL_ES_2)
# undef QT_OPENGL_ES_2
#elif !defined(QT_OPENGL_ES_2) && !defined(QT_NO_OPENGL_ES_2)
# define QT_OPENGL_ES_2
#endif 
```

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:24:20.260

是的，这就是错误，我已经挣扎了好几天，直到它出来。我纠正了它，现在它运行良好，没有冲突。

[https://bugreports.qt-project.org/browse/QTBUG-28821?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://bugreports.qt-project.org/browse/QTBUG-28821?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

# processing - 处理：PImage 添加到 ArrayList 时转换为不同类型的对象

> ID：14008741
> 
> 赞同：0
> 
> 时间：2012-12-23T05:02:34.583
> 
> 标签：processing

我在这里遇到了一个奇怪的错误。

```
PImage img; 
PImage img2;
PImage img3; 
PImage img4;
PImage img5; 
PImage img6;
PImage img7; 
PImage img8;
PImage img9; 
PImage img10;
int count;
int regionHeight; 
int regionWidth;
ArrayList images; 

void setup(){
  //Image of bottle 
 images = new ArrayList(); 
 img = loadImage("IMG_3763.JPG");
 images.add(img); 
 img2 = loadImage("IMG_3764.JPG");
 images.add(img2);  
 img3 = loadImage("IMG_3765.JPG");
 images.add(img3); 
 img4 = loadImage("IMG_3766.JPG");
 images.add(img4);  
 img5 = loadImage("IMG_3767.JPG");
 images.add(img5); 
 img6 = loadImage("IMG_3768.JPG");
 images.add(img6);  
 img7 = loadImage("IMG_3769.JPG");
 images.add(img7); 
 img8 = loadImage("IMG_3770.JPG");
 images.add(img8);  
 img9 = loadImage("IMG_3771.JPG");
 images.add(img9); 
 img10 = loadImage("IMG_3772.JPG"); 
 images.add(img10); 

 size(img.width, img.height);
 println(img.width); 
}

void draw(){ 
 println(images.get(0).width); 
} 
```

似乎我放入数组中的任何图像确实是 PImages，这就是为什么我可以在 setup() 中获取 img.width，但是当我尝试对 images.get(index) 执行相同操作时，它返回一个对象但是该对象不是 PImage。我不确定我明白为什么类型发生了变化，我的理解是 ArrayList 就像一个具有一些额外功能的动态数组。它应该返回一个 PImage 对象，但处理过程不会这样对待它。我用不同的函数验证了这一点，以尝试更多地了解返回的内容，但它确实看起来像是一种不同类型的对象。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:07:28.947

从 ArrayList 获取对象时，必须将对象转换为 PImage

```
println((PImage)images.get(0).width); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:10:14.703

ArrayList 存储对象，它不知道它存储的对象的派生类型，这就是@bill_automata 引用的强制转换修复问题的原因。

# excel - 将数据从一个电子表格复制/粘贴到另一个电子表格

> ID：14008745
> 
> 赞同：2
> 
> 时间：2012-12-23T05:04:29.413
> 
> 标签：excel, vba

好的，我已经研究了大约 4 个小时了。我有另一篇类似的帖子解决了一个问题，只是为了创建另一个问题。此代码从 2 个电子表格中获取同一列数据。第一次复制/粘贴效果很好（并填充了 A2:A191 行），但之后的第一个循环从 A1332 行开始粘贴该电子表格中的数据？A192:A1331 中的所有单元格都是空白的。代码应该从底部向上查找第一个可用的空单元格。我错过了什么？

这是有问题的代码。我已经验证它解锁了第二个循环电子表格范围单元格，但之后它粘贴错了吗？格式似乎不是问题？牢房中是否有我没有看到的“东西”？

```
 Set wbkCS = Workbooks.Open(strCutSheetFile(i))
        On Error GoTo 0
        Set wbkVer = Workbooks.Open(strVerifyFile)
        Set copyRng = Worksheets("Cutsheets").Range("A2")
    If copyRng = "" Then
            wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Locked = False
            wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Copy Destination:=wbkVer.Worksheets("Cutsheets").Range("A2")
    Else
            wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Locked = False
            wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Copy Destination:=wbkVer.Worksheets("Cutsheets").Range("A" & Range("A65536").End(xlUp).Row + 1)
     End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:09:17.933

尝试在第二个复制语句中限定最后一个范围引用，即：

代替

```
 .Range("A" & Range("A65536").End(xlUp).Row + 1) 
```

尝试

```
 .Range("A" & wbkVer.Worksheets("Cutsheets").Range("A65536").End(xlUp).Row + 1) 
```

# html - 在包含许多其他 div 的容器 div 中居中搜索栏

> ID：14008748
> 
> 赞同：0
> 
> 时间：2012-12-23T05:05:21.237
> 
> 标签：html, css, styles

我有一个容器 div，其中包含许多其他 div，并且在其中一个 div 中有一个搜索栏。因此 html 看起来像这样：

```
 <div id="header-middle">
        <div id="header-search">
            <form>
                <input type="text">
            </form>
        </div>
        <div id="header-middle-left">
        </div>
        <div id="header-transition">
        </div>
        <div id="header-middle-right">
        </div>
    </div> 
```

我拥有的CSS是：

```
#header-middle{
    width: 400px;
    height: 64px;
    float: left;
}

#header-search{
    position: absolute;
    left: 50%;
    top: 50%;    
    margin-top: -32px;
    margin-left: -200px;
}

#header-middle-left{
    width: 241px;
    height: 64px;
    float: left;
    background-image:url('foo');
    background-repeat:repeat-x;
}

#header-transition{
    width: 19px;
    height: 64px;
    float:left;
    background-image:url('foo2');
}

#header-middle-right{
    width: 140px;
    height: 64px;
    float:left;
    background-image:url('foo3');
    background-repeat:repeat-x;
} 
```

div 主要是为了样式而存在的，它们使用图像作为背景，因此覆盖它们的搜索栏没有任何害处。但是，我需要它以包含 div 为中心，并覆盖其余部分的一小部分。任何帮助将不胜感激。也将不胜感激有关一般 css 的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:09:58.423

您应该编辑您的 CSS 来实现这一点，更改`#header-middle`并`#header-search`使用以下代码：

```
#header-middle {
    width: 400px;
    height: 64px;
    position: relative;
}

#header-search {
    position: absolute;
    left: 50%;
    top: 50%;    
    margin-top: -11px;
    margin-left: -75px;
    width: 150px;
    height: 22px;
} 
```

这是一个[**演示**](http://jsbin.com/icoyaz/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:52:06.493

您可以使用`position:relative`for`#header-search`使其位置相对于容器 div `#header-middle`。

如果搜索框和容器 div 的宽度和高度是静态的，则可以使用精确像素进行居中。这不是最好的方法，但它应该有效。如果它们是动态的，那么您可以使用 javascript 进行计算。

[http://jsfiddle.net/rWNkj/](http://jsfiddle.net/rWNkj/)

# c# - Char 对象在字符串连接中被忽略

> ID：14008749
> 
> 赞同：5
> 
> 时间：2012-12-23T05:05:34.890
> 
> 标签：c#, concatenation

我注意到我写的一个对象的完全限定名称回来了很有趣。在逐步执行我的 ToString() 方法时，我注意到在连接字符串时，字符对象一直被排除在该过程之外。

这是正在发生的事情的一个步骤

前 ![前](../Images/c7b9df999b685f648a563f816c7ff7dc.png)

后 ![后](../Images/911417d146dff14f8e7c59268a59f206.png)

在哪里`Char seperator = ':';`

这是我的 tostring 函数的代码：

```
public String ToString(Representaion rep)
        {
            String toReturn = "kuid";
            Char separator = ':';

            switch (rep)
            {
                case Representaion.Colons:
                    break;
                case Representaion.Underscores:
                    separator = '_';
                    break;
                case Representaion.UCROnly:
                    toReturn = userID + ":" + contentID;
                    toReturn += revision == 0 ? "" : ":" + revision;
                    return toReturn;
            }

            toReturn += version == 0 ? "" : version.ToString();
            toReturn += separator + userID + separator + contentID;
            toReturn += revision == 0 ? "" : separator + revision.ToString();
            return toReturn;
        } 
```

你在哪里

```
private byte version;
private int userID;
private int contentID;
private byte revision; 
```

一种情况可能如下所示：

![在此处输入图像描述](../Images/ccb7e534b57414f3c0effa80249684ad.png)

已经在本地面板中查看，似乎 VS 正在得到一个字符串，而不是我认为的字符串。

我放入了另一个 ToString 函数来处理没有参数的调用（它通过使用 Representation.Colons 调用参数化函数来实现）：

```
public override string ToString()
        {
            return this.ToString(KUID.Representaion.Colons);
        } 
```

谁能告诉我为什么我没有得到我认为我应该得到的东西？（预期结果：kuid2:72938:40175:2）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T14:20:46.570

既然您已经发布了更多程序，问题就很明显了。**Char 加 int 不是字符串。**记住，

```
string += char + int + char + int 
```

方法：

```
string = string + (((char + int ) + char) + int) 
```

当你将一个 int 添加到一个 char 时，你会得到一个 int:`'a' + 2`生成对应于 的整数字符代码`'c'`，而不是字符串`"a2"`。

通过将用户 ID 添加到冒号字符，您会得到一些疯狂的整数。

*由于您遇到的原因，*像这样连接字符串是一种不好的做法。*相反，说：*

 *```
return string.Format("kuid{0}{1}{2}{3}{4}{5}{6}",
    version, separator, userID, separator, contentID, 
    revision == 0 ? "" : separator.ToString(),
    revision == 0 ? "" : revision.ToString()); 
```

或者，更好的是，*使用一个`StringBuilder`对象*来构建一个复杂的字符串。

顺便说一句，这说明了有关该语言的一个有趣点：

```
a += b + c; 
```

并不意味着

```
a = (a + b) + c; 
```

它的意思是

```
a = a + (b + c); 
```

正如我们所见，可能有不同的类型分析！如果你说：

```
string = string + char + int + char + int 
```

那么这将被分析为

```
string = ((((string + char) + int) + char ) + int; 
```

这确实使所有内容都成为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T05:09:19.930

我复制粘贴了你的代码，它工作正常

![在此处输入图像描述](../Images/84690e8fd105179b87d7e55dc9f78d64.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T14:39:24.413

问题发生了，因为右边的表达式不是字符串表达式。您正在使用不会自动转换为字符串的字符和整数，除非它们在字符串表达式中使用。您可以通过以字符串（此处为空字符串）开头来使其成为字符串表达式：

```
toReturn += "" + separator + userID + separator + contentID; 
```*

# perl - 高效地将嵌入逗号的 CSV 文件逐行转换为 bash 数组

> ID：14008751
> 
> 赞同：1
> 
> 时间：2012-12-23T05:06:51.410
> 
> 标签：perl, bash, shell

通常，我会做类似的事情

```
IFS=','
columns=( $LINE ) 
```

其中 $LINE 是我正在阅读的 csv 文件中的一行。

但是，如何处理带有嵌入逗号的 csv 文件？我必须处理几百个演出的文件，所以一切都需要快速完成，即没有多次读取一行，绝对没有循环（上次我尝试减慢几个因素）。

代码的大体结构如下

```
FILENAME=$1
cat $FILENAME | while read LINE
do
    IFS=","
    columns=( $LINE )
    # affect columns changes here
    newline="${columns[*]}"
    echo "$newline"
done 
```

最好，我需要一些东西

```
FILENAME=$1
cat $FILENAME | while read LINE
do
    IFS=","
    # code to tell bash to ignore if IFS is within an open quote
    columns=( $LINE )
    # affect columns changes here
    newline="${columns[*]}"
    echo "$newline"
done 
```

任何提示将不胜感激。否则，我可能会改用另一种语言来处理这些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:30:42.860

可能*嵌入的逗号*只是您在解析这些 CSV 文件时遇到的第一个明显问题。

未来可能出现的问题是：

*   **嵌入换行符**分隔符
*   **嵌入的 utf8 字符**
*   **对空格**、**空字段**、**逗号周围的空格**、**undef 值**的特殊处理

 **我通常倾向于遵循这样的理念，即*如果有一个（信誉良好的）模块可以解析您必须解析的某些格式，请使用它而不是制作自制软件*

我不认为 bash 有这样的东西，但**Perl**有一些。我会去[**`Text::CSV_XS`**](http://search.cpan.org/~hmbrand/Text-CSV_XS-0.94/CSV_XS.pm)。用 CI 编写期望它会非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T05:29:38.720

这不是一个完整的答案，但它是一种可能的方法。

查找输入文件中从未出现过的字符。使用 C 程序解析 CSV 文件并将行打印到具有不同分隔符的标准输出。编写该程序留作练习，但我确信那里有 CSV 解析 C 源代码。将 C 程序的输出通过管道传输到您的脚本中。

例如：

```
FILENAME=$1
new_c_program $FILENAME | while read LINE
do
    IFS="|"
    # code to tell bash to ignore if IFS is within an open quote
    columns=( $LINE )
    # affect columns changes here
    newline="${columns[*]}"
    echo "$newline"
done 
```

一个小问题：我会选择除`$newline`;以外的名称。`newline`建议使用行尾标记而不是整行。

另一个小问题：您的问题代码中有一个[“无用的使用`cat`”](http://catb.org/jargon/html/U/UUOC.html)。你可以替换这个：

```
cat $FILENAME | while read LINE
do
    ...
done 
```

这样：

```
while read LINE
do
     ...
done < $FILENAME 
```

但是如果你用`cat`我建议的假设的 C 程序替换，你仍然需要管道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T05:30:30.577

您可以使用 sed 或类似的东西将引号内的逗号转换为其他序列或标点符号。如果您不关心引号中的内容，那么您甚至不需要将它们改回来。您可以对整个文件执行此操作：

```
sed 's/\("[^,"]*\),\([^"]*"\)/\1;\2/g' input.csv > intermediate.csv 
```

或在每一行：

```
line=$(echo $line | sed 's/\("[^,"]*\),\([^"]*"\)/\1;\2/g') 
```**

# asp.net - 如何在一个解决方案中添加 2 个网站

> ID：14008753
> 
> 赞同：-1
> 
> 时间：2012-12-23T05:07:12.020
> 
> 标签：asp.net, visual-studio-2010, file-upload

我在 visual-studio-2010 中有两个独立的网站。首先，我想知道如何将这两个 Web 项目放在一个解决方案中，其次我在项目 1 中有一个表单，它试图在项目 2 的文件夹中添加照片，我该怎么做。

```
FileUpload1.SaveAs("~/project2/Image/" + FileUpload1.FileName.ToString()); 
```

我试过这段代码，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T05:10:52.607

这是两个问题。你真的应该在 StackOverflow 上创建两个单独的问题，而不是把它们合二为一。

## 问题 1

关于一个解决方案中的两个项目：

*   在解决方案资源管理器中，选择解决方案。
*   在文件菜单上，指向添加项目，然后单击现有项目。
*   将显示添加现有项目对话框。
*   找到要添加的项目，然后选择项目文件。
*   单击打开。
*   项目将添加到选定的解决方案中。

## 问题2

关于第二个问题 - 如果您的站点部署在本地 IIS 中，那么您可以在共享公共本地路径的两个 IIS 实例中创建一个虚拟目录。

# meteor - 从模板中访问“this.data”的问题

> ID：14008755
> 
> 赞同：1
> 
> 时间：2012-12-23T05:07:33.547
> 
> 标签：meteor

从文档中可以看出，您可以使用“this.data”从呈现的回调中访问模板数据上下文。但是，每当我尝试这个时，我都会变得不确定。此处使用基本流星示例的示例[https://gist.github.com/4362039](https://gist.github.com/4362039)

还有其他人对此有疑问吗？或者有一个可以访问 this.data 的工作示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T08:24:58.227

@parkej3，你是对的，这`this.data`是从创建、渲染和销毁的回调中访问模板数据上下文的方法。但是：注意这一点很重要（双关语），因为`this`在创建、渲染和销毁的回调中是模板实例，而在模板助手中，`this`是指模板的数据上下文。

`this.data`当未使用数据上下文调用相关模板时，将未定义。

`{{#with}}`正如@Rahul 提到的，如果模板在 a or块内呈现，则模板将具有数据上下文`{{#each}}`，在这种情况下，这些语句为模板实例提供了数据上下文。 `{{#with contextObject}}`分配`contextObject`给`this.data`，而`{{#each items}}{{>item}}{{/each}}`将`item`模板设置`this.data`为每个项目的相关项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T19:51:06.533

在[同一个文档](http://docs.meteor.com/#templates)中，如果您向上滚动一点，您会发现以下句子：

> 模板实例对象作为 this 的值在创建、渲染和销毁的模板回调中找到，并作为事件处理程序的参数。

因此，正如第欧根尼建议的那样，您正在寻找`this`. `this.data`如果您有嵌套模板并希望找到您当前所在的上下文对象（例如在您有一个包含 {{#each}} 循环的模板的情况下），这很有用。

# c# - C# CS0019 IntPtr

> ID：14008756
> 
> 赞同：1
> 
> 时间：2012-12-23T05:07:44.033
> 
> 标签：c#, .net, compiler-errors, intptr

我遇到了一段 C# 源代码如下

```
int* ptr = ...;
int  w = ...;

int* ptr3 = ptr + (IntPtr)w;

CS0019: Operator '+' cannot be applied to operands of type 'int*' and 'System.IntPtr' 
```

我猜这段代码试图将 ptr 地址向前移动 w 这取决于操作系统。这是正确的，我怎样才能编译这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T05:24:09.137

如果要使用指针，则必须将代码包装在 unsafe { } 中并翻转项目属性中的允许不安全开关

![在此处输入图像描述](../Images/65b16ff7565f5f55c87f93e25077ed2f.png)

```
unsafe 
{
  //pointer code here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T08:23:01.053

不，这不是正确的语法。目前还不清楚您要完成什么，所以只是在这里猜测。如果要将指针向前移动“w”整数，请使用：

```
 int* ptr3 = ptr + w; 
```

由于 int 是 4 个字节，因此将 4*w 添加到指针值。这相当于将 ptr3 视为指向 int 数组的指针，其中 w 是数组元素的偏移量。以及 C 语言处理指针的方式。

如果您打算将地址增加 w，然后避免使用 IntPtr，C# 语言禁止在 IntPtr 上使用 + 运算符，即使 CLR 允许这样做。你需要做一些转换：

```
 int* ptr3 = (int*)((byte*)ptr + w); 
```

# javascript - javascript 在不嵌入的情况下进行闪存通信

> ID：14008757
> 
> 赞同：1
> 
> 时间：2012-12-23T05:08:26.140
> 
> 标签：javascript, actionscript-3, callback, window, externalinterface

我从 localhost Xampp 调用我的 Main.swf，其中包含一个提示按钮，单击该按钮时调用 promptclick 函数

**AS3 代码**

```
function promptClick(event:MouseEvent):void
{
var desiredURL:URLRequest = new URLRequest("javascript:NewWindow=window.open('save.html','newWin','width=600,height=400,left =0,top=0,toolbar=No,location=No,scrollbars=No,status=No,resizable=No,fullscreen=No'); NewWindow.focus(); void(0);");

navigateToURL(desiredURL, "_self");

} 
```

这个窗口（newwin）有一个在“save.html”中定义的按钮“Accept”，点击Accept按钮后数据应该被发送到调用Main.swf。我无法通过 AS3 中的 externalInterface 回调从 javascript 窗口调用 Main.swf 函数

我发现当我在包含我的编辑器的同一个窗口中嵌入 Main.swf 时它可以工作（对 Actionscript 的外部接口调用），但我不想在编辑器页面上嵌入 swf 有什么方法可以从 javascript 调用窗口直接到swf而不嵌入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:43:19.367

您的代码应该调用外部定义的 javascript 函数。例子：

**Javascript 文件：**

```
var formWin,

formWinParams = {
    btnSelector: '.btn-on-form-win',
    name: 'windowNameHere',
    src: 'save.html',

    // Advanced string join (param could just be one long string instead)
    params: [
    'width=600',
    'height=400',
    'left=0',
    'top=0',
    'toolbar=No',
    'location=No',
    'scrollbars=No',
    'status=No',
    'resizable=No',
    'fullscreen=No'
    ].join(',')
},

swfFile;

/**
 * Gets a javascript object reference to a swf file
 * @return object
 * @note You should swfobject or jquery to get your swf file but 
 * you might also need to setup a mechanism to make sure swf file 
 * is ready for interaction (or swf load is complete)
 * @see example of load check http://abi.edu/js/new-video-gallery.js
 */
function getSwf (movieName) {
    if ( navigator.appName.indexOf( "Microsoft" ) != -1 ){
        return window[ movieName ];
    }
    else {
        return document[ movieName ];
    }
}

function onBtnClick (e) {
    swfFile.functionFromSwfFileHere();
}

/**
 * Gets form window lazily (if not there create it)
 * @return window object
 * @note Javascript function params are optional so we use the || operator to check if 
 * params are set otherwise we use our own values.
 */
function getFormWindow (src, name, params) {
    src = src || formWinParams.src;
    name = name || formWinParams.name;
    params = params || formWinParams.params;

    // Create window if not already created
    if (formWin === null) {
        formWin = window.open(src, name, params);
        // Setup handling of the form window button click
        $(formWinParams.btnSelector, formWin).click(onBtnClick);
    }

    // Bring window to front
    formWin.focus();

    return formWin;
}

// Wrap initialization of script for ease of use
function init () {    
    // Get reference to swf file
    swfFile = getSwf('swfFileIdHere');

    // Or use a library like jquery
    swfFile = $('#swf-file-id-here');
}

// Initialize javascript on window load (using jquery)
$(function () {
    init();
}); 
```

现在将 UrlRequest 源更改为类似

`"javascript: getFormWindow();"`

或者

`"javascript: getFormWindow('save.html', 'saveWin');"`

这一切都是从那里处理的，简化了您的操作脚本和 javascript 代码并使其更具动态性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:58:51.180

我想通了，我在加载之前调用了 swf 对象这是我的工作回调代码：-

```
function onFlashReady() {
        sendToAS("value");
    }

    function callJS(value) {
        onFlashReady();
        return "Hi Flash.";
    }

    function thisMovie(movieName) {
         if (navigator.appName.indexOf("Microsoft") != -1) {
             return window[movieName];
         } else {
             return document[movieName];
         }
     }
     function sendToAS(value) 
     {  
         thisMovie("externalInterface").callAS(value);
     } 
```

虽然我正在发送字符串数据，但如果我尝试将图像数据作为对象发送到闪存，我的浏览器会挂起，我需要将图像数据发送到闪存。我应该怎么做才能发送数据？

# delphi - Delphi RichEdit，获取任意行的 y 像素开始

> ID：14008768
> 
> 赞同：2
> 
> 时间：2012-12-23T05:10:14.947
> 
> 标签：delphi, line, richedit, trichedit

我有一个 Richedit，其中包含使用不同字体、样式、语言等的行。

我在排水沟里画画。我想在与相应行相同的 y 像素位置开始绘图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T06:51:35.880

向控件发送`em_PosFromChar`消息。它返回给定索引处字符的客户端坐标，尽管[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761631.aspx)没有说明坐标代表什么（左上角、基线中心或什么）。您正在寻找角色的*基线*。

[`em_LineIndex`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761611.aspx)如果您还不知道您感兴趣的字符的索引，则用于获取给定行号的字符索引。

# javascript - 调用 mtgox API 会出现 JS 错误：Unexpected token ：

> ID：14008769
> 
> 赞同：0
> 
> 时间：2012-12-23T05:10:18.730
> 
> 标签：javascript, jquery, json, jsonp

当我尝试从 mtgox API 获取信息时出现以下错误。在 chrome 中，我可以看到使用 jsonp 正在工作，并且没有跨域错误：

```
$.ajax({
  type: 'GET',
  url: 'https://mtgox.com/api/1/BTCUSD/ticker?callback=?',
  async: false,
  contentType: 'application/json',
  dataType: 'jsonp',
  success: function(json) {
       console.log('ok');
  }
}); 
```

# java - JSP 中的 Scriptlet

> ID：14008771
> 
> 赞同：-3
> 
> 时间：2012-12-23T05:11:48.600
> 
> 标签：java, javascript, jsp, scriptlet

我有两个单选按钮。选择其中一个单选按钮时将弹出信息。如何检查是否使用 scriptlet 选择了单选按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T05:13:35.693

scriptlet 仅适用于服务器端。它与客户端无关，因此无论您使用哪种客户端脚本语言，您都必须检查是否使用 JavaScript 或[jQuery选择了单选按钮。](http://en.wikipedia.org/wiki/JQuery)

# c# - 从 X 天获取日期时间值？

> ID：14008778
> 
> 赞同：28
> 
> 时间：2012-12-23T05:12:43.767
> 
> 标签：c#, date, math, datetime, datetime-format

> **可能重复：**
> [c#：减去时间的最简单方法是什么？](https://stackoverflow.com/questions/3993226/c-whats-the-easiest-way-to-subtract-time)

我想

```
MyNewDateValue = MyDateNow - MyDateInteger; 
```

示例 今天是 2012 年 12 月 22 日

如果 MyDateIneger 值为 120，则 MyNewDateValue 将返回 120 天前的日期时间。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-23T05:14:28.797

```
MyNewDateValue = MyDateNow.AddDays(-MyDateInteger); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-23T05:15:26.520

请看[`DateTime.AddDays`](https://msdn.microsoft.com/en-us/library/system.datetime.adddays(v=vs.110).aspx)方法

```
DateTime oneTwentyDaysAgo = DateTime.Today.AddDays(-120); 
```

或一般来说

```
DateTime nDaysAgo = DateTime.Today.AddDays(-N);
// where N is the number of days 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-23T05:14:27.650

```
MyNewDateValue = MyDateNow.AddDays(-120); 
```

或者

```
MyNewDateValue = MyDateNow.AddDays(myVar); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T05:28:08.023

试试这个

```
DateTime dt = new DateTime();
dt = DateTime.Now;
DateTime newdt = new DateTime();
TimeSpan tim = new TimeSpan(120,0,0,0,0);
newdt = dt.Add(tim);
MessageBox.Show(newdt.ToString()); 
```

ADD.timespan 将帮助您从今天开始增加或减少天数。

# java - Java - 对 IIS 7.5 服务器的相互身份验证 - 连接重置 - 对等方未通过身份验证

> ID：14008779
> 
> 赞同：0
> 
> 时间：2012-12-23T05:13:18.967
> 
> 标签：java, iis-7.5, httpclient, keystore, client-certificates

我正在构建一个 java 客户端来连接到 Windows IIS 7.5 服务器。现在我可以控制这两个系统，因为我正在构建一个概念证明，所以 windows 机器是我笔记本电脑上的一个虚拟机。我已经在 IIS 7.5 中成功设置了客户端证书，并验证了通过自签名证书的相互身份验证是否可以通过浏览器工作。

不幸的是，在发送 SSLv2 客户端问候消息和 TLSv1 客户端问候消息后，连接正在重置，并出现 TLSv1 警报意外消息。我搜索了 StackOverflow 以及许多其他地方来解决这个问题，但似乎无法找到解决这个特定问题的方法。这是我第一次使用 Mutual Auth。我的代码如下：

```
final KeyStore keystore = KeyStore.getInstance("pkcs12");
        InputStream keystoreInput = new FileInputStream(KEY_STORE_PATH);
        keystore.load(keystoreInput, "test".toCharArray());
        System.out.println("Keystore has " + keystore.size() + " keys");
        // load the trustore, leave it null to rely on cacerts distributed with the JVM - truststore type is probably jks or pkcs12
        KeyStore truststore = KeyStore.getInstance("pkcs12");
        InputStream truststoreInput = new FileInputStream(TRUST_STORE_PATH);
        truststore.load(truststoreInput, "test".toCharArray());
        System.out.println("Truststore has " + truststore.size() + " keys");

        URI uri = new URI("https://192.168.2.112:444");
        String result = null; 
        DefaultHttpClient httpclient = new DefaultHttpClient();

                SSLSocketFactory socketFactory = new SSLSocketFactory(keystore, String.valueOf("test"), truststore); 
                Scheme sch = new Scheme("https", 444, socketFactory); 

                httpclient.getConnectionManager().getSchemeRegistry().register(sch); 

                HttpGet httpget = new HttpGet(uri.toASCIIString()); 

                HttpResponse response = httpclient.execute(httpget); 
                HttpEntity entity = response.getEntity(); 
```

调试跟踪在这里：

```
 Keystore has 1 keys
Truststore has 1 keys
***
found key for : pvktmp:0bfeeb5c-bf33-4ef3-a00e-d547e35774c6
chain [0] = [
[
  Version: V3
  Subject: CN=Chris Nanda
  Signature Algorithm: SHA1withRSA, OID = 1.3.14.3.2.29

  Key:  Sun RSA public key, 2048 bits
  modulus: 27130899851248154939882863851763653399730366371287600333384386175121736158788923280330198649817012144950949568512692167276184169703299725013344337362317100916091834207526372858824337248769441540975936119155896345867494063216196776658828993122572447899402194194077727951304168585241790036601092365261322113697370538176270611427949951453920476169582825252258759745485892192237387988896185894058602081306722996452816186803769762977498453060320624472197936928709207159769282155656635385394975574974944302095509596248869870407415024524635233253519215244773231069920494280237259291072815104686895907061226740651660601534821
  public exponent: 65537
  Validity: [From: Sat Jan 21 00:00:00 CST 2012,
               To: Tue Jan 21 00:00:00 CST 2014]
  Issuer: CN=BHS CA
  SerialNumber: [   -6e5243e9 73783768 b67202d3 8e7bd30e]

Certificate Extensions: 2
[1]: ObjectId: 2.5.29.1 Criticality=false
Extension unknown: DER encoded OCTET string =
0000: 04 3B 30 39 80 10 B2 DC   54 DD B5 45 40 62 7C B7  .;09....T..E@b..
0010: F1 73 76 53 54 14 A1 13   30 11 31 0F 30 0D 06 03  .svST...0.1.0...
0020: 55 04 03 13 06 42 48 53   20 43 41 82 10 07 BE 71  U....BHS CA....q
0030: 73 48 F3 F1 85 48 20 1C   EE 05 07 EF 20           sH...H ..... 

[2]: ObjectId: 2.5.29.37 Criticality=false
ExtendedKeyUsages [
  clientAuth
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 43 D0 3A 1C 15 DC A2 67   5A 14 44 10 78 CF 30 7C  C.:....gZ.D.x.0.
0010: AB FB 95 65 E5 5E 9F D1   40 BE 1A 5E 05 D5 CB 59  ...e.^..@..^...Y
0020: C9 D3 08 F8 DD E7 65 05   C5 22 9C A9 23 E1 4A A1  ......e.."..#.J.
0030: 71 B1 BF 09 70 1D 64 FA   94 92 51 0B 44 A2 48 4C  q...p.d...Q.D.HL
0040: 3B 4A 9B F2 E1 8C 21 D9   0E 45 BB 0E 28 9B 67 9C  ;J....!..E..(.g.
0050: A0 FC 5E DD 79 77 74 16   CB 81 F7 36 C5 33 EE 14  ..^.ywt....6.3..
0060: 85 CA F4 4E 0D 2D AF 59   C0 4E 49 58 79 8C 83 9F  ...N.-.Y.NIXy...
0070: 77 F7 DB 26 53 F0 FF 1A   F5 CB DD 44 05 FC 3B 9E  w..&S......D..;.
0080: D2 19 AF 95 B1 BA 9E 78   4A 72 84 77 32 17 68 88  .......xJr.w2.h.
0090: CC B4 04 FB C4 3F 4C D5   F4 5C B5 23 9F 78 2C A9  .....?L..\.#.x,.
00A0: A2 EB 4D 3E 95 09 B9 A8   38 35 51 95 3C B9 48 5F  ..M>....85Q.<.H_
00B0: D3 40 7B 5B 40 CE F5 47   09 30 E0 B8 AB B5 7A 61  .@.[@..G.0....za
00C0: 6D C0 11 36 5B 07 1B A4   96 B2 41 DF 6E C2 91 23  m..6[.....A.n..#
00D0: D3 D5 37 18 79 77 C6 F4   30 C4 29 C7 8E 25 63 E2  ..7.yw..0.)..%c.
00E0: 92 A3 53 C2 37 1E C4 8C   2C 8C FD 93 63 62 F4 1B  ..S.7...,...cb..
00F0: 01 36 B9 60 8F 70 DD A2   E1 25 20 78 7A AE 51 84  .6.`.p...% xz.Q.

]
***
adding as trusted cert:
  Subject: CN=BHS CA
  Issuer:  CN=BHS CA
  Algorithm: RSA; Serial number: 0x7be717348f3f18548201cee0507ef20
  Valid from Sat Jan 21 00:00:00 CST 2012 until Thu Jan 21 00:00:00 CST 2016

trigger seeding of SecureRandom
done seeding SecureRandom
trustStore is: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/security/cacerts
trustStore type is : jks
trustStore provider is : 
init truststore
adding as trusted cert:
  Subject: CN=Secure Global CA, O=SecureTrust Corporation, C=US
  Issuer:  CN=Secure Global CA, O=SecureTrust Corporation, C=US
  Algorithm: RSA; Serial number: 0x75622a4e8d48a894df413c8f0f8eaa5
  Valid from Tue Nov 07 13:42:28 CST 2006 until Mon Dec 31 13:52:06 CST 2029

adding as trusted cert:
  Subject: CN=TC TrustCenter Class 2 CA II, OU=TC TrustCenter Class 2 CA, O=TC TrustCenter GmbH, C=DE
  Issuer:  CN=TC TrustCenter Class 2 CA II, OU=TC TrustCenter Class 2 CA, O=TC TrustCenter GmbH, C=DE
  Algorithm: RSA; Serial number: 0x2e6a000100021fd752212c115c3b
  Valid from Thu Jan 12 08:38:43 CST 2006 until Wed Dec 31 16:59:59 CST 2025

adding as trusted cert:
  Subject: CN=VRK Gov. Root CA, OU=Varmennepalvelut, OU=Certification Authority Services, O=Vaestorekisterikeskus CA, ST=Finland, C=FI
  Issuer:  CN=VRK Gov. Root CA, OU=Varmennepalvelut, OU=Certification Authority Services, O=Vaestorekisterikeskus CA, ST=Finland, C=FI
  Algorithm: RSA; Serial number: 0x186a0
  Valid from Wed Dec 18 07:53:00 CST 2002 until Mon Dec 18 07:51:08 CST 2023

trigger seeding of SecureRandom
done seeding SecureRandom
main, setSoTimeout(0) called
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  GMT: 1339396239 bytes = { 174, 62, 41, 222, 119, 84, 174, 118, 101, 33, 7, 220, 249, 96, 130, 234, 41, 163, 171, 6, 194, 145, 45, 132, 134, 39, 186, 32 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
***
[write] MD5 and SHA1 hashes:  len = 81
0000: 01 00 00 4D 03 01 50 D6   91 8F AE 3E 29 DE 77 54  ...M..P....>).wT
0010: AE 76 65 21 07 DC F9 60   82 EA 29 A3 AB 06 C2 91  .ve!...`..).....
0020: 2D 84 86 27 BA 20 00 00   26 00 04 00 05 00 2F 00  -..'. ..&...../.
0030: 35 00 33 00 39 00 32 00   38 00 0A 00 16 00 13 00  5.3.9.2.8.......
0040: 09 00 15 00 12 00 03 00   08 00 14 00 11 00 FF 01  ................
0050: 00                                                 .
main, WRITE: TLSv1 Handshake, length = 81
[write] MD5 and SHA1 hashes:  len = 110
0000: 01 03 01 00 45 00 00 00   20 00 00 04 01 00 80 00  ....E... .......
0010: 00 05 00 00 2F 00 00 35   00 00 33 00 00 39 00 00  ..../..5..3..9..
0020: 32 00 00 38 00 00 0A 07   00 C0 00 00 16 00 00 13  2..8............
0030: 00 00 09 06 00 40 00 00   15 00 00 12 00 00 03 02  .....@..........
0040: 00 80 00 00 08 00 00 14   00 00 11 00 00 FF 50 D6  ..............P.
0050: 91 8F AE 3E 29 DE 77 54   AE 76 65 21 07 DC F9 60  ...>).wT.ve!...`
0060: 82 EA 29 A3 AB 06 C2 91   2D 84 86 27 BA 20        ..).....-..'. 
main, WRITE: SSLv2 client hello message, length = 110
[Raw write]: length = 112
0000: 80 6E 01 03 01 00 45 00   00 00 20 00 00 04 01 00  .n....E... .....
0010: 80 00 00 05 00 00 2F 00   00 35 00 00 33 00 00 39  ....../..5..3..9
0020: 00 00 32 00 00 38 00 00   0A 07 00 C0 00 00 16 00  ..2..8..........
0030: 00 13 00 00 09 06 00 40   00 00 15 00 00 12 00 00  .......@........
0040: 03 02 00 80 00 00 08 00   00 14 00 00 11 00 00 FF  ................
0050: 50 D6 91 8F AE 3E 29 DE   77 54 AE 76 65 21 07 DC  P....>).wT.ve!..
0060: F9 60 82 EA 29 A3 AB 06   C2 91 2D 84 86 27 BA 20  .`..).....-..'. 
main, handling exception: java.net.SocketException: Connection reset
main, SEND TLSv1 ALERT:  fatal, description = unexpected_message
main, WRITE: TLSv1 Alert, length = 2
main, Exception sending alert: java.net.SocketException: Broken pipe
main, called closeSocket()
main, IOException in getSession():  java.net.SocketException: Connection reset
main, called close()
main, called closeInternal(true)
main, called close()
main, called closeInternal(true)
peer not authenticated 
```

每次都出现同样的错误，所以我假设在 IIS 中有一个我丢失的细节，或者我在 java 中丢失了某种类型的标志。正如我所说，这适用于加载证书的浏览器。

是什么导致了这个握手错误，上面的代码有什么不正确的吗？握手期间没有返回 ServerHello。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-06T11:45:45.653

当我尝试使用基于 X509 证书的身份验证从轴 2 客户端存根使用 IIS 服务时，我给出了完全相同的错误。

在我将传输通道实现从默认的 httpclient3 更改为较新的 httpclient4 后，问题就消失了。

Ps：并尝试将 SSLContext 强制为 TLSv1.2 ...您可以[在此处查看我的工作测试实现](https://stackoverflow.com/questions/52554807/how-to-configure-ssl-with-axis2-using-httpclient4/53171162#53171162)

# javascript - 保存到 RTF 文件的 HTML/JSP/JS 富文本编辑器

> ID：14008780
> 
> 赞同：2
> 
> 时间：2012-12-23T05:13:21.973
> 
> 标签：javascript, html, jsp, rtf, rich-text-editor

我一直在寻找一个完全基于 Web 的富文本编辑器的 API/教程/程序。我找到了多个，但我想要一个具有以下特征的富文本编辑器：

1.  基于浏览器，以 HTML、JSP、Java Servlet 或 Java Script 编码。
2.  直接保存到 .rtf 文件中
3.  可以打开 .rtf 文件

提前谢谢你，如果有人问过这个问题，我很抱歉，因为我已经搜索了一段时间，但什么也没找到。

编辑：可能值得注意；这将在学校使用，作为 Google Drive 的替代品，因此它只需要支持样式，不需要其他“特殊效果”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:09:43.127

Lakshmanan 回答我的问题：“好吧，我认为您需要一个所见即所得的编辑器..您是否正在寻找类似这样的东西.. [WYS‌​IWYG 编辑器](http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editor)

# css - 媒体查询 - 在两个宽度之间

> ID：14008781
> 
> 赞同：180
> 
> 时间：2012-12-23T05:13:34.630
> 
> 标签：css, media-queries

我正在尝试使用 CSS3 媒体查询来制作一个仅在宽度大于 400 像素且小于 900 像素时出现的类。我知道这可能非常简单，而且我遗漏了一些明显的东西，但我无法弄清楚。我想出的是下面的代码，感谢任何帮助。

```
@media (max-width:400px) and (min-width:900px) {
    .class {
        display: none;
    }
} 
```

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-12-23T05:19:24.170

您需要切换您的值：

```
/* No less than 400px, no greater than 900px */
@media (min-width:400px) and (max-width:900px) {
    .foo {
        display:none;
    }
}​ 
```

Demo： http: [//jsfiddle.net/xf6gA/](http://jsfiddle.net/xf6gA/)（使用背景色，更容易确认）

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-01-29T13:53:58.230

@Jonathan Sampson 我认为如果您使用多个**@media** ，您的解决方案是错误的。

你应该使用（*最小宽度优先*）：

```
@media screen and (min-width:400px) and (max-width:900px){
   ...
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-09T08:56:29.500

只是想把我的`.scss`例子留在这里，我认为这是一种最佳实践，特别是我认为如果你进行自定义，最好只设置一次宽度！到处都应用它并不聪明，你会成倍增加人为因素。

我期待您的反馈！

```
// Set your parameters
$widthSmall: 768px;
$widthMedium: 992px;

// Prepare your "function"
@mixin in-between {
     @media (min-width:$widthSmall) and (max-width:$widthMedium) {
        @content;
     }
}

// Apply your "function"
main {
   @include in-between {
      //Do something between two media queries
      padding-bottom: 20px;
   }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-11T11:03:32.117

```
.class {
    display: none;
}
@media (min-width:400px) and (max-width:900px) {
    .class {
        display: block; /* just an example display property */
    }
}
```

# asp.net - 我网站上的奇怪问题

> ID：14008787
> 
> 赞同：2
> 
> 时间：2012-12-23T05:15:21.540
> 
> 标签：asp.net

该网站自 2 个月以来一直运行良好，现在显示错误：

```
Server Error in '/' Application.
Parser Error
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately.
Parser Error Message: Could not load the assembly 'App_Web_ir1tlux4'. Make sure that it is compiled before accessing the page.
Line 1:  <%@ page title="MIS for Cattle & Buffalo - Home" language="C#" masterpagefile="~/MainMaster.master" autoeventwireup="true" inherits="index, App_Web_ir1tlux4" %> 
```

奇怪的是，如果我重新上传一个新发布的版本，网站会正常工作 1/2 小时，然后它会再次显示上述错误。

请帮忙

我已经尝试在 web.config 文件中进行不同的修改，并在类似的线程中对 forums.asp.net 上的其他建议进行了尝试，但似乎没有什么对我有用

此外，具有以下内容的文件 .htaccess 仅出现在 FTP 中，我认为当托管公司服务器添加此文件时，问题就开始了：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{HTTP_REFERER} ^http://[w.]*([^/]+)
    RewriteCond %{HTTP_HOST}/%1 !^[w.]*([^/]+)/\1$ [NC]
    RewriteRule ^.*$ http://travlor.com/acgu.html [L,R]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:34:43.747

我没有做任何新的事情，它已修复我认为托管服务器的 IIS 必须更改一些设置，以便将我的网站文件夹添加为应用程序。

所以无事可做就解决了

# iphone - 如何从其他故事板场景中的主故事板场景访问变量？

> ID：14008794
> 
> 赞同：0
> 
> 时间：2012-12-23T05:17:00.147
> 
> 标签：iphone, ios

我正在开发一个有 3 个故事板场景的应用程序。在第一个故事板场景中，我有一些我想在其他两个场景中访问的变量。我该怎么做？我使用 Storyboard segue 导航到其他两个场景并在按钮单击时调用以下内容

```
[self performSegueWithIdentifier:@"nameofsegue" sender:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:32:21.890

使用此方法

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"nameofsegue"]) {
        YourDestinationVC *dvc = [segue destinationViewController];
        YourSourceVC *svc = (YourSourceVC*)sender;
        //set your ivr here
    }
} 
```

# javascript - 页面加载后立即显示 Javascript 警报

> ID：14008797
> 
> 赞同：1
> 
> 时间：2012-12-23T05:18:11.813
> 
> 标签：javascript, alert

我是 Javascript 的新手。以下代码中的错误是页面加载后立即显示警报消息。请帮我克服这个错误。当我点击提交按钮时，不会显示警报，而是打开下一个链接。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Delete Book</title>
<link rel="stylesheet" type="text/css" media="screen" href="css/default.css" />
</head>
<body id="index_page">
<div id="wrapper">
    <div id="header">
        <h1 align="left">Library</h1>
    </div> 
    <ul id="navigation">
        <li id="index"><a href="http://localhost/UID/FAQ.php">FAQ</a></li>
    </ul>
    <div id="content">
    <div id="main_content">
    <h2>Delete book</h2>
 <h4>Enter details of the book</h4>
 <FORM action="del_book_action.php" method="post" >
  <TABLE WIDTH="70%" >

  <TR>
      <TH width="60%">Enter book ID:</TH>
      <TD width="50%"><INPUT TYPE="text" name="id" id="book_id"></TD>
  </tr>
  <TR>
      <TH></TH>
      <TD width="50%"><INPUT TYPE="submit" Value="Submit"         onclick="validate_f()"></TD>
  </tr>
  </TABLE>
 </FORM>

</div>
<p id="footer"><a href="http://localhost/UID/UID.php">@AntonyAjay,2012</a></p>
</div>

<script language="javascript">
window.onload=function validate_f()
{
 var y=document.getElementById("book_id").value;
 if(y==""||isNaN(x))
{
alert("Book Id should be numeric");
}
 }
</script>

 </body> 
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:22:46.503

您正在页面加载时运行该功能。改变这个：

```
window.onload=function validate_f() 
```

到：

```
function validate_f() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:21:40.847

看看更改是否`isNaN(x)`可以`isNaN(y)`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T05:22:42.937

删除加载时的窗口代码的目的是在提交时进行验证。发生的事情是在页面加载时调用该函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T05:22:57.667

这是因为您正在调用函数 onclick。进行两个更改。不要在加载时使用该功能。使用下面的 html 更改和脚本

```
<INPUT TYPE="submit" Value="Submit" onclick="return validate_f()">

    function validate_f()
{
 var y=document.getElementById("book_id").value;
 if(y==""||isNaN(x))
{
alert("Book Id should be numeric");
return false;
}
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T05:25:38.523

您将对函数的引用传递给 window.onload 而不是实际调用。

```
<script>
window.onload = function(){
 alert('test');
}
</script> 
```

# c++ - Boost DLL 命名 - 自定义“布局”

> ID：14008798
> 
> 赞同：2
> 
> 时间：2012-12-23T05:18:14.713
> 
> 标签：c++, boost, bjam

阅读[了这个问题](https://stackoverflow.com/questions/8940249/boost-how-bjam-constructs-a-library-name)后，有没有办法在构建 boost 时指定自定义 DLL 命名布局？

如果您可以使用一些简短的魔术变量命名格式（例如“lib%name-%variation-%mt”）来生成“libboost_chrono-debug-multithread.dll”（例如），那就太好了，这样您就可以重新- 排列和删除/包含您想要的信息。这样的boost配置方式是否存在？

# c++ - 共享互斥体是否比相对较大结构的原子更有效？

> ID：14008799
> 
> 赞同：8
> 
> 时间：2012-12-23T05:18:32.817
> 
> 标签：c++, multithreading, c++11, mutex, atomic

假设我有一个看起来像这样的类（实际上正是这个大小）：

```
class K
{
public:

    long long get_x() const; // lock m_mutex in shared/read-only mode

    void update( long long w ); // lock m_mutex with a unique_lock

private:
    long long m_a;
    long long m_b;
    long long m_c;
    long long m_x;
    double m_flow_factor;

    mutable boost::shared_mutex m_mutex;
}; 
```

如您所见，这应该是线程安全的。更新函数一次被一个线程调用，未知但只有一个线程（保证），但是访问器可以被多个线程同时调用。

更新函数正在改变所有的值并且被非常频繁地调用（每秒一百次）。您可以猜到，当前的实现将锁定很多。

我正在考虑使用 std::atomic 来避免锁定并可能使此代码更有效。但是，我真的需要更新函数来一起更新值。因此，我正在考虑做这样的事情：

```
class K
{
public:

    long long get_x() const
    { return data.load().x; }

    void update( long long w )
    {
        auto data_now = data.load();
        // ... work with data_now
        data.store( data_now );
    }

private:
    struct Data {
    long long a;
    long long b;
    long long c;
    long long x;
    double flow_factor;
    };
    std::atomic<Data> data;
}; 
```

我目前对 std::atomic 的理解是，即使这段代码比前一个代码更具可读性（因为它没有到处都有锁声明），**因为 K::Data 结构是“大”的，std::atomic将只使用普通的互斥锁来实现**（所以它不应该比我的初始实现更快）。

我对么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T05:33:27.557

像这样的结构的 std:atomic 的任何特化都将涉及内部锁定，所以你什么也没得到，现在你在加载和存储之间也有你以前没有的数据竞争，因为它有排他锁定在以前的版本中围绕整个街区（我想？）。

同样对于 shared_mutex，使用普通互斥锁与 shared_mutex 进行分析可能是明智的，您可能会发现普通互斥锁执行得更好（这一切都取决于您持有锁的时间）。

shared_mutex 的好处只有在锁被长时间持有以供读取并且写入很少时才能看到，否则 shared_mutex 所涉及的开销会扼杀您对普通互斥锁的任何收益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-21T06:34:23.240

std::atomic 不一定比 std::mutex 慢。例如在 MSVC 14.0 中，std::atomic.store 的实现如下所示：

```
inline void _Atomic_copy(
volatile _Atomic_flag_t *_Flag, size_t _Size,
    volatile void *_Tgt, volatile const void *_Src,
        memory_order _Order)
{   /* atomically copy *_Src to *_Tgt with memory ordering */
_Lock_spin_lock(_Flag);
_CSTD memcpy((void *)_Tgt, (void *)_Src, _Size);
_Unlock_spin_lock(_Flag);
}

inline void _Lock_spin_lock(
volatile _Atomic_flag_t *_Flag)
{   /* spin until _Flag successfully set */
while (_ATOMIC_FLAG_TEST_AND_SET(_Flag, memory_order_acquire))
    _YIELD_PROCESSOR;
} 
```

不能保证自旋锁会比正确的 std::mutex 更快。这取决于你到底在做什么。但与 std::mutex 相比，std::atomic 肯定不总是一个次优的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-15T11:29:07.480

无论是否使用锁实现，您对 atomic 的默认使用（即具有顺序一致性）都非常慢，并且可能与互斥锁一样慢，如果不慢的话。调整内存屏障`update()`可能会带来更好的性能：

```
void update( long long w )
{
    auto data_now = data.load(std::memory_order_acquire);
    // ... work with data_now
    data.store(data_now, std::memory_order_release);
} 
```

此外，如果您不需要线程之间的顺序一致性（您不同步写入器与读取器），您可以进一步优化读取器：

```
long long get_x() const
{ return data.load(std::memory_order_relaxed).x; } 
```

# php - 如何防止 phpmailer 发送具有不同“发件人”地址的电子邮件？

> ID：14008801
> 
> 赞同：1
> 
> 时间：2012-12-23T05:18:40.813
> 
> 标签：php, email, phpmailer

我问这个问题只是因为我很好奇，可能这是一件非常愚蠢且众所周知的事情，但我在网上找不到答案：

今天我在帮助一个朋友做他的网站。他让我准备一个 html 电子邮件模板，他可以使用 phpmailer 通过他的网站（例如 www.myfriendswebsite.com）发送该模板。我通过将他的电子邮件地址（例如 info@myfriend.com）放在“发件人”部分中来准备并在我的域/服务器中进行测试。我通过我的网站（例如 www.mywebsite.com）向我的个人电子邮件地址（例如 myname@hotmail.com）发送了一封电子邮件，当我收到电子邮件时，我意识到我什至看不到我的域的姓名或电子邮件地址（例如 info@mydomain.com）；相反，我看到的是我朋友的电子邮件地址 (info@myfriend.com)。当我点击“回复”时，它会回复我朋友的地址；它看起来像是直接从我朋友的网站发送的。当然; 如果我提取原始来源，我会看到我收到电子邮件的详细信息，但是是什么阻止了其他人使用我的电子邮件地址和垃圾邮件？我很确定这是另一种发送垃圾邮件和入侵人们帐户的方式，但有没有办法防止这种情况发生？这让我有点害怕，我不知道还能去哪里，但 Stackoverflow :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T05:53:58.613

一方面，您不应发送`From:`由用户提供的数据填充的电子邮件；将`Reply-To:`标题用于此类目的。

您不应该这样做的原因是收件箱服务，例如 Google Mail、Yahoo 等，使用[发件人策略框架 (SPF)](http://en.wikipedia.org/wiki/Sender_Policy_Framework)来确定发送邮件的邮件服务器是否被授权代表域发送；您可能会冒着从您的服务器发送的邮件被识别为垃圾邮件而不被送达的风险。

[因此，要回答您的问题，即使可以伪装任何人的电子邮件地址，但由于改进了垃圾邮件过滤器和黑名单](http://en.wikipedia.org/wiki/DNSBL)，要传递这些邮件变得越来越困难，这样做甚至可以将您的邮件服务器列入黑名单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T05:44:03.603

> 是什么阻止了其他人使用我的电子邮件地址和垃圾邮件？

没有。想象一张明信片，是什么阻止了其他人使用您的地址并将明信片发送到世界各地？没有。

电子邮件也是如此，互联网的明信片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T05:23:15.520

像这样编辑标题将/应该解决问题。

```
$headers = 'From: info@myfriend.com' . "\r\n";
$headers .= 'Reply-To: info@myfriend.com' . "\r\n";
$headers .= 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

# ios - 如何将字符串从一个数组添加到另一个数组

> ID：14008802
> 
> 赞同：0
> 
> 时间：2012-12-23T05:18:43.440
> 
> 标签：ios, nsstring, nsmutablearray

我似乎无法将 arrayOne 中的字符串附加到 arrayTwo 中。这是一个非常简单的问题，我用谷歌搜索并尝试了我在下面找到的不同示例。有人在这里看到明显的问题吗？

```
[_arrayTwo addObject:arrayOne[i]]; // int i
[_arrayTwo addObject:[arrayOne objectAtIndex:i]]; // int i
[_arrayTwo addObject:@"Test"]; // I can't even add a literal string

NSString *tempString = [arrayOne objectAtIndex:i];
[arrayTwo addObject:tempString]; 
```

**NSLog 输出：**

```
NSLog(@"%@", _imageArray); // Result is "(null)" 
```

**补充笔记：**

1.  arrayOne 是健康的（包含 NSString 值）
2.  两个数组都是 NSMutableArray（在 .h 中声明为属性）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T05:21:27.390

我相信 _imageArray 是零

尝试添加

```
_imageArray = [[NSMutableArray alloc] init]; 
```

在您的 init 方法调用中。

# entity-framework-5 - 为什么 DbContext FirstOrDefault 会忽略已添加的实体？

> ID：14008806
> 
> 赞同：0
> 
> 时间：2012-12-23T05:19:57.747
> 
> 标签：entity-framework-5

我想在实体集中搜索我已添加到其中的对象 - 但它无法找到该对象

当我使用相同的实体类型名称多次调用此过程时，它总是添加一个新对象。为什么？

```
private EntityRegister  GetEntityRegister(string entityTypeName)
    {
        var er = Db.EntityRegisters.FirstOrDefault(e => e.Name == entityTypeName);
        if (er == null)
        {
            er = new EntityRegister()

            {
                Name = entityTypeName 

            };
            Db.EntityRegisters.Add(er);

        }
        return er;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:30:16.303

您保存更改了吗？如果您没有保存更改，则 FirstOrDefault 会转到数据库，新添加的实体不在数据库中，因此 FirstOrDefault 返回 null。

# web-services - 如何使用 Youtube API 在单个用户的视频中搜索？

> ID：14008822
> 
> 赞同：4
> 
> 时间：2012-12-23T05:23:06.363
> 
> 标签：web-services, api, web, youtube, youtube-api

我正在使用 Youtube API 构建一个音乐视频流媒体网站，我将通过我的帐户上传我的所有视频，并使用特定于用户的提要获取我自己的视频。

我想知道这是否可能以及如何在用户上传的视频中进行搜索，即搜索应该返回仅包含我上传的视频的结果。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:48:35.453

假设您使用的是 YouTube 数据 API 的 v1/v2，添加到您的搜索查询的相关参数是`author=USER`，其中*USER*是 YouTube 用户名或 YouTube 频道 ID。

这记录在[https://developers.google.com/youtube/2.0/reference#authorsp](https://developers.google.com/youtube/2.0/reference#authorsp)

# postgresql - 如何在 Ubuntu 中找到 pgAdminIII GUI

> ID：14008823
> 
> 赞同：3
> 
> 时间：2012-12-23T05:23:07.067
> 
> 标签：postgresql, ubuntu, windows-8

我有一台操作系统是 Ubuntu 并且已经安装了 PostgreSQL 的机器。以及提供的凭据

```
User Name: somename
Password: somepassword 
```

基本上我在 Windows 8 环境中工作，安装 PostgreSQL 后，我们可以从 Start charms 中找到它

![在此处输入图像描述](../Images/ced64f419e78c201ef306ad9af0091b9.png)

如何从 Ubuntu 做同样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T06:49:22.697

在 Ubuntu 中，您可以使用以下控制台命令安装 PgAdmin3：

```
sudo apt-get install pgadmin3 
```

完成后，您可以从控制台启动它，`pgadmin3`或者您可以在 Unity 中通过按`Windows`键并键入来找到它`pgadmin`。

如果您的 Ubuntu 早于 12.04，标准提供的 PgAdmin 可能太旧而无法使用，您可能必须从其他 Ubuntu 存储库安装 pgadmin3。例如，当我需要在 Ubuntu 10.10 上安装它时，我会这样做：

```
sudo apt-add-repository ppa:rhonda/pgadmin3
sudo apt-get update
sudo apt-get install pgadmin3 
```

# c++ - Boost多边形库布尔函数计算时间

> ID：14008826
> 
> 赞同：1
> 
> 时间：2012-12-23T05:23:53.977
> 
> 标签：c++, performance, boost, polygon, boost-polygon

有人用过Boost多边形库的布尔函数吗？ [增强多边形库](http://www.boost.org/doc/libs/1_52_0/libs/polygon/doc/index.htm)

它说该算法的时间复杂度为 O(nlogn)，n = #points

我输入了 200000 个随机生成的多边形（有 5~8 个点）

但是 OR 和 XOR 函数大约需要半个小时（是的，只需调用它的函数）

虽然结果是正确的，但是耗时太可怕了

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:47:33.890

尽管发布表现出所描述行为的代码总是有帮助的，但我假设每个 i=1..n 多边形与之前的每个 1..(i-1) 多边形都有一些（唯一）交叉，这意味着对前 n-1 个多边形进行异或运算得到的点数在 n 中是二次的，因此您请求 n 次 O(#Points * log(#Points)) 的操作，其中 #Points 为 O(n ^2)，因此总复杂度为 O(n^2*log(n))。

# ios - 在带有标签的tableview中添加自定义按钮

> ID：14008831
> 
> 赞同：2
> 
> 时间：2012-12-23T05:24:46.723
> 
> 标签：ios, button, tags, tableview

大家好，我正在尝试添加带有与 indexPath.row 相关的标签的自定义按钮。如果我不将新行插入到 tableview 中，我可以正确查看标签值。但是，当我插入新行时，如果插入的行不在 0 到 9 之间（iphone 5 可以显示），我的新行标签值不正确。在 iphone 上，我需要向下滚动才能看到。

但是，使用相同的代码，我可以在 ipad 上正确获取我的标签值。我不需要向下滚动 ipad 上的表格视图来查看我的所有行。我想知道它为什么会发生以及如何解决。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"dialoguesTableCell";
    dialoguesCell *cell = [tableViewdequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[dialoguesCell alloc] initWithStyle:UITableViewCellStyleDefault 
            reuseIdentifier:CellIdentifier];

    }

    UIButton *yourButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [yourButton setImage:[UIImage imageNamed:@"1StarBlank.png"]     forState:UIControlStateNormal];
    [yourButton setTitle:@"Button" forState:UIControlStateNormal];
    [yourButton addTarget:self action:@selector(buttonSelected:)   forControlEvents:UIControlEventTouchUpInside];
    yourButton.tag=indexPath.row;
    yourButton.frame = CGRectMake(5, 10, 40, 25);
    [cell addSubview:yourButton];
    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath    *)indexPath
{
   NSIndexPath *indexPathstoinsert = [NSIndexPath indexPathForRow:indexPath.row+1     inSection:section];
   NSArray *indexPathsToInsertArray = [NSArray arrayWithObject:indexPathstoinsert];
   [[self mainTableView] insertRowsAtIndexPaths:indexPathsToInsertArray withRowAnimation:UITableViewRowAnimationRight];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:04:38.567

这无法正常工作，因为 UITableView在您向下滚动时**重用**单元格
，第一个单元格不再可见并被重用。

**如果表格是..“小”，您可以通过不重复使用单元格**来解决它
**但是**如果表格不仅仅是几个条目而是大量数据，您真的想改变自己的方式

为按钮分配标签：
`- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`

例如

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    UIButton *b = nil;
    for(UIView *v in cell.subviews) {
        if([v isKindOfClass:[UIButton class]]) {
            b = (UIButton*)v;
            break;
        }
    }

    b.tag = indePath.row;
} 
```

* * *

在评论中您提到了另一个问题：按钮隐藏在您的`didSelectRow`方法中，然后在滚动后也从其他单元格中消失。同样的问题：单元格对象被**表格视图重用**。不要将状态存储在可重复使用的单元格中！

而是有一个“模型”树或数组来记住状态：文本、图像、标签、隐藏：是/否

`NSArray *myTableContents`

```
 NSMutableDictionary *d1 = [@{@"text:@"bla", @"hidden":@NO} mutableCopy];
 NSMutableDictionary *d2 = [@{@"text:@"bloo", @"hidden":@NO} mutableCopy];
 NSMutableDictionary *d3 = [@{@"text:@"foo", @"hidden":@NO} mutableCopy];
 myTableContents = @[d1,d2,d3]; 
```

然后总是在 numberOfRows 和 viewForRow 中使用那个数组并在 didSelectEntry 中修改它

# php - 如何在 CodeIgniter 中包含 CSS 文件？

> ID：14008832
> 
> 赞同：8
> 
> 时间：2012-12-23T05:25:16.830
> 
> 标签：php, html, css, codeigniter

我在应用程序文件夹所在的根目录中创建了一个资产文件夹。现在我有资产兄弟应用程序。

现在，当我尝试`http://localhost/CodeIgniter/assets/css/bootstrap.min.css`在网页中打开时，它不起作用。

有人可以帮助我如何让它工作。

在一个解决方案中，我发现在配置文件中写入这一行将起作用，但通过进行此更改也不起作用。

```
$config['base_url'] = 'http://localhost/CodeIgniter/'; 
```

现在请指导我如何在 CI 中加载 CSS 文件。

解决方案 ：-

我在我的 codeigniter 项目中做错了什么。我再次下载并再次尝试这些东西，但没有任何效果。

谢谢大家。你节省了我的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T05:56:42.517

**在常量.php 中：**

```
define('URL','http://localhost/CodeIgniter/');
define('IMG',URL.'assets/img/');
define('CSS',URL.'assets/css/');
define('JS',URL.'assets/js/'); 
```

**在 config.php 中：**

```
$config['base_url'] = URL; 
```

**鉴于：**

```
<link rel="stylesheet" href="<?php echo(CSS.'bootstrap.min.css'); ?>"> 
```

希望能有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T06:00:21.717

定义使用的通用 css。在 CodeIgniter\system\application\config 目录中打开“config.php”。

```
$config['css'] = 'mystyles.css'; 
```

在根应用程序中创建一个名为 mystyles.css 的文件：\CodeIgniter。

```
$this->load->helper('url');       
$data['css']        = $this->config->item('css'); 
```

您可以像这样在视图页面中加载 css。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T15:54:51.423

在您的控制器操作 /application/controllers/yourController.php 中添加以下行

```
$this->load->helper('url'); 
```

然后将以下行添加到您的视图文件的头标签。

```
<link rel="stylesheet" type="text/css" href="<? echo base_url('assets/css/yourcssfile.css');?>" /> 
```

假设您在 app 目录中创建了 assets/css/ 文件夹。

```
<path to your app folder>/assets/css 
```

# android - 在可扩展列表中选择子项时如何合并弹出窗口

> ID：14008834
> 
> 赞同：1
> 
> 时间：2012-12-23T05:25:47.053
> 
> 标签：android, drop-down-menu, actionbarsherlock, expandablelistview, popupwindow

这是一个漂亮的千篇一律的程序，它扩展了一个列表，然后当你点击一个孩子时，它会弹出一条消息，说“孩子点击了”。但我希望可扩展列表包含食谱，以便在单击时显示一个弹出窗口的成分。我尝试将其设置为对象数组列表而不是字符串，并让对象包含成分列表，但是在尝试显示成分时我感到很困惑..提前致谢！

```
package com.poe.poeguide;

import java.util.ArrayList;
import com.actionbarsherlock.app.SherlockActivity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ExpandableListView;
import android.widget.Toast;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.OnNavigationListener;
import com.actionbarsherlock.view.MenuItem;
import android.widget.ExpandableListView.OnChildClickListener;

public class Recipes extends SherlockActivity {
private ExpandableListView mExpandableList;

 /** An array of strings to populate dropdown list */
String[] actions = new String[] {
   "Recipes",
   "Main Page",
   "Attributes",
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_recipes);

    /** Create an array adapter to populate dropdownlist */
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getBaseContext(), R.layout.sherlock_spinner_item, actions);

    /** Enabling dropdown list navigation for the action bar */
    getSupportActionBar().setNavigationMode(com.actionbarsherlock.app.ActionBar.NAVIGATION_MODE_LIST);

    /** Defining Navigation listener */
    ActionBar.OnNavigationListener navigationListener = new OnNavigationListener() {

        @Override
        public boolean onNavigationItemSelected(int itemPosition, long itemId) {
            switch(itemPosition) {
            case 0:

                break;
            case 1:
                Intent a = new Intent(Recipes.this, MainActivity.class);
                startActivity(a);
                break;
            }
            return false;
        }

    };

    getSupportActionBar().setListNavigationCallbacks(adapter, navigationListener);
    adapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    mExpandableList = (ExpandableListView)findViewById(R.id.expandable_list);

    ArrayList<Parent> arrayParents = new ArrayList<Parent>();
    ArrayList<String> arrayChildren = new ArrayList<String>();

    //======================================================================================
    //here we set the parents and the children
        //for each "i" create a new Parent object to set the title and the children
        Parent parent = new Parent();
        parent.setTitle("Pies");
        arrayChildren.add("Apple Pie ");
        arrayChildren.add("Blueberry Pie ");
        parent.setArrayChildren(arrayChildren);

        //in this array we add the Parent object. We will use the arrayParents at the setAdapter
        arrayParents.add(parent);

    //======================================================================================

    //sets the adapter that provides data to the list.
    mExpandableList.setAdapter(new MyCustomAdapter(Recipes.this,arrayParents));

    mExpandableList.setOnChildClickListener(new OnChildClickListener()
    {

        @Override
        public boolean onChildClick(ExpandableListView arg0, View arg1, int arg2, int arg3, long arg4)
        {
            Toast.makeText(getBaseContext(), "Child clicked", Toast.LENGTH_LONG).show();
            return false;
        }
    });

}

@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_recipes, menu);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:35:22.687

在我们开始之前，请注意这`Recipes`是一个令人困惑的 Activity 名称。我强烈建议更改名称以遵循以“活动”一词结尾的标准约定（例如，`RecipeActivity`）。

* * *

首先，您需要创建一个`Recipe`对象，以便将名称和成分存储在一起。这个对象可以根据需要简单或复杂，但让我们假设它看起来像这样：

```
import java.util.List;

public class Recipe {
    private String name;
    private List<String> ingredients;
    private List<String> directions;

    @Override
    public String toString() {
        // By default, the Adapter classes in Android will call toString() on
        // your object to figure out how it should appear in lists. To make sure
        // the list displays the recipe name, we return the recipe name here.
        return name;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public List<String> getIngredients() {
        return ingredients;
    }

    public void setIngredients(List<String> ingredients) {
        this.ingredients = ingredients;
    }

    public List<String> getDirections() {
        return directions;
    }

    public void setDirections(List<String> directions) {
        this.directions = directions;
    }
} 
```

请注意，我们覆盖`toString()`此对象并返回配方名称。这样，当我们要求适配器类显示`Recipe`对象列表时，它就知道应该为列表中的每个项目显示什么文本。

* * *

在为您的列表创建数据时，而不是：

```
ArrayList<String> arrayChildren = new ArrayList<String>(); 
```

利用：

```
List<Recipe> arrayChildren = new ArrayList<Recipe>(); 
```

*（注意：如果该字段现在只接受，您可能需要修改`Parent`要采用的类`List<Recipe>`或子类的泛型。）`List<?>``List<String>`*

让我们添加一个示例`Recipe`对象：

```
Recipe salsa = new Recipe();
salsa.setName("Pineapple Salsa");
salsa.setIngredients(Arrays.asList("pineapple", "cilantro", "lime", "jalapeno"));
salsa.setDirections(Arrays.asList("Blend ingredients and enjoy"));
arrayChildren.add(salsa); 
```

现在您的列表由`Recipe`对象支持，而不仅仅是字符串，只需在单击列表项时获取该对象即可。您可以这样做：

```
mExpandableList.setOnChildClickListener(new OnChildClickListener() {
    @Override
    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {
        // Get the selected recipe
        Recipe recipe = (Recipe) parent.getExpandableListAdapter()
                .getChild(groupPosition, childPosition);

        // Build a string listing the ingredients
        StringBuilder message = new StringBuilder("Ingredients:\n");
        for (String ingredient : recipe.getIngredients())
            message.append("\n").append(ingredient);

        // Display a dialog listing the ingredients
        new AlertDialog.Builder(MyGreatHelloWorldActivity.this)
                .setTitle(recipe.getName()).setMessage(message)
                .setPositiveButton("Yum!", null).show();

        // Return true because we handled the click
        return true;
    }
}); 
```

* * *

**更新：**以下是使用可扩展列表的简洁适配器完成任务的方法。

我创建了一个名为`ExpandableListGroup` *（相当于你的`Parent`类）*的通用类来容纳孩子。该类是通用的，因此它可以与任何类型的对象一起使用，但我们会将它与`Recipe`对象一起使用。

```
import java.util.List;

public class ExpandableListGroup<T> {
    private String name;
    private List<T> children;

    public ExpandableListGroup(String name, List<T> children) {
        this.name = name;
        this.children = children;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public List<T> getChildren() {
        return children;
    }

    public void setChildren(List<T> children) {
        this.children = children;
    }

    @Override
    public String toString() {
        return name;
    }
} 
```

然后我创建了以下泛型`ExpandableListArrayAdapter`类：

```
import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.TextView;

public class ExpandableListArrayAdapter<T> extends BaseExpandableListAdapter {
    private List<ExpandableListGroup<T>> groups;
    private LayoutInflater inflater;

    public ExpandableListArrayAdapter(Context context,
            List<ExpandableListGroup<T>> groups) {
        inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.groups = groups;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        ExpandableListGroup<T> group = getGroup(groupPosition);
        if (convertView == null) {
            convertView = inflater.inflate(
                    android.R.layout.simple_expandable_list_item_1, parent,
                    false);
        }

        TextView text = (TextView) convertView;
        text.setText(group.toString());
        return convertView;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        T item = getChild(groupPosition, childPosition);
        if (convertView == null) {
            convertView = inflater.inflate(
                    android.R.layout.simple_expandable_list_item_1, parent,
                    false);
        }

        TextView text = (TextView) convertView;
        text.setText(item.toString());
        return convertView;
    }

    @Override
    public T getChild(int groupPosition, int childPosition) {
        return groups.get(groupPosition).getChildren().get(childPosition);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return groups.get(groupPosition).getChildren().size();
    }

    @Override
    public ExpandableListGroup<T> getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    @Override
    public int getGroupCount() {
        return groups.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }
} 
```

现在，这是你如何将它们联系在一起的方法：

```
// Create one list per group
List<Recipe> appetizers = new ArrayList<Recipe>(),
        desserts = new ArrayList<Recipe>();

// TODO: Create Recipe objects and add to lists

List<ExpandableListGroup<Recipe>> groups = Arrays.asList(
        new ExpandableListGroup<Recipe>("Appetizers", appetizers),
        new ExpandableListGroup<Recipe>("Desserts", desserts));
mExpandableList.setAdapter(new ExpandableListArrayAdapter<Recipe>(this,
        groups)); 
```

# regex - 使用 perl 从 HTML 中提取部分内容

> ID：14008835
> 
> 赞同：-1
> 
> 时间：2012-12-23T05:25:56.070
> 
> 标签：regex, perl, html-parsing

我想使用 perl 在 HTML 字符串中获取部分标记的所有内容。我正在使用以下代码行，但它似乎不起作用：

```
$article_content =~ s/^.*?<section>(.*)<\/section>.*?$/$1/; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:27:39.257

更改`(.*)`并`(.*?)`查看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T05:28:09.553

**不要使用正则表达式来解析 HTML**。您无法使用正则表达式可靠地解析 HTML。一旦 HTML 与您的期望发生变化，您的代码就会被破坏。有关如何使用 Perl 模块正确解析 HTML 的示例，请参阅[http://htmlparsing.com/perl.html 。](http://htmlparsing.com/perl.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T13:16:40.843

第一个问题是您假设`.`匹配任何字符，但只有在使用`/s`.

# maven - 使用 github site-maven-plugin 将目录发布到 gh-pages 时出现 500 错误

> ID：14008838
> 
> 赞同：0
> 
> 时间：2012-12-23T05:26:45.817
> 
> 标签：maven, github

我正在尝试使用 github 站点插件将目录复制到我在 github 上的 gh-pages 分支。不过，每当我尝试时，我都会收到 500 错误。

这是我的构建配置：

```
 <plugin>
            <groupId>com.github.github</groupId>
            <artifactId>site-maven-plugin</artifactId>
            <version>0.7</version>
            <configuration>
                <message>Creating site for ${project.version}</message>
                <branch>gh-pages</branch>
                <noJekyll>true</noJekyll>
                <outputDirectory>${project.build.directory}/mvn-repo</outputDirectory>
                <includes>
                    <include>**/*</include>
                </includes>
                <repositoryName>greenDAO</repositoryName>
                <repositoryOwner>emmby</repositoryOwner>
            </configuration>
        </plugin> 
```

这是输出`mvn ghSite:site`

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building DaoCore 1.3-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- site-maven-plugin:0.7:site (default-cli) @ greendao ---
[INFO] Creating 12 blobs
[INFO] Creating tree with 13 blob entries
[INFO] Creating commit with SHA-1: 656a23ffd7d898c2d45a107ee4f8f2d8ee86706e
[INFO] Creating reference gh-pages starting at commit 656a23ffd7d898c2d45a107ee4f8f2d8ee86706e
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.608s
[INFO] Finished at: Sat Dec 22 22:25:21 MST 2012
[INFO] Final Memory: 7M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.github.github:site-maven-plugin:0.7:site (default-cli) on project greendao: Error creating reference: Server Error (500) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

`mvn -X ghSite:site` [你可以在这里](https://gist.github.com/4364071)找到完整的输出。

有什么想法我可能做错了吗？

（我的身份验证凭据在我的 ~/.m2/settings.xml 文件中，并且看起来是正确的，因为如果我将它们注释掉，推送将失败并出现身份验证错误。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:01:18.090

您的分支不正确：

```
<branch>gh-pages</branch> 
```

删除它并使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:07:01.343

你试过这个 maven 插件[http://maven.apache.org/plugins/maven-scm-publish-plugin/various-tips.html](http://maven.apache.org/plugins/maven-scm-publish-plugin/various-tips.html)吗？

# ios - 如何为 cpp 类创建一个 Objective-C 委托？

> ID：14008844
> 
> 赞同：3
> 
> 时间：2012-12-23T05:27:42.097
> 
> 标签：ios, opengl-es-2.0, powervr-sgx

我一直在尝试将 openGL-es（xcode openGL 游戏模板与 powervr 3.0 sdk 中的 ogles2tools 库结合起来。我的问题是我加载效果文件的代码行：

```
/* 
 Load the effect.
 We pass 'this' as an argument as we wish to receive callbacks as the PFX is loaded.
 This is optional and supplying NULL implies that the developer will take care
 of all texture loading and binding to to the Effect instead.
*/
if(m_pEffect->Load(*m_pEffectParser, "Effect", c_szPfxFile, NULL, uiUnknownUniforms, &error) != PVR_SUCCESS)
{
    NSLog(@"%s",error.c_str());
    return;
} 
```

我应该传递一个“this”指针，以便接收回调。我需要实现的委托方法是：

```
EPVRTError OGLES2IntroducingPFX::PVRTPFXOnLoadTexture(const CPVRTStringHash& TextureName, GLuint& uiHandle, unsigned int& uiFlags)
{
    /*
     This is an optional callback function for PVRTPFXEffect and can be used to automate 
     the texture loading process.
     If multiple effects are to be loaded and they share textures it would be
     prudent to have a caching system in place so texture memory is not wasted.
     Please see OGLES2MagicLantern for an example of this.
    */
    if(PVRTTextureLoadFromPVR(TextureName.String().c_str(), &uiHandle) != PVR_SUCCESS)
    return PVR_FAIL;

    return PVR_SUCCESS;
} 
```

我想对我来说最大的问题是如何在 Objective-C 中提供一个 cpp 委托方法？我在这个问题上做了一些阅读，但似乎我正在阅读的内容是相反的。也就是cpp中的一个objective-c委托。这很令人困惑，但这是我的想法......

我创建了一个 cpp 类来实现我需要的方法。我将它添加到我的 viewController 类中，并在 m_pEffect->Load 调用中将指针传递给这个 cpp 类。这看起来正确吗？

谢谢。

PS对不起，如果我的代码格式不好。我还在学习。

**编辑：** [这是](https://discussions.apple.com/thread/1783482?start=0&tstart=0)我发现的关于混合objective-c和cpp的示例。这似乎与我想要做的非常相似。

**更新：**这是一些附加信息（由 user1118321 请求）

需要委托的 CPP 类是 CPVRTPFXEffect（PVRTPFXParserAPI.h - 来自 powerVR SDK 3.0）。我会添加一个链接，但我不确定这是否允许。 [这是](http://code.google.com/p/encuadro/source/browse/xcode/DEMO/prueba_story_isgl/prueba1/prueba/external/PowerVR_SDK-2.0.8/OGLES2/PVRTPFXParserAPI.h?spec=svnddd804d3c0775d4716f5ba07f197a695b7318028&r=ddd804d3c0775d4716f5ba07f197a695b7318028)类头的链接，但这个版本（以及网络上的其他版本）不包括 load 方法的 pDelegate 属性。我假设它们是以前版本的示例。让我知道是否可以发布这个类文件，我会这样做。

[我从阅读这个帖子](https://stackoverflow.com/questions/2262011/adding-c-object-to-objective-c-class/2262395)中找到了一个[很好的例子](http://robnapier.net/blog/wrapping-c-take-2-1-486)，说明我认为我应该做什么。所以这是我到目前为止所拥有的：

我的CPP代表课...

```
 class myCppDelegate : public PVRTPFXEffectDelegate {
public:
    myCppDelegate() {};
    EPVRTError PVRTPFXOnLoadTexture(const CPVRTStringHash& TextureName, GLuint& uiHandle, unsigned int& uiFlags) { 
        return PVR_FAIL; 
    };

}; 
```

我的 Obj-C 包装类（刚刚从上面的示例链接修改）...

```
struct RNWrapOpaque;

@interface RNWrap : NSObject {
struct RNWrapOpaque *_cpp;
}

- (id)init;
@end 
```

执行...

```
#import "RNWrap.h"
#import "Wrap.h"

@interface RNWrap ()
@property (nonatomic, readwrite, assign) RNWrapOpaque *cpp;
@end

@implementation RNWrap
@synthesize cpp = _cpp;

struct RNWrapOpaque
{
public:
    RNWrapOpaque() : wrap() {};
    myCppDelegate wrap;
};

- (id)init
{
    self = [super init];
    if (self != nil)
    {
        self.cpp = new RNWrapOpaque();
    }
    return self;
}

- (void)dealloc
{
    delete _cpp;
    _cpp = NULL;

//  [super dealloc];
}

@end 
```

基本上我能够编译代码和调试，但是当 CPVRTPFEffect 类进行此调用时：

```
 if(pDelegate->PVRTPFXOnLoadTexture(pTexDesc->FileName, uiHandle, uiFlags) != PVR_SUCCESS) 
```

我得到 EXC_BAD_ACCESS。我假设它没有找到我的回调方法，因为我设置了一个断点并且该行永远不会被调用。

这是我更新的代码，它使用代理参数的桥接命令调用 CPVRTPFXEffect::Load。

```
 if(m_pEffect->Load(*m_pEffectParser, "Effect", c_szPfxFile,(__bridge myCppDelegate*)opaqueCppWrap, uiUnknownUniforms, &error) != PVR_SUCCESS) 
```

谢谢你的帮助！

**更新 2：** 该项目使用 ARC。这是我的 viewController 界面的样子：

```
@interface ViewController : GLKViewController {
    ...
    RNWrap* opaqueCppWrap;
    ...
}

@property (strong) RNWrap *opaqueCppWrap; 
```

添加@property 对EXC_BAD_ACCESS 没有帮助。在跟踪 CPP 代码时，我不确定如何“查看” pDelegate 的值。当我将鼠标悬停在变量上时，Xcode 不会显示任何内容。

我在 CPVRTPFXEffect::Load 方法中添加了以下代码行（就在它崩溃的行之前）：

```
 *pReturnError += PVRTStringFromFormattedStr("Here is your class typeid: %s.\n", typeid(pDelegate).name());
        return PVR_FAIL; 
```

这是调试输出窗口中显示的内容：

**这是您的课程类型 ID：P21PVRTPFXEffectDelegate。**

我不确定“P21”是什么意思（如果有的话），但看起来我快要让它工作了。我不知道，也许这是最接近的。仍然崩溃并且找不到我的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:19:53.497

首先，您可能想查看[包装 C++ 系列的最后一篇文章](http://robnapier.net/blog/wrapping-cppfinal-edition-759)。在最新版本的 clang 中，大部分内容变得更加简单。您可能不再需要一半的代码了。ObjC++ 对象现在无需任何技巧即可拥有私有 C++ 属性，同时保持纯 ObjC 接口。

以下是您想如何考虑这个问题：

*   构建一个作为委托的 C++ 对象。用 C++ 编写所有涉及设置委托等的代码。因此，当它说“传递`this`指针”时，您实际上应该传递一个`this`指针（因为您应该在 C++ 代码中执行此操作）。您`_bridge`在 C++ 调用中进行强制转换的事实确实暗示出了问题。
*   让 ObjC 拥有 C++ 对象作为属性。
*   在 C++ 对象内用 C++ 编写委托回调。如果有用，您可以让 C++ 对象根据需要调用 ObjC 对象，但如果 C++ 对象完成所有委托工作，可能会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:28:43.553

我终于得到了这个工作，但必须从我的 viewController 中删除 obj-c 包装类才能这样做。代码如下所示：

视图控制器.h

```
struct Opaque;

@interface ViewController : GLKViewController {

    ...
    //RNWrap* opaqueCppWrap;  // this didn't work 
    struct Opaque *opaqueCpp; // try this
    ...
} 
```

视图控制器.mm

```
// declare the Opaque structure
struct Opaque {
public:
    Opaque() : cppobject() {};

    myCppDelegate cppobject;
}; 
```

viewDidLoad

```
 // ... create opaque member on initialization
    opaqueCpp = new Opaque();

    //opaqueCppWrap = [[RNWrap alloc] init];  // old way of doing things using wrapper 
```

将委托传递给 Load 方法

```
// old way using bridge cast and wrapper 
//if(m_pEffect->Load(*m_pEffectParser, "Effect", c_szPfxFile,(__bridge myCppDelegate*)opaqueCppWrap, uiUnknownUniforms, &error) != PVR_SUCCESS)

// this works...
if(m_pEffect->Load(*m_pEffectParser, "Effect", c_szPfxFile, (myCppDelegate*)opaqueCpp, uiUnknownUniforms, &error) != PVR_SUCCESS) 
```

不知道为什么包装类不起作用，但我很高兴我的回调正在工作（appy no crashy！）

呸，那太粗糙了。有什么想法/意见吗？

# android - Android minsdkversion和市场上传冲突

> ID：14008845
> 
> 赞同：0
> 
> 时间：2012-12-23T05:27:52.497
> 
> 标签：android, upload, admob, google-play

大家好，我正面临目标构建和 minsdkversion 之间的冲突。为了使用 admob 最新版本，我已将项目构建目标设置为 android 4.0，并且在开发时我将 minsdkversion 指定为 8，它工作正常。但是当我尝试将应用程序上传到 google play 市场时，我无法处理 apk 文件，经过谷歌搜索的一些研究过程后，我将 minsdktarget 更改为 14，然后我能够将其上传到市场。但是我遇到的问题需要将 minsdktarget 设置为 10。请让我知道如何实现这一点。我真的需要你们的帮助。希望得到更好的回应。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:59:17.763

[文档](https://developers.google.com/mobile-ads-sdk/docs/)说 minSdkVersion***至少***是 Android 1.5，所以如果你使用这个库并且不希望你的应用在旧设备上崩溃（他们将无法从 Google Play 下载它），你需要声明minSdkVersion。您可以将您的 targetSDKVersion 设置为比这更晚的任何值。

例如：

```
<uses-sdk android:minSdkVersion="3" android:targetSdkVersion="17" /> 
```

为什么需要设置`minSdkVersion`为 10？在这种情况下，您可以这样做：

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17" /> 
```

# django - 创建画廊时的图像可访问性问题

> ID：14008855
> 
> 赞同：0
> 
> 时间：2012-12-23T05:29:02.533
> 
> 标签：django

我正在尝试通过将照片存储在图库数据库中并在适当时将它们拉出来创建照片库。

但是，我遇到了如何在url中公开图片的问题。在我的模板中，我返回照片的 url，结果是 images/photo.jpg。但是在我的开发服务器中，当我输入 url 192.0.0.1:8000/images/photo.jpg （它不存在）时，我无法查看图像。有什么方法可以通过对象提供的 url 访问 url/图像，而无需手动篡改 urls.py？如果没有，为什么 Django 提供 .url 字段？那么这是唯一推荐的 url 字段吗？

我的观点：

```
def gallery(request):
    base_gallery = gall.objects.get(name="base")
    base_list = base_gallery.photos.all()
    return render_to_response('gallery.html',
        {'list_of_images':base_list},
        context_instance = RequestContext(request),
    ) 
```

模板：

```
{% extends "index.html" %}
{% block body_content %}

{% for photo in list_of_images %}
    {{ photo.image.url }}
{% endfor %}
{% endblock %} 
```

模型：

```
from django.db import models

class photo(models.Model):
    name = models.CharField(max_length=50,blank=True,null=True)
    source_descr = models.CharField(max_length=100,blank=True,null=True)
    image = models.ImageField(upload_to='images')

class gallery(models.Model):
    name = models.CharField(max_length=50)
    photos = models.ManyToManyField(photo) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:35:57.643

在您的设置文件中，您给出的值是什么`MEDIA_URL`，如果是，`/media/` 请检查以下 url。

192.0.0.1:8000/**媒体**/images/photo.jpg

# mongodb - MongoDB 更新。试图从另一个属性中设置一个字段

> ID：14008856
> 
> 赞同：15
> 
> 时间：2012-12-23T05:29:06.493
> 
> 标签：mongodb

我正在尝试做的事情非常简单，但我不知道如何为一个字段赋予另一个字段的值。

我只是想用另一个字段的字符数更新一个字段。

```
db.collection.update({$exists:true},{$set : {field1 : field2.length}}) 
```

我试过给它点符号

```
db.collection.update({$exits:true},{$set : {field1: "this.field2.length"}}) 
```

以及使用 javascript 语法

```
db.collection.update({$exits:true},
                     {$set : {field1: {$where : "this.field2.length"}}) 
```

但只是复制了字符串并分别得到了一个“notOkforstorage”。有什么帮助吗？

更新：当我通过 ID 查询时，我只得到“notOkforStorage”：

```
db.collection.update({_id:ObjectID("38289842bbb")},
                     {$set : {field1: {$where :"this.field2.length"}}}) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-23T09:41:25.830

试试下面的代码：

```
db.collection.find(your_querry).forEach(function(doc) {
  doc.field1 = doc.field2.length;
  db.collection.save(doc);
}); 
```

您可以使用`your_querry`仅选择原始集合的一部分来执行更新。如果要处理整个集合，请使用`your_querry = {}`.

如果您希望所有操作都是原子的，请使用`update`代替`save`：

```
db.collection.find( your_querry, { field2: 1 } ).forEach(function(doc) {
  db.collection.update({ _id: doc._id },{ $set: { field1: doc.field2.length } } );
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-04-01T16:45:26.080

开始`Mongo 4.2`，[`db.collection.update()`](https://docs.mongodb.com/master/reference/method/db.collection.update/index.html#db.collection.update)可以接受一个聚合管道，最后允许基于另一个字段更新/创建一个字段：

```
// { "_id" : ObjectId("5e84c..."), "field1" : 12, "field2" : "world" }
db.collection.update(
  { "_id" : ObjectId("5e84c...") },
  [{ $set: { field1: { $strLenCP: "$field2" } } }]
)
// { "_id" : ObjectId("5e84c..."), "field1" : 5, "field2" : "world" } 
```

*   第一部分`{}`是匹配查询，过滤要更新的文档。

*   第二部分`[{ $set: { field1: { $strLenCP: "$field2" } } }]`是更新聚合管道（注意方括号表示使用聚合管道）。[`$set`](https://docs.mongodb.com/master/reference/operator/aggregation/set/#pipe._S_set)是一个新的聚合运算符和`$addFields`. 阶段内可以使用任何聚合算子`$set`；在我们的例子[`$strLenCP`](https://docs.mongodb.com/master/reference/operator/aggregation/strLenCP/index.html#exp._S_strLenCP)中，它提供了 的长度`field2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T09:46:44.387

据我所知，最简单的方法是读写方法：

```
//At first, get/prepare your new value:
var d= db.yourColl.fetchOne({....});
d.field1== d.field2.length;

// then update with your new value
db.yourColl.save(d); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-23T08:55:03.063

1.  您的使用`exists`方式错误。
    `Syntax: { field: { $exists: <boolean> } }`

2.  您使用[$where](http://docs.mongodb.org/manual/reference/operators/#_S_where)也不正确
    *使用 $where 运算符将包含 JavaScript 表达式的字符串或完整的 JavaScript 函数传递给查询系统*

    `db.myCollection.find( { $where: "this.credits == this.debits" } );` `db.myCollection.find( { $where: "obj.credits == obj.debits" } );`

    `db.myCollection.find( { $where: function() { return (this.credits == this.debits) } } );`

    `db.myCollection.find( { $where: function() { return obj.credits == obj.debits; } } );`

我认为你应该使用[Map-Reduce](http://docs.mongodb.org/manual/applications/map-reduce/)来做你想做的事情。

# excel - 我们可以用一条语句将字典项（数组）放入 Range 中吗？

> ID：14008866
> 
> 赞同：0
> 
> 时间：2012-12-23T05:31:09.500
> 
> 标签：excel, vbscript, vba

假设我确实有一个数组 A1(6)=(45,25,,36,88),A2(6)=(14,25,11),A3(6)=(11,21,20,25,48 ）。现在我们可以借助单个语句（例如将单个数组赋值给一行）来放置这些数组值，就像这里的所有行到 Excel 的一个范围一样，在这里说“C1：R3”范围。

```
Dim R
R = Split(Join(A1, ",") & "," & Join(A2, ",") & "," & Join(A3, ","), ",")
Range("C5:T5").Value = R 
```

现在我们可以将字典项（它是一个数组）组合成一个一维数组并分配回一个范围吗？

```
For Each ChilID In ChildIDs

    Redim ChildDetailArray(ArrIndex)
    ChildMatchNum=objExcel1.Application.WorksheetFunction.Match(ChilID, ob3.Columns(1), 0)
    ChildDetailArray=ob1.Range(ob1.Cells(ChildMatchNum,1),ob1.Cells(ChildMatchNum,ArrIndex+1)).Value
    ChildDic.Add ChilID,ChildDetailArray '(ChildDetailArray is an array)

Next 
```

**编辑1**

```
 suppose a process#20 has 2 child processes say #12,#13\. now i used a dictionary object Dic

        Dic(12)=Arr(10,11,,,18) 'child details
        Dic(13)=Arr(5,8,9,,,) ' child details

    ***Output:***  `1D array say ArrMerger()=(10,11,,,18,5,8,9,,,)` 
```

上面`For Loop`的做法是一样的。现在`Loop`完成后，我希望那些作为 Dic(12) 和 Dic(13) 项目的子详细信息需要收集在一维数组中

***更新***

```
 strJoin = ","
For ChildKey In ChildDic.Keys

    strJoin=Join(ChildDic(ChildKey),",") & strJoin

Next 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:33:35.847

*我们可以用一条语句将字典项（数组）放入 Range 中吗？* **是的，您可以将所有字典项放入一个范围内。**

试试这段代码并***清楚地***解释/评论您需要的任何更改：

**代码：**

```
Option Explicit

Sub getMerged1DItems()
Dim d As Object, d2 As Object
Dim vArr As Variant
Dim vArr2 As Variant
Dim strJoin As String

    Set d = CreateObject("Scripting.Dictionary")
    Set d2 = CreateObject("Scripting.Dictionary")

    '-- assume you have items in your dictionary
    d.Add "Names", 1
    d.Add "Titles", 2
    d.Add "Jobs", 3
    d.Add "Education", 4
    d.Add "Experience", 5

    '-- add dictionary items into an 1D array
    vArr = d.Keys

    '-- add 1D arryas into d2 dictionary as items
    d2("v" & 1) = vArr
    d2("v" & 2) = vArr

    '-- join multiple 1D array items into one string delimitted by comma
    strJoin = Join(d2("v" & 1), ", ") & "," & Join(d2("v" & 2), ", ")

    '-- split the string by comma delimiter
    vArr2 = Split(strJoin, ",")

    '-- output to sheet using first 1D Array
    Sheets(1).Range("B2").Resize(1, _
             UBound(Application.Transpose(vArr))) = vArr

    '-- output to sheet using dictionary
    Sheets(1).Range("B4").Resize(1, _
             UBound(Application.Transpose(d.Keys))) = d.Keys

    'output to sheet using mergeed 1D array
    Sheets(1).Range("B7").Resize(1, _
             UBound(Application.Transpose(vArr2))) = vArr2

    Set d2 = Nothing
    Set d = Nothing

End Sub 
```

**输出：**

![在此处输入图像描述](../Images/81138889b3c01f035af02e61d787ef92.png)

# javascript - queue.js 是如何工作的？

> ID：14008868
> 
> 赞同：5
> 
> 时间：2012-12-23T05:31:28.943
> 
> 标签：javascript, asynchronous, queue

我一直试图了解[Mike Bostock 的 queue.js](https://github.com/mbostock/queue/blob/master/queue.js)是如何工作的，但我看不出它是如何工作的。我不明白的部分是代码如何设法继续执行回调。特别是，我不确定该`pop()`方法（第 45 行）。据我了解，该方法采用下一个未处理的延迟函数；附加一个回调（可能）启动队列中的下一个延迟函数，并在立即弹出的函数完成时执行；然后最终执行所述功能。我的问题是：什么代码执行这个回调？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T19:42:29.833

每个延迟函数实际上并不返回任何东西——它们被期望以回调的形式执行它们的最后一个参数。例如，这将不起作用

```
var foo = function(i) {
  console.log(i);
  return i;
}
var finished = function(error, results) {
  console.log(results);
}

queue(2)
  .defer(foo, 1)
  .defer(foo, 2)
  .defer(foo, 3)
  .defer(foo, 4)
  .awaitAll(finished);  // only prints "1" and "2", since foo() doesn't execute callbacks 
```

但是，如果我们修改`foo`为采用回调，

```
var foo = function(i, callback) {
  console.log(i);
  callback(null, i);  // first argument is error reason, second is result
} 
```

然后它会，因为执行回调会导致`queue`继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T06:46:33.363

如果我正确理解代码，`queue.await()`并将`queue.awaitall()`回调放在`await`实例变量中，然后由`notify()`.

# git - GIT、FTP、NetBeans 和 NetDrive

> ID：14008870
> 
> 赞同：3
> 
> 时间：2012-12-23T05:32:04.030
> 
> 标签：git, netbeans, ftp

我花了很长时间试图弄清楚这一点，但我无法让它按照我需要的方式工作（也许我想要的甚至不可能）。

这是我的情况以及我想要实现的目标：我在**Windows 7**中工作。我正在开发一个网站，我正在使用**NetBeans 7.2**来管理我的项目。该网站应发布在**具有 FTP/FTPS**访问权限的远程虚拟主机上。

尽管我将是唯一一个在这个网站上工作的人，但我想使用**GIT**进行版本控制（我以前从未使用过任何版本控制），因为我想学习如何使用它，而且我想从两台不同的计算机（都使用 NetBeans），所以我认为它可能真的对我有帮助。

我相信 GIT 在 NetBeans 中得到很好的支持，但 GIT 和 FTP 可能仍然存在一些问题。因此，我安装了**NetDrive**并**在 Windows 下为我的 FTP 服务器创建了一个虚拟驱动器**（虚拟驱动器运行良好，例如我可以简单地编辑那里的文件并显示在网络上）。

我认为我想要实现的目标变得越来越清晰。我读了这篇不错的文章：[http](http://hoth.entp.com/output/git_for_designers.html) ://hoth.entp.com/output/git_for_designers.html ，***我想做那篇文章中图 2 中的内容***。

我还阅读了这个 NetBeans GIT 教程： http: [//netbeans.org/kb/docs/ide/git.html](http://netbeans.org/kb/docs/ide/git.html)

因此，我在我的新虚拟驱动器（代表 FTP 服务器）上创建了一个 NetBeans 项目，初始化了一个 GIT 存储库并执行了第一次提交（全部使用 NetBeans 菜单）。

然后我将 GIT 存储库克隆到本地目录并在该目录中创建了一个 NetBeans 项目。克隆很顺利，我在本地目录中有文件，所以我可以编辑它们。

编辑并提交文件后，我尝试通过菜单 GIT-Remote->Push**将存储库推回虚拟驱动器（FTP 服务器）。**我可以在那里的下拉菜单中看到原始存储库（origin:file:///my_virtual_drive_and_path_to_the_directory）。所以我点击了下一步，选择了分支......根据输出，一切都很顺利。

**但是我的虚拟驱动器（FTP 服务器）上的实际文件并没有改变！**GIT 存储库版本发生了变化，但服务器上的文件仍保持在我编辑它们之前的状态。

如果这一切正常，我还将在我的另一台计算机上安装 NetDrive，在那里为我的 FTP 服务器创建一个虚拟驱动器，克隆 GIT 存储库，然后我将能够在 GIT 版本控制的帮助下从我的另一台计算机上处​​理该项目。然后我只会“推”和“拉”，我会很高兴。

但现在我的头快要爆炸了。请告诉我我想要的是否可行，我是否采取了正确的方向以及我在哪里犯了错误。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:39:33.093

基本上，看起来您的推送不会导致结帐。看看[http://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T07:33:01.803

您对推送的工作原理/作用有误解。推送更新 repo 内容/历史，而不是结帐工作副本。由于这会导致混乱的情况（您可能已经注意到；），您通常不会推送到具有工作副本的存储库。

但是在您的情况下，这显然是您系统的一部分，但是您需要设置 git 才能正常工作。请参阅此处了解如何操作：[Deploy a project using Git push](https://stackoverflow.com/questions/279169/deploy-a-project-using-git-push)

# mule - 如何在使用 Mule ESB、Mule Studio 将数据插入 PostgreSQL 时从 JSON 文件中正确读取数据

> ID：14008874
> 
> 赞同：1
> 
> 时间：2012-12-23T05:32:58.410
> 
> 标签：mule, mule-studio

我有一个如下的 JSON 文件

```
[ 
  { "category": "reference",
    "author": "Nigel Rees",
    "title": "Sayings of the Century",
    "price": 8.95
  },
  { "category": "fiction",
    "author": "Evelyn Waugh",
    "title": "Sword of Honour",
    "price": 12.99
  }
] 
```

我正在尝试读取文件并将数据存储到 PostgreSQL 数据库中。我的配置xml文件如下

```
<jdbc:postgresql-data-source name="PostgreSQL_Data_Source" user="superuser" password="pwd" url="jdbc:postgresql://localhost:5432/TestDB" transactionIsolation="UNSPECIFIED" doc:name="PostgreSQL Data Source"/>
    <jdbc:connector name="Database-Connector" dataSource-ref="PostgreSQL_Data_Source" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database">
        <jdbc:query key="InsertQuery" value="INSERT INTO &quot;tblTest&quot;(category,author,title,price)VALUES (?,?,?,?)"/>
    </jdbc:connector>
    <flow name="testxmlFlow1" doc:name="testxmlFlow1">
        <file:inbound-endpoint path="C:\InputFolder" responseTimeout="10000" doc:name="File"/>
        <byte-array-to-string-transformer doc:name="Byte-Array-to-String"/>
        <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="InsertQuery" queryTimeout="-1" connector-ref="Database-Connector" doc:name="Database"/>
</flow> 
```

我不是想将它存储在一个完整的 JSON 列中，而是想先解析它，然后再将它存储在各个表列中，即类别、作者、标题、价格。

我需要在配置文件中进行哪些更改以及如何处理？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:35:45.043

将 JSON 数据转换为 a`java.util.List`然后将其拆分为几个`java.util.Map`s 并将它们中的每一个写入数据库。

```
<jdbc:postgresql-data-source name="PostgreSQL_Data_Source"
    user="superuser" password="pwd" url="jdbc:postgresql://localhost:5432/TestDB"
    transactionIsolation="UNSPECIFIED" doc:name="PostgreSQL Data Source" />

<jdbc:connector name="Database-Connector" dataSource-ref="PostgreSQL_Data_Source"
    validateConnections="true" queryTimeout="-1" pollingFrequency="0"
    doc:name="Database">
    <jdbc:query key="InsertQuery"
        value="INSERT INTO &quot;tblTest&quot;(category,author,title,price)VALUES (#[message.payload.category],#[message.payload.author],#[message.payload.title],#[message.payload.price])" />
</jdbc:connector>

<flow name="testxmlFlow1" doc:name="testxmlFlow1">
    <file:inbound-endpoint path="C:\InputFolder"
        responseTimeout="10000" doc:name="File" />
    <json:json-to-object-transformer
        returnClass="java.util.List" doc:name="JSON to List" />
    <collection-splitter />
    <jdbc:outbound-endpoint exchange-pattern="one-way"
        queryKey="InsertQuery" queryTimeout="-1" connector-ref="Database-Connector"
        doc:name="Database" />
</flow> 
```

# grails - Grails Spring Security 插件网址

> ID：14008875
> 
> 赞同：0
> 
> 时间：2012-12-23T05:33:01.810
> 
> 标签：grails, spring-security, logout

Grails Spring Security 插件文档显示了与注销 url 相关的这两个属性（复制自[https://github.com/grails-plugins/grails-spring-security-core/blob/master/src/docs/guide/13%20URL %20Properties.gdoc](https://github.com/grails-plugins/grails-spring-security-core/blob/master/src/docs/guide/13%20URL%20Properties.gdoc) )

```
logout.afterLogoutUrl | '/' | URL for redirect after logout.

logout.filterProcessesUrl | '/j_spring_security_logout' | Logout URL, intercepted by Spring Security filter. 
```

当我运行 s2-quickstart 脚本来生成 时`LogoutController`，默认行为是重定向到`logout.filterProcessesUrl`.

`logout.afterLogoutUrl`如果`LogoutController`不重定向到它的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:41:08.927

Spring Security 引入了一些过滤器，[Java 过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)，而不是 Grails。此过滤器执行所有身份验证工作，请参阅[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/security-filter-chain.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/security-filter-chain.html)

`logout.filterProcessesUrl`由 Spring Security 过滤器处理，并在清理后（从当前上下文中删除用户等）重定向到`logout.afterLogoutUrl`.

`LogoutController`什么都不做，只是重定向到过滤器。您可以在您自己的控制器中将用户重定向到该用户，甚至可以将`<a`链接放置到此类 url

# oauth-2.0 - Chrome 中的 Google oAuth redirect_uri_mismatch 错误

> ID：14008878
> 
> 赞同：0
> 
> 时间：2012-12-23T05:33:54.337
> 
> 标签：oauth-2.0

我正在尝试将谷歌登录设置到我的网站，它可以在 Firefox 中正常工作，但在 chrome 中它给了我这个错误

> 错误：redirect_uri_mismatch
> 
> 请求中的重定向 URI： [http](http://cgcrush.hub.loginradius.com/socialauth/validate.sauth) ://cgcrush.hub.loginradius.com/socialauth/validate.sauth与注册的重定向 URI 不匹配

任何的想法？

# 编辑

我已经交叉检查并注意到，如果我已经在该浏览器上登录了谷歌帐户，那么它会给出错误但没有登录谷歌它正在工作。这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:08:17.670

我发现 loginradius 在“http://”上提供了链接，而 Google 需要“https://”。您只需将其切换到“https://”即可！:)

我的 2 美分

尼科

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-12-25T07:23:40.050

我找到了解决方案，它是 API 中设置的 url 问题

# c++ - JAVA（AES/CBC/PKCS5PADDING）对应的C/C++是什么

> ID：14008879
> 
> 赞同：1
> 
> 时间：2012-12-23T05:33:58.633
> 
> 标签：c++, c, aes, crypto++

Cipher.getInstance("AES/CBC/PKCS5PADDING") i 使用 Sun JCE 提供程序：</p>

```
public static void main(String[] args) throws UnsupportedEncodingException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, ShortBufferException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException
{
    System.out.println("=======================AES/CBC/PKCS5Padding=====================");
    // key
    byte[] key = "0123456789abcdef".getBytes("UTF-8");
    dump("key", key);
    // iv
    byte[] iv = "fedcba9876543210".getBytes("UTF-8");
    dump("iv", iv);

    byte[] indata = "bsmith is a good guy.".getBytes("UTF-8");
    dump("indata", indata);

    AES aes = new AES();
    aes.init(key, iv);
    byte[] outdata = aes.encrypt(indata);
    dump("outdata", outdata);

    byte[] indata1 = aes.decrypt(outdata);
    dump("indata1", indata1);
}

private Cipher enc;
private Cipher dec;
private SecretKeySpec keySpec;
private IvParameterSpec ivSpec;

public AES()
{
}

/**
 * init the AES key.
 * the key must be 128, 192, or 256 bits.
 * @param key the AES key.
 * @param keyoff the AES key offset.
 * @param keylen the AES key length, the key length must be 16 bytes because SunJCE only support 16 bytes key.
 * @param iv the IV for CBC, the length of iv must be 16 bytes.
 * @param ivoff the iv offset.
 */
public void init(byte[] key, int keyoff, int keylen, byte[] iv, int ivoff)
{
    keySpec = new SecretKeySpec(key, keyoff, keylen, "AES");
    ivSpec = new IvParameterSpec(iv, ivoff, 16);
}

/**
 * init the AES key.
 * the key must be 16 bytes, because SunJCE only support 16 bytes key..
 * @param key the AES key.
 * @param iv the iv for CBC, iv must be 16 bytes length.
 */
public void init(byte[] key, byte[] iv)
{
    keySpec = new SecretKeySpec(key, "AES");
    ivSpec = new IvParameterSpec(iv);
}

/**
* get the maximal cipher data length after encrypted.
* @param len the plain data length.
* @return the cipher data length.
*/
public int getCipherLen(int len)
{
    // for PKCS#1 v1.5 padding
    // max padding BLOCK_SIZE=16.
    int pad = len%16;
    if (0 == pad)
    {
        return len + 16;
    }
    return len - pad + 16;
}

/**
 * encrypt the input data to output data.
 * the input data length must be the times of 16 bytes.
 * and the output data length is equals to the input data.
 * @param indata the input data.
 * @param inoff the input data offset.
 * @param inlen the input data length.
 * @param outdata the output data.
 * @param outoff the output data offset.
 */
public void encrypt(byte[] indata, int inoff, int inlen, byte[] outdata, int outoff) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, ShortBufferException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException
{
    initEncryptor();
    enc.doFinal(indata, inoff, inlen, outdata, outoff);
}

/**
 * encrypt the input data to output data.
 * @param indata the input data.
 * @param inoff the input data offset.
 * @param inlen the input data length.
 * @return the output encrypted data.
 */
public byte[] encrypt(byte[] indata, int inoff, int inlen) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, ShortBufferException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException
{
    initEncryptor();
    return enc.doFinal(indata, inoff, inlen);
}

/**
 * encrypt the input data to output data.
 * @param indata the input data.
 * @return the output data.
 * @throws NoSuchAlgorithmException
 * @throws NoSuchPaddingException
 * @throws InvalidKeyException
 * @throws InvalidAlgorithmParameterException
 * @throws IllegalBlockSizeException
 * @throws BadPaddingException
 */
public byte[] encrypt(byte[] indata) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException
{
    initEncryptor();
    return enc.doFinal(indata);
}

/**
* the maximal plain data length after decrypted.
* @param len the cipher data length that will be decrypted.
* @return the maximal plain data length.
*/
public int getPlainLen(int len)
{
    // for PKCS#1 v1.5 padding
    // len always be times of BLOCK_SIZE=16.
    return len;
}

/**
 * decrypt the input data to output data.
 * @param indata the input data.
 * @param inoff the input data offset.
 * @param inlen the input data length.
 * @param outdata the output data.
 * @param outoff the output data offset.
 */
public void decrypt(byte[] indata, int inoff, int inlen, byte[] outdata, int outoff) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, ShortBufferException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException
{
    initDecryptor();
    dec.doFinal(indata, inoff, inlen, outdata, outoff);
}

/**
 * decrypt the input data to output data.
 * @param indata the input data.
 * @param inoff the input data offset.
 * @param inlen the input data length.
 * @return the output decrypted data.
 */
public byte[] decrypt(byte[] indata, int inoff, int inlen) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, ShortBufferException, InvalidAlgorithmParameterException
{
    initDecryptor();
    return dec.doFinal(indata, inoff, inlen);
}

/**
 * decrypt the input data to output data.
 * @param indata the input cipher data.
 * @return the output plain data.
 * @throws NoSuchAlgorithmException
 * @throws NoSuchPaddingException
 * @throws InvalidKeyException
 * @throws InvalidAlgorithmParameterException
 * @throws IllegalBlockSizeException
 * @throws BadPaddingException
 */
public byte[] decrypt(byte[] indata) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException
{
    initDecryptor();
    return dec.doFinal(indata);
}

private void initEncryptor() throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException
{
    if (null == enc)
    {
        enc = Cipher.getInstance("AES/CBC/PKCS5Padding");
        enc.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec);
    }
}

private void initDecryptor() throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException
{
    if (null == dec)
    {
        dec = Cipher.getInstance("AES/CBC/PKCS5Padding");
        dec.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
    }
} 
```

}

对应什么是C/C++？我发现crypto++ 刚刚好，其他的都没有，但是里面的算法太多了，我只需要AES。那太复杂了，我不会，我是新手，这个算法你熟悉吗，我想移植一下进入Android，打包成这样。</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:26:55.333

首先，PKCS#5 填充更好地称为 PKCS#7 填充。PKCS#5 填充实际上用于 8 字节块密码，而 PKCS#7 填充用于 16 字节块密码。否则它们是相同的。

如果加密库提供 AES 和 CBC，则可以。这或多或少是给定的，因为 CBC 是更常见的模式之一。正确填充模式的可用性可能会有所不同，尽管大多数 C++ 库将支持 PKCS#5 填充，因为它是事实上的标准。

由于有（NIST）测试向量可用，并且由于字节顺序是已知的，任何支持算法、模式和填充模式组合的库都应该是可互操作的。

# ant - javac 错误使用 -source 5 或更高版本来启用泛型

> ID：14008880
> 
> 赞同：-2
> 
> 时间：2012-12-23T05:34:03.057
> 
> 标签：ant, compiler-errors, javac

在尝试通过以下方式构建 vuze 时，我遇到了这个奇怪的错误`ant`：

```
[javac] /home/jalil/src/azureus-4.3.0.6/com/aelitis/azureus/core/impl/AzureusCoreImpl.java:1087: for-each loops are not supported in -source 1.4
[javac] (use -source 5 or higher to enable for-each loops)
[javac]         for (Object l : runningListeners) {
[javac]                       ^
[javac] /home/jalil/src/azureus-4.3.0.6/com/aelitis/azureus/core/instancemanager/impl/AZInstanceImpl.java:41: generics are not supported in -source 1.4
[javac] (use -source 5 or higher to enable generics)
[javac]         Map<String,Object>      map )
[javac]            ^
[javac] 100 errors

BUILD FAILED

/home/jalil/src/azureus-4.3.0.6/build.xml:39: Compile failed; see the compiler error output for details. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:37:36.277

您的编译器需要符合比 1.5 更早的 java 版本的代码。Foreach 循环和泛型是仅在 Java 1.5 中添加的功能，这就是编译器拒绝该代码的原因。您还收到了一条非常明确的错误消息，解释了问题以及如何解决它。

您需要编辑传递给 javac 的命令行（可能通过编辑 ant 文件）以确保它需要 Java 1.5 或更新的输入，通过提供`-source 1.5`(or `1.6`or`1.7`等​​) 或其同义词`-source 5`(or `6`or`7`等​​) . 您也可以尝试`-source`完全删除任何选项，默认值可能比`1.5`您需要的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T06:47:17.440

编译器 Intellji 或 Eclipse java 文件 >> 设置 >> 编译器 >> 命令附加命令行编译器 >> 类型 -source 1.5 -target 1.5

从 Ajay Rathore

# jsp - 使用 JSP 从 Oracle 获取数据

> ID：14008881
> 
> 赞同：-4
> 
> 时间：2012-12-23T05:34:15.047
> 
> 标签：jsp

我想使用 JSP 从 Oracle 获取数据。应该从表单文本框传递多个参数。

```
<form method="post" action="num_post.jsp">
Enter Number: <input name="num" type="text" id="num" />

<input type="submit" name="Submit" value="Submit" />
</form> 
```

在文本字段中，我想传递多个参数，例如 123,456,789,896 等。

现在在 num_post.jsp 我有这段代码来请求 JSP 中传递的参数。

```
<%
 String[] num=request.getParameterValues("num");

 int i=0;

 for(i=0;i<num.length;i++)
 {
      out.println("number Elements       :"+num[i]+"<br/>");
 }
%> 
```

现在我想使用数组参数从 Oracle 获取数据，例如：`num[i]`

```
<%@page import="java.sql.*"%>
<%@ page import = "java.io.*"%>
<%
 Class.forName("oracle.jdbc.OracleDriver");
 Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","oracle");
 Statement st=con.createStatement();
 String sql = "SELECT * from jha where num IN '"+num[i]+"'" ;
 ResultSet rs = st.executeQuery(sql);
 %> 
```

这会引发`ArrayOutOfBound`异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:41:12.710

尝试这个

`String[] num=(request.getParameter("num").toString()).split(",");`

代替

`String[] num=request.getParameterValues("num");`

**=====更新=====**

正如您所指定的**ArrayIndexOutOfBound**，这意味着您正在尝试从数组中访问超出索引。而且，很明显

```
String[] num=(request.getParameter("num").toString()).split(","); // let say array size would be 4
int i=0;  // i initialized by 0

 for(i=0;i<num.length;i++)
 {
      out.println("number Elements       :"+num[i]+"<br/>"); 
 }
  // when control reached here, the value of i will be 4 (which is out of index) 
```

现在，在您的查询中，您尝试访问`4`不存在的索引元素。

```
"SELECT * from jha where num IN '"+num[i]+"'"   // here value  of i is 4 
```

这就是您获得**ArrayIndexOutOfBound**的原因。知道了 ？？？

还有一件事，您在那里编写的查询适用于仅检查数组中的一个值。因此，您需要更改查询。它不会显示您的预期输出。

# c++ - 如何让函数模板朋友访问一个类？

> ID：14008883
> 
> 赞同：4
> 
> 时间：2012-12-23T05:34:36.257
> 
> 标签：c++, templates, friend

> **可能重复：**
> [如何允许模板功能具有朋友（-like）访问权限？](https://stackoverflow.com/questions/922545/how-to-allow-template-function-to-have-friend-like-access)

如何让函数模板`Load`朋友访问类`Foo`？

这里的目标是限制对构造函数的访问：只能构造函数模板`Load`。

**CODE**（请忽略内存泄漏）

```
class Foo { 
    Foo() { } 

    template<> friend Foo const& Load<Foo>();   // error here
};

template<typename T>
T const&
Load() { return *(new T); }

int main( int argc, char* argv[] )
{
    Foo const& f = Load<Foo>();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T05:51:30.147

这应该有效。

```
template<typename T> T const& Load() { return *(new T); }

    class Foo {
        Foo() { } 

        friend Foo const& Load<Foo>();
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T05:51:52.080

这样做应该有效：

```
#include <iostream>

template <typename T>
const T&
load(void)
{
    return *(new T);
}

class foo
{
    private:                                                                                                                                                                                                                                                                                                          
        foo(void)
        {
            std::cout << "hello!" << std::endl;
        }
    template <typename T>
        friend const T& load();
};

int
main(void)
{
    const foo& f = load<foo>();
    return 0;
} 
```

# javascript - 绑定时调用Backbone事件回调，不触发

> ID：14008884
> 
> 赞同：1
> 
> 时间：2012-12-23T05:35:16.787
> 
> 标签：javascript, backbone.js

我正在尝试为事件实现一个简单的中介模式，但是当我向中介注册它们时，我的事件回调被调用。

调解员很简单：

```
define(function(require){
    'use strict';
    var _ = require('underscore');
    var Backbone = require('backbone');

    return _.extend( Backbone.Events);
}); 
```

我创建了一个没有支持模型或模板的简单视图

```
define(function (require) {

'use strict';

var Backbone = require('backbone');
var mediator = require('mediator');

var Sandbox = Backbone.View.extend({

    el: '.sandbox',
    initialize: function () {
        this.render();
        this.bindEvents();
    },

    bindEvents:function(){
        mediator.on("sandbox:change", this.changeText(), this );
    },

    render: function () {
        $(this.el).html("SANDBOX VIEW IS WORKING");
    },

    changeText: function () {
        $(this.el).html("THE TEXT HAS CHANGED");
    }
});

return Sandbox;

}); 
```

加载视图时，`sandbox:change`触发事件并调用 changeText 函数，即使没有调用任何内容`mediator.trigger('sandbox:change')`

为什么在简单地绑定到中介对象时调用回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:24:26.560

当浏览器评估您的沙箱更改事件绑定`mediator.on("sandbox:change", this.changeText(), this );`时，将执行 changeText 函数，因为它们`()`已包含在内。您真正想要做的是将 changeText 函数对象传递给事件绑定：

```
 mediator.on("sandbox:change", this.changeText, this ); 
```

请记住，changeText 是一个对象，它是您的视图的成员。

```
 var Sandbox = Backbone.View.extend({
    ...
        changeText: function () {...}
    }); 
```

当您要执行函数时，请使用括号。当你想引用对象时，省略括号。

# c# - 绘制自定义文本查看器的建议

> ID：14008888
> 
> 赞同：0
> 
> 时间：2012-12-23T05:36:16.330
> 
> 标签：c#, .net, winforms, paint

我想为特定的只读文件格式开发一个文件查看程序，并且在大多数情况下它只是可滚动的文本。最简单的方法当然是使用现有的文本显示控件，但我得出的结论是，我想要一种图形化的“自定义彩色突出显示”、文本着色，也许还有其他东西。所以我是打算自己处理这幅画。我认为尝试在标签或富文本框顶部排列我自己的图形是个坏主意，所以我打算只绘制除滚动条之外的所有内容......除非这些标签/富文本控件是以某种我不知道的方式更具可扩展性？

假设我走的是绘画路线，我不能 100% 确定具体细节。我是否直接在面板上绘画？还是有更好的 GUI 控件可以绘制？另外，我*认为*如果我不缓冲屏幕会更好，因为我认为在验证时重新绘制内容会很容易/有效......但是从缓冲区重新绘制可能会更快......它会为我节省很多吗如果我只有一个屏幕缓冲区，那就麻烦了……这效率很低吗？我的计划是直接在面板中绘画，无缓冲，是一个好主意，还是有一种我正在放弃的首选方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:30:43.027

尝试使用[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser)控制或[`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox)（使格式化`html`或`rtf`从您的文本）。

# php - 原则分离、缓存和合并第 2 部分

> ID：14008889
> 
> 赞同：1
> 
> 时间：2012-12-23T05:36:54.877
> 
> 标签：php, doctrine, doctrine-orm

不久前，我问了几个关于 Doctrine 查询缓存的问题，因为它没有按我的意愿工作。

关于为什么我的关系没有被缓存的问题：

[教义结果缓存不缓存带有连接的查询](https://stackoverflow.com/questions/13336953/doctrine-result-cache-not-caching-a-query-with-a-join)

关于如何使用分离和合并缓存关系的问题：

[原则分离、缓存和合并](https://stackoverflow.com/questions/13372305/doctrine-detaching-caching-and-merging)

我不知道为什么我不早点这样做，但我刚刚启用了 Doctrine `EchoSQLLogger`，当我重新合并实体时，我发现每个页面都在执行三个查询。

我的实体是`user`,`company`和`privilege`,`user`是另外两个的父级。当我第一次获得`user`with`company`并`privilege`加入时，我运行`detach`在`user`然后将其放入`ApcCache`. 当我从缓存中获取时，我会做一个`merge`让我恢复`user`所有 Doctrine 魔法的实体。

问题是，当我调用 时`merge`，它会查询`user`、 the`company`和 then `privilege`。这`merge`是应该如何工作的吗？

有没有办法在`user`不调用数据库的情况下缓存我的实体与两个完整的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:38:57.917

对于将来阅读此内容的任何人（或我自己）：

我最终`PHP Incomplete Class`通过为每个单独的实体执行单独的查询和缓存保存来解决这个问题。例如我在问题中的用户/公司/特权困境。我缓存用户，缓存公司并覆盖`$user['company']`其结果，特权也是如此。

这似乎有效，但很严重。Doctrine 的缓存需要帮助。

# django - 在 Django admin 中订购模型 - 轻松/正确的方式

> ID：14008892
> 
> 赞同：7
> 
> 时间：2012-12-23T05:37:34.420
> 
> 标签：django, django-models, django-admin

我想在我的 Django 管理界面中订购模型。默认是应用程序中模型的字母顺序。

我想避免创建额外的包等，或者不得不改变 Django 本身。

这可以通过覆盖 Django 管理模板或其他一些轻量级的方式来完成吗？

编辑：

我不想订购最终项目，例如待办事项列表。

我想在管理员的索引页面中订购**不同的模型**。例如**todos**出现在**汽车**之前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T07:39:09.587

您可以覆盖模板并添加模板标签进行排序。这是一个片段，它可能需要一些改动[http://djangosnippets.org/snippets/1939/](http://djangosnippets.org/snippets/1939/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T09:28:25.927

我不认为有一种轻量级的方法可以做到这一点 - 一方面没有工具来存储排序，所以它至少会在某个地方涉及一个新的数据库字段，然后代码获取该字段以找到所需的排序。实际上这可能行不通，因为 AdminSite 是动态构建的，而不是存储在数据库中……嗯，让我们看看 Django 做了什么……

索引模板只是管理员注册的应用程序的循环，并且在每个应用程序中都是模型的循环。它们的顺序由[https://github.com/django/django/blob/master/django/contrib/admin/sites.py](https://github.com/django/django/blob/master/django/contrib/admin/sites.py)中的第 384 行定义- 所以一个钩子是继承 AdminSite 并重写 index 方法. 在这里讨论制作新的 AdminSite 事物：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#adminsite-objects](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adminsite-objects)

也许如果您想按照注册的顺序展示模型，您可以在该方法中取出排序线。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-26T16:39:08.760

我要留下一个不太好的答案。

模型在 django/contrib/admin/sites.py 的第 448 行进行排序

```
448        # Sort the models alphabetically within each app.
449        for app in app_list:
450            app['models'].sort(key=lambda x: x['name']) 
```

我尚未对此进行测试，但您可以尝试在模型的 Meta 类中添加一个变量，您可以使用该变量在第 403 行的 for 循环中的管理员索引页面中设置模型的顺序。

```
403        for model, model_admin in self._registry.items():
               ,,,
431                    else:
432                        order = model._meta.order
433                        app_dict[app_label] = {
434                            'order': order,
435                            ... 
```

并将排序替换为以下内容：

```
450            app['models'].sort(key=lambda x: x['order']) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-19T14:45:20.520

我只是用代理模型做到了这一点，这样模型就可以分组在一个标题下。我意识到您可以通过更改代理模型的 verbose_name 和 verbose_name_plural 来调整排序顺序。因此，可以使用 " " + ._meta.verbose_name 来实现顶级名称，而其他名称可以仅按 1., 2\. 3., ... 重新排序

我敢肯定这不是您要找的，但这是我可以达到的轻量级并获得可接受的结果。

```
# foo/admin.py
from django.contrib import admin
from zoo.models import Zoo

class ZooProxy(Zoo):
    class Meta:
        proxy = True
        app_label = 'foo'
        verbose_name = " " + Zoo._meta.verbose_name
        verbose_name_plural = " " + Zoo._meta.verbose_name_plural

# one/admin.py
from django.contrib import admin
from one.models import One

class OneProxy(One):
    class Meta:
        proxy = True
        app_label = 'foo'
        verbose_name = "2\. " + One._meta.verbose_name
        verbose_name_plural = "2\. " + One._meta.verbose_name_plural

# two/admin.py
from django.contrib import admin
from two.models import Two

class TwoProxy(Two):
    class Meta:
        proxy = True
        app_label = 'foo'
        verbose_name = "1\. " + Two._meta.verbose_name
        verbose_name_plural = "1\. " + Two._meta.verbose_name_plural 
```

结果是 django 管理员：

```
Foo:
    Zoo
    1\. Two
    2\. One

-vs-

Foo:
    One
    Two
    Zoo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-03T06:48:43.940

由于我的代码使用 admin.site.register 逐一注册模型，如果 Django 能够记住并使用该顺序，那就太好了。将 django/contrib/admin/sites.py 中的一些字典更改为 OrderedDict() 可能会提供该功能。

这可以通过覆盖默认管理站点并进行一些小的更改来完成：

```
class MyAdminSite(AdminSite):

    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self._registry = OrderedDict()  # remembers the registration order

    def get_app_list(self, request):
        app_dict = self._build_app_dict(request)

        # Sort the apps alphabetically.
        app_list = sorted(app_dict.values(), key=lambda x: x['name'].lower())

        # disabled the sorting of models
        ## Sort the models alphabetically within each app.
        #for app in app_list:
        #    app['models'].sort(key=lambda x: x['name'])

        return app_list 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-12-23T06:24:46.880

我不确定 Django 是否提供默认排序，但是您可以使用 ModelAdmin 对象在 Django admin 中添加过滤器和排序窗格。它看起来像这样。![在此处输入图像描述](../Images/18f17a82249ed9163f05d8d9bbe9c2d0.png)

这些更改必须在 admin.py 文件中完成

```
class PersonAdmin(ModelAdmin):
    list_filter = ('is_staff', 'company') 
```

list_filter 将添加可以用于排序和过滤目的的窗格

有关更多信息，请查看：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)

# c++ - c++11中的自动引用

> ID：14008893
> 
> 赞同：3
> 
> 时间：2012-12-23T05:38:58.620
> 
> 标签：c++, c++11, constants, auto

我有一些麻烦`about`自动参考。

```
const int i = 1;
auto & ri1 = i; 
auto & ri2 = 1; //error 
```

为什么推断类型是`ri1` `const int`而不是`ri2`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T06:17:09.653

既然`i`有类型`const int`，但`1`有类型`int`。

# java - 为什么 useTransparentBounds() 不在 Matcher 的区域之外搜索？

> ID：14008897
> 
> 赞同：0
> 
> 时间：2012-12-23T05:39:50.230
> 
> 标签：java, regex

我尝试使用[`useTransparentBounds()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#useTransparentBounds%28boolean%29)，但它似乎没有按预期工作（如[ideone 所示](http://ideone.com/a9T5zL)）。在以下代码段中，我希望`m.find()`找到匹配项，因为启用了透明边界，因此允许在`Matcher`其区域边界之外进行搜索。为什么这不起作用？

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

class Foo {
    public static void main(String[] args) {
        // match everything preceded by X
        Matcher m = Pattern.compile(".*(?<=X)").matcher("Foo BarX Baz");

        // limit matcher to first chars outside of normal lookahead scope
        m.region(0, 4);

        // matcher should still find a match because of transparent bounds
        m.useTransparentBounds(true);

        // this fails to find a match! why?
        System.out.println("found=" + m.find());
        System.out.println("result=" + m.group());
    }
} 
```

（我在 Mac OSX Mountain Lion 上使用 J2SE 6 (1.6.0_37-b06-434-11M3909)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:54:49.893

首先，`(?<=X)`是向后看，而不是向前看；我想你的意思是`.*(?=X)`。现在让我们开始检查当您不限制匹配区域时会发生什么。

最初，`.*`使用整个字符串 ( `"Foo BarX Baz"`)，然后将控制权交给`(?=X)`（前瞻），它断言下一个字符是`X`。那失败了（显然），所以匹配器返回最后一个字符并尝试消费 just `"Foo BarX Ba"`，但他的前瞻再次失败。它继续这样，直到它达到它正在消耗的点`"Foo Bar"`。下一个字符是 now `X`，所以前瞻成功。

如果您将区域限制为`(0,7)`您可能希望它继续工作。 *您*知道下一个字符是`X`，无论如何，您只是想*查看*，而`X`不是消费它。但是不，匹配器甚至看不到它。它的行为与您一开始就应用它时的行为完全相同`"Foo Bar"`。它不会费心查看 之后的字符`r`，因为它认为之后**没有**字符。

无论如何，这是默认行为。`useTransparentBounds(true)`为了匹配零宽度断言（环顾、字边界等），匹配器能够超越区域边界。你仍然不能*消费*任何不在当前区域的东西；那不是它的用途。

您的正则表达式不起作用的原因是因为它只查看字符串的前四个字符。要使前瞻成功，必须有一个`X`位于索引#4 的位置（例如`"Foo X"`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:59:04.373

这是因为您指定`0-4`的区域不是匹配的区域..

即应该是`m.region(0,7);`

它应该是`0-7`..这将匹配`Foo BarX`0-7 而**不是**0-4的范围内

但是你想匹配什么！你的正则表达式没有意义

# javascript - 有没有更好的方法来处理 Node.js/Expressjs 中的嵌套回调？

> ID：14008898
> 
> 赞同：1
> 
> 时间：2012-12-23T05:39:58.087
> 
> 标签：javascript, node.js, architecture, callback, express

我使用 Node.js 和 Expressjs 进行服务器端编码，使用 MongoDB 作为后端。我对所有这些技术都是新手。我需要根据请求执行操作列表。

例如在用户管理中

1.  检查用户是否已经注册
2.  如果已注册，请重新发送激活电子邮件
3.  如果未注册，则从另一个表中获取 userId，该表将维护用户、资产等的 id。[我知道 MongoDB 提供唯一的 _id；但我需要有一个唯一的整数 id 作为 userId]
4.  创建用户
5.  发送成功或失败响应。

为了实现这一点，我编写了以下代码：

```
exports.register = function(req,res,state,_this,callback) {
   switch(state) {
    case 1: //check user already registered or not
      _this.checkUser(req, res, ( state + 1 ), _this, _this.register, callback);
      break;
    case 2: //Already registered user so resend the activation email
      _this.resendEmail(req, res, 200, _this, _this.register, callback);
      break;
    case 3: //not registered user so get the userId from another table that will maintain the ids for user,assets etc
      _this.getSysIds(req, res, ( state + 2 ), _this, _this.register, callback);
      break;
    case 4: //create the entry in user table
      _this.createUser(req, res, ( state + 1 ), _this, _this.register, callback);
      break;
    case 200: //Create Success Response
      callback(true);
      break;
    case 101://Error
      callback(false);
      break;
    default:
      callback(false);
    break;
  }
}; 
```

检查用户代码是这样的

```
exports.checkUser = function(req,res,state,_this,next,callback) {
    //check user already registered or not
    if(user) {//Already registered user so resend the activation email
       next(req,res,state,_this,callback);
    }
    else {//not registered user so get the userId
      next(req,res,(state + 1),_this,callback);
    }
} 
```

和类似的其他功能。

对注册函数的第一次调用将从 app.get 执行为

```
user.register(req,res,1,this,function(status) {
//do somthing
}); 
```

有没有更好的方法来做到这一点？我面临的问题是基于某些条件，我必须遵循一系列行动。我可以在嵌套的回调结构中编写所有这些，但在这种情况下，我无法重用我的代码。

我的老板告诉我的一个问题是，在代码中我调用了函数寄存器并将其放入一个回调堆栈中

状态 1：切库斯

状态 3：getIds

状态4：创建用户

最后在状态 200 中，我刚刚从堆栈中退出？可能会导致堆栈溢出！

有没有更好的方法来处理 Node.js/Expressjs 中的回调？

注意：以上是示例代码。我有很多不同的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:26:44.527

也许更优雅的方法是将所有各种可能的功能放入一个对象中，然后根据您所处的状态调用您需要的任何一个。有点像

```
var States = {
   1: checkuser,
   2: resendEmail,
   3: getSysIds,
   4: createUser,
   5: whateverIsNext 
} 
```

然后你只需要一个可以完成所有事情的功能

```
function exec(req,res,state,_this,callback){
   States[state].apply(this, arguments) 
} 
```

你的每个函数都会将 state 参数设置为它需要的任何值，然后调用 exec，例如

```
function checkUser(req,res,state,_this,callback){
    var doneRight = do_whatever_you_need;
    state = doneRight? state++: state; //just set state to whatever number it should be
    exec(req,res,state,_this,callback);
} 
```

这样，您的步骤列表就很好了，可读/可更改。您拥有一个执行所有操作的函数，并且每个步骤只需要管理下一步应该是什么。如果您愿意，您还可以用命名替换编号的步骤，这将使其更具可读性，但您将失去增加/减少步骤变量的能力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T19:34:44.453

您在这里过度设计混合中间件、数据库层和路由处理程序。让我们让它更简单，更可重用。

首先，让我们确保我们的中间件和路由处理程序可以相互通信。这可以通过[会话中间件](http://www.senchalabs.org/connect/middleware-session.html)来完成：

```
// Somewhere inside configuration:
app.use(express.cookieParser()
app.use(express.session({secret: 'cookie monster'));

// If you don't want sessions, change with this:
app.use(function (req, res, next) {
  req.session = {};
  next();
}); 
```

您现在想要的是在请求处理期间到处都有用户信息。目前，它只是电子邮件，无论它是否注册。那将是第一个独立的中间件。`email`为简洁起见，我们假设您通过使用from [query string](http://expressjs.com/api.html#req.query)查询 db 来检测用户是否注册。

```
// Fills `req.session.user` with user info (email, registration). 
function userInfo (req, res, next) {
  var user = req.session.user = req.session.user || {};
  user.email = req.query.email;  // I'll skip validation.

  // I'm not sure which mongo driver you are using, so this is more of a pseudo-code.
  db.users.findOne({email: user.email}, function(err, bson) {
    if (err) {
      return next(err);  // Express 3 will figure that error occured
                         // and will pass control to error handler:
                         // http://expressjs.com/guide.html#error-handling
    }

    // Could remember information from DB, but we'll just set `registred` field.
    user.registred = !!bson;
    next();
  });
} 
```

确定注册状态后，您应该发送电子邮件或创建新用户，这将是请求处理程序（最后一个参数`app.get`）。在执行处理程序之前，我们希望我们`userInfo`运行（可以只传递`userInfo`（不是数组），但我个人更喜欢这种方式）：

```
app.get('/register', [userInfo], function (req, res) {
  var user = req.session.user;
  var fn = user.registred ? sendActivationEmail
                          : registerUser;

  // If signatures differs or you need different reply for cases...
  // Well, you'll figure.
  fn(user.email, function (err) {
    return res.send(err ? 500 : 200);
  });
}); 
```

请求处理程序不应该被这两个函数内部发生的事情所困扰（多少数据库查询，谁在发送电子邮件以及如何发送电子邮件）。它所知道的是，如果发生错误，提供的回调的第一个参数不为空。

现在关于创建新用户。编写`registerUser`函数，它将查询带有 ID 的表，准备用户信息并将其保存在数据库中。关于如何同步这两个操作，请参阅[async](https://github.com/caolan/async)和其他[SO questions](https://stackoverflow.com/questions/tagged/node.js+asynchronous)。创建完成或出错时，调用`callback`结果。这个函数应该是 DB 层的一部分。至少，创建`db.js`模块并导出重要的东西，例如`registerUser`；通过电子邮件（在第一个中间件中）查询用户信息也应该在 DB 层中。

类似的适用于`sendActivationEmail`。

*旁注：您可以在 mongo documet*中放入任何您想要[`_id`](http://docs.mongodb.org/manual/reference/glossary/#term-id)的内容，而不仅仅是[`ObjectId`](http://docs.mongodb.org/manual/core/object-id/).

# c# - 如何获取列表 对象，来自这个 XML？

> ID：14008903
> 
> 赞同：0
> 
> 时间：2012-12-23T05:40:47.320
> 
> 标签：c#, xml, linq, linq-to-xml

我无法理解这段代码。

```
 XDocument loaded = XDocument.Load(PATH);
        var devices = new List<Device>(loaded.Descendants("Device").Select(e => new Device
        {
            UserName = "xxx",
            Domain = e.Element("domain").Value,
            FQDN = e.Element("fqdn").Value,
            Password = e.Element("password").Value,

        })); 
```

它如何添加这些元素，并获取设备列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:31:14.173

此代码使用 LINQ 读取 XML 并使用 XML 的信息创建设备对象列表。

像这样填写字段：

*   UserName = "xxx" 始终 UserName 属性具有相同的值 xxx
*   域 = xml 中域元素的值
*   FQDN = XML 中 fqdn 元素的值
*   密码 = xml 中密码元素的值

你的 XML 是这样的：

```
<Devices>
  <Device>
    <domain>domainValue</domain>
    <fqdn>fqdnValue</fqdn>
    <password>passwordValue</password>
  </Device>
</Devices> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:33:37.970

```
 XDocument loaded = XDocument.Load(PATH);
      // devices = List of device
    var devices = new List<Device>
      //look up for every Device in xml file
    (loaded.Descendants("Device")
      //create new Device object
    .Select(e => new Device
    {
          //and fill it with found element's values
        UserName = "xxx",
        Domain = e.Element("domain").Value,
        FQDN = e.Element("fqdn").Value,
        Password = e.Element("password").Value,

    })); 
```

# c - C中的fputc与putc

> ID：14008907
> 
> 赞同：21
> 
> 时间：2012-12-23T05:41:34.173
> 
> 标签：c, stdio

我正在阅读 Kernighan 的 C 编程书，偶然发现`putc`了`fputc`. 我不太明白两者之间的区别，也不明白什么时候可以使用另一个。我在 StackOverflow 上找到了一些涉及该主题的帖子，但仍不清楚。

如此处所述（[putc 需要标准输出，而不是 puts](https://stackoverflow.com/questions/4563825/putc-needs-stdout-vs-puts)）：

> 1.  根据 Kernighan 的书`putc`，等效于`fputc`但`putc`可以实现为宏，并且`putc`可以多次评估其流参数。
>     
>     
> 2.  `putc`和之间的区别在于`fputc`，使用`putc`，您可能会运行本质上不安全的宏版本，因为它可能必须多次评估其流参数。这会导致大多数人没有意识到的并发症，因此不会提防，因此`fputc`最好使用。`fputc`的宏没有这个问题。

**问题：**

1.  `putc`可以实现为宏，但同样的问题是什么`fputc`？

2.  第二个声明提到了一些并发症和安全问题。那些是什么？

3.  `putc`不止一次地评估它的论点。那么与评估论点相比，它有哪些优点或缺点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-23T05:54:22.387

宏实现的问题是，如果任何参数有副作用，*这些副作用可能会被多次评估*，可能导致*未定义的行为*。考虑这个玩具示例：

```
#define SQUARE(x) ((x) * (x)) 
```

大多数情况下，这将按预期运行，但如果您传入一个表达式，例如`f()`，那么调用该函数的副作用`f()`将发生*两次*，而不是*一次*，因为预处理器只是一个不了解 C 的文本转换器：

```
int f()
{
    printf("f() was called\n");
    return 42;
}
...
int x = SQUARE(f());  // This calls f() twice!  It gets expanded to this:
// int x = (f() * f()); 
```

从这个角度来看，该`putc`函数如果实现为宏，可能会`stream`多次评估其参数。因此，如果该流来自一个函数：

```
FILE *get_file()
{
    // Potential side effects could happen here
    return some_file;
}
...
putc('A', get_file()); 
```

那么这可能会导致该函数`get_file()`被多次调用，并产生潜在的不良副作用。

当然，解决方案是只调用一个常规函数，例如`fputc()`而不是`putc()`. 由于它不是宏，因此多次评估其参数不会有任何潜在问题。宏有时可能很危险，因此请谨慎使用。

# r - 在 data.frame 中获取不寻常的 colname

> ID：14008908
> 
> 赞同：-2
> 
> 时间：2012-12-23T05:41:34.847
> 
> 标签：r

这是我的代码，

```
x<-c(70, 82, 91, 76, 84, 94, 72, 76, 74, 67, 70, 45, 69, 86, 75,
    84, 63, 93, 87, 67, 71, 83, 90, 88, 58, 69, 91, 74, 80, 79,  
    75, 88, 87, 50, 80, 84, 94, 72, 85, 71, 81, 74, 75, 81, 75, 57,
    78, 78, 61, 60)                 
y<-table(cut(x, breaks=c(0,60,70,80,90,100),include.lowest=TRUE,right=FALSE)) 
z<-cbind(y,prop=prop.table(y)*100)  
z 
```

我可以拿到桌子：

```
 y prop  
[0,60)    4    8  
[60,70)   7   14  
[70,80)  18   36  
[80,90)  15   30  
[90,100]  6   12 
```

如果我想获得表格，例如

```
 y prop%  
[0,60)    4    8
[60,70)   7   14
[70,80)  18   36
[80,90)  15   30
[90,100]  6   12 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:08:05.653

你可以用它`colnames`来完成你想要的。确保你的新名字在里面`c()`

```
colnames(z) <- c("y", "prop%")
z

          y prop%
[0,60)    4     8
[60,70)   7    14
[70,80)  18    36
[80,90)  15    30
[90,100]  6    12 
```

# c# - 允许 WCF 在 Azure 上通过 REST HTTPS 工作

> ID：14008909
> 
> 赞同：2
> 
> 时间：2012-12-23T05:41:47.303
> 
> 标签：c#, ajax, web-services, rest, azure

我有一个基于 WCF 的 REST Web 服务并通过 HTTP 工作。

如果我尝试通过 HTTPS 访问它，我会收到 404 错误。我需要 HTTPS 才能正常工作，因为该服务将主要处理用户在浏览器中通过 AJAX 所做的状态更改。如果我尝试调用 Web 服务，`.ajax`我会收到错误消息。

`http://site/svc/core.svc/dowork == working`

`https://site/svc/core.svc/dowork == 404`

这是基本代码：

```
 [OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json)]
    string DoWork();

    public string DoWork()
    {
        return "hullo";
    }

  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <bindings>
      <webHttpBinding>
        <binding name="secureBinding">
          <security mode="Transport"/>
        </binding>
      </webHttpBinding>
    </bindings>
    <protocolMapping>
      <add binding="webHttpBinding" bindingConfiguration="secureBinding" scheme="https"/>
    </protocolMapping>
    <services>
      <service name="Fusion.core" behaviorConfiguration="Fusion.CoreBehavior" >
        <endpoint contract="Fusion.Icore" binding="webHttpBinding" behaviorConfiguration="webBehavior" address="" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Fusion.CoreBehavior">
          <serviceMetadata httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

# android - 使用android的基于索引的列表视图

> ID：14008910
> 
> 赞同：1
> 
> 时间：2012-12-23T05:41:59.357
> 
> 标签：android, listview

我目前正在开发一个显示各种列表的 Android 应用程序。我想创建一个这样的列表视图：![在此处输入图像描述](../Images/804711ae015b960b866c41f0269ac3e4.png)..我怎样才能做到这一点？我尝试使用 AlphabetIndexer 来快速滚动 ListView 和 IndexableListView。但我不能这样做。请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:52:11.347

使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。它完全符合您的需要。

# html - CSS - 在一行中的 div 中显示图像

> ID：14008911
> 
> 赞同：0
> 
> 时间：2012-12-23T05:42:17.987
> 
> 标签：html, css

我在一个 div 中有 3 个图像，我希望它们显示在一行中。来自我当前代码的输出是 2 个图像是一个单行，另一个在底部。

任何帮助，将不胜感激！

我的 HTML 代码：

```
<div id="slider_container">
            <div class="slider">
                <img id="1" src="Kid Playing Guitar_big.jpg" border="0" style="float:left;" />
                <img id="2" src="University Students_big.jpg" border="0" style="float:left;" />
                <img id="3" src="Business Man_big.jpg" border="0" style="float:left;" />
            </div>
            <div class="slider_thumbnails">
                <img id="1" src="Kid Playing Guitar.jpg" border="0" />
                <img id="2" src="University Students.jpg" border="0" />
                <img id="3" src="Business Man.jpg"  border="0" />
            </div>
        </div> 
```

我的 CSS 代码：

```
@CHARSET "UTF-8";

        #slider_container{
            height: 360px;
            width: 720px;
        }

        .slider{
            width: 720px;
            height: 360px;
            overflow: hidden;
            background-image: url(loading.gif);
            background-repeat: no-repeat;
            background-position: center;
        }

        .slider img{
            width: 480px;
            height: 360px;
            display: none;
        }

        .slider_thumbnails{
            width: 720px;
            display:inline-block;
        }

        .slider_thumbnails img{
            display: inline-block;
        } 
```

请在发布答案后解释代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T05:55:07.367

```
.slider_thumbnails{
    width: 720px;
    display:inline-block;
    white-space:nowrap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:16:28.177

```
.slider img{
            width: 480px;
            height: 360px;
            display: none;
        }

.slider_thumbnails{
            width: 720px;
            display:inline-block;
        }

.slider_thumbnails img{
            display: inline-block;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T05:59:18.637

我认为问题在于图像的总宽度等于容器的宽度。尝试将图像的宽度更改为 235。它适用于您的 jsfiddle。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T06:49:58.977

一个`float:left;`呢？

```
.slider img{
            float: left;
            position: relative;
           } 
```

对于浮动，`width`非常重要。所以不要忘记测量它们并定义在`margin`,之后计算的适当宽度`padding`。

# c# - 双自加入寻找增加更多独特价值的项目？

> ID：14008914
> 
> 赞同：0
> 
> 时间：2012-12-23T05:42:49.770
> 
> 标签：c#, .net, linq, linq-to-objects, self-join

我有一个`Dictionary<Key, <Quality,Item>>`正在跟踪质量和项目之间的关系。质量是一种对象类型，项目是一种对象类型，在其他地方我有有效质量和有效项目的列表。物品有一个固定的品质列表，总是不止一个。质量可以由任意数量的项目持有，包括 0，具体取决于程序的状态。

目前，项目对象还在列表中跟踪它们自己的质量，这是我解决此问题的失败策略之一。我不知道这是否有用，它现在肯定对我没有帮助，如果证明没用，可能会被淘汰。

我已经有一个 LINQ 自联接，它收集了成功共享至少一个质量的独特项目*对。*

```
var r = from KeyValuePair<int, Tuple<Quality, Item>> virtQ2I_1
        in QualitiesToItems
        join KeyValuePair<int, Tuple<Quality, Item>> virtQ2I_2
        in QualitiesToItems
        on virtQ2I_1.Value.Item1.name equals virtQ2I_2.Value.Item1.name
        where (virtQ2I_1.Value.Item2.name != virtQ2I_2.Value.Item2.name)
        select new List<Item>
        {
            virtQ2I_1.Value.Item2, 
            virtQ2I_2.Value.Item2
        }; 
```

之后我使用另一个字典来清理 <ItemA, ItemB> 被认为与 <ItemB, ItemA> 相同的小打嗝。

**需要什么：**每个*三元组*的唯一项目的列表，这些项目至少与三元组中的至少一个其他项目共享一个品质。*毛茸茸的大并发症：*三元组中的第三项不能*只*共享现有的共享品质之一；它*必须*给这段关系带来一些新的东西。而且我需要从几百个项目的列表中快速获得结果——我现有的解决方案不满足最后一个要求。

**例子：**

*   ItemA 是毛茸茸的、金发的、四足的、训练有素的
*   ItemB 是毛茸茸的、罗文的、六足的、训练有素的
*   ItemC 是有羽毛的、蓝色的、两条腿的、训练有素的
*   ItemD 是 Scaled、Rowan、Slithers 和未经训练的

    *   ItemA 和 ItemB 已经被选为有效的一对，具有 Furry 和 Trained 的品质。（B:D 当然是另一个有效的配对，A:C 和 B:C 也是如此）

    *   ItemA、ItemB 和 ItemC 不构成有效的三元组，因为 A:B 已经训练过了，并且 ItemC 与 ItemA 或 ItemB 没有其他共同点；A:B:C 与 A:B 具有相同的 Qualities 列表，因此 C 被视为“多余”或“冗余”而被拒绝。

    *   ItemA、ItemB 和 ItemD 构成一个有效的三元组，因为 ItemD 与 ItemB 在 Rowan 周围形成一对。A:B:D 的结果是 Furry、Rowan、Trained... 我需要 A:B:D 的组合进入我的返回结果列表。

从我获得我的双胞胎的方式到我需要以一种在合理的时间内处理数百件物品的方式获得我的三胞胎的方式，我遇到了问题。

当我编写一个方法来查找两个项目之间的共享品质并将其用于我的新 LINQ 查询时，我认为我非常聪明，但结果是......当用于超过一个分数左右的项目时非常慢，并且与将要运行的某些机器相比，我的计算机功能过于强大。

```
var r = from KeyValuePair<int, Tuple<Quality, Item>> virtQ2I_1 
        in QualitiesToItems 
        join KeyValuePair<int, Tuple<Quality, Item>> virtQ2I_2 
        in QualitiesToItems
        on virtQ2I_1.Value.Item1.name equals virtQ2I_2.Value.Item1.name
        join KeyValuePair<int, Tuple<Quality, Item>> virtQ2I_3
        in QualitiesToItems
        on virtQ2I_2.Value.Item1.name equals virtQ2I_3.Value.Item1.name
        where (virtQ2I_1.Value.Item2.name != virtQ2I_2.Value.Item2.name &&
        virtQ2I_1.Value.Item2.name != virtQ2I_3.Value.Item2.name &&
        virtQ2I_2.Value.Item2.name != virtQ2I_3.Value.Item2.name &&
        Item.SharedQualities(this, new Item[2] { virtQ2I_1.Value.Item2, virtQ2I_2.Value.Item2 }).Count !=
        Item.SharedQualities(this, new Item[3] { virtQ2I_1.Value.Item2, virtQ2I_2.Value.Item2, virtQ2I_3.Value.Item2 }).Count)
        select new List<Item>
        {
            virtQ2I_1.Value.Item2, 
            virtQ2I_2.Value.Item2, 
            virtQ2I_3.Value.Item2
        }; 
```

所以：这行得通，但我不喜欢它。有没有办法用纯 LINQ 替换我的函数调用（和新项目数组）中间查询？*必须*有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:42:04.433

对这个问题进行更多的抨击提供了一个解决方案，它在 LINQ 中完成了最糟糕的繁重工作，并且比我在原始帖子中尝试的性能要好得多。

```
//collect two-pair items
var result = from KeyValuePair<int, Tuple<Quality, Item>> virtQ2I_1
                    in QualitiesToItems
         join KeyValuePair<int, Tuple<Quality, Item>> virtQ2I_2
                 in QualitiesToItems
         on virtQ2I_1.Value.Item1.name equals virtQ2I_2.Value.Item1.name
         where (virtQ2I_1.Value.Item2.name != virtQ2I_2.Value.Item2.name)
         select new List<Item> {
                    virtQ2I_1.Value.Item2, 
                    virtQ2I_2.Value.Item2
                    };
List<List<Item>> ItemsForSets = result.ToList();

// self-join raw two-pair item list to generate three-set items
result =    from List<Item> leftSide in ItemsForSets 
        join List<Item> rightSide in ItemsForSets
        on leftSide[1] equals rightSide[0]
        where (leftSide[0] != rightSide[1])
        select new List<Item> {
                    leftSide[0], 
                    leftSide[1],
                    rightSide[1]
                    };

ItemsForSets.AddRange(result.ToList());

// clean up results - preventing A:B and B:A from being considered unique,
//    and ensuring all third ingredients actually contribute to a relationship.
foreach (List<Item> items in ItemsForSets)
{
    List<Quality> sharedQualities = Item.SharedQualities(this, items.ToArray());
    sharedQualities.Sort();
    List<String> sortedItems = items.ConvertAll(item => item.name); // I need the string names elsewhere 
    // TODO: I should rewrite to work directly with Items and convert after confirming I actually need the item.
    sortedItems.Sort(); // first part of preventing A:B B:A problems
    if (!Sets.ContainsKey(String.Join(", ", sortedItems))) // Dictionary provides second part.
    {
        if (items.Count == 3)
        {
            List<Quality> leftPairQualities = Item.SharedQualities(this, items.GetRange(0, 2).ToArray());
            leftPairQualities.Sort();
            if (leftPairQualities.SequenceEqual(sharedQualities))
            { // if the third item does not add a new quality
                continue; // short circuit out to the next item
            }
        }
        // otherwise add to the list.
        Sets.Add(String.Join(", ", sortedItems), new Potion(items, sharedQualities));
    }
} 
```

我可以做更多的清理工作，我可能会用另一个 LINQ 查询替换 foreach ，但这会消除大障碍并显着提高性能。

# java - 该方法必须覆盖或实现超类方法

> ID：14008918
> 
> 赞同：1
> 
> 时间：2012-12-23T05:44:13.100
> 
> 标签：java, eclipse, interface, implementation, superclass

快速提问。我正在使用 Eclipse，我得到了 The method must override or implement a superclass method 错误，除了 Eclipse 使用的是 Java 1.7 的合规性。
这是我的代码：

```
public abstract class M4 implements Armory {

@Override
public Integer weaponAmmo(int wepAmmo) {
    wepAmmo = 10;
    return wepAmmo;
}

@Override
public Integer weaponDamage(int wepDamage) {
    wepDamage = 2;
    return wepDamage;
}

@Override
public String weaponName(String wepName) {
    wepName = "M4";
    return wepName;
} 
```

这是接口代码：

```
public interface Armory {
        public Integer weaponAmmo(int wepAmmo);
        public Integer weaponDamage(int wepDamage);
        public String weaponName(String wepName);

    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T05:49:24.167

您不需要`@override`在方法实现中使用注释，因为您没有覆盖方法。**您只是在实现接口方法。当您覆盖任何超类方法时，此注释是必需的。**

去掉`@Override`注释应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T05:47:53.983

你没有覆盖任何东西，你正在实施它们。所以我猜@Override 可以被删除。

编辑：我认为您的编译器在 Eclipse 中设置为 Java 1.5

[为什么 Eclipse 在接口方法上抱怨 @Override？](https://stackoverflow.com/questions/987973/why-does-eclipse-complain-about-override-on-interface-methods)

从 java 1.6 开始允许在接口实现上使用 @override。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T05:54:05.240

在 Java 5`@Override`中，仅允许用于覆盖超类方法的方法。因为 Java 6`@Override`也允许实现接口方法的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-25T06:32:13.953

即使 Eclipse 已设置为高于 Java 1.5 的合规级别，此错误也可能由于您的项目属性而发生。右键单击您的项目 > 属性 > Java 编译器。在这里也将其更改为 1.6 或更高版本。执行项目 > 清理。

# iphone - Objective-C 正则表达式

> ID：14008920
> 
> 赞同：0
> 
> 时间：2012-12-23T05:44:48.563
> 
> 标签：iphone, objective-c, ios, regex, nsregularexpression

我需要Objective C中的正则表达式来接受一个`male`或只接受`female`..它应该`case-Insensitive`意味着可以接受较低和较高的.我浏览了苹果文档..并在下面的代码中实现但不工作......

-->只能接受**男性或女性**

```
-(BOOL)genderValidate:(NSString *)string{

NSError *error=nil;

NSRegularExpression *regex =[NSRegularExpression regularExpressionWithPattern:@"\\b (m|f)(a|e)(l|m)(e|a)(l)(e) \\b" options:(NSRegularExpressionCaseInsensitive) error: &error];
NSUInteger numberofmatches =[regex numberOfMatchesInString:string options:0 range:NSMakeRange(0,[string length])];

return numberofmatches;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T05:55:17.533

为什么要使用正则表达式？把事情简单化：

```
- (BOOL)genderValidate:(NSString *)string {
    string = [string lowercaseString];

    return [string isEqualToString:@"male"] || [string isEqualToString:@"female"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T05:48:54.220

正则表达式应该是

```
^(male|female)$ 
```

# c# - 当我按下编辑按钮时使用gridview填写Winform

> ID：14008921
> 
> 赞同：0
> 
> 时间：2012-12-23T05:45:30.203
> 
> 标签：c#, winforms

我想在该行突出显示时填写所有表单（表单 1）字段，`GridView`然后按另一个表单（表单 2）上的编辑按钮。我想用`gridview.focus();`. 这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:56:27.303

是的，这是可能的。只需抓取所选行中的数据并根据需要将其添加到您的编辑表单中。将其传递给表单的构造函数或具有公共加载函数。打开表单将使其获得焦点。

# php - 两个 While 循环，第二个返回空数组？

> ID：14008922
> 
> 赞同：0
> 
> 时间：2012-12-23T05:46:28.467
> 
> 标签：php, mysqli

我正在试验 MySQLi 并使用以下代码来检查我应该如何处理我的数组格式/用法的差异`fetch_array(MYSQLI_ASSOC);`

这是我的代码：

```
include "Database.php"; 

$ArrayQuery = $mysqli->query("SELECT * FROM accountinformation");

while ($ArrayResults = $ArrayQuery->fetch_array(MYSQLI_ASSOC))
{
    echo count($ArrayResults);
    echo "<br>";
}
echo "<br><br><bR><br>";
    $Empty = array();
while ($ArrayResult = $ArrayQuery->fetch_array(MYSQLI_ASSOC))
{
    foreach ($ArrayResult AS $ArrayRes)
    {
        $Empty[] = $ArrayRes;
    }
}

print_r($Empty); 
```

问题是，我在`Variable`我的while循环中使用相同的，第一个返回`3`然后`3`是预期的。

但问题是，我的第二个查询；它返回一个空白数组

`array( )`什么时候`print_r();`

当我这样做时：

```
while ($ArrayResult = $ArrayQuery->fetch_array(MYSQLI_ASSOC))
{
    print_r($ArrayResult);
} 
```

对于我的第二个 while 循环，它不返回任何输出。

我检查了我的变量`$ArrayResults`并且`$ArrayResult`不是重复的，它们实际上是唯一的。

为什么我的第二个 while 循环在我的第一个循环工作时没有返回任何内容？

**更新**

当我对具有不同起始变量的混合物进行第二次查询时：

```
$ArrayQuer = $mysqli->query("SELECT * FROM accountinformation"); 
```

并修改我的第二个 while 循环：

```
while ($ArrayResult = $ArrayQuer->fetch_array(MYSQLI_ASSOC))
{
    print_r($ArrayResult);
} 
```

我得到了预期的输出？那么这是 MySQLi 不允许在整个脚本中使用两次相同参数的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:59:21.570

> mysqli_data_seek
> 
> 将结果指针调整到结果中的任意行

```
while ($ArrayResults = $ArrayQuery->fetch_array(MYSQLI_ASSOC))
    {
        echo count($ArrayResults);
        echo "<br>";
    }
    echo "<br><br><bR><br>";
    mysqli_data_seek($ArrayQuery,0); // Addition Made Here
        $Empty = array();
    while ($ArrayResult = $ArrayQuery->fetch_array(MYSQLI_ASSOC))
    {
        foreach ($ArrayResult AS $ArrayRes)
        {
            $Empty[] = $ArrayRes;
        }
    }
    print_r($Empty); 
```

重新使用已经获取的数组；您应该使用`mysqli_data_seek();`（*注意我已将其添加到您的 `$Empty 变量上方*）这应该是问题所在。

请参阅此处的手册：

[http://us.php.net/manual/en/mysqli-result.data-seek.php](http://us.php.net/manual/en/mysqli-result.data-seek.php)

*想想这种情况；你为什么要重新购买你已经拥有的东西？*

*非常适合您的情况*

# powershell - Powershell Copy-Item - 访问被拒绝

> ID：14008924
> 
> 赞同：1
> 
> 时间：2012-12-23T05:46:34.147
> 
> 标签：powershell, copy-item

我正在编写一个脚本，它将打开目录中的文件并执行查找/替换。但在我这样做之前，我想在与原始文件相同的目录中制作文件的副本。所有文件都存在于 C:\Program Files (x86) 目录中。脚本错误指出拒绝访问该目录。我看到 Copy-Item 有一个 -Credential 参数，但在我的测试机器上我没有任何本地管理员权限。似乎没有任何方法可以将文件复制到同一目录。我可以指定系统的临时文件夹（Windows 7 Professional）并直接写在那里吗？但是，我想找到一种将文件复制到与源文件相同的目录的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:32:25.857

Windows Vista 及更高版本默认不允许非管理员用户写入 `%PROGRAMFILES% 文件夹。这意味着您不会被允许在那里复制文件。在进行查找/替换操作后，您也将无法保存它们。

如果这对您有用，您可以将它们写入您的用户文档文件夹 ( `%USERPROFILE%\Documents`) 文件夹。

# java - JInternalFrame 正在延迟加载？

> ID：14008926
> 
> 赞同：1
> 
> 时间：2012-12-23T05:46:55.917
> 
> 标签：java, swing, jtable, jinternalframe

我在 java swing 中创建了一个应用程序，在其中`JInternalFrame`单击`JFrame`. internalFrame 由具有 32 列的表组成，其中动态添加值。

问题是，当我们点击按钮时`JInternalFrame`，加载会有点延迟。代码中的循环是否会导致延迟

谁能告诉我一些解决方案以防止加载延迟...

```
public class AttendanceView extends javax.swing.JInternalFrame {
    private int count=0;
    String []columnNames={"<html><b>Name</b></html>","<html><b>1</b></html>","<html><b>2</b></html>",""
            + "<html><b>3</b></html>",""+ "<html><b>4</b></html>",""
            + "<html><b>5</b></html>",""+ "<html><b>6</b></html>",""
            + "<html><b>7</b></html>",""+ "<html><b>8</b></html>",""
            + "<html><b>9</b></html>",""+ "<html><b>10</b></html>",""
            + "<html><b>11</b></html>",""+ "<html><b>12</b></html>",""
            + "<html><b>13</b></html>",""+ "<html><b>14</b></html>",""
            + "<html><b>15</b></html>",""+ "<html><b>16</b></html>",""
            + "<html><b>17</b></html>",""+ "<html><b>18</b></html>",""
            + "<html><b>19</b></html>",""+ "<html><b>20</b></html>",""
            + "<html><b>21</b></html>",""+ "<html><b>22</b></html>",""
            + "<html><b>23</b></html>",""+ "<html><b>24</b></html>",""
            + "<html><b>25</b></html>",""+ "<html><b>26</b></html>",""
            + "<html><b>27</b></html>",""+ "<html><b>28</b></html>",""
            + "<html><b>29</b></html>",""+ "<html><b>30</b></html>",""
            + "<html><b>31</b></html>"};
    String dataValues[][];
    public AttendanceView() {
        initComponents();
        try
        {
         dataValues=new String[10][32];
         int i=0;
         for(i=0;i<5;i++)
         {
             for(int j=0;j<32;j++)
             {
                 if(j==0)
               dataValues[i][0]="Manu Suseelan";
                 else
                dataValues[i][j]="<html><body style='background:green;color:green'>&nbsp;&nbsp;|||&nbsp;&nbsp;</center></html>";
             }

         }
         } catch (Exception ex) {System.out.println("sql error:"+ex);
        }

        DefaultTableModel df = new DefaultTableModel();

        df.setDataVector(dataValues,columnNames);
        table.setModel(df);
        int index=0;
        while (index < 32) {
                    TableColumn a = table.getColumnModel().getColumn(index);
                    a.setPreferredWidth(100);
                    a.setResizable(false);
                    index++;
                }

        TableColumn a = table.getColumnModel().getColumn(0);
        a.setPreferredWidth(1000);

    } 
```

...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T07:05:33.833

性能没有问题，只有图片可以导致，将图像放入java包，代码示例（基于上一篇相关帖子@Andrew Thompson），如前所述，使用Renderer而不是Html格式，

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.border.EmptyBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;

public class TableWithHtml {

    private int count = 0;
    private String[] columnNames = {"<html><b>Name</b></html>", "<html><b>1</b></html>", "<html><b>2</b></html>", ""
        + "<html><b>3</b></html>", "" + "<html><b>4</b></html>", ""
        + "<html><b>5</b></html>", "" + "<html><b>6</b></html>", ""
        + "<html><b>7</b></html>", "" + "<html><b>8</b></html>", ""
        + "<html><b>9</b></html>", "" + "<html><b>10</b></html>", ""
        + "<html><b>11</b></html>", "" + "<html><b>12</b></html>", ""
        + "<html><b>13</b></html>", "" + "<html><b>14</b></html>", ""
        + "<html><b>15</b></html>", "" + "<html><b>16</b></html>", ""
        + "<html><b>17</b></html>", "" + "<html><b>18</b></html>", ""
        + "<html><b>19</b></html>", "" + "<html><b>20</b></html>", ""
        + "<html><b>21</b></html>", "" + "<html><b>22</b></html>", ""
        + "<html><b>23</b></html>", "" + "<html><b>24</b></html>", ""
        + "<html><b>25</b></html>", "" + "<html><b>26</b></html>", ""
        + "<html><b>27</b></html>", "" + "<html><b>28</b></html>", ""
        + "<html><b>29</b></html>", "" + "<html><b>30</b></html>", ""
        + "<html><b>31</b></html>"};
    private String dataValues[][];

    public TableWithHtml() {
        JPanel gui = new JPanel(new BorderLayout());
        gui.setBorder(new EmptyBorder(2, 3, 2, 3));
        JDesktopPane dtp = new JDesktopPane();
        gui.add(dtp);
        ActionListener listener = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                Component c = (Component) e.getSource();
                JOptionPane.showInternalMessageDialog(c, "Message");
            }
        };
        for (int ii = 0; ii < 13; ii++) {
            try {
                dataValues = new String[10][32];
                int i = 0;
                for (i = 0; i < 5; i++) {
                    for (int j = 0; j < 32; j++) {
                        if (j == 0) {
                            dataValues[i][0] = "Manu Suseelan";
                        } else {
                            dataValues[i][j] = "<html><body style='background:green;color:green'>&nbsp;&nbsp;|||&nbsp;&nbsp;</center></html>";
                        }
                    }
                }
            } catch (Exception ex) {
                System.out.println("sql error:" + ex);
            }
            DefaultTableModel df = new DefaultTableModel();
            df.setDataVector(dataValues, columnNames);
            JTable table = new JTable();
            table.setModel(df);
            int index = 0;
            while (index < 32) {
                TableColumn a = table.getColumnModel().getColumn(index);
                a.setPreferredWidth(100);
                a.setResizable(false);
                index++;
            }
            JInternalFrame jif = new JInternalFrame();
            dtp.add(jif);
            jif.setResizable(true);
            jif.setLocation(new Point(ii * 30, ii * 20));
            jif.setSize(600, 150);
            jif.setVisible(true);
            JButton b = new JButton("Click me!");
            b.addActionListener(listener);
            jif.add(table, BorderLayout.CENTER);
            jif.add(b, BorderLayout.SOUTH);
        }
        gui.setPreferredSize(new Dimension(1000, 600));
        gui.setBackground(Color.WHITE);
        JFrame f = new JFrame("Demo");
        f.add(gui);
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        f.setLocationByPlatform(true);
        f.pack();
        f.setVisible(true);
    }

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                TableWithHtml tableWithHtml = new TableWithHtml();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

# macos - 在 Mac 上将目录添加到 PATH

> ID：14008931
> 
> 赞同：0
> 
> 时间：2012-12-23T05:47:59.647
> 
> 标签：macos, .bash-profile

我正在尝试将目录添加到我的路径中，但遇到了麻烦。我有一个`Macbook Pro`正在运行的`Mac OS X Lion 10.7.5`. 为了进行更改，我使用了以下命令：

```
open ~/.bash_profile 
```

它打开了配置文件，它看起来像这样：

```
export PATH=${PATH}:/Users/Banderson/android-sdks/tools 
export PATH=${PATH}:/Users/Banderson/android-sdks/platform-tools 
#
# Your previous /Users/Banderson/.bash_profile file was backed up as /Users/Banderson/.bash_profile.macports-saved_2012-05-16_at_09:53:57
##

# MacPorts Installer addition on 2012-05-16_at_09:53:57: adding an appropriate PATH variable for use with MacPorts.
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*

# Setting PATH for JRuby 1.7.0.RC1
# The orginal version is saved in .bash_profile.jrubysave
PATH="${PATH}:/Library/Frameworks/JRuby.framework/Versions/Current/bin"
export PATH 
```

然后我添加了这个：

```
 export PATH=${PATH}:/Users/Banderson/Documents/awstats-7.1/wwwroot/cgi-bin/ 
```

使`.bash_profile`看起来像这样：

```
export PATH=${PATH}:/Users/Banderson/android-sdks/tools 
export PATH=${PATH}:/Users/Banderson/android-sdks/platform-tools 
export PATH=${PATH}:/Users/Banderson/Documents/awstats-7.1/wwwroot/cgi-bin/
#
# Your previous /Users/Banderson/.bash_profile file was backed up as /Users/Banderson/.bash_profile.macports-saved_2012-05-16_at_09:53:57
##

# MacPorts Installer addition on 2012-05-16_at_09:53:57: adding an appropriate PATH variable for use with MacPorts.
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*

# Setting PATH for JRuby 1.7.0.RC1
# The orginal version is saved in .bash_profile.jrubysave
PATH="${PATH}:/Library/Frameworks/JRuby.framework/Versions/Current/bin"
export PATH 
```

添加之后，我保存它，然后在终端中，我执行`source ~/.bash_profile`命令，退出终端窗口，启动一个新窗口，并尝试从我添加到路径的目录中启动一个文件，但它没有工作. 有人可以告诉我我做错了什么以及如何解决吗？

编辑：

这是`echo $PATH`返回的内容：

```
/Users/Banderson/.rvm/gems/jruby-1.6.8/bin:/Users/Banderson/.rvm/gems/jruby-1.6.8@global/bin:/Users/Banderson/.rvm/rubies/jruby-1.6.8/bin:/Users/Banderson/.rvm/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/Banderson/android-sdks/tools:/Users/Banderson/android-sdks/platform-tools:/Users/Banderson/Documents/awstats-7.1/wwwroot/cgi-bin/:/Library/Frameworks/JRuby.framework/Versions/Current/bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T07:39:16.170

您的问题似乎是包含 rvm 脚本。我猜，你的路径被覆盖了。

# python - 由于查询字符串，无法从网页检索代码？

> ID：14008934
> 
> 赞同：0
> 
> 时间：2012-12-23T05:48:27.683
> 
> 标签：python, string, scrape

我正在尝试编写一个 Python 脚本来从其内容取决于查询字符串的网页中检索源代码。具体页面为：[http](http://www.billboard.com/charts/hot-100#/charts/hot-100?begin=1&order=position) ://www.billboard.com/charts/hot-100#/charts/hot-100?begin=1&order=position 。这是 Billboard Hot 100 页面，它以 10 页、10 首歌曲为一组显示 Hot 100。您控制通过“begin”查询字符串项检索的图表位置，并返回包括“begin”编号在内的10首歌曲。基本上，我想使用 Windows Scheduler 自动运行每周检索 10 页的脚本。我不喜欢用 Python 来做这件事。

我使用了以下脚本，它检索看似第一页的内容（位置 1 - 10）。

```
import urllib
urllib.urlretrieve("http://www.billboard.com/charts/hot-100#/charts/hot-100?begin=1&order=position",r'C:\g\filename.txt') 
```

但是，当我将“开始”值更改为 11 时，它仍然检索 1 - 10。也许网页以某种方式不允许脚本执行这样的操作？如果我输入没有查询字符串的 URL，它也会返回前 10 个位置，所以我认为一种可能性是根本没有考虑查询字符串，这可能表明需要一种不同的方法。

您能提供的任何帮助将不胜感激！

谢谢！（节日快乐！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:06:24.387

您的代码运行良好。

当在浏览器中给出URL [http://www.billboard.com/charts/hot-100#/charts/hot-100?begin=11&order=position](http://www.billboard.com/charts/hot-100#/charts/hot-100?begin=11&order=position)时，您将获得相同的 HTML 数据。

这意味着，从 11 到 20 检索条目的代码是异步请求，如 AJAX。

试试这个代码，它似乎工作：

```
import urllib
urllib.urlretrieve("http://www.billboard.com/charts/hot-100?begin=11&order=position",r'C:\g\filename.txt') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:56:43.263

仔细查看那个 URL，你会注意到它的一半实际上是片段的一部分（甚至没有正常发送到服务器）。他们可能正在使用 AJAX 来解析并显示相关数据。

这似乎按预期工作： http: [//www.billboard.com/charts/hot-100?begin=21&order=position](http://www.billboard.com/charts/hot-100?begin=21&order=position)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T05:51:25.357

您是否尝试过`http://www.billboard.com/charts/hot-100#/charts/hot-100?begin=11&order=position`在浏览器中访问？你也会得到结果`1-10`。看起来很可能`begin`必须是形式`10n + 1`。

# android - android中的登录活动

> ID：14008938
> 
> 赞同：0
> 
> 时间：2012-12-23T05:50:23.363
> 
> 标签：android, login, android-activity

我正在尝试在 android 中创建一个登录页面，并且我已经检查了下面的链接以获取[示例](http://vimaltuts.com/training/android-tutorial-for-beginners)

但不幸的是，当我按下登录按钮时，我会收到一个意外的异常，我的应用程序将停止！

[在这里，我已经粘贴了我的 logcat](http://pastebin.com/EsYA5nGt)

！您能帮我做什么或指导我创建一个简单的登录页面来检查密码的有效性吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:54:17.220

就像日志说的

> 找不到显式活动类 {com.example.loginsystemv1/com.example.loginsystemv1.WelcomePage}；您是否在 AndroidManifest.xml 中声明了此活动？

您在单击按钮时启动的活动尚未在清单文件中声明

# eclipse - 从 Eclipse 插件中具有焦点的任何 SourceViewer 进行 Ctrl-C 复制

> ID：14008942
> 
> 赞同：0
> 
> 时间：2012-12-23T05:51:40.630
> 
> 标签：eclipse, eclipse-plugin, pydev

我成功地在 Eclipse 中扩展了 PyDev 编辑器，带有[并排显示](https://stackoverflow.com/q/11402278/4794)，但我无法复制我添加的额外 SourceViewer 的内容。我可以在显示中选择一些文本，但是当我按下`Ctrl`+时`C`，它总是复制主 PyDev 编辑器的选定文本。

我在 Eclipse 编辑器中找到了一篇关于[键绑定](http://greensopinion.blogspot.ca/2009/10/key-bindings-in-eclipse-editors.html)的文章，但那里的代码似乎不完整且有点过时。如何将复制命令配置为从具有焦点的 SourceViewer 复制？

我想这样做的原因是我已经编写了一个用于[在 Python 中进行实时编码](http://donkirkby.github.com/live-py-plugin/)的工具，如果用户可以复制显示并将其粘贴到错误描述中，那么用户提交错误报告会容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:51:40.630

[David Green 的文章](http://greensopinion.blogspot.ca/2009/10/key-bindings-in-eclipse-editors.html)是一个良好的开端，但需要进行一些挖掘才能使其全部发挥作用。我在 GitHub 上发布了一个完整的[示例项目](https://github.com/donkirkby/side-py-side)，我将在这里发布几个片段。

该类`TextViewerSupport`为您要委托给额外文本查看器的每个命令连接一个新的操作处理程序。如果您有多个文本查看器，只需`TextViewerSupport`为每个查看器实例化一个对象。它将其构造函数中的所有内容连接起来。

```
public TextViewerSupport(TextViewer textViewer) {
    this.textViewer = textViewer;
    StyledText textWidget = textViewer.getTextWidget();
    textWidget.addFocusListener(this);
    textWidget.addDisposeListener(this);

    IWorkbenchWindow window = PlatformUI.getWorkbench()
            .getActiveWorkbenchWindow();
    handlerService = (IHandlerService) window
            .getService(IHandlerService.class);

    if (textViewer.getTextWidget().isFocusControl()) {
        activateContext();
    }
} 
```

该`activateContext()`方法有一个您要委托的所有命令的列表，并为每个命令注册一个新的处理程序。这是大卫文章的变化之一；his`ITextEditorActionDefinitionIds`已被弃用并替换为`IWorkbenchCommandConstants`.

```
protected void activateContext() {
    if (handlerActivations.isEmpty()) {
        activateHandler(ITextOperationTarget.COPY,
                IWorkbenchCommandConstants.EDIT_COPY);
    }
}

// Add a single handler.
protected void activateHandler(int operation, String actionDefinitionId) {
    StyledText textWidget = textViewer.getTextWidget();
    IHandler actionHandler = createActionHandler(operation,
            actionDefinitionId);
    IHandlerActivation handlerActivation = handlerService.activateHandler(
            actionDefinitionId, actionHandler,
            new ActiveFocusControlExpression(textWidget));

    handlerActivations.add(handlerActivation);
}

// Create a handler that delegates to the text viewer.
private IHandler createActionHandler(final int operation,
        String actionDefinitionId) {
    Action action = new Action() {
        @Override
        public void run() {
            if (textViewer.canDoOperation(operation)) {
                textViewer.doOperation(operation);
            }
        }
    };
    action.setActionDefinitionId(actionDefinitionId);
    return new ActionHandler(action);
} 
```

为[`ActiveFocusControlExpression`](https://github.com/donkirkby/side-py-side/blob/master/src/com/github/donkirkby/sidepyside/ActiveFocusControlExpression.java)新处理程序提供了足够高的优先级，它将取代标准处理程序，并且几乎与 David 的版本相同。但是，为了编译它，我必须在我的插件清单中添加额外的依赖项：我导入了包`org.eclipse.core.expressions`和`org.eclipse.ui.texteditor`.

# cocos2d-iphone - Cocos2d CCTouchBegan

> ID：14008949
> 
> 赞同：1
> 
> 时间：2012-12-23T05:52:26.773
> 
> 标签：cocos2d-iphone, touch

我正在尝试创建一个程序，当用户触摸屏幕时，会出现一个精灵。但是，如果用户将手指放在该 Sprite 上，则该 sprite 会变大，直到用户放开它。

现在，我在 Cocos2d 1.x 中创建了这个程序，它运行良好。然而，当我在 2.x 中尝试它时，精灵被创建了，但它并没有帮助精灵成长。代码如下：

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{

CGPoint touchLocation = [self convertTouchToNodeSpace:touch];

redBall = [CCSprite spriteWithFile:@"Circle.png"];
redBall.position = ccp(touchLocation.x, touchLocation.y);
redBallRect = CGRectMake(redBall.anchorPoint.x, redBall.anchorPoint.y, redBall.contentSize.width, redBall.contentSize.height);

[self addChild:redBall];

if (CGRectContainsPoint(redBallRect, touchLocation )) {
    NSLog(@"Hello");
    growForever = [CCRepeatForever actionWithAction: [CCScaleBy actionWithDuration: .5 scale: 1.2]];
    [growForever setTag:1];
    [redBall runAction:growForever];

}

return YES;

} 
```

可能是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T07:31:01.820

确保您启用了触摸：

```
-(void)onEnter
{
    [super onEnter];

      self.touchEnabled = YES;
} 
```

使用 boundingBox 获取矩形。

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint touchLocation = [myTouch locationInView:[myTouch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];

    if(CGRectContainsPoint([redBall boundingBox], touchLocation))
    {
        NSLog(@"Hello");
        growForever = [CCRepeatForever actionWithAction: [CCScaleBy actionWithDuration: .5 scale: 1.2]];
        [growForever setTag:1];
        [redBall runAction:growForever];

    }

} 
```

# windows-phone - WebBrowser 控件未显示本地 HTML 文件的最后 2 行

> ID：14008950
> 
> 赞同：1
> 
> 时间：2012-12-23T05:52:32.380
> 
> 标签：windows-phone, windows-phone-8

我有一个加载了本地 HTML 文件的 WebBrowser 控件，如下所示：

```
var rs = Application.GetResourceStream(new Uri("View/Help.html", UriKind.Relative));
StreamReader reader = new StreamReader(rs.Stream);
browser.NavigateToString(reader.ReadToEnd());
reader.Close(); 
```

它显示正常，除了最后两行被裁剪掉。就像 WebBrowser 的视口不够大（我可以拉起并看到最后两行，但是当我放手时它会弹回下来）。HTML 文件相当长，大概需要 5 个屏幕。

页面的 XAML 超级简单，整个页面都是 WebBrowser 控件：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <phone:WebBrowser x:Name="browser" Width="480" Height="800" IsScriptEnabled="True"/>
</Grid> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:09:06.720

If you've got the `ApplicationBar` visible then you'll need to reduce the size of your `WebBrowser` otherwise you'll be displaying content underneath the app bar.

# vb6 - MSFlexGrid 编辑 VB6

> ID：14008953
> 
> 赞同：4
> 
> 时间：2012-12-23T05:52:59.910
> 
> 标签：vb6, msflexgrid

目前我正在开发 vb6 应用程序。我想在 MSFlexgrid 中显示数据但是 MSFlexgrid 控件中没有编辑工具。

有没有办法编辑 MSFlexgrid？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T06:14:16.473

有一种使用隐藏文本框的方法。在单元格上双击文本框将可见并且可以编辑这里是代码片段检查它

```
Private Sub Form_Load()

   'Setting Col And row

    MSFlexGrid1.Cols = 3
    MSFlexGrid1.Rows = 10
    'First row
    MSFlexGrid1.TextMatrix(0, 0) = "ID"
    MSFlexGrid1.TextMatrix(0, 1) = "Date"
    MSFlexGrid1.TextMatrix(0, 2) = "Voucher Type"
    'some data
    MSFlexGrid1.TextMatrix(1, 0) = "E0000001"
    MSFlexGrid1.TextMatrix(2, 0) = "E0000001"
    MSFlexGrid1.TextMatrix(1, 1) = "01/04/10"
    MSFlexGrid1.TextMatrix(2, 1) = "01/04/10"    
    MSFlexGrid1.TextMatrix(1, 2) = "Jrnl"
    MSFlexGrid1.TextMatrix(2, 2) = "Jrnl"
End Sub

Private Sub MSFlexGrid1_DblClick()

    'If MSFlexGrid1.Col = 3 Or MSFlexGrid1.Col = 6 Or MSFlexGrid1.Col = 7 Then
        GridEdit Asc(" ")
    'End If
End Sub

Private Sub MSFlexGrid1_KeyPress(KeyAscii As Integer)

        GridEdit KeyAscii

End Sub

Sub GridEdit(KeyAscii As Integer)

  'use correct font  
  Text1.FontName = MSFlexGrid1.FontName
  Text1.FontSize = MSFlexGrid1.FontSize

  Select Case KeyAscii

     Case 0 To Asc(" ")
        Text1 = MSFlexGrid1
        Text1.text = Trim(Text1.text)
        Text1.SelStart = 1000

     Case Else
         Text1 = MSFlexGrid1
         Text1.text = Trim(Text1.text)
        Text1.SelStart = 1000

 End Select

  'position the edit box

  Text1.Left = MSFlexGrid1.CellLeft + MSFlexGrid1.Left

  Text1.Top = MSFlexGrid1.CellTop + MSFlexGrid1.Top

  Text1.Width = MSFlexGrid1.CellWidth

  Text1.Height = MSFlexGrid1.CellHeight

  Text1.Visible = True

  Text1.SetFocus

End Sub

Private Sub MSFlexGrid1_LeaveCell()

  If Text1.Visible Then

    If MSFlexGrid1.Col = 6 Or MSFlexGrid1.Col = 7 Then
        If Text1.text = "" Then
            Text1.text = " "
        End If
    End If
     MSFlexGrid1 = Text1
     Text1.Visible = False

  End If

End Sub

Private Sub MSFlexGrid1_GotFocus()

  If Text1.Visible Then

    If MSFlexGrid1.Col = 6 Or MSFlexGrid1.Col = 7 Then

        If Text1.text = "" Then
            Text1.text = " "
        End If

    End If

     MSFlexGrid1 = Text1.text
     Text1.Visible = False

  End If

End Sub

Private Sub Text1_KeyPress(KeyAscii As Integer)

  'noise suppression

  If MSFlexGrid1.Col <> 6 And MSFlexGrid1.Col <> 7 Then

    KeyAscii = 0

  End If

  If KeyAscii = vbKeyReturn Then

    KeyAscii = 0

  End If

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T09:16:27.450

你也可以试试下面的代码。这不需要文本框。

```
'Put this code in MSFlexGrid Keypress Event

'===================================================
Private Sub MSFlexGrid_KeyPress(KeyAscii As Integer)
With MSFlexGrid
    Select Case KeyAscii

        Case 8: 'IF KEY IS BACKSPACE THEN
            If .Text <> "" Then .Text = _
             Left$(.Text, (Len(.Text) - 1))
        Case 13: 'IF KEY IS ENTER THEN
            Select Case .Col
                Case Is < (.Cols - 1):
                    SendKeys "{right}"
                Case (.Cols - 1):
                    If (.Row + 1) = .Rows Then
                        .Rows = .Rows + 1
                    End If
                    SendKeys "{home}" + "{down}"
            End Select
        Case Else
            .Text = .Text + Chr$(KeyAscii)
            'write your own keyascii Validations under 
                   'commented lines
            Select Case .Col
                Case 0, 1, 2:
                    'if (your condition(s)) then
                        'accept only charectors
                    'Else
                    '   keyascii=0
                    'End If
                Case Else:
            End Select
    End Select
End With

End Sub 
```

# php - 搜索 PHP 代码并创建必要的 MySQL 表和列的方法

> ID：14008958
> 
> 赞同：0
> 
> 时间：2012-12-23T05:53:32.077
> 
> 标签：php, mysql

我知道这对你们大多数人来说可能有点愚蠢，但这对我来说真的很重要。我从一个不再有时间做这个项目的人那里收到了大量的 PHP 文件。他为网站完成了所有的 PHP 编码，我想知道是否有任何方法可以为网站创建正确的表格以使其正常运行。他有这样的东西：

```
$dirQuery = "SELECT s.sID, s.name, s.rank, s.branch, n.posName 
             FROM soldier s, billet b, noc n 
             WHERE s.sID = n.sID AND n.posName = b.director AND b.id = $billet"; 
```

和其他类似的，你可以看到有多个表和列。无论如何要通过整个编码并找出我需要创建哪些表，哪些列等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:36:47.913

如果表的数量相对较少，并且在表丢失时代码失败并出现明显错误，您可以运行代码，读取错误并一一创建表！如果表的数量很少，那么与提出自动化解决方案（需要 SQL 检测器 + 解析器 + 额外的逻辑来实际创建表和列）相比，您将花费更少的时间来做这件事。

# c++ - C中的SQL语句在查询中使用变量

> ID：14008968
> 
> 赞同：0
> 
> 时间：2012-12-23T05:54:53.747
> 
> 标签：c++, sql, visual-studio, visual-c++

我正在构建一个访问 SQL 数据库的 C++ 程序。我能够连接并返回以下语句的值：

```
retcode = SQLExecDirect(hstmt, (SQLWCHAR*)L"SELECT Beta FROM Equity WHERE Ticker = 'AAPL'", SQL_NTS); 
```

但是，我希望能够用字符串 'ticker' 替换 'AAPL'，它可以使用 cin>> 定义。

有没有办法做到这一点？

感谢您的帮助，整个代码如下：

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>
#include <sql.h>
#include <sqltypes.h>
#include <sqlext.h>
#include <string>

using namespace std;

int main(){
    SQLHENV henv;
    SQLHDBC hdbc;
    SQLHSTMT hstmt;
    SQLRETURN retcode;

    SQLWCHAR OutConnStr[255];
    SQLSMALLINT OutConnStrLen;

    // Allocate environment handle
    retcode = SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &henv);

    // Set the ODBC version environment attribute
    if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {
        retcode = SQLSetEnvAttr(henv, SQL_ATTR_ODBC_VERSION, (void*)SQL_OV_ODBC3, 0); 

        // Allocate connection handle
        if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {
            retcode = SQLAllocHandle(SQL_HANDLE_DBC, henv, &hdbc); 

             // Set login timeout to 5 seconds
            if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {
                SQLSetConnectAttr(hdbc, SQL_LOGIN_TIMEOUT, (SQLPOINTER)5, 0);

                // Connect to data source
                retcode = SQLDriverConnect(
                    hdbc, 
                    0,
                    (SQLWCHAR*)L"DSN=Phoenix;SERVER=XXX;UID=XXX;PWD=XXX;DRIVER=MySQL Server;", 
                    _countof(L"DSN=Phoenix;SERVER=XXX;UID=XXX;PWD=XXX;DRIVER=MySQL Server;"),
                    OutConnStr,
                    255, 
                    &OutConnStrLen,
                    SQL_DRIVER_COMPLETE );

                // Allocate statement handle
                if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {
                    retcode = SQLAllocHandle(SQL_HANDLE_STMT, hdbc, &hstmt); 

                    // Process data
                    string  ticker;
                    cout << " Enter Ticker:     "; //Prompt Ticker
                    cin >> ticker;      //Stores Ticker
                    //retcode = SQLExecDirect(hstmt, (SQLWCHAR*)L"SELECT Beta FROM Equity WHERE Ticker = 'AAPL'", SQL_NTS);
                    retcode = SQLExecDirect(hstmt, (SQLWCHAR*)L"SELECT Beta FROM Equity WHERE Ticker = ticker", SQL_NTS);

                    if (retcode == SQL_SUCCESS) {
                        SQLINTEGER cbTestStr, iCount = 1;
                        SQLFLOAT dTestFloat;
                        SQLCHAR beta[200];
                        while (TRUE) {
                            retcode = SQLFetch(hstmt);
                            if (retcode == SQL_ERROR || retcode == SQL_SUCCESS_WITH_INFO) {
                                cout<<"An error occurred";
                            }
                            if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO){

                                SQLGetData(hstmt, 1, SQL_C_CHAR, beta, 200, &cbTestStr);

                                /* Print the row of data */
                                cout<<"Beta for "<< ticker << " = " << beta <<endl;
                                double bi;
                                cin >> bi;

                            } else {
                                break;
                            }
                        }
                    }else{
                        cout<<"Query execution error."<<endl;
                    }

                    SQLFreeHandle(SQL_HANDLE_STMT, hstmt);
                    SQLDisconnect(hdbc);
                }else{ 
                    cout<<"Connection error"<<endl;
                }
                SQLFreeHandle(SQL_HANDLE_DBC, hdbc);
            }
        }
        SQLFreeHandle(SQL_HANDLE_ENV, henv);
    }

        system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T01:41:26.547

你有没有在你的 cin >> 股票代码之后尝试过类似的东西；线。

```
string sql;
sql = "SELECT Beta FROM Equity WHERE Ticker='";
strcat (sql,ticker);
strcat (sql, "'"); 
```

然后使用 SQLExecDirect 行中的 sql 字符串将语句文本替换为 sql。

抱歉，我的 c 语法生锈了。关键是检索代码值并将其连接到 sql 字符串，同时用单引号将输入（代码）括起来。然后将其用作您的执行语句。

希望它有效。

# c - fread 在套接字上停止，但 fget 没有？

> ID：14008977
> 
> 赞同：5
> 
> 时间：2012-12-23T05:56:47.487
> 
> 标签：c, sockets, proxy

我正在使用 c 中的代理服务器。我已经在不同的地方使用 fread 和 fgets 的组合，但我想调和并理解其中的区别。在以下示例中，我尝试在之前成功使用 fget 的地方使用 fread。相反，我的服务器现在挂在 fread 线上。有什么区别，为什么我的程序挂起？

```
void HandleTCPClient(int clntSocket)
{
    FILE *request = fdopen(clntSocket, "r");
    char reader[2000];
    size_t q; //typo before
    while((q=fread(reader, 1, sizeof(reader), request))>0) {  //hangs here!
        printf("i read something!\n");
    }
    return;
} 
```

谢谢！！

编辑：所以，如果我将这一行设为“while((q=fread(reader, 1, 1, request))>0) {”

我的屏幕上到处都是“我读了一些东西”...

不知道这意味着什么。如果流中至少没有缓冲区大小的字符数，那么 fread 实际上什么都不做是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T06:01:47.973

`fgets`当读取换行符时返回，而`fread`将阻塞，直到流中或 EOF 上请求的字节数可用。在您的情况下，调用阻塞是因为您没有在流中准备好 2000 字节的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:05:09.267

使用`fread()`而不是`recv()`读取 TCP 套接字对我来说似乎很奇怪..？

反正`fread`就是阻塞，只要没有什么可读的。您应该始终检查套接字是否已准备好执行读取或写入，`select()`例如在 linux 上使用。

# iphone - 如何在流式传输视频时存储视频？

> ID：14008981
> 
> 赞同：1
> 
> 时间：2012-12-23T05:58:06.030
> 
> 标签：iphone, objective-c, ios, streaming

> **可能重复：**
> [iOS 视频流式传输并随后存储在设备上](https://stackoverflow.com/questions/6290251/ios-video-streaming-and-storing-on-device-afterwards)

我发现同样的问题没有答案。

[之后 iOS 视频流式传输和存储在设备上](https://stackoverflow.com/questions/6290251/ios-video-streaming-and-storing-on-device-afterwards)

1.  将从服务器下载视频。
2.  下载时，我想流式传输。

可能吗？

# android - SMS 发送/传递的广播接收器

> ID：14008991
> 
> 赞同：2
> 
> 时间：2012-12-23T05:58:59.803
> 
> 标签：android, android-intent, sms, broadcastreceiver

> **可能重复：**
> [已发送 SMS 的广播接收器](https://stackoverflow.com/questions/7571026/broadcast-receiver-for-sent-sms)

我目前正在检测何时通过广播接收器接收到 SMS，如下所示：

```
<receiver android:name=".gathering.SMSNode">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

是否有类似的广播接收器用于检测何时发送消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T06:11:10.607

```
ContentResolver contentResolver = getContentResolver();
Handler handler = new Handler();
m_SMSObserver = new SMSObserver(handler);
contentResolver.registerContentObserver(Uri.parse("content://sms"),
true, m_SMSObserver); 
```

这段代码用于分离发送/接收事件

```
Uri uriSMSURI = Uri.parse("content://sms");
Cursor cur = this.getContentResolver().query(uriSMSURI, null, null,
null, null);
cur.moveToNext();
String protocol = cur.getString(cur.getColumnIndex("protocol"));
if(protocol == null)
        onSMSSend();            
else
        onSMSReceive(); 
```

检查以下网址以供参考：

[http://www.mail-archive.com/android-developers@googlegroups.com/msg27154.html](http://www.mail-archive.com/android-developers@googlegroups.com/msg27154.html)