# StackOverflow 问答 13733000-13733999

# android - 如何在没有 Eclipse 的情况下使用 PhoneGap Barcode Scanner 插件？

> ID：13733008
> 
> 赞同：0
> 
> 时间：2012-12-05T21:42:34.590
> 
> 标签：android, cordova, phonegap-plugins, zxing

插件官方自述文件：[https ://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner#readme](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner#readme)

解释了如何使用 eclipse 使用 BarcodeScanner 插件。

我目前在不使用 Eclipse 的情况下进行开发，如何将库集成到我的项目中？

如果不复制 Eclipse 库集成步骤，我的项目将无法构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:30:01.870

android工具中有一个命令行：

```
android update project --target <target_ID> --path path/to/your/project --library path/to/library_project 
```

您必须设置相对于您的项目的库路径。我只是将库放在与我的项目相同的工作区中。

更多信息：

[https://github.com/phonegap/phonegap-plugins/pull/893](https://github.com/phonegap/phonegap-plugins/pull/893)

[http://developer.android.com/tools/projects/projects-cmdline.html#ReferenceLibraryProject](http://developer.android.com/tools/projects/projects-cmdline.html#ReferencingLibraryProject)

如果您的项目中有子项目，您可以在命令行末尾使用 -s 参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T16:07:16.853

如果这对任何人都有帮助： [https ://github.com/zeroasterisk/PhoneGap-BarcodeScanner-Example-iOS](https://github.com/zeroasterisk/PhoneGap-BarcodeScanner-Example-iOS)

具体来说：

安装了插件（在少数几个路径中），但保留了一个有效的。实现了一个基本的 JS 扫描器代码来演示功能：加载时自动运行，错误时自动重新加载，成功/失败/取消警报。

注意：barcodescanner.js 和 index.js 上的注释都提到了我对定义/要求对象路径的自定义。经过几次排列后，我无法让演示/示例路径正常工作。

（这是仅限 iOS 的 atm，但我也计划制作一个 Android 示例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:42:47.373

你也可以试试这个插件，看看它是否有效：[http ://www.scandit.com/support/getting-started-with-the-scandit-phonegap-plugin-for-android/](http://www.scandit.com/support/getting-started-with-the-scandit-phonegap-plugin-for-android/)

# matrix - 转换 2D 图像以模拟 3D 平面上的 3D 投影

> ID：13733011
> 
> 赞同：4
> 
> 时间：2012-12-05T21:42:40.410
> 
> 标签：matrix, 3d, svg, linear-algebra, projection

根据 SVG 规范，您可以将任意 2x3 转换矩阵应用于任何元素。

[http://www.w3.org/TR/SVG/coords.html#TransformAttribute](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)

我想利用这种方法将 3D 前瞻性投影应用于 SVG 中的图像，以模拟平面图像的 3D 投影。

我在javascript中使用矩阵计算将3D模型空间坐标（x，y，z）的变换和投影应用到2D图像空间坐标（x'，y'）。但是为了将投影应用于 SVG 中的图像或文本，我需要将 3D 矩阵向下投影到 2D 变换矩阵。

假设图像位于 3D 模型空间中的任意平面上，图像原点定义为平面上的 3D 点，**如何将 3D 投影矩阵转换为 SVG 中图像的 2D 变换**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:38:57.597

使用 2x3 变换进行 3D 透视投影在数学上是不可能的。这就是所谓的非仿射变换。有更多关于这里的信息：[http ://www.oreillynet.com/xml/blog/2006/09/wherefore_art_thou_svg.html](http://www.oreillynet.com/xml/blog/2006/09/wherefore_art_thou_svg.html)

当然，您可以使用 javascript 对原始数据进行此类转换并将结果显示为 SVG 图像，但您只能使用 SVG 来显示结果图形 - 您不能从 SVG 图像开始。

# c# - C# 使用 listcollection 成员对对象进行排序

> ID：13733012
> 
> 赞同：-1
> 
> 时间：2012-12-05T21:42:52.030
> 
> 标签：c#

我有一个 MVC Web 应用程序，用户在其中上传一个文本文件，然后我将其解析出来。

要求刚刚改变，他们现在将上传多个相同类型的文件。我通过将文件路径发送到下面的方法 ReadParts 来解析单个文件，该方法打开一个流并调用方法 parseReplicateBlock 来检索所需的字段。对于多个文件，我可以将所有文件读入一个大流，但我担心它可能会超过缓冲区限制等。

所以我正在考虑逐个文件解析并将结果填充到一个对象中。那么我的要求是根据日期字段对记录进行排序。

在如何以更好的方式编写此方法 ReadLogFile 时，我只需要一些帮助，尤其是用于基于 initialtionDate 和initialtionTime 的排序。我想根据initialDate和Time找到最小记录，然后做一些其他的逻辑。

问题是如果我对对象内的列表成员进行排序，我会丢失其他记录的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:02:47.593

您似乎将记录的每个字段存储在一个单独的集合中`LogFile`。这似乎是一种非常奇怪的存储数据的方式。

如果您对这些集合之一进行排序，那么它当然将不再与其他字段有任何关系，因为它们是不相关的。如果您依赖于所有收集的统计信息（例如，如果某个已解析记录中缺少某个字段），那么也存在很大的错误区域

相反，您应该有一个代表 SINGLE 记录的类，然后`Logfile`拥有这些记录的 SINGLE 集合。例如：

```
public class ReplicateBlock
{
    public string   ReplicateId    { get; set; }
    public string   AssayNumber    { get; set; }
    public DateTime InitiationDate { get; set; }
    //etc
}

public class LogFile
{
    public List<ReplicateBlock> ReplicateBlocks = new List<ReplicateBlock>();
} 
```

我不得不说你的代码很难遵循。您所有的函数都是静态的这一事实使我认为您对面向对象编程并不是特别熟悉。我建议买一本关于这个主题的好书。

# mysql - 替换mysql中的最后一行文本

> ID：13733017
> 
> 赞同：1
> 
> 时间：2012-12-05T21:43:01.167
> 
> 标签：mysql, sql-update

我`TEXT`在 MySQL 表中有一个列。文本行附加到字段的末尾，带有`UPDATE`查询和`CONCAT`功能。每行都以`\r\n`.

```
single record field content:
---------------------------
line1
some other line
last line 
```

`UPDATE tbl SET field = CONCAT(field, 'last line\r\n')`

有时需要用不同的字符串替换最后一行。我如何使用 MySQL`UPDATE`查询和字符串函数来做到这一点？

## 编辑

为了使它更简单，我可以存储行数并在每次插入新行时递增它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:23:18.733

试试这个：

```
UPDATE tbl SET field = CONCAT(LEFT(field,CHAR_LENGTH(field)-1*CHAR_LENGTH(SUBSTRING_INDEX(field,'\r\n',-2))), 'new last line\r\n') 
```

# parameters - 骡云连接器中的可选参数

> ID：13733024
> 
> 赞同：1
> 
> 时间：2012-12-05T21:43:27.293
> 
> 标签：parameters, mule, optional

我想使用@Optional 和@Default 在我的自定义云连接器中构建一个处理器，如下所示：

```
@Processor
public void createTopic(String topicName, @Optional @Default("defaultSecurity") String security, @Optional @Default("defaultDialect") String dialect) throws Exception{

} 
```

但是我无法编译java，这不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:59:48.863

我在我的一个连接器中使用您的定义没有问题`@Processor`，所以您一定遗漏了一些东西：

*   您是否使用了正确的注释，即`org.mule.api.annotations.param.Optional`和`org.mule.api.annotations.param.Default`？
*   您在该方法上有适当的 JavaDoc 吗？
*   您是否有该方法的文档示例？

如果全部是，那么请指定您在运行时收到的错误`mvn generate-sources`。

# f# - 使用组合多个流的最简洁方法

> ID：13733029
> 
> 赞同：3
> 
> 时间：2012-12-05T21:43:47.543
> 
> 标签：f#, system.reactive

我正在寻找一种组合多个流的方法，在这个简单的示例中，我有 5 个，但我可以轻松拥有更多。我目前正在使用 VS 2010，但可能会移至 2012。因此，如果 F# 3.0 的任何功能有帮助，我愿意接受。

在这种情况下，计算构建器会有所帮助吗？

```
let ``open`` = groupedByDay |> Observable.bind(fun group -> group |> Observable.map     (fun bar -> bar.Open) |> Observable.FirstAsync)
let high = groupedByDay |> Observable.bind(fun group -> group |> Observable.map (fun bar -> bar.High) |> Observable.Max)
let low = groupedByDay |> Observable.bind(fun group -> group |> Observable.map (fun bar -> bar.Low) |> Observable.Min)
let close = groupedByDay |> Observable.bind(fun group -> group |> Observable.map (fun     bar -> bar.Close,bar.Time) |> Observable.LastAsync)
let volume = groupedByDay |> Observable.bind(fun group -> group |> Observable.map (fun bar -> bar.Volume) |> Observable.Sum)
let combined = ``open``.And(high).And(low).And(close).And(volume).Then(fun o h l (c,t) v -> {Open = o; High = h; Low = l; Close = c; Time = t; Volume = v;})
            |> Observable.atwhen
            |> Observable.perform(log "Grouped") |> Observable.subscribe(fun _ -> ()) 
```

# android - SQLite 子查询

> ID：13733030
> 
> 赞同：0
> 
> 时间：2012-12-05T21:43:59.697
> 
> 标签：android, sql, sqlite, subquery

我有一个带有返回多行的子查询的查询。

我有一个带有列表的表格和一个带有用户的表格。我在这两个表之间创建了一个多对多表，称为 list_user。

```
LIST
id INTEGER
list_name TEXT
list_description TEXT

USER
id INTEGER
user_name TEXT

LIST_USER
id INTEGER
list_id INTEGER
user_id INTEGER 
```

我的子查询查询

```
SELECT * FROM user WHERE id = (SELECT user_id FROM list_user WHERE list_id = 0); 
```

子查询有效（我在代码中使用它，所以 0 实际上是一个变量）并且它返回多行。但是上面的查询只返回一行，这很合乎逻辑；我检查 id 是否等于某个值，它只检查子查询的第一行。

如何更改我的语句，以便在上部查询中获得多行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:45:17.000

我对`=`SQLite 中的作品感到惊讶。它会在大多数数据库中返回错误。在任何情况下，您都需要以下`in`声明：

```
SELECT *
FROM list
WHERE id in (SELECT user_id FROM list_user WHERE list_id = 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:54:01.493

为了获得更好的性能，请使用以下查询：

```
SELECT LIST.ID,
       LIST.LIST_NAME,
       LIST.LIST_DESCRIPTION 
FROM   LIST,
       USER,
       LIST_USER
WHERE  LIST.ID = LIST_USER.USER_ID = USER.ID AND
       LIST.LIST_ID = 0 
```

# c# - 为任意图像实现可点击地图

> ID：13733031
> 
> 赞同：2
> 
> 时间：2012-12-05T21:44:04.563
> 
> 标签：c#, wpf, image, map, clickable

我有一个 C# WPF 应用程序，其中有几个可能的图像，其中一些图像中的形状不规则。单击图像中的不同形状时，我想生成不同的事件。

例如：如果图像是房子的前面，我会在点击门把手、门、窗户、屋顶等时产生不同的事件。

图像必须可调整大小。

我可以用网格和形状手动完成，但似乎应该有一种更优雅的方式。

我以为我看到了一种技术，您可以制作与原始图像类似的“阴影”图像，但每个可点击区域都填充了不同的颜色。（可点击区域的“颜色图”。）然后点击处理程序可以访问阴影图像的颜色并引发适当的事件。但是，我不知道如何隐藏显示图像“下方”的阴影图像，并且仍然让 click 事件处理程序拾取颜色。

我确信有一个很好的方法来处理这个问题，我只是通常不使用图像，所以我完全不知道它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:19:59.130

让漂亮的图像在 Z 顺序中高于“阴影图像”并设置 topImage.IsHitTestVisible = false; 怎么样？

这将导致点击绕过顶部的可见图像并直接进入底层阴影图像点击处理程序。

我在生产代码中使用的另一种技术是从 Image 派生一个新类并覆盖 HitTestCore 并自己测试像素值，如果它是某种颜色或不透明度，我返回一个不同的对象。这样我就控制了所有的动作。

# python - matlab中分位数的等效python命令

> ID：13733034
> 
> 赞同：5
> 
> 时间：2012-12-05T21:44:12.730
> 
> 标签：python, matlab, quantile

我正在尝试在 python 中复制一些 Matlab 代码。我找不到与 Matlab 函数完全等价的函数`quantile`。我发现最接近的是 python 的`mquantiles`.

Matlab 示例：

```
 quantile( [ 8.60789925e-05, 1.98989354e-05 , 1.68308882e-04, 1.69379370e-04],  0.8) 
```

...给出：`0.00016958`

python中的相同示例：

```
scipy.stats.mstats.mquantiles( [8.60789925e-05, 1.98989354e-05, 1.68308882e-04, 1.69379370e-04], 0.8) 
```

...给`0.00016912`

有谁知道如何精确复制 Matlab 的`quantile`功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T22:13:14.733

（在 More About => Algorithms 部分下）的[文档给出了使用的确切算法。`quantile`](http://www.mathworks.com/help/stats/quantile.html)这是一些 python 代码，它为平面数组的单个分位数执行此操作，使用[瓶颈](http://pypi.python.org/pypi/Bottleneck)进行部分排序：

```
import numpy as np
import botteleneck as bn

def quantile(a, prob):
    """
    Estimates the prob'th quantile of the values in a data array.

    Uses the algorithm of matlab's quantile(), namely:
        - Remove any nan values
        - Take the sorted data as the (.5/n), (1.5/n), ..., (1-.5/n) quantiles.
        - Use linear interpolation for values between (.5/n) and (1 - .5/n).
        - Use the minimum or maximum for quantiles outside that range.

    See also: scipy.stats.mstats.mquantiles
    """
    a = np.asanyarray(a)
    a = a[np.logical_not(np.isnan(a))].ravel()
    n = a.size

    if prob >= 1 - .5/n:
        return a.max()
    elif prob <= .5 / n:
        return a.min()

    # find the two bounds we're interpreting between:
    # that is, find i such that (i+.5) / n <= prob <= (i+1.5)/n
    t = n * prob - .5
    i = np.floor(t)

    # partial sort so that the ith element is at position i, with bigger ones
    # to the right and smaller to the left
    a = bn.partsort(a, i)

    if i == t: # did we luck out and get an integer index?
        return a[i]
    else:
        # we'll linearly interpolate between this and the next index
        smaller = a[i]
        larger = a[i+1:].min()
        if np.isinf(smaller):
            return smaller # avoid inf - inf
        return smaller + (larger - smaller) * (t - i) 
```

我只做了单分位数的一维案例，因为这就是我所需要的。如果您想要几个分位数，则可能值得进行完整排序；要按轴执行并且知道您没有任何 nan，您需要做的就是在排序中添加一个轴参数并将线性插值位矢量化。使用 nans 在每个轴上进行操作会有点棘手。

这段代码给出：

```
>>> quantile([ 8.60789925e-05, 1.98989354e-05 , 1.68308882e-04, 1.69379370e-04], 0.8)
0.00016905822360000001 
```

matlab代码给出了`0.00016905822359999999`；不同的是`3e-20`。（小于机器精度）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T17:47:41.363

您的输入向量只有 4 个值，这太少了，无法很好地近似底层分布的分位数。这种差异可能是 Matlab 和 SciPy 使用不同的启发式方法来计算欠采样分布的分位数的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-20T12:45:29.617

有点晚了，但是：

mquantiles 非常灵活。您只需要提供 alphap 和 betap 参数。在这里，由于 MATLAB 做了线性插值，所以需要将参数设置为 (0.5,0.5)。

```
In [9]: scipy.stats.mstats.mquantiles( [8.60789925e-05, 1.98989354e-05, 1.68308882e-04, 1.69379370e-04], 0.8, alphap=0.5, betap=0.5) 
```

编辑：MATLAB 说它进行线性插值，但它似乎通过分段线性插值计算分位数，这相当于**R**中的 Type 5 分位数和 scipy 中的 (0.5, 0.5) 。

# objective-c - 为 aurioTouch 示例程序添加延迟

> ID：13733039
> 
> 赞同：2
> 
> 时间：2012-12-05T21:44:29.177
> 
> 标签：objective-c, delay, core-audio

我对 Core Audio 很陌生，正在尝试理解和修改 Apple 的 aurioTouch 示例代码，以便将输出延迟约 70 毫秒。有人对我如何添加延迟有建议吗？

# debugging - 如何使用 FlashDevelop 调试 Flash IDE AIR 3.4 桌面应用程序？

> ID：13733043
> 
> 赞同：2
> 
> 时间：2012-12-05T21:44:56.427
> 
> 标签：debugging, air, flashdevelop, flash-cs6

从 FlashDevelop 调试一个普通的 Flash IDE 项目就像单击调试/播放按钮一样简单。

从 FlashDevelop 调试 AIR Flash IDE 项目不起作用。我可能需要更改哪些设置才能触发 Flash 公开 AIR 或 AIRI 文件并运行它并连接到它以进行调试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:36:51.597

我终于想通了。

诀窍是将 FlashDevelop 的项目属性 > 输出选项卡 > 测试项目设置设置为“运行自定义命令”。单击编辑并输入以下字符串：

```
$(FlexSDK)\bin\adl.exe;$(ProjectName)-app.xml $(ProjectName).app 
```

ADL.exe 是“AIR 调试启动器”。说得通。

为了使该命令正常工作并避免看到快速消失的命令窗口抱怨“找不到内容”，您的 Flash IDE AIR 项目必须实际创建“$(ProjectName)-app.xml”文件和“$(ProjectName) .app”文件夹，其中包含所有应用程序的文件。为此，您需要执行以下操作：

在 Flash 的“AIR 设置”中，我将“输出为”选项设置为“嵌入运行时的应用程序”。该选项实际上是禁用的，直到您转到签名选项卡，选择“使用代码签名证书”，然后单击“创建”以创建自签名证书。如果您不使用代码签名证书，那么您将无法调整“输出为”设置，因为您会遇到“准备稍后将被签名的 AIR 中间 (AIRI) 文件”选项. 所以只需签署应用程序，然后您可以选择输出作为选项，该选项将生成“$(ProjectName).app”文件夹。

耻辱，耻辱，耻辱，耻辱，耻辱，耻辱，耻辱，耻辱，耻辱 Adob​​e 未能按照 Flash 的简单单文件/随处运行的 SWF 格式对 AIR 进行建模，使其如此成功。相反，运行 AIR 应用程序是一个复杂的过程，涉及 AIRI、xml、exe 和 swf 文件、.app 文件夹、安装过程以及运行时权限问题。

# java - 程序运行时的进度条

> ID：13733046
> 
> 赞同：0
> 
> 时间：2012-12-05T21:45:14.177
> 
> 标签：java, swing, event-dispatch-thread, jprogressbar

我正在尝试添加到我的程序进度条，当它执行时。实际上我想添加如下内容：

```
public class TestProgressBar extends javax.swing.JFrame {
   public  TestProgressBar Bar;
    public TestProgressBar() {
        initComponents();
        Bar=this;
    }
public void start(){
      //progress bar action
            SwingUtilities.invokeLater(new Runnable() {
              public void run() { 
                for(int i=0;i<100;i++){                
                          jProgressBar1.setValue(jProgressBar1.getValue()+10);  
                    try {
                    Thread.currentThread().sleep(100);
                      } catch (InterruptedException ex) {
                          Logger.getLogger(TestProgressBar.class.getName()).log(Level.SEVERE, null, ex);
                      }
            }
              }
              });
        //program running
   while(true);
}
    public static void main(String args[]) {
     TestProgressBar t=new TestProgressBar();
     t.setSize(320, 320);
     t.pack();
     t.setVisible(true);
     t.start();
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JProgressBar jProgressBar1;
    // End of variables declaration                   
} 
```

但它不起作用
我找到了实现我想要做的代码的
[代码](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemoProject/src/components/ProgressBarDemo.java) 但是遇到了它很乱
所以问题是如何实现进度条，它的变化比程序正在工作？进度条值发生更改，但表单未显示这些更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:08:10.160

您正在调用`Thread.sleep(...)`使您的应用程序进入睡眠状态的 Swing 事件线程。也可以在`while (true)`事件线程上调用，但我对此不是 100% 确定的。

解决方案：不要踩到 Swing 事件线程（或 Event Dispatch Thread 或 EDT），而是为此使用后台线程。请阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)以了解如何使用 SwingWorker 来帮助您为此创建后台线程。

# php - 我将如何嵌套这个 MySQL 选择查询？

> ID：13733049
> 
> 赞同：0
> 
> 时间：2012-12-05T21:45:32.137
> 
> 标签：php, mysql, sql

我有一张包含用户付款详细信息的表格，还有一张包含用户列表的表格。我想从付款详细信息中获取所有用户的余额，但仅限于未被禁止的用户（这是 users 表中的一列）。

我对嵌套查询有些陌生，所以我不知道该怎么做？

这是我到目前为止所尝试的......

```
mysql_query("
    SELECT SUM(balance) 
    FROM payment_details 
    WHERE (SELECT ban 
           FROM users 
           WHERE username=username
          ) != '1'
") 
```

注意：用户名是两个表中的一列。

上面的查询不起作用。

回顾一下：有两个表：payment_details 和 users。我想将所有未被禁止的用户的余额列加在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:47:40.437

不要在这里使用子查询。相反，使用`JOIN`.

```
SELECT SUM(payment_details.balance) FROM payment_details
JOIN users ON payment_details.username = users.username
WHERE ban != '1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:51:16.820

同意，加入可能是您想要的。

但是，要回答具体问题，您可以尝试如下查询：

```
SELECT SUM(payment_details.balance)
    FROM payment_details
    WHERE payment_details.username in (
        SELECT users.username
            FROM users WHERE ban != '1'
    ); 
```

请注意，从问题中不清楚您是想要每个用户的总和还是所有用户的总和。上面的查询提供了后者——不按用户分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:50:56.027

查询是：

```
SELECT SUM(balance) FROM payment_details JOIN users ON payment_details.username=users.username WHERE users.ban !='1' group by payment_details.username 
```

顺便说一句，处理用户 ID 比处理用户名要好得多

# jquery - 如何将右键单击事件附加到可拖动的 div

> ID：13733050
> 
> 赞同：0
> 
> 时间：2012-12-05T21:45:37.380
> 
> 标签：jquery, click, mouse

这是我遇到的问题。我需要在可拖动的 div 上附加某种句柄。

我需要做的是每次右键单击父级中的 div 时捕获鼠标右键。

这是我的孩子创建代码。这段代码工作正常，我可以毫无问题地创建多个 div。

```
var smallBlock = $('<div class="SmallBlock"></div>').appendTo("#canvas");
smallBlock..draggable({containment: "#canvas", scroll: false, grid: [10, 10]}, {cursor: "move", cursorAt: {top: 125, left: 150}})
smallBlock.append('<div class="article_title fontCenter fontBold font32">Article Title</div>')
smallBlock.append('<div class="article_Image"><img style="width: 250px;" src="<? echo $image1 ?>"></div>')
smallBlock.append('<div class="font14"><? echo substr($article_text, 0, 200) ?></div>') 
```

这是鼠标点击代码。

```
<script type="text/javascript">

function getRightClick()
{
    // check for right mouse pressed

$('#canvas').mousedown(function(event) {
    switch (event.which) {
        case 1:
            alert('Left mouse button pressed');
            break;
        case 2:
            alert('Middle mouse button pressed');
            break;
        case 3:
            alert('Right mouse button pressed');
           break;
        default:
            alert('You have a strange mouse');
    }
});
}

</script> 
```

我不知道如何让 div 识别鼠标右键单击它。

顺便说一句，我需要检测父级中的其他类 div；所以更通用的解决方案可能会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:08:49.033

试试这个：

```
$("#canvas").bind("contextmenu", function(e) {
  alert('Right mouse clicked'); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:23:45.290

您可以将其添加到上下文 id 元素中：

```
oncontextmenu="alert('right click on element');return false; 
```

或者这个：

```
jQuery('#yourDIVId').mousedown(function(event) {
   var rightclk = false;
   if (event.which) rightclick = (event.which == 3);
     if(rightclk == true){
        alert('yes')
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T11:12:00.290

这样的事情可能会有所帮助：

```
<head>
<script src="http://code.jquery.com/jquery-2.0.2.min.js"></script>
<script>
    $('#page').ready(function() {
        $('#page').bind('contextmenu', function(event) {
            alert($(event.target).attr('id'));
            /*you can replace the alert with any function that you want to bind with right click
             */
        });
    });
</script>

<body>
    <div id='page'>
        <div id="divParent">click parent
            <div id="divChild">click child</div>
        </div>
    </div>
</body>
</body> 
```

[在此处输入链接描述](http://jsfiddle.net/rLJMh/258/)

# php - 将地图标记放置在另一个标记周围以防止重复的大头针掉落

> ID：13733051
> 
> 赞同：0
> 
> 时间：2012-12-05T21:45:50.230
> 
> 标签：php, google-maps, math, google-maps-markers

我正在使用标记为谷歌地图上的数据库中保存的地址绘制标记。不幸的是，数据库中的一些企业共享办公楼，这意味着它们的地址/邮政编码具有相同的长/纬度，这意味着您只能看到一个标记，但我需要显示的是每个标记与原始标记有一点偏移每个企业都是不同的企业，在同一栋建筑中并非都是相同的企业——例如 Osaka Fish Concern、Quahog Toys、Widgets ltd 等。

我无法相信这些年来我忘记了多少数学，并且无法找出正确的术语来搜索方程式。

我需要的是一个简单的等式，将标记放置在另一个点周围的圆形图案中。

例如，如果我收到 10 个企业的数据，它们都具有相同的经度/纬度，第一个将被绘制在精确的经度/纬度处，但其他 9 个我想在附近绘制，但理想情况下看起来像他们在围绕第一个圆圈。

我已经实现了一种这样做的方法，该方法暂时对 long/lat 的方向进行了一些随机化，但其中一些最终距离太远而无法被视为同一事物的一部分。

当前例程是一个非常简单的例子，即从值中添加或减去固定距离，然后检查我们是否已经在列表中找到了它。

我正在预处理服务器中的所有数据，因此例程在 PHP 中运行。

```
 <?php
    $tmpList = Array();

    $latLngKeys = Array();

    foreach ($officeList as $oItem) {
        if ($oItem['lat'] == null && $oItem['lng'] == null) { continue; }

        // now ensure that we don't get multiple lat/lng at same points
        $latLngOk = false;
        $lat = $oItem['lat'];
        $lng = $oItem['lng'];
        $origLatLng = md5($lat.$lng);
        $displaceLat = 0.0000250000;
        $displaceLng = 0.0000250000;

        while (!$latLngOk) {
            $latLng = md5($lat.$lng);
            if (isset($latLngKeys[$latLng])) {
                //echo "Key: $latLng, Orig lat: $lat, orig lng: $lng\n";
                $numSame = $latLngKeys[$origLatLng];
                //$numSame = 1;
                $dirX = rand(0,1);
                $dirY = rand(0,1);
                if ($dirX == 0) { $dispLat = $displaceLat; } else { $dispLat = -$displaceLat; }
                if ($dirY == 0) { $dispLng = $displaceLng; } else { $dispLng = -$displaceLng; }                 
                $lat = $oItem['lat'] + ($dispLat * $numSame);
                $lng = $oItem['lng'] + ($dispLng * $numSame);
                //echo "numSame: $numSame, dirX: $dirX, diry: $dirY, dispLat: $dispLat, dispLng: $dispLng, lat: $lat, lng: $lng, key: $latLng\n"; flush();
                $latLngKeys[$latLng]++;                 
            } else {
                $latLngKeys[$origLatLng]++;
                $latLngOk = true;
                break;
            }
        }

        $oItem['lat'] = $lat;
        $oItem['lng'] = $lng;
        $tmpList[] = $oItem;
    }

            ?> 
```

这确实有效，并使它们保持相当紧凑，我只是想稍微完善一下。

谢谢。

# javascript - 在 DataTables 中使用默认数据顺序，但允许用户重新排序

> ID：13733054
> 
> 赞同：-2
> 
> 时间：2012-12-05T21:45:54.240
> 
> 标签：javascript, php, jquery, jquery-datatables

我正在使用[Datatables 插件](http://www.datatables.net/index)来处理一些数据：

我的问题是我想按照最初提供的顺序呈现数据。因此，请禁用 DataTables 在执行时自动排序。但是，我仍然想为用户提供自己对表格进行排序的选项。bSort:false 允许我禁用初始排序，但它也禁用了用户的排序能力。

我怎样才能实现两者？仅供参考，数据以随机顺序提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:52:15.270

您正在寻找的属性是“aaSorting”。保持“bSort”不变。

```
.dataTable({
    "bSort": true,
    "aaSorting": [],
    ...  //other datatables properties
 }); 
```

您还可以通过将 "bSortable": True 或 "bSortable": False 应用于 "aoColumns" 中的每一列来设置单个列排序。

```
.dataTable({
..., //other datatables properties 
"aoColumns": [
    { "bSortable": True },
    { "bSortable": False }
]
}); 
```

# macos - 有没有办法确定共享库导出符号的函数参数？

> ID：13733058
> 
> 赞同：0
> 
> 时间：2012-12-05T21:46:09.080
> 
> 标签：macos, unix, core-foundation, nm

有没有办法确定共享库导出符号的函数参数？出于好奇目的，我正在调查一个私有 OSX 框架（我知道 Apple 商店政策等）。我可以执行 nm -g /path/to/library 并确定所有导出的符号，但是，我很好奇确定必须传递给这些调用的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:44:36.407

No, that information is not present in a shared library's symbol table (or any other part of the shared library). That's why you need the header file when you compile against a library.

# c# - .NET - 显示/隐藏基于使用的构造函数的方法？

> ID：13733064
> 
> 赞同：2
> 
> 时间：2012-12-05T21:46:37.287
> 
> 标签：c#, .net, constructor

如果使用某个构造函数，有没有办法隐藏/显示方法？IE：

```
public class SomeClass
{
    public SomeClass(string methodA)
    {

    }

    public SomeClass(int methodB)
    {

    }

    public string MethodA()
    {
        return "";
    }

    public int MethodB()
    {
        return 0;
    }
} 
```

如果`SomeClass(string methodA)`使用，那么只有`MethodA()`当我实例化一个新`SomeClass`对象时才可用？同样什么时候`SomeClass(int methodB)`用，那么`MethodB()`就可以用了吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:51:11.547

不，这是不可能的。

更有可能的是您想使用泛型：

```
public interface IFoo<T>
{
    T Method();
}

public class IntFoo : IFoo<int>
{
    int value;
    public IntFoo(int value)
    {
        this.value = value;
    }

    public int Method()
    {
        return value;
    }
}

public class StringFoo : IFoo<string>
{
    string value;
    public StringFoo(string value)
    {
        this.value = value;
    }

    public string Method()
    {
        return value;
    }
} 
```

如果您不需要将其限制为字符串或整数（或不想），那么这样的事情可能会起作用，甚至更好：

```
public class Foo<T>
{
    private T value;
    public Foo(T value)
    {
        this.value = value;
    }

    public T Method()
    {
        return value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:49:17.423

不，这是不可能的。您最好创建一个抽象类，并创建两个从抽象类继承的独立类。请参阅抽象设计模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:06:52.120

您最好为您的课程使用泛型。它比您可能正在寻找的流动性要少一些（因为您必须在类声明中定义类型），但我认为它完成了您主要想要的。

```
public class SomeClass<T>
{
    public SomeClass(T value)
    {
    }

    public T Method() { return default(T); }
} 
```

这意味着创建类的实例将使用“new SomeClass(0);” 而不是简单的“new SomeClass(0);”

# c++ - 布尔排序插入函数，检查列表中是否已存在 int

> ID：13733079
> 
> 赞同：0
> 
> 时间：2012-12-05T21:48:29.440
> 
> 标签：c++, linked-list

我正在尝试实现一个接收 List 和 Int 作为参数的 bool 函数，如果 int 在列表中不存在，则应该插入 int 并返回 true，如果 int 已经存在则返回 false，我已经使用这个函数工作了几个小时，并且 if-else 语句可以插入排序的 int，问题（和崩溃）是如何检查值是否已经存在并返回 false，这是我的函数：struct 的声明

```
typedef struct E_Type * List;
struct E_Type
 {
  int data;
  List next = 0;
 }; 
```

和功能

```
bool insert(List & l, int data)
{   

   List current = l;
       do{//check if the int is already in the list
          current->data;
          current = current->next;
        //return false;
     }while (current->data == data);

      if (l == 0 || l->data > data){
              List new_list = new E_Type;
              new_list->data = data;
               new_list->next = l;
               l = new_list;
           return true;
      }

       else if(l->data < data){
             insert(l->next, data);
           return true;
     }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:20:57.470

```
do{
      //this line doesn't really do anything...
      current->data;
      //moving current forward, good.
      current = current->next;
 //If current->data is less than data in the list, it will exit the loop here anyway.
}while (current->data == data); 
```

您也没有检查您是否已到达列表的末尾。也许您正在尝试做的是这样的事情：

```
//This is correct for for iterative approach, but I don't think this is really what you need, either...
while(current != null) {
    if (current->data == data)
        return false;
    current = current->next;
} 
```

但是，您可能不想使用这样的迭代在递归函数中进行此检查，因此只需将整个位替换为：

```
if (current->data == data)
   return false; 
```

要通过递归调用返回正确的值，您需要更改：

```
else if(l->data < data){
     insert(l->next, data);         //Recursive call
     return true;  //you don't want to just return true, return what the recursive call returns!
} 
```

到：

```
else if(l->data < data){
     return insert(l->next, data);
} 
```

# vba - x86 计算机上的 Access 2003 项目到 Access 2010 x64

> ID：13733080
> 
> 赞同：3
> 
> 时间：2012-12-05T21:48:38.540
> 
> 标签：vba, ms-access, x86, cross-platform

我只想在家里处理我的项目，但我遇到了一些问题，因为我在 x64 Windows 7 操作系统上使用 Access 2010，而 MDB 项目已经在 Windows XP x86 上使用 Access 2003 完成。

我真的不想将项目转换为与 x64 兼容，我只想让它在我的计算机上以 x86 模式运行。

实际上，尝试导入这些函数时出现错误：

```
Private Declare Function GetPrivateProfileString Lib "kernel32" Alias "GetPrivateProfileStringA" (ByVal lpApplicationName As String, ByVal lpKeyName As Any, ByVal lpDefault As String, ByVal lpReturnedString As String, ByVal nSize As Long, ByVal lpFileName As String) As Long
Private Declare Function WritePrivateProfileString Lib "kernel32" Alias "WritePrivateProfileStringA" (ByVal lpApplicationName As String, ByVal lpKeyName As Any, ByVal lpString As Any, ByVal lpFileName As String) As Long 
```

Access 表示必须更新它以支持具有某些 PtrSafe 属性的 64 位操作系统。我真的不知道它是什么意思，但我知道我希望它在没有任何代码修改的情况下工作，但我在任何地方都找不到任何选项。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:55:16.597

如果您在家中的计算机上安装 x86 Office，您应该不会有任何问题。问题在于 X64 版本的 Office。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:53:37.970

正如 HelloW 已经说过的：只需安装 32 位版本的 Office。

值得指出的是，**Microsoft 建议不要使用 64 位 Office，除非您有充分的理由这样做**。

[Office 帮助 说：](http://office.microsoft.com/en-us/outlook-help/choose-the-32-bit-or-64-bit-version-of-office-HA010369476.aspx)

> 32 位版本的 Office 2010 是大多数人的推荐选项，因为它可以防止与其他 32 位应用程序的潜在兼容性问题，特别是仅适用于 32 位操作系统的第三方加载项。

[Microsoft Office 2010 技术保证常见问题解答](http://office2010.microsoft.com/en-us/tech-guarantee/microsoft-office-2010-technology-guarantee-faq-HA101812304.aspx?redir=0)说：

> ...我们强烈建议大多数用户在 32 位和 64 位操作系统上安装 32 位版本的 Office 2010，因为目前许多常见的 Office 加载项在 64 位版本中不起作用。Microsoft Office 2010 产品的 64 位安装将适用于通常使用非常大的文档或数据集并需要 Excel 2010 程序来访问超过 2GB 内存的用户。

# java - 遍历（读取）静态 DOM 文档对象是否是线程安全的？

> ID：13733083
> 
> 赞同：3
> 
> 时间：2012-12-05T21:48:42.220
> 
> 标签：java, dom, xml-parsing, thread-safety

我创建了一个 DOM 文档静态对象，如下所示，它使用 javax.xml.parsers.* 和 org.w3c.dom.* API：

```
 DocumentBuilderFactory docBldrFactry = DocumentBuilderFactory.newInstance();
        docBldrObj = docBldrFactry.newDocumentBuilder();

        File file = new File(fileDirectory);
        // Parse the XML file and return a DOM document object

        document = docBldrObj.parse(file);
        //FYI, document is declared as private static org.w3c.dom.Document document elsewhere. 
```

后来在上面创建之后，如果这个静态DOM文档对象被线程共享，但所有线程都只是读取（遍历）这个文档，它是线程安全的吗？

我认为这是因为 read 不应该修改这个共享状态，但不确定内部是否有一些我不知道的魔法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:35:17.927

通过编写自己的简单文档结构解决了这个问题。例如，将 DOM 文档克隆到其中，这在读取操作上是线程安全的。仅供参考，出于我自己的目的，在克隆文档时，除了基于我需要的信息（COMMENT_NODE、TEXT_NODE、ELEMENT_NODE、属性）之外，我不会克隆所有内容。

# javascript - 即时添加@font-face

> ID：13733088
> 
> 赞同：8
> 
> 时间：2012-12-05T21:49:18.613
> 
> 标签：javascript, html, font-face

我对 JavaScript FileReader 和/或 CSS @font-face 有疑问（或者可能是 HTML DOM 问题 - 不确定）。
我在 HTML5 拖放的帮助下从桌面拖放一个字体文件并将其拖放到浏览器的窗口中，然后接收**File**对象并尝试处理它。
这是执行此操作的 JavaScript 代码：

```
//getting the File object
var file = e.dataTransfer.files[0];
var reader = new FileReader();
reader.onload = function(event) {
    var contents = event.target.result;
    //most important thing here - appending style into HEAD (jQuery)
    $('head').append('<style type="text/css">@font-face { font-family:"myFont";
    src: url("'+contents+'"); }</style>');
};

reader.onerror = function(event) {
    console.error("File could not be read! Code " + event.target.error.code);
};

//read file
reader.readAsDataURL(file); 
```

附加到**头部**的最终 CSS 如下所示：

```
<style type="text/css">
    @font-face {
        font-family: "myFont";
        src: url("data:;base64;Ahs5hD3..."); // here come's the URL of 'cached' font. A lots of letters and digits
    }
</style> 
```

CSS 本身的附加没有任何问题。***问题***是没有应用字体系列。在整个魔术之后，我使用 Firebug（或它的 Chrome 等效项）将某些元素的字体系列设置为“myFont”，但它应用了默认字体（我猜是 Times new roman）。

我知道我可以上传字体来实现这一点（例如使用 PHP），但这不是重点。

这里可能的问题可能是：
1\. 是否可以即时附加 CSS 样式并在不重新加载的情况下使用它（如果可以使用 firebug，可能是 TRUE）？
2\. 是否可以使用尚未上传的（本地？）资源中的字体文件，例如 javascript *getAsDataUrl*函数返回的字体文件（TRUE - 可以使用图像文件）？
那么，在某些情况下，这两种情况都是可能的，那么我做错了什么？（可能是文件 MIME 类型？请注意，@font-face *src*参数中的“数据：”部分为空）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T14:29:21.343

我现在没有时间尝试一下，但是当我阅读了您的代码时，问题可能/应该是您不支持数据 uri 中的 mime 时间：

```
 src: url("data:;base64;Ahs5hD3..." 
```

一个相当“激进”的反例：

```
src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRg 
```

我会回去尝试并深入研究它。

# intellij-idea - 可以将 IntelliJ 中显示的项目名称静音吗？

> ID：13733090
> 
> 赞同：0
> 
> 时间：2012-12-05T21:49:33.903
> 
> 标签：intellij-idea

在下图中，我有一个模块`datastore`作为`IdeaProjects`项目的一部分。

出于显示目的，项目名称与我无关。有没有办法我可以选择不显示它？

![在此处输入图像描述](../Images/a54d0a928dbce4c0d650bb6fd5b82a52.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:16:13.927

如果切换到**Packages**视图，可以隐藏文件夹名称。这并不理想，因为您可能还想查看其他文件，但恐怕这是目前唯一的方法。

欢迎您[提交请求以使其可配置](http://youtrack.jetbrains.net/issues/IDEA)。

# vb.net - 将具有数据列的行转换为具有多行的列（运行时错误）

> ID：13733091
> 
> 赞同：1
> 
> 时间：2012-12-05T21:49:34.510
> 
> 标签：vb.net, excel, vba, vbscript, runtime-error

我有一排数据如下：

```
 header1      header2      header3      header4      header5
  row key   datavalue1   datavalue2   datavalue3   datavalue4   datavalue5.... 

    CC     Corporate Leadership                 Community Funding Delivery 
   da1000              50%                                    50% 
```

所以基本上，我有一个非规范化的数据集，其中数据值可能逐行为空，也可能不为空。我需要使它们正常化。

IE

```
 CC         Activity                   Allocation                         
   da1000     Community Development         50%
   da1000     Community Funding Delivery    50% 
```

ETC

我可以通过使用粘贴特殊转换来做到这一点，但我有数千行，我需要确保为每个行获得正确的行键。此外，每一行都有一堆与之相关的描述，我需要将这些描述与每个数据值一起复制。

我尝试使用以下代码，但是我得到了

运行时错误 5 无效的过程调用或参数

```
Sub NormalizeSheet()
Dim wsOriginal As Worksheet
Dim wsNormalized As Worksheet
Dim strKey As String
Dim clnHeader As Collection
Dim lngColumnCounter As Long
Dim lngRowCounterOriginal As Long
Dim lngRowCounterNormalized As Long
Dim rngCurrent As Range
Dim varColumn As Variant

Set wsOriginal = ThisWorkbook.Worksheets("Original")     'This is the name of your original worksheet'
Set wsNormalized = ThisWorkbook.Worksheets("Normalized") 'This is the name of the new worksheet'
Set clnHeader = New Collection

wsNormalized.Cells.ClearContents        'This deletes the contents of the destination worksheet'

lngColumnCounter = 2
lngRowCounterOriginal = 1
Set rngCurrent = wsOriginal.Cells(lngRowCounterOriginal, lngColumnCounter)

' We'll loop through just the headers to get a collection of header names'
Do Until IsEmpty(rngCurrent.Value)
    clnHeader.Add rngCurrent.Value, CStr(lngColumnCounter)
    lngColumnCounter = lngColumnCounter + 1
    Set rngCurrent = wsOriginal.Cells(lngRowCounterOriginal, lngColumnCounter)
Loop

'Here we'll reset our Row Counter and loop through the entire data set'
lngRowCounterOriginal = 2
lngRowCounterNormalized = 1
lngColumnCounter = 1

Do While Not IsEmpty(wsOriginal.Cells(lngRowCounterOriginal, lngColumnCounter))

    Set rngCurrent = wsOriginal.Cells(lngRowCounterOriginal, lngColumnCounter)
    strKey = rngCurrent.Value ' Get the key value from the current cell'
    lngColumnCounter = 2

    'This next loop parses the denormalized values for each row'
    Do While Not IsEmpty(wsOriginal.Cells(lngRowCounterOriginal, lngColumnCounter))
        Set rngCurrent = wsOriginal.Cells(lngRowCounterOriginal, lngColumnCounter)

        'We're going to check to see if the current value'
        'is equal to NULL. If it is, we won't add it to'
        'the Normalized Table.'
        If rngCurrent.Value = "NULL" Then
            'Skip it'
        Else
            'Add this item to the normalized sheet'
            wsNormalized.Range("A" & lngRowCounterNormalized).Value = strKey
            wsNormalized.Range("B" & lngRowCounterNormalized).Value = clnHeader(CStr(lngColumnCounter))
            wsNormalized.Range("C" & lngRowCounterNormalized).Value = rngCurrent.Value
            lngRowCounterNormalized = lngRowCounterNormalized + 1
        End If

        lngColumnCounter = lngColumnCounter + 1
    Loop
    lngRowCounterOriginal = lngRowCounterOriginal + 1
    lngColumnCounter = 1    'We reset the column counter here because we're on a new row'
Loop

     End Sub  (CREDIT GOES TO Ben McCormack) 
```

# java - 我的数组程序

> ID：13733094
> 
> 赞同：0
> 
> 时间：2012-12-05T21:50:01.863
> 
> 标签：java, arrays

我应该编写一个在礼物注册表中创建条目的程序。用户可以输入任意数量的礼品以及可以购买的商店。一旦用户表示希望停止输入新商品，将显示所有礼品商品和商店的摘要。

```
Below is a sample output
 Do you wish to make a gift registry list? (y/n): y
 Enter item: watch
 Enter store: Swatch
 Any more items? (y/n): y
 Enter item: ballpen
 Enter store: National Bookstore
 Any more items? (y/n): n

Gift Registry:
watch - Swatch
ballpen - National Boo 
```

如果我没记错的话，我应该为这个程序使用数组，对吗？是否可以有一个取决于计数器的数组长度（用户输入的次数）？

到目前为止，这些是我的代码：

```
package arrays;
import java.util.*;
import java.util.List;
import java.util.ArrayList;

public class GiftRegistry 
{
    public static void main (String[] args)
    {
        Scanner input = new Scanner(System.in);

        String choice;

        // Declare array num
        ArrayList<String> items = new ArrayList<String>();
        ArrayList<String> stores = new ArrayList<String>();

        items.add(items);
        stores.add(stores);

        System.out.print("Do you wish to make a gift registry list? (y/n):");
        choice = input.nextLine();

        while (choice.charAt(0) != 'n')
        {
            System.out.print("Enter item: ");
            items.add(items) = input.nextInt();

            System.out.print("Enter store: ");
            stores.add(stores) = input.nextInt();

            System.out.print("Any more items? (y/n):");
            choice = input.nextLine();
        }

        System.out.println("Gift regisrty: ");

        }
 } 
```

我真的不知道怎么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:54:27.887

1) 您不能将“watch”和“Swatch”插入为`int`；

2) 为什么使用`Arrays`, 什么时候 a`List`更好？

编辑：

`java.util.List`: 接口。

`java.util.ArrayList`：适合您的情况的最佳实施。

用法：

```
List<String> list = new ArrayList<String>();
list.add("myFirstString");
list.add("mySecondString"); 
```

等等

在 for each 循环中阅读它：

```
for (String currentValue : list)
   System.out.println(currentValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:54:19.380

数组的长度是固定的，因此由于无限长度的性质，您不能使用数组。您应该使用一个列表，在您的情况下是一个 ArrayList。

[http://docs.oracle.com/javase/6/docs/api/java/util/List.html](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)列表文档 [http://docs.oracle.com/javase/6/docs/api/java/util/ ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)的 ArrayList.html 文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:56:22.213

您可以使用 ArrayList，其大小是动态自动调整的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:01:43.723

您应该使用数组的想法是正确的-但是，Java的标准数组类型不会动态调整大小-换句话说，在这里：

```
 int[] item = new int[ctr+1];
  int[] store = new int[ctr+1]; 
```

您正在创建对大小为 1 的数组对象的引用。但是当您调用

```
ctr++; 
```

您不会影响数组的大小 - 您正在影响与整数 ctr 关联的值，当您用于初始化新数组时，它不会自动将其与数组关联。

如果您仍想使用原始数组，则当所需的礼物数量大于数组大小时，您必须创建一个新数组 - 顺便说一下，您必须将项目存储为**字符串**：

```
//If the array 'item' is full....
String [] oldItemArray = item;

//You can increase by 1 or more, to add more empty slots
String [] newItemArray = new String[oldItemArray.length + 1]; 
for (int i = 0; i < newItemArray.length; i++){
//...Put each item from the old array into the new one.
}
item = newItemArray; 
```

Java 包含一种用于这些情况的数据结构，因为它很常见 - ArrayList - 当分配的内存量被填充时动态调整大小，我强烈建议使用它：

```
ArrayList<String> items = new ArrayList<String>();
ArrayList<String> stores = new ArrayList<String>();
...
...
items.add(enteredItem);
stores.add(storedItem); 
```

如果您也询问它们，代码还有其他几个小问题。然而，这是代码的主要问题。

# c++ - Boost.Python - 将 boost::python::object 作为参数传递给 python 函数？

> ID：13733098
> 
> 赞同：6
> 
> 时间：2012-12-05T21:50:33.967
> 
> 标签：c++, python, boost, boost-python

所以我正在做一个小项目，我在其中使用 Python 作为嵌入式脚本引擎。到目前为止，我使用 boost.python 并没有遇到太多麻烦，但如果可能的话，我想用它做一些事情。

基本上，Python 可用于通过向类添加函数甚至数据值来扩展我的 C++ 类。我希望能够让这些在 C++ 端持久化，所以一个 python 函数可以将数据成员添加到一个类，然后传递给不同函数的同一个实例仍然会有它们。这里的目标是用 C++ 编写一个通用的核心引擎，并让用户在 Python 中以他们需要的任何方式对其进行扩展，而无需接触 C++。

所以我认为可行的是我将 a`boost::python::object`作为值存储在 C++ 类中`self`，当从 C++ 调用 python 时，我会通过 发送该 python 对象`boost::python::ptr()`，以便 python 端的修改将持续返回到C++ 类。不幸的是，当我尝试这个时，我收到以下错误：

`TypeError: No to_python (by-value) converter found for C++ type: boost::python::api::object`

有没有办法将对象直接传递给这样的 python 函数，或者我可以通过其他任何方式来实现我想要的结果？

提前感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:09:38.883

从 c++sig 邮件列表中获得了这个奇妙的解决方案。

`std::map<std::string, boost::python::object>`在 C++ 类中实现 a ，然后重载`__getattr__()`并`__setattr__()`读取和写入该 std::map。然后像往常一样将它发送到 python `boost::python::ptr()`，无需在 C++ 端保留一个对象或将一个对象发送到 python。它完美地工作。

编辑：我还发现我必须以`__setattr__()`一种特殊的方式覆盖该函数，因为它破坏了我用`add_property()`. 这些东西在获取它们时工作得很好，因为 python 在调用之前检查了一个类的属性`__getattr__()`，但是没有这样的检查`__setattr__()`。它只是直接调用它。所以我不得不做出一些改变来把它变成一个完整的解决方案。这是解决方案的完整实现：

首先创建一个全局变量：

```
boost::python::object PyMyModule_global; 
```

如下创建一个类（以及您要添加的任何其他信息）：

```
class MyClass
{
public:
   //Python checks the class attributes before it calls __getattr__ so we don't have to do anything special here.
   boost::python::object Py_GetAttr(std::string str)
   {
      if(dict.find(str) == dict.end())
      {
         PyErr_SetString(PyExc_AttributeError, JFormat::format("MyClass instance has no attribute '{0}'", str).c_str());
         throw boost::python::error_already_set();
      }
      return dict[str];
   }

   //However, with __setattr__, python doesn't do anything with the class attributes first, it just calls __setattr__.
   //Which means anything that's been defined as a class attribute won't be modified here - including things set with
   //add_property(), def_readwrite(), etc.
   void Py_SetAttr(std::string str, boost::python::object val)
   {
      try
      {
         //First we check to see if the class has an attribute by this name.
         boost::python::object obj = PyMyModule_global["MyClass"].attr(str.c_str());
         //If so, we call the old cached __setattr__ function.
         PyMyModule_global["MyClass"].attr("__setattr_old__")(ptr(this), str, val);
      }
      catch(boost::python::error_already_set &e)
      {
         //If it threw an exception, that means that there is no such attribute.
         //Put it on the persistent dict.
         PyErr_Clear();
         dict[str] = val;
      }
   }
private:
   std::map<std::string, boost::python::object> dict;
}; 
```

然后按如下方式定义 python 模块，添加您想要的任何其他定义和属性：

```
BOOST_PYTHON_MODULE(MyModule)
{
   boost::python::class_<MyClass>("MyClass", boost::python::no_init)
      .def("__getattr__", &MyClass::Py_GetAttr)
      .def("__setattr_new__", &MyClass::Py_SetAttr);
} 
```

然后初始化python：

```
void PyInit()
{
   //Initialize module
   PyImport_AppendInittab( "MyModule", &initMyModule );
   //Initialize Python
   Py_Initialize();

   //Grab __main__ and its globals
   boost::python::object main = boost::python::import("__main__");
   boost::python::object global = main.attr("__dict__");

   //Import the module and grab its globals
   boost::python::object PyMyModule = boost::python::import("MyModule");
   global["MyModule"] = PyMyModule;
   PyMyModule_global = PyMyModule.attr("__dict__");

   //Overload MyClass's setattr, so that it will work with already defined attributes while persisting new ones
   PyMyModule_global["MyClass"].attr("__setattr_old__") = PyMyModule_global["MyClass"].attr("__setattr__");
   PyMyModule_global["MyClass"].attr("__setattr__") = PyMyModule_global["MyClass"].attr("__setattr_new__");
} 
```

一旦你完成了所有这些，你就可以将在 python 中所做的实例的更改持久化到 C++ 中。任何在 C++ 中定义为属性的东西都将被正确处理，任何没有被定义为属性的东西都将被附加到`dict`类的`__dict__`.

# python - Flask Jinja 中的“包含”会导致模板加载速度变慢？

> ID：13733103
> 
> 赞同：0
> 
> 时间：2012-12-05T21:50:59.077
> 
> 标签：python, flask, jinja2

我的模板变得很长，所以我将一个部分拆分为一个相关的部分模板。

我的长模板现在可以调用..

```
{% include "shorttemplate.html" %} 
```

在里面。这适当地继承了我从长模板中需要的一切，但似乎产生了短模板内容的加载闪烁——它们不存在，然后突然存在。不应该在呈现 html 之前发生包含吗？为什么我看到这个闪烁？

我使用该`include`命令只是为了组织清晰——我什至没有在其他地方重用这个短子模板，我只是想把这个单元从长模板中移出。

有没有办法在渲染 html 之前要求所有烧瓶代码执行，这样我就看不到这种闪烁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:20:11.983

闪烁是因为页面加载时间较长，这不取决于 Flask 代码是在呈现 HTML 之前还是之后执行（尽管它仅在您调用 时发生`render_template`）。浏览器只是显示一个中间状态，当页面加载足够快时通常看不到。如果您遇到这样的过滤器问题，您可以

*   **通过优化您的代码或替换您使用的组件来**改进您的服务器软件堆栈，****
***   **通过投入更多资源来使用（更快的 CPU、更多内存、更快的存储）来**改进您的服务器硬件，或者*******   **通过避免重新加载整个页面并使用 AJAX 仅更新需要它的部分来**改进您的客户端代码。********

# django - Django 动态模型选择表单

> ID：13733110
> 
> 赞同：0
> 
> 时间：2012-12-05T21:51:41.137
> 
> 标签：django, django-forms

我有一个像这样的表格：

```
class ThingSelectionForm(forms.Form):
    things = forms.ModelChoiceField(
        queryset=Product.objects.filter(product=my_product),
        widget=forms.RadioSelect,
        empty_label=None,
    ) 
```

我的问题是 - 我如何在`my_product`页面加载时传递变量？我应该创建自定义`__init__`方法吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:55:11.160

是的，您可以覆盖**初始化**

```
 class ThingSelectionForm(forms.Form):
        things = forms.ModelChoiceField(
            widget=forms.RadioSelect,
            empty_label=None,
        )
       def __init__(self, *args, **kwargs):
              my_prod = kwargs.pop('my_prod), None
              super(...)
              self.fields['things'].queryset = Product.objects.filter(product=my_prod),

#view

form = ThingSelectionForm(my_prod = my_prod) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:28:50.127

我今天只是在做这样的事情。我发现[这很有帮助](https://stackoverflow.com/questions/1821289/django-modelform-instance-with-custom-queryset-for-a-specific-field)。这是戴夫的回答

模型.py

```
class Bike(models.Model):
    made_at = models.ForeignKey(Factory)
    added_on = models.DateField(auto_add_now=True) 
```

视图.py

```
form  = BikeForm()
form.fields["made_at"].queryset = Factory.objects.filter(user__factory) 
```

我用 filter(foo=bar) 类型的查询做了我的。

然后在 forms.py

```
made_at = forms.ModelChoiceField(queryset=Factory.objects.all()) 
```

# javascript - iframe 的属性 src 的 javascript split()？

> ID：13733113
> 
> 赞同：2
> 
> 时间：2012-12-05T21:51:53.347
> 
> 标签：javascript, split

我有这个：

```
<iframe src="http://999.999.99.99/reporting/report.php?rid=2&gid=6&ftid=0&fid=1000&gty=1&ltid=1&lid=1000&mode=7&width=220&sid=0&cc=666666,ffa401"> 
```

我试图`split()`在两者之间获得价值`rid=`，`&`但它没有得到我想要的。我只想要这两者之间的价值。请帮忙。

到目前为止，这是我的代码：

```
var source = 'http://999.999.99.99/reporting/report.php?rid=2&gid=6&ftid=0&fid=1000&gty=1&ltid=1&lid=1000&mode=7&width=220&sid=0&cc=666666,ffa401';
var rid = source.split('rid= &').pop();
alert(rid); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:57:34.827

使用[此处](http://shiplu.mokadd.im/61/parse-query-string-by-pure-javascrirpt/)描述的**URL 解析器**。

```
var parts = getUrlParts(url);
var rid = parts.rid; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:56:37.890

使用正则表达式

```
var str="http://999.999.99.99/reporting/report.php?rid=2&gid=6&ftid=0&fid=1000&gty=1&ltid=1&lid=1000&mode=7&width=220&sid=0&cc=666666,ffa401";
var re = /[?&]rid=([^&]+)/i;
var part = str.match(re);
console.log(part[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:54:44.203

考虑使用一个简单的正则表达式：

```
var rid = src.match(/rid=(\d+)/)[1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T21:57:52.233

您可以匹配正则表达式，但如果您想使用 split 进行匹配，请尝试：

```
var a = src.split("rid=")[1].split("&")[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T21:56:52.427

您可以使用以下代码：

```
var rid = src.substr(src.indexOf('rid') + 4).split('&')[0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T22:31:38.553

非常感谢你们，我真的可以指望你们在这里。

到目前为止，根据您的回答，我已经使用`match()`过并且效果很好。真的，谢谢各位。:)

# c# - 将数组的所有元素添加到 datagridview 行，除了一个

> ID：13733114
> 
> 赞同：6
> 
> 时间：2012-12-05T21:52:13.347
> 
> 标签：c#, winforms, datagridview

我正在逐行读取文本文件，并将其插入到数组中。

然后我有一个名为 custIndex 的列表，其中包含某些索引，即我正在测试的 items 数组的索引，以查看它们是否是有效代码。（例如，custIndex[0]=7，所以我检查了 items[7-1] 中的值，看看它是否有效，在我这里有的两个字典中）。然后，如果有无效代码，我将这一行（项目数组）添加到 dataGridView1。

问题是，dataGridView1 中的某些列是组合框列，因此用户可以选择正确的值。当我尝试添加 items 数组时，出现异常：“DataGridView 中发生以下异常：System.ArgumentException：DataGridViewComboBoxCell 值无效。”

我知道使用正确的数据源正确添加了组合框，因为如果我只是将 items 数组中的一些项目添加到 dataGridView1 中，例如 items[0]，组合框会显示得很好，并且不会抛出异常。我想问题是当我尝试将 items 数组中的不正确值添加到 dataGridView1 行时。

我不确定如何处理这个问题。有没有办法可以添加项目中除该值之外的所有项目？或者我可以添加项目中的值并将其与填充的下拉项目一起显示在组合框单元格中吗？

```
if(choosenFile.Contains("Cust"))
{
    var lines = File.ReadAllLines(path+"\\"+ choosenFile);

    foreach (string line in lines)
    {
        errorCounter = 0;
        string[] items = line.Split('\t').ToArray();

        for (int i = 0; i <custIndex.Count; i++)
        {
            int index = custIndex[i];
            /*Get the state and country codes from the files using the correct indices*/
            Globals.Code = items[index - 1].ToUpper();

            if (!CountryList.ContainsKey(Globals.Code) && !StateList.ContainsKey(Globals.Code))
            {
                errorCounter++;

                dataGridView1.Rows.Add(items);
            }
        }//inner for

        if (errorCounter == 0)
            dataGridView2.Rows.Add(items);

    }//inner for each

}//if file is a customer file 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T23:40:19.593

假设您的文本文件包含：

澳大利亚 巴布亚新几内亚、印度 非洲
奥地利 巴厘岛 印度尼西亚
法国 英国、苏格兰、爱尔兰 格陵兰
德国 巴哈马 夏威夷
希腊 哥伦比亚、墨西哥、秘鲁 阿根廷
新西兰 俄罗斯 美国

假设您的 DataGridView 设置了 3 列，第二列是组合框。

![在此处输入图像描述](../Images/14e04f24d551c2b2e34b29a826906571.png)

当您填充网格并错误地填充组合框列时，您将收到错误消息。

解决它的方法是“处理/显式声明” DataError 事件，更重要的是正确填充组合框列。

```
private void dataGridView1_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
    //Cancelling doesn't make a difference, specifying the event avoids the prompt 
    e.Cancel = true;
}

private void dataGridView2_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
    e.Cancel = true;
} 
```

所以想象第二列包含国家的下拉列表，第一和第三列包含文本字段。

对于第一列和第三列，它们只是字符串，所以我创建了一个类来表示每一行：

```
public class CountryData
{
    public string FirstCountry { get; set; }
    public string ThirdCountry { get; set; }
} 
```

对于第二列“Countries”组合框单元格，我创建了一个单独的类，因为我会将它绑定到第二列数据源。

```
public class MultiCountryData
{
    public string[] SeceondCountryOption { get; set; }
} 
```

*使用组合框列等填充网格，如下所示：[https](https://stackoverflow.com/a/1292847/495455) ://stackoverflow.com/a/1292847/495455不是好的做法。您希望将您的业务逻辑与您的表示分离，以获得一种更加封装、多态和抽象的方法，从而简化单元测试和维护。因此数据绑定。*

这是代码：

```
namespace BusLogic
{
public class ProcessFiles
{

internal List<CountryData> CountryDataList = new List<CountryData>();
internal List<MultiCountryData> MultiCountryDataList = new List<MultiCountryData>();

internal void foo(string path,string choosenFile)
{
    var custIndex = new List<int>();
    //if (choosenFile.Contains("Cust"))
    //{
        var lines = File.ReadAllLines(path + "\\" + choosenFile);
        foreach (string line in lines)
        {
            int errorCounter = 0;
            string[] items = line.Split('\t');

            //Put all your logic back here...

            if (errorCounter == 0)
            {
                var countryData = new CountryData()
                                      {
                                          FirstCountry = items[0],
                                          ThirdCountry = items[2]
                                      };
                countryDataList.Add(countryData);

                multiCountryDataList.Add( new MultiCountryData() { SeceondCountryOption = items[1].Split(',')});

            }
        //}
      }

}
} 
```

在您的演示项目中，这里是按钮单击代码：

```
 imports BusLogic;
 private void button1_Click(object sender, EventArgs e)
 {
     var pf = new ProcessFiles();
     pf.foo(@"C:\temp","countries.txt"); 
     dataGridView2.AutoGenerateColumns = false;
     dataGridView2.DataSource = pf.CountryDataList;
     multiCountryDataBindingSource.DataSource = pf.MultiCountryDataList;      
 } 
```

我设置`dataGridView2.AutoGenerateColumns = false;`是因为我在设计时添加了 3 列；第 1 个文本列、第 2 个组合框列和第 3 个文本列。

绑定第二个组合框列的技巧是`BindingSource`. 在设计时 > 右键单击​​ DataGridView > 选择 Edit Columns > 选择第二列 > 选择 DataSource > 单击 Add Project DataSource > 选择 Object > 然后勾选 multiCountry 类并单击 Finish。

![在此处输入图像描述](../Images/2f898fb7884d045cc2ea78e800b541ac.png)

![在此处输入图像描述](../Images/f29851e209609d5ae322ca005dc3cac5.png)

还将第一列的 DataPropertyName 设置为 FirstCountry，将第三列的 DataPropertyName 设置为 ThirdCountry，因此当您绑定数据时，映射会自动完成。

![在此处输入图像描述](../Images/6d8c1fb4882911d3d950f2c7ad56d4ba.png)

最后，不要忘记将 BindingSource 的 DataMember 属性设置为 multiCountry 类的`SeceondCountryOption`成员。

![在此处输入图像描述](../Images/ab2689a69e0c58eab01f6018bea9b9e5.png)

这是一个代码演示[http://temp-share.com/show/HKdPSzU1A](http://temp-share.com/show/HKdPSzU1A)

# c# - 将值属性添加到 ASP.NET 复选框

> ID：13733120
> 
> 赞同：9
> 
> 时间：2012-12-05T21:52:40.647
> 
> 标签：c#, asp.net

我以编程方式将复选框添加到 ASP.NET WebForm。我想遍历 Request.Form.Keys 并获取复选框的值。ASP.NET 复选框没有值属性。

如何设置 value 属性，以便在遍历 Request.Form.Keys 时获得比默认“on”更有意义的值。

将复选框添加到页面的代码：

```
List<string> userApps = GetUserApplications(Context);

Panel pnl = new Panel();

int index = 0;
foreach (BTApplication application in Userapps)
{
    Panel newPanel = new Panel();
    CheckBox newCheckBox = new CheckBox();

    newPanel.CssClass = "filterCheckbox";
    newCheckBox.ID = "appSetting" + index.ToString();
    newCheckBox.Text = application.Name;

    if (userApps.Contains(application.Name))
    {
        newCheckBox.Checked = true;
    }

    newPanel.Controls.Add(newCheckBox);
    pnl.Controls.Add(newPanel);

    index++;
}

Panel appPanel = FindControlRecursive(this.FormViewAddRecordPanel, "applicationSettingsPanel") as Panel;

appPanel.Controls.Add(pnl); 
```

从 Request.Form 中检索复选框值的代码：

```
StringBuilder settingsValue = new StringBuilder();

foreach (string key in Request.Form.Keys)
{
    if (key.Contains("appSetting"))
    {
        settingsValue.Append(",");
        settingsValue.Append(Request.Form[key]);
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T21:52:40.647

输入属性。添加（）！

以下内容不起作用，因为“CheckBox 控件不呈现属性值（它实际上在呈现事件阶段 [)] 期间删除了属性。”：

```
newCheckBox.Attributes.Add("Value", application.Name); 
```

解决方案：

```
newCheckBox.InputAttributes.Add("Value", application.Name); 
```

感谢 Dave Parslow 的博文：[Assigning a value to an ASP.Net CheckBox](http://www.daveparslow.com/2007/08/assigning-value-to-aspnet-checkbox.html)

# scala - mutable.SynchronizedQueue 上的 dequeueAll 是线程安全的吗？

> ID：13733122
> 
> 赞同：4
> 
> 时间：2012-12-05T21:52:46.607
> 
> 标签：scala, concurrency, thread-safety

查看 SynchronizedQueue.scala 的源代码，看起来 dequeueAll 没有被覆盖？这是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:46:43.093

你的意思是[这个 dequeueAll](https://github.com/scala/scala/blob/master/src/library/scala/collection/mutable/SynchronizedQueue.scala#L76)？

```
override def dequeueAll(p: A => Boolean): Seq[A] = synchronized { super.dequeueAll(p) } 
```

您可以在 github 上单击“责备”，有用的评论会显示票证。点击它或票。

# f# - 滞后或标准偏差的自定义运算符

> ID：13733123
> 
> 赞同：0
> 
> 时间：2012-12-05T21:52:55.593
> 
> 标签：f#, system.reactive

使用 RX 时扩展可用运算符的正确方法是什么？

我想构建一些我认为有用的操作。

第一个操作只是一个系列的标准差。

第二个操作是第 n 个滞后值，即如果我们滞后 2 并且我们的系列是 ABCDEF 当 F 被推动时滞后将为 D 当 A 被推动时滞后将为空/空当 B 被推动时滞后将为空/空当 C 被推动时，滞后将是 A

将这些类型的运算符基于 rx.codeplex.com 的内置函数是否有意义，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:30:33.570

在惯用的 Rx 中，任意延迟可以由`Zip`.

```
let lag (count : int) o = 
    let someo = Observable.map Some o
    let delayed = Observable.Repeat(None, count).Concat(someo)        
    Observable.Zip(someo, delayed, (fun c d -> d)) 
```

至于滚动缓冲区，最有效的方法是简单地使用固定大小的`Queue`/ `ResizeArray`。

```
let rollingBuffer (size : int) o = 
    Observable.Create(fun (observer : IObserver<_>) -> 
    let buffer = new Queue<_>(size)
    o |> Observable.subscribe(fun v -> 
            buffer.Enqueue(v)
            if buffer.Count = size then
                observer.OnNext(buffer.ToArray())
                buffer.Dequeue() |> ignore
        )
    ) 
```

对于`numbers |> rollingBuffer 3 |> log`：

```
seq [0L; 1L; 2L]
seq [1L; 2L; 3L]
seq [2L; 3L; 4L]
seq [3L; 4L; 5L]
... 
```

对于配对相邻值，您可以使用`Observable.pairwise`

```
let delta (a, b) = b - a
let deltaStream = numbers |>  Observable.pairwise |> Observable.map(delta) 
```

`Observable.Scan`如果要应用滚动计算，则更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:32:10.000

其中一些比其他更容易（像往常一样）。对于计数（而不是时间）的“滞后”，您只需使用相当于“滞后”大小的 Observable.Buffer 创建一个滑动窗口，然后获取结果列表的第一个元素。

到目前为止lag = 3，函数是：

```
obs.Buffer(3,1).Select(l => l.[0]) 
```

这很容易变成一个扩展函数。我不知道它是否有效，因为它重用了相同的列表，但在大多数情况下，这无关紧要。我知道你想要 F#，翻译很简单。

对于运行聚合，您通常可以使用`Observable.Scan`来获取“运行”值。这是根据迄今为止看到的所有值计算的（并且实现起来非常简单） - 即，您必须实现的每个后续元素都是先前的聚合和新元素。

如果出于某种原因您需要基于滑动窗口的运行聚合，那么我们将进入更困难的领域。在这里你首先需要一个可以给你一个滑动窗口的操作——这在上面的 Buffer 中已经涵盖了。但是，您需要知道哪些值已从此窗口中*删除*，哪些已*添加*。

因此，我推荐一个新的 Observable 函数，它基于现有窗口 + 新值维护一个内部窗口，并返回新窗口 + 删除值 + 附加值。您可以使用 Observable.Scan 编写此代码（我建议使用内部队列以实现高效）。它应该采用一个函数来确定在给定新值的情况下要删除哪些值（这样可以将其参数化为按时间或按计数滑动）。

此时，Observable.Scan 可以再次用于获取旧聚合 + 窗口 + 删除值 + 附加值并提供新聚合。

希望这会有所帮助，我确实意识到这是很多话。如果您可以确认需求，我可以为该特定用例提供实际的扩展方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:22:11.867

因为`lag`，你可以做类似的事情

```
module Observable =
  let lag n obs =
    let buf = System.Collections.Generic.Queue()
    obs |> Observable.map (fun x ->
      buf.Enqueue(x)
      if buf.Count > n then Some(buf.Dequeue())
      else None) 
```

这个：

```
Observable.Range(1, 9) 
  |> Observable.lag 2 
  |> Observable.subscribe (printfn "%A") 
  |> ignore 
```

印刷：

```
<null>
<null>
Some 1
Some 2
Some 3
Some 4
Some 5
Some 6
Some 7 
```

# iphone - 使用信号量实现的 NSURLConnection 阻塞包装器

> ID：13733124
> 
> 赞同：6
> 
> 时间：2012-12-05T21:53:01.487
> 
> 标签：iphone, objective-c, ios, macos, nsurlconnection

对于我最近的项目，我偶然发现需要：

*   以阻塞方式下载数据（在后台线程中启动）
*   但也会在接收数据时逐步处理数据（因为下载的数据很容易达到 100M，因此将其全部存储在一个大的 NSData* 中效率不高）

因此，我需要使用异步 NSURLConnection 对象（以便能够逐步接收数据），但将其包装在一个容器中，该容器将阻塞调用线程“介于”两个连续`connection:didReceiveData:`委托调用之间，直到其中一个`connectionDidFinishLoading:`或被`connection:didFailWithError:`调用。

我想我会分享我的解决方案，因为我花了几个小时才把到处找到的正确代码组合在一起（在 StackOverflow 和其他论坛上）。

代码基本上在`NSURLConnection`后台线程（代码很好地包装在自定义类中。`dispatch_get_global_queue``dispatch_semaphores``dispatch_semaphores``ProducerConsumerLock`

**阻塞连接.m**

```
#import "BlockingConnection.h"
#import "ProducerConsumerLock.h"

@interface BlockingConnection()

@property (nonatomic, strong) ProducerConsumerLock* lock;

@end

@implementation BlockingConnection

- (id)initWithURL:(NSURL*) url callback:(void(^)(NSData* data)) callback {
    if (self = [super init]) {
        self.lock = [ProducerConsumerLock new];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSURLRequest* request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10];
            [NSURLConnection connectionWithRequest:request delegate:self];
            while(!self.lock.finished) {
                [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
            }
        });

        [self.lock consume:^(NSData* data) {
            if (callback != nil) {
                callback(data);
            }
        }];
    }
    return self;
}

+ (void) connectionWithURL:(NSURL*) url callback:(void(^)(NSData* data)) callback {
    BlockingConnection* connection;
    connection = [[BlockingConnection alloc] initWithURL:url callback:callback];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.lock produce:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [self.lock produce:nil];
    [self.lock finish];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [self.lock finish];
}

@end 
```

**生产者消费者锁.h**

```
@interface ProducerConsumerLock : NSObject

@property (atomic, readonly) BOOL finished;

- (void) consume:(void(^)(id object)) block;
- (void) produce:(id) object;
- (void) finish;

@end 
```

**生产者消费者锁.m**

```
#import "ProducerConsumerLock.h"

@interface ProducerConsumerLock() {
    dispatch_semaphore_t consumerSemaphore;
    dispatch_semaphore_t producerSemaphore;
    NSObject* _object;
}

@end

@implementation ProducerConsumerLock

- (id)init {
    if (self = [super init]) {
        consumerSemaphore = dispatch_semaphore_create(0);
        producerSemaphore = dispatch_semaphore_create(0);
        _finished = NO;
    }
    return self;
}

- (void) consume:(void(^)(id)) block {
    BOOL finished = NO;
    while (!finished) {
        dispatch_semaphore_wait(consumerSemaphore, DISPATCH_TIME_FOREVER);
        finished = _finished;
        if (!finished) {
            block(_object);
            dispatch_semaphore_signal(producerSemaphore);
        }
    }
}

- (void) produce:(id) object {
    _object = object;
    _finished = NO;
    dispatch_semaphore_signal(consumerSemaphore);
    dispatch_semaphore_wait(producerSemaphore, DISPATCH_TIME_FOREVER);
}

- (void) finish {
    _finished = YES;
    dispatch_semaphore_signal(consumerSemaphore);
}

- (void)dealloc {
    dispatch_release(consumerSemaphore);
    dispatch_release(producerSemaphore);
}

@end 
```

BlockingConnection 类可以从主线程（但这会阻塞主线程）或自定义队列中使用：

```
dispatch_async(queue, ^{
    [BlockingConnection connectionWithURL:url callback:^(NSData *data) {
        if (data != nil) {
            //process the chunk of data as you wish
            NSLog(@"received %u bytes", data.length);
        } else {
            //an error occurred
        }
    }];
    NSLog(@"finished downloading");
}); 
```

如果您有任何意见或建议，欢迎您！

# android - Android 会在 Activity 之前为 Singleton 释放内存吗？

> ID：13733128
> 
> 赞同：1
> 
> 时间：2012-12-05T21:53:13.137
> 
> 标签：android, memory-management, jvm, singleton

我的问题很简单，但内容可能很复杂。例如，我有这个类：

*   ActivityA.class
*   ActivityB.class
*   ActivityC.class
*   单例类

Singleton 是一个单例类模式，例如：

```
public class Singleton {
    static Singleton instance = new Singleton();
    private Singleton();

    List<HeavyObject> listaObjects;
} 
```

我在任何上下文（活动）中使用这个单例。

我的**问题**是：Android 可以在任何时候释放这个类而不释放当前的活动吗？即，我正在观看活动 B，Android 可以销毁（释放）我的类 Singleton 还是仅在发布所有应用程序时才卸载这些类？

或者当一个活动被销毁时，因为类在活动的上下文中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:58:01.407

如果没有对 Singleton 的未完成引用，因为任何引用都是**null**，那么垃圾收集机制将在它执行完它的轮次后将其销毁。这意味着一旦所有引用都为空，它很可能会被销毁，但不会立即销毁。

但是，即使一个 Activity 正在使用 Singleton，它也不会被释放，除非该 Activity 被销毁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:24:26.487

我假设您的 Singleton.instance 实际上是一个静态字段（否则您的示例没有多大意义）。

在这种情况下，您的 Singleton 生命周期将与应用程序进程的生命周期相关联。进程生命周期从调用进程的第一个 Activity（或调用进程实现的服务）开始。

在所有进程 Activity 停止后，该进程可能随时被销毁。

因此，如果您有一个未停止的 Activity，则该实例将保留。但是如果你进程中的所有 Activity 都停止了，那么该进程可以随时被销毁。如果您的 Activity 再次启动，如果进程在此期间被销毁，则必须再次创建实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T21:57:00.897

如果您有耐心观看此[视频](http://www.youtube.com/watch?v=_CruQY55HOk)，您将了解 Android 内存管理的基础知识。

我完全建议你这样做！

# node.js - 为 60 个并发 node.js 服务器选择哪个 Amazon EC2 计划？

> ID：13733130
> 
> 赞同：-2
> 
> 时间：2012-12-05T21:53:20.913
> 
> 标签：node.js, amazon-web-services

我有一个本地 Web 服务，它使用 60 个正在运行的 node.js 服务器。现在我希望将 Web 服务拖到 Amazon EC2 上。
选择运行 60 个并发 node.js 服务器的最佳计划是什么？

据我了解，为了获得最佳性能，需要为一个 CPU 内核运行一个 node.js 服务器。如果我使用计划集群计算八个超大型实例，其中 88 个 EC2 计算单元，性能会出现问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:01:08.153

这将完全取决于您的应用程序的性能限制是什么（即您是否受内存限制、CPU 限制或 IO 限制）？

您最好的起点是查看您当前的服务器并找到等效的 EC2 实例类型。当然，您应该考虑，如果您当前的服务器完全使用更高端的硬件，那么在商用硬件上运行的虚拟化 EC2 上的性能就不会那么好，所以也许您想要使用更高 RAM、CPU 的东西等，而不是您目前拥有的。

当然，上述建议是基于使用单个服务器的。IMO，这实际上不是创建 EC2 来解决的用例。要真正利用 EC2 基础架构，您应该考虑如何横向扩展您的服务。在某些情况下，拥有一组价格较低的实例来执行您的工作，而不是一个单一的大型实例可能更具成本效益。

# jquery - 数据表入门

> ID：13733133
> 
> 赞同：6
> 
> 时间：2012-12-05T21:53:28.907
> 
> 标签：jquery, html, css, datatables

我正在尝试在网站表单上实现 DataTables。我遇到了一些困难，所以我退后一步，尝试在一个非常基本的表上实现 DataTables。我使用的表格直接来自[http://www.datatables.net/usage/](http://www.datatables.net/usage/)。然后我调用了我认为需要的文件，但我仍然无法让 Datatables 在这个基本的表格上工作。我错过了什么？这是“练习”代码：

```
 <script type="text/javascript" charset="utf-8" src="/media/js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="/media/js/jquery.dataTables.js"></script>
<!--<script type="text/javascript" charset="utf-8" src="/media/src/DataTables.js"></script>-->

    <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
    $('#table').dataTable();
    } );
    </script> 
    <style type="text/css" title="currentStyle">
        @import "/media/css/jquery.dataTables.css";
    </style>
    <title>Untitled Document</title>

</head>

    <table id="table" class="display">
    <thead>
        <tr>
            <th>Column 1</th>
            <th>Column 2</th>
            <th>etc</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Row 1 Data 1</td>
            <td>Row 1 Data 2</td>
            <td>etc</td>
        </tr>
        <tr>
            <td>Row 2 Data 1</td>
            <td>Row 2 Data 2</td>
            <td>etc</td>
        </tr>
    </tbody>
</table>
<body>
</body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:21:30.737

js和css文件真的被加载了吗？您可以在 firefox 上使用 firebug 或在 webkit 浏览器中的开发工具中进行调试。（只需右键单击表格并选择“检查元素”）

[此外， Microsoft Ajax CDN 上提供了](http://www.asp.net/ajaxlibrary/cdn.ashx#jQuery_DataTables_Releases_on_the_CDN_6)DataTables 。与 jQuery[相同](http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js)

您可以尝试使用外部链接，看看它是否有效。像这样：

```
<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css"/>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script> 
```

另请注意，使用外部库是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-26T20:30:56.890

您必须在脚本中添加一个属性：“defer”。

```
<script src = "http://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js" defer ></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-11T09:59:09.133

检查是否首先加载了 jQuery。然后检查 dataTables 资产是否正常工作。您可以使用警报功能进行检查，而不是在内部样式表中使用 @import，而是更喜欢使用

```
<link rel="stylesheet" type="text/css" href="filepath/style.css"> 
```

在我的[博客](http://creativetechnocrayts.blogspot.in/2018/03/datatables-options-in-this-article-we.html)中，您可以看到使用数据表的步骤和其他选项。

# django - 将 Socket.IO 添加到现有的 Django/WSGI 项目

> ID：13733137
> 
> 赞同：1
> 
> 时间：2012-12-05T21:53:55.860
> 
> 标签：django, apache, socket.io, mod-wsgi

[这家伙](https://stackoverflow.com/questions/9840175/adding-django-socketio-to-existing-apache-mod-wsgi-django-site)似乎在尝试做同样的事情，但他的问题的答案还不够清楚。我对设置套接字服务器并不是很熟悉，所以在这里我还是有点迷茫。以前有人做过吗？您如何启动套接字服务器并使其保持运行？

我想评论他的帖子并问他是否成功，但我还没有足够的声誉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:24:37.410

我对此的最终解决方案是使用脚本的内置`runserver_socketio`命令，在. 我正在使用 Ubuntu，所以我做了一个新贵配置来保持它的活力。似乎在我的 Apache/WSGI 服务器旁边运行得很好。如果有人有更好的解决方案，请说出来。`manage.py``0.0.0.0:9000`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:42:35.567

我想出的一种方法是使用 apache 使用的 wsgi 来实例化一个只调用 runserver_socketio 命令的线程。当然，这不是最好的方法。但是如果有人找到更好的解决方案。在这篇文章中让我们知道。

```
def init_socketio():
    os.system('python manage.py runserver_socketio 0.0.0.0:9000')

socketio_thread = Thread(target=init_socketio, args=())
socketio_thread.start() 
```

# ruby-on-rails - 禁用 rake 任务

> ID：13733141
> 
> 赞同：13
> 
> 时间：2012-12-05T21:54:08.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

在我们的项目中，如果你运行`rake test`，就会发生可怕的事情；你需要运行`rake spec`。我似乎无法弄清楚如何重新定义`rake test`以仅输出一条建议运行的消息`rake spec`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T00:51:35.713

最后在你的 Rakefile 上：

```
Rake::Task["test"].clear
task 'test' do
    puts "use 'rake spec'"
end 
```

甚至更好

```
Rake::Task["test"].clear
task 'test' do
    Rake::Task["spec"].invoke
end 
```

# java - jar 文件无法运行，提取的类运行良好

> ID：13733147
> 
> 赞同：1
> 
> 时间：2012-12-05T21:54:17.830
> 
> 标签：java, linux, jar, java-native-interface

如果以前有人问过这个问题，我很抱歉，但我找不到任何相同的东西。

我创建了一个简单的 jar(myFailingJar.jar) 文件，其中包含两个类，一个主类和一个从另一个 jar 文件 (CCJAPI.jar) 访问一个类及其函数的简单类。

主类只是实例化简单类，简单类加载一个共享库对象并调用 CCJAPI.jar 中跨 JNI 的函数。

当使用此命令作为 jar 文件运行时，它会失败，因为它在类路径中的 CCJAPI.jar 中找不到类： java -classpath /home/scott:/home/scott/CCJAPI.jar -jar myFailingJar.jar

开始

```
Exception in thread "main" java.lang.NoClassDefFoundError: ccjni/DeviceManager
    at DetachedManager.DetachedDeviceManager.startManager(DetachedDeviceManager.java:24)
    at DetachedManager.Main.main(Main.java:19)
Caused by: java.lang.ClassNotFoundException: ccjni.DeviceManager
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:323)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:268)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:336) 
```

如果我提取 myFailingJar.jar 文件的内容并使用此命令运行它可以工作，据我所知，它只是转到提取的类文件并运行：java -classpath /home/scott:/home/scott/ CCJAPI.jar DetachedManager.Main

开始 ** 开始 ** 成功 = - 现在要崩溃了

这是两个源文件的内容：

主要来源

```
package DetachedManager;

public class Main {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        DetachedDeviceManager devMgr = new DetachedDeviceManager();
        if( devMgr.startManager() )
        {
            System.out.println("Success = - Going to crash now");
        }

    }

} 
```

简单类的来源：

```
package DetachedManager;

import ccjni.DeviceManager;

public class DetachedDeviceManager {

    {
        System.load("/usr/lib/libccJNI.so");
    }

    public boolean startManager()
    {
        System.out.println("Starting");
        DeviceManager.start();
        System.out.println("** Started ** ");
        return true;
    }

} 
```

唯一的区别是一个是在 jar 文件中运行编译的类，另一个是在 jar 文件之外运行它。这一定是我无法弄清楚的某种类型的类路径或路径问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:43:46.430

当我在命令行上指定类路径时，我认为加载到 java 环境中的任何 jar 文件都足以找到 jar 文件，显然不是。我最终不得不将类路径添加到清单文件中，即使该路径是在命令行上指定的。

这是失败的清单：

```
Manifest-Version: 1.0
Created-By: 1.6.0_0 (Sun Microsystems Inc.)
Main-Class: DetachedManager.Main 
```

这是成功的清单

```
Manifest-Version: 1.0
Created-By: 1.6.0_0 (Sun Microsystems Inc.)
Class-Path: lib/CCAPI.jar
Main-Class: DetachedManager.Main 
```

感谢大家的聆听，让我知道在哪里看什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:03:08.653

您可能没有创建**具有正确依赖项**的正确 jar 。使用 eclipse 导出（右键单击项目 -->**导出**），这也将创建所需的清单文件。

![导出罐子](../Images/15b08fc705675cd085b19912deeaae6a.png)

使用它应该会有所帮助。

# mysql - 超过 MySQL 838:59:59 的 TIME 值限制

> ID：13733148
> 
> 赞同：12
> 
> 时间：2012-12-05T21:54:21.457
> 
> 标签：mysql, time, sum

标题可能有点混乱，所以请允许我解释一下。我正在使用表格来记录我的工作日志。每天我都会创建一个条目，说明我从什么时间工作到什么时间，并添加一条评论来描述我所做的事情。

然后，我使用查询来比较时间戳，以准确计算出我那天工作了多少小时和分钟。此外，我使用查询来计算我全年工作的小时数和分钟数的总和。那就是我遇到问题的地方。我的查询如下。

```
SELECT TIME_FORMAT(SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(entry_end_time, entry_start_time)))), '%H:%i') 
AS total FROM entry 
WHERE entry_date BETWEEN '2012-01-01' AND '2012-12-31' AND user_id = 3 
```

默认情况下，MySQL TIME 字段允许 '-838:59:59' 到 '838:59:59' 的时间范围。不过，今年我目前已经记录了 900 多个小时的工作，我希望我的查询结果能够反映这一点。相反，结果是 838:59:59，这是有道理的，因为这是极限。

有什么办法可以解决这个问题，这样查询的结果可以超过 839 小时，还是我必须使用 PHP 之类的东西来遍历整个表并将其全部加起来？如果可能的话，我有点想避免这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T22:34:46.037

我只是检索工作的总秒数，并根据我的应用程序表示层的要求转换为小时/分钟（毕竟，这是一个简单的除以 60 的情况）：

```
<?
  $dbh = new PDO("mysql:dbname=$dbname", $username, $password);
  $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);

  $qry = $dbh->prepare('
    SELECT SUM(TIME_TO_SEC(entry_end_time)-TIME_TO_SEC(entry_start_time))
    FROM   entry 
    WHERE  entry_date BETWEEN :start_date AND :end_date
       AND user_id = :user_id
  ');

  $qry->execute([
    ':start_date' => '2012-01-01',
    ':end_date'   => '2012-12-31',
    ':user_id'    => 3
  ]);

  list ($totalMins, $remngSecs) = gmp_div_qr($qry->fetchColumn(), 60);
  list ($totalHour, $remngMins) = gmp_div_qr($totalMins, 60);

  echo "Worked a total of $totalHour:$remngMins:$remngSecs.";
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T22:19:52.320

看看没有 TIME 限制的[timestampdiff 。](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)即类似（未经测试）：

```
SELECT CONCAT(
        TIMESTAMPDIFF(HOURS, entry_end_time, entry_start_time), 
        ":",
        MOD(TIMESTAMPDIFF(MINUTES, entry_end_time, entry_start_time),60)
      )
AS total FROM entry 
WHERE entry_date BETWEEN '2012-01-01' AND '2012-12-31' AND user_id = 3 
```

concats 并不理想，我相信会有更优雅的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-11T19:07:20.653

一些简单的数学可以解决问题，我硬编码了一个随机的秒数（10000000）

```
SELECT CONCAT(FLOOR(10000000/3600),':',FLOOR((10000000%3600)/60),':',(10000000%3600)%60) 
```

[小提琴](http://sqlfiddle.com/#!9/9eecb/63360)

```
2777:46:40 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-09T14:50:45.867

单独计算天数就足够了。
这是我使用的串联。

我用一个完全复制/可粘贴的示例进行说明，以方便理解我们达到的限制（[TIME 格式](https://dev.mysql.com/doc/refman/5.5/en/time.html)的最大值）
*捆绑了一个免费的独角兽以简化逗号管理*

```
SELECT 'pq7~' AS unicorn
#######################
##  Expected result  ##
#######################
## Total, formatted as days:hh:mm:ss ##
  ,CONCAT(
    FLOOR(TIMESTAMPDIFF(SECOND, '2017-01-01 09:17:45', '2017-03-07 17:06:24') / 86400)
    , ':'
    , SEC_TO_TIME(TIMESTAMPDIFF(SECOND, '2017-01-01 09:17:45', '2017-03-07 17:06:24') % 86400)
  ) AS Real_expected_result 
```

* * *

```
#########################
## Calculation details ##
#########################
## Extracted days from diff ##
  ,FLOOR(TIMESTAMPDIFF(SECOND, '2017-01-01 09:17:45', '2017-03-07 17:06:24') / 86400) AS Real_days
## Extracted Hours/minutes/seconds from diff ##
  ,SEC_TO_TIME(TIMESTAMPDIFF(SECOND, '2017-01-01 09:17:45', '2017-03-07 17:06:24') % 86400) AS Real_hours_minutes_seconds 
```

* * *

```
###################################
## Demo of wrong values returned ##
###################################
  ,TIMESTAMPDIFF(SECOND, '2017-01-01 09:17:45', '2017-03-07 17:06:24') AS Real_seconds_diff

## WRONG value returned. 5.64M is truncated to 3.02 ! ##
  ,TIME_TO_SEC(SEC_TO_TIME(5644119)) AS WRONG_result

## Result is effectively limited to 838h59m59s ##
  ,SEC_TO_TIME(TIMESTAMPDIFF(SECOND, '2017-01-01 09:17:45', '2017-03-07 17:06:24')) AS Limit_hit

## Lights on said limit ##
  ,SEC_TO_TIME( 3020398) AS Limit_value_check1
  ,SEC_TO_TIME( 3020400) AS Limit_value_check2 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-03T08:48:28.717

首先计算天差，然后将其乘以 24*60*60 以将其转换为秒，然后将其添加到 time_to_sec 值结果

```
DATEDIFF(start_date,end_date)*24*60*60 + TIME_TO_SEC(TIMEDIFF(TIME(start_date),TIME(end_date))) 
AS sec_diff 
```

有关更多详细信息，请查看[codebucket-Surpassing time_to_sec() 函数最大限制](http://codebucket.co.in/time_to_sec-function-maximum-limit-in-mysql/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-05T20:12:23.683

```
select  concat(truncate(sum(time_to_sec(TIMEDIFF(hora_fim, hora_ini)))/3600,0), ':', 
TIME_FORMAT(sec_to_time(sum(time_to_sec(TIMEDIFF(hora_fim, hora_ini))) - truncate(sum(time_to_sec(TIMEDIFF(hora_fim, hora_ini)))/3600,0)*3600), '%i:%s'))
as hms from  tb_XXXXXX 
```

# html - 为什么在某些浏览器中无法显示跟随链接？

> ID：13733149
> 
> 赞同：0
> 
> 时间：2012-12-05T21:54:22.397
> 
> 标签：html, redirect, header

当我将以下链接放入任何浏览器（Opera、IE、Firefox、Chrome）时 - html 请求返回`error`.

[http://www.zvg-portal.de/index.php?button=showZvg&zvg_id=21056&land_abk=by](http://www.zvg-portal.de/index.php?button=showZvg&zvg_id=21056&land_abk=by)

当我将此链接嵌入到 html 文档中时，除了 Chrome 之外，每个浏览器都会返回一个网页。

我想这一定是一些标题，它们的设置不同。可能是哪些标题？

# ios - PageViewController 内的 Horizo ntalFlip

> ID：13733153
> 
> 赞同：0
> 
> 时间：2012-12-05T21:54:33.720
> 
> 标签：ios, uipageviewcontroller

我有 UIPageViewController，其中包含几个 UIView，在每个视图中，都可以将 UIView 水平翻转到只包含一个视图的 NavigationController。我实现了这个功能，但似乎翻转只在第一次工作。

这是我首先翻转视图的方式：

```
UINavigationController *navController = [self.storyboard instantiateViewControllerWithIdentifier:@"BackViewController"];

//Pass some data to the back controller
[[[navController viewControllers] objectAtIndex:0] setDataObject:self.dataObject];

navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self.navigationController presentViewController:navController animated:YES completion:nil]; 
```

这就是我将其转回的方法：

```
PageRootController *pageRootController = [[self.storyboard instantiateViewControllerWithIdentifier:@"PageRootController"] initWithData:self.mydata];

pageRootController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self.navigationController presentViewController:pageRootController animated:YES completion:nil]; 
```

就像我说的，这第一次很好用（我可以翻转它然后再翻转），一旦我再次点击它什么也不做。我是 iOS 编程新手，所以如果您需要更多信息，我可以粘贴它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:40:00.763

The problem was that I had a new navigation controller inside each of my views, instead of pushing and popping views from the current one.

# grep - 与grep中的“唯一匹配”相反？

> ID：13733157
> 
> 赞同：4
> 
> 时间：2012-12-05T21:54:44.403
> 
> 标签：grep

有什么方法可以与在 grep（-o 标志）中仅显示字符串的匹配部分相反，即显示除与正则表达式匹配的部分之外的所有内容？

也就是说， -v 标志不是答案，因为它根本不会显示包含匹配项的文件，但我想显示这些行，而不是匹配的行的部分。

**编辑：**我想在 sed 上使用 grep，因为它可以在多行上进行“仅匹配”匹配，其中：

```
cat file.xml|grep -Pzo "<starttag>.*?(\n.*?)+.*?</starttag>" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:01:27.763

这是一个相当不寻常的要求，我认为`grep`不会像那样交替字符串。但是，您可以使用 实现此目的`sed`：

```
sed -n 's/$PATTERN//gp' file 
```

**编辑**以响应 OP 的编辑：

`sed`如果文件足够小以将其全部加载到内存中，您也可以使用 进行多行匹配：

```
sed -rn ':r;$!{N;br};s/<starttag>.*?(\n.*?)+.*?<\/starttag>//gp' file.xml 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T22:01:51.100

您可以在以下方面提供一些帮助`sed`：

```
grep "pattern" input_file | sed 's/pattern//g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:01:08.777

我认为grep没有办法。

如果你使用[ack](http://betterthangrep.com/)，你可以输出 Perl 的特殊变量 $` 和 $' 变量来分别显示比赛前后的一切：

```
ack string --output="\$`\$'" 
```

同样，如果您想输出匹配的内容以及其他文本，您可以使用包含匹配字符串的 $&；

```
ack string --output="Matched: $&" 
```

# plsql - PL/SQL - LAST_VALUE 返回多于一行？

> ID：13733159
> 
> 赞同：0
> 
> 时间：2012-12-05T21:54:54.467
> 
> 标签：plsql, row

我正在做一个学校作业，我需要得到“代码”的最后一个值，这样我就可以插入下一行，这个代码递增。我试着用这种方式把它拉出来。

```
DECLARE

   v_last_code f_shifts.code%TYPE;

BEGIN

   SELECT LAST_VALUE(code) OVER (ORDER BY code)
   INTO v_last_code
   FROM f_shifts;

   DBMS_OUTPUT.PUT_LINE('Last value is: ' || v_last_code);

END; 
```

但是我明白`ORA-01422: exact fetch returns more than one requested number of rows` 了，我不知道为什么以及如何让 last_value 超过一行

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:01:30.537

您可以使用这样的嵌套表。

```
DECLARE
   v_last_code f_shifts.code%TYPE;
   TYPE t_tbl IS TABLE OF f_shifts.code%TYPE;
      -- Above line creates the nested table type of the required type.
   v_tbl T_TBL;
      -- Above line creates the nested table variable.
BEGIN

   SELECT code
   BULK COLLECT INTO v_tbl -- collects all the values, ordered, into the nested table
   FROM f_shifts
   ORDER BY code;

   v_last_code = v_tbl(v_tbl.LAST); -- gets the last values and puts into the variable

   DBMS_OUTPUT.PUT_LINE('Last value is: ' || v_last_code);

END;
/ 
```

# c# - 在表中搜索行并将它们与其他行进行比较

> ID：13733160
> 
> 赞同：0
> 
> 时间：2012-12-05T21:54:57.243
> 
> 标签：c#

我创建了一个应用程序，它解析一些文本文件并将信息提取出来并将其分类到一个表中

这是一个示例

```
NODE    DSP Name    BUS   IDENT   STATION         REF1                  REF2

nnn1_1  S|xxxx|A1   1      1        1             S|yyyyyyyyyy|A1       S|zzzzzzz|A1

mmm1_1  R|xxxx|A1   1      1        1             R|yyyyyyyyyy|A1       R|zzzzzzz|A1

xxx1_2  R|xxxx|A1   1      1        1             R|yyyyyyyyyy|A1       R|zzzzzzz|A1

yyy1_1  R|xxxx|A1   1      1        1             R|yyyyyyyyyy|A1       R|zzzzzzz|A1 
```

我需要检查 3 件事

1.  如果在 DSP Name 中有一个`S|`表示它至少有一个对应的 R|
2.  对应的`R|`有相同的`BUS`, `IDENT`,`STATION`
3.  那`REF1`和`REF2`匹配的名字

我可以通过每次拉入表格一行并建立所有（`S|`）的列表，然后让该列表搜索相应的（`R|`）...我已经有了这些一个数据表，以及一个 CSV 文件

有没有更简单的方法来做到这一点？喜欢 LINQ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:20:40.817

这里有一些东西可以帮助你开始：

```
var dspStartsWithR = From row in myDataTable.Rows
                     Where (string)row("DSP Name").StartsWith("R|")
var dspStartsWithS = From row in myDataTable.Rows
                     Where (string)row("DSP Name").StartsWith("S|") 
```

一旦你得到你的结果，你将不得不做一些 Substring 的组合来去除你不需要的字符，做比较等。我的 C# 生锈了，如果代码不太正确，很抱歉。

# c# - 系统引用未被识别？

> ID：13733164
> 
> 赞同：5
> 
> 时间：2012-12-05T21:55:21.087
> 
> 标签：c#, windows-8, visual-studio-2012

我不完全确定如何更好地表达这个问题，因为我不完全确定这些各种参考问题的核心原因是什么，所以我提前为模糊的标题道歉。

我正在为 Windows 8 编写 VS 2012 Express 应用程序，目标是 winRT (ARM) Surface 平板电脑。

我在引用显然被全部识别时遇到了多个问题。为简单起见，让我举一些例子来说明。

我正在编写一些涉及 SOAP xml 的代码。

首先，如果我通过明确包含“using..”行来引用“System.Xml”（以及 System.Xml.Linq），它似乎实际上并没有做任何事情。

```
using System.Xml.Linq;
using System.Xml;
...
XmlDocument xmldoc = new XmlDocument(); 
```

抛出“找不到类型或命名空间名称‘XmlDocument’”

同样，如果我更明确：

```
using System.Xml.Linq;
using System.Xml;
....
System.Xml.XmlDocument xmldoc = new System.Xml.XmlDocument(); 
```

抛出“名称空间'System.Xml'中不存在类型或名称空间名称'XmlDocument'”以及原始错误消息。

行。我显然错过了一些东西，但是有大量的谷歌搜索结果。

我在安装在 VirtualBox 上的 Windows 8 上运行 VS2012，并认为我的安装可能被水洗了，我首先尝试简单地重新安装 VS2012，然后在这似乎没有任何影响时修复安装。

接下来，我尝试手动添加对相关 .dll 文件的引用。当我尝试这个时，VS 不允许它，说它们已经默认包含在内。

接下来，我尝试为我的项目手动打开 .csproj 文件，并为我似乎缺少的一些引用添加 Reference Include = "... 行（就像我说的，我只是使用 System.Xml 作为示例.) 这似乎没有改变任何东西，因为我得到了完全相同的错误。

接下来，我根据谷歌的直觉进入“添加或删除程序”，然后通过控制面板 -> 添加/删除程序，我打开了 .Net Framework 4.5 高级服务。不幸的是，这似乎没有任何效果。

将各种包含 .dll 的路径添加到“参考路径”似乎也没有任何影响（第一次安装 VS 时该字段为空。）

我难住了。即使在反复重新安装和修复之后，我是否缺少 .dll 或其他文件？

请注意，我至少能够通过引用 Windows.Data.Xml、Windows.Data.Xml.Dom 创建一个 XmlDocument，但该命名空间似乎缺少一些我需要的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:29:34.173

[System.Xml.XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)不适用于 Windows 应用商店应用程序。查看[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.xml.aspx)- 标有绿色购物袋的类、方法和属性是您可以与 Windows 应用商店应用程序一起使用的唯一内容。

至于系统和 Windows 命名空间引用，您可以使用的所有引用都已经是您项目中 .NET for Windows Store apps Reference 的一部分，因此无法添加任何内容。

![在此处输入图像描述](../Images/1fb45fef84c7da2b7e2f40c7a99a0fe9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:04:09.757

您可能需要在项目中实际添加对 dll 的引用。

有关详细信息，请参阅以下链接 [http://msdn.microsoft.com/en-us/library/wkze6zky.aspx](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)

（System.XML 和 System.XML.Linq 应该在 .Net 选项卡中）

# r - maxdrawdown 函数

> ID：13733166
> 
> 赞同：3
> 
> 时间：2012-12-05T21:55:30.790
> 
> 标签：r, finance

在 R 中，我看到有两个包具有 maxdrawdown 函数。

一个是**fTrading**，另一个是**PerformaceAnalytics**。

每个都进行不同的计算。

1.  fTrading 似乎假设价值是资产的价格，因此回撤是在估值中。
2.  这同样适用于 PerformanceAnalytics，只是它以百分比形式给出答案。

是否有一个带有 maxdrawdown 函数的包，它期望 P/L 数据在一个系列中并在此基础上给出回撤？

*例如*，如果您有以下数据

```
c(12,10,5,-4,-2,1,5,6) 
```

最大回撤为：

```
-4 + -2=-6. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T00:01:52.357

编写自己的函数很容易：

```
drawdown <- function(pnl) {
   cum.pnl  <- c(0, cumsum(pnl))
   drawdown <- cum.pnl - cummax(cum.pnl)
   return(tail(drawdown, -1))
}

maxdrawdown <- function(pnl)min(drawdown(pnl)) 
```

（当然，如果您的约定是回撤应该是正数，您可以更改符号并替换`min`为）`max`

```
pnl <- c(12,10,5,-4,-2,1,5,6)
drawdown(pnl)
# [1]  0  0  0 -4 -6 -5  0  0
maxdrawdown(pnl)
# [1] -6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T22:58:28.673

您试图找到PnL`maxDrawDown`的`cumsum`（与帐户值相同）。

```
> library(fTrading)
> maxDrawDown(cumsum(c(0, c(12,10,5,-4,-2,1,5,6))))
$maxdrawdown
[1] 6

$from
[1] 3

$to
[1] 5 
```

# javascript - 浏览器会记住事件吗？

> ID：13733168
> 
> 赞同：0
> 
> 时间：2012-12-05T21:55:50.567
> 
> 标签：javascript, event-handling

我想知道浏览器对脚本当前运行时发生的事件做了什么。浏览器是忽略这些事件还是存储它们并在任何脚本停止运行后执行它们？这取决于事件吗？我对鼠标移动和拖动事件特别感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:00:58.990

你是什​​么意思？触发 javascripts 的事件？

如果是这样，那么是的，触发的脚本被记住并放在调用堆栈上。

Javascript 是单线程的——因此触发新脚本的事件必须等到堆栈上的***所有***其他脚本都完成后才能触发。

因此，如果您的拖动或鼠标移动触发了脚本，那么该触发器将被记住。

# visual-studio-2012 - 如何为数据库项目指定数据库并进行部署？

> ID：13733169
> 
> 赞同：0
> 
> 时间：2012-12-05T21:56:01.897
> 
> 标签：visual-studio-2012, database-project, sql-server-data-tools

我在 VS 2012 中创建了一个数据库项目，但是如何为其指定数据库连接，以便它使用数据库上下文进行 Intellisense 提示和部署？

另外，要部署到目标数据库，我是否一直调用 Publish，还是可以在每次构建时完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:08:49.650

Intellisense 不使用连接字符串来运行，它使用项目中定义的对象（表、视图、列等）。

对于部署，这是通过发布完成的。您可以右键单击您的项目并选择发布...，这将打开发布数据库弹出窗口。从那里，您可以使用配置文件以正确的设置部署到正确的数据库。

创建配置文件后，它们将在您的项目中显示为文件，然后您可以双击它们，然后使用该配置文件发布您的数据库。

至于每次构建项目时发布，我从未尝试过，但这可能可以通过更改项目使用构建的目标来完成。默认情况下，您的项目如下所示：

```
<Project DefaultTargets="Build"
xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
ToolsVersion="4.0"> 
```

尝试将其更改为

```
<Project DefaultTargets="Build;Publish"
xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
ToolsVersion="4.0"> 
```

# wolfram-mathematica - 在 ListPlot 中指定颜色序列

> ID：13733172
> 
> 赞同：5
> 
> 时间：2012-12-05T21:56:08.777
> 
> 标签：wolfram-mathematica

我试图弄清楚如何将 Mathematica 的配色方案与离散数据一起使用。例如，我有一个时间序列列表，形式为

```
s={{{1946,1},{1947,2},{1948,3}},{{1946,-2},{1947,-1.8}}} 
```

等等; 大约有 30 个不同长度的系列。如果我使用 绘制/加入/覆盖这些系列，有没有办法指示 Mathematica 通过从（例如， ）返回的`ListPlot`均匀间隔的颜色为每个图选择颜色？`ColorFunction``ColorData``"Rainbow"`

我如何将它与指令结合起来制作每个情节`Thick`？

```
ListPlot[s,Joined->True,PlotStyle->{Thick,???}] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T22:17:59.010

想象一下这是你的数据——一个包含 30 个不同长度的列表的参差不齐的列表：

```
data = Table[.5 k + RandomReal[1, RandomInteger[{8, 14}]], {k, 30}]; 
```

这是你需要的吗？

```
ListPlot[data, Joined -> True, 
         PlotStyle -> Thread@{Thick, ColorData["Rainbow"] /@ Range[0, 1, 1/29]}] 
```

![在此处输入图像描述](../Images/e4865618be6e88b97f07ca8b2ceadc78.png)

# c++ - 抽象工厂和类作为第一类对象

> ID：13733174
> 
> 赞同：3
> 
> 时间：2012-12-05T21:56:14.443
> 
> 标签：c++, prototype, abstract-factory, first-class

一个理论问题。我正在阅读 Gof 的设计模式，抽象工厂部分。这本书提到了像原型一样实现这种模式的可能性，或者，如果语言允许的话，使用存储类而不是对象的原型。

我明白了这一点；例如在Java 或Smalltalk 中，类也是对象（在Java 中它们实际上是类Class 的实例）。因此，我们可以将它们存储在一个类中，并在需要时调用这些类的实例的创建。

在 C++ 中，类不是第一类对象。因此，我们不应该能够遵循这种方法。但是，我们不能在具体工厂中声明嵌套类，并使用调用它们的构造函数（并返回它们的实例）的方法吗？最终结果将与 Java 或 Smalltalk 等其他语言相同。我对吗？

感谢您的关注。

# javascript - Bootstrap Typeahead 键盘在 Chrome 中不起作用

> ID：13733177
> 
> 赞同：0
> 
> 时间：2012-12-05T21:56:20.197
> 
> 标签：javascript, twitter-bootstrap

嗨，我最近通过 Bootstrap 设置了一个 Typeahaed，并且键盘（选项卡、向上箭头、向下箭头）在 Chrome 中不起作用。它适用于 IE、Firefox 和 Safari 思想。

这是演示：[http ://cruiseoutlook.com/test](http://cruiseoutlook.com/test)

```
<input type="text" class="span3" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source='["Adelaide, Australia", "Agadir, Morocco", "Airlie Beach, Australia", "Ajaccio, Corsica", "Akaroa, New Zealand", "Alanya, Turkey", "Albany, Australia", "Alesund, Norway", "Alexandria, Egypt", "Alicante, Spain", "Almeria, Spain", "Amsterdam, Netherlands", "Anchorage, Alaska", "Antalya, Turkey", "Antigua, Island", "Aqaba, Jordan", "Argostoli, Greece", "Arica, Chile", "Arrecife, Canary Islands", "Aruba, Island", "Ashdod, Israel", "Astoria, Oregon", "At Sea, Sea", "Athens, Greece", "Auckland, New Zealand", "Baie Comeau, Canada", "Bali, Indonesia", "Baltimore, Maryland", "Bandar Seri Begawan, Brunei", "Bangkok (Laem Chabang), Thailand", "Bar Harbor, Maine", "Barbados, Island", "Barcelona, Spain", "Bari, Italy", "Bay of Islands, New Zealand", "Bayonne, New Jersey", "Beijing (Tianjin), China", "Belize, Belize", "Bergen, Norway", "Berlin, Germany", "Bilbao, Spain", "Boca da Valeria, Brazil", "Bodrum, Turkey", "Bombay, India", "Bonaire, Island", "Bora Bora, French Polynesia", "Bordeaux, France", "Boston, Massachusetts", "Bridgetown, Barbados", "Brindisi, Italy", "Brisbane, Australia", "Brugge, Belgium", "Buenos Aires, Argentina", "Burnie, Australia", "Busan, South Korea", "Busan, South Korea", "Busan, South Korea", "Buzios, Brazil", "Cabo Frio, Brazil", "Cabo San Lucas, Mexico", "Cadiz, Spain", "Cagliari, Italy", "Cairns, Australia", "Cairo, Egypt", "Cancun, Mexico", "Cannes, France", "Cape Horn, Chile", "Cartagena, Spain", "Cartagena, Colombia", "Casablanca, Morocco", "Castaway Cay, Bahamas", "Castries, Saint Lucia", "Catalina Island, California", "Catania, Italy", "Cephalonia, Greece", "Champagne Bay, Vanuatu", "Charleston, South Carolina", "Charlottetown, Prince Edward Island", "Chennai, India", "Cherbourg, France", "Cochin, India", "Colombo, Sri Lanka", "Colon, Panama", "Como, Italy", "Constanta, Romania", "Copenhagen, Denmark", "Corfu, Greece", "Corinto, Nicaragua", "Corner Brook, Newfoundland", "Costa Maya, Mexico", "Cozumel, Mexico", "Crete, Greece", "Curacao, Island", "Da Nang, Vietnam", "Darwin, Australia", "Delphi, Greece", "Devils Island (Isle Royale), French Guiana", "Dravuni Island, Fiji", "Dubai, United Arab Emirates", "Dubai, United Arab Emirates", "Dublin, Ireland", "Dubrovnik, Croatia", "Dunedin, New Zealand", "Easo (Lifou), New Caledonia", "Ensenada, Mexico", "Ephesus, Turkey", "Esperance, Australia", "Falmouth, Jamaica", "Fiordland National Park, New Zealand", "Florence, Italy", "Fort Lauderdale, Florida", "Fort-De-France, Martinique", "Freeport (Grand Bahama Island), Bahamas", "Fuerte Amador, Panama", "Fuerteventura, Canary Islands", "Galle, Sri Lanka", "Gallipoli, Italy", "Galveston, Texas", "Gaspe, Canada", "Genoa, Italy", "Gibraltar, England", "Gijon, Spain", "Glasgow, Scotland", "Gloucester, Massachusetts", "Gran Canaria, Spain", "Gran Canaria, Canary Islands", "Grand Cayman, Cayman Islands", "Grand Turk, Turks and Caicos", "Grenada, Island", "Guadeloupe, Island", "Gustavia, St. Barts", "Gythion, Greece", "Haifa, Israel", "Hainan, China", "Haines, Alaska", "Half Moon Cay, Bahamas", "Halifax, Nova Scotia", "Halong Bay, Vietnam", "Hamilton, Bermuda", "Hamilton Island, Australia", "Helsinki, Finland", "Hilo, Hawaii", "Ho Chi Minh City (Phu My), Vietnam", "Hobart, Tasmania", "Hong Kong, China", "Honolulu, Hawaii", "Horta, Portugal", "Huahine, French Polynesia", "Huatulco, Mexico", "Hubbard Glacier, Sea", "Ibiza, Spain", "Icy Strait Point, Alaska", "Ilha Grande, Brazil", "Ilhabela, Brazil", "Ilheus, Brazil", "Inside Passage, Sea", "Iraklion, Greece", "Isla Roatan, Honduras", "Isle of Pines, New Caledonia", "Istanbul, Turkey", "Ixtapa, Mexico", "Jacksonville, Florida", "Jerusalem, Israel", "Juneau, Alaska", "Kailua Kona, Hawaii", "Kangaroo Island, Australia", "Katakolon, Greece", "Kauai, Hawaii", "Ketchikan, Alaska", "Key West, Florida", "Kings Wharf, Bermuda", "Kingstown, Saint Vincent", "Ko Samui, Thailand", "Kochi, India", "Koper, Slovenia", "Korcula, Croatia", "Kotor, Montenegro", "Kuala Lumpur (Port Klang), Malaysia", "Kyoto, Japan", "La Baie, Canada", "La Coruna, Spain", "La Gomera, Canary Islands", "La Romana, Dominican Republic", "La Serena, Chile", "Labadee, Haiti", "Lahaina, Hawaii", "Langkawi, Malaysia", "Lanzarote, Canary Islands", "Las Palmas, Canary Islands", "Lerwick, Scotland", "Lima, Peru", "Limassol, Cyprus", "Limon, Costa Rica", "Lisbon, Portugal", "London, England", "Los Angeles, California", "Los Cristianos, Canary Islands", "Luganville, Vanuatu", "Mackay, Australia", "Madeira, Portugal", "Mahogany Bay, Honduras", "Malacca, Malaysia", "Malaga, Spain", "Male, Maldives", "Manaus, Brazil", "Manta, Ecuador", "Marmaris, Turkey", "Maui, Hawaii", "Melbourne, Australia", "Messina, Italy", "Miami, Florida", "Mindelo, Cape Verde", "Miyazaki, Japan", "Monte Carlo, Monaco", "Montego Bay, Jamaica", "Monterey, California", "Montevideo, Uruguay", "Montreal, Quebec", "Montreal, Quebec", "Moorea, French Polynesia", "Mormugao, India", "Muscat, Oman", "Mykonos, Greece", "Mystery Island (Aneityum), Vanuatu", "Nadi (Port Denarau), Fiji", "Nafplion, Greece", "Nagasaki, Japan", "Nanaimo, British Columbia", "Nanaimo, British Colombia", "Napier, New Zealand", "Naples, Italy", "Nassau, Bahamas", "Natal, Brazil", "Nessebar, Bulgaria", "New Orleans, Louisiana", "New York, New York", "Newcastle, Australia", "Newport, Rhode Island", "Nha Trang, Vietnam", "Nice, France", "Norfolk, Virginia", "Noumea, New Caledonia", "Ocho Rios, Jamaica", "Odessa, Ukraine", "Oranjestad, Aruba", "Orlando, Florida", "Oslo, Norway", "Pago Pago, American Samoa", "Palma de Mallorca, Spain", "Panama Canal, Sea", "Panama City, Panama", "Parati, Brazil", "Parintins, Brazil", "Paris, France", "Patmos, Greece", "Penang, Malaysia", "Perth, Australia", "Phuket, Thailand", "Picton, New Zealand", "Ponta Delgada, Azores", "Port Blair, India", "Port Canaveral, Florida", "Port Douglas, Australia", "Port Elizabeth, Saint Vincent", "Port Lincoln, Australia", "Port of Spain, Trinidad", "Port Said, Egypt", "Portimao, Portugal", "Portland, Maine", "Porto, Portugal", "Porto Belo, Brazil", "Portofino, Italy", "Princess Cays, Bahamas", "Progreso, Mexico", "Provence, France", "Puerto Caldera (Puntarenas), Costa Rica", "Puerto Chacabuco, Chile", "Puerto Chiapas, Mexico", "Puerto Limon, Costa Rica", "Puerto Madryn, Argentina", "Puerto Montt, Chile", "Puerto Quetzal, Guatemala", "Puerto Vallarta, Mexico", "Punta Arenas, Chile", "Punta Del Este, Uruguay", "Puntarenas, Costa Rica", "Quebec City, Quebec", "Raiatea, French Polynesia", "Rangiroa, French Polynesia", "Ravenna, Italy", "Recife, Brazil", "Reykjavik, Iceland", "Rhodes, Greece", "Rio De Janeiro, Brazil", "Rome, Italy", "Roseau, Dominica", "Rotterdam, Netherlands", "Safaga, Egypt", "Saguenay, Canada", "Saint Croix, Virgin Islands", "Saint John, New Brunswick", "Saint John, Virgin Islands", "Saint Kitts, Island", "Saint Lucia, Island", "Saint Maarten, NA", "Saint Petersburg, Russia", "Saint Pierre, Miquelon", "Saint Thomas, Virgin Islands", "Salvador, Brazil", "Samana, Dominican Republic", "San Blas Islands, Panama", "San Diego, California", "San Francisco, California", "San Juan, Puerto Rico", "San Juan del Sur, Nicaragua", "Santa Barbara, California", "Santa Margherita, Italy", "Santa Marta, Colombia", "Santarem, Brazil", "Santiago, Chile", "Santo Tomas, Guatemala", "Santorini, Greece", "Sao Paulo, Brazil", "Sardinia, Italy", "Sardinia, Italy", "Savusavu, Fiji", "Scarborough, Trinidad and Tobago", "Seattle, Washington", "Sevastopol, Ukraine", "Seville, Spain", "Shanghai, China", "Sicily, Italy", "Sihanoukville, Cambodia", "Singapore, Singapore", "Sinop, Turkey", "Sitka, Alaska", "Skagway, Alaska", "Sochi, Russia", "Sorrento, Italy", "Sousse, Tunisia", "Southampton, England", "Split, Croatia", "Stanley, Falkland Islands", "Stirrup Cay (CocoCay), Bahamas", "Stockholm, Sweden", "Suva, Fiji", "Sydney, Nova Scotia", "Sydney, Australia", "Tahiti, French Polynesia", "Tallinn, Estonia", "Tampa, Florida", "Tangier, Morocco", "Tauranga, New Zealand", "Tenerife, Canary Islands", "Thorshavn, Faroe Islands", "Tokyo, Japan", "Tortola, British Virgin Islands", "Townsville, Australia", "Trabzon, Turkey", "Trapani, Italy", "Trieste, Italy", "Trujillo, Peru", "Tunis, Tunisia", "Ushuaia, Argentina", "Valencia, Spain", "Valletta, Malta", "Valparaiso, Chile", "Vancouver, British Columbia", "Varna, Bulgaria", "Venice, Italy", "Victoria, British Colombia", "Victoria, Malta", "Vigo, Spain", "Vila, Vanuatu", "Vladivostok, Russia", "Volos, Greece", "Wellington, New Zealand", "Yalta, Ukraine", "Yangon, Myanmar"]'> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:37:10.190

显然，jQuery 1.8.0 有一个问题会导致 typeahead 在 Chrome 中行为异常。[（但是我在1.8.1 更新日志](http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/)和[1.8.2 更新日志](http://blog.jquery.com/2012/09/20/jquery-1-8-2-released/)中都找不到该更改）

# eclipse - 如何在 Eclipse 中将 jar 文件添加到从 SVN 导入的项目中

> ID：13733185
> 
> 赞同：0
> 
> 时间：2012-12-05T21:56:45.657
> 
> 标签：eclipse, svn, subversive

在发布此问题之前，我没有看到对此主题的任何参考。我刚刚将颠覆性插件添加到我的 Eclipse Juno IDE 中，我的问题是在我从我的 SVN 存储库中导入一个项目并且现在在 eclipse 中设置了项目之后，如何将 JAR 文件添加到代码需要引用的这个项目中？

我根本看不到项目的配置构建路径。我是颠覆性的新手，真的可以使用一些帮助。我在 Netbeans 1.7.2 中尝试过，它使您能够将库添加到项目中，但我在 Eclipse 中看不到它。

任何帮助/方向将不胜感激。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:29:22.710

将 jars 添加到项目构建路径与 SVN 和颠覆性无关。您可以像在没有颠覆性的情况下那样添加 jar：项目 - 属性 - Java Buid Path - 库 - 添加 JAR/添加外部 JAR。

# java - 爪哇：f21.Person@373ee92

> ID：13733189
> 
> 赞同：0
> 
> 时间：2012-12-05T21:56:56.793
> 
> 标签：java, tostring

f21.Person1@373ee92

好的 f21 代表包。Person 类类型。

谁能用简单的术语解释为什么有一个“@”后跟随机字符。以及随机字符代表什么（在内存中的位置？）。

当我执行以下操作并且尚未声明 toString() 方法时，我会收到此消息：

```
System.out.println(myObject); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:58:12.287

如果你没有在你的类中重写 toString() 方法，Object 类的 toString() 将被调用。

```
System.out.println(myObject);// this will call toString() by default. 
```

下面是**[java.Lang.Object](http://www.docjar.com/html/api/java/lang/Object.java.html)**类中 toString的**实现。**

> ```
>  The {@code toString} method for class {@code Object}
>        returns a string consisting of the name of the class of which the
>        object is an instance, the at-sign character `{@code @}', and
>        the unsigned hexadecimal representation of the hash code of the
>        object 
> ```

```
 public String toString() {
   return getClass().getName() + "@" + Integer.toHexString(hashCode());
  } 
```

所以，同样适用于`21.Person@373ee92`：

21.Person(完全限定的类名) + @ + 37ee92(hasgcode 的十六进制版本)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:58:19.647

它调用 toString() 实现，如果您没有覆盖此方法，那么它将调用`Object`的版本，实现如下

```
 public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
  } 
```

它是该实例的哈希码的十六进制版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:58:42.847

如果您不覆盖该`toString()`方法，则使用 by 提供的`Object`方法。它执行[以下](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)操作：

> class的`toString`方法`Object`返回一个字符串，该字符串由对象作为实例的类的名称、at 符号字符`@`和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
> getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

“随机”字符是对象的哈希码，以十六进制表示。

# javascript - 谷歌距离矩阵服务的替代品？

> ID：13733191
> 
> 赞同：13
> 
> 时间：2012-12-05T21:56:59.337
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在开发一个报价计算器，它将根据不同地点之间的里程（以及其他条件）生成报价。直到两天前，我还计划使用谷歌的距离矩阵服务，直到我发现：

> **谷歌地图的显示**
> 
> 距离矩阵服务的使用必须与谷歌地图上的信息显示相关；例如，在请求并在地图上显示这些目的地之前，确定彼此在特定驾驶时间内的起点-目的地对。禁止在不显示 Google 地图的应用程序中使用该服务。

我曾希望只使用我需要的服务：

> ***- 最多三个不同位置之间的道路测量距离***
> 
> ***- 可在输入框上使用的地址自动完成服务***
> 
> ***- 准确、可靠的服务，可以提供多条不同的路线以创建平均距离***

我知道还有其他可用的方法，但我怀疑很多方法可以像谷歌一样准确和可靠，我发现为了我需要的目的找到与谷歌地图相媲美的任何东西都具有挑战性。

所以，除非你们能指出我可以使用的东西，否则我唯一的选择是在我不需要的地方使用谷歌地图，增加额外的加载时间并改变我计划的用户体验设计。

是否有任何免费服务可满足我的需求（最好使用 JS API）？

*稍有不同*

如果我确实使用了谷歌地图，它是否必须立即显示，或者我可以隐藏它并添加一个“在地图上显示”选项，然后显示 .slideToggle？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T05:29:03.383

不幸的是，对于距离矩阵 API，Google 严格要求您需要在应用程序中显示地图：

> > 距离矩阵 API 的使用必须与谷歌地图上的信息显示相关；例如，在请求并在地图上显示这些目的地之前，确定彼此在特定驾驶时间内的起点-目的地对。禁止在不显示 Google 地图的应用程序中使用该服务。 [http://developers.google.com/maps/documentation/distancematrix/#Limits](http://developers.google.com/maps/documentation/distancematrix/#Limits)

但是，我认为对您的需求更有用的是[Google Directions API](http://developers.google.com/maps/documentation/directions/)。路线 API 允许您满足您的要求。

> 总距离在请求的 JSON 对象中返回。
> 
> 您可以选择尽可能多的不同位置来查找使用搜索请求中的[航点之间的距离。](http://developers.google.com/maps/documentation/directions/#Waypoints)[然后在每个“腿](http://developers.google.com/maps/documentation/directions/#Legs)”中返回这些位置之间的距离。
> 
> `alternatives`您可以通过在搜索请求中指定参数来获取从多条不同路线到目的地的平均距离`true`。请参阅：http: [//developers.google.com/maps/documentation/directions/#RequestParameters](http://developers.google.com/maps/documentation/directions/#RequestParameters)
> 
> 最重要的是，使用此服务时，Google 没有要求在您的应用程序中显示 Google 地图。

如果您选择使用它，我还应该提到这项服务的缺点。

1.  处理您的请求所需的请求时间将比使用距离矩阵 API 的时间稍长。
2.  您将在返回对象中有很多不需要的数据，例如根据您的应用程序要求，返回的 json 对象中的路由的各个“步骤”不是必需的。

考虑到这些缺点，我仍然强烈建议您查看应用程序的 Directions API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:47:09.293

我不知道谷歌静态地图是否算作地图，但它应该算作地图，因为它是地图并且来自谷歌。您可以计算路线，然后将其显示为静态地图中的图像。不需要额外的地图加载时间。只有一张图。

[https://developers.google.com/maps/documentation/staticmaps/#Paths](https://developers.google.com/maps/documentation/staticmaps/#Paths)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-12T12:50:13.487

许多开发人员已经能够使用 Bing 地图 REST 路由服务[http://msdn.microsoft.com/en-us/library/ff701705.aspx](http://msdn.microsoft.com/en-us/library/ff701705.aspx)做到这一点。它需要更多的开发，但效果很好。这是一个示例：[http ://code.msdn.microsoft.com/Bing-Maps-trip-optimizer-c4e037f7](http://code.msdn.microsoft.com/Bing-Maps-trip-optimizer-c4e037f7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T00:58:46.783

Streetmap 和 arcserver 可以解决车辆路线问题，但它不是免费的。在此处阅读更多信息：http: [//www.esri.com/data/streetmap](http://www.esri.com/data/streetmap)。

# triggers - 在特定的点击顺序后触发事件

> ID：13733198
> 
> 赞同：5
> 
> 时间：2012-12-05T21:57:25.763
> 
> 标签：triggers, jquery

对于我目前正在进行的一个项目，我试图达到以下目标：

我有一个简单的页面，在这个页面上有 4 个隐藏和不可见的元素，它们的格式简单如下：

```
<a href="#" class="link_1"></a>
<a href="#" class="link_2"></a>
<a href="#" class="link_3"></a>
<a href="#" class="link_4"></a> 
```

基本上我想要的只是构建一种复活节彩蛋，因此当用户以特定顺序单击这些按钮时，即 link_4 -> link_1 -> link_3 -> link_2 它会触发某个事件，无论这可能是什么。

当然，只有在正确的点击组合/顺序完成后才能触发该事件。

任何想法如何使用 jQuery 来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T22:00:29.117

```
var click_order = [];
$('a').click(function (e) {
    click_order.push($(this).index());
    if (click_order.slice(-4) == '3,0,2,1') {
        // easter egg stuff
    }
}); 
```

# javascript - 如何在 node.js + socket.io 中创建自定义客户端事件

> ID：13733201
> 
> 赞同：6
> 
> 时间：2012-12-05T21:57:34.827
> 
> 标签：javascript, node.js, socket.io

我刚开始使用 node.js，据我所知，客户端与服务器的通信方式是：

```
//Client Code 1
var iosocket = io.connect();
iosocket.on('connect', function () {
   iosocket.send("Here's some info");
}); 
```

当收到“消息”事件时，服务器会意识到这一点：

```
//Server Code 1
var socketio = require('socket.io');
var io = socketio.listen(server);
io.sockets.on('connection', function (client) {    
    client.on('message', function(msg) {
        //msg== "Here's some info"
    }
}); 
```

现在我希望客户端能够提供几个不同的事件，例如：

```
//Server Code 2
client.on('buttonClicked', function() { ...
client.on('nameChanged', function(newName) { ... 
```

但我很难弄清楚如何。使用我所拥有的部分，我能想出的唯一解决方案是发回消息，但让它们包含信息的键值对：

```
//Server Code 3
client.on('message', function(msg) {
   kvp = message.split(',');
   if( kvp[0] == 'buttonClicked' )
      ...
   else if( kvp[0] == 'nameChanged' )
      ...
} 
```

但我确信有一种正确的方法可以做到这一点，我还没有在任何示例中看到过。我希望有类似于服务器如何生成它想要使用的任何事件的东西：

```
//Server Code 4
io.sockets.emit('serverCustomEvent', eventData); 
```

依次由客户端使用：

```
//Client Code 4
iosocket.on('serverCustomEvent', function(data) {
    //process data
}); 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T22:07:18.830

您可以`emit`在客户端上使用将自定义消息发送到服务器。

```
iosocket.emit('serverCustomEvent', data); 
```

并在服务器上

```
io.sockets.on('connection', function(socket) {
    socket.on('serverCustomEvent', login);
}); 
```

# java - 访问者和复合模式

> ID：13733203
> 
> 赞同：0
> 
> 时间：2012-12-05T21:57:50.070
> 
> 标签：java, design-patterns

我正在努力将访问者和 Java 中的复合模式结合起来。

我有一个 Composite 的 Element 接口。它只有accept方法。

我有一个抽象类 Composite 来处理子管理功能（添加、删除和 getChild）。我想在 compiste 类中定义 acccept 方法，以避免在每个子类中都这样做。有没有办法做到这一点？

```
public abstract class Composite implements Element {

    protected List<Element> elements;

    public Composite() {
        elements = new ArrayList<Element>();
    }

    public void add(Element e) {
     elements.add(e);   
    }

    public void remove(Element e) {
        elements.remove(e);
    }

    public Element getChild(int i) {
        return elements.get(i);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:03:50.653

这不是你要找的吗？

```
public abstract class Composite implements Element {

    protected List<Element> elements;

    public void accept(Visitor visitor) {
        for(Element element: elements) {
            element.accept(visitor);
        }
    }

} 
```

# javascript - Google Maps v3 - 放大/缩小能够重复（和重新定位）？

> ID：13733205
> 
> 赞同：0
> 
> 时间：2012-12-05T21:57:55.860
> 
> 标签：javascript, google-maps-api-3, dom-events

我有一个包含多个 POLYGON 区域的谷歌地图。我已经想出了如何通过单击多边形来放大，以及如何使用“dblclick”侦听器来缩小并删除它们的侦听器......

一旦你点击放大，然后双击缩小，它不允许我再次重复该功能。有没有办法多次放大和缩小？

这是我的代码：

```
 //POLYGON ZONE 1 ================================ 
  var zone1;

  var triangleCoords = [
    new google.maps.LatLng(29.738692, -95.399331),
    new google.maps.LatLng(29.738688, -95.394781),
    new google.maps.LatLng(29.737048, -95.394781),
    new google.maps.LatLng(29.737048, -95.399331)
  ];

  // Construct the polygon
  // Note that we don't specify an array or arrays, but instead just
  // a simple array of LatLngs in the paths property
  zone1 = new google.maps.Polygon({
    paths: triangleCoords,
    strokeColor: "#00AEEF",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#00AEEF",
    fillOpacity: 0.05,
  });

  zone1.setMap(map);
  zone1._myBounds = new google.maps.LatLngBounds();
  for (var i=0; i<triangleCoords.length; i++)
  {
     zone1._myBounds.extend(triangleCoords[i]);
  }

  var listener = google.maps.event.addListener(zone1, 'click', function () {
      map.fitBounds(zone1._myBounds);
      google.maps.event.removeListener(listener); 
  });

    var listener2 = google.maps.event.addListener(zone1, 'dblclick', function() {
    if (map.getZoom() > 16) map.setZoom(13); 
    //map.setZoom(map.getZoom() -1);
    //map.setCenter(map.getCenter());
    google.maps.event.removeListener(listener2); 
    google.maps.event.addListener(zone1, 'click', function (){
        map.fitBounds(zone1._myBounds);});
  }); 
```

对于我的其他 POLYGON 区域，我是否还必须更改变量名称才能使其工作？

此外，返回中心似乎无法正常工作。如果我需要在一个单独的问题中提出这个问题，我会的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:13:35.730

直接的问题是您在 dblclick 上添加的单击侦听器中没有做同样的事情：

```
google.maps.event.addListener(zone1, 'click', function (){
    map.fitBounds(zone1._myBounds);}); 
```

对比原版：

```
var listener = google.maps.event.addListener(zone1, 'click', function () {
  map.fitBounds(zone1._myBounds);
  google.maps.event.removeListener(listener); 
}); 
```

# javascript - 谁拥有javascript中的子框架名称，父级还是子级？

> ID：13733211
> 
> 赞同：1
> 
> 时间：2012-12-05T21:58:03.843
> 
> 标签：javascript, frame, rename

使用网页子框架时，创建者（父级）通常给每个子框架一个“名称”，然后可以使用类似 mainWindow.dataFrame 的语法来引用这些框架。我遇到了一个特定于浏览器的问题，我已经追踪到这样一个事实，即从外部站点加载的子框架将其窗口重命名为与使用的父级不同的窗口。这会导致 Google Chrome 出现问题，但不会导致 Firefox 出现问题。

Firefox 似乎将同一子框架的父名和子名分开。这使父 javascript 可以继续按预期工作，而子 javascript 可以根据需要使用自己的名称。

Chrome 似乎有不同的想法，并且子框架只有一个名称。一旦子级重命名框架，父级就不能再按名称访问它。即使将不同的内容加载到子帧中，“损坏”仍然存在。

我还没有调查其他浏览器的作用。

我知道此描述涉及跨域安全问题。一旦异地子加载进来，我们就无法访问子框架的内容。但是让孩子从父母一方重命名窗口似乎也是一个潜在的安全问题。

为了解决这个问题，我不得不停止使用 mainWindow.dataFrame 语法，现在在将新数据加载到子帧时使用带有固定索引的 frames[] 数组 - 丑陋但可行。我想我正在寻找确认没有更好的解决方法。很高兴知道谁是“正确的”，Firefox 或 Google。我投票给火狐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:56:37.590

请忘记我对问题的初步分析。当我试图简化我正在修复的复杂代码时，我意识到更多正在发生的事情。问题似乎是 Firefox 中的意外行为。该框架只有一个名称用于父级和子级。当任一上下文要求框架的 .name 属性时，您会得到相同的响应。

奇怪之处与 javascript 维护的自动创建的变量/属性有关。如果 <frame> 是使用 name="subName" 属性创建的，那么 self.subName 会为您提供对该框架的引用。如果父级或子级更改框架的名称，如 self.subName.name=newName，则新的自动变量/属性 self.newName 会弹出并引用原始框架。在 Chrome 下，旧的变量/属性会消失。在 Firefox 下，旧名称不会消失（！！！），顶级窗口的两个属性继续存在，并且都引用同一个子框架。这一切都解释了为什么我的原始代码适用于 Firefox，但在 Chrome 上却失败了。

# asp.net-mvc - 可以在服务器端设置 WebGrid 列吗？

> ID：13733214
> 
> 赞同：0
> 
> 时间：2012-12-05T21:58:14.667
> 
> 标签：asp.net-mvc, webgrid

我了解如何在视图中使用 Razor 语法添加列，但我想知道是否有办法在服务器端创建 WebGridColumns 并将其交给 razor 端的 WebGrid.GetHtml 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:01:50.273

Razor 在服务器上运行，因此当您在视图中声明列时，网格已在服务器上创建。但如果`on the server`你的意思是`on the controller`那是一个不同的故事。但是，是的，当然，你可以做到。只需在视图模型（由控制器操作传递给视图的类）上定义一个属性，它是列的集合。

# wget - wget 排除某些命名结构

> ID：13733216
> 
> 赞同：0
> 
> 时间：2012-12-05T21:58:20.283
> 
> 标签：wget

我的公司有一个本地生产服务器，我想从中下载具有特定命名约定的文件。但是，我想根据名称的一部分排除某些元素。例子：

*   文件夹client_1234
*   文件 1234.jpg
*   文件 1234.ai
*   文件 1234.xml
*   文件夹client_1234569

当 wget 运行时，我希望它绕过所有带有“1234”的文件夹和文件。我已经研究并遇到了“--exclude list”，但这似乎只适用于目录，而“reject = rejlist”似乎适用于文件扩展名。我在这里的手册中遗漏了什么[吗](http://www.gnu.org/software/wget/manual/wget.html#Top)

编辑： [这](http://www.gnu.org/software/wget/manual/wget.html#Recursive-Accept_002fReject-Options)应该工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:10:50.613

`wget`有选项`-A <accept_list>`和`-R <reject_list>`，从手册页来看，似乎允许后缀或模式。`-I <include_dirs>`这些与and选项是分开的`-X <exclude_dirs>`，正如您所注意到的，它们仅处理目录。鉴于您列出的示例，您`-A "folder client_1234*" -A "file 1234.*"`可能需要一些类似的东西，尽管我不完全确定这正是您所追求的命名约定......

# r - 使用 R 从具有明显中断的大系列中提取迷你系列（绘制时）

> ID：13733228
> 
> 赞同：2
> 
> 时间：2012-12-05T21:59:36.370
> 
> 标签：r, time-series, data-manipulation

这是我的数据：

```
data1 <- c(726, 718, 699, 737, 743, 734, 726, 722, 715, 714, 752, 750, 
749, 746, 743, 734, 725, 717, 717, 708, 756, 753, 752, 746, 744, 
740, 737, 732, 728, 728, 720, 720, 714, 703, 702, 697, 758, 753, 
753, 746, 743, 734, 720, 706, 697, 761, 744, 749, 741, 738, 738, 
732, 725, 720, 712, 782, 778, 776, 773, 772, 770, 770, 769, 769, 
766, 763, 763, 756, 755, 753, 750, 749, 746, 737, 723, 711, 702, 
685, 782, 779, 778, 778, 776, 776, 775, 772, 770, 770, 766, 763, 
761, 756, 752, 738, 735, 729, 715) 
```

这给出了使用`plot(data1)`as 的图：

![在此处输入图像描述](../Images/0b5b594da10340bed21464e834da7c05.png)

如何使用 R 分离**八个**不同的趋势？我可以`identify(data1)`手动使用和标记它们（班次）并使用索引来隔离它们，但在我的情况下这是不可能的，因为我正在处理许多此类图。我想以编程方式提取单独的行。请让我知道是否有统计技术（时间序列等）可以识别趋势和标签的变化并返回**八个**系列。

**编辑**

我应该明确指出，需要确定整个数据集中的系列数量。样本数据中的序列数恰好是 8 个。但是除非我绘制数据并手动识别中断，否则我不会在每种情况下都知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:32:30.667

我认为 Kiril 就在这里（+1）。这是一个重要的研究/知识领域，有时称为变更点或断点分析。相关的 R 包包括`strucchange` `changepoint`Kiril 提到的`bcp`.

`strucchange`当被告知有多少变化时，`breakpoints()`它使用最小二乘回归来估计变化的位置（这在这里没有帮助。）

`changepoint`正如 Kiril 所说，有几种算法，包括 Scott 和 Knott 的 Binary Segmentation、Auger 和 Lawrence 的 Segment Neighbourhoods 以及 Killick 等人的 Pruned Exact Linear Time (PELT) 算法。它是一个很棒的软件包，但我非常有限的经验是这些功能将需要大量调整（这是值得的）。

对于重要的任务，我们希望利用我们对数据的了解来制作更详细的模型，并最终将几种方法组合成一个集成分类器。

但是对于简单的点击并开始，您可以使用`bcp`它使用基于 MCMC 的 Barry 和 Hartigan 贝叶斯过程近似：

```
library(bcp)
changefit <- bcp(data1)
plot(changefit) 
```

![在此处输入图像描述](../Images/5b46b05a2810be637c52e6357344ff9f.png)

隔离组的一种方法是选择后验概率阈值和`split()`基于它的数据：

```
data2 <- data.frame(data=data1, prob = changefit$posterior.prob)
threshold <- 0.90
split(data2,c(0, cumsum( ifelse (data2$prob > threshold, 1, 0))))
#split will warn about unequal lengths 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:12:53.917

您确实有一对不是单调的，需要确保“上行”大于阈值。

```
labs=factor( c(0, cumsum( data1[-1] - data1[-length(data1)] > 7 )), 
             labels=letters[1:8])
plot(data1, pch=as.character(labs) ) 
```

![在此处输入图像描述](../Images/fab60a8c17c529eabd0a08bbe3cb571f.png)

需要自动计算周期数？您可以使用以下长度：

```
unique (factor( c(0, cumsum( data1[-1] - data1[-length(data1)] > 7 )) )) 
```

... 在这种情况下。但它确实需要愿意接受任何大于 6 的上冲定义的中断。（或者你可以选择 15，或者任何从基础科学中有意义的东西。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T23:20:01.477

好的，有一种统计技术可以解决您的问题。如果我理解正确，您实际上要做的是检测数据的统计属性发生变化的地方，即检测不同的行为。这是通过一种称为“变化点检测”的技术完成的，R 对此有很好的包，称为“[变化点”](http://cran.r-project.org/web/packages/changepoint/)'。它使用线性算法来进行相当新的计算。如果我没记错的话，我相信这里使用的 PELT 算法非常好，它是大约两年前发明的，所以它是非常现代的方法。查看函数“cpt.meanvar”，它将检测数据均值和方差的变化。它非常简洁，如果您有足够的耐心 - 您可以找到一种自动且足够好的方法来检测您拥有的所有数据的变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T18:11:12.213

您可以尝试使用包`dbscan`中的基于密度的集群算法`fpc`。

# jquery - 选择选项悬停

> ID：13733231
> 
> 赞同：0
> 
> 时间：2012-12-05T21:59:44.997
> 
> 标签：jquery, html, css

我有一个`select`元素，我想检测`option`用户悬停在哪个元素上。我在[这里](https://stackoverflow.com/a/9144364)使用的是 ShankarSangoli 编写的代码，但它不起作用。我已经在 Chrome 中进行了测试。

[JSFiddle](http://jsfiddle.net/gwc37/)

```
$("select").hover(function (e)
{
     var $target = $(e.target); 
     if($target.is('option')){
         alert($target.attr("id"));//Will alert id if it has id attribute
         alert($target.text());//Will alert the text of the option
         alert($target.val());//Will alert the value of the option
     }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:37:56.670

[正如聚光灯](https://stackoverflow.com/users/441387/limelights)指出的那样，IE 和 Chrome 不支持将鼠标悬停在选项元素上。但是，如果您已经习惯使用 jQuery，您可以尝试使用[组合框](http://jqueryui.com/autocomplete/#combobox)，它可以使用底层选择，但使用 ul 和 li 元素构建选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:41:12.663

您尝试实现的功能在 Chrome 和 IE 中尚不可用。您当前提到的问题中指出了这一点。

正如@purgatory 101 指出的那样，巧妙地使用组合框将允许您“挂钩”额外的 jquery，这可能允许您 alert(); 悬停时。

只需将源工作到组合框，这将是一个正确方向的指针：

```
$('ul.ui-autocomplete ui-menu li').hover(function(){
    //do your stuff here.
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:33:25.200

完成此操作的唯一方法是使用`SELECT`使用 HTML + JS + CSS 而不是本机控件的替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T11:52:33.810

选项：悬停在 IE11 中有效 - 哇！

# jquery - jquery如何仅在单击事件后触发呼叫

> ID：13733238
> 
> 赞同：0
> 
> 时间：2012-12-05T22:00:03.343
> 
> 标签：jquery, html, function

我目前正在实现一个带有淡入效果的点击功能，唯一的问题是如果你不立即点击内容已经淡出，因为它在页面加载时开始淡化。
这是我的代码：

```
$(document).ready(function(){
$('#slide-02').hide();

$('#button').click(function(){
$('#slide-02').fadeIn(1000);
$('#slide-01').hide();
});
    var charToReplace = ['s', 'b', 'S', 'B'];
    $('#slide-02').html(function (i, v) {
        var resultStr = '';
        for (var i = 0; i < v.length; i++ ) {
            var ch = v.charAt(i);

            if ($.inArray(ch, charToReplace) >= 0) {
               resultStr += '<span class="hideMe">' + ch + '</span>';  
            } else {
               resultStr += ch;
            }
        }

        return resultStr;
    }).find('.hideMe').delay(2000).fadeOut(3000, function(){
        $(this).css('opacity', 0).show();            
    });

    //lets bring it all back
    setTimeout(function () {
        $('#slide-02').find('.hideMe').css('opacity', 0);
    }, 5000);
}); 
```

这里也是代码的实时模拟：http: [//nealfletcher.co.uk/fish/test2/](http://nealfletcher.co.uk/fish/test2/)
所以`#slide-02`是隐藏的，当点击#button时`#slide-02`淡入，字母's'和'b'淡出`#slide-02`但我只希望这些字母在可见`#slide-02`时开始褪色，并且在页面加载时不开始褪色，因为目前如果您不立即单击按钮，字母已经褪色。
有没有办法只在点击功能实现后才实现这个调用？
然后我将一张接一张地添加更多幻灯片，所以如果可能的话，我希望这个电话可以多次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:08:05.513

将代码放在fadeIn的函数回调中，当你的fadeIn动画完成时，这将运行，如下所示：

```
 $('#button').click(function(){
        $('#slide-02').fadeIn(1000, function () {
           var charToReplace = ['s', 'b', 'S', 'B'];
           $('#slide-02').html(function (i, v) {
               var resultStr = '';
               for (var i = 0; i < v.length; i++ ) {
                   var ch = v.charAt(i);

                   if ($.inArray(ch, charToReplace) >= 0) {
                       resultStr += '<span class="hideMe">' + ch + '</span>';  
                   } else {
                       resultStr += ch;
                   }
               }

               return resultStr;
           }).find('.hideMe').delay(2000).fadeOut(3000, function(){
                $(this).css('opacity', 0).show();            
           });

           //lets bring it all back
           setTimeout(function () {
              $('#slide-02').find('.hideMe').css('opacity', 0);
           }, 5000);            
       });
    $('#slide-01').hide();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:11:24.763

只需将代码隐藏在click函数中即可。[这](http://jsfiddle.net/5MNDs/)是一个更新的演示。

```
$('#button').click(function(){
    $('#slide-02').fadeIn(1000);
    $('#slide-01').hide();
    var charToReplace = ['s', 'b', 'S', 'B'];
    $('#slide-02').html(function (i, v) {
        var resultStr = '';
        for (var i = 0; i < v.length; i++ ) {
            var ch = v.charAt(i);

            if ($.inArray(ch, charToReplace) >= 0) {
               resultStr += '<span class="hideMe">' + ch + '</span>';  
            } else {
               resultStr += ch;
            }
        }
        return resultStr;
    }).find('.hideMe').delay(2000).fadeOut(3000, function(){
        $(this).css('opacity', 0).show();            
    });

    //lets bring it all back
    setTimeout(function () {
        $('#slide-02').find('.hideMe').css('opacity', 0);
    }, 5000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:12:08.800

您可以将所有内容都放在 click 函数中吗？你不这样做是有原因的吗？

```
$('#button').click(function(){
$('#slide-02').fadeIn(1000);
$('#slide-01').hide();
        var charToReplace = ['s', 'b', 'S', 'B'];
    $('#slide-02').html(function (i, v) {
        var resultStr = '';
        for (var i = 0; i < v.length; i++ ) {
            var ch = v.charAt(i);

            if ($.inArray(ch, charToReplace) >= 0) {
               resultStr += '<span class="hideMe">' + ch + '</span>';  
            } else {
               resultStr += ch;
            }
        }

        return resultStr;
    }).find('.hideMe').delay(2000).fadeOut(3000, function(){
        $(this).css('opacity', 0).show();            
    });
}); 
```

[http://jsfiddle.net/WrM6c/](http://jsfiddle.net/WrM6c/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T22:15:21.967

您可以实现与更复杂的动画链交互的[承诺。](http://api.jquery.com/promise/#example-1)

```
$('#slide-02').promise().done(function() {
    // Rest of your character hiding code goes here
}); 
```

这样做的好处是绑定到动画的结尾，因此如果您决定更改淡出时间，则不必更改淡出时间。

另请参阅：[Jquery - 延迟回调直到多个动画完成](https://stackoverflow.com/questions/5220878/jquery-defer-callback-until-multiple-animations-are-complete)

# ubuntu - 第二个光标未触发屏幕刷新

> ID：13733239
> 
> 赞同：0
> 
> 时间：2012-12-05T22:00:05.687
> 
> 标签：ubuntu, xlib, multiple-monitors, xorg, xinput

我之前发布过关于在两个 xsession 中控制两个单独的游标。（http://stackoverflow.com/questions/13714831/controlling-multiple-pointers-with-xlib-or-xinput-in-ubuntu-linux）

该解决方案效果很好。但是，当我控制光标时发生了一件奇怪的事情。不是光标正常移动并且屏幕刷新以进行调整，而是光标位于一个白色框的顶部，当我移动它时，光标会留下一条痕迹并且没有任何刷新。这只发生在我在第二个屏幕中移动新创建的光标时。我能猜到的最好的情况是，当我移动光标时，xsession 没有收到任何事件通知或其他东西，并且它永远不会刷新，尽管我不知道这是否是问题所在。对不起，我有点含糊，我只是在描述这个问题时遇到了麻烦。就像在过去，屏幕会冻结，您拖动窗口会留下痕迹。这正是光标所发生的事情。

可能与它不在 xorg 中的事实有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:46:35.597

事实证明，发生这种情况的原因是我使用了 gdm。Gdm 对多座系统（多用户/单台计算机）没有很好的支持。最初，在上述失败后，我尝试配置 xorg.conf 以创建多个布局，每个布局都有自己的输入设备。这失败了，又是因为 gdm。一旦我切换到 kdm，我就可以设置 xorg.conf 以便每个监视器都使用它自己的键盘/鼠标设置启动。

# objective-c - 自定义工具栏未显示在第一次视图中，但第二次显示

> ID：13733245
> 
> 赞同：0
> 
> 时间：2012-12-05T22:00:34.370
> 
> 标签：objective-c, ios

我有一个在我的应用程序中实现的自定义工具栏。我正在为我的视图使用导航控制器。在我的第一个观点中，我有：

```
- (void)viewDidLoad
{
   // Background toolbar image for every View
  UIImage *image = [UIImage imageNamed:@"toolbar_iphone1.png"];
 [[UIToolbar appearance] setBackgroundImage:image forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];

} 
```

第一次显示视图时，工具栏是默认工具栏，而不是我的自定义工具栏。之后的所有视图都有自定义工具栏。如果我回到原来的视图，工具栏就会出现。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:11:25.813

你没有调用`[super viewDidLoad]`你的实现。

添加并重试。

# c# - 获取视频列表

> ID：13733250
> 
> 赞同：1
> 
> 时间：2012-12-05T22:00:56.717
> 
> 标签：c#, windows-phone-7

有人知道如何在 Windows Phone 中获取视频列表吗？当试图通过 Xna.Framework.Media 对象访问它们时，但它似乎只允许访问 SongCollection、PictureCollection 和单个 Video 对象。有什么提示吗？另外，有没有办法判断文件是否是 DRM 内容？

这是一些示例代码

```
void somefunction()
{

    MediaLibrary ML = new MediaLibrary();

    //returns a PictureCollection with [x] pictures in MediaLibrary
    PictureCollection PC = ML.Pictures; 

    //do something with IEnumerable object
    foreach (Picture obj in PC)
    {
        if (obj.Album.Name != "Sample Pictures")
            //do something
        else
            //ignore
    }

    //same thing for Audio Files...
    //returns a SongCollection with [x] songs in MediaLibrary
    SongCollection SC = ML.Songs;

    //what about video files??
} 
```

我的项目正在构建以使用 Silverlight 4 并以 WinPhone7.1 为目标

" C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71\Microsoft.Xna.Framework.dll"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T07:16:36.137

在 Windows Phone 7 中无法访问视频库。但在 Windows Phone 8[`FileOpenPicker`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.fileopenpicker.aspx)中，可以通过`Windows.Storage`命名空间中的方式访问视频库。

# c# - ASP.NET、MVC、C# 应用程序 - 为不同的视图修改 _Layout.cshtml

> ID：13733253
> 
> 赞同：1
> 
> 时间：2012-12-05T22:01:02.880
> 
> 标签：c#, asp.net-mvc

我有一个使用 _Layout.cshtml 文件的 ASP.NET、MVC、C# 应用程序。我想为多个视图使用 _Layout.cshtml 文件，但根据显示的视图，我想稍微更改 _Layout.cshtml。

比如在 _Layout.cshtml 中有类似的东西——

```
<div>I would like to say </div>

@if(View = "View1")
{
      <div>Hello!</div>
}
@else 
{
      <div>Goodbye!</div>
}
<div>Have a great day!</div> 
```

有人可以告诉我如何做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:08:12.107

假设您想要更改的不仅仅是简单的文本，您可以使用部分。例如，把它放在`_Layout.cshtml`：

```
@RenderSection("mySection", required: true) 
```

然后在您的每个视图中：

```
@section mySection
{
    <div>Hello!</div>
} 
```

这是一个包含更多信息的不错的[博客。](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:10:22.330

通常你想检查动作而不是视图。你会想做这样的事情

```
@if(Html.ViewContext.RouteData.Values["Controller"] == "Home" && Html.ViewContext.RouteData.Values["Action"] == "Index") {
     <div>Hello!</div>
}else {
     <div>Goodbye!</div>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:05:14.723

巧妙的解决方案：在视图中向 ViewBag 添加一个变量。像这样：

```
@ViewBag.Foo="bar" 
```

在定义渲染哪个视图之前。并根据它在布局中做一个if。

虽然这不是最佳实践方法——我个人可能会选择不同的布局。

# java - 生成带有充气城堡的 dsa/elgamal 密钥对，在 GPG 中导入时不会出错

> ID：13733260
> 
> 赞同：3
> 
> 时间：2012-12-05T22:01:28.057
> 
> 标签：java, bouncycastle, gnupg, dsa, elgamal

我创建了一个小程序来使用 Bouncy Castle 1.47 API 生成 DSA / El Gamal PGP 密钥环。密钥生成非常顺利，没有错误。我使用装甲输出将私钥和公钥导出到文件中，当我尝试使用 GPG（确切地说是 KGpg）导入生成的私钥时，出现以下错误：

```
[GNUPG:] NODATA 1
[GNUPG:] IMPORT_OK 17 1277C25B455C71D91EE42C8FF9A6087305C00DA6
[GNUPG:] IMPORTED F9A6087305C00DA6 test@gmail.com
[GNUPG:] IMPORT_OK 1 1277C25B455C71D91EE42C8FF9A6087305C00DA6
[GNUPG:] IMPORT_RES 1 0 1 0 0 0 0 0 0 1 1 0 0 0 
```

单击“确定”后，它告诉我只处理了 1 个密钥。看起来它只使用了 DSA 密钥，因为在屏幕上它显示为 1024/0。

****编辑**** 我刚刚尝试在 Windows 上打开 PGP 10.1.0 中的密钥，它也给了我一个错误*“密钥环包含一个坏的（损坏的）PGP 数据包。”*

我正在使用的代码如下所示，第一个是 Utility 类，第二个是调用它来创建 Key 的程序。

```
package george.crypto.pgp;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.Security;
import java.util.Date;

import org.bouncycastle.bcpg.ArmoredOutputStream;
import org.bouncycastle.bcpg.HashAlgorithmTags;
import org.bouncycastle.jce.provider.BouncyCastleProvider;
import org.bouncycastle.jce.spec.ElGamalParameterSpec;
import org.bouncycastle.openpgp.PGPEncryptedData;
import org.bouncycastle.openpgp.PGPKeyPair;
import org.bouncycastle.openpgp.PGPKeyRingGenerator;
import org.bouncycastle.openpgp.PGPPublicKey;
import org.bouncycastle.openpgp.PGPPublicKeyRing;
import org.bouncycastle.openpgp.PGPSecretKeyRing;
import org.bouncycastle.openpgp.PGPSignature;
import org.bouncycastle.openpgp.operator.PGPDigestCalculator;
import org.bouncycastle.openpgp.operator.jcajce.JcaPGPContentSignerBuilder;
import org.bouncycastle.openpgp.operator.jcajce.JcaPGPDigestCalculatorProviderBuilder;
import org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyEncryptorBuilder;

public final class PGPTools {

    static {
        Security.addProvider(new BouncyCastleProvider());
    }

    private PGPTools() {

    }

    public static final void exportSecretKey(PGPKeyRingGenerator pgpKeyRingGen, File keyFile, boolean asciiArmor) throws IOException {
        PGPSecretKeyRing pgpSecKeyRing = pgpKeyRingGen.generateSecretKeyRing();

        if(asciiArmor) {
            pgpSecKeyRing.encode(new ArmoredOutputStream(new FileOutputStream(keyFile)));
        }
        else {
            pgpSecKeyRing.encode(new FileOutputStream(keyFile));
        }
    }

    public static final void exportPublicKey(PGPKeyRingGenerator pgpKeyRingGen, File keyFile, boolean asciiArmor) throws IOException {
        PGPPublicKeyRing pgpPubKeyRing = pgpKeyRingGen.generatePublicKeyRing();

        if(asciiArmor) {
            pgpPubKeyRing.encode(new ArmoredOutputStream(new FileOutputStream(keyFile)));
        }
        else {
            pgpPubKeyRing.encode(new FileOutputStream(keyFile));
        }
    }

    /**
     * 
     * @param dsaKeyPair - the generated DSA key pair
     * @param elGamalKeyPair - the generated El Gamal key pair
     * @param identity - the given identity of the key pair ring
     * @param passphrase - the secret pass phrase to protect the key pair
     * @return a PGP Key Ring Generate with the El Gamal key pair added as sub key
     * @throws Exception
     */
    @SuppressWarnings("deprecation")
    public static final PGPKeyRingGenerator createPGPKeyRingGenerator(KeyPair dsaKeyPair, KeyPair elGamalKeyPair, String identity, char[] passphrase) throws Exception
    {
        PGPKeyPair dsaPgpKeyPair = new PGPKeyPair(PGPPublicKey.DSA, dsaKeyPair, new Date());
        PGPKeyPair elGamalPgpKeyPair = new PGPKeyPair(PGPPublicKey.ELGAMAL_ENCRYPT, elGamalKeyPair, new Date());
        PGPDigestCalculator sha1Calc = new JcaPGPDigestCalculatorProviderBuilder().build().get(HashAlgorithmTags.SHA1);
        PGPKeyRingGenerator keyRingGen = new PGPKeyRingGenerator(PGPSignature.POSITIVE_CERTIFICATION, dsaPgpKeyPair, identity, sha1Calc, null, null, new JcaPGPContentSignerBuilder(dsaPgpKeyPair.getPublicKey().getAlgorithm(), HashAlgorithmTags.SHA1), new JcePBESecretKeyEncryptorBuilder(PGPEncryptedData.AES_256, sha1Calc).setProvider("BC").build(passphrase));
        keyRingGen.addSubKey(elGamalPgpKeyPair);
        return keyRingGen;
    }

    /**
     * 
     * @param keySize 512 - 1024 (multiple of 64)
     * @return the DSA generated key pair
     * @throws NoSuchProviderException 
     * @throws NoSuchAlgorithmException 
     */
    public static final KeyPair generateDsaKeyPair(int keySize) throws NoSuchAlgorithmException, NoSuchProviderException
    {
        KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("DSA", "BC");
        keyPairGenerator.initialize(keySize);
        KeyPair keyPair = keyPairGenerator.generateKeyPair();
        return keyPair;
    }

    /**
     * 
     * @param keySize - 1024, 2048, 4096
     * @return the El Gamal generated key pair
     * @throws Exception 
     */
    public static final KeyPair generateElGamalKeyPair(int keySize) throws Exception
    {
        KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("ELGAMAL", "BC");
        keyPairGenerator.initialize(keySize);
        KeyPair keyPair = keyPairGenerator.generateKeyPair();
        return keyPair;
    }

    /**
     * 
     * @param paramSpecs - the pre-defined parameter specs
     * @return the El Gamal generated key pair
     * @throws Exception
     */
    public static final KeyPair generateElGamalKeyPair(ElGamalParameterSpec paramSpecs) throws Exception
    {
        KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("ELGAMAL", "BC");
        keyPairGenerator.initialize(paramSpecs);
        KeyPair keyPair = keyPairGenerator.generateKeyPair();
        return keyPair;
    }
} 
```

* * *

```
package george.crypto.pgp;

import java.io.File;
import java.math.BigInteger;
import java.security.KeyPair;

import org.bouncycastle.jce.spec.ElGamalParameterSpec;
import org.bouncycastle.openpgp.PGPKeyRingGenerator;

public class PGPCryptoBC {

    public PGPCryptoBC() {
        try {
            String keysDir = System.getProperty("user.dir")+File.separator+"src/george/crypto/pgp/keys";

            //Generating a safe prime is a very long process so it's better to use
            //a pre-generated safe prime, I took this from http://www.cryptopp.com/fom-serve/cache/71.html
            BigInteger primeModulous = new BigInteger("36F0255DDE973DCB3B399D747F23E32ED6FDB1F77598338BFDF44159C4EC64DDAEB5F78671CBFB22106AE64C32C5BCE4CFD4F5920DA0EBC8B01ECA9292AE3DBA1B7A4A899DA181390BB3BD1659C81294F400A3490BF9481211C79404A576605A5160DBEE83B4E019B6D799AE131BA4C23DFF83475E9C40FA6725B7C9E3AA2C6596E9C05702DB30A07C9AA2DC235C5269E39D0CA9DF7AAD44612AD6F88F69699298F3CAB1B54367FB0E8B93F735E7DE83CD6FA1B9D1C931C41C6188D3E7F179FC64D87C5D13F85D704A3AA20F90B3AD3621D434096AA7E8E7C66AB683156A951AEA2DD9E76705FAEFEA8D71A5755355970000000000000001", 16);
            BigInteger baseGenerator = new BigInteger("2", 16);
            ElGamalParameterSpec paramSpecs = new ElGamalParameterSpec(primeModulous, baseGenerator);

            KeyPair dsaKeyPair = PGPTools.generateDsaKeyPair(1024);
            KeyPair elGamalKeyPair = PGPTools.generateElGamalKeyPair(paramSpecs);
            PGPKeyRingGenerator pgpKeyRingGen = PGPTools.createPGPKeyRingGenerator(dsaKeyPair, elGamalKeyPair, "test@gmail.com", "TestPass12345!".toCharArray());

            PGPTools.exportSecretKey(pgpKeyRingGen, new File(keysDir+File.separator+"secret.asc"), true);
            PGPTools.exportPublicKey(pgpKeyRingGen, new File(keysDir+File.separator+"public.asc"), true);
        }
        catch(Exception ex) {
            ex.printStackTrace();
        }
    }

    public static void main(String ... args) {
        new PGPCryptoBC();
    }
} 
```

生成的输出是 2 个文件“secret.asc”和“public.asc”如果我尝试在 GPG 中导入“secret.asc”，我会收到错误，并且不会导入 El Gamal 子密钥。

有谁知道这有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:30:44.817

我设法解决了我自己的问题。我需要在最后明确关闭输出流。不这样做会导致数据损坏。

其次，作为额外的奖励，如果我使用 rfc3526 中列出的安全素数（素数模数），它允许我生成不同位大小长度的 El Gamal 密钥。

# objective-c - Dismissviewcontroller 并执行 segue

> ID：13733263
> 
> 赞同：4
> 
> 时间：2012-12-05T22:01:47.480
> 
> 标签：objective-c, ios, uiviewcontroller, segue

我需要使用另一个视图控制器，`performSegueWithIdentifier`但我还需要删除我当前所在的视图控制器。我该怎么做，我已经尝试过，但它不起作用：

```
[self performSegueWithIdentifier:@"next" sender:self];
[self dismissViewControllerAnimated:NO completion:nil];

//tried the other way, but it doesn't work either
[self dismissViewControllerAnimated:NO completion:nil];
[self performSegueWithIdentifier:@"next" sender:self]; 
```

看起来没有任何简单的方法可以做到这一点？我有 4 个视图控制器，它们是这样连接的，我想从游戏结束到高分。

```
menu-->game----->gameover
menu-->highscore 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T23:35:29.907

这个怎么样？

```
UIViewController *parentController = self.presentingViewController;
[picker dismissViewControllerAnimated:YES completion:^(void){
    [parentController performSegueWithIdentifier:@"next" sender:self];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T15:00:59.227

我有同样的问题，如果有人来这里寻找答案，这就是我要解决的问题。

```
//In viewController that is being dismissed
[self dismissViewControllerAnimated:NO completion:^{
     [[NSNotificationCenter defaultCenter] postNotificationName:@"callSegue" object:self];
}];

//In viewController being presented
//in viewDidLoad:
[[NSNotificationCenter defaultCenter] addObserver: self
                                             selector: @selector(gotoNewView)
                                                 name: @"callSegue"
                                               object: nil];

-(void)gotoNewView {
    [self performSegueWithIdentifier:@"segueToPerform" sender:self];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T19:21:40.880

在我意识到我应该使用 push segue 之前，我遇到了同样的问题。
新 VC 将立即解雇他们两个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T02:06:48.653

更好的是：

```
[self dismissViewControllerAnimated:NO completion:^(void)
{
 // Perform the segue here.
}]; 
```

# java - 使用 HTTP PUT 创建在同一个 Tomcat 上运行的新缓存（ehCache）？

> ID：13733266
> 
> 赞同：0
> 
> 时间：2012-12-05T22:02:00.603
> 
> 标签：java, json, http, rest, ehcache

我正在尝试使用我在同一个本地 tomcat 实例上的 web 服务向 ehCache 发送一个 HTTP PUT（为了创建一个新的缓存并用我生成的 JSON 填充它）。

我是 RESTful Web 服务的新手，正在使用 JDK 1.6、Tomcat 7、ehCache 和 JSON。

我的 POJO 定义如下：

人 POJO：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Person {
    private String firstName;
    private String lastName;
    private List<House> houses;

    // Getters & Setters
} 
```

房子 POJO：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class House {
    private String address;
    private String city;
    private String state;

    // Getters & Setters
} 
```

使用 PersonUtil 类，我将 POJO 硬编码如下：

```
public class PersonUtil {
    public static Person getPerson() {
        Person person = new Person();
        person.setFirstName("John");
        person.setLastName("Doe");
        List<House> houses = new ArrayList<House>();
        House house = new House();
        house.setAddress("1234 Elm Street");
        house.setCity("Anytown");
        house.setState("Maine");
        houses.add(house);
        person.setHouses(houses);
        return person;
    }
} 
```

能够为每个 GET 请求创建 JSON 响应：

```
@Path("")
public class MyWebService{

     @GET
     @Produces(MediaType.APPLICATION_JSON) 
     public Person getPerson() {
         return PersonUtil.getPerson();
     }
} 
```

将war部署到tomcat并将浏览器指向时

```
http://localhost:8080/personservice/ 
```

生成的 JSON：

```
{ 
    "firstName" : "John", 
    "lastName" : "Doe",
    "houses": 
        [ 
            { 
              "address" : "1234 Elmstreet",
              "city"    : "Anytown",
              "state"   : "Maine"
            }
        ]
} 
```

到目前为止，一切都很好，但是，我有一个不同的应用程序在同一个 tomcat 实例上运行（并且支持 REST）：

```
http://localhost:8080/ehcache/rest/ 
```

在 tomcat 运行时，我可以发出这样的 PUT：

```
echo "Hello World" |  curl -S -T -  http://localhost:8080/ehcache/rest/hello/1 
```

当我像这样“获取”它时：

```
 curl http://localhost:8080/ehcache/rest/hello/1 
```

将产生：

你好世界

我需要做的是创建一个 POST 来放置我的整个 Person 生成的 JSON 并创建一个新的缓存：

```
 http://localhost:8080/ehcache/rest/person 
```

当我对这个以前的 URL 执行“GET”时，它应该是这样的：

```
{ 
    "firstName" : "John", 
    "lastName" : "Doe",
    "houses": 
        [ 
            { 
              "address" : "1234 Elmstreet",
              "city"    : "Anytown",
              "state"   : "Maine"
            }
        ]
} 
```

所以，到目前为止，这就是我的 PUT 的样子：

```
@PUT
@Path("/ehcache/rest/person")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON) 
public Response createCache() {
    ResponseBuilder response = Response.ok(PersonUtil.getPerson(), MediaType.APPLICATION_JSON);
    return response.build();
} 
```

问题）：

1.  这是编写 PUT 的正确方法吗？
2.  我应该在`createCache()`方法中写什么让它将我生成的 JSON 放入`http://localhost:8080/ehcache/rest/person`？
3.  使用 PUT 的命令行 CURL 注释会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:09:50.273

我希望 PUT 处理程序将 a`Person`作为参数，以便它可以通过某种方式找出传递给它的内容。这就是 JAX-RS 的方式。我也希望不必返回一个`Response`给定的，我们只是用一个简单的值做一个 200 OK 响应。

```
@PUT
@Path("/ehcache/rest/person")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON) 
public Person createCache(Person who) {
    // Stuff in here to store the person, filling out with whatever
    // needs to be added...
    return who;
} 
```

当然，一般来说，我还希望从路径中提取一个参数来指示正在更新的人，也许还有一个*参数*`@Context UriInfo uriInfo`来允许更详细地访问有关如何调用方法的信息（包括综合能力相关网址）。但那是巧夺天工。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T16:45:19.237

如果您正在寻找使用 PUT 的有效方法，您可以参考我的博客文章，其中我也尝试提及 Post 和 Put 之间的区别 [http://ykshinde.wordpress.com/2014/12/05/rest-put- vs-post/](http://ykshinde.wordpress.com/2014/12/05/rest-put-vs-post/)

它还有代码片段来返回适当的 HTTP 代码

希望它有帮助......

# excel - 将单独 Excel 文件中的值复制到单独的 Excel 工作表中

> ID：13733269
> 
> 赞同：0
> 
> 时间：2012-12-05T22:02:16.593
> 
> 标签：excel, vba

我有`ABC1`Excel 文件，我想从中复制列`A`值 ( `A1:A50`)，我也有`ABC2`Excel 文件，我想从中复制列`B`值 ( `B1:B50`)。

我想将它们粘贴到
`XYZ1`([ `ABC1` `A1`] to`D1`和 [ `ABC2` `B1`] to `D2`) Excel 文件中，
`XYZ2`([ `ABC1` `A2`] to`D1`和 [ `ABC2` `B2`] to `D2`) Excel 文件中，
`XYZ3`...和...
`XYZ50`
单独的 Excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:23:43.870

看起来像这样

```
dim x as integer
dim wb as workbook

for x=1 to 50
    set wb=workbooks.add()
    'copy data to wb.sheets(1)
    wb.saveas filename:="C:\destination_folder\XYZ" & x & ".xlsx"
    wb.close false
next x 
```

# c - 从文件接收数据并需要打印它，但程序没有正确读取数据？

> ID：13733270
> 
> 赞同：1
> 
> 时间：2012-12-05T22:02:17.073
> 
> 标签：c, io

在我的程序中，我必须打印一个包含来自 2 个文件“accounts.dat”和“transactions.dat”的数据的通用日志

account.dat 有：

```
1000:first
2000:second
3000:hello 
```

transactions.dat 有

```
1000:first:d:1000.000000
2000:second:c:1500.000000
3000:hello:d:1000.000000 
```

因此，除了交易之外，基本上相同的数据还有 2 个。

当我检查读取文件数据并将其输入到程序中的数组中的读取函数时，它们就在那里，但是当我调用 generaljournal 函数以特定格式打印它时，通用日志不承认文件被扫描到我的数组中。

功能是：

```
void generaljournal(int accounts[MAX], int accounts3[MAX], char debcred[MAX], double amount[MAX], char accname[MAX][MAXSTRING], char transname[MAX][MAXSTRING], int *totalinput) {

int i = 0;

printf ("\n");
printf ("\t\t\tGeneral Journal\n");
printf ("Account  Description                          Debit      Credit\n");
printf ("-------  ------------------------------  ----------  ----------\n");

for (i = 0; i < *totalinput; i++)
{
    printf ("   %d", accounts[i]);

    if (debcred[i] == 'd')
    {
        printf ("  %-35s", transname[i]);
        printf ("%.2lf\n", amount[i]);
    }

    else if (debcred[i] == 'c')
    {
        printf ("  %-47s", transname[i]);
        printf ("%.2lf\n", amount[i]);
    }

}

printf ("\n");

} 
```

所有被调用的数组都有数组中的数据，但是当我调用通用日志函数时没有打印出来。我在我的 main 中调用了 read 函数，但即使我把

```
read(accounts, accounts3, debcred, amount, accname, transname); 
```

在我的一般日记功能中，它仍然没有做任何事情。输出应该是什么样子的

```
Account     Description     Debit     Credit
1000        first           1000.000
2000        second                    1500.00
3000        hello           1000.00 
```

相反，它只打印 (accounts, description, debit, credit) 的外壳，下面没有任何值。

有谁知道为什么当我从读取函数中的文件中扫描所有值时它不接受数组中的值？如果需要更多信息，我会提供。我的阅读功能是：

```
void read (int accounts[MAX], int accounts3[MAX], char debcred[MAX], double amount[MAX], char accname[MAX][MAXSTRING], char transname[MAX][MAXSTRING]) {

FILE *fp1 = NULL;
FILE *fp2 = NULL;

fp1 = fopen("accounts.dat", "r");
fp2 = fopen("transactions.dat", "r");

int h = 0;

if (fp1 != NULL) // READING THE FILE
{
    while(fscanf(fp1, "%d", &accounts[h]) != EOF)
    {

            fgetc(fp1);
            fscanf(fp1, "%30[^\n]", &accname[h]);
            h++;
    }

    fclose(fp1);
}
else
    printf ("Failed to open file\n");

if (fp2 != NULL) // READING THE FILE
{
    int j = 0;
    while(fscanf(fp2, "%d", &accounts3[j]) != EOF)
    {
        fgetc(fp2);
        fscanf(fp2, "%30[^:]", &transname[j]);
        fgetc(fp2);
        fscanf(fp2, "%c", &debcred[j]);
        fgetc(fp2);
        fscanf(fp2, "%lf", &amount[j]);
        j++;
    }

    fclose(fp2);
}
else
    printf ("Failed to open file\n");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:49:36.353

也许的价值`*totalinput`是`0`

# jquery - 转换到位置时防止内容闪烁/反弹：已修复

> ID：13733271
> 
> 赞同：0
> 
> 时间：2012-12-05T22:02:26.827
> 
> 标签：jquery, css, position, jquery-waypoints

我使用 jQuery Waypoints 库将菜单栏容器的位置从静态修改为固定。当浏览器窗口向下滚动到菜单栏时，菜单栏固定在窗口的顶部。

当缓慢滚动到/越过航点时，状态变化似乎很顺利，但是当我以正常速度滚动时，菜单栏内容会发生轻微的跳跃/反弹。

标记：

```
<div class="wrapper">
  <div class="less"></div>
  <div class="container">
    <nav>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Clients</a></li>
        <li><a href="#">Contact Us</a></li>
      </ul>
    </nav>
  </div>
  <div class="more"></div>
</div>​ 
```

相关CSS：

```
.container {
  height: 50px;
}
nav {
  background: #cdce12;
  height: 50px;
}
nav ul {
  margin: 0;
  padding: 0;
}
nav li {
  display: inline-block;
}
.sticky nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
} 
```

这是jQuery代码：

```
$(function() {
  var $container = $('.container');
  var $b = $('body');
  $container.waypoint({
    handler: function(event, direction) {
      $b.toggleClass('sticky', direction === 'down');
      event.preventDefault();
    }
 });
});​ 
```

我已经设置了一个[JSFiddle](http://jsfiddle.net/FHvha/2)来说明这个问题，我想知道是否可以防止这种影响发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:10:40.497

您可以通过将滚动油门设置为 0 来使其变得更好，但是仍然会有微小的反弹。

```
$.waypoints.settings.scrollThrottle = 0; 
```

[http://jsfiddle.net/FHvha/3/](http://jsfiddle.net/FHvha/3/)

# php - 在 PHP 中减去时间以获得秒差

> ID：13733273
> 
> 赞同：0
> 
> 时间：2012-12-05T22:02:34.877
> 
> 标签：php, mysql, time, subtraction

我想以秒为单位计算时间差。我一直得到 0 作为结果，并想知道是否有人可以帮助我。时间将从数据库中提取。

这是我想要做的一个例子。

```
$TimeStart = "04:30:45 am";
$TimeEnd = "04:31:46 am";
$Difference = $TimeEnd - $TimeStart . "seconds"; 
```

我知道这不是一个非常有说明的例子，我知道它可能不是那么简单。

这是我现在网站上的代码：

```
$TimeStart = strtotime($VisitsRow['TimeStart']);
$TimeEnd = strtotime($VisitsRow['TimeEnd']);
$TimeDifference = ($TimeEnd - $TimeStart);
if ($VisitsRow['TimeEnd'] == "") {
    $Timeto = "Incomplete";
} else {
    if ($TimeDifference <= 60) {
        $Timeto = "< a minute";
    } else if ($TimeDifference <= 0) {
        $Timeto = "< a second";
    } else {
        $Timeto = round($TimeDifference, 2)." seconds";
    }
    if ($TimeDifference >= 60) {
        $MinutesDiff = $TimeDifference / 60;
        $Timeto = round($MinutesDiff, 2)." minutes";
    }
} 
```

我只是简单地尝试了上面我想要的示例并且得到了一个负数。这就是我需要帮助的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:20:00.027

谢谢大家帮我解决这个问题。我的问题是它以 24 小时格式而不是标准收集时间。一旦我解决了这个问题，一切都会完美无缺。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:44:13.760

这很容易`strtotime`：

```
$TimeStart = strtotime("04:30:45");
$TimeEnd = strtotime("04:31:46");

$Difference = ($TimeEnd - $TimeStart) . " seconds"; 
```

但是，如果您需要它更加动态，可以通过 SQL 减去两个日期字段：

```
SELECT TIMESTAMPDIFF(MINUTE,TimeEnd,TimeStart) AS TimeDifference FROM myTable 
```

（请注意，如果需要，您可以更改`MINUTE`为另一个时间指标）

# fortran90 - 尝试在 fortran 90 中创建模块时出现错误消息

> ID：13733274
> 
> 赞同：1
> 
> 时间：2012-12-05T22:02:34.913
> 
> 标签：fortran90

我正在尝试为 fortran 90 程序创建一个模块。该文件名为 epath.f90。当我尝试通过命令 f95 -c epath.f90 在文件上运行仅对象编译来创建文件 epath.mod 时，它给了我以下错误消息：

```
epath.f90:1:

MODULE euler-path
1
Error: Unclassifiable statement at (1)
epath.f90:8.3:

END MODULE euler-path
   1
Error: Expecting END PROGRAM statement at (1)
Error: Unexpected end of file in 'epath.f90' 
```

epath.f90 的代码是：

```
MODULE euler-path

INTEGER, PARAMETER :: NSTEPS=10
REAL, PARAMETER :: A=0.0, B=1.0, YSTART=0.0
REAL, DIMENSION(0:NSTEPS) :: x,y

END MODULE euler-path 
```

我对另一个模块采取了相同的步骤，并且效果很好。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:10:17.290

在 Fortran 中，名称（模块名称、变量名称等）必须以字母开头，并且只能包含字母、数字或下划线。（Fortran 尤其禁止`-/+/*/(/)`在名称中使用诸如运算符之类的特殊字符，因为它在历史上对空格的使用采取了一种非常随意的方法，或者就此而言，明确定义了变量名称，这使得区分`a-b`名称变得非常困难和表达式`a - b`。）参见，例如，[最近的 Fortran 标准](http://fortranwiki.org/fortran/show/Fortran+2008)的第 3.2.2 节（“名称”） 。

所以`euler_path`没关系，`euler_path123`没关系，但`euler-path`不是。

# java - 确定文件是否是联结（在 Windows 中）？

> ID：13733275
> 
> 赞同：15
> 
> 时间：2012-12-05T22:02:42.863
> 
> 标签：java, windows, winapi, jna

我一直在寻找一种方法来确定文件是否为连接，但没有找到任何令人满意的答案。

我尝试的第一件事是：

```
Files.isSymbolicLink(aPath) 
```

它只检测符号链接而不是 Windows 中称为联结的文件。

还尝试了此处提出的解决方案（使用 JNA 库）： [Stackoverflow question (3249117)](https://stackoverflow.com/questions/3249117/cross-platform-way-to-detect-a-symbolic-link-junction-point) ，但它从未在我知道是联结的任何文件上返回 true。

我发现确定哪些文件是联结的唯一方法是在 Windows 命令提示符下运行以下命令：

```
DIR /S /A:L 
```

在我的计算机上，它返回 66 个文件夹，而 Files.isSymbolicLink(aPath) 只返回 2 个。所以我想我可以找到一种方法来利用它，但我认为在遍历文件树时它不会非常有效。

有没有办法使用标准的java库或alternativly JNA来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-15T10:30:14.353

如果您有正确的 java，例如 Oracle jdk 8，则可以在没有 JNA 的情况下做到这一点。它很狡猾，它可能会停止工作，但是....

可以获取链接相关的BasicFileAttributes接口：

```
BasicFileAttributes attr = Files.readAttributes(path, BasicFileAttributes.class, LinkOption.NOFOLLOW_LINKS); 
```

这个接口实现可能是一个类 `sun.nio.fs.WindowsFileAttributes`。并且这个类有一个方法`isReparsePoint`，它对连接点和符号链接都返回 true。所以你可以尝试使用反射并调用方法：

```
 boolean isReparsePoint = false;
    if (DosFileAttributes.class.isInstance(attr))
        try {
            Method m = attr.getClass().getDeclaredMethod("isReparsePoint");
            m.setAccessible(true);
            isReparsePoint = (boolean) m.invoke(attr);
        } catch (Exception e) {
            // just gave it a try
        } 
```

现在你只能发现它是否真的是符号链接：`Files.isSymbolicLink(path)`

如果不是，但它是重解析点，那么这就是交界处。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T22:19:33.743

如果您可以在 JNA 中编写本机代码，则可以直接调用 Win32 API`GetFileAttributes()`函数并检查`FILE_ATTRIBUTE_REPARSE_POINT`标志（连接被实现为重解析点）。

**更新**：要区分不同类型的重解析点，您必须检索`ReparseTag`实际重解析点的。对于连接点，它将被设置为`IO_REPARSE_TAG_MOUNT_POINT`(0xA0000003)。

有两种方法可以获取`ReparseTag`：

1.  [`DeviceIoControl()`](http://msdn.microsoft.com/en-us/library/aa363216.aspx)与控制代码一起使用[`FSCTL_GET_REPARSE_POINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364571.aspx)来获得一个[`REPARSE_DATA_BUFFER`](http://msdn.microsoft.com/en-us/library/ff552012.aspx)结构，它作为一个`ReparseTag`字段。`IsDirectoryJunction()`您可以在以下文章中看到使用此技术的实现示例：

    [NTFS 硬链接、目录连接和 Windows 快捷方式](http://www.flexhex.com/docs/articles/hard-links.phtml)

2.  用于[`FindFirstFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428.aspx)获取[`WIN32_FIND_DATA`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365740.aspx)结构。如果路径具有`FILE_ATTRIBUTE_REPARSE_POINT`属性，则该`dwReserved0`字段将包含`ReparseTag`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-17T12:38:59.380

在 J2SE 1.7 中使用 Java NIO

```
/**
* returns true if the Path is a Windows Junction
*/
private static boolean isJunction(Path p) {
    boolean isJunction = false;
    try {
        isJunction = (p.compareTo(p.toRealPath()) != 0);
    } catch (IOException e) {
        e.printStackTrace(); // TODO: handleMeProperly
    }
    return isJunction;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-16T23:30:28.797

虽然在 Windows 上，联结的属性具有`isSymbolicLink()`== `false`，但它们具有`isOther()`== `true`。因此，您可以执行以下操作：

```
boolean isWindows = System.getProperty("os.name").toLowerCase().contains("windows")
BasicFileAttributes attrs = Files.readAttributes(aPath, BasicFileAttributes.class, LinkOption.NOFOLLOW_LINKS);
boolean isJunction = isWindows && attrs.isDirectory() && attrs.isOther(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-04T16:20:46.850

**黑盒解决方案：**

`aPath.toRealPath()`解析交汇点和符号链接，因此结果将偏离`aPath`.

此外，出于未记录的原因为路口`BasicFileAttributes.isSymbolicLink()`交付：`false`

例如`Path.toRealPath(LinkOption.NOFOLLOW_LINKS)`，将连接视为链接并不能解决它！

因此，通过非同一性，`toRealPath()`您`BasicFileAttributes.isSymbolicLink()`可以识别一个连接点。

# python - 足球统计 Python Scraper

> ID：13733276
> 
> 赞同：1
> 
> 时间：2012-12-05T22:02:43.523
> 
> 标签：python, r, web-scraping, lxml

我希望将[本赛季的一些休斯顿 Dynamo 统计数据](http://www.houstondynamo.com/stats/season?page=0)刮成 CSV，然后用 R 可视化该数据。

如何使用 lxml 抓取 tr 和 td 元素？我应该看一个更简单的选择器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:16:30.297

对于（合理）格式良好的 HTML 表，R 中的 XML 包使这种事情变得非常简单：

```
library(XML)
> url <- "http://www.houstondynamo.com/stats/season?page=0"
> tbl <- readHTMLTable(url)
> head(tbl[[1]])
           Player POS GP GS MINS  G  A SHTS SOG GWG PKG/A HmG RdG G/90min  SC%
1      Will Bruin   F 32 31 2510 12  4   78  35   0   0/0   6   6    0.43 15.4
2      Brad Davis   M 31 28 2523  8 12   53  22   3   3/4   5   3    0.29 15.1
3     Brian Ching   F 30 13 1385  5  5   35  15   1   2/2   2   3    0.32 14.3
4   Boniek Garcia   M 17 17 1530  4  6   30  12   1   0/0   3   1    0.24 13.3
5      Calen Carr   M 26 17 1512  4  2   29  11   2   0/0   3   1    0.24 13.8
6 Macoumba Kandji   F 29 21 1630  4  2   34  16   1   0/0   3   1    0.22 11.8 
```

# iphone - 在块完成中调用 presentModalViewController

> ID：13733279
> 
> 赞同：0
> 
> 时间：2012-12-05T22:02:55.783
> 
> 标签：iphone, objective-c, ios, block

在我的代码中，我正在使用这个类：

[https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)

当我以这种方式按下对话框视图中的按钮时，我想调用 presentModalViewController：

```
BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Example" message:@"Text"];
[alert setDestructiveButtonWithTitle:@"Ok" block:^{
FirstView *firstView = [[FirstView alloc] initWithNibName:@"FirstView" bundle:nil];
[self presentModalViewController:firstView animated:YES];
}];
[alert show]; 
```

但是应用程序冻结了，一分钟后打开视图，所以我的问题是如何在块完成中呈现emodalviewcontroller？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T12:12:49.260

实际上有一些错误，首先，当你在一个块内实例化一些类/变量时，它们会响应并且在该块内有生命周期。因此，您的块在另一个线程中运行，这就是原因，通过这种方式，您可能会导致保留周期，这对您的应用程序来说非常糟糕，更改如下：

```
BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Example" message:@"Text"];
FirstView *firstView = [[FirstView alloc] initWithNibName:@"FirstView" bundle:nil];
__weak typeof(self) weakSelf = self;
[alert setDestructiveButtonWithTitle:@"Ok" block:^{

[weakSelf presentModalViewController: weakSelf.firstView animated:YES];
}];
[alert show]; 
```

这样做，使用 __weak typeof 我们创建了一个弱引用，以防止块创建强引用循环*（这很好阅读），现在我们确保将使用我们为当前新模式视图实例化的视图。

如有任何疑问，请免费询问:)

# php - 使用 Facebook PHP API 发表评论

> ID：13733280
> 
> 赞同：4
> 
> 时间：2012-12-05T22:02:58.120
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我可以在我的墙上，朋友的墙上发帖……但我需要用 fabook php api 发表评论，如下所示：

**邮政**：你好！
**评论**：嗨！！<-PHP 脸书 API

在我的墙上张贴：

```
$facebook->api('/feed/me/', 'post', array('message' => $message)); //Script running OK 
```

贴在墙友的：

```
$facebook->api('/ID_or_username_friend/feed/', 'post', array('message' => $message)); //Script running OK 
```

但如果使用：

```
$facebook->api('/id_post/feed/', 'post', array('message' => $comment)); // nothing happens 
```

他们没有显示任何错误，但没有发布评论：/如果我使用另一种方法，我会收到：

> 未捕获的 OAuthException：未知路径组件：

任何可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:20:11.537

这是`$facebook->api('/id_post/comments', ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:20:29.920

查看[Post 对象文档](https://developers.facebook.com/docs/reference/api/post/#comments)- 要向 Post 添加评论，您需要发出 POST 请求`/<POST ID>/comments`

唯一的参数是`message`，用户输入的评论文本

# mysql - 删除 MYSQL 数据库中的所有外键

> ID：13733281
> 
> 赞同：39
> 
> 时间：2012-12-05T22:02:59.617
> 
> 标签：mysql

外键导致我在修改数据库结构以满足新要求时遇到太多问题 - 我想修改主键，但是当外键引用有问题的表时我似乎不能（我认为是因为 MySQL 删除了表并重新创建）。

因此，当我在数据库上工作时，我想简单地删除所有外键并稍后重新创建它们。有没有一种巧妙的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-12-15T09:52:45.567

跑

```
SELECT concat('ALTER TABLE ', TABLE_NAME, ' DROP FOREIGN KEY ', CONSTRAINT_NAME, ';') 
FROM information_schema.key_column_usage 
WHERE CONSTRAINT_SCHEMA = 'db_name' 
AND referenced_table_name IS NOT NULL; 
```

并运行输出。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-12-05T22:08:32.797

您可以在要进行的任何 Alter Table 语句之前简单地发出以下命令：

```
SET foreign_key_checks = 0; 
```

这将关闭数据库连接的外键约束检查。然后，您可以进行更改而无需担心约束。

完成后，不要忘记发出：

```
SET foreign_key_checks = 1; 
```

重新打开它们。

请注意，这仍然不允许您创建一个新的外键约束，该约束会因为列数据类型不匹配而失败。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-06-24T15:11:55.423

另一个版本的 Zoozy 代码，这里你只能选择一个表：

```
SELECT concat('ALTER TABLE ', TABLE_NAME, ' DROP FOREIGN KEY ', CONSTRAINT_NAME, ';') 
FROM information_schema.key_column_usage 
WHERE CONSTRAINT_SCHEMA = 'YOUR DB HERE' 
AND TABLE_NAME='YOUR TABLE HERE' 
AND REFERENCED_TABLE_NAME IS NOT NULL; 
```

还有一个程序：

```
DROP PROCEDURE IF EXISTS dropForeignKeysFromTable;

delimiter ///
create procedure dropForeignKeysFromTable(IN param_table_schema varchar(255), IN param_table_name varchar(255))
begin
    declare done int default FALSE;
    declare dropCommand varchar(255);
    declare dropCur cursor for 
        select concat('alter table ',table_schema,'.',table_name,' DROP FOREIGN KEY ',constraint_name, ';') 
        from information_schema.table_constraints
        where constraint_type='FOREIGN KEY' 
            and table_name = param_table_name
            and table_schema = param_table_schema;

    declare continue handler for not found set done = true;

    open dropCur;

    read_loop: loop
        fetch dropCur into dropCommand;
        if done then
            leave read_loop;
        end if;

        set @sdropCommand = dropCommand;

        prepare dropClientUpdateKeyStmt from @sdropCommand;

        execute dropClientUpdateKeyStmt;

        deallocate prepare dropClientUpdateKeyStmt;
    end loop;

    close dropCur;
end/// 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-03T19:44:29.107

如果你想跨多个数据库做同一张表，不要忘记`CONSTRAINT_SCHEMA`输入输出：

```
SELECT concat('ALTER TABLE ', CONSTRAINT_SCHEMA,'.',TABLE_NAME, ' DROP FOREIGN KEY ', CONSTRAINT_NAME, ';')
FROM information_schema.key_column_usage
WHERE CONSTRAINT_SCHEMA like 'your_db_prefix_%'
    AND TABLE_NAME='your_table'
    AND REFERENCED_TABLE_NAME IS NOT NULL; 
```

# javascript - 画布数据到网络工作者

> ID：13733284
> 
> 赞同：4
> 
> 时间：2012-12-05T22:03:11.400
> 
> 标签：javascript, html, canvas, web-worker

我正在尝试使用 webworker 对画布中的图像数据进行一些处理。我知道的解决方案工作得很好，但是在我进行处理时仍然存在一些明显的滞后（因为除了处理之外，我还必须将视频从网络摄像头绘制到画布上并且它开始滞后）。

所以我尝试使用 webworker，我做的一切都是异步的。唯一的问题是当我使用 JSON.stringify 时，它需要比实际处理更长的时间。

我的问题：有没有其他方法，如何通过 worker.postMessage 快速传递大量数据？是否有某种我不知道的解决方法？

小问题：网络工作者是为了什么？我发现工人真的没用，只是传递字符串。

**编辑：**

可能重复：[在 web worker 和主线程之间传递大量数据](https://stackoverflow.com/questions/12746053/pass-large-amounts-of-data-between-web-worker-and-main-thread)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:14:35.023

一切都被复制到网络工作者，所以除非你的计算非常密集，我怀疑你会在那里看到很多收获。

WebWorkers 适用于长时间运行的计算密集型算法。明显的用例是：

*   网页游戏中的人工智能
*   光线追踪器
*   大型数据集的压缩/解压
*   在显示之前需要大量处理的 AJAX 请求
*   其他复杂算法

由于数据是双向复制的，因此您必须小心自己在做什么。WebWorkers 无权访问 DOM，因此它们可能对您正在尝试做的事情毫无用处。我不知道你的应用程序是做什么的，但听起来它不是很激烈。

还有 Sharedworkers，它可以由多个选项卡/窗口共享，这是在选项卡之间传递数据的一种非常好的方式。

**编辑：**

还要研究[结构化克隆算法](https://developer.mozilla.org/en-US/docs/DOM/The_structured_clone_algorithm)。JSON 在很多事情上似乎更有效，甚至可以复制 ImageData（因此它不再只支持字符串）。

对于不支持克隆算法的浏览器，我建议您考虑使用 base64。它在存储二进制数据方面很不错，而且我认为它比 JSON.stringify 更快。不过，您可能必须编写一些代码来处理它。

# php - 比较不同表中同名的数据库字段

> ID：13733285
> 
> 赞同：-4
> 
> 时间：2012-12-05T22:03:11.027
> 
> 标签：php, sql, database

到目前为止，我还没有找到答案，所以我想你可以帮助我解决这个问题。

我的数据库有 2 个表，都有一个名为“电子邮件”的字段。

我想做的是列出两个表中的所有电子邮件地址，而不显示两次电子邮件。有什么想法、示例脚本或类似的东西我可以使用吗？

谢谢

D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:09:39.170

```
(SELECT email FROM table1) UNION DISTINCT (SELECT email FROM table2) 
```

您需要根据需要替换表和字段名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:09:56.370

这应该可以解决问题。只需使用 UNION 命令将两个语句的结果连接在一起。

```
SELECT email FROM table1
UNION
SELECT email FROM table2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:09:50.803

T-SQL：

```
SELECT DISTINCT email 
FROM
(
SELECT email FROM Table1
UNION
SELECT email FROM Table2
) 
```

# jquery - 向左和向右滑动标签面板

> ID：13733286
> 
> 赞同：0
> 
> 时间：2012-12-05T22:03:13.163
> 
> 标签：jquery

我有三个面板和三个按钮，并试图实现以下操作：

<--- 1, 2, 3, --->

*   如果面板 1 在视图中并且您单击 2：面板 1 从左侧滑出视图，面板 2 从右侧进入视图
*   如果面板 2 在视图中并且您单击 1：面板 2 滑出到右侧，面板 1 从左侧进入视图。
*   如果面板 3 在视图中并且您单击 2：面板 3 滑出到右侧，面板 2 从左侧进入视图。

等等等等

这是我一直在尝试的 jQuery：

```
var tabs = $('#panels>li');

$('.tab').click(function (e) {
  e.preventDefault();
  var current_tab = tabs.eq($(this).index()).show("slide", { direction: "left" }, 1000);
  tabs.not(current_tab).hide("slide", { direction: "right" }, 1000);
});
$(".tab:first").click();
}); 
```

`.show()`如果我只使用and ，这很好用`.hide()`，但是如果我尝试添加幻灯片动画 ( `"slide", { direction: "left" }, 1000`)，它会中断（面板不出现）....知道我做错了什么吗？

hTML：

```
<div class="tab">1</div>
<div class="tab">2</div>
<div class="tab">3</div>

<ul id="panels">
 <li>Panel 1</li>
 <li>Panel 2</li>
 <li>Panel 3</li>
</ul> 
```

CSS：

```
#panels > li {
  display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:46:41.563

试试这个方法：

[http://jsfiddle.net/VgXK4/21/](http://jsfiddle.net/VgXK4/21/)

**jQuery：**

```
var panels = $('ul#panels li');
panels.css('left','-500px').first().css('left','0px');

$('.tab').click(function() {
    var target = $(this).index();
    panels.each(function(i){
        if( i != target) { $(this).stop().animate({'left':'-500px'},1000); }
        //hides all other
        else{ $(this).stop().animate({'left':'0px'},1000); }
        //shows matched ele
    });
});​ 
```

**CSS：**

```
ul#panels { position:relative; overflow:hidden; width:500px; height:500px; }
    ul#panels li { position:absolute; left:0px; top:0px; } 
```

# c# - 从类访问 Session 变量

> ID：13733289
> 
> 赞同：0
> 
> 时间：2012-12-05T22:03:27.137
> 
> 标签：c#, asp.net, .net

我从继承自 System.Web.UI.Page 的页面开始。Page.Session 此时不为空。该页面创建一个新类。该类继承自另一个继承自 System.Web.UI.UserControl 的类。一旦我进入课堂， Session 为空。会话状态需要什么才能带入课堂？

页面和类都在同一个 webapp 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:04:38.297

您是否尝试过使用：

```
HttpContext.Current.Session 
```

?

祝你好运！

# perl - 替换文件 b/c 中的文本时遇到问题 短语包含单引号

> ID：13733290
> 
> 赞同：1
> 
> 时间：2012-12-05T22:03:26.480
> 
> 标签：perl, bash

我无法替换文件中的文本，因为搜索短语包含单引号。

文件名名单.pinterp

```
&io
    path_to_input  = '.'
    input_name     = 'wrfout_d01_2006-09*00'
    path_to_output = '.'
  / 
```

我正在使用 bash 脚本。我想要改变的是：

```
path_to_output = '.' 
```

至：

```
path_to_output = '/myWorkDir/ALL_NEW/post_processed_files' 
```

我曾尝试使用 perl，但出现错误。

```
perl -pi -e 's/path_to_output = '.'/ path_to_output =   '/myWorkDir/ALL_NEW/post_processed_files'g;' namelist.pinterp

ERROR
./myPinterp.bash: line 13: path_to_output = '.': command not found
Bareword found where operator expected at -e line 1, near "s/path_to_output = ./ path_to_output = /myWorkDir"
syntax error at -e line 1, near "s/path_to_output = ./ path_to_output = /myWorkDir"
Execution of -e aborted due to compilation errors. 
```

我错过了什么？我还能用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:12:02.040

实际上，您有两个问题：路径中的正斜杠将被 Perl 视为分隔正则表达式。将 perl 命令用双引号括起来（并使用不同的分隔符进行替换）；做了：

```
perl -pi -e "s#path_to_output = '.'#path_to_output = '/myWorkDir/ALL_NEW/post_processed_files#g;" namelist.pinterp 
```

我`#`用来分隔正则表达式，并将外部单引号替换为双引号，其中单引号是可接受的（在大多数 Unix shell 中）。

# r - 将一个列表子集到另一个列表上

> ID：13733294
> 
> 赞同：1
> 
> 时间：2012-12-05T22:03:35.943
> 
> 标签：r, list, subset

我一直在查看`mapply`文档，但找不到足够接近的示例来帮助我入门。

我有清单`foo`和`bar`：

```
set.seed(123)
f   <- data.frame(y=1:10,x=sample(LETTERS,10))
foo <- list(f,f)
b   <- data.frame(x=c("J","U","A"))
ba  <- data.frame(x=c("J","W"))
bar <- list(b,ba) 
```

我可以使用以下子`f`集`b`：

```
result <- f[f$x %in% b$x ,] 
```

我想做这个子集，但对于整个列表`foo`，`bar`即on和on等的`foo[[1]]`子集......`foo[[1]]["x"]``bar[[1]]``foo[[2]]``foo[[2]]["x"]``bar[[2]]`

结果将是：

```
>foo
[[1]]
    y x
3   3 J
4   4 U
6   6 A

[[2]]
    y x
3   3 J
5   5 W 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:12:57.303

像这样……？

```
mapply(merge,foo,bar,SIMPLIFY = FALSE)
[[1]]
  x y
1 A 6
2 J 3
3 U 4

[[2]]
  x y
1 J 3
2 W 5 
```

# android - 使用 Maps API v2 以编程方式初始化 MapFragment

> ID：13733299
> 
> 赞同：50
> 
> 时间：2012-12-05T22:03:55.833
> 
> 标签：android, google-maps, android-fragments

我正在尝试将 MapFragment 添加到我当前的片段中。嵌套片段的使用仅限于 FragmentTransactions，您不能在布局中使用 xml 标签。另外，我希望在用户按下按钮时将其添加到主片段中。`getInstance()`因此，当用户按下该按钮并将其添加到适当的位置时，我正在以编程方式创建 MapFragment 。它显示正确，到目前为止一切都很好。

问题是，在附加 MapFragment 之后，我需要获取`GoogleMap` **对放置 Marker**的引用，但该`getMap()`方法返回 null （因为`onCreateView()`尚未调用片段）。

我查看了演示示例代码，发现他们使用的解决方案是在调用后初始化 MapFragment并`onCreate()`获取对 GoogleMap 的引用。`onResume()``onCreateView()`

我需要在 MapFragment 初始化后立即获取对 GoogleMap 的引用，因为我希望用户能够使用按钮显示或隐藏地图。我知道一个可能的解决方案是如上所述在开始时创建地图，然后将其可见性设置为消失，但我希望地图默认关闭，因此如果用户没有明确询问，它不会占用用户的带宽为了它。

我尝试了`MapsInitializer`，但也不起作用。我有点卡住了。有任何想法吗？到目前为止，这是我的测试代码：

```
public class ParadaInfoFragment extends BaseDBFragment {
// BaseDBFragment is just a SherlockFragment with custom utility methods.

private static final String MAP_FRAGMENT_TAG = "map";
private GoogleMap mMap;
private SupportMapFragment mMapFragment;
private TextView mToggleMapa;
private boolean isMapVisible = false;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment_parada_info, container, false);
    mToggleMapa = (TextView) v.findViewById(R.id.parada_info_map_button);
    return v;
}

@Override
public void onStart() {
    super.onStart();
    mToggleMapa.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (!isMapVisible) {
                openMap();
            } else {
                closeMap();
            }
            isMapVisible = !isMapVisible;
        }
    });
}

private void openMap() {
    // Creates initial configuration for the map
    GoogleMapOptions options = new GoogleMapOptions().camera(CameraPosition.fromLatLngZoom(new LatLng(37.4005502611301, -5.98233461380005), 16))
            .compassEnabled(false).mapType(GoogleMap.MAP_TYPE_NORMAL).rotateGesturesEnabled(false).scrollGesturesEnabled(false).tiltGesturesEnabled(false)
            .zoomControlsEnabled(false).zoomGesturesEnabled(false);

    // Modified from the sample code:
    // It isn't possible to set a fragment's id programmatically so we set a
    // tag instead and search for it using that.
    mMapFragment = (SupportMapFragment) getChildFragmentManager().findFragmentByTag(MAP_FRAGMENT_TAG);

    // We only create a fragment if it doesn't already exist.
    if (mMapFragment == null) {
        // To programmatically add the map, we first create a
        // SupportMapFragment.
        mMapFragment = SupportMapFragment.newInstance(options);
        // Then we add it using a FragmentTransaction.
        FragmentTransaction fragmentTransaction = getChildFragmentManager().beginTransaction();
        fragmentTransaction.add(R.id.parada_info_map_container, mMapFragment, MAP_FRAGMENT_TAG);
        fragmentTransaction.commit();
    }
    // We can't be guaranteed that the map is available because Google Play
    // services might not be available.
    setUpMapIfNeeded(); //XXX Here, getMap() returns null so  the Marker can't be added
    // The map is shown with the previous options.
}

private void closeMap() {
    FragmentTransaction fragmentTransaction = getChildFragmentManager().beginTransaction();
    fragmentTransaction.remove(mMapFragment);
    fragmentTransaction.commit();
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the
    // map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = mMapFragment.getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            mMap.addMarker(new MarkerOptions().position(new LatLng(37.4005502611301, -5.98233461380005)).title("Marker"));
        }
    }
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-05T23:35:02.170

好的AnderWebs在[Google+](https://plus.google.com/109061484468633397346/posts/51zFuTpbfiD)上给了我答案，但是他太懒了.... emmm 忙到这里再写，所以这里是简短的版本：扩展`MapFragment`类并覆盖`onCreateView()`方法。完成此方法后，我们可以获得对 que`GoogleMap`对象的非空引用。

这是我的特殊解决方案：

```
public class MiniMapFragment extends SupportMapFragment {
    private LatLng mPosFija;

    public MiniMapFragment() {
        super();
    }

    public static MiniMapFragment newInstance(LatLng posicion){
        MiniMapFragment frag = new MiniMapFragment();
        frag.mPosFija = posicion;
        return frag;
    }

    @Override
    public View onCreateView(LayoutInflater arg0, ViewGroup arg1, Bundle arg2) {
        View v = super.onCreateView(arg0, arg1, arg2);
        initMap();
        return v;
    }

    private void initMap(){
        UiSettings settings = getMap().getUiSettings();
        settings.setAllGesturesEnabled(false);
        settings.setMyLocationButtonEnabled(false);

        getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(mPosFija,16));
        getMap().addMarker(new MarkerOptions().position(mPosFija).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker)));
    }
} 
```

现在在我之前的 Fragment 课程中

```
mMapFragment = MiniMapFragment.newInstance(new LatLng(37.4005502611301, -5.98233461380005)); 
```

也许它还不完美，因为显示地图时屏幕会闪烁。但不确定问题是因为这个还是其他原因。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-16T21:48:59.917

谢谢，发现这很有帮助。我发布了我稍微修改过的解决方案，因为当地图准备好时告诉父片段对我来说更简洁。此方法也适用于 saveInstanceState / restoreInstanceState 循环。

```
public class CustomMapFragment extends SupportMapFragment {

    private static final String LOG_TAG = "CustomMapFragment";

    public CustomMapFragment() {
        super();

    }

    public static CustomMapFragment newInstance() {
        CustomMapFragment fragment = new CustomMapFragment();
        return fragment;
    }

    @Override
    public View onCreateView(LayoutInflater arg0, ViewGroup arg1, Bundle arg2) {
        View v = super.onCreateView(arg0, arg1, arg2);
        Fragment fragment = getParentFragment();
        if (fragment != null && fragment instanceof OnMapReadyListener) {
            ((OnMapReadyListener) fragment).onMapReady();
        }
        return v;
    }

    /**
     * Listener interface to tell when the map is ready
     */
    public static interface OnMapReadyListener {

        void onMapReady();
    }
} 
```

用作嵌套片段：-

```
public class ParentFragment extends Fragment implements OnMapReadyListener {

    ...

    mMapFragment = CustomMapFragment.newInstance();
    getChildFragmentManager().beginTransaction().replace(R.id.mapContainer, mMapFragment).commit();

    @Override
    public void onMapReady() {
        mMap = mMapFragment.getMap();
    }
    ...
} 
```

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-05-02T02:40:26.703

这是我的解决方案，我从之前发布的代码中汲取灵感并对其进行了清理。我还添加了带有和不带有 GoogleMapOptions 参数的静态方法。

```
public class GoogleMapFragment extends SupportMapFragment {

    private static final String SUPPORT_MAP_BUNDLE_KEY = "MapOptions";

    public static interface OnGoogleMapFragmentListener {
        void onMapReady(GoogleMap map);
    }

    public static GoogleMapFragment newInstance() {
        return new GoogleMapFragment();
    }

    public static GoogleMapFragment newInstance(GoogleMapOptions options) {
        Bundle arguments = new Bundle();
        arguments.putParcelable(SUPPORT_MAP_BUNDLE_KEY, options);

        GoogleMapFragment fragment = new GoogleMapFragment();
        fragment.setArguments(arguments);
        return fragment;
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mCallback = (OnGoogleMapFragmentListener) getActivity();
        } catch (ClassCastException e) {
            throw new ClassCastException(getActivity().getClass().getName() + " must implement OnGoogleMapFragmentListener");
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = super.onCreateView(inflater, container, savedInstanceState);
        if (mCallback != null) {
            mCallback.onMapReady(getMap());
        }
        return view;
    }

    private OnGoogleMapFragmentListener mCallback;
} 
```

使用模式如下：

```
public class MyMapActivity implements OnGoogleMapFragmentListener {

    ...

    @Override
    public void onMapReady(GoogleMap map) {
        mUIGoogleMap = map;

        ...

    }

    ...

    private GoogleMap mUIGoogleMap;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-10T07:27:33.400

无需自定义`SupportMapFragment`，您可以使用以下代码直接执行此操作，

```
FragmentManager fm = getSupportFragmentManager(); // getChildFragmentManager inside fragments.
CameraPosition cp = new CameraPosition.Builder()
                    .target(initialLatLng) // your initial co-ordinates here. like, LatLng initialLatLng
                    .zoom(zoom_level)
                    .build();
SupportMapFragment mapFragment = SupportMapFragment.newInstance(new GoogleMapOptions().camera(cp));
fm.beginTransaction().replace(R.id.rl_map, mapFragment).commit(); 
```

添加这段代码`layout`

```
<RelativeLayout
       android:id="@+id/rl_map"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" /> 
```

这将直接加载`GoogleMap`，`Location`即initialLatLng。

# c++ - 如果指针设置为 NULL，则对它的任何引用或通过它的引用也不会为 NULL

> ID：13733301
> 
> 赞同：2
> 
> 时间：2012-12-05T22:04:05.487
> 
> 标签：c++, oop, object, null

如果指针设置为 NULL，则对它的任何引用或通过它的引用也不会为 NULL。这是一个可编译的示例，当您尝试运行它时会爆炸：

```
#include <string>
#include <iostream>

#define NULL 0

class Seedcoat {
public:
    //Seedcoat();
    std::string Name;
    int Weight;
};

class Seed {
public:
    //Seed();
    std::string Name;
    int Weight;
    Seedcoat* ItsSeedcoat;
};

class Apple {
public:
    //Apple();
    std::string Name;
    int Weight;
    Seed* ItsSeed;
};

int main()
{
///////Apple Objects Begin///////
    Apple       MyApple;
    Seed        MySeed;
    Seedcoat    MySeedCoat;

    MyApple.ItsSeed = &MySeed;
    MyApple.ItsSeed->ItsSeedcoat = &MySeedCoat;
    MyApple.ItsSeed->ItsSeedcoat->Weight = 2;

    if ( MyApple.ItsSeed != NULL) {
        std::cout << "The weight of the apple seed's seedcoat is " << MyApple.ItsSeed->ItsSeedcoat->Weight <<".\n";
    }

    MyApple.ItsSeed = NULL;

    if ( MyApple.ItsSeed->ItsSeedcoat != NULL) {
        std::cout << "The weight of the apple seed's seedcoat is " << MyApple.ItsSeed->ItsSeedcoat->Weight <<".\n";
    }

    return 0;
} 
```

所以我的问题是：为什么会这样

```
MyApple.ItsSeed->ItsSeedcoat != NULL 
```

返回真。我认为它不会因为 ItsSeed 设置为 NULL - 但它仍然尝试引用 ItsSeedcoat 的权重值 - 然后我认为它会爆炸，因为 ItsSeed 不存在。我意识到有一些简单的方法可以解决这个问题——这个例子只是为了展示我正在观察的行为。这有什么好担心的吗？- 或者这是正常行为？这样做的原因是什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:07:31.210

C++ 不会以这种方式握住你的手。将指针设置为 null 只会将该指针设置为 null。它不会像您在 Java 或 Python 中所期望的那样清除任何子对象或释放任何内存。

一旦将指针设置为 null，访问就不再合法，`MyApple.ItsSeed->ItsSeedcoat`因此任何事情都可能发生。

在您的特定问题中，我认为组合可能是一个更好的解决方案。但是，如果您确实需要在 C++ 中管理内存分配/释放，我强烈建议您使用适当的智能指针，它为您提供的功能与其他语言中的垃圾收集器大致相等。

我还建议不要定义`NULL`自己，因为某些标头已经为 C 定义了它。在 C++03 中，我通常建议使用文字`0`，而在 C++11 中，您可以使用`nullptr`关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:06:35.467

设置`MyApple.ItsSeed`为 NULL 后，不允许取消引用指针`MyApple.ItsSeed`，这意味着`MyApple.ItsSeed->ItsSeedcoat`不允许使用该表达式。

这不一定会引发异常，但它的行为是未定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:06:44.267

这是未定义的行为，任何事情都可能发生。

特别是，

```
MyApple.ItsSeed = NULL;
if ( MyApple.ItsSeed->ItsSeedcoat != NULL) 
```

不允许取消引用 NULL 指针。就这么简单。如果这样做，则任何行为都是合规的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:07:11.627

取消引用 NULL 指针会导致未定义的行为。为了访问成员，您必须取消引用已设置为 NULL`ItsSeedCoat`的指针。`ItsSeed`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T22:12:24.073

在您的示例中，您将作为 Seed* 的 MyApple.ItsSeed 设置为 NULL，然后当您执行 MyApple.ItsSeed->ItsS​​eedcoat 时，您尝试取消引用 NULL 指针。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T22:47:31.673

After setting a pointer to null, any references to that pointer are also null. In your code, however, you don't have references to the pointer; you have two, totally distinct pointer objects, and what you do to one has no effect on the other. (This is true in every language I know.)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T23:43:46.673

C++ does not implement the kind of behavior that you are describing. In some languages, an object keeps track of all "weak" pointers to it so that when that object is freed, all of those pointers gets NULL'ed automatically. C++ is not one of those language, however. When an object is freed, NO pointers to that object get NULL'ed automatically. When a particular pointer to an object gets NULL'ed, NO other pointers to the same object get NULL'ed automatically. If you need that kind of behavior, look at [`boost::weak_ptr`](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/weak_ptr.htm) or [`std::weak_ptr`](http://www.cplusplus.com/reference/memory/weak_ptr/).

# android - 从 DialogFragment 回调片段

> ID：13733304
> 
> 赞同：173
> 
> 时间：2012-12-05T22:04:14.427
> 
> 标签：android, android-fragments, callback, android-dialogfragment

问题：如何创建从 DialogFragment 到另一个 Fragment 的回调。就我而言，所涉及的 Activity 应该完全不知道 DialogFragment。

考虑我有

```
public class MyFragment extends Fragment implements OnClickListener 
```

然后在某个时候我*可以*做

```
DialogFragment dialogFrag = MyDialogFragment.newInstance(this);
dialogFrag.show(getFragmentManager, null); 
```

MyDialogFragment 的样子

```
protected OnClickListener listener;
public static DialogFragment newInstance(OnClickListener listener) {
    DialogFragment fragment = new DialogFragment();
    fragment.listener = listener;
    return fragment;
} 
```

但是，如果 DialogFragment 在其生命周期中暂停和恢复，则无法保证侦听器会在附近。Fragment 中的唯一保证是那些通过 Bundle 通过 setArguments 和 getArguments 传入的保证。

如果它应该是侦听器，则有一种方法可以引用活动：

```
public Dialog onCreateDialog(Bundle bundle) {
    OnClickListener listener = (OnClickListener) getActivity();
    ....
    return new AlertDialog.Builder(getActivity())
        ........
        .setAdapter(adapter, listener)
        .create();
} 
```

但我不希望 Activity 监听事件，我需要一个 Fragment。实际上，它可以是任何实现 OnClickListener 的 Java 对象。

考虑通过 DialogFragment 呈现 AlertDialog 的 Fragment 的具体示例。它有是/否按钮。如何将这些按钮按下发送回创建它的片段？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-12-05T22:46:53.573

所涉及的活动完全不知道 DialogFragment。

片段类：

```
public class MyFragment extends Fragment {
int mStackLevel = 0;
public static final int DIALOG_FRAGMENT = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState != null) {
        mStackLevel = savedInstanceState.getInt("level");
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("level", mStackLevel);
}

void showDialog(int type) {

    mStackLevel++;

    FragmentTransaction ft = getActivity().getFragmentManager().beginTransaction();
    Fragment prev = getActivity().getFragmentManager().findFragmentByTag("dialog");
    if (prev != null) {
        ft.remove(prev);
    }
    ft.addToBackStack(null);

    switch (type) {

        case DIALOG_FRAGMENT:

            DialogFragment dialogFrag = MyDialogFragment.newInstance(123);
            dialogFrag.setTargetFragment(this, DIALOG_FRAGMENT);
            dialogFrag.show(getFragmentManager().beginTransaction(), "dialog");

            break;
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch(requestCode) {
            case DIALOG_FRAGMENT:

                if (resultCode == Activity.RESULT_OK) {
                    // After Ok code.
                } else if (resultCode == Activity.RESULT_CANCELED){
                    // After Cancel code.
                }

                break;
        }
    }
}

} 
```

对话片段类：

```
public class MyDialogFragment extends DialogFragment {

public static MyDialogFragment newInstance(int num){

    MyDialogFragment dialogFragment = new MyDialogFragment();
    Bundle bundle = new Bundle();
    bundle.putInt("num", num);
    dialogFragment.setArguments(bundle);

    return dialogFragment;

}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    return new AlertDialog.Builder(getActivity())
            .setTitle(R.string.ERROR)
            .setIcon(android.R.drawable.ic_dialog_alert)
            .setPositiveButton(R.string.ok_button,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            getTargetFragment().onActivityResult(getTargetRequestCode(), Activity.RESULT_OK, getActivity().getIntent());
                        }
                    }
            )
            .setNegativeButton(R.string.cancel_button, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    getTargetFragment().onActivityResult(getTargetRequestCode(), Activity.RESULT_CANCELED, getActivity().getIntent());
                }
            })
            .create();
}
} 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2015-12-14T14:02:02.130

TargetFragment 解决方案似乎不是对话框片段的最佳选择，因为它可能`IllegalStateException`在应用程序被销毁和重新创建后创建。在这种情况下`FragmentManager`找不到目标片段，您将收到如下`IllegalStateException`消息：

> “关键 android:target_state: index 1 的片段不再存在”

它似乎`Fragment#setTargetFragment()`不是用于子片段和父片段之间的通信，而是用于兄弟片段之间的通信。

因此，替代方法是使用`ChildFragmentManager`父片段的创建这样的对话框片段，而不是使用活动`FragmentManager`：

```
dialogFragment.show(ParentFragment.this.getChildFragmentManager(), "dialog_fragment"); 
```

通过使用接口，您可以在`onCreate`方法中`DialogFragment`获取父片段：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        callback = (Callback) getParentFragment();
    } catch (ClassCastException e) {
        throw new ClassCastException("Calling fragment must implement Callback interface");
    }
} 
```

剩下的就是在这些步骤之后调用您的回调方法。

有关该问题的更多信息，您可以查看链接： [https ://code.google.com/p/android/issues/detail?id=54520](https://code.google.com/p/android/issues/detail?id=54520)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-06-16T18:38:39.903

我按照这个简单的步骤来做这些事情。

1.  `DialogFragmentCallbackInterface`使用类似的方法创建接口`callBackMethod(Object data)`。您会调用它来传递数据。
2.  现在您可以`DialogFragmentCallbackInterface`在片段中实现接口，例如`MyFragment implements DialogFragmentCallbackInterface`
3.  在`DialogFragment`创建时将您的调用片段设置`MyFragment`为创建`DialogFragment`使用`myDialogFragment.setTargetFragment(this, 0)`检查[setTargetFragment (Fragment fragment, int requestCode)的目标片段](http://developer.android.com/reference/android/app/Fragment.html#setTargetFragment(android.app.Fragment,%20int))

    ```
    MyDialogFragment dialogFrag = new MyDialogFragment();
    dialogFrag.setTargetFragment(this, 1); 
    ```

4.  `DialogFragment`通过调用将您的目标片段对象放入您的片段`getTargetFragment()`并将其转换为`DialogFragmentCallbackInterface`。现在您可以使用此接口将数据发送到您的片段。

    ```
    DialogFragmentCallbackInterface callback = 
               (DialogFragmentCallbackInterface) getTargetFragment();
    callback.callBackMethod(Object data); 
    ```

    这一切都完成了！只要确保你已经在你的片段中实现了这个接口。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-01-07T00:24:33.107

也许有点晚了，但可能会像我一样帮助其他有同样问题的人。

您可以在显示之前使用`setTargetFragment`on `Dialog`，在对话框中您可以调用`getTargetFragment`以获取参考。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-10-18T14:40:14.730

[Communicating with Other Fragments](http://developer.android.com/training/basics/fragments/communicating.html)指南说 Fragments 应该**通过相关的 Activity 进行**通信。

> 通常，您会希望一个 Fragment 与另一个 Fragment 进行通信，例如根据用户事件更改内容。所有 Fragment 到 Fragment 的通信都是通过关联的 Activity 完成的。两个 Fragment 永远不应该直接通信。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-12-05T23:43:54.620

您应该在片段类中定义一个`interface`并在其父活动中实现该接口。此处概述了详细信息[http://developer.android.com/guide/components/fragments.html#EventCallbacks](http://developer.android.com/guide/components/fragments.html#EventCallbacks)。代码看起来类似于：

分段：

```
public static class FragmentA extends DialogFragment {

    OnArticleSelectedListener mListener;

    // Container Activity must implement this interface
    public interface OnArticleSelectedListener {
        public void onArticleSelected(Uri articleUri);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnArticleSelectedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnArticleSelectedListener");
        }
    }
} 
```

活动：

```
public class MyActivity extends Activity implements OnArticleSelectedListener{

    ...
    @Override
    public void onArticleSelected(Uri articleUri){

    }
    ...
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-08-17T02:07:49.957

根据官方文档：

[片段#setTargetFragment](https://developer.android.com/reference/android/app/Fragment.html#setTargetFragment(android.app.Fragment,%20int))

> 此片段的可选目标。例如，如果此片段正在由另一个片段启动，并且完成后希望将结果返回给第一个片段，则可以使用此方法。此处设置的目标通过 FragmentManager#putFragment 跨实例保留。

[片段#getTargetFragment](https://developer.android.com/reference/android/app/Fragment.html#getTargetFragment())

> 返回由 setTargetFragment(Fragment, int) 设置的目标片段。

所以你可以这样做：

```
// In your fragment

public class MyFragment extends Fragment implements OnClickListener {
    private void showDialog() {
        DialogFragment dialogFrag = MyDialogFragment.newInstance(this);
        // Add this
        dialogFrag.setTargetFragment(this, 0);
        dialogFrag.show(getFragmentManager, null);
    }
    ...
}

// then

public class MyialogFragment extends DialogFragment {
    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        // Then get it
        Fragment fragment = getTargetFragment();
        if (fragment instanceof OnClickListener) {
            listener = (OnClickListener) fragment;
        } else {
            throw new RuntimeException("you must implement OnClickListener");
        }
    }
    ...
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-10-18T20:21:37.813

**推荐**的方法是使用新的[Fragment Result API](https://developer.android.com/guide/fragments/communicate#fragment-result)。

通过使用它，**您不需要覆盖 onAttach(context)**或**setTargetFragment()**，*现在已弃用*。

* * *

**1 - 在父**片段上添加一个结果监听器`onCreate`：

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)

    childFragmentManager.setFragmentResultListener("requestKey", this) { key, bundle ->
        val result = bundle.getString("bundleKey")
    }

} 
```

2- 在**子**片段上，设置结果（例如，在按钮单击侦听器上）：

```
button.setOnClickListener {
    val result = "resultSample"

    setFragmentResult("requestKey", bundleOf("bundleKey" to result))
} 
```

有关文档的更多信息：[https ://developer.android.com/guide/fragments/communicate#fragment-result](https://developer.android.com/guide/fragments/communicate#fragment-result)

*希望能帮助到你！*

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-06-22T07:34:25.607

**将侦听器设置为片段的正确方法是在附加**时设置它。我遇到的问题是从未调用过 onAttachFragment() 。经过一番调查，我意识到我一直在使用**getFragmentManager**而不是**getChildFragmentManager**

这是我的做法：

```
MyDialogFragment dialogFragment = MyDialogFragment.newInstance("title", "body");
dialogFragment.show(getChildFragmentManager(), "SOME_DIALOG"); 
```

将其附加在 onAttachFragment 中：

```
@Override
public void onAttachFragment(Fragment childFragment) {
    super.onAttachFragment(childFragment);

    if (childFragment instanceof MyDialogFragment) {
        MyDialogFragment dialog = (MyDialogFragment) childFragment;
        dialog.setListener(new MyDialogFragment.Listener() {
            @Override
            public void buttonClicked() {

            }
        });
    }
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-05-04T21:42:45.123

更新：请注意，如果有人感兴趣，我可以分享使用视图模型的更简单方法。

Kotlin 伙计们，我们开始吧！

所以我们遇到的问题是我们创建了一个活动，`MainActivity`在那个活动上我们创建了一个片段，`FragmentA`现在我们想在`FragmentA`调用它的基础上创建一个对话框片段`FragmentB`。我们如何在不经过的情况下从`FragmentB`back to获得结果？`FragmentA``MainActivity`

笔记：

1.  `FragmentA`是 的子片段`MainActivity`。为了管理在其中创建的片段，`FragmentA`我们将使用[`childFragmentManager`](https://developer.android.com/reference/android/support/v4/app/Fragment#getChildFragmentManager())which 来执行此操作！
2.  `FragmentA`是 的父片段，要从内部`FragmentB`访问，我们将使用.`FragmentA``FragmentB`[`parenFragment`](https://developer.android.com/reference/android/support/v4/app/Fragment#getParentFragment())

话虽如此，在里面`FragmentA`，

```
class FragmentA : Fragment(), UpdateNameListener {
    override fun onSave(name: String) {
        toast("Running save with $name")
    }

    // call this function somewhere in a clickListener perhaps
    private fun startUpdateNameDialog() {
        FragmentB().show(childFragmentManager, "started name dialog")
    }
} 
```

这是对话框片段`FragmentB`。

```
class FragmentB : DialogFragment() {

    private lateinit var listener: UpdateNameListener

    override fun onAttach(context: Context) {
        super.onAttach(context)
        try {
            listener = parentFragment as UpdateNameListener
        } catch (e: ClassCastException) {
            throw ClassCastException("$context must implement UpdateNameListener")
        }
    }

    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {
        return activity?.let {
            val builder = AlertDialog.Builder(it)
            val binding = UpdateNameDialogFragmentBinding.inflate(LayoutInflater.from(context))
            binding.btnSave.setOnClickListener {
                val name = binding.name.text.toString()
                listener.onSave(name)
                dismiss()
            }
            builder.setView(binding.root)
            return builder.create()
        } ?: throw IllegalStateException("Activity can not be null")
    }
} 
```

这是连接两者的接口。

```
interface UpdateNameListener {
    fun onSave(name: String)
} 
```

而已。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-08-22T10:37:24.883

我面临着类似的问题。我发现的解决方案是：

1.  就像 James McCracken 上面解释的那样，在 DialogFragment 中声明一个接口。

2.  在您的活动中实现接口（不是片段！这不是一个好习惯）。

3.  从您活动中的回调方法中，调用片段中所需的公共函数，该函数执行您想要执行的工作。

因此，它变成了一个两步过程：DialogFragment -> Activity，然后是 Activity -> Fragment

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-05T11:18:17.187

```
 this is work for me
    i think you can set callback in display method in your fragment,

    **in my fragment**

    val myDialogFragment=MyDialogFragment()
    myDialogFragment.display(fragmentManager!!,this) 
```

//我的片段实现了CallbackDialogFragment所以设置这个显示方法

```
 **in dialog fragment**

    lateinit var callBackResult: CallbackDialogFragment

    fun display(fragmentManager: FragmentManager, callback: CallbackDialogFragment) {
        callBackResult = callback
        show(fragmentManager,"dialogTag")
    } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-05-30T05:04:04.907

**更新：**

我根据我的 gist 代码创建了一个库，它使用`@CallbackFragment`and为您生成这些转换`@Callback`。

[https://github.com/zeroarst/callbackfragment](https://github.com/zeroarst/callbackfragment)。

该示例为您提供了将回调从片段发送到另一个片段的示例。

老答案：

我做了一个`BaseCallbackFragment`和注释`@FragmentCallback`。它当前扩展`Fragment`，您可以将其更改为`DialogFragment`并且可以使用。它按照以下顺序检查实现：getTargetFragment() > getParentFragment() > context (activity)。

然后你只需要扩展它并在你的片段中声明你的接口并给它注解，剩下的基本片段将完成。注解还有一个参数`mandatory`供你判断是否要强制fragment实现回调。

```
public class EchoFragment extends BaseCallbackFragment {

    private FragmentInteractionListener mListener;

    @FragmentCallback
    public interface FragmentInteractionListener {
        void onEcho(EchoFragment fragment, String echo);
    }
} 
```

[https://gist.github.com/zeroarst/3b3f32092d58698a4568cdb0919c9a93](https://gist.github.com/zeroarst/3b3f32092d58698a4568cdb0919c9a93)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-04T06:27:22.717

我从 Fragment LiveWallFilterFragment(receiving fragment) 得到结果到 Fragment DashboardLiveWall(calling fragment) 像这样......

```
 LiveWallFilterFragment filterFragment = LiveWallFilterFragment.newInstance(DashboardLiveWall.this ,"");

 getActivity().getSupportFragmentManager().beginTransaction(). 
 add(R.id.frame_container, filterFragment).addToBackStack("").commit(); 
```

在哪里

```
public static LiveWallFilterFragment newInstance(Fragment targetFragment,String anyDummyData) {
        LiveWallFilterFragment fragment = new LiveWallFilterFragment();
        Bundle args = new Bundle();
        args.putString("dummyKey",anyDummyData);
        fragment.setArguments(args);

        if(targetFragment != null)
            fragment.setTargetFragment(targetFragment, KeyConst.LIVE_WALL_FILTER_RESULT);
        return fragment;
    } 
```

setResult 回到调用片段，如

```
private void setResult(boolean flag) {
        if (getTargetFragment() != null) {
            Bundle bundle = new Bundle();
            bundle.putBoolean("isWorkDone", flag);
            Intent mIntent = new Intent();
            mIntent.putExtras(bundle);
            getTargetFragment().onActivityResult(getTargetRequestCode(),
                    Activity.RESULT_OK, mIntent);
        }
    } 
```

**onActivityResult**

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == KeyConst.LIVE_WALL_FILTER_RESULT) {

                Bundle bundle = data.getExtras();
                if (bundle != null) {

                    boolean isReset = bundle.getBoolean("isWorkDone");
                    if (isReset) {

                    } else {
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-04-27T21:22:45.673

更改进的方法是只使用`newInstance`and `interface`。

这是一个需要的片段`DailogFragment`

```
public class Fragment extends Fragment implements returnPinInterface {
....
....
public View onCreateView(@NotNull LayoutInflater inflater, ViewGroup 
container,Bundle savedInstanceState) {

// A simple call to show DialogFragment

   btnProceed.setOnClickListener(v -> {
        fragment = DailogFragment.newInstance(this);
        fragment.show(getChildFragmentManager(),null );
        fragment.setCancelable(false);
    });

   //Grab whatever user clicked/selected/ or typed
   @Override
   public void onPinReturn(String s) {
      Log.d("ReturnedPin", s);
   }
} 
```

你的 DialogFragment 来了

```
public class PinDialogFragment extends DialogFragment {

 //Create a static variable to help you receive instance of fragment you 
 //passed
public static Fragment fragm;

  // Create new Instance and grab the object passed in Fragment up 
  //there
  public static PinDialogFragment newInstance(Fragment frag) {
    PinDialogFragment fragment = new PinDialogFragment();
    fragm = frag;
    return fragment;
  }

public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
   View v = inflater.inflate(R.layout.fragment_pin, container, false);

  //
   btn.setOnClickListener(btn ->                         
   listener.onReturnPin("1234"));

   return v;
}

//Use the Fragm to instantiate your Interface

@Override
public void onAttach(Context context) {
    super.onAttach(context);

    if (fragm instanceof ReturnPinInterface) {
        listener = (ReturnPinInterface) fragm;
    } else {
        throw new RuntimeException("you must implement ReturnPinInterface");
    }
}
} 
```

享受！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-06-20T05:05:40.800

我用 RxAndroid 以一种优雅的方式解决了这个问题。在 DialogFragment 的构造函数中接收一个观察者，并在调用回调时订阅 observable 并推送该值。然后，在您的 Fragment 中创建 Observer 的内部类，创建一个实例并将其传递给 DialogFragment 的构造函数。我在观察者中使用了 WeakReference 来避免内存泄漏。这是代码：

BaseDialogFragment.java

```
import java.lang.ref.WeakReference;

import io.reactivex.Observer;

public class BaseDialogFragment<O> extends DialogFragment {

    protected WeakReference<Observer<O>> observerRef;

    protected BaseDialogFragment(Observer<O> observer) {
        this.observerRef = new WeakReference<>(observer);
   }

    protected Observer<O> getObserver() {
    return observerRef.get();
    }
} 
```

DatePickerFragment.java

```
public class DatePickerFragment extends BaseDialogFragment<Integer>
    implements DatePickerDialog.OnDateSetListener {

public DatePickerFragment(Observer<Integer> observer) {
    super(observer);
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
}

@Override
public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
        if (getObserver() != null) {
            Observable.just(month).subscribe(getObserver());
        }
    }
} 
```

MyFragment.java

```
//Show the dialog fragment when the button is clicked
@OnClick(R.id.btn_date)
void onDateClick() {
    DialogFragment newFragment = new DatePickerFragment(new OnDateSelectedObserver());
    newFragment.show(getFragmentManager(), "datePicker");
}
 //Observer inner class
 private class OnDateSelectedObserver implements Observer<Integer> {

    @Override
    public void onSubscribe(Disposable d) {

    }

    @Override
    public void onNext(Integer integer) {
       //Here you invoke the logic

    }

    @Override
    public void onError(Throwable e) {

    }

    @Override
    public void onComplete() {

    }
} 
```

你可以在这里看到源代码：[https ://github.com/andresuarezz26/carpoolingapp](https://github.com/andresuarezz26/carpoolingapp)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-29T08:45:36.440

[官方 Android 文档](https://developer.android.com/guide/topics/ui/dialogs#PassingEvents)`onAttach`中建议使用。因此，我们可以利用该方法。

确保您的父片段实现了一个监听器，例如`OnPopupButtonClickListener`：

```
public interface OnPopupButtonClickListener {
   void onPositiveButtonClicked();
   void onNegativeButtonClicked();
} 
```

在您的父片段中显示您的`DialogFragment`实例，使用`getChildFragmentManager()`：

```
PopupDialogFragment dialogFragment = new PopupDialogFragment();
dialogFragment.show(getChildFragmentManager(), "PopupDialogFragment"); 
```

在扩展`DialogFragment`实例的对话框类中添加此方法：（请注意，我们正在检索我们的父片段，通过`getParentFragment()`它实现我们的自定义侦听器接口`OnPopupButtonClickListener`

```
@Override
public void onAttach(@NonNull @NotNull Context context) {
   super.onAttach(context);
   // Verify that the host activity implements the callback interface
   try {
      listener = (OnPopupButtonClickListener) getParentFragment();
   } catch (ClassCastException e) {
      // The activity doesn't implement the interface, throw exception
      throw new ClassCastException(getActivity().toString()
                    + " must implement OnPopupButtonClickListener");
   }
} 
```

在您的对话框中，您可以在需要时使用您的侦听器`DialogFragment`，例如：

```
Button positiveButton = view.findViewById(R.id.positiveButton);
positiveButton.setOnClickListener(v -> {
    if (listener != null) {
       listener.onPositiveButtonClicked();
       getDialog().dismiss();
    }
}); 
```

# python - 如何在python中循环遍历一个csv文件并将csv文件的每一部分输出到一个新文件中？

> ID：13733305
> 
> 赞同：1
> 
> 时间：2012-12-05T22:04:14.270
> 
> 标签：python, python-3.x

我在 excel 中有一个包含 2000 行数据的 csv 文件。我想将 100 行数据输出到不同的文本文件。但是我不知道如何做到这一点。我所能做的就是将文件输出到一个文件中。我已经在 Python Pyscripter 中读取了 CSV 文件数据，然后将文件写入单个文件，如下所示：

```
def read_csv(self):
    with open(self.data, newline='') as f:
        reader = csv.reader(f)
        for row in reader:
            self.content.append(row)

def write_txt(self):
    f = open(self.txtoutput, 'w')
    for row in self.content:
        f.write(', '.join(row) + '\n')
    f.close() 
```

但是，我希望将 2000 行数据中的每 100 行输出到不同的文本文件。谁能指出我正确的方向。注意：我使用的是 Python3。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:36:59.183

一次以 100 行的块迭代 csv 文件，并将每个块写入单独的文件：

```
with open(csv_filename, newline='') as file:
    chunks = zip(*[csv.reader(file)] * 100) # assume nrows % 100 == 0
    for i, rows in enumerate(chunks):
       with open("out%d.csv" % (i,), 'w', newline='') as output_file:
           csv.writer(output_file).writerows(rows) 
```

请参阅[以块为单位迭代列表的最“pythonic”方式是什么？](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:28:17.890

```
def writeText(self):
    for index, offset in enumerate(range(0, len(self.content), 100)):
        with open(self.txtoutput + '{:03}'.format(index) + '.txt', 'w') as file:
            for eachRow in self.content[offset, offset+100]:
                file.write(', '.join(eachRow) + '\n') 
```

有时没有额外的变量很有趣。这是@FJ 解决方案的无时间版本。我用前导 0 格式化递增索引，以便它们在文件列表中方便地排序。

具有可调 rowCount 的列表理解解决方案可能看起来像（尚未对此进行测试）：

```
def writeText(self):
    rowCount = 100
    for index, eachGlump in enumerate(self.content[i:i+rowCount] for i in range(0, len(self.content), rowCount)):
        with open(self.txtoutput + '{:03}'.format(index) + '.txt', 'w') as file:
            for eachRow in eachGlump:
                file.write(', '.join(eachRow) + '\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:11:32.140

就像是

```
def write_txt(self):

    for index, row in enumerate(self.content):

        if index % 100 == 0:
            f = open(self.txtoutput + str(index) + ".txt", 'w')
            if index > 0:
                f.close()
        f.write(', '.join(row) + '\n')

    f.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:11:50.080

像下面这样的东西应该可以工作：

```
def write_txt(self):
    i = 0
    while i < len(self.content):
        with open(self.txtoutput + str(i/100), 'w') as f:
            for row in self.content[i:i+100]:
                f.write(', '.join(row) + '\n')
        i += 100 
```

由于您没有指定应如何命名不同的文本文件，我只是在`self.txtoutput`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T22:07:56.053

例如：您有一个计数器，每行增加一个，一旦达到一百，您就关闭输出文件并打开一个新文件。

# algorithm - 我们如何通过算法计算最大可能体积的盒子？

> ID：13733309
> 
> 赞同：2
> 
> 时间：2012-12-05T22:04:32.923
> 
> 标签：algorithm

> 约翰尼需要为他的物理课项目制作一个矩形框。他买了 P cm 的铁丝和 S cm2 的特种纸。他想用所有的电线（12 个边）和纸（6 个边）来制作盒子。
> 
> 约翰尼能做的最大盒子体积是多少？
> 
> 输入
> 
> 第一行包含 t，测试用例的数量（大约 10 个）。然后是 t 个测试用例。每个测试用例在一行中包含两个整数 P 和 S (1 ≤ P ≤ 40000, 1 ≤ S ≤ 20000)。您可以假设对于给定的输入案例总是存在一个最优解。
> 
> 输出
> 
> 对于每个测试用例，打印一个实数，它是 Johnny 可以制作的最大盒子体积，四舍五入到小数点后两位。
> 
> 示例输入：

```
2
20 14
20 16 
```

> 输出：

```
3.00
4.15 
```

> 输出细节
> 
> 第一种情况：最大盒子的尺寸可能是3、1和1。
> 
> 第二种情况：最大盒子的尺寸可能是7/3、4/3和4/3。

这是来自 www.codechef.com 的练习题。名字是“[最好的盒子](http://www.codechef.com/problems/J7)”。我不想要这个的代码。我只想知道我们如何解决这个问题？任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T22:13:54.290

您实际上是在尝试解决：

```
maximize V=a*b*c

subject to constraints:

4a+4b+4c = P 
2ab + 2ac + 2bc = S 
```

这是一个可以使用[拉格朗日乘数](http://en.wikipedia.org/wiki/Lagrange_multiplier)解决的数学问题（将其余部分留给您作为练习 - 它主要是技术性的，如果小心缓慢地完成，应该不是问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:18:39.763

只是为了好玩，这是一个无微积分的答案。

考虑到约束：

```
4a+4b+4c = P 
2ab + 2ac + 2bc = S 
```

我们可以将这些重写为：

```
a+b+c = P/4
(a+b+c)^2 - (a^2+b^2+c^2) = S 
```

或者

```
a+b+c = P/4
a^2+b^2+c^2 = P^2/16 - S 
```

换句话说：解决方案位于与主轴相交的平面`P/4`和以原点为中心的球体的交点上，半径为`P^2/16-S`。这个交叉点是一个圆圈。从上面看，它看起来像一个椭圆，其中心与原点成 45 度，短轴沿同一条线。而且：

1.  中心位于`(P/12,P/12,P/12)`。
2.  半径为`r = Sqrt(P^2/16-S - 3(P/12)^2)=Sqrt(P^2/24-S)`。
3.  圆位于垂直于`(1,1,1)`

因此，如果我们在圆上有一个点，它将相对于 的中心有一个位移`(da,db,dc)`。由于 3.，我们知道`dc = -da - db`. 此外，平方和必须等于半径的平方，所以：

```
r^2 = da^2 + db^2 + (da+db)^2
    = 2(da^2 + db^2 + da db) 
```

现在，位移是圆的线性变换，因此我们可以将其参数化如下：

```
dc = -2A cos t
da = A cos t + B sin t
db = A cos t - B sin t 
```

要求 的长度`(da,db,dc)`为`r`，我们得到：

```
da^2 + db^2 + dc^2
    =   A^2 cos^2 t +  B^2 sin^2 t + 2AB cos t sin t
      + A^2 cos^2 t +  B^2 sin^2 t - 2AB cos t sin t
     + 4A^2 cos^2 t
    =  6A^2 cos^2 t + 2B^2 sin^2 t 
```

要使其独立`t`，我们必须有`6A^2 = 2B^2 = r^2`，所以

```
A = r / sqrt(6)
B = r / sqrt(2) 
```

所以

```
da = r/sqrt(6) cos t + r/sqrt(2) sin t
db = r/sqrt(6) cos t - r/sqrt(2) sin t 
```

并且音量变为

```
V = (P/12 + da)(P/12 + db)(P/12 - da - db)
  = P^3/1728 + (da db - da(da + db) - db(da + db))P/12 - da db (da + db)
  = P^3/1728 - (da^2 + db^2 + da db)P/12 - da db (da + db)
  = P^3/1728 - P r^2/24 - da db (da + db)
  = C - (r^2/6 cos^2 t - r^2/2 sin^2 t) 2 r/sqrt(6) cos t
  = C - r^3 sqrt(6)/18 (cos^2 t - 3 sin^2 t) cos t
  = C - D (4 cos^2 t - 3 cos^2 t - 3 sin^2 t) cos t
  = C - D (4 cos^3 t - 3 cos t)
  = C - D cos 3t 
```

其中 C 和 D 为正。显然，当`cos 3t`是时达到最大值`-1`，在这种情况下，音量为：

```
V = P^3/1728 - P(P^2/24-S)/24 + Sqrt(P^2/24-S)^3 Sqrt(6)/18 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T04:45:09.057

使用 具有多个约束的[拉格朗日乘数。](http://en.wikipedia.org/wiki/Lagrange_multiplier)f(x,y,z) = xzy - L1*g(x,y,z) - L2*h(x,y,z) 其中 g(x,y,z)=x + y+ zP/4 和 h (x,y,z)=xy + yz + xz-S/2

然后你做df/dx = 0, df/dy = 0, df/dz = 0, df/dL1 = 0, df/dL2 = 0，你会得到5个方程如下：

1.  yz = L1 + L2*(y+z)
2.  xz = L1 + L2*(x+z)
3.  xy = L1 + L2*(x+y)
4.  x + y + z = p
5.  xy + yz + xy = s

然后稍微算一下，你会发现 x = y = L2 从 1 2 和 3。然后 z = p - 2*L2 从 4 和 z = (s - 2*L2^2)/ 2*L2 从 5 . 现在你可以从上面两个方程计算L2的值了（还记得二次方程吗？）。体积为 V = xyz = L2 * L2 * (p - 2*L2)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-25T18:08:27.890

假设您在 codechef.com/problems/J7 遇到问题

python 2.7中的解决方案是

```
T = int(input())
for i in range(T):
    P = raw_input().split()
    S = int(P[1])
    P = int(P[0])
    V = (P**3)/1728.00 - P*( (P**2)/24.00-S)/24.00 + (((P**2)/24.00-S)**1.5)*(6**0.5)/18
    print("%.2f"%V) 
```

# html - 基于表单值的 PHP 重定向

> ID：13733312
> 
> 赞同：0
> 
> 时间：2012-12-05T22:04:45.473
> 
> 标签：html, forms, iwebkit

Okay, I have this form and I want to submit a page in the value and a directory in the action so when the option is selected it opens the page thats in the directory.

```
<form method="post" action="pages/">
<ul class="pageitem">
    <li class="textbox"><span class="header">Select a specific year</span>
    </li>
    <li class="select"><select name="pages/">
        <option value="1"></option>
        <option value="2007.php">2007</option>
        <option value="2008.php">2008</option>
        <option value="2009.php">2009</option>
        <option value="2010.php">2010</option>
        <option value="2011.php">2011</option>
        <option value="2012.php">2012</option>
        </select><span class="arrow"></span> 
    </li>
    <li class="button">
        <input name="Submit input" type="submit" value="Submit input" />
    </li>
</ul>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:50:30.277

知道了！而且我不需要提交按钮。我有一个朋友帮助我。这是表格：

```
<script type="text/javascript" src="pages/select.js"></script>
<form method="post" action="pages">
<ul class="pageitem">
    <li class="textbox"><span class="header">Select a specific year</span>
    </li>
    <li class="select">
    <select id="select1" onchange="goToPage('select1')">
        <option selected="selected"></option>
        <option value="pages/2007.php">2007</option>
        <option value="pages/2008.php">2008</option>
        <option value="pages/2009.php">2009</option>
        <option value="pages/2010.php">2010</option>
        <option value="pages/2011.php">2011</option>
        <option value="pages/2012.php">2012</option>
    </select>
    <span class="arrow"></span> 
    </li>
</ul>
</form> 
```

这是 select.js：

```
function goToPage( id ) {

   var node = document.getElementById( id );

   if( node &&
     node.tagName == "SELECT" ) {

     window.location.href = node.options[node.selectedIndex].value;

   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:09:28.573

使用 jQuery：

```
$('select').change(function () {
    $(this).closest('form').attr('action', 'pages/' + $('option:selected', this).val());
}); 
```

使用 PHP（短版 - 注意你应该删除 name="pages/" 上的斜杠）

```
header('Location: /pages/' + $_POST['pages']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:14:36.210

```
<?php
$valid_pages = array("2007","2008","2009","2010","2011","2012");
if(isset($_POST['pages']) && in_array($_POST['pages'], $valid_pages))
{
    header("Location: /pages/" . $_POST['pages'] . '.php', true, 303);
    exit;
}
?> 
```

和

```
<form method="post" action="pages">
    <ul class="pageitem">
        <li class="textbox"><span class="header">Select a specific year</span>
        </li>
        <li class="select"><select name="pages">
            <option value="1"></option>
            <option>2007</option>
            <option>2008</option>
            <option>2009</option>
            <option>2010</option>
            <option>2011</option>
            <option>2012</option>
            </select><span class="arrow"></span> 
        </li>
        <li class="button">
            <input name="Submit input" type="submit" value="Submit input" />
        </li>
    </ul>
    </form> 
```

# flash - 如何使用 Flash Actionscript 3.0 使 Click Counter 从 0 重新启动

> ID：13733313
> 
> 赞同：1
> 
> 时间：2012-12-05T22:04:46.377
> 
> 标签：flash, actionscript, click, counter

我们在学校有一个任务，我们要做一个动作：每次我点击绿色按钮，计数器计数，蓝色矩形向右移动，当它碰到框架的边界时，它从左边返回，所以重新启动计数器0。

我能够使其计数并且蓝色矩形返回，但是我需要帮助的是**如何使计数器重新启动以在矩形返回时从 0 开始计数？**我必须添加或更改哪些代码？

非常感谢您。

下面是我的脚本（我知道一团糟）

```
import fl.motion.MotionEvent;

var mynumber:int = 5

var numclick:int = 0;
mytext.text = ""

mynumber = mynumber+5;

trace(mynumber);

var myword:String = "Hello World!";

trace(5+5);
trace("5"+"5")

r1.x=0;
r1.y=0;

btn1.addEventListener(MouseEvent.CLICK,moveme);

function moveme(evt:MouseEvent):void {

    numclick++;

    if(r1.x < 550){

    r1.x = r1.x+100;

    mytext.text ="number of clicks: "+String(numclick);

    }else{
    r1.x = 0;

    mytext.text ="number of clicks: "+String(numclick);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:52:30.217

只需在 else 语句中为 numclick 变量分配零值

```
else{
    r1.x = 0;
    numclick=0;
    mytext.text ="number of clicks: "+String(numclick);
} 
```

# .net - 什么是托管模块？

> ID：13733320
> 
> 赞同：7
> 
> 时间：2012-12-05T22:05:15.363
> 
> 标签：.net, asp.net-mvc, iis

我最近一直在将一些 ASP.NET MVC 3 和 4 站点推向 IIS 7，并且遇到了重大问题。通常修复方法是在 Web.Config 中包含以下内容

```
<system.webServer>
   <httpErrors errorMode="Detailed" />
   <asp scriptErrorSentToBrowser="true"/>
   <modules runAllManagedModulesForAllRequests="true" />
</system.webServer> 
```

我的问题是，为什么？什么是托管模块以及它们如何与 ASP.NET MVC/C# 一起使用？

编辑：经过进一步测试，我发现 Server 2008 R2 和 IIS 7.5 上不存在此问题，但问题仍然存在，什么是托管模块，我如何知道我是否在我的代码中使用了一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T08:11:34.233

模块是插入到请求管道的某个点的 ASP.Net 组件；有许多“官方”模块，尽管[您也可以编写自己的](http://msdn.microsoft.com/en-us/library/ms227673(v=vs.100).aspx).

![IIS 模块列表](../Images/e4f115eca9f2ee746c8def045107c3ea.png)

如您所见，模块执行各种功能，包括输出缓存、各种授权和身份验证等等。

* * *

[最好不要运行*所有*托管模块](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)；相反，如果可以的话，弄清楚给定的应用程序或平台需要哪些模块。对于 ASP.Net MVC，这可能是路由模块：`System.Web.Routing.UrlRoutingModule`.

# c# - 再次显示后如何刷新表单？

> ID：13733328
> 
> 赞同：0
> 
> 时间：2012-12-05T22:05:42.257
> 
> 标签：c#, winforms

我正在 C# Windows 窗体应用程序中创建一个程序。

让我给你一个我正在做的事情的场景：

1.  登录程序（登录系统）
2.  该程序将确定用户的权限值（假设我是 3）
3.  根据权限值，主菜单将显示按钮 3a。如果用户的权限值大于 2，用户将查看所有按钮 3b。如果用户的权限值小于 2，用户只会看到 1 个按钮
4.  当我注销时，我正在使用 .hide 隐藏主菜单并再次显示登录表单。
5.  我登录另一个用户（权限值 = 1）
6.  所有按钮都将显示，而不仅仅是应该显示的 1。

有谁知道登录后如何根据权限值“重做”主菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:25:14.560

也许这个？

```
 const int firstButtonY = 20;
        const int padding = 20;
        int currentY = firstButtonY;

        foreach (var control in this.Controls)
        {
            if (control.GetType() != typeof(System.Windows.Forms.Button))
                continue;

            var curButton = (Button) control;

            if (!curButton.Visible)
                continue;

            curButton.Top = currentY;
            currentY += padding + curButton.Height;

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T03:18:45.560

而不是在 Form1 中打开新实例（在我的情况下为 Form3）`Form1_Load`

```
frm3 = new Form3(this); 
```

并在指定事件触发后显示

```
frm3.Show(); 
```

并取消`Form3_Closing`

```
private void Form3_FormClosing(object sender, FormClosingEventArgs e)
{
     e.Cancel = true;
     this.Hide();
} 
```

## 我们对每个触发的事件都这样做

```
frm3 = new Form3(this);
frm3.Show(); 
```

并评论创建新实例`Form1_Load`

```
//frm3 = new Form3(this); 
```

并评论隐藏 form3 部分

```
private void Form3_FormClosing(object sender, FormClosingEventArgs e)
{
    //e.Cancel = true;
    //this.Hide();
} 
```

因为`frm3.Show()`在 form3 之后`this.Hide()` **不会**触发

```
private void Form3_Load(object sender, EventArgs e) 
```

# ruby - 如何在本地机器上按顺序运行多个 ruby 脚本？

> ID：13733329
> 
> 赞同：0
> 
> 时间：2012-12-05T22:05:51.857
> 
> 标签：ruby, delayed-job

我有大约 5 或 6 个我想运行的 ruby​​ 脚本，一个接一个。这些都在我的本地机器（OS X）上，不会在服务器上运行。

每个都需要大约 15 分钟才能运行，我不想在手动运行其他之前等待每个完成。

如果不使用像 delay_job 或其他一些排队 gem 这样重的东西，我怎么能做到这一点？

或者我应该经历设置sidekiq或其他东西的麻烦吗？

谢谢。

PS 如果其中一个超时（我正在进行网络爬网，因此保持 HTTP 连接打开有时会给我带来问题），重新启动脚本会很好 - 这种情况偶尔会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:39:27.790

正如 Zabba 所说，编写一个脚本来调用你的脚本是一个很好的解决方案。您可以为此编写一个简单的 Bash 脚本，或者使用 Ruby，如下所示：

```
#!/usr/bin/ruby

SCRIPTS=%w{s1.rb s2.rb s3.rb}
MAX_RETRIES=3

SCRIPTS.each do |script|
  MAX_RETRIES.times do |n|
    system "ruby #{script}"
    break if $?.exitstatus == 0
  end
end 
```

这使用`system`Ruby 中的调用，并且`$?`是 Process::Status 对象，您可以使用它来捕获脚本的退出代码。

为了使其正常工作，您只需要确保您的脚本在成功时返回退出代码（使用`exit`命令） ，或者在失败时返回`0`非零值。`1`

存在一些明显的安全问题`system`，因此除非您在本地计算机上，否则请相应地设置您的权限:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:01:26.960

假设您的 ruby​​ 脚本在发生故障时返回非零错误代码，您的 bash 脚本可能如下所示：

```
#!/bin/bash

ruby script1.rb
if [[ $? -ne 0 ]]; then
    ... handle script1 errors here ...
fi

ruby script2.rb
if [[ $? -ne 0 ]]; then
    ... handle script2 errors here ...
fi

... etc, etc ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T23:45:52.940

只需在一行上从终端执行它们。这几乎可以肯定是最轻的解决方案。

```
ruby script0.rb; ruby script1.rb; ruby script2.rb; ruby script3.rb 
```

如果超时，这不会重新启动脚本，但您可能应该在脚本本身中处理它......

# html - Drupal CKEditor 格式下拉列表包含所有文本，而不仅仅是用 html 选择的文本

> ID：13733331
> 
> 赞同：0
> 
> 时间：2012-12-05T22:06:13.413
> 
> 标签：html, drupal, ckeditor, output, rte

在 Drupal 的 CKEditor 中，当我突出显示一个单词并应用格式下拉列表中的任何元素（格式化、地址、h1-h6 等...）时，它被应用于整个文本块。

即 5 月，董事长、总裁兼首席执行官乔·史密斯接待了 1,700 多名业务团队成员。

当我选择 Joe Smith 并对其应用 a`<h4>`时，整个句子都包含在`<h4>`.

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:25:25.253

那是因为这就是 HTML 的工作方式。段落内不能有标题，标题是它自己的元素。H 代表标题——这些元素必须是独立的，在它们自己的行上。您可以设置它们的样式，使其表现得好像它们是内联的，但它的实际 HTML 根本不能那样，它是无效的。格式下拉菜单用于选择包装器。如果你只是想让一些东西加粗，或者如果你使用“样式”下拉菜单（你可能必须添加它），那么它会按你的预期工作。但是标题不能那样工作。

# objective-c - Xcode：默认导入标头

> ID：13733332
> 
> 赞同：0
> 
> 时间：2012-12-05T22:06:16.300
> 
> 标签：objective-c, xcode, import, header

有没有办法在每次使用 Xcode 创建时在 .m 文件中默认导入某个标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:15:28.677

是的，您可以更改系统文件模板

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates/Cocoa Touch

或者您只需将该文件导入您的文件中，`ProjectName-Prefix.pch`以便在每个文件中都知道它..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:15:58.557

是的。您可以将其导入到预编译的标头中。`<AppName>-Prefix.pch`

# css - jquery mobile：listview的样式如何？

> ID：13733333
> 
> 赞同：0
> 
> 时间：2012-12-05T22:06:18.013
> 
> 标签：css, jquery-mobile

我似乎无法在样式表中找到 Listview。我想设置列表视图和按钮的高度/边距。

有人知道在哪里设置这个样式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:55:02.670

您确定要更改边距，而不是填充？当您更改边距时，背景颜色将不匹配。无论如何，试试这个 CSS 来改变填充：

```
.ui-listview li.ui-li {
    padding-top: 40px;
    padding-bottom: 40px;
}​ 
```

您可以使用相同的 CSS 选择器来更新边距。

# php - 使用 CodeIgniter 2 发送电子邮件时收到 PHP 错误/警告

> ID：13733341
> 
> 赞同：2
> 
> 时间：2012-12-05T22:06:38.193
> 
> 标签：php, codeigniter-2, sendmail, ion-auth

我正在使用**Ion Auth**并尝试实现忘记密码功能，该功能依赖于从 CI 发送的电子邮件。我的 LAMP 服务器在一个共享的 cPanel 帐户上，并且使用`sendmail`. 但是，我可以`php.ini`在目录中使用我自己的文件覆盖任何 PHP 设置`public_html`。

根据用于配置电子邮件发送的[CodeIgniter 2 文档](http://ellislab.com/codeigniter/user-guide/libraries/email.html)，我已经完成了以下操作...

1）创建了一个名为的文件位于`application/config/email.php`

2） `email.php`包含此代码：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/*
| -------------------------------------------------------------------
| EMAIL SENDING SETTINGS
| -------------------------------------------------------------------
*/

$config['protocol'] = 'sendmail';

/* End of file email.php */
/* Location: ./application/config/email.php */ 
```

3）在`application/config/ion_auth.php`文件中，我将此值设置为`TRUE`

```
$config['use_ci_email'] = TRUE; 
```

电子邮件已成功发送，但我在所有页面上都收到各种 PHP 错误警告。

这些出现在所有页面上，有时连续出现两到三次：

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：date() [function.date]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们为 'EST/-5.0/no DST' 选择了 'America/New_York'
> 
> 文件名：库/Email.php
> 
> 行号：704
> 
> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：date() [function.date]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们为 'EST/-5.0/no DST' 选择了 'America/New_York'
> 
> 文件名：库/Email.php
> 
> 行号：709

除了上述之外，这两个在忘记密码表单提交后也会出现：

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /home/username/codeigniter/system/core/Exceptions.php:185）
> 
> 文件名：库/Session.php
> 
> 行号：675
> 
> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /home/username/codeigniter/system/core/Exceptions.php:185）
> 
> 文件名：helpers/url_helper.php
> 
> 行号：540

我不确定为什么会收到这些错误警告，或者我应该如何配置我的电子邮件发送选项。我在文档中看不到与这些特定警告消息相关的任何其他电子邮件发送选项。当我删除我的`config/email.php`文件并将 Ion Auth 设置`use_ci_email`为`FALSE`时，错误警告消失了。

我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:09:25.000

这与 CI 无关。PHP 要求您设置设置`date.timezone`。

见[http://php.net/manual/en/datetime.configuration.php#ini.date.timezone](http://php.net/manual/en/datetime.configuration.php#ini.date.timezone)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:28:45.810

奇怪的一件事是 php.ini 的位置。我的意思是，在 public_html 文件夹中意味着 php.ini 可能被世界读取，这可能不是最好的想法。

无论如何，解决此问题的一种方法是在您的 public_html 文件夹中创建一个 test.php 文件，`phpinfo(INFO_CONFIGURATION);`并检查设置（如 include_path 或 allow_url_fopen）。然后在同一个文件夹中创建一个 php.ini（使用一些设置，如 allow_url_fopen），看看`phpinfo(INFO_CONFIGURATION)`.

我的猜测是：

*   public_html/ **.htaccess**文件告诉 Apache 从位于 public_html 文件夹的 php.ini 文件中读取 php 设置。
*   **您的托管服务提供商有带有 mod_suphp 的 cpanel（非常常见）。默认情况下，suPHP 允许每个用户根据需要设置自己的 php.ini。它覆盖了 sustem 的 php.ini。**

* * *

看到[这个链接](http://php.net/manual/en/configuration.file.per-user.php)和[这个](http://php.net/manual/en/configuration.changes.php)

* * *

在任何情况下，您都可以调整 php.ini 设置而不完全覆盖它：

*   在您的帐户根 .htaccess 中设置设置
*   创建一个读取和应用设置的脚本

请记住，只有标记为 PHP_INI_ALL 的运行时设置才能以这种方式被覆盖。[有关设置模式的更多信息，请参阅此链接，](http://php.net/manual/en/configuration.changes.modes.php)以及[可更改的 php.ini 设置的完整列表](http://php.net/manual/en/ini.list.php)

* * *

第一种方法非常简单：

.htaccess 文件

```
<IfModule mod_php5.c>
  php_value date.timezone "Europe/Lisbon"
  php_admin_flag engine on
</IfModule> 
```

第二个使用自定义 phpini.file

1.  创建一个名为`myphpini.ini`（或其他）的文件并将您的自定义设置放在那里。
2.  然后创建名为`configphp.php`（或其他）的文件，该文件读取`myphpini.ini`
3.  包含`configphp.php`在脚本顶部（或 CI2 引导文件中）

* * *

**配置php.php**

```
$config = parse_ini_file('myphpini.ini);
foreach ($config as $key => $val) {
    print 'before->' . ini_get($key) . '<br/>';
    ini_set($key, $val);
    print 'after->' . ini_get($key) . '<br/>';
} 
```

让我们了解结果如何

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T22:26:59.130

我不应该创建自己的自定义`php.ini`文件。我构造不正确，我把它放在了错误的位置。尽管我在发布问题时认为我知道问题所在，但我没有。我的坏`php.ini`文件一直是这个问题的根源。

# asp.net - Windows Azure 在没有调试的情况下启动时挂起

> ID：13733346
> 
> 赞同：3
> 
> 时间：2012-12-05T22:06:51.477
> 
> 标签：asp.net, azure

我目前正在运行 Azure SDK 1.6，并且在没有调试的情况下在本地启动 Azure 实例时遇到了麻烦。

它挂在“在 Windows Azure 计算模拟器中启动应用程序的角色......”步骤。

奇怪的是，当我点击调试时，项目开始了。

此外，当我在调试模式下运行时，该项目不会获取任何 HTML/CSS/代码更改。

有没有其他人遇到过这个问题和/或有解决方案？

我看过这个：

[http://social.msdn.microsoft.com/Forums/nl-NL/windowsazuredevelopment/thread/ad362016-16f6-459a-8022-9307aa5f910e](http://social.msdn.microsoft.com/Forums/nl-NL/windowsazuredevelopment/thread/ad362016-16f6-459a-8022-9307aa5f910e)

和这个：

[http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/05dbf84c-4929-40b4-82b2-f7747227d541](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/05dbf84c-4929-40b4-82b2-f7747227d541)

但两者似乎都无法解决问题。

# windows-phone-7 - 在 Windows Phone 8 中使用 Azure 服务总线 (pub/sub)

> ID：13733348
> 
> 赞同：0
> 
> 时间：2012-12-05T22:07:01.123
> 
> 标签：windows-phone-7, azure, windows-phone, windows-phone-8, azureservicebus

我想在 Windows Phone 8 上使用基于云的 pub/sub 实现。我正在尝试将两部以上的手机连接在一起（想想基于朋友风格的单词），我知道 Azure 可以做到这一点，但并非所有的 DLL 都是可在 Windows 手机 (7/8) 上使用。有没有人有很好的参考资料来在 Windows 手机上发布 pub/sub？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:43:14.847

对于广播/推送类型的通知，请查看 SignalR (http://signalr.net/)。Microsoft 正在将其作为 ASP.NET 平台的一部分： http: [//channel9.msdn.com/Events/Build/2012/3-034](http://channel9.msdn.com/Events/Build/2012/3-034)

它有一些非常好的功能，比如优雅，如果服务器/客户端不支持 WebSockets 等高级功能，则可以使用多种机制。这是一个理想的解决方案并且具有超强的可扩展性，因为它是基于服务器的并且在客户端上非常轻量。

# python - 如何从 HTML td 标记中去除所有属性，但在 python 中的行跨度？

> ID：13733351
> 
> 赞同：0
> 
> 时间：2012-12-05T22:07:07.220
> 
> 标签：python, regex, python-3.x, html-parsing

使用**python 3.3**我试图使一些正则表达式替换失败。

我想去除`td`标签的所有属性，除了`rowspan`属性（**最后的示例 td**）。

使用以下命令，我可以在`rowspan`存在时成功替换：

```
re.sub('(<td)[^>]*([\\s]rowspan[\\s]*=[\\s]*[0-9]*)[^>]*(>)', handle_td, file_contents) 
```

哪里`handle_td`是：

```
def handle_td(matchobj):
    new_td = ''
    for curr_group in matchobj.groups(''):
        if curr_group != '':
            new_td += curr_group
    return new_td 
```

但我也想照顾其余`td`的。这是我没有做到的。

如果我`?`在第二组之后添加它会将 td 标签更改为并且不保留该`rowspan`属性。

**我究竟做错了什么？我怎样才能解决这个问题？**

**我不喜欢运行另一个命令来处理其他命令，`td`但我没有管理......**

```
<td width=307 valign=top style='width:230.3pt;border:solid windowtext 1.0pt; border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
<td width=307 rowspan=4 style='width:230.3pt;border:solid windowtext 1.0pt; border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
<td width=307 valign=top style='width:230.3pt;border-top:none;border-left: none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt; padding:0cm 5.4pt 0cm 5.4pt'> 
```

这应该产生：

```
<td>
<td rowspan=4>
<td> 
```

* * *

我是这样管理的（**如果您有更好的方法，请随时添加**）：

```
# Leave only specific attributes for td tags 
def filter_td_attributes(matchobj):
    if matchobj.group(1) == "rowspan":
        return matchobj.group(1) + '=' + matchobj.group(2)

# Loop the attributes of the td tags
def handle_td(matchobj):
    new_td = re.sub("([a-zA-Z]+)[\\s]*=[\\s]*([a-zA-Z0-9:;.\\-'\\s]*)([\\s]|>)", filter_td_attributes, matchobj.group(0))
    new_td = re.sub("[\\s]*$", '', new_td)
    new_td = new_td + ">" # close the td tag
    return new_td

file_contents = re.sub('[\\s]*</p>[\\s]*</td>', '</td>', file_contents) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:39:43.237

当行跨度代码是可选的时，您必须使`[^>]*`代码的一部分非贪婪： make it `[^>]*?`。加在一起就变成了：

```
'(<td)[^>]*?([\\s]rowspan[\\s]*=[\\s]*[0-9]*)?[^>]*(>)' 
```

贪婪版本 ( `[^>]*`) 的意思是“给我尽可能多的非 >”字符，但我会接受零”。

非贪婪版本 ( `[^>]*?`) 的意思是“给我尽可能少的非 >”字符，同时仍然使整个正则表达式匹配”

# android - 允许区域移动房屋广告

> ID：13733352
> 
> 赞同：2
> 
> 时间：2012-12-05T22:07:09.177
> 
> 标签：android, mobile, sdk, ads, adwhirl

我有一个移动应用程序，允许用户选择他们所在的城市/地区。我实施了 AdWhirl 来维护自家广告，但似乎没有办法指定地区的概念。

有没有办法维护任何人都看过的区域自家广告？我是否必须/能够诉诸实施多个 SDK 密钥，每个地区一个？

# objective-c - UITableView 不滚动

> ID：13733354
> 
> 赞同：2
> 
> 时间：2012-12-05T22:07:12.713
> 
> 标签：objective-c, ios, uitableview, uiview, uitouch

所以，这是我的观点：

![在此处输入图像描述](../Images/55157649c54188b0f32f5bb7c1a68e58.png)

这是我的 UItableViewDelegate 和 DataSource

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 20;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"course"];
    cell.textLabel.text = [NSString stringWithFormat:@"%i" ,arc4random() % 10];
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%i" ,arc4random() % 10];
    return cell;
} 
```

这是结果：

![在此处输入图像描述](../Images/bf015e8e70693c41fe24a6fd31c14f09.png)

问题是 UItableView 不滚动。绝不。我真的不明白为什么......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T00:48:19.177

我曾经看到过类似的事情，每次我看到这种行为都是因为某些视图正在捕捉触摸。

明确地说，检查您的视图层次结构以查看视图是否与您的 tableView 重叠（即使 alpha 为 0.05 的视图也可以识别和消化触摸）。

我建议您采用控制器的根视图并递归调用视图层次结构以 NSLog 图像的大小。

你也可以用你的 tableView 做到这一点：

```
- (void)bringSubviewToFront:(UIView *)view
[self.view bringSubviewToFront:self.tableView]; 
```

如果您的表格视图在其他所有内容之前滚动，那么您肯定会知道某些视图正在捕获表格视图之前的触摸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T22:16:05.070

我试图达到类似的结果，它对我来说很好。试着检查你的选择

![UITableView 选项](../Images/d69c45dbb1a83217728694660145b494.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T22:37:43.377

`self.tableView.userInteractionEnabled = YES;`在实现时钟视图之后尝试说。

如果这不起作用，请尝试`[self.view bringSubviewToFront:self.tableView];`

# node.js - mongoDB 处理 1-n nn 关系的最佳实践是什么？

> ID：13733356
> 
> 赞同：4
> 
> 时间：2012-12-05T22:07:14.773
> 
> 标签：node.js, mongodb

在关系数据库中，1-n nn 关系意味着 2 个或更多表。但是在 mongoDB 中，因为可以像这样直接将这些东西存储到一个模型中：

```
Article{
  content: String, 
  uid: String,
  comments:[Comment]
} 
```

我对如何管理这些关系感到困惑。比如article-comments模型，是不是直接把所有的评论都存到article模型中，然后每次都把整个article对象读成JSON？但是，如果评论变得非常大怎么办？比如一个文章对象有1000条评论，这样的策略会不会每次都让GET过程变得很慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:14:59.517

我绝不是这方面的专家，但是我以前经历过类似的情况。

从我看到的几个演示中，是的，您应该直接将所有评论存储在行中。这将为您提供最佳性能（除非您期待一些荒谬的评论）。这样您就可以在文档中拥有所有内容。

将来，如果事情开始进展顺利并且您确实注意到事情进展缓慢，您可以做一些事情。您可以参考存储其他评论的位置来存储最新（插入任意数量）评论，然后将旧评论映射到“桶”中以保持快速加载时间。

但是最初我会将其存储在一个文档中。

所以会有一个看起来像这样的模型：

```
Article{    
    content: String, 
    uid: String,
    comments:[
        {"comment":"hi", "user":"jack"},
        {"comment":"hi", "user":"jack"},
    ]
    "oldCommentsIdentifier":12345
} 
```

如果您确实将评论从您的评论字符串中移出，那么只有 oldCommentsIdentifier 才会被填充，但是我真的不会为少于 1000 条甚至更多的评论这样做。需要在这里进行一些测试，看看“甜蜜”点是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:33:14.763

我认为答案的很大一部分取决于您期待多少评论。拥有一个包含可能增长到任意大大小的数组的文档是一个坏主意，原因有几个。首先，`$push`操作员往往很慢，因为它经常增加文档的大小，迫使它被移动。其次，最大 BSON 大小为 16MB，因此最终您将无法再扩大阵列。

如果您希望每篇文章都有大量评论，您可以创建一个单独的“comments”集合，其中每个文档都有一个“article_id”字段，其中包含它所关联的文章的 _id（或 uid，或文章独有的其他一些领域）。这将使检索特定文章的所有评论变得容易，方法是查询“article_id”字段与文章_id匹配的任何文档的“comments”集合。索引该字段将使查询非常快。

作为对您的问题的评论，limelights 发布的链接也是有关架构设计的一般提示的一个很好的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:33:45.593

> 但是如果通过 _id 链接文章和评论来解决这个问题，会不会有点回到关系数据库的设计？并且不知何故失去了成为 NoSQL 的本质？

并非如此，NoSQL 不仅仅是嵌入模型。应针对您的场景仔细考虑事实嵌入。

聚合框架确实解决了很多问题，这些问题可以通过嵌入需要用作文档本身的对象来解决。我将需要用作文档的子文档定义为：

*   界面中需要分页的文档
*   可能存在于多个根文档中的文档
*   需要在其组内进行高级排序的文档
*   在组中时将超过根文档 16meg 限制的文档

正如我所说，聚合框架确实解决了这个问题，但是您仍然在考虑实时或接近执行查询，这很像在 SQL 中对相同数量的文档执行相同的查询。

这种效果并不总是可取的。

您可以使用 $slice 运算符通过正常查询来实现分页（某种）分页，但这可能会包含与使用`skip()`和`limit()`处理大型结果集几乎相同的问题，这也是不可取的，因为您无法使用范围查询（将再次需要聚合框架）。即使有 1000 个子文档，我也看到了速度问题，不仅是我自己，其他人也有。

那么让我们回到最初的问题：如何管理模式。

现在，您不喜欢的答案是：这一切都取决于。

您的评论是否满足他们应该分开的需求？那么这可能是一个不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T09:31:03.807

没有最好的方法。在 MongoDB 中，您应该根据将要使用它的应用程序来设计您的集合。

如果您的应用程序需要显示带有文章的评论，那么我可以说最好将这些评论嵌入到文章集合中。否则，您将需要多次往返数据库。

在一种情况下嵌入不起作用。据我所知，MongoDB 中的文档大小限制为 16 MB。这实际上是相当大的。但是，如果您认为您的文档大小可以超过此限制，最好单独收集。

# java - 您如何检测 JFace 对话框（或其他模式组件）何时已在 Eclipse RAP 应用程序中打开？

> ID：13733362
> 
> 赞同：2
> 
> 时间：2012-12-05T22:07:48.853
> 
> 标签：java, eclipse, web-applications, jface, eclipse-rap

在我的 Eclipse RAP 应用程序中，每当任何其他组件打开对话框（或前台中的任何其他元素）时，我都需要让组件更改其外观。发生这种情况时，如何让我的组件检测到？我曾尝试使用 Display.addListener/addFilter，但是当 JFace 对话框打开时，它们不会收到事件。

[顺便说一句，这样做的原因是这个组件包含一个Java小程序，而Java小程序不服从z-ordering，所以小程序出现在前台对话框的顶部。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:05:53.230

如果为`SWT.Activate`事件添加显示过滤器，则应该通知每个变为活动的 shell，包括 JFace 对话框。这适用于我的 RAP 2.0 M3，但也适用于早期版本。

```
display.addFilter( SWT.Activate, new Listener() {
  public void handleEvent( Event event ) {
    System.out.println( display.getActiveShell() );
  }
} ); 
```

# regex - URL 重写模式以从路径中排除应用程序名称

> ID：13733368
> 
> 赞同：1
> 
> 时间：2012-12-05T22:08:19.220
> 
> 标签：regex, iis-7, url-rewriting

我第一次尝试使用 IIS 7 URL 重写功能，但我无法让我的正则表达式正常工作。看起来它应该很简单。我需要做的就是重写一个这样的 URL：

```
http://localhost/myApplication/MySpecialFolder 
```

到：

```
http://localhost/MySpecialFolder 
```

这可能吗？我希望正则表达式忽略原始 URL 中“myApplication”之前的所有内容，以便我可以使用“http://localhost”或“http://mysite”等。

这是我到目前为止所得到的：

```
^myApplication/MySpecialFolder$ 
```

但是使用 IIS 中的“测试模式...”功能，它说我的模式不匹配，除非我完全提供“myApplication/MySpecialFolder”。有谁知道我如何更新我的正则表达式，以便忽略“myApplication”之前的所有内容，并且以下 URL 将被视为匹配项？

```
http://localhost/myApplication/MySpecialFolder
http://mysite/myApplication/MySpecialFolder 
```

提前谢谢了！

**解决方案：**

我需要将我的正则表达式更改为：

```
myApplication/MySpecialFolder 
```

`^`开头没有，结尾也没有`$`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:30:52.953

您的正则表达式是正确的，模式将与域后第一个斜杠后开始的路径匹配。所以只有粗体部分将用于匹配：`http://localhost/`**myApplication/MySpecialFolder**

要将重写限制在特定域，您必须使用`Conditions`带有`Condition input`=的部分`{HTTP_HOST}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:29:23.060

除非 IIS 中的正则表达式有根本不同，否则您可能希望在开始时取出锚 ( `^`) 以进行匹配。

```
myApplication/MySpecialFolder$ 
```

克拉`^`告诉它这是字符串的开头，而美元符号`$`告诉它匹配结尾。正则表达式 like`abc`在字符串中的任何位置查找“abc”，`^abc`匹配以“abc”开头的字符串，匹配以“abc”`abc$`结尾的字符串，并且`^abc$`仅当整个字符串为“abc”时才匹配。

# c# - 如何从标志类型的枚举中“减 1”？

> ID：13733369
> 
> 赞同：0
> 
> 时间：2012-12-05T22:08:25.310
> 
> 标签：c#, enums, .net-2.0

我有一个`enum`这样的定义：

```
[Flags]
public enum NodeLevel
{
    Root = 1,
    GroupLevel = 2,
    DeptLevel = 4,
    ClassLevel = 8,
    SubclassLevel = 16
} 
```

我已将其定义为`Flags`可以对它们执行按位运算。现在我需要能够从关卡中“减 1”，以便给定一个特定关卡，我可以检索到下一个关卡。例如，一个对象包含一个值，`NodeLevel.ClassLevel`我需要发送`NodeLevel.DeptLevel`给一个方法。

由于`NodeLevel newLevel = currentLevel - 1;`不起作用，有没有人对我如何做到这一点有建议？我想这是一件非常简单的事情，但我的大脑现在不会想出它。

我正在使用.NET 2.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:09:41.347

假设您只有一个标志，您可以通过适当的转换除以 2：

```
NodeLevel newLevel = (NodeLevel) ((int)currentLevel / 2); 
```

（有趣的是，您可以在没有任何转换的情况下进行加减运算……但是乘法、除法、移位等需要双向转换。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T22:12:10.567

您也可以使用右移运算符。

```
NodeLevel newLevel = (NodeLevel) ((int)currentLevel >> 1) 
```

# python - 使用 ez_setup.py 从代理服务器后面安装 Python 的 easy_install

> ID：13733375
> 
> 赞同：12
> 
> 时间：2012-12-05T22:08:37.490
> 
> 标签：python, proxy, easy-install

在使用代理服务器的公司网络上，有没有办法使用 ez_setup.py 安装 Python 的 easy_install？目前，我收到一个连接超时：

```
Downloading http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11-py2.7.egg
Traceback (most recent call last):
  File "C:\jsears\python\ez_setup.py", line 278, in <module>
    main(sys.argv[1:])
  File "C:\jsears\python\ez_setup.py", line 210, in main
    egg = download_setuptools(version, delay=0)
  File "C:\jsears\python\ez_setup.py", line 158, in download_setuptools
    src = urllib2.urlopen(url)
  File "C:\jsears\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\jsears\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\jsears\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\jsears\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\jsears\Python27\lib\urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "C:\jsears\Python27\lib\urllib2.py", line 1177, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-13T15:29:42.260

在 Windows 7 上，使用 PowerShell，上面的代理设置将被忽略，该工具将无法工作。但我找到了解决方案。

我通过添加修改了例程 download_file_powershell

```
[System.Net.WebRequest]::DefaultWebProxy.Credentials = [System.Net.CredentialCache]::DefaultCredentials; 
```

在用于通过 WebClient 类下载的 scriptlet 中。下面是完整的 download_file_powershell 函数：

```
def download_file_powershell(url, target):
"""
Download the file at url to target using Powershell (which will validate
trust). Raise an exception if the command cannot complete.
"""
target = os.path.abspath(target)
cmd = [
    'powershell',
    '-Command',
    "[System.Net.WebRequest]::DefaultWebProxy.Credentials = [System.Net.CredentialCache]::DefaultCredentials;  (new-object System.Net.WebClient).DownloadFile(%(url)r, %(target)r)" % vars(),
]
subprocess.check_call(cmd) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-20T15:37:13.263

如果你已经设置了 http_proxy/https_proxy 环境变量，你可以告诉 ez_setup.py 不要使用 PowerShell。PowerShell 不使用 HTTP_PROXY/HTTPS_PROXY 环境变量。请遵循此响应中的第一部分。

对于可能不知道如何设置环境变量的人，请参阅第 2 节以上。

**停止 ez_setup.py 使用 PowerShell**

进入 ez_install.py 并找到以下部分：

```
def has_powershell():
    if platform.system() != 'Windows':
        return False
    cmd = ['powershell', '-Command', 'echo test']
    devnull = open(os.path.devnull, 'wb')
    try:
        try:
            subprocess.check_call(cmd, stdout=devnull, stderr=devnull)
        except:
            return False
    finally:
        devnull.close()
    return True 
```

并将其更改为

```
def has_powershell():
     return False 
```

ez_install.py 将使用您的环境 HTTP_PROXY/HTTPS_PROXY，可以从命令行或通过控制面板进行设置。

**临时命令行：**

```
set HTTP_PROXY=http://proxy.example.com
set HTTPS_PROXY=https://proxy.example.com 
```

*注意：*如果您这样做，您必须在运行这些命令的同一命令窗口中运行“python ez_setup.py”。

**永久命令行（仅限用户）：**

```
setx HTTP_PROXY "http://proxy.example.com"
setx HTTPS_PROXY "https://proxy.example.com" 
```

**永久命令行（机器又名所有用户）：**

```
setx HTTP_PROXY "http://proxy.example.com" /M
setx HTTPS_PROXY "https://proxy.example.com" /M 
```

**永久通过控制面板：**

1.  开始 -> 控制面板 -> 用户帐户
2.  在左侧面板上，单击“更改我的环境变量”
3.  单击“用户变量”或“系统变量”中的“新建..”（取决于您想要的）
4.  设置变量名称：HTTP_PROXY 和变量值：http://proxy.example.com
5.  单击“用户变量”或“系统变量”中的“新建..”（取决于您想要的）
6.  设置变量名称：HTTPS_PROXY 和变量值：https://proxy.example.com
7.  点击“确定”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T22:08:37.490

显然，您可以简单地设置一个环境变量：

> 导出 http_proxy=http://<user>:<password>@<proxy_host_name>:<port>

例如：

> 导出 http_proxy=http://admin:password@proxy.example.com:80

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-06T04:41:45.883

你也可以在你的代码中设置：

```
import urllib2

proxy = urllib2.ProxyHandler({'http':'http://username:password@proxy_host:port'})
auth = urllib2.HTTPBasicAuthHandler()
opener = urllib2.build_opener(proxy, auth, urllib2.HTTPHandler)
urllib2.install_opener(opener) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-05T18:11:45.750

我刚刚遇到了同样的问题，这是我找到的解决方案。我承认这并不理想，但这是我在 Windows 上找到解决此问题的唯一方法。

1.  下载。ez_setup.py。
2.  编辑以下行以显示文件希望将压缩包下载到的位置：

打印保存到

```
def download_setuptools(version=DEFAULT_VERSION, download_base=DEFAULT_URL,
                        to_dir=os.curdir, delay=15,
                        downloader_factory=get_best_downloader):
# making sure we use the absolute path
to_dir = os.path.abspath(to_dir)
tgz_name = "setuptools-%s.tar.gz" % version
url = download_base + tgz_name
saveto = os.path.join(to_dir, tgz_name)
print saveto
if not os.path.exists(saveto):  # Avoid repeated downloads
    log.warn("Downloading %s", url)
    downloader = downloader_factory()
    downloader(url, saveto)
return os.path.realpath(saveto) 
```

在我的情况下，当您执行脚本时，这会提供以下输出：“C:\Python27>python.exe ez_setup.py”

输出：

C:\Python27\setuptools-1.4.2.tar.gz 下载[https://pypi.python.org/packages/source/s/setuptools/setuptools-1.4.2.tar.gz](https://pypi.python.org/packages/source/s/setuptools/setuptools-1.4.2.tar.gz) 使用“2”调用“DownloadFile”的异常" argument(s): "远程服务器返回错误：(407) 需要代理身份验证。" 在 line:1 char:47 + (new-object System.Net.WebClient).DownloadFile <<<< (' [https://pypi.python.org/packages/source/s/setuptools/setuptools-1.4.2\. tar.gz](https://pypi.python.org/packages/source/s/setuptools/setuptools-1.4.2.tar.gz) ', 'C:\Python27\setuptools-1.4.2.tar.gz') + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : DotNetMethodException

1.  从上面的 https 链接下载包并将其放在我的情况下它期望的位置“C:\Python27\”

放置在该位置的这个文件会触发这个逻辑语句：

```
if not os.path.exists(saveto):  # Avoid repeated downloads
    log.warn("Downloading %s", url)
    downloader = downloader_factory()
    downloader(url, saveto)
return os.path.realpath(saveto) 
```

就像魔术一样，软件包将被安装。

# azure-powershell - Azure powershell - 访问计算模拟器

> ID：13733376
> 
> 赞同：0
> 
> 时间：2012-12-05T22:08:40.683
> 
> 标签：azure-powershell

您能否指出我如何在计算模拟器上使用 Get-AzureRole cmdlet？我试图找到调用 Set-AzureSubscription 和 Select-AzureSeubscription （用于计算模拟器）时需要传递的各种值，这似乎是 Get-AzureRole 的先决条件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:19:46.910

Get-AzureRole 可用于对抗 live azure。通过 start-azureemulator 命令或 csrun 命令行工具访问计算模拟器。

您实际上想获得有关该角色的哪些信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:35:44.863

您可以运行启动任务 cmd/powershell 并安装此处显示的 cmdlet 管理单元：http: [//blog.smarx.com/posts/windows-azure-startup-tasks-tips-tricks-and-gotchas](http://blog.smarx.com/posts/windows-azure-startup-tasks-tips-tricks-and-gotchas)

这将安装 Cmdlets 管理单元并执行您的 powershell 脚本。

虽然不确定您要做什么，但您确实有 OnStart() 方法，您可以在 web/worker 角色中以编程方式覆盖和添加代码。调试起来会容易得多。

# java - 带有位置参数的休眠本机查询

> ID：13733384
> 
> 赞同：5
> 
> 时间：2012-12-05T22:09:24.620
> 
> 标签：java, hibernate, jpa, hibernate-mapping

我编写了本机 sql 查询而不是使用 hql 并面临问题

**超出声明的序数参数数量的位置。请记住，序数参数是基于 1 的！职位：1**

```
<sql-query name="GET_ARRAY_MAX_POINT_QUESTION">
    <![CDATA[
        select TEST.TEST_ID as testId, TEST.VERSION_ID as versionId,
        PASSED_TEST.RESULT as userResult,
        PASSED_TEST.TIME_COMPLITED as timeComplited,
        sum(COMPLEXITY) as maxTestResult from QUESTION
        JOIN TEST_QUESTION ON QUESTION.QUESTION_ID = TEST_QUESTION.QUESTION_ID
        JOIN TEST ON TEST.TEST_ID=TEST_QUESTION.TEST_ID
        JOIN PASSED_TEST ON TEST.TEST_ID=PASSED_TEST.TEST_ID
        AND TEST.VERSION_ID=PASSED_TEST.VERSION_ID
        WHERE TEST.SUBJECT_ID = ?
        AND PASSED_TEST.USER_ID = ?
        GROUP BY PASSED_TEST.TEST_EVENT_ID
        ]]>
    </sql-query> 
```

和 DAO

```
return session
                .createSQLQuery(GET_ARRAY_MAX_POINT_QUESTION_NAME_QUERY)
                .addScalar(TEST_ID_RESULT_PARAM, StandardBasicTypes.LONG)
                .addScalar(VERSION_ID_RESULT_PARAM, StandardBasicTypes.LONG)
                .addScalar(USER_RESULT_PARAM, StandardBasicTypes.DOUBLE)
                .addScalar(MAX_TEST_RESULT_PARAM, StandardBasicTypes.DOUBLE)
                .addScalar(TIME_COMPLITED_RESULT_PARAM, StandardBasicTypes.DATE)
                .setParameter(0, subjectId)
                .setParameter(1, userId)
                .setResultTransformer(
                        Transformers.aliasToBean(PassedTestStatistic.class))
                .list(); 
```

我读到了，`//JPA specification. Only positional parameter binding may be portably used for native queries.`而且休眠使用 0 作为第一个索引。

**堆栈跟踪**

```
Caused by: org.hibernate.QueryParameterException: Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1
    at org.hibernate.engine.query.spi.ParameterMetadata.getOrdinalParameterDescriptor(ParameterMetadata.java:80)
    at org.hibernate.engine.query.spi.ParameterMetadata.getOrdinalParameterExpectedType(ParameterMetadata.java:86)
    at org.hibernate.internal.AbstractQueryImpl.determineType(AbstractQueryImpl.java:444)
    at org.hibernate.internal.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:416)
    at by.bsuir.testapp.database.hibernate.PassedTestHibernateDAO.getDataForPassedTestStatisticGraph(PassedTestHibernateDAO.java:73)
    at by.bsuir.testapp.service.PassedTestServiceImpl.getDataForPassedTestStatisticGraph(PassedTestServiceImpl.java:58)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy28.getDataForPassedTestStatisticGraph(Unknown Source)
    at by.bsuir.testapp.controller.StatisticPassedTest.createLinearModel(StatisticPassedTest.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) 
```

**//更新**

有趣的是，当我设置查询数字值时

```
WHERE TEST.SUBJECT_ID = 1
        AND PASSED_TEST.USER_ID = 1 
```

我明白了

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GET_ARRAY_MAX_POINT_QUESTION' at line 1 
```

但是在 MySQL 中我得到了成功的结果。

我该如何决定这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T09:10:58.923

你打电话

```
session.createSQLQuery 
```

但我相信你需要打电话

```
session.getNamedQuery 
```

使用命名查询时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T10:45:45.367

请检查

```
.setParameter(1, subjectId)
.setParameter(2, userId) 
```

正如异常跟踪所说，序数参数是基于 1 的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T23:03:16.560

查看您的来源

```
createSQLQuery(GET_ARRAY_MAX_POINT_QUESTION_NAME_QUERY) 
```

您必须有指向包含本机查询实际名称的字符串的变量，如下所示：

```
GET_ARRAY_MAX_POINT_QUESTION_NAME_QUERY = "GET_ARRAY_MAX_POINT_QUESTION" 
```

你在这里得到的错误：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GET_ARRAY_MAX_POINT_QUESTION' at line 1 
```

表示 createSqlQuery 没有按名称查找您的本机查询，而是尝试将名称“GET_ARRAY_MAX_POINT_QUESTION”作为原始 SQL 执行，就像您放入 s.createSqlQuery("Select * from...") 如果您看在[此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)的文档中，您将看到为了查找命名查询，即使是本地查询，您仍然必须使用 getNamedQuery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T13:18:17.090

您可以尝试使用命名参数而不是提供位置参数吗？

例如。

```
session
  .createSQLQuery("update table1 set variable = variable + 1 where id = :id")
  .setParameter("id", someId)
  .executeUpdate(); 
```

本机 SQL 查询支持位置参数和命名参数。

请阅读命名 SQL 查询：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13930](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13930)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-05T05:15:11.520

对于那些在谷歌上搜索错误消息的人：当我根本没有兴趣类别的映射时出现此错误。映射解决了这个问题。

# ruby - 红宝石/日期解析小时

> ID：13733394
> 
> 赞同：0
> 
> 时间：2012-12-05T22:10:02.547
> 
> 标签：ruby

我如何在下面解析这些字符串：

```
01
02
03 
```

这样我就可以使用 strftime('%I %p') 将其变为：

```
01 AM
02 AM
03 AM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:57:44.450

```
require 'date'
DateTime.strptime('01', '%H').strftime('%0l %p')
=> "01 AM" 
```

也就是说，如果字符串已经是“01”，为什么不在上面贴上 AM 或 PM？只能`to_i`用来确定是在中午之前/之后。

# php - PHP_CodeSniffer 每个文件嗅探许多类

> ID：13733400
> 
> 赞同：2
> 
> 时间：2012-12-05T22:10:48.397
> 
> 标签：php, exception, codesniffer

我们有一个正在使用的标准，我们在主类中创建异常以返回错误等......问题是，所有标准嗅探都不喜欢这样。我们正在为此编写自己的嗅探，但我想我会问为什么这是不可取的？

例如，我们有：

```
<?php
class FOO_EXCEPTION extends Exception   {   }
class FOO_EXCEPTION_BAR extends FOO_EXCEPTION   {   }
class FOO_EXCEPTION_POLE extends FOO_EXCEPTION  {   }

class FOO
{
    public function MethodDoingSomething()
    {
        if('some condition happens')    {
            throw new FOO_EXCEPTION_BAR();
        }

        if('some other condition')  {
            throw new FOO_EXCEPTION_POLE();
        }
        ...
    }
}
?> 
```

这允许我们的代码返回不同的异常来指示调用者发生了什么，但是如果专用的 try/catch 不可用，则可能仍然会捕获基本的异常。

这在使用数据库或其他外部对象时会派上用场，因为错误的性质可能会返回到调用堆栈更高的组件以处理错误。

例如，如果您正在删除一个文件，而该文件不存在，则代码可能会抛出异常，但如果调用者不担心该文件不存在，则可以选择忽略此异常，因为它试图无论如何删除它。但是，另一个调用者可能会因缺少删除时假定存在的文件而出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:47:40.587

我认为，您在问题中描述的编码标准是完全合理的。而且我认为为了您的项目的目的，最好调整“每个文件的标准多个类”嗅探，以便它**在这种特殊（特殊）情况下**与您的代码一起使用，而不是浪费您的时间来调整您的代码库以符合“对于这种特殊的嗅探，法律条文”。

我同意这样的断言，即通常最好*避免*将多个类定义放在一个文件中。但是（到目前为止）我读过的关于将**每个**异常派生类移动到其自己的单独文件中的每一个论点都让我印象深刻，因为它是通过降低可读性来“改进”代码的。作为一个人类，我没有从将我的代码与包含单行的文件混在一起中获得可维护性的好处。

确实，编写自动加载器更容易，例如，如果每个类都存在于自己的文件中。如果你从某种元语言生成/编译你的 PHP 代码，那么在你的目录结构中添加额外的级别不需要任何成本。但我拒绝这样的结论，即这种组织代码的方式实际上以任何对人类有用的方式改进了它。

**编辑：** 作为记录，我**可以看到****如果**它实际上包含一些“可测试”逻辑，那么将异常派生类的定义移动到它自己的文件中是一个好主意。在这种情况下，您可能需要在为*使用*该类的逻辑编写自动化测试时模拟/存根该类，这将要求您能够将类定义与使用它的逻辑分开加载。但这**不是**原始问题中描述的情况，异常派生类都是“空的”。

# wget - 使用 wget 返回 Web API 服务调用

> ID：13733403
> 
> 赞同：0
> 
> 时间：2012-12-05T22:10:55.880
> 
> 标签：wget

我们创建了一个 Web API 服务层，它将通过发布 URL 来启动工作。当 URL 在浏览器中发布时，此服务将返回该作业的 ID，如下所示：

[http://i.imgur.com/6EoEd.jpg?1](http://i.imgur.com/6EoEd.jpg?1)

我想自动化这个过程，所以我在命令行上使用 wget 来调用 URL。但是，我没有在 wget 响应中获得在浏览器中获得的返回码。这可能吗？

# http-headers - 移动请求和响应的标头是否计入带宽的一部分？

> ID：13733405
> 
> 赞同：0
> 
> 时间：2012-12-05T22:10:57.523
> 
> 标签：http-headers, bandwidth, cellular-network

我正在构建一个基于 Arduino 的设备，该设备需要通过 Internet 将数据发送到远程服务器。它需要尽可能频繁地执行此操作，但也要尽可能少地使用带宽。它可能会在 GSM/EDGE（蜂窝网络）上工作。

我想发送的数据大小约为 40 字节 - 非常小。我想大约每分钟一次将此数据包发送到服务器，但也偶尔会收到一个大约该大小的数据包作为响应。

我的服务器上的带宽没有问题 - 设备互联网连接上的带宽，即蜂窝数据。

*移动请求和响应的标头是否计入带宽的一部分？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:25:43.040

是的，总数据包大小是发送的所有数据。假设一个[TCP 数据包](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure)从一开始就丢失 20 个字节。如果您与 Wireshark 亲密接触，您可以确切地看到正在发生的事情。

# php - 命名空间——“使用”还是不“使用”？

> ID：13733406
> 
> 赞同：1
> 
> 时间：2012-12-05T22:11:05.443
> 
> 标签：php, namespaces

我最近一直在研究很多框架，特别是 Slim。现在，我不打算使用它，但无论如何都有一个问题。在 Slim 中，它使用命名空间。但是，它实际上并没有“使用”它们中的任何一个。你会看到`namespace Slim;`然后在主索引文件中它需要那个类，然后用它做一些事情。如果不使用命名空间，为什么要使用`use`它们？

ing 命名空间的功能/行为是什么`use`，而不是在开始编写代码之前放置`namespace xyz`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:15:57.177

把命名空间想象成盒子。

如果您要声明：

```
namespace myBox; 
```

以下代码将放在该框中。

```
class Test
{

   public function hello() {
      echo "Hello, world!\n";
   }

} 
```

如果您想在应用程序的另一部分中使用该类，您将执行以下操作：

```
$test = new myBox\Test(); 
```

这相当于：

```
use myBox\Test;

$test = new Test(); 
```

命名空间只是帮助您设计应用程序和组织事物。例如，在一个非常大的应用程序中，具有使用大量技术的框架，命名空间避免了两个类具有相同的名称。

# c# - 重新绘制画布时保持颜色。？

> ID：13733407
> 
> 赞同：0
> 
> 时间：2012-12-05T22:11:16.547
> 
> 标签：c#, wpf, canvas, colors, repaint

这是我的代码：

```
public void Repaint() {
        canvas1.Children.Clear();
        ObservableCollection<ClassBox> classes = viewModel.Classes;
        foreach (ClassBox j in classes) {
            // connect our ui element to the mouse handler if not done already
            if (!j.MouseActive) {
                j.Box.PreviewMouseLeftButtonUp += Handle_MouseUp;
                j.Box.PreviewMouseLeftButtonDown += Handle_MouseDown;
                j.Box.PreviewMouseMove += Handle_MouseMove;
                j.MouseActive = true;
                // Heres should the code be written (something like :)
                // j.Box.SetColor(Change_Color(value));
            }
            canvas1.Children.Add(j.Box);
       } } 
```

所以上面的代码展示了当我调用这个方法时这些盒子是如何被重绘的。工作正常，但现在代码的下一部分：

```
 private void Change_ColourBox(object sender, System.Windows.RoutedEventArgs e)
    {
        var element = sender as FrameworkElement;
        ObservableCollection<ClassBox> classes = viewModel.Classes;
        foreach (ClassBox j in classes)
        {
            // connect our ui element to the mouse handler if not done already
            if (sender == BoxStandard)
            {
                j.Box.Background = new SolidColorBrush(Colors.White);
                j.Box.Foreground = new SolidColorBrush(Colors.Black);
                Repaint();
            } } 
```

这段代码告诉我们应该在`"Change_Color"`按下按钮时改变颜色。我已经在 XAML 中实现了这些按钮，并给它们起了名字，在这种情况下`"BoxStandard"`。

下一个代码片段是我通过事件处理程序生成框的地方。

```
 private void Spawn_Box(object sender, System.Windows.RoutedEventArgs e) {
      viewModel.GetURController.AddAndExecute(new AddClassCommand(viewModel));
    } 
```

我要排好队：我为我的元素提供预定义的颜色，它们从它们开始。当我通过单击事件“Change_Color”更改颜色时，它们会更改为所需的颜色。但是，当我在画布上生成一个新元素时，它的颜色是预定义的。我想用改变的颜色生成它。

问你是否不明白我可以更深入地解释的问题！

*   ClassBox 是一个由盒子的属性组成的对象。重绘不仅适用于前景色/背景色，还计算盒子位置的差异

# angularjs - angularjs 有类似 jQuery 的 ajaxSetup 的东西吗？

> ID：13733414
> 
> 赞同：5
> 
> 时间：2012-12-05T22:11:35.290
> 
> 标签：angularjs

我浏览了文档，但找不到任何提及这一点的内容。我正在使用 Angular 的 $http 服务，并希望在每个 ajax 事件之前和每个 ajax 事件之后运行代码（在等待服务器响应时显示加载消息）。

我已经包含了 jQuery 并尝试这样做：

```
$(document).ready(function() {
    $('body').ajaxSend(function(event, jqXHR) {
        console.log('in jquery send');
    }) ;
}); 
```

但无法将消息记录到控制台。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T08:28:36.067

请查看有关 $http 服务的文档：http: [//docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.$http)

您将看到可以使用两个选项：

1.  **httpInterceptor**（请参阅文档中的**响应拦截器**部分） - 它允许您包装每个响应并在完成请求之前执行您想要的任何操作。它使用 Promise，因此在每次请求之后甚至可以很容易地执行一些异步操作。

2.  **请求/响应转换**（请参阅**转换请求和响应**） - 它允许您处理通过 $http 的每个请求和响应 - 所以这是我的选择，因为它允许您在请求之前和之后挂钩。

# mysql - mySQL 跨数据库/表更新让我大吃一惊

> ID：13733415
> 
> 赞同：1
> 
> 时间：2012-12-05T22:11:36.127
> 
> 标签：mysql

数据库`A`包含表`X`

数据库`B`包含表`Y and Z`

`A.X`包含字段`order_number`和`dude`

`B.Y`包含字段`order`，`dude_number` `B.Z`包含字段`other_dude_number`和`dude_type`

我想`A.X.dude`更新到`B.Y.dude_number`基于：`(B.Y.order = A.X.order_number) AND ((B.Z.other_dude_number = B.Y.dude_number) AND (B.Z.dude_type = 6))`

我已经抽出两个小时的 mySQL 查询来尝试让它工作。我几乎可以肯定我在某个地方需要一个**UNION**，但我对**UNION**还不够熟悉，无法使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:19:44.907

```
UPDATE A.X
  JOIN B.Y ON Y.`order` = X.order_number
  JOIN B.Z ON Z.other_dude_number = Y.dude_number
SET      X.dude = Y.dude_number
WHERE    Z.dude_type = 6 
```

# php - 编写 url 而不是串联的简洁方法

> ID：13733417
> 
> 赞同：0
> 
> 时间：2012-12-05T22:11:42.500
> 
> 标签：php, codeigniter

我发现自己在做这样的 URL：

```
$link = base_url('post') . '/' . $post_id . '/' . $slug . '/page/' . $page_num; 
```

形成[http://example.com/post/10/some-post-name/page/1](http://example.com/post/10/some-post-name/page/1)

不用说，它很乱，但我想不出替代方案？有没有更好的方法在其中编写带有变量的链接？

如果有涉及它的解决方案，我将使用 Codeigniter 作为框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:18:12.237

你有几种方法：

首先，通过 sprintf：

```
sprintf('%s/%s/%s/page/%s', base_url('post'), $post_id, $slug, $page_num); 
```

或通过数组内爆：

```
implode('/', array(base_url('post'), $post_id, $slug, 'page', $page_num)); 
```

或者，如果您将所有值放入变量中，则可以利用字符串插值。

```
$url = ...;
...
"$url/$post_id/$slug/page/$page_num"; 
```

当您考虑到变量赋值块时，最后一个更长，但它结合了简洁性和可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:15:42.063

使用[sprintf](http://php.net/manual/en/function.sprintf.php)：

```
$link = sprintf('%s/%d/%s/page/%d', base_url('post'), $post_id, $slug, $page_num); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:15:49.190

你可以这样做：

```
$link = site_url("post/{$post_id}/{$slug}/page/{$page_num}"); 
```

你真的应该使用[`site_url()`](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)而不是`base_url()`CI 链接。`base_url()`适用于非 CI 资产，如图像和 css。

`site_url()`将指向正确的前端控制器路径，因此您可以随意更新配置，并且使用它构建路径的所有内容都会相应更新。

我修改了我的答案。使用[大括号符号](http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)并避免使用额外的函数。您可以将参数数组传递给函数，如下所示：

```
$link = site_url(array('post', $post_id, $slug, 'page', $page_num)); 
```

但是使用数组比较慢。不过，如果您需要动态构建 url，这将很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T23:01:01.420

你可以用老式的方法来做一个函数！

```
function buildlink($base_url,$post_id,$slug,$page_num)
{
  return $base_url . '/' . $post_id . '/' . $slug . '/page/' . $page_num;
} 
```

像这样称呼它

```
$link = buildlink(base_url('post') ,$post_id, $slug ,$page_num); 
```

但也许我错过了一些东西

# c# - Datatable.GetErrors 返回不正确的数据行

> ID：13733423
> 
> 赞同：0
> 
> 时间：2012-12-05T22:12:14.857
> 
> 标签：c#, database, datatable, dataset, enterprise-library

我正在使用数据表在数据库中插入记录，利用企业库的数据块。

正如您将在下面的代码中看到的，我在数据集上发出 UpdateDataSet，然后在 DataTable 中查找错误，提取有问题的数据行。我必须生成一份关于这些错误记录的报告。

为了测试，我添加了一行符合数据库并被插入的行，添加了另一行违反 FK 约束的行。

```
 DbCommand command = _database.GetStoredProcCommand("SP_Simple_Insert");
            _database.AddInParameter(command, "JobID", DbType.Int32, "JobID", DataRowVersion.Current);
            ...
            ...
            ...

            int rowsaffected = _database.UpdateDataSet(dataSet, tableName, command, null, null, UpdateBehavior.Continue, batchSize); // batchsize is 1000

            LogMessage("SaveBatch", string.Format("BatchCount: {0}, AffectedRows: {1}", dataSet.Tables[0].Rows.Count, rowsaffected), Level.Info);

            if (dataSet.Tables[tableName].HasErrors)
            {
                DataRow[] rows = dataSet.Tables[tableName].GetErrors();
                LogMessage("SaveBatch", string.Format("Errors: {0}", rows.Length), Level.Debug);
            } 
```

当我查看从 GetErrors 方法返回的 Datarow 时，它实际上是插入到数据库中的那个。

当我在数据集中只有错误的行时，它会在错误中返回正确的行。

我不确定这是因为企业库还是其他原因。有一件事是肯定的，这不是它应该的样子。

# ruby - 使用 Nokogiri 和 Ruby 解析具有自定义结构的 XML

> ID：13733427
> 
> 赞同：-1
> 
> 时间：2012-12-05T22:12:41.390
> 
> 标签：ruby, xml, nokogiri

> **可能重复：**
> [Nokogiri/Xpath 命名空间查询](https://stackoverflow.com/questions/4690737/nokogiri-xpath-namespace-query)

我有一个这样的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Structure xmlns="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/message" xmlns:Structure="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/structure" xmlns:common="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/common" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/structure SDMXMessage.xsd">
  <Header>
    <ID>001-0001</ID>
    <Test>true</Test>
    <Name xml:lang="en">Producer deliveries of major grains, Canada and selected provinces</Name>
    <Name xml:lang="fr">Livraisons des producteurs des principaux grains, Canada et certaines provinces</Name>
    <Prepared>2012-11-22T18:42:35-05:00</Prepared>
    <Sender id="STATCAN" />
    <Receiver id="STATCAN" />
  </Header>
  <CodeLists>
    <structure:CodeList xmlns:structure="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/structure" id="GEO" agencyID="STATCAN" version="1.0" isFinal="false">
      <structure:Name xml:lang="en">Geography</structure:Name>
      <structure:Name xml:lang="fr">Géographie</structure:Name>
      <structure:Code value="7">
        <structure:Description xml:lang="en">Canada</structure:Description>
        <structure:Description xml:lang="fr">Canada</structure:Description>
      </structure:Code>
      <structure:Code value="8">
        <structure:Description xml:lang="en">Eastern Canada</structure:Description>
        <structure:Description xml:lang="fr">L'Est du Canada</structure:Description>
      </structure:Code>
      <structure:Code value="9">
        <structure:Description xml:lang="en">Quebec</structure:Description>
        <structure:Description xml:lang="fr">Québec</structure:Description>
      </structure:Code>
      <structure:Code value="10">
        <structure:Description xml:lang="en">Ontario</structure:Description>
        <structure:Description xml:lang="fr">Ontario</structure:Description>
      </structure:Code>
      <structure:Code value="3">
        <structure:Description xml:lang="en">Western Canada</structure:Description>
        <structure:Description xml:lang="fr">L'Ouest du Canada</structure:Description>
      </structure:Code>
      <structure:Code value="2">
        <structure:Description xml:lang="en">Prairie provinces</structure:Description>
        <structure:Description xml:lang="fr">Provinces des Prairies</structure:Description>
      </structure:Code>
      <structure:Code value="4">
        <structure:Description xml:lang="en">Manitoba</structure:Description>
        <structure:Description xml:lang="fr">Manitoba</structure:Description>
      </structure:Code>
      <structure:Code value="5">
        <structure:Description xml:lang="en">Saskatchewan</structure:Description>
        <structure:Description xml:lang="fr">Saskatchewan</structure:Description>
      </structure:Code>
      <structure:Code value="6">
        <structure:Description xml:lang="en">Alberta</structure:Description>
        <structure:Description xml:lang="fr">Alberta</structure:Description>
      </structure:Code>
      <structure:Code value="1">
        <structure:Description xml:lang="en">British Columbia</structure:Description>
        <structure:Description xml:lang="fr">Colombie-Britannique</structure:Description>
      </structure:Code>
    </structure:CodeList>
    <structure:CodeList xmlns:structure="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/structure" id="TYP" agencyID="STATCAN" version="1.0" isFinal="false">
      <structure:Name xml:lang="en">Type of grain</structure:Name>
      <structure:Name xml:lang="fr">Type de céréales</structure:Name>
      <structure:Code value="1">
        <structure:Description xml:lang="en">All grains, total</structure:Description>
        <structure:Description xml:lang="fr">Céréales, totaux</structure:Description>
      </structure:Code>
      <structure:Code value="2">
        <structure:Description xml:lang="en">Wheat, total</structure:Description>
        <structure:Description xml:lang="fr">Blé, total</structure:Description>
      </structure:Code>
      <structure:Code value="3">
        <structure:Description xml:lang="en">Wheat, excluding durum</structure:Description>
        <structure:Description xml:lang="fr">Blé (sauf le blé dur)</structure:Description>
      </structure:Code>
      <structure:Code value="4">
        <structure:Description xml:lang="en">Durum wheat</structure:Description>
        <structure:Description xml:lang="fr">Blé dur</structure:Description>
      </structure:Code>
      <structure:Code value="5">
        <structure:Description xml:lang="en">Oats</structure:Description>
        <structure:Description xml:lang="fr">Avoine</structure:Description>
      </structure:Code>
      <structure:Code value="6">
        <structure:Description xml:lang="en">Barley</structure:Description>
        <structure:Description xml:lang="fr">Orge</structure:Description>
      </structure:Code>
      <structure:Code value="7">
        <structure:Description xml:lang="en">Rye</structure:Description>
        <structure:Description xml:lang="fr">Seigle</structure:Description>
      </structure:Code>
      <structure:Code value="8">
        <structure:Description xml:lang="en">Flaxseed</structure:Description>
        <structure:Description xml:lang="fr">Lin</structure:Description>
      </structure:Code>
      <structure:Code value="9">
        <structure:Description xml:lang="en">Canola (rapeseed)</structure:Description>
        <structure:Description xml:lang="fr">Canola (colza)</structure:Description>
      </structure:Code>
    </structure:CodeList>
  </CodeLists>
  <Concepts>
    <structure:Concept xmlns:structure="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/structure" />
  </Concepts>
  <KeyFamilies>
    <structure:KeyFamily xmlns:structure="http://www.SDMX.org/resources/SDMXML/schemas/v2_0/structure" version="1.0" isFinal="false">
      <structure:Components>
        <structure:Dimension codelist="GEO" />
        <structure:Dimension codelist="TYP" />
        <structure:TimeDimension conceptRef="TIME_PERIOD" />
        <structure:PrimaryMeasure conceptRef="OBS_VALUE" />
      </structure:Components>
    </structure:KeyFamily>
  </KeyFamilies>
</Structure> 
```

如何使用 Nokogiri从中提取不同`CodeLists`的及其相关`Name`的内容？`Description`我可以获取元素的 , , 的值`Name`，`Sender`但是`Receiver`由于每个元素开头的关键字`Header`都无法获取`CodeList`块内的值。`structure:`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:37:14.453

如果您使用 XPath，您应该为这些元素提供一个前缀。以下是一些可能的查询：

```
ns = {"structure" => "http://www.SDMX.org/resources/SDMXML/schemas/v2_0/structure"}
doc.xpath("//structure:CodeList", ns)
doc.xpath("//structure:CodeList/structure:Name", ns)
doc.xpath("//structure:CodeList/structure:Code/structure:Description", ns) 
```

要使前缀“结构”起作用，您需要通过传递散列作为第二个参数，让 Nokogiri 知道前缀和它所引用的 URI 之间的映射。

**编辑**：根据评论更新以正确使用命名空间。

# hadoop - Pig: Count number of keys in a map

> ID：13733431
> 
> 赞同：1
> 
> 时间：2012-12-05T22:12:58.050
> 
> 标签：hadoop, hbase, apache-pig

I'd like to count the number of keys in a map in Pig. I could write a UDF to do this, but I was hoping there would be an easier way.

```
data = LOAD 'hbase://MARS1'
       USING org.apache.pig.backend.hadoop.hbase.HBaseStorage(
         'A:*', '-loadKey true -caching=100000')
       AS (id:bytearray, A_map:map[]); 
```

In the code above, I want to basically build a histogram of `id` and how many items in column family `A` that key has.

In hoping, I tried `c = FOREACH data GENERATE id, COUNT(A_map);` but that unsurprisingly didn't work.

Or, perhaps someone can suggest a better way to do this entirely. If I can't figure this out soon I'll just write a Java MapReduce job or a Pig UDF.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:01:37.613

SIZE should apparently work for you (not tried it myself):

*   [http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#SIZE](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#SIZE)

# windows - ECHO 没有显示变量，即使它们出现在 SET - Windows 批处理文件中

> ID：13733438
> 
> 赞同：3
> 
> 时间：2012-12-05T22:13:32.450
> 
> 标签：windows, batch-file

在我正在处理的一些代码中，我需要连接到终端，这需要终端的 IP 地址。一些代码在这里：

```
FOR /F "Tokens=1" %%A IN (%IPLIST%) DO (
NET USE //%%A /user:name password
SET TERMINAL=%%A
ECHO %TERMINAL%
) 
```

但是，在这样做之后，Echo 会响应：

```
ECHO is off 
```

作为测试，我只是在 ECHO %TERMINAL% 行之后添加了 SET ，并根据它：

```
TERMINAL=10.123.45.6 
```

所以，我的困境是，根据 SET，TERMINAL 确实有一个值，但 ECHO 不同意。

这如此重要的原因是因为我无法判断该值是否正确以供将来在其余代码中使用，我在其中实现它以在远程系统中制定不同的批处理。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:28:45.570

我相信原因是它`FOR`被评估为单个命令并且环境变量在执行之前被扩展，所以在你的情况下它将像这样运行：

```
FOR /F "Tokens=1" %A IN (<%IPLIST% value>) DO (
NET USE //%A /user:name password
SET TERMINAL=%A
ECHO <%TERMINAL% value>
) 
```

由于`%TERMINAL%`之前不存在`FOR`，它将被扩展为一个空字符串，因此观察到的行为。

尝试使用 运行脚本`@echo on`，它有助于理解发生了什么。

### 更新

您可能能够获得您想要的行为`Setlocal EnableDelayedExpansion`，请参阅[此链接](http://ss64.com/nt/delayedexpansion.html)了解更多详细信息。

# opencv - 如何使用 OpenCV 计算局部二进制模式直方图？

> ID：13733448
> 
> 赞同：12
> 
> 时间：2012-12-05T22:14:14.070
> 
> 标签：opencv, feature-extraction, lbph-algorithm

我已经看到 OpenCV 提供了一个基于 LBP[直方图](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html#local-binary-patterns-histograms)的分类器：

但我想访问 LBP 直方图本身。例如：

```
histogram = calculate_LBP_Histogram( image ) 
```

在 OpenCV 中是否有任何功能可以执行此操作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T07:24:21.183

您可以在此处获取使用 OpenCV 的 Mat 数据结构计算 LBP 的 C++ 代码：

[http://www.bytefish.de/blog/local_binary_patterns](http://www.bytefish.de/blog/local_binary_patterns)

您应该能够在同一站点上找到 Python 版本。

该代码由 Philipp Wagner 编写，我相信他将您提到的人脸识别代码贡献给了 OpenCV，所以应该是一样的。

LBP 代码在文件中找到：OpenCV-2.4.2/modules/contrib/src/facerec.cpp 作为静态函数。不幸的是，它似乎没有公开供公众使用（至少对于 OpenCV 2.4.2）。

# android - 搜索记录android

> ID：13733449
> 
> 赞同：-1
> 
> 时间：2012-12-05T22:14:22.060
> 
> 标签：android, sqlite

我正在使用 sqlite 开发 android 应用程序。当我运行以下代码行时，我收到一个错误。

```
if(student_name.length()>0)
    {

        db.open();

        Cursor c= db.searchByName(student_name);//upto this all is fine

        c.moveToFirst(); //when i debug, i found exception is on this line.

        names=new String[c.getCount()];

        for(int i=0;i<names.length;i++)
            {                   
                    names[i]=c.getString(1);
                    c.moveToNext();                     
            }

        db.close();                              
 } 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:38:59.603

尝试使用 while 循环解析数据。

```
while(c.moveToNext()){} 
```

不用`c.moveToFirst()`方法！！

# php - 如何从fuelphp中的包中加载语言文件？

> ID：13733450
> 
> 赞同：0
> 
> 时间：2012-12-05T22:14:24.163
> 
> 标签：php, fuelphp

使用 config.php`always_load`配置，如何从包中加载语言文件？

所有的fuelphp 文档都暗示能够做到这一点，但只显示了从模块加载的语法。

这是我正在尝试做的事情：

燃料/app/config/config.php

```
'always_load' => [
    'language' => [
        // loads fuel/app/lang/en/login.php into login group
        'login',
    ],
], 
```

燃料/app/config/production/config.php

```
'always_load' => [
    'language' => [     
        // override /config/config.php with contents from
        // /fuel/packages/pkg/lang/en/login.php
        'lang_file_from_package' => 'login',
    ],
], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:19:54.283

包是核心扩展，这意味着它将合并在应用程序和包中找到的文件的内容。

因此，没有任何方法可以定义您只想从包中加载它，除了指定一个完全限定的路径名​​，它将始终只加载该文件。

# automation - 自动 Jenkins 部署

> ID：13733452
> 
> 赞同：2
> 
> 时间：2012-12-05T22:14:34.157
> 
> 标签：automation, jenkins, hudson

我希望能够使用脚本自动安装 Jenkins 服务器。鉴于 Jenkins 发布版本和 {(plugin,version)} 列表，我想运行一个脚本，该脚本将为我部署一个新的 jenkins 服务器并使用 Jetty 或 Tomcat 启动它。

这听起来很常见（需要复制 Jenkins 主环境或创建一个干净的环境）。您知道在这种情况下最佳做法是什么吗？

搜索 Google 只给了我如何使用 Jenkins 部署产品的示例，但我想实际部署 Jenkins。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:25:08.437

这可能需要在开始时进行一些额外的设置，但从长远来看可能会节省您的时间。您可以使用名为 puppet (puppetlabs.com) 的产品在需要时自动触发脚本。我基本上是用它来触发我的开发环境的构建。当我发现需要修改的新东西时，我只需更新我的 puppet 模块，而不必担心需要做什么来通过下一轮测试来重新创建环境。

# javascript - 如何使用输入类型文件使用javascript将文本从文件加载到文本区域？

> ID：13733455
> 
> 赞同：1
> 
> 时间：2012-12-05T22:14:51.500
> 
> 标签：javascript, javascript-events

```
<script type="text/javascript">
function CopyMe(oFileInput) {
var filePath = oFileInput.value;
    fh = fopen(filePath, 0);
    if (fh!=-1) {
        length = flength(fh);
        str = fread(fh, length);
        fclose(fh);
    }
document.getElementByID('myText').innerHTML = filePath;
}
</script>
<input type="file" onchange="CopyMe(this);"/>
<textarea id="myText"></textarea> 
```

我确实在文本区域中得到任何输出/更改！我应该怎么办 ？请帮忙！

我为此使用了以下php codo，我不知道它是否正确

```
<?php
function Read($file){
echo file_get_contents($file);
};
?> 
```

以下是javascript：

```
 function CopyMe(oFileInput) {
    var filePath = oFileInput.value;
    document.getElementByID('text-area3').innerHTML = "<?php Read(filePath);?>";
    } 
```

有什么建议么 ... ？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:30:14.273

@apanimesh061 你必须使用 FileReader api

```
document.getElementById('files').addEventListener('change', CopyMe, false);
function CopyMe(evt) {
    var file = evt.target.files[0];
    if (file) {
        var reader = new FileReader();
        reader.readAsDataURL(file)
    }
}; 
```

[http://jsfiddle.net/wAJe4/1/](http://jsfiddle.net/wAJe4/1/)

例如，它记录在[Mozilla Developer Nework](https://developer.mozilla.org/en-US/docs/DOM/FileReader#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:33:29.410

如果您在浏览器中运行它，则无法使用 JavaScript 读取客户端计算机上的文件。

# objective-c - 从 Objective-C 运行 shell 脚本

> ID：13733456
> 
> 赞同：3
> 
> 时间：2012-12-05T22:14:57.097
> 
> 标签：objective-c, bash, shell, shebang

我正在尝试运行一个位于`NSTextView`. 我知道我可以`NSTask`这样做，但我想知道最好的方法是什么，如果脚本只存在于内存（文本视图）而不是磁盘上。

我应该暂时将其写入磁盘还是以某种方式直接将其作为字符串运行？

我要传递什么参数`NSTask`？我是否必须提取 shebang 线并将其作为 传递`launchPath`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:57:26.317

您可以执行`/bin/bash`为您的,`NSTask`和. 然后将包含脚本的内容通过其写入管道以避免在磁盘上创建文件。`setStandardInput``NSPipe``NSString``fileHandleForWriting`

# java - Android：在没有可搜索活动的情况下提供最近的搜索建议？

> ID：13733460
> 
> 赞同：24
> 
> 时间：2012-12-05T22:15:09.447
> 
> 标签：java, android, searchview

我有一个 ActionBar SearchView，我可以成功地用它进行搜索。android 文档没有解释如何实现搜索建议。我不想有可搜索的活动。

这是我的搜索代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_add_song, menu);
        final SearchView searchView = (SearchView) menu.findItem(R.id.song_search).getActionView();
        searchView.setFocusable(true);
        searchView.setIconified(false);
        final AddSongActivity activity = this;
        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
            @Override
            public boolean onQueryTextChange(String newText) {
                // Do nothing
                return true;
            }

            @Override
            public boolean onQueryTextSubmit(String query) {
                // Clear SearchView
                searchView.clearFocus();
                // Begin Spotify Search
                TextView notice = (TextView)findViewById(R.id.search_notice);
                URL url;
                try {
                    url = new URL("http://ws.spotify.com/search/1/track.json?q=" + URLEncoder.encode(query,"UTF-8"));
                } catch (MalformedURLException e) {
                    notice.setText("Malformed Search");
                    notice.setHeight(noticeHeight);
                    return true;
                } catch (UnsupportedEncodingException e) {
                    notice.setText("Unsupported Encoding. Maybe a problem with your device.");
                    notice.setHeight(noticeHeight);
                    return true;
                }
                new SearchDownload(url, activity).execute();
                notice.setText("Loading Tracks");
                notice.setHeight(noticeHeight);
                Log.i("infodb","" + noticeHeight);
                return true;
            }
        }); 
```

这适用于搜索，但我不知道实现最近的搜索查询建议。我该怎么做呢？

谢谢你。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-08T01:45:31.230

好的，我花了我的时间。我**从**`SQLiteDatabase`. _

我们将创建 3 个类，如下所示

1.  `MainActivity`- 用于测试`SearchView`来自数据库的建议
2.  `SuggestionDatabase`- 这将存储您最近的搜索关键字。
3.  `SuggestionSimpleCursorAdapter`- 这是`SimpleCursorAdapter`. 我将解释为什么我制作这个类而不是使用`SimpleCursorAdapter`.

代码

```
// MainActivity.java

public class MainActivity 
    extends Activity
    implements SearchView.OnQueryTextListener,
                SearchView.OnSuggestionListener
{

    private SuggestionsDatabase database;
    private SearchView searchView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        database = new SuggestionsDatabase(this);
        searchView = (SearchView) findViewById(R.id.searchView1);
        searchView.setOnQueryTextListener(this); 
        searchView.setOnSuggestionListener(this);
    }

    @Override
    public boolean onSuggestionSelect(int position) {

        return false;
    }

    @Override
    public boolean onSuggestionClick(int position) {

        SQLiteCursor cursor = (SQLiteCursor) searchView.getSuggestionsAdapter().getItem(position);
        int indexColumnSuggestion = cursor.getColumnIndex( SuggestionsDatabase.FIELD_SUGGESTION);

        searchView.setQuery(cursor.getString(indexColumnSuggestion), false);

        return true;
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        long result = database.insertSuggestion(query);
        return result != -1;
    }

    @Override
    public boolean onQueryTextChange(String newText) {

        Cursor cursor = database.getSuggestions(newText);
        if(cursor.getCount() != 0)
        {
            String[] columns = new String[] {SuggestionsDatabase.FIELD_SUGGESTION };
            int[] columnTextId = new int[] { android.R.id.text1};

            SuggestionSimpleCursorAdapter simple = new SuggestionSimpleCursorAdapter(getBaseContext(),
                    android.R.layout.simple_list_item_1, cursor,
                    columns , columnTextId
                    , 0);

            searchView.setSuggestionsAdapter(simple);
            return true;
        }
        else
        {
            return false;
        }
    }

} 
```

这个怎么运作

1.  当用户点击搜索按钮时，`onQueryTextSubmit()`将触发搜索关键字，然后搜索关键字将保存在我们的数据库中。假设我们提交了一个关键字“你好”
2.  如果用户写了一个字符串，例如“Hel”或“H”，`SearchView`将`onQueryTextChange()`被调用，然后我们在`SQLiteDatabase`（`SuggestionDatabase`）中搜索这个关键字。如果 "Hel" 或 "H" 与 "Hello" 匹配，则将返回的 Cursor 设置为显示查询结果，`SuggestionSimpleCursorAdapter`然后将此适配器设置为`SearchView`。这是图片。

![在此处输入图像描述](../Images/81cf84509f243a3e2060741acb637cb3.png)
3\. 当然我们会点击“你好”的建议，`onSuggestionClick(int position)`会被调用。我们从的适配器 ( ) 中获取`SQLiteCursor`对象并从中获取建议文本，在对象中设置建议文本`SearchView``SuggestionSimpleCursorAdapter``SearchView`

```
SQLiteCursor cursor = (SQLiteCursor) searchView.getSuggestionsAdapter().getItem(position);
int indexColumnSuggestion = cursor.getColumnIndex( SuggestionsDatabase.FIELD_SUGGESTION);
searchView.setQuery(cursor.getString(indexColumnSuggestion), false); 
```

如果我们使用`SimpleCursorAdapter`它也可以正常工作，但假设我们有这种情况

1.  如果我们在智能手机中运行此程序并输入关键字“Hel”，建议将正确显示。

![在此处输入图像描述](../Images/81cf84509f243a3e2060741acb637cb3.png)

2.  如果我们横向旋转屏幕怎么办？它将以全屏模式切换，您仍然可以输入关键字。

建议会发生什么？让我们来看看。

![在此处输入图像描述](../Images/f4092ede0c602877709129844ec564ab.png)

看到奇怪的建议了吗？我们如何解决这个问题？通过覆盖`convertToString(Cursor cursor)`which 返回一个`CharSequence`

```
 // SuggestionSimpleCursorAdapter.java
public class SuggestionSimpleCursorAdapter
    extends SimpleCursorAdapter
{

    public SuggestionSimpleCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
    }

    public SuggestionSimpleCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
    }

    @Override
    public CharSequence convertToString(Cursor cursor) {

        int indexColumnSuggestion = cursor.getColumnIndex(SuggestionsDatabase.FIELD_SUGGESTION);

        return cursor.getString(indexColumnSuggestion);
    }

} 
```

通过覆盖`convertToString(Cursor cursor)`，结果如下

![在此处输入图像描述](../Images/774f74d5567bedf50fdd37fc2f388030.png)

这是数据库

```
// SuggestionDatabase.java
public class SuggestionsDatabase {

  public static final String DB_SUGGESTION = "SUGGESTION_DB";
  public final static String TABLE_SUGGESTION = "SUGGESTION_TB";
  public final static String FIELD_ID = "_id";
  public final static String FIELD_SUGGESTION = "suggestion";

  private SQLiteDatabase db;
  private Helper helper;

  public SuggestionsDatabase(Context context) {

    helper = new Helper(context, DB_SUGGESTION, null, 1);
    db = helper.getWritableDatabase();
  }

  public long insertSuggestion(String text)
  {
    ContentValues values = new ContentValues();
    values.put(FIELD_SUGGESTION, text);
    return db.insert(TABLE_SUGGESTION, null, values);
  }

  public Cursor getSuggestions(String text)
  {
    return db.query(TABLE_SUGGESTION, new String[] {FIELD_ID, FIELD_SUGGESTION}, 
            FIELD_SUGGESTION+" LIKE '"+ text +"%'", null, null, null, null);
  }

    private class Helper extends SQLiteOpenHelper
    {

    public Helper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE "+TABLE_SUGGESTION+" ("+
                    FIELD_ID+" integer primary key autoincrement, "+FIELD_SUGGESTION+" text);");
        Log.d("SUGGESTION", "DB CREATED");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

  }

} 
```

我希望这个答案对其他程序员有用。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-01T14:27:41.433

我的需求更加简单——我不需要数据库，因为我有很多想要显示的建议包含在 ArrayList 中。

这是一个示例实现：

```
import java.util.ArrayList;

import android.app.Activity;
import android.app.SearchManager;
import android.content.Context;
import android.database.Cursor;
import android.database.MatrixCursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.CursorAdapter;
import android.widget.SearchView;
import android.widget.SearchView.OnQueryTextListener;
import android.widget.TextView;
import android.widget.Toast;

public class ActivityTest extends Activity implements OnQueryTextListener {

    private static final String COLUMN_ID = "_id";
    private static final String COLUMN_TERM = "term";
    private static final String DEFAULT = "default";

    private SearchManager searchManager;
    private SearchView searchView;
    private MenuItem searchMenuItem;
    private SuggestAdapter suggestionsAdapter;
    private final ArrayList<String> suggestionsArray = new ArrayList<String>();
    private final ArrayList<String> dummyArray = new ArrayList<String>();

    @Override
    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create some dummy entries
        dummyArray.add("apples");
        dummyArray.add("oranges");
        dummyArray.add("bananas");
        dummyArray.add("pears");
        dummyArray.add("plums");

    }

    @Override
    public boolean onCreateOptionsMenu(final Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);

        searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        searchMenuItem = menu.findItem(R.id.action_search);

        searchView = (SearchView) searchMenuItem.getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setOnQueryTextListener(this);

        final MatrixCursor matrixCursor = getCursor(suggestionsArray);
        suggestionsAdapter = new SuggestAdapter(this, matrixCursor, suggestionsArray);
        searchView.setSuggestionsAdapter(suggestionsAdapter);
        suggestionsAdapter.notifyDataSetChanged();

        return true;
    }

    @Override
    public boolean onQueryTextChange(final String newText) {

        suggestionsArray.clear();

        for (int i = 0; i < dummyArray.size(); i++) {

            if (dummyArray.get(i).contains(newText)) {
                suggestionsArray.add(dummyArray.get(i));
            }
        }

        final MatrixCursor matrixCursor = getCursor(suggestionsArray);
        suggestionsAdapter = new SuggestAdapter(this, matrixCursor, suggestionsArray);
        searchView.setSuggestionsAdapter(suggestionsAdapter);
        suggestionsAdapter.notifyDataSetChanged();

        return true;
    }

    @Override
    public boolean onQueryTextSubmit(final String query) {
        // TODO Auto-generated method stub
        return false;
    }

    private class SuggestAdapter extends CursorAdapter implements OnClickListener {

        private final ArrayList<String> mObjects;
        private final LayoutInflater mInflater;
        private TextView tvSearchTerm;

        public SuggestAdapter(final Context ctx, final Cursor cursor, final ArrayList<String> mObjects) {
            super(ctx, cursor, 0);

            this.mObjects = mObjects;
            this.mInflater = (LayoutInflater) ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        @Override
        public View newView(final Context ctx, final Cursor cursor, final ViewGroup parent) {
            final View view = mInflater.inflate(R.layout.list_item_search, parent, false);

            tvSearchTerm = (TextView) view.findViewById(R.id.tvSearchTerm);

            return view;
        }

        @Override
        public void bindView(final View view, final Context ctx, final Cursor cursor) {

            tvSearchTerm = (TextView) view.findViewById(R.id.tvSearchTerm);

            final int position = cursor.getPosition();

            if (cursorInBounds(position)) {

                final String term = mObjects.get(position);
                tvSearchTerm.setText(term);

                view.setTag(position);
                view.setOnClickListener(this);

            } else {
                // Something went wrong
            }
        }

        private boolean cursorInBounds(final int position) {
            return position < mObjects.size();
        }

        @Override
        public void onClick(final View view) {

            final int position = (Integer) view.getTag();

            if (cursorInBounds(position)) {

                final String selected = mObjects.get(position);

                Toast.makeText(getApplicationContext(), selected, Toast.LENGTH_SHORT).show();

                // Do something

            } else {
                // Something went wrong
            }
        }
    }

    private MatrixCursor getCursor(final ArrayList<String> suggestions) {

        final String[] columns = new String[] { COLUMN_ID, COLUMN_TERM };
        final Object[] object = new Object[] { 0, DEFAULT };

        final MatrixCursor matrixCursor = new MatrixCursor(columns);

        for (int i = 0; i < suggestions.size(); i++) {

            object[0] = i;
            object[1] = suggestions.get(i);

            matrixCursor.addRow(object);
        }

        return matrixCursor;
    }
} 
```

在我的实际代码中，我有一个自定义接口，它使用从服务器获取的动态术语填充 ArrayList。您将以这种方式更新数据集：

```
@Override
public void onDataReceived(final ArrayList<String> results) {

    suggestionsArray.clear();
    suggestionsArray.addAll(results);

    final MatrixCursor matrixCursor = getCursor(suggestionsArray);
    suggestionsAdapter = new SuggestAdapter(this, matrixCursor, suggestionsArray);
    searchView.setSuggestionsAdapter(suggestionsAdapter);
    suggestionsAdapter.notifyDataSetChanged();
} 
```

我发现每次不初始化空游标或重新创建它都会导致问题。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-19T11:48:52.587

在`MainActivity`上面的类中首先`onCreate method`使用此代码

```
AutoCompleteTextView search_text = (AutoCompleteTextView) searchView.findViewById(searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null));
search_text.setThreshold(1); 
```

这`setThreshold(1)`意味着它现在也可以从一个字符开始搜索文本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-20T00:05:43.407

在上述方法中我注意到一个问题。

当用户仅输入一个字符（例如`"H"`）时，在从数据库中获取条目并通过 将适配器设置为 searchView`searchView.setSuggestionsAdapter(<adapter>)`后，不会显示下拉列表。

只有在输入第二个字符（例如`" ", "a"`）后，才会显示建议列表。还有其他人观察这种行为吗？

# silverlight - Silverlight 应用程序无法加载，因为安装了 4.1 插件并且需要 5.1。更新不是自动的？

> ID：13733463
> 
> 赞同：1
> 
> 时间：2012-12-05T22:15:21.367
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0, silverlight-plugin

我编写了一个 Silverlight 5 应用程序。当安装了 Silverlight 4.1 插件的用户访问我的页面时，应用程序无法加载。

如果我的 .xap 文件需要，Silverlight 不应该自动下载最新版本的插件吗？

它也不会出现在 Windows 更新中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:52:59.450

如果您有 Silverlight 应用程序的 Web 项目，您可以在 Default.aspx 中指定运行应用程序所需安装的 Silverlight 的最小运行时版本。

Default.aspx 中有一个条目，如：

```
<param name="minRuntimeVersion" value="5.0.60401.0" />
<param name="autoUpgrade" value="true" />
<a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.60401.0" style="text-decoration: none">
  <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight"
  style="border-style: none" />
</a> 
```

此设置表示您的应用程序必须至少安装版本 5.0.60401.0。如果客户端打开您的 silverlight 应用程序并使用较低版本，则会显示安装对话框以安装所需的 silverlight 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:26:04.867

没有。安装 Silverlight 是用户/桌面支持必须执行的手动活动。

Silverlight 会告诉您您的版本错误，但实际升级它取决于用户。

# symfony - Symfony2 不尊重我的会话生命周期设置

> ID：13733466
> 
> 赞同：3
> 
> 时间：2012-12-05T22:15:31.413
> 
> 标签：symfony

我将我的应用程序设置`app/config/config.yml`为一年的会话生命周期：

```
framework:
    session:
        default_locale: %locale%
        lifetime:       31536000
        auto_start:     true 
```

*但是，我的用户在闲置大约一个小时*后被启动，当然不到一年。关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T18:10:50.033

原来罪魁祸首是`gc_maxlifetime`php.ini 被设置为只有 1440 秒。这里有更多信息：[symfony2 会话生命周期](https://stackoverflow.com/questions/5933774/symfony2-session-live-time)

# ios - iOS：当我在调试过程中看到奇怪的计算值时，CGRect 在做什么？

> ID：13733468
> 
> 赞同：3
> 
> 时间：2012-12-05T22:15:36.757
> 
> 标签：ios, cgrect, cgrectmake

我正在尝试解决绘制到 PDF 时的间距问题。在调试中，我正在观察为我的字符串构造一个矩形的方法（见下文）。当我在调试器中观察值时，在方法返回其值之前，它们会从漂亮的浮点值（即 30.0）变为您在下图中看到的值。到底是怎么回事？例如，为什么 x 会变成 1.4013e - 45？

```
 CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset + widthOfPrevious,    kBorderInset + kMarginInset + 50.0 + heightOfPrevious,stringSize.width, stringSize.height);

    return renderingRect; 
```

请查看renderingRect的值：

![在此处输入图像描述](../Images/58e0006c40213bd4204421e4db9ac866.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:23:20.300

您可以使用[`CGRectIntegral`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectIntegral)如下所示将浮点值四舍五入为最接近的最小整数，如下所示。

```
CGRect renderingRect = CGRectIntegral(CGRectMake(kBorderInset + kMarginInset + widthOfPrevious, kBorderInset + kMarginInset + 50.0 + heightOfPrevious,stringSize.width, stringSize.height)); 
```

# sql - 安装 PostgreSQL 的 Bash 脚本 - 失败

> ID：13733472
> 
> 赞同：2
> 
> 时间：2012-12-05T22:15:48.677
> 
> 标签：sql, bash, postgresql, shell, debian

我构建了这个部署脚本，它在部署我的 debian 6.0 服务器时运行。我之前在这里展示过（这是一个 linode 堆栈脚本，以防其他人想知道）：

```
#!/bin/bash
#
# Install PostgreSQL
#
# Copyright (c) 2010 Filip Wasilewski <en@ig.ma>.
#
# My ref: http://www.linode.com/?r=aadfce9845055011e00f0c6c9a5c01158c452deb

function postgresql_install {
    aptitude -y install postgresql postgresql-contrib postgresql-dev libpq-dev
}

function postgresql_create_user {
    # postgresql_create_user(username, password)
    if [ -z "$1" ]; then
        echo "postgresql_create_user() requires username as the first argument"
        return 1;
    fi
    if [ -z "$2" ]; then
        echo "postgresql_create_user() requires a password as the second argument"
        return 1;
    fi

    echo "CREATE ROLE $1 WITH LOGIN ENCRYPTED PASSWORD '$2';" | sudo -i -u postgres psql
}

function postgresql_create_database {
    # postgresql_create_database(dbname, owner)
    if [ -z "$1" ]; then
        echo "postgresql_create_database() requires database name as the first argument"
        return 1;
    fi
    if [ -z "$2" ]; then
        echo "postgresql_create_database() requires an owner username as the second argument"
        return 1;
    fi

    sudo -i -u postgres createdb --owner=$2 $1
}

postgresql_install
postgresql_create_user(username, password)
postgresql_create_database(dbname, username) 
```

我使用这个脚本部署了我的服务器，该脚本是在 Filip 的版本之上构建的，但是当我尝试通过键入 pg_ctl 来查看 postgresql 是否正在运行时，它说找不到命令。

我在哪里做错了？因为它在服务器运行时部署，所以我无法看到它哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:13:23.627

正如人们所说，您的路径上似乎没有 PostgreSQL bin 目录。根据我在 Ubuntu 上从 apt 安装 PostgreSQL 9.1/9.2 的经验，创建了 postgres 用户，但它没有正确设置您的环境，因此`pg_ctl`等`initdb`不在您的`PATH`.

我看不到您使用的是哪个 PostgreSQL 版本，但我的 9.1 和 9.2 实例将二进制文件存储在`/usr/lib/postgresql/9.2/bin`

检查该目录以查看它是否包含 pg_ctl 和其他二进制文件。如果是这样，

尝试运行：

```
export PATH=$PATH:/usr/lib/postgresql/9.2/bin 
```

看看是否允许你运行`pg_ctl`。如果是这样，您需要在登录时执行该操作`.bashrc`或类似操作

# javascript - 工具栏顶部的 Ext.form.Panel 周围有一些空白区域

> ID：13733475
> 
> 赞同：0
> 
> 时间：2012-12-05T22:15:59.080
> 
> 标签：javascript, extjs, extjs4

我有以下情况。我有一个`Ext.form.field.File`( 在`buttonOnly: true`a 的顶部，`Ext.form.Panel`它位于停靠在 . 上的 Toolbar 的顶部`Ext.grid.Panel`。结果是，按钮的样式与工具栏完全不同，并且面板似乎在按钮周围有一些空白区域你可以看到任何人对我如何解决这个问题有任何建议，以便按钮和面板的样式与工具栏匹配（我使用默认样式，没有修改任何内容）。

编辑：这是一些代码：

```
upload_button = Ext.create('Ext.form.field.File', {
            buttonOnly: true,
            buttonText: "Upload File",
            hideLabel: true,
            listeners: {..}

        });

        button_panel = Ext.create('Ext.form.Panel', {
            region: 'south',
            items: upload_button
        });

  upload_toolbar = Ext.create('Ext.toolbar.Toolbar',{
            width: 400,
            region: 'north',
            dock: 'top',
            items: [ button_panel]});

grid_file = Ext.create('Ext.grid.Panel', {
            title: 'File List',
            region: 'center',
            height: 300,
            store: store_file,
            dockedItems: [upload_toolbar], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:18:51.750

您正在使用区域，但我看不到任何`border`布局。

您的问题是您试图将面板放在工具栏中 - 它不起作用。

您最好在页面的某个位置放置一个隐藏的上传表单；在工具栏中放置一个普通按钮，并让工具栏按钮按下触发隐藏表单上的按下。

所以这将是隐藏的上传表单定义：

```
Ext.define('App.view.Assignments' ,
{
    extend: 'Ext.panel.Panel',
    alias: 'widget.assignments-panel',

    hidden: true,

    items: [{
        xtype: 'filefield',
        id: 'uploadField',
        emptyText: 'Select a file',
        fieldLabel: 'Assignment',
        name: 'assignment-path',
        buttonText: '...',
        buttonConfig: {
            iconCls: 'upload-icon'
        }
    },{
        xtype: 'hidden',
        id:    'submissionIdField',
        name:  'submissionId',
        value: ''
    }],
}); 
```

然后当按下可见的更新按钮时，您可以执行以下操作：

```
var uploadField = Ext.getCmp( 'uploadField' );
uploadField.fileInputEl.dom.click(); 
```

# jquery - jQuery SlideToggle 谷歌地图问题

> ID：13733482
> 
> 赞同：3
> 
> 时间：2012-12-05T22:16:16.047
> 
> 标签：jquery, google-maps, accordion, slidetoggle

我已经阅读了其他类似的主题，但没有任何问题/响应有助于使其简单到足以理解我需要做什么。我正在使用 jQuery 1.7 版，这可能解释了为什么其他问题中发布的一些代码是不同的。

谷歌地图加载在一个滑动切换的 div 中，中心点向西北偏移，并且相对于 div 打开时显示的地图部分不可见。我正在尝试显示一个非常简单的地图，没什么特别的。

```
jQuery(".toggle").click(function () {
    // check the visibility of the next element in the DOM
        jQuery(this).next().slideToggle(); // slide it down
}); 
```

我的 jQuery 知识有限，但我知道我需要在切换 div 后强制加载 iframe。我只是不知道如何实现这一目标！HTML / PHP 代码如下。

```
<span class="toggle">
View Map // with some CSS
</span>

<div id="maps" class="ui-helper-hidden">
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=<?php echo $latitude;?>,<?php echo $longitude;?>&amp;aq=&amp;t=m&amp;z=13&amp;output=embed&key=123456789"></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:54:30.490

您可能需要查看使用 JavaScript 和 Maps API 动态加载地图。在此过程中，您将创建一个中心点对象，然后可以在切换回调函数中重用该对象来重置地图的中心。像这样的东西应该工作。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<script type="text/javascript">

    $(function () {

        // create a center
        var c = new google.maps.LatLng(-33.8790, 151.2064);

        //create map options object
        var mapOptions = {
            zoom: 14,
            center: c,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('maps'), mapOptions);

        $(".toggle").click(function () {
            // check the visibility of the next element in the DOM
            $(this).next().slideToggle(300, function(){
                google.maps.event.trigger(map, "resize"); // resize map
                map.setCenter(c); // set the center
            }); // slide it down

        });

    });

</script> 
```

# php - img 不会加载 codeigniter

> ID：13733484
> 
> 赞同：0
> 
> 时间：2012-12-05T22:16:23.107
> 
> 标签：php, html, codeigniter

我正在用codeigniter在php中编写一个网站，我在我网站根目录的imgs文件夹中的imgs，我写了我网站的首页和所有imgs加载，视图加载，所有css工作正常。我复制了视图并重命名以制作下一个视图，当我加载该视图时，没有任何 imgs 加载，它与第一个视图完全相同的代码并且加载正常，我不明白这一点，可以你请帮忙。我正在运行带有 mod_rewrite 的 ubuntu 12.04、codeigniter 2.1.3

编辑：

我留下了损坏的代码，没有为其他 6 个 imgs 工作的部分

这是无法使用的代码：下面的代码修复了除三个项目之外的所有内容：

```
<img src="<?php echo base_url('path/to/image.jpg'); ?>"> 
```

这是它没有修复的代码

```
<?php 
    if(!$this->session->userdata('is_logged_in')){
        echo '<BR />';
        echo '<a href='.base_url()."main/login".'><img src="imgs/log_in_0.png" /></a>';
        echo '<BR />';
        echo '<BR />';
        echo '<a href='.base_url()."main/signup".'><img src="imgs/sign_up_0.png" /></a>';
        echo '<BR />';
    } 

?> 
```

这个css加载背景：

```
body 
{
    background-image:url('imgs/green_tex.jpg');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:36:29.743

这很可能是相对路径与绝对路径问题。

我将假设您正在调用这样的图像：

```
<img src="path/to/image.jpg"> 
```

你应该做的是这样称呼他们：

```
<img src="<?php echo base_url('path/to/image.jpg'); ?>"> 
```

提醒一下，您需要`url`加载帮助程序`base_url()`才能工作。我建议将其添加到您的`autoload.php`文件中。

针对您最近的编辑：

```
echo '<a href='.base_url()."main/login".'><img src="' . base_url('imgs/log_in_0.png') . '" /></a>'; 
```

对于 CSS，您将不得不手动输入路径，例如：

```
background: url(/imgs/log_in_0.png); 
```

# javascript - 使用 jquery 从 JSON 数据中提取并记录一个值

> ID：13733490
> 
> 赞同：0
> 
> 时间：2012-12-05T22:16:40.047
> 
> 标签：javascript, jquery, json, yahoo-pipes

我已经搜索和搜索但不确定如何表达我的查询我无法实现我认为是一个简单的目标。

我有一个来自 Deviant Art 的 RSS 提要，它通过 Yahoo Pipes 运行

这是管道” [http://pipes.yahoo.com/pipes/pipe.info?_id=63478be58fb00758ded9d5108170f931](http://pipes.yahoo.com/pipes/pipe.info?_id=63478be58fb00758ded9d5108170f931)

管道生成的 JSON [http://pipes.yahoo.com/pipes/pipe.run?_id=63478be58fb00758ded9d5108170f931&_render=json](http://pipes.yahoo.com/pipes/pipe.run?_id=63478be58fb00758ded9d5108170f931&_render=json) 如下所示：

`{"url":"http:\/\/darksilverflame.deviantart.com","content":"Copyright 2012 *DarkSilverflame","description":null,"title":null},`...........

我想要实现的是一种通过 jquery（或只是 JS）解析数据的简单方法，然后从 Deviant Art 生成一个简单的 txt 用户名列表以及指向这些用户页面的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:34:44.437

您可以使用 ：

jQuery.parseJSON( json )[链接到 jQuery 文档](http://api.jquery.com/jQuery.parseJSON/)

```
parsedObject =jQuery.parseJSON( '{"url":"http:\/\/darksilverflame.deviantart.com","content":"Copyright 2012 *DarkSilverflame","description":null,"title":null}'); 
```

或形成 Chrome (F12 -> 控制台然后测试以下)

```
 a = JSON.parse('{"url":"http:\/\/darksilverflame.deviantart.com","content":"Copyright 2012 *DarkSilverflame","description":null,"title":null}'); 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:55:10.903

进一步了解 Mehdi 的回答：如果您正在寻找一种简单的方法来一步检索和处理数据，您可以从通常的咒语开始：

$.getJSON('http://pipes.yahoo.com/pipes/pipe.run?_id=63478be58fb00758ded9d5108170f931&_render=json', function(data){ $.each(data.items, function(i, item) { //在这里做点什么 } } );

[http://docs.jquery.com/Ajax/jQuery.getJSON](http://docs.jquery.com/Ajax/jQuery.getJSON)

# python - Python：如何评估一个字符串函数？

> ID：13733493
> 
> 赞同：0
> 
> 时间：2012-12-05T22:16:48.913
> 
> 标签：python

我从数据库中得到一些模型

```
f(t)=(2.128795454425367)+(208.54359721863273)*t+(26.098128487929266)*t^2+(3.34369909584111)*t^3+(-0.3450228278737971)*t^4+(-0.018630757967458885)*t^5+(0.0015029038553239819)*t^6; 
```

其中有些是字符串。

我需要评估此功能`t in range(1, 13)`

现在我必须手动复制这些函数并运行它们

```
 print [1.2381648958643592 + \
          153.55656654019816 * t +\
          22.99318731025164 * (t**2) +\
          11.060577906796075 * (t**3) +\
          -1.3465054084767891 * (t**4) + \
          0.016926765998876842 * (t**5) +\
          0.001500086893490721 * (t**6) for t in range(1, 13)] 
```

有没有更好的方法在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:07:55.150

如果性能不是一个主要问题——如果你只在 12 点上评估它，我怀疑不是——那么你可以利用方便的[sympy](http://sympy.org/en/index.html)库为你做很多工作。例如：

```
>>> import sympy
>>> sympy.sympify("t**5 - t + 3")
t**5 - t + 3
>>> sympy.sympify("t**5 - t + 3").subs({"t": 10})
99993 
```

我们可以将其包装在一个返回函数的函数中：

```
import sympy

def definition_to_function(s):
    lhs, rhs = s.split("=", 1)
    rhs = rhs.rstrip('; ')
    args = sympy.sympify(lhs).args
    f = sympy.sympify(rhs)
    def f_func(*passed_args):
        argdict = dict(zip(args, passed_args))
        result = f.subs(argdict)
        return float(result)
    return f_func 
```

然后我们可以将其应用到正则表达式无法触及的更复杂的情况下：

```
>>> s = "f(t)=(2.128795454425367)+(208.54359721863273)*t+(26.098128487929266)*t^2+(3.34369909584111)*t^3+(-0.3450228278737971)*t^4+(-0.018630757967458885)*t^5+(0.0015029038553239819)*t^6;"
>>> f = definition_to_function(s)
>>> f(0)
2.128795454425367
>>> f(10)
4230.6764921149115
>>> f = definition_to_function("f(a,b,c) = sin(a)+3*b-4*c")
>>> f(1,2,3)
-5.158529015192103
>>> import math
>>> math.sin(1)+3*2-4*3
-5.158529015192103 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:22:52.263

如果要解析“函数”字符串，可以执行以下操作：

```
import re

s = "f(t)=(2.128795454425367)+(208.54359721863273)*t+(26.098128487929266)*t^2\
    +(3.34369909584111)*t^3+(-0.3450228278737971)*t^4+(-0.018630757967458885)*t^5\
    +(0.0015029038553239819)*t^6;"

def f(t):
    l = map(float, re.findall("-?\\d+\\.\\d+", s))
    return sum(b * t**a for a,b in enumerate(l))

print map(f, xrange(1,13)) 
```

```
[239.75206957484252，544.337732955938，921.544112756058，1366.6221363666925，1864.8848673959649，2393.2591324279497，2922.9192385578326，3423.0027817028927，3865.4085456893295，4230.676492114911，4514.949840987468，4738.019242139209]

```

这种方法假定函数字符串将始终采用以下形式

```
c0 + c1 t + c2 t^2 + c3 t^4 + ... cn t^(n+1)

```

并通过从字符串中提取浮点数并使用它们生成实际的 Python 函数来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:30:21.893

您可以将函数作为 python expersion 存储在数据库中，当您获取字符串时，只需执行类似 eval(funcstr.replace('x', 'yvalue')) 的操作。

给你看一个例子：

```
funcstr = '2*x+5'
evalpoint = funcstr.replace('x', '5')
val = eval(funcstr) 
```

此时 val 应评估为 15

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:33:33.093

正如 NPE 所说，这里的正确答案是为您的表达式语言编写一个解析器（和简单的解释器）。

或者，更好的是，如果可能的话，首先在 Python 中生成表达式，而不是使用与 Python 的子集几乎但不完全兼容的语言。

或者，更好的是，如果该语言只是表示多项式系数列表的一种方式，只需将其表示为系数列表，这将比任何实际的通用语言更容易解析。例如，假设数据库保存了这个：

```
2.128795454425367, 208.54359721863273, 26.098128487929266, 3.34369909584111, -0.3450228278737971, -0.018630757967458885, 0.0015029038553239819 
```

然后，要在 Python 中执行它，你可以这样做：

```
def eval_polynomial(polynomial, value):
    coefficients = [float(x.strip()) for x in polynomial.split(',')]
    return sum(coefficient * (value**exponent) 
               for exponent, coefficient in enumerate(coefficients)) 
```

然后：

```
>>> [eval_polynomial(expr, t) for t in range(1, 13)] 
```

但是，如果您真的非常想在不更改数据库中的内容的情况下执行此操作，则可以将其转换为 Python 表达式并对其进行评估：

```
>>> expr = 'f(t)=(2.128795454425367)+(208.54359721863273)*t+(26.098128487929266)*t^2+(3.34369909584111)*t^3+(-0.3450228278737971)*t^4+(-0.018630757967458885)*t^5+(0.0015029038553239819)*t^6;'
>>> removef = re.sub(r'f\((\w+)\)=', 'lambda \1: ', expr)
>>> fixpower = re.sub(r'(\w+)\^(\d+)', r'(\1**\2)', removef)
>>> nosemi = fixpower.replace(';', '')
>>> func = eval(nosemi)
>>> [func(t) for t in range(1, 13)]
[239.75206957484252, 544.337732955938, 921.544112756058, 1366.6221363666925, 1864.8848673959649, 2393.2591324279497, 2922.9192385578326, 3423.0027817028927, 3865.4085456893295, 4230.676492114911, 4514.949840987468, 4738.019242139209] 
```

但同样，您可能不想这样做。

而且，如果你这样做了，你可能想编写一个适用于你的实际语言的转换器，而不是基于一个例子对你的语言进行暗中猜测......</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T22:40:01.093

如果您信任您的来源，您可以使用 regex 和 eval 来执行此操作：

```
# deletes the simicolon and everything before the space
my_str = start_str.split('=')[1][:-1]
# change ^ to ** because that's the squared operator
my_str = re.sub('\^', '**', my_str)
# substitute the t for the numbers 1 to 13 and evaluate the string
results = [eval(re.sub('t', str(t), my_str)) for t in range(1,13)] 
```

# list - Prolog，删除列表列表中的超集

> ID：13733496
> 
> 赞同：1
> 
> 时间：2012-12-05T22:17:00.443
> 
> 标签：list, prolog, subset, superset

假设我有以下列表：

```
List = [[a],[a,b],[a,c],[b,c],[b,d],[a,b,c],[a,b,d],[b,c,e],[b,d,e,f]] 
```

目标是删除列表中作为列表中列表超集的每个列表。

包含列表的列表始终具有以下属性：

*   列表中的列表按长度排序
*   列表中的每个列表都已排序

我最初的想法是从列表中的第一个列表开始，然后遍历所有其他列表并删除作为超集的列表。接下来，我将查看第二个列表，等等。

删除列表 [a] 的所有超集后，它应该如下所示：

```
List = [[a],[b,c],[b,d],[b,c,e],[b,d,e,f]] 
```

接下来应该删除 [b,c] 的超集：

```
List = [[a],[b,c],[b,d],[b,d,e,f]] 
```

最后是 [b,d] 的超集：

```
List = [[a],[b,c],[b,d]] 
```

上面的行应该是结果。

我已经创建了一个类似于成员谓词的谓词，但不是采用单个元素并将其与列表进行比较，而是采用整个列表并将其与列表进行比较：

```
memberList([],_).
memberList([X|Xs],Y) :-
    member(X,Y),
    memberList(Xs,Y). 
```

这仅适用于列表。

```
?- memberList(a,[a,b,c]).
false.

?- memberList([a],[a,b,c]).
true .

?- memberList([a,b],[a,b,c]).
true . 
```

但在这之后，我有点迷路了。

我尝试了以下应该删除单个集合的超集，但它不起作用：

```
removeSupersetsList(_,[],[]).
removeSupersetsList(X,[Y|Ys],[Y|Out]) :-
    not(memberList(X,Y)),
    removeSupersetsList(X,Ys,Out).
removeSupersetsList(X,[Y|Ys],Out) :-
    memberList(X,Y),
    removeSupersetsList(X,Ys,Out). 
```

所以我想知道是否有人可以为我指出正确的方向，从列表中删除所有超集，或者甚至给出正确的谓词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:22:49.680

-你好 Xylon，我想我理解你的想法，所以我尝试使用这个想法创建了一个解决方案。在这里（让我知道它是否适合您的需求，或者它是否有错误......）

```
memberList([],_).
memberList([X|Xs],Y) :-  member(X,Y),
                         memberList(Xs,Y). 
```

**%remove(ToRemove,ListWithSublists,LocRez,FinalRez)**

**%ListWithSublists 中的列表被删除，取决于 ToRemove**

**%LocRez 是用于获取 FinalRez 的累加器（最后）**

```
remove(_,[],LocRez,LocRez) :- !.

remove(ToRemove,ListWithSublists,LocRez,FinalRez) :-     ListWithSublists=[Sublist|Rest],
                                                         memberList(ToRemove,Sublist),
                                                         remove(ToRemove,Rest,LocRez,FinalRez),!.

remove(ToRemove,ListWithSublists,LocRez,FinalRez) :-     ListWithSublists=[Sublist|Rest],
                                                         not(memberList(ToRemove,Sublist)),
                                                         append(LocRez,[Sublist],LocRezNew),
                                                         remove(ToRemove,Rest,LocRezNew,FinalRez),!. 
```

> removeSupersetsList(List,Rez) :- removeSupersetsList(List,[],Rez)。**% 调用它进行测试**

**%removeSupersetsList（列表，LocRez，最终）**

**% 如果需要，从列表本身中删除列表中的头部（在此过程中获得 Rez）**

**% 将头部附加到我们的 LocRez（获取 LocRezNew）中，**

**% 递归调用 Rez**

```
removeSupersetsList(List,LocRez,LocRez) :- List=[] ,!.
removeSupersetsList(List,LocRez,Final) :- ( List=[ToRemove|_] ; List=[ToRemove] ),
                                          remove(ToRemove,List,[],Rez),
                                          append(LocRez,[ToRemove],LocRezNew),
                                          removeSupersetsList(Rez,LocRezNew,Final),!. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:53:41.933

我正在使用 SWI-Prolog，在那里我找到了一个为[有序集](http://www.swi-prolog.org/pldoc/man?section=ordsets)制作的库和[所需的测试](http://www.swi-prolog.org/pldoc/doc_for?object=ord_subset/2)，然后使用[select](http://www.swi-prolog.org/pldoc/doc_for?object=select/3) /3 清理列表真的很容易

```
rem_super_sets([], []).
rem_super_sets([L|Ls], R) :-
    (   select(T, Ls, L1), % get any T in Ls
        ord_subset(L, T)   % is T a superset of L ?
    ->  rem_super_sets([L|L1], R) % discard T, keep L for further tests
    ;   R = [L|L2],
        rem_super_sets(Ls, L2)
    ). 
```

这里有一个验证和结果

```
test :-
    List = [[a],[a,b],[a,c],[b,c],[b,d],[a,b,c],[a,b,d],[b,c,e],[b,d,e,f]],
    rem_super_sets(List, R),
    write(R).

?- test.
[[a],[b,c],[b,d]]
true. 
```

# c - 如何修改从 C 生成的现有汇编代码

> ID：13733497
> 
> 赞同：1
> 
> 时间：2012-12-05T22:17:12.607
> 
> 标签：c, assembly, optimization, x86, .obj

我正在用 C 编写一些必须非常高效地运行的方法，所以我想手动编辑一些自动生成的汇编代码。我知道如何使用 gdb 或“objdump -d myfile.o”读取汇编代码，但谁能告诉我如何编辑这段代码？（可能只是细微的调整。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:55:37.387

gcc have -S switch, which stops compilation on after assembly generation phase. Then you cound edit resulting file and manually call assembly (with gas, for example)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:18:36.077

当然。它被称为“内联汇编”，大多数编译器都支持它。

这是一个使用 GCC 的示例：

*   [http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T03:22:49.500

你没有办法做到这一点。编译器直接生成代码，不涉及汇编器；组装列表是可以生成的辅助产品，可以不生成。但是，您可以使用 asm 列表并自己组装它。

如果您想提高代码的效率，最好的方法是，如前所述，内联汇编；或编写一个汇编过程，制作一个目标文件并链接它。

# debugging - 使用 EJS 调试变量

> ID：13733500
> 
> 赞同：0
> 
> 时间：2012-12-05T22:17:55.780
> 
> 标签：debugging, node.js, express, ejs

我想在 EJS 中设置一个全局变量来显示/隐藏一些元素。我希望能够设置此变量一次并让它通过所有视图传播。做这个的最好方式是什么？

我的堆栈的其他部分是 node.js/express/ejs。

为 Vadim 添加了代码：

```
@index = (req, res) ->
    res.render 'index',
    view: 'index'
    gloabals: app.locals    // is there a way to have this line for all controllers? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:35:44.733

您可以使用`express` [app.locals](http://expressjs.com/api.html#app.locals)。

```
var app = express();
app.locals.someFlag = true; 
```

# facebook - Facebook 应用程序的设置不允许一个或多个给定的 URL

> ID：13733506
> 
> 赞同：13
> 
> 时间：2012-12-05T22:18:22.287
> 
> 标签：facebook, facebook-apps, facebook-authentication, blogspot

结果在控制台：

> 应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

基本上，我正在尝试使用户能够登录我在 blogspot.com 上的博客，并在他的墙上发布一些消息。

这是我在 facebook 上配置应用程序的方式：
**App Domains** :blogspot.com
**沙盒模式**:disabled
**站点 URL** :my_blog_name.blogspot.com/p/publishing.html

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T18:01:20.043

将**网站网址**以**http://**开头后，它解决了我的问题。现在我的**站点 URL**如下所示： http: [//my_blog_name.blogspot.com/p/publishing.html](http://my_blog_name.blogspot.com/p/publishing.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-25T18:07:59.967

[当使用https://www.facebook.com/dialog/oauth](https://www.facebook.com/dialog/oauth)`redirect_uri`提交的请求未出现在以下**有效 OAuth 重定向 URI**列表中时，也会发生这种情况：

 ***   设置>>高级>>安全

经过多次试验和错误，当我添加`redirect_uri`我正在使用的（在我的情况下为[https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)）时，我突然跨过了这个错误的一步。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-17T11:42:07.890

出现这些问题是因为您在 Facebook 中未正确配置站点链接。

转到 Facebook 开发人员页面

1.选择“设置” 2.单击“添加平台” 3.选择“网站” 4.提供您的网站名称

最后保存设置即可

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-29T13:33:51.560

Facebook 不关心您的服务器位于哪个实际 IP 地址 - 但它会检查引用页面的域名是否与您在 facebook 注册的域相同。问题是您当前托管应用程序的任何 url未在您的应用程序配置中设置。转到您的应用设置并确保网址匹配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-31T00:59:25.807

就我而言，它是www。我省略了，例如：

**`http://website.com`**

代替

**`http://www.website.com`**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-13T20:11:07.503

我遇到了这个问题，因为起初我没有将应用程序域放在“**设置”**页面中。在我将“example.com”添加到应用程序域字段后（假设 URL 为[http://www.example.com](http://www.example.com)），问题不再存在。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-16T13:15:11.717

如果即使在**Settings -> Basic tab**和**Settings -> Advanced -> Valid OAuth redirect URIs**中设置了网站 URL 后它仍然不起作用，请尝试执行以下操作并检查它是否有效。

第 1 步）转到，**设置 -> 基本 -> 联系电子邮件**（填写您希望应用同步的电子邮件 ID）

第 2 步）转到、**状态和审查 -> 状态 -> 启用选项为是**（使您的应用程序对公众可见）

现在，重新启动您的应用程序并检查它是否正常工作..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-25T08:56:31.687

您的应用程序应与您在 facebook 开发人员设置中输入的内容位于同一域中

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-07T06:04:52.420

# Facebook 应用程序设置

虽然用类似的信息回答了好几次，但这是我的经验仅供参考

*   测试`localhost`- 我想知道这是否可能是问题，但不是。
*   `app_id`并`redirect_uri`包括在内。
*   URL 正确编码。

那么为什么会出现这个错误呢？

像我一样查看[Facebook 社区帮助](https://www.facebook.com/help/community/question/?id=542958419109491)，了解谜题中缺少的重要部分。

那是：

```
<a href="https://www.facebook.com/dialog/share?
    app_id=1234567890
    &display=page

    &href=http%3A%2F%2Fexample.org <-- This
    &redirect_uri=http%3A%2F%2Fexample.org" <-- and This

target="_overTheRainbow">Tell the world about this awesomeness!</a> 
```

必须与提交给 Facebook 的应用程序的参考 URL 匹配`app_id`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-21T15:56:03.293

是的，这是 facebook api 的常见问题。不要在 url 前使用**www 。**它将解决问题。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-05-29T09:32:51.100

当我在 Facebook 墙上发布链接时，我遇到了同样的问题。

我这样做了：

来自[https://developers.facebook.com/](https://developers.facebook.com/)

在**迁移**选项卡上启用**了流发布 URL 安全性。**所以我只是禁用了它，之后它现在对我有用。

希望这可以解决其他人的问题。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-08-31T11:49:32.547

转到设置，然后转到高级选项卡。在底部的“嵌入式浏览器 OAuth 登录”中启用此选项。那么你的问题就解决了。**

# javascript - 使用 HTML 类目标的 Javascript 事件 - 1 Me - 0

> ID：13733507
> 
> 赞同：0
> 
> 时间：2012-12-05T22:18:32.893
> 
> 标签：javascript, events

我正在尝试创建对单击的链接做出反应的可折叠 DIV。我找到了如何使用“下一步”执行此操作，但我想将链接放在单独的区域中。我想出了这个可行的方法... [JSFiddle - 工程](http://jsfiddle.net/smdeconto/sRNue/)

```
function navLink(classs) {
this.classs = classs; 
} 

var homeLink = new navLink(".content-home");
var aboutLink = new navLink(".content-about");
var contactLink = new navLink(".content-contact"); 
var lastOpen = null;

$('.home').click(function() {
 if(lastOpen !== null) {
     if(lastOpen === homeLink) {
         return; } else {
    $(lastOpen.classs).slideToggle('fast');
}
 }
   $('.content-home').slideToggle('slow'); 
        lastOpen = homeLink; 
} 
); 

$('.about').click(function() {
if(lastOpen !== null) {
     if(lastOpen === aboutLink) {
         return; } else {
    $(lastOpen.classs).slideToggle('fast');
}
}
   $('.content-about').slideToggle('slow'); 
        lastOpen = aboutLink; 
} 
);  

$('.contact').click(function() {
if(lastOpen !== null) {
     if(lastOpen === contactLink) {
         return; } else {
    $(lastOpen.classs).slideToggle('fast');
}
}
   $('.content-contact').slideToggle('slow'); 
        lastOpen = contactLink; 
}
);​ 
```

我现在正在尝试创建相同的结果，但使用单个函数而不是每个链接一个函数。这就是我想出的......

```
function navLink(contentClass, linkClass, linkId) {
this.contentClass = contentClass;
this.linkClass = linkClass;
this.linkId = linkId;
}

var navs = [];

navs[0] = new navLink(".content-home", "nav", "home");
navs[1] = new navLink(".content-about", "nav", "about");
navs[2] = new navLink(".content-contact", "nav", "contact");

var lastOpen = null;

$('.nav').click(function(event) {

//loop through link objects
var i;
for (i = 0; i < (navsLength + 1); i++) {

    //find link object that matches link clicked
    if (event.target.id === navs[i].linkId) {

        //if there is a window opened, close it 
        if (lastOpen !== null) {
            //unless it is the link that was clicked
            if (lastOpen === navs[i]) {
                return;
            } else {
                //close it
                $(lastOpen.contentClass).slideToggle('fast');
            }
        }

        //open the content that correlates to the link clicked
        $(navs[i].contentClass).slideToggle('slow');

        navs[i] = lastOpen;

    }
 }
 });​ 
```

[JSFiddle - 不起作用](http://jsfiddle.net/smdeconto/jMzPJ/)

没有错误，所以我认为我只是做错了。我已经使用 Javascript 大约一个星期了。我已经学习了有关数组和 JQuery 事件的知识，并尝试在此处应用它们。我想我已经走了。想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:33:34.730

尝试：

```
var current, show = function(){
    var id = this.id,
        doShow = function() {
           current = id;
           $(".content-" + id).slideToggle('slow');           
        },
        toHide = current && ".content-" + current;

    if(current === id){  //Same link.
        return;   
    }

    toHide ? $(toHide).slideToggle('fast', doShow): doShow();;

};

$("#nav").on("click", ".nav", show); 
```

[http://jsfiddle.net/tarabyte/jMzPJ/5/](http://jsfiddle.net/tarabyte/jMzPJ/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:35:56.870

您只是忘记定义 navsLength：

```
var navsLength=navs.length; 
```

当然，您也可以在使用 jQuery 时将其替换为 $()​​.each 循环。

[更新] 我更正的另外两个错误：

```
lastOpen=navs[i];

for(i=0; i < navsLength ; i++) 
```

演示：http: [//jsfiddle.net/jMzPJ/4/](http://jsfiddle.net/jMzPJ/4/)

# javascript - Gmap api3 和 bootstrap = 灰块

> ID：13733510
> 
> 赞同：0
> 
> 时间：2012-12-05T22:18:53.100
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在将一些旧代码更新到 Google Maps API v3，但我无法让地图显示任何内容。将对象转储`map`到控制台显示地图已正确初始化，并且应该加载到正确的 div 中 - 但除了灰色框外什么都没有显示。

我已经为地图 div 设置了宽度/高度和溢出，因为这似乎是最常见的问题。

但是，我无法让它工作。有任何想法吗？

[http://jsfiddle.net/Nbjrf/1/](http://jsfiddle.net/Nbjrf/1/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:48:43.143

```
<!DOCTYPE html>
   <html>
      <head>
         <title>Google Maps JavaScript API v3 Example: Map Simple</title>
         <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
         <meta charset="utf-8">
         <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
         <style>
             #map_canvas { height: 200px; width: 400px; overflow: visible; }
         </style>
      </head>
      <body>
         <div id="map_canvas"></div>
         <script>
            var myLatlng = new google.maps.LatLng(-34.397, 150.644);
            var mapOptions = {
               zoom: 8,
               center: myLatlng,
               mapTypeId: google.maps.MapTypeId.HYBRID
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
         </script>  
      </body>
</html> 
```

这对我有用。

之间有很大区别

```
var maptype = 'google.maps.MapTypeId.HYBRID';
var mapInitOpts = {
      mapTypeId: maptype
}; 
```

和

```
var mapInitOpts = {
    mapTypeId: google.maps.MapTypeId.HYBRID
}; 
```

在一个实例中，您将文本“google.maps.MapTypeId.HYBRID”分配给 mapTypeId，另一个实例将变量 google.maps.MapTypeId.HYBRID 的值分配给 mapTypeId。

为了让你的例子起作用，你至少应该把

```
var maptype = google.maps.MapTypeId.HYBRID; 
```

不是

```
var maptype = 'google.maps.MapTypeId.HYBRID'; 
```

此外，我无法让我的示例在没有 zoom: 和 center: 的情况下工作。这些可能是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:45:52.553

您将 mapTypeId 常量放在引号中，“google.maps.MapTypeId.HYBRID”；这是一个常量，而不是字符串：google.maps.MapTypeId.HYBRID

此外，您需要提供地图中心和缩放级别。这有效：

```
var mapInitOpts = {
    mapTypeId: google.maps.MapTypeId.HYBRID,
    center: new google.maps.LatLng(-32.891058,151.538042),
    zoom: 16
};

map = new google.maps.Map(document.getElementById("map_canvas"), mapInitOpts); 
```

最后，您不再需要提供 API 密钥。

# c# - 模仿MSpaints绘图方法

> ID：13733512
> 
> 赞同：1
> 
> 时间：2012-12-05T22:19:13.083
> 
> 标签：c#, winforms, graphics, drawing

对于图形练习和一些自我改进之类的东西，我决定基本上只是搞砸并尝试在winform中重新创建一些绘画功能。我有很多标准的工作，例如油漆罐，在光标周围画点，自由手绘等等，但是我对油漆如何做中间绘图动画有点困惑。例如;

要画一条简单的线，我可以简单地在 MouseUp 和 MouseDown 事件上获取鼠标坐标，并使用图形类在两者之间画一条线。

但是，在 MSpaint 上绘制一条线时，单击第一个点后，您几乎可以看到该线的“预览”，并且在将其拖动到第二个点时，该线会跟随您的光标，但我有点不知道如何这会做吗？它是否涉及不断重绘线条和图形设备？如果有人能给我一些提示/内在知识，那就太好了，我在互联网上进行了搜索，但真的找不到任何有用的东西..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:20:50.283

[并且通过ControlPaint.DrawReversibleLine](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.drawreversibleline.aspx)方法非常现代:)

```
Point? startPoint;
Point? endPoint;

private void Form_MouseDown(object sender, MouseEventArgs e)
{
    startPoint = PointToScreen(e.Location);
}

private void Form_MouseMove(object sender, MouseEventArgs e)
{
    if (!startPoint.HasValue)
        return;

    if (endPoint.HasValue)
        ControlPaint.DrawReversibleLine(startPoint.Value, endPoint.Value, Color.White);

    endPoint = PointToScreen(e.Location);
    ControlPaint.DrawReversibleLine(startPoint.Value, endPoint.Value, Color.White);
}

private void Form_MouseUp(object sender, MouseEventArgs e)
{
    startPoint = null;
    endPoint = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:54:51.913

位图/光栅软件使用两个内存缓冲区：一个是当前“持久”画布，其中包含用户已明确修改的像素，第二个是图形卡上的帧缓冲区，用于在屏幕上显示画布。

只需将内存中位图文档的原始字节复制到帧缓冲区即可使位图文档显示在屏幕上（如果帧缓冲区的字节格式或颜色深度与内存中位图不同，则您需要执行转换。如有必要，GDI 可以为您执行此操作，但我们假设一切都是 32 位 ARGB）。

在 WinForms 中，帧缓冲区由`Graphics`传递给您的`Control.OnPaint`覆盖的参数公开。

您可以使用以下两种方法之一来实现这些“预览”效果：

### 现代的

今天使用第一种方法，并且已经使用了 17 年左右（从 Windows 95 开始）。每当屏幕需要更新时，内存中的位图就会被复制到帧缓冲区，例如单个鼠标移动（甚至 1px）。然后在顶部绘制预览效果（例如用户释放鼠标按钮后将绘制的线条）。一旦用户的鼠标再次移动，该过程就会重复，以便更新预览。

你会有这样的事情：

```
public class PaintingCanvas : Control {

    private Bitmap _canvas = new Bitmap();

    private Boolean _inOp; // are we in a mouse operation?
    private Point _opStart; // where the current mouse operation started
    private Point _opEnd; // where it ends

    public override void OnPaint(PaintEventArgs e) {
        Graphics g = e.Graphics;
        g.DrawImage( _canvas ); // draw the current state

        if( _inOp ) {
            // assuming the only operation is to draw a line
            g.DrawLine( _opStart, _opEnd );
        }
    }

    protected override OnMouseDown(Point p) {
        _inOp = true;
        _opStart = _opEnd = p;
    }
    protected override OnMouseMove(Point p) {
        _opEnd = p;
        this.Invalidate(); // trigger repainting
    }
    protected override OnMouseUp(Point p) {
        using( Graphics g = Graphics.FromImage( _bitmap ) ) {
            g.DrawLine( _opStart, _opEnd ); // a permanent line
        }
        _inOp = false;
    }
} 
```

### 1980 年代闪光黑

在过去（想想：1980 年代），将位图从内存复制到帧缓冲区很慢，所以一个非常好的 hack 是使用 XOR 绘画。该程序假定帧缓冲区的所有权（因此没有重叠的窗口会导致它需要从内存中复制）。预览线是通过对线将覆盖的所有像素执行异或来绘制的。这很快，因为对像素进行异或意味着可以恢复它们的原始颜色，而无需从内存中重新复制像素。直到最近，此技巧在计算机中用于多种选择、突出显示或预览效果。

```
highlightOrPreviewColor = originalPixelColor XOR (2^bpp - 1)
originalPixelColor      = highlightOrPreviewColor XOR (2^bpp - 1) 
```

# file-io - 文件同步框架：在本地计算机和不在同一网络上的远程计算机之间同步系统文件

> ID：13733515
> 
> 赞同：0
> 
> 时间：2012-12-05T22:19:28.513
> 
> 标签：file-io, remote-server, microsoft-sync-framework

有人可以提供一个示例（或一个链接）来说明如何在本地计算机和不在同一网络上的远程计算机/服务器之间同步系统文件（不是数据库）吗？

在同一台电脑内同步文件以及在同一网络内的电脑之间同步文件是简单明了的。我有这些场景工作得很好。

我需要将文件从“C:\FilesToSync”同步到远程端点或 IP 地址。WCF、HTTP、FTP 或 TCP 实现都可以。只需要了解如何为其中任何一个设置同步。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T15:14:29.260

这是一个非常好的问题。对于像我这样的“远程”前端开发人员/设计师，哈哈，很难选择一个很好的推荐解决方案；在某些地方它是 git（独立于操作系统），在某些 .NET 项目中，它是 TortoiseSVN-VisualStudio；当我在网上搜索时，大量不知道要选择什么，比如 BitBucket，GitHub 的 Fork。

我也在寻找合适的“通用”解决方案几个月了......示例：1.在一台电脑上处理解决方案，大型文件，xml和psd类型，例如2.与我的远程托管服务器上传/同步对于客户端 3\. 另一个位置的备份服务器，比较/协作/同步

有些人可能会说'你知道，不同的项目需要不同的解决方案，请不要与那个 cr*p 相提并论，谢谢；

最后，我将 Notepad++ 用于远程文件和本地主机，而 Google Drive 仅用于小型 doc 文件；同时，为该领域的外行赢得了恐龙式组合解决方案；) ... USB 和 MyComputer 上的最后“修改”日期！

呵呵

# php - PHP 中的 DOCTYPE 和 HEAD 加载不正确

> ID：13733517
> 
> 赞同：1
> 
> 时间：2012-12-05T22:19:32.427
> 
> 标签：php

下面是我的索引页。$page 在顶部定义，然后页面的各个部分（页眉、菜单、正文和页脚）在底部更改。

我遇到的问题是 DOCTYPE 和数据没有先加载，然后是剩余的页面内容。这会导致浏览器以怪癖模式运行。

让我知道是否/如何使这个问题更清楚。

在此先感谢您的时间！

更新：我已删除所有 PHP 标记，并将 require('includes/....') 设置为变量以消除页面加载。DOCTYPE 仍然拒绝加载。下面的代码反映了这些变化。

更新 2：DOCTYPE 现在直接与 $page 变量对接，消除了所有空格。另外，在浏览器中查看时，我注意到显示了，即使没有打开。所有样式表和其他内容都在页面内部呈现。

解决方案：解决方案可能是多个因素，正如多人指出的那样（例如在 DOCTYPE 之前生成换行符），但我只能肯定地说最终答案如下：外部文档被调用到 $页面未设置为变量。因此，它们似乎在页面之前加载。一旦我将外部包含/要求设置为相关文档中的变量，DOCTYPE 就会正确加载。我非常感谢你们的时间。

```
<?
require('includes/functions/get_content.php');
$header=require('includes/header.php');
$footer=require('includes/footer.php');

$page='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Website Name</title>

<link rel="stylesheet" href="/css/primary_layout.css" type="text/css" charset="utf-8" />
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.0.min.js" type="text/javascript"></script>
</head>

<body>
<div id="bodyContainer">                
%HEADERS%

%MENU%

<div id="bodyContentPane" role="main">
%BODY%
</div> <!-- Close bodyContentPane -->
%FOOTER%
</div>
</body>
</html>';

//############### LOAD BODY CONTENT and SET CATEGORY ###############
$p = $_GET['p'];
switch ($p){ 
case "port-a-cool":
$filename='includes/content1.html';
$data=get_content($filename);
$product_category = '1';
$body=$data;
break;

case "radiant-heaters":
$filename='includes/content2.html';
$data=get_content($filename); 
$product_category = '2';
$body=$data;
break;

default:
$body= include('includes/index.php');
break;
}

//############### DEFINE CONTENT TO LOAD BY CATEGORY ###############
$i = $product_category;
switch ($i){
case "1":
$menu=include('includes/menus/content1.php');
break;
case "2":
$menu=include('includes/menus/content2.php');
break;  }

// ############### CHECK FOR UNDEFINED SUB MENU ###############
if ($menu=="")
$menu = include ('includes/menus/default.php');

$page=str_replace('%HEADER%',$header,$page); 
$page=str_replace('%MENU%',$menu,$page); 
$page=str_replace('%BODY%',$body,$page);
$page=str_replace('%FOOTER%',$footer,$page); 
echo $page;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:25:04.460

这可能是因为您在页面内容前面输出了很多空白。

如果您查看页面的源代码，您应该会在 doctype 之前看到几个空行输出。

由于 PHP 标记之间的换行符，换行符在页面内容之前得到输出。

例如：

```
<?
require('includes/functions/get_content.php');
require('includes/header.php');
require('includes/footer.php');
?>

<?
page=' 
```

在设置变量的 PHP 标记之前输出一个换行符`$page`。

解决方案是消除 php 标签之间的所有换行符，因此要么在不需要时不要在 PHP 标签之间切换，或者确保开始标签和结束标签之间没有空行。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:45:22.030

你的文档类型之前仍然有空格，这里

```
$page='
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

删除空格

```
$page='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

注意：`$header=require('includes/header.php');`要返回内容，您必须`return 'the content';`在包含的文件中有类似的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:33:00.597

确保您需要或包含的所有文件都没有向浏览器输出任何内容。如果是，它们将在 doctype 被声明之前被输出，并且将被强制进入 quirks 模式。

# java - java - Swing Worker - 传递许多参数

> ID：13733519
> 
> 赞同：0
> 
> 时间：2012-12-05T22:19:36.657
> 
> 标签：java, swing

我在扩展 Swing Worker 的类中传递了许多参数（准确地说是 10 个），所以我想知道是否有某种方法可以创建一个帮助类，使我的代码更加优雅和可读？任务对象属于该类。代码工作正常，但我想知道如果我决定添加更多传递参数，是否可以使其更具可读性和更优化。

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    SortThread task = new SortThread(a, brelem, sort, jButton1, brElemTextField,
            bubbleButton, selectionButton, insertionButton, jLabel3,
            konzola, startTime, stopTime, sekunde, jScrollPane2);
    task.addPropertyChangeListener(new PropertyChangeListener() {
        @Override
        public void propertyChange(PropertyChangeEvent e) {
            if ("progress".equals(e.getPropertyName())) {
                jProgressBar1.setValue((Integer) e.getNewValue());
            }
        }
    });
    task.execute();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:32:50.663

我真的无法为这个问题提供一个好的答案，因为我不太清楚你想要做什么。我**强烈**建议您查阅有关重构和设计模式的阅读材料，因为使用此类技术的经验将永远对您有所帮助。

至于具体示例：似乎大多数参数都是 UI 控件 - 您可以尝试创建一个包含用户界面对象的对象，然后您可以将其传递给构造函数来代替所有对象。**编辑：**您不一定需要为此制作自己的课程 -[地图](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html)也是可能的。

或者，如果您创建`SortThread`了一个[内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)，它就可以访问父级的字段，因此您不必将它们传递进去。

当然，其他有更多经验的人可能会对此事有更多的发言权，但鉴于这个问题是如此广泛，我想我还是会提出几个选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:10:41.820

与其将这么多 GUI 组件传递给您的工作人员，不如让您的视图向工作人员注册为`PropertyChangeListener`. `SwingWorker`有一种`firePropertyChange()`方法可以很容易地使用[观察者模式。](http://en.wikipedia.org/wiki/Observer_pattern)

# qt - 要求 Qt 颜色条控件和图表控件

> ID：13733521
> 
> 赞同：1
> 
> 时间：2012-12-05T22:19:49.980
> 
> 标签：qt, qt4, colorbar

**彩条和折线图**

![在此处输入图像描述](../Images/b7f0127be4649d522265cd38a15bf43a.png)

我想创建或利用两个像上面这样的 Qt 控件。

一个是带有夹子的颜色条。

另一种是线上有点的图表，我们可以拖放线上的点，并且可以获取点的 alpha 值。

谁能告诉我这些控件的名称是什么？我想先在线搜索它们，但我需要知道要搜索的关键词。

或者如果有现有的控件，或者任何人可以分享代码，你能告诉我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:54:11.393

来吧 - 这个屏幕截图来自一个名为 eventfilter 的 Qwt 示例，它明确显示了如何实现点的拖动。

在 SVN 主干中，您可以找到另一个名为 itemeditor 的示例，该示例显示了如何在绘图画布上拖放形状项目。

请注意，Qwt 是一个 Qt/C++ 绘图框架，可以自定义/扩展到几乎所有在坐标系上有意义的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:59:39.170

我不确定这样的控件是否有精确的术语。我认为“颜色选择器”和“折线图”是你最好的选择。

[qt-app.org](http://qt-apps.org/)可能是我所知道的寻找自定义控件的最佳位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:34:11.547

QWT 似乎有图表，没有可拖动的点[http://qwt.sourceforge.net/curvescreenshots.html](http://qwt.sourceforge.net/curvescreenshots.html)

![绘图图示例](../Images/534e91ef172fd8bfd7c17479b2694924.png)

# ruby-on-rails - 允许 rails api 返回 json

> ID：13733522
> 
> 赞同：0
> 
> 时间：2012-12-05T22:19:50.577
> 
> 标签：ruby-on-rails, api

我在这里迷路了——甚至不知道要问什么问题。

我按照此处所述构建了一个 api：[http ://railscasts.com/episodes/350-rest-api-versioning?view=asciicast](http://railscasts.com/episodes/350-rest-api-versioning?view=asciicast)

它在一个需要登录的网站上。

我登录后可以通过浏览器访问api，没问题。这是我的路线：

```
## API
namespace :api do
  namespace :v1 do
    resources :users, :sessions
  end
end 
```

我被要求做的是让外部方可以使用 Api 密钥和可选的查询参数和 userId 请求 json

我试图卷曲网站（https）并被重定向到注销，即使使用用户名和密码也是如此。

我的老板建议在根 url 上使用一个公共表单，该表单接受 userId、apikey 和 params，并且可以卷曲，并将通过 curl 发布的参数返回数据。

我不知道如何做到这一点，甚至不知道允许在不登录的情况下调用数据。我查看了另一个屏幕截图[http://railscasts.com/episodes/353-oauth-with-doorkeeper](http://railscasts.com/episodes/353-oauth-with-doorkeeper)（这是付费的版本）但他的交互允许另一个 Rails 应用程序与他的原始应用程序交互。

基本上，我应该在哪里查找有关如何完成此操作的信息？我可以提供任何其他建议或更多信息以使我的问题更清楚吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:34:21.037

更多 RailsCast！瑞安贝茨在[http://railscasts.com/episodes/352-securing-an-api?view=asciicast](http://railscasts.com/episodes/352-securing-an-api?view=asciicast)

所以归结为：

*   您需要确定调用您的 API 的客户端是否需要标识自己，或者他们是否还需要以某种方式进行身份验证
*   您需要确定客户端的用户（即调用您的 API）是否需要通过您的系统进行身份验证——也就是说，是否有“用户”？

一些 API 允许调用者将 API 密钥作为查询的一部分传递；其他人需要更复杂的身份验证过程，通常是 OAuth，这有点棘手。

一些 API 提供用户特定的信息，在这种情况下，您需要一种方法来确保用户可以登录、更改密码、找回忘记的密码等。也有一个很好的 RailsCast （或者你可以使用 Devise gem，虽然如果你主要实现一个 API，我不会推荐它 - 不是 Devise 的强项）。

我猜您知道这部分，但`curl`所做的只是模拟您的客户端将对您的 API 发出的 HTTP 请求，并且（使用`--include`选项）可以向您显示有关返回的响应的信息——标头、cookie 等。

谷歌“rails api authentication”了解更多信息。

# android - 如何获取所有联系人的号码？我做错了什么？

> ID：13733524
> 
> 赞同：1
> 
> 时间：2012-12-05T22:19:58.547
> 
> 标签：android, android-contacts, android-contentresolver

嗨，实际上我这样做是为了获取所有有号码的联系人：

```
String[] projecao = new String[] { ContactsContract.Contacts._ID,
                ContactsContract.Contacts.LOOKUP_KEY,
                ContactsContract.Contacts.DISPLAY_NAME };
        String selecao = ContactsContract.Contacts.HAS_PHONE_NUMBER + " = ? ";
        Cursor contatos = contexto.getContentResolver().query(
                ContactsContract.Contacts.CONTENT_URI, projecao, selecao,
                new String[] { "1" }, null); 
```

并获取每个联系人的所有号码：

```
while (contatos.moveToNext()){
    Cursor numbers = contexto
                    .getContentResolver()
                    .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                            new String[] { ContactsContract.CommonDataKinds.Phone.NUMBER },
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                    + " = ?",
                            new String[] { contatos.getString(contatos
                                    .getColumnIndex(ContactsContract.Contacts._ID)) },
                            null);
    numbers.moveToFirst();
    StringBuilder sb = new StringBuilder();
                do {
                    sb.append(numbers.getString(numbers
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))
                            + ", ");
                } while (numbers.moveToNext());
} 
```

但我不能选择来自 facebook 的号码。

我收到该错误：索引 0 请求。此错误是因为光标编号与任何编号都不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:24:14.277

您是否专门尝试从 Facebook 联系人中获取电话号码？

FaceBook 内容提供商受到限制。它不会让您检索电话号码。

请参阅此[问题](https://stackoverflow.com/questions/12026173/android-cant-get-phone-number-of-some-contacts)或[此处](https://stackoverflow.com/questions/6038290/cannot-find-facebook-contacts-in-rawcontacts)或[此处](https://stackoverflow.com/questions/4506571/how-to-get-a-contacts-facebook-id-or-url-from-native-contacts-content-resolve)。

# webdriver - 使用 WebDriver（findElement 函数）

> ID：13733527
> 
> 赞同：2
> 
> 时间：2012-12-05T22:20:08.750
> 
> 标签：webdriver

我正在用 Java 编写一个使用 WebDriver 提交表单的程序。有一个方法 findElement 允许您使用类名、css 选择器、id、链接文本、名称、部分链接文本、标签名称或 xpath 来选择元素。

这是我要选择的按钮：

```
<div class="editable" style = "width:82px;float:right;margin-right:10px;">
<a href="#" onclick="$('order_form').submit(); return false;" class="btn">
    <img class="btn" src="/myhuds/images/rd_images/btn_place_order.gif" alt="Place Order" width="82" height="17" border="0">
</a>
</div> 
```

我不能使用类名，因为页面上有多个按钮。关于如何使用 findElement 方法选择此按钮的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:16:27.513

您可以为按钮添加一个 id（可能是您页面中的所有按钮）并找到 -

```
driver.findElement(By.id("Your ID")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:41:42.263

对于您的具体情况，您可以使用 XPath 基于 img @alt 属性进行搜索

```
driver.findElement(By.xpath("//img[@alt='Place Order']")).click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:43:06.020

尝试使用这个。您可以添加一些浏览器插件来获取 XPath。

```
 driver.findElement(By.xpath("Your XPath")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:56:05.287

使用`CSS selectors`. [您可以在W3](http://www.w3.org/TR/CSS2/selector.html)中找到简短的解释，并在此处找到几个示例：[示例](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)。

因此，尝试使用`driver.findElement(By.cssSelector(...));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-03T07:07:43.340

步骤1：

使用可用的 DOM 结构为“下订单”
图像生成 CSS 选择器

css=a[onclick*='order_form'] > img[src*='btn_place_order.gif']

然后执行单击“下订单”图像。

driver.findElement(By.cssSelector("a[onclick*='order_form'] > img[src*='btn_place_order.gif']")).click();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-15T09:23:04.337

以下示例应该有帮助：

html文件：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"

<html>

<head>
    <title>Login Page</title>
</head>

<body>
    <h1 class="page-header">Login</h1>
    <ul class="errors"></ul>
    <div>
        <form class="login-form" action="checkLogin.html" method="post">
            <label for="username-field">Username1</label>
            <input type="text" name="username" class="username-field" />
            <br />
            <label for="password-field">Password1</label>
            <input type="password" name="password" class="password-field" />
            <br />
            <input type="submit" value="Submit" />
        </form>
    </div>
    <div>
        <form class="login-form" action="checkLogin.html" method="post">
            <label for="username-field">Username2</label>
            <input type="text" name="username" class="username-field" />
            <br />
            <label for="password-field">Password2</label>
            <input type="password" name="password" class="password-field" />
            <br />
            <input type="submit" value="Submit" />
        </form>
    </div>
</body>

</html> 
```

要找到 Password1 的输入字段：

```
WebElement passwordField1: driver.findElement(By.cssSelector("div:nth-child(3) .password-field")); 
```

要找到 Password2 的输入字段：

```
WebElement passwordField2: driver.findElement(By.cssSelector("div:nth-child(4) .password-field")); 
```

[在此处](https://www.w3schools.com/cssref/sel_nth-child.asp)了解有关 nth-child() 选择器的更多信息。

# ruby-on-rails - 我的 Rails 应用程序上的深度链接问题

> ID：13733530
> 
> 赞同：0
> 
> 时间：2012-12-05T22:20:11.273
> 
> 标签：ruby-on-rails, deep-linking

**编辑**我在下面提供了有关我的目标的更多详细信息。

在用户使用 Omninauth gem 通过登录页面登录后，我无法将用户深度链接到我的网站。

最常见的情况是：用户收到一封电子邮件，其中包含指向该站点的深层链接 - 例如 www.mysite.com/suggestions/15。我们在登录页面上放置了一个 Facebook 登录（通过 Omniauth），（授权控制器上的默认登录页面 - 见下文）。当用户尝试在未登录的情况下访问任何其他页面时，他们会通过 authenticate_user 弹回！放置在相关控制器中的辅助方法。authenticate_user 在应用程序控制器中定义 - 见下文。

一旦他们被反弹回来，他们点击登录页面上的“使用 facebook 登录”按钮，我们通过 def authcreate 为用户创建一个会话。这以经典的omniauth 方式工作，即来自facebook 的回调，它捕获会话令牌。现在，我想将用户重定向到他们试图访问的页面（例如 www.mysite.com/suggestions/15），但他们只通过默认页面（www.mysite.com/suggestions）。当用户已经登录时这不是问题，但在他们注销时永远不会工作。

你可以忽略授权！因为那是一个单独的模块（我知道很困惑），它与管理员权限有关。check_authorization 同上。

我创建了一个模块并将其放入 lib/

```
module RedirectModule

def self.included(controller)
controller.send :helper_method, :redirect_to_target_or_default
end

def redirect_to_target_or_default(default, *args)    
    redirect_to(session[:return_to] || default, *args)
    session[:return_to] = nil
end

def redirect_to_or_default(target, *args)
    redirect_to(target || default, *args)
end

private

def store_target_location # Friendly redirect: store URL.
    session[:return_to] = request.url 
end
end 
```

ApplicationController 中有一个包含：

```
class ApplicationController < ActionController::Base

  protect_from_forgery
  check_authorization
  include RedirectModule

def current_user
  if session[:user_id]
  @current_user ||= User.find(session[:user_id])
  end
end

helper_method :current_user

def authenticate_user!
  if !current_user
store_target_location
redirect_to "/"
  end
end 
```

我在以下控制器上启动会话：

```
class AuthorizationController < ApplicationController

  def landingpage
   authorize! :auth, :landingpage

    if current_user
      redirect_to_target_or_default('/suggestions')

    else

      store_target_location

    end  
  end

  def authcreate
    authorize! :auth, :authcreate
    reset_session
    authHash = env["omniauth.auth"]
    existingUser = User.where(authHash.slice(:provider, :uid)).first
    user = User.from_omniauth(authHash)
    session[:user_id] = user.id

    redirect_to_target_or_default('/suggestions')
  end

  def authdestroy
    authorize! :auth, :authdestroy
    session[:user_id] = nil
    redirect_to "/"
  end

end 
```

我究竟做错了什么？

# windows - 在表中查找字符串并返回值

> ID：13733532
> 
> 赞同：0
> 
> 时间：2012-12-05T22:20:22.917
> 
> 标签：windows, command-line, cmd, findstr

想象一下这个`.txt`文件：

```
Example.txt

Row    Column1    Column2    Column3 <br>
1       aaa         bbb        ccc<br>
2       ddd         eee        fff 
```

如何使用命令行获取表中的值？

前任。: (Row=2, Column2) 返回值“eee”。
前任。: (Row=1, Column3) 返回值“ccc”。

我正在尝试`findstr`，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:01:37.337

假设行信息实际上在文件中，并假设没有值包含空格：

```
@echo off
call :getValue  2  Column2  "Example.txt"
call :getValue  1  Column3  "Example.txt"
call :getValue  0  Column1  "Example.txt"
call :getValue  1  DoesNotExist  "Example.txt"
exit /b

:getValue
setlocal
<%3 set /p "header="
set token=0
for %%C in (%header%) do (
  set /a token+=1
  if %%C==%2 goto columnFound
)
echo Column %2 not found in %3
exit /b

:columnFound
for /f "tokens=%token%" %%A in ('findstr /blc:"%1 " %3') do (
  echo %3 (Row=%1, %2^) = %%A
  exit /b
)
echo Row %1 not found in %3
exit /b 
```

结果

```
"Example.txt" (Row=2, Column2) = eee
"Example.txt" (Row=1, Column3) = ccc
Row 0 not found in "Example.txt"
Column DoesNotExist not found in "Example.txt" 
```

# caching - Java 缓存评估代码

> ID：13733535
> 
> 赞同：0
> 
> 时间：2012-12-05T22:20:40.420
> 
> 标签：caching, ehcache

为非数据库操作实现缓存是否有意义？实现它以评估冗长的代码块是否有意义？例如，我有一个接受参数的代码块。基于这个参数，它会遍历 if/else 块的洗衣清单，直到它匹配正确的值并返回一个值。在我的例子中，IN 参数是有限的，OUT 参数基于 IN 参数是一致的，即对于每个“A”，返回是“B”，对于每个“X”，返回是“Z”。这种操作不涉及数据库记录。我想知道通过引入缓存，我可以从长期的评估中减少任何时间。建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:38:00.753

只要执行的代码足够长或足够复杂以证明付出的努力是合理的，这就是完全合理的。例如，参见[http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)上的 Spring 的缓存注释支持，它适用于 Java 方法级别。但是您可以在非 Spring 环境中轻松地自己实现这种方法。

您应该首先分析您的应用程序，以查看在受影响的代码块中花费了多少时间/CPU，以查看缓存在这里是否有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:09:57.657

It depends how you value low latency. According to [this presentation from Google](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//people/jeff/stanford-295-talk.pdf) (slide #13), 1 MB of sequential read from the main memory costs about 0.25 ms, and there are *plenty* of other things which are more expensive. From the same slide:

*   a single disk seek is 40 times slower;
*   reading 1 MB of data from network is 40 times slower;
*   reading 1 MB data from disk is 120 times slower

So caching can help tremendously in certain situations, but you need to do analysis and see how much time is *your* algorithm wasting and then decide.

# c - unsigned char 140, unicode 0x0152 = 338 的代码页或编码是什么？

> ID：13733536
> 
> 赞同：0
> 
> 时间：2012-12-05T22:20:51.510
> 
> 标签：c, visual-c++, encoding

可能是程序员阅读了编码的基础知识，但我的具体问题是

在 Windows Visual C 输出到 Windows 控制台中，unsigned char 值 140 打印为[unicode 0x0152](http://en.wikipedia.org/wiki/List_of_Unicode_characters) = 338。

Visual C 使用什么编码（或“代码页”？）？（例如 UTF-7、ASCII）。unsigned char value 140 究竟是如何映射到 unicode 字符 338 的？

我敢肯定，任何人都可以将链接粘贴到许多关于编码的维基百科页面之一或网络上的[表格](http://en.wikipedia.org/wiki/List_of_Unicode_characters)，但是对这个问题的更具体的答案会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:23:03.277

那将是编码[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)，并不是 Visual C “使用”它，而是 Windows 控制台将输出解释为。

这个其他答案可能就是您所寻求的：[cmd.exe 使用什么编码/代码页？](https://stackoverflow.com/questions/1259084/what-encoding-code-page-is-cmd-exe-using)

“代码页”是 Microsoft 对“编码字符集”的术语，它或多或少等同于您所认为的“编码”，但请参阅[Unicode 词汇表](http://www.unicode.org/glossary/)以获得精确定义。

并引用维基百科页面：

> 从历史上看，Windows 中使用短语“ANSI 代码页”(ACP) 来指代被视为本机的各种代码页。其目的是其中大部分将是 ANSI 标准，例如 ISO-8859-1。尽管 Windows-1252 是 Microsoft Windows 术语中第一个也是迄今为止最流行的代码页，但该代码页从未成为 ANSI 标准。微软附属博主现在声明“用于表示 Windows 代码页的术语 ANSI 是一个历史参考，但现在是一个误称，继续在 Windows 社区中持续存在。”

# visual-studio-2010 - 在 VS2010 上使用 STL 的多线程 Win32 服务的内存问题

> ID：13733537
> 
> 赞同：5
> 
> 时间：2012-12-05T22:20:52.820
> 
> 标签：visual-studio-2010, winapi, service, memory-leaks, stl

我有一个用 C++ (VS2010) 编写的多线程 Win32 服务，它广泛使用了标准模板库。程序的业务逻辑运行正常，但是在查看任务管理器（或资源管理器）时，程序像筛子一样泄漏内存。

我有一个测试集，平均每秒大约 16 个并发请求。当程序第一次启动时，它会消耗大约 1.5Mb 的内存。在完整的测试运行（需要 12-15 分钟）之后，内存消耗最终接近 12Mb。通常，对于运行一次然后终止的程序来说，这不是问题，但该程序旨在连续运行。非常糟糕，确实。

为了尝试缩小问题范围，我创建了一个非常小的测试应用程序，它以每 250 毫秒一次的速度分离工作线程。工作线程创建一个地图并用伪随机数据填充它，清空地图，然后退出。这个程序也以类似的方式泄漏内存，所以我认为问题在于 STL 没有按预期释放内存。

我尝试过 VLD 来搜索泄漏，它找到了一些我已经补救的问题，但问题仍然存在。我尝试过集成 Hoard，但这实际上使问题变得更糟（我可能没有正确集成它，但我看不出如何）。

所以我想提出以下问题：是否可以在不会泄漏内存的多线程环境中创建使用STL的程序？在上周的过程中，我对该程序进行了不少于 200 次更改。我已经绘制了更改的结果，它们都具有相同的基本配置文件。我不想删除所有使开发这个应用程序变得如此容易的 STL 优点。我非常感谢任何关于如何让这个应用程序正常工作而不会像它过时那样泄漏内存的建议。

再次感谢任何帮助！

PS我发布了一份记忆测试的副本，以供检查/个人教育。

```
#include <string>
#include <iostream>
#include <Windows.h>
#include <map>

using namespace std;

#define MAX_THD_COUNT 1000

DWORD WINAPI ClientThread(LPVOID param)
{
    unsigned int thdCount = (unsigned int)param;

    map<int, string> m;

    for (unsigned int x = 0; x < 1000; ++x)
    {
        string s;

        for (unsigned int y = 0; y < (x % (thdCount + 1)); ++y)
        {
            string z = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            unsigned int zs = z.size();

            s += z[(y % zs)];
        }

        m[x] = s;
    }

    m.erase(m.begin(), m.end());

    ExitThread(0);

    return 0;
}

int main(int argc, char ** argv)
{
    // wait for start
    string inputWait;
    cout << "type g and press enter to go: ";
    cin >> inputWait;

    // spawn many memory-consuming threads
    for (unsigned int thdCount = 0; thdCount < MAX_THD_COUNT; ++thdCount)
    {
        CreateThread(NULL, 0, ClientThread, (LPVOID)thdCount, NULL, NULL);

        cout
            << (int)(MAX_THD_COUNT - thdCount)
            << endl;

        Sleep(250);
    }

    // wait for end
    cout << "type e and press enter to end: ";
    cin >> inputWait;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:04:36.853

在使用`_beginthreadex()`std 库时使用（就 MS 而言，包括 C 运行时）。此外，您将在 std 运行时子分配器中体验到一定程度的碎片，尤其是在旨在不断支持像这样越来越大的请求的代码中。

MS 运行时库具有一些功能，可让您调试内存请求并确定是否存在可靠的泄漏，一旦您拥有完善的算法并确信您没有看到任何明显的东西。有关详细信息，请参阅[调试例程](http://msdn.microsoft.com/en-us/library/1666sb98%28v=vs.80%29.aspx)。

最后，我对您编写的测试夹具进行了以下修改：

1.  设置正确的 _Crt 报告模式，以便在关闭后向调试窗口发送任何内存泄漏。
2.  修改了线程启动循环，以保持最大线程数持续运行在 MAXIMUM_WAIT_OBJECTS（WIN32-目前定义为 64 个句柄）
3.  抛出一个有目的的泄漏字符数组分配以显示 CRT 实际上会在程序终止时转储时捕获它。
4.  消除了控制台键盘交互。运行它。

希望当您看到输出日志时这会有意义。注意：您必须在调试模式下编译才能为您进行任何适当的转储。

```
#include <windows.h>
#include <dbghelp.h>
#include <process.h>
#include <string>
#include <iostream>
#include <map>
#include <vector>

using namespace std;

#define MAX_THD_COUNT 250
#define MAX_THD_LOOPS 250

unsigned int _stdcall ClientThread(void *param)
{
    unsigned int thdCount = (unsigned int)param;
    map<int, string> m;

    for (unsigned int x = 0; x < MAX_THD_LOOPS; ++x)
    {
        string s;
        for (unsigned int y = 0; y < (x % (thdCount + 1)); ++y)
        {
            string z = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            size_t zs = z.size();
            s += z[(y % zs)];
        }
        m[x].assign(s);
    }
    return 0;
}

int main(int argc, char ** argv)
{
    // setup reporting mode for the debug heap. when the program
    //  finishes watch the debug output window for any potential
    //  leaked objects. We're leaking one on purpose to show this
    //  will catch the leaks.
    int flg = _CrtSetDbgFlag(_CRTDBG_REPORT_FLAG);
    flg |= _CRTDBG_LEAK_CHECK_DF;
    _CrtSetDbgFlag(flg);

    static char msg[] = "Leaked memory.";
    new std::string(msg);

    // will hold our vector of thread handles. we keep this fully populated
    //  with running threads until we finish the startup list, then wait for
    //  the last set of threads to expire.
    std::vector<HANDLE> thrds;
    for (unsigned int thdCount = 0; thdCount < MAX_THD_COUNT; ++thdCount)
    {
        cout << (int)(MAX_THD_COUNT - thdCount) << endl;
        thrds.push_back((HANDLE)_beginthreadex(NULL, 0, ClientThread, (void*)thdCount, 0, NULL));
        if (thrds.size() == MAXIMUM_WAIT_OBJECTS)
        {
            // wait for any single thread to terminate. we'll start another one after,
            //  cleaning up as we detected terminated threads
            DWORD dwRes = WaitForMultipleObjects(thrds.size(), &thrds[0], FALSE, INFINITE);
            if (dwRes >= WAIT_OBJECT_0 && dwRes < (WAIT_OBJECT_0 + thrds.size()))
            {
                DWORD idx = (dwRes - WAIT_OBJECT_0);
                CloseHandle(thrds[idx]);
                thrds.erase(thrds.begin()+idx, thrds.begin()+idx+1);
            }
        }
    }

    // there will be threads left over. need to wait on those too.
    if (thrds.size() > 0)
    {
        WaitForMultipleObjects(thrds.size(), &thrds[0], TRUE, INFINITE);
        for (std::vector<HANDLE>::iterator it=thrds.begin(); it != thrds.end(); ++it)
            CloseHandle(*it);
    }

    return 0;
} 
```

**输出调试窗口**

注意：报告了两次泄漏。一个是 std::string 分配，另一个是 std::string 中保存我们的消息副本的缓冲区。

```
Detected memory leaks!
Dumping objects ->
{80} normal block at 0x008B1CE8, 8 bytes long.
 Data: <09      > 30 39 8B 00 00 00 00 00 
{79} normal block at 0x008B3930, 32 bytes long.
 Data: <    Leaked memor> E8 1C 8B 00 4C 65 61 6B 65 64 20 6D 65 6D 6F 72 
Object dump complete. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:49:59.700

调试大型应用程序并非易事。
您的样本不是显示正在发生的事情的最佳选择。
您的真实代码的一个片段猜测得更好。
当然不可能，所以我的建议是：使用尽可能多的日志，包括所有结构中的插入和删除控件。使用此信息的计数器。当他们怀疑某些事情时，会转储所有数据以了解正在发生的事情。尝试异步工作以保存信息，以减少对您的应用程序的影响。这不是一件容易的事，但对于任何喜欢挑战并且更喜欢用 C/C++ 编程的人来说，这将是一件容易的事。
持久性和简单性应该是目标。
祝你好运

# maven - Maven eclipse 插件错误 Lorg/sonatype/plexus/build/incremental/BuildContext；

> ID：13733538
> 
> 赞同：3
> 
> 时间：2012-12-05T22:20:55.387
> 
> 标签：maven, eclipse-plugin, maven-plugin

有人可以让我知道如何解决这个问题吗？我尝试创建一个新的 Maven 项目，但由于某种原因失败了

描述 资源路径 位置 类型 执行默认资源 org.apache.maven.plugins:maven-resources-plugin:2.5:resources failed: A required class is missing while execution org.apache.maven.plugins:maven-resources-plugin ：2.5：资源：Lorg/sonatype/plexus/build/incremental/BuildContext；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:34:45.157

已将 maven-resource-plugin 更新到 2.6 版。它适用于 M2Eclipse 集成 v1.3 里程碑。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-05T22:25:56.190

我在 eclipse 和 maven 方面的经验并不好，我已经在这两个方面工作了很长时间，但它们没有正确集成。对我来说，让它们一起工作的最好方法是使用命令行来构建、打包和安装项目并使用 eclipse 进行编辑。

要将项目导入 Eclipse，我只需使用 mvn eclipse:eclipse，它将生成将项目导入 Eclipse 所需的文件。

# jquery - jQuery - 无法选择具有“for”属性的“label”元素

> ID：13733543
> 
> 赞同：4
> 
> 时间：2012-12-05T22:21:29.127
> 
> 标签：jquery

我试图在由“for”属性值区分的类似元素的大型文档中选择“label”元素的文本。

如果尝试像这样选择它`$("label[for=cu1]").text()`

这不起作用，选择根元素也不起作用。

这是包含我要选择的带有文本的标签的示例节点。请记住，还有许多其他类似的节点，只有“for”属性不同（以及输入元素的 id，如果有帮助的话）......

```
<div class="verticalfield">
  <label class="verticalfield" for="cu1">Custom 1</label>
  <input id="cu1" class="inputtext long" type="text" value="" maxlength="255" name="cu1">
</div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T22:29:18.167

我将冒险猜测并说您正在尝试`$("label[for=cu1]").text()`在该标签加载到 DOM 之前使用。尝试这样的事情：

```
$(function () {
   //other important stuff

   var text = $("label[for=cu1]").text();
   //etc.
}); 
```

# c# - 保存前如何检查重复项？

> ID：13733545
> 
> 赞同：5
> 
> 时间：2012-12-05T22:21:30.903
> 
> 标签：c#, entity-framework, duplicates

我花了很长时间弄清楚如何将这样的实体添加到我的数据库中。

```
public class ThingWithListings
{
    public virtual ICollection<Listing> Listings;
}

public class Listing
{
    public int Id;

    public virtual ListingData Data { get; set; } // has a FK to ListingData
    public DateTime Creation { get; set; }
}

public class ListingData
{
   public int listing_id; // PK

   ....
} 
```

我正在从另一个来源检索“ThingWithLIstings”并将其写入我的数据库。棘手的部分是任何数量的列表都可能报告给相同的列表数据。所以当我添加或更新一个 ThingWithListings 时，我需要查看一个 ListingData 是否已经存在，如果存在，就使用那个。

我是 EF 的新手，所以我一直在使用作者 Vickers 的文章中的 AddOrUpdate [：](http://blog.oneunicorn.com/2012/05/03/the-key-to-addorupdate/)显然，这不适用于这种情况，所以我尝试了一天左右来找出正确的方法做这个。我会把我主要失败尝试的所有故事都告诉你，希望有人能告诉我正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:51:14.330

我假设除了`Data`对象引用之外，Listing 类中还有原始外键字段`listing_id`。如果没有，我建议添加它。

您可以从获取`listing_id`列表或数组中的现有 s 开始。这节省了以后大量的数据库往返。

那么这个过程真的很简单：对于每个`Listing`到达的对象，检查它是否`listing_id`出现在预取列表中：

*   如果是这样，什么都不做`ListingData`- 只需添加（或更新）`Listing`，包括`listing_id`属性。
*   如果没有，添加和`Listing`设置对象，都作为新的（添加的）对象。EF 将设置密钥。`Listing.Data``ListingData`

（请注意，这假设没有并发用户修改 ListingData，因此拍摄 Id 的快照是安全的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:23:19.597

```
var newArrivals = new ThingWithListings();
newArrivals.Listings = new List<Listing>();
newArrivals.Listings.Add(
    new Listing()
    {
        creation = DateTime.Now,
        ListingData = new ListingData()
        {
            listing_id = 1
        }
    });

//another Listing with the same ListingData listing_id
newArrivals.Listings.Add(
    new Listing()
    {
        creation = DateTime.Now,
        ListingData = new ListingData()
        {
            listing_id = 1
        }
    });

//dummy id generator
int counter = 1;
using (var ctx = new Database1Entities())
{
    //get the ListingData from the current db context
    var dbListingData = ctx.ListingData;

    // the new arrivals
    foreach (Listing item in newArrivals.Listings)
    {
        //get the listing_id of a new arrival's ListingData
        int id = item.ListingData.listing_id;

        //get the ListingData from the db, if it exists
        var listingDataFromDb = dbListingData.FirstOrDefault(i => i.listing_id == id);

        //if not, create it and add it to the db
        if (listingDataFromDb == null)
        {
            listingDataFromDb = new ListingData()
                {
                    //use the new arrival's listing_id
                    listing_id = item.ListingData.listing_id
                };
            ctx.ListingData.Add(listingDataFromDb);
            ctx.SaveChanges();
        }

        //add the Listing by using the listingDataFromDb, which now references the db ListingData
        ctx.Listing.Add(new Listing()
        {
            id = counter++,
            creation = item.creation,
            ListingData = listingDataFromDb
        });
        ctx.SaveChanges();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:36:46.997

```
if (DatabaseContext.ListingData.Any(l => l.listing_id == myId)) 
{   
  //already exists 
}
else 
{   
  //do whatever 
} 
```

# model - 如何在 TYPO3 和 extbase 中使用 crdate 和 cruser_id 等标准字段？

> ID：13733546
> 
> 赞同：6
> 
> 时间：2012-12-05T22:21:44.180
> 
> 标签：model, typo3, extbase

我有领域模型 Basket 和 Article。如果我拨打以下电话，我会收到篮子里的文章。

```
$articlesInBasket = $basket->getArticles(); 
```

如何使用 TYPO3 标准属性，如 crdate 和 cruser_id。使用这样的东西会很好：

```
$basket->getCrUser();
$basket->getCrDate(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-06-03T03:25:30.000

这适用于 TYPO3 8.7 和 9.5

模型：

```
/**
 * @var \DateTime
 */
protected $crdate = null;

/**
 * Returns the creation date
 *
 * @return \DateTime $crdate
 */
public function getCrdate()
{
    return $this->crdate;
} 
```

TCA -> 在列中添加它；

```
'columns' => [
    'crdate' => [
        'config' => [
            'type' => 'passthrough',
        ],
    ],

    ...

] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T01:01:21.517

首先，表字段被命名为`crdate`，`cruser`因此 getter 应该被命名`getCrdate`并获取`getCruser`

接下来在您的模型中，您需要添加一个字段和一个 getter：

```
/** @var int */
protected $crdate;

/**
* Returns the crdate
*
* @return int
*/
public function getCrdate() {
    return $this->crdate;
} 
```

（对`cruser`字段做同样的事情）

最后，您`setup.txt`很可能需要为这些字段添加映射：

```
config.tx_extbase.persistence.classes {
    Tx_Someext_Domain_Model_Somemodel {
        mapping {
            columns.crdate.mapOnProperty = crdate
            columns.cruser.mapOnProperty = cruser    
        }
    }
} 
```

当然，不要忘记在设置中使用专有名称，并在代码更改后清除缓存

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-01T12:30:07.140

这适用于 TYPO3 6.2.11

模型：

```
/**
 * tstamp
 *
 * @var int
 */
protected $tstamp;

/**
 * @return int $tstamp
 */
public function getTstamp() {
    return $this->tstamp;
} 
```

TS：

```
config.tx_extbase.persistence.classes {
    STUBR\Stellen\Domain\Model\Institution {
        mapping {
            tableName = tx_stellen_domain_model_institution
            columns {
                tstamp.mapOnProperty = tstamp
            }
        }
    }
} 
```

PS谢谢[https://github.com/castiron/cicbase](https://github.com/castiron/cicbase)

# javascript - 通过 Javascript 或 jQuery 区分 HTML

> ID：13733550
> 
> 赞同：1
> 
> 时间：2012-12-05T22:22:42.450
> 
> 标签：javascript, jquery, html, node.js

我正在尝试为常见做法提出一个纯粹的前端解决方案。

过去，我将重复使用的网站元素（如`<nav>`、`<header>`、`<footer>`等）的 HTML 存储在一个`functions.php`文件中，并使用 php 函数在多个页面上调用这些内容。这当然可以更轻松地在整个站点范围内进行更改，让我的生活更轻松。

但是，我真的不想再使用 PHP（或过去的 ASP）来执行此操作了。有没有人知道在 Javascript、jQuery 甚至 Node 中执行此操作的干净方法？为了清楚起见，我想在 HTML 中调用一个函数（如`writeNav();`），该函数为导航拉取 HTML。如果可能的话，我宁愿不要`<script>`在任何地方都包含标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:37:22.680

“建立一个可以在其他地方重用的 HTML 块库”的一个非常常见的解决方案是“模板”。有许多模板库可供选择（Underscore 甚至有自己的小型模板功能），但我建议先查看 Handlebars.js，因为它非常健壮但也非常简单。

Handlebars 模板将允许您根据需要存储 HTML：

*   在 .js 文件中的字符串中，
*   在`<script type='text/handlebars'>`您的 html 页面上的标签中，或
*   在被编译成单个 JS 文件的单独 html 文件中

它还允许您交换 HTML 的小片段，这样您就可以（例如）拥有一个可以全部使用的标题，但会替换标题，如下所示：

```
<h3>{{title}}</h3> 
```

Handlebars 网站 ( [http://handlebarsjs.com/](http://handlebarsjs.com/) ) 运行良好；我强烈推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:27:02.887

这对于 jQuery 来说是微不足道的，例如

```
function writeP(str){
    document.write($('<p />').text(str).get(0));
} 
```

然后，您可以执行以下操作：

```
<div class="foo">
    <script type="text/javascript">writeP('hello');</script>
</div> 
```

...这将导致：

```
<div class="foo">
    <p>hello</p>
</div> 
```

这个例子很愚蠢，但我相信这个机制符合你想要完成的精神。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:36:21.303

我认为你在谈论的是 html 包括。

这不是一个真正值得生产的解决方案，但让我完成了原型设计阶段。

使用 jQuery，将其包含在您的 $(document).ready() 回调中：

```
$(".include").each(function() {
    var inc = $(this);
    $.ajax({
        url : inc.attr("title"),
        dataType : 'html',
        success : function(data) {
        inc.replaceWith(data);
        console.log("adding " + inc.attr("title"));
    }); 
```

然后在要包含 html 文件的正文中，执行以下操作：

```
<div class="include" title="path/to/html/file.html"></div> 
```

具有“include”属性的所有元素（div、spans 等）都将替换为 title 属性中文件路径的内容。

注意：在此过程中将替换整个标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:36:47.190

如果只是为了组织你编写 HTML 的方式，还有像 BBEdit 这样的文本编辑器具有包含支持。

# git - 是否可以克隆作为拉取请求的存储库而不是作为单独的分支进行管理

> ID：13733551
> 
> 赞同：0
> 
> 时间：2012-12-05T22:22:45.897
> 
> 标签：git, github

我有一个开发人员做了一些工作，他向我提交了一个拉取请求。有没有办法可以克隆这个分支的副本？我知道我可以运行 git pull 但我宁愿从他的结果中克隆（如果可能的话）只是为了快速构建以防出现问题。如果我完全认为这是错误的，请告诉我。

分支网址是这样的：

```
https://github.com/my-name/project-name/tree/his-branch 
```

但如果我这样做

```
git clone https://github.com/my-name/project-name/tree/his-branch 
```

我明白了

```
Cloning into his-branch...
fatal:
https://github.com/my-name/project-name/tree/his-branch/info/refs not found: did you run git update-server-info on the server? 
```

为什么我会得到，我如何才能得到他所做更改的副本？

提前谢谢

**编辑#1**

我试过了，但得到了这个错误：

```
Wed Dec 05$ git clone --branch his-branch https://github.com/my-name/project-name.git
fatal: destination path 'project-name' already exists and is not an empty directory.
Wed Dec 05$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:23:45.167

要从 repo 克隆一个分支，你可以

```
git clone --branch his-branch https://github.com/my-name/project-name.git 
```

该`/tree/his-branch`部分只是用于查看特定分支的 github URL。相反，您需要将 git 指向 repo，然后用`--branch`or告诉它哪个分支`-b`。

另外：您可能应该从*他*的回购副本中提取，而不是您的。除非你们都在同一个源代码库上工作，而他只是要求你将它合并到 master 而不是他，这大概是`https://github.com/his-name/project-name.git`......

# python - 记录器配置以记录到文件并打印到标准输出

> ID：13733552
> 
> 赞同：499
> 
> 时间：2012-12-05T22:22:51.060
> 
> 标签：python, file, logging, stdout

我正在使用 Python 的日志记录模块将一些调试字符串记录到一个运行良好的文件中。现在另外，我想使用这个模块将字符串打印到标准输出。我该怎么做呢？为了将我的字符串记录到文件中，我使用以下代码：

```
import logging
import logging.handlers
logger = logging.getLogger("")
logger.setLevel(logging.DEBUG)
handler = logging.handlers.RotatingFileHandler(
    LOGFILE, maxBytes=(1048576*5), backupCount=7
)
formatter = logging.Formatter("%(asctime)s - %(name)s - %(levelname)s - %(message)s")
handler.setFormatter(formatter)
logger.addHandler(handler) 
```

然后调用一个记录器函数

```
logger.debug("I am written to the file") 
```

在这里感谢您的帮助！

* * *

## 回答 #1

> 赞同：605
> 
> 时间：2012-12-05T22:43:00.510

只需获取根记录器的句柄并添加`StreamHandler`. 对标准错误的`StreamHandler`写入。不确定您是否真的需要 stdout 而不是 stderr，但这是我在设置 Python 记录器时使用的，我也添加了`FileHandler`。然后我所有的日志都去这两个地方（这听起来像你想要的）。

```
import logging
logging.getLogger().addHandler(logging.StreamHandler()) 
```

如果要输出 to`stdout`而不是`stderr`，只需将其指定给`StreamHandler`构造函数即可。

```
import sys
# ...
logging.getLogger().addHandler(logging.StreamHandler(sys.stdout)) 
```

您也可以在其中添加一个`Formatter`，这样您的所有日志行都有一个共同的标题。

IE：

```
import logging
logFormatter = logging.Formatter("%(asctime)s [%(threadName)-12.12s] [%(levelname)-5.5s]  %(message)s")
rootLogger = logging.getLogger()

fileHandler = logging.FileHandler("{0}/{1}.log".format(logPath, fileName))
fileHandler.setFormatter(logFormatter)
rootLogger.addHandler(fileHandler)

consoleHandler = logging.StreamHandler()
consoleHandler.setFormatter(logFormatter)
rootLogger.addHandler(consoleHandler) 
```

打印为以下格式：

```
2012-12-05 16:58:26,618 [MainThread  ] [INFO ]  my message 
```

* * *

## 回答 #2

> 赞同：468
> 
> 时间：2017-09-07T14:17:31.037

[`logging.basicConfig()`](https://docs.python.org/3/library/logging.html#logging.basicConfig)从 Python 3.3 开始可以使用关键字参数`handlers`，这大大简化了日志设置，尤其是在使用相同的格式化程序设置多个处理程序时：

> **`handlers`**– 如果指定，这应该是已创建的处理程序的可迭代，以添加到根记录器。任何尚未设置格式化程序的处理程序都将被分配在此函数中创建的默认格式化程序。

因此，整个设置可以通过一个这样的调用来完成：

```
import logging

logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s [%(levelname)s] %(message)s",
    handlers=[
        logging.FileHandler("debug.log"),
        logging.StreamHandler()
    ]
) 
```

（或者根据原始问题的要求加上`import sys`+ `StreamHandler(sys.stdout)`- StreamHandler 的默认值是写入标准错误。如果您想自定义日志格式并添加文件名/行、线程信息等内容，请查看[LogRecord 属性。）](https://docs.python.org/3/library/logging.html#logrecord-attributes)

上面的设置只需要在脚本开头附近进行一次。您可以稍后使用代码库中所有其他位置的日志记录，如下所示：

```
logging.info('Useful message')
logging.error('Something bad happened')
... 
```

注意：如果它不起作用，其他人可能已经以不同的方式初始化了日志系统。评论建议`logging.root.handlers = []`在调用之前做`basicConfig()`。

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2014-09-24T02:49:04.703

添加不带参数的 StreamHandler 会转到 stderr 而不是 stdout。如果其他进程依赖于标准输出转储（即在编写 NRPE 插件时），请确保明确指定标准输出，否则您可能会遇到一些意想不到的麻烦。

这是一个重用假设值和问题中的 LOGFILE 的快速示例：

```
import logging
from logging.handlers import RotatingFileHandler
from logging import handlers
import sys

log = logging.getLogger('')
log.setLevel(logging.DEBUG)
format = logging.Formatter("%(asctime)s - %(name)s - %(levelname)s - %(message)s")

ch = logging.StreamHandler(sys.stdout)
ch.setFormatter(format)
log.addHandler(ch)

fh = handlers.RotatingFileHandler(LOGFILE, maxBytes=(1048576*5), backupCount=7)
fh.setFormatter(format)
log.addHandler(fh) 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2020-04-05T14:00:24.983

这是一个完整的、包装精美的解决方案，基于[Waterboy 的回答](https://stackoverflow.com/a/13733863/1976617)和其他各种来源。它支持记录到控制台和日志文件，允许不同的日志级别设置，提供彩色输出并且易于配置（也可作为[Gist](https://gist.github.com/fonic/7e5ab76d951a2ab2d5f526a7db3e2004)提供）：

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

# -------------------------------------------------------------------------------
#                                                                               -
#  Python dual-logging setup (console and log file),                            -
#  supporting different log levels and colorized output                         -
#                                                                               -
#  Created by Fonic <https://github.com/fonic>                                  -
#  Date: 04/05/20                                                               -
#                                                                               -
#  Based on:                                                                    -
#  https://stackoverflow.com/a/13733863/1976617                                 -
#  https://uran198.github.io/en/python/2016/07/12/colorful-python-logging.html  -
#  https://en.wikipedia.org/wiki/ANSI_escape_code#Colors                        -
#                                                                               -
# -------------------------------------------------------------------------------

# Imports
import os
import sys
import logging

# Logging formatter supporting colorized output
class LogFormatter(logging.Formatter):

    COLOR_CODES = {
        logging.CRITICAL: "\033[1;35m", # bright/bold magenta
        logging.ERROR:    "\033[1;31m", # bright/bold red
        logging.WARNING:  "\033[1;33m", # bright/bold yellow
        logging.INFO:     "\033[0;37m", # white / light gray
        logging.DEBUG:    "\033[1;30m"  # bright/bold black / dark gray
    }

    RESET_CODE = "\033[0m"

    def __init__(self, color, *args, **kwargs):
        super(LogFormatter, self).__init__(*args, **kwargs)
        self.color = color

    def format(self, record, *args, **kwargs):
        if (self.color == True and record.levelno in self.COLOR_CODES):
            record.color_on  = self.COLOR_CODES[record.levelno]
            record.color_off = self.RESET_CODE
        else:
            record.color_on  = ""
            record.color_off = ""
        return super(LogFormatter, self).format(record, *args, **kwargs)

# Setup logging
def setup_logging(console_log_output, console_log_level, console_log_color, logfile_file, logfile_log_level, logfile_log_color, log_line_template):

    # Create logger
    # For simplicity, we use the root logger, i.e. call 'logging.getLogger()'
    # without name argument. This way we can simply use module methods for
    # for logging throughout the script. An alternative would be exporting
    # the logger, i.e. 'global logger; logger = logging.getLogger("<name>")'
    logger = logging.getLogger()

    # Set global log level to 'debug' (required for handler levels to work)
    logger.setLevel(logging.DEBUG)

    # Create console handler
    console_log_output = console_log_output.lower()
    if (console_log_output == "stdout"):
        console_log_output = sys.stdout
    elif (console_log_output == "stderr"):
        console_log_output = sys.stderr
    else:
        print("Failed to set console output: invalid output: '%s'" % console_log_output)
        return False
    console_handler = logging.StreamHandler(console_log_output)

    # Set console log level
    try:
        console_handler.setLevel(console_log_level.upper()) # only accepts uppercase level names
    except:
        print("Failed to set console log level: invalid level: '%s'" % console_log_level)
        return False

    # Create and set formatter, add console handler to logger
    console_formatter = LogFormatter(fmt=log_line_template, color=console_log_color)
    console_handler.setFormatter(console_formatter)
    logger.addHandler(console_handler)

    # Create log file handler
    try:
        logfile_handler = logging.FileHandler(logfile_file)
    except Exception as exception:
        print("Failed to set up log file: %s" % str(exception))
        return False

    # Set log file log level
    try:
        logfile_handler.setLevel(logfile_log_level.upper()) # only accepts uppercase level names
    except:
        print("Failed to set log file log level: invalid level: '%s'" % logfile_log_level)
        return False

    # Create and set formatter, add log file handler to logger
    logfile_formatter = LogFormatter(fmt=log_line_template, color=logfile_log_color)
    logfile_handler.setFormatter(logfile_formatter)
    logger.addHandler(logfile_handler)

    # Success
    return True

# Main function
def main():

    # Setup logging
    script_name = os.path.splitext(os.path.basename(sys.argv[0]))[0]
    if (not setup_logging(console_log_output="stdout", console_log_level="warning", console_log_color=True,
                        logfile_file=script_name + ".log", logfile_log_level="debug", logfile_log_color=False,
                        log_line_template="%(color_on)s[%(created)d] [%(threadName)s] [%(levelname)-8s] %(message)s%(color_off)s")):
        print("Failed to setup logging, aborting.")
        return 1

    # Log some messages
    logging.debug("Debug message")
    logging.info("Info message")
    logging.warning("Warning message")
    logging.error("Error message")
    logging.critical("Critical message")

# Call main function
if (__name__ == "__main__"):
    sys.exit(main()) 
```

* * *

**关于 Microsoft Windows 的注意事项：**
要在 Microsoft Windows 上实际显示颜色，还需要执行其他步骤。有两个选项（均在 Microsoft Windows 10 上成功测试）：

1) 使用以下代码启用 ANSI 终端模式（通过设置标志使终端能够解释转义序列`ENABLE_VIRTUAL_TERMINAL_PROCESSING`；更多信息请参见[此处](https://stackoverflow.com/a/36760881/1976617)、[此处](https://stackoverflow.com/a/37505496/1976617)、[此处](https://docs.microsoft.com/en-us/windows/console/setconsolemode)和[此处](https://docs.microsoft.com/en-us/windows/console/console-virtual-terminal-sequences)）：

```
# Enable ANSI terminal mode on Microsoft Windows
def windows_enable_ansi_terminal_mode():
    if (sys.platform != "win32"):
        return None
    try:
        import ctypes
        kernel32 = ctypes.windll.kernel32
        result = kernel32.SetConsoleMode(kernel32.GetStdHandle(-11), 7)
        if (result == 0): raise Exception
        return True
    except:
        return False 
```

2) 使用 Python 包[colorama](https://pypi.org/project/colorama/)（过滤发送到*stdout*和*stderr*的输出并将转义序列转换为本地 Windows API 调用）：

```
import colorama
colorama.init() 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2012-12-05T22:37:43.397

在设置任何其他处理程序或记录任何消息之前作为参数运行`basicConfig`，或者手动添加一个将消息推送到标准输出到根记录器（或您想要的任何其他记录器，就此而言）。`stream=sys.stdout``StreamHandler`

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-12-20T22:13:23.700

记录到不同级别和格式`stdout`：`rotating file`

```
import logging
import logging.handlers
import sys

if __name__ == "__main__":

    # Change root logger level from WARNING (default) to NOTSET in order for all messages to be delegated.
    logging.getLogger().setLevel(logging.NOTSET)

    # Add stdout handler, with level INFO
    console = logging.StreamHandler(sys.stdout)
    console.setLevel(logging.INFO)
    formater = logging.Formatter('%(name)-13s: %(levelname)-8s %(message)s')
    console.setFormatter(formater)
    logging.getLogger().addHandler(console)

    # Add file rotating handler, with level DEBUG
    rotatingHandler = logging.handlers.RotatingFileHandler(filename='rotating.log', maxBytes=1000, backupCount=5)
    rotatingHandler.setLevel(logging.DEBUG)
    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
    rotatingHandler.setFormatter(formatter)
    logging.getLogger().addHandler(rotatingHandler)

    log = logging.getLogger("app." + __name__)

    log.debug('Debug message, should only appear in the file.')
    log.info('Info message, should appear in file and stdout.')
    log.warning('Warning message, should appear in file and stdout.')
    log.error('Error message, should appear in file and stdout.') 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-10-27T00:58:28.883

在多个 Python 包中一遍又一遍地使用 Waterboy 的代码后，我最终将其转换为一个小的独立 Python 包，您可以在此处找到它：

[https://github.com/acschaefer/duallog](https://github.com/acschaefer/duallog)

该代码有据可查且易于使用。只需下载`.py`文件并将其包含在您的项目中，或通过`pip install duallog`.

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2016-07-19T22:57:24.653

对于 2.7，请尝试以下操作：

```
fh = logging.handlers.RotatingFileHandler(LOGFILE, maxBytes=(1048576*5), backupCount=7) 
```

# sql - 在链接服务器中使用案例语句

> ID：13733556
> 
> 赞同：3
> 
> 时间：2012-12-05T22:23:08.567
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

```
Select distinct 
    Case 
        When ABC = 'C1' then 'C1'
        When ABC = 'C1C' then 'C1C' 
        When ABC = 'C2' then 'C2' 
        When ABC = 'C3' then 'C3'
        When ABC = 'C3C' then 'C3C' 
        When ABC = 'C3CC' then  'C3CC'
        When ABC = 'C4' then 'C4' 
        When ABC = 'C4C' then  'C4C'
        When ABC = 'C4CC' then 'C4CC' 
        When ABC = 'C6' then  'C6'
        When ABC = 'C7' then  'C7'
        When ABC = 'C8' then  'C8'
        When ABC = 'F' then  'F'
        When ABC = 'F2' then 'F2'
        When ABC = 'V' then 'V'
        When ABC = 'V2' then 'V2'
    End as ABC
from LinkedServer.database.dbo.Tblname 
```

当我在常规数据库上执行上述 sql 时，可以完美运行，没有错误，但是如果我使用链接服务器前缀，那么我会得到以下错误。

> 错误消息：消息 8180，级别 16，状态 1，行 1 无法准备语句。Msg 125, Level 15, State 4, Line 1 Case 表达式只能嵌套到级别 10。

如果我删除一些案例语句（通常少于 10 个案例）工作正常，它工作正常。任何想法或解决方法：我知道的一种解决方法：使用许多案例语句在链接服务器上创建 SP/View/Function，然后调用创建的 SP/View/Function。我不是在寻找这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:29:15.087

你的case也可以写

```
Case When ABC IN ('C1','C1C','C2'...) then ABC End as ABC 
```

如果您使用的 CASE 语句具有大量内置的描述翻译，那么您做错了。您应该改为创建查找表并执行 LEFT JOIN。查找表可以存在于链接服务器的任一侧。

```
select
    l.description as abc
    ...
from LinkedServer.database.dbo.Tblname t
left join ABCValues l on t.ABC = l.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:30:00.483

`when`无论出于何种原因，您在这样的`case`声明中不能超过 10个。

在你的情况下，很容易用一个`in`子句来修复：

```
case when ABC in ('C1', . . . ) then ABC
end 
```

如果您的 SQL 代码更复杂，那么您可以使用映射表并连接：

```
with mapping as (
    select 'C1' as val, 'C1' as newval union all
    . . .
)
select m.newval, . . .
from LinkedServer.database.dbo.Tblname t left outer join
     mapping m
     on t.ABC = m.val 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T00:08:47.623

代替 LINKEDSERVER.DB.dbo.Table，您可以使用 OPENQUERY 并且没有遇到此 CASE 限制

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T15:54:23.400

正如 Steven 提到的，尽可能使用 OPENQUERY。

```
SELECT ABC 
FROM OPENQUERY(LinkedServer,
'Select distinct 
    Case 
        When ABC = ''C1'' then ''C1 or whatever''
        When ABC = ''C1C'' then ''C1C blabla '' 
        When ABC = ''C2'' then ''C2'' 
        When ABC = ''C3'' then ''C3''
        When ABC = ''C3C'' then ''C3C'' 
        When ABC = ''C3CC'' then  ''C3CC''
        When ABC = ''C4'' then ''C4'' 
        When ABC = ''C4C'' then  ''C4C''
        When ABC = ''C4CC'' then ''C4CC'' 
        When ABC = ''C6'' then  ''C6''
        When ABC = ''C7'' then  ''C7''
        When ABC = ''C8'' then  ''C8''
        When ABC = ''F'' then  ''F''
        When ABC = ''F2'' then ''F2''
        When ABC = ''V'' then ''V''
        When ABC = ''V2'' then ''V2''
    End as ABC
from database.dbo.Tblname') 
```

# javascript - 您如何使用三级引用来表示代码？

> ID：13733561
> 
> 赞同：1
> 
> 时间：2012-12-05T22:23:43.060
> 
> 标签：javascript, jquery, ruby-on-rails

基本上我的控制器操作中有一个 respond_to 块：

```
respond_to do |format|
  format.js { render :js => "$('#test').html('<div class='colorize'>Test</div>');" }
end 
```

我还尝试向将`colorize`通过 js 呈现的 div 块添加一个 css 类，但在那里使用引号会破坏代码。我如何使用添加的类来实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:27:53.567

在这里为自己省去一个巨大的头痛，除了最简单的 JS 之外，不要在你的 ruby​​ 处理程序中添加任何东西。

```
format.js { render :js => "colorizeTest()" } 
```

然后在页面上或通过包含的脚本，声明一个函数：

```
var colorizeTest = function() {
  $('#test').html('<div class="colorize">Test</div>');
}; 
```

不要把 JS 放在你的 Ruby 中。

* * *

或者你可以使用一个真实的视图模板：

```
# controller code
@some_id = 'test'

# JS format Handler
format.js

# views/whatever.ejs.js
$('#<%= @some_id %>').html('<div class="colorize">Test</div>'); 
```

* * *

或者两者都做！在这个例子中，这么多的抽象是愚蠢的，但是一旦这个 JS 开始做任何稍微复杂的事情，这将是最好的方法。通过生成的 js 响应传递更多数据，更少代码。真正复杂的 js 逻辑应该*总是*静态地包含在页面上。

```
# controller code
@some_id = 'test'

# JS format Handler
format.js

// js funciton on page
var colorizeTest = function(id) {
  $('#' + id).html('<div class="colorize">Test</div>');
};

# views/whatever.ejs.js
colorizeTest(<%= @some_id %>); 
```

* * *

最后，我可能还争辩说，真正的“最佳”方式只是从服务器呈现 JSON，并且您已经静态包含了 JS，它处理通过 AJAX 获取它，并根据该数据处理如何处理页面。这样你就永远不会“生成”可执行的 javascript 服务器端，这非常干净。

```
// js file somewhere
var colorizeTest = function(id) {
  $('#' + id).html('<div class="colorize">Test</div>');
};

var doStuff = function() {
  $.getJSON("/whatever.json", function(data) {
    colorizeTest(data.id);
  });
};

# rails controller
render :json => { :id => 'test' } 
```

看看现在你的 ruby​​ 中根本没有任何 JS 吗？或者你的 JS 中的任何红宝石？只是在服务器和客户端之间发送数据。不错的人 只是我喜欢它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T22:25:31.377

反斜杠？

```
" ' \" \' \\\" \\\' \\\\\" \\\\\' ... \\\\\' \\\\\" \\\' \\\" \' \" ' " 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T22:27:22.210

替代反斜杠，

```
%Q[$('#tes­t').html("­<div class­='colorize­'>Test</div>");] 
```

但是，这是 Ruby，而不是 JavaScript。在纯 JavaScript 中，`%q`/`%Q`不可用。

编辑：另外，亚历克斯韦恩有最好的建议。

# xcode - NSLevelIndicator 禁用临界值

> ID：13733570
> 
> 赞同：3
> 
> 时间：2012-12-05T22:24:17.707
> 
> 标签：xcode, macos, cocoa, colors, nslevelindicator

我有一个我创建的用于测量带宽的 mac 应用程序。当用户达到一定百分比的带宽时，我为用户设置了警报。我可以选择禁用警告值（黄条）和关键单元格（红条）。

问题是，当用户“关闭”临界值时，上传和下载栏都会变成红色（无论他们的位置是什么）。

我正在做的是“关闭”将关键或警告值设置为 maxValue 的 100%。这似乎适用于关闭严重和警告警报（只有绿色条）。

所以我的问题是，有没有办法禁用临界值（红色）和/或警告值（黄色）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T20:53:31.883

这是一种黑客行为......但我通过执行以下操作禁用了我的应用程序中的警告部分：

```
levelIndicator.criticalValue = threshold;
levelIndicator.warningValue = threshold-.00001; 
```

如果我使它们相等，则两者都被禁用并且条始终为绿色，但是通过将警告设置为低于临界水平的一点点，它会从绿色变为红色，而我永远看不到任何黄色。（工程和数学的区别……）

要禁用关键/红色部分，仅显示绿色和黄色，请尝试以下操作：

```
levelIndicator.warningValue = threshold;
levelIndicator.criticalValue = levelIndicator.maxValue+1; 
```

# java - Java Swing JTable：由于表模型的使用/创建不正确，无法访问表中的值

> ID：13733572
> 
> 赞同：0
> 
> 时间：2012-12-05T22:24:20.423
> 
> 标签：java, swing, jtable, tablemodel, abstracttablemodel

我刚刚开始使用 Java Swing 进行编程。我对众多 Java Swing 类中的每一个都不是很熟悉，并且在创建表时遇到了绊脚石。

我试图弄清楚如何将表添加到我正在制作的 Java Swing 程序中。我查看了 docs.oracle.com 试图弄清楚，但是当我尝试访问表的值时出现错误。我将包含我的代码以帮助显示我当前正在尝试做什么以及错误在哪里。

这是我制作表格和表格模型的代码（我认为问题在于我的表格模型无法正常工作）：

```
 /*Create the Table Entry*/
        columnNames = new String[listoffields.size()+1];
        columnNames[0] = "Record Number";
        for(int a = 1; a < columnNames.length;a++){
            columnNames[a] = listoffields.get(a-1).getTitle();
        }
        int count = 1;
        data = new Object[numrecords][listoffields.size()+1];
        for(int a = 0; a < numrecords;a++){
            for(int b = 0; b < listoffields.size()+1;b++){
                if(b == 0){
                    data[a][b] = count;
                    count++;
                }
                else{
                    data[a][b] = "";
                }
            }
        }

        /* create the table */
        JTable table = new JTable(data,columnNames);
        table.setCellSelectionEnabled(true);
        table.setModel(new AbstractTableModel() {
            public String getColumnName(int col) {
                return columnNames[col].toString();
            }
            public int getRowCount() { return data.length; }
            public int getColumnCount() { return columnNames.length; }
            public Object getValueAt(int row, int col) {
                return data[row][col];
            }
            public boolean isCellEditable(int row, int col) {
                return (col >= 1);
            }
            public void setValueAt(Object value, int row, int col) {
                data[row][col] = value;
                fireTableCellUpdated(row, col);
            }
        });
        JScrollPane scrollPane = new JScrollPane(table);
        table.setFillsViewportHeight(true);

        /* addthe table to the JTable tableentry*/
        tabelentry.setLayout(new BoxLayout(ProjectFrame.tabelentry, BoxLayout.Y_AXIS));
        tabelentry.add(scrollPane);
        tabelentry.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); 
```

显示表格并编辑每个单元格的空白值后，单击提交单元格的提交按钮。但是，遇到以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
   at java.util.Vector.elementAt(Unknown Source)
   at javax.swing.table.DefaultTableModel.getValueAt(Unknown Source)
   at Client.GUIComponents.ProjectFrame$1.submit(NameOfFile.java:LineNumber) 
```

尝试提交时遇到如下错误：

```
public void submit(){
   String recordvalues = ""; //contains a String representation of what I want to submit
   for(int a = 0; a < numberoffields;a++){
      for(int b = 0; b < numberofrecords;b++){
         if(a != 0){ //I want to skip the first column
            recordvalues = recordvalues  + (String) tabelentry.getModel().getValueAt(b, a) + ","; //The error is at this line in the code
         }
      }
   }
} 
```

我提供了我的代码来举例说明我当前遇到的问题以及我目前尝试过的问题。为了概括我的问题，**我想知道如何正确编写表模型类，以便我可以访问表中每个单元格的值。**任何帮助都会有所帮助。万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:39:39.003

我的直接想法是您正在创建两个不同的表模型。

```
JTable table = new JTable(data,columnNames);
table.setCellSelectionEnabled(true);
table.setModel(new AbstractTableModel() {... 
```

`new JTable(data,columnNames)`实际上是`DefaultTableModel`根据您提供的信息创建它自己的。尝试删除`table.setModel(new AbstractTableModel() {...`代码

另一个相关的问题是，我不知道如何声明`data`和`columnNames`声明。

阅读[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)了解更多详情

**更新**

正如 Hovercraft 所指出的，另一个问题是您将一个表添加到另一个表，然后访问错误的模型。

表创建应该看起来更像......

```
tableEntry = new JTable(data,columnNames);
JScrollPane scrollPane = new JScrollPane(tableEntry );
tableEntry .setFillsViewportHeight(true);
// Don't forget to add the scroll pane to you view !! 
```

然后你提交方法应该看起来更像......

```
public void submit(){
    String recordvalues = ""; //contains a String representation of what I want to submit
    TableModel model = tableEntry.getModel();
    for(int a = 0; a < model.getColumnCount();a++){
        for(int b = 0; b < model.getRowCount();b++){
            if(a != 0){ //I want to skip the first column
                recordvalues = recordvalues  + (String) model.getValueAt(b, a) + ","; //The error is at this line in the code
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:49:29.110

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0 
```

此异常意味着您的列大小`table`为 0，我认为这是因为您没有将列添加到`TableModel`.

尝试创建几个`TableColumn Column = new TableColumn();`，然后将这些列添加到您的`table`

# jquery - Jquery，如何使用 foreach 在 span 标签中获取文本

> ID：13733578
> 
> 赞同：0
> 
> 时间：2012-12-05T22:24:33.997
> 
> 标签：jquery

```
<span class='url_link'>1</span>
<span class='url_link'>2</span>
<span class='url_link'>3</span>
<span class='url_link'>4</span>
<span class='url_link'>5</span>

$(".url_link").each(function(idx, obj){
        console.log(this);  // <span class="url_link">
    console.log(this.text()); // TypeError: this.text is not a function
}); 
```

如何 grep 跨度标签中的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:25:44.163

采用`console.log($(this).text());`

您试图在非 jQuery 对象上使用 jQuery 函数。

**[jsFiddle 示例](http://jsfiddle.net/j08691/fjWJP/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:25:53.700

```
console.log(this.text()) 
```

应该

```
console.log($(this).text()) 
```

`.text()` 是一个`jQuery method`，**这**是一个`DOM Object`..

所以需要在使用它之前将其转换为 jQuery 对象`.text()`..

如果你想使用原生 javascript，那么你可以试试这个

```
console.log(this.innerHTML) 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/awLbp/)**

# java - Android 2.3 和谷歌地图 API v2

> ID：13733581
> 
> 赞同：5
> 
> 时间：2012-12-05T22:24:40.000
> 
> 标签：java, android

今天我尝试使用 google maps api v2 for Android 2.3.3 我的步骤：

*   从 debug.keystore 获得 SHA1 代码
*   在 google apis 控制台中创建一个新项目
*   注册一个新的身份证
*   启用谷歌地图android api v2
*   使用输入 SHA1 创建一个 android 密钥；it.mappe（it.mappe 是我的包）
*   获取 API 密钥
*   更新 AndroidManifest 文件：

    ```
    <permission android:name="it.mappe.permission.MAPS_RECEIVE" android:protectionLevel="signature" />

    <uses-permission android:name="it.mappe.permission.MAPS_RECEIVE" />
    <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

    <uses-feature android:glEsVersion="0x00020000" android:required="true"` />

    <application     android:allowBackup="true"    android:icon="@drawable/ic_launcher"  android:label="@string/app_name"  android:theme="@style/AppTheme" >
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="MY_KEY" />

            <activity
                android:name="it.mappe.MainActivity"
                android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
    ```

*   我的主要活动

    ```
    public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    } 
    ```

*   我的活动主要：

    ```
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/> 
    ```

*   将目录复制 `ANDROID_SDK_DIR/extras/google/google_play_services/libproject/google-play-services_lib`到项目的根目录

*   添加`/extras/android/compatibility/v4/android-support-v4.jar`为外部 jar

*   将下一行添加到`YOUR_PROJECT/project.properties` `android.library.reference.1=google-play-services_lib`

当我在我的三星 Galaxy S（使用 google play services apk）上运行它时，它崩溃并且 logcat 显示此错误

```
E/AndroidRuntime(6435): FATAL EXCEPTION: main java.lang.RuntimeException: Unable to start activity ComponentInfo{it.mappe/it.mappe.MainActivity}: 

android.view.InflateException: Binary XML file line #2: Error inflating class fragment
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    at dalvik.system.NativeStart.main(Native Method)
 Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
    at android.app.Activity.setContentView(Activity.java:1657)
    at it.mappe.MainActivity.onCreate(MainActivity.java:12)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
    ... 11 more
 Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/it.mappe-2.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
    ... 19 more 
```

一些建议？

编辑

这里是我的 main.xml：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T00:32:49.093

`<fragment>`应该全部小写。

此外，您正在使用`Activity`(not `FragmentActivity`) with `SupportMapFragment`，我怀疑这种组合是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:15:56.550

检查 project.properties 中的目标 Google SDK 版本和支持的 lib(Android.jar) 版本是否相同。

# css - “左”和“右”是无语义的 CSS 类名吗？

> ID：13733582
> 
> 赞同：0
> 
> 时间：2012-12-05T22:24:48.973
> 
> 标签：css, class, layout, semantics, semantic-markup

根据[一位作者](http://css-tricks.com/semantic-class-names/)的说法，使用诸如“left”和“right”之类的类名是无语义的 CSS，但一些评论表明并非如此。

在某些情况下（例如，移动显示、设计调整），“左”可能不再那么左了，这是有道理的。

另一方面，如果类被称为“地址”和“电话”（以匹配内容），那么这将解决它。但是，如果内容发生了变化，或者稍作修改而不再符合要求怎么办？

这方面的共同点在哪里？是否有替代的、面向未来的语义解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:27:49.923

我认为这很好，因为您正在描述布局和布局需要这些术语。

当您想要突出显示时，“语义参数”更适用于“红色”标签之类的东西。当你想要蓝色时会发生什么？最好将标签设置为“SuperImportant”并将其颜色更改为一个地方而不是“红色”并且必须在每个地方都更改它（或者更糟糕的是，更改“红色”所指的颜色而不更改名称。

所以对于左右，他们可能最好保持左右。我怀疑这些会成为“顶部”和“底部”面板，我怀疑它们会被重新定位为其他任何东西。

请注意，这是用于布局。如果存在适用于左侧的特定内容和适用于右侧的特定内容，并且两者都不会相遇，那么还要用标签围绕内容，例如`<dems>lllll</dems>............<reps>- - - - - - </reps>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:30:35.433

一般来说，像“right”和“left”这样的类名不是语义的，除非内容本身与右或左有关（例如，政党或左撇子剪刀）。

我不会太担心它。有些人如此专注于这些关于什么是语义什么不是语义的塔木德辩论，以至于他们失去了比例感。

# ruby - Ruby：获取查询字符串中值的正确类型

> ID：13733586
> 
> 赞同：1
> 
> 时间：2012-12-05T22:24:52.837
> 
> 标签：ruby, types, query-string

说我有

```
str = "a=2&b=3.05&c=testing" 
```

我跑

```
require 'cgi'
out = {}
CGI::parse(str).each { |k,v| out[k] = v[0] } 
```

当我输出`a`时，2 是 a `string`，当我希望它是`Int`

```
out['a'] // "2" (instead of int 2)
out['b'] // "3.05" (instead of float 3.05) 
```

有什么方法可以更正查询字符串中的类型？

**更新：**

添加了这个方法来测试数字

```
def is_a_number?(s)
  s.to_s.match(/\A[+-]?\d+?(\.\d+)?\Z/) == nil ? false : true 
end 
```

并在解析期间

```
CGI::parse(url).each do |k,v|
    val = v[0]
    if is_a_number? val 
        val = val.include?('.') ? val.to_f : val.to_i
    end 
    out[k] = val 
end 
```

似乎适用于基本示例。这有什么不安全的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:30:58.070

简短的回答是否定的，没有办法只得到正确的类型。您可以编写自己的解析器，尝试根据正则表达式匹配进行猜测。处理这种情况的典型方法是您根据每个参数的预期类型手动解析它们。您可以调用类似的方法`to_i`并将`to_f`它们转换为您想要的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:26:42.050

**编辑：**这有效

```
require 'cgi'

str = "a=2&b=3.05&c=testing"
out = {}

def typecasted(str)
  [str.to_i, str.to_f, str].find { |cast| cast.to_s == str }
end

CGI::parse(str).each do |key, val|
  out[key] = typecasted val.first
end

p out
# => {"a"=>2, "b"=>3.05, "c"=>"testing"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:58:37.490

如果你像这样解析它，你不应该有问题

```
out = {}
CGI::parse(str).each do |k, v|
  v, v = (v = v.first), (v if v[/[a-zA-Z]/]) || [v.to_i, v.to_f].max
  out.merge!(Hash[k, v])
end 
```

结合 AJcodez 的技术，这给出了

```
out = {}
CGI::parse(str).each do |k, v|
  v, out[k] = (v = v.first), [v.to_i, v.to_f, v].find { |c| c.to_s == v }
end 
```

或作为单线

```
Hash[*CGI::parse(str).map {|k, v| v = v.first; [k, [v.to_i, v.to_f, v].find { |c| c.to_s == v }]}.flatten] 
```

给

```
{"a"=>2, "b"=>3.05, "c"=>"testing"} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T22:34:50.270

我想不出您拥有的输入字符串的方法，但是如果您可以将其更改为

```
str = "a=2&b=3.05&c='testing'" 
```

（注意单引号），您可以对每个值使用**eval**函数，让 ruby​​ 猜测类型。

# jquery - jquery cookie，每次访问时设置cookie的值？

> ID：13733589
> 
> 赞同：1
> 
> 时间：2012-12-05T22:25:01.407
> 
> 标签：jquery, jquery-cookie

我希望显示 3 个不同的 div 第一次访问时显示 1 个 div 第二次访问时显示第二个 div 第三次访问时显示第三个 div

我以为我有代码可以实现这一点，但它不起作用，我无法弄清楚我做错了什么。

```
$(document).ready(function() { 

    var cookieRCCS = $.cookie('shownDialog');

    console.log(cookieRCCS);

     // Check if the cookie exists.
    if ( cookieRCCS === null ) {
        console.log("1st if statement " + cookieRCCS);
        $("#hellopanel1").show();

        // set the cookie to value 1
        $.cookie('shownDialog', '1', {expires: 7});

    } 
    else if ( cookieRCCS === 1 ) {
        console.log("2nd if statement " + cookieRCCS);      
        $("#hellopanel2").show();

        // If the cookie exists, take the value
        cookie_value = $.cookie('shownDialog');

        // Convert the value to an int to make sure
        cookie_value = parseInt(cookie_value);

        // Add 1 to the cookie_value
        cookie_value++;

         // Save the incremented value to the cookie
        $.cookie('shownDialog', cookie_value, {expires: 7});

    }
    else if ( cookieRCCS === 2){
        console.log("3rd if statement " + cookieRCCS);

        $("#hellopanel3").show();

        cookie_value = $.cookie('shownDialog');

        cookie_value = parseInt(cookie_value);

        cookie_value++;

        $.cookie('shownDialog', cookie_value, {expires: 7});
    }

    else{
        console.log("4th Time Here");
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:33:08.490

这将通过一个简单而优雅的 case 语句以级联方式正确触发代码片段来解决您的问题：

```
$(document).ready(function() { 
    var cookieRCCS = (+$.cookie('shownDialog')) + 1;
    $.cookie('shownDialog', cookieRCCS,{expires: 7});

    console.log(cookieRCCS);

    switch (cookieRCCS) {
        case 1:
            console.log("1st if statement " + cookieRCCS);
            $("#hellopanel1").show();
            break;

        case 2:
            console.log("2nd if statement " + cookieRCCS);      
            $("#hellopanel2").show();
            break;

        case 3:
            console.log("3rd if statement " + cookieRCCS);
            $("#hellopanel3").show();
            break;

        default:
            console.log("4th+ Time Here");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:32:25.727

因为您正在向 cookie 写入字符串，但使用 === 检查类型。只需将您的 if 比较更改为 == 或`var cookieRCCS = +$.cookie('shownDialog');`将其转换为数字（这意味着您必须检查 cookieRCCS == 0 而不是 null

# c - sigsuspend() 不对信号做出反应

> ID：13733593
> 
> 赞同：5
> 
> 时间：2012-12-05T22:25:12.263
> 
> 标签：c, signals, posix, fork, suspend

我的目标是使主进程及其“分叉”子进程相互通信。通信是通过信号传递来完成的。

当第一个孩子在等待 SIGUSR1 信号时卡住等待时，就会出现我的问题。

我真的不知道为什么它会卡在这一点上。甚至如果我通过控制台发送信号，那个子进程似乎没有注意。

有人可以帮助我吗？

* * *

代码来了

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>

int N = 5;
int _pipe[2];
pid_t children[5];

void main(){
    pid_t parent_pid;
    pid_t pid;
    int i = 0;

    sigset_t set;
    sigfillset(&set);

    parent_pid = getpid();
    fprintf(stderr,"I am main process, here comes my pid %u\n",getpid());

    if (0>pipe(_pipe)) fprintf(stderr,"Error when creating pipe");

    //Start creating child processes
    while (i < N){
            pid = fork();
            if (pid == 0){
                close(_pipe[1]);
            break;
        }
        else{
            fprintf(stderr,"Created child with pid %u\n",pid);
            children[i] = pid;
            write(_pipe[1],&pid,sizeof(pid_t));
        }
        i = i+1;
    }

    i = 0;

    // What main process does
    if (pid>0){
        close(_pipe[0]);
        close(_pipe[1]);

        sigdelset(&set,SIGUSR2);

        sigdelset(&set,SIGTERM);
        sigdelset(&set,SIGKILL);

        // Main process sends signal to each child
        while(i < N){           
            kill(children[i],SIGUSR1);
            fprintf(stderr,"Sent SIGUSR1 to child %u\n",children[i]);
            // .. Now just wait for SIGUSR2 arrival
            sigsuspend(&set);

            i = i+1;
        }
    }
    // What children do
    else{
        // Wait for main process SIGUSR1 delivery
        sigdelset(&set,SIGUSR1);
        sigsuspend(&set);

        fprintf(stderr, "SIGUSR1 arrived child %u from its father",getpid());

        // Once SIGUSR1 has arrived, pipe is read N times
        while((i < N) && (read(_pipe[0],&pid,sizeof(pid_t))>0)){
            children[i] = pid;
            i = i+1;
        }
        close(_pipe[0]);

        // After reading pipe, a reply is sent to parent process
        kill(parent_pid,SIGUSR2);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:40:56.720

问题很可能与这样一个事实有关，即父进程在分叉后立即将信号发送给子进程，而子进程没有阻塞信号。因此，当您调用`sigsuspend()`子进程时，信号已经传递给子进程，现在它只是坐在那里等待一个永远不会到来的信号。`sleep()`您可以通过在主进程开始发送信号之前调用一两秒钟来快速测试这个理论。请记住，由于您的代码现在是结构化的，`sigsuspend()`如果没有您正在等待的信号的信号处理程序，将无法正常工作......所以我建议在使用这样的信号时执行以下操作：

1.  在父进程中，阻止您计划用于父进程和子进程之间通信的所有信号。您需要为此打电话`sigprocmask()`。
2.  让父进程分叉子进程
3.  在子进程中，只需`sigwait()`使用包含用于通信的阻塞信号的信号集进行调用......你不需要`sigsuspend()`在这里做的事情。
4.  在父进程向子进程发送信号后，它也可以调用`sigwait()`等待子进程回复。

以下是您的代码示例：http: [//ideone.com/TRcqga](http://ideone.com/TRcqga)

# magento - 从 4gb ram 到 8gb 会增加本地主机上的 magento 速度吗？

> ID：13733597
> 
> 赞同：1
> 
> 时间：2012-12-05T22:25:18.427
> 
> 标签：magento, ram

我将我的电脑从 2.1gh 和 2gb 内存升级到双核 2.6gh 处理器和 4GB 内存，magento 运行速度更快，但我仍然不满意（打开页面需要 4-6 秒）。

我的内存使用量总共约为 40%。

升级到 8GB RAM 会在本地加速我的 magento 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:55:07.867

我会说，就其本身而言，不。事实上，您在 MySQL 和 PHP 之间使用 Magento 共享本地计算机上的资源本身就很慢。你会获得更多的吞吐量吗？可能，但不足以引起注意。

通过安装 Varnish 并在安装更多 RAM 后启用 Magento 整页缓存，您将获得更多的性能提升。Magento 缓存将自身存储在 RAM 中，Varnish 也是如此。还要确保您安装了 APC 缓存。这三个与更多 RAM 相结合将使世界变得与众不同。

对于 Varnish .. 在 VCL 设置中给它大约 1GB 的 RAM .. 听起来很多，但它会挽救你的生命。

对于 APC，在 APC 设置中至少给它 256MB 的空间……如果你负担得起的话，你可能应该做 512MB。

我还将包括我的 PHP.INI`magento optimized`设置以及我的 MySQL 设置：

```
PHP.INI
 max_execution_time = 18000
 max_input_time = 60
 memory_limit = 1024M
 max_input_vars = 10000
 post_max_size = 102M
 upload_max_filesize =100 M
 max_file_uploads = 20
 default_socket_timeout = 60
 pdo_mysql.cache_size = 2000
 mysql.cache_size = 2000
 mysqli.cache_size = 2000
 apc.enabled = 1
 apc.shm_segments = 1
 apc.shm_size = 1024M
 apc.num_files_hint = 10000
 apc.user_entries_hint = 10000
 apc.ttl = 0
 apc.user_ttl = 0
 apc.gc_ttl = 3600
 apc.cache_by_default = 1
 apc.filters = "apc\.php$"
 apc.mmap_file_mask = "/tmp/apc.XXXXXX"
 apc.slam_defense = 0
 apc.file_update_protection = 2
 apc.enable_cli = 0
 apc.max_file_size = 10M
 apc.use_request_time = 1
 apc.stat = 1
 apc.write_lock = 1
 apc.report_autofilter = 0
 apc.include_once_override = 0
 apc.localcache = 0
 apc.localcache.size = 256M
 apc.coredump_unmap = 0
 apc.stat_ctime = 0
 apc.canonicalize = 1
 apc.lazy_functions = 1
 apc.lazy_classes = 1 
```

和 MySQL

```
MY.CNF
key_buffer              = 256M
max_allowed_packet      = 16M
thread_stack            = 192K
thread_cache_size       = 32
myisam-recover         = BACKUP
max_connections        = 2500
query_cache_limit       = 2M
query_cache_size        = 64M
expire_logs_days        = 10
max_binlog_size         = 100M

[mysqldump]
quick
quote-names
max_allowed_packet      = 16M

[isamchk]
key_buffer              = 16M 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:01:45.800

如果您现在的内存使用率为 40%，那么不会。足够的 RAM 确实会有所作为，但在这种情况下，额外的 4 不会有太大的不同。

Magento 非常慢，因为它的复杂性和它使用数千个文件的事实。

要提高 Magento 的加载速度，请尝试在管理部分禁用您不需要的内容，也许可以通过 Google 获取其他提示。此外，不同浏览器的加载速度*也会*有所不同。

# image - jpg 图像文件大小与图像大小的关系是否存在模式或比例？

> ID：13733599
> 
> 赞同：0
> 
> 时间：2012-12-05T22:25:26.040
> 
> 标签：image, performance, image-resizing, dimensions, filesize

我正在尝试优化从 S3 加载大量图像并且也需要在移动设备上运行的页面。

图像有 S、M、L、XL 分辨率，因此在智能手机上，我通常将尺寸 M 用于网格缩略图图像。这些图片测量：`194x230px`并且通常“称重” `20k`，我认为这太过分了。

**问：**
如果我使用 Irfan 和 RIOT 插件，我可以轻松地从文件大小中减少 10k，而图像看起来还不错。我想知道是否有关于与图像尺寸相关的最佳图像文件大小的任何准则，或者这纯粹是一个试错过程？作为一个附带问题，是否有任何服务器端工具也使用 RIOT 插件？

谢谢！

# c++ - Visual Studio 2010 C++ /w Google 协议缓冲区。找不到 60 个外部对象。无法编译

> ID：13733604
> 
> 赞同：5
> 
> 时间：2012-12-05T22:25:35.950
> 
> 标签：c++

我尽我所能遵循了指示。下载的 GPBuffers 5.0rc1 将 src/google 文件夹放入我的项目目录。添加了设置 > C/C++ > “其他包含目录”的路径。

但我认为我需要在某处放置一个 -lprotobuf 编译器选项。我尝试在“设置”>“xxx”>“附加命令行参数”中将其添加到 C/C++ 和链接器中。

但没有运气。

似乎缺少 libprotobuf.lib、libprotobuf-lite.lib 和 libprotoc.lib。也许它没有正确构建..

我的 serverThread.cpp 看起来像：

```
#include "serverThread.h"
#include "sendStruct.h"

#include <fstream>
#include <string>
#include "messages.pb.h" 
```

日志转载如下。

它似乎缺少对某些库的引用。因为大多数依赖项都在那里。

```
Error   62  error LNK1120: 60 unresolved externals  C:\work\freetimeC+\ServerUpdater\Debug\ServerUpdater.exe
Error   37  error LNK2001: unresolved external symbol "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const google::protobuf::internal::kEmptyString" (?kEmptyString@internal@protobuf@google@@3V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@B)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   34  error LNK2001: unresolved external symbol "private: virtual void __thiscall google::protobuf::Message::SetCachedSize(int)const " (?SetCachedSize@Message@protobuf@google@@EBEXH@Z)  C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   27  error LNK2001: unresolved external symbol "public: virtual bool __thiscall google::protobuf::Message::IsInitialized(void)const " (?IsInitialized@Message@protobuf@google@@UBE_NXZ)  C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   28  error LNK2001: unresolved external symbol "public: virtual bool __thiscall google::protobuf::Message::MergePartialFromCodedStream(class google::protobuf::io::CodedInputStream *)" (?MergePartialFromCodedStream@Message@protobuf@google@@UAE_NPAVCodedInputStream@io@23@@Z)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   21  error LNK2001: unresolved external symbol "public: virtual class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall google::protobuf::Message::GetTypeName(void)const " (?GetTypeName@Message@protobuf@google@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   22  error LNK2001: unresolved external symbol "public: virtual class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall google::protobuf::Message::InitializationErrorString(void)const " (?InitializationErrorString@Message@protobuf@google@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   35  error LNK2001: unresolved external symbol "public: virtual class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall google::protobuf::MessageLite::InitializationErrorString(void)const " (?InitializationErrorString@MessageLite@protobuf@google@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   29  error LNK2001: unresolved external symbol "public: virtual int __thiscall google::protobuf::Message::ByteSize(void)const " (?ByteSize@Message@protobuf@google@@UBEHXZ)  C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   25  error LNK2001: unresolved external symbol "public: virtual int __thiscall google::protobuf::Message::SpaceUsed(void)const " (?SpaceUsed@Message@protobuf@google@@UBEHXZ)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   31  error LNK2001: unresolved external symbol "public: virtual unsigned char * __thiscall google::protobuf::MessageLite::SerializeWithCachedSizesToArray(unsigned char *)const " (?SerializeWithCachedSizesToArray@MessageLite@protobuf@google@@UBEPAEPAE@Z)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   23  error LNK2001: unresolved external symbol "public: virtual void __thiscall google::protobuf::Message::CheckTypeAndMergeFrom(class google::protobuf::MessageLite const &)" (?CheckTypeAndMergeFrom@Message@protobuf@google@@UAEXABVMessageLite@23@@Z)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   26  error LNK2001: unresolved external symbol "public: virtual void __thiscall google::protobuf::Message::Clear(void)" (?Clear@Message@protobuf@google@@UAEXXZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   32  error LNK2001: unresolved external symbol "public: virtual void __thiscall google::protobuf::Message::CopyFrom(class google::protobuf::Message const &)" (?CopyFrom@Message@protobuf@google@@UAEXABV123@@Z) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   24  error LNK2001: unresolved external symbol "public: virtual void __thiscall google::protobuf::Message::DiscardUnknownFields(void)" (?DiscardUnknownFields@Message@protobuf@google@@UAEXXZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   33  error LNK2001: unresolved external symbol "public: virtual void __thiscall google::protobuf::Message::MergeFrom(class google::protobuf::Message const &)" (?MergeFrom@Message@protobuf@google@@UAEXABV123@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   30  error LNK2001: unresolved external symbol "public: virtual void __thiscall google::protobuf::Message::SerializeWithCachedSizes(class google::protobuf::io::CodedOutputStream *)const " (?SerializeWithCachedSizes@Message@protobuf@google@@UBEXPAVCodedOutputStream@io@23@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   43  error LNK2019: unresolved external symbol "private: bool __thiscall google::protobuf::io::CodedInputStream::ReadVarint32Fallback(unsigned int *)" (?ReadVarint32Fallback@CodedInputStream@io@protobuf@google@@AAE_NPAI@Z) referenced in function "public: bool __thiscall google::protobuf::io::CodedInputStream::ReadVarint32(unsigned int *)" (?ReadVarint32@CodedInputStream@io@protobuf@google@@QAE_NPAI@Z) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   53  error LNK2019: unresolved external symbol "private: static int __cdecl google::protobuf::io::CodedOutputStream::VarintSize32Fallback(unsigned int)" (?VarintSize32Fallback@CodedOutputStream@io@protobuf@google@@CAHI@Z) referenced in function "public: static int __cdecl google::protobuf::io::CodedOutputStream::VarintSize32(unsigned int)" (?VarintSize32@CodedOutputStream@io@protobuf@google@@SAHI@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   49  error LNK2019: unresolved external symbol "private: static unsigned char * __cdecl google::protobuf::io::CodedOutputStream::WriteVarint32FallbackToArray(unsigned int,unsigned char *)" (?WriteVarint32FallbackToArray@CodedOutputStream@io@protobuf@google@@CAPAEIPAE@Z) referenced in function "public: static unsigned char * __cdecl google::protobuf::io::CodedOutputStream::WriteTagToArray(unsigned int,unsigned char *)" (?WriteTagToArray@CodedOutputStream@io@protobuf@google@@SAPAEIPAE@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   44  error LNK2019: unresolved external symbol "private: static void __cdecl google::protobuf::internal::WireFormat::VerifyUTF8StringFallback(char const *,int,enum google::protobuf::internal::WireFormat::Operation)" (?VerifyUTF8StringFallback@WireFormat@internal@protobuf@google@@CAXPBDHW4Operation@1234@@Z) referenced in function "public: static void __cdecl google::protobuf::internal::WireFormat::VerifyUTF8String(char const *,int,enum google::protobuf::internal::WireFormat::Operation)" (?VerifyUTF8String@WireFormat@internal@protobuf@google@@SAXPBDHW4Operation@1234@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   42  error LNK2019: unresolved external symbol "private: unsigned int __thiscall google::protobuf::io::CodedInputStream::ReadTagFallback(void)" (?ReadTagFallback@CodedInputStream@io@protobuf@google@@AAEIXZ) referenced in function "public: unsigned int __thiscall google::protobuf::io::CodedInputStream::ReadTag(void)" (?ReadTag@CodedInputStream@io@protobuf@google@@QAEIXZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   38  error LNK2019: unresolved external symbol "private: void __thiscall google::protobuf::UnknownFieldSet::ClearFallback(void)" (?ClearFallback@UnknownFieldSet@protobuf@google@@AAEXXZ) referenced in function "public: void __thiscall google::protobuf::UnknownFieldSet::Clear(void)" (?Clear@UnknownFieldSet@protobuf@google@@QAEXXZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   61  error LNK2019: unresolved external symbol "protected: void __thiscall google::protobuf::internal::RepeatedPtrFieldBase::Reserve(int)" (?Reserve@RepeatedPtrFieldBase@internal@protobuf@google@@IAEXH@Z) referenced in function "protected: class ArchProtocol::Person_PhoneNumber * __thiscall google::protobuf::internal::RepeatedPtrFieldBase::Add<class google::protobuf::RepeatedPtrField<class ArchProtocol::Person_PhoneNumber>::TypeHandler>(void)" (??$Add@VTypeHandler@?$RepeatedPtrField@VPerson_PhoneNumber@ArchProtocol@@@protobuf@google@@@RepeatedPtrFieldBase@internal@protobuf@google@@IAEPAVPerson_PhoneNumber@ArchProtocol@@XZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   58  error LNK2019: unresolved external symbol "protected: void __thiscall google::protobuf::internal::RepeatedPtrFieldBase::Swap(class google::protobuf::internal::RepeatedPtrFieldBase *)" (?Swap@RepeatedPtrFieldBase@internal@protobuf@google@@IAEXPAV1234@@Z) referenced in function "public: void __thiscall google::protobuf::RepeatedPtrField<class ArchProtocol::Person_PhoneNumber>::Swap(class google::protobuf::RepeatedPtrField<class ArchProtocol::Person_PhoneNumber> *)" (?Swap@?$RepeatedPtrField@VPerson_PhoneNumber@ArchProtocol@@@protobuf@google@@QAEXPAV123@@Z)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   2   error LNK2019: unresolved external symbol "public: __thiscall google::protobuf::internal::GeneratedMessageReflection::GeneratedMessageReflection(class google::protobuf::Descriptor const *,class google::protobuf::Message const *,int const * const,int,int,int,class google::protobuf::DescriptorPool const *,class google::protobuf::MessageFactory *,int)" (??0GeneratedMessageReflection@internal@protobuf@google@@QAE@PBVDescriptor@23@PBVMessage@23@QBHHHHPBVDescriptorPool@23@PAVMessageFactory@23@H@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   4   error LNK2019: unresolved external symbol "public: __thiscall google::protobuf::internal::LogMessage::~LogMessage(void)" (??1LogMessage@internal@protobuf@google@@QAE@XZ) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   7   error LNK2019: unresolved external symbol "public: __thiscall google::protobuf::internal::LogMessage::LogMessage(enum google::protobuf::LogLevel,char const *,int)" (??0LogMessage@internal@protobuf@google@@QAE@W4LogLevel@23@PBDH@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   18  error LNK2019: unresolved external symbol "public: __thiscall google::protobuf::UnknownFieldSet::~UnknownFieldSet(void)" (??1UnknownFieldSet@protobuf@google@@QAE@XZ) referenced in function __unwindfunclet$??0Person_PhoneNumber@ArchProtocol@@QAE@XZ$0   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   20  error LNK2019: unresolved external symbol "public: __thiscall google::protobuf::UnknownFieldSet::UnknownFieldSet(void)" (??0UnknownFieldSet@protobuf@google@@QAE@XZ) referenced in function "public: __thiscall ArchProtocol::Person_PhoneNumber::Person_PhoneNumber(void)" (??0Person_PhoneNumber@ArchProtocol@@QAE@XZ)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   8   error LNK2019: unresolved external symbol "public: class google::protobuf::FileDescriptor const * __thiscall google::protobuf::DescriptorPool::FindFileByName(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)const " (?FindFileByName@DescriptorPool@protobuf@google@@QBEPBVFileDescriptor@23@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   6   error LNK2019: unresolved external symbol "public: class google::protobuf::internal::LogMessage & __thiscall google::protobuf::internal::LogMessage::operator<<(char const *)" (??6LogMessage@internal@protobuf@google@@QAEAAV0123@PBD@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   60  error LNK2019: unresolved external symbol "public: int __thiscall google::protobuf::io::CodedInputStream::PushLimit(int)" (?PushLimit@CodedInputStream@io@protobuf@google@@QAEHH@Z) referenced in function "public: static bool __cdecl google::protobuf::internal::WireFormatLite::ReadMessageNoVirtual<class ArchProtocol::Person_PhoneNumber>(class google::protobuf::io::CodedInputStream*,class ArchProtocol::Person_PhoneNumber *)" (??$ReadMessageNoVirtual@VPerson_PhoneNumber@ArchProtocol@@@WireFormatLite@internal@protobuf@google@@SA_NPAVCodedInputStream@io@23@PAVPerson_PhoneNumber@ArchProtocol@@@Z)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   39  error LNK2019: unresolved external symbol "public: static bool __cdecl google::protobuf::internal::WireFormat::SkipField(class google::protobuf::io::CodedInputStream *,unsigned int,class google::protobuf::UnknownFieldSet *)" (?SkipField@WireFormat@internal@protobuf@google@@SA_NPAVCodedInputStream@io@34@IPAVUnknownFieldSet@34@@Z) referenced in function "public: virtual bool __thiscall ArchProtocol::Person_PhoneNumber::MergePartialFromCodedStream(class google::protobuf::io::CodedInputStream *)" (?MergePartialFromCodedStream@Person_PhoneNumber@ArchProtocol@@UAE_NPAVCodedInputStream@io@protobuf@google@@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   41  error LNK2019: unresolved external symbol "public: static bool __cdecl google::protobuf::internal::WireFormatLite::ReadString(class google::protobuf::io::CodedInputStream *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > *)" (?ReadString@WireFormatLite@internal@protobuf@google@@SA_NPAVCodedInputStream@io@34@PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: virtual bool __thiscall ArchProtocol::Person_PhoneNumber::MergePartialFromCodedStream(class google::protobuf::io::CodedInputStream *)" (?MergePartialFromCodedStream@Person_PhoneNumber@ArchProtocol@@UAE_NPAVCodedInputStream@io@protobuf@google@@@Z) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   9   error LNK2019: unresolved external symbol "public: static class google::protobuf::DescriptorPool const * __cdecl google::protobuf::DescriptorPool::generated_pool(void)" (?generated_pool@DescriptorPool@protobuf@google@@SAPBV123@XZ) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   3   error LNK2019: unresolved external symbol "public: static class google::protobuf::MessageFactory * __cdecl google::protobuf::MessageFactory::generated_factory(void)" (?generated_factory@MessageFactory@protobuf@google@@SAPAV123@XZ) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   52  error LNK2019: unresolved external symbol "public: static int __cdecl google::protobuf::internal::WireFormat::ComputeUnknownFieldsSize(class google::protobuf::UnknownFieldSet const &)" (?ComputeUnknownFieldsSize@WireFormat@internal@protobuf@google@@SAHABVUnknownFieldSet@34@@Z) referenced in function "public: virtual int __thiscall ArchProtocol::Person_PhoneNumber::ByteSize(void)const " (?ByteSize@Person_PhoneNumber@ArchProtocol@@UBEHXZ)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   48  error LNK2019: unresolved external symbol "public: static unsigned char * __cdecl google::protobuf::internal::WireFormat::SerializeUnknownFieldsToArray(class google::protobuf::UnknownFieldSet const &,unsigned char *)" (?SerializeUnknownFieldsToArray@WireFormat@internal@protobuf@google@@SAPAEABVUnknownFieldSet@34@PAE@Z) referenced in function "public: virtual unsigned char * __thiscall ArchProtocol::Person_PhoneNumber::SerializeWithCachedSizesToArray(unsigned char *)const " (?SerializeWithCachedSizesToArray@Person_PhoneNumber@ArchProtocol@@UBEPAEPAE@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   51  error LNK2019: unresolved external symbol "public: static unsigned char * __cdecl google::protobuf::io::CodedOutputStream::WriteRawToArray(void const *,int,unsigned char *)" (?WriteRawToArray@CodedOutputStream@io@protobuf@google@@SAPAEPBXHPAE@Z) referenced in function "public: static unsigned char * __cdecl google::protobuf::io::CodedOutputStream::WriteStringToArray(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,unsigned char *)" (?WriteStringToArray@CodedOutputStream@io@protobuf@google@@SAPAEABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PAE@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   50  error LNK2019: unresolved external symbol "public: static unsigned char * __cdecl google::protobuf::io::CodedOutputStream::WriteVarint64ToArray(unsigned __int64,unsigned char *)" (?WriteVarint64ToArray@CodedOutputStream@io@protobuf@google@@SAPAE_KPAE@Z) referenced in function "public: static unsigned char * __cdecl google::protobuf::io::CodedOutputStream::WriteVarint32SignExtendedToArray(int,unsigned char *)" (?WriteVarint32SignExtendedToArray@CodedOutputStream@io@protobuf@google@@SAPAEHPAE@Z)  C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   16  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::DescriptorPool::InternalAddGeneratedFile(void const *,int)" (?InternalAddGeneratedFile@DescriptorPool@protobuf@google@@SAXPBXH@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AddDesc_messages_2eproto(void)" (?protobuf_AddDesc_messages_2eproto@ArchProtocol@@YAXXZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   54  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::internal::ReflectionOps::Merge(class google::protobuf::Message const &,class google::protobuf::Message *)" (?Merge@ReflectionOps@internal@protobuf@google@@SAXABVMessage@34@PAV534@@Z) referenced in function "public: virtual void __thiscall ArchProtocol::Person_PhoneNumber::MergeFrom(class google::protobuf::Message const &)" (?MergeFrom@Person_PhoneNumber@ArchProtocol@@UAEXABVMessage@protobuf@google@@@Z)  C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   45  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::internal::WireFormat::SerializeUnknownFields(class google::protobuf::UnknownFieldSet const &,class google::protobuf::io::CodedOutputStream *)" (?SerializeUnknownFields@WireFormat@internal@protobuf@google@@SAXABVUnknownFieldSet@34@PAVCodedOutputStream@io@34@@Z) referenced in function "public:virtual void __thiscall ArchProtocol::Person_PhoneNumber::SerializeWithCachedSizes(class google::protobuf::io::CodedOutputStream *)const " (?SerializeWithCachedSizes@Person_PhoneNumber@ArchProtocol@@UBEXPAVCodedOutputStream@io@protobuf@google@@@Z)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   46  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::internal::WireFormatLite::WriteEnum(int,int,class google::protobuf::io::CodedOutputStream *)" (?WriteEnum@WireFormatLite@internal@protobuf@google@@SAXHHPAVCodedOutputStream@io@34@@Z) referenced in function "public: virtual void __thiscall ArchProtocol::Person_PhoneNumber::SerializeWithCachedSizes(class google::protobuf::io::CodedOutputStream *)const " (?SerializeWithCachedSizes@Person_PhoneNumber@ArchProtocol@@UBEXPAVCodedOutputStream@io@protobuf@google@@@Z) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   57  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::internal::WireFormatLite::WriteInt32(int,int,class google::protobuf::io::CodedOutputStream *)" (?WriteInt32@WireFormatLite@internal@protobuf@google@@SAXHHPAVCodedOutputStream@io@34@@Z) referenced in function "public: virtual void __thiscall ArchProtocol::Person::SerializeWithCachedSizes(class google::protobuf::io::CodedOutputStream *)const " (?SerializeWithCachedSizes@Person@ArchProtocol@@UBEXPAVCodedOutputStream@io@protobuf@google@@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   56  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(int,class google::protobuf::MessageLite const &,class google::protobuf::io::CodedOutputStream *)" (?WriteMessageMaybeToArray@WireFormatLite@internal@protobuf@google@@SAXHABVMessageLite@34@PAVCodedOutputStream@io@34@@Z) referenced in function"public: virtual void __thiscall ArchProtocol::Person::SerializeWithCachedSizes(class google::protobuf::io::CodedOutputStream *)const " (?SerializeWithCachedSizes@Person@ArchProtocol@@UBEXPAVCodedOutputStream@io@protobuf@google@@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   47  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::internal::WireFormatLite::WriteString(int,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class google::protobuf::io::CodedOutputStream *)" (?WriteString@WireFormatLite@internal@protobuf@google@@SAXHABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PAVCodedOutputStream@io@34@@Z) referenced in function "public: virtual void __thiscall ArchProtocol::Person_PhoneNumber::SerializeWithCachedSizes(class google::protobuf::io::CodedOutputStream *)const " (?SerializeWithCachedSizes@Person_PhoneNumber@ArchProtocol@@UBEXPAVCodedOutputStream@io@protobuf@google@@@Z)  C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   15  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::MessageFactory::InternalRegisterGeneratedFile(char const *,void (__cdecl*)(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &))" (?InternalRegisterGeneratedFile@MessageFactory@protobuf@google@@SAXPBDP6AXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AddDesc_messages_2eproto(void)" (?protobuf_AddDesc_messages_2eproto@ArchProtocol@@YAXXZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   10  error LNK2019: unresolved external symbol "public: static void __cdecl google::protobuf::MessageFactory::InternalRegisterGeneratedMessage(class google::protobuf::Descriptor const *,class google::protobuf::Message const *)" (?InternalRegisterGeneratedMessage@MessageFactory@protobuf@google@@SAXPBVDescriptor@23@PBVMessage@23@@Z) referenced in function "void __cdecl ArchProtocol::`anonymous namespace'::protobuf_RegisterTypes(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?protobuf_RegisterTypes@?A0x2751caee@ArchProtocol@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   13  error LNK2019: unresolved external symbol "public: virtual __thiscall google::protobuf::Closure::~Closure(void)" (??1Closure@protobuf@google@@UAE@XZ) referenced in function "public: virtual void * __thiscall google::protobuf::Closure::`scalar deleting destructor'(unsigned int)" (??_GClosure@protobuf@google@@UAEPAXI@Z) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   11  error LNK2019: unresolved external symbol "public: virtual __thiscall google::protobuf::internal::FunctionClosure0::~FunctionClosure0(void)" (??1FunctionClosure0@internal@protobuf@google@@UAE@XZ) referenced in function "void __cdecl google::protobuf::GoogleOnceInit(int *,void (__cdecl*)(void))" (?GoogleOnceInit@protobuf@google@@YAXPAHP6AXXZ@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   19  error LNK2019: unresolved external symbol "public: virtual __thiscall google::protobuf::Message::~Message(void)" (??1Message@protobuf@google@@UAE@XZ) referenced in function __unwindfunclet$??0Person_PhoneNumber@ArchProtocol@@QAE@XZ$0   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   36  error LNK2019: unresolved external symbol "public: virtual __thiscall google::protobuf::MessageLite::~MessageLite(void)" (??1MessageLite@protobuf@google@@UAE@XZ) referenced in function "public: virtual void * __thiscall google::protobuf::MessageLite::`scalar deleting destructor'(unsigned int)" (??_GMessageLite@protobuf@google@@UAEPAXI@Z) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   5   error LNK2019: unresolved external symbol "public: void __thiscall google::protobuf::internal::LogFinisher::operator=(class google::protobuf::internal::LogMessage &)" (??4LogFinisher@internal@protobuf@google@@QAEXAAVLogMessage@123@@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AssignDesc_messages_2eproto(void)" (?protobuf_AssignDesc_messages_2eproto@ArchProtocol@@YAXXZ)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   59  error LNK2019: unresolved external symbol "public: void __thiscall google::protobuf::io::CodedInputStream::PopLimit(int)" (?PopLimit@CodedInputStream@io@protobuf@google@@QAEXH@Z) referenced in function "public: static bool __cdecl google::protobuf::internal::WireFormatLite::ReadMessageNoVirtual<class ArchProtocol::Person_PhoneNumber>(class google::protobuf::io::CodedInputStream *,class ArchProtocol::Person_PhoneNumber *)" (??$ReadMessageNoVirtual@VPerson_PhoneNumber@ArchProtocol@@@WireFormatLite@internal@protobuf@google@@SA_NPAVCodedInputStream@io@23@PAVPerson_PhoneNumber@ArchProtocol@@@Z)    C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   40  error LNK2019: unresolved external symbol "public: void __thiscall google::protobuf::UnknownFieldSet::AddVarint(int,unsigned __int64)" (?AddVarint@UnknownFieldSet@protobuf@google@@QAEXH_K@Z) referenced in function "public: virtual bool __thiscall ArchProtocol::Person_PhoneNumber::MergePartialFromCodedStream(class google::protobuf::io::CodedInputStream *)" (?MergePartialFromCodedStream@Person_PhoneNumber@ArchProtocol@@UAE_NPAVCodedInputStream@io@protobuf@google@@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   55  error LNK2019: unresolved external symbol "public: void __thiscall google::protobuf::UnknownFieldSet::MergeFrom(class google::protobuf::UnknownFieldSet const &)" (?MergeFrom@UnknownFieldSet@protobuf@google@@QAEXABV123@@Z) referenced in function "public: void __thiscall ArchProtocol::Person_PhoneNumber::MergeFrom(class ArchProtocol::Person_PhoneNumber const &)" (?MergeFrom@Person_PhoneNumber@ArchProtocol@@QAEXABV12@@Z)   C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   12  error LNK2019: unresolved external symbol "void __cdecl google::protobuf::GoogleOnceInitImpl(int *,class google::protobuf::Closure *)" (?GoogleOnceInitImpl@protobuf@google@@YAXPAHPAVClosure@12@@Z) referenced in function "void __cdecl google::protobuf::GoogleOnceInit(int *,void (__cdecl*)(void))" (?GoogleOnceInit@protobuf@google@@YAXPAHP6AXXZ@Z)  C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   14  error LNK2019: unresolved external symbol "void __cdecl google::protobuf::internal::OnShutdown(void (__cdecl*)(void))" (?OnShutdown@internal@protobuf@google@@YAXP6AXXZ@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AddDesc_messages_2eproto(void)" (?protobuf_AddDesc_messages_2eproto@ArchProtocol@@YAXXZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj
Error   17  error LNK2019: unresolved external symbol "void __cdecl google::protobuf::internal::VerifyVersion(int,int,char const *)" (?VerifyVersion@internal@protobuf@google@@YAXHHPBD@Z) referenced in function "void __cdecl ArchProtocol::protobuf_AddDesc_messages_2eproto(void)" (?protobuf_AddDesc_messages_2eproto@ArchProtocol@@YAXXZ) C:\work\freetimeC+\ServerUpdater\ServerUpdater\messages.pb.obj 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T23:20:27.693

需要正确编译 Protobuf。有一个 vsprojects 文件夹。只需构建 libprotobuf 并添加 libprotobuf.lib 作为对项目的引用，方法是：

属性 > 链接器 > 输入：附加依赖项 > 编辑...

如果您将其复制到您的项目文件夹/google 中，请放入 google/libprotobuf.lib

现在一切都应该顺利编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T16:18:51.677

如果您将 protobufs 构建为 DLL，那么您还需要`PROTOBUF_USE_DLLS`在客户端应用程序中进行定义，以使其正确提取 DLL 导入`__declspec`内容。

有关详细信息，请参阅[https://code.google.com/p/protobuf/issues/detail?id=308#c9](https://code.google.com/p/protobuf/issues/detail?id=308#c9)。

# html - Facebook 代表另一个网站分享

> ID：13733610
> 
> 赞同：0
> 
> 时间：2012-12-05T22:25:54.590
> 
> 标签：html, facebook, facebook-like, share, facebook-opengraph

我正在尝试在我的网站上设置一个可以代表 YouTube 共享的共享按钮。假设页面是[http://www.mysite.com/test.html](http://www.mysite.com/test.html)。

**测试.html**

```
<!DOCTYPE html>
<html>
    <head>
        <meta property="og:url" content="http://www.youtube.com">
        <meta property="og:description" content="My custom YouTube share">
        <meta property="og:title" content="YouTube Share">
        <meta property="og:image" content="http://www.mysite.com/preview.png">
    </head>
<body>

    <a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.mysite.com%2Ftest.html">Share</a

</body>
<html> 
```

但是当我单击共享时，它完全忽略了我的元属性。我怎样才能让 Facebook 查看我声明的所有元属性？还是无法代表其他网站共享？

编辑：这是我正在尝试做的示例屏幕截图：

![在此处输入图像描述](../Images/e6486d0f1a3f8de36ce161ad2bcf67aa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:17:06.627

要在另一个站点的内容共享上获取自定义文本，您可以使用您站点上的 URL 作为 og:url，为 facebook 的爬虫提供带有您想要的标题、描述等的元标记，但将其他浏览器重定向到 YouTube

（即在您的网站上共享一个指向 URL 的链接，然后在该 URL 上具有显示的逻辑

如果用户代理 == Facebook 的爬虫提供元标记，否则 HTTP 301 重定向到 youtube

# python - gevent 的子进程因 OSError 22 (EINVAL) 而失败？

> ID：13733616
> 
> 赞同：0
> 
> 时间：2012-12-05T22:26:43.633
> 
> 标签：python, gevent

将我的开发笔记本电脑升级到 Mountain Lion 后，我注意到`gevent.subprocess.Popen`失败了……有时。

我有一个功能：

```
from gevent.subprocess import check_output
def do_stuff():
    result = check_output(["file", "foo.py"], stderr=STDOUT) 
```

它在下面的回溯中失败了：

```
回溯（最近一次通话最后）：
  ...
  文件“myfile.py”，第 105 行，在 do_stuff 中
    结果 = check_output(["file", "foo.py"], stderr=STDOUT)
  文件“.../gevent/subprocess.py”，第 154 行，在 check_output
    进程 = Popen(stdout=PIPE, *popenargs, **kwargs)
  __init__ 中的文件“.../gevent/subprocess.py”，第 231 行
    读错，写错）
  _execute_child 中的文件“.../gevent/subprocess.py”，第 714 行
    数据 = errpipe_read.read(1048576)
  文件“...ython2.7/socket.py”，第 380 行，正在读取
    数据 = self._sock.recv（左）
  文件“.../gevent/fileobject.py”，第 114 行，在 recv
    数据 = os.read(self.fileno(), 大小)
OSError：[Errno 22] 参数无效

```

但是，我尝试重新创建错误：

```
from gevent import monkey; monkey.patch_all()

import os
import gevent
from gevent.subprocess import check_output, STDOUT

def stuff(x):
    f = x and "/dev/asdf" or "/dev/null"
    print check_output(["file", f], stderr=STDOUT).strip()

while True:
    pid = gevent.fork()
    if pid == 0:
        gevent.joinall([
            gevent.spawn(stuff, x % 2)
            for x in range(10)
        ])
    else:
        os.waitpid(-1, 0)
    gevent.sleep(1) 
```

失败了。上述程序运行没有问题。

这是怎么回事？或者，至少，关于我如何开始调试它的任何指针？

版本：gevent 1.0b3、Python 2.7.2、OS X 10.8.2、libev 4.11（来自自制软件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T02:18:36.857

查看[1.0RC1 更改日志](https://github.com/SiteSupport/gevent/blob/master/changelog.rst)，这似乎是一个已修复的已知问题。升级到 1.0RC1 确实可以解决这个问题。

# facebook - 可以通过 API 访问 OrderedFriendsListInitialData

> ID：13733621
> 
> 赞同：0
> 
> 时间：2012-12-05T22:27:07.020
> 
> 标签：facebook, web-scraping

嗨，我是一名网络开发人员，一位客户问我是否可以构建一个应用程序来显示**OrderedFriendsListInitialData**中包含的信息。当您查看 Facebook 新闻提要上的源代码时，可以找到此信息。

Facebook 服务条款对不抓取 Facebook 页面非常明确，因此我需要通过 API 访问数据。这个想法是允许用户通过 Facebook 应用程序以方便的方式查看此列表。

**此外**，如果这是不可能的，那么 Facebook 是否会例外地抓取这个单一元素，其唯一目的是向用户展示它。

即不显示给其他人，只抓取数据直接显示给用户，而不将其保存到任何数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:28:44.167

没有 API 可用于返回按系数排序的好友列表 - 如果您的应用需要根据用户与好友的关系来组织好友，一种流行的方法是检查用户的照片标签和/或新闻提要和喜欢选择与用户关系最密切的朋友

# asp.net - KnockoutJs 将 JSON 映射到视图模型

> ID：13733623
> 
> 赞同：0
> 
> 时间：2012-12-05T22:27:21.647
> 
> 标签：asp.net, knockout.js

我在将 JSON 从 ASP.net webform webapi 绑定到使用 KnockoutJs 的视图模型时遇到问题。wepapi 和映射到 mappedQuickEntries 没有问题。

我哪里弄错了？谢谢。

错误：

> 错误：无法解析绑定。消息：ReferenceError：ItemPartNumb 未定义；绑定值：值：ItemPartNumb

看法：

```
<div>    
<table border="1" cellpadding="0" cellspacing="0">
 <tbody data-bind="foreach: quickEntries">
   <tr>
        <td data-bind="value: ItemPartNumb"></td>
        <td data-bind="value: ItemDescription"></td>     
    </tr>
 </tbody>
</table> 
```

视图模型：

```
<script type="text/javascript">

var QuickEntry = function(_itemPartNumb, _itemDescription) {    
    this.ItemPartNumber = ko.observable(_itemPartNumb);
    this.ItemDescription = ko.observable(_itemDescription);        
};

function QuickEntriesViewModel () {        

    var self = this;
    self.quickEntries = ko.observableArray([]);

    $.ajax({
        url: '/DesktopModules/Blah/API/Data/GetTenQuickEntries',
        type: 'GET',
        dataType: 'json',
        success: function (data) {                
            var mappedQuickEntries = $.map(data, function (item) {
                return new QuickEntry(item.ItemPartNumb, item.ItemDescription);
            });

            self.quickEntries(mappedQuickEntries);              
        },
        statusCode: {
            404: function () {
                alert('Failed');
            }
        }
    });
};

ko.applyBindings(new QuickEntriesViewModel()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:48:17.887

`ItemPartNumb`对比`ItemPartNumber`

而且您使用的是`value`-binding 而不是`text`-binding。

[http://jsfiddle.net/MizardX/9sqvk/](http://jsfiddle.net/MizardX/9sqvk/)

# vb.net - 继承选项严格

> ID：13733630
> 
> 赞同：0
> 
> 时间：2012-12-05T22:27:47.187
> 
> 标签：vb.net, inheritance

我有一个对象（myObject）类型的对象。myObject 继承了另一个包含函数 (ImyFunction) 的类。我想调用该函数，但我的项目需要在“Option Strict On”中。所以它要求声明对象。

```
Public MustInherit Class IClass(Of T1)
...
    Public Sub IMyFunction()
    ...

Public Class myClass1 : Inherits IClass(Of Item1)
...
Public Class myClass2 : Inherits IClass(Of Item2)

dim obj as object = new myClass1
...
obj.IMyFunction 'at this moment, I dont know whish class base of IClass I have 
```

（它只是一个样本）

由于严格的选项，我不能做 obj.IMyFunction。也许有一个演员的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:19:36.027

`MustInherit`关键字并不意味着你不能将它用作变量类型，它只是意味着你不能实例化它。例如：

```
Dim obj As IClass(Of Item1) = New myClass1()  ' This works
Dim obj2 As IClass(Of Item1) = New IClass(Of Item1)()  ' This will not compile 
```

但是，由于它是通用的，因此您必须指定 的类型`T1`，因此无法做我认为您真正想做的事情：

```
Dim obj As IClass = New myClass1()  ' Can't do this
obj.iMyFunction() 
```

在这种情况下，我建议创建一个非泛型基类或接口，如下所示：

```
Public Interface IInterface
    Sub IMyFunction()
End Interface

Public MustInherit Class IClass(Of T1)
    Implements IInterface
End Class 
```

然后，您可以执行以下操作：

```
Dim obj As IInterface = New myClass1()
obj.IMyFunction() 
```

# c# - 将通用类型传递给方法

> ID：13733645
> 
> 赞同：0
> 
> 时间：2012-12-05T22:28:59.620
> 
> 标签：c#, generics

这可能吗？

当一个类型被传递给一个方法时，我想实例化泛型类 myClass

```
public class myClass<T>
{

}

public void PassInType(Type myType)
{

myClass<myType> c=new myClass<myType>();
} 
```

更新：

好的，因为那不可能，我该怎么做

```
public myMethod(string myType)
{

myClass<myType> c=new myClass<myType>();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:30:51.377

不; 这基本上是不可能的。

泛型的全部意义在于它们创建了*编译时*类型。
您正在尝试创建一个在编译时未知的类型。

不过，您可以使用反射来做到这一点。( `typeof(MyClass<>).MakeGenericType(myType)`)

# python - 定义二进制文件字符串的类型

> ID：13733652
> 
> 赞同：2
> 
> 时间：2012-12-05T22:29:27.407
> 
> 标签：python, string, binary, binaryfiles, file-type

是否可以检查代表字符串二进制文件的数据类型？

例如：我们从图像文件（fe example.jpg）中读取二进制数据。我们能猜到这个二进制数据代表图像文件吗？如果是，我们该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:35:54.533

您可以查看[python-magic](https://github.com/ahupp/python-magic)库。它似乎做你想做的事（尽管我自己从未使用过它）。

# xml - 读取 xml 并将属性分配给 vb.net 中的变量

> ID：13733654
> 
> 赞同：0
> 
> 时间：2012-12-05T22:29:31.853
> 
> 标签：xml, vb.net-2010

我有一个xml文件

```
<config>
   <email Host="201.175.0.0" From="address@gmail.com" Pass="xxx" Name="NameT"/>
   <combo/>
   <list sex="female"/>
</config> 
```

如何将属性的值分配给 vb.net 中的变量？

我在做

```
Dim doc As XmlDocument = New XmlDocument()
doc.Load("Test.xml")
Dim Host = doc.DocumentElement.Attributes.ItemOf("Host").InnerText
Dim From = doc.DocumentElement.Attributes.ItemOf("From").InnerText
Dim Pass = doc.DocumentElement.Attributes.ItemOf("Pass").InnerText
Dim Name = doc.DocumentElement.Attributes.ItemOf("Name").InnerText 
```

这是正确的，什么是更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:57:54.693

试试这个，而不是：

```
Dim doc As XmlDocument = New XmlDocument()
doc.Load("Test.xml")
Dim root As XmlNode = doc.DocumentElement
Dim nodeEmail As XmlNode = root.SelectSingleNode("/config/email")
Dim Host As String = nodeEmail.Attributes.ItemOf("Host").InnerText
Dim From As String = nodeEmail.Attributes.ItemOf("From").InnerText
Dim Pass As String = nodeEmail.Attributes.ItemOf("Pass").InnerText
Dim Name As String = nodeEmail.Attributes.ItemOf("Name").InnerText 
```

您可能还想考虑使用关联数组（VB 中的字典）来存储这些属性，而不是使用一堆变量。

在这种情况下，它看起来像这样：

```
Dim doc As XmlDocument = New XmlDocument()
doc.Load("Test.xml")
Dim root As XmlNode = doc.DocumentElement
Dim nodeEmail As XmlNode = root.SelectSingleNode("/config/email")
Dim dictionary As New Dictionary(Of String, String)
dictionary.Add("Host", nodeEmail.Attributes.ItemOf("Host").InnerText)
dictionary.Add("From", nodeEmail.Attributes.ItemOf("From").InnerText)
dictionary.Add("Pass", nodeEmail.Attributes.ItemOf("Pass").InnerText)
dictionary.Add("name", nodeEmail.Attributes.ItemOf("Name").InnerText) 
```

# php - ZF2 中的生产、开发、登台配置？

> ID：13733657
> 
> 赞同：4
> 
> 时间：2012-12-05T22:29:37.737
> 
> 标签：php, zend-framework2

我已经阅读了几个关于这个主题的教程，但仍然没有完全理解想要让 ZF2 应用程序环境感知的开发人员所期望的内容：

[http://blog.evan.pro/environment-specific-configuration-in-zend-framework-2](http://blog.evan.pro/environment-specific-configuration-in-zend-framework-2)
[http://www.spiffyjr.me/2012/06/17/how-does-configuration-work-in-zf2 /comment-page-1/](http://www.spiffyjr.me/2012/06/17/how-does-configuration-work-in-zf2/comment-page-1/)

ZF2 在设计上不了解环境概念 - 留给开发人员来实现。我不完全清楚它应该如何完成......

通读 Evan 的帖子，似乎有 2 种机制——首选的一种是**不使用 APPLICATION_ENV 常量**，只使用 .local、.global 文件？

那应该如何工作？有人可以描述他们为使 ZF2 环境感知而采取的过程吗？当代码被推送到不同的环境时你会做什么？

* * *

似乎现在的想法是针对 ex：**module1.local.php.dist-testing**，**module1.local.php.dist-production**，**module1.local.php.dist-development**以及何时将代码移动到不同的环境想法是这些应该为该环境复制重命名并手动填写密码？我对么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T22:36:26.793

这个想法是您为您的应用程序提供一些合理的默认配置，但您不会在代码中为具体环境存储任何内容，也不会在版本控制系统中存储任何内容。

例如，如果您有两台服务器，一台用于生产，一台用于开发，则您只需在此类 .local 文件中提供一个环境的配置详细信息。这样，您的开发服务器就无法知道例如生产数据库的主密码。因此，您不会意外地获得一个新的开发服务器，而有人忘记设置 APPLICATION_ENV，然后您开始开发并弄乱您的生产数据库，因为应用程序知道密码。

或者反过来说，新的生产服务器不会意外访问开发数据库。

因此，您的应用程序通过读取存在的文件自动了解环境 - 每个存在的环境只有一个文件包含所有详细信息。

这给管理员或配置所有内容的 puppet 脚本提供了确保正确文件的负担。但是环境特定的配置不会部署在应用程序中。

# jquery - 当用户在菜单区域之外单击时，如何使用 jquery 隐藏下拉菜单？

> ID：13733658
> 
> 赞同：0
> 
> 时间：2012-12-05T22:29:47.587
> 
> 标签：jquery, css, slidetoggle

我希望用户能够单击“单击此处”并在显示/隐藏下拉菜单之间切换。这工作正常。我还希望用户能够在下拉区域之外单击并隐藏当前显示的下拉菜单。我该怎么做呢？

jQuery：

```
function dropDown() {
    $(document).ready(function(){
        $('#myID').load('my_file.php',function(){
            document.getElementById("myID").style.visibility="visible";
            $('#myID').slideToggle('fast');
        })
        return false;
    });
} 
```

HTML：

```
<div onclick="dropDown()">Click Here</div>
<div id="myID"></div> 
```

CSS：

```
#myID {
visibility:hidden;
z-index:9999;
display:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:42:05.020

从代码中删除`visibility:hidden`属性

`div`为 the和 the附加点击处理程序`document`

```
$('.dropdown').on('click', function(e) {
    e.stopPropagation();
    $('#myID').slideToggle('fast');
});

$(document).on('click', function(e) {
    if( $(e.target).hasClass('dropdown') || $(e.target).attr('id') === 'myID'){

    }
    else{
      $('#myID').hide();     
    }
});
​ 
```

**CSS**

```
#myID {
    z-index:9999;
    display:none;
    width:200px;
    height:300px;
    background-color: orange;
}​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/xC7fq/)**

如果你想`visibility:hidden`在你的代码中使用，那么你需要省略`display:none`，反之亦然......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T22:43:32.427

对于里面的点击，因为你已经在使用 jQuery，你应该有 HTML：

`<div id="myDropdown">Click Here</div>`

使用 jQuery：

```
$('#myDropdown').click( function(e){
        $('#myID').load('my_file.php',function(){
            $('#myID').show('fast');
            e.stopPropagation();
        })
        return false;
  }); 
```

然后让它在点击时卷起，而不是在 上`myDropdown`，你的 jQuery 应该是：

```
$(":not(#myDropdown)").click(function(){
      $('#myID').hide('fast');
}); 
```

看到一个工作小提琴：http: [//jsfiddle.net/sablefoste/2YuLy/](http://jsfiddle.net/sablefoste/2YuLy/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T22:44:01.647

```
function dropDown() {
        $('#myID').load('my_file.php',function(){
            document.getElementById("myID").style.visibility="visible";
            $('#myID').slideToggle('fast');
        });

        $(':not(#myId)').bind('click', toggleDropdown);

        return false;

}

var toggleDropdown = function() {
      $('#myID').slideToggle('fast');
      $(':not(#myId)').unbind('click', toggleDropdown);
}; 
```

# jquery - 将 div 水平滑出屏幕

> ID：13733659
> 
> 赞同：-1
> 
> 时间：2012-12-05T22:29:51.680
> 
> 标签：jquery, html, css

[http://ballsohard.co.uk/bshmfwfm/stack.html#](http://ballsohard.co.uk/bshmfwfm/stack.html#)

请点击以上网址。我有一个菜单，它有 2 个不同的显示选项。单击“类别”将显示第二个菜单显示。我正在尝试创建一个过渡，如果单击其中一个选项，菜单将向右滑动，新菜单将从左侧滑入。

我已经查看了各种 jQuery 方法并使用了一些 jsfiddle 示例，但我无法掌握它。

我需要一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:47:33.170

这个网站有很棒的滑动元素教程：

[http://www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T12:57:34.047

我只是设法在*不*使用 JQuery 的情况下做同样的事情......

```
function hMove(element, endPos, duration) {
    // element = DOM element to move
    // endPos = element.style.left value for the element in its final position
    // duration = time in ms for the animation

//    var leftPos = element.style.left.replace(/px/,"");  // Get the current position of the element
    var leftPos = window.getComputedStyle(element,null).getPropertyValue("left").replace(/px/,"");
    var animStep = (leftPos - endPos) / (duration / 10);  // Calculate the animation step size
    var direction = ( leftPos > endPos ) ? "left" : "right";  // Are we moving left or right?

    function doAnim() {  // Main animation function

        leftPos = leftPos - animStep;  // Decrement/increment the left position value

        element.style.left = leftPos + "px";  // Apply the new left position value to the element

        // Are we done yet?
        if ((direction == "left" && leftPos <= endPos) || (direction == "right" && leftPos >= endPos)) {
            clearInterval(animLoop);  // Stop the looping
            element.style.left = endPos + "px";  // Correct for any fractional differences
        }
    } // and of main animation function

    var animLoop = setInterval(doAnim, 10); // repeat the doAnim function every 10ms to animate
} 
```

此解决方案的完整工作演示（带有隐藏/显示的额外切换功能）在这里：http: [//jsfiddle.net/47MNX/16/](http://jsfiddle.net/47MNX/16/)

它只使用直接的 JavaScript，并且应该非常灵活和适应性强。

-调频

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:34:33.753

将导航元素设置为位置：相对容器内的绝对位置，并使用[.animate()](http://api.jquery.com/animate/)更改“左”或“右”属性以将它们移出屏幕。

# c# - 使用 dot.exe 进程在 Windows 窗体应用程序中绘制图形 - 可能出现内存不足错误

> ID：13733662
> 
> 赞同：1
> 
> 时间：2012-12-05T22:29:56.530
> 
> 标签：c#, winforms, graph, graphviz, dot

我调用了我在绘制图形所需的数据上编写的绘图函数。
绘图函数的工作方式如下：首先它创建一个文本文件。它基本上是一个 .dot 文件，这意味着 Graphviz / dot.exe 知道如何处理它。生成的文件如下所示：

```
graph{
resolution=1000;
1[
label ="" 
pos = "552,552!"
width = 0.002
height = 0.002
fixedsize=true
fontsize = 8
color =red
penwidth = 0.1, color = black, shape = box, width = 0.07, height = 0.07, label = ""
]
74[
label ="" 
pos = "450,552!"
width = 0.002
height = 0.002
fixedsize=true
fontsize = 8
color =red
shape = point
]
(...)
1 -- 74[penwidth = 0.099, color="red"]
74 -- 40[penwidth = 0.099, color="red"]
40 -- 32[penwidth = 0.099, color="red"]
32 -- 18[penwidth = 0.099, color="red"]
(...)
} 
```

生成文件后，该函数使用以下标志调用 dot.exe 进程：

```
ProcessStartInfo startInfo = new ProcessStartInfo("dot.exe");
startInfo.Arguments = "-Kneato -Goverlap=prism -Tpng " + fileName + ".txt -o " + fileName + ".png"; 
```

我尝试过使用不同的标志、图像格式等，但这些都不能解决我的问题。

我的应用程序基本上由一个带有几个按钮和两个 PictureBox 的界面组成。单击其中一个按钮会导致“程序的重要部分”执行。
“重要部分”需要一些时间来执行，所以我为此使用了 BackgroundWorker。那里发生的事情（在 backgroundWorker1_DoWork 函数中）是：
有些事情被计算出来，我的绘图函数在结果数据上被调用了两次。它创建两个图像并将它们“放入”PictureBoxes。

它适用于大多数数据，但对于某些数据则不然。在某些数据上，PictureBoxes 中没有显示任何图片。当我检查应该创建文本文件和图像的文件夹时，我看到只有文本文件和应该进入第一个 PictureBox 的结果图片被创建......但甚至没有显示。我的结论是某些东西使整个 BackgroundWorker 进程停止，可能是 dot.exe 进程中的某种错误。
现在，每次调用该过程时，都会出现一个控制台一秒钟。那里可能会显示一些有用的数据，但我不知道如何阅读。

我的应用程序有一个先前版本且略有不同，它不适用于当前版本无法处理的相同数据。
然而，在旧版本中，我能够读取控制台输出（可能是因为整个程序崩溃了），它说的内容大致如下：

```
Graph is too large for cairo renderer bitmaps.   
Scaling by 0.4 to fit dot: failure to create cairo surface: out of memory. 
```

我得到这个错误*主要是*针对较大的图表，但*不仅是*针对较大的图表。一些较大的图表可以正常工作，而一些较小的图表则不行。无论如何，它们都不是特别大：最大的节点大约有 80 个。我认为它可能与分辨率或类似的东西有关，但是无论我更改什么参数，它仍然无法正常工作。

有人知道我应该尝试什么吗？您需要有关我的问题的任何额外信息吗？

编辑：此外，使用 -G 属性更改大小也无济于事。事实上，无论我做什么，我总是得到*完全相同的*错误，这意味着错误中提到的比例因子不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:36:54.117

事实证明我的问题不是 Graphviz 甚至是特定于图形的问题——我在网上找到的测试示例上测试了我的（元启发式）算法。在逐行读取最优解文件并将其拆分为单词时，`""`有时会被识别为单词。

# ssh - ssh 无密码登录到 localhost

> ID：13733667
> 
> 赞同：2
> 
> 时间：2012-12-05T22:30:19.377
> 
> 标签：ssh, osx-mountain-lion

我正在尝试为分布式计算教程设置无密码登录到我的本地主机。（我已经为多个远程主机成功设置了它。）我完成了生成 rsa 密钥并将公钥附加到的正常步骤，`authorized_keys`但仍然提示我输入密码。我还启用了`RSAAuthentication`和`PubKeyAuthentication`在`/etc/ssh_config`. 按照我看到的其他建议，我尝试了：

```
chmod go-w ~/
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys 
```

但问题仍然存在。

这是 ssh -v localhost 的输出：

```
(tutorial)bnels21-2:tutorial bnels21$ ssh -v localhost
OpenSSH_5.9p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: /etc/ssh_config line 20: Applying options for *
debug1: Connecting to localhost [::1] port 22.
debug1: Connection established.
debug1: identity file /Users/bnels21/.ssh/id_rsa type 1
debug1: identity file /Users/bnels21/.ssh/id_rsa-cert type -1
debug1: identity file /Users/bnels21/.ssh/id_dsa type -1
debug1: identity file /Users/bnels21/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9
debug1: match: OpenSSH_5.9 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 1c:31:0e:56:93:45:dc:f0:77:6c:bd:90:27:3b:c6:43
debug1: Host 'localhost' is known and matches the RSA host key.
debug1: Found key in /Users/bnels21/.ssh/known_hosts:11
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,keyboard-interactive
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/bnels21/.ssh/id_rsa
debug1: Authentications that can continue: publickey,keyboard-interactive
debug1: Offering RSA public key: id_rsa3
debug1: Authentications that can continue: publickey,keyboard-interactive
debug1: Trying private key: /Users/bnels21/.ssh/id_dsa
debug1: Next authentication method: keyboard-interactive
Password: 
```

有什么建议么？我正在运行 OSX 10.8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:56:25.590

由于您似乎有多个键，我会将特定键分配给`~/.ssh/config`.

例子：

```
Host local
    HostName 127.0.0.1
    Port 22
    User your_username
    IdentityFile ~/.ssh/your_key-id_rsa 
```

然后尝试`ssh local`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T20:56:30.880

我有同样的问题。我检查了系统密码和组文件，发现我的用户和组不存在。要构建这些文件（我的用户是域用户），我需要在 cygwin shell 上运行两个命令：

```
mkpasswd -l -d > /etc/passwd

mkgroup -l -d > /etc/group 
```

之后，ssh 工作正常！

埃尔维斯·博尔赫斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:07:19.350

看起来您在连接到 时使用的是协议版本 2.0 `localhost`，因此请尝试`authorized_keys`移至`authorized_keys2`.

资料来源：[这篇文章](https://serverfault.com/questions/116177/whats-the-difference-between-authorized-keys-and-authorized-keys2)解释了两个密钥文件之间的区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-20T04:17:05.440

我束手无策......我错误地认为`ssh-copy-id`它是一个仅限 Linux 的实用程序。最后我忍住了我的骄傲，输入了命令是 macOS 终端，它成功了！

```
ssh-copy-id me@sshd-server 
```

我不知道魔法是做什么`ssh-copy-id`的，但它确实有效。我可以使用简单的命令在没有密码的情况下成功登录：

```
ssh me@sshd-server 
```

我的运气为零`cat id_rsa.pub >> ~/.ssh/authorized_hosts`。每次我尝试通过 ssh 连接到服务器时，它都会不断询问我的密码。这是正确的 600 权限`authorized_hosts`和 700权限`~/.ssh`。

# php - 纯php反向代理的可能性？

> ID：13733671
> 
> 赞同：1
> 
> 时间：2012-12-05T22:30:44.623
> 
> 标签：php, proxy, reverse

让我在这里再解释一下——我正在使用BOX1，我想访问BOX2，但是我想使用一个域来访问它（example.com），所以我的域指向box1，现在我如何获取示例。 com 从 box2 获取内容而不实际重定向到 box2 的 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:49:32.033

我们对“反向代理”的定义似乎有所不同。我倾向于将其等同于负载平衡和缓存，而您只是想要基于 GeoIP 查找发出 301/302 重定向的东西。

```
<?php
$servers = array(
    'CA' => array('1.1.1.1', '2.2.2.2'),
    'US' => array('3.3.3.3', '4.4.4.4')
);

$cc = geoip_country_code_by_name( $_SERVER['REMOTE_ADDR'] );

if( in_array($cc, $servers) ) {
    $server = $servers[$cc][rand(0,count($servers[$cc]))];
} else {
    $server = '5.5.5.5';
}

header('Location: ' . $server);
exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T16:15:52.610

你可以用 PHP 编写一个非常简单的反向代理。您基本上只需获取请求参数并使用 curl 或 file_get_contents 传递它们。例如：

```
<?php
  $external_url = 'http://www.anotherserver.com' . $_SERVER['REQUEST_URI'] . $_REQUEST['QUERY_STRING'];
  print file_get_contents($external_url);
?> 
```

查看[这篇文章](http://fuzzytolerance.info/blog/a-quick-and-dirty-reverse-proxy-with-php/)了解更多详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:12:06.547

感谢这篇文章，我想通了：http: [//techzinger.blogspot.ca/2007/07/writing-reverse-proxy-in-php5.html](http://techzinger.blogspot.ca/2007/07/writing-reverse-proxy-in-php5.html)

# android - 片段中的 listView.setOnItemClickListener - Android - onItemClick

> ID：13733678
> 
> 赞同：0
> 
> 时间：2012-12-05T22:31:00.890
> 
> 标签：android, listview

我正在尝试让 ListItems 上的 onItemClick 从片段中工作。它抱怨删除@Override 方法..这是我在片段类中的代码扩展了我的其他片段

```
ListView listView = (ListView) getView().findViewById(R.id.listView);
adapter = new ArrayAdapter<NewsItem>    
(getActivity(),android.R.layout.simple_list_item_1,newsItemsList);
setListAdapter(adapter);
listView.setOnItemClickListener(new OnItemClickListener() {
@Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Intent myIntent = new Intent(view.getContext(), NewsSummaryActivity.class);
    startActivity(myIntent);
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:36:07.167

您正在使用 JRE 1.5 编译器设置，这样使用`@Override`是错误的。您尝试复制的代码示例使用 JRE 1.6，在该版本中*不*使用`@Override`.

任何一个

*   删除，`@Override`因为您不能在 1.5*或此处使用它*
*   使用以下命令更改编译器版本：

    **项目**->**属性**-> **Java 编译器**-> *Java 合规级别*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:35:55.130

只需删除`@Override`. `@Override`当您使用接口方法时，某些编译器级别（我认为低于 1.6）会抱怨。以任何方式删除它都不会影响功能。

更详细的解释：[什么时候使用 Java 的 @Override 注释，为什么？](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T11:21:50.853

只是去简单的方式......

在您的适配器类... getView 方法之间... 放 View v = convertView; 并在其上设置监听器。

`enter code here`v.setOnClickListener(new View.OnClickListener() {

```
 @Override
        public void onClick(View v) {
            Toast.makeText(context, "Name : "+ list.get(position).getS_name(), Toast.LENGTH_SHORT).show();
        }
    });` 
```

'我希望这能帮到您.....'

# c# - 限制文本框中每行的最大字符数

> ID：13733679
> 
> 赞同：0
> 
> 时间：2012-12-05T22:31:01.003
> 
> 标签：c#, .net, wpf

说我有以下内容：

```
<TextBox TextWrapping="Wrap" 
         AcceptsReturn="True" 
         AcceptsTab="True" 
         MaxLines="3000"/> 
```

有没有办法可以将每行的最大字符数限制为 60？

我已经看到了通过 keydown 事件来做到这一点的方法，但这似乎并不是万无一失的（即粘贴长文本块怎么样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:39:03.697

选择单间距字体。并计算包含 60 个字符的文本框的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:28:49.680

鉴于您正在响应 keydown 事件，我假设您要确保后面的字符串`TextBox`遵守“每行 60 个字符”规则。如果是这种情况，您应该`TextChanged`在`TextBox`. 在那里，您可以修复文本并截断或分隔太长的行。

（编辑）要解决显示部分，您可以按照 Kafuka 的建议进行操作：只需使框宽到足以容纳 60 个字符，如果您想确定，请使用等宽字体。如果您确定字符串是正确的，这应该很容易符合要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:22:03.877

我真的不认为您可以在包装时执行此操作，因为包装会更改当前行以适应`TextBox`. 即使在使用**记事本**时，您也永远无法在启用自动**换行时查看****状态栏**，因为在换行时很难获取当前行索引及其长度。

 **当`TextWrapping`属性设置为`NoWrap`. 您首先需要获取当前行索引的长度。然后，如果它是 59 或更多，则处理输入。

**例子**

```
<TextBox Name="textBox1"
         TextWrapping="NoWrap" 
         AcceptsReturn="True" 
         AcceptsTab="True" 
         MaxLines="3000"
         KeyDown="textBox1_KeyDown"/> 
```

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    //Initialize a new int of name CurrentLine to get the current line the user is on
    int CurrentLine = textBox1.GetLineIndexFromCharacterIndex(textBox1.Text.Length);

    //Continue if the length of the current line is more or equal to 59
    if (textBox1.GetLineLength(CurrentLine) >= 59) 
    {
        //Don't insert the character
        e.Handled = true; 
    }
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-21T13:14:07.980

我知道这是一个非常晚的答案，但是这样发现这个问题的人可以获得一个很好的答案，并可以防止例如 Ctrl+C 和其他东西：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    foreach (string line in textBox1.Lines)
    {
        if (line.Length > 60)
        {
            textBox1.Undo();
        }
    }

    textBox1.ClearUndo();
} 
```

请注意，这确实意味着您不能再在文本框中使用 Ctrl+Z，但如果这不打扰您，这是一个不错的选择，因为它适用于任何字体。

**编辑**这不适用于 wpf 文本框，只有 windows 窗体文本框

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-13T19:38:58.853

我今天看了几个解决方案。他们要么根本不工作，要么如果他们工作，他们就没有按照我认为应该的方式工作。光标位置异常或换行不正确。这是我的“解决方案”，我希望它对未来的人有所帮助。它包装，不展开，并保留任何现有的新行。我将此示例设置为 60 个字符宽，并在此示例之外设置一个 bool isBusyUpdating 以防止它在更新进行时再次触发。

```
 txtNotes.HorizontalContentAlignment = HorizontalAlignment.Left;
        txtNotes.VerticalContentAlignment = VerticalAlignment.Top;
        txtNotes.TextWrapping = TextWrapping.NoWrap;
        txtNotes.AcceptsReturn = true;
        txtNotes.TextChanged += delegate (object o, TextChangedEventArgs args)
        {
            //args.Handled = true;
            TextBox thisText = (TextBox)args.Source;
             if (!isBusyUpdating)
            {
                isBusyUpdating = true;
                string updatedText = "";
                bool blnUpdate = false;
                int curPos = thisText.CaretIndex;

                foreach (string thisLine in thisText.Text.Split('\n'))
                {

                    if (thisLine.Length > 60)
                    {
                        blnUpdate = true;
                        updatedText = updatedText + 
                            thisLine.Substring(0, 60)
                            .Replace("\n", "") +
                                      "\n" + thisLine.Substring(60);
                        curPos++;
                    }
                    else
                    {
                        updatedText = updatedText + thisLine + "\n";
                    }
                }

                if (blnUpdate)
                {
                    thisText.Text = updatedText;
                    thisText.CaretIndex = curPos-1;
                }
                isBusyUpdating = false;

            }

        }; 
```**

# mysql - MySQL Union：并排的结果列

> ID：13733683
> 
> 赞同：0
> 
> 时间：2012-12-05T22:31:28.383
> 
> 标签：mysql, sql, union

我有 2 个由 UNION 组合的 SELECT 语句。我不想将所有结果按顺序从一行堆叠到下一行，而是希望将第二个 SELECT 语句的结果/列添加到第一个 SELECT 语句的结果/列的旁边：

以下是两个查询，但简单的反馈可能就足够了。

查询 1

```
 select    
      LEFT(A.F_ANOTRIMESTRE, 4) Year_Max,

      RIGHT(A.F_ANOTRIMESTRE, 2) Quarter_Max,

      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=03,'Enero a Marzo',
      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=06,'Abril a Junio',
      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=09,'Julio a Septiembre',
      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=12,'Octubre a Diciembre',
      '')
      ))) Quarter_Name,

      ROUND(A.POR_RENTABILIDAD, 2) Quarterly_yield_Max

from      dr_rent_carteras_trimestres A
where     A.ID_CARTERA = @ID_CARTERA
And       A.IND_RENTABILIDAD = 1
And       LEFT(A.F_ANOTRIMESTRE, 4) = ( select    MAX(left(F_ANOTRIMESTRE, 4)) - 0
                              from      dr_rent_carteras_trimestres
                              where     ID_CARTERA = @ID_CARTERA ) 
```

查询 2

```
select    
      LEFT(A.F_ANOTRIMESTRE, 4) Year_Max_Less_One,

      RIGHT(A.F_ANOTRIMESTRE, 2) Quarter_Max_Less_One,

      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=03,'Enero a Marzo',
      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=06,'Abril a Junio',
      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=09,'Julio a Septiembre',
      IF(RIGHT(A.F_ANOTRIMESTRE, 2)=12,'Octubre a Diciembre',
      '')
      ))) Quarter_Name,

      ROUND(A.POR_RENTABILIDAD, 2) Quarterly_yield_Max_Less_One

from      dr_rent_carteras_trimestres A
where     A.ID_CARTERA = @ID_CARTERA
And       A.IND_RENTABILIDAD = 1
And       LEFT(A.F_ANOTRIMESTRE, 4) = ( select    MAX(left(F_ANOTRIMESTRE, 4)) - 1
                              from      dr_rent_carteras_trimestres
                              where     ID_CARTERA = @ID_CARTERA ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:51:19.340

您可以将结果放在临时表中，添加序列列，然后按 id 列左/右连接表。

对此没有纯 sql 方式。在 mysql 中，你也可以这样做：

```
select tab1.a,tab1.b,tab1.c,tab2.a,tab2.b,tab2.c from 
 (SELECT @rowno:=@rowno+1 as id,a,b,c from tab1 where something) as tab1 left join
 (SELECT @rowno:=@rowno+1 as id,a,b,c from tab2 where something) as tab2 on tab2.id=tab1.id 
```

但前提是您知道 tab1 有更多行。当然你可以先计算，但这将是复杂的查询。

我不确定是否加入您的查询，可能基于年份？你比较清楚。

# android - 将陀螺仪读数转换为度数

> ID：13733687
> 
> 赞同：3
> 
> 时间：2012-12-05T22:31:52.470
> 
> 标签：android, rotation, gyroscope, dead-reckoning, inertial-navigation

我正在尝试使用 Android 设备上的陀螺仪在汽车转弯时找到汽车的旋转角度。因此，想象一辆汽车以 168 角的方位行驶并在道路上右转。现在我需要使用陀螺仪计算新的航向或方位角。但是我收到的值是以弧度/秒为单位的。我尝试在时间段 dT 内整合这些值。但这些值甚至不接近实际角度。我认为旋转是参考设备，我试图将值转换为真实的世界坐标。但我没有得到一个好的算法。

有人可以帮助我或指出正确的资源来解决这个问题吗？

编辑：我忘了在问题中提到，我试图在没有 GPS 的情况下这样做，（在 GPS 失败的情况下。）我试图避免传感器融合，因为我打算只使用陀螺仪，因为我正在寻找一个甚至可以在 Android 平台之外运行的解决方案。我什至正在与 OBD 交谈以获取车辆的实际速度。所以我只是想从任何客户端收集陀螺仪数据并在后端处理它并确定车辆的转向

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:48:09.900

您需要[旋转矢量](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ROTATION_VECTOR)，请参见[此处的](http://developer.android.com/reference/android/hardware/SensorEvent.html#values)描述（API 级别 9）。
这个东西正在使用一种叫做[传感器融合](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)的东西来获得关于手机相对于地球和磁北方向的高质量信息。您还可以计算 GPS 位置的导数以估计汽车转弯方向。

# linux - ls 目录中的所有文件以及下一级目录中的所有文件

> ID：13733688
> 
> 赞同：4
> 
> 时间：2012-12-05T22:31:56.047
> 
> 标签：linux, bash, command-line, ls

好的，我有以下情况。

大写是目录，小写是文件。

```
A/aa
B/bb
C/cc
D/dd
D/E/ddd
D/F/G/dddd
a
b
c
d 
```

我想做一个列出的 ls

```
a
b
c
d
A/aa
B/bb
C/cc
D/dd 
```

但也不是

```
D/E/ddd
D/F/G/dddd 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T22:38:00.317

用于仅`find`查找当前目录或下一个目录中的文件：

```
$ find . -maxdepth 2  -type f 
```

演示：

```
# Show whole directory structure, digits are files, letters are folders. 
$  find .
.
./1
./2
./3
./4
./A
./A/11
./B
./B/22
./C
./C/33
./D
./D/44
./D/E
./D/F
./D/F/444
./D/F/G
./D/F/G/4444

# Find only files at a maximum depth of 2
$  find . -maxdepth 2  -type f
./1
./2
./3
./4
./A/11
./B/22
./C/33
./D/44 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:35:50.057

这个列出了当前工作目录中目录内的所有内容：`ls -l */`

两个命令的组合也将包含当前目录中的文件：`ls -l */; ls -l`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:35:42.120

你可以用 find 来做到这一点：

```
find . -maxdepth 2 
```

# sql-server - SSIS 如何管理关闭连接？我可以强迫吗？

> ID：13733692
> 
> 赞同：5
> 
> 时间：2012-12-05T22:32:28.897
> 
> 标签：sql-server, ado.net, ssis, oledb, connection-timeout

**tl;博士版**

在运行几个晚上后使用 OLE DB (SNC10.0) 连接管理器时出现错误，连接是否无法正确超时？切换到 ADO.NET 连接管理器和源似乎可以解决它，为什么？

我为通用标题道歉，但有太多细节无法在一行中说明。

**技术：**

在所有情况下，数据库服务器，源和目标都是 SQL Server 2008 R2

**设置：**

我有一组在半夜一个接一个运行的 SSIS 包。目前有7个。它们都执行一组类似的任务：它们首先连接到源数据库并将数据复制到暂存数据库。然后他们在暂存数据库中进行各种转换。最后，该过程连接到目标数据库并用数据填充它。

我将所有连接设置为 OLE DB 连接 (SQL Native Client 10.0)，以便可以将它们与 Lookup 组件和其他特定于 OLE 的组件一起使用。

**问题：**

我们在自动运行 SSIS 包时反复遇到问题。一般来说，我会从我的站手动测试它，它会运行良好；然后我们将 SSIS 包保存到 SQL Server 并安排它，它会运行良好。几个晚上后，我们会遇到一个问题，例如：

> SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft OLE DB Provider for SQL Server”Hresult：0x80004005 描述：“TDS 流中的协议错误”。

或者

> SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0”Hresult：0x80004005 描述：“从 SQL Server 收到未知令牌”。

在线搜索时，这两个都指向连接问题，特别是*网络*连接问题。

**解决方法：**

我发现解决这些问题的一个快速（即使并非总是简单）的解决方案是用 ADO NET 源而不是 OLE DB 源替换源节点。在某些情况下，这在我的数据流任务中是可以接受的，但在我需要使用查找组件或仅适用于 OLE 源的其他此类工具的情况下，如果我仍然会遇到，这不是一个足够好的解决方案这些问题。

**问题：**

我知道 ADO.NET 和 OLE DB 连接之间存在大量差异，但我注意到的一件主要事情是 OLE DB 连接管理器有两个超时，都默认为“0”的值，这通常意味着禁用（无超时） . ADO.NET 连接管理器有一个超时，它设置为“15”（15 秒）的值。

这两个连接管理器如何处理超时和关闭连接？如果 OLE DB 连接管理器超时值为 0，除非在 SQL Server 上执行某些操作，否则该连接是否永远不会关闭？这可能是我的问题的一部分，有这么多数据流任务打开 OLE DB 连接然后没有被关闭？我可以在 SSIS 包中做些什么来强制关闭这些连接吗？

****编辑****

这是相关数据流任务的屏幕截图。我更改了一些名称以保护无辜者等。

![在此处输入图像描述](../Images/752ede0c8d929d6b83e0c7e564e07291.png)

此处所示的任务将完全正常运行，并且 100% 的时间都可以正常工作。如果我将该 ADO.NET 源更改为 OLE DB 源，则会收到帖子中提到的错误。在其他一些情况下，我通过扩展源查询经历并消除了查找。在这个任务中我没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:49:55.960

我们找出了所有问题的根源，以及问题描述与环境描述不匹配的原因，并且没有足够的线索来解决。

最后一切都崩溃了，我们发现“网络或服务器上没有任何变化”并非如此。

在我们的工作中发生了备份。该备份使用卷影副本，并且正在备份生产数据库和 tempdb。由于磁盘 IO 问题/锁定，由于未写入的更改，tempdb 已增长到半 TB，然后进一步尝试进行卷影复制。

关闭 tempdb 和生产数据库上的备份/卷影副本会导致作业立即完成。耗时 > 30 分钟的查询现在小于 1 分钟。

谢谢你们一直陪着我思考。

# php - 将 mysqli_num_rows 与 while 循环和 onclick 事件一起使用

> ID：13733695
> 
> 赞同：0
> 
> 时间：2012-12-05T22:32:52.407
> 
> 标签：php, jquery, mysql-num-rows

我想回显行数（假设行数= 3）。如果用户单击该数字（我从 while 循环中传递了 1 个参数），则会提醒数据但问题是

1.  如果我在 while 循环中回显 numrows，则所有行（相关的 3 行数据）都会在 onclick 事件中收到警报，但 numrows 会显示 3 次，如 333。
2.  如果我在 while 循环之外回显，则显示 num 行，但只有一个结果传递给函数。

我也使用了 count(col)，但是这样只检索到一个结果。

任何一次显示行数但将$uid（在while循环中）的所有结果传递给onclick函数的解决方案？请帮助。

```
 $sql=mysqli_query($this->db->connection,"SELECT * from user_data where  scid='$scid'");
            $num=mysqli_num_rows($sql);

            while($row=mysqli_fetch_array($sql)){
                $uid=$row['uid'];

                ?>

            <span onclick=o4_sameby_scid(<?php echo $uid;  ?>)><?php echo  $num  ?></span>

            <script type="text/javascript">

                function o4_sameby_scid(o4_id) {
                    alert(o4_id);
                }

            </script>

            <?php
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:11:24.593

`while`我认为您的问题是您在循环中嵌套了错误的代码部分。这种方法怎么样？：

```
<?php
$sql=mysqli_query($this->db->connection,"SELECT * from user_data where  scid='$scid'");
$num=mysqli_num_rows($sql);

$allvalues = array();

//  Do all looping before any echoing
while($row=mysqli_fetch_array($sql)){
    // add this row's value to an array of all values
    $allvalues[] = $uid=$row['uid'];
}

// implode this array
$valuesascsv = implode(', ', $allvalues);

//  This is echo'd outside of the loop, because we only need to see it one time
echo '<span onclick=o4_sameby_scid("'. $valuesascsv .'")>'. $num .' results found! </span>';
?>

<script type="text/javascript">
    function o4_sameby_scid(o4_id) {
        alert(o4_id);
    }
</script> 
```

这应该输出：

```
<span onclick=o4_sameby_scid("uid#1, uid#2, uid#3")>3 results found!</span>

<script type="text/javascript">
    function o4_sameby_scid(o4_id) {
        alert(o4_id);
    }
</script> 
```

单击任何行数应提醒所有 UID。

这是您要寻找的行为吗？

# combobox - extjs4 组合框下拉加载图像不会消失

> ID：13733711
> 
> 赞同：0
> 
> 时间：2012-12-05T22:33:37.760
> 
> 标签：combobox, extjs4

我现在有以下静态商店。当我单击下拉菜单时，一切正常，它给了我一个加载图像并且不会消失。

```
var active_store = Ext.create("Ext.data.Store",{
storeId: 'active',
model: 'Active',
 data : [
     {active: 'Y'},
     {active: 'N'}
 ],
autoLoad: true
})

{
xtype: 'container',
layout: 'hbox',
items: [
    {
        xtype: 'combobox',
        editable:false,
        id:'active',
        store: active_store, 
        triggerAction:'all',
        name: 'active',
        valueField: 'active',
        displayField:'active',
        padding: '2 6 2 7'
    }
] 
```

} ![在此处输入图像描述](../Images/c6a1ca272d9144d1e961740d1306fcf9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:37:18.073

从商店中删除`autoLoad: true`，您已经将数据提供给它

添加`queryMode: 'local'`到组合框，因为您不想发送查询数据的请求

请参阅[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox)

> 如果您的商店不是远程的，即它仅依赖于本地数据并且预先加载，您应该确保将 queryMode 设置为“本地”，因为这将提高用户的响应能力。

# javascript - 在外部 js 文件中

> ID：13733712
> 
> 赞同：3
> 
> 时间：2012-12-05T22:33:43.140
> 
> 标签：javascript, jquery, jsp, jstl

如何`<c:url value="/url">`在包含 jquery 代码的外部 js 文件中使用？

这是我的外部 js 文件的摘录：

```
$(document).ready(function() {
    $.ajax({
        type : "POST",
        url : '<c:url value="/url.htm" >',
        dataType : "application/json",
        success : function(data) {
            // do something          
        },
        error : function(data) {
            // do something else
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:36:17.703

将您的容器设置为将`*.js`文件作为`*.jsp`文件处理；你是否应该……有争议。

替代方法包括将一些信息放入 JSP 中并将其传递给在外部 JSP 文件中定义的方法，将信息放入 DOM 中的某处/以某种方式，等等。

# java - 从文件中提取字母

> ID：13733713
> 
> 赞同：0
> 
> 时间：2012-12-05T22:33:42.830
> 
> 标签：java, file

我有一个关于如何从文件中提取字母的问题。这是我阅读的文件中的示例行。

ui 帕克 8

我读了 3 个标记，应该从第一个标记中提取 2 个字母，但不知道该怎么做。代码引用了 5 个属性，这些属性是之前声明的对象的一部分，以及文件中的 3 个标记。第一个字母确定学生是本科生还是研究生，第二个字母确定学生是本州还是外州。

```
 while(fileScan.hasNext())
           {

            classStatus = fileScan.next();

            if(classStatus.charAt(0) == 'u' || classStatus.charAt(0) == 'U')
            {
                classStatus= "underGrad";
            }
            else
            {
                classStatus= "Grad";
            }

            studentName = fileScan.next();
            resident = fileScan.next();

            numberOfCredits = fileScan.nextInt();
            double tuitionBill = fileScan.nextDouble();

            StudentNode aNode = new StudentNode(classStatus,studentName,resident); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:45:28.680

所以遗漏的一个重要部分是你正在使用`java.lang.Scanner`（fileScan的类型）是吗？

好吧，因为您的文件很可能组织良好：

令牌 [空格] 令牌 [空格] 令牌

您可以将每一行作为字符串读取，然后有效地对读取的每一行的空格进行拆分。`Scanner`我们可以通过正则表达式完成这种拆分，更具体地说，使用该`useDelimiter()`方法。一个很好的参考是[this other SO question](https://stackoverflow.com/questions/2935854/parse-text-using-scanner-usedelimiter) for using `useDelimiter()`.

无论如何，要继续，您可以`fileScan.next()`将每个标记作为字符串获取。然后你使用上面的`substring`方法或`charAt`方法来挑选出必要的字符。

# c++ - 使用 C++ 解析大型文本文件并将其存储在树（二进制或 AVL）中

> ID：13733714
> 
> 赞同：1
> 
> 时间：2012-12-05T22:33:55.013
> 
> 标签：c++

我正在做一个作业，其中我有一个大文本文件（1gb）。我应该解析这个文本文件并将其存储在树中以进行某些操作。我面临的问题是完全解析整个文件所需的时间。完全解析文件大约需要 40 分钟。谁能在几分钟内告诉我如何有效地做到这一点？我的代码是

```
int main()
{
FILE * file=fopen("data.txt","r");
char line[1000];
char *token;

while(fgets(line,1000,file)!=NULL) 
{
    token=strtok(line,"     ");
    while(token!=NULL)
    {
        cout<<token<<endl;
        token=strtok(NULL,"     ");
    }
}

fclose(file);
return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:42:29.293

就个人而言，我猜想打印令牌是最大的时间消耗。试试这个，看看它是否运行得更快：

```
#include <iostream>
#include <fstream>

int main() {
    std::ios_base::sync_with_stdio(false);
    std::ifstream in("data.txt", std::ios_base::binary);
    for (std::string token; in >> token; ) {
        if (++count / 100000 == 0) {
            std::cout << "read " << count << " tokens\n";
        }
    }
    std::cout << "read " << count << " tokens\n";
} 
```

# algorithm - 最佳矩阵转置的缓存未命中率是多少？

> ID：13733716
> 
> 赞同：4
> 
> 时间：2012-12-05T22:34:12.737
> 
> 标签：algorithm, performance, optimization, memory-management, cpu-cache

如果我有一个`M`x`N`矩阵和一个大小为 K 的 L1 缓存，那么最佳矩阵转置的缓存未命中率是多少。显然，我正在寻找与`M`和`N`（可能`K`，尽管这可能太复杂）的函数而不是特定数字的东西。

我之所以问，是因为我有很多矩阵数据必须在两个方向上进行处理，并且我希望根据经验法则知道何时将原始数据和转置都保留在内存中是值得的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:23:07.997

你还没有说你拥有的缓存类型，它是直接映射的吗？N路集关联？假设一个 N 路集合关联（是的，您确实需要取决于您的特定 CPU 架构的缓存的所有详细信息）并假设一个特定的矩阵排序，例如列优先，那么您基本上会遇到冷缺失 M*N/C其中 C 是高速缓存行大小（取决于 CPU，但通常是 8 倍 :)）。

然后，您将对目标矩阵进行跨步访问，除非矩阵足够小以完全适合 L1，否则您可以假设 M*N 冷缺失的最坏情况，例如大小为 32kB 的 L1，您可以容纳 4000 个双打，即大小为 ~63*63 的矩阵。

因此，我们将查看转置的最坏情况 (M*N/C + M*N) 总 L1 未命中。

一个想法是做翻转矩阵排序的技巧，例如从列优先到行优先，而不是物理移动它，而是将**它作为 transposed 访问**。如果您有正确的矩阵实现，您可以在相同数据上翻转矩阵排序，那么这是一个零成本操作。

真正昂贵的预取虽然永远不会在 L1 而是在 LLC（最后一级缓存），即使你得到 L1 未命中它仍然是一个廉价的未命中，因为它将从 L2 加载。总之，除非您拥有目标 CPU 架构的所有微小细节，否则很难计算。

# linux - 我运行的是哪个版本的 PostgreSQL？

> ID：13733719
> 
> 赞同：1189
> 
> 时间：2012-12-05T22:34:16.760
> 
> 标签：linux, database, postgresql

我在公司环境中（运行 Debian Linux）并且没有自己安装它。我使用 Navicat 或 phpPgAdmin 访问数据库（如果有帮助的话）。我也没有对运行数据库的服务器的 shell 访问权限。

* * *

## 回答 #1

> 赞同：1870
> 
> 时间：2012-12-05T22:42:43.690

从 PostgreSQL 运行此查询：

```
SELECT version(); 
```

* * *

## 回答 #2

> 赞同：627
> 
> 时间：2012-12-05T22:44:20.207

我相信这就是您正在寻找的，

服务器版本：

```
pg_config --version 
```

客户端版本：

```
psql --version 
```

* * *

## 回答 #3

> 赞同：233
> 
> 时间：2014-04-29T20:32:54.507

# 使用命令行：

## 服务器版本：

```
$ postgres -V  # Or --version.  Use "locate bin/postgres" if not found.
postgres (PostgreSQL) 9.6.1
$ postgres -V | awk '{print $NF}'  # Last column is version.
9.6.1
$ postgres -V | egrep -o '[0-9]{1,}\.[0-9]{1,}'  # Major.Minor version
9.6 
```

如果安装了多个 PostgreSQL，或者出现“ `postgres: command not found`”错误：

```
$ locate bin/postgres | xargs -i xargs -t '{}' -V  # xargs is intentionally twice.
/usr/pgsql-9.3/bin/postgres -V 
postgres (PostgreSQL) 9.3.5
/usr/pgsql-9.6/bin/postgres -V 
postgres (PostgreSQL) 9.6.1 
```

如果`locate`没有帮助，请尝试`find`：

```
$ sudo find / -wholename '*/bin/postgres' 2>&- | xargs -i xargs -t '{}' -V  # xargs is intentionally twice.
/usr/pgsql-9.6/bin/postgres -V 
postgres (PostgreSQL) 9.6.1 
```

虽然`postmaster`也可以用来代替`postgres`，但 using`postgres`更可取，因为`postmaster`它是 . 的不推荐使用的别名`postgres`。

## 客户端版本：

相关，[登录为`postgres`](https://stackoverflow.com/a/11919677/832230).

```
$ psql -V  # Or --version
psql (PostgreSQL) 9.6.1 
```

如果安装了多个 PostgreSQL：

```
$ locate bin/psql | xargs -i xargs -t '{}' -V  # xargs is intentionally twice.
/usr/bin/psql -V 
psql (PostgreSQL) 9.3.5
/usr/pgsql-9.2/bin/psql -V 
psql (PostgreSQL) 9.2.9
/usr/pgsql-9.3/bin/psql -V 
psql (PostgreSQL) 9.3.5 
```

# 使用 SQL：

## 服务器版本：

```
=> SELECT version();
                                                   version                                                    
--------------------------------------------------------------------------------------------------------------
 PostgreSQL 9.2.9 on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-4), 64-bit

=> SHOW server_version;
 server_version 
----------------
 9.2.9

=> SHOW server_version_num;
 server_version_num 
--------------------
 90209 
```

如果更好奇，请尝试`=> SHOW all;`。

## 客户端版本：

值得一提的是，可以在其中执行 shell 命令以在路径`psql`中显示可执行文件的客户端版本。`psql`请注意，运行`psql`可能与路径中的运行不同。

```
=> \! psql -V
psql (PostgreSQL) 9.2.9 
```

* * *

## 回答 #4

> 赞同：78
> 
> 时间：2019-02-04T11:04:40.507

如果您正在使用*CLI*并且您是`postgres` *user*，那么您可以这样做：

```
psql -c "SELECT version();" 
```

可能的*输出*：

```
 version                                                         
-------------------------------------------------------------------------------------------------------------------------
 PostgreSQL 11.1 (Debian 11.1-3.pgdg80+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 4.9.2-10+deb8u2) 4.9.2, 64-bit
(1 row) 
```

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2017-05-09T14:04:29.133

公认的答案很好，但是如果您需要以编程方式与 PostgreSQL 版本进行交互，最好这样做：

```
SELECT current_setting('server_version_num'); -- Returns 90603 (9.6.3)
-- Or using SHOW command:
SHOW server_version_num; -- Returns 90603 too 
```

它将以整数形式返回服务器版本。[这是在PostgreSQL 源代码](https://github.com/postgres/postgres/blob/5af2e976d72aa345337596cc986237c57e1146b2/src/bin/pg_dump/pg_dump.c#L748)中测试服务器版本的方式，例如：

```
/*
 * This is a C code from pg_dump source.
 * It will do something if PostgreSQL remote version (server) is lower than 9.1.0
 */
if (fout->remoteVersion < 90100)
    /*
     * Do something...
     */ 
```

更多信息[在这里](https://www.postgresql.org/docs/current/static/runtime-config-preset.html#GUC-SERVER-VERSION-NUM)和[这里](https://www.postgresql.org/docs/current/static/functions-info.html#FUNCTIONS-INFO-SESSION-TABLE)。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2015-09-25T10:55:29.190

执行命令

```
psql -V 
```

在哪里

*V*必须大写。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2018-03-21T05:57:14.160

在外壳 psql.exe 中，执行

```
\! psql -V 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2018-11-13T19:42:38.147

`pgadmin4`通过双击服务器 > server_name_here > 属性选项卡 > 版本可以看到使用它：

3.5版：

[![pgadmin4 显示 postgres 版本。 服务器 > server_name > 属性 > 版本](../Images/b77c354ddf0048e2db4b62844ec0d575.png)](https://i.stack.imgur.com/5ev2W.png)

4.1、4.5 版：

[![在此处输入图像描述](../Images/c048a7ce933eab52ba854586135227f1.png)](https://i.stack.imgur.com/gijiF.png)

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2019-02-06T09:21:08.973

一个简单的方法是通过输入`psql --version`终端来检查版本

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2015-04-23T06:22:48.220

The pg_config command will report the directory where the PostgreSQL programs are installed (--bindir), the location of C include files (--includedir) and object code libraries (--libdir), and the version of PostgreSQL (--version):

```
$ pg_config --version
PostgreSQL 9.3.6 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2014-07-18T10:29:04.183

就我而言

```
$psql
postgres=# \g
postgres=# SELECT version();
                                                       version
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 8.4.21 on x86_64-pc-linux-gnu, compiled by GCC gcc-4.6.real (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3, 64-bit
(1 row) 
```

希望它会帮助某人

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2019-12-15T07:14:05.393

使用`VERSION`特殊变量

```
$psql -c "\echo :VERSION" 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2021-04-13T02:19:59.613

如果您已经在使用 for 工具（使用 DBeaver）连接 PostgreSQL，它将如下所示：

[![见下图](../Images/9cd9f1fd3b183e8afd63b363aa238723.png)](https://i.stack.imgur.com/2t2Xv.png)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-03-25T21:20:44.063

如果您在 debian/ubuntu 系统上具有对服务器的 shell 访问权限（问题提到 op 没有，但如果您有）

```
sudo apt-cache policy postgresql 
```

这将输出安装的版本，

```
postgresql:
  Installed: 9.6+184ubuntu1.1
  Candidate: 9.6+184ubuntu1.1
  Version table:
 *** 9.6+184ubuntu1.1 500
        500 http://in.archive.ubuntu.com/ubuntu artful-updates/main amd64 Packages
        500 http://in.archive.ubuntu.com/ubuntu artful-updates/main i386 Packages
        500 http://security.ubuntu.com/ubuntu artful-security/main amd64 Packages
        500 http://security.ubuntu.com/ubuntu artful-security/main i386 Packages
        100 /var/lib/dpkg/status
     9.6+184ubuntu1 500
        500 http://in.archive.ubuntu.com/ubuntu artful/main amd64 Packages
        500 http://in.archive.ubuntu.com/ubuntu artful/main i386 Packages 
```

其中`Installed: <version>`是已安装的 postgres 软件包版本。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2021-03-26T13:29:34.437

**[检查PostgreSQL 数据库版本](https://orahow.com/check-postgresql-database-version/)的有用查询**

```
bash-4.1$ psql
postgres=# SELECT version();
postgres=# SHOW server_version; 
```

**检查 PostgreSQL 客户端版本。**

```
bash-4.1$ psql --version
psql (PostgreSQL) 12.1 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-10-20T11:21:41.020

不知道这有多可靠，但是您可以完全自动获得两个版本令牌：

```
psql --version 2>&1 | tail -1 | awk '{print $3}' | sed 's/\./ /g' | awk '{print $1 "." $2}' 
```

因此，您可以构建二进制文件的路径：

```
/usr/lib/postgresql/9.2/bin/postgres 
```

只需用此命令替换 9.2。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-01-09T10:33:45.687

对于 PgAdmin 的当前版本：撰写本文时为 4.16。

1.  选择您需要其版本的数据库。
2.  单击右窗格中的属性选项卡。

请看下面的截图： [![PGAdmin 4.16 显示 DB 版本 10.10](../Images/412a9c3c86939347a8bc7bc8bd799208.png)](https://i.stack.imgur.com/5ZKrQ.png)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-10-06T07:16:29.437

1.  使用命令行服务器：

```
postgres -V 
```

客户：

```
psql -V 
```

2.  然后登录到 postgres：

```
postgres=# select version(); 
```

或从 cli：

```
psql -c "SELECT version();" 
```

3.  使用`VERSION`特殊变量 Login 作为 postgres 用户：

```
sudo su - postgres 
```

然后：

```
psql -c "\echo :VERSION" 
```

[在此处](https://citizix.com/how-to-check-which-version-of-postgres-is-running-installed/)查看本指南以获取完整说明

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-10-29T17:57:15.807

这是一个相当古老的问题，有很多很好的答案。我发现从版本 12 开始，只需调用客户端就可以告诉我我需要知道的内容，但我在服务器的 shell 上运行它们。下面的示例与输出。

当我在第 12 版时：

```
$ sudo su postgres -c "psql"
psql (12.8 (Ubuntu 12.8-0ubuntu0.20.04.1)) 
```

我读到这个，因为客户端和服务器都是版本 12。

在我将 Ubuntu 从 20.04 升级到 21.04 之后：

```
$ sudo su postgres -c "psql"
psql (13.4 (Ubuntu 13.4-0ubuntu0.21.04.1), server 12.8 (Ubuntu 12.8-0ubuntu0.20.04.1)) 
```

正如我确认的那样，它清楚地告诉我客户端使用的是 13 版，但服务器仍然使用的是 12 版：

```
$ pg_lsclusters
Ver Cluster Port Status Owner    Data directory              Log file
12  main    5432 online postgres /var/lib/postgresql/12/main /var/log/postgresql/postgresql-12-main.log 
```

顺便说一下，在这个阶段注意这个误导性的结果：

```
$ pg_config --version
PostgreSQL 13.4 (Ubuntu 13.4-0ubuntu0.21.04.1) 
```

在我[升级](https://askubuntu.com/questions/1372385/how-do-i-install-postgresql-version-14-on-ubuntu-21-04)到版本 14 后：

```
$ sudo su postgres -c "psql"
psql (14.0 (Ubuntu 14.0-1.pgdg21.04+1))
Type "help" for help.

postgres=# 
```

同样，我将其解释为客户端和服务器都在版本 14 上，再次确认：

```
$ pg_lsclusters
Ver Cluster Port Status                Owner    Data directory              Log file
12  main    5432 down,binaries_missing postgres /var/lib/postgresql/12/main /var/log/postgresql/postgresql-12-main.log
14  main    5433 online                postgres /var/lib/postgresql/14/main /var/log/postgresql/postgresql-14-main.log 
```

顺便说一下，这个版本与通过运行`SELECT version();`查询获得的版本相同。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-08-05T05:03:42.743

如果`Select version()`返回 Memo 尝试以这种方式使用命令：

```
Select version::char(100) 
```

或者

```
Select version::varchar(100) 
```

# sql - 使用 COUNT() 仅返回每个学生一个结果

> ID：13733729
> 
> 赞同：0
> 
> 时间：2012-12-05T22:35:03.143
> 
> 标签：sql, oracle, oracle-apex

首先，这是我的相关表的数据库架构：

```
table: students
record_number    |    forename    |    surname

table: applications
id    |    record_number    |    job_id    |    status_id 
```

表中的`record_number`字段是`applications`表的外键`students`。我正在尝试编写一些 SQL 以在 APEX 中生成一个条形图，其中显示了接受实习和没有实习的学生人数。

如果学生有已接受的申请，则该`status_id`字段为`7`。其他任何事情，他们都没有接受的申请。这是我到目前为止所得到的：

```
SELECT NULL AS link, 'Placed' AS label, COUNT(*) AS value
FROM tbl_students students
JOIN tbl_applications applications USING (record_number)
WHERE applications.status_id = 7
UNION
SELECT NULL AS link, 'Unplaced' AS label, CASE COUNT(*) AS value WHEN value > 1 THEN 1 END
FROM tbl_students students
JOIN tbl_applications applications USING (record_number)
WHERE applications.status_id != 7 
```

问题是，一个学生可以有很多实习，一次只能接受其中一个。这对于上面的第一个查询很好。但是，一个学生可以有许多未接受的实习，第二个查询将它们全部计数，而不是只计数一次（以表明 +1 学生没有未接受的实习）。

我怎样才能使查询只计算一次没有接受实习的学生，而不是计算他们有多少未接受的实习？我尝试了该`CASE`语句，但它引发了语法错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:44:59.377

听起来您希望第二个查询是这样的

```
SELECT NULL AS link, 'Unplaced' AS label, COUNT(DISTINCT students.record_number) AS value
  FROM tbl_students students
       JOIN tbl_applications applications USING (record_number)
 WHERE applications.status_id != 7 
```

这将计算不同`students.record_number`值的数量。由于这是`students`表格的主键，我希望它能给您提供至少有一次未接受实习的学生数量。

如果该查询没有产生您正在寻找的结果，那么如果您可以发布一些示例数据和预期的输出将会很有帮助。

# asp.net - MVC 4 中关注点和 API 控制器的分离

> ID：13733732
> 
> 赞同：1
> 
> 时间：2012-12-05T22:35:09.307
> 
> 标签：asp.net, .net, asp.net-mvc-4

我正在尝试构建我的第一个企业**ASP.NET MVC 4** Web 应用程序，但在弄清楚事情的正确流程时遇到了一些问题。

假设我有一个视图 Clients.cshtml，它具有相应的 ClientsController、基类`Controller`。

我希望客户端视图显示系统中所有客户端的列表。

由于关注点分离，我相信处理此类请求的正确位置将是一个`ApiController`，而不是它`Controller`本身，我认为它应该或多或少地仅限于 UI 任务。因此，我在其中添加了一个方法`getClients()`，该方法`ApiController`将返回一个包含所有客户端的 JSON 对象。

现在，我如何从我的 View 或我的`Controller`? 我相信，一种方法是使用 javascript 处理它；加载视图时，我调用`ApiController`using`jQuery`等，并异步显示结果。

但我不确定这是正确的方法，是吗？我相信这是*一种*方法，但我想知道替代方案，或者更好（更传统）的处理方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:07:38.923

如果您不会在其他 Web 应用程序或移动应用程序中使用该 API，则无需开发 Web API。Web API 旨在为多个消费者提供单一核心的简单方法，例如安卓应用程序、iOS、Web 应用程序甚至自定义第三方消费者。

因此，如果您的应用程序不会以这种方式使用，您就不需要使用 API 控制器。

如果您想分离关注点，我建议您在同一解决方案中创建一个不同的项目（类库项目），该项目将是您的内部 API。然后，您的 MVC 项目将使用您的内部 API，尽量使您的控制器保持皮肤状态。我建议您阅读[这篇文章](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)（它是针对 Ruby on Rails，但所有概念都适用于 MVC .NET）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:22:00.890

您正在寻找的似乎是一种将相同数据呈现给您的视图（服务器端呈现）和您的 javascript（通过 JSON API）的方法。

有多种方法可以解决这个问题。正如您所提到的，您可以创建一个单独的 API 控制器，但根据我的经验，一旦您超出少数 API 调用，这会有点臭。理想情况下，您希望您的 API 具有与普通控制器相同的 RESTful 架构，这意味着您将重复许多相同的逻辑来添加、列出和删除对象。

我发现的一个不错的选择是允许每个控制器返回视图或 JSON，具体取决于请求的格式。这可以扩展为包括 XML、CSV 或您希望从客户端使用的任何其他格式。[Michael Morton](https://stackoverflow.com/users/133974/michael-morton)有一篇关于这种方法的[优秀博客文章。](http://icanhascode.com/2009/05/simple-ror-respond_to-functionality-in-aspnet-mvc/)它可能不是您想要的，但最终结果看起来像这样：

```
public ActionResult Index()
{
    List<Client> clients = db.Clients.ToList();
    return RespondTo(format =>
    {
        format.Html = () => View(clients);
        format.Json = () => Json(clients);
    });
} 
```

# class - “Array.fill(2)(new A)”和“val a=new A; Array.fill(2)(a)”有什么区别？

> ID：13733734
> 
> 赞同：1
> 
> 时间：2012-12-05T22:35:19.883
> 
> 标签：class, scala, new-operator, cloning, scala-2.9

最小工作示例（Scala 2.9.2）：

```
object Main extends App {
  class A {
    var a=0
  }
  val b = Array.fill(2)(new A)
  b(1).a = 9
  println(b(0).a) //prints 0
  println(b(1).a) //prints 9

  val a = new A
  val c = Array.fill(2)(a)
  c(1).a = 9
  println(c(0).a) //prints 9
  println(c(1).a) //prints 9
} 
```

一个相关的问题是“与导入的 Java 类一样吗？” 如果我需要用作为参数传递的实例的副本填充函数内部的数组，我该如何解决？[关于相同的副本，我值得去看看易[克隆库](http://code.google.com/p/cloning/wiki/Usage)。

只需根据答案将解决方法添加到函数调用中：

```
 class A {
    var a=0
  }

  def f(a: => A) {             // "=>" added
    val b = Array.fill(2)(a)
    b(1).a=9
    println(b(0).a) //prints 0
    println(b(1).a) //prints 9
  }

  f(new A) 
```

另一种方法是声明一个函数，而不是一个值`def a = new A`：

```
object Main extends App {
  class A {
    var a=0
  }
  val b = Array.fill(2)(new A)
  b(1).a = 9
  println(b(0).a) //prints 0
  println(b(1).a) //prints 9

  def a = new A
  val c = Array.fill(2)(a)
  c(1).a = 9
  println(c(0).a) //prints 0
  println(c(1).a) //prints 9
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T22:42:21.573

该`fill`方法的第二个参数定义为“按名称调用”。这意味着对数组中的每个单元格*重新评估传入的块。*在定义中看到`elem`is的类型`=> T`，而不仅仅是`T`：

```
def fill[T: ClassManifest](n: Int)(elem: => T): Array[T] 
```

因此，在您的第一个版本中，`new A`为每个单元格重新评估该块，这意味着每个单元格都会获得一个新`A`对象。在第二个版本中，`new A`只调用一次，并且该对象被放置到每个单元格中。

如果您在 REPL 上运行，您实际上可以看到这一点：

```
scala> val b = Array.fill(2)(new A)
b: Array[A] = Array(A@2049bed2, A@498edd8d)    // two different objects

scala> val c = Array.fill(2)(a)
c: Array[A] = Array(A@31e0c0b6, A@31e0c0b6)    // the same object repeated 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:42:23.357

看一下填充的签名

```
def fill[T: ClassManifest](n: Int)(elem: => T) 
```

所以它得到一个按名称调用的参数，这意味着`new A`每次处理数组中的一个单元格时都会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:41:58.307

一个用 A 的单个实例填充数组，另一个用 A 的新实例填充数组。

# opencv - opencv-1.0.0 无法编译

> ID：13733736
> 
> 赞同：2
> 
> 时间：2012-12-05T22:35:32.190
> 
> 标签：opencv, makefile

我正在尝试编译使用 opencv-1.0.0 的旧代码（不是我编写的）。我使用的是 64 位 Scientific Linux 6。我从 sourceforge 下载了 opencv-1.0.0。然后， ./configure

然后我收到如下错误

```
cvcap_dc1394.cpp: In function 'int icvSetFeatureCAM_DC1394(CvCaptureCAM_DC1394*, int, int)':
cvcap_dc1394.cpp:796: error: overloaded function with no contextual type information
make[3]: *** [cvcap_dc1394.lo] Error 1
make[3]: Leaving directory `/home/ram/opencv/opencv-1.0.0/otherlibs/highgui'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/ram/opencv/opencv-1.0.0/otherlibs'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/ram/opencv/opencv-1.0.0' 
```

有什么解决办法吗？在谷歌上搜索了很多之后，我猜我的发行版不支持 IEEE1394 堆栈。我需要重新编译我的内核吗？解决这个问题有什么更简单的方法吗？我不想重写那个代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:12:14.590

如果您不需要火线的支持，您可以尝试通过使用禁用它

```
./configure --without-1394libs 
```

这能解决你的问题吗？

# php - 为动态数据库创建更新查询

> ID：13733737
> 
> 赞同：0
> 
> 时间：2012-12-05T22:35:34.687
> 
> 标签：php, mysql, forms, post

我正在尝试更新 mysql 数据库中的一行。为此，我将使用这样的简单查询：

```
 "UPDATE  `contactinfo` SET  `Company` =  'Google', WHERE `id` =  '1';" 
```

问题是数据库是动态的，用户可以随时添加列。所以我不知道列的名称。要查找名称并创建一个表单以发布到实际执行 mysql 工作的页面，请使用以下代码：

```
 <?php
            $result = mysql_query("select * from contactinfo WHERE `id` = '".$rid."';");

            if (!$result) {
                die('Query failed: ' . mysql_error());
            }
            $i = 0;
            while ($i < mysql_num_fields($result)) {
                $meta = mysql_fetch_field($result, $i);
                if (!$meta) {
                    echo "ERROR";
                }
                $name = $meta->name;

                $r = mysql_fetch_array(mysql_query("select * from contactinfo WHERE `id` = '".$rid."';"));
                $content = $r[$name];

                if($name != 'id') {
                    echo "<tr><td align='center'><div align='left'>Edit ".$name."</div></td></tr>";
                    echo "<tr><td align='center'><input type='text' value='" . $content . "' /></td></tr>";
                }
                $i++;
            }
            mysql_free_result($result);
        ?> 
```

这将创建一个带有输入框的漂亮小表格，允许用户编辑已选择行的内容。行 id 编号 ($rid) 用于标识需要更改的行。

我的问题是，如何从发布的表单中获取该行的新内容并创建查询来更新它？我似乎无法弄清楚如何动态获取表单的名称以及编写查询的新内容。

如果需要任何澄清，请告诉我，感谢所有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:02:42.393

最简单的方法是将表单中的字段准确命名为数据库中字段的名称。假设你有这个表格

```
<form action="">
   <input name="field[firstname]">
   <input name="field[lastname]">
   <input name="field[address]">
</form> 
```

您应该也可以根据字段名称创建表单，您可能已经在这样做了。在处理响应的文件中，您可以执行以下操作：

```
foreach($_POST['field'] as $field_name => $field_value) {
   $sql_str[] = "{$field_name} = '{$field_value}'";
} 
```

这只是通过来自 post 的“字段”数组并将正确的更新文本放入另一个数组中。然后做一个

```
mysql_query("UPDATE contactinfo SET ".implode(',', $sql_str)." WHERE `id` = '".$rid."';") 
```

将其放入数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:16:57.280

您最好调查一下是否有可以使用的 ORM 框架。

无论如何，做你想做的最简单的方法是在字段中传递字段的名称`INPUT`。

```
$content = AddSlashes($content); // You may need HTMLEntities() here

$field = <<<FIELD
    <input type="text" value="$content" />
FIELD; 
```

此外，另一个有用的技巧是提供一个“受保护”字段的数组，或者指定一个前缀，使该字段不可更改。例如，您几乎肯定不希望用户能够更改主键。

所以你可以用

```
if ('id' == $meta->name or 'pk' == $meta->name or (0 === strpos($meta->name, 'pk_')))
{
    // This is a primary key field
    $html .= <<<PKFIELD
    <input type="hidden" name="{$meta->name}" value="{$contents}" />
PKFIELD;
    continue;
}
if (0 === strpos($meta->name, 'hf_'))
{
    // hidden field, ignored (can't be changed)
    continue;
}
if (0 === strpos($meta->name, 'ro_'))
{
    // read-only field, shown but without even the name
    $html .= <<<ROFIELD
    <input type="text" readonly="readonly" class="readonly" value="{$contents}" />
ROFIELD;
    continue;
} 
```

或者您可以使用固定大小的前缀和模板数组：

```
$fieldtpls = array(
    'pk_' => '<input type="hidden" name="{NAME}" value="{VALUE}" />',
    'ta_' => '<textarea name="{NAME}">{VALUE}</textarea>',
    'ro_' => '<input type="text" value="{VALUE}" readonly="readonly" />',
); 
```

然后您分析每个字段并应用默认值，除非使用已知前缀。

然后，您的用户必须相应地命名这些字段。另一种可能性是允许“元表”保存每个表和字段的类型和处理，但在这种情况下，您需要通过为元创建一种“管理编辑器”来使用户界面复杂一点桌子：

```
table  field  type   rw   parameters
users  name   text   yes  
users  id     hidden no
users  role   text   no
users  notes  area   yes  class:"widearea" 
```

...那就是~~龙~~ORM 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:44:05.353

您可以做的是在数据库中添加一个带有位标志的列，如果用户是新用户或旧用户，该标志将反映它。这样您就可以更新用户以说明它是新的还是旧的。

希望这可以帮助。

# visual-studio-2010 - 如何在 Visual Studio 和 MSBuild 的构建前或构建后事件中修改 master/aspx 文件？

> ID：13733739
> 
> 赞同：0
> 
> 时间：2012-12-05T22:35:42.987
> 
> 标签：visual-studio-2010, visual-studio, msbuild

我有一个asp.net 主文件，其中包含一个带有css 文件查询字符串的url。我想在每次构建时自动修改查询字符串，无论是在 Visual Studio 2010 或 MSBuild 的构建前或构建后事件中。我可以编写一个程序来做到这一点，但我宁愿使用一些内置的方式。查询字符串可以是随机数或程序集的新版本号，或者增加查询字符串中已有的数字。

我怎样才能在其中一个事件中做到这一点？从命令行使用 MSbuild 执行此操作更为重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:15:10.097

这可以使用 MSBuild 社区任务项目中的 FileUpdate 任务来完成：[https ://github.com/loresoft/msbuildtasks](https://github.com/loresoft/msbuildtasks)

# android - 这个 xml 解析器 (Android) 有什么问题？

> ID：13733741
> 
> 赞同：0
> 
> 时间：2012-12-05T22:35:45.047
> 
> 标签：android, xml, parsing, sax

我想解析一个xml文件。我试图找到错误，但我找不到它。你能帮我吗？xml:

```
<maintag>
    <data>
        <id>1</id>
        <name>x y</name>
        <age>16</age>
        <phone>06/30 123-4567</phone>
        <address>Veszprem Valami ut 10.</address>
    </data>
    <data>
        <id>2</id>
        <name>p q</name>
        <age>18</age>
        <phone>06/70 987-6543</phone>
        <address>Budapest Ulloi ut 21.</address>
    </data>
</maintag> 
```

XMLParser 类：

```
package com.example.xmlproba;

import java.util.jar.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;
import android.util.Log;

public class XMLParser extends DefaultHandler {

    boolean xmlStartLine = false;
    boolean id = false;
    boolean data = false;
    boolean maintag = false;
    boolean age = false;
    boolean name = false;
    boolean phone = false;
    boolean address = false;

    Data currentData;
    DataContainer dataContainer;

    public XMLParser(DataContainer dataContainer){
        this.dataContainer=dataContainer;
        Log.d("FUNC","XMLPARSER()");

        // Data d = new Data();
    }

    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        Log.d("START","START");

        if (qName.equalsIgnoreCase("MAINTAG")) {
            Log.d("Maintagfound","mtf");

        } else if (qName.equalsIgnoreCase("DATA")) {
            //create new data object 
            currentData = new Data();
            Log.d("NEWDATA","NEWDATA");
        } else if (qName.equalsIgnoreCase("ID")) {
            id  = true;
            Log.d("id","id");
        } else if (qName.equalsIgnoreCase("NAME")) {
            name = true;
            Log.d("name","name");
        } else if (qName.equalsIgnoreCase("AGE")) {
            age = true;
        } else if (qName.equalsIgnoreCase("PHONE")) {
            phone = true;
        } else if (qName.equalsIgnoreCase("ADDRESS")) {
            address = true;
        } else {
        }

    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        Log.d("END","END");
        if (qName.equalsIgnoreCase("DATA")) {
            //todo at the end of a data node
            //dataContainer.addDataToList(currentData);
            //dataContainer.dataList.add(currentData);
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        Log.d("CHARS","CHARS");
        if (id) {
            String s = new String(ch, start, length);
            currentData.setId(Integer.parseInt(s));
            Log.d("IDIDID",s);
            id = false;
        } else if (name) {
            String s = new String(ch, start, length);
            Log.d("NAME1",s);
            currentData.setName(s);
            Log.d("NAME2",currentData.getName());
            name = false;
        } else if (age) {
            String s = new String(ch, start, length);
            currentData.setAge(Integer.parseInt(s));

            age = false;
        } else if (phone) {
            String s = new String(ch, start, length);
            currentData.setPhone(s);
            phone = false;
        } else if (address) {
            String s = new String(ch, start, length);
            currentData.setAdress(s);
            address = false;
        } else {
        }

    }

} 
```

以及我活动的解析部分：

```
private void readXML() {
    // TODO Auto-generated method stub
    Log.d("FUNC","READXML");
    try {

        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        XMLParser xp = new XMLParser(dataContainer);
        xr.setContentHandler(xp);
        InputStream is = getResources().openRawResource(
                R.raw.data);
        xr.parse(new InputSource(is));

    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        Log.d("PARSERCONFEX","PARSERCONFEX");
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        Log.d("SAXEX","SAXEX");
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.d("IOEX","IOEX");
        e.printStackTrace();
    }

} 
```

从 log.d() 我可以看到只有来自构造函数的日志，“CHARS”和“END”日志被创建。这是我的日志：

```
12-06 06:38:11.063: E/Trace(629): error opening trace file: No such file or directory (2)
12-06 06:38:11.623: D/FUNC(629): INIT
12-06 06:38:11.623: D/FUNC(629): READXML
12-06 06:38:11.643: D/FUNC(629): XMLPARSER()
12-06 06:38:11.664: D/CHARS(629): CHARS
12-06 06:38:11.664: D/CHARS(629): CHARS
12-06 06:38:11.664: D/CHARS(629): CHARS
12-06 06:38:11.664: D/CHARS(629): CHARS
12-06 06:38:11.664: D/CHARS(629): CHARS
12-06 06:38:11.673: D/END(629): END
12-06 06:38:11.673: D/CHARS(629): CHARS
12-06 06:38:11.673: D/CHARS(629): CHARS
12-06 06:38:11.673: D/CHARS(629): CHARS
12-06 06:38:11.673: D/END(629): END
12-06 06:38:11.673: D/CHARS(629): CHARS
12-06 06:38:11.673: D/CHARS(629): CHARS
12-06 06:38:11.683: D/CHARS(629): CHARS
12-06 06:38:11.683: D/END(629): END
12-06 06:38:11.683: D/CHARS(629): CHARS
12-06 06:38:11.683: D/CHARS(629): CHARS
12-06 06:38:11.683: D/CHARS(629): CHARS
12-06 06:38:11.683: D/END(629): END
12-06 06:38:11.683: D/CHARS(629): CHARS
12-06 06:38:11.683: D/CHARS(629): CHARS
12-06 06:38:11.693: D/CHARS(629): CHARS
12-06 06:38:11.693: D/END(629): END
12-06 06:38:11.693: D/CHARS(629): CHARS
12-06 06:38:11.693: D/CHARS(629): CHARS
12-06 06:38:11.693: D/END(629): END
12-06 06:38:11.693: D/CHARS(629): CHARS
12-06 06:38:11.693: D/CHARS(629): CHARS
12-06 06:38:11.693: D/CHARS(629): CHARS
12-06 06:38:11.693: D/CHARS(629): CHARS
12-06 06:38:11.703: D/CHARS(629): CHARS
12-06 06:38:11.703: D/END(629): END
12-06 06:38:11.703: D/CHARS(629): CHARS
12-06 06:38:11.713: D/CHARS(629): CHARS
12-06 06:38:11.713: D/CHARS(629): CHARS
12-06 06:38:11.713: D/END(629): END
12-06 06:38:11.713: D/CHARS(629): CHARS
12-06 06:38:11.713: D/CHARS(629): CHARS
12-06 06:38:11.713: D/CHARS(629): CHARS
12-06 06:38:11.713: D/END(629): END
12-06 06:38:11.713: D/CHARS(629): CHARS
12-06 06:38:11.713: D/CHARS(629): CHARS
12-06 06:38:11.723: D/CHARS(629): CHARS
12-06 06:38:11.723: D/END(629): END
12-06 06:38:11.723: D/CHARS(629): CHARS
12-06 06:38:11.723: D/CHARS(629): CHARS
12-06 06:38:11.723: D/CHARS(629): CHARS
12-06 06:38:11.723: D/END(629): END
12-06 06:38:11.733: D/CHARS(629): CHARS
12-06 06:38:11.733: D/CHARS(629): CHARS
12-06 06:38:11.733: D/END(629): END
12-06 06:38:11.733: D/CHARS(629): CHARS
12-06 06:38:11.733: D/CHARS(629): CHARS
12-06 06:38:11.733: D/END(629): END
12-06 06:38:12.063: I/Choreographer(629): Skipped 77 frames!  The application may be doing too much work on its main thread.
12-06 06:38:12.093: D/gralloc_goldfish(629): Emulator without GPU emulation detected. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:22:27.423

这是您想使用 SAX 执行的操作的示例

## JAVA 类

**数据**

```
public class Data {

    private Integer id;
    private String name;
    private Integer age;
    private String phone;
    private String address;

    public Data(){}

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

} 
```

**数据处理程序**

```
public class DatasHandler extends DefaultHandler {

    private ArrayList<Data> alDatas;
    private Data data;
    private String reading;

    public DatasHandler(){}

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if(qName.equals("maintag")){
            alDatas = new ArrayList<>();
        }
        if(qName.equals("data")){
            data = new Data();
        }

    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if(qName.equals("data")){
            alDatas.add(data);
            data = null;
        }
        if(qName.equals("id")){
            data.setId(Integer.parseInt(reading));
        }
        if(qName.equals("name")){
            data.setName(reading);
        }
        if(qName.equals("age")){
            data.setAge(Integer.parseInt(reading));
        }
        if(qName.equals("phone")){
            data.setPhone(reading);
        }
        if(qName.equals("address")){
            data.setAddress(reading);
        }

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        reading = new String(ch, start, length);
    }

    public ArrayList<Data> getAlDatas() {
        return alDatas;
    }

} 
```

**XML管理器**

```
public final class XMLManager {

    public static ArrayList<Data> getAlDatas(){
        ArrayList<Data> alDatas = null;
        SAXParserFactory factory = SAXParserFactory.newInstance();
        try {
            SAXParser parser = factory.newSAXParser();
            DatasHandler dHandler = new DatasHandler();
            parser.parse(new File("D:\\Loic_Workspace\\SaxExample\\res\\test.xml"), dHandler);
            alDatas = dHandler.getAlDatas();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return alDatas;
    }

} 
```

**主要的**

```
public class MyMain {

    /**
     * @param args
     */
    public static void main(String[] args) {

        ArrayList<Data> alDatas = XMLManager.getAlDatas();

        for(Data d:alDatas){
            System.out.println(d.getName());
            System.out.println(d.getId());
            System.out.println(d.getAge());
            System.out.println(d.getPhone());
            System.out.println(d.getAddress());
            System.out.println("--------------------");
        }

    }

} 
```

## 控制台输出

```
x y
1
16
06/30 123-4567
Veszprem Valami ut 10.
--------------------
p q
2
18
06/70 987-6543
Budapest Ulloi ut 21.
-------------------- 
```

您似乎想在 Android 上使用它。所以我认为您可以在 XMLManager 类中执行以下操作：

```
InputSource in = new InputSource(getResources().openRawResource(R.raw.data));
parser.parse(in, dHandler); 
```

告诉我它是否有效，

# c++ - 在 QTableView 中显示 std::map

> ID：13733743
> 
> 赞同：0
> 
> 时间：2012-12-05T22:35:53.243
> 
> 标签：c++, qt, map, tableview, qtableview

我有某种数据存储在 std::map 中，需要在 QTableView 中显示。所以我有来自 QAbstractItemModel 的模型类，但我遇到了一个问题：

“数据”方法为我提供了一个 QModelIndex，其中包含数据条目的预期行号。但是由于我使用的是地图而不是矢量，因此我无法使用 row 参数随机访问它。所以我的想法是覆盖生成 QModelIndex 对象并包含每个对象的适当哈希键的“索引”方法。但这并没有让它变得更容易，因为我需要再次通过行号获取哈希键。当然，我可以遍历从 begin() 到 end() 的整个地图以找到第 n 行/元素，但这将是非常低效的。

您对如何在 QTableView 中适当地显示 std::map 有什么建议吗？

```
struct Data {
    ...
};

std::map<int, Data> dataMapping;

QModelIndex index ( int row, int column, const QModelIndex & parent );
QVariant data ( const QModelIndex & index, int role ); 
```

# c# - 有什么方法可以在 Windows Phone 8 中等待 IAsyncResult？

> ID：13733749
> 
> 赞同：7
> 
> 时间：2012-12-05T22:36:00.653
> 
> 标签：c#, asynchronous, windows-phone, windows-phone-8

如何在 Windows Phone 8 中将**await与 HttpWebRequest 一起使用？**

有没有办法让 IAsyncResult 的东西与 await 一起工作？

```
private async Task<int> GetCurrentTemperature()
{
  GeoCoordinate location = GetLocation();

  string url = "http://free.worldweatheronline.com/feed/weather.ashx?q=";
  url += location.Latitude.ToString();
  url += ",";
  url += location.Longitude.ToString();
  url += "&format=json&num_of_days=1&key=MYKEY";

  HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
  webRequest.Method = "POST";
  webRequest.BeginGetResponse(new AsyncCallback(OnGotWebRequest), webRequest);
}

private void OnGotWebRequest(IAsyncResult asyncResult)
{
  HttpWebRequest webRequest = (HttpWebRequest)asyncResult.AsyncState;
  var httpResponse = (HttpWebResponse)webRequest.EndGetResponse(asyncResult);
  using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
  {
    string responseText = streamReader.ReadToEnd();
  }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T22:38:48.407

用于从/方法[`TaskFactory.FromAsync`](http://msdn.microsoft.com/en-us/library/dd321335.aspx)创建一个。然后你可以完全摆脱你的，并为响应做同样的事情。`Task<Stream>``BeginGetRequestStream``EndGetRequestStream``OnGotWebRequest`

请注意，当前您正在调用完成`EndGetResponse`时`BeginGetRequestStream`调用，这是不合适的开始 - 您必须调用该`EndFoo`方法以匹配`BeginFoo`您最初调用的方法。你的意思是打电话`BeginGetResponse`吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T01:50:21.907

如果您安装[Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async)包，您将获得一些`async`现成的扩展方法，包括用于`HttpWebRequest`.

# math - 找到与已知直线成 θ 角的直线

> ID：13733750
> 
> 赞同：1
> 
> 时间：2012-12-05T22:36:04.770
> 
> 标签：math, geometry

我有一条从 ( *a* , *b* ) 到 ( *x* , *y* ) 的线，我想画一条从 ( *x* , *y* ) 开始的线，长度为 ℓ，与原线形成 θ 角。

如何计算这条新线的端点坐标？看图：

![](../Images/b80820fd111bd972d610afc06cf1d8f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:18:47.203

好的，所以经过大量涂鸦后，我想出了这个：

![](../Images/cded5d31248c9795acf4681c44e98273.png)

虚线表示平行于 x 轴和 y 轴的线。

m = x - a

n = y - b

α = tan ^(-1) (n / m)

β = α - θ

p = ℓ cos β

q = ℓ sin β

c = x + p

d = y + q

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T15:13:42.290

对于这种事情，使用矢量代数几乎总是更简单，而不是笛卡尔坐标。让我们从标记点开始：

![在此处输入图像描述](../Images/6bb8219eeb38500b7d66f9eb5586f0e9.png)

令 R(θ) 为*逆时针*旋转 θ 弧度的矩阵：

![](../Images/f8e860b4a7019926c58aced90b453b94.png)

然后计算：

**v** = **B** - **A**（从**A**到**B**的向量）

**v̂** = **v** / | **v** | **（ v**方向的单位向量）

**ŵ** = R(−θ) **v̂ （** **BC**方向的单位向量；你的旋转是*顺时针*的，所以我们这里需要R(−θ)，而不是R(θ)）

**w** = ℓ **ŵ**（长度为 ℓ 在**BC**方向上的向量）

**C** = **B** + **w**

**这种方法避免了计算反正切的需要，这需要一些小心（如果天真地完成，当B**垂直高于或低于**A**时会遇到麻烦；但大多数语言都有`atan2`处理这种情况的函数）。

在任何带有向量库的合理编程语言中，您应该能够将其编写为单行代码，可能像这样：

```
C = B + (B - A).unit().rotate(-theta) * l 
```

# google-app-engine - 如何在没有组件扫描的情况下使用 spring mvc 控制器？

> ID：13733752
> 
> 赞同：0
> 
> 时间：2012-12-05T22:36:09.460
> 
> 标签：google-app-engine, spring-mvc, classloader, spring-3, spring-annotations

我使用 Spring 3.x MVC @Controller 注释。我的 servlet.xml 有这个条目：

```
<context:component-scan base-package=”com.my.controllers.package”/> 
```

我的 webapp，在谷歌的应用引擎上必须在 60 秒内初始化和启动。由于这种类路径扫描，我的需要更长的时间（此[链接解释](https://developers.google.com/appengine/articles/spring_optimization)了应用引擎中“**减少或避免使用组件扫描**”的重要性）。

我将以下行添加到我的 servlet.xml

```
 <bean id=”myComponentBean” class=”org.foo.MyComponent”/> 
```

现在，无论我是否添加@Controller，控制器都不会被加载。任何 url 都会导致 404。

**问题：**

1) 那么如何在不依赖共同扫描的情况下使 spring 3.x MVC 控制器充当 Web 控制器？

2）当我向谷歌提交错误时，我被要求删除“组件扫描”和“使用 classLoader.getResource() 明确定义所需的类”。如何使用 classLoader.getResource() 加载 mvc 控制器？

PS：应用引擎上的类路径扫描存在已知问题。在这里讨论这将是一个题外话。所以我跳过了细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:29:55.290

你已经做对了。定义您的控制器`<bean class="..." />`并放入`<mvc:annotation-driven />`您的 servlet 配置。这就对了！

**更新：**

并且您可能还需要`<context:annotation-config />`一些注释（`@EJB`、、`@PersistenceContext`等）才能由 spring 处理。

# ruby-on-rails - 从 activerecord 获取索引哈希

> ID：13733753
> 
> 赞同：24
> 
> 时间：2012-12-05T22:36:14.313
> 
> 标签：ruby-on-rails, database, activerecord

有没有办法在已经由 id 而不是数组索引的哈希中从 activerecord 中提取记录？这就是我目前正在做的事情：

```
results = {}
Table.select { |current| results[current.id] = current } 
```

我假设必须有一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-05T22:42:54.317

```
Table.all.index_by { |t| t.id } 
```

或者：

```
Table.all.index_by(&:id) 
```

如果你对整个简洁的事情感兴趣。

# google-app-engine - 任何域的 webapp2 子域路由

> ID：13733759
> 
> 赞同：4
> 
> 时间：2012-12-05T22:36:29.883
> 
> 标签：google-app-engine, routing, webapp2, wildcard-subdomain

我想设置一个包罗万象的子域路由系统，其中子域是用户的配置文件，域可以是任何东西，因此不必根据运行它的服务器进行设置。

我现在拥有的不是路由我只是尝试使用正则表达式来捕获子域之后的所有内容。

```
routes.DomainRoute('<subdomain>.preset-sub.<.*>', [
                webapp2.Route('/<page_url:\w+>', handler = SubHandler),
            ]), 
```

所以我希望能够转到像 username.preset-sub.localhost.com/ 这样的页面并将其路由到该处理程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:50:17.903

我举了一个我正在开发的项目的例子，我不得不用它来过滤发送 URL 的子域：

```
app = webapp2.WSGIApplication([

    routes.DomainRoute('api.domain.com', [
        webapp2.Route('/', handler=HomeApi, name='subdomain-home'),
        webapp2.Route('/user', handler=UserApi, name='subdomain-home'),

    ]), 
    routes.DomainRoute('web.domain.com', [
        webapp2.Route('/', handler=HomeApi, name='subdomain-web-home'),
        webapp2.Route('/login', handler=Login, name='login-home'),
        webapp2.Route(r'/products/<product_id:\d+>', ProductHandler),
    ]), 
    webapp2.Route('/', handler=Home, name='home'),
    webapp2.Route('/contact', handler=Contact, name='home'),
]) 
```

如果您在网络上尝试，则必须在您的域的 cpanel 和应用程序的管理面板中添加 cname。更多信息：[webapp2 - URI 路由 - 域和子域路由](https://webapp2.readthedocs.io/en/latest/guide/routing.html#domain-and-subdomain-routing)。

# android - Android SurfaceView 为空

> ID：13733760
> 
> 赞同：2
> 
> 时间：2012-12-05T22:36:30.147
> 
> 标签：android, surfaceview

我正在尝试制作一个简单的 2D Android 游戏。在这个游戏中，我试图制作一些按钮来控制角色，而角色则显示在 SurfaceView 中。目前，SurfaceView 仅呈现黑屏。

这是我的`MainActivity`，它扩展了`Activity`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    GameView gm = (GameView)findViewById(R.id.snake_surface);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.layout.main, menu);
    return true;
} 
```

`GameView`扩展的类`SurfaceView`：

```
 private HeroSprite hero;
   public GameView(Context context, AttributeSet attributeSet) {

         super(context, attributeSet);

         gameLoopThread = new GameLoopThread(this);

         getHolder().addCallback(new SurfaceHolder.Callback() {

                public void surfaceDestroyed(SurfaceHolder holder) {
                       boolean retry = true;
                       gameLoopThread.setRunning(false);
                       while (retry) {
                              try {
                                    gameLoopThread.join();
                                    retry = false;
                              } catch (InterruptedException e) {}
                       }
                }

                public void surfaceCreated(SurfaceHolder holder) {
                       createSprites();
                       createHero();
                       gameLoopThread.setRunning(true);
                       gameLoopThread.start();
                }

                public void surfaceChanged(SurfaceHolder holder, int format,int width, int height) {
                }
         });
         bmpBlood = BitmapFactory.decodeResource(context.getResources(), R.drawable.blood1);
   }

      private void createHero(){
       hero=(createHeroSprite(R.drawable.aslan));

   }
      private HeroSprite createHeroSprite(int resouce) {
          Bitmap bmp = BitmapFactory.decodeResource(getResources(), resouce);
          return new HeroSprite(this, bmp);
    }
   private void createSprites() {
         sprites.add(createSprite(R.drawable.tavsan));
         sprites.add(createSprite(R.drawable.fare));
         sprites.add(createSprite(R.drawable.sansar));
         sprites.add(createSprite(R.drawable.tavsan));
         sprites.add(createSprite(R.drawable.fare));
         sprites.add(createSprite(R.drawable.sansar));
         sprites.add(createSprite(R.drawable.tavsan));
         sprites.add(createSprite(R.drawable.fare));
         sprites.add(createSprite(R.drawable.sansar));
         sprites.add(createSprite(R.drawable.tavsan));
         sprites.add(createSprite(R.drawable.tavsan));

   }

   private Sprite createSprite(int resouce) {
         Bitmap bmp = BitmapFactory.decodeResource(getResources(), resouce);
         return new Sprite(this, bmp);
   }

   @Override
   protected void onDraw(Canvas canvas) {
         canvas.drawColor(Color.GREEN);
         for (int i = temps.size() - 1; i >= 0; i--) {
                temps.get(i).onDraw(canvas);
         }
         for (Sprite sprite : sprites) {
                sprite.onDraw(canvas);
         }
         hero.onDraw(canvas);
   }

   @Override
   public boolean onTouchEvent(MotionEvent event) {
         if (System.currentTimeMillis() - lastClick > 300) {
                lastClick = System.currentTimeMillis();
                float x = event.getX();
                float y = event.getY();
                synchronized (getHolder()) {
                       for (int i = sprites.size() - 1; i >= 0; i--) {
                              Sprite sprite = sprites.get(i);
                              if ((sprite).isCollition(x, y)) {
                                    sprites.remove(sprite);
                                    temps.add(new TempSprite(temps, this, x, y, bmpBlood));
                                    break;
                              }
                       }
                }
         }
         return true;
   } 
```

我的`GameLoopThread`课，延伸`Thread`

```
static final long FPS = 10;
private GameView view;
private boolean running = false;

public GameLoopThread(GameView view) {
    this.view = view;
}

public void setRunning(boolean run) {
    running = run;
}

@Override
public void run() {
    long ticksPS = 1000 / FPS;
    long startTime;
    long sleepTime;
    while (running) {
        Canvas c = null;
        startTime = System.currentTimeMillis();
        try {
            c = view.getHolder().lockCanvas();
            synchronized (view.getHolder()) {
                view.onDraw(c);
            }
        } finally {
            if (c != null) {
                view.getHolder().unlockCanvasAndPost(c);
            }
        }
        sleepTime = ticksPS - (System.currentTimeMillis() - startTime);
        try {
            if (sleepTime > 0)
                sleep(sleepTime);
            else
                sleep(10);
        } catch (Exception e) {
        }
    }
} 
```

这是我的布局：

```
<LinearLayout  
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:gravity="center"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/score"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:text="Score:"
            android:textSize="20dp" />

        <Button
            android:id="@+id/btnThread"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal" />

        <TextView
            android:id="@+id/max"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_marginLeft="100dp"
            android:text="Max:"
            android:textSize="20dp" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.3" >

            <SurfaceView
                android:id="@+id/snake_surface"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="0.3" />

        </FrameLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:weightSum="1" >

            <Button
                android:id="@+id/butUp"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal|center"
                android:text="UP" />

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <Button
                    android:id="@+id/butLeft"
                    android:layout_width="100dp"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    android:text="LEFT" />

                <Button
                    android:id="@+id/butRight"
                    android:layout_width="100dp"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:text="RIGHT" />
            </RelativeLayout>

            <Button
                android:id="@+id/butDown"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal|center"
                android:text="DOWN" />
        </LinearLayout>

     </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:41:21.420

您在布局中的视图是 a `SurfaceView`，而不是`GameView`. 你需要改变它：

```
 <your.package.name.GameView
            android:id="@+id/snake_surface"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.3" /> 
```

并替换`your.package.name`为包含`GameView`.

此外，该行`GameView gm = ...`需要*在* `setContentView`.

[`gm.invalidate()`](http://developer.android.com/reference/android/view/View.html#invalidate%28int,%20int,%20int,%20int%29)最后，当你修改了要绘制的项目时，别忘了打电话！

# javascript - Android webview中的window.scrollTo怪异

> ID：13733766
> 
> 赞同：3
> 
> 时间：2012-12-05T22:37:06.000
> 
> 标签：javascript, android

当我使用`window.scrollTo(0, document.body.scrollHeight)`滚动到页面底部（加载到 Android webview 中）时，我遇到了一个奇怪的问题。页面底部有一个巨大的空白间隙（点击页面时它会消失）。有人有建议吗？谢谢。

![在此处输入图像描述](../Images/0c6186586a5ab7440728512a0b78544f.png)

# javascript - Django按钮ajax点击

> ID：13733767
> 
> 赞同：3
> 
> 时间：2012-12-05T22:37:12.057
> 
> 标签：javascript, html, ajax, django

我有一些 Django 渲染良好的 HTML。我想单击 HTML 上的一个按钮，并让它在视图中触发一个事件。

看起来按钮不会导致`post`触发。我不确定我做错了什么。

这是我的`views.py`代码：

```
def log(request):
  if not request.POST:
    template = loader.get_template('log.html')
    html = template.render(Context())
    return HttpResponse(html)
  print "Post" 
```

这是我的`log.html`：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
<script type="text/javascript">
    $("#update_log_button").bind("button", function(){
        $.post("hello");
        return false;
    });
</script>
</head>
<body>
<p>
    <span>SPHIINX Log</span>
</p>
<p>
    <textarea cols="2" name="log" rows="25"></textarea>
     <input id="update_log_button" name="update_log" type="button" value="Update Log"/>
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:42:41.887

是否有原因为什么您不`click`直接使用该事件？

尝试这个：

```
<script type="text/javascript">
  $(function(){
    $("#update_log_button").click(function(){
        $.post(
         url : "/hello/",
         dataType:"html",
         success: function(data, status, xhr){
            //do something with your data
        }
        );
        return false;
    });
 });
</script> 
```

如果按钮是动态创建的，那么您可能希望使用该`bind`函数将`click`事件处理程序附加到元素：

```
<script type="text/javascript">
   $(function(){
    $("#update_log_button").bind('click', function(){
        $.post(
         url : "/hello/",
         dataType:"html",
         success: function(data, status, xhr){
            //do something with your data
        }
        );

        return false;
    });
   });
</script> 
```

试试这个 URL 来包含 JQuery 库：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

# css - 正则表达式 - 空白

> ID：13733770
> 
> 赞同：-1
> 
> 时间：2012-12-05T22:37:21.990
> 
> 标签：css, regex

我有一个字符串出来：

```
<span class="abc"> test </span> styletext 
```

我想抓住`styletext`动态的部分并给它一些css样式。

我可以使用正则表达式选择空格后的整个部分并应用样式吗？如何定位空白之后的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:45:33.513

试试这个作为正则表达式：

```
^/span\s*(.*) 
```

*根据您使用的语言，您可能需要转义“\”。*

组中捕获的文本将是样式文本。

它“翻译”为：从字符串的开头（`^`）开始匹配文本“/span”，后跟任意数量的空白字符（`\s*`），然后是任意数量的任何类型的字符（`.*`）。括号告诉它捕获最后一部分以供以后使用。

# java - 一言以蔽之java

> ID：13733773
> 
> 赞同：-5
> 
> 时间：2012-12-05T22:37:34.940
> 
> 标签：java, string, words

所以我的问题是我有一个字符串，如果它是另一个字符串，我需要在该字符串中搜索。基本上我只想搜索“balama”中是否存在“ala”。我想过逐个字母搜索，但它很消耗，如果存在超过 2 或 3 个单词，我就做不到。有什么建议或字符串中有方法吗？我看到了 CompareTO 方法，但似乎不适用于字符串中的部分单词。只是让我开始的想法。感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:40:17.280

您正在寻找[**String.contains(Charsequence)**方法。](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

```
 System.out.println("balama".contains("ala"));// returns true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:44:18.507

`String`您正在寻找的方法称为[indexOf](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf)：

```
String testStr = "Vlad Adrian";

        String substr = "ad";

        int pstn = testStr.indexOf(substr);

        System.out.println(substr + " position in " + testStr + " is " + pstn); 
```

印刷

```
ad position in Vlad Adrian is 2 
```

如果未找到子字符串，则该方法返回 -1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:39:54.097

尝试在字符串中搜索子字符串。在您知道要查找的特定子字符串后，您可以专门搜索该子字符串。

此外，如果您使用的是 compareTO 方法，请务必实现适当的接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:40:29.903

我建议您检查正则表达式的使用。Sun 网站在[这里](http://docs.oracle.com/javase/tutorial/essential/regex/)有一个很棒的教程，特别是启动他们的测试工具——它应该提供答案

# objective-c - 如何更改 iOS 中的部分标题？

> ID：13733775
> 
> 赞同：0
> 
> 时间：2012-12-05T22:37:41.260
> 
> 标签：objective-c, ios, cocoa-touch

我目前正在编写的应用程序的一些背景。它是一个表格视图，当点击一个单元格时，它会加载一个本地 HTML 页面。

但是，现在我想实现节标题，一个完整和不完整的节标题。默认标题将是不完整的，并且在用户对表格视图进行交互后，单元格将移动以完成。如果更改是错误的，则需要一个选项来撤消更改。

我的第一个想法是在每个单元格中放置一个复选框，选中该框将移动单元格，取消选中会将其移回，但我看到 iOS 没有提供这样的功能，而是使用开关。

根据我的需要，开关不能很好地工作。所以我想问问其他人对此的想法以及如何实施这样的事情，如果有的话。

任何想法或帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:28:03.080

[您可以使用这种方法](https://stackoverflow.com/a/5368301/1730272)实现复选标记。基本上，您需要在单元格上添加一个按钮并更改其背景图像以显示选中和取消选中状态。您还可以考虑在 tableview 单元格中使用默认的附件复选标记功能。

例如：-

```
cell.accessoryType = UITableViewCellAccessoryCheckmark; 
```

和

```
cell.accessoryType = UITableViewCellAccessoryNone; 
```

为了[实现section header](https://stackoverflow.com/questions/10505708/how-to-set-the-uitableview-section-title-programmatically-iphone-ipad)，你可以使用`- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section`method或者`viewForHeaderInSection:`method。

您可以使用以下方法[将单元格从一个部分移动到另一个部分，](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/moveRowAtIndexPath:toIndexPath:)

```
- (void)moveRowAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath 
```

# c - write() 错误地址

> ID：13733776
> 
> 赞同：6
> 
> 时间：2012-12-05T22:37:42.350
> 
> 标签：c, linux

我正在尝试写出定义为的字符串**的字节大小**

`#define PATHA "/tmp/matrix_a"`

使用代码

```
rtn=write(data,(strlen(PATHA)*sizeof(char)),sizeof(int));
if(rtn < 0) 
    perror("Writing data_file 2 "); 
```

我回来`Writing data_file 2 : Bad address`

这到底是一个坏地址？数据文件描述符已打开，并在上述代码段之前和之后正确写入。要写入文件的数据必须`data`是原始的，而不是 ASCII。

我也尝试将字符串定义为具有相同问题的 char[]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:40:15.673

POSIX 的论点[`write()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)是：

```
#include <unistd.h>

ssize_t write(int fildes, const void *buf, size_t nbyte); 
```

那是一个：

*   文件描述符
*   缓冲
*   尺寸

您传递了两种尺寸，而不是地址和尺寸。

利用：

```
rtn = write(data, PATHA, sizeof(PATHA)-1); 
```

或者：

```
rtn = write(data, PATHA, strlen(PATHA)); 
```

* * *

如果您正在寻求将字符串的大小写为`int`，那么您需要一个`int`变量来传递给`write()`，如下所示：

```
int len = strlen(PATHA);

rtn = write(data, &len, sizeof(len)); 
```

请注意，您不能只使用`size_t`变量，除非您想编写`size_t`; 特别是在 64 位 Unix 系统上，`sizeof(size_t) != sizeof(int)`通常情况下，您需要确定要写入的大小。

您还需要注意，一些系统是小端的，而另一些是大端的，并且您在一种类型上使用这种机制编写的内容在另一种类型上是不可读的（在 I/O 之前或之后没有完成映射工作）操作）。您可能会选择忽略这个问题，或者您可能决定使用可移植格式（通常称为“网络顺序”，相当于大端），或者您可能决定定义您的代码使用相反的格式命令。如果您小心的话，您可以编写代码以便在所有平台上使用相同的逻辑（并且所有平台都会得到相同的答案）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T23:48:42.630

第二个参数`write()`是您要写入的字节的*地址，但您传递的是您要自己写入的字节。*为了获得地址，您必须将这些字节存储在变量中（您不能获取表达式结果的地址）。例如：

```
size_t patha_len = strlen(PATHA);

rtn = write(data, &patha_len, sizeof patha_len); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T22:40:11.270

第二个参数[`write()`](http://linux.die.net/man/2/write)是缓冲区，第三个参数是大小：

```
ssize_t write(int fd, const void *buf, size_t count); 
```

发布的代码传递了被解释为不正确地址的长度。编译器应该对此发出警告（不要忽略编译器警告并以最高级别的警告级别进行编译）。

改成：

```
rtn=write(data, PATHA, strlen(PATHA)); 
```

注意`sizeof(char)`保证是`1`这样的，所以它可以从大小计算中省略。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T23:00:50.483

`Bad address`错误已经得到解答。如果你想写一个字符串的大小，只需使用`printf`.

```
printf("Length: %d\n", strlen(data)); 
```

要么，或者您可以编写一个将整数转换为字符串并将其打印出来的函数......我更喜欢`printf`:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T22:45:57.287

```
rtn = write(data, PATHA, strlen(PATHA)); 
```

是你想要的，我想。争论应该是

1.  文件描述符（数据）
2.  源缓冲区（您的字符串常量 PATHA）
3.  从该缓冲区中提取的字节数（在相同的 PATHA 常量上使用 strlen() 测量）

此外，为了完整起见，您应该始终检查 rtn 您写了多少个字符。您不能保证您 write() 所有描述符类型上请求的所有字节。因此，有时您最终会以块的形式编写它，这取决于它所回答的数量，以及您知道自己尚未编写的数量。

# ajax - 将 Json 集合传递给 MVC3 控制器

> ID：13733779
> 
> 赞同：2
> 
> 时间：2012-12-05T22:37:48.203
> 
> 标签：ajax, json, asp.net-mvc-3

我正在尝试将 json“集合”发送到 MVC3 控制器。当传入的对象是一个数组之前，我已经相当容易地做到了这一点，**但是在这种情况下没有数组（除非嵌套的 {} 是一个'数组'？）**。

我也尝试了各种模型配置，例如：`FormCollection`、`Dictionary<string, FooBar[]>`和其他一些，但它始终为空。

我做错了什么导致花哨的 json-binder-thing 不起作用？

谢谢。

**构建 JSON 对象**

```
function getJson() {
    var foobars = {};

    foobars["FooBar1"] = { "Foo": "baz1", "Bar": 1 };
    foobars["FooBar2"] = { "Foo": "baz2", "Bar": 2 };
} 
```

**getJson() 产生这个 Json 对象**

```
{
    "FooBar1" : 
    {
        "Foo":"baz1", 
        "Bar":1
    },
    "FooBar2" : 
    {
        "Foo":"baz2", 
        "Bar":2
    }
} 
```

**楷模**

```
public class FooBarModel
{
    public FooBar[] FooBars { get; set; }
}

public class FooBar
{
    public string Foo { get; set; }
    public int Bar { get; set; }
} 
```

**控制器**

```
[HttpPost]
public void ParseFooBars(FooBarModel model)
{
    //model is null
} 
```

**jQuery的阿贾克斯**

```
$.ajax({
    url: "MyController/ParseFooBars",
    data: JSON.stringify(getJson()),
    type: "POST",
    dataType: "json",
    //contentType: "application/json; charset=utf-8",
    contentType: "application/json",
    success: function () {

    },
    error: function () {

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:49:08.923

您在 json 中有“Bar”，在模型中有“Baz”，是错字吗？
如果不是，这可能是映射失败的原因。

另一个原因是默认模型绑定，它可以与 IEnumerable<> 一起正常工作，但我不确定它是否适用于数组。您可能想为您的 FooBarModel 尝试自定义模型绑定器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:24:25.263

第一个问题 - 你确定你击中了正确的控制器吗？逐步使用调试器将确认这一点。由于没有注意到这一点，我已经被咬过很多次了。

其次，看起来您正在发送字典而不是数组。在您的 JSON 中，您有一组命名实例，但在您的控制器中，您期望的是一组未命名实例。如果您将 JSON 更改为如下所示，它可以工作吗？：

```
function getJson() {
    var foobars = [];

    foobars.push({ "Foo": "baz1", "Bar": 1 });
    foobars.push({ "Foo": "baz2", "Bar": 2 });
    return foobars;
} 
```

# c# - 如何分配默认类型以创建可选类型参数？

> ID：13733783
> 
> 赞同：0
> 
> 时间：2012-12-05T22:38:22.487
> 
> 标签：c#, types, parameters, default, optional

我可以解决这个问题，但我很好奇为什么它不起作用：

就像您可以为例程创建具有默认值的可选参数一样，例如下面的......

```
 public void SomeRoutine(string Title = "Missing")
    {
        // Do something with Title
    } 
```

.... 为什么不能将默认类型指定为可选参数？

以下示例给出了错误： *“'theType' 的默认参数必须是编译时间常数。”*

```
 public void SomeOtherRoutine(Type theType = typeof(MyClass))
    {
        // Do something based on theType
    } 
```

实际的应用程序试图提供枚举包含基类和各种派生类混合的集合的选项，并仅返回感兴趣的类类型：

```
 public IEnumerable<MyBaseClass> EnumerateWithOptions(Type optionalDerivedClass = typeof(MyBaseClass))
    {
        foreach (MyBaseClass thingy in MyCustomCollection())
        {
            if (thingy.GetType() == optionalDerivedClass)
            { yield return thingy; };
        }
    } 
```

显而易见的替代方法是重载例程以应用默认值，如下所示，但是由于不值得尝试描述的原因，它在我的应用程序中并不理想。

```
 public IEnumerable<MyBaseClass> EnumerateWithOptions()
    {
        return EnumerateWithOptions(typeof(MyBaseClass));
    }
    public IEnumerable<MyBaseClass> EnumerateWithOptions(Type optionalDerivedClass)
    {
        foreach (MyBaseClass thingy in MyCustomCollection())
        {
            if (thingy.GetType() == optionalDerivedClass)
            { yield return thingy; };
        }
    } 
```

为什么 typeof(MyClass) 不被视为编译时间常数的任何想法，或任何不同方法的想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:48:11.963

因此，您不能使用`typeof`或某些`Type`值，并且您不想手动创建重载，然后考虑提供`null`作为可选参数的默认值：

```
IEnumerable<MyBaseClass> EnumerateWithOptions(Type optionalDerivedClass = null)
{
    if (optionalDerivedClass == null)
        return MyCustomCollection();

    return MyCustomCollection()
        .Where(thingy => thingy.GetType() == optionalDerivedClass);
} 
```

如果您可以使用泛型参数而不是`Type`对象，那么您可以通过以下方式过滤集合`Enumerable.OfType<T>()`：

```
IEnumerable<MyBaseClass> result = MyCustomCollection().OfType<YourType>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:50:38.580

你可以做这样的事情

```
 public IEnumerable<MyBaseClass> EnumerateWithOptions<T>()
  {
      foreach (MyBaseClass thingy in MyCustomCollection())
      {
         if (thingy.GetType() == typeof(T))
         { yield return thingy; };
      }
  } 
```

用法

```
var list = EnumerateWithOptions<MyBaseClass>();
var list = EnumerateWithOptions<MyDerivedClass>(); 
```

# eclipse - Eclipse 中是否有类似 Vim 的“o”的命令？

> ID：13733784
> 
> 赞同：0
> 
> 时间：2012-12-05T22:38:27.807
> 
> 标签：eclipse, vim

我发现能够在当前行之后创建一个空的新行很有用。`End Enter`完全符合我的要求，但输入起来并不容易。更接近默认键盘行的东西，如 Ctrl+o，会好得多。我可以使用默认的 Eclipse 命令执行此操作，还是有任何插件提供此类功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:42:17.030

`Shift-Enter`在光标下方插入一行并在`Ctrl-Shift-Enter`上方插入。

# ruby-on-rails - 按天分页

> ID：13733786
> 
> 赞同：1
> 
> 时间：2012-12-05T22:38:35.577
> 
> 标签：ruby-on-rails, pagination, days

我有一个任务清单。每个口味都有一个 day:date 和一个 name:string。在索引中，我只想显示今天的任务。如果今天之后有任务，我还想对前几天进行分页，使用“上一个”链接和一个“下一个”链接。

在我的脑海里很简单，但是，我不知道该怎么做。我是 ruby​​-on-rails 的新手，我过得很艰难。

谢谢。

这就是我现在所拥有的。但它不起作用。

指数

```
<h1>Listing tasks</h1>
<% @tasks.each do |task| %>
    <%= task.name %>
   <%= task.day %>

<% end %>

<br />

<%= link_to 'New Task', new_task_path %>
<%= link_to 'Previous', tasks_url(:date => @date.prev_day) %>
<%= if @date.past? = link_to 'Next day', tasks_url(:date => @date.next_day) %> 
```

任务控制器

```
 def index

    @date = Date.parse(params[:day]) rescue Date.today
    @tasks = Task.where( Date.today )
    @total_tasks   = Task.count
    @current_tasks = @tasks.size
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @tasks }
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:53:24.847

您在此脚本中有一些小错误：

```
<%= link_to 'Previous', tasks_url(:date => @date.prev_day) %>
<%= if @date.past? = link_to 'Next day', tasks_url(:date => @date.next_day) %> 
```

在这里，您将日期参数传递给路线。

```
@date = Date.parse(params[:day]) rescue Date.today 
```

在这里，您使用的是`day`参数而不是`params[:date]`

```
@tasks = Task.where( Date.today ) 
```

这不是按日期查找任务的正确语法，并且您没有使用`@date`上述内容，而是使用今天的日期，将其替换为`Task.where(day: @date)`

我希望这能解决您的大部分问题，如果没有，请向我们提供有关您遇到的错误的更多详细信息。

# java - 当 XML 无效时如何在 java 中解析 XMP？

> ID：13733787
> 
> 赞同：0
> 
> 时间：2012-12-05T22:38:36.983
> 
> 标签：java, dom, xpath, javax.imageio, xmp

我正在使用 javax.imageio 从 PNG 图像中提取元数据。这工作正常。但是获取实际元数据的 getAsTree 方法返回无效的 XML。所以我不知道如何解析这个 XML 以获得某些元数据：

```
run:
Format name: javax_imageio_png_1.0
<javax_imageio_png_1.0>
    <IHDR width="256" height="256" bitDepth="8" colorType="RGBAlpha" compressionMethod="deflate" filterMethod="adaptive" interlaceMethod="none"/>
    <cHRM whitePointX="31269" whitePointY="32899" redX="63999" redY="33001" greenX="30000" greenY="60000" blueX="15000" blueY="5999"/>
    <gAMA value="45454"/>
    <iTXt>
        <iTXtEntry keyword="XML:com.adobe.xmp" compressionFlag="FALSE" compressionMethod="0" languageTag="" translatedKeyword="" text="<?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c061 64.140949, 2010/12/07-10:57:01        ">
 <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <rdf:Description rdf:about=""
    xmlns:xmp="http://ns.adobe.com/xap/1.0/"
    xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/"
    xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#"
    xmlns:lr="http://ns.adobe.com/lightroom/1.0/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmp:MetadataDate="2012-12-05T21:36:19+01:00"
   xmpMM:InstanceID="xmp.iid:EF7F11740720681192B08F682498C71D"
   xmpMM:DocumentID="xmp.did:FC7F11740720681192B0AE5890E66CAE"
   xmpMM:OriginalDocumentID="xmp.did:FC7F11740720681192B0AE5890E66CAE">
   <xmpMM:History>
    <rdf:Seq>
     <rdf:li
      stEvt:action="saved"
      stEvt:instanceID="xmp.iid:FC7F11740720681192B0AE5890E66CAE"
      stEvt:when="2012-12-04T00:23:34+01:00"
      stEvt:changed="/metadata"/>
     <rdf:li
      stEvt:action="saved"
      stEvt:instanceID="xmp.iid:EF7F11740720681192B08F682498C71D"
      stEvt:when="2012-12-05T21:36:19+01:00"
      stEvt:changed="/metadata"/>
    </rdf:Seq>
   </xmpMM:History>
   <lr:hierarchicalSubject>
    <rdf:Bag>
     <rdf:li>Component|Software</rdf:li>
     <rdf:li>Places|Paris</rdf:li>
     <rdf:li>Product|Christensen</rdf:li>
     <rdf:li>Product|Simba</rdf:li>
    </rdf:Bag>
   </lr:hierarchicalSubject>
   <dc:subject>
    <rdf:Bag>
     <rdf:li>Christensen</rdf:li>
     <rdf:li>Paris</rdf:li>
     <rdf:li>Simba</rdf:li>
     <rdf:li>Software</rdf:li>
    </rdf:Bag>
   </dc:subject>
  </rdf:Description>
 </rdf:RDF>
</x:xmpmeta>
<?xpacket end="r"?>"/>
    </iTXt>
    <pHYs pixelsPerUnitXAxis="2835" pixelsPerUnitYAxis="2835" unitSpecifier="meter"/>
</javax_imageio_png_1.0>
Format name: javax_imageio_1.0
<javax_imageio_1.0>
    <Chroma>
        <ColorSpaceType name="RGB"/>
        <NumChannels value="4"/>
        <Gamma value="0.45453998"/>
        <BlackIsZero value="TRUE"/>
    </Chroma>
    <Compression>
        <CompressionTypeName value="deflate"/>
        <Lossless value="TRUE"/>
        <NumProgressiveScans value="1"/>
    </Compression>
    <Data>
        <PlanarConfiguration value="PixelInterleaved"/>
        <SampleFormat value="UnsignedIntegral"/>
        <BitsPerSample value="8 8 8 8"/>
    </Data>
    <Dimension>
        <PixelAspectRatio value="1.0"/>
        <ImageOrientation value="Normal"/>
        <HorizontalPixelSize value="0.35273367"/>
        <VerticalPixelSize value="0.35273367"/>
    </Dimension>
    <Text>
        <TextEntry keyword="XML:com.adobe.xmp" value="<?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c061 64.140949, 2010/12/07-10:57:01        ">
 <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <rdf:Description rdf:about=""
    xmlns:xmp="http://ns.adobe.com/xap/1.0/"
    xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/"
    xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#"
    xmlns:lr="http://ns.adobe.com/lightroom/1.0/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmp:MetadataDate="2012-12-05T21:36:19+01:00"
   xmpMM:InstanceID="xmp.iid:EF7F11740720681192B08F682498C71D"
   xmpMM:DocumentID="xmp.did:FC7F11740720681192B0AE5890E66CAE"
   xmpMM:OriginalDocumentID="xmp.did:FC7F11740720681192B0AE5890E66CAE">
   <xmpMM:History>
    <rdf:Seq>
     <rdf:li
      stEvt:action="saved"
      stEvt:instanceID="xmp.iid:FC7F11740720681192B0AE5890E66CAE"
      stEvt:when="2012-12-04T00:23:34+01:00"
      stEvt:changed="/metadata"/>
     <rdf:li
      stEvt:action="saved"
      stEvt:instanceID="xmp.iid:EF7F11740720681192B08F682498C71D"
      stEvt:when="2012-12-05T21:36:19+01:00"
      stEvt:changed="/metadata"/>
    </rdf:Seq>
   </xmpMM:History>
   <lr:hierarchicalSubject>
    <rdf:Bag>
     <rdf:li>Component|Software</rdf:li>
     <rdf:li>Places|Paris</rdf:li>
     <rdf:li>Product|Christensen</rdf:li>
     <rdf:li>Product|Simba</rdf:li>
    </rdf:Bag>
   </lr:hierarchicalSubject>
   <dc:subject>
    <rdf:Bag>
     <rdf:li>Christensen</rdf:li>
     <rdf:li>Paris</rdf:li>
     <rdf:li>Simba</rdf:li>
     <rdf:li>Software</rdf:li>
    </rdf:Bag>
   </dc:subject>
  </rdf:Description>
 </rdf:RDF>
</x:xmpmeta>
<?xpacket end="r"?>" language="" compression="none"/>
    </Text>
    <Transparency>
        <Alpha value="nonpremultipled"/>
    </Transparency>
</javax_imageio_1.0>
BUILD SUCCESSFUL (total time: 3 seconds) 
```

无效的 XML 从 iTXtEntry 元素开始，该元素具有 xpacket 位并包含子元素，尽管它具有自闭合标记格式，而不是结束标记。因此，当我尝试使用 DOM 文档和 xpath 解析它时，我收到一条错误消息，指出该元素的内容中不能包含“>”。

我在 DocumentBuilderFactory 上禁用了 DTD 验证。这没有帮助。我觉得我正在使用正则表达式，但这似乎不对。为什么我首先从 imageio 中的 getAsTree 方法得到无效的 XML，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:51:16.137

您的问题是无意义的，因为`IIOMetaData.getAsTree()`返回一个 DOM Node 对象，它是 Node 树的根。这是 XML 的内存表示。它不是从任何地方解析的，所以它不能是无效的。*xml 文档字符串*可能无效，但这里没有正在解析的字符串。该`getAsTree`方法直接在内存中创建 XML。

问题在于您的*输出*产生了无效的 XML。无论从哪个序列化您的节点`getAsTree()`都是错误的。也就是说，它没有正确地转义`text`属性的值，它本身就是一个 XML 文档字符串。

下面是一个完整的示例，演示了如何获取图像元数据并序列化为（有效的）XML 字符串。

```
import java.io.*;
import java.util.*;

// for imageio metadata
import javax.imageio.*;
import javax.imageio.stream.*;
import javax.imageio.metadata.*;

// for xml handling
import org.w3c.dom.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.*;
import javax.xml.transform.stream.*;

public class imgmeta {
    // Very lazy exception handling
    // This is just a quick example
    public static void main(String[] args) throws Exception {
        String filename = args[0];

        File file = new File(filename);
        ImageInputStream imagestream = ImageIO.createImageInputStream(file);

        // get a reader which is able to read this file
        Iterator<ImageReader> readers = ImageIO.getImageReaders(imagestream);
        ImageReader reader = readers.next();

        // feed image to reader
        reader.setInput(imagestream, true);

        // get metadata of first image
        IIOMetadata metadata = reader.getImageMetadata(0);

        // get any metadata format name
        // (you should prefer the native one, but not all images have one)
        // String mdataname = metadata.getNativeMetadataFormatName(); // might be null
        String[] mdatanames = metadata.getMetadataFormatNames();

        String mdataname = mdatanames[0];

        Node metadatadom = metadata.getAsTree(mdataname);

        // metadatadom is now a DOM Node root of a DOM tree
        // representing metadata in the image
        // Since it's in-memory, it can't be "invalid"
        // because it's already been parsed

        // now let's serialize to an XML string
        // javax.xml.transform.Transformer takes xml sources
        // in one representation and transforms them to xml
        // in another representation
        // Representations include: DOM, JAXB, SAX, stream, etc
        DOMSource source = new DOMSource(metadatadom);

        StringWriter writer = new StringWriter();
        StreamResult result = new StreamResult(writer);

        Transformer transformer = TransformerFactory.newInstance().newTransformer();
        transformer.transform(source, result);

        // THIS is what you want:
        String metadata_in_xml = writer.toString();

        // now print it:
        System.out.print(metadata_in_xml);
    }
} 
```

这是使用我周围的图像运行的测试输出：

```
$ java imgtest testimage.png | xmllint --format -
<?xml version="1.0" encoding="UTF-8"?>
<javax_imageio_png_1.0>
  <IHDR width="149" height="237" bitDepth="8" colorType="RGBAlpha" compressionMethod="deflate" filterMethod="adaptive" interlaceMethod="none"/>
  <iTXt>
    <iTXtEntry keyword="XML:com.adobe.xmp" compressionFlag="0" compressionMethod="0" languageTag="" translatedKeyword="" text="&lt;?xpacket begin=&quot;?&quot; id=&quot;W5M0MpCehiHzreSzNTczkc9d&quot;?&gt; &lt;x:xmpmeta xmlns:x=&quot;adobe:ns:meta/&quot; x:xmptk=&quot;Adobe XMP Core 5.0-c061 64.140949, 2010/12/07-10:57:01        &quot;&gt; &lt;rdf:RDF xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;&gt; &lt;rdf:Description rdf:about=&quot;&quot; xmlns:xmp=&quot;http://ns.adobe.com/xap/1.0/&quot; xmlns:xmpMM=&quot;http://ns.adobe.com/xap/1.0/mm/&quot; xmlns:stRef=&quot;http://ns.adobe.com/xap/1.0/sType/ResourceRef#&quot; xmp:CreatorTool=&quot;Adobe Photoshop CS5.1 Macintosh&quot; xmpMM:InstanceID=&quot;xmp.iid:D281E43D34DC11E2BFE69DA1E5D17E5F&quot; xmpMM:DocumentID=&quot;xmp.did:D281E43E34DC11E2BFE69DA1E5D17E5F&quot;&gt; &lt;xmpMM:DerivedFrom stRef:instanceID=&quot;xmp.iid:D281E43B34DC11E2BFE69DA1E5D17E5F&quot; stRef:documentID=&quot;xmp.did:D281E43C34DC11E2BFE69DA1E5D17E5F&quot;/&gt; &lt;/rdf:Description&gt; &lt;/rdf:RDF&gt; &lt;/x:xmpmeta&gt; &lt;?xpacket end=&quot;r&quot;?&gt;"/>
  </iTXt>
  <tEXt>
    <tEXtEntry keyword="Software" value="Adobe ImageReady"/>
  </tEXt>
</javax_imageio_png_1.0> 
```

生成的 XML 有效：

```
$ java imgmeta testimage.png | xmllint --noout -
$ 
```

（无输出表示有效。）

注意`iTXtEntry`'s`text`属性的值是如何被转义的。如果要检索此属性内的数据，则需要检索字符串，然后将其解析*为*自己的 XML 文档以获取另一个 DOM（或其他）树。此属性：`keyword="XML:com.adobe.xmp"`表示该属性的值`text`是其中包含 XMP 数据的 XML 文档。

## 更新：解析 XMP 数据

下面是一些示例代码，演示了提取属性值并将其解析到 XML 和 DOM 树以及从 XML 和 DOM 树中解析出来。

```
public class XMPExample {
public static String transformXML(Node xml) throws Exception {
    StringWriter writer = new StringWriter();

    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.transform(new DOMSource(xml), new StreamResult(writer));

    return writer.toString();
}

public static Document transformXML(String xml) throws Exception {
    StringReader reader = new StringReader(xml);
    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Transformer transformer = TransformerFactory.newInstance().newTransformer();

    transformer.transform(new StreamSource(reader), new DOMResult(doc));
    return doc;
}

public static String getXMP(Element metadata_dom) throws Exception {
            // (Element) type because getElementsByTagName() method is required

    // There are many more robust ways of selecting nodes
    // (e.g. javax.xml.xpath), but this is for a simple example
    // that only uses the native DOM methods

    // This is very brittle because we're making assumptions about
    // the metadata_dom structure. There are two sources of brittleness:

    // 1\. The metadata format from `metadata.getMetadataFormatNames()`.
    //    You should probably settle on a standard one you know will
    //    exist, like 'javax_imageio_1.0'
    // 2\. How the image stores the metadata. Usually XMP data will
    //    be in a text field with keyword 'XML:com.adobe.xmp', but
    //    I don't know that this is *always* the case.

    // the code below assumes "javax_imageio_png_1.0" format
    NodeList iTXtEntries = metadata_dom.getElementsByTagName("iTXtEntry");
    Element iTXtEntry = null;
    Element entry = null;
    for (int i = 0; i < iTXtEntries.getLength(); i++) {
        entry = (Element) iTXtEntries.item(i);
        if (entry.getAttribute("keyword").equals("XML:com.adobe.xmp")) {
            iTXtEntry = entry;
            break;
        }
    }
    if (iTXtEntry == null) {
        return null;
    }

    String xmp_xml_doc = iTXtEntry.getAttribute("text");

    return xmp_xml_doc;

}
} 
```

```
// Use like so:
Node metadatanode = metadata.getAsTree(metadataname);

String xmp_xml = XMPExample.getXMP((Element) metadatanode);

// xmp_xml is now an xml document STRING
System.out.print(xmp_xml);

// If you want to parse it as an XML document, use an XML parser.
Document xmp_dom = XMPExample.transformXML(xmp_xml);

// ...and you can serialize it again when you are done.
String xmp_xml_roundtripped = XMPExample.transformXML(xmp_dom); 
```

# ruby-on-rails - heroku domain:add 在幕后真的做了什么？

> ID：13733790
> 
> 赞同：2
> 
> 时间：2012-12-05T22:38:49.603
> 
> 标签：ruby-on-rails, heroku, dns, cname

假设我正在运行我的应用程序

**sakana.herokuapp.com**

我拥有域名**www.fishywebsites.com**

如果我将我的 DNS CNAME**指向****fishywebsites**指向**sakana.herokuapp.com**，那是否足以使网站正常呈现？

做什么

```
heroku domains:add www.fishywebsites.com 
```

真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:10:15.970

Heroku 的[路由网格](https://devcenter.heroku.com/articles/http-routing)接受传入的 HTTP 请求，并在它在测功网格周围移动时将它们发送到适当的应用程序。为此，它依赖于 HTTP`Host:`标头，该标头对应于浏览器地址栏中的域名。

Heroku 有一个映射`*.herokuapp.com`到路由网格的通配符 DNS 条目。您可以连接到此空间内的任何名称，例如[http://0gtxygq7t0haalc4.herokuapp.com/](http://0gtxygq7t0haalc4.herokuapp.com/)，即使没有具有该名称的应用程序 - 您连接到路由网格，它根据`Host:`标头执行查找，并且确定没有合理的方法来路由此请求。

打破它：浏览器看到完整的 URL，并提取域名。然后它会进行 DNS 查找：

```
$ dig 0gtxygq7t0haalc4.herokuapp.com
; <<>> DiG 9.8.3-P1 <<>> 0gtxygq7t0haalc4.herokuapp.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 38567
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;0gtxygq7t0haalc4.herokuapp.com.    IN  A

;; ANSWER SECTION:
0gtxygq7t0haalc4.herokuapp.com. 60 IN   A   23.21.103.189

;; Query time: 128 msec
;; SERVER: 2001:470:20::2#53(2001:470:20::2)
;; WHEN: Wed Dec  5 17:04:36 2012
;; MSG SIZE  rcvd: 64 
```

这告诉浏览器连接到 23.21.103.189。`http`将其与协议（是你连接到它。

然后浏览器发送如下内容：

```
GET / HTTP/1.1
Host: 0gtxygq7t0haalc4.herokuapp.com
... 
```

这是 Heroku 路由网格找出您想要的站点的时候。

如果为`foo.bar.baz`to添加 CNAME 条目`*.herokuapp.com`，您将成功将该名称连接到路由网格。但是，在您之前`heroku domains:add foo.bar.baz`，Heroku 不知道哪个应用程序应该接收这些请求——它会看到`Host: foo.bar.baz`，并且不知道涉及哪个应用程序。DNS 查找在 HTTP 下的一层运行，您需要两者来路由您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:07:12.747

```
heroku domains:add www.fishywebsites.com 
```

告诉 heroku 到 www.fishywebsites.com 的每个请求都应该路由到您的应用程序（在本例中是 sakana 应用程序）。

所以不幸的是，将 www.fishywebsites.com 指向 heroku 是不够的。请记住，应用程序可以有任何名称，并且域不需要计算应用程序的名称，这对于 heroku 来说可能更快地根据用户设置更新其 dns 和路由系统，而不是猜测在哪里重定向每个请求。

无论如何，将域添加到 heroku 不会超过 1 分钟，没什么大不了的。

# php - Web 移动应用程序 Facebook OAuth

> ID：13733791
> 
> 赞同：1
> 
> 时间：2012-12-05T22:38:54.893
> 
> 标签：php, javascript, facebook-oauth, blackberry-10

我正在尝试通过此示例[https://github.com/blackberry/BB10-WebWorks-Samples/blob/master/Twitter-OAuth-1/README.md](https://github.com/blackberry/BB10-WebWorks-Samples/blob/master/Twitter-OAuth-1/README.md)

虽然，我不断收到以下错误：getAuthorization 中的错误：ReferenceError：找不到变量：facebookOptions

这是我的 javascript OAuth.js 代码

* * *

```
function initApp() {
    try {
        // facebook oauth setup
        facebookOptions = {
            clientId: '############',
            clientSecret: '######################',

            // we use a php script on a server because facebook doesn't allow for local:/// callbacks
            // at this time.  the php simply redirects us back to 'local:///index.html'
            redirectUri: 'http://###########.com/redirect.php'
        };

        // here we check for query strings in window.location when the app loads.  This is because facebook is calling back
        // to our callbackUrl. When the app initializes, and there is a query string, it checks if the user
        // authorized the app or not
        var query = window.location.search;
        authCode = null;
        authCode = query.split('code=');
        authCode = authCode[1] || null;

        // we've got an auth code, let's exchange that for an access token
        if (authCode !== null) {
            getAccessToken();
        }
    } catch (e) {
        alert('Error in initApp: ' + e);
    }
}

// first, we get the user to authorize with the service and allow our app access
function getAuthorization() {
    try {
        showMessage('Contacting Facebook...');
        window.location.replace('https://www.facebook.com/dialog/oauth?client_id=' + facebookOptions.clientId + '&redirect_uri=' + facebookOptions.redirectUri + '&scope=publish_stream,read_stream');
    } catch (e) {
        alert('Error in getAuthorization: ' + e);
    }
}

// exchange our 'access code' for an 'access_token'
function getAccessToken() {
    try {
        var url = 'https://graph.facebook.com/oauth/access_token?client_id=' + facebookOptions.clientId + '&redirect_uri=' + facebookOptions.redirectUri + '&client_secret=' + facebookOptions.clientSecret + '&code=' + authCode;

        $.ajax({
            type: 'GET',
            url: url,
            success: function(data) {
                var response = data;

                // parse 'access_token' from the response
                response = response.split('&');
                accessToken = response[0].split('=');
                accessToken = accessToken[1];

                // get authenticated users' info for future use
                getUserInfo();
            },

            error: function(data) {
                alert('Error getting access_token: ' + data.responseText);
                return false;
            }
        });
    } catch (e) {
        alert('Error in getAccessToken: ' + e);
    }
}

// get users info (we're grabbing their full name for this sample)
function getUserInfo() {
    try {
        var url = 'https://graph.facebook.com/me?access_token=' + accessToken;

        $.ajax({
            type: 'GET',
            url: url,
            dataType: 'json',
            success: function(data) {

                // data.name = users full name
                showMessage('Hello ' + data.name + '!');
                $('#buttonSetup').hide();
                $('#afterAuth').show();
            },

            error: function(data) {
                alert('Error getting users info: ' + data.responseText);
                return false;
            }
        });
    } catch (e) {
        alert('Error in getUserInfo: ' + e);
    }
}

// update the users status
function postToService() {
    try {
        var status = $('#inputBox').val();
        if (status === '' || status === 'enter your status...') {
            showMessage('You didn\'t enter anything to post :(');
            return false;

        } else {
            showMessage('Updating status...');
            var url = 'https://graph.facebook.com/me/feed?message=' + status + '&access_token=' + accessToken;

            $.ajax({
                type: 'POST',
                url: url,
                dataType: 'json',
                success: function(data) {
                    showMessage('Status updated!!');
                    $('#inputBox').val('enter your status...');

                    // display the updated news feed to the user
                    setTimeout(function() {
                        getFeed();
                    }, 200);
                },

                error: function(data) {
                    alert('Error updating status: ' + data.responseText);
                    return false;
                }
            });
        }
    } catch (e) {
        alert('Error in postToService: ' + e);
    }
}

// get users news feed
function getFeed() {
    try {
        showMessage('Getting news feed...');
        var url = 'https://graph.facebook.com/me/feed?access_token=' + accessToken;

        $.ajax({
            type: 'GET',
            url: url,
            dataType: 'json',
            success: function(data) {
                showMessage('Your news feed...');
                var feed = data.data;

                // clear the content div, and prepare to add new data to it
                $('#content p').remove();

                // show the last 4 items from the users news feed
                // note: there are several objects that could be posted in a news feed. for simplicity
                // we're only showing objects with a 'story' attribute
                for (var i = 0; $('#content p').size() < 4; i++) {
                    if (typeof feed[i].story !== 'undefined') {
                        $('#content').append('<p>' + feed[i].story + '</p>');
                    }
                }

                // display the feed, after it's been parsed
                $('#content').fadeIn();
            },

            error: function(data) {
                alert('Error loading news feed: ' + data.responseText);
                return false;
            }
        });
    } catch (e) {
        alert('Error in getFeed: ' + e);
    }
}

// helper function for displaying a message to the user
function showMessage(msg) {
    try {
        if (!$('#message').is(':visible')) {
            $('#message').show();
        }
        setTimeout(function() {
            $('#message').html(msg);
        }, 500);
        setTimeout(function() {
            $('#message').fadeOut(500, function() {
                $('#message').html('');
            });
        }, 8000);
    } catch (e) {
        alert('Error in showMessage: ' + e);
    }
} 
```

* * *

我的网络服务器上的 php 重定向文件是这样的：

```
<?php
    $queryString =  $_SERVER['QUERY_STRING'];
    header("location: local:///index.html" . $queryString);
?> 
```

我不确定问题出在 oauth.js 中的授权还是在本地重定向 php 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:52:56.697

我刚刚更新了所有 OAuth 示例以在最新的 SDK 中工作。

从以下网址获取更新的示例：[https ://github.com/blackberry/BB10-WebWorks-Samples](https://github.com/blackberry/BB10-WebWorks-Samples)

问题是 initApp 函数没有被执行。这是因为 webworksready 事件没有被触发。现在示例已经更新以反映包含 webworks.js 文件的新方式，这应该不再是问题。

# sql - Access中的嵌套内部连接和子选择

> ID：13733803
> 
> 赞同：2
> 
> 时间：2012-12-05T22:39:30.650
> 
> 标签：sql, ms-access-2010

我在 Access 中有这个 SQL，但它给了我一个错误。我试过移动括号，但没有解决问题。

```
SELECT
    a.title, a.id, a.name, l.user, l.time 
FROM
    Reports a
INNER JOIN (
    AuditLog AS l ON a.id = l.id
INNER JOIN (
(
    SELECT min(time) Mintime, id
    from AuditLog
    GROUP BY id
) AS t )
  ON l.id = t.id
  AND l.time = t.mintime )
WHERE
    a.NAME LIKE 'something*'
    AND a.ACTIVE='Y' 
```

如何解决我遇到的语法错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:02:59.087

您的这部分查询肯定会产生问题：

```
SELECT min(time) Mintime, id 
```

如果您打算将字段表达式别名`min(time)`为`Mintime`，则*必须*使用`AS`关键字。您不需要`AS`表别名，但您需要字段别名：

```
SELECT min(time) AS Mintime, id 
```

它似乎`time`是您`AuditLog`表中的一个字段。在这种情况下，将其名称括在方括号中以将其与`Time()`函数区分开来：

```
SELECT min([time]) AS Mintime, id 
```

至于括号，如果可能，您应该使用 Access 的查询设计器来设置您的联接。它将保证您的查询包含数据库引擎要求的括号并正确定位它们。

如果这不是一个选项，试试这个未经测试的版本：

```
SELECT
    a.title, a.id, a.name, l.user, l.time 
FROM
    (Reports a
    INNER JOIN AuditLog AS l
    ON a.id = l.id)
    INNER JOIN
        (
            SELECT min([time]) AS Mintime, id
            from AuditLog
            GROUP BY id
        ) AS t
    ON
            l.id = t.id
        AND l.time = t.mintime
WHERE
        a.NAME LIKE 'something*'
    AND a.ACTIVE='Y' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:49:51.923

除非你`or`有条件，否则你不应该需要括号。在 Access 中试试这个，看看它是否有效：

```
SELECT
    a.title, a.id, a.name, l.user, l.time 
FROM
    (Reports a INNER JOIN AuditLog AS l ON a.id = l.id) INNER JOIN
    (
        SELECT min(time) as Mintime, id
        from AuditLog
        GROUP BY id
    ) AS t ON l.id = t.id AND l.time = t.mintime
WHERE
    a.NAME LIKE 'something*'
    AND a.ACTIVE='Y' 
```

不过，我还没有在 Access 中进行子查询，所以看看它是否在子查询的左括号旁边报告错误会很有趣。

# php - 如何使用正则表达式提取部分路径和结束文件名？

> ID：13733810
> 
> 赞同：-1
> 
> 时间：2012-12-05T22:39:42.173
> 
> 标签：php, regex

> **可能重复：**
> [如何在 PHP 中提取文件扩展名？](https://stackoverflow.com/questions/173868/how-to-extract-a-file-extension-in-php)

我需要使用插件名称和它使用的语言文件按以下顺序构建一个关联数组：

```
/whatever/path/length/public_html/wp-content/plugins/adminimize/languages/adminimize-en_US.mo
/whatever/path/length/public_html/wp-content/plugins/audio-tube/lang/atp-en_US.mo
/whatever/path/length/public_html/wp-content/languages/en_US.mo
/whatever/path/length/public_html/wp-content/themes/twentyeleven/languages/en_US.mo 
```

这些是 WordPress 正在加载的语言文件。
它们都在内部`/wp-content/`，但具有可变的服务器路径。
我只在插件文件夹中寻找那些，获取插件文件夹名称和文件名。

PHP中的假设案例，其中**`reg_extract_*`**函数是我缺少的部分：

```
$plugins = array();

foreach( $big_array as $item ) 
{
    $folder = reg_extract_folder( $item );
    if( 'plugin' == $folder ) 
    {
        // "folder-name-after-plugins-folder"
        $plugin_name = reg_extract_pname( $item ); 

        // "ending-mo-file.mo"
        $file_name = reg_extract_fname( $item ); 

        $plugins[] = array( 'name' => $plugin_name, 'file' => $file_name );
    }
} 
```

[更新]

好的，所以我错过了一个相当基本的功能，`pathinfo`...：/

检测是否`/plugins/`包含在数组中没有问题。

但是插件文件夹名称呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:46:38.053

此示例将获取文件夹中的所有文件，并显示有关文件路径的所有信息。

```
<?php

foreach(glob("/path/tofiles/*.*") as $file){
    $info = pathinfo($file);
    echo $info['dirname'], "\n";
    echo $info['basename'], "\n";
    echo $info['extension'], "\n";
    echo $info['filename'], "\n"; // since PHP 5.2.0
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:56:09.013

```
$path = '/whatever/path/length/public_html/wp-content/plugins/adminimize/languages/adminimize-en_US.mo';
preg_match('/plugins\/([^\/]+?)\/(?:[^\/]+\/)?(.+)/', $path, $matches);
$dir = $matches[1];
$filename = $matches[2]; 
```

这会将 adminize 存储在 $dir 和 adminimize-en_US.mo 中 $filename

# android - Android：两个动画一起不同的持续时间

> ID：13733811
> 
> 赞同：1
> 
> 时间：2012-12-05T22:39:43.800
> 
> 标签：android, animation, duration

我有两个不同持续时间的动画，如下所示：
动画 1：

```
 TranslateAnimation trans1 = new TranslateAnimation(0, 0, 0, 500);  
    trans1.setStartOffset(0);  
    trans1.setDuration(5000);  
    trans1.setFillAfter(true); 
```

动画 2：

```
 TranslateAnimation trans2 = new TranslateAnimation(0, -100, -200, -200);  
    trans2.setDuration(200);  
    trans2.setRepeatCount(25);  
    trans2.setFillAfter(true); 
```

如您所见，这些动画具有不同的持续时间。我想在一次 Anim1（持续时间 5000）动画中从 Y：0 到 500 循环 25 次动画 Anim2（持续时间 200）。

我尝试过使用 AnimationSet 和 addAnimation 但它不想工作。你能给我一些提示，我该如何解决这个问题？

我的代码：

```
AnimationSet rootSet = new AnimationSet(true);   
rootSet.setInterpolator(new AccelerateInterpolator());  
rootSet.setRepeatMode(Animation.INFINITE);  
rootSet.setRepeatCount(200);  
rootSet.setDuration(5000);  
rootSet.setFillAfter(true);  

    TranslateAnimation trans1 = new TranslateAnimation(0, 0, 0, 500);  
    trans1.setStartOffset(0);  
    trans1.setDuration(5000);  
    trans1.setFillAfter(true);  

rootSet.addAnimation(trans1);

AnimationSet rootSet2 = new AnimationSet(true);  
rootSet2.setInterpolator(new AccelerateInterpolator());  
rootSet2.setRepeatMode(Animation.INFINITE);  
rootSet2.setRepeatCount(200);  
rootSet2.setDuration(200);  

    TranslateAnimation trans2 = new TranslateAnimation(0, -100, -200, -200);  
    trans2.setDuration(200);
    trans2.setRepeatCount(25);
    trans2.setFillAfter(true);

rootSet2.addAnimation(trans2);  

rootSet.addAnimation(rootSet2);  

iv.startAnimation(rootSet); 
```

**编辑：**
当我只播放 trans2 动画时，它会按照我的意愿重复 25 次（以水平方式）。另外我希望这个动画以垂直方式（trans1）动画（整个水平动画不仅是imageview）。

我希望这个描述会更清楚。

当我在一个 AnimationSet 中添加这两个动画时，第一个动画根本不起作用，并且 imageview（不是动画）被线性转换为 -200,500。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:35:20.987

现在我知道你想做什么了。你可能最好做多个动画 - 每个“线”一个。添加一个[`AnimationListener`](https://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)知道上一个动画何时结束（`onAnimationEnd`回调），跳下一行并再次从右到左。

它们基本上都是相同的，只是每个动画的`fromYDelta`和`toYDelta`值都会改变。

# windows - 在 InstallShield 安装程序中运行 sc 命令

> ID：13733812
> 
> 赞同：1
> 
> 时间：2012-12-05T22:39:52.277
> 
> 标签：windows, installation, installshield

我有一个 sc 命令，我想在“注册产品后”自定义操作中使用 Visual Studio 2012 InstallShield 版本运行该命令。我为执行操作选择了“New Exe”。我为源位置选择了“目标计算机上存在文件”。对于“文件位置”，我输入了“[SystemFolder]”。对于“文件名和命令行”，我大约有，

> sc.exe create ABC binPath= "[INSTALLDIR]abc.exe" DisplayName= "ABC Service" start= auto

. 当我运行安装程序时，它失败了。我不知道原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:54:39.230

过去也有类似的问题。以另一种方式解决，CA类型：`Deferred execution in system context`，工作目录`SystemFolder`：

```
cmd.exe /c "[WindowsFolder]system32\sc.exe delete [SERVICENAME]" 
```

# asp.net-mvc-4 - 在 Asp.Net MVC 4 应用程序中在哪里初始化 MassTransit？

> ID：13733815
> 
> 赞同：4
> 
> 时间：2012-12-05T22:39:53.777
> 
> 标签：asp.net-mvc-4, queue, message-queue, masstransit

我有一个包含 3 个项目的简单解决方案：

1.  Asp.Net MVC4 Web 应用程序 - 主网站
2.  控制台应用程序 - 任务运行器
3.  控制台应用程序 - 任务运行器

我希望使用 MassTrasnsit 作为队列，以便网站上的操作（如发送电子邮件）不会阻止网站，而是发布到队列并由任务运行者处理。

我的问题是：**我应该在哪里初始化队列、Web 应用程序、任务运行器之一或为此创建一个单独的控制台应用程序？**

附言。在生产服务器上运行时，控制台应用程序将是 Windows 服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:23:32.857

由于创建队列是一次性操作，并且您可能想要调整默认权限，因此最好使用单独的控制台应用程序提前创建队列。请注意，发布者（Web 应用程序）和消费者（任务运行者）每个都需要一个队列，如果他们在不同的服务器上，那么您需要在每个服务器上创建队列。

# shell - 在 Bourne shell 中设置 GEM_HOME

> ID：13733819
> 
> 赞同：0
> 
> 时间：2012-12-05T22:40:09.760
> 
> 标签：shell

我正在尝试使用名为 Virtualmin 的接口在服务器上执行启动脚本（以启动瘦服务器）。我可以通过 PuTTY 使用 bash 毫无问题地执行命令。但是，我必须使用 Virtualmin，以便在启动时执行命令，并且我遇到了一些问题，我认为这是由于 Virtualmin 没有可用的环境变量造成的。Virtualmin 使用 Bourne shell，我正在尝试设置 GEM_HOME 但它不起作用。

我得到的错误如下：

```
/sbin/sh: GEM_HOME=/users/home/dquirk/gems: not found 
```

这是我试图发送的命令。. . 我认为我用来设置 GEM_HOME 的符号有问题：

```
GEM_HOME=/users/home/dquirk/gems
export GEM_HOME
/users/home/dquirk/gems/bin/thin start -c /users/home/dquirk/domains/quirkeweb.net/rails/clee -p 10671 -d -e production -a 127.0.0.1 -P /users/home/dquirk/var/run/thin-10671.pid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:32:18.183

弄清楚了 。. . 这是在共享服务器上，用于添加启动操作命令的 Virtualmin 界面位于 Bourne shell 的上下文中，用户无法更改任何环境变量。我创建了一个 bash 脚本，该脚本更改了所需的变量并执行了 Thin start 命令，然后放置了一个 bash 命令来加载该脚本作为启动操作命令，并且工作正常。

# ios - iOS：EKEventStoreChangedNotification。什么时候寄出？

> ID：13733823
> 
> 赞同：2
> 
> 时间：2012-12-05T22:40:18.967
> 
> 标签：ios, calendar, eventkit

我有一个显示日历事件的应用程序。我希望它在 iCloud 中用户的日历发生更改时更新。

文档声称 EKEventStoreChangedNotification 在添加/删除/修改事件时发送。我有时发现确实如此。但其他时候，根本不会发送任何通知。我每三分钟调用一次 [EKEventStore refreshSourcesIfNecessary]，但即使这样也不会收到更改。我可以可靠地在我的应用程序中检测到更改的唯一方法是切换到日历应用程序，等待事件更改出现在那里（通常在几秒钟内），然后返回我的应用程序......就在那里。

还有一件事：我为我的 iCloud 日历打开了“推送”通知。

知道这里发生了什么吗？为什么不一致？我怎样才能使它保持一致？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:16:44.973

不确定它是否有帮助，但我也遇到了这个问题（假设我可以依赖 EKEventStoreChangedNotification）...使用您采用的方法（调用`[EKEventStore refreshSourcesIfNecessary]`tho，我确实得到了一致的结果，在调用该方法后的片刻，我收到更改通知。似乎一直有效。

# jquery - 图像蒙太奇 + 图像缩放器

> ID：13733826
> 
> 赞同：2
> 
> 时间：2012-12-05T22:40:31.600
> 
> 标签：jquery, jquery-plugins

我正在尝试结合两个 jQuery 插件以使它们一起工作[http://tympanus.net/codrops/2011/08/30/automatic-image-montage/](http://tympanus.net/codrops/2011/08/30/automatic-image-montage/)和[http://www.dynamicdrive.com/dynamicindex4/featuredzoomer .htm](http://www.dynamicdrive.com/dynamicindex4/featuredzoomer.htm)

第一个自动制作蒙太奇并向 img 标签添加一些内联样式。例如。`style="display: inline-block; width: 333px; height: 234px; left: 0px; top: 0px;"`

在那之后，第二个是使用**宽度**和**高度**属性。唯一的问题是当 fillLastRow 选项为真时，蒙太奇脚本正在“填充”最后一行。因此，它的内联样式有点混乱。 `style=display: inline-block; width: 1663px; height: 1075px; left: -1px; top: -443.5px;`

所以缩放器脚本使用“宽度：1663px；高度：1075px”值并使最后一个图像的区域太大（鼠标悬停区域），这会阻止其他一些图像。

有没有办法以某种方式“欺骗”缩放器脚本以使其使用最后一张图像的实际可见宽度和高度？换句话说，如何获得图像的可见宽度和高度？

# node.js - 即使配置 express.static，Express.js 也无法访问静态文件

> ID：13733828
> 
> 赞同：1
> 
> 时间：2012-12-05T22:40:42.633
> 
> 标签：node.js, express

我试过 localhost:3000/index.html （我放静态页面的地方）， localhost:3000/javascripts/dio.js （我放 js 的地方） localhost:3000/images/dio1.jpg （我放图片的地方），全部无法访问。为什么？怎么了？

我的 app.js 定义：

```
var express = require('express')
var app=express()
app.bcrypt = require('bcrypt')
app.im=require('imagemagick')
app.fs=require('fs')
app.application_root = __dirname
app.path = require("path")
app.mongoose = require("mongoose")

var config=require('./config.js')(app,express)

var models = require('./models/models.js')(app.mongoose)
models.UserModel = models.UserModel
models.CommentModel = models.CommentModel
models.ItemModel = models.ItemModel

require('./routes')(app, models)

app.listen(3000);
console.log("Listening on port 3000") 
```

这是我的 config.js 定义：

```
module.exports = function(app, express, mongoose){
    var config=this

    app.configure(function (){
        app.set('views',__dirname+'/views')
        app.set('view engine','jade')
        app.set('view engine', {layout:true})

        app.use(express.bodyParser())
        app.use(express.methodOverride())
        app.use(express.cookieParser())
        app.use(express.session({secret: 'topsecret',store: new express.session.MemoryStore}))
        app.use(app.router)
        app.use(express.static(app.path.join(app.application_root+"public")))
        app.use(express.errorHandler({dumpExceptions:true,showStack:true}))
        app.use(express.bodyParser({keepExtensions: true, uploadDir:"./public/uploads"}))
    })

    /*DB part:*/
    app.mongoose.connect('mongodb://localhost/dio_database')

    return config
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:53:52.037

试试这种风格：

```
app.use('/public', express.static(__dirname + "/public")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:49:32.423

而不是连接*和*加入：

```
 app.path.join(app.application_root+"public") 
```

每个部分都应作为单独的参数传递给[`path.join`](http://nodejs.org/api/path.html#path_path_join_path1_path2)：

```
 app.path.join(app.application_root, "public") 
```

或者，如果您希望连接，[`__dirname`](http://nodejs.org/api/globals.html#globals_dirname)则 不会有尾部斜杠`application_root`，因此您需要添加一个：

```
 app.application_root + '/public' 
```

# c++ - 对于一个看起来应该“正常工作”的程序，我遇到了一个奇怪的错误。

> ID：13733829
> 
> 赞同：1
> 
> 时间：2012-12-05T22:40:44.327
> 
> 标签：c++, arrays, pointers, 2d

我向大家展示我正在为我的大学编程课程开发的一个程序。在它完全满足我的作业要求之前我还有一些路要走，但是我已经得到了一个没有错误的程序的基本草稿（据说）并且它似乎可以运行......但是它突然把我踢进了 Xcode 的调试器并给出我：

```
Thread 1: EXC_BAD_ACCESS(code=2, address=0x7fff95c1e5f5) 
```

这是命令行输出，直到它把我踢出去：

```
 -----------------------
    Quarterly_sales_taxator
    -----------------------

    How many company divisions will we be dealing with?  2

    Am I correct in assuming that there are 4 sales quarters?    yes

    Please enter the sales Company Division #1 brought in for Sales Quarter #1   20
    (lldb) 
```

这是我的代码：

```
 //
    //  quarterly_sales_taxator.cpp
    //  Ch. 7 program #7
    //
    //  Created by John Doe on 11/27/12.
    //

    #include <iostream>
    #include <iomanip>
    #include <string>
    #include <sstream>
    #include <cctype>
    using namespace std;

    void read_company_divisions_and_sales_quarters(double **, int, int);
        //void write_company_divisions_and_sales_quarters_to_array(double **, int, int);    // This will be used later on to read data from a file.
    void display_quarterly_sales_array(double **, int, int);

    string temp;    // A global temporary placeholder variable; I use this several times.

    int main()
    {
        int COMPANY_DIVISIONS,
            SALES_QUARTERS = 4;

        double **quarterly_sales_form;

        cout << "\n\n-----------------------\nQuarterly_sales_taxator\n-----------------------\n\n";

        cout << "\nHow many company divisions will we be dealing with?  ";
        getline(cin, temp);
        stringstream(temp)>>COMPANY_DIVISIONS;

        while (COMPANY_DIVISIONS < 1 || isdigit(COMPANY_DIVISIONS == false))
        {
            cout << "\n\n------"
                 << "\nError:"
                 << "\n------"
                 << "\n\nYou have entered an invalid choice."
                 << "\nPlease type a number greater than zero.    ";

            getline(cin, temp);
            stringstream(temp)>>COMPANY_DIVISIONS;
        }

        cout << "\n\nAm I correct in assuming that there are 4 sales quarters?    ";
        getline(cin, temp);

                // Convert to uppercase.
            for (int count = 0; count < temp.length(); count ++)
            {
                temp[count] = toupper(temp[count]);
            }

            if (temp == "NO" || temp == "NOPE" || temp == "INCORRECT" || temp == "YOU ARE NOT" || temp == "YOU ARE INCORRECT" || temp == "NEGATIVE" || temp == "NEGATORY")
            {
                cout << "\nOk, then how many sales quarters are we dealing with?    ";
                getline(cin, temp);
                stringstream(temp)>>SALES_QUARTERS;
            }

        cout << endl << endl;

            // This sets up the 2d array.
        quarterly_sales_form = new double *[COMPANY_DIVISIONS];
        for (int count = 0; count < COMPANY_DIVISIONS; count ++)
        {   quarterly_sales_form[COMPANY_DIVISIONS] = new double [SALES_QUARTERS];  }

        read_company_divisions_and_sales_quarters(quarterly_sales_form, COMPANY_DIVISIONS, SALES_QUARTERS);
            //  write_company_divisions_and_sales_quarters_to_array(quarterly_sales_form, COMPANY_DIVISIONS, SALES_QUARTERS);   // I'll add this feature later.

        cout << "\n\nHere's what you entered:\n\n";
        display_quarterly_sales_array(quarterly_sales_form, COMPANY_DIVISIONS, SALES_QUARTERS);

            // Since we used a series of pointers, we need to free the allocated space back up.
        for (int count = 0; count < COMPANY_DIVISIONS; count ++)
        {   delete[] quarterly_sales_form[COMPANY_DIVISIONS];  }
        delete[] quarterly_sales_form;

        return 0;
    }

    /*############################################
     # read_company_divisions_and_sales_quarters #
     ############################################*/
    void read_company_divisions_and_sales_quarters(double **array, int DIVISIONS, int QUARTERS)
    {

            for (int count = 0; count < QUARTERS; count++)
            {

                for (int index = 0; index < DIVISIONS; index++)
                {
                    cout << "\nPlease enter the sales Company Division #" << count+1 << " brought in for Sales Quarter #" << index+1 << "   ";
                    getline(cin, temp);
                    stringstream(temp) >> array[count][index];
                }
            }
    }

    /*################################
     # display_quarterly_sales_array #
     #################################*/
    void display_quarterly_sales_array(double **array, int DIVISIONS, int QUARTERS)
    {
        for (int count = 0; count < DIVISIONS; count++)
        {
            cout << "\nCompany division #" << count+1 << ":\n";
            for (int index = 0; index < QUARTERS; index++)
            {    cout << array[count][index] << ", ";    }
        }

    } 
```

可以请一些善良的灵魂告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:44:50.330

```
 {   quarterly_sales_form[COMPANY_DIVISIONS] = new double [SALES_QUARTERS];  } 
```

在这一行中，`COMPANY_DIVISIONS`应该是`count`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:53:05.003

除了Dan Hulme所说的，似乎这条线

```
stringstream(temp) >> array[count][index]; 
```

真的应该

```
std::istringstream(temp) >> std::skipws >> array[index][count]; 
```

除了使用`std::istringstream`而不是`std::stringstream`确保手头有一个左值（在读取的类型变得更有趣之前，这并不是严格需要的）之外，这还反转了索引：一遍又一遍地`index`运行。`COMPANY_DIVISIONS``count``SALES_QUARTERS`

当然，真正的问题是：谁分发这样的作业？指针操作和分配最好留给低级库编写者。这是 C++ 而不是 C：我们可以而且应该使用抽象。确保代码异常安全是一项重大挑战，教人们如何编写损坏的（例如异常不安全的）代码是没有意义的。

# sql - GROUP BY 在日期之间计算唯一用户的回报超过预期

> ID：13733838
> 
> 赞同：4
> 
> 时间：2012-12-05T22:41:21.113
> 
> 标签：sql

使用[Stack Exchange 数据资源管理器](https://data.stackexchange.com/ "数据.SE")，我试图弄清楚在 2012 年 10 月 19 日至 2012 年 11 月 9 日期间有多少不同的用户提出了问题。我对此进行了查询：

```
SELECT Count(*)
FROM Posts
WHERE (CreationDate BETWEEN '2012-10-19' AND '2012-11-09') AND PostTypeId = 1
GROUP BY OwnerUserId 
```

但是，这会在 Super User 上返回 3,071 行（我不会在 Stack Overflow 上尝试）。这似乎太高了。我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T22:47:16.447

如果您只想获得不同用户的简单计数，可以使用如下`DISTINCT`关键字：

```
SELECT Count(DISTINCT OwnerUserID)
FROM Posts
WHERE (CreationDate BETWEEN '2012-10-19' AND '2012-11-09') AND PostTypeId = 1 
```

distinct 关键字将确保您只计算每个 OwnerUserID 一次 - 原始问题将仅返回每个不同用户提出的问题数（如果没有额外的上下文，这将毫无用处）。

实际上，此查询返回原始查询中返回的行数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:45:54.073

有问题的 SQL 返回每个组的计数—— group by 告诉 SQL 为每个组输出一行，这不是（我理解的）你想要的。你想要一个不同的用户 id 的计数

```
select count(distinct OwnerUserId)
from Posts
WHERE (CreationDate BETWEEN '2012-10-19' AND '2012-11-09') AND PostTypeId = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T22:49:21.050

*如果您想要的只是不同*用户的总数，那么您可以使用`distnct`关键字作为您的一部分，`Count`然后省略`GROUP BY`

例如

```
SELECT Count(DISTINCT OwnerUserId)
FROM Posts
WHERE (CreationDate BETWEEN '2012-10-19' AND '2012-11-09') AND PostTypeId = 1 
```

# import - Google Drive：上传时自动转换文件？

> ID：13733840
> 
> 赞同：1
> 
> 时间：2012-12-05T22:41:26.420
> 
> 标签：import, google-drive-api, file-conversion

是否可以让 Google Drive**自动**将上传的文档转换为原生格式？

我知道它适用于**手动**上传（即 Google Drive 可以自动转换您通过网站上传的文件），但我想避免手动上传每个文件。

我更喜欢使用 API，或者更好的是，将文件转储到我的`~/Google Drive`文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:58:21.843

使用 API，您可以将`convert=true`参数传递给[`files.insert`](https://developers.google.com/drive/v2/reference/files/insert). 上传的文件将尝试转换为原生 Google 文档格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T18:49:01.413

当然，看到这个[答案](https://stackoverflow.com/questions/34905363/create-file-with-google-drive-api-v3-javascript/44527113?noredirect=1#answer-35182924)。请注意，您可以上传文本文件或 csv 文件并将其内容类型分别设置为 google doc 或 google sheet，google 将尝试对其进行转换。我已经针对 text -> doc 对此进行了测试，并且可以正常工作。您需要将`const contentType`代码开头的 设置为[支持的 google mimetypes](https://developers.google.com/drive/v3/web/mime-types)之一。

# bash - 如何使用带有空格的路径执行 mkdir？

> ID：13733843
> 
> 赞同：11
> 
> 时间：2012-12-05T22:41:34.720
> 
> 标签：bash

我有一个 bash 初学者问题：
我要创建的路径是`/Volumes/ADATA\ UFD/Programming/Qt`，其中`/Volumes/ADATA\ UFD`已经存在。我想写一个如下形式的脚本：

```
# create a single output directory 
outputdir="/Volumes/ADATA\ UFD/Programming/Qt"
mkdir -pv $outputdir 
```

我的问题是`mkdir`创建目录`/Volumes/ADATA`而`./UFD/Programming`不是创建`/Volumes/ADATA\ UFD/Programming/Qt`.

我[在 SO 上看过这个问题](https://stackoverflow.com/q/589149/1705967)；但是，这些解决方案都不起作用：

```
outputdir=/Volumes/"ADATA\ UFD/Programming/Qt"
mkdir -pv $outputdir

outputdir=/Volumes/'ADATA\ UFD/Programming/Qt'
mkdir -pv $outputdir

outputdir='/Volumes/ADATA\ UFD/Programming/Qt'
mkdir -pv $outputdir

outputdir=/Volumes/ADATA' 'UFD/Programming/Qt
mkdir -pv $outputdir 
```

我究竟做错了什么？这里有什么好的组合？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T22:44:41.607

使用变量时需要引用它们。扩展变量会进行分词。无论您是否希望它包含特殊字符或空格，始终引用您的扩展是一种很好的做法。引用时也不需要转义空格。

以下将做你想要的：

```
outputdir='/Volumes/ADATA UFD/Programming/Qt'
mkdir -pv "$outputdir" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-05T22:43:11.917

`mkdir`传递给命令时，变量周围的双引号：

```
mkdir -pv "$outputdir" 
```

# wpf - wpf 文本框文本绑定

> ID：13733849
> 
> 赞同：6
> 
> 时间：2012-12-05T22:42:10.523
> 
> 标签：wpf, binding, textbox, inotifypropertychanged

我正在尝试将文本框的文本绑定到我的类中的属性，但它不起作用，我正在后面的代码中编辑属性，但我没有在文本框中看到字符串，这是类，并且我要绑定的属性称为 songFolder。

```
public class song :  INotifyPropertyChanged
{
    public string title {get; set; }
    public string artist { get; set; }
    public string path { get; set; }
    public static string folder;
    public string songsFolder { get { return folder; } set { folder = value; NotifyPropertyChanged("songsFolder"); } }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public song()
    {

    }

    public song(string title, string artist, string path)
    {
        this.title = title;
        this.artist = artist;
        this.path = path;
    }

} 
```

和 xaml，包含我要绑定的资源和文本框

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="Song Filler" Height="455" Width="525">
<Window.Resources>
    <local:song x:Key="song"/>
</Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>
        <TextBox Name="browseBox" Text="{Binding Source={StaticResource ResourceKey=song}, Path=songsFolder, Mode=TwoWay}" Grid.Column="0"></TextBox>
        <Button Grid.Column="1" Width="auto" Click="Browse">browse</Button>
    </Grid> 
```

--------------update---------------- 我在窗口的ctor中添加了下一行：

```
BrowseBox.DataContext=new song() 
```

在调试时，我看到属性正在更改，但文本框中的文本没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:49:04.343

传递给 NotifyPropertyChanged 事件的字符串应该与属性本身的名称相同。

```
public string songsFolder 
{ 
    get 
    { 
      return folder; 
    } 
    set 
    { 
      folder = value; 
      NotifyPropertyChanged("songsFolder"); 
    }
} 
```

还，

尝试将 UpdateSourceTrigger="PropertyChanged" 添加到 textBox 的绑定中

```
<TextBox Name="browseBox" Text="{Binding Source={StaticResource ResourceKey=song}, Path=songsFolder, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="0"></TextBox> 
```

编辑：也许 DataContext 没有正确设置。你也可以试试这个方法（没有静态键）

代码后面，在窗口的 Ctor 内：

```
browseBox.DataContext = new song(); 
```

然后，将 textBox 结果更新为：

```
<TextBox Name="browseBox" Text="{Binding Path=songsFolder, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="0"></TextBox> 
```

# php - 通过 PHP 调用 MySQL 存储过程时出错

> ID：13733873
> 
> 赞同：1
> 
> 时间：2012-12-05T22:43:39.730
> 
> 标签：php, mysql, stored-procedures

我正在尝试从 MySQL 调用存储过程并取回两个 OUT 参数（@eset 和 @leng）。我想将这两个参数回显到 JavaScript，在那里我有一个 XMLHttpRequest 等待结果。

我收到此错误：

```
Strict standards: mysqli::next_result(): There is no next result set. 
```

这是我的代码：

```
<?php

//get the q parameter from URL
$q=$_GET["q"];
$eset= "";
$length= 0;

// Opens a connection to a MySQL server

$db= new mysqli('localhost', 'db_name', 'pass');
if (!$db) {  die('Not connected : ' . mysql_error());} 

// Set the active MySQL database

$db_selected = $db->select_db('db_name');
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
} 

// Select all the rows in the markers table

$db->multi_query( "CALL  mst2($q, @eset, @leng);SELECT @eset as eset;SELECT @leng as length" );
$db->next_result();            // flush the null RS from the call
$eset=$db->store_result();       // get the RS containing the id
//echo $eset->fetch_object()->eset, "\n";
$length= $db->store_result();
//echo $length->fetch_object()->leng, "\n";
$response= $eset.$length;
//$eset->free();
//$length->free();

  //$response=str_shuffle($q);

//output the response
echo $response;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:28:05.183

我假设您的存储过程的第一个参数是 VARCHAR，所以第一个问题是您`$q`在查询中传递的变量不带引号。它应该是这样的：

```
$db->multi_query("CALL mst2('$q', @eset, @leng); SELECT @eset as eset; SELECT @leng as length"); 
```

此外，您不需要进行两次 SELECT 调用，只需执行一次：

```
SELECT @eset AS eset, @leng AS leng; 
```

不用说，用户输入永远不应该被信任。您应该使用准备好的语句：

```
if (($stmt = $db->prepare("CALL mst2(?, @eset, @leng)"))) {
    $stmt->bind_param("s", $q);
    $stmt->execute();
    $stmt->close();

    if (($res = $db->query("SELECT @eset AS eset, @leng AS leng"))) {
        list($eset, $leng) = $res->fetch_array();
        $result = $eset.$length;
        echo $result;

        $res->free();
    }
} 
```

# c# - 如何从字符串中获取指定长度的所有单词？

> ID：13733874
> 
> 赞同：-4
> 
> 时间：2012-12-05T22:43:47.973
> 
> 标签：c#, regex, linq

我正在为作业编写一个文本分析程序，需要编写一个函数，该函数将从字符串中返回指定长度内的所有单词（在本例中为所有超过 6 个字符的单词）。

我发现了很多例子，这些例子展示了如何根据它们的长度返回词组，但没有一个关于如何让所有词超过指定长度的例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:51:33.237

```
static IEnumerable<string> getWordsWithMinLength(string text, int minLength)
{
    string[] words = text.Split();
    return words.Where(w => w.Length >= minLength);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:49:21.860

```
String [] words = text.Split(new char[] {' '},  
    System.StringSplitOptions.RemoveEmptyEntries );
String [] filteredWords = words.Where(w => w.Length>6).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:51:01.253

创建一个字符串列表`var list = new List<string>()`，

遍历文本中的每个单词，

`if (word.Length > 6) { list.Add(word) }`,

当你完成后，`return list;`

瞧！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:51:30.183

至少你使用了作业标签，这确实会尖叫“嘿，为我做我的工作”。你试过什么了？你哪里有问题？

分解问题。看起来你有 3 个逻辑部分：

1）从一个字符串中，获取所有单词

2）从这些词中，找出所有长度大于 N 的词

3）返回那些话。

查看#1 的 String.Split() 和 Linq 中的 .Where() 进行过滤。

# ruby-on-rails - 在没有 SQL 的情况下使用 Rails“where”方法在日期之前/之后获取记录的语法是什么？

> ID：13733875
> 
> 赞同：1
> 
> 时间：2012-12-05T22:43:59.193
> 
> 标签：ruby-on-rails

没有 SQL 的语法是什么？

```
Subscription.where('end_date > ?', Date.today) 
```

我已经尝试过了，但这显然是不正确的：

```
Subscription.where(:end_date > Date.today) 
```

（我们正在使用 rails 3）谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:15:03.327

通过使用 Arel：

```
Subscription.where(Subscription.arel_table[:end_date].gt(Date.today)).all 
```

或者通过使用 gem [squeel](https://github.com/ernie/squeel)：

```
Subscription.where(end_date.gt => Date.today).all 
```

# java - 委托给 Servlet 的 Spring MVC 控制器

> ID：13733880
> 
> 赞同：1
> 
> 时间：2012-12-05T22:44:15.417
> 
> 标签：java, servlets, spring-mvc

我的一个项目使用 Spring MVC 来处理 URL 映射和调度逻辑。我现在必须使用第三方库，它使用自己的`HttpServlet`作为其功能的主要入口点，但由于它是另一个库的可选插入式替代品，我不能只将`<servlet>`声明放在 web.xml 中：I' d 宁愿使用 a`Controller`和 Spring 配置文件在此类实现之间切换，而无需编辑 web.xml。

Spring 是否提供 OOTB 来处理此类情况？我似乎没有马上找到它。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:56:29.820

由于在您的中注册第三方 servlet`web.xml`是不可能的，我认为您最好的选择是在您的 中创建 servlet 的单例实例`ApplicationContext`，然后创建一个委托给所述 servlet`service`方法的自定义视图。

[您可以在本教程](http://www.zabada.com/tutorials/writing-a-custom-spring-mvc-view-rss)中看到自定义视图的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:14:01.970

在这里回答我自己的问题，以防我的方法对其他人有用。

我需要考虑两个关键因素：

*   servlet 的正确初始化
*   让 servlet 完全控制 HTTP 层（例如设置 HTTP 标头等）

在我的具体情况下，不需要正确处理 servlet 破坏，因为它是无操作的。

我最终编写了一个专用的`Controller`, 仅在激活特定的 Spring 配置文件时才被实例化，该配置文件负责实例化和初始化 Servlet。然后，所有的请求都会直接在一个`void`handler 方法中处理，如下：

```
public class ServletDelegatingController implements ServletConfig {
    private final DelegateServlet delegate = new DelegateServlet();

    public void handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception { 
        delegate.service(request, response);
    }

    // properly initializes the servlet
    public void setServletConfig(ServletConfig servletConfig) {
        try {
            delegate.init(servletConfig);
        } catch (ServletException e) {
            throw new IllegalStateException("Failure while initializing the servlet", e);
        }
    }
} 
```

对于看起来如下`delegating-servlet.xml`：`DispatcherServlet`

```
<beans profile="custom">
    <bean id="cmisServiceFactory"
          class="com.foo.ServletDelegatingController"/>
</beans> 
```

# c# - 在 C# 代码中查找静态数据的工具

> ID：13733881
> 
> 赞同：1
> 
> 时间：2012-12-05T22:44:16.677
> 
> 标签：c#

我继承了一个大型 c# 代码库。它非常混乱，我怀疑它可能存在各种线程安全问题。我想做的一件事是在其中找到所有静态数据。我知道我可以制作各种正则表达式搜索等，但似乎 IL 检查工具可以做得更好。

有谁知道这样的工具是否存在。我有 dotPeek 但它没有，不要认为反射器会这样做。实际上是查找有关 IL 的各种信息的通用工具。也许可以写fxcop规则，我对fxcop知之甚少

编辑：代码有 > 2000 个静态方法，所以搜索“静态”是一种痛苦。而且我担心花哨的正则表达式可能会遗漏一些东西

而且我也绝对可以编写自己的迷你工具来做到这一点。我只是想知道是否已经有工具可以做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:47:03.543

它很贵，但[NDepend](http://www.ndepend.com)可能适合您的需求。我以前用过它，但没什么好说的。

它提供多种代码检查和用于查询代码的领域特定语言 (CQL)。如果它还没有内置，我敢肯定你可以编写一个简单的查询来查找静态方法。

# linux - 为什么在 Linux/Ubuntu 中支持硬件加速画布 (html) 需要这么长时间？（火狐/铬）

> ID：13733885
> 
> 赞同：-1
> 
> 时间：2012-12-05T22:44:22.230
> 
> 标签：linux, firefox, google-chrome, canvas, hardware-acceleration

Windows 版本的 Firefox 和 Chrome 有硬件加速画布，为什么在 Linux/Ubuntu 上还没有这样做？是 Google/Mozilla 的错，还是 NVIDIA/ATI/Intel 的错？是什么赋予了？

如果我这样做，我可以让它在 Chromium 上工作：

```
chromium-browser --ignore-gpu-blacklist 
```

但这并不理想，并且可能出于某种原因被列入黑名单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:00:56.023

我不能代表 Google 和 Mozilla，但我曾为 Opera Software 工作过，我知道在 Linux 上支持 OpenGL 是多么痛苦。Linux 视频驱动程序的质量通常低于 Windows，并且具有更多的多样性（专有驱动程序与开源驱动程序）。此外，Linux 特定的开发工作很容易被降低优先级，因为该平台在桌面上不如 Windows 和 MacOS 受欢迎。

我猜 Chromium 默认禁用硬件加速的原因与 Opera 目前这样做的原因相同：避免让用户面临崩溃和挂起的风险。如果您准备好它可能不像您希望的那样稳定，您可以启用它。事实上，如果您尝试并报告您遇到的任何问题，您将帮助浏览器开发人员。

# git - 如何在推送到 GitHub 之前运行所有测试？

> ID：13733891
> 
> 赞同：5
> 
> 时间：2012-12-05T22:45:09.883
> 
> 标签：git, github, rspec, continuous-integration, jasmine

是否有提供此功能的服务：

推送到 GitHub 时，它会运行所有 RSpec 和 Jasmine 测试。如果任何测试失败，它将拒绝推送。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:06:07.850

拒绝推送可以通过 githooks 完成。挂钩通常只是以状态 0 或 1 退出的脚本。根据该结果，允许或禁止操作。

查看`man githooks`可用钩子列表及其工作原理。

github似乎也允许你配置你的钩子：http: [//developer.github.com/v3/repos/hooks/](http://developer.github.com/v3/repos/hooks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:00:54.700

看看[Gerrit/Jenkins 组合](http://alblue.bandlem.com/2011/02/gerrit-git-review-with-jenkins-ci.html)。在将其推送到真正的分支之前，我们使用它来构建我们的 C++ 代码。您还可以将其设置为在将其推送到真实分支之前运行测试。我认为您也可以将其设置为使用[Github](http://wiki.openstack.org/GerritJenkinsGithub)。

# php - 带有来自 php 的动态数据的 jQuery Mapster

> ID：13733896
> 
> 赞同：1
> 
> 时间：2012-12-05T22:45:35.197
> 
> 标签：php, jquery, imagemapster

我们正在建立一个网站，为此我们需要包含一个国家/地区的图像地图，当您突出显示普罗旺斯时，它需要在地图下方显示一些内容。

为此，我们正在使用 jquery mapster（我不是一个真正的 jquery 程序员，所以也许你可以帮忙）。

一切都适用于下面的代码，但仅当内容位于 1 行时。

例如`groningen: "<h1>Groningen</h1><p>test</test>",`<-- 这行得通

例如

```
groningen: "<h1>Groningen</h1>
<p>test</test>", 
```

这不起作用。

下面你会找到我的jQuery代码

```
<script type="text/javascript">
var $s = jQuery.noConflict(); 
$s(document).ready(function () {
       var image = $s('img');
       var data = {
            groningen: "<h1>Groningen</h1>
<p>test</test>",
            friesland: "<?php echo $extrafields[10];?>",
       };
       var defaultDipTooltip = 'I know you want the dip. But it\'s loaded with saturated fat, just skip it and enjoy as many delicious, crisp vegetables as you can eat.';

       image.mapster(
       {
            fillOpacity: 1,
            fillColor: "ff2d52",
            strokeColor: "ff2d52",
            strokeOpacity: 0.8,
            strokeWidth: 1,
            stroke: true,
            isSelectable: true,
            singleSelect: true,
            mapKey: 'name',
            listKey: 'name',
            onClick: function (e) {
                var newToolTip = defaultDipTooltip;
                $s('#selections').html(data[e.key]);
                if (e.key==='asparagus') {
                    newToolTip = "OK. I know I have come down on the dip before, but let's be real. Raw asparagus without any of that " +
                            "delicious ranch and onion dressing slathered all over it is not so good.";
                }
                image.mapster('set_options',{areas: [{
                    key: "dip",
                    toolTip: newToolTip
                    }]
                });
            },
            showToolTip: true,
            toolTipClose: ["tooltip-click", "area-click"],
            areas: [
                {
                    key: "groningen",
                    fillColor: "ff2d52",
                    toolTip: defaultDipTooltip
                },
                {
                    key: "friesland",
                    fillColor: "ff2d52"
                }
                ]
        });
      });
      </script> 
```

输出

```
var data = {
    groningen: "<h1>Groningen</h1><p>test</test>",
    friesland: "<p>Scholen in de regio Groningen</p>
    \n<ul>
    \n<li>AOC Terra, Groene school<br />Adres<br />Winsum<br />Telefoonnummer<br />Naam directeur</li>
    \n<li>De Bolster<br />Adres<br />Groningen<br />Telefoonnummer<br />Naam directeur</li>
    \n<li>De Catamaran, School voor Praktijkonderwijs<br />Adres<br />Stadskanaal<br />telefoonnummer<br />Naam directeur</li>
    \n<li>Dollard College locatie De Flint</li>
    \n</ul>",
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:53:07.237

Javascript 和扩展 jQuery 字符串不能越过行边界，您需要将 2 个字符串与 a 一起添加`+`或替换换行符`\n`

对您的 php 数组进行一些操作，以便将每个换行符替换为 \n

```
$UpdatedString = str_replace("\n", '\\n', $FieldValue); 
```

# wpf - 如何更改 Xceed RowSelectorPane 的背景颜色

> ID：13733897
> 
> 赞同：1
> 
> 时间：2012-12-05T22:45:46.553
> 
> 标签：wpf, background, xceed-datagrid

我正在使用 Xceed 数据网格，并且正在尝试更改 RowSelectorPane 背景颜色。我尝试在 XAML 中执行此操作，但它会给我一个编译器错误，指出它无法创建我的数据网格控件。任何建议将不胜感激。

```
<xcdg:DataGridControl Background="Transparent" Name="dgControl" SelectionUnit="Cell" >
    <!--<xcdg:RowSelectorPane Background="Transparent" />-->
</xcdg:DataGridControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:02:13.203

**更新 2**：浏览 Xceed 文档和 Xceed 论坛我发现您必须在每个 DataRow 上设置 RowSelectorStyle。

```
 <Grid.Resources>            
        <Style x:Key="mySelectorStyle" TargetType="{x:Type xcdg:RowSelector}">
            <Setter Property="Background" Value="LightGreen"/>
            <Setter Property="BorderBrush" Value="DarkGreen"/>                
        </Style>

        <Style TargetType="{x:Type xcdg:DataRow}">
            <Setter Property="xcdg:RowSelector.RowSelectorStyle"
          Value="{StaticResource mySelectorStyle}" />
        </Style>

    </Grid.Resources> 
```

**更新 3** 你是对的，我错过了行部分之外的部分：rowselectorpane 本身。不幸的是，这不是可样式化的。有2个选项：

1.  按照 Xceed 论坛上的建议重写 TableViewScrollViewer 控件模板。但这是对大部分 xaml 进行繁琐的复制粘贴工作，并更改您想要让它看起来像您的方式的那一小部分。

2.  或以下小技巧：

    ```
    private void dataGridLoaded(object sender, RoutedEventArgs e)
    {
        var rowSelectorPane = TreeHelper.FindVisualChild<RowSelectorPane>(_dataGrid);
        if (rowSelectorPane != null)
        {
            rowSelectorPane.Background = Brushes.LightGreen;
        }
    }

    public static class TreeHelper
    {
        public static TChildItem FindVisualChild<TChildItem>(DependencyObject obj) where TChildItem : DependencyObject
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(obj, i);

                if (child != null && child is TChildItem)
                    return (TChildItem)child;

                TChildItem childOfChild = FindVisualChild<TChildItem>(child);

                if (childOfChild != null)
                    return childOfChild;
            }
            return null;
        }
    } 
    ```

xml: `<xcdg:DataGridControl ItemsSource="{Binding}" Name="_dataGrid" Loaded="dataGridLoaded" etc...>`

# c# - 奇怪的新实例创建语法行为

> ID：13733904
> 
> 赞同：0
> 
> 时间：2012-12-05T22:46:25.930
> 
> 标签：c#, asp.net, .net, visual-studio-debugging

我已经声明了一个属性来捕获当前页面的查询字符串。我还有一个与查询字符串变量具有相同属性名称的类。下面是我的调试环境，

```
 private Guid? ParishId
    {
        get
        {
            Guid guid;
            if (Guid.TryParse(Request.QueryString["id"], out guid))
            {
                return guid;
            }

            return null;
        }
    } 
```

这是我期望的`p.ParishId`，这是我在检查`p`对象时得到的

![在此处输入图像描述](../Images/f414c817cb011139704d47138b7c3f62.png)

但它显示了查询字符串变量的值。我把鼠标放在 ParishId

![在此处输入图像描述](../Images/c3718d7671423554aadc7a3a495cc0c5.png)

为什么看不到新分配的 Guid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:51:29.980

调试器根据当前范围调用您当前所在实例的属性。`p.ParishId`- 是 instance 的属性`p`，`ParishId`- 是任何碰巧是范围的属性，在您的情况下，它是从 获取值的类`QueryString`。

**更新：**

我不确定你想要什么参考。当您将鼠标移到标识符上时，调试器会执行与将该标识符添加到 Watches 列表时相同的操作，即在当前范围内解析它。在创建时分配实例的字段/属性的 C# 功能只是语言语法糖。要检查`ParishId`instance 的属性`p`，您需要评估`p.ParishId`或在`p`类的代码中。

# android - Google Maps Android API v2 - 示例代码崩溃

> ID：13733911
> 
> 赞同：43
> 
> 时间：2012-12-05T22:46:47.897
> 
> 标签：android, crash, maps, sample, google-maps-android-api-2

我正在尝试使Android 'Google Maps Android API v2'的[示例代码正常工作。](https://developers.google.com/maps/documentation/android/intro#sample_code)我得到的项目没有错误。但是，当我尝试在我的 Galaxy Nexus 上运行该应用程序（通过 USB 连接到我的笔记本电脑）时，该应用程序立即崩溃。

*   我在 AndroidManifest.xml 中填写了我自己的 Maps API Key
*   我针对 Android 4.1.2 构建

这是日志记录：

```
Unable to resolve superclass of Lcom/example/mapdemo/BasicMapActivity; (66) 
Link of class 'Lcom/example/mapdemo/BasicMapActivity;' failed 
Could not find class 'com.example.mapdemo.BasicMapActivity', referenced from method com.example.mapdemo.MainActivity.<clinit> 
VFY: unable to resolve const-class 108 (Lcom/example/mapdemo/BasicMapActivity;) in Lcom/example/mapdemo/MainActivity; 
VFY: replacing opcode 0x1c at 0x000d 
Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/example/mapdemo/MainActivity; 
Class init failed in newInstance call (Lcom/example/mapdemo/MainActivity;) 
Shutting down VM 
threadid=1: thread exiting with uncaught exception (group=0x41ac9930) 
FATAL EXCEPTION: main 
java.lang.ExceptionInInitializerError
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1319)
at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
at android.app.ActivityThread.access$600(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
Caused by: java.lang.NoClassDefFoundError: com.example.mapdemo.BasicMapActivity
at com.example.mapdemo.MainActivity.<clinit>(MainActivity.java:97)
... 15 more 
```

有没有人提示如何解决这个问题或我可能做错了什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-05T23:41:47.633

非常非常仔细地遵循婴儿床单：
[https ://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

特别是，我认为您需要：

*   导入“google-play-services_lib”项目的实际源代码并将其链接为**Android**库。
    *   通过 Project -> Properties -> Android -> Library, Add -> google-play-services_lib 执行此操作（您可以右键单击您的项目并选择 Properties，然后选择 Android）。
    *   不要通过您的项目的“Java 构建路径”**将**其添加为依赖项目，这对我不起作用。
*   将 google-play-services.jar 和 android-support-v4.jar 添加到示例项目的“libs”文件夹中，并在“构建路径 -> 配置构建路径 -> 库”中将它们添加为“外部外部 JAR” .

我发现第二步是必要的，因为我在尝试使用示例代码时遇到了与您完全相同的错误。第一步是避免在我的实际项目中出现的必要`NoClassDefFoundError`步骤`com.google.android.gms.R$styleable`。

在示例代码工作之前，我还需要执行干净的构建并从设备中卸载应用程序（来自早期的测试尝试）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-10T22:45:51.810

按照谷歌的[下一个示例代码说明](https://developers.google.com/maps/documentation/android/intro#sample_code)进行操作。

跳过“4”部分，并按照以下说明进行操作：

*   将新文件夹添加到名为“libs”的项目中
*   复制 google-play-services.jar 表单：

    “android-sdk 文件夹\extras\google\google_play_services\libproject\google-play-services_lib\libs”

    到“libs”文件夹->右键单击此文件夹中的此jar->构建路径->添加到构建路径。

*   复制 android-support-v4.jar 形式：

    “android-sdk-文件夹\extras\android\support\v4”

    到“libs”文件夹->右键单击此文件夹中的此jar->构建路径->添加到构建路径。

其中“android-sdk-folder”通常看起来像：“C:\Users\User_Name\android-sdks”

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-29T18:56:33.637

我有同样的问题，我做了以下解决问题。

1.  转到项目的“属性”。
2.  选择“Java 构建路径”
3.  选择“订购和导出”选项卡
4.  您应该在此处看到所选项目的“src”和“gen”路径和依赖项。

他们列出的顺序是首先是“src”，然后是“gen”路径我切换它们，以便在“src”之前构建“gen”文件夹

然后“检查”列出的每一项

请参阅： [Android 上 Java 库中的代码的 NoClassDefFoundError](https://stackoverflow.com/questions/8678630/noclassdeffounderror-android)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-09T17:42:08.023

发生这种情况是因为对如何导入项目有很多困惑。文档 [https://developers.google.com/maps/documentation/android/intro#sample_code](https://developers.google.com/maps/documentation/android/intro#sample_code) 说您不应该在任何时候选择“将项目复制到工作区”，并且要让示例运行，这是您需要坚持的。不要为播放服务和示例选择此选项 - 将它们留在原处。

导入两者后，请检查以下内容：

1.  右键单击 MainActivity 项目并选择属性
2.  转到 Android 并确保您在 google-play-services-lib 旁边看到一个绿色勾号（播放服务库不应添加为 jar - 而应添加为 Android 库）
3.  转到 Java 构建路径并在库部分中导入外部 jar (android-support-v4.jar)
4.  [重要] 转到 Java 构建路径中的 Order and Export 并确保 android-support-v4.jar 旁边有一个勾号（默认情况下不会发生，这就是您看到您提到的错误的原因在顶部）
5.  确保在进行更改后清理并构建项目，这样您就不会最终尝试修复有效的东西，但根本没有被推动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-20T07:14:01.240

1.  按照谷歌的[示例代码说明](https://developers.google.com/maps/documentation/android/intro#sample_code)进行操作。
2.  并像这样设置Java构建路径：![在此处输入图像描述](../Images/6e26e3bcc13190094d6a74f4b35ceb5e.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T11:50:03.777

我遇到了同样的问题，无法解决。最后，我从另一台机器上获取了示例项目文件夹，将其复制到我的并加载了我从另一台机器上获取的新项目。然后一切正常。我试图通过比较 2 个示例项目来跟踪问题，但不能。无论如何，我从另一台机器上获取的新示例项目运行良好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-17T05:46:03.183

我有很多同样的问题。文件“import-summary.txt”有答案。就我而言，我已将 eclipse 项目导入到路径名中带有空格的路径中。这会导致向导出现问题。创建了新路径。重新导入项目。然后构建/重建项目。没问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-23T11:33:37.850

1.  在新工作区中尝试相同的示例代码。

2.  甚至您也可以复制并粘贴示例地图项目和 google play services-lib 项目 (/extras/google/google_play_services/libproject/google-play-services_lib,) 并将其粘贴到新的工作区中。

3.  之后不要忘记从 SDK 添加所需的 JAR 文件。（“android-support-v4.jar”位于“android-sdk”目录下的“/extras/android/compatibility/v4/android-support-v4.jar”中。）

# javascript - Javascript 淡入淡出没有 Jquery 和 CSS3

> ID：13733912
> 
> 赞同：18
> 
> 时间：2012-12-05T22:46:47.850
> 
> 标签：javascript

我真的很努力使简单的淡入淡出背景图像仅适用于没有 JQuery 和 CSS3 的 javascript。我知道在Jquery 中调用fadeIn() 和fadeOut() 是多么容易。不幸的是，在我正在工作的项目中，他们不支持 Jquery。我想支持 IE6 的动画以供您参考。

**单击链接时，div 的相应背景将从先前存在的背景中淡入淡出。我正在尝试使其基于 setinterval 工作，但无法做到。**

```
function handleClick(evt){
    var element = document.getElementsByClassName(evt.target.id);
    fade(element);

}
 function fade(element) {
    var op = 1;  // initial opacity
    var timer = setInterval(function () {
        if (op <= 0.1){
            clearInterval(timer);
            element.style.display = 'none';
        }
        element.style.opacity = op;
        element.style.filter = 'alpha(opacity=' + op * 100 + ")";
        op -= op * 0.1;
    }, 50);
} 
```

​</p>

[http://jsfiddle.net/meetravi/2Pd6e/4/](http://jsfiddle.net/meetravi/2Pd6e/4/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-12T01:03:01.983

这是我对跨浏览器支持（包括 IE6）的淡入和淡出的完整实现，不需要 jQuery 或任何其他 3rd-party JS 库：

```
function fadeIn( elem, ms )
{
  if( ! elem )
    return;

  elem.style.opacity = 0;
  elem.style.filter = "alpha(opacity=0)";
  elem.style.display = "inline-block";
  elem.style.visibility = "visible";

  if( ms )
  {
    var opacity = 0;
    var timer = setInterval( function() {
      opacity += 50 / ms;
      if( opacity >= 1 )
      {
        clearInterval(timer);
        opacity = 1;
      }
      elem.style.opacity = opacity;
      elem.style.filter = "alpha(opacity=" + opacity * 100 + ")";
    }, 50 );
  }
  else
  {
    elem.style.opacity = 1;
    elem.style.filter = "alpha(opacity=1)";
  }
}

function fadeOut( elem, ms )
{
  if( ! elem )
    return;

  if( ms )
  {
    var opacity = 1;
    var timer = setInterval( function() {
      opacity -= 50 / ms;
      if( opacity <= 0 )
      {
        clearInterval(timer);
        opacity = 0;
        elem.style.display = "none";
        elem.style.visibility = "hidden";
      }
      elem.style.opacity = opacity;
      elem.style.filter = "alpha(opacity=" + opacity * 100 + ")";
    }, 50 );
  }
  else
  {
    elem.style.opacity = 0;
    elem.style.filter = "alpha(opacity=0)";
    elem.style.display = "none";
    elem.style.visibility = "hidden";
  }
} 
```

正如其他人所说，您需要修复您的 handleClick 以正确选择单个元素，然后将该元素传递给淡入淡出函数（为清楚起见，我将其命名为 fadeOut）。jQuery 淡入淡出的默认时间是 400 毫秒，所以如果你想模仿它，你的调用可能如下所示：

```
function handleClick( evt )
{
  fadeOut( document.getElementById(evt.target.id), 400 );
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T23:01:16.100

`getElementById`给你一个元素（或 null），`getElementsByClassName`给你一个数组。

```
function handleClick(evt){
    var element = document.getElementById(evt.target.id);
    fade(element);

} 
```

您似乎旨在使用 ID，因此这应该可以满足您的需求。我更新了整个东西：[ID](http://jsfiddle.net/2Pd6e/16/)

但是，您应该意识到，这种淡化方法比使用 GPU 加速转换的成本要高得多。

**更新**
[JSfiddle webkit 不透明度淡化](http://jsfiddle.net/2Pd6e/19/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-05T23:06:54.883

如果您不关心 IE7 - IE9，您可以使用非常有用的 CSS3 过渡，如下所示：

```
 .element {
        -webkit-transition: opacity 0.3s ease;
    }
    .element[faded=true] {
        opacity: 0;
    } 
```

没有 jQuery，您将获得非常快速的原生淡出效果。

更新：对不起，我没有彻底阅读问题标题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T22:57:36.877

`element.style`未定义，因为您没有引用正确的对象。用于`element[0]`您的函数调用：

```
function handleClick(evt){     
    var element = document.getElementsByClassName(evt.target.id);
    fade(element[0]);        
} 
```

[小提琴](http://jsfiddle.net/2Pd6e/12/)

* * *

*旁注：使用 console.log() 和某种类型的开发者控制台（如 Chrome 中包含的控制台）可以为调试创造奇迹。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T23:04:30.723

你真的应该通过 CSS3 来做到这一点，因为所有现代浏览器都支持它，而对于旧浏览器，则回退到只使用显示/隐藏。通过添加“fadeOut”类或通过 JavaScript 将其删除来做到这一点。CSS3（过渡）处理所有其他事情，包括为旧浏览器隐藏和显示它。

记住：尽可能先在 CSS 中做事，然后在 JavaScript 中做。它不仅更清洁、更易于维护，而且 CSS3 动画渲染更流畅，因为它通常会增加 GPU（视频卡）的硬度，而不仅仅是 CPU。这在移动设备上尤为重要，但却是在任何设备上执行此操作的标准、现代方式。

有关更多详细信息，请参阅这篇 Opera 文章： [http ://dev.opera.com/articles/view/css3-show-and-hide/](http://dev.opera.com/articles/view/css3-show-and-hide/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T23:28:04.380

我会为您指明正确的方向，并将其余的编码留给您。

这就是 setInterval() 函数的工作原理。它需要一个函数来执行，然后是它应该运行的毫秒数。

```
setInterval(function() {
    if(fade(element[0]))
        clearInterval();
}, 50); 
```

[我在这里](http://jsfiddle.net/2Pd6e/17/)为您制作了一个 JS 小提琴它是半完整的，但展示了您应该如何进行淡出/淡入淡出。这是在 Mac 上的 Chrome 中测试的。不幸的是，不确定 FF 和 IE。

同样正如一些人指出的那样，当通过任何以`s`您结尾的函数获取内容时，可以 100% 确定它为您提供了一个包含元素的数组，因此您必须引用您想要的元素。在你的情况下，它的`element[0]`.

希望我能帮助你进一步的小方法！：） 祝你好运！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-02T15:16:42.377

对于根据情况切换淡入或淡出的单个功能，这是我的功能

```
function toggleFade(elem, speed ) {
    //Add Opacity Property if it doesnt exist
    if (!elem.style.opacity) elem.style.opacity = 1;

  if (elem.style.opacity <= 0) {
    var inInterval = setInterval(function() {
      elem.style.opacity = Number(elem.style.opacity)+0.02;
      if (elem.style.opacity >= 1)
        clearInterval(inInterval);
    }, speed/50 );
  }else{ // end if
    var outInterval = setInterval(function() {
        elem.style.opacity -= 0.02;
    if (elem.style.opacity <= 0)
        clearInterval(outInterval);
    }, speed/50 );
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-21T07:32:37.567

我修改了@Raptor007的功能

```
if (!Element.prototype.fadeIn) {
    Element.prototype.fadeIn = function(){
        let ms = !isNaN(arguments[0]) ? arguments[0] : 400,
            func = typeof arguments[0] === 'function' ? arguments[0] : (
                typeof arguments[1] === 'function' ? arguments[1] : null
            );

        this.style.opacity = 0;
        this.style.filter = "alpha(opacity=0)";
        this.style.display = "inline-block";
        this.style.visibility = "visible";

        let $this = this,
            opacity = 0,
            timer = setInterval(function() {
            opacity += 50 / ms;
            if( opacity >= 1 ) {
                clearInterval(timer);
                opacity = 1;

                if (func) func('done!');
            }
            $this.style.opacity = opacity;
            $this.style.filter = "alpha(opacity=" + opacity * 100 + ")";
        }, 50 );
    }
}

if (!Element.prototype.fadeOut) {
    Element.prototype.fadeOut = function(){
        let ms = !isNaN(arguments[0]) ? arguments[0] : 400,
            func = typeof arguments[0] === 'function' ? arguments[0] : (
                typeof arguments[1] === 'function' ? arguments[1] : null
            );

        let $this = this,
            opacity = 1,
            timer = setInterval( function() {
            opacity -= 50 / ms;
            if( opacity <= 0 ) {
                clearInterval(timer);
                opacity = 0;
                $this.style.display = "none";
                $this.style.visibility = "hidden";

                if (func) func('done!');
            }
            $this.style.opacity = opacity;
            $this.style.filter = "alpha(opacity=" + opacity * 100 + ")";
        }, 50 );
    }
} 
```

**如何使用**：

```
// fadeIn with default: 400ms
document.getElementById(evt.target.id).fadeIn();

// Calls the "alert" function with the message "done!" after 400ms - alert('done!');
document.getElementById(evt.target.id).fadeIn(alert);

// Calls the "alert" function with the message "done!" after 1500ms - alert('done!');
document.getElementById(evt.target.id).fadeIn(1500, alert); 
```

[JSfiddle 淡入/淡出示例](https://jsfiddle.net/spLhwe5c/)

# clojure - 惰性序列的分步示例

> ID：13733913
> 
> 赞同：5
> 
> 时间：2012-12-05T22:46:49.303
> 
> 标签：clojure, equals, lazy-evaluation

我很难理解惰性工作以及缓存是如何工作的。

我认为工作中的惰性序列的分步示例在这里真的可以提供帮助。例如，我读过以下问题：

[Clojure 惰性序列用法](https://stackoverflow.com/questions/4992298/clojure-lazy-sequence-usage)

但目前还不清楚。

我的问题是调用如何确定另一个调用是否与缓存调用“相等”以及它在缓存中保留多长时间？我试图*（来源lazy-seq）*但显然它在Java领域，所以我在这里运气不好。

对于一个简单的惰性序列，只取一个参数（比如两个幂的列表），如果我用 5 和 8 调用它会怎样？是否仅缓存了这两个值？

如果我要通过缓存已经调用惰性函数的每个输入来破坏内存，那么创建和缓存无限列表以获得无限结构的意义何在？

因为它说它会在每次后续调用中缓存结果......使用's'。

> 1: 参数结果为 '1' 缓存 2: 参数结果为 '2' 缓存 3: 参数结果为 '3' 缓存... 2 **30: 我数到了 2** 30 这很棒因为我很懒和所有，但现在内存中有一个 2**30 缓存，用于缓存所有后续调用的所有先前调用。

还是只是缓存的最后一个调用？

如果我编写一个以树为参数的惰性函数怎么办？它运行*等于吗？*关于通过的论点知道是否需要进行新的评估？

可以在运行时以某种方式跟踪这种行为吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T23:04:06.543

惰性序列中的“缓存”不是一个可变缓存，它会像您在 web 应用程序中使用的那样过期，**它是一个大小为 1 的缓存，并且列表中的每个单元格都有一个**。那个“缓存”要么包含一个值，要么包含计算该值的代码，并且永远不会同时包含两者。一旦计算出该值，它就会缓存该值（在该单元格/条目中），如果有人再次读取该单元格，它会直接给他们该值，而不是调用代码。

这是一个简化的虚构 repl 会话来说明这一点：

```
user> (def a (range))
a = [code-for-rest]
user> (first a)
a = [code-for-first, code-for-rest]
a = [0, code-for-rest]
result=> 0
user> (first a)
a = [0, code-for-rest]
result=> 0
user> (nth a 10)
a = [0]->[1]->[2]->[3]->[4]->[5]->[6]->[7]->[8]->[9, code-for-rest]
result=> 4 
```

在此示例中，每个单元格最初包含（这是为了说明这一点而进行的简化）生成值的代码和生成列表其余部分的代码（如果这是列表的末尾，则为 nil）。一旦该单元被实现（变得不懒惰），它就会用实际值替换它的内容，所以它现在包含值和生成序列其余部分的代码。当读取列表中的下一个单元格时，它将首先由 code-for-rest（包含在单元格中）生成，然后新单元格中的 code-for-nth 将生成该单元格的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:22:59.663

这里有一个玩具示例，显示了运行时发生的情况：

```
(defn times-two[number]
 (print "- ")
 (* 2 number))

(def powers-of-two (lazy-cat [1 2] (map times-two (rest powers-of-two))))

(println (take 10 powers-of-two))
(println (take 12 powers-of-two)) 
```

输出应该是：

(1 - 2 - 4 - 8 - 16 - 32 - 64 - 128 - 256 512)

（1 2 4 8 16 32 64 128 256 - 512 - 1024 2048）

# sql-server - T-SQL 错误 - 子查询返回超过 1 个值

> ID：13733916
> 
> 赞同：1
> 
> 时间：2012-12-05T22:47:04.933
> 
> 标签：sql-server, tsql, syntax, subquery

我在 SQL Server 中收到以下错误：

> 消息 512，级别 16，状态 1，第 18 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>>、>= 或子查询用作表达式时，这是不允许的。

我的代码如下：

```
DECLARE
@personNumber varchar(20),
@itemNumber varchar(20)

SET @personNumber = 'null'
SET @itemNumber = 'null'

SELECT      
    OU.UserID
    ,OU.Name
    ,IGWQ.itemNumber
    ,IG.itemName
    ,IGWQ.QuantityOnHand
FROM dbo.Table1 IGWQ 
INNER JOIN Table2 OU        ON  IGWQ.UserId = OU.UserId
INNER JOIN Table3 IG        ON  IGWQ.itemNumber = IG.itemNumber
WHERE IGWQ.userid IN (CASE  WHEN @personNumber = 'null' 
                            THEN (  SELECT DISTINCT 
                                        UserID 
                                    FROM Table2 WITH(NOLOCK) 
                                    WHERE [Role] = '01')
                            ELSE @personNumber
                            END)
AND IGWQ.itemNumber IN (CASE    WHEN @itemNumber = 'null'
                                THEN (  SELECT DISTINCT 
                                            itemNumber 
                                        FROM dbo.Table1 WITH(NOLOCK))
                                ELSE @itemNumber
                                END) 
```

任何人都可以提出解决这个问题的方法吗？我认为使用“IN”可以解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:09:18.150

用它来修复其余部分：

```
WHERE ((@personNumber <> 'null' AND @personNumber = IGWQ.userid)
OR (@personNumber = 'null' AND IGWQ.userid IN (  SELECT  UserID 
                                    FROM Table2 WITH(NOLOCK) 
                                    WHERE [Role] = '01')
   )) 
```

您不需要 DISTINCT，因为 IN 语句只处理不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:08:04.353

```
WHERE (IGWQ.userid = @personNumber OR 
       @personNumber = 'NULL' and
       EXISTS (SELECT *
                 FROM Table2 t WITH (NOLOCK)
                WHERE t.[Role] = '01' AND t.UserID = IGWQ.userid)
  )
  AND (IGWQ.itemNumber = @itemNumber OR
       @itemNumber = 'NULL' and 
       EXISTS (SELECT *
                 FROM dbo.Table1 t WITH (NOLOCK)
                WHERE t.itemNumber = IGWQ.itemNumber)
  ) 
```

笔记：

1.  CASE 返回一个标量，它不能返回一个子查询（即集合）。
2.  `WITH (NOLOCK)`已弃用。将连接隔离更改为 READ UNCOMMITTED 或 SNAPSHOT。

# node.js - Mongoose.js - 地理空间位置数组

> ID：13733929
> 
> 赞同：0
> 
> 时间：2012-12-05T22:47:58.490
> 
> 标签：node.js, mongodb, mongoose

我需要这样的东西

```
{
    event : "something",
    location : [
        {
            long:25, lat:34
        }.
        }
            long:25, lat:35
        }.
        .
        .
        .
    ]
} 
```

这可能吗？是否可以为位置字段设置地理空间索引？我会对 $nearSphere 进行查询。

谢谢

编辑：猫鼬模式问题

让架构条目类似于 location : [{ lon : Number, lat: Number}] 让我最终得到位置数组中每个对象的附加 _id。1.有问题吗？2\. 麻烦事？3\. 有什么可以解决的吗？

例如：{“lon”：1，“lat”：2，“_id”：“50bfeea2a3092d1d67000007”}，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:07:05.070

如果您不希望每个`location`元素都有一个`_id`字段，您可以通过显式定义元素的架构并将[`_id`](http://mongoosejs.com/docs/guide.html#_id)选项设置为来禁用它`false`。

像这样：

```
var testSchema = new mongoose.Schema({
    event: String,
    location: [new Schema({long: Number, lat: Number}, {_id: false})]
}); 
```

# sitecore - sitecore后退/前进按钮已禁用，历史记录点？

> ID：13733930
> 
> 赞同：0
> 
> 时间：2012-12-05T22:48:00.550
> 
> 标签：sitecore, sitecore6

我正在使用 sitecore 6.5 内容编辑器，它的后退和前进按钮在 6.5 中被禁用。我已经反编译了代码，看起来它可能与历史点有关？

我最近从 6.2 升级，也许我在 web.config 或 sitecore.config 中遗漏了一些东西，但是使用 Beyond compare 的简单比较并不能真正引导我到任何地方。

任何建议都会很棒。

![在此处输入图像描述](../Images/4391308df4fa69258dea1a308008770a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T16:30:18.297

仅供参考，这是一个已确认的错误，已在版本 7 中解决，但不确定是否有针对以前版本的补丁。

# ssl-certificate - Plesk Panel 专用 SSL 登录问题

> ID：13733931
> 
> 赞同：0
> 
> 时间：2012-12-05T22:48:03.537
> 
> 标签：ssl-certificate, plesk, parallels, dedicated-server

不完全确定我做了什么导致这种情况，但是当我尝试登录到我的专用服务器 plesk 面板时，它会在抛出 501 错误之前部分加载并说它无法连接到 [https://server* *-*****-*** - *** .live-servers.net:11444/relay]。现在我可以登录的唯一方法是转到该地址然后继续（chrome说它不安全）。一旦我这样做了，我只需刷新另一个页面并显示登录名。我想我必须手动更改一些设置，但我不确定是什么。有任何想法吗？**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:18:15.900

:11444 用于 Plesk 单点登录工具。由于某种原因，它在您的机器上失败了，但很可能您并不真的需要它。如果你的服务器有 ssh，试试这个 `/usr/local/psa/bin/sso --disable`（对于 CentOS/RHEL）或 `/opt/psa/bin/sso --disable`（对于 Debian/Ubuntu）**

# python - UnboundLocalError：分配前引用的局部变量“打印”

> ID：13733939
> 
> 赞同：0
> 
> 时间：2012-12-05T22:48:33.620
> 
> 标签：python, macos, python-2.7

大家好，我正在介绍 Python 编程，我们正在编写第一个独立代码。任务如下：

> 提示用户输入他或她的姓名。然后提示用户输入两个数字，然后对它们执行您选择的数学运算。确保程序使用十进制数字，并打印完整的方程式作为响应，而不仅仅是结果：输入一个数字：2.3 输入另一个数字：3.6 2.3 – 3.6 = -1.3

所以我输入了：

```
def main1():
print("This is program 1!")
name = input("Please enter your name: ")
print("Pleased to meet you,", name ,"!") #next line def main2():
print("This is program 2!")
import math
number = input("Enter a number: ")
number = float(number)
numberr = input("Enter another number: ")
numberr = float(numberr)
print = ("number + numberr") 
```

我不断得到这个：

```
UnboundLocalError: local variable 'print' referenced before assignment 
```

帮助！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:50:53.203

您尝试将值分配给`print`.

你写了：

```
print = ("number + numberr") 
```

但实际上你的意思是：

```
print(number + numberr) 
```

# ios - Trigger.io Forge Toolkit - 从 Windows 7 在 iPhone 设备上运行 iOS 应用程序时出错

> ID：13733940
> 
> 赞同：1
> 
> 时间：2012-12-05T22:48:35.713
> 
> 标签：ios, trigger.io

我正在使用 Trigger.io Forge Toolkit 在 Windows 上构建一个 iOS 应用程序（是的，我知道它不是故意的！）。

我正在使用通过 USB 连接的 iPhone 4 “运行 iOS”。该应用程序构建良好，但传输到设备后失败。该应用程序实际上在设备上，并从主屏幕运行 - 但 Trigger Toolkit 无法启动应用程序本身。

因此，当我在手机上启动应用程序（手动，从主屏幕）时，我无法看到任何触发调试信息。

```
[INFO] ERROR: instproxy_browse returned -3
[ERROR] Failed when running C:\Users\Strachan\Mez\wewana\repo\.lib\win-ios-install.exe: Installing c:\users\strachan\appdata\local\temp\tmpc1pvje to: 2f5ffa12b4567865f96821745a2295b4fc5d67e5
Install - CreatingStagingDirectory (5%)
Install - ExtractingPackage (15%)
Install - InspectingPackage (20%)
Install - TakingInstallLock (20%)
Install - PreflightingApplication (30%)
Install - InstallingEmbeddedProfile (30%)
Install - VerifyingApplication (40%)
Install - CreatingContainer (50%)
Install - InstallingApplication (60%)
Install - PostflightingApplication (70%)
Install - SandboxingApplication (80%)
Install - GeneratingApplicationMap (90%)
Install - Complete
ERROR: instproxy_browse returned -3
[DEBUG] Traceback (most recent call last):
  File "C:\Users\Strachan\AppData\Local\Trigger Toolkit\build-tools\forge\async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)
  File "C:\Users\Strachan\AppData\Local\Trigger Toolkit\trigger\api\app.py", line 286, in run
    forge_main.run(['--general.interactive', 'no'])
  File "C:\Users\Strachan\AppData\Local\Trigger Toolkit\build-tools\forge\main.py", line 437, in run
    build_to_run=build_to_run,
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\customer_goals.py", line 125, in run_app
    build_to_run.run()
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\build.py", line 337, in run
    self._call_with_params(task_method, task_args)
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\build.py", line 296, in _call_with_params
    return method(self, *params)
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\ios_tasks.py", line 626, in run_ios
    certificate_password=certificate_password,
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\ios_tasks.py", line 563, in run_idevice
    run_shell(*win_ios_install, fail_silently=False, command_log_level=logging.INFO, check_for_interrupt=True)
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\utils.py", line 346, in run_shell
    output=state.output.getvalue()
ShellError: Failed when running C:\Users\Strachan\Mez\wewana\repo\.lib\win-ios-install.exe: Installing c:\users\strachan\appdata\local\temp\tmpc1pvje to: 2f5ffa12b4567865f96821745a2295b4fc5d67e5
Install - CreatingStagingDirectory (5%)
Install - ExtractingPackage (15%)
Install - InspectingPackage (20%)
Install - TakingInstallLock (20%)
Install - PreflightingApplication (30%)
Install - InstallingEmbeddedProfile (30%)
Install - VerifyingApplication (40%)
Install - CreatingContainer (50%)
Install - InstallingApplication (60%)
Install - PostflightingApplication (70%)
Install - SandboxingApplication (80%)
Install - GeneratingApplicationMap (90%)
Install - Complete
ERROR: instproxy_browse returned -3 
```

我尝试在 iPhone 3GS 上运行并得到相同的行为，但错误略有不同：

```
[INFO] Installing c:\users\strachan\appdata\local\temp\tmpyg1vs5 to: d6aa150bf9695ce041b37215adb5d6b70f9d6bf4
[INFO] Install - CreatingStagingDirectory (5%)
[INFO] Install - ExtractingPackage (15%)
[INFO] Install - InspectingPackage (20%)
[INFO] Install - TakingInstallLock (20%)
[INFO] Install - PreflightingApplication (30%)
[INFO] Install - InstallingEmbeddedProfile (30%)
[INFO] Install - VerifyingApplication (40%)
[INFO] Install - CreatingContainer (50%)
[INFO] Install - InstallingApplication (60%)
[INFO] Install - PostflightingApplication (70%)
[INFO] Install - SandboxingApplication (80%)
[INFO] Install - GeneratingApplicationMap (90%)
[INFO] Install - Complete
[INFO] Launching - /private/var/mobile/Applications/5CC01B44-FC0C-474C-8511-57DA33815625/device-ios.app
[INFO] Could not start com.apple.debugserver!
[ERROR] Failed when running C:\Users\Strachan\Mez\wewana\repo\.lib\win-ios-install.exe: Installing c:\users\strachan\appdata\local\temp\tmpyg1vs5 to: d6aa150bf9695ce041b37215adb5d6b70f9d6bf4
Install - CreatingStagingDirectory (5%)
Install - ExtractingPackage (15%)
Install - InspectingPackage (20%)
Install - TakingInstallLock (20%)
Install - PreflightingApplication (30%)
Install - InstallingEmbeddedProfile (30%)
Install - VerifyingApplication (40%)
Install - CreatingContainer (50%)
Install - InstallingApplication (60%)
Install - PostflightingApplication (70%)
Install - SandboxingApplication (80%)
Install - GeneratingApplicationMap (90%)
Install - Complete
Launching - /private/var/mobile/Applications/5CC01B44-FC0C-474C-8511-57DA33815625/device-ios.app
Could not start com.apple.debugserver!
[DEBUG] Traceback (most recent call last):
  File "C:\Users\Strachan\AppData\Local\Trigger Toolkit\build-tools\forge\async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)
  File "C:\Users\Strachan\AppData\Local\Trigger Toolkit\trigger\api\app.py", line 286, in run
    forge_main.run(['--general.interactive', 'no'])
  File "C:\Users\Strachan\AppData\Local\Trigger Toolkit\build-tools\forge\main.py", line 437, in run
    build_to_run=build_to_run,
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\customer_goals.py", line 125, in run_app
    build_to_run.run()
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\build.py", line 337, in run
    self._call_with_params(task_method, task_args)
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\build.py", line 296, in _call_with_params
    return method(self, *params)
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\ios_tasks.py", line 626, in run_ios
    certificate_password=certificate_password,
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\ios_tasks.py", line 563, in run_idevice
    run_shell(*win_ios_install, fail_silently=False, command_log_level=logging.INFO, check_for_interrupt=True)
  File "C:\Users\Strachan\Mez\wewana\repo\.template\generate_dynamic\utils.py", line 346, in run_shell
    output=state.output.getvalue()
ShellError: Failed when running C:\Users\Strachan\Mez\wewana\repo\.lib\win-ios-install.exe: Installing c:\users\strachan\appdata\local\temp\tmpyg1vs5 to: d6aa150bf9695ce041b37215adb5d6b70f9d6bf4
Install - CreatingStagingDirectory (5%)
Install - ExtractingPackage (15%)
Install - InspectingPackage (20%)
Install - TakingInstallLock (20%)
Install - PreflightingApplication (30%)
Install - InstallingEmbeddedProfile (30%)
Install - VerifyingApplication (40%)
Install - CreatingContainer (50%)
Install - InstallingApplication (60%)
Install - PostflightingApplication (70%)
Install - SandboxingApplication (80%)
Install - GeneratingApplicationMap (90%)
Install - Complete
Launching - /private/var/mobile/Applications/5CC01B44-FC0C-474C-8511-57DA33815625/device-ios.app
Could not start com.apple.debugserver! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:49:25.170

该设备是否曾经启用在 OS X 机器上进行开发？

我们最近发现，当 Xcode 首次使用该设备时，它会更新该设备以启用远程日志拖尾。

如果不这样做，尽管您可以毫无问题地安装应用程序，但您需要类似 iPhone 配置实用程序来查看日志 ( [http://support.apple.com/downloads/#iphone](http://support.apple.com/downloads/#iphone) )。

# c# - 如何在 XAML 数据源中编辑数据

> ID：13733943
> 
> 赞同：0
> 
> 时间：2012-12-05T22:48:55.387
> 
> 标签：c#, windows-phone-7, xaml, datasource

我正在开发 Windows Phone 7 应用程序。当我的应用程序启动时，它应该从我使用 Expression Blend 创建的 XAML 文件数据源加载数据。

我决定将我的数据放在 XAML 文件中，因为它很容易绑定到列表框，还因为 Expression Blend 允许我使用网格视图以方便的方式编辑我的 XAML 数据文件。这对我有很大帮助，因为我需要手动输入我的应用程序所需的初始数据。

但是，我希望能够在运行时动态修改存储在 XAML 数据源文件中的对象的值，并将它们保存到同一个 XAML 文件中，以便下次应用程序启动时，它可以加载新的修改数据从中。我怎样才能做到这一点？或者，如果您对在本地存储数据有更好的建议，请务必分享。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:51:12.530

使用[XamlReader](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx)和[XamlWriter](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.aspx)。

也许我在某个地方有一个例子。我应该尝试追踪它。

# c# - XAML 绑定到属性

> ID：13733945
> 
> 赞同：8
> 
> 时间：2012-12-05T22:49:02.343
> 
> 标签：c#, xaml, data-binding, microsoft-metro, windows-runtime

我的 XAML+C# Windows Store 应用程序中有复选框。我也有 bool 属性：`WindowsStoreTestApp.SessionData.RememberUser`它是公共的和静态的。

我希望复选框的属性`IsChecked`与此 bool 属性一致（或绑定或映射）。

我试过这个：XAML

```
<CheckBox x:Name="chbRemember1"  IsChecked="{Binding Mode=TwoWay}"/> 
```

C＃

```
chbRemember1.DataContext = SessionData.RememberUser; 
```

物业代码：

```
namespace WindowsStoreTestApp
{
    public class SessionData
    {
        public static bool RememberUser { get; set; }
    }
} 
```

但这似乎不起作用。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:05:47.897

```
<CheckBox x:Name="chbRemember1"  IsChecked="{Binding Path=RememberUser, Mode=TwoWay}"/> 
```

```
public class SessionData : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(info));
    }

    bool _rememberUser;
    public bool RememberUser
    {
        get
        {
            return _rememberUser;
        }
        set
        {
            _rememberUser = value;
            NotifyPropertyChanged("RememberUser");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T23:02:23.427

您需要实现某种形式的更改通知，以便您的复选框“了解”属性的任何更改。最好的办法是使用现有的众多 MVVM 框架之一，如果没有，`INotifyPropertyChanged`请在您的 ViewModel 中实现。

此外，通常在 WPF 中，我们不会设置单个控件的 DataContext，而是将 Window 或 User Control 的 DataContext 设置为 ViewModel ...

以下是通过 MVVM 框架之一具有更改通知的属性示例：

```
private bool createTrigger;
public bool CreateTrigger
{
    get { return createTrigger; }
    set { createTrigger = value; NotifyPropertyChanged(m => m.CreateTrigger); }
} 
```

如您所见，一个简单的自动实现的属性不能用于 WPF 中的数据绑定......

我建议通过MSDN 上的[数据绑定概述...](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T23:07:50.247

像这样尝试，注意属性不是静态的，但支持字段是：

```
public class SessionData : INotifyPropertyChanged
{
    private static bool _rememberUser;

    public event PropertyChangedEventHandler PropertyChanged;

    public bool RememberUser
    {
        get { return _rememberUser; }
        set
        {
            _rememberUser = value;
            OnPropertyChanged();
        }
    }

    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

```
this.DataContext = new SessionData(); 
```

```
<CheckBox x:Name="chbRemember1"  IsChecked="{Binding RememberUser, Mode=TwoWay}"/> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T23:08:23.300

您不能绑定到静态属性，因为静态属性不能引发 PropertyChanged 事件。当然，您将需要 INotifyPropertyChanged。但这与静态属性无关。您根本无法绑定到静态属性。（您可以在 WPF 和 Silverlight 中）

# sql-server - SQL Server CONVERT 函数不转换 '&'

> ID：13733950
> 
> 赞同：1
> 
> 时间：2012-12-05T22:49:11.000
> 
> 标签：sql-server

我有一个带有字段 varbinary(max) 的 sql 表，其中包含字符串。我正在使用 varbinary，因为该字段中的输入可能大于 nvarchar 的最大字符。

我试图通过使用将该字段的内容显示为字符串

```
CONVERT(nvarchar(max), Folders) 
```

我遇到的问题是，如果内容中包含“&”，则无法正确转换。它显示为“ `Test &amp; test`”。

有没有其他的转换方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:37:29.907

如果内容可能大于 nvarchar 的最大值，为什么要将其转换为 nvarchar？

尝试使用

```
Replace(Convert(nvarchar(max), Folders), '&amp;',''). 
```

# php - 在计算 Halstead 复杂度时，什么算作 PHP 中的运算符和操作数？

> ID：13733951
> 
> 赞同：2
> 
> 时间：2012-12-05T22:49:10.733
> 
> 标签：php, operators, metrics, operands

我有这段代码，我想用它来计算 Halstead 复杂度：

```
<?php
$words = explode("\n", file_get_contents('http://www.puzzlers.org/pub/wordlists/unixdict.txt'));
foreach ($words as $word) {
    $chars = str_split($word);
    sort($chars);
    $anagram[implode($chars)][] = $word;
}

$best = max(array_map('count', $anagram));
foreach ($anagram as $ana)
    if (count($ana) == $best)
        print_r($ana);
?> 
```

我了解它是如何完成的原则（请参阅**http://en.wikipedia.org/wiki/Halstead_complexity_measures** [）](http://en.wikipedia.org/wiki/Halstead_complexity_measures)，但我不明白并且在彻底搜索后也无法找到的是：**运算符，什么算作操作数？**似乎没有达成一致的定义。

这是我可以遵循的一个更简单的示例（http://www.win.tue.nl/~aserebre/2IS55/2009-2010/9.pdf），但不能应用于上面的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T01:21:08.943

据我了解，运算符是您使用的语言的所有运算符（ `==`、`+`、`++`等）和关键字（`for`、`if`、`break`、 ）。`function`操作数将是每个标识符，即函数名（自写函数和内置函数）、变量名和常量。

以您的示例为例：运算
**符**: `foreach`(是**强制性**的，`as`所以我不计算在内_ _ _ _`[]``+=``if``==`
**`$words``explode``$word``str_split``$chars``sort``$anagram``implode``$best``max``array_map``$ana``cound``print_r`**

 ***注意*：这个代码指标似乎不经常用于 PHP，所以我也没有找到任何用于 PHP 代码的指标的参考或示例。**

# android - 解锁设备，显示文本，然后再次锁定

> ID：13733959
> 
> 赞同：4
> 
> 时间：2012-12-05T22:49:33.543
> 
> 标签：android, lockscreen, device-admin

为了我的应用程序的需要，即使启用了锁屏，我也需要在屏幕上显示一条消息，然后等待 3 秒钟，然后我必须再次锁定手机，因为我不希望它在您的手机中拨打不需要的电话口袋。

第一部分很简单：

```
if (PreferenceManager.getDefaultSharedPreferences(
    getBaseContext()).getBoolean("wake", false)) {
    KeyguardManager kgm = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
    boolean isKeyguardUp = kgm.inKeyguardRestrictedInputMode();
    WakeLocker.acquire(ProtoBenService.this);
    Intent myIntent = new Intent(ProtoBenService.this,LockActivity.class);
    myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    if (isKeyguardUp) {
        ProtoBenService.this.startActivity(myIntent);
    } else
    Toast.makeText(ProtoBenService.this.getBaseContext(), intention, Toast.LENGTH_LONG).show();

    WakeLocker.release();
} 
```

有了这个类：

```
public abstract class WakeLocker {
    private static PowerManager.WakeLock wakeLock;

    public static void acquire(Context ctx) {
        if (wakeLock != null) wakeLock.release();

        PowerManager pm = (PowerManager) ctx.getSystemService(Context.POWER_SERVICE);
        wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |
                PowerManager.ACQUIRE_CAUSES_WAKEUP |
                PowerManager.ON_AFTER_RELEASE, "CobeIm");
        wakeLock.acquire();
    }

    public static void release() {
        if (wakeLock != null) wakeLock.release(); wakeLock = null;
    }
} 
```

和活动：

```
public class LockActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Window window = getWindow();
        window.addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
        window.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
        window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        TextView tv = new TextView(this);
        tv.setText("This is working!");
        tv.setTextSize(45);
        setContentView(tv);

        Runnable mRunnable;
        Handler mHandler = new Handler();
        mRunnable = new Runnable() {
            @Override
            public void run() {
                LockActivity.this.finish();
            }
        };
        mHandler.postDelayed(mRunnable, 3 * 1000);
    }
} 
```

所以，这很好，手机可以显示我的文字！

唯一的问题是当我想再次锁定手机时，似乎锁定手机受到系统保护......

*   [以编程方式关闭屏幕并锁定手机](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/X7BGaSG_aww)
*   [如何以编程方式锁定android](https://stackoverflow.com/questions/4447312/how-to-lock-the-android-programatically)

我认为我的用户不会理解设备管理员并且无法激活它。是否有任何解决方法可以在没有设备管理员的情况下锁定屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:34:34.807

我使用以下方法锁定和解锁手机。

初始化

```
 KeyguardLock keyguard;
        KeyguardManager km = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
        keyguard = km.newKeyguardLock("MyApp"); 
```

解锁手机

```
keyguard.disableKeyguard(); 
```

再次锁定手机

```
keyguard.reenableKeyguard(); 
```

打开屏幕

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

并且不要忘记使用以下权限

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:02:01.857

我很确定您必须使用设备管理功能来锁定屏幕。

```
 protected static void initiateDeviceLock(Context context) {
    ComponentName componentName = new ComponentName(context, MyDeviceAdminReceiver.class);
    DevicePolicyManager dpm = (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);
    boolean active = dpm.isAdminActive(componentName);
    Log.i(context.getClass().getSimpleName(), "Active (in initiateDeviceLock) = " + String.valueOf(active));
    if (active) {
        dpm.lockNow();
    }
} 
```

为了帮助用户设置设备管理功能，您可以将他们带到设置页面：

```
 Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
    ComponentName componentName = new ComponentName(TestActivity.this, MyDeviceAdminReceiver.class);
    intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, componentName);
    startActivityForResult(intent, CODE); 
```

# ember.js - 与同一对象的其他实例有关系的对象的 Ember-Data 关系

> ID：13733961
> 
> 赞同：4
> 
> 时间：2012-12-05T22:49:42.530
> 
> 标签：ember.js, requirejs, ember-data

我正在将一个项目从 Backbone (w/ Backbone Relational for ORM) 转换为 Ember，我在文档中找不到如何使用 DS.belongsTo 引用相同类型对象的示例。

换句话说，我有以下模型定义（为清楚起见，通用伪代码）。

```
BoxModel
  Text = String
  BoxParent = BoxModel (referenced by id) 
```

我想在 Ember 中重新创建这个结构以进行客户端操作等。

我也在使用 requirejs，所以我的 DS.belongsTo 的所有对象目标都必须包含在定义语句中，并作为匿名函数的参数提供。

因此，我怀疑我可以使用这样的东西：

```
define ([ 'textbox'  ]), function(TextBox) {
  return DS.Model.extend({
    BoxParent: DS.belongsTo(TextBox)
   });
}); 
```

对当前类定义的引用不太可能起作用。在 Django 中，这种类型的关系是用“self”的特殊目标处理的，但我在 Ember 中找不到任何等效的解决方案。任何帮助将不胜感激。

最后一点，这种关系也可以是空的，因为并非所有的 TextBox 都必须有一个父级（除非你有无限循环引用，否则这种关系是不可避免的。

谢谢！史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:08:18.000

您需要将模型名称括在引号中以使用未初始化的模型名称。

```
App.Box = DS.Model.extend([
  parent: DS.belongsTo('App.Box')
}); 
```

# html - 自定义我的网页的滚动条

> ID：13733962
> 
> 赞同：0
> 
> 时间：2012-12-05T22:49:44.673
> 
> 标签：html, css

我正在构建一个需要大量自定义的网站，并且我还想自定义滚动条的外观（即：颜色、宽度、样式等）。我目前不知道该怎么做。

老实说，我正在做一个小组项目 chrome 实验，我还没有尝试过任何东西。任何解决方案，即使只适用于 chrome 也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:01:45.443

IE 通过 IE 专有的非标准 CSS 属性支持这一点，例如：

```
scrollbar-base-color
scrollbar-face-color
scrollbar-track-color
scrollbar-3dlight-color
scrollbar-highlight-color
scrollbar-arrow-color
scrollbar-darkshadow-color
scrollbar-shadow-color 
```

WebKit（Chrome 和 Safari）也[支持这一点](http://css-tricks.com/custom-scrollbars-in-webkit/)，使用：

```
::-webkit-scrollbar
::-webkit-scrollbar-button
::-webkit-scrollbar-track
::-webkit-scrollbar-track-piece
::-webkit-scrollbar-thumb
::-webkit-scrollbar-corner
::-webkit-resizer 
```

WebKit 非常酷的一点是滚动条可以具有不透明度，这使得 UI 看起来非常漂亮。

据我所知，没有标准的 Mozilla 方法来支持这一点（尽管有一个[开放的错误，](https://bugzilla.mozilla.org/show_bug.cgi?id=77790)所以我们希望如此！）但是，有一些[jQuery 插件](http://baijs.nl/tinyscrollbar/)可以创建可滚动区域。您仍然不会在文档窗口本身上获得自定义滚动条颜色。

**IE 示例：**

```
<html>
<head>
  <style>
     BODY {scrollbar-base-color: #ff00ff;}
  </style>
</head>
<body>
   <div style="height: 5000px;">
   IE Test
   </div>
</body>
</html> 
```

**WebKit 示例（Chrome/Safari）：**

```
<html>
<head>
  <style>
    ::-webkit-scrollbar {
        width: 12px;
    }

    ::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,255,0.8); 
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,255,0.7); 
    }
  </style>
</head>
<body>
   <div style="height: 5000px;">
   WebKit Test
   </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:52:07.470

在 Internet Explorer 中，您可以`scrollbar-base-color`在 CSS 中使用来更改滚动条的颜色。

其他浏览器可能支持也可能不支持，但它是非标准的。

对于所有其他浏览器，为了影响诸如实际外观（宽度、箭头样式等）之类的东西，您需要用 JavaScript 编写自己的滚动条，这是一个可用性噩梦 - 不要这样做！

# android - 单击视图时在视图上显示透明颜色突出显示

> ID：13733964
> 
> 赞同：2
> 
> 时间：2012-12-05T22:49:53.160
> 
> 标签：android

所以。您知道当您点击 Google+ 应用中的帖子时，整个视图会变成蓝色。我也想这样做，但要使用 ImageView。

我有以下代码片段，将实际图像设置为背景，将选择器设置为主要资源。这看起来不错，但不尊重背景图像的 scaleType ：

```
 <ImageView
            android:id="@+id/painting_image"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:background="@drawable/img"
            android:src="@drawable/selector"
            android:scaleType="centerCrop" /> 
```

顺便说一句，`@drawable/selector`它只是一个显示透明颜色的选择器`state_pressed`：

```
<item android:state_pressed="true">
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
        <solid android:color="#44521400" />
    </shape></item> 
```

如何在尊重 scaleType 的同时完成这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T23:03:25.717

将您包裹`ImageView`在 中`FrameLayout`，并将 定义`FrameLayout`为可点击。注意将 onClick 事件分配给`FrameLayout`，而不是`ImageView`，否则效果会中断！另请注意，`foreground`已设置为选择器，而不是`background`.

```
 <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:clickable="true"
        android:foreground="@drawable/imagebutton_selector" >

        <ImageView
            android:id="@+id/painting_image"
            android:layout_width="match_parent"
            android:layout_height="250dp"
            android:scaleType="centerCrop" />

    </FrameLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:58:20.207

ScaleType 仅适用于 src 可绘制对象，而不适用于背景。考虑将第二个选项与覆盖视图一起使用，您将在其中实现点击操作，如下所示：

```
 <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/painting_image"
            android:layout_width="match_parent"
            android:layout_height="250dp"
            android:scaleType="centerCrop" />

        <View
            android:layout_width="match_parent"
            android:layout_height="250dp"
            android:background="@drawable/imagebutton_selector"
            android:onClick="onImageClick" />
     </FrameLayout> 
```

# makefile - 如何仅将某些编译器标志与某些目标相关联

> ID：13733965
> 
> 赞同：1
> 
> 时间：2012-12-05T22:49:52.323
> 
> 标签：makefile

我只想为某些 make 目标定义一些宏。例如。

```
all : process1 process2

prcoess1: process1.c process.h

prcoess2: process2.c process.h

%.o:%.c
        $(CC) $(CCOPTS) -o $@ $<

CCOPTS += -DEXTRA1 
extra1 : clean all

CCOPTS += -DEXTRA2
extra2 : clean all 
```

我希望宏 EXTRA1 仅在我调用`make extra1`. 如果我打电话`make`，我不希望 EXTRA1 被定义。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:58:09.983

```
extra1 : CCOPTS += -DEXTRA1 
extra1 : clean all

extra2 : CCOPTS += -DEXTRA2
extra2 : clean all 
```

请参阅GNU make 手册中的[§6.11 Target-specific Variable Values](http://www.gnu.org/software/make/manual/make.html#Target_002dspecific)。

# scala - Http客户端POST请求xml+soap

> ID：13733966
> 
> 赞同：1
> 
> 时间：2012-12-05T22:50:13.650
> 
> 标签：scala, soap, xmlhttprequest

我想在 Scala 中向这个 API [http://api.atinternet-solutions.com/toolbox/reporting.asmx](http://api.atinternet-solutions.com/toolbox/reporting.asmx)发出一个 post 请求 我首先用这样的 curl 来做：

```
curl -X POST -T post.txt -H "Content-Type: application/soap+xml; charset=utf-8" http://api.atinternet-solutions.com/toolbox/reporting.asmx -v 
```

我得到了我的预期。

现在我想用一个简单的 HttpClient 以编程方式调用 API

```
val httpClient = new DefaultHttpClient()
def postRequest=new HttpPost("https://api.atinternet-solutions.com/toolbox/reporting.asmx")
postRequest.addHeader("Content-Type","application/soap+xml ; charset=utf-8")
postRequest.addHeader("SOAPAction","\"http://www.xiti.com/queryReport\"")
val file=new File("post.txt")
val fe=new FileEntity(file,"application/soap+xml;charset=utf-8")
postRequest.setEntity(fe)
val httpResponse=httpClient.execute(postRequest)
println(httpResponse.getStatusLine.toString)
val rspStr=Source.createBufferedSource(httpResponse.getEntity.getContent).mkString
println(rspStr) 
```

但我收到 HTTP/1.1 500 Internal Server Error 并打印 rspStr 产量

```
"?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><soap:Code><soap:Value>soap:Receiver</soap:Value></soap:Code><soap:Reason><soap:Text xml:lang="en">Server was unable to process request. ---&gt; Root element is missing.</soap:Text></soap:Reason><soap:Detail /></soap:Fault></soap:Body></soap:Envelope" 
```

post.txt 如下所示，除了我设置了好的信息。

```
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Header>
    <NXHeader xmlns="http://www.xiti.com/">
      <GUID>string</GUID>
      <SecurityKey>string</SecurityKey>
      <Site>int</Site>
    </NXHeader>
  </soap12:Header>
  <soap12:Body>
    <queryReport xmlns="http://www.xiti.com/">
      <startDate>int</startDate>
      <endDate>int</endDate>
      <query>string</query>
      <param>string</param>
      <typereport>XML or CSV</typereport>
    </queryReport>
  </soap12:Body>
</soap12:Envelope> 
```

正在工作的 curl 动作是从我的 scala 项目目录中完成的。我在 scala 中打印了 post.txt 并得到了很好的内容。

我无法弄清楚出了什么问题。感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:45:57.387

[我用调度库](http://dispatch.databinder.net/Dispatch.html)试过你的电话。

这是我的代码

```
import dispatch._
import java.io.File

object ToolBox {

    val endpoint =  url("https://api.atinternet-solutions.com/toolbox/reporting.asmx").POST
        .addHeader("Content-Type","application/soap+xml ; charset=utf-8")
        .addHeader("SOAPAction",""" "http://www.xiti.com/queryReport" """)

    def report = Http( endpoint <<< new File("post.txt") > as.xml.Elem)

    def tryReport = {
        val res = report.either
        for {
            ex <- res.left
        } yield "Something got wrong " + ex.getMessage
    }

} 
```

服务回复像您一样的*状态 500*`faultString` ，但响应 xml 中的内容是：`A parameter is missing in your NXHeader or you have a namespace issue.`

这是您所期望的吗，因为`post.txt`正文仅包含[查询报告](http://api.atinternet-solutions.com/toolbox/reporting.asmx?op=queryReport)示例中的占位符，而不是实际参数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:56:16.700

我发现出了什么问题。代替

```
def postRequest 
```

经过

```
val postRequest. 
```

再次感谢

# python - 带有 mrjob 的 Unicode 文件

> ID：13733969
> 
> 赞同：2
> 
> 时间：2012-12-05T22:50:35.810
> 
> 标签：python, unicode, mrjob

我正在尝试使用 mrjob 运行基本字符计数。该文件是一个 unicode UTF-8 文本文档，其中包含中文字符等符号。当我运行字符计数时，我只得到返回的 ASCII 字符集中的符号计数。

据我了解，mrjob 使用字节文件，因此应该能够处理 unicode。知道如何进行这项工作吗？

字符计数代码：

```
import collections
from mrjob.job import MRJob

import pdb

class MRCharCount(MRJob):
    def __init__(self, *args, **kwargs):
        super(MRCharCount, self).__init__(*args, **kwargs)
        self.charCount = collections.Counter()

    def mapper(self, _, value):
        #value = value.decode('utf-8')
        if 0:
            yield
        self.charCount += collections.Counter(value)

    def mapper_final(self):
        for (c, count) in self.charCount.iteritems():
            #c = c.decode('utf-8')
            #pdb.set_trace()
            yield c, count

    def reducer(self, key, values):
        #key = key.decode('utf-8')
        yield key, sum(values)

if __name__ == '__main__':
    MRCharCount.run() 
```

示例文件：

```
"WantedCropped/13.jpg"  " 

蘑,-'此四郡咸瀉] 郡〝"同樹之吟[』赦〝連仙〝如五嶽〝Z蟲 總輝…埃 哪沛國樹也- 山嗚〕們義丘蜴〝紫陽鳳陽盎 枝也' 衡山泰山岱山也o委篤珊白俗因‵ 本踫順!〝 一抵以一 郡名而尊』冠〕，〝 夫[迥及砷洲咯l處嬤喵I奏 裔們彼此蕪汪一隃o4[姑聖叭}]五仰悔耐存蜘已吐琪〝 貴 天涯若北鄰 〝′ 聯盧吥以『千載重歡取硼」寫出子〝仃 『 之首) 苴〈垚思於此耳@ 仁 十] 本踫岫群屁〈屾}呱』力‵ 嚴〝'肋麻叭勘屾l支流喉巾清_I忖世鼻 { 次懸殊顯見舊本有歟. 征屾鮪以更) 例如'扣_『l屾 荳斗!閩之金釵溪踫喎、 慄沛國 郡文褶丕〞倣下十 屾

 】  【Iˋ 【】蔔lI_I(‵′l|忖|钀|ˋ| ˋ ˋ 〉_】IL 〝l

〝 咽,世揀侍皿^加〞剴]長予曰夢金懷 眸哪′博慶) .詛屾'戌… 材丕派下十世孫允石刀』懦寫予、 予_.趴更 正o

一】 蒼甫朱處派‵ 係友屾鞈忪派下廿四世孫公友 丕始遷) 其癆瞳鄢庸{父) 立以′公友一公 下五世蓀‵ 均求丕瀉肇基始淜) 紀以廿一 ll.lI屢」o 舊譜誤在公友雁者之上.啞闆荻〝'. 友一公是十』^世〝 稽穴』友蚕生於明嘉崝甲辰 即—扒』]兀一 五五如四年‵ 一世租 燃皿公居逕口』′ 是'公一兀「八七穴年‵ 其澗萋距有山〈百七十』^年

陡聶繭卯缸臟曹[囊 止喋 .寬芡一兀一 光冗 一_一」'曄__

' 
```

任何想法如何汉字计数可以工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:21:34.100

从[MRJob 文档](http://packages.python.org/mrjob/writing-and-running.html)中并不能立即看出 MRJob是如何解释其输入的。似乎`.mapper()`正在调用，`value`并将输入文件中的单行设置为字节字符串。在这种情况下，当您传递`value`到时`collections.Counter()`，它将计算行中每个字节的出现次数，而不是每个多字节字符。

因此，我希望您应该取消注释`value = value.decode('utf-8')`，然后它应该可以工作 - 或者至少比以前更接近工作。

# c# - 在 UserControl 中渲染大画布

> ID：13733973
> 
> 赞同：1
> 
> 时间：2012-12-05T22:51:10.023
> 
> 标签：c#, gdi+, doublebuffered

几天来，我一直在尝试实施此操作时遇到麻烦。关于我正在尝试做的事情，我已经广泛搜索了类似的问题，但我没有遇到直接帮助我解决问题的问题。

基本上，我在`UserControl`课堂上将瓷砖渲染到网格上。这是我正在开发的基于 Tile Engine 的世界编辑器。这是一个开放世界文档的屏幕截图和一些刷过的图块。

![在此处输入图像描述](../Images/47356869b3dde4c0dfc6a92f092cd15d.png)

最初，我打算`Bitmap`在我的控件中使用一个作为世界预览画布的控件。例如，使用画笔工具时，当您移动鼠标并按住左键时，它会将光标下方最近的图块设置为画笔的图块，并将其绘制在位`layer`图上。控件的`OnPaint`方法被覆盖到`layer`相对于绘制事件的剪切矩形绘制位图的位置。

这种方法的问题是，在处理大世界时，位图会非常大。我需要这个应用程序在世界大小上具有通用性，而且很明显，每次将大型位图渲染到控件上时都会出现性能问题。

目前，我在控件的覆盖`OnPaint`事件中直接将图块绘制到控件上。这很棒，因为它不需要大量内存。例如，每个 tile 的`(1000, 1000)`世界`(20, 20)`（总画布大小为`(20000, 20000)`）在整个应用程序的大约 18mb 内存中运行。虽然不是内存密集型，但它是相当密集的处理器，因为每次控件无效时，它都会遍历视口中的每个图块。这会产生非常烦人的闪烁。

我想要完成的是一种在内存使用和性能方面处于中间状态的方法。本质上是双重缓冲世界，以便在重绘控件时不会闪烁（表单调整大小、焦点和模糊、滚动等）。以 Photoshop 为例——当它溢出容器视口时，它如何渲染打开的文档？

`OnPaint`作为参考，这是我使用上述直接绘制方法的控件的覆盖。

`getRenderBounds`返回一个相对于`PaintEventArgs.ClipRectangle`用于渲染可见图块的矩形，而不是循环遍历世界中的所有图块并检查它是否可见。

```
protected override void OnPaint(PaintEventArgs e)
{
    WorldSettings settings = worldSettings();

    Rectangle bounds = getRenderBounds(e.ClipRectangle),
        drawLocation = new Rectangle(Point.Empty, settings.TileSize);

    e.Graphics.InterpolationMode = 
        System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor;
    e.Graphics.SmoothingMode = 
        System.Drawing.Drawing2D.SmoothingMode.None;
    e.Graphics.PixelOffsetMode = 
        System.Drawing.Drawing2D.PixelOffsetMode.None;
    e.Graphics.CompositingQuality = 
        System.Drawing.Drawing2D.CompositingQuality.HighSpeed;

    for (int x = bounds.X; x < bounds.Width; x++)
    {
        for (int y = bounds.Y; y < bounds.Height; y++)
        {
            if (!inWorld(x, y))
                continue;

            Tile tile = getTile(x, y);

            if (tile == null)
                continue;

            drawLocation.X = x * settings.TileSize.Width;
            drawLocation.Y = y * settings.TileSize.Height;

            e.Graphics.DrawImage(img, 
                drawLocation, 
                tileRectangle, 
                GraphicsUnit.Pixel);
        }
    }
} 
```

如果您需要我的代码中的更多上下文，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:05:42.920

诀窍是*根本不*使用大位图。您只需要一个覆盖可见区域的位图。然后你画出任何可见的东西。

为此，您需要将数据与位图分开维护。这可以是一个简单的数组或一个数组/列表，其中包含一个简单的类，其中包含每个块的信息，例如世界位置。

当您的块在可见区域内时，您可以绘制它。您可能需要也可能不需要遍历整个数组，但这并不是真正的问题（您也可以在单独的线程上计算可见数组）。您还可以通过创建区域索引使函数更智能，这样您就不会迭代所有块。

要将新块添加到数组中，请计算其画布位置到世界坐标，添加它然后再次渲染数组（或绘制块的区域）。

这也是系统绘制具有可滚动区域的控件的方式。

启用双缓冲将保持清晰和无闪烁。

在这种情况下，我还将使用带有单独滚动条的面板并计算滚动条的相对位置。

# iis-7 - 如何在 64 位模式下运行应用程序池？

> ID：13733978
> 
> 赞同：0
> 
> 时间：2012-12-05T22:51:26.623
> 
> 标签：iis-7, windows-server-2008, application-pool

如何在安装了 IIS7 的 Windows Server 2008 R2 x64 上以 64 位模式运行应用程序池？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T11:09:22.990

您没有告诉它在 64 位模式下运行，您只告诉它是否要在 32 位模式下运行它。默认情况下，它应该以 64 位运行。

# abap - 从转换规则填充 0LOGSYS

> ID：13733984
> 
> 赞同：0
> 
> 时间：2012-12-05T22:51:43.090
> 
> 标签：abap, sap-bw

当发生来自数据源的负载时，我试图在 DSO 中填充 infoobject 0LOGSYS。这个想法是您可以告诉特定要求需要从哪个源系统加载数据。到目前为止，我已经为 0LOGSYS 的转换规则设置了一个例程。没有语法错误，一切都在加载期间运行，但没有填充数据。试图调试，但由于某种原因我的 BREAKPOINT 没有被拾起。

这是我放在例程中的代码。另外，我正在尝试在不分配任何源字段的情况下执行此操作，因此这可能会导致问题。不过不确定。

```
TYPE-POOLS: RSSM.

Data: G_S_MINFO TYPE RSSM_S_MINFO.

CALL FUNCTION 'RSDG_ID_GET_FROM_LOGSYS'

EXPORTING

i_source_system = G_S_MINFO-LOGSYS

IMPORTING

e_soursysid = RESULT

EXCEPTIONS

id_not_found = 1. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:07:14.013

以不同的方式解决了这个问题。可以通过“if_rsbk_request_admintab_view”的方法从任何请求中提取运行时属性，该方法在每个转换例程开始时自动实例化。这是我放在例程中的代码。

```
*declaring a local variable like the result type LOGSYS
Data: lvSource like RESULT.

*runs a method to get the source system from the runtime attributes of
*the request
*"p_r_request" is an instance of "if_rsbk_request_admintab_view" which
*has many different methods for runtime attributes
lvSource = p_r_request->GET_LOGSYS( ).
RESULT =  lvSource. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:48:17.560

如果这是完整的源代码，那么没有返回任何内容也就不足为奇了。您声明了一个名为 的新结构化变量`G_S_MINFO`，不为其分配任何值并返回其内容。除非您从代码示例中删除了应该用值填充变量的步骤，否则如果返回的不是初始值，那将是一个严重的错误。

**编辑：**即使使用更新的代码，我仍然怀疑这是否可行。现在您传递`G_S_MINFO-LOGSYS`给一个功能模块，该模块应该在不初始化的情况下查找一些系统 ID。垃圾进垃圾出。或者在这种情况下，初始值输入，初始值输出。

# jquery-mobile - 在 jquery 移动页脚导航中更改填充、边距和字体大小

> ID：13733988
> 
> 赞同：1
> 
> 时间：2012-12-05T22:52:46.837
> 
> 标签：jquery-mobile, navigation

我正在尝试调整我在 jquery 移动页脚中的某些按钮中的填充和/或边距和/或字体大小，以创建更多的空间。

目前，这些按钮内部似乎有一些填充物，我可以将它们挤得更紧，它会给我更多的空间来包含更多的文本。

这是我用来创建导航的内容：

```
 <div data-theme="a" data-role="footer" data-position="fixed" class="ui-bar">
        <div data-role="controlgroup" data-type="horizontal">
            <a href="/home/howworks" data-transition="fade" data-theme="a" data-icon="">
                How This Works
            </a>
            <a href="/home/privacypolicy" data-transition="fade" data-theme="a" data-icon="">
                Privacy
            </a>
            <a href="/home/termsandconditions" data-transition="fade" data-theme="a" data-icon="">
                Conditions
            </a>
        </div>
    </div> 
```

如果可能的话，我希望能够加入一两种风格并创造更多空间。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:51:03.257

不确定您到底在追求什么，但这可能是：

```
.ui-footer .ui-btn-inner {
    padding: 1px !important;
}

.ui-footer .ui-btn-text {
    font-size: 10px;
    padding: 5px;
} 
```

如果您愿意，可以在 JS-fiddle 上试用：http: [//jsfiddle.net/g6QH5/](http://jsfiddle.net/g6QH5/)

​</p>

# sql - 从 T-SQL 中的给定 URL 解析域

> ID：13733990
> 
> 赞同：5
> 
> 时间：2012-12-05T22:52:55.313
> 
> 标签：sql, sql-server, tsql, parsing, url

我找到了这个答案，但想扩展这个问题，在堆栈上或通过搜索谷歌找不到任何解决方案。

[来自 URL SQL 的子字符串域名](https://stackoverflow.com/questions/5578379/substring-domainname-from-url-sql)

基本上，上面的链接用一个简单的 URL 解决了我的问题，比如用 google 的结果解析“www.google.com”。

我正在寻找扩展的是上面链接中的解决方案对仅返回地图的 url 没有帮助，例如“www.maps.google.com”。

我想要的是让它从网址“www.maps.google.com”返回“google”或从“www.test.example.com”返回“example”。

如果有人对此有解决方案，我将不胜感激。

更新：更具体地说，我还需要解析二级域等“www.maps.google.com.au”以返回“google”

这是我的 Sql 函数。

```
CREATE FUNCTION [dbo].[parseURL]  (@strURL varchar(1000))
RETURNS varchar(1000)
AS
BEGIN

IF CHARINDEX('.', REPLACE(@strURL, 'www.','')) > 0
SELECT @strURL = LEFT(REPLACE(@strURL, 'www.',''), CHARINDEX('.',REPLACE(@strURL,              'www.',''))-1)
Else
SELECT @strURL = REPLACE(@strURL, 'www.','')

RETURN @strURL
END 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T23:16:17.873

我建议这个

```
DECLARE @URL nvarchar(max) = 'www.maps.google.com'

DECLARE @X xml = CONVERT(xml,'<root><part>' + REPLACE(@URL, '.','</part><part>') + '</part></root>')

SELECT [Domain] = T.c.value('.','varchar(20)')
FROM @X.nodes('/root/part[position() = last() - 1]') T(c) 
```

方法是将 URL 转换为 XML，然后使用 XPath 查找域。

**更新**

关于二级域，我相信将它们全部放在一个表中的唯一可靠方法（顶级域可能也应该在一个表中）然后你可以使用这个查询：

```
DECLARE @URL nvarchar(max) = 'www.maps.google.com'

DECLARE @X xml = CONVERT(xml,'<root><part>' + REPLACE(REVERSE(@URL), '.','</part><part>') + '</part></root>')

;WITH SplitCTE AS
(
    SELECT
        (SELECT REVERSE(T.c.value('.', 'nvarchar(256)')) FROM @X.nodes('/root/part[. = ../part[position() = 1]]') T(c)) AS TLD,
        (SELECT REVERSE(T.c.value('.', 'nvarchar(256)')) FROM @X.nodes('/root/part[. = ../part[position() = 2]]') T(c)) AS D2,
        (SELECT REVERSE(T.c.value('.', 'nvarchar(256)')) FROM @X.nodes('/root/part[. = ../part[position() = 3]]') T(c)) AS D3
)
SELECT 
    CASE
        WHEN SLD.Domain IS NULL THEN S.D2 ELSE S.D3
    END AS Domain
FROM
    SplitCTE AS S
    LEFT JOIN TLD ON TLD.Domain = S.TLD
    LEFT JOIN SLD ON SLD.Domain = S.D2 
```

我用于此示例的 TLD/SLD 表如下。完整的域列表在这个[wiki](http://en.wikipedia.org/wiki/List_of_Internet_top-level_domains)中。小心使用`NVARCHAR`，因为有些是本地化的。

```
CREATE TABLE dbo.TLD
(
    Domain nvarchar(10)
)
GO

CREATE TABLE dbo.SLD
(
    Domain nvarchar(10)
)
GO

INSERT TLD VALUES ( 'com')
INSERT TLD VALUES ( 'uk')
INSERT SLD VALUES ( 'co') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-27T21:29:59.777

TLD 问题确实会减慢您的代码速度，并增加维护要求，因此我决定包含子域。这是我使用的：

```
ALTER FUNCTION dbo.spExtractDomainFromURL ( @strURL NVARCHAR(1000) )
RETURNS NVARCHAR(100)
AS
BEGIN
    --Strip Protocol
    SELECT  @strURL = SUBSTRING(@strURL, CHARINDEX('://', @strURL) + 3, 999)

    -- Strip www subdomain
    IF LEFT(@strURL, 4) = 'www.'
        SELECT  @strURL = SUBSTRING(@strURL, 5, 999)

    -- Strip Path
    IF CHARINDEX('/', @strURL) > 0
        SELECT  @strURL = LEFT(@strURL, CHARINDEX('/', @strURL) - 1)

    RETURN @strURL
END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T23:15:05.843

有人可能会有更好的解决方案，但这是我得到的：

```
LEFT(RIGHT(@strURL, CHARINDEX('.', REVERSE(@strURL)) +  CHARINDEX('.', SUBSTRING(REVERSE(@strURL), CHARINDEX('.', REVERSE(@strURL)) + 1, LEN(@strURL))) - 1), CHARINDEX('.', SUBSTRING(REVERSE(@strURL), CHARINDEX('.', REVERSE(@strURL)) + 1, LEN(@strURL))) - 1) 
```

我不是最擅长字符串操作的人，所以我确信可以缩短我很长的代码行。基本上，我会使用 REVERSE 函数来获取最后一个时期，然后从那里开始。我的代码在最后一个逗号和倒数第二个逗号之间引入了字符。

请注意，使用 www.test.co.uk 之类的网站不适用于我的解决方案。我建议这只是一个起点，您必须为异常值编写代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-05T19:43:41.240

我在这里所做的是在协议“：//”之后对 url 进行子串化。

然后我使用该字符串并将所有文本子串到第一个正斜杠。

如果您需要它进行查询，您也可以在一行中完成它，或者像我一样将它用作标量函数。

此外，最好添加一些代码来检查空值或一般情况下的错误字符串。如果要将其保留为单行代码，请尝试使用 ISNULL 和 NULLIF 函数。

```
DECLARE @urlSansProtocol VARCHAR(MAX)
SET @urlSansProtocol = Substring(@url, CharIndex('://', @url)+3 ,LEN(@url))
RETURN Substring(@urlSansProtocol, 0   ,CharIndex('/',  @urlSansProtocol )) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-06T23:02:23.447

PARSENAME 将最多拆分四个项目，由“。”分隔。标记。Parsename 从右开始计数。如果要解析的 object_name 有四个以上的部分，NULL 将被重新计算。

```
select PARSENAME ( REPLACE('www.maps.google.com.au', 'www.','')  , 3 ) 
select PARSENAME ( REPLACE('www.maps.google.com', 'www.','')  , 2 ) 
```

# c# - 使用 ASP MVC 在视图中显示为列表的嵌套模型的性能问题

> ID：13733991
> 
> 赞同：1
> 
> 时间：2012-12-05T22:52:58.347
> 
> 标签：c#, asp.net-mvc-3, performance, entity-framework

最近一个项目的性能测试使我重新设计了我的模型，并摆脱了嵌套模型。我将尝试详细说明我所看到的内容，希望有人能纠正我的理解。

我从具有嵌套地址的位置模型开始。

```
public class Location
{
    [Key]
    public int LocationId { get; set; }
    public string Name { get; set; }
    public int? AddressId {get;set;}
    public virtual Address Address{get;set;}
}
public class Address
{
    [Key]
    public int AddressId {get;set;}
    public string Street1 { get; set; }
    public string Street2 { get; set; }
    public string Street3 { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; }
} 
```

该模型在控制器中填充了 LINQ（cms 是我的 DbContext 并包含用于位置和地址的 DbSet）：

```
public ActionResult ListLocations()
{    
    return View((from l in cms.Locations select l).ToList());
} 
```

该视图是一个简单的循环，用于在表格中显示位置。

```
<table id="myTable" class="tablesorter">
    <thead>
        <tr>
            <th>Name</th>
            <th>City</th>
            <th>State</th>
            <th>Zip</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null)
        {
            foreach (var item in Model)
            {
            <tr>
                <td>@item.Name</td>
                <td>@item.Address.City</td>
                <td>@item.Address.State</td>
                <td>@item.Address.Zip</td>
            </tr>
            }
        }
    </tbody>
</table> 
```

此方法按预期工作，但平均需要大约 2000 毫秒才能完成。我添加的每个额外位置都会使响应慢约 120 毫秒。

使用 Stack Exchange 的 MiniProfiler，我能够将每 120 毫秒的延迟精确到第一次“检索”地址以进行显示。如果后续位置具有相同的地址，则重复显示的性能成本是微不足道的。在所有情况下，“名称”属性检索都是微不足道的。

似乎嵌套模型没有与父模型同时检索。

当我通过将 Address 的属性直接组合到 Location 中来展平模型时。我能够以平均 300 毫秒的速度执行一个完整的请求，在添加更多位置时对此响应进行微不足道的更改。

**我的问题**- 实体框架是否提供了一种一次性缓存或检索嵌套模型的方法，或者这种嵌套模型的惰性实例化是否符合惯例？有没有一种方法可以在嵌套模型方法与平面模型中实现相似的响应时间？

与往常一样，选项 c) 的可能性我是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:39:26.780

尝试使用该`Include`方法在查询中包含地址。就像：

```
return View((from l in cms.Locations.Include("Address") select l).ToList()); 
```

[http://msdn.microsoft.com/en-us/library/bb738708.aspx](http://msdn.microsoft.com/en-us/library/bb738708.aspx)

您的代码现在正在执行查询以获取列表中每个位置的地址。如果您没有指定要在查询中获取哪些项目，EF 会进行延迟加载，并且它需要的每个对象都会生成一个新查询。

# asp.net - ASP.NET 多个站点地图

> ID：13733996
> 
> 赞同：1
> 
> 时间：2012-12-05T22:53:12.180
> 
> 标签：asp.net, sitemap, sitemappath, web.sitemap

我是 ASP.NET 的新手。我需要用另一种语言（葡萄牙语到英语）创建一个新版本的网站。

我创建了一个新文件夹 (/english/)，其中包含已翻译的页面和控件。

“/Default.aspx”页面有一个重定向到“/english/Default.aspx”的链接

问题是链接菜单仍然使用它的原始语言，并且新文件夹中的其他页面将无法加载。我想他在根文件夹中加载默认站点地图文件，而不是在新文件夹中加载。

如何使页面加载我在这个新文件夹中的站点地图文件，以便它可以加载新的链接菜单？

# javascript - Javascript源码错误，找不到，请帮忙

> ID：13733997
> 
> 赞同：0
> 
> 时间：2012-12-05T22:53:15.283
> 
> 标签：javascript, jquery

我在第 30 行有一个错误。这是文件的结尾。

我显然错过了一些右括号之类的东西，但我不知道，我要疯了。请协助。

```
(function($) {
$(document).ready(function() {
    $('.ajaxpager .pager  a').live('click', function() {
        href = $(this).attr('href');
        //    display = href.indexOf('display');
        display = "pager-display";
        if (href.indexOf('?') == -1) {
            href += '?';
        };
        href += '&ajax=1';
        $('#' + display).ajaxStart(function() {
            var html = '<div>';
            html += '<img src="' + Drupal.settings.rlisting['loadingimage'] + '" border="0" />';
            html += '</div>';
            $(this).html(html);
        });
        $.ajax({
            type: "post",
            url: href,
            dataType: 'html',
            success: function(result) {
                $('#' + display).hide().html(result).fadeIn('slow');
            }
        });

        return false;
    });
})(jQuery);​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:55:20.850

您在末尾缺少右括号

```
(function($) {
    $(document).ready(function() {
        $('.ajaxpager .pager  a').live('click', function() {
            href = $(this).attr('href');
            //    display = href.indexOf('display');
            display = "pager-display";
            if (href.indexOf('?') == -1) {
                href += '?';
            };
            href += '&ajax=1';
            $('#' + display).ajaxStart(function() {
                var html = '<div>';
                html += '<img src="' + Drupal.settings.rlisting['loadingimage'] + '" border="0" />';
                html += '</div>';
                $(this).html(html);
            });
            $.ajax({
                type: "post",
                url: href,
                dataType: 'html',
                success: function(result) {
                    $('#' + display).hide().html(result).fadeIn('slow');
                }
            });

            return false;
        });
    }); // <-- HERE 
})(jQuery); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:56:29.920

去除`$(document).ready(function() {`

如果您更改`.live`为`.on`then 您不需要在 DOM 准备好时绑定该函数。