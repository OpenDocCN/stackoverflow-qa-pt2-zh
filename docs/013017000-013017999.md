# StackOverflow 问答 13017000-13017999

# image-processing - 关于 camshiftdemo.c 的问题

> ID：13017003
> 
> 赞同：1
> 
> 时间：2012-10-22T13:39:37.047
> 
> 标签：image-processing, robotics, c, opencv

我正在使用`camshiftdemo.c`与 OpenCV 2.3.1 捆绑在一起的程序：

[https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/camshiftdemo.c?rev=1429](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/camshiftdemo.c?rev=1429)

我想知道如何使用这个程序来指示机器人跟随选择的对象？我正在尝试进行一个实验，看看它是否会起作用，但我显然需要稍微调整一下。

camshiftdemo 的工作方式是在您选择的对象周围绘制一个红色椭圆（通过用鼠标单击它）。当物体移动时，红色椭圆也会移动。如果物体移动得更远，椭圆的尺寸会减小，如果靠近相机，椭圆的尺寸会增大。

为了指示一个机器人，我在想我告诉它如果红色日食的大小减小则向前移动，如果它增加则向后移动。如果日食向左移动，机器人将向左移动，如果日食向右移动，机器人将向右移动。

听起来很简单，但是这段代码在哪里绘制了日食？如果物体在 10 秒内来回移动会怎样？这是否意味着机器人停留在同一个地方（即我应该在机器人运动中引入延迟吗？）？

我的目标是获取`camshiftdemo.c`代码来指示机器人移动{向前、向后、向左、向右}。

那么我怎样才能让机器人跟随一个物体，无论是通过使用日食的大小还是其他方式呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:17:57.670

似乎您正在寻求一种将物体检测播种到 CamShift 跟踪器中的方法。

根据您的机器人的处理能力，您可能需要考虑一种更简单的方法。如果您可以选择您正在寻找的目标，我会选择网球之类的东西，因为它们是一种非常明亮且独特的颜色。现在您的对象具有已知的颜色特征，您可以使用轮廓处理相当简单地跟踪它。此外，如果您决定使用颜色跟踪，请考虑切换到 HSV 或 YCbCr 等颜色空间。这将允许颜色检测对强度变化不太敏感。[这](https://stackoverflow.com/a/8598208/951860)是我较早的一篇关于 OpenCV 中颜色隔离的文章。

您将采取的主要步骤是：

1.  [inRange](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=inrange#void%20inRange%28InputArray%20src,%20InputArray%20lowerb,%20InputArray%20upperb,%20OutputArray%20dst%29)（使用颜色阈值隔离对象）
2.  [findContours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#void%20findContours%28InputOutputArray%20image,%20OutputArrayOfArrays%20contours,%20OutputArray%20hierarchy,%20int%20mode,%20int%20method,%20Point%20offset%29)（使用它来查找对象 blob；您可能想要最大的一个，但如果它是圆形的，您也可以[按圆形过滤）](https://stackoverflow.com/questions/10873710/robustly-find-n-circles-with-the-same-diameter-alternative-to-bruteforcing-houg/10873927#10873927)
3.  [时刻](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#moments)（找到检测到的对象的质心）

或者，您可以将对象质心输入 CamShift 跟踪器，并将上述步骤用作采集模式。

希望对您有所帮助...

# javascript - 删除本地应用程序的跨域限制

> ID：13017004
> 
> 赞同：2
> 
> 时间：2012-10-22T17:58:03.210
> 
> 标签：javascript, html, ajax, macos

我希望能够使用网络技术制作一些简单的桌面应用程序。我可以轻松打开 XCode，将 Web 视图与我的 HTML 捆绑在一起（或者只是指向一个网站？）

但是我可以取消 XHR 的跨域限制吗？似乎您*应该*能够使用桌面应用程序。如果我用 Objective-C 编写它，访问任何域都不安全。

你怎么做呢？或者，为 OS X 制作本机包装器的最佳框架/环境是什么，可以让我自动执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:02:01.153

你应该看看优秀的 PhoneGap 框架： http: [//phonegap.com/](http://phonegap.com/)。它基本上是一个围绕 web 视图的包装器，它公开了一个很好的 API，以便您与相机和其他原生功能集成。它也是跨平台的，因此您可以在 Android 上拥有相同的应用程序，例如，只需最少的额外代码。

至于绕过跨域限制，您可以将 PhoneGap`.plist`文件中的 URL 列入白名单。更多详细信息可在此处获得：[域白名单指南](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)。

* * *

对于 OS X 开发，这个问题及其答案提供了一些可能对您有所帮助的选项：[Phonegap like platform for Mac App Store？](https://stackoverflow.com/q/8863985/830125).

至于创建具有原生外观和感觉的界面，[jQuery Mobile](http://jquerymobile.com/)和[Sencha Touch](http://www.sencha.com/products/touch)是两个流行的移动设备 Web 技术框架，并且在大多数情况下它们也适用于桌面应用程序。我参与过一些 jQuery Mobile 项目，这些项目被设计为桌面 Web 应用程序，但也通过响应式 Web 设计工具（如媒体查询）作为移动 Web 应用程序工作。

# android - Android Fragment 与 Activity 组

> ID：13017009
> 
> 赞同：7
> 
> 时间：2012-10-22T17:58:24.440
> 
> 标签：android, android-fragments, android-tabhost, activitygroup

我正在开发一个 Android 应用程序，我想为每个选项卡实现一个活动组。但由于 Activity Group 已被弃用，我必须使用 Fragments。我最近几天在谷歌上搜索并对该主题进行了一些研究，但我仍然不明白。下图描述了我想要做的事情。此外，我直接来自 iOS，我需要一些关于我的理论的反馈。

![在此处输入图像描述](../Images/1b09bd4ea74da3fa9bea1397aa7c4c41.png)

如您所见，每个 Fragment 都由一个 WebView Fragment 组成。当用户单击该 WebView 片段中的链接时 - 请求被捕获并替换一个新片段，该片段再次保存一个 WebView 并加载在前一个片段中单击的链接。在某一时刻，用户决定返回第一个 Fragment 并按下返回按钮。

碎片应该以相反的顺序从堆栈中弹出，直到他再次看到第一个。理想情况下，每个 Fragment 都应该保存他的实例状态，这样当用户返回时，WebView 不需要再次加载站点。

我遇到了 ActionBar Sherlock，它提供了有关 Fragments Tabs 的示例。还有一个片段堆栈的示例。将这两个示例结合起来是理想的，这样每个选项卡都包含一个 Fragment Stack。

我的代码结构如下所示：

**我的 TabHost 片段**

```
public class MyActivity extends SherlockFragmentActivity {
static TabHost mTabHost;
static TabManager mTabManager;

public static int THEME = R.style.Theme_Sherlock_Light;

@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(THEME); //Used for theme switching in samples
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs);
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();
    mTabManager = new TabManager(this, mTabHost, R.id.myRealTabContent);

    // adding some Fragment Tabs
    mTabManager.addTab(mTabHost.newTabSpec(tabNames[i]).setIndicator(tabNames[i]),
                FragmentStackSupport.CountingFragment.class, bundle);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tab", mTabHost.getCurrentTabTag());
}

// defining the Tab Manager 
```

每个选项卡的片段堆栈应该是什么样子？目前我有一个片段活动，每个选项卡内都有一个片段。但我没有达到我需要的逻辑。

这是我的代码：[My Fragment with WebView inside](http://pastebin.com/fSR6h2qx)

我会很高兴获得一些反馈和提示（或者网络上有任何示例吗？）。我对内存也有一些担忧——当用户点击和点击时，内存必须保存堆栈中的每个片段。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:59:13.203

每次用户单击链接时，我都想不出很多好的理由来创建新片段。你有理由这样做吗？如果你只是简单地从 shouldOverrideUrlLoading() 返回 false 而不是创建新的 Fragment，WebView 将加载新页面，如果你想返回，可以使用 canGoBack() 和 goBack() 方法。要处理后退按钮按下，您可以在活动中覆盖 onKeyDown，并执行以下操作：

```
 if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack() {
        myWebView.goBack();
        return true;
    } 
```

# objective-c - 如果当前语言不存在本地化版本，如何加载默认语言 plist？

> ID：13017013
> 
> 赞同：1
> 
> 时间：2012-10-22T17:58:51.093
> 
> 标签：objective-c, ios, localization, plist

我正在加载 plist，如下所示：

```
 NSString * plistPath = [[NSBundle mainBundle] pathForResource:@"Names" ofType:@"plist"];
 NSDictionary * contentArray = [[NSDictionary alloc] initWithContentsOfFile:plistPath]; 
```

但如果当前设备语言的 plist 不存在，则 contentArray 为 nil。我怎么能默认英语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:49:54.780

`NSBundle`如果您愿意，有效地使用[`CFBundleDevelopmentRegion`](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-130430)应用程序/捆绑包文件中的（又名“本地化本地开发区域”）条目`Info.plist`来指定“后备”语言。

例如，假设我们有以下捆绑布局：

```
MyApp.app
 // no Numbers.plist here
.....
en.lproj/
    Numbers.plist // english-version
es.lproj/
    Numbers.plist // spanish-version 
```

并且，Info.plist 指定了`CFBundleDevelopmentRegion`一个`en`.

如果法国用户运行应用程序，并且没有本地化`Numbers.plist`文件`fr`，`NSBundle`则应返回目录`Numbers.plist`中的`en.lproj`文件。

# linux - 如何用尽 /dev/urandom 进行测试？

> ID：13017023
> 
> 赞同：3
> 
> 时间：2012-10-22T17:59:56.063
> 
> 标签：linux, security, ubuntu, random, entropy

我最近遇到了一个错误，当我的 linux 服务器上的熵变得太低并且 /dev/urandom 的读取返回的字节数少于预期的字节数时，我没有正确处理。

如何通过测试重新创建它？有没有办法降低系统的熵或可靠地清空 /dev/urandom？

我希望能够进行回归测试来验证我的修复。我正在使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:27:55.793

根据[random(4)](http://www.kernel.org/doc/man-pages/online/pages/man4/random.4.html)手册页，

```
read from the /dev/urandom device will not block 
```

如果你想让它阻塞，你应该从`/dev/random`（没有任何）读取很多字节。`u`（有多少取决于硬件和系统）。

所以你不能“exaust” `/dev/urandom`，因为

> ```
>  A read from the /dev/urandom device will not block waiting for 
>  more entropy. As a result, if there is not sufficient entropy in 
>  the entropy pool, the returned values are theoretically vulnerable 
>  to a cryptographic attack on the algorithms used by the driver. 
> ```

我相信你应该使用`/dev/random`which 确实可以用尽，通过阻塞。但是你不应该从中读取超过 256 位。

# windows - 用于在 Windows 上将 node.js 连接到 odbc 的库？

> ID：13017024
> 
> 赞同：21
> 
> 时间：2012-10-22T17:59:57.403
> 
> 标签：windows, node.js, ms-access, odbc

我正在寻找一个允许 node.js 在 Windows 上连接到 ODBC 的库。到目前为止，我发现的所有库似乎都适用于 UnixODBC 但不适用于 Windows，有人可以推荐一个适用于 Windows 的库吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-31T11:27:53.503

虽然自述文件只提到了 UnixODBC，但这个项目： [https](https://github.com/wankdanker/node-odbc) ://github.com/wankdanker/node-odbc 实际上会在 Windows 上安装和工作。

您可以使用以下命令将其安装在 Windows 上：

`npm install odbc`

但是您将需要在 Windows 上构建本机模块的各种要求：

[https://github.com/TooTallNate/node-gyp](https://github.com/TooTallNate/node-gyp)

# twitter - Twitter 小部件返回 400 错误请求错误

> ID：13017025
> 
> 赞同：0
> 
> 时间：2012-10-22T17:59:58.480
> 
> 标签：twitter, bad-request, http-status-code-400

突然之间，我网站上的 Twitter 小部件没有显示任何推文。我检查了我的控制台日志，它返回了 400 错误请求错误。这在一个小时前还可以正常工作！我今天一直在处理这个页面，并且可能刷新了 30 多次。我想知道这是否与它有关。

我已经阅读了与同一问题相关的其他 SO 问题，有人说这是 Twitter 的问题，你只需要等待。这对我来说是个问题。我现在在小部件应该放置的地方有一个很大的空白空间，看起来非常丑陋和不专业！

有什么方法可以检测到这个错误并在其位置显示一条礼貌的消息“抱歉，Twitter 小部件是*** * 垃圾，无法加载。”？或者你能给我更多的信息吗？

```
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 10,
  interval: 30000,
  width: 270,
  height: 250,
  theme: {
    shell: {
      background: '#111111', color: '#B000BB'
    },
    tweets: {
      background: '#111111', color: '#999999', links: '#faadfa'
    }
  },
  features: {
    scrollbar: true, loop: false, live: true, behavior: 'all'
  }
}).render().setUser('myClientsTwitterUsername').start();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:57:34.007

我刚刚找到了答案，所以希望它会帮助其他人。

显然，我正在使用的 Twitter 小部件不使用 Twitter 的 API，因此，每个 IP 地址每小时只能处理 150 个请求。通过我今天在此页面上所做的工作，刷新页面 30-40 次，并且小部件每 30 秒更新一次，看来我已经使用了所有 150 个请求，并且在限制刷新之前一直被禁止进一步请求。我通过在我的 iPad（它使用不同的 IP 地址/网络）上加载我的网页来检查这一点，并且小部件看起来很好。我还等了 1 小时，小部件在受影响的网络/IP 上恢复了活力。

所以，我最好开始使用正确的 Twitter API 小部件。

希望这可以帮助某人。

# python - 奇怪的额外循环

> ID：13017027
> 
> 赞同：5
> 
> 时间：2012-10-22T18:00:01.340
> 
> 标签：python, python-3.x

我对 Python 还是有点陌生​​，但是，我现在觉得*很*愚蠢，因为我刚刚花了一个小时试图弄清楚为什么这个 for 循环没有做我想要的。我不应该在 for 循环上花费一个小时。无论如何，我正在尝试生成一个字典列表，并给它们每个一个唯一的数字，所以我这样做......

```
def initiate(n):
    records = {'num':0,'blah':0,'doubleblah':0}
    x = []
    for i in range(n):
        x.append(records)
        x[i]['num'] = i
    return x

x = initiate(4)
print(x) 
```

我希望函数返回这个——

```
[
 {'num': 0, 'doubleblah': 0, 'blah': 0}, 
 {'num': 1, 'doubleblah': 0, 'blah': 0}, 
 {'num': 2, 'doubleblah': 0, 'blah': 0}, 
 {'num': 3, 'doubleblah': 0, 'blah': 0}
] 
```

但它实际上返回了这个——

```
[
 {'num': 3, 'doubleblah': 0, 'blah': 0}, 
 {'num': 3, 'doubleblah': 0, 'blah': 0}, 
 {'num': 3, 'doubleblah': 0, 'blah': 0}, 
 {'num': 3, 'doubleblah': 0, 'blah': 0}
] 
```

...当我在函数中添加一些打印语句时，我发现它似乎将数字添加到列表中的每个字典，而不仅仅是当前字典。我真的不知道代码将如何添加到所有字典中，因为我明确使用`x[i] = i`仅将数字添加到当前字典中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:05:05.533

发生的事情是您每次都将对同一字典的引用附加到列表中。

```
print list(map(id, initiate(4)))
# [42283920, 42283920, 42283920, 42283920] 
```

您的函数正确编写为：

```
def initiate(n):
    return [ {'num': i, 'blah': 0, 'doubleblah': 0} for i in range(n) ] 
```

这每次都会产生一个新的字典实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T07:23:40.040

与用户主题一起使用，这里有一个解决方案。

但值得注意的是 dict.copy 是一个浅拷贝，这意味着如果该源记录有非原始成员，您的原始问题将持续存在。更准确地说，问题源于成员是可变数据类型。整数、字符串、浮点数、布尔值和其他几个内置类型是不可变的。不变性是一种属性，意味着对象一旦创建就不能更改。例如，字典和列表是可变的

```
def initiate(n, records):
    x = []
    for i in range(n):
        x.append (records.copy())
        x[i]['num'] = i
    return x

records = {'num':0,'blah':0,'doubleblah':0}
x = initiate(4, records)

print(x) 
```

```
[{'num': 0, 'blah': 0, 'doubleblah': 0}, {'num': 1, 'blah': 0, 'doubleblah': 0}, {'num': 2, 'blah': 0, 'doubleblah': 0}, {'num': 3, 'blah': 0, 'doubleblah': 0}]
[Program finished] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-10T07:36:22.163

尝试这个：

```
def initiate(n):
    my_list = []
    for i in range(n):
        my_list.append(
            {
                'num': i,
                'blah': 0,
                'doubleblah': 0
            }
        )

    return my_list 
```

# maven - JNLP：tools.jar 不在类路径中

> ID：13017033
> 
> 赞同：1
> 
> 时间：2012-10-22T18:00:26.270
> 
> 标签：maven, jnlp, tools.jar

又是我。而今天，我面临着一个奇怪的问题。要么我没有正确理解某些东西，要么我只是想念树前的阿甘。

以下场景：

*   我正在使用捆绑在 JDK 1.7 中的 JavaFX
*   我需要两个客户端运行时：桌面（jar）和小程序（浏览器内的 jnlp）
*   我为该项目设置了一个 Maven 项目
*   我有一个父 pom 和不同的子模块
*   我需要我的客户端与 Web 服务进行通信，因为我选择了[CXF](http://cxf.apache.org/)作为框架（我需要能够在运行时切换 Web 服务）以连接到 Web 服务
*   “连接到 Web 服务的东西”是一个名为 wsConnector 的自己的 maven 子模块

这是更多环境信息和我的 pom 片段：

```
mvn -version
Apache Maven 3.0.4 (r1232337; 2012-01-17 09:44:56+0100)
Maven home: C:\Program Files (x86)\Apache\maven-3.0.4\bin\..
Java version: 1.7.0_07, vendor: Oracle Corporation
Java home: C:\Program Files\Java\jdk1.7.0_07\jre
Default locale: de_DE, platform encoding: Cp1252
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows" 
```

为了能够编译 wsConnector 子模块，它再次处理所有 Web 服务连接的东西，我需要从 JDK 集成 tools.jar，因为 CXF 需要它。

来自父 pom.xml 的相关属性：

```
<properties>
    <maven.compiler.source>1.7</maven.compiler.source>
    ...
</properties> 
```

子模块 pom.xml：

```
<properties>
    <cxf.version>2.6.2</cxf.version>
</properties>

<dependencies>
    <dependency>
        ... // some other sub modules
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http-jetty</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>tools</artifactId>
        <version>${maven.compiler.source}]</version>
        <scope>system</scope>
        <systemPath>${java.home}/../lib/tools.jar</systemPath>
    </dependency>
</dependencies> 
```

如果我跑步`mvn clean package`，一切正常，花花公子。在我的客户端应用程序的部署目录中（jar、生成​​的 HTML 和 jnlp 文件也在其中），我也找到了`tools.jar`.

如果我查看 JNLP 文件，我会找到以下条目：

```
<jar href="tools.jar" size="15226565" download="eager" /> 
```

现在我的问题是：如果我用 运行客户端`java -jar client.jar`，一切正常。但是，如果我调用 HTML / JNLP 文件，我会得到一个`ClassNotFoundException`，指出 tools.jar 不在类路径中。因此，不管我是从服务器还是本地主机打开小程序。

这是堆栈跟踪：

```
java.lang.IllegalStateException: Unable to create schema compiler
 at org.apache.cxf.common.jaxb.JAXBUtils.createSchemaCompilerWithDefaultAllocator(JAXBUtils.java:694)
 at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:303)
 at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:270)
 at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:263)
 at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:198)
 at com.multiguide.ws.WebServiceConnector.setWsdlUrl(WebServiceConnector.java:45)
 at com.multiguide.ws.WebServiceConnector.setWsdlUrl(WebServiceConnector.java:31)
 at com.multiguide.view.administration.WebServiceInformationPanel.connect(WebServiceInformationPanel.java:130)
 at com.multiguide.view.administration.WebServiceInformationPanel.refresh(WebServiceInformationPanel.java:70)
 at com.multiguide.view.administration.WebServiceInformationPanel.<init>(WebServiceInformationPanel.java:45)
 at com.multiguide.view.administration.WebServiceInformationPanel$$FastClassByGuice$$da5f387e.newInstance(<generated>)
 at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)
 at com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60)
 at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
 at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)
 at com.google.inject.internal.SingleParameterInjector.inject(SingleParameterInjector.java:38)
 at com.google.inject.internal.SingleParameterInjector.getAll(SingleParameterInjector.java:62)
 at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:84)
 at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)
 at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
 at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1031)
 at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
 at com.google.inject.Scopes$1$1.get(Scopes.java:65)
 at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
 at com.google.inject.internal.SingleParameterInjector.inject(SingleParameterInjector.java:38)
 at com.google.inject.internal.SingleParameterInjector.getAll(SingleParameterInjector.java:62)
 at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:84)
 at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)
 at com.google.inject.internal.FactoryProxy.get(FactoryProxy.java:54)
 at com.google.inject.internal.SingleParameterInjector.inject(SingleParameterInjector.java:38)
 at com.google.inject.internal.SingleParameterInjector.getAll(SingleParameterInjector.java:62)
 at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:84)
 at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)
 at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
 at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1031)
 at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
 at com.google.inject.Scopes$1$1.get(Scopes.java:65)
 at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
 at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)
 at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)
 at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)

... 9 more
Caused by: javax.xml.bind.JAXBException - with linked exception:

java.lang.ClassNotFoundException: com/sun/tools/internal/xjc/api/XJC
 at org.apache.cxf.common.jaxb.JAXBUtils.createSchemaCompiler(JAXBUtils.java:679)
 at org.apache.cxf.common.jaxb.JAXBUtils.createSchemaCompilerWithDefaultAllocator(JAXBUtils.java:686)

... 49 more
Caused by:

java.lang.ClassNotFoundException: com/sun/tools/internal/xjc/api/XJC
 at java.lang.Class.forName0(Native Method)
 at java.lang.Class.forName(Unknown Source)
 at org.apache.cxf.common.jaxb.JAXBUtils.createSchemaCompiler(JAXBUtils.java:672)

... 50 more 
```

当我使用 guice 时，这是一个类加载问题吗？没有这个例外，该应用程序就像一个魅力。我可以做所有我需要做的网络服务工作：连接、切换 URL，......所以我不认为这是原因。

另外请注意：我认为现在在这里没关系，但是由于我使用的是 guice，当然我的 JNLP 文件有

```
<security>
  </all-permissions>
</security> 
```

旗帜。

你们有没有人有这方面的经验？也许我真的只是想念一件事，但任何帮助（一如既往;））非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:50:23.730

最后我在类路径中得到了 tools.jar。我发现它在我交付的 jar 文件的清单中丢失了，其中包含我的客户端应用程序。

由于这是一个 JavaFX 应用程序，我需要在*客户*端子模块的清单文件配置的 classpath 标记中添加 tools.jar 依赖项：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifestEntries>
                        ...
                        <Class-Path>jfxrt.jar tools.jar</Class-Path>
                    </manifestEntries>
                    <manifest>
                        <addClasspath>true</addClasspath>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

在类路径中有 tools.jar 后，CXF 尝试调用 java 编译器，查看错误消息：

```
org.apache.cxf.common.jaxb.JAXBUtils logGeneratedClassNames
INFO: Created classes: <list of my generated JAVA files from the wsdl file here>
[ERROR] IOException during exec() of compiler "javac". Check your path environment variable.
Okt 23, 2012 3:46:20 PM org.apache.cxf.endpoint.dynamic.DynamicClientFactory createClient
SEVERE: Could not compile java files for <url to wsdl file here>. 
```

所以这对我来说意味着我需要在客户端机器上运行和设置 JDK。如果我也为 javac 服务（只是一个思想游戏，不要怪我 :)），这意味着我需要在客户端机器上执行一些东西，这对我来说是不行的。

为此，我将找到我最初想要的替代解决方案（解决方案将外包生成-ws-访问类）。

不过，对于如何在类路径中集成 tools.jar 的最初问题，我上面写的内容为我解决了这个问题。

# actionscript-3 - AS3 播放音频并循环播放

> ID：13017035
> 
> 赞同：0
> 
> 时间：2012-10-22T18:00:30.353
> 
> 标签：actionscript-3, audio

我正在尝试让一个音频文件在我的项目的背景中播放，但到目前为止还没有成功。这是我到目前为止所得到的。

```
package  {

    import flash.display.*; 
    import flash.events.*; 
    import flash.net.*; 
    import flash.media.*; 

    public class Music extends MovieClip {

        // Create a sound
        private var music:Sound;

        // Use a URLRequest for file path
        private var request:URLRequest;

        // Create a sound buffer
        private var buffer:SoundLoaderContext;

        // Create a sound channel
        private var channel:SoundChannel;

        public function Music() {
            // constructor code
            //Instantiate all sound objects
            buffer = new SoundLoaderContext(1000);
            request = new URLRequest("SMB3-Grassland-Map.mp3");
            music = new Sound(request, buffer);

            // Play music and assign it to a channel
            channel = music.play();

            // Add an event listener to the channel
            channel.addEventListener(Event.SOUND_COMPLETE, loopMusic);
        }

        // playMusic method restarts music
        private function playMusic()
        {
            channel = music.play();
            channel.addEventListener(Event.SOUND_COMPLETE, loopMusic);
        }

        // Channel event listener call playMusic method
        private function loopMusic(e:Event)
        {
            if (channel != null)
            {
                channel.removeEventListener(Event.SOUND_COMPLETE, loopMusic);

                playMusic();
            }
        }

    }
} 
```

这只是播放外部音频文件并让它不断循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:06:34.037

`.play()`您可以向该方法添加参数，而不是让事件侦听器在声音完成后再次播放声音。第一个参数表示您希望它在声音中的哪一点开始播放，第二个参数表示您希望它播放多少次，如果您想应用声音变换，则使用第三个参数。在你的情况下，你可以这样做`.play(0, int.MAX_VALUE);`会给你你正在寻找的连续循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:47:23.920

“问题是它根本没有播放任何东西。”

我复制了您的代码并创建了一个 AS3 类文件（替换我自己的本地 MP3 URL）然后创建了一个包含以下内容的 AS3 文件：

```
import Music;
var mus:Music = new Music(); 
```

并运行它。声音正确播放和循环播放。

它对我有用，所以也许这就是没有错误的原因。很抱歉这个问题，但你的扬声器在吗？您的系统是否正在播放来自其他来源的声音... cd、mp3 播放器？

我用过 play(0, 1000); @Goose 提到并且效果很好；简单有效。

# python - Python 写多列到 sqlite

> ID：13017036
> 
> 赞同：1
> 
> 时间：2012-10-22T18:00:29.823
> 
> 标签：python, sqlite

我正在做一个小项目，我创建了一个辅助函数，它将一串逗号分隔的值写入数据库，就好像它们是值一样。我意识到这样做会产生影响，但这很小，我需要让它继续下去，直到我能做得更好

```
def db_insert(table,data):
    """
    insert data into a table, the data should be a tuple
    matching the number of columns with null for any columns that
    have no value. False is returned on any error, error is logged to
    database log file."""

    if os.path.exists(database_name):
        con = lite.connect(database_name)

    else:
        error = "Database file does not exist."
        to_log(error)
        return False

    if con:
        try:
            cur = con.cursor()
            data = str(data)
            cur.execute('insert into %s values(%s)') % (table, data)
            con.commit()
            con.close()

        except Exception, e:
            pre_error = "Database insert raised and error;\n"
            thrown_error = pre_error + str(e)
            to_log(thrown_error)

        finally:
            con.close()

    else:
        error = "No connection to database"
        to_log(error)
        return False 
```

database_name 等...在脚本的其他地方定义。

除非有任何其他明显的明显错误；我需要能够做的（通过这种方法或其他方法，如果有建议）是允许某人创建一个列表，其中每个值代表一个列值。因为我不知道要填充多少列。

所以有人使用它如下：
data = ["null", "foo","bar"]
db_insert("foo_table", data)

这会将数据插入到表名 foo_table 中。用户可以知道表中有多少列，并提供正确数量的元素来满足这一点。我意识到最好使用 sqlite 参数，但有两个问题。首先，您不能使用参数仅指定表中的值。其次是你需要知道你提供了多少价值。你所要做的;

cur.execute('插入表值(?,?,?), val1,val2,val3)

您需要能够指定三个？我正在尝试编写一个通用函数，该函数允许我获取任意数量的值并将它们插入到任意表名中。现在，在我尝试将“null”作为值传递之前，它的工作相对正常。其中一列是主键并具有自动增量。所以传入 null 将允许它自动递增。还有其他需要空值的情况。问题是python一直将我的null用单引号括起来，sqlite抱怨它是数据类型不匹配，因为主键是一个整数字段。如果我尝试将 None 作为 python null 等效项传递，则会发生同样的事情。所以有两个问题。

如何插入任意数量的列。
如何传递一个空值。

感谢您对这个问题和过去问题的所有帮助。

抱歉，这看起来像这个 [Using Python quick insert many columns into Sqlite\Mysql](https://stackoverflow.com/questions/3732490/using-python-quick-insert-many-columns-into-sqlite-mysql?rq=1)

很抱歉，直到我写完这篇文章后我才找到它。

结果如下：

```
def db_insert(table,data):
"""
insert data into a table, the data should be a tuple
matching the number of columns with null for any columns that
have no value. False is returned on any error, error is logged to
database log file."""

if os.path.exists(database_name):
    con = lite.connect(database_name)

else:
    error = "Database file does not exist."
    to_log(error)
    return False

if con:
    try:
        tuple_len = len(data)
        holders = ','.join('?' * tuple_len)

        sql_query = 'insert into %s values({0})'.format(holders) % table
        cur = con.cursor()
        #data = str(data)
        #cur.execute('insert into readings values(%s)') % table
        cur.execute(sql_query, data)
        con.commit()
        con.close()

    except Exception, e:
        pre_error = "Database insert raised and error;\n"
        thrown_error = pre_error + str(e)
        to_log(thrown_error)

    finally:
        con.close()

else:
    error = "No connection to database"
    to_log(error)
    return False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:06:54.673

第二个问题是“为我工作”。当我将 None 作为值传递时，它将正确地将该值与数据库进行来回转换。

```
import sqlite3
conn = sqlite3.connect("test.sqlite")

data = ("a", None)
conn.execute('INSERT INTO "foo" VALUES(' + ','.join("?" * len(data)) + ')', data)

list(conn.execute("SELECT * FROM foo"))      # -> [("a", None)] 
```

# jquery - iPhone问题上的jQuery淡入淡出图像

> ID：13017037
> 
> 赞同：0
> 
> 时间：2012-10-22T18:00:31.957
> 
> 标签：jquery, iphone

我希望我网站上的缩略图在加载时淡入，而不是以传统方式加载。我正在使用 jQuery 通过在 CSS 中将每个 img 的不透明度设置为 0 来实现这一点，然后使用 jQuery 将其淡化为 1，如下所示：

```
image.bind("load", function () { $(this).fadeTo(1000, 1); }); 
```

这在桌面浏览器中可以正常工作，但在 iPhone 上的 Mobile Safari 或 Chrome 中，图像的淡入淡出就像加载和淡入淡出都是在同一个线程中执行的一样，并且加载会阻止动画。我怀疑这可能正是正在发生的事情，我只能忍受它，但我在这里发帖是希望有人有破解或聪明的方法。

我尝试用不透明的 div 覆盖每个图像并将其淡化为透明，但它会产生相同的结果。

您可以在以下网址看到它的实际效果：[http ://www.anthonyburns.co.uk](http://www.anthonyburns.co.uk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:06:42.010

听起来您在使用 .fadeTo() 时遇到帧率问题

我建议使用 Safari 中内置的 CSS3 过渡效果来获得您正在寻找的平滑淡入淡出效果：[https ://developer.apple.com/library/archive/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Introduction.html](https://developer.apple.com/library/archive/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Introduction.html)

# ios - UIPageViewController 中的两种不同的数据模型

> ID：13017043
> 
> 赞同：0
> 
> 时间：2012-10-22T18:00:54.930
> 
> 标签：ios, cocoa-touch, uipageviewcontroller

假设我们需要两种不同类型的 UIPageViewController 页面（例如，一种只有文本和图像，另一种可以是 UIWebView）。

如果我想说第 1-10 页是第一个数据模型，而第 20-30 页是第二个数据模型，有没有办法使用两个数据模型？还是我必须使用一个涵盖所有内容的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:48:57.687

你不只是从 UIPageViewController 委托返回 UIViewControllers 吗？从技术上讲，您可以根据需要返回尽可能多的不同 UIViewController。

# unit-testing - 使用 Spock，您如何通过 grails 命令行运行特定功能？

> ID：13017050
> 
> 赞同：2
> 
> 时间：2012-10-22T18:01:35.140
> 
> 标签：unit-testing, grails, groovy, spock, geb

我正在为单元和功能测试运行 Spock 测试。很棒的图书馆。

我想知道如何从 grails 命令行运行 Spock Spec 的特定功能。

我知道如何运行所有 spock 测试或运行特定规范，但我不知道如何运行特定功能。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:32:42.897

正如 Peter Niederwieser 在他的评论中提到的那样，Spock 不可能做到这一点。但是，注释`@IgnoreRest`将用于相同的目的。标记问题已回答。谢谢

# c# - 从组合框中获取 .value 属性

> ID：13017051
> 
> 赞同：2
> 
> 时间：2012-10-22T18:01:35.810
> 
> 标签：c#, wpf, combobox

我使用了以下代码...

```
ComboboxItem item = new ComboboxItem();
item.Value = "M232M2333";
item.Text = "Apples";
comboSpriteSelect.Items.Add(item); 
```

这是一个示例，但实际上我正在从文本文件中读取数百个这些值并将它们应用于组合框。

使用时我似乎无法取回该`.Value`属性`.SelectedValue`，但是当我调试时，我看到该值已分配给组合框。

```
lbl1.Text = comboSpriteSelect.SelectedValue.ToString(); 
```

任何人都可以提供解决方案吗？是因为我没有绑定数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:05:15.670

既然你有`ComboboxItem object in combo items`. 从 SelectedItem 获取 ComboboxItem 并通过将 SelectedItem 转换回 ComboboxItem 来取回 ComboboxItem 类的值。

```
lbl1.Text = ((ComboboxItem)comboSpriteSelect.SelectedItem).Value; 
```

如果`Value is not string`那时你可能需要调用 ToString() 就可以了

```
lbl1.Text = ((ComboboxItem)comboSpriteSelect.SelectedItem).Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:06:35.453

这是因为您没有数据绑定。[MSDN Doc](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)声明[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)由[SelectedValuePath](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvaluepath.aspx)属性确定，该属性在您的示例中未设置。

利用

```
lbl1.Text = ((ComboboxItem)comboSpriteSelect.SelectedItem).Value; 
```

反而。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:08:21.880

`lbl1.Text = comboSpriteSelect.SelectedItem.ToString();`而不是 SelectedValue

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:18:13.177

`ToString`在您的`ComboboxItem`班级中覆盖

```
public override string ToString()
{
   return Value;
} 
```

然后调用`comboSpriteSelect.SelectedItem.ToString();`将返回项目的值；

# event-handling - 强制执行结果 SSIS 不工作

> ID：13017053
> 
> 赞同：1
> 
> 时间：2012-10-22T18:01:43.180
> 
> 标签：event-handling, ssis

我在 SSIS 控制流中有一个文件系统任务。如果失败，则不应使包失败。

我可以强制任务本身成功并禁用EventHander，但我怎样才能让整个包返回0（成功值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:49:03.030

双击序列行并将值更改为完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:41:45.943

1.  将文件系统任务的 FailParentOnFailure 属性设置为 False。
2.  将文件系统任务的 MaximumErrorCount 设置为一个足够高的数字，以容纳您在运行任务时可能收到的“正常”错误的数量。

（[请参阅 2010 年 9 月 3 日的 Microsoft 帖子](http://connect.microsoft.com/SQLServer/feedback/details/381681/ssis100-failparentonfailure-failpackageonfailure-are-erroneously-regarded-to-be-always-true)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:54:50.917

您可以在包本身上设置为`ForceExecutionValue`，如果您想始终返回成功，则设置为`True``ForceExecutionResult``Success``MaximumErrorCount`

# android - 如何防止 IntelliJ 将资源复制到项目编译器输出目录中？

> ID：13017054
> 
> 赞同：11
> 
> 时间：2012-10-22T18:01:50.507
> 
> 标签：android, intellij-idea

我在 IntelliJ 中有以下目录结构，其中包含一个 Android 库项目：

```
java/com/example/base/AndroidManifest.xml
java/com/example/base/assets # contains Android assets
java/com/example/base/res    # contains Android resources
java/com/example/base/Base.java
java/com/example/base/base.iml 
```

`base.iml`包含以下内容：

```
<content url="file://$MODULE_DIR$">
  <sourceFolder url="file://$MODULE_DIR$"
                isTestSource="false"
                packagePrefix="com.example.base" />
  <sourceFolder url="file://$MODULE_DIR$/gen" isTestSource="false" />
  <excludeFolder url="file://$MODULE_DIR$/res" />
</content> 
```

当我构建依赖于我的库项目的 Android 应用程序项目时，出现错误：

```
[myapp] java.util.zip.ZipException: duplicate entry: res/drawable/image_shadow.9.png 
```

在“**项目结构”**对话框中，我将**项目编译器输出**配置为项目`out`根目录下的目录。当我尝试构建我的 Android 项目时，我注意到我的 Android 资源的副本最终位于该`out/production/base/com/example/base/res/`文件夹下。

我的假设是，我的 Android 资源被视为“普通”Java 资源（您将使用 加载的类型`Class.getResource()`），这就是它们被复制到`out/production`的原因，这反过来又导致了`duplicate entry`我看到的异常。

知道是否是这种情况吗？如果是这样，我怎样才能防止这些文件被复制？在 Eclipse`<classpathentry>`中，文件中的元素`.classpath`有一个`excluding`属性，该属性采用 glob 模式来防止这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-11T14:31:16.587

我遇到了类似的问题，因为该`main`目录被标记为“来源”。

因此，在项目结构中，对于 Android 方面，在“结构”选项卡下，我有：

`... Resources directory: .../src/main/res ...`

在模块的正常“源”选项卡下，`main`目录下`src`已标记为“源”。

我通过使 Sources 选项卡看起来像这样来修复它：

`- src (unmarked) - main (unmarked) - java (Sources) - res (Resources)`

所以我猜这个错误是因为 res 东西被打包到 zip 中作为源和资源，因此重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T20:52:00.587

您应该有一个项目结构，如：

*   项目/src/main/res
*   项目/src/main/assets
*   项目/src/main/java
*   项目/src/main/AndroidManifest.xml

无论如何，对于 res 文件夹，您应该有一个这样的条目：

```
 <sourceFolder url="file://$MODULE_DIR$/src/main/res" type="java-resource" /> 
```

# sql - 具有多个数据源的 SSRS 订阅

> ID：13017055
> 
> 赞同：0
> 
> 时间：2012-10-22T18:01:56.513
> 
> 标签：sql, reporting-services

使用 SSRS 的订阅功能，我可以按计划自动运行报告，并发送带有报告结果的电子邮件。我只使用单个数据源完成了这项工作。我的问题是，我可以在使用多个数据源时这样做吗？

我的目标是在一组数据源中运行相同的报告，然后将来自每个数据源的所有结果作为订阅发送到一封电子邮件中。

在我的具体情况下，每个数据源只需要一行。我的意图是形成一个表格，每个数据源都有一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:02:23.867

> 使用 SSRS 的订阅功能，我可以按计划自动运行报告，并发送带有报告结果的电子邮件。我只使用单个数据源完成了这项工作。我的问题是，我可以在使用多个数据源时这样做吗？

这不清楚，因为单个报告只能与单个订阅匹配。

> 我的目标是在一组数据源中运行相同的报告，然后将来自每个数据源的所有结果作为订阅发送到一封电子邮件中。

在使用多个数据源的单个报表中执行此操作。

> 在我的具体情况下，每个数据源只需要一行。我的意图是形成一个表格，每个数据源都有一行。

听起来您在这里有两个选择：

1.  使用链接服务器：
    *   链接服务器[链接 1](http://msdn.microsoft.com/en-us/library/ms188279%28v=sql.90%29.aspx)。
    *   创建链接服务器[链接 2](http://msdn.microsoft.com/en-us/library/ff772782.aspx)。
    *   编写一个查询，为每个源返回一行，并使用 UNION ALL 创建单个结果集/“表”。
2.  创建使用多个数据源的报告。
    *   每个源都有一个**单行表**，然后在渲染时排列表*看起来*像一个单行表。

为结合了多个数据源的新报告创建一个订阅。

# asp.net-mvc-3 - mvc3 区域有主机名

> ID：13017065
> 
> 赞同：2
> 
> 时间：2012-10-22T18:02:57.263
> 
> 标签：asp.net-mvc-3, iis, asp.net-mvc-routing, asp.net-mvc-areas

我正在寻找创建一个 MVC3 网站。我们至少需要两个区域，但每个区域都需要不同的 url。像这样：

> domain.com/ 转到 /
> 
> admin.domain.com/ 转到 /areas/admin
> 
> anotherSite.com/ 转到 /areas/portal

在做了一些研究之后，我发现了[Lucero 的链接](https://stackoverflow.com/questions/9009132/mvc3-areas-routing-and-urls)，您可以使用 HostNameContraint，如下所示：

```
public class HostNameContraint : IRouteConstraint
{
    protected string _hostname;

    public HostNameContraint(string hostname)
    {
        _hostname = hostname;
    }

    bool IRouteConstraint.Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        if (httpContext.Request.Url.Host == _hostname)
            return true;
        return false;
    }
} 
```

然后像这样注册约束：

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { area = "", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
            new { hostname = new HostNameContraint("domain.com") },
            new[] { "MVCProject.Controllers" }
        );

        routes.MapRoute(
            "Admin_Default2", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { area = "Admin", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
            new { hostname = new HostNameContraint("admin.domain.com") },
            new[] { "MVCProject.Controllers.Areas.Admin.Controllers" }
        );

        routes.MapRoute(
            "Portal_Default2", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { area = "Portal", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
            new { hostname = new HostNameContraint("anotherSite.com") },
            new[] { "MVCProject.Controllers.Areas.Portal.Controllers" }
        ); 
```

我有 IIS 设置，以便它们指向每个站点的应用程序的根文件夹。指向根“Domain.com”可以正常工作，但转到“Admin.domain.com”或“Domain.com/admin/”会出现 404“找不到资源”。

**更新** 我已经尝试过在网址开头使用区域名称和不使用区域名称。

> “门户/{controller}/{action}/{id}”

问题是当“门户”区域在路由中时，签名与“anotherSite.com”的名称不匹配，因此它会返回并显示 403.14 - Forbidden。无法列出此目录的内容。同样重要的是要注意，当“门户”区域为 url 参数时，永远不会调用 HostNameConstraint 的构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:39:21.463

为了将 URL 区分为去往一个区域，区域名称需要是 URL 的一部分。否则，该区域将无法从 URL 解析，您将回退到默认路由。此外，最好将默认路由放在最后 - 以确保测试所有其他路由映射

注意在相应的 MapRoute 调用中添加了“Admin/”和“Portal/”：

```
 routes.MapRoute(
        "Admin_Default2", // Route name
        "Admin/{controller}/{action}/{id}", // URL with parameters
        new { area = "Admin", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
        new { hostname = new HostNameContraint("admin.domain.com") },
        new[] { "MVCProject.Controllers.Areas.Admin.Controllers" }
    );

    routes.MapRoute(
        "Portal_Default2", // Route name
        "Portal/{controller}/{action}/{id}", // URL with parameters
        new { area = "Portal", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
        new { hostname = new HostNameContraint("anotherSite.com") },
        new[] { "MVCProject.Controllers.Areas.Portal.Controllers" }
    );

routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { area = "", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
        new { hostname = new HostNameContraint("domain.com") },
        new[] { "MVCProject.Controllers" }
    ); 
```

# java - 当spring bean定义文件多次加载到应用程序时会发生什么？

> ID：13017066
> 
> 赞同：0
> 
> 时间：2012-10-22T18:02:56.970
> 
> 标签：java, spring, javabeans

我只是想知道何时将`Spring.xml`文件多次加载到应用程序中，然后使用`ClassPathXmlApplicationContext`. 例如，如果我想通过在每个类中`Spring.xml`创建新实例来将定义的服务放入我的类中。`ApplicationContext`这种方法是否每次都创建新的 bean 而不会破坏以前创建的 bean？这会产生任何内存问题吗？当我在 Spring 网站的[ClassPathXmlApplicationContext API](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html)中看到时，我发现了这一点。此刷新是否通过破坏现有 bean 来创建现有 bean 的新 bean 定义？

```
ClassPathXmlApplicationContext(String... configLocations)
      ***Create a new ClassPathXmlApplicationContext, loading the definitions from the given XML files and automatically refreshing the context.*** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:07:19.090

当多次加载相同的 xml 文件时，spring 会多次创建相同的 bean。在大多数情况下，除了启动时间之外，这不会引起问题。但有时你会遇到冲突。例如，如果您的 bean 正在侦听 TCP 端口，然后打开另一个尝试连接到同一端口的 bean，它会失败。

# node.js - 将未知数量的参数传递给 NodeJS 路由

> ID：13017071
> 
> 赞同：4
> 
> 时间：2012-10-22T18:03:23.767
> 
> 标签：node.js, express

如何将未知数量的参数传递给 NodeJS 路由，并将它们保存到数组中？：

```
http://127.0.0.1:3000/param1/param2/param3... 
```

我想过这样做：

```
app.get('/*', myHandler); 
```

并且只是标记字符串，但应该有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:39:02.737

看起来您在 NodeJS 中使用快速路由。如果是这样，您可能想尝试使用正则表达式。如下所示将为您提供 req.params[0] 中的完整路径（/vararg/），但可能有更好的方法：

```
app.get(/^\/vararg\/(.*)/, function(req,res) {  
    res.send("Got parameters : " + req.params[0]); 
}) 
```

因此，如果我在 localhost:3000/vararg/foo/bar/gar 上进行获取，它将发送：

> 得到参数：foo/bar/gar

或者 localhost:3000/vararg/foo 将产生：

> 得到参数：foo

然后您可以将参数拆分为其他部分。

# haskell - 函数式编程语言中的调用站点代码替换

> ID：13017072
> 
> 赞同：4
> 
> 时间：2012-10-22T18:03:32.393
> 
> 标签：haskell, functional-programming

我只是想知道是否可以用函数
式语言进行呼叫站点替换。我认为这
是一种特殊的懒惰形式。

基本上我会在某个地方调用一个带有参数 a 的函数 f：

```
... (f a) ... 
```

然后，该函数将设法
用带有参数 b 的函数 g 替换自己：

```
... (g b) ... 
```

这样下一次调用（fa）的原始调用站点时
，实际上调用了（gb）。

欢迎提示。

再见

PS：它用于即时（JIT）编译。
多态内联缓存等。
参见例如：

 **使用多态内联缓存优化动态 - 类型化对象 - 面向**
语言 Urs Hölzle、Craig Chambers、David Ungar
ECOOP '91 欧洲
面向对象编程会议论文集
[http://selflanguage.org/_static/published/pics.pdf](http://selflanguage.org/_static/published/pics.pdf)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T18:30:16.240

这基本上是自动机箭头：

```
newtype Auto a b = Auto (a -> (b, Auto a b)) 
```

在 Haskell 中，函数不可能替换自身，但自动机箭头表示函数返回自身的新版本以及结果：

```
switcher :: Bool -> Auto Bool Bool
switcher x =
    Auto $ \y ->
        (x, switcher $ if y then not x else x) 
```

自动机箭头的有用之处在于它是一个箭头，因此`Category`实例允许您组合此类函数。还有一个非常有用的应用实例。

旁注：这是箭头函数响应式编程（AFRP）的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:10:43.963

在 Haskell 中，您可以通过 RULES pragma 提供自定义优化重写。
有关详细信息，请参阅[GHC 用户指南 > 重写规则](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/rewrite-rules.html)。

# java - 将数据表保存到数组中会引发 null

> ID：13017075
> 
> 赞同：0
> 
> 时间：2012-10-22T18:03:40.477
> 
> 标签：java, arrays, nullpointerexception

将信息从表传递到二维数组时遇到问题

```
for (int i=0; i < DefaultTableModel.getRowCount(); i++) {
    for (int j=0; j < DefaultTableModel.getColumnCount(); j++) {
        dataConteo[i][j]=DefaultTableModel.getValueAt(i,j);
    }
} 
```

我完全填满了表格，但我仍然收到错误

```
dataConteo[i][j]=DefaultTableModel.getValueAt(i,j); 
```

与`NullPointerException`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:09:37.983

假设`model`不是`null`....

在`for`循环之前，您是否分配了`dataConteo`数组？替换`Type`为实际类型。

```
Type[][] dataConteo = new Type[model.getRowCount()][model.getColumnCount()]; 
```

# php - 为什么我的数组值无法检索并且 isset 对我不起作用

> ID：13017081
> 
> 赞同：1
> 
> 时间：2012-10-22T18:04:13.783
> 
> 标签：php, jquery

我正在尝试创建一个动态搜索功能，但有一个我无法解决的问题。

以下代码有什么问题？

JSON：

```
...
$result=$obj->Decode_Serialize($resource);// method to unserialize string value

$text= isset($result['text_department_code']) ? 
    $result['text_department_code']: 'a';

if(!empty($search) && !empty( $checkbox) && !empty($match) && !empty($sort) && !empty($text))
{
    echo $text= $result['text_department_code'];  // error Notice: Undefined index: text_department_code in line 18
    print $text;
    print_r($result);
}
... 
```

我不知道为什么即使 isset 已包含在内，它也无法正常工作。//$result['text_department_code'];

```
print_r($result) output:
Array
(
    [search_deparment_code] => department_code
    [checkbox_deparment_code] => true
    [match_deparment_code] => all
    [sort_deparment_code] => ASC
    [text_deparment_code] => aa
) 
```

//jquery将序列化字符串传递给ajax

```
function getInstantSearchResult(){
    $('#keypress').keyup(function(){      
        var Post_String = $('#forma').serialize();
        //  ajax_get_data(1,st);
        //alert(Post_String);
        $.ajax({
            type : 'POST',
            url : 'jsonAjaxFinder.php',
            data : {Query_String:Post_String},
            success : function(value){
                alert(value);
                ajax_get_data(1);
            }
        });
    });        
} 
 function ajax_get_data(page){
       var businessUnitRequest;        

       if (window.XMLHttpRequest)
       {
         businessUnitRequest=new XMLHttpRequest();
       }
       else
       {
         businessUnitRequest=new ActiveXObject("Microsoft.XMLHTTP");
       }

        var frame = document.getElementById("frame");  
        frame.style.left='20px';
        var paginations = document.getElementById("pagination");    

        businessUnitRequest.open("POST", "jsonAjaxFinder.php", true);
        businessUnitRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
        businessUnitRequest.onreadystatechange = function (){
                 if((businessUnitRequest.readyState == 4) && (businessUnitRequest.status=200))
                 {

                      frame = document.getElementById("frame");  
                       var leng= frame.rows.length;
                      for (z = leng - 1; z > 0; z--){
                         frame.deleteRow(z);            
                       }
                    var d = JSON.parse(businessUnitRequest.responseText);
                    for(var o in d){
                        var row = frame.insertRow(1);
                        var cell1 = row.insertCell(0);
                        var cell2 = row.insertCell(1);

                        cell1.style.paddingLeft='15%';
                        cell2.style.paddingLeft='1%';
                        cell1.innerHTML=  d[o].department_code;
                        cell2.innerHTML= d[o].description;
                    }    

                 }
        }

             businessUnitRequest.send('no_page='+parseInt(page));
             //+'&serialize='+ serialize
             businessUnitRequest.innerHTML="requesting....";
    } 
```

有人可以向我解释我的问题，因为我不知道如何解决吗？那

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:16:52.720

我不确定你想在这里实现什么？

```
echo $search = $result['text_department_code']; 
```

如果您想回显 $search 是否匹配 $result[...]，请执行以下操作：

```
echo $search == $result['text_department_code']; 
```

如果您想在 $search 中存储 $result[...] 并回显它是否失败，您必须检查 $result[...] 是否再次设置：

```
echo (isset($result['text_department_code']) && $search = $result['text_department_code']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:18:35.607

查看您提供的 var_dump 并将其与您的代码进行比较。你有错别字...

```
print_r($result) output:
Array
(
    [search_deparment_code] => department_code
    [checkbox_deparment_code] => true
    [match_deparment_code] => all
    [sort_deparment_code] => ASC
    [text_deparment_code] => aa
) 
```

转储中有“部门”，数组索引中有“部门”。

本质上，您的所有 if(isset()) 行都返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:20:44.517

我不确定这是否有帮助，但在你引用的 if 语句中，`$result['text_department_code']`但它应该是`$text`

```
if(!empty($search) && !empty( $checkbox) && !empty($match) && !empty($sort) && !empty($text))
{
    echo $search = $text;
    print $search;
    print_r($result);
} 
```

# php - 在页面视图上更新表值？

> ID：13017086
> 
> 赞同：0
> 
> 时间：2012-10-22T18:04:36.117
> 
> 标签：php, mysql, database, triggers

我正在尝试创建一个 PHP 触发器，当用户查看我网站上的某些页面时，它将更新**点**部分中的用户表。

我知道这个过程会像这样

```
on page view > update user > where user id is (**get username from session**) > add 5 to points row 
```

任何人都知道如何设置这样简单的东西来为用户提供查看页面的简单点？

我的网站使用 PHP 和 mySQL 作为数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:15:36.153

使用 cookie 或会话变量来跟踪用户详细信息，例如用户名或 ID。因此，制作页面浏览触发器就像在每个页面的顶部添加一个 mysql 查询一样简单，该查询将更新数据库表以获取视图。有点像论坛的运作方式。

例如

```
<?php

session_start();

$db_connection = mysqli_connect('host','username','password','db');
$user_id = $_SESSION['userid']; //That is asssuming that you had gotten the user id on login

mysqli_query($db_connection, 'UPDATE page_views SET views_column=views_column+1 WHERE userid=$user_id');

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:08:53.830

是的，您可以执行以下操作（如果您拥有用户必须访问的页面）：

```
<?php 
$pointsForThisSite = 5;
include "points_adder.php";
?> 
```

当 Points_adder 查看 $pointsForThisSite 是否已定义且 > 0 时，然后按照您的描述将点添加到数据库中。

那是你要找的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:10:05.250

创建一个 php 函数并在用户每次进入页面时调用它。您不需要 mysql 触发器，因为该操作位于网页上。

```
function add_points($user, $page){
//If users visits too many maybe you don't want to gave him some points.
//add points
} 
```

并调用您要评分的页面中的函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T07:04:39.253

最不显眼的方法是在页面加载后使用 AJAX 调用。调用应该是一个包含文件，该文件执行数据库更新操作并返回 204 响应，以便访问者的浏览器不会等待响应内容。

对于 Apache 服务器；

header('HTTP/1.0 204 无内容');

header('Content-Length: 0', true);

header('Content-Type: text/html', true);

冲洗（）；

// 在这里更新表

# javascript - 在javascript中加入2个键值对选项对象

> ID：13017087
> 
> 赞同：2
> 
> 时间：2012-10-22T18:04:48.167
> 
> 标签：javascript, jquery-dialog

如何合并 2 个键值对 defaultDialogSetup 和 setupArray？

```
var defaultDialogSetup = { modal: true, show: 'fade', hide: 'fade' };

var setupArray = {
                open: function (e) { $(this).load($(link).attr('href')); },
                title: link.innerHTML,               
                width: 300,
                height: 250,
                buttons:
                {
                    "OK": function () { createTemplate($(this), $('form', this)); },
                    "Cancel": function () { $(this).dialog("close"); }
                }
            };

$dialog.dialog(setupArray); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:06:29.837

利用`jQuery.extend()`

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

> 将两个或多个对象的内容合并到第一个对象中。

```
setupArray = $.extend(defaultDialogSetup, setupArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T17:29:59.063

另一个选择是 UnderscoreJS extend()

[http://underscorejs.org/#extend](http://underscorejs.org/#extend)

> 将源对象中的所有属性复制到目标对象，然后返回目标对象。它是有序的，因此最后一个源将覆盖先前参数中的同名属性。

语法与 jQuery 方法非常相似：

> setupArray = _.extend(defaultDialogSetup, setupArray);

# javascript - 在 angularjs 应用程序中使用 requirejs 和 AMD 有什么好处？

> ID：13017092
> 
> 赞同：4
> 
> 时间：2012-10-22T18:05:17.840
> 
> 标签：javascript, requirejs, angularjs

我一直是 requirejs 和 AMD 的支持者，但是自从我开始学习 AngularJS 之后，我觉得将这两种技术结合在一起感到不舒服。

我知道实际上可以使用 requirejs 来管理和加载 angularjs 应用程序中的依赖项，并且相同的开发人员将这两个产品称为“正交”，但它可以增加多少价值？

我想到的第一个论点是依赖注入，它实际上解耦了模块之间的依赖关系，这意味着我不需要跟踪依赖关系或脚本加载顺序（至少大部分时间）。最重要的是，AMD 似乎甚至可以违背 DI 背后的原则，因为它需要将依赖项硬编码到脚本中的某个地方......

那么，在 angulajs 应用程序中使用 AMD 只会增加额外的复杂性而不会带来任何重大优势，这是否明智？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:18:57.463

我不认为 AMD 是依赖注入。它是一个模块加载器。角色不同。RequireJS 为你加载文件：Angular 根本不这样做。

例如，我没有在我的角度依赖列表中列出“下划线”。如果我在服务中需要它，我让 RequireJS 为我加载它。不过，Angular 确实注入了所有应用程序代码。

# php - 每个客户端的 MySQL 数据库

> ID：13017093
> 
> 赞同：2
> 
> 时间：2012-10-22T18:05:18.247
> 
> 标签：php, mysql, sql, database

我需要一些关于这个主题的信息。我搜索了一下，但似乎这真的取决于你的情况。我的情况解释如下：

*我们开发了一个系统，让公司可以跟踪他们的项目和财务状况。他们可以创建订单、在员工之间分配任务、发送发票、检查是否已付款等。*

目前我们有 1 个域和 1 个数据库，其中包含该公司的所有数据。我们也想将此系统用于其他公司，但在 1 个域上，每个公司都有相同的文件。所以我们可以将文件保存在一个地方，并将所有内容保存在我们自己的服务器上。

我们想使用多个数据库，原因如下：

*   我们希望文件位于 1 个位置，更易于维护和更新
*   一个客户不能偶然访问另一个客户的财务数据
*   我们可以对客户数据进行单独备份

在我看来，缺点是：

*   如果表中的某些内容需要更新，您必须在每个数据库中手动执行此操作
*   MySQL 在 100 多个数据库之后会变得非常慢吗？

我是否正确，我们是否通过为每家公司提供个人数据库来做正确的事情？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:08:09.243

从技术上讲，您可以拥有的数据库数量没有限制。简短的搜索[显示](http://forums.mysql.com/read.php?24,20251,20251)有几个人进入了 1000 多个数据库，我认为 100 多个数据库没有问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:13:58.040

> 我们希望文件位于 1 个位置，更易于维护和更新

正如您已经提到的缺点，如果更新需要修改数据库的架构怎么办？`client`与单个数据库（相关表中有指标列）相比，拥有数百个数据库同样难以维护。

> 一个客户不能偶然访问另一个客户的财务数据

但是客户端只能通过您的 webapp 访问数据。如果它因意外或其他原因而受到损害，除了同一数据库中的意外记录之外，还有什么方法可以阻止它访问其他数据库？

[视图](http://dev.mysql.com/doc/en/views.html)可以提供类似的安全优势（尽管目前有一些性能成本）。但是，我倾向于创建存储过程并强制我的应用程序通过它们执行所有数据库操作，其中我可以执行我自己的安全检查，同时将所有数据库访问限制为仅预定义的操作。

> 我们可以对客户数据进行单独备份

仍然可以进行选择性备份，例如使用[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/en/select-into.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:23:21.593

有时最好为每家公司使用自己的数据库。从来没有在理论上，但经常在实践中。

1.  Sql 命令更简洁，更容易编写。
2.  它更安全。如果 sql 查询或脚本出错，公司不会意外访问对方的数据库。您只需要仔细选择数据库。
3.  稍后如果数据库变得太忙，将数据库分离到多个服务器是非常好的。大型数据库或表可能难以拆分。
4.  表保持较小，因此查询也更快。

# c# - 如何从文本文件中获取 2 个数据点

> ID：13017094
> 
> 赞同：1
> 
> 时间：2012-10-22T18:05:19.620
> 
> 标签：c#, file

我有一个文本文件，其中有几点：

```
20,30
5,40
67,34
2,0
98,34 
```

以及如何将此点添加到列表中？这是我制作的代码：

```
Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
dlg.DefaultExt = ".txt";
dlg.Filter = "Text document (.txt)|*.txt";

Nullable<bool> result = dlg.ShowDialog();

if (result == true)
{
    string filename = dlg.FileName;
    _mn.nazwa_pliku.Text = filename;

    int num = 0; //get a number of points/line in file

    for (int i = 0; i < num; i++) //for everyone line/point
    {

        int x = 0; //get X-value from file
        int y = 0; //get Y-value from file

        Klaster klaster = new Klaster();
        klaster.Punkty.Add(new Point(x, y));
        Klastry.Add(klaster);
    }       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:13:45.607

```
 void LoadCordinates()
    {
        StreamReader sr = new StreamReader("PATH OF FILE");

        Klaster klaster = new Klaster();
        while(sr.EndOfStream == false)
        {
           string temp = sr.ReadLine();
           if(temp.Contains(',') && temp.Split(',').Length == 2)
           {
               klaster.Punkty.Add(new Point(int.Parse(temp.Split(',')[0].Trim()), int.Parse(temp.Split(',')[0].Trim())));
               Klastry.Add(klaster);
           }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:13:03.173

[`File.OpenText`](http://msdn.microsoft.com/en-us/library/system.io.file.opentext.aspx)一种方法是逐行使用 和阅读：

```
// Open the stream and read it back. 
string s;
using (StreamReader sr = File.OpenText(filename)) 
{
    while ((s = sr.ReadLine()) != null) 
    {
        // parse the string and add the values to the list
        string[] parts = s.Split(new [] {','});
        if(parts.Length != 2)
        {
            // throw an exception
        }

        int x, y;

        if (!int.TryParse(parts[0],out x) ||
            !int.TryParse(parts[1],out y))
        {
            // throw an exception
        }

        Klaster klaster = new Klaster();
        klaster.Punkty.Add(new Point(x, y));
        Klastry.Add(klaster);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:13:45.717

```
Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
dlg.DefaultExt = ".txt";
dlg.Filter = "Text document (.txt)|*.txt";

Nullable<bool> result = dlg.ShowDialog();

if (result == true)
{
    string filename = dlg.FileName;
    _mn.nazwa_pliku.Text = filename;

    string[] lines = File.ReadAllLines(filename);

    foreach (var line in lines) //for everyone line/point
    {
        string[] elements = line.Split(',');
        int x = int.Parse(elements[0]); //get X-value from file
        int y = int.Parse(elements[1]); //get Y-value from file

        Klaster klaster = new Klaster();
        klaster.Punkty.Add(new Point(x, y));
        Klastry.Add(klaster);
    }       
} 
```

# python - Python PPPTP 库（或通过进程重新路由流量的另一种方式）

> ID：13017096
> 
> 赞同：1
> 
> 时间：2012-10-22T18:05:30.523
> 
> 标签：python, networking, vpn, ppp

我有一个进程在某个端口上侦听流量，并在将其发送到特定服务器之前执行一些操作。我想通过此过程重定向所有流量。由于我不知道将流量发送到端口的方法，我想我可以在 localhost 上建立一个 PPPTP 服务器，侦听流量，然后按原路发送。用户必须创建一个目的地为 localhost:P1 的 VPN。流程如下：

1.  发往默认路由的流量被路由出 ppp 隧道接口（端点为 localhost:P1）
2.  在 localhost:p1 上侦听的进程会收到一个数据包。
3.  在 localhost:p1 上侦听的进程使用先前建立的套接字与 server1 在 p2 上侦听来发送数据。
4.  在 localhost 上侦听的进程通过套接字将数据发送到 server1:p2
5.  响应流向相反

如果有人知道任何库，我可以使用 Python 的 PPPTP 库来完成此操作。有没有更好的方法来实现这一点？

# java - 从 JUnit 中的“之前”方法中排除单个测试

> ID：13017097
> 
> 赞同：26
> 
> 时间：2012-10-22T18:05:33.067
> 
> 标签：java, testing, junit

我的测试类中的所有测试在`@Before`执行每个测试之前都会执行一个“之前”方法（用 JUnit 注释）。

我需要一个特定的测试来不执行这个之前的方法。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-22T18:27:34.703

您可以使用[TestRule](http://junit-team.github.io/junit/javadoc/4.10/org/junit/rules/TestRule.html)来做到这一点。你用一些描述的注释标记你想要跳过的测试，然后，在 TestRule 的 apply 方法中，你可以测试那个注释并做你想做的事情，比如：

```
public Statement apply(final Statement base, final Description description) {
  return new Statement() {
    @Override
    public void evaluate() throws Throwable {
      if (description.getAnnotation(DontRunBefore.class) == null) {
        // run the before method here
      }

      base.evaluate();
    }
  };
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-22T18:20:37.260

考虑使用`@Enclosed`运行器来允许您拥有两个内部测试类。一个有所需的`@Before`方法，另一个没有。

[封闭式](http://www.cs.rice.edu/~javaplt/javadoc/junit4.4/org/junit/runners/Enclosed.html)

```
@RunWith(Enclosed.class)
public class Outer{

    public static class Inner1{

     @Before public void setup(){}

     @Test public void test1(){}
    }

  public static class Inner2{

   // include or not the setup
   @Before public void setup2(){}

   @Test public void test2(){}
  }

} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-22T18:13:24.347

不幸的是，您必须编写此逻辑。JUnit 没有这样的特性。通常你有2个解决方案：

1.  只需将测试用例分为 2 个测试用例：一个包含需要“之前”运行的测试，第二个包含不需要此的测试。
2.  实现您自己的测试运行并注释您的测试以使用它。创建您自己的注释`@RequiresBefore`并使用此注释标记需要此注释的测试。测试运行器将解析注释并决定是否运行“之前”方法。

第二种解决方案更清晰。第一个比较简单。这取决于您选择其中之一。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-03T13:32:13.637

这个问题已经被问过一段时间了，不过，我想分享我的解决方案：

1.  注释所需的方法`@Tag("skipBeforeEach")`

2.  在您的 setup() 方法中：

    ```
    @BeforeEach
    void setup(final TestInfo info) {
    final Set<String> testTags = info.getTags();
    if(testTags.stream()
               .filter(tag->tag.equals("skipBeforeEach"))
               .findFirst()
               .isPresent()){
    return;
    }
    // do your stuff
    }``` 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-17T06:29:58.310

`@Before`也可以通过撤消在测试用例中的设置中所做的事情来解决这个问题。这可能是它的样子，

```
@Before
public void setup() {
    TestDataSetupClass.setupTestData();
}

@Test
public void testServiceWithIgnoreCommonSetup() {
    TestDataSetupClass.unSet();
    //Perform Test
} 
```

这里的解决方案有利有弊。次要缺点是设置和取消设置步骤的不必要循环。但是如果一个人只需要为数百个测试用例做这件事，并且避免编写自己的 AOP 或维护多个内部测试类的开销，那就很好了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-14T09:36:22.977

我一直在寻找这个问题的解决方案并遇到了这个问题。作为更新，在 JUnit 5 中，现在可以使用[@Nested 注释](https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested)轻松完成此操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-24T16:59:43.743

如果您使用的是 Mockito，尤其是 Mockito 3.0，则所有存根都将是“严格的”并且默认情况下会被验证。

您可以使用 Mockito lenient() 方法。

更多信息：[https ://www.baeldung.com/mockito-unnecessary-stubbing-exception#lenient-stubbing](https://www.baeldung.com/mockito-unnecessary-stubbing-exception#lenient-stubbing)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-29T12:51:03.750

如果你有一个@After 方法可以清除@Before 中所做的工作，你可以在@Test 方法的开头手动调用@After 方法。

# actionscript-3 - 使用 Flash AS3 更改图像

> ID：13017099
> 
> 赞同：-2
> 
> 时间：2012-10-22T18:05:36.593
> 
> 标签：actionscript-3, flash

所以我明天有这个任务，它是用 as3 在 Flash 中制作一个音频播放器。我根本不明白 as3。我有播放器工作的代码，因为我只是使用了我们在课堂上使用的相同代码，但我有点想把它变成我自己的。我创建了一个 Ipod 风格的播放器。首先，我希望前进按钮播放下一首歌曲。我将如何为此编写代码？Next 当一首歌曲播放时，我希望显示一个特定的图像。当下一首歌曲出现在下一张要显示的图像上时

这是我的歌曲代码

```
function playTrack(e:MouseEvent) :void {
    switch(e.target.name) {
        case "track1":
            trackToLoad = "audio/Don't Stop Believing.mp3";
            trackName = "Journey • Don't Stop Believing"
            break;
        case "track2":
            trackToLoad = "audio/Never Never Land.mp3";
            trackName = "Metallica • Never Never Land"
            break;
    ... 
```

但不是只有一个停止和播放按钮和 10 个播放每首歌曲的按钮，我想要一个跳过按钮去下一首歌曲..

希望这是对一些帮助的足够信息谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:22:19.150

Set your tracks up as an array of objects:

```
var track1:Object = {
  track: 'Don\'t stop believing',
  artist: 'Journey',
  file: 'dont_stop_believing.mp3'
};
var track2 //same as above
var tracks:Array = [track1, track2, ...]; 
```

You could really create a `Track` class, but it sounds like you aren't to that point yet.

Instead of making your `playTrack` function actually be the mouse event handler, you should separate it out so that it can be used universally no matter how the track begins to play (i.e. clicking on that track's button, clicking on the next button, or after the previous song ends). Write a separate function just to handle the mouse event (i.e. `clickTrack()`), which will call your `playTrack()` function.

Setting your tracks up within the array will allow you to keep note of the indices of each track (including the `currentTrack`) as a number. That way you can iterate through the tracks by just incrementing the `currentTrack` variable.

This way, you can set your `playTrack()` function up to take a `trackNumber` parameter (i.e. `playTrack(1)`. Then just use that parameter to reference the index of the track you want to play within the `tracks` array. Remember that arrays are on a 0 index meaning that the first element is index [0], the second is [1], etc. So you'll either have to write your `playTrack()` function in that way, or convert by subtracting 1.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:17:27.103

尝试将某种`Track`对象存储在索引数组中。您可以跟踪索引，并在用户单击**skip**或**back**时更改它。该`Track`对象可以存储文件路径、曲目名称和您想要显示的艺术作品。当索引更改时，从您的数组中获取正确的曲目并更新播放器。

[这是一个实际使用歌曲标题的示例。](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ee5.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7edf)

# java - 使用日历当前日期设置对象

> ID：13017100
> 
> 赞同：1
> 
> 时间：2012-10-22T18:05:43.783
> 
> 标签：java, date, object, calendar

我有一个问题，我的车辆对象当前没有将其日期设置为今天的任何日期。奇怪的是我的测试信息还是这样出来的。所有其他功能都适用于 Calender。

```
Date Sold: Thu Jan 01 00:00:00 GMT 1970 
```

主班

```
public void buyVechicle(String Vin){
    Vechicle V = findVechicle(Vin);
    if (V.getHasBeenSold() == true){
        System.out.print("This car has already been sold");
    }
    else{
        V.setHasBeenSold();
        V.setDateSold();
    }
} 
```

车辆类

```
public Calendar setDateSold(){
    Calendar cal = Calendar.getInstance();
    return cal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:11:56.100

您的 set 方法不会在 Vehicle 类中设置任何字段，因此其他方法不会找到您刚刚设置的日期。将其更改为：

```
public Calendar setDateSold(){
    Calendar cal = Calendar.getInstance();
    this.dateSold = cal;
    return cal;
} 
```

Java-bean setter 通常有一个 value 参数并且通常不返回值，所以这会更惯用：

```
public void setDateSold(Calendar calendar){
    this.dateSold = calendar;
} 
```

为避免让习惯于 Java bean 样式设置器的其他 Java 程序员感到困惑，您可以重命名您的方法：

```
public Calendar sold(){
    this.dateSold = Calendar.getInstance();
    return this.dateSold;
} 
```

呼叫者向车辆发送一条消息，有效地表明“您已被出售”。

或者，更好的是，有几种方法可以将行为分开：

```
private Calendar today() {
    return Calendar.getInstance();
}

public void sold(){
    setDateSold(today());
}

public Calendar getDateSold() {
    return this.dateSold;
}

private void setDateSold(Calendar calendar) {
    this.dateSold = calendar;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:08:50.243

```
public void setDateSold(){
    Calendar cal = Calendar.getInstance();
    this.dateSold = cal;
} 
```

您必须在班级中设置/分配值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:09:20.867

尝试

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss"); 
Calendar cal = Calendar.getInstance(); 
this.soldDate= dateFormat.format(cal.getTime());
 return cal; 
```

这使您可以管理输出日期格式

更新

此外，您没有设置调用对象的状态。在你的 setter 方法集中

```
 this.soldDate= dateFormat.format(cal.getTime()); 
```

这将使用对象保存销售日期，您可以在需要时使用它。

# python - 我应该如何在 python 中做一个 RedisDict？

> ID：13017101
> 
> 赞同：0
> 
> 时间：2012-10-22T18:05:45.017
> 
> 标签：python, redis, wsgi

我正在做[一个非常简单的 API](https://github.com/spiral-project/respire/tree/master/respire/tests/todo)来测试为 python 生成一个 SPORE 客户端。

在 WSGI 中，将数据保存在服务器中的最佳方式是什么？

我尝试以这种方式制作 RedisDict：

```
import json
from redis import Redis
redis = Redis()

class RedisDict:
    """A redis based dict."""

    def dict(self):
        TODOS = redis.get('TODOS')
        return json.loads(TODOS)

    def keys(self):
        return self.dict().keys()

    def __getitem__(self, key):
        return self.dict()[key]

    def __setitem__(self, key, value):
        obj = self.dict()
        obj[key] = value
        redis.set('TODOS', json.dumps(obj))

    def __delitem__(self, key):
        obj = self.dict()
        del obj[key]
        redis.set('TODOS', json.dumps(obj))

todos = RedisDict() 
```

我怎样才能`dict(todos)`返回一个字典？这在 WSGI 环境中就足够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:14:41.277

假设该方法`dict`返回一个字典，为什么不这样做：

```
dict_i_wanted = todos.dict() 
```

如果您必须支持，请`dict_i_wanted = dict(todos)`添加此方法：

```
def __iter__(self):
    return self.dict().iteritems() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:12:48.597

如果要制作自己的“ `dict-`like”类，则需要实现字典协议。最简单的方法是继承[`collections.Mapping`](http://docs.python.org/library/collections.html#collections-abstract-base-classes)并实现表中提到的抽象方法。`dict`您需要实现那些与相应方法相同的行为；例如`__iter__`，应该返回所有元组的可迭代对象`(key, value)`。（这是你需要做的一种方法`dict(todos)`。没有什么神奇的方法可以强迫`dict`你尝试用你的`dict()`方法做的事情。）

# javascript - 使用 for 循环设置事件处理程序

> ID：13017106
> 
> 赞同：0
> 
> 时间：2012-10-22T18:06:23.893
> 
> 标签：javascript, for-loop, closures, dom-events

我在 jsfiddle 上弄乱了一些 javascript，遇到了一个奇怪的问题。我似乎无法弄清楚为什么我无法`onclick`通过 for 循环设置事件处理程序：

html:

```
<table border="1" cellspacing="1" width="500">
    <tr id="headerRow">
        <td>Header1</td>
        <td>Header2</td>
        <td>Header3</td>
        <td>Header4</td>
    </tr>
    <tr>
        <td>books</td>
        <td>red</td>
        <td>peas</td>
        <td>321</td>
    </tr>
    <tr>
        <td>tapes</td>
        <td>blue</td>
        <td>jello</td>
        <td>654</td>
    </tr>
</table> 
```

在 DOM 中执行的 js 准备就绪：

```
var arr = document.getElementById('headerRow')
    .getElementsByTagName("td");

// Why does this work??
/*arr[0].onclick = function() { alert(arr[0].innerHTML); };
arr[1].onclick = function() { alert(arr[1].innerHTML); };
arr[2].onclick = function() { alert(arr[2].innerHTML); };
arr[3].onclick = function() { alert(arr[3].innerHTML); };
*/

//But this doesn't????
for(var i = 0; i < arr.length; i++) {
    arr[i].onclick = function() { alert(arr[i].innerHTML); };
} 
```

[http://jsfiddle.net/xzmMj/4/](http://jsfiddle.net/xzmMj/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:09:12.407

`i`不会像您想要的那样包含“当前索引”，而是最后一个值`i`，即`arr.length`

一个快速的肮脏解决方案是做这样的事情

```
for(var i = 0; i < arr.length; i++) {
    (function(_i){
        arr[_i].onclick = function() { alert(arr[_i].innerHTML); };
    })(i);
} 
```

`i`它的作用是在您正在执行的语句的闭包中捕获一个新变量中的当前值`_i`，因此它会一直存在并且是您每次调用 onclick 处理程序时期望的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:12:30.427

您需要一个闭包，否则会`arr[i]`在备用范围内执行并爆炸。

```
for(var i = 0; i < arr.length; i++) {

    arr[i].onclick = function(text) { 
        return function () {
            alert(text); 
        };
    }(arr[i].innerHTML);
} 
```

[http://jsfiddle.net/xzmMj/5/](http://jsfiddle.net/xzmMj/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:15:31.320

这是一个常见的错误。`i`是您在 for 循环中递增的全局变量。当循环结束时，i 将等于 4。然后在您的点击处理程序函数中，您尝试显示`arr[i].innerHTML`，即 now `arr[4].innerHTML`。`arr[4]`显然不存在，所以你得到一个错误。

为了便于修复，请更改`alert(arr[i].innerHTML)`为`alert(this.innerHTML)`. `this`，在单击处理函数的上下文中，将引用`<TD>`元素。

# delphi - 使用 RTL 布局时如何通过命中测试获取树视图项？

> ID：13017111
> 
> 赞同：8
> 
> 时间：2012-10-22T18:06:40.773
> 
> 标签：delphi, winapi, delphi-2009

## 描述：

在从右到左的阅读模式 (RTL) 下拥有一个树视图，如何只知道点击坐标就获得被点击的节点？这是一个插入的类，它使树视图使用 RTL 显示，并包含一个单击处理程序，您可以在其中看到问题：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ComCtrls, CommCtrl;

type
  TTreeView = class(ComCtrls.TTreeView)
  protected
    procedure CNNotify(var Msg: TWMNotify); message CN_NOTIFY;
    procedure CreateParams(var Params: TCreateParams); override;
  end;

type
  TForm1 = class(TForm)
    TreeView1: TTreeView;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TTreeView }

procedure TTreeView.CNNotify(var Msg: TWMNotify);
var
  Node: TTreeNode;
  Point: TPoint;
begin
  inherited;
  if Msg.NMHdr.code = NM_CLICK then
  begin
    Point := ScreenToClient(Mouse.CursorPos);
    Node := GetNodeAt(Point.X, Point.Y);
    if Assigned(Node) then
      ShowMessage('This message never shows...');
  end;
end;

procedure TTreeView.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);
  Params.Style := Params.Style or TVS_RTLREADING;
  Params.ExStyle := Params.ExStyle or WS_EX_LAYOUTRTL or WS_EX_RIGHT;
end;

{ TForm1 }    

procedure TForm1.FormCreate(Sender: TObject);
var
  Node: TTreeNode;
begin
  Node := TreeView1.Items.AddChild(nil, 'Item 1');
  TreeView1.Items.AddChild(Node, 'SubItem 1');
end;

end. 
```

这段代码的问题（或者更好的说法是在 RTL 模式下使用这种树视图）是，当您单击节点（或任何地方）时，该[`GetNodeAt`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TCustomTreeView.GetNodeAt)方法永远不会返回有效节点（总是`nil`）。对于那些没有 Delphi 的人，该[`GetNodeAt`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TCustomTreeView.GetNodeAt)方法在内部调用[`TreeView_HitTest`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773897%28v=vs.85%29.aspx)宏，当树视图处于 RTL 模式时，该宏`NULL`会返回，就像没有任何项目一样。我将通过[`GetCursorPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648390%28v=vs.85%29.aspx)相对于函数控制计算的函数获得的坐标传递给该宏[`ScreenToClient`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162952%28v=vs.85%29.aspx)。

## 问题：

我的问题是，如何让点击的节点只知道鼠标坐标？如何在 RTL 模式下使用树视图进行命中测试？例如，我是否应该从右侧计算鼠标水平位置，如果是，如何计算？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T20:27:48.727

从[`ScreenToClient`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162952%28v=vs.85%29.aspx)文档：

> 在镜像情况下，即从左到右布局更改为从右到左布局时，请勿使用**ScreenToClient 。**相反，使用[**`MapWindowPoints`**](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145046%28v=vs.85%29.aspx). 有关详细信息，请参阅窗口功能中的“窗口布局和镜像”。

更正后的代码可能类似于：

```
 ..
  Point := Mouse.CursorPos;
  MapWindowPoints(0, Handle, Point, 1);
  Node := GetNodeAt(Point.X, Point.Y);
  .. 
```

另请参阅：[窗口布局和镜像](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599%28v=vs.85%29.aspx#layout_mirroring)

# c# - 为什么 vcbuild 和 Visual Studio 编译的文件二进制文件在字节方面根本不相似？

> ID：13017116
> 
> 赞同：1
> 
> 时间：2012-10-22T18:06:56.033
> 
> 标签：c#, compilation, csc, vcbuild, binary-reproducibility

到目前为止，我从 VS 编译了我的项目，现在我将编译过程移到了一个脚本中。`vcbuild.exe`为此，我使用命令行参数。我看到的是**我的输出文件在字节上根本不相似。** 我比较了 VS 和我的脚本中的命令行，它与最后一个逗号相同，所以我真的不明白为什么它如此不同。

与 VS 编译和`vcbuild`日志相同的命令行（为清楚起见添加了换行符）：

```
c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Csc.exe
    /noconfig
    /unsafe-
    /nowarn:1701,1702
    /platform:x86
    /errorreport:prompt
    /define:TRACE
    /reference:C:\blahblah.dll
    /reference:c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Data.dll
    /reference:c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.dll
    /reference:c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Windows.Forms.dll
    /reference:c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll
    /debug:pdbonly
    /optimize+
    /out:obj\x86\Release\blah.exe
    /target:winexe
    /win32icon:blah.ico
    ..\..\blah\version.cs
    Program.cs
    Properties\AssemblyInfo.cs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:14:13.490

我猜你所说的“二进制兼容”意味着你的文件并不完全相同，并不是说它们不会以相同的方式执行，具体取决于你调用编译器的方式。

编译器 (Csc.exe) 会在每个编译文件中添加时间戳和其他一些内容，因此即使源未更改，从两个不同编译生成的文件也不会完全匹配。SO上有一个关于它的线程，解释了一点，[为什么C#为相同的源代码生成不同的EXE？](https://stackoverflow.com/questions/1335427/why-does-c-sharp-generate-different-exes-for-the-same-source-code)，但我也在 MSDN 上阅读了一篇很好的博客文章，其中谈到了这一点，但我现在似乎找不到它。

# url - https url 的子域部分是否安全？

> ID：13017118
> 
> 赞同：5
> 
> 时间：2012-10-22T18:07:12.877
> 
> 标签：url, ssl, https

如果我们有这样的网址：

```
https://www.example.com/Some/Page/index.html?id=15 
```

我知道这`example.com`将作为纯文本发送，但`/Some/Page/index.html?id=15`发送是安全的。

现在，我的问题是，如果我们有这样的事情：

```
https://somesubdomain.example.com/Some/Page/index.html?id=15 
```

攻击者可以知道我正在访问`somesubdomain.example.com`吗？或者他们可以知道我正在访问`example.com`？

换句话说，URL 的子域部分是否安全发送？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:01:08.197

如果客户端正在使用服务器名称指示（大多数现代 Web 浏览器/平台使用），主机名（而不是 URL 的其余部分）将在服务器名称指示扩展的握手中清晰可见，因此两者`www.example.com`都`somesubdomain.example.com`可见.

如果客户端不使用 SNI，窃听者仍会看到服务器证书和目标 IP 地址。一些证书可能对多个主机名有效，因此可能存在一些歧义，但这应该为窃听者提供了相当强的线索。此外，同一个窃听者可能能够看到 DNS 请求（除非您`hosts`可能在文件中明确配置了主机）。

通常，您不应假设您尝试联系的主机名将被隐藏。是否是子域无关紧要，重要的是客户端请求的完整主机名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:12:03.003

当使用 https 时，http 客户端和服务器之间的所有流量都会被加密。这并不意味着它是安全的，但它是根据您在此处引用的内容进行加密的。网络嗅探器可以看到的是您与之通信的 IP 地址。这与已将哪个网络名称解析为该地址无关。

只需尝试自己并使用网络嗅探器即可。我推荐`wireshark`。

# extract - 使用 Gradle 将 tar.gz 解压到根目录

> ID：13017121
> 
> 赞同：10
> 
> 时间：2012-10-22T18:07:26.843
> 
> 标签：extract, gradle

我的项目包含几个 tar.gz 文件，我需要将它们解压缩到项目的根目录中。

我做了这个作为测试：

```
task untar (type: Copy) {
    from tarTree(resources.gzip('model.tar.gz'))
    into getProjectDir() 
} 
```

当我运行它时，它抛出了这个异常： org.gradle.api.UncheckedIOException: java.io.IOException: 该进程无法访问该文件，因为另一个进程已锁定该文件的一部分。

我在 Windows 7 中使用 Gradle 1.1。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T03:32:53.670

我能够使用它来提取它：

```
task test {
    doLast {
        copy {
            from tarTree(resources.gzip('model.tar.gz'))
            into getProjectDir()
        }
    }
} 
```

我唯一的猜测是 dir 或 tgz 文件或两者都在配置阶段被锁定，并在执行阶段被释放。

如果有人有使用复制任务而不是复制方法的解决方案，我将不胜感激。

# android - 如何在启动新活动时显示 ProgressDialog？

> ID：13017122
> 
> 赞同：9
> 
> 时间：2012-10-22T18:07:38.730
> 
> 标签：android, progressdialog

目标：有一个显示“正在加载...”的 ProgressDialog，直到下一个 Activity 完全加载并显示在屏幕上。

尝试将 ProgressDialog 上下文和活动设置为原始活动。还尝试使用 getApplicationContext() 和 getParentContext()。最后两种方法的例外情况。需要这样做，因为由于非简单的布局文件，目标 Activity 的渲染速度很慢。（由于组织问题，现在无法解决这个问题。）结果目标 Activity 需要 1-2 秒才能 OnCreate，然后屏幕变黑长达 5 秒以上，然后它会绘制。渲染很慢。使用 Hierarchy Viewer 进行了审查，看到很多红球，但现在无法修复。

阅读一些相关但尚未找到解决方法。例如[，获取上下文的各种方法有什么区别？](https://stackoverflow.com/questions/1026973/android-whats-the-difference-between-the-various-methods-to-get-a-context)

例如，这两个崩溃。使用源 Activity 的“this”也不起作用。

```
// Context parentContext = this.getParent().getBaseContext();    
Context parentContext = this.getApplicationContext();
ProgressDialogMenuable theProgressDialog = new ProgressDialogMenuable(parentContext,this);
theProgressDialog.setTitle("yeeha");
theProgressDialog.setMessage("weewah");
theProgressDialog.setIndeterminate(true);
theProgressDialog.setCancelable(true);
theProgressDialog.show(); 
```

另外，奇怪的是，当我这样做时没有任何反应： theProgressDialog.show(); ActivityHelper.changeActivity(this, v, InsMyHoldingsActivity.class, extraMap, -1, -1); 用户单击按钮以显示下一个活动，但 ProgressDialog 与 Activity 启动冲突，除了按钮在触摸时变为黄色之外实际上没有任何反应。下面的按钮有效。删除 ProgressDialog 创建，它可以工作。没有记录控制台消息。肯定对开发人员有点反感。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T09:00:58.437

您可以显示这样的进度对话框 -

定义这个

```
private ProgressDialog pd = null; 
```

在你的活动课上

把它放在你的 onCreate 中（不要直接在这里设置内容视图）

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.pd = ProgressDialog.show(this, "Fancy App",
                    "Loading...Please wait...", true, false);
        // Start a new thread that will download all the data
        new IAmABackgroundTask().execute();

    } 
```

// 后台重载

```
class IAmABackgroundTask extends
        AsyncTask<String, Integer, Boolean> {
    @Override
    protected void onPreExecute() {
        // showDialog(AUTHORIZING_DIALOG);
    }

    @Override
    protected void onPostExecute(Boolean result) {

        // Pass the result data back to the main activity
        ActivityName.this.data = result;

        if (ActivityName.this.pd != null) {
            ActivityName.this.pd.dismiss();
        }

        setContentView(R.layout.main);

    }

    @Override
    protected Boolean doInBackground(String... params) {

        //Do all your slow tasks here but dont set anything on UI
                    //ALL ui activities on the main thread 

        return true;

    }

} 
```

还要通过这个：http://developer.android.com/training/improving-layouts/index.html 来优化布局性能。还使用 Traceview 查找瓶颈

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:51:34.840

有两种方法可以

第一种方法使用异步任务

如果您正在执行繁重的任务，例如在这种情况下从服务器加载数据或解析 xml，请使用 AsynTask<> 如果您想从 ActivityA 调用 ActivityB，那么

*step-1*创建一个 AsyncTask 类。在 doBackground() 方法中编写所有后台任务，并在任务完成后调用代码在 onPostExecute() 后执行方法中编写的活动

```
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.view.View;

public class LoadingDataFromServer extends AsyncTask {
    Context currentContext = null;

    boolean isCancelled = false;

    public LoadingDataFromServer(Context context) {
        currentContext = context;

    }

    @Override
    protected void onPreExecute() {
        if (DashboardActivity.progressBarLayout != null) {
            DashboardActivity.progressBarLayout.setVisibility(View.VISIBLE);
            // Log.i(TAG,".....Now make progress bar visible.....");
        }

        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(Object... params) {
        // do background processing

        try {
// do background tasks eg sever communication
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        // TODO Auto-generated method stub
        // progressDialog.dismiss();

        // call second Activity
        Intent i = new Intent(currentContext, com.ActvityB.class);
        super.onPostExecute(result);
    }

    @Override
    protected void onCancelled() {
        // TODO Auto-generated method stub
        isCancelled = true;
        super.onCancelled();
    }

} 
```

step-2 在要跳转到新活动的活动中（例如在 ActivityA 中）调用 AsynTask 的 execute()

```
new LoadingDataFromServer(context).execute(null); 
```

第二种方法

首先显示进度对话框。创建一个线程来执行所有后台任务。当线程完成任务然后取消进度对话框并调用下一个活动

或者

当线程完成任务然后调用下一个活动传递此对象（进度对话框）并在该新活动中关闭此对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T07:54:51.337

这是我的代码，可以提供帮助。

在此，我只发布`AsyncTask`ie的第一种方法`onPreExecute`。

User_AsyncTask 扩展 AsyncTask：

```
public class User_AsyncTask extends AsyncTask<String, String, String>
    {
        String response = "";

        @Override
        protected void onPreExecute()
        {
            try
            {
                if (progressDialog != null)
                    progressDialog.cancel();
            }
            catch (Exception e)
            {

            }
            progressDialog = ProgressDialog.show(DisplayDetails.this, "", "Please wait...", true, true);
            progressDialog.setCancelable(false);
            progressDialog.show();
        } 
```

# c - *a=b 和 a=&b 有什么区别？

> ID：13017125
> 
> 赞同：3
> 
> 时间：2012-10-22T18:07:59.137
> 
> 标签：c, pointers

鉴于：

```
int **a; // (double pointer)
int *b;  //  (pointer) 
```

`*a=b`和有什么区别`a=&b`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T18:10:27.730

首先，`*a = b;`将变量的值复制`b`到指向的位置`a`。

第二，`a = &b`复制`b`to的地址`a`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:11:04.423

```
*a = b; 
```

您将值分配给指向的`b`任何地方。`a`

```
a = &b; 
```

在这里，您分配的地址`b`为`a`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:11:04.720

`*a = b`分配`b`给内存中`a`指向的位置

`a = &b`将 的地址分配`b`给变量`a`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T18:11:30.507

`&`它是获取变量地址的运算符

`*`是能够检索指针指向的值的运算符，您应该将此过程称为*间接。*

所以是的，这两个陈述是不同的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-17T11:49:30.643

我认为这里的问题是两者在实践中有什么区别。这个例子说明了这一点：

```
int x = 10;
int *y;
int *z;

y = &x;
*z = x;

printf("x: %d, *y: %d, *z: %d\n", x, *y, *z);

x = 20;

printf("x: %d, *y: %d, *z: %d\n", x, *y, *z); 
```

z 指向的值不会更新为新的 x 值 20，而 y 指向的值会更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-02T00:36:43.560

*a=b : *a 是一个指针变量，它存储另一个变量的地址，即 b 和 a=&b ：a 只是一个普通变量，它存储 b 的地址，即使它存储 b 的地址，它也不会存储完整的地址取决于数据类型

# gnuplot - gnuplot - 带有 histeps 的直方图连接条形图

> ID：13017130
> 
> 赞同：2
> 
> 时间：2012-10-22T18:08:17.510
> 
> 标签：gnuplot, histogram

这是我正在使用的代码的最小工作示例：

```
#!/bin/bash
gnuplot << EOF

set term postscript portrait color enhanced 
set encoding iso_8859_1
set output 'temp.ps'
set grid noxtics noytics noztics front
set size ratio 1
set multiplot
set lmargin 9; set bmargin 3; set rmargin 2; set tmargin 1

n=32    #number of intervals
max=13\. #max value
min=-3.0    #min value
width=(max-min)/n        #interval width
hist(x,width)=width*floor(x/width)+width/2.0

set boxwidth width
set style fill solid 0.25 noborder

plot "< awk '{if (3.544068>=\$1) {print \$0}}' /data_file" u (hist(\$2,width)):(1.0) smooth freq w boxes lc rgb "red" lt 1 lw 1.5 notitle

EOF 
```

这让我明白了：

![盒子](../Images/a661a2bfd6d6def63694ba24970c06fc.png)

我需要的是`histeps`改用，但是当我在上面的命令中更改`boxes`时，我得到：`histeps``plot`

![历史](../Images/4ac9f9ef38dc9b6251775ce468b52ebd.png)

这里发生了什么？？

这是[data_file](http://pastebin.com/JCD2Um52)。谢谢！

* * *

编辑：如果`histeps`遵循实际的外条限制而不是在两者之间插入值（就像这样`boxes`做）是不可能的，那么我怎么能**只**画出用 制作的直方图的轮廓`boxes`？

* * *

EDIT2：像往常一样，您的回答非常有用。虽然有一个小故障，这是我得到的输出，当我将两个图与命令结合起来时：

```
plot "< awk '{if (3.544068>=\$1) {print \$0}}' data_file" u (hist(\$2,width)):(1.0) smooth freq w boxes lc rgb "red" lt 1 lw 1.5 notitle, \
"<python pyscript.py data_file" u 1:2 w histeps lc rgb "red" lt 1 lw 1.5 notitle 
```

![histo_shifted](../Images/c305ada5b55403b8451a483d63a7c593.png)

似乎有些东西正在改变`python`脚本的输出，我无法弄清楚它可能是什么。（在评论中修复）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:15:35.710

如果你有 python + numpy，分箱非常容易。这是一个*非常*流行的包，所以如果你在 Linux 上，你应该能够在你的发行版的存储库中找到它。

```
#Call this script as:
#python this_script_name.py 3.14159 data_file.dat

import numpy as np
import sys

n=32         #number of intervals
dmax=13\.     #max value
dmin=-3.0    #min value

#primitive commandline parsing
limit = float(sys.argv[1])   #first argument is the limit
datafile = sys.argv[2]       #second argument is the datafile to read

data = []    #empty list
with open(datafile) as f:  #Open first commandline arguement for reading.
    for line in f:            #iterate through file returning 1 line at a time
        line = line.strip()   #remove whitespace at start/end of line
        if line.startswith('#'): #ignore comment lines.
            continue
        c1,c2 = [float(x) for x in line.split()] #convert line into 2 floats and unpack
        if limit >= c1:  #Check to make sure first one is bigger than your 3.544...
            data.append(c2) #If c1 is big enough, then c2 is part of the data

counts, edges = np.histogram(data,               #data to bin
                             bins=n,             #number of bins
                             range=(dmin,dmax),  #bin range
                             normed=False        #numpy2.0 -- use `density` instead
                             )
centers = (edges[1:] + edges[:-1])/2\.  #average the bin edges to the center. 

for center,count in zip(centers,counts):  #iterate through centers and counts at same time
    print center,count                    #write 'em out for gnuplot to read. 
```

gnuplot 脚本如下所示：

```
set term postscript portrait color enhanced 
set output 'temp.ps'
set grid noxtics noytics noztics front
set size ratio 1
set multiplot
set lmargin 9 
set bmargin 3
set rmargin 2 
set tmargin 1

set style fill solid 0.25 noborder

plot "<python pyscript.py 3.445 data_file" u 1:2 w histeps lc rgb "red" lt 1 lw 1.5 notitle 
```

当我有更多空闲时间时，我会解释更多......

# ruby-on-rails - mongoid 模型的键不起作用

> ID：13017131
> 
> 赞同：5
> 
> 时间：2012-10-22T18:08:17.597
> 
> 标签：ruby-on-rails, mongodb, mongoid

我将 gem mongoid 安装到 RoR 应用程序，但收到错误“未定义的方法 `key?' 对于 nil:NilClass”，同时将属性分配给键功能。

所以我有这个模型：

```
 class Author
      include Mongoid::Document
      field :name
      key :name
    end 
```

并且默认脚手架控制器并运行此 url localhost:3000/authors ，收到此错误

```
NoMethodError in AuthorsController#index

undefined method `key?' for nil:NilClass
Rails.root: C:/Users/Jeremy/RubymineProjects/university 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem "mongoid", "~> 3.0.0"
gem "bson_ext", "~> 1.2"

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我使用了来自这里的指南[http://railscasts.com/episodes/238-mongoid?view=asciicast](http://railscasts.com/episodes/238-mongoid?view=asciicast)，两次都做了同样的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-17T10:23:43.190

> Model.identity 和**Model.key**已被删除。对于自定义 ID，用户现在必须覆盖 _id 字段。当默认值为 proc 时，在设置所有其他属性*后应用默认值。*

```
class Band
  include Mongoid::Document
  field :_id, type: String, default: ->{ name } # which was `key :name` before v3
end 
```

文档： http: [//mongoid.org/en/mongoid/docs/upgrading.html](http://mongoid.org/en/mongoid/docs/upgrading.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:13:23.830

Mongoid 在版本 3 中发生了很大变化。（asciicast 想要`gem 'mongoid', '2.0.0.beta.19'`......）

[在http://mongoid.org/en/mongoid/index.html](http://mongoid.org/en/mongoid/index.html)查看 mongoid 文档

最后，似乎Mongoid 3不支持自定义和复合键字段

# css - CSS下拉菜单错误

> ID：13017132
> 
> 赞同：1
> 
> 时间：2012-10-22T18:08:17.843
> 
> 标签：css

我做了一个下拉 CSS 菜单，老实说不知道为什么它会缩进......

这是屏幕截图：

![](../Images/04b82aa1be4ab24533a7ae001d0408fc.png)

如果您看到无论我如何设置宽度，它都向右对齐.. :(

这是CSS：

（包括所有 CSS，但菜单是`#mainMenu`：）

```
@charset "UTF-8";
/* CSS Document */

/* Background styling of all forms (should set is here) */

form#payment {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    background-color:#f7fca3;
    padding: 10px;
}

form {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    background-color:#d6f5df;
    padding: 10px;
}

/*styling for text inputs and password of homepage */

input[type="text"]#profile, textarea#profile, input[type="password"]#profile {

    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    margin-bottom: 5px;
    display: block;
    padding: 4px;
    border: solid 1px #35b459;
    width:365px;
}

input[type="text"], textarea, input[type="password"]#inputArea {

    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    margin-bottom: 5px;
    display: block;
    padding: 4px;
    border: solid 1px #35b459;
    width:300px;
}

p {
    font-family:Arial, Helvetica, sans-serif;
    color:#231f20;
}

h1 {
    font-family:Arial, Helvetica, sans-serif;   
    color:#231f20;
}

h2 {
    font-family:Arial, Helvetica, sans-serif;
    color:#231f20;  
}

h3 {
    font-family:Arial, Helvetica, sans-serif;
    color:#231f20;
}

/* Split homepage in two */

#span1 { 
    width: 330px; float: right; 
}

#span2 { 
    width: 390px; float: left; 
}

/* Homepage note */
#note {
    border-style:dashed;border-color:red;
}

/* Registration button link style */

.regbutton a:hover {
    color:#ff;
    text-decoration:none;
}
.regbutton a {
    color:#ff;
    text-decoration:none;
}

.regbutton a:visited{
    color:#ff;
    text-decoration:none;

}

div#steps {
        background-color:#f7fca3;
}

.regbutton
{
    position:absolute;
    color:#ff;
    background:#E76600;
    font-family:Arial, Helvetica, sans-serif;
    padding:6px;
    text-align:center;
    left:550px;
    bottom:30px;
}
.header{
    position:relative;
    width:650px;
    align:center;
    height:200px;
}
.logo{
    position:absolute;
    align:left;
    left:30px;
    top:50px
}
.menu{
    position:relative;
    align:center;   
    top:150px;
}
.content{
    width:800px;
    position:relative;
    align:center;

}
#holder{
    width:100%;
}
.homecontent{
    position:relative;
    width:700px;
    top:20px;
    height:500px;
}

a>div { display: none; }
a:hover>div { display: block; }

a span {display: none;} 
a:hover span#hovImg {
    position: relative;
    right: 0px;
    bottom: 0px;    
    display: block;
}

#mainMenu,
#mainMenu ul {
    list-style: none;
}
#mainMenu {
    float: left;
}
#mainMenu > li {
    float: left;
}
#mainMenu li a {
display: block;
    height: 2em;
    line-height: 2em;
    padding: 0 1.5em;
    text-decoration: none;
}
#mainMenu ul {
    position: absolute;
    display: none;
z-index: 999;
}
#mainMenu ul li a {
    width: 80px;
}
#mainMenu li:hover ul {
    display: block;
}

/* Main menu
--*/
#mainMenu {
    font-family: Arial;
    font-size: 12px;
    background: #2f8be8;
}
#mainMenu > li > a {
    color: #fff;
    font-weight: bold;
}
#mainMenu > li:hover > a {
    background: #f09d28;
    color: #000;
}

/* Submenu
--*/
#mainMenu ul {
    background: #f09d28;
}
#mainMenu ul li a {
    color: #000;
}
#mainMenu ul li:hover a {
    background: #ffc97c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:11:07.170

`ul`默认情况下，几乎所有浏览器中的元素都保留了填充。在这里创建一个 JS Fiddle (http://www.jsfiddle.net) 会很有帮助。但是尝试设置你的

```
#mainMenu ul{
    padding: 0;
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:32:12.020

首先，您在哪个浏览器中查看它？我还建议使用 firebug 或某种附加组件来帮助您查看 box 方法，因为您可以查看这是否是导致边距、填充方面问题的原因。和边界问题。我想查看您的 html 文件，我可以更有效地帮助您解决问题。我也认为这是一个填充问题，虽然......

尝试：

```
#mainMenu li a {
display: block;
    height: 2em;
    line-height: 2em;
    padding-right:.2em;   /*  <--   */
    text-decoration: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:13:43.073

可能正因为如此，您使用的是 CSS 简写：

```
padding: 0 1.5em; /* Top-Bottom(0), Left-Right(1.5em) */ 
```

在

```
#mainMenu li a {
    display: block;
    height: 2em;
    line-height: 2em;
    padding: 0 1.5em;  <------ Here
    text-decoration: none;
} 
```

# matlab - SciLab 复选框 UIControl 值不随状态变化？

> ID：13017138
> 
> 赞同：3
> 
> 时间：2012-10-22T18:09:01.727
> 
> 标签：matlab, scilab, gui-builder

我正在尝试在 SciLab 中设计一个 GUI，根据复选标记更新它的属性。例如：一个复选框可能会在回调期间启用和更改多个文本框的背景；或者一个按钮可能需要选择一定数量的复选框。

我的问题是，我似乎无法根据回调期间的复选框状态开发用于运行指令的流控制语句。我当前的 UIControl 元素如下所示：

```
handles.chkS11En=uicontrol(f,'unit','normalized','BackgroundColor',[0.8,0.8,0.8],'Enable','on','FontAngle','normal','FontName','helvetica','FontSize',[12],'FontUnits','points','FontWeight','normal','ForegroundColor',[0,0,0],'HorizontalAlignment','center','ListboxTop',[],'Max',[1],'Min',[0],'Position',[0.02140625,0.791119360625398,0.0803125,0.0369667],'Relief','flat','SliderStep',[0.01,0.1],'String','S11','Style','checkbox','Value',[0],'VerticalAlignment','middle','Visible','on','Tag','chkS11En','Callback','chkS11En_callback(handles)') 
```

当我选中复选框时运行的回调是这样的：

```
cS11En = findobj('tag', 'chkS11En');     // checkbox option
tS11MagUpperBound = findobj('tag', 'txtS11MagUpperBound');  //edit box that is controlled

mprintf("%d\n",cS11En.Value);
if cS11En.Value == [1] then
    mprintf("Checked = on \n");
    set(tS11MagUpperBound,'BackgroundColor',[1,1,1]);
    set(tS11MagUpperBound,"Enable",'on');
    set(cS11Save,"Enable",'on');
elseif cS11En.Value == [0] then
    mprintf("Checked = off \n");
    set(tS11MagUpperBound,'BackgroundColor',[0.8,0.8,0.8]);
    set(tS11MagUpperBound,'Enable','off');
    set(cS11Save,"Enable",'off');
end 
```

这段代码的问题似乎是第二条路径（Value = 1）似乎永远不会运行，即使我不断切换复选框也是如此。我得到这样的输出：

```
0
Checked = off 
0
Checked = off 
0
Checked = off 
0
Checked = off 
```

为了重新加载检查元素，我做错了什么吗？我希望能够同时运行这两条路径，但是我似乎永远无法从复选框元素中获得 1 的值。有人对此有解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:55:09.720

如果有人想知道并通过谷歌或其他东西找到这个，这就是我修复它的方法：

事实证明，当表单关闭且脚本正在运行时，SciLab 有时不会清除所有 UI 变量。

解决方案是在每个程序的顶部添加几行，以清除所有变量、关闭所有表单并初始化变量。

基本上，添加这个：

```
// /////////////
// Lemon Pledge
// /////////////
mprintf("\n!!!!!!!!!!!!!!!!!!!\nCLEARING ALL VARIABLES\n!!!!!!!!!!!!!!!!!!!\n")
xdel(winsid());
clear;
clearglobal; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-21T13:10:06.163

另一个不太复杂的解决方案是：使用相同的复选框，我将最后一个属性留空。

```
handles.chkS11En=uicontrol(f,'unit','normalized','BackgroundColor',[0.8,0.8,0.8],'Enable','on','FontAngle','normal','FontName','helvetica','FontSize',[12],'FontUnits','points','FontWeight','normal','ForegroundColor',[0,0,0],'HorizontalAlignment','center','ListboxTop',[],'Max',[1],'Min',[0],'Position',[0.02140625,0.791119360625398,0.0803125,0.0369667],'Relief','flat','SliderStep',[0.01,0.1],'String','S11','Style','checkbox','Value',[0],'VerticalAlignment','middle','Visible','on','Tag','chkS11En','Callback','') 
```

然后我进行回调

```
function chkS11En_callback(handles)
    if handles.chkS11En.Value == [1] then
        mprintf("Checked = on \n");
        set(tS11MagUpperBound,'BackgroundColor',[1,1,1]);
        set(tS11MagUpperBound,"Enable",'on');
        set(cS11Save,"Enable",'on');
    else
        mprintf("Checked = off \n");
        set(tS11MagUpperBound,'BackgroundColor',[0.8,0.8,0.8]);
        set(tS11MagUpperBound,'Enable','off');
        set(cS11Save,"Enable",'off');
    end 
```

瞧，无需清理您的工作区。

# vb.net - VB.NET VisualStyleRenderer 根本不工作

> ID：13017140
> 
> 赞同：0
> 
> 时间：2012-10-22T18:09:05.657
> 
> 标签：vb.net, visual-styles

有人在这里看到我的错误吗？

```
Private Sub Form1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Click
    Dim renderer As VisualStyleRenderer
    renderer = New VisualStyleRenderer(VisualStyleElement.Button.PushButton.Normal)

    Dim nRect As New Rectangle
    nRect = Rectangle.FromLTRB(0, 0, 100, 100)

    renderer.DrawBackground(Me.PictureBox1.CreateGraphics, nRect)
    Me.PictureBox1.Invalidate(True)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:11:33.737

你不应该借鉴`CreateGraphics()`; 下次控件绘制自身时，它将被删除。

相反，您需要处理`Paint`事件并在`e.Graphics`.

# javascript - 如何从 Javascript 进行成功的 JSON 调用

> ID：13017146
> 
> 赞同：4
> 
> 时间：2012-10-22T18:09:18.103
> 
> 标签：javascript, jquery, ajax, json

我现在对此感到困惑很长时间。我想获得正确进行 JSON 调用的宝贵知识。帮助我人类。

所以我正在打一个电话，就像这样：

```
$.ajax({

        type    : "POST",
        url     : "http://quote.mythicalQuotes.com/unicorn/service/historical/json?callback=callme&symbols=APPL",
        dataType: "text",   
        cache   : false,       
        data    : My_Array, 
        error   : function(request,error){alert(request+" "+error); },            
        success : function(data) 
                { 
                    alert("Response" + data);  
                }//success 

}).fail(function(textStatus, errorThrown) { alert("error Error"); 
    console.log("The following error occured: "+ textStatus, errorThrown); }); 
```

但它失败并抛出“错误”警报。好编码！

现在在我的浏览器 URL 上粘贴“ **http://quote.mythicalQuotes.com/unicorn/service/historical/chart/lite/json?callback=callme&symbols=APPL** ”给了我很好的 JSON 格式：

```
 callme(
        {
        "SYMB" : [
        {
        "DESCRIPTION" : "APPL,
        "BARS" : {

        "CB" :[
        {
        "lt" : "09-01-2011::20:00:00",
        "op" : "16.31",
        "cl" : "15.22",
        "hi" : "16.45",
        "lo" : "14.72",
        "v" : "17768019"
        },
        {
        "lt" : "09-02-2011::20:00:00",
        "op" : "15.22",
        "cl" : "14.22",
        "hi" : "19.45",
        "lo" : "10.72",
        "v" : "17768000"
        }
        ]
        }
        ]
        }) 
```

那么我在这里做了什么暴行，这激起了我对这种特定的 Javascript 语义/句法的愤怒？

我认为可能导致这种情况的几个原因。1\. 同源政策。2\. 返回错误的 JSON 格式。3\. 我的代码很愚蠢。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T18:12:54.160

这是一个 JSONP 类型的响应。添加`dataType: jsonp`到 JQuery AJAX 请求。由于您还明确指定了回调函数，因此`jsonpCallback: callme`还要添加。有关更多信息，请参阅[JQuery 文档](http://api.jquery.com/jQuery.ajax/)（向下滚动到“dataType”部分）。

```
$.ajax({
    dataType: "jsonp",
    jsonpCallback: "callme",
    // ...
    success: function(data) {
        alert(data);  // should show the JSON:  { "SYMB" : ... }
    }
}); 
```

您提到了跨域策略；JSONP 规范是此策略阻止跨域请求的解决方法。这个想法是，服务器不是返回数据，而是返回一个包含数据的 Javascript 片段。客户端然后执行返回的函数来检索数据。JQuery`ajax`方法具有处理所有这些“幕后”的内置功能。

# c - 如何获取每个进程的 GPU 使用率？

> ID：13017148
> 
> 赞同：6
> 
> 时间：2012-10-22T18:09:34.100
> 
> 标签：c, windows, gpu, temperature

我有一个温度监控程序，我不久前写了一个监控 AMD 显卡上的温度和风扇，检查风扇故障或过热。它的问题在于，它需要提前知道哪个进程将使用 GPU（图形处理单元），以便杀死它或优雅地停止它以避免过热。

为了使我的程序更加动态，我需要一种方法来查找哪个进程正在使用 GPU，就像哪个进程正在使用 CPU 时间（任务管理器）一样。SysInternals 的 Process Explorer 就是一个这样的应用程序。

我在问，我如何在 C 中的 Windows 中执行此操作？我知道如果有这样的方法，它将针对 Vista 及更高版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:51:44.433

如果您有 Tesla 板或高端 Quadro 并在 Windows Server 2008 R2 **64bit**、Windows 7 **64bit**（或 32/64bit Linux）上运行，那么您可以使用[NVML](http://developer.nvidia.com/nvidia-management-library-nvml)来执行此操作。

下载最新[的NVML SDK（Tespla Deployment Kit）](http://developer.nvidia.com/tesla-deployment-kit)，看看这两个功能：

```
nvmlReturn_t nvmlDeviceGetComputeRunningProcesses (nvmlDevice_t device, 
                                                   unsigned int  infoCount,
                                                   nvmlProcessInfo_t * infos)

nvmlReturn_t nvmlDeviceGetTemperature (nvmlDevice_t device,
                                       nvmlTemperatureSensors_t sensorType,
                                       unsigned int * temp) 
```

注意：

```
nvmlReturn_t nvmlDeviceGetFanSpeed (nvmlDevice_t device, unsigned int * speed) 
```

它“检索设备风扇的预期运行速度”而不是真正的风扇速度。所以你不能用它来检查风扇故障。

我不知道可以在 GeForce 板上工作的 nvmlDeviceGetComputeRunningProcesses 替换，但是 Windows [NvAPI](http://developer.nvidia.com/nvapi)（也可以在 GeForce 上工作）允许查询风扇速度和温度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T13:10:11.057

您需要调用一些未记录的 direct3d API 函数 D3DKMTQueryStatistics。

取自[ProcessHacker 论坛](https://wj32.org/processhacker/forums/viewtopic.php?t=325#p1338)的示例代码：

```
#define _Field_size_(...)
#define _Field_size_bytes_(...)
#define _In_reads_bytes_opt_(...)
#define _Out_writes_bytes_all_opt_(...)
#define _Field_size_bytes_part_(...)
#define _In_range_(...)
#define _Out_writes_bytes_(...)
#define _Check_return_
#define _Inout_
#define _In_
#define _Out_

#define NTDDI_VERSION NTDDI_WIN7
#include <windows.h>
#include <tchar.h>
#include <stdio.h>
#include "d3dkmthk.h"

#pragma comment(lib, "gdi32.lib")  // Doesn't do much, since it doesn't have the exports anyway...
#pragma comment(lib, "advapi32.lib")

typedef NTSTATUS (APIENTRY *PD3DKMTQueryStatistics)(_In_ CONST D3DKMT_QUERYSTATISTICS*);
typedef NTSTATUS (APIENTRY *PD3DKMTOpenAdapterFromDeviceName)(_Inout_ D3DKMT_OPENADAPTERFROMDEVICENAME*);

int _tmain(int argc, TCHAR *argv[])
{
    LUID luid = { 20 };
    TOKEN_PRIVILEGES privs = { 1, { luid, SE_PRIVILEGE_ENABLED } };
    HANDLE hToken;
    if (OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES, &hToken))
    {
        if (AdjustTokenPrivileges(hToken, FALSE, &privs, sizeof(privs), NULL, NULL))
        {
        }
        else { return -1; }
    }
    else { return -2; }
    D3DKMT_OPENADAPTERFROMDEVICENAME name = { _T("\\\\?\\pci#ven_10de&dev_0a2b&subsys_9072104d&rev_a2#4&12796cb&0&0008#{1ca05180-a699-450a-9a0c-de4fbe3ddd89}") };
    HMODULE hGdi32 = LoadLibrary(_T("gdi32.dll"));
    PD3DKMTOpenAdapterFromDeviceName D3DKMTOpenAdapterFromDeviceName = (PD3DKMTOpenAdapterFromDeviceName)GetProcAddress(hGdi32, "D3DKMTOpenAdapterFromDeviceName");
    NTSTATUS status = D3DKMTOpenAdapterFromDeviceName(&name);
    if (status == 0)
    {
        _tprintf(_T("name.AdapterLuid: %llx\n"), name.AdapterLuid);
        HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION, TRUE, GetCurrentProcessId());
        _tprintf(_T("hProcess: %#p\n"), hProcess);
        if (hProcess != NULL)
        {
            for (;;)
            {
                PD3DKMTQueryStatistics D3DKMTQueryStatistics = (PD3DKMTQueryStatistics)GetProcAddress(hGdi32, "D3DKMTQueryStatistics");
                D3DKMT_QUERYSTATISTICS stats = { D3DKMT_QUERYSTATISTICS_PROCESS, name.AdapterLuid, hProcess };
                status = D3DKMTQueryStatistics(&stats);
                if (status == 0)
                {
                    _tprintf(_T("Usage: %#llx\n"), stats.QueryResult.ProcessInformation.SystemMemory.BytesAllocated);
                }
                else { break; }
                fflush(stdout);
                Sleep(1000);
            }
        }
    }
    _tprintf(_T("%#x\n"), status);
    return status;
} 
```

更多对 D3DKMTQueryStatistics 的调用可以从 gpumon.c 代码中[采样](https://github.com/processhacker2/processhacker2/blob/569da8a8d9c581c5c744cf2146f9b746766395ed/plugins/ExtendedTools/gpumon.c)。

# cocoa - Cocoa 中的 MVC 模式和模型对象初始化

> ID：13017152
> 
> 赞同：1
> 
> 时间：2012-10-22T18:09:45.093
> 
> 标签：cocoa, model-view-controller, model

如果我使用 的实例`NSArray`来填充弹出按钮，那么就 MVC 而言，它`NSArray`需要在哪里初始化？我猜它会属于模型，但是如果是这种情况，我该如何初始化数组？我是否启动一个新的实现文件来包含该数组？（显然不想使用我的应用程序委托文件，因为它属于控制器，而不是模型。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:39:26.790

MVC 的“模型”部分是应用程序存储、呈现和/或允许用户操作的数据。无论您的应用程序是在 Mac、iPhone 还是其他任何设备上运行，这在很大程度上都是相同的。“视图”是 UI。那是用户在屏幕上实际看到的东西。控制器是介于这两者之间的部分。它负责实现应用程序的特定行为逻辑以及将视图层“粘合”到模型层。

因此，话虽如此，要在弹出按钮中显示的项目数组可能是也可能不是模型的一部分。这完全取决于您正在实现的特定 UI。如果选择是在模型中表示的多个对象之间进行的，则数组的内容确实是模型的一部分，但控制器仍然可能以另一种形式将项目从模型中拉出并将它们转换为 NSArray。它也可能是一种在例如要执行的固定操作列表之间进行选择的方法，在这种情况下，它更合适地是控制器层本身的一部分。

换句话说，你的问题没有一个答案。但是，控制器至少会向 UI 提供有问题的数组，并且还可能对其内容完全负责。这完全取决于您要完成的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:49:57.197

这只是一个答案，并不一定是每个人都如何在 Objective C 中开发应用程序。

如果我的应用程序具有小数据模型或模型范围仅限于其视图，我会将模型放在 AppDelegate 或 viewControllers 本身中，如果它们的范围仅限于该视图。

它们将被初始化为最接近该数据在应用程序中有意义的位置。

有时你会看到一个“FAT”视图控制器，它代表一个主屏幕控制器或主屏幕控制器，人们会将模型堆放在那个类上。它很常见。

但是，如果我有一个具有大型数据模型的应用程序——许多模型的生命周期不限于视图的生命周期——那么我将在我的应用程序中创建一个名为 *myAppNameHere*AppModel 的类，并且我将集中存储应用程序模型，并根据需要使用服务类来请求数据以填充/更新模型。

这只是一种方法。好问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:34:32.173

初始化将在模型对象中发生，但初始化可能会从视图控制器调用（我希望这些只是称为控制器——没有 ModelController 类。）可能在 viewDidLoad 但实际上最适合您的用例的地方会要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:39:10.250

模型对象应该由控制器对象初始化，通常在`viewDidLoad`方法中。如果一个模型对象由另一个模型对象拥有（例如，如果您的自定义模型对象有一个`NSArray`实例变量，那么您的自定义对象是父对象，而`NSArray`是子对象），那么应该在初始化方法中初始化该子模型对象的父模型对象。

我想你`NSArray`本身就是一个模型对象，所以它应该在`viewDidLoad`控制器对象的方法中初始化。

# c - 如何获取 ffmpeg 已链接到的库列表（静态 ffmpeg 库）？

> ID：13017154
> 
> 赞同：0
> 
> 时间：2012-10-22T18:09:54.357
> 
> 标签：c, compilation, linker, ffmpeg, libraries

我已经用 newt 配置编译了 Ffmpeg (1.0)：

```
./configure  --disable-doc  --disable-ffplay --disable-ffprobe  --disable-ffserver    --disable-avdevice   --disable-avfilter   --disable-pthreads  --disable-everything --enable-muxer=flv --enable-encoder=flv --enable-encoder=h263 --disable-mmx  --disable-shared   --prefix=bin/  --disable-protocols --disable-network --disable-debug  --disable-asm --disable-stripping 
```

它编译 - 没有错误 - 头文件和库（静态`.a`）到位。（特殊的实验性 cigwin，实验性 gcc，没有 asm 选项，并且 ffmpeg 平台定义未知）（但我已经编译并测试了它的 boost）

现在我尝试编译我的应用程序。我得到下一个例外：

```
../ffmpeg-1.0/bin/lib/libavcodec.a: error: undefined reference to 'exp'
../ffmpeg-1.0/bin/lib/libavcodec.a: error: undefined reference to 'log' 
```

我的编译器构建行如下所示：

```
g++ -static -emit-swf -o CloudClient.swf  -I../boost/boost_libraries/install-dir/include -I../ffmpeg-1.0/bin/include -L../boost/boost_libraries/install-dir/lib -L../ffmpeg-1.0/bin/lib \
    timer.o \
    audio_encoder.o \
    audio_generator.o \
    video_encoder.o \
    video_generator_rainbow.o \
    simple_synchronizer.o \
    multiplexer.o \
    transmitter.o \
    graph_runner.o \
    cloud_client.o \
    -pthread \
    -lswscale \
    -lavutil \
    -lavformat \
    -lavcodec \
    -lboost_system \
    -lboost_date_time \
    -lboost_thread 
```

因此，正如您看到的非常复杂，我已经编译并准备好所有目标文件......只剩下一件事 - 将其全部链接到 ffmpeg（从使用 boost 编译的 ffmpeg 版本中删除）

尝试添加`-lm`- 没有帮助...

那么这里我的问题是 - 如何获取链接到（如`-lm`等）的库 ffmpeg 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:11:43.923

如果在 Linux 中，请尝试

```
ldd /path/to/ffmpeg-binary 
```

或者

```
ldd `which ffmpeg` 
```

# java - 通过 UDP 多播长发送

> ID：13017155
> 
> 赞同：0
> 
> 时间：2012-10-22T18:09:55.763
> 
> 标签：java, udp, multicast, lan, bufferunderflowexception

我正在尝试通过多播发送很长的内容。连接应该可以工作，因为可以发送一个字符串。

这是我的服务器端代码：

```
currentServerStatusId = Server.getServerStatusVersionId();
buf = ByteBuffer.allocate(8).putLong(currentServerStatusId).array(); //long should be 8 bytes in Java
InetAddress group = InetAddress.getByName(multicastAddress);
DatagramPacket packet = new DatagramPacket(buf, buf.length, group, port);
socket.send(packet); 
```

这是在客户端（接收方）：

```
byte[] buf = new byte[256];
serverIpPacket = new DatagramPacket(buf, buf.length);
System.out.println("waiting to receive");
multicastSocket.receive(serverIpPacket);
receivedIp = serverIpPacket.getAddress().getHostAddress();
currentServerStatusId = ByteBuffer.allocate(8).put(serverIpPacket.getData()).getLong();
//new String(serverIpPacket.getData(), 0, serverIpPacket.getLength());
System.out.println("received current ServerStatusId: " + currentServerStatusId); 
```

这给了我一个 BufferUnderflowException。显然，当我在接收方/客户端的分配方法中将大小从 8 翻倍到 16 时，它确实有效。但随后它返回 0 而不是我的测试值（类似于 68763）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:19:42.050

好的，对不起，麻烦，但我自己找到了答案：

我必须把它放在客户端：

```
ByteBuffer buffer = ByteBuffer.wrap(serverIpPacket.getData());
currentServerStatusId = buffer.getLong(); 
```

就这样

# java - file.mkdirs() 不工作

> ID：13017158
> 
> 赞同：0
> 
> 时间：2012-10-22T18:10:04.373
> 
> 标签：java, android, file, io

这是代码：

```
 String folderPath = Environment.getExternalStorageDirectory() + "/AllAroundMe/Images";
      File file = new File(folderPath);
      if(!file.exists())
      {
            if(file.mkdirs());
            Log.d("MyTag","Created folders succefully");
      }
      if(file.exists())
      {
      Log.d("MyTag", "folders exists: " + file.getAbsolutePath());
      } 
```

第二个如果永远不会发生，它应该发生，因为我制作了这些目录。我的代码有什么问题？顺便说一句，每次我运行这个程序时，它总是在第一个条件下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:13:44.063

我认为你应该在那`semi-colon`之后删除它，如果： -

```
if(file.mkdirs()) {
    Log.d("MyTag","Created folders succefully");
} 
```

**PS** : - 这就是为什么你应该总是使用花括号，即使你只有一个语句 if，这样你就不会犯这种错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:24:33.457

确保你有

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在你的 android.manifest 文件中。

此外，最好像这样构造你的`file`对象：

```
String folderPath = "AllAroundMe/Images";
File file = new File(Environment.getExternalStorageDirectory(), folderPath); 
```

# c# - 如何在 C# 中从 BLL 访问数据集

> ID：13017163
> 
> 赞同：0
> 
> 时间：2012-10-22T18:10:14.270
> 
> 标签：c#, asp.net, data-access-layer, business-logic-layer

我很抱歉这个问题，但我是 BLL 的新手 :(

我创建了带有 dsUsers.xsd 的 DAL。

现在我正在尝试为 UserBLL 开发 BLL，

我意识到在网络上的一些示例中，它们引用了这样的表适配器：

```
using System.Data.SqlClient;
using dsUserTableAdapters; 
```

但是每次我尝试添加上述代码的最后一部分时，我都没有以该名称开头，

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:12:15.070

您需要在 BLL 中添加对 DAL 库的引用。然后，您可以像这样引用数据集：

```
using MyDal.MyDataSetNamespace; 
```

然后，您可以创建数据集类型的对象

```
MyDataSet ds = new MyDataSet(); 
```

编辑：要将 DAL 的引用添加到 BLL，请右键单击 BLL 项目并选择`Add Reference`. 在弹出的窗口中，选择`Projects`选项卡并选择您的 DAL 项目。

# macos - MacOS Mountain Lion 中带有 yasm 的简单 asm 程序

> ID：13017164
> 
> 赞同：5
> 
> 时间：2012-10-22T18:10:16.810
> 
> 标签：macos, gcc, assembly, yasm

我想以 64 位编译和执行一个非常简单的程序。

```
section .text 
global _start 
_start: 
   mov     rdx,len 
   mov     rcx,msg 
   mov     rbx,1 
   mov     rax,4 
   int     0x80 
   mov    rbx,0 
   mov     rax,1 
   int     0x80 
section .data 
msg     db      "Hello, world!",0xa 
len     equ     $ - msg 
```

编译它的行：

```
yasm -f elf64 -g dwarf2 example.asm

$ yasm --version
yasm 1.2.0 
```

还尝试了另一种格式`macho[|32|64], elf[|32] bin`，但都没有成功。

链接它的行：

```
gcc -o example example.o

ld: warning: ignoring file example.o, file was built for unsupported file format ( 0x7f 0x45 0x4c 0x46 0x 2 0x 1 0x 1 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): example.o
Undefined symbols for architecture x86_64:
"_main", referenced from:
  start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status

$ gcc --version
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

还尝试了一些选项，`gcc`例如`-m64 -arch x86_64`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T22:38:50.617

我一直在为 OS X 使用汇编语言`yasm`。组装线是：

```
yasm -f macho64 -l file.lst file.asm 
```

然后链接`ld`：

```
ld -o file file.o 
```

您应该使用`start`而不是`_start`在 OS X 上使用。

之后使用 gdb 出现问题。OS X 似乎没有任何可用的调试格式。

您可能有兴趣尝试我的名为 ebe 的 IDE。我已经设法让断点和调试工作得很好。目前我在调试浮点代码时遇到了一些问题。gdb 似乎不知道 ymm 寄存器，并且 gdb 的默认版本将 xmm 寄存器的部分向后。

你可能喜欢ebe。使用从 sourceforge 下载它

```
git clone git://git.code.sf.net/p/ebe-ide/code ebe 
```

它需要 xterm、python、tkinter 和 pmw（python 库）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T22:40:41.233

你在这里有几个问题：

1) OS X 不支持 ELF，只有 Mach-O。

2) 您的链接器正在寻找 x86_64 架构 Mach-O，但没有找到它。

`ld: warning: ignoring file example.o, file was built for unsupported file format ( 0x7f 0x45 0x4c 0x46 0x 2 0x 1 0x 1 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): example.o`

确保您正在为 x86_64 进行组装，否则尝试传递`-m32`给 GCC 以使用 x86。

3) 您的链接器正在尝试包含 C 运行时库 crt1.10.6.o，这看起来不像您想要的，因为您没有定义`_main`函数。也许您应该直接调用链接器而不是通过 GCC 调用它，或者找到正确的标志组合传递给链接器以避免这种情况。

如果我是你，我会从以下步骤开始：

a) 用 C 语言编写 hello world，让 clang 输出一个汇编文件 (-s)，然后查看是否可以仅使用 clang 进行汇编和链接。这应该很简单。

b) 一旦可行，使用`file`并`otool`确定您的目标文件应该是什么样子，并尝试使用 yasm 生成它。

# iphone - 使用 ios sdk 获取 facebook 事件列表

> ID：13017167
> 
> 赞同：-2
> 
> 时间：2012-10-22T18:10:22.287
> 
> 标签：iphone, ios, ipad

我是ios开发新手。我想为我的 ipad 应用程序集成 facebook，然后我想获取事件列表。我如何获取事件列表。

提前致谢。拉贾

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T18:13:20.460

您可能想[从这里开始](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)。它详细介绍了适用于 iOS 的 Facebook SDK，并提供了合理数量的示例代码来帮助您入门。

# coronasdk - Corona 中的随机文本

> ID：13017172
> 
> 赞同：0
> 
> 时间：2012-10-22T18:10:41.660
> 
> 标签：coronasdk

全新的 Corona 并寻求一些支持。

想用 Corona 创建一个简单的第一个软件。我的想法是有一个按钮，当你按下按钮时，你会在屏幕上看到不同的单词。这个想法是他们随机滚动，然后停在一个词上。例如 8 个不同的单词和一个被选中，几秒钟后显示在屏幕上。

对于专家来说，我想这很简单，但对于新手来说，这并不容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:48:55.070

使用单词数组来存储单词

```
local words = {foo, bar, hi, no, yes, mom, dad} 
```

然后使用 math.random 选择一个单词。

```
local wordIwant = math.random(#words) -- # operador gets the length of a list 
```

因此，例如，如果 math.random 返回 3，则 wordIwant 将是“hi”

:)

现在你如何做你的特殊效果和其他漂亮的东西，取决于你，但我建议使用 enterFrame 监听器。

# javascript - 将点击事件附加到表头

> ID：13017176
> 
> 赞同：0
> 
> 时间：2012-10-22T18:10:57.530
> 
> 标签：javascript, html, dom

> **可能重复：**
> [Javascript 中的 MSIE 和 addEventListener 问题？](https://stackoverflow.com/questions/1695376/msie-and-addeventlistener-problem-in-javascript)
> [返回列标题的名称](https://stackoverflow.com/questions/13016125/returning-the-name-of-a-column-header)

对于我的一生，就我对 javascript 的了解而言，我似乎无法做到这一点，它在第 13 行失败了。我基本上试图尝试向 TH 添加一个 onclick 事件以提醒我它价值。我用的是IE7。

```
<script type="text/javascript">

function init() {

var titles = document.getElementsByTagName("th"); 

for ( var i = 0, len < titles.length; i < len; i++ ) {    
    titles[i].addEventListener("click", function() { 
        alert( this.innerHTML ); 
    }, false); 
} 

}//end of function

</script>

</head>

<body onload="init()">

<table border="1" cellspacing="1" width="500">
    <tr>
        <th>FRUITS</th>
        <th>COLORS</th>
        <th>VEGGIES</th>
        <th>NUMBERS</th>
    </tr>
    <tr>
        <td>apples</td>
        <td>red</td>
        <td>carrots</td>
        <td>123</td>
    </tr>
    <tr>
        <td>oranges</td>
        <td>blue</td>
        <td>celery</td>
        <td>456</td>
    </tr>
    <tr>
        <td>pears</td>
        <td>green</td>
        <td>brocoli</td>
        <td>789</td>
    </tr>
    <tr>
        <td>mangos</td>
        <td>yellow</td>
        <td>lettuce</td>
        <td>098</td>
    </tr>
</table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:14:30.383

您的`for`语句中有错误，您错误地分配给`len`变量，因此请替换以下行：

```
for ( var i = 0, len < titles.length; i < len; i++ ) { 
```

对于这个：

```
for ( var i = 0, len = titles.length; i < len; i++ ) { 
```

# javascript - 使用 HTML5 拖放时禁用选择

> ID：13017177
> 
> 赞同：0
> 
> 时间：2012-10-22T18:10:58.310
> 
> 标签：javascript, html

使用 HTML5 拖放，可拖动容器中的文本变为不可选择。

我尝试将用户选择的 CSS 标记添加到文本的父元素，但似乎没有帮助。

```
 [draggable] {
     -moz-user-select: all;
     -khtml-user-select: all;
     -webkit-user-select: all;
      user-select: all;
   } 
```

这个[小提琴](http://jsfiddle.net/6sRe8/)（来自 HTML5 Rocks）演示了我遇到的问题。

[HTML5 Rocks Drag and Drop 教程](http://www.html5rocks.com/en/tutorials/dnd/basics/)确实说“如果您想使其他类型的内容成为可拖动的，您将需要利用 HTML5 DnD API。” 我想我不知道那是怎么回事

这个[小提琴](http://jsfiddle.net/6uXx8/)有效，但使用了 jQuery UI，我不能使用 jQuery UI，因为它的负载很重。

是否有一种标准的、轻量级的方式来通过拖放支持进行选择？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T19:08:56.977

这里的简单技巧是制作可拖动的标题元素，而不是整个元素。

```
<div class="dragme">
    <header dragable="true">Header</header>
 <p>Content</p>
</div> 
```

# php - 使用 PHP 重命名和移动映射网络驱动器上的文件

> ID：13017182
> 
> 赞同：0
> 
> 时间：2012-10-22T18:11:09.323
> 
> 标签：php, windows, networking, nas

我正在生成一个小脚本，它**操作**文件名、**重命名**文件并将其**移动**到当前目录中的目录。

问题（*我认为*）是我正在从我的计算机上运行一个本地**PHP 脚本**并试图让它在**网络驱动器**上进行操作（在这种情况下为 R:\）

我决定，因为我使用的是 Windows 7，所以我将使用**rename()**函数。这是代码片段..

```
if (!empty($_REQUEST['uploaded_file']))
    rename("R:\\".$fileName, "R:\\Movies\\".$newFileName); 
```

*注意：**$filename**和**$newFileName**在脚本的前面被拉取*

产生的错误是：

```
Warning: rename(R:\movie.title.2011.avi,R:\Movies\Movie Title [2011].avi):
                      The system cannot find the path specified. (code: 3) 
```

该代码曾经工作了一段时间，但出于某种原因，突然之间，它不想再工作了。

我不确定使用重命名方案是否是完成此任务的最佳方法。我的 Synology DS1010+ 不喜欢我使用 SFTP 连接和重命名太多次。它最终开始拒绝连接，所以我需要这样做不同..

**环境信息：**

操作系统：

*   Windows 7 旗舰版 x64
*   PHP版本：5.4.4

**FileZilla 连接尝试：**

```
Status: Connecting to 192.168.5.25:21...
Status: Connection established, waiting for welcome message...
Response:   220 Diniz-Stora FTP server ready.
Command:    USER admin
Response:   331 Password required for admin.
Command:    PASS **********
Response:   230 User admin logged in.
Status: Connected
Status: Retrieving directory listing...
Command:    PWD
Response:   257 "/" is current directory.
Command:    TYPE I
Response:   200 Type set to I.
Command:    PASV
Response:   227 Entering Passive Mode (24,63,165,211,217,0)
Command:    LIST 
```

# c++ - 在 C++ 中实现图形的最佳方法？

> ID：13017183
> 
> 赞同：-3
> 
> 时间：2012-10-22T18:11:14.917
> 
> 标签：c++, graph, adjacency-list

我正在寻求实现一个恒定的、无序的、未加权的、稀疏的图（即边不移动）。但是，我会做很多顶点交换操作，从而改变顶点的顺序。

例如，一种方法是使用 unordered_sets 的向量 + 邻接表结构：

```
0: 1 2 3
1: 0 2
2: 0 1
3: 0 
```

交换 0 和 3：

```
0: 3
1: 3 2
2: 3 1
3: 1 2 0 
```

C++ 中最好的实现是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:22:46.060

Look into [Boost Graph Library](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/index.html). It will probably work for your needs, but if it doesn't, it's documentation may be a good starting point to learn about the subject, before you start trying to roll your own.

Edit: If you're expecting to work with sparse graphs, the [adjacency list](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/adjacency_list.html) version is probably the implementation you want to look into first. Note that you can tweak the performance characteristics of a boost adjacency_list graph by changing the underlying data structures used to implement it (via template argument).

Edit: In regards to the vertex swapping you're describing, probably the easiest way to do this is to set up a vertex type where the vertex can remain in place, but its properties can easily be swapped with another. The [Bundled Properties](http://www.boost.org/doc/libs/1_43_0/libs/graph/doc/bundles.html) mechanism is one way to implement this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:22:16.713

[boost::graph](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/index.html) perhaps.

It has several implementations, and you can specify multiple parameters per vertex. Further investigation is left as an exercise for the student.

# ruby-on-rails-3 - 现有 Rails 应用程序的 Rails 3 子域

> ID：13017184
> 
> 赞同：1
> 
> 时间：2012-10-22T18:11:20.633
> 
> 标签：ruby-on-rails-3, routing, subdomain

我最近的任务是将我现有的 Rails 3 应用程序分离为标准和高级版本。高级版将具有所有现有功能，并添加新布局和新功能。理想情况下，我希望高级用户通过在当前 url 前加上一个子域来访问这个站点，例如“premium.somesite.com”/ 我不想更改的网站的标准版本，仍然可以通过默认 url 访问.

如果可能的话，我想简单地向退出视图和控制器添加一些逻辑，以确定如何处理请求是否正在使用子域。

[我尝试关注rails 3 中](http://railscasts.com/episodes/221-subdomains-in-rails-3?view=asciicast)的 Railcast子域，但是他在博客模型和数据库属性的上下文中使用子域，我希望我的子域在应用程序范围内。这甚至可能与子域？我该如何开始？

* * *

**我试过的：**

在乘客使用的我的 apache httpd.conf 文件中添加了一个额外的 VirtualHost：

```
<VirtualHost *:80>
  ServerName premium.mydomain.com
  DocumentRoot /somewhere/../myapp
  <Directory /somewhere/public>
    Allow from all
    Options -Multiviews
  </Directory>
</VirtualHost> 
```

将以下内容添加到我的 routes.rb

```
class PremiumSubdomain
  def self.matches?(request)
    request.subdomain == "premium"
  end
end

MyApp::Application.routes.draw do    
  constraints(PremiumSubdomain) do    
    #all of my routes...    
  end    
end 
```

**发生什么了：**

尝试使用高级子域导航到我的站点会导致找不到域，将约束添加到我的 route.rb 会阻止应用程序的其余部分在我的默认 url 上呈现任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:22:01.000

所以事实证明，虽然我确实在 apache 上正确配置了所有内容，但我们正在为我们的 DNS 服务器使用第三方，所以只需为我们的子域添加一条记录，其他一切都很好。

# wpf - xaml 的 InitializeComponent 等效项

> ID：13017192
> 
> 赞同：2
> 
> 时间：2012-10-22T18:11:41.967
> 
> 标签：wpf, xaml, .net-4.0, initializecomponent

在我的一些冒烟测试中，我使用[Mono Cecil](http://www.mono-project.com/Cecil)来解析我的程序集的操作码。然后我执行一些操作来验证代码质量等。但是，我并不真正关心设计器中生成的代码，因为我对此无能为力，所以我将排除该`InitializeComponent`方法。这适用于 WinForms，但似乎不适用于 xaml。换句话说，我仍在处理 xaml 中的指令（即正在订阅的事件）。我知道 xaml 被“编译”成 baml 而不是 IL，但 Mono Cecil 显然仍然能够从 baml 获取操作码）。

[我在这里](http://en.csharp-online.net/XAML%E2%80%94Code-Behind_Class)和[这里](http://blogs.microsoft.co.il/blogs/tomershamam/archive/2007/05/25/Compiled-XAML-_3D00_-BAML-not-IL.aspx)读到，在 xaml 中，`InitializeComponent`调用`Application.LoadComponent`方法，所以我也尝试排除它，但我仍在处理 xaml 指令。我专门检查事件处理程序订阅。

**我的问题：**`InitializeComponent`除了or之外，在编译 xaml 时是否还调用了其他“幕后”方法`LoadComponent`？换句话说，我如何区分来自代码隐藏 (xaml.cs) 与 xaml 的指令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:33:25.043

所以，通过 MSDN 挖掘，我发现[了这个](http://msdn.microsoft.com/en-us/library/ms618176.aspx)小宝石。

显然，IComponentConnector 既可以处理 InitializeComponent ，也可以处理 Connect（处理事件订阅）。所以有一点关于 WPF 与 Winforms 的教训，事件是在 InitializeComponent 中设置的。

所以，排除的方法是：

`System.Windows.Markup.IComponentConnector.Connect();`

# php - PHP 不断给我一个不正确的响应，用于 android 应用内计费服务器验证

> ID：13017193
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:11:42.817
> 
> 标签：php, android

出于某种原因，我让这个脚本正常工作，但是一旦我尝试解码 JSON，脚本就开始搞砸了。我恢复到旧脚本，它仍然无法正常工作。它在下面。$result 一直给我 0 如果 PHP 文档正确则意味着验证失败。我已经仔细检查了 public_key.pem 以查看它是否正确。我还检查了是否正在发送签名数据和签名以及它们是否正在发送。这个脚本可能有什么问题？

```
<?php
$signed_data = $_POST['signedData'];
$signature = $_POST['signature'];
$fp = fopen("./public_key.pem", "r");
$cert = fread($fp, 451);
fclose($fp);
$pubkeyid = openssl_get_publickey($cert);
$signed_data = trim($signed_data);
$signature = base64_decode($signature);

$result = openssl_verify($signed_data, $signature, $pubkeyid, OPENSSL_ALGO_SHA1);
if ($result == 1) {
    echo 'correct';
} else if ($result == 0) {
    echo 'fail';
    echo '||';
    echo $pubkeyid;
    echo '||';
    echo $signed_data;
} else {
    echo 'epic fail';
}
openssl_free_key($pubkeyid);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:14:34.677

openssl 似乎存在一个错误，这里报告了[https://bugs.php.net/bug.php?id=60936](https://bugs.php.net/bug.php?id=60936)看起来它可能与您遇到的问题相同。

# javascript - Raphael.js 地图默认填充颜色

> ID：13017197
> 
> 赞同：0
> 
> 时间：2012-10-22T18:11:52.677
> 
> 标签：javascript, svg, raphael

我正在尝试熟悉 raphael.js。我想创建一个美国地图，该地图已经具有每个州的默认颜色并且这些颜色保留在那里。

[这是](http://pollster.net/v3/usa3.html)我想出的。

如果您查看 AK，我会加载默认颜色，但如果我突出显示另一个状态，则 AK 的默认颜色会消失。我希望 AK - 和其他州 - 保持相同的颜色。

具体来说，我不知道是什么清除了我的 AK 全彩。我认为当我将鼠标悬停在不同的状态时，该语句的一部分是清除填充覆盖：

```
 for (var state in aus) {
        //aus[state].color = Raphael.getColor();
        (function (st, state) {
            st[0].style.cursor = "pointer";
            st[0].onmouseover = function () {
                current && aus[current].animate({fill: "#333", stroke: "#666"}, 500) && (document.getElementById(current).style.display = "");
                st.animate({fill: st.color, stroke: "#ccc"}, 500);
                st.toFront();
                R.safari();
                document.getElementById(state).style.display = "block";
                current = state;
            };

        })(aus[state], state);
    } 
```

有什么想法我可能会出错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:18:28.120

自从我使用 Raphael.js 以来已经有一段时间了，但我认为这是重置您的状态的行：

```
current && aus[current].animate({fill: "#333", stroke: "#666"}, 500) && (document.getElementById(current).style.display = ""); 
```

尝试用 st.color 或任何该状态的颜色替换 #333。如果我的假设是正确的，那将是 aus['AK'] 之类的东西？？？您可能必须捕获先前状态的颜色。如果这不起作用，请告诉我，我可以仔细看看。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:02:59.740

Bryan Allo 谈到了我的部分问题，但最终是动画代码导致了问题。我从来没有想出如何将动画制作成相似的色调，并完全放弃了以下代码：`st.animate({fill: st.color, stroke: "#ccc"}, 500);`

最终结果是一个允许用户按州创建自己的总统竞选预测的网站。 [这里是。](http://pollster.net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:46:32.103

将您的美国 SVG 放入 .. [这个](http://www.irunmywebsite.com/raphael/SVGTOHTML_LIVE.php)

您可以选择删除或留在同样生成的鼠标悬停代码中。

# r - Latex 和 R 之间的工作流程已拧紧

> ID：13017200
> 
> 赞同：6
> 
> 时间：2012-10-22T18:12:05.437
> 
> 标签：r, latex, sweave

试图写我的第二个乳胶文件

```
\documentclass{article}
\title{simple Sweave script}
\usepackage{/Users/Brenden/Documents/R/R-2.15.1/share/texmf/tex/latex/Sweave}
\begin{document}
\maketitle
 This is a simple script to demonstrate Sweave. Let's
 begin by generating some results
<<>>=
x=rnorm(30)
y=rnorm(30)
mean(x)
cor(x,y)
@
and follow that up with some random text
\end{document} 
```

以 .Rnw 作为扩展名保存的文件。然后我可以在 R 下使用 Sweave 将文件转换为 tex。然后我在 cmd 下运行 pdflatex 来获取我的 .pdf 文件。R 存储在 /Users/Brenden/Documents 下。MiKTex 存储在 /Users/Brenden/Desktop 下。

据说通常不需要“usepackage”这行，因为当我在R下运行Sweave时，会在存储在/Users/Brenden/Documents下的tex文件中添加一行“usepackage{Sweave}”。但是，如果我不输入 userpackage 行，当我在 cmd 下（在 /Documents 或 /Desktop 下）运行 pdflatex 时，我会收到一条消息，上面写着“Sweave.sty not found”。因此，我一直通过添加一行带有详细路径的 usepackage 来帮助规避问题，从而解决了这个问题。虽然“Sweave.sty not found”问题被规避了，但我注意到当我在 cmd 下运行 pdflatex 时，我得到了响应

```
LaTeX Warning: You have requested package '/Users/Brenden/Documents/R/R- 
2.15.1/share/texmf/tex/latex/Sweave', but the package provides "Sweave'. 
```

然后它在 MiKTex 下运行几个带有 .sty 的文件

```
(C:\Users\Brenden\Desktop\MiKTex\tex\latex\base\ifthen.sty)
(C:\Users\Brenden\Desktop\MiKTex\tex\latex\graphics\graphicx.sty)
(C:\Users\Brenden\Desktop\MiKTex\tex\latex\graphics\keyval.sty)
(C:\Users\Brenden\Desktop\MiKTex\tex\latex\graphics\graphics.sty)
(C:\Users\Brenden\Desktop\MiKTex\tex\latex\graphics\trig.sty)
... 
```

最终创建一个 .pdf

在 Stackoverflow 上的另一篇文章中，据说，“安装 LaTeX 时会自动设置该路径；它是您的个人 texmf 树，您可以将希望 LaTeX 找到的任何样式或类文件放在那里。目录名称无关紧要，它在其中递归搜索 Sweave.sty”。然而，对我来说，除非我指定路径，否则我的 MiKTex 显然找不到 Sweave.sty。即使有路径规范，LaTex 仍然给我一个警告。有人可以向我解释我在哪里搞砸了（也许是在安装 MiKTex 期间？），以便我可以帮助 MiKtex 在不指定路径的情况下找到 Sweave 的方式？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:50:43.153

在 MiKTeX 设置程序中，有一个名为“Roots”的选项卡。您可以在那里指定`.sty`可以找到其他文件的位置。在你的情况下，我相信你会想要添加`C:\Users\Brenden\Documents\R\R-2.15.1\share\texmf`一个额外的根。这样做，任何 TeX 程序都将能够找到`Sweave.sty`是从 R 内部运行还是从命令行运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T01:49:18.383

总是被这样的小恶魔分心很烦人（新概念`texmf tree`，无尽的环境变量`TEXINPUTS`，`SWEAVE_STYLEPATH_DEFAULT`......）。如果您使用 ，您将永远不会担心 LaTeX 包[`knitr`](http://yihui.name/knitr)，如果您喜欢 Sweave 样式，您可以简单地将`render_sweave()`文档放入如下：

```
\documentclass{article}
\title{simple Sweave script}
<<setup, include=FALSE>>=
render_sweave()
@

\begin{document}
\maketitle
 This is a simple script to demonstrate Sweave. Let's
 begin by generating some results
<<>>=
x=rnorm(30)
y=rnorm(30)
mean(x)
cor(x,y)
@
and follow that up with some random text
\end{document} 
```

将其另存为，`test.Rnw`然后编译

```
library(knitr); knit('test.Rnw') # or knit2pdf('test.Rnw') 
```

而且我猜你可能会更好`render_sweave()`（即使用默认的 LaTeX 样式`knitr`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T18:51:40.863

我怀疑另一篇文章中提到的路径是您个人 texmf 树的路径，这不是 Sweave 放置它的地方。一种选择是将其移动到您的个人 texmf 树中，但我相信现在常用的方法是从 R 中运行 pdflatex，如下所示：

```
texi2dvi("foo.tex", pdf = TRUE) 
```

我认为您也可以让 Sweave 通过添加自动添加完整路径

```
export SWEAVE_STYLEPATH_DEFAULT="TRUE" 
```

到您的`.bashrc`文件或系统上的任何等效文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T20:00:44.467

在命令行中，`R CMD`使用适合运行 R 的变量设置环境，例如在 Windows 上

```
C:\Users\mtmorgan> "c:\Program Files\R\R-2.15.1\bin\R" CMD set 
```

`set`包括（如果命令行中的一种类型，则找不到此内容）

```
TEXINPUTS=.;c:/PROGRA~1/R/R-215~1/.1/share/texmf/tex/latex; 
```

所以

```
C:\Users\mtmorgan> "c:\Program Files\R\R-2.15.1\bin\R" CMD pdflatex myfile.tex 
```

会找到 Sweave.sty。此外，`tools::texi2dvi`可以从 R 中调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T14:16:05.020

我最终得到以下解决方案：

```
install.packages("tinytex")   
require("tinytex")}
install_tinytex(force = TRUE)

Sweave(  "Report.Rnw" , encoding = "utf8" )  
xelatex('Report.tex') 
```

此代码安装[TinyTex](http://yihui.name/tinytex/)，然后您可以使用*pdflatex()*、*xelatex()*或*lualatex()*进行编译。

# algorithm - 编写一个算法，告诉我三个数字中是否有两个且只有两个相同

> ID：13017203
> 
> 赞同：2
> 
> 时间：2012-10-22T18:12:16.247
> 
> 标签：algorithm, math

我遇到的看似简单的算法问题。我试图在 3 次或更少的操作中完成它，并且我有理由相信它可以用数学来解决，但我无法弄清楚（并且问题的来源没有答案）。

编辑：

```
(a[0] == a[1] + a[0] == a[2] + a[1] == a[2]) == 1 
```

是我最初的想法，但我想看看它是否可以在更少的操作中完成（1 个比较是一个操作）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:33:25.670

假设 3 个数字是`a`,`b`和`c`,

```
(b == c) ? (a != c) : (a == b || a == c) 
```

*   如果 (a, b, c) = (1, 1, 1)，那么我们将调用`b == c`(true)，然后调用`a != c`(false) 并完成。
*   如果 (a, b, c) = (1, 1, 2)，那么我们将调用`b == c`(false)，然后调用 ( `a == b`true) 并完成。
*   如果 (a, b, c) = (1, 2, 1)，那么我们将调用`b == c`(false) 然后调用 (false `a == b`) 和`a == c`(true) 并完成。
*   如果 (a, b, c) = (2, 1, 1)，那么我们将调用`b == c`(true)，然后调用 (true `a != c`) 并完成。
*   如果 (a, b, c) = (1, 2, 3)，那么我们将调用`b == c`(false) 然后调用 (false `a == b`) 和`a == c`(false) 并完成。

所以最多进行 3 次比较。

在 and也有 2 个条件分支点，`?:`但`||`OP 不计算它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:23:03.347

取决于您认为是“操作”的内容...

以下仅使用数组中的 3 个比较。但是，还有第四个比较，`== 1`以确保只有一个匹配项。我相信你可以使用大量的分支来有条件地消除一些比较，但如果这是一种优化，分支可能会使其性能更差。

正好有3个结果：

*   没有一个值是相同的（总和为零）
*   两个将相同（总和为一）
*   三者相同（总和为三）

```
if (((array[0] == array[1]) +
     (array[1] == array[2]) +
     (array[0] == array[2])) == 1)
{
    // stuff
} 
```

这将比较与分支进行比较，以实现最多 3 次比较和只需要 2 次的路由：

```
if (array[0] == array[1]) // if these are equal
    return !(array[1] == array[2]); // and these are not equal, return true
else
    return (array[0] == array[2]) || (array[1] == array[2]); // otherwise, if these are equal, we already know the others are not equal because we already tested them so return true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T19:14:53.487

您可以编写表达式：

```
((b == a) | (b == c)) ^ (a == c) 
```

它具有恒定的成本，总是执行三个比较和两个逻辑运算。没有分支，它在处理器上应该很容易。

根据架构，

```
((b == a) || (b == c)) ^ (a == c) 
```

可能更快（这个执行两个或三个比较，一个逻辑运算和一个分支）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T18:38:58.290

我的尝试...

```
return (ab ? (!ac) : (ac ? true : bc)); 
```

在哪里：

```
ab = (a==b)
ac = (a==c)
bc = (b==c) 
```

这使用 2 或 3 次比较，有时会以条件跳转为代价。让我们检查每种情况下的操作次数：

*   **a == c == b:** (a==b) + jump + (a==c) + 否定 [返回 a!=c] 4 次操作
*   **a == b != c：**同上，4个操作
*   **a != b == c:** (a==b) + jump + (a==c) + jump + (b==c) [返回此值] 5 次操作
*   **a == c != b:** (a==b) + jump + (a==c) + jump [返回 true] 4 次操作
*   **a != c != b：**同上，4个操作

当然，这取决于你的操作概念......如果不考虑跳跃......

# magento - Magento 回显属性

> ID：13017206
> 
> 赞同：0
> 
> 时间：2012-10-22T18:12:23.463
> 
> 标签：magento

我的magento有问题。我想回显一些属性，它工作正常，但为什么这个返回数字而不是文本？例如它返回数字 7，但我希望文本已售罄。

```
<?php print $_product->getCustomStockStatus(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:17:36.560

尝试

```
echo $_product->getAttributeText('custom_stock_status'); 
```

# c++ - 在 linux 中使用 PE 节头

> ID：13017207
> 
> 赞同：0
> 
> 时间：2012-10-22T18:12:23.627
> 
> 标签：c++, windows, linux, compilation, header-files

我已经成功编写了一个 c++ 代码，用于通过读取可执行文件在 Visual Studio（在 Windows XP 中工作）中查找节标题的名称及其虚拟地址范围。

问题 - 现在我想在 Linux 环境中实现相同的代码。我不是经验丰富的 Linux 用户，因此我不了解 Linux 提供的所有工具。是否可以在 Linux 中执行 windows 环境特定的代码。如果是，它将如何识别诸如 windows.h 和 winNt.h 之类的头文件。当然，我也必须使可执行文件在 Linux 中可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:48:38.753

您应该能够仅使用 C++ 标准中描述的函数来编写可移植的代码。例如，使用`std::ifstream`，而不是。`CreatFile()`

如果您可以在 Visual Studio 中编写程序而无需参考`<windows.h>`，那么它很可能也可以在 Linux 下运行。

另一方面，如果您要做的只是列出节标题，请尝试`objdump -x foo.exe`.

# java - 在没有 keyPressed/Released 事件的情况下检查键的状态

> ID：13017209
> 
> 赞同：4
> 
> 时间：2012-10-22T18:12:34.410
> 
> 标签：java, keyboard, key, keyboard-events, jcreator

我需要在不使用基于事件的方法的情况下检查一个键的状态（无论它是否被按下）。存储关键状态不起作用；我需要检查密钥的实时状态。有人知道怎么做吗？平台为 JCreator v5.0 LE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:24:46.903

我不明白这一点，看看无论何时按下*任何*键，如何调用 , 和 ，都`keyPressed()`不会`keyReleased()`失败。`keyTyped()`

 *您还说存储状态不起作用。你有没有尝试过这样的事情？

```
boolean[] keys = new boolean[222]; // 222 is the highest keyCode value i know

public void keyPressed(KeyEvent e) { keys[e.getKeyCode()] = true; }
public void keyReleased(KeyEvent e) { keys[e.getKeyCode()] = false; }

// True is pressed, False is released
public boolean getState(int keyCode) {
  return keys[keyCode];
} 
```

这确实是检查一个键的“实时”状态的最合理的方法。您不能只向计算机询问密钥的状态而不使用`Listener`. 也许有关您*需要*“实时”状态的更多信息将为您提供更好的答案。*

# python - 比较两个数组得到第三个数组

> ID：13017210
> 
> 赞同：1
> 
> 时间：2012-10-22T18:12:37.590
> 
> 标签：python

我有两个数组：

```
firstArray=[['AF','AFGHANISTAN'],['AL','ALBANIA'],['DZ','ALGERIA'],['AS','AMERICAN SAMOA']]
secondArray=[[1,'AFGHANISTAN'],[3,'AMERICAN SAMOA']] 
```

所以我只需要一个像

```
thirdArray=[[1,'AF'],[3,'AS']] 
```

如果两个数组的第二个元素匹配，我试过`any(e[1] == firstArray[i][1] for e in secondArray)` 它返回真假。但我不知道如何构建第三个数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T18:16:01.410

首先，转换为以国家为键，缩写为值的字典，然后使用列表`firstArray`推导查找每个国家的缩写：`secondArray`

```
abbrevDict = {country: abbrev for abbrev, country in firstArray}
thirdArray = [[key, abbrevDict[country]] for key, country in secondArray] 
```

如果您使用的是没有字典理解的 Python 版本（2.6 及以下），您可以使用以下内容创建`abbrevDict`：

```
abbrevDict = dict((country, abbrev) for abbrev, country in firstArray) 
```

或者更简洁但可读性较差：

```
abbrevDict = dict(map(reversed, firstArray)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:16:47.947

最好将它们存储到字典中：

```
firstDictionary = {key:value for value, key in firstArray}
# in older versions of Python:
# firstDictionary = dict((key, value) for value, key in firstArray) 
```

那么你可以简单地通过字典查找得到第三个数组：

```
thirdArray = [[value, firstDictionary[key]] for value, key in secondArray] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T18:17:25.720

您可以使用临时`dict`作为查找：

```
firstArray=[['AF','AFGHANISTAN'],['AL','ALBANIA'],['DZ','ALGERIA'],['AS','AMERICAN SAMOA']]
secondArray=[[1,'AFGHANISTAN'],[3,'AMERICAN SAMOA']]

lookup = {snd:fst for fst, snd in firstArray}
thirdArray = [[n, lookup[name]] for n, name in secondArray] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:14:07.763

如果字典可以，那么有一个专门用于此用例的 Counter 字典。

```
>>> from collections import Counter
>>> Counter(firstArray + secondArray)
Counter({['AF','AFGHANISTAN']: 1 ... }) 
```

请注意，参数与您的要求相反，但这很容易纠正。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T18:15:42.050

使用列表理解：

```
In [119]: fa=[['AF','AFGHANISTAN'],['AL','ALBANIA'],['DZ','ALGERIA'],['AS','AMERICAN SAMOA']]

In [120]: sa=[[1,'AFGHANISTAN'],[3,'AMERICAN SAMOA']]

In [121]: [[y[0],x[0]] for x in fa for y in sa if y[1]==x[1]]

Out[121]: [[1, 'AF'], [3, 'AS']] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T18:18:27.200

将数据与键匹配的标准方法是字典。您可以`firstArray`使用字典理解转换为字典。

```
firstDict = {x: y for (y, x) in firstArray} 
```

然后，您可以使用列表推导遍历您的第二个数组。

```
[[i[0], firstDict[i[1]]] for i in secondArray] 
```

# android - getLastKnownLocation 不适用于三星 Galaxy S3 4.0.4

> ID：13017219
> 
> 赞同：2
> 
> 时间：2012-10-22T18:13:14.080
> 
> 标签：android, location

我有一些已经工作多年的 getLastKnowLocation 代码，但它不适用于三星 Galaxy S3 4.0.4。

```
Location location = null;

locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();
String provider = locationManager.getBestProvider(criteria, true);
// The S3 returns null here (even though location is enabled), google maps works. 
try {
  location = locationManager.getLastKnownLocation(provider);
} catch (IllegalArgumentException e) {

}
if ( location == null ) { // only S3 gets this....
   location =  locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);
} 
```

我注意到，如果我添加 PASSIVE_PROVIDER，我确实得到了一个位置，但我从来没有得到任何 onLocationChanged。相同的代码适用于我从 2.1 到 4.1 测试过的所有系统（除了我的 CM10，它看起来更加混乱）

关于发生了什么的任何想法？错误/功能？

我发现其他人有类似问题[Galaxy S3 上没有 GPS 位置更新](https://stackoverflow.com/questions/12456592/no-gps-location-updates-on-galaxy-s3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:35:50.697

这与 Android 版本无关，我有此代码在 Galaxy Nexus 4.2.2 上运行，而不是在 S3 4.1 或 Sony XPeria S 4.0.4 上运行

我怀疑 GPS 位置没有检测到您（这需要时间和良好的 GPS 信号），在我的应用程序中，当我发现 GPS 没有响应或未启用时，我切换到网络检测（约 45 米的精度对我来说并没有那么糟糕我必须在 10 公里半径范围内搜索设备的情况）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T10:37:14.063

我将手机升级到 4.1，错误/功能消失了。

# android - 通过在 Android 中输入电话号码获取 MCC/MNC id

> ID：13017220
> 
> 赞同：-3
> 
> 时间：2012-10-22T18:13:18.073
> 
> 标签：android, carrier, mcc

我正在尝试查找如何在 Android 中获取给定手机号码的 MCC/MNC id 代码（也称为 PLMN 代码）。我正在尝试在拨打电话之前确定该号码所在的运营商。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:55:30.050

您只能为您自己的手机检索 MCC/MNC，而不能为任何给定手机号码检索 MCC/MNC：

```
 TelephonyManager tel = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String networkOperator = tel.getNetworkOperator();

    if (networkOperator != null) {
        int mcc = Integer.parseInt(networkOperator.substring(0, 3));
        int mnc = Integer.parseInt(networkOperator.substring(3));
    } 
```

无论接收设备的 MCC/MNC 是什么，电话都以 PHONE 号码为目标。除非您可以访问第三方数据库以将电话号码解析给运营商，否则您在这里不走运。我不知道有任何这样的数据库。

# java - 带有多个复选框“以上所有”选项的 Java/HTML 表单

> ID：13017224
> 
> 赞同：0
> 
> 时间：2012-10-22T18:13:26.270
> 
> 标签：java, html, jsp

我有一个 HTML 表单，它将其信息发布到 java servlet。HTML 中的一个部分是一个多重复选框，其中一个选项是“以上所有”选项。

```
Mode of Transportation:<br>
<input type="checkbox" name="transport" value="Car" /> Car <br>
<input type="checkbox" name="transport" value="Bike" /> Bike <br>
<input type="checkbox" name="transport" value="Public Transit" /> Public Transit <br>
<input type="checkbox" name="transport" value="All of the Above" /> All of the Above <br> 
```

java页面接受它到一个数组中：

```
String[] transport = request.getParameterValues("transport"); 
```

现在它应该只发回信息：我如何解释“以上所有”选项？意思是如果检查了我如何放弃其他检查并列出所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:19:25.093

两种方式：

使用，如果在选择之后或发布表单之前立即选中`javascript`，请选中所有复选框。`All Of the above`

或者在服务器端处理，即在处理之前，检查其中一个值是否`All Of the above`正确处理，即使用提供的所有选项填充您的用户答案列表。

您使用下面的语句来检查是否`All Of the above`被选中：

```
boolean isAllSelected = Arrays.asList(transport).contains("All Of the above"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:18:47.290

而不是以上面所有的名字命名的值

```
<input type="checkbox" name="transport" value="All of the Above" /> All of the Above <br> 
```

您可以使用此处所述的全选。 [如何在 HTML 中实现“全选”复选框？](https://stackoverflow.com/questions/386281/how-to-implement-select-all-check-box-in-html)

# python - 可变长度“产量”？

> ID：13017225
> 
> 赞同：3
> 
> 时间：2012-10-22T18:13:27.810
> 
> 标签：python, generator, enumerate

我希望能够`yield`使用可变数量的项目，这将允许编写类似于以下内容的生成器函数：

```
x = [1, 2, 3]
y = [4, 5, 6]
z = [7, 8, 9]

def multi_enumerate(*iterables):
    n = 0
    iterators = map(iter, iterables)
    while iterators:
        yield n, *tuple(map(next, iterators))  # invalid syntax
        n += 1

for i,a,b,c in multi_enumerate(x, y, z):
    print i,a,b,c 
```

任何人都知道一些方法来做到这一点？我知道我可以产生一个元组，但这需要在接收端明确解包它，例如`a,b,c = t[0], t[1], t[2]`：

**最终解决方案**：

FWIW，这是我最终使用的，基于 John Kugelman 的出色回答：

```
from itertools import izip

def multi_enumerate(*iterables, **kwds):
    start = kwds.get('start')
    if start is None:
        if kwds: raise TypeError(
            "multi_enumerate() accepts only the keyword argument 'start'")
        try:
            iter(iterables[-1])  # last non-keyword arg something iterable?
        except TypeError:        # no, assume it's the start value
            start, iterables = iterables[-1], iterables[:-1]
        else:
            start = 0  # default

    return ((n,)+t for n, t in enumerate(izip(*iterables), start)) 
```

添加的代码是因为我希望它也接受一个可选的不可迭代的最后一个参数来指定 0 以外的起始值（或使用`start`关键字参数指定它），就像内置`enumerate()`函数一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:18:00.193

`yield`将语句更改为：

```
yield (n,) + tuple(map(next, iterators)) 
```

或者使用`izip`and`enumerate`来消除整个循环：

```
from itertools import izip

def multi_enumerate(*iterables):
    return ((n,) + t for n, t in enumerate(izip(*iterables))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:20:29.257

I would use [`chain`](http://docs.python.org/library/itertools.html#itertools.chain) from [`itertools`](http://docs.python.org/library/itertools.html):

```
yield tuple(chain((n,), map(next, iterators))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:20:43.347

This will return an iterator that produces `(n, *l[n])` for `i` `n`-length `l`s. It will work directly in place of your `multienumerate` method.

```
from itertools import izip
def enumerated_columns(*rows):
    return izip(range(len(rows[0])), *rows) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:22:47.353

If you want to *delegate* several items from your generator to some other generator, there's no one-line way to do this — unless you use Python 3.3 that [features `yield from`](http://www.python.org/dev/peps/pep-0380/).

I'd iterate over the nested generators yielding values from them explicitly, something like

```
yield n
for value in (delegated.next for delegated in iterators):
  yield value 
```

# c# - 按返回键不等待动画

> ID：13017227
> 
> 赞同：1
> 
> 时间：2012-10-22T18:13:35.840
> 
> 标签：c#, windows-phone-7

当用户在我的应用程序中移动页面时，简单的动画应该在移动之前淡出项目，但它不起作用并且立即进行切换。

代码：

```
 public PageClass()
        {
            BackKeyPress += OnBackKeyPressed;
        }

        void OnBackKeyPressed(object sender, CancelEventArgs e)
        {
            foreach (var control in ContentPanel.Children)
                MainPage.FadeOutObject(control);

            var translation = new TranslateTransform();

            PageTitle.RenderTransform = translation;

            var s = new Storyboard();
            Storyboard.SetTarget(s, translation);
            Storyboard.SetTargetProperty(s, new PropertyPath(TranslateTransform.YProperty));

            s.Children.Add(
                    new DoubleAnimation()
                    {
                        From = -300,
                        To = 0,
                        Duration = new Duration(TimeSpan.FromSeconds(2.0)),
                        EasingFunction = new PowerEase { EasingMode = EasingMode.EaseInOut }
                    });

            s.Begin();

            s.Completed += (object sd, EventArgs ea) =>
            {
                NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
            }; 
        } 
```

现在，这不起作用，它会立即回到 MainPage，有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:41:37.897

尝试添加`e.Cancel`以阻止自动处理上一页，因为您已经告诉它应该转到哪个页面。

```
void OnBackKeyPressed(object sender, CancelEventArgs e)
{
    e.Cancel = true;

    foreach (var control in ContentPanel.Children)
            MainPage.FadeOutObject(control);

    //...rest of your code
} 
```

# objective-c - 使用 NSOperationQueue 或 GCD 进行异步解析

> ID：13017234
> 
> 赞同：1
> 
> 时间：2012-10-22T18:13:49.370
> 
> 标签：objective-c, ios, asynchronous, grand-central-dispatch, nsoperationqueue

我的这个解析操作目前运行良好，但我开始注意到它稍微冻结了我的 UI，所以我正在尝试重构并异步完成此操作。但是我遇到了一些问题，希望有人能指出我正确的方向。这是我当前的（同步）代码：

```
- (NSArray *)eventsFromJSON:(NSString *)objectNotation
{
    NSParameterAssert(objectNotation != nil);
    NSData *unicodeNotation = [objectNotation dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;
    NSDictionary *eventsData = [NSJSONSerialization JSONObjectWithData:unicodeNotation options:0 error:&error];

    if (eventsData == nil) {
            //invalid JSON
            return nil;
        }

        NSArray *events = [eventsData valueForKeyPath:@"resultsPage.results"];
        if (events == nil) {
            //parsing error
            return nil;
        }

        NSLog(@"events looks like %@", events);
        NSMutableArray *formattedEvents = [NSMutableArray arrayWithCapacity:events.count];
        for (id object in [events valueForKeyPath:@"event"]) {
            Event *event = [[Event alloc] init];
            event.latitude = [object valueForKeyPath:@"location.lat"];
            event.longitude = [object valueForKeyPath:@"location.lng"];
            event.title = [object valueForKeyPath:@"displayName"];
            event.venue = [object valueForKeyPath:@"venue.displayName"];
            event.ticketsLink = [NSURL URLWithString:[object valueForKeyPath:@"uri"]];
            event.artist = [object valueForKeyPath:@"performance.artist.displayName"];
            event.date = [object valueForKeyPath:@"start.datetime"];

            [formattedEvents addObject:event];
        }

    return [NSArray arrayWithArray:formattedEvents];

} 
```

我一直在研究 NSOperationQueue，我正在努力寻找解决方案，因为我想从此方法返回一个数组，而操作队列并不意味着有返回值。我也在看 GCD，我有这样的东西：

```
- (NSArray *)eventsFromJSON:(NSString *)objectNotation
    {
dispatch_queue_t backgroundQueue =
dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

__block NSMutableArray *mutable = [NSMutableArray array];
dispatch_async(backgroundQueue, ^{
    NSParameterAssert(objectNotation != nil);
    NSData *unicodeNotation = [objectNotation dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;
    NSDictionary *eventsData = [NSJSONSerialization JSONObjectWithData:unicodeNotation options:0 error:&error];

    if (eventsData == nil) {
        //invalid JSON
        mutable = nil;
    }

    NSArray *events = [eventsData valueForKeyPath:@"resultsPage.results"];
    if (events == nil) {
        //parsing error
        mutable = nil;
    }

    NSLog(@"events looks like %@", events);
    NSMutableArray *formattedEvents = [NSMutableArray arrayWithCapacity:events.count];
    for (id object in [events valueForKeyPath:@"event"]) {
        Event *event = [[Event alloc] init];
        event.latitude = [object valueForKeyPath:@"location.lat"];
        event.longitude = [object valueForKeyPath:@"location.lng"];
        event.title = [object valueForKeyPath:@"displayName"];
        event.venue = [object valueForKeyPath:@"venue.displayName"];
        event.ticketsLink = [NSURL URLWithString:[object valueForKeyPath:@"uri"]];
        event.artist = [object valueForKeyPath:@"performance.artist.displayName"];
        event.date = [object valueForKeyPath:@"start.datetime"];

        [formattedEvents addObject:event];
    }

    mutable = [NSMutableArray arrayWithArray:formattedEvents];

});

return [mutable copy];
} 
```

出于某种原因，这似乎在解析完成之前返回了对象，因为我没有从该可变对象中获取任何数据，但我注意到解析确实发生了（我正在注销结果）。谁能给我一个关于如何让这些异步的东西运行的想法？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:29:39.633

您的主要问题是，就其本质而言，异步操作无法同步返回结果。`-eventsFromJSON:`您应该为调用者提供一种在结果完成时接收回调的方法，而不是从 中返回一个数组。在 Cocoa 中有两种常见的方法。

您可以使用关联的委托协议创建一个委托，包括类似的方法`-parser:(Parser *)parser didFinishParsingEvents:(NSArray *)events`，然后在解析完成时让您的解析器在其委托上调用此方法。

另一种解决方案是允许调用者提供一个完成块，以便在解析完成时执行。所以，你可能会做这样的事情：

```
- (void)eventsFromJSON:(NSString *)objectNotation completionHandler:(void (^)(NSArray *events))completionHandler)
{
    dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(backgroundQueue, ^{
        NSMutableArray *mutable = [NSMutableArray array];
        NSParameterAssert(objectNotation != nil);
        NSData *unicodeNotation = [objectNotation dataUsingEncoding:NSUTF8StringEncoding];
        NSError *error = nil;

        // Snip...

        mutable = [NSMutableArray arrayWithArray:formattedEvents];

        dispatch_async(dispatch_get_main_queue(), ^{
            completionHandler([mutable copy]);
        });
    });
} 
```

然后你可以像这样调用这段代码：

```
 - (void)parseJSONAndUpdateUI // Or whatever you're doing
{
    NSString *jsonString = ...;
    Parser *parser = [[Parser alloc] init];
    [parser parseEventsFromJSON:jsonString completionHandler:^(NSArray *events){
        // Update UI with parsed events here
    }];
} 
```

我更喜欢第二种基于块的方法。在大多数情况下，它可以减少代码。代码也更接近于同步方法，其中方法只返回一个数组，因为使用结果数组的代码只是在方法调用之后（尽管缩进，因为它在完成块的范围内）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:36:02.953

我建议使用您传递给 parse 方法的完成块。这样，您不必返回值，但可以在信息解析后对信息执行您需要的操作。您只需确保再次使用 GCD 将完成块放在主线程上。

操作完成后，您还可以在主线程上发布通知，其中包含 userInfo 中的数组。

但是，对于异步操作，返回值将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:30:46.523

在解析完成之前，您将获得一个返回的对象，因为您的返回`[mutable copy]`在 dispatch_async 块之外。由于 dispatch_async 是异步运行的，它会立即返回，然后调用你的 return `[mutable copy]`（它是空的，因为它没有完成解析）。

# ios - UITableView 有空行

> ID：13017236
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:13:52.300
> 
> 标签：ios, uitableview

我在 iOS 应用程序的表格视图中遇到 RSS 提要问题。我最初在它的项目中以表格视图作为根视图测试了 RSS 提要。我试图在不同的项目中获得相同的功能，但显示来自 RSS 提要的文章列表的表格视图是空白的。新项目中表格视图的代码是相同的。唯一不同的是我有一个不同的根视图控制器，它有一堆按钮。一个按钮应该转到该表视图，它确实可以，但行是空的。我认为这可能是如何设置根视图控制器的问题，因为我知道当代码自行运行时会填充表格视图。这是设置根视图控制器的 AppDelegate 文件。

```
//
//  KFBAppDelegate.h
//  KFBNewsroom
//
//  Created by KFB on 10/15/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import <UIKit/UIKit.h>

@class KFBViewController;

@interface KFBAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) KFBViewController *viewController;

@end

//
//  KFBAppDelegate.m
//  KFBNewsroom
//
//  Created by KFB on 10/15/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "KFBAppDelegate.h"
#import "KFBViewController.h"
#import "ListViewController.h"
#import "WebViewController.h"
#import "ActionAlertsViewController.h"
#import "MarketUpdatesViewController.h"

@implementation KFBAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[KFBViewController alloc] initWithNibName:@"KFBViewController"  bundle:nil];
ListViewController *lvc = [[ListViewController alloc]initWithStyle:UITableViewStylePlain];
WebViewController *wvc = [[WebViewController alloc]init];
[lvc setWebViewController:wvc];
ActionAlertsViewController *avc = [[ActionAlertsViewController alloc]initWithStyle:UITableViewStylePlain];
[avc setWebViewController:wvc];
MarketUpdatesViewController *mvc = [[MarketUpdatesViewController alloc]initWithStyle:UITableViewStylePlain];
[mvc setWebViewController:wvc];
self.window.rootViewController = self.viewController;
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
}

    //
    //  ListViewController.h
    //  Nerdfeed
    //
    //  Created by KFB on 10/16/12.
    //  Copyright (c) 2012 com.kfb. All rights reserved.
    //

    #import <Foundation/Foundation.h>

    // @interface ListViewController : NSObject

    // a forward declaration; we'll import the header in the .m
    @class RSSChannel;
    @class WebViewController;

    @interface ListViewController : UITableViewController
    <NSXMLParserDelegate>
    {
        NSURLConnection *connection;
        NSMutableData *xmlData;
        RSSChannel *channel;
    }
    @property (nonatomic, strong)WebViewController *webViewController;

    - (void)fetchEntries;

    @end

//
//  ListViewController.m
//  Nerdfeed
//
//  Created by KFB on 10/16/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "ListViewController.h"
#import "RSSChannel.h"
#import "RSSItem.h"
#import "WebViewController.h"

@implementation ListViewController
@synthesize webViewController;

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary     *)attributeDict
{
    NSLog(@"%@ found a %@ element", self, elementName);
    if ([elementName isEqual:@"channel"])
    {
        // If the parser saw a channel, create new instance, store in our ivar
        channel = [[RSSChannel alloc]init];

        // Give the channel object a pointer back to ourselves for later
        [channel setParentParserDelegate:self];

        // Set the parser's delegate to the channel object
        [parser setDelegate:channel];
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // return 0;

    return [[channel items]count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
    // return nil;

    UITableViewCell *cell = [tableView   dequeueReusableCellWithIdentifier:@"UITableViewCell"];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
    }
    RSSItem *item = [[channel items]objectAtIndex:[indexPath row]];
    [[cell textLabel]setText:[item title]];

    return cell;
}

- (void)fetchEntries
{
    // Create a new data container for the stuff that comes back from the service
    xmlData = [[NSMutableData alloc]init];

    // Construct a URL that will ask the service for what you want -
    // note we can concatenate literal strings together on multiple lines in this way -  this results in a single NSString instance
    NSURL *url = [NSURL URLWithString:@"http://kyfbnewsroom.com/category/public- affairs/feed"];

    // Put that URL into an NSURLRequest
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    // Create a connection that will exchange this request for data from the URL
    connection = [[NSURLConnection alloc]initWithRequest:req delegate:self     startImmediately:YES];
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];

    if (self)
    {
        [self fetchEntries];
    }

    return self;
}

// This method will be called several times as the data arrives
- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
{
    // Add the incoming chunk of data to the container we are keeping
    // The data always comes in the correct order
    [xmlData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{
    /* We are just checking to make sure we are getting the XML
     NSString *xmlCheck = [[NSString alloc]initWithData:xmlData     encoding:NSUTF8StringEncoding];
     NSLog(@"xmlCheck = %@", xmlCheck);*/

    // Create the parser object with the data received from the web service
    NSXMLParser *parser = [[NSXMLParser alloc]initWithData:xmlData];

    // Give it a delegate - ignore the warning here for now
    [parser setDelegate:self];

    //Tell it to start parsing - the document will be parsed and the delegate of NSXMLParser will get all of its delegate messages sent to it before this line finishes execution - it is blocking
    [parser parse];

    // Get rid of the XML data as we no longer need it
    xmlData = nil;

    // Reload the table.. for now, the table will be empty
    [[self tableView]reloadData];

    NSLog(@"%@\n %@\n %@\n", channel, [channel title], [channel infoString]);
}

- (void)connection:(NSURLConnection *)conn didFailWithError:(NSError *)error
{
    // Release the connection object, we're done with it
    connection = nil;

    // Release the xmlData object, we're done with it
    xmlData = nil;

    // Grab the description of the error object passed to us
    NSString *errorString = [NSString stringWithFormat:@"Fetch failed: %@", [error localizedDescription]];

    // Create and show an alert view with this error displayed
    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Error" message:errorString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [av show];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Push the web view controller onto the navigation stack - this implicitly creates the web view controller's view the first time through
    [[self navigationController]pushViewController:webViewController animated:YES];

    // Grab the selected item
    RSSItem *entry = [[channel items]objectAtIndex:[indexPath row]];

    // Construct a URL with the link string of the item
    NSURL *url = [NSURL URLWithString:[entry link]];

    // Construct a request object with that URL
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    // Load the request into the web view
    [[webViewController webView]loadRequest:req];

    // Set the title of the web view controller's navigation item
    [[webViewController navigationItem]setTitle:[entry title]];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:20:22.837

您的 ListViewController 类必须继承自 UITableViewController

编辑：对不起，我没有看到它，只需添加委托和数据源

`@interface ListViewController : UITableViewController <NSXMLParserDelegate, UITableViewDelegate, UITableViewDataSource>`

您是否添加：

```
-(void)viewDidLoad {
[super viewDidLoad];
[tableView setDelegate: self];
[tableView setDataSource: self]; 
```

}

关于 ListViewController 的实现（如之后`@synthesize webViewController;` ）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:26:01.817

尝试从 ListViewController.h 中删除这一行

```
 @property (nonatomic, retain) UITableView *tableView; 
```

然后用`- (void) viewDidLoad`以下代码替换您在 ListViewController.m 中的内容：

```
- (void) viewDidLoad
{
   [super viewDidLoad];
   [self.tableView setDelegate: self];
   [self.tableView setDataSource:self];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:16:13.453

确保您设置了 UITableView 数据源，以便您可以实际显示行。您可能还需要设置委托。

编辑：您仍然没有设置 UITableView 委托或数据源。您需要这样做，以便 UITableView 知道从哪里获取数据。我认为你把它放在 ListViewController 的 viewDidLoad 方法中的最佳位置

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [tableView setDelegate: self];
    [tableView setDataSource: self];
} 
```

您还需要将 UITableViewDelegate 和 UITableViewDataSource 协议添加到 ListViewController。

编辑2：

确保将 UITableViewDataSource 和 UITableViewDelegate 协议添加到 ListViewController

```
@interface ListViewController : UITableViewController
<NSXMLParserDelegate, UITableViewDelegate, UITableViewDataSource> 
```

另外，确保上面的 viewDidLoad 方法在 ListViewController 类中。所有 UITableViewControllers 都有一个[tableView 属性](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewController/tableView)来保存实际的 UITableView。

# python - 使用 python NLTK：如何提高 POS 标注器的准确性？

> ID：13017237
> 
> 赞同：2
> 
> 时间：2012-10-22T18:13:51.777
> 
> 标签：python, nltk, pos-tagger

我一直在使用 NLTK 的 POS 标记器：

```
...
nltk.pos_tag(nltk.word_tokenize(tfile[i]))
... 
```

但有时我会得到不准确的结果（NN 当我应该得到 JJ 时，等等。我要标记的文本是在一个相当具体的业务领域内......我不太自由地说这里是什么领域）。诚然，我不是 Python 或 NLTK 的专家（但是正在研究它），但我想知道是否有一些方法可以提高标记器的准确性。

我想我理解标记器通过将提供给它的文本与预先标记的文本语料库进行比较来工作。我的自然倾向是尝试将一组我自己的自我标记句子添加到这个语料库中……但我不知道该怎么做。

我非常感谢有关如何将我自己的文本添加到语料库（我更愿意添加到现有文本而不是完全开始新文本）的任何建议，或者如果有人对提高标注器的准确性有其他建议出于我的目的，我很想听听。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:03:00.820

您可能已经看过[关于 nltk 的 GoogleCode book](http://www.nltk.org/book/)。我自己一直在非常缓慢地完成它，虽然我还没有处理 POS 标记，但当我觉得自己足够熟练使用该工具时，这是我最终想做的事情之一。无论如何，在[第 5 章](http://www.nltk.org/book/ch05.html)第 2 节中，您会看到以下文本和示例，用于制作自己的标记标记集（向所有人道歉，但我直接从文本中复制）：

```
>>> tagged_token = nltk.tag.str2tuple('fly/NN')
>>> tagged_token
('fly', 'NN')
>>> tagged_token[0]
'fly'
>>> tagged_token[1]
'NN' 
```

续 5.2：

> 我们可以直接从字符串构造一个标记标记列表。第一步是对字符串进行标记以访问单个单词/标签字符串，然后将每个字符串转换为元组（使用 str2tuple()）。

```
>>> sent = '''
... The/AT grand/JJ jury/NN commented/VBD on/IN a/AT number/NN of/IN
... other/AP topics/NNS ,/, AMONG/IN them/PPO the/AT Atlanta/NP and/CC
... Fulton/NP-tl County/NN-tl purchasing/VBG departments/NNS which/WDT it/PPS
... said/VBD ``/`` ARE/BER well/QL operated/VBN and/CC follow/VB generally/RB
... accepted/VBN practices/NNS which/WDT inure/VB to/IN the/AT best/JJT
... interest/NN of/IN both/ABX governments/NNS ''/'' ./.
... '''
>>> [nltk.tag.str2tuple(t) for t in sent.split()]
[('The', 'AT'), ('grand', 'JJ'), ('jury', 'NN'), ('commented', 'VBD'), ('on', 'IN'), ('a', 'AT'), ('number', 'NN'), ... ('.', '.')] 
```

上面的“发送”变量实际上是原始标记文本的样子，正如通过转到我自己计算机上的 nltk_data 目录并查看 corpora/brown/ 中的任何内容来确认的那样，因此您可以使用这种格式编写自己的标记文本和然后用它构建你自己的一组标记令牌。

设置好自己的标记标记后，您应该能够根据标记标记（从 5.5 开始）设置自己的 unigram 标记器：

```
>>>unigram_tagger = nltk.UnigramTagger(YOUR_OWN_TAGGED_TOKENS) 
```

最后，因为您的标记文本可能是一个非常小的样本（因此不准确），您可以列出一个后备标记器，以便当它失败时，后备来救援：

```
>>> t0 = nltk.UnigramTagger(a_bigger_set_of_tagged_tokens)
>>> t1 = nltk.UnigramTagger(your_own_tagged_tokens, backoff=t0) 
```

最后，你应该研究 n-gram 的差异、bigram、unigram 等，这些也在前面提到的第 5 章中介绍过。

无论如何，如果您继续阅读第 5 章，您将看到几种不同的文本标记方法（包括我最喜欢的：正则表达式标记器！）。有很多方法可以做到这一点，而且过于复杂，无法在像这样的小帖子中充分涵盖。

警告购买者：我还没有尝试过*所有*这些代码，所以我提供它作为我目前正在尝试解决的解决方案。如果我犯了错误，请帮助我纠正它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T22:50:28.823

“我如何改进 NLTK 标注器”是一个流行的问题 :-) 我绝对不建议您手工制作语料库来训练标注器。标注器需要大量数据才能在新文本上正常工作。

如果您想努力，您*可以*做的是“引导”语料库：使用 NLTK 标记器标记您域中的一堆文本，手动纠正子集中的错误（如果它们是可预测的，则更容易），使用结果来训练更好的标注器。你甚至可以重复这个过程，这样你就可以手工清洁更多的自己的材料。您的新标记器仍将基于相对少量的文本，因此您可以添加默认标记器作为@erewok 显示的后备。另请参阅[this question](https://stackoverflow.com/q/11822194/699305)，它提出了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:50:58.693

正如@erewok 所指出的，使用退避标记器是改进事物的好方法。从最准确的开始。如果它无法标记，或者计算出的概率低于设定的阈值，则尝试下一种（不太准确）方法。即使是最后的“假设它是一个名词”步骤也可以做出可衡量的改进。

unigram 和 bigram 标记器之类的东西通常不是那么准确。我建议首先从朴素贝叶斯标记器开始（这些在 O'Reilly 书中都有介绍）。这可以使用 Unigram 标记器或 Wordnet 标记器（在 Wordnet 中查找单词，并使用最常见的示例）作为回退标记器。

然后，您可以使用 MaxEnt（最大熵）标记器，该标记器被认为比朴素贝叶斯更准确，因为它支持依赖特征。然而，它速度较慢并且需要更多的努力来实现——最终结果可能不值得。NLTK 版本也可能有点难以使用。

为了训练这些标注器，NLTK 提供了各种语料库。对您的领域一无所知，我不知道它们会有多大用处，但它们包括 Penn Treebank 的一个子集、一些特定领域的语料库、各种语言等。看一看。

除了 O'Reilly 的书外，我还推荐[Jacob Perkins Python 文本处理 NLTK Cookbook](https://rads.stackoverflow.com/amzn/click/com/1849513600)，其中包含此类事物的实际示例。

# tsql - sql server 使用从表变量和数据库表的连接中选择来更新许多列

> ID：13017245
> 
> 赞同：0
> 
> 时间：2012-10-22T18:14:07.107
> 
> 标签：tsql, select, join, sql-update, table-variable

我有经典的人-> 人属性方案。所以，像这样：person(PK) <- person_attribute(FK)

我需要的是一个查询来获取一个人与她的属性相结合的一行。例如，要转换：

```
Person:
{ ID = 123456, Name = 'John Smith', Age = 25 }
Attributes:
1) { PersonID = 123456, AttributeTypeID = 'Height', AttributeValue = '6'6'''}
2) { PersonID = 123456, AttributeTypeID = 'Weight', AttributeValue = '220lbs'}
3) { PersonID = 123456, AttributeTypeID = 'EyeColor', AttributeValue = 'Blue'} 
```

到：

```
PersonWithAttributes
{
 ID = 123456, Name = 'John Smith', Age = 25, Height = '6'6''', Weight = '220lbs', EyeColor = 'Blue'
} 
```

更糟糕的是，我的人在一个表变量中。

所以，我有（在一个参数为 person_id 的 sp 中）：

```
--result table
declare @people_info table
(
person_id int,
name nvarchar(max),
age int,
height nvarchar(10) null,
weight nvarchar(10) null,
eye_color nvarchar(16) null
)

insert into @people_info
 select person_id, name, age, null, null, null
  from dbo.HR.people where person_id = @person_id

update pi
 set
  pi.height = (select pa.attribute_value where pa.attribute_type_id = 'Height'),
  pi.height = (select pa.attribute_value where pa.attribute_type_id = 'Weight'),
  pi.eye_color = (select pa.attribute_value where pa.attribute_type_id = 'EyeColor')
 from
  @people_info pi
   inner join dbo.HR.person_attributes pa on pi.person_id = pa.person_id

select * from @people_info 
```

由于某种原因，这当然不起作用。如果我查询两个连接表并选择“pa.attribute_value where pa.attribute_type_id = 'someval'”，我会得到正确的值。但是更新不起作用。

当然，我可以将其写为三个更新，但我认为执行一个连接然后在更新子句中进行过滤会更快。

另外，请记住，我的属性分布在三个表中，而不仅仅是属性表。所以，这就是我有 table 变量的原因。

非常欢迎任何帮助。也许我正在以错误的方式解决这个问题。性能很重要。实现这一目标的最有效方法是什么？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:30:03.500

也许你想要类似的东西：

```
update pi 
 set 
  pi.height = paH.attribute_value,
  pi.weight = paW.attribute_value,
  pi.eye_color = paE.attribute_value
 from 
  @people_info pi 
   inner join dbo.HR.person_attributes paH on pi.person_id = paH.person_id 
                                            and paH.attribute_type_id = 'Height'
   inner join dbo.HR.person_attributes paW on pi.person_id = paW.person_id 
                                            and paW.attribute_type_id = 'Weight'
   inner join dbo.HR.person_attributes paE on pi.person_id = paE.person_id 
                                            and paE.attribute_type_id = 'EyeColor' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:22:58.100

尝试使用以下代码进行更新：

```
 update 
        pi
    set
        pi.height = pa.Height
        pi.weight = pa.Weight
        pi.eye_color = pa.EyeColor
    from
        @people_info pi
    inner join 
        (
            SELECT
                 person_id
                ,[Height] Height
                ,[Weight] Weight
                ,[EyeColor] EyeColor
            FROM
            (
                SELECT
                      attribute_type_id
                    , attribute_value
                    , person_id   
                FROM
                    dbo.HR.person_attributes pa
            ) pa
            PIVOT
            (
                MAX(attribute_value) FOR attribute_type_id IN ([Height],[Weight],[EyeColor])
            )pvt

        ) pa
    on 
        pi.person_id = pa.person_id 
```

# javascript - Require.Js + Backbone.js ：将新的 Object() 返回到 Object 方法中

> ID：13017246
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:14:09.913
> 
> 标签：javascript, backbone.js, requirejs

在我编写的 dateTime 类下面，一个例子比解释更容易：

```
 define([
        'jquery',
        'infrastructure/libWrapper/Backbone',
        'underscore' ],
        function($, Backbone, _ ){

            return Backbone.Model.extend({
                initialize: function(){
                    if(this.get('value') == null){
                        this.set('value', new Date());
                    }
                    else{
                        var parts = this.get('value').match(/\d+/g);
                        this.set('value', new Date(parts[0], parts[1] - 1 , parts[2], parts[3], parts[4], parts[5]));
                    }
                },
                minus : function(dateTime){
                    return this.get('value').getTime() - dateTime.get('value').getTime();
                },
                toISOString : function(){
                    return this.get('value').toISOString();
                },

                defaults:{
                    value: null}
            });
        }); 
```

如果我想实现应该返回 dateTime 的方法：“function plus(duration) {}”，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:18:05.937

在返回模型之前保存模型，或者更好地添加它与您相同的方式`minus`

```
 define([
    'jquery',
    'infrastructure/libWrapper/Backbone',
    'underscore' ],
    function($, Backbone, _ ){

        var model = Backbone.Model.extend({
            initialize: function(){
                if(this.get('value') == null){
                    this.set('value', new Date());
                }
                else{
                    var parts = this.get('value').match(/\d+/g);
                    this.set('value', new Date(parts[0], parts[1] - 1 , parts[2], parts[3], parts[4], parts[5]));
                }
            },
            minus : function(dateTime){
                return this.get('value').getTime() - dateTime.get('value').getTime();
            },
            // here
            plus : function(dateTime){
                return this.get('value').getTime() + dateTime.get('value').getTime();
            },
            toISOString : function(){
                return this.get('value').toISOString();
            },

            defaults:{
                value: null}
        });
        //or here
        model.plus = function(duration) {   } 

        return model
    }); 
```

# objective-c - iOS推送通知/框架问题

> ID：13017247
> 
> 赞同：0
> 
> 时间：2012-10-22T18:14:13.567
> 
> 标签：objective-c, ios, push-notification, uiapplicationdelegate

我一直在网上寻找一些信息或源代码来实现这一点。问题是，我正在开发的应用程序使用我们也在开发的自定义框架。我们的客户希望为应用程序添加推送通知支持。

但他想要我们创建的框架来处理推送通知（而不是应用程序）。下图将更好地解释这种情况：

![在此处输入图像描述](../Images/bda6626b8d7705b18b6e5f22ff45956f.png)

问题是 AppDelegate 似乎是唯一处理来自操作系统的通知，所以我能想到的唯一解决方案是将来自操作系统的通知转发到框架的应用程序。有什么想法或想法吗？我错过了什么吗？

提前发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:40:07.523

您必须转接呼叫。它应该只需要添加到 appdelegate 的几行代码来与您的框架交互。

您还可以使用一种更高级的方法，将 AppDelegate 方法的 IMP 淹没并通过您的框架转发它们。只要确保在框架完成所需的操作后调用原始 imp。我不会推荐这种方法，因为它可能不会在未来的 ios 版本中保持稳定。

在我看来，转接电话是要走的路。

# ajax - BlockUI Ajax 加载错误的时刻

> ID：13017249
> 
> 赞同：2
> 
> 时间：2012-10-22T18:14:18.293
> 
> 标签：ajax, jquery-blockui

我知道还有其他关于这个的帖子。但没有答案。

情况，我有一个ajax命令。这需要时间，因为我有一些东西要拿。

我想在 ajax 的执行之间包含一个加载。

我想使用 jquery BlockUI，因为它简单且好看。

但我不知道为什么视觉效果在 ajax 加载整个数据之前不起作用（比如“成功”开始时）。

我尝试了多种方式，但没有工作。

这是我的最后一个代码：

来自[http://www.codeproject.com/Articles/382390/An-Example-to-Use-jQuery-Global-AJAX-Event-Handler的函数](http://www.codeproject.com/Articles/382390/An-Example-to-Use-jQuery-Global-AJAX-Event-Handler)

```
var AjaxGlobalHandler = {
Initiate: function(options) {
    $.ajaxSetup({ cache: false });

    // Ajax events fire in following order
    $(document).ajaxStart(function() {
        $.blockUI({
            message: options.AjaxWait.AjaxWaitMessage,
            css: options.AjaxWait.AjaxWaitMessageCss
        });
    }).ajaxSend(function(e, xhr, opts) {
    }).ajaxError(function(e, xhr, opts) {
        if (options.SessionOut.StatusCode == xhr.status) {
            document.location.replace(options.SessionOut.RedirectUrl);
            return;
        }

        $.colorbox({ html: options.AjaxErrorMessage });
    }).ajaxSuccess(function(e, xhr, opts) {
    }).ajaxComplete(function(e, xhr, opts) {
    }).ajaxStop(function() {
        $.unblockUI();
    });
}
}; 
```

呼叫就绪

```
 var options = {
            AjaxWait: {
                AjaxWaitMessage: '<h1 class="ui-overlay-loading-content"><img class="ui-overlay-loading-image" src="_inc/img/loading3circle1.gif" />Chargement des données ...</h1>',

                AjaxWaitMessageCss: { backgroundColor: '#ffffff' }
            },
            AjaxErrorMessage: "<h6>Erreur!/h6>"         
        };

        AjaxGlobalHandler.Initiate(options); 
```

调用执行

```
$.ajax({
                type: "POST",
                url: location.href.split('/').pop() + "?action=" + actionName + "&recherche=" + recherche,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(response) {
                    FillDataGridOnSuccess(response, gridId, dataTypeName);
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    alert("xhr.status : " + xhr.status);
                    alert("thrownError : " + thrownError);
                }
            }); 
```

我也试试

```
var ajaxSettings = function(options) {
    return $.extend(
        {
            beforeSubmit: function() {
            //beforeSend: function() {                
                $.blockUI({ overlayCSS: { backgroundColor: '#ffffff' },
                    message: '<h1 class="ui-overlay-loading-content"><img class="ui-overlay-loading-image" src="_inc/img/loading3circle1.gif" />Chargement des données ...</h1>'
                });
            },
            complete: function() {
                $.unblockUI();
            }
        },
        options
    );
}; 
```

我所做的每个测试都以似乎只出现在 ajaxSuccess 上的加载结束。

我知道官方 blockUI 网站[http://jquery.malsup.com/block/#demos](http://jquery.malsup.com/block/#demos)上有示例 ，他们在那里工作，但我自己不能。有人看到为什么吗？

保护你

# c# - 如何在 .NET 中将 .CSR 文件转换为 .DER 格式

> ID：13017251
> 
> 赞同：2
> 
> 时间：2012-10-22T18:14:21.023
> 
> 标签：c#, .net, mono, openssl

我有一个 PEM 格式的 CSR，需要将其转换为 .DER。使用 OpenSSL，我就是这样做的。

*openssl req -inform pem -outform der -in customer.csr -out customer.der*

正在寻找可以执行此操作的 .NET API 或第三方库？

更新：此应用是具有多个实例的 Azure 云服务。

谢谢，灰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T20:25:29.200

这是一个库，一个人为此而写的以及其他一些技巧。

在 .NET 中，不支持两种广泛传播的密钥交换格式 PEM 和 DER，这限制了类在使用不同类型的公钥 API 时的可用性。

解决方法：利用 Microsoft Crypto API (CAPI)，它支持打开和转换各种不同的公钥/私钥文件格式。在这里，我想演示如何通过对 RSACryptoServiceProvider 类的简单扩展方法来实现这一点。

见： [http ://www.christian-etter.de/?p=771](http://www.christian-etter.de/?p=771)

# mapreduce - Couchdb中的重复数据删除/匹配？

> ID：13017256
> 
> 赞同：2
> 
> 时间：2012-10-22T18:14:50.930
> 
> 标签：mapreduce, couchdb, matching, deduplication

我在 couchdb 中有文件。架构如下所示：

```
userId
email
personal_blog_url
telephone 
```

我假设两个用户实际上是同一个人，只要他们有

*   电子邮件或
*   个人博客网址或
*   电话

相同。

我创建了 3 个视图，它们基本上将 email/blog_url/telephone 映射到 userIds，然后将 userIds 组合到同一键下的组中，例如，

```
_view/by_email:
----------------------------------
key                   values     
a_email@gmail.com    [123, 345]
b_email@gmail.com    [23, 45, 333]

_view/by_blog_url:
----------------------------------
key                   values     
http://myblog.com    [23, 45]
http://mysite.com/ss [2, 123, 345]

_view/by_telephone:
----------------------------------
key                   values     
232-932-9088          [2, 123]
000-111-9999          [45, 1234]
999-999-0000          [1] 
```

我的问题：

*   如何将 3 个不同视图的结果合并到不包含重复项的最终用户表/视图中？
*   或者在 couchdb 中进行这种重复数据删除是否是一种好习惯？
*   或者什么是在沙发上进行重复数据删除的好方法？

附言。在最终视图中，假设对于所有受骗者，我们只保留最小的 userId。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:39:23.997

好问题。也许您可以在您建议的视图中收听`_changes`并搜索您希望对真实用户唯一的字段 ( `by_*`)。

*   将视图合并为一个（在一张地图中发出不同的字段）：

    函数 (doc) { if (!doc.email || !doc.personal_blog_url || !doc.telephone) 返回；发射（[1，doc.email]，[doc._id]）；发射（[2，doc.personal_blog_url]，[doc._id]）；发射（[3，doc.telephone]，[doc._id]）；}

*   在reduce中合并id列表

*   当更改提要中的新文档到达时，您可以查询视图`keys=[[1, email], [2, personal_blog_url], ...]`并合并三个列表。如果其最小 id 小于更改后的 doc，则更新 field `realId`，否则使用更改后的 id 更新列表中的文档。

我建议使用不同的文档来存储`{ userId, realId }`关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:15:01.993

您不能仅使用视图来创建新文档。您需要某种任务来进行实际的合并。

这是一个想法。

您可以创建一个视图（如果数据存在则索引数据），而不是创建 3 个视图：

```
Key                             Values
---                             ------
[userId, 'phone']               777-555-1212
[userId, 'email']               username@example.com
[userId, 'url']                 favorite.url.example.com 
```

除了原始值之外，我不会存储任何其他内容，因为您最终会得到大量不必要的数据重复（例如，如果您存储了完整的对象）。

然后，要查询，您可以执行以下操作：

```
...startkey=[userId]&endkey=[userId,{}] 
```

这将为您提供所有重复信息作为该用户 ID 的一系列文档。您仍然需要对其进行解析以查看是否存在重复项。但是，通过这种方式，结果将很好地合并到单个 CouchDB 调用中。

[这是](https://stackoverflow.com/questions/9687297/couchdb-search-or-filtering-on-key-array)在 StackOverflow 上使用数组作为键的一个很好的例子。

如果原始“用户”文档包含不属于重复数据删除过程的其他数据，您仍然可能会加载它。

一旦发现，您可以考虑即时清理数据，并防止在将新数据输入应用程序时出现新的重复数据。

# iphone - 如何确定 UICollectionView flowLayout 中单元格之间的间距

> ID：13017257
> 
> 赞同：50
> 
> 时间：2012-10-22T18:15:03.220
> 
> 标签：iphone, objective-c, ios, ipad, uicollectionview

我有一个带有流式布局的 UICollectionView，每个单元格都是一个正方形。如何确定每行每个单元格之间的间距？我似乎找不到合适的设置。我看到 nib 文件上有一个用于集合视图的最小间距属性，但我将其设置为 0，并且单元格甚至不会粘住。

![在此处输入图像描述](../Images/52dc2d63a011fd6d04b675a56ed1252e.png)

还有什么想法吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-03-21T17:51:07.757

更新：这个答案的 Swift 版本：[https ://github.com/fanpyi/UICollectionViewLeftAlignedLayout-Swift](https://github.com/fanpyi/UICollectionViewLeftAlignedLayout-Swift)

* * *

以[@matt 为首](https://stackoverflow.com/a/13258495/250190)，我修改了他的代码以确保项目始终左对齐。我发现如果一个项目本身就在一行上，它将以流布局为中心。我进行了以下更改以解决此问题。

只有当单元格的宽度不同时才会发生这种情况，这可能会导致如下布局。由于 的行为，最后一行总是左对齐`UICollectionViewFlowLayout`，问题在于除了最后一行之外的任何一行中的项目。

使用我看到的@matt 的代码。

![在此处输入图像描述](../Images/7cb6abbd6ed1b79e48116dcc236de48c.png)

在那个例子中，我们看到如果单元格最终自己在行上，它们就会居中。下面的代码确保您的集合视图看起来像这样。

![在此处输入图像描述](../Images/eadfe403b06710aca438fe19fcf60ef7.png)

```
#import "CWDLeftAlignedCollectionViewFlowLayout.h"

const NSInteger kMaxCellSpacing = 9;

@implementation CWDLeftAlignedCollectionViewFlowLayout

- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
    NSArray* attributesToReturn = [super layoutAttributesForElementsInRect:rect];
    for (UICollectionViewLayoutAttributes* attributes in attributesToReturn) {
        if (nil == attributes.representedElementKind) {
            NSIndexPath* indexPath = attributes.indexPath;
            attributes.frame = [self layoutAttributesForItemAtIndexPath:indexPath].frame;
        }
    }
    return attributesToReturn;
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewLayoutAttributes* currentItemAttributes =
    [super layoutAttributesForItemAtIndexPath:indexPath];

    UIEdgeInsets sectionInset = [(UICollectionViewFlowLayout *)self.collectionView.collectionViewLayout sectionInset];

    CGRect currentFrame = currentItemAttributes.frame;

    if (indexPath.item == 0) { // first item of section
        currentFrame.origin.x = sectionInset.left; // first item of the section should always be left aligned
        currentItemAttributes.frame = currentFrame;

        return currentItemAttributes;
    }

    NSIndexPath* previousIndexPath = [NSIndexPath indexPathForItem:indexPath.item-1 inSection:indexPath.section];
    CGRect previousFrame = [self layoutAttributesForItemAtIndexPath:previousIndexPath].frame;
    CGFloat previousFrameRightPoint = CGRectGetMaxX(previousFrame) + kMaxCellSpacing;

    CGRect strecthedCurrentFrame = CGRectMake(0,
                                              currentFrame.origin.y,
                                              self.collectionView.frame.size.width,
                                              currentFrame.size.height);

    if (!CGRectIntersectsRect(previousFrame, strecthedCurrentFrame)) { // if current item is the first item on the line
        // the approach here is to take the current frame, left align it to the edge of the view
        // then stretch it the width of the collection view, if it intersects with the previous frame then that means it
        // is on the same line, otherwise it is on it's own new line
        currentFrame.origin.x = sectionInset.left; // first item on the line should always be left aligned
        currentItemAttributes.frame = currentFrame;
        return currentItemAttributes;
    }

    currentFrame.origin.x = previousFrameRightPoint;
    currentItemAttributes.frame = currentFrame;
    return currentItemAttributes;
}

@end 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-06T20:02:10.063

要获得最大的项目间间距，请继承 UICollectionViewFlowLayout 并覆盖`layoutAttributesForElementsInRect:`和`layoutAttributesForItemAtIndexPath:`。

例如，一个常见的问题是：集合视图的行是左右对齐的，除了最后一行是左对齐的。假设我们希望*所有*的线都是左对齐的，所以它们之间的空间是 10 点。这是一种简单的方法（在您的 UICollectionViewFlowLayout 子类中）：

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
    NSArray* arr = [super layoutAttributesForElementsInRect:rect];
    for (UICollectionViewLayoutAttributes* atts in arr) {
        if (nil == atts.representedElementKind) {
            NSIndexPath* ip = atts.indexPath;
            atts.frame = [self layoutAttributesForItemAtIndexPath:ip].frame;
        }
    }
    return arr;
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewLayoutAttributes* atts =
    [super layoutAttributesForItemAtIndexPath:indexPath];

    if (indexPath.item == 0) // degenerate case 1, first item of section
        return atts;

    NSIndexPath* ipPrev =
    [NSIndexPath indexPathForItem:indexPath.item-1 inSection:indexPath.section];

    CGRect fPrev = [self layoutAttributesForItemAtIndexPath:ipPrev].frame;
    CGFloat rightPrev = fPrev.origin.x + fPrev.size.width + 10;
    if (atts.frame.origin.x <= rightPrev) // degenerate case 2, first item of line
        return atts;

    CGRect f = atts.frame;
    f.origin.x = rightPrev;
    atts.frame = f;
    return atts;
} 
```

之所以如此简单，是因为我们并没有真正执行繁重的布局；我们正在利用 UICollectionViewFlowLayout 已经为我们完成的布局工作。它已经决定了每行有多少项目；如果你明白我的意思，我们只是在阅读这些台词并将这些项目推到一起。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-22T19:18:05.813

有几点需要考虑：

1.  尝试更改 IB 中的最小间距，但将光标留在该字段中。**请注意，Xcode 不会立即将文档标记为已更改。**但是，当您单击不同的字段时，Xcode 会注意到文档已更改，并在文件导航器中对其进行标记。因此，请务必在进行更改后使用标签或单击到不同的字段。

2.  进行更改后保存您的故事板/xib 文件，并确保重新构建应用程序。错过这一步并不难，然后您会摸不着头脑，想知道为什么您的更改似乎没有任何效果。

3.  `UICollectionViewFlowLayout`有一个`minimumInteritemSpacing`属性，这是您在 IB 中设置的。但是集合的委托也可以有[一个方法来确定项目间的间距](https://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewDelegateFlowLayout_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UICollectionViewDelegateFlowLayout/collectionView%3alayout%3aminimumInteritemSpacingForSectionAtIndex%3a)。该方法胜过布局的属性，因此如果您在委托中实现它，您的布局属性将不会被使用。

4.  请记住，间距有一个*最小*间距。布局将使用该数字（无论是来自属性还是来自委托方法）作为允许的最小空间，但如果行上有剩余空间，它可能会使用更大的空间。因此，例如，如果您将最小间距设置为 0，您可能仍会在项目之间看到几个像素。如果您想更好地控制项目的确切间距，您可能应该使用不同的布局（可能是您自己创建的布局之一）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-06T18:57:13.240

一点点数学就更容易做到这一点。Chris Wagner 编写的代码很糟糕，因为它调用了每个先前项目的布局属性。所以你滚动的越多，它就越慢......

只需像这样使用模（我也使用我的 minimumInteritemSpacing 值作为最大值）：

```
- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes* currentItemAttributes = [super layoutAttributesForItemAtIndexPath:indexPath];
    NSInteger numberOfItemsPerLine = floor([self collectionViewContentSize].width / [self itemSize].width);

    if (indexPath.item % numberOfItemsPerLine != 0)
    {
        NSInteger cellIndexInLine = (indexPath.item % numberOfItemsPerLine);

        CGRect itemFrame = [currentItemAttributes frame];
        itemFrame.origin.x = ([self itemSize].width * cellIndexInLine) + ([self minimumInteritemSpacing] * cellIndexInLine);
        currentItemAttributes.frame = itemFrame;
    }

    return currentItemAttributes;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-13T23:26:29.657

左对齐的一种简单方法是在 UICollectionViewFlowLayout 的子类中修改 layoutAttributesForElementsInRect::

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *allLayoutAttributes = [super layoutAttributesForElementsInRect:rect];
    CGRect prevFrame = CGRectMake(-FLT_MAX, -FLT_MAX, 0, 0);
    for (UICollectionViewLayoutAttributes *layoutAttributes in allLayoutAttributes)
    {
        //fix blur
        CGRect theFrame = CGRectIntegral(layoutAttributes.frame);

        //left justify
        if(prevFrame.origin.x > -FLT_MAX &&
           prevFrame.origin.y >= theFrame.origin.y &&
           prevFrame.origin.y <= theFrame.origin.y) //workaround for float == warning
        {
            theFrame.origin.x = prevFrame.origin.x +
                                prevFrame.size.width + 
                                EXACT_SPACE_BETWEEN_ITEMS;
        }
        prevFrame = theFrame;

        layoutAttributes.frame = theFrame;
    }
    return allLayoutAttributes;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-25T02:54:23.950

Clean Swift 解决方案，来自进化史：

1.  有[马特的回答](https://stackoverflow.com/a/13258495/1033581)
2.  有[克里斯瓦格纳单独的项目修复](https://stackoverflow.com/a/15554667/1033581)
3.  有[mokagio sectionInset 和 minimumInteritemSpacing 改进](https://github.com/mokagio/UICollectionViewLeftAlignedLayout)
4.  有[fanpyi Swift版本](https://github.com/fanpyi/UICollectionViewLeftAlignedLayout-Swift)
5.  现在这是我的一个简化和干净的版本：

```
open class UICollectionViewLeftAlignedLayout: UICollectionViewFlowLayout {
    open override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        return super.layoutAttributesForElements(in: rect)?.map { $0.representedElementKind == nil ? layoutAttributesForItem(at: $0.indexPath)! : $0 }
    }

    open override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
        guard let currentItemAttributes = super.layoutAttributesForItem(at: indexPath)?.copy() as? UICollectionViewLayoutAttributes,
            collectionView != nil else {
            // should never happen
            return nil
        }

        // if the current frame, once stretched to the full row intersects the previous frame then they are on the same row
        if indexPath.item != 0,
            let previousFrame = layoutAttributesForItem(at: IndexPath(item: indexPath.item - 1, section: indexPath.section))?.frame,
            currentItemAttributes.frame.intersects(CGRect(x: -.infinity, y: previousFrame.origin.y, width: .infinity, height: previousFrame.size.height)) {
            // the next item on a line
            currentItemAttributes.frame.origin.x = previousFrame.origin.x + previousFrame.size.width + evaluatedMinimumInteritemSpacingForSection(at: indexPath.section)
        } else {
            // the first item on a line
            currentItemAttributes.frame.origin.x = evaluatedSectionInsetForSection(at: indexPath.section).left
        }
        return currentItemAttributes
    }

    func evaluatedMinimumInteritemSpacingForSection(at section: NSInteger) -> CGFloat {
        return (collectionView?.delegate as? UICollectionViewDelegateFlowLayout)?.collectionView?(collectionView!, layout: self, minimumInteritemSpacingForSectionAt: section) ?? minimumInteritemSpacing
    }

    func evaluatedSectionInsetForSection(at index: NSInteger) -> UIEdgeInsets {
        return (collectionView?.delegate as? UICollectionViewDelegateFlowLayout)?.collectionView?(collectionView!, layout: self, insetForSectionAt: index) ?? sectionInset
    }
} 
```

用法：item之间的间距由delegate决定`collectionView (_:layout:minimumInteritemSpacingForSectionAt:)`。

我把它放在github上，[https://github.com/Coeur/UICollectionViewLeftAlignedLayout](https://github.com/Coeur/UICollectionViewLeftAlignedLayout)，我实际上添加了一个支持滚动方向（水平和垂直）的功能。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-07T20:02:44.723

克里斯解决方案的快速版本。

```
class PazLeftAlignedCollectionViewFlowLayout : UICollectionViewFlowLayout {
    var maxCellSpacing = 14.0
    override func layoutAttributesForElementsInRect(rect: CGRect) -> [AnyObject]? {
        if var attributesToReturn = super.layoutAttributesForElementsInRect(rect) as? Array<UICollectionViewLayoutAttributes> {
            for attributes in attributesToReturn {
                if attributes.representedElementKind == nil {
                    let indexPath = attributes.indexPath
                    attributes.frame = self.layoutAttributesForItemAtIndexPath(indexPath).frame;
                }
            }
            return attributesToReturn;
        }
        return super.layoutAttributesForElementsInRect(rect)
    }

    override func layoutAttributesForItemAtIndexPath(indexPath: NSIndexPath) -> UICollectionViewLayoutAttributes! {
        let currentItemAttributes = super.layoutAttributesForItemAtIndexPath(indexPath)

        if let collectionViewFlowLayout = self.collectionView?.collectionViewLayout as? UICollectionViewFlowLayout {
            let sectionInset = collectionViewFlowLayout.sectionInset
            if (indexPath.item == 0) { // first item of section
                var frame = currentItemAttributes.frame;
                frame.origin.x = sectionInset.left; // first item of the section should always be left aligned
                currentItemAttributes.frame = frame;

                return currentItemAttributes;
            }

            let previousIndexPath = NSIndexPath(forItem:indexPath.item-1, inSection:indexPath.section)
            let previousFrame = self.layoutAttributesForItemAtIndexPath(previousIndexPath).frame;
            let previousFrameRightPoint = Double(previousFrame.origin.x) + Double(previousFrame.size.width) + self.maxCellSpacing

            let currentFrame = currentItemAttributes.frame
            var width : CGFloat = 0.0
            if let collectionViewWidth = self.collectionView?.frame.size.width {
                width = collectionViewWidth
            }
            let strecthedCurrentFrame = CGRectMake(0,
                currentFrame.origin.y,
                width,
                currentFrame.size.height);

            if (!CGRectIntersectsRect(previousFrame, strecthedCurrentFrame)) { // if current item is the first item on the line
                // the approach here is to take the current frame, left align it to the edge of the view
                // then stretch it the width of the collection view, if it intersects with the previous frame then that means it
                // is on the same line, otherwise it is on it's own new line
                var frame = currentItemAttributes.frame;
                frame.origin.x = sectionInset.left; // first item on the line should always be left aligned
                currentItemAttributes.frame = frame;
                return currentItemAttributes;
            }

            var frame = currentItemAttributes.frame;
            frame.origin.x = CGFloat(previousFrameRightPoint)
            currentItemAttributes.frame = frame;
        }
        return currentItemAttributes;
    }
} 
```

要使用它，请执行以下操作：

```
 override func viewDidLoad() {
    super.viewDidLoad()
    self.collectionView.collectionViewLayout = self.layout
}
var layout : PazLeftAlignedCollectionViewFlowLayout {
    var layout = PazLeftAlignedCollectionViewFlowLayout()
    layout.itemSize = CGSizeMake(220.0, 230.0)
    layout.minimumLineSpacing = 12.0
    return layout
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-14T23:40:26.867

“问题”`UICollectionViewFlowLayout`在于它对单元格应用了合理对齐：一行中的第一个单元格是左对齐的，一行中的最后一个单元格是右对齐的，并且中间的所有其他单元格以相等的间距均匀分布这大于`minimumInteritemSpacing`.

这篇文章已经有很多很好的答案，通过子类化解决了这个问题`UICollectionViewFlowLayout`。结果，您得到一个将单元格**左**对齐的布局。另一种以恒定间距分布单元格的有效解决方案是将单元格**右**对齐。

### AlignedCollectionViewFlowLayout

我还创建了一个`UICollectionViewFlowLayout`子类，它遵循[*matt*](https://stackoverflow.com/a/13258495/2062785)和[*Chris Wagner*](https://stackoverflow.com/a/15554667/2062785)建议的类似想法，可以对齐单元格

`⬅︎` **左**：

[![左对齐布局](../Images/83b26280696183e388360827754e6c34.png)](https://i.stack.imgur.com/qeCll.png)

或`➡︎` **对**：

[![右对齐布局](../Images/25b923d7ed86bb19eb01da42bc1dfff9.png)](https://i.stack.imgur.com/OXu7z.png)

您可以从这里简单地下载它，将布局文件添加到您的项目中并设置`AlignedCollectionViewFlowLayout`为您的集合视图的布局类：
[https ://github.com/mischa-hildebrand/AlignedCollectionViewFlowLayout](https://github.com/mischa-hildebrand/AlignedCollectionViewFlowLayout)

### 它是如何工作的（对于左对齐的单元格）：

```
 +---------+----------------------------------------------------------------+---------+
 |         |                                                                |         |
 |         |     +------------+                                             |         |
 |         |     |            |                                             |         |
 | section |- - -|- - - - - - |- - - - +---------------------+ - - - - - - -| section |
 |  inset  |     |intersection|        |                     |   line rect  |  inset  |
 |         |- - -|- - - - - - |- - - - +---------------------+ - - - - - - -|         |
 | (left)  |     |            |             current item                    | (right) |
 |         |     +------------+                                             |         |
 |         |     previous item                                              |         |
 +---------+----------------------------------------------------------------+---------+ 
```

这里的概念是检查索引为 i 的当前单元格和索引*为**i-1*的前一个单元格是否占据同一行。

*   如果他们不这样做，则索引为*i*的单元格是该行中最左边的单元格。
    → 将单元格移动到集合视图的左边缘（不改变其垂直位置）。
*   如果是这样，则索引为*i*的单元格不是该行中最左边的单元格。
    → 获取前一个单元格的帧（索引为*i-1*）并将当前单元格移到它旁边。

### 对于右对齐的单元格...

...你做同样的反之亦然，即你检查*下一个*带有索引*i+1*的单元格。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-06-17T09:42:04.893

你可以通过两种方式做到这一点。

首先，在 中进行一些修改`layoutAttributesForItem`，

通过前一个 . 获取当前属性的布局`layoutAttributesForItem(at: IndexPath(item: indexPath.item - 1, section: indexPath.section))?.frame`。

> layoutAttributesForItem(at:)：此方法按需向集合视图提供布局信息。您需要覆盖它并在请求的 indexPath 处返回项目的布局属性。

其次，通过新的一些属性`UICollectionViewLayoutAttributes(forCellWith: indexPath)`，将它们布置在任何你想要的地方。

而且数学有点大，因为它执行了布局的繁重工作。

> layoutAttributesForElements(in:)：在此方法中，您需要返回给定矩形内所有项目的布局属性。您将属性作为 UICollectionViewLayoutAttributes 数组返回到集合视图。

* * *

你可以查看[我的回购](https://github.com/BoxDengJZ/UICollectionViewLeftAlignedLayout)

*   你可以把项目左对齐

![](../Images/0c5e5d8c8f21c38ff45d00a18ee0d90f.png)

*   你可以把项目右对齐

![](../Images/a62c5dc8f1759cb59dd4c9ba2febca37.png)

*   您可以将项目右对齐并反转项目

![](../Images/0787b22810e3d0cdd594a47dde6de5cb.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-11T14:52:17.753

根据 Chris Wagner 的回答，为感兴趣的人提供了一个更简洁的 swift 版本：

```
class AlignLeftFlowLayout: UICollectionViewFlowLayout {

    var maximumCellSpacing = CGFloat(9.0)

    override func layoutAttributesForElementsInRect(rect: CGRect) -> [AnyObject]? {
        let attributesToReturn = super.layoutAttributesForElementsInRect(rect) as? [UICollectionViewLayoutAttributes]

        for attributes in attributesToReturn ?? [] {
            if attributes.representedElementKind == nil {
                attributes.frame = self.layoutAttributesForItemAtIndexPath(attributes.indexPath).frame
            }
        }

        return attributesToReturn
    }

    override func layoutAttributesForItemAtIndexPath(indexPath: NSIndexPath) -> UICollectionViewLayoutAttributes! {
        let curAttributes = super.layoutAttributesForItemAtIndexPath(indexPath)
        let sectionInset = (self.collectionView?.collectionViewLayout as UICollectionViewFlowLayout).sectionInset

        if indexPath.item == 0 {
            let f = curAttributes.frame
            curAttributes.frame = CGRectMake(sectionInset.left, f.origin.y, f.size.width, f.size.height)
            return curAttributes
        }

        let prevIndexPath = NSIndexPath(forItem: indexPath.item-1, inSection: indexPath.section)
        let prevFrame = self.layoutAttributesForItemAtIndexPath(prevIndexPath).frame
        let prevFrameRightPoint = prevFrame.origin.x + prevFrame.size.width + maximumCellSpacing

        let curFrame = curAttributes.frame
        let stretchedCurFrame = CGRectMake(0, curFrame.origin.y, self.collectionView!.frame.size.width, curFrame.size.height)

        if CGRectIntersectsRect(prevFrame, stretchedCurFrame) {
            curAttributes.frame = CGRectMake(prevFrameRightPoint, curFrame.origin.y, curFrame.size.width, curFrame.size.height)
        } else {
            curAttributes.frame = CGRectMake(sectionInset.left, curFrame.origin.y, curFrame.size.width, curFrame.size.height)
        }

        return curAttributes
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-02T21:05:16.803

这是 NSCollectionViewFlowLayout

```
class LeftAlignedCollectionViewFlowLayout: NSCollectionViewFlowLayout {

    var maximumCellSpacing = CGFloat(2.0)

    override func layoutAttributesForElementsInRect(rect: NSRect) -> [NSCollectionViewLayoutAttributes] {

        let attributesToReturn = super.layoutAttributesForElementsInRect(rect)

        for attributes in attributesToReturn ?? [] {
            if attributes.representedElementKind == nil {
                attributes.frame = self.layoutAttributesForItemAtIndexPath(attributes.indexPath!)!.frame
            }
        }
        return attributesToReturn
    }

    override func layoutAttributesForItemAtIndexPath(indexPath: NSIndexPath) -> NSCollectionViewLayoutAttributes? {

        let curAttributes = super.layoutAttributesForItemAtIndexPath(indexPath)
        let sectionInset = (self.collectionView?.collectionViewLayout as! NSCollectionViewFlowLayout).sectionInset

        if indexPath.item == 0 {
            let f = curAttributes!.frame
            curAttributes!.frame = CGRectMake(sectionInset.left, f.origin.y, f.size.width, f.size.height)
            return curAttributes
        }

        let prevIndexPath = NSIndexPath(forItem: indexPath.item-1, inSection: indexPath.section)
        let prevFrame = self.layoutAttributesForItemAtIndexPath(prevIndexPath)!.frame
        let prevFrameRightPoint = prevFrame.origin.x + prevFrame.size.width + maximumCellSpacing

        let curFrame = curAttributes!.frame
        let stretchedCurFrame = CGRectMake(0, curFrame.origin.y, self.collectionView!.frame.size.width, curFrame.size.height)

        if CGRectIntersectsRect(prevFrame, stretchedCurFrame) {
            curAttributes!.frame = CGRectMake(prevFrameRightPoint, curFrame.origin.y, curFrame.size.width, curFrame.size.height)
        } else {
            curAttributes!.frame = CGRectMake(sectionInset.left, curFrame.origin.y, curFrame.size.width, curFrame.size.height)
        }

        return curAttributes
    }
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-02-24T07:12:37.450

基于 mokagio 的 swift 版本：[https ://github.com/fanpyi/UICollectionViewLeftAlignedLayout-Swift](https://github.com/fanpyi/UICollectionViewLeftAlignedLayout-Swift)

```
class UICollectionViewLeftAlignedLayout: UICollectionViewFlowLayout {
    override func layoutAttributesForElementsInRect(rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        let attributesToReturn = super.layoutAttributesForElementsInRect(rect)
        if let attributesToReturn = attributesToReturn {
            for attributes in attributesToReturn {
                if attributes.representedElementKind == nil {
                    let indexpath = attributes.indexPath
                    if let attr = layoutAttributesForItemAtIndexPath(indexpath) {
                        attributes.frame = attr.frame
                    }

                }
            }
        }
        return attributesToReturn
    }

    override func layoutAttributesForItemAtIndexPath(indexPath: NSIndexPath) -> UICollectionViewLayoutAttributes? {
        if  let currentItemAttributes = super.layoutAttributesForItemAtIndexPath(indexPath){
            let sectionInset = self.evaluatedSectionInsetForItemAtIndex(indexPath.section)
            let  isFirstItemInSection = indexPath.item == 0;
            let  layoutWidth = CGRectGetWidth(self.collectionView!.frame) - sectionInset.left - sectionInset.right;

            if (isFirstItemInSection) {
                currentItemAttributes.leftAlignFrameWithSectionInset(sectionInset)
                return currentItemAttributes
            }

            let  previousIndexPath = NSIndexPath(forItem: indexPath.item - 1, inSection: indexPath.section)

            let previousFrame = layoutAttributesForItemAtIndexPath(previousIndexPath)?.frame ?? CGRectZero
            let  previousFrameRightPoint = previousFrame.origin.x + previousFrame.width
            let currentFrame = currentItemAttributes.frame;
            let  strecthedCurrentFrame = CGRectMake(sectionInset.left,
                currentFrame.origin.y,
                layoutWidth,
                currentFrame.size.height)
            // if the current frame, once left aligned to the left and stretched to the full collection view
            // widht intersects the previous frame then they are on the same line
            let  isFirstItemInRow = !CGRectIntersectsRect(previousFrame, strecthedCurrentFrame)

            if (isFirstItemInRow) {
                // make sure the first item on a line is left aligned
                currentItemAttributes.leftAlignFrameWithSectionInset(sectionInset)
                return currentItemAttributes
            }

            var frame = currentItemAttributes.frame;
            frame.origin.x = previousFrameRightPoint + evaluatedMinimumInteritemSpacingForSectionAtIndex(indexPath.section)
            currentItemAttributes.frame = frame;
            return currentItemAttributes;

        }
        return nil
    }
    func evaluatedMinimumInteritemSpacingForSectionAtIndex(sectionIndex:Int) -> CGFloat {
        if let delegate = self.collectionView?.delegate as? UICollectionViewDelegateFlowLayout {
            if delegate.respondsToSelector("collectionView:layout:minimumInteritemSpacingForSectionAtIndex:") {
                return delegate.collectionView!(self.collectionView!, layout: self, minimumInteritemSpacingForSectionAtIndex: sectionIndex)

            }
        }
        return self.minimumInteritemSpacing

    }
    func evaluatedSectionInsetForItemAtIndex(index: Int) ->UIEdgeInsets {
        if let delegate = self.collectionView?.delegate as? UICollectionViewDelegateFlowLayout {
            if  delegate.respondsToSelector("collectionView:layout:insetForSectionAtIndex:") {
                return delegate.collectionView!(self.collectionView!, layout: self, insetForSectionAtIndex: index)
            }
        }
        return self.sectionInset
    }
} 
```

# colors - lerpColor() / fill() 使用处理抛出 NullPointerException

> ID：13017259
> 
> 赞同：0
> 
> 时间：2012-10-22T18:15:22.677
> 
> 标签：colors, processing

这是一个类的代码：

```
class Circle extends PApplet {
  //var declarations

  Circle(int duration, int from, int to, PApplet parent, int x, int y, int length, int height){
    this.ani = new Tween(parent, 1.3f, Tween.SECONDS, Shaper.QUADRATIC);
    Class s = Shaper.QUADRATIC;
    this.from = from;
    this.to = to;
    this.len = length;
    this.height = height;
    this.x = x;
    this.y = y;
  }

  void update(){
    int c = lerpColor(this.from, this.to, this.ani.position(), RGB);

    fill(c);
    ellipse(this.x, this.y, this.len, this.height);
  }
} 
```

当我`update()`在正确播种的版本`Circle`（见下面的例子）上运行时，我得到这个堆栈跟踪：

```
Exception in thread "Animation Thread" java.lang.NullPointerException
at processing.core.PApplet.fill(PApplet.java:13540)
at ellipses.Circle.update(Ellipses.java:85)
at ellipses.Ellipses.draw(Ellipses.java:39)
at processing.core.PApplet.handleDraw(PApplet.java:2128)
at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:190)
at processing.core.PApplet.run(PApplet.java:2006)
at java.lang.Thread.run(Thread.java:662) 
```

它告诉我在里面`fill()`，不应该的东西是空的。我首先会假设传递给的值在`fill()`某种程度上是错误的。to 的值`fill()`来自`lerpColor()`，所以大概是我用`lerpColor()`错了。

我的实例`Circle`如下所示：

```
int c1 = color(45, 210, 240);
int c2 = color(135, 130, 195);

cir = new Circle(1, c1, c2, this, 100, 200, 140, 140);
cir.update(); 
```

**那么如何正确使用`fill()`/呢？`lerpColor`**

（顺便说一句，我在 Eclipse 中使用带有 proclipsing 的处理。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:04:02.337

好吧，首先我不完全确定你为什么需要从一个似乎不是你的窗口之一的类中扩展 PApplet，但我离题了。

如果我了解您要执行的操作，则问题出在填充功能上，而不是 lerpColor 上。如果你试图调用你的主 PApplet 的填充函数并且这个 Circle 类不是它，那么你需要告诉它在哪个 PApplet 上调用它。即您已经发送的父母。我会做这样的事情。

```
class Circle extends PApplet {
  //var declarations
  Tween ani;
  int from, to, x, y, len, heightz;

  PApplet parr; // prepare to accept the parent instance

  Circle(int duration, int from, int to, PApplet parent, int x, int y, int length, int height) {
    this.ani = new Tween(parent, 1.3f, Tween.SECONDS, Shaper.QUADRATIC);
    Class s = Shaper.QUADRATIC;
    this.from = from;
    this.to = to;
    this.len = length;
    this.heightz = height;
    this.x = x;
    this.y = y;
    parr = parent; // store the parent instance
  }
  void update() {
    color c = lerpColor(this.from, this.to, this.ani.position(), RGB);
    parr.fill(c); // call fill on the parent
    parr.ellipse(this.x, this.y, this.len, this.height); // this one obviously suffers from the same problem...
  } 
```

我希望这有帮助！PK

# perl - Perl - Facebook 图形 API

> ID：13017260
> 
> 赞同：5
> 
> 时间：2012-10-22T18:15:25.623
> 
> 标签：perl, facebook-graph-api, plack

以前很容易区分桌面应用程序和 Web 应用程序，但今天在阅读文档时我注意到这种差异不太明显。

我正在使用 Facebook::Graph 模块创建桌面应用程序，但仍然无法超越配置阶段。我被困在身份验证阶段：

```
my $ q = Plack::Request->new($env);
$fb->request_access_token($q->query_param('code')); 
```

（[http://metacpan.org/pod/Facebook::Graph](http://metacpan.org/pod/Facebook%3a%3aGraph)）

它一直告诉我“需要$ env”。阅读文档后，我意识到 Plack 只关注 Web 应用程序。

（[http://metacpan.org/pod/Plack::Request](http://metacpan.org/pod/Plack%3a%3aRequest)）

你能证实这一点吗？如果没有，我该如何通过这一步？

使用 Mechanize 获取 access_token 然后按照文档中的描述发出 GET 请求不会有问题，但我不想让我的存在复杂化，所以如果有其他方法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:47:47.947

有点晚了，但有一个解决方法。

要获取访问令牌，请查看此处：

[https://developers.facebook.com/docs/howtos/login/login-for-desktop/](https://developers.facebook.com/docs/howtos/login/login-for-desktop/)

1.  只需使用 Mechanize 或您想要的任何内容创建一个客户端，然后使用所需的凭据登录

2.  按照描述执行请求

3.  从授权页面继续

4.  解析响应并获取令牌

```
$fb->access_token($token);
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:35:33.530

[http://developers.facebook.com/docs/reference/api/application/](http://developers.facebook.com/docs/reference/api/application/)说：

> 注意：配置为本机/桌面应用程序的应用程序将无法进行需要应用程序**access_token**的 API 调用。

所以不是 Plack，是 Facebook 要求你的应用程序是网络的。但是，如果您可以避免**access_token**请求，它可能会起作用。

# c# - .net 紧凑框架不支持异步调用委托

> ID：13017265
> 
> 赞同：2
> 
> 时间：2012-10-22T18:15:35.797
> 
> 标签：c#, .net, windows-phone-7, compact-framework

我最近开始使用window phone 7。我创建了一个委托并尝试异步调用它。代码是这样的：

```
public class1
{
     public delegate void fireAlwaysDelegate();
     fireAlwaysDelegate fad;
     public class1()
     {
       initializeComponents();
       fad=new fireAlwaysDelegate(fireAlways)
     }

     fireAlways()
     {
       //some code
     }

     PhoneApplicationPage_loaded()
     {
        //some code
        fda.beginInvoke(null,null);
     }
} 
```

但是，当我执行这段代码时，它抛出了一个异常，说 .net 紧凑框架不支持异步调用委托。根据我对 WP7 框架的理解，它几乎对所有内容都使用异步调用，所以我无法理解为什么不允许这样做。

任何解决这个问题的方法。

一旦 PhoneApplicationPage_loaded 完成并且 UI 启动，我想执行一些代码，我想从 PhoneApplicationPage_loaded 调用异步委托。

另外我想了解为什么不允许对代表进行异步调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:13:15.183

在线程池线程上调用委托目标的能力对于委托来说有点奇怪。它属于“很高兴拥有”类别，但不是在 TP 线程上运行代码所必需的。它的实际实现就像一座冰山，需要大量代码才能在另一个线程上构建带有任意参数的堆栈帧，管理它们的生命周期，捕获执行结果并将它们编组回调用线程。

该代码是 CLR Remoting 支持代码。并且在从 Compact Framework 开始并演变为 Silverlight 和 Windows Phone 的 CLR 分支中缺失。在尺寸很重要的平台上，为了保持体积小，它被削减了。将 Silverlight 的约 5 兆字节与桌面的约 50 兆字节进行比较，相当了不起。

另一种方法是使用 ThreadPool.QueueUserWorkItem() 代替。它受到您可以传递的参数的限制，通过使用 lambda 表达式捕获它们可以轻松解决。您唯一需要担心的是异常，它们会在工作线程上引发，如果您没有在那里捕获它们，它们将终止您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:07:49.473

您可以改用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)。

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    private BackgroundWorker bw = new BackgroundWorker();

    public MainPage()
    {
        InitializeComponent();
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
    }

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        FireAlways();
    }

  public void FireAlways()
  {
    //some code
  }

 private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
 {
     if (bw.IsBusy != true)
     {
         bw.RunWorkerAsync();
     }
 }

} 
```

# android - 'adb devices' 显示虚拟设备

> ID：13017269
> 
> 赞同：18
> 
> 时间：2012-10-22T18:15:58.307
> 
> 标签：android, avd

我已经面临这个问题很长一段时间了。运行“adb devices”向我展示了一个额外的虚拟设备，尽管它被命名为 emulator-5554。仅供参考，我也没有运行任何模拟器。

**亚行设备**

> 附加设备列表：
> xxxxxxx 设备（实际设备）
> emulator-5554 设备（虚拟设备显示为设备）。

我该如何收拾这个烂摊子？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-09-21T09:01:49.127

对我来说同样的问题，但我的服务列表中没有看到任何 Bluestacks 服务。在 `adb devices`显示我没有的模拟器后，我通常只输入命令

```
adb kill-server 
```

并运行

```
adb devices 
```

再次仅显示已连接的设备。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-01T17:04:08.360

我遇到过同样的问题。我这样做了，现在一切正常

1.  点击 Windows+R
2.  类型`services.msc`
3.  停止`BlueStacks Android Service`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-22T18:58:26.460

我已经弄清楚了这个问题。我已经为 Mac 安装了[Bluestacks，以便在 Mac](http://bluestacks.com/bstks_mac.html)上试用 Android 应用程序。这是运行具有不同名称的模拟器。

通过截取模拟器的屏幕截图来解决这个问题，它显示了 Bluestacks 的启动屏幕。卸载了 Bluestacks，现在一切都很好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-04T20:52:20.727

adb 服务器正在从 5555 到 5555+128 (5683) 的所有偶数本地端口上扫描模拟器。如果您有使用这些端口之一的自定义服务......您会遇到“adb -d 命令”要求

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T18:19:32.550

请在任务管理器中检查**emulator-arm.exe**是否正在运行。如果是这样，请尝试同时停止**adb.exe**和**emulator-arm.exe**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-07T14:44:34.243

我有同样的问题，这些答案都没有帮助。所以我发现我的系统没有正确关闭，这就是我有一个虚拟模拟器 5554 的原因。解决方案是创建一个具有名称的新模拟器然后启动它？当它启动时，使用 cmd 杀死服务器，直到模拟器启动，您可以在 DDMS 中的设备下看到它的名称。在此关闭模拟器后...emulator-5554 消失了，现在您可以启动 Bluestacks 并连接

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-01T19:06:15.297

我也面临同样的问题，这也是因为 BlueStacks。如果您有 Windows 并且不想删除它，那么您可以停止它的服务“BlueStacks Android 服务”。

为此，请单击 Windows+R，键入 services.msc 然后停止“BlueStacks Android 服务”

参考： http: [//forum.xda-developers.com/showthread.php?t=2612389](http://forum.xda-developers.com/showthread.php?t=2612389)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-04T10:04:29.927

**Eclipse 模拟器不是 BlueStacks：**

如果eclipse模拟器在后台运行而你不知道如何关闭它，只需转到设备选项卡并选择右侧的下拉菜单，然后`Reset adb`. 或者，只需使用 adb 控制台重置 adb。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-28T20:07:47.787

只需打开任务管理器并结束任务 bluestacks

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-16T12:42:21.287

我也遇到了同样的问题。这是我解决这个问题的答案。在 Windows 系统中。

1.在cmd终端，usr cmd *netstat -aon|findstr "5555"*

2.使用cmd *tasklist|find "PID"*，PID参数应该是一个进程号，是第一步的结果。

3.将端口号更改为其他，不应为“5555”

就这样完成了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-04T19:23:21.210

尝试后：

1.  adb 杀死服务器
2.  在任务管理器中停止 adb.exe
3.  亚行USB
4.  还有一些我什至不记得的东西。. .

我重新启动计算机，虚拟设备不见了！

# c++ - 用于获取/释放资源的 JNI C++ 模板

> ID：13017271
> 
> 赞同：3
> 
> 时间：2012-10-22T18:16:05.577
> 
> 标签：c++, templates, java-native-interface, release

从 C++ 代码中获取/释放 JNI 资源的推荐模板集或库是什么？

“坏”的例子：

```
//C++ code
extern "C"
JNIEXPORT void JNICALL Java_ClassName_MethodName
  (JNIEnv *env, jobject obj, jstring javaString)
{
    //Get the native string from javaString
    const char *nativeString = env->GetStringUTFChars(javaString, 0);

    //Do something with the nativeString

    //DON'T FORGET THIS LINE!!!
    env->ReleaseStringUTFChars(javaString, nativeString);
} 
```

显然，每个人都使用模板集，而不是上面的代码。

对于 jstring，当对象“超出范围”时，它调用 GetStringUTFChars 来获取资源并调用 ReleaseStringUTFChars 来释放。

必须是类似于 auto_ptr 模板的东西，但针对 JNI 量身定制，例如为 jstring 调用 GetStringUTFChars/ReleaseStringUTFChars。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:49:22.450

您可以[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)在 C++11 中使用，它允许您自己设置删除器：

```
#include <memory>
#include <functional>

typedef std::unique_ptr<char const[], std::function<void(char const*)>> jni_string_ptr;
// the "std::function" is needed to store any callable†

extern "C"
JNIEXPORT void JNICALL Java_ClassName_MethodName
  (JNIEnv *env, jobject obj, jstring javaString)
{
    //Get the native string from javaString
    jni_string_ptr nativeString(env->GetStringUTFChars(javaString, 0),
        [=](char const* p) mutable{ env->ReleaseStringUTFChars(javaString, p); });
    // lambda as the deleter
    // mutable needed if "ReleaseStringUTFChars" is a non-const method

    //Do something with the nativeString

    // nativeString automatically calls the passed deleter
} 
```

如果您被困在 C++03 中并且无法访问`std::unique_ptr`，则[`boost::shared_array`](http://www.boost.org/libs/smart_ptr/shared_ptr.htm)提供了一个..*可行*的替代方案。

```
#include <boost/shared_ptr.hpp>

typedef boost::shared_array<char const*> jni_string_ptr;

struct jni_string_deleter{
  jni_string_deleter(JNIEnv* e, jstring js)
    : _env(e), _java_string(js) {}

  void operator()(char const* p) const{
    _env->ReleaseStringUTFChars(_java_string, p);
  }

private:
  JNIEnv* _env;
  jstring _java_string;
};

extern "C"
JNIEXPORT void JNICALL Java_ClassName_MethodName
  (JNIEnv *env, jobject obj, jstring javaString)
{
    //Get the native string from javaString
    jni_string_ptr nativeString(env->GetStringUTFChars(javaString, 0),
        jni_string_deleter(env, javaString));

    //Do something with the nativeString

    // nativeString automatically calls the passed deleter
} 
```

* * *

† 您还可以在此处使用特定的 delter 类型，与`shared_array`示例一样，以避免类型擦除开销`std::function`：

```
struct jni_string_deleter{
  jni_string_deleter(JNIEnv* e, jstring js)
    : _env(e), _java_string(js) {}

  void operator()(char const* p) const{
    _env->ReleaseStringUTFChars(_java_string, p);
  }

private:
  JNIEnv* _env;
  jstring _java_string;
};

typedef std::unique_ptr<char const[], jni_string_deleter> jni_string_ptr;

// create
jni_string_ptr(env->get_the_chars(), jni_string_deleter(env, javaString)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T19:52:24.913

这里的关键字是[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)：

```
class jni_string {
public:
    jni_string(JNIEnv *env, jstring javaString)
        : env_(env), javaString_(javaString)
    { nativeString_ = env_->GetStringUTFChars(javaString_, 0); }

    ~jni_string() { env_->ReleaseStringUTFChars(javaString_, nativeString_); }

    operator const char *() const { return nativeString_; }
private:
    jni_string(const jni_string &x);
    jni_string &operator=(const jni_string &x);

    JNIEnv *env_;
    jstring javaString_;
    const char *nativeString_;
}; 
```

用法是：

```
//C++ code
extern "C"
JNIEXPORT void JNICALL Java_ClassName_MethodName
  (JNIEnv *env, jobject obj, jstring javaString)
{
    //Get the native string from javaString
    jni_string nativeString(env, javaString);

    //Do something with the nativeString
} 
```

# php - 未找到文件，但文件存在

> ID：13017272
> 
> 赞同：1
> 
> 时间：2012-10-22T18:16:07.687
> 
> 标签：php, apache, bash, permissions, blast

我正在一个服务器上工作，用户应该能够对数据库运行蛋白质序列，它使用一个名为 blastall 的可执行文件。服务器生成一个可执行文件，然后它应该使用批处理运行该可执行文件。但是，它似乎没有运行。这是生成可执行文件的示例（cmd.sh）：

```
#!/usr/bin/env sh
cd /var/www/dbCAN
php -q /var/www/dbCAN/tools/blast.php -e -w /var/www/dbCAN/data/blast/20121019135548 
```

末尾的疯狂数字是根据作业提交时间自动生成的作业 ID。有两个问题，我试图一次解决一个。第一个问题是，当手动执行（我只是运行 ./cmd.sh）时，我收到以下错误：

```
sh: 1: /var/www/dbCAN/tools/blast/bin/blastall: not found
sh: 1: /var/www/dbCAN/tools/blast/bin/blastall: not found
sh: 1: -t: not found 
```

但这对我来说真的没有意义，因为指定的目录实际上包含blastall。它具有完整的 rwx 权限，并且沿途的每个目录都具有适当的权限。

工具中的 blast.php 文件如下所示：

```
try {
  do_blast($opts["w"]);
  $info['status'] = 'done';
  $fp = fopen("$opts['w']/info.yaml","w")
  fwrite($fp, Sypc::YAMLDump($info)); fclose($fp);  
} 
```

当然在它上面有变量声明，do_blast 函数看起来像这样（再次在它上面声明变量和一个 cd 以便目录工作）：

```
function do_blast($workdir)
{
  system("/var/www/dbCAN/tools/blast/bin/blastall -d data/blast/all.seq.fa -m 9 -p blastp -i $workdir/input.faa -o $workdir/output.txt")
  system("/var/www/dbCAN/tools/blast/bin/blastall -d data/blast/all.seq.fa -p blastp -i $workdir/input.faa -o $workdir/output2.txt")
} 
```

知道可能导致此问题的原因是什么吗？我认为这可能是因为我正在运行它并且它是由 apache 创建的，但是所有用户都允许使用 rwx。如果需要，我可以包含更多信息，但我现在选择不包含，因为编写 PHP 的原始人将所有内容拆分为大量小文件，因此很难确定问题的确切位置。非常感谢任何想法（如果不是完整的解决方案）。

编辑：找到解决方案。事实证明，blastall 可执行文件是在不同的 linux 系统上编译的。切换到不同的可执行文件，它运行完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:23:23.317

可能是脚本中的相对路径有问题吗？在这里查看我的答案，也许它会有所帮助：

[在php中找到一个4个目录的文件](https://stackoverflow.com/questions/12999809/finding-a-file-in-php-that-is-4-directories-up/13000215#13000215)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:19:58.273

解决方案是重新编译blastall 可执行文件。它是为 Redhat 编译的，我使用的是 Ubuntu。不幸的是，我认为给我的可执行文件是针对我的系统的，而不是以前的。

# mysql - MySQL按特定时间段搜索？

> ID：13017273
> 
> 赞同：0
> 
> 时间：2012-10-22T18:16:10.383
> 
> 标签：mysql, sql

我必须从表中选择在过去两个小时内添加的行，或者我将在当前日期指定的任何小时数。

我正在做这样的查询，

```
SELECT * FROM abc WHERE timestamp < '2:00:00' LIMIT 1000; 
```

但它没有返回任何行？我可以在哪里找到此类查询的任何参考资料？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:17:00.227

```
SELECT * FROM abc 
WHERE timestamp between now() - interval 2 hour
                and now()
LIMIT 1000; 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/dbcf8/5)

# opencv - OpenCV 立体匹配

> ID：13017279
> 
> 赞同：5
> 
> 时间：2012-10-22T18:16:25.547
> 
> 标签：opencv, match, stereo-3d, disparity-mapping

我是 OpenCV 的新手。我正在使用 2 个网络摄像头进行立体声项目。我可以将网络摄像头捕获的视频显示为左右视频。我想做以下事情：当我单击左帧上的任何点时，我想在右侧图像上找到匹配点（使用块匹配或任何其他算法将点投影到第二个视图上）。所以我可以计算差异。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:50:52.087

OpenCV's [`StereoVar`](http://docs.opencv.org/modules/contrib/doc/stereo.html#StereoVar) object would probably be a good starting point.

You can create a `StereoVar` object like this:

```
StereoVar myStereoVar(int levels, double pyrScale,
                                int nIt, int minDisp, int maxDisp,
                                int poly_n, double poly_sigma, float fi,
                                float lambda, int penalization, int cycle,
                                int flags); 
```

then match pairs of images like this:

```
// disp will hold correspondences for each pixel in your pair of images.
myStereoVar(InputArray left, InputArray right, OutputArray disp); 
```

You might have to transform your `cv::Mat` into an `InputArray`, but this should be pretty simple.

As for clicking on the pixels to see the correspondence, I bet it's possible, but let's worry about this after getting correspondence computation up and running.

# android - 无法触发 onActivityResult() android？

> ID：13017281
> 
> 赞同：1
> 
> 时间：2012-10-22T18:16:40.213
> 
> 标签：android, android-activity

我有一个`DataActivity`必须要求用户填写表格然后将数据返回给`MainActivity`

`DataActivity`是`MainActivity`这样调用的：

```
Intent i = new Intent();
i.setClass(this, DataActivity.class);
startActivityForResult(i,RESULT_OK); 
```

`DataActivity`应该像这样返回数据意图`MainActivity`：

```
Intent i = new Intent();
i.putExtra("funcX", ((EditText)findViewById(R.id.data_eq_x)).getText().toString());
i.putExtra("funcY", ((EditText)findViewById(R.id.data_eq_y)).getText().toString());
i.putExtra("constants", (Serializable)constants);
setResult(RESULT_OK,i);
finish(); 
```

但`onActivityResult`在此之后再也没有被调用`MainActivity`......每当我尝试访问`funcX`或`funcY`时`MainActivity`，我都会得到 NullPointerexception。

注意：`constants`当我测试这段代码时，变量可以而且实际上是空的。

我正在模拟器上开发 Android 2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:19:45.657

阅读[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)上参数[requestCode的文档](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

> requestCode 如果 >= 0，则活动退出时会在 onActivityResult() 中返回此代码。

RESULT_OK 等于 -1..

将您的请求代码更改为某个正值以使其正常工作

```
Intent i = new Intent(this, DataActivity.class);
startActivityForResult(i,345); 
```

# c# - 为什么锁定同一个对象不会导致死锁？

> ID：13017282
> 
> 赞同：57
> 
> 时间：2012-10-22T18:16:44.953
> 
> 标签：c#, .net, locking, deadlock

> **可能重复：**
> [C# 中的重入锁](https://stackoverflow.com/questions/391913/re-entrant-locks-in-c-sharp)

如果我写一些这样的代码：

```
class Program {
    static void Main(string[] args) {
        Foo();
        Console.ReadLine();
    }

    static void Foo() {
        lock(_lock) {
            Console.WriteLine("Foo");
            Bar();
        }
    }

    static void Bar() {
        lock(_lock) {
            Console.WriteLine("Bar");
        }
    }

    private static readonly object _lock = new object();
} 
```

我得到输出：

```
Foo
Bar 
```

我预计这会死锁，因为 Foo 获得了锁，然后等待 Bar 获得锁。但这不会发生。

锁定机制是否只是因为代码在同一个线程上执行而允许这样做？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-22T18:18:35.493

对于同一个线程，锁始终是[可重入](http://en.wikipedia.org/wiki/Reentrant_mutex)的，因此线程可以根据需要随时锁定对象。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-22T18:18:26.100

因为你这里只有一个线程。

`lock`是捷径

```
bool lockWasTaken = false;
var temp = obj;
try { 
       Monitor.Enter(temp, ref lockWasTaken); 
       // your thread safe code
}
finally { if (lockWasTaken) Monitor.Exit(temp); } 
```

[Monitor.Enter](http://msdn.microsoft.com/en-us/library/de0542zz%28v=vs.71%29.aspx)获取作为参数传递的对象上的 Monitor。如果另一个线程已经对该对象执行了Enter，但还没有执行对应的Exit，则当前线程将阻塞，直到另一个线程释放该对象。**同一个线程在没有阻塞的情况下多次调用 Enter 是合法的**；但是，在等待对象的其他线程解除阻塞之前，必须调用相同数量的 Exit 调用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-22T18:37:50.277

一个词：可重入锁。如果一个线程已经获得了锁，那么如果它想再次获得锁，它就不会等待。这是非常需要的，否则它可能会将简单的递归函数变成一场噩梦。！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-22T18:19:24.640

该`lock`声明比这更聪明，它旨在防止这种情况发生。一旦线程进入锁，它就被线程“拥有”，所以只要它到达另一个`lock`锁在同一个对象上的语句，它就会意识到它已经可以访问那个锁。

# jquery - 运行 document.ready() 事件时，有时 ajax 请求无法正常工作

> ID：13017286
> 
> 赞同：0
> 
> 时间：2012-10-22T18:17:00.103
> 
> 标签：jquery, ajax, asp.net-mvc-3

```
var casualDays;
var days;

  $(document).ready(function(){

    $(function(){
        $('select, input').styledSelect();
    });

    $(function (){
    var usernameSelected = $("input#Employee_UserName" ).val().toString();
    var username;
    $.ajax({
        url: '@Url.Action("GetLeaveConsumedDays", "ApplyLeave")',
        type: 'POST',

        data: { username: usernameSelected },

        success: function (results) {
           days=results;
        }, 
        error: function () {
            alert("error");
        }
    });
    });
    $(function (){
    var usernameSelected = $("input#Employee_UserName" ).val().toString();
    var username;
    $.ajax({
        url:'@Url.Action("GetLeaveConsumedDaysCasual", "ApplyLeave")',
        type: 'POST',

        data: { username: usernameSelected },

        success: function (results) {
           casualDays=results;
        }, 
        error: function () {
            alert("error");
        }
    });
    }); 
```

ķ

这是我的 document.ready 事件，在正确运行页面两到三次后，它的工作正常。但几次后它不能正常工作。它没有为“days”和“casualdays”提供价值，有一些错误。刷新后两次或三次它的工作。我想不出这是什么原因。请任何人都可以帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:21:11.707

Ajax 是异步的，您必须等到请求完成后才能`days`访问`casualdays`.

```
var foo; 
alert(foo); // undefined 1

$.ajax({ 
    url: "foo.php", 
    success: function(data){
        foo = data // foo now equals data
        alert(foo); // NOT undefined! 3
    }
});

alert(foo); // still undefined 2 
```

# c# - Lightswitch，将过滤器添加到依赖于未保存更改的查询

> ID：13017288
> 
> 赞同：0
> 
> 时间：2012-10-22T18:17:02.470
> 
> 标签：c#, linq, visual-studio-lightswitch

我正在使用 Lightswitch，我试图通过将查询过滤到尚未选择的项目列表来填充下拉列表。

我编写的代码有效，但它仅使用已“保存”的数据。我想过滤掉已经添加但不一定保存的东西。

```
partial void NotAssignedToEventEmployee_PreprocessQuery(int? SelectedEventId, ref IQueryable<EmployeeItem> query)
{
    query = from a in query
            where a.AssignmentsAsEmployeeCollection.All(y => y.EventSetItem.Id != (int)SelectedEventId)
            select a;
} 
```

# c# - 验证视图状态错误

> ID：13017289
> 
> 赞同：0
> 
> 时间：2012-10-22T18:17:09.993
> 
> 标签：c#, asp.net

当我尝试`OnClick`在表单中调用 a 时出现此错误

**错误：** `Failed validation of viewstate MAC. If this application is hosted by a Web Farm or cluster, ensure that configuration specifies the same <machineKey> validationKey and validation algorithm. AutoGenerate can not be used in a cluster.`

**代码隐藏**

`<form runat="server" id="form1"> <asp:Button ID="btnImprimeBematech" runat="server" OnClick="btnImprimeBematech_OnClick" Text="Imprime Novo Bematech" /> </form>`

我不明白，因为在 StackOverflow 的其他线程中，一些解决方案是标签中的操作，但我的表单中`<Form>`没有任何解决方案。`action`

我试着把`EnableViewStateMac="false" EnableSessionState="False" EnableViewState="false"`我的`<%@ Page`但仍然是同样的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:02:01.537

webfarm 中的所有机器上的`machineKey`值必须相同。

链接：http: [//msdn2.microsoft.com/en-us/library/ms998288.aspx](http://msdn2.microsoft.com/en-us/library/ms998288.aspx)

您在所有页面上设置此属性，而不仅仅是一页

```
In web.config

<pages enableViewStateMac="false"> 
```

始终建议在 web.config 中指定用于加密和解密的自定义密钥。这是因为当您将 EnableViewStateMac 值设置为 false 时，您的应用程序将面临安全威胁。这是因为在这种情况下不会发生视图状态的验证。

```
<machineKey validationKey="<encryptionkey>" decryptionKey="<decryptionkey>" validation="SHA1" decryption="Auto"/> 
```

# java - 实现 AddProximityAlert

> ID：13017290
> 
> 赞同：0
> 
> 时间：2012-10-22T18:17:14.377
> 
> 标签：java, android, broadcastreceiver, alert, android-pendingintent

Android/Java 新手，我正在玩 AddProximityAlert()。我在下面有以下代码块，并且不断收到错误。有人可以解释 Eclipse 在说什么，以及如何解决我为 getBroadcast 和 registerReceiver 遇到的错误吗？

在 SecondaryActivity.java 文件中，我有 2 个广播接收器，这可能是原因吗？

SecondaryActivity.java：

```
public class SecondaryActivity extends BroadcastReceiver {   

public void onReceive(Context context, Intent intent) {

.
.
.

lm = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

double latitude = location.getLatitude();
double longitude = location.getLongitude();
float radius = 100f;
long expiration = -1;
final String PROX_ALERT_INTENT = "com.example.test";

Intent intent = new Intent(PROX_ALERT_INTENT);
PendingIntent proximityIntent = PendingIntent.**getBroadcast**(this, 0, intent, 0);

lm.addProximityAlert(latitude, longitude, radius, expiration, proximityIntent);

IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);

**registerReceiver**(new ProximityIntentReceiver(), filter);

.
.
.

private class ProximityIntentReceiver extends BroadcastReceiver { 
```

...

**getBroadcast** : PendingIntent 类型中的方法 getBroadcast(Context, int, Intent, int) 不适用于参数 (SecondaryActivity, int, Intent, int)

**registerReceiver**：方法 registerReceiver(SecondaryActivity.ProximityIntentReceiver, IntentFilter) 未定义为 SecondaryActivity 类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:48:06.017

因为您正在扩展广播接收器，所以您需要使用：

```
PendingIntent.getBroadcast(context, 0, intent, 0) 
```

和

```
context.registerReceiver() 
```

引用 Context 类。

命名广播接收`SecondaryActivity`器也有点令人困惑，因为`SecondaryActivity`它不是一个活动。

# xml - GZIP Deflate 与 CURL(PHP) Web 服务问题

> ID：13017292
> 
> 赞同：1
> 
> 时间：2012-10-22T18:17:20.770
> 
> 标签：xml, web-services, post, curl

我有问题。它使用带有 cURL 的 POST 方法处理 Web 服务。我正在尝试使用 GZIP、DEFLATE 压缩请求。如果您查看第三行，这就是它的完成方式。

```
 $x = curl_init("http://url");
  curl_setopt($x, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
  **curl_setopt($x, CURLOPT_ENCODING, 'Accept-Encoding: gzip,deflate');** 
  curl_setopt($x, CURLOPT_POST, 1);
  curl_setopt($x, CURLOPT_POSTFIELDS, $inputdata);
  curl_setopt($x, CURLOPT_FOLLOWLOCATION, 0);
  curl_setopt($x, CURLOPT_RETURNTRANSFER, 1);
  $data = curl_exec($x); 
```

我收到响应 HTTP/1.1 200 OK 日期：星期一，2012 年 10 月 22 日 16:19:23 GMT 服务器：Resin/1.11.14 内容类型：text/xml；charset=UTF-8 变化：接受编码内容编码：**gzip**内容长度：2088

但是，Web 服务提供商说它没有被压缩。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:18:08.333

[设置CURLOPT_ENCODING](http://lt1.php.net/manual/en/function.curl-setopt.php)时不需要输入完整的标头，只需将其设置为空字符串，curl 就会输入支持的编码。

```
curl_setopt($x, CURLOPT_ENCODING, '') 
```

# php - PHP MySQL使用where子句从另一个表插入数据并将唯一值插入相同的行

> ID：13017293
> 
> 赞同：0
> 
> 时间：2012-10-22T18:17:22.560
> 
> 标签：php, mysql

我想将一个表中的数据插入另一个表中，其中一个字段等于两个表中的另一个字段。到目前为止，这有效。问题是，我还需要将其他数据插入到第一个表中未包含的相同行中。

* * *

```
//enter rows into database 
foreach($_POST['sku'] as $row=>$sku)
{ 
//this is the data that needs to be added to the table 
$item_sku=$sku;
$image="/$item_sku.jpg";
$small_image="/$item_sku.jpg"; 
$thumbnail="/$item_sku.jpg";

//currently this is what is working to import data from one table to the other
$sql= "INSERT INTO magento_import (sku, description, price) 
       SELECT PR_SKU, PR_Description, PR_UnitPrice
       FROM products 
       WHERE PR_SKU = '$sku'";

//I need something here to add the above variables to the same row where PR_SKU = '$sku'

if (!mysql_query($sql))
{
die('Error: '.mysql_error()); 
}
echo "$row record added";
} 
```

magento_table 上缺失数据的列称为“image”、“small_image”和“thumbnail”。这是一个简单的技巧，可以将旧产品表中的数据放入新产品表中，导出为 CSV，然后在 Magento 中运行配置文件。我不需要担心 SQL 注入。这是我在本地机器上运行的东西。在将产品切换到新的电子商务系统时，我试图避免尽可能多的手动数据输入。谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:38:09.637

选择文字值应该符合您的意图：

```
$sql= "INSERT INTO magento_import (sku, description, price, image, small_image, thumbnail) 
       SELECT PR_SKU, PR_Description, PR_UnitPrice, \"$image\", \"$small_image\", \"$thumbnail\"
       FROM products 
       WHERE PR_SKU = '$sku'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:36:25.000

您可以使用另一个更新语句来执行此操作。我怀疑你是否可以用一个查询来做到这一点

```
foreach($_POST['sku'] as $row=>$sku)
{ 
//this is the data that needs to be added to the table 
$item_sku=$sku;
$image="/$item_sku.jpg";
$small_image="/$item_sku.jpg"; 
$thumbnail="/$item_sku.jpg";

//currently this is what is working to import data from one table to the other
$sql= "INSERT INTO magento_import (sku, description, price) 
SELECT PR_SKU, PR_Description, PR_UnitPrice
FROM products 
WHERE PR_SKU = '$sku'";

//I need something here to add the above variables to the same row where PR_SKU = '$sku'

if (!mysql_query($sql))
{
die('Error: '.mysql_error()); 
}else {

$sql = "UPDATE magento_import SET item='$item',image='$image',small_image='$small_image',thumbnail='$thumbnail' WHERE PR_SKU = '$sku'";
echo "$row record added";
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:40:05.577

您可以直接将变量添加到查询中。只要引用它们，它们就会作为简单值起作用。

```
$sql= "INSERT INTO magento_import (sku, description, price, x, y, z) 
   SELECT PR_SKU, PR_Description, PR_UnitPrice, '$x' AS x, '$y' AS y, '$z' AS z
   FROM products 
   WHERE PR_SKU = '$sku'"; 
```

# ios - 将 GPUImage 与 UIView 一起使用

> ID：13017296
> 
> 赞同：1
> 
> 时间：2012-10-22T18:17:28.153
> 
> 标签：ios, gpuimage

我正在尝试将 GPUImage 集成到我的应用程序中。具体来说，我想在我的主视图上应用球体折射滤镜。问题是，GPUImage 与 UIImage 一起使用，而不是与 UIView 一起使用。为了创建我的视图层次结构的 UIImage 表示，我使用 [CALayer renderInContext]，这需要很长时间才能完成。最终结果是我的动画看起来很笨拙。

这是在我的 CADisplayLink 处理程序中调用的代码：

```
- (void)onDisplayLink:(CADisplayLink*)theDisplayLink {
  self.mainView.layer.opaque = YES;

  UIGraphicsBeginImageContextWithOptions(self.sphereView.bounds.size, self.sphereView.opaque, [[UIScreen mainScreen] scale]);
  [self.sphereView.layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImage* mainViewImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  self.sourcePicture = [[GPUImagePicture alloc] initWithImage:mainViewImage smoothlyScaleOutput:NO];

  self.sphereRefractionFilter = [[GPUImageSphereRefractionFilter alloc] init];
  self.sphereRefractionFilter.radius = 0.5;
  self.sphereRefractionFilter.refractiveIndex = 0.25;
  [self.sphereRefractionFilter setInputRotation:kGPUImageRotate180 atIndex:0];
  [self.sphereRefractionFilter addTarget:self.mainView];

  [self.sourcePicture addTarget:self.sphereRefractionFilter];

  [self.sourcePicture processImage];
} 
```

我尝试使用此代码渲染的视图有一个背景图像，上面放置了大约 5-50 个较小的图像，它们的位置是实时修改的。想象一个球体，在不同的地方有多个移动标记。

使用此代码，我可以渲染大约 10 FPS。问题是：有什么方法可以更快地做到这一点？

任何人？

# java - 使用 Java 测试谁是文件的所有者

> ID：13017300
> 
> 赞同：1
> 
> 时间：2012-10-22T18:17:38.073
> 
> 标签：java

如何使用Java测试文件是否属于用户或操作系统？我对找出操作系统生成的用于执行删除或修改等操作的临时文件特别感兴趣。

tks。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:19:57.170

在 Java 7 中，您可以使用 Files.getOwner()

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#getOwner%28java.nio.file.Path,%20java.nio.file.LinkOption...% 29](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#getOwner%28java.nio.file.Path,%20java.nio.file.LinkOption...%29)

# objective-c - 如何重新排序 MKMapView 注释数组

> ID：13017305
> 
> 赞同：1
> 
> 时间：2012-10-22T18:17:53.787
> 
> 标签：objective-c, annotations, mkmapview, mapkit

我想重新排序地图上显示的注释数组，以便创建一个下一个/上一个按钮，以便使用简单的迭代器快速循环浏览所有注释（按日期排序）。

据我所知，用作存储的注释数组*[worldmap annotations]*是不可变的，因此我无法对其重新排序。我尝试了以下方法来创建注释数组的临时副本，按日期对其进行排序并重新附加它。

（世界地图是我的*MKMapView*对象）

```
//COPY
 NSMutableArray *annotationSort = [[NSMutableArray alloc]initWithArray:[worldmap annotations]];

//SORT
[annotationSort sortedArrayUsingComparator:^NSComparisonResult(EventPin* obj1, EventPin* obj2) {
     return [obj1.eventItemObject.eventDateBegin compare: obj2.eventItemObject.eventDateBegin];
 }];

//ADDED SORTED ARRAY
[worldmap removeAnnotations:[worldmap annotations]];
[worldmap addAnnotations:annotationSort]; 
```

这似乎不起作用。知道如何重新排序 MKMapKit 注释数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:45:54.703

正如[链接问题](https://stackoverflow.com/questions/9539802/mkmapview-annotations-changing-losing-order?lq=1)中的答案所述，不能保证地图视图的`annotations`属性将保留任何顺序。

此外，由于该属性`annotations`包含*if*`userLocation`您已`showsUserLocation`打开（但您自己并未明确要求`addAnnotation`），因此注释顺序将不是您所期望的。

不要依赖地图视图数组 中注释的*顺序。*`annotations`

相反，保留您自己的对注释的引用数组，并以您想要的任何方式对它们进行排序（如您的`annotationSort`数组）。
但是将它们从地图中删除并重新添加是没有意义的。

请记住，地图视图的`annotations`数组可能包含`MKUserLocation`注释，因此在构建数组时，请在包含每个注释或访问自定义属性之前检查每个注释的类型。

但是，请注意对数组进行排序的代码：

```
[annotationSort sortedArrayUsingComparator:... 
```

本身有缺陷，因为`sortedArrayUsingComparator` *返回*一个`NSArray`.
它不会就地对数组进行排序。

相反，要对 进行排序`NSMutableArray`，请调用其`sortUsingComparator`方法。

使用此排序数组，您的应用可以按所需顺序访问或选择注释。

# shopify - Shopify 何时会包含客户 webhook？

> ID：13017306
> 
> 赞同：1
> 
> 时间：2012-10-22T18:17:55.237
> 
> 标签：shopify, webhooks

有谁知道 Shopify 何时/是否会提供“客户/已创建”、“客户/更新”和“客户/删除”网络挂钩事件？

当商家通过他们的商店管理员更改他们的客户记录时，或者当有人在没有完成订单的情况下创建客户帐户时，能够让我们的应用程序通知我们会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:10:08.443

它们现在存在！[在http://api.shopify.com/webhook.html](http://api.shopify.com/webhook.html)查看它们

# javascript - 将文档元素分配给全局变量

> ID：13017309
> 
> 赞同：3
> 
> 时间：2012-10-22T18:18:07.387
> 
> 标签：javascript

我想将文档元素分配给全局变量，以便能够在代码中的任何地方使用这些元素。

**我的代码：**

```
// document elements
var drop = null;
var status = null;
var show = null;

function process (drop, status, show) {
    if (document.readyState == 'complete') {
        // init elements
        drop = document.getElementById(drop);
        status = document.getElementById(status);
        show = document.getElementById(show);
    }

    // init event handlers
    drop.addEventListener('drop', handleDrop, false);
}

function handleDrop (evt) {
    // do something
} 
```

问题是我无法使用函数 handleDrop 中的全局变量对文档元素做任何事情，而在函数过程中一切都按应有的方式工作......

编辑：例如，我可以在函数过程中读取元素显示 (show.innerHTML) 的内容，但不能在函数 handleDrop 中读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:23:40.330

问题是函数中的所有这些`drop`, `status`... 变量`process`都是本地变量——它们引用它的参数，而不是前面定义的变量。

如果这些是在最外层定义的（即，不在任何函数体中），您可以像这样访问（和更改）它们：

```
window.drop = document.getElementById(drop);
window.status = document.getElementById(status);
window.show = document.getElementById(show); 
```

但我实际上建议另一种方式：对参数和“封闭”变量使用*单独的名称。*像这样：

```
function process(dropId, statusId, showId) {
    if (document.readyState == 'complete') {
        // init elements
        drop = document.getElementById(dropId);
        status = document.getElementById(statusId);
        show = document.getElementById(showId);
    }
} 
```

这两种方式都允许您在`handleDrop`函数中处理这些变量；后者显然更胜一筹，因为您不受选择范围的限制。

# ruby-on-rails - JQuery：$.ajax 调用似乎阻止了图像下载

> ID：13017312
> 
> 赞同：0
> 
> 时间：2012-10-22T18:18:16.230
> 
> 标签：ruby-on-rails, ajax, jquery

我有一系列 AJAX 调用，这些调用在 DOM 加载后被触发到 Web 服务器以加载更多信息（我将调用包装在 $.ready 函数中）。但是，它似乎仍然处于阻塞状态。我没有在我的代码中设置异步选项。我在这里做错了吗？以下是我的代码：

```
 $(document).ready(function() {
    var places = #{@results.to_json};

    Places.SERP.initialize(places);
  }); 
```

在我的 Serp.js 中， Places.SERP.initialize(places) 被定义：

```
 initialize = function(places) {
    initMap(places);
    initDeals(places);
    initFriends(places);
  }; 
```

在 3 个 init* 调用中，我有许多 $.ajax 调用来从服务器获取更多信息。代码看起来像这样：

```
$.ajax({
  type: "GET",
  timeout: 1000,
  url: url,
  dataType: "json",
  success: function(retval) {
    if (retval) {
      var data = retval.data;
      if (data) {
        var stats = data.stats,
            friends = data.friends;

        if (stats) {
          $("#places-" + internalId).find(".checkins-wrapper").
            hide().
            append(template({
              checkinCount: stats.checkinsCount
            })).
            fadeIn();
        }
      }
    }
  },
  error: function(jqXHR, status, errorThrown) {
  }
}); 
```

# mysql - mysql - 创建一个“建议关注的艺术家”查询

> ID：13017313
> 
> 赞同：2
> 
> 时间：2012-10-22T18:18:24.610
> 
> 标签：mysql

我需要创建一个查询，根据用户喜欢的内容以及喜欢的其他人喜欢的内容向用户推荐艺术家。希望你能明白。

无论如何，有问题的表格是成员（自我解释）和艺术家关注（哪些成员跟随谁）。我稍后会将此查询添加到更大的查询中，该查询还将从该 ID 的艺术家表中获取艺术家信息。

到目前为止，这是我所拥有的，我已将其用作`2`成员的模拟 ID。

```
SELECT 

M.ID AS M_ID,

F.ID AS F_ID,
F.follows_ID

FROM members M

LEFT JOIN artist_follows F 
ON F.ID = M.ID

WHERE M.ID ='2' 
```

我意识到它根本不是很多，但它是我所能得到的，因此我为什么来到这里。

以下是需要做的事情的细分：

**1：**从成员表中获取 ID。

**2：** 通过成员ID从artist_follows中获取follows_ID（用户关注的人）

**3：**获取会员关注的人的ID。（为了下一点的目的，将此称为“其他成员 IDS”）。

**4：**从“其他会员IDS”获取其他艺人ID，确保会员已经关注的艺人不被选中。

希望像那样分解它有帮助！

**更新！** 让我们按照建议的方式获取一些模拟数据。假设该成员`2`使用 IDS 关注艺术家`3`。另一个成员 ( `4`)`3`也随之而来`20`。因此查询的结果应该是`20`

**架构：**

艺术家_关注;

```
CREATE TABLE `artist_follows` (
 `ID` int(11) NOT NULL,
 `follows_ID` int(11) NOT NULL,
  KEY `fav_ID` (`ID`),
  CONSTRAINT `fav_ID` FOREIGN KEY (`ID`) REFERENCES `artists` (`ID`),
  CONSTRAINT `ID` FOREIGN KEY (`ID`) REFERENCES `members` (`ID`)
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci 
```

会员；

```
CREATE TABLE `members` (
 `ID` int(111) NOT NULL AUTO_INCREMENT,
 `email` varchar(100) COLLATE latin1_general_ci NOT NULL,
 `password` varchar(100) COLLATE latin1_general_ci NOT NULL,
 `FNAME` varchar(100) COLLATE latin1_general_ci NOT NULL,
 `SURNAME` varchar(100) COLLATE latin1_general_ci NOT NULL,
 `timestamp` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
 PRIMARY KEY (`ID`),
 UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:23:24.820

```
SELECT DISTINCT new.follows_ID
FROM artist_follows fan
INNER JOIN artist_follows other ON other.follows_ID = fan.follows_ID
INNER JOIN artist_follows new ON new.ID = other.ID
WHERE new.follows_ID NOT IN
    (SELECT follows_ID FROM artist_follows WHERE ID = fan.ID )
AND fan.ID = 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:05:48.230

[SQL小提琴](http://sqlfiddle.com/#!2/9f523/1)

```
create table `members` (
    `id` int(111) not null auto_increment,
    primary key (`id`)
);
create table `artist_follows` (
    `id` int(11) not null,
    `follows_id` int(11) not null,
     constraint `id` foreign key (`id`) references `members` (`id`)
);
insert into members (id) values (2), (4);
insert into artist_follows (id, follows_id) values
(2, 3),
(4, 3),
(4, 20); 
```

* * *

```
select distinct f3.follows_id follows
from
    members m
    inner join
    artist_follows f1 on f1.id = m.id
    inner join
    artist_follows f2 on f1.follows_id = f2.follows_id
    inner join
    artist_follows f3 on f2.id = f3.id 
where
    m.id = '2'
    and
    f3.follows_id not in (
        select follows_id
        from artist_follows
        where id = f1.id
    ) 
```

# coldfusion - 使用脚本循环更新查询

> ID：13017316
> 
> 赞同：2
> 
> 时间：2012-10-22T18:18:26.560
> 
> 标签：coldfusion, railo, cfml

试图弄清楚如何使用脚本执行此循环。

```
<cfquery>
<cfloop from="1" to="#arrayLen(myData)#" index="i">
<!--- update query with different paramaters --->
</cfloop>
</cfquery> 
```

我可以像这样在循环之外执行它，但是速度很慢：

```
for(i=1; i LTE arrayLen(myData); i++)
{
    q = new Query();
    q.setSql(" UPDATE SQL HERE ");
    q.addParam(name="id", value=i);
    q.Execute().GetResult();
} 
```

我想在 SQL 中做，而不是在它之外。

更新：这是代码。我试图删除其中的一些以使其更简单。

我有一个用户输入数据的表单，然后称为：

```
for(i=1; i LTE listlen(arguments.myStruct.myfield1); i++)   {           
    myfield1 = listgetAt(arguments.myStruct.myfield1,i);

    for(j=1; j LTE arguments.myStruct.count; j++) {
        maxvalue = form["max" & j];
        myType = form["myType" & j];
        id = myfield1;

        local.queryService = new Query();
        local.queryService.setSql
        ("          
            UPDATE  mytypes
            SET     maxvalue = :maxvalue,
                    myType = :myType
            WHERE   mytypeID = :id
        ");
        local.queryService.addParam(name="id", value=id);
        local.queryService.addParam(name="maxvalue", value=maxvalue, cfsqltype="cf_sql_integer");
        local.queryService.addParam(name="myType", value=myType, cfsqltype="cf_sql_integer");
        local.queryService.Execute().GetResult();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:13:04.647

重新阅读[Adam 的回复](https://stackoverflow.com/a/13018205/104223)后，我同意我们需要查看原始更新查询。我不是 100% 确定你的目标是什么，但这是我的“猜测”。如果要更新具有不同值的多条记录，例如：

```
 UPDATE Table Col = 'xxx' WHERE ID = 1 ;
   UPDATE Table Col = 'yyy' WHERE ID = 2 ;
   ... 
```

..您可以构建字符串并在循环中添加参数。请参阅下面对亚当示例的改编。请注意，您需要在数据源中启用“允许多个查询”设置才能使其正常工作。此外，请务必将`execute()`调用包装在事务中以保持数据完整性。

**编辑**根据您的更新修改了前面的示例：

```
<cfscript>
    // initialize these before any looping
    q = new Query();
    q.setDatasource("yourDSNHere");

    sqlArray = [];

    for(i=1; i LTE listlen(arguments.myStruct.myfield1); i++)   {           
        id = listgetAt(arguments.myStruct.myfield1,i);

        for(j=1; j LTE arguments.myStruct.count; j++) {
           // extract input values
           maxValue = form["max" & j];
           myType = form["myType" & j];

           // append a new statement
           arrayAppend(sqlArray, "UPDATE  mytypes 
                                  SET     maxvalue  = ?
                                        , myType = ? 
                                  WHERE myTypeID= ? "
                         );

           // add in the parameter values
           q.addParam(value="#maxValue#", cfSqlType="cf_sql_integer");
           q.addParam(value="#myType#", cfSqlType="cf_sql_integer");
           q.addParam(value="#id#", cfSqlType="cf_sql_integer");
    }

    // finally convert to single SQL string and run it
    q.setSQL( arrayToList(sqlArray, ";") );
    q.execute();
</cfscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:16:20.000

很难说出你实际上在问什么，但这可能就是答案？

```
<cfscript>
// dunno what your data is, but you need a col and a value so let's pretend you have those
myData = [
    {col="col1", value="one"},
    {col="col2", value="two"},
    {col="col3", value="three"}
];      

q = new Query(datasource="scratch_mysql");

sql = "UPDATE tbl_test2 SET ";
for (i=1; i <= arrayLen(myData); i++){
    q.addParam(value=myData[i].value);  // you might want a type here as well?
    sql &= " #myData[i].col# = ?";
    if (i < arrayLen(myData)){  
        sql &= ",";
    }
}
sql &= " WHERE id=1";

q.setSql(sql);
q.execute();
</cfscript> 
```

在你把你的问题说得更清楚之前，我会投票给你。这是需要澄清的第一`<cfquery>`点：你现在在做什么。如果我们知道这一点，我们就会知道如何告诉您如何在脚本中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:36:33.663

我不太清楚你需要在循环中使用什么样的信息，但一种方法是构建你的更新语句，然后在你的 cfquery 中输出它。这是在 cfscript 中执行此操作的另一种方法：

```
<cfscript>
myData = ArrayNew(2);

myData[1][1] = "test";

myData[1][2] = "1";

for (row = 1; row LTE ArrayLen(myData); row++) {

    queryService = new query(); 

    queryService.setSQL('UPDATE mytable SET myfield = "#myData[row][1]#" where table_id=#myData[row][2]#');

    result = queryService.execute();
}
</cfscript> 
```

# uml - 测试应用的第一个用例图

> ID：13017321
> 
> 赞同：0
> 
> 时间：2012-10-22T18:18:43.643
> 
> 标签：uml, use-case

![在此处输入图像描述](../Images/79901f2cb9d7ee7a3e1de6b2ec66254f.png)你好，

我正在为电动机开发一个测试应用程序，最终将使用 LabVIEW 编写，并且我正在使用 SysML 建模来定义系统。附上的用例图是我的顶级。

启动测试场景任务取决于初始化系统是否成功完成，这应该连接到 Actor 是否正确。

任何人都可以建议这是否是一个好方法（我希望由此开发我的 LV 前面板控件）。

如果有人可以提出改进建议，将不胜感激。

谢谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:41:59.307

演员应该连接到他所做的操作，在这种情况下，启动测试场景。由于您`<<include>>`从中初始化系统，因此它使其依赖。所以你应该改变你的演员的连接来开始案例场景

# workflow - Workflow 是处理这么简单的事情的正确选择吗？

> ID：13017325
> 
> 赞同：1
> 
> 时间：2012-10-22T18:18:48.153
> 
> 标签：workflow, workflow-foundation

我有一个问题报告系统需要

1.  向已配置的组发送电子邮件
2.  调用网络服务并将问题报告传递给另一个团队

不涉及人机交互或等待。

对我来说，将工作流用于这么简单的事情似乎有点过头了。

我的架构师认为 Workflow 是这里的最佳选择。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:55:00.510

警告：我对 WF 的体验基于 .NET 3.5 中的产品

我在这里同意你的观点，在这种情况下，WF 似乎有点矫枉过正。我什至可以说您强调的场景并不真正保证任何 BPM / 工作流工具，因为它非常简单。

我能想到的架构师可能要求您使用它的唯一原因是

*   他知道一些你不知道的关于未来要求的事情
*   整个应用程序的一致性

但是，如果场景正如您所描述的那样，大多数 BPM 工具，尤其是 WF 将比任何使用都产生更大的开销，因为 WF 尤其是使用起来非常耗费资源（*我听说新版本比 3.5 中的版本有了很大改进虽然*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:41:26.780

工作流最适合长时间运行的流程——它提供持久性和持久性，以便可以在很长一段时间内恢复业务流程。

您的过程听起来像是可以在脚本或 C# 中作为单一方法实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:12:08.113

因为做简单的事情太繁重而避免工作流基础的日子已经一去不复返了。与 3.5 和之前的版本相比，Workflow Foundation 4.0 和现在的 4.5 都非常轻量级。像您所描述的那样创建简单的工作流程很容易创建和执行，并且您可以在任何地方执行。

调用 Web 服务是一种开箱即用的活动，而发送电子邮件是您可以从示例中获得的活动。将它们都扔到使用 FlowChart 活动的自定义工作流活动中，并在某个方法中使用 WorkflowInvoker 类来触发并忘记它。不仅您的工作完成了，而且您还有一些以工作流程图形式显示的文档来显示正在发生的事情。

[WorkflowInvoker 类](http://msdn.microsoft.com/en-us/library/system.activities.workflowinvoker.aspx)

[The Workflow Way](http://msdn.microsoft.com/en-us/library/dd851337.aspx) - David Chappell 的文章，帮助描述 WF 4.0+ 的优势

# azure - Azure Blob - 调用 UploadFile() 时出现 ArgumentNullException

> ID：13017326
> 
> 赞同：3
> 
> 时间：2012-10-22T18:18:48.237
> 
> 标签：azure, azure-storage, azure-blob-storage

尝试使用以下代码上传文件时出现以下异常：

```
 string encodedUrl = "videos/Sample.mp4"
            CloudBlockBlob encodedVideoBlob = blobClient.GetBlockBlobReference(encodedUrl);
            Log(string.Format("Got blob reference for {0}", encodedUrl), EventLogEntryType.Information);
            encodedVideoBlob.Properties.ContentType = contentType;
            encodedVideoBlob.Metadata[BlobProperty.Description] = description;
            encodedVideoBlob.UploadFile(localEncodedBlobPath); 
```

我看到“得到 blob 引用”消息，所以我认为引用正确解析。

```
Void Run() C:\Inter\Projects\PoC\WorkerRole\WorkerRole.cs (40)
System.ArgumentNullException: Value cannot be null.
Parameter name: value
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
   at Microsoft.WindowsAzure.StorageClient.CloudBlob.UploadFromStream(Stream source, BlobRequestOptions options)
   at Microsoft.WindowsAzure.StorageClient.CloudBlob.UploadFile(String fileName, BlobRequestOptions options)
   at EncoderWorkerRole.WorkerRole.ProcessJobOutput(IJob job, String videoBlobToEncodeUrl) in C:\Inter\Projects\PoC\WorkerRole\WorkerRole.cs:line 144
   at EncoderWorkerRole.WorkerRole.Run() in C:\Inter\Projects\PoC\WorkerRole\WorkerRole.cs:line 40 
```

有趣的是，我正在从本地服务器（即在 Azure 之外）运行相同的代码段，并且它可以正常工作。

欢迎提出想法，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T22:56:44.770

找到罪魁祸首！

基本上，问题出在这一行

编码的VideoBlob.Metadata[BlobProperty.Description] = 描述；

有一个检查可以确保没有设置空元数据或空元数据。通过从 Reflector 反汇编并搜索 ArgumentNullException 出现找到它。

在堆栈中捕获并重新抛出更有意义的异常可能会很棒:-)

以下是有趣的方法：

```
internal static void AddMetadata(HttpWebRequest request, NameValueCollection metadata)
{
    if (metadata != null)
    {
        foreach (string str in metadata.AllKeys)
        {
            AddMetadata(request, str, metadata[str]);
        }
    }
}

internal static void AddMetadata(HttpWebRequest request, string name, string value)
{
    CommonUtils.AssertNotNullOrEmpty("value", value);
    request.Headers.Add("x-ms-meta-" + name, value);
}

internal static void AssertNotNullOrEmpty(string paramName, string value)
{
    AssertNotNull(paramName, value);
    if (string.IsNullOrEmpty(value))
    {
        throw new ArgumentException(Microsoft.WindowsAzure.SR.ArgumentEmptyError, paramName);
    }
}

internal static void AssertNotNull(string paramName, object value)
{
    if (value == null)
    {
        throw new ArgumentNullException(paramName);
    }
} 
```

# javascript - 堆叠的画布元素，最顶层的画布可防止事件到达其他元素

> ID：13017327
> 
> 赞同：4
> 
> 时间：2012-10-22T18:18:48.900
> 
> 标签：javascript, html, canvas, html5-canvas, dom-events

我得到了三个 HTML5 画布元素。一个是透明的，完全覆盖了另外两个，不重叠（我在上面画的必须叠加，所以它的z-index必须是最高的）。

问题是最上面的一个 ( `overlay_area`) 阻止了其他两个接收事件。我不需要最顶层的事件来接收事件，所以

*   有没有办法阻止最顶层的画布接收事件？
*   如果没有，有没有办法将事件传递到底部画布？

对于这个项目，我需要使用hammer.js 而**没有**jquery。

```
<canvas id="overlay_area"
        style="z-index: 8; position:absolute; left:0px; top:35px;"
        height="762px" width="968px">
        This text is displayed if your browser does not support HTML5 Canvas.
        </canvas>

    <canvas id="wave_area"
        style="z-index: 5;
        position:absolute;
        left:0px;
        top:35px;"
        height="762px" width="200px">
        This text is displayed if your browser does not support HTML5 Canvas.
        </canvas>

    <canvas id="edit_area"
        style="z-index: 5;
        position:absolute;
        left:200px;
        top:35px;"
        height="762px" width="768px">
        This text is displayed if your browser does not support HTML5 Canvas.
    </canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:05:14.980

像弗雷德里克在他的回答中指出的那样，有几种方法可以实现这一目标。忽略元素上的鼠标事件的另一种方法是分配以下样式。

```
pointer-events:none; 
```

它~~得到很好~~的支持，效果很好。

**[现场演示](http://jsfiddle.net/loktar/D3jYZ/)**

所以在你的情况下

```
<canvas id="overlay_area"
    style="z-index: 8; position:absolute; left:0px; top:35px; pointer-events:none;"
    height="762px" width="968px">
    This text is displayed if your browser does not support HTML5 Canvas.
    </canvas> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:37:38.370

您可以将这三个`<canvas>`元素包装成一个父元素，然后让事件冒泡到父元素并在那里处理它们。

使用对象的[pageX](https://developer.mozilla.org/en-US/docs/DOM/event.pageX)和[pageY](https://developer.mozilla.org/en-US/docs/DOM/event.pageY)属性，以及元素`event`的[offsetLeft](https://developer.mozilla.org/en-US/docs/DOM/element.offsetLeft)、[offsetTop](https://developer.mozilla.org/en/DOM/element.offsetTop)、[offsetWidth](https://developer.mozilla.org/en/DOM/element.offsetWidth)和[offsetHeight](https://developer.mozilla.org/en/DOM/element.offsetHeight)属性`<canvas>`，将允许您转换鼠标事件的坐标，并确定它们在到达时触发的位置底部元素。

# eclipse - Eclipse IDE - 多行注释，Apex 代码取消注释

> ID：13017328
> 
> 赞同：1
> 
> 时间：2012-10-22T18:18:55.180
> 
> 标签：eclipse, comments, line, apex-code

我在 Salesforce.com 平台的 Eclipse IDE 上使用 Apex 代码。

有没有办法使用两个正斜杠轻松注释（或取消注释）多行代码？

我可以说，Ctrl + Shift + / 的 Java 快捷方式在 Apex 中不起作用。我希望找到一种类似于 Xcode 中的方法，您可以在其中突出显示多行，然后是 Command + /。

我在 Stackoverflow 上没有找到任何处理 Apex 评论的线程，但如果有人能够找到它，我很乐意接受鞭打，因为它不够彻底。

我特别不想使用多行注释的 /* */ 方法，因为该方法存在逻辑缺陷。我现在也不想解释那个特定的逻辑缺陷。

非常感谢，Ted S.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T10:57:08.300

我认为可以接受的注释多行（使用//）的解决方法是使用 Alt + Shift + A（Windows，不确定 Mac 热键是什么）打开多行编辑，然后键入注释。无法配置热键非常烦人，希望这对一些人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T03:12:16.920

有单行和多行两种类型的注释。

**单线**

*评论* `Ctrl`+`/`

*取消评论* `Ctrl`+`/`

**多行**

*评论* `Ctrl`+ `Shift`+`/`

*取消注释* `Ctrl`++ （注意反斜杠`Shift`）`\`

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T01:01:24.250

我也没有找到任何可以执行此操作的快捷方式，但我突然想到，如果您可以获得宏或脚本插件，您可以创建自己的热键。以下线程对潜在的宏插件有一些建议。

[是否有 Eclipse 的宏记录器？](https://stackoverflow.com/questions/103202/is-there-a-macro-recorder-for-eclipse)

# http - 创建缓存，如何检查元素是否存在？

> ID：13017331
> 
> 赞同：0
> 
> 时间：2012-10-22T18:19:21.550
> 
> 标签：http, caching

我正在使用 java 创建一个非持久性缓存系统，以存储 HTTP 响应，我想我可以使用地图来存储缓存的内容。

我不清楚的是如何检查请求的元素是否存在。我认为开始考虑请求资源的地址可能是一个想法，但我认为这还不够，因为除了请求的资源之外，HTTP 请求可能还有 cookie，每个请求可能不同......

我试图找到一本解释如何管理缓存的手册，但我什么也没找到。

你能帮我找到解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:40:15.260

好的，让我们记下我们在讨论期间汇总的所有记录：

生成请求指纹并以此识别进一步的请求。必须根据请求期间存在的所有信息计算指纹。通常，您将使用这种指纹的散列作为地图内的键。由于对相同请求的响应应该相同，因此缓存的响应应该是对第二个相同请求的正确响应，其中身份由生成的相同密钥匹配。

对于缓存数据的存储，请考虑两种设置：

*   缓存保存在数据库中。这保证了良好的性能，并允许在 finderprint 和内容旁边存储附加信息：expidation 时间、附加标头...

*   基于文件系统：每个响应都存储在一个文件中，文件以指纹命名。问题是如何存储附加信息，如果需要的话。

# ios - iOS 中的触摸事件传播

> ID：13017335
> 
> 赞同：2
> 
> 时间：2012-10-22T18:19:34.593
> 
> 标签：ios, cocoa-touch, events, uiview, propagation

我正在寻找原生 ios 开发中非常基本的问题的解决方案。

我有这样的设置 UIViewController (Full Screen) ----> UIView-Parent (Full Screen) ----> UIView-Child (Full Screen)

UIView-Child 已订阅事件 UITapGestureRecognizer 并且 UIView-Parent 已订阅事件 touchesBegan:withEvent

当在屏幕上的任意位置点击时，一个事件会发送到 UIView-Child 和 UIView-Parent，因为它们都会监听不同的事件。

但我需要的是所有事件都在 UIView-Child 本身中停止并且不会传播到 UIView-Parent。

一种方法是使用空函数在 UIView-Child 上实现所有事件侦听器，但我确信应该有更好的方法来实现。有人可以帮助我吗？

我的问题还有第二部分如果 UIView-Parent 也开始识别 UITapGestureRecognizer 事件，那么 UIView-Child 已经实现了它，它不会传播到 UIView-Parent。如果需要，有没有办法可以使这种传播从 UIView-Child 发生到 UIView-Parent。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:37:39.033

为了避免接触到 parent ，当您向孩子展示时，您可以这样做：

```
[parentView setUserInteractionEnabled:FALSE]; 
```

完成后将其反转。我认为这是最简单的方法。

此外，在使用手势识别器时，防止/允许触摸传输的一个好方法是为该手势设置正确的值。像这样：

```
[gestureRecognizer setDelaysTouchesBegan:TRUE];
[gestureRecognizer setDelaysTouchesEnded:TRUE];
[gestureRecognizer setCancelsTouchesInView:TRUE]; 
```

当然，这些值可能会根据您想要实现的目标而有所不同。

希望这可以帮助。

干杯!

# db2 - DB2 查询 - 选择特定的重复记录

> ID：13017338
> 
> 赞同：4
> 
> 时间：2012-10-22T18:19:37.137
> 
> 标签：db2

我对处理 DB2 很陌生——在 IBM AS400 上。

我运行了以下查询：

```
SELECT *                                                         
FROM mytable
WHERE ID = 1963003909 
```

这是查询的结果：

```
 ID    WK END DT  VRSN    AMT  
 -----------  ----------  ------  ------------  
  1963003909  2012-03-24       1          0.00  
  1963003909  2012-03-31       1          0.00  
  1963003909  2012-04-07       1          0.00  
  1963003909  2012-04-14       1          0.00  
  1963003909  2012-04-21       1          0.00  
  1963003909  2012-04-28       1          0.00  
  1963003909  2012-05-05       1          0.00  
  1963003909  2012-05-12       1          0.00  
  1963003909  2012-05-19       1          0.00  
  1963003909  2012-05-26       1          0.00  
  1963003909  2012-06-02       1          0.00  
  1963003909  2012-06-09       1          0.00  
  1963003909  2012-06-16       1          0.00  
  1963003909  2012-06-23       1          0.00  
  1963003909  2012-06-30       1          0.00  
  1963003909  2012-07-07       1          0.00  
  1963003909  2012-07-14       1          0.00  
  1963003909  2012-07-21       1          0.00  
  1963003909  2012-07-28       1          0.00  
  1963003909  2012-07-28       2        320.00 
```

我希望能够修改查询以仅选择 VRSN 列中具有最大值的记录，以便能够将信息放入报告中。

我试图从该站点阅读其他示例，但找不到任何未显示如何从表中删除重复记录的内容。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:42:45.933

现在我面前没有 DB2，但是您应该能够`vrsn`使用[OLAP 函数](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0023461.html)（ANSI SQL 将它们称为*窗口函数*）来订购，例如`ROW_NUMBER()`. 然后根据您的订购选择。从这样的事情开始：

```
with data(<column_list>, Ranking) as (
select *, ROW_NUMBER() OVER(PARTITION BY id ORDER BY vrsn desc) as Ranking
from mytable
)
select * from data where Ranking = 1 
```

基本上，DB2 会将数字 1 分配给`vrsn`every `id`、 on 和 on 最高的行，并且不同的 OLAP 函数将以`vrsn`不同的方式打破平局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:24:04.017

看看这是否适合你：

```
SELECT *
FROM mylibrary.mytable
WHERE ID = 1963003909 AND VRSN = (SELECT MAX(VRSN) FROM mylibrary.mytable) 
```

您没有在示例中显示库名称，但我有。

# accordion - 我想在 dojo 中单击手风琴的内容窗格时触发一个事件

> ID：13017341
> 
> 赞同：1
> 
> 时间：2012-10-22T18:19:45.107
> 
> 标签：accordion, dojo

## 这是我的代码。我尝试使用 script=dojo/connect 但它不起作用。我的道场版本是 1.6。

```
<div dojoType="dijit.layout.AccordionContainer" style="height: 500px;">
<div dojoType="dijit.layout.ContentPane" title="Total Enrollment" id="TotalEnrollDiv"  selected="false" name="abc" dojoAttachEvent="ondijitclick:_onButtonClick">
<ul>
  <li><a href="#"  id="TEState" onclick="attention(id);"> Michigan </a> </li>
  <li><a href="#"  id="TESE" onclick="attention(id);"> SouthEast MI </a> </li>
  <li><a href="#"  id="TEStateChange" onclick="attention(id);"> MI Change</a></li>
  <li><a href="#"  id="TESEChange" onclick="attention(id);">SE MI Change</a></li>                                     
 </ul> 
```

## 这是我使用脚本标签的地方

```
 <script type="dojo/connect"> 
    var myDiv= dijit.byId("TotalEnrollDiv");
    this.connect(this,"onclick",function(evt){
    alert("myDivVal");
    });

 </script>
 </div>

  <div dojoType="dijit.layout.ContentPane" title="UnderGrad. Enrollment" selected="true" id="UGEnroll">
  <ul>
    <li><a href="#"  id="UGState" onclick="attention(id);">Michigan </a> </li>
    <li><a href="#"  id="UGSE" onclick="attention(id);"> SouthEast MI  </a> </li>
    <li><a href="#"  id="UGStateChange" onclick="attention(id);"> MI Change </a></li>
     <li><a href="#"  id="UGSEChange" onclick="attention(id);">SE MI Change </a></li>
   </ul>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:13:04.753

我不确定，但我想这可能有效：

```
 <script type="text/javascript">
       dojo.connect(dijit.byId('UGEnroll'), 'onClick', function(arg) {
          alert("myDivVal");
       });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:30:40.427

尝试将 dojo/connect 元素放在 ContentPane 中，并添加一个事件属性。单击 ContentPane 时，将执行该脚本元素内的所有内容。

```
<div dojoType="dijit.layout.ContentPane" title="UnderGrad. Enrollment" selected="true" id="UGEnroll">

    <script type="dojo/connect" event="onClick">
        alert("abc");                     
    </script>

    <ul>
        <li><a href="#"  id="UGState" onclick="attention(id);">Michigan </a> </li>
        <li><a href="#"  id="UGSE" onclick="attention(id);"> SouthEast MI  </a> </li>
        <li><a href="#"  id="UGStateChange" onclick="attention(id);"> MI Change </a></li>
        <li><a href="#"  id="UGSEChange" onclick="attention(id);">SE MI Change </a></li> 
    </ul>
 </div> 
```

# sharepoint - 将Screwturn Wiki 内容迁移到Sharepoint wiki

> ID：13017342
> 
> 赞同：2
> 
> 时间：2012-10-22T18:19:45.513
> 
> 标签：sharepoint, wiki, screwturn

有谁知道将我所有的组将 wiki 内容（页面）迁移到 Sharepoint 的 wiki 的最佳方法？

我可以使用 Sharepoint 客户端 API 在 sharepoint 中创建一个 wiki 页面，因此我可以在一个螺丝转页中阅读并将其保存为 Sharepoint 页面。这行得通，但是我必须进行格式化，这似乎对***来说是一个真正的痛苦。谁能给点建议？

# java - org.apache.jasper.JasperException：未指定默认命名空间时，函数测试必须使用前缀

> ID：13017348
> 
> 赞同：13
> 
> 时间：2012-10-22T18:20:11.597
> 
> 标签：java, spring, jsp, parameter-passing

我在我的项目中使用以下内容：Spring 3.0.1 + Apache Tiles 2.2.1 + Glassfish 2.1。我要做的是在jsp页面中调用一些方法并将一些参数传递给它。例如，我有一个 bean：

```
@Component
@Scope(value = "singleton")
public class TestBean {
    public void test(String param){
        System.out.println("param = " + param);
    }
} 
```

我有一个jsp页面：

```
<%@page contentType="text/html; charset=utf-8"%>
${testBean.test("hello")} 
```

这段代码给了我一个例外，例如：

> org.apache.jasper.JasperException：未指定默认命名空间时，函数测试必须使用前缀

如果我在不向其传递参数的情况下调用某个方法 - 一切正常。

我试图将 jboss-el.jar 放在我的 WEB-INF/lib 中，并将所需的参数放在 web.xml 中（如此[处](https://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328)所述），但没有任何效果。

我仅限于上面列出的一组技术，所以我不能添加任何东西，或者，例如，不能更改我的应用服务器的版本。

在所有这些条件下，我的问题有解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T21:24:04.360

> *org.apache.jasper.JasperException：未指定默认命名空间时，函数测试必须使用前缀*

这表明环境不支持使用参数调用 bean 方法的新 EL 2.2 特性。过时的环境试图将表达式解释为具有符号的 EL 函数`namespace:functionName()`（如 JSTL 函数）。例外只是抱怨`namespace:`找不到零件以识别 EL 功能。但它毕竟是错误的。

您需要确保满足以下条件才能在 EL 中调用带参数的 bean 方法：

1.  目标容器必须支持 EL 2.2。所有 Servlet 3.0 兼容的容器都可以，因为 EL 2.2 是 Java EE 6 的一部分，Java EE 6 反过来也涵盖了 Servlet 3.0。Servlet 3.0 容器的示例有 Tomcat 7.x、Glassfish 3.x 和 JBoss AS 6.x/7.x。

2.  该`/WEB-INF/web.xml`文件被声明为符合 Servlet 3.0 规范（因此不旧，例如 2.5）。

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <web-app 
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
        version="3.0">

        <!-- Config here. -->

    </web-app> 
    ```

    否则，您的容器将以与`web.xml`根声明中匹配的版本匹配的回退方式运行，从而失去所有新的 Servlet 3.0 和 EL 2.2 的魅力。

3.  webapp`/WEB-INF/lib`不包含特定于容器的 EL 实现库**，**这些实现库源自较旧的 make/version 的容器，例如`el-api.jar`和/或`el-impl.jar`源自 Tomcat 6.x 左右。

您的具体问题是由使用不兼容 Servlet 3.0 的容器引起的：旧的 Glassfish 2.x。

升级到[Glassfish 3.x](http://glassfish.java.net)或寻找替代方法。JBoss EL 方法仅适用于 JSF，不适用于 Spring 或“plain JSP”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T12:43:29.903

如果您使用的是 el 2.2 和 servlet 3.0，请使用 tomcat 7 我们遇到了同样的问题并已使用上述版本修复

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-27T01:15:06.920

因为我必须在 Servlet 2.5 上工作，所以我做了这个 hack：

JSP：

```
${testBean.test["hello"]} 
```

豆：

```
private Map test;

public Map getTest() {
    if (test == null) {
        test = new Map() {
            @Override
            public Object get(Object key) {
                System.out.println("param = " + key);
                return null;
            }

            @Override
            public int size() {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public boolean isEmpty() {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public boolean containsKey(Object key) {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public boolean containsValue(Object value) {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public Object put(Object key, Object value) {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public Object remove(Object key) {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public void putAll(Map m) {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public void clear() {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public Set keySet() {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public Collection values() {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

            @Override
            public Set entrySet() {
                throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            }

        };
    }
    return test;
} 
```

# android - Android: Bluetooth(Chat) App should always be kept available in the background

> ID：13017349
> 
> 赞同：2
> 
> 时间：2012-10-22T18:20:12.223
> 
> 标签：android, service, sdk, background, bluetooth

i want to control my phone using an external bluetooth-device with SPP (RFCOMM). so i took the BluetoothChat-Example and adopted the read-part to handle my commands sent by the external device. when i use the external device, it powers up, establishes a connection, sends the command and turns off again. the app is also working when running in the background. so everything works fine so far ..

the two problem i still have are:

a) if i switch-off and on bluetooth on the phone, it will no longer listen to incoming connections from the external device. i have to start the app again to make it work.

b) closing the app is also ok, the thing still works. but when i kill all processes, the app is also closed and will not work longer. is there a possibility, to relaunch the app automatically?

thanks!

PS: i am an android beginner.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:14:23.477

我设法运行该服务，它工作正常！我还为 boot_complete-event 添加了一个广播接收器 - 也可以。

直到现在唯一没有解决的问题是，当我杀死所有进程时，我的服务和接收器停止工作！有没有办法让它们保持活力或自动重新启动它们？谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:34:55.450

还没有使用过蓝牙，但我想我可以根据我在 Android 方面的经验给你一些指导

a）我假设您已经为蓝牙连接实现了服务，对吗？如果是这样，您可以为 ACTION_CONNECTION_STATE_CHANGED 事件实现广播接收器。当接收到这个广播时，您可以处理蓝牙设备的连接和断开。

[http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#ACTION_CONNECTION_STATE_CHANGED](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#ACTION_CONNECTION_STATE_CHANGED)

b）我不确定你是否能做到这一点。如果您使用系统 AlarmManager 编写警报以重新打开您的应用程序并且操作系统终止您的进程，则警报也会被终止。

希望能帮助到你。

# php - MediaWiki：如何扩展用户类？

> ID：13017353
> 
> 赞同：1
> 
> 时间：2012-10-22T18:20:25.067
> 
> 标签：php, mediawiki, wiki

我正在尝试通过添加一些方法来扩展 MediaWiki 的用户类`$user->getNameOfPet()`。例如，扩展`Article_Class_Extended`使用钩子扩展了默认的文章类：

```
 $wgExtensionFunctions[] = "wfArticleExSetup";

    function wfArticleExSetup()
    {
            global $wgHooks;
            $wgHooks['ArticleFromTitle'][] = 'wfArticleExInit';     
    }

    function wfArticleExInit( &$title, &$article )
    {
            // What really counts is what is returned in $article.
            $GLOBALS['wgArticle'] = new ArticleExClass( $title, $article, true );
            return true;    
    } 
```

有没有办法以类似的方式扩展用户类？我正在使用 MediaWiki 1.16.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:33:51.573

我认为从您的设置文件中您可以调用

```
RequestContext::getMain()->setUser(new User()); 
```

我用它来强制“空”（未登录）用户。如果此调用允许您设置用户对象，您应该也可以为其提供用户后代。此行类似于 Setup.php 中设置 $wgUser 全局的行。

# java - failed to set up gradle: 'Could not find the main class: org.gradle.launcher.GradleMain.'

> ID：13017354
> 
> 赞同：5
> 
> 时间：2012-10-22T18:20:28.633
> 
> 标签：java, gradle

I am new to gradle and I am getting started with the Installing Gradle guide.

When I follow the guide's 'Environment variables' step, I set GRADLE_HOME as /path/to/gradle and add /path/to/gradle/bin to the PATH in ~/.bashrc.

And I run gradle -v in the command line, it gives me this error:

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/gradle/launcher/GradleMain
Caused by: java.lang.ClassNotFoundException: org.gradle.launcher.GradleMain
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: org.gradle.launcher.GradleMain.  Program will exit. 
```

it looks like the class path is missing so I set the CLASSPATH variable to '.:path/to/gradle/lib/gradle-launcher-1.2.jar' and login again. It is still not working...

Any hints

Thx in Advance :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T07:02:34.490

将以下内容添加到环境文件中

PATH="... :$GRADLE_HOME/bin" GRADLE_HOME="/opt/gradle/gradle-1.0-milestone-3"

重新加载环境变量

源 /etc/环境

将符号链接添加到 usr/bin 文件夹

$ sudo ln -sf /opt/gradle/gradle-1.0-milestone-3/bin/* /usr/bin/.

打开一个新的终端。使用“ gradle -v ”测试安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-04T12:43:44.173

如果您使用的是 Mac OSX，我认为使用 Homebrew（Mac OSX 的包管理软件）更容易安装和管理所有软件包。今天我使用 brew 命令安装了 gradle 2.0。

通过使用安装 brew`brew install`然后更新您`brew update`的以获得所有当前更改。

安装 brew 后，您可以使用 brew 安装所有软件包

安装 Gradle 的命令：

```
brew install gradle 
```

设置您的 gradle 环境，因此您需要使用以下命令在终端中打开 .bash_profile：`vim .bash_profile`

之后，您需要将其添加到您的 bash_profile

```
export GRADLE_HOME=$(/usr/local/Cellar/gradle/) 
```

HomeBrew 总是将所有软件包安装到 /usr/local/Cellar 但我建议检查终端中的 gradle 路径。

当您尝试时， `gradle -v`您应该会看到：

* * *

## 摇篮 2.0

构建时间：2014-07-01 07:45:34 UTC 内部版本号：无 修订：b6ead6fa452dfdadec484059191eb641d817226c

Groovy：2.3.3 Ant：2013 年 12 月 23 日编译的 Apache Ant(TM) 版本 1.9.3 JVM：1.7.0_60 (Oracle Corporation 24.60-b09) 操作系统：Mac OS X 10.9.4 x86_64

# c# - 根据实体属性列表设置单个实体属性

> ID：13017360
> 
> 赞同：4
> 
> 时间：2012-10-22T18:20:45.740
> 
> 标签：c#, json, entity-framework, entity-framework-4, json.net

我的 Entity Framework 实体和我序列化/反序列化的 JSON 对象之间有一个中间对象，以便导入和导出到文本文件。

当我从实体框架导出时，我使用以下代码遍历实体类型属性...如果实体中的属性与我拥有的枚举中的属性匹配，则该属性将保存到 JSON 对象。这可以防止实体特定属性弄乱我的 JSON。

```
var blockProperties = typeof(FixedLengthBlock).GetProperties(BindingFlags.Public | BindingFlags.Instance);
foreach (var property in blockProperties)
{

    if (Enum.GetNames(typeof(ModuleSettingEnum)).Contains(property.Name.ToLower()) && property.GetValue((FixedLengthBlock)element, null) != null)
        blockJsonEntity.Properties.Add(property.Name, property.GetValue((FixedLengthBlock)element, null).ToString());
} 
```

虽然上面的代码有效，但我想不出类似的方法来做相反的事情。从 JSON 中读取时，我在字典中有属性/值。我知道我可以遍历 EF 实体的属性并搜索字典是否包含这样的键：

```
var blockProperties = typeof(FixedLengthBlock).GetProperties(BindingFlags.Public | BindingFlags.Instance);
foreach (var property in blockProperties)
{
        if (block.Properties.ContainsKey(property.Name))
   {
     ???????What goes here??????
   }
} 
```

如何将匹配的属性放入我为接收信息而创建的新实体中。我真的很想避免使用大的 switch 语句。

我的 Json 对象如下所示：

```
public class JsonEntity
{
    public string Name { get; set; }
    public string Type { get; set; }
    public Dictionary<string, string> Properties { get; set; }
    public List<JsonEntity> SubEntities { get; set; } 

    public JsonEntity()
    {
        Properties = new Dictionary<string, string>();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:04:10.530

好的，所以如果我们要反序列化为相同的类型，让我们试试这个：

```
var bindingFlags = BindingFlags.Public | BindingFlags.Instance;
var blockProperties = typeof(FixedLengthBlock).GetProperties(bindingFlags);
var newObj = Activator.CreateInstance(typeof(FixedLengthBlock))
foreach (var property in blockProperties)
{
    if (block.Properties.ContainsKey(property.Name))
    {
        var propertyInfo = newObj.GetType().GetProperty(property.Name, bindingFlags);
        if (propertyInfo == null) { continue; }
        propertyInfo.SetValue(newObj, block.Properties[property.Name]);
    }
} 
```

# firefox - Firefox beforeSearch 事件

> ID：13017361
> 
> 赞同：2
> 
> 时间：2012-10-22T18:20:51.333
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

用户按下火狐搜索字段中的输入后，火狐中是否有事件发送？在 Safari 中它被称为 SafariBeforeSearchEvent (beforeSearch)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:31:07.887

我在 FireFox 中找不到任何此类事件，我以前也没有听说过。但是，您可以尝试简单地捕获任何可能导致 FireFox 中的搜索栏的事件。这里有一些简单的 JQuery，它会告诉你刚刚触发了什么事件。然后，您可以根据需要为 Firefox 设置任何条件。

F3 = 事件 114，Alt+F = 事件 70

希望这可以帮助。祝你好运。

```
<html>
<head>
  <style type="text/css">
  </style>

  <script src="http://code.jquery.com/jquery-latest.js"></script>

  <script>
    $(document).ready(function () {
        //Catch F3
        $('body').on('keyup', function(e) {
            if(e.which==114) {
              e.stopPropagation();
              //START Call/insert my on before search routines here
              alert(e.which);
              //END -----------------------------------------------
              return false;
            }
        });

        /*
        $('body').on('keyup', function(e) {
            alert(e.which);
        });
        */

    });
  </script>

</head>
<body>

</body>
</html> 
```

# windbg - 创建在 64 位操作系统中运行的 32 位进程的 minidump

> ID：13017364
> 
> 赞同：4
> 
> 时间：2012-10-22T18:21:03.643
> 
> 标签：windbg, crash-dumps, sos, wow64, minidump

我有一个 .net 应用程序，它设计为在 32 位环境中运行，它在 wow64 环境中的 64 位操作系统中运行。

现在我正在创建一个实用程序（32 位）来为应用程序创建转储。

我使用以下代码创建转储。

```
[DllImport("dbghelp.dll", EntryPoint = "MiniDumpWriteDump", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
static extern bool MiniDumpWriteDump(IntPtr hProcess, uint processId, SafeHandle hFile, uint dumpType, ref MiniDumpExceptionInformation expParam, IntPtr userStreamParam, IntPtr callbackParam); 
```

此 API 调用在 32 位操作系统中执行良好，但在 64 位操作系统中失败。

有人在 64 位操作系统中为 32 位应用程序创建了转储吗？请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T15:34:50.457

确保您的 MiniDumpExceptionInformation 结构的结构定义中有 Pack=4。

这是我在 32 位和 64 位 C# 应用程序中使用的：

```
[StructLayout(LayoutKind.Sequential, Pack=4)]
public struct MINIDUMP_EXCEPTION_INFORMATION
{
    public uint ThreadId;
    /// PEXCEPTION_POINTERS->_EXCEPTION_POINTERS*
    public IntPtr ExceptionPointers;
    [MarshalAs(UnmanagedType.Bool)]
    public bool ClientPointers;
} 
```

但我们总是使用匹配的架构（用于在 32 位进程上创建故障转储的 32 位应用程序等）

# c# - 为什么静态方法中没有受保护的 setter 属性？

> ID：13017365
> 
> 赞同：0
> 
> 时间：2012-10-22T18:21:06.167
> 
> 标签：c#, clone, static-methods

我有一个特定基本类型的静态助手克隆方法，它不允许我设置基本属性设置器。

```
public static T Clone<T>(this T source, DomainKey cloneKey)
    where T : DomainObjectWithKey
{
    T clone = source.Clone(); // binary formatter returns object of type T
    clone.Key = cloneKey; // this does not compile
    return (T)clone;
}

public class DomainObjectWithKey
{
    public DomainKey Key { get; protected set; } 
```

另一种解决方案是将 Clone 方法放在类本身中，这样我就可以使用受保护的 setter。但是，我必须指定何时从派生对象调用 Clone，这似乎毫无意义。

因此我的问题是，是否由于封装我不能从静态方法调用受保护的 setter 方法？

替代解决方案的示例，但为什么我必须指定类型？

```
category.Clone<Category>(otherCategory.Key); // why do I have to specify <Category> here?

public class Category : DomainObjectWithKey
{
    public long CategoryId { get { return ((IdDomainKey)Key).Id; } }

    public Category(long categoryId)
    {
        Key = new IdDomainKey(categoryId);
    }
} 
```

**解决方案**

我最终拥有了一个公共属性，因此可以从派生类的实例访问 Key，但对 setter 进行内部保护，从而允许静态辅助方法设置属性。

```
public class DomainObjectWithKey
{
    public DomainKey Key { get; protected internal set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:25:10.910

`protected` means that it is visible to the subclasses of `DomainObjectWithKey`. Your `Clone` method appears to be outside of `DomainObjectWithKey`.

Maybe you're looking for `internal`? `internal` allows you access to the member from within the same DLL.

# python - Importing opencv brew install on OSX Lion causes segfault

> ID：13017368
> 
> 赞同：1
> 
> 时间：2012-10-22T18:21:16.547
> 
> 标签：python, opencv

I have already installed numpy and scipy via pip (both import properly) and have the latest XCode with command line tools. Opencv used to work at one point but is now causing a segfault when I attempt to import it in python. I'm using python 2.7.3 installed through brew.

I attempted gdb python with run -c "import cv2" and only received:

```
#0  0x00007fff5fc01028 in __dyld__dyld_start ()
#1  0x0000000100000000 in ?? () 
```

In response to the backtrace. My PYTHONPATH is set to "/usr/local/lib/python2.7/site-packages:$PYTHONPATH". I've tried reinstalling using the build-from-source options along with --use-clang, --use-llvm, and --use-gcc just to see if it's a weird compiler issue. I also attempted to export GCC=gcc-4.2 and GXX=g++-4.2 before compiling.

Any ideas on troubleshooting this install?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:39:19.860

原来这是一个编译器问题。因为我想默认使用 brew 安装，所以我的路径中首先有 /usr/local/bin 。Opencv 使用 brew 的 gcc 4.7 版进行编译。看起来好像在导出 GCC=gcc-4.2 和 GXX=g++-4.2 之后，自制软件没有引用这些环境变量来找出它应该使用哪个编译器。

# ios - UISearchbar not conveyer for correct DetailView

> ID：13017369
> 
> 赞同：0
> 
> 时间：2012-10-22T18:21:16.887
> 
> 标签：ios, uisearchbar, detailview

The my Searchbar after I searching and select row on my tableview is not conveyer for correct DetailView for row this is the code for UISearchbar

displayItems is NSMutableArray and allItems is NSArray

this the tutorial [http://www.youtube.com/watch?v=IqDZHgI_s24](http://www.youtube.com/watch?v=IqDZHgI_s24)

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
if ([searchText length] == 0) {
    [displayItems removeAllObjects];
    [displayItems addObjectsFromArray:allItems];

} else {

    //here

    [displayItems removeAllObjects];
    for (NSString * string in allItems){
        NSRange r =[string rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (r.location != NSNotFound){
            [displayItems addObject:string];
        }
    }
}
[tableView reloadData];

} 
```

# powershell - 递归获取元数据的Powershell函数

> ID：13017375
> 
> 赞同：2
> 
> 时间：2012-10-22T18:21:30.207
> 
> 标签：powershell

我正在修改一些我发现以递归方式从文件中获取元数据的 powershell 代码，但是我无法访问文件夹中的文件夹。我从\share 下直接列出的文件夹中获取元数据，而不是那里的文件夹和文件。如何将此代码修改为文件夹中文件的元数据？

另外，我正在尝试将元数据导出到 CSV，但我只得到一个空文件。

**编辑：**我正在尝试从 .pst 文件中获取数据。我还找到了以下行，想知道是否可以以某种方式添加它：

目录 \myserver\share -Recurse -包括 *.pst | 选择全名

```
($folder = "\\myserver\share") #end param
function funLine($strIN) 
{
$strLine = "=" * $strIn.length
$hash | Export-Csv c:\pstdetails.csv -NoClobber -NoTypeInformation
# Write-Host -ForegroundColor Yellow "`n$strIN"
# Write-Host -ForegroundColor Cyan $strLine
} #end funline
function funMetaData()
{ 
foreach($sFolder in $folder)
 {
  $a = 0
  $objShell = New-Object -ComObject Shell.Application
  $objFolder = $objShell.namespace($sFolder)
  foreach ($strFileName in $objFolder.items())
  { FunLine( "$($strFileName.name)")
     for ($a ; $a  -le 266; $a++)
      { 
       if($objFolder.getDetailsOf($strFileName, $a))
        {
         $hash += @{ `
              $($objFolder.getDetailsOf($objFolder.items, $a))  =`
              $($objFolder.getDetailsOf($strFileName, $a)) 
         } #end hash
         $hash
         $hash.clear()
          } #end if
      } #end for 
    $a=0
   } #end foreach
 } #end foreach
} #end funMetadata 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:52:19.187

高高在低的寻找之后，答案一直摆在我的面前。（我之前在这里搜索过！）在这里找到了答案：[Recursive file search using PowerShell](https://stackoverflow.com/questions/8677628/recursive-file-search-using-powershell)

我将它修改为我需要的列，所以这是我使用的代码：

```
Get-ChildItem -Path \\Server\Folder -Filter *.pst -Recurse | Select-Object Directory, Name, Length, CreationTime, LastAccessTime, LastWriteTime | Export-Csv "c:\emails1.csv" 
```

# django - 带有 django 1.4 的引导日期选择器

> ID：13017376
> 
> 赞同：1
> 
> 时间：2012-10-22T18:21:34.923
> 
> 标签：django, twitter-bootstrap, datepicker

[我知道datepicker](https://stackoverflow.com/questions/11752223/twitter-bootstrap-date-picker-not-working)有一个非常相似的问题，但我自己无法解决，因为我认为我的问题不同。所以我试图在我的本地 django 项目中使用 bootstrap-datepicker [bootstrap-datepicker 。](http://www.eyecon.ro/bootstrap-datepicker/)我有一点使用 django 的经验，目前使用的是 1.4 版。我有一个 ModelForm，我希望能够为某些 DateField 使用 datepicker 接口。我使用以下方法在模板中正确呈现表单字段：

```
 <div class="well">
   <input type="text" class="span2" value="02/16/12" data-date-format="mm/dd/yy" id="datepicker" >
 </div> 
```

在我的模板底部，我有以下 JS 代码：

```
<script> $("#datepicker").datepicker(); </script> 
```

现在，在我的基本布局模板中，我有以下内容：

```
<link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap.css"/>
<link rel="stylesheet" href="{{ STATIC_URL }}css/datepicker.css"/>

{% block head %}{% endblock %}
{% include "layouts/header.html" %}
{% block content %}{% endblock %}
{% include "layouts/footer.html" %}

<script src="{{ STATIC_URL }}js/bootstrap.js"></script>
<script src="{{ STATIC_URL }}js/bootstrap-datepicker.js"></script>
{% block scripts %}{% endblock %} 
```

我要渲染日期选择器的模板当然包括基本布局模板：

```
{% extends "layouts/base.html" %} 
```

我的静态文件按以下方式分发：

```
Project/
    apps/
    static/
        css/
            bootstrap.css
            datepicker.css
            datepicker.less
        js/
            bootstrap.js
            bootstrap-datepicker.js 
```

我以前从未在我的项目中使用过 JS，所以它可能有事可做，但是，当我渲染我的表单时，DateField 显示为 datepicker 示例，它只是我无法让它部署你可以选择的小部件日历中的日期。每次我使用表单重新加载 url 时，我都会在 runserver 中得到以下信息：

```
[22/Oct/2012] "GET /element/new HTTP/1.1" 200 9547
[22/Oct/2012] "GET /static/js/bootstrap.js HTTP/1.1" 304 0
[22/Oct/2012] "GET /static/css/datepicker.css HTTP/1.1" 304 0
[22/Oct/2012] "GET /static/js/bootstrap-datepicker.js HTTP/1.1" 304 0
[22/Oct/2012] "GET /static/css/bootstrap.css HTTP/1.1" 200 118150 
```

我将不胜感激任何形式的帮助。如果你需要我的 settings.py 在下面的链接中：[settings.py](http://pastie.org/5099431)

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:51:59.300

为了清楚起见。有问题的日期选择器是[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

我已经在我自己的项目中实现了这个日期选择器，但只是作为更复杂的 JS 用法的一部分。我的电话更接近于：

```
$("#datepicker").datepicker({
    format: 'yyyy-mm-dd',
    weekStart: 1,
 }); 
```

我没有提到 $() 工作所需的 jQuery JS 文件。

runserver 消息完全正常。它们是接收到的 HTTP 调用以及它们的工作方式，200 和 304 表示找到或不需要再次获取的文件。所以这很好。同样，我没有看到您的浏览器请求 jQuery，所以我认为它可能丢失了。

要进行故障排除，您应该在 Javascript 控制台（在浏览器中）而不是在 runserver 中查找错误。

希望有帮助。

# c# - C# 中的泛型与 OleDbConnection

> ID：13017377
> 
> 赞同：0
> 
> 时间：2012-10-22T18:21:44.200
> 
> 标签：c#, generics, oledb

我没有为 OleDbConnection、MySqlConnection、OdbcConnection 和 Db2Connection 维护几个不同的数据库访问层，而是试图找出一种使用泛型的方法。但是，当我尝试编译代码时出现错误，当我尝试访问类的方法或属性时出现错误。

```
public class DatabaseConnector<CONNECTION> {
    private CONNECTION connection = default(CONNECTION);
    public bool IsConnected {
        get {
            return (
                this.connection != null &&
                // error on connection.State on the following two lines
                this.connection.State != System.Data.ConnectionState.Closed &&
                this.connection.State != System.Data.ConnectionState.Broken
            );
        }
    }
} 
```

有没有办法解决？或者也许是另一个可以处理多个版本的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:22:50.180

您正在寻找约束：

```
public class DatabaseConnector<TConnection> where TConnection : DbConnection, new() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:27:13.737

尝试`where`在你的类定义中使用：

```
 class DatabaseConnector<CONNECTION> where CONNECTION: DbConnection 
```

像这样，您将能够使用公共类中定义的方法。

之后您需要为命令和您需要的所有其他功能创建一个类似的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:51:09.303

那解决了它！我从来没有想过使用接口。

```
public class DatabaseConnector<CN, TRANS, CMD, DA, PARAM>
    where CN:IDbConnection
    where TRANS:IDbTransaction
    where CMD:IDbCommand
    where DA:IDbDataAdapter
    where PARAM:IDbDataParameter 
```

# html - 使用过滤器后呈现锯齿状字体：仅在 IE 中使用 FlipH

> ID：13017381
> 
> 赞同：0
> 
> 时间：2012-10-22T18:22:01.957
> 
> 标签：html, css, internet-explorer, fonts

我正在反向渲染文本，下面的代码就像一个冠军。问题是 IE，字体都是用非常锯齿状的边缘呈现的。有人对如何使其在 IE 中正确呈现有建议吗？

```
.flipText {
display: block;
-moz-transform: scaleX(-1); /* Gecko */
    -o-transform: scaleX(-1); /* Opera */
    -webkit-transform: scaleX(-1); /* webkit */
    transform: scaleX(-1); /* standard */
    filter: FlipH; /* IE 6/7/8 */
-ms-filter: "FlipH";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:39:00.853

通过为包含实际文本的元素添加背景颜色，我能够“屏蔽”在 IE 中呈现的效果。()..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:01:32.790

`-ms-transform: scaleX(-1);`您可以通过添加过滤器并将其限制为 IE8 及更低版本（例如，使用条件注释）使其在 IE9（及更高版本）中看起来不错：

[http://jsfiddle.net/thirtydot/ATsbe/3/](http://jsfiddle.net/thirtydot/ATsbe/3/)

据我所知，没有办法让文字在 IE8 及更低版本中看起来不错。

# c# - Get Image from Video

> ID：13017388
> 
> 赞同：10
> 
> 时间：2012-10-22T18:22:39.913
> 
> 标签：c#, .net, video-processing, aforge

I am trying to write an application which can access cameras connected to PC, record a video and get an image from the video. I use AForge.NET libraries to access cameras: [http://www.aforgenet.com/framework/](http://www.aforgenet.com/framework/)

I don't know how the event named AForge.Video.NewFrameEventHandler works. In this code the event returns null to a bitmap instead of a new frame from a video or the event is not called. I want to get frames from the video to a picture box every time frame to make something like a video stream and after click on the stop button I want the last image to stay displayed in the picture box. Does anyone know how? And why my code doesn't work?

Code:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using AForge.Video.DirectShow;
using System.Drawing;
using AForge.Video;

namespace CameraDevice
{
    public class CameraImaging
    {
        // enumerate video devices
        public FilterInfoCollection videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice );
        //camera
        public VideoCaptureDevice videoSource;
        //screen shot
        public Bitmap bitmap;
        public CameraImaging()
        {
            // create video source
            VideoCaptureDevice videoSource = new VideoCaptureDevice(videoDevices[0].MonikerString );
            // set NewFrame event handler
            videoSource.NewFrame += new NewFrameEventHandler( video_NewFrame );
        }
        public void StartVideo(VideoCaptureDevice videoSource)
        {
            // start the video source
            videoSource.Start();
            // ...
        }
        public void StopVideo(VideoCaptureDevice videoSource)
        {
            // stop the video source
            videoSource.Stop();
            // ...
        }
        private void video_NewFrame( object sender, NewFrameEventArgs eventArgs )
        {
            // get new frame
            bitmap = eventArgs.Frame;
            // process the frame
        }
    }
} 
```

The similar code is here: [http://www.aforgenet.com/framework/features/directshow_video.html[](http://www.aforgenet.com/framework/features/directshow_video.html[)^]

In the Windows Forms I run this video in a thread which does this method:

```
private void VideoRecording()
    {
        camImg.videoSource.Start();

        while (!StopVideo)
        {
            pictureBox1.Image = camImg.bitmap;
            pictureBox1.Invalidate();
        }
        camImg.videoSource.Stop();

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T09:32:35.847

如果我没记错的话，需要立即复制位图，因为它在事件发生后被覆盖。在这里使用参考并不好。尝试类似：

```
private void video_NewFrame( object sender, NewFrameEventArgs eventArgs )
{
    // copy the new frame
    bitmap = new Bitmap(eventArgs.Frame);
    // process the frame
} 
```

或者

```
private void video_NewFrame( object sender, NewFrameEventArgs eventArgs )
{
   // clone new frame
   bitmap = eventArgs.Frame.Clone();
   // process the frame
} 
```

此外，您不应该为此使用额外的线程，AForge 已经这样做了。

1.  调用开始（例如在加载事件中，或按下按钮后）
2.  处理帧事件

    ```
    private void VideoStream_NewFrame(object sender, AForge.Video.NewFrameEventArgs eventArgs)
    {
        Bitmap newFrame = new Bitmap(eventArgs.Frame);
        pictureBox1.Image = newFrame;
    } 
    ```

3.  呼叫停止（关闭事件或按钮）

如果您遇到 WinForm 控件的问题，例如标签，您需要知道这些控件是在另一个线程上创建的，并且您需要使用 Invoke。例如：

```
label_ms.Invoke((MethodInvoker)(() => label_ms.Text = msTimeSpan.TotalMilliseconds.ToString())); 
```

最好的办法是查看框架附带的 AForge 示例：http: [//aforge.googlecode.com/svn/trunk/Samples/Video/Player/](http://aforge.googlecode.com/svn/trunk/Samples/Video/Player/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T05:59:47.560

我在我的 Foscams 中使用 Aforge 视频库，它运行良好。这是我的事件处理程序代码。

```
private void Video_NewFrame(object sender, AForge.Video.NewFrameEventArgs eventArgs)
    {
        //Create Bitmap from frame
        Bitmap FrameData = new Bitmap(eventArgs.Frame);
        //Add to PictureBox
        PictureBox.Image = FrameData;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:27:59.160

一种方法是[获取或编写一个围绕 FFMPEG 的包装器](https://stackoverflow.com/questions/2163036/solid-ffmpeg-wrapper-for-c-net)，它可以为您完成[从视频中提取图像](https://stackoverflow.com/questions/8679390/ffmpeg-extracting-20-images-from-a-video-of-variable-length)的工作。我参与了两个项目，它们使用这种方式从上传的视频中获取缩略图和/或静止图像。它会感觉有点hackish，但它应该可以工作。

# macos - 如何使 iterm2 为退格发送 Control-H，使其适用于所有 Linux shell

> ID：13017392
> 
> 赞同：12
> 
> 时间：2012-10-22T18:22:46.307
> 
> 标签：macos, vim, ssh, iterm

当我的退格键没有退格行为时，我在 OSX 中遇到了 Terminal.app 的一些问题。基本上，按退格键会导致删除。在终端中，您可以通过转到首选项/设置/高级并勾选“删除发送 Control-H”来解决此问题，这适用于我通过 SSH 连接的所有服务器。

我现在已经转移到 iTerm2 我如何在 iTerm2 上做同样的事情？

非常感谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-22T18:25:43.777

好的，已经修复了抱歉！对于其他需要这个的人：

```
iTerm2 -> Preferences -> Keys -> Key Mappings -> click on the + symbol  
-> Click to Set -> press backspace -> select 'Send ^H Backspace' 
```

# angularjs - AngularJS 身份验证全局变量

> ID：13017396
> 
> 赞同：2
> 
> 时间：2012-10-22T18:23:05.503
> 
> 标签：angularjs

我正在尝试按照下面的建议实现自定义 API 身份验证方法。

[密码保护 REST 服务？](https://stackoverflow.com/questions/8562223/password-protecting-a-rest-service?lq=1)

但是，我在使用 authkey 时遇到了一些问题。我想将收到的 authkey 保存为全局变量，但我似乎无法更改它，它总是与开始时定义的值相同。

我正在使用角度（v0.9）服务实现全局变量。

我的代码片段

```
angular.service('Authkey', function(){
  return {
"authkey": "0000"
 };
}); 
```

控制器

```
function LoginCtrl(Login_, Authkey_){
this.login = function(){
Login_.query({"Username": this.email,"Password": this.password}, function(response){
        if (response.success === "true") {
            Authkey_.authkey = response.AuthKey;
            console.log(Authkey_.authkey);
            window.location="/main.html";

        } 
    }); 
}
} 
```

是的。页面更改后它总是变为 0000。

感谢我能得到的所有帮助。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:50:51.160

试试这个：

```
angular.service('Authkey', function(){
  var authkey = "000";
  return {
     getAuthKey: function(){
        return authkey;
     }, 
     setAuthKey: function(key){
        authkey = key;
     }
 };
});

//in controller:

Authkey_.setAuthKey(response.AuthKey);
consol.log(Authkey_.getAuthKey()); 
```

这里的区别在于 AuthKey 服务对密钥有一个闭包，而您获取/设置该值。

在您的代码中，您总是返回相同的内容。您在服务中设置的键对您的返回值没有影响

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:33:26.810

我不确定这是否在 Angular 0.9 中可用...但您可以尝试使用[Module.value(key, value)](http://docs.angularjs.org/api/angular.Module#value) .... 它允许您设置全局可注入值。

```
var app = angular.module('myApp', []);

app.value('token', '12345');

app.controller('MyCtrl', function($scope, token) {
     $scope.tokenOut = token; //still 12345.
}); 
```

# python - Sphinx LaTeX 标记限制

> ID：13017397
> 
> 赞同：9
> 
> 时间：2012-10-22T18:23:13.700
> 
> 标签：python, latex, python-sphinx

我正在尝试在 Sphinx（版本 1.1.2-1）的多线数学模式中做三件非常基本的事情。

1.  即使在数学模式下，也将下划线作为我的变量名的一部分；
2.  使用`\big`,`\biggl`等分隔符制作大括号和圆括号；
3.  并包括常规文本作为方程式的一部分。

注意以下两点。(1) 我在我的 Python 代码中为 Sphinx 标记文档使用了原始字符串，因此转义字符不需要额外的反斜杠，并且 (2) 我没有使用内联数学模式，它在 Sphinx 中是这样分隔的：

```
:math:`Some math stuff goes here` regular text could go here... 
```

相反，我正在做多行的东西，通常就像`eqnarray`在 LaTeX 中一样：

```
.. math::
    DividendYield &=& \frac{DVT(t)}{CurrentMarketCap} \\
    Avg_Assets &=& \biggl( A/B \biggr) \textrm { when B is not zero...} 
```

目前，我收到 Sphinx 错误（并且生成的文档页面看起来像乱码），说的是：

```
Unknown LaTeX command: textrm 
```

同样的情况发生在`\biggl`. 对于下划线，它总是将其解释为好像我在表示下标，但如果我使用`\textunderscore`或其他技巧，那么它会引发与上述相同类型的错误。

数学模式中的下划线、`textrm`命令和大分隔符是我曾经使用过的每个原生 TeX 包的非常基本的部分。那么为什么它们无法通过 Sphinx 访问呢？

**更新**

我正在处理的一个特定 Python 文件为我计算账面净值数据。所以下面，当你看到关于 BookEquity 的东西时，这就是参考。除非通过版本控制系统，否则我无法运行我们的构建文档过程，因此如果我只是修改现有文件，则最容易出现可重现的错误。

但是，我所做的只是在我的代码中添加以下类函数，并带有一个简单的文档字符串。

```
def foo(self):
    r"""
    Sample docstring

    .. math::
        Ax &=& b \\
        Cx &=& \biggl(\frac{x/y}\biggr) \textrm{ if y is not zero.}
    """
    pass 
```

然后下图是使用 Sphinx 1.1.2-1 构建文档的输出。

![生成的文档页面的片段显示了与 Sphinx 显示的完全一样的错误。](../Images/5d35f710c50766a930cff71372404390.png)

如果您右键单击并选择“查看图像”，您可以看到更好的版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T14:08:53.803

您必须编辑`sphinx-quickstart`创建的标准配置文件，否则 sphinx 会在数学块上吐槽。在文件`conf.py`中，我改变了

```
extensions = [] 
```

到

```
extensions = ['sphinx.ext.pngmath'] 
```

之后，以下第一个文件或多或少起作用了；

```
.. foo documentation master file, created by
   sphinx-quickstart on Thu Oct 25 11:04:31 2012.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

Welcome to foo's documentation!
===============================

Contents:

.. toctree::
   :maxdepth: 2

This is the first chapter
=========================

Instead, I am doing multi-line stuff, often like eqnarray in LaTeX:

.. math::
    DividendYield &=& \frac{DVT(t)}{CurrentMarketCap} \\
    Avg_Assets &=& \biggl( A/B \biggr) \textrm { when B is not zero...} 
```

它为数学片段生成了以下 LaTeX 代码：

```
\chapter{This is the first chapter}
\label{index:welcome-to-foo-s-documentation}\label{index:this-is-the-first-chapter}
Instead, I am doing multi-line stuff, often like eqnarray in LaTeX:
\begin{gather}
\begin{split}DividendYield &=& \frac{DVT(t)}{CurrentMarketCap} \\
Avg_Assets &=& \biggl( A/B \biggr) \textrm { when B is not zero...}\end{split}\notag\\\begin{split}\end{split}\notag
\end{gather} 
```

使用 split 和 collect 组合的选择对我来说似乎有点奇怪，并且显然不适用于您为 eqnarray 编写的代码，但这在 Sphinx 中是硬编码的。

运行 pdflatex 确实停止了`\end{gather}`，但出现错误，`Extra alignment tab has been changed to \cr.`但我可以通过进入 nonstopmode 继续。这给了我以下结果：

![测试图像](../Images/2b5e00d169afe5a9ee855976fe539dd9.png)

虽然对齐仍然存在问题（由于`split`和`eqnarray`环境之间的差异），但 textrm 和 biggl 似乎工作正常。（请注意，您仍然必须转义 中的下划线`Average_Assets`，但这是课程的标准，AFAICT）。

您*可能*会逃避对生成的 LaTeX 代码进行后处理，例如通过替换`\begin{gather}\begin{split}`和`\end{split}\notag\\\begin{split}\end{split}\notag\end{gather}`您选择的数学环境。

**更新**：

更新的屏幕截图似乎来自网页，而不是 LaTeX 文档！所以在我看来，产生错误的是处理程序，它转换了 LaTeX 数学符号，以便浏览器可以显示。那可能是`MathJax`or `jsMath`。通过查看代码，`pngmath`会产生其他错误消息。根据[这个页面](http://www.onemathematicalcat.org/MathJaxDocumentation/TeXSyntax.htm)，您的代码片段*应该*在 mathjax 中工作。从[jsMath 符号页面](http://www.math.union.edu/~dpvc/jsmath/symbols/welcome.html)，它看起来不像 jsmath 支持`\Biggl`. 所以我最好的猜测是 SPhinx 被配置为使用 jsMath。查看生成的网页的来源应该会告诉您用于呈现数学的内容。如果我的猜测是正确的，将配置切换为使用 mathjax 并稍微调整您的方程式可能会解决问题。

**Update2**：我可以肯定地确认它与 MathJax 一起工作正常（见下文）。不过，我没有安装 jsMath。

![用 mathjax](../Images/41be02f5f7614cc07dd7c40109122695.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T20:58:53.347

**更新**

如前所述，sphinx 使用`gather`and`split`用于数学模式。根据[AMS 数学指南](ftp://ftp.ams.org/pub/tex/doc/amsmath/short-math-guide.pdf)，拆分需要一个`$`符号。所以

```
.. math::
    DividendYield &= \frac{DVT(t)}{CurrentMarketCap} \\
    Avg_Assets &= \biggl( A/B \biggr) \textrm { when B is not zero...} \\
    Avg \_ Assets &= \biggl(\frac{A}{B}\biggr) \textrm{ when B is not zero...}

.. autofunction:: mymodule.foo 
```

将 foo 定义为

```
def foo(self):
    r"""Sample docstring

    .. math::
        Ax &= b \\
        Cx &= \biggl( \frac{x}{y} \biggr) \textrm{ if y is not zero.}
    """
    pass 
```

使用 latexpdf 和使用[MathJax 扩展](http://sphinx.pocoo.org/ext/math.html#module-sphinx.ext.mathjax)的 html 呈现良好。

![斯芬克斯数学](../Images/7beef26ec1fd6af7c9ce84b0c7821dd4.png)

请注意，我`\_`在数学模式下使用了下划线，它有效，但`\textunderscore`没有用（我认为您必须加载其他包，请参阅 tex.stackexchange.com 上的[这个问题）。](https://tex.stackexchange.com/questions/6550/where-is-textunderscore-defined)所以当它出现时，我认为你的问题显然是一个`Tex`问题。

我没有删除我之前的答案，但是它仅适用于乳胶生成器，不适用于 html 生成器。

**原始答案**

Sphinx 产生“不寻常”的乳胶代码。它使用`gather`和`split`方程（看看它生成的乳胶源）。

问题是，没有简单的方法来修改它产生的乳胶源。您必须对乳胶源进行后处理才能获得“科学”级乳胶代码。

Sphinx 是为 html 文档设计的（我认为是由 web 开发人员设计的），乳胶（以及像编号数字、表格和方程式这样的科学“问题”）似乎并不是该项目的主要重点。顺便说一句，您的代码可以很好地呈现为带有 mathjax 扩展的 html。

我想我也记得 docutils 开发人员对这个主题的一些批评：docutils 有一个乳胶生成器（这似乎“更好”），但是 sphinx 不使用这个生成器。

曾经在邮件列表中发布了一个名为`relatex`( [link ) 的项目，用于对 sphinx 创建的乳胶代码进行后处理。](https://groups.google.com/forum/?fromgroups=#!topic/sphinx-dev/XOZAXsErVDU)但我不确定发展状况。我使用了我自己的代码，我在[这里](https://github.com/bmu/sphinx-latex)提供了它（不幸的是它是德语和英语的混合体）。我认为它不是很有用，因为我认为后处理 sphinx 乳胶很复杂，所以我改用纯乳胶。所以我没有进一步开发它。但是基本步骤是

*   创建您自己的乳胶样式和模板
*   让 sphinx 创建它的乳胶代码
*   后处理乳胶代码并将其粘贴到您的模板中
*   使用 LaTeX 的构建系统从您的代码生成 pdf

我调整了 sphinx Makefile 以一步完成。作为我使用的建筑系统[`rubber`](https://launchpad.net/rubber/)（现在我会使用[`latexmk`](http://ctan.tug.org/tex-archive/support/latexmk/)）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-21T12:13:59.857

现在（2016 年）Sphinx 数学指令具有`:nowrap:`将完全控制权返回给用户的选项，因此只需

```
.. math::
   :nowrap:

   \begin{eqnarray}
      y    & = & ax^2 + bx + c \\
      f(x) & = & x^2 + 2xy + y^2
   \end{eqnarray} 
```

在 html 和 latexpdf 中都可以很好地呈现。

# html - 由于隐藏的 Schema.org 标记，丰富网页摘要未显示

> ID：13017400
> 
> 赞同：2
> 
> 时间：2012-10-22T18:23:19.660
> 
> 标签：html, magento, schema.org, php, rich-snippets

我刚刚联系了谷歌，询问为什么丰富的片段没有显示在他们的结果中，他们回答了以下问题

```
URL: http://www.theprinterdepo.com/hp-color-laser-4700dn-printer-q7493a-r
Markup Type: Product, Reviews

    Hidden content: <span itemprop="reviewCount">6</span> 
```

我检查了 IE 开发工具，确实它是隐藏的，但它没有隐藏在我的 html 中，知道我做错了什么吗？

```
<?php if ($this->getReviewsCount()): ?>
    <div class="ratings">
        <?php if ($this->getRatingSummary()):?>
          <span itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
            <div class="rating-box">

                <div class="rating" style="width:<?php echo $this->getRatingSummary() ?>%"><meta itemprop="ratingValue" content="<?php echo $this->getRatingSummary()/10 ?>"/></div>
                <span itemprop="reviewCount"><?php echo $this->getReviewsCount() ?></span>
            </div>
          </span>
        <?php endif;?>
        <p class="rating-links">
            <a href="<?php echo $this->getReviewsUrl() ?>"><?php echo $this->__('%d Review(s)', $this->getReviewsCount()) ?></a>
            <!--<span class="separator">|</span>-->
            <!--<a href="<?php echo $this->getReviewsUrl() ?>#review-form"><?php echo $this->__('Add Your Review') ?></a>-->
        </p>
    </div>
<?php elseif ($this->getDisplayIfEmpty()): ?>
    <p class="no-rating"><a href="<?php echo $this->getReviewsUrl() ?>#review-form"><?php echo $this->__('Be the first to review this product') ?></a></p>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T21:32:38.777

当你读到这篇文章时，你会对自己很有趣。

你的问题是你的CSS。转到第 529 行的 /skin/frontend/default/MAG060062/css/styles.css 文件。问题出在您的**.rating-box**类上。

```
.rating-box {
    background: url("../images/bkg_rating.gif") repeat-x scroll 0 0 transparent;
    font-size: 0;
    height: 10px;
    line-height: 0;
    text-indent: -999em;
    width: 50px;
} 
```

如下替换它

```
.rating-box {
    background: url("../images/bkg_rating.gif") repeat-x scroll 0 0 transparent;
    height: 10px;
    width: 50px;
} 
```

更改删除

*   字体大小：0；
*   行高：0；
*   文本缩进：-999em；

萤火虫截图

![在此处输入图像描述](../Images/7359284d435e2cc98d6426e960d45208.png)

IE开发者工具

![在此处输入图像描述](../Images/df8b6355560b7c1efee0554548cfe3bd.png)

永远睁大你的眼睛。哈哈 ：）

# image-processing - 如何从 Java 中的实时网络摄像头进行面部识别？

> ID：13017404
> 
> 赞同：2
> 
> 时间：2012-10-22T18:23:30.923
> 
> 标签：image-processing, webcam, face-recognition, java

我猜我需要两件事：

1.  从网络摄像头捕获视频的库（该库还应显示实时预览小程序）
2.  一个实际进行面部识别的库（通过面部识别，我的意思是不仅要找到面部所在的区域，还要匹配或注册现有面部的数据库，例如 iPhoto 的面部特征）

我不知道从哪里开始或使用哪些库 - 我找到了执行 1) 或 2) 的库，但不知道如何连接它们，或者是否有开箱即用的库，或者我应该滚动一些东西我自己的？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:25:53.440

[OpenCV](http://opencv.org/)适合您：存在[Java 绑定](http://code.google.com/p/javacv/)

> OpenCV 是在 BSD 许可下发布的，因此它对学术和商业用途都是免费的。它具有 C++、C、Python 和 Java 接口，支持 Windows、Linux、Mac OS、iOS 和 Android。OpenCV 旨在提高计算效率，并且非常注重实时应用程序。该库以优化的 C/C++ 编写，可以利用多核处理。通过 OpenCL 启用，它可以利用底层异构计算平台的硬件加速。OpenCV 在全球范围内被采用，拥有超过 4.7 万用户社区，估计下载量超过 700 万。使用范围从交互式艺术到矿山检查，在网络上或通过先进的机器人拼接地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:46:56.247

我设法创建了一个独立的 Java 人脸检测包：[https ://github.com/pathikrit/JFaceRecog](https://github.com/pathikrit/JFaceRecog)

# django - 从 django 查询集中排除在另一个模型的查询集中引用的那些结果

> ID：13017408
> 
> 赞同：4
> 
> 时间：2012-10-22T18:23:51.110
> 
> 标签：django, django-queryset

我正在使用 Django 并有两个类：

```
class PR(models.Model):
  Jq = models.ForeignKey(JQ)
  user = models.ForeignKey(User)
  (snip)
  def __unicode__(self):
        return self.name

class JQ(models.Model):
  a = models.ForeignKey(A)
  (snip)
  def __unicode__(self):
        return self.name 
```

我想执行一个查询，在其中获取不属于指定用户的 PR 的所有 JQ。现在，我正在这样做：

```
 jq = JQ.objects.filter(somefield=someval)
 pr = PR.objects.filter(user=request.user.id)
 for r in pr:
   jq = jq.exclude(id=r.Jq.id) 
```

也就是说，我获取所有 JQ，然后获取所有引用给定用户的 PR。我正在遍历所有 PR，并排除至少一个 PR 引用的 JQ。然而，这是非常低效的。有什么建议么？

（顺便说一句，在本机 SQL 中，我可能会创建该用户 PR 的临时表，然后将该临时表与 JQ 连接起来，并且只保留用户 PR 中不匹配的行。）

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:45:33.700

```
 pr = PR.objects.filter(user=request.user.id).values_list('jq__id', flat=True)
 jq = JQ.objects.filter(somefield=someval).exclude(id__in=pr) 
```

第一行返回一个 id 列表（例如 [12, 14, 110]）。然后，您在排除中使用这些 id。

# asp.net - 从 gridview 获取数据不返回任何内容

> ID：13017409
> 
> 赞同：1
> 
> 时间：2012-10-22T18:23:55.280
> 
> 标签：asp.net

我喜欢通过如下代码从我的网格视图的第二列获取数据，但它什么也不返回 (di.Cells[1].Text) ，请帮助解决问题：

```
protected void btnShowAddTransmittaltoCon_Click(object sender, EventArgs e)
{
    Transmittallistfortest transmittalList = (Transmittallistfortest)DetailsView1.FindControl("Transmittallistfortest1");
    GridView g3 = transmittalList.FindControl("GridViewTtransmittals") as GridView;
    foreach (GridViewRow di in g3.Rows)

    {

        RadioButton rad = (RadioButton)di.FindControl("RadioButton1");
        //Giving Error:Object reference not set to an instance of an object.
        if (rad != null && rad.Checked)
        {
            var w = di.RowIndex;

            Label1.Text = di.Cells[1].Text;
        } 
```

aspx 如下所示：

```
 <asp:GridView ID="GridViewTtransmittals" runat="server" AutoGenerateColumns="False" 
          BorderStyle="None" ShowHeader="False" Width="100%" DataKeyNames="TransID"  onrowdatabound="GridViewTtransmittals_RowDataBound"
        onrowdeleting="GridViewTtransmittals_RowDeleting">
          <columns>
              <asp:TemplateField>
                  <ItemTemplate>
                      <asp:RadioButton ID="RadioButton1" runat="server" GroupName="Transmittal" AutoPostBack="True" 
        OnCheckedChanged="RadioButton1_CheckedChanged" />

                  </ItemTemplate>
              </asp:TemplateField>
            <asp:hyperlinkfield DataNavigateUrlFields="TransId" 
              DataNavigateUrlFormatString="~/Copy of Transmittal.aspx?TransId={0}" DataTextField="TRANSMITTAL" 
              HeaderText="Transmittal" />
            <asp:CommandField ButtonType="Button" ShowDeleteButton="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:03:27.707

您可以尝试使用此代码

```
var result = ((HyperLink)di.Cells[1].Controls[0]).Text; 
```

# playframework - 如何在 Ebean 中创建自定义 INSERT INTO 查询？

> ID：13017411
> 
> 赞同：9
> 
> 时间：2012-10-22T18:23:58.787
> 
> 标签：playframework, playframework-2.0, ebean

我需要用大量数据填充一个表，所以我不想找到相关的对象，而只是输入它们的数值。为此，我将构建一个简单的查询，即：

```
INSERT INTO article_category (article_id, category_id) VALUES (2,12); 
```

无论如何都找不到用 Ebean 做到这一点的方法，我正在尝试：

```
RawSql rawSql = RawSqlBuilder
    .parse("INSERT INTO article_category (article_id, category_id) VALUES (2,12)")
    .create(); 
```

但是，这会引发异常：

> [RuntimeException: Error parsing sql, can not find SELECT keyword in:INSERT INTO article_category(article_id, category_id) VALUES (2,12)]

如何使用 Ebean 调用真正的原始查询？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-23T07:00:42.850

实际上我找到了一个解决方案，它[`com.avaje.ebean.SqlUpdate`](https://ebean-orm.github.io/apidocs/com/avaje/ebean/SqlUpdate.html)可以用于 DELETES、UPDATES 和 INSERTS 语句：

```
SqlUpdate down = Ebean.createSqlUpdate("DELETE FROM table_name WHERE id = 123");
down.execute(); 

SqlUpdate insert = Ebean.createSqlUpdate("INSERT INTO article_category (article_id, category_id) VALUES (2,12)");
insert.execute(); 
```

等等。当然，它还允许在查询中设置命名参数（来自其 API 的示例）：

```
String s = "UPDATE f_topic set post_count = :count where id = :id"
SqlUpdate update = Ebean.createSqlUpdate(s);
update.setParameter("id", 1);
update.setParameter("count", 50);

int modifiedCount = Ebean.execute(update); 
```

**编辑**

从数据库中选择没有相应模型的行也有类似的方法：[`com.avaje.ebean.SqlQuery`](https://ebean-orm.github.io/apidocs/com/avaje/ebean/SqlQuery.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T20:04:06.467

您还可以使用普通的旧 JDBC 连接和语句来代替 Ebean。

与此类似的东西：

```
Connection connection = play.db.DB.getConnection();

Statement stmt = connection.createStatement();
stmt.executeUpdate("INSERT INTO article_category (article_id, category_id) VALUES (2,12)");

stmt.close(); 
```

# javascript - Javascript从函数更新全局变量不起作用

> ID：13017412
> 
> 赞同：0
> 
> 时间：2012-10-22T18:24:10.457
> 
> 标签：javascript

> **可能重复：**
> [Javascript 全局变量未更新](https://stackoverflow.com/questions/13016498/javascript-global-variable-is-not-updating)

我有我正在制作的这个网站。我想从另一个函数更新全局变量。全局变量 statCheck 初始化为 0。我创建了 2 个函数，1 用于更新全局变量并通过警报显示新值，第二个函数将仅提醒更新的全局变量的新值。现在的问题是，当我调用第一个函数时，它会提醒新的更新值，但是当我调用第二个函数时，它会提醒原始值为零。这是我的代码：

```
var statCheck=0;

var users=new Array();
var password=new Array();
users[0]="clydewinux";
password[0]="moonfang";
users[1]="freddipasquale";
password[1]="evastar182";

function verifyInput(){
var u=login.username.value;
var p=login.password.value;
for (var c=0;c<=1;c++){
    if(u===users[c]&&p===password[c])
        { 
        statCheck=1; 
        alert(statCheck);
        window.open("login.htm", '_self'); 
        break;}
    else
        {document.getElementById("username").value="Invalid username..."; 
        window.open("home.htm", '_self'); 
        break;}
    }

        }

function logout(){
alert(statCheck);
window.open("home.htm", '_self');
} 
```

*笔记; 函数 verifyInput() 是第一个函数，函数 logout 是第二个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:29:12.283

使用全局变量时，最好将它们显式地设为全局变量：

```
window.statCheck = 0;
// ...
window.statCheck = 1;
// ...
alert(window.statCheck); 
```

这也有助于代码的可读性。

# ruby - 获取进程开始时间的Ruby方法？

> ID：13017414
> 
> 赞同：3
> 
> 时间：2012-10-22T18:24:26.670
> 
> 标签：ruby, process

是否有 ruby​​ 方法来获取进程开始时间？shell中类似以下内容：

```
 $ ps -p $$ -o lstart
 STARTED
 Thu Oct 18 11:49:22 2012 
```

我希望避免解析 ps 输出。另外，我知道如何在 linux 上解析 /proc/self/status 以获取信息，但我希望有一个更便携的解决方案。

**更新：** 一种可移植的方式正是我想要的。我使用 sys/proctable 并使用以下行来获得我想要的：

```
ProcTable.ps($$).starttime 
```

谢谢，科恩。

**更新：** 我玩了一下，发现它不像我想象的那么便携。在 Darwin 上，返回一个 Time 对象。在 Linux 上，返回一个整数，该整数对应于自引导以来的 jiffies 数。不幸的是，您需要使用 sysconf 系统调用来获取 ms/jiffy 的数量。这个系统调用不能直接在 ruby​​ 上使用。我使用以下内容来获取 Linux 上的 proc 开始时间：

```
module LinuxCLib
  extend FFI::Library
  ffi_lib 'c'

  @@cg = FFI::ConstGenerator.new(nil, :required => true) do |gen|
    gen.include('unistd.h')
    gen.const(:_SC_CLK_TCK)
  end

  attach_function :sysconf, [:int], :long

  def self.hz
    self.sysconf(@@cg["_SC_CLK_TCK"].to_i)
  end
end

def self.get_proc_starttime
  proc_jiffies_since_boot_starttime = Sys::ProcTable.ps($$).starttime
  stat_lines = File.open("/proc/stat").readlines
  system_s_since_epoch_boottime = catch(:boottime) do
    stat_lines.each do |line|
      split_line = line.split
      throw :boottime, split_line[1].to_i if split_line[0] == "btime"
    end
    nil
  end
  proc_s_since_epoch_starttime = (
      proc_jiffies_since_boot_starttime/LinuxCLib::hz + system_s_since_epoch_boottime)
  Time.at(proc_s_since_epoch_starttime)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:42:32.563

有一个 gem 可以做到这一点：[sys-proctable](https://github.com/djberg96/sys-proctable)

它解析文件`/proc`

**安装宝石**

```
gem install sys-proctable 
```

**需要宝石**

```
require 'sys/proctable'
include Sys 
```

**对于所有进程**

```
ProcTable.ps{ |p|
    puts p.comm
    puts p.starttime
} 
```

**对于一个单一的过程（如你的例子）**

```
p = ProcTable.ps($$)
puts p.inspect 
```

如果您不想使用 gem，也许您可​​以从[源代码](https://github.com/djberg96/sys-proctable/blob/master/lib/linux/sys/proctable.rb#L104)`/proc`中提取他们如何解析文件的部分

**编辑：**

我误读了您*确实*知道如何解析`/proc`文件的部分。但也许宝石仍然对您有用，使其便于携带等。

# asp.net-mvc - 数据绑定的 h1 标记未显示 (knockoutjs)

> ID：13017418
> 
> 赞同：1
> 
> 时间：2012-10-22T18:24:40.023
> 
> 标签：asp.net-mvc, html, twitter-bootstrap, knockout.js

我在 KO 中有一个简单的视图模型：

```
 function TemplateFile(name, fileName) {
            var self = this;
            self.name = name;
            self.fileName = fileName;
        }

        var layoutViewModel = {
            loggedInUser: ko.observable("user"),
            templateFiles: ko.observableArray([
                // some initial entries...
            ]),
            contentHeading: ko.observable("Content"),
            // some other things...
        };

        $(function () { ko.applyBindings(layoutViewModel); }); 
```

并且数据绑定在我的 _Layout.cshtml 部分视图中的各个点，其中大多数工作正常。除了这个...

```
 <!-- Page content -->
        <div class="container-fluid" 
             style="background-color: white; border-radius: 10px; margin: 20px; min-height: 400px; height: auto !important; height: 400px">
            <div class="row-fluid">
                <div class="span12">
                    <h1 data-bind="text: contentHeading" style="color: darkgray;" />
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    @RenderBody()
                </div>
            </div>
        </div> 
```

（忽略内联 CSS，这将很快修复；））

绑定到 h1 的“contentHeading”数据根本没有显示出来。我已经尝试了几件事......

*   切换出被绑定的数据：仍然没有出现
*   将标签移动到页面的不同部分：有些有效，有些随机无效
*   硬编码一个虚拟文本值：这个 DID 出现

因此，鉴于这些结果，我认为某些 DOM 元素的加载方式可能存在问题，可能是因为我使用的是 Twitter Bootstrap？

我在这里不知所措，似乎无法从其他任何人那里找到类似的问题。有什么建议么？

```
<ul class="dropdown-menu" data-bind="foreach: templateFiles">
    <li>
        <a href="#" data-bind="attr: { title: fileName}" />
        <span data-bind="text: name" />
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:23:16.097

```
<ul class="dropdown-menu" data-bind="foreach: templateFiles">
    <li>
        <a href="#" data-bind="attr: { title: fileName}" />
       <span data-bind="text: name" />
  </li>
</ul> 
```

这甚至与淘汰赛或引导程序无关。我只是标签不匹配。哦。

结束这个问题！感谢您提供有关查找内容的提示:)

# python - sleep() 是否阻塞了 Django 中请求的处理？

> ID：13017421
> 
> 赞同：5
> 
> 时间：2012-10-22T18:24:55.810
> 
> 标签：python, django

在 Django 中，如果视图在响应请求时使用 sleep() 函数，这是否会阻止整个请求队列的处理？

如果是这样，如何在没有这种阻塞行为的情况下延迟 http 应答？我们能否做到开箱即用并避免使用像 Celeri 这样的作业队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:38:26.830

我想在大多数情况下调用`sleep()`应该阻止所有 Django 代码的执行。然而，它可能取决于部署架构（例如 gevent、gunicorn 等）。例如，如果您使用的服务器会为每个请求触发 Django 线程，那么它不会阻塞所有代码。

然而，在大多数情况下，使用像 Celeri 这样的东西会是一个更好的解决方案，因为 (1) 不要重新发明轮子并且 (2) 它已经过测试。

# zend-framework - Apache/ZF/MySQL/jQuery：如何测试瓶颈在哪里

> ID：13017427
> 
> 赞同：0
> 
> 时间：2012-10-22T18:25:16.833
> 
> 标签：zend-framework, optimization

我不知道如何解决这个问题。在我的应用程序（Zend Framework、MySQL、jQuery）中，其中一个页面的加载时间超过了 10 秒。

它从数据库中加载不到 400 条记录，所以我认为瓶颈不在 MySQL 中。当然，相关表上的服务器端选择不是问题：

```
379 rows in set (0.00 sec) 
```

Firebug 在原始请求中将延迟报告为等待服务器响应，“0 ---> 11.09s Waiting”。这是第一个请求，之后所有的 jQuery 代码都被加载，onLoad 时间为 11.54 秒。所以 jQuery 似乎也不是瓶颈。

没有其他控制器/操作需要这么长时间来响应，所以我无法想象这是一个 Apache 问题。剩下的就是采埃孚自己。

我想知道是否有办法测试延迟发生的位置。以下是相关行动的全文：

```
public function listAction() 
{
    $userDepts = new Application_Model_DbTable_UserDepartments;
    $ptcpDepts = new Application_Model_DbTable_ParticipantDepts;
    $participants = new Application_Model_DbTable_Participants;
    $depts = new Application_Model_DbTable_Depts;
    $ptcpAlerts = new Application_Model_DbTable_AlertsParticipants;

    //check if sub-list is being passed
    if ($this->_helper->flashMessenger->getMessages()) {
        $passedList = $this->_helper->flashMessenger->getMessages();
        $list = $passedList['0'];
    } else {
        $list = $participants->getStaffPtcps();
    }

    $goodList = array_unique($list);
    $number = count($goodList);
    $content = array();

    foreach ($goodList as $id) {
        $deptNames = array();
        $ptcpInfo = $participants->getRecord($id);
        $ptcpDept = $ptcpDepts->getList('depts', $id);

        $flags = $ptcpAlerts->getPtcpAlerts($id);
        if (count($flags) > 0) {
            $flagTest = TRUE;
        } else {
            $flagTest = FALSE;
        }

        foreach ($ptcpDept as $did) {
            $deptName = $depts->getDept($did);
            $deptNames[$did] = $deptName['deptName'];
        }

        $content[$id] = $ptcpInfo;
        $content[$id]['depts'] = $deptNames;
        $content[$id]['flag'] = $flagTest;
    }

    foreach ($content as $c => $key) {
        $sortLastName[] = $key['lastName'];
    }

    array_multisort($sortLastName, SORT_ASC, $content);

    $this->view->list = $content;
    $this->view->count = $number;

    $this->view->layout()->customJS = 
            '<script type="text/javascript" src="/js/datePicker.js"></script>' .
            '<script type="text/javascript" src="/js/ptcpCreate.js"></script>' . 
            '<script type="text/javascript" src="/js/editDataWithModal.js"></script>' . 
            '<script type="text/javascript" src="/js/filter.js"></script>'; 

    $form = new Application_Form_AddParticipant;
    $this->view->form = $form;        
} 
```

任何关于优化此代码的想法 - 或其他地方的指针 - 将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:44:18.650

好吧，我不知道您的自定义方法在做什么，但我假设您正在进行音调 od db 调用：

*   `$participants->getStaffPtcps();`获取初始列表
*   然后对于每个参与者，您：
    *   获取完整记录
    *   获取部门的相关列表 ( `$ptcpDepts->getList('depts', $id)`)
    *   foreeach 部门，您获取更多数据

如果这是正确的，那么您实际上正在运行大量查询，具体取决于员工参与者和部门返回的记录数。不仅如此，每次运行此程序时，您都在为每条记录补充对象，除非您专门将其关闭。在很多情况下，这会使事情变得超级慢，您可能可以通过仅在几个使用 Joins 的查询中执行此操作来优化，但我必须更多地了解 db 架构以及您的方法正在做什么才能告诉您如何操作。

您还可以确保完全绕过 Zend_Db_Table_Row 和 Zend_Db_Table_Rowset。

# sql-server-2008 - 从链接的存储过程插入到本地表

> ID：13017428
> 
> 赞同：3
> 
> 时间：2012-10-22T18:25:25.017
> 
> 标签：sql-server-2008, stored-procedures, linked-server

我有一个从.net 代码调用的存储过程，它对本地表进行更新，然后应该插入到从远程过程调用到链接服务器获得的不同本地表值。

每次我尝试从链接服务器插入结果时都会收到此错误消息。如果我取出 insert into 语句，但保留远程过程调用，它工作正常。这是错误：

> System.Data.SqlClient.SqlException：无法执行操作，因为链接服务器“MyLinkedServer”的 OLE DB 提供程序“SQLNCLI10”无法开始分布式事务。链接服务器“MyLinkedServer”的 OLE DB 提供程序“SQLNCLI10”返回消息“事务管理器已禁用对远程/网络事务的支持。”。

这是我正在使用的简单代码：

```
INSERT INTO MyLocalTable
EXEC [MyLinkedServer].[MyRemoteDatabase].[dbo].[usp_MySproc] @MyParam 
```

任何想法这里有什么问题或任何关于如何将远程过程的结果插入本地表的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:39:20.477

其中一位 sql 人员能够通过将“启用分布式事务提升”更改为 false 来解决此问题。

# c# - Webservice - 操作已超时

> ID：13017430
> 
> 赞同：1
> 
> 时间：2012-10-22T18:25:36.013
> 
> 标签：c#, web-services, soap, wsdl, java-ws

我正在从事的项目如下：我有一个加密数据的 Java Web 服务（Des、3Des）。数据是从 C# 应用程序发送的。我想加密/解密大小为 1MB 的文件。我会得到一个例外。

该文件以位格式放入 byte[] 中，并发送到 Java Web 服务以进行加密/解密。在 web 服务完成之后，它需要将加密/解密的数据发回。

对于小文件，我没有问题，但大小为 1MB 或更大的文件在 C# 应用程序中引发异常，错误有以下消息： *WebException was unhandled: The operation has timed out*

大约在：1min40sec 后抛出此错误

我在 StackOverflow 上阅读过不同的帖子，但它们似乎总是与 WebRequest 和 WebResponse 一起使用。我没有使用它，我用来调用我的网络服务的代码是：

```
public byte[] TEncode(byte[] input, byte[] key)
{
    return _webservice.TDesEncode(input, key);
} 
```

有没有人建议我可以做些什么来解决这个问题？

**编辑** 试图增加 app.config 文件中的会话超时，如：

```
<system.web>
<sessionState timeout="20"></sessionState>
</system.web> 
```

在此先感谢马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:39:58.287

尝试在本地调用编码函数并测量它需要多少时间进行编码，尝试使用最大允许的文件大小来获得最坏的情况。

如果时间最适合您 - 将服务超时增加到该值。

如果不是 - 优化编码功能或在客户端/服务器端进行编码并传输已加密的文件可能是明智之举。

从安全角度来看，最后一种方法更好，因为在您的示例中，您将未加密的字节数组传递给可能的远程服务 - 在这种情况下，它很容易受到网络流量嗅探的攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:30:12.267

听起来你需要增加超时。查看此[站点](http://final-proj.blogspot.com/2009/09/wcf-timeouts.html)以获取解释和可能的修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T09:53:48.390

希望下面的代码能工作..

```
var objNotificationCreation = new BS_INTELATRAC_DES_SI_Intelatrac_NotificationCreation_InS
{
Credentials = new NetworkCredential("user name","password")//if needed,
Timeout=int.MaxValue
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:34:17.340

我认为您需要检查是否在数据到达服务主机的流式传输时间内导致超时，或者实际加密时间是否太长。如果是加密，您可能需要修改它。

我知道您正在使用 1MB 进行测试，但是，如果您在 LAN 上使用千兆以太网运行它，则在 1GB 时，在良好的网络上，将请求发送到服务主机至少需要 10-15 秒.

# hadoop - 在 oozie 中覆盖 hadoop 的 mapreduce.fileoutputcommitter.marksuccessfuljobs

> ID：13017433
> 
> 赞同：7
> 
> 时间：2012-10-22T18:25:44.073
> 
> 标签：hadoop, mapreduce, hive, oozie

```
<property>
<name>mapreduce.fileoutputcommitter.marksuccessfuljobs</name>
<value>false</value>
</property> 
```

我想将上述属性覆盖为true。对于集群上的其余作业，该属性需要为 false，但我需要在我的 oozie 工作流程中，hadoop 在作业完成后在输出目录中创建 _SUCCESS 文件。它是写入输出的工作流中的一个配置单元操作。请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T22:01:43.650

不幸的是，Hive 通过设置它自己的 NullOutputComitter 来覆盖此功能：

```
conf.setOutputCommitter(NullOutputCommitter.class); 
```

看

```
src/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java
src/shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java 
```

看起来您必须手动创建标志。我们为此提交了[HIVE-3700](https://issues.apache.org/jira/browse/HIVE-3700)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-15T12:42:11.970

您可以将“dfs”命令添加到您的配置单元脚本中，例如

`dfs -touchz '$table_base_path'/dt='${partition}'/_SUCCESS`

[https://archive.cloudera.com/cdh4/cdh/4/hive/language_manual/cli.html](https://archive.cloudera.com/cdh4/cdh/4/hive/language_manual/cli.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T22:24:09.583

我遇到了同样的问题，最终使用 shell 操作来创建标志。

这是一个完整的例子： http: [//nathan.vertile.com/blog/2014/09/02/oozie-data-pipeline-done-flag/](http://nathan.vertile.com/blog/2014/09/02/oozie-data-pipeline-done-flag/)

# .net - 需要在“无 oracle”机器上部署 .net 应用程序（从服务器查询 oracle 数据库）？

> ID：13017436
> 
> 赞同：3
> 
> 时间：2012-10-22T18:25:57.323
> 
> 标签：.net, oracle, odp.net

我是一名初级 .net 开发人员。我开发了一个简单的客户端应用程序 (.net3.5)，它需要从 10g oracle 数据库服务器获取结果。此应用程序将部署在 100 个未安装 oracle 但可以访问服务器的 32 位系统中。我们不打算让用户在他们的机器上安装 oracle。那可能吗？我关注了[http://www.splinter.com.au/using-the-new-odpnet-to-access-oracle-from-c/](http://www.splinter.com.au/using-the-new-odpnet-to-access-oracle-from-c/)在此链接中所说的任何内容，它会生成底部提到的版本不匹配错误的链接。它是否可以在用户机器上没有oracle客户端的情况下工作，因为它在我的机器上运行良好，因为它安装了oracle。有没有其他方法可以解决这个问题？

我的连接字符串是：

```
OracleConnection conn = new OracleConnection();
conn.ConnectionString = "User ID=<userid>;Password=*******;Data Source=<data source>";
conn.Open();". 
```

产生的异常是：

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.
************** Exception Text **************
System.TypeInitializationException: The type initializer for 'Oracle.DataAccess.Client.OracleConnection' threw an exception. ---> Oracle.DataAccess.Client.OracleException: The provider is not compatible with the version of Oracle client
   at Oracle.DataAccess.Client.OracleInit.Initialize()
   at Oracle.DataAccess.Client.OracleConnection..cctor()
   --- End of inner exception stack trace ---
   at Oracle.DataAccess.Client.OracleConnection..ctor()
   at WindowsFormsApplication1.frmVoiceFileMover2.cmdGetId_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.269 (RTMGDR.030319-2600)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
VoiceFileMover2
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Program%20Files/State%20of%20Maine/VFM2Setup/VoiceFileMover2.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.278 built by: RTMGDR
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.282 built by: RTMGDR
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.269 built by: RTMGDR
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
Oracle.DataAccess
    Assembly Version: 2.111.6.20
    Win32 Version: 2.111.6.20
    CodeBase: file:///C:/Program%20Files/State%20of%20Maine/VFM2Setup/Oracle.DataAccess.DLL
----------------------------------------
System.Data
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.237 (RTMGDR.030319-2300)
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Core
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.233 built by: RTMGDR
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
System.Transactions
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Transactions/v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll
----------------------------------------
System.Configuration
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.233 built by: RTMGDR
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
---------------------------------------- 
```

我在开发机器上安装了 2 个 oracle 客户端 10.2 和 11.2。我从 11.2 客户端将 oracle.dataaccess.dll 引用到我的项目，然后当它不起作用时，我下载了最新版本的 odp.net 并再次引用。当我仍然看到此异常时，我尝试使用 odp。 net 也适用于 10g，但我在 10g 中找不到 oracle.dataaccess.dll。这是因为 GAC 的问题吗？

我还尝试根据此链接“http://www.youtube.com/watch?v=I1q50HnUh_w”使用 ODP.net 托管驱动程序测试版。

我是否必须在每台机器上安装 oracle 客户端。我不能在项目中打包所需的 dll 并使其工作吗？如果即时 oracle 静默使其工作，我如何继续使用即时客户端。我目前唯一的希望是找到10g odp.net中是否有文件oracle.dataaccess.dll，使其与服务器中的oracle版本匹配，以使其工作。如果不是，我该如何使用 oracle 即时客户端？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:38:03.573

`Oracle Instant Client`如果您以推荐的方式使用 ODP.net，我不相信您至少可以在不安装在您的每台客户端机器上的情况下实现您想要的。您在问题中提到的链接是一个 hack，虽然它可能有效，但它不是 Oracle 推荐的使用方式。然而，话虽如此，如果你能让它发挥作用，那可能是你最好的短期情况。虽然我很害怕，但在那里我对你帮不上什么忙。

据我所知，`ODP.net`.NET3.5 的所有版本都是非托管的，需要安装 `Oracle Instant Client`它们才能工作。

我知道使用该非托管提供程序并在没有客户端安装的情况下仍使其工作的唯一方法是制作一个分层应用程序，其中您的 DAL 驻留在服务器上而不是客户端上，从而使您可以控制`Oracle Instant Client`仅在服务器上安装.

*注意：最近发布了一个托管的 ODP.net 提供程序，但 AFAIK 仅适用于 .NET 4.5（可能是 4，但绝对不适用于 .NET 3.5）*

# jquery - 如何使用 jQuery 生成本地 xml 文件

> ID：13017437
> 
> 赞同：0
> 
> 时间：2012-10-22T18:26:30.610
> 
> 标签：jquery, html, xml

我一直在寻找[这个](https://stackoverflow.com/questions/3191179/generate-xml-document-in-memory-with-javascript)例子，但无法让它工作。

当用户单击按钮时，我需要生成一个本地 XML 文件。

我需要创建一个像这样的 xml

```
<array>
        <dict>
            <key>files</key>
            <array>
                <dict>
                    <key>date</key>
                    <string>2012/09/09</string>
                    <key>name</key>
                    <string>acatBriefing.pdf</string>
                    <key>description</key>
                    <string>ACAT Briefing</string>
                </dict>
            </array>
            <key>subject</key>
            <string>FAE approved ACAT Designations</string>
            <key>presenter</key>
            <string>Rebecca T. King</string>
            <key>time</key>
            <string>2:00 - 2:05 PM</string>
        </dict>
</array> 
```

我试过类似的东西：

```
function generateXML(){
    // Simple helper function creates a new element from a name, so you don't have to add the brackets etc.
$.createElement = function(name)
{
    return $('<'+name+' />');
};

// JQ plugin appends a new element created from 'name' to each matched element.
$.fn.appendNewElement = function(name)
{
    this.each(function(i)
    {
        $(this).append('<'+name+' />');
    });
    return this;
}

/* xml root element - because html() does not include the root element and we want to
 * include <report /> in the output. There may be a better way to do this.
 */
var $root = $('<XMLDocument />');

$root.append
(
    // one method of adding a basic structure
 $('<plist />').append
    (
    $('<dict />').append
    (
        $('<key />').text('subject')
        $('<string />').text('September 21')
        $('<key />').text('date')
        $('<string />').text('FOB10 Room')
        $('<key />').text('time')
        $('<string />').text('2.00 pm - 5.00 pm')
        $('<key />').text('briefings')

        $('<array />').append
            (
                $('<dict />').append
                    (
                       $('<key />').text('files')
                       $('<array />').append
                            (
                            $('<dict />').append
                                (
                                  $('<key />').text('date')
                                 $('<string />').text('09/09/2012')
                                    $('<key />').text('name')
                                 $('<string />').text('acatBriefing.pdf')
                                 $('<key />').text('description')
                                   $('<string />').text('ACAT Briefing')
         )
        )
             $('<key />').text('subject')
             $('<string />').text('FAE approved ACAT Designations')
                $('<key />').text('presenter')
             $('<string />').text('Rebecca T. King')
             $('<key />').text('time')
               $('<string />').text('2.00 - 2.05 PM')

       )
      )
    )
   )
);

alert($root.html());
} 
```

我做不到，如何使用 jQuery 创建本地 XML 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:02:30.907

你的功能是正确的，你只是错过了一些逗号；

编辑代码：

```
 function generateXML(){
    // Simple helper function creates a new element from a name, so you don't have to add the brackets etc.
    $.createElement = function(name)
    {
        return $('<'+name+' />');
    };

    // JQ plugin appends a new element created from 'name' to each matched element.
    $.fn.appendNewElement = function(name)
    {
        this.each(function(i)
        {
            $(this).append('<'+name+' />');
        });
        return this;
    }

    /* xml root element - because html() does not include the root element and we want to
        * include <report /> in the output. There may be a better way to do this.
        */
    var $root = $('<XMLDocument />');

    $root.append
    (
    // one method of adding a basic structure
    $('<plist />').append(
    $('<dict />').append(
    $('<key />').text('subject'),
    $('<string />').text('September 21'),
    $('<key />').text('date'),
    $('<string />').text('FOB10 Room'),
    $('<key />').text('time'),
    $('<string />').text('2.00 pm - 5.00 pm'),
    $('<key />').text('briefings'),

    $('<array />').append
    (
    $('<dict />').append
    (
    $('<key />').text('files'),
    $('<array />').append
    (
    $('<dict />').append
    (
    $('<key />').text('date'),
    $('<string />').text('09/09/2012'),
    $('<key />').text('name'),
    $('<string />').text('acatBriefing.pdf'),
    $('<key />').text('description'),
    $('<string />').text('ACAT Briefing')
)
),
    $('<key />').text('subject'),
    $('<string />').text('FAE approved ACAT Designations'),
    $('<key />').text('presenter'),
    $('<string />').text('Rebecca T. King'),
    $('<key />').text('time'),
    $('<string />').text('2.00 - 2.05 PM')

)
)
)
)
);

    alert($root.html());
}
generateXML(); 
```

请注意`generateXML()`最后的我，以防你突然从任何地方收到警报

# nopcommerce - 如何从 nopCommerce 2.65 的主题中覆盖插件的视图？

> ID：13017439
> 
> 赞同：0
> 
> 时间：2012-10-22T18:26:36.550
> 
> 标签：nopcommerce

我想在 nopCommerce 2.65 中从我的自定义主题中覆盖位于 Nop.Plugin.Payments.Manual/Views/PaymentManual 中的视图。我的自定义主题位于 Nop.Web/Themes 并使用[HTML 到 nopCommerce 主题](https://stackoverflow.com/questions/12266717/html-to-nopcommerce-theme)中的信息开发。

这可能吗？或者更新插件视图的唯一方法是更新插件的源代码？

非常感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:15:01.563

我想你也许可以。该插件将在以下 4 个位置查找视图：

```
~/Themes/MyTheme/Views/PaymentManual/Nop.Plugin.Payments.Manual.Views.PaymentManual.PaymentInfo.cshtml
~/Themes/MyTheme/Views/PaymentManual/Nop.Plugin.Payments.Manual.Views.PaymentManual.PaymentInfo.vbhtml
~/Themes/MyTheme/Views/Shared/Nop.Plugin.Payments.Manual.Views.PaymentManual.PaymentInfo.cshtml
~/Themes/MyTheme/Views/Shared/Nop.Plugin.Payments.Manual.Views.PaymentManual.PaymentInfo.vbhtml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:03:41.343

不幸的是，插件的视图是嵌入式视图，如果不修改插件的源代码并重新编译它，就无法覆盖它们。

# asp.net-mvc-4 - 尝试将 required 添加到 jQuery 验证会破坏其他一切

> ID：13017441
> 
> 赞同：1
> 
> 时间：2012-10-22T18:26:50.737
> 
> 标签：asp.net-mvc-4, jquery-validate

我已经阅读了我能找到的所有其他 jQuery 验证问题，但没有任何帮助。我正在尝试做一些应该如此简单但不引人注目的验证让我想在我的所有四个显示器上打一个洞（嫉妒？）

我有一个形式为 a 的字段`select`，另一个是日期选择器。当Select占据一定值时，需要日期。对于所有其他选择值，日期是可选的。当页面第一次加载时，日期是可选的——也就是说，`Required`模型元数据中没有属性。

这是我的脚本块以及我需要帮助的漏洞：

```
<script type="text/javascript">
    function DateRequirement() {
        if ($("#StatusID").val() == 602) {
            $("#DateOfFirstCoverage").attr("data-val-required", "A date is required for current members.");
            // some kind of re-validating here?
        }
        else if ($("#DateOfFirstCoverage").attr("data-val-required") !== undefined) {
            $("#DateOfFirstCoverage").rules("remove", "required");
            // some kind of re-validating here?
        }
    }

    $("#StatusID").change(DateRequirement);
    $(document).ready(DateRequirement);
</script> 
```

仅供参考，我尝试了其他添加要求的方法，例如使用`.rules("add", { required: true })`，但仍然存在问题。这是我的问题清单：

1.  使用`.rules`添加必需的方法，我得到设置未定义的错误。很多 SO 答案都说你需要先重新验证表单，我试过了，除了虽然它消除了错误，但该字段仍然不是必需的。
2.  我现在拥有代码的方式，如上所示，成功地使该字段成为必填字段，但前提是它是在文档准备期间设置的。如果我在加载后更改选择框，它将永远不会成为必需的。
3.  最奇怪的问题，无论我尝试什么，任何暗示成功的东西都会破坏页面上的其余验证。我还有很多其他必填字段。如果我的`DateOfFirstCoverage`字段成功成为必填字段，并且我填写了它但删除了一个不同的必填字段，则该页面会愉快地提交而无需验证并抱怨其他字段。例如，如果我的片段的一部分看起来像这样，就会发生这种情况：

    ```
    if ($("#StatusID").val() == 602) {
        $("form").validate();
        $("#DateOfFirstCoverage").rules("add", { required: true });
    } 
    ```

那么，到底发生了什么？在不弄乱我的其他规则的情况下，完成我想要的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:02:54.013

想出了这个。正确答案可在其他一篇文章中找到 -[这一篇](https://stackoverflow.com/questions/4406291/jquery-validate-unobtrusive-not-working-with-dynamic-injected-elements)- 但我必须弄清楚如何使用它。最后的脚本块是这样的：

```
<script type="text/javascript">
    function DateRequirement() {
        $("form").removeData("validator").removeData("unobtrusiveValidation");
        $.validator.unobtrusive.parse("form");

        if ($("#StatusID").val() == 602) {
            $("#DateOfFirstCoverage").rules("add", { required: true, messages: { required: "A date is required for current members." } });
        }
        else {
            $("#DateOfFirstCoverage").rules("remove", "required");
            $("form").validate().element("#DateOfFirstCoverage");
            console.log("reset");
        }
    }

    $("#StatusID").change(DateRequirement);
    $(document).ready(DateRequirement);
</script> 
```

删除顶部的验证器可以确保不显眼的验证不会因为验证器已经连接而提前退出。这解决了我为什么其他字段没有验证的奇怪问题。然后通过要求不显眼的解析，总会有一个验证器，所以我可以使用正常的规则添加方法来获取所需的规则。

# eclipse - EClipse 中的断点

> ID：13017442
> 
> 赞同：0
> 
> 时间：2012-10-22T18:26:53.453
> 
> 标签：eclipse, debugging

我正在运行 EClipse Juno Java EE，我在我的一些方法上设置了一个断点，包括类中的方法和 Junit 类中的“之前”等方法。然后我运行我拥有的 JUnit，它通过了绿色但没有捕获我的任何断点。EClipse 中可能有哪些设置？我应该仔细检查以确保一切设置正确？它没有捕捉到我的断点。
PS：好的，我不想在“调试”视角，但现在我切换到“调试”视角，但仍然没有达到断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:02:08.630

啊发现了问题...我使用的是“运行方式”...但我应该使用“调试方式”。

# spring - 默认情况下将存储哪个位置（在 Windows 中）git 文件？

> ID：13017443
> 
> 赞同：0
> 
> 时间：2012-10-22T18:26:56.387
> 
> 标签：spring, github, gradle

我已经从 github 下载了 Spring Source，如下所示 git clone git://github.com/SpringSource/spring-framework.git

控制台消息如下：

```
$ git clone git://github.com/SpringSource/spring-framework.git
Cloning into 'spring-framework'...
remote: Counting objects: 115615, done.
remote: Compressing objects: 100% (36847/36847), done.
remote: Total 115615 (delta 62280), reused 114048 (delta 61512)
Receiving objects: 100% (115615/115615), 25.73 MiB | 254 KiB/s, done.
Resolving deltas: 100% (62280/62280), done.
Checking out files: 100% (6191/6191), done. 
```

现在这些文件将存储在哪个位置？（我使用的是 Windows Vista）我还需要运行 gradle build 和 gradle install （根据[https://github.com/SpringSource/spring-framework#building-from-source）.t](https://github.com/SpringSource/spring-framework#building-from-source).t)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:37:07.757

`git clone`接受两个参数，一个 repo 和一个克隆路径。如果没有指定路径，它会在当前目录中创建一个与 repo 同名的目录。因此，在您的情况下，这些文件将位于您运行命令的目录中名为**spring-framework的文件夹中。**

# jquery - fancybox next prev 或 goTo

> ID：13017445
> 
> 赞同：4
> 
> 时间：2012-10-22T18:27:08.837
> 
> 标签：jquery, fancybox, fancybox-2

有没有办法手动交换fancybox（v2）画廊上的图像？

就像是：

`$.fancybox.next()`,`$.fancybox.prev()`或`$.fancybox.goto(idx)`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:31:42.317

是的，您正在寻找`$.fancybox.next()`,`$.fancybox.prev()`和`$.fancybox.jumpto()`方法。

来自[Fancybox v2 文档](http://fancyapps.com/fancybox/#docs)：

下一个 ：

> $.fancybox.next()
> 
> 导航到下一个画廊项目

以前的 ：

> $.fancybox.prev()
> 
> 导航到上一个画廊项目

跳到 ：

> $.fancybox.jumpto( [索引] )
> 
> 按索引导航到画廊项目。项目计数从 0 开始，例如 $.fancybox.jumpto( 0 ); 将打开第一个，例如 $.fancybox.jumpto(1); 会第二个，等等

# c# - 在鼠标移动的地方画一条线

> ID：13017448
> 
> 赞同：3
> 
> 时间：2012-10-22T18:27:18.133
> 
> 标签：c#, xna, drawing, mouse, line

基本上，我想在鼠标移动的地方画一条线，就像在油漆中一样，但是，当我在 mousePos 上画一个点时，会发生这种情况：

![有时候是这样的](../Images/54db371b20ffa4391cfd99641c7166b5.png)

现在，我需要一些帮助把它变成一条线，没有间隙或任何奇怪的东西。感谢您的帮助。

我用来生成线条的代码（这不是图片中的代码！）

```
 protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();

        Line newLine = new Line(pixel, point1, point2, 2, Color.White);
        allLines.Add(newLine);

        foreach (Line lines in allLines) 
        {
            lines.Draw(spriteBatch);
        }

        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

和线对象：

```
 public class Line
{
    Texture2D texture;
    Vector2 point1, point2;
    float width;
    Color color;
    float angle, length;

    public Line(Texture2D texture, Vector2 point1, Vector2 point2, float width, Color color) 
    {
        this.texture = texture;
        this.point1 = point1;
        this.point2 = point2;
        this.width = width;
        this.color = color;
        angle = (float)Math.Atan2(point2.Y - point1.Y, point2.X - point1.X);
        length = Vector2.Distance(point1, point2);
    }

    public void Draw(SpriteBatch spriteBatch) 
    {
        spriteBatch.Draw(texture, point1, null, color, angle, Vector2.Zero, new Vector2(length, width), SpriteEffects.None, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:39:47.293

你想要做的是这样的（扩展pathfinder666的答案）：

```
private Point _lastPoint;

protected void MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)
{
    Graphics g = CreateGraphics();
    g.LineTo(_lastPoint.X, _lastPoint.Y, e.X, e.Y);
    _lastPoint = new Point(e.X, e.Y);
} 
```

现在请记住，这可能看起来有点参差不齐。您可能想要使用[DrawArc](http://msdn.microsoft.com/en-us/library/ms142028.aspx)来稍微平滑它。这取决于您最终要完成的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:20:46.397

当我需要根据鼠标移动绘制线条/路径时，我过去所做的是使用 Path 对象而不是线条。

这是一个 XAML/C# 示例。只需在 C# 中启动一个新的 XAML 项目，然后将其粘贴到默认的“MainWindow”中：

**MainWindow.xaml.cs：**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private PathFigure _pathFigure = new PathFigure();
    PathFigureCollection _pathCollection = new PathFigureCollection();
    PathSegmentCollection _segments = new PathSegmentCollection();
    private PathGeometry _pathGeometry = new PathGeometry();

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        _pathFigure.Segments = _segments;
        _pathCollection.Add(_pathFigure);
        _pathGeometry.Figures = _pathCollection;
        myPath.Data = _pathGeometry;
    }

    private void Window_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.LeftButton == MouseButtonState.Pressed)
        {
            LineSegment segment = new LineSegment();
            segment.Point = e.GetPosition(this);
            _pathFigure.Segments.Add(segment);

        }
    }

    private void Window_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        _pathFigure.StartPoint = e.GetPosition(this);
    }
} 
```

* * *

**MainWindow.xaml：**

```
<Window x:Class="TestPaths.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded" MouseMove="Window_MouseMove" MouseLeftButtonDown="Window_MouseLeftButtonDown">
    <Grid>
        <Path Stroke="Black" StrokeThickness="1" Name="myPath" />
    </Grid>
</Window> 
```

* * *

**输出**

![PathGeometry 示例中的 MainWindow](../Images/188df34381d46e0c18acf7b0e8545ad3.png)

此示例不会为您创建任何新路径，因此当您再次按下鼠标左键（到当前位置）时，行会跳转。添加功能以根据需要创建新路径将非常简单。

此示例确实消除了对新点进行滚动跟踪的需要，因为您的最后一个点始终在现有对象中可用。有关路径的更多信息，包括如何设置曲线等，请参阅[MSDN 上的 PathGeometry Docs](http://msdn.microsoft.com/en-us/library/system.windows.media.pathgeometry.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:33:17.207

您如何将最后一点保留在内存中并从最后一点画线到当前点。您可能必须平滑曲线以使其平滑且具有视觉吸引力。

# django - 在 Django 中预填充密码字段？

> ID：13017449
> 
> 赞同：10
> 
> 时间：2012-10-22T18:27:23.637
> 
> 标签：django, django-forms

有没有办法预先填充 Django 表单密码字段，以便在生成的`<input type="password">`html 元素中显示某些内容？

默认行为似乎是在`MyForm(initial = {'passfield':'something'})`设置时不显示任何内容。

我需要这个来实现用户编辑表单。我想显示一个随机字符串，如果用户不修改，我会知道他不想更改密码。所以我认为我正在尝试做的事情没有任何安全问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-22T18:58:59.817

似乎使用 render_value 参数不仅适用于[Django 文档](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#passwordinput)中列出的情况，而且可以使用：

```
class MyForm(forms.Form):
    password_field = forms.CharField(widget = forms.PasswordInput(render_value = True)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:47:19.960

根据[文档](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#passwordinput)，Django`PasswordField`不支持初始值。所以即使你通过它，它也不会渲染。

您可以对该字段进行子类化并制作自己的密码小部件，这将允许您这样做，或者您可以使用 HTML5 `placeholder`。HTML5 更安全，因为您可以向用户显示某些内容，但不能显示密码本身。

对于 HTML5 支持，您可以使用[https://github.com/adamcupial/django-html5-forms](https://github.com/adamcupial/django-html5-forms)。然后你可以做类似的事情（不是精确的语法，而是类似的东西）：

```
class FooForm(forms.Form):
    ...
    password = forms.PasswordField(..., placeholder="Your password here") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-29T18:46:15.483

我遇到了类似的情况，我做了以下事情：

```
class UserForm(forms.ModelForm):
    password1 = PasswordField(label="Password") 
```

在该字段`PasswordField`中`PasswordInput`，您需要`render_value = True`按照上面提到的默认设置`False`，然后在初始化期间`UserForm`我传递了密码的初始值。

```
UserForm(instance=user, initial={'password1': settings.dummy_password}) 
```

现在这个初始值是在设置文件中预定义的，如果密码被更改，我会比较它然后更新密码，否则保持原样。

# php - 我的代码中的未知修饰符

> ID：13017451
> 
> 赞同：1
> 
> 时间：2012-10-22T18:27:34.313
> 
> 标签：php, modifier

```
<? php
    $Src = 'images/pages/clients/logos/clnt_aljareera_img.jpg';
    $pttn= '/&Src:'.$Src.'/';
    $string=preg_replace($pttn,'',$string,1);
?> 
```

//输出错误：未知修饰符'p' in

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:28:38.850

您的字符串包含一团乱麻，当用作正则表达式分隔符时`/`，需要对其进行转义。而不是作为正则表达式分隔符，使用不会出现在您的字符串中的东西，例如。但是，您*必须选择一个保证**不会*出现在 中的分隔符。即使 with 也可能比 with更安​​全。`\/``/``/``~`**`$Src``|``~`**

 **```
$Src = 'images/pages/clients/logos/clnt_aljareera_img.jpg';
// Delimit the regular expression with ~
$pttn= '~&Src:'.$Src.'~';
$string=preg_replace($pttn,'',$string,1); 
```

`/`发生的事情是你的正则表达式被a分隔，`p`因为`images/`它认为它已经到达了结束分隔符。下一个单词`pages`被错误地视为一串正则表达式修饰符。

PHP 看到正则表达式：

```
/&src:images/pages 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T18:28:40.240

删除打开的 php-tag 中的空格。**

# java - wacom 设备 java sdk

> ID：13017453
> 
> 赞同：0
> 
> 时间：2012-10-22T18:27:34.360
> 
> 标签：java, sdk, tablet-pc, wacom

我有 Wacom 设备 STU 500 。我在一个项目模块上工作，用于签署 pdf 文件。我没有找到任何 Java SDK-API 来查询设备。有没有一种优雅的方法可以从 java 代码中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T07:55:54.153

如前文所述，请联系您所在地区的 Wacom 办事处以获取 SDK。他们会通过电子邮件向您发送“ *SDK 批准表*”，您必须在其中填写某些详细信息。一旦他们验证了文档以及您的凭据，他们就会向您发送一个下载 SDK 的链接。

请注意，有两种类型的 SDK。它们被Wacom称为“*低级*”SDK 和“*签名”SDK。*' *Low-Level* ' SDK 是免费的，其他的不是。除非您需要生物识别/取证/安全/验证和其他需要选择“*签名*”SDK 的功能，否则“*低级*”SDK 就足够了。

 *由于您特别要求对 PDF 文件进行签名，请查看[Wacom 的“签名 | 签名”。Pro PDF' SDK](http://signature.wacom.eu/products/software/sign-i-pro-pdf) .

这是一个迟到的回复，但我希望它可以帮助您或其他使用 Wacom 的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:30:10.080

您必须直接询问 Wacom 以获得现有的 SDK。

来自 Wacom 常见问题解答：

> 3.23\. 如何对 STU-300、STU-500 或 STU-520 Signature (signpad) 平板电脑进行编程？您可以联系您所在地区的 Wacom 客户服务中心，获取 STU-300、STU-500 或 STU-520 SDK 以使用 C++、C# 或 Java 进行编程。

[http://www.wacom.com/en/CustomerCare/HelpRequest/ContactTechnicalSupport.aspx](http://www.wacom.com/en/CustomerCare/HelpRequest/ContactTechnicalSupport.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:08:25.323

您可以在此处找到更多信息：http: [//signature.wacom.eu/products/software/signature-sdk](http://signature.wacom.eu/products/software/signature-sdk)。有一个联系表格，您可以在其中索取 SDK。*

# curl - 提高卷曲性能

> ID：13017457
> 
> 赞同：2
> 
> 时间：2012-10-22T18:28:08.290
> 
> 标签：curl

我正在使用其他人编写的类来尝试连接到不是我的网站，它类似于[http://www.futhead.com](http://www.futhead.com)，您可以在其中使用 EA JSON 文件搜索玩家等。

然而，页面和脚本工作，但每次加载需要 4/5 秒。

我认为这可能是由于使用了 curl，我在这里寻找了一些答案，但没有一个真正改善任何东西。还有其他提高速度的方法吗？

```
$ch = curl_init($login);                                                                    
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_HEADER, true);                
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
'Content-Type: application/x-www-form-urlencoded',                                                                                
    'Content-Length: ' . strlen($data_string))                                                                       
);                                                                                                                   
$response = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:14:23.170

您可以尝试减少运行该 curl 请求的频率。如果每次点击页面时都会发生这种情况，那可能太频繁了。

您可以在您的服务器中放置更多的内存和内核，并且您可以获得更好的 ISP。

关于您的 github 代码....问答格式实际上不应该用于开放的“修复我的代码”类型的问题。在我看来，您有很多时间消耗来源，并且可能涉及您的代码......但主要是网络的东西。对于让 curl 运行得更快（除了获得更好的连接性），我没有一个好的答案。

**编辑：发问者已尝试提高他的服务器性能：**

是时候承认你需要重构了。我确实阅读了您的连接，并且在您的`Connector`类函数`connect()`中，您进行了四个连续的 curl 操作。每次，您都故意（但必须？）关闭卷曲手柄。你每次都和同一个服务器说话，对吧？

您需要大量更改代码。它发生在我们最好的人身上。

# iphone - 无法让 UIMapView “缩放”/setRegion：第一次加载地图时

> ID：13017461
> 
> 赞同：4
> 
> 时间：2012-10-22T18:28:32.597
> 
> 标签：iphone, ios, mkmapview, mapkit

我有一个`UIViewController`加载地图，上面已经有一堆图钉。让图钉出现没有问题，但是`MKMapView`当用户第一次到达 mapView 时，我似乎无法执行 setRegion。我已经尝试将代码放入所有可行的方法中，`viewDidLoad`, `viewWillLoad`, `mapViewWillStartLoadingMap`,`mapViewDidFinishLoadingMap`等，但无济于事。

然而，如果我返回前一个 viewController 然后再次进入包含 mapView 的 viewContoller，它将“缩放”到指定区域。

有没有我不知道的超级秘密方法？不应该调用`[mapView setRegion:(...) animated:YES];`足以让地图“缩放”/更新以显示所选区域吗？

另外，如果有人知道如何让图钉（我用`MKPointAnnotation`的是我的）来动画下降以及让地图动画放大，（虽然我都设置为动画......） ，我也会很感激这些信息。

谢谢！

**代码：**

```
@implementation FindOnMapMapView
@synthesize mapView;
@synthesize mapViewTabBarItem;
@synthesize results;
@synthesize reverseGeocoder;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

        MKCoordinateRegion mapRegion = MKCoordinateRegionMake(CLLocationCoordinate2DMake([defaults doubleForKey:@"latitude"], [defaults doubleForKey:@"longitude"]), MKCoordinateSpanMake(0.744494189288569, 0.744494189288569));

        mapView.region = mapRegion;
        [mapView setRegion:mapRegion animated:YES];

NSMutableArray *annotations = [[NSMutableArray alloc] init];
        for(ThePlace *place in results)
        {
            MKPointAnnotation *addAnnotation = [[MKPointAnnotation alloc] init];

            [addAnnotation setCoordinate:CLLocationCoordinate2DMake(place.latitude, place.longitude)];

            addAnnotation.title = place.placename;
            addAnnotation.subtitle = [NSString stringWithFormat:@"Distance: %@", place.distance];

            [mapView addAnnotation:addAnnotation];

        }

        [self.mapView addAnnotations:annotations ];
    }

    - (void)viewWillAppear:(BOOL)animated
    {
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

        MKCoordinateRegion mapRegion = MKCoordinateRegionMake(CLLocationCoordinate2DMake([defaults doubleForKey:@"latitude"], [defaults doubleForKey:@"longitude"]), MKCoordinateSpanMake(0.744494189288569, 0.744494189288569));
        NSLog(@"Region Coords are: Latitude:%f, Longitude:%f", [defaults doubleForKey:@"latitude"], [defaults doubleForKey:@"longitude"]);
        mapView.region = mapRegion;
        [mapView setRegion:mapRegion animated:YES];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:28:53.090

```
- (void) viewDidAppear:(BOOL)animated {
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(firstPoint.coordinate, 2000, 2000);
    [mapView setRegion:region animated:YES];
} 
```

这对我有用。

# android - 响应 Android 上的物理后退按钮

> ID：13017466
> 
> 赞同：2
> 
> 时间：2012-10-22T18:28:39.037
> 
> 标签：android, back

> **可能重复：**
> [android中是否有默认的后退键（在设备上）监听器？](https://stackoverflow.com/questions/2592037/is-there-a-default-back-keyon-device-listener-in-android)

如何响应我的 Android 应用程序中的物理后退按钮？就像一个听众。

我想在按下那个按钮时做一些事情！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:33:18.733

如果我理解您的问题，只需[`onBackPressed()`](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)在您的 Activity for API 5+ 中覆盖即可。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:32:25.797

您可以使用以下代码：

```
@Override
public boolean onKeyDown( int keyCode, KeyEvent event )  {
    if ( keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0 ) {
        // do something on back.
        return true;
    }

    return super.onKeyDown( keyCode, event );
} 
```

[您可以在Android 开发者博客](http://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html)上找到更多信息。

# sql - 在“SQL Server 维护”计划结束后如何运行程序或 PowerShell 脚本？

> ID：13017473
> 
> 赞同：3
> 
> 时间：2012-10-22T18:28:57.843
> 
> 标签：sql, sql-server, powershell, maintenance-plan

在我的维护计划对我的数据库做了一些工作之后，我需要执行/启动一个 PowerShell 脚本。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:39:26.197

您可以`PowerShell`在`SQL Server 2008/2008r2/2012 Agent`. 在 SQL Server Management Studio 中创建一个 SQL 作业并选择一个`PowerShell job step`指定 PowerShell 脚本的完整路径。然后在维护计划结束时将作业添加为“ `Execute SQL Server Agent Job Task`”

# php - 带有 NET ValidateRequest 错误的 PHP 站点

> ID：13017475
> 
> 赞同：0
> 
> 时间：2012-10-22T18:29:08.213
> 
> 标签：php, pci-dss, pci-compliance

我有一个 PHP 站点在 PCI 合规性上失败，我得到的唯一错误是

**Microsoft ASP.NET ValidateRequest 过滤器绕过跨站点脚本漏洞**

这是 IIS 上的 PHP 站点。我该怎么做才能使这个网站通过 PCI 测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:16:22.550

这取决于您的扫描供应商是如何检测到这一点的，以及您可能在代码中采取了哪些其他措施来阻止 XSS。如果他们只是查看您的 .net 版本，并且您有可以处理跨站点脚本的代码，那么您可以将其作为误报报告给您的扫描供应商。如果您没有阻止 XSS 的代码，最好的选择可能是更新到 .NET 版本 4。

[https://community.quallys.com/docs/DOC-3495](https://community.qualys.com/docs/DOC-3495)

# java - 如何在 JSP 页面中连接到 MySQL：java.sql.SQLException: Access denied for user 'root'@'localhost'

> ID：13017476
> 
> 赞同：1
> 
> 时间：2012-10-22T18:29:08.070
> 
> 标签：java, mysql, jsp

我正在尝试将 JSP 连接到数据库而不执行任何 DDL 或 DML 命令。

这是我的 JSP：

```
 <%@ page import="java.sql.*" %> 
 <%@ page import="java.io.*" %> 
 <html> <head> <title>Connection with mysql database</title>
 </head> 
 <body>
 <h1>Connection status</h1>
 <% 
 try {
 String connectionURL = "jdbc:mysql://localhost:3306/bharath"; 
 Connection connection = null; 
 Class.forName("com.mysql.jdbc.Driver").newInstance(); 
 connection = DriverManager.getConnection(connectionURL, "root", "root");
 if(!connection.isClosed())
 %>
 <font size="+3" color="green"></b>
 <% 
 out.println("Successfully connected to " + "MySQL server using TCP/IP...");
 connection.close();
 }
 catch(Exception ex){
 %></font>
 <font size="+3" color="red"></b>
 <%
 out.println("Unable to connect to database.");
 } 
 %>
 </font></body> </html> 
```

catch 块中的异常被执行。那么 try 块中可能出了什么问题。我使用默认设置安装了 MySql，用户为`"root"`，数据库名称为`"bharath"`.

```
 Exception - 
 java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919) at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694) at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1244) at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2412) at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445) at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:03:26.717

代替

```
out.println("Unable to connect to database."); 
```

你应该写

```
ex.printStackTrace(new java.io.PrintWriter(out)); 
```

将指出您的主要问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:42:16.033

对司机没有要求`newInstance()`。它应该刚刚加载。

把. `mysql-connector-java-x.x.x-bin.jar`_ `WEB-INF\lib`您在连接中提供的凭据应该可以正常工作。如果它不工作，或者连接 url 中的数据库名称错误，或者端口错误，或者主机错误。

还有更好的机会从池中获得连接。查看[连接池](http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-j2ee-concepts-connection-pooling.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:24:16.837

请确保在类路径中添加了“com.mysql.jdbc.Driver”的 jar。

# jquery - 未定义的视图模型 ID

> ID：13017483
> 
> 赞同：0
> 
> 时间：2012-10-22T18:29:21.460
> 
> 标签：jquery, jquery-mobile, knockout.js

我有一个视图模型：

```
var teamViewModel = {
        teams: ko.observableArray([]),
        selectedTeam: ko.observable(1),
        clearTeams: function(){
            this.teams.removeAll();
        },
        addTeam: function (id, name, isChecked) {
            t = new team(id, name, isChecked);
            this.teams.push(t);
        }
    }; 
```

我希望将 selectedTeam().id 初始化为 1，但是每次在页面加载时调用引用`teamViewModel.selectedTeam().id`该值的函数时，都会返回未定义的值。

如何在调用函数之前将此值初始化为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:44:32.097

`selectedTeam`您应该使用以下新实例进行初始化`team`：

```
selectedTeam: ko.observable(new team(1, "", false)) 
```

# c - 如何检查我的线程是否运行了 5 秒？

> ID：13017485
> 
> 赞同：0
> 
> 时间：2012-10-22T18:29:27.057
> 
> 标签：c, operating-system, pthreads

我的代码中有两个 pthread 正在运行。它们同时运行`usleep()`，我想同时运行它们 5 秒。

如何检查我的线程是否运行了 5 秒，以便在 5 秒后终止线程？

# soap - 谁能告诉我如何访问我解析的 xml 对象

> ID：13017486
> 
> 赞同：0
> 
> 时间：2012-10-22T18:29:34.610
> 
> 标签：soap, xml-namespaces

我有这个解析的对象 $xmlObj = new SimpleXMLElement($XMLToParse, LIBXML_DOTTED_VERSION, FALSE, "http://SOME/schema/universal_v17_0");

里面有这样的结构

```
 <universal:UniversalR LocatorCode="somecode" Version="2" Status="Active">

<common_v17_0:Book Key="some" TravelerType="some"> 
```

所以我可以像这样访问第一个元素（它的属性） $VariableX=$xmlObj->UniversalR->attributes();//然后 $VariableX["Status"]; 但是当我想访问他的孩子时，我无法 $tm=$xmlObj->UniversalR->Book->attributes(); 它不想进入可能是因为不同的命名空间......任何人都可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:36:34.953

`$tm=$xmlObj->UniversalRecord->Book->attributes();`这个错字（UniversalRecord 而不是 UniversalR）是否仅出现在这篇文章中，还是也出现在您的代码中？（我很想把它作为评论发布..但看起来我不允许这样做，或者我太笨了找不到按钮。:/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:53:30.787

我在这里找到了一些东西[http://blog.sherifmansour.com/?p=302](http://blog.sherifmansour.com/?p=302)

```
 foreach ($xmlObj->UniversalRecord as $entry){

      $namespaces = $entry->getNameSpaces(true);

       $cmm = $entry->->children($namespaces['common_v17_0']); 
    $aa=$cmm->Book->attributes();
    echo $aa["TravelerType"]."ddddd";

} 
```

应该这样做:)

# javascript - 修改 Raphael 的现有路径？

> ID：13017490
> 
> 赞同：0
> 
> 时间：2012-10-22T18:30:08.493
> 
> 标签：javascript, map, svg, raphael, coordinates

我有一个 JS 对象，Raphael 使用它来生成可点击的 SVG 地图。我需要修改一些路径。有没有一种工具可以让我以**用户友好的**方式做到这一点？我不想使用试错法来摆弄数字，我想拖放路径/锚点。我可以以某种方式将坐标导入 Illustrator/Dreamweaver/任何其他工具吗？

谢谢你。

下面是 JS 对象的样子：

```
map.coords   = [
{ type:"path" ,id:"K15" ,d:"/*edited out*/"},
{ type:"rect" ,id:"K14" ,x:"496" ,y:"386" ,width:"9" ,height:"5"}
]; 
```

下面是标记的样子（`svg`元素内有 Raphael 生成的标记）：

```
<div style="position: relative;">
    <div id="mapOverlay" style="position: absolute; top: 0; left: 0; z-index: 2">
    <svg height="777" width="777" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <desc>Created with Raphaël</desc>
        <defs></defs>
        <path fill-opacity="0" stroke-width="0.25" style="stroke-width: 0.25; fill-opacity: 0;" d="[/*edited out*/]" stroke="#000000" fill="#000000"></path>
    </svg>
    </div>
<img src="map.jpg" alt="Interactive Map">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:26:06.113

虽然凯文尼尔森对这个问题的评论是一种完全可行的方法，但在等待的时候，我想出了如何在 Illustrator 中做到这一点。就是这样：

1.  抽出`<svg>`标签的全部内容并将其另存为单独的文件
2.  将此添加到文件的开头：

    <?xml version="1.0" encoding="utf-8"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG /1.1/DTD/svg11.dtd">

3.  在 Illustrator 文件中 -> 打开。如果它没有打开，您可以通过[W3 验证器](http://validator.w3.org/)运行它以查看它有什么问题。确保在设置中将 SVG 1.1 指定为文档类型。

4.  然后，您可以使用 Illustrator 中的 File -> Place 命令叠加任何图像（最好是相同尺寸）。

# python - Python 3：将范围存储在要在函数中使用的列表中？

> ID：13017496
> 
> 赞同：0
> 
> 时间：2012-10-22T18:30:24.237
> 
> 标签：python, list, function, python-3.x, range

我需要创建每个数字的列表，直到一个非常大的特定数字。然后，这个数字列表需要通过我创建的一个函数，该函数将吐出每个返回 True 的数字。从所有这些真实数字中，我需要抓住第 300 个并打印出来。

```
def p(n):
  return n==n[::-1]
def s(n):
  return list(filter(p ,n)) 
```

这是列表将通过的功能。提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:43:31.210

如果我理解正确，您可以使用生成器和`islice`

```
from itertools import islice

nums = map(str, range(11, 300))
palindromes = (num for num in nums if num == num[::-1])
ix = islice(palindromes, 15, None)
print(next(ix)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:32:10.007

```
>>> list(range(10))
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

请注意，这听起来很慢，您可能可以优化很多。例如，您的回文检查 ( `p(n)`) 可以更改为仅将列表的前半部分与反转的后半部分进行比较。或者实际上从开头和顶部同时遍历元素，并在失败时立即返回 false：

```
def checkPalindrome (seq):
    for i in range(len(seq)):
        if seq[i] != seq[-i-1]:
            return False
    return True 
```

# java - Go 中是否有相当于 Java 的 String 实习生函数？

> ID：13017499
> 
> 赞同：3
> 
> 时间：2012-10-22T18:30:43.550
> 
> 标签：java, string, go

Go 中是否有相当于 Java 的 String 实习生函数？

我正在解析大量具有重复模式（标签）的文本输入。我想提高内存效率，并为每个标签存储指向单个字符串的指针，而不是为每次出现的标签存储多个字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:47:44.813

据我所知，不存在这样的功能。但是，您可以使用地图非常轻松地制作自己的地图。字符串类型本身是一个 uintptr 和一个长度。因此，从另一个字符串分配的字符串只占用两个单词。因此，您需要做的就是确保没有两个具有冗余内容的字符串。

这是我的意思的一个例子。

```
type Interner map[string]string

func NewInterner() Interner {
    return Interner(make(map[string]string))
}

func (m Interner) Intern(s string) string {
    if ret, ok := m[s]; ok {
        return ret
    }

    m[s] = s
    return s
} 
```

每当您执行以下操作时，此代码都会对冗余字符串进行重复数据删除：

```
str = interner.Intern(str) 
```

**编辑**：正如 jnml 提到的，我的答案可以根据给出的字符串固定内存。有两种方法可以解决这个问题。`m[s] = s`在我之前的示例中，这两个都应该在之前插入。第一个复制字符串两次，第二个使用不安全。两者都不理想。

双副本：

```
b := []byte(s)
s = string(b) 
```

不安全（使用风险自负。适用于当前版本的 gc 编译器）：

```
b := []byte(s)
s = *(*string)(unsafe.Pointer(&b)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:00:38.570

我认为例如[Pool](http://go.pkgdoc.org/github.com/cznic/strutil#Pool)和[GoPool](http://go.pkgdoc.org/github.com/cznic/strutil#GoPool)可能会满足您的需求。该代码解决了斯蒂芬的解决方案忽略的一件事。在 Go 中，字符串值可能是更大字符串的一部分。场景是无关紧要的，而场景则是表演的终结者。链接的功能试图在安全方面。

# ruby - Ruby - 将数组映射到哈希图

> ID：13017501
> 
> 赞同：80
> 
> 时间：2012-10-22T18:30:48.560
> 
> 标签：ruby, hashmap

我有一个数组和一个返回给定值的值的函数。最终，我想创建一个哈希图，其中数组的值作为键值，f(key_value) 的结果作为值。有没有一种干净、简单的方法，比如类似于数组的每个/映射，使用块来做到这一点？

所以相当于

```
hsh = {}
[1,2,3,4].each do |x|
  hsh[x] = f(x)
end 
```

但看起来与此更相似，因为它很简单而且只有一条线？

```
results = array.map { | x | f(x) } 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2015-06-17T09:29:53.783

请注意，从 Ruby 2.1.0 开始，您还可以使用[Array#to_h](http://ruby-doc.org/core-2.1.0/Array.html#method-i-to_h)，如下所示：

```
[1,2,3,4].map{ |x| [x, f(x)] }.to_h 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2019-01-03T13:15:55.727

Ruby 2.6.0 允许[将块传递给`to_h`-method](https://rubyreferences.github.io/rubychanges/2.6.html#to_h-with-a-block)。这使得从数组创建哈希的语法更短：

```
[1, 2, 3, 4].to_h { |x| [x, f(x)] } 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-10-22T18:38:00.737

您还可以将函数定义为哈希的默认值：

```
hash = Hash.new {|hash, key| hash[key] = f(key) } 
```

然后，当您查找一个值时，哈希将即时计算并存储它。

```
hash[10]
hash.inspect #=> { 10 => whatever_the_result_is } 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2012-10-22T18:32:53.557

你需要`each_with_object`.

```
def f x
  x * 2
end

t = [1, 2, 3, 4].each_with_object({}) do |x, memo|
  memo[x] = f(x)
end

t # => {1=>2, 2=>4, 3=>6, 4=>8} 
```

另一个：

```
t2 = [1, 2, 3, 4].map{|x| [x, f(x)]}
Hash[t2] # => {1=>2, 2=>4, 3=>6, 4=>8} 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-10-22T18:35:35.593

查看[Hash::[]](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)方法。

```
Hash[ [1,2,3,4].collect { |x| [x, f(x)] } ] 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-10-22T19:12:42.500

使用 Facets 的[mash](http://rdoc.info/github/rubyworks/facets/master/Enumerable#graph-instance_method)（将可枚举转换为哈希的方法）：

```
[1, 2, 3, 4].mash { |x| [x, f(x)] } 
```

从 Ruby 2.1 开始：

```
[1, 2, 3, 4].map { |x| [x, f(x)] }.to_h 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-14T10:59:12.967

您正在寻找[`reduce()|inject()`方法](https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-reduce)：

```
elem = [1,2,3,4]
h = elem.reduce({}) do |res, x|
  res[x] = x**2
  res
end

puts h 
```

传递给的参数是作为变量`reduce({})`传递给块的中间对象的初始值。`res`在每次迭代中，我们将新对添加`key: value`到`res`Hash 并返回 Hash 以在下一次迭代中使用。

上面的方法预先计算了一个非常实用的平方值散列：

```
{1=>1, 2=>4, 3=>9, 4=>16} 
```

# install4j - 如何在 install4j 中以另一个用户身份运行安装任务？

> ID：13017506
> 
> 赞同：1
> 
> 时间：2012-10-22T18:31:02.193
> 
> 标签：install4j

我的安装程序需要以 root 身份运行，并且需要以另一个用户身份启动一些进程。这似乎是许多安装构建者需要的任务。在 install4j 中最好的方法是什么？我没有看到涵盖它的操作，当我尝试在“运行可执行文件或批处理文件”任务中将“su”包裹在命令周围时，它似乎无法运行像 su 这样的 shell 内置命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:50:34.650

`su`不是内置的shell。您必须在“Executable”属性中指定 su 的绝对路径：

```
/bin/su 
```

然后，要使用参数“argument”作为用户“guest”调用“actualExecutable”，请将“运行可执行文件或批处理文件”操作的“Arguments”属性设置为

```
guest;-c;actualExecutable;argument 
```

# r - 根据两列查找唯一组合并计算平均值

> ID：13017511
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:31:25.430
> 
> 标签：r, unique, dataframe

我在 R 中有一个问题，我似乎无法解决。

我有以下数据框：

[图 1](https://docs.google.com/open?id=0B_v_3frEDiceRkppWHhaOUM4LTA)

我想：

1.  查找“物种”和“效果”列的独特组合
2.  报告属于这个独特组合的浓度
3.  如果这种独特的组合出现不止一次，计算**平均**浓度

并希望获得以下数据框：

[图 2](https://docs.google.com/open?id=0B_v_3frEDiced3dpZ1p0ZG1JWWs)

我尝试了下一个脚本来获得独特的组合：

UniqueCombinations <- Data[!duplicated(Data[,1:2]),]

但不知道如何从那里开始。

提前感谢您的回答！

蒂娜

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T18:45:22.250

创建一些示例数据：

```
dat <- data.frame(Species = rep.int(LETTERS[1:4], c(4, 1, 3, 2)),
                  Effect = c(rep("Reproduction", 3), "Growth", "Growth",
                             "Reproduction", "Mortality", "Mortality",
                             "Growth", "Growth"),
                  Concentration = rnorm(10)) 
```

您可以使用以下功能`aggregate`：

```
aggregate(Concentration ~ Species + Effect, dat, mean) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T18:45:43.547

尝试以下方法（感谢 Brandon Bertelsen 的好评）：

创建数据：

```
foo = data.frame(Species=c(rep("A",4),"B",rep("C",3),"D","D"), 
                 Effect=c(rep("Reproduction",3), rep("Growth",2),
                          "Reproduction", rep("Mortality",2), rep("Growth",2)), 
                 Concentration=c(1.2,1.4,1.3,1.5,1.6,1.2,1.1,1,1.3,1.4)) 
```

使用很棒的包`plyr`来获得一点魔法:)

```
library(plyr)
ddply(foo, .(Species,Effect), function(x) mean(x[,"Concentration"])) 
```

这是一个更复杂但更简洁的版本（再次感谢 Brandon Bertelsen）：

```
ddply(foo, .(Species,Effect), summarize, mean=mean(Concentration)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T19:46:06.850

在我结束之前只是为了好玩......假设你`data.frame`被称为“dat”，这里还有两个选择：

1.  一个`data.table`解决方案。

    ```
    library(data.table)
    datDT <- data.table(dat, key="Species,Effect")
    datDT[, list(Concentration = mean(Concentration)), by = key(datDT)]
    #    Species       Effect Concentration
    # 1:       A       Growth          1.50
    # 2:       A Reproduction          1.30
    # 3:       B       Growth          1.60
    # 4:       C    Mortality          1.05
    # 5:       C Reproduction          1.20
    # 6:       D       Growth          1.35 
    ```

2.  一个`sqldf`解决方案。

    ```
    library(sqldf)
    sqldf("select Species, Effect,
          avg(Concentration) `Concentration`
          from dat
          group by Species, Effect")
    #   Species       Effect Concentration
    # 1       A       Growth          1.50
    # 2       A Reproduction          1.30
    # 3       B       Growth          1.60
    # 4       C    Mortality          1.05
    # 5       C Reproduction          1.20
    # 6       D       Growth          1.35 
    ```

# c# - 如何将参数从@Url.Action 传递给控制器 函数

> ID：13017513
> 
> 赞同：72
> 
> 时间：2012-10-22T18:31:30.873
> 
> 标签：c#, asp.net-mvc

我有一个函数`CreatePerson(int id)`，我想`id`从`@Url.Action`.

下面是参考代码：

```
public ActionResult CreatePerson(int id) //controller 
window.location.href = "@Url.Action("CreatePerson", "Person") + id"; 
```

上面的代码无法将`id`值传递给`CreatePerson`函数。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-10-22T18:33:26.170

你可以这样传递：

```
Url.Action("CreatePerson", "Person", new RouteValueDictionary(new { id = id })); 
```

OR也可以通过这种方式

```
Url.Action("CreatePerson", "Person", new { id = id }); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-10-27T15:04:37.383

```
public ActionResult CreatePerson (string id)

window.location.href = '@Url.Action("CreatePerson", "Person" , new {id = "ID"})'.replace("ID",id);

public ActionResult CreatePerson (int id)

window.location.href = '@Url.Action("CreatePerson", "Person" , new {id = "ID"})'.replace("ID", parseInt(id)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-16T15:43:13.843

```
public ActionResult CreatePerson(int id) //controller 

window.location.href = '@Url.Action("CreatePerson", "Person")?id=' + id; 
```

或者

```
var id = 'some value';
window.location.href = '@Url.Action("CreatePerson", "Person", new {id = id})'; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-11T10:06:53.687

尝试这个：

```
public ActionResult CreatePerson(int id) //controller 

window.location.href = "@Url.Action("CreatePerson", "Person")?Id='+Id+'"; 
```

它工作正常传递参数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-12T07:53:16.377

这种将值从控制器传递到视图的方式：

```
ViewData["ID"] = _obj.ID; 
```

这是将值从 View 传递回 Controller 的方法：

```
<input type="button" title="Next" value="Next Step" onclick="location.href='@Url.Action("CreatePerson", "Person", new { ID = ViewData["ID"] })'" /> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-23T06:07:25.293

需要两个或更多参数将视图传递给控制器​​使用此语法...尝试..它。

```
var id=0,Num=254;var str='Sample';    
var Url = '@Url.Action("ViewNameAtController", "Controller", new RouteValueDictionary(new { id= "id", Num= "Num", Str= "str" }))'.replace("id", encodeURIComponent(id));
    Url = Url.replace("Num", encodeURIComponent(Num));
    Url = Url.replace("Str", encodeURIComponent(str));
    Url = Url.replace(/&amp;/g, "&");
window.location.href = Url; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-19T05:04:11.687

尝试这个

```
public ActionResult CreatePerson(string Enc)

 window.location = '@Url.Action("CreatePerson", "Person", new { Enc = "id", actionType = "Disable" })'.replace("id", id).replace("&amp;", "&"); 
```

您将在 Enc 字符串中获得 id。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-06T18:35:44.020

你应该以这种方式传递它：

```
public ActionResult CreatePerson(int id) //controller 
window.location.href = "@Url.Action("CreatePerson", "Person",new { @id = 1}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-14T05:41:26.370

如果您`Url.Action`在 JavaScript 内部使用，那么您可以

```
var personId="someId";
$.ajax({
  type: 'POST',
  url: '@Url.Action("CreatePerson", "Person")',
  dataType: 'html',
  data: ({
  //insert your parameters to pass to controller
    id: personId 
  }),
  success: function() {
    alert("Successfully posted!");
  }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-06T12:21:03.730

```
@Url.Action("Survey", "Applications", new { applicationid = @Model.ApplicationID }, protocol: Request.Url.Scheme) 
```

# php - PHP 没有正确执行 bash 脚本

> ID：13017514
> 
> 赞同：0
> 
> 时间：2012-10-22T18:31:40.070
> 
> 标签：php, macos, bash, applescript, osascript

我正在创建一个简单的网页，允许用户在基本的 php 页面上选择一个选项，单击提交，然后后端 PHP 应该执行一个 bash 脚本，该脚本将执行一些 AppleScript。

我可以从终端运行 bash 脚本，它可以很好地运行 Applescript 文件，`osascript`但是当我尝试从 php 执行 bash 脚本时，它会运行 echo 命令，但不会执行该`osascript`行。我想这是一个权限问题，但我将所有内容更改为完全权限使用`chmod 777`（诚然不是最好的主意，但除此之外）

有什么我想念的吗？奇怪的是，它似乎完全跳过了这`osascript`条线。有什么建议么？提前致谢！

**代码：**

**PHP**

```
<?php
if (isset($_POST['submit'])) {
    $username =  $_POST['username'];
    if (strcasecmp($username, 'user1') == 0) {
        echo 'test1';
    } else if (strcasecmp($username, 'user2') == 0) {
        echo 'test2';
    } else if (strcasecmp($username, 'user3') == 0) {
        echo 'test3';
    } else if (strcasecmp($username, 'user4') == 0) {
        shell_exec('cd ~/Sites;./a.out');
    }
}
?> 
```

**重击**

```
#!/bin/bash
echo "test String"
cd /Users/Zimmerman/Library/Scripts
osascript /Users/Zimmerman/Library/Scripts/testscript.scpt
echo "test String" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:43:31.357

您的 apache $PATH 变量可能不在`/usr/bin/`. 如果您`shell_exec('which osascript');`在 PHP 文件中回显，您可能看不到任何内容，但您会在终端上看到结果。

您可以将路径添加到您的网络服务器 $PATH 变量，或者您可以尝试使用`/usr/bin/osascript`脚本上可执行文件的完整路径。

# optimization - FPL 中的尾调用优化如何在装配级别实现？

> ID：13017516
> 
> 赞同：3
> 
> 时间：2012-10-22T18:31:41.967
> 
> 标签：optimization, assembly, lisp, tail-recursion, ml

LISP 或 ML 如何实现尾调用优化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:01:45.930

我不能谈论不同编译器/解释器的确切实现细节，但是一般来说尾调用优化是这样操作的：

通常，函数调用涉及以下内容：

1.  为返回分配堆栈空间
2.  将当前指令指针压入堆栈
3.  为函数参数分配堆栈空间并适当设置它们
4.  调用你的函数
5.  要返回它适当地设置它的返回空间，弹出它应该返回的指令指针并跳转到它

但是，当一个函数处于尾部位置时，这几乎意味着您正在返回您将要调用的函数的结果，您可能会很棘手并且做

1.  重新使用为自己的返回值分配的堆栈空间，作为为即将调用的函数的返回值分配的堆栈空间
2.  重新使用您应该返回的指令指针作为您将要调用的函数将使用的指令指针
3.  释放您自己的参数堆栈空间
4.  为参数分配空间并适当设置
5.  设置参数的值
6.  调用你的函数
7.  当它返回时，它将直接返回给您的调用者。

请注意，#1 和#2 实际上不涉及任何工作，#3 可能很棘手或简单，具体取决于您的实现，并且 4-7 不涉及您正在调用的函数的任何特殊内容。另请注意，所有这些都会导致相对于您的调用堆栈的堆栈增长为 0，因此这允许无限递归并通常加快速度。

另请注意，这种优化不仅可以应用于直接递归函数，还可以应用于协同递归函数，实际上是所有处于尾部位置的调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T11:10:03.607

它取决于 CPU 架构和/或操作系统，可以对尾调用进行优化。这是因为*调用约定*（用于传递函数参数和/或在函数之间转移控制）在 CPU 和/或操作系统之间有所不同。它通常归结为尾调用中传递的任何内容是否必须来自堆栈。举个例子，像这样的函数：

```
void do_a_tailcall(char *message)
{
    printf("Doing a tailcall here; you said: %s\n", message);
} 
```

如果您`-O8 -fomit-frame-pointer`在 32 位 x86 (Linux) 上编译它，即使经过高度优化 ( )，您会得到：

```
do_a_tailcall:
        subl    $12, %esp
        movl    16(%esp), %eax
        movl    $.LC0, (%esp)
        movl    %eax, 4(%esp)
        call    printf
        addl    $12, %esp
        ret
.LC0:
        .string "Doing a tailcall here; you said: %s\n"
```

即一个*经典*函数，具有堆栈框架设置/拆卸（`subl $12, %esp`/ `addl $12, %esp`）和`ret`函数的显式。

在 64 位 x86 (Linux) 中，这看起来像：

```
do_a_tailcall:
        movq    %rdi, %rsi
        xorl    %eax, %eax
        movl    $.LC0, %edi
        jmp     printf
.LC0:
        .string "Doing a tailcall here; you said: %s\n"
```

所以它得到了尾部优化。

在完全不同类型的 CPU 架构 (SPARC) 上，这看起来像（我在其中留下了编译器的注释）：

```
 .L16:
        .ascii  "Doing a tailcall here; you said: %s\n\000"
!
! SUBROUTINE do_a_tailcall
!
.global do_a_tailcall
do_a_tailcall:
         sethi   %hi(.L16),%o5
         or      %g0,%o0,%o1
         add     %o5,%lo(.L16),%o0
         or      %g0,%o7,%g1
         call    printf  ! params =  %o0 %o1     ! Result =      ! (tail call)
         or      %g0,%g1,%o7
```

还有一个……ARM（Linux EABI）：

```
.LC0:
        .ascii  "Doing a tailcall here; you said: %s\012\000"
do_a_tailcall:
        @ args = 0, pretend = 0, frame = 0
        @ frame_needed = 0, uses_anonymous_args = 0
        @ link register save eliminated.
        mov     r1, r0
        movw    r0, #:lower16:.LC0
        movt    r0, #:upper16:.LC0
        b       printf
```

这里的区别在于参数的传递方式和控制的转移方式：

*   32 位 x86（`stdcall`/`cdecl`类型调用）在堆栈上传递参数，因此尾调用优化的潜力非常有限 - 除了特定的极端情况，它只可能发生在精确的参数传递或完全不带参数的尾调用函数时.

*   64 位 x86（UNIX`x86_64`风格，但在 Win64 上没有太大区别）在寄存器中传递一定数量的参数，这使得编译器在可以调用的内容上更加自由，而无需在堆栈上传递任何内容。控制转移通过`jmp`简单地使尾调用函数*继承*堆栈 - 包括最顶层的值，这将是我们的原始调用者的返回地址`do_a_tailcall`。

*   SPARC 不仅在寄存器中传递*函数参数*，而且还*返回地址*（它使用*链接寄存器*, `%o7`）。因此，当您通过*传输控制*`call`权时，这实际上并不会强制一个新的堆栈帧，因为它所做的只是设置链接寄存器和程序计数器……通过 SPARC 的另一个奇怪功能，即所谓的*延迟槽指令*撤消前者（`or %g0,%g1,%o7`-sparc-ish for `mov %g1,%o7`- 在之后*但*`call`在*达到*目标之前执行`call`）。上面的代码是从一个旧的编译器版本创建的......并没有像理论上那样优化......

*   ARM 与 SPARC 相似，因为它使用链接寄存器，尾递归函数只是将未修改/未触及的内容传递给尾调用。它也类似于 x86，`b`在尾递归上使用 (branch) 而不是“调用”等价物 ( `bl`, branch-and-link)。

在所有至少可以在寄存器中传递一些参数的架构中，编译器可以将尾调用优化应用于各种函数。

# java - 在 MySQL 中设置局部变量不再有效

> ID：13017517
> 
> 赞同：1
> 
> 时间：2012-10-22T18:31:44.717
> 
> 标签：java, mysql, hibernate, wavemaker

我在 MySQL 中使用用户变量来控制数据库中触发器的操作。这些变量使用以下 Java 代码在服务中设置：

```
 MedicalDB service = (MedicalDB)RuntimeAccess.getInstance().getServiceBean("medicalDB"); // medicaldb is the name of the connection to DB
    try {
        service.begin();
        Session session = service.getDataServiceManager().getSession();

        sql = "SET @disableTriggers = 0;";
        session.createQuery(sql).executeUpdate(); <---- Throws null pointer exception 
```

这段代码已经正常工作了很长时间，但是现在当服务执行 executeUpdate() 方法时，它会引发空指针异常。问题出在 SET 语句上，因为如果我将其注释掉，后续的 sql 语句就会正常运行。

JRE（内部版本 1.7.0-03-b05）或 Hibernate 发生了一些变化。我正在使用 Wavemaker 6.4.6GA

# javascript - 如何查找验证错误的类型

> ID：13017518
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:31:51.613
> 
> 标签：javascript, html, asp.net-mvc-4

我正在使用 HTML 5 验证，并且在几个字段上我正在针对一种模式进行验证。是否可以找到验证错误的类型是例如必需的错误还是与模式匹配失败等？这是我的代码：

```
 <html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Contact</title>
</head>
    <body>
        @using (Html.BeginForm())
        {
            <div>
                <p>
                    @Html.LabelFor(model => model.Name)<br />
                    @Html.TextBoxFor(model => model.Name, new {@type = "text", @placeholder = "Enter a name", @required="true"})
                    @Html.ValidationMessageFor(model => model.Name)
                </p>

                <p>
                    @Html.LabelFor(model => model.EmailAddress)<br />
                    @Html.TextBoxFor(model => model.EmailAddress, new {@type = "text", @placeholder = "Enter an email address", @required="true", @pattern=@"^([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)$" })
                    @Html.ValidationMessageFor(model => model.EmailAddress)
                </p>

                <p>
                    @Html.LabelFor(model => model.PhoneNumber)<br />
                    @Html.TextBoxFor(model => model.PhoneNumber, new {@type = "text", @placeholder = "Enter a Phone Number", @required="true", @pattern=@"^[\+\d\(]{1}[\d\(]{1}[\d\-\(\) ]{3,19}$"})
                    @Html.ValidationMessageFor(model => model.PhoneNumber)
                </p>

                <p>
                    @Html.LabelFor(model => model.Details)<br />
                    @Html.TextAreaFor(model => model.Details, new {@type = "text", @placeholder = "Enter Details", @id = "Details", @required="true"})
                    @Html.ValidationMessageFor(model => model.Details)
                </p>
                <input type="submit" value="Submit" style="font-size:11px;font-family:Verdana;font-weight:bold;" />
            </div>
        }  
    </body>

    <script type="text/javascript">

        $(document).ready(function () {

            var elementsInput = document.getElementsByTagName("input");
            var elementsTextArea = document.getElementsByTagName("textarea");

            for (var i = 0; i < elementsInput.length; i++) {
                elementsInput[i].oninvalid = function (e) {
                    e.target.setCustomValidity("");
                    if (!e.target.validity.valid) {
                        switch (e.target.name) {
                            case "Name":
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Anna nimesi");
                                } else {
                                    e.target.setCustomValidity("Please enter a Name");
                                }
                                break;
                            case "EmailAddress":
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Anna sähköpostiosoitteesi");
                                } else {
                                    e.target.setCustomValidity("Please enter an Email Address");
                                }
                                break;
                            case "PhoneNumber":
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                        e.target.setCustomValidity("Anna puhelinnumerosi");
                                    } else {
                                        e.target.setCustomValidity("Please enter a Phone Number");
                                    }
                                    break;
                            }
                        }
                };
                    elementsInput[i].oninput = function (e) {
                        e.target.setCustomValidity("");
                    };
                }

            for (var j = 0; j < elementsTextArea.length; j++) {
                elementsTextArea[j].oninvalid = function (e) {
                    e.target.setCustomValidity("");
                    if (!e.target.validity.valid) {
                        switch (e.target.name) {
                            case "Details":
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Täytäthän yksityiskohdat");
                                } else {
                                    e.target.setCustomValidity("Please enter Details");
                                }
                                break;
                        }
                    }
                };
                elementsTextArea[j].oninput = function (e) {
                    e.target.setCustomValidity("");
                };
            }
        });

    </script>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:48:10.247

想通了，使用 element.validity.valueMissing 和 element.validity.patternMismatch (http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html #the-constraint-validation-api)

# c++ - 什么时候调用复制构造函数

> ID：13017520
> 
> 赞同：2
> 
> 时间：2012-10-22T18:32:07.057
> 
> 标签：c++

例如，我在对象初始化期间研究了这一点

```
string s = "Hello world"; 
```

如果 RHS 可隐式转换为 LHS 类型对象，则将调用 Copy Constructor。但是我有一个朋友很确定会`char`调用将指针作为参数的构造函数。但是我告诉他`char`只有在以下情况下才会调用带有指针的构造函数

```
string s("Hello world"); 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:34:26.293

正在做

```
string s = "Hello world"; 
```

相当于

```
string s( string( "Hello world" ) ); 
```

所以构造函数采用`char const*`和*复制构造函数*都被调用。但是，该标准允许*复制*省略，其中*复制构造函数*调用被*省略*（未完成）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:33:58.040

是和不是。两者都被调用。

```
string s = "Hello world"; 
```

这是**复制初始化**。它调用转换构造函数并构造一个临时`string`from `"Hellow world"`，然后将该临时构造与复制构造函数一起使用来构造`s`。（*有待优化*）

```
string s("Hello world"); 
```

是**直接初始化**，直接调用转换构造函数，构造`s`自`"Hello world"`.

# r - Remove a range in data.table

> ID：13017521
> 
> 赞同：8
> 
> 时间：2012-10-22T18:32:08.323
> 
> 标签：r, data.table

I am trying to exclude some rows from a datatable based on, let's say, days and month - excluding for example summer holidays, that always begin for example 15th of June and end the 15th of next month. I can extract those days based on Date, but as as.Date function is awfully slow to operate with, I have separate integer columns for Month and Day and I want to do it using only them.

It is easy to select the given entries by

```
DT[Month==6][Day>=15]
DT[Month==7][Day<=15] 
```

Is there any way how to make "difference" of the two `data.tables` (the original ones and the ones I selected). (Why not subset? Maybe I am missing something simple, but I don't want to exclude days like 10/6, 31/7.)

I am aware of a way to do it with join, but only day by day

```
setkey(DT, Month, Day)
DT[-DT[J(Month,Day), which= TRUE]] 
```

Can anyone help how to solve it in more general way?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:08:32.873

Great question. I've edited the question title to match the question.

A simple approach avoiding `as.Date` which reads nicely :

```
DT[!(Month*100L+Day) %between% c(0615L,0715L)] 
```

That's probably fast enough in many cases. If you have a lot of different ranges, then you may want to step up a gear :

```
DT[,mmdd:=Month*100L+Day]
from = DT[J(0615),mult="first",which=TRUE]
to = DT[J(0715),mult="first",which=TRUE]
DT[-(from:to)] 
```

That's a bit long and error prone because it's DIY. So one idea is that a `list` column in an `i` table would represent a range query ([FR#203](https://r-forge.r-project.org/tracker/?group_id=240&atid=978&func=detail&aid=203), like a binary search `%between%`). Then a *not-join* (also not yet implemented, [FR#1384](https://r-forge.r-project.org/tracker/?group_id=240&atid=978&func=detail&aid=1384)) could be combined with the list column range query to do exactly what you asked :

```
setkey(DT,mmdd)
DT[-J(list(0615,0715))] 
```

That would extend to multiple different ranges, or the same range for many different ids, in the usual way; i.e., more rows added to `i`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:10:38.210

Based on the answer [here](https://stackoverflow.com/a/13013289/1281189), you might try something like

```
# Sample data
DT <- data.table(Month = sample(c(1,3:12), 100, replace = TRUE),
  Day = sample(1:30, 100, replace = TRUE), key = "Month,Day")

# Dates that you want to exclude
excl <- as.data.table(rbind(expand.grid(6, 15:30), expand.grid(7, 1:15)))

DT[-na.omit(DT[excl, which = TRUE])] 
```

If your data contain at least one entry for each day you want to exclude, `na.omit` might not be required.

# c# - Asp.net 将 ItemTemplate 与 SQL Server 2008 R2 数据库一起使用

> ID：13017527
> 
> 赞同：1
> 
> 时间：2012-10-22T18:32:25.780
> 
> 标签：c#, asp.net, sql-server-2008-r2

我正在使用一个网格视图，它显示存储在数据库中的队列中的人的姓名。我有一个 ItemTemplate 为每个人生成“签入”和“取消”按钮。单击其中一个按钮后，我想调用一个存储过程，该过程更改我的数据库中的一列，使其在我的网格视图中下降。

我遇到的问题是如何在我的 C# 中定位一个单独的框，所以我知道我传递给我的存储过程的内容。我不知道如何将该按钮连接到该行其余部分的信息。

```
<asp:GridView ID="Queue" runat="server"
               GridLines="None" SkinID="StatusGridSkin"
               AutoGenerateColumns="False" DataSourceID="DisplayQueueSource"
               EmptyDataText="No Wait Time"
               CellPadding="0" CellSpacing="10"
               OnItemCommand="OnGridItemCommand" PropertName="Date" DataKeyField="ID">
    <Columns>
         <asp:BoundField DataField="FirstName" HeaderText="Name"
                         ReadOnly="True" SortExpression="FirstName" />
         <asp:BoundField DataField="LastName" HeaderText=""
                         ReadOnly="True" SortExpression="LastName" />
         <asp:BoundField DataField="Date" DataFormatString="{0:hh:mm tt}"
                         HeaderText="Check In" HtmlEncode="False"
                         SortExpression="EndTime" />
         <asp:TemplateField ShowHeader="False"> 
             <ItemTemplate> 
                  <asp:Button ID="Checkin" runat="server"
                              CausesValidation="false" CommandName="Checkin"
                              Text="Check in"  CommandName="Checkin"/> 
             </ItemTemplate> 
         </asp:TemplateField> 
         <asp:TemplateField ShowHeader="False"> 
             <ItemTemplate> 
                 <asp:Button ID="Cancel" CommandName="MyButtonClick"
                             CommandArgument='<%# Container.DataItemIndex %>'
                             runat="server" CausesValidation="false"
                             Text="Cancel"  CommandName="Cancel"/> 
             </ItemTemplate> 
         </asp:TemplateField> 
     </Columns>
 </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:54:49.193

向网格添加一些标记；

```
OnRowCommand="OnGridRowCommand" 
```

并将 CommandName 添加到按钮。请记住，如果您使用“取消”或“删除”等“内置”名称之一，则应改为监听特定事件，例如 Deleted 事件。已识别命令的完整列表可在 msdn – [GridView.RowCommand 事件中](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)找到。无论如何，在按钮上，添加命令名和参数。

```
CommandName="RemoveRow" CommandArgument='<%# Container.DataItemIndex %>' 
```

然后，在代码隐藏中

```
protected override void OnLoad(EventArgs e) {
    base.OnLoad(e);
    if (!Page.IsPostBack) {
        // on postback the grid is created thanks to the viewstate
        // that's why we don't bind it
        gridview.DataBind();
    }
}

protected override void OnInit(EventArgs e) {
    base.OnInit(e);
    gridview.DataBinding += bindGridView;
}

protected void OnGridRowCommand(object sender, GridViewCommandEventArgs args) {
    // The commandargument is set on the button, so a unique index for an item
    // should be used to identify it from the db.
    // in this case, commandargument is a string (not an int) so parse it
    int index = Int32.Parse((string)args.CommandArgument);
    switch (args.CommandName) {
        case "RemoveRow": {
                // remember, gridview.DataSource can be null here
                // so act on the database directly
                getSource().RemoveAt(index);
                gridview.DataBind();
            }
            break;
    }
}

private void bindGridView(object sender, EventArgs e) {
    // set the source from the database
    gridview.DataSource = getSource();
}

// this represents the db
private List<ItemViewModel> source;
private IList<ItemViewModel> getSource() {
    if (source == null) {
        source = new List<ItemViewModel>();
        source.Add(new ItemViewModel("Karl"));
        source.Add(new ItemViewModel("Urban"));
        source.Add(new ItemViewModel("Bill"));
    }
    return source;
}

class ItemViewModel {
    private Guid id;
    public ItemViewModel(string name) {
        id = Guid.NewGuid();
        FirstName = name;
    }

    public Guid Id { get { return id; } }
    public string FirstName { get; private set; }
} 
```

# xcode - 调整 UICollectionView 高度

> ID：13017528
> 
> 赞同：8
> 
> 时间：2012-10-22T18:32:26.863
> 
> 标签：xcode, resize, cgrect, uicollectionview

我试图通过在加载视图控制器时将其设置为 0 来调整 UICollectionView 的高度，然后在按下按钮时通过动画增加其大小。我尝试了一些不同的东西，但它的大小根本没有变化。这是我尝试将其高度更改为 0 的所有不同内容：

```
CGRect bounds = [self.collectionView bounds];
[self.collectionView setBounds:CGRectMake(bounds.origin.x,
                                          bounds.origin.y,
                                          bounds.size.width,
                                          bounds.size.height - 100)]; 
```

……

```
CGRect frame = [self.collectionView frame];
[self.collectionView setFrame:CGRectMake(frame.origin.x,
                               frame.origin.y,
                               frame.size.width,
                               frame.size.height - 100)]; 
```

……

```
CGRect frame = self.collectionView.frame;
frame.size.height -= 100;
self.collectionView.frame = frame; 
```

……

```
 self.collectionView.clipsToBounds = YES;
 self.collectionView.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-17T15:06:16.393

如果您使用 Interface Builder 进行 UICollectionView 初始化，请从创建 CollectionView 的 xib 文件中的文件检查器中关闭“使用自动布局”。然后您可以使用 setFrame 或 setBounds 方法更改高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-25T21:30:22.100

您可以通过为高度约束创建一个出口然后在代码中调整约束的常量来避免禁用自动布局。

**出口**

```
@IBOutlet weak var collectionViewVerticalConstraint: NSLayoutConstraint! 
```

**调整**

```
collectionViewVerticalConstraint.constant = 0 
```

# android - 未安装 AVD

> ID：13017532
> 
> 赞同：2
> 
> 时间：2012-10-22T18:32:57.330
> 
> 标签：android, eclipse, sdk, avd

我已经在我的 Ubuntu 11.04 上安装了 Android SDK。我已经运行了一个常见`./android`的安装。预计会看到一些选项，如“*可用包*”来安装 android 包。但我没有看到任何选择。在 Eclipse 的首选项中配置了 SDK 位置路径之后，我没有得到任何 SDK 目标。当我在 Eclipse 中打开 AVD Manager 时，它显示“*没有可用的 AVD* ”。您能否让我知道如何在我的 Eclipse 中配置 AVD？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:45:51.340

**配置基本的 Android 虚拟设备 (AVD)**

打开 Eclipse 并选择`Window > Android SDK and AVD Manager`. 在出现的窗口中，选择`Virtual Devices`左侧面板并单击`New`右侧的按钮。这将启动一个新窗口来配置 AVD。在这个新窗口的第一个空白处，为设备指定一个您选择的名称。我们选择 Simple2.2，表示这将是一个运行 Android 2.2 的相对最小的设备。

在 Target 下拉列表中，选择 Android 2.2 - API Level 8。

在 SD 卡下输入 1024 作为大小并确保选择 MiB 下拉菜单。

对于皮肤，选择内置和默认 (HGVA)。

保留其他所有内容，然后单击创建 AVD。

一段时间后（请耐心等待，可能需要一分钟左右），如果在左侧面板中选择了虚拟设备，这应该会创建一个具有指定特征的新 AVD，该特征将出现在列表中。

您可能更喜欢不同的配置，但上述配置被认为是最佳配置。

# css - 奇怪的 div 填充

> ID：13017533
> 
> 赞同：1
> 
> 时间：2012-10-22T18:32:57.290
> 
> 标签：css, html, padding

我是 CSS 新手，所以请不要对我苛刻。我试图将黄色背景 DIV 放在“标题”DIV 的正下方，但由于某种原因，它似乎在前后放置了一个填充，我真的不明白为什么。如果我删除列表，问题就会消失。

这是 HTML 代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CSS</title>
<link rel = "stylesheet" type="text/css" href="css.css" />
</head>
<body>
<div id="headerDiv">
    <p>Header</p>
</div>
<div id="listDiv">
    <ul>
<li>Menu item 1</li> 
      <li>Menu item 1</li> 
      <li>Menu item 1</li> 
      <li>Menu item 1</li> 
    </ul>
</div>
<div id="mainviewDiv">
Main View
</div>
<div id="footerDiv">
Footer
</div>

</body> 
```

这是CSS：

```
@charset "utf-8";
/* CSS Document */

div#headerDiv { background-color:#F00;
         height:100px;
         position:relative;
         }

div#listDiv {background-color:#FF0;
        }

div#listDiv ul {list-style-type:none;}

div#listDiv li { display:inline;}

div#mainviewDiv {background-color:#060;}

div#footerDiv {background-color:#999;} 
```

![在此处输入图像描述](../Images/42252fc1eccd859153f03dd6f43ad93a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:35:59.903

设置你的`#listDiv`和`#headerDiv`有一个`margin:0px;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:36:45.080

我不知道您是否尝试过，但是将其添加到 CSS 文件的顶部可能会对您有所帮助：

```
*{
    margin:0;
    padding:0;
} 
```

但是当您发布您的网站时，请使用[Eric Myers CSS 重置](http://meyerweb.com/eric/tools/css/reset/)

就像 Maxime Morin 说的那样，您可能想查看[http://nicolasgallagher.com/about-normalize-css/](http://nicolasgallagher.com/about-normalize-css/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:36:19.513

`ul`由于[折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)，问题可能是元素的上边距。

还要确保 div 没有边距和填充（它们可能没有，因为 div 默认没有边距。

人们经常使用[这样的 CSS 重置](http://meyerweb.com/eric/tools/css/reset/)来删除所有元素上的所有边距和填充。之后，您可以在需要的地方添加特定样式。一旦你开始“真正的”造型，你应该考虑使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T18:38:06.720

在 Chrome 中呈现良好，告诉我您可能正在使用 IE。您可以通过使用 CSS 重置[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)将所有 CSS 元素设置回 0 来解决此类问题，以便所有浏览器从同一点开始，覆盖它们的一些内置在默认 CSS 中。

关于重置要记住的事情是你知道必须为你使用的每个元素设置样式。例如列表将没有填充，没有默认列表样式等。您当然可以从重置中删除一些项目，但这会破坏它们的目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T18:39:15.670

一些标签有默认样式——即使你没有真正声明它们。例如，您可以通过添加简单来覆盖此规则：

```
margin:0; 
padding:0; 
```

到您的 CSS 声明中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T18:42:17.250

您的无序列表正在创建 40 的左填充。将您的代码替换为：

```
div#listDiv ul {list-style-type:none;
 padding:0;
 } 
```

如果你刚开始，你会遇到很多默认样式的问题。坚持下去，你会学到的。我们都必须从某个地方开始！

# ruby - 文件没有得到输出

> ID：13017541
> 
> 赞同：2
> 
> 时间：2012-10-22T18:33:28.087
> 
> 标签：ruby

将文本从输入文件转换为莫尔斯电码，然后将结果放入输出 txt 文件中。正在创建文件本身，但没有输出。

```
MAXLINELENGTH = 40
codes = ['.-', '-...', '-.-.', '-..', '.', '..-.', 
         '--.', '....', '..', '.---', '-.-', '.-..', 
         '--', '-.', '---', '.--.', '--.-', '.-.', 
         '...', '-', '..-', '...-', '.--', '-..-', 
         '-.--', '--..','.----', '..---', '...--', 
         '....-', '.....', '-....', '--...', '---..', 
         '----.', '-----']
chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"
fin = File.open("input.txt", "r")
fout = File.open("output.txt", "w")
line_length = 0
while character = fin.getc
  if index = chars.index(character.upcase)
    morse = codes[index]
  elsif character == " "
    fout.print "    "
    line_length = line_length + 4
  end  
  if line_length >= MAXLINELENGTH
    fout.print "\n"
    line_length = 0
  end
end
fin.close
fout.close 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:45:12.813

你从来没有真正打印过变量，你只是在-statement`morse`的第一行分配它。`if`

# jetty - 以编程方式查询已部署的 Jetty 8 应用程序

> ID：13017542
> 
> 赞同：0
> 
> 时间：2012-10-22T18:33:43.720
> 
> 标签：jetty

有没有办法可以在代码中查询 Jetty 8 服务器中已部署应用程序的列表？例如，我可以注入 DeploymentManager 并查询它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:17:43.487

从处理程序中，您应该有对 Server 对象的引用，因此您应该能够从那里挖掘它，或者只是在创建它并将事物编织在一起时传递对它的引用。处理程序很容易编写和连接。如果您愿意，可以查看 StatisticsHandler 的用法作为示例。

来自一个不太合适的 servlet，因为有一个 webapp 类加载器，并且 webapps 是隔离的类加载器是有原因的。

# safari - Safari 6 在 OSX 山狮中不显示滚动条

> ID：13017546
> 
> 赞同：0
> 
> 时间：2012-10-22T18:33:55.263
> 
> 标签：safari

这太奇怪了。Safari 6 似乎没有在带有 overflow-y: 滚动的元素上显示滚动条。

```
<ul>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
<li>something</li>
</ul>​

ul {
    background: #f1f1f1;
    width: 400px;
    height: 300px;
    overflow-x: hidden;
    overflow-y: scroll;
}

li {
    height: 50px;
    line-height: 50px;
    background: #c1ffff;
    margin-bottom: 3px;
}​ 
```

由于我的应用程序中的性能问题，我不想强​​制滚动条，而且它总是在那里看起来很丑。有谁知道解决这个问题的方法？

Firefox 总是显示我很好的滚动条，而 chrome 完美地呈现它，只在实际滚动时显示滚动条。

我创建了一个显示问题的小提琴：http: [//jsfiddle.net/mWT3X/](http://jsfiddle.net/mWT3X/)

更新：确认它确实在 Safari 5 中渲染，但不是 6。 更新 2：这与系统设置中的显示滚动条设置特别相关。如果我将显示滚动条设置为总是它会正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T06:23:18.730

在 Safari 6.0 中有一个[WebKit 错误](https://bugs.webkit.org/show_bug.cgi?id=90052)，它会导致设置了“溢出：滚动”的元素不显示新的滚动条覆盖样式。此问题已在 Safari 6.0.1 中得到解决。

# java - 创建列表 > 在 Java 中支持 .get(key) 方法，如地图。

> ID：13017547
> 
> 赞同：2
> 
> 时间：2012-10-22T18:33:56.533
> 
> 标签：java, list, collections, map

我想用一个与之关联的整数来存储不同的字符串值。我有一个必须使用的 Pair 类和一个必须返回的 Collection。有没有可能像 Map 类一样使用 Collection.get(String key) 方法访问整数的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:03:13.090

我建议创建一个扩展的新类`ArrayList<Pair<String,Integer>>`

例如：

```
import java.util.ArrayList;
public class Test extends ArrayList<Pair<String, Integer>>{

    public Integer get(String value){
        for (Pair<String, Integer> item : this){
            if (item.getKey().equals(value)){
                return item.getValue();
            }
        }
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:42:25.533

在这里，您最好的选择可能是实现一个内部带有`List<Pair<String, Integer>>`属性的类。

```
public class MyMap {
    private List<Pair<String, Integer>> myList;

    ...

    public Integer get (String value) {
          for (Pair<String, Integer> p : myList)
             if (p.getKey().equals(value))
                 return p.getValue();
          return null;
    }
} 
```

# r - na.omit 在 data.table, R

> ID：13017551
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:34:21.060
> 
> 标签：r, data.table, na

这可能是一个潜在的错误，我很难使用独立的示例重现它，但是，错误消息可能有助于深入挖掘它。`miv`是一个`data.table`：

```
> str(miv)
Classes ‘data.table’ and 'data.frame':  113534 obs. of  21 variables:
 $ ym            : num  1980 1980 1980 1980 1980 ...
 $ dte           : Date, format: "1980-03-31" "1980-03-31" ...
 $ xs_ret        : num  -16.3 -16.3 -16.3 14.3 14.3 ...
 $ xs_mkt        : num  -8.85 -8.85 -8.85 12.77 12.77 ...
 $ smb           : num  -7.23 -7.23 -7.23 3.62 3.62 ...
 $ hml           : num  0.966 0.966 0.966 0.318 0.318 ...
 $ umd           : num  3.713 3.713 3.713 -0.762 -0.762 ...
 $ wficn         : num  100567 101394 102565 100010 100019 ...
 $ iv_w          : num [1:113534, 1] -1.039 -0.571 -0.831 -0.357 -0.263 ...

> miv <- na.omit(miv)
Error in `[.data.table`(object, !omit) : 
   i is invalid type (matrix). Perhaps in future a 2 column matrix could return a list of     elements of DT (in the spirit of A[B] in FAQ 2.14). Please let datatable-help know if you'd     like this, or add your comments to FR #1611. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:38:11.753

如果它不可重现，则它过于本地化：

```
DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9)
DT[3, 2] <- NA
DT[4, 3] <- NA
DT
#   x  y  v
#1: a  1  1
#2: a  3  2
#3: a NA  3
#4: b  1 NA
#5: b  3  5
#6: b  6  6
#7: c  1  7
#8: c  3  8
#9: c  6  9
na.omit(DT)
#   x y v
#1: a 1 1
#2: a 3 2
#3: b 3 5
#4: b 6 6
#5: c 1 7
#6: c 3 8
#7: c 6 9 
```

# java - 通过streamreader读取多个java属性

> ID：13017559
> 
> 赞同：2
> 
> 时间：2012-10-22T18:34:47.230
> 
> 标签：java, sockets

我一直在尝试通过套接字连接发送多个属性实例，使用 PrintWriter/BufferedWriter 进行发送，使用 InputStreamReader 进行读取，所有这些都通过循环发送和接收。

发件人：

```
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
for (int i = 0; i < vector.size(); i++) {
    Properties mail = (Properties) vec.get(i);
    mail.store(bw, line);
    bw.newLine();
    bw.flush();
} 
```

接收者：

```
ireader = new InputStreamReader(socket.getInputStream());
Properties[] mails=new Properties[c];
for (int i = 0; i < c; i++) {
    Properties p;// = new Properties();
    mails[i] = new Properties();
    mails[i].load(ireader);
} 
```

但是只有在完成整个循环之后，我才收到接收器发送的最后一个 Properties 对象。这意味着接收器正在加载，直到套接字最终关闭。文档确实说对于 load()，底层阅读器在返回后保持打开状态，但我想我错过了解释“何时”实际返回的部分。如何用一个流读取多个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:35:08.217

假设您有 2 个 Properties 实例：

A：

```
a=b
c=d 
```

乙：

```
e=f
g=h 
```

如果您发送这两个属性实例，将在线发送的内容将是：

```
a=b
c=d
e=f
g=h 
```

并且接收者没有任何方法知道这构成了两个不同的实例。它读取所有属性直到流结束，并将所有读取的属性存储在单个对象中。

您需要找到另一个协议来发送这两个对象。

# algorithm - 具有不同输入的串行环路的时间复杂度

> ID：13017560
> 
> 赞同：0
> 
> 时间：2012-10-22T18:34:53.207
> 
> 标签：algorithm, time-complexity

我知道具有相同迭代次数的两个串行循环的复杂性是*O(n) ，如此*[处](https://stackoverflow.com/questions/5872120/time-complexity-of-two-for-loops)所述，但是如果循环基于不同的输入怎么办？例如：

```
for(i;i<m;i++){
   //code
}
for(y;y<n;y++){
   //code
} 
```

会是*O(m+n)*吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:39:07.457

是的，一点没错 ：）

第一个循环，如果它不为空，则有多个`m`操作。

第二个循环有多个`n`操作。

一个接一个地使用这两个给你`O(m+n)`。

# youtube-api - YouTube 提要 API 的 http 与 https

> ID：13017562
> 
> 赞同：3
> 
> 时间：2012-10-22T18:34:58.140
> 
> 标签：youtube-api

视频源 API 的 YouTube 文档记录在此处：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds#User_Uploaded_Videos](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds#User_Uploaded_Videos)

它指出：

> 要请求其他用户上传的所有视频的供稿，请向以下 URL 发送 GET 请求。此请求不需要身份验证。
> 
> [https://gdata.youtube.com/feeds/api/users/userId/uploads](https://gdata.youtube.com/feeds/api/users/userId/uploads)

我发现这个 API 的非 SSL 格式 (http) 也可以。

我更喜欢使用这个版本的 URL，因为我不需要 SSL。但是我担心它没有记录（因此将来可能会被删除）。所以，我的问题是，这个 API 的 http 形式是否官方支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:46:22.390

我也使用 HTTP。YouTube 的演示页面也不使用 HTTPS：[YouTube 数据 API](http://gdata.youtube.com/demo/index.html "点击meeeee！")

使用 HTTP 应该完全没问题。

# ruby - Ruby正则表达式：如果子字符串不存在则匹配

> ID：13017564
> 
> 赞同：1
> 
> 时间：2012-10-22T18:35:07.550
> 
> 标签：ruby, regex

我在尝试捕获字符串上的组时遇到问题：

```
"type=gist\nYou need to gist this though\nbecause its awesome\nright now\n</code></p>\n\n<script src=\"https://gist.github.com/3931634.js\"> </script>\n\n\n<p><code>Not code</code></p>\n" 
```

我的正则表达式目前看起来像这样：

```
/<code>([\s\S]*)<\/code>/ 
```

我的目标是将所有内容都放在代码括号之间。不幸的是，它匹配到第二个结束代码括号有没有办法匹配代码括号内的所有内容，直到第一次出现结束代码括号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:38:10.360

默认情况下，正则表达式中的所有重复量词都是贪婪的（匹配尽可能多的字符）。使不`*`贪婪，像这样：

```
/<code>([\s\S]*?)<\/code>/ 
```

但**请**考虑改用 DOM 解析器。正则表达式不是解析 HTML 的正确工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:20:15.780

而我刚刚了解到，对于经历多个部分，

```
String.scan( /<code>(.*?)<\/code>/ ){
  puts $1
} 
```

是一种非常好的方式来处理所有出现的**代码**- 但是，是的，获得一个合适的解析器会更好......

# email - 如何通过电子邮件从 Astak Mole 获取网络摄像头图片到我们的网站

> ID：13017566
> 
> 赞同：0
> 
> 时间：2012-10-22T18:35:33.033
> 
> 标签：email, webcam

基本上，我们有一个 Astak Mole 摄像头，可以定期通过电子邮件发送图像，我们希望将图像放在一个文件夹中并将其发布到网站上。

有没有办法使用 IFTTT.com

我们可以控制接收消息的电子邮件地址和显示图像的服务器。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:19:47.243

我不确定 IFTTT.com，但有很多方法可以以编程方式将电子邮件发送到 Web 服务器。

我写了[一篇博客文章](http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/)，其中介绍了以编程方式访问电子邮件的三种主要方法。它们是：

*   设置电子邮件服务器并在电子邮件到达时让它在本地运行脚本
*   通过 POP3 或 IMAP 轮询到现有电子邮件邮箱，然后下载邮件
*   使用第三方（例如[CloudMailin](http://docs.cloudmailin.com)）接收电子邮件并将其作为 HTTP Post 转发到您的网站。

这些方法中的任何一种都应该允许你做你所要求的，选择的选项实际上是关于你需要扩展多少或你已经可用的。

# java - 为什么我的 toString() 类会被自动覆盖？

> ID：13017568
> 
> 赞同：1
> 
> 时间：2012-10-22T18:35:44.867
> 
> 标签：java, overriding

我正在使用 Eclipse 构建 ID：20120614-1722。

我有一个名为“TOY1”的对象类和一个 toString() 函数。我以前知道，当我打电话给

```
System.out.println(TOY1); 
```

它应该返回地址。但是，由于某种原因，它返回了为我的对象声明的 toString() ，而我没有指定 @Override 表示法。

保持这种方式安全吗？或者这是在我拥有的特定版本中实现的新功能。

谢谢

**编辑**

正如所问，这是我的代码的一部分：

```
public class TOY1 {

//irrelevant declarations

public String toString() {
String data;
data="Manufacturer=";
data+=manufact;
data+="DOP:";
data+=date_of_production;
return data;
}
} 
```

当声明 TOY1 的 TOY1_instance 然后使用`System.out.printIn(TOY1_instance)`

我得到的是实际数据，而不是一些垃圾地址。

我的问题是我在哪里覆盖它没有显示警告，也没有扩展覆盖这个类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:38:59.727

`System.out.println(obj);`正在内部调用`obj.toString()`。`toString()`碰巧，如果您不覆盖它，默认实现会返回一些类似地址的值。

您可以省略`@Override`注释，但使用它*更安全*。*当您认为*自己正在覆盖而您不是因为签名的微小差异时，它变得特别有用。例如：

```
@Override
public String tostring() //... 
```

不会编译。更常见的错误是错误的`equals()`：

```
@Override
public boolean equals(TOY1 obj) //... 
```

你明白为什么吗？没有`@Override`它很容易错过这样一个巨大的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:37:54.707

`@Override`注释只是可选的，

无论有没有它，代码都一样。

但使用它是一个好品味的问题。它清楚地显示了正在发生的事情 - 您从超类重新定义方法或从接口实现方法。

正如 Tamasz 所提到的 - 不可能用实际上没有覆盖任何东西的 @Override 方法进行注释。所以它有时可以拯救你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:39:43.083

即使未指定 @Override，它也会始终运行最接近的 toString() 实例方法。为了更安全，或者为了快速有效地编译，你应该在顶部包含 @Override

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:43:51.767

实际上，System.out.println() 可以处理多种类型的参数，其中之一是对字符串的引用。

[请参考这个网址](http://chortle.ccsu.edu/java5/Notes/chap27/ch27_10.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T18:39:48.497

`@Override`注解仅适用于编译器，JVM 并不关心它。

`Override`请参阅此处的注释定义：

```
@Target(value=METHOD)
@Retention(value=SOURCE)
public @interface Override 
```

正如您在声明中看到的那样，它只保留在源代码中而不是类文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T18:42:56.577

好的，让我说清楚。因此，您的覆盖函数仍然被调用，但问题是为什么即使不使用 @override 也会调用它？如果是这样的话，那么这个注解只是让编译器检查你是否真的覆盖了这个函数。它不应该影响程序的逻辑。另外，如果您需要具体答案，请发布代码。

# c - 这其中的哪一部分会导致浮点异常？

> ID：13017570
> 
> 赞同：0
> 
> 时间：2012-10-22T18:35:47.570
> 
> 标签：c, exception, floating-point-exceptions

如果人们可以查看这段代码并让我知道可能导致浮点异常的原因，我将不胜感激。

信息：

*   分支是一个大小为 200 的 int 数组
*   line 是一个 char 数组，大小为 20
*   循环运行良好 6 次，然后发生异常。

我很困惑，因为没有除法、浮点数或整数可能导致这种情况。

```
 for (count = 0; count < sizeof(branches); count++){

    if (fgets(line,sizeof(line),fp)==NULL)
     break;
    else {

    int branch_taken = line[16] - 48; 

    branches[count] = branch_taken;
     }   
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:37:29.093

`sizeof(branches)`是以*字节*为单位的大小- 您需要使用一个表示*元素*数量的常量，即 200，否则您将超出`branches`数组的边界，这将导致未定义的行为。

您的代码应该看起来像这样：

```
#define NUM_BRANCHES 200

int branches[NUM_BRANCHES];

for (count = 0; count < NUM_BRANCHES; count++)
{
    ... 
```

# ruby-on-rails - 使用设计邀请将邀请发送到多个邮件

> ID：13017573
> 
> 赞同：0
> 
> 时间：2012-10-22T18:35:57.733
> 
> 标签：ruby-on-rails, devise

我的用户模型有 2 个电子邮件地址`email`和`email2`. 我正在考虑先发送到一封电子邮件，然后再发送到另一封电子邮件，但是当我调用第二封电子邮件的邀请时，第一封邮件的邀请令牌将失效。
我怎样才能做到这一点？提前感谢

# c# - 如何在页脚中设置 Migradoc 文本框的位置？

> ID：13017579
> 
> 赞同：1
> 
> 时间：2012-10-22T18:36:06.980
> 
> 标签：c#, migradoc

我似乎无法让 TextFrames 垂直定位在页脚中。我有以下代码：

```
 // Left area
        var frame = section.Footers.Primary.AddTextFrame();
        frame.RelativeVertical = RelativeVertical.Page;
        frame.Left = new Unit(40);
        frame.Top = new Unit(700);
        frame.Width = new Unit(220);
        p = frame.AddParagraph();

        // Paragraph content

        // Right area
        frame = section.Footers.Primary.AddTextFrame();
        frame.RelativeVertical = RelativeVertical.Page;
        frame.Left = ShapePosition.Right;
        frame.Top = new Unit(700);
        frame.Width = new Unit(220);
        p = frame.AddParagraph();

        // Paragraph content

        // Center
        frame = section.Footers.Primary.AddTextFrame();
        frame.RelativeVertical = RelativeVertical.Page;
        frame.Left = ShapePosition.Center;
        frame.Width = new Unit(220);
        frame.Top = new Unit(790);

        // Paragraph content 
```

不幸的是，这似乎完全忽略了`frame.Top`调用，所有 3 帧都出现在同一行，即使只有第一帧和第二帧应该是（第三帧应该直接在下面）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:35:32.330

使用 RelativeVertical.Page 时，使用 textFrame.WrapFormat.DistanceTop 设置位置，如下所示：http:
[//forum.pdfsharp.net/viewtopic.php?p =6141#p6141](http://forum.pdfsharp.net/viewtopic.php?p=6141#p6141)

# url - SWFAddress 用于更改 url 中的 INDIVIDUAL 参数

> ID：13017581
> 
> 赞同：1
> 
> 时间：2012-10-22T18:36:09.807
> 
> 标签：url, actionscript, parameters, swfaddress

我在 actionscript 3 中使用 SWFAddress 来控制导航和控件的 url，虽然我能够定位和更改特定参数，但我觉得我缺少一种更清晰、更一致的处理方式，甚至可能是我的一个功能或方法我不知道。

假设我有一个 url，我只想将*def*的第二个参数更改为*xyz*。

`http://localhost/some-page/#/?param1=abc&param2=def&param3=ghi`变成 `http://localhost/some-page/#/?param1=abc&param2=xyz&param3=ghi`

我目前正在做：

```
if (SWFAddress.getParameterNames().indexOf("param2") >= 0) {
    SWFAddress.setValue(SWFAddress.getPath() + "?"
       + SWFAddress.getQueryString().replace("param2=" + SWFAddress.getParameter("param2"), "param2=xyz")) 
```

*本质上，检查参数是否存在，检查它的当前值是什么，然后使用base*、'?" 和*query*重新创建整个 url ，确保我替换了参数*和*参数的值，确保我不会错过*equal sign* . 这个 get 很草率，如果参数存在但没有设置任何东西，或者是否有等号，以及许多其他陷阱，则容易出错。

那么，我不能只告诉 SWFAddress 更新 url 中的那个参数吗？SWFAddress.setParam("param2, "xyz") 的一个理论函数。

除了他们为您提供的 setValue(val:String) 的单个函数之外，是否有人编写了自己的方法来微操作 SWFAddress 和 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:05:23.690

我认为简短的回答是否定的。根据[文档](http://www.asual.com/swfaddress/docs/en/)`setParameter`，该方法不适用`getParameter`。查看代码，似乎 URL 没有作为属性缓存在类中，因此只能通过`setValue`更新浏览器中的 URL 的方法进行操作。

大概您已经在您的`onChange`事件中解析 URL，以便您可以使用这些值来设置您的应用程序状态？如果是这样，当您在从 Flash 更新 URL 之前重建 URL 时，您不需要再次这样做。如果您将深层链接属性存储在某个`Model`类上，您可以处理默认设置、更新和错误检查，而无需求助于`String`操作。`Model`然后，您将使用这些属性重建 URL，如果需要 ，您可以将这个过程抽象为类中的方法。

您还应该注意，以下行不是特别健壮，因为它将为诸如`param22`and之类的属性返回 true `sparam2`：

```
if (SWFAddress.getParameterNames().indexOf("param2") >= 0) { } 
```

# html - 从mysql统计一个月的每一天到html表中的记录

> ID：13017585
> 
> 赞同：0
> 
> 时间：2012-10-22T18:36:26.363
> 
> 标签：html, mysql, count, html-table, record

我想将所有 mySql 结果放在一个 html 表中。这是mysql：

```
SELECT date(vwr_date) AS mon, date(vwr_date) AS date, count(vwr_cid) AS views 
FROM car_viewer 
WHERE Year(vwr_date)='2012' AND vwr_tid='18' 
GROUP BY date 
ORDER BY date DESC 
```

根据上面的查询，结果如下：

```
date        views
2012-10-23  14
2012-10-22  339
2012-10-21  305
2012-10-20  354
....
2012-10-01  291
2012-09-30  246
2012-09-29  297
...
2012-09-01  281 
```

mysql的结果非常好。现在这是一个问题。我尝试了很多次和不同的方法来根据 car_viewer.vwr_date 中的每个日期放入这些视图。所以我这样写：

```
<table border="0" cellpadding="3" cellspacing="1" width="100%">
        <thead>
        <tr>
            <th>Mon Year / Date</th>
            <?
            for($i=1;$i<32;$i++){
                echo "<th>$i</th>";
            }
            ?>
        </tr>
    </thead>
    <tbody>
        <?
        $_thisYear=date("Y");
        $sql_nViewer="select date(vwr_date) as mon, date(vwr_date) as date, count(vwr_cid) as views from car_viewer where Year(vwr_date)='$_thisYear' and vwr_tid='$_SESSION[admin_id]' GROUP BY date ORDER BY date desc";
        echo $sql_nViewer;
        $result_nViewer=mysql_db_query($dbname,$sql_nViewer);
        $rec_nViewer=mysql_fetch_array($result_nViewer);
        $_monYear=date("M Y",strtotime($rec_nViewer[mon]));
        $_monYear2=date("Y-n",strtotime($rec_nViewer[mon]));

            echo "<tr><td>$_monYear</td>";//month name
        $day=1;
        while($rec_nViewer=mysql_fetch_assoc($result_nViewer)){
            $_nViewerDBdate=$rec_nViewer['date'];
            $_nViewerDBviews=$rec_nViewer['views'];
            echo "
            <td>$_nViewerDBviews</td>
            ";$day++;
            if($day==$_daysInMon+1){
                echo "</tr>";
            }
        }
        ?>
        </tbody>
        </table> 
```

上面代码的结果很奇怪——不是我想要的。我需要这样显示数据： ![预期表](../Images/1e64503c553e281e5d728b481042e56c.png)

所以请建议我应该怎么做才能达到我的预期。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:01:38.800

You can return data in that format from mysql

```
SELECT MONTH_v, YEAR_V
GROUP_CONCAT(IF(day_v=1, views, null)) AS '1',
GROUP_CONCAT(IF(day_v=2, views, null)) AS '2',
----
GROUP_CONCAT(IF(day_v=31, views, null)) AS '31'
FROM
(
 SELECT DAY(vwr_date) AS day_v, 
 MONTH(vwr_date) AS MONTH_v, 
 Year(vwr_date) AS YEAR_V,
 date(vwr_date) AS date_v, 
 count(vwr_cid) AS views 
 FROM car_viewer 
 WHERE Year(vwr_date)='2012' AND vwr_tid='18' 
 GROUP BY date_v 
)
GROUP BY MONTH_v, YEAR_V 
ORDER BY MONTH_v, YEAR_V DESC 
```

# css - CSS对齐2块底部

> ID：13017593
> 
> 赞同：1
> 
> 时间：2012-10-22T18:36:58.563
> 
> 标签：css, alignment

我有 2 个块，`red`块`width: fixed height: auto`，`green`块`width`和`height fixed`，我不知道如何对齐`green`块，它会在底部，现在它在顶部；可以看例子：http: [//jsfiddle.net/MXqTY/3/](http://jsfiddle.net/MXqTY/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:43:46.603

添加这个：

```
.square1, .square2 {
    display: inline-block;
    vertical-align: bottom;
} 
```

并删除`float: left`.

[http://jsfiddle.net/thirtydot/MXqTY/8/](http://jsfiddle.net/thirtydot/MXqTY/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:39:52.043

从你的类声明中删除 float:left 。默认情况下，它们将堆叠。将两个元素都向左浮动将导致它们水平堆叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T03:49:46.870

添加`clear:left;`到您的`.square2`块将解决您的问题。

```
#wrap{
margin: 0 auto;
}

.square1{
width: 100px;
height: auto;
background-color: red;
float: left;
}
.square2{
width: 50px;
height: 50px;
background-color: green;
float: left;
clear:left;
}
```

```
<body>
<div id='wrap'>

    <div class='square1'>tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas tekstas  </div>
    <div class='square2'></div>

</div>
```

您的绿色块与其他浮动块对齐的原因是因为浮动会自动将所有元素移动到包含元素中的指示位置。[你可以在 MDN 上](https://i.stack.imgur.com/WW0gx.png)看到这个定义。

所有浮动元素将彼此相邻排列，直到它到达容器的末端，此时它会环绕到下一行。通过`clear`为您添加代码块，`.square2`您实际上是在告诉它移动到所有相关浮动的边缘，在您的情况下是第一个正方形。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-22T18:38:41.847

对于`.square2`，添加：

```
margin-top:110px; 
```

# android - Android上的Chrome浏览器书签

> ID：13017594
> 
> 赞同：5
> 
> 时间：2012-10-22T18:37:04.183
> 
> 标签：android, google-chrome

我在 Google Chrome 中有两个配置文件。我正在尝试在适用于 Android 的 Chrome 浏览器上加载不同的配置文件，但我找不到这样做的选项。我需要从特定配置文件加载书签。

此过程没有可用的文档。谢谢

PS 我正在尝试构建一个 android 应用程序来从 Chrome 导入所有书签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:08:40.650

我不清楚你在问什么。您要同步保存的书签吗？对于 Android：菜单 > 设置 > 登录到 chrome > 同步（选择“打开选项卡”）。

从头开始-我明白你在问什么。您想在两个单独的 Google chrome 帐户之间导入书签。我一直在对此进行测试，到目前为止，我没有看到在 Chrome 中跨两个 Chrome 帐户同步的明确方法。

然而，奇怪的是，我们总能找到解决方法，使用完全不同的浏览器。如何首先将原始帐户中的书签导出为 HTML 文件。使用 Firefox（如果您有 Google 工具栏插件），您可以将其导入*Google*书签。现在打开 Firefox 并单击“书签”，然后单击“组织书签”。选择 HTML 文件。在 Google Chrome 中，转到工具栏，单击书签，然后导入 Firefox 书签（从技术上讲，它们是您原始 Google chrome 帐户中的书签）。

# ios - ios6 moviePlayer第一帧在创建时没有出现

> ID：13017597
> 
> 赞同：3
> 
> 时间：2012-10-22T18:37:14.290
> 
> 标签：ios, movieplayer

我的开放类控制器中有方法实例化一个moviePlayer，它设置为'autoPlay = NO';

我已将movieplayer.view 添加为控制器视图的子视图，对其进行配置并在顶部创建一个全屏按钮以启动视频。自 iOS4.3 以来，这一直运行良好。该按钮是透明的，视频的第一帧显示通过（这是自定义自动自动启动按钮的图片）。

从iOS6开始，我只得到一个黑屏。单击图像按钮确实会按原样启动视频；调用 [moviePlayer 播放]

有没有我没有考虑到的变化？我提供了我认为必要的两段代码。

```
#define INTRO_MOVIE @"Intro.mov"
-(void)viewDidLoad
{
    if(SHOULD_PLAY_INTRO_VIDEO)//Debug switch to ignore the intro video
    {
        // Prepare the movie and player
        [self configureIntroMoviePlayer];        
        [self.view addSubview:moviePlayer.view];      
        [self.view bringSubviewToFront:moviePlayer.view];

        // Add and Show the Start Button to start the App
        [self configureStartButton];
        [self.view addSubview:startButton];
    }
}

-(void)configureIntroMoviePlayer
{
    LOGINFO
    // Prepare the Intro Video    
    NSString *pathToIntroVideo  = [ mainFilePath_ stringByAppendingPathComponent: INTRO_MOVIE];
    NSURL *URLToIntroVideo      = [NSURL fileURLWithPath:pathToIntroVideo];

    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:URLToIntroVideo];
    [moviePlayer setShouldAutoplay:NO];
    moviePlayer.view.frame = CGRectMake(0, -20, 1024, 768);
    [moviePlayer setControlStyle:MPMovieControlStyleNone];

    //fixing video brightness Difference with iPad2
    if(isIpad2)
    {
        moviePlayer.backgroundView.backgroundColor = [UIColor blackColor];
        moviePlayer.view.alpha = .99;
    }

// Create the sKip button for cancelling the Intro Video
    skipIntro = [UIButton buttonWithType:UIButtonTypeCustom];
    [skipIntro showsTouchWhenHighlighted];
    skipIntro.frame = CGRectMake(900, 20, 111, 57);
    [skipIntro addTarget:self action:@selector(skipIntroWasPressed) forControlEvents:UIControlEventTouchUpInside];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:41:21.710

我不知道为什么我因为缺乏研究或清晰度而在这个问题上得到了 -1 分？也许我不知道这个论坛的正确用法。我道歉。

我确实发现添加 [moviePlayer prepareToPlay] 解决了这个问题。就像我说的，奇怪的是第一帧总是出现在 iOS 6 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:45:22.330

你有没有尝试过：

```
 [moviePlayer.view addSubView:startButton]; 
```

# python - 从列表中选择唯一值

> ID：13017599
> 
> 赞同：1
> 
> 时间：2012-10-22T18:37:13.797
> 
> 标签：python, random, python-2.7, unique

我想做的是，有一个字符列表，每个字符都是一个过程，然后我想从这个列表中随机选择（或伪随机，没关系），并执行该过程，然后我想要能够再次运行它，而不是获得相同的值，例如，如果我有五个值，我希望能够运行它 5 次，那么我第 6 次运行它，它什么也不返回。这是代码：

```
from Tkinter import*
from random import randint
Characters=[Percy,Annabeth,Leo,Chuck,Sarah]
Used = []
def callback():
    end = len(Characters)-1
    rando = randint(0,end)
    Characters[rando]
    for i in Characters:
         if Characters[rando] in Used:
            print 'This has already been used'
         else:
            Characters[rando]()
            Used.append(Characters[rando])
            break

game = Tk()
game.geometry('50x50+700+100')
Button1 = Button(game,text = '1',command =lambda:callback() )
Button1.pack(side=LEFT)

game.mainloop() 
```

我想得到

```
callback() 
```

要正常运行，我已经尝试过您所看到的，但我也尝试过

```
if Characters[rando] in Used:
    print 'This has already been used'
else: 
   Characters[rando]
   Used.append(Characters[rando]) 
```

在这两种情况下，它都会多次运行相同的程序，例如，“Leo”可能会连续执行 3 次。我花了几个小时寻找一种方法来做到这一点，但我找不到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:45:42.640

首先，我`shuffle`会`Characters`：

```
Characters = [Percy,Annabeth,Leo,Chuck,Sarah]
random.shuffle(Characters) 
```

现在，当您运行回调时，您会`pop`输出一个字符：

```
def callback():
    try:
       C = Characters.pop()  #popping the last one is more efficient than the first.
    except IndexError:
       return None

    return C() 
```

由于这会破坏`Characters`，因此如果需要，您可能需要保留它的副本以重置：

```
 random.shuffle(Characters)
 Characters_save = Characters[:]

 def reset_characters():
     Characters[:] = Characters_save[:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:10:59.553

完全未经测试 - 但您可以实现一个基本类：

```
from random import shuffle

class CallNext(object):
    def __init__(self, vals):
        self.vals = vals[:]
        shuffle(self.vals)
        self.iter = iter(self.vals)
    def __call__(self):
        try:
            next(self.iter)()
        except StopIteration as e:
            pass # or do something smarter? 
```

另一个代替捕获的选择`StopIteration`是使用：

```
next(self.iter, lambda: None)() 
```

然后有：

```
Button1 = Button(game, text='1', command=CallNext(Characters) ) 
```

# android - GCM：注册设备 [GCMRegistrar.register(this, SENDER_ID)]

> ID：13017619
> 
> 赞同：0
> 
> 时间：2012-10-22T18:38:21.830
> 
> 标签：android, eclipse, google-cloud-messaging, eclipse-juno

我有一个重要的交货，我希望你能帮助我。

我必须使用 GCM。我正在使用[http://developer.android.com/guide/google/gcm/demo.html官方指南中的文件](http://developer.android.com/guide/google/gcm/demo.html)

我做了“使用 App Engine for Java 设置服务器”并且它工作。

我的问题是 android 应用程序。确切地说，我没有从 GCM 接收 id，所以任何时候我的应用程序都尝试注册。

非常感谢....

```
public class DemoActivity extends Activity {

    TextView mDisplay;
    AsyncTask<Void, Void, Void> mRegisterTask;

    @Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        checkNotNull(SERVER_URL, "SERVER_URL");
        checkNotNull(SENDER_ID, "SENDER_ID");

        // Make sure the device has the proper dependencies.
        GCMRegistrar.checkDevice(this);
        // Make sure the manifest was properly set - comment out this line
        // while developing the app, then uncomment it when it's ready.
        GCMRegistrar.checkManifest(this);
        setContentView(R.layout.main);
        mDisplay = (TextView) findViewById(R.id.display);
        registerReceiver(mHandleMessageReceiver,
                new IntentFilter(DISPLAY_MESSAGE_ACTION));
        final String regId = GCMRegistrar.getRegistrationId(this);
       if (regId.equals("")) {

            // Automatically registers application on startup.
            GCMRegistrar.register(this, SENDER_ID);

        } else {
            ....
        } 
```

**通用工具**

```
public final class CommonUtilities 
{
     static final String SERVER_URL = "http://127.0.0.1:8888/gcmdemo4/home";
     static final String SENDER_ID = "843761346XXX";
...
} 
```

**GCMIntentService**

```
public class GCMIntentService extends GCMBaseIntentService {

@SuppressWarnings("hiding")
private static final String TAG = "GCMIntentService";

public GCMIntentService() {
    super(SENDER_ID);
}

@Override
public void onRegistered(Context context, String registrationId) {
    Log.i(TAG, "Device registered: regId = " + registrationId);
    displayMessage(context, getString(R.string.gcm_registered));
    ServerUtilities.register(context, registrationId);
}
 ..... 
```

**我的清单**

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.registrazionegcm"
    android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<permission
    android:name="com.example.registrazionegcm.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.example.registrazionegcm.permission.C2D_MESSAGE" />
<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name="DemoActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.example.registrazionegcm" />
        </intent-filter>
    </receiver>
    <service android:name=".GCMIntentService" />
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:48:22.617

你能提供你的“registerReceiver”代码吗？

当我的 SENDER_ID 错误时，我遇到了同样的问题。尝试再次检查它，并检查你的包： com.example.registrazionegcm.GCMIntentService 在 onError 和 onRegistered 中放置一些断点

对我来说，这段代码有效：

```
@Override
public void run() {

    GCMRegistrar.checkDevice(mContext);
    GCMRegistrar.checkManifest(mContext);
    String deviceToken = GCMRegistrar.getRegistrationId(mContext);
    if (deviceToken.equals("")) {
        GCMRegistrar.register(mContext, "XXXXXXXXXXXXXXX");
        deviceToken = GCMRegistrar.getRegistrationId(mContext);
        if(!deviceToken.equals("")){
            GCMRegistrar.setRegisteredOnServer(mContext, true);
            // register deviceToken on CommNotes srv
            RequestMaker req = new RequestMaker(Constant.REQ_REGISTER_GCM, mContext);
            //if unsuccessful, try again 5 times
            for(int i = 0; i<5; i++){
                Log.d("ComNotes", "registration id"+deviceToken);
                if(req.doRequest(deviceToken) == ReturnCode.CODE_OK){
                    break;
                }             
            }
        }
        //TODO manage unsuccess: display error : "No PUSH available"
    } else {
        Log.v("CommunityNotes", "Already registered "+deviceToken);
    }
} 
```

# php - PHPMailer 隐藏 SMTP 身份验证？

> ID：13017622
> 
> 赞同：4
> 
> 时间：2012-10-22T18:38:44.773
> 
> 标签：php, smtp, phpmailer

好的，我正在使用 PHPMailer 发送电子邮件。

所以在 php 代码中我添加了我的 SMTP 用户名，这是我的 gmail 帐户和 SMTP 密码，这是我的 gmail 帐户密码。

所以我的 GMAIL ACCOUNT ACCESS 暴露在 php 代码中，虽然服务器在 php 被解释后丢弃了它，所以没有人能看到它，我的问题是，这可靠吗？我应该在代码中保留我的 gmail 访问权限还是应该将其保存在我的数据库中？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:53:40.367

任何有权访问您的代码的开发人员都将能够访问您的凭据。将这些保存在数据库中可能会使获取详细信息变得更加困难，但只是轻微的。

如果您真的担心使用的凭据，请创建一个专用于您的站点的帐户，不要使用个人帐户。

# jquery - div在动画旁边时如何让div推过去？

> ID：13017631
> 
> 赞同：0
> 
> 时间：2012-10-22T18:39:14.890
> 
> 标签：jquery, css, css-float

嗨，我一直在尝试一切无济于事。我正在使用 jQuery 界面脚本，它在悬停 ala the mack Dock 上创建鱼眼效果。它工作得很好。我想有另一个图像或 div 位于停靠栏旁边的内联，当停靠栏效果发生时会被推倒。现在，图像仅位于底座下方并且仅略微移动。我有 trin 内联样式、浮动等请参见此处[http://kerrydean.ca/new_layout.html](http://kerrydean.ca/new_layout.html)

这是CSS

```
#dock_wrap {
    position: relative;
    z-index: 15;
    margin-top:25px;
    text-align: center;
}
#dock2 {
    width: 100%;
    bottom: 0px;
    position: absolute;
    left: 0px;
    z-index: 3;
}
.dock-container2 {
    position: absolute;
    height: 70px;
    background: url(images/dock-bg.gif);
    padding-left: 20px;
}
a.dock-item2 {
    display: block; 
    font: bold 12px Arial, Helvetica, sans-serif;
    width: 40px; 
    color: #4C215B; 
    bottom: 0px; 
    position: absolute;
    text-align: center;
    text-decoration: none;
}
.dock-item2 span {
    display: none;
    padding-left: 20px;
}
.dock-item2 img {
    border: none; 
    margin: 5px 10px 0px; 
    width: 100%; 
} 
```

这是HTML

```
<div id="dock_wrap">
        <div class="dock" id="dock2">
        <div class="dock-container2">
          <div><img src="kd_images/Kerry_Dean_Nav_1.jpg" width="264" height="70" /></div>
          <a class="dock-item2" href="blog.php"><span>Home</span><img src="kd_images/home.png" alt="home" /></a> <a class="dock-item2" href="kerry_on.html"><span>Kerry On</span><img src="kd_images/kerry_on.png" alt="kerry on" /></a>
          <a href="http://www.facebook.com/profile.php?id=100000414102424" target="_blank" class="dock-item2"><span>Facebook</span><img src="kd_images/facebook.png" alt="contact" /></a> 
          <a href="http://twitter.com/kerrydeandotca" target="_blank" class="dock-item2"><span>Twitter</span><img src="kd_images/twitter.png" alt="video" /></a> 
          <a href="http://www.youtube.com/user/KerryDeanChocolate" target="_blank" class="dock-item2"><span>Youtube</span><img src="kd_images/youtube.png" alt="music" /></a> 
          <a href="http://chocolatebiztools.soundconcepts.com/index.php/chocolate-tastings-101-2nd-edition.html" target="_blank" class="dock-item2"><span>Buy Kerry's CD</span><img src="kd_images/cd.png" alt="video" /></a> 
          <a class="dock-item2" href="photos.html"><span>Photos</span><img src="kd_images/camera.png" alt="home" /></a> </div>
        </div>
    </div>
      <!-- end of dock wrap --> 
```

这是JQuery

```
$(document).ready(
        function()
        {
            $('#dock2').Fisheye(
                {
                    maxWidth: 60,
                    items: 'a',
                    itemsText: 'span',
                    container: '.dock-container2',
                    itemWidth: 35,
                    proximity: 80,
                    alignment : 'left',
                    valign: 'bottom',
                    halign : 'center'
                }
            )
        }
    ); 
```

谢谢！！！

# kendo-ui - 如何使用过滤器遍历 kendoUI 网格中的所有行

> ID：13017632
> 
> 赞同：24
> 
> 时间：2012-10-22T18:39:19.420
> 
> 标签：kendo-ui

这是我的代码。如果您想遍历所有行，它可以工作。现在，QA 告诉我我必须让它支持过滤器。因此，当用户使用过滤器时，只有一部分行会显示在网格上。我只需要遍历那些行。

```
 var entityGrid = $("#EntitesGrid").data("kendoGrid");       
    var data = entityGrid.dataSource.data();
    var totalNumber = data.length;

    for(var i = 0; i<totalNumber; i++) {
        var currentDataItem = data[i];
        VersionIdArray[i] = currentDataItem.VersionId;
    } 
```

我试过。

```
 var data = entityGrid.dataSource.data().fetch(); 
```

和

```
 var data = entityGrid.dataSource.data().filter(); 
```

无法让它工作。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-22T18:55:15.267

为了将来参考和感兴趣的人，我在以下位置找到了解决方案：

[http://colinmackay.scot/2012/07/23/kendo-ui-paging-and-accessing-the-filtered-results-in-javascript/](http://colinmackay.scot/2012/07/23/kendo-ui-paging-and-accessing-the-filtered-results-in-javascript/)

> 它的工作原理是首先获取网格的数据源，获取过滤器和数据，使用数据创建新查询并将过滤器应用于它。虽然这确实会导致获得过滤器的结果，但它确实具有处理两次过滤器操作的明显缺点。

```
function displayFilterResults() {
    // Gets the data source from the grid.
    var dataSource = $("#MyGrid").data("kendoGrid").dataSource;

    // Gets the filter from the dataSource
    var filters = dataSource.filter();

    // Gets the full set of data from the data source
    var allData = dataSource.data();

    // Applies the filter to the data
    var query = new kendo.data.Query(allData);
    var filteredData = query.filter(filters).data;

    // Output the results
    $('#FilterCount').html(filteredData.length);
    $('#TotalCount').html(allData.length);
    $('#FilterResults').html('');
    $.each(filteredData, function(index, item){
        $('#FilterResults').append('<li>'+item.Site+' : '+item.Visitors+'</li>')
    });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-19T19:41:15.770

非常感谢！！！现在有了这个帮助，我做到了......

```
kendo.data.DataSource.prototype.dataFiltered = function () {
    // Gets the filter from the dataSource
    var filters = this.filter();

    // Gets the full set of data from the data source
    var allData = this.data();

    // Applies the filter to the data
    var query = new kendo.data.Query(allData);

    // Returns the filtered data
    return query.filter(filters).data;
} 
```

所以现在我可以很容易地得到我的过滤数据！！！惊人的！！！

例子：

```
var dataFiltered = $("#MyGrid").data("kendoGrid").dataSource.dataFiltered(); 
```

# javascript - 安全地对 href 进行 URL 编码（不知道是否已经编码！）

> ID：13017635
> 
> 赞同：0
> 
> 时间：2012-10-22T18:39:26.353
> 
> 标签：javascript, cross-browser, urlencode

我注意到 Chrome 和 Firefox 存储`document.location.href`URL 编码，而 IE9 存储它未编码。

例如：

*   铬/FF：`http://domain.tld/some%20folder/`
*   IE：`http://domain.tld/some folder/`

有什么约定吗？更重要的是，有没有一种可靠的方法可以在不检查供应商的情况下检查它是否是 URL 编码的？

我目前的解决方案是：

```
 // helpers
var reUriToPathname = /^.*:\/\/[^\/]*|[^\/]*$/g,
    uriToPathname = function (uri) {

        return uri.replace(reUriToPathname, '');
    },
    forceEncoding = function (href) {

        // collection of manual fixes..
        return href
                .replace(/\/+/g, '/')
                .replace(/ /g, '%20')
                .replace(/'/g, '%27')
                .replace(/\[/g, '%5B')
                .replace(/\]/g, '%5D')
                .replace(/\(/g, '%28')
                .replace(/\)/g, '%29')
                .replace(/\+/g, '%2B')
                .replace(/\=/g, '%3D');
    },

    // check once with a testpath
    hrefsAreDecoded = (function () {

        var testpathname = '/a b',
            a = doc.createElement('a');

        a.href = testpathname;
        return uriToPathname(a.href) === testpathname;
    }()),

    // safely return encoded href
    getEncodedHref = function (href) {

        var a = doc.createElement('a'),
            location;

        a.href = href;
        location = uriToPathname(a.href);

        if (hrefsAreDecoded) {
            location = encodeURIComponent(location).replace(/%2F/ig, '/');
        }

        return forceEncoding(location);
    }; 
```

使用`getEncodedHref(document.location.href)`似乎足够安全，但不是最好的解决方案。有什么建议可以更优雅地处理这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:42:08.847

怎么样：

```
encodeURIComponent("http://asdf.com?foo=bar&bla=asdfäöü");
"http%3A%2F%2Fasdf.com%3Ffoo%3Dbar%26bla%3Dasdf%C3%A4%C3%B6%C3%BC"

encodeURI("http://asdf.com?foo=bar&bla=asdfäöü");
"http://asdf.com?foo=bar&bla=asdf%C3%A4%C3%B6%C3%BC" 
```

# linux - 试图从浏览器页面中提取字段

> ID：13017637
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:39:31.853
> 
> 标签：linux

我正在尝试从在线表单中将一个字段从 Firefox 提取到我的本地 Ubuntu 12.04 PC 和 Mac OS 19.7.4

我可以在本地手动将页面保存为文本文档，然后使用 Unix 脚本搜索文本，但这似乎很麻烦，我需要它自动化。还有其他更有效的方法吗？

我的背景是 Mac，但该公司正在试用 Linux PC，所以请容忍我对 Ubuntu 的相关无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:45:31.453

如果你想编程，试试

*   WWW:Mechanize 库，它有 python 和 perl 绑定，

*   lunux 中的几个鼠标脚本引擎，（actionaz）

*   与Firefox（Selenium）一起使用的测试自动化工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:46:44.327

您可以通过简单的 BASH 脚本来完成。看看一些有用的东西，比如：

*   wget
*   sed
*   grep

然后什么都不会麻烦，一切都可以自动进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:51:43.707

如果您想使用您提到的方法，您可以使用[curl](http://linux.about.com/od/commands/l/blcmdl1_curl.htm)自动保存表单。您的 BASH 脚本将如下所示：

```
curl http://locationofonlineform.com -o tempfile
valueOfField=$(grep patternToFindField tempfile)
// Do stuff
echo $valueOfField 
```

如果你想摆脱临时文件，你可以直接将 curl 的结果输入到 grep 命令中。

# c# - 这两个 LINQ 查询可以互换使用吗？

> ID：13017642
> 
> 赞同：4
> 
> 时间：2012-10-22T18:39:46.307
> 
> 标签：c#, linq, linq-to-objects

a) 以下两个查询是否会产生相同的结果：

```
 var query1 = collection_1
            .SelectMany(c_1 => c_1.collection_2)
            .SelectMany(c_2 => c_2.collection_3)
            .Select(c_3 => c_3);

  var query2 = collection_1
            .SelectMany(c_1 => c_1.collection_2
            .SelectMany(c_2 => c_2.collection_3.Select(c_3 => c_3))); 
```

b）我假设这两个查询不能总是互换使用？例如，如果我们希望输出元素也包含 和 的值`c_1`，`c_2`那么我们只能使用 来实现`query2`，而不是使用`query1`：

```
 var query2 = collection_1
            .SelectMany(c_1 => c_1.collection_2
            .SelectMany(c_2 => c_2.collection_3.Select(c_3 => new { c_1, c_2, c_3 } ))); 
```

?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:03:41.643

您提供的片段似乎无效。`c_3`没有在语句的范围内定义`Select`，所以除非我误解了一些东西，否则这不会编译。

似乎您正在尝试选择 的元素`collection_3`，但这是由 隐式完成的`SelectMany`，因此`Select`两种情况下的最终语句都是多余的。取出来，两个查询是等价的。

你只需要这样：

```
var query = collection_1
           .SelectMany(c_1 => c_1.collection_2)
           .SelectMany(c_2 => c_2.collection_3); 
```

* * *

**更新：** `x => x`是恒等映射，所以`Select(x => x)`无论上下文如何，总是多余的。它只是意味着“对于序列中的每个元素，选择元素”。

第二个片段当然不同，`SelectMany`and`Select`语句确实需要嵌套才能选择所有三个元素`c_1`、`c_2`和`c_3`。

不过，就像 Gert 所说，您最好还是使用*查询理解语法*。它更加简洁，并且更容易在心理上解析查询的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:18:26.160

一种。查询是相等的，因为在这两种情况下，您最终都会得到 all `c_3`'s in `c_1`through `c_2`。

湾。您无法按照您的建议访问`c_1`和`c_2`处理这些查询。如果你想要，你需要[这个](http://msdn.microsoft.com/en-us/library/bb534631.aspx)重载的`SelectMany`. 这种“流利”的语法虽然很笨拙。这通常是一种情况，其中执行相同操作的综合语法要好得多：

```
from c_1 in colection_1
from c_2 in c_1.collection_2
from c_3 in c_2.collection_3
select new { c_1.x, c_2.y, c_3.z } 
```

# objective-c - 将用户发送到 App Store 以更新 OS X 版本

> ID：13017652
> 
> 赞同：3
> 
> 时间：2012-10-22T18:40:16.527
> 
> 标签：objective-c, macos, mac-app-store, updating

> **可能重复：**
> [以编程方式打开 Mac App Store](https://stackoverflow.com/questions/5656746/programmatically-open-mac-app-store)

我正在开发一个 10.8.0+ OSX 应用程序，我需要以编程方式向用户显示 App Store 以更新他的操作系统以使用 Facebook 集成（仅当他不在 10.8.2 上时）。
如何打开 App Store 的更新部分，或类似的东西做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:59:25.180

使用[iTunes Link Maker](http://itunes.apple.com/linkmaker/)，您可以获得一个在 MacOS X 10.8 页面上打开 Mac AppStore 的链接（只需在“Mac 应用程序”部分中搜索“OSX”），如下所示：

[https://itunes.apple.com/us/app/os-x-mountain-lion/id537386512?mt=12&uo=4](https://itunes.apple.com/us/app/os-x-mountain-lion/id537386512?mt=12&uo=4)

不幸的是，直接使用此链接会打开您的浏览器，该浏览器将要求用户单击按钮以打开 Mac AppStore 中的页面，但在快速挖掘与此按钮关联的 javascript 代码后，很容易看到而不是替换`"https://"`为`"macappstores://"`will**直接打开 Mac AppStore**之前无需打开您的默认网络浏览器。

所以简而言之，让您的应用程序打开下面的链接应该可以解决问题：

```
NSString* const kOSX8AppStoreURL = @"macappstores://itunes.apple.com/us/app/os-x-mountain-lion/id537386512?mt=12";
[[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:kOSX8AppStoreURL]]; 
```

*当然，这确实会打开 AppStore 中“OS X Mountain Lion”应用程序的页面，而不是真正打开 Mac AppStore 应用程序的“更新”选项卡，但我认为这是您能做的最好的事情。*

* * *

# 编辑：打开 Mac AppStore 的“更新”选项卡！

在深入研究了 Mac AppStore 应用程序发送的请求以检查更新后（感谢中间人代理和受信任的 CA 证书来引诱 AppStore.app HTTPS 请求，以及一些 Base64 解码），**我终于找到了用于打开 Mac App Store 的“更新”页面的 URL！**

所以这是我发现的直接打开更新选项卡的 URL：

```
https://su.itunes.apple.com/WebObjects/MZSoftwareUpdate.woa/wa/viewSoftwareUpdate 
```

到目前为止，我对其进行了测试，如果 AppStore.app 尚未打开，它会打开它，转到“更新”选项卡，然后立即开始搜索新的更新 :)

# ruby-on-rails - 有没有一种获取当前路线范围的方法？

> ID：13017654
> 
> 赞同：10
> 
> 时间：2012-10-22T18:40:27.127
> 
> 标签：ruby-on-rails, url-routing

如果您的 routes.rb 文件中有一个范围，例如：

```
scope "/account" do
  resources :items
end 
```

您如何确定当前页面是否在“帐户”部分？意味着“帐户”部分将考虑以下项目？

```
/account/items
/account/item/1
/account/item/1/edit 
```

我知道这可以通过对请求变量执行字符串比较来实现，但很好奇是否有确定此信息的“rails 方式”。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-15T19:25:23.007

我刚才遇到了同样的问题。我所做的是在范围内添加一个参数：

```
scope '/me', me_scope: true do
  # ...
end 
```

这样我可以在控制器中查找它：

```
class ApplicationController < ActionController::Base
  def me_scope?
    params[:me_scope].eql? true
  end
end 
```

不是最干净的解决方案，但它有效..

# asp.net-mvc-3 - MVC 下拉列表，当模型不是 Ienumerable 时数据不显示

> ID：13017655
> 
> 赞同：0
> 
> 时间：2012-10-22T18:40:48.307
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor

我在将包含下拉数据和模型的模型传递给视图时遇到问题。

使用此代码加载我的页面，但下拉列表在选择时包含“System.Web.MVC.SelectList”。

这是我的控制器代码。

```
public ActionResult Index(string productNameFilter, string productCategoryFilter, String productTypeFilter )
{
    var ddl = new Items();
    ddl.CategoryddList = itemsRepository.GetItemDdl("Item Categories").Select(c => new SelectListItem
    {
        Value = c.DropdownID.ToString(),
        Text = c.DropdownText
    });
    ViewBag.CategoryDD = new SelectList(ddl.CategoryddList, "Value", "Text");
    var model = itemsRepository.GetItemByName(productNameFilter);
    return View(model);
} 
```

这是我的看法

```
@model Ienumerable<Models.items.items>

@Html.DropDownList("productCategoryFilter", 
                   new SelectList(ViewBag.CategoryDD), 
                   "---Select Category---") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:48:22.580

旁注 - 如果您在 View 和 Model 之间使用 ViewModel 而不是直接绑定到模型，则可以将 SelectList 放在 ViewModel 上并使用 @Html.DropdownFor() 而不是 @Html.Dropdown()。ViewBag 确实应该谨慎使用。

但是回到你原来的问题：

什么是“项目（）”？在你的行中

```
var ddl = new Items(); 
```

我不确定你有什么理由不让它可枚举。

我怀疑它不起作用，因为您从选择列表中创建了一个选择列表两次——在您后面的代码中将 ViewBag.CategoryDD 定义为 SelectList()，然后在您的 Razor 代码中创建一个新的 SelectList()现有的选择列表。你不应该这样做。

我这样做的方法是创建一个 ProductViewModel 类，其中包含您的产品类别列表和产品列表（您当前的模型），以及所选过滤器的属性。

```
public class ProductViewModel
{
    public IEnumerable<Model.items.items> ProductList {get;set;}
    public IEnumerable<SelectListItem> ProductCategoryList {get;set;} //SelectList is an IEnumerable<SelectListItem>
    public string SelectedCategory  {get;set;}
} 
```

然后在您看来，模型将是

```
@model ProductViewModel

@Html.DisplayFor(model => model.SelectedCategory, "---Select Category---")
@Html.DropdownListFor(model => model.SelectedCategory, Model.ProductCatgoryList) 
```

# google-plus - Google Hangouts API：我可以发起“直播”环聊吗？

> ID：13017657
> 
> 赞同：3
> 
> 时间：2012-10-22T18:41:09.280
> 
> 标签：google-plus, hangout

有没有办法通过 API 开始“直播”视频群聊？我已经创建了我的应用程序并且运行良好，但是我需要为我的客户提供视频群聊的嵌入代码。

我似乎找不到任何关于如何通过环聊按钮开始这样的环聊的文档。（https://developers.google.com/+/hangouts/button）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:32:06.840

目前无法嵌入环聊。但是，使用环聊按钮，开始屏幕包含用于进行环聊直播的标准复选框。developer.google.com/+/hangouts/按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:35:58.653

如果您同时在 youtube 上“直播”环聊，则可以嵌入环聊。

嵌入按钮位于环聊的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T06:13:08.067

只需在您的页面上添加以下脚本并从谷歌控制台创建 app_id 并将其替换为井号。

```
<div id="placeholder-div"></div>

<script>
window.___gcfg = {
  lang: 'en-US'
};

(function() {
  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
  po.src = 'https://apis.google.com/js/platform.js?onload=renderButton';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();

function renderButton(){
  gapi.hangout.render('placeholder-div', {
      'render': 'createhangout',
      'hangout_type'  :'onair',
      'initial_apps': [
        { app_id : '############', start_data : 'dQw4w9WgXcQ', 'app_type' : 'ROOM_APP' }
      ]
    });
}
</script> 
```

# c# - 我正在为字符串实现 CaseAccentInsensitiveEqualityComparer。我不确定如何实现 GetHashCode

> ID：13017660
> 
> 赞同：3
> 
> 时间：2012-10-22T18:41:26.127
> 
> 标签：c#, .net, string, string-comparison

我的代码是这样的：

```
public class CaseAccentInsensitiveEqualityComparer : IEqualityComparer<string>
    {
        public bool Equals(string x, string y)
        {
            return string.Compare(x, y, CultureInfo.InvariantCulture, CompareOptions.IgnoreNonSpace | CompareOptions.IgnoreCase) == 0;
        }

        public int GetHashCode(string obj)
        {
             // not sure what to put here
        }
    } 
```

我知道`GetHashCode`在这种情况下的作用，我缺少的是如何生成`InvariantCulture`,`IgnoreNonSpace`和`IgnoreCase`版本`obj`以便我可以返回它的`HashCode`.

我可以从`obj`自己身上删除变音符号和大小写，然后返回 it's `hashcode`，但我想知道是否有更好的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-24T20:40:18.697

返回 0 内部`GetHashCode()`工作（正如@Michael Perrenoud 所指出的那样），因为`Dictionaries`并且仅`HashMaps`调用两个对象返回相同的值。[规则](https://msdn.microsoft.com/pt-br/library/system.object.gethashcode(v=vs.100).aspx)是，如果对象相等，GetHashCode() 必须返回相同的值 。 缺点是（或）性能下降到与使用列表相同的程度。要找到一个项目，它必须调用每个比较。 一种更快的方法是转换为不区分重音的字符串并获取其哈希码。`Equals()``GetHashCode()`

`HashSet``Dictionary``Equals()`

[从这篇文章](https://stackoverflow.com/questions/359827/ignoring-accented-letters-in-string-comparison)中删除重音（变音符号）的代码

```
static string RemoveDiacritics(string text)
{
    return string.Concat(
        text.Normalize(NormalizationForm.FormD)
        .Where(ch => CharUnicodeInfo.GetUnicodeCategory(ch) !=
                                        UnicodeCategory.NonSpacingMark)
    ).Normalize(NormalizationForm.FormC);
} 
```

比较器代码：

```
public class CaseAccentInsensitiveEqualityComparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return string.Compare(x, y, CultureInfo.InvariantCulture, CompareOptions.IgnoreNonSpace | CompareOptions.IgnoreCase) == 0;
    }

    public int GetHashCode(string obj)
    {
        return obj != null ? RemoveDiacritics(obj).ToUpperInvariant().GetHashCode() : 0;
    }

    private string RemoveDiacritics(string text)
    {
        return string.Concat(
            text.Normalize(NormalizationForm.FormD)
            .Where(ch => CharUnicodeInfo.GetUnicodeCategory(ch) !=
                                          UnicodeCategory.NonSpacingMark)
          ).Normalize(NormalizationForm.FormC);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T18:43:37.107

啊，对不起，我把我的方法弄混了。当我在返回对象本身的哈希码之前实现了类似的东西时`return obj.GetHashCode();`，它总是会进入`Equals`方法。

* * *

好吧，经过一番困惑，我相信我已经明白了。我发现返回零总是会强制比较器使用该`Equals`方法。我正在寻找我实现它的代码来证明这一点并将其放在这里。

* * *

这是证明它的代码。

```
class MyArrayComparer : EqualityComparer<object[]>
{
    public override bool Equals(object[] x, object[] y)
    {
        if (x.Length != y.Length) { return false; }
        for (int i = 0; i < x.Length; i++)
        {
            if (!x[i].Equals(y[i]))
            {
                return false;
            }
        }
        return true;
    }

    public override int GetHashCode(object[] obj)
    {
        return 0;
    }
} 
```

# javascript - 如何评估函数声明中的变量？

> ID：13017662
> 
> 赞同：0
> 
> 时间：2012-10-22T18:41:35.457
> 
> 标签：javascript, loops, declaration

我正在编写一个简单的 JavaScript 表单，它是一个设备列表，每个设备旁边都有一个按钮，该按钮应将您带到一个文本字段，您可以在其中编辑有关设备的信息。相反，所有按钮都会将您带到列表中最后一个设备的信息。这是我创建列表的片段：

```
for(var i in portal.clients){
  var row = document.createElement('tr');
  var cell2 = document.createElement('td');
  var button = document.createElement('button')
  var title = document.createTextNode("Edit Config")
  button.appendChild(title)
  button.onclick = function(){displaySettingsPage(portal.clients[i]); console.log("Showing client: " + clientNum)}
  cell2.appendChild(button)
  row.appendChild(button)

  var cell1 = document.createElement('td');
  var client = document.createTextNode(portal.clients[i].info.description.name)
  cell1.appendChild(client)
  row.appendChild(cell1)
  table.appendChild(row);
} 
```

我认为问题是函数声明`i`中的`onClick`函数在单击按钮时被评估，而不是在函数声明时像我的意思那样。有没有一种方法可以在声明函数时强制对变量进行评估？还是我应该使用其他方法将客户端索引传递给函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:52:17.620

任何时候你想`i`在回调中使用你的迭代变量（即在你的循环完成之前不会被评估的东西）你需要在一个新的范围内捕获变量。

```
for(var i in portal.clients){
    (function(i){
        // do something later with i
    })(i);
} 
```

这里有很多关于 JavaScript 范围的讨论。我强烈建议您阅读它，因为以任何重要的方式理解 JavaScript 都是必不可少的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:55:14.520

您需要创建一个新的范围，其中`i`每个迭代都有一个副本。在您提供的代码中，您可以通过编写一个立即运行并返回您想要与附加的新范围中的变量一起使用的实际函数的函数来创建一个新范围：

```
for(var i in portal.clients) {
  var row = document.createElement('tr');
  var cell2 = document.createElement('td');
  var button = document.createElement('button')
  var title = document.createTextNode("Edit Config")
  button.appendChild(title)
  button.onclick = (function(i){return function(){displaySettingsPage(portal.clients[i]); console.log("Showing client: " + clientNum)}; })(i);
  cell2.appendChild(button)
  row.appendChild(button)

  var cell1 = document.createElement('td');
  var client = document.createTextNode(portal.clients[i].info.description.name)
  cell1.appendChild(client)
  row.appendChild(cell1)
  table.appendChild(row);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:51:00.600

您可以通过将循环置于自执行函数中来绕过它。未经测试的例子：

```
for(var i in portal.clients){
  (function (i) {
    var row = document.createElement('tr');
    var cell2 = document.createElement('td');
    var button = document.createElement('button')
    var title = document.createTextNode("Edit Config")
    button.appendChild(title)
    button.onclick = function(){displaySettingsPage(portal.clients[i]); console.log("Showing client: " + clientNum)}
    cell2.appendChild(button)
    row.appendChild(button)

    var cell1 = document.createElement('td');
    var client = document.createTextNode(portal.clients[i].info.description.name)
    cell1.appendChild(client)
    row.appendChild(cell1)
    table.appendChild(row);
  })(i);
} 
```

# ruby-on-rails - 从 ruby 使用 REST，这有什么好的宝石吗？

> ID：13017666
> 
> 赞同：0
> 
> 时间：2012-10-22T18:41:46.837
> 
> 标签：ruby-on-rails, rest

我需要从 REST api 消耗资源，我正在尝试找到一个好的宝石来做这件事，但我找不到任何好的东西......

你用这个做什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:43:43.950

我为此使用了[REST Client](https://github.com/archiloque/rest-client) gem - 到目前为止它运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:45:43.940

我使用活动资源。（但 Active Resource 的答案太短了，因为 StackOverflow 要求答案至少为 30 个字符。）

# php - PHP eval 和 heredoc 不能很好地发挥作用

> ID：13017672
> 
> 赞同：4
> 
> 时间：2012-10-22T18:42:17.630
> 
> 标签：php, eval, heredoc

> **可能重复：**
> [heredoc 与 eval 代码执行](https://stackoverflow.com/questions/1264981/heredoc-with-eval-code-execution)

所以我在function.php中有以下内容：

```
eval("\$content = <<<TEMPLATE\n
               asdf
\nTEMPLATE;"); 
```

而且我不断收到错误消息：

```
Parse error: syntax error, unexpected $end, expecting T_VARIABLE or T_END_HEREDOC or T_DOLLAR_OPEN_CURLY_BRACES or T_CURLY_OPEN in /var/www/function.php(10) : eval()'d code on line 5 
```

我无法弄清楚问题是什么。heredoc 语法显然有一个结尾，heredoc 只是不喜欢和 eval 玩得很好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T18:48:14.987

HEREDOC 语法以开头定义的分隔符结束，后跟分号，***再跟换行符***。您没有换行符，因此它不会被识别为 HEREDOC 的结尾。`\n`之后添加一个额外的`TEMPLATE;`，它应该可以正常工作。

# asp.net - http 处理程序 asp.net

> ID：13017680
> 
> 赞同：1
> 
> 时间：2012-10-22T18:42:55.947
> 
> 标签：asp.net

高 我正在尝试让一个 http 处理程序在我的本地计算机上的 iis 7.5 中工作。在 Visual Studio iis 的模式下，我的处理程序使用设置为的 web 配置工作。

```
<httpHandlers>
  <add verb="GET" path="ShowImages.ashx" type="achangeoftack_new_web.ShowImages" />
</httpHandlers> 
```

但是在部署时它会引发错误，所以我将其设置为

```
<system.webServer>
<modules runAllManagedModulesForAllRequests="true" />
<handlers>
  <add name="ShowImages.ashx" verb="GET" path="~/ShowImages.ashx" type="achangeoftack_new_web.ShowImages" />
</handlers>
<validation validateIntegratedModeConfiguration="true" /> 
```

但我仍然没有得到处理程序工作的运气。我想我已经尝试了一切，现在我开始拔头发了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:55:32.867

如果您使用的是 ASHX，则无需在 web.config 中进行注册，只需将其用作页面 url，例如

```
<img src="ShowImages.ashx?id=SomeImageId" /> 
```

它会起作用的。因此，我会尝试将这些元素从您的 web.config 中取出，看看是否能解决您的错误。

**为什么会这样**
当您`aspnet_regiis`在机器上运行时，ASHX 是为您注册到 IIS 中的扩展之一。 ![在此处输入图像描述](../Images/2cf6795f90af9e6778ae9f7e66835d7a.png)

在运行时，当 IIS 收到对 ASHX 文件的请求时，它会将其传递给 ASP.NET，然后 ASP.NET 以与页面或用户控件相同的方式解析它，然后您的代码就会运行。

如果您在独立类中编写了处理程序，则只需在 web.config 中注册处理程序。

# java - 用于Java中线程间使用的互斥锁？

> ID：13017683
> 
> 赞同：0
> 
> 时间：2012-10-22T18:43:05.987
> 
> 标签：java, multithreading, synchronization, mutex, semaphore

我想要一个 Java 中的 Mutex，它让我在一个线程中等待它并在另一个线程中释放它。我知道我可以使用容量为 1 的信号量，但问题是“acquire()”方法抛出“InterruptedException”。Java中有没有为此目的的特殊同步方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:05:55.320

幸运的是，Semaphore 为您提供了这种方法 :)

[公共无效获取不间断（）](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html#acquireUninterruptibly%28%29)

> 从这个信号量获取一个许可，阻塞直到一个可用。获得一个许可证，如果一个可用并立即返回，将可用许可证的数量减少一个。
> 
> 如果没有可用的许可，则当前线程出于线程调度的目的而被禁用并处于休眠状态，直到某个其他线程为此信号量调用 release() 方法并且当前线程接下来被分配许可。
> 
> 如果当前线程在等待许可时被中断，那么它将继续等待，但线程被分配许可的时间可能会与它在没有中断发生时收到许可的时间相比发生变化。当线程确实从此方法返回时，将设置其中断状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:50:41.067

`InterruptedException`不是问题，只需将其包装在一个循环中：

```
while(true) {
    try {
        semaphore.acquire();
        break;
    } catch(InterruptedException e) {
        //swallow, continue;
    }
} 
```

然而，这段代码不是很安全和优雅，但只要你“*想确保你能获得许可！* ”就可以工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:48:47.167

如果您有一个线程要等待的代码，那么除非您使用同步块，否则您肯定必须处理中断的异常。另外，中断异常有什么问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:15:30.190

**线程A**

```
volatile boolean waitCondition = true

synchronized(lockObject) {
  while (waitContidion) {
    lockObject.wait();
  }
} 
```

**线程B**

```
synchronized(lockObject) {
  waitCondition = false;
  lockObject.notifyAll();
} 
```

或在 Lock 实例上使用条件/信号。

正确处理 InterruptedException 非常重要，至少**必须**在 catch 块中使用**Thread.currentThread().interrupt()**方法设置它的中断标志。

# java - 在 java servlet 应用程序中执行异步数据库任务

> ID：13017685
> 
> 赞同：0
> 
> 时间：2012-10-22T18:43:14.307
> 
> 标签：java, multithreading, servlets, asynchronous

我有一个基于 jsp/servlet 的网络应用程序。

我有一个**“清理”**按钮，它调用一个 servlet，请求一直持续到 DAO 类。DAO 类执行不同的数据库活动，例如将数据从主表移动到备份表，然后从主表中删除数据等。

截至目前，此活动是同步的，用户需要等到发送响应。

我想实现与异步任务相同的场景，用户只收到一条消息“触发清理活动”

执行此任务的最佳/最简单方法是什么。我不能使用调度程序。

我的容器是 TomCat。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:45:33.097

`ExecutorService`是最稳健的解决方案。创建一个简单的线程也足够了。然而，更大的问题是同步。用于`Semaphore`控制两个用户是否不同时进行清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:46:06.230

**最简单但不同的解决方案**可能是**在客户端使用一些 AJAX 行为**。有很多简单/强大的框架（JS 文件）可以帮助您在页面中实现 AJAX。使用 AJAX，您只需异步提交请求并在服务器端处理请求时显示客户端消息“已触发清理活动”。如果用户等待，服务器进程将返回并显示“成功”消息，否则用户可以自由浏览其他页面或执行其他操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:46:40.507

我们为我们的项目做过一次，效果很好。

只要处理请求没有问题，我们就会向用户发送 200 ok。我们使用 java executorservice 来进行清理。

如果出现问题，请单独通知用户。

# database - MATLAB：为什么我没有将 SQL 结果返回到游标对象中？

> ID：13017688
> 
> 赞同：3
> 
> 时间：2012-10-22T18:43:26.183
> 
> 标签：database, matlab, cursor, try-catch, rowcount

我正在使用带有数据库工具箱的 MATLAB R2012b 来访问 SQL Server 2012。我了解到，在使用 TRY/CATCH 时，必须通过声明的变量对 SELECT @@ROWCOUNT 进行管道传输，以返回在 try 块之后受影响的行。我发现[这个链接](http://fwtb.wordpress.com/2012/06/20/microsoft-sql-server-t-sql-getting-affected-row-count-after-try-catch-block/)给出了一个清晰的例子。

当我在 MATLAB 中使用新的 runsqlscript() 命令执行我的 SQL 脚本时，SQL 游标对象显示操作成功，但 SQL 游标对象在“数据”字段中显示 (0) 作为结果。我知道这并不代表插入的行数，正如我通过在 SSMS 中执行等效脚本验证的那样。

任何想法/建议表示赞赏，谢谢，布拉德

```
>> SQL_cursor
SQL_cursor =

        Attributes: []
              Data: 0
    DatabaseObject: [1x1 database]
          RowLimit: 0
          SQLQuery: [1x541 char]
           Message: [1x42 char]
              Type: 'Database Cursor Object'
         ResultSet: []
            Cursor: [1x1 com.mathworks.toolbox.database.sqlExec]
         Statement: [1x1 com.microsoft.sqlserver.jdbc.SQLServerStatement]
             Fetch: 0

% This Message is the normal text returned when there's no error
>> SQL_cursor.Message
ans = The statement did not return a result set.

% The Data value should not be zero: rows were inserted!
>> SQL_cursor.Data
ans = 0 
```

这是我在 MATLAB 中执行的 SQL 脚本。注意通用标记（'DATABASE_NAME' 等）。

```
USE DATABASE_NAME

DECLARE @N_ROWS INT

BEGIN TRANSACTION
BEGIN TRY

BULK INSERT TABLE_NAME 
    FROM 'DATA_FILE_NAME'
    WITH 
          (
             CHECK_CONSTRAINTS,
             FIELDTERMINATOR ='\t',
             ROWTERMINATOR ='\r\n',
             FORMATFILE = 'FORMAT_FILE_NAME',
             DATAFILETYPE = 'char',
             MAXERRORS = 0,
             TABLOCK
          )            

SET @N_ROWS = @@ROWCOUNT
COMMIT TRANSACTION
END TRY

BEGIN CATCH
ROLLBACK TRANSACTION
END CATCH

SELECT @N_ROWS 
```

* * *

更新#1：实际上，即使没有所有 TRY/CATCH & TRANSACTION 框架，也会出现此问题。精简的 SQL 代码在游标对象中生成相同的 (0) 'Data' 字段：

```
USE DATABASE_NAME

BULK INSERT TABLE_NAME 
    FROM 'DATA_FILE_NAME'
    WITH 
          (
             CHECK_CONSTRAINTS,
             FIELDTERMINATOR ='\t',
             ROWTERMINATOR ='\r\n',
             FORMATFILE = 'FORMAT_FILE_NAME',
             DATAFILETYPE = 'char',
             MAXERRORS = 0,
             TABLOCK
          )            

SELECT @@ROWCOUNT 
```

MATLAB结果：

```
>> SQL_cursor
 SQL_cursor =
        Attributes: []
              Data: 0
    DatabaseObject: [1x1 database]
          RowLimit: 0
          SQLQuery: [1x397 char]
           Message: [1x42 char]
              Type: 'Database Cursor Object'
         ResultSet: []
            Cursor: [1x1 com.mathworks.toolbox.database.sqlExec]
         Statement: [1x1 com.microsoft.sqlserver.jdbc.SQLServerStatement]
             Fetch: 0

>> SQL_cursor.Message
ans = The statement did not return a result set.
>> SQL_cursor.Data
ans = 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T06:30:31.277

我有个类似的问题。我认为问题在于您正在运行多个语句，即使第二个返回数据，第一个语句也不返回任何内容。

尝试分别运行语句。 [这个页面](http://blogs.msdn.com/b/jdbcteam/archive/2008/08/04/sqlserverexception-the-statement-did-not-return-a-result-set.aspx)给了我这个想法。

# jquery-mobile - 水平滚动工具栏实现

> ID：13017697
> 
> 赞同：0
> 
> 时间：2012-10-22T18:43:50.523
> 
> 标签：jquery-mobile, scroll, android-webview

我正在尝试在我的应用程序顶部添加一个水平工具栏（使用 android webview 和 jquery mobile），其中包含一堆按钮（太多，无法在一行中显示在屏幕上）。

我面临的问题是，它们没有隐藏额外的按钮，而是环绕到下一行。我想要的是通过水平滚动它们来隐藏和访问它们，就像原生 ListView 允许我做的那样。

我尝试使用 ListView 将按钮放入，并通过 loadUrl() 将按钮按下传递给 javascript 代码，但这会导致其他问题并且在我的情况下不可用（它会自动隐藏软键盘）。

我尝试了以下代码（以及包装在 jquery 移动工具栏中的代码）：

```
<ul data-role="controlgroup" data-type="horizontal">                    
                <li><a href="" data-role="button" id="boldButton" data-inline="true">B</a></li>
<li><a href="" data-role="button" id="italicButton" data-inline="true">I</a></li>
<li><a href="" data-role="button" id="underlineButton" data-inline="true">U</a></li>
<li><a href="" data-role="button" id="strikethroughButton" data-inline="true">S</a></li>
<li><a href="" data-role="button" id="orderedListButton" data-inline="true">ol</a></li>
<li><a href="" data-role="button" id="unorderedListButton" data-inline="true">ul</a></li>
<li><a href="" data-role="button" id="indentButton" data-inline="true">in</a></li>
<li><a href="" data-role="button" id="outdentButton" data-inline="true">out</a></li>
<li><a href="" data-role="button" id="subscriptButton" data-inline="true">sub</a></li>
<li><a href="" data-role="button" id="superscriptButton" data-inline="true">sup</a></li></ul> 
```

但这只是绕到下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:53:13.110

尝试将 ul 放在一个 div 中，并将 div 的 width 属性设置为一个大值，足以容纳所有按钮。然后将溢出属性设置为自动，你应该很高兴。

# json - 模型绑定 POST 与 NancyFx 中的对象数组

> ID：13017700
> 
> 赞同：12
> 
> 时间：2012-10-22T18:44:06.730
> 
> 标签：json, data-binding, post, deserialization, nancy

我有一个具有以下结构的 json 对象

```
{
 ContainerType: "Box",
 Items : [{Name: "Coin", Amount: 5}, {Name: "Spyglas", Amount : 1}]   
} 
```

该对象在 Nancy 后端系统中有一个表示形式：

```
public string ContainerType {get; set}
public IEnumberable<Item> Items {get; set} 
```

其中 Item （如预期的那样）是一个非常简单的具有公共属性的对象：

```
public string Name {get; set;}
public double Amount {get; set;} 
```

我的问题是，当我在我的模块（基于 NancyModule）中收到 Post 时，只有字符串属性被绑定在这行代码中：

```
var model = this.databind<MyContainerModel>(); 
```

我尝试将列表类型更改为更具体的（List<MyContainerModel>），更改为数组（MyContainerModel[]），但似乎没有任何效果。

Nancy 的 git-repo 演示部分中的数据绑定示例仅处理整数的反序列化，但我的问题是使用 javascript 对象对数组进行反序列化。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-22T19:52:14.150

几个小时后，我找到了解决方案。问题不在于它的南希部分，而是我的 ajax 帖子没有正确的标题。添加*contentType*和*dataType*就可以了：

```
$.ajax({
    url: '/add',
    type: 'POST',
    data: normalModel,
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',

}) 
```

希望这对未来的读者有所帮助！

# jsf-2 - SelectOneMenu 中长列表的 JSF 策略，例如 TimeZones

> ID：13017702
> 
> 赞同：1
> 
> 时间：2012-10-22T18:44:15.657
> 
> 标签：jsf-2, selectonemenu

我正在实现一种让用户指定他们的时区的方法。那里没有什么新鲜事。当用户需要从数百个选项的列表中进行选择，但可能不立即知道列表中的正确值时，我想听听人们说什么是处理案例的好策略。我知道我可以使用自动完成之类的东西，但这只有在人们知道他们在寻找什么的情况下才有效。当然，国家应该是显而易见的，但是......最低公分母（有些人很愚蠢......像我一样;）。

有超过 400 个不同的 iso 时区（不包括 EST、PST 等，我不包括在内）。那是一个很长的清单。如果我们让用户首先选择他们所在的国家，例如另一个选择菜单，则可以方便地划分。但是有200多个国家。那么如何呈现 200 个易于合作且高效的国家？

我已经在一个 jar 中创建并打包了许多类，以从 Olson 时区文件（iso3166.tab 和 zone.tab）中读取，并提供时区和时区国家/地区的数组列表，包括将指定国家/地区的优先级放在列表的顶部。但现在我想学习一种更好的方式来展示国家和时区。我自己做了这个，因为我发现它是一种提取和关联国家代码和时区代码的更简单、更干净的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:25:00.980

对于您的特定要求，我可以考虑使用您在以格林威治为中心的 Ubuntu 等 Linux 发行版中看到的世界地图。然后为您拥有的数据放置标记并让用户选择最近的标记。

请参阅[Ubuntu的时区选择](https://help.ubuntu.com/community/UbuntuTime)

为此，您可以使用 Primefaces [GMAP](http://www.primefaces.org/showcase/ui/gmapMarkerSelect.jsf)组件并添加如下叠加层：

```
 LatLng coord1 = new LatLng(36.885233, 30.702323); 
 PlaceResult placeResultObj1 = new  new PlaceResult("660")

 //Basic marker  
 simpleModel.addOverlay(new Marker(coord1, "Konyaalti", placeResultObj1)); 
```

PlaceResult.java

```
public class PlaceResult {
    private String utc_offset;

    public PlaceResult(String utc_offset){
        this.utc_offset = utc_offset;
    }

    public String getUtc_offset() {
        return utc_offset;
    }

    public void setUtc_offset(String utc_offset) {
        this.utc_offset = utc_offset;
    }

} 
```

另一种方法是使用 Google 地图中的 Places 库。使用它可以`google.maps.places.PlaceResult`通过各种方法获取对象，我喜欢可以选择城市的自动完成功能。选择城市后，您可以在信息窗口中显示 utc_offset。

你可以看看这个[演示](http://jsbin.com/oyoluy/2)

目前，似乎大多数城市都没有设置 utc_offset。我发现有 utc_offset 的地址之一是

Newy 机​​场穿梭巴士在澳大利亚。然后您可以将 off_set 作为输入隐藏参数传递，以将值提交给服务器。

也可以看看：

*   [Google 地方信息库](https://developers.google.com/maps/documentation/javascript/places#place_details_requests)

# java - Java 和 .NET：Base64 转换混淆

> ID：13017703
> 
> 赞同：6
> 
> 时间：2012-10-22T18:44:15.480
> 
> 标签：java, .net, base64

我无法在 Java (Android) 和 .NET (Visual Basic) 中将文本转换为 Base64 字符串。ASCII 字符的普通（可读）形式可以很好地转换。但是当涉及到特殊字符（代码大于 128 的字符）时，它们给我带来了麻烦。

例如，我尝试转换 ASCII 值为 65 的字符代码（字符“A”）。

我的Java代码是：

```
char a = 65;
String c = String.valueOf(a); 
byte bt[] = c.getBytes();               
String result = Base64.encodeToString(bt, Base64.DEFAULT); 
```

我的 .NET 代码是：

```
Dim c As String = Chr(65)
Dim result as String = Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(c)) 
```

它们都返回相同的结果：“QQ==”。这可以。但是当我尝试转换一个特殊字符时，例如一个字符代码 153。然后它返回不同的结果。

```
char a = 153;
String c = String.valueOf(a);               
byte bt[] = c.getBytes();               
String result = Base64.encodeToString(bt, Base64.DEFAULT); 
```

这将返回“wpk=”

和我相同的 .NET 代码：

```
Dim c As String = Chr(153) 
Dim result as String = Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(c)) 
```

这将返回“4oSi”

这太奇怪了。这里有什么问题。我在两个平台上都使用本机 Base64 库。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T19:01:45.617

由于您正在编码的数据是加密数据 - 任何字节都可以从 0 到 255 的随机数据，并且在其加密状态下，没有字符或文本含义，因此您需要将此信息视为 - 让我们称之为 -`true binary`数据。Java 和 .NET 都通过各自的字节数组原语完全支持真正的二进制数据。

如您所知，base64 编码是将真正的二进制数据（范围为 0 到 255）转换为稍大的二进制数据数组（其中每个字节保证与 32 之间的 ASCII 可打印字符具有相同的值）的过程和 126)。让我们称之为`encoded binary`. 然后`encoded binary`可以安全地将其转换为文本，因为几乎每个已知字符集都同意可打印的 ASCII 字符集（32 到 126）。

因此，Java 和 VB.NET 片段的主要问题是您试图使用文本原语 - Java 中的 char 和 String；VB.NET 中用于存储`true binary`数据的字符串。一旦你这样做就太晚了。没有办法将其可靠地转换回字节数组，因为文本原语根本不是为了安全地存储和检索二进制数据而设计的。有关为什么会这样的更多信息，请阅读[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

幸运的是，修复很简单。对于 Java，不要使用 char 和 String 来存储二进制数据。将数据直接放入字节数组。尝试以下操作：

```
 byte [] bt = new byte[1];
  bt[0] = (byte) 153;
  String result = Base64.encodeToString(bt, Base64.DEFAULT); 
```

我得到 mQ==

该修复在 VB.NET 中在概念上是相同的。不要使用字符串。使用字节数组。

```
 Dim bytes() As Byte = New Byte() {153}
    Dim result As String = Convert.ToBase64String(bytes) 
```

再次 - 答案是 mQ==

最后，在编码之后，使用字符串就完全没问题了。您的字符在 ASCII 子集中，字符串和字节数组之间的任何转换都不会损坏数据，因为所有字符集都同意 ASCII 子集。

请记住，您将以相反的顺序遇到相同的问题 - 解码。您将解码为一个字节数组，此时您将返回`true binary`. 从这一点开始，数据绝不能存储为字符串 - 直到你完成它 - 例如。将其解密回原始明文。

希望这可以帮助。

# java - 为什么这些继承的类型被用作参数化类型不兼容的类型？

> ID：13017705
> 
> 赞同：1
> 
> 时间：2012-10-22T18:44:29.920
> 
> 标签：java, generics, inheritance, collections

我理解参数化集合，如果你想使用参数化类型的子类型，你需要将集合声明为`Collection<? extends Whatever>`

例如：

```
public interface Fruit {}
public interface Banana extends Fruit {}

void thisWorksFine() {
  //Collection<Fruit> fruits;          //wrong
  Collection<? extends Fruit> fruits;  //right
  Collection<Banana> bananas = new ArrayList<>();
  fruits = bananas;
} 
```

但是如果我添加一个额外的层，这会爆炸：

```
public interface Box<T> {}

void thisDoesNotCompile() {
    Collection<Box<? extends Fruit>> boxes;
    Collection<Box<Banana>> bananaBoxes = new ArrayList<>();
    boxes = bananaBoxes;  // error!
} 
```

出现错误：

```
error: incompatible types
required: Collection<Box<? extends Fruit>>
found:    Collection<Box<Banana>> 
```

为什么这些不兼容？有什么办法可以让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:47:36.290

因为你可以添加一个`Box<Apple>`to `boxes`，这会违反`bananaBoxes`.

```
public interface Apple extends Fruit {}

//...

Box<Apple> apples = new Box<>(); // this is legal
Box<? extends Fruit> fruits = apples; // this is legal

Collection<Box<Banana>> bananaBoxes = new ArrayList<>(); 

Collection<Box<? extends Fruit>> boxes = bananaBoxes; //if this were legal...
boxes.add(fruits); //then this would be legal

//and this would be a type violation:
Box<Banana> bananas = bananaBoxes.iterator().next(); 
```

你可以改为

```
Collection<? extends Box<? extends Fruit>> boxes = bananaBoxes; 
```

这是合法的，因为它可以防止上述情况。

# php - Facebook - 进行离线 Graph API 调用

> ID：13017711
> 
> 赞同：-2
> 
> 时间：2012-10-22T18:44:53.227
> 
> 标签：php, facebook, facebook-graph-api

我有一个任务，我必须在 FQL 中调用 Graph API 以获得我的多少朋友喜欢指定页面。

看起来像：

```
//Create Query
$params = array(
    'method' => 'fql.query',
    'query' => "SELECT uid FROM page_fan WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND page_id = $fbpageid"
);
//Run Query
$result = $facebook->api($params); 
```

现在，如果用户有 10 或 20 或 30 或 40 或 50 个朋友，我必须警告他。我不知道确切的方式，也许张贴在他的墙上（你能说得更好吗？）。

那么我可以通过 cron 作业来完成，因为 offline_access 已被弃用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:10:33.827

您可以将用户访问令牌与有效期为 30 天的长寿命令牌交换。如果用户在这 30 天内访问该应用程序，您可以将令牌再延长 30 天。

此处记录了如何交换访问令牌：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# c# - 从参数中的控件名称中查找表单值

> ID：13017726
> 
> 赞同：0
> 
> 时间：2012-10-22T18:45:51.097
> 
> 标签：c#, string, variables, replace

我需要用值替换电子邮件中的占位符。占位符和表单控件名称位于自定义列表`<MailReplacements>`中，例如：

```
replacement.placeholder = "[UserName]",
replacement.formcontrol = "NameText.Text", 
```

因为`[UserName]`实际上是我想要使用的，所以它在我的`string.Replace`. 但是，如何`NameText.Text`在我的 string.replace 中使用 VALUE？如果我使用：

```
message.replace(replacement.placeholder, replacement.formcontrol); 
```

我可以理解地收到一条消息，其中`[UserName]`替换为`NameText.Text`. 我如何用`NameText.Text`（即“Joe Blow”）的值替换它？

`[UserName]`and`NameText.Text`关联来自`web.config`. 所以，我不是故意将`NameText.Text`其用作字符串，而是将其作为字符串接收。

我不知道如何将该字符串转换为它所代表的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:36:59.413

我刚刚找到了 FindControl：

```
var StoredPlaceholders = (CustomConfigurationSection)ConfigurationManager.GetSection("MailPlaceholders");
 foreach (CustomConfigurationSection placeholder in StoredPlaceholders.SubSections["placeholder"])
            {
                MailReplacements.Add(new MailPlaceholder
                {
                    Placeholder = placeholder.Attributes["name"],
                    Formcontrol = placeholder.Attributes["form"]
                });
            }
            foreach (MailPlaceholder replacement in MailReplacements)
            {
                if ( !String.IsNullOrEmpty(replacement.Formcontrol))
                {
                    TextBox txt = RequestForm.FindControl(replacement.Formcontrol) as TextBox;
                    if (txt != null) replacement.ReplacementValue = txt.Text;
                }
            } 
```

# javascript - IFrame .appendto 不适用于 Safari

> ID：13017731
> 
> 赞同：0
> 
> 时间：2012-10-22T18:46:09.990
> 
> 标签：javascript, jquery, safari

一个网页有一个提交事件，使用jquery作为第三方在web服务器上记录页面表单数据。该代码通过将 IFrame 附加到 html 页面的正文，使用查询字符串通过 IFrame 'src' 属性将数据传递到 Web 服务器来工作。该代码适用于 IE、FF 和 Chrome 等浏览器，但不适用于 Safari。

有没有人知道如何让它与 Safari 一起工作？

代码： jQuery(document).ready(function () { jQuery('form').submit(function () {

```
 var url = "http://sitewritedata.aspx?accountID=123";
            jQuery('<iframe />', {
                id: 'iframe' + new Date().getTime(),
                name: 'iframe' + new Date().getTime(),
                width: '0',
                height: '0',
                frameborder: '0',
                src: url
            })
            .appendTo('body');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:48:21.077

假设域/端口/协议相同，您是否尝试过使用`contents()`

```
jQuery('<iframe />', {
   id: 'iframe' + new Date().getTime(),
   name: 'iframe' + new Date().getTime(),
   width: '0',
   height: '0',
   frameborder: '0',
   src: url
})
.contents().appendTo('body'); 
```

# powershell - 如何在内部加载带有 powershell v2 的 Powershell ISE 3？

> ID：13017734
> 
> 赞同：7
> 
> 时间：2012-10-22T18:46:27.453
> 
> 标签：powershell, sharepoint-2010, powershell-3.0, powershell-ise

我刚刚在我的 Windows 7 机器上安装了新的 powershell 3，然后我发现新版本的 powershell 不适用于 Sharepoint 2010。

我还找到了解决此问题的方法（[此处](http://tomvangaever.be/blogv2/2012/07/sharepoint-2010-server-2012-and-powershell-3-microsoft-sharepoint-is-not-supported-with-version-4-0-30319-17626-of-the-microsoft-net-runtime/)或[此处](http://blogs.msdn.com/b/levs/archive/2012/06/18/powershell-3-0-and-sharepoint-2010.aspx)）。但它只解决了标准 powershell 控制台的问题。由于我们通过 ISE 完成大部分工作，我想知道是否可以在 ISE 中做同样的事情？

我尝试添加版本参数，但 ISE 不知道。我尝试在`powershell -version 2`ISE 的控制台中输入，但没有帮助。

如果不可能，我还有一个问题：我需要将 ISE 与 Sharepoint 2010 一起使用，那么如何卸载 powershell 3 和新的 ISE？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T11:53:55.117

这是安装 Windows Management Framework 3.0 更新（包括 PS 3.0）时的一个已知问题，由于它使用 .net 4.0，因此所有 SP2010 cmdlet（即 3.5）不兼容。

控制台应用程序可以接受“-version 2”开关，但正如指出的那样，这与 ISE 不兼容。

这是一个[已知问题](http://support.microsoft.com/kb/2796733)，另[一篇文章](http://sharepoint.nauplius.net/2012/12/do-not-install-the-windows-management-framework-3-0-kb2506143-on-sharepoint-2010-servers/)建议**卸载 WMF 更新**并重新启动服务器，我认为这是您问题最后一部分的唯一真正答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T16:49:39.647

您可以通过创建新的 PSSession 来做到这一点。

```
Register-PSSessionConfiguration -Name PS2 -PSVersion 2.0 –ShowSecurityDescriptorUI

# Please consult system admin when your run set-item and Enable-WSManCredSSP command
Set-Item wsman:localhost\client\trustedhosts -value * -Confirm:$false -Force
Enable-WSManCredSSP -Role Client –DelegateComputer * -Force
Enable-WSManCredSSP -Role Server -Force

# For test purpose
# Get-WSManCredSSP
# get-item wsman:localhost\client\trustedhosts

$cred = Get-Credential
$session = New-PSSession -ComputerName $env:COMPUTERNAME -authentication credssp -ConfigurationName PS2 -Credential $cred
Enter-PSSession $session

# 2.0 runtime
Add-PSSnapin microsoft.sharepoint.powershell
$web = Get-SPWeb http://SPSite/
$web.Url

Exit-PSSession

Unregister-PSSessionConfiguration -Name PS2

Disable-WSManCredSSP -Role Client
Disable-WSManCredSSP -Role Server 
```

如果您不退出 PSSession，则可以从 Powershell ISE 3 运行 2.0 运行时命令。

# json - JSON 和杰克逊

> ID：13017745
> 
> 赞同：0
> 
> 时间：2012-10-22T18:47:06.370
> 
> 标签：json, jackson

如何告诉杰克逊忽略 JSON 名称？

我有以下 POJO：

```
class MyPojo {
   private String ABCName;
} 
```

当我有一些东西时：

"ABCName" : "foo" ，然后 Jackson 无法识别它会引发错误。

它期望以下内容：

“abcName”：“foo”。

代码：

```
import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.map.ObjectMapper;

    public class TestJackson {

        public static void main(String args[]) throws Exception {

            ObjectMapper mapper = new ObjectMapper();
            MyPojo my = new MyPojo();
            my.setABCName("Foo");
            System.out.println(mapper.writeValueAsString(my));

        }

        private static class MyPojo {

            private String ABCName;
            public void setABCName(String ABCName) {
                this.ABCName = ABCName;
            }

            public String getABCName() {
                return ABCName;
            }
        }

    } 
```

输出：{"abcname":"Foo"}

然后我尝试用注释 ABCName：@JsonProperty("ABCName")

在我注释并运行代码之后，这就是我得到的： {"ABCName":"Foo","abcname":"Foo"}

结果是重复的。

我有一个 JSON 客户端，它将发送为：“ABCName”：“Foo”，我需要在 Jackson 中处理它。

有什么解决方法吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:17:12.750

你可以试试genson [http://code.google.com/p/genson/](http://code.google.com/p/genson/)。以下代码应该会产生您期望的结果。

```
String json = "{\"ABCName\" : \"foo\"}";
MyPojo my = new MyPojo();
my.setABCName("Foo");

Genson genson = new Genson();
System.out.println(genson.serialize(my));
System.out.println(genson.deserialize(json, MyPojo.class).ABCName);

 public static class MyPojo {
     private String ABCName;
     public void setABCName(String ABCName) {
         this.ABCName = ABCName;
     }

     @JsonProperty("ABCName") public String getABCName() {
         return ABCName;
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:14:34.607

实际上，以下内容适用于杰克逊本身：

```
public class MyPojo {
     private String ABCName;
     public void setABCName(String ABCName) {
         this.ABCName = ABCName;
     }

     @JsonProperty("ABCName") 
public String getABCName() {
         return ABCName;
     }
 } 
```

结果：{"ABCName":"Foo"}

但是当您注释该字段时，它会导致重复，这意味着以下内容不起作用：

```
public class MyPojo {
         @JsonProperty("ABCName") 
         private String ABCName;
         public void setABCName(String ABCName) {
             this.ABCName = ABCName;
         }

    public String getABCName() {
             return ABCName;
         }
     } 
```

结果：{"ABCName":"Foo","abcname":"Foo"}

看起来注释必须在 getter 方法之上。

非常感谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:56:41.490

您可以通过如下设置注释内省器来尝试杰克逊本身

公共类TestJackson {

```
 public static void main(String args[]) throws Exception {

        ObjectMapper mapper = new ObjectMapper();
        AnnotationIntrospector introspector = new JaxbAnnotationIntrospector();
        mapper.setAnnotationIntrospector(introspector);
        MyPojo my = new MyPojo();
        my.setABCName("Foo");
        System.out.println(mapper.writeValueAsString(my));

    }

    private static class MyPojo {

        @JsonProperty("ABCName")
        private String ABCName;
        public void setABCName(String ABCName) {
            this.ABCName = ABCName;
        }

        public String getABCName() {
            return ABCName;
        }
    }

} 
```

# c# - 如何在 C# 中获取没有 new() 的存储库

> ID：13017747
> 
> 赞同：2
> 
> 时间：2012-10-22T18:47:16.197
> 
> 标签：c#, dependency-injection

首先我正在阅读这篇[文章](http://www.codeproject.com/Articles/90793/WCF-by-Example-Chapter-II-Repositories)。他使用内存存储库中的自定义来测试和证明概念原因。`RepositoryEntityStore`. 然后为了避免使用 new 他实现了这个不包含在文章中但在示例中。

```
namespace eDirectory.Naive.Repository
{
    /// <remarks>
    /// version 0.2 Chapter II: Repository
    /// </remarks>
    public class RepositoryLocatorEntityStore
        : RepositoryLocatorBase
    {
        protected Dictionary<Type, object> RepositoryMap = new Dictionary<Type, object>();

        public override IRepository<T> GetRepository<T>()
        {
            var type = typeof(T);
            if (RepositoryMap.Keys.Contains(type)) return RepositoryMap[type] as IRepository<T>;
            var repository = new RepositoryEntityStore<T>();
            RepositoryMap.Add(type, repository);
            return repository;
        }
    }
} 
```

后来我认为他使用 DI 甚至没有创建 `RepositoryEntityStore`. 问题是我如何修改它以使用扩展的类`RepositoryEntityStore`？像 CustomerRepositoryEntityStore 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:07:06.087

如果您事先并不真正知道（或者不想知道，作为 DI 的一部分）确切的类型，您可以使用`Activator.CreateInstance(typeof(T))`

您仍然必须确保您的类型提供默认构造函数`new()`

为了提供这种灵活性，您将需要使用 IoC（[控制反转](http://msdn.microsoft.com/en-us/library/ff921087%28v=pandp.20%29.aspx)）容器，该容器将包含映射或某些逻辑，以确定在实例化对象时使用哪个依赖项。

这可以通过一些外部组件（例如[ninject）](http://www.ninject.org/)来实现，也可以像生成类型和程序集之间映射的配置文件一样简单。

然后，由于您使用的是泛型类，因此您将需要`Make`正确的（计算的）类型。这个命令负责这个：`MakeGenericType(type)`

然后，您将能够创建此生成类型的实例。

所以你的代码看起来像：

```
namespace eDirectory.Naive.Repository
{
    /// <remarks>
    /// version 0.2 Chapter II: Repository
    /// </remarks>
    public class RepositoryLocatorEntityStore
        : RepositoryLocatorBase
    {
        protected Dictionary<Type, object> RepositoryMap = new Dictionary<Type, object>();

        public override IRepository<T> GetRepository<T>()
        {
            var type = typeof(T);
            if (RepositoryMap.Keys.Contains(type)) return RepositoryMap[type] as IRepository<T>;
            Type DIRepository = IoCContainer.getType()// get the right type from your mapping (IoC container)
            var repository = Activator.CreateInstance(DIRepository.MakeGenericType(type));
            RepositoryMap.Add(type, repository);
            return repository;
        }
    }
} 
```

# c# - 如何在非 msi 安装程序中实现 COM 互操作

> ID：13017748
> 
> 赞同：1
> 
> 时间：2012-10-22T18:47:17.473
> 
> 标签：c#, visual-studio-2008, com

我正在尝试使用非 msi 安装程序分发 Visual Studio 的 .NET 向导表单。为简单起见，让我们关注 Visual Studio 2008。

因此，作为装配后构建过程的一部分，我调用：

`regasm /regfile C:\path\to\my\assembly.dll`

然后，打包生成的 regfile 并使用 regedit 将其与最终用户注册表合并。我看到程序集名称和 CLSID 已正确生成并分别放入 HKEY_CLASSES_ROOT 和 HKEY_CLASSES_ROOT\CLSID。

但是，在 Visual Studio 方面，安装完成后，出现错误。详细地说，该向导通过 vsdir 文件在“添加新项目”中看到。这指向 vsz 文件，Visual Studio 在该文件中看到相应的 COM 类。我可以说它在 HKEY_CLASSES_ROOT 中看到了这个类，因为错误消息实际上显示了正确的 CLSID：

`Class not registered. Looking for object with CLSID: {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}`

我不完全确定问题是什么。我知道旧的 InstallShield 项目有一个简单的复选框，用于将程序集安装为 COM 互操作。不幸的是，这对我不可用。也许这不是真正的问题，我在 Visual Studio 2008 安装方面遗漏了一些东西。

任何想法或调试帮助将不胜感激。首先，我想验证是否为 COM 互操作正确安装了该程序集。我以前从未使用过 COM，所以对我来说都是希腊语。:)

**编辑**：我应该提到，这个相同的程序集是用一个“旧”的 InstallShield 项目构建和分发的。因此，我知道问题在于我自己对将 .NET COM 向导添加到 Visual Studio 添加项对话框的理解/实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:21:10.043

您的类（或程序集）是否将 Com 可见属性设置为 true？

# c# - 获取任何枚举的方法

> ID：13017750
> 
> 赞同：4
> 
> 时间：2012-10-22T18:47:33.720
> 
> 标签：c#

> **可能重复：**
> [创建将 T 限制为枚举的通用方法](https://stackoverflow.com/questions/79126/create-generic-method-constraining-t-to-an-enum)

是否可以创建一个接受任何枚举的通用方法？然后，我将检查传入的类型，首先确保它是一个已通过的枚举（或者我可以通过方法定义自然地强制执行它吗？）其次，如果它是一个枚举，我将有一堆 case 语句来做一些事情基于传递的枚举类型。因此，例如，我可以将 CompanyColumns、PayColumns 等作为枚举传递给它。我的方法需要能够采用这样的任何枚举，然后允许我在内部案例语句中使用枚举。

public static DbType GetColumnDataType（我希望能够传入任何枚举对象）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T18:52:43.720

```
public static void MyFunction<T>(T en) where T: IComparable, IFormattable, IConvertible
{
    if (!typeof(T).IsEnum)
        throw new ArgumentException("en must be enum type");
    // implementation
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T18:51:26.383

试试这个：

```
public static DbType GetColumnDataType(Enum en){...} 
```

这不是通用的，但工作得很好。

如果您想要通用，您可以执行以下操作：

```
public DbType GetColumnDataType<T>(T en)
{
    Type t = n.getType();
    if (!t.isEnum)
    {
      //through exception 
    }
} 
```

# ruby-on-rails - Nginx：无法将 HTTP 响应转发回 HTTP 客户端

> ID：13017756
> 
> 赞同：0
> 
> 时间：2012-10-22T18:48:01.983
> 
> 标签：ruby-on-rails, ubuntu, nginx, passenger

我有一个带有以下组件的服务器：

*   Ubuntu 12.04
*   Nginx 1.2.2
*   乘客 3.0.15

我正在此服务器上运行 Ruby on Rails 应用程序。现在在我的 Nginx 的 error.log 中，我发现这个错误经常弹出。

```
[ pid=12615 thr=3065355072 file=ext/nginx/HelperAgent.cpp:923 time=2012-10-22 09:31:03.929 ]: Couldn't forward the HTTP response back to the HTTP client: It seems the user clicked on the 'Stop' button in his browser. 
```

有谁知道这个问题来自哪里？这是我的 Nginx 配置文件：

```
user deployer staff;
worker_processes  5;

error_log  /var/log/nginx/error.log notice;
pid        /var/log/nginx/nginx.pid;

events {
    worker_connections  2048;
    multi_accept on;
}

http {
    passenger_root /var/lib/gems/1.9.1/gems/passenger-3.0.15;
    passenger_ruby /usr/bin/ruby1.9.1;

    include       mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;

    keepalive_timeout  65;

    server {
        passenger_enabled on;
        server_name xxx.com;
        listen       80;
        rails_env production;

        location ^~ /assets/ {
            gzip_static on;
             expires max;
             add_header Cache-Control public;
        }

        root /var/rails/alfa_paints/current/public;
        error_page  404              /404.html;

        error_page   500 502 503 504  /500.html;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:18:14.427

你的配置看起来不错。我认为错误正是它所说的：最终用户在浏览器上单击“停止”，关闭与服务器的 TCP 连接。您的应用程序堆栈中的所有内容都可能按设计工作。除非您有最终用户抱怨应用程序无法运行，否则这是最可能的解释。

也就是说，如果您经常看到此错误，您可能会问的下一个问题是“为什么用户如此频繁地点击停止按钮”？也许您的应用程序的一部分响应用户的时间过长，您需要加快速度或添加某种进度指示器。您可能会回顾您的日志，看看您是否可以将错误与特定类型的请求相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T08:07:58.003

另一种情况可能像这样[nginx Timeout services large requests](http://forum.nginx.org/read.php?2,236201,236201#msg-236201)

要解决这个问题，你可以试试这个：

```
 gem install passenger #use the lastest passenger
 passenger-config --root # get passenger_root_path
 #download the lastest nginx file and cd nginx-X.X.X
 ./configure --with-http_ssl_module --with-http_gzip_static_module --with-cc-opt=-Wno-error --add-module=$passenger_root_path/ext/nginx
 make
 make install 
```

在此之后，配置 nginx.conf 并重新启动，你会发现一切正常！

# asp.net - 当 CauseValidation 设置为 False 时，向导控件 MovePrevious 导致验证

> ID：13017760
> 
> 赞同：0
> 
> 时间：2012-10-22T18:48:15.670
> 
> 标签：asp.net, wizard-control

我在 ASP.Net 向导控件中的 MovePrevious 按钮有几个问题。我试图阻止它在每个步骤中触发控件的验证。我尝试过的尝试是：

1) 将按钮上的 CauseValidation 设置为 false 2) 通过查找按钮的控件 ID 并将其编码为在后面的代码中的 MovePrevious 事件中不触发。

这两个都不起作用，我没有想法，想知道是否有人能解决这个问题。

最后，这是最后一个问题，因为向导控件保留历史记录，如果用户返回第一步，是否可以清理历史记录以便向导重新开始？我使用了 GetHistory 方法，但这似乎搞砸了下拉列表的绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:57:33.783

您可以使用`ValidationGroup property`

为您的验证器控件设置一个 ValidationGroup1 为您的按钮设置另一个 ValidationGroup2

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.basevalidator.validationgroup%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.basevalidator.validationgroup%28v=vs.80%29.aspx)

# java - 在 GlassFish 或 Tomcat 上测试 Web 服务

> ID：13017766
> 
> 赞同：0
> 
> 时间：2012-10-22T18:48:34.140
> 
> 标签：java, tomcat, testing, glassfish-3

我需要对我的 Web 服务进行一些性能测试，实际上它是一个简单的 servlet。我正在使用 GlassFish 3.1，但我可以切换到 Tomcat。您能否提供一些我可以用来进行这些测试的建议和工具名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:00:42.407

我们经常使用开源的 jmeter 工具。这是项目页面：http: [//jmeter.apache.org/](http://jmeter.apache.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:55:07.350

我会推荐[SOAP UI](http://www.soapui.org/)作为测试 SOAP Web 服务的最佳工具。

如果它是 REST 服务，您可以使用任何可以向 URL 发出 HTTP 请求的客户端。您可以使用[java.net.URLConnection](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html)来做到这一点。

我看不出 GLASSFISH 或 Tomcat 在这里有什么影响。两者都有兼容的 servlet 引擎。

# qt - 调试所有从源代码构建的 Qt Creator 和插件版本

> ID：13017769
> 
> 赞同：0
> 
> 时间：2012-10-22T18:48:43.727
> 
> 标签：qt, qt-creator

我的目标是开发/调试 qt creator 插件，也许是编辑/调试 qt creator 源代码。为此，我尝试了几件事：

1.  下载 qt sdk 和 qt creator 的源代码，编译它们，然后制作一个 qt creator 插件项目并手动将所有内容连接在一起。这很快就变得复杂了（我试图将我的插件项目保留在 qt-creator/src/plugin/ 文件夹之外）并且在调试方面并没有真正让我找到一个好地方。

2.  使用已安装的 qt creator 版本打开源代码附带的 qtcreator.pro，添加一个 qt creator 插件作为子项目，并从已安装的 qt creator 版本构建所有内容。

我非常喜欢第二种方法，因为我可以控制一切，但我可​​以依赖 qt creators 工具来制作项目、增强调试等。只有一个小问题......

当我从已安装的版本中运行我闪亮的新版本的 qt creator（带有我的插件项目）时，我得到的是一个名为“qtcreator_process_stub”的弹出窗口，上面写着“这是 Qt Creator 的内部助手。不要手动运行它。按关闭这个窗口……”

所以我不太确定如何从我的 qt creator 实例中调试我的 qt creator 构建。有任何想法吗？注意：如果我运行生成的 Qt Creator.app，我会得到一个正常运行的 qt creator 实例，并且我的插件已正确加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:12:13.053

我相信这是一个版本问题。我安装了旧版本的 ide，并使用它来构建和调试新版本的 ide。

在旧 ide 中，我能够通过调试菜单将新 ide 作为外部进程启动和调试……但这有点烦人。

一旦我安装了新版本的 ide，我就可以像往常一样进行调试。

# objective-c - 将故事板名称传递到 switch 语句中？

> ID：13017770
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:48:45.360
> 
> 标签：objective-c, uiviewcontroller, storyboard, switch-statement

我可以将视图的名称作为 switch 语句的参数吗？如果是这样，我将在交换机中使用什么？

```
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View1"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View2"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View3"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View4"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View5"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View6"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View7"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View8"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View9"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View10"]]; 
```

根据视图名称，我想在标签中显示不同的文本位。所以我想要一个开关，其中案例是视图的名称，我只是不知道如何返回视图的名称，以便我可以检查它们。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:57:21.740

您可以切换代表 ViewController 名称的数字部分的 NSNumber 的 intValue ( `switch ([num intValue]) {`)，然后将其命名为（假设您之前设置的 NSNumber 为“num”）：

```
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:[NSString stringWithFormat:@"View%d", num]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:59:11.177

您不能将 NSString 传递给目标 C 中的 switch 语句而不会出现以下错误。

> 错误：语句需要整数类型的表达式（'NSString *' 无效）

改用 if 语句并检查 isEqualToString

# php - PHP没有退出while循环

> ID：13017773
> 
> 赞同：0
> 
> 时间：2012-10-22T18:48:48.740
> 
> 标签：php

我正在尝试将每一行的单元格 0 与浏览器语言返回的字符串进行比较。前任。浏览器语言是“en”匹配第 3 行的“en”。$row_num = 3。我的页面没有加载，这让我相信 while 语句是无限循环的。

php

```
$i = 0;
    while ($i <= mysql_num_rows($lang_head_foot)-1) {
      if (substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2) == mysql_result($lang_head_foot, $i, 0)) {
      $row_num = $i;
    }
}
setcookie('dbs_lang', $row_num, time() + 60*60*24*365*10); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T18:50:11.687

您需要增加循环计数器：

```
$i = 0;
while ($i <= mysql_num_rows($lang_head_foot)-1) {
  if (substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2) == mysql_result($lang_head_foot, $i, 0)) {
      $row_num = $i++; // <-- increment loop counter
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:51:30.810

改用 for 循环：

```
for($i=0; $i <= mysql_num_rows($lang_head_foot)-1; $i++) {
    if (substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2) == mysql_result($lang_head_foot, $i, 0))
    {
      $row_num = $i;
    }
}
setcookie('dbs_lang', $row_num, time() + 60*60*24*365*10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:55:10.767

您不应该在 while 循环中增加 $i 以便在检查所有行后退出 while 吗？在这种情况下，也许 for 循环比 while 循环更好。

# c# - 在 ASP.net MVC 中使用 EF 对象的设计注意事项

> ID：13017777
> 
> 赞同：1
> 
> 时间：2012-10-22T18:49:07.290
> 
> 标签：c#, asp.net-mvc, entity-framework

我首先在我的一个 mvc 3 项目中使用 EF 代码。我有一个关于将复杂的 EF POCO 对象传入和传出视图时使用什么模式的问题。

例如，一个客户对象有一个订单列表，每个订单都有一个项目列表。客户对象将被发送到视图。视图更新客户对象及其内部对象（订单、商品），然后将其发送回控制器。控制器有 EF 来持久化客户对象。

我的问题如下：

1.  我应该将 EF poco 对象序列化为 JSON 对象，以便可以在视图中使用它吗？

2.  当我从视图中接收更新时，如何重新构建客户对象？

3.  客户对象重建后，是否可以一次性保存整个对象图（客户、订单、商品）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:53:33.873

我倾向于避免使用 EF POCO 对象作为我的视图模型。我通常会从一个或多个 POCO 对象创建视图模型，因为我在视图中需要的东西永远不会完全匹配单个 EF POCO 对象。然后，视图模型将创建 EF 对象，然后将其保存到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:00:48.060

1.  我应该将 EF poco 对象序列化为 JSON 对象，以便可以在视图中使用它吗？ **不。**
2.  当我从视图中接收更新时，如何重新构建客户对象？**不。让默认模型绑定器将 POST 数据具体化为视图模型（或编辑模型），并使用该数据向较低层发出命令。**
3.  客户对象重建后，是否可以一次性保存整个对象图（客户、订单、商品）？**它是，但你不应该。相反，请根据您的用例单独处理每个更新。**

在此处遵循 mojo722 和 Pluc 的建议。不要在 MVC 层中使用 EF POCO 实体。使用视图模型。以下是它的工作原理：

*   控制器需要数据，它要求较低层。下层获取数据并返回实体（或者更好的是，实体视图）。
*   控制器将实体转换为视图模型（AutoMapper 对此很有用，但您也可以手动映射）。
*   控制器将视图模型传递给视图。
*   View 从 HTML 表单发送 HTTP POST 数据。
*   默认模型绑定器将 HTTP POST 表单数据转换为视图模型。
*   Controller 接收 viewmodel 数据，向底层发出命令。
*   下层使用 EF 保存新的实体状态。

# git - git：删除后代分支

> ID：13017778
> 
> 赞同：0
> 
> 时间：2012-10-22T18:49:17.540
> 
> 标签：git

假设以下提交结构：

```
master:      A-B-C-D-E----------------
                  \                   \
branch a:          F-G-H     branch d: N-O
                      \
branch b:              I-J
                          \
branch c:                  K-L-M 
```

我想删除从分支 a 下降的所有分支（在本例中为 b 和 c）。有没有办法检测分支 b 和 c 从分支 a 下降？

现在我正在考虑通过发现共同祖先（G）存在于哪些分支来实现这一点；这将返回 a、b 和 c；然后比较配置分支的时间。之后，删除除最早的分支之外的所有分支。

我想知道是否有更清洁的方法可以做到这一点，如果没有，我如何检索用于创建分支的时间戳？

期望的结果：

```
master:      A-B-C-D-E----------------
                  \                   \
branch a:          F-H'      branch d: N-O 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:42:48.600

好的，这可能不是最优雅的方式，但以下似乎可以解决问题：

```
git reflog <branch> 
```

从上面的示例中，在“b”上运行它会返回类似的内容：

```
137c91f b@{0}: branch: Created from a 
```

可以通过在与目标提交关联的每个分支上运行此命令来重建分支树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:06:43.450

1) 删除分支 C 2) 删除分支 B 我不确定 H' 是什么；我猜你想将提交 H 压缩到提交 G 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:11:14.587

我会使用一个非常小的 shell 脚本。

```
#!/bin/bash

# identify the bad commit
BAD_COMMIT=$(git rev-parse "$1")

# loop through branches
for BRANCH in $(git for-each-ref --format="%(refname)" refs/heads); do
  # detect if the branch is in the history, for which fgrep will exit 0
  if (git rev-list $BRANCH | fgrep -q $BAD_COMMIT); then
    echo "Deleting $BRANCH"
    git branch -D $BRANCH
  else
    echo "Keeping $BRANCH"
  fi
done 
```

另请参阅：[SO 答案：遍历分支](https://stackoverflow.com/questions/3846380/how-to-iterate-through-all-git-branches-using-bash-script)

# css - Opera Mini中的文本未填充div的宽度

> ID：13017781
> 
> 赞同：3
> 
> 时间：2012-10-22T18:49:28.003
> 
> 标签：css, html, width, opera

我在弄清楚为什么文本会换行而不是填充包含 div 的宽度时遇到问题。这只发生在 iPhone 上的 Opera Mini 和 Opera Simulator 上。Opera 用于 ipad 和 osx 显示，以及 IE、firefox 和 safari。有任何想法吗？这是页面

[演示页面](http://innerworkingdesigns.com/demo/demo.htm)

这是 Opera Mini 模拟器

[歌剧迷你模拟器](http://www.opera.com/developer/tools/mini/)

谢谢你的帮助。

# java - CORBA 通信问题

> ID：13017782
> 
> 赞同：3
> 
> 时间：2012-10-22T18:49:31.983
> 
> 标签：java, linux, solaris, corba

这可能过于本地化，但我希望有人能帮助我正确地表达我的问题。

因此，我们有一个前端 Web 服务器，它使用 CORBA 与后端应用服务器通信。我被要求将后端应用程序移植到 LINUX 机器上，我照做了。但是，为了测试它，我试图将前端 Web 服务器指向 LINUX 后端。

我们使用的是omniORB-4.1.4，下面是后端系统实例的获取方式：

```
 String args[] = new String[0];
        System.out.println(getDateTime()+"Instance: Connecting to: "+initialHost+"  "+initialPort+"  "+enviornment+"  "+version);
        java.util.Properties props = new java.util.Properties();
        props.put("org.omg.CORBA.ORBInitialPort", initialPort);
        props.put("org.omg.CORBA.ORBInitialHost", initialHost);
        props.put("com.sun.CORBA.giop.ORBGIOPVersion", "1.0");
        orb=org.omg.CORBA.ORB.init(args,props); 
```

当前端和后端都在 SUN/Solaris 机器上运行时，它似乎可以得到一个实例。但是，当后端在 LINUX 机器上运行时，它会给出一个 Connection Refused 异常，并且主机名是 127.0.0.1

```
 2012/10/22 13:53:22.033   EvaluateInstance: Connecting to: cmrheldv  23026  DEV87  0871
   Oct 22, 2012 1:53:22 PM com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl <init>
  WARNING: "IOP00410201: (COMM_FAILURE) Connection failure: socketType: IIOP_CLEAR_TEXT; hostname: cmrheldv; port: 23026"
 org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No
    at      com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2200)
    at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2221)
    at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:205)
    at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:218)
    at com.sun.corba.se.impl.transport.SocketOrChannelContactInfoImpl.createConnection(SocketOrChannelContactInfoImpl.java:101)
    at com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.beginRequest(CorbaClientRequestDispatcherImpl.java:171)
    at com.sun.corba.se.impl.protocol.CorbaClientDelegateImpl.request(CorbaClientDelegateImpl.java:118)
    at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.invoke(BootstrapResolverImpl.java:74)
    at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.resolve(BootstrapResolverImpl.java:107)
    at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:22)
    at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:22)
    at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:22)
    at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(ORBImpl.java:1151)
    at EvaluateInstance.InitializeModules(EvaluateInstance.java:152)
    at EvaluateInstance.initializeVariables(EvaluateInstance.java:326)
    at EvaluateCF.initializeInstances(EvaluateCF.java:1792)
    at EvaluateCF.processRequest(EvaluateCF.java:112)
    at coldfusion.tagext.CfxTag.doStartTag(CfxTag.java:102)
    at coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2722)
    at cfconfglobalconstants2ecfm330318830._factor9(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/confglobalconstants.cfm:372)
    at cfconfglobalconstants2ecfm330318830._factor10(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/confglobalconstants.cfm:13)
    at cfconfglobalconstants2ecfm330318830._factor11(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/confglobalconstants.cfm:6)
    at cfconfglobalconstants2ecfm330318830.runPage(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/confglobalconstants.cfm:1)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
    at coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2722)
    at cfapp_globals2ecfm1890385339.runPage(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/app_globals.cfm:61)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
    at coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2722)
    at cfapp_locals2ecfm610494134.runPage(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/securitycontrol/app_locals.cfm:49)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
    at coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2722)
    at cfdefault2ecfm129406838._factor9(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/securitycontrol/default.cfm:107)
    at cfdefault2ecfm129406838.runPage(/opt/jrun4/servers/or_dev87/cfusion-ear/cfusion-war/origenate/securitycontrol/default.cfm:1)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
    at coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:65)
    at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:381)
    at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
    at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
    at coldfusion.filter.PathFilter.invoke(PathFilter.java:94)
    at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
    at coldfusion.filter.BrowserDebugFilter.invoke(BrowserDebugFilter.java:79)
    at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
    at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
    at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)
    at coldfusion.CfmServlet.service(CfmServlet.java:200)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at jrun.servlet.FilterChain.service(FilterChain.java:101)
    at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.http.WebService.invokeRunnable(WebService.java:172)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
 Caused by: java.net.ConnectException: Connection refused
    at sun.nio.ch.Net.connect(Native Method)
    at sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:500)
    at java.nio.channels.SocketChannel.open(SocketChannel.java:146)
    at com.sun.corba.se.impl.transport.DefaultSocketFactoryImpl.createSocket(DefaultSocketFactoryImpl.java:60)
    at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:188)
    ... 64 more 
```

跟属性有关系吗？因为这两个盒子可以在定义的端口上很好地相互听到。

此外，当我在 Linux 机器上执行 netstat 时，它会显示从 Solaris 机器到端口的 LISTENING 连接。是什么让响应返回 127.0.0.1？

Solaris 机器称为 yyyy，Linux 机器称为 xxxx。初始端口和主机是通过一个 ini 文件获得的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T12:39:11.303

问题与代码无关。这与连接性有关。

在 LINUX 机器 cmrheldv 上，我必须编辑 /etc/hosts 文件并将 127.0.0.1 更改为 localhost 的真实 IP。

[http://jeewesley.blogspot.com/2008/12/glassfish-ejb3-remote-interface-on.html](http://jeewesley.blogspot.com/2008/12/glassfish-ejb3-remote-interface-on.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-01T16:40:36.947

尝试设置变量的路径并启动 orbd。

打开cmd并输入：

```
set path=%path%;"C:\Program Files\Java\jdk1.8.0_65\bin" 
```

之后：

```
start orbd 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-05T11:40:07.820

您应该首先使用以下命令启动 ORB 端口：

```
orbd -ORBInitialPort [PORT NUMBER] 
```

# serialization - ServiceStack 的 TypeSerializer 可以用来处理装箱的对象吗？

> ID：13017783
> 
> 赞同：1
> 
> 时间：2012-10-22T18:49:37.633
> 
> 标签：serialization, servicestack

ServiceStack 有什么方法可以`TypeSerializer`更成功地处理盒装对象吗？我正在想象一个扩展/设置，以便根据需要对类型进行编码。例如，如果我要序列化和反序列化：

```
Object x = Guid.NewGuid()
Object y = serializer.DeserializeFromString(serializer.SerializeToString(x)) 
```

我最终会在我的 new 中得到一个盒装字符串`Object` `y`，而不是盒装`Guid`. 如果它足够了解给我一个盒装的 Guid，那就太好了。这可能吗？是否考虑过这样的功能`TypeSerializer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:37:12.133

值类型的线路上没有发出类型信息。您需要在调用站点上指定类型信息，例如：

```
object y = x.ToJsv().FromJsv<Guid>(); 
```

或者类型信息与您要反序列化的类型有关，例如：

```
public class Poco { 
    public Guid Id { get; set; }
}

var dto = new Poco { Id = Guid.NewGuid() }.ToJsv().FromJsv<Poco>(); 
```

或者您可以使用动态 API，例如：

```
object id = JsonObject.Parse(new Poco { Id = Guid.NewGuid() }.ToJson())
    .Get<Guid>("Id"); 
```

# css - Jquery Mobile 按钮更小

> ID：13017784
> 
> 赞同：3
> 
> 时间：2012-10-22T18:49:42.660
> 
> 标签：css, templates, jquery-mobile

> **可能重复：**
> [通过 CSS 调整按钮的大小](https://stackoverflow.com/questions/7303035/resizing-a-button-through-css)

在 Jquery mobile中，可以使用以下命令创建**按钮：**

```
<a href="index.html" data-role="button"                  >Yes</a> 
```

可以使用**data-mini="true"**创建一个**迷你按钮**：

 **```
<a href="index.html" data-role="button" data-mini="true">Yes</a> 
```

我怎样才能创建一个更小的按钮？ *（我知道 jquery mobile 默认没有更小的按钮）（我只需要它）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:11:04.973

一种方法是覆盖按钮大小的默认 css 样式并添加到您自己的 CSS 类中，然后您可以将其设置在您想要更小的按钮上：

CSS：

```
/* These values can be changed to preferred sizes */
.ui-mini.ui-mini-smaller .ui-btn-inner {
    font-size: 10px;
    padding: .45em 10px .4em;
} 
```

然后像这样使用它：

```
<a href="index.html" data-role="button" data-mini="true" class="ui-mini-smaller">Yes</a> 
```

请参阅此处的示例：http: [//jsfiddle.net/XVJem/3/](http://jsfiddle.net/XVJem/3/)**

# safari - webkitNotifications.requestPermission() typeError

> ID：13017786
> 
> 赞同：0
> 
> 时间：2012-10-22T18:49:45.503
> 
> 标签：safari, webkit, notifications, desktop, typeerror

当我尝试请求在 Safari 上显示桌面通知的权限时收到一个奇怪的错误，我收到 typeError。我有一个按钮触发“window.webkitNotifications.requestPermission()”onclick。

HTML 代码：

```
<button id='btn'>Request Permissions</button> 
```

Javascript：

```
var btn = document.getElementById( 'btn' );
btn.onclick = function () {
    window.webkitNotifications.requestPermission();
} 
```

此代码段在 Chrome 上运行良好，但在 Safari 上会引发 typeError。

该网站在本地主机上运行。

# python - 在 Pyuno 中清除打印范围？

> ID：13017787
> 
> 赞同：1
> 
> 时间：2012-10-22T18:49:45.267
> 
> 标签：python, uno, pyuno

我正在使用 unoconv 将一些 xlsx 电子表格转换为 pdf，并且需要清除在 xlsx 中设置的打印区域，因为 pdf 仅包含打印区域中的那些单元格。查看 OO 文档会建议我需要将 RenderOptions.PrintRange 属性设置为“”。有谁知道如何通过 Pyuno 引用 RenderOptions 对象？

# junit - 每次从 jMockit 期望返回不同的值

> ID：13017788
> 
> 赞同：18
> 
> 时间：2012-10-22T18:49:53.513
> 
> 标签：junit, mocking, jmockit

我有一个单元测试，我正在模拟`java.net.URI`课程。此外，我正在创建一个 jMockit `NonStrictExpectation`，我期望调用`URI.getPath()`并返回一个特定的字符串。

被测试的代码调用`URI.getPath()`了两次，每次我都需要发送一个不同的字符串。

这是我正在测试的实际方法：

```
public void validateResource() {
    // some code
    URI uri = new URI(link1.getHref());
    String path1 = uri.getPath();
    // some more code
    uri = new URI(link2.getHref());
    String path2 = uri.getPath();
} 
```

下面是单元测试代码：

```
@Mocked URI uri;

@Test
public void testValidateResource() {
    new NonStrictExpectations() {
        {
            // for the first invocation
            uri.getPath(); returns("/resourceGroup/1");

            // for the second invocation [was hoping this would work]
            uri.getPath(); returns("/resource/2");
        }
    };
    myObject.validateResource();
} 
```

现在，我想在第二次调用`"/resource/2"`时从我的期望中恢复过来。`URI.getPath()`但它总是达到第一个期望并返回`"/recourceGroup/1"`。这是我的问题。

我该如何实现？由于多种原因，我无法真正使用`StrictExpectations`，并且必须坚持使用`NonStrictExpectations`.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-23T04:46:02.017

似乎您只需要列出`uri.getPath()`一次，并使用`returns`...类似这样的可变参数版本：

```
uri.getPath(); returns("/resourceGroup/1", "/resourceGroup/2"); 
```

这是根据[文档](https://jmockit.github.io/tutorial/Mocking.html#results)，无论如何......我自己没有测试过。

> 通过调用returns(v1, v2, ...) 方法，可以为期望记录要返回的多个连续值。或者，可以通过为**结果**字段分配包含连续值的列表或数组来实现相同的目的。

# python - 如何将http标头添加到使用scapy嗅探的数据包中

> ID：13017797
> 
> 赞同：7
> 
> 时间：2012-10-22T18:50:35.150
> 
> 标签：python, http, network-programming, packet-sniffers, scapy

我正在尝试使用 scapy 嗅探一个外出的 http 数据包，在其中添加一些新的 http 标头并将其发送。此处的目的是仅插入新标头，同时保持数据包完整。如果需要，最多应进行任何校验和重新计算。

已经解决了几乎所有关于 SO 的问题，但并没有完全得到解决方案。

以下是我所做的。

```
def parse(pkt):

    if pkt.haslayer(TCP) and pkt.getlayer(TCP).dport == 80 and pkt.haslayer(Raw):
        pkt = pkt / "New Header:value\r\n\r\n"

        # OR i tried this
        #pkt = pkt.getlayer(Raw).load / Raw.load(load="New Header:value\r\n\r\n")

        #pkt.getlayer(Raw).load("New Header:value\r\n\r\n")
        pkt.show()
        #del pkt[IP].chksum
        send(pkt)
#end parse function

# start sniffing
a=sniff(filter="tcp and ( port 80 )", prn=parse) 
```

问题是上面的代码插入了一个新的原始有效负载部分，而不是添加一个普通的标头。根据 HTTP 标准，已经有一个双换行符 \r\n\r\n 来指示标头终止。

为了克服这个问题，我尝试通过执行以下操作删除最后一个 \r\n

```
 #pkt = pkt.getlayer(Raw).load[-2:] / Raw.load(load="New Header:value\r\n\r\n") 
```

但这会剥离所有先前存在的标头，并且只保留“新标头”。

我在 Linux mint 上试过这个。

*更新：我正在尝试创建一个新的 http 有效负载，其中包含以前的标头，我将添加一些。有人可以帮助如何删除现有图层*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T13:53:42.900

如果我理解正确，您遇到的问题是您想使用新标头更新现有 HTTP 请求。您想要的是就地更新字符串，这是 Python 无法直接执行的（字符串是不可变的）。

所以你应该做的是获取 HTTP 标头：

`old_hdr = pkt[Raw]`或者`old_hdr = pkt[TCP].payload`

并像字符串一样操作它：

```
new_hdr = 'New Header: value'
hdr = old_hdr.split('\r\n') # This is a crappy hack. Parsing HTTP headers
hdr.insert(new_hdr, 2)      # is a [solved problem][1].
send_hdr = '\r\n'.join(hdr)
pkt[TCP].payload = send_hdr 
```

如果您发现校验和没有更新，请在发送数据包之前将其删除：

```
del pkt[TCP].chksum 
```

Scapy 会以正确的值将它们放回给你。

编辑：我刚刚注意到我的链接失败了。[这](https://stackoverflow.com/questions/4685217/parse-raw-http-headers)是解析 HTTP 标头的方法。

# java - 检查数据库中是否存在条目

> ID：13017801
> 
> 赞同：3
> 
> 时间：2012-10-22T18:50:43.517
> 
> 标签：java, android, sql

我想检查我的数据库中是否存在一个条目。

我试过了：

```
private void saveIt() {     
    MenuItem item = menu.findItem(R.id.menu_2);

    myDB = this.openOrCreateDatabase(MY_DATABASE_NAME, MODE_PRIVATE, null);    
    Cursor c = myDB.rawQuery("SELECT * FROM " + MY_DATABASE_TABLE + " WHERE idwp= '" + id + "'", null);
    if(c == null)
    {
        item.setIcon(R.drawable.b);
        try {
            myDB.execSQL("INSERT INTO "+MY_DATABASE_TABLE+" (titel, extra, html) VALUES ('"+titel.replace("'", "\"")+"','"+extra.replace("'", "\"")+"','"+html.replace("'", "\"")+"');");
        }
        finally
        {
            if (myDB != null)
                myDB.close();
        }
        Toast.makeText(getApplicationContext(), "saved", Toast.LENGTH_SHORT).show();
    }
    else
    {
        Toast.makeText(getApplicationContext(), "already exist", Toast.LENGTH_SHORT).show();
    }
    myDB.close();
} 
```

但它总是说“已经存在”。我看过我的数据库。没有条目在哪里`id = xxx`！

感谢您的帮助！

**更新：** 我发现了一个错误：INSERT INTO ... extra, html, **id** <- 我忘记了 id！

这是一个解决问题的好社区！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T18:58:57.733

光标不会，`null`但它可能是*空*的，你需要使用这个：

```
if(c.getCount() > 0) {
    Toast.makeText(getApplicationContext(), "already exist", Toast.LENGTH_SHORT).show();
}
else {
    // Does not exist!
} 
```

您还可以使用任何`Cursor#move`方法，因为它们返回`true`或`false`取决于光标中是否存在有效数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:59:19.410

改变

```
Cursor c = myDB.rawQuery("SELECT * FROM " + MY_DATABASE_TABLE + " WHERE idwp= '" + id + "'", null);
    if(c == null)
    { 
```

到：

```
Cursor c = myDB.rawQuery("SELECT * FROM " + MY_DATABASE_TABLE + " WHERE idwp= '" + id + "'", null);
    if(c.getCount() == 0 )
    { 
```

# c - 如何使用 Visual Studio Windows 7 确定 x64 机器上安装的内存

> ID：13017810
> 
> 赞同：0
> 
> 时间：2012-10-22T18:51:33.483
> 
> 标签：c, visual-studio-2010, memory, ram, sysinfo

有没有办法使用 VS2010 C 确定运行 64 位 Windows 7 的计算机上安装的内存量？

我正在运行的应用程序是一个 Windows 64 位应用程序，其 UI 用 c# 编写，它调用用 C 编写的 dll。获取已安装内存的调用必须从 C 代码完成，而不是 c#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:10:33.960

使用[`GlobalMemoryStatusEx`](http://msdn.microsoft.com/en-us/library/aa366589%28VS.85%29.aspx)功能：

```
MEMORYSTATUSEX memInfo = {sizeof(memInfo)};
if (GlobalMemoryStatusEx(&memInfo))
{
    printf("Total installed physical memory: %lld bytes\n", memInfo.ullTotalPhys);
} 
```

# iphone - 动画整数增加并在特定数字上停止

> ID：13017812
> 
> 赞同：2
> 
> 时间：2012-10-22T18:51:40.567
> 
> 标签：iphone, ios, xcode, cocoa-touch

我有一个计数，我正在使用一个带有徽章的单元格。我想要的是当我得到这个计数时，将徽章编号设置为 0，然后动画从 0 递增到某个计数。

这是我尝试过但没有奏效的方法：

```
for (int i = 0 ; i<=item.count; i++) {
     int64_t delayInSeconds = .1f;
     dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
     dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
           [UIView animateWithDuration:0.1f animations:^{
               cell.badgeString = [NSString stringWithFormat:@"%d",i];
           }];
           NSLog(@"%@",cell.badgeString);
     });
} 
```

它没有动画。我正在执行此操作`tableView:cellForRowAtIndexPath`，并在返回单元格之前执行此操作，这就是问题所在。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:07:19.077

所以有几件事我会做不同的...

你是对的，cellForRow 是错误的地方。尝试在 willDisplayCell 中触发动画。通过触发器，我的意思是，设置初始值，然后在下一个运行循环中使用 [cell performSelector:@selector(startAnimation) withObject:nil afterDelay:0] 开始动画；或类似的东西。

此外，在 for 循环中调用 dispatch 是一个坏主意。您可以使用完成块设置动画块，然后触发相同的动画块，每次都从 item 获取新值。您需要在某处跟踪当前值。

您可能想要一个包含任何对象项的自定义单元格。在 cellForRow 中设置它。在 prepareForReuse 中取消你的动画。动画代码可以放在自定义单元格上的方法中，在我上面的示例中，它称为 startAnimation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:00:54.683

这是因为 UI 元素在循环完成之前不会更新，并且使用此方法您无法控制数字实际增加多长时间。

一种解决方案是使用 NSTimer 来调用递增标签的函数，但假设您想快速查看标签递增，我不建议您运行超过几秒钟。

# apache-flex - adobe air 推送通知

> ID：13017813
> 
> 赞同：0
> 
> 时间：2012-10-22T18:51:42.280
> 
> 标签：apache-flex, air, air-native-extension

我正在使用[推送通知扩展](https://github.com/freshplanet/ANE-Push-Notification)并收到错误消息：

> ReferenceError：错误 #1065：未定义变量 com.freshplanet.nativeExtensions::PushNotification。

这些是我到目前为止遵循的简单步骤：

1) 在 properties/actionscript build path/native extensions 中添加了扩展。它带有绿色标志，.ane 位于我的 libs 文件夹中

2) 将 extensionid 添加到我的 app.xml 文件中

```
<extensions> 
     <extensionID>com.freshplanet.AirPushNotification</extensionID> 
</extensions> 
```

3) 在应用构造函数中注册：

```
PushNotification.getInstance().registerForPushNotification(); 
```

4) 使用 Flash Builder 4.5.1 执行以下步骤：

将 ANE 文件的文件扩展名从 .ane 更改为 .swc。此步骤是必需的，以便 Flash Builder 可以找到该文件。

在 Flash Builder 项目上选择项目 > 属性。在“属性”对话框中选择 Flex 构建路径。

在库路径选项卡中，选择添加 SWC...。

浏览到 SWC 文件并选择打开。

在添加 SWC... 对话框中选择确定。

ANE 文件现在出现在“属性”对话框的“库路径”选项卡中。

展开 SWC 文件条目。双击链接类型以打开“库路径项选项”对话框。

在“库路径项选项”对话框中，将“链接类型”更改为“外部”。现在您可以使用例如 Project > Build Project 来编译您的应用程序。这一切都在 iPad 上完成

谢谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:39:39.447

您不需要本机扩展，因为它是 AIR 3.4 的一部分。请参阅[http://www.adobe.com/devnet/air/articles/ios-push-notifications.html](http://www.adobe.com/devnet/air/articles/ios-push-notifications.html)了解更多信息以及如何使其工作的分步指南

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:32:28.620

那么问题通过打开项目属性面板解决了，在actionscript build package中选择Apple ios，在native extensions选项卡下选择项目中需要的所有扩展包。

对我来说，令人困惑的部分是有两个地方需要添加本机扩展，一个是 actionscript 构建路径，第二个是 actionscript 构建打包。

据我了解，不需要将包重命名为 .swc 并将其添加到构建中的步骤。

# django - 查询字段为字符串？

> ID：13017815
> 
> 赞同：1
> 
> 时间：2012-10-22T18:51:56.523
> 
> 标签：django, django-models, django-queryset

我想查询模型以获取我作为字符串获得的特定字段。

**演示：**

```
class Foo(models.Model):
    someones_name = models.CharField(max_length=100)
    anothers_name = models.CharField(max_length=100)

# python shell:
>> Foo.objects.get(pk=1).someones_name
u'Cpt. Hook'
>> Foo.objects.get(pk=1).anothers_name
u'Peter Pan' 
```

现在 - 我在一个变量中输入了字段的名称`someones_name`

```
>> field_name = 'someones_name' 
```

那么，如何使用该 field_name-variable 对 Foo-Model 执行几乎相同的查询？如果真的有这样的事情是可能的？

* * *

**编辑**

我不想用那个 field_name 进行查询。我想要 field_name 中给出的字段的确切值。我知道我可以做这样的事情

```
query = Foo.objects.get(pk=1)
query.someones_name
query.anothers_name 
```

我所需要做的就是将我从`._meta.fields`（从另一个模型）动态接收的这个特定字段作为字符串获取。

在 RAW-SQL 中类似于：`'SELECT %s FROM foo where pk = 1' % field_name`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:57:26.827

```
field_name = 'someones_name'
Foo.objects.get(**{field_name: 'Cpt. Hook'}) 
```

它等于：

```
Foo.objects.get(someones_name='Cpt. Hook') 
```

* * *

**更新：**

```
field_name = 'someones_name'
obj = Foo.objects.get(pk=1)
getattr(obj, field_name) 
```

等于：

```
Foo.objects.get(pk=1).someones_name 
```

# python - 如何在地图上实时按位置绘制推文，例如传单

> ID：13017816
> 
> 赞同：3
> 
> 时间：2012-10-22T18:52:01.543
> 
> 标签：python, twitter, gis, flask, leaflet

我想知道将实时推文按位置绘制到地图应用程序（例如传单）上的最佳方法是什么。

目前，我正在通过流 api（过滤）获取推文并存储到 mongodb 中。我想知道如何才能最好地实现这一目标。我正在使用 python 和烧瓶框架。

因此，一条推文的信息被存储到数据库中，并同时实时绘制到地图上。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-27T05:49:06.627

这个 repo 展示了如何将 Flask 和 Mongo 与 Leaflet 一起使用

[https://github.com/openshift-quickstart/openshift-mongo-flask-example](https://github.com/openshift-quickstart/openshift-mongo-flask-example)

如果您可以在 JS 页面中编写一个计时器循环以定期执行 Ajax 请求，或者您将需要服务器和客户端上的 WebSockets 之类的东西

# java - 制作自定义链表类——需要帮助实现get方法

> ID：13017819
> 
> 赞同：1
> 
> 时间：2012-10-22T18:52:13.603
> 
> 标签：java, linked-list

我正在尝试制作一个自定义链表，到目前为止，我已经弄清楚了如何制作一般结构和两种最简单的方法（insertFirst 和 deleteFirst）。我想做的下一件事是创建一个获取链接索引的 get 方法，然后返回该位置的字符串。我没有为每个链接分配任何索引或地址，因此我看不到如何引用链接列表中的特定位置。我看到如果我写 first.next 我得到第二项，first.next.next 我得到第三项....但我需要弄清楚如何制作我的索引参数（传递给 get 方法的那个) 与我列表中的正确位置相关....我该怎么做？

请原谅任何草率的代码...在掌握链表结构后，我一定会清理细节。

这是我的代码，在此先感谢！

**测试代码**

```
 class LinkedListTest {
    public static void main(String[] args)
    {
        LinkedList list = new LinkedList();

        list.insertFirst("cat");
        list.insertFirst("dog");
        list.insertFirst("fish");
        list.insertFirst("cow");
        list.insertFirst("horse");
        list.insertFirst("pig");
        list.insertFirst("chicken");

        System.out.println(list.get(1));

    }
} 
```

**我的课**

```
public class LinkedList
{
    private Link first;

    public LinkedList()
    {
        first = null;
    }

    public void insertFirst(String word)
    {
        Link link = new Link(word);
        link.next = first;
        first = link;
    }

    public String deleteFirst()
    {
        Link temp = first;
        first = first.next;
        return temp.toString();
    }

    public String get(int index)
    {
        // the following is just to show that I can access different links
        // by adding more .next's after first--- but i need a way to access
        // the correct link based on the index passed in

        // String second = first.next.item;
        String third = first.next.next.item;
        // String fourth= first.next.next.next.item

        return third;
    }

}

public class Link
{
    public String item;
    public Link next;

    //Link constructor
    public Link(String theItem)
    {
        item = theItem;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:57:00.860

LinkedList 应该有 O(n) 来查找元素。

所以本质上这意味着你需要继续做 element.next 直到你到达第 n 个索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:57:53.303

假设`get(0)`返回您的第一个元素：

如果你想把这个方法放在里面`public class LinkedList:`

```
 public String get(int index)
    {
        assert( index >= 0 )
        Link current = this.first;
        while (index > 0) {
            index--;
            current = current.next;
            // Check to see if this is out of bounds of the links
            if (current == Null) {
                // Since you are returning a String, you can also return
                // some kind of a flag to say that the index is out of bounds
                return Null;
            }
        }
        return current.item;       
    } 
```

或者，您也可以在内部实现它`public class Link:`，但这是不可取的，因为它会浪费调用堆栈上的空间：

```
 public String get(int index)
    {
        assert ( index >= 0 )
        if ( index == 0 ) {
            return this.item;
        } else {
            index--;
            if ( next == null ) {
                return Null;
            }
            return next.get(index)
        }
    } 
```

在公共类 LinkedList 中：

```
 public String get(int index)
    {
         return first.get(index);
    } 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T18:55:04.217

首先，如果您正在创建自己的`LinkedList`类，您应该这样命名它，而不是使用现有的`LinkedList`类。所以，你可以使用`MyLinkedList`

其次，您不能通过索引访问 LinkedList 中的元素。这不是`LinkedList`工作方式，或者如果你正在创建自己的工作方式应该工作。而是根据价值获得它们。因此，您应该将值传递给您的`get`方法，并遍历您的方法`LinkedList`以获得`Link`具有给定值的适当值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:02:25.197

## 递归的

```
 public String get(int index)
        {
            assert index >= 0;
            return get(index, first);       
        }

 public String get(int index, Link cursor) {
         if (cursor == null) {
            return null;
         } else if (index == 0) {
            return cursor.toString();
         } else {
           return get(index-1, cursor.next);
         }
  } 
```

## 迭代的

```
public String get(int index)
{
    assert index >= 0;
    Link cursor = first;
    while (index > 0) {
       if (cursor == null) {
            return null;
        }
        cursor = cursor.next;
        index--;
    }
    return cursor.toString();       
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T19:07:12.080

这应该可以帮助您满足您的需求：

[http://www.dreamincode.net/forums/topic/143089-linked-list-tutorial/](http://www.dreamincode.net/forums/topic/143089-linked-list-tutorial/)

# delphi - 两个字符串/集合的交集

> ID：13017822
> 
> 赞同：4
> 
> 时间：2012-10-22T18:52:19.803
> 
> 标签：delphi, char, set, intersection, delphi-5

由于来自 python，我正在寻找与delphi5中的这个 python 代码（ [sets ）等效的东西：](http://docs.python.org/library/sets.html)

```
>>> x = set("Hello")
>>> x
set(['H', 'e', 'l', 'o'])

>>> y = set("Hallo")
>>> y
set(['a', 'H', 'l', 'o'])

>>> x.intersection(y)
set(['H', 'l', 'o']) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T18:54:12.173

```
var
  a, b, c: set of byte;
begin
  a := [1, 2, 3, 4];
  b := [3, 4, 5, 6];
  c := a*b;          // c is the intersection of a and b, i.e., c = [3, 4] 
```

但请注意：

```
var
  a, b, c: set of integer; 
```

甚至不会编译；相反，您会收到“集合可能最多有 256 个元素”错误。有关 Delphi 集的更多信息，请参阅[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Sets)。

**更新**

抱歉，忘了提及“显而易见”（从 Delphi 程序员的角度来看）：

```
var
  a, b, c: set of char;
begin
  a := ['A', 'B', 'C', 'D'];
  b := ['C', 'D', 'E', 'F'];
  c := a*b;          // c is the intersection of a and b, i.e., c = ['C', 'D'] 
```

但是你的字符都将是字节字符——也就是说，忘记 Unicode（Delphi 5 不支持 Unicode，所以在这种情况下这并不是真正的限制）！

# ios - 安装不同版本的 iPhone 模拟器

> ID：13017823
> 
> 赞同：4
> 
> 时间：2012-10-22T18:52:26.543
> 
> 标签：ios, xcode, macos, version

我最近在我的 Mac 上安装了一个新的 OS X，并在上面安装了 XCode。它只为我提供了 iOs 6.0 模拟器（也许只有 iPhone 5，我真的不知道如何更改模拟设备）。

在将 iPhone 4 项目移植到此 XCode 时，我遇到了几个问题，我想看看问题是由于 iOS 6/iPhone 5 的新更改引起的，还是仅仅是代码错误。

出于这个原因，我希望能够使用 iOs 4 / iPhone 4 运行模拟器，但我找不到这样做的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:56:02.233

在 Xcode 中转到：

Xcode -> 首选项 -> 下载

然后下载你需要的模拟器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-29T02:36:18.400

First of all, you're able to have same iPhone simulators (iPhone 4, 5, 5s, etc) with different iOS version (8.1, 10.1, 11.2, etc).

For latest Xcode, there are couple ways to do that:

1.  XCode -> Preference (Command + ,) -> Components. Then install your desired simulators. All other ways will eventually open this window.

[![enter image description here](../Images/4879352667ce5293473258aa9debef49.png)](https://i.stack.imgur.com/nXGcG.png)

2.  Click on your active scheme (pic. 1) -> scroll down to the bottom of the selection pop up (pic. 2) -> click "Download Simulators..."

[![Click on your active scheme](../Images/2763e6a7707b830a8aca0d191f5cc74a.png)](https://i.stack.imgur.com/T2CAI.png)

[![scroll down to the bottom of the selection pop up](../Images/52f5f34e7cbb6b8c4138570299e1c5a5.png)](https://i.stack.imgur.com/URVsP.png)

3.  Window -> Devices and Simulators -> Tab Simulators -> Click plus sign on bottom left corner to open "Create a new simulator" pop up window -> click "OS version" selection -> chose "Download more simulator runtimes ...".

I think by installing the runtimes, Xcode will eventually install all iPhone version that support it, down to iPhone 5.

[![Devices and Simulators](../Images/bc6e82c478845fc7518d529a3d31d3da.png)](https://i.stack.imgur.com/MqaCW.png)

[![](../Images/745d8dc4cacfa5fd982012df97ab1bce.png)](https://i.stack.imgur.com/Z1F0T.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T03:08:03.653

您可以通过从安装了它们的其他人那里复制 sdks 文件来快速安装所有模拟器 sdks。该文件位于`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/`. 以我为例：

```
songxiaofeng@xserver:~$ cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/
songxiaofeng@xserver:/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs$ ls
iPhoneSimulator5.0.sdk iPhoneSimulator5.1.sdk iPhoneSimulator6.0.sdk iPhoneSimulator6.1.sdk 
```

复制这些文件后，重新启动你的xcode，你会发现这些模拟器。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-15T00:47:09.373

在 2020 年执行此操作的方法是转到 Xcode > Preferences > Components 并单击要安装的版本上的下载符号。

[![用户界面](../Images/5eee67137ebecbf5876331f9d176c55a.png)](https://i.stack.imgur.com/p7CzR.png)

# sql - 计算每列中的空值数

> ID：13017824
> 
> 赞同：5
> 
> 时间：2012-10-22T18:52:30.003
> 
> 标签：sql

我遇到了一个表过宽的数据库。（600 多列）即使在没有参数的情况下查询前 100 行也需要 4 秒。我想把这些桌子缩小一点。

为了弄清楚哪些列可以最容易地移动到新表或完全删除，我想知道每列中有多少空值。这应该告诉我哪些信息可能最不重要。

我将如何编写一个可以找到所有列并计算这些列中的空值的查询？

**编辑**数据库是 SQL server 2008。我*真的*希望不要单独键入每一列。看起来 sys.columns 可以帮助解决这个问题？

**Edit2**列都是不同的类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:05:52.923

尝试这个

```
declare @Table_Name nvarchar(max), @Columns nvarchar(max), @stmt nvarchar(max)

declare table_cursor cursor local fast_forward for
    select
        s.name,
        stuff(
            (
                select
                    ', count(case when ' + name + 
                    ' is null then 1 else null end) as count_' + name
                from sys.columns as c
                where c.object_id = s.object_id
                for xml path(''), type
            ).value('data(.)', 'nvarchar(max)')
        , 1, 2, '')
    from sys.tables as s

open table_cursor
fetch table_cursor into @Table_Name, @Columns

while @@FETCH_STATUS = 0
begin
    select @stmt = 'select ''' + @Table_Name + ''' as Table_Name, ' + @Columns + ' from ' + @Table_Name

    exec sp_executesql
        @stmt = @stmt

    fetch table_cursor into @Table_Name, @Columns
end

close table_cursor
deallocate table_cursor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:53:53.507

```
select count(case when Column1 is null then 1 end) as Column1NullCount,
    count(case when Column2 is null then 1 end) as Column2NullCount,
    count(case when Column3 is null then 1 end) as Column3NullCount,
    ...
from MyTable 
```

# java - 异步 NIO：同一客户端向服务器发送多条消息

> ID：13017825
> 
> 赞同：0
> 
> 时间：2012-10-22T18:52:40.740
> 
> 标签：java, sockets, concurrency, nio2

关于Java NIO2。

假设我们有以下内容来监听客户端请求......

```
asyncServerSocketChannel.accept(null, new CompletionHandler <AsynchronousSocketChannel, Object>() {
    @Override
    public void completed(final AsynchronousSocketChannel asyncSocketChannel, Object attachment) {
         // Put the execution of the Completeion handler on another thread so that 
         // we don't block another channel being accepted.
         executer.submit(new Runnable() {
             public void run() {
                 handle(asyncSocketChannel);
             }
         });

         // call another.
         asyncServerSocketChannel.accept(null, this);
     }

     @Override
     public void failed(Throwable exc, Object attachment) {
         // TODO Auto-generated method stub
     }
}); 
```

此代码将接受一个客户端连接处理它，然后接受另一个。为了与服务器通信，客户端打开一个 AsyncSocketChannel 并触发消息。然后调用完成处理程序 completed() 方法。

但是，这意味着如果客户端想要在同一个 AsyncSocket 实例上发送另一条消息，它就不能。

它必须创建另一个 AsycnSocket 实例——我相信这意味着另一个 TCP 连接——这会影响性能。

任何想法如何解决这个问题？

或者以另一种方式提出问题，任何想法如何使相同的 asyncSocketChannel 接收多个 CompleteionHandler completed() 事件？

编辑：我的处理代码是这样的......

```
public void handle(AsynchronousSocketChannel asyncSocketChannel) {
    ByteBuffer readBuffer = ByteBuffer.allocate(100);
    try {
        // read a message from the client, timeout after 10 seconds 
        Future<Integer> futureReadResult = asyncSocketChannel.read(readBuffer);
        futureReadResult.get(10, TimeUnit.SECONDS);
        String receivedMessage = new String(readBuffer.array());

        // some logic based on the message here...               

        // after the logic is a return message to client
        ByteBuffer returnMessage = ByteBuffer.wrap((RESPONSE_FINISHED_REQUEST + " " + client
                 + ", " + RESPONSE_COUNTER_EQUALS + value).getBytes());
        Future<Integer> futureWriteResult = asyncSocketChannel.write(returnMessage);
        futureWriteResult.get(10, TimeUnit.SECONDS);
   } ... 
```

这就是我的服务器从异步通道读取消息并返回答案。客户端阻塞，直到它得到答案。但这没关系。我不在乎客户端是否阻塞。

完成后，客户端尝试在同一异步通道上发送另一条消息，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:21:44.163

有 2 个连接阶段和 2 种不同类型的完成处理程序。第一阶段是处理连接请求，这是您编写的程序（顺便说一句，正如乔纳斯所说，不需要使用另一个执行程序）。第二阶段（可以重复多次）是发出 I/O 请求并处理请求完成。为此，您必须提供一个内存缓冲区来保存要读取或写入的数据，并且您没有为此显示任何代码。当您执行第二阶段时，您会发现不存在您所写的问题：“如果客户端想要在同一个 AsyncSocket 实例上发送另一条消息，它就不能”。

NIO2 的一个问题是，一方面，程序员必须避免在同一通道上进行多个相同类型的异步操作（接受、读取或写入）（否则会发生错误），另一方面，程序员必须避免在处理程序中阻塞等待。这个问题在[df4j actor framework](https://github.com/rfqu/df4j)的 df4j-nio2 子项目中得到解决，其中 AsyncServerSocketChannel 和 AsyncSocketChannel 都表示为 actor。（df4j 是我开发的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:15:53.230

首先，您不应该像在 - 方法中那样使用执行`completed`器。-`completed`方法已经在一个新的工作线程中处理。

在你的`completed`-method for 中`.accept(...)`，你应该调用`asychSocketChannel.read(...)`来读取数据。客户端可以在同一个套接字上发送另一条消息。此消息将通过对 - 方法的新调用来处理`completed`，可能由服务器上的另一个工作线程处理。

# ruby - 匹配正则表达式

> ID：13017831
> 
> 赞同：0
> 
> 时间：2012-10-22T18:52:57.750
> 
> 标签：ruby

我必须要求检查`91981552e1775310VgnVCM100000a2b6140a____;standard;212.58.244.70;Oct-22-2012;24353teehdtehg;`日期和`24353teehdtehg`动态的值。

我怎样才能让它更通用，以便我可以检查`expected_value =~/actual_value/`排除 Ruby 中的动态值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:02:05.560

如果可能的话，我不会使用正则表达式。您似乎有一个输入字符串，可以轻松更改并用于在不使用正则表达式的情况下与预期值进行比较。

```
str = "91981552e1775310VgnVCM100000a2b6140a____;standard;212.58.244.70;Oct-22-2012;24353teehdtehg;"

actual_value = str.split(';')[0..-3].join(';')
# "91981552e1775310VgnVCM100000a2b6140a____;standard;212.58.244.70" 
```

然后只是比较两者

```
expected_value == actual_value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:59:32.203

我想你可以使用类似的东西：

```
/91981552e1775310VgnVCM100000a2b6140a____;standard;212\.58\.244\.70;(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-\d{2}-\d{4};\d{5}[a-z]{9};/ 
```

取决于字符串实际上可能是什么。

# javascript - 当用户单击链接时，如何聚焦第一个字段并选择其内容？

> ID：13017835
> 
> 赞同：0
> 
> 时间：2012-10-22T18:53:05.577
> 
> 标签：javascript, jquery

HTML：

```
<div class="control-group">
    <label class="control-label" for="some-id-1"><a href="http://example.com/some-id-1" target="_blank">Text1</a></label>
    <div class="controls">
        <input type="text" id="some-id-1" name="some-id-1"><br>
        <input type="text" id="some-id-11" name="some-id-11"><br>
    </div>
</div>
<div class="control-group">
    <label class="control-label" for="some-id-2"><a href="http://example.com/some-id-2" target="_blank">Text2</a></label>
    <div class="controls">
        <input type="text" id="some-id-2" name="some-id-2"><br>
        <input type="text" id="some-id-22" name="some-id-22"><br>
    </div>
</div> 
```

JavaScript：

```
$(".control-label a").click(function(){
   $(this).parent().next().find('input').focus();
}); 
```

[演示](http://jsfiddle.net/and7ey/EkyCt/1/)

它选择控制组中的最后一个字段。我应该如何选择第一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:56:25.867

在方法中使用`:first`选择器`find()`：

```
$(this).parent().next().find('input:first').focus(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/EkyCt/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:56:35.647

`.find('input:first-child')`应该为您解决问题。

尽管必须注意的是，`for=""`属性`label` *应该立即*执行该确切的行为。

# google-apps-script - 如何从 Google Group 中删除帖子？

> ID：13017838
> 
> 赞同：0
> 
> 时间：2012-10-22T18:53:14.013
> 
> 标签：google-apps-script, google-groups-api

如何使用 Google Apps 脚本从 Google 群组中删除帖子？

如何获取主题列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:06:03.763

我可以想象，由于 Google Groups 的底层技术是电子邮件，因此您将无法删除已经发送的帖子。
您可能必须使用 Gmail 服务来完成主题列表任务。
[https://developers.google.com/apps-script/service_gmail](https://developers.google.com/apps-script/service_gmail)

# python - 使用 PySerial 是否可以等待数据？

> ID：13017840
> 
> 赞同：23
> 
> 时间：2012-10-22T18:53:15.713
> 
> 标签：python, serial-port, pyserial

我有一个 Python 程序，它通过**PySerial**模块从串行端口读取数据。我需要记住的两个条件是：我不知道有多少数据会到达，我不知道什么时候会收到数据。

基于此，我想出了以下代码片段：

```
#Code from main loop, spawning thread and waiting for data
s = serial.Serial(5, timeout=5)  # Open COM5, 5 second timeout
s.baudrate = 19200

#Code from thread reading serial data
while 1:
  tdata = s.read(500)    # Read 500 characters or 5 seconds

  if(tdata.__len__() > 0):        #If we got data
    if(self.flag_got_data is 0):  #If it's the first data we recieved, store it
      self.data = tdata        
    else:                         #if it's not the first, append the data
      self.data += tdata
      self.flag_got_data = 1 
```

因此，此代码将永远循环从串行端口获取数据。我们将获得多达 500 个字符来存储数据，然后通过设置一个标志来提醒主循环。如果没有数据存在，我们将回到睡眠状态并等待。

代码正在运行，但我不喜欢 5s 超时。我需要它，因为我不知道需要多少数据，但我不喜欢它每 5 秒醒来一次，即使没有数据存在。

有什么方法可以在执行之前检查数据何时可用`read`？我正在考虑类似于`select`Linux中的命令。

**注意：**我找到了该`inWaiting()`方法，但实际上这似乎只是将我的“睡眠”更改为投票，所以这不是我想要的。我只想睡觉，直到数据进来，然后去拿它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T19:19:48.397

好的，我实际上为此得到了一些我喜欢的东西。使用`read()`无超时和`inWaiting()`方法的组合：

```
#Modified code from main loop: 
s = serial.Serial(5)

#Modified code from thread reading the serial port
while 1:
  tdata = s.read()           # Wait forever for anything
  time.sleep(1)              # Sleep (or inWaiting() doesn't give the correct value)
  data_left = s.inWaiting()  # Get the number of characters ready to be read
  tdata += s.read(data_left) # Do the read and combine it with the first character

  ... #Rest of the code 
```

这似乎给出了我想要的结果，我猜这种类型的功能在 Python 中不作为单一方法存在

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-22T19:08:52.920

您可以设置`timeout = None`，然后`read`调用将阻塞，直到请求的字节数存在。如果您想等到数据到达，只需执行`read(1)`with timeout `None`。如果您想在不阻塞的情况下检查数据，请执行`read(1)`超时为零的操作，并检查它是否返回任何数据。

（请参阅文档[https://pyserial.readthedocs.io/en/latest/](https://pyserial.readthedocs.io/en/latest/)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-18T18:17:29.080

```
def cmd(cmd,serial):
    out='';prev='101001011'
    serial.flushInput();serial.flushOutput()
    serial.write(cmd+'\r');
    while True:
        out+= str(serial.read(1))
        if prev == out: return out
        prev=out
    return out 
```

像这样称呼它：

```
cmd('ATZ',serial.Serial('/dev/ttyUSB0', timeout=1, baudrate=115000)) 
```

# javascript - 在内容可编辑的 div 中使用 Javascript 动态创建分数

> ID：13017841
> 
> 赞同：3
> 
> 时间：2012-10-22T18:53:17.050
> 
> 标签：javascript, math, html, fractions

我正在开发的是一个网页，它允许用户在视觉空间中输入数学方程式和短语，而无需使用实际的键盘。到目前为止，我所拥有的是可视空间，它是一个内容可编辑的 div 标签，以及下方带有用于将数字和数学符号放入所述 div 的输入按钮的区域。现在我需要的是某种允许用户在 div 中输入分数的方法。我想也许以某种方式使用Javascript进入和退出下标/上标“模式”并将数字堆叠在一起，用一条线分隔，然后有一个按钮表示用户已完成将数字输入分数，但是在这一点上，我对 JS 的了解非常有限。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T08:35:53.547

你在这里有解析问题。我使用正则表达式来匹配我选择了 laTex 样式的预定义模式`{DIGIT}|{DIGIT}`

```
 function transformFracs() {
 //Grab digits with in {} recording only the numbers
 var regex = /{(\d+)}\|{(\d+)}/;
 //Cache for performance!
 var div = $(this);
 //Replace using html fraction notaion
 var afterReplace = div.html().replace(regex,
     "<sup>$1</sup>" +
     "&frasl;" +
     "<sub>$2</sub>")
 //Replace content of original div
 div.html(afterReplace);
 }
$(".editable").blur(transformFracs); 
```

查看[小提琴](http://jsfiddle.net/raam86/9B4f3/1/)来玩弄它。

# oracle - Oracle 文本花括号行为

> ID：13017844
> 
> 赞同：1
> 
> 时间：2012-10-22T18:53:28.383
> 
> 标签：oracle, search, nlp, oracle-text

我正在使用 oracle 文本在搜索栏中进行预读（根据规范作者）。

基本上，用户可以开始输入文本，我们用可能的匹配项填充建议栏。

我尝试为此使用 oracle 文本，但遇到了一些问题，最新的问题是：

表包含 answertext 的此条目： ... 我们提供许多定价选项 ...

```
SELECT
    questiontext as qtext,
   answertext as text,
   questionid FROM question
   WHERE contains(answertext, '{pric}', 1) > 0

; 
```

此查询不返回任何内容。但是使用 {pricing} 将返回正确的结果。

并建议为什么会发生这种情况会很棒！

编辑：只是想补充一点，使用词干对我不起作用，因为用户想要区分“报告”和“报告”，并且他们希望突出显示匹配的子字符串，如果我可以在返回的子字符串中找到该子字符串，则可以这样做结果。

编辑 2：我有我的猜测，oracle 使用索引中某种单词边界对每个单词进行标记，因此没有任何通配符，它​​会查找等于 = 'pric' 的标记，因此找不到它（因为有代币“定价”）。所以，如果这个猜测是正确的，我希望有人能插话我如何使上面的查询与示例条目一起工作，同时仍然保持空白，所以如果输入“定价选项”它应该返回但如果我输入“许多选项”它不应该...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:48:54.203

`CONTAINS`运算符支持[通配符](http://docs.oracle.com/cd/E11882_01/text.112/e24436/cqoper.htm#i998461)和模糊文本搜索。尝试：

```
SELECT * FROM question WHERE contains(answertext, '{pric%}', 1) > 0; 
```

或者

```
SELECT * FROM question WHERE contains(answertext, 'fuzzy({pric})', 1) > 0; 
```

但 with`fuzzy` `"prize"`也会匹配您的搜索条件。

要突出显示找到的子字符串，您可以使用[`CTX_DOC.MARKUP`](http://www.oracle-base.com/articles/10g/ctx_doc_markup.php).

# c++ - C++ 读取文本文件时遇到问题

> ID：13017847
> 
> 赞同：4
> 
> 时间：2012-10-22T18:53:37.580
> 
> 标签：c++, visual-studio-2010, text-files, fstream

我正在尝试读取文本文件，但没有任何结果。我觉得它可能在我的 Visual Studio 资源文件夹中没有正确链接，但如果我双击它 - 它在 Visual Studio 中打开正常，如果我测试它是否打开或者它是否很好，它不会遇到任何问题。该程序现在可以正常编译，但没有输出。没有任何内容打印到我的命令提示符。有什么建议么？

**代码**

```
#include <iostream>
#include <iomanip>
#include <fstream>
using namespace std;

int main()
{
    char str[100];
    ifstream test;
    test.open("test.txt");

    while(test.getline(str, 100, '#'))
    {
        cout << str << endl;
    }

    test.close();
    return 0;
} 
```

**文本文件**

```
This is a test Textfile#Read more lines here#and here 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T19:24:40.300

您尝试在没有路径的情况下按名称打开文件，这意味着该文件应位于程序的当前工作目录中。

当您从 VS IDE 运行程序时，问题出在当前目录。VS 默认将运行程序的当前工作目录设置为项目目录`$(ProjectDir)`。但是您的测试文件位于资源目​​录中。所以`open()`函数找不到它并`getline()`立即失败。

解决方案很简单 - 将您的测试文件复制到项目目录。或者将其复制到目标目录（`.exe`创建程序文件的位置，通常是`$(ProjectDir)\Debug`或`$(ProjectDir)\Release`）并在 VS IDE: 中更改工作目录设置`Project->Properties->Debugging->Working Directory`，设置为 $(TargetDir)。在这种情况下，它将在 IDE 和命令行/Windows 资源管理器中工作。

`open()`另一种可能的解决方案 - 在您的通话中设置正确的文件路径。出于测试/教育目的，您可以对其进行硬编码，但实际上这不是一种好的软件开发方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T19:29:49.570

不确定这是否会有所帮助，但我想简单地打开一个文本文件进行输出，然后将其读回。Visual Studio (2012) 似乎使这变得困难。我的解决方案如下所示：

```
#include <iostream>
#include <fstream>
using namespace std;

string getFilePath(const string& fileName) {
	string path = __FILE__; //gets source code path, include file name
	path = path.substr(0, 1 + path.find_last_of('\\')); //removes file name
	path += fileName; //adds input file to path
	path = "\\" + path;
	return path;
}

void writeFile(const string& path) {
	ofstream os{ path };
	if (!os) cout << "file create error" << endl;
	for (int i = 0; i < 15; ++i) {
		os << i << endl;
	}
	os.close();
}

void readFile(const string& path) {
	ifstream is{ path };
	if (!is) cout << "file open error" << endl;
	int val = -1;
	while (is >> val) {
		cout << val << endl;
	}
	is.close();
}

int main(int argc, char* argv[]) {
	string path = getFilePath("file.txt");
	cout << "Writing file..." << endl;
	writeFile(path);
	cout << "Reading file..." << endl;
	readFile(path);
	return 0;
}
```

# compiler-construction - Jasper 报告 - 升级 jasper 编译器 - JasperCompileManager.compileReportToFile 失败

> ID：13017850
> 
> 赞同：0
> 
> 时间：2012-10-22T18:53:42.030
> 
> 标签：compiler-construction, report

我在 Java 项目（使用 maven）中使用 jasper 报告（版本 4.0.1）。我被要求将 jasper 编译器更新到最新版本，现在我们正在使用 jasper-compiler-jdt 但我被要求使用与 ireport 相同的版本，我认为它是 jdt-compiler-3.1.1.jar，对吧？

但我对此有一些疑问。

它在 Maven 存储库中可用吗？我在那儿找不到。我应该使用 jdt-compiler-3.1.1.jar 还是 org.eclipse.jdt.core ？

我尝试了这两种方法，但在尝试编译 jrxml 文件时出现错误：

```
Errors were encountered when compiling report expressions class file:
 package net.sf.jasperreports.engine does not exist
 import net.sf.jasperreports.engine.*;" 
```

我将库添加到类路径。所以，我想知道：

*   哪个是正确的编译器（我们不想再使用 jasper-compiler-jdt）
*   如何使它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:19:05.087

1.jasper 报告（4.0.1 版）版本必须与ireport 的版本相同。所以你应该使用ireport4.0.1 来设计你的报告。

2.如何使它工作？您可以下载 iReport-Ultimate-Guide-3.5.pdf 和 jasperreports_ultimate_guide_3.5.pdf 两个 pdf 文件来学习如何使用。

3.玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T05:40:54.583

如果您使用的是 netbeans，我可以向您推荐一些东西。当您安装它时，netbeans IDE 会自动设置为使用旧 jdk。您已安装的 JDK 保留在一边，并使用旧的编译器。您可以进入设置进行更改。

# c++ - 弹出倒数第二个

> ID：13017852
> 
> 赞同：1
> 
> 时间：2012-10-22T18:53:52.087
> 
> 标签：c++, list, pointers, iterator

我是一名 C# 程序员，遇到了乱七八糟的指针问题，我就是找不到错误所在。我可以在列表中使用一些帮助

所以基本上我有一堆卡片，这些卡片保存在一个列表中。我只想取最上面的并将其返回给函数。我可以使用 pop_back() 但最后一张卡片必须保持原样，因为它是卡片背面（我稍后会用纹理和东西制作它）

```
Card * CardStack::HandOut()
{
    if (m_Stack.size() > 1)
    {
        list<Card *>::iterator it = m_Stack.end();
        advance(it, -2);
        Card *ret = *it;
        Card tmp = *ret;
        Card *tmpp = &tmp;
        m_Stack.remove(ret);
        return tmpp;
    }
    return NULL;
} 
```

所以我想总是弹出倒数第二张卡片。我敢肯定它完全是初学者的错误:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:56:37.867

您正在返回一个指向局部变量的指针，

```
Card tmp = *ret;
Card *tmpp = &tmp;
m_Stack.remove(ret);
return tmpp; 
```

函数退出后不再存在。因此，当您稍后使用指针时，您会调用未定义的行为。

你不应该打扰`tmp`and `tmpp`，返回`ret`应该这样做，`remove`不会破坏卡片，它只是从堆栈中删除（指向）它的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:01:17.177

您可以直接通过迭代器擦除项目指针。这也确保了使用 .remove() 的移除是 O(1) 而不是 O(n)，并避免在内容不唯一的情况下移除额外的项目。

```
 std::list<Card*>::iterator it = m_Stack.end();
    std::advance(it, -2);
    Card* res = *it;
    m_Stack.erase(it);
    return res; 
```

请注意，在 C++ 中存储原始指针并不是惯用的。如果复制成本较低，最好按值存储对象（即 use `list<Card>`），或者使用智能指针（例如`list<shared_ptr<Card> >`），以便在不再使用内存时自动收集内存。

# javascript - Click event doesn't work properly

> ID：13017864
> 
> 赞同：1
> 
> 时间：2012-10-22T18:54:49.497
> 
> 标签：javascript, events, canvas

I've made a little *experiment* with Html5 canvas and Javascript events. Unfortunately, in a certain case, the javascript click event has an unexpected behavior.

This is the fiddle of the *experiment* : [http://jsfiddle.net/Rh4kP/10/](http://jsfiddle.net/Rh4kP/10/)

When you click, often there is no output in the console. I observed this on **Google Chrome 22.0.1** and **Firefox 14.0.1**

More weird, when you comment one of the "flip" line like this :

```
document.getElementById(hiddenCanvas).style.display = 'block';
// document.getElementById(displayedCanvas).style.display = 'none'; 
```

or

```
// document.getElementById(hiddenCanvas).style.display = 'block';
document.getElementById(displayedCanvas).style.display = 'none'; 
```

Click events work propertly !

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:00:51.283

The definition of a click event is this, per the [Mozilla Development Network](https://developer.mozilla.org/en-US/docs/DOM/element.onclick):

> The click event is raised when the user clicks on an element. The click event will occur after the **mousedown and mouseup** events. [emphasis mine]

In other words, your 'flip' event is firing so quickly modifying content that your mousedown and mouseup events are not happening on the same DOM element, and so click does not fire.

Try [this example](http://jsfiddle.net/Wa4AM/) (derived from yours) to see this in action. You'll notice that when your `click` event fires, the mousedown and mouseup events happen on the same DOM element. But when it doesn't happen, it is because mousedown and mouseup are happening on different DOM elements. Another test to run is slowing down your flip/flop. With a very slow timeout, you'll have less of a chance of encountering this problem (though the chance still exists - I would recommend using `mouseup`)

Try using just the 'mouseup' event instead. I tested w/ your example and it seemed to consistently work.

See the [If you delete a DOM element, do any events that started with that element continue to bubble?](https://stackoverflow.com/questions/2732818/if-you-delete-a-dom-element-do-any-events-that-started-with-that-element-contin) question for some more information.

# iphone - 制作类似 Flipboard 的页面/面板动画？

> ID：13017865
> 
> 赞同：0
> 
> 时间：2012-10-22T18:54:49.980
> 
> 标签：iphone, objective-c, ipad

我一直想知道 Flipboard 是如何工作的，交叉路口的标签是如何完美而奇妙地透视变形的。他们到底是怎么做到的？老实说，我每次打开它时都想知道，所以我想，我也想学着这样做。或者，如果您碰巧知道应用程序 Clear（一个待办事项管理器），它也可以很好地扭曲和剪切视图。我应该怎么做才能学会做这种魔法？那些 Core Graphics 动画？这不是一个“简单”的图像动画，对吧？我知道这不是与代码相关的问题，但这里的人们知道我可以在哪里找到/了解这类东西。另外，我认为 Core Graphics 可以让你创建渐变和其他神奇的东西，对吗？我很想知道在哪里学习。我要提到的一件事是，例如 Ray Wenderlich 的 Tiny Wings 教程，他用我完全不理解的代码设置了所有的山丘。我已经在 Objective-C 中学习和工作了大约 2.5 年，我认为我已经获得了非常广泛的语言知识。（下图：Ray Wenderlich 的小翅膀教程中的汉字（对我来说））。这是什么 gl___ ？

```
glBindTexture(GL_TEXTURE_2D, _stripes.texture.name);
glDisableClientState(GL_COLOR_ARRAY);
glColor4f(1, 1, 1, 1);
glVertexPointer(2, GL_FLOAT, 0, _hillVertices);
glTexCoordPointer(2, GL_FLOAT, 0, _hillTexCoords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nHillVertices); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:00:39.143

GL_ 可能是一个[图形库](http://en.wikipedia.org/wiki/Graphics_library)。

# asynchronous - HttpClient 任务被取消

> ID：13017867
> 
> 赞同：3
> 
> 时间：2012-10-22T18:54:53.600
> 
> 标签：asynchronous, task, dotnet-httpclient

我正在尝试使用 HttpClient 使用以下代码将消息异步记录到 REST 服务：

```
public void LogMessage(string operationURI, string message, EventLogEntryType logEntryType)
        {
            using (var client = new HttpClient())
            {
                var cancellationToken = new CancellationToken();
                client.SendAsync(GetRequest(operationURI), cancellationToken).ContinueWith(
                    cw =>
                    {
                        var response = cw.Result; //(I get an error on this line)
                        if (!response.IsSuccessStatusCode)
                        {
                            LogMessageLocal(message, logEntryType);
                        }
                    });
            }
        } 
```

注意：GetRequestMessage 返回一个 HttpRequestMessage。

但我收到一条错误消息，指出“任务已取消。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T15:12:13.120

我相信当超过超时时会发生这种情况。您可以检查您的[timeout](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.timeout.aspx)，并记录在异常之前它未完成的时间，以查看它是否被超过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T13:35:33.790

HttpClient 在 SendAsync 完成之前被释放。这会导致 a`TaskCanceledException`被抛出。

1.  将`async`关键字添加到`LogMessage`.
2.  添加`await`关键字`SendAsync`并将其结果设置为`var response`.
3.  等待响应后，对响应做任何你想做的事情。

# javascript - 立即停止动画jQuery

> ID：13017882
> 
> 赞同：3
> 
> 时间：2012-10-22T18:55:31.500
> 
> 标签：javascript, jquery, css

我每秒钟都有一个动画，并且我有一个停止按钮，当我单击该按钮时，动画会停止，但之后会继续。没有其他方法可以删除动画吗？这是我的 [代码](http://jsfiddle.net/Mils/UxTdU/10/)。

```
 $(document).ready(function() {
    setInterval(function() {
        $("#myImg").animate({top: '50%',left: '50%',width: '174px',height: '174px',padding: '10px'}, 500);
         $("#myImg").animate({ marginTop: '0',marginLeft: '0',top: '0',left: '0',width: '70px',height: '70px',padding: '5px'}, 600); 
   },1000);    
});

$("#stop").click(function(){
$("#myImg").stop();
}); 
```

​谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:00:14.393

## *[jsFiddle 演示](http://jsfiddle.net/UxTdU/15/)*

1.  - 你不需要setInterval，你可以使用`.animate()`回调来循环你的`anim`函数。
2.  -嵌套您的动画功能
3.  `.stop()`-在您的第一次迭代中使用该方法`.animate()`只是为了防止动画堆积并清除一些动画内存；）

```
$(document).ready(function() {

   function anim(){
       $("#myImg").stop().animate({top: '50%',left: '50%',width: '174px',height: '174px',padding: '10px'}, 500, function(){
            $(this).animate({ marginTop: '0',marginLeft: '0',top: '0',left: '0',width: '70px',height: '70px',padding: '5px'}, 600, anim); // <-- the 'anim' callback
       });    // SCROLL THERE --> TO FIND THE CALLBACK :D --> 
    }
    anim(); // run!!

    $("#stop").click(function(){
        $("#myImg").stop();
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:01:09.620

该`setInterval()`调用**不断**`.animate()`向您的元素添加新调用。这意味着您成功停止了动画，然后*再次*`setInterval()`调用它，使动画再次运行。

 *你为什么要戴这个`setInterval()`？

无论如何，您也必须取消计划。您可以通过执行类似于以下的操作来做到这一点：

```
var schedule = setInterval(fn, 1000);
clearInterval(schedule); 
```*

# java - 用 char1 切换

> ID：13017886
> 
> 赞同：1
> 
> 时间：2012-10-22T18:55:45.573
> 
> 标签：java

我正在尝试使用参数类型为 char 1 的 Java 6 上的开关，但出现错误“无法将 char 转换为字符串”，我在这里做错了什么？

```
public static void setRoot(Element rootTreeNode,char type ) {

    switch (type) {
    case "a": 
```

我希望案件将在 char1 上进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:56:43.113

使用**单引号** `' '`，**双引号用来表示** `String`，`char`在Java中用**单引号**表示。

```
switch (type) {
    case 'a': 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T18:56:45.650

`"a"`不是字符而是字符串。您应该使用**单引号**( `'a'`) 来匹配字符：-

```
switch(type) { 
   case 'a':
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:58:20.537

采用

```
 switch (type)
  { case 'a' : 
```

注意单引号

单引号代表java中的char，而双引号代表字符串。因此你得到的错误

# ruby - 按字素拆分 Unicode 实体

> ID：13017888
> 
> 赞同：3
> 
> 时间：2012-10-22T18:55:46.960
> 
> 标签：ruby, unicode, normalization, unicode-normalization, grapheme

```
"d̪".chars.to_a 
```

给我

```
["d"," ̪"] 
```

如何让 Ruby 按字素拆分它？

```
["d̪"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-17T09:14:33.890

编辑：正如@michau's answer notes，Ruby 2.5 引入了该`grapheme_clusters`方法，以及`each_grapheme_cluster`如果您只想迭代/枚举而不必创建数组。

* * *

在 Ruby 2.0 或更高版本中，您可以使用`str.scan /\X/`

```
> "d̪".scan /\X/
=> ["d̪"]
> "d̪d̪d̪".scan /\X/
=> ["d̪", "d̪", "d̪"]

# Let's get crazy:

> str = 'Z͑ͫ̓ͪ̂ͫ̽͏̴̙̤̞͉͚̯̞̠͍A̴̵̜̰͔ͫ͗͢L̠ͨͧͩ͘G̴̻͈͍͔̹̑͗̎̅͛́Ǫ̵̹̻̝̳͂̌̌͘!͖̬̰̙̗̿̋ͥͥ̂ͣ̐́́͜͞'

> str.length
=> 75
> str.scan(/\X/).length
=> 6 
```

如果您出于任何原因想要匹配字素边界，您可以`(?=\X)`在您的正则表达式中使用，例如：

```
> "d̪".split /(?=\X)/
=> ["d̪"] 
```

`\X`如果您由于某种原因不能使用 ActiveSupport（包含在 Rails 中）也有一种方法：

```
ActiveSupport::Multibyte::Unicode.unpack_graphemes("d̪").map { |codes| codes.pack("U*") } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:10:46.710

`Unicode::text_elements`从[http://www.yoshidam.net/unicode.txt](http://www.yoshidam.net/unicode.txt)中记录的[unicode.gem](https://rubygems.org/gems/unicode)使用。

```
irb(main):001:0> require 'unicode'
=> true
irb(main):006:0> s = "abčd̪é"
=> "abčd̪é"
irb(main):007:0> s.chars.to_a
=> ["a", "b", "č", "d", "̪", "é"]
irb(main):009:0> Unicode.nfc(s).chars.to_a
=> ["a", "b", "č", "d", "̪", "é"]
irb(main):010:0> Unicode.nfd(s).chars.to_a
=> ["a", "b", "c", "̌", "d", "̪", "e", "́"]
irb(main):017:0> Unicode.text_elements(s)
=> ["a", "b", "č", "d̪", "é"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-14T13:03:11.733

以下代码应该在 Ruby 2.5 中工作：

```
"d̪".grapheme_clusters # => ["d̪"] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-09T08:09:56.717

Ruby2.0

```
 str = "d̪"

   char = str[/\p{M}/]

   other = str[/\w/] 
```

# jquery - “ajax:success”被调用两次

> ID：13017890
> 
> 赞同：3
> 
> 时间：2012-10-22T18:55:51.187
> 
> 标签：jquery, ruby-on-rails

我正在使用 jquery_ujs 发送一个简单的发布请求。我将回调函数绑定到“ajax:success”事件。但是，每个成功的帖子都会调用此回调两次。

我知道这与[其他问题](https://stackoverflow.com/questions/7225600/why-is-rails-ujs-ajaxsuccess-bind-being-called-twice)类似，但我检查了我的源代码，它似乎没有两次加载 jquery_ujs.js 文件（正如许多回复所建议的那样）。

```
 $(".new_item").bind("ajax:success", 
    function(xhr, data, status) 
    {
                 /* this is called twice for each call!*/
    } 
```

有人有任何指示吗？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T19:05:02.953

正在发生的几件事之一。

要么您有多个带有 .new_item 类的元素

```
alert($(".new_item").length); 
```

你发送 ajax 请求两次

```
alert("Sending Request");
$.ajax(... 
```

或者您将事件绑定两次

```
alert("Binding Event");
$(".new_item").bind("ajax:success", function(xhr, data, status) { 
```

*注意：如果您使用的是现代浏览器，请将警报替换为 console.log()*

# c# - 为什么此代码在通过 TPL/Tasks 执行时会失败？

> ID：13017892
> 
> 赞同：2
> 
> 时间：2012-10-22T18:56:13.700
> 
> 标签：c#, .net, asp.net-web-api, task-parallel-library, .net-4.5

我正在使用 System.Net.Http 来使用网络资源。在单线程上运行时，它可以完美运行。当我通过 TPL 运行代码时，它挂起并且在超时之前永远不会完成。

发生的情况是所有线程最终都在 sendTask.Result 行上等待。我不确定他们在等待什么，但我认为这是 HttpClient 中的东西。

网络代码为：

```
using (var request = new HttpRequestMessage(HttpMethod.Get, "http://google.com/"))
{
    using (var client = new HttpClient())
    {
        var sendTask = client.SendAsync
              (request, HttpCompletionOption.ResponseHeadersRead);
        using (var response = sendTask.Result)
        {
            var streamTask = response.Content.ReadAsStreamAsync();
            using (var stream = streamTask.Result)
            {
                // problem occurs in line above
            }
        }
    }
} 
```

我使用的 TPL 代码如下。Do 方法包含上面的代码。

```
var taskEnumerables = Enumerable.Range(0, 100);
var tasks = taskEnumerables.Select
            (x => Task.Factory.StartNew(() => _Do(ref count))).ToArray();
Task.WaitAll(tasks); 
```

我尝试了几种不同的调度程序，唯一能让它工作的方法是编写一个调度程序，将正在运行的任务数限制为 2 或 3。然而，即使这样有时也会失败。

我会假设我的问题出在 HttpClient 中，但在我的一生中，我在我的代码中看不到任何共享状态。有没有人有任何想法？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:20:34.670

我终于找到了问题。问题是 HttpClient 发出它自己的附加任务，所以我开始的单个任务实际上可能会产生 5 个或更多任务。

调度程序配置了对任务数量的限制。我启动了任务，导致正在运行的任务数量达到最大限制。然后 HttpClient 尝试启动它自己的任务，但是由于达到了限制，它一直阻塞，直到任务数量下降，这当然从未发生过，因为它们正在等待我的任务完成。你好僵局。

故事的寓意：

1.  任务可能是全局资源
2.  任务之间通常存在不明显的相互依赖关系
3.  调度程序不容易使用
4.  不要假设您控制调度程序或任务数量

我最终使用了另一种方法来限制连接数。

埃里克

# javascript - 如何在元素后获取文本节点？

> ID：13017894
> 
> 赞同：39
> 
> 时间：2012-10-22T18:56:21.610
> 
> 标签：javascript, jquery, jquery-selectors, textnode

使用 jQuery。我有以下html：

```
<input type="checkbox" name='something' value='v1' /> All the world <br /> 
```

我怎么会只得到文字。我应该使用什么选择器？（我需要“全世界”）

我也无法触摸HTML...

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-22T19:00:06.257

尝试使用 DOM 函数 `.nextSibling`选择下一个节点（包括文本节点）并用于`nodeValue`获取文本`All the world`

```
$(':checkbox')[0].nextSibling.nodeValue 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T18:59:02.273

只需使用plain-JavaScript `nextSibling`，尽管您必须“退出” jQuery 才能使用该方法（因此使用`[0]`）：

```
var text = $('input:checkbox[name="something"]')[0].nextSibling.nodeValue; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rbDN8/1/)。

我终于意识到我的另一个建议出了什么问题，该建议已得到修复：

```
var text = $('input:checkbox[name="something"]').parent().contents().filter(
    function(){
        return this.nodeType === 3 && this.nodeValue.trim() !== '';
    }).first().text(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rbDN8/3/)。

并确保您只`textNodes`从*之前*获得`br`（尽管坦率地说，这变得过于复杂，第一个建议更容易工作，而且我怀疑可靠）：

```
var text = $('input:checkbox[name="something"]').parent().contents().filter(
    function(){
        return this.nodeType === 3 && this.nodeValue.trim() !== '' && $(this).prevAll('br').length === 0;
    }).text(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rbDN8/4/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T19:01:44.853

如果您`label`在标记中添加了 a（推荐），您可以这样做：

HTML

```
<input type="checkbox" id="something" name="something" value="v1" /><label for="something">All the world</label> <br /> 
```

JS

```
var text = $( '#something ~ label:first' ).text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T17:50:32.560

只是在一个老问题的例子中折腾，将文本包装在标签中

```
$('input[type="checkbox"]')
  .each(function(index, el) {
    var textNode = $(el.nextSibling);
    if (textNode[0].nodeType == Node.TEXT_NODE) {
      let checkwrap = $(el).wrap('<label class="found"></label>').closest('.found');
      textNode.appendTo(checkwrap);
    }
  });
```

```
.found {
  border: solid cyan 1px;
  color: blue;
  padding: 0.5em;
  display: inline-block;
  margin: 0.3em;
}

label.found {
  color: lime;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<span>in a span</span>
<input type="checkbox" name='something' value='v1' /> All the world <br />
<input type="checkbox" name='something2' value='v2' /> All the world 2 <span>in a span</span><br />
<input type="checkbox" name='something3' value='v3' /> All the world 3 <span>in a span</span>
<input type="checkbox" name='something4' value='v4' /> All the world 4<span>in a span also</span>
```

在那里，包裹在标签中，哦等等，这是一个答案，只需`nextSibling`要按类型隔离

# c# - Ajax UpdatePanel 中的文件上传失败

> ID：13017896
> 
> 赞同：0
> 
> 时间：2012-10-22T18:56:26.387
> 
> 标签：c#, asp.net, ajax, file-upload

> **可能重复：**
> [文件上传控制不起作用](https://stackoverflow.com/questions/5482644/file-upload-control-is-not-working)

`FileUpload`我有一个带有控件的网页，`Image`控件显示上传的文件，`DataList`控件显示查询结果。有一个按钮可以触发处理：从上传控件保存图像并将其传递给处理以查找图像匹配并将它们显示在网格视图控件中。

我想执行整个操作无闪烁并将所有控件放入

```
<asp:UpdatePanel ID=”UpdatePanel1” runat=”server”&gt;
    <ContentTemplate>
    ...
    </ContentTemplate>
</asp:UpdatePanel> 
```

但是，单击按钮后，文件上传控件没有文件。我是否需要将文件上传和图像处理逻辑分成2个按钮，如果没有整页回发，文件上传就无法执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:11:12.790

使用 AJAX 控制工具包中的 AjaxFileUpload。您可以在此处找到文档：[http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx)

# join - 使用电话号码和前缀（可变长度）加入 Hive 中的 2 个表

> ID：13017897
> 
> 赞同：1
> 
> 时间：2012-10-22T18:56:30.687
> 
> 标签：join, hive, user-defined-functions, hiveql

我正在尝试使用 Hive 将电话号码与某个区域匹配。我有一个表（prefmap），它将数字前缀（prefix）映射到一个区域（area）和另一个表（users），其中包含电话号码列表（nb）。每个电话号码只有 1 个匹配项（无子区域）

问题是前缀的长度不是固定的，所以我不能在 JOIN 的 ON() 条件中使用 UDF 函数 substr(nb,"prefix's length") 将数字的子字符串与前缀匹配。

当我尝试使用 instr() 来查找数字是否具有匹配的前缀时：

```
SELECT users.nb,prefix.area
FROM users 
LEFT OUTER JOIN prefix 
ON (instr(prefmap.prefix,users.nb)=1) 
```

我在第 4 行收到错误“在加入‘1’中遇到左右别名）

我怎样才能让它工作？我正在使用 hive 0.9 感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T14:47:52.513

可能不是最好的解决方案，但至少它完成了工作：使用 WHERE 定义匹配条件而不是 ON() （现在强制为 TRUE）

```
select users.nb, prefix.area  
from users  
LEFT OUTER JOIN prefix  
ON(true)  
WHERE instr(users.nb,prefmap.prefix)=1 
```

它并不完美，因为它有点慢。在 WHERE 条件保留唯一正确的条目之前，它会创建与匹配表中一样多的临时（无用）条目。所以最好只在不太长的情况下使用它。谁能想到更好的方法来做到这一点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:16:12.587

hive 无法转换`(instr(prefmap.prefix,users.nb)=1)`为 mapreduce 作业。

所以 hive 的 join 只支持相等表达式。有关更多信息，请参阅[hive 加入 wiki](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Joins)。

# json - 使用 json api for Wordpress 显示特定附件

> ID：13017901
> 
> 赞同：0
> 
> 时间：2012-10-22T18:56:44.330
> 
> 标签：json, wordpress

当我去：example.com/api/get_tag_posts/?dev=2&slug=ME3022&include=attachments

我懂了：

```
{
  status: "ok",
  count: 1,
  pages: 1,
  tag: {
  id: 17,
  slug: "me3022",
  title: "ME3022",
  description: "",
  post_count: 1
},
posts: [
 {
  id: 181,
  attachments: [
{
id: 397,
url: "http://example.com/files/2012/10/WebInstruction_TCH.pdf",
slug: "webinstruction_tch-3",
title: "Traditional Chinese",
description: "",
caption: "Traditional Chinese",
parent: 181,
mime_type: "application/pdf"
  },
{
id: 398,
url: "http://example.com/files/2012/10/WebInstruction_SCH.pdf",
slug: "webinstruction_sch-3",
title: "Simplified Chinese",
description: "",
caption: "Simplified Chinese",
parent: 181,
mime_type: "application/pdf"
}, 
```

我想展示的是一个特定的附件，而不是所有的附件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T23:01:42.077

获取特定附件`&include=attachments,id=51`

# mysql - SQL 查询帮助 - 按数字序列分组

> ID：13017906
> 
> 赞同：3
> 
> 时间：2012-10-22T18:57:07.667
> 
> 标签：mysql, sql

我有一个表，其中包括以下列和数据：

```
id     dtime        instance     data      dtype

1     2012-10-22     10000       d        1
2     2012-10-22     10000       d        1
..
7     2012-10-22     10004       d        1
..
15    2012-10-22     10000       @        1
16    2012-10-22     10004       d        1
17    2012-10-22     10000       d        1 
```

我想在数据列中对“d”的序列进行分组，并在序列的末尾使用“@”。

这可以通过实例列进行分组，这是一个单独的数据流，但是流中可以有多个序列。

如果在同一实例中没有数据列，例如，在该实例的最后一个数据之后 3 秒，并且在该时间间隔内没有找到“@”，我还想结束一个序列。

我已经设法使用游标和 while 循环来做到这一点，这对于具有 1000 行的表来说工作得相当好，但是这个查询最终将用于更多的行，这两种方法需要大约一分钟的数据集3-5000 行。

在这个网站和其他网站上阅读，似乎基于集合的逻辑可能是要走的路，但是我想不出如果没有在每一行上进行某种循环来比较它来构建'序列'。

如果有人可以提供帮助，或者指出我可以做的事情的方向，将不胜感激。:)

理想情况下，我希望数据以以下格式输出：

datacount 实例 lastdata dtime

```
20      10000    @      2012-10-22

19      10000    d      2012-10-22

22      10004    @      2012-10-22

20      10022    @      2012-10-22 
```

其中 (datacount) 是“序列”中的行数（这是导致“@”或 3 秒延迟的数据），(instance) 是原始表中的实例 ID，(lastdata)是序列中的最后一个数据值，(dtime) 是最后一个数据值的日期时间值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:04:04.017

让我向您展示如何为最终的“@”执行此操作。时差遵循类似的想法。关键思想是在当前行之后获取下一个'@'。为此，您需要一个相关的子查询。之后，您可以通过以下方式进行分组：

```
select groupid, count(*) as NumInSeq, max(dtime) as LastDateTime
from (select t.*,
             (select min(t2.id) from t t2 where t2.id > t.id and t2.data = '@'
             ) as groupid
      from t
     ) t
group by groupid 
```

处理时间序列有点复杂。它是这样的：

```
select groupid, count(*) as NumInSeq, max(dtime) as LastDateTime,
       (case when sum(case when data = '@' then 1 else 0 end) > 0 then '@' else 'd' end) as FinalData
from (select t.*,
             (select min(t2.id)
              from t t2
              where t2.id > t.id and
                    (t2.data = '@' or UNIX_TIMESTAMP(t2.dtime) - UNIX_TIMESTAMP(t.dtime) < 3
             ) as groupid
      from t
     ) t
group by groupid 
```

# perl - 如何比较在while循环中读取的文件的两行（如果它们相等或不相等）？

> ID：13017907
> 
> 赞同：0
> 
> 时间：2012-10-22T18:57:07.697
> 
> 标签：perl

我有一个像下面这样的文件，其中以数字开头的行是我的样本的 ID，以下行是数据。

```
10001;02/07/98;;PI;M^12/12/59^F^^SP^09/12/55
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D16S539
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D7S820
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D13S317
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D5S818
10002;02/07/98;;RJ;F^20/04/86^SP^
;;;;;F1|SP1;;;12;10;12;11;;D10S212
;;;;;F1|SP1;;;8;8;10;8;;D7S820
;;;;;F1|SP1;;;12;11;14;11;;D13S317
;;;;;F1|SP1;;;13;12;13;8;;D5S818 
```

对于包含数据的行，我想测试字段 6-11 是否相同，因为只有当它们**不相等**时我才想要数据（在第一种情况下，它们都是“9”）。

于是我想到了将行拆分并存储为数组，然后用 ~~ 运算符比较数组。但是，如果我在 while 循环中读取文件并且每行都重新定义了数组，我该怎么做呢？或者也许有更好的方法来做到这一点。

提前致谢！

这是一个伪代码来说明我想要做什么：

```
open FILE, $ARGV[0] or die $!;
while (<FILE>) {
    chomp;
    my @field = split /;/;
    if ($field[0] eq '') {
        if @fields[6 .. 11] is not equal to @fields[6 .. 11] in all the next lines {
            do my calculation;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:42:30.183

我说数据真的代表两条记录是否正确？如果是这样，您想为完整记录累积行数。

```
my @super_rec;
while (<>) {
    chomp;
    my @fields = split /;/;
    if ($fields[0] ne '') {
       process_rec(\@super_rec) if @super_rec;
       @super_rec = \@fields;
    } else {
       push @super_rec, \@fields;
    }
}

process_rec(\@super_rec) if @super_rec; 
```

那么，你的问题就可以得到解答了。

```
sub process_rec {
    my ($super_rec) = @_;
    my ($rec, @subrecs) = @$super_rec;

    my $do_calc = 0;
    for my $i (1..$#subrecs) {
        if (  $subrecs[0][ 6] ne $subrecs[$i][ 6]
           || $subrecs[0][ 7] ne $subrecs[$i][ 7]
           || $subrecs[0][ 8] ne $subrecs[$i][ 8]
           || $subrecs[0][ 9] ne $subrecs[$i][ 9]
           || $subrecs[0][10] ne $subrecs[$i][10]
           || $subrecs[0][11] ne $subrecs[$i][11]
        ) {
           $do_calc = 1;
           last;
        }
    }

    if ($do_calc) {
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:22:26.573

我假设您正在寻找跨行比较数据，而不是在一行内。如果我错了，请忽略我的其余答案。

我这样做的方法是将字段 6 到 11 重新连接为字符串。将第一行的数据保留为 $firstdata，并将每个后续行的数据作为 $nextdata 进行比较。每次数据不匹配时，您都会增加 $differences 计数器。当你得到一个 ID 行时，检查之前的 $differences 是否大于零，如果是的话，你的计算（你可能需要将 ID 行和其他字段保存在一些其他变量中）。然后重新初始化 $differences 和 $firstdata 变量。

```
my $firstdata = "";
my $nextdata = "";
my $differences = 0;
open FILE, $ARGV[0] or die $!;
while (<FILE>) {
    chomp;
    my @field = split /;/;
    if ($field[0] eq '') {
        $nextdata = join(';', @fields[6..11]);
        if ($firstdata && ($nextdata ne $firstdata)) {
            $differences++;
        } else {
            $firstdata = $nextdata;
        }
    } else {
        if ($differences) {
            # do your calculation for previous ID
        }
        $firstdata = "";
        $differences = 0;
    }
}
if ($differences) {
    # do your calculation one last time for the last ID
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:24:31.857

这是一种使用`Regex`. 如果索引固定在 6 到 11 之间，这可能比其他方法效率低，并且只知道这些索引，因为它将遍历整个字符串：-

```
open FILE, $ARGV[0] or die $!;
while (<FILE>) {
    chomp;
    my $num = 0;
    my $same = 1;
    while (/;(\d+);/) {

       if ($num == 0) { $num = $1; } 
       elsif ($1 != $num) { $same = 0; last; }

       # Substitute current digit matched with x (or any char) 
       # to avoid infinite loop
       s/$1/x/; 
    }  

    if ($same) {
       print "All digits same";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:08:04.413

使用该[`Text::CSV_XS`](http://search.cpan.org/perldoc?Text%3a%3aCSV_XS)模块，您可以执行以下操作：

```
use strict;
use warnings;
use Text::CSV_XS;
use feature 'say';

my $csv = Text::CSV_XS->new({
        sep_char    => ";",
        binary      => 1,
    });

my %data;
my @hdrs;  # store initial order of headers
my $hdr;
while (my $row = $csv->getline(*DATA)) {
    if ($row->[0] =~ /^\d+$/) {
        $csv->combine(@$row) or die "Cannot combine: " .
            $csv->error_diag();
        $hdr = $csv->string();   # recreate the header 
        push @hdrs, $hdr;        # save list of headers
    } else {
        push @{ $data{$hdr} }, [ @{$row}[6..11] ];
    }
}

for (@hdrs) {
    say "$_\n   arrays are: " . (is_identical($data{$_}) ? "same":"diff");
}

sub is_identical {
    my $last;
    for (@{$_[0]}) {         # argument is two-dimensional array
        $last //= $_;
        return 0 unless ( @$_ ~~ @$last );
    }
    return 1;                # default = all arrays were identical
}

__DATA__
10001;02/07/98;;PI;M^12/12/59^F^^SP^09/12/55
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D16S539
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D7S820
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D13S317
;;;;;M1|F1|SP1;9;9;9;9;9;9;;D5S818
10002;02/07/98;;RJ;F^20/04/86^SP^
;;;;;F1|SP1;;;12;10;12;11;;D10S212
;;;;;F1|SP1;;;8;8;10;8;;D7S820
;;;;;F1|SP1;;;12;11;14;11;;D13S317
;;;;;F1|SP1;;;13;12;13;8;;D5S818 
```

**输出：**

```
10001;02/07/98;;PI;M^12/12/59^F^^SP^09/12/55
   arrays are: same
10002;02/07/98;;RJ;F^20/04/86^SP^
   arrays are: diff 
```

# debugging - 如何获取有关在 groovy 中执行脚本的详细信息

> ID：13017908
> 
> 赞同：1
> 
> 时间：2012-10-22T18:57:07.853
> 
> 标签：debugging, groovy, expression

我在[这里](http://grails.org/doc/2.1.0.RC2/guide/introduction.html#whatsNew)找到了我想要的一个很好的例子：

![在此处输入图像描述](../Images/9b1ae3c8b22f7f03849c2eb3d0ebcdcc.png)

基本上能够将字符串作为带有表达式的 groovy 脚本执行，但如果条件为假，我想显示有关为什么它被评估为假的详细信息。

**编辑**

我想要一个像这样工作的实用方法：

```
def expression = "model.book.title == \"The Shining\""
def output = magicMethod(expression)

// output.result: the exact result of executing expression
// output.detail: could be a string telling me why this expression returns true or false, similar to de image 
```

我认为这可能是`Eval.me`+`assert`和捕获异常以获取详细信息的组合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:04:01.670

是的，它适用于断言，感谢@Justin Piper 的想法

这是片段：

```
def model = [model:[book:[title:"The Shinning"]]]

def magicMethod= { String exp ->
    def out = [:]
    out.result = Eval.x(model,"x.with{${exp}}")
    try{
        if(out.result){
            Eval.x(model,"x.with{!assert ${exp}}")
        }else{
            Eval.x(model,"x.with{assert ${exp}}")
        }
    }catch(Throwable e){
        out.detail = e.getMessage()
    }
    return out
}

def expression = "model.book.title == \"The Shining\""
def output = magicMethod(expression)

println "result: ${output.result}"
println "detail: ${output.detail}" 
```

# ios - 在上传到服务器之前使用 Canvas 调整 Iphone 图像的大小

> ID：13017909
> 
> 赞同：4
> 
> 时间：2012-10-22T18:57:08.293
> 
> 标签：ios, image, canvas, resize

在上传到我们的服务器之前，我们正在使用 Canvas 调整 Iphone/IPAD 上的图像大小。

在 iPhone 4S 和 5 上，当使用前置摄像头在横向模式下拍摄照片时，调整大小可以正常工作。在纵向模式下拍摄时，图像会被压扁约 1/4。但是当使用后置摄像头拍摄时，所有图像，包括风景和肖像，都被压缩了大约 7/8，只留下一条细带可供查看。

在IPAD和IPOD上，前后摄像头都是一样的：横向图像很好，但纵向图像被压缩了1/4。

我们尝试了几种不同的大小调整算法，但最终得到了相同的结果。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:02:26.150

我找到了一个可行的解决方案。gokercebeci在 github 上发布了一个很棒的[jQuery 插件。](https://github.com/gokercebeci/canvasResize)它对我的应用程序按预期工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T01:36:36.410

[在HTML5 Canvas drawImage ratio bug iOS](https://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios)找到了一个适合我的解决方案。该解决方案已获得 stomita 的认可，并于 2014 年 1 月 14 日由 tombre 和 matt burns 发布和编辑（我相信）。

# arrays - Symfony 会话获取数组值

> ID：13017910
> 
> 赞同：0
> 
> 时间：2012-10-22T18:57:15.137
> 
> 标签：arrays, session, symfony

我正在使用 Symfony2，并且无法将数组值存储在会话中，而不是将它们放入变量或对象中。

可能是这样的：

```
echo $app['session']->get('shop')->get('name'); 
```

目前我正在通过这样做来实现它，但为了简单起见，我想避免它：

```
$temp = $app['session']->get('shop');
echo $temp['name']; 
```

可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:05:03.113

会话对象只是一个“参数包”，一个保存键和值的对象。

如果您想创建该机制的另一个级别，则必须实例化您自己的包。

```
$shop = new \Symfony\Component\HttpFoundation\ParameterBag;
$shop->set('name', 'Fantastic Warehouse');

$app['session']->set('shop', $shop);

// next request
echo $app['session']->get('shop')->get('name'); 
```

# google-maps-api-3 - 为每个多边形打开 InfoWindow 谷歌地图 V3

> ID：13017915
> 
> 赞同：15
> 
> 时间：2012-10-22T18:57:40.560
> 
> 标签：google-maps-api-3, polygon, infowindow

希望有人可以帮助我解决这个问题。我正在尝试为我的用户创建的每个多边形打开一个信息窗口。我对标记使用了相同的代码并且效果很好，但我无法使其适用于每个多边形。

关于如何解决这个问题的任何想法？

```
var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2>Test</h2>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
}); 
```

// 显示区域

```
<?php foreach ($field->result() as $f):?>

// Create an array with the coordanates of each area

var field<?=$f->id?>Coords = [
    <?php $latlng=$this->resources_data->field_latlng($f->id);?>
    <?php foreach ($latlng->result() as $point):?>
    new google.maps.LatLng(<?=$point->lat?>, <?=$point->lng?>),
    <?php endforeach;?>
];

// Create a polygon with the points of the area

var area<?=$f->id?>=new google.maps.Polygon({
    paths: area<?=$f->id?>Coords,
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.35
});

// Add the area to the map.

area<?=$f->id?>.setMap(map);

google.maps.event.addListener(area<?=$f->id?>,'click',function(){
    infowindow.open(map,area<?=$f->id?>)
});

<?php endforeach;?> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-22T19:08:56.723

您不能对多边形使用与标记相同的[InfoWindow.open](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)形式（没有要传入的标记）。

从[文档](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

> **打开**（地图？：地图|街景全景，锚点？：MVCObject）
> 
> 返回值：无
> 
> 在给定地图上打开此信息窗口。可选地，信息窗口可以与锚相关联。**在核心 API 中，唯一的锚点是 Marker 类。**但是，锚点可以是任何 MVCObject，它公开 LatLng 位置属性和可选的用于计算 pixelOffset 的 Point anchorPoint 属性（请参阅 InfoWindowOptions）。anchorPoint 是从锚点位置到信息窗口尖端的偏移量。）

在调用 open 方法（点击的纬度通常是一个不错的选择）时，您需要专门设置您希望它打开的位置，使用 InfoWindow.setPosition()。

[例子](http://www.geocodezip.com/v3_polygon_example_clickable_squares.html)

**代码片段：**

```
var infowindow = new google.maps.InfoWindow({
  size: new google.maps.Size(150, 50)
});

function initialize() {
  var geolib = google.maps.geometry.spherical;
  var myOptions = {
    zoom: 20,
    center: new google.maps.LatLng(32.738158, -117.14874),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
  });
  bounds = new google.maps.LatLngBounds();

  var polygon1 = new google.maps.Polygon({
    map: map,
    path: [geolib.computeOffset(new google.maps.LatLng(32.737355, -117.148719), 100, 0),
      geolib.computeOffset(new google.maps.LatLng(32.737355, -117.148719), 100, 120),
      geolib.computeOffset(new google.maps.LatLng(32.737355, -117.148719), 100, -120)
    ],
    name: "polygon1"
  });
  google.maps.event.addListener(polygon1, 'click', function(event) {
    var contentString = "name:" + this.name + "<br>" + event.latLng.toUrlValue(6);
    infowindow.setContent(contentString);
    infowindow.setPosition(event.latLng);
    infowindow.open(map);
  });
  for (var i = 0; i < polygon1.getPath().getLength(); i++) {
    bounds.extend(polygon1.getPath().getAt(i));
  }
  var polygon2 = new google.maps.Polygon({
    map: map,
    path: [geolib.computeOffset(new google.maps.LatLng(32.739341, -117.148912), 90, 180),
      geolib.computeOffset(new google.maps.LatLng(32.739341, -117.148912), 90, 60),
      geolib.computeOffset(new google.maps.LatLng(32.739341, -117.148912), 90, -60)
    ],
    name: "polygon2"
  });
  google.maps.event.addListener(polygon2, 'click', function(event) {
    var contentString = "name:" + this.name + "<br>" + event.latLng.toUrlValue(6);
    infowindow.setContent(contentString);
    infowindow.setPosition(event.latLng);
    infowindow.open(map);
  });
  for (var i = 0; i < polygon2.getPath().getLength(); i++) {
    bounds.extend(polygon2.getPath().getAt(i));
  }

  map.fitBounds(bounds);
}
google.maps.event.addDomListener(window, 'load', initialize);

function createClickablePoly(poly, html, label, point) {
  gpolys.push(poly);
  if (!point && poly.getPath && poly.getPath().getLength && (poly.getPath().getLength > 0) && poly.getPath().getAt(0)) {
    point = poly.getPath().getAt(0);
  }
  var poly_num = gpolys.length - 1;
  if (!html) {
    html = "";
  } else {
    html += "<br>";
  }
  var length = poly.Distance();
  if (length > 1000) {
    html += "length=" + poly.Distance().toFixed(3) / 1000 + " km";
  } else {
    html += "length=" + poly.Distance().toFixed(3) + " meters";
  }
  for (var i = 0; i < poly.getPath().getLength(); i++) {
    html += "<br>poly[" + poly_num + "][" + i + "]=" + poly.getPath().getAt(i);
  }
  html += "<br>Area: " + poly.Area() + " sq meters";
  // html += poly.getLength().toFixed(2)+" m; "+(poly.getLength()*3.2808399).toFixed(2)+" ft; ";
  // html += (poly.getLength()*0.000621371192).toFixed(2)+" miles";
  var contentString = html;
  google.maps.event.addListener(poly, 'click', function(event) {
    infowindow.setContent(contentString);
    if (event) {
      point = event.latLng;
    }
    infowindow.setPosition(point);
    infowindow.open(map);
    // map.openInfoWindowHtml(point,html); 
  });
  if (!label) {
    label = "polyline #" + poly_num;
  }
  label = "<a href='javascript:google.maps.event.trigger(gpolys[" + poly_num + "],\"click\");'>" + label + "</a>";
  // add a line to the sidebar html
  //  side_bar_html += '<input type="checkbox" id="poly'+poly_num+'" checked="checked" onclick="togglePoly('+poly_num+');">' + label + '<br />';
}
```

```
body,
html {
  height: 100%;
  width: 100%;
}
```

```
<script src="https://maps.google.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<table border="1" style="height:100%; width:100%">
  <tr>
    <td>
      <div id="map_canvas" style="width:100%; height:100%"></div>
    </td>
    <td width="200">
      <div id="report"></div>
    </td>
  </tr>
</table>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-19T07:17:08.897

```
<script>

function initMap() {
         var map = new google.maps.Map(document.getElementById('map'), {
             zoom: 12,
             center: {lat: 45.15492713361847, lng: 15.40557861328125}
         });

         var polygons = [{name: 'first name', coordinates:[{lat:45.15492713361847,lng:15.40557861328125},{lat:45.07933920973809,lng:15.5291748046875},{lat:45.01918507438175,lng:15.43304443359375},{lat:45.07933920973809,lng:15.3204345703125}]}];

            // foreach your polygons
            for (var i = 0; i < polygons.length; i++) {
                var item = polygons[i];

                var coors = item["coordinates"];
                var name = item["name"];

                var Polygon = new google.maps.Polygon({
                    path: coors,
                    strokeColor: '#66b3ff',
                    strokeOpacity: 0.8,
                    strokeWeight: 5,
                    editable: false,
                    fillColor: 'blue',
                    fillOpacity: 0.5,
                });
                Polygon.setMap(map);

                // call function to set window
                attachPolygonInfoWindow(Polygon, coors, name);
            }
        }

        function attachPolygonInfoWindow(polygon, coors, html)
        {

            polygon.infoWindow = new google.maps.InfoWindow({
                content: html
            });

            polygon.infoWindow.setPosition(getHighestWindowPosition(coors));

            google.maps.event.addListener(polygon, 'mouseover', function () {
                polygon.infoWindow.open(map, polygon);
            });
            google.maps.event.addListener(polygon, 'mouseout', function () {
                polygon.infoWindow.close();
            });
        }

        // function to get highest position of polygon to show window nice on top 
        function getHighestWindowPosition(coors) {

            var lat = -5000, lng = 0, i = 0, n = coors.length;

            for (; i !== n; ++i) {
                if (coors[i].lat > lat) {
                    lat = coors[i].lat;
                    lng = coors[i].lng;
                }
            }
            return  {lat: lat, lng: lng};

        }

</script> 
```

# javascript - 如果语句不适用于 CSS 值

> ID：13017916
> 
> 赞同：-2
> 
> 时间：2012-10-22T18:57:42.560
> 
> 标签：javascript, jquery, css

我的代码在这里不起作用......关于将什么作为 if 语句的条件放入的任何其他想法？非常感谢任何帮助。谢谢！

HTML：

```
<img class="image image1" src="images/spongebob1.jpg" /> 
```

CSS：

```
.image {
height: 94%;
margin: 0 auto;
position: absolute;
animation: moveSlider 5s 1;
-webkit-animation: moveSlider 5s 1;
}
@keyframes moveSlider {
from {left:0px;}
to {left:200px;}
}
@-webkit-keyframes moveSlider {
from {opacity:0;}
to {opacity:1;}
} 
```

JS：

```
$(document).ready(function() {
    $(".image2, .image3, .image4, .image5").hide();
    if ($(".image1").css('opacity') === '1') {
        $(".image1").hide();
    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:00:59.910

问题似乎是您使用 1 作为字符串。=== 不会将字符串转换为整数

```
if ($(".image1").css('opacity') === '1') {
    $(".image1").hide();
} 
```

尝试 === 1 而不是 '1'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:01:44.643

Try changing line 3 of your JS to this:

```
if ($('.image1').is(':visible')) { 
```

Also, try to be consistent with how you use your " vs ' --you're mixing them in the original line. This is mostly just to make your life easier.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:29:17.003

```
$(document).ready(function() {
    $(".image2, .image3, .image4, .image5").hide();
    if ($(".image1").css({'opacity':'1'}) === true) {
        $(".image1").hide();
    } 
}); 
```

# android - android:screenOrientation="sensorPortrait" 无效？

> ID：13017922
> 
> 赞同：9
> 
> 时间：2012-10-22T18:58:15.077
> 
> 标签：android, eclipse, android-orientation

我需要将我的应用程序限制为以纵向模式显示。

使用**android:screenOrientation=“Portrait”**效果很好，但我希望在设备旋转时将显示更改为反向纵向。

使用**android:screenOrientation="sensorPortrait"**会导致编译错误。有趣的是，如果我改用“sensorLandscape”，它编译得很好，但这不是我需要的。

我正在使用带有 Android 2.3.3 的 Eclipse v 3.7.2

有任何想法吗？？？

谢谢罗伯

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T19:48:39.183

谷歌打错了，使用**sensorPortait**

# php - 跟踪每个人的每月通话次数 - MySQL 还是 XML？

> ID：13017925
> 
> 赞同：0
> 
> 时间：2012-10-22T18:58:32.110
> 
> 标签：php, mysql, xml

我正在尝试确定为大约 43 名人员存储每月通话记录的最佳方式。客户希望能够以几种不同的方式查看数据 - 谁拥有最多/最少的调用 YTD、前 10 名的图表、与上一年相比的变化等。

我考虑尝试使用每个人的姓名和每月的通话记录每年不断更新一个 XML 文件，但这会使提取不同类型的数据比使用 MySQL 更具挑战性。

如果 MySQL 是有利的选择，是否最好将数据存储为每人每年一行，每年每个月各有一列？或者，每个月，添加一行带有年、月和通话记录？

建议将不胜感激。

这是包含数据的 XML 文件示例 -

```
<?xml version="1.0" encoding="UTF-8" ?>
<report>
    <ReportHeader>
        <Section SectionNumber="0">
            <Picture Name="DeptPic1" GraphicType="BolbField"></Picture>
        </Section>
    </ReportHeader>
    <Group Level="1">
        <GroupFooter>
            <Section SectionNumber="1">
                <Field Name="Field11" FieldName="{IncdPers.PERSONNAME}">
                    <FormattedValue>Captain John Doe</FormattedValue>
                    <Value>Captain John Doe</Value>
                </Field>
                <Field Name="Field12" FieldName="{IncdPers.PERSONLOOKUPID}">
                    <FormattedValue>Doe, John</FormattedValue>
                    <Value>Doe, John</Value>
                </Field>
                <Field Name="Field13" FieldName="DistinctCount ({In5basic.GUIDIDNUMBER}, {IncdPers.PERSONLOOKUPID})">
                    <FormattedValue>6</FormattedValue>
                    <Value>6</Value>
                </Field>
                <Field Name="Field14" FieldName="{@PercentInc}">
                    <FormattedValue>54.55</FormattedValue>
                    <Value>54.55</Value>
                </Field>
                <Text Name="Text14">
                    <TextValue>%</TextValue>
                </Text>
            </Section>
        </GroupFooter>
    </Group>
    <Group Level="1">
        <GroupFooter>
            <Section SectionNumber="1">
                <Field Name="Field11" FieldName="{IncdPers.PERSONNAME}">
                    <FormattedValue>Firefighter Jane Smith</FormattedValue>
                    <Value>Firefighter Jane Smith</Value>
                </Field>
                <Field Name="Field12" FieldName="{IncdPers.PERSONLOOKUPID}">
                    <FormattedValue>Smith, Jane</FormattedValue>
                    <Value>Smith, Jane</Value>
                </Field>
                <Field Name="Field13" FieldName="DistinctCount ({In5basic.GUIDIDNUMBER}, {IncdPers.PERSONLOOKUPID})">
                    <FormattedValue>1</FormattedValue>
                    <Value>1</Value>
                </Field>
                <Field Name="Field14" FieldName="{@PercentInc}">
                    <FormattedValue>9.09</FormattedValue>
                    <Value>9.09</Value>
                </Field>
                <Text Name="Text14">
                    <TextValue>%</TextValue>
                </Text>
            </Section>
        </GroupFooter>
    </Group>
</report> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:03:02.933

这正是关系数据库擅长的事情。我会将数据存储在最细粒度的级别——如果有的话，记录个人通话，如果没有，则按用户/月记录。每个月都有一列将难以查询。

如果您收到的数据不是原始呼叫数据，而是某种每月摘要，请将其存储在数据库中，以便在查询时为自己提供最大的灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:17:07.373

我会有两张桌子。第一个只是关于拨打电话的个人。第二张表是关于那个人打的电话。像这样：

```
Table 1
-------
+----------------+
| id        name |
+----------------+
  0         bob
  1         john
  2         mary

Table 2
-------
+----------------------------------------------+
| id        user_id     calls       date       |
+----------------------------------------------+
  0         0           12          2012-10-21
  1         1           15          2012-10-21
  2         2           23          2012-10-21
  3         0           16          2012-10-22
  4         1           17          2012-10-22
  5         2           28          2012-10-22 
```

如您所见，您可以使用 MySQL 来存储每日通话信息或任何您想要的时间间隔。您可以跟踪任何给定时间段内的数字（尽管上面的示例仅显示 2 天），根据这些数字生成报告，显示一段时间内的趋势等。

# python - 当没有发送数据时，Python jsonrpc 示例和我的代码在服务器端失败并出现“解析错误”

> ID：13017926
> 
> 赞同：0
> 
> 时间：2012-10-22T18:58:49.863
> 
> 标签：python, json, rpc, json-rpc

此示例退出，打印：

```
{"id": null, "error": {"message": "Parse error", "code": -32700}} 
```

从命令行运行或作为 Apache 的 CGI 可执行文件运行时。在将任何数据发送给它之前，它会收到此解析错误。有什么不对。

jsonrpc 源代码中给出的示例似乎只起作用，因为它使用 Python 提供的 HTTPserver。我需要在apache下运行。

此示例应该从命令行运行，甚至可以在 Python 提示符下输入。我不知道它有什么问题或它为什么退出。它应该设置一个服务并等待。

代码：

```
#!/usr/bin/env python
from jsonrpc import handleCGI, ServiceMethod

@ServiceMethod
def echo(msg):
    return msg

if __name__ == "__main__":
    handleCGI() 
```

# install4j - Install4j OS X - 从应用程序包中移动文件

> ID：13017930
> 
> 赞同：1
> 
> 时间：2012-10-22T18:59:01.520
> 
> 标签：install4j

我正在使用安装程序来升级现有应用程序。在旧版本的应用程序中，配置存储在 sys.contentDir 目录中的应用程序包中。在新版本的应用程序中，我们将配置移动到 ~/Library/ `AppName`/ 目录。安装程序附带一个默认配置。安装文件后`Move Action`，如果用户的文件中有一个文件，我应该接受配置，`sys.contentDir`然后移动它并覆盖`AppName`安装程序随该`Install Files`步骤安装的 ~/Library/ 目录中的文件。没有任何反应，我得到的唯一错误消息是该步骤未成功完成。我尝试强制安装程序以 root 身份运行，甚至将文件移动到 /tmp 作为测试。我已经设置`Overwrite Mode`为`Always Ask`，但它从不询问。我也尝试复制它，但没有任何效果。非常感谢我在哪里可以找到详细的错误消息或可能发生的任何见解。从我的步骤看来，访问安装目录中的配置可能存在权限错误，但我正在以自己的身份运行安装程序，并且我有权访问该文件。

复制和移动操作的日志文件输出：

```
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Before execute action                                                                                            
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property shared: false                                                                                           
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property mode: 644                                                                                               
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property overwriteMode: Always ask except for update                                                             
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property uninst allMode: If created                                                                              
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property destin ationFile: /Users/brian/Library/DesktopClient/copy.xml                                           
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property delay: false                                                                                            
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property triggerReboot: true                                                                                     
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property directoryMode: 755                                                                                      
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property sourceFile: /Applications/DesktopClient.app/Contents/Resources/app/desktop-client.xml                   
[INFO] com.install4j.runtime.beans.actions.files.CopyFileAction: Property rollbackSupported: true                                                                                 
[ERROR] com.install4j.runtime.beans.actions.files.CopyFileAction: Execute action not successful                                                                                   
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Before execute action                                                                                            
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property shared : false                                                                                          
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property mode: 644                                                                                               
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property overwriteMode: Always ask                                                                               
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property uninstallMode: Always                                                                                   
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property destinationFile: /Users/brian/Library/DesktopClient/move.xml                                            
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property delay: false                                                                                            
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property triggerReboot: true                                                                                     
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property directoryMode: 755                                                                                      
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property sourceFile: /Applications/DesktopClient.app/Contents/Resources/app/desktop-client.xml                   
[INFO] com.install4j.runtime.beans.actions.files.MoveFileAction: Property rollbackSupported: true                                                                                 
[ERROR] com.install4j.runtime.beans.actions.files.MoveFileAction: Execute action not successful 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:34:48.980

当前版本的 install4j (5.1.3) 将打印一条诊断消息，说明操作失败的原因。在 4.2.8 中，不会将诊断信息写入日志文件。

# rest - 为 REST API 更新禁用 JIRA 通知电子邮件

> ID：13017931
> 
> 赞同：5
> 
> 时间：2012-10-22T18:59:03.640
> 
> 标签：rest, email, jira, jira-rest-api

我需要使用 JIRA REST API 执行相对频繁的批量更新/导入。

这极大地提高了生产力，但也导致了大量的垃圾邮件。

有什么方法可以禁用通过 API 发送的电子邮件通知或通过 API 全局启用/禁用通知？

我正在使用 Atlassian OnDemand（5.2 版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:27:06.270

**更新 - 2017 年 1 月 12 日**

可以使用`PUT /rest/api/2/issue/{issueIdOrKey}`API [[规格](https://docs.atlassian.com/jira/REST/cloud/#api/2/issue-editIssue)] 来完成。

[在 JIRA 服务器 7.2 中添加](https://jira.atlassian.com/browse/JRA-34423)

**原帖 - 2012 年 10 月 23 日**

据我所知，没有任何方法可以使用 REST API，也没有内置方法可以停止基于 REST 的更新的电子邮件通知（您可以为特定的操作集设置通知）。您可以使用 SOAP API 更改权限（查看[RemotePermissionScheme](http://docs.atlassian.com/rpc-jira-plugin/latest/com/atlassian/jira/rpc/soap/beans/RemotePermissionScheme.html)和[RemotePermissionMapping](http://docs.atlassian.com/rpc-jira-plugin/latest/com/atlassian/jira/rpc/soap/beans/RemotePermissionMapping.html)）。

如果这不是您正在寻找的解决方案，则可能有某种解决方法。你在更新什么？哪些领域？

例如，一种可能的解决方案是将 Jira 的通知替换为您自己的通知。

# javascript - 为什么我的 JS 对象最终具有“未定义”值？

> ID：13017940
> 
> 赞同：1
> 
> 时间：2012-10-22T18:59:30.207
> 
> 标签：javascript

```
var testRuleInput = {
    "ruleName" : "renderDataVerificationFields",
    "dependencies" : [
        {
            "fieldName" : "mailingStreetAddress",
            "resource" : "verificationResults",
            "attribute" : "verifyStreetAddress"
        }
    ]
}; 
```

但是，当我后来打电话时`console.log(testRuleInput.dependencies.attribute)`；我明白了`undefined`。使困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:00:48.867

`dependencies`是一个对象数组。

更新您的代码：

```
console.log(testRuleInput.dependencies[0].attribute) 
```

或者删除数组语法：

```
"dependencies": {
    "fieldName": "mailingStreetAddress",
    "resource": "verificationResults",
    "attribute": "verifyStreetAddress"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:00:51.837

这是因为`dependencies`是一个数组。我想你正在寻找`testRuleInput.dependencies[0].attribute`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:01:10.800

您正在使用数组。

```
testRuleInput.dependencies[0].attribute 
```

如果您只想要 1 个依赖项或像上面那样正确索引它，请删除方括号。

```
var testRuleInput = {
                        "ruleName" : "renderDataVerificationFields",
                        "dependencies" : {
                            "fieldName" : "mailingStreetAddress",
                            "resource" : "verificationResults",
                            "attribute" : "verifyStreetAddress"
                        }
                   }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:01:25.547

`testRuleInput.dependencies`是一个数组。如果你使用`testRuleInput.dependencies[0].attribute`你会得到你所期望的。

# magento - Magento 从订单电子邮件中删除 SKU

> ID：13017942
> 
> 赞同：2
> 
> 时间：2012-10-22T18:59:41.127
> 
> 标签：magento

在我的新订单电子邮件中，我有产品的 SKU，但我想从订单电子邮件中删除它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T19:40:26.907

这实际上是一个很好的问题。感谢您询问帕特里克。

由于带有订单项的块已插入到模板中，因此无法从管理界面执行此操作。如果您查看一下，`app/locale/en_US/template/email/sales/order_new.html`您将看到以下代码，在渲染期间将替换为有序项目块：

```
{{layout handle="sales_email_order_items" order=$order}} 
```

如您所见，块的句柄是`sales_email_order_items`，它的声明可以在`app/design/frontend/base/default/layout/sales.xml`. 这里是：

```
<sales_email_order_items>
    <block type="sales/order_email_items" name="items" template="email/order/items.phtml">
        <action method="addItemRender"><type>default</type><block>sales/order_email_items_order_default</block><template>email/order/items/order/default.phtml</template></action>
        <action method="addItemRender"><type>grouped</type><block>sales/order_email_items_order_grouped</block><template>email/order/items/order/default.phtml</template></action>
        <block type="sales/order_totals" name="order_totals" template="sales/order/totals.phtml">
            <action method="setLabelProperties"><value>colspan="3" align="right" style="padding:3px 9px"</value></action>
            <action method="setValueProperties"><value>align="right" style="padding:3px 9px"</value></action>
            <block type="tax/sales_order_tax" name="tax" template="tax/order/tax.phtml">
                <action method="setIsPlaneMode"><value>1</value></action>
            </block>
        </block>
    </block>
    <block type="core/text_list" name="additional.product.info" />
</sales_email_order_items> 
```

在这里，您将看到提到的两个模板`/design/frontend/base/default/template/sales/order/items.phtml`和`app/design/frontend/base/default/template/sales/order/items/renderer/default.phtml`. 将它们复制到您的主题中并进行修改。

第一个保留带有项目的表格标题。您将不得不删除第 37 行：

```
<th><?php echo $this->__('SKU') ?></th> 
```

第二个渲染表格主体的行。在那里你必须删除第 64 行：

```
<td><?php echo $this->htmlEscape(Mage::helper('core/string')->splitInjection($this->getSku())) ?></td> 
```

您不需要将布局 xml 复制到您的主题。就这两个模板文件。

不幸的是，它还会从客户帐户的订单视图中删除 SKU 列，因为这些模板也在那里使用。因此，如果您只想从电子邮件中删除 SKU 列，则必须在`local.xml`主题文件中创建一个新句柄，该句柄与`sales.xml`. 然后，您必须在 Magento 管理员处创建您的电子邮件模板的自定义副本，并将您的新句柄放入`{{layout}}`短代码中。当然，这两个模板也需要使用不同的名称进行复制。

# sql - 如何将 GROUP BY 分成不同的列

> ID：13017943
> 
> 赞同：-1
> 
> 时间：2012-10-22T18:59:52.783
> 
> 标签：sql, postgresql, pivot

我有 3 张桌子：

*   第一个包含有关人员的信息。相关列是`personID`.
*   第二个包含一个人可以做的练习。例如，有 3 个带有`exID`.
*   第三个包含一个人 ( `personID`) 在练习 ( ) 中达到的分数`exID`。所以这里的每一行代表一个人参加的考试。但并不是每个人都需要参加每场考试。

我想要的是列`personID`, `exam_one`, `exam_two`, `exam_three`, ... 的结果（正在进行中，取决于有多少考试）。结果的每一行都应包含`personID`相应考试的分数。

对于未参加的考试，应该有 NULL 或其他内容。

餐桌人的例子：

```
personID | Name  | ...
-------------------
 1       | Max   |
 2       | Peter | 
```

练习表示例：

```
exID | exName | maxPoints | ...
-------------------------------
 1   | exam1  | 20
 2   | exam2  | 25
 3   | exam3  | 20 
```

积分表示例：

```
personID (fkey) | exID (fkey) | points
----------------------------------------
     1          |    1        |  12.5
     1          |    3        |  10
     2          |    1        |   5
     2          |    2        |   8.5
     2          |    3        |  10 
```

希望的结果：

```
personId | exam1 | exam2 | exam3
------------------------------------
   1     | 12.5  | NULL  | 10
   2     |  5    |  8.5  | 10 
```

有没有办法做到这一点？我使用**PostgreSQL**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:38:13.583

您可以使用以下内容：

```
select p.personId,
  sum(case when e.exname = 'exam1' then t.points end) Exam1,
  sum(case when e.exname = 'exam2' then t.points end) Exam2,
  sum(case when e.exname = 'exam3' then t.points end) Exam3
from persons p
left join points t
  on p.personID = t.personID
left join exercises e
  on t.exid = e.exid
group by p.personid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!1/0d050/5)

# c# - LINQ 数据行字符串到数组，然后到字符串列表

> ID：13017945
> 
> 赞同：2
> 
> 时间：2012-10-22T18:59:59.473
> 
> 标签：c#, linq

我有一些代码将遍历`DataRow`s 并将 中的管道分隔列拆分`DataRow`为一个数组，然后拆分为`List<string>`.

有没有更好的方法来使用 LINQ 做到这一点？我试过了，但一无所获！

```
List<string> allSizes = new List<string>();

foreach (DataRow resultRow in results.Rows)
{
    if (resultRow["Sizes"] != DBNull.Value)
    {
        string[] sizes = resultRow["Sizes"].ToString().Split('|');
        foreach (string size in sizes)
        {
            if (!allSizes.Contains(size))
            {
                allSizes.Add(size);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T19:05:36.230

```
var allSizes = results.Rows.Cast<DataRow>()
    .Where(row => row["Sizes"] != DBNull.Value)
    .SelectMany(row => row["Sizes"].ToString().Split('|'))
    .Distinct()
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:08:17.293

这是 LINQ 版本，但我个人觉得它不太干净：

```
var allSizes = new List<string>();

foreach (
    string size in 
    from DataRow resultRow in results.Rows 
    where resultRow["Sizes"] != DBNull.Value 
    select resultRow["Sizes"].ToString().Split('|') into sizes 
    from size in sizes where !allSizes.Contains(size) 
    select size) {
    allSizes.Add(size);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:14:24.120

像这样的东西。

```
var linqSizes =
    from row in results.Rows
    where row["Sizes"] != DBNull.Value
    let sizes = row["Sizes"].ToString().Split('|')
    from size in sizes
    group size by size into g
    select g.Key; 
```

该变量`linqSizes`将包含与您的变量相同的元素`allSizes`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:14:37.967

强类型 DataRow 和 LINQ：

```
dt.Rows.OfType<DataRow>().Where(r => r["Sizes"] != DBNull.Value)
      .SelectMany(r=>r.Field<string>("Sizes").Split('|')
      .Distinct().ToList(); 
```

# c++ - 类成员的 C++ 内存泄漏

> ID：13017946
> 
> 赞同：1
> 
> 时间：2012-10-22T19:00:01.690
> 
> 标签：c++, memory, memory-management, memory-leaks, constructor

VS2010 中的 Debug_VLD 揭示了一些来自类成员创建/初始化/删除的内存泄漏。

`my_member`是 double* 类型的数据成员。在构造函数中，我有

```
my_member = NULL ; 
```

然后在某种方法中，我需要为`my_member`. 我不能在构造函数中这样做，因为我还不知道数组的大小，和/或方法的不同调用的大小可能不同。我在这种方法中所做的是检查成员是否为 NULL。如果是，我为它分配空间，如果不是，我可以对数组进行操作（使用访问器 [] 更改其元素的值）。看起来像

```
void MyClass::my_method()
{
    if( my_member == NULL )
        my_member = new double[n_dim] ;

    for(int k = 0 ; k < n_dim ; k++ )
         my_member[k] = k ;
} 
```

并且内存泄漏发生在 line `my_member = new double[n_dim] ;`。

在析构函数中，我有

```
delete[] my_member ; 
```

怎么了？如何正确分配？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:21:37.357

使用`std::vector<double>`是首选方式，但如果你想拥有原始`double*`和编写复制构造函数、移动构造函数和`operator=`“手动”，你应该这样做：

```
#include <assert.h>  // for assert

#include <algorithm> // for std::swap

class MyClass
{
  //
  // Raw array
  //
  double * m_ptr; // raw pointer
  size_t m_dim;   // number of items in the array

public:

  // Default constructor - creates empty vector
  MyClass()
    : m_ptr(nullptr)
    , m_dim(0)
  {
  }

  // Copy constructor
  MyClass(const MyClass& src)
    : m_ptr(nullptr)
    , m_dim(0)
  {
    // Special case of empty source
    if (src.m_dim == 0)
    {
      assert(src.m_ptr == nullptr);
      return;
    }

    // Allocate and deep-copy from source
    m_ptr = new double[src.m_dim];
    m_dim = src.m_dim;
    for (size_t i = 0; i < m_dim; i++)
      m_ptr[i] = src.m_ptr[i];
  }

  // Move constructor: steal the "guts" from src
  MyClass(MyClass&& src)
  {
    m_ptr = src.m_ptr;
    src.m_ptr = nullptr;

    m_dim = src.m_dim;
    src.m_dim = 0;
  }

  // Destructor
  ~MyClass()
  {
    delete [] m_ptr;
  }

  // Unified operator=
  MyClass& operator=(MyClass src)
  {
    std::swap(m_ptr, src.m_ptr);
    std::swap(m_dim, src.m_dim);
    return *this;
  }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:01:44.760

如果代码中有任何其他地方您`my_member`在`NULL`没有调用的情况下设置`delete[]`，那么是的。如果你不遵守三法则（正确实现的复制构造函数和赋值运算符），你会遇到各种各样的麻烦。

为防止这种情况，请改用 a `std::vector<double>`，您可以在其中执行以下操作：

```
void MyClass::my_method()
{
    my_member.resize(n_dim); // yay, learned something new here 
    for(int k = 0 ; k < n_dim ; k++ )
         my_member[k] = k ;
} 
```

这样，您就不会管理内存，因此不需要析构函数（除非它是`virtual`，在这种情况下它可以为空）。

# c# - DirectoryInfo 枚举

> ID：13017951
> 
> 赞同：3
> 
> 时间：2012-10-22T19:00:32.297
> 
> 标签：c#, enumeration, directoryinfo

在学习 C# 基础知识时，我了解到 foreach 适用于那些已实现`IEnumerable`接口的集合。到目前为止一切顺利，但今天当我遇到时，`DirectoryInfo`我感到困惑。

如果`DirectoryInfo`不实施`IEnumerable`，那么它是如何`foreach`工作的？

```
DirectoryInfo[] dirListing = new DirectoryInfo(@"F:\eBook").GetDirectories();

foreach (DirectoryInfo dir in dirListing)
{
    Console.WriteLine(dir.Name);
} 
```

请告诉我.......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T19:02:51.500

您正在使用*数组*。

*所有数组都*派生自[`Array`](http://msdn.microsoft.com/en-us/library/system.array.aspx)实现.*`IEnumerable`*

 *来自MSDN 上的[数组（C# 编程指南） ：](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx#)

> 数组类型是从抽象基类型派生的引用类型`Array`。由于此类型实现`IEnumerable`and `IEnumerable<T>`，因此您可以在 C# 中的所有数组上使用 foreach 迭代。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T19:11:00.317

[DirectoryInfo.GetDirectories()方法返回一个](http://msdn.microsoft.com/en-us/library/s7xk2b58.aspx)[DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)对象数组。由于所有数组都“实现”IEnumerable，因此您可以遍历它们。

然而，需要注意的一点是，由于[DirectoryInfo.GetDirectories()](http://msdn.microsoft.com/en-us/library/s7xk2b58.aspx)确实返回了一个数组，因此它必须在被调用时立即获取整个列表。虽然这适用于小型目录，但不适用于大型目录或将[DirectoryInfo.GetDirectories(string, SearchOption)](http://msdn.microsoft.com/en-us/library/ms143325.aspx)与 SearchOption.AllDirectories 一起使用的情况。如果您使用的是 .NET4+，您可以并且应该使用[DirectoryInfo.EnumerateDirectories()](http://msdn.microsoft.com/en-us/library/dd413235.aspx)或其重载之一。这些具有相同的结果，但直到需要时才创建列表。*

# weblogic - 使用不同机器上的管理服务器和托管服务器创建 Weblogic 域

> ID：13017953
> 
> 赞同：1
> 
> 时间：2012-10-22T19:00:41.017
> 
> 标签：weblogic, weblogic11g

我正在尝试在不同机器上创建管理服务器和托管服务器的 Weblogic 域。但是，我找不到任何可以让我这样做的步骤。config.sh 脚本始终创建一个管理服务器。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:18:39.903

至少可以使用“图形模式”config.sh 向导在创建域时创建托管服务器/集群

如果由于某种原因在调用 config.sh 时您没有获得图形向导，请尝试检查您的 DISPLAY 变量。

另请查看[Oracle 文档](http://docs.oracle.com/cd/E13196_01/platform/docs81/confgwiz/newdom.html#1058958)以供参考。

# c# - 在 web 方法上使用返回值时尝试 .Include 导航属性

> ID：13017964
> 
> 赞同：0
> 
> 时间：2012-10-22T19:00:58.787
> 
> 标签：c#, entity-framework, webmethod

所以我试图让一个 web 方法返回一个在 EF 中具有一对多关系的对象。我期望 XML 为许多关系中的每个项目构建子节点，但似乎唯一填充的关系是那些正在备份的关系，而不是那些正在下降的关系。这是我的代码。

```
[WebMethod]
public Question GetCurrentQuestion(int TeamID)
{
    var db = new DSG_pepsicenter_stagingEntities();
    return db.Questions.Include("QuestionAnswers").First(n => n.TeamID == TeamID);
} 
```

基本上我的问题表属于一个团队，并且有很多问题答案。但是，问题答案不存在于 web 方法中发生的序列化中。有没有办法强制这样做？我知道如果我强迫它，我会冒循环引用出错的风险，但这比构建 DTO 更可取。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:07:38.137

我不太清楚你的要求，但我认为你想在许多语句的另一端填充反向引用，即特定答案的问题是什么。

这可以通过使用点符号的包含语法来完成，即：

```
.Include("QuestionAnswers.Question") 
```

# c# - 使用 Moq 模拟 C# 计时器

> ID：13017966
> 
> 赞同：8
> 
> 时间：2012-10-22T19:01:03.903
> 
> 标签：c#, unit-testing, moq

我正在尝试创建一个注入了依赖项的 WPF MVVM 视图模型`System.Timing.Timer`，并希望使用 Moq 测试该视图模型。

`Timer`我围绕具有 interface的类编写了一个薄包装器`ITimer`，但不确定真正测试计时器对类的贡献的最佳方法。有没有一种“强制”模拟已过事件的好方法？其他人有更好的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:06:31.453

您应该单独测试您的[代码](http://c2.com/cgi/wiki?UnitTestIsolation)。否则，您不知道您的代码是否按预期运行，或者外部依赖是否存在一些副作用。因此，为外部资源（配置文件、计时器等）创建可模拟的包装器是将 SUT 与外部代码分开的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-13T16:37:58.397

您可以使用类似框架`Moq`来触发事件。你也可以`FakeTimer`像这样创建：

```
public class FakeTimer : IMyTimer
{
    private event ElapsedEventHandler elaspedHandler;
    private bool _enabled;

    public void Dispose() => throw new NotImplementedException();

    public FakeTimer(ElapsedEventHandler elapsedHandlerWhenTimeFinished, bool startImmediately)
    {
        this.elaspedHandler = elapsedHandlerWhenTimeFinished;
        _enabled = startImmediately;
    }

    public void Start() => _enabled = true;
    public void Stop() => _enabled = false;
    public void Reset() => _enabled = true;

    internal void TimeElapsed()
    {
        if (this._enabled)
            elaspedHandler.Invoke(this, new EventArgs() as ElapsedEventArgs);
    }
} 
```

您将在`TimeElapsed()`单元测试中调用什么来指示时间已经过去。

然后它将调用与其关联的事件。

在下面的这个例子中，`MyCallBackMethod`将被调用`fakeTimer.TimeElapsed()`
`var fakeTimer = new FakeTimer(350, MyCallBackMethod, false)`

# c++ - 枚举的起始值 0 和 0x0000 之间有区别吗？

> ID：13017972
> 
> 赞同：2
> 
> 时间：2012-10-22T19:01:13.380
> 
> 标签：c++, enums

这会改变枚举中值的存储或递增方式吗？如果它们相同，为什么人们将其定义为0x000？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T19:03:11.670

没有区别，它只是一个可读性的东西。例如，它表明枚举值用于某种二进制上下文中，例如位标志。

```
enum Flags {
    FLAG_NONE   = 0x0000,
    FLAG_READ   = 0x0001,
    FLAG_WRITE  = 0x0002,
    FLAG_APPEND = 0x0004,
    FLAG_TEXT   = 0x0008,
    FLAG_MEMMAP = 0x0010
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:04:20.763

没有。
0x0000 （添加任意数量的 0）只是十六进制的 0。
有时枚举中的所有数字都是十六进制的。由于所有的十六进制数你只需要定义第一个十六进制数，因为它看起来更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:28:14.340

这些特定值没有区别，它们完全相同。

但对于其他值，请记住，前置`0`使其成为八进制常数。这意味着您要避免使用`000`, `001`, `002`, `010`,等值`044`（以保持常量的长度相等）。

# php - 将 html 实体转换为 utf-8 并将它们插入到 mysql 数据库中

> ID：13017975
> 
> 赞同：1
> 
> 时间：2012-10-22T19:01:17.523
> 
> 标签：php, mysqli

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:14:05.837

正如您在脚本中看到的，您正在指示浏览器使用 UTF8。这是第一步。

但是，您的数据库需要相同的东西，并且表上的编码/排序规则也需要是 UTF8。

您可以使用排序规则`utf8_general_ci`或`utf8_unicode_ci`作为排序规则重新创建表，也可以转换现有表（请参见[此处](http://www.niden.net/2011/12/change-encoding-of-mysql-database-to.html)）

您还需要确保您的数据库连接（即到 mysql 的 php 代码）使用的是 UTF8。如果您正在使用 PDO，那么有很多文章展示了如何做到这一点。最简单的方法是：

```
$mysqli->query('SET NAMES utf8'); 
```

**注意**您现在所做的更改是最终的。如果更改数据库的连接编码，可能会影响现有数据。

*编辑*您可以执行以下操作来设置连接

```
$mysqli = new mysqli($host, $user, $pass, $db);

if (!$mysqli->set_charset("utf8")) {
   die("Error loading character set utf8: %s\n", $mysqli->error);
}

$mysqli->close(); 
```

感兴趣的链接：

[是否使用“SET NAMES”](https://stackoverflow.com/questions/1650591/whether-to-use-set-names)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:17:26.763

`SET NAMES 'utf8'`在任何其他查询之前执行查询。

# java - Changing letters of individual words within a string

> ID：13017977
> 
> 赞同：1
> 
> 时间：2012-10-22T19:01:25.343
> 
> 标签：java, string, split, char

I have to design a program that converts English into Pig Latin. I am having difficulty in converting all words contained within the input provided by the user to Pig Latin. With my current code, I achieve an output of:

> Input: This is not working
> Output: histay is not workingay

While my desired output is:

> Input: This is not working.
> Output: Histay ishay otnay orkingway

What am I doing wrong? I'm just looking for a push in the right direction.

```
public class piglatin {

    // A program designed to convert English words in to Pig Latin
  public static void main(String[] args) {

    char a, e, i, o, u, A, E, I, O, U, b;   
    String alphabet = "aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ";

    Scanner word = new Scanner (System.in);         
    System.out.println("Please enter a word: ");                
    String incoming = word.nextLine();              
    System.out.println("Input: " + incoming);

    String newincoming = incoming.substring(1); 
    String newerincoming = incoming.substring(0,1);

    a = alphabet.charAt(0);
    e = alphabet.charAt(8);
    i = alphabet.charAt(16);
    o = alphabet.charAt(28);
    u = alphabet.charAt(40);
    A = alphabet.charAt(1);
    E = alphabet.charAt(9);
    I = alphabet.charAt(17);
    O = alphabet.charAt(29);
    U = alphabet.charAt(41);
    b = incoming.charAt(0);         

    if ((b == a) || (b == e) || (b == i) || (b == o) || (b == u) || (b == A) || (b == E) || (b == I) || (b == O) || (b == U)) {             
      System.out.println("Output: " + incoming + "hay");
    } else {  
      System.out.println("Output: " + newincoming + newerincoming + "ay");
    }
  }     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:09:59.223

**输入：**这不工作
**输出：**他不工作Tay

您正在阅读整行文本并将“pig latin”规则应用于整个句子。这将删除句子的第一个字母并将其放在最后一个单词的末尾。

为了使其工作，您需要[`split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)在空格周围输入字符串并将猪拉丁规则应用于循环中的每个单词。我建议创建一个将字符串作为输入并进行猪拉丁语转换的方法。这样，您只需要对该方法返回的数组中的每个单词调用该`split`方法。

# php - 使用 Jquery/php 从 HTML 打印到收据打印机

> ID：13017989
> 
> 赞同：0
> 
> 时间：2012-10-22T19:02:01.280
> 
> 标签：php, jquery

我有一个地址收集的小工具。我想通过我的热敏打印机打印一个特定的地址。数据库是 MySQL ..我做了一个 AJAX 查询来列出我想要根据特定要求搜索的所有地址（对于前手机号码）。编码在 PhP 和 JQuery 中。我把它们列成一张桌子。现在我想在所有单独的地址行旁边添加一个打印按钮，单击该按钮，我想在我的收据打印机中打印该特定地址。

就是两行印刷。如果我只是将地址复制到一个新的 HTML 页面并打印它，问题是打印机不会在 2 行之后停止..它会打印下面的整个空白区域。

抱歉，以前从未做过或使用过打印机。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:28:01.690

一个快速的解决方法是使用最小尺寸的弹出窗口（或者可能是 iFrame），但这对于用户体验来说当然会很俗气，特别是如果这个解决方案是您提供给企业的产品/服务的一部分顾客。

WIN32 API：正确的方法需要你做一些额外的工作，但值得花时间和精力，特别是如果你经常承担这些类型的项目。不幸的是，这比编写几行代码并为您发布答案要复杂得多。

步骤 1) 下载该打印机的驱动程序和文档包。正是出于这个原因，他们通常拥有大量的开发人员文档。跳到 Win32 API 部分。我在这里为您的打印机找到了一个软件包： [https ://download.epson-biz.com/modules/pos/index.php?page=single_soft&cid=2783&scat=31&pcat=3](https://download.epson-biz.com/modules/pos/index.php?page=single_soft&cid=2783&scat=31&pcat=3)

步骤 2) 查看 PHP Win32 API 实现并设置几个测试调用。这是文档的链接：http: [//php.net/manual/en/ref.w32api.php](http://php.net/manual/en/ref.w32api.php)

步骤 3) 设置一个类/模块/函数，它将根据需要从 PHP 中查找和打印您的地址。

第 4 步）要在您最终切换到服务器/客户端设置时解决打印问题，您可以将 PHP 代码编译为可执行文件，在每个客户端上设置 mime 类型，该类型通过浏览器接收地址打印文件并将其直接发送到您的 . exe文件。

很久以前，我不得不将 ELTRON 编码的磁条（信用卡）打印机与 Perl 集成到一个大型事件管理系统中。它像魔术一样工作。

再次抱歉，这不像几行代码那么简单，但是您可以在通过打印机 API 工作时发布更具体的问题。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:13:11.883

为此，您所能做的就是创建一个 iframe，其中包含您想要打印的内容，然后打印它。打印机处理该 html 的方式因打印机而异，您的代码无法控制。

# asp.net-mvc-3 - MVC 3 控制器 GroupBy 查看错误

> ID：13017991
> 
> 赞同：1
> 
> 时间：2012-10-22T19:02:11.953
> 
> 标签：asp.net-mvc-3, linq

我从控制器创建一个 MVC 3 视图。我的模型“MyList”，包含大量记录。当我使用以下 linq 语句创建模型时：

```
var model = _db.MyList.GroupBy(r => r.myKey); 
```

我收到错误消息：“传递到字典中的模型项的类型为 'System.Collections.GenericlList' 1 ......但该字典需要一个类型为 'System.Collections.Generic.IEnumerable' 的模型项......

在视图中，我在第一行中有以下代码：

```
@model IEnumerable<MyApp.Models.MyList> 
```

我试着回来

```
return View(model.ToList()); 
```

从控制器，但没有喜悦。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:05:52.423

`model.ToList()`将返回MyList`List<T>`所在的`T`位置。您的模型类型是直的`MyList`。如果`var`您上面的声明已经返回`MyList`，那就做吧`return View(model)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:37:40.723

这个人整个上午都在缠着我。我在以下帖子中找到了我的问题的答案：

[Linq Distinct() 按名称填充带有名称和值的下拉列表](https://stackoverflow.com/questions/912188/linq-distinct-by-name-for-populate-a-dropdown-list-with-name-and-value)

我基本上返回以下内容：

```
public static IEnumberable<MyModel> FindTheKeys(this IQueryable<MyModel> myList)
{
    return myList.OrderBy(r => r.AreaKey);
} 
```

然后按照上述帖子中的说明执行选择。

```
var model = _db.MyModel.FindTheKeys().GroupBy(r => r.AreaKey).Select(g => g.First()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T20:20:23.180

GroupBy 返回一个集合`IGrouping<TKey, TSource>`，而不是`MyList`（这很奇怪，你不会有一个列表的列表。

`GroupBy`无论如何，将 a 转换为列表甚至没有多大意义。你是真的意思`OrderBy`吗？

# python - 在 Python 中，zlib 是否像 cPickle 一样用 C 实现？

> ID：13017994
> 
> 赞同：0
> 
> 时间：2012-10-22T19:02:28.150
> 
> 标签：python, optimization, zlib, pickle

您可能知道，“cPickle 可以比 pickle 快 1000 倍，因为前者是用 C 实现的”。zlib 是否也在 C 中实现？实际上，我正在尝试减少程序在使用 zlib 压缩字符串时所花费的时间，并且仍然想知道是否应该将其移植到 C++ 以提高其性能。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:05:03.353

zlib 是用 C 实现的。

为了提高压缩/解压缩的性能，您可以考虑调整缓冲区的大小，尽管文档认为每次调用解压缩的性能增益应该是最小的。[http://docs.python.org/library/zlib.html#zlib.decompress](http://docs.python.org/library/zlib.html#zlib.decompress)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T19:10:31.947

是的，该`zlib`模块也是用C实现的。实际的压缩和解压是通过调用[外部`zlib`库](http://zlib.net/)来实现的。有关详细信息，请参阅[文档](http://docs.python.org/library/zlib.html)。