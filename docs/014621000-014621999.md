# StackOverflow 问答 14621000-14621999

# java - 在 java 中找不到适合 jdbc 的驱动程序

> ID：14621003
> 
> 赞同：2
> 
> 时间：2013-01-31T08:00:31.600
> 
> 标签：java, sql-server, jdbc, connection

我是 sql server 的新手，想在 java 和 sql server 之间建立连接。我的连接代码是：

```
 public static void main(String[] args) {

    Connection con;
       try {

       String connectionUrl = "jdbc:sqlserver://HELLO-PC:1433; databaseName=Attendance Teachers;";

        con = DriverManager.getConnection(connectionUrl, "", "");
        System.out.println("connected");
        java.sql.Statement st = con.createStatement();    
      }
        catch (SQLException ex) {

        Logger.getLogger(AttendanceTeachers.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

我的服务器名称是“HELLO-PC”，我还添加了 sqljdbc.jar。我看到错误：

```
Feb 01, 2013 11:24:46 AM attendance.teachers.AttendanceTeachers main
SEVERE: null
java.sql.SQLException: No suitable driver found for jdbc:sqlserver://HELLO-PC:1433;   databaseName=Attendance Teachers;
at java.sql.DriverManager.getConnection(DriverManager.java:604)
at java.sql.DriverManager.getConnection(DriverManager.java:221)
at attendance.teachers.AttendanceTeachers.main(AttendanceTeachers.java:30) 
```

我真的需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:04:24.043

您的问题不在代码中，而是在您执行程序时，包含 sqlserver 的 JDBC 驱动程序类的 jar 文件不在类路径中。

访问相应的 sqlserver 网站 (google) 并下载 JDBC 驱动程序 jar，如果在 IDE 中执行，则将其放在构建路径中；如果从命令行执行，则将其放在与程序 jar 相同的目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:14:32.300

首先，您需要这样做：

```
private final String dbDriver = "com.microsoft.sqlserver.jdbc.SQLServerDriver";

try {
    Class.forName(dbDriver).newInstance(); // use java reflection to load the database driver
} catch (Exception ex) {
    System.out.println("failure");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:00:27.693

如果您使用的是 JDBC 4.0，则在使用旧版本的 JDBC 驱动程序时通常会出现此问题

当您从 Microsoft 网站下载 SQlserver JDBC 驱动程序时，您将获得两个 jar 文件：sqljdbc4.jar 和 sqljdbc.jar。

1.sqljdbc.jar：提供对JDBC 3.0规范的支持

2.sqljdbc4.jar：提供对JDBC 4.0规范的支持

所以.检查 sqljdbc4.jar

# php - 在codeigniter中生成多个复选框？

> ID：14621004
> 
> 赞同：0
> 
> 时间：2013-01-31T08:00:35.047
> 
> 标签：php, codeigniter, multipleselection

我正在尝试在 codeigniter 中生成一个多个 chechkbox，这将允许将电子邮件发送到从复选框中选择的电子邮件。

form_multiselect 没有帮助我......

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:30:21.753

这是一些示例代码......不要在生产中使用，只有解释如何进行数据/验证/查看

**控制器**

```
 function test() 
  {
 $this->load->helper(array('form', 'url'));
 $this->load->library('form_validation');

 $this->form_validation->set_rules('emailRecipient[]', 'User Mail', 'required');

  if ($this->form_validation->run() == FALSE)
        {
      $data['PreEmailRecipient'] = array(
                'mail 1' => 'mail1@gmail.com',
                'mail 2' => 'mail2@gmail.com',
                'mail 3' => 'mail3@gmail.com',
                'mail 4' => 'mail4@gmail.com',
                'mail 5' => 'mail5@gmail.com',
                'mail 6' => 'mail6@gmail.com',
                'mail 7' => 'mail7@gmail.com',
                'mail 8' => 'mail8@gmail.com',
                'mail 9' => 'mail9@gmail.com'
                );
            $this->load->view('test',$data);
        }
        else
        {
      foreach ($this->input->post('emailRecipient') as $key => $value)
      {
        echo $value.'<br />';
        //your code....   
      }      
        }
    } 
```

**看法**

```
<?php echo validation_errors(); ?>
   <?php echo form_open('welcome/test');?>
      <?php foreach($PreEmailRecipient as $key => $value) : ?>
        <input type="checkbox" name="emailRecipient[]" value="<?php echo $value;?>">&nbsp;<?php echo $key;?><br />
      <?php endforeach;?>  
        <input type="submit" value="Submit" />
    </form> 
```

# iphone - 如何从横向视图（iPad）显示纵向视图？

> ID：14621005
> 
> 赞同：2
> 
> 时间：2013-01-31T08:00:40.150
> 
> 标签：iphone, ipad, landscape-portrait

我正在为 iPhone 编写应用程序。它工作正常，但在 iPad 中无法正确缩放。我有横向视图，并且以编程方式进行。然后我正在推动。然后它显示了这一点：

![在此处输入图像描述](../Images/6ed4ddd4667ba1a029eafdde91ac386e.png)

我希望它旋转和全屏。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:15:28.487

您可以在 ios6 或 ios5 中检查和实现 Orientation，如下面的代码和信息 Put Method in Each Class：

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{

    return UIInterfaceOrientationMaskAll;
} 
```

**并每次检查`ViewWillApear`设备方向，例如：-**

```
- (void)willRotateToOrientation:(UIInterfaceOrientation)newOrientation {
        if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
        {
            if (newOrientation == UIInterfaceOrientationLandscapeLeft || newOrientation == UIInterfaceOrientationLandscapeRight) {

              //set your landscap View Frame
                [self supportedInterfaceOrientations];

            }

        }
        else if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
        {
            if(newOrientation == UIInterfaceOrientationPortrait || newOrientation == UIInterfaceOrientationPortraitUpsideDown){
      //set your Potrait View Frame
                [self supportedInterfaceOrientations];

            }
        }
        // Handle rotation
    }

    -(void)viewWillAppear:(BOOL)animated
    {
        [self willRotateToOrientation:[[UIDevice currentDevice] orientation]];  
        [super viewWillAppear:YES];
    } 
```

**更新**

很可能人们使用下面这样的检查设备`orientation`将这条线放入`ViewWillApear`：-

```
[[UIApplication sharedApplication] statusBarOrientation];
    [[UIDevice currentDevice] orientation];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceRotated:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

**和**

```
-(void)deviceRotated:(NSNotification*)notification
{

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    if(orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
    {
        //Do your stuff for landscap
    }
    else if(orientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
      //Do your stuff for potrait

    }

} 
```

**在 IOS5 中，你可以像下面这样做：**

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {

        return YES;
    }
    else
    {
        return NO;
    }
} 
```

**如果您希望支持所有方向，您只需返回 YES，例如：-**

```
 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

            return YES;  
    } 
```

# javascript - Javascript - 替换 div 中的内容，点击处理程序的问题

> ID：14621016
> 
> 赞同：0
> 
> 时间：2013-01-31T08:01:35.337
> 
> 标签：javascript, jquery, html, if-statement, click

我整天都在与我的代码争论，但没有解决问题。

我的网站有一系列图像作为导航：

```
 <div id="thumbs">
    <a href="#" rel="images/edwards1.jpg" class="image"><img src="images/edwardsthumb1.jpg" class="thumb" border="0"/></a>
    <a href="#" rel="images/sample1.jpg" class="image"><img src="images/sample1thumb.jpg" class="thumb" border="0"/></a>
    </div> 
```

单击这些时，会将内容添加到空白 div：

```
<div id="image">  <!-- main image container -->
</div>

<div id="gallerytext"> <!-- text box -->    
</div>

<div id="thumbset"> <!-- series of sub images/navigation -->
</div> 
```

使用这个 javascript：

```
 $(function() {
        var text = $('#gallerytext1').html();  <!-- blank divs are filled with content on page load -->
        $('#gallerytext').html(text);
        var thumbset = $('#thumbset1').html();
        $('#thumbset').html(thumbset);  
        $('#image').html('<img src="images/edwards1.jpg" border="0"/>');

  <!-- click handler -->

  $(".image").click(function() {    <!-- image variable is set when an image with class "image" is clicked -->
        var image = $(this).attr("rel"); <!-- each image has appropriate rel attribute to fill variable -->

    if (image == 'images/edwards1.jpg'){   <!-- different text and gallery loaded on click of specific image -->
        var text = $('#gallerytext1').html();
        $('#gallerytext').html(text);
        var thumbset = $('#thumbset1').html();
        $('#thumbset').html(thumbset);
        $('#thumbset').hide();
        $('#thumbset').fadeIn('slow');
    }

    if (image == 'images/sample1.jpg'){     <!-- different text and sub-gallery loaded on click of specific image -->
        var text = $('#gallerytext2').html();
        $('#gallerytext').html(text);
        var thumbset = $('#thumbset2').html();
        $('#thumbset').html(thumbset);
        $('#thumbset').hide();
        $('#thumbset').fadeIn('slow');
    }

    $('#image').hide();                 <!--  main image changed -->
    $('#image').fadeIn('slow');
    $('#image').html('<img src="' + image + '"/>');
    return false;

      });
      }); 
```

它在初始加载后工作正常，但是如果触发“if”语句之一并更改内容，则 div“thumbset”中具有 .image 类的图像现在不可点击，并且主图像不再更改。主导航 div 中的图像：“thumbs”仍然可以正常工作，“if”语句仍然有效。

所有图像都根据我帖子中的顶部代码框进行标记和格式化，我无法弄清楚为什么只有“thumbset”中的图像决定停止工作。我对 Javascript 非常熟悉，因此将不胜感激任何帮助！

更新：这是我更新的代码。现在清洁多了，但该功能根本不起作用。我在想问题可能出在“图像”变量的变量设置上？

```
 $(document).ready(function() {
    var $doc = $(document.body);

        var text = $('#gallerytext1').html();  //blank divs are filled with content on page load 
        $('#gallerytext').html(text);
        var thumbset = $('#thumbset1').html();
        $('#thumbset').html(thumbset);  
        $('#image').html('<img src="images/edwards1.jpg" border="0"/>');

    //click handler
       $doc.on("click",".image",function(){

        var image=$(this).attr("rel"); 
        var imid=$(this).attr("data");
        var text=$('#gallerytext'+imid).html();
        var thumbset=('#thumbset'+imid).html();

        $('#debug').html(imid);

        $('#gallerytext').fadeIn('slow');
        $('#gallerytext').html(text);
        $('#thumbset').fadeIn('slow');
        $('#thumbset').html(thumbset);
        $('#image').hide();                 
        $('#image').fadeIn('slow');
        $('#image').html('<img src="' + image + '"/>');
        return false;

      });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:07:22.597

采用

```
$(document).ready(function() {
var $doc = $(document.body);
$doc.on("click",".image", function() {//... 
```

然后绑定 $doc 中的所有事件（如果选择器不同，则链接它们

```
$doc.on(event,selector,function).on(ev,sel,fn)... 
```

或者如果同一选择器上有多个事件

```
$doc.on({
        ev : function(e) {},
        ev2 : function(e) {}
        //... 
        },selector).on()... 
```

要在 javascript 使用中注释掉，它会在同一行注释后面的内容

```
// 
```

而不是`<!--`哪个更意味着注释掉html

您的意大利面条代码就像许多重复的指令，

取出if中的常用指令

定义一个模式以避免使用 if(stg=='sthg')

例如你可以做

```
 <a ... data-idtoload="*id*">... 
```

然后

```
 var imid=$(this).data("idtoload");
    var text = $('#gallerytext'+imid).html();  
    $('#gallerytext').html(text);
    var thumbset = $('#thumbset'+imid).html();
    //... 
```

如果你的代码被削减了 66%，那就没有了

# ios - 单点触控中带有繁重代码的启动画面

> ID：14621022
> 
> 赞同：4
> 
> 时间：2013-01-31T08:01:50.103
> 
> 标签：ios, iphone, ipad, xamarin.ios, splash-screen

我们现在在 monotouch 和 iPhone / ipad 应用程序中，当我们想在应用程序午餐前有启动画面时，我们应该在 info.plist 文件中设置启动图像，它会在应用程序启动之前显示此图像。

但是，当我们想要在后台运行一些繁重的代码并且在这些操作尚未完成之前不会消失的启动画面时，实现启动画面的最佳方式是什么？一些代码，例如从 Internet 下载应用程序配置和保存在启动画面中经常使用的主题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:36:44.743

可能的解决方案：

*   制作一个`SplashViewController`，其中包含与应用程序的启动图像相同的图像。它还包含`UIActivityIndicatorView`;
*   在`AppDelegate`的 FinishedLaunching 方法中创建 的新实例`SplashViewController`，将其设置为`window.RootViewController`，调用：

```
activityIndicator.StartAnimating(); 
```

*   在后台运行一些繁重的代码；
*   完成后，设置`window.RootViewController`为 ViewController，这是应用程序的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:18:09.127

顺便说一句，还有另一种解决方案：创建 main ，在 AppDelegate 的方法`UIViewController`中将其设置为立即。然后通过以下代码以模态方式创建和显示：`Window.RootViewController``FinishedLaunching``splashViewController`

```
 ...
    MainViewController.PresentModalViewController(splashViewController, true);
    ... 
```

`UIViewController`通过调用代码可以隐藏模态：

```
 DismissModalViewControllerAnimated(true); 
```

请注意，由于 iOS 6`PresentModalViewController`成为不推荐使用的方法。因此，对于许多 iOS 版本的兼容性，您可以编写特殊方法来显示 modal `UIViewController`。

```
 public void ShowModalViewController (UIViewController vc, bool animated)
    {
        if (UIDevice.CurrentDevice.CheckSystemVersion(6, 0)) {
            MainViewController.PresentViewController(vc, animated, null);
        } else {
            MainViewController.PresentModalViewController(vc, animated);
        }
    } 
```

# python - python Mock "assert_has_calls" 和 "assert_called_once_with" 细微差别

> ID：14621032
> 
> 赞同：1
> 
> 时间：2013-01-31T08:02:15.900
> 
> 标签：python, mocking, assert

我有一个`MagicMock`名为`some_magic_mock`created 的对象，用于使用补丁进行测试。

假设修补的对象是`some_patched_object`.

在被测代码中有一个调用：

```
some_patched_object.some_method -= some_parameter 
```

（提醒：`-=`实际上是`__isub__`方法的语法糖）

现在，在测试代码中，我有以下几行：

```
print some_magic_mock.mock_calls
some_magic_mock.assert_has_calls([mock.call.some_method.__isub__(some_parameter)])
some_magic_mock.some_method.__isub__.assert_called_once_with(some_parameter) 
```

所以会发生以下情况：

1.  `print`声明打印：`[call.some_method.__isub__(some_parameter)]"`
2.  第一个断言 (assert_has_calls) 成功。
3.  第二个断言失败并显示错误消息：`Expected to be called once. Called 0 times.`

我的印象是断言是相等的，除了第二个断言也`call_count`恰好是 1。

鉴于我所看到的，我也不明白为什么第二个断言会失败`mock_calls`。

总的来说，我觉得我在这里遗漏了一些细微差别，并且很乐意为我清除它。

编辑1：

对于那些问的人：
这是我的代码的复制粘贴，实际名称更改为“some_X”和“expected_X”，这与上面的内容基本相同：

```
print self.some_magic_mock.mock_calls  
print self.some_magic_mock.some_method.__isub__.mock_calls  

self.some_magic_mock.assert_has_calls([mock.call.some_method.__isub__(expected_param)])
self.some_magic_mock.some_method.__isub__.assert_called_once_with(expected_param) 
```

第一次打印产量：`[call.some_method.__isub__(expected_param)]`
第二次打印产量：`[]`

第一个断言通过。
第二个断言失败。

# python - Bitbucket 后管理服务挂钩

> ID：14621037
> 
> 赞同：0
> 
> 时间：2013-01-31T08:02:22.733
> 
> 标签：python, git, githooks, webhooks, bitbucket-api

我想将提交消息发送到我的网络应用程序。

我正在做以下事情：

1.  在我的 git 存储库中，添加了一个带有 post url 的 POST 服务

    http://localhost:9000/myGitHook/ 或 http://167.34.56.13:9000/myGitHook/。

在我的 urls.py 我有：

```
URLS = [r'/', Main,
          :
          :
    (r'/myGitHook/', GitHook),
          :
          :
] 
```

上面的 url 正确映射到以下处理程序：

```
class GitHook(tornado.web.RequestHandler):
    def get(self, *args, **kwargs):
        print self.request
        #do something

    def post(self, *args, **kwargs):
        print self.request
        #do something 
```

1.  修改了一个文件并将其推送到存储库。
2.  我可以在我的 bitbucket 存储库提交列表中看到提交，但上面的 POST url 甚至没有被触发。
3.  然后我发现[了这个](https://confluence.atlassian.com/display/BITBUCKET/Troubleshooting+Bitbucket+Services)。它说您不能使用 localhost 进行后期服务管理。

除了这些过程，我没有做任何其他事情。

请建议如何在开发环境中执行此操作。

任何形式的帮助将非常感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T21:21:31.990

Bitbucket 服务器需要访问您的钩子，而在 localhost 上它不能。您可以尝试使用[ProxyLocal](http://proxylocal.com/)或类似的东西，它将代理您的本地 Web 服务器并使其可供公众使用。

# xml - 未使用 tomcat 和 opendap thredds 服务器更新的文件

> ID：14621041
> 
> 赞同：1
> 
> 时间：2013-01-31T08:02:34.327
> 
> 标签：xml, tomcat

我正在运行可操作的海洋模型，所以我每天都将新的 netCDF 文件放入通过 opendap TDS 和 tomcat 提供服务的文件夹中。模型完成后，旧文件被新文件覆盖，*它们具有相同的名称（！）*，但似乎服务器没有更新/提供新数据。如果我对系统磁盘文件执行 ncdump，我会得到一个值；如果我通过 opendap 使用访问，我得到*的相同 ncdump*不同，在我看来，它就像我想要的那样被缓存并保持而不是刷新。有没有办法通过 TDS opendap tomcat 禁用 netCDF 文件的缓存？谢谢，干杯伊维卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:13:19.910

要确保 THREDDS 数据服务器 (TDS) 不缓存您的数据，您可以设置一个不缓存的 datasetRoot。这是我们用于海洋预报模型的实际示例，其中新的预报 NetCDF 文件每天简单地上传到服务器，使用相同的名称（此处为 NECOFS_GOM2_FORECAST.nc、NECOFS_GOM3_FORECAST.nc 等）：

```
<?xml version="1.0" encoding="UTF-8"?>
<catalog xmlns="http://www.unidata.ucar.edu/namespaces/thredds/InvCatalog/v1.0"
  xmlns:xlink="http://www.w3.org/1999/xlink" name="THREDDS Catalog for NetCDF Files" version="1.0.1">

  <service name="allServices" serviceType="Compound" base="">
    <service name="ncdods" serviceType="OpenDAP" base="/thredds/dodsC/"/>
    <service name="HTTPServer" serviceType="HTTPServer" base="/thredds/fileServer/"/>
  </service>

  <datasetRoot path="FVCOM" location="/http/www/CODFISH/Data/FVCOM/" cache="false"/>

  <dataset name="NECOFS GOM2 Forecast" ID="gom2_nocache" serviceName="allServices"
    urlPath="FVCOM/NECOFS/Forecasts/NECOFS_GOM2_FORECAST.nc" dataType="Grid"/>

  <dataset name="NECOFS GOM3 Forecast" ID="gom3_nocache" serviceName="allServices"
    urlPath="FVCOM/NECOFS/Forecasts/NECOFS_GOM3_FORECAST.nc" dataType="Grid"/>

  <dataset name="NECOFS MET Forecast" ID="necofs_met" serviceName="allServices"
    urlPath="FVCOM/NECOFS/Forecasts/NECOFS_MET_FORECAST.nc" dataType="Grid"/>

  <dataset name="NECOFS GOM3 Wave Forecast" ID="necofs_gom3_wave" serviceName="allServices"
    urlPath="FVCOM/NECOFS/Forecasts/NECOFS_WAVE_FORECAST.nc" dataType="Grid"/>

  <dataset name="NECOFS MASSBAY Forecast" ID="massbay_nocache" serviceName="allServices"
    urlPath="FVCOM/NECOFS/Forecasts/NECOFS_FVCOM_OCEAN_MASSBAY_FORECAST.nc" dataType="Grid"/>

</catalog> 
```

有关 [https://www.unidata.ucar.edu/projects/THREDDS/tech/reference/ThreddsConfigXMLFile.html](https://www.unidata.ucar.edu/projects/THREDDS/tech/reference/ThreddsConfigXMLFile.html)的更多信息，其中还说“看以下可能不起作用”，但可以肯定它适用于 TDS 4.2 .9，因为我们在这里使用它：[http ://www.smast.umassd.edu:8080/thredds/forecasts.html](http://www.smast.umassd.edu:8080/thredds/forecasts.html)

# java - 错误找不到主类程序会在netbeans后退出

> ID：14621047
> 
> 赞同：0
> 
> 时间：2013-01-31T08:03:21.630
> 
> 标签：java, class, jar

当我在 Eclipse 中编译并运行我的程序时，它可以工作。当我在我的个人计算机（带有 java JDK 7 的 Windows 8）上运行我的 .jar 程序时，它可以工作。但是当我试图在其他计算机上运行 .jar 时，它不起作用。

所以我尝试使用命令行运行，`java -jar myjar` 但收到​​了我无法理解的消息

```
java -jar "Bureau\Application SNCF\SNCF.jar"

Exception in thread "main" java.lang.UnsupportedClassVersionError: Bad version number in .class file

    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source) 
```

有人理解这个消息错误吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:06:24.980

这总是由不同的 Java JDK 在编译时和运行时冲突引起的，请确保您使用相同的 JDK 版本来编译和运行它。

# ipad - ipad 应用程序作为混合应用程序

> ID：14621049
> 
> 赞同：1
> 
> 时间：2013-01-31T08:03:32.000
> 
> 标签：ipad, cordova

我需要使用 phonegap 开发一个 iPad 应用程序（作为一个混合应用程序）。我对此完全陌生。

我在 android 中使用 html5 css 和 js 以及 JqueryMobile 和 phonegap 做了一些示例。还有一些在 Visual Studio 中不使用 Phonegap 的示例。那么，我需要检查在 iPhone 和 iPad 中创建应用程序的具体内容吗？

创建 ipad 应用程序和 iPhone 应用程序一样吗？我需要记下什么？请帮我..

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:53:08.993

基本上是一样的。如果您要使用 jquery mobile，我想他们会为您处理不同的屏幕尺寸。如果没有，你应该有 2 个不同的 css 文件，一个用于 iPhone，另一个用于 iPad（使用媒体查询），并使用响应式网页设计来调整 UI 以适应不同的屏幕。

# asp.net - 缩短文件名会改善 Web 服务器的响应吗？

> ID：14621055
> 
> 赞同：0
> 
> 时间：2013-01-31T08:04:02.390
> 
> 标签：asp.net, database, web-applications, webserver

由于性能问题，我目前正在重新创建一个 Web 应用程序，因为 Web 应用程序会因抓取这么多文件而减慢速度。它使用户能够查看、上传和下载文件。目前，服务器上存储了 600000 多个文件。每个都有 100 多个字符长的文件名。将它们重命名为更短的名称会提高性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:06:33.103

文件长度不应导致性能问题。

你能做的是（如果可行的话）

*   将文件划分为逻辑段（读取目录）

*   根据一些输入有条件地抓取，这样您抓取的文件数量就会减少。

*   或者，尝试构建缓存以记录文件更改发生时的情况，以便您可以读取（/crawl）仅受影响的文件。

# extjs - 使用 ext-all.js 或 ext.js 进行生产？

> ID：14621056
> 
> 赞同：1
> 
> 时间：2013-01-31T08:04:07.537
> 
> 标签：extjs, extjs4

我在一些 ExtJs 示例中看到它们仅包含`ext.js`在页面中，并且 ExtJs 在加载后通过 XHR 请求解析所有依赖项`app.js`，*延迟加载*。但我检查了调试器网络，发现 ExtJs 发出`~250`XHR 请求来解决依赖关系。

发出约 250 个加载应用程序的请求似乎不是一个好的解决方案。**我想知道**我应该使用`ext.js`（延迟加载）还是`ext-all.js`（不再请求）生产版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:08:18.527

> 如果没有任何真正好的理由，**永远不要**在生产系统上延迟加载。

可能有一些特殊情况下这是有意义的，但这应该只针对很少使用的类而不是整个 ExtJS 库。

所以答案是您应该使用`ext-all.js`或让 Sencha CMD 工具为您构建一个`app.js`只包含必需类的工具。

# wpf - 如何在两个数据模板之间应用过渡动画，同时在同一个 WPF 列表框中进行交换？

> ID：14621057
> 
> 赞同：0
> 
> 时间：2013-01-31T08:04:10.553
> 
> 标签：wpf, silverlight, xaml, wpf-controls

我有一个场景，我有两个不同的 DataTemplates 用于 Listbox，我在更改 Listbox 的 ItemsSource 时根据需要动态应用它们。包含不同 UI 的两个 DataTemplates 都可以正常工作，我可以在两个 Datatemplates 之间进行交换。

我担心的是在模板之间交换时我想添加动画以给人一种 UI 变化的感觉，但现在它发生在一次单击中，它只是一次应用其他模板，这不会给人一种 UI 转换变化的感觉。

因此，每当将不同的 DataTemplate 应用于 Listbox 时，我想做什么带有过渡效果。

我希望我能够解释自己。

如果有人做了这么短的工作，请帮助我如何在相互交换两个 DataTemplate 的同时实现相同的过渡效果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:58:11.857

Silverlight 工具包有一个 TransitioningContentControl 可以完全满足您的需求。我认为 WPF 工具包也有一个，但现在找不到。

您可能会考虑将 SL 控件转换为 WPF - 应该很容易。或者你可以[从 Codeproject 试试这个](http://www.codeproject.com/Articles/136786/Creating-an-Animated-ContentControl)

# php - 在php中将3d数组转换为2d数组

> ID：14621060
> 
> 赞同：-2
> 
> 时间：2013-01-31T08:04:15.327
> 
> 标签：php

我有一个格式为：

```
 array (
      [0] => array (
        [0] => array (
          [id] =>  19
          [Type] =>  sng
          [TouristPrice] =>  2500
          [ExtraBeds] =>  1500
          [ChildPrice] => 1000
        )
      )
    ) 
```

我想将其转换为：

```
array (
    [0] => array (
      [id] =>  19
      [Type] =>  sng
      [TouristPrice] =>  2500
      [ExtraBeds] =>  1500
      [ChildPrice] => 1000
    )  
) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:07:48.567

您可以做的一件事是，遍历数组并以这种方式放置第一个选项，以防所有数组项都属于同一类型，只有一层深度。就像将文件夹内的文件夹移动到父文件夹一样：

```
foreach ($array as $subarray)
    $subarray = $subarray[0]; 
```

* * *

试过这段代码：

```
<?php
    $array = array(
        array(
            array(
                "Hello",
                "World"
            )
        ),
        array(
            array(
                "Hello One",
                "World One"
            )
        ),
    );
    var_dump($array);
    foreach ($array as $subarray)
        $subarray = $subarray[0];
    var_dump($array);
?> 
```

得到这个输出：

```
array(2) {
  [0]=>
  array(1) {
    [0]=>
    array(2) {
      [0]=>
      string(5) "Hello"
      [1]=>
      string(5) "World"
    }
  }
  [1]=>
  array(1) {
    [0]=>
    array(2) {
      [0]=>
      string(9) "Hello One"
      [1]=>
      string(9) "World One"
    }
  }
}
array(2) {
  [0]=>
  array(1) {
    [0]=>
    array(2) {
      [0]=>
      string(5) "Hello"
      [1]=>
      string(5) "World"
    }
  }
  [1]=>
  array(1) {
    [0]=>
    array(2) {
      [0]=>
      string(9) "Hello One"
      [1]=>
      string(9) "World One"
    }
  }
} 
```

# c# - StringBuilder.Append 不起作用

> ID：14621061
> 
> 赞同：5
> 
> 时间：2013-01-31T08:04:23.280
> 
> 标签：c#, json, string

我们有一个 WCF 项目，其中自动生成 JSON 响应，但在一种情况下，我们手动创建 JSON 并将其发送到浏览器。那部分工作正常。

昨晚我注意到一个错误并试图解决这个问题，但问题真的很奇怪。不知何故，在连接字符串值之后，一个块被删除，我不知道这里发生了什么。看下面的代码，是怎么回事？

![我的代码导致问题](../Images/ffd65edadb1cf518cb6919c486c52ab3.png)

以下是“innerBlock”返回数据后的 JSON 快照

![innerBlock 后返回的结果](../Images/30310a598a8125636ee85da43144bfba.png)

以下是字符串追加后的 JSON 快照！

![连接后返回的结果](../Images/ebe091d4d14ed53572976629a2dc62e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:41:17.377

.Net 应用程序运行良好。由于我的 JSON 太大，我使用了一些 JSON 查看器，但不幸的是它们有错误。在记事本中测试了 JSON，一切正常。

1.  [http://jsonviewer.stack.hu](http://jsonviewer.stack.hu)

2.  [http://jsonlint.com](http://jsonlint.com)

# c# - 我无法从 gridview 的页脚行获取文本框的值

> ID：14621068
> 
> 赞同：0
> 
> 时间：2013-01-31T08:04:50.477
> 
> 标签：c#, asp.net, gridview

我无法从 gridview 的页脚行获取文本框的值

```
 <asp:GridView ID="GridView1" runat="server" Width="1214px"       
            AutoGenerateColumns="False" ShowFooter="true" 
 OnRowCommand="GridView1_RowCommand"                                  
  <Columns>
 <asp:TemplateField HeaderText="Insert">
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Student Name">
            <EditItemTemplate>
               <asp:Label ID="lblEditSName" runat="server" Text='<%#Eval("sname") %>'/>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblSName" runat="server" Text='<%#Eval("sname") %>' />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtSName" runat="server"/>
            </FooterTemplate>
            </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

后面的代码是............我无法从gridview的页脚行中获取文本框的值

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName==("AddNew"))
    {
        TextBox txtName =(TextBox) GridView1.FooterRow.FindControl("txtSName");
string strName=txtName.Text;   //strName is Empty while i m enters data into the  textbox txtSName
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T10:57:05.180

发布此评论以帮助可能遇到相同问题的其他人。

确保网格不会在回发时再次加载。

页面加载中的代码应如下所示

```
if (!IsPostBack)
{
  LoadGrid();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:33:35.680

您的标记正在咬您。您在模板字段中有两个页脚模板。做这个

```
<asp:TemplateField HeaderText="Insert">
     <ItemTemplate>
        <asp:ImageButton ID="EditImageButton" runat="server" CommandName="Edit"
            ImageUrl="~/images/Edit.png"Style="height: 16px" ToolTip="Edit" />
    </ItemTemplate>
    <EditItemTemplate>
       <asp:ImageButton ID="btnDelete" runat="server" CommandName="Delete" 
            CausesValidation="false" OnClientClick="return confirm('Delete.Are you sure you want to delete?')" 
            ImageUrl="~/images/DeleteTS.png" Text="Cancel" />
    </EditItemTemplate>
    <FooterTemplate>
          <asp:ImageButton ID="AddNewImgBtn" runat="server" ImageUrl="~/images/saveHS.png"
               ToolTip="Add New" AlternateText="Add New" Width="16px" Height="16px" 
               CommandArgument="InsertNew" ImageAlign="AbsMiddle" />
    </FooterTemplate>             
  </asp:TemplateField>
  <asp:TemplateField HeaderText="Student Name">
     <EditItemTemplate>
          <asp:Label ID="lblEditSName" runat="server" Text='<%#Eval("sname") %>' />
     </EditItemTemplate>
      <ItemTemplate>
            <asp:Label ID="lblSName" runat="server" Text='<%#Eval("sname") %>' />
      </ItemTemplate>
      <FooterTemplate>
          <asp:TextBox ID="txtSName" runat="server"/>
      </FooterTemplate>
      </asp:TemplateField>
  </Columns>
  </asp:GridView> 
```

然后你可以优雅地定位你的页脚行。

```
 protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
   {
           if (e.CommandArgument=="InsertNew")
         {
         GridView testGrid=(Gridview)sender;
           TextBox txtName =(TextBox)testGrid.FooterRow.FindControl("txtSName");
        string strName=txtName.Text;   
          }
         } 
```

请参阅工作示例[示例](https://www.dropbox.com/s/u9pcdmj4ix98swm/WebSite3.zip)

# jsp - 从数据库中删除名称

> ID：14621069
> 
> 赞同：0
> 
> 时间：2013-01-31T08:04:55.787
> 
> 标签：jsp

我有一个jsp网页。当我按下网页上的删除按钮时，我需要从数据库中删除用户名。我尝试了下面的代码，但我无法删除名称，而是在用户名数据库中插入一个新行和一个空值。

这是我的代码

UnblockServlet.java：

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { // TODO 自动生成的方法存根

String username = request.getParameter("username");

```
System.out.println("username="+username);

CustomerInfor unblockUser = new CustomerInfor();

unblockUser.setUsername(username);

CustomerInforDBAO unblockuserdb = new CustomerInforDBAO();

String status = unblockuserdb.blockUser(unblockUser);
System.out.println("Deleted user from blocked:" + status);

if (status== "success"){
    dispatch(request,response,"/success.jsp");  

}

else{
    dispatch(request,response,"/error.jsp"); 
```

}

}

CustomerInforDBAO.java：

```
public String unblockUser(CustomerInfor unblockUser){
    Connection con = getConnection(true);
    PreparedStatement stmt = null;
    int status=1;
    String select = "DELETE * FROM paybuddy.blocked where username=?";
    try{
        stmt = con.prepareStatement(select);
        stmt.setInt(1,unblockUser.getId());
        stmt.setString(2,unblockUser.getUsername());

        status = stmt.executeUpdate();
    } catch (Exception e){
        e.printStackTrace();
        unblockUser = null;
    } finally {
        try{
            if (stmt != null) stmt.close();
            if (con != null) con.close();
        }catch (SQLException e) {}
    }
    if(status!=1)
        return "error";
    else
        return "success";

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:11:21.403

```
public String unblockUser(CustomerInfor unblockUser){
Connection con = getConnection(true);
PreparedStatement stmt = null;
int status=1;
String select = "DELETE  FROM paybuddy.blocked where username=?"; // no *
try{
    stmt = con.prepareStatement(select);
    //stmt.setInt(1,unblockUser.getId()); is this needed?
    stmt.setString(1,unblockUser.getUsername());

    status = stmt.executeUpdate();
} catch (Exception e){
    e.printStackTrace();
    unblockUser = null;
} finally {
    try{
        if (stmt != null) stmt.close();
        if (con != null) con.close();
    }catch (SQLException e) {}
}
if(status!=1)
    return "error";
else
    return "success";

    } 
```

并检查你是否调用了上面的正确函数。

```
String status = unblockuserdb.blockUser(unblockUser); 
```

应该是

```
String status = unblockuserdb.unblockUser(unblockUser); 
```

# java - 如何解决找不到符号错误？

> ID：14621075
> 
> 赞同：3
> 
> 时间：2013-01-31T08:05:22.693
> 
> 标签：java, sdk, cognos, cognos-bi

我正在尝试使用[IBM](https://www-304.ibm.com/support/docview.wss?uid=swg21340789)提供的 Java 程序。请参阅下面的代码。当我尝试编译这个程序时，

```
C:\Temp>"C:\Program Files (x86)\Java\jdk1.6.0_25\bin\javac.exe" GetOrphanMyFolde
rs.java 
```

我收到一条错误消息

```
GetOrphanMyFolders.java:96: cannot find symbol
symbol  : variable PropEnum
location: class GetOrphanMyFolders
                                 PropEnum.canBurst      ,
                                 ^
GetOrphanMyFolders.java:97: cannot find symbol
symbol  : variable PropEnum
location: class GetOrphanMyFolders
                                 PropEnum.capabilities   ,
                                 ^ 
```

我是Java菜鸟，这个错误的原因是什么？我正在使用的程序在这里

```
/**
 * Licensed Material - Property of IBM
 * © Copyright IBM Corp. 2012
 *
 * GetOrphanMyFolders.java
 *
 * Description: Technote 1340789 - SDK Sample: How to recover the My Folders of users that no longer exist in the Authentication Provider
 *
 * Tested with: IBM Cognos BI 10.1.1, IBM Java 5.0, Axis 1.4
 *
 */

import java.util.Vector;

import javax.xml.namespace.QName;

import org.apache.axis.client.Stub;
import org.apache.axis.message.SOAPHeaderElement;

import com.cognos.developer.schemas.bibus._3.BaseClass;
import com.cognos.developer.schemas.bibus._3.BiBusHeader;
import com.cognos.developer.schemas.bibus._3.ContentManagerService_PortType;
import com.cognos.developer.schemas.bibus._3.ContentManagerService_ServiceLocator;
import com.cognos.developer.schemas.bibus._3.CopyOptions;
import com.cognos.developer.schemas.bibus._3.PropEnum;
import com.cognos.developer.schemas.bibus._3.QueryOptions;
import com.cognos.developer.schemas.bibus._3.SearchPathMultipleObject;
import com.cognos.developer.schemas.bibus._3.SearchPathSingleObject;
import com.cognos.developer.schemas.bibus._3.Sort;
import com.cognos.developer.schemas.bibus._3.UpdateActionEnum;
import com.cognos.developer.schemas.bibus._3.XmlEncodedXML;

public class GetOrphanMyFolders
{
    //TODO: change the following variables depending on your installation and setup

    //--- begin changes ----
    private static String dispatcherURL = "http://localhost:9300/p2pd/servlet/dispatch";

    //Change the next three variables to a valid namespace ID as defined in Cognos Configuration and NOT the namespace name
    //Provide a valid user ID and password if Anonymous is disabled
    private static String nameSpaceID   = "Cognos";
    private static String userName      = "admin";
    private static String password      = "password";

    // define where you are copying the orphaned my folders to
    private static String targetLocation = "/content/folder[@name='OrphanedMyFolders']";
    //--- end changes ---

    //Services to be used in the sample
    private ContentManagerService_PortType cmService = null;

    private String[] getAllMyFoldersSearchPaths(String namespaceID)
    {
        String listOfAccountSP [] = null;
        PropEnum props[] = new PropEnum[] {PropEnum.searchPath, PropEnum.defaultName, PropEnum.portalPage};
        Sort sOpt[] = new Sort[]{}; 
        QueryOptions qOpt = new QueryOptions(); 
        try
        {
            // get the template user's Account object. 
            BaseClass template[] = cmService.query(new SearchPathMultipleObject("//folder"), props, sOpt, qOpt);
            listOfAccountSP = new String [template.length];

            for (int x=0;x<template.length;x++)
            {
                if ( template[x].getSearchPath().getValue().indexOf(")/folder[@name='My Folders']")>0 )
                {
                    listOfAccountSP[x]=template[x].getSearchPath().getValue();
                }
            }
        }
        catch (Exception e)
        {
            System.out.println(e);
            e.printStackTrace();
        }
        return listOfAccountSP;
    }

    private PropEnum[] getAllPropEnum ()
      {
        PropEnum properties[] = new PropEnum[]{
                 PropEnum.active, 
                 PropEnum.actualCompletionTime,
                 PropEnum.actualExecutionTime ,
                 PropEnum.advancedSettings ,
                 PropEnum.ancestors ,
                 PropEnum.asOfTime ,
                 PropEnum.base ,
                 PropEnum.brsAffineConnections, 
                 PropEnum.brsMaximumProcesses ,
                 PropEnum.brsNonAffineConnections, 
                 PropEnum.burstKey ,
                 PropEnum.businessPhone,             
                 PropEnum.canBurst      ,       
                 PropEnum.capabilities   ,          
                 PropEnum.capacity        ,     
                 PropEnum.closeConnectionCommands,             
                 PropEnum.closeSessionCommands    ,         
                 PropEnum.configuration            , 
                 PropEnum.connections             ,
                 PropEnum.connectionString         ,    
                 PropEnum.consumers             ,
                 PropEnum.contact             ,
                 PropEnum.contactEMail         ,    
                 PropEnum.contentLocale         ,    
                 PropEnum.creationTime           ,  
                 PropEnum.credential             ,
                 PropEnum.credentialNamespaces    ,         
                 PropEnum.credentials             ,
                 PropEnum.cubeContentName          ,   
                 PropEnum.dailyPeriod             ,
                 PropEnum.data             ,
                 PropEnum.dataBlocks        ,     
                 PropEnum.dataSize           ,  
                 PropEnum.dataType            , 
                 PropEnum.defaultDescription   ,          
                 PropEnum.defaultName           ,  
                 PropEnum.defaultOutputFormat    ,         
                 PropEnum.defaultScreenTip        ,     
                 PropEnum.defaultTriggerDescription,
                 PropEnum.deployedObject ,
                 PropEnum.deployedObjectAncestorDefaultNames, 
                 PropEnum.deployedObjectClass ,
                 PropEnum.deployedObjectDefaultName, 
                 PropEnum.deployedObjectStatus      ,       
                 PropEnum.deployedObjectUsage        ,     
                 PropEnum.deploymentOptions           ,  
                 PropEnum.description             ,
                 PropEnum.disabled             ,
                 PropEnum.dispatcherID          ,   
                 PropEnum.dispatcherPath         ,    
                 PropEnum.displaySequence         ,    
                 PropEnum.email             ,
                 PropEnum.endDate            , 
                 PropEnum.endType             ,
                 PropEnum.eventID             ,
                 PropEnum.everyNPeriods        ,     
                 PropEnum.executionFormat        ,     
                 PropEnum.executionLocale         ,    
                 PropEnum.executionPageDefinition  ,           
                 PropEnum.executionPageOrientation  ,           
                 PropEnum.executionPrompt            , 
                 PropEnum.faxPhone             ,
                 PropEnum.format             ,
                 PropEnum.gateway             ,
                 PropEnum.givenName            , 
                 PropEnum.governors             ,
                 PropEnum.hasChildren            , 
                 PropEnum.hasMessage             ,
                 PropEnum.hasPrompts             ,
                 PropEnum.height             ,
                 PropEnum.homePhone           ,  
                 PropEnum.horizontalElementsRenderingLimit,
                 PropEnum.identity ,
                 PropEnum.isolationLevel, 
                 PropEnum.lastConfigurationModificationTime, 
                 PropEnum.lastPage ,
                 PropEnum.loadBalancingMode, 
                 PropEnum.locale ,
                 PropEnum.location, 
                 PropEnum.members ,
                 PropEnum.message ,
                 PropEnum.metadataModel ,
                 PropEnum.mobilePhone ,
                 PropEnum.model ,
                 PropEnum.modelName ,
                 PropEnum.modificationTime ,
                 PropEnum.monthlyAbsoluteDay ,
                 PropEnum.monthlyRelativeDay ,
                 PropEnum.monthlyRelativeWeek ,
                 PropEnum.name ,
                 PropEnum.namespaceFormat ,
                 PropEnum.objectClass ,
                 PropEnum.openConnectionCommands ,
                 PropEnum.openSessionCommands ,
                 PropEnum.options ,
                 PropEnum.output ,
                 PropEnum.owner ,
                 PropEnum.ownerPassport ,
                 PropEnum.packageBase ,
                 PropEnum.page ,
                 PropEnum.pageOrientation ,
                 PropEnum.pagerPhone ,
                 PropEnum.parameters ,
                 PropEnum.parent ,
                 PropEnum.paths ,
                 PropEnum.permissions ,
                 PropEnum.policies ,
                 PropEnum.portalPage ,
                 PropEnum.position ,
                 PropEnum.postalAddress ,
                 PropEnum.printerAddress ,
                 PropEnum.productLocale ,
                 PropEnum.qualifier ,
                 PropEnum.recipients ,
                 PropEnum.recipientsEMail ,
                 PropEnum.related ,
                 PropEnum.replacement ,
                 PropEnum.requestedExecutionTime ,
                 PropEnum.retentions ,
                 PropEnum.rsAffineConnections ,
                 PropEnum.rsMaximumProcesses ,
                 PropEnum.rsNonAffineConnections ,
                 PropEnum.rsQueueLimit ,
                 PropEnum.runAsOwner ,
                 PropEnum.runningState ,
                 PropEnum.runOptions ,
                 PropEnum.screenTip ,
                 PropEnum.searchPath ,
                 PropEnum.searchPathForURL ,
                 PropEnum.sequencing ,
                 PropEnum.serverGroup ,
                 PropEnum.source ,
                 PropEnum.specification ,
                 PropEnum.startAsActive ,
                 PropEnum.startDate ,
                 PropEnum.state ,
                 PropEnum.status ,
                 PropEnum.stepObject ,
                 PropEnum.surname ,
                 PropEnum.target ,
                 PropEnum.taskID ,
                 PropEnum.timeZoneID ,
                 PropEnum.triggerDescription ,
                 PropEnum.triggerName ,
                 PropEnum.type ,
                 PropEnum.unit ,
                 PropEnum.uri ,
                 PropEnum.usage ,
                 PropEnum.user ,
                 PropEnum.userCapabilities ,
                 PropEnum.userCapability ,
                 PropEnum.userName ,
                 PropEnum.version ,
                 PropEnum.verticalElementsRenderingLimit ,
                 PropEnum.viewed ,
                 PropEnum.weeklyFriday ,
                 PropEnum.weeklyMonday ,
                 PropEnum.weeklySaturday ,
                 PropEnum.weeklySunday ,
                 PropEnum.weeklyThursday ,
                 PropEnum.weeklyTuesday ,
                 PropEnum.weeklyWednesday ,
                 PropEnum.width ,
                 PropEnum.yearlyAbsoluteDay, 
                 PropEnum.yearlyAbsoluteMonth, 
                 PropEnum.yearlyRelativeDay ,
                 PropEnum.yearlyRelativeMonth, 
                 PropEnum.yearlyRelativeWeek ,

        };
        return properties;
      }

    private String[][] getAllCIs(String namespaceID)
    {
        String listOfCIs [][] = null;

        String searchPath = "CAMID('"+namespaceID+"')//account";
        PropEnum props[] = new PropEnum[] {PropEnum.searchPath, PropEnum.defaultName, PropEnum.portalPage};
        Sort sOpt[] = new Sort[]{}; 
        QueryOptions qOpt = new QueryOptions(); 
        try
        {
            // get the template user's Account object. 
            BaseClass template[] = cmService.query(new SearchPathMultipleObject(searchPath), props, sOpt, qOpt);
            listOfCIs = new String [2] [template.length];

            for (int x=0;x<template.length;x++)
            {
                    listOfCIs[0][x]=template[x].getSearchPath().getValue();
                    listOfCIs[1][x]=template[x].getDefaultName().getValue();
            }
        }
        catch (Exception e)
        {
            System.out.println(e);
            e.printStackTrace();
        }

        return listOfCIs;

    }

    private void moveMF2PF(String path, String targetLocation)
    {
        String userSearchPaths = path ;
        PropEnum props[] = getAllPropEnum();
        String user = path.substring(0, path.indexOf("/folder[@name='My Folders']"));

        try
        {
            //Query the Content Store for all objects in My Folders for user userName
            BaseClass bc[] = cmService.query(new SearchPathMultipleObject(userSearchPaths), props, new Sort[]{}, new QueryOptions());

            if (bc != null && bc.length > 0)
            {
                //copy the folder to Public Folders and rename
                String[] newName={user};
                CopyOptions opt = new CopyOptions();
                opt.setUpdateAction(UpdateActionEnum.replace);
                opt.setRecursive(true);
                cmService.copyRename(bc,new SearchPathSingleObject(targetLocation),newName,opt);
            }
            else
                System.out.println("User " + user+" did not have My Folders. It could be that they have not logged on yet");
        }
        catch (Exception e)
        {
            System.out.println(e);
            e.printStackTrace();
        }
    }

    /**
     * Establish a connection to Cognos BI and initialize the different services
     */
    private void connectToCognos() 
    {
        ContentManagerService_ServiceLocator cmServiceLocator = new ContentManagerService_ServiceLocator();

        try 
        {
            cmService = cmServiceLocator.getcontentManagerService(new java.net.URL(dispatcherURL));
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    /**
     * Logon to Cognos BI using valid credentials information
     */
    private void logon(String nameSpaceID, String userName, String password) 
    {
        StringBuffer credentialXML = new StringBuffer();

        credentialXML.append("<credential>");
        credentialXML.append("<namespace>").append(nameSpaceID).append("</namespace>");
        credentialXML.append("<username>").append(userName).append("</username>");
        credentialXML.append("<password>").append(password).append("</password>");
        credentialXML.append("</credential>");

        String encodedCredentials = credentialXML.toString();
        XmlEncodedXML xmlCredentials = new XmlEncodedXML();
        xmlCredentials.set_value(encodedCredentials);

        try 
        {
            cmService.logon(xmlCredentials, null);
            getSetHeaders();
        } 
        catch (Exception ex) 
        {
            ex.printStackTrace();
        }
    }

    private void getSetHeaders()
    {
        String BiBus_NS = "http://developer.cognos.com/schemas/bibus/3/";
        String BiBus_H = "biBusHeader";

        BiBusHeader CMbibus = null;

        SOAPHeaderElement temp = ((Stub)cmService).getResponseHeader(BiBus_NS, BiBus_H);

        try 
        {
            CMbibus = (BiBusHeader)temp.getValueAsType(new QName (BiBus_NS, BiBus_H));
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }

        if (CMbibus != null)
        {
            ((Stub)cmService).setHeader(BiBus_NS, BiBus_H, CMbibus);
        }
    }

    /**
     * This is the main class, which connects to Cognos BI and calls the
     * method doWork(), containing the specific code for this sample
     */
    public static void main(String args[]) 
    {

        GetOrphanMyFolders mainClass = new GetOrphanMyFolders();

        mainClass.connectToCognos();

        // If Anonymous is disabled, then logon
        if (nameSpaceID.length() > 0) 
        {
            mainClass.logon(nameSpaceID, userName, password);
        }

        //get all the CAMIDs related to the My Folders searchpath
        String[] listOfMyFolders = mainClass.getAllMyFoldersSearchPaths(nameSpaceID);
        String[][] listOfCamIds = mainClass.getAllCIs(nameSpaceID);
        Vector<String> orphanedMyFolders = new Vector<String>();

        // find a my folder that does not have an existing owner from the ldap 
        boolean found = false;
        for (int i = 0; i < listOfMyFolders.length; i++)
        {
            if (listOfMyFolders[i] != null )
            {
                if (listOfMyFolders[i].endsWith("[@name='My Folders']")) 
                {
                    int y = 0;
                    for (y = 0; y < listOfCamIds[0].length - 1; y++) 
                    {
                        String test = listOfCamIds[0][y];
                        if (listOfMyFolders[i].indexOf(test) >= 0) 
                        {
                            found = true;
                        }
                    }
                    if (!found) 
                    {
                        //  String userName = getUserNameFromCamid(listOfMyFolders[i]);
                        System.out.println(listOfMyFolders[i] + " does not have an associated user");
                        orphanedMyFolders.add(listOfMyFolders[i]);
                    }
                    found = false;
                }               
            }
        }

        // Now we need to take the list of orphaned My Folders and move them to the 
        // public folders so that the content can be examined.
        for (int x = 0; x < orphanedMyFolders.size(); x++)
        {
            mainClass.moveMF2PF(orphanedMyFolders.elementAt(x).toString(), targetLocation);
        }
        System.out.println("Done ....");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T08:15:25.873

问题是 cognos jar 目前是不可见的。因此，编译器无法解析对打包在此 jar 中的类的引用。

您可以在 cognos 安装目录中找到axisCognosClient.jar

```
 %COGNOS_INSTALL_DIR%/c8/webapps/p2pd/WEB-INF/lib 
```

编译时将此目录包含在类路径中。此 jar 包含您在 import 语句中引用的所有类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T21:16:14.177

这通常是最重要的报告的错误。修复这些将修复其余部分。如果第一个错误看起来像这样： GetOrphanMyFolders.java:19: error: package com.cognos.developer does not exist import com.cognos.developer.*; ^

然后您需要按照一些 IBM 说明下载这些包并将它们添加到您的类路径中。

如果已经下载，请尝试[http://www-01.ibm.com/support/docview.wss?uid=swg21343429](http://www-01.ibm.com/support/docview.wss?uid=swg21343429)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T00:14:22.647

该示例`GetOrphanMyFolders.java`使用在外部库（即 jars）中定义的类，这些类应该在`Cognos 8 SDK`（通常在`C8_INSTALLATION_DIR/sdk/lib`）中可用，我相信您应该寻找`cognosClient.jar`或`axisCognosClient.jar`

由于您是 Java 新手，因此使用编译它`javac`并将外部 jar 添加到类路径中会很麻烦。我建议你使用[eclipse](http://www.eclipse.org/downloads/)

下载/安装后（只需解压缩到您喜欢的任何目录），创建一个，在包下`New Java Project`添加（复制/粘贴或拖放）。然后[查看此问题](https://stackoverflow.com/questions/14766854/how-to-import-new-apis-into-java-eclipse-ini4j/14766918#14766918)以了解如何将库添加到项目类路径中。`GetOrphanMyFolders.java``src`

这比弄清楚如何做到这一点要容易得多`javac -cp`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T13:33:39.127

您正在初始化 PropEnum 类型的属性数组。可能是 PropEnum 没有定义为属性的 canBurst 和功能。

只需尝试删除 {PropEnum.canBurst ,PropEnum.capabilities ,} 到 {PropEnum.canBurst, PropEnum.capabilities,} 之间的空格。空间不应该是问题。

# java - Java GUI 项目的视图、触发器和存储过程有什么用处？

> ID：14621076
> 
> 赞同：2
> 
> 时间：2013-01-31T08:05:25.880
> 
> 标签：java, sql, triggers, views, procedures

我正在制作一个 Java gui 和 web 应用程序，它将使用相同的 mysql 数据库。

这是一个 DTh 管理系统，所有信息都将根据输入动态存储和检索。

我相信视图本质上是静态的，因此毫无用处，因为我的所有查询都将具有不同的 where 条件（用户 ID）。

我需要使用触发器吗？我的意思是我可以编写 java 代码来执行多个语句，而不是使用内置触发器（例如，插入客户姓名和家庭成员姓名都会有一个家庭负责人的副本）。是否有性能影响？我在某种程度上错了吗？

同样的事情是存储过程的用途是什么？我不能在java中使用方法来做所有事情吗？

所以，我问是否可以将所有计算密集型的东西转移到 java 和 web 脚本而不是 sql。如果是，这是否意味着我只需要创建数据库的后端结构（即所有不同的表和 FK、PK）并在不使用 mysql 工作台上的任何 sql 东西的情况下休息？

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:37:12.380

（一如既往）有一个正确答案：视情况而定。

如果您只想显示和查询一些数据，您可能不需要触发器或存储过程。

视图是另一回事：如果您想要连接表或类似的静态视图，它们会非常有用。如果你不需要这个，就不要使用它。

钥匙真的很重要。它们使您的数据对错误输入具有鲁棒性。

你应该使用的是[PrepearedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)而不是`Statement`. 如果您只使用s，那么在[SQL-Injection](https://www.owasp.org/index.php/Main_Page)`PreparedStatement`问题上，您（几乎？）是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:32:23.010

我们使用视图是因为它比选择查询更快，并且仅显示数据（而不是编辑更新）它更快且更可取。

触发器在数据库端触发，因此它更快，因为它只在一次执行中执行 2 个或更多查询。

存储过程也是如此，因为我们可以在单个数据库连接中执行多个查询。如果我们执行不同的查询，那么每次执行数据库连接（查找数据库服务器、验证、查找数据库等）所花费的时间会更多。

# asp.net - UpdatePanel 仅从事件更新

> ID：14621079
> 
> 赞同：0
> 
> 时间：2013-01-31T08:05:40.667
> 
> 标签：asp.net, ajax, updatepanel

大家好，我的问题是这样的，我有两个更新面板

```
 <asp:UpdatePanel ID="new_word_panel_UpdatePanel" runat="server" UpdateMode="Conditional">
     <ContentTemplate >    
          <asp:Panel ID='new_word_panel' runat="server">
            <asp:Button ID='new_word_btn' runat="server" Text='give me a new word' Visible='false' OnClick='GenNewWord' />            
          </asp:Panel>
    </ContentTemplate>

 </asp:UpdatePanel>  
 <asp:UpdatePanel ID="UpdatePanel1" runat="server" >
     <ContentTemplate > 
  <asp:Button ID='Button8' runat="server" Text='hide' OnClick='hidegive' />
   </ContentTemplate>
 </asp:UpdatePanel> 
```

第一个 updatepanel UpdateMode 设置为 Conditional，因此我可以使用 Update() 方法轻松更新来自第二个 updatepanel asp:Button ID='Button8' OnClick='hidegive' 事件的内容。

这是事件处理程序：

```
protected void hidegive(object sender, EventArgs e)
    {
        if (new_word_btn.Visible == true)
            new_word_btn.Visible = false;
        else
            new_word_btn.Visible = true;

        **new_word_panel_UpdatePanel.Update();**
    } 
```

我的问题是我无法从我的页面上的调节器方法更新第一个 UpdatePanel 虽然我使用的是 Update() 方法，但我尝试从这个方法更新面板并且没有任何问题：

```
void PlayerWinEventHandler(object sender,Game.PlayerWinEventArgs e)
    {

        Session["score"] = int.Parse(Session["score"].ToString()) + 10;
        UpdateScore();

        if (new_word_btn.Visible == true)
            new_word_btn.Visible = false;
        else
            new_word_btn.Visible = true;

        new_word_btn.Text = "zibi";
        **new_word_panel_UpdatePanel.Update();**

    } 
```

感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:14:53.370

为什么不在第一个更新面板中使用触发器。

```
 <Triggers>
                      <asp:AsyncPostBackTrigger ControlID="Button8" EventName="Click"/>
                    </Triggers> 
```

# android - 如何实现多个答案的单选按钮文本？

> ID：14621082
> 
> 赞同：1
> 
> 时间：2013-01-31T08:05:43.193
> 
> 标签：android, textview, radio-button

我是安卓新手。。

我在`Nextbutton`显示问题的下四个选项答案时遇到问题...

在我第一次设置文本时，我得到了正确的问题并匹配了四个选项答案。我需要的是..

我有一个`nextbutton`用于显示下一个问题和答案的工具。当单击下一个按钮时，我可以得到下一个问题..

**同时我需要从数组列表中获取接下来的四个选项....如何实现这个？**任何帮助将不胜感激......提前非常感谢......

```
protected void onPostExecute(String file_url) {
    pDialog.dismiss();
      ques1=new ArrayList<String>(new ArrayList<String>(ques1));
            //  j=0;
            TextView txtque = (TextView) findViewById(R.id.que_txt); 
            txtque.setText(ques1.get(j));
            answ1=new ArrayList<String>(new ArrayList<String>(answ1));
            btn_practice1.setText(answ1.get(0));
            btn_practice2.setText(answ1.get(1));
            btn_practice3.setText(answ1.get(2));
            btn_practice4.setText(answ1.get(3));
        Button nextBtn = (Button) findViewById(R.id.nxt_btn);

        nextBtn.setOnClickListener(new Button.OnClickListener(){
        @Override
        public void onClick(View v){  

          j++;
          TextView txtque = (TextView) findViewById(R.id.que_txt); 
          txtque.setText(ques1.get(j));         
         }
       });
} 
```

如何在 Nextbutton 的 onClick 事件中实现单选按钮文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:31:44.840

```
 nextbtn.setOnClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {

            j++;// j is your ques1 Array index number
            txtque.setText(ques1.get(j));
                            k++;  // k is your answ1 Array index number
            btn_practice1.setText(answ1.get((k*4)+0));
            btn_practice2.setText(answ1.get((k*4)+1));
            btn_practice3.setText(answ1.get((k*4)+2));
            btn_practice4.setText(answ1.get((k*4)+3));

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:41:59.397

您可以使用两个 ArrayList，第一个用于所有问题，第二个用于每个问题的四个选项，如下所示..

```
ArrayList<String> allQue = new ArrayList<String>();

ArrayList<HashMap<String, String>> options = new ArrayList<HashMap<String, String>>();

HashMap<String, String> map = new HashMap<String, String>();

map.put("optionFirst","your option");
map.put("optionSecond","your option");
map.put("optionThird","your option");
map.put("optionFourth","your option");

options.add(map); 
```

以这种方式把你所有的答案

然后在nextButton的OnClick上做

```
txtque.setText(allQur.get(j).toString()); 
```

和选项...

```
 btn_practice1.setText(options.get(j).get("optionFirst").toString());
 btn_practice2.setText(options.get(j).get("optionSecond").toString());
 btn_practice3.setText(options.get(j).get("optionThird").toString());
 btn_practice4.setText(options.get(j).get("optionFour").toString()); 
```

# .net - 如何完全禁用 log4net

> ID：14621083
> 
> 赞同：17
> 
> 时间：2013-01-31T08:05:50.200
> 
> 标签：.net, log4net

我在一个 .net Web 应用程序中有一个 log4net。但我想完全禁用它。是否可以在 web.config 中设置任何配置设置以实现此目的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-31T08:08:47.130

要禁用所有日志消息，您可以将日志级别设置为关闭：

> 将 Hierarchy 上的 Threshold 设置为 Level OFF 将禁用该 Hierarchy 中的所有日志记录。这可以在 log4net 配置文件中通过将 log4net 配置元素上的“threshold”属性设置为“OFF”来完成。例如：
> 
> `<log4net threshold="OFF" />`

[http://logging.apache.org/log4net/release/faq.html](http://logging.apache.org/log4net/release/faq.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T08:11:47.100

将 Hierarchy 上的 Threshold 设置为 Level OFF 将禁用该 Hierarchy 中的所有日志记录。这可以在 log4net 配置文件中通过将`"threshold"`log4net 配置元素上的属性设置为“OFF”来完成。例如：

```
<log4net threshold="OFF" /> 
```

请参考：[如何在运行时完全禁用所有日志记录？](http://logging.apache.org/log4net/release/faq.html#runtime-disable)

# kml - 如何在 Google 地球中使用绝对高度模式记录 KML 游览？

> ID：14621084
> 
> 赞同：1
> 
> 时间：2013-01-31T08:05:52.177
> 
> 标签：kml, google-earth

在[KML 开发人员指南](https://developers.google.com/kml/documentation/touring#knownissues)中写道，Google 地球游览记录机制以*绝对*高度模式创建 FlyTos。但是当我在 GE 免费 7.0.2 中录制旅行时，FlyTos 是*相对于海平面*高度模式生成的。而且我发现没有任何设置可以改变这种行为。

我必须做些什么才能真正获得*绝对*模式的录制之旅？

# subdomain - 在liferay中为用户页面自动创建子域

> ID：14621087
> 
> 赞同：1
> 
> 时间：2013-01-31T08:06:07.160
> 
> 标签：subdomain, liferay, liferay-6

当新用户添加到 liferay 时，可以自动为他创建一个公共页面。我应该在哪里查看 Liferay 的源代码来实现这样的功能？或者也许已经可以通过配置实现？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:53:30.100

从技术上讲，这是在 中完成的`UserLocalServiceImpl.addUserWithWorkflow(...)`，但根据您的实际需要，您可以通过配置完成您要求的部分操作：

创建用户组时，您可以编辑用户组的“页面”（或站点模板）。如果用户是该用户组的成员，这些页面将被复制/链接到用户的个人站点。在 ControlPanel/Portal/PortalSettings 中，您可以选择此用户组作为所有新创建用户的默认用户组，以便他们都获得这些页面。

现在，这不会分配您在此问题标题中提到的子域（如虚拟主机）。如果您想为站点分配一个虚拟主机（当您深入研究 Java 代码时，在技术术语中称为“组”），您必须覆盖上面给出的方法（例如通过覆盖的钩子`UserLocalService`）并配置用户的站点/group 与虚拟主机。但是，UI 不允许为用户的站点配置虚拟主机，但您可以通过 API 来执行此操作，例如以编程方式

如果这对您来说已经足够了，您还可以实现从[http://username.example.com](http://username.example.com)（“用户名”上的通配符）到[http://www.example.com/web/username](http://www.example.com/web/username)的空白重定向- 例如使用 Apache 的 mod_rewrite

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:39:51.360

最后，我必须遵循：[http](http://www.liferay.com/community/forums/-/message_boards/message/10268877) ://www.liferay.com/community/forums/-/message_boards/message/10268877 。我只想使用 UI，所以我必须自定义 portlet 来解决这个问题：|

# c# - 如何使用某些脚本为 wpf 4.5 应用程序创建安装程序包

> ID：14621093
> 
> 赞同：8
> 
> 时间：2013-01-31T08:06:45.263
> 
> 标签：c#, wpf, installation, setup-project, .net-4.5

我需要通过脚本为我的 WPF 应用程序创建可安装的设置。我不知道从哪里开始，什么是最好的方法。请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T08:21:52.027

您可以：

*   使用 Visual Studio 中的内置安装项目类型创建 MSI 安装程序
    *   [教程](https://www.google.co.uk/search?q=visual+studio+msi+tutorial&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)
*   使用[NSIS](http://nsis.sourceforge.net/Main_Page)或[WIX 之](http://wix.sourceforge.net/)类的东西。我的所有应用程序都使用 NSIS，它们都有学习曲线，而且 NSIS 很容易换肤。
    *   [NSIS 示例](http://nsis.sourceforge.net/Where_can_I_find_some_example_scripts)
    *   [WIX 示例](http://sourceforge.net/p/wix/examples/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-18T08:52:34.597

考虑使用 Inno Setup ▶ [http://www.jrsoftware.org/isinfo.php](http://www.jrsoftware.org/isinfo.php)

它是免费的，还提供强大的脚本来制作安装包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T18:23:24.723

同意埃奇隆的观点。我想补充一点，Inno Setup 也是一个非常好的尝试解决方案。

恕我直言，WIX 比替代品更难理解和管理，对于小项目来说，它不是最佳选择。

# xml - 如何替换 R 中 XML 元素内的文本？

> ID：14621094
> 
> 赞同：6
> 
> 时间：2013-01-31T08:06:47.090
> 
> 标签：xml, r, replace

我有一个输入 xml 文件。

猫样本.xml

```
<Text>
    &lt;p&gt;ABC &lt;/p&gt;
</Text> 
```

R 脚本

```
library(XML)
doc = xmlTreeParse("sample.xml", useInternal = TRUE)
top<-xmlRoot(doc)

sub("&lt;","<",top[[1]]) 
```

我该如何解决 pblm 以上问题？

**错误消息**：as.vector(x, "character") 中的错误：无法将类型“externalptr”强制转换为“字符”类型的向量

编辑：目的是对 xml 中的特定节点使用 readHTMLTable() 函数，该节点具有 html 表，但它具有用于 > 和 < 的 xml 标记（`&gt;`和`&lt;`），因为 readHTMLTable 函数无法处理 xml 标记，因此需要首先重新替换。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T09:01:23.770

And now the answer to your real question:

sample.xml with encoded table:

```
<Text>
&lt;table&gt;
&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;32&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</Text> 
```

Read it in:

```
> library(XML)
> doc = xmlTreeParse("sample.xml", useInternal = TRUE)
> top<-xmlRoot(doc) 
```

Convert to text:

```
> table=xmlValue(top)
> table
[1] "\n<table>\n<tr><td>1</td><td>2</td></tr>\n<tr><td>2</td><td>8</td></tr>\n<tr><td>4</td><td>32</td></tr>\n</table>\n" 
```

This is now ready to feed to `readHTMLTable`. No string conversion needed:

```
> readHTMLTable(table)
$`NULL`
  V1 V2
1  1  2
2  2  8
3  4 32 
```

Howzat?

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T08:36:48.770

如果您的问题是要知道如何替换 XML 节点内容中的字符串，那么您可以使用`sample.xml`您提供的文件检查以下代码：

```
## Parse the XML file
doc <- xmlTreeParse("sample.xml", useInternal = TRUE)
## Select the nodes we want to update
nodes <- getNodeSet(doc, "//Text")
## For each node, apply gsub on the content of the node
lapply(nodes, function(n) {
  xmlValue(n) <- gsub("ABC","foobar",xmlValue(n))
}) 
```

这会给你：

```
R> doc
<?xml version="1.0"?>
<Text>
    &lt;p&gt;foobar &lt;/p&gt;
</Text> 
```

在这里，您可以看到“ABC”已被“foobar”取代。

**但是，**如果你用你想要实现的替换来尝试这个代码（用“<”替换“<”），它显然不会工作：

```
doc <- xmlTreeParse("sample.xml", useInternal = TRUE)
nodes <- getNodeSet(doc, "//Text")
lapply(nodes, function(n) {
  xmlValue(n) <- gsub("&lt;","<",xmlValue(n))
}) 
```

会给你 ：

```
R> doc
<?xml version="1.0"?>
<Text>
    &lt;p&gt;ABC &lt;/p&gt;
</Text> 
```

为什么 ？如果您正在使用 XML 文件，您应该知道某些字符，主要是 <、>、& 和 " 是保留的，因为它们是基本 XML 语法的一部分。因此，它们不能出现在节点的内容中，否则会解析会失败。所以它们被替换为*实体*，这是这些字符的一种编码。例如，“<”被编码为“<”，“&”被编码为“&”等。

所以这里，你节点的内容中包含了一个“<”字符，这个字符已经自动转换为他的实体“<”了。您尝试对代码执行的操作是替换“<” 返回“<”，R 很乐意为您做这件事，但由于它是节点的文本内容，XML 包会立即将其转换回“<”。

所以，如果你想要实现的是转换你的字符串 "<p>ABC </p>" 到一个新的 XML 节点“<p>ABC </p>”，你不能那样做。一种解决方案是解析您的文本字符串，从中检测节点的名称和（此处为“p”），创建一个新节点`xmlNode()`，为其提供文本内容“ABC”并用您刚刚的节点替换字符串创建的。

另一种快速而肮脏的方法是首先替换文件中的所有实体而不解析 XML。像这样的东西：

```
txt <- readLines(file("sample.xml"))
txt <- gsub("&lt;", "<", txt)
txt <- gsub("&gt;", ">", txt)
writeLines(txt, file("sample2.xml"))
doc2 <- xmlTreeParse("sample2.xml", useInternal = TRUE) 
```

这使 ：

```
R> doc2
<?xml version="1.0"?>
<Text>
  <p>ABC </p>
</Text> 
```

但这**很危险**，因为如果有一个“真实的”“<” 文件中的实体，解析将失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T08:27:30.733

获取节点的值`xmlValue`并替换。在这里，我将用 DEF 替换 ABC：

```
> top<-xmlRoot(doc)
> top
<Text>
    &lt;p&gt;ABC &lt;/p&gt;
</Text> 
> xmlValue(top)=sub("ABC","DEF",xmlValue(top))
> top
<Text>
    &lt;p&gt;DEF &lt;/p&gt;
</Text> 
```

我不尝试替换 < 的原因是因为这些字符序列在某些时候被 XML 代码解释：

```
> substr(xmlValue(top),6,6)=="<"
[1] TRUE 
```

虽然我已经尝试过使用一些选项`xmlTreeParse`和其他 XML 包函数，但我似乎无法停止`xmlValue`解释它们......

# javascript - 即使在向其附加内容时也使滚动条固定在底部

> ID：14621095
> 
> 赞同：2
> 
> 时间：2013-01-31T08:06:47.383
> 
> 标签：javascript, jquery

为了更好地理解，我正在尝试通过平滑过渡先前（上部）聊天消息来实现聊天框。

这是[http://jsfiddle.net/eEEGE/](http://jsfiddle.net/eEEGE/)

当我单击“添加”时，我希望所有数字 1 - 9 向上滑动并在其下方附加 10-12。

或者换句话说，我希望滚动条总是在底部滚动修复。

我知道我可以在附加后重新定位滚动条，但是我将看不到滑动动画。

代码参考

```
$(document).ready(function(){
    // set the default scroll bar to bottom of chat box
    $(".chat-list").scrollTop($(".chat-list")[0].scrollHeight);
    $("button").click(function(){
        $('.chat-list li:last-child').append('10<br/>11<br/>12');
        $('.chat-list li:last-child').show('slow');     
    });
});

<ul class="chat-list">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
    <li style="display:none"></li>
</ul>
<button>add</button>

.chat-list{
    height:100px;
    overflow:auto;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:10:33.373

```
 $(document).ready(function(){
        // set the default scroll bar to bottom of chat box
        $(".chat-list").scrollTop($(".chat-list")[0].scrollHeight);
        $("button").click(function(){
            $('.chat-list li:last-child').append('10<br/>11<br/>12');
// Do a callback for show()
            $('.chat-list li:last-child').show('slow', function() {
             $(".chat-list").scrollTop($(".chat-list")[0].scrollHeight);
            });        
        });
    }); 
```

对. `show()`_ `scrollTop()`_`$('.chat-list')[0].scrollHeight`

如果你想要一个动画，那么只需为 scrollTop 属性设置动画：

```
$(".chat-list").animate({
    scrollTop: $(".chat-list")[0].scrollHeight
 },'slow'); 
```

# facebook - Wordpress 插件：未启用以下功能

> ID：14621097
> 
> 赞同：1
> 
> 时间：2013-01-31T08:07:05.060
> 
> 标签：facebook, wordpress

我对 Wordpress 上的 facebook 扩展有疑问。我的网站上有一条红色消息：

```
Erreur and when i click on : Following is not enabled for  https://www.facebook.com/Doccc. 
```

当我检查来源时：

```
<a class="pluginErrorLink" href="/plugins/error/api?code=100&amp;message=Following+is+not+enabled+for+https%3A%2F%2Fwww.facebook.com%2FDoccc.&amp;hash=AQBKvSIFcfJ0KB6H" target="_blank"><span class="fwb">Erreur</span></a> 
```

我的基本设置：[http ://hpics.li/172e2a2](http://hpics.li/172e2a2)

谢谢您的帮助

# c# - Async / Await 方法以及选择器和启动器的问题

> ID：14621101
> 
> 赞同：0
> 
> 时间：2013-01-31T08:07:16.500
> 
> 标签：c#, windows-phone-8, async-await, async-ctp

我为照片选择器任务和相机选择器任务添加了以下扩展方法。

```
public static Task<TTaskEventArgs> ShowAsync<TTaskEventArgs>(this ChooserBase<TTaskEventArgs> chooser) where TTaskEventArgs : TaskEventArgs
{
    var taskCompletionSource = new TaskCompletionSource<TTaskEventArgs>();

    EventHandler<TTaskEventArgs> completed = null;

    completed = (s, e) =>
    {
        chooser.Completed -= completed;

        taskCompletionSource.SetResult(e);
    };

    chooser.Completed += completed;
    chooser.Show();

    return taskCompletionSource.Task;
} 
```

我在我的按钮点击中调用了这个方法，就像这样，

```
var photoResult = await new PhotoChooserTask().ShowAsync();
if (photoResult.TaskResult == TaskResult.OK)
{
    // set the photo to image source.
} 
```

添加后一切正常，但我的问题是，通过设置墓碑模式调用任务的时间，我等待后的代码没有执行（即完成的事件）。我该如何解决这种情况，我期待一个能解决我在上述实现（异步/等待）上的问题的答案。没想到在构造函数中注册事件的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:32:39.073

我看到你正在关注[我的文章](http://www.pedrolamas.com/2013/01/08/windows-phone-choosers-with-asyncawait)，结果我忘记了我目前的解决方案不适用于墓碑，正如文章评论中的某人所指出的那样。

我正在为此准备一个修复程序，一旦我准备好，我会更新线程！

# python - Ajax 和 fullCalendar - refetchEvents

> ID：14621104
> 
> 赞同：0
> 
> 时间：2013-01-31T08:07:26.557
> 
> 标签：python, ajax, fullcalendar

我正在使用出色的 FullCalendar，但 refetchEvents 有问题。

使用 python 脚本，我在 google 日历中添加了一个新事件。google-Calendar 是我的 FullCalendar 的 eventSource。完成后，我尝试重新加载 eventSource。但是刚刚添加的事件并没有出现，尽管我很确定此时它已插入到 google-Calendar 中。在推动下一个和返回后，我得到了新事件。这是相关的jquery-Part：

```
$.ajax({
        url:"cgi-bin/termin_insert.py",
        data: JSON.stringify(myevent),
        type: "POST",
        success:function(data,success,xhr){
                  alert(data.eventId);
                  $("#calendar").fullCalendar('refetchEvents');
        },
        error:function(){
                ...do something
        }
}); 
```

在成功部分中，会提醒正确的 google-eventId。所以我知道，该事件确实已经插入。

如果我将命令“refetchEvents”加倍，我可以解决这个问题。当我使用“rerenderEvents”时，根本没有区别。

在我看来，好像 google-Calendar 的 xml-feed 在成功插入新事件后稍晚更新。但我想知道主要问题是否是坐在屏幕前......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:18:00.580

在这个[问题](https://stackoverflow.com/questions/12324717)中，用户遇到了类似的问题并解决了

```
$("#calendar").fullCalendar('refetchEvents'); 
```

所以我决定再做一些测试，虽然我已经用过这个方法了。我不知道确切原因，但现在它可以工作了。

我之前没有看到另一个问题，希望没有人投入太多时间......

# java - 如何通过休眠将单例对象建模为表？

> ID：14621105
> 
> 赞同：4
> 
> 时间：2013-01-31T08:07:27.733
> 
> 标签：java, hibernate, orm, data-modeling

我的项目中有一个全局配置对象，并且我想在数据库中保留此类的 0 或 1 个实例。做这个的最好方式是什么 ？我在这里知道的一个技巧是映射一个“常量”字段，并在其上设置唯一约束，是否还有其他这样的方法看起来有点 hacky？

这是我尝试过的：-

```
 @Entity
    public class DTLdapConfig implements Serializable {

        @GeneratedValue(strategy=GenerationType.TABLE)
        @Id
        private int id;

        @Column(unique=true)
        private boolean singletonGuard;

 // no public setter getter for singletonGuard

 // other code below

} 
```

# objective-c - UIWebView 只显示空白屏幕

> ID：14621107
> 
> 赞同：0
> 
> 时间：2013-01-31T08:07:47.717
> 
> 标签：objective-c, uiwebview, uitableview, xcode4.5

我创建了一个`UITableViewCell`包含`UIWebView`，因此我可以显示一些粗体文本以进行自动完成

我用

```
-(void) setHTMLContent:(NSString *)HTMLContent
{
    [self.webView loadHTMLString:@"<p><strong>bold</strong><br/><br/> <b>bold</b> </p>" baseURL:nil];
} 
```

什么都没有显示`UIWebview`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:55:26.990

我在我的应用程序中尝试了您的示例，它按预期输出了两次“粗体”，尽管颜色为黑色。因此，如果您的背景也是黑色的，您将看不到任何东西。也许您只是设置了不同的颜色？

# hibernate - Hibernate 自然 ID 和二级缓存

> ID：14621112
> 
> 赞同：1
> 
> 时间：2013-01-31T08:08:03.503
> 
> 标签：hibernate, ehcache, second-level-cache

我正在尝试将 Hibernate 4 与 ehcache 一起使用。我的实体有几个 Id 字段，它们不是我的数据库中的主键。

```
@Entity
@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
@Table(name = "tbl_a")
public class A {

  @Id
  private Integer uniqueId;

  @NaturalId
  private Date insertDate;

  @NaturalId
  private Integer businessId;

  ...

} 
```

我希望这个实体被缓存，但它是由`@ID`字段而不是由`@NaturalId`s的组合缓存的

有没有办法让它工作？

谢谢，伊多布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:08:35.937

尝试移动`insertDate`并`businessId`进入[复合键](http://www.ibm.com/developerworks/library/os-hibernatejpa/)。通过加载的对象`session.load(...)`可以存储在二级缓存中。

# android - 用于存储在社交网络中发布的文本并重新使用它们的 Android 插件/应用程序

> ID：14621120
> 
> 赞同：0
> 
> 时间：2013-01-31T08:08:37.870
> 
> 标签：android, twitter, social-networking, facebook-android-sdk

我想开发一个应用程序，当用户向社交网络应用程序（Facebook 中的评论或帖子/推特中的推文等）键入内容时，它看起来像一个插件。该应用程序应显示为句柄，以便用户在使用社交网络时不会被打断。应用程序应该能够记录用户发布的消息，并且用户应该能够从应用程序中检索任何记录的文本，以便他/她可以在发布时重复使用相同的文本。是否可以在运行社交网络应用程序的同时实现这样的应用程序？请提供任何链接/想法/设计方法..等待您的指导..

谢谢，斯罗思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:16:36.393

我认为您无法显示“句柄”（除非您制作了在 Web 浏览器上运行的 javascript 插件），但您可以制作我想的应用程序。这是一种方法：

1.  创建一个使用特定于站点的身份验证的 Web 应用程序，并从您计划定位的所有社交网络请求权限。

2.  使用网站的 API 获得阅读帖子、评论、推文等的权限。

3.  使用 API 从站点定期检索这些内容并将它们存储在您自己的服务器中。

4.  编写一个具有漂亮 UI 的 android 应用程序，从您的服务器（通过您自己的 REST API）检索特定用户的数据并将其显示在移动应用程序中。

这是一个非常高级的概述，实际实施会很困难并且需要一段时间。但基本方法应该有效。祝你好运！

# ios6 - 如何将静态库与 xcode 链接？

> ID：14621124
> 
> 赞同：0
> 
> 时间：2013-01-31T08:09:12.063
> 
> 标签：ios6, ffmpeg, xcode4.2

我已经构建了 ffmpeg 并将其链接到我的项目：

![在此处输入图像描述](../Images/28e2d72d36694a2577196744d4a1f304.png)

但是当我包含 libavformat.h 时，它会游戏我错误：

![在此处输入图像描述](../Images/597f740a4d545bb3438b6f41846a0cc7.png)

我想知道我缺少什么设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:21:02.307

您应该将头文件添加到构建设置中的头搜索路径中，然后使用`#import "avformat.h"`.

# django-compressor - 有没有办法告诉 django 压缩器创建源映射

> ID：14621125
> 
> 赞同：8
> 
> 时间：2013-01-31T08:09:18.453
> 
> 标签：django-compressor

我希望能够在我的生产站点上调试缩小的压缩 javascript 代码。我们的网站使用 django 压缩器来创建缩小和压缩的 js 文件。我最近读到了 chrome 能够使用源映射来帮助调试此类 javascript。但是我不知道如何/如果可能的话告诉 django 压缩器在压缩 js 文件时创建源映射

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-04T20:25:35.427

关于输出单独的源映射文件，我没有一个好的答案，但是我能够进行内联工作。

在添加源映射之前，我的 settings.py 文件使用了以下预编译器

```
COMPRESS_PRECOMPILERS = (
    ('text/coffeescript', 'coffee --compile --stdio'),
    ('text/less', 'lessc {infile} {outfile}'),
    ('text/x-sass', 'sass {infile} {outfile}'),
    ('text/x-scss', 'sass --scss {infile} {outfile}'),
    ('text/stylus', 'stylus < {infile} > {outfile}'),
) 
```

快速后

```
$ lessc --help 
```

您会发现可以将 less 和 map 文件放入输出的 css 文件中。所以我的新文本/少预编译器条目看起来像

```
('text/less', 'lessc --source-map-less-inline --source-map-map-inline {infile} {outfile}'), 
```

希望这可以帮助。

编辑：忘记添加，为此需要 lessc >= 1.5.0，以升级使用

```
$ [sudo] npm update -g less 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:53:50.900

虽然我无法让它与 django-compressor 一起使用（尽管应该是可能的，但我认为我只是在正确设置应用程序时遇到了问题），但我能够让它与[django-assets](https://github.com/miracle2k/webassets.git)一起使用。

您需要将适当的命令行参数添加到 less 过滤器源代码，如下所示：

```
diff --git a/src/webassets/filter/less.py b/src/webassets/filter/less.py
index eb40658..a75f191 100644
--- a/src/webassets/filter/less.py
+++ b/src/webassets/filter/less.py
@@ -80,4 +80,4 @@ class Less(ExternalTool):
     def input(self, in_, out, source_path, **kw):
         # Set working directory to the source file so that includes are found
         with working_directory(filename=source_path):
-            self.subprocess([self.less or 'lessc', '-'], out, in_)
+            self.subprocess([self.less or 'lessc', '--line-numbers=mediaquery', '-'], out, in_) 
```

除了那个微小的补充：

1.  确保您的路径中有可用的节点——而不是 ruby​​ gem——更少的编译器（>=1.3.2 IIRC）。

2.  打开隐藏在 chrome 的 web 检查器配置页面中的 sass source-maps 选项。（是的，'sass' 不少：less 调整了它们的调试信息格式以匹配 sass，因为 sass 已经实现了与 chrome 兼容的映射，并且它们的格式一开始并没有什么不同......）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-04T18:20:34.530

不是开箱即用，但您可以扩展自定义过滤器：

```
from compressor.filters import CompilerFilter

class UglifyJSFilter(CompilerFilter):
        command = "uglifyjs -c -m " /
            "--source-map-root={relroot}/ " /
            "--source-map-url={name}.map.js" /
            "--source-map={relpath}/{name}.map.js -o {output}" 
```

# java - 带有 IF 功能的 OnClick 侦听器

> ID：14621126
> 
> 赞同：0
> 
> 时间：2013-01-31T08:09:50.607
> 
> 标签：java, android

我需要在我的 android 应用程序中为用户创建登录密码。第一部分比较 setPass 和确认通过，然后将其保存在数据库中。我的问题是 else 永远不会运行下面是我的代码...

```
 savePass.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
              if(setPass.getText().toString()
!=conPass.getText().toString()){
                Log.d("login", "Checking whether passwords created ok");
                Log.d("login", "setPass: " + setPass.getText().toString());
                Log.d("login", "conPass: " +  conPass.getText().toString());
                error.setText("Passwords do not match!");
            }else{
                Log.d("login", "showing dialog 0 ");
                showDialog(0);
                Log.d("login", "Instantiating loginNew");
                Login login = new Login();

                login.setPassword(setPass.toString());
                Log.d("login", "Adding to db");
                db.addPassword(login);
                Log.d("login", "opening main login form");
                Intent intent = new Intent("com.philsoft.budget.activity_main");
                startActivity(intent);  
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:13:26.160

不要将两个字符串与`==`运算符进行比较。改为使用`String.equals()`。

```
if(setPass.getText().toString().equals(conPass.getText().toString())){
// your necessary codes

} else {

} 
```

您必须记住，`==`比较对象引用，而不是内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:17:28.840

试试这个：

```
if(!setPass.getText().toString().equals( conPass.getText().toString()) ){ 
```

当使用`==`or `!=`with objects 时比较内存引用，而不是实际值。要比较值应该使用`equals()`.

希望能帮助到你。

# php - Codeigniter：为什么添加控制器时不包含 CSS？

> ID：14621131
> 
> 赞同：0
> 
> 时间：2013-01-31T08:10:14.280
> 
> 标签：php, css, codeigniter-2

这是我使用模板添加css文件的代码。我的文件夹结构是
-应用程序
-系统
-公共
---css

```
$this->load->library('template');   
$tmp = new CI_Template();  
$tmp->template->add_css('/public/css/general.css', TRUE);
$this->load->view('main'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:18:59.193

以下是调试问题的方法：

使用它来获取模板的类`echo get_class($tmp->template)`

转到该类，并查找`add_css()`方法 -**及其参数**。你应该可以省略第二个，但如果你想使用它，你需要在以下 3: 中选择`link`，`import`或者`embed`

之后，检查它在做什么并查看生成的路径。

剧透：您输入的路径应该是相对于`$config['base_path']`.

PS：你应该在这里找到更多信息：[http ://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)

# javascript - 显示第一项 jquery

> ID：14621132
> 
> 赞同：2
> 
> 时间：2013-01-31T08:10:16.473
> 
> 标签：javascript, jquery

我有一个类似这样的列表：

```
<li class="listElement semiUniqueCLassOne" unique-class="semiUniqueCLassOne" style="display:none;">one</li>
<li class="listElement semiUniqueCLassOne" unique-class="semiUniqueCLassOne" style="display:none;">two</li>
<li class="listElement semiUniqueCLassOne" unique-class="semiUniqueCLassOne" style="display:none;">three</li>
<li class="listElement semiUniqueCLassTwo" unique-class="semiUniqueCLassTwo" style="display:none;">four</li>
<li class="listElement semiUniqueCLassTwo" unique-class="semiUniqueCLassTwo" style="display:none;">five</li>
<li class="listElement semiUniqueCLassThree" unique-class="semiUniqueCLassThree" style="display:none;">six</li> 
```

我试图只显示第一个，`semiUniqueCLass`所以我试图这样做：

```
$('.listElement').each(function(){
    var uniqueClass = $(this).attr('unique-class');
    if($('.'+uniqueClass).is(':first')){
        $(this).show();
    }
}); 
```

这不起作用......我可以用什么方法让它起作用？试了几个，有点卡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:11:19.860

这应该可以解决问题：

```
$('.listElement').hide();
$('.listElement:first-child').show(); 
```

如果该类有更多元素`listElement`：

```
$('.listElement[@class*=semiUniqueCLass]').hide();
$('.listElement[@class*=semiUniqueCLass]:first-child').show(); 
```

（仅显示/隐藏`listElement`具有`class`包含*的* `semiUniqueCLass`）

要显示每个*独特* `semiUniqueCLass*`项目的第一个，请查看[Jack](https://stackoverflow.com/users/1338292/jack) 's [Answer](https://stackoverflow.com/a/14621334/1835379)或[xdazz](https://stackoverflow.com/users/762073/xdazz) 's [answer](https://stackoverflow.com/a/14621199/1835379)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T08:14:21.067

只需使用[***.first()***](http://api.jquery.com/first/)方法。

```
$('.listElement').each(function(){
    var uniqueClass = $(this).attr('unique-class');
    $('.'+uniqueClass).first().show();
}); 
```

***[和工作演示](http://jsfiddle.net/hZv8h/)***。

另一种解决方案如下所示：

```
var clazzs = $('.listElement').map(function() {
  return $(this).attr('unique-class');
});

$.unique(clazzs).each(function() {
  $('.'+this).first().show();
}); 
```

***[还有工作演示](http://jsfiddle.net/hZv8h/2/)***。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T08:25:57.103

要显示每个*唯一* `semiUniqueCLass*`项目的第一个，您必须`.listElement`手动迭代所有相关节点：

```
var shown = {}; // keep track of which class has already been shown

$('.listElement[unique-class]').each(function() {
  var className = this.getAttribute('unique-class');

  if (!shown[className]) {
    // this class has not been seen before, show the first only
    shown[className] = true;
    $(this).show();
  }
}); 
```

它显示元素`one`和。`four``six`

**更新**

我已经将这个答案与xdazz使用[这个 jsperf benchmark的](http://jsperf.com/select-first-of-each-class)[两个解决方案进行了对比](https://stackoverflow.com/a/14621199/1338292)。这个答案名列前茅，亚军慢了约 30%（在 Chrome 中）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T08:18:45.413

此代码显示第一项：

```
$('[class^=listElement]').first().show(); 
```

# android - Android：无法获取相机实例

> ID：14621134
> 
> 赞同：2
> 
> 时间：2013-01-31T08:10:20.333
> 
> 标签：android

我有一个简单的测试类

公共类 MainActivity 扩展 Activity {

```
@Override
protected void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    Camera a = Camera.open();
} 
```

}

和清单文件

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

    <uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.cameratest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

应用程序运行后我有异常

```
01-31 10:05:46.033: E/AndroidRuntime(17154): FATAL EXCEPTION: main
01-31 10:05:46.033: E/AndroidRuntime(17154): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cameratest/com.example.cameratest.MainActivity}: java.lang.RuntimeException: Fail to connect to camera service
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.os.Looper.loop(Looper.java:137)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.ActivityThread.main(ActivityThread.java:4514)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at java.lang.reflect.Method.invokeNative(Native Method)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at java.lang.reflect.Method.invoke(Method.java:511)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at dalvik.system.NativeStart.main(Native Method)
01-31 10:05:46.033: E/AndroidRuntime(17154): Caused by: java.lang.RuntimeException: Fail to connect to camera service
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.hardware.Camera.native_setup(Native Method)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.hardware.Camera.<init>(Camera.java:349)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.hardware.Camera.open(Camera.java:326)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at com.example.cameratest.MainActivity.onCreate(MainActivity.java:17)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.Activity.performCreate(Activity.java:4465)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
01-31 10:05:46.033: E/AndroidRuntime(17154):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
01-31 10:05:46.033: E/AndroidRuntime(17154):    ... 11 more 
```

我做错了什么？我的设备肯定有一个摄像头，它可以在其他应用程序上运行......

# shell - 在 shell 中编写复杂的数据结构

> ID：14621135
> 
> 赞同：0
> 
> 时间：2013-01-31T08:10:21.987
> 
> 标签：shell, unix

我基本上是在尝试在 shell 中编写数据结构（基本上是 classes ）

像下面这样的东西

```
foo = Foo()
foo.add_value(1)
etc 
```

但我意识到可能 shell 不是这样做的地方（如果我错了，请纠正我）

现在我认为的另一种方法是使用这些数据结构编写 C++ 或 python 代码，并让 shell 脚本将值解析为已编译的二进制文件或可执行脚本。

像在shell中的东西我把函数写成

```
 function Foo()
  {
    #call the binaries
    echo $something out
  } 
```

但是我如何创建 foo.method() 类型的体验？

任何建议将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:16:47.220

看看[http://shoop.sourceforge.net](http://shoop.sourceforge.net)。

> 这是 Shoop：SHell 面向对象编程项目（“shoop”）
> 
> 该项目于2006年4月11日在SourceForge.net上注册，项目组描述如下：
> 
> Shoop：SHell 面向对象编程扩展了 POSIX shell 以支持 OO，将无类的面向对象（自省、终结、序列化、多重继承）添加到普通的旧 shell 脚本中。

# macos - 在“.app”（应用程序包）中运行脚本作为主要可执行文件

> ID：14621137
> 
> 赞同：4
> 
> 时间：2013-01-31T08:10:25.183
> 
> 标签：macos, mono, cross-platform

我正在尝试使用 Mono 制作可在 Windows、Mac 和 Linux 上运行的便携式应用程序，但我想要一个标准 DMG 文件，允许用户简单地单击我的应用程序并将其拖到他们 Mac 上的 Applications 文件夹中。在[这篇文章](https://stackoverflow.com/questions/751599/possible-to-include-mono-runtimes-in-osx-app-bundle)的最佳答案中，我发现通过创建一个以文件夹开头的可执行脚本`#!`，`MyAppName.app/Contents/MacOSX/`它可以运行我喜欢的任何东西。

如何让脚本实际运行？

我在 XCode 中制作了一个空白的“Hello World”Cocoa 应用程序，并将 .app 文件复制到 Applications 目录，一切正常。但是当我用一个以它开头的脚本替换 MacOSX 文件夹中的可执行文件时`#!`，并没有运行该脚本。

我试过`chmod 755 myscript`了，我尝试删除旧的可执行文件并将我的脚本重命名为旧的文件名，但所做的只是阻止应用程序运行。脚本的权限和文件名都是正确的。

因此，我假设脚本可能不起作用，并且 XCoded 是一个命令行实用程序，它会再次简单地输出“Hello World！”，但它仍然没有运行。

“.app”扩展名正式称为应用程序包，它们有一些非常好的文档，但似乎没有一个告诉我为什么我的方法不起作用。

[这是我正在处理的 .app 包。](http://home.edgemontgeek.com/files/XCodeTest.zip)在 MasOSX 目录中，您会找到 hello（Hello Word 命令行实用程序）和 script（以 a`#!`作为第一行的单行脚本）和 XCodeTest（Hello World 可可应用程序）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:15:46.943

**Unix 中的脚本**

好吧，首先，脚本第一行的正确语法是

```
#! <path-to-script-interpreter> [<optional-args>] 
```

例如

```
#! /usr/bin/perl -wT
... perl code here 
```

**使用`open`命令**

但是，这对您没有帮助，因为该`open`命令不支持将 shell 脚本作为启动器。您需要编写一些 C / Objective-C 代码并将其编译为本机可执行文件。简单地使用`system()`或`execv()`在该工具内部也行不通，您必须`dlopen()`使用 Mono 运行时。

以[monodevelop/mainbuild/MacOSX/monostub.m](https://github.com/mono/monodevelop/blob/master/main/build/MacOSX/monostub.m)为例。这就是 MonoDevelop 用来启动 MonoMac 应用程序的方法。

当您使用 XCode 编写 Cocoa 应用程序时，它会将您的应用程序编译为本机代码，并将生成的二进制文件作为启动器放在`Contents/MacOS`目录中。

**简单的解决方案**

为什么不简单地使用 MonoDevelop 创建一个 MonoMac 应用程序？这将自动`.app`为您创建包 - 无需摆弄脚本或自定义启动器。

# iphone - indexpath.section ..如何在tableview中分成sections？

> ID：14621139
> 
> 赞同：0
> 
> 时间：2013-01-31T08:10:31.763
> 
> 标签：iphone, objective-c, xcode

我有一个带有部分的表格视图，每个部分都有自己的数组......我有 13 个部分，每个部分都有不同的主题。在方法中我该怎么做？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

如何进行切换？

```
Switch(indexpath.section) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:25:35.427

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath` `

`switch (indexPath.section)` {

`case 0: cell.textLabel.text=@""; break;` . . . `case n:`

`//display whatever want break;` `default: break;` `} }`

# c++ - C ++ - 设计不同的类以能够交换它们的规则

> ID：14621146
> 
> 赞同：2
> 
> 时间：2013-01-31T08:10:56.350
> 
> 标签：c++

有一个设计问题我需要你的帮助。

假设我需要设计一家服装店。在这家商店里有卖家和买家，每个人都用一个ID在商店里注册。

**我们希望允许卖家以买家身份登录，反之亦然（使用他最初注册时使用的同一 ID）。**

请记住，买方和卖方具有不同的数据成员，并且为了使用购买功能，我们需要的只是买方数据成员，而不是他的卖方数据成员。

乍一看，考虑到卖方与买方的数据成员不同，我决定将这两个类设置为派生自 Person 的 ShopPerson。

我决定拥有 ShopPerson 类的原因是允许买方和卖方包含通用功能的基类。（因为他们都可以买卖）

***我的问题是：***

“Buy”功能应该只是Buyer的成员，但是我怎么能把Seller当作Buyer呢？如果碰巧买方是卖方，那么他将没有此功能。

我上面的解决方案，使用 ShopPerson 类来拥有一个共享/公共类也不好，因为 Buy 函数使用了一些只供**买方专用的**数据成员，而 ShopPerson 不会熟悉它们。

我想到的唯一解决方案是放弃继承，但我不确定这是否正确。我该如何解决这个设计问题？有任何想法吗？

谢谢大家，辛迪加！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:33:01.837

这取决于*每个*卖家是否也是买家，或者是否只有一些卖家可以成为买家。在第一种情况下，很简单：卖家*是*买家，这意味着简单的继承：`class Seller : public Buyer`

在第二种情况下，每个 ShopPerson 都应该有一个买家行为，我会考虑这样的事情：

```
struct BuyerBehavior
{
  void buy();
  string creditCardNumer(); 
  //and so on
};

class ShopPerson
{
public:
  BuyerBehavior* getBuyerBehavior();
};

class Seller : public ShopPerson
{
  // some seller-specific stuff here
}; 
```

卖家可以获取买家的行为——为了买东西，他必须有这种行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T08:13:26.373

继承可能不是您所需要的。也许像下面这样。

```
class Buyer{
    ShopPerson* person;

    void Buy();
};

class Seller{
    ShopPerson* person;

    void Sell();
}; 
```

即，您有一个中央列表`ShopPerson`，但`Buyer`和`Seller`是在逐个事务的基础上实例化的瘦类。你现在可以使用继承

```
class TransactionParticipant{
     ShopPerson *person;
     //Misc common functionality
}; 
```

并从这个类继承`Buyer`和。`Seller`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T08:31:36.340

基于 Karthik T 的答案，您可以这样做，以便您可以在适当的类型之间进行转换：

```
class ShopPerson {
   // Common data
   // Optional data:
   unique_ptr<BuyerData> buyer_data; 
   unique_ptr<SellerData> seller_data; 

public:
   shared_ptr<Buyer> buyerPersonality(); // return null ptr, if no buyer data
   shared_ptr<Seller> sellerPersonality(); // return null ptr, if no seller data
};

class Buyer {
   shared_ptr<ShopPerson> person;
   BuyerData* buyer_data; // Points to person->buyer_data
public:
   void buy();
};

class Seller {
   shared_ptr<ShopPerson> person;
   SellerData* seller_data; // Points to person->seller_data
public:
   void sell();
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T08:19:27.347

看起来像适合[装饰模式](http://en.wikipedia.org/wiki/Decorator_pattern)的东西。您有一些店员，在某些条件下扩展到卖家或买家。当然，装饰（扩展）是在运行时执行的，基于他们登录的角色。

# c# - 如何在winRT中使用本机应用程序从服务器打开PDF文件？

> ID：14621151
> 
> 赞同：0
> 
> 时间：2013-01-31T08:11:23.407
> 
> 标签：c#, windows-runtime, winrt-xaml

我正在开发 WinRT C# 应用程序。我有一个网址说“ [http://www.example.com/test.pdf](http://www.example.com/test.pdf) ”。我可以使用winRT的本机pdf应用程序在应用程序中打开它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:08:19.543

是的，`Launcher.LanuchUriAsync`会为你做这件事。您可以参考[MSDN](http://msdn.microsoft.com/en-gb/library/windows/apps/hh701484.aspx)以获取更多信息，但以下内容应该可以解决问题：-

```
// The URI to launch
string uriToLaunch = @"http://www.example.com/test.pdf";
var uri = new Uri(uriToLaunch);

async void DefaultLaunch()
{
   // Launch the URI with a warning prompt
   var success = await Windows.System.Launcher.LaunchUriAsync(uri);    
} 
```

# c# - 将创建的类文件添加到项目

> ID：14621159
> 
> 赞同：1
> 
> 时间：2013-01-31T08:12:04.267
> 
> 标签：c#, visual-studio-2010

我有一个控制台应用程序，它从数据库为我构建了一些默认类。构建文件后，我希望能够刷新我的文件夹并在我的类库中查看新文件。

但是，无论我做什么，文件都不会显示，除非我进入并手动添加现有文件。VS2010有没有办法查看文件夹并将该文件夹中的任何内容添加到项目中？例如：

> 文件夹 > File1.cs、File2.cs、File3.cs、File4.cs

VS2010 看到

> 文件夹 > File1.cs

如何让 VS2010 显示这些新类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:18:14.883

您的问题是您只会看到 .csproj 文件中包含和引用的文件。总的来说，这是一件好事，因为它使您可以最终控制项目中考虑的内容或不考虑的内容。不过，这会给您带来问题，因为插入到您的项目目录中的创建文件没有被引用。正如您所提到的，您可以手动包含文件，但我知道您希望此过程是自动的。

**在我看来，解决这个问题的最佳方法是使用设计时 T4 模板**，而不是让项目创建文件。设计时 T4 模板是类似于 Razor 之前的 ASP.NET 视图的文件，允许在项目中生成代码。您可以访问您的数据库，格式化您的类，然后将 .cs 文件直接输出到您的项目中，而无需构建它。这非常方便，因为它使您可以根据输出捕获可能出现的编译时错误，而无需进行完整的构建。

[可以在此处找到有关使用 T4 的更多信息。](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)

[在这里可以找到一个很好的演练。](http://msdn.microsoft.com/en-us/library/vstudio/dd820614.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:15:11.410

1.  选择可以找到文件的项目
2.  在您的解决方案资源管理器顶部，您可以选择“显示所有文件”
3.  选择您的文件并包括

可以通过修改项目的 .csproj/vbproj 文件从另一个应用程序或脚本自动添加它们

```
 <Compile Include="My Project\MyClass.vb" /> 
```

这必须在正确的项目组中完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:29:47.297

没有亲自尝试过，但是您应该可以使用它来做到这一点..

首先使用应用程序的解决方案获取对项目的引用，然后使用 Visual Studio 自动化框架 (DTE)：

```
ProjectItems p = Project.ProjectItems;
p.AddFromFile("File1.cs"); 
```

取自：http: [//msdn.microsoft.com/en-us/library/envdte.projectitems.addfromfile.aspx](http://msdn.microsoft.com/en-us/library/envdte.projectitems.addfromfile.aspx) 我会进一步阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:15:31.800

我认为这不是直接可能的。您可以编写一个[模板文件 (t4)](http://msdn.microsoft.com/en-us/library/vstudio/dd820620.aspx)来创建您的 cs 文件，并在运行转换文件时将它们添加到项目中。

为了在构建之后/之前运行转换文件，您可以编写一个构建前/构建后事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T08:16:30.293

这将要求您创建一个 VS 加载项。您可以在[此处找到一个示例...](http://msdn.microsoft.com/en-us/library/ms228774.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T08:25:14.680

> 好的，所以我有一个控制台应用程序，它正在从数据库为我构建一些默认类。

你不能让这个应用程序把所有的类都写在一个文件中，`Proxy.cs`比如说`Entities.cs`. 然后每次重新生成文件并重建项目时，您都可以访问新类。

# tidesdk - TideSDK 添加 php 扩展

> ID：14621163
> 
> 赞同：1
> 
> 时间：2013-01-31T08:12:14.167
> 
> 标签：tidesdk

使用 TideSDK 时是否可以添加 php 扩展？我在 php 的“ext”文件夹中添加了 .dll 扩展名，并在 php.ini 中添加了它，但我仍然收到一个错误，它不知道我正在使用的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:51:32.550

目前这是不可能的，因为 Tidephp 目前只支持少数嵌入式插件。我们正在尝试升级到较新的 php，您能否提供有关您尝试添加的 php 插件的详细信息。

# node.js - 德比创建项目

> ID：14621165
> 
> 赞同：0
> 
> 时间：2013-01-31T08:12:27.253
> 
> 标签：node.js, npm, derbyjs

我在公司代理后面工作，当尝试创建一个新的 derbyjs 项目时，我收到它正在尝试安装依赖项的错误

这是错误的部分。

安装依赖项。这可能需要一点时间...

npm http GET [http://registry.npmjs.org/express/3.0.0beta4](http://registry.npmjs.org/express/3.0.0beta4)

npm 错误！错误：协议无效

npm 错误！在 Request.init (C:\Program Files\nodejs\node_modules\npm\node_modules\request\main.js:302:31)

npm 错误！在新请求 (C:\Program Files\nodejs\node_modules\npm\node_modules\request\main.js:103:8)

npm 错误！应要求（C:\Program Files\nodejs\node_modules\npm\node_modules\request\main.js:956:11）

npm 错误！在 RegClient.makeRequest (C:\Program Files\nodejs\node_modules\npm\node_modules\npm-registry-client\lib\req uest.js:199:13)

npm 错误！在 RegClient。(C:\Program Files\nodejs\node_modules\npm\node_modules\npm-registry-client\lib\request.js:116:17)

npm 错误！在 RetryOperation.attempt (C:\Program Files\nodejs\node_modules\npm\node_modules\retry\lib\retry_operation.js:56:8)

npm 错误！在 RegClient.regRequest [作为请求] (C:\Program Files\nodejs\node_modules\npm\node_modules\npm-registry-client\lib\request.js:113:13)

npm 错误！在 RegClient.get_ (C:\Program Files\nodejs\node_modules\npm\node_modules\npm-registry-client\lib\get.js:112:8)

npm 错误！在 RegClient。（C:\Program Files\nodejs\node_modules\npm\node_modules\npm-registry-client\lib\get.js:39:15）

npm 错误！在 Object.oncomplete (fs.js:297:15) npm ERR！如果您需要帮助，可以在以下位置报告此日志：npm ERR！ [http://github.com/isaacs/npm/issues](http://github.com/isaacs/npm/issues) npm 错误！或通过电子邮件发送至：npm ERR！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T06:55:44.687

这不是 derby 问题，而是 npm 问题。虽然很难猜测原因，但我认为它与您公司的网络设置有某种联系。

# scala - 联合类型作为特征的类型参数的绑定（scala）

> ID：14621168
> 
> 赞同：8
> 
> 时间：2013-01-31T08:12:45.497
> 
> 标签：scala

如何将特征的类型参数限制为一组不同的类型（例如，由联合类型绑定）？

作为一个具体的例子，我想`IntegralIndex[T]`在`T`must`Int`或`Long`.

我尝试了[关于联合类型的这个问题](https://stackoverflow.com/questions/3508077/does-scala-have-type-disjunction-union-types)的第一个答案：

```
sealed abstract class NumericIndex[T]
object NumericIndex {
  implicit object IntWitness extends NumericIndex[Int]
  implicit object LongWitness extends NumericIndex[Long]
}

trait IntegralIndex[T : NumericIndex] 
```

但这不起作用；我明白了`traits cannot have type parameters with context bounds `: ...' nor view bounds `<% ...'`

还有其他建议吗？诚然，我不理解关于联合类型的问题的其他解决方案，所以如果答案只是在那里使用不同的答案，或者甚至知道它无法完成，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T11:36:11.610

类型类方法可能是在这里完成您想要的最干净的方法，并且您的版本在正确的轨道上。它不能以其当前形式工作，因为上下文边界只是隐式参数的语法糖。例如以下特征定义：

```
trait IntegralIndex[T: NumericIndex] 
```

将被取消为这样的东西：

```
trait IntegralIndex[T](implicit num: NumericIndex[T]) 
```

但是特征没有构造函数，所以这不是有效的 Scala 语法。但是，您可以编写如下内容：

```
trait IntegralIndex[T] {
  implicit def num: NumericIndex[T]
} 
```

这样可以确保您无法创建 a `IntegralIndex[T]`，除非您有证据表明存在 的`NumericIndex`类型类的实例`T`。

现在，当您实施 时`IntegralIndex`，您可以编写：

```
case class MyIndex[T](whatever: String)(implicit val num: NumericIndex[T]) 
```

或者：

```
case class MyIndex[T: NumericIndex](whatever: String) {
  implicit val num = implicitly[NumericIndex[T]]
} 
```

现在，任何使用`MyIndex`.

# nagios - 为什么 Check_MK 服务将状态详细信息显示为空？

> ID：14621171
> 
> 赞同：0
> 
> 时间：2013-01-31T08:12:49.610
> 
> 标签：nagios, check-mk

我正在使用 Check_MK 版本 1.2.0p2。

在 Check_MK UI 上，我得到 (null) 作为服务 Check_MK 的状态详细信息。

这是更多说明的图像。 ![在此处输入图像描述](../Images/4c0150da56532757a0ef9a0c61e61888.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:13:47.450

只需删除该主机的预编译检查，然后是“check_mk -II”，然后是“check_mk -R”。那是为我做的！（我正在使用 OMD）

# scala - 使用 Slick 提升嵌入时，如何将提升类型更改回 Scala 类型？

> ID：14621172
> 
> 赞同：10
> 
> 时间：2013-01-31T08:12:54.980
> 
> 标签：scala, slick

使用提升嵌入时，如何在[Slick](http://slick.typesafe.com)中的查询中“取消提升”值？我希望'get'，'toLong'或类似的东西可以解决问题，但没有这样的运气。

以下代码无法编译：

```
 val userById = for {
     uid <- Parameters[Long]
     u <- Users if u.id === uid
  } yield u

  val userFirstNameById = for {
     uid <- Parameters[Long]
     u <- userById(uid)
     ---------------^
     // type mismatch;  found   : scala.slick.lifted.Column[Long]  required: Long
  } yield u.name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:03:50.050

你不能，有两个原因：

> 1）`val`这发生在编译时，没有`Long` 价值`uid`。`userById(uid)`将 a 绑定`Long uid`到编译时生成的准备好的语句，然后`.list`,`.first`等调用查询。
> 
> 2) 另一个问题是，一旦你`Parameter`对查询进行了化，组合就不再可能——这是一个可以追溯到 ScalaQuery 的限制。

您最好的选择是将`Parameter`化延迟到最终组合查询：

```
val forFooBars = for{
  f <- Foos
  b <- Bars if f.id is b.fooID
} yield(f,b)
val allByStatus = for{ id ~ active <- Parameters[(Long,Boolean)]
  (f,b) <- forFooBars if (f.id is id) && (b.active is active)
} yield(f,b)

def findAllByActive(id: Long, isActive: Boolean) = allByStatus(id, isActive).list 
```

无论如何，在您的示例中，您也可以这样做：

```
val byID = Users.createFinderBy(_.id) 
```

我知道让这种事情起作用的唯一方法是将查询包装`val`在 a 中`def`并传入一个运行时变量，这意味着 Slick 必须在每个请求上重新生成 sql，并且没有准备好的语句发送到底层 DBMS . 在某些情况下，您必须这样做，例如传入`List(1,2,3)`for `inList`。

```
def whenNothingElseWorks(id: Long) = {
  val userFirstNameById = for {u <- userById(id.bind)} yield u.name
} 
```

# ios - iOS：为什么我不能从全局块（方法之外）访问@property

> ID：14621176
> 
> 赞同：2
> 
> 时间：2013-01-31T08:13:01.307
> 
> 标签：ios, objective-c, properties, objective-c-blocks, block

我正在尝试创建一个可以通过任何方法使用的全局块。我希望这个块访问类的@properties。但是当我尝试这样做时，我得到“使用未声明的标识符自我”访问支持变量 _myVar 也不起作用。

为什么这不起作用？什么解决方法会给我一个可以从任何方法访问的块？谢谢。

一个例子：

```
@interface myClass()
@property (nonatomic,assign) BOOL subjectSex;
@end

@implementation

// these returns will get: use of undeclared identifier
int (^myBlock) = ^{

   if(self.subjectSex) return 1;  
   return (!_subjectSex);

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:47:37.560

您必须在实例方法中定义块。然后，您可以拥有一个所有方法都可以访问的静态块指针。当您将块分配给指针时，您必须复制它：

```
s_blockPtr = [block copy]; 
```

或者，您可以将 this 指针作为参数发送到块。它更容易理解，但可能需要更多的打字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T19:44:24.737

它与您使用的属性访问无关`self`。（您可以使用您可以毫无问题地访问的其他对象的属性。）`self`在该范围内不存在。`self`是*方法*中的隐式参数。由于您的块定义不在方法内，因此没有命名变量`self`（除非您定义了一个名为 的全局变量`self`，但这可能不是一个好主意）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T08:01:41.767

块什么都不是，它只是一个函数指针。如果你想访问块中的属性，你必须在属性中显式设置__block，即你必须告诉编译器这是一个块类型的属性。让我们看一下块的闭包：假设有两个线程 T1 和 T2

```
 //T1 Thread
    void fun(int (*funptr)(int a,int b))
    {
       funptr(2,3);  
    }

    //T2 Thread
    int add(int a,int b)
{
     return a+b;
}
//Main Thread

    fun(&add);
    printf("Hello"); 
```

从上面的代码中，假设主线程地址是 20004 并且执行具有地址 20006 的 fun 并且 fun 以函数指针作为参数指向线程 T2 在地址 20064 的另一个函数，这意味着从线程 T1 和 T2 进行上下文切换，而执行 T2 线程，函数不知道代码段中的全局变量，这就是为什么它们无法访问，因为它们在不同的线程中，这就是块在不同的线程上运行的原因。这就是解决。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-31T08:23:43.713

您可以通过声明块类型来访问块中的任何对象

```
 @property(nonatomic,retain) __block NSString *strName;

  dispatch_async(dispatch_get_current_queue(), ^(void)
   {
      self.strName= @"XYZ";
   }); 
```

# php - 在 WAMP 上集成 postgreSQL

> ID：14621181
> 
> 赞同：15
> 
> 时间：2013-01-31T08:13:15.127
> 
> 标签：php, postgresql, wamp, wampserver, postgresql-9.1

我刚刚在 Windows 7 上安装了 postgreSQL。我正在尝试将 postgreSQL 与 WAMP 服务器集成。为此，我在 httpd.conf 和 php.ini 文件中做了以下更改

1 LoadModule`c:/path`到`libpq.dll`in`httpd.conf`然后

2 `extension=php_mod_pgsql.dll`, `extension=php_pgsql.dll`-- 启用(remove ;) 在`php.ini`

如果我进行上述更改，则本地主机不起作用。

如果我做第二次更改本地主机工作但不加载`libpq.dll`.

我通过 php 脚本检查了 pgsql

```
<?php
 echo extension_loaded('pgsql') ? 'yes':'no';
 ?> 
```

脚本显示“是”，但 apache 未加载`libpq.dll`. 现在我应该怎么做才能将 postgreSQL 加载到 Apache2.2* (wamp)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-14T17:10:09.523

1.  安装[PostgreSQL](https://www.postgresql.org/download/)后，您需要从`libpq.dll`复制`wamp\bin\php\phpX.X.X`到 `wamp\bin\apache\Apache2.2*\bin`。并重新启动 Wampserver。
2.  [在此处](http://downloads.sourceforge.net/project/phppgadmin/phpPgAdmin%20%5Bstable%5D/phpPgAdmin-5.0/phpPgAdmin-5.0.3.zip?r=http://sourceforge.net/projects/phppgadmin/&ts=1317978463&use_mirror=space)下载**phpPgAdmin** 。
3.  解压**phpPgAdmin-5.1.zip**中的`C:\wamp\apps`所以路径为`C:\wamp\apps\phpPgAdmin-5.1`.
4.  创建一个名为`phppgadmin.conf`in的文件`C:\wamp\alias`。并复制粘贴以下内容：

    > ```
    > Alias /phppgadmin "C:/wamp/apps/phpPgAdmin-5.1/" 
    > 
    > <Directory "C:/wamp/apps/phpPgAdmin-5.1/">
    >     Options Indexes FollowSymLinks MultiViews
    >     AllowOverride all
    >         Order Deny,Allow
    >   Allow from all
    > </Directory> 
    > ```

5.  左键单击 Wampserver 托盘图标。导航到 PHP > PHP 扩展。然后启用这个

    > ```
    > a. php_pgsql 
    > b. php_pdo_pgsql extension. 
    > ```

6.  打开`C:\wamp\apps\phpPgAdmin-5.1\conf\config.inc.php`,

    一个。找到`$conf['servers'][0]['host'] = '';`对`$conf['servers'][0]['host'] = 'localhost';`
    b 的更改。找到`$conf['extra_login_security'] = true;`改变`true`_`false`

7.  重启所有服务

8.  转到`http://localhost/phppgadmin/`并尝试登录。

9.  默认登录凭据是

    *   用户名 = “postgres”
    *   密码=“根”

参考 ：

1.  [WAMP + PostgreSQL 集成](http://www.plaatsoft.nl/wamp-postgresql-integration/)
2.  [sourceforgenet phpPgAdmin 可下载用于带有 Wamp 的 Windows](http://downloads.sourceforge.net/project/phppgadmin/phpPgAdmin%20%5Bstable%5D/phpPgAdmin-5.0/phpPgAdmin-5.0.3.zip?r=http://sourceforge.net/projects/phppgadmin/&ts=1317978463&use_mirror=space)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-24T17:45:18.223

谢谢你。一旦我还在 phppgadmin.conf 文件中添加了“需要本地”，这些说明就起作用了：

```
Alias /phppgadmin "C:/wamp/apps/phpPgAdmin-5.1/" 

<Directory "C:/wamp/apps/phpPgAdmin-5.1/">
    Require local
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
  Allow from all
</Directory> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-22T14:44:48.670

不要忘记 WAMP 有两个`php.ini`文件。一个在 Apache 目录，一个在 php 目录 ( `bin\php\php5.X.X`)。Wampserver Tray 管理 Apache 目录中的一个。

为了能够运行 php cli 工具（例如`php artisan`），您需要取消注释in php 目录中的`php_pgsql`and 。`php_pdo_pgsql``php.ini`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-10T04:15:54.267

成功了，谢谢

```
Alias /phppgadmin "C:/wamp/apps/phpPgAdmin-5.1/" 

<Directory "C:/wamp/apps/phpPgAdmin-5.1/">
    Require local
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
  Allow from all
</Directory> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T12:49:16.273

可能最好的起点是使用[msdn 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)。看起来最简单的解决方法是在`%PATH%`系统范围内设置环境变量以包含 libpq.dll 的路径。

请注意，这`%PATH`是最后搜索的，因此如果将 libpq 放入系统目录或 Apache 目录，它将首先被捕获。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-19T08:09:02.503

1.  从 WAMP 图标启用 Postgresql 扩展后，我能够获得 postgresql 管理页面，但 `bin/cake bake all`命令失败并出现错误“php extn missing”。（参考下面@rails_id 的帖子来完成postgresql 与WAMP 的集成）

2.  在 cmd 提示符下检查`php -m`，不存在“ *postgresql* ”模块。

3.  进入 php 安装目录，在我的情况下它是“C:\wamp64\bin\php\php7.2.10”并在 php.ini 文件中启用（删除了 ;）以下 pg 模块：

    扩展=pdo_pgsql 扩展=pgsql

4.  重新启动了 wamp 服务。

5.  `bin/cake bake all`在命令提示符下工作正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-05T15:28:10.743

不知道你为什么要检查这个页面，但即使在尝试了以上所有内容并关注其他页面之后，只是因为你已经安装了 wamp .. 然后不要浪费你的时间。

结帐下面的链接 [https://bitnami.com/](https://bitnami.com/) 这使您可以轻松地与 postgreSQL 集成，无需 WAMP 服务器：b，

现在立即开始您的项目！

# php - 将带有关系的 Yii 模型导出到图表中

> ID：14621184
> 
> 赞同：1
> 
> 时间：2013-01-31T08:13:22.343
> 
> 标签：php, activerecord, frameworks, yii, models

我们必须在我们的 Yii 项目中创建所有 AR 模型的模式图，在我开始手动执行此操作之前，我想问你是否可能存在任何扩展。我很感激任何可以帮助节省几个小时的答案。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:09:46.400

如果您在表之间定义了匹配模型之间关系的外键[MySQL Workbench](http://www.mysql.com/products/workbench/)可以从当前架构生成架构图，希望对您有所帮助

为此，进入数据库 > 逆向工程

# android - 我们如何在同一 Activity 中添加多个 ListView？

> ID：14621194
> 
> 赞同：1
> 
> 时间：2013-01-31T08:14:06.327
> 
> 标签：android, listview, scrollview

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lyt_stats"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/plain_bg"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/lyt_statsheader"
        android:layout_width="match_parent"
        android:layout_height="42dip"
        android:background="@drawable/headerbar_stats"
        android:orientation="vertical" >

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/statsheader" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtworktcompltd"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="10dip"
            android:text="@string/workt_completed"
            android:textColor="@color/Black"
            android:textSize="22dip"
            android:textStyle="bold" />

        <ListView
            android:id="@+id/listViewwoktcompleted"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="5dip"
            android:layout_weight="1"
            android:background="@color/White"
            android:cacheColorHint="#00000000"
            android:listSelector="@android:color/transparent" />

        <TextView
            android:id="@+id/txtTotalworktTime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="5dip"
            android:text="@string/workttotal_time"
            android:textColor="@color/Black"
            android:textSize="22dip" />

        <TextView
            android:id="@+id/txtexcompltd"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="5dip"
            android:text="@string/ex_completed"
            android:textColor="@color/Black"
            android:textSize="22dip"
            android:textStyle="bold" />

        <ListView
            android:id="@+id/listViewexcompleted"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="5dip"
            android:layout_weight="1"
            android:background="@color/White"
            android:cacheColorHint="#00000000"
            android:minHeight="0dip" />

        <TextView
            android:id="@+id/txtTotalEx"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:text="@string/extotal"
            android:textColor="@color/Black"
            android:textSize="22dip" />

        <TextView
            android:id="@+id/txtweightloss"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:text="@string/txtweightlossed"
            android:textColor="@color/Black"
            android:textSize="22dip"
            android:textStyle="bold" />
    </LinearLayout>

</LinearLayout> 
```

我想在一个活动中显示两个列表视图，列表视图中的内容动态加载。我想在第二个列表视图下方添加更多组件。当我使用滚动视图时，每个列表视图中只能看到一行。不使用滚动视图可以看到列表视图中的所有内容..但是看不到第二个列表视图下面的组件..任何人都可以请帮我在一个活动中添加多个可扩展的列表视图？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:18:22.873

尝试将以下内容添加到您的 ScrollView：

```
android:fillViewport="true" 
```

# magento - SOLR 4.1 抛出：未知的提交参数“waitFlush”？

> ID：14621197
> 
> 赞同：3
> 
> 时间：2013-01-31T08:14:16.517
> 
> 标签：magento, solr, tomcat7

我正在运行 Magento EE 1.11，并且已经使用 tomcat7 部署了 SOLR 4.1。我复制了 Magento 提供的 solrconfig.xml 和 schema.xml 并修复了 SOLR 在这两个文件中遇到的所有问题，因为它们适用于 SOLR 3.6 并正确配置了 Magento。

现在，当我在最后一刻在 Magneto 中重新索引搜索时，SOLR 吐出了这个异常：

```
org.apache.solr.common.SolrException: Unknown commit parameter 'waitFlush' 
```

Magento 回复说需要重新索引搜索。有没有人遇到过这个问题？从我所做的所有谷歌搜索来看，似乎有一个补丁，但我在哪里以及如何应用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T00:40:20.537

您应该真正使用 SOLR 3.x 而不是 Magento EE 4。

这是配置和安装的演练。

## 在 Debian/Ubuntu 上

最简单的安装非常容易使用`tomcat`和你的包管理器。将自动满足依赖关系。

```
apt-get install tomcat6 
```

## 在 CentOS/RedHat 上

您需要获取一些替代回购以使这成为可能

例如。

```
rpm -Uvh http://download.fedoraproject.org/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm
rpm -Uhv http://apt.sw.be/redhat/el5/en/x86_64/rpmforge/RPMS/rpmforge-release-0.3.6-1.el5.rf.x86_64.rpm
rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm 
```

然后你可以从安装包`yum`

```
yum install yum-priorities ant tomcat6 tomcat6-admin

cd /usr/src/
mkdir sun-java
cd sun-java 
```

现在它变得有点棘手。Sun 曾经允许直接下载；但他们现在有一个愚蠢的会话验证 - 所以通过你的电脑下载二进制文件并将其上传到机器上。

您需要 Linux JDK 和 JRE。

命令将是：

```
wget -O jdk.rpm.bin http://download.oracle.com/otn-pub/java/jdk/6u29-b11/jdk-6u29-linux-x64-rpm.bin
wget -O jre.rpm.bin http://download.oracle.com/otn-pub/java/jdk/6u29-b11/jre-6u29-linux-x64-rpm.bin 
```

您也可以使用 OpenJDK

```
wget http://jpackage.org/jpackage50.repo -O /etc/yum.repos.d/jpackage50.repo
yum install -y java-1.6.0-openjdk 
```

上传二进制文件后

```
chmod +x *.bin
./jre.rpm.bin
./jdk.rpm.bin
ln -s /var/lib/tomcat6 /usr/share/tomcat6 
```

## 然后剩下的步骤

然后放入您各自选择的`solr`

```
mkdir /usr/src/solr
cd /usr/src/solr
wget http://mirrors.ukfast.co.uk/sites/ftp.apache.org/lucene/solr/3.6.1/apache-solr-3.6.1.tgz
tar xvfz apache-solr-3.6.1.tgz
cd apache-solr-3.6.1
cp dist/apache-solr-*.war /var/lib/tomcat6/webapps/solr.war
mkdir -p /var/lib/tomcat6/solr 
```

然后添加 Magento`solr`配置

```
INSTALL_DIR="/var/lib/tomcat6/solr"
touch $INSTALL_DIR/solr.xml
CORES=( "staging" "development" "live" )
for CORE in "${CORES[@]}"; do
  mkdir -p $INSTALL_DIR/$CORE/conf $INSTALL_DIR/$CORE/data 
  cp -par /usr/src/solr/apache-solr-3.6.1/example/solr/conf/* $INSTALL_DIR/$CORE/conf
  cp -par /home/path/public_html/lib/Apache/Solr/Conf/* $INSTALL_DIR/$CORE/conf
done 
```

然后设置核心

```
cat > /var/lib/tomcat6/solr/solr.xml << EOF
<?xml version="1.0" encoding="UTF-8" ?>
<solr persistent="true" sharedLib="lib">
  <cores adminPath="/admin/cores">
    <core name="staging" instanceDir="staging" config="solrconfig.xml" schema="schema.xml" />
    <core name="development" instanceDir="development" config="solrconfig.xml" schema="schema.xml" />
    <core name="live" instanceDir="live" config="solrconfig.xml" schema="schema.xml" />
  </cores>
</solr>
EOF 
```

然后最后，清理权限并重新启动`solr`

```
chown -R tomcat6:tomcat6 /var/lib/tomcat6/solr
/etc/init.d/tomcat6 restart 
```

然后在 Magento 中，您现在有 3 个可能的独立内核可用于您的商店环境。

*   `staging/solr`
*   `development/solr`
*   `live/solr`

*署名： http: [//www.sonassi.com/knowledge-base/multiple-solr-cores-for-magento-on-debianubuntucentosredhat/](http://www.sonassi.com/knowledge-base/multiple-solr-cores-for-magento-on-debianubuntucentosredhat/)*

# c# - Asp.net CMS 网站中的强制 GC.Collect

> ID：14621198
> 
> 赞同：0
> 
> 时间：2013-01-31T08:14:20.440
> 
> 标签：c#, asp.net, .net, performance, iis-7

这是这种情况

我正在开发一个**内容管理系统**，我们有两个部分，首先是管理员端，管理员用户可以在其中填写内容，第二部分是用户端，用户可以从管理面板查看管理员提供的内容。

如果用户正在浏览我的网站，他只访问那些只做一件事的页面，他们根据页面从数据库中提取内容并将该内容显示给用户。

问题是当我在本地 IIS 中运行我的网站并浏览它一段时间并跟踪 IIS 工作进程 (w3wp.exe) 的内存使用情况时，峰值使用量显示为**109,292 K。**

所以为了解决这个问题，我把这段代码放在我的**global.asax**文件中

```
void Application_EndRequest(object sender, EventArgs e)
{
  GC.Collect(0, GCCollectionMode.Forced);
  GC.Collect(1, GCCollectionMode.Forced);
  GC.Collect(2, GCCollectionMode.Forced);
} 
```

在此之后，使用量在峰值使用量下降到**75,980 K。**

问题是**我在这里做对了吗？**因为我读了很多文章说我不应该这样做`GC.Collect`。

**更新** 在实际环境中，这是没有任何情况的情况`GC.Collect()`

![在此处输入图像描述](../Images/ba0d1c194ac3b2c39809e231df40a569.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:36:54.223

你确定这是一个*实际*问题吗？您是否尝试过多个并发访问并发现您有内存问题？

100MB 的内存不是很多，所以垃圾收集器不会理会它。如果您的进程需要更多内存，垃圾收集器将开始工作。

您几乎不需要执行强制垃圾回收，大多数时候您会弊大于利。这是其中之一——你在内存消耗方面做的很少，但另一方面你的性能会受到影响——垃圾收集的成本很高，每次请求完成时你都会运行一个。

所以简而言之，放弃强制垃圾回收，只有当你看到有实际问题时才担心它。

# android - 谷歌地图 当前位置 气球叠加

> ID：14621200
> 
> 赞同：1
> 
> 时间：2013-01-31T08:14:22.313
> 
> 标签：android, overlay, currentlocation, popup-balloons

我正在创建谷歌地图当前位置气球覆盖。

我使用[android-mapviewballoons](https://github.com/donnfelker/android-mapviewballoons)这段代码来显示气球。

此处当前位置显示正在工作。当我点击标记时，会出现错误（BalloonOverlayView 49,37 行和 BalloonItemizedOverlay 86,179,76 行）。

我知道错误在哪里，但我不明白那部分，请帮助我

这是 LogCat 错误

```
 01-31 09:27:46.278: E/AndroidRuntime(4704): FATAL EXCEPTION: main
 01-31 09:27:46.278: E/AndroidRuntime(4704): android.view.InflateException: Binary XML file line #28: Error inflating class <unknown>
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at   android.view.LayoutInflater.inflate(LayoutInflater.java:489)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.sygnet.locationingooglemap.BalloonOverlayView.setupView(BalloonOverlayView.java:49)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.sygnet.locationingooglemap.BalloonOverlayView.<init>(BalloonOverlayView.java:37)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.sygnet.locationingooglemap.BalloonItemizedOverlay.createBalloonOverlayView(BalloonItemizedOverlay.java:86)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.sygnet.locationingooglemap.BalloonItemizedOverlay.createAndDisplayBalloonOverlay(BalloonItemizedOverlay.java:179)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.sygnet.locationingooglemap.BalloonItemizedOverlay.onTap(BalloonItemizedOverlay.java:76)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:358)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:562)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.google.android.maps.MapView.onTouchEvent(MapView.java:685)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.View.dispatchTouchEvent(View.java:7239)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
01-31 09:27:46.278: E/AndroidRuntime(4704):     at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
  01-31 09:27:46.278: E/AndroidRuntime(4704):   at android.view.View.dispatchPointerEvent(View.java:7419)
  01-31 09:27:46.278: E/AndroidRuntime(4704):   at an droid.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
  01-31 09:27:46.278: E/AndroidRuntime(4704):   at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.os.MessageQueue.nativePollOnce(Native Method)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.os.MessageQueue.next(MessageQueue.java:125)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at     android.os.Looper.loop(Looper.java:124)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at android.app.ActivityThread.main(ActivityThread.java:5039)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at java.lang.reflect.Method.invokeNative(Native Method)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at java.lang.reflect.Method.invoke(Method.java:511)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at dalvik.system.NativeStart.main(Native Method)
 01-31 09:27:46.278: E/AndroidRuntime(4704): Caused by: java.lang.reflect.InvocationTargetException
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at java.lang.reflect.Constructor.constructNative(Native Method)
 01-31 09:27:46.278: E/AndroidRuntime(4704):    at java.lang.reflect.Constructor.ne 
```

这是 BalloonItemizedOverlay.java

```
public abstract class BalloonItemizedOverlay<Item extends OverlayItem> extends ItemizedOverlay<Item> {

private static final long BALLOON_INFLATION_TIME = 300;
private static Handler handler = new Handler();

private MapView mapView;
private BalloonOverlayView<Item> balloonView;
private View clickRegion;
private View closeRegion;
private int viewOffset;
final MapController mc;
private Item currentFocusedItem;
private int currentFocusedIndex;

private boolean showClose = true;
private boolean showDisclosure = false;
private boolean snapToCenter = true;
private static boolean isInflating = false;

public BalloonItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(defaultMarker);
    this.mapView = mapView;
    viewOffset = 0;
    mc = mapView.getController();
}

public void setBalloonBottomOffset(int pixels) {
    viewOffset = pixels;
}
public int getBalloonBottomOffset() {
    return viewOffset;
}

protected boolean onBalloonTap(int index, Item item) {
    return false;
}

protected void onBalloonOpen(int index) {}

@Override
public final boolean onTap(int index) {

    handler.removeCallbacks(finishBalloonInflation);
    isInflating = true;
    handler.postDelayed(finishBalloonInflation, BALLOON_INFLATION_TIME);

    currentFocusedIndex = index;
    currentFocusedItem = createItem(index);
    setLastFocusedIndex(index);

    onBalloonOpen(index);
    createAndDisplayBalloonOverlay();

    if (snapToCenter) {
        mc.animateTo(currentFocusedItem.getPoint());
    }

    return true;
}

protected BalloonOverlayView<Item> createBalloonOverlayView() {
    return new BalloonOverlayView<Item>(getMapView().getContext(), getBalloonBottomOffset());
}

protected MapView getMapView() {
    return mapView;
}

public void hideBalloon() {
    if (balloonView != null) {
        balloonView.setVisibility(View.GONE);
    }
    currentFocusedItem = null;
}

private void hideOtherBalloons(List<Overlay> overlays) {

    for (Overlay overlay : overlays) {
        if (overlay instanceof BalloonItemizedOverlay<?> && overlay != this) {
            ((BalloonItemizedOverlay<?>) overlay).hideBalloon();
        }
    }       
}

public void hideAllBalloons() {
    if (!isInflating) {
        List<Overlay> mapOverlays = mapView.getOverlays();
        if (mapOverlays.size() > 1) {
            hideOtherBalloons(mapOverlays);
        }
        hideBalloon();
    }
}

private OnTouchListener createBalloonTouchListener() {
    return new OnTouchListener() {

        float startX;
        float startY;

        public boolean onTouch(View v, MotionEvent event) {

            View l =  ((View) v.getParent()).findViewById(R.id.balloon_main_layout);
            Drawable d = l.getBackground();

            //Event Action Down
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                int[] states = {android.R.attr.state_pressed};
                if (d.setState(states)) {
                    d.invalidateSelf();
                }
                startX = event.getX();
                startY = event.getY();
                return true;
            } 

            //Event Action Up
            else if (event.getAction() == MotionEvent.ACTION_UP) {
                int newStates[] = {};
                if (d.setState(newStates)) {
                    d.invalidateSelf();
                }
                if (Math.abs(startX - event.getX()) < 40 && Math.abs(startY - event.getY()) < 40 ) {
                    // call overridden method
                    onBalloonTap(currentFocusedIndex, currentFocusedItem);
                }
                return true;
            } else {
                return false;
            }               
        }
    };
}

@Override
public Item getFocus() {
    return currentFocusedItem;
}

@Override
public void setFocus(Item item) {
    super.setFocus(item);   
    currentFocusedIndex = getLastFocusedIndex();
    currentFocusedItem = item;
    if (currentFocusedItem == null) {
        hideBalloon();
    } else {
        createAndDisplayBalloonOverlay();
    }   
}

private boolean createAndDisplayBalloonOverlay(){
    boolean isRecycled;
    if (balloonView == null) {
        balloonView = createBalloonOverlayView();
        clickRegion = (View) balloonView.findViewById(R.id.balloon_inner_layout);

        clickRegion.setOnTouchListener(createBalloonTouchListener());
        closeRegion = (View) balloonView.findViewById(R.id.balloon_close);
        if (closeRegion != null) {
            if (!showClose) {
                closeRegion.setVisibility(View.GONE);
            } else {
                closeRegion.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        hideBalloon();  
                    }
                });
            }
        }

        if (showDisclosure && !showClose) {
            View v = balloonView.findViewById(R.id.balloon_disclosure);
            if (v != null) {
                v.setVisibility(View.VISIBLE);
            }
        }
        isRecycled = false;
    } 
    else {
        isRecycled = true;
    }

    balloonView.setVisibility(View.GONE);

    List<Overlay> mapOverlays = mapView.getOverlays();
    if (mapOverlays.size() > 1) {
        hideOtherBalloons(mapOverlays);
    }

    if (currentFocusedItem != null)
        balloonView.setData(currentFocusedItem);

    GeoPoint point = currentFocusedItem.getPoint();
    MapView.LayoutParams params = new MapView.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, point,
            MapView.LayoutParams.BOTTOM_CENTER);
    params.mode = MapView.LayoutParams.MODE_MAP;

    balloonView.setVisibility(View.VISIBLE);

    if (isRecycled) {
        balloonView.setLayoutParams(params);
    } 
    else {
        mapView.addView(balloonView, params);
    }

    return isRecycled;
} 

public void setShowClose(boolean showClose) {
    this.showClose = showClose;
}

public void setShowDisclosure(boolean showDisclosure) {
    this.showDisclosure = showDisclosure;
}

public void setSnapToCenter(boolean snapToCenter) {
    this.snapToCenter = snapToCenter;
}

public static boolean isInflating() {
    return isInflating;
}

private static Runnable finishBalloonInflation = new Runnable() {
    public void run() {
        isInflating = false;
    }
};
} 
```

这是 BalloonOverlayView.java

```
public class BalloonOverlayView<Item extends OverlayItem> extends FrameLayout  {

private LinearLayout layout;
private TextView title;
MainActivity main;
//  private CharSequence tvLocation;

public BalloonOverlayView(Context context, int balloonBottomOffset) {

    super(context);

    setPadding(10, 0, 10, balloonBottomOffset);

    layout = new LimitLinearLayout(context);
    layout.setVisibility(VISIBLE);

    setupView(context, layout);

    FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.gravity = Gravity.NO_GRAVITY;

    addView(layout, params);
}

protected void setupView(Context context, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.balloon_overlay, parent);
    title = (TextView) v.findViewById(R.id.balloon_item_title);

//      title.setText(tvLocation);
}

public void setData(Item item) {
    layout.setVisibility(VISIBLE);
    setBalloonData(item, layout);
}

protected void setBalloonData(Item item, ViewGroup parent) {
    if (item.getTitle() != null) {
        title.setVisibility(VISIBLE);
        title.setText(item.getTitle());
    } else {
        title.setText("");
        title.setVisibility(GONE);
    }
}

private class LimitLinearLayout extends LinearLayout {

    private static final int MAX_WIDTH_DP = 280;

    final float SCALE = getContext().getResources().getDisplayMetrics().density;

    public LimitLinearLayout(Context context) {
        super(context);
    }

    public LimitLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int mode = MeasureSpec.getMode(widthMeasureSpec);
        int measuredWidth = MeasureSpec.getSize(widthMeasureSpec);
        int adjustedMaxWidth = (int)(MAX_WIDTH_DP * SCALE + 0.5f);
        int adjustedWidth = Math.min(measuredWidth, adjustedMaxWidth);
        int adjustedWidthMeasureSpec = MeasureSpec.makeMeasureSpec(adjustedWidth, mode);
        super.onMeasure(adjustedWidthMeasureSpec, heightMeasureSpec);
    }
}
 } 
```

# java - COMM API 安装出错：nblibraries.properties 文件不存在

> ID：14621204
> 
> 赞同：1
> 
> 时间：2013-01-31T08:14:29.960
> 
> 标签：java, netbeans, serial-port, properties-file

我正在尝试运行此示例代码，它从这里查询可用的 com 端口：[http ://www.java2s.com/Code/Java/Development-Class/QueryingAvailableCOMPorts.htm](http://www.java2s.com/Code/Java/Development-Class/QueryingAvailableCOMPorts.htm)

```
// Install the Java Comm API first. if there is no necessary file, say Dll files, the API 
// won't work.

import java.util.Enumeration;

import javax.comm.*;
import java.util.Enumeration;

public class ListPorts {
  public static void main(String args[]) {
    Enumeration ports = CommPortIdentifier.getPortIdentifiers();
    while (ports.hasMoreElements()) {
      CommPortIdentifier port = (CommPortIdentifier) ports.nextElement();
      String type;
      switch (port.getPortType()) {
      case CommPortIdentifier.PORT_PARALLEL:
        type = "Parallel";
        break;
      case CommPortIdentifier.PORT_SERIAL:
        type = "Serial";
        break;
      default: /// Shouldn't happen
        type = "Unknown";
        break;
      }
      System.out.println(port.getName() + ": " + type);
    }
  }
} 
```

我将 comm api 正确添加到我的项目中，我可以在项目的 Libraries 文件夹下看到我的 comm.jar 文件。但是当我构建项目时，netbeans 给了我这个消息：

> ant -f C:\Users\Timur\Documents\NetBeansProjects\KEYCON clean jar C:\Users\Timur\Documents\NetBeansProjects\KEYCON\nbproject\build-impl.xml:63：源资源不存在：C:\Users \Timur\Desktop\javax.comm\nblibraries.properties 构建失败（总时间：0 秒）

当我尝试运行项目时，Netbeans 给出了这个消息：

> 运行：加载win32com时出错：java.lang.UnsatisfiedLinkError：java.library.path中没有win32com BUILD SUCCESSFUL（总时间：0秒）

我应该将我的 comm.jar 文件专门存储在某个地方吗？它现在在我的桌面上。还是因为其他原因而出现问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:01:14.097

这个社区没有回答我的另一个问题：/

我又自己写了答案。所以这里是：

但问题是我在这里写的内容对于本网站或其他网站上的类似问题通常是相同的解决方案，但我最初没有解决 8-9 次。

> 要让 jdk（Java 开发工具包）识别您机器上的串行端口，将这些文件正确放置在本地机器上的正确文件夹中很重要：
> 
> %Java_HOME% = 你的 jdk 目录的位置。
> 
> 要查找您的 JDK 目录，请使用以下步骤：
> 
> 1.  点击开始
> 2.  点击搜索
> 3.  点击文件或文件夹...</li>
> 4.  在左侧，单击所有文件和文件夹
> 5.  在 All or part of the file name 下的文本框中输入 jdk*：
> 6.  点击搜索
> 7.  寻找看起来像文件夹的黄色图标
> 8.  双击文件夹打开jdk文件夹
> 
> comm.jar 应该放在：
> 
> ```
> %JAVA_HOME%/lib
> 
> %JAVA_HOME%/jre/lib/ext win32com.dll should be placed in:
> 
> %JAVA_HOME%/bin
> 
> %JAVA_HOME%/jre/bin
> 
> %windir%System32 javax.comm.properties should be placed in:
> 
> %JAVA_HOME%/lib
> 
> %JAVA_HOME%/jre/lib 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-04T06:44:39.780

原因之一是，当您安装**新的 Netbeans**并打开一个引用**自定义库**的项目时，可能会出现此问题。我有同样的问题，我通过创建一个客户库来解决

创建库

1.  选择工具 > 库以打开库管理器。
2.  单击按钮 Add JAR/Folder 并浏览到 ImageGear for Java 安装目录中的 lib 文件夹。全选 *。
3.  单击添加 JAR/文件夹以接受您选择的 JAR 文件。然后在 Library Manager 中，单击 OK 退出。

它将创建 nblibraries.properties 文件并且问题将得到解决。现在您只需提供参考 .jars

注意：你可能有不同的问题，但如果问题和我一样，你可以试试这个方法。

# java - 使用 Robolectric，如何测试通过 POST *request* 发送的 JSON 值

> ID：14621209
> 
> 赞同：2
> 
> 时间：2013-01-31T08:15:01.743
> 
> 标签：java, android, testing, apache-commons-httpclient, robolectric

在我的应用程序中，我将在 POST 请求中向服务器发送 JSON。

我想测试以确保我发送了正确的值。

由于我使用的是 Robolectric，我的结论是我应该获取发送到 FakeHttpLayer的**请求，提取 JSON，并测试它是否符合我的期望。**

听起来很简单，但我花了很长时间弄清楚如何查看我发布的 JSON。

我的代码模糊地看起来像这样：

```
HttpClient client = new DefaultHttpClient();
HttpResponse response;
JSONObject json = new JSONObject();
try{
    HttpPost post = new HttpPost("http://google.com");
    json.put("blah", "blah");
    StringEntity se = new StringEntity( "JSON: " + json.toString());
    se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    post.setEntity(se);
    response = client.execute(post);
} catch(Exception e){
  e.printStackTrace();
} 
```

我想要一些类似的东西

```
assertTrue(myRequestJSON.matches("blah")); 
```

但我似乎无法使用里面的任何东西来获得它

```
Robolectric.getFakeHttpLayer().getLastSentHttpRequestInfo(); 
```

...或任何其他变体。

帮助？

顺便说一句，如果您认为我的测试方法被误导，我当然愿意以不同的方式思考这个问题。

谢谢！

编辑：我意识到我的虚拟代码中有“myResponseJSON”而不是“myRequestJSON”，这可能使它不清楚 - 已修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:53:12.033

我之前的解决方案完全错了。你可以很简单地做到这一点，它会出现。我在 Robolectric 示例代码中找到了解决方案（可以预见）：

```
HttpPost sentHttpRequest = (HttpPost) Robolectric.getSentHttpRequest(0);
StringEntity entity = (StringEntity) sentHttpRequest.getEntity();
String sentPostBody = fromStream(entity.getContent());
assertThat(sentPostBody, equalTo("a post body"));
assertThat(entity.getContentType().getValue(), equalTo("text/plain; charset=UTF-8")); 
```

（从[这里](https://github.com/pivotal/RobolectricSample/blob/master/src/test/java/com/pivotallabs/api/HttpTest.java)）

# windows - 仅知道驱动器号确定驱动器是否可移动（闪存或 HDD）

> ID：14621211
> 
> 赞同：1
> 
> 时间：2013-01-31T08:15:12.187
> 
> 标签：windows, model-view-controller, drive

我正在尝试确定文件是否在本地驱动器上。我找到了检索驱动器类型的[GetDriveType() WINAPI 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364939%28v=vs.85%29.aspx)然而，阅读返回值的描述似乎，这就是我的理解，它检索闪存驱动器为 FIXED，这不是我想要的。

它在本地驱动器上工作正常：

```
bool IsDriveRemovableOrRemote(CString driveRoot)
{
    UINT driveType = GetDriveType(driveRoot);
    return (DRIVE_REMOVABLE == driveType || DRIVE_CDROM == driveType || DRIVE_NO_ROOT_DIR == driveType || DRIVE_REMOTE == driveType);
} 
```

我没有闪存/外部驱动器来测试 ATM，但我想知道是否有人能告诉我我的解释是否正确？如果是这样，我应该使用什么更好的选择？

请记住，我只有文件的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:19:29.987

您应该更仔细地阅读 doco。虽然闪存驱动器被视为固定设备，但该链接页面中有一条注释：

> 要确定驱动器是否为 USB 类型驱动器，请调用 SetupDiGetDeviceRegistryProperty 并指定 SPDRP_REMOVAL_POLICY 属性。

如果你从路径开始，这个过程似乎有点混乱，但你可以从[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ff541247%28v=vs.85%29.aspx)开始阅读文档。看起来您可能需要枚举设备，直到找到与您的驱动器匹配的设备。

为避免对您的所有请求执行此操作，我将进行两阶段检查。如果您当前的方法说它不固定，请将其视为非本地方法。

如果它说它*是*固定的，那么您可以使用我建议的方法枚举设备以确定。

或者，您可以在第一次需要时枚举所有固定的非 USB 驱动器，然后只缓存信息。我很确定这些驱动器的列表在系统运行时不会改变 - 根据定义，被添加和删除的驱动器是可移动的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:30:32.063

您可以尝试使用[DeviceIoControl](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216%28v=vs.85%29.aspx)`BusType = BusTypeUsb`并通过`IOCTL_STORAGE_QUERY_PROPERTY`作为其第二个参数传递来查询。阅读[页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364939%28v=vs.85%29.aspx)底部 Thomas Lee 的《**确定 USB** 》 。

# selenium - 处理 Windows 身份验证弹出窗口

> ID：14621212
> 
> 赞同：1
> 
> 时间：2013-01-31T08:15:12.833
> 
> 标签：selenium, selenium-webdriver, autoit

下面是我用于处理 Windows 身份验证弹出的 AutoIt 脚本 (UI3_Authentication.au3)。

```
AutoItSetOption("WinTitleMatchMode","2")  
WinWait("Authentication Required")   
$title = WinGetTitle("Authentication Required") ; retrives whole window title   
$UN=WinGetText($title,"User Name:")  
ControlSend($title,"",$UN,"test");Sets Username  
$PWD=WinGetText($title,"Password:")  
Send("{TAB 1}")  
ControlSend($title,"",$PWD,"test1234");Sets PWD  
Send("{ENTER}") 
```

* * *

下面是我对上述 AutoIt exe 文件的 Selenium 代码调用。

```
package tests;

import java.io.IOException;  
import org.openqa.selenium.WebDriver;  
import org.openqa.selenium.firefox.FirefoxDriver;  

public class Handling_Windows_Based_Prompt {

public static void main(String[] args) throws IOException{  
WebDriver c1 = new FirefoxDriver();  
c1.get(“http://www.test.com”);  
        Runtime.getRuntime().exec("C:\\POM_Newdemo\\EF_Automation_Demo\\UI3_Authentication.exe");

}  
} 
```

* * *

当我运行上面的 Selenium 文件时，它会打开页面并弹出身份验证。但它没有插入用户名和密码；它改为等待用户输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:49:16.540

我解决了这个问题。其实，这是我的错。以前，我的代码是这样的：

```
c1.get(“http://www.test.com”);  
    Runtime.getRuntime().exec("C:\\POM_Newdemo\\EF_Automation_Demo\\UI3_Authentication.exe"); 
```

* * *

我在 get() 之前添加了 autoit 代码，如下所示，它起作用了：

```
Runtime.getRuntime().exec("C:\\POM_Newdemo\\EF_Automation_Demo\\UI3_Authentication.exe");
c1.get(“http://www.test.com”); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T10:21:13.010

这适用于我的 ChromeDriver。希望它会有所帮助

```
WinWait("data:, - Google Chrome","","10") ; this is the name of the window, according to AUTOIT v3 window info
If WinExists("data:, - Google Chrome","") Then
WinActivate("data:, - Google Chrome") ; set control to the window for proxy authentication
Send("putUsernameHere{TAB}") ; send username and press TAB
WinActivate("data:, - Google Chrome") ; again set control to our window, in case that we have clicked somewhere else
Send("putPasswordHere{ENTER}") ; send the password and press enter
EndIf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-16T14:28:05.310

我遇到了同样的问题。如果 AutoIt 在“开放”桌面上运行，它可以很好地与 selenium 配合使用。如果我使用带有打开会话的虚拟机（查看正在发生的事情），即使最小化，它也可以正常工作，但是如果我关闭远程桌面（会话结束），AutoIt 脚本会显示成功但什么也不做。

“解决方案”是通过将虚拟机与 TightVNC 连接来保持虚拟机“开放”。即使关闭窗口，VNC 也会保持登录状态，并且 AutoIt 可以正常工作。

希望这些信息对您有所帮助。它不是一个解决方案，但也许你可以解决它。

# java - 在一行中匹配多个模式

> ID：14621214
> 
> 赞同：2
> 
> 时间：2013-01-31T08:15:15.343
> 
> 标签：java, regex

有人可以告诉我为什么我的模式：`<p(\s+(.*)?)?>(.[^</p>]*)?</p>`不能正常工作。示例匹配：

> 1.  `<p>This is a test and anything can be here even other <tags>tags</tags></p>`
> 2.  `<p style="test">This is a test</p>`
> 3.  `<p></p>`

如果以上都在一行上，它应该找到 3 个单独的模式。下面的链接展示了它的真实行为，这很奇怪......

[http://regexr.com?33jrn](http://regexr.com?33jrn)

它找到的匹配项应始终在找到时立即开始，并在找到`<p`时立即停止`</p>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:29:53.800

您的正则表达式存在一些问题。让我们看看它们长什么样。

这是你的正则表达式： -

```
<p(\s+(.*)?)?>(.[^</p>]*)?</p> 
```

*   **问题 1： -**注意模式`(.*)?`。它没有按照你的想法做。这不是对`*`量词强制执行不情愿的行为。`(?)`相反，它是对贪婪量词的强制可选`*`量词。它只是意味着匹配`0 or 1`重复`(.*)`。为了让它不情愿，您需要`?`在支架内移动。因此，您需要使用`(.*?)`而不是`(.*)?`.
*   **问题2： -** `[^</p>]`不是否定`</p>`而是否定 -`<, /, p, >`作为单独的字符。请注意，在字符类中，每个字符都是按字面意思理解的。里面没有分组。所以，`(.[^</p>]*)`意味着匹配一个`character`if 后面不跟`0 or more repetition`of 中的任何一个`[</p>]`。那不是你想要的。如果你想匹配一个不是 的序列`</p>`，那么你可以像这样使用否定的前瞻： - `((?!</p>).)*`。现在这将首先检查以下序列是否不是`</p>`，然后匹配下一个字符。

所以，你的正则表达式模式应该是： -

```
<p(\s+(.*?))?>((?!</p>).)*</p> 
```

或者，您甚至可以将您的正则表达式简化为： -

```
<p[^>]*>((?!</p>).)*</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:24:50.037

试试这个：

```
<p.*?>.*?</p> 
```

请在此页面上阅读关于贪婪和不情愿的内容：“[贪婪、不情愿和占有量词之间的区别](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:25:36.717

问题出在 中`(.[^</p>]*)?`，这意味着：

*   一个字符
*   后跟任何 char n 次，但不是 a `<`，既不是 a `/`，也不是 a`p`和也不是 a`>`

我猜你的意思*不是`</p>`字符串 n times*，但这不是这样做的方法。

尝试使用`.*?`：`<p(\s+(.*)?)?>.*?</p>`.

while`.*`表示*匹配最长的字符串*，`.*?`表示*匹配最短的字符串*。

例如，对于字符串`#foo#bar#`，`.*`将匹配`#foo#bar#`而`.*?`将匹配`#foo#`。

# unicode - cygwin下编译wmain

> ID：14621220
> 
> 赞同：1
> 
> 时间：2013-01-31T08:15:40.427
> 
> 标签：unicode, g++, cygwin, main

我正在尝试使用以下主要定义编译 c++ 代码：

```
int wmain(int argc, wchar_t** argv) 
```

我可以使用 Visual Studio 正确编译它，但 g++ 失败并显示以下错误消息：

```
g++ -municode -o l1bCorrector AappL1bCorrector/l1bCorrector.o -L/usr/local/lib -Wl,-Bstatic -lboost_system-mt -lboost_filesystem-mt -lScanexUtilities -Wl,-Bdynamic
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../libcygwin.a(libcmain.o): In function `main':
/usr/src/debug/cygwin-1.7.17-1/winsup/cygwin/lib/libcmain.c:39: undefined reference to `_WinMain@16' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:24:04.703

GCC 不支持`wmain`（甚至是 mingw GCC，我希望它在这方面是最好的）。

如果您需要 unicode 命令行参数作为数组，您可以使用`CommandLineToArgvW`.`GetCommandLineW`

# javascript - jquery 代码片段中需要一个小的更正。. 连同一个小查询

> ID：14621221
> 
> 赞同：0
> 
> 时间：2013-01-31T08:15:47.123
> 
> 标签：javascript, jquery

有这个小提琴没有给我想要的输出

[http://jsfiddle.net/8FXFE/1/](http://jsfiddle.net/8FXFE/1/)

jquery代码

```
$(document).ready(function () {
console.log("parsed");
$("input[name='txtNumber']").change(function () {
    console.log("changed");
    if ($("input[name='txtNumber']:checked").val() == '100') $("#output").text("Changed to 100");
    else if ($("input[name='txtNumber']:checked").val() == '200') $("#output").text("Changed to 200");
    else if ($("input[name='txtNumber']:checked").val() == '500') $("#output").text("Changed to 500");
    else if ($("input[name='txtNumber']:checked").val() == '1000') $("#output").text("Changed to 1000");
    else if ($("input[name='txtNumber']:checked").val() == '10000') $("#output").text("Changed to 10000");
    else($("input[name='txtNumber']:checked").val() == 'other')
    $("#output").text("Changed to Other");
});
}); 
```

所需的输出是它应显示单击了哪个单选按钮

我还有一个问题？

1.  这条线是什么意思？？

    ```
    console.log("parsed"); 
    ```

提前感谢您的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:25:05.357

[switch 块](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)可以简化你过于复杂的 if-else块

```
$(document).ready(function () {
    $("input[name=txtNumber]").change(function () {
        switch($(this).val()) {
            case '100': $("#output").text("Changed to 100"); break;
            case '200': // and so on...
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:19:13.393

### 你忘记了`if`，`else if`只是写了`else (condition)`

```
$(document).ready(function () {
console.log("parsed");
$("input[name='txtNumber']").change(function () {
    console.log("changed");
    if ($("input[name='txtNumber']:checked").val() == '100') $("#output").text("Changed to 100");
    else if ($("input[name='txtNumber']:checked").val() == '200') $("#output").text("Changed to 200");
    else if ($("input[name='txtNumber']:checked").val() == '500') $("#output").text("Changed to 500");
    else if ($("input[name='txtNumber']:checked").val() == '1000') $("#output").text("Changed to 1000");
    else if ($("input[name='txtNumber']:checked").val() == '10000') $("#output").text("Changed to 10000");
    else($("input[name='txtNumber']:checked").val() == 'other')
//-----^-----------------//
// Forgot the if here!!! //
///////////////////////////

    $("#output").text("Changed to Other");
});
}); 
```

### 将您的代码更改为：

```
$(document).ready(function () {
console.log("parsed");
$("input[name='txtNumber']").change(function () {
    console.log("changed");
    if ($("input[name='txtNumber']:checked").val() == '100') $("#output").text("Changed to 100");
    else if ($("input[name='txtNumber']:checked").val() == '200') $("#output").text("Changed to 200");
    else if ($("input[name='txtNumber']:checked").val() == '500') $("#output").text("Changed to 500");
    else if ($("input[name='txtNumber']:checked").val() == '1000') $("#output").text("Changed to 1000");
    else if ($("input[name='txtNumber']:checked").val() == '10000') $("#output").text("Changed to 10000");
    else if ($("input[name='txtNumber']:checked").val() == 'other')
    $("#output").text("Changed to Other");
});
}); 
```

它有效！

### 小提琴：http: [//jsfiddle.net/8FXFE/3/](http://jsfiddle.net/8FXFE/3/)

* * *

### 什么是`console.log`：

对于你的问题。`console.log()`是一个现代浏览器特定的函数，它将括号内的任何内容打印到 JavaScript 控制台。

[![](../Images/f800e253748987d9501df16e78d17b4a.png)](https://i.stack.imgur.com/21ZeG.png)
[（来源：[tmont.com](http://jarvis.tmont.com/console-chrome.png)）]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:25:32.797

```
$("input[name='txtNumber']").change(function () {

    $("#output").text("Changed to "+$("input[name='txtNumber']:radio:checked").val());
}); 
```

编辑抱歉太快了你必须使用 :checked 确实

编辑 2：执行 console.log(this) 以查看是否可以直接访问该值，而不是访问 dom 来获取它：

我正在猜测

```
 this.target 
```

应该包含值

console.log 是在控制台中记录您的对象/字符串/数组，以便调试任何问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:42:19.700

**Javascript**

```
$("input[name='txtNumber']").change(function () {
    var $radio = $(this),
        $output = $('#output'),
        value = $radio.val() || $('#customNumber').val();

    if (value)
        $("#output").text("Changed to " + value);
    else
        $("#output").text("Changed to empty value");
});

$("#customNumber").keyup(function() {
    $("#output").text("Changed to " + $(this).val());
}); 
```

**HTML**

```
<div class="textForm">
    <input type="radio" name="txtNumber" value="100" />100
    <input type="radio" name="txtNumber" value="200" />200
    <input type="radio" name="txtNumber" value="500" />500
    <input type="radio" name="txtNumber" value="1000" />1000
    <input type="radio" name="txtNumber" value="10000" />10000
    <input type="radio" name="txtNumber" value="" />other
    <input type="text" name="customNumber" id="customNumber" />
</div>

<h3>Output:</h3>

<div id="output"></div> 
```

[小提琴演示](http://jsfiddle.net/st3fan/tg32Q/)

# python - 无法获取 Excel ChartObjects 计数

> ID：14621224
> 
> 赞同：1
> 
> 时间：2013-01-31T08:15:58.603
> 
> 标签：python, excel, charts

有谁知道如何获取 Excel ChartObjects Count？在 VBA 示例中，我可以在一张表中获取所有图表名称和图表计数。但我不知道为什么，python 无法获取图表计数。我尝试了所有其他 ChartObjects 属性，除了 Count 之外的所有工作。

```
[MSDN Library][1]
ChartObjects.Application Property (Excel)
Not Working ===> ChartObjects.Count Property (Excel)
ChartObjects.Creator Property (Excel)
ChartObjects.Height Property (Excel)
ChartObjects.Left Property (Excel)
ChartObjects.Locked Property (Excel)
ChartObjects.Parent Property (Excel)
ChartObjects.Placement Property (Excel)
ChartObjects.PrintObject Property (Excel)
ChartObjects.ProtectChartObject Property (Excel)
ChartObjects.ShapeRange Property (Excel)
ChartObjects.Top Property (Excel)
ChartObjects.Visible Property (Excel)
ChartObjects.Width Property (Excel)

ex.
Python:
   workbook.Sheets(2).ChartObjects.Count

VBA:
   ActiveWorkbook.Sheets(lngS).ChartObjects.Count 
```

来自 Python 的错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "F:\Python27\lib\site-packages\win32com\client\__init__.py", line 465, in
 __getattr__
    raise AttributeError("'%s' object has no attribute '%s'" % (repr(self), attr
))
AttributeError: '<win32com.gen_py.Microsoft Excel 14.0 Object Library.ChartObjec
t instance at 0x51078984>' object has no attribute 'Count'

  [1]: http://msdn.microsoft.com/en-us/library/ff846604%28v=office.14%29.aspx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:25:25.967

回答我的问题： ChartObjects 是一个函数。所以不能有计数属性。下面的代码段修复了 Python 和 Visual Basic 中的问题。

注意，VBA 不需要这一步。

```
Python or VB:
oWorksheet = workbook.Worksheets("Created.vs.Resolved")
oChart = oWorksheet.ChartObjects()
chart_count = oChart.Count

VBA: 
ActiveWorkbook.Sheets(lngS).ChartObjects.Count 
```

# android - setcontentview中的android（4.2）异常

> ID：14621228
> 
> 赞同：1
> 
> 时间：2013-01-31T08:16:32.380
> 
> 标签：android, exception

我在更高的 android 版本中遇到异常（> = 4.0）

这是我的**Favourites.java ：**

```
package com.SCHOOLinSITES.SiS.Connect;

import java.util.ArrayList;
import java.util.List;

import android.R.color;
import android.app.Activity;
import android.content.Intent;

import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.graphics.drawable.GradientDrawable;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class Favorites extends Activity implements OnItemClickListener {
    /** Called when the activity is first created. */
    /**GradientDrawable gd = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[] {Color.RED,Color.GREEN});
    View title = getWindow().findViewById(android.R.id.title);
    View titleBar = (View) title.getParent();
    titleBar.setBackgroundDrawable(gd);**/

    int b;
    ArrayList<Item> items = new ArrayList<Item>();
    String[]   aaaa,aaaa1;
    List<String> list1=new ArrayList<String>();
    List<String> dlist=new ArrayList<String>();
    List<String> slist=new ArrayList<String>();
    List<String> did=new ArrayList<String>();
    List<String> web=new ArrayList<String>();
    List<String> sid=new ArrayList<String>();
    List<String> sweb=new ArrayList<String>();
    List<String> clist=new ArrayList<String>();
    List<String> cid=new ArrayList<String>();
    List<String> cweb=new ArrayList<String>();
    ListView l;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.main1);
       // setTitle("My Favorites");
       // setTitleColor(Color.argb(1,88,0,4));
      // setTitleColor(Color.parseColor("#580004"));
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);
       TextView t=(TextView)findViewById(R.id.myTitle);
       t.setText("My Favorites");

       //       SQLiteDatabase db=null;
//       String[] ar=null;
//       DBHelper op=new DBHelper(this,"pc", null, 1);
//       db=op.getReadableDatabase();
//       Cursor cursor= db.rawQuery("SELECT name FROM SCHOOLinSITES", null);
//       while (cursor.moveToNext()) {
//         String name=cursor.getString(cursor.getColumnIndex("name"));
//         String[] split=name.split(",");
//       if(split.length==4)
//       {
//          dlist.add(split[0]+","+split[1]);
//          did.add(split[2]);
//          web.add(split[3]);
//          
//       }
//       else{
//          
//          slist.add(split[0]+","+split[1]+","+split[2]);
//          sid.add(split[3]);
//          sweb.add(split[4]);
//          
//          
//       }
//      
//   }
//       db.close();
//       cursor.close();
//       if(dlist.size()>0 || slist.size()>0){
//          ImageView img1=(ImageView)findViewById(R.id.imgst6);
//          ImageView img2=(ImageView)findViewById(R.id.imgst7);
//          TextView txt1=(TextView)findViewById(R.id.starttext);
//          TextView txt2=(TextView)findViewById(R.id.starttext1);
//          TextView txt3=(TextView)findViewById(R.id.starttext3);
//          TextView txt4=(TextView)findViewById(R.id.starttext4);
//          img1.setVisibility(View.GONE);
//          img2.setVisibility(View.GONE);
//          txt1.setVisibility(View.GONE);
//          txt2.setVisibility(View.GONE);
//          txt3.setVisibility(View.GONE);
//          txt4.setVisibility(View.GONE);
//       items.clear();
//       if(dlist.size()!=0)
//           items.add(new SectionItem("Districts"));
//       for(int i=0;i<dlist.size();i++)
//       {
//           items.add(new EntryItem(dlist.get(i), null));
//       }
//       if(slist.size()!=0)
//           items.add(new SectionItem("Schools"));
//       for(int i=0;i<slist.size();i++)
//       {
//           items.add(new EntryItem(slist.get(i), null));
//       }
//         l=(ListView)findViewById(R.id.list1);
//       l.setCacheColorHint(color.transparent);
//       l.requestFocus(0);
//       l.setScrollingCacheEnabled(false);
//       l.setBackgroundColor(color.transparent);
//       EntryAdapter adapter = new EntryAdapter(this, items);
//       l.setAdapter(adapter);
//       l.setOnItemClickListener(this);
//       for(int i=0;i<dlist.size()+1;i++)
//       {
//          if(i==0)
//          {
//              clist.add("");
//              cid.add("");
//              cweb.add("");
//          }
//          else{
//              clist.add(dlist.get(i-1));
//              cid.add(did.get(i-1));
//              cweb.add(web.get(i-1));
//              
//  }
//          
//       }
//       for(int i=0;i<slist.size()+1;i++)
//       {
//          if(i==0)
//          {
//              clist.add("");
//              cid.add("");
//              cweb.add("");
//          }
//          else{
//              clist.add(slist.get(i-1));
//              cid.add(sid.get(i-1));
//              cweb.add(sweb.get(i-1));
//              
//  }
//          
//       }
//       }
//       else{
//           items.clear();
//           l=(ListView)findViewById(R.id.list1);
//            l.setCacheColorHint(color.transparent);
//            l.requestFocus(0);
//            l.setScrollingCacheEnabled(false);
//            l.setBackgroundColor(color.transparent);
//            EntryAdapter adapter = new EntryAdapter(this, items);
//            l.setAdapter(adapter);
//            l.setOnItemClickListener(this);
//          ImageView img1=(ImageView)findViewById(R.id.imgst6);
//          ImageView img2=(ImageView)findViewById(R.id.imgst7);
//          TextView txt1=(TextView)findViewById(R.id.starttext);
//          TextView txt2=(TextView)findViewById(R.id.starttext1);
//          TextView txt3=(TextView)findViewById(R.id.starttext3);
//          TextView txt4=(TextView)findViewById(R.id.starttext4);
//          img1.setVisibility(View.VISIBLE);
//          img2.setVisibility(View.VISIBLE);
//          txt1.setVisibility(View.VISIBLE);
//          txt2.setVisibility(View.VISIBLE);
//          txt3.setVisibility(View.VISIBLE);
//          txt4.setVisibility(View.VISIBLE);
//       }

    }
    public void method1(View v)
    {
        Intent start=new Intent(this, Find.class);
        startActivity(start);
    }
    public void method2(View v)
    {

    }
    public void method3(View v)
    {

        Intent start=new Intent(this,Resources.class );
        startActivity(start);
    }
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
   {

        b=arg2;
        myClickHandler();
    }
      public void myClickHandler() {

            String[] split;
            split=clist.get(b).split(",");
            if(split.length==2){
            Intent gotoLIst=new Intent(this,District.class);
            gotoLIst.putExtra("name", clist.get(b));   
            gotoLIst.putExtra("did",cid.get(b));
            gotoLIst.putExtra("web", cweb.get(b));
            startActivity(gotoLIst);
            }
            else{
                 Intent gotoLIst=new Intent(this,schooldetails.class);
                gotoLIst.putExtra("name", clist.get(b));   
                gotoLIst.putExtra("did",cid.get(b));
                gotoLIst.putExtra("web", cweb.get(b));
                startActivity(gotoLIst);

            }

        }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        dlist.clear();
        slist.clear();
        sid.clear();
        did.clear();
        web.clear();
        sweb.clear();
        clist.clear();
        cid.clear();
        cweb.clear();
        list1.clear();
        SQLiteDatabase db=null;
        String[] ar=null;
        DBHelper op=new DBHelper(this,"pc", null, 1);
        db=op.getReadableDatabase();
        Cursor cursor= db.rawQuery("SELECT name FROM SCHOOLinSITES", null);
        while (cursor.moveToNext()) {
           String name=cursor.getString(cursor.getColumnIndex("name"));

           String[] split=name.split(",");
        if(split.length==4)
        {
            dlist.add(split[0]+","+split[1]);
            did.add(split[2]);
            web.add(split[3]);

        }
        else{

            slist.add(split[0]+","+split[1]+","+split[2]);
            sid.add(split[3]);
            sweb.add(split[4]);

        }

    }
        db.close();
        cursor.close();
        if(dlist.size()>0 || slist.size()>0){
            ImageView img1=(ImageView)findViewById(R.id.imgst6);
            ImageView img2=(ImageView)findViewById(R.id.imgst7);
            TextView txt1=(TextView)findViewById(R.id.starttext);
            //TextView txt2=(TextView)findViewById(R.id.starttext1);
            TextView txt3=(TextView)findViewById(R.id.starttext3);
            //TextView txt4=(TextView)findViewById(R.id.starttext4);
            img1.setVisibility(View.GONE);
            img2.setVisibility(View.GONE);
            txt1.setVisibility(View.GONE);
            //txt2.setVisibility(View.GONE);
            txt3.setVisibility(View.GONE);
            //txt4.setVisibility(View.GONE);

        items.clear();
        if(dlist.size()!=0)
             items.add(new SectionItem("Districts"));
        for(int i=0;i<dlist.size();i++)
        {
             items.add(new EntryItem(dlist.get(i), null));
        }
        if(slist.size()!=0)
             items.add(new SectionItem("Schools"));
        for(int i=0;i<slist.size();i++)
        {
             items.add(new EntryItem(slist.get(i), null));
        }
        l=(ListView)findViewById(R.id.list1);
        l.setCacheColorHint(color.transparent);
        l.requestFocus(0);
        l.setScrollingCacheEnabled(false);
        l.setBackgroundColor(color.transparent);
        EntryAdapter adapter = new EntryAdapter(this, items);
        l.setAdapter(adapter);
        l.setOnItemClickListener(this);

       if(dlist.size()>0){
        for(int i=0;i<dlist.size()+1;i++)
        {
            if(i==0)
            {
                clist.add("");
                cid.add("");
                cweb.add("");
            }
            else{
                clist.add(dlist.get(i-1));
                cid.add(did.get(i-1));
                cweb.add(web.get(i-1));

   }
        }
        }
       if(slist.size()>0){
        for(int i=0;i<slist.size()+1;i++)
        {
            if(i==0)
            {
                clist.add("");
                cid.add("");
                cweb.add("");
            }
            else{
                clist.add(slist.get(i-1));
                cid.add(sid.get(i-1));
                cweb.add(sweb.get(i-1));

   }

        }
       }
        }
else{
     items.clear();
     l=(ListView)findViewById(R.id.list1);
     l.setCacheColorHint(color.transparent);
     l.requestFocus(0);
     l.setScrollingCacheEnabled(false);
     l.setBackgroundColor(color.transparent);
     EntryAdapter adapter = new EntryAdapter(this, items);
     l.setAdapter(adapter);
     l.setOnItemClickListener(this);

            ImageView img1=(ImageView)findViewById(R.id.imgst6);
            ImageView img2=(ImageView)findViewById(R.id.imgst7);
            TextView txt1=(TextView)findViewById(R.id.starttext);
            //TextView txt2=(TextView)findViewById(R.id.starttext1);
            TextView txt3=(TextView)findViewById(R.id.starttext3);
            //TextView txt4=(TextView)findViewById(R.id.starttext4);
            img1.setVisibility(View.VISIBLE);
            img2.setVisibility(View.VISIBLE);
            txt1.setVisibility(View.VISIBLE);
            //txt2.setVisibility(View.VISIBLE);
            txt3.setVisibility(View.VISIBLE);
            //txt4.setVisibility(View.VISIBLE);
        }
    }
    public void Add(View v)
      {
            SQLiteDatabase db=null;
            DBHelper helper=new DBHelper(this,"pc",null,1);
            db=helper.getWritableDatabase();
            //db.delete("SCHOOLinSITES", null, null);
            Integer i=(Integer)v.getTag();
            String str= clist.get((Integer)v.getTag())+","+cid.get((Integer)v.getTag())+","+cweb.get((Integer)v.getTag());

            String whereClause ="name=?";

            db.delete("SCHOOLinSITES", whereClause, new String[]{str});
           db.close();
            onResume();
       }
} 
```

当我尝试在 android 4.0 及更高版本上执行它时，我在**setcontentview(r.layout.main1) 处遇到异常。**

**异常详情：**

```
01-31 13:34:30.261: D/AndroidRuntime(689): Shutting down VM
01-31 13:34:30.261: W/dalvikvm(689): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
01-31 13:34:30.281: E/AndroidRuntime(689): FATAL EXCEPTION: main
01-31 13:34:30.281: E/AndroidRuntime(689): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.SCHOOLinSITES.SiS.Connect/com.SCHOOLinSITES.SiS.Connect.Favorites}: android.view.InflateException: Binary XML file line #5: Error inflating class <unknown>
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.os.Looper.loop(Looper.java:137)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-31 13:34:30.281: E/AndroidRuntime(689):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 13:34:30.281: E/AndroidRuntime(689):  at java.lang.reflect.Method.invoke(Method.java:511)
01-31 13:34:30.281: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-31 13:34:30.281: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-31 13:34:30.281: E/AndroidRuntime(689):  at dalvik.system.NativeStart.main(Native Method)
01-31 13:34:30.281: E/AndroidRuntime(689): Caused by: android.view.InflateException: Binary XML file line #5: Error inflating class <unknown>
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-31 13:34:30.281: E/AndroidRuntime(689):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-31 13:34:30.281: E/AndroidRuntime(689):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.Activity.setContentView(Activity.java:1835)
01-31 13:34:30.281: E/AndroidRuntime(689):  at com.SCHOOLinSITES.SiS.Connect.Favorites.onCreate(Favorites.java:57)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.Activity.performCreate(Activity.java:4465)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-31 13:34:30.281: E/AndroidRuntime(689):  ... 11 more
01-31 13:34:30.281: E/AndroidRuntime(689): Caused by: java.lang.reflect.InvocationTargetException
01-31 13:34:30.281: E/AndroidRuntime(689):  at java.lang.reflect.Constructor.constructNative(Native Method)
01-31 13:34:30.281: E/AndroidRuntime(689):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
01-31 13:34:30.281: E/AndroidRuntime(689):  ... 24 more
01-31 13:34:30.281: E/AndroidRuntime(689): Caused by: java.lang.OutOfMemoryError
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.Bitmap.nativeCreate(Native Method)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.content.res.Resources.loadDrawable(Resources.java:1935)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.View.<init>(View.java:2785)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.View.<init>(View.java:2722)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.view.ViewGroup.<init>(ViewGroup.java:379)
01-31 13:34:30.281: E/AndroidRuntime(689):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
01-31 13:34:30.281: E/AndroidRuntime(689):  ... 27 more
01-31 13:34:30.591: I/dalvikvm(689): threadid=3: reacting to signal 3
01-31 13:34:30.602: I/dalvikvm(689): Wrote stack traces to '/data/anr/traces.txt'
01-31 13:34:30.871: I/dalvikvm(689): threadid=3: reacting to signal 3
01-31 13:34:30.881: I/dalvikvm(689): Wrote stack traces to '/data/anr/traces.txt' 
```

我该如何解决这个问题。

**布局文件：**

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_height="fill_parent" android:layout_width="match_parent" android:id="@+id/relativeLayout1" >

 <RelativeLayout
        android:id="@+id/rel_bottom"
        android:layout_width="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_height="fill_parent"
        android:background="@drawable/mainbg" >

      <ListView  android:layout_width="fill_parent" android:layout_height="fill_parent" android:id="@+id/list1" android:divider="@null"
android:dividerHeight="0dp" android:layout_alignParentLeft="true" android:paddingTop="15dp" android:paddingLeft="10dp" android:listSelector="@android:color/transparent"> </ListView>

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:id="@+id/imgst6"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="30dp" android:background="@drawable/discticts" android:visibility="invisible"/>
       <TextView android:text="" android:onClick="method1" android:background="@drawable/search"
            android:clickable="true"  android:layout_width="wrap_content" android:id="@+id/starttext" android:visibility="invisible"
            android:layout_height="wrap_content"  android:layout_marginLeft="30dp" android:layout_below="@+id/imgst6" android:layout_marginTop="8dip" ></TextView>
<!--        <TextView android:text="Districts to add them to your Favorites" android:visibility="invisible" android:id="@+id/starttext1" android:layout_toRightOf="@+id/starttext" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_below="@+id/imgst6" android:layout_marginTop="10dp" android:layout_marginLeft="5dp" android:textColor="#4D4D4D" android:textSize="12sp"></TextView>    -->
      <ImageView android:id="@+id/imgst7"  android:layout_width="wrap_content" android:visibility="invisible"
            android:layout_height="wrap_content"  android:layout_marginLeft="20dp" android:background="@drawable/schools" android:layout_below="@+id/starttext" android:layout_marginTop="10dp"></ImageView> 
      <TextView android:text="" android:onClick="method1" android:background="@drawable/search"
            android:clickable="true" android:visibility="invisible" android:layout_width="wrap_content" android:id="@+id/starttext3"
            android:layout_height="wrap_content"  android:layout_marginLeft="30dp" android:layout_below="@+id/imgst7" android:layout_marginTop="8dp" ></TextView>
<!--          <TextView android:text="Schools to add them to your Favorites" android:visibility="invisible" android:id="@+id/starttext4" android:layout_toRightOf="@+id/starttext3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_below="@+id/imgst7" android:layout_marginTop="10dp" android:layout_marginLeft="5dp" android:textColor="#4D4D4D" android:textSize="12sp"></TextView>    -->
</RelativeLayout>

 <RelativeLayout
        android:id="@+id/rel_bottom"
        android:layout_width="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_height="38dp"
        android:background="@drawable/bottom_bar" 
         android:paddingTop="5dp"
        >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:background="@drawable/findbtn"
            android:id="@+id/img1"
            android:onClick="method1"
            android:clickable="true"
            android:layout_marginLeft="15dp"
            />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/resourcesbtn"
            android:layout_alignParentRight="true" android:onClick="method3"
             android:clickable="true"
            android:id="@+id/img2"
             android:layout_marginRight="15dp"
            />
           <ImageView
            android:id="@+id/img3"
            android:layout_width="40dp"
            android:layout_height="fill_parent"
            android:background="@drawable/icon"
            android:layout_centerInParent="true"
            android:visibility="invisible"
             />

    </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:27:00.177

抛出一个`java.lang.OutOfMemoryError`似乎您在布局中的图像太大并且无法加载到设备（或模拟器）内存中。

尝试加载图像的缩减版本（[请参阅 android 文档](http://developer.android.com/training/displaying-bitmaps/index.html)）或发布您的布局以获取更多信息。

# xml - XML 文件样式与 XSLT 但不同的行或按树名过滤

> ID：14621231
> 
> 赞同：0
> 
> 时间：2013-01-31T08:16:46.370
> 
> 标签：xml, xslt, xml-parsing

您好 XML 专家和专家。如果树是这样的，我有一个问题如何设置 xml 树的样式：

```
 1\. ROW

Name
Surname
Type

 2\. ROW

Name
Surname
Type

 3\. ROW

ID
Name
Surname 
```

我需要编写显示第 1 行（著名）和第 2 行（著名）的 xslt 代码，但没有显示第 3 行，并过滤树中没有 ID 字段的所有行，所以答案必须是代码将显示第 1 行和第 2 行。那么该怎么做呢？此处的代码示例：一些示例，我无法提供原始 xml 文件，因为它是安全信息。感谢您的回复尝试举个例子：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="test.xsl" ?>
<testdocument>
<famous>
<name>Bob</name>
<surname>Bobby</surname>
<type>Human</type>
</famous>
<famous>
<name>Ted</name>
<surname>Teddy</surname>
<type>Human</type>
</famous>
<famous>
<name>Snake</name>
<surname>Anaconda</surname>
<type>Reptile</type>
<ID>ANIMAL</ID>
</famous>
</testdocument> 
```

我需要输出第一和第二个著名的叶子，但不输出 ID 设置为某物的第三个叶子。所以我需要输出所有但不是著名的叶子 ID 设置为什么的地方，希望我问得正确。可能的输出：

```
Bob
Bobby
Human

Ted
Teddy
Human 
```

就是这样。

这是我到目前为止的 XSLT：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
<xsl:template match="/">

<html>
<head>
<title></title>
</head>
<body>
<!-- Here i think something must be written as condition that 
     ID field not be taken, and ROw3 name and surname not be shown too..-->
<xsl:for-each select="famous[ID != 0]"> 
<xsl:value-of select="NAME"/>
<xsl:value-of select="SURNAME"/>
<xsl:value-of select="TYPE"/>
</xsl:for-each>
</body>
</html>

</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:58:23.217

请尝试以下 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
  <xsl:output method="html"/>
  <xsl:template match="/">
    <html>
      <head>
        <title></title>
      </head>
      <body>
        <xsl:apply-templates select="testdocument/famous[not(ID)]" />
        <pre>
          <xsl:apply-templates select="*" mode="print" />
        </pre>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="famous">
    <xsl:apply-templates select="*" />
    <br />
  </xsl:template>

  <xsl:template match="famous/*">
    <xsl:value-of select="."/>
    <br />
  </xsl:template>

  <xsl:template match="*" mode="spaces">
    <xsl:text>&#xA0;&#xA0;&#xA0;</xsl:text>
  </xsl:template>

  <xsl:template match="*" mode="print">
    <xsl:apply-templates select="ancestor::*" mode="spaces" />
    <xsl:value-of select="concat('&lt;', local-name(), '&gt;')"/>
    <xsl:if test="*">
      <xsl:text>&#xA;</xsl:text>
    </xsl:if>

    <xsl:apply-templates select="node()" mode="print" />

    <xsl:if test="*">
      <xsl:apply-templates select="ancestor::*" mode="spaces" />
    </xsl:if>
    <xsl:value-of select="concat('&lt;/', local-name(), '&gt;')"/>
    <xsl:text>&#xA;</xsl:text>
  </xsl:template>

  <xsl:template match="text()[not(normalize-space())]" mode="print" />
</xsl:stylesheet> 
```

对样本数据运行时的结果：

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
  </head>
  <body>Bob<br>Bobby<br>Human<br><br>Ted<br>Teddy<br>Human<br><br><pre>&lt;testdocument&gt;
   &lt;famous&gt;
      &lt;name&gt;Bob&lt;/name&gt;
      &lt;surname&gt;Bobby&lt;/surname&gt;
      &lt;type&gt;Human&lt;/type&gt;
   &lt;/famous&gt;
   &lt;famous&gt;
      &lt;name&gt;Ted&lt;/name&gt;
      &lt;surname&gt;Teddy&lt;/surname&gt;
      &lt;type&gt;Human&lt;/type&gt;
   &lt;/famous&gt;
   &lt;famous&gt;
      &lt;name&gt;Snake&lt;/name&gt;
      &lt;surname&gt;Anaconda&lt;/surname&gt;
      &lt;type&gt;Reptile&lt;/type&gt;
      &lt;ID&gt;ANIMAL&lt;/ID&gt;
   &lt;/famous&gt;
&lt;/testdocument&gt;
</pre>
  </body>
</html> 
```

# video-processing - 从嘈杂的位置数据中获取有意义的速度信息

> ID：14621234
> 
> 赞同：5
> 
> 时间：2013-01-31T08:16:58.403
> 
> 标签：video-processing, noise, smoothing

*如果此问题发布在错误的 stackexchange 站点上 - 请建议我可以将其迁移到哪里！*

我正在研究一个物体的速度，它与墙壁以及其他物体一起经历多种条件。物体位置的原始数据有轻微的噪音，原因有两个：第一，视频的分辨率有限，第二，我的跟踪软件在跟踪物体时也有一些误差（因为物体的图像略有变化随着时间的推移）。

如果仅通过使用对象位置的原始数据来计算对象的速度，则在以高帧率跟踪对象时存在明显的误差（大于速度的误差）。

我对碰撞前后物体的速度最感兴趣，因此这是一个重大问题。

我考虑过/尝试过的可能选项。

*   **在位置数据上应用离散卡尔曼滤波器**：这是一个经常出现在有关相关问题的帖子中的解决方案。然而，当我们开始对数据进行平滑处理时，考虑到所有数据，卡尔曼滤波器是利用可用数据的最佳方式吗？我的理解是，过滤器是为随着时间的推移传入的数据而设计的（例如，实时接收的位置数据，而不是完整的位置数据集）。
*   **对位置数据应用 Savitsky-Golay 平滑**：当我在我的数据上尝试此操作时，我发现每次碰撞后在 ±10 个数据点的区域中引入了显着的伪影。我怀疑这与碰撞时的显着加速度有关，但在尝试了 SG 平滑的一系列参数后，我无法消除伪影。
*   **在碰撞时分离数据，然后使用移动平均值平滑速度**：为了克服每次碰撞时加速度引入的问题，我在每个碰撞点将数据分成多个系列。例如，如果有 3 次碰撞，则数据将分为四个系列。然后使用移动平均值计算和平滑每个数据系列的速度。

此外，我的一些同事建议通过低通滤波器传递速度信息，我没有尝试过。

以下两个问题与我有关，仅供参考。

[系列数据的平滑](https://stackoverflow.com/questions/9311168/smooth-of-series-data)

[流畅的 GPS 数据](https://stackoverflow.com/questions/1134579/smooth-gps-data)

此外，下面的论文似乎也为如何实现卡尔曼滤波器提供了一个很好的建议，尽管是针对实时数据。

[http://transportation.ce.gatech.edu/sites/default/files/files/smoothing_methods_design_to_minimize_the_impact_of_gps_random_error_on_travel_distance_speed_and_acceleration_profile_estimates-trr.pdf](http://transportation.ce.gatech.edu/sites/default/files/files/smoothing_methods_designed_to_minimize_the_impact_of_gps_random_error_on_travel_distance_speed_and_acceleration_profile_estimates-trr.pdf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:27:39.423

选择合适的过滤算法主要取决于对象的行为和测量误差（或噪声）。所以我只能给出一些通用的提示：

微分，即从位置数据计算速度会显着放大噪声。所以可能你确实需要某种平滑。我的临时方法是：傅里叶变换您的位置数据，在傅里叶空间中进行导数并四处寻找适合低路径过滤的边界。将其他传递函数应用于转换后的定位数据可以解释为内核平滑（尽管需要对内核方法进行一些数学洞察才能正确地做到这一点）。

卡尔曼滤波器是状态估计器，它以递归方式工作。如果您有适当的（离散时间）运动模型和测量模型，它将产生良好的结果并为您提供对速度的直接估计。这种方法的经验法则：

*   如果您的对象具有旋转自由度，则在 3D 空间或 6D 空间中建模，而不是在图像空间中（噪声表现不同）
*   仔细调查您的投影误差（相机校准）并仔细选择噪声参数
*   如果出现非线性，请使用无迹卡尔曼滤波器（它比扩展卡尔曼滤波器好得多）

卡尔曼滤波和低路径滤波密切相关。对于许多简单的应用，卡尔曼滤波器可以被认为是一种自适应低路径滤波器，它会进行平滑处理。

非递归卡尔曼滤波器是一种称为高斯过程的过程 - 尽管如果您的轨迹具有少量数据点，我只看到卡尔曼滤波器的优势。它们的应用不像 KF 那样简单。

# django - Django MongodbForms KeyError _meta['cascade']

> ID：14621235
> 
> 赞同：2
> 
> 时间：2013-01-31T08:17:05.097
> 
> 标签：django, mongodb

尝试使用 Django MongoDBForms 替换 ModelForms 但在保存表单实例时出现这个非常奇怪的错误。

在 save() 期间，mongoengine.Document 检查 MongoDBForm 包装的 _meta 字典中的 cascade 关键字。

MongoDBForm 然后从 getitem 抛出一个**KeyError**

它在寻找什么级联键？！

我做错了吗？

```
Request Method: POST
Request URL:    http://localhost:8000/add_item/Books
Django Version: 1.4.2
Exception Type: KeyError
Exception Value:    
0
Exception Location: /Users/holografix/.virtualenvs/troca/lib/python2.7/site-packages/mongodbforms/documentoptions.py in __getitem__, line 171
Python Executable:  /Users/holografix/.virtualenvs/troca/bin/python
Python Version: 2.7.3 
```

**来自 models.py 的模型**

```
class GenericItem(Document):
    owner_id = IntField(required=True)
    title = StringField(max_length=70, required=True)
    description = StringField(max_length=140, required=True)
    value = IntField()
    location = GeoPointField()
    offers = ListField(EmbeddedDocumentField('Offer'))

    def __unicode__(self):
        return self.title

    class Meta:
        abstract = False
        app_label = 'troca_app'
        db_table = 'generic_item'
        allow_inheritance = True 
```

**等效于 forms.py 的 ModelForm**

```
class ModelFormGenericItem(DocumentForm):
   class Meta:
       document = GenericItem
       fields = ('title', 'value', 'description') 
```

**查看我处理表单的位置**

```
@login_required
def add_item(request, category):

    if request.method == 'POST':        

        if category == 'Muffins':
            form = ModelFormMuffin(request.POST)        

        elif category == 'Cameras':
            form = ModelFormCameras(request.POST)        

        else:        
            form = ModelFormGenericItem(request.POST)

        form = ModelFormGenericItem(request.POST)

        if form.is_valid():
            #process the data in form.cleaned_data

            instance = form.save(commit = False)
            instance.owner_id = request.user.id
            instance.save(safe=True, cascade=)

            return HttpResponseRedirect('/thanks/')

    else:
        # Ensure that this is a "final" category:
        p = get_object_or_404( Category, categoryTitle = category )        
        i = Category.objects.filter( parentCategory = p )
        if i.count() != 0:
            raise Http404

        if category == 'Muffins':
            form = ModelFormMuffin()

        elif category == 'Cameras':
            form = ModelFormCameras()

        else:        
            form = ModelFormGenericItem()

    return render(request, 'item.html', {
        'form': form,
        'category': category,
    } ) 
```

更多来自 Django 错误：

```
/Users/holografix/Documents/development/troca_proj/troca_app/views.py in add_item
            instance.save() ...
▶ Local vars
/Users/holografix/.virtualenvs/troca/lib/python2.7/site-packages/mongoengine/document.py in save
            warn_cascade = not cascade and 'cascade' not in self._meta ...
▶ Local vars
/Users/holografix/.virtualenvs/troca/lib/python2.7/site-packages/mongodbforms/documentoptions.py in __getitem__
        return self.meta[key] ...
▶ Local vars 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:51:06.933

编辑：为 documentoptions.py 实现**contains** () 方法似乎可以修复它，而无需更改任何其他内容。

最终解决了这个问题，因为我不知道为什么会这样......

向 mongodbforms.documentoptions 添加了“has_key()”方法，如下所示：

```
def has_key(self, key):
    return self.meta.has_key(key) 
```

并将违规行从 mongoengine 从**in**运算符更改为检查 has_key() 方法：

```
warn_cascade = not cascade and not self._meta.has_key('cascade') 
```

如果有人能回答 WTF 原始错误正在弹出，那就太棒了！

# php - BIRT 报告与 PHP 的集成

> ID：14621241
> 
> 赞同：0
> 
> 时间：2013-01-31T08:17:41.647
> 
> 标签：php, tomcat, birt

我正在尝试将 BIRT 报告查看器集成到我的 PHP 应用程序中。

我的问题是：

1.  查看报告的客户端要求是什么？

2.  报表查看器需要在服务器机器上安装 tomcat 和 BIRT。在我自己的机器或专用服务器上运行良好。但是如果有共享主机呢？有运行 PHP+MySQL+ BIRT 的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:32:13.237

1）在客户端实际上什么都没有。在服务器端，您拥有`.rptdesign`文件，您的服务器将从中生成所需格式的文件，因此客户端只需下载并在适当的程序（如 Excel、Acrobat Reader 等）中打开此文件。

2）您需要嵌入式 servlet 容器，因为您需要部署[WebViewer](http://www.eclipse.org/birt/phoenix/deploy/viewerSetup.php)，这在共享主机上可能会出现问题。有一些解决方法，但恕我直言不值得尝试（[来源）](http://www.birt-exchange.org/org/forum/index.php/topic/25920-can-reports-be-viewed-using-shared-hosting-providers/page__s__abff2dd82feaf43f69f8ef4217e5e40a)

# javascript - 使用 JavaScript/JQuery 获取整个文档的 html

> ID：14621243
> 
> 赞同：9
> 
> 时间：2013-01-31T08:17:55.157
> 
> 标签：javascript, jquery

我知道这里已经讨论过了，但是没有解决方案来获取整个文档（包括 doctype）。

`$(document).html();`返回`null`...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T08:21:33.037

这将为您提供所有 HTML：

```
document.documentElement.outerHTML 
```

不幸的是，它不返回文档类型。但是您可以使用`document.doctype`它并将两者粘合在一起。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-10T12:59:24.867

你可以做

```
new XMLSerializer().serializeToString(document); 
```

适用于所有比 IE 9 更新的浏览器

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T08:19:52.897

尝试这个。

```
$("html").html() 
```

document 是一个变量，它不代表 html 标签。

**编辑**

要获得可以使用的文档类型

```
document.doctype 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-20T04:29:59.600

这是一个在 IE6+ 中支持的功能，它没有使用`outerHTML`更多的支持，它添加了 doctype 并使用了一些技巧来获取`html`标签及其属性。为了接收带有文档类型的字符串，并且不使用`outerHTML`因此它支持每个浏览器。它使用一些技巧来获取`html`标签。添加此代码：

```
document.fullHTML = function () {
    var r = document.documentElement.innerHTML, t = document.documentElement.attributes, i = 0, l = '',
        d = '<!DOCTYPE ' + document.doctype.name + (document.doctype.publicId ? ' PUBLIC "' + document.doctype.publicId + '"' : '') + (!document.doctype.publicId && document.doctype.systemId ? ' SYSTEM' : '') + (document.doctype.systemId ? ' "' + document.doctype.systemId + '"' : '') + '>';
    for (; i < t.length; i += 1) l += ' ' + t[i].name + '="' + t[i].value + '"';
    return d+'\n<html' + l + '>' + r + '</html>';
} 
```

现在，您可以运行此函数：

```
console.log(document.fullHTML()); 
```

这将返回 HTML 和文档类型。

我在[example.com](http://example.com)上运行了这个，[结果如下](http://pastebin.com/QJfg4c0h)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T08:25:08.573

```
document.documentElement.innerHTML 
```

会将所有文档标记作为字符串返回给您

让整个 doctype 阅读[这个](https://stackoverflow.com/questions/6088972/get-doctype-of-an-html-as-string-with-javascript)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-31T08:26:39.880

我不确定是否要获得完整的文档。但是您可以做的是，您可以分别获取 html 标签的内容和 doctype 的内容。

`$('html').html() for content`和[document.doctype](https://developer.mozilla.org/en-US/docs/DOM/document.doctype)用于获取 doctype

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T08:19:47.350

我不认为可以直接访问整个文档（包括文档类型），但这有效：

```
$.get(document.location, function(html) {
    // use html (which is the complete source code, including the doctype)
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-23T10:54:53.030

> 我已经在浏览器的控制台上完成了

**文档.文档元素；**

# sql - 对 Oracle 数据库使用 ORDER BY dbms_random.value 时的性能问题

> ID：14621244
> 
> 赞同：7
> 
> 时间：2013-01-31T08:17:56.637
> 
> 标签：sql, oracle, performance, database-cursor

我需要从表中获取 1000 个随机行并为 Oracle 找到解决方案。但是，如果我在从包含大量行的表中检索数据时使用此查询，则最多需要 3 分钟才能完成：

```
SELECT column FROM
( SELECT column FROM table
ORDER BY dbms_random.value )
WHERE rownum <= 1000 
```

发生这种情况是因为选择了所有行，然后当我只需要 1000 时，所有行都按随机值排序。这种问题有什么解决方法吗？也许使用 dbms_random.value 以及一些会选择随机行的游标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T08:33:22.253

我会这样做：

```
SELECT column 
FROM table sample (1)
where rownum <= 1000
--ORDER BY dbms_random.value 
 ; 
```

将从表中获取 1% 的样本，在前 1000 个停止（如果需要，随机订购）。

有可能存在一种更好的方式来做你想要的。这就是我要尝试的。

# c# - 使用 SqlBulkCopy 为上传到数据库的文件插入唯一 ID

> ID：14621245
> 
> 赞同：0
> 
> 时间：2013-01-31T08:18:14.370
> 
> 标签：c#, database, bulkinsert, sqlbulkcopy

有一个包含以下列的表：

```
ProdID
Specification
Value 
```

我有一个 csv 文件，其架构只有最后两列 -`Specification`和`Value`. 换句话说，它们是我的 csv 标头。现在我需要将此文件的值与一个唯一 ID 相关联。

该 id 的意义在于它是对文档的引用；它在这里并不重要，但是，现在假设它是系统需要的。

现在，当我使用 SqlBulkCopy 类插入时，有没有一种方法可以让我仍然为 ProdID 插入一些值，这样插入的每一行对于我正在尝试批量复制的文件都具有相同的 ProdID...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:31:57.077

那要看。if`ProdID`是数据库中的一个[`identity`](http://msdn.microsoft.com/en-us/library/ms186775.aspx)字段，当您执行批量复制时，数据库会为您填充它。

如果不是，您将需要自己填写并将三列传递给[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)，而不仅仅是两列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:39:32.430

您必须根据以下代码行做一些事情：

```
string cmdTxt = "SELECT " + ProdID + ", * FROM [sample.csv]"; 
```

将 ProdID 字段放在上面的 select 子句中的哪个位置并不重要；在开始或结束时，您将获得以 ProdID 作为第一个字段的结果集...

# css - 浮动和定位。有办法解决吗？

> ID：14621249
> 
> 赞同：1
> 
> 时间：2013-01-31T08:18:40.900
> 
> 标签：css

具有id剧院的div的高度不会根据图像的大小而变化，但是当我从img中删除浮动时，剧院的大小会发生变化，为什么会这样？以及如何使高度等于保留在 div 右侧的图像的高度

```
<div id="theatre"> 
<img src="http://www.wallmay.net/thumbnails/detail/20120927/abstract%20paintings%20outer%20space%20futuristic%20planets%20hope%20digital%20art%20science%20fiction%20space%20art%20blue%20li_www.wallmay.net_34.jpg"/>
</div>

#theatre{
width:100%;
margin:auto;
position:relative;
border-top:4px solid #fff;
border-bottom:5px solid #fff;  
}

#theatre img{
height:400px;
float:right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:43:13.557

之所以会出现这种效果，是因为 img 标签漂浮在 #theater div 的“上方”。让它变成别的东西然后漂浮。(position: relative;) 将解决此问题

# java - 得到 java.lang.NoClassDefFoundError: scala/Serializable with scala jars in classpath

> ID：14621250
> 
> 赞同：3
> 
> 时间：2013-01-31T08:18:41.857
> 
> 标签：java, scala, classpath

如何在我的类路径中使用 scala-compiler-2.8.0.jar 和 scala-library-2.8.0.jar 出现此异常？

```
Exception in thread "main" java.lang.NoClassDefFoundError: scala/Serializable
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at kafka.utils.ZKConfig.<init>(ZkUtils.scala:302)
at kafka.producer.ProducerConfig.<init>(ProducerConfig.scala:25)
at pt.sapo.labs.crawl.twitter.streaming.adapter.MessageBrokerStatusAdapter.<init>(MessageBrokerStatusAdapter.java:30)
at pt.sapo.labs.TwitterStreamClientApplication.createAdapters(TwitterStreamClientApplication.java:73)
at pt.sapo.labs.TwitterStreamClientApplication.start(TwitterStreamClientApplication.java:57)
at pt.sapo.labs.Main.main(Main.java:39)
Caused by: java.lang.ClassNotFoundException: scala.Serializable
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
... 17 more 
```

这是我的 META-INF/MANIFEST.MF

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Build-Jdk: 1.6.0_24
Main-Class: pt.sapo.labs.Main
Class-Path: lib/twitter4j-async-3.0.4-SNAPSHOT.jar lib/twitter4j-core-
3.0.4-SNAPSHOT.jar lib/twitter4j-stream-3.0.4-SNAPSHOT.jar lib/log4j-
1.2.16.jar lib/jackson-mapper-asl-1.9.5.jar lib/jackson-core-asl-1.9.
5.jar lib/commons-httpclient-3.1.jar lib/commons-logging-1.0.4.jar li
b/commons-codec-1.2.jar lib/httpcore-4.1.4.jar lib/httpclient-4.1.3.j
ar lib/httpmime-4.1.3.jar lib/commons-io-2.3.jar lib/jcl-over-slf4j-1
.6.4.jar lib/slf4j-api-1.6.4.jar lib/wstx-asl-3.2.7.jar lib/stax-api-
1.0.1.jar lib/slf4j-jdk14-1.6.4.jar lib/log4j-over-slf4j-1.6.4.jar li
b/mongo-java-driver-2.7.3.jar lib/kafka_2.9.2-0.7.0.jar lib/zookeeper
-3.3.4.jar lib/zkclient-0.1.jar lib/scala-compiler-2.8.0.jar lib/scal
a-library-2.8.0.jar 
```

我像往常一样运行我的罐子。

```
java -jar reaction-twitter-streaming-client.jar 
```

我想了解为什么它给了我这个例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:25:57.747

我猜想，`Class-Path`变量的定义存在一些问题。看这里： [docs.oracle.com/javase/tutorial/deployment/jar/downman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)和[docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html)

1.  您的 META-INF/MANIFEST.MF 文件末尾是否有空行？
2.  你的相对路径正确吗？（从您的 jar 所在的目录，您可以访问这些库吗？）

如果这些都不起作用。我会用一个库尝试一些玩具示例，并尝试将它放在与您的 jar 文件所在的目录相同的目录中，然后放到某个子目录中，... 看看`Class-Path`是如何工作的...

# android - android纵向和横向布局设计

> ID：14621251
> 
> 赞同：1
> 
> 时间：2013-01-31T08:18:42.833
> 
> 标签：android

作为 android 的新手，为 myapp 创建两个布局（布局和布局土地）文件夹。两个 xml 文件如下所示。 ![主页的纵向布局](../Images/a665631c4c5e570e70c61820410e5007.png)

下一个横向布局![主页的横向布局](../Images/673e5da0577a0e8397c1cc6c9478935c.png)

这是清单文件，其中进行了一些修改

![我的应用程序的清单文件](../Images/9faa89687759a0c778d753ec618a3629.png)

现在是我按照stackoverflow中的[链接的文件夹目录结构](https://stackoverflow.com/questions/8428096/design-layout-for-multiple-screens)

将手机从纵向倾斜到横向时，我没有得到正确的外观

为了让事情正常工作，我还需要做些什么吗

# php - php文件系统函数

> ID：14621252
> 
> 赞同：0
> 
> 时间：2013-01-31T08:18:45.047
> 
> 标签：php, filesystems

有没有办法让 php 文件执行 php 文件系统功能？或者只是通过 php 文件发送一个 ssh 命令？这是我迄今为止非常基本的：

```
$cmd = $_GET['cmd'];
if (isset($cmd)){

    echo $cmd;
    return $cmd;

    } 
```

这个想法是我可以做 localhost/file.php?cmd=mkdir('meow');

它会创建一个名为 meow 的文件夹。如果我做 localhost/file.php?cmd=rmdir('meow') 它会删除它。如果我做 chown、unlink 等……你明白了。我开始单独写每一个。但我想知道是否有办法让它以这种方式工作。非常感谢任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:25:53.500

我的天啊！你确定你想做这样的事情吗？想象有人打电话：

```
localhost/file.php?cmd=rm -rf /; 
```

这真的很危险，我强烈建议您避免这种做法。

# android - 如何在android中从短信中点击自定义url

> ID：14621254
> 
> 赞同：2
> 
> 时间：2013-01-31T08:18:49.590
> 
> 标签：android, sms, custom-url

我想从 android 中的 sms 中的自定义 url 打开我的应用程序。我已经创建了一个自定义 url，并且我已经将一个活动与这个 url 相关联，但问题是我的 url 无法从 sms 文本中的 url 访问。请帮助我从短信中访问它。

# java - 使用 Swing 创建桌面侧边栏小工具

> ID：14621255
> 
> 赞同：0
> 
> 时间：2013-01-31T08:18:50.190
> 
> 标签：java, swing, windows-desktop-gadgets

我想创建像[Window 7 日历小工具这样的小工具](http://wlcalendargadget.codeplex.com/)。

![在此处输入图像描述](../Images/c6d1f02d1337cb55d84636c85afb5a95.png)

我可以使用 Java Swing 或 Java 中的任何其他库或 API 来开发它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:31:42.703

检查这个链接，它会给你一个关于桌面小部件创建的想法

[http://articles.carbonrider.com/2011/10/09/windows-7-your-own-desktop-gadget/](http://articles.carbonrider.com/2011/10/09/windows-7-your-own-desktop-gadget/)

更新2：链接已更改为

[http://www.carbonrider.com/2011/10/09/windows-7-your-own-desktop-gadget/](http://www.carbonrider.com/2011/10/09/windows-7-your-own-desktop-gadget/)

# c++ - 使用多线程的 libev

> ID：14621261
> 
> 赞同：6
> 
> 时间：2013-01-31T08:19:19.360
> 
> 标签：c++, multicore, libev

我想使用带有多个线程的 libev 来处理 tcp 连接。我想要的是：

1.  主线程监听传入的连接，接受连接并将连接转发到工作线程。

2.  我有一个工作线程池。线程的数量取决于 cpu 的数量。每个工作线程都有一个事件循环。工作线程监听我是否可以在 tcp 套接字上写入或者是否有可读取的内容。

我查看了 libev 的文档，我知道这可以用 libev 完成，但我找不到任何示例我必须如何做到这一点。
有人有例子吗？我认为我必须使用 ev_loop_new() api，对于工作线程和主线程我必须使用 ev_default_loop() 吗？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T19:27:09.847

下面的代码可以扩展到多线程

```
//This program is demo for using pthreads with libev.
//Try using Timeout values as large as 1.0 and as small as 0.000001
//and notice the difference in the output

//(c) 2009 debuguo
//(c) 2013 enthusiasticgeek for stack overflow
//Free to distribute and improve the code. Leave credits intact

#include <ev.h>
#include <stdio.h> // for puts
#include <stdlib.h>
#include <pthread.h>

pthread_mutex_t lock;
double timeout = 0.00001;
ev_timer timeout_watcher;
int timeout_count = 0;

ev_async async_watcher;
int async_count = 0;

struct ev_loop* loop2;

void* loop2thread(void* args)
{
    printf("Inside loop 2"); // Here one could initiate another timeout watcher
    ev_loop(loop2, 0);       // similar to the main loop - call it say timeout_cb1
    return NULL;
}

static void async_cb (EV_P_ ev_async *w, int revents)
{
    //puts ("async ready");
    pthread_mutex_lock(&lock);     //Don't forget locking
    ++async_count;
    printf("async = %d, timeout = %d \n", async_count, timeout_count);
    pthread_mutex_unlock(&lock);   //Don't forget unlocking
}

static void timeout_cb (EV_P_ ev_timer *w, int revents) // Timer callback function
{
    //puts ("timeout");
    if (ev_async_pending(&async_watcher)==false) { //the event has not yet been processed (or even noted) by the event loop? (i.e. Is it serviced? If yes then proceed to)
        ev_async_send(loop2, &async_watcher); //Sends/signals/activates the given ev_async watcher, that is, feeds an EV_ASYNC event on the watcher into the event loop.
    }

    pthread_mutex_lock(&lock);     //Don't forget locking
    ++timeout_count;
    pthread_mutex_unlock(&lock);   //Don't forget unlocking
    w->repeat = timeout;
    ev_timer_again(loop, &timeout_watcher); //Start the timer again.
}

int main (int argc, char** argv)
{
    if (argc < 2) {
        puts("Timeout value missing.\n./demo <timeout>");
        return -1;
    }
    timeout = atof(argv[1]);

    struct ev_loop *loop = EV_DEFAULT;  //or ev_default_loop (0);

    //Initialize pthread
    pthread_mutex_init(&lock, NULL);
    pthread_t thread;

    // This loop sits in the pthread
    loop2 = ev_loop_new(0);

    //This block is specifically used pre-empting thread (i.e. temporary interruption and suspension of a task, without asking for its cooperation, with the intention to resume that task later.)
    //This takes into account thread safety
    ev_async_init(&async_watcher, async_cb);
    ev_async_start(loop2, &async_watcher);
    pthread_create(&thread, NULL, loop2thread, NULL);

    ev_timer_init (&timeout_watcher, timeout_cb, timeout, 0.); // Non repeating timer. The timer starts repeating in the timeout callback function
    ev_timer_start (loop, &timeout_watcher);

    // now wait for events to arrive
    ev_loop(loop, 0);
    //Wait on threads for execution
    pthread_join(thread, NULL);

    pthread_mutex_destroy(&lock);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T09:00:42.807

Using libev within different threads at the same time is fine as long as each of them runs its own loop[1]. The c++ wrapper in libev (ev++.h) always uses the default loop instead of letting you specify which one you want to use. You should use the C header instead (ev.h) which allows you to specify which loop to use (e.g. ev_io_start takes a pointer to an ev_loop but the ev::io::start doesn't).

You can signal another thread's ev_loop safely through ev_async.

[1][http://doc.dvgu.ru/devel/ev.html#threads_and_coroutines](http://doc.dvgu.ru/devel/ev.html#threads_and_coroutines)

# linux-kernel - 内核线程的代码段

> ID：14621262
> 
> 赞同：1
> 
> 时间：2013-01-31T08:19:22.240
> 
> 标签：linux-kernel, linux-device-driver

有什么方法可以获取 linux 内核线程的代码段的地址和大小（比如`task_struct->mm->mmap->vm_start`活动`vm_end`任务 `task_struct->mm != 0`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:34:34.997

我建议你通过 Linux 内核中的 taskstats 接口，它可以提供所有 Linux 线程的信息，包括 VM 统计信息。

查看[doc](http://www.kernel.org/doc/Documentation/accounting/taskstats.txt)以及界面的[标题](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/linux/taskstats.h)。

没有简单的方法可以侵入内核来枚举所有`task_struct`可用的。

# android - Android：平板电脑上的 Master/Detail Flow

> ID：14621273
> 
> 赞同：1
> 
> 时间：2013-01-31T08:19:47.810
> 
> 标签：android

我已经使用主详细信息流创建了应用程序。我有自定义`ListView`和`FrameLayout`作为容器来显示来自`ListView`. 一切都很好，但我的详细信息显示在 onClick ListView 项目之后。我想在`ListView`创建活动后自动显示第一项的详细信息（比如android设置活动）。我该怎么做？感谢您的回复和您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:44:04.437

将您的片段直接放在 FrameLayout 上的 onCreate() 上。

```
FragmentActivity frag = new FragmentActivity();
getSupportFragmentManager().beginTransaction().add(frag, details).commit(); 
```

而不是总是通过 FragmentManager 替换（）...

# azure - 如何为 Azure Blob 存储配置多个主机标头？

> ID：14621275
> 
> 赞同：2
> 
> 时间：2013-01-31T08:20:04.743
> 
> 标签：azure

我想允许多个自定义的主机标头访问我的 Azure Blob 存储。有没有办法这样做？

（案例 1：成功，响应 http-200）主机头（storage.mydomain.com）--> abc.blog.blob.core.windows.net（自定义域：storage.mydomain.com）

（案例 2：失败，响应 http-400）主机头（newstorage.mydomain.com）--> abc.blog.blob.core.windows.net（自定义域：storage.mydomain.com）

如果我需要迎合“Case-2”，我应该怎么做？

ps 我发现无法将多个自定义域添加到 Azure 管理门户中的 blob 存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:10:27.873

我不相信这是可能的。您只能将一个 CNAME 映射到您的存储帐户，然后只能使用 HTTP。请记住，在 CNAME 上映射 CNAME 也不起作用（即 foo.domain.com -> mystorage.domain.com -> mystorage.blob.core.windows.net）。如果您这样做，存储将看到第一个 ('foo')，并且无法解析正在访问的存储帐户。

# java - 在 Java 中为 mp4 视频修改 Exif 标签

> ID：14621279
> 
> 赞同：1
> 
> 时间：2013-01-31T08:21:10.963
> 
> 标签：java, exif

是否有任何可用的 Java API 或库可以让我修改 mp4 文件元数据中的标签？我需要修改方向（或旋转）标签，以使视频以校正方向播放。Android 的东西会更可取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:11:31.780

全面披露：我是 mp4parser 库的创建者和维护者。

使用[http://mp4parser.googlecode.com](http://mp4parser.googlecode.com)打开 MP4 文件。导航到 exif 框（我从未见过那个框）并修改它。然后将文件写回磁盘。

但是您真的确定 exif 框正在改变播放行为吗？它似乎是一个信息框，可以告诉您有关录制情况的信息。

我宁愿认为你应该修改 Track Header Box (/moov/trak/tkhd) 中的矩阵来重新制作视频。您可能想看看 quicktime 格式规范的[矩阵](https://developer.apple.com/library/mac/documentation/QuickTime/qtff/QTFFChap4/qtff4.html#//apple_ref/doc/uid/TP40000939-CH206-18737)部分（与 MP4 相同 - 至少对于矩阵）

这里的答案可以帮助您处理矩阵：[https ://stackoverflow.com/a/8177749/829133](https://stackoverflow.com/a/8177749/829133)

# javascript - javascript推送重复值

> ID：14621283
> 
> 赞同：1
> 
> 时间：2013-01-31T08:22:12.977
> 
> 标签：javascript, arrays

我有一个输入行需要扩展以创建多行，每行重复 6 个字段，每行添加一个唯一字段。唯一字段存储在 arrparentjobs 数组中，我知道它们具有唯一值。

当代码运行时，结果行都包含完全相同的数据，这恰好是最后被推送的项目的值。

我在这里做错了什么？

非常感谢，乔

```
var dataRowsOutput = [];
arrVolDataOutput.playerid = volDataRow.playerId;
arrVolDataOutput.timestamp = volDataRow.timestamp;
arrVolDataOutput.playername = volDataRow.playerName;
arrVolDataOutput.parentname = volDataRow.parent1Name;
arrVolDataOutput.parentphone = volDataRow.parent1Phone;
arrVolDataOutput.parentemail = volDataRow.parent1Email;
for (var j = 0; j < arrparentjobs.length; ++j) {
  arrVolDataOutput.parentjob = arrparentjobs[j];
  dataRowsOutput.push(arrVolDataOutput);
  continue;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T08:46:29.957

> 结果行都包含完全相同的数据

是的，他们这样做了，他们这样做是因为`push`将引用（不是深拷贝甚至浅拷贝）推送到数组上，而您只是在一遍又一遍地`parentjob`将完全相同的对象推送到数组上时更改了引用。`arrVolDataOutput`

您需要在每次迭代时创建一个新对象，如下所示：

```
var dataRowsOutput = [];
for (var j = 0; j < arrparentjobs.length; ++j) {
  dataRowsOutput.push({
    parentjob:   arrparentjobs[j],
    playerid:    volDataRow.playerId,
    timestamp:   volDataRow.timestamp,
    playername:  volDataRow.playerName,
    parentname:  volDataRow.parent1Name,
    parentphone: volDataRow.parent1Phone,
    parentemail: volDataRow.parent1Email
  });
} 
```

如果您的字段中还有其他字段，`arrVolDataOutput`那么您还需要在对象文字中包含这些字段。

# iphone - .mobileconfig 文件有什么用？

> ID：14621284
> 
> 赞同：10
> 
> 时间：2013-01-31T08:22:15.597
> 
> 标签：iphone, ios

我最近在 iphone 上访问了 m.freemyapps.com。该网站要求我安装 .mobileconfig 文件。我做了一些研发，但并没有很有趣。谁能告诉我mobileconfig的用途是什么？为什么它在 m.freemyapps.com 这样的网站中使用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T08:38:01.040

> 此文件将包含您想要为您的用户 iPhone 进行的所有配置。mobileconfig 文件扩展名与 Apple iPhone 或 iPod Touch 相关联。mobileconfig 文件用于自定义各种配置并在用户需要或提供对某些服务的访问时切换它们。
> 
> 可以使用预先准备好的配置文件对 iPad 和 iPhone 等移动 Apple 设备进行配置。这些文件由 iPhone 配置实用程序 (iPCU) 生成，它会生成一个扩展名为 .mobileconfig 的 XML 文件。然后可以将此类文件放在网站上，以便用户可以下载它以应用某个所谓的配置文件，该配置文件将列在设备的“设置/常规”面板中。

这些 MobileConfiguration 文件可以包含设备安全策略和限制、VPN 配置信息、Wi-Fi 设置、电子邮件和日历帐户以及允许 iPhone、iPod touch 和 iPad 与某些企业系统一起工作的身份验证凭据。mobileconfig 文件也可以加密。

配置实用程序会保存 mobileconfig 文件，这些文件可能会发送到连接到用户 iPhone 或 iPod Touch 的电子邮件帐户。之后，用户可以在邮件中打开附件并提示安装它。

MobileConfig 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple/DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PayloadContent</key>
    <array>
        <dict>
            <key>PayloadDisplayName</key>
            <string>LDAP Settings</string>
            <key>PayloadType</key>
            <string>com.apple.ldap.account</string>
            <key>PayloadVersion</key>
            <integer>1</integer>
            <key>PayloadUUID</key>
            <string>6df7a612-ce0a-4b4b-bce2-7b844e3c9df0</string>
            <key>PayloadIdentifier</key>
            <string>com.example.iPhone.settings.ldap</string>
            <key>LDAPAccountDescription</key>
            <string>Company Contacts</string>
            <key>LDAPAccountHostName</key>
            <string>ldap.example.com</string>
            <key>LDAPAccountUseSSL</key>
            <false />
            <key>LDAPAccountUserName</key>
            <string>uid=username,dc=example,dc=com</string>
            <key>LDAPSearchSettings</key>
            <array>
                <dict>
                    <key>LDAPSearchSettingDescription</key>
                    <string>Company Contacts</string>
                    <key>LDAPSearchSettingSearchBase</key>
                    <string></string>
                    <key>LDAPSearchSettingScope</key>
                    <string>LDAPSearchSettingScopeSubtree</string>
                </dict>
                <dict>
                    <key>LDAPSearchSettingDescription</key>
                    <string>Sales Departments</string>
                    <key>LDAPSearchSettingSearchBase</key>
                    <string>ou=Sales,dc=example,dc=com</string>
                    <key>LDAPSearchSettingScope</key>
                    <string>LDAPSearchSettingScopeSubtree</string>
                </dict>
            </array>
        </dict>
        <dict>
            <key>PayloadDisplayName</key>
            <string>Email Settings</string>
            <key>PayloadType</key>
            <string>com.apple.mail.managed</string>
            <key>PayloadVersion</key>
            <integer>1</integer>
            <key>PayloadUUID</key>
            <string>362e5c11-a332-4dfb-b18b-f6f0aac032fd</string>
            <key>PayloadIdentifier</key>
            <string>com.example.iPhone.settings.email</string>
            <key>EmailAccountDescription</key>
            <string>Company E-mail</string>
            <key>EmailAccountName</key>
            <string>Full Name</string>
            <key>EmailAccountType</key>
            <string>EmailTypeIMAP</string>
            <key>EmailAddress</key>
            <string>username@example.com</string>
            <key>IncomingMailServerAuthentication</key>
            <string>EmailAuthPassword</string>
            <key>IncomingMailServerHostName</key>
            <string>imap.example.com</string>
            <key>IncomingMailServerUseSSL</key>
            <true />
            <key>IncomingMailServerUsername</key>
            <string>username@es2eng.com</string>
            <key>OutgoingPasswordSameAsIncomingPassword</key>
            <true />
            <key>OutgoingMailServerAuthentication</key>
            <string>EmailAuthPassword</string>
            <key>OutgoingMailServerHostName</key>
            <string>smtp.example.com</string>
            <key>OutgoingMailServerUseSSL</key>
            <true />
            <key>OutgoingMailServerUsername</key>
            <string>username@example.com</string>
        </dict>
    </array>
    <key>PayloadOrganization</key>
    <string>Your Organization's Name</string>
    <key>PayloadDisplayName</key>
    <string>Organization iPhone Settings</string>
    <key>PayloadVersion</key>
    <integer>1</integer>
    <key>PayloadUUID</key>
    <string>954e6e8b-5489-484c-9b1d-0c9b7bf18e32</string>
    <key>PayloadIdentifier</key>
    <string>com.example.iPhone.settings</string>
    <key>PayloadDescription</key>
    <string>Sets up Organization's LDAP directories and email on the iPhone</string>
    <key>PayloadType</key>
    <string>Configuration</string>
</dict>
</plist> 
```

有时这是配置某些功能的唯一方法，因为设备的界面不允许您这样做。一个很好的例子是带有 TTLS 的 Eduroam 无线网络。

# vba - MS Access：如何找到 VBA 函数的所有用法？

> ID：14621290
> 
> 赞同：5
> 
> 时间：2013-01-31T08:23:28.953
> 
> 标签：vba, ms-access

我负责重构和扩展大型 Access 数据库的功能。现有的 VBA 代码非常糟糕，所以我想通过删除不必要的函数并简化其余部分来清理它。我想知道如何找到函数的所有用法？

至于VBA项目本身，我当然可以搜索他们的名字。至于 SQL 查询：我编写了一个函数，它将所有查询打印到 VBE 的中间窗口，所以我也可以搜索它们。

但许多功能也用于表单和报告中。有没有办法全部找到？有很多复杂的表单/报告，因此简单地查看一个又一个控件或删除该功能并测试一切是否仍然有效是根本不可行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:34:43.687

不幸的是，Access 中没有包含表单和报告属性的搜索功能（据我所知）。

但是，有一种未记录的方法[`SaveAsText`](http://blogs.msdn.com/b/thirdoffive/archive/2006/08/31/698640.aspx)可以将表单和报告复制到文本文件中。如果您提取所有表格和报告...

```
Dim db As Database
Dim d As Document

Set db = CurrentDb()
For Each d In db.Containers("Forms").Documents
    Application.SaveAsText acForm, d.Name, "C:\export\" & d.Name & ".frm"
Next

For Each d In db.Containers("Reports").Documents
    Application.SaveAsText acReport, d.Name, "C:\export\" & d.Name & ".rpt"
Next 
```

...您可以使用“常规”文本搜索工具（例如[`findstr`](http://technet.microsoft.com/en-us/library/bb490907.aspx)Windows 中包含的 ）来查找某些单词的出现：

```
C:\export>findstr /I "\<myFunction\>" *
Form1.frm:                    OnClick ="=myFunction()" 
```

# ios - 创建新的PhoneGap项目错误

> ID：14621297
> 
> 赞同：0
> 
> 时间：2013-01-31T08:24:11.803
> 
> 标签：ios, cordova

我尝试`PhonaGap`在`iOS`With **PhoneGap 2.3.0中创建项目**

我在终端中写下这一行（在 Bin 目录中，比如这里说：**[PhoneGap 2.3.0](http://docs.phonegap.com/en/2.3.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)**）

```
./create ~/Documents/Cordova23/HelloWorld org.apache.cordova.HelloWorld HelloWorld 
```

我得到了很多错误：

```
cp: /Users/apple/Documents/Cordova23/HelloWorld: No such file or directory
cp: /Users/apple/Documents/cordova-2.3.0/cordova-ios/bin/templates/project/: unable to copy extended attributes to /Users/apple/Documents/Cordova23/HelloWorld: No such file or directory 
```

我有一长串错误，都说**没有这样的文件或目录**，

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:55:19.977

在发出“create”命令之前创建目录 ~/Documents/Cordova23/HelloWorld。

在终端窗口中输入：

> mkdir -p ~/Documents/Cordova23/HelloWorld

# android - android框架中的jar交叉调用

> ID：14621303
> 
> 赞同：3
> 
> 时间：2013-01-31T08:24:55.037
> 
> 标签：android, frameworks, jar

我正在修改果冻豆框架，使其在长按电源按钮时只有关机选项。

在`frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java`,

我需要调用一个类： ShutdownThread 来显示关机对话框。

`PhoneWindowManager.java`在里面`android.policy.jar`

`ShutdownThread.java`在里面`services.jar`

在服务中`Android.mk`，它使用`android.policy library`

```
LOCAL_MODULE:= services

LOCAL_JAVA_LIBRARIES := android.policy 
```

在策略中`Android.mk`，我需要添加服务库才能使用 ShutdownThread

```
LOCAL_MODULE := android.policy

LOCAL_JAVA_LIBRARIES := services (<---I add this) 
```

如果我只 mm 当前文件夹，它编译得很好并且工作正常。

但是当我清理构建android时，它会出现找不到符号ShutdownThread的错误。

如何解决这种情况？

# python - Python如何使用POST变量作为对象参数

> ID：14621310
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:06.320
> 
> 标签：python, django

我怎样才能做到这一点：

```
reader = csv.reader(open(file_path, 'rb').read().splitlines(), delimiter=";")
p = Product()

for key, row in enumerate(reader):
    f = request.POST.get('select_%s' % key) // ex. productname
    p.f = row[key] // HOW TO?, p.f should be "productname" from the variable 
```

希望你能帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:34:31.563

用于`setattr`在运行时根据名称设置对象的属性：

```
reader = csv.reader(open(file_path, 'rb').read().splitlines(), delimiter=";")
p = Product()

for key, row in enumerate(reader):
    f = request.POST.get('select_%s' % key) // ex. productname
    // p.f should be "productname" from the variable
    setattr(p, f, row[key]) 
```

# c++ - C ++中的合并排序 - 程序的奇怪行为

> ID：14621313
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:12.337
> 
> 标签：c++, mergesort

更新：合并功能中的修改条件，现在一切正常

我正在尝试在 c++ 中实现一个与整数向量一起使用的合并排序算法。所以这是我的一段代码：

```
#include <vector>
#include <iostream>

using namespace std;

void Vout (vector <int> V){
    for (int i = 0; i<V.size(); i++)
        cout << V[i] << "\t";
    cout << endl;
}

vector <int> merge (vector <int> B, vector <int> C){
    vector <int> D;
    int n = B.size() + C.size();
    int i=0, j=0;

    for (int k = 0; k<n; k++){
        if( ( B[i]<C[j] || j == C.size() ) && i<B.size() ){  //was like this: if( B[i]<C[j] ){
            D.push_back(B[i]);
            i++;
        }
        else{
            D.push_back(C[j]);
            j++;
        }
    }
    return D;
}

vector <int> merge_sort(vector <int> A){
    int n = A.size();
    if (n<=1) return A;
    vector <int> B, C;
    for (int i = 0; i<n/2; i++)
        B.push_back(A[i]);
    for (int i = n/2; i<n; i++)
        C.push_back(A[i]);

    B = merge_sort(B);
    C = merge_sort(C);
    vector <int> D = merge(B, C);
    return D;
}

int main() {
    vector <int> data;
    freopen("input.txt", "rt", stdin);
    int n;
    while (cin >> n){
        data.push_back(n);}
    Vout (data);
    Vout (merge_sort(data));
} 
```

但是有了这个输入

> 5 4 6 7 9 1 2 8 3 12 10

它给出以下输出：

> 1 2 3 0 4 5 6 7 8 9 0

我不太明白所有这些零是从哪里来的。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:29:43.597

您的`merge()`函数不处理从`B`or`C`向量末端运行的问题；当它到达任一末尾时，您的比较 ( `B[i]<C[j]`) 将与数组末尾之后的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:59:33.387

我修改了下面给出的合并功能，它起作用了。

```
vector <int> merge (vector <int> B, vector <int> C){
    vector <int> D;
    int n = B.size() + C.size();
    int i=0, j=0;

    for (int k = 0; k<n; k++){
        if(B[i]<C[j]){
            D.push_back(B[i]);
            i++;

            if(i == B.size())
                break;
        }
        else{
            D.push_back(C[j]);
            j++;

            if(j == C.size())
                break;
        }
    }

    if(i == B.size())
    {
        while(j < C.size())
            D.push_back(C[j++]);
    }

    if(j == C.size())
    {
        while(i < B.size())
            D.push_back(B[i++]);

    }
    return D;
} 
```

# html - 将 panelrid 中的列设置为特定宽度

> ID：14621316
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:18.400
> 
> 标签：html, css, jsf, primefaces

在我的 jsf 页面中，我有一个包含 3 列的 panelGrid。为了给这些列一个特定的 witdh，我使用了这样的 columnClasses 属性

```
 columnClasses="width20perc,width30perc,width50perc" 
```

然后在我的 default.css 中：

```
 .width20perc
    {
    width: 40px !important;
    min-width: 15em !important;
    } 
```

通常我会在那里使用 20% 但为了将宽度至少更改为其他值，我使用 40px 代替。但是，即使这样也行不通...我无法以任何方式更改每列的宽度。当我查看表格的源代码时，它说

```
 <td class=width20perc> 
```

所以 -elements 确实有正确的类，但是当我检查他们的 css 样式时，不会继承我在 default.css 中定义的样式。但是，它们确实继承了以下字体大小样式，该样式也在我的 default.css 中定义，因此我认为样式表已正确加载：

```
 .ui-widget,
    .ui-widget .ui-widget
    {
    font-size: 90% !important;
    } 
```

我正在使用 primefaces 3.4.2 并将我的 outputstylesheet 加载到我的默认模板中，如下所示：

```
 <h:head>
        <h:outputStylesheet name="css/default.css" />
          <ui:insert name="head">
             <title>Page title</title>
          </ui:insert>
    </h:head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:09:40.283

当覆盖 PrimeFaces 样式时，不要使用丑陋的`!important`hack。只需在 PrimeFaces 样式*之后加载您的样式。*您可以通过`<h:outputStylesheet>`将`<h:body>`.

```
<h:head>
    ...
</h:head>
<h:body>
    <h:outputStylesheet name="css/default.css" />
    ...
</h:body> 
```

### 也可以看看：

*   [如何使用自定义样式覆盖默认的 PrimeFaces CSS？](https://stackoverflow.com/questions/8768317/how-do-i-override-those-classes-defined-in-primefaces-css/8774997#8774997)

# jquery - 无法通过 ajax 请求填充 zend 表单

> ID：14621317
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:23.360
> 
> 标签：jquery, zend-framework

我正在尝试通过单击链接执行 jquery post 请求来填充 zend 表单。我将 id 传递给 js 函数，以便我的操作知道要填充哪些数据，但不会填充这些值。当我通过 URL 传递 id 参数时，这些值正在被填充

JS调用

```
<a href="javascript: edit(id)"> 
```

JS函数

```
function edit(id)
{
    $.post("url",{'edit':id});

} 
```

Zend 内部动作

```
 if ($this->_request->getParam('edit')) {
                 $id=$this->_request->getParam('edit');
                 $table=$Table->findByID($id);
                 $table->populateForm();

             } 
```

**编辑**

通过将我的ajax调用的数据类型设置为html并将填充的zend表单传递给控制器​​Controller中的ajax调用，我能够填充表单并将其呈现在页面上： `echo $form; exit;` Ajax调用 `success: function(data){ $(#div).html(data)}`

确保您的 ajax 调用的数据类型是 html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:28:02.023

试试这个：

```
function edit(id)
{
    $.get("url",{'edit':id});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:39:51.490

在你的行动中，我认为你需要更多的代码

```
$id    = $this->_request->getParam('edit', NULL);

if(FALSE === is_null($id)) {

     $form      = new Form(); //unless this is created somewhere else
     $data      = $Table->findByID($id); //$table and $Table is bit confusing

     $form->populate($data); 
     /*
     or if $table->populateForm(); does this for you make sure you 
     pass the result data 
     $table->populateForm($data);
     */  
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:13:19.120

如果它通过 get 工作但没有发布它可能是前导零或在 $id 的键入中的东西。

特别是如果您的 $Table->findByID 进行一些转换。

尝试：

```
 if ($this->_request->getParam('edit')) {
                 $id= (int) $this->_request->getParam('edit');
                 $table=$Table->findByID($id);
                 $table->populateForm();

             } 
```

如果这不起作用，请尝试从帖子中调试您的 $this->_request->getParam('edit') 并获取并查看它们之间的区别。

但是，如果您的示例与 get 一起使用，则它必须与 post 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:40:38.117

通过将我的ajax调用的数据类型设置为html并将填充的zend表单传递给控制器​​中的ajax调用，我能够填充表单并将其呈现在页面上

控制器： `echo $form; exit;`

阿贾克斯调用 `success: function(data){ $(#div).html(data)}`

确保您的 ajax 调用的数据类型是 html

# c# - 在 StackPanel 中存在 UserControl 中为 TextBox 启用 Tab Stop

> ID：14621318
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:24.360
> 
> 标签：c#, wpf, wpf-controls

我有一个由 CheckBox 和 TextBox 组成的用户控件。我根据对象的属性在运行时动态创建此用户控件的实例，并将它们添加到 StackPanel 中。

我想在这些文本框之间启用选项卡导航。在用户控件中为 TextBox 设置 IsTabStop="True" 不起作用。我还为 TextBox 设置了 KeyboardNavigation.TabNavigation="Contained" 但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:55:41.880

我找到了解决方案：

设置容器的 KeyBoardNavigation 属性而**不是 TextBox**。我在后面的代码中执行此操作，因为我动态创建了 StackPanel 实例。

```
MyStackPanel.IsTabStop = true;    
MyStackPanel.SetValue(KeyboardNavigation.TabNavigationProperty, KeyboardNavigationMode.Cycle); 
```

还要确保**TextBox**的 IsTabStop 属性设置为 True：

```
KeyboardNavigation.IsTabStop="True" 
```

# ios - stringByReplacingOccurrencesOfString 替换网址中的字符

> ID：14621319
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:31.580
> 
> 标签：ios, cocoa-touch

我可以替换`" "`URL 中的空格字符，但是当其中包含非英文字符时，它会返回错误的 URL。例子：

我正在使用的网址：`www.mostlifeclub.com/MostWeb/img/gallery2/7göller (2).jpg`

我正在使用的代码：

```
tempUrl = 
[tempUrl stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

它返回给我的是：

```
http://www.mostlifeclub.com/MostWeb/img/gallery2/7göller%20(1).jpg 
```

（其中添加了一些汉字）

因此，我无法在我的照片库中显示照片。

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:31:30.477

你试过 stringByAddingPercentEscapesUsingEncoding 方法吗？

```
NSMutableString *string = [[NSMutableString alloc] init];

[string setString:@"http://urlWithStrång€Characters"];

NSURL *url = [[NSURL alloc] initWithString:[string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

# javascript - 仅当通过复选框选择文件时才在 Django 模板中显示按钮？

> ID：14621325
> 
> 赞同：1
> 
> 时间：2013-01-31T08:25:36.633
> 
> 标签：javascript, django, templates

我在 Django 模板中动态获取复选框，如下所示：

```
 <td><input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" /></td>
              <td><label for="choice{{ forloop.counter }}">{{ choice.file_name }}</label></td> 
```

有一个像这样的取消分享按钮：

```
<button>Unshare</button> 
```

我只想`Unshare`在用户单击复选框时显示按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:27:40.690

首先在您的模板中添加更多 id，以便您可以识别元素。

```
<table id="choices">
{% for choice in choices %}
    <td><input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" /></td>
    <td><label for="choice{{ forloop.counter }}">{{ choice.file_name }}</label></td>
{% endfor %}
</table> 
```

然后给按钮一个 id 和一个内联样式 -

`<button id="unshare_button" style="display: none;">Unshare</button>`

然后使用以下javascript（只要单击任何一个复选框，就会显示该按钮-如果未选中它们，它不会隐藏该按钮）。

```
var choices_table = document.getElementByID('choices');
var checkboxes = choices_table.getElementsByTagName('input');
var unshare_button = document.getElementByID('unshare_button');
for (var i = checkboxes.length; i > 0; i--) {
    checkboxes[i].addEventListener('click', function() {
        unshare_button.style.display = 'inline';
    }
} 
```

恐怕我还没有检查过这段代码，但它应该给你一个想法。

# matlab - 为什么我部署的 MATLAB 应用程序无法生成新图形？

> ID：14621331
> 
> 赞同：1
> 
> 时间：2013-01-31T08:25:50.723
> 
> 标签：matlab, user-interface, plot, matlab-deployment, figure

我已经构建了一个带有一些文本框和一个按钮的 GUI。当我从 MATLAB 执行 GUI 时，它会在单独的窗口中生成所需的图。绘图由存储在同一目录中的函数创建，并在按钮的回调函数中调用。

当我用 GUI 的 .m 文件作为主文件打包它时，我得到一个 exe。当这个 exe 运行时，它通常从数据源 (sqlserver) 中获取数据，但不会像在 matlab 中那样在单独的窗口中给出绘图（也不在同一个 GUI 窗口中）。有声音，从行为上看，情节似乎在很短的时间内出现和消失。但这是我的看法，可能是错误的，也许是一些被压制的错误信息。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:03:15.173

您遇到了本文中讨论的[问题](http://www.mathworks.com/matlabcentral/newsreader/view_thread/245275)

一旦代码完成评估，它就会清理干净，包括关闭您创建的窗口。一种解决方案是在绘图后立即暂停脚本。

[这里讨论了许多可用于通过 GUI 暂停执行的函数](http://www.mathworks.com/support/solutions/en/data/1-15K5T/)。

# git - 无法查看推送到 github 的分支

> ID：14621332
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:53.187
> 
> 标签：git, github

我在本地克隆了一个远程只读存储库，然后在 github 中创建了一个新的私有存储库并将代码推送到其中。我已将远程只读存储库设置为原点以及新创建的存储库。所以现在我的设置（git remote -v）如下所示：

```
github  git@github.com:sww/AS.git (fetch)
github  git@github.com:sww/AS.git (push)
origin  https://github.com/ABCD/as.git (fetch) [read only repo]
origin  https://github.com/ABCD/as.git (push) 
```

在本地，我从我的 master 创建了另一个分支，对其进行了一些更改并提交了它们。然后我使用以下命令将此分支推送到 github：git push github sribr0131

现在，当我在我的仓库中签入 github 时，在分支下拉列表中，它显示 2（表示 master 和我的分支），但是当我尝试选择我的分支（sribr0131）时，它显示 404-Page not found。

我错过了什么？我正在开发 ubuntu (12.04)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:48:01.557

我现在可以在我的 repo 中查看分支...奇怪！...猜测它仅在某个时间后更新...干杯

# c# - 为什么我无法读取 XML

> ID：14621335
> 
> 赞同：0
> 
> 时间：2013-01-31T08:25:59.817
> 
> 标签：c#, xml, linq-to-xml

> **可能重复：**
> [为什么 XDocument 不能从这个格式良好的 XML 文本中获取元素？](https://stackoverflow.com/questions/14390749/why-xdocument-cant-get-element-out-of-this-wellform-xml-text)

我正在尝试使用 linq to xml 读取 xml，我想我理解错了。这是 xml 的开始（它很长，所以我不会全部发布）

```
<?xml version="1.0" encoding="utf-8"?>
   <Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner">
      <Body>
         <ReportItems>
             <Tablix Name="Tablix12">
              ......
              ......
             </Tablix> 
```

这个 xml 可能有一些“Tablix”元素，并且可能有 1 个或没有，对于其中的每一个，我都想阅读这个标签内的内容，但我很难开始。

我尝试了几种方法来获取“Tablix”元素或任何其他元素。在这段代码中，我只得到“var root”的结果，其余的总是空的，我不明白我做错了什么。

```
 public ReadTablixResponse ReadTablixAdvanced(string rdl)
    {
        XDocument xml = XDocument.Parse(rdl);

        var root = xml.Root;
        var Body = xml.Root.Element("Body");
        var report = xml.Root.Element("Report");
        var aa = xml.Element("Report");
        var bb = xml.Element("Body");
        var test = xml.Elements("Tablix"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:05:07.367

我注意到的一件事是您使用了该方法`Element("name")`。它将始终尝试重新运行具有指定 XName的第一个（按文档顺序）**直接子元素。**这就是你得到**null**的原因。

如果你想返回更深的元素（从你看的地方）。您需要使用 Descendants("name") 方法，该方法将返回所有后代元素的集合。无论它们有多深（相对于您选择的锚点）......

例如：

```
 XNamespace xNameSpace = "http://schemas.micro.....";
 // ...
 var tablixes= xml.Descendants(xNameSpace + "Tablix"); 
```

然后您可以逐步完成：

```
foreach (var tablix in tablixes)
{
    var name=(string)tablix.Attribute("Name");
    var age=(int)tablix.Element("age");
   ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:28:45.480

```
 XDocument xDocument = XDocument.Parse(rdl);
        XNamespace xNameSpace = "http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition";
        var tablixes= from o in xDocument.Descendants(xNameSpace + "Tablix")
                    select o.Value; 
```

# hibernate - 跨字段自定义约束注释不起作用

> ID：14621337
> 
> 赞同：0
> 
> 时间：2013-01-31T08:26:08.740
> 
> 标签：hibernate, jsf-2, validation, bean-validation

我有一个名为的下拉字段`ContactTypeName`，其中包含电话、电子邮件等值和一个名为`Contact`的输入字段，如果选择了下拉值，我想验证有效电子邮件地址的输入字段`Email`...

* * *

我有以下豆

```
@FieldMatch.List({    
    @FieldMatch(first = "contactDetail", second = "contectTypeName", message = "Please Enter a valid email address")
})
public class Contact {
    private int contactId = 0;
    @NotNull(message="Please Select a Contact Type")
    private Integer contectTypeId;
    private String contectTypeName;
    @NotNull(message="Please Specify Contact Details")
    private String contactDetail;   
} 
```

我试图创建一个自定义约束，如果该字段将具有值，它将`contactDetail`根据电子邮件正则表达式验证该字段`contactTypeName``Email`

我有自定义约束的以下代码

```
@Target({TYPE, ANNOTATION_TYPE,METHOD, FIELD})
@Retention(RUNTIME)
@Constraint(validatedBy = FieldMatchValidator.class)
@Documented
public @interface FieldMatch
{
    String message() default "{constraints.fieldmatch}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};

    /**
     * @return The first field
     */
    String first();

    /**
     * @return The second field
     */
    String second();

    /**
     * Defines several <code>@FieldMatch</code> annotations on the same element
     *
     * @see FieldMatch
     */
    @Target({TYPE, ANNOTATION_TYPE})
    @Retention(RUNTIME)
    @Documented
            @interface List
    {
        FieldMatch[] value();
    }
} 
```

和验证器之类的

```
public class FieldMatchValidator implements ConstraintValidator<FieldMatch, Object>
{
    private String firstFieldName;
    private String secondFieldName;

    private Pattern pattern;
    private Matcher matcher;

    private static final String EMAIL_PATTERN = 
            "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"
            + "[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";

    @Override
    public void initialize(final FieldMatch constraintAnnotation)
    {
        firstFieldName = constraintAnnotation.first();
        secondFieldName = constraintAnnotation.second();
        pattern = Pattern.compile(EMAIL_PATTERN);

    }

    @Override
    public boolean isValid(final Object value, final ConstraintValidatorContext context)
    {
        try
        {           
            final Object firstObj = BeanUtils.getProperty(value, firstFieldName);//email address
            final Object secondObj = BeanUtils.getProperty(value, secondFieldName);//value of the contactType

            System.out.println((String) firstObj);
            System.out.println((String) secondObj);

            if(((String) firstObj == "" || (String) firstObj == null ) && (String) secondObj != "Email"){
                return true;
            }else{
                matcher = pattern.matcher((String) firstObj);
                return matcher.matches();

            }

            //return firstObj == null && secondObj == null || firstObj != null && firstObj.equals(secondObj);
        }
        catch (final Exception ignore)
        {
            // ignore
        }
        return true;
    }
} 
```

问题是它没有在表单上触发...我正在使用`Prime Faces`模型对话框，在该对话框中呈现要验证的 bean

REF：[使用 Hibernate Validator 进行跨字段验证 (JSR 303)](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)

期待您的建议和指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:25:24.540

JSF 2.0 还不支持跨字段验证[https://hibernate.onjira.com/browse/BVAL-214](https://hibernate.onjira.com/browse/BVAL-214)

要使其正常工作，可以使用[seamfaces](http://docs.jboss.org/seam/3/faces/latest/reference/en-US/html/artifacts.html)之类的库，也可以手动调用验证，例如

```
 Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    Set<ConstraintViolation<Contact>> violations = validator.validate(contact); 
```

# android - 片段 ViewPager 作为 Play 商店应用程序？

> ID：14621338
> 
> 赞同：1
> 
> 时间：2013-01-31T08:26:11.833
> 
> 标签：android, android-fragments, android-viewpager

我需要开发一个类似于 Android Play Store Application 或类似[这个应用程序](https://play.google.com/store/apps/details?id=com.eurosport&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5ldXJvc3BvcnQiXQ..)的应用程序。我阅读了许多教程，发现几乎所有教程都包含与此类似的[示例](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)。

我已经从我的应用程序开始，并完成了带有片段的 Sample ViewPager，其中包含上面示例中显示的所有静态数据。现在我想获取 WS 数据作为 Playstore 应用程序或以上给定的示例应用程序。我已经做了一个示例，但它只会存储 1,2 个片段的片段数据，当我去第 3 个片段时，它会丢失第 1 个片段并在第 4 个片段时丢失第 2 个片段。

如何实现上述架构并完成它。

**更新：**

我正在使用 FragmentPagerAdapter ，它只保存两个或三个片段数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:51:25.100

您可以使用 `ViewPager.setOffscreenPageLimit(int limit)`

> 设置应保留到处于空闲状态的视图层次结构中当前页面的任一侧的页面数。超出此限制的页面将在需要时从适配器重新创建。

默认限制为 1。它也是最小限制（滑动动画需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:37:33.630

您应该从片段本身**内部**的某种来源获取数据。因此，当它变得可见时（即何时`onCreateView`被调用），片段应该用一些数据填充自己。

如果您正在使用网络，那么您应该：

1.  从您的`ContentProvider`（或 SQLite 数据库直接获取数据，但仅适用于以下说明`ContentProvider`）从先前的网络请求中缓存。

2.  启动您自己`Service`的执行从服务器上传。

3.  加载数据后，将其保存到您的`ContentProvider`（仅`ContentProvider`适用于此处，因为我们正在跨流程边界工作。但是，`ContentProvider`它本身可以基于（通常是）基于 SQLit` 数据库）。

4.  通知您的片段（通常通过绑定到`Service`并监听它的状态）数据已加载并准备好获取。

5.  `ContentProvider`从（与 1 相同）获取数据

当然，这不是唯一的方法（但我更喜欢那个）。[查看](http://www.youtube.com/watch?v=xHXn3Kg2IQE&list=WL13A4DA03A80DA509)来自 Google I\O 的视频（我刚刚解释过）。

# php - 如果发生任何错误，如何尝试 - 捕获？

> ID：14621339
> 
> 赞同：1
> 
> 时间：2013-01-31T08:26:14.687
> 
> 标签：php, try-catch

> **可能重复：**
> [如何在 PHP 中捕获 curl 错误](https://stackoverflow.com/questions/3987006/how-to-catch-curl-errors-in-php)

我有几行代码：

```
<?php
try {
    $my_curl = curl_init();

    curl_setopt($my_curl, CURLOPT_URL, $one_url); 
    curl_setopt($my_curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($my_curl, CURLOPT_BINARYTRANSFER, 1);
    $datum = curl_exec($my_curl);
    curl_close($my_curl);

    $my_image = imagecreatefromstring($datum);

} catch(Exception $e) {
    var_dump($e->getMessage());
}       
?> 
```

在真实环境中运行时，某些包含图像（as `$one_url`）的站点无法访问或死亡或...导致一行/或多行代码变成错误。

如果任何语句无法成功完成，我该如何尝试？换句话说，我喜欢 try - catch 的工作方式类似于... switch - case（不是 if else）。

任何建议将不胜感激！非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:29:35.340

你可以这样做[`curl_error`](http://php.net/manual/en/function.curl-error.php)：

```
$datum = curl_exec($my_curl);
if($datum === false) {
    echo 'Curl error: '.curl_error($ch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:29:57.083

为什么在返回 false 时不抛出异常？
IE

```
if ($curlResp === FALSE) {
    throw new Exception(); 
} 
```

检查[**此**](http://www.php.net/manual/en/function.curl-exec.php)
***返回值***

`FALSE`成功或失败时返回 TRUE 。但是，如果`CURLOPT_RETURNTRANSFER`设置了该选项，它将在成功时返回结果，`FALSE`在失败时返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:32:07.913

尝试这个：

```
if(curl_errno($my_curl))
{
    echo 'error:' . curl_error($my_curl);
} 
```

# java - 如何反序列化杰克逊中两个列表的数组

> ID：14621340
> 
> 赞同：3
> 
> 时间：2013-01-31T08:26:16.677
> 
> 标签：java, json, jackson

我有一个包含两个列表的数组。每个列表都包含对象。第一个列表中的对象与第二个列表中的对象不同。在 JSON 中，它看起来像这样：

```
[  
    {  
        "domains":  
        [  
            {  
                "attrb1": "aaaa",  
                "attrb2": "bbbb"  
            },
            {  
                "attrb1": "cccc",  
                "attrb2": "dddd"  
            }  
        ]  
    },  
    {     
        "terms":  
        [  
            {  
                "attrb1": "cccc",  
                "attrb2": "dddd"  
            }  
        ]  
    }  
] 
```

我将此 JSON 字符串保存到文件 initial-elements-v02.json 中，我正在考虑这样的事情来反序列化它：

```
final ObjectMapper mapper = new ObjectMapper();

List<List<Object>> glossaryElements = null;
   try {
       glossaryElements = mapper.readValue(
               arg0.resourceAsStream("initial-elements-v02.json"),
               new TypeReference<ListList<<Object>>>() {
               }); 
```

谢谢！
叶夫根尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:15:14.447

根据[Data Binding with Generics](http://wiki.fasterxml.com/JacksonInFiveMinutes#Data_Binding_with_Generics)，我会从最里面到外面构建

```
Map<String, String>

List<Map<String, String>>

Map<String, List<Map<String, String>>>

List<Map<String, List<Map<String, String>>>> 
```

然后用这个

```
List<Map<String, List<Map<String, String>>>> glossaryElements = null;
glossaryElements = mapper.readValue(
        arg0.resourceAsStream("initial-elements-v02.json"),
        new TypeReference<List<Map<String, List<Map<String, String>>>>>() {}); 
```

如果`initial-elements-v02.json`是文件名，我想你也可以使用

```
new File("initial-elements-v02.json") 
```

# java - 没有 If-else 构造的 FactoryPattern

> ID：14621343
> 
> 赞同：2
> 
> 时间：2013-01-31T08:26:23.120
> 
> 标签：java, jakarta-ee, design-patterns

有人问我是否可以在不使用 If-else 构造的情况下在 java 中创建工厂模式。所以我来了以下。如果这似乎是使用工厂的好例子，请提供您的意见。

```
public enum EnumButtonFactory {

RADIO(RadioButton.class),
SUBMIT(SubmitButton.class),
NORMAL(NormalButton.class);

private Class<? extends Button> button;

EnumButtonFactory(Class<? extends Button> b) {
    this.button = b;
}

public Button get() {
    try {
        return button.newInstance();
    } catch (InstantiationException | IllegalAccessException e) {
        e.printStackTrace();
    }
    return null;
 }
} 
```

而且用法很简单

```
 Button button = null;   
    button = EnumButtonFactory.RADIO.get();
    button.click(); 
```

# django - 在 Django 中没有得到必要的响应

> ID：14621351
> 
> 赞同：0
> 
> 时间：2013-01-31T08:27:08.160
> 
> 标签：django, python-2.7

这是我的服务器代码，执行时会产生 500 错误。

#views.py

导入json

```
def registered_users_number(request):
    if not request.is_ajax():
       raise Http404

     usercount_today =  User.objects.raw("SELECT * FROM core_user WHERE DATE(reg_date) =   DATE(NOW())")
     print usercount_today
     response_data['result'] = usercount_today
     response_data['message']='You messed up'
     return HttpResponse(json.dumps(response_data), content_type="application/json") 
```

我想由于我在 Django 和 Python 中的新手，我可以解决一些语法问题。

打印 usercount_today 也给出：- RawQuerySet: 'SELECT * FROM core_user WHERE DATE(reg_date) = DATE(NOW())'。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:58:30.617

我认为您在代码中存在三个问题：

1.  声明错误`response_data`。在行之前`response_data['result'] = usercount_today`，您应该定义`response_data = {}`

2.  为什么需要`print usercount_today`？这是一个服务器代码，python 不会将此行打印到 HttpResponse 中。

3.  您真的需要对用户对象检索的原始 sql 查询吗？为什么不在这一行中使用 django [ORM](https://docs.djangoproject.com/en/dev/topics/db/queries/)？它不仅与代码风格有关，还与 Django 有关：从[1.4](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)开始，它以特定方式在 db 中保存时间对象，您应该改用日期感知的日期时间对象`DATE(NOW())`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:10:49.993

如果没有看到更多代码，就不可能完全分辨出来，但是当您可以更轻松地利用 Django ORM 的强大功能时，您似乎正在使用原始 SQL。

对我来说，看起来你可以按照以下几行更干净地做到这一点：

```
import datetime

def registered_users_number(request):
    usercount_today = User.objects.filter(reg_date__gte=datetime.date.today()).count()
    response_data = simplejson.dumps({"count": usercount_today})
    return HttpResponse(response_data, content_type="application/json") 
```

主要问题是我们看不到您的用户模型，并且很难判断 reg_date 是否已经是日期时间字段。如果没有，我建议`models.DateTimeField(auto_now_add=True)`对您的 reg_date 字段使用类似的东西，然后您可以轻松地使用上面的 ORM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:33:16.707

谢谢大家。

我得到了它。只不过是对 Django 不熟悉而已。

这是我所做的更改。

# 视图.py

```
def registered_users_number(request):   
    from django.db import connection
    cursor = connection.cursor()
    if not request.is_ajax():
         raise Http404

    cursor.execute("SELECT COUNT(*) FROM core_user WHERE DATE(reg_date) = DATE(NOW())")
    usercount_today = cursor.fetchone()  
    print(usercount_today)
    response_data = simplejson.dumps({"count": usercount_today})
    return HttpResponse(response_data, content_type="application/json") 
```

# php - 错误：jQuery1830649454693285679_1359620502896 未被调用 JSON

> ID：14621356
> 
> 赞同：4
> 
> 时间：2013-01-31T08:27:34.997
> 
> 标签：php, jquery, ajax, json, parse-error

我已经阅读了很多很多关于同一问题的问答，但没有一个是我的具体问题（至少不是我能找到的）。

我有一个回显 json 字符串的 php 脚本

```
header('Content-Type: application/json');
echo $result; 
```

返回的 JSON（使用[JSONLint](http://jsonlint.com)检查并且有效）：

```
{"Announcement":{"ID":1,"Type":1,"Text":"This is a test Albums announcement.","TimeStart":"1969-12-31","TimeEnd":"1969-12-31"}} 
```

还有一个读取 json 的 web jquery 脚本：

```
$.ajax({
        type : "GET",
        url : "http://b***s.net/S****s/GetAnnouncements.php?callback=?",
        data : {get_param : "Announcement"},
        dataType : "json",
        error : function(jqXHR, textStatus, errorThrown) {alert(errorThrown); alert(textStatus);},
        success : function(data) {alert('success');
            $.each(data, function(index, element) { alert('here');
                $("#announcements-list").append("<li><a id='announcements-a-" + element.ID + "' href='#announcement-details'><p>" + element.Type + ": " + element.Text + "</p></a></li>");
                $("#announcements-a-" + element.ID).bind('click', function() {Announcements.AnnouncementID = element.ID;});
            });
            $("#announcements-list").listview('refresh');
        }
    }); 
```

`success:`永远不会被调用。并`error:`返回a`textStatus`和是`"parsererror"``errorThrown``"Error: jQuery1830649454693285679_1359620502896 was not called"`

*   我已添加`callback=?`到 url 以解决跨域问题。
*   我已经发送`header('Content-Type: application/json');`到 php，它返回 NO html。
*   我已经用[JSONLint验证了 JSON 的有效性](http://jsonlint.com)
*   我已经尝试删除`data: "json"`一些答案所说的，但仍然返回一个`parsererror`
*   使用 jQuery 1.8.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:02:40.153

您的服务器和客户端脚本不会相互补充。你有两个选择：

* * *

让您的服务器端脚本返回 JSON：

```
Content-Type: application/json

{"Announcement":{"ID":1}} 
```

并省略回调参数：

```
$.ajax({
    type : "GET",
    url : "http://example.com/feed/json.php",
    dataType : "json"
}); 
```

* * *

让您的服务器端脚本返回 JSONP，即 JSON 包装在回调函数中：

```
Content-Type: application/javascript

jQuery_xxxxxxxx({"Announcement":{"ID":1}}); 
```

并将数据类型更改为 jsonp：

```
$.ajax({
    type : "GET",
    url : "http://example.com/feed/json.php",
    dataType : "jsonp"
}); 
```

请注意，jQuery 会默默地附加`&callback=jQuery_xxxxxxxx`到此类请求的 URL。服务器应使用 URL 中指定的回调名称。你可以这样做：

```
echo sprintf(
    "%s(%s);",
    isset($_GET["callback"]) ? $_GET["callback"] : "void",
    json_encode($data)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:14:20.553

我刚刚尝试过，这是在跨域中测试的解决方案

```
$.ajax({
    type : "GET",
    url : "http://******/14621356.php",
    data : {get_param : "Announcement"},
    dataType : "jsonp",
    error : function(jqXHR, textStatus, errorThrown) {alert(errorThrown); alert(textStatus);},
    success : function(data) {alert('success');
        $.each(data, function(index, element) { alert('here');
            $("#announcements-list").append("<li><a id='announcements-a-" + element.ID + "' href='#announcement-details'><p>" + element.Type + ": " + element.Text + "</p></a></li>");
            $("#announcements-a-" + element.ID).bind('click', function() {Announcements.AnnouncementID = element.ID;});
        });
        $("#announcements-list").listview('refresh');
    }
}); 
```

而对于 php

```
header('Content-Type: application/json');
echo $_GET['callback'].'('.'{"Announcement":{"ID":1,"Type":1,"Text":"This is a test Albums announcement.","TimeStart":"1969-12-31","TimeEnd":"1969-12-31"}}'.')'; 
```

注意 dataType 中的 jsonp。

# sql - Oracle在空格前获取子字符串

> ID：14621357
> 
> 赞同：12
> 
> 时间：2013-01-31T08:27:39.677
> 
> 标签：sql, regex, oracle

我有一个中间有空格的字符串，我需要在空格之前获取第一个字符串（可以是数字）。

```
 WITH test_data AS (
  SELECT '123642134  10' AS quarter_cd FROM dual UNION ALL --VALID
)

 select *
  from test_data
 where regexp_like(quarter_cd, '', 'c') 
```

输出应该是：

```
123642134 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-31T08:34:40.563

```
Substr (quarter_cd, 1,instr(quarter_cd,' ') - 1) 
```

应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T12:58:22.600

```
SELECT Rtrim(Substr('123642134  10',1,Instr('123642134  10',' '))) AS quarter_cd FROM dual; 
```

上层查询中使用的字符串函数的使用

*   Instr()- 从给定字符串中获取任何字符或空格的位置。
*   Substr()- 从给定字符串中获取子字符串。
*   Rtrim()- 从右侧删除空格。

# c# - xsd 模式中的递归元素

> ID：14621359
> 
> 赞同：0
> 
> 时间：2013-01-31T08:27:49.610
> 
> 标签：c#, xml, recursion

我正在尝试为类别制作 XSD，但它总是给我这个警告错误警告：在此架构中无法引用命名空间“”错误：未报告“类别”我试图制作未指定层次结构级别的递归类别

这是我的 XSD 结构

```
<xs:schema xmlns:tns="http://www.tempuri.org" targetNamespace="http://www.tempuri.org" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Categories">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="Category" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="Category">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="name" type="xs:string" />
        <xs:element name="code" type="xs:string" />
        <xs:element name="parent" nillable="true" type="xs:string" />
        <xs:element minOccurs="0" maxOccurs="unbounded" ref="Category" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

所需的xml就像

```
<?xml version="1.0" encoding="utf-8"?>
<Categorıes>
<Category>
<Code>1</Code>
<Name>Kategori1</Name>
<Parent>0</Parent>
<Category>
<Code>11</Code>
<Name>Kategori11</Name>
<Parent>1</Parent>
<Category>
<Code>111</Code>
<Name>Kategori111</Name>
<Parent>11</Parent>
</Category>
</Category>
</Category>
<Category>
<Code>2</Code>
<Name>Kategori2</Name>
<Parent>0</Parent>
<Category>
<Code>21</Code>
<Name>Kategori21</Name>
<Parent>2</Parent>
<Category>
<Code>211</Code>
<Name>Kategori211</Name>
<Parent>21</Parent>
</Category>
<Category>
<Code>212</Code>
<Name>Kategori212</Name>
<Parent>21</Parent>
</Category>
</Category>
</Category>
</Categorıes> 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:42:38.917

该`Category`元素位于命名空间中`http://www.tempuri.org`，因此您需要将其引用为

```
<xs:element minOccurs="0" maxOccurs="unbounded" ref="t:Category"
            xmlns:t="http://www.tempuri.org"/> 
```

当然，命名空间声明可以出现在任何祖先元素上；通常将它放在 xs:schema 本身上。

# php - 在缓存的 css 中调用会使 ssl 证书发出安全警告

> ID：14621360
> 
> 赞同：0
> 
> 时间：2013-01-31T08:27:50.810
> 
> 标签：php, css, wordpress, .htaccess, caching

我有一个使用 headway 主题的 wordpress 商店网站。我尝试了各种缓存插件都无济于事，唯一运行良好的缓存是内置的headway主题缓存。所以我真的很想使用它。

问题是当第一次访问网站是 http 时打开缓存时，它会立即创建一个缓存的 css 文件。该 css 中的第一行是 @import url( [http://fonts.googleapis.com/css?family=Lato](http://fonts.googleapis.com/css?family=Lato) ); 这会导致 ssl 安全警告。

如果我清除缓存并且我单击的第一页是 https 页面，我可以在缓存的 css 文件中看到第一行是 @import url（[https://fonts.googleapis.com/css?family=Lato](https://fonts.googleapis.com/css?family=Lato)）；这不会导致错误，一个快乐的证书。

Headway 没有给我答案。

那么我可以用 htaccess 做些什么来强制该 css 文件中的这一行被视为 https，或者可能在 wordpress 中使用 php 函数来检查该行。这将使我能够使用缓存系统。

我相信一定有办法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T05:02:22.753

你可以在标题中添加css（所以它在缓存css之前被调用）。我不太了解 Wordpress，但是在您的主题 header.php 文件中，您为什么不手动添加样式表，以便从 https 缓存它：

```
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Lato' type='text/css' /> 
```

# string - 比较串行读取数据和模拟读取值

> ID：14621363
> 
> 赞同：-1
> 
> 时间：2013-01-31T08:28:02.103
> 
> 标签：string, serial-port, compare, arduino, analog-digital-converter

我将通过串行通信向 Arduino 发送一个输入。该变量应该存储在一个变量中。我通过串行通信发送的数据应该与模拟输入值进行比较，如果两者相等，则应该执行一些操作。

通过串行通信发送给 Arduino 的数据只发送一次。因此，程序应存储该值并因此与模拟输入值进行比较。我应该使用什么，字符串或字符串转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:45:03.327

[您使用analogRead()](http://arduino.cc/en/Reference/analogRead)的模拟数据将是0-1023 范围内的[整数](http://arduino.cc/en/Reference/Int)（尽管取决于您的传感器，它可能远小于该值，但这些是最小值/最大值）。因此，您通过串行端口发送的目标值可以使用[parseInt()存储在](http://arduino.cc/en/Serial/ParseInt)[int](http://arduino.cc/en/Reference/Int)变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:25:41.153

您必须确定字符串的结尾。如果您发送单字符命令或字节值，那么您可以将 Serial.read() 值简单地放入“int”。我怀疑您正在发送文本数字，例如“123”或“1”，“2”，3”，“\ n”的字符串。

char*(string) 或 String 都可以。但是您必须从 serial.read 构建“字符串”并识别字符串的结尾。因此注意使用“\n”。或者您可以将其构图以始终期望相同数量的字符。例如 "0","2",3"

[见以前](https://stackoverflow.com/questions/10671810/arduino-string-to-int-gets-strange-values)的[讨论](https://stackoverflow.com/questions/11197097/arduino-how-read-string-from-serial)和[其他](https://electronics.stackexchange.com/questions/38845/arduino-serial-read-to-int)

# android - 如何在惰性列表中使图像更大（高度）

> ID：14621367
> 
> 赞同：3
> 
> 时间：2013-01-31T08:28:12.040
> 
> 标签：android, android-listview, lazy-loading, android-imageview

我正在使用懒惰列表项目开发图书阅读器[这里是链接](https://github.com/thest1/LazyList)

***问题：我得到了这种延迟列表*** 小页面的高度和模糊的图像，很难阅读。

![在此处输入图像描述](../Images/d7cf24a77e5eb11b1165132a1021ac02.png)

***我想要这个：*** 它应该看起来很清晰（不是模糊的）并且整页的高度都像这样。

![在此处输入图像描述](../Images/0ee1a3941773b29e19ee2db4d09eac8e.png)

**我知道：** 惰性列表加载位图的样本大小。

*   我怎样才能获得大约 600X921 的全分辨率图像。

我试过这个但没有帮助`main.xml`

```
 <ListView
    android:id="@+id/list"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" /> 
```

和这个`item.xml`

```
<ImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="matrix"
    android:src="@drawable/stub" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T08:34:53.373

我相信，您正在寻找的解决方案就在这里（*如果我错了，请纠正*）：

```
//Find the correct scale value. It should be the power of 2.
final int REQUIRED_SIZE=70;
int width_tmp=o.outWidth, height_tmp=o.outHeight;
int scale=1;
while(true){
    if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
        break;
    width_tmp/=2;
    height_tmp/=2;
    scale*=2;
} 
```

这是从第 99 行到第 108 行：[https](https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java) ://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java 。我正在链接它，以便您可以从源代码中检查代码并与您的代码进行比较。

您需要在此处更改此位：`final int REQUIRED_SIZE=`**70**。请注意，此数字需要 2 的**幂**。使用默认值**70**，您将获得小图像，当用于需要显示更大图片的应用程序时，它们看起来会失真。玩弄它，直到您对结果感到满意为止。

我个人使用的价值`final int REQUIRED_SIZE=512`没有任何问题。

这应该为您解决问题。

# rabbitmq - 使用 celery 和 rabbitmq 时，队列是否可能变得如此之大以至于所有内容都锁定了？

> ID：14621373
> 
> 赞同：2
> 
> 时间：2013-01-31T08:28:32.700
> 
> 标签：rabbitmq, celery, task-queue

我正在使用 celery 和 rabbitmq 做一个看起来像这样的链：

```
fetch -> parse -> write pages 
```

该`write pages`部分发出它自己的一组异步任务来并行编写每个单独的页面（如我的另一个问题所述：[在芹菜任务队列中，在一个组中运行任务与循环中的多个异步有什么不同吗？](https://stackoverflow.com/questions/14614441/in-celery-task-queue-is-running-tasks-in-a-group-any-different-than-multiple-as/14615919#14615919)）

当我运行它很长时间时，我观察到它最终会停止。如果我重新启动芹菜，它会再次出现，但只有在执行另外 60 个左右的任务之后它才会再次停止。

我注意到当队列大小超过 400k 时会发生这种情况：

```
fast@build1 ~/dev/content-admin $ sudo rabbitmqctl list_queues
Listing queues ...
build1.prod2.ec2.cmg.net.celery.pidbox  0
celery  433410
...done. 
```

我认为正在发生的事情是队列正在填充这些“写入页面”任务，这些任务*会将*更多项目添加到队列中，然后一旦它“满”，它就永远没有机会执行那些新添加的任务。

我通过临时修改“写页面”任务以立即返回（什么都不做）进行了实验，这似乎已经清除了拥塞并启用了所有约 400,000 页的输出。但是，我不是 100% 为什么这甚至有效。

RabbitMQ 或 Celery 是否有上限？它是否基于可用内存？或者它是可配置的？最后：我怎样才能更好地管理任务，以免发生这种情况？

redis 是否更适合我正在做的事情？

我认为如果有更多的“写页面”工作人员会有所帮助，但我也想以某种方式强制“写页面”任务优先。

我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:48:23.770

[如果内存已满并且发布者正在避免流控制](http://www.rabbitmq.com/memory.html)，RabbitMQ 的性能可能会下降。[RabbitMQ 管理插件](http://www.rabbitmq.com/management.html)将允许您更轻松地诊断问题。您将需要查找内存和/或磁盘的高水位标记，这将有助于您衡量容量。

# database - 多维数据集中但不在项目 SSAS 中的维度

> ID：14621381
> 
> 赞同：0
> 
> 时间：2013-01-31T08:29:14.190
> 
> 标签：database, ssas, cube-dimension

我发现我的多维数据集包含维度，我在数据库项目中找不到。我现在无法改变维度。

这怎么可能？

# meteor - MeteorJS：没有下拉菜单的登录按钮

> ID：14621384
> 
> 赞同：13
> 
> 时间：2013-01-31T08:29:28.040
> 
> 标签：meteor

我知道你可以使用

```
{{> loginButtons}} 
```

获取带有登录选项的下拉列表。我想直接在我的页面上使用登录按钮，而不需要下拉菜单，因为我希望 UI 在移动设备上是干净的。有什么方法可以将帐户 ui 从下拉列表中取出并将其放在主页上的 div 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-07T00:56:10.487

简单的方法来做到这一点（即黑客）：

```
Template.loginButtons.rendered = function()
{
    Accounts._loginButtonsSession.set('dropdownVisible', true);
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T13:50:10.410

我在#meteor 中问了同样的问题，有人给我发了这个关于自定义帐户-ui 登录的示例。

它清晰明了。我使用它作为自定义帐户 UI 外观和感觉的指南，它对我来说非常有用。

[https://www.youtube.com/watch?v=-CTSGdQOYYg](https://www.youtube.com/watch?v=-CTSGdQOYYg)

有一个警告。如果 accounts-google 包仍需要 api 信息设置，则该示例不处理该场景。例如 {{loginButtons}} 将变为红色，让您有机会设置 google-accounts 工作所需的信息。示例中的实现不处理该场景。因此，请务必在您的应用程序中进行该设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-11T06:09:03.600

我想我会在 0.8.3 发布我的解决方案。

我想要一个简单的 Facebook 登录按钮，在登录时替换为一个简单的退出按钮。我不想重写太多逻辑，所以我想出了这个。

```
login.html:

<template name='login'>

    <div id="login-buttons">

    {{#if currentUser}}

      Hi, {{currentUser.profile.name}}
      <button id='logout-button' class='small'>Sign Out</button>

    {{else}}
      <div class="service-login-buttons">
          {{#each service}}
            {{> _loginButtonsLoggedOutSingleLoginButton}}
          {{/each}}
      </div>
    {{/if}}

    </div>

</template> 
```

```
login.js:

Template.login.events({
  'click #logout-button': function() {
    Meteor.logout();
  }
});

Template.login.service = function()
{
    //returns an array like [{name: 'facebook'}];
    return getLoginServices();
} 
```

getLoginService() 是 account-ui 用于确定启用哪些服务的全局变量。我在#each 块中使用它来确保数据上下文正确，因此单击按钮会调用正确的“loginWithX”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-08T19:22:27.653

@shinank - 是的，这是一个很好的自定义流星登录的教程；但是，它没有说明在使用多种身份验证方法时如何将按钮从 {{loginButtons}} 创建的下拉列表中分离出来。

您可以使用以下代码创建独立按钮：

```
<div id="login-buttons">
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-facebook">
        <div class="login-image" id="login-buttons-image-facebook"></div>
        <span id="sign-in-facebook" class="text-besides-image sign-in-text-facebook">Sign in with Facebook</span>
      </div>
      <br>
    </div>
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-google">
        <div class="login-image" id="login-buttons-image-google"></div>
        <span id="sign-in-google" class="text-besides-image sign-in-text-google">Sign in with Google</span> 
      </div>
    </div>
</div> 
```

然后，您可以为您的 sign-in-google 或 sign-in-facebook span 添加逻辑，并使用以下代码：

```
Template.user_loggedout.events({
"click #sign-in-google": function(e, tmpl){
    Meteor.loginWithGoogle({

    }, function (err) {
        if (err){
            console.log("ERROR: " + err);//error handling
        } else {
            console.log("NO ERROR ON LOGIN");//show an alert
        }
    })
}
}); 
```

您始终可以将 requestPermissions 添加到您的登录功能，以获得您的网站可能需要的其他权限。

您可能需要稍微调整 CSS，因为它们的按钮看起来与下拉列表中的不完全相同

# ruby-on-rails - 无法使用 Devise Gem 编辑用户表单

> ID：14621390
> 
> 赞同：0
> 
> 时间：2013-01-31T08:29:48.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

在设计 gem github 上，它说要为新用户编辑表单并登录，您首先通过执行以下操作使它们可用：

rails 生成设计：视图

我这样做了，它产生了必要的视图，例如：

app/views/users/registrations/new.html.erb app/views/users/registrations/edit.html.erb

等等

然而，当我去编辑这些表单时，它对正在呈现的内容没有任何影响。我可以删除字母或对代码做任何事情，它仍然会按原来的方式加载。我还需要做些什么才能让它工作吗？我不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:10:39.737

看起来你有错误的路径。视图必须放在 app/views/devise 目录下

# c - 套接字地址已在使用中 - 一开始忘记了 SO_REUSEADDR

> ID：14621392
> 
> 赞同：2
> 
> 时间：2013-01-31T08:29:49.397
> 
> 标签：c, linux, sockets

请帮忙，

起初，我创建了一个套接字并将其绑定到没有 SO_REUSEADDR 的地址。

然后，我的程序崩溃了（没有正确关闭套接字）

接下来，我再次运行它并从 bind() 返回“地址已在使用中”

我试图修改源代码以使用 SO_REUSEADDR 但它没有用。

现在，我无法再次运行 bind（无法重新启动服务器）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T08:32:01.023

您只需要等到会话超时，然后它将被完全删除。

当会话以“脏”的方式关闭时，您不能再次重用该地址（假设您没有使用 SO_REUSEADDR）两倍的最大段生命周期 - 通常这对于常规网络硬件来说大约是四分钟，尽管它实际上取决于关于介质的特性（例如，卫星可能具有更大的 MSL）。

这是为了确保任何仍在转换中的数据包都不会到达并在新会话中搞砸您的排序。

# php - AddAttributeToFilter 未在 Magento 中加载特定产品

> ID：14621397
> 
> 赞同：0
> 
> 时间：2013-01-31T08:30:27.810
> 
> 标签：php, magento

我用函数在 app/code/local/myown/layoutmods/catalog/block/product/list/ 中编写了 Manufacturer.php 文件。现在，当我尝试使用它时，它会加载所有产品。我检查并调用了该文件，但它不会按制造商过滤。谢谢大家的建议。

```
protected function _getProductCollection() {
        if (is_null($this->_productCollection)) {

            // Get attribute value id:
            $manufacturer_name = Mage::registry( 'current_category' )->getName();
            $productModel = Mage::getModel('catalog/product');
            $attr = $productModel->getResource()->getAttribute('manufacturer');
            if ($attr->usesSource()) {
                $manufacturer_id = $attr->getSource()->getOptionId($manufacturer_name);
            }

            // load and filter product collection
            $collection = Mage::getModel('catalog/product')->getCollection();
            Mage::getModel('catalog/layer')->prepareProductCollection($collection);
            $collection->addStoreFilter();
            $this->_productCollection = $collection;
            $this->_productCollection->addAttributeToSelect( 'manufacturer' )->addAttributeToFilter( 'manufacturer', array( 'eq' => $manufacturer_id ) );
        } 

        return $this->_productCollection;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:12:00.110

据我所知，问题不在产品集合或过滤器中，而是在 $manufacturer_id 参数中。

如果您注释掉 // Get attribute value id: 和 // load and filter product collection comments 之间的代码，然后将 $manufacturer_id 替换为数据库中的其中一个 id，它将起作用。我也不得不注释掉

```
Mage::getModel('catalog/layer')->prepareProductCollection($collection); 
```

就我而言，这条线阻止了任何东西进入收藏，所以我不确定它到底做了什么。

我看到的第一个问题是 $manufacturer_id 不一定总是被设置，因为

```
if ($attr->usesSource()) { 
```

我无法让代码运行，因为 Mage::registry( 'current_category' ) 在我测试它时不包含值。我建议您重新测试用于检索制造商 ID 的代码。

# highcharts - 访问图形的属性？

> ID：14621399
> 
> 赞同：0
> 
> 时间：2013-01-31T08:30:35.627
> 
> 标签：highcharts

我可以使用以下代码设置图形的颜色：

```
chart.series[1].data[1].graphic.attr("fill","red"); 
```

但是，如果我尝试检索该值，我会得到一个空响应：NaN

```
console.log(chart.series[1].data[1].graphic.attr("fill")); 
```

如何检查当前填充？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:52:20.947

你应该使用

```
chart.series[0].data[0].graphic.fill 
```

[http://jsfiddle.net/EzxJ9/1/](http://jsfiddle.net/EzxJ9/1/)

# cuda - 推力 - 初始 device_vector

> ID：14621401
> 
> 赞同：-1
> 
> 时间：2013-01-31T08:30:39.613
> 
> 标签：cuda, thrust

感谢@Eric Shiyin Kang 回复我的问题，但不是前缀“**主机**”或“**设备**”导致我的问题，经过一些尝试和错误，我发现错误是“成员数据始终为常数”举个例子：

```
struct OP {
    int N;
    __host__ __device__
    OP(const int n): N(n){};

    __host__ __device__
    UI operator()(const UI a) {
        int b = a * N;
        N++;
        return b;
    }
}
thrust::transform(A.begin(), A.end(), B.begin(), OP(2) ); 
```

在这种情况下，如果 A 是 {0, 1, 2, 3, ... }，那么 B 是 {0, 2, 4, 6, 8}，但实际的 B 应该是 {0, 3(1*( 2+1)), 8(2*(3+1)), 15(3*(4+1)),....}

我不知道是什么原因导致这种情况，推力设计的原因？谁能告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:36:47.143

对于您更新的 Q，主机 var`N`无法在设备代码中更新。在并行算法中多次更新共享变量通常是不安全的。

事实上，初始化开发向量的最快方法应该是在对象构建阶段使用花哨的迭代器，例如，

```
// v[]={0,2,4,6,8...}
thrust::device_vector<float> v(
        thrust::make_transform_iterator(
                thrust::counting_iterator<float>(0.0),
                _1 * 2.0),
        thrust::make_transform_iterator(
                thrust::counting_iterator<float>(0.0),
                _1 * 2.0) + SIZE);

// u[]={0,3,8,15...}
thrust::device_vector<float> u(
        thrust::make_transform_iterator(
                thrust::counting_iterator<float>(0.0),
                _1 * (_1 + 2.0)),
        thrust::make_transform_iterator(
                thrust::counting_iterator<float>(0.0),
                _1 * (_1 + 2.0)) + SIZE); 
```

它会比定义序列和转换方式快几倍，因为后一种方法`v`不止一次地读取/写入整个设备内存。

请注意，上面的代码仅适用于 Thrust 1.6.0+，因为 lambda 表达式仿函数与花哨的迭代器一起使用。对于 CUDA 5.0 中的 Thrust 1.5.3，您应该显式地编写一个仿函数。

* * *

A 为已被删除的原始 Q。

您可以在like前面添加`__host__`和限定词，`__device__``operator()()`

```
struct OP {
    __host__ __device__ void operator()(int &a) {
        a *=2;
    }
} 
```

和

```
struct OP {
    __host__ __device__ int operator()(int a) {
        return a*2;
    }
} 
```

否则编译器不会为 GPU 生成正确的设备代码。

# c# - 我得到索引超出了数组的范围，但我想用它做点什么？

> ID：14621404
> 
> 赞同：1
> 
> 时间：2013-01-31T08:31:04.390
> 
> 标签：c#, arrays

```
string[] filefile = dr["Path_XBRL"].ToString().Split('\\', '-');  

if (filefile[11] == null)
  { 
     string yes = "oke";
  } 
```

我想处理那个值，但我得到的索引超出了数组的范围。那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:32:16.667

*该*值不存在（即，数组中的那个点没有任何东西，实际上，数组不跨越那个长度），这就是重点。您可能会忽略数组是基于零索引的，并且，如果数组部分定义明确，您可能真的想要`filefile[10]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:33:08.227

```
string[] filefile = dr["Path_XBRL"].ToString().Split('\\', '-'); 
```

如果您检查此语句，您将看到该数组包含少于 11 个元素。如果您想检查，您可以执行以下操作；

```
if (filefile.Length >11 && string.IsNullOrEmpty(filefile[11]))
{ 
    string yes = "oke";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:34:54.140

您还可以使用`ElementAtOrDefault`来避免超出索引异常

```
if (filefile.ElementAtOrDefault(11) == null)
{} 
```

# c++ - Knapsnack 算法检测物体

> ID：14621407
> 
> 赞同：1
> 
> 时间：2013-01-31T08:31:21.173
> 
> 标签：c++, algorithm, knapsack-problem

这个问题有一个简单的dp解决方案：

```
#include <vector>
#include <limits>

int knapsack2(const std::vector<int>& wts, const std::vector<int>& cost, int W)
{
    size_t n = wts.size();
    std::vector<std::vector<int> > dp(W + 1, std::vector<int>(n+1, 0));
    for (size_t j = 1; j <= n; j++) {
        for (int w = 1; w <= W; w++) {
           if (wts[j-1] <= w) {
               dp[w][j] = std::max(dp[w][j - 1], dp[w - wts[j-1]][j - 1] + cost[j-1]);
           }
           else {
                dp[w][j] = dp[w][j - 1];
           }
        }
    }
    return dp[W][n];
} 
```

但是我怎么知道拿走了什么东西呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:47:07.860

您的方法的主要问题是缺乏将项目的概念编码为实体。您应该创建一个类型“项目”（使用`class`or`struct`关键字）来描述具有重量、成本和某种标识符（名称或编号）作为成员的项目。这样，您只需要发送一个项目向量，任何解决方案都将是这些项目的列表，它可以回答您的问题。

**编辑**

根据要求，这里有一个更实际的解释，说明如何天真地让它工作。

创建一个类型，`item`其中包含单个项目的所有信息。取一个`std::vector<item>`作为输入来替换两者`wts`和`cost`然后，最小的可能更改是更改`dp`，以便它存储由运行成本和项目列表组成的对。这会给它 type `std::vector<std::vector<std::pair<int,std::vector<item>>>>`。也就是说，对于每个存储的（部分）解决方案，跟踪其成本和提供此解决方案的项目。

这种 for`dp`看起来相当可怕，但如果你让它工作，你可以在以后改进实现。例如，您可以存储指向`item`s 的指针，以避免复制。此外，一些`typedef`s 真的可以帮助澄清`dp`.. 的定义。重要的是首先让它使用最简单的解决方案，然后考虑这些改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:51:15.603

您可以使用地图，一旦制作了对象，您就可以使用地图进行查询。优化算法将通过使用 HashMap 来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:52:39.607

使第二个向量“prev”与 dp 具有相同的尺寸。

当您为 dp[w][j] 选择最佳选项时，将前一个单元格的坐标写入 prev[w][j]

当 dp 的工作完成后，从 prev[W][n] 返回获取所有使用的单元格索引

# css - CSS - .id:hover a:before 项目跳来跳去

> ID：14621410
> 
> 赞同：0
> 
> 时间：2013-01-31T08:31:32.833
> 
> 标签：css, pseudo-element

我有一个包含 3 个水平列表的列表，其中包含 a:before 和 a:hover。悬停时，元素会在它固定在它的位置之前跳跃一点。尝试了 3 个流行的浏览器。任何修复的想法？

```
.twitter a:before{
content: url(.jpg);
padding-right: 10px;
position: relative;
bottom: -.4em;}

.twitter:hover a:before {
content: url(.jpg);
padding-right: 10px;
position: relative;
bottom: -.4em;} 
```

[http://nobodyfilm.org](http://nobodyfilm.org) - 中间部分 twitter - facebook - 预告片按钮。如果我没记错的话，它只会在您第一次加载网站时发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:38:13.390

`:before`为和选择器指定固定宽度`:after`。问题是浏览器正在计算宽度，并且在加载图像时，它们没有宽度。

例如：

```
.twitter a:before {
    content: url(.jpg);
    padding-right: 10px;
    position: relative;
    bottom: -.4em;
    float: left;
    display: block;
    width: 30px;
}

.twitter:hover a:before {
    content: url(.jpg);
    padding-right: 10px;
    position: relative;
    bottom: -.4em;
    float: left;
    display: block;
    width: 30px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:38:22.863

这可能是由于加载图像。它会消失片刻，直到加载 :hover 图像。如果你设置它的宽高，它应该不会跳来跳去，只是暂时消失。

相反，您可以将它们放在精灵中，然后将位置设置为适合图像的右侧部分。

# c# - 如何消除对泛型方法的调用的歧义？

> ID：14621412
> 
> 赞同：1
> 
> 时间：2013-01-31T08:31:39.307
> 
> 标签：c#, generics, inotifypropertychanged, disambiguation

给定以下简单的控制台应用程序，该应用程序说明了通知更改的属性的两种方式：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var person = new Person(){ Name = "Me" };
            person.Age = 20;
            person.Weight = 80.5F;
                    person.RandomProperty = new RandomComplexObject();

            Console.ReadKey();
        }
    }

    public class Person : BaseObject
    {
        public string Name
        {
            get { return _name; }
            set { SetProperty(ref value, ref _name, false); }
        }

        public int Age
        {
            get { return _age; }
            set { SetProperty<int>(ref value, ref _age, true, "Age", "Weight"); }
        }

        public float Weight
        {
            get { return _weight; }
            set { SetProperty(ref value, ref _weight, true, () => Weight, () => Age); }
        }

        public RandomComplexObject RandomProperty
        {
            get { return _rco; }

            //*** the following line has the error:
            //-------------------------------------
            set { SetProperty(ref value, ref _rco, true, () => Name, () => Age, () => Weight); } 
        }

        private float _weight;
        private int _age;
        private string _name;
        private RandomComplexObject _rco;
    }

    public class BaseObject : INotifyPropertyChanged
    {

        protected void OnPropertyChanged<T>(Expression<Func<T>> propertyExpression)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                var body = propertyExpression.Body as MemberExpression;
                var expression = body.Expression as ConstantExpression;
                handler(expression.Value, new PropertyChangedEventArgs(body.Member.Name));
            }
        }

        private void OnPropertyChanged(string propertyName)              
        {
            var handler = PropertyChanged;
            if (handler == null)
                return;
            handler(this, new PropertyChangedEventArgs(propertyName));
        }

        protected bool SetProperty<T>(ref T newValue, ref T currentValue, bool notify, params string[] notifications)
        {
            if (EqualityComparer<T>.Default.Equals(newValue, currentValue))
                return false;

            currentValue = newValue;
            if (notify)
                foreach (var propertyName in notifications)
                    OnPropertyChanged(propertyName);

            return true;
        }

        protected bool SetProperty<T, TProperty>(ref T newValue, ref T currentValue, bool notify, params Expression<Func<TProperty>>[] notifications)
        {
            if (EqualityComparer<T>.Default.Equals(newValue, currentValue))
                return false;

            currentValue = newValue;
            if (notify)
                foreach (var notification in notifications)
                    OnPropertyChanged(notification);

            return true;
        }

        public event PropertyChangedEventHandler PropertyChanged;

    }

    public class RandomComplexObject{}
} 
```

在方法调用的行上，`SetProperty(ref value, ref _rco, true, () => Name, () => Age, () => Weight);`我遇到了编译错误：

> 无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型

IDE中直接显示的错误是：

> 无法从用法中推断方法 'bool ConsoleApplication1.BaseObject.SetProperty(ref T, ref T, bool, params Expression<Func<TProperty>>[])' 的类型参数。尝试明确指定类型参数。

如何消除对`SetProperty()`方法的调用的歧义？有没有一种语法更简洁的方法来写这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:35:40.150

以下变体至少可以编译。

```
public RandomComplexObject RandomProperty
{
    get { return _rco; }

    set
    {
        SetProperty(
            ref value,
            ref _rco,
            true,
            () => Name,
            () => Age.ToString(),    //instead of () => Age
            () => Weight.ToString());//instead of () => Weight
    }
} 
```

我猜，您收到的错误首先是基于编译器无法推断出`TProperty`for

```
protected bool SetProperty<T, TProperty>(
    ref T newValue, 
    ref T currentValue, 
    bool notify, 
    params Expression<Func<TProperty>>[] notifications)
{
    //...
} 
```

因为它需要可变数量的类型参数，`Expression<Func<TProperty>>`并且您在那里传递了 lambdas、`string`returning`int`和`float`. 绝对编译器无法确定，其中哪一个是`TProperty`.

在`Weight`属性的设置器中：

```
public float Weight
{
    get { return _weight; }
    set
    {
        SetProperty(ref value, ref _weight, true, () => Weight, () => Age);
    }
} 
```

具有`Weight`类型`float`和`Age`类型`int`，编译器推断`TProperty`为`float`，因为存在从`int`to的隐式转换`float`。

# .net - 列表的序列化未提供所需的输出

> ID：14621413
> 
> 赞同：0
> 
> 时间：2013-01-31T08:31:41.770
> 
> 标签：.net, xml, vb.net, serialization, xml-serialization

我有一个尝试过的列表、数组和所有不同的类型

我有一个可以序列化的项目列表

在c#中

```
public mySortableBindingList<Item> TransactionLines = new mySortableBindingList<Item>(); 
```

在 vb.net

```
Public WithEvents TransactionLines As New mySortableBindingList(Of Item) 
```

xml输出是

```
<TransactionLines>
   <Item>
    <elements>
   </item>
   <Item>
    <elements>
   </item>
</TransactionLines> 
```

我的序列化方法如下

在 C# 中

```
public string SerializeToXML<T>(T obj)
{
string XMLString = "";
try {
    XmlSerializer mySerializer = new XmlSerializer(obj.GetType());

    using (MemoryStream myMemStream = new MemoryStream()) {
        mySerializer.Serialize(myMemStream, obj);
        myMemStream.SeekToBegin();
        XMLString = myMemStream.ReadToEnd(Encoding.UTF8);
    }
} catch (Exception ex) {

}
return XMLString;
} 
```

在 vb.net

```
 Public Function SerializeToXML(Of T)(ByVal obj As T) As String

        Dim XMLString As String = ""
        Try
            Dim mySerializer As XmlSerializer = New XmlSerializer(obj.GetType)

            Using myMemStream As MemoryStream = New MemoryStream()
                mySerializer.Serialize(myMemStream, obj)
                myMemStream.SeekToBegin()
                XMLString = myMemStream.ReadToEnd(Encoding.UTF8)
            End Using
        Catch ex As Exception

        End Try
        Return XMLString
    End Function 
```

待序列化列表

C＃

```
[XmlElement(Order = 17)]
public mySortableBindingList<ItemSerial> Serials = new mySortableBindingList<ItemSerial>(); 
```

VB.net

```
<XmlElement(Order:=17)>
Public Serials As New mySortableBindingList(Of ItemSerial) 
```

这是我的 xml 输出

```
<Serials>
   <Serial>A</Serial>
   <ExpiryDate>0001-01-01T00:00:00</ExpiryDate>
   <Qty>1</Qty>
</Serials>
<Serials>
   <Serial>B</Serial>
   <ExpiryDate>0001-01-01T00:00:00</ExpiryDate>
   <Qty>1</Qty>
</Serials> 
```

我需要以下内容，请解释我可能做错了什么

```
 <Serials>
   <ItemSerial>
      <Serial>A</Serial>
      <ExpiryDate>0001-01-01T00:00:00</ExpiryDate>
      <Qty>1</Qty>
   </ItemSerial>
   <ItemSerial>
      <Serial>B</Serial>
      <ExpiryDate>0001-01-01T00:00:00</ExpiryDate>
      <Qty>1</Qty>
   </ItemSerial>
</Serials> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:41:36.337

你真的需要发布类定义。

在任何情况下，您都需要`XmlArrayItemAttribute`为`ItemSerial`. 请参阅[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlarrayitemattribute(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlarrayitemattribute(v=vs.100).aspx)

当您发布代码时，我将添加一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:57:46.267

从理查兹的回答中，我发现我可以使用 XMLArray 属性来推断它是一个列表，因此可以按照我需要的方式进行序列化。

# mysql - 如何在 C++ Builder XE 中编辑计算字段值

> ID：14621416
> 
> 赞同：0
> 
> 时间：2013-01-31T08:31:55.167
> 
> 标签：mysql, c++builder, tdbgrid, tfield

我有一个显示一些计算字段的 TDBGrid。我正在使用 MySQL 数据库。

我需要编辑一个名为“日期”的计算字段的字段值，但我不能。我尝试编辑其他具有 StringField 类型的名为“Description”的字段并且它有效！

Date 显示修改后的 DateTime 类型值，仅使用 DayOfTheMonth 方法显示 Day。

这个怎么做？是否有任何方法可以编辑计算字段的值？请帮帮我...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:01:45.523

计算字段是计算值。您无法编辑计算字段，因为它是一个只读值，是对其他数据执行计算的结果。您必须改为编辑计算字段正在使用的源字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:42:43.163

您可以更改在 OnCalcField() 中计算值的方式。我认为如果你刷新当前记录，这个方法会再次被调用，这样你就可以修改它。

# xml - 站点地图协议子页面

> ID：14621420
> 
> 赞同：1
> 
> 时间：2013-01-31T08:32:03.267
> 
> 标签：xml, sitemap, robots.txt

我正在阅读 Sitemaps.org 协议（[http://www.sitemaps.org/protocol.html](http://www.sitemaps.org/protocol.html)），以便创建自己的协议。然而，我想到了一个问题：我如何处理子页面，例如[http://www.example.com/page/subpage](http://www.example.com/page/subpage)？

我可以将它用作“顶级”`<url>`标签还是`<url>`在`<url>`标签中制作？还是我`<urlset>`为每个顶级页面使用一个？

有了这个，我可以在我的 robots.txt 中放置一个 *.php 文件，该文件转换为 XML 文件，以便 Google 查找。还是我有义务使用 *.xml 文件？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:46:04.310

# css - column-count !important 被 chrome 忽略

> ID：14621428
> 
> 赞同：1
> 
> 时间：2013-01-31T08:32:43.280
> 
> 标签：css, google-chrome, safari, multiple-columns

```
#main .inside .ce_text {
    -moz-column-count: 2;
    -moz-column-gap: 31px;
    -webkit-column-count: 2;
    -webkit-column-gap: 31px;
    column-count: 2;
    column-gap: 31px;
}

#main .inside .ce_tabcontrol_pane .ce_text {
    -moz-column-count: 0;
    -webkit-column-count: 0;
    column-count: 0;
} 
```

第二条规则应该比第一条更重要。虽然 chrome 呈现 2 列（！important 也无济于事）。但是：Safari 所做的一切都是正确的。为什么？

铬 24

Safari 6.0.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:35:45.453

根据[MDN](https://developer.mozilla.org/de/docs/CSS/column-count) `0`没有有效的输入`column-count`。

> 是一个严格的正数，描述了元素内容将流入的理想列数。如果 column-width 也设置为非自动值，则它仅指示允许的最大列数。

我想，你的意思更像是这样的：

```
#main .inside .ce_tabcontrol_pane .ce_text {
    -moz-column-count: 1;
    -webkit-column-count: 1;
    column-count: 1;
} 
```

**[Example Fiddle](http://jsfiddle.net/wJ44q/1/)**在 Chrome26 和 Firefox19 中工作。

# ubuntu - beanstalkd：未知标志：-d

> ID：14621430
> 
> 赞同：0
> 
> 时间：2013-01-31T08:32:50.957
> 
> 标签：ubuntu, beanstalkd

我已经使用安装了 beanstalkd

```
sudo apt-get install beanstalkd 
```

安装了 beanstalkd 1.7 版

现在开始我正在使用命令的 beanstalkd 进程

```
sudo beanstalkd -d -l 127.0.0.1 -p 11300 -z 1000000 
```

我收到回复

```
beanstalkd: unknown flag: -d
Use: beanstalkd [OPTIONS]

Options:
 -b DIR   wal directory
 -f MS    fsync at most once every MS milliseconds (use -f0 for "always fsync")
 -F       never fsync (default)
 -l ADDR  listen on address (default is 0.0.0.0)
 -p PORT  listen on port (default is 11300)
 -u USER  become user and group
 -z BYTES set the maximum job size in bytes (default is 65535)
 -s BYTES set the size of each wal file (default is 10485760)
            (will be rounded up to a multiple of 512 bytes)
 -c       compact the binlog (default)
 -n       do not compact the binlog
 -v       show version information
 -V       increase verbosity
 -h       show this help 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:15:54.343

`-d`用于将 Beanstalkd '守护'到后台，但它已被贬值，现在被删除。

[BeanstalkD git repo](https://github.com/kr/beanstalkd/tree/master/adm)中有一些示例，用于使用通用系统工具将其作为服务运行。例如，在 Ubuntu 上，您可能会使用“Upstart”系统。

# php - 使用 mySQL 数据、ajax、PHP post 更新 innerHTML 文本

> ID：14621436
> 
> 赞同：0
> 
> 时间：2013-01-31T08:33:10.510
> 
> 标签：php, javascript, mysql, ajax, innerhtml

好的，所以我已经在这个问题上苦苦挣扎了一段时间，但我遇到了我无法弄清楚的墙。我有一个包含许多表单的页面，用户将插入不同类型的输入，这些输入通过下面的 ajax 脚本提交到 mySQL 数据库（这部分所有工作）。

现在，我需要某些字段来填充用户在其他输入字段中输入的信息。HTML 中的这些字段采用以下形式：

```
<div class="popField" id="client_input_3_0_1_a"><?php echoInput('client_input_3_0_1_a') ?></div>
<div class="popField" id="client_input_3_0_2_a"><?php echoInput('client_input_3_0_2_a') ?></div> 
```

（上面的 echoInput() 只是一个函数，当页面从 mySQL 数据库加载时，它将加载并填充此字段，该部分有效）。这里的 id 与用户输入的 id 及其在数据库中的位置相匹配。

不起作用的是当用户更改某些输入时，这应该用他们的更改重新填充其中一个字段。而不是这样做，它似乎只重新填充页面上要重新填充的最后一个 div，就好像数据是以正确的顺序获取的一样，但它只存储在页面上的最后一个 div 中，而不是每个相应的 div . 关于我要去哪里错的任何想法？

```
 // Retrieve all forms of '.formAjax' on the page onChange
    $('.formAjax').change(function () {
        $.post('process.php', $(this).serialize(), function(data) {
            //process.php stores input to mySQL database
        });

        //retrieve divs that need to be populated with input
        var divstopop = document.getElementsByClassName("popField");
        for (var i = 0, n = divstopop.length; i < n; ++i){
            var dbID = divstopop[i].id;
            divstopop[i].innerHTML= divstopop[i].id; //this prints each respective ID correctly
            $.post("populateField.php", {dbID: dbID}, function(returned_data){
                //here populateField.php just retreives data from the database for the id dbID and echoes it back
                //divstopop[i].innerHTML = returned_data; //Does not work at all(?)
                document.getElementById(dbID).innerHTML = dbID + returned_data; 
                //Last div to populated is the only one that changes 
                //and it flashes through what each of the other ones should be populated with
            });
        }

    });
   }); 
```

如果我没有说清楚或者我在这里遗漏了一些非常明显的东西，我很抱歉，我的大脑很累。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:38:48.333

您使用相同的变量进行多次调用。`dbID`并且`i`在被先前的调用使用时被更新。这就是为什么只更新最后一个字段的原因，因为`i`和`dbID`被修改直到最后一次迭代。

您可以通过创建新范围来解决此问题

```
function populateDiv(div) {
    var dbID = div.id;
    div.innerHTML = div.id; //this prints each respective ID correctly
    $.post("populateField.php", {dbID: dbID}, function(returned_data){
        //here populateField.php just retrieves data from the database for the id dbID and echoes it back
        div.innerHTML = returned_data;
    });
}

$('.formAjax').change(function () {
    ...
    for (var i = 0, n = divstopop.length; i < n; ++i)
        populateDiv(divstopop[i]);
    ...
}); 
```

顺便说一句，这是非常低效的。您`n`拨打电话以更新您的字段。您应该考虑进行一次调用以返回所有字段的数据，然后从中更新 div。这将减少网络流量以及服务器上的负载。

# logging - 如何编辑/查看超过 200MB 的大日志文件

> ID：14621443
> 
> 赞同：0
> 
> 时间：2013-01-31T08:33:38.043
> 
> 标签：logging, editor

我有一个 Java 应用程序，我有很多日志。日志大小超过 200 MB。如何打开一个大文件，例如超过 200 MB？

有什么工具可以处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:38:54.580

任何不尝试一次将整个内容加载到内存中的工具都会相对较快。我会质疑编辑器的必要性，除非你真的要编辑它（而不是仅仅查看它）。

您始终可以使用`less`或`pg`或其他文本文件分页工具之一，或`grep`仅用于获取您感兴趣的行。即使在本机没有它们的平台上（我在看着*你，* Windows），它们可以很容易地获得——例如，参见[GnuWin32 ，尤其](http://gnuwin32.sourceforge.net/)[是包页面](http://gnuwin32.sourceforge.net/packages.html)。

# java - 比较 Java 中的两个 ArrayList

> ID：14621445
> 
> 赞同：0
> 
> 时间：2013-01-31T08:33:40.427
> 
> 标签：java, loops, methods, arraylist, compare

我正在尝试编写一个方法，该方法采用 2 个双精度数组列表并返回 set1 中未在 set2 中找到的所有值。这些数字应在 set3 中返回。通常我只会使用 set.contains 但我只能使用 set.get set.size 和 set.add。谁能指出我正确的方向？

例如：

如果 set1 有数字 1,2,3,4,5

set2 的数字为 1,7,9,5,3

set3 应该只包含 2,4,5

```
ArrayList<Double> setDiff(ArrayList<Double> set1, ArrayList<Double> set2){
    ArrayList<Double> set3 = new ArrayList<Double>();
    for(int i = 0; i < set1.size(); i++){
        for(int x = 0; x < set2.size(); x++){
            if(set1.get(i) != set2.get(x)){
                set3.add(set1.get(i));
            }
        }
    }
    return set3;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:41:26.817

问题是，您要`set3`根据第一次失败添加数字。因此，如果 的第一个元素`set2`与 的当前元素不匹配，`set1`则将其添加到`set3`.

鉴于您的工具包中的限制，我怀疑这是您的作业。所以，我只是给你一个如何接近的想法。

您可以使用一个`boolean`变量并切换它（例如将其设置为**`false`**），一旦您在 中找到当前元素`set2`，然后从`inner loop`.

因此，您在内部循环中的条件将从： -

```
if(set1.get(i) != set2.get(x)) 
```

到： -

```
if(set1.get(i) == set2.get(x)) {
    // The current element in set1 is present in set2\. 
    // toggle the boolean variable
    // break out of loop. As you no more want to check for further elements.
} 
```

然后在 之外`inner loop`，检查该`boolean`变量的状态。并且根据状态，您可以将当前项目添加或不添加到`set3`. 例如，如果布尔变量是`false`，则表示您在 中找到了该元素`set2`，因此不要将其添加到`set3`，否则添加它。

您还需要每次在外循环开始时重置布尔变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:02:28.387

您可以尝试使用 Apache commons [CollectionUtils.removeAll](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#removeAll%28java.util.Collection,%20java.util.Collection%29)方法：此方法返回一个集合，其中包含 c 中未删除的所有元素。

```
ArrayList commonList = CollectionUtils.removeAll(arrayList1, arrayList2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:33:17.810

尝试

```
static ArrayList<Double> setDiff(ArrayList<Double> set1, ArrayList<Double> set2) {
    ArrayList<Double> copy1 = (ArrayList<Double>) set1.clone();
    copy1.retainAll(set2);
    ArrayList<Double> copy2 = (ArrayList<Double>) set1.clone();
    copy2.removeAll(copy1);
    return copy2;
}

public static void main(String[] args) throws Exception {
    ArrayList l1 = new ArrayList(Arrays.asList(1.0, 2.0, 3.0, 4.0, 5.0));
    ArrayList l2 = new ArrayList(Arrays.asList(1.0, 7.0, 9.0, 5.0, 3.0));
    System.out.println(setDiff(l1, l2));
} 
```

印刷

```
[2.0, 4.0] 
```

此外，我建议将方法签名更改为

```
<T> List<T> listDiff(List<T> list1, List<T> list2) 
```

# javascript - 如何在垂直滚动的末尾隐藏 div

> ID：14621446
> 
> 赞同：3
> 
> 时间：2013-01-31T08:33:56.547
> 
> 标签：javascript, html, css

我在屏幕底部有一个固定位置的 div，里面有一个箭头。当用户滚动到页面底部时，如何隐藏 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:38:23.117

```
$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() == $(document).height()) {
       $('div').hide();
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:37:20.137

尝试这个：

```
var vericalscroll= document.height - (window.pageYOffset + window.innerHeight); 
```

如果您的`vericalscroll`值为 0，则表示您已在垂直滚动结束时重新调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:39:23.427

您可以为此尝试 jQuery：

```
var max_scroll = 500;
$(document).scroll(function(){
  if($(this).scrollTop() >= max_scroll)
  {
      $('#my_div').fadeOut();
  }
}); 
```

`my_div`你的 div 名称和`max_scroll`滚动位置在哪里。

# quickbooks - Quickbook发票通过api添加了两次

> ID：14621448
> 
> 赞同：0
> 
> 时间：2013-01-31T08:34:06.277
> 
> 标签：quickbooks

我正在使用 QBXML 的 Quickbook Online PHP SDK。

我正在通过 api 添加发票。

即使发送了一次请求，quickbook 也会两次添加相同的发票。

因为我已经检查了响应 xml，它在单个响应中多次显示同一张发票。

当我发送一次请求时，如何限制 quickbook 一次添加发票？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:30:54.773

> 即使发送了一次请求，quickbook 也会两次添加相同的发票。

这是非常非常不可能的。那里有成千上万的人使用类似的集成，而您是唯一遇到此问题的人。

> 因为我已经检查了响应 xml，它在单个响应中多次显示同一张发票。

然后您应该发布 qbXML 请求和 qbXML 响应，以便我们可以验证您所看到的内容，并且如果它*确实*是一个错误，我们可以将其报告给 Intuit，并以可验证的方式重现它。

> 当我发送一次请求时，如何限制 quickbook 一次添加发票？

如果您发送一次请求，您只会得到一次响应。你做错事的可能性约为 99.99%。如果您确定不是，请发布您的日志和 qbXML 请求和响应，以便我们进行验证并帮助您。

# wcf - 从 Windows Phone8 同步调用 WCF

> ID：14621449
> 
> 赞同：1
> 
> 时间：2013-01-31T08:34:10.997
> 
> 标签：wcf, windows-phone-7, windows-phone-8

我的一些通话在 windows phone 8 上花费了更长的时间。调用它们异步给我带来了麻烦。

我有时可以同步调用 WCF 服务方法吗？有什么办法吗？需要紧急响应 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:09:04.080

所有对网络的调用都必须异步完成。SDK 中甚至不存在这些方法的同步版本。

你看到什么样的麻烦？即使您的调用是同步的，也不会使它们更快地返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:05:54.213

使用扩展方法和 TPL 异步。

从[这里](http://blogs.msdn.com/b/matthiasshapiro/archive/2012/12/10/window-8-win-phone-code-sharing-httpwebrequest-getresponseasync.aspx)。

例子：

```
public async Task<string> GetMyData(string urlToCall)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlToCall);
    request.Method = HttpMethod.Get;
    HttpWebResponse response = (HttpWebResponse)await request.GetResponseAsync();

    using (var sr = new StreamReader(response.GetResponseStream()))
    {
        return sr.ReadToEnd();
    }
} 
```

扩展方法：

```
 public static class HttpExtensions
    {
        public static Task<HttpWebResponse> GetResponseAsync(this HttpWebRequest request)
        {
            var taskComplete = new TaskCompletionSource<HttpWebResponse>();
            request.BeginGetResponse(asyncResponse =>
            {
                try
                {
                    HttpWebRequest responseRequest = (HttpWebRequest)asyncResponse.AsyncState;
                    HttpWebResponse someResponse = (HttpWebResponse)responseRequest.EndGetResponse(asyncResponse);
                    taskComplete.TrySetResult(someResponse);
                }
                catch (WebException webExc)
                {
                    HttpWebResponse failedResponse = (HttpWebResponse)webExc.Response;
                    taskComplete.TrySetResult(failedResponse);
                }
            }, request);
            return taskComplete.Task;
        }
     } 
```

# c# - Linq to Entities 中的动态 where 子句 (OR)

> ID：14621450
> 
> 赞同：20
> 
> 时间：2013-01-31T08:34:13.110
> 
> 标签：c#, linq, entity-framework, linq-to-entities, where-clause

[在这里](https://stackoverflow.com/questions/9122220/dynamic-where-clause-in-linq-to-entities)的帖子中，我学习了如何使用 Linq 的延迟执行来构建动态查询。但查询实际上是使用 WHERE 条件的**AND**连接。

**如何使用 OR 逻辑实现相同的查询？**

由于 Flags 枚举，查询应该搜索*Username*、*WindowsUsername*或*两者*：

```
public User GetUser(IdentifierType type, string identifier)
{
    using (var context = contextFactory.Invoke())
    {
        var query = from u in context.Users select u;

        if (type.HasFlag(IdentifierType.Username))
            query = query.Where(u => u.Username == identifier);

        if (type.HasFlag(IdentifierType.Windows))
            query = query.Where(u => u.WindowsUsername == identifier);

        return query.FirstOrDefault();
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-31T09:20:09.543

使用[LINQKit 的](http://www.albahari.com/nutshell/linqkit.aspx)PredicateBuilder，您可以[动态构建谓词](http://www.albahari.com/nutshell/predicatebuilder.aspx)。

```
var query = from u in context.Users select u;
var pred = Predicate.False<User>();

if (type.HasFlag(IdentifierType.Username))
    pred = pred.Or(u => u.Username == identifier);

if (type.HasFlag(IdentifierType.Windows))
    pred = pred.Or((u => u.WindowsUsername == identifier);

return query.Where(pred.Expand()).FirstOrDefault();
// or return query.AsExpandable().Where(pred).FirstOrDefault(); 
```

这就是`Expand`它的用途：

> Entity Framework 的查询处理管道无法处理调用表达式，这就是您需要在查询中的第一个对象上调用 AsExpandable 的原因。通过调用 AsExpandable，您可以激活 LINQKit 的表达式访问者类，该类将调用表达式替换为 Entity Framework 可以理解的更简单的构造。

或者：没有它，表达式是`Invoke`d，这会导致 EF 中的异常：

> LINQ to Entities 不支持 LINQ 表达式节点类型“Invoke”。

**后期补充：**

有一个替代的谓词构建器可以做同样的事情但没有展开： http: [//petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/](http://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T08:56:31.473

这应该有帮助..

[包含多列查询](https://stackoverflow.com/questions/5757364/linq-to-sql-contains-query-on-multiple-columns)

似乎表格设计存在根本问题（如果我错了，请纠正我）。数据库中 IdentifierType 的用途是什么？

# c# - 如果我有继承类类型的 MethodInfo，如何获取接口的 MethodInfo？

> ID：14621451
> 
> 赞同：6
> 
> 时间：2013-01-31T08:34:13.787
> 
> 标签：c#, .net, reflection, methodinfo

我有`MethodInfo`一个类类型的方法，它是该类实现的接口定义的一部分。
如何`MethodInfo`在类实现的接口类型上检索方法的匹配对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:49:22.160

我想我找到了最好的方法：

```
var methodParameterTypes = classMethod.GetParameters().Select(p => p.ParameterType).ToArray();
MethodInfo interfaceMethodInfo = interfaceType.GetMethod(classMethod.Name, methodParameterTypes); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-04T14:45:51.653

对于显式实现的接口方法，按名称和参数查找将失败。这段代码也应该处理这种情况：

```
private static MethodInfo GetInterfaceMethod(Type implementingClass, Type implementedInterface, MethodInfo classMethod)
{
    var map = implementingClass.GetInterfaceMap(implementedInterface);
    var index = Array.IndexOf(map.TargetMethods, classMethod);
    return map.InterfaceMethods[index];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T08:40:58.410

如果你想从类实现的接口中找到方法，这样的事情应该可以工作

```
MethodInfo interfaceMethod = typeof(MyClass).GetInterfaces()
                .Where(i => i.GetMethod("MethodName") != null)
                .Select(m => m.GetMethod("MethodName")).FirstOrDefault(); 
```

或者，如果您想从类中的方法信息中获取类实现的接口中的方法，您可以这样做。

```
 MethodInfo classMethod = typeof(MyClass).GetMethod("MyMethod");

    MethodInfo interfaceMethod = classMethod.DeclaringType.GetInterfaces()
        .Where(i => i.GetMethod("MyMethod") != null)
        .Select(m => m.GetMethod("MyMethod")).FirstOrDefault(); 
```

# c# - XML 从 nextNode 获取值

> ID：14621452
> 
> 赞同：1
> 
> 时间：2013-01-31T08:34:23.357
> 
> 标签：c#, xml-parsing

我试图在我选择的节点之后从一个节点获取一个值。到目前为止，我已经能够将整个节点信息作为 var 获取，但我被困在如何仅获取值上。

我的 xml 看起来像这样

```
<COLUMN>
<NAME>Addr1</NAME>
<VALUE>1234 my street</VALUE>
</COLUMN> 
```

我得到这样的节点

```
var address = (from c in contactInfo.Descendants("NAME")
                                   where c.Value == "Addr1"
                               select c.NextNode).Single(); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:46:11.167

尝试：

```
(address as XElement).Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:46:36.127

`NextNode`返回一个`XNode`, 而你需要一个`XElement`:

```
var address = (from c in doc.Descendants("NAME")
    where c.Value == "Addr1"
    select c.NextNode).OfType<XElement>().Single().Value; 
```

我宁愿避免将所有内容放在一行上，而是执行以下操作来添加一些额外的检查：

```
var address = (from c in doc.Descendants("NAME")
                where c.Value == "Addr1"
                select c.NextNode).Single();
var element = address as XElement;
if (element != null) {
    string value = element.Value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:46:45.197

```
var node = contactInfo.Descendants("COLUMN")
                  .SingleOrDefault(c => c.Element("NAME").Value.Equals("Addr1"))

if (node != null)
     var result = node.Element("VALUE").Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:50:44.910

您应该选择`COLUMN`元素而不是搜索`NAME`元素：

```
var address = (from c in contactInfo.Descendants("COLUMN")
               where (string)c.Element("NAME") == "Addr1"
               select (string)c.Element("VALUE")).Single(); 
```

与方法语法相同：

```
var address = contactInfo.Descendants("COLUMN")
                         .Where(c => (string)c.Element("NAME") == "Addr1")
                         .Select(c => (string)c.Element("VALUE"))
                         .Single(); 
```

此外，您应该完全确定始终存在一个具有 name 的列元素`Addr1`。否则`Single()`会抛出异常。

# xml - 为什么不同的 SOAP 客户端使用不同的 XML 方言？

> ID：14621455
> 
> 赞同：0
> 
> 时间：2013-01-31T08:34:38.443
> 
> 标签：xml, soap

使用 .Net Soap 客户端和我的 WSF/PHP 客户端调用相同的 SOAP 服务，我可以看到发送的 XML 之间的差异。

这是我的：

```
<soapenv:Envelope>
    <soapenv:Header>
        <soapenv:Action>http://www.aaa.fr/SendMessage</soapenv:Action>
        <wsse:Security soapenv:mustUnderstand="1">
            <xenc:EncryptedKey Id="EncKeyID-xxxxxxxxx-xxxx-xxxx-xxxx"> 
```

这是.Net XML：

```
<s:Envelope>
    <s:Header>
        <a:Action s:mustUnderstand="1" u:Id="_3">http://www.aaa.fr/SendMessage</a:Action>
        <o:Security s:mustUnderstand="1">
            <e:EncryptedKey Id="EncKeyID-xxxxxxxxx-xxxx-xxxx-xxxx"> 
```

我不是 XML 和 SOAP 方面的专家，但这有什么大不了的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:33:41.637

区别在于命名空间前缀的定义。只要命名空间前缀“s”与“soapenv”指向同一个命名空间，“o”与“wsse”指向同一个命名空间，“e”与“xenc”指向同一个命名空间，等等等等。应该没有问题，XML 实际上是相同的。

例子：

```
<a:NodeA xmlns:a="http://www.a.com">
    <b:NodeB xmlns:b="http://www.b.com">
        <c:NodeC xmlns:c="http://www.c.com">My Data!</c:NodeC>
    </b:NodeB>
</a:NodeA> 
```

等同于

```
<anamespace:NodeA xmlns:anamespace="http://www.a.com">
    <bns:NodeB xmlns:bns="http://www.b.com">
        <c:NodeC xmlns:c="http://www.c.com">My Data!</c:NodeC>
    </bns:NodeB>
</anamespace:NodeA> 
```

因为即使前缀不同，它们在两个示例中都指向相同的命名空间（分别为[http://www.a.com](http://www.a.com)、[http://www.b.com](http://www.b.com)和[http://www.c.com](http://www.c.com)）。

# javascript - 在数据表中单击可链接列的数据时显示隐藏内容

> ID：14621458
> 
> 赞同：0
> 
> 时间：2013-01-31T08:34:42.130
> 
> 标签：javascript, jquery, datatables

我在数据表中有一个可链接的列。我需要检索行数据并在使用 javascript/jquery 单击可链接列的数据时显示不同选项卡的内容。请帮我举一些例子。

谢谢你。

这是我的 html 表

```
 <thead>
                       <tr class="headtable">
                           <th>Product Name</th>
                           <th>category</th>
                           <th>Serial Number</th>
                       </tr>
                       </thead>
               <tbody>

                <tr>
                   <td>xxxx</td>
                   <td>yyyy</td>
                   <td><a href="#" id="link1">zzzz</a></td>
                </tr>

                <tr>
                   <td>xxxx1</td>
                   <td></td>
                   <td><a href="#" id="link2">zzzz1</a></td>
                </tr> 
```

我的 jquery 函数是 $('.table td a').click(function(){

```
 var cell_content = $(this).find('td').eq(0).text();

 alert(cell_content);

}); 
```

如果我单击表格的可链接列，我需要此函数中的整行数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:25:12.480

像这样的东西？

```
$("#myTable tbody").on('click','tr', function(){
  var cell_content = $(this).find('td').eq(1).text();
}); 
```

# javascript - 如何从正则表达式的结果中获取数组

> ID：14621461
> 
> 赞同：1
> 
> 时间：2013-01-31T08:34:46.167
> 
> 标签：javascript, regex, arrays

我无法从正则表达式匹配的结果中获取数组：

```
var txt = '[Eig2]=>100 [Eig1]=="test"';
var reg = '(\\[)((?:[a-z][a-z]+))(\\d+)(\\])';
var m = txt.match(new RegExp(reg, ["i"]));
if (m != null) {
    for (var i = 0; i < m.length; i++) {
        console.log(m[i]);
    }
} else {
    console.log("null");
} 
```

它返回什么：

```
[Eig2] 
[ 
Eig 
2 
] 
```

我想要的是：

```
[Eig2]
[Eig1] 
```

我可以在没有“new RegExp”的情况下这样做，但是使用“/([)((?:[az][az]+))(\d+)(])/g”它不起作用......

一些想法？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:38:59.927

你应该修改

```
var m = txt.match(new RegExp(reg, ["i"])); 
```

到

```
var m = txt.match(new RegExp(reg, ["ig"])); 
```

将`g`标志添加到您的正则表达式中，这意味着您要匹配字符串中的所有模式，而不是第一个模式及其子模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:49:34.333

首先，我将简化表达式：

```
var re = /\[([a-z]{2,}\d+)\]/ig; 
```

我添加了`/i`不区分大小写的匹配和`/g`修饰符来匹配多次出现。然后你这样称呼它：

```
> txt.match(re);
  ["[Eig2]", "[Eig1]"] 
```

要提取第一个内存捕获：

```
var captures = [];

txt.replace(re, function($0, $1) {
    captures.push($1);
}); 
```

*授予，`.replace()`在这里被滥用*

然后，评估捕获：

```
> captures
  ["Eigh2", "Eigh1"] 
```

**更新**

构建内存捕获数组的一种更友好的方式：

```
var captures = [], match;

while ((match = re.exec(txt)) !== null) {
    captures.push(match[1]);
}); 
```

# windows - 增加文本文件名称 - windows

> ID：14621462
> 
> 赞同：0
> 
> 时间：2013-01-31T08:34:51.397
> 
> 标签：windows, batch-file, text-files

我有一个充满文本文件的目录，所有名称都不合逻辑。我想将所有这些文本文件的名称更改为仅递增的数字（即 1.txt、2.txt、3.txt ...）。我不在乎按哪个顺序，只是他们的名字被改变了。我正在使用 Windows，因此感谢 Windows 适当的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:28:41.373

此代码将目录中的所有文件更改为 1.txt 2.txt 依此类推

```
@echo off
SETLOCAL EnableDelayedExpansion
cd "\currentdirectory where files are present"
set /a incr=0
FOR %%G in ("*.txt") DO call :rename "%%G"

:rename
set file1=%~1 
set /a incr=!incr!+1
ren !file1! !incr!.txt
endlocal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:22:09.387

你不需要批处理文件。壳牌惊人地做到了。选择文件夹中的所有文件，然后单击重命名。

# dependency-injection - 是否存在用于 SystemWrapper 的 Autofac 模块？

> ID：14621465
> 
> 赞同：1
> 
> 时间：2013-01-31T08:34:54.490
> 
> 标签：dependency-injection, mocking, autofac, .net

有一个用于包装名为[SystemWrapper](http://systemwrapper.codeplex.com/)的系统调用的 .NET 库。我正在使用它来模拟使用 Autofac 的项目中的 System.IO 调用。我不必为我正在使用的所有 SystemWrapper 类型写出注册，我想知道：是否已经有一个 Autofac 注册模块可以插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:35:57.967

也许，您编写自己的模块？在 Autofac 的 RegisterAssemblyTypes 的帮助下。 [http://code.google.com/p/autofac/wiki/Scanning](http://code.google.com/p/autofac/wiki/Scanning)

# c# - 为每个注册用户创建子域？

> ID：14621466
> 
> 赞同：1
> 
> 时间：2013-01-31T08:34:59.853
> 
> 标签：c#, asp.net

> **可能重复：**
> [是否可以基于子域创建 ASP.NET MVC 路由？](https://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain)
> [如何使用 C# 和 asp.net 使用用户名创建子域？](https://stackoverflow.com/questions/1437277/how-to-create-subdomain-with-username-using-c-sharp-and-asp-net)

如何为在我的应用程序中注册的每个用户创建一个子域？

例如。我的应用程序托管在`www.xyz.com` 如果一个名为“bsoft”的用户在我的应用程序中注册，我需要为该用户创建一个 url 为`bsoft.xyz.com`.

# sql - Visual Studio 2012 Linq to SQL 可视化工具

> ID：14621471
> 
> 赞同：3
> 
> 时间：2013-01-31T08:35:28.547
> 
> 标签：sql, linq, entity-framework, visual-studio-2012

在 Visual Studio 2012 中查看 Linq 查询生成的 SQL（理想情况下是数据）的最简单方法是什么？我以前使用过许多在 VS2008/2010 中运行良好的调试可视化工具，但我似乎找不到适用于 2012 年的调试可视化工具。

例如说我有 Linq：

```
var l = ctx.PurchaseOrders.Where(c => c.PurchaseOrderID == searchstring); 
```

我如何查看 Linq 正在转换为什么 SQL？

我正在使用实体框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:16:58.467

我一直在使用[Orm profiler](http://www.ormprofiler.com/)，它不是免费的，但是它节省了我很多时间来查看 EF 生成的查看 SQL 并分析性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:44:59.317

你也可以试试`Visual Studio IntelliTrace`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:30:56.503

如果您针对 MS SQL Server 运行，您可以使用“SQL Server Profiler”。除了包含参数的 SQL 语句之外，您还可以获得查询的统计信息（CPU 成本、读取、写入......）。

# windows-runtime - 如何在 WinRT C++ 中编写内部类

> ID：14621475
> 
> 赞同：0
> 
> 时间：2013-01-31T08:35:44.270
> 
> 标签：windows-runtime, windows-store-apps, c++-cx

我正在尝试在 Win Rt 中移植 C++/C 库。旧图书馆包含许多内部类。

我想知道如何在 Win Rt 中转换这些类。我凝视着它在那里没有找到任何例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:05:24.497

在常规课程中，您可以像以前一样进行操作。在 ref 类中，您只能声明内部/私有类。

```
public ref class Class1 sealed
{
public:
    Class1();

internal:

    class Class2
    {
    public:
        void Do();
    };
}; 
```

# java - 防止 JNLP 缓存在 Java Web Start 缓存中

> ID：14621478
> 
> 赞同：1
> 
> 时间：2013-01-31T08:35:49.567
> 
> 标签：java, jnlp, java-web-start

当我启动 JNLP 时，它总是被缓存在 Java Web Start 缓存中。有没有办法防止它被缓存？它里面的一些属性/属性？

# java - 与 Spring 提供的 BeanUtils.copyProperties 相比，克隆方法在性能方面是否昂贵？

> ID：14621480
> 
> 赞同：0
> 
> 时间：2013-01-31T08:35:57.317
> 
> 标签：java, performance, spring

请为此提供更多详细信息或替代方法。

请注意：我没有覆盖克隆方法，如果有人能解释我是否应该覆盖克隆方法以及优势是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:46:32.430

你不能改用复制构造函数吗？

```
public class User {

    private String firstname;
    private String lastname;

    // 0-arg constructor
    public User() {        
    }

    // classic constructor
    public User(String firstname, String lastname) {
        this.firstname = firstname;
        this.lastname = lastname;
    }

    // copy constructor
    public User(User copy) {
        firstname = copy.getFirstname();
        lastname = copy.getLastname();
    }

    // accessors omitted

} 
```

然后，您可以像这样使用它：

```
User johnDoe = new User("john", "doe");
User copy = new User(johnDoe); 
```

这是一种非常常见的方法，其优点是您可以手动决定复制或不复制哪些属性，以及如何复制它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:12:00.130

这与性能无关，克隆性能还可以。但是您只能克隆 Cloneable 对象，而 Spring 的 BeanUtils.copyProperties 可以复制任何 JavaBean 对象的属性（公共无参数构造函数和属性的 setter / getter）。例如，这可以很好地复制不同类的 2 个对象的属性

```
class X {
    String name;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
}

class Y {
    String name;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
}

public class Test1 {

    public static void main(String[] args) throws Exception {
        X x = new X();
        x.setName("test");
        Y y = new Y();
        BeanUtils.copyProperties(x, y);
        System.out.println(y.getName());
    }
} 
```

并打印

```
test 
```

# javascript - Ember.js：从集合中检索随机元素

> ID：14621481
> 
> 赞同：2
> 
> 时间：2013-01-31T08:36:06.640
> 
> 标签：javascript, ember.js

我有这样的路线：

```
App.RandomThingRoute = Ember.Route.extend({
  model: function() {
    return App.Thing.find("random");
  }
}); 
```

它需要访问`/things/random`API 端点。

我在控制器中也有一个动作：

```
App.RandomThingController = Ember.ObjectController.extend({
  displayRandomThing: function() {
    return this.content.reload();
  }
}); 
```

它重新加载模板中的随机事物。

我刚从 Ember.js（或任何 MVC 前端框架）开始，我几乎没有疑问/问题：

1.  首先：这是做事的正确方法吗（`this.content.reload()`）？
2.  我的 API 端点接受`old_thing`允许获取与当前显示的不同的随机事物的参数：`/things/random?old_thing=Something`. 在 Ember.js 中实现这一点的最惯用/正确的方法是什么？如何将此传递`old_thing`给`find()`and `reload()`？我应该使用这里建议的视图：[Preferred way to retrieve data from a template in EmberJS](https://stackoverflow.com/questions/11138389/preferred-way-to-retrieve-data-from-a-template-in-emberjs)吗？

我很难找到一些关于`ember-data`（一切都过时了）的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:01:08.940

我来寻找这个问题的答案并最终来到这里。我需要为我的模型找到一条随机记录，但不知道如何调用 store 的 find 方法。

在查看 ember-data 源后，我发现将对象传递到 find 方法会将存储从 findById 切换到 findQuery。

这让我认为为单个随机对象调用 find 的一种体面方法可能是：

`App.Thing.find({random:true, old_thing: 'oldThing', limit:1});`

这些将被转换为查询参数，然后您需要修改您的 API 'Thing' 端点以接受这些参数。

`api/thing?random=true&old_thing=oldThing&limit=1`

允许将随机标志和限制作为参数传入意味着您不必使用额外的路由来弄乱您的 API 来查找随机记录。

我不确定这是否是最惯用的方式，但这是我选择的方式。

编辑：

顺便说一句，如果您像这样查询，您的 API 与 Ember Data 结合应该返回一个包含一个元素的数组。现在，由于调用是异步进行的，调用“find”后不会立即定义元素，因此您必须添加一个观察者来在项目加载后更新控制器的内容。

像这样，在我的轨道控制器上：

```
, randomiseTrack: function(){
        var _this = this
        var currentTrackId = this.get('content.id')
        var loadingTrackList = App.Track.find({
            random:true, 
            current_track_id: currentTrackId, 
            limit: 1
        });
        loadingTrackList.addObserver("isLoaded", function(){
            _this.set('content', loadingTrackList.materializedObjectAt(0));
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:25:19.793

1 - 我宁愿以这种方式在控制器中重新加载内容：

```
reloadContent: function(){
    this.set('content', App.Thing.find("random"));
} 
```

2 - 如果您想将参数传递给您的 GET（假设您使用的是 RESTAdapter），您可以使用散列传递它们。

```
App.Thing.find({old_thing: 'oldThing'); 
```

但这里有些“可疑”。Model.find 需要一个 id 或一个哈希。你的“随机”感觉两者都不是。

我不知道您是否可以在指定 Id 时发送参数，因为您使用“随机”指定。感觉有点不对，因为您已经指定要获取单个项目，但同时也发送散列以过滤项目。（这不是你的意图）

# javascript - 如何在three.js中控制TrackBallControls旋转

> ID：14621484
> 
> 赞同：1
> 
> 时间：2013-01-31T08:36:23.120
> 
> 标签：javascript, controls, three.js

我一直在制作[**这个**](http://0xor1.github.io/Sudoku-Assistant-3D/)应用程序，如果您单击左上角的选项卡，它将显示助手立方体，然后单击并在屏幕上拖动鼠标以使用 trackBallControls 移动相机。如果您将相机旋转到一侧，然后再次单击左上角的选项卡以隐藏助手立方体，它应该会重新聚焦在板上，但它会以一个奇怪的角度旋转。

trackBallControls api 的任何部分是否允许旋转相机？目前，我将相机设置回中心并进行零旋转，但在旋转动画完成后，trackBallControls 再次接管并将其捕捉到不对齐，这是不需要的，我看不到任何明显的从控制 api 控制旋转的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:21:52.560

不，没有任何部分`TrackballControls`限制相机的旋转。

`TrackballControls`对于您的目的来说，这确实是错误的控制。这就是你不喜欢它的原因。Try `OrbitControls`，这将使拼图“正面朝上”——而且代码很容易理解。

就个人而言，我会照你说的做，并编写你自己的控件。恕我直言，相机不需要在助手内垂直移动——只需水平移动一圈。

无论如何，恭喜！漂亮的应用程序。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:08:20.080

可以修改`this.rotateCamera()`in的代码`TrackballControls.js`。

# c# - global.asax 重定向路由不起作用

> ID：14621492
> 
> 赞同：3
> 
> 时间：2013-01-31T08:36:42.977
> 
> 标签：c#, asp.net-mvc-4, global-asax, custom-routes

我想在我的 global.asax 中使用带有 response.redirecttoroute 的自定义路由，但它不起作用。我的 RouteConfig 中有以下内容：

```
routes.MapRoute(
            name: "Error",
            url: "Error/{action}/{excep}",
            defaults: new { action = "Index", excep = UrlParameter.Optional }
        ); 
```

在我的 global.asax 中，我执行以下操作：

```
Response.RedirectToRoute("Error", new { action="Index", excep=ex.Message }); 
```

在我的 ErrorController 我有：

```
public ActionResult Index(string excep)
    {
        ViewBag.Exception = excep;

        return View();
    } 
```

在我的错误索引视图中，我调用 ViewBag.Exception 来显示异常。

当我使用：

```
Response.Redirect("/Error/Index/0/"+ex.Message, true); 
```

并在我的控制器中使用它：

```
public ActionResult Index(int? id,string excep)
    {
        ViewBag.Exception = excep;

        return View();
    } 
```

它有效，但这是默认路由，不是我想要的。为什么它适用于重定向而不适用于redirecttoroute？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:16:23.217

另一个问题有一个很好的答案：[应该如何使用 RedirectToRoute？](https://stackoverflow.com/questions/1290355/how-is-redirecttoroute-supposed-to-be-used)

我会尝试`Response.End()`在 the 之后添加一个`RedirectToRoute`，看看是否有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T04:28:21.403

我遇到了同样的问题，但现在我找到了解决方案。也许你可以试试这个：只需根据你的需要重命名类名或变量名。从 Global.asax 更改任何内容后请注意清除浏览器缓存。希望这可以帮助。

**全球.asax**

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
       //Make sure this route is the first one to be added
        routes.MapRoute(
           "ErrorHandler",
           "ErrorHandler/{action}/{errMsg}",
           new { controller = "ErrorHandler", action = "Index", errMsg=UrlParameter.Optional}
           );
        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

**一旦发生 unhandles 异常，将响应从 Global.asax Application_Error 事件重定向到错误处理程序**

```
 protected void Application_Error(object sender, EventArgs e)
        {
            var errMsg = Server.GetLastError().Message;
            if (string.IsNullOrWhiteSpace(errMsg)) return;
            //Make sure parameter names to be passed is are not equal
            Response.RedirectToRoute("ErrorHandler", new { strErrMsg=errMsg });
            this.Context.ClearError();
        } 
```

**错误处理控制器**

```
public class ErrorHandlerController : Controller
    {

        public ActionResult Index(string strErrMsg)
        {
            ViewBag.Exception = strErrMsg;
            return View();
        }

    } 
```

**要在 HomeController 的 Index ActionResult 上测试错误处理程序，请添加此代码。**

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            //just intentionally add this code so that exception will occur
            int.Parse("test");
            return View();
        }
    } 
```

**输出将是**

![在此处输入图像描述](../Images/c0b733885a07485ed40ca9cf08852c49.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T14:48:17.500

这是我使用 MVC 4 解决问题的方法：

**路由配置.cs**

```
 routes.MapRoute(
            name: "ErrorHandler",
            url: "Login/Error/{code}",
            defaults: new { controller = "Login", action = "Error", code = 10000 } //default code is 10000
        );

    routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Login", action = "Index", id = UrlParameter.Optional }
        ); 
```

**全球.asax.cs**

```
 protected void Application_Start()
    {
            //previous code
            RouteConfig.RegisterRoutes(RouteTable.Routes);

            this.Error += Application_Error; //register the event
    } 

    public void Application_Error(object sender, EventArgs e)
    {
            Exception exception = Server.GetLastError();
            CustomException customException = (CustomException) exception;
            //your code here

            //here i have sure that the exception variable is an instance of CustomException.
            codeErr = customException.getErrorCode(); //acquire error code from custom exception

            Server.ClearError();

            Response.RedirectToRoute("ErrorHandler", new
                                    {
                                            code = codeErr
                                    });
            Response.End();
    } 
```

这是诀窍：**确保将 Response.End() 放在 Application_Error 方法的末尾**。否则，重定向到路由将无法正常工作。具体来说，代码参数不会传递给控制器​​的操作方法。

**登录控制器**

```
 public class LoginController : Controller
    {
           //make sure to name the parameter with the same name that you have passed as the route parameter on Response.RedirectToRoute method.
           public ActionResult Error(int code)
           {
                   ViewBag.ErrorCode = code;

                   ViewBag.ErrorMessage = EnumUtil.GetDescriptionFromEnumValue((Error)code);

                   return View();
           }
    } 
```

# spring - Spring Entity Manager 和 Spring Data Repository 有什么区别？

> ID：14621495
> 
> 赞同：52
> 
> 时间：2013-01-31T08:36:49.420
> 
> 标签：spring, jpa, spring-data, spring-data-jpa

我在网站中使用 JPA。在探索了保存数据的选项之后，我发现了 2 种方法。第一种方法是使用 javax.persistence.EntityManager 的实现。我使用 LocalContainerEntityManagerFactoryBean 来实例化 EntityManager 的一个实例。一旦我获得了一个 EntityManager 的实例，我就可以用它来保存一个实体。例如，

```
entityManager.merge(someEntity); 
```

另一种选择是使用 org.springframework.data.repository.CrudRepository 的实例。一，我获得了一个 CrudRepository 的实例，我可以用它来保存一个实体。例如，

```
aCrudRepository.save(someEntity); 
```

使用 EntityManager 和 CrudRepository 将实体持久保存到数据库中有什么区别？这两种方法（实体管理器与 crud 存储库）的优点或缺点是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2019-05-29T16:33:18.187

在 Java/Spring 中有几个处理持久数据的层：

*   JDBC
*   Jdbc模板
*   JPA（包含`EntityManager`）
*   Spring Data JPA（包含`Repository`）

每个抽象都使开发人员免受较低级别的细节的影响，但它也可能带来其自身的复杂性。JdbcTemplate 是对普通 JDBC 的精简抽象。 `Repository`是对 的抽象`EntityManager`。它使开发人员免受引入的一些复杂细节的影响，`EntityManager`并添加了样板代码和许多方便的方法。

例如，`CrudRepository`添加 的实现`findAll()`，这是很常见的，因此预定义它是有意义的。存储库有许多方便的方法，用于从方法名称（约定优于配置）、实体本身（按示例查询）生成查询。它们允许使用漂亮的类型安全 Fluent API 和 Query DSL 或启用动态投影。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-31T08:58:13.043

这两个接口提供了两种不同的方法：

*   `org.springframework.data.repository.CrudRepository`是提供 CRUD 操作的存储库的通用接口。
*   `javax.persistence.EntityManager`与持久性上下文相关联。Spring 有它自己的接口，它为此目的而`CrudRepository` 调用。[`JpaRepository`](http://static.springsource.org/spring-data/jpa/docs/dev/api/org/springframework/data/jpa/repository/JpaRepository.html)

我希望你知道持久化 API 的好处或坏处。如果你不这样做，你可以阅读[这个问题](https://stackoverflow.com/questions/4406310/why-use-jpa-instead-of-directly-writing-sql-query-on-java-file-i-e-directly-to)的答案。

# mongodb - 复杂的mongodb查询

> ID：14621496
> 
> 赞同：0
> 
> 时间：2013-01-31T08:36:50.153
> 
> 标签：mongodb

我是 mongo 的新手，我正在尝试做一个简单的查询（至少在 sql 中它很简单），但我做错了。我使用java驱动程序。
我的收藏包含文件：

```
{"name":"bb",
 "action": {"Type":"Buy","amount":78},
 "date": "Jan 31, 2013 10:31:20 AM"} 
```

我想查找用户：“bb”是否在上个月进行了购买操作，总金额超过 1000（我想要`$sum`金额）
我如何在 Mongodb 中执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:42:40.520

像这样的东西：

```
db.col.aggregate([
    {$match: {name: 'bb'}},
    {$unwind: '$action'}, 
    {$group: {_id: '$name', sum_amount: {$sum: '$action.amount'}}},
    {$match: {sum_amount: {$gt: 1000}}}
]) 
```

会做的伎俩。我假设这里唯一的操作类型是，如果不是这种情况，您可以在`buy`以下情况下进行额外操作：`$match``$unwind`

```
{$match: {'action.Type': 'Buy'}} 
```

只获取`Buy`类型。

# google-closure-compiler - 使用闭包编译器命令行缩小和替换原始文件

> ID：14621504
> 
> 赞同：2
> 
> 时间：2013-01-31T08:37:19.013
> 
> 标签：google-closure-compiler

我试过

`java -jar compiler.jar --js jj.js --js_output_file jj.js`

输出文件大小为 0。

如果我不想将 .min.js 重命名为 .js，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:12:56.770

编译器不支持这个。我相信下一个版本在覆盖文件之前实际上会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T17:44:10.490

这是不可能的——为了安全起见，尽管下面的 bash 脚本实现了你想要的：

```
#!/bin/sh
for js in $(find ./public_html -name *.js)
do
        java -jar compiler.jar --js $js --js_output_file $js.min
        mv $js.min $js
done 
```

# asp.net-mvc - 动作之间的重定向不正确

> ID：14621509
> 
> 赞同：1
> 
> 时间：2013-01-31T08:37:30.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, asp.net-mvc-4, asp.net-mvc-routing

当用户想要转移到域之间的动作游戏时，我遇到了一些问题。组织在本地版本的这个：

```
mysite.com/subdomain1/webpage/show?url=about
mysite.com/subdomain2/webpage/show?url=about 
```

在全球范围内：

```
subdomain1.mysite.com/webpage/show?url=about
subdomain2.mysite.com/webpage/show?url=about 
```

我想让用户每次都不要进入主子域。例如：当前页面 - `subdomain1.mysite.com/webpage/show?url=about`。我想查看**`subdomain2`**类似的页面。我将用户重定向到`subdomain2.mysite.com/`. 但我想重定向用户 - `subdomain2.mysite.com/webpage/show?url=about` 没有过渡`subdomain2.mysite.com`

如何在 ASP MVC 和 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:27:46.183

```
public static string ReplaceSubdomain(this HttpRequest request)
        {
            var urlReferrer = request.UrlReferrer.AbsoluteUri != null ? request.UrlReferrer.AbsoluteUri : string.Empty;
            // Get URl
            var url = request.Url.AbsoluteUri;
        #if DEBUG || APPS
            // Search local subdomain
            Regex child = new Regex(@"\b[0-9]?[.]?child[0-9]?");
            // if this request consist of subdomain
            if (child.IsMatch(urlReferrer) && child.IsMatch(url))
            {
                // select subdomain
                var matchUrlRef = child.Match(urlReferrer).ToString();
                var matchUrl = child.Match(url).ToString();
                // if subdomain are not equals
                if ((matchUrlRef != matchUrl))
                {
                    // single out link after local subdomain
                    var urlRefSub = urlReferrer.Remove(0, urlReferrer.IndexOf(matchUrlRef) + matchUrlRef.Length);
                    var urlSub = urlReferrer.Remove(0, url.IndexOf(matchUrl) + matchUrl.Length);
                    // validate link query after subdomain
                    // if different url query - replace subdomain
                    if (urlReferrer.Length > urlSub.Length)
                        return urlReferrer.Replace(urlRefSub, urlSub);
                }
            }
            return url;
        #else

            //  Check if before page are existsand subdomain are equls
            if (!SubDomainRoute.GetSubdomain(urlReferrer).Equals(SubDomainRoute.GetSubdomain(url)))   
                // if subdomain really exist for "child of clinic"
                if (SubDomainRoute.GetSubdomain(urlReferrer).Contains("child") 
                        && SubDomainRoute.GetSubdomain(url).Contains("child"))
                    return url.Replace(SubDomainRoute.GetSubdomain(url),
                                                           SubDomainRoute.GetSubdomain(urlReferrer));
            return request.Url.AbsoluteUri;
        #endif
        } 
```

抱歉，如果我分散您的注意力并花费您的时间-我自己找到了解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:06:28.457

您如何在视图中创建链接（锚点）？如果您使用 ActionLink 方法，您可以编写一个包装器方法，例如 SubdomainActionLink，它会做同样的事情，但也会在 href 路径中插入“subdomain2”。如果您需要在代码隐藏中进行这样的重定向，只需获取当前请求 url 并替换子域号。

# jquery - jQuery：按键和覆盖

> ID：14621513
> 
> 赞同：0
> 
> 时间：2013-01-31T08:37:33.783
> 
> 标签：jquery, overlay, keypress

这是代码：

1）jQuery：

```
<script src="Scripts/jquery.tools.min.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
    $(function() {
        // if the function argument is given to overlay,
        // it is assumed to be the onBeforeLoad event listener
        $("a[rel]").overlay({
            mask: 'gray',
            effect: 'apple',
            onBeforeLoad: function() {
                // grab wrapper element inside content
                var wrap = this.getOverlay().find(".contentWrap");
                // load the page specified in the trigger
                wrap.load(this.getTrigger().attr("href"));
            }
        });
        $("#target").keypress(function(event) {
            // F1 pressed
            if (event.keyCode == 112) {
                alert("Help");
            }
        });
    });
</script> 
```

2）标记：

```
<!-- external page is given in the href attribute (as it should be) -->
<a href="WebForm1.aspx" rel="#overlay" style="text-decoration:none">
  <!-- remember that you can use any element inside the trigger -->
  <button type="button">Show external page in overlay</button>
</a>

<!-- another link. uses the same overlay -->
<a href="WebForm2.aspx" rel="#overlay" style="text-decoration:none">
  <button type="button">Show another page</button>
</a>

<!-- overlayed element -->
<div class="apple_overlay" id="overlay">
  <!-- the external content is loaded inside this tag -->
  <div class="contentWrap"></div>
</div> 
```

我在页面上有 2 个按钮，当单击其中任何一个按钮时，会显示带有一些文本的漂亮灰色层。如果我按 F1 键，我也想做同样的事情，就像我们寻求帮助一样。在此示例中出现消息框，但需要替换为灰色层。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:55:00.173

这样做

```
$("body").keypress(function(event){
if(event.which == 12){  // keycode 12 for F1
  //trigger on click event 
   $("#element").click();
  //or write your code here
  code
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:53:01.657

做一个单独的函数：

```
function loadWrap (wrap) {
    var wrap = this.getOverlay().find(".contentWrap");

    // load the page specified in the trigger
    wrap.load(this.getTrigger().attr("href"));
} 
```

然后在两个事件处理程序中调用此函数：

```
onBeforeLoad: function() {
    // grab wrapper element inside content
    loadWrap(this);
}

//////////////////

$("#target").keypress(function(event) {
    // F1 pressed
    if (event.keyCode == 112) {
        loadWrap($("a[rel]").first());
    }
}); 
```

# c# - oleDB 插入新条目

> ID：14621516
> 
> 赞同：0
> 
> 时间：2013-01-31T08:38:04.987
> 
> 标签：c#, winforms, oledb

我是使用 microsoft access 创建的数据库。从这个数据库我只能读取数据，不能向其中添加新条目，

我使用下面的代码插入数据

```
cmd = new OleDbCommand("insert into [Accountstbl] values(" + textBox1.Text + 
",' " + textBox6.Text + " ',' " + textBox3.Text + " ')", cn); 
```

但是当我点击确定时，表单只是变成没有响应并且没有在数据库中插入任何数据，我知道我的路径是正确的，因为我可以读取数据，

你能给我一个指导吗？找不到任何东西:(谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:52:30.173

第一个文本框（textBox1.Text）缺少单引号？

试试下面一个

```
cmd = new OleDbCommand("insert into [Accountstbl] values('" + textBox1.Text + 
"',' " + textBox6.Text + " ',' " + textBox3.Text + " ')", cn); 
```

并尝试将以下代码放在您怀疑它出错的地方

```
try
{
   //Insertion code here, .............Query,ExcuteNonQuery,.....etc
} 
catch(Exception ex)
{
  MessageBox.Show(ex.ToString());//You will get here what problem is there.....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:43:24.740

尝试：

```
cmd = new OleDbCommand("insert into [Accountstbl] (field1, field2, field3) values(" + textBox1.Text + ",' " + textBox6.Text + " ',' " + textBox3.Text + " ')", cn); 
```

将 field# 替换为数据库中的字段。

# ant - ant junit 任务即时转储控制台输出的选项

> ID：14621517
> 
> 赞同：7
> 
> 时间：2013-01-31T08:38:05.803
> 
> 标签：ant, junit, log4j

使用 Ant junit 任务启动我的非回归测试时遇到问题：控制台输出仅在测试结束时转储。当有关进程 Xmx 的日志过多时，它会导致一些 OOM，这意味着如果进程在其结束之前死亡（或被看门狗杀死），则日志将丢失。

```
<junit fork="true" forkmode="once" timeout="1200000" haltonfailure="no" 
 outputtoformatters="yes" failureProperty="test.failure" dir="${project.test.dir}">
  <junit-opts/>
  <formatter type="xml" />
  <formatter type="brief" />
  <test name="${project.test.suite}" todir="${report.junit.dir}" outfile="@{project.test.name}" />
</junit> 
```

当然，可以通过将日志转储到文件中来解决这个问题（我们使用 log4j 作为日志记录 API）。但是，我们非常想测试应用程序的控制台输出日志。

是否有设置允许告诉 ant junit 任务将控制台输出转储到文件中，而不是等待测试套件结束？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-16T12:38:25.360

在junit命令中添加`showoutput="true"`参数：

```
<junit fork="true" showoutput="true" forkmode="once" timeout="1200000" haltonfailure="no" 
 outputtoformatters="yes" failureProperty="test.failure" dir="${project.test.dir}">
  <junit-opts/>
  <test name="${project.test.suite}" todir="${report.junit.dir}" outfile="@{project.test.name}" />
</junit> 
```

避免使用`showoutput="true"`和格式化程序。这是有问题的，因为这意味着 test stdout & stderr 在输出窗口中出现*了两次*（在运行时，因为`showoutput`标志，在执行之后，因为格式化程序）。

# git - 提交到另一个分支而不接触未暂存的文件

> ID：14621523
> 
> 赞同：3
> 
> 时间：2013-01-31T08:38:28.057
> 
> 标签：git

我有两个分支，比如 B1 和 B2。我在 B2 中，我有暂存和未暂存的文件。

我希望在 B1 中提交暂存文件（当我`git add`编辑文件时我以为我在 B1 中）并且在 B2 中提交未暂存文件。

是否可以？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:46:35.660

我敢肯定有一个更优雅的方式，但我能想出的是：

1.  将暂存文件提交到 B2
2.  将未分阶段的工作存放在 B2 上
3.  切换到 B1，然后在 B1 中挑选 B2 的最新提交
4.  切换回 B2，重置最新提交（--hard way）
5.  在 B2 上暂存并提交隐藏的工作

**编辑**

这个[问题](https://stackoverflow.com/q/3745774/264395)有一个详细的答案，或多或少符合我的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T09:22:25.963

`git stash`在分支之间移动脏更改时非常强大。在您的情况下，您可以应用以下步骤：

1.  `git stash --keep-index`，这将只存储未暂存的文件
2.  `git stash`，这将隐藏其余的，即暂存文件
3.  切换到 B1
4.  `git stash pop`, 暂存文件将移至 B1
5.  切换到 B2
6.  `git stash pop`，未暂存的文件将移至 B2

之后，您可以单独提交每个分支中的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:15:56.323

如果修改后的暂存和未暂存文件通过切换到分支 B1 没有改变，您可以在不影响任何内容的情况下切换分支，然后您可以轻松提交文件并切换回 B2。

但是，如果您修改的文件在 B1 和 B2 之间更改，则无法切换分支。在这种情况下，您必须在切换分支之前存储您的更改。

1.  `git stash --keep-index` *存储和保留暂存文件*
2.  `git reset HEAD` *取消暂存文件*
3.  `git stash` *存储您之前暂存的文件*
4.  `git checkout B1` *切换到B1分店*
5.  `git stash pop` *取消存储并删除您的最后一个存储*
6.  `git commit -a` *在 B1 上提交您之前暂存的文件*
7.  `git checkout B2` *切换到B2分店*
8.  `git stash pop`
9.  `git commit -a` *在 B2 上提交所有剩余的更改*

小心这些命令！我不是 git pro！:-)

# android - Android异步下载图片

> ID：14621524
> 
> 赞同：1
> 
> 时间：2013-01-31T08:38:31.347
> 
> 标签：android

我使用套接字在android端和服务器端之间进行通信。在系统中涉及图片上传和下载。当图片上传或下载时，我的客户端无法与其他服务器端交互。它不能实现异步操作。

如何解决这个问题呢？

# python - 带参数的 Openerp 调度程序方法：如何创建它们？

> ID：14621525
> 
> 赞同：1
> 
> 时间：2013-01-31T08:38:38.090
> 
> 标签：python, scheduler, openerp

我为 OpenERP 7.0 创建了一个新模块，它基本上是调度程序操作的占位符。

现在当我用这个创建我的方法时：

```
def _method_name(self, cr, uid): 
```

它工作得很好。但我需要一些额外的论据。我用这个：

```
def _method_name(self, cr, uid, arg1, arg2, arg3, arg4): 
```

这应该有效，对吧？坦率地说，我不知道。另外我不知道在 Openerp 的调度程序操作的参数行中写什么。我还需要传递 self、cr、uid 吗？还是通过我自己的就足够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:24:14.090

**self、cr、uid 参数说明：**

self - 这是 Python 的概念，python 中的“self”是指实例变量。它是对当前对象的引用。相当于其他语言中的“this”。

cr - openerp 中的当前数据库光标，在 openerp 中用于搜索、写入等内置方法。我们需要将此参数传递给在其架构中需要它的内置方法。

uid - 登录用户 ID，管理规则和访问权限所需。

*   **自我是必需的**

*   **对于普通函数 cr 和 uid 是可选参数。**

*   **但根据 ir.cron 对象模式，它需要调度程序方法中的 cr 和 uid 参数（在版本 6 中不确定版本 7）**

您可以使用变量或位置参数或关键字参数添加额外的参数。

如果可能，使用默认值定义变量。

例如：

```
def run_scheduler(self, cr, uid, arg1=False, arg2=False, context=None, kargs*):
    #your code here 
```

希望，它可以帮助。

# android - 共享库项目的清单服务和权限

> ID：14621526
> 
> 赞同：22
> 
> 时间：2013-01-31T08:38:44.090
> 
> 标签：android, google-cloud-messaging, android-library, aidl, android-permissions

我想开发一个由 GCMIntentService 组成的库项目，它执行 GCM 注册过程并接收通过 GCM 发送的消息。

我已经使用 AIDL 将我的库项目服务公开给宿主应用程序，但我还需要在应用程序项目中声明该服务.....我该如何避免这种情况？
此外，我还需要在应用程序清单中声明 GCM 所需的所有权限。
有什么方法可以从宿主应用程序中引用库项目中的所有权限和服务，而无需在清单中再次声明它们？

我对此进行了搜索，发现：
1.[是否可以在Android框架（库）中封装权限，](https://stackoverflow.com/questions/12591115/is-it-possible-encapsulate-permission-inside-android-framework-library)
这清楚地表明我想要实现的目标是不可能的。
2\. 清单文件合并了一些有用[的库项目吗？](https://stackoverflow.com/questions/4457219/library-project-does-the-manifest-file-merge) @Hayes Haugen 的回答说“ADT 工具的版本 20 支持 AndroidManifest.xml 合并”
我使用的是 ADT 版本 20.0.3

无论如何我可以实现提供 GCM 集成的库项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T17:49:05.293

你遇到了什么错误？

这对我很有用：

图书馆清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="org.plasync.client.android"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <!-- Needed for devices with 4.02 or earlier android -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <permission android:name="org.plasync.client.android.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <uses-permission android:name="org.plasync.client.android.permission.C2D_MESSAGE" />
   <!-- <uses-permission android:name="com.playsnc.client.android.data.permission.READ_WRITE"/>-->

    <application android:label="" android:icon="@drawable/ic_launcher">
        <!-- This is the signin activity for plAsync -->
        <activity android:name="org.plasync.client.android.AsyncMultiplayerSetupActivity"
                  android:label="@string/SETUP_ACTIVITY_NAME"
                  android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">

            <!-- This is the intent for getting the local user.  Apps that use plAsync must use this
                 intent to retrieve the local user, or allow the user to signin.  Apps should
                 use startActivityForResult as the sigin activity may require user interaction -->
            <intent-filter>
                <action android:name="@string/SETUP_ASYNC_MULTIPLAYER_SESSION_ACTION"/>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <receiver android:name="org.plasync.client.android.gcm.GcmBroadcastReceiver"
                  android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            </intent-filter>
        </receiver>

        <service android:name="org.plasync.client.android.gcm.GcmReceiveIntentLauncher"/>
    </application>
</manifest> 
```

应用清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.plasync.client.android.testapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme">
        <activity
            android:name="org.plasync.client.android.testapp.AsyncMultiplayerTestAppActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".search.FriendSearchActivity"
                  android:launchMode="singleTop">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
            <meta-data android:name="android.app.searchable"
                android:resource="@xml/searchable"/>
        </activity>

        <service android:name=".AsyncMultiplayerTestAppMessageReceiver"/>
    </application>

</manifest> 
```

另外，我想知道您使用服务和 AIDL 的解决方案是否过大。我从那条路线开始，但由于我的情况下进程间通信的复杂性而被关闭。我已经能够在我的库中简单地定义一个广播接收器和意图服务，在我的应用程序中启动一个意图服务。你只需要小心包名。和组件名称。包名称将始终是您的应用程序的包名称，但组件名称将是您的服务的类名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T07:57:08.127

看看 UrbanAirship 对这个特定问题的解决方案。

[UrbanAirship Android 文档](http://docs.urbanairship.com/build/android.html)

特别是部分`Configuring your Client Application`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:29:57.977

我希望这会有所帮助，我遇到了与您类似的问题，并且找不到不会导致某些或其他问题的解决方案。我的解决方案是当有人使用我的应用程序构建器时，它会将我的库以及我的 GCMintent 类和 CGM 库文件的副本放入应用程序中。

然后系统会自动将权限添加到他的应用程序清单中，并弹出一个新的 apk 供他使用。这就是我们的做法，我希望这可能会使您朝着解决方案的方向前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-07T21:47:10.640

afaik 库的清单在编译时被完全忽略

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T16:24:48.980

对于合并部分，我遇到了同样的问题，即必须再次从主项目清单中的 lib 项目声明我的服务。

对于那些`manifestmerger`不使用**Eclipse**的人（提醒一下，我们的想法是将以下行放入`project.properties`）：

`manifestmerger.enabled=true`

...然后您可能需要**清理主项目**以便它可以工作...（菜单*项目*，*清理...*）

这听起来很愚蠢，但由于我无法找到修改`project.properties`不起作用的原因，其他人可能也遇到了同样的问题。

您可以通过检查文件来检查合并是否正确完成`bin/AndroidManifest.xml`。

# r - 访问字符矩阵中的值以打开工作区中可用的相关数据框

> ID：14621528
> 
> 赞同：1
> 
> 时间：2013-01-31T08:38:50.910
> 
> 标签：r

我有一个字符矩阵两列矩阵（命名为“j”），其尺寸为 66 x 2，字符矩阵中的每个元素都包含当前工作区中可用的数据帧的名称。我想编写一个读取字符矩阵（“j”）的 R 脚本，从中提取数据框名称，然后读取工作区中可用的数据框。

# javascript - 为什么不透明度为0，但我的if语句仍然执行？

> ID：14621529
> 
> 赞同：1
> 
> 时间：2013-01-31T08:38:53.400
> 
> 标签：javascript, jquery, opacity

我有一个关于我的代码的问题。

我`$(this).css('opacity')`用来检查元素是否透明。当元素透明时，它应该返回 0。

但是，`if( $(this).css('opacity') !== 0 )`当它返回 0 时执行。知道为什么会发生这种情况吗？

提前致谢！

我的代码在这里：

[http://jsfiddle.net/dennisboys/f3JuH/2/](http://jsfiddle.net/dennisboys/f3JuH/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:42:44.327

这是因为 CSS 值总是以字符串形式返回（与`height`jQuery`width`方法不同，它们返回一个数字）。

试试这个测试是否适合你：

```
if( parseFloat($(this).css('opacity')) !== 0 ) 
```

或简单地使用弱（类型强制）不等式：

```
if( $(this).css('opacity') != 0 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:42:41.567

CSS 值以字符串形式返回。像这样改变条件。

```
if( $(this).css('opacity') !== "0" ) 
```

或者

```
if(parseFloat($(this).css('opacity'))!==0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:42:57.537

您需要先解析该值。所以您的 if 将是。

```
if(parseFloat($(this).css('opacity'))!==0) 
```

**[和工作演示](http://jsfiddle.net/f3JuH/8/)**

**编辑：parseInt 到 parseFloat**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:50:54.900

原因是条件确实为真。.css('opacity') 返回一个字符串；因此，在您的情况下，它将返回“0”，这当然与数字 0 不同，因为您使用的是不完全相同的运算符 (!==)。

您可能应该使用不等于运算符 (!=)。

'0' !== 0 --> 真 '0' != 0 --> 假

# common-lisp - 以编程方式引用（即，用于宏）

> ID：14621532
> 
> 赞同：0
> 
> 时间：2013-01-31T08:39:00.197
> 
> 标签：common-lisp, macrodef

我希望能够做到这一点：

```
(mapcar #'quote '(1 2 3 4)) 
```

得到这个

> （'1'2'3'4）

但是，由于 QUOTE 是一种特殊的形式，它不能被调用。

我试图将其宏化：

```
(defmacro quoter (&rest args)
  `(loop for arg in ,@args collect (quote arg)))

(quoter '(1 2 3 4 )) 
```

但这让我明白，正如我所料......

```
(LOOP FOR ARG IN '(1 2 3 4)
      COLLECT 'ARG) 
```

将输入转换为字符串，然后转换为符号是行不通的——我可能有传入的形式，而不仅仅是原子。

我确定我在这里遗漏了一些东西。:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:43:17.970

这将产生您想要的扩展：

```
(defmacro quoter (&rest args)
   (loop for arg in args collect `(quote ,arg))) 
```

...但是这样的宏不太可能真的是您在更高级别上想要的（除非您只想玩宏）。扩展不是有效的列表形式，因此使用它的唯一方法是调用您`MACROEXPAND`自己。如果你要调用`MACROEXPAND`，为什么不把它变成一个函数并调用那个函数呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:26:52.787

如果要将 item 转换为 form `(quote item)`，则必须提供转换。

例如`(list 'quote item)`或

```
`(quote ,item) 
```

如果您在函数中使用特殊形式或宏，则可以使用该函数并将其传递给类似`MAPCAR`.

```
CL-USER > (mapcar #'(lambda (item) (list 'quote item)) '(1 2 3 4))

((QUOTE 1) (QUOTE 2) (QUOTE 3) (QUOTE 4)) 
```

如果列表被替换为变量，这也有效。

如果您想将其编写为宏，那么您会遇到获取源代码并且需要对其进行转换的问题。如果你有一个列表，那么你可以直接转换它。例如，如果您有一个变量，那么您就不能（因为您不知道该变量的值）并且您必须将转换包含到生成的源中。

例子：

```
CL-USER 119 > (defmacro quoter (list)
                (list 'quote (mapcar (lambda (item) (list 'quote item))
                                     (second list))))
QUOTER

CL-USER 120 > (macroexpand '(quoter '(1 2 3 4)))
(QUOTE ((QUOTE 1) (QUOTE 2) (QUOTE 3) (QUOTE 4)))
T

CL-USER 121 > (quoter '(1 2 3 4))
((QUOTE 1) (QUOTE 2) (QUOTE 3) (QUOTE 4)) 
```

但现在它不知道该怎么办`(quoter some-variable)`。现在你不能转换一个列表——因为它是未知的。现在您需要提供一个宏扩展，它将在运行时进行转换......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T09:52:06.540

单线是：

```
(mapcar (lambda (x) `',x) '(1 2 3 4)) 
```

注意引号的使用。我发现这个表格有时很有用。

# java - 如何判断一个请求是Ajax还是Normal？

> ID：14621539
> 
> 赞同：9
> 
> 时间：2013-01-31T08:39:51.367
> 
> 标签：java, ajax, struts2, http-headers, struts-action

我想以不同的方式处理 AJAX 请求和普通请求的错误。

如何在 Struts2 操作中识别请求是否为 AJAX？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T10:53:19.557

您应该检查请求标头`X-Requested-With`是否存在并且等于`XMLHttpRequest`.

请注意，并非所有 AJAX 请求都有此标头，例如`Struts2 Dojo`请求不发送它；如果您使用`Struts2-jQuery`（或使用任何其他新的 AJAX 框架）生成 AJAX 调用，它就在那里。

您可以使用`Firebug's Net module`...检查它是否存在，例如，当您对 Stack Overflow 进行投票时；）

要从 a 中检查它`Struts2 Action`，您需要实现`ServletRequestAware`接口，然后获取`Request`并检查该特定标头是否存在，如下所示：

```
public class MyAction extends ActionSupport implements ServletRequestAware {
   private HttpServletRequest request;

   public void setRequest(HttpServletRequest request) {
      this.request = request;
   }

   public HttpServletRequest getRequest() {
      return this.request;
   }

   public String execute() throws Exception{
      boolean ajax = "XMLHttpRequest".equals(
                      getRequest().getHeader("X-Requested-With"));
      if (ajax)
         log.debug("This is an AJAX request");
      else 
         log.debug("This is an ordinary request");

      return SUCCESS;
   }  
} 
```

请注意，您也可以通过 ActionContext 获取请求，无需实现 ServletRequestAware 接口，但这不是推荐的方式：

```
HttpServletRequest request = ServletActionContext.getRequest(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:43:54.010

我使用的另一种选择是将参数 ajax=true 添加到所有 Ajax url 字符串并使用 isAjax() 方法在我的操作中进行测试。

# php - 检查 MySQL 数据库是否有重复条目

> ID：14621542
> 
> 赞同：1
> 
> 时间：2013-01-31T08:40:17.333
> 
> 标签：php, mysql, whmcs

关于这个问题已经有很多问题了，但是我还没有找到任何可以解决我的特定问题的问题。我正在对 MySQL 数据库进行检查，如果超过 1 行具有相同的 BILLING_ID，我想将其打印出来，因为这些应该是唯一的，极少数例外。

但是，当它们具有不同值的 GAME_ID 时，我需要排除重复项，因为我们确实设置了具有相同计费 ID 的子服务。

我下面的代码大部分都可以工作，直到逻辑失败。如果有 2+ 个条目具有相同的计费 ID，我需要检查它们是否具有相同的 GAME_ID。我用这个难倒自己，不知道如何进行。

```
$res_services = mysql_query('SELECT SERVICE_ID, BILLING_ID, USER_ID, GAME_ID FROM tc_services', $tca_conn);

while ($row_services = mysql_fetch_array($res_services))
{
    $service_id = $row_services["SERVICE_ID"];
    $billing_id = $row_services["BILLING_ID"];
    $user_id = $row_services["USER_ID"];
    $game_id = $row_services["GAME_ID"];

    // If the Billing ID field is blank, ignore
    if ($billing_id == "")
    {
        continue;
    }

    $res_dupes = mysql_query("SELECT * FROM tc_services WHERE BILLING_ID='" . $billing_id . "'", $tca_conn);
    $num_rows = mysql_num_rows($res_dupes);

    if ($num_rows >= 2)
    {
        while ($row_dupes = mysql_fetch_array($res_dupes))
        {
             //check if GAME_ID is different
        }

        echo 'Duplicate Services found for User ID: ' . $user_id . 'Billing ID: ' . $billing_id . '</br>';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:45:31.423

无需循环并进行多次调用，只需使用单个数据库调用

子查询 X 标识 BILLING_ID、GAME_ID 的重复项。
然后我们加入回来获取 USER_ID

注意：你必须使用这个标准 SQL 而不是空洞的 MySQL GROUP BY 扩展

```
SELECT
    t.BILLING_ID, t.USER_ID
FROM
    (
    SELECT
        BILLING_ID, GAME_ID, COUNT(*)
    FROM
        tc_services
    GROUP BY
        BILLING_ID, GAME_ID
    HAVING
        COUNT(*) > 1
    ) X
    JOIN
    tc_services t ON X.BILLING_ID = t.BILLING_ID AND X.GAME_ID = t.GAME_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:44:22.373

而不是这个

```
$res_dupes = mysql_query("SELECT * FROM tc_services WHERE BILLING_ID='" . $billing_id . "'", $tca_conn); 
```

用这个 ：

```
$res_dupes = mysql_query("SELECT * FROM tc_services WHERE BILLING_ID='" . $billing_id . "' AND GAME_ID='" . $game_id . "'", $tca_conn); 
```

您可以在同一选择查询中检查游戏 ID。

# c# - 如何向 WCF 中的请求添加授权标头？

> ID：14621544
> 
> 赞同：10
> 
> 时间：2013-01-31T08:40:36.293
> 
> 标签：c#, winforms, wcf, header

我正在开发一个 Windows 窗体应用程序，并且需要调用一个 WCF 服务。在将请求发送到服务之前，我需要向请求添加标头（授权 - 自定义）。我也有一个自定义检查器类。我尝试了以下方法，但不知何故未调用该服务，并且它返回异常。

```
public object BeforeSendRequest(ref Message request, IClientChannel channel)
{
    MessageHeader header = MessageHeader.CreateHeader("Authorization", "", "Basic Y19udGk6Q29udGlfQjNTVA==");
    OperationContext.Current.OutgoingMessageHeaders.Add(header);
    HttpRequestMessageProperty httpRequestProperty = new HttpRequestMessageProperty();
    httpRequestProperty.Headers.Add("Authorization", "Basic Y19udGk6Q29udGlfQjNTVA==");
    httpRequestProperty.Headers.Add(HttpRequestHeader.UserAgent, "Continental");
            OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpRequestProperty;
    sentMessages.Add(request.ToString());
    return null;
} 
```

我也尝试过像这样最简单的方法：

```
MessageHeader header = MessageHeader.CreateHeader("Authorization", "", "Basic Y19udGk6Q29udGlfQjNTVA==");
request.Headers.Add(header); 
```

但它是一样的，添加了授权标头但它没有到达服务，我怎么知道服务收到了什么标头？当我在请求中手动添加这样的标头时（在运行之前），我使用了 SOAP UI 并且服务响应良好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T08:58:49.453

最简单的方法是**在客户端添加它**：

```
using (MyServ.ServiceClient proxy = new MyServ.ServiceClient())
{
     using (new System.ServiceModel.OperationContextScope(proxy.InnerChannel))
     {
         MessageHeader head = MessageHeader.CreateHeader("Authorization", "http://yournamespace.com/v1", data);
         OperationContext.Current.OutgoingMessageHeaders.Add(head);
     }
} 
```

并**在服务器端检索它**：

```
string  auth = OperationContext.Current.IncomingMessageHeaders.
GetHeader<string>("Authorization", "http://mynamespace.com/v1"); 
```

我还建议您查看以下文章：

[使用 WCF 的 Http 请求中缺少授权标头](https://stackoverflow.com/questions/4080986/authorization-header-is-missing-in-http-request-using-wcf)

[带有 wsHttpBinding 的 WCF 服务 - 操作 HTTP 请求标头](https://stackoverflow.com/questions/9111361/wcf-service-with-wshttpbinding-manipulating-http-request-headers)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:31:58.717

如果您的 BeforeSend 方法有问题，这就是我在向某些 web 服务调用添加身份验证时实现它的方式。

```
private const string Authorization = "Authorization";
public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {
        object httpRequestMessageObject;
        if (request.Properties.TryGetValue(
            HttpRequestMessageProperty.Name, out httpRequestMessageObject))
        {
            var httpRequestMessage = httpRequestMessageObject as HttpRequestMessageProperty;

            if (string.IsNullOrWhiteSpace(httpRequestMessage.Headers[Authorization]))
            {
                httpRequestMessage.Headers[Authorization] = "Basic Y19udGk6Q29udGlfQjNTVA==";
            }
        }
        else
        {
            var httpRequestMessage = new HttpRequestMessageProperty();
            httpRequestMessage.Headers.Add(Authorization, "Basic Y19udGk6Q29udGlfQjNTVA==");

            request.Properties.Add(HttpRequestMessageProperty.Name, httpRequestMessage);
        }

        return null;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-22T20:40:53.760

I know this is late but I ran across this post so decided to fill this in, in case I ever need to remember this again. This worked for me:

1.  Create the Message Inspector:

    ```
    Public Class AuthenticationHeader
      Implements IClientMessageInspector

    Private itsUser As String
    Private itsPass As String

    Public Sub New(ByVal user As String, ByVal pass As String)
        itsUser = user
        itsPass = pass
    End Sub

    Public Sub AfterReceiveReply(ByRef reply As Message, correlationState As Object) Implements IClientMessageInspector.AfterReceiveReply
        Console.WriteLine("Received the following reply: '{0}'", reply.ToString())
    End Sub

    Public Function BeforeSendRequest(ByRef request As Message, channel As IClientChannel) As Object Implements IClientMessageInspector.BeforeSendRequest
        Dim hrmp As HttpRequestMessageProperty = request.Properties("httpRequest")
        Dim encoded As String = System.Convert.ToBase64String(System.Text.Encoding.GetEncoding("ISO-8859-1").GetBytes(itsUser + ":" + itsPass))
        hrmp.Headers.Add("Authorization", "Basic " + encoded)
        Return request
      End Function
    End Class 
    ```

2.  Write the Behavior:

    ```
    Public Class AuthenticationHeaderBehavior
    Implements IEndpointBehavior

    Private ReadOnly itsUser As String
    Private ReadOnly itsPass As String

    Public Sub New(ByVal user As String, ByVal pass As String)
        MyBase.New()
        itsUser = user
        itsPass = pass
    End Sub

    Public Sub AddBindingParameters(endpoint As ServiceEndpoint, bindingParameters As BindingParameterCollection) Implements IEndpointBehavior.AddBindingParameters
    End Sub

    Public Sub ApplyClientBehavior(endpoint As ServiceEndpoint, clientRuntime As ClientRuntime) Implements IEndpointBehavior.ApplyClientBehavior
        clientRuntime.MessageInspectors.Add(New AuthenticationHeader(itsUser, itsPass))
    End Sub

    Public Sub ApplyDispatchBehavior(endpoint As ServiceEndpoint, endpointDispatcher As EndpointDispatcher) Implements IEndpointBehavior.ApplyDispatchBehavior
    End Sub

    Public Sub Validate(endpoint As ServiceEndpoint) Implements IEndpointBehavior.Validate
    End Sub
    End Class 
    ```

3.  Add it to your endpoint:

    ```
     Dim binding As New WebHttpBinding(WebHttpSecurityMode.Transport)
      binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None

      ChlFactory = New WebChannelFactory(Of IMyServiceContract)(binding, New Uri(url))
      ChlFactory.Endpoint.Behaviors.Add(New WebHttpBehavior())
      ChlFactory.Endpoint.Behaviors.Add(New AuthenticationHeaderBehavior(user, pass))
      Channel = ChlFactory.CreateChannel() 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T09:40:22.133

您的解决方案的问题是它会添加一个 HTTP 标头。但是，您需要的是一个 SOAP 标头。可以这样做...

```
using(new OperationContextScope(client.InnerChannel)) 
{
    // Add a SOAP Header to an outgoing request
    MessageHeader aMessageHeader = MessageHeader.CreateHeader("UserInfo", "http://tempuri.org", userInfo);
    OperationContext.Current.OutgoingMessageHeaders.Add(aMessageHeader);
} 
```

# variables - 用另一个字符串评估一个字符串变量不会评估。ASP 经典

> ID：14621545
> 
> 赞同：1
> 
> 时间：2013-01-31T08:40:56.200
> 
> 标签：variables, types, asp-classic, eval, evaluation

我有一系列大表单，在很多页面中，所以我做了一些功能，当有人更新页面时应该填充表单字段，情况是这样的：

```
 <label class="radio inline"><input type="radio" name="imm_AriaCondizionata" value="s" <%=richecca("imm_AriaCondizionata","s")%>>Si </label>
 <label class="radio inline"><input type="radio" name="imm_AriaCondizionata" value="n" <%=richecca("imm_AriaCondizionata","n")%>>No </label>

function richecca(NomeCampo,sino)           
    if request(NomeCampo) <> "" then        
        if request(Nomecampo) = sino then 
            richecca = " checked "
        else
            richecca = ""
        end if
    else
        if eval(NomeCampo) = sino then
            richecca = " checked "
        else
            richecca = ""
        end if
    end if

end function 
```

因此，它会检查请求中是否有一些值（包括查询字符串），如果没有，它会检查传递给函数的名称的变量。

问题是，即使我将值放入变量中，它也总是采用“else”分支。怎么可能......它是否将刺痛评估为另一种类型？我的意思是：

```
Dim imm_AriaCondizionata = "n"
richecca("imm_AriaCondizionata","n") 
```

它返回 "" 的第二个 else 所以一个：

```
if eval(NomeCampo) = sino then
    richecca = " checked "
else
    richecca = ""
end if 
```

在这里，如果我写一个 response.write(eval(NomeCampo) ) 和 response.write(sino) 我有一个值为“n”的它们的展位......我对此很生气......这怎么可能?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:04:32.657

```
if strcomp(eval(NomeCampo),sino,1) = 0 then
richecca = " checked "
else
    richecca = ""
end if 
```

我终于找到了这个strcomp！！！！使两个变量的比较二进制或文本！

[http://www.w3schools.com/vbscript/func_strcomp.asp](http://www.w3schools.com/vbscript/func_strcomp.asp) 这里有文章。:D 谢谢

# c++ - 如何将 ANSI 项目转换为 UNICODE 项目？

> ID：14621548
> 
> 赞同：3
> 
> 时间：2013-01-31T08:41:02.110
> 
> 标签：c++

我有一个由 Visual Age 开发的 ANSI C++ 项目。我想将其转换为 Unicode，以便它可以在英文操作系统中正确显示多语言字符。我在定义宏后将所有`char`变量更改为。`wchar_t``UNICODE`

这是正确的方法吗？源代码中有一些 API 只接受`char*`字符串（例如`system()`, `fopen()`, `mkdir()`）。`wchar_t`由于代码中的所有字符串都已更改为，如何使它们与字符串一起使用`wchar_t`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:58:22.187

有几种表示 unicode 字符串的方法，最常见的有：

*   编码`UTF-8`，存储在`char`字符串中
*   编码`UTF-16`，存储在由 16 位整数组成的字符串中
*   编码`UTF-32`，存储在由 32 位整数组成的字符串中。

对于 UTF-16 和 UTF-32，您必须了解系统的字节顺序，并决定是否要以大端或小端顺序通信字符串。

有一个较旧的编码名为`UCS-2`，使用这种编码只能表示 0x10000 以下的 unicode 字符。你不应该使用这个，不是所有的汉字都可以在其中表示。

要注意的另一件事是它`wchar_t`是 2 字节或 4 字节宽，因此在某些系统上它可以用来保存`UTF-16`，而在其他`UTF-32`字符上。

要注意的另一件事：大多数字符串长度函数将返回计数的字节数或字数，而不是表示的 unicode 符号数。

我个人更喜欢将内部和外部的所有内容存储为`UTF-8`，并根据需要转换为 16 位或 32 位编码。这样可以避免字节顺序问题。

很有可能，如果您确保所有内容都被编码`UTF-8`，那么大多数东西都会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:06:16.507

很难说不知道你对文本做了什么，以及它来自哪里。如果您所做的只是从文件中读取并显示它，那么只需更改`char`为 `wchar_t`就足够了。（但在这种情况下，您可能需要考虑坚持`char`使用 UTF-8。）一旦您开始做更多事情，问题就会变得更加复杂：

*   正如您所观察到的，文件名之类的东西通常必须是`char`. 使用 UTF-8 可以解决这个问题，但是什么字符串是合法的或不合法的仍然是一个悬而未决的问题，并且很大程度上取决于系统。

*   解析可能会变得更加困难，具体取决于您要执行的操作。您可能不得不放弃 ; 中的简单功能`<ctype.h>`。C++ 具有`<locale>`可以与 一起使用的函数`wchar_t`，但它们使用起来要容易得多。虽然`isspace`或搜索特定分隔符或多或少地像宣传的那样工作，但诸如此类的事情`toupper`变得非常成问题（因为上下之间并不普遍存在一对一的关系）。

*   以 UTF-16 或 UTF-32 读写文件时，字节序成为一个问题。无论内部使用何种类型和编码，我在`char`导入或导出数据时都会坚持使用 UTF-8。

总的来说，我倾向于坚持使用`char`, 和 UTF-8，除非我正在做重要的解析或文本操作。在这种情况下，我会查看 ICU 库，它为 UTF-16 提供了非常完整的支持。除非我 100% 确定我只需要支持一个平台，否则我会永远避免`wchar_t`使用没有真正标准大小或编码的 . 例如，ICU 将他们的 UTF-16 字符放在一个`unsigned short`. （对于 . 也可以这样说`char`，但 `char`不是 8 位的机器极为罕见，而且对于国际化，您可能遇到的唯一编码*是*UTF-8。）

# php - 安装 pecl - 致命错误：找不到“php.h”文件

> ID：14621553
> 
> 赞同：8
> 
> 时间：2013-01-31T08:41:32.813
> 
> 标签：php, macos, oauth, pecl

我正在尝试安装 PECL OAuth，但收到一条错误消息（我使用的是 macbook 山狮）。

```
 In file included from /private/tmp/pear/temp/oauth/oauth.c:14:
/private/tmp/pear/temp/oauth/php_oauth.h:20:10: fatal error: 'php.h' file not found
#include "php.h"
     ^
1 error generated.
make: *** [oauth.lo] Error 1
ERROR: `make' failed 
```

有人知道如何解决吗？

谢谢，尼米

# mysql - 关闭mysql工作台中执行选项卡的键盘快捷键？

> ID：14621556
> 
> 赞同：2
> 
> 时间：2013-01-31T08:41:45.137
> 
> 标签：mysql, user-interface, mysql-workbench

在 mysql 工作台中执行查询后，会弹出一个选项卡显示结果。如何使用键盘快捷键关闭它？谢谢！

在这里看截图：

[http://www.tiikoni.com/tis/view/?id=23d51ff](http://www.tiikoni.com/tis/view/?id=23d51ff)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:49:40.823

[http://dev.mysql.com/doc/workbench/en/wb-keys.html](http://dev.mysql.com/doc/workbench/en/wb-keys.html)

声明它应该是 Ctrl + W

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:25:37.960

没有关闭结果集选项卡的快捷方式。您只能使用 ⌘ + W 关闭拥有选项卡（编辑器选项卡）。但是，您仍然可以单击选项卡上的关闭按钮（当您将鼠标悬停在选项卡上时，在标题旁边）将其关闭。

顺便提一句。在 Windows 上，它不是 Ctrl + W 而是 Ctrl + F4 （这是系统标准）。网页需要更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-16T17:37:02.867

在 OS X 上创建自己的快捷方式：

1.  苹果菜单 -> 系统偏好设置 -> 键盘 -> 快捷方式 -> 应用程序快捷方式
2.  左侧的加号按钮
3.  在“应用程序”中找到 mysqlworbench
4.  在“菜单标题”中输入“视图->面板->隐藏输出区域”
5.  在“键盘快捷键”中......你知道该怎么做^^

和平！

# android - 在android中解析xml数据

> ID：14621558
> 
> 赞同：1
> 
> 时间：2013-01-31T08:41:53.883
> 
> 标签：android, xml, parsing

我想在android中解析以下数据。

```
<?xml version="1.0" encoding="UTF-8"?>

 Info: POST /Remindz_api/user/loginHTTP/1.1 
 Host: www.narola.co 
 Accept: www.narola.co.beepz.api+xml 
 HTTP 1.1 200 OK 
 Content-Type: www.narola.co.beepz.api+xml; 
 Allow : GET,POST

  <user id="43">
    <firstname>Dfdf</firstname>
    <lasttname>p2</lasttname>
    <email>p</email>
    <telephone>2236</telephone>
    <created_on>2013-01-04 04:38:05</created_on>
    <atom:link <a href="http://www.narola.co/remindz/reminders/43"></a> />
  </user> 
```

我使用了下面的代码，但由于数据纯粹是 xml，我无法解析它。

```
DocumentBuilder newDocumentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document parse = newDocumentBuilder.parse(new ByteArrayInputStream(result.getBytes()));
Log.d("result",parse.getChildNodes().toString()); 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:17:14.420

使用 xml 解析技术，例如`XmlPullParser`,`SAX parser`或`DOM parser`.

XML Pull parser 是 android 开发者网站推荐的解析器[这里](http://www.vogella.com/articles/AndroidXML/article.html)有一个 Pull parser 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:19:51.283

首先，您必须从收到的文本块中提取正确的 XML。

这归结为两个操作：

*   剥离所有与 HTTP 相关的行
*   `<atom:link\>`将根据 XML 规则无效的语法修改为如下所示：

可以通过预先使用正则表达式处理原始文本来执行此任务。在您的情况下，可以使用这些表达式。

```
public class XMLTest {

    static String data = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "\n" + " Info: POST /Remindz_api/user/loginHTTP/1.1\n"
            + " Host: www.narola.co \n" + " Accept: www.narola.co.beepz.api+xml\n" + " HTTP 1.1 200 OK \n"
            + " Content-Type: www.narola.co.beepz.api+xml;\n" + " Allow : GET,POST\n" + "\n" + "  <user id=\"43\">\n"
            + "    <firstname>Dfdf</firstname>\n" + "    <lasttname>p2</lasttname>\n" + "    <email>p</email>\n"
            + "    <telephone>2236</telephone>\n" + "    <created_on>2013-01-04 04:38:05</created_on>\n"
            + "    <atom:link <a href=\"http://www.narola.co/remindz/reminders/43\"></a> />\n" + "  </user>";

    public static void main(final String[] args) {
        /*
         * This strips off "Param:Value"-style lines 
         */
        String xmlData = data.replaceAll(" *[a-z\\-A-Z]* *:[^<]*\n", "");
        /*
         * This strips off "HTTP line" 
         */
        xmlData = xmlData.replaceAll(" *HTTP .*\n", "");

        /*
         * Correct atom:link format
         */
        xmlData = xmlData.replaceAll("<atom:link (.*) />", "<atom:link>$1</atom:link>"); 

        try {
            DocumentBuilder newDocumentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

            Document doc = newDocumentBuilder.parse(new ByteArrayInputStream(xmlData.getBytes("UTF-8")));

            Element elem = doc.getDocumentElement();
            dump("", elem);
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void dump(final String pad, final Node node)
    {
        System.out.println(pad + node.toString());

        if(node.getChildNodes() != null)
        {
            for(int i=0; i< node.getChildNodes().getLength();i++)
            {
                dump(pad + " ", node.getChildNodes().item(i));
            }
        }
    } 
```

生成的文本是完美的有效 XML，无法输入 DOM 解析器：

```
<?xml version="1.0" encoding="UTF-8"?>

  <user id="43">
    <firstname>Dfdf</firstname>
    <lasttname>p2</lasttname>
    <email>p</email>
    <telephone>2236</telephone>
    <created_on>2013-01-04 04:38:05</created_on>
    <atom:link><a href="http://www.narola.co/remindz/reminders/43"></a></atom:link>
  </user> 
```

# f# - N元组与对

> ID：14621559
> 
> 赞同：8
> 
> 时间：2013-01-31T08:41:57.227
> 
> 标签：f#, ocaml, tuples, ml

在 Ocaml 中，具有不同元组的元组具有不同的类型和值构造函数：

```
# let a = (1, 2, 3);;
val a : int * int * int = (1, 2, 3)
# let b = (1, (2, 3));;
val b : int * (int * int) = (1, (2, 3)) 
```

请注意，第二个示例 (b) 比第一个 (a) 更灵活，因为 b - (2, 3) 的“尾部” - 本身是有效值：

```
# let (_, c) = b;;
val c : int * int = (2, 3)
# let d = snd b;;
val d : int * int = (2, 3) 
```

为什么不将 "(1, 2, 3)" 解析为 "(1, (2, 3))" 而是为不同的 arities 引入无限（或者更糟糕的是，有限）数量的新类型和值构造函数?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T19:40:04.233

> 为什么不将 "(1, 2, 3)" 解析为 "(1, (2, 3))" 而是为不同的 arities 引入无限（或者更糟糕的是，有限）数量的新类型和值构造函数?

ML 类型系统旨在追求更强大的静态类型检查，以便在编译时捕获尽可能多的错误。

`(1, 2, 3)`您的建议会大大削弱类型系统，因为它将不再能够区分`(1, (2, 3))`哪个是相反方向的移动。

在实践中，我可以告诉你，ML 做出这样的区分过去在我的生产代码中发现了真正的错误。在这种情况下，我重视 ML 设计。

# compiler-construction - 如何在 Sublime Text 2 中编译和运行 C 程序？

> ID：14621562
> 
> 赞同：21
> 
> 时间：2013-01-31T08:42:02.500
> 
> 标签：compiler-construction, build, compilation, sublimetext2

我对编程完全陌生。我不知道如何在 Sublime Text 2 中编译和运行一个简单的 C 程序。

（在大学时，我被要求使用 Turbo C++ 3.0，但我发现 IDE 相当古老。）

我正在使用 Windows 8 (x64)。这是我单击构建时遇到的错误。

![在此处输入图像描述](../Images/909957ded22f3a2c0ab2614ef7b4767c.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-08-07T09:45:05.020

我建议你阅读Sublime Text 2 的[构建文档](http://docs.sublimetext.info/en/latest/reference/build_systems.html)。

这是答案。在 Sublime 中，单击工具 -> 构建系统 -> 新建构建系统...

对于 Windows 用户，键入以下代码并保存：

```
{
    "cmd" : ["gcc", "$file_name", "-o", "${file_base_name}.exe", "&&", "${file_base_name}.exe"],
    "selector" : "source.c",
    "shell" : true,
    "working_dir" : "$file_path"
} 
```

对于 Mac 用户，键入以下代码：

```
{
    "cmd" : ["gcc",  "-o", "$file_base_name", "$file_name"],
    "cmd" : ["./$file_base_name"],
    "selector" : "source.c",
    "shell" : false,
    "working_dir" : "$file_path"
} 
```

对于 Linux 用户，复制以下代码

```
{
    "cmd" : ["gcc $file_name -o ${file_base_name} && ./${file_base_name}"],
    "selector" : "source.c",
    "shell": true,
    "working_dir" : "$file_path"
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T14:10:12.857

我意识到你提到你是编程新手，但[这个页面](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)可能仍然可以帮助你弄清楚发生了什么。基本上，看起来好像您没有指定要在构建命令中正确编译的 C 文件的名称。在该网页给出的示例中，要编译的文件由`$file`参数指定。

* * *

编辑：再次查看输出，尝试将您的文件保存为 *.c 文件`File->Save As`- 并将其命名为*Hello.c*。在这种情况下，.c 扩展名很重要。

* * *

编辑 2：在第 4 行的末尾你不需要两个`;`。这不太可能是你的问题（应该可以编译），但它不是必需的，你不应该养成这个习惯。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T06:28:15.630

您需要安装 C++ 编译器，

我用mingw。一旦安装了 c:/mingw 并且您已将其添加到计算机环境路径中，它应该开始编译。

我使用这个版本的 mingw，因为它包含 Boost。 [http://nuwen.net/mingw.html](http://nuwen.net/mingw.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-03T08:14:11.503

你没有保存文件。编译器找不到该文件。

保存文件并重试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-30T23:18:32.577

这对我有用：

```
{
    "shell": false,
    "cmd": [
        "sh", "-c", "clang $file_path/$file_name && $file_path/a.out && rm $file_path/a.out"
    ],
    "encoding": "cp1252"
} 
```

它解决了编译和运行问题（st2 不允许运行多个 cmd 进行构建）

# php - 垂直使用php从mysql以表格格式打印数据

> ID：14621563
> 
> 赞同：-1
> 
> 时间：2013-01-31T08:42:08.317
> 
> 标签：php, mysql

好的，这似乎很难解释，但我现在已经到了极限。去过那里，做到了，但我无法让它发挥作用。所以就在这里；

我有一个名为的表`passengers`，其中包含以下数据：

![在此处输入图像描述](../Images/4c938a49931d524e5d31ef3ee3a08331.png)

我正在尝试以这种表格格式选择以下数据：

![在此处输入图像描述](../Images/13f9352ef08796d94eee745d68f92ada.png)

使用此代码：

```
<?php
require("aacfs.php");
$ac=mysql_query("select distinct fquo_id as 'fquo_id' from passengers where reservno = '0000188'") or die(mysql_error());
echo "<table><tr>";
while($bd=mysql_fetch_array($ac))
{
    $eg=$bd['fquo_id'];
    $w=mysql_query("select * from passengers where fquo_id = '$eg'") or die(mysql_error());
    $no=1;
    while($x=mysql_fetch_array($w))
    {
        $y=$x['pass_name'];

        echo "<tr><td colspan=2>$no. <input type=text name='pass1_".$no."' value='$y'></td><td>$no. <input type=text name='pass2_".$no."' value='$y'></td></tr>";
        $no++;
    }
}

echo"</tr></table>";

?> 
```

但它看起来像这样：

![在此处输入图像描述](../Images/6d8e9276cbb66c720493458456187736.png)

我知道我做错了什么，但相信我，我已经修改了一段时间，但仍然无法按照我想要的方式进行。这是我能得到的最接近我想要的输出。如何正确垂直打印表格？我知道类似的代码，`SELECT * FROM tbl \G`但它在 PHP 中不起作用。请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:57:19.503

假设我正确理解了您想要的内容，则以下内容应该可以

```
<?php
...
    $no=1;
    while($x1 = mysql_fetch_assoc($w))
    {
        $y1 = $x1['pass_name'];
        $y2 = "";
        if($x2 = mysql_fetch_assoc($w))
           $y2 = $x2['pass_name'];            

        echo "<tr><td colspan=2>$no. <input type=text name='pass1_" . $no . "' value='" . $y1 . "'></td><td>$no. <input type=text name='pass2_" . $no . "' value='" . $y2 . "'></td></tr>";
        $no++;
    }
...

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:21:54.273

看看这个[DEMO](http://phpfiddle.org/main/code/06s-ed9)能不能帮到你，如果能，你的代码应该改成：

```
<?php
require("aacfs.php");
$ac=mysql_query("select distinct fquo_id as 'fquo_id' from passengers where reservno = '0000188'") or die(mysql_error());
echo "<table>";
while($bd=mysql_fetch_array($ac))
{
    $eg=$bd['fquo_id'];
    $w=mysql_query("select * from passengers where fquo_id = '$eg'") or die(mysql_error());

    $n = 2;
    $i = 0;
    while($x=mysql_fetch_array($w))
    {
       $i++;
       if($n % 2 == 0){
        echo  "<tr>";
       }
       $y=$x['pass_name'];

       echo "<td colspan=2>$no. <input type=text name='pass1_".$no."' value='$y'></td>";
       if($n % 2 == $n){
        echo  "</tr>";
       }
       $n++;
    }
}

echo"</table>";

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:34:15.030

```
$ac=mysql_query("select distinct fquo_id as 'fquo_id' from passengers where reservno ='0000188'") or die(mysql_error());
while($bd=mysql_fetch_array($ac))
{echo "<table>";
    $eg=$bd['fquo_id'];
    $w=mysql_query("select * from passengers where fquo_id = '$eg'") or die(mysql_error());
    $no=1;
    while($x=mysql_fetch_array($w))
    {
        $y=$x['pass_name'];

  echo "<tr><td>$no. <input type=text name='pass1_".$no."' value='$y'></td></tr>";
        $no++;
    }
</table>
} 
```

试试这个.. :P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:56:11.640

```
<?php
require("aacfs.php");
$ac         =   mysql_query("SELECT * FROM passengers WHERE reservno = '0000188' ORDER BY fquo_id, pass_id") or die(mysql_error());
$temp_array = array();
while($row  = mysql_fetch_assoc($ac)){
    $temp_array[$row['fquo_id']][] = $row;
}

$td_count   = count($temp_array);
$tr_count   = 1;
$fquo_id    = array();

foreach($temp_array as $key=>$val){
  if($tr_count < count($val)){$tr_count = count($val);}
  $fquo_id[]= $key;
}
$tr_count   = 8; // if you want to display 8 rows;
echo "<table>";
for($i=0; $i<$tr_count; $i++){
    echo "<tr>";
    $no  = $i+1;
    for($j=0; $j<$td_count; $j++){
        echo "<td>";
        if(array_key_exists($i,$temp_array[$fquo_id[$j]])){
            echo $no.". <input type=text name='pass1_".$no."' value='".$temp_array[$fquo_id[$j]][$i]['pass_name']."'>";
        }
        else{
            echo $no.". <input type=text name='pass1_".$no."' value=''>";
        }
        echo "</td>";
    }
    echo "</tr>";
}
echo "</table>";

?> 
```

![在此处输入图像描述](../Images/c7b13e4aad6913ea5a819d8be5d744c4.png)

# c# - 为什么接口类型列表不能接受继承接口的实例？

> ID：14621564
> 
> 赞同：9
> 
> 时间：2013-01-31T08:42:10.890
> 
> 标签：c#, list, types, interface

给定以下类型：

```
public interface IPrimary{ void doBattle(); }

// an ISecondary "is" an IPrimary
public interface ISecondary : IPrimary {  }

// An implementation of ISecondary is also an IPrimary:
internal class SecondaryImpl : ISecondary
{
    // Required, since this is an IPrimary
    public void doBattle(){ }
} 
```

为什么我不能这样做？

```
List<IPrimary> list = new List<ISecondary>(); 
```

这会导致以下编译错误：

> 参数类型“System.Collections.Generic.List”不可分配给参数类型“System.Collections.Generic.List”

我理解错误，并且我意识到有解决方法。我只是看不出为什么不允许这种直接转换的任何明确原因。`ISecondary`毕竟，列表中包含的值应该是（通过扩展）类型的值。`IPrimary`那么为什么会`List<IPrimary>`被`List<ISecondary>`解释为不相关的类型呢？

**任何人都可以清楚地解释以这种方式设计 C# 的原因吗？**

*一个稍微扩展的示例：*我在尝试执行类似于以下操作时遇到了这个问题：

```
internal class Program
{
    private static void Main(string[] args)
    {
        // Instance of ISecondary, and by extention, IPrimary:
        var mySecondaryInstance = new SecondaryImpl();

        // This works as expected:
        AcceptImpl(mySecondaryInstance);

        // List of instances of ISecondary, which are also, 
        // by extention, instances of IPrimary:
        var myListOfSecondaries = new List<ISecondary> {mySecondaryInstance};

        // This, however, does not work (results in a compilation error):
        AcceptList(myListOfSecondaries);
    }

    // Note: IPrimary parameter:
    public static void AcceptImpl(IPrimary instance){  }

    // Note: List of type IPrimary:
    public static void AcceptList(List<IPrimary> list){  }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T08:53:43.513

```
public class Animal
{
    ...
}

public class Cat: Animal
{
    public void Meow(){...}
}

List<Cat> cats = new List<Cat>();

cats.Add(new Cat());

cats[0].Meow();  // Fine.

List<Animal> animals = cats; // Pretend this compiles.

animals.Add(new Animal()); // Also adds an Animal to the cats list, since animals references cats.

cats[1].Meow(); // cats[1] is an Animal, so this explodes! 
```

这就是为什么。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T08:50:57.063

> 为什么我不能这样做？`List<IPrimary> list = new List<ISecondary>();`

想象一下，你有一个这样定义的方法：

```
public void PopulateList(List<IPrimary> listToPopulate)
{
    listToPopulate.Add(new Primary());  // Primary does not implement ISecondary!
} 
```

如果你将它`List<ISecondary>`作为参数传递会发生什么？

*`List<ISecondary>`无法分配`List<IPrimary>`*的错误是编译器使您摆脱此类麻烦的方式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T08:50:24.183

```
class Evil : IPrimary {...}
list.Add(new Evil()); // valid c#, but wouldn't work 
```

它可以保护您免受错误的影响。列表实例（对象）需要辅助实例。并非每个主要都是次要的。然而期望是一个 list-of-primary 可以*包含任何 primary*。如果我们可以将二级列表视为主要列表：坏事。

实际上，数组*确实*允许这样做 - 如果您弄错了，则会在运行时出错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T08:51:50.843

列表类型在它们的泛型参数中不是协变的（即`List<ISecondary>`不是的子类型）的`List<IPrimary>`原因是它们是可读写的。在您的扩展示例中，您的方法`AcceptList`可以执行`list.Add(x)`where `x`is an`IPrimary`但不是`ISecondary`.

请注意，这`IEnumerable<T>`是正确的协变，而数组是协变类型的（您可以执行上面尝试的操作），但出于同样的原因，这不是正确的 - 将元素添加到集合中将在运行时失败。

# android - 如何在 googlemaps 上叠加图像

> ID：14621565
> 
> 赞同：1
> 
> 时间：2013-01-31T08:42:14.980
> 
> 标签：android, google-maps, android-sdcard

我是 SD 卡上的一些图像。我还保存了他们的经度和纬度..现在我想在谷歌地图上覆盖所有这些图像作为缩略图..当我点击任何缩略图时，它会移动到下一个活动，以显示全图。我可以只覆盖一张图片……它的代码是这样的……

```
public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.googlemap);
        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
    //  imm=(ImageView)findViewById(R.id.Google_Img_View);
        mapView.setSatellite(true);
        b=(Button)findViewById(R.id.googleImageDone);
        b.setOnClickListener(this);
        Intent i = getIntent();
        //Parcelable myParcelableObject = (Parcelable) i.getParcelableExtra("name_of_extra");
        bit = (Bitmap) getIntent().getParcelableExtra("Map");
        //imm.setImageBitmap(bit);
        String id = i.getStringExtra("lon");
        String name = i.getStringExtra("long");
//      mapView.setTraffic(true);

        mc = mapView.getController();
        String coordinates[] = {id,name};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);
        pp = new GeoPoint((int) (lat * 1E6),    (int) (lng * 1E6));
        mc.animateTo(pp);
        mc.setZoom(19);

        MapOverlay mapOverlay = new MapOverlay();
    List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);
    }

    private class MapOverlay extends Overlay
    {

        @Override
        public boolean draw(Canvas canvas, MapView mapView,
                boolean shadow, long when)
        {
            super.draw(canvas, mapView, shadow);
            Point screenPts = new Point();
            //---translate the GeoPoint to screen pixels---
            mapView.getProjection().toPixels(pp, screenPts);
            //---convert the gif image into bmp         
    //      Bitmap bmp = BitmapFactory.decodeResource(
    //              getResources(), R.drawable.e);
            //---add the marker---
            canvas.drawBitmap(bit, screenPts.x, screenPts.y-50, null);
            return true;
        }

        @Override
        public boolean onTouchEvent(MotionEvent event, MapView mapView)
        {
            if (event.getAction() == 1) 
            {
                GeoPoint p = mapView.getProjection().fromPixels(
                        (int) event.getX(), (int) event.getY());
                st1=p.getLatitudeE6() / 1E6+"";
                st2=p.getLongitudeE6() /1E6+"";

                Toast.makeText(getBaseContext(), "Location: "+
                        p.getLatitudeE6() / 1E6 + "," + p.getLongitudeE6() /1E6 ,
                        Toast.LENGTH_SHORT).show();
            }
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:55:17.747

创建一个类 -

```
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;
} 
```

为纬度和经度转换再创建一个类-

```
public class LatLonPoint extends GeoPoint {
public LatLonPoint(double latitude, double longitude) {
    super((int) (latitude * 1E6), (int) (longitude * 1E6));
}
} 
```

然后在你的主要活动中 -

```
mMapView = (MapView) findViewById(R.id.mv);
    mMapView.setBuiltInZoomControls(true);
    List<Overlay> mapOverlays = mMapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(
            R.drawable.ic_launcher);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(
            drawable, this);
    GeoPoint point = new LatLonPoint(12.917745600000000000,
            77.623788300000000000);
    OverlayItem overlayitem = new OverlayItem(point, "Bangalore!",
            "I'm in Silkboard!");

    GeoPoint point2 = new LatLonPoint(12.8511803, 77.6635172);
    OverlayItem overlayitem2 = new OverlayItem(point2, "Bangalore!",
            "India, Somewhere!");
    itemizedoverlay.addOverlay(overlayitem);
    itemizedoverlay.addOverlay(overlayitem2);
    mapOverlays.add(itemizedoverlay); 
```

从 SD 卡读取图像 -

```
Resources res = getResources();
Bitmap bitmapICON = BitmapFactory.decodeFile("PATH OF THE IMAGE");
BitmapDrawable bdICON = new BitmapDrawable(res, bitmapICON); 
```

# javascript - 从网页获取数据并使用ajax将其发布到服务器是否安全？

> ID：14621570
> 
> 赞同：1
> 
> 时间：2013-01-31T08:42:29.190
> 
> 标签：javascript, ajax

我正在使用 ajax 将一些数据发布到服务器，但首先，我必须从网页获取数据，例如从元素

```
<span id="userMoney" value="1000">Money</span> 
```

然后我得到货币的价值是 1000。接下来我将 1000 发送到服务器。但这是问题所在，用户可以轻松修改值并将 1000 更改为 100000，服务器将获得 100000 而不是实际值 1000。我认为我误用了 ajax 方法。谁能给我一些指导？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:46:53.880

用户可以修改任何内容。因此，您不应信任用户的输入并进行服务器端验证。此外，您可以使用客户端验证，这可能会减少对服务器的无效请求数量并将其卸载，并改善用户体验。

对于`span[value]`- 我建议改用`data-*`属性，例如`<span id="userMoney" data-value="1000">Money</span>`因为该`span`元素不打算与`value`标准的属性一起使用。

# powershell - 在 csv 文件中查找主机名并查找 ipaddress

> ID：14621574
> 
> 赞同：0
> 
> 时间：2013-01-31T08:42:42.607
> 
> 标签：powershell

我有一个与此类似的 csv 文件，大约有 100 行，该文件每晚通过一个 powershell 脚本生成，该脚本从 Xenapp 5 和 Xenapp 6 场中提取此信息。

```
"Servers","DisplayName","Description","Users"
"NAMINGSTANDARD002", "NAMINGSTANDARD1001", "description", "User name","","Domain\xxxAdmin ; Domain2\USRgrp2; Domain3\user" 
```

我想要做的是创建一个查找“NAMINGSTANDARD* *** ”的powershell脚本，获取IP并将其添加到csv格式的行中

```
"10.0.0.1", "NAMINGSTANDARD002", "10.0.0.2", "NAMINGSTANDARD1001", "description", "User name","","Domain\xxxAdmin ; Domain2\USRgrp2; Domain3\user" 
```

这部分完成后，如果列表按主机名排序就好了。

如果有足够的时间，我可能可以通过一些谷歌搜索和使用 SED 的 Linux 来做到这一点，但我希望能够使用单个 powershell 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:03:28.680

用于`Import-CSV`读取 CSV 条目列表

```
[System.Net.Dns]::GetHostEntry("<hostname>").AddressList[0].IPAddressToString 
```

将从主机名中获取 IP 地址。

如果您想扩展记录以添加数据，您可以为从 CSV 记录创建的每个对象创建一个新的 PSObject，并在`Add-Member`将新对象写入管道之前添加一个新的注释属性，然后使用`Export-CSV`写入新的记录到 CSV 文件

# java - 如何使用自定义 TrustManager 通过 SSL 连接到 POP3 服务器？

> ID：14621576
> 
> 赞同：3
> 
> 时间：2013-01-31T08:42:48.317
> 
> 标签：java, ssl, ssl-certificate, pop3, jakarta-mail

我正在为电子邮件发件人类编写测试，我需要能够通过从目标 POP3 服务器下载邮件来检查邮件是否到达。该服务器是 Exchange 服务器，只能通过 SSL 进行连接。该测试将定期在 CI 服务器上运行，因此无法进行正确的认证过程。据我所知，可以创建一个可以接受任何证书的自定义 TrustManager 类。如何告诉我的 POP3 连接使用我的自定义 TrustManager？在我的代码的当前形式中，我看不到任何方法：

```
 String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";

    Properties pop3Props = new Properties();

    pop3Props.setProperty("mail.pop3.socketFactory.class", SSL_FACTORY);
    pop3Props.setProperty("mail.pop3.socketFactory.fallback", "false");
    pop3Props.setProperty("mail.pop3.port", "995");
    pop3Props.setProperty("mail.pop3.socketFactory.port", "995");

    URLName url = new URLName(provider, host, 995, "",
            username, password);

    Session session = Session.getInstance(pop3Props, null);
    Store store = new POP3SSLStore(session, url);
    store.connect(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:14:38.957

你真的需要信托经理吗？

您还可以将您的证书导入 jdk cacerts 文件，然后默认的 TrustManager 将接受您与您的站点的 ssl 连接。

这里有关于如何导入服务器证书的链接：

[http://javarevisited.blogspot.com/2012/03/add-list-certficates-java-keystore.html](http://javarevisited.blogspot.com/2012/03/add-list-certficates-java-keystore.html)

# angularjs - Angular - 构建模块的最佳实践

> ID：14621581
> 
> 赞同：11
> 
> 时间：2013-01-31T08:42:59.547
> 
> 标签：angularjs

我是角度新手，所以请多多包涵。前几天我正在阅读一篇文章/文档，其中强调了在您的应用程序中构建模块的最佳方式，并且只能粗略地记住它。

```
App.controllers
App.services
....

angular.module('App', [App.controllers, App.services ...); 
```

此代码示例很可能不正确，但重点是将控制器、服务等组合在一个命名空间中。

任何人都可以扩展这种方法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-12-09T09:52:02.313

**企业项目组织**

我组织我的角度项目的方式是：

```
/app
  /img         # application-level images
  /css         # application-level css styles
  /js          # application-level javascripts
  /modules             # application modules
          /gallery               # independent module with its own infrastructure
                 /controllers    # gallery module's controllers
                 /css            # gallery module's css styles
                 /directives     # gallery module's directives
                 /img            # gallery module's images
                 /filters        # gallery module's filters
                 /services       # gallery module's services
                 /views          # gallery module's views (htmls)
                 / ...           # other gallery module component folders
                 galleryMod.js   # the module itself

          /user                  # independent module with its own infrastructure
                 /controllers    # user module's controllers
                 / ...           # other user module component folders
                 userMod.js      # the module itself

          / ...                  # other modules

  / ...                # other application-level folders
  index.html 
```

**替代企业项目组织（简化）**

```
/app
  /img         # application-level images
  /css         # application-level css styles
  /js          # application-level javascripts
  /modules             # application modules
          /gallery               # independent module with its own infrastructure
                 /js             # gallery module's javascripts (includes 
                                 # services.js, directives.js, filters.js, ...)
                 /css            # gallery module's css styles
                 /img            # gallery module's images
                 /views          # gallery module's views (htmls, "partials")
                 / ...           # other gallery module component folders
                 galleryMod.js   # the module itself

          /user                  # independent module with its own infrastructure
                 /controllers    # user module's controllers
                 / ...           # other user module component folders
                 userMod.js      # the module itself

          / ...                  # other modules

  / ...                # other application-level folders
  index.html 
```

**中间项目组织（无模块）**

```
/app
  /img            # application's images
  /css            # application's css styles
  /controllers    # application's controllers
  /directives     # application's directives
  /filters        # application's filters
  /services       # application's services
  /views          # application's views (htmls)
  / ...           # other component folders
  index.html 
```

**简单的项目组织（就像种子一样）**

```
/app
  /img            # application's images
  /css            # application's css styles
  /js             # application's javascripts (includes 
                  # services.js, directives.js, filters.js, ...)
  /views          # application's views (htmls), e.g. partials
  / ...           # other component folders
  index.html 
```

使用您的项目需要组织的方式，不要选择会使您的项目不必要地复杂化的方式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-31T09:06:30.390

这种方法由[Angular Seed](https://github.com/angular/angular-seed/blob/master/app/js/app.js)提供，它只是组织应用程序结构的方法之一。它对调试很有用：如果您在某些服务中发现错误，您可以去`services.js`捕获它。

Brain Ford 在他的文章[Building Huuuuuge Apps with AngularJS 中](http://briantford.com/blog/huuuuuge-angular-apps.html)写道：

> 剩下的唯一问题是如何将控制器、指令、服务和过滤器细分为模块。[Angular Seed](https://github.com/angular/angular-seed/blob/master/app/js/app.js)将过滤器、服务和指令放入单独的模块中，但这对我来说似乎有点傻。根据应用程序，我更倾向于按页面/路线组织模块。从性能的角度来看，你如何组织你的模块并不重要，所以选择最适合你项目的方法。

他还提出了不同的应用程序结构，其中每个指令或服务都是一个单独的文件（参见上面的文章）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-23T21:14:37.403

来自[John Pappa 的 AngularJS 样式指南](https://github.com/johnpapa/angularjs-styleguide)。这正在成为大型应用程序的“Angular 标准结构”。

**按功能的文件夹结构：**创建以其所代表的功能命名的文件夹。当一个文件夹增长到包含超过 7 个文件时，开始考虑为它们创建一个文件夹。您的阈值可能不同，因此请根据需要进行调整。

为什么？：开发者可以定位代码，一目了然地识别每个文件代表什么，结构尽可能扁平，没有重复或冗余的名称。

为什么？： LIFT 指南均已涵盖。

为什么？：通过组织内容并使它们与 LIFT 指南保持一致，有助于减少应用程序变得混乱。

为什么？：当有很多文件（10+）时，使用一致的文件夹结构更容易定位它们，而在扁平结构中更难定位。

```
/**
 * recommended
 */

app/
    app.module.js
    app.config.js
    app.routes.js
    components/       
        calendar.directive.js  
        calendar.directive.html  
        user-profile.directive.js  
        user-profile.directive.html  
    layout/
        shell.html      
        shell.controller.js
        topnav.html      
        topnav.controller.js       
    people/
        attendees.html
        attendees.controller.js  
        speakers.html
        speakers.controller.js
        speaker-detail.html
        speaker-detail.controller.js
    services/       
        data.service.js  
        localstorage.service.js
        logger.service.js   
        spinner.service.js
    sessions/
        sessions.html      
        sessions.controller.js
        session-detail.html
        session-detail.controller.js 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-04T23:48:12.887

这种文件夹结构允许我扩展 Angular 并通过了解和分组它们的整体功能来快速找到每个文件。

```
 /app
    /features    
           /product   #one folder per entity
               /get-products component
               /create-product component
               /update-product component
               /delete-product component
               /state #ngrx state
                  /actions
                  /effects
                  /reducers
                  /selector
                  index
    /models 
           auth
           user
           product
           # additional.model.ts 

    /services
           backend service
           api service
           auth service
           firebase service
           auth-guard service
           # additional.service.ts
    /store
          /actions
          /effects
          /reducers
          app-store
          index
    /utilities
          router.animation
          customAngularMaterial module
          uuid
          validator
          pipe
          directive
          # additional utilities
    /views
          /admin component
          /auth  component
          /header component
          /footer component
          /navbar  component
          /profiles  component
          /home  component
          /contactus  component
          #additional views
    app-routing.module
    app.component
    app.module
  /assets
      /css      #custom styles.css
      /icons    #svg files
      /favicon.ico
      /images
      #additional assets
main
index     #material icons
styles    #angular material prebuilt theme 
```

# c# - 我怎样才能避免对 Eval 的这种“不便”？

> ID：14621582
> 
> 赞同：0
> 
> 时间：2013-01-31T08:43:06.930
> 
> 标签：c#, .net, repeater

如果我在中继器上，我有这样的代码：

```
<asp:Repeater runat="server" ID="RepeaterComunicati">
    <ItemTemplate>
        <asp:LinkButton ID="CancellaComunicazione-<%#Eval("COID").ToString()%>" runat="server" onclick="cmdCancellaComunicazione_Click">
             Hello
        </asp:LinkButton>
    </ItemTemplate>
</asp:Repeater> 
```

“不便”是我需要记住我的项目字段的“名称”。

如果我在 For Each，Visual Studio 帮我取名字。类似的东西`item.COID`是立竿见影的。

在 Eval 上有不同的方式吗？或者我需要每次都查看我的对象并复制/粘贴字段的名称，将它们放在 Eval 语句中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:48:13.390

正如您可能已经注意到的那样，那里是字符串。这意味着框架将使用反射而不是类型安全的东西来访问该属性。

不幸的是，这意味着您无法在字符串中自动完成，并且您会感到“不便”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:48:41.053

复制一段代码并在您的 aspx 页面中将其注释掉。这样您就可以简单地复制并粘贴到您需要的地方。

# git - 如何删除我的 git-svn checkout 中的文件，这些文件在 dcommit 之后仍然存在？

> ID：14621585
> 
> 赞同：2
> 
> 时间：2013-01-31T08:43:12.447
> 
> 标签：git, git-svn

我已经`svn`使用该`git svn clone`命令克隆了一个存储库。在我的本地工作副本上，我做了一些更改并删除了几个文件。在我在本地签入更改后`git commit`，是时候将更改推送到存储库了，我这样做了

```
git svn dcommit
git svn rebase 
```

所有新文件和目录都已推送到存储库，但删除的文件仍在主机系统的存储库中！换句话说：即使之后`git svn rebase`（据我所知，这是从存储库中获取所有更改的命令），我的本地副本和存储库也有很大不同！

为了让自己更清楚：我在远程/主机计算机上有存储库，这是人们可以访问的许多不同存储库的中心位置。我将其中一个存储库签出到我的本地计算机，进行了一些更改（即删除了文件），然后想将我的更改推送/发送/保存到中央存储库。创建了新文件，但我删除的文件仍然存在于中央主机的中央存储库中。

我需要做什么才能使我的本地结帐和主机系统上的存储库相等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:33:06.067

问题可能出在`svn`存储库上，无法`remove`正确处理语句。

我认为所述过程没有任何问题，但这里是“手动”删除不需要的目录的过程（假设只留下目录，其中所有文件都被正确删除。）

1.  查看 svn 存储库

    ```
    svn co <e.g. link to trunk path> 
    ```

2.  在本地结帐中手动删除所有目录（不会立即在本地文件结构中删除它们）

    ```
    svn rm <directory> 
    ```

3.  将更改提交到存储库，之后更改在存储库和本地文件结构中变得可见

    ```
    svn commit -m "<Sense-full message>" 
    ```

# wordpress - WordPress 网站上具有不同主题的子域？

> ID：14621587
> 
> 赞同：0
> 
> 时间：2013-01-31T08:43:16.897
> 
> 标签：wordpress, wordpress-theming

我需要向管理层展示三个 WordPress 主题，以便最终选择要在生产中实施的主题。我需要将它们表示为`dev1.domain.tld`、`dev2.domain.tld`和`dev3.domain.tld`。

子域都是相同的 WordPress 安装，但是我只是希望子域控制为访问者加载的主题。

这可以做到吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:14:13.943

您是否尝试过在每个子域文件夹中简单地创建三个单独的安装，然后连接到同一个数据库？

不是 100% 如果这样可行，但我不明白为什么不这样做。

# python - 视图 canvas.views.pdfDirectory 没有返回 HttpResponse 对象

> ID：14621589
> 
> 赞同：0
> 
> 时间：2013-01-31T08:43:17.847
> 
> 标签：python

异常类型：ValueError 异常值：

视图 canvas.views.pdfDirectory 没有返回 HttpResponse 对象。

异常位置：/usr/local/lib/python2.6/dist-packages/Django-1.4.3-py2.6.egg/django/core/handlers/base.py in get_response，第 129 行

```
import os
from reportlab.pdfgen import canvas
from reportlab.lib.pagesizes import letter
from reportlab.lib.units import cm, mm, inch, pica

def pdfDirectory(imageDirectory, outputPDFName = 'ima.pdf'):
    dirim = str(imageDirectory)
    output = str(outputPDFName)
    width, height = letter
    height, width = letter
    c = canvas.Canvas(output, pagesize=letter)
    # try:
    for root, dirs, files in os.walk(dirim):
        for name in files:
            lname = name.lower()
            if lname.endswith(".JPG") or lname.endswith(".gif") or      lname.endswith(".png"):
                filepath = os.path.join('/home/deepak/Downloads', 'image')
                c.drawImage('/home/deepak/Downloads/imag.pdf', inch, inch * 1)
                c.showPage()
                c.save()
                return output
    #   print "PDF of Image directory created"
    # except:
    #  print "Failed creating PDF" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:53:59.300

如果代码从未在 for 循环中输入 if 语句，则函数将返回`None`不是`HttpResponse`对象。在您的 if 语句中，您将返回一个字符串，该字符串也不是`HttpResponse`对象。只需将其包装在一个`HttpResponse`对象中：

```
for root, dirs, files in os.walk(dirim):
    for name in files:
        lname = name.lower()
        if lname.endswith(".JPG") or lname.endswith(".gif") or lname.endswith(".png"):
            filepath = os.path.join('/home/deepak/Downloads', 'image')
            c.drawImage('/home/deepak/Downloads/imag.pdf', inch, inch * 1)
            c.showPage()
            c.save()                    
            return HttpResponse(output)
return HttpResponse("Failed creating PDF") 
```

# web-applications - 如何在我的本地主机上取消部署应用程序

> ID：14621593
> 
> 赞同：0
> 
> 时间：2013-01-31T08:43:24.883
> 
> 标签：web-applications, hosting, localhost, web-hosting

某些应用程序正在我的本地主机上的 8080 端口上运行。我不知道哪个应用程序在该端口上运行。
如果我在浏览器上运行它，它会询问我不知道的用户凭据，因此我不知道哪个应用程序正在运行..我想取消部署该应用程序..怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:48:01.007

打开您的 IIS 管理器，您可以在其中看到正在运行的应用程序。

可以在端口 8080 上托管多个应用程序，只需创建一个虚拟目录，您就可以运行任意数量的应用程序。

*   本地主机：8080/Web/App1
*   本地主机：8080/Web/App2
*   本地主机：8080/Web/...

# mysql - sql中的max函数

> ID：14621596
> 
> 赞同：1
> 
> 时间：2013-01-31T08:43:49.380
> 
> 标签：mysql, max

我有一张桌子：

```
ID | time
1 | 124124244
2 | 211313112
3 | 131334334 
```

我想得到一排`max(time)`。
我试过这样：

```
select ID,max(time) from T; 
```

虽然它给出了正确的最大（时间），但给出的 ID 始终为 1。我无法得到整行。
我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:46:40.720

```
select t.ID, t.time from T
inner join (select MAX(time) maxTime FROM T) a
 ON a.maxTime = t.time; 
```

[SqlFiddle](http://sqlfiddle.com/#!2/3e48a/5)，也有 xdazz 的回答（两者都在工作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:47:41.860

```
SELECT * FROM T WHERE `time` = (SELECT MAX(`time`) FROM T) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T08:55:32.947

如果没有两行相同的行，`time`或者如果您想要其中之一并且不关心其他行，则可以使用以下命令：

```
SELECT    id, time
FROM      T
ORDER BY  time DESC
    LIMIT 1 ; 
```

如果有多个相同的行`time`，@Raphael 的答案将返回所有行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T08:49:49.363

`select id from tbl where time = (select max(time) from tbl)`

检查这个小提琴 [http://sqlfiddle.com/#!2/77acd/3](http://sqlfiddle.com/#!2/77acd/3)

# squid - 我想看看谁在用 webmin 在 ClearOs 上浏览什么

> ID：14621599
> 
> 赞同：0
> 
> 时间：2013-01-31T08:43:59.047
> 
> 标签：squid, webmin

我有很多用户通过 ClearOS 和 webmin install 连接到互联网。

有没有办法让我随时查看谁在浏览什么？

最好的方法是什么？（例如 squid 报告、webmin 网络代理或什么？）

如果它是 sarg，它将如何为这个任务配置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T15:22:15.183

Webconfig 中的 squid 报告和 Web 代理报告是按计划编制的，因此它们不太用于实时监控。您可以使用日志查看器在 UI 中查看 squid 和 dansguardian 的访问日志文件，但这不会为您提供“实时”视图。

我发现最有用的方法是使用命令提示符。使用 PuTTY (Windows)、终端+SSH (Mac/Linux) 连接到您的 ClearOS 服务器。然后运行类似的命令，例如“关注”和的日志`/var/log/dansguardian/access.log`文件`/var/log/squid/access.log`：

```
tail -f /var/log/dansguardian/access.log 
```

这将向您显示通过内容过滤器访问的站点的实时日志记录。您甚至可以通过“grep”传递结果进行过滤：

```
tail -f /var/log/dansguardian/access.log | grep 192.168.1.134 
```

这将向您显示通过 IP 地址 192.168.1.134 上用户的内容过滤器的实时浏览。

有关更多信息，请查看：[http ://www.clearcenter.com/support/documentation/clearos_guides/live_monitoring_of_web_traffic_in_proxy_and_content_filter](http://www.clearcenter.com/support/documentation/clearos_guides/live_monitoring_of_web_traffic_in_proxy_and_content_filter)

# java - 从 servlet 生成 JSON

> ID：14621600
> 
> 赞同：1
> 
> 时间：2013-01-31T08:44:01.563
> 
> 标签：java, android, servlets

在我的 android 应用程序中，我使用以下代码复制特定表中的整个数据。但是当我检查 servlet 输出时，它似乎会生成重复值。您可以通过运行以下代码来验证这一点。我不知道为什么会这样。我需要将 servlet 中的值作为 JSON 对象传递给我的应用程序。

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.json.JSONObject;

public class vlgmas extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        // TODO output your page here
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet vlgmas</title>");  
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet vlgmas at " + request.getContextPath () + "</h1>");
        out.println("</body>");
        out.println("</html>");

    } finally {            
        out.close();
    }
}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
     try {

        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet Pickvalue</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet Pick at " + request.getContextPath () + "</h1>");
        doPost(request,response);
        out.println("</body>");
        out.println("</html>");

    } finally
    {
        out.close();
    }
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //processRequest(request, response);
    String vname = null,vcode=null,divsec=null;
    JSONObject obj = new JSONObject();
    List list = new ArrayList();
    JSONObject obj2 = new JSONObject();
    PrintWriter out = response.getWriter();
    String vn[]=new String[2000],vc[]=new String[2000],ds[]=new String[2000];
    int t,r1=0,r2=0,r3=0;
    try
    {
        Class.forName("oracle.jdbc.driver.OracleDriver");
    java.sql.Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@192.168.1.200:1521:pdsm", "test", "test");
    Statement stmt=conn.createStatement();

        {
        ResultSet rs = stmt.executeQuery("select * from cn_vlgmas");
        while(rs.next())
        {
            //vn[r1++]=rs.getString ("vlgname");
            //vc[r2++]=rs.getString("vlgcode");
            //ds[r3++]=rs.getString("divsec");
            vname=rs.getString ("vlgname");
            vcode=rs.getString("vlgcode");
            divsec=rs.getString("divsec");
            obj.put("vname",vname);
            obj.put("vcode",vcode);
            obj.put("divsec",divsec);
            list.add(obj);
            obj2.accumulate("get", list);
            out.println(obj2);
        }
       /*for(t=0;t<r1;t++)
           {
            //out.println(vn[t]+","+vc[t]+","+ds[t]+" ");
            obj.put("vname",vn[t]);
            obj.put("vcode",vc[t]);
            obj.put("divsec",ds[t]);
            list.add(obj);
            //obj.append("rec", obj);
            //out.println(list);
            //obj.accumulate("get", list);
            //out.println(obj);
            obj2.accumulate("get", obj);
            //out.println(obj2);
            }*/

        }

    }catch(Exception e)
    {
        out.println("error"+e.toString());
    }
}

@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
} 
```

谁能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:01:24.700

move this following statement out of while loop

```
 out.println(obj2); 
```

OR

Instead of `JSonObject` use `JSONArray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:12:48.520

由用户更改2021114

添加

```
obj = new JSONObject(); 
```

在While循环中

```
while(rs.next())
    {
            obj = new JSONObject();
            vname=rs.getString ("vlgname");
            vcode=rs.getString("vlgcode");
            divsec=rs.getString("divsec");
            obj.put("vname",vname);
            obj.put("vcode",vcode);
            obj.put("divsec",divsec);
            list.add(obj);

    }
obj2.accumulate("get", list);
out.println(obj2); 
```

# google-drive-api - 从 FLEX 客户端使用 google drive API

> ID：14621605
> 
> 赞同：1
> 
> 时间：2013-01-31T08:44:22.580
> 
> 标签：google-drive-api, dropbox

有人设法从 FLEX 客户端（不是 AIR）使用 Google 驱动器/保管箱吗？

另外，我认为他们的服务器上不存在 crossdomain.xml。

谢谢， 谢伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:52:26.633

我无法回答有关 flex 的问题，但您可以将 CORS 用于大多数 API（很快就会全部使用）。

# android - 根据时间间隔通过 android 手机调度消息或任何代码和平执行

> ID：14621607
> 
> 赞同：2
> 
> 时间：2013-01-31T08:44:38.787
> 
> 标签：android, performance, android-sqlite, android-pendingintent, android-debug

目前我们正计划使用alarmmanager服务来做到这一点..检查下面的代码

有更好的方法吗？

Intent intent1= new Intent(ScheduleManagement.this,ScheduleManagementService.class); Intent intent2= new Intent(ScheduleManagement.this,ScheduleManagementService.class); Intent intent3= new Intent(ScheduleManagement.this,ScheduleManagementService.class);

```
 intent1.putExtra("msg", "Good morning Sweety ");

   intent1.putExtra("msg", "Good afternoon  ");
  intent1.putExtra("msg", "Good night ");

     /*pendingIntent will fire based on the time
     * request code also differ...
     * same pending intent object...
     * same service but intent properties are different.
     *  */

    Date dt=new Date();

    Log.d("sri", "sriii"+dt.getTime());

    long current_time=calendar.getTimeInMillis();
    pendingIntent =PendingIntent.getService(ScheduleManagement.this,1, intent1,3);
    alarmManager.set(AlarmManager.RTC_WAKEUP, current_time+1000000, pendingIntent);

    /*pendingIntent =PendingIntent.getService(ScheduleManagement.this,2, intent2,3);
    alarmManager.set(AlarmManager.RTC_WAKEUP, current_time +2000000, pendingIntent);*/

    pendingIntent =PendingIntent.getService(ScheduleManagement.this,3, intent3,3);
    alarmManager.set(AlarmManager.RTC_WAKEUP, current_time +3000000, pendingIntent); 
```

# ruby - Ruby Script 13 位正则表达式语法

> ID：14621609
> 
> 赞同：-1
> 
> 时间：2013-01-31T08:44:46.020
> 
> 标签：ruby

我正在尝试使我在[此处](https://stackoverflow.com/questions/3092691/regex-for-field-to-contain-13-digits)的一个问题中找到的正则表达式工作......所以我将脚本放在一起，但我遇到了一些语法错误。请找我。

```
require 'yaml'

f =  File.open("file.txt")
content = f.read

r = Regex.new(^(\d{13})?$)
ids = content.scan(r).uniq
puts YAML.dump(ids) 
```

此脚本从文本文件中的数据凸块中去除 13 位数字。这是我得到的错误..

```
ID_Script.rb:7: syntax error, unexpected '^', expecting ')'
r = Regex.new(^(\d{13})?$)
           ^
ID_Script.rb:7: syntax error, unexpected $undefined
r = Regex.new(^(\d{13})?$) 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:46:36.203

您必须将字符串传递给 Regex 构造函数

```
r = Regex.new("^(\d{13})?$") 
```

或使用正则表达式文字

```
r = /^(\d{13})?$/ 
```

# c# - 在表单加载之前关闭应用程序

> ID：14621613
> 
> 赞同：5
> 
> 时间：2013-01-31T08:45:17.393
> 
> 标签：c#

我有一个程序，我将在其中检查文件是否存在。如果是这样，表单将加载。但如果没有，则会出现一个消息框来通知用户，然后应用程序需要在不显示表单的情况下关闭。

我该如何正确地做到这一点？我尝试在构造函数上使用此代码：

```
 Environment.Exit(-1); 
```

它做我想做的事，但从我读过的内容来看，这不是一个好方法。这个对吗？还是我应该使用上面的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T08:50:33.560

如果您在主窗体的应用程序运行之前进行检查，则无需调用任何内容

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        // Check for file 
        if(!File.Exists("your file to check))             
        {
            MessageBox.Show(.....)
        }
        else
        {
            Application.Run(new frmMain());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:49:38.713

尝试使用这个：

```
yourForm.close(); 
```

或者只是在您确定该文件不存在之前不要调用该表单。

如果您有其他进程正在运行，您可以调用一个方法来关闭它们，而不是在不弄乱主代码的情况下使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:49:50.883

试试这个：稍微简单一些（我想，我已经正确理解了你）

```
if (File.Exists("somefile.txt"))
{
   //do your operation
}
else
{
    this.Close();
} 
```

# apache - .htaccess mod_rewrite 带有多个可选参数的 url

> ID：14621622
> 
> 赞同：4
> 
> 时间：2013-01-31T08:45:50.487
> 
> 标签：apache, .htaccess, mod-rewrite

我对这个 mod_rewrite 业务很陌生，但我希望有一个规则可以让我完成以下任务：

```
localhost/module_name/ -> localhost/index.php?module=module_name
localhost/module_name/module_action -> localhost/index.php?module=module_name&action=module_action
localhost/module_name/module_action/parm1 -> localhost/index.php?module=module_name&action=module_action&parm_1=parm1
localhost/module_name/module_action/parm1/parm2 -> localhost/index.php?module=module_name&action=module_action&parm_1=parm1&parm_2=parm2 
```

等等。我设法让 module_name 和 module_action 工作，但我不知道如何让它只与一个模块或多个参数一起工作。这是我目前拥有的：

```
RewriteEngine on
RewriteRule ([a-zA-Z]+)/([a-zA-Z]+) index.php?module=$1&action=$2
RewriteRule ([a-zA-Z]+)/([a-zA-Z]+)/([a-zA-Z]+)$ index.php?module=$1&action=$2&parm=$3 
```

第一条规则似乎有效，但它在第二条规则中分崩离析。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T09:29:10.053

你可以试试这个：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ^/([^/]+)/?([^/]*)?/?([^/]*)?/?([^/]*)?/?   [NC]
RewriteRule .*    index.php?key1=%1&key2=%2&key3=%3&key4=%4  [L] 
```

静默地图

`http://localhost/val1/`取决于

`http://localhost/val1/val2/val3/val4`

至：

`http://localhost/index.php?key1=val1`取决于

`http://localhost/index.php?key1=val1&key2=val2&key3=val3&key4=val4`

替代 URL 中的非传入`valN`值是空的。

`index.php`被认为是固定字符串。

对于永久重定向，将 [L] 替换为`[R=301,L]`,

最大参数数 = 4。

# google-drive-api - Google Drive SDK：是否可以列出和访问共享给整个域/组织的文件？

> ID：14621624
> 
> 赞同：2
> 
> 时间：2013-01-31T08:45:53.200
> 
> 标签：google-drive-api

具体来说，当用户 A 将文件 Foo 设置为共享为“域中的人可以找到和访问”，但没有明确地将用户 B 放在“添加人员：”下。是否可以以用户 B 的身份以编程方式列出和查看文件 Foo（其中用户 A 和 B 在同一个域下）？

*请注意，用户 B 可以使用 Google Drive 的高级搜索功能手动搜索和查看“Foo”。但我无法通过 drive.files.list 或 drive.children.list 以编程方式执行此操作。似乎只有在 1) 用户 B 已访问该文件或 2) 用户 A 已将用户 B 明确包含在“添加人员”下时，才会从这些列表中返回“Foo”。当这两个条件都不满足时，有没有办法以编程方式列出和访问像“Foo”这样的文件？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:51:23.283

这是正确的，使用 Drive SDK 搜索只会搜索用户已经或已明确与他们共享的文件。

我相信这可能会更好，所以我会调查。对于那个很抱歉。

# coded-ui-tests - 如何使用编码的 UI 识别 WPF 自定义控件

> ID：14621626
> 
> 赞同：2
> 
> 时间：2013-01-31T08:45:55.793
> 
> 标签：coded-ui-tests

我正在尝试使用 Coded UI Test 2010 自动化 WPF 应用程序。我能够手动代码来识别应用程序中的 WPF 控件但是我无法找到一些控件。

我做了一些研发，了解到应用程序中很少有自定义控件。这就是播放失败的原因。

我也尝试过录制和播放，但没有用。我有一个参考链接来解决问题

[http://msdn.microsoft.com/en-us/library/hh552522.aspx#recordandplayback](http://msdn.microsoft.com/en-us/library/hh552522.aspx#recordandplayback)

但我不明白我们需要从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T13:53:14.227

编码的 UI 确实支持 WPF，因此只要您指向的对象具有可识别的属性，那么只需在代码中正确定义对象即可。例如，自定义对象可以在其根目录中定义为 XamlControl。您失去了一些可用于 ComboBoxes（SelectedItem()、SelectedIndex() 等）等控件的扩展方法，但它仍然可以工作。[这里](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.windowsruntimecontrols.xamlcontrol.aspx)有一些关于 Xaml 控件继承的好信息。

例如，通过它的 ID 或标题定义您的控件：

```
public XamlControl myCustomControl
{
    get
    {
        XamlControl target = new XamlControl();
        target.SearchProperties["title"] = "hard to find control";
        return target;
    }
} 
```

# .htaccess - htaccess -> 网站不再工作

> ID：14621630
> 
> 赞同：0
> 
> 时间：2013-01-31T08:46:18.717
> 
> 标签：.htaccess, url-rewriting

使用该站点下方的 htaccess 可以正常工作，但是当我将所有扩展名 .php 重写为 no .php 时，该站点不再工作。所以现在我想将一些 url 重写为没有 .php

我怎么做？我只能找到重写所有脚本的部分

这就是我所拥有的

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# remove trailing slash if not directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,R=301]

# remove index.php
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\ /(.*)index\.php/?([^\?\ ]*)
RewriteRule ^ /%1%2 [L,R=301]

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\.]*)(\.php)?(\?*)$ index.php/$1$3 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:14:06.730

解决了 ：）

rewriterule ^untitled.php [http://www.bijschipholparkeren.nl/untitled](http://www.bijschipholparkeren.nl/untitled) [R=301,L]

# jquery - 淡入/淡出jquery之间的延迟

> ID：14621632
> 
> 赞同：0
> 
> 时间：2013-01-31T08:46:22.623
> 
> 标签：jquery, delay, fadein, fadeout

我做了一个简单的循环，使 div#1 淡入/淡出，然后 div#2 淡入/淡出我写的代码是这样的：

```
function runToggle(iDuration, domFirst,domSecond) {
        $(domFirst).fadeToggle(iDuration, "linear",function() {
          $(domFirst).fadeToggle(iDuration, "linear",function() {
            $(domSecond).fadeToggle(iDuration,"linear",function() {
              $(domSecond).fadeToggle(iDuration,"linear",function() {
                  setTimeout(function() {
                      runToggle(iDuration, domFirst,domSecond) ;
                  },50);
              });
            }); 
          });
       }); 
};

runToggle(2000, $('#box1'),$('#box2')); 
```

但我似乎无法在每次淡入和淡出之间进行延迟......（从逻辑上讲，我想要的是：div1 Fade in，Delay，div1 Fade out，div2 fade in，delay，div2 fade out，然后重新开始.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:49:44.620

JQuery 有一个内置`.delay()`函数。（见[文档](http://api.jquery.com/delay/)）

更改所有这些行：

`$(domFirst).fadeToggle(iDuration, "linear",function() {`

到：

`$(domFirst).delay(200).fadeToggle(iDuration, "linear",function() {`

# android - 持有广播接收器范围以根据用户输入执行操作

> ID：14621642
> 
> 赞同：2
> 
> 时间：2013-01-31T08:46:42.443
> 
> 标签：android, broadcastreceiver, android-broadcast

Android 从 API 级别 11 开始支持一种新方法，用于延长广播接收器的生命周期。

它是 goAsync 和新类 BroadcastReceiever.PendingResult。

我们的场景是：当我们收到来电的广播接收器时，我们将活动显示为带有接受录音/拒绝选项的对话框。根据用户输入，我们需要决定是连接还是断开呼叫。问题是我们需要确保接收的广播接收器被阻塞，直到我们获得用户输入以及我们如何将用户输入从活动对话框传递回广播接收器。

这与未完全回答的帖子中的情况类似：[链接]（[在拨打电话之前等待用户输入](https://stackoverflow.com/questions/6401964/wait-for-user-input-before-placing-outgoing-call)）从上面的帖子中我们了解到，这可以使用 goAsync 和 BroadcastReceiver.PendingResult 来实现。但我们不清楚如何实现这些 API。

任何示例代码片段都会有所帮助。

# matlab - 绘制离散函数的实部和虚部

> ID：14621643
> 
> 赞同：-2
> 
> 时间：2013-01-31T08:46:43.657
> 
> 标签：matlab

我试图弄清楚如何绘制离散函数 *y* [ *n* ] = *x* [ *n* -5] / (1 + *x* [ *n* ])。
任何帮助找出正确的语法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:59:04.760

因为你的 eq 相当于：

```
y[n+5] = (x[n])/(1+x[n+5]) 
```

我将在某个范围内绘制后者（如果需要更改）：

```
lower_limit=-10
upper_limit=10
N=100;

x=linspace(lower_limit,upper_limit,N);
y=x(1:end-5)./(1-x(6:end));

plot(x(6:end),y) 
```

![在此处输入图像描述](../Images/82581b37e1a8978c95ad2ff02c6dcd85.png)

# php - Android和PHP服务器：加密和解密数据

> ID：14621646
> 
> 赞同：4
> 
> 时间：2013-01-31T08:46:49.653
> 
> 标签：php, android, encryption, aes, rsa

我有一个与我自己的服务器通信的 Android 应用程序。由于我们没有 https，我想实现自己的数据加密。服务器是用 PHP 实现的。

我想使用 AES，但我的主要问题是与本地应用程序共享服务器密钥，因为它可能被拦截，然后任何人都可以解密我的消息。

我应该改用 RSA 吗？还是有一种共享密钥的安全方式？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-20T17:50:58.387

您应该使用 RSA 和 AES 加密协议。

*   RSA 加密/解密短字符串（对 CPU 来说很重）。
*   AES 加密/解密大字符串（它比 RSA 更快）。

所以：

1.  客户端为每个请求创建一个随机 AES 密钥（24 字节即可）；
2.  客户端使用 AES 密钥加密字符串请求（任意长度）；
3.  客户端使用 RSA PUBLIC 密钥加密 AES 密钥；
4.  客户端将加密的（AES 和字符串）都发送到服务器（POST 很好）；
5.  服务器使用 RSA PRIVATE 密钥解密 AES 密钥；
6.  服务器使用 AES 密钥解密字符串；
7.  服务器处理字符串请求；
8.  服务器使用相同的 AES 密钥加密响应字符串；
9.  服务器响应返回给客户端；
10.  客户端使用 AES 密钥解密响应。

在 GitHub 上查看以下开源项目：github.com/rcbarioni/followzup

服务器是用 PHP 实现的，并且有 PHP 和 Java 的 API。客户端和服务器之间的通信使用 AES 和 RSA。

PHP 和 Java 加密库完全兼容。Java for Android 也兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:13:06.423

好吧，我会执行以下操作之一 - 优先级降低：

*   告诉你的老板 HTTPS 是要走的路。
*   使用像 openSSL 这样的 SSL 库
*   对消息使用 AES，对会话的 AES 密钥交换使用 RSA

最后一个是最不可取的，因为有很多事情，你可能会做错，从而意外破坏安全性。举个例子：如果你碰巧同时使用加密和压缩，你很容易受到[CRIME 攻击](https://community.qualys.com/blogs/securitylabs/2012/09/14/crime-information-leakage-attack-against-ssltls)......

# c# - 在VS中打开外部运行的调试构建可执行异常？

> ID：14621652
> 
> 赞同：1
> 
> 时间：2013-01-31T08:47:07.980
> 
> 标签：c#, visual-studio-2010, debugging, visual-studio-debugging

我有一台开发计算机和一台 beta 测试计算机。在测试版中，我运行从开发计算机的 VS 项目 Debug 文件夹中复制的 Debug-build 可执行文件。有没有办法让这些可执行文件上发生的异常在 VS（在它运行的 beta-pc 上）中打开，就好像它是正常的调试运行一样？

我记得早些时候我收到了一个弹出问题，如果我想在 VS 中调试异常，虽然总是被拒绝，但目前我只得到一个标准的异常弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:57:25.117

这可能不是最好的答案；看看它是否有效。

请务必同时复制与二进制文件相关的所有 .PDB 文件。

首先打开 Visual Studio。然后，运行您的可执行文件并将 Visual Studio 的调试器附加到可执行文件。当您的进程引发未处理的异常时，Visual Studio 应该能够像您正在开发的普通应用程序一样对其进行调试，并完成跟踪和本地监视。

如果您只想要完整的堆栈跟踪，我不确定这是否有必要。调用`Exception.ToString()`返回完整的堆栈跟踪。

# performance-testing - 面对 Truclient 脚本中的事务问题

> ID：14621654
> 
> 赞同：0
> 
> 时间：2013-01-31T08:47:25.410
> 
> 标签：performance-testing, loadrunner, truclient

嗨，我正在研究 truclient 脚本，我已将一些步骤分组到各种事务中，但是在重播时，我在重播日志中发现步骤是在事务开始之前开始的。

```
t=00001031ms: ** 1: Navigate to LR.getParam("pURL") ** started    [MsgId: MMSG-204251]
Notify: Transaction "Search_T01_LaunchURL" started.
Notify: Transaction "Search_T01_LaunchURL" ended with "Pass" status (Duration: 4.9533).
t=00006391ms: ** 1: Navigate to "LR.getParam("pURL") 
```

** 成功完成

在上面的行中，导航到`LR.getParam("pURL")`在事务内部，但它在`Search_T01_LaunchURL`事务之前开始执行，因此如果步骤失败，那么我们将获得事务通过。

请多多指教。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T17:28:02.747

将您的结束事件更改为“步骤网络已完成”。如果将其设置为“自动：未设置”或“操作已完成”，您将看到此行为。

# php - 创建 SOAP 客户端

> ID：14621655
> 
> 赞同：-2
> 
> 时间：2013-01-31T08:47:29.380
> 
> 标签：php, soap, soap-client

如何将数据发送到 WSDL？下面是我拥有的 XML 示例：

```
<UzbRequest xmlns="XXXXXXXX">
<Authorisatie>
    <Afzender>YYYYYYYY</Afzender>
    <Sleutel>XXXXXXXXXXXXXX</Sleutel>
</Authorisatie>
<Aanlevering ID="IDENTYFIKATOR">
    <Mutaties>
        <Mutatie ID="IDENTYFIAKTOR1" BSN="ZZZZZ" Collectiviteit="WWWWW">
            <Aanmelding>
                <Ingangsdatum>RRRRR</Ingangsdatum>
                <Geboortedatum>TTTTT</Geboortedatum>
                <Geslacht>M</Geslacht>
                <NAW>
                    <Naam>
                        <Voorletters>CP</Voorletters>
                        <EigenNaam>
                            <Achternaam>NOWAK</Achternaam>
                        </EigenNaam>
                    </Naam>
                    <DomicilieAdres>
                        <Straat>BLOTNA</Straat>
                        <Huisnummer>5</Huisnummer>
                        <Postcode>47-120</Postcode>
                        <Plaats>WARSZAWA</Plaats>
                        <Landcode>PL</Landcode>
                    </DomicilieAdres>
                </NAW>
                <Nationaliteit>
                    <Landcode>DE</Landcode>
                </Nationaliteit>
                <E106>Nee</E106>
            </Aanmelding>
        </Mutatie>
    </Mutaties>
</Aanlevering>
</UzbRequest> 
```

我应该如何将这些发送到服务器？

我还需要了解哪些信息才能发送数据？我目前正在尝试使用`nusoap`. 我正在尝试将此数据作为 XML 数组发送，但没有任何效果。`getFucntions`PHP 中的函数返回：

```
array(1) { [0]=> string(39) "UzbResponse Uzb(UzbRequest $UzbRequest)" } 
```

* * *

我使用 __soapCall 更改连接类型。现在我有错误

`"Fatal error: Uncaught SoapFault exception: [Client] SOAP-ERROR: Encoding: object hasn't 'Authorisatie' property"` 我有

```
$param=array(
    'Authorisatie'=>
        array('Afzender'=>array("_"=>'test')
            ,'Sleutel'=>array("_"=>'test12344')
            ));
var_dump($client->__soapCall("Uzb", $param)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:35:03.440

您可以使用 php 的 SoapClient - [http://www.php.net/manual/en/soapclient.soapcall.php](http://www.php.net/manual/en/soapclient.soapcall.php)。

您需要将参数作为数组传递，它将生成 XML 本身。请参阅示例如何完成。

# html - 如何为每个 x 列表在 ul 水平列表中换行？

> ID：14621656
> 
> 赞同：5
> 
> 时间：2013-01-31T08:47:29.677
> 
> 标签：html, css, html-lists

我有`ul`这样的PHP构建水平动态列表：

```
List1 List2 List3 List4 List5 List6 List7 List8 List9 List10 
```

有没有办法每 3 个列表换行一次？因此，结果将如下所示：

```
List1 List2 List3

List4 List5 List6

List7 List8 List9

List10 
```

我知道我可以调整`ul`宽度以使我的列表看起来像上面那样。

但我想要的是为每 3 个列表创建一个新行。PHP、CSS 或 JavaScript 能做到这一点吗？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T10:25:21.557

不如——

```
li {
  width: 33%;
  float: left;
  list-style: none;
} 
```

将每个元素的宽度设置为`li`可用空间的三分之一意味着我们可以`li`在每一行放置三个 floated ，然后浏览器将下一个元素推入新行。

我想您可能可以将`float: left`语句交换为`display: inline`以获得相同的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T08:54:23.043

如果您没有固定大小的列表项，您可以使用 jQuery 简单地完成：

```
$('li:nth-child(3n)').next().css({'clear': 'both'}); 
```

这需要每三个元素，并将 clear 添加到下一个元素。就是这样..无论您的列表项是什么大小，它都会在每第三个元素之后将下一个元素带到新行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-18T13:19:56.790

正如 Панайот Толев 在他的帖子中提到的，但仅限于 CSS3：

```
li:nth-child(3n) + li
{
    clear:both;
} 
```

选择每个第三个元素并添加 clear:both 到下一个列表元素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T08:49:05.700

您必须设置每个`<li>`宽度 - 例如`width: 100px;`和 for `<ul>`set `width: 300px`。

```
ul, li {
  margin: 0;
  padding: 0;
}
ul {
  width: 300px;
}
li {
  width: 100px;
  float: left;
  list-style: none;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T08:53:01.697

如果您想使用 PHP 而不是 css（如@hsz 建议的那样）来执行此操作，您可以将其拆分`ul`为最多包含 3 个`li`的

```
<ul class="...">
<?php
$i = 1;
$array = (/* 10 items */);
foreach ($array as $item) {
    if ($i % 3 == 0) { echo '</ul><ul>'; }
    echo "<li>{$item}</li>";
    $i ++;
}
?></ul> 
```

# symfony - Symfony2 - 从不显示自定义错误页面

> ID：14621663
> 
> 赞同：2
> 
> 时间：2013-01-31T08:47:41.270
> 
> 标签：symfony, custom-error-pages

我正在尝试自定义 error.html.twig、error403.html.twig、error404.html.twig 和 error500.html.twig，到目前为止，我已尝试获取由 a 引起的 error403.html.twig 错误AccessDeniedExceptionw 这是一个 403 禁止，但它显示自定义错误页面。[我像这里](http://symfony.com/doc/2.0/cookbook/controller/error_pages.html)所说的那样在 app/Resources/TwigBundle/views/Exception 中创建了模板，但到目前为止，还没有运气。

所有模板都扩展了网站基础模板

403：

```
 {% extends '::base.html.twig' %}
{% block body %}
<div id="header">
    <a href="{{path ('login')}}" class="fl"><img src="{{ asset('images/access_error.png') }}" alt="TiCad" /></a>
    <div class="fr"><h1>HA OCURRIDO UN ERROR:</h1></div>
    <div align="center">No posee permisos suficientes para acceder a esta seccion, si desea ingresar con otra cuenta haga clic <a href="{{path ('login')}}">AQUI</a></div>
{% endblock %} 
```

404：

```
{% extends '::base.html.twig' %}
{% block body %}
<div id="header">
    <a href="{{path ('login')}}" class="fl"><img src="{{ asset('images/error404.png') }}" alt="TiCad" /></a>
    <div class="fr"><h1>HA OCURRIDO UN ERROR:</h1></div>
    <div align="center">No encontrado. Por favor, intente de nuevo.</div>
{% endblock %} 
```

500：

```
{% extends '::base.html.twig' %}
{% block body %}
        <h1><img src="{{ asset('images/internal_server.png') }}" alt="Monse" />Oops! Ha ocurrido un error</h1>
        <h2>Error interno en el servidor</h2>

        <div>
            Algo no funciona. Por favor, Háznos saber que estabas haciendo cuando ocurrio este error, envia un email a <a href="mailto:ticad@icad.com.ve">ticad@icad.com.ve</a>
            Lo arreglaremos lo mas pronto posible. iCad Diseno Inteligente, C.A. se disculpa por los inconvenientes causados. 
        </div>
{% endblock %} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T19:34:51.773

自定义模板不会显示在您的开发中。环境。您可以使用生产环境对其进行测试，只需确保清除缓存即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T09:29:33.583

它将在这一行抛出错误： {% extends '::base.html.twig' %}

您可以检查您的网络服务器日志；可能你的 symfony 也会记录错误。

也可以看看：

*   [Symfony2 生产时出现错误 500 而不是 404](https://stackoverflow.com/questions/10426899/symfony2-error-500-instead-of-404-at-production)
*   [https://github.com/symfony/symfony/issues/5206](https://github.com/symfony/symfony/issues/5206)
*   [https://groups.google.com/forum/?fromgroups=#!topic/symfony2/YFeSKgWn4RA](https://groups.google.com/forum/?fromgroups=#!topic/symfony2/YFeSKgWn4RA)

我也试图在我已经拥有的布局中显示错误消息，但到目前为止还没有运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:56:30.600

你清除缓存了吗？另外，你能给我们你的错误文件的名称吗？

# java - 地图的 BatchedTooManyRowsAffectedException

> ID：14621665
> 
> 赞同：1
> 
> 时间：2013-01-31T08:47:48.803
> 
> 标签：java, hibernate, jpa, jpa-2.0

当我尝试存储包含地图的实体时遇到以下问题。

这就是我的实体的样子：

```
public Class MyEntity {
   private Map<EnumType, MyEmbedabble> map;
   ..... 
```

这是 orm.xml 文件中的相关部分：

```
<element-collection name="map" target-class="my.package.MyEmbedabble">
            <map-key-enumerated>STRING</map-key-enumerated>
            <map-key-column name="map_key"/>
            <collection-table>
                <join-column name="entityId"/>
            </collection-table>
 </element-collection> 
```

当我存储一个实体对象时它工作得很好，但我注意到当我再次存储该对象时，元素集合的表中的条目出现多次。一旦发生这种情况，我尝试编辑并保存现有的地图条目，我会收到以下异常：

```
Caused by: org.hibernate.jdbc.BatchedTooManyRowsAffectedException: Batch update returned unexpected row count from update [0]; actual row count: 5; expected: 1
at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:89)
at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:73)
at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:57)
at org.hibernate.persister.collection.BasicCollectionPersister.doUpdateRows(BasicCollectionPersister.java:258)
at org.hibernate.persister.collection.AbstractCollectionPersister.updateRows(AbstractCollectionPersister.java:1630)
at org.hibernate.action.internal.CollectionUpdateAction.execute(CollectionUpdateAction.java:85) 
```

我非常感谢您对此的任何意见！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:48:25.503

我有一个类似的问题。在我的例子中，我使用了一个实体，它更新了另一个表中的记录（我有一个一对多的关系——一个“主要”对象和一个单独表中的“次要”对象列表）。我的设置正在尝试更新另一个表。这在创建和更新方法上工作得很好，但是当我尝试删除一个对象时，我得到了`BatchedTooManyRowsAffectedException`异常。我最终删除了连接的条目并将它们作为单独实体的一部分。

在您的情况下，我建议您再看一下 MyEmbeddable 地图的设置，特别是您设置连接列的部分。如果您的更新尝试删除多个条目（因此删除多行），这可能是问题的根源。

查看您定义的一些可用 XML 标记 - 您可能在某处需要类似一对多标记的东西。不幸的是，我在实体方面的经验使用 Spring/Hibernate 来绕过对显式 XML 文件的需求，因此我无法在这方面提供任何进一步的建议。

# perl - 在 File::Find::find 中移动和删除文件是否安全？

> ID：14621670
> 
> 赞同：0
> 
> 时间：2013-01-31T08:48:10.690
> 
> 标签：perl

```
File::Find::find ( sub {
    #
    unlink if int -M $File::Find::name > 100;
    File::Copy::move $File::Find::name, "/$File::Find::dir/backup" if $File::Find::name =~ /ERROR/;
    }, $dir ）； 
```

在 File::Find::find 中移动和删除文件是否安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:05:18.530

删除：是的。`wanted`File::Find 在调用目录中的任何文件之前读取整个目录。

移动：不，因为您要将文件移动到您可能访问的目录中。但是，如果您添加了以下所需的代码段，那将是安全的。

```
if ($_ eq 'backup') {
   $File::Find::prune = 1;
   return;
} 
```

此外，之后您确实应该拥有以下内容：

```
return if !-f $_; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:00:44.933

Should be fine moving and deleting files. If you are moving and deleting the directories as you are working on them it might get somewhat confusing. The list of files and directories will be made at the start of the sub so new files and directories that you make during the sub running will not be considered

Hope this helps

# javascript - 结合jquery函数和方法

> ID：14621673
> 
> 赞同：0
> 
> 时间：2013-01-31T08:48:14.810
> 
> 标签：javascript, jquery, performance

jquery 很新，所以这可能是一个“真正的男人”类型的问题。但是假设我有两个要合并为一个的函数，但有细微的差别，例如 next() 和 prev() 方法，并且每个函数中的第一个和最后一个伪选择器都不同：

```
function rotateImage(){

var currentPhoto = $("#photo_slideshow .current");  
var nextPhoto = currentPhoto.next();

if(nextPhoto.length == 0){
nextPhoto = $("#photo_slideshow div:first");
}

}

function rotateImage2(){

var currentPhoto = $("#photo_slideshow .current");  
var nextPhoto = currentPhoto.prev();

if(nextPhoto.length == 0){
nextPhoto = $("#photo_slideshow div:last");
}
} 
```

必须有一种方法可以结合这两个函数来压缩代码。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:54:06.577

您需要在 function.something 中提供一些参数来确定是调用 next 还是调用 previous.do 像这样。

```
function rotateImage(side){

var currentPhoto = $("#photo_slideshow .current");  
if(side=="next"){
var nextPhoto = currentPhoto.next();
if(nextPhoto.length == 0){
nextPhoto = $("#photo_slideshow div:first");
}
if(side=="prev")
{
var nextPhoto = currentPhoto.prev();
if(nextPhoto.length == 0){
nextPhoto = $("#photo_slideshow div:last");
}
} 
```

调用时：供下次使用`rotateImage("next")`以供先前使用`rotateImage("prev")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:58:14.650

```
function rotateImage(which, pseudoSelector) {

    var currentPhoto = $("#photo_slideshow .current");  
    var nextPhoto = currentPhoto[which]();

    if(nextPhoto.length == 0){
        nextPhoto = $("#photo_slideshow div:" + pseudoSelector);
    }

}

rotateImage('next', 'first');
rotateImage('prev', 'last'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:16:06.207

```
function rotateImage(side){
var isNext = side == 'next';

var currentPhoto = $("#photo_slideshow .current");  
var nextPhoto = isNext ? currentPhoto.next() : currentPhoto.prev();

if(nextPhoto.length == 0){
nextPhoto = $("#photo_slideshow " + (isNext ? "div:first" : "div:last"));
}} 
```

*   使用 rotateImage('next')**旋转下一个。**
*   使用 rotatImage() 或 rotateImage('prev') 或 rotateImage()**旋转到上一个。**

# asp.net-mvc-3 - 带有斜杠 (/) %2f 的 MVC3 URL 编码问题 - 使用 MVC 路由在查询字符串中传递斜杠

> ID：14621684
> 
> 赞同：1
> 
> 时间：2013-01-31T08:49:09.310
> 
> 标签：asp.net-mvc-3, url-rewriting, url-routing

我在 global.asax 中定义了以下路由路径来处理 url 中的两个参数：

```
routes.MapRoute(
                "Default", // Route name
                "{page}/{th}", // URL with parameters
                new { controller = "Home", action = "Index", page = UrlParameter.Optional, th = UrlParameter.Optional } // Parameter defaults
            ); 
```

第一个参数是另一个网站的URL，即www.othersite.com/about/。

即使我将斜杠编码为 %2f ，它也无法正确路由 URL。我想使用这样的东西：

```
http://{mywebsite}/www.othersite.net%2fabout%2f/{parameter2} 
```

我**不想**使用 Base64 编码，因为我希望 URL 像上面那样可读。

我正在使用 MVC 3。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:51:44.217

看看[`following blog post`](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)Scott Hanselman 的文章，他解释了一些可能的解决方法。但结论是：

> 在为在请求路径中获得疯狂的东西所做的所有努力之后，值得一提的是，简单地将值保留为查询字符串的一部分（还记得本文开头的 WAY 吗？）更容易、更清洁、更灵活，而且更多安全的。

因此，基本上最好为此使用 url 编码的查询字符串参数，而不是在可能会失败的战斗中与 IIS 对抗。

# android - 总是在 facebook android sdk3.0 中获取会话状态：CLOSED_LOGIN_FAILED，token:{AccessToken token:ACCESS_TOKEN_REMOVED。

> ID：14621688
> 
> 赞同：35
> 
> 时间：2013-01-31T08:49:29.223
> 
> 标签：android, facebook

总是在 facebook android sdk3.0 中获取会话状态：CLOSED_LOGIN_FAILED，token:{AccessToken token:ACCESS_TOKEN_REMOVED。即使当我运行 facebook sdk 给出的示例时，它也会进行身份验证而不是将其重定向到下一个流程。它会显示上一页本身。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-25T02:23:29.860

出于某种原因，keytool 为我生成的哈希与我的应用程序不同。这对我有用。使用 facebook 提供的标准代码生成哈希：

```
PackageInfo info = getPackageManager().getPackageInfo("<your_package_name>",  PackageManager.GET_SIGNATURES);

for (Signature signature : info.signatures)
    {
        MessageDigest md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
        Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
    } 
```

确保将“your_package_name>”替换为相应的包名称。查看 logcat 并获取 keyhash 并将其输入到您的 facebook 应用程序设置中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T13:48:02.117

ACCESS_TOKEN_REMOVED 与问题无关。这只是 Facebook SDK 没有记录访问令牌。所以你可以放心地忽略那部分错误。

CLOSED_LOGIN_FAILED 的可能原因有两个：

1.  您在 Facebook 原生应用程序本身中输入了错误的凭据。

2.  在您在 developers.facebook.com 上的应用设置中输入的 Android 密钥哈希与 APK 的密钥哈希不匹配。

疑难解答#1 打开 Facebook 原生应用并确保您已正确登录并且可以访问内容。如果您在 Facebook 原生应用程序中输入了错误的凭据（也许您最近更改了密码），那么 Facebook SDK 将反复尝试使用原生应用程序执行 SSO 并报告 CLOSED_LOGIN_FAILED。

要解决 #2 问题，只需按照此页面上“创建 Facebook 应用程序”下的说明进行操作，[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)。

Facebook SDK 提供的示例将失败，因为示例应用的应用配置不会注册您的调试密钥哈希。在同一链接的“运行示例”下有如何解决此问题的说明。这是一个报价：

> 简而言之，您将创建的每个 Android 应用程序都将被签名，并且您需要向 Facebook 注册每个应用程序的密钥哈希，作为真实性的安全检查 - 我们稍后会看到。但是要绕过对 SDK 示例的检查并让它们快速启动和运行，您可以将密钥哈希添加到您的全球 Facebook 开发人员资料中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-10T12:49:24.613

我有同样的错误，我忘记了启动活动的 onActivityResult 中的以下行：

```
Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data); 
```

这是整个方法：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case RESULT_CODE_IMPORT_FACEBOOK:
          //do stuff
          break;
    default:
          Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
          break;
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-13T17:34:29.773

我有一个类似的问题 - 我正在接受`CLOSED_LOGIN_FAILED`并且`com.facebook.FacebookOperationCanceledException: User canceled operation`我绝对没有取消操作。

在对我的应用程序代码的每一行进行了 7 到 8 个小时的尝试之后，我注意到这是在我的清单中的活动中设置的。删除它解决了它。

```
android:launchMode="singleInstance" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-07T11:14:52.903

如果您在沙盒模式下使用 Facebook 应用程序，请确保您使用的帐户在授权管理员或开发人员列表中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-01T06:56:46.683

尝试从您的设备上卸载您的 Facebook 应用程序，然后重新安装。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-15T10:46:32.620

我遇到了同样的问题，但解决方案是我必须进入 facebook (developper.facebook) 并在我的应用程序设置中添加如果使用的密钥并添加包名称如果它不能帮助您尝试访问此链接对于其他解决方案：“ [Android Facebook SDK 3.0 在登录时给出“remote_app_id 与存储的 id 不匹配](https://stackoverflow.com/questions/13894006/android-facebook-sdk-3-0-gives-remote-app-id-does-not-match-stored-id-while-lo)”

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-21T15:27:03.960

另一种解决方法是禁止 sso 登录方法。这可以这样做：

```
LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
authButton.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO); 
```

资料来源：[Android - 强制 Facebook 连接 - 代码日志](https://stackoverflow.com/questions/14467289/android-force-facebook-connexion)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-11T20:36:44.690

如果您没有使用某个密钥存储显式签署您的应用程序，IDE 它将使用默认密钥为您签名。您必须使用特定的密钥库签署您的项目，提取密钥哈希并将其添加到您的 Facebook 帐户。

[如何签署您的项目](https://www.youtube.com/watch?v=gpxM0ffAvok)

[如何提取密钥哈希](https://www.youtube.com/watch?v=LUv8NDgu2Xk)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-13T15:54:40.550

我们遇到了同样的问题，并且在很长一段时间内都在寻找和搜索。我检查了哈希键、清单文件和许多其他东西来解决这个问题。我们正在使用较旧的 3.23.1 版本的 facebook sdk，我们的应用程序无法连接到 facebook，仅适用于某些手机。它返回“CLOSED_LOGIN_FAILED”状态，并通过 logcat 报告“无法使用空调用包调用 LoginActivity。如果调用者的 launchMode 为 singleInstance，则可能发生这种情况”。

在某些手机上，例如来自 Fairphone 的手机，添加了一项新功能： [https ://fairphone.zendesk.com/hc/en-us/articles/207164396-What-is-the-Privacy-Impact-feature-](https://fairphone.zendesk.com/hc/en-us/articles/207164396-What-is-the-Privacy-Impact-feature-)

此功能避免了在某些特殊情况下与 facebook 的可靠通信。取消勾选后，重新启动您的应用并接受权限，我们的应用的行为与预期相同。

希望这有助于避免我在修复它时得到的白发。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-25T12:19:59.833

就我而言，Facebook 应用程序 ID 错误，并且密钥哈希也未添加到 facebook 上的应用程序

奇怪的是，它曾经在可调试的非签名版本上运行良好！！

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-03-25T10:13:11.413

我也从 SessionLoginSample 得到了这个错误几个小时。我在 developer.facebook.com 上创建了一个明确的应用程序 SessionLoginSample 后，它就起作用了。我将应用程序 ID 复制到 Android 清单等中，并且它有效。换句话说，Facebook 的入门指南中描述的示例应用程序配置失败。

# system.reactive - MessageBus 和重放

> ID：14621695
> 
> 赞同：0
> 
> 时间：2013-01-31T08:49:44.903
> 
> 标签：system.reactive, reactiveui

我试图向 MessageBus 注册一个 observable，它重播发生新订阅时产生的最后一个值

```
var currentViewObs = currentViewGallery.ObservableForProperty(g => g.SelectedIndex)
                .Value().Select(CurrentViewObsSelector).Replay(1);

currentViewObs.Connect();

MessageBus.Current.RegisterMessageSource(currentViewObs, MessageBusContracts.CurrentView); 
```

这是行不通的，因为 observable 被包裹在一个 ScheduledSubject 中，它吞下了重播。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:15:14.453

在这种情况下，您可能想要使用自己的 MessageBus - 实现（可能只需从[此处](https://github.com/reactiveui/ReactiveUI/blob/master/ReactiveUI/MessageBus.cs)`IMessageBus`复制粘贴代码并对其进行编辑），然后将其分配给`MessageBus.Current`

# php - 如何使用 Codeigniter 中的 URL 在子文件夹中执行控制器？

> ID：14621702
> 
> 赞同：0
> 
> 时间：2013-01-31T08:50:09.853
> 
> 标签：php, codeigniter, codeigniter-2

如何使用 Codeigniter 中的 URL 执行控制器 ia 子文件夹？

如果我有下一个控制器 y 控制器文件夹：

```
-/controllers/
      |---------controller1.php
      |---------/sub-folder/
                     |---------controller2.php 
```

我可以`controller1.php`使用与此类似的 URL 执行： `example.com/index.php/controller1/function/param`

但是，我该如何执行`controller2.php`？

很重要：

****=> 确保您的子文件夹名称不是控制器的任何名称****

 ****=> 确保你的类名和文件名相同****

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:55:16.990

这应该有效：

```
 example.com/index.php/sub-folder/controller2/function/param 
```

**=> 确保您的子文件夹名称不是控制器的任何名称**

**=> 确保你的类名和文件名相同**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:54:59.470

你可以执行，

```
example.com/index.php/sub-folder/controller2/function/param 
```**

# triggers - Firebird 触发器，更新其他表字段

> ID：14621707
> 
> 赞同：2
> 
> 时间：2013-01-31T08:50:25.340
> 
> 标签：triggers, sql-update, firebird

是否有可能（我假设：是）从触发器（Firebird 2.5）更新其他表。例如，我有一个**表 X**更新后触发器是这样的：

```
begin
  if  (new.CODE<>old.CODE)  then
  BEGIN
  post_event  'CODE_CHANGE';
  UPDATE Y SET CODE=10 WHERE ID=1;
  END
end 
```

或者

```
begin
  if  (new.CODE<>old.CODE)  then
  BEGIN
  post_event  'CODE_CHANGE';
  EXECUTE STATEMENT ('UPDATE Y SET CODE=10 WHERE ID=1');
  END
end 
```

但它不起作用（**表 Y**不会改变）。

触发器的完整定义（为了更好地理解）

```
SET TERM ^^ ;
CREATE TRIGGER ABC FOR X ACTIVE AFTER INSERT OR UPDATE OR DELETE POSITION 0 AS
begin
  if  (new.CODE<>old.CODE)  then
  BEGIN
  post_event  'CODE_CHANGE';
EXECUTE STATEMENT ('UPDATE Y SET CODE=10 WHERE ID=1');
  END
  post_event 'CHANGE';
end ^^ 
```

第二个问题：如何为 UPDATE 命令提供参数（对于**表 Y** ） - 我的意思是我想在上面的代码中放入**new.CODE**（来自**表 X**的新值）而不是值“ **10** ”，如下所示：

 ****```
UPDATE Y SET CODE=new.CODE WHERE ID=1 
```

谢谢你的建议。

阿尔蒂克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:22:41.333

是的，您可以从触发器操作任何表，您不限于与触发器关联的表。所以问题是为什么你`UPDATE`在触发器中的声明不起作用？我看到了三种可能性：

1.  `if (new.CODE<>old.CODE) then`声明。如果其中一个`new`或`old`值是，`code`则`NULL`该`then`部分将不会运行。有关完整说明，请参阅[Firebird Null 指南](http://www.firebirdsql.org/file/documentation/reference_manuals/user_manuals/html/nullguide-conditionals-loops.html)。这里的解决方案是使用[`DISTINCT`operator](http://www.firebirdsql.org/file/documentation/reference_manuals/user_manuals/html/nullguide-langelem.html#nullguide-langelem-distinct)。当然，如果`code`值没有改变，那么 if 语句也会“失败”，但这应该很明显 :) 此外，如果您收到`CODE_CHANGE`事件，您可以确定 if 语句运行。另请注意，在多动作触发器中，如果触发器被触发，则[NEW](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-new.html)将是`NULL`，如果触发器被触发`DELETE`，[OLD](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-old.html)将`NULL`是`INSERT`. 因此，您的触发器仅在 UPDATE 语句的情况下按预期工作。您可能希望将其拆分为三个不同的触发器。
2.  您更新的`where`部分失败，即表 Y 中没有 ID = 1 的记录。可能的解决方案是使用[`UPDATE OR INSERT`statement](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-update-or-insert.html)。
3.  你真的`commit`交易吗？如果你回滚它，所有表中的更改都会回滚，而不仅仅是“主表”。

至于您的第二个问题 - 是的，您的 UPDATE 语句看起来不错，在任何语句中使用触发器上下文变量都是有效的。您可以在语句中使用其他变量，方法是在它们前面加上冒号，即

```
UPDATE Y SET CODE = :SomeVariable WHERE ID=1 
```****

# postgresql - Sybase 和 Postgres 之间存在差异

> ID：14621713
> 
> 赞同：0
> 
> 时间：2013-01-31T08:50:34.283
> 
> 标签：postgresql, postgresql-9.1

以下查询在 Sybase SQL 中有效： -

```
select id, version from local_tbl
group by id
having version < max(version) 
```

它让我得到除了最大值之外的所有 id 和版本。

当我在 Postgres 9.1 中尝试相同的查询时，我收到以下错误消息：-

```
Error: ERROR: column "local_tbl.version" must appear in the GROUP BY clause or be used in an aggregate function 
```

我无法将版本放入组中，因为我想要一个 id 的所有版本。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:55:07.507

尝试：

```
SELECT id, version
FROM (
      select id, 
             version, 
             max(version) OVER (PARTITION BY id) as max_version
      from local_tbl ) sub
WHERE version < max_version 
```

# jquery - 多个事件避免多次调用

> ID：14621715
> 
> 赞同：0
> 
> 时间：2013-01-31T08:50:50.467
> 
> 标签：jquery

我有一个文本框，我正在使用 live() 的 keyup 事件*——编写新代码的人应该使用 on()——*但问题是人们可以复制和粘贴值、拖动值或使用自动完成来更改值。

为了解决这个问题，我发现我可以使用以下内容：

```
$(".textbox").live("keyup change input", function(){ 
```

这可行，但问题显然是在某些情况下和某些浏览器中多次调用该函数。我似乎想不出办法来避免这个问题。有没有人有任何快速的想法？如果代码被多次调用，因为它只是更新页面上的一些值，这并不是世界末日，但是学习如何解决这个问题会很好！谢谢！

*编辑：我之前忘了提，但我使用的是 jQuery 1.4.4 并且 on() 不可用。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:55:08.597

**建议与更正**

该功能`$.live()`已弃用。所以更改以下代码：

```
$(".textbox").live("keyup change input", function(){ 
```

至：

```
$("body").unbind("keyup").unbind("change").unbind("input").on("keyup change input", ".textbox", function(){ 
```

这解决了事件的多个附件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:58:27.023

如果发生多个事件但值没有改变，那么我们可以忽略这些事件。因此，您可以保持旧值并与新值进行比较以决定是否应该做某事：

```
$(".textbox").live("keyup change input", function(e){
    if($(this).attr("old-value") !== $(this).val()){
        // do something

        // update old-value
        $(this).attr("old-value", $(this).val());
    }
}); 
```

在这里演示：http: [//jsfiddle.net/NYmYJ/3/](http://jsfiddle.net/NYmYJ/3/)

# c# - 回发时转到页面顶部

> ID：14621720
> 
> 赞同：4
> 
> 时间：2013-01-31T08:51:22.933
> 
> 标签：c#, asp.net

我有一个 ascx 控件，它有一个保存按钮，它位于页面底部。当我单击保存按钮并回发时，控件仍位于底部。回发后有什么要回到顶部的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:57:49.640

这种行为可能是因为页面属性`MaintainScrollPositionOnPostback`设置为`true`. 可以通过 web.config 或通过 page 指令以编程方式或声明方式设置此属性：

```
Page.MaintainScrollPositionOnPostBack = true;
<%@ Page MaintainScrollPositionOnPostback="true" %>
<pages maintainScrollPositionOnPostBack="true" /> 
```

检查这些东西，我相信它在某处启用。

或者，您可以订阅`endRequest`页面上的“事件”并在每个请求上重置滚动位置。

```
<script>
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_endRequest(function () {
        window.scrollTo(0, 0);
    });
</script> 
```

# xcode - 在 Xcode 构建脚本中读取预处理器宏？

> ID：14621723
> 
> 赞同：6
> 
> 时间：2013-01-31T08:51:32.450
> 
> 标签：xcode, macos, unix, build

是否可以从 Xcode 中的构建脚本中读取预处理器宏？

在我的预编译头文件中，我定义了一个宏，如：

```
#define APIKEY 123abc 
```

在我的构建脚本中，我想访问这个宏作为一个变量，以便我可以用它做一些事情，例如：

```
echo $APIKEY > outputfile 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-14T05:46:57.913

有一种更强大的方法可以做到这一点。

在执行*运行脚本***构建**阶段时，Xcode 会在一个名为`GCC_PREPROCESSOR_DEFINITIONS`.

对于需要从脚本访问的定义，请在**Project Build Settings**中定义它们。如果您将这些从源代码中移出，但需要保持源代码的稳健性（例如，您也在 Xcode 项目之外编译此源代码），您可以选择保留源代码定义，用`#ifndef`/包裹`#endif`- 从而使它们成为被动默认值。

现在，要将这些作为脚本变量检索，只需评估*Run Script*构建阶段的内容，如下所示`GCC_PREPROCESSOR_DEFINITIONS`：

 *```
eval "${GCC_PREPROCESSOR_DEFINITIONS}" 
```

如果您想确保脚本中有一个默认值，对于一个或多个特定变量，请在此评估之上定义它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:09:56.513

是的，这是可能的，但是您需要搜索它所在的头文件`define`才能找到它。您可以使用许多实用程序来做到这一点，但这可能是最直接的，并且可以在大多数琐碎的情况下工作（如果常量是字符串常量，您可能需要更多）`grep`：`awk`

```
#!/bin/sh

APIKEY=$(grep 'define.*APIKEY' file.h | awk '{print $3}') 
```*

# android - 我的对话框视图中有额外的背景，我该如何删除或操作它？

> ID：14621725
> 
> 赞同：2
> 
> 时间：2013-01-31T08:51:39.127
> 
> 标签：android, background, dialog, transparent

这是welcome_dialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/toast_layout"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:background="@drawable/dialog_background" >

<TextSwitcher
    android:id="@+id/toast_detail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"       
    android:text=""/>
</LinearLayout> 
```

这是 dialog_background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient
    android:startColor="#ffffffff"
    android:endColor="#00000000"
    android:angle="45"/>
<padding android:left="20dp"
    android:top="0dp"
    android:right="20dp"
    android:bottom="0dp" />
<corners android:radius="8dp" />
</shape> 
```

结果位于另一个我无法操作的矩形视图之上。抱歉，我不能发布结果图片，因为我还不能发布图片。

我正在尝试创建一个具有透明背景的对话倒计时计数器。我已经尝试了几种方法，但总是有额外的白色背景，我不知道那个视图来自哪里。请让我知道我做错了什么。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:18:51.643

在有问题的代码中，我使用了 alertDialogBu​​ilder，我认为这是有背景的视图（如果我错了，请纠正我）。我在这上面试过这条线，但它没有用：

```
 dialog.getWindow().setBackgroundDrawable(new ColorDrawable(0)); 
```

最终，我找到了这个教程：[http:](http://www.mkyong.com/android/android-custom-dialog-example/) //www.mkyong.com/android/android-custom-dialog-example/ 重写了我的对话框创建，瞧！我可以使用上面的代码行删除背景。

# iphone - 在 iPhone 中定义一个具有全局函数的类

> ID：14621726
> 
> 赞同：-1
> 
> 时间：2013-01-31T08:51:42.013
> 
> 标签：iphone, objective-c

我正在尝试在 iPhone 上制作一个应用程序，因为我是新手，所以我需要一些关于这个问题的信息。

我的课很少

```
Class 1
Class 2
Class 3
...
Class 10 
```

我有一个新的 NSObject 类“实用程序”。在这个类中，我想定义一些函数，比如

比方说，传递一个 NSMutableDictionary 并计算平均值

```
-(void) calculateAvg:(NSMutableDictonary *)myDic
-(void) calculateMile:(NSMutableDictonary *)myDic
-(void) calculateAnythingElse:(NSMutableDictonary *)myDic 
```

现在这些是将在整个应用程序类中使用的函数，从 1 到 10。我没有将这些函数放在每个类中，而是创建了这个实用程序函数。在java中我可以做到这一点

```
Utilities newUtil = new Utilties();
newUtil.callFunction(); 
```

但是，我怎么能在我的 iPhone 中做到这一点，如果这是单例集的工作，我有点困惑？或者我应该使用常规方法

```
Utilities newUtil = [Utilties alloc] init]; 
```

然后调用函数。

现在这个类将在整个应用程序类中一次又一次地使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:57:55.943

您可以按照以下步骤进行：

1) 创建您已经完成的 NSObject 类“实用程序”。

2）添加您希望它作为全局的所有方法。但是使用“+”而不是“-”，如下所示：

```
+(void) calculateAvg:(NSMutableDictonary *)myDic
+(void) calculateMile:(NSMutableDictonary *)myDic
+(void) calculateAnythingElse:(NSMutableDictonary *)myDic 
```

3）首先在“.pch”文件中导入“Utilities.h”类。

4) 就是这样。完毕。

您可以在整个应用程序中访问上述所有方法，如下所示：

```
[Utilities calculateAvg:<dictionary_object>]; 
```

意味着，无需创建对象。您只能通过类名访问静态方法。

希望你有一个想法。

快乐编码！

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:57:12.387

只需将这些实用方法设为*类方法即可*：

```
+(void) calculateAvg:(NSMutableDictonary *)myDic
+(void) calculateMile:(NSMutableDictonary *)myDic
+(void) calculateAnythingElse:(NSMutableDictonary *)myDic 
```

只要它们不需要实例变量来操作，它就会起作用。然后可以像这样使用它们：

```
[Utilties callFunction]; 
```

请注意，这里不涉及单例；单例是可以选择包含实例变量的类的实例，并且只能存在单个实例。您正在寻找的是一个具有类方法的类，它有效地使它们与 C 函数相同，因为它们不需要实例变量，并且只是将这些函数分组为一个可管理单元的一种方式。

# magento - Magento - 对产品集合进行排序

> ID：14621728
> 
> 赞同：0
> 
> 时间：2013-01-31T08:51:46.683
> 
> 标签：magento, sorting, collections, filter, product

我有一个需要过滤的产品集合。为此，我覆盖了“Mage_Catalog_Block_Product_List”并具有以下代码：

```
$collection = parent::_getProductCollection();
$collection->addAttributeToFilter('language', array('in' => 
array('B','C','E')));
$collection->addAttributeToSort('language', 'DESC');

return $this->_productCollection; 
```

在前端这以 E,C,B 的形式排序

如果我将属性设置为“ASC”，则排序的形式为 B、C、E

但是我需要的是指定 E,B,C 的顺序

有什么办法可以做到这一点？

谢谢你的帮助。

更新

我试过 fin_Set 并查看了您发送的链接。我试过代码：

```
 $collection = parent::_getProductCollection();
 $collection->addAttributeToFilter('language', 
 array('finset'=>'E','C,E,B'));

return $this->_productCollection; 
```

但是，这仅显示设置为“E”的产品我也尝试了您提供的代码，但我收到了一个空的产品列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:34:10.547

试试这个：

```
parent::_getProductCollection()
        ->addAttributeToFilter('language', array('finset'=>'B,C,E'));

return $this->_productCollection; 
```

`finset`映射到 MySQL 的[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)。

# json - (AS3) 无法在 Localhost(IIS) 中读取 JSON

> ID：14621731
> 
> 赞同：0
> 
> 时间：2013-01-31T08:52:00.857
> 
> 标签：json, actionscript-3, iis, localhost

我正在尝试在使用 Localhost(IIS) 时在 AS3 中加载 JSON 文件。如果我在本地运行文件，它工作得很好。但是当我用 Localhost 打开 swf 时，它不会无缘无故地加载 JSON 文件......应该给予权限，因为我能够从同一个文件夹加载图像......任何想法？

瑞士法郎代码

```
import com.adobe.serialization.json.JSON;
var textytext:TextField=new TextField()
addChild(textytext)
var myRequest:URLRequest = new URLRequest("TESTJSON.json");
var myLoader = new URLLoader();
myLoader.addEventListener(Event.COMPLETE, onload);
myLoader.load(myRequest);
var myData:Object
function onload(evt:Event):void
{
    textytext.text="nichts"
    myData= JSON.decode(myLoader.data);
    textytext.text=String(myData.ReadMePlease)
} 
```

和 JSON 文件

```
{
"ReadMePlease":"Awww yeah"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:21:04.433

尝试始终在 Flash Global Settigns ( [http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html) ) 允许您也可以设置[allowdomain](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Security.html)

# android - 当有新版本的应用程序时，谷歌播放是否提供任何API

> ID：14621735
> 
> 赞同：0
> 
> 时间：2013-01-31T08:52:23.527
> 
> 标签：android, api, google-play

我知道 Android 会在新版本的应用程序上显示通知，但希望在有新更新时明确向用户显示谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:29:07.537

您应该实现自己的服务，该服务会不断检查服务器以获取应用程序的最新版本。如果设备安装的版本低于服务器中提到的版本，您可以提示用户有可用的更新。

# c# - 无法使用 Embedded Db 访问 RavenDB Management Studio

> ID：14621740
> 
> 赞同：4
> 
> 时间：2013-01-31T08:52:45.690
> 
> 标签：c#, ravendb, ravendb-studio, ravendb-http

我使用以下代码运行并初始化一个实例：

```
 EmbeddableDocumentStore db = new EmbeddableDocumentStore();
        db.DataDirectory = @"C:\RavenDb\";
        db.Configuration.HostName = "localhost";
        db.Configuration.Port = 8080;
        db.UseEmbeddedHttpServer = true;
        db.Initialize(); 
```

初始化并保持应用程序处于调试模式后，我尝试通过“localhost:8080”访问浏览器上的管理工作室，但请求超时/没有任何反应。我尝试了不同的端口，我以管理员模式启动 VS2012。我通过 Nuget 下载了最新版本。我在做什么错/没有看到这里？

谢谢

编辑：经过几个建议，我尝试了以下代码，仍然无济于事：

```
 NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(8080);
        EmbeddableDocumentStore db = new EmbeddableDocumentStore
        {
            RunInMemory = true,
            DataDirectory = @"C:\RavenDb\",
            UseEmbeddedHttpServer = true
        };

        db.Initialize(); 
```

此外，在运行控制台应用程序时，我在输出窗口中收到以下警告消息：

导致：无法在部分 'Raven.Database.Server.Security.OAuth 上设置 import 'Raven.Database.Server.Security.OAuth.OAuthClientCredentialsTokenResponder.AuthenticateClient (ContractName="Raven.Database.Server.Security.OAuth.IAuthenticateClient")' .OAuthClientCredentialsTokenResponder'。元素：Raven.Database.Server.Security.OAuth.OAuthClientCredentialsTokenResponder.AuthenticateClient (ContractName="Raven.Database.Server.Security.OAuth.IAuthenticateClient") --> Raven.Database.Server.Security.OAuth.OAuthClientCredentialsTokenResponder --> AssemblyCatalog (Assembly="Raven.Database, Version=2.0.0.0, Culture=neutral, PublicKeyToken=37f41c7f99471593")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:19:21.750

这是 nuget 包的一种解决方案

```
<package id="RavenDB.Embedded" version="2.0.2230" targetFramework="net45" /> 
```

确保端口未在使用中

```
NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(8080);
var documentStore = new EmbeddableDocumentStore
{
    RunInMemory = true,
    DataDirectory = @"C:\RavenDb\",
    UseEmbeddedHttpServer = true
};

documentStore.Initialize(); 
```

# java - 在“mvn install”期间显示一个警告

> ID：14621741
> 
> 赞同：0
> 
> 时间：2013-01-31T08:52:48.330
> 
> 标签：java, maven, osgi, aem, osgi-bundle

这些天我正在学习 Apache Sling、Apache felix、OSGI。每当我运行命令**mvn clean install**。在构建任何项目之后。它显示一个警告。你能告诉我这背后的原因吗？![在此处输入图像描述](../Images/cd704b7144254db95ed305b8701ae4b2.png)

我正在实施[本](http://in-the-sling.blogspot.in/2008/08/basic-osgi-service-for-sling.html)教程。

在**pom.xml**的第 25 行，我添加了这些行。

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
            <source>1.5</source>
            <target>1.5</target>
        </configuration>
    </plugin> 
```

**已编辑**

依赖和插件有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:57:57.850

您应该为您的插件添加一个版本以使构建可靠（否则如果 maven 获取一个从不版本并在将来使用它，事情可能会改变）

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.0</version>
    <configuration>
        <source>1.5</source>
        <target>1.5</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:57:24.810

在插件定义中添加版本：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.0</version>
    <configuration>
        <source>1.5</source>
        <target>1.5</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:57:42.157

警告是关于插件版本，而不是它的配置。

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
            <source>1.5</source>
            <target>1.5</target>
        </configuration>
      </plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:46:29.320

@jhamb 当您想创建一个捆绑包时，您需要将打包类型更改为捆绑包而不是 pom。我认为这将解决您的问题并添加 maven bundle 插件。

# php - Backbone.js 和 codeIgniter

> ID：14621742
> 
> 赞同：0
> 
> 时间：2013-01-31T08:52:50.587
> 
> 标签：php, codeigniter, backbone.js

我正在使用[codeigniter](http://ellislab.com/codeigniter)框架来使用我的服务器端逻辑，并且我想使用[backbonejs](http://backbonejs.org/)来管理客户端逻辑。

我阅读了很多关于它的内容，并且有很多方法可以实现这一点，我想使用以下设计：

*   在**CI**中，每个应用程序只保留一个视图。这将是**BackboneJS**推送的内容的占位符。**BackboneJS**将从该页面加载。
*   在**BackboneJS**中，管理所有应用程序客户端，并查询**CI**控制器（如果需要，可能会调用**CI**模型）以获取动态内容。

使用它们的最佳方法是什么？我的设计是否以某种方式破坏了**MVC**设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:28:10.700

前提：我使用 Yii 而不是 CI，但我认为它们的工作方式相似。

我在 Yii 中有一个索引视图，其中包含我的应用程序的主要 HTML 结构（菜单、侧边栏、主要内容等）和一个管理 REST 请求的主控制器，使用 Yii 的模型来检索信息。

在客户端 Backbone 处理所有事情，每条路由都会向类似 REST 的 api 发出请求，最终视图由客户端呈现，并使用从服务器以 JSON 格式返回的数据。

我不知道这是否是更好的方法，但经过一番努力后，我让它开始工作，我对此感到非常高兴。

# facebook - Android 中所有即将到来的 Facebook 好友生日列表

> ID：14621749
> 
> 赞同：0
> 
> 时间：2013-01-31T08:53:24.833
> 
> 标签：facebook, android-facebook

如何按即将到来的喜欢*的顺序获取 Facebook 朋友的生日*：使用当前日期等**在列表中显示接下来即将到来的生日。**

我仍然以 1 月到 12 月的形式过生日，让朋友在一月份的生日排在首位，在十二月的生日排在最末。

我也*得到了一些朋友，那些生日在一月份已经过去了，比如生日是在 1 月 2 日或 1 月 28 日*，

现在我只想查看*下一个即将到来的生日列表*，那些在列表底部去世的人......

像这儿：

[https://itunes.apple.com/in/app/birthday-sweet-birthday-calendar/id367346406?mt=8](https://itunes.apple.com/in/app/birthday-sweet-birthday-calendar/id367346406?mt=8)

[https://play.google.com/store/apps/details?id=com.scompa.birthdayreminder&hl=en](https://play.google.com/store/apps/details?id=com.scoompa.birthdayreminder&hl=en)

他们在列表的顶部和底部显示了最近...

我仍然在使用这个查询：

```
 String query = "select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by birthday_date"; 
```

也试过这个代码：

```
 Calendar c = Calendar.getInstance(); 
    int month = c.get(Calendar.MONTH)+1;

    String query = "select name, birthday, uid, pic_square from user where uid in " +
    "(select uid2 from friend where uid1=me())AND birthday_date >= '" + month + "/01' AND birthday_date <= '" + month + "/31' ORDER BY birthday_date ASC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:04:17.297

您可以根据生日对朋友列表进行排序。喜欢，

```
SELECT uid, name, birthday_date FROM user
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me())
AND birthday_date >= CURRENT_DATE
AND birthday_date <= LAST_DATE
ORDER BY birthday_date ASC 
```

您可以在此处`CURRENT_DATE`输入当前系统日期。因此，这将显示当前日期即将到来的生日。代替`LAST_DATE`，您可以使用要显示即将到来的生日的日期。

# php - 将上传的图片保存在不同大小的服务器文件夹中

> ID：14621752
> 
> 赞同：1
> 
> 时间：2013-01-31T08:53:52.093
> 
> 标签：php, image, upload

这是我的代码，我已经尝试了几个小时将上传的图像保存在不同大小的服务器文件夹中。但是，图像没有得到保存，也无法找到出错的地方。以前，我曾经使用二进制编写，如下面的第二个代码部分，通过以某种方式从我的移动端获取二进制数据（图片是从相机拍摄并从移动端即时发送的）。但随着这增加数据。我决定甚至使用从我的移动端上传带有多部分类型文件上传的图像文件。

```
<?php

$imagefile = $_FILES["uploadphoto1"]["name"];
$errors=0;
$uploadPath  = __DIR__."/contents/uploads";
define ("MAX_SIZE","4000");

$imagename = "testingimage";

if($imagefile)
{
    $filename = stripslashes($_FILES['uploadphoto1']['name']);
    $extension = getExtension($filename);
    $extension = strtolower($extension);

if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif"))
    {
        echo ' Unknown Image extension ';
        $errors=1;
    }
    else
    {

        $file1 = $_FILES['uploadphoto1']['tmp_name'];

        thumbnail_image($file1, "640", "480",$uploadPath.$imagename);
        thumbnail_image($file1, "480", "340",$uploadPath.$imagename."_preview");

    }
}else{
    echo "No file is inserted>>>>>>>>>";
}

function thumbnail_image($original_file_path, $new_width, $new_height, $save_path="")
{
    $imgInfo = getimagesize($original_file_path);
    $imgExtension = "";

    switch ($imgInfo[2])
    {
        case 1:
            $imgExtension = '.gif';
            break;

        case 2:
            $imgExtension = '.jpg';
            break;

        case 3:
            $imgExtension = '.png';
            break;
    }

    if ($save_path=="") $save_path = "thumbnail".$imgExtension ;

    // Get new dimensions
    list($width, $height) = getimagesize($original_file_path);

    // Resample
    $imageResample = imagecreatetruecolor($new_width, $new_height);

    if ( $imgExtension == ".jpg" )
    {
        $image = imagecreatefromjpeg($original_file_path);
    }
    else if ( $imgExtension == ".gif" )
    {
        $image = imagecreatefromgif($original_file_path);
    }
    else if ( $imgExtension == ".png" )
    {
        $image = imagecreatefrompng($original_file_path);
    }

    imagecopyresampled($imageResample, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

    if ( $imgExtension == ".jpg" )
        imagejpeg($imageResample, $save_path.$imgExtension);
    else if ( $imgExtension == ".gif" )
        imagegif($imageResample, $save_path.$imgExtension);
    else if ( $imgExtension == ".png" )
        imagepng($imageResample, $save_path.$imgExtension);

}

function getExtension($str) {

    $i = strrpos($str,".");
    if (!$i) { return ""; }

    $l = strlen($str) - $i;
    $ext = substr($str,$i+1,$l);
    return $ext;
}

if(isset($_POST['Submit']) && !$errors)
{
    echo "Image Uploaded Successfully!";

}else{
    echo "Image uploading failed>>>>>>>";
     }

?> 
```

但是当我用来获取二进制数据时，下面的函数使用相同的函数，但是这个代码根本不包含在我现在的代码中：

```
$file1   = tempnam($uploadPath, 'image1');
$fp1     = fopen($file1, 'wb');
fwrite($fp1, $binary1);// Here I have binary data of image. 
fclose($fp1);

thumbnail_image($file1, "640", "480",$uploadPath.$imagelastid.".jpg");

thumbnail_image($file1, "480", "340",$uploadPath.$imagelastid."_preview.jpg"); 
```

如果有人能帮助我解决这个问题并让我走上正轨，我将不胜感激。

我收到此**错误**：

```
getimagesize(): Read error! in C:\xampp\htdocs\MOBILE_PHP\imagephptest.php on line 48 
```

其中第 48 行是 --> $imgInfo = getimagesize($original_file_path);

有时我会在同一行收到此错误。

`getimagesize(): Filename cannot be empty in C:\xampp\htdocs\MOBILE_PHP\imagephptest.php`在第 44 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:06:11.463

```
list($width, $height, $type, $attr) = getimagesize($original_file_path);
$widthheight="$width X $height"; 
```

这将给出图像的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:11:17.770

我怀疑问题出在这两行：

```
$file1 = $_FILES['uploadphoto1']['tmp_name'];
$file1   = tempnam($uploadPath, 'image1'); 
```

您获取上传图像的临时名称并将其保存在 $file1 中，然后立即重写该值并创建临时文件。之后，你将它传递给你的函数，当你尝试

```
getimagesize($original_file_path); 
```

它失败了，因为 $original_file_path 甚至不是图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:03:26.940

首先，我建议您在测试 $_FILES["uploadphoto1"]['size']>0 后开始该过程，而不是名称或其他任何内容。另外，我建议您在开始使用它之前在函数中测试 $original_file_path。还可以尝试在函数请求时打印/回显 $original_file_path 以查看您得到的结果。

作为旁注，如果您可以使用 Imagick，请使用它，您不需要那么多代码。

# shell - Vim + iTerm2 颜色问题

> ID：14621753
> 
> 赞同：1
> 
> 时间：2013-01-31T08:53:52.537
> 
> 标签：shell, vim, terminal, macvim, iterm

我对正确的 Vim 配置有问题。我正在使用最新版本的 Vim 以及最新版本的 iTerm2。

我试图让日晒配色方案工作，但到目前为止还没有运气。

在这里，您可以看到带有（左上、右上、左下、右下）iTerm2、Terminal.app、MacVim 和我的 iTerm2 设置的图像。

![维姆](../Images/bdfa45865c32366f73ddc6b088e7a4a3.png)

这里是我的[.vimrc的链接](http://pastebin.com/ynND8LRh)

感谢您调查它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:16:09.690

您需要更改 iTerm 中的预设颜色。有太阳能预设：[https ://github.com/altercation/solarized/tree/master/iterm2-colors-solarized](https://github.com/altercation/solarized/tree/master/iterm2-colors-solarized)

我认为这与 iTerm 颜色主题的工作方式有关。你的 .vimrc 很好。

# java - guava-11.0.1.jar 和 Maven 插件用于 Eclipse

> ID：14621756
> 
> 赞同：1
> 
> 时间：2013-01-31T08:54:03.563
> 
> 标签：java, eclipse, maven, guava, caliper

我在 Eclipse 中创建了 maven 项目并添加了一些依赖项。

以下是完整的依赖项列表：

```
<dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.google.caliper</groupId>
        <artifactId>caliper</artifactId>
        <version>0.5-rc1</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.7.1</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.7.1</version>
    </dependency>
</dependencies> 
```

然后我运行 Maven 安装并上传了所有 nesssery 库。

下次我收到以下消息：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building mywebapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ mywebapp ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory D:\WORK_SPASE\mywebapp\src\main\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.0.2:compile (default-compile) @ mywebapp ---
[INFO] Compiling 1 source file to D:\WORK_SPACE\mywebapp\target\classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.785s
[INFO] Finished at: Thu Jan 31 04:13:10 VET 2013
[INFO] Final Memory: 4M/121M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project mywebapp: Compilation failure
[ERROR] error: error reading C:\Users\User1\.m2\repository\com\google\guava\guava\11.0.1\guava-11.0.1.jar; invalid LOC header (bad signature)
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

当我尝试上课时，我得到了：`Exception in thread "main" java.lang.NoClassDefFoundError: com/google/common/base/Splitter`

请给我一个建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:10:06.733

首先我看到你有一个错误：

> 阅读 C:\Users\User1.m2\repository\com\google\guava\guava\11.0.1\guava-11.0.1.jar; 无效的 LOC 标头（错误的签名）

这可能是由于下载 lib 过程中的失败引起的。解决方案是删除文件夹 C:\Users\User1.m2\repository\com\google 并重试构建。

此外，我看到您使用的是非常旧版本的 maven-compiler-plugin (2.0.2)，这使我得出结论，您没有配置 maven-compiler-plugin，这意味着您使用的是 java 1.4，但是您至少需要1.5。你必须像这样配置你的 maven-compiler-plugin：

```
<build>
  <pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </pluginManagement>
</build> 
```

也许您必须更改为1.5。

# perl - 比较两个文件，写入更新/删除/插入输出文件

> ID：14621762
> 
> 赞同：0
> 
> 时间：2013-01-31T08:54:21.403
> 
> 标签：perl, csv

我正在编写一个脚本，该脚本将检查基于 2 个文件所做的更改。这些文件共享一个共同的 ID，如果匹配，则必须比较 5 个元素（包括基本信息、地址、邮政编码等）。如果一个或多个元素不匹配，则应将第二个文件中的更改推送到第一个文件的末尾（因此之后我可以轻松查看所做的更改）

第一个文件是基础，另一个文件是一个月后的，包含三个方面的更改：我已经介绍了第一个。如果 ID 不匹配，则应将其写入新文件。这可能以两种方式发生：新文件中的 id 不再存在（因此它可能已被删除），这将是第二个输出文件，第三个文件是旧文件中的 id 不存在的位置（其中表示它是新的）。

我一直把精力集中在第一部分，元素的比较上。比较元素并不难，但我似乎无法弄清楚如何将第二个文件中的元素正确添加到现有数组的末尾。当我使用 push 变量时，它不会在最后添加，而是显示在下一行，所以我认为中间有一个新行，但我用 chomp 删除了它。那么为什么会这样呢？

第二个问题：如何轻松完成第二部分，检查新/旧 ID 并写入他们自己的文件。

这就是我现在走了多远（不远）。这只是比较部分，仍在研究如何合并编写包含旧（已删除）/新条目的其他 2 个文件。我如何尝试得到它：

坏的：

```
 1204;Hotel New York;Street 4;AABBCC;New York;12345679;www.hotelnewyork.com;52.3662946;3.876277;5365;3
 783;Hotel Amsterdam;Damstraat 10;1234 AB;Amsterdam;234567890;www.hotelamsterdam.com;52.171902;4.28061;5367;4
 ;Hotel Atsterdem
 ;Damstraat 20
 1692;Hotel Berlin;Strasse 4;123456;Berlin;4567890;www.hotelberlin.com;43.218571;6.862009;5368;3
 2300;Hotel Barcelona;Avenue 3;AAA 123;Barcelona;3566677;;54.171902;6.102174;5371;4
 ;Hotel Barca 
```

好的：

```
1204;Hotel New York;Street 4;AABBCC;New York;12345679;www.hotelnewyork.com;52.3662946;3.876277;5365;3
783;Hotel Amsterdam;Damstraat 10;1234 AB;Amsterdam;234567890;www.hotelamsterdam.com;52.171902;4.28061;5367;4;Hotel Atsterdem;Damstraat 20
1692;Hotel Berlin;Strasse 4;123456;Berlin;4567890;www.hotelberlin.com;43.218571;6.862009;5368;3
2300;Hotel Barcelona;Avenue 3;AAA 123;Barcelona;3566677;;54.171902;6.102174;5371;4;Hotel Barca 
```

这是我一直在使用的脚本，我知道这可能不是到达那里的最复杂的方式，但恐怕我不能做得更好。

```
 #!/usr/bin/perl
 use strict;
 use warnings; 

 if ($#ARGV != 4){
print "4 namen opgeven\n";
exit;
} 

 my $inputfile1=$ARGV[0];
 my $inputfile2=$ARGV[1];
 my $outputfile1=$ARGV[2];
 my $outputfile2=$ARGV[3];
 my $outputfile3=$ARGV[4];

 open(INFILE1,$inputfile1) || die "Not found :$!\n";
 open(INFILE2,$inputfile2) || die "Not found :$!\n";
 open(OUTFILE_1,">$outputfile1") || die "In use :$!\n";
 open(OUTFILE_2,">$outputfile2") || die "In use :$!\n";
 open(OUTFILE_3,">$outputfile3") || die "In use :$!\n";

 my $i = 0;
 my $j = 0;
 my $newline = 0;

 my @infile1=<INFILE1>;
 my @infile2=<INFILE2>;

 foreach ( @infile1 ){
    s/"//g;
    my @elements = split(";",$infile1[$i]);
    chomp(@elements);
    $j = 0;

    foreach ( @infile2 ){
        s/"//g;
        my @loopelements = split(";",$infile2[$j]);
        #chomp(@loopelements);
        $newline = 0;

        if ($elements[10] == $loopelements[10]){

            $newline = 1;

            if ($elements[1] ne $loopelements[1]){
                push(@elements, $loopelements[1]."\n");
                }
            if ($elements[2] ne $loopelements[2]){
                push(@elements, $loopelements[2]."\n");
                }                   
            if ($elements[3] ne $loopelements[3]){
                push(@elements, $loopelements[3]."\n");             
                }                   
            if ($elements[4] ne $loopelements[4]){
                push(@elements, $loopelements[4]."\n"); 
                }                   
            if ($elements[5] ne $loopelements[5]){
                push(@elements, $loopelements[5]."\n");
                }   
            if ($elements[6] ne $loopelements[6]){
                push(@elements, $loopelements[6]."\n");
                }               
            } 

        $j = $j+1;
        }

if ($newline == 0){
    $elements[11] = $elements[11]."\n";
    }       

@elements = join(";",@elements);    
print OUTFILE_1 "@elements";
$i = $i+1;
}

 close(INFILE1);
 close(INFILE2);
 close(OUTFILE_1);
 close(OUTFILE_2);
 close(OUTFILE_3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:58:59.277

听起来您正在做的事情将由数据库更容易处理。我会考虑改变你的设计。从长远来看，这会让你的生活更轻松。

安装 MySQL 之类的东西并不难。但是您甚至不必这样做就可以将数据库与 Perl 一起使用。有几个完全独立的解决方案可以在 Perl 中为您提供数据库。看[`DBD::SQLite`](http://search.cpan.org/~msergeant/DBD-SQLite-0.31/lib/DBD/SQLite.pm)，例如。您需要做的就是安装一个 Perl 模块，然后您就拥有了一个完整的数据库。

也许您出于某种原因（例如您的老板......）而被这种格式卡住了。但即使您必须以这种格式保存文件，您*仍然*可以像使用数据库一样使用它们。 [`DBD::CSV`](http://search.cpan.org/~hmbrand/DBD-CSV-0.38/lib/DBD/CSV.pm)正是这样做的！

# c# - 如何只阻塞当前任务，而不阻塞同一线程上的其他任务？

> ID：14621768
> 
> 赞同：0
> 
> 时间：2013-01-31T08:54:38.853
> 
> 标签：c#, multithreading, synchronization

C# 中是否有办法在指定的毫秒数后等待特定任务返回或超时，而不会阻止在同一线程上运行的所有其他任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:57:55.417

假设您正在单独启动任务，而不是使用 Parallel.For/ForEach/Invoke 等，即您正在获取一个 Task 对象，然后是这样的：

```
Task taskIWantToWaitFor = Task.Factory.Start(....);
// Other code
taskIWantToWaitFor.Wait(millisecondsTimeout)
// All other tasks continue in the background 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-11-15T09:50:27.920

我参考了[@Dorus](https://stackoverflow.com/users/402027/dorus)关于这个主题[的答案：](https://stackoverflow.com/a/28413138/14793387)

TL;博士：

```
Task delay = Task.Delay(5000);
await delay; 
```

# svn - svn中的嵌套树干用于模块？

> ID：14621774
> 
> 赞同：2
> 
> 时间：2013-01-31T08:54:59.847
> 
> 标签：svn, directory-structure, modularity

假设我正在开发一个模块化的产品 A，所以我有模块 B1、B2、B3，它们都可以自己构建。

我有这个SVN结构

```
svn  
    |-----branches  
    |-----tags  
    |-----trunk
            |-----A
                  |----B1
                       |-----branches
                       |-----tags
                       |-----trunk 
```

B2 和 B3 也是如此。

这是构建 SVN 文件夹的可接受方式吗？或者 B1、B2、B3 应该在 A 的后备箱文件夹之外吗？（这样它们就不会成为标签等的一部分）

您将如何构建这样的项目？- 你有一个产品可以用零个或多个模块构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:01:53.547

外面，肯定的。就像你提到的，标签中的树干是什么意思？结构为：

```
svn 
  |--- A
       |--- trunk
       |--- tags
       |--- branches
  |--- B1
       |--- trunk
     .... 
```

并使用 SVN 外部或您的包装系统来拉入模块。或者，如果模块和主产品总是一起构建和使用，那么

```
svn 
  |---- A
       |--- trunk
              |--- B1
              |--- B2 
```

没有子项目的主干/分支/标签结构就可以了。

# batch-file - 如何使用批处理文件从文件名中提取子字符串？

> ID：14621781
> 
> 赞同：-1
> 
> 时间：2013-01-31T08:55:13.910
> 
> 标签：batch-file

我目前正在使用批处理文件来处理具有时间戳 ( `AFL-YYYYMMDHHMMSS-BKS-0.910-11`.) 的文件名。例子：

```
AFL-20130131144045-BKS-0.910-11 
```

我想从这些文件名中提取一个子字符串，以保留`BKS`" 和`.910-11`（.910-11 是文件扩展名）。

如何使用批处理文件实现此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:24:32.683

干得好

```
@echo off
for %%x in (AFL-*-BKS-*.*-*) do (
for /f "delims=-. tokens=3,5-6" %%a in ("%%x") do (
echo %%a .%%b-%%c
)
)
pause >nul 
```

在这里，我刚刚将结果打印到屏幕上，你想用它做什么取决于你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:57:09.827

复制到 BKS 910-11 后重命名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:31:30.063

将代码粘贴到记事本中并将其保存在bat文件中并尝试运行

复制 C:\mydir*BKS*910-11* D:\newdir

# r - 如何使 data.frame 中的组等长？

> ID：14621795
> 
> 赞同：7
> 
> 时间：2013-01-31T08:56:06.420
> 
> 标签：r, dataframe

我有这个data.frame：

```
df <- data.frame(id=c('A','A','B','B','B','C'), amount=c(45,66,99,34,71,22))

id | amount 
-----------
A  |   45   
A  |   66   
B  |   99
B  |   34 
B  |   71
C  |   22 
```

我需要扩展它，以便`by`data.frame 中的每个组的长度相同（用零填充），如下所示：

```
id | amount 
-----------
A  |   45   
A  |   66  
A  |   0     <- added 
B  |   99
B  |   34 
B  |   71
C  |   22
C  |   0     <- added 
C  |   0     <- added 
```

这样做最有效的方法是什么？

**笔记**

*对我得到的实际*100 万行 data.frame提供的一些解决方案进行基准测试：

```
 plyr   | data.table  |  unstack
          -----------------------------------
Elapsed:   139.87s  |    0.09s    |   2.00s 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:06:00.547

我确定有一个基本的 R 解决方案，但这是一个在包中使用`ddply`的解决`plyr`方案

```
library(plyr)
##N: How many values should be in each group
N = 3
ddply(df, "id", summarize, 
      amount = c(amount, rep(0, N-length(amount)))) 
```

给出：

```
 id amount
1  A     45
2  A     66
3  A      0
4  B     99
5  B     34
6  B     71
7  C     22
8  C      0
9  C      0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:07:35.880

一种使用方式`data.table`

```
df <- structure(list(V1 = structure(c(1L, 1L, 2L, 2L, 2L, 3L), 
          .Label = c("A  ", "B  ", "C  "), class = "factor"), 
          V2 = c(45, 66, 99, 34, 71, 22)), 
          .Names = c("V1", "V2"), 
          class = "data.frame", row.names = c(NA, -6L))

require(data.table)
dt <- data.table(df, key="V1")

# get maximum index
idx <- max(dt[, .N, by=V1]$N)

# get final result
dt[, list(V2 = c(V2, rep(0, idx-length(V2)))), by=V1]

#     V1 V2
# 1: A   45
# 2: A   66
# 3: A    0
# 4: B   99
# 5: B   34
# 6: B   71
# 7: C   22
# 8: C    0
# 9: C    0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T09:36:44.733

这是在基础 R 中使用`unstack`and的另一种方式`stack`。

```
# ensure character id col
df <- transform(df, id=as.character(id))
# break into a list by id
u <- unstack(df, amount ~ id)
# get max length
max.len <- max(sapply(u, length))
# pad the short ones with 0s
filled <- lapply(u, function(x) c(x, numeric(max.len - length(x))))
# recombine into data.frame
stack(filled)

#   values ind
# 1     45   A
# 2     66   A
# 3      0   A
# 4     99   B
# 5     34   B
# 6     71   B
# 7     22   C
# 8      0   C
# 9      0   C 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T09:09:49.830

这个怎么样？

```
out <- by(df, INDICES = df$id, FUN = function(x, N) {
  x <- droplevels(x)
  lng <- nrow(x)
  dif <- N - lng
  if (dif == 0) return(x)
  make.list <- lapply(1:dif, FUN = function(y) data.frame(id = levels(x$id), amount = 0))
  rbind(x, do.call("rbind", make.list))
  }, N = max(table(df$id))) # N could also be an integer
do.call("rbind", out)

    id amount
A.1  A     45
A.2  A     66
A.3  A      0
B.3  B     99
B.4  B     34
B.5  B     71
C.6  C     22
C.2  C      0
C.3  C      0 
```

# amazon-s3 - 备份到 S3：符号链接

> ID：14621798
> 
> 赞同：9
> 
> 时间：2013-01-31T08:56:18.910
> 
> 标签：amazon-s3, backup, amazon, s3cmd

我现在正试图弄清楚如何将一些数据备份到 S3。

我们有一个使用 rsnapshot 实现的本地备份系统，并且运行良好。我们正在尝试使用带有 --sync 选项的 s3cmd 来模仿 rsync 来传输文件。

我们遇到的问题是符号链接不是作为符号链接创建的，它似乎是将它们解析为物理文件并上传。有人对为什么会发生这种情况有任何建议吗？

我想知道我是否遗漏了一些明显的东西，或者 S3 不适合这种操作。我可以设置一个 EC2 实例并附加一些 EBS，但最好使用 S3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T22:15:02.720

Amazon S3 本身没有符号链接的概念，这就是我怀疑 s3cmd 上传物理文件的原因。它是 S3 的限制，而不是 s3cmd。

我假设您需要复制符号链接本身吗？如果是这种情况，您可以使用符号链接对您的目录进行 gzip/tar 并上传吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-02T13:48:41.657

S3 上没有可用的符号链接，但您可以使用谷歌的解决方案，该解决方案使用 S3 (FUSE) 创建基于文件系统。更多信息在这里：

[https://code.google.com/p/s3fs/wiki/FuseOverAmazon](https://code.google.com/p/s3fs/wiki/FuseOverAmazon)

和这里：

[http://tjstein.com/articles/mounting-s3-buckets-using-fuse/](http://tjstein.com/articles/mounting-s3-buckets-using-fuse/)

我希望它有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-17T17:44:05.600

在`-F, --follow-symlinks`使用`sync`. 这对我有用。

# java - HibernateException：代理句柄在数据库冲突错误后不再有效

> ID：14621801
> 
> 赞同：3
> 
> 时间：2013-01-31T08:56:26.953
> 
> 标签：java, spring, hibernate

我有循环来保存几个对象。在循环中调用服务方法并捕获异常。服务保存方法被注解为@Transactional，并且在内部进行休眠保存或更新调用。服务由 ApplicationContext 对象的 getBean 方法提供。我在循环之前只调用一次。

在循环中，在我捕获 oracle 约束违规异常之后：

> org.hibernate.exception.constraintviolationexception：ora-00001：违反了唯一约束（ccb.sys_c0017085）

我记录问题并尝试保存另一个对象。我得到的下一个例外是：

> org.hibernate.HibernateException：代理句柄不再有效

有时它在每个 ora 错误后仅发生一次，但有时它会针对更多对象重复（迭代）。

如何处理此异常以及如何使保存操作成为可能？

我正在使用 Spring 3.1.3 和 Hibernate 4.1.7。

[编辑] 一些代码示例：

```
@Service
public class ServiceForRecord {
    @Transactional
public Record saveRecord(Record record, String user) {
      Record obj = record;
      // some validation & seting internal values
      getHibernateTemplate().saveOrUpdate(obj)
      return obj;
    }
... 
```

在我的循环中我这样做：

```
//in params:
serviceClass = ServiceForRecord.class;
entityClass = Record.class;
saveMethod = "saveRecord";
//loop prepare
service = getApplicationContext().getBean(serviceClass);
serviceSave = serviceClass.getMethod("saveRecord", Record.class, String.class);
while (condition) {
entity =  BeanUtils.instantiate(entityClass);
//setup entity
serviceSave.invoke(service, entity, "testUser");
//catch error
} //end while 
```

[编辑] 堆栈跟踪：

```
PreparedStatementProxyHandler(AbstractProxyHandler).errorIfInvalid() line: 63   
PreparedStatementProxyHandler(AbstractStatementProxyHandler).continueInvocation(Object, Method, Object[]) line: 100 
PreparedStatementProxyHandler(AbstractProxyHandler).invoke(Object, Method, Object[]) line: 81   
$Proxy100.clearBatch() line: not available  
NonBatchingBatch(AbstractBatchImpl).releaseStatements() line: 163   
NonBatchingBatch(AbstractBatchImpl).execute() line: 152 
JdbcCoordinatorImpl.getBatch(BatchKey) line: 151    
SingleTableEntityPersister(AbstractEntityPersister).insert(Serializable, Object[], boolean[], int, String, Object, SessionImplementor) line: 2940   
SingleTableEntityPersister(AbstractEntityPersister).insert(Serializable, Object[], Object, SessionImplementor) line: 3403   
EntityInsertAction.execute() line: 88   
ActionQueue.execute(Executable) line: 362   
ActionQueue.executeActions(List) line: 354  
ActionQueue.executeActions() line: 275  
DefaultFlushEventListener(AbstractFlushingEventListener).performExecutions(EventSource) line: 326   
DefaultFlushEventListener.onFlush(FlushEvent) line: 52  
SessionImpl.flush() line: 1210  
SessionImpl.managedFlush() line: 399    
JdbcTransaction.beforeTransactionCommit() line: 101 
JdbcTransaction(AbstractTransactionImpl).commit() line: 175 
HibernateTransactionManager.doCommit(DefaultTransactionStatus) line: 480    
HibernateTransactionManager(AbstractPlatformTransactionManager).processCommit(DefaultTransactionStatus) line: 754   
HibernateTransactionManager(AbstractPlatformTransactionManager).commit(TransactionStatus) line: 723 
TransactionInterceptor(TransactionAspectSupport).commitTransactionAfterReturning(TransactionAspectSupport$TransactionInfo) line: 392    
TransactionInterceptor.invoke(MethodInvocation) line: 120   
ReflectiveMethodInvocation.proceed() line: 172  
AfterReturningAdviceInterceptor.invoke(MethodInvocation) line: 50   
ReflectiveMethodInvocation.proceed() line: 172  
JdkDynamicAopProxy.invoke(Object, Method, Object[]) line: 202   
$Proxy71.save(Account, String) line: not available  
GeneratedMethodAccessor115.invoke(Object, Object[]) line: not available 
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: not available   
Method.invoke(Object, Object...) line: not available    
ImportServiceProvider.save(Object, String) line: 380 
```

[编辑] 我注意到的最后一件事是它不会发生在 MS SQL Server 上，只发生在 Oracle 上

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T10:46:28.010

关于您的问题，我有不同的建议。

**建议 1**：您在所有事务中错误地重用了同一个会话。

要检查这一点：在 2 个连续调用中放置一个断点`saveRecord`并检查对 的引用是否不同。`SessionImpl`

老实说，这是您的问题的可能性很小，因为您的代码是在 MS SQL Server 上运行的。所以这个建议正确的唯一机会是 MS SQL Server 中的约束与 Oracle 中的约束不同。此外，我认为 hibernate 在这种情况下会抛出更明确的异常。

**建议2**：你在hibernate 4中遇到了一个错误

hibernate JIRA 在这方面有一些错误报告。（没有您的代码，很难说出您的确切情况）。您的行为很有可能与这些错误之一有关：

[https://hibernate.onjira.com/browse/HHH-7688](https://hibernate.onjira.com/browse/HHH-7688)（这个和你的很接近，但还有一些其他的）

这个错误有一些解决方法吗？

我有几个建议可以尝试：

**将 hibernate.jdbc.batch_size 设置为 1 以上**。[Michale Wyraz在此处](https://hibernate.atlassian.net/browse/HHH-7688?focusedCommentId=48400&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-48400)提出了此解决方法，并且似乎有效。

**不要使用反射**：不确定它是否会有所帮助，但事务由 aop-proxy 处理，并且使用反射可能会导致绕过一些事务管理器代码（它不应该，但这是一个需要检查的假设）。

**更改连接释放模式**：所有这些错误（在 hibernate JIRA 中）*或多或少*与 JdbcConnection 管理有关，因此更改[连接释放模式](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#transactions-connection-release)可能会在某些时候帮助您识别问题。（我并不是说改变它就是解决方案，如果你真的在休眠中遇到了一个错误：你最好的选择可能是等待/为修复做出贡献）

**降级到 hibernate 3.X**：我再次说这不是一个解决方案，但它可能表明您确实面临 hibernate 4 中的错误。

**升级到休眠 4.2+**：正如其他答案中所建议的以及休眠基本代码的*最新*更改：只需升级休眠即可解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:45:41.927

在尝试关闭 Session 时，我因类似的问题浪费了几个小时，不幸的是，ben75 的建议都没有奏效。这是我的环境：

*   错误信息：`org.hibernate.HibernateException: proxy handle is no longer valid ...`
*   休眠版本**4.1.7**
*   应用服务器：**IBM WebSphere 7**

因此，以防其他人偶然发现此错误，对我有用的解决方案是升级到 Hibernate 4.2。所需的罐子是：

*   antlr-2.7.7.jar
*   dom4j-1.6.1.jar
*   hibernate-commons-annotations-4.0.1.Final.jar
*   hibernate-core-4.2.0.Final.jar
*   hibernate-jpa-2.0-api-1.0.1.Final.jar
*   javassist-3.15.0-GA.jar
*   jboss-logging-3.1.0.GA.jar
*   jboss-transaction-api_1.1_spec-1.0.0.Final.jar

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:01:12.687

只是一个猜测。`@Transactional`通过回滚关闭异常事务。所以物体变得有点分离。

我会`@Transactional`从迭代要保存的对象的主要方法中删除，并使 @Transactional 成为仅保存对象的单独方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-08T11:11:44.407

如果它们抛出异常（在 org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch() 中），Hibernate 4.1.3 不会关闭批处理语句。你捕捉到异常，回滚当前事务，开始一个新事务，并希望一切都很完美。但是，如果您运行本机更新脚本（例如），在运行之后，最终想要关闭语句。它来了，未关闭（现在由于回滚而分离）语句抛出此异常并且您的新事务出错。幸运的是，在新异常之前语句被清除，所以只有第一次更新出错......我创建了一个处理程序方法，我在每次回滚时调用它（这种情况下它在初始异常之后被调用），在回滚并开始之后，我创建了一个虚拟（和快速）更新（更新 [tablename] set [column]=[column] where 1=2）并执行它。它触发了上述错误，我抓住了它，再次回滚事务并创建一个新的，所以我用一个好的休眠会话和一个活的事务退出该方法。这是一个丑陋的解决方法，但我现在无法升级休眠版本......

# android - 如何在 Android 中将对象传递给新的 Intent

> ID：14621802
> 
> 赞同：4
> 
> 时间：2013-01-31T08:56:27.287
> 
> 标签：android, android-intent, parcelable

我非常感谢对以下问题的任何想法： 在 Android 中，我有我的 MainActivity，它创建并设置了一个数据库处理程序类。例如

```
public class DbHandler extends SQLiteOpenHelper{
    //do db handling
} 
```

另外，我创建了我的`OnClickListener`，它创建了一个`Intent`然后 startActivity 的 Intent。

我的问题/问题是如何最好地传递`DBHandler`到新的`Activity`. 我考虑过创建一个全局 - 以及线程重启的风险。除非我创建一个包装器，否则我无法完全弄清楚如何打包/序列化 - 但仍然存在在“包裹”中传递对象的问题

我很想了解其他人是如何解决这个问题的？？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:09:28.450

据我所知，最好只使用一个 SQLiteOpenHelper 实例，因此将其创建为单例并使其可访问

```
public final class DatabaseHelper extends SQLiteOpenHelper {

    /**
     * instance.
     */
    private static DatabaseHelper instance;

    /**
     * @return instance.
     */
    public static synchronized DatabaseHelper getInstance() {
        if (instance == null) {
            instance = new DatabaseHelper();
        }

        return instance;
    }
...
} 
```

# android - 搜索结果在列表视图中显示两次

> ID：14621803
> 
> 赞同：2
> 
> 时间：2013-01-31T08:56:28.430
> 
> 标签：android, json, listview, search

我想在我的应用程序中使用搜索参数在列表视图中显示来自 MySql 的数据。我已经成功了，但是我遇到的问题是每次我按两次搜索按钮时，两组结果数据都会显示在 ListView 中，而我只想显示最新的一组结果。

这是我正在使用的代码：

```
public class ListPerusahaan extends ListActivity {
    /** Called when the activity is first created. */

    private static final String TAG_ID = "id";
    private static final String TAG_NAMA = "nama_perusahaan";
    private static final String TAG_PEKERJAAN = "pekerjaan";
    private static final String TAG_ALAMAT= "alamat";
    private static final String TAG_DEADLINE = "deadline";

            EditText keyword;   Button search;  private ProgressDialog pDialog;     ArrayList<HashMap<String, String>> DataList;    // JSONArray  perusahaan = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listperusahaan);
        keyword=(EditText)findViewById(R.id.Editsearch);
       search=(Button)findViewById(R.id.search);

       DataList = new ArrayList<HashMap<String, String>>();

        search.setOnClickListener(new View.OnClickListener()
        {

            @Override           public void onClick(View v) {
                // TODO Auto-generated method stub

                if (keyword.getText().toString().length() == 0 ) {

                     Toast toast = Toast.makeText(getApplicationContext(),"Please enter your keyword", Toast.LENGTH_SHORT);
                     toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
                     toast.show();
                 }
                else {

                new searchData().execute();

                }
                            }

        });

    }

    @SuppressLint("NewApi")     public class searchData extends AsyncTask<Void, Void, Void>
        {

          /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ListPerusahaan.this);
            pDialog.setMessage("Loading ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

           @Override
           protected Void doInBackground(Void... params) {
               // TODO Auto-generated method stub

             // ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
              List<NameValuePair> paramemeter = new ArrayList<NameValuePair>();
              paramemeter.add(new BasicNameValuePair("keyword", keyword.getText().toString()));

                JSONObject json = JSONParser.getJSONFromUrl("http://10.0.2.2/appmysql/dataperusahaan.php", paramemeter);

                try{

                    JSONArray  perusahaan = json.getJSONArray("perusahaan");

                    if (perusahaan != null)
                   {
                    for(int i=0;i<perusahaan.length();i++){
                        // HashMap<String, String> map1 = new HashMap<String, String>();

                        JSONObject jsonobj = perusahaan.getJSONObject(i);

                         // Storing each json item in variable
                        String id = jsonobj.getString(TAG_ID);
                        String nama_perusahaan = jsonobj.getString(TAG_NAMA);
                        String pekerjaan = jsonobj.getString(TAG_PEKERJAAN);
                        String alamat = jsonobj.getString(TAG_ALAMAT);
                        String deadline = jsonobj.getString(TAG_DEADLINE);

                       // creating new HashMap
                        HashMap<String, String> map1 = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map1.put(TAG_ID, id);
                        map1.put(TAG_NAMA, nama_perusahaan);
                        map1.put(TAG_PEKERJAAN, pekerjaan);
                        map1.put(TAG_ALAMAT, alamat);
                        map1.put(TAG_DEADLINE, deadline);

                        // adding HashList to ArrayList
                       DataList.add(map1);

                        }

                    }

                    else {

                        Toast toast= Toast.makeText(getApplicationContext(),  "No data found", Toast.LENGTH_SHORT);  
                       toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
                       toast.show();
                    }

                }

                catch(JSONException e)        {
                    e.printStackTrace();
                }

               return null;

           }

           @Override
           protected void onPostExecute(Void result) {
               // TODO Auto-generated method stub
              pDialog.dismiss();
            // updating UI from Background Thread
              runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */

                    ListAdapter adapter = new SimpleAdapter(
                            ListPerusahaan.this, DataList,R.layout.row,
                              new String[] { TAG_NAMA, TAG_PEKERJAAN, TAG_ALAMAT, TAG_DEADLINE },
                              new int[] { R.id.nama_perusahaan, R.id.pekerjaan, R.id.alamat,R.id.deadline});

                    // updating listview
                    setListAdapter(adapter);

                     final ListView lv = getListView();
                        lv.setTextFilterEnabled(true);
                        lv.setOnItemClickListener(new OnItemClickListener() {
                            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                                /*
                                @SuppressWarnings("unchecked")
                                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);
                                 Toast.makeText(ListPerusahaan.this, "Perusahaan '" + o.get("nama_perusahaan") + "' was clicked.", Toast.LENGTH_SHORT).show(); 
                                */

                                // getting values from selected ListItem
                                String nama = ((TextView) view.findViewById(R.id.nama_perusahaan)).getText().toString();
                                String pekerjaan = ((TextView) view.findViewById(R.id.pekerjaan)).getText().toString();
                                String alamat = ((TextView) view.findViewById(R.id.alamat)).getText().toString();
                                String deadline = ((TextView) view.findViewById(R.id.deadline)).getText().toString();

                                // Starting new intent
                                Intent in = new Intent(getApplicationContext(), detail_lowongan.class);
                                in.putExtra(TAG_NAMA, nama);
                                in.putExtra(TAG_PEKERJAAN, pekerjaan);
                                in.putExtra(TAG_ALAMAT, alamat);
                                in.putExtra(TAG_DEADLINE, deadline);
                                startActivity(in);
                            }
                        });

                }
            });

           }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:10:25.180

在 for 循环中填充之前清除 ArrayList 类型的 DataList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:10:51.700

编辑：在 onclick 清除 DataList

```
search.setOnClickListener(){
......

DataList.clear(); //in onclick method
} 
```

我不确定你是否正在寻找这个......但如果你不想在你的列表中允许重复尝试......

当数据填入你的列表时

```
Set<type> set=new Hashset(yourlist);
ArrayList<type> nodupList=new ArrayList<type>();
noduplist.addAll(set); 
```

使用这种方式，它将删除列表中的重复项

编辑：试试这个

for循环之后

```
Set<HashMap> set=new HashSet(DataList);
ArrayList<HashMap> nodupList=new ArrayList<HashMap>();
nodupList.addAll(set);
DataList.clear();
DataList.addAll(nodupList); 
```

试试看可能对你有帮助

# c# - 仅来自基类的函数

> ID：14621811
> 
> 赞同：3
> 
> 时间：2013-01-31T08:56:57.853
> 
> 标签：c#, winforms

我正在制作这个游戏，但我遇到了结构问题。我创建了一个名为 Structure 的类，其他类如 Traps、Shelter、Fireplace 都继承自该类。游戏中的瓷砖有自己的类（瓷砖），并在该瓷砖上有一个结构列表。我可以成功地在列表中包含的图块上构建结构。当我尝试从陷阱等类中访问函数时，问题就来了。它不起作用。我只能使用基类结构中的函数。

平铺列表：

```
class Tile
{
     public List<Structure> Structures = new List<Structure>();
} 
```

我如何建造陷阱或其他建筑物：

```
 bool anyFireplace = Bundle.map.tile[Bundle.player.X, Bundle.player.Y].Structures.OfType<Shelter>().Any();
        if (!anyFireplace)
        {
            woodlogsCost = 4;
            if (Bundle.player.Woodlogs - woodlogsCost >= 0)
            {
                Bundle.map.tile[Bundle.player.X, Bundle.player.Y].Structures.Add(new Shelter(Bundle.player.X, Bundle.player.Y));
                Bundle.player.Woodlogs -= woodlogsCost;
            }
        } 
```

当我绘制结构时（这是我的问题所在，请注意评论）

```
foreach (Structure s in Bundle.map.tile[x, y].Structures)
{
   if (s is Fireplace)
{
   //This is the function from base class Strucure
   s.ColorBody(g, 10, x - minx, y - miny, 0, Brushes.Firebrick);

   // The function that I wan´t to use but can´t be used
   //s.ColorBody(g, x - minx, y - miny); 
}
if (s is Shelter)
{
s.ColorBody(g, 10, x - minx, y - miny, 1, Brushes.ForestGreen);
}
if (s is Sleepingplace)
{
   s.ColorBody(g, 10, x - minx, y - miny, 2, Brushes.Brown);
}
if (s is Trap)
{
   s.ColorBody(g, 10, x - minx, y - miny, 3, Brushes.Silver);
}
if (s is Barricade)
{
   s.ColorBody(g, 10, x - minx, y - miny, 4, Brushes.DarkOliveGreen);
}
} 
```

Soo... 我想知道如何访问我不想使用的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:01:25.087

将虚拟方法添加到您的基类；

```
public class Structure
{
   public virtual void ColorBody(Graphics g, int someParam1, int someParam2)
   {
       // do nothing in the base class
   }
} 
```

并覆盖 FireBody 中的方法

```
public class FireBody : Structure
{
    public override void ColorBody(Graphics g, int someParam1, int someParam2)
    {
        // do something here for FireBody
    }
} 
```

如果所有继承自的类都`Structure`需要它，则使其抽象；

```
public abstract class Structure
{
   public abstract void ColorBody(Graphics g, int someParam1, int someParam2);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:02:04.647

对电脑来说，`s` *只是*一个`Structure`. 如果你想调用一个只有`Fireplace`类有但抽象类`Structure`没有的特定方法（例如，`Fireplace`类可能有一个`BurnWood()`对 a 没有意义的方法`Structure`），那么你想让计算机知道这`Structure`是实际上*也是*一个`Fireplace`（例如）。所以你可以通过铸造来做到这一点；例如：

```
((Fireplace)s).ColorBody(g, x - minx, y - miny); 
```

或者

```
(s as Fireplace).ColorBody(g, x - minx, y - miny); 
```

有关强制转换和使用运算符之间的区别，请参阅[这篇文章](https://stackoverflow.com/questions/3724051/what-is-difference-between-normal-typecasting-and-using-as-keyword?lq=1)`as`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:26:15.493

正如我从您的问题中注意到的那样，您在两个类中有两个重载函数，即对于基类和派生类，您有不同的数字函数参数

在这种情况下，您必须支持[编译类型多态性](http://www.dotnetspider.com/resources/31365-Polymorphism-C.aspx)，如下所示

```
 public BaseQueryClass
{
    public string QueryClassFunc(string mystring, int i)
    {
        return mystring + i.ToString();
    }
}

public QueryClassDerived : BaseQueryClass
{
    public string QueryClassFunc(string mystring)
    {
        return mystring;
    }
} 
```

你可以调用你的方法，如下所示

```
 BaseQueryClass qClass = new BaseQueryClass();
        qClass.QueryClassFunc("mystring", 1);

        ((QueryClassDerived)qClass).QueryClassFunc("test"); 
```

希望我在这里没有遗漏任何东西

# knockout-validation - 淘汰赛验证不起作用

> ID：14621816
> 
> 赞同：4
> 
> 时间：2013-01-31T08:57:06.790
> 
> 标签：knockout-validation

这可能是最简单的问题，但我无法解决这个问题。我页面上的验证不起作用。每次我提交将所有输入字段留空的页面时，都会生成一条警报，提示“失败”。如果我输入所有带有一些值数据的字段，则成功提交。

这是我的 HTML：

```
@{
ViewBag.Title = "Exercise10";
}
<html>
<head>

<script src="../../Scripts/jquery-1.6.2.js" type="text/javascript"></script>
<script src="../../Scripts/knockout-2.2.1.js" type="text/javascript"></script>
<script src="../../Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
<script src="../../Scripts/json2.js" type="text/javascript"></script>
<link href="../../Content/ExerciseStyle.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/Popup.js" type="text/javascript"></script>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-    ui.css" />
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script src="../../Scripts/DatePicker.js" type="text/javascript"></script>
<script src="../../Scripts/knockout.validation.js" type="text/javascript"></script>
<script src="../../Scripts/knockout-validator.js" type="text/javascript"></script>
<script src="../../Scripts/knockout-validator-extensions.js" type="text/javascript"></script>
<link href="../../Scripts/extensions.css" rel="stylesheet" type="text/css" />

</head>
<body>
<form action="" method="post">
<div id="MainArea">
    <table id="tbllist" align="center" style="margin-left: 15px; width: 96%; margin-      right: 15px;">
        <tr>
            <th colspan="3" align="left">
                <div id="title_p">
                    Enter Following Entries</div>
            </th>
        </tr>
        <tr>
            <td align="right" style="width: 40%;">
                <b>Name :</b>
            </td>
            <td align="left" style="width: 17%;">
                <input data-bind="value: EmployeeName" placeholder="Employee Name" class="txt"
                    type="text" />
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Emp# :</b>
            </td>
            <td align="left">
                <input data-bind="value: EmployeeCode" placeholder="Employee Code" style="width: 200px;"
                    type="text" />
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Date of Birth :</b>
            </td>
            <td align="left">
                <input data-bind="value: Dob" id="datepicker" placeholder="Date of Birth" style="width: 200px;"
                    type="text" /><span>(dd/mm/yyyy)</span>
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Age (18-60):</b>
            </td>
            <td align="left">
                <input data-bind="value: Age" style="width: 200px;" placeholder="Age Range (18-60)"
                    type="number" min="18" max="60" />
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Contact Number :</b>
            </td>
            <td align="left">
                <input data-bind="value: ContactNumber" placeholder="Contact Number" style="width: 200px;"
                    type="text" />
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Email :</b>
            </td>
            <td align="left">
                <input data-bind="value: EmailID" placeholder="Email ID" style="width: 200px;"
                    type="email" />
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Address :</b>
            </td>
            <td align="left">
                <input data-bind="value: Address" placeholder="Address" style="width: 200px;"
                    type="text" />
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>City :</b>
            </td>
            <td align="left">
                <select data-bind="value: City" style="width: 200px;">
                    <option value="Noida">New Delhi</option>
                    <option value="Noida">Noida</option>
                    <option value="Noida">Mumbai</option>
                </select>
            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Marital Status :</b>
            </td>
            <td align="left">
                <input data-bind="checked: MaritalStatus" checked="checked" name="rdb" type="radio" /><span>UnMarried</span>
                <input data-bind="checked: MaritalStatus" checked="checked" name="rdb" type="radio" checked="checked" /><span>Married</span>

            </td>
            <td align="left">
            </td>
        </tr>
        <tr>
            <td align="right">
                <b>Any Employee Reference :</b>
            </td>
            <td align="left">
                <input data-bind="checked: Is_Reference" type="checkbox" />yes
            </td>
            <td align="left">
            </td>
        </tr>
    </table>
    <table style="width: 99%; margin-right: 20px; padding: 5px;">
            <tr align="right">
                <td>
                    <button data-bind="click :$root.save" class="button">Save</button>
                    <input type="button" id="btnCancel" class="button" value="Cancel" onclick="JavaScript:closePopup();" />
                </td>
            </tr>
        </table>
</div>
</form> 
```

和我的视图模型（续上）：

```
<script type="text/javascript">

//....................................................//
    var EmpViewModel = function () {

        //Make the self as 'this' reference
        var self = this;
        //Declare observable which will be bind with UI 
        self.EmployeeCode = ko.observable("").extend({ required: true });
        self.EmployeeName = ko.observable("").extend({ required: { message: 'Please supply your Name.'} });
        self.Dob = ko.observable("");
        self.Age = ko.observable("").extend({number :true});
        self.ContactNumber = ko.observable("");
        self.EmailID = ko.observable("");
        self.Address = ko.observable("");
        self.MaritalStatus = ko.observable("");
        self.City = ko.observable("");
        self.Is_Reference = ko.observable("");

        //The Object which stored data entered in the observables
        var EmpData = {
            EmpCode: self.EmployeeCode,
            EmpName: self.EmployeeName,
            Dob: self.Dob,
            Age: self.Age,
            ContactNumber: self.ContactNumber,
            MaritalStatus: self.MaritalStatus,
            EmailID: self.EmailID,
            Address: self.Address,
            City: self.City,
            Is_Reference: self.Is_Reference
        };

        //Declare an ObservableArray for Storing the JSON Response
        self.Employees = ko.observableArray([]);

        //Function to perform POST (insert Employee) operation
        self.save = function () {
            //Ajax call to Insert the Employee
            $.ajax({
                type: "POST",
                url: "/Exercise/Save/",
                data: ko.toJSON(this), //Convert the Observable Data into JSON
                contentType: "application/json",
                success: function (data) {
                    alert(data);
                },
                error: function () {
                    alert("Failed");
                }
            });
            //Ends Here
        };
    }

    ko.applyBindings(new EmpViewModel());
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T09:16:48.483

Knockout-validation 仅在字段被修改时才显示验证消息。因此，如果所有字段都有效，您应该检查提交，如果不是，则显示所有错误。

```
 self.errors = ko.validation.group(this, { deep: true, observable: false });

  //Function to perform POST (insert Employee) operation
        self.save = function () {
            // check if valid
            if(self.errors().length > 0) {
                self.errors.showAllMessages();
                return;
            }
            //Ajax call to Insert the Employee
            $.ajax({
                type: "POST",
                url: "/Exercise/Save/",
                data: ko.toJSON(this), //Convert the Observable Data into JSON
                contentType: "application/json",
                success: function (data) {
                    alert(data);
                },
                error: function () {
                    alert("Failed");
                }
            });
            //Ends Here
 }; 
```

我创建了一个小提琴来表明：http: [//jsfiddle.net/delixfe/tSzYf/2/](http://jsfiddle.net/delixfe/tSzYf/2/)

# html - 如何使用 HTML 添加下拉列表并使用 SQL DB 中的信息填充它？

> ID：14621822
> 
> 赞同：0
> 
> 时间：2013-01-31T08:57:18.863
> 
> 标签：html, sql-server-2005

我创建了一个表单，但希望第一个字段是一个下拉框。我需要使用 SQL 数据库中的信息填充此下拉框。我对网络开发很陌生，但具有基本的知识水平。数据库已设置，信息可用于填充下拉列表。我的表格代码如下：

```
<form name="Enter New Model" method="Post" action="savePerson.asp">

<table>
<tr><td><h3>Serial No: </td></h3>
<td><input type="text" name="SerialNo" size="50"></td></tr>
<tr><td><h3>Make/Model: </td></h3>
<td><input type="text" name="[Make/Model]" size="50"></td></tr>
<tr><td><h3>Next Upgrade: </td></h3>
<td><input type="text" name="NextUpgrade" size="50"></td></tr>
<tr><td><h3>Stock: </td></h3>
<td><input type="text" name="Stock" size="50"></td></tr>
</table>

<input type="submit" name="Submit" value="Submit"> 
```

序列号字段必须是下拉列表。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:01:04.287

您需要使用服务器端代码来执行此操作。有很多可用的，例如 ASP.net 或 PHP、Node 等...

# java - JSP 中的多个按钮

> ID：14621830
> 
> 赞同：2
> 
> 时间：2013-01-31T08:57:45.290
> 
> 标签：java, javascript, jsp, button, onclick

我需要在我的网络项目中有几个具有不同功能的按钮，但我不知道实现它的正确方法。我这样做只是为了测试：

```
<input name="command" type="hidden" value="redirect"></input>
<input type="submit" name="page" value="Make order"></input>
<input type="submit" name="page" value="See bills"></input>
<input type="submit" name="page" value="See orders"></input> 
```

然后在命令中我切换页面名称的抛出枚举以找出单击了哪个按钮。一个按钮应该只是将客户端重定向到另一个页面，其他按钮应该调用他们自己的命令。

我知道后处理表单是一种不好的做法`submit`，所以我正在寻找另一种方法来做到这一点。有人建议我使用 JS `onclick`，但我没有任何经验，也找不到任何适合我项目的简单示例。

**已编辑**

我有 ViewBillAction 和 ViewOrderAction 的 Action 类。我也有这样的类来定义所需的操作：

```
public class Redirect implements Action {

@Override
public String execute(TransferredData requestInformation) {
    String pageName = requestInformation.getRequestParameter("page");
    Action action;
    switch (pageName.toUpperCase()) {
    case "MAKE ORDER":
        return JSPManager.INSTANCE.getProperty(JSPManager.ORDER_PAGE_PATH);
    case "VIEW BILLS":
        action = new ViewBillsCommand();
        return action.execute(requestInformation);
    case "VIEW ORDERS":
        action = new ViewRequestsCommand();
        return action.execute(requestInformation); 
```

主要问题是我根本不知道如何处理 JS 中的按钮单击事件。但这是我应该这样做的方式，我将非常感谢一个简单的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:03:09.517

type `submit` means you are going to post the form data to the server for processing. You should use `button` instead of `submit` if you are not doing post request.

```
<input name="command" type="hidden" value="redirect"></input>
<input type="button" name="page" value="Make order"></input>
<input id="seeBillsButton" type="button" name="page" value="See bills"></input>
<input type="button" name="page" value="See orders"></input> 
```

And use `javascript`/`jquery` to handle the button click events.

```
$("#seeBillsButton").click(function() {
  alert("Handler for .click() called.");
}); 
```

**Edited** At server side, you should have 3 actions to handle these requests.

1.  MakeOrderAction
2.  ViewBillAction
3.  ViewOrderAction.

For MakeOrderAction, you just want to redirect user to make order page, handle this by click event in javascript(or a hyperlink).

For ViewBillAction and ViewOrderAction, each action ties to a jsp and display the result there. You have 2 ways to archieve this. You can either make 2 forms for them and submit to corresponding action separately. Or you can use the same form, and check what user has clicked by click event, handle and submit the form in javascript. The result jsp page should defined in your action class.

[http://api.jquery.com/click/](http://api.jquery.com/click/)

# python - 识别等效的可变参数函数调用以进行记忆

> ID：14621838
> 
> 赞同：2
> 
> 时间：2013-01-31T08:58:04.637
> 
> 标签：python, decorator, memoization

我正在使用[this 装饰器](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)的变体进行记忆：

```
# note that this decorator ignores **kwargs
def memoize(obj):
    cache = obj.cache = {}

    @functools.wraps(obj)
    def memoizer(*args, **kwargs):
        if args not in cache:
            cache[args] = obj(*args, **kwargs)
        return cache[args]
    return memoizer 
```

我想知道，是否有一种合理的方法来基于两者`args`和进行记忆`kwargs`，特别是在两个函数调用指定的参数在位置上和通过关键字分配不同但具有完全相同的参数的情况下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:54:19.503

如果您始终将参数用作位置或始终用作关键字，Thorsten 解决方案可以正常工作。但是，如果您想考虑为参数提供相同值的相等调用，而与参数的传递方式无关，那么您必须做一些更复杂的事情：

```
import inspect

def make_key_maker(func):
    args_spec = inspect.getargspec(func)

    def key_maker(*args, **kwargs):
        left_args = args_spec.args[len(args):]
        num_defaults = len(args_spec.defaults or ())
        defaults_names = args_spec.args[-num_defaults:]

        if not set(left_args).symmetric_difference(kwargs).issubset(defaults_names):
            # We got an error in the function call. Let's simply trigger it
            func(*args, **kwargs)

        start = 0
        key = []
        for arg, arg_name in zip(args, args_spec.args):
            key.append(arg)
            if arg_name in defaults_names:
                start += 1

        for left_arg in left_args:
            try:
                key.append(kwargs[left_arg])
            except KeyError:
                key.append(args_spec.defaults[start])

            # Increase index if we used a default, or if the argument was provided
            if left_arg in defaults_names:
                start += 1
        return tuple(key)

    return key_maker 
```

上述函数尝试将关键字参数（和默认值）映射到位置，并使用结果元组作为键。我对其进行了一些测试，它似乎在大多数情况下都能正常工作。当目标函数也使用`**kwargs`参数时，它会失败。

```
>>> def my_function(a,b,c,d,e=True,f="something"): pass
... 
>>> key_maker = make_key_maker(my_function)
>>> 
>>> key_maker(1,2,3,4)
(1, 2, 3, 4, True, 'something')
>>> key_maker(1,2,3,4, e=True)               # same as before
(1, 2, 3, 4, True, 'something')
>>> key_maker(1,2,3,4, True)                 # same as before
(1, 2, 3, 4, True, 'something')
>>> key_maker(1,2,3,4, True, f="something")  # same as before
(1, 2, 3, 4, True, 'something')
>>> key_maker(1,2,3,4, True, "something")    # same as before
(1, 2, 3, 4, True, 'something')
>>> key_maker(1,2,3,d=4)                     # same as before
(1, 2, 3, 4, True, 'something')
>>> key_maker(1,2,3,d=4, f="something")      # same as before
(1, 2, 3, 4, True, 'something') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:54:33.420

```
import inspect
def memoize(obj):
    cache = obj.cache = {}
    @functools.wraps(obj)
    def memoizer(*args, **kwargs):
        kwargs.update(dict(zip(inspect.getargspec(obj).args, args)))
        key = tuple(kwargs.get(k, None) for k in inspect.getargspec(obj).args)
        if key not in cache:
            cache[key] = obj(**kwargs)
        return cache[key]
    return memoizer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:07:35.700

一般来说，不可能推断出两个调用具有相同的参数含义。考虑电话

```
func(foo=1)
func(1)
func(bar=1) 
```

其中哪一个（如果有）是等价的，取决于位置参数被称为 foo 还是 bar：如果参数被称为 foo，那么第一个调用匹配第二个，等等。但是，位置参数也可能有一个完全不同的名称.

IOW，您需要考虑要调用的函数，而这又可能是不可能的（例如，如果它是用 C 实现的，或者它本身就是一个只处理 *args、**kwargs 的包装器）。

如果你想走反射路线，像ndpu的响应是一个好的开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:44:56.453

`args`您只需要找到一种从和构建密钥的好方法`kwargs`。也许试试这个：

```
import functools
from collections import OrderedDict

# note that this decorator ignores **kwargs
def memoize(obj):
    def make_key(args, kwargs):
        ordered_kwargs = OrderedDict(kwargs)
        parameters = tuple([args, 
                            tuple(ordered_kwargs.keys()), 
                            tuple(ordered_kwargs.values())])
        return parameters
    cache = obj.cache = {}

    @functools.wraps(obj)
    def memoizer(*args, **kwargs):
        key = make_key(args, kwargs)
        if key not in cache:
            cache[key] = obj(*args, **kwargs)
            print "Not using cached result for key %s" % str(key)
        else:
            print "Using cached result for key %s" % str(key)
        return cache[key]
    return memoizer

@memoize
def calculate_sum(*args, **kwargs):
    return sum(args)

calculate_sum(4,7,9,2,flag=0)
calculate_sum(4,7,9,3)
calculate_sum(4,7,9,2,flag=1)
calculate_sum(4,7,9,2,flag=0) 
```

我将一些打印语句放入`memoizer`中，只是为了证明它有效。输出是：

```
Not using cached result for key ((4, 7, 9, 2), ('flag',), (0,))
Not using cached result for key ((4, 7, 9, 3), (), ())
Not using cached result for key ((4, 7, 9, 2), ('flag',), (1,))
Using cached result for key ((4, 7, 9, 2), ('flag',), (0,)) 
```

我确定我没有解决所有极端情况，特别是如果作为 kwargs（甚至 args）传入的值不可散列。但也许它可以作为一个很好的起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-04T02:31:55.103

此解决方案使用检查模块来提取位置参数和关键字参数的参数名称。然后在名称：值对的有序元组上执行记忆查找。它可以容忍作为位置参数和关键字参数传递的参数。如果有多余的位置参数，它们会按照它们出现在单独元组中的顺序存储。

[这使用 Michele Simionato 的`decorator`包](https://pypi.python.org/pypi/decorator)来确保保留函数签名。因为它检查`argspec`被记忆的函数，如果与不保留`argspec`.

```
from decorator import decorator as robust_decorator

def argument_signature(function,*args,**kwargs):
    '''
    Convert the function arguments and values to a unique set. 
    Throws ValueError if the provided arguments cannot match argspec.
    '''
    named_store = {} # map from parameter names to values 
    named,vargname,kwargname,defaults = inspect.getargspec(function)
    available = zip(named,args)
    nargs     = len(available)
    ndefault  = len(defaults) if not defaults is None else 0
    nnamed    = len(named)
    # All positional arguments must be filled
    nmandatory = nnamed - ndefault
    if nargs<nmandatory: raise ValueError('Not enough positional arguments')
    # Assign available positional arguments to names    
    for k,v in available:
        if k in named_store: raise ValueError('Duplicate argument',k)
        named_store[k] = v
    # If not all arguments are provided, check **kwargs and defaults
    ndefaulted   = max(0,nnamed - nargs)
    default_map = dict(zip(named[-ndefault:],defaults)) if ndefault>0 else {}
    if ndefaulted>0:
        for k in named[-ndefaulted:]:
            if k in named_store: raise ValueError('Duplicate argument',k)
            named_store[k] = kwargs[k] if k in kwargs else default_map[k]
            if k in kwargs: del kwargs[k]
    # Store excess positional arguments in *vargs if possible
    vargs = None
    if len(args)>nnamed:
        if vargname is None:
            raise ValueError('Excess positional arguments, but function does not accept *vargs!')
        vargs = args[nnamed:]
    # Store excess keyword arguments if the function accepts **kwargs
    if len(kwargs):
        if kwargname is None:
            raise ValueError("Excess keyword arguments, but function does not accept **kwargs!")
        for k in kwargs:
            if k in named_store: raise ValueError('Duplicate argument',k)
            named_store[k] = kwargs[k]
    # Construct a tuple reflecting argument signature
    keys  = sorted(named_store.keys())
    vals  = tuple(named_store[k] for k in keys)
    named = tuple(zip(keys,vals))
    argument_signature = (named,vargs)
    return argument_signature

def print_signature(sig):
    '''Formats the argument signature for printing.'''
    named, vargs = sig
    result = ','.join(['%s=%s'%(k,v) for (k,v) in named])
    if not vargs is None: result += '; ' + ','.join(map(str,vargs))
    return result

def vararg_memoize(f):
    '''Memoization decorator'''
    cache = {}
    @robust_decorator
    def decorated(f,*args,**kwargs):
        sig = argument_signature(f,*args,**kwargs)
        if not sig in cache:  cache[sig] = f(*args,**kwargs)
        else: print('found cached',f.func_name,print_signature(sig))
        return cache[sig]
    return decorated(f)

if __name__=="__main__":
    print("Running example and testing code")

    def example_function(a,b,c=1,d=('ok',),*vargs,**kw):
        ''' This docstring should be preserved by the decorator '''
        e,f = vargs if (len(vargs)==2) else (None,None)
        g = kw['k'] if 'k' in kw else None
        print(a,b,c,d,e,f,g)

    f = example_function
    g = vararg_memoize(example_function)

    for fn in [f,g]:
        print('Testing',fn.__name__)
        fn('a','b','c','d')
        fn('a','b','c','d','e','f')
        fn('a','b',c='c',d='d')
        fn('a','b',**{'c':'c','d':'d'})
        fn('a','b',*['c','d'])
        fn('a','b',d='d',*['c'])
        fn('a','b',*['c'],**{'d':'d'})
        fn('a','b','c','d','e','f') 
```

# php - 如果其中一个未连接，如何在 2 个 mysql 数据库之间切换？

> ID：14621844
> 
> 赞同：0
> 
> 时间：2013-01-31T08:58:15.777
> 
> 标签：php, mysql, connection

我有 2 个数据库服务器 DRC 和生产服务器..

我将 php 配置文件与生产服务器 ip 连接以连接其数据库（它工作正常），如果生产数据库未连接、未选择或删除，则我做了一个 if 语句，然后去连接 DRC 服务器以获取其数据库.

下面的代码使此操作可以正常切换本地主机上的 2 个数据库，但如果生产数据库不可用，则它不会连接到 DRC 数据库。

```
//Production constants
defined ('DB_SERVER')? null : define ("DB_SERVER" , "20.20.10.1");
defined ('DB_USER') ? null : define ("DB_USER" , "root");
defined ('DB_PASS') ? null : define ("DB_PASS" , "rootpass");
defined ('DB_NAME') ? null : define ("DB_NAME" , "dbname");

//DRC constants
defined ('DB_SERVER_DRC')? null : define ("DB_SERVER_DRC" , "20.20.10.2");
defined ('DB_USER_DRC') ? null : define ("DB_USER_DRC" , "root");
defined ('DB_PASS_DRC') ? null : define ("DB_PASS_DRC" , "rootpass");
defined ('DB_NAME_DRC') ? null : define ("DB_NAME_DRC" , "dbname");

function __construct() {
    $this->open_connection();
}

public function open_connection() {
    $this->connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
    if (!$this->connection) {
        $this->open_connection_DRC();
    } else {
        $db_select = mysql_select_db(DB_NAME, $this->connection);
        if (!$db_select) {
            $this->open_connection_DRC();
        }
    }
}

public function open_connection_DRC() {
    $this->connection = mysql_connect(DB_SERVER_DRC, DB_USER_DRC, DB_PASS_DRC);
    if (!$this->connection) {
        die("Database connection failed: " . mysql_error());
    } else {
        $db_select = mysql_select_db(DB_NAME_DRC, $this->connection);
        if (!$db_select) {
            die("Database selection failed: " . mysql_error());
        }
    }
} 
```

任何解决方案或其他方式，等待您的积极回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:02:28.053

[mysql_connect](http://php.net/manual/en/function.mysql-connect.php) - Returns a MySQL link identifier on success or FALSE on failure. That's what you can do according to my knowledge. if it returns false connect to the other database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:17:08.597

**您可以尝试在open_connection_DRC**函数中进行以下更改，根据 PHP 手册，当您尝试打开多个连接时，您需要将第 5 个布尔参数**$new_link 传递为 true。**

我在这里假设您已连接到生产服务器并且生产服务器上没有数据库，因此您正在尝试打开与 DRC 服务器的新 mysql 连接。

```
public function open_connection_DRC() {
    $this->connection = mysql_connect(DB_SERVER_DRC, DB_USER_DRC, DB_PASS_DRC, true); 
```

此外，一旦您发现生产服务器上不存在数据库，最好取消设置**$this->connection 。**

# android - 如何在 android 的 Subactivity 中添加 tabHost？

> ID：14621845
> 
> 赞同：3
> 
> 时间：2013-01-31T08:58:18.677
> 
> 标签：android

我想在 SubActivity 中添加 TabHost。

例如，我有一个名为 MainActivity 的 Activity，它代表一个 TabHost。我的 tabHost 中有五个选项卡。在每个 tabHost 上，我打开 Activity A、B、C、D、E。

```
 Now when I want move from Activity A to some different activity e.g Z.
 then I am not able to add TabHost into Z. It's totally disappeared from Activity Z.

 So Is there any solution for this issue ? Please help me. 
```

这是 MainActivity 源：

```
public class MainActivity extends TabActivity {

    public static final String TAG_1 = "tab1";
    public static final String TAG_2 = "tab2";
    public static final String TAG_3 = "tab3";
    public static final String TAG_4 = "tab4";
    public static final String TAG_5 = "tab5";

    public TabHost mTabHost;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mTabHost = getTabHost();
        setTabs();
    }

    public void setTabs() {
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();

        addTab("Home", TAG_1, createTabDrawable(R.drawable.home),  FeedBack.class);
        addTab("Near Me", TAG_2, createTabDrawable(R.drawable.search), NearMe.class);
        addTab("Share", TAG_3, createTabDrawable(R.drawable.star),Home.class);
        addTab("FeedBack", TAG_4, createTabDrawable(R.drawable.settings),FeedBack.class);
        addTab("Options", TAG_5, createTabDrawable(R.drawable.settings),NearMe.class);

    }

    public Drawable createTabDrawable(int resId) {
        Resources res = getResources();
        StateListDrawable states = new StateListDrawable();

        final Options options = new Options();
        options.inPreferredConfig = Config.ARGB_8888;

        Bitmap icon = BitmapFactory.decodeResource(res, resId, options);

        Bitmap unselected = TabBitmap.createUnselectedBitmap(res, icon);
        Bitmap selected = TabBitmap.createSelectedBitmap(res, icon);

        icon.recycle();

        states.addState(new int[] { android.R.attr.state_selected }, new BitmapDrawable(res, selected));
        states.addState(new int[] { android.R.attr.state_enabled }, new BitmapDrawable(res, unselected));

        return states;
    }

    public View createTabIndicator(String label, Drawable drawable) {
        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, mTabHost.getTabWidget(), false);

        TextView txtTitle = (TextView) tabIndicator.findViewById(R.id.text_view_tab_title);
        txtTitle.setText(label);
        LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) txtTitle.getLayoutParams();
        txtTitle.setLayoutParams(params);

        ImageView imgIcon = (ImageView) tabIndicator.findViewById(R.id.image_view_tab_icon);
        imgIcon.setImageDrawable(drawable);

        return tabIndicator;
    }

    public void addTab(String label, String tag, Drawable drawable, Class<?> c) {
        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = mTabHost.newTabSpec(tag);
        spec.setIndicator(createTabIndicator(label, drawable));
        spec.setContent(intent);

        mTabHost.addTab(spec);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:42:05.250

试试这个，它对我有用..在你的主要活动的 onCreate()

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    etSearch = (EditText)findViewById(R.id.etSearch);

    TabHost tabhost = getTabHost();

    TabSpec first = tabhost.newTabSpec("All Submissions");        
    first.setIndicator("All Submissions"     ,getResources().getDrawable(R.drawable.submission));
    Intent intent1 = new Intent(this, AllSubmissionActivity.class);
    first.setContent(intent1);
    //tabhost.addTab(first);

    TabSpec second = tabhost.newTabSpec("All Districts");        
    second.setIndicator("All Districts"  ,getResources().getDrawable(R.drawable.district));
    Intent intent2 = new Intent(this, AllDistrictActivity.class);
    second.setContent(intent2);
    //tabhost.addTab(second);

    TabSpec third = tabhost.newTabSpec("All Schools");
    third.setIndicator("All Schools" ,getResources().getDrawable(R.drawable.school));
    Intent intent3 = new Intent(this, AllSchoolActivity.class);
    third.setContent(intent3);
    //tabhost.addTab(third);  

    if(DataContainer.UserCredentials.uname.equals("sadmin"))
    {
        tabhost.addTab(first);
        tabhost.addTab(second);
        tabhost.addTab(third); 
    }
    else if(DataContainer.UserCredentials.uname.equals("b"))
    {
        tabhost.addTab(second);
        tabhost.addTab(third); 
    }
    else
    {
        tabhost.addTab(third); 
    }

    tabhost.setCurrentTab(0); 

} 
```

您必须按照与主活动相同的程序将选项卡添加到您的子活动...

在子活动中

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.allsubmission);

    initializeTabHost();

} 
```

这是 initializeTabHoast() 方法..

```
public void initializeTabHost(){

    tabhost = getTabHost();
    TabSpec first = tabhost.newTabSpec("Details"); 

    first.setIndicator("Details" ,null);
    Intent intent1 = new Intent(this, DetailsCrimeOnLink.class);

    intent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    first.setContent(intent1);
    tabhost.addTab(first);

    TabSpec second = tabhost.newTabSpec("Maps");        
    second.setIndicator("Maps" ,null);
    Intent intent2 = new Intent(this, MapsCrimeOnLink.class);
    second.setContent(intent2);
    tabhost.addTab(second);

    TabSpec third = tabhost.newTabSpec("Notes");
    third.setIndicator("Notes" ,null);
    Intent intent3 = new Intent(this, NotesCrimeOnLink.class);
    third.setContent(intent3);
    tabhost.addTab(third); 

    TabSpec fourth = tabhost.newTabSpec("History");
    fourth.setIndicator("History" ,null);
    Intent intent4 = new Intent(this, HistoryCrimOnLink.class);
    fourth.setContent(intent4);
    tabhost.addTab(fourth);  

    tabhost.setCurrentTab(0);

            } 
```

# javascript - 如何为主流浏览器（IE、firefox 和 google）注册或添加 div.onresize 事件的监听器？

> ID：14621846
> 
> 赞同：0
> 
> 时间：2013-01-31T08:58:20.583
> 
> 标签：javascript, jquery, html, css, addeventlistener

如何为主流浏览器（IE、Firefox 和 chrome）注册或添加 div.onresize 事件的监听器？div 标签中的 Onresize 事件在 Mozilla、Chrome 等中不起作用。我用 edit plus 软件检查了相同的代码，它工作正常。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
    var NumOfRow=1;
    var mainDiv;
    var newButton;
    function AddNewItems() {
        var container = document.getElementById ("msgPanel");
        //var message = "The height with padding: " + container.clientHeight + "px.\n";
        var message = "The height with padding and border: " + container.offsetHeight + "px.\n";
        alert(message);
        NumOfRow++;
        mainDiv =document.getElementById('msgPanel');
        newButton=document.createElement('input');
        newButton.type='button';
        newButton.value='NewButton';
        newButton.id='btn'+NumOfRow;
        mainDiv.appendChild(newButton);
    }
    function getParentDivHeight() {
    alert("entered inside");
        var container = document.getElementById ("msgPanel");
        var message = "The height with padding and border onClick event: " + container.offsetHeight + "px.\n";
        var strheight = container.offsetHeight;
        alert("The DIV height in Pixel is :   " + strheight +"px");
    }
    function RemoveNewItems() {
        if(NumOfRow > 1) {
            var container = document.getElementById ("msgPanel");
            var message = "The height with padding and border onClick event: " + container.offsetHeight + "px.\n";
            alert(message);
            mainDiv.removeChild(newButton);
            alert("button Removed so the DIV height will be decreased");
        } else {
            alert("Please add a Dynamic Button");
        }
    }
//-->
</script>
<style>
body{
font-family:Arial, Helvetica, sans-serif; 
font-size:13px;
}
.info, .success, .warning, .error, .validation {
border: 1px solid;
margin: 10px 0px;
padding:15px 10px 15px 50px;
background-repeat: no-repeat;
background-position: 10px center;
}
.info {
color: #00529B;
background-color: #BDE5F8;
height: 460px;
width: 200px;
background-image: url('info.png');
}
.success {
color: #4F8A10;
background-color: #DFF2BF;
background-image:url('success.png');
}
.warning {
color: #9F6000;
background-color: #FEEFB3;
background-image: url('warning.png');
}
.error {
color: #D8000C;
background-color: #FFBABA;
background-image: url('error.png');
}
</style>
</HEAD>

<BODY>
 <div class="info" id="msgPanel" onresize="getParentDivHeight()" >Info message

    <div class="success">Successful operation message</div>

    <div class="warning">Warning message</div>

    <div class="error">Error message</div>

    <div id="Container1" >

    </div>

</div>
<input type="submit" id="btnSubmit" value="AddButton" onclick="AddNewItems()" />
</br>
</br>
<input type="button" id="btnSubmit1" value="RemoveButton" onclick="RemoveNewItems()" />
</br>
</br>
<input type="button" id="btnSubmit2" value="ShowDIVHeight" onclick="getParentDivHeight()" />
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:06:05.603

# c# - WPF - ListView - GridView - 从 .xaml.cs 文件访问 CommandParameter

> ID：14621848
> 
> 赞同：-1
> 
> 时间：2013-01-31T08:58:22.873
> 
> 标签：c#, .net, wpf, listview, gridview

我正在使用 listview 包含 gridview 来绑定数据。如何使用 .cs 文件中按钮上的 CommandParameter。该按钮出现在我的网格视图中。此外，如何在按钮单击事件中通过 .cs 文件中的 id 标识每一行。

我的代码：

```
<ListView Name="listUsers" SelectionMode="Single" Height="200" SelectionChanged="listUsers_SelectionChanged">
    <ListBoxItem></ListBoxItem>
    <ListView.View>
        <GridView AllowsColumnReorder="true">
            <GridViewColumn Header="User Id" DisplayMemberBinding="{ Binding Path=UserId }"></GridViewColumn>
            <GridViewColumn Header="Name" DisplayMemberBinding="{ Binding Path=UserName }"></GridViewColumn>
            <GridViewColumn Header="Email Id" DisplayMemberBinding="{ Binding Path=Email }"></GridViewColumn>
            <GridViewColumn Header="Mobile" DisplayMemberBinding="{ Binding Path=Mobile }"></GridViewColumn>
            <GridViewColumn Header="Update" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Button Height="23" Name="button1" CommandParameter="{ Binding Path=UserId }" Click="button1_Click" Width="75">Button</Button>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:11:06.640

您需要创建一个`Command`（的子类`ICommand`）并将您的按钮命令属性设置为它。

您正在使用单击事件，所以我怀疑命令参数在您处理事件时是否可用。

如果您只对此 UserId 字段感兴趣，而不对 Command 的其他功能（如 CanExecute 等）感兴趣，则可以使用按钮的 Tag 属性，因为您可以通过后面的代码获得它。

```
 <Button Height="23" Name="button1" Tag="{Binding Path=UserId }" Click="button1_Click" Width="75">Button</Button> 
```

在您的 button1_click 事件中，您可以访问

```
var UserID = ((Button)sender).Tag; //cast the actual button in the grid 
```

# android - 如何通过使用现有活动中另一个活动的切换按钮来转移控制流

> ID：14621854
> 
> 赞同：2
> 
> 时间：2013-01-31T08:58:29.113
> 
> 标签：android, android-intent, toggle, togglebutton

我已经创建了一个应用程序，其中包含 4 个名为 Activity1.xml、Activity2.xml、Activity3.xml、Activity4.xml now.in 的活动。在活动 1 中我放了一个带有“是”和“否”的“切换按钮”，现在我的第一个活动也是有“下一个”按钮，当按下“activity2.xml”时会打开，它还有“下一个”按钮，现在的重点是当按下“activity2”的下一个按钮时，它会检查“activity1”的“toggleButton” ”，如果是“是”，则应转到“活动3”，否则应转到“活动4”...我已尝试如下，但无法正常工作，请帮助我，实际上我不知道您是如何做到的，请：

**Activity1.java**

```
btn2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             Intent intent = new Intent(Calculator_1Activity.this, Calculator2.class);
                intent.putExtra("toggleBtn", tg.isChecked());
                startActivity(intent);
        }
    }); 
```

在**activity2.java中**

```
 btn2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             if(val==true){
                    Intent iq=new Intent(Calculator2.this,Deposit.class);
                    startActivity(iq);
                }
                else{
                    Intent ir= new Intent(Calculator2.this,Calculator_3Activity.class);
                    startActivity(ir);
                }

        }
    }); 
```

还是行不通

我已经放了图片，以便更好地理解..

**Activity1.xml** ![在此处输入图像描述](../Images/1709983ea2f57aa19392aa6073209ab3.png) **Activity2 ** ![在此处输入图像描述](../Images/693157222273192b6599179a196eb7cd.png) **Activity3 ** ![在此处输入图像描述](../Images/ad6cb0ffad5bc8cfe1b1fe9eca1e89ee.png) **Activity4** ![在此处输入图像描述](../Images/73b1d8072d4a0aa46f84d7d7e695ba96.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:09:26.063

您将需要使用布尔字段来检查 ToggleButton 是否在单击其他 Activity（如 Activity1、Actitity2 等）的 Next 按钮时被单击...

用于`Intent.putExtra`将 ToggleButton 的状态发送到其他 Activity 为：

```
public static boolean status=false;
tg.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
     public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
          if (isChecked) {
             Intent ia = new Intent(Calculator_1Activity.this,Calculator2.class);
             status=true;
             ia.putExtra("tg_status", status); //<< send button status here
             startActivity(ia);
          } else {
              // The toggle is disabled
             Intent ib = new Intent(Calculator_1Activity.this,Calculator2.class);
             status=false;
             ia.putExtra("tg_status", status); //<< send button status here
             startActivity(ib);
           }
    }
}); 
```

在移动到其他活动之前，用于`tg_status`检查按钮是否被点击。

`Calculator_1Activity.status`您可以像在其他活动中一样直接访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:47:07.687

当从活动 1 打开活动 2 时，将切换按钮的值作为布尔值（选中或未选中）连同它一起发送到额外的意图中......并且只需在活动 2 中根据从活动 1 收到的值执行操作过程。 ..

```
 Intent intent = new Intent(this, NextActivity.class);
   intent.putExtras("toggleBtn", toggleButton.isChecked()); 
```

在activity2/NextActivity中通过oncreate获取toggle btn的值

```
 boolean val= getIntent().getExtras().getBoolean("toggleBtn"); 
```

基于下一个 btn 点击监听器中的 val start activity3 或 activity4

# android - 显示或隐藏标记取决于缩放级别

> ID：14621856
> 
> 赞同：7
> 
> 时间：2013-01-31T08:58:35.800
> 
> 标签：android, google-maps-android-api-2

我在地图上画了很多标记，当它们靠近时，它们会相互重叠。所以我想在小缩放时隐藏一些标记，并在用户缩放地图时显示更多标记。喜欢更多的放大，更多的标记。这是活动和创建标记的示例代码，如您所见，我正在使用 google maps android api v2：

```
public class MainActivity extends FragmentActivity
{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    GoogleMap map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
    map.getUiSettings().setMyLocationButtonEnabled(true);
    createMarkers(map);
}

private void createMarkers(GoogleMap map) {
    double initLat = 48.462740;
    double initLng = 35.039572;
    for(float i = 0; i < 2; i+=0.2) {
        LatLng pos = new LatLng(initLat + i,initLng);
        map.addMarker(new MarkerOptions()
                .position(pos)
                .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));
    }
    for(float i = 0; i < 2; i+=0.2) {
        LatLng pos = new LatLng(initLat, initLng + i);
        map.addMarker(new MarkerOptions()
                .position(pos)
                .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));
    }
} 
```

这对我来说听起来像是典型的任务，但我仍然没有找到可行的解决方案。我读过这篇文章[https://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)但我不知道如何在 android 上实现它。有没有人有一些可以做到这一点的工作代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:11:34.343

这是我对这个问题的解决方案：[https ://github.com/Bersh/MarkersCluster](https://github.com/Bersh/MarkersCluster)

也许这不是最好的解决方案，但它对我有用。希望它会有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T19:24:00.460

您基本上是在问如何在 Android 上实现集群。据我所知，谷歌没有提供解决方案来做到这一点。您在评论中引用的文档 ( [developers.google.com/maps/articles/toomanymarkers](http://developers.google.com/maps/articles/toomanymarkers) ) 指的是 google maps javascript API。不幸的是，Android 上还没有任何与集群相关的代码。

您必须提出自己的算法来对标记进行聚类。您指出的developers.google.com/maps/articles/toomanymarkers 文档可能是决定哪种算法最适合您的良好起点（基于网格的聚类、基于距离的聚类等）。

另一个更容易实现（但并不完美）的选项可能是在缩放级别发生变化时将标记图像更改为较小的图标，以便它们不会重叠太多。查看我对这个问题的回答：[https ://stackoverflow.com/a/13976080/1103584](https://stackoverflow.com/a/13976080/1103584)

您可以使用该答案来确定您何时越过“缩放阈值”，并在您缩小超过某个阈值时将标记更改为较小的值，并在您重新放大时更改为更大的图像。我用这个在我自己的几个应用程序中使用技巧，在缩小时将常规图标更改为小点图像，并在放大时返回常规图标。

# database - hadoop vs teradata 有什么区别

> ID：14621862
> 
> 赞同：10
> 
> 时间：2013-01-31T08:59:06.977
> 
> 标签：database, hadoop, teradata, business-intelligence

我接触了 Teradata。我从未接触过hadoop，但从昨天开始，我正在对此进行一些研究。通过对两者的描述，它们似乎可以互换，但在一些论文中写道，它们用于不同的目的。但我发现的都是模糊的。我很困惑。

有没有人有这两个经验？它们之间的严重区别是什么？

简单示例：我想构建 ETL，它将转换数十亿行原始数据并将它们组织到 DWH。然后对它们进行一些资源昂贵的分析。为什么要使用 TD？为什么选择 Hadoop？或者为什么不呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T19:58:37.757

我认为[这篇](http://gsl.azurewebsites.net/Portals/0/Users/dewitt/Papers/Hadoop/cacm2010.pdf)题为“MapReduce 和并行 DBMS：朋友还是敌人”的文章很好地描述了每种技术最有效的情况。简而言之，Hadoop 非常适合存储非结构化数据和运行并行转换以“清理”传入数据，其中 DBMS 擅长快速执行复杂的查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-25T17:56:22.033

# Hadoop、带扩展的 Hadoop、RDBMS 功能/属性比较

我不是这方面的专家，但在 coursera.com 课程“数据科学导论”中，有一个名为：比较 MapReduce 和数据库的讲座以及课程的 map reduce 部分中关于并行数据库的讲座。

以下是这些讲座中关于 MapReduce 与 RDBMS（不一定是并行 RDMBS）比较的总结。要记住的一点是，如果您包含对 Hadoop 的扩展，如 PIG、Hive 等，则比较是不同的。我将放入 () MapReduce 扩展，以添加其中一些功能/属性。

RDBMS 具有但不是本机 MapReduce 的一些功能/属性：

*   声明性查询语言 -（Pig、HIVE）
*   模式（Hive、Pig、DyradLINQ、Hadapt）
*   逻辑数据独立
*   索引（Hbase）
*   代数优化（Pig、Dryad、HIVE）
*   缓存/物化视图
*   酸/交易

MapReduce（相对于常规 RDBMS 不一定是 Parallel RDMBS）

*   高可扩展性
*   容错
*   “单人部署”</li>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-26T04:21:12.393

我多次被问到这个问题，我通常给出的答案是汽车类比（这很愚蠢，因为我不是汽车人 - 但它似乎有效）

*   Teradata 是面向大众的汽车/dbms - 它可靠、成熟、运行良好，并且在您需要时随时可用。很难（与 Hadoop 相比）为基础产品定制和添加功能。
*   Hadoop 是发烧友的汽车/dbms - 它不那么可靠或成熟，只要您关注它，它就可以很好地工作。很容易（与 Teradata 相比）为基础产品定制和添加功能。

换句话说，Teradata 是您放置关键任务流程（运营报告、企业报告、决策支持等）的可靠主力。Hadoop 是您可以做很多此类事情的地方，但是如果您有一天早上来到这里，发现您的监管报告无法生成，因为有人应用了补丁或者您突然得到了一个“太许多小文件”的问题。

回到类比，如果您不想太技术化并且制造商的产品（dbms 和/或汽车）开箱即用，Teradata 是一个不错的选择。另一方面，如果您想在引擎盖下修修补补，更换化油器（或其他），调整齿轮比，根据您是在乡村还是城市驾驶调整燃油空气混合物，安装涡轮增压器和/或者你的家人抱怨你周末在车库里呆了多长时间——Hadoop 是你的最佳选择。

恕我直言，大多数（如果不是所有）组织都需要两者。我希望这有帮助 ：-）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T09:47:38.623

首先，Vanilla Apache Hadoop 是 100% 开源的。但是，如果您需要商业支持和咨询服务，可以使用 Cloudera、MapR、HortonWorks 等公司。

Hadoop 得到了不断增长的社区的支持，该社区修复了错误并在一致的基础上进行了改进。Hadoop 存储模型 HDFS 基于 Google 的[GFS](http://research.google.com/archive/gfs.html)架构，该架构已被证明可以处理大量数据。此外 Hadoop 分析模型 Map Reduce 是基于 Google 的[Map Reduce Model](http://research.google.com/archive/mapreduce.html)。

Hadoop 被 Facebook、Yahoo、Twitter、EBay 等科技巨头用来实时和被动地存储和分析大量数据。

对于您的问题，ETL 系统请阅读这些[幻灯片](http://www.slideshare.net/esammer/large-scale-etl-with-hadoop-14940585)，您将在其中看到。

现在好了 为什么选择 Hadoop？

1.  开源
2.  经过验证的大量数据存储和分析模型
3.  设置和运行的最低硬件要求。

现在好了 为什么是TD？

1.  商业支持

# jquery - Chrome + JQuery Ajax POST 请求 + base64 编码字符串 = FAIL

> ID：14621865
> 
> 赞同：0
> 
> 时间：2013-01-31T08:59:15.543
> 
> 标签：jquery, ajax, google-chrome, post, base64

我必须通过 JQuery 将一些 base64 编码（特定于主机）的数据发送到我们的 Web 服务器，以生成序列号。所有的脚本都被最小化了，所以我可以保留整个逻辑 + 我发送的信息远离“好奇”的客户。它不是 100% 安全的，但它仍然提供了一些“保护”。

现在回到我的问题：整个事情在所有浏览器（IE6+、FF、Opera 和 Safari？，至少它在我上次检查它时运行良好），但不是较新版本的 Chrome。base64 编码的参数是空白的。我试图提醒我发送的值（JQuery 的 ajax 请求的数据参数），没关系。Chrome 如何检测 base64 字符串并对其进行修剪。

# java - 如何使用 GridLayout 中的特定元素？

> ID：14621870
> 
> 赞同：1
> 
> 时间：2013-01-31T08:59:53.467
> 
> 标签：java, swing, jframe, layout-manager, grid-layout

我在网格布局中向特定元素（网格？）添加图标时遇到问题。我的网格布局包含 64 个“砖块”，旨在用作棋盘。

我的网格代码如下所示：

**棋盘**

```
public class SjakkBrett extends JFrame implements Config {

public ChessBoard() {

    setSize(800,800);
    setLayout(new GridLayout(BRICKS/ ROWS, 0) );

    for (int id = 0; id < BRICKS; id++)         
        add(new Brick(id)); 

    setVisible(true);

} 
```

**配置**

```
public interface Config {
    public int ROWS= 8;
    public int BRICKS= 64;
} 
```

我的问题是我似乎无法找到将图标添加到板上特定积木的方法，例如`setIcon(new ImageIcon("pawn.png"));`因为我不知道如何使用我正在制作的积木 ID。

任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:38:36.273

要回答您的具体问题：

```
List<Brick> bricks = new ArrayList<Brick>();

public ChessBoard() {

    setSize(800,800);
    setLayout(new GridLayout(BRICKS/ ROWS, 0) );

    for (int id = 0; id < BRICKS; id++) {
        Brick brick = new Brick(id);        
        add(brick); 
        bricks.add(brick);
    }

    setVisible(true);

}

public void setBrick(int id, int piece) {
    bricks.get(id).setPiece(piece);
} 
```

为了回答您未提出的问题，让我们考虑一下国际象棋游戏。

![在此处输入图像描述](../Images/7d76441ee0792a7a6f365e1140891ee3.png)

棋盘已经有符号。典型的第一步是 e4。由于没有指定一块，这意味着一个棋子。唯一可以移动到 e4 的棋子是坐在 e2 上的棋子。因此，e4 是“将 pawn 从 e2 移动到 e4”的简写方式。

因此，我们有排列成板的砖块（正方形）。根据每块不同的规则，我们有能够从一块砖移到另一块的块。我们还有捕获规则和确定谁获胜的规则。

所有这些元素都必须以对象或方法的形式出现在游戏中。

所以，让我们谈谈对象。

我们有一块砖（正方形）。我们有一组称为板的砖块。我们有碎片。

这些对象是相互关联的。它们的共同点是位置的概念。

一块砖位于特定位置 (e2)。董事会需要知道如何将一个点 (e2) 转换为有意义的东西（第 1 行，第 4 列；假设第 0 行，第 0 列是左下角）。一块需要知道它的位置（e2），它可以合法去哪里（e3，e4），以及它将去哪里（e4）。

这应该足以让你开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T09:26:54.257

> 我猜想，用图标添加标签可能会让稍后为游戏制作可移动的部分变得更容易，但我仍然不知道如何将标签添加到网格布局中的特定 ID。BRICKS 只是从 Config 中获取它的信息，它在哪里声明（？）值 64。很抱歉，如果我在这里使用了错误的名称和东西，但我可以重新使用 java 来实际使用它。

*   查看[put/getClientProperty](https://stackoverflow.com/a/13531549/714968) ，然后从s数组或从数组中返回适当坐标的任何动作/事件`Keyboard`或`MouseXxxListener``JLabel``JButtons`

*   你可以有多个`put/getClientProperty`，没有任何限制

*   我将使用`JButton`（[在 API中](https://stackoverflow.com/questions/7918982/jbutton-only-working-when-mouse-hovers/7919280#7919280)[实现`setXxxIcon`](https://stackoverflow.com/questions/7918982/jbutton-only-working-when-mouse-hovers/7919280#7919280)）而不是`JLabel`（需要调用`repaint()`for `MouseMotionListener`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T13:00:42.217

我有这个代码，我用它作为我自己的国际象棋游戏的基础。

基本上由6个类组成：

*   `Test`基本上保存`main`和创建 GUI 以及将单个棋子加载到棋盘上。
*   `NotationPanel`用于在板的侧面显示行和列。
*   `Chessboard`它包含`ChessboardBlock`组成电路板的所有 s，还在适当的位置用黑白标签布置电路板。
*   `ChessboardBlock`它有一个固定的位置（即 A4 等）并且可以保存一个`ChessPiece`实例。
*   `ChessPiece`它保存`Piece`实例的数据/图像。
*   `ChessPieceMouseAdapter`处理 s 的拖放`Piece`：

![在此处输入图像描述](../Images/43b454e84ee7fd8b2e6bdda870642061.png)

典型动作的输出：

> 来自位置：A1 件类型：骑士件颜色：白色
> 
> 到位置：D3 件类型：骑士件颜色：白色

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import java.util.ArrayList;
import javax.imageio.ImageIO;
import javax.swing.*;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

                ChessPieceMouseAdapter chessPieceMouseAdapter = new ChessPieceMouseAdapter() {
                    @Override
                    boolean chessPieceSelected(ChessPiece chessPiece, ChessboardBlock cb) {
                        System.out.println("From Location: " + chessPiece.getLocation()
                                + " Piece Type: " + chessPiece.getType()
                                + " Piece Color: " + chessPiece.getColor());
                        return true;
                    }

                    @Override
                    void chessPiecePlaced(ChessPiece chessPiece, ChessboardBlock cb) {
                        cb.setPiece(new ChessPiece(chessPiece.getImage(),
                                chessPiece.getType(),
                                cb.getBlockLocation(),
                                chessPiece.getColor()));

                        System.out.println("To Location: " + cb.getChessPiece().getLocation()
                                + " Piece Type: " + cb.getChessPiece().getType()
                                + " Piece Color: " + cb.getChessPiece().getColor());
                    }
                };

                Chessboard chessBoard = new Chessboard(chessPieceMouseAdapter);
                chessPieceMouseAdapter.setChessboard(chessBoard);//or else NPE will be thrown when press/drag/release on chessboard occurs

                BufferedImage knightImage = null;
                try {
                    knightImage = ImageIO.read(new URL("http://i.stack.imgur.com/qdppY.png"));
                } catch (Exception e) {
                    e.printStackTrace();
                }
                ChessPiece knightPiece = new ChessPiece(knightImage, "Knight", null, "White");//location parameter can be null or anything will be set if matching block is found
                chessBoard.setChessPiece("A1", knightPiece);

                NotationPanel rows = new NotationPanel(new String[]{"8", "7", "6", "5", "4", "3", "2", "1"}, NotationPanel.VERTICAL);
                NotationPanel cols = new NotationPanel(new String[]{"A", "B", "C", "D", "E", "F", "G", "H"}, NotationPanel.HORIZONTAL);

                frame.add(rows, BorderLayout.WEST);
                frame.add(cols, BorderLayout.SOUTH);
                frame.add(chessBoard);

                frame.pack();
                frame.setVisible(true);
            }
        });
    }
}

class NotationPanel extends JPanel {

    final static String HORIZONTAL = "horizontal";
    final static String VERTICAL = "vertical";

    public NotationPanel(String[] strings, String direction) {
        if (direction.equals(VERTICAL)) {
            setLayout(new GridLayout(8, 0));
        } else {
            setLayout(new GridLayout(0, 8));
        }
        for (String string : strings) {
            this.add(new JLabel(string, JLabel.CENTER));
        }

    }
}

class Chessboard extends JPanel {

    private final ArrayList<ChessboardBlock> chessBoardBlocks;
    ChessPieceMouseAdapter chessPieceMouseAdapter;

    public Chessboard(ChessPieceMouseAdapter chessPieceMouseAdapter) {
        super(new GridLayout(8, 8));
        chessBoardBlocks = new ArrayList<>(64);
        layoutBoard();
        this.chessPieceMouseAdapter = chessPieceMouseAdapter;
        addMouseListener(this.chessPieceMouseAdapter);
        addMouseMotionListener(this.chessPieceMouseAdapter);
    }

    private void layoutBoard() {
        String[] cols = new String[]{"A", "B", "C", "D", "E", "F", "G", "H"};
        int[] rows = new int[]{1, 2, 3, 4, 5, 6, 7, 8};
        int NUMBER_OF_BLOCKS = 64;
        String row, col;
        int rowCount = 7, colCount = 0, trigger = 8;

        for (int i = 0; i < NUMBER_OF_BLOCKS; i++) {
            if (trigger == 0) {
                colCount = 0;
                trigger = 8;
                rowCount--;
            }
            col = cols[colCount++];
            row = String.valueOf(rows[rowCount]);
            trigger--;

            Color pieceHolderColor = ((rowCount + colCount) % 2 == 0 ? Color.WHITE : Color.BLACK);
            String pieceHolderLocation = col + row;

            ChessboardBlock pieceHolder = new ChessboardBlock(pieceHolderLocation, pieceHolderColor);
            pieceHolder.setPiece(null);

            add(pieceHolder);//add to the board
            chessBoardBlocks.add(pieceHolder);//add to piece holder array
        }
    }

    boolean setChessPiece(String location, ChessPiece piece) {
        for (int i = 0; i < chessBoardBlocks.size(); i++) {
            if (chessBoardBlocks.get(i).getBlockLocation().equalsIgnoreCase(location)) {
                chessBoardBlocks.get(i).setPiece(new ChessPiece(piece.getImage(),
                        piece.getType(), chessBoardBlocks.get(i).getBlockLocation(),
                        piece.getColor()));
                return true;
            }
        }
        return false;
    }

    public ArrayList<ChessboardBlock> getChessBoardBlocks() {
        return chessBoardBlocks;
    }

    @Override
    protected void paintChildren(Graphics g) {
        super.paintChildren(g);

        if (chessPieceMouseAdapter.isDragging()) {
            if (chessPieceMouseAdapter.getDraggedPiece() != null) {
                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);

                g2d.drawImage(chessPieceMouseAdapter.getDraggedPiece().getImage(),
                        chessPieceMouseAdapter.getDraggedPieceLocation().x, chessPieceMouseAdapter.getDraggedPieceLocation().y, this);
            }
        }
    }
}

class ChessboardBlock extends JLabel {

    private final Dimension labelDimensions = new Dimension(50, 50);
    private ChessPiece chessPiece;
    private String location;

    public ChessboardBlock(String location, Color backgroundColor) {
        //super(location,JLabel.CENTER);//puts location as text on label
        this.location = location;
        setBackground(backgroundColor);
        setOpaque(true);
    }

    @Override
    public Dimension getPreferredSize() {
        return labelDimensions;
    }

    void setPiece(ChessPiece p) {
        this.chessPiece = p;
        if (chessPiece == null) {
            setIcon(null);
        } else if (chessPiece.getImage() != null) {
            setIcon(new ImageIcon(chessPiece.getImage()));
        }
    }

    String getBlockLocation() {
        return location;
    }

    public ChessPiece getChessPiece() {
        return chessPiece;
    }
}

class ChessPiece {

    private BufferedImage image;
    private String location;
    private String type;
    private final String color;

    public ChessPiece(BufferedImage image, String type, String location, String color) {
        this.image = image;
        this.type = type;
        this.location = location;
        this.color = color;
    }

    public ChessPiece(ChessPiece p) {
        this.image = p.getImage();
        this.type = p.getType();
        this.location = p.getLocation();
        this.color = p.getColor();
    }

    public String getLocation() {
        return location;
    }

    public String getColor() {
        return color;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    public BufferedImage getImage() {
        return image;
    }

    String getType() {
        return type;
    }
}

abstract class ChessPieceMouseAdapter extends MouseAdapter {

    private Chessboard chessboard;
    private ChessPiece draggedChessPiece;
    private boolean dragging;
    private Rectangle pieceRectangle;
    private Point draggedPieceInitialLocation;
    private Point pressedPoint;

    public ChessPieceMouseAdapter() {
        dragging = false;
        draggedPieceInitialLocation = new Point();
        pressedPoint = new Point();
    }

    public Point getDraggedPieceLocation() {
        return new Point(pieceRectangle.x, pieceRectangle.y);
    }

    public ChessPiece getDraggedPiece() {
        return draggedChessPiece;
    }

    @Override
    public void mousePressed(MouseEvent me) {
        pressedPoint = me.getPoint();
        ArrayList<ChessboardBlock> chessBoardBlocks = chessboard.getChessBoardBlocks();
        for (int i = 0; i < chessBoardBlocks.size(); i++) {
            if (chessBoardBlocks.get(i).getChessPiece() != null) {
                pieceRectangle = chessBoardBlocks.get(i).getBounds();
                if (pieceRectangle.contains(pressedPoint)) {
                    ChessPiece chessPiece = chessBoardBlocks.get(i).getChessPiece();
                    if (chessPieceSelected(chessPiece, chessBoardBlocks.get(i))) {
                        draggedChessPiece = new ChessPiece(chessPiece);
                        chessBoardBlocks.get(i).setPiece(null);

                        draggedPieceInitialLocation.x = pieceRectangle.x;
                        draggedPieceInitialLocation.y = pieceRectangle.y;

                        dragging = true;
                        chessboard.repaint();
                    }
                    break;
                }
            }
        }
    }

    @Override
    public void mouseReleased(MouseEvent me) {

        ArrayList<ChessboardBlock> chessBoardBlocks = chessboard.getChessBoardBlocks();
        for (int i = 0; i < chessBoardBlocks.size(); i++) {
            pieceRectangle = chessBoardBlocks.get(i).getBounds();
            if (pieceRectangle.contains(me.getPoint())) {
                if (draggedChessPiece != null) {
                    chessPiecePlaced(draggedChessPiece, chessBoardBlocks.get(i));
                }
            }
        }
        dragging = false;
        draggedChessPiece = null;
        chessboard.repaint();
    }

    @Override
    public void mouseDragged(MouseEvent me) {
        dragging = true;
        pieceRectangle.x = me.getX() - (pressedPoint.x - draggedPieceInitialLocation.x);
        pieceRectangle.y = me.getY() - (pressedPoint.y - draggedPieceInitialLocation.y);
        chessboard.repaint();
    }

    boolean isDragging() {
        return dragging;
    }

    abstract boolean chessPieceSelected(ChessPiece chessPiece, ChessboardBlock cb);

    abstract void chessPiecePlaced(ChessPiece chessPiece, ChessboardBlock cb);

    void setChessboard(Chessboard chessBoard) {
        this.chessboard = chessBoard;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:34:57.127

首先，您有`new GridLayout(BRICKS/ ROWS, 0)`这表明您正在将布局设置为具有 0 列。（API 规定`GridLayout(int rows, int cols)`）

至于找到的问题`x, y coords`，你不需要。如果您有占位符（即自定义标签），您可以将背景颜色设置为对应于板单元格并将图像保存在单元格中。可以将图像设置在背景之上，以实现国际象棋的外观和感觉。在标签上有点击事件，这样当用户点击标签时，你需要做任何你需要做的事情（将一块移到/从一个单元格移到另一个单元格，玩家拿一块，检查棋盘是否有配对/检查配对等.)

您可以在标签上实现`MouseListener`'s`mousePressed`和`mouseReleased`方法以获得所需的开始和结束标签，如果您想要拖放功能，可以实现`MouseMotionListener`'s`mouseDragged`方法和`paint`板的自定义方法（不是标签）。

# jquery - jQuery Mobile 列表视图分页

> ID：14621871
> 
> 赞同：3
> 
> 时间：2013-01-31T08:59:58.227
> 
> 标签：jquery, jquery-mobile

jQuery Mobile listview 中处理长列表的有效方法是什么？以 1000 个项目为例，一次显示 1000 个项目将有效地使其对用户无用。想象一下滚动这么长的列表。

我正在考虑为列表视图实现自定义分页，除了滚动我自己的分页解决方案之外，还有更好的方法吗？

**更新请使用下面的小提琴示例检查我的更新答案

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T00:59:36.907

好的，我决定制作自己的延迟加载列表视图插件。事实证明，用户体验真的很棒！

对于那些仍在寻找长滚动列表解决方案的人来说，这只是一个提示。

- 更新

很抱歉，我之前没有时间发布示例，因为我不允许将我们使用的源代码发布到互联网上。现在我终于有空了，决定花几个小时来重建延迟加载的列表视图（我刚想出来）。

脚本：

```
var per_page = 20; //max images per page
var page = 1; //initialize page number
$(document).ready(function () {
    loadFlckr(20, 1); //load some images onload
});

//Handler for scrolling toward end of document
$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 100) {
        //End of page, load next content here
        if (!loading) loadNextPage();
    }
});

//Load content for next page
function loadNextPage() {
    loadFlckr(per_page, ++page);
}

//Load images from Datasource (Flickr in this case)
function loadFlckr(per_page, page) {
    loading = true; //interlock to prevent multiple calls
    $.mobile.loading('show');
    var flickerAPI = "http://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&format=json&api_key=2fd4e1a42e243e332b7e334aa219698e&user_id=74038643@N00&jsoncallback=?";

    //Calling to service provider
    $.getJSON(flickerAPI, {
        per_page: per_page || 20,
        page: page || 1
    })
        .done(function (data) {
        $.each(data.photos.photo, function (i, item) {
            var url = String.format("http://farm{0}.staticflickr.com/{1}/{2}_{3}_{4}.jpg", item.farm, item.server, item.id, item.secret, 't');
            var img = $("<img/>").attr("src", url);
            var li = $("<li/>").append(img);
            var title = $("<h2/>").append(item.title || 'No Title');
            var desc = $("<p/>").append(item.owner);
            li.append(title);
            li.append(desc);
            //Append new list item to listview
            li.appendTo("#list-lazyloader");
        });
        //refresh listview
        $('#list-lazyloader').listview('refresh');
        loading = false;
        $.mobile.loading('hide');
        //Update page index
        page = data.photos.page;
        //Update photos count
        $('#photoCount').text($('#list-lazyloader li').size());
    });
};

//C#-like feature to concat strings
String.format = function () {
    var s = arguments[0];
    for (var i = 0; i < arguments.length - 1; i++) {
        var reg = new RegExp("\\{" + i + "\\}", "gm");
        s = s.replace(reg, arguments[i + 1]);
    }
    return s;
} 
```

HTML：

```
<div data-role="header" data-position="fixed" data-theme="b">
     <h1>Photos (<span id="photoCount">0</span>)</h1>

</div>
<ul id="list-lazyloader" data-role="listview" data-theme="d"></ul> 
```

这是工作的小提琴：

[延迟加载列表视图](http://jsfiddle.net/fF675/154/ "延迟加载列表视图")

玩得开心 =)

2017 年 1 月 8 日更新：修复了损坏的 Flickr API，以防公众仍然对此解决方案感兴趣

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T16:56:46.633

试试这个解决方案：[https](https://github.com/stakbit/jQuery-Mobile-Listview-Pagination-Plugin) ://github.com/stakbit/jQuery-Mobile-Listview-Pagination-Plugin （我是这个插件的开发者）

这是一个简单的 jquery 移动列表视图分页插件，基本上在列表末尾添加了一个“显示更多”按钮（列表项计数和标签文本是可配置的），并且每次单击“显示更多”按钮时都会执行 Ajax 调用。还可以与启用的 jquery 移动搜索输入框一起使用，并且也可以进行缓存。

# mysql - 浮点类型比较

> ID：14621873
> 
> 赞同：1
> 
> 时间：2013-01-31T09:00:06.020
> 
> 标签：mysql, sql, floating-point

我插入了 pi 的差异值（见下文）：

```
3.14 
3.1415 
3.14159
3.14159265359 
```

我看不出不同浮点类型处理相同值的方式有什么不同。

代码：

```
mysql> select * from test_types;
+---------+---------+---------+----------+
| flo     | dub     | deci    | noomeric |
+---------+---------+---------+----------+
| 3.14000 | 3.14000 | 3.14000 |  3.14000 |
| 3.14150 | 3.14150 | 3.14150 |  3.14150 |
| 3.14159 | 3.14159 | 3.14159 |  3.14159 |
| 3.14150 | 3.14150 | 3.14150 |  3.14150 |
| 3.14159 | 3.14159 | 3.14159 |  3.14159 |
+---------+---------+---------+----------+
5 rows in set (0.00 sec)

mysql> describe test_types;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| flo      | float(10,5)   | YES  |     | NULL    |       |
| noomeric | decimal(10,5) | YES  |     | NULL    |       |
| deci     | decimal(10,5) | YES  |     | NULL    |       |
| dub      | double(10,5)  | YES  |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
4 rows in set (0.00 sec) 
```

我可以在这里看到，在创建表格时，数字类型的字段使用了 DECIMAL（请参阅描述命令表）。

请问有谁知道显示浮点数、十进制和双精度之间差异的示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:01:38.987

**FLOAT**和**DOUBLE**用于非常小的值或非常大的值。

本质上它们是相同的（除了存储大小 FLOAT 4 字节与 DOUBLE 8 字节不同，请参阅[数据类型存储要求](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)）

它们的主要特点是它们是近似的（参见[Oracle 网站引述](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/floating-point-types.html)）：

> 因为浮点值是近似值而不是存储为精确值，所以在比较中尝试将它们视为精确值可能会导致问题。它们还受平台或实现依赖关系的影响。

**DECIMAL**允许精确表示，但您的**DECIMAL**列不能很好地用于 PI 的原因是因为您只允许 5 个小数位，但是您输入了 11 个小数位。

将 PI 值精确存储到小数点后 11 位的最佳方法是`DECIMAL(12,11)`.

**有关以DECIMAL**形式存储的值与以**FLOAT**形式存储和使用的相同值不同的实际示例，请参见下文：

```
CREATE TABLE decimal_vs_float_test
( dec DECIMAL(12,11)
, fl FLOAT
);

INSERT INTO decimal_vs_float_test VALUES
  ( 3.947947949 , 3.947947949 )
 ,( 3.777777777 , 3.777777777 )
 ,( 3.555555555 , 3.555555555 )
 ,( 3.333333333 , 3.333333333 )
 ,( 3.111111111 , 3.111111111 ) 
 ;

SELECT * FROM decimal_vs_float_test WHERE fl = dec 
```

现在您可以看到**DECIMAL**或**FLOAT**的值被不同地处理。

希望有帮助。

此外， **FLOAT**和**DOUBLE**是浮点二进制点类型，而**DECIMAL**是浮点小数点类型。

有关这意味着什么的更确切的详细信息，请参阅[**此答案**](https://stackoverflow.com/questions/618535/what-is-the-difference-between-decimal-float-and-double-in-c/618596#618596)，类型编码方式之间的区别以及何时最好使用哪种类型（它适用于 C#，但它仍然很有趣）。

# sorting - solr dismax lower boost for empty values

> ID：14621877
> 
> 赞同：0
> 
> 时间：2013-01-31T09:00:28.773
> 
> 标签：sorting, solr, dismax

I have a SOLR document which looks like this:

```
<doc>
    <float name="score">1.7004467</float>
    <str name="name">Love</str>
    <str name="id">15801637</str>
    <int name="itemCount">3</int>
    <date name="last_modified">2012-08-10T11:04:28Z</date>
    <str name="emailaddress"/>
</doc>

<doc>
    <str name="name">Love</str>
    <str name="id">158015757</str>
    <int name="itemCount">3</int>
    <date name="last_modified">2012-08-10T11:04:28Z</date>
    <str name="emailaddress">xxx@yy.com</str>
</doc> 
```

I want to write a query that matches documents by name, but boost records with `emailaddress` to appear on top, and without `emailaddress` toward the bottom.

I don't want to sort by email address. I prefer using dismax (i am presenting a simplified problem here).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:08:49.987

检查例如[Boost Score](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents)或如果您使用 Dismax 解析器检查参数[Boost Query](http://wiki.apache.org/solr/DisMaxQParserPlugin#bq_.28Boost_Query.29)

`emailaddress:[* TO *]`应包含具有值的电子邮件地址

根据你的情况你可以试试`bq=emailaddress:[* TO *]^2.0`

# ruby - 如何将 N 天添加到时间 T（考虑夏令时）？

> ID：14621878
> 
> 赞同：6
> 
> 时间：2013-01-31T09:00:29.910
> 
> 标签：ruby, time

我有一个时间对象 T。将 N 天添加到 T 的合理方法是什么？

我想出的最好的感觉有点折磨：

```
require 'date'
def add_days(time, days)
  time.to_date.next_day(days).to_time
end 
```

PS：如果你在美国，正确答案必须满足：

```
add_days(Time.new(2013, 3, 10, 0), 1) == Time.new(2013, 3, 11, 0) 
```

如果您在欧盟，正确答案必须满足：

```
add_days(Time.new(2013, 3, 31, 0), 1) == Time.new(2013, 4, 1, 0) 
```

PPS：这是一个 Ruby 问题，而不是 Rails 问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T09:02:16.673

`Time`有一个接受秒的[`+`方法。](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-2B)

```
N = 3

t = Time.now + N * 86400 # 24 * 60 * 60 
```

或者，如果您引入 ActiveSupport，它会更容易

```
require 'active_support/core_ext'

t = Time.now + N.days 
```

你显然可以做你自己的帮手

```
class Fixnum
  def days
    self * 86400
  end
end

t = Time.now # => 2013-01-31 16:06:31 +0700

t + 3.days # => 2013-02-03 16:06:31 +0700 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T17:29:48.303

似乎已经成为我的风格，我正在回答我自己的问题。

由于跨 DST / ST 的转换相当罕见（在世界许多地方，不存在），更有效的方法是首先添加 (n_days * 24 * 60 * 60) 秒，然后检查 UTC 偏移量是否已更改。如果有，则创建一个更正的时间对象。

像这样：

```
def add_days(time, n_days)
  t2 = time + (n_days * 24 * 60 * 60)
  utc_delta = time.utc_offset - t2.utc_offset
  (utc_delta == 0) ? t2 : t2 + utc_delta
end 
```

这种方法避免了许多额外的对象创建，并正确处理夏令时之间的转换（至少在我当前的时区，太平洋时间）：

```
>> t1 = Time.new(2013, 3, 10, 0, 0, 0)
=> 2013-03-10 00:00:00 -0800  # midnight Mar 3, 2013 Pacific Standard Time
>> t2 = add_days(t1, 1)
=> 2013-03-11 00:00:00 -0700  # midnight Mar 4, 2013 Pacific Daylight Time
>> t2 - t1
=> 82800.0                    # a shorter than usual day

>> u1 = Time.new(2013, 11, 3, 0, 0, 0)
=> 2013-11-03 00:00:00 -0700  # midnight Nov 3, 2013 Pacific Daylight Time
>> u2 = add_days(u1, 1)
=> 2013-11-04 00:00:00 -0800  # midnight Nov 4, 2013 Pacific Standard Time
>> u2 - u1
=> 90000.0                    # a longer than usual day 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-21T16:17:10.767

[ActiveSupport::TimeWithZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)似乎处理得很好

```
> t1 = ActiveSupport::TimeZone['Eastern Time (US & Canada)'].parse('2013-03-10')
 => Sun, 10 Mar 2013 00:00:00 EST -05:00 
```

注意下面的类类型：

```
 > t1.class
 => ActiveSupport::TimeWithZone 
```

注意从上面的 EST 到下面的 EDT 的变化：

```
> t1 + 1.day
 => Mon, 11 Mar 2013 00:00:00 EDT -04:00 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-06T02:41:47.580

这有点横向答案，但是因为在您最初的问题中您并不关心 HMS 部分，所以使用对象不是`Time`更好吗？`Date`

```
require 'date'
t=Time.now
d=Date.parse(t.to_s)
puts d+1 # => gives you tomorrow's day (YMD) 
```

**编辑：**添加`require 'date'`以提高答案的全面性，如评论部分所述。

# encoding - 在 Unix 中将 ASCII 转换为 BIG5 编码

> ID：14621880
> 
> 赞同：0
> 
> 时间：2013-01-31T09:00:33.647
> 
> 标签：encoding, character-encoding, ascii, big5

我们可以从 ASCII 更改为 BIG5 吗？

实际上，我必须从 ASCII 格式生成 BIG5 格式的文件，但我无法找到更改文件编码的方法。我在这里创建的文件包含中文数据，它不以 ASCII 格式显示，只能以 BIG5 格式显示。所以一旦我创建了一个 ASCII 文件，我需要将其转换为 BIG5。所以这就是为什么我需要它转换为 BIG5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:15:50.433

我不知道 ASCII 编码的文件如何包含中文数据，但如果可能的话，这将是命令：

`iconv -f ASCII -t BIG5 asciifile -o big5file.txt`

它会将您的文件`ASCII`编码转换为`BIG5`并将输出写入`big5file.txt`.

但很可能它不是原始文件中的 ASCII。确保检测到准确的编码，然后在命令中使用它。用于`iconv -l`查看所有可用的编码。

[`chardet`](https://pypi.org/project/chardet/)您可以尝试使用or找出真正的编码[`cchardet`](https://pypi.org/project/cchardet/)。如果在您的终端中不可用，您可以使用`pip install chardet`（或`pip install cchardet`）安装它。

安装后，将文件名作为第一个参数传递：

```
 chardet Tian.Jiang.Xiong.Shi.srt 
      >>> Tian.Jiang.Xiong.Shi.srt: GB2312 with confidence 0.99 
```

> ^(如果您使用 pip3 安装，则脚本名称将是**chardet3**或**chardetect3**。)

# javascript - 限制数字函数但允许字母数字值的 Javascript 函数

> ID：14621881
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:00:38.083
> 
> 标签：javascript, regex

我陷入了一个问题......这是我的代码，它限制特殊字符，但我想要一个限制特殊字符、数字但允许字母数字值的逻辑......例如：

*   有效：a1,4r,aa。
*   无效：w@,12,@!。

    功能检查(e)

{

```
var keynum;
var keychar;
var numcheck;
if(window.event) // IE
{
    keynum = event.keyCode;
}
else if(e.which) // netscape/Firefox/opera
{
    keynum = e.which;
}

//condition for backspace(8) Key
if(keynum != 8)
{
    keychar = String.fromCharCode(keynum);
    numcheck = /[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]*/;
    return numcheck.test(keychar);
}
else
{
    return true;
} 
```

}

```
 User id : <input type="text" id="txtname" name="txtname" onkeypress="return check(event)"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:06:59.703

SO本身的字母数字验证：

```
var reg_password1 = 'tes123';
var letters = /^[a-zA-Z0-9]+$/;

var result = letters.test(reg_password1);

alert(result); 
```

[看到这个问题](https://stackoverflow.com/questions/11532982/jquery-alphanumeric-validation)

[小提琴不是我](http://jsfiddle.net/DBEfG/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:12:23.547

我认为这是您需要的正则表达式：

```
^[A-Za-z0-9]*[A-Za-z]+[A-Za-z0-9]*$ 
```

它匹配零个或多个字母数字字符，后跟至少一个字母，后跟零个或多个字母数字字符。

所以它允许`aa`并且`0r`

并且不允许`99`或序列包含非字母数字字符。

您的问题说**只允许使用字母数字字符。**你的例子说**aa。**应该被允许。如果是这样，请使用：

```
^[A-Za-z0-9.]*[A-Za-z]+[A-Za-z0-9.]*$ 
```

它允许`.`与至少一个字母一起使用，例如**.aa**和**aa。**

像这样检查它：

```
numcheck.test(inputString); 
```

哪里`inputString`是输入 like `a23`，哪些是匹配的，`we`哪些是不匹配的`.aa``12``k@`

`numcheck`是`/[A-Za-z0-9.]*[A-Za-z]+[A-Za-z0-9.]*/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:14:16.150

我相信这会满足您的需求。

```
[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]* 
```

这将仅限制诸如 12、13 等数字，现在将允许任何特殊字符，并且根据需要，将允许包含字母和数字的单词，例如 asd12、12asd12、12asd 等。

# audio-streaming - 即使没有加载整个文件，也可以从任何地方开始播放 HTML5 音频

> ID：14621884
> 
> 赞同：0
> 
> 时间：2013-01-31T09:00:47.260
> 
> 标签：audio-streaming, audiojs

我在我的页面上使用[audio.js](http://kolber.github.com/audiojs/)来播放 mp3。
一些 mp3 的大小超过 100MB。
例如：我有一个 124 MB 的 mp3 文件，它没有完全加载 - 由于互联网连接速度慢，加载程序加载文件缓慢。但是当我点击中间的播放器栏时，我希望它从那里开始播放。这在 HTML5/audiojs 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:12:04.310

您的服务器需要支持范围请求，这允许客户端指定它需要的特定内容范围。配置服务器后，为利用此功能而构建的任何客户端代码都将开始工作。

你可以在这里找到一个例子： [https ://stackoverflow.com/a/8507991/362536](https://stackoverflow.com/a/8507991/362536)

# jquery - jQuery rotate (revolve by degrees) background image

> ID：14621887
> 
> 赞同：4
> 
> 时间：2013-01-31T09:01:05.957
> 
> 标签：jquery, rotation, jquery-animate, background-image

# What I need:

An animated rotation (revolution) of a background image by an arbitrary amount of degrees. Ideally the animation is activated on the call-back of another animation.

# What I have:

A container div with a background image that contains additional divs (only the image is required to rotate and not the div or div content).

# Terminological confusion:

In jQuery, the word "rotate" seems to mean **cyclically interchange**. My definition of "rotate", for the purposes of this thread, refers to **the two dimensional revolution by degrees of an object using the z-plane as a central axis**. The terminological overlap makes it difficult to research this matter using search engines.

# Disappointment:

I expected something as basic as the animated rotation (revolution) of an image or background image to be a standard requirement and therefore a default functionality of jQuery. Instead, the best I can find is a jquery-rotate plugin that doesn't highlight obvious support for background-images and what it does support, isn't even cross-browser friendly.

**EDIT:** *The jquery-rotate plugin supports IE6+ and other older browsers by falling back to CANVAS and VML for standard objects though I'm as of yet uncertain as to what the support is for background-images.*

# Cross-browser:

Cross-browser support is essential. For this reason, CSS alternatives or jQuery/CSS hybrid alternatives will not meet my requirements. A minimum of IE6+ support is acceptable.

# My question:

Am I overlooking obvious solutions or is jQuery not able to animate the rotation (revolution) of a background image despite being able to achieve far more complex feats?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:39:51.670

首先，没有真正的方法来为 a 设置动画`background-image`——无论你如何实现这一点，你都需要创建一个单独的元素（更多内容请参见脚注 #1）。

其次，旋转不是一个简单的概念，但在符合尖端标准的世界中，可以使用 CSS3`transform`和`transition`s 的组合。

第三，IE6 将需要使用专有的非标准技术来模拟这一点。[VML 是一种选择，但微软实际上使用专有的过滤器](http://msdn.microsoft.com/en-us/library/ms532847(v=vs.85).aspx)属性实现了很多 CSS3 。转换是不可能的，但您可以使用 Javascript随时间动态修改`filter`和属性。`transform`

尽管如此，所有这些都需要大量的 polyfill，而在其他地方开发的定制开箱即用解决方案是您最好的选择。我的建议是使用优秀的[CSS Sandpaper](http://www.useragentman.com/blog/2010/04/05/cross-browser-animated-css-transforms-even-in-ie/)。

### 1\. 创建一个单独的 DOM 元素来包含图像

像这样的东西应该可以工作（我已经使用`<b></b>`它缺乏语义含义）：

```
<div class="container">
    <b class="background"></b>
    <div class="foreground">
        [content/]
    <div>
</div>

.container, 
.foreground {
    position: relative;
}

.background {
    background: yourImage.jpg;
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:02:44.840

带有 HTML 画布的 Kinetic.js 提供了一些简单有效的旋转功能，您可以尝试在其中设置所需的旋转度 --- 我用它在 www.threeblokesfromchina.com 上为球设置动画，您也可以在谷歌上搜索教程

# sql - Problems translating an SQL query to LINQ in VS Lightswitch

> ID：14621889
> 
> 赞同：0
> 
> 时间：2013-01-31T09:01:15.450
> 
> 标签：sql, linq, entity-framework, visual-studio-lightswitch

So, I am having an issue with an SQL query that is translated LINQ (and works - tested), but that same LINQ query does not work in Lightswitch. Of course I did not expect to work straight out, but I am struggling to properly convert it.

So here is a image of the tables that I base my query on:

[http://dl.dropbox.com/u/46287356/tables.PNG](http://dl.dropbox.com/u/46287356/tables.PNG)

(sorry for outside link, but not enough rep points :))

The SQL query is the following:

```
SELECT WorkingUnits.Name AS WUName, ContractPositions.WUInstanceId,
   Materials.Cost, BillingValues.Value, BillingValues.PricePerUnit
FROM WorkingUnits 
  INNER JOIN
   Materials ON WorkingUnits.Id = Materials.Material_WorkingUnit 
  INNER JOIN ContractPositions ON 
   Materials.Id = ContractPositions.ContractPosition_Material 
  INNER JOIN BillingValues ON 
   ContractPositions.Id = BillingValues.BillingValue_ContractPosition 
```

Now, I have transformed this to LINQ in the following way:

```
 var query = from wu in this.DataWorkspace.ApplicationData.WorkingUnits
             join m in this.DataWorkspace.ApplicationData.Materials on 
                new { Id = WorkingUnits.Id } equals new { Id = m.Material_WorkingUnit }
             join cp in this.DataWorkspace.ApplicationData.ContractPositions on 
                new { Id = m.Id } equals new { Id = cp.ContractPosition_Material }
             join bv in this.DataWorkspace.ApplicationData.BillingValues on 
                new { Id = cp.Id } equals new { Id = bv.BillingValue_ContractPosition }
             select new
             {
                 usage = bv.Value * bv.PricePerUnit,
                 totalCost = (bv.Value * bv.PricePerUnit) * m.Cost, 
                 amount = (bv.Value*bv.PricePerUnit) * m.Cost / wu.WUPrice
             }; 
```

Notice that I have changed a few things - like section of colums, as I do not need that in Lightswitch.

So while this works agains the SQL server, Lightswitch complains that I must consider explicitly specifying the type of the range variable 'WorkingUnits'. I tried to cast it, but then there are other errors such as:

```
 'int' does not contain a definition for 'Id' and no extension method 'Id' 
  accepting a first argument of type 'int' could be found (are you missing 
  a using directive or an assembly reference?) 
```

So my questions is, how do I properly convert that query and expect it to work? Also, If we take that my database is setup correctly, do I even need to use 'joins' in the LINQ? Any ideas are appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:17:14.800

尝试这样的事情

```
var query = from wu in this.DataWorkspace.ApplicationData.WorkingUnits
                 join m in this.DataWorkspace.ApplicationData.Materials on 
                   wu.Id  equals m.WorkingUnitID }
                 join cp in this.DataWorkspace.ApplicationData.ContractPositions on 
                    m.Id  equals cp.ContractPosition_Material 
                 join bv in this.DataWorkspace.ApplicationData.BillingValues on 
                   cp.Id equals bv.BillingValue_ContractPosition 
                 select new
                 {
                     usage = bv.Value * bv.PricePerUnit,
                     totalCost = (bv.Value * bv.PricePerUnit) * m.Cost, 
                     amount = (bv.Value*bv.PricePerUnit) * m.Cost / wu.WUPrice
                 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:35:19.877

从底部（BillingValues）开始并使用实体引用向上工作呢？

例如

```
 var query = from bv in this.DataWorkspace.ApplicationData.BillingValues
     let m = bv.ContractPosition.Material  
     let wu = m.WorkingUnit
     select new
     {
          usage = bv.Value * bv.PricePerUnit,
          totalCost = (bv.Value * bv.PricePerUnit) * m.Cost, 
          amount = (bv.Value*bv.PricePerUnit) * m.Cost / wu.WUPrice
     }; 
```

# ios - 一个视图控制器中的两个警报视图 - buttonIndex 响应

> ID：14621891
> 
> 赞同：5
> 
> 时间：2013-01-31T09:01:15.770
> 
> 标签：ios, objective-c, uialertview

我正在尝试在单个视图控制器中执行具有两个警报的微笑任务。下面的代码工作正常，但我将如何在视图控制器的其他地方创建另一个实例。我担心如果我复制代码，我的 buttonIndex 将不知道它正在响应哪个警报。有任何想法吗？谢谢！

```
-(void)alertChoice
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title"
    message:@"Message" delegate:self
    cancelButtonTitle:@"Cancel" otherButtonTitles:@"Confirm", nil];
    [alert show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1) 
    {
    //do something
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T09:04:42.470

您可以使用`tag`on 属性`UIAlertView`来破译哪个警报是哪个：

```
-(void)alertChoice
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title"
    message:@"Message" delegate:self
    cancelButtonTitle:@"Cancel" otherButtonTitles:@"Confirm", nil];
    alert.tag = 0;
    [alert show];
}

-(void)alertChoice1
{
    UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"Title"
    message:@"Message" delegate:self
    cancelButtonTitle:@"Cancel" otherButtonTitles:@"Confirm", nil];
    alert1.tag = 1;
    [alert1 show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(alertView.tag == 0)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:04:44.737

将标签设置为警报视图。

```
alert.tag = 1;

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1 && alertView.tag == 1) 
    {
    //do something
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T09:06:46.227

只需为每个警报视图设置一个标签，然后检查哪个发送了消息。

```
alertView.tag=0; 
```

进而

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

if(alertView.tag==0){

      if(buttonIndex == 0)//OK button pressed
     {
       //do something
     }
     else if(buttonIndex == 1)//Annul button pressed.
     {
      //do something
     }
}else{

  if(buttonIndex == 0)//OK button pressed

       {
        //do something
      }
      else if(buttonIndex == 1)//Annul button pressed.
    {
    //do something
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T10:09:27.867

第 1 步：在视图 controller.h 文件中添加**UIAlertViewDelegate**

第 2 步：在 view controller.m 文件中添加以下方法

```
-(void)AlertMethodOne
{
  UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"AlertMethodOne" message:@"AlertMethodOne successfully Called" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil];
    alert.tag=101;
    [alertview show];  
}

-(void)AletrMethodTwo
{
UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"AletrMethodTwo" message:@"AlertMethodTwo successfully Called" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil];
alert.tag=102;
    [alertview show]; 
} 
```

在 viewController 中调用上述两个方法，如下所示： [self AlertMethodOne]; [自我警报方法二];

现在 AlertView 按钮单击方法

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if(alertView.tag==101)
{
   if (buttonIndex == 0)
   {
   }
}
if(alertView.tag==102)
{
   if (buttonIndex == 1)
   {  
   }
}
} 
```

# java - Ajax 函数总是返回一个 0 并且不再继续

> ID：14621903
> 
> 赞同：2
> 
> 时间：2013-01-31T09:01:46.433
> 
> 标签：java, ajax, jsp, struts2

我有脚本代码：

```
<script type="text/javascript" >

     var xmlHttp=null;
    function GetXmlHttpObject()
    {

        try
        {
            // Firefox, Opera 8.0+, Safari
            xmlHttp=new XMLHttpRequest();
        }
        catch (e)
        {
            //Internet Explorer
            try
            {
                xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch (e)
            {
                xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
        }
        return xmlHttp;
    }
    function popSubCategory(){
        xmlHttp=GetXmlHttpObject()
        if (xmlHttp==null)
        {
            alert ("Browser does not support HTTP Request")
            return;
        }

        var url="<%= request.getContextPath()%>/populatePropertySubCategory.action";
          alert(url);

        xmlHttp.onreadystatechange=stateChangedmp();
        xmlHttp.open("POST",url,true);
        xmlHttp.send(null);
    }
    function stateChangedmp(){

        alert("Hello "+xmlHttp.readyState);
        if(xmlHttp.readyState==4)
        alert("lk"+xmlHttp.responseText);
    }
</script> 
```

我的`Action`方法是

```
public String populatePropertySubCategory() {
        System.out.println("sub property called " );

        String errorXml = "This is a Sample to Check";

        response.setContentType("text/html");
        response.setHeader("Cache-Control", "no-cache");
        try {
            response.getWriter().write(errorXml);
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

        return SUCCESS;

    } 
```

我的动作支持 xml 是

```
 <action name="populatePropertySubCategory" method="populatePropertySubCategory" class="PropActionSupport">
            <interceptor-ref name="validation">
            <param name="excludeMethods">populatePropertySubCategory</param>
        </interceptor-ref>
        <result name="success" type="tiles" >
           submitProperty
            </result>
        </action> 
```

现在，当我调用此代码时，警报仅 0 并且不打印响应文本。

我已经实现了`ServletResonseAware`接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:45:27.753

只需尝试更改 javascript 方法

```
xmlHttp.onreadystatechange=stateChangedmp(); 
```

到

```
xmlHttp.onreadystatechange=function myFun {stateChangedmp();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:17:25.073

`class`属性需要类的完整限定名，包括包。

而且您只使用一个`Interceptor`，而不是所有堆栈加上自定义的`Validation`拦截器；

将它们更改为：

```
<action name="populatePropertySubCategory" 
        method="populatePropertySubCategory"
        class="org.foo.bar.PropActionSupport">

     <interceptor-ref name="defaultStack">
         <param name="validation.excludeMethods">
            populatePropertySubCategory
         </param>
     </interceptor-ref>

     <result name="success" type="tiles" >submitProperty</result>
</action> 
```

PS：这是最明显的问题，但可能是 javascript 和结果图块部分中的其他问题：&

# c# - “简化条件三元表达式”

> ID：14621907
> 
> 赞同：22
> 
> 时间：2013-01-31T09:01:56.780
> 
> 标签：c#, asp.net, resharper

```
var foo = context.FOOTABLE.FirstOrDefault(); 
var bar = foo != null ? foo.SomeBool : false; 
```

Resharper 告诉我`Simplify conditional ternary expression`。但我觉得这里有必要进行空检查，因为`FirstOrDefault()`可以返回空。

那么，谁错了，我还是 Resharper？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-31T09:22:01.497

首先，一个完整的例子：

```
class Foo
{
    public bool SomeBool { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var foo = MaybeFoo();

        var bar = foo != null && foo.SomeBool;

    }

    static Foo MaybeFoo()
    {
        return new Random().Next() < 10 ? null : new Foo();
    }
} 
```

这`MaybeFoo`是一个有时返回`null`有时返回的方法`Foo`。我已经使用过`Random`，因此 R# 不会自动确定它始终为空或非空。

现在，正如你在这一行所说的：

```
 var bar = foo != null ? foo.SomeBool : false; 
```

R# 提供检查**Simplify 条件运算符**。这是什么意思？好吧，像往常一样，我们可以`Alt`+`Enter`并接受建议，看看它想用什么替换它，在这种情况下是：

```
 var bar = foo != null && foo.SomeBool; 
```

现在，关于您的担忧：

> 但我觉得这里有必要进行空检查，因为 FirstOrDefault() 可以返回空。
> 
> 那么，谁错了，我还是 Resharper？

好吧，简而言之，你就是。这里仍然会进行空值检查，并且**运算`&&`符是短路的**，所以第二个操作数 ( `foo.SomeBool`)**只有在第一个是 时才会被计算`true`**。`NullReferenceException`所以在 when `foo`is的情况下不会有 a `null`；第一次检查将失败，`bar`将被分配`false`。

所以这两行

```
 var bar = foo != null ? foo.SomeBool : false; 
```

和

```
 var bar = foo != null && foo.SomeBool; 
```

are **semantically equivalent**, and R# as usual prefers the more concise version (in particular, explicit `true`s and `false`s in conditionals are often a mark of redundant code). You may not, in which case you could turn off this inspection.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T09:17:16.313

ReSharper 建议将您的代码更改为：

```
var bar = foo != null && foo.SomeBool; 
```

这与三元运算完全相同，但看起来更好。您的代码逻辑不会改变。

# asp.net-mvc - Windows Identity Foundation 4.5

> ID：14621909
> 
> 赞同：0
> 
> 时间：2013-01-31T09:01:58.383
> 
> 标签：asp.net-mvc, asp.net-membership, wif

Is there a way to authenticate a user using WIF 4.5 and Membership provider? Please tell me more about claims. How can I pass my passowrd as a claim, as there are no Claim Types. Any help would be appreciated?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:09:36.127

我建议您从基于声明的架构的基础知识开始。看看这些：

1.  [索赔简介](http://msdn.microsoft.com/en-us/library/ff359101.aspx)
2.  [基于声明的架构](http://msdn.microsoft.com/en-us/library/ff359108.aspx)

它们是非常通用的介绍，与具体实现几乎没有联系。

# virtual - Logical Address to Physical Address in Page Table

> ID：14621918
> 
> 赞同：0
> 
> 时间：2013-01-31T09:02:46.343
> 
> 标签：virtual, memory-address

I really dont know where to start in the following question and how scoured the internet for hints.

If anyone could point me in the right direction or let me know a way of tackling this question it would be great.

Explain clearly how a logical address is translated to a physical address in a computer system that uses a two level page table with the following details:

Each address has 32 bits. The lower order 16 bits are used as the offset. The higher order 16 bits are divided into two parts of 8 bits each for accessing the two-level page tables.

What is the total number of pages possible in the virtual memory of this computer? What is the size of a page?

I understand the following but cant really go any further:

The logical address is generated by the CPU and divided into:

A page number which is used as an index in a page table which contains the base address of each page in physical memory.

The page offset combined with the base address is then used to define the physical memory address that is sent to the memory unit.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:18:59.200

您需要阅读的只是来自`Modern Operating System 2'nd or 3'rd edition`by的 Memory 章节`A.S.Tanenbaum`。他解释了 2 级内存分配，我相信它会回答您的问题。

# javascript - 带有 appendchild 的新 div 内的 div

> ID：14621919
> 
> 赞同：2
> 
> 时间：2013-01-31T09:02:47.060
> 
> 标签：javascript

我有这个函数可以创建一个带有类名的新 div。
现在我想在创建的 div 中添加一个新的 div。但是什么也没发生。当我使用 Chrome 查看控制台时，新 div 内没有任何内容呈现...

有任何想法吗？

```
function diceWrapper(){
    var wrappId=document.createElement("div");
    document.getElementById("page-content-wrapper").appendChild(wrappId);
    document.getElementsByTagName("div")[3].setAttribute("class", "dice-window-wrapper");
}

function menubar(){
    var menuid=document.createElement("div");
    document.getElementById("dice-window-wrapper").appendChild(menuid);
    document.getElementsByTagName("div")[4].setAttribute("class", "dice-menubar-wrapper");
} 
```

虽然我已经在问了，但新创建的`<div class="dice-window-wrapper"`.
继续下推一些其他应该在这个 div 类之前的元素。即使属性是`[0]`和`[1]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:15:17.643

似乎您正在尝试找到新创建的`<div>`然后对其进行修改。最好先进行所有修改，然后再将其添加到文档中。

```
function createElementWithClass(elementName, className)
{
    var el = document.createElement(elementName);

    el.className = className;

    return el;
}

var outerDiv = createElementWithClass('div', 'dice-window-wrapper'),
innerDiv = createElementWithClass('div', 'dice-menubar-wrapper');

outerDiv.appendChild(innerDiv);

document
  .getElementById("page-content-wrapper")
  .appendChild(outerDiv); 
```

# ubuntu - how to install jdk in ubuntu without an internet

> ID：14621923
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:03:15.383
> 
> 标签：ubuntu, java

Right now I don't have a working internet connection on my Ubuntu 12.10 . So is there a way to download some kinda archive or debian package and copy it to my Ubuntu and then install it ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:27:07.153

您可以从他们的网站下载 oracle jdk 并将其安装在您的 ubuntu 机器上，无需连接互联网

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:59:55.467

如果你能在机器上得到它，你可以安装大多数任何 .deb 或包。

# excel - 使用EXCEL UDF在另一张表中填充单元格值，颜色

> ID：14621925
> 
> 赞同：0
> 
> 时间：2013-01-31T09:03:43.393
> 
> 标签：excel, validation, vba

此功能检查 JMBG（唯一公民号码）和 PIB 号码（适用于公司）

如果它们不正确，则函数返回错误消息。

我希望我的函数还创建新的工作表，以将所有错误的 JMBG 或 PIB 编号与错误消息一起放置。

这是一个例子：

Worksheet1 在单元格 A1 中包含一个示例：

`0805988212987`

当我调用 CheckID(A1) --->它返回我 JMBG 是正确的

`1234`

它返回给我错误信息

现在我希望我的函数立即创建新的工作`workhseet2`表 `12345`（

这意味着，`worksheet1`我有很多数字，我会检查它们。

我想将所有有错误消息的数字移到新工作表中，并用红色或其他颜色为这些消息着色。

底部是我当前的功能。首先是回调其他 2 的 main 函数。

Excel工作表中的示例：

```
0805988212987   JMBG is correct
20538350             PIB is correct
abcdef           ERROR: Function can not check JMBG nor PIB ...
ABCDEF           ERROR: Cell contains only UPPER letters. Numeric input ...
AVGsgh           ERROR: There is error because cell contains only LOWER and UPPER...
Marko Dragovic    ERROR: Wrong input data. Cell is empty. Must be numeric and 8 or 13 
12345           ERROR: Excel cell limit is not correct. It should be 8 or 13, and numeric.
            ERROR: Wrong input data. Cell is empty. Must be numeric and 8 or 13 length
JMBG          ERROR: Cell contains only UPPER letters. Numeric input of cell not achieved 
0         ERROR: Excel cell limit is not correct. It should be 8 or 13, and numeric. 
```

我希望所有错误都自动移动到新工作表中并涂成红色。

```
Function CheckID(ByRef rng As Range) As String
Dim str  As String, strMsg As String
Dim objRegEx1 As Object, objRegEx2 As Object, objRegEx3 As Object
Dim sret As String

str = rng.Value

Set objRegEx1 = CreateObject("VBScript.RegExp")
Set objRegEx2 = CreateObject("VBScript.RegExp")
Set objRegEx3 = CreateObject("VBScript.RegExp")
Set objRegEx4 = CreateObject("VBScript.RegExp")
Set objRegEx5 = CreateObject("VBScript.RegExp")
Set objRegEx6 = CreateObject("VBScript.RegExp")
Set objRegEx7 = CreateObject("VBScript.RegExp")
objRegEx1.IgnoreCase = False
objRegEx1.Global = True
objRegEx2.IgnoreCase = False
objRegEx2.Global = True
objRegEx3.IgnoreCase = False
objRegEx3.Global = True
objRegEx4.IgnoreCase = False
objRegEx4.Global = True
objRegEx5.IgnoreCase = False
objRegEx5.Global = True
objRegEx6.IgnoreCase = False
objRegEx6.Global = True
objRegEx7.IgnoreCase = False
objRegEx7.Global = True

objRegEx1.Pattern = "^\d+$" '-- only numbers
objRegEx2.Pattern = "^[a-z]+$" '-- only lower letters
objRegEx3.Pattern = "^[A-Z]+$" '-- only upper letters
objRegEx4.Pattern = "^[a-zA-Z]+$" '-- only lower/upper letters
objRegEx5.Pattern = "^[a-z\d]+$" '-- numbers and lower leters
objRegEx6.Pattern = "^[A-Z\d]+$" '-- numbers and upper letters
objRegEx7.Pattern = "^[a-zA-Z\d]+$" '-- numbers and lower/upper letters

If objRegEx1.Test(str) Then
    If (Len(str) <> 13) And (Len(str) <> 8) Then
    strMsg = "ERROR: Cell numeric limit is not correct. It should be 8 or 13."
    ElseIf Len(str) = 13 Then
    strMsg = Check_JMBG(CStr(str))
    ElseIf Len(str) = 8 Then
    strMsg = Check_PIB(CStr(str))
    End If
ElseIf objRegEx2.Test(str) Then
    strMsg = "ERROR: Function can not check JMBG nor PIB because cell contains only LOWER letters. Numeric input of cell not achieved"
ElseIf objRegEx3.Test(str) Then
    strMsg = "ERROR: Cell contains only UPPER letters. Numeric input of cell not achieved and thus nor JMBG nor PIB is going to be checked"
ElseIf objRegEx4.Test(str) Then
    strMsg = "ERROR: Cell contains only LOWER and UPPER letters. Numeric input of cell not achieved"
ElseIf objRegEx5.Test(str) Then
    strMsg = "ERROR: Cell contains NUMBERS and LOWER letters. Function can't check JMBG or PIB because they are not entered correct. Numeric input of cell not achieved"
ElseIf objRegEx6.Test(str) Then
    strMsg = "ERROR: There is no JMBG or PIB in the valid form in the cell. Cell contains NUMBERS and UPPER letters. Numeric input of cell not achieved"
ElseIf objRegEx7.Test(str) Then
    strMsg = "ERROR: Because cell contains NUMBERS, LOWER and UPPER letters, numeric input of cell is not achieved. Enter correct data"
ElseIf IsEmpty(cell) Then
    strMsg = "ERROR: Cell is empty"
Else
    strMsg = "ERROR: Cell not satisfying input arguments. There are special characters in the cell or it is empty. Numeric input of cell not achieved"
End If

CheckID = strMsg
End Function

Public Function Check_PIB(PIB As String)

'Function for checking PIB
'Initialization of all values inside PIB, 8 numbers, 1 control number
Dim c0 As Integer
Dim c1 As Integer
Dim c2 As Integer
Dim c3 As Integer
Dim c4 As Integer
Dim c5 As Integer
Dim c6 As Integer
Dim c7 As Integer
Dim c8 As Integer
Dim zadnji As String

last = Right(PIB, 1)
PIB = Left(PIB, 8)
If Len(PIB) <> 8 Then
   Check_PIB = "PIB is correct"
Else
       c8 = (CInt(Mid(PIB, 1, 1)) + 10) Mod 10
       If c8 = 0 Then
         c8 = 10
       End If
       c8 = (c8 * 2) Mod 11
       c7 = (CInt(Mid(PIB, 2, 1)) + c8) Mod 10
       If c7 = 0 Then
         c7 = 10
       End If
       c7 = (c7 * 2) Mod 11
       c6 = (CInt(Mid(PIB, 3, 1)) + c7) Mod 10
       If c6 = 0 Then
         c6 = 10
       End If
       c6 = (c6 * 2) Mod 11
       c5 = (CInt(Mid(PIB, 4, 1)) + c6) Mod 10
       If c5 = 0 Then
         c5 = 10
       End If
       c5 = (c5 * 2) Mod 11
       c4 = (CInt(Mid(PIB, 5, 1)) + c5) Mod 10
       If c4 = 0 Then
         c4 = 10
       End If
       c4 = (c4 * 2) Mod 11
       c3 = (CInt(Mid(PIB, 6, 1)) + c4) Mod 10
       If c3 = 0 Then
         c3 = 10
       End If
       c3 = (c3 * 2) Mod 11
       c2 = (CInt(Mid(PIB, 7, 1)) + c3) Mod 10
       If c2 = 0 Then
         c2 = 10
       End If
       c2 = (c2 * 2) Mod 11
       c1 = (CInt(Mid(PIB, 8, 1)) + c2) Mod 10
       If c1 = 0 Then
         c1 = 10
       End If
       c1 = (c1 * 2) Mod 11
       c0 = (11 - c1) Mod 10
       If c0 <> last Then
        Check_PIB = "PIB is correct"
       Else
        Check_PIB = "Error: Wrong PIB. Not valid"
       End If
End If
End Function

Function Check_JMBG(JMBG As String) As String
    If (Len(JMBG) <> 13) Then
        Check_JMBG = "ERR: Length of JMBG is not 13!"
    ElseIf Not IsNumeric(JMBG) Then
        Check_JMBG = "ERR: JMBG contains non-numerical characters"
    ElseIf Not fctBlnCheckDate(JMBG) Then
        Check_JMBG = "ERR: Wrong JMBG date entered!"
    ElseIf fctBlnCheckSum(JMBG) Then
        Check_JMBG = "ERR: Wrong JMBG checksum!"
    Else
        Check_JMBG = "JMBG is correct"
    End If
End Function

Private Function fctBlnCheckDate(JMBG As String) As Boolean
    Dim intDay As Integer, intMonth As Integer, intYear As Integer
    Dim datCheck As Date

    intDay = Int(Left(JMBG, 2))
    intMonth = Int(Mid$(JMBG, 3, 2))
    intYear = Int(Mid$(JMBG, 5, 3)) + 1000

    datCheck = DateSerial(intYear, intMonth, intDay)

    fctBlnCheckDate = _
        (Year(datCheck) = intYear) And _
        (Month(datCheck) = intMonth) And _
        (Day(datCheck) = intDay)

End Function

Private Function fctBlnCheckSum(JMBG As String) As Boolean
    Dim intCheckSum As Integer, i As Integer

    For i = 1 To 13
        intCheckSum = intCheckSum + Int(Mid$(JMBG, i, 1))
        Next i
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:55:09.450

**编辑**这不适用于 UDF。

这是你要找的吗？

`logging`如果您想将其记录下来，请在您的代码中使用

```
Sub logging(ByVal val As String, ByVal msg As String)
Dim logWs As Worksheet
Err.Clear
On Error Resume Next
Set logWs = Worksheets("Error Log")
If Err.Number <> 0 Then
    Set logWs = Worksheets.Add
    logWs.Name = "Error Log"
End If
On Error GoTo 0

With logWs
    Height = .Cells(.Rows.Count, 1).End(xlUp).Row
    .Cells(Height + 1, 1).Value = val
    .Cells(Height + 1, 2).Value = msg
    .Cells(Height + 1, 2).Font.Color = RGB(255, 0, 0) ' RED in color
End With
Set logWs = Nothing

End Sub

Sub testing()
    logging "123", "ERR"
End Sub 
```

**根据要求进行编辑** ，假设您的所有错误消息都以“错误：”开头

```
Function CheckID(ByRef rng As Range) As String
    Dim str  As String, strMsg As String
    Dim objRegEx1 As Object, objRegEx2 As Object, objRegEx3 As Object
    Dim sret As String

    str = rng.Value

    Set objRegEx1 = CreateObject("VBScript.RegExp")
    Set objRegEx2 = CreateObject("VBScript.RegExp")
    Set objRegEx3 = CreateObject("VBScript.RegExp")
    Set objRegEx4 = CreateObject("VBScript.RegExp")
    Set objRegEx5 = CreateObject("VBScript.RegExp")
    Set objRegEx6 = CreateObject("VBScript.RegExp")
    Set objRegEx7 = CreateObject("VBScript.RegExp")
    objRegEx1.IgnoreCase = False
    objRegEx1.Global = True
    objRegEx2.IgnoreCase = False
    objRegEx2.Global = True
    objRegEx3.IgnoreCase = False
    objRegEx3.Global = True
    objRegEx4.IgnoreCase = False
    objRegEx4.Global = True
    objRegEx5.IgnoreCase = False
    objRegEx5.Global = True
    objRegEx6.IgnoreCase = False
    objRegEx6.Global = True
    objRegEx7.IgnoreCase = False
    objRegEx7.Global = True

    objRegEx1.Pattern = "^\d+$" '-- only numbers
    objRegEx2.Pattern = "^[a-z]+$" '-- only lower letters
    objRegEx3.Pattern = "^[A-Z]+$" '-- only upper letters
    objRegEx4.Pattern = "^[a-zA-Z]+$" '-- only lower/upper letters
    objRegEx5.Pattern = "^[a-z\d]+$" '-- numbers and lower leters
    objRegEx6.Pattern = "^[A-Z\d]+$" '-- numbers and upper letters
    objRegEx7.Pattern = "^[a-zA-Z\d]+$" '-- numbers and lower/upper letters

    If objRegEx1.Test(str) Then
        If (Len(str) <> 13) And (Len(str) <> 8) Then
        strMsg = "ERROR: Cell numeric limit is not correct. It should be 8 or 13."
        ElseIf Len(str) = 13 Then
        strMsg = Check_JMBG(CStr(str))
        ElseIf Len(str) = 8 Then
        strMsg = Check_PIB(CStr(str))
        End If
    ElseIf objRegEx2.Test(str) Then
        strMsg = "ERROR: Function can not check JMBG nor PIB because cell contains only LOWER letters. Numeric input of cell not achieved"
    ElseIf objRegEx3.Test(str) Then
        strMsg = "ERROR: Cell contains only UPPER letters. Numeric input of cell not achieved and thus nor JMBG nor PIB is going to be checked"
    ElseIf objRegEx4.Test(str) Then
        strMsg = "ERROR: Cell contains only LOWER and UPPER letters. Numeric input of cell not achieved"
    ElseIf objRegEx5.Test(str) Then
        strMsg = "ERROR: Cell contains NUMBERS and LOWER letters. Function can't check JMBG or PIB because they are not entered correct. Numeric input of cell not achieved"
    ElseIf objRegEx6.Test(str) Then
        strMsg = "ERROR: There is no JMBG or PIB in the valid form in the cell. Cell contains NUMBERS and UPPER letters. Numeric input of cell not achieved"
    ElseIf objRegEx7.Test(str) Then
        strMsg = "ERROR: Because cell contains NUMBERS, LOWER and UPPER letters, numeric input of cell is not achieved. Enter correct data"
    ElseIf IsEmpty(cell) Then
        strMsg = "ERROR: Cell is empty"
    Else
        strMsg = "ERROR: Cell not satisfying input arguments. There are special characters in the cell or it is empty. Numeric input of cell not achieved"
    End If
    'Modified by: Larry
    'Modified Date: 31-01-2013
    'Take Log in "Error Log" Sheet if it's an error
    If InStr(UCase(strMsg), "ERROR:") > 0 Then
        logging str, strMsg
    End If

    CheckID = strMsg
End Function 
```

# android - 如何获取应用程序中的主要活动名称？

> ID：14621926
> 
> 赞同：3
> 
> 时间：2013-01-31T09:03:51.267
> 
> 标签：android, android-activity

如何获取系统第三方应用程序的主要活动？

```
PackageManager  pm= getPackageManager();
List<PackageInfo> packs = pm.getInstalledPackages(0);
for (PackageInfo pi : packs) {
HashMap<String, Object> map = new HashMap<String, Object>();
map.put("icon", pi.applicationInfo.loadIcon(pm));
map.put("appName", pi.applicationInfo.loadLabel(pm));
map.put("packageName", pi.packageName);
} 
```

我知道如何获取包名。但不知道如何获取主要活动的名称。

我使用 pi.activities[0].name。它仍然获得空指针。

任何人的想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:15:01.670

采用

```
pm.getLaunchIntentForPackage(pi.packageName); 
```

这将为您提供启动意图，如果您打印它，您将看到启动器意图以及主要活动。

如果您只想显示可以从设备启动器启动的**活动**，那么您需要为 Category **Launcher**放置一个过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:12:27.460

您可以使用以下

```
final PackageManager pm = getApplicationContext().getPackageManager();
ApplicationInfo ai;
try {
    ai = pm.getApplicationInfo( this.getPackageName(), 0);
 } catch (final NameNotFoundException e) {
 ai = null;
}
final String applicationName = (String) (ai != null ? pm.getApplicationLabel(ai) : "unknown)"); 
```

# mysql - 父类别与所有子类别的数据 MYSQL 查询到 Codeigniter 活动记录

> ID：14621928
> 
> 赞同：0
> 
> 时间：2013-01-31T09:03:56.377
> 
> 标签：mysql, codeigniter, activerecord

大家好，作为这个查询，我可以在 MYSQL 中工作，但我希望它在 Codeigniter 活动记录中进行转换。

基本上我有3张桌子

*   供应商（与 intCat、intCity、*）
*   类别（带 in​​tId、strCategory、intParent）
*   tblcitylist（带有city_id，city_name）

询问：

```
SELECT category.strCategory AS strParent, Query3\. *  FROM (

SELECT tblcitylist.city_name AS strCity, Query2\. *  FROM (

SELECT Query1.intParent, Query1.strCategory, suppliers. *  FROM (

SELECT category.strCategory, category.intId, category.intParent FROM
category WHERE ( ( ( category.intParent ) =51 ) ) ) AS Query1 INNER
JOIN suppliers ON Query1.intId = suppliers.intCat ) AS Query2 INNER
JOIN tblcitylist ON Query2.intCity = tblcitylist.city_id ) AS Query3
INNER JOIN category ON Query3.intParent = category.intId 
```

我想从父类别（51）的所有子类别中获取供应商（其类别和父类别名称（strCategory，strParent）和城市名称（city_name as strCity））。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-09T10:33:55.970

这将通过传递 parent id 返回 parent ，他们的类别和子类别

```
function get_parent_child_subchild($category_id,$all_cate=array())
{
    if(!is_array($category_id))
    {           
        $this->db->where('parent_id', $category_id);
        $all_cate[]=$category_id;
    }
    else
    {           
        $this->db->where_in('parent_id', $category_id);
    }        
    $get_categories= $this->db->get('newcategory'); 
    if($get_categories->num_rows()>0)
    {
        $categories_vales=$get_categories->result(); 
        $new_subcat = array();
        foreach($categories_vales as $cate_val)
        {
            $category_id=$cate_val->category_id;
            array_push($new_subcat,$category_id);
        }
        $all_cate = array_merge($all_cate,$new_subcat);         
        if(count($new_subcat)>0)
        {
            $this->get_parent_child_subchild($new_subcat,$all_cate);
        }   
    }   

    return $all_cate;
} 
```

# sql - 如何查询以下场景以计算 Django 中的用户数？

> ID：14621930
> 
> 赞同：2
> 
> 时间：2013-01-31T09:04:00.877
> 
> 标签：sql, django

我在数据库中有一个名为`fileupload_share`.

```
+----+----------+----------+----------------+----------------------------------+
| id | users_id | files_id | shared_user_id | shared_date                      |
+----+----------+----------+----------------+----------------------------------+
|  3 |        1 |        1 |              2 | 2013-01-31 14:27:06.523908+00:00 |
|  2 |        1 |        1 |              2 | 2013-01-31 14:25:37.760192+00:00 |
|  4 |        1 |        3 |              2 | 2013-01-31 14:46:01.089560+00:00 |
|  5 |        1 |        1 |              3 | 2013-01-31 14:50:54.917337+00:00 | 
```

我想`shared_user_id`根据`file_id`.

例如，我想查找与多少用户共享 id 为 1 的文件。答案是 2 个用户`(shared_user_id`）。我怎样才能在 Django 中找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:09:44.790

```
file_id = 2 #Here is your file_id variable
fileupload_share.objects.filter(file_id = file_id)
    .order_by('shared_user_id').distinct('shared_user_id').count() 
```

正如下面的评论所说，这个例子在 MySQL 上不起作用，因为字段上有不同的方法。但是，您可以尝试*danihp*的方法：

```
file_id = 2 #Here is your file_id variable
fileupload_share.objects.filter(file_id = file_id)
    .values_list('shared_user_id', flat=True).distinct().count() 
```

# visual-studio-2010 - Python Ctypes 加载库

> ID：14621932
> 
> 赞同：1
> 
> 时间：2013-01-31T09:04:13.453
> 
> 标签：visual-studio-2010, dll, python-2.7, ctypes, loadlibrary

我正在使用 Windows 7 64 位机器。我安装了 Visual Studio 2010 并开发了一个简单的 win32 dll 来添加 2 个数字。创建了 dll，我使用了一个测试应用程序来测试 dll，它工作正常。

现在我编写 python 脚本（如下所示）来使用这个库。但我收到以下错误消息。

```
Traceback (most recent call last):
  File "C:\Users\sbritto\Documents\Visual Studio 2008\Projects\MathFuncsDll\Debug\MathFuncs.py", line 5, in <module>
    lib = ctypes.WinDLL('MathFuncsDll.dll',use_last_error=True)
  File "C:\Python27\lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 193] %1 is not a valid Win32 application 
```

**Python 脚本**

```
import ctypes
from ctypes import *

#lib = cdll.LoadLibrary("MathFuncsDll.dll")
lib = ctypes.WinDLL('MathFuncsDll.dll',use_last_error=True)
print lib 
```

请尽快让我知道。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T23:05:05.243

如果您尝试使用为 32 位机器编译的 Python 解释器打开 64 位 DLL，您将收到此错误，反之亦然。因此，如果这是一个 64 位 DLL，您需要确保您运行的是 64 位 Python。

# jquery - Fancybox2 – 简单的标记（没有，但只适用于画廊？

ID：14621935

赞同：1

时间：2013-01-31T09:04:26.250

标签：jquery, fancybox

# python - 比较 python 中的 datetime 字段，而不仅仅是 date 或 time，类型错误：Can't compare unicode to date.datetime field

> ID：14621937
> 
> 赞同：0
> 
> 时间：2013-01-31T09:04:33.020
> 
> 标签：python, django, python-2.7

已经创建了一个 Django 日期时间字段“时间”，并希望在此基础上进行一些比较。但它给出了 Can't compare unicode to date.datetime field 的错误

这就是我在做什么

```
if form.is_valid():
   if formdata['time']==datetime.datetime.min:
       formdata['time'] = datetime.date.now
   if formadata['time'] < last_entry_time:
       error_message 
```

我能想到的是，即使它们相等（默认设置为最小值），第一个条件也会返回 false，而在第二个 if 条件下它会给出错误..

仔细阅读 datetime 字段的 python 文档，并提到它不会引发 '==' 和 '!=' 比较的类型错误。所以基本上两个条件语句都存在类型不匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:08:53.960

使用属性`form.cleaned_data`进行比较。中的属性`cleaned_data`将具有适当的数据类型。

例如

```
if form.is_valid():
   if form.cleaned_data['time']==datetime.datetime.min:
   .... 
```

# iphone-5 - iPhone 5 上 iOS 应用的精简版和专业版的启动和闪屏问题

> ID：14621940
> 
> 赞同：1
> 
> 时间：2013-01-31T09:04:44.180
> 
> 标签：iphone-5, targets

我开发了一个 iOS 通用应用程序，该应用程序将支持 iPhone 5 屏幕。现在关键是该应用程序支持 Lite 和 Pro 版本，它们位于同一个 Xcode 项目中。现在每个目标都有自己的 Splash 和启动屏幕可以区分。问题是 iPhone 5 屏幕支持我怎么能做到这一点？我无法在 pList 设置中找到足够的详细信息来为 Iphone 5 上可见的 Lite 和 pro 版本制作单独的屏幕？欢迎所有建议，并提前感谢所有极客。

# php - 在codeigniter的数据库中上传和保存mp4文件

> ID：14621942
> 
> 赞同：1
> 
> 时间：2013-01-31T09:04:48.770
> 
> 标签：php, codeigniter

我在 mime 文件中添加了：

```
'mp4' => array('video/mp4', 'video/3gpp'), 
```

仍然无法上传文件。也没有显示任何错误。

知道如何通过表单在 codeigniter 中上传所有类型的文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:18:41.403

您好，只需将您的 mime 类型添加到 **application/config/mimes**

```
 'mp4' =>'video/mp4'
  '3gp'=>'video/3gpp' 
```

然后只需在允许的类型中单独添加每个

[所有 mime 类型的链接](http://en.wikipedia.org/wiki/Internet_media_type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T14:41:31.987

通过检查扩展名和文件类型来确保你做的事情是正确的！例如，如果您的文件名是**video.mp4**，那么您的文件类型可能是**video/mp4**但不一定！（我只是在处理一个**.m4a**文件，我的音频类型是**audio/mp4**。）

您可以通过在上传后自己打印出来来测试正确的文件类型。

```
echo $_FILES[0]['file_type']; 
```

之后，您可以将以下行添加到**mimes.php**配置文件中：

```
$mimes['<your extension>'] = '<your file type>'; 
```

或者，如果您遇到同一个扩展的多个 MIME 类型，您可以添加一个数组来代替：

```
$mimes['<your extension>'] = array('<your file type 1>', '<your file type 2>'); 
```

我希望这有帮助！

# php - Laravel，如何使用关系列的 where 条件？

> ID：14621943
> 
> 赞同：36
> 
> 时间：2013-01-31T09:04:49.060
> 
> 标签：php, laravel, eloquent

我正在使用 Laravel 并且在使用 Eloquent ORM 时遇到了一个小问题。我可以使用 JOIN 简单地使用 SQL 查询来实现它，但我似乎无法让它与 Eloquent 一起使用！

这就是我想要的，我有两个表。一个是“Restaurants”，另一个是“Restaurant_Facilities”。

这些表很简单......和一对一的关系。就像有一个`restaurant`带有`id`, `name`, , 等的`slug`表格和另一个`restaurant_facilities`带有`id`, `restaurant_id`, `wifi`,`parking`等的表格

现在我想要做的是..加载所有有 wifi = 1 或 wifi = 0 的餐厅.. 我怎么能用 Eloquent 做到这一点？我尝试过急切加载、数据透视表、with()、collections()，但似乎没有任何效果！

对于多对多关系，我遇到了同样的问题`cuisines`！我有同`restaurant`一张桌子和一张`cuisine`桌子和一张`restaurant_cuisine_connection`桌子..

但是如何使用它的 ID 加载特定美食中的所有餐厅？

这行得通。

`Cuisine::find(6)->restaurants()->get();`

但我想从 Restaurant:: 模型而不是美食中加载它.. 因为我有很多条件链接在一起.. 它用于搜索和过滤/浏览页面。

有什么想法或方法吗？我已经为此苦苦挣扎了 3 天，但仍然没有答案。

示例模型：

```
class Restaurant extends Eloquent {

    protected $table = 'restaurants';

    public function facilities() {
        return $this->hasOne('Facilities'); 
    }
}

class Facilities extends Eloquent {

    protected $table = 'restaurants_facilities';

    public function restaurant() {
        return $this->belongsTo('Restaurant');
    }

} 
```

PS：这似乎有效..但这不是雄辩的方式吗？

```
Restaurant::leftJoin(
                'cuisine_restaurant', 
                'cuisine_restaurant.restaurant_id', 
                '=', 'restaurants.id'
             )
             ->where('cuisine_id', 16)
               ->get(); 
```

另外，在没有其他查询的情况下查找具有特定列值的餐厅数量的最佳方法是什么？像.. 我必须找到有停车场 = 1 和 wifi = 1 的餐厅总数？

请帮助解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-31T12:33:43.810

如果您必须从 Restaurant 模型加载，我认为在此处执行左连接没有任何问题。我可能会将其抽象为我的 Restaurant 模型上的一个方法，如下所示：

```
class Restaurant extends Eloquent {
    protected $table = 'restaurants'; // will be default in latest L4 beta

    public function facility()
    {
      return $this->hasOne('Facility');
    }

    // Or, better, make public, and inject instance to controller.
    public static function withWifi()
    {
      return static::leftJoin(
        'restaurant_facilities',
        'restaurants.id', '=', 'restaurant_facilities.restaurant_id'
      )->where('wifi', '=', 1);
    }
} 
```

然后，从您的路线：

```
Route::get('/', function()
{
  return Restaurant::withWifi()->get();
}); 
```

在旅途中-尚未测试该代码，但我认为它应该可以工作。您可以改为使用带有约束的预加载，但这只会指定设施对象是否为空。除非您指定 where 子句，否则它仍会返回所有餐馆。

（PS 我会坚持使用 Facility 的单数形式。请注意`hasOne('Facilities')`阅读不正确？）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-30T17:24:00.503

我在构建新的共享范式时尝试改进我的 REST API 方法时偶然发现了这篇文章。您想使用[Eager Loading Constraints](http://laravel.com/docs/4.2/eloquent#eager-loading)。假设您有一个 api 路由，您可以在其中加载共享项目，并且它是子项目的集合，例如：

```
/api/shared/{share_id}/subitem/{subitem_id} 
```

当使用 GET 请求访问此路由时，您希望加载该特定子项。当然，您可以通过该 id 加载该模型，但如果我们需要验证用户是否有权访问该共享项目呢？一个答案建议加载反向关系，但这可能会很快导致控制器混乱和混乱。对急切负载使用约束是一种更“雄辩”的方法。所以我们会像这样加载它：

```
$shared = Shared::where('id', $share_id)
  ->with([ 'subitems' => function($query) use ($subitem_id) {
    $query->where('subitem_id', $subitem_id)
  }]); 
```

因此，只需要具有该 ID 的子项。现在我们可以通过执行以下操作来检查它是否被发现：

```
if ($shared->subitems->isEmpty()) 
```

由于 subitems 是一个集合（子项数组），我们返回 subitem[0] ：

```
return $shared->subitems[0]; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-10T18:12:53.933

用于`whereHas`按任何关系过滤。它不会加入关系，但会通过相关属性过滤当前模型。还可以查看本地范围以帮助解决此类情况[https://laravel.com/docs/5.3/eloquent#local-scopes](https://laravel.com/docs/5.3/eloquent#local-scopes)

你的例子是：

```
Restaurant::whereHas('facilities', function($query) {
    return $query->where('wifi', true);
})->get();

Restaurant::whereHas('cuisines', function($query) use ($cuisineId) {
    return $query->where('id', $cuisineId);
})->get(); 
```

要使用本地范围实现相同的目标：

```
class Restaurant extends Eloquent
{
    // Relations here

    public function scopeHasWifi($query)
    {
        return $query->whereHas('facilities', function($query) {
            return $query->where('wifi', true);
        });
    }

    public function scopeHasCuisine($query, $cuisineId)
    {
        return $query->whereHas('cuisines', function($query) use ($cuisineId) {
            return $query->where('id', $cuisineId);
        });
    }
} 
```

对于本地范围，您不想将它们定义为模型上的静态方法，因为这会创建查询构建器的新实例，并会阻止您链接方法。使用本地范围将注入并返回查询构建器的当前实例，因此您可以链接任意数量的范围：

```
Restaurant::hasWifi()->hasCuisine(6)->get(); 
```

局部作用域是在方法名称中使用前缀定义的，并且`scope`在没有方法名称的情况下调用`scope`，如上例所示。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-11-13T18:03:56.453

另一种解决方案主演`whereHas()`功能：

```
$with_wifi = function ($query) {
   $query->where('wifi', 1);
};

Facilities::whereHas('restaurant', $with_wifi) 
```

漂亮整洁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T13:19:10.617

您是否必须从 Restaurant 模型中加载它？为了解决这个问题，我通常会反过来处理它。

```
Facilities::with('restaurant')->where('wifi' ,'=', 0)->get(); 
```

这将获得与您的条件相匹配的所有餐厅设施，并急切地加载餐厅。

您可以链接更多条件并像这样计算总数..

```
Facilities::with('restaurant')
  ->where('wifi' ,'=', 1)
  ->where('parking','=', 1)
  ->count(); 
```

这也适用于美食

```
Cuisine::with('restaurant')->where('id','=',1)->get(); 
```

这会抓取 ID 为 1 的美食对象，其中包含所有拥有该美食的餐厅

# google-apps-script - onEdit 函数

> ID：14621948
> 
> 赞同：0
> 
> 时间：2013-01-31T09:05:15.150
> 
> 标签：google-apps-script

在谷歌应用程序脚本中，当我更改单元格的背景颜色时，如何自动运行脚本？当我更改单元格的背景颜色时，电子表格会自动保存，并且还会显示上次编辑的时间，但是如果我尝试在 onEdit 函数上使用此事件来运行脚本，它无法识别该事件并且什么也没做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:23:54.197

onEdit 将在任何单元格值更改时触发，而不是任何格式更改。您必须放置规则以更改脚本中的 bg 颜色，假设规则基于工作表中已有的单元格值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:55:34.707

恐怕您必须使用“技巧”来管理它，因为确实没有自动触发背景颜色更改。

只是一个建议：如果您的电子表格不是太大，您可以简单地将整个颜色描述记住在您之前存储在脚本属性中的字符串中，并根据计时器触发器检查是否有更改。

如果您可以接受此解决方案（计时器触发而不是立即反应），请尝试一下...

例如使用这个变量：

```
var backGroundString = SpreadsheetApp.getActiveSheet().getDataRange().getBackgrounds().toString() 
```

并将其与存储在 scriptProperties 中的相同值进行比较，如果不同，则触发您的事件...

我知道这有点笨拙，但现在我看不到其他简单的方法可以得到你想要的东西。

您可以添加一些条件以使其仅在某些时刻或电子表格打开时起作用...

# jsf-2 - JSF 复合组件：当属性（即 valueChangeListener）不可用时发生错误

> ID：14621953
> 
> 赞同：1
> 
> 时间：2013-01-31T09:05:50.893
> 
> 标签：jsf-2

我有一个像这样的复合（X）：

```
<composite:interface>
  <composite:attribute name="textValue" />
  <composite:attribute name="textValueChangeListner"
                       method-signature="void valueChanged(javax.faces.event.ValueChangeEvent)" /> 
```

```
<composite:implementation>          
      <ice:inputText
                      value="#{cc.attrs.textValue}"
                      valueChangeListener="#{cc.attrs.textValueChangeListner}"/> 
```

在 JSF 页面中，我有类似的内容：

```
<X:iText
textValue="#{cardBean.getCardValue}"
textValueChangeListner="#{cardHandler.cardValueChanged}" /> 
```

上面的代码工作正常。但是当没有“textValueChangeListner”从 JFace 页面传递给组合时，它不起作用；IE：

```
<X:iText
textValue="#{cardBean.getCardValue}" /> 
```

我得到的错误：[javax.enterprise.resource.webcontainer.jsf.lifecycle] 无法通过使用 EL 表达式“#{cc.attrs.textValueChangeListner}”的页面解析复合组件：javax.faces.FacesException：无法解析复合组件从使用 EL 表达式 '#{cc.attrs.textValueChangeListner}' 的页面

在我的场景中，页面开发人员可能会或可能不会向复合组件提供“textValueChangeListner”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:39:32.957

您在这里有两个选择：第一个是简单的方法，如果用户没有提供值更改侦听器，则只需呈现另一个输入文本而没有 valueChangeListener。

```
<ice:inputText
                  value="#{cc.attrs.textValue}"
                  valueChangeListener="#{cc.attrs.textValueChangeListener}"
                  rendered="#{!empty cc.attrs.textValueChangeListener}"/> 
```

如果在任何情况下都需要 valueChangeListener，则为该属性应用默认值：

```
<composite:attribute name="textValueChangeListener"
                       method-signature="void valueChanged(javax.faces.event.ValueChangeEvent)"
                     required="false"
                     default="#{cc.valueChangedListener}" /> 
```

为此，您需要将复合组件绑定到支持 bean。您需要通过它的接口声明来定义组件的支持 bean 类型，如下所示：

```
<composite:interface componentType="yourComponentBean">
<composite:attribute name="textValueChangeListener"
                       method-signature="void valueChanged(javax.faces.event.ValueChangeEvent)"
                     required="false"
                     default="#{cc.valueChangedListener}" />
</composite:interface> 
```

这是实现默认 ValueChangedListener 的 yourComponentBean。

```
@FacesComponent("yourComponentBean")
public class YourComponentCC extends UINamingContainer
{
    public void valueChangedListener(ValueChangeEvent ev)
    {
       ....
    }
} 
```

Btw`cc`是 EL 中访问在组件中定义为 componentType 的支持 bean 的快捷方式。所以`cc.valueChangedListener`会调用类中`valueChangedListener`定义的方法`YourComponentCC`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:37:39.997

将属性重命名为`valueChangeListener`并使用`targets`属性，

```
<composite:attribute name="valueChangeListner"
                     method-signature="void valueChanged(javax.faces.event.ValueChangeEvent)" 
                     targets="text" /> 
```

其中`text`是目标输入组件的 ID，

```
<ice:inputText id="text" ... /> 
```

`valueChangeListener`并从中删除。

# asp.net - DevExpress TreeList 设置选择递归

> ID：14621954
> 
> 赞同：0
> 
> 时间：2013-01-31T09:05:57.570
> 
> 标签：asp.net, devexpress

**ASPX**

```
<dx:ASPxTreeList ID="ASPxTreeListLocations" runat="server" AutoGenerateColumns="False"
    DataSourceID="SqlDataSourceUserMetersTree" KeyFieldName="sno" ParentFieldName="ParentId"
    Width="300px" SettingsSelection-Recursive="true" Theme="Office2010Black">
    <Columns>
        <dx:TreeListTextColumn FieldName="Text" VisibleIndex="0" Caption="Lokasyon">
        </dx:TreeListTextColumn>
    </Columns>
    <SettingsBehavior AutoExpandAllNodes="True" />
    <SettingsSelection Enabled="True" />
</dx:ASPxTreeList>
<asp:SqlDataSource ID="SqlDataSourceUserMetersTree" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>">
</asp:SqlDataSource> 
```

**代码隐藏**

```
protected void Page_Load(object sender, EventArgs e)
{
    SqlDataSourceUserMetersTree.SelectCommand = "SELECT * FROM Tree";
    ASPxTreeListLocations.DataBind();
} 
```

**问题：**

代码运行良好。我想递归选择，但这个属性不起作用。如果我在 aspx 端定义 SqlDataSource selectCommand，它就可以工作。我找不到任何解决方案。没有错误信息。有什么建议吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-25T13:03:30.670

尝试将选项添加`recursive = "true"`到您的树设置中，NP

# java - 获取我通过参数传递的相同 Java 类实例

> ID：14621956
> 
> 赞同：4
> 
> 时间：2013-01-31T09:06:04.380
> 
> 标签：java, class, parameters

我正在用**Java**语言开发一个 Web 应用程序，它由一个系统和一些模块组成。它们都实现了`IAppIdentifier`接口，我将所有模块引用和系统本身存储在`List`系统中。

这个想法是这样设计的，如果每个模块都有所需的接口（从 IAppIdentifier 扩展），它们将能够访问系统本身或其他模块，因此它们必须向系统询问它们。

我有这个有效的代码：

```
@Override
public IAppIdentifier moduleByClass(Class<? extends IAppIdentifier> clazz) {
    List<IAppIdentifier> iApps = this.get_Iapps();
    for (IAppIdentifier iApp : iApps) {
        if (clazz.isAssignableFrom(iApp.getClass())) {
            return iApp;
        }
    }
    return null;
} 
```

基本上它正在检查数组中的每个类是否可以从所需的接口分配，如果是，它将返回该实例。但是问题是我必须在方法返回它时强制转换它。

例如，我必须实现类似的东西来获取系统的实例：

```
((ISystem) this.get_Service().moduleByClass(ISystem.class)) 
```

我的问题是，在 java 中有什么方法可以避免再次进行这种转换，ergo，以确保它返回与我在编译时作为参数传递的相同类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:09:35.347

将方法签名更改为此：

```
public <T extends IAppIdenfitier> T moduleByClass(Class<T> clazz) 
```

这应该有效。

即使您`interface`不是泛型的，您仍然可以在方法中使用泛型来实现它们自己的目的。通过此代码，您提供了`T`必须是`IAppIdentifier`自身或必须扩展它的通用规则。您的方法现在将返回类型的对象`T`并作为参数类作为`Class<T>`.

然后在您的代码中，每当您调用方法时，`moduleByClass`您不必强制转换它，例如：

```
ISystem = this.get_Service().moduleByClass(ISystem.class); 
```

这里不需要演员，一切都会编译。

根据@XtremeBiker 的好评，还需要更多信息。在`moduleByClass`方法内部，需要将结果类型转换为`T`. 所以它是：

```
return iApp; 
```

但现在应该是：

```
return clazz.cast(iApp); 
```

无论如何，在方法体内进行就地转换比每次调用该方法时都进行转换更不烦人。

# java - 通过本机 JDBC Informix 驱动程序获取错误编码的数据

> ID：14621963
> 
> 赞同：1
> 
> 时间：2013-01-31T09:06:17.680
> 
> 标签：java, jdbc, encoding, informix

我将 Informix 数据库配置为：

```
DB_LOCALE=pl_pl.CP1250 
```

（使用 Windows CP1250 字符编码的波兰语区域设置）。

在这个数据库中有一个表，`VARCHAR`其中大部分数据以 CP1250 编码，但一些记录以 UTF-8 编码。我怀疑它们是由 ODBC 插入并错误编码的 .csv 导入。

当我使用 ODBC 时，可以获取此错误编码的数据。它看起来不漂亮：

```
nazw:┼?UKASIK 
```

但可以显示并且最终用户可以编辑此类数据。那些“奇怪”的字符是 'Ł' 字母的 UTF-8 字符。

当我使用本机 JDBC 驱动程序时，我无法获取此类数据。而不是`String`我得到异常：

```
JDBC Error: -79783
IX000
Kodowanie lub zestaw kodów znaków nie są obsługiwane. 
```

英文解释：

```
-79783 Encoding or code set not supported
Explanation: The encoding or code set entered in the DB_LOCALE or CLIENT_LOCALE variable is not valid. 
```

我在 Jython 中创建了使用本地 JDBC 驱动程序和 JDBC-ODBC 桥连接到数据库的测试程序。我只有本机驱动程序才有例外。我还尝试通过其他 JDBC getXXX() 方法来获取这些数据，`byte[]`但`Stream`它们也引发了异常。我使用 JDBC URL 作为：

```
jdbc:informix-sqli://test-informix:9088/test:informixserver=ol_testifx;DB_LOCALE=pl_PL.CP1250;CLIENT_LOCALE=pl_PL.CP1250;charSet=CP1250 
```

服务器版本：`IBM Informix Dynamic Server Version 11.50.FC4`

原生驱动：`3.70.JC5DE; major: 3; minor: 70`

JDBC-ODBC 桥使用的 ODBC 驱动程序：`2.0001 (3.70.TC5DE); major: 2; minor: 1`

我的问题是：

有没有办法得到这种错误编码的数据？我想看看 '？' 字符而不是错误编码的字符。我不想要例外，因为它们不允许最终用户查看和纠正错误编码的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:27:48.357

I got help from IBM Polska and they have found that JDBC connect string can be extended by `IFX_USE_STRENC=true`: [http://www-01.ibm.com/support/docview.wss?uid=swg21502902](http://www-01.ibm.com/support/docview.wss?uid=swg21502902)

This allowed JDBC to fetch wrongly encoded data. Now I can read:

```
nazw:Przemysław
nazw:Ĺ?UKASIK 
```

(2nd record is with Polish letter `Ł` in wrong encoding)

Thank you IBM Polska!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:06:47.413

# mysql - Mysql ROUND 返回磨损值？

> ID：14621965
> 
> 赞同：0
> 
> 时间：2013-01-31T09:06:25.260
> 
> 标签：mysql

我有一个规则表：

```
rule_id  basic   hra  conveyance  medical
      1    0.5  0.25         800     1250 
```

我运行这个查询：

```
SELECT ROUND( 16405 ) AS `CTC`, ROUND( 16405 * r.basic ) AS `basic`,
ROUND( 16405 * r.hra ) AS `hra`, r.conveyance AS `conveyance`,
r.medical AS `medical` 
FROM `rule` AS r
WHERE `r`.`rule_id` =1 
```

它返回以下内容：

```
CTC     basic   hra conveyance  medical  
16405   8202    4101    800          1250 
```

basic 的值应该是 8203，但它返回 8202。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:09:32.583

而不是`ROUND`使用`CEIL`- 它会四舍五入你的价值。

```
CEIL( 16405 * r.basic ) AS  `basic` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:26:15.747

这些是[文档](https://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_round)中解释的规则：

> *   对于精确值数字，ROUND() 使用“离零取半数”或“向最近取整”规则：**小数部分为 0.5 或更大的值向上取整到下一个整数（如果为正数）**或向下取整到如果为负，则为下一个整数。（换句话说，它从零四舍五入。）小数部分小于 0.5 的值如果为正则向下舍入到下一个整数，如果为负则向上舍入到下一个整数。
>     
>     
> *   **对于近似值数字，结果取决于 C 库**。在许多系统上，这意味着 ROUND() 使用“四舍五入到最接近的偶数”规则：具有任何小数部分的值被四舍五入到最接近的偶数整数。

根据您迄今为止的最后一次编辑，8202.5 正在向零舍入。这可能意味着您没有使用精确的数据类型，例如`DECIMAL`. 如果您的列类型是`FLOAT`or `DOUBLE`，则舍入算法取决于平台（并且您还会遇到浮点精度问题）。

您可以检查显式转换是否解决了问题：

```
SELECT ROUND(8202.5), ROUND(CAST(8202.5 AS DECIMAL)) 
```

# c++ - 如何用宏做static_assert？

> ID：14621968
> 
> 赞同：0
> 
> 时间：2013-01-31T09:06:40.110
> 
> 标签：c++, macros, g++, static-assert, c++98

我试图使用[这个建议](https://stackoverflow.com/a/174441/476681)来做一个静态断言，但如果我在模板的方法中使用它，我不会收到编译错误。

示例如下：

```
#include <iostream>

#define STATIC_ASSERT(expr, msg)               \
{                                              \
    char STATIC_ASSERTION__##msg[(expr)?1:-1]; \
    (void)STATIC_ASSERTION__##msg[0];          \
}

template <typename T >
class A
{
public:
  int foo(const int k )
  {
    // does not work
    STATIC_ASSERT( k > 9, error_msg );
    return k+5;
  }
};

int bar(const int k )
{
  // works fine
  //STATIC_ASSERT( k > 9, error_msg );
  return k+5;
}

int main()
{
  A<int> a;
  const int v = 2;

  std::cout<<a.foo(v)<<std::endl;
  std::cout<<bar(v)<<std::endl;

  // works fine
  //STATIC_ASSERT( v > 9, error_msg );
} 
```

我用 g++ 4.7.2 编译它，并警告说 C++ ISO 不支持 VLA：

```
g++ -Wall -g  -std=c++98 -Wextra -pedantic gvh.cpp 
```

那么，为什么在模板方法中使用 STATIC_ASSERT 时编译不会失败？有没有办法让它失败？

**注意**：我需要一个 c++98（甚至可能是 c++03）解决方案，如果可能的话，只能使用宏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T09:09:07.137

在 C++11 之前，我通常会这样做：

```
typedef int static_assert_something[something ? 1 : -1]; 
```

您还可以查看[boost static assert](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_staticassert.html)。但它太臃肿了，我不喜欢。把事情做大很容易，把事情做得更好很难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T09:14:07.940

考虑类似[Boost.StaticAssert](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_staticassert.html)的东西，但如果您无法使用它，您可以尝试定义模板。

```
template<bool>
struct static_assertion;

template<>
struct static_assertion<true> {}; 
```

尽管这具有没有与之关联的消息的缺点。

在通过 StackOverflow 进行了一些搜索之后，我偶然发现了[这个问题](https://stackoverflow.com/questions/1980012/boost-static-assert-without-boost)，它与我的答案相似，并且有很多替代方案可以在没有提升的情况下进行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-04T19:11:40.867

这基本上是Maxim的答案，界面更方便。我从[这里](https://github.com/conradsnicta/armadillo-code/blob/9ef33c939e875ab63d60abe2a53fe05e103f7915/include/armadillo_bits/arma_static_check.hpp)拿走了它。这样做的好处是模板的使用可以防止用户将非编译时间常数值作为条件传递。

```
template<bool Is_Condition_Met>
struct Static_assert_cpp98
{
  static void apply() {static const char junk[ Is_Condition_Met ? 1 : -1 ];}
};

template<>
struct Static_assert_cpp98<true>
{
  static void apply() {}
};

#define STATIC_ASSERT_CPP98(condition) Static_assert_cpp98<condition>::apply() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:57:41.767

如果您添加对相关方法的调用 (a.foo();)，静态断言将失败（然后该方法将被编译）。你知道你不应该静态断言运行时值，比如我认为的“k”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-20T17:20:17.920

```
int foo(const int k)
{
  STATIC_ASSERT( k > 9, error_msg );
  return k+5;
} 
```

静态断言仅适用于编译时常量表达式。

`k`不是编译时常量表达式。

非类型模板参数是模板实例化期间的编译时常量表达式，因此您可以这样调整代码：

```
template <int K>
int foo()
{
  STATIC_ASSERT( K > 9, error_msg );
  return K+5;
} 
```

# iphone - NSString 来自编码未知的文本文件

> ID：14621969
> 
> 赞同：3
> 
> 时间：2013-01-31T09:06:41.933
> 
> 标签：iphone, ios, encoding, utf-8, nsstring

我正在尝试根据 Apple 的文档显示具有未知编码的文本文件的内容：

> 尝试 stringWithContentsOfFile:usedEncoding:error: 或 initWithContentsOfFile:usedEncoding:error: （或基于 URL 的等效项）。这些方法尝试确定资源的编码，如果成功则通过引用返回使用的编码。
> 
> 如果 (1) 失败，请尝试通过指定 UTF-8 作为编码来读取资源。
> 
> 如果 (2) 失败，请尝试适当的传统编码。这里的“适当”取决于具体情况；它可能是默认的 C 字符串编码，可能是 ISO 或 Windows Latin 1，或者其他，取决于您的数据来自哪里。

这并不总是有效。是否有更可靠的方法来检测编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-22T17:11:19.483

您应该使用可以检测编码的 NSAttributedString。经过长时间测试不同的解决方案，我使用它：

```
NSError *error;
NSDictionary *options = [NSDictionary dictionary];
NSDictionary *attributes;
NSAttributedString *theString = [[NSAttributedString alloc] initWithURL:fileURL options:options documentAttributes:&attributes error:&error];
NSInteger detectedEncoding = [[attributes objectForKey:@"CharacterEncoding"] integerValue]; 
```

我测试了来自许多来源/环境的许多文件，它似乎很有效（因此您应该检查是否有效`error`）`nil`。对于从 Excel 导出的普通 csv 文件，我得到了这个属性字典（30 值表示`NSMacOSRomanStringEncoding`：

```
{
    CharacterEncoding = 30;
    DocumentType = NSPlainText;
    UTI = "public.plain-text";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:31:49.560

如果你不提前知道数据的编码，那么必须通过对原始数据的分析来猜测它，这有时会导致错误的猜测，从而导致解码不可靠。如有疑问，只需询问用户使用哪种编码即可。

# authentication - spring security jmx 身份验证器

> ID：14621971
> 
> 赞同：4
> 
> 时间：2013-01-31T09:06:48.627
> 
> 标签：authentication, spring-security, jmx, thread-local, security-context

我有一个没有配置 Spring 的 JMX 服务器，并且正在尝试为授权部分实现 Spring Security。（见这里，[https://blogs.oracle.com/lmalventosa/entry/jmx_authentication_authorization](https://blogs.oracle.com/lmalventosa/entry/jmx_authentication_authorization) 用例 4，没有授权部分）

我现在想使用 Spring Security 实现授权部分。

在我的 JMX 身份验证器中，我这样做：

```
final List<GrantedAuthority> roles = new ArrayList<GrantedAuthority>();
roles.add(new SimpleGrantedAuthority("ROLE_ADMIN"));
final Authentication auth = new UsernamePasswordAuthenticationToken(credentialsArr[0], credentialsArr[1],
                        roles);
SecurityContextHolder.getContext().setAuthentication(auth); 
```

在 MBean 中，我尝试获取它并查看它是否已正确传递（将来我计划添加 Spring Annotations 以检查角色和方法调用）。

```
final Authentication springAuth = SecurityContextHolder.getContext().getAuthentication(); 
```

问题是，在标准连接流程中：

```
JMXServiceURL url = ...;
Map env = ...;
String[] creds = {"monitorRole", "mrpasswd", "FileRealm"};
env.put(JMXConnector.CREDENTIALS, creds);
JMXConnector cc = JMXConnectorFactory.connect(url, env);
MBeanServerConnection mbsc = cc.getMBeanServerConnection(); 
```

我得到一个 JMX 连接器，然后连接到 MBean 服务器并调用一个方法——它可以工作。我通过了验证器，设置了 Spring Context 并在 Mbean 中获取它。

但是，例如，当我使用 Jconsole 进行连接时，我没有在 Mbean 中获得 Spring Context。

我正在使用可继承线程策略。

1.  当使用 JConsole 和其他连接器进行连接时，是否有办法在 MBean 中获取上下文？
2.  如果我使用 Spring 实现 JMX，它会帮助我解决问题吗？
3.  我的主要流程是万无一失的吗（有没有机会我不会在 MBean 中获得上下文）？我问这个，因为这个流程对我来说很重要，所以要做到万无一失。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:57:47.977

我将回答我自己的问题，因为我对此感兴趣并想分享我自己的结论（与上面的数字无关）：

1.  它看起来像在本地（即本地主机）连接 JConsole（或 JVisualVM）直接连接到线程，而不通过 JMX Authenticator。我发现的唯一解决方法是连接完整的 URL（例如 service:jmx:rmi:///jndi/rmi://10.45.32.112:3251/jmxrmi）。

2.  一种始终有效的机制是 Java 安全上下文。当 JMXAuthenticator 返回一个 Subject 时，您可以将 Spring Security Context 分配给它，因此在调用方法时肯定会得到它（例如，在调用之前运行的 Advice 中）。看到我得到的这个回复：http: [//forum.springsource.org/showthread.php?134327-JMX-Authentication-with-Spring-Security-%283-1-x%29](http://forum.springsource.org/showthread.php?134327-JMX-Authentication-with-Spring-Security-%283-1-x%29)

3.  我不能确定问题中提到的流程是否是万无一失的。但看起来确实如此，基于以下假设：如果您为每个 JMX 调用创建一个新连接并将其仅用于一次调用，您将获得 Spring Security Context 正确传播。

希望它对你们有帮助:-)

# sql-server - SQL - 如何在没有数据透视的情况下将多条记录作为一条记录插入？

> ID：14621973
> 
> 赞同：0
> 
> 时间：2013-01-31T09:06:56.443
> 
> 标签：sql-server

我想从多条记录中创建一个查询作为一条记录，但我不想使用 Pivot，有什么解决方案吗？

这是表格：

```
ID   Element_Name  Value
1    Parmitha      100
2    Anggun        200
3    Chandra       300
4    BagusofTerror 400 
```

我希望结果是这样的：

```
paramitha , anggun, chandra , bagusofterror
100 , 200, 300, 400 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:23:30.527

您可以使用`for xml path ('')`转置列的值。

例如，你可以写

```
select Element_Name + ', '
from TheTable
for xml path (''); 
```

要得到`Parmitha, Anggun, Chandra, BagusofTerror,`

这是一个现场演示：[http ://www.sqlfiddle.com/#!3/71f88/24](http://www.sqlfiddle.com/#!3/71f88/24)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:29:46.573

试试这个 ：-

```
Select 
    MAX(CASE WHEN colID = 1 THEN value ELSE NULL END) AS [Parmitha],
    MAX(CASE WHEN colID = 2 THEN value ELSE NULL END) AS [Anggun],
    MAX(CASE WHEN colID = 3 THEN value ELSE NULL END) AS [Chandra],
    MAX(CASE WHEN colID = 4 THEN value ELSE NULL END) AS [BagusofTerror]

FROM    
(
    SELECT  ROW_NUMBER() OVER (ORDER BY ID) AS colID,
            ID,
            Element_Name,
            value
        FROM    Sample
    ) AS d 
```

[SQL 演示](http://www.sqlfiddle.com/#!3/b596e/12)

考虑到 Wolf 的回答，使用动态查询和 xml 路径

```
DECLARE @cols AS NVARCHAR(MAX),
@query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' 
                    + convert(varchar(max), Element_Name, 120)
                from Sample
        FOR XML PATH(''), TYPE
        ).value('.', 'varchar(MAX)') 
    ,1,1,'')

set @query = 'SELECT' + @cols + ' from 
         (
            select  value, Element_Name
            from Sample
        ) x
        pivot 
        (
            max(value)
            for Element_Name in (' + @cols + ')
        ) p '

 execute(@query); 
```

[演示](http://www.sqlfiddle.com/#!3/b596e/30)

顺便说一句，你不使用`PIVOT`.Using PIVOT 可以达到相同的结果

```
 Select [Parmitha],[Anggun],[Chandra],[BagusofTerror] 
 FROM 
 (
  Select value,element_name from Sample
 )src
 pivot
 (
  max(value)
  for Element_Name in ([Parmitha],[Anggun],[Chandra],[BagusofTerror])
 )pvt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:35:17.530

您还可以使用 COALESCE 将结果集的列转换为 varchar 变量：

```
CREATE TABLE #Pivot
(ID int, Element_Name varchar(50), Value int)

INSERT #Pivot values (1,'Parmitha',100)
INSERT #Pivot values (2,'Anggun',200)
INSERT #Pivot values (3,'Chandra',300)
INSERT #Pivot values (4,'BagusofTerror',400)

DECLARE @titles VARCHAR(1000)
DECLARE @values VARCHAR(1000)
SET @titles = ''
SET @values = ''

SELECT @titles = @titles + COALESCE(Element_Name + ',' , '')
FROM #Pivot ORDER BY ID

SELECT @values = @values + COALESCE(convert(varchar, Value) + ',' , '')
FROM #Pivot ORDER BY ID

SELECT @titles
UNION ALL
SELECT @values 
```

给出：

Parmitha、Anggun、Chandra、BagusofTerror、

100,200,300,400,

# .net - Parallel.ForEach 没有产生所有线程

> ID：14621976
> 
> 赞同：0
> 
> 时间：2013-01-31T09:07:21.823
> 
> 标签：.net, multithreading, parallel.foreach

我在使用 Parallel.ForEach 时遇到了一些问题。我需要模拟几个硬件组件，等待传入连接并回复它。

我目前的代码如下：

```
Task.Factory.StartNew(() => components, (component) =>
    {
        var listener = new TcpListener(component.Ip, component.Port);
        while(true)
        {
            using(var socket = listener.AcceptSocket())
            {
                 //Read out socket and send a reply
                 socket.Close();
            }
        }
    }); 
```

我遇到的问题是：并非每个组件都会创建自己的线程。即使其中一个线程退出，它们仍然不会产生。

我集合中的当前组件数量是 40，产生的线程数是（或至少看起来是）33。

我的印象是 Parallel.Foreach() 将为传递给它的可枚举集合创建一个新的并行线程。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:15:43.963

它不一定一次启动每个任务的所有线程。它查看其工作负载并跨处理器的所有内核进行配置。如果您的任务多于核心，它将停止创建新线程，因为这只会导致大量不必要的上下文切换。但是，如果它认为现有任务/线程被阻塞，在这种情况下，它会添加更多线程以便工作可以继续，即启动更多任务，而其他任务被阻塞。它不会在短时间内检测到阻塞的任务。

这可能解释了为什么您没有看到与任务一样多的线程。当任务完成时，系统可以重新使用它所在的线程来放置一个新的，尚未启动的任务。

这篇博文底部的图表在一定程度上大致说明了这一点：http: [//colinmackay.co.uk/2011/02/08/parallelisation-in-net-40-part-1-looping/](http://colinmackay.co.uk/2011/02/08/parallelisation-in-net-40-part-1-looping/)。运行多达 4 个任务所花费的时间与仅运行一个任务所花费的时间大致相同。然后在添加第 5 个任务时发生跳转，完成时间大致相同，直到第 8 个任务再次跳转。这是因为我使用的是 4 核系统。

**更新**

刚刚意识到你的代码永远不会退出任务，因为你有一个无限循环。我会说任务（它们是离散的工作单元）不是你想要的。除非您专门从任务并行库中获取其他内容，否则在这种情况下，您自己使用常规线程可能是更好的解决方案。

对于任务，您几乎无法控制何时创建线程或一次创建多少线程。（如果您要从 TPL 获取其他要保留的内容，您可以编写自己的调度程序来控制它）。但是，如果您只是启动一个在应用程序的整个生命周期中不断侦听内容的后台线程，那么我仍然会使用常规线程。

# sql - 多部分标识符无法绑定sql

> ID：14621981
> 
> 赞同：16
> 
> 时间：2013-01-31T09:07:48.610
> 
> 标签：sql, sql-server, tsql

我在以下查询中得到 multipart can not be bound 错误

```
update nfltx
set 
b.boxno = a.boxno,
b.message = a.message,
b.nameboxno = a.nameboxno,
b.namemsg = a.namemsg,
b.phoneboxno = a.phoneboxno,
b.phonemsg = a.phonemsg

FROM ofltx a JOIN nfltx b 
ON a.ls_fullnam = b.ls_fullnam 
```

但是如果我从 boxno 消息中删除 b 并且我没有得到错误。这背后的原因是什么。谢谢你使用 sql server 2008

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T09:14:03.900

FROM 子句中指定的表别名不能用作 SET column_name 中的限定符。这是无效的：

```
update nfltx
set 
b.boxno = a.boxno,
b.message = a.message,
b.nameboxno = a.nameboxno,
b.namemsg = a.namemsg,
b.phoneboxno = a.phoneboxno,
b.phonemsg = a.phonemsg

FROM ofltx a JOIN nfltx b 
ON a.ls_fullnam = b.ls_fullnam 
```

要使其工作，请删除 b。列名的别名。

```
update nfltx
set 
boxno = a.boxno,
message = a.message,
nameboxno = a.nameboxno,
namemsg = a.namemsg,
phoneboxno = a.phoneboxno,
phonemsg = a.phonemsg

FROM ofltx a JOIN nfltx b 
ON a.ls_fullnam = b.ls_fullnam 
```

拉吉

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T10:02:07.487

> 这背后的原因是什么？

一个`UPDATE`(and `DELETE`, `INSERT`) 可以影响一个且仅一个表。您已经在此处确定了要影响的表：

```
update nfltx 
```

因此，在子句中允许左侧赋值的别名是没有*意义的。*`SET`它们*必须*是属于先前标识的表的列。

如果同一个表多次包含在`FROM`子句中（并且它是您希望更新的表），您需要提供一个别名来指示要更新的表的哪个实例 - 但您需要提供它（一次）在`UPDATE`从句中而不是在`SET`从句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T03:24:17.087

只需使用

```
update b 
```

代替

```
update nfltx 
```

伙计，你们让那些正在学习的人太难了。

# c# - 时间跨度字符串格式

> ID：14621982
> 
> 赞同：9
> 
> 时间：2013-01-31T09:07:50.233
> 
> 标签：c#, string, .net-3.5, timespan

我有一个时间跨度，需要以特定格式输出，如下所示：-

```
TimeSpan TimeDifference = DateTime.Now - RandomDate; 
```

我正在像这样格式化 TimeSpan：-

```
string result = string.Format(@"{0:hh\:mm\:ss}", TimeDifference); 
```

结果将如下所示：-

> “00:16:45.6184635”

如何将这些秒数舍入到小数点后 0 位？

```
Expected Result = 00:16:46 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T09:20:27.357

您的代码适用于 .NET 4 但不适用于 3.5，因为 4 发生了重大变化，`TimeSpan`现在实现`IFormattable`（见下文）。

您可以在 3.5 或更低版本上执行的操作是将其转换`TimeSpan`为`DateTime`并使用`ToString`：

```
DateTime dtime = DateTime.MinValue.Add(TimeDifference);
string result = dtime.ToString(@"hh\:mm\:ss"); 
```

在这里你可以看到非工作+工作版本：http: [//ideone.com/Ak1HuD](http://ideone.com/Ak1HuD)

* * *

**编辑**我认为它有时工作有时不工作的原因是[因为 .NET 4.0](https://stackoverflow.com/questions/2548106/breaking-changes-in-net-4-0) [`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan%28v=vs.90%29.aspx)实现[`IFormattable`](http://msdn.microsoft.com/en-us/library/bk5yxz0f%28v=vs.110%29.aspx)了[似乎被`String.Format`](http://msdn.microsoft.com/en-us/library/system.iformattable.tostring%28v=vs.90%29.aspx).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T09:16:45.777

您的代码应该可以正常工作*（在删除小的语法错误之后）*。考虑以下示例：

```
TimeSpan TimeDifference = DateTime.Now - DateTime.Now.AddHours(-6);
string result = string.Format(@"{0:hh\:mm\:ss}", TimeDifference);
Console.WriteLine("TimeSpan: {0}", TimeDifference.ToString());
Console.WriteLine("Formatted TimeSpan: {0}", result); 
```

输出：

```
TimeSpan: 05:59:59.9990235
Formatted TimeSpan: 05:59:59 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T09:18:48.737

对我来说很好。

例如，这个程序：

```
using System;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            DateTime then = new DateTime(2013, 1, 30, 0, 1, 3);
            TimeSpan ts = DateTime.Now - then;

            Console.WriteLine(ts.ToString());
            Console.WriteLine(ts.ToString(@"hh\:mm\:ss"));
            Console.WriteLine(string.Format(@"{0:hh\:mm\:ss}", ts));

            // Or, with rounding:
            TimeSpan rounded = TimeSpan.FromSeconds((int)(0.5 + ts.TotalSeconds));
            Console.WriteLine(rounded.ToString(@"hh\:mm\:ss"));
        }
    }
} 
```

输出类似：

```
1.09:20:22.5070754
09:20:22
09:20:22
09:20:23 <- Note rounded up to :23 
```

# jquery - jquery-ui-map 和 MarkerClusterPlus => 获取点击事件（在 markerCluster 上）并触发另一个事件

> ID：14621987
> 
> 赞同：0
> 
> 时间：2013-01-31T09:08:04.323
> 
> 标签：jquery, google-maps, onclick, markerclusterer, jquery-ui-map

我有一个项目，它使用 jquery-map-ui 和 MarkerClustererPlus。

一切都按应有的方式工作-但缺少一件事：

每当地图中心发生变化（dragend）时，我都会通过 Ajax 重新加载结果（标记），并在地图下方显示 10 个最佳条目的经典结果列表（对于“非视觉用户”）。

当用户单击标记群集按钮时，我希望发生同样的事情（地图中心和缩放已更改，但我无法对此进行处理以触发我自己的事件（基于重新加载最佳结果列表新的地图中心）...

所以问题是：当有人单击 ClusterMarker 并且地图被重新定位时，我如何才能启动我的功能......不幸的是，dragend 事件在这里不起作用。还玩过markerClusterer“点击”功能，但没有让它工作:-(

这是我现在正在使用的……基于： [http](http://code.google.com/p/jquery-ui-map/) ://code.google.com/p/jquery-ui-map/ 和 [http://google-maps-utility-library-v3.googlecode.com/ svn/trunk/markerclustererplus/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/docs/reference.html)

更新：基本上我正在寻找关于如何嵌入功能的可能性/建议，如下所示[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/examples/events_example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/examples/events_example.html) 到我的代码：

```
$(function() 
{ 
    getMarkersByLatitudeAndLongitude(); //call function to load map and markers on initial load

    $('#map').gmap().bind('init', function(event, map) 
    { 
        $(map).dragend(function() 
        {
            getMarkersByLatitudeAndLongitude(); //reload Map and Markers, if Map has been moved
        });

        $(map).addEventListener('zoom_changed', function() 
        {
      var initial_zoom = $('#map').gmap('option', 'zoom'); //reload Map & Markers, if Zoom level has been changed and if we need more results
      var new_zoom = $("#map").gmap('get', 'map').getZoom();
      if(new_zoom<=initial_zoom )   getMarkersByLatitudeAndLongitude(); 
        }); 
    });

    function getMarkersByLatitudeAndLongitude()
    {
        var latlng  = $("#map").gmap('get', 'map').getCenter();
        var zoom        = $("#map").gmap('get', 'map').getZoom();
        var i           = 0;
        $('#map').gmap('closeInfoWindow'); // close any open info window
        $('#map').gmap('clear', 'markers'); // remove all markers
        $('#map').gmap('get', 'MarkerClusterer').clearMarkers(); //remove all cluster markers

    //get results to be display via json
        $.getJSON( '/code/get_json_data.php', { 'latitude': latlng.lat(), 'longitude': latlng.lng() ,'zoom': zoom }, function(data) 
        { 
            if(data)
            {
                $.each( data.markers, function(i, marker) 
                {
                    if(i<10) 
                    {
                        for_list    = for_list  + "|" + marker.id ; //remember the first 10 markers to be display in Details Results List under the Map
                        i++;
                    }
          $('#map').gmap('addMarker', 
                    { 
                        'position': new google.maps.LatLng(marker.la, marker.lo),
                        'icon':marker.m,
                        'title':marker.n,
            'bounds':false  
                    })
                    .click(function()
                    {
                        var content = load_content(marker.f);
                        $('#map').gmap('openInfoWindow',{ 'content': content}, this); // get Marker Content on Click. function load_content gets the content via Ajax
                    });
                });

        // let Marker Clusterer do his work
                $('#map').gmap('set', 'MarkerClusterer', new MarkerClusterer($('#map').gmap('get', 'map'), $('#map').gmap('get', 'markers'), {
            'maxZoom':12,   
          'gridSize': 45, 
          'title':'Click to zoom in'
        })); 

                //Load an generate the Detail List
        $.post('/code/get_details_for_list.php', { list: for_list } , function(data) {
                    $('#detail_list').html(data);
                });

                // add Marker for center position
        $('#map').gmap('addMarker', 
                { 
                    'position': latlng.lat() + ',' + latlng.lng(),
                    'icon'      : '/code/geo/images/gmap_pin_blue.png',
                    'title'   : 'Center of your Search'
                });
            }
        });
    } 
```

任何正确方向的提示都会受到高度赞赏。如果我能够在markerClusterer 点击事件之后提醒新的地图中心坐标就足够了。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:03:55.927

您必须提供 MarkerClusterer 作为参数`google.maps.event.addListener`

```
google.maps.event.addListener(
      $('#map').gmap('get', 'MarkerClusterer'),
      'click',
      function(){
      alert('click on cluster');
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:11:36.437

好的，让它与“解决方法”一起工作。

我在markercluster.js文件中添加了一个函数调用到这个函数中：google.maps.event.addDomListener(this.div_, "click", function (e) { .....

我的函数调用会根据新的地图中心更新我的列表。

也许不是最智能的解决方案，但它确实有效......

# javascript - 在 asp.net mvc 4 中组织自定义 javascript

> ID：14621988
> 
> 赞同：17
> 
> 时间：2013-01-31T09:08:09.640
> 
> 标签：javascript, asp.net-mvc-4, bundle

我是 mvc 4 的新手，我想知道我应该把我的自定义 javascript 文件放在哪里。“自定义”是指仅在特定视图或部分视图中使用的脚本。

我也使用区域，因此增加了复杂性。我正在考虑将我的脚本放在应用程序根目录的 Script 文件夹中，然后放在自定义子文件夹中。

然后我将如何在我的 Views 中引用脚本？我应该使用自定义捆绑包吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-31T09:19:50.380

我认为将脚本添加到文件夹中的自定义文件`scripts`夹是可行的方法。您可以在文件中创建一个新包，`appstart\BundleConfig.cs`如下所示：

```
bundles.Add(new ScriptBundle("~/bundles/custom").Include(
                   "~/Scripts/Custom/myCustom.js",
                   "~/Scripts/Custom/myCustom2.js")); 
```

而不是`bundle`像这样添加到您的视图中：

```
@section scripts{

 @Scripts.Render("~/bundles/custom")

} 
```

这将呈现在`@RenderSection("scripts", required: false)`您`layout`文件的行上。

**或者**
要只为您调用一个特定`script`的，您`view`可以执行以下操作：

```
@section scripts{
<script src="~/Scripts/Custom/myCustom.js"></script>
} 
```

注意：您可以将脚本文件从该部分拖到`solution explorer`该部分中。您不必编写整个路径。
**编辑** - 似乎很重要，所以我从我的上一条评论中复制了这个：
为了使用`minification`，您需要将脚本添加到捆绑表中，然后添加`BundleTable.EnableOptimizations = true;`到`BundleConfig`文件中或`<compilation debug="false"`在`web.config`文件中设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:14:22.157

您可以在文件夹中组织您的脚本`Scripts`：

*   ~/Scripts/Home/foobar.js
*   ~/Scripts/Admin/baz.js
*   ...

> 我应该使用自定义捆绑包吗？

当然，您可以捆绑始终在一起的脚本。

# sql - 已搜索 CASE WHEN 处理订单

> ID：14621989
> 
> 赞同：2
> 
> 时间：2013-01-31T09:08:23.427
> 
> 标签：sql, case-when

我需要一些关于SQL 中*搜索* `CASE WHEN`语句的处理顺序的信息。

例如：

```
(CASE
     WHEN Cells.Type <> 'UOM' THEN 0
     WHEN Template_Colors.Uom_Case = 'ONE' THEN 1
     WHEN Template_Colors.Uom_Case = 'MUL' THEN 2
 END) AS CELL_WHAT_UOM 
```

我需要结果总是`0`，除非`Cells.Type <> 'UOM'`。

我知道 SQL 解析器通常从底部到顶部进行，但在 Oracle 中查询似乎工作正常，所以我认为`WHEN`子句按它们的顺序处理。

**100%保证**先办案`0`？

或者我不得不写：

```
(CASE
     WHEN Cells.Type <> 'UOM' THEN 0
     WHEN Cells.Type = 'UOM' AND Template_Colors.Uom_Case = 'ONE' THEN 1
     WHEN Cells.Type = 'UOM' AND Template_Colors.Uom_Case = 'MUL' THEN 2
 END) AS CELL_WHAT_UOM 
```

...？

我需要有关 Oracle 10g + SQL server 2008 r2 + Postgre 的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:11:06.950

如果`Cells.Type`不等于`UOM`，则保证结果为 0。

您*不能*保证（当然在 SQL Server 中）是不会计算其他分支中的任何*表达式。*

因此，如果您执行以下操作：

```
CASE WHEN a = 0 THEN 0 ELSE 10/a END 
```

您可能会得到除以零的错误。

* * *

而且，即使在您的示例中：

```
WHEN Cells.Type = 'UOM' AND Template_Colors.Uom_Case = 'ONE' THEN ... 
```

*无法*保证评估谓词的顺序，因此`Template_Colors.Uom_Case`仍然可以访问。不确定您对是否访问此列有什么顾虑，因此目前不提供进一步的建议。

* * *

[SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

> *   按指定的顺序计算每个子句的*Boolean_expression 。*`WHEN`
>     
>     
> *   返回计算结果为 的第一个*Boolean_expression的**result_expression*。*`TRUE`*
>     
>     
> **   如果没有*Boolean_expression*计算结果为`TRUE`，则如果指定了子句，数据库引擎将返回*else_result_expression* ，如果未`ELSE`指定子句，则返回一个`NULL`值`ELSE`。*

 *[甲骨文](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm)：

> 在搜索`CASE`表达式中，Oracle 从左到右搜索，直到找到一个为真的*条件*，然后返回*return_expr*。如果没有发现*条件*为真，并且`ELSE`存在子句，则 Oracle 返回*else_expr*。否则，Oracle 返回`null`.

[PostGre](http://www.postgresql.org/docs/7.4/static/functions-conditional.html) :

> 如果结果为真，则`CASE`表达式的值是条件之后的结果。如果结果为假`WHEN`，则以相同的方式搜索任何后续子句。

[安西 92（草案）](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)：

> 如果a`<search condition>`中 some of为真，则 the 的值是第一个（最左边）为真的的值，转换为 的数据类型。`<searched when clause>``<case specification>``<case specification>``<result>``<searched when clause>``<search condition>``<case specification>`*

# c# - C# 中的闭包 - 在具有值类型的函数调用中启动线程

> ID：14621993
> 
> 赞同：0
> 
> 时间：2013-01-31T09:08:37.190
> 
> 标签：c#, .net, multithreading, closures

我有这段代码，它可以按我的意愿工作，但我不明白为什么。考虑 C、C++ 中的堆栈，我猜 p 变量将在每次调用时位于堆栈上，然后在方法返回时被擦除。线程的闭包如何捕获它，并且每次都捕获正确的值？输出是我想要的——文件是“_a”、“_b”、“_c”。

```
public enum enumTest
    {
        a = 1,
        b =2,
        c=3
    }     
 private void Form1_Load(object sender, EventArgs e)
    {

        callme(enumTest.a);
        callme(enumTest.b);
        callme(enumTest.c);
    }

    private void callme(enumTest p)
    {
        Thread t = new Thread(() =>
            {
                Thread.Sleep(2000);
                Guid guid = Guid.NewGuid();
                File.WriteAllText(guid.ToString() + "_" + p.ToString(), "");
            });
        t.Start();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:12:36.040

这与*闭包*无关，这里没有任何价值捕获。

这里发生的是您的`p`参数*按值复制*到线程的函数中。每次传递给函数时，都会将新*值*`p` 复制到函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:26:11.413

> Lambda 只是美化的匿名代表

*   Rick Strahl ( [http://www.west-wind.com/weblog/posts/2008/Apr/26/Variable-Scoping-in-Anonymous-Delegates-in-C](http://www.west-wind.com/weblog/posts/2008/Apr/26/Variable-Scoping-in-Anonymous-Delegates-in-C) )

Rick 的文章描述了编译器如何生成一个类来处理`enumTest p`值和`delegate`.

[匿名函数体变量保存在哪里](https://stackoverflow.com/questions/10658658/where-does-anonymous-function-body-variables-saved)也有很好的信息？

基本上，编译器使用必须传递给 lambda 的局部变量创建“闭包类”的新实例。这就是您输出正确的原因。

*更新*

如果是：

```
for (int i=0; i<10; i++) 
{
    var t = new Thread(() => { Console.WriteLine(i); }); 
    t.Start(); 
} 
```

变量在和`i`之间共享。每个线程都在访问相同的. 而且由于 for 循环往往在任何线程运行之前结束，所以你看到的只是“10”。`for``lambda``i`

请参阅[http://msdn.microsoft.com/en-us/library/0yw3tz5k(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/0yw3tz5k(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:27:42.787

> 线程的闭包如何捕获它，并且每次都捕获正确的值？

这就是编译器的魔力。仅仅因为`p`参数被 lambda 使用，编译器会以不同的方式对待它。 `p`不是放在栈上，而是放在堆上*。*这就是为什么它在`callme()`终止后仍然存在的原因。

# c++ - 使用 int 和移位执行按位与

> ID：14621994
> 
> 赞同：0
> 
> 时间：2013-01-31T09:08:38.203
> 
> 标签：c++, bit, shift, negative-number

这个问题基于： [Shift with 64 bit int](https://stackoverflow.com/questions/14614877/shift-with-64-bit-int/14616081#14616081) 问题的根源是 - 我定义了一个`enum`，它表示不同的掩码。并且需要在将结果右移之后`&`使用 (mask) 生成变量。`enum`由于`enum`类型始终为`int`，因此变量也被定义为`int`。但正如您所见，右移负数存在问题。可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:20:00.253

首先，`enum`类型并不总是`int`; 在 C++11 中，您甚至可以强制它为无符号类型。其次，即使底层类型是`int`，您也可以（并且应该）自由地来回转换而`unsigned`没有真正的风险。例如，您可以重载`operator&`因此：

```
MyEnum
operator&( MyEnum lhs, MyEnum rhs )
{
    return static_cast<MyEnum>(
        static_cast<unsigned>( lhs) & static_cast<unsigned>( rhs ) );
} 
```

用于提取可能位于中间某处的字段：

```
int
getFieldX( MyEnum values )
{
    return static_cast<unsigned>(values & fieldXMask) >> fieldXOffset;
} 
```

这将确保正确的行为（并且一旦无符号值被移动，它应该转换为`int`不丢失值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:13:12.843

我建议您`unsigned long long`在移位之前将枚举的值静态转换为。我认为这是您可以使用的最安全的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:11:01.250

您可以先进行移位，然后对移位的掩码进行 AND 处理，以解决此问题。

# ruby-on-rails - 通过 Facebook 登录创建的垃圾邮件帐户

> ID：14621999
> 
> 赞同：1
> 
> 时间：2013-01-31T09:09:08.403
> 
> 标签：ruby-on-rails, facebook-graph-api, devise

我有一个使用 Facebook 作为用户帐户的 Rails 应用程序，截至今天晚上，Vietname 的某个人决定（无论出于何种原因）使用机器人在我的网站上使用虚假 Facebook 帐户创建虚假帐户。我每分钟收到大约 2 个新的假帐户。

我暂时禁用了注册，但我不想这样，所以我不知道该怎么办。

需要注意的几点： 所有帐户都使用@yahoo.com 或@ymail.com 地址 很多帐户都使用同一个IP 注册，但不是全部。似乎他每 15 分钟左右切换一次 IP。

我真的很茫然，我想上床睡觉，但直到我找到解决办法我才能上床。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:19:24.343

在注册表中制作验证码。如果您已经有验证码，请更改验证码生成机制。另外我认为您的对手制作了一个脚本，该脚本会自动将新用户帐户添加到您的网页，因此您可以临时更改注册处理程序的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:34:49.490

您可以使用一些技术，例如限制对应用程序的访问，使用智能算法之类的东西来阻止它请求大量帐户的 IP，或者限制帐户创建不超过来自 IP 的用户。

并且如指定的那样，如果您知道模式，您可以根据模式过滤请求并拒绝任何访问。