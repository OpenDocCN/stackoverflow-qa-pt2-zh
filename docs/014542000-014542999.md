# StackOverflow 问答 14542000-14542999

# php - PHP查询，获取新创建记录的默认序列值的值

> ID：14542005
> 
> 赞同：0
> 
> 时间：2013-01-26T21:59:36.847
> 
> 标签：php, sql, postgresql

对于一个测验网站，我正在为一个问题创建一个记录，并希望在之后立即获得它的 questionid，以便我可以使用它来创建答案记录。在 INSERT 创建的 questionid 是自动生成的序列值。

我是 PHP 新手，不知道如何获得这个值，因为这个 id 是标识这个新创建的记录的唯一唯一方法。反正有这样做吗？

这是我创建新记录的代码。

```
$questioncreatequery = pg_query("INSERT INTO question (questionid, quizid, questiontype, qdescription, qfilelocation, noofanswers, answertype) VALUES( default, '".$thisquizid."', '".$questiontype."', '".$qdescription."', '".$qfilelocation."', '".$noofanswers."', '".$answertype."')"); 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:11:14.207

获得所需内容的最简单方法是使用该`RETURNING`子句，从您的语句中返回一个值，`INSERT`如下所示：

```
$questioncreatequery = pg_query("INSERT INTO question (questionid, quizid, questiontype, qdescription, qfilelocation, noofanswers, answertype) VALUES( default, '".$thisquizid."', '".$questiontype."', '".$qdescription."', '".$qfilelocation."', '".$noofanswers."', '".$answertype."') RETURNING questionid"); 
```

然后您可以`$questioncreatequery`像使用任何查询结果一样使用并获取您的值：

```
 $row = pg_fetch_assoc($questioncreatequery);
  echo $row['questionid']; // <= this is the value you want 
```

# c# - 在数据库中存储大文件会导致“System.OutOfMemoryException”类型的异常

> ID：14542006
> 
> 赞同：4
> 
> 时间：2013-01-26T21:59:37.677
> 
> 标签：c#, sql-server, asp.net-mvc, sql-server-2008, asp.net-mvc-4

我已经建立了一个小型 MVC4 网站，用于使用代码优先方法共享文件。这些文件存储在我的数据库中

```
public byte[] Content { get; set; } 
```

我已经设置

```
<security>
  <requestFiltering>
    <requestLimits maxAllowedContentLength="536870912" />
  </requestFiltering>
</security> 
```

和

```
<httpRuntime targetFramework="4.5" executionTimeout="6000" maxRequestLength="524288"/> 
```

将文件大小限制为 500 Mb，以便文件实际上将其放入我的代码中（首先被卡住了）。

当我收到文件并尝试将其保存到数据库时，实际问题正在发生，我调用：

```
DbContext.SaveChanges() 
```

并得到这个错误：

> System.Data.Entity.dll 中出现“System.OutOfMemoryException”类型的异常，但未在用户代码中处理

我猜这是因为我遇到了某种限制，因为数据库中的一个字节 [] 中可以存储多少数据（或者我的进程允许使用多少内存）。上传较小的文件时一切正常。

数据库服务器是 SQL 2008 R2 Standard 服务器。

为了简单起见，我宁愿避免将文件存储在磁盘上。我有什么选择？

**编辑：**使用直接 SQL 查询插入文件的建议让我克服了将文件放入数据库的第一个问题：

```
DbContext.Database.ExecuteSqlCommand(
    @"UPDATE FileContents
        SET Content = @data 
        WHERE ID = @id",
new SqlParameter("id", content.ID), new SqlParameter("data", bytearray)); 
```

但是，当我尝试将文件从数据库中取出时，我现在遇到了完全相同的错误。这会导致现在的错误：

```
byte[] respdata = DbContext.Database.SqlQuery<Byte[]>
                            ("SELECT TOP 1 Content FROM FileContents WHERE ID = @id", 
                            new SqlParameter("id", filepost.File.ID)).Single(); 
```

同样，它适用于小于 100 MB 但在 200 Mb 文件上崩溃的较小文件。

根据以下答案中的评论将堆栈跟踪添加到问题中：

> System.OutOfMemoryException 未由用户代码处理
> HResult=-2147024882 消息=引发了“System.OutOfMemoryException”类型的异常。Source=mscorlib
> StackTrace：在 System.Object.MemberwiseClone() 在 System.Array.Clone() 在 System.Data.Common.CommandTrees.DbConstantExpression..ctor(TypeUsage resultType, Object value) 在 System.Data.Mapping.Update。 Internal.UpdateCompiler.GenerateValueExpression（EdmProperty 属性，PropagatorResult 值）在 System.Data.Mapping.Update.Internal.UpdateCompiler.BuildSetClauses（DbExpressionBinding 目标，PropagatorResult 行，PropagatorResult originalRow，TableChangeProcessor 处理器，布尔插入模式，字典`2& outputIdentifiers, DbExpression& returning, Boolean& rowMustBeTouched) at System.Data.Mapping.Update.Internal.UpdateCompiler.BuildInsertCommand(PropagatorResult newRow, TableChangeProcessor processor) at System.Data.Mapping.Update.Internal.TableChangeProcessor.CompileCommands(ChangeNode changeNode, UpdateCompiler compiler) at System.Data.Mapping.Update.Internal.UpdateTranslator.<ProduceDynamicCommands>d__0.MoveNext() at System.Linq.Enumerable.<ConcatIterator>d__71`1.MoveNext() 在 System.Data.Mapping.Update.Internal.UpdateCommandOrderer..ctor(IEnumerable `1 commands, UpdateTranslator translator) at System.Data.Mapping.Update.Internal.UpdateTranslator.ProduceCommands() at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache) at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) at System.Data.Entity.Internal.InternalContext.SaveChanges() at System.Data.Entity.Internal.LazyInternalContext.SaveChanges() at System.Data.Entity.DbContext.SaveChanges() at FilePublicator2.Controllers.FileController.Upload(String qqfile) in d:\Projects\FilePublicator2\trunk\FilePublicator2\Controllers\FileController.cs:line 115 at lambda_method(Closure , ControllerBase , Object[] ) at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 参数) 在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary `2 parameters) at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.b__7(IAsyncResult *) 在System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c* _DisplayClass37.< >c_ *DisplayClass39.b* _33() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c_ *DisplayClass4f.b* _49() InnerException：

**解决方案：**

这是如何解决此问题的完整示例：

[http://www.syntaxwarriors.com/2013/stream-varbinary-data-to-and-from-mssql-using-csharp/](http://www.syntaxwarriors.com/2013/stream-varbinary-data-to-and-from-mssql-using-csharp/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T23:40:21.607

`OutOfMemory`与任何框架或数据库无关。这意味着 CLR 在被要求时无法分配对象。

可能，您将数据放在多个缓冲区中，例如一个 in an `HttpPostedFile`、一个 in-memory `byte[]`、一个在 EF 中，......这会成倍增加所需的内存量。

切换到从 ASP.NET 流式读取和流式写入到 ADO.NET。教程可用。搜索“SQL Server 更新写入”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:20:33.583

您可以尝试绕过实体框架并`System.Data.SqlClient.SqlCommand`直接使用 ADO.Net（等）。

# mpi - 为什么请求比工作线程更多的节点会使 MPI 更快

> ID：14542011
> 
> 赞同：0
> 
> 时间：2013-01-26T22:00:20.530
> 
> 标签：mpi

我正在使用一个 MPI 程序，它将一个巨大的样本空间平等地划分为工作线程并并行完成工作。我正在使用以下脚本提交我的工作。

```
#!/bin/bash
#PBS -l nodes=NNODES
mpirun -np NPROC ./run >log 
```

我从集群网页中发现每个节点有 10 个内核。我天真地假设如果我需要 100 个工作线程 (NPROC)，我只需要请求 10 个节点 (NNODES)。但是，我发现当我增加 NNODES 时，程序运行的 walltime 一直在减少。

我猜这是因为在为每个节点分配 1 而不是多个工作线程时资源竞争较少。如果这是真的，我认为当 NNODES==100(NPROC) 时，挂墙时间也会趋于平稳，因为现在每个节点将有 1 个工作线程，如果我们有更多节点，它不会进一步减少挂墙时间比请求的工作线程。

然而，我又错了，因为进一步增加 NNODES 超过 100(NPROC) 几乎线性地进一步减少了墙时间。这真的让我很困惑，因为源代码实际上是从上面的脚本中读取 NPROC 并将样本划分为它们，我无法理解为什么请求比工作线程更多的节点会使事情变得更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T12:55:10.570

如果您的程序使用大量 I/O，您可能会观察到一个副作用，即通过保留大量节点，您会阻止其他作业运行，因此网络、文件系统等的压力较小，您的作业有更多的资源。但是，如果您的工作受 CPU 限制，则不适用。

# c - C + cURL + SQLite - CURLINFO_RESPONSE_CODE 破坏了一些甚至与它无关的东西

> ID：14542020
> 
> 赞同：0
> 
> 时间：2013-01-26T22:01:36.550
> 
> 标签：c, curl, libcurl

[https://stackoverflow.com/questions/14535518/curl-c-segmentation-fault](https://stackoverflow.com/questions/14535518/curl-c-segmentation-fault)

我必须继续我在那里写的东西。经过一些测试，我发现了为什么顺序很重要。如果我首先运行这个：`curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &httpcode);`我认为它破坏了一些与 cookie 相关的东西等等。无论如何，我在这里为由此引起的另一个问题寻求帮助。在这种情况下，顺序根本不重要。

我打开了一个 SQLite 处理程序。运行上述代码后`curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &httpcode);`，处理程序就被破坏了。如果我删除此代码，一切正常，但我需要响应代码，我对这个问题真的很感兴趣。无论如何，如果我在`CURLINFO_RESPONSE_CODE`它工作后初始化处理程序，但我不喜欢这种方式。

我在 Debian 6 64 位和 Debian Wheezy 64 位（libcurl4-openssl-dev 7.26.0-1 + libsqlite3-dev 3.7.13-1）上进行了测试。

非常感谢任何帮助。:D

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:19:13.670

我已经解决了一切。问题与`httpcode`. 一旦我成功了`long`（最初是这样`int`），一切都开始运作良好。

谢谢！

# c++ - istream_iterator 的初始化导致设置 ifstream.fail()

> ID：14542024
> 
> 赞同：2
> 
> 时间：2013-01-26T22:01:54.320
> 
> 标签：c++, file-io, ifstream, istream-iterator

我正在尝试将大量数据从文件导入到 boost::dynamic_bitset。为此，我希望使用与 dynamic_bitset (uint32_t) 的块大小相匹配的 istream_iterator。

如下所示，我使用要导入的文件的位置来设置我的 ifstream。但是，一旦我使用 ifstream 初始化 istream_iterator，就会设置 ifstream 的失败位。

关于为什么会发生这种情况的任何建议？

```
ifstream memHashes (hashFileLocation, ios::in | ios::binary);
if(memHashes.is_open() == false || memHashes.good() == false) { break; }
std::istream_iterator<uint32_t> memHashesIt(memHashes);
std::istream_iterator<uint32_t> memHashesEOFIt; 
```

**根据 cplusplus.com**：

> 当错误与操作本身的内部逻辑有关时，failbit 通常由输入操作设置，因此流上的其他操作可能是可能的。而当错误涉及流的完整性丢失时，通常会设置 badbit，即使在流上执行不同的操作也可能会持续存在。通过调用成员函数 bad 可以独立检查 badbit。

**编辑：**

散列包含 160 位散列，由单独的 C 应用程序中的 SHA1 实现生成。该文件中有几千个哈希值。我想读取 5 个 4 字节的块，而不是 20 个 1 字节的块（因此我使用 uint32_t 作为块大小）我从 C 应用程序中提取了相关代码，它显示了正在生成的哈希然后写入文件：

```
#define HASH_SIZE 20 // 160 bits / 8 bits per byte = 20 bytes

FILE *fp;
fp = fopen(hash_filename, "wb");
if (!fp) {
    MSG("Hash dump file cannot be opened");
    fclose(fp);
    return NULL;
}

uint8_t *p;
unsigned char hash[HASH_SIZE];
SHA1((unsigned char*)p, LENGTH_TO_HASH, hash);
fwrite(hash, HASH_SIZE, 1, fp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:36:29.793

将`std::istream_iterator<T>`输入`operator>>()`用于类型的对象`T`。也就是说，它假定格式化输入。在构造时，它会尝试读取可能导致设置的第一个`std::istream`元素`std::ios_base::failbit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:33:13.133

我认为初始化将从流中读取一个 uint32_t 。类型 uint32_t 是 unsigned 或 unsigned long 的别名。我有一种令人毛骨悚然的感觉，即您的文件不包含数字，但您期望（参见例如 ios_base::binary 开放模式）流可以读取一些打包的非文本表示形式。如果是这种情况，那么您的期望就是错误的，但是如果不了解更多有关您的程序的信息，就很难判断。不过需要注意的是：如果您将 istream_iterator 读到最后，您将始终同时设置 eofbit 和 failbit。我猜你只设置了故障位，这表明存在解析错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T03:17:04.367

问题是你有二进制数据。

和`istream_iterator`用于`istreambuf_iterator`读取`operator>>`数据。对于 uint_32_t 这意味着它将读取人类可读的文本并将其转换为整数。对于二进制数据，这将失败（大部分时间）。

你对速度还有另一个误解。
一次读取 4 个字节不太可能比一次读取 1 个字节快（这会使代码更复杂，这可能会减慢速度，但读取速度不会有差异）。这是因为从流中读取是缓冲的。当您进行读取时，一个巨大的块已经被读入缓冲区，它只是将它从一个位置复制到另一个位置。

您真正想要做的是定义一个类并将数据作为一个单元复制到您的类中：

```
class ShaMine
{
    std::vector<char>  data;
    public:
        ShaMine(): data(20, '\0') {}

        friend std::istream& operator>>(std::istream& s, ShaMine& dst)
        {
            return s.read(&data[0], 20);
        }

        void poop(std::ostream& s)
        {
             s << "Hi there: Char 0 is :" << (int) data[0] << "\n";
        } 
};

int main()
{
     std::ifstream   sfile("FILE");

     for(std::istream_iterator<ShaMine> loop(sfile); loop != std::istream_iterator<ShaMine>(); ++lop)
     {
         loop->poop(std::cout);
     }
}; 
```

# java - 如何返回扩展通配符列表？

> ID：14542027
> 
> 赞同：0
> 
> 时间：2013-01-26T22:02:08.313
> 
> 标签：java, generics

我有以下方法

```
public List<? extends FooInterface<X,Y>> getList() 
```

在具有列表成员的类中：

```
List<FooImplementation> foolist = new ArrayList<>(); 
```

我正在尝试做类似的事情：

```
public List<? extends FooInterface<X,Y>> getList(){
    return foolist;
} 
```

但它不起作用。

错误是：

```
Incompatible types. 
Required List<? extends FooInterface<X,Y>> 
Found List<FooImplementation>. 
```

它有什么问题？我还试图将傻瓜复制到扩展通配符列表中，但事实证明这是一个傻瓜的差事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:39:28.583

抱歉耽搁了，我刚刚看到发布解决方案的请求。

所以基本上我所做的就是将泛型参数添加到列表的类型中。

代替 ：

```
List<FooImplementation> foolist = new ArrayList<>(); 
```

我用了 ：

```
List<FooImplementation<X,Y>> foolist = new ArrayList<>(); 
```

这很有效，因为我这样声明了这个`FooImplementation`类：

```
class FooImplementation<X,Y> implements FooInterface<X,Y>{...} 
```

现在一切正常，没有错误。感谢那些抽出时间回答/评论我的问题的人。

# ruby - XInclude 包含元素的命名空间

> ID：14542030
> 
> 赞同：2
> 
> 时间：2013-01-26T22:02:23.103
> 
> 标签：ruby, xml, nokogiri, xml-namespaces, xinclude

考虑以下两个 XML 文档：

### 一个.xml

```
<a xmlns="foo" xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="b.xml" parse="xml" />
</a> 
```

### b.xml

```
<b>Hi Mom!</b> 
```

**`<b>`包含后元素应该在哪个命名空间**中，`foo`还是没有命名空间？

* * *

使用[Nokogiri](http://nokogiri.org)加载带有 XInclude 处理的第一个文档会产生一个文本表示，这意味着它`<b>`在父命名空间中，但检查`<b>`没有命名空间的元素声明：

```
require 'nokogiri'

d = Nokogiri.XML(IO.read('a.xml'),&:xinclude)
puts d
#=> <?xml version="1.0"?>
#=> <a xmlns="foo" xmlns:xi="http://www.w3.org/2001/XInclude">
#=>     <b>Hi Mom!</b>
#=> </a>

p d.root.namespace
#=> #<Nokogiri::XML::Namespace:0x3fd40c517de8 href="foo">

p d.root.elements.first.namespace
#=> nil 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:21:30.520

> 包含后元素应该在哪个命名空间`<b>`，foo 或没有命名空间？

没有命名空间。XInclude 在信息集级别运行并保留包含内容的信息集属性。信息集[规范](http://www.w3.org/TR/xml-infoset/)明确指出

> 一个真实文档对应的信息集必然会在各种方面保持一致；例如，元素的 [in-scope namespaces] 属性将与元素及其祖先的 [namespace attributes] 属性一致。**这可能不适用于通过其他方式构建的信息集；在这种情况下，将没有与信息集相对应的 XML 文档**，并且要对其进行序列化，就需要解决不一致的问题（例如，通过输出与范围内的命名空间相对应的命名空间声明）。

（我的粗体）-该`<b>`元素不在命名空间中，但其*范围内命名空间*信息集属性不再与解析 XInclude 产生的“虚拟”文档中的命名空间声明一致。

# php - 使用带有 ajax 形式的 foreach mysqli 查询

> ID：14542031
> 
> 赞同：0
> 
> 时间：2013-01-26T22:02:25.053
> 
> 标签：php, javascript, jquery, ajax

我对 jquery 和 ajax 还很陌生，我正在尝试将其合并到我的所有表单中。我可以做更简单的表格，但这个让我很难过。事实是：

1.必须填写至少1个输入字段

2.通过 mysqli_query 检查所有输入字段

3.当输入字段的值在 mysql 中找不到时，foreach 循环中断并且该值变量被回显，后跟“不是成员”。

问题是我可以回显“成功”或“失败”，然后在 ajax 的“成功函数（响应）”中使用它来做一些事情，但我怎样才能获取变量值并将其合并到警报中，例如：警报（ //$value// 不是成员）？这是php：

```
foreach($_POST as $value)
{
    $usercheck =  "SELECT email FROM users WHERE email = '$value'";
    $usercheck = $db->query($usercheck);

    if($usercheck->num_rows !== 0 || $value =="") 
    {
        $x="1";
    } 
    else 
    {
        $x="2";
    }
    break;
}

if($value == "") 
{
    echo "none filled in";
} 
else
    if ($x == "1")
    {
        echo "all filled boxes are users";
    } 
    else 
    {
        echo $value." is not a user";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:16:53.883

最好在验证通过时发回一条消息，例如`"ok"`. 然后在 ajax 成功中，您可以检查消息是否存在`"ok"`，如果是，您可以将其重定向到您想要的位置。如果它无效，请对返回的消息执行一些操作。

```
$.ajax({
   url:'/path/to server'/,
   success:function(response){
      if(response=='ok'){
         /* do redirect*/
         window.location='someOtherpage';
      }else{
         $('#formErrorElementID').text( response);
     }
  }
}); 
```

如果您需要发回特定的 url 供用户访问，可以修改响应以使用 JSON 并发回如下内容：

```
{ "status": "ok", "url": "newPage.php"} 
```

或者

```
{ "status": "fail", "message": "is not a user"} 
```

然后在 AJAX`success`

```
 if(response.status=='ok'){
         /* do redirect*/
         window.location=response.url;
      }else{
         $('#formErrorElementID').text( response.message);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:42:39.527

欢迎来到堆栈交换！

首先，我想提一下您的 SQL 过程中的一个重大安全漏洞。每当您运行查询时，您总是希望清理您的条目以防止注入攻击。这样做的一些方法是通过[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)。这样，潜在的恶意用户输入将不会被执行：

```
$usercheck = $db->prepare("SELECT email FROM users WHERE email = ?");
$usercheck->execute(array($value)); 
```

如上所述，我认为[JSON](http://www.json.org/)对象是最实用的，因为它是一种与多种语言兼容的对象结构。您的最后三个“回声”分别看起来像这样：

```
echo json_encode(array("success" => false, "message"=> "Empty field found."));
...
echo json_encode(array("success" => true, "message"=> "all filled boxes are users"));
...
echo json_encode(array("success" => false, "message"=> $x."is not a user.")); 
```

在 JavaScript 方面，您将拥有：

```
..., function(response) {
    result = JSON.parse(response);
    (result.success) ? ...success code... : alert(result.message);
}); 
```

根据您的需要，您从 PHP 传递的对象可能会有所不同。

希望这可以帮助。

# joomla - 在 joomla 1.5 weblink 中显示类别和项目

> ID：14542035
> 
> 赞同：-2
> 
> 时间：2013-01-26T22:02:50.390
> 
> 标签：joomla

如果我想编辑要显示的 Web 组件的链接。

joomla 标准链接：

```
category A(num)
category B(num)
category C(num) 
```

自定义网页链接：

```
category A
[*]link 1 in child cat A
[*]link 2 in child cat A
[*]link etc..

category B
[*]link 1 in child cat B
[*]link 2 in child cat B
[*]link etc..

category C
[*]link 1 in child cat C
[*]link 2 in child cat C
[*]link etc.. 
```

坦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:17:01.930

这不是一个编程问题，而是使用类别布局并使用有关显示哪些类别的选项。

# c# - 如何禁用任何复选框检查是否在 WinFormApp 中选中了另一个复选框

> ID：14542042
> 
> 赞同：0
> 
> 时间：2013-01-26T22:03:40.510
> 
> 标签：c#, winforms

如何禁用任何复选框检查是否在 WinFormApp 中选中了另一个复选框？我需要一次检查一个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:07:10.003

听起来您应该改用单选按钮。要使用复选框执行此操作，您需要手动取消选中 .checked 事件上的复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:07:33.770

使用单选按钮。如果您真的不想使用它们，请将所有复选框订阅到以下`CheckedChanged`事件处理程序：

```
private void checkBox_CheckedChanged(object sender, EventArgs e)
{
    CheckBox checkBox = sender as CheckBox;

    if (checkBox.Checked)
        foreach (var other in Controls.OfType<CheckBox>().Where(c => c != checkBox))
            other.Checked = false;
} 
```

# mysql - 将数据从表插入到另一个表phpmyadmin

> ID：14542043
> 
> 赞同：1
> 
> 时间：2013-01-26T22:03:41.837
> 
> 标签：mysql, database, insert, phpmyadmin

塔贝拉剧集

```
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `category_id` int(11) NOT NULL,
  `season` int(11) NOT NULL,
  `episode` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `description` 文本不为空，
  `embed` 文本不为空，
  `date_added` 日期不为空，
  `thumbnail` varchar(255) NOT NULL,
  `views` bigint(20) NOT NULL
```

Tabela 嵌入

```
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `episode_id` int(11) NOT NULL,
  `embed` 文本不为空
```

我想将嵌入数据从表嵌入插入到字段嵌入的表剧集中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:57:35.860

我假设“插入”并不是字面意思插入行，而是通过将数据“插入”到列中来更新现有行。

```
update episodes set
embed = (
    select group_concat(embed)
    from embeds
    where episode_id = episodes.id
) 
```

# complexity-theory - 使用 big-Omega 证明 t(n) = n + n logn^2 是/= Omega(5n + 9nlogn^5)

> ID：14542047
> 
> 赞同：0
> 
> 时间：2013-01-26T22:04:11.603
> 
> 标签：complexity-theory, big-o

我无法解决证明问题。其中 t(n) <= c(5n + 9nlogn^5)，c 是一个常数。一般来说，Big Omega 与 Big O 相反，因为它是最好的情况，并寻找下限。所以存在 ac 和 n0 使得 n >= n0。但我不确定如何将其应用于证明以及如何操纵方程中的常数以找到 c 和 n0 并证明 t(n) 是`Omega(5n + 9nlogn^5)`。

```
t(n) = n + n logn^2 is/= Omega(5n + 9nlogn^5) 
```

谁能提供一些有关如何解决此类问题的见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:54:09.580

According to definition of Big-Omega, `f(n) is Ω( g(n) )` mathematically means
`0 ≤ C⋅g(n) ≤ f(n)`, for any constant `C > 0` and `n > n'`
Here,
`f(n) = n + n⋅log(n²) = n + 2⋅n⋅log(n)` and
`g(n) = 5n + 9n⋅log(n⁵) = 5n + 45n⋅log(n)`.

and we want to prove `0 ≤ C * g(n) ≤ f(n)`.

Now, taking `C = 1/45`,

`(1/45)⋅(5n + 45n*log(n)) = (n/9 + n⋅logn) <= (n + 2n⋅logn)`

Hence, `0 ≤ (1/45)⋅g(n) ≤ f(n)` ⇒ `f(n) is Ω(g(n)) for C = 1/45 and n > 0`.

# android - 在 ADT 上创建 AVD 时遇到问题

> ID：14542049
> 
> 赞同：1
> 
> 时间：2013-01-26T22:04:20.417
> 
> 标签：android, eclipse, adt, avd

我从 developer.android.com 下载了适用于 Mac 的 ADT 包，解压缩并打开 ADT 可执行文件，但我无法创建 AVD。当我通过 ADT 执行此操作时出现空错误，并且文件 /Users/my computer name/.android/avd/AVD name.ini 不存在的错误。我尝试物理创建文件夹，但无济于事。

# spring - 无法在 Spring Tool Suite 中设置 Web 应用程序的根目录

> ID：14542054
> 
> 赞同：0
> 
> 时间：2013-01-26T22:05:39.983
> 
> 标签：spring, spring-mvc, tomcat7, spring-tool-suite

我有一个在 STS 3.1 上开发的 spring mvc web 项目，我们将其命名为 MYPROJECT。

当我在 Apache Tomcat 7 上运行它时，我必须输入“http://localhost:8080/MYPROJECT”，但我希望它在根目录“http://localhost:8080/”上运行如何设置部署路径到“/”而不是“/MYPROJECT”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:57:09.820

您想更改上下文根。

1.  在包资源管理器中右键单击您的项目
2.  选择“属性”
3.  选择“网络项目设置”
4.  输入“/”（不带引号）。

下次打开项目时，加载 URL`http://localhost:8080/`

请注意，在 STS 3.2 (Mac OS X 3.6.8) 中，我发现我必须不时重置此选项，因为它会意外恢复为项目名称。

# javascript - C中的Javascript回调编码风格？

> ID：14542058
> 
> 赞同：2
> 
> 时间：2013-01-26T22:06:27.940
> 
> 标签：javascript, c

好吧，这个问题可能会让 javascript 的仇恨者和铁杆开发者感到震惊，请原谅我！

我喜欢用 javascript 编写回调函数的方式

```
var on = function(isTrue, doThis) {if (isTrue) doThis();} 
```

是否有可能在 C 中复制相同的想法？我知道它取决于类型。越来越少这是我的情况：

我有多个布尔值和多个过滤器，所以我的用途是，而不是写

```
if (thisIs == true) executeThisVoid(passingThisStruct) 
```

我很想写：

```
on(thisIs, function(struct){ do this and this}) 
```

或者干脆

```
on(thisIs, executeThisVoid); 
```

非常感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:22:06.507

好的，这就去。首先定义：

```
void on(int thisIs, void (*executeThis)(void)) {
    if (thisIs)
        (*executeThis)();
} 
```

然后，定义 someVoid：

```
void someVoid(void) {
    /* ... */
} 
```

然后，在另一个函数中，调用：

```
on(1, someVoid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:10:09.933

据我所知，在C语言中你可以指向函数......所以，如果on是一个获取两个函数指针的方法，thisIs是一个函数指针，并且executeThisVoid也是一个，你应该没有任何问题，只需要将结构保存在外部范围内，或创建另一个表示方法调用链的结构（以保存参数和其他内容）。

# sql-server - 用于保存简单命名 SQL 查询的 Web UI

> ID：14542059
> 
> 赞同：0
> 
> 时间：2013-01-26T22:06:31.823
> 
> 标签：sql-server, asp.net-mvc, entity-framework

我们有一个专有的网络应用程序，它有一个华丽的管理 UI，但对于数据极客来说工具很差。

我们的数据管理员运行许多 SQL 查询来回答业务问题——这些查询随着时间的推移缓慢发展，但运行频繁。我们希望他有一个 UI 来保存和重新运行它们，而不必每天多次远程连接 SQL 服务器或打开保存的文本片段。

我正在寻找一个小型代码项目或类似项目，以节省我大部分 2-4 天的项目工作，以将此管理功能添加到我的项目中，该项目使用以下客户端/服务器平台：

*   ASP.NET MVC (3-4)
*   SQL 服务器 (2008)
*   实体框架（我不想为此添加其他数据访问组件）
*   jQuery

[http://sqlfiddle.com/（SQL](http://sqlfiddle.com/)[数据库的就绪 Web 查询接口](https://stackoverflow.com/questions/13213706/ready-web-query-interface-to-sql-databases)）有点像我正在寻找的东西，除了 1）它有点矫枉过正，2）它没有用于命名/保存/加载查询的 UI ，这是我的核心要求。

该工具应：

*   允许在 Web 浏览器中以文本形式输入先前编写的 SQL 查询
*   允许命名和保存该查询
*   允许从单个页面列出所有已保存的查询
*   允许检查已保存的 SQL 查询
*   允许运行保存的查询，并输出到动态生成的表
*   允许删除单个保存的查询
*   可能强制执行最大结果行或超时，只是为了负载安全
*   可能阻止数据修改查询

如果您知道任何此类项目、博客条目或其他相关项目，请让我知道，这使得创建它变得不费吹灰之力。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:13:24.057

如果您有权访问报告服务，那么听起来您肯定可以使用它，只要您在与许可中包含的 SQL 服务相同的服务器上运行它。

这是一个相当强大的解决方案，并且有很多用于报告构建和报告交付的选项。有一个称为报告管理器的内置界面，或者您也可以直接从您的代码中调用 Web 服务并以 XLS、PDF、DOC 和其他格式返回呈现的结果。

您可以使用报表生成器（通过报表管理器界面部署为单击一次应用程序）或 SQL Server Data Tools（旧版本称为商业智能开发工作室）进行报表设计。

正如我还提到的，您可能会发现，无论 Reporting Services（或 SQL Fiddle）中的所有功能如何，您的数据管理员可能仍希望使用 SQL Server Management Studio 来编写他的查询。SSMS 中有很多功能，我知道如果没有这些功能，我将很难做到……

# javascript - EventListener 输入键

> ID：14542062
> 
> 赞同：60
> 
> 时间：2013-01-26T22:06:46.433
> 
> 标签：javascript

有`addEventListener`钥匙`Enter`吗？

我有

```
document.querySelector('#txtSearch').addEventListener('click', search_merchants); 
```

我知道这是为了`<button>`，但想知道是否有一个等价物来捕捉`Enter`钥匙。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-01-26T22:14:45.610

您是否尝试提交表单？

改为收听`submit`事件。

这将处理`click`和`enter`。

如果必须使用回车键...

```
document.querySelector('#txtSearch').addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
      // code for enter
    }
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-06-22T18:00:24.120

这是当前接受的答案（来自@Trevor）的一个版本，其中带有[key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values)而不是 keyCode：

```
document.querySelector('#txtSearch').addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
      // code for enter
    }
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-26T22:10:51.227

您可以收听该`'keydown'`事件，然后检查输入键。

你的处理程序就像：

```
function (e) {
  if (13 == e.keyCode) {
     ... do whatever ...
  }
} 
```

# iphone - 保持 iPhone webapp 加载屏幕直到加载另一个图像

> ID：14542063
> 
> 赞同：1
> 
> 时间：2013-01-26T22:06:48.717
> 
> 标签：iphone, html, web-applications

我正在制作一个 iPhone webapp，并且我设置了 apple-touch-startup-image，并且我在应用程序中有一个 div 具有相同的图像，因此我的应用程序的其余部分可以在显示之前完成设置。

我的问题是，一旦初始的苹果启动图像完成，在我的 div 中的下一个图像出现之前会有一个闪光（因为 div 中的图像尚未加载）。那么如何在苹果启动图像完成之前让 div 中的图像完成加载呢？

# c++ - 从向量生成元组（通用算法）

> ID：14542064
> 
> 赞同：2
> 
> 时间：2013-01-26T22:06:51.040
> 
> 标签：c++, stl

想象一下，我们有一个只有唯一值的向量，并且想要生成所有对。这样做的算法是：

```
vector< int > data;
// ... pushback some data

vector< vector< int > > pairs;

for( size_t i = 0; i < data.size() - 1; ++i )
{
    for( size_t j = i + 1; j < data.size(); ++j )
    {
        vector< int > pair; 
        pair.push_back( data[i] ); 
        pair.push_back( data[j] );

        pairs.push_back( pair );
    }
} 
```

现在，对于三元组，算法更改为：

```
vector< int > data;
// ... pushback some data

vector< vector< int > > triples;

for( size_t i = 0; i < data.size() - 2; ++i )
{
    for( size_t j = i + 1; j < data.size() - 1; ++j )
    {
        for( size_t k = j + 1; k < data.size(); ++k )
        {
            vector< int > triple; 
            triple.push_back( data[i] ); 
            triple.push_back( data[j] );
            triple.push_back( data[k] );

            triples.push_back( triple );
        }
    }
} 
```

为四元组和其他元组类型编写代码相当容易。

有人可以告诉我如何实现生成各种元组的通用算法吗？既然我们在这里，我如何计算给定向量中元素数量的元组数量？对于对，公式为 n(n-1)/2。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:36:04.943

您所描述的称为*k-combinations*，这是组合学领域中一个非常重要的概念。一组*n个元素中**k*个元素的唯一组合数用公式*n表示！**/（k！（nk）！）*。

 **为了以通用方式有效地解决这个问题，您可能应该查看`std::tuple`可变参数模板（C++11 功能）。但是，如果您在编译时不知道维度，则必须创建一个带有两个参数的递归函数：所有项目的列表和*k*，从列表中选择的项目数。

然后，对于集合中的每个元素*e*，创建一个列表，其中包含该元素以及以*k-1作为数字递归调用函数的结果，以选择并仅提供列表中**e*之后的列表元素。这将防止在递归的多个子树中创建相同的子集。

希望这对你来说足够清楚。:) 如果您还有其他问题，请随时要求更多解释。**

# php - PHP多文件上传

> ID：14542068
> 
> 赞同：2
> 
> 时间：2013-01-26T22:07:11.547
> 
> 标签：php, file-upload

我的截止日期非常紧迫，需要将文件上传脚本与我编写的管理面板集成在一起。

基本上，用户需要能够上传多个图像，然后我可以使用 PHP 处理这些图像。我可以使用多个`input`标签，但如果他们想上传 10 张图片，那将是一个巨大的麻烦（这将是常态）。

这里的主要问题是我不知道 Javascript、Java 或 Flash，用户需要使用 Internet Explorer < 10，因此无法使用 HTML5。我了解 PHP、MYSQL、HTML、CSS，但对客户端没有帮助。

我查看了许多解决方案，并花了很多时间试图自己找到解决方案。我需要一些可以与我目前的知识相结合的东西，我没有时间学习 Javascript。这就是为什么我在尝试集成完全成熟的系统（如 plupload、SWFupload 和 uploadify）时遇到这么多麻烦的原因。

我尝试了一个多小时才能让 uploadify 正常工作，但效果并不好。

如果有人有简单的解决方案，请告诉我。我只是希望能够使用一个`input`标签上传多个文件。没有调整大小，没有闪存接口，因为这一切都将由服务器使用我的脚本处理。但是，用户必须能够一次选择多个图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T22:20:02.520

可以选择多个文件，然后使用执行上传
`<input type='file' name='file[]' multiple>`
的示例 php 脚本上传：

```
<html>
<title>Upload</title>
<?php
    session_start();
    $target=$_POST['directory'];
        if($target[strlen($target)-1]!='/')
                $target=$target.'/';
            $count=0;
            foreach ($_FILES['file']['name'] as $filename) 
            {
                $temp=$target;
                $tmp=$_FILES['file']['tmp_name'][$count];
                $count=$count + 1;
                $temp=$temp.basename($filename);
                move_uploaded_file($tmp,$temp);
                $temp='';
                $tmp='';
            }
    header("location:../../views/upload.php");
?>
</html> 
```

所选文件作为数组接收

`$_FILES['file']['name'][0]`存储第一个文件的名称。
`$_FILES['file']['name'][1]`存储第二个文件的名称。
等等。

* * *

### 信用 ：

[php](https://stackoverflow.com/questions/2704314/multiple-file-upload-in-php?rq=1)
[上传教程中的多个文件上传](http://www.phpeasystep.com/phptu/2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:22:23.670

对于最近的一个项目，我经历了同样的过程，尝试了目前可用的插件，无需 Flash 或 HTML5 即可多次上传，我遇到了这个 jQuery 插件： [MultiFile 1.48](http://code.google.com/p/jquery-multifile-plugin/) 开箱即用，它看起来有点难看，但有繁重的CSS编辑，它可以看起来不错。我还编辑了 JS 以包含取消上传等功能，但您需要先了解 JavaScript/jQuery，然后才能执行此操作。

# java - 将对象推入堆栈

> ID：14542070
> 
> 赞同：-4
> 
> 时间：2013-01-26T22:07:51.603
> 
> 标签：java, stack

我有这个用于将对象推入堆栈的代码，我无法理解每一行的作用，如果有人可以解释为什么前一个节点（newNode.next）必须等于顶部，以及为什么然后让顶部等于新节点。

```
void push(AnyClass newbObj)
{
  Node newNode = Node(newObj);
  newNode.next = top;
  top = newNode;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:21:18.747

这看起来像一个链表实现。在链表中，每个项目都有一个指向列表中下一个项目的指针（引用）。

该变量`top`似乎是对列表开头节点的引用，因此表示堆栈的顶部。

让我们假设列表开始看起来像这样：

```
item 1 -> item 2 -> etc...
^----top 
```

第一行只是将参数转换为正确的类型，我们可以改为定义`push()`取 a`Node`并完全删除这一行。

由于我们想在前面插入新节点，首先我们需要确保它指向列表的其余部分，使用：

```
newNode.next = top;  //Point newNode's 'next' field to the current top of the list 
```

这给了我们一些看起来像这样的东西

```
newNode -> item 1 -> item 2 -> etc...
           ^----top 
```

但是`top`仍然指向旧项目，所以我们现在更新：

```
top = newNode; //Re-assign top to point to the new head of the list 
```

现在列表如下所示：

```
newNode -> item 1 -> item 2 -> etc...
^----top 
```

我们完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T22:14:59.673

让我分步骤为您解释：

> 1.  newNode 是使用代码创建的新节点`Node newNode = Node(newObj);`。您希望将其放在堆栈顶部（即推送）
> 2.  现在在堆栈顶部，您还有另一个名为 top 的节点。
> 3.  您想将当前顶部节点向下推一级
> 4.  您在以下代码中将新节点链接到当前顶部节点。
>     
>     
>     
>     `newNode.next = top`
>     
>     
> 5.  此后，您在以下代码中将新节点设为栈顶：
>     
>     
>     
>     `top = newNode`

**编辑**

> 有些人强调第 4 行。
> 
> `newNode.next = top`意味着`newNode`有一个名为的变量 `next`
> 
> 这将存储`memory address`先前的 Top 节点。因此，如果我们想通过当前 Top 节点 ( `newNode`) 访问前一个顶级节点，我们可以通过以下方式轻松完成：
> 
> `Node prevTopNode = (Node)top.next`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T22:10:28.420

我添加了一些评论，希望对您有所帮助。

```
void push(AnyClass newbObj)
{
  Node newNode = Node(newObj);  //create a new node of the stack containing the data (newbObj)
  newNode.next = top;           //the new node has thw prevois top of the stack the successor 
  top = newNode;                //the new node is now the top of the tsack
} 
```

# c# - 复合模式和通过 XML 文档递归

> ID：14542071
> 
> 赞同：0
> 
> 时间：2013-01-26T22:07:56.050
> 
> 标签：c#, recursion, composite

我试图在通过 XML 文档递归时使用复合模式。

我到目前为止的代码是

```
public Composite TraverseNodes (XmlNodeList nodeList, Composite comp)
    {
       foreach(XmlNode in nodelist)
           if(xNode.Attributes != null)
             {
               Object x = getObjects(xNode) // getObjects returns an OO version of each node & their attributes;
               Composite child = new Composite(x);
               if(x != null)
               {
                   comp.Add(child);
                }
                if (xNode.HasChildNodes)
                {
                      TraverseNodes(xNode.ChildNodes, comp);
                 }
             }
        } 
```

这将通过 XML 文档进行递归。我的问题是我希望 Composite 反映 XML 文档的结构，而目前它只生成一个平面列表。所以 comp 有 Comp Child Child Child

而我想要实现的是更像

```
 Comp
      Child
         GChild
         GChild
      Child
         GChild
         GChild  
            GGChild ...... and so on..... 
```

我正在使用此链接中的代码来构建我的 Composite 类[http://www.dofactory.com/Patterns/PatternComposite.aspx#_self2](http://www.dofactory.com/Patterns/PatternComposite.aspx#_self2)

非常感谢您的任何指点。琳达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:15:09.577

您的递归调用`TraverseNodes`正在传递`comp`它应该传递的地方`child`。

# python - 带有 pystache/mustache 的 UnicodeDecodeError

> ID：14542073
> 
> 赞同：1
> 
> 时间：2013-01-26T22:08:08.373
> 
> 标签：python, mustache

我正在尝试使用 pystache 将一些数据写入文件。数据来自从谷歌文档电子表格导出的 csv 文件。使用 pystache 模板编写文件时出现此错误：

**UnicodeDecodeError：“ascii”编解码器无法解码字节...**

根据 Stackoverflow 上的其他一些问题，我应该使用 a`.decode('utf-8')`但我仍然遇到同样的错误。

```
datafile = "../data.csv"
renderer = pystache.Renderer()

f=open('sample.html','w')
templateHash={}
items = []

with open(datafile, 'rb') as csvfile:
    datareader = csv.reader(csvfile, delimiter=',')
    for row in datareader:
        item = {'name' : row[2].decode('utf-8')}
        items.append(item)

templateHash['lines'] = items
f.write(renderer.render_path('sample.mustache', templateHash))
f.close 
```

这里是完整的追溯：

```
Traceback (most recent call last):
  File "parsetable.py", line 15, in <module>
    f.write(renderer.render_path('sample.mustache', templateHash))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xfc' in position 750: ordinal     not in range(128)
[Finished in 0.3s with exit code 1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:05:30.997

```
f = codecs.open('sample.html', 'w', encoding='utf-8') 
```

或者更好的是，使用`with`.

# php - 数组不保存计算？

> ID：14542074
> 
> 赞同：1
> 
> 时间：2013-01-26T22:08:13.650
> 
> 标签：php, arrays

我有一个简单的购物车数组，如果用户再次选择相同的产品，我想更新它。如果他们的购物车中已经有 5 支铅笔，并且他们又向购物车中添加了 4 支铅笔，我希望他们的购物车中有 9 支铅笔，而不是 5 支和 4 支铅笔的两个条目。

我有这个代码：

```
$sub = array("id" => $_POST['pID'], "name" => $_POST['pName'], "price" => $_POST['pPrice'], "quantity" => (int) $_POST['pQuant']);
$updated = false;
foreach($cart as $c)
{
    if($c['id']==$_POST['pID']) {
        var_dump($c); 
        echo "<br>";

        $c['quantity'] += (int) $_POST['pQuant'];
        var_dump($c); 
        echo "<br>";
        var_dump($cart); 
        echo "<br>";
        $updated = true;
    }

}

if(!$updated) {$cart[] = $sub;} 
```

由于一些愚蠢的原因，（我确定这是我在这里遗漏的一个非常明显的事情），第一个`var_dump`$c 很好。那是原始值。然后第二个`var_dump`，将数字添加到它上面。但是在第三个`var_dump`，的`$cart`，值没有改变？

我不明白为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T22:11:50.320

`foreach`变量内`$c`只是篮子项目的副本，因此您更新副本，但不更新 中的原始项目`$cart`。这可以通过使用参考来规避`$c`：

```
foreach($cart as &$c) 
```

注意`&`前面的`$c`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T22:11:08.513

`foreach`创建原始数组的副本。要使用原始数组，请使用以下命令：

```
foreach(array_keys($cart) as $k) {
    $c = &$cart[$k];
    // rest of code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T22:12:31.927

问题是，foreach 不使用引用。它使用价值观。如果你想改变`$cart`你有两种方法：

```
foreach($cart as $key => $c) {
    $cart[$key]['quantity'] = += (int) $_POST['pQuant'];
} 
```

替代方案：

```
foreach($cart as &$c) {// use a reference
[...]    
} 
```

# jquery - jQuery load() 在 IE8 和 7 中不起作用

> ID：14542076
> 
> 赞同：0
> 
> 时间：2013-01-26T22:08:24.253
> 
> 标签：jquery

我让这段代码运行

```
$j('#nav_menu-2 li li a').bind('click', function(e){ 
    //check when pagination link is clicked and stop its action.
    e.preventDefault();

    //get the href attribute
    var link = $j(this).attr('href');

    $j('#content').load(link + ' #content');
}); 
```

它在 chrome、ff、ie9 中运行良好，但问题从 ie8 和 ie7 开始。

我在网上搜索并尝试了这种方式

```
$j('#content').load(link + '?' + Math.random()*99999 + ' #content'); 
```

但它仍然无法正常工作，内容只是没有显示。
[这是网站的网址](http://cana-stone.co.il/site/)

只需单击第一个蓝色框（箭头 1），然后尝试更改箭头 2 和箭头 3 的内容。

![在此处输入图像描述](../Images/51b21ebc686c11ab7b9c183635189121.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:12:39.873

这看起来不对：

```
$j('#content').load(link + '?' + Math.random()*99999 + ' #content'); 
```

试试这个：

```
$j('#content').load(link + '?' + (Math.random()*99999).toString()); 
```

而且我不确定您是否需要该随机数，除非您遇到缓存问题。

```
$j('#content').load(link); 
```

这是一个禁用缓存的解决方案，它`#content`在响应中查找，很好衡量（未经测试）：

```
$j.ajax({
    url: link,
    cache: false,
    dataType: "html",
    success: function(data){
        $('#content').html($(data).find('#content').html());
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:54:07.657

`</div>`问题是html 代码中有一个多余的标签。所有现代浏览器都能够处理这个问题，但显然 ie8 和 7 只是迷失了这个烂摊子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T12:30:31.430

ajax 请求被缓存在 IE8 中，所以只是一个小魔术

$.ajaxSettings.cache = false;

在使用加载函数之前

[http://zacster.blogspot.in/2008/10/jquery-ie7-load-url-problem.html](http://zacster.blogspot.in/2008/10/jquery-ie7-load-url-problem.html)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

缓存（默认值：true，对于 dataType 'script' 和 'jsonp' 为 false）
类型：Boolean
如果设置为 false，它将强制浏览器不缓存请求的页面。注意：将缓存设置为 false 仅适用于 HEAD 和 GET 请求。它通过将“_={timestamp}”附加到 GET 参数来工作。其他类型的请求不需要该参数，除非在 IE8 中对已由 GET 请求的 URL 进行 POST。

# javascript - 类型错误：“未定义”不是函数

> ID：14542082
> 
> 赞同：1
> 
> 时间：2013-01-26T22:09:10.447
> 
> 标签：javascript

我在我的 javascript 中收到此错误类型。谁能告诉我这里有什么问题。我刚开始学习javascript。

```
TypeError: 'undefined' is not a function (evaluating '$('#myCarousel').oneCarousel({
                easeIn: 'rotateIn',
                interval: 5000,
                pause: 'hover'
            })') 
```

代码：

```
 $(document).ready(function () {
            $('#myCarousel').oneCarousel({
                easeIn: 'rotateIn',
                interval: 5000,
                pause: 'hover'
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:10:06.360

`$('#myCarousel').oneCarousel`未定义。您可能缺少任何文件定义`$.fn.oneCarousel`

# c++ - 具有 const 正确性的 C++ 自定义数组切片类

> ID：14542083
> 
> 赞同：0
> 
> 时间：2013-01-26T22:09:30.917
> 
> 标签：c++, arrays, constants, slice

我正在尝试制作一个自定义数组切片类，它可以处理任意的，可能是负的跨步，并且想知道如何使用 const 正确性来做到这一点：

```
#include <vector>
#include <cstdio>

template< typename T >
class ArrayView
{
public:

    ArrayView( void* pointer, int strideInBytes, int length )
    {
        m_pPointer = reinterpret_cast< unsigned char* >( pointer );
        m_strideInBytes = strideInBytes;
        m_length = length;
    }

    const T& operator [] ( int index ) const
    {
        const unsigned char* p = m_pPointer + index * m_strideInBytes;
        return *( reinterpret_cast< const T* >( p ) );
    }

    T& operator [] ( int index )
    {
        unsigned char* p = m_pPointer + index * m_strideInBytes;
        return *( reinterpret_cast< T* >( p ) );
    }

    int length() const
    {
        return m_length;
    }

private:

    unsigned char* m_pPointer;
    int m_strideInBytes;
    int m_length;

};

void printFromReadOnlyView( const ArrayView< int >& view )
{
    for( int i = 0 ; i < view.length(); ++i )
    {
        printf( "%d: %d\n", i, view[i] );
    }
}

void useRef( std::vector< int >& ref )
{
    // works fine
    ArrayView< int > view( ref.data(), sizeof( int ), ref.size() );
    printFromReadOnlyView( view );
}

void useConstRef( const std::vector< int >& constRef )
{
    // const error
    ArrayView< int > view( constRef.data(), sizeof( int ), constRef.size() );
    printFromReadOnlyView( view );
}

int main()
{
    std::vector< int > v( 10 );
    for( int i = 0; i < v.size(); ++i )
    {
        v[i] = i;
    }

    useRef( v );
    useConstRef( v );
} 
```

函数 useConstRef() 会导致编译时错误，因为 constRef.data() 是一个 const 指针，而 ArrayView 的构造函数接受一个非常量指针。

本质上，我希望 ArrayView 是 const（只读）或非常量（读写）。

我可以尝试添加一个接受 const 指针的构造函数，但是我必须存储 const 指针并记住我是哪个版本。我可以只使用一个类，还是必须制作单独的 ReadWriteArrayView 和 ReadOnlyArrayView 版本？

# jquery - 使用媒体查询和 jQuery 在 ToggleSlide() 后响应式导航菜单消失

> ID：14542085
> 
> 赞同：0
> 
> 时间：2013-01-26T22:09:37.623
> 
> 标签：jquery, css, media-queries

我正在尝试为智能手机创建一个响应式下拉导航。在单击切换 btn 之前，一切工作正常，但在单击导航后，导航也被隐藏在更大的范围内。我知道这在手机屏幕上不会很明显因为这是用户正在使用的屏幕尺寸，事实上他/她无法在该设备上切换到宽屏幕尺寸，但我想知道问题的逻辑以及如何防止它。这是我的 HTM 代码：

```
<a id="toggleMenu" href="#">Welcome</a>
   <ul class="nav">
        <li><a href="/">Home</a></li>
        <li><a href="/about/">Portfolio</a></li>
        <li><a href="/work/">About Us</a></li>
        <li><a href="/clients/">Recent Work</a></li>
        <li><a href="/contact/">Contact</a></li>
   </ul>
<div class="banner"></div> 
```

CSS：

```
@media screen and (max-width: 768px) { 
.nav {
  border: 0px solid #ccc;
  border-width: 0px 0;
  list-style: none;
  margin: 0;
  padding: 0;
  text-align: left;
  display:none;
}
.nav li {
  display: block;
  border: 1px solid #ccc;
  width:310px;
  background:#175e4c;
}
#toggleMenu {
  display:  inline-block;
  list-style: none;
  width:281px;
} 
```

最后是 jQuery

```
$(document).ready(function() {
 $("#toggleMenu").click(function () {
 $('.nav').slideToggle();
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:49:31.090

我一直有同样的问题。

这是我添加到我的 javascript 以修复它的内容：

```
$(window).resize(function() {
    if($(window).width() > 480) // or 768
        $('#.YourMenuIdOrClass').show();
}); 
```

不过，您可能希望将代码中的 480 更改为 768。

# c - C中并行计算的最佳方法

> ID：14542089
> 
> 赞同：0
> 
> 时间：2013-01-26T22:10:01.680
> 
> 标签：c, parallel-processing, sparse-matrix, matrix-multiplication

我正在 Linux 中编写 C 代码（可能稍后在 Windows 中），该代码包括具有并行处理的大规模线性代数计算。我正在使用处理大量工作的 GotoBLAS2。仍然有一些矩阵计算（尤其是稀疏矩阵）应该手动执行。我在互联网上搜索并找到了一些库，例如 Open MP。此外，线程似乎很有帮助。在 C 中进行并行计算的最佳方法是什么？谢谢

关于我的代码的附加信息：我特别关注稀疏矩阵向量乘法。另外，我有一大组向量 {v1, v2, v3, v4, ...}，这些向量应该乘以不同的数字，这可以使用并行计算来执行。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:17:08.603

这真的是一个“讨论”类型的问题，而不是“这里有问题，谁能帮我解决？” 类型。“最佳方法”是主观的。我非常喜欢 OMP——它为你处理了大量的线程管理。最后，“最好的”是你可以有效使用的东西。一个强大的工具在坏人手中是不好的。您可以在一天内学习足够多的 OMP，以通过几乎您机器上的处理器数量来加速一些关键循环——这让我投票。

# java - 数学服务器和客户端 Java 不工作

> ID：14542098
> 
> 赞同：0
> 
> 时间：2013-01-26T22:11:39.980
> 
> 标签：java, networking

我是 Java 计算机网络的新手，一开始并不擅长编程，但是，我能够构建这个应该只接受一行的服务器和客户端。一个函数（加、减、除）和两个整数，然后计算并打印答案。我可以将两者连接起来，但是当我在其中键入行时，它什么也不做。任何见解将不胜感激。谢谢！

服务器

```
import java.io.*;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;
import java.lang.Math;

public class MathServer
{

  public static void main(String[] args) throws IOException 
  {

     ServerSocket yourSock = new ServerSocket(50000);
     System.out.println("Please Wait....");

     while(true)
     {
        Socket clientSock = yourSock.accept();
        System.out.println("Connected!");
        process(clientSock);

     }

  }

  static void process(Socket sock) throws IOException
  {
     InputStream in = sock.getInputStream();
     BufferedReader br = new BufferedReader(new InputStreamReader(in));

     OutputStream out = sock.getOutputStream();
     PrintWriter pw = new PrintWriter(out,true);

  //Talk to the client
     String input = br.readLine();

     while(input != null && !input.equals("disconnect"))
     {  

        Scanner sc = new Scanner(System.in);
        String func = sc.nextLine();
        double num1 = sc.nextInt();
        double num2 = sc.nextInt();

        double answer;          

        switch (func)
        {
           case "add":  answer = num1 + num2;
              System.out.println(answer);
              break;

           case "sub":  answer = num1 - num2;
              pw.println(answer); 
              break;

           case "multiply":  answer = num1 * num2;
              pw.println(answer);        
              break;

           case "power":  answer = Math.pow(num1, num2);
              pw.println(answer);
              break;

           case "divide":  answer = num1 / num2;
              pw.println(answer);         
              break;

           case "remainder": answer = num1 % num2;
              pw.println(answer);       
              break;

           case "square": answer = Math.sqrt(num1) ;
              pw.println(answer);       
              break;

           case "cube": answer= Math.cbrt(num1);
              pw.println(answer);        
              break;

        }

        sock.close();
     }

  }
} 
```

客户

```
import java.io.*;
import java.net.Socket;
import java.util.Scanner;

public class Client
{

  public static void main(String[] args) throws Exception
  {
     Socket Sock = new Socket("localhost", 50000);
     BufferedReader br = new BufferedReader(new InputStreamReader(Sock.getInputStream()));
     PrintWriter pw = new PrintWriter(Sock.getOutputStream(), true);

     Scanner sc = new Scanner(System.in);
     String input;

     while(true)
     {
     //System.out.println("Please enter your function and numbers:");
        input = sc.nextLine();

        pw.println(input);

        if(input.equals("disconnect"))
        {
           System.out.println("You have been disconnected");
           break;

        }

        System.out.println(br.readLine());
     }

     Sock.close();

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:16:38.773

您正在混合从 System.in 读取的扫描仪和代码中的网络连接。

例如，为什么要从命令行读取服务器中的输入？

```
Scanner sc = new Scanner(System.in);
String func = sc.nextLine();
double num1 = sc.nextInt();
double num2 = sc.nextInt(); 
```

例如，您可以使用 String 的 split 方法拆分您收到的输入并从中计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:20:14.653

我认为问题出在服务器代码中

```
 Scanner sc = new Scanner(System.in); 
```

您应该使用自己的输入流：

```
Scanner sc = new Scanner(in); 
```

我以前没有使用过扫描仪。另一种方法是将内容读取为 String 并根据需要进行转换，例如 Integer.parseInt()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T22:35:42.807

*   您需要安排在客户端和服务器之间发送和接收数据的顺序。
*   正如@Jacob 所提到的，您正在读取`System.in`而不是输入数据，您可以从输入中读取`String`。
*   将`readLine`声明放在您的声明中`while`以继续从客户那里阅读。

这看起来像：

```
String input;
while ((input = br.readLine())!= null && !input.equals("disconnect")) {
   Scanner sc = new Scanner(input);
   String func = sc.next();
   double num1 = sc.nextDouble();
   double num2 = sc.nextDouble();
   ...
} 
```

接下来，将您的语句`sock.close()`移到循环*之外。*`while`

现在，来自客户端的输入命令将出现在一行中，例如

```
add 12 15 
```

还从您的客户端刷新数据：

```
pw.flush(); 
```

# android - 无法打开编辑器：无法实例化编辑器类

> ID：14542099
> 
> 赞同：1
> 
> 时间：2013-01-26T22:11:46.950
> 
> 标签：android, sdk, editor, adt

几天前，我下载了为 BlackBerry 重新打包 apk 的插件，然后我收到一条更新 ADT 和 SDK 的消息，因此我打开了 SDK 管理器并更新了所有建议的更新。重新启动后，我收到一条消息，无法保存某个项目，但 gui 为空，未选择项目。今天我重新启动 Eclipse 并收到一条消息“此 SDK 需要更新的 ADT 21.0”所以我尝试打开 SDK 管理器，但它说没有设置 SDK 路径。我试图设置路径，但它已经设置好了，无法打开其他面板。我决定打开一个项目的清单，首先我得到“无法打开编辑器：无法实例化编辑器类。这通常表示缺少无参数构造函数或编辑器的类名在 plugin.xml 中输入错误。 " 然后所有项目旁边都有一个红色的x。一世' 我无法理解任何事情，我希望有人可以帮助我。谢谢。这是在日志文件中

```
!SESSION 2013-01-26 22:41:53.953 -----------------------------------------------
eclipse.buildId=M20120208-0800
java.version=1.7.0_11
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=it_IT
Framework arguments:  vm C:\Programmi\Java\jdk1.6.0_26\jre\bin\client\jvm.dll
Command-line arguments:  -os win32 -ws win32 -arch x86 vm C:\Programmi\Java\jdk1.6.0_26\jre\bin\client\jvm.dll

This is a continuation of log file C:\Documents and Settings\Angelo Giammarresi\workspace2\.metadata\.bak_0.log
Created Time: 2013-01-26 22:43:47.515

!ENTRY org.eclipse.core.resources 4 1 2013-01-26 22:43:47.515
!MESSAGE Core exception while retrieving the content description
!STACK 1
org.eclipse.core.internal.resources.ResourceException: Resource is out of sync with the file system: '/TitleToolITdemo/AndroidManifest.xml'.
    at org.eclipse.core.internal.resources.File.getContentDescription(File.java:269)
    at org.eclipse.core.internal.propertytester.FilePropertyTester.testContentType(FilePropertyTester.java:108)
    at org.eclipse.core.internal.propertytester.FilePropertyTester.test(FilePropertyTester.java:60)
    at org.eclipse.core.internal.expressions.Property.test(Property.java:58)
    at org.eclipse.core.internal.expressions.TestExpression.evaluate(TestExpression.java:99)
    at org.eclipse.core.internal.expressions.CompositeExpression.evaluateOr(CompositeExpression.java:68)
    at org.eclipse.core.internal.expressions.OrExpression.evaluate(OrExpression.java:21)
    at org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:53)
    at org.eclipse.core.internal.expressions.AdaptExpression.evaluate(AdaptExpression.java:91)
    at org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:53)
    at org.eclipse.core.internal.expressions.AndExpression.evaluate(AndExpression.java:29)
    at org.eclipse.ui.internal.dialogs.RegistryPageContributor.failsEnablement(RegistryPageContributor.java:311)
    at org.eclipse.ui.internal.dialogs.RegistryPageContributor.isApplicableTo(RegistryPageContributor.java:251)
    at org.eclipse.ui.internal.dialogs.PropertyPageContributorManager.getApplicableContributors(PropertyPageContributorManager.java:218)
    at org.eclipse.ui.internal.dialogs.PropertyPageContributorManager.getApplicableContributors(PropertyPageContributorManager.java:237)
    at org.eclipse.ui.dialogs.PropertyDialogAction.hasPropertyPagesFor(PropertyDialogAction.java:105)
    at org.eclipse.ui.dialogs.PropertyDialogAction.isApplicableForSelection(PropertyDialogAction.java:147)
    at org.eclipse.ui.dialogs.PropertyDialogAction.isApplicableForSelection(PropertyDialogAction.java:127)
    at org.eclipse.jdt.ui.actions.OpenViewActionGroup.fillContextMenu(OpenViewActionGroup.java:278)
    at org.eclipse.jdt.ui.actions.NavigateActionGroup.fillContextMenu(NavigateActionGroup.java:108)
    at org.eclipse.jdt.internal.ui.actions.CompositeActionGroup.fillContextMenu(CompositeActionGroup.java:75)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.fillContextMenu(PackageExplorerActionGroup.java:290)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.menuAboutToShow(PackageExplorerPart.java:795)
    at org.eclipse.jface.action.MenuManager.fireAboutToShow(MenuManager.java:342)
    at org.eclipse.jface.action.MenuManager.handleAboutToShow(MenuManager.java:473)
    at org.eclipse.jface.action.MenuManager.access$1(MenuManager.java:469)
    at org.eclipse.jface.action.MenuManager$2.menuShown(MenuManager.java:495)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:247)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1058)
    at org.eclipse.swt.widgets.Control.WM_INITMENUPOPUP(Control.java:4881)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4557)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1610)
    at org.eclipse.swt.widgets.Shell.windowProc(Shell.java:2061)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4972)
    at org.eclipse.swt.internal.win32.OS.TrackPopupMenu(Native Method)
    at org.eclipse.swt.widgets.Menu._setVisible(Menu.java:256)
    at org.eclipse.swt.widgets.Display.runPopups(Display.java:4206)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3748)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
!SUBENTRY 1 org.eclipse.core.resources 4 274 2013-01-26 22:43:47.515
!MESSAGE Resource is out of sync with the file system: '/TitleToolITdemo/AndroidManifest.xml'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:38:41.897

我重新启动了几次 Eclipse 并多次尝试更新 SDK 或打开任何窗口，但始终没有出现上述错误和其他错误。所以，我开始仔细阅读这里的一些帖子以找到解决方案。我使用了这个线程[Eclipse Android SDK - 构建工作区时出错](https://stackoverflow.com/questions/9917765/eclipse-android-sdk-error-in-building-workspace)，建议检查 java -version 以及线程中的其他链接。最后，我发现我的 Eclipse 正在启动一个 java build 1.7.2，我不知道它在哪里找到，而我在机器中的最高版本是 build 1.7.0_11-b21，它与内部项目或任何不匹配，我我完全不擅长编程，刚开始学习。我使用此链接[http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Windows_Example的帮助编辑了 eclipse.ini](http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Windows_Example)我让我的机器指向 C:\Programmi\Java\jdk1.6.0_26\bin\javaw.exe 然后保存并重新启动 eclipse。一切都恢复正常，没有任何项目丢失。我希望这对其他人也有用。不要忘记使用相同的 ADT 和 SDK 依赖项。如果出现任何问题，首先开始使用 Help>Check for Updates> ADT 等，我发现 DDMS 也没有根据最新的 SDK 和 ADT 进行更新。

# objective-c - 静态方法和良好的设计

> ID：14542102
> 
> 赞同：1
> 
> 时间：2013-01-26T22:12:31.567
> 
> 标签：objective-c, oop, objective-c-category

我看到了一种初始化视图控制器的方法，这让我很感兴趣。可能是我缺乏经验，但我觉得它非常有用，但是，我试图看看是否有任何理由应该避免它，所以我知道我是否也应该采用它。

```
UIViewController* imageC = [UIViewController imageViewController]; 
```

`imageViewController`类别中的静态方法在哪里：

```
+(UIViewController*) imageViewController
{
    return [[UIViewController alloc] initWithNibName:@"ImageViewController" bundle:nil];
} 
```

这是好的、可靠的设计吗？我想是的，但不确定。作为静态方法意味着它缺乏上下文，但不确定在这种情况下这是一个问题。*如果您使用这种方法，您可以长期遇到哪些问题？（如果有的话）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:13:39.133

> ```
>  UIViewController* imageC = [UIViewController imageViewController]; 
> ```

这被称为*便利构造函数*或*工厂方法*，是完全合法且有用的。顺便说一句，它是一个类方法，而不是一个静态方法。

便利构造函数有两个主要特征：

1.  它提供了一种更方便的语法来通过标准 alloc/init 实例化一个类；

2.  它返回一个`autorelease`对象，该对象将在当前作用域的末尾或当前自动释放池的末尾被释放。

> 到目前为止，您可能已经在类文档中注意到，大多数 Cocoa 类都有一组以 +className... 格式命名的类方法。这些特殊的类方法称为“便利构造函数”，用于创建临时对象. 我所说的临时的意思是，便利构造函数返回的对象被假定为自动释放的[...]。

（[来源](http://macdevcenter.com/pub/a/mac/2001/07/27/cocoa.html?page=3)）

编辑：有关便利构造函数机制的更多详细信息（以及一般关于返回引用）可以在[Objective C ARC 参考中找到，秒。3.2.2](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#retained-return-values) .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:44:12.223

您的代码有几个问题。首先，Objective C 中没有静态方法。有类方法，它们和实例方法一样，做*动态调度*。他们只是为此使用类对象。

这就引出了第二个问题：您的代码总是分配 的实例`UIViewController`，即使在子类上调用时也是如此。这不是 Objective-C 的预期行为。`[NSMutableArray array]`返回一个可变数组，即使`array`是在`NSArray`.

第三个问题是次要的：如果您将方法声明为 return ，对子类的用户将是有益的`instancetype`。这样，您所说的方法返回接收器类的实例，编译器可以进行静态类型检查。这个概念被称为`related return type`并且最近才在 clang 中引入。

这是一个更好的版本：

```
+ (instancetype)imageViewController
{
    return [[self alloc] initWithNibName:@"ImageViewController" bundle:nil];
} 
```

# java - Android：仅检索带有数字的联系人

> ID：14542104
> 
> 赞同：2
> 
> 时间：2013-01-26T22:12:32.850
> 
> 标签：java, android, android-contacts

我目前有以下代码从通讯录中检索联系人：

```
Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME
    };
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '1'";
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";
    Cursor cursor = getContentResolver().query(uri, projection, selection, null, sortOrder); 

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
            android.R.layout.simple_list_item_multiple_choice, 
            cursor, 
            new String[] {ContactsContract.Contacts.DISPLAY_NAME, ContactsContract.Contacts._ID}, 
            new int[] { android.R.id.text1},0);
    getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    setListAdapter(adapter); 
```

但是，这也会在我的 Nexus 4 上返回我的 facbook 联系人。我的选择有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T22:36:42.787

`ContactsContract.Contacts.HAS_PHONE_NUMBER`您可以通过添加到您的投影和选择来过滤查询结果以仅包括具有电话号码的联系人。

将您的第二个和第三个语句更改为如下所示：

```
String[] PROJECTION = { 
ContactsContract.Contacts._ID, 
ContactsContract.Contacts.DISPLAY_NAME, 
ContactsContract.Contacts.HAS_PHONE_NUMBER
};
String selection = "(" + ContactsContract.Contacts.IN_VISIBLE_GROUP + 
" = '1' AND (" + ContactsContract.Contacts.HAS_PHONE_NUMBER + " != 0 ))"; 
```

结果光标将只包含带有电话号码的联系人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T22:15:48.080

如果认为这是正常行为，因为您的 Facebook 联系人基本上是……联系人，所以它们会被您的代码检索。我认为最好的过滤方法是遍历返回的数据并删除没有数字的数据。

# jquery - 使用 Fancybox2 在 Galleria 上显示对话框

> ID：14542106
> 
> 赞同：0
> 
> 时间：2013-01-26T22:12:46.597
> 
> 标签：jquery, fancybox, fancybox-2, galleria

我正在尝试在全屏 Galleria 画廊上显示 Fancybox 2 对话框。这是我设置的 z-indexes：

```
.galleria-container notouch fullscreen {
    z-index: 10000;  /* default by component */
}

.fancybox-overlay {
    z-index:100001;
}
.fancybox-opened {
    z-index: 100030;
}
.fancybox-close {
    z-index: 100040;
} 
```

我一直在尝试将fancybox div的宽度和高度设置为显示，但只得到大约20px的显示然后它就消失了。有没有我错过的 javascript API 调用？谢谢。

编辑：这是链接 - [http://cdn1.doneupsalon.com/test.html](http://cdn1.doneupsalon.com/test.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:54:17.720

这就是你所缺少的：`.`......一个点（是的，一个点......三个，实际上;）

你的文件中有这个：

```
<style type="text/css">
    fancybox-overlay {
        z-index:100001;
    }
    fancybox-opened {
        z-index:100030;
    }
    fancybox-close {
        z-index:100040;
    }
</style> 
```

您发布的代码是正确的，但不是您在演示页面中的工作代码。

实际上，如果将 设置`z-index`为`.fancybox-overlay`选择器就足够了。

# android - 根据选择的微调器的哪个元素更改选项卡内容

> ID：14542107
> 
> 赞同：4
> 
> 时间：2013-01-26T22:13:25.007
> 
> 标签：android, eclipse, onclick, spinner

我正在尝试制作一个基于选项卡的应用程序，它是一个学校调度应用程序。

我在 activitiy_main.xml 中使用 tabhost 来使用所有数据（设置选项卡名称、元素等）。

我想要做的是有一个微调器（位于我的 tabhost 的 tab3 中）指示它下面显示的选项。

我有多个要展示的选项。

这是位于我的 activity_main_xml 中的 tab3 的 XML 布局：

`

```
 <TextView
          android:id="@+id/labelAdd"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/add"
          android:textAppearance="?android:attr/textAppearanceLarge" />

      <Spinner
          android:id="@+id/addDropDown"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:entries="@array/type_array" />

      <Button
          android:id="@+id/StartTimeButton"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/addStartTime" />

      <TextView
          android:id="@+id/startTimeLabel"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/addStartTime" />

      <TimePicker
          android:id="@+id/startTimePicker"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" />

      <TextView
          android:id="@+id/endTimeLabel"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/addEndTime" />

      <TimePicker
          android:id="@+id/endTimePicker"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" />

      <TextView
          android:id="@+id/addRepeatQ"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/addRepeatQ" />

      <RadioGroup
          android:id="@+id/repeatRadioGroup"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

          <RadioButton
              android:id="@+id/addRepeatN"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:checked="true"
              android:text="@string/addRepeatN" />

          <RadioButton
              android:id="@+id/addRepeatY"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="@string/addRepeatY" />
      </RadioGroup>

      <Button
          android:id="@+id/addNextButton"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/addNext" />

  </LinearLayout>` 
```

我想让某些项目，特别是 startTimeLabel、StartTimeButton、endTimeLabel、endTimeButton 仅在选择我的微调器的某个元素时显示（在这种情况下，选择的项目将标题为“类”）。

有关如何开始构建我的 .java 的任何帮助？我是 Android 编程新手，但在 java、html、php、sql 和 Visual Studio 方面有经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:40:28.617

```
urSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) 
        {
            //write your code here what you want
                      change visibility of your Views(buttons,textviews) etc

        }

        public void onNothingSelected(AdapterView<?> arg0) {

        }
    }); 
```

如果你得到这个想法，请把它作为答案

# assembly - 为什么我在汇编中看到地址的字节表示？

> ID：14542108
> 
> 赞同：-1
> 
> 时间：2013-01-26T22:13:27.293
> 
> 标签：assembly, gdb, x86

我正在用 gdb 调试一个二进制文件。它最初是用 C 编码并由 gcc 在 IA32 上编译的。例如，在 gdb 中，为什么当我尝试打印时`%ebp`会看到类似的内容，

```
(gdb) x $ebp
0xffffd5b8:  "\350\325\377\377A\213\004\b\b\273\004\b<\205\004\b\340\034", <incomplete sequence \314> 
```

无论采用哪种形式对我都没有帮助，我想找到一种在 gdb 中解释它的简单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:26:36.803

如果您想要寄存器中的值，请使用命令，`print`例如`p $ebp`或。( )用于查看内存。请查阅手册或各种格式的帮助。`info registers``i r ebp``examine``x`

# perl - Perl 调用从基类导入

> ID：14542113
> 
> 赞同：-1
> 
> 时间：2013-01-26T22:14:45.013
> 
> 标签：perl, oop, import, base

我有一个名为`A`：

```
package A;
use strict;
use warnings;
use v5.12;

sub import {
    my $caller = caller;
say 'import called from ' . $caller;
    if (not $caller->can('has')) {
        no strict 'refs';
say "--> import has to $caller";
        *{"${caller}::has"} = sub { _attr($caller, @_) };
    }
}

sub _attr {
    my ($class, $name, $default) = @_;
    no strict 'refs';
    *{"${class}::$name"} = sub {
        my ($self, $value) = @_;
        $self->{$name} = $value if $value;
        return $self->{$name} // $default;
    };
}

1; 
```

并有一个子类`B`：

```
package B;
use strict;
use warnings;
use lib './';
use base 'A';
use v5.12;

#use C;
A->import();

has 'ans' => 42;
say ans();

1; 
```

如果我尝试运行此代码，则会出现语法错误，但如果我对这些进行更改`has 'ans' => 42'`，`has('ans' => 42);`那么一切都会很好。

或者，如果我创建了类`C`：

```
package C;
use strict;
use warnings;
use lib '.';
use base 'A';

1; 
```

那么我不需要修改此代码`has 'ans'...`，`has(...`因为一切正常。

所以，我无法理解为什么会发生这种情况。如何`has`在子模块中导入子程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:39:19.160

`has`要从任何其他模块导入，`A`您只需`use A`放入该模块即可。

替换这一行：

```
A->import(); 
```

和：

```
use A; 
```

它会做你想做的事。

手动调用`->import`不会做您想要的，因为它发生在运行时，并且导入需要在编译时发生，以便在解析使用它的行之前`perl`知道这是一个子例程名称。是一个编译时命令，因此在该行被解析之前生效。`has``use``has`

# struts2 - Struts2 值栈变量冲突

> ID：14542115
> 
> 赞同：2
> 
> 时间：2013-01-26T22:14:55.650
> 
> 标签：struts2

据我了解，新的 Struts2 - 值堆栈存储动作对象并将动作对象的那些成员变量放在自身上 - 因此就像一个虚拟对象。假设在我的 html 上使用 struts2 标记，我想显示其中一个成员变量，但其中很少有同名的。

```
<s:property name="memberpropertyname"/> 
```

值堆栈从上到下访问此名称。如果上面的那个是不正确的怎么办？它如何解决它并选择说最后一个 - 这对我来说是一个。

任何帮助请..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T23:09:21.340

*如果*您的应用程序确实有正当理由对值进行着色，那么您有几个选择。然而，一般来说，最顶层的堆栈项（通常是动作）应该是将数据暴露给视图层的东西。

您可以通过数组表示法直接访问特定堆栈深度的任何内容：

```
<s:property value="[1].memberProperty"/> 
```

这绕过了堆栈中最顶层的项目，并明确地示例下一个项目。

在合理的应用程序中，这几乎是*不必要的。**最多*您可能需要直接访问一个动作属性，例如，在迭代期间，或者如果某些内容已被编`<s:push>`入堆栈（也很少见）。访问动作属性很简单：

```
<s:property value="#action.memberProperty"/> 
```

我建议如果您发现您需要访问堆栈中低于操作的数据，*并且*该操作将视图遮挡到这些较低层，那么您做错了。如果不出意外，在推送操作之前将您需要的对象放入堆栈的任何内容都应该推送一个不太可能被操作公开的对象。

例如，保留一些应用程序范围数据的过滤器可能会使用通用名称：

```
<s:property value="corp.somethingUseful"/> 
```

如果不了解您的用例以及这种情况是如何形成的，就很难提供更具体的帮助。不过，我的直觉反应是出了点问题。

# database - 如何将“至少一个”约束（在 ER 中）转换为 SQL？

> ID：14542118
> 
> 赞同：2
> 
> 时间：2013-01-26T22:15:15.760
> 
> 标签：database, foreign-keys, relational-database, entity-relationship

对于我的数据库类，我们必须创建一个 ER 并转换为 SQL。我们的 ER 是一个图书馆数据库。如何将“至少一个”约束转换为 SQL？我在谷歌或课堂笔记中找不到它（我没有买教科书..）它由粗线表示：

![ER的相关部分](../Images/d880a3e9cbeb7fd4614c4374919ec080.png)

我们试图说图书馆的每个部分（科学、人文、电影）都必须由至少一名员工监督。这是我所拥有的：

**员工（pid，罪，薪水，地址**）

创建表员工

(pid CHAR(9) NOT NULL,

罪 CHAR(9),

工资双倍，

地址 VARCHAR(200),

主键（pid），

外键（pid）

参考人）

**部分（sid、名称、位置）**

创建表部分

(sid CHAR (11) NOT NULL,

名称 CHAR (20),

位置 CHAR (35),

主键 (sid))

**Supervised_by(pid, sid,)**

CREATE TABLE Supervised_by

(pid CHAR(9) NOT NULL,

sid CHAR(9) 非空，

主键（pid，sid），

外键（pid）

参考员工，

外键 (sid)

参考部分）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:11:40.640

由于许多现实世界的原因，至少有一个约束是有问题的。答案是没有*简单的*方法可以做到这一点。但是有一些方法可以做到这一点，但它们很少使用。您遇到的最大问题是时间问题。您通常会要求在员工之前输入主管记录，因此您只能在提交时检查至少一个约束。这使得调试更加困难。*本质上，这在语句*级别上是行不通的。

第二个坏消息是，由于上述问题，没有*标准的方法来执行此操作，因此通常您正在考虑以不完全声明性且不完全可移植的方式进行一些扩展的 SQL 编程。*

例如，在 PostgreSQL 中，您可以编写一个在提交时检查的可延迟约束触发器。在其他数据库中，方法可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:40:29.413

最好的解决方案是使用您的应用程序管理此约束。没有标准的 SQL 方法可以做到这一点，例如使用 chack 约束，但这里是个坏主意：它会增加比实用程序更多的复杂性。

# jquery - jquery如何调用html元素

> ID：14542119
> 
> 赞同：0
> 
> 时间：2013-01-26T22:15:16.963
> 
> 标签：jquery

我想将变量中的坐标值存储为数组

```
var initial_location = new Array ();
initial_location = $('ol.locations_list li a:first').?????; 
```

--------HTML ------------

```
<ol class="locations_list">
<li class="active_location"><a cityid="0" type="street_address" radius="81.00" coords="['43.2342080','-77.0683780']"><span class="location_title"> common 81.00 km of</span>
21 Carlton Street, Sodus, NY 14551, USA</a>

<a class="remove_location" style="float:right;" data-nid="106" title="Remove this location">
      x
    </a></li><li><span class="location_title">
      Home 
    </span>
       New York, NY, USA
    <a class="remove_location" style="float:right;" data-nid="109" title="Remove this location">
      x
    </a></li></ol> 
```

* * *

你可以看到 coords="['43.2342080','77.0683780']" 是一个数组..我也可以用不同的方式渲染，比如大括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:20:45.263

尝试这个：

```
var initial_location = eval('(' + $('ol.locations_list li:first a:first').attr('coords') + ')'); 
```

# php - 如何用php编写一个json文件？

> ID：14542127
> 
> 赞同：1
> 
> 时间：2013-01-26T22:16:01.800
> 
> 标签：php, jquery, ajax, json

我有 4 个输入，由 Ajax 4 数据发送到一个 php 文件：
如何加载 json 文件，然后在 php 中添加新数据？

```
<input type="text" id="name">
<input type="text" id="surname">
<input type="text" id="mobile">
<input type="text" id="email">
<script>
var name = $("#name").val();
var surname = $("#surname").val();
var mobile = $("#mobile").val();
var email = $("#email").val();
$.ajax({type:"POST",
    url:"wjson.php",
    data:"name="+nombre+"&surname="+surname+"&mobile="+mobile+"&email="+email,
    success:function(data) {

    }
}); 
```

JSON 文件：（people.json）

```
{
    "1":
    {
        "Name" : "Jhon",
        "Surname" : "Kenneth",
        "mobile" : 329129293,
        "email" : "jhon@gmail.com"
    },
    "2":
    {
        "Name" : "Thor",
        "Surname" : "zvalk",
        "mobile" : 349229293,
        "email" : "thor@gmail.com"
    }
} 
```

wjson.php 文件：

```
<?php
$nane = $_POST['name'];
$surname =$_POST['surname'];
$mobile = $_POST['mobile'];
$email =$_POST['email'];
$str_datos = file_get_contents("people.json")
//add new data to people.json
?> 
```

顺便说一下 people.json 文件在我的服务器中

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T22:19:20.347

你可以这样做：

```
// Loading existing data:
$json = file_get_contents("people.json");
$data = json_decode($json, true);

// Adding new data:
$data[3] = array('Name' => 'Foo', 'Surname' => 'Bar');

// Writing modified data:
file_put_contents('people.json', json_encode($data, JSON_FORCE_OBJECT)); 
```

但是，仅仅为了添加一两个小项目而读取和写入可能很大的 blob 并不是最好的主意。如果您的数据集开始增长，请考虑替代解决方案。

# php - 只加载一次图像，然后复制到多个位置？

> ID：14542128
> 
> 赞同：0
> 
> 时间：2013-01-26T22:16:02.417
> 
> 标签：php, javascript, jquery, image

我正在编写一个在您的网络浏览器中显示和播放 mp3 的小应用程序。在顶部，我加载了播放列表中所有歌曲的专辑封面。在页面底部，我更改了单个图像以匹配当前正在播放的歌曲的专辑封面。

问题是专辑封面图像非常`1200X1200`大，每次歌曲更改时都需要很长时间才能加载。

我想知道是否有一种方法可以复制图像数据并在下面显示，而不仅仅是动态创建`img`每次都必须下载的标签。

这是我用来获取和显示底部 img 的代码：

```
function currentSongInfo() {
    var currentItem = '.jplayer_playlist_current';
    var currentArtist = $(currentItem+' .artist').html();
    var currentSong = $(currentItem+' .thumb-title strong').html();
    var currentAlbumArt = $(currentItem+' img.thumb-image').attr('src');
    //below image is reloaded each time I change it
    currentAlbumArt = '<img src="'+currentAlbumArt+'" />';
    $('#current-song-info-bar').html(currentAlbumArt+'<div><span>'+currentSong+'</span><br>'+currentArtist+'</div>');
} 
```

* * *

解决方案由@ali 在下面提供

将此添加到从 MP3 获取图像的 PHP 文件中：

```
header('Cache-Control: max-age=28800'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T22:20:51.970

除非我在您的设置中遗漏了某些内容，否则如果为图像指定了缓存控制标头（用于遥远的将来），并且图像已下载到客户端的浏览器上，则对同一图像的下一次请求将不会导致新下载，但只会从浏览器的缓存中获取项目（前提是用户由于某种原因没有清除缓存）。您还可以查看电子标签 - 但是，在这种情况下，浏览器将向服务器发送请求以检查项目是否已更改 - 如果已更改，则会进行下载；如果没有，则不会下载（但至少会发出 http 请求以检查项目是否过时）。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:28:05.207

阿里关于缓存是正确的。除非使用响应标头或客户端设置了一些有趣的东西，否则图像将从缓存中加载。重用图像的另一种方法是创建一个 Javascript 图像对象，例如这篇文章： [Assign Javascript image object directly to page](https://stackoverflow.com/questions/6306371/assign-javascript-image-object-directly-to-page)

# unix - 如何使用 Unix 删除名为“*”的文件？

> ID：14542129
> 
> 赞同：0
> 
> 时间：2013-01-26T22:16:02.207
> 
> 标签：unix, command-line

我父亲刚刚给我讲了一个关于他的一个同事的故事，他的论文几乎完成了，正乘飞机飞往丹麦和一个朋友讨论这个问题。他在他的电脑上玩耍，并创建了一个名为“*.tex”的文件。当飞行接近尾声时，他想删除文件，所以他告诉 Unix `rm -rf '*.tex'`，并意外删除了他的论文。除了不创建名为的文件之外，我如何避免这种情况`*`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T22:19:16.560

只需通过添加前面的 '\' 来转义 '*'。`rm \*.tex`完美运行。此外，`rm -rf`除非您真的确定自己在做什么，否则永远不要做任何事情。

r 和 f 代表 [r] 递归和 [f] 强制。这意味着，如果您使用该命令定位一个目录，它将立即且不可挽回地删除该目录、其所有文件、所有子目录及其所有文件，依此类推，直到树的末尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T22:19:57.957

您只需要正确地单引号即可。自己试试这个：

```
$ mkdir tmp
$ cd tmp
# Create a file named '*.tex', containing the string 'foo'
$ echo 'foo' > '*.tex'
# Create a file named 'bar.tex', containing the string 'bar'
$ echo 'bar' > 'bar.tex'
$ ls
$ rm '*.tex'
$ ls 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T22:19:50.240

```
rm -i \*.tex 
```

`-i`用于交互；您可以对每个删除的文件说是或否；它是 的对立面`-rf`。反斜杠防止星号被扩大，所以你应该只被提供`*.tex`而不是`thesis.tex`太多。您可以在名称周围使用引号 - 在这种情况下，单引号或双引号都可以。如果特殊字符是反引号或美元符号，则需要单引号。

如果您有点担心可能会删除哪些文件名，那么使用交互模式会很有用。如果您使用`rm -fr`，则必须确保它会执行您想要的操作（您在正确的目录中，通配符会执行您期望的操作）。如果您在运行时以 root 身份登录，则需要停下来三思而后行，然后再按回车；一个错误可能是致命的。

我还会观察到，如果论文不受版本控制且没有备份，那么这位同事的生活就很危险。如果它很重要，请将其备份（并尽可能将其置于版本控制之下）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T09:27:47.420

减轻文件系统上的人为错误或硬件/软件故障损坏的常用方法是建立可靠的备份过程。

然而，在飞机上进行备份并不是特别实用，但现在像 ZFS 和 btrfs 等支持轻量级快照的写时复制文件系统越来越流行，拥有一个处理常规快照的守护进程本来可以挽救论文。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-26T22:24:13.123

轶事结尾的问题是“我该如何避免这种情况”。

如果您想避免意外删除文件，可以将`rm`命令别名如下（将此行添加到启动脚本中）：

```
alias rm='rm -i' 
```

这将确保每次删除文件时，都会询问您“您确定”吗？

当然，关于转义 '*' 的所有其他答案都是有效的——但这是你的“万无一失”的把戏。

不同的 shell 的语法略有不同 - 所以看看你需要什么......

# php - 使用 ffmpeg 上传视频截屏

> ID：14542130
> 
> 赞同：-2
> 
> 时间：2013-01-26T22:16:05.350
> 
> 标签：php, video, ffmpeg

我需要捕获用户上传视频的帧。我才知道ffmpeg可以做到这一点。请在我的linux服务器上提供ffmpeg的详细安装说明。我只有通过putty登录ssh的信息。另外我需要安装哪些软件。 ffmpeg 播放器是否包含在安装过程中。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:44:09.497

根据您提供的非常有限的信息，您可以使用以下命令执行非常基本的 ffmpeg 安装：

```
$ git clone --depth 1 git://source.ffmpeg.org/ffmpeg
$ cd ffmpeg
$ ./configure
$ make
# make install 
```

您将需要`gcc`、`git`和`make`作为依赖项。`pkg-config`并且`yasm`是推荐的依赖项。

# c - 查找在 epoll 实例中注册了哪些描述符

> ID：14542133
> 
> 赞同：3
> 
> 时间：2013-01-26T22:16:35.037
> 
> 标签：c, linux, sockets, epoll

我想知道是否有办法找出使用 gdb 或其他检查工具为特定 epoll 实例注册了哪些描述符（和预期事件）？

使用 poll 或 select 时很容易找到它，因为所有这些信息都可以在正在运行的进程可见的内存中免费获得，并且可以在调试器中进行探索。但是，epoll 有点不同，因为它将所有这些数据保存在内核空间中。我意识到，我可以使用跟踪来检测我的代码，以便在每个特定时刻了解 epoll 实例预期的事件，但是采用其他方式对我来说非常方便。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:33:22.517

来自 Linux Programmer's manual page for 'epoll_ctl' under 'ERRORS'

```
 EEXIST op was EPOLL_CTL_ADD, and the supplied file descriptor fd is already registered with this epoll instance. 
```

如果您使用 EPOLL_CTL_ADD 并获得返回值 -1 并且 errno 是 EEXIST，则文件描述符已经注册。显然，这具有注册文件描述符的副作用，因此您可能需要使用 EPOLL_CTL_DEL 进行调用以删除任何您不打算在 epoll 中出现的内容。

一般来说，我建议避免将错误情况用作程序的常规流程。但听起来你只是为了调试而这样做，所以我真的不认为这是一个问题。无论如何，调试器实际上都是黑客。

# jsp - JSP 中的后退按钮

> ID：14542137
> 
> 赞同：0
> 
> 时间：2013-01-26T22:17:07.403
> 
> 标签：jsp

大家好，我是新手，这是我的第一个问题，我真的希望你能提供帮助。

我有三个 JSP 页面，中间一个包含一个后退按钮

第一页有一个从数据库生成的项目列表，还包含分页。

最后一页有一些细节和一个后退按钮。

我的问题是，在中间页面上，如果我单击后退按钮，它会从分页的开头返回，我需要它转到分页中的上一个位置。

我已经尝试过 history-1 功能，但如果我转到第 3 页，然后返回第 2 页，然后使用后退按钮，它会将我带回第 3 页。

这有点令人困惑，但我希望有人能提供帮助。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:30:38.040

我不确定我是否完全理解你的问题，而且我是这些委员会的新手。这是我目前的建议。

```
<script>document.write("<a href=\"" + document.referrer + "\">Back</a>");</script> 
```

这不仅会转到上一页，而且还会显示前一页的地址。

这比在 javascript 中执行此操作的其他方式具有优势：

```
javascript:history.go(-1); 
```

这是因为历史对象的 go 方法不会显示之前的页面地址。

这对你有用吗？

# java - 休眠：org.hibernate.LazyInitializationException：无法初始化代理 - 没有会话

> ID：14542140
> 
> 赞同：13
> 
> 时间：2013-01-26T22:17:19.103
> 
> 标签：java, hibernate, lazy-loading

对数据库进行以下查询：

```
 Session session = EmployeesDAO.getSessionFactory().getCurrentSession();
        List<Employee> employees = new ArrayList<Employee>();
        try {
            session.beginTransaction();
            String hqlQuery = "from Employee emp "
                    + "left join fetch emp.employeesOffices employeesOffice "
                    + "left join fetch employeesOffice.office employeesOfficeOffice "
                    + "left join fetch employeesOfficeOffice.company "
                    + "left join fetch emp.address empAddress "
                    + "left join fetch empAddress.city empAddressCity "
                    + "left join fetch empAddressCity.country";
            Query empQuery = session.createQuery(hqlQuery);
            empQuery.setMaxResults(maxResult);
            employees = (List<Employee>) empQuery.list();
            session.getTransaction().commit();

        } catch (HibernateException e) {
            session.getTransaction().rollback();
            e.printStackTrace();
        } 
```

在获取employee.address.street、employee.address.houseNumber 或employee.address.city 时失败，但有以下例外：

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:164)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:285)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
    at com.employees.model.Address_$$_javassist_6.getCity(Address_$$_javassist_6.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:985)
    at org.apache.jsp.WEB_002dINF.listEmployees_jsp._jspx_meth_c_005fout_005f3(listEmployees_jsp.java:306)
    at org.apache.jsp.WEB_002dINF.listEmployees_jsp._jspx_meth_c_005fforEach_005f1(listEmployees_jsp.java:248)
    at org.apache.jsp.WEB_002dINF.listEmployees_jsp._jspx_meth_c_005fforEach_005f0(listEmployees_jsp.java:155)
    at org.apache.jsp.WEB_002dINF.listEmployees_jsp._jspService(listEmployees_jsp.java:89)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.employees.controller.EmployeeController.processRequest(EmployeeController.java:69)
    at com.employees.controller.EmployeeController.doGet(EmployeeController.java:30)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

员工映射：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.employees.model.Employee" table="employees">
        <id column="employee_id" name="employeeId" type="int">
            <generator class="sequence">
                <param name="sequence">EMP_SEQ</param>
            </generator>
        </id>
        <property column="first_name" name="firstName" type="java.lang.String" />
        <property column="last_name" name="lastName" type="java.lang.String" />

        <many-to-one name="address" column="address_id" 
            class="com.employees.model.Address"/>
        <set name="employeesOffices" >
            <key column="employee_id" />
            <one-to-many class="com.employees.model.EmployeeOffice"/>
        </set>

    </class>
</hibernate-mapping> 
```

地址映射：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.employees.model.Address" table="addresses">
        <id column="address_id" name="addressId" type="int">
            <generator class="sequence">
                <param name="sequence">ADDRESS_SEQ</param>
            </generator>
        </id>
        <property column="street" name="street" type="java.lang.String" />
        <property column="house_number" name="houseNumber" type="int" />
        <many-to-one name="city" column="city_id"
            class="com.employees.model.City"/>
    </class>

</hibernate-mapping> 
```

其他类（办公室、公司等）是绝对正常的。如果注释在 jsp 应用程序中加载地址字段的行没有任何异常。怎么了？顺便说一句，尽管有例外，它仍显示有关 jsp 的所有信息。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-26T22:21:46.180

您内部的对象`employee`已`lazy`初始化。这意味着，他们仅在非封闭会话上按需初始化。所以你必须在从数据库中获取后在循环内手动初始化它们：

```
Query empQuery = session.createQuery(hqlQuery);
empQuery.setMaxResults(maxResult);
employees = (List<Employee>) empQuery.list();
for (Employee emp : employees) {
    Hibernate.initialize(emp.address);
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-21T09:26:06.967

Sinche Hibernate 4.2 你可以使用

```
.setProperty("hibernate.enable_lazy_load_no_trans", "true"); 
```

这个选项解决了可怕的

```
org.hibernate.LazyInitializationException: could not initialize proxy -
no Session 
```

这花费了程序员这么多小时的生命。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-26T22:22:20.807

与映射无关。当您为对象提供延迟加载时，您接受了一个使 ORM 世界迷惑了十年的责任：您加载对象的会话将与发出延迟请求时存在的会话*相同。*

在您的情况下，会话似乎完全消失了。

您必须有一些方法来维护会话（这通常会导致需要会话范围，这意味着 Seam 或 CDI（在 EE 6 中））或者您必须将您的对象与您拥有的新会话重新同步（通常通过再次查找它）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-26T22:36:17.723

当您从 db 获取对象时，添加或您可以`laze=false`在`<class name="com.employees.model.Employee" table="employees">` Hibernate.init(Object) 中初始化您的对象

# jquery - $.fn[abcd] 是什么意思

> ID：14542141
> 
> 赞同：1
> 
> 时间：2013-01-26T22:17:30.367
> 
> 标签：jquery

我正在处理一些我没有编写的旧代码，需要一些帮助来理解它。

```
(function() {
  var abc = "SORocks";
  $.fn[abc] = function (x) {
    doSomethingCool();
};

})(jQuery) 
```

代码中的其他地方是 ("#mydiv").SORocks(1234); 之类的语句。

[abc] 是做什么的？和 $.fn.SORocks(x) 一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:24:15.240

它是一个 jQuery 插件的声明，它相当于：

```
$.fn.SORocks = function (x) { } 
```

你可以像这样调用插件并弄清楚它的作用：

```
$('div').SORocks('hello'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:22:24.690

它只是对象表示法。jQuery 和 jQuery.fn 是对象。

```
var abc = "SORocks";
$.fn[abc] = function (x) {... 
```

和写法一样：

```
$.fn.SORocks = function (x) {... 
```

`show()`对于其他类似或以下的jQuery 方法`hide()`，与传统的点表示法一样有效：

```
 $('#myDiv')['hide'](); 
```

# c# - 不返回码标记属性？(__attribute__ ((noreturn)))

> ID：14542142
> 
> 赞同：2
> 
> 时间：2013-01-26T22:17:31.790
> 
> 标签：c#, attributes

C#中 GCC`__attribute__ ((noreturn))`归属的等价物是什么？`return`禁止对错误执行流程的方法中没有语句的警告。我的代码将通过调用错误抛出函数来抛出错误。我正在使用 Unity3D 4.0 中包含的 Mono。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:41:39.743

C# 很聪明。如果你有一个返回值的方法，但你`throw`是一个异常，那么它不会产生警告。

```
int foo(int bar)
{
    if (bar > 0) return bar + 1;
    throw new NotSupportedException(); 
} 
```

不会生成任何警告。

但是，如果它确实生成了警告，您可以使用`#pragma warning`. 请参阅[http://msdn.microsoft.com/en-us/library/441722ys(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/441722ys(v=vs.80).aspx)

# android - 当安卓蓝牙手机与蓝牙设备断开连接时循环播放音频片段

> ID：14542143
> 
> 赞同：1
> 
> 时间：2013-01-26T22:17:59.477
> 
> 标签：android, audio, bluetooth

如果它与蓝牙设备断开连接，我需要我的蓝牙 android 应用程序来循环播放一个简短的音频剪辑。到目前为止，我只完成了所有的蓝牙框架。这是我所拥有的：

```
package com.almalogic.bluetooth;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Set;
import java.util.UUID;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnItemClickListener{

ArrayAdapter<String> listAdapter;
ListView listView;
BluetoothAdapter btAdapter;
Set<BluetoothDevice> devicesArray;
ArrayList<String> pairedDevices;
ArrayList<BluetoothDevice> devices;
public static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
protected static final int SUCCESS_CONNECT = 0;
protected static final int MESSAGE_READ = 1;
IntentFilter filter;
BroadcastReceiver receiver;
String tag = "debugging";
Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);
        switch(msg.what) {
        case SUCCESS_CONNECT:
            // Do Something
            ConnectedThread connectedThread = new ConnectedThread((BluetoothSocket)msg.obj);
            Toast.makeText(getApplicationContext(), "Connect", 0).show();
            String s = "successfully connected";
        connectedThread.write(s.getBytes());
        break;
    case MESSAGE_READ:
        byte[] readBuf = (byte[])msg.obj;
        String string = new String(readBuf);
        Toast.makeText(getApplicationContext(), string, 0).show();
        break;
        }
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init();
    if(btAdapter==null) {
        Toast.makeText(getApplicationContext(), "No Bluetooth Detected", 0).show();
        finish();
    }
    else{
        if(!btAdapter.isEnabled()) {
            turnOnBT();
        }

        getPairedDevices();
        startDiscovery();
    }
}
private void startDiscovery() {
    // TODO Auto-generated method stub
    btAdapter.cancelDiscovery();
    btAdapter.startDiscovery();
}
private void turnOnBT() {
    // TODO Auto-generated method stub
    Intent intent =new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
    startActivityForResult(intent,1);
}
private void getPairedDevices() {
    // TODO Auto-generated method stub
    devicesArray = btAdapter.getBondedDevices();
    if(devicesArray.size()>0) {
        for(BluetoothDevice device:devicesArray) {
            pairedDevices.add(device.getName());

        }
    }
}
private void init() {
    // TODO Auto-generated method stub
    listView=(ListView)findViewById(R.id.listView);
    listView.setOnItemClickListener(this);
    listAdapter= new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,0);
    listView.setAdapter(listAdapter);
    btAdapter = BluetoothAdapter.getDefaultAdapter();
    pairedDevices = new ArrayList<String>();
    filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    devices = new ArrayList<BluetoothDevice>();
    receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            String action = intent.getAction();

            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                devices.add(device);

                String s = "";
                for(int a = 0; a < pairedDevices.size(); a++) {
                    if(device.getName().equals(pairedDevices.get(a))) {
                        //append
                        s ="(Paired)";
                        break;
                    }
                }

                listAdapter.add(device.getName() +" "+s+" "+ "\n" + device.getAddress());
            }

            else if(BluetoothAdapter.ACTION_DISCOVERY_STARTED.equals(action)) {
                //run some code

            }
            else if(BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                //run some code
                if(listAdapter.getCount()>0) {
                    for(int i= 0; i < listAdapter.getCount(); i++) {
                        for(int a = 0; a < pairedDevices.size(); a++) {
                            if(listAdapter.getItem(i).equals(pairedDevices.get(a))) {

                            }
                        }
                    }
                }
            }

            else if(BluetoothAdapter.ACTION_STATE_CHANGED.equals(action)) {
                if(btAdapter.getState() == btAdapter.STATE_OFF) {
                    turnOnBT();

                }
            }
        }
    };

    registerReceiver(receiver, filter);
     filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_STARTED);
    registerReceiver(receiver, filter);
     filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
    registerReceiver(receiver, filter);
     filter = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);
    registerReceiver(receiver, filter); 
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    unregisterReceiver(receiver);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_CANCELED) {
        Toast.makeText(getApplicationContext(), "Bluetooth must be enabled to continue.", Toast.LENGTH_SHORT).show();
        finish();
    }
}
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub

    if(btAdapter.isDiscovering()) {
        btAdapter.cancelDiscovery();
    }
    if(listAdapter.getItem(arg2).contains("Paired")) {

        BluetoothDevice selectedDevice = devices.get(arg2);
        ConnectThread connect = new ConnectThread(selectedDevice);
        connect.start();
    }
    else {
        Toast.makeText(getApplicationContext(), "device is not paired", 0).show();
    }
}
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        // Use a temporary object that is later assigned to mmSocket,
        // because mmSocket is final
        BluetoothSocket tmp = null;
        mmDevice = device;

        // Get a BluetoothSocket to connect with the given BluetoothDevice
        try {
            // MY_UUID is the app's UUID string, also used by the server code
            tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) { }
        mmSocket = tmp;
    }

    public void run() {
        // Cancel discovery because it will slow down the connection
        btAdapter.cancelDiscovery();

        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        // Do work to manage the connection (in a separate thread)
        mHandler.obtainMessage(SUCCESS_CONNECT, mmSocket).sendToTarget();
    }

    /** Will cancel an in-progress connection, and close the socket */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
}

private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) { }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        byte[] buffer;  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                // Read from the InputStream
                buffer = new byte[1024];
                bytes = mmInStream.read(buffer);
                // Send the obtained bytes to the UI activity
                mHandler.obtainMessage(MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();

            } catch (IOException e) {
                break;
            }
        }
    }

    /* Call this from the main activity to send data to the remote device */
    public void write(byte[] bytes) {
        try {
            mmOutStream.write(bytes);
        } catch (IOException e) { }
    }

    /* Call this from the main activity to shutdown the connection */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
}
} 
```

我该怎么做呢？请记住，我是一个完全新手程序员。

# python - 在 Pandas 中减少一列

> ID：14542145
> 
> 赞同：6
> 
> 时间：2013-01-26T22:18:34.407
> 
> 标签：python, pandas

我正在尝试将（嗯，很多）返回数据列转换为收盘价列。在 Clojure 中，我会使用[`reductions`](http://clojuredocs.org/clojure_core/1.3.0/clojure.core/reductions)，它类似于`reduce`，但返回所有中间值的序列。

例如

```
$ c

0.12
-.13
0.23
0.17
0.29
-0.11

# something like this
$ c.reductions(init=1, lambda accumulator, ret: accumulator * (1 + ret)) 

1.12
0.97
1.20
1.40
1.81
1.61 
```

注意：实际收盘价无关紧要，因此使用 1 作为初始值。我只需要一个“模拟”收盘价。

我的数据的实际结构是 TimeSeries 的命名列的 DataFrame。我想我正在寻找一个类似的函数`applymap`，但我宁愿不对该函数做一些hacky并从其中引用DF（我想这是解决这个问题的一种方法？）

此外，如果我想保留`returns`数据，但有收盘“价格”，我会怎么做？我应该返回一个元组，并让 TimeSeries 是类型`(returns, closing_price)`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T00:15:40.310

它看起来还不是一个广为人知的功能，但您可以使用它`expanding_apply`来实现收益计算：

```
In [1]: s
Out[1]:
0    0.12
1   -0.13
2    0.23
3    0.17
4    0.29
5   -0.11

In [2]: pd.expanding_apply(s ,lambda s: reduce(lambda x, y: x * (1+y), s, 1))

Out[2]:
0    1.120000
1    0.974400
2    1.198512
3    1.402259
4    1.808914
5    1.609934 
```

我不是 100% 确定，但我相信`expanding_apply`从第一个索引到当前索引的应用系列工作。我使用与 Clojure 函数完全一样的内置`reduce`函数。

文档字符串`expanding_apply`：

```
Generic expanding function application

Parameters
----------
arg : Series, DataFrame
func : function
    Must produce a single value from an ndarray input
min_periods : int
    Minimum number of observations in window required to have a value
freq : None or string alias / date offset object, default=None
    Frequency to conform to before computing statistic
center : boolean, default False
    Whether the label should correspond with center of window

Returns
-------
y : type of input argument 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T03:47:44.223

值得注意的是，在 pandas 中写得更详细，而不是写成`reduce`.

在您的具体示例中，我将只是[`add`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.add.html)然后[`cumprod`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.cumprod.html)：

```
In [2]: c.add(1).cumprod()
Out[2]: 
0    1.120000
1    0.974400
2    1.198512
3    1.402259
4    1.808914
5    1.609934 
```

*或者也许`init * c.add(1).cumprod()`。*

注意：但是在某些情况下，例如内存是一个问题，您可能必须以更底层/更聪明的方式重写它们，但通常值得首先尝试最简单的方法（并对其进行测试，例如使用 %timeit 或[分析内存](https://stackoverflow.com/questions/10601041/pandas-wheres-the-memory-leak-here)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-24T00:58:02.313

为了可读性，我更喜欢以下解决方案：

```
returns = pd.Series([0.12, -.13, 0.23, 0.17, 0.29, -0.11])

initial_value = 100
cum_growth = initial_value * (1 + returns).cumprod()

>>> cum_growth
0    112.000000
1     97.440000
2    119.851200
3    140.225904
4    180.891416
5    160.993360
dtype: float64 
```

如果您想在系列中包含初始值：

```
>>> pd.concat([pd.Series(initial_value), cum_growth]).reset_index(drop=True)
0    100.000000
1    112.000000
2     97.440000
3    119.851200
4    140.225904
5    180.891416
6    160.993360
dtype: float64 
```

# php - 将选中的设置为选项

> ID：14542152
> 
> 赞同：-1
> 
> 时间：2013-01-26T22:19:22.913
> 
> 标签：php

如何为下面保存的选项数组设置 selected="selected"。谢谢 ！

例如

```
<option value="Facebook">Facebook</option>
<option value="Twitter" selected="selected">Twitter</option>

<select name="'. $id .'['.$order.'][url]" id="'. $id .'['.$order.'][url]">

                $socialicons =  array ('facebook' => 'Facebook', 'twitter' => 'Twitter');

                foreach ($socialicons as $socialicon) {

             <option value="'.$socialicon.'" />'.$socialicon.'</option>

                }

             </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:27:16.757

`$_POST[$id][$order]['url']`我认为您将在您的 POST 数组中获得发送的值。然后只需将发送的值与循环中的当前值进行比较即可：

```
foreach ($socialicons as $socialicon)  {
    $selected = '';
    if ($socialicon == $_POST[$id][$order]['url']) {
        $selected = 'selected="selected"';
    echo '<option value="'.$socialicon.'" '.$selected.' />'.$socialicon.'</option>';
} 
```

我不完全确定`$_POST`数组，因此您可能需要调整它或搜索如何`$_POST`访问多维。

如果您将选择保存在其他地方，例如在数据库中，您可以将其与那里的值进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:27:29.850

您可以使用多维数组来实现此目的：

```
$socialicons = array(
    array("name" => "Facebook", "selected" => false), 
    array("name" => "Twitter", "selected" => true)
);

foreach($socialicons as $site) {

    $selected_text = ($site['selected']) ? "selected='selected'" : "";
    echo "<option $selected_text>". $site['name'] ."</option>";

} 
```

上面的代码使用三元运算符来创建一个合适的`selected='selected'`文本。未经测试的代码应该可以工作-尽管如此给你一些想法。

# virtualization - 捕获 Vagrant 网络流量

> ID：14542153
> 
> 赞同：5
> 
> 时间：2013-01-26T22:19:34.020
> 
> 标签：virtualization, virtualbox, vagrant

我有一个正在运行的虚拟机。我使用 HTTP Scoop 来调试 Ajax 请求，但不幸的是，使用桥接网络和静态 IP，我无法看到我的 VM 的网络活动。

我需要进行配置更改吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T11:31:32.697

Vagrant 是 VirtualBox 的包装器。您可以使用[包捕获](https://www.virtualbox.org/wiki/Network_tips)并在 Wireshark 中对其进行分析。

> 网络跟踪 网络问题可以通过在客户机端或主机端启用数据包记录来检测，但是使用 VirtualBox 的内置功能来创建 pcap 文件可能会提供更多有用的信息，因为它包含所有接收到的数据包的日志并由客人发送。
> 
> 要启用网络跟踪，请执行以下操作：
> 
> VBoxManage modifyvm [your-vm] --nictrace[adapter-number] on --nictracefile[adapter-number] file.pcap
> 
> 例如
> 
> VBoxManage modifyvm "ubuntu" --nictrace1 on --nictracefile1 trace1 .pcap

如果您使用 vagrant，请将以下行添加到`Vagrantfile`：

```
config.vm.customize ["modifyvm", :id, "--nictrace1", "on"]
config.vm.customize ["modifyvm", :id, "--nictracefile1", "trace1.pcap"] 
```

`trace1.pcap`然后在 Wireshark 中打开文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:27:26.243

除非我完全弄错了，否则您应该能够使用wireshark 来捕获两个VM 之间的流量。您可能必须正确配置wireshark - 您可能希望检查桥接或仅托管流量选项。

# node.js - 内部错误，包括 Express 2.5 中的 EJS 模板

> ID：14542154
> 
> 赞同：1
> 
> 时间：2013-01-26T22:19:39.163
> 
> 标签：node.js, express, ejs

我有一个使用 EJS 作为模板引擎和 ExpressJS 2.5.8 的 node.js 应用程序

我尝试以这种方式在 ejs 页面中包含部分内容：

```
<%- partial('list') %> 
```

我收到“500 内部错误”。我尝试了许多不同的方式，也使用了 <% include list %> 但我总是收到 500 错误。我究竟做错了什么？

# .net - 更改单元格/行颜色 - 明确定义背景颜色后不更改

> ID：14542161
> 
> 赞同：0
> 
> 时间：2013-01-26T22:20:19.240
> 
> 标签：.net, vb.net, datagridview, colors, cell

我有一些用 VB.Net 编写的代码，根据某些情况，它会更改某些行的 cellstyle.backcolor。该代码有效。虽然，我遇到了奇怪的事情。

如果我将整行的颜色更改为黄色，然后将其更改回白色（特别针对一个单元格，因此它将行颜色设置为白色，然后将特定单元格的 defaultcellstyle.backcolor 设置为白色），然后更改颜色整行变为灰色，原来设置为白色的一个单元格不会改变。

为什么是这样？行颜色不会取代单元格样式颜色吗？明确定位的单元格可以是白色或灰色，所以这就是它必须成为目标的原因，我只在明确表示为白色的情况下对其进行了测试。

编辑：代码如下（它在表单加载中加载）。它第一次运行时很好并且可以正常工作。根据我是否在包含的 datagridview 中触发单击事件，它第二次运行时可能不会将前景色着色为番茄。每次我单步执行代码时，它总是会遇到单元格格式。我不确定为什么在单击 datagridview 后，filterrows() 的下一次迭代将命中单元格格式，但不会反映在 datagridview 中。在 filterrows() 之后，显示表单/DGV。

```
 Public Sub filterrows()
    Dim intCount As Integer = 0

    'PROCESS THROUGH LCC_RETAINED FOR ACCOUNTING MESSAGES AND TEMP CARDS
    For Each row As chgltrDataSet.BCL_CC_Select_DataRow In frmFinBatchChrg.ChgltrDataSet.BCL_CC_Select_Data
        If row.Item("LCC_RETAINED").ToString = "X" Then
            gridccselector.Rows(intCount).Cells(0).Style.ForeColor = Color.Tomato
            row.Item("LCC_CARD_TYPE") = ""
            row.Item("LCC_CC_EXP") = ""
            row.Item("LCC_NAME_ON_CARD") = ""
        ElseIf row.Item("LCC_RETAINED").ToString = "0" Then
            gridccselector.Rows(intCount).Cells(0).Style.ForeColor = Color.Yellow
        End If
        intCount += 1
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:12:08.830

弄清楚了。我在表单关闭的地方添加了以下内容。我在一个表格关闭（取消时）但不是另一个的情况下遇到了这个问题。

```
 Me.dispose() 
```

# java - 执行两种或多种算法的策略模式

> ID：14542165
> 
> 赞同：2
> 
> 时间：2013-01-26T22:20:39.697
> 
> 标签：java, design-patterns, strategy-pattern

谁能给我举一个策略模式的例子，它不是按顺序使用一个，而是两个或多个算法？

也许我必须将这些算法插入列表中，然后使用 for 执行此列表中的所有算法？

这个列表必须是上下文类的公共属性吗？

请问，谁能给我一个伪代码示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:51:57.153

您可以实施一种策略，以特定顺序调用所有算法。我的示例与[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)中描述的类相关联：

```
class MultiAlgorithm implements Strategy {

    private Strategy[] strategies;

    public MultiAlgorithm(Strategy... strategies) {
        if (strategies == null || strategies.length == 0) {
            throw new IllegalArgumentException(
                    "Algorithms collection cann't be null!");
        }
        this.strategies = strategies;
    }

    @Override
    public int execute(int a, int b) {
        System.out.println("Called MultiAlgorithm's execute()");
        int result = 0;
        for (Strategy strategy : strategies) {
            result += strategy.execute(a, b);
        }
        return result;
    }
} 
```

使用示例

```
public static void main(String[] args) throws Exception {
    Context context = new Context(new MultiAlgorithm(new Add(),
            new Multiply(), new Subtract()));
    int result = context.executeStrategy(1, 2);
    System.out.println(result);
} 
```

如你所见，我们只能实施新的“复杂策略”。模式自己保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:27:27.897

你可以有一个你的策略的实现，它是你的策略的两个实例的组合，这些实例是按顺序执行的，不是吗？

虽然我想不出这会有用的情况。

您到底想做什么还不清楚。

** 基于您在下面的评论 **

我认为策略模式在这里不合适，因为您总是在做固定的事情，应用您拥有的所有噪声过滤器实现，并且策略模式用于在不同方法之间进行选择。您只有 1 种策略！

我会将其实现为处理管道。使用您一开始就知道的所有算法按照您想要应用它们的顺序创建管道。在 run 方法中调用管道，该管道依次调用每个算法。当系统引发新事件以表示新处理器可用时，将其添加到管道中。

**编辑2**

如果具有 run 方法的对象是模式中的主题，并且当添加新处理器时，调用 addsubscriber 方法将处理器添加到列表中，您可能可以使用观察者模式（尽管不太适合恕我直言）来实现它。然后，当调用 run 时，您迭代订阅者列表并将声音传递给他们以进行修改。

但这对我来说感觉很不对劲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T22:28:32.120

听起来你的任务试图得到的是你有一些外部代码（可能是一个控制器），它必须在运行时决定使用哪种方法来处理某些事情。这通常是通过 Strategy 完成的：处理程序都是 Strategy 的实现（在 Java 中，这是一个接口），然后您可以将它们保存在一个映射中，在该映射中您可以根据诸如传入的请求，或者您可以将它们保存在一个列表中并遍历它们并找到合适的请求。

如果您让每个人都在处理消息方面有所了解，那么您就有了责任链。

# python - 我如何知道 ndb.Model.get_or_insert 是创建了新实体还是获得了现有实体？

> ID：14542175
> 
> 赞同：10
> 
> 时间：2013-01-26T22:21:43.593
> 
> 标签：python, google-app-engine, app-engine-ndb

对于以下（损坏的）函数，我想返回`True`是否创建或更新了实体，`False`否则返回。问题是我不知道是否`get_or_insert()`得到了一个现有的实体，或者插入了一个。有没有简单的方法来确定这一点？

```
class MyModel(ndb.Model):
    def create_or_update(key, data):
        """Returns True if entity was created or updated, False otherwise."""

        current = MyModel.get_or_insert(key, data=data)

        if(current.data != data)
            current.data = data
            return True

        return False 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-27T16:34:43.503

`get_or_insert()`是一个微不足道的函数（尽管它的实现看起来很复杂，因为它试图处理不寻常的属性名称）。您可以轻松地自己编写：

```
@ndb.transactional
def my_get_or_insert(cls, id, **kwds):
  key = ndb.Key(cls, id)
  ent = key.get()
  if ent is not None:
    return (ent, False)  # False meaning "not created"
  ent = cls(**kwds)
  ent.key = key
  ent.put()
  return (ent, True)  # True meaning "created" 
```

# pattern-matching - ML 中的模式匹配

> ID：14542178
> 
> 赞同：0
> 
> 时间：2013-01-26T22:22:09.350
> 
> 标签：pattern-matching, sml, ml

我有这个代码：

```
fun all_except_option2(str : string, strlst : string list) =
    let fun all_except_option([], result) = NONE
    | all_except_option(str::T, result) = SOME(List.rev(result) @ T)
    | all_except_option(H::T, result) =all_except_option(T, H::result)
    in
    all_except_option(strlst, [])
    end 
```

编译器说：

> hw2provided.sml:22.13-24.70 错误：匹配冗余 (nil,result) => ... (str :: T,result) => ... --> (H :: T,result) => ...

我已经用“case of”语句处理了这个问题，但我的问题是语言不与 str 进行模式匹配（从上面）？为什么编译器认为 str 类似于 H.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:51:43.517

当你写

```
| all_except_option(str::T, result) = 
```

`str`这是一个隐藏旧参数的新绑定`str`。所以第二个模式`h::t`与最后一个模式具有相同的形式。

`str`您可以使用`if/else`构造将值与参数进行比较：

```
fun all_except_option2(str: string, strlst: string list) =
  let 
     fun all_except_option([], result) = NONE
      | all_except_option(h::t, result) = if h = str 
                                          then SOME(List.rev(result) @ t)
                                          else all_except_option(t, h::result)
  in
     all_except_option(strlst, [])
  end 
```

# iphone - 下载文件时如何更新 UICollectionViewCell 子类中的进度条

> ID：14542188
> 
> 赞同：4
> 
> 时间：2013-01-26T22:22:58.477
> 
> 标签：iphone, ios, uicollectionview, uicollectionviewcell, uiprogressbar

我快疯了，`UICollectionViewCelll`当我下载文件时，我正在尝试更新 a 的 progressBar，我已经尝试了一切，一切都尝试了，这是我最后一次尝试，我创建了一个与文件`UICollectionViewCell`连接的子类：`xib`

```
#import <UIKit/UIKit.h>

@interface DocumentCell : UICollectionViewCell

@property (weak, nonatomic) IBOutlet UIImageView *documentImage;
@property (weak, nonatomic) IBOutlet UIProgressView *downloadBar;

- (void)downloadDocumentWithUrl:(NSURLRequest *)requestUrl;

@end 

- (void)downloadDocumentWithUrl:(NSURLRequest *)requestUrl
{
.....
AFDownloadRequestOperation *request = [[AFDownloadRequestOperation alloc] initWithRequest:requestUrl targetPath:zipDownloadPath shouldResume:YES];

[request setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Successfully downloaded file to %@", zipDownloadPath);

 } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);

    }];

[request setProgressiveDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpected, long long totalBytesReadForFile, long long totalBytesExpectedToReadForFile) {

        NSLog(@"%f",totalBytesReadForFile/(float)totalBytesExpectedToReadForFile);
        [self performSelectorOnMainThread:@selector(updateBar:) withObject:[NSNumber numberWithFloat:(totalBytesReadForFile/(float)totalBytesExpectedToReadForFile)] waitUntilDone:YES];
    }];

    [downloadQueue addOperation:request];
}

- (void)updateBar:(NSNumber *)floatNumber
{
    [self.downloadBar setProgress:[floatNumber floatValue]];
} 
```

NSLog setProgressiveDownloadProgressBlock 完美运行，我可以看到我下载的所有字节，但progressBar 不会自行更新，始终保持为零......我不明白怎么做......这就是我显示单元格的方式，并调用方法下载：

```
- (void)startDownload:(NSString *)downloadUrl
{
    //DocumentCell *cell = (DocumentCell *)[self.collectionView cellForItemAtIndexPath:self.downloadPath]; i have tried also in this way
     DocumentCell *cell = (DocumentCell *)[self.collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:self.downloadPath];

[cell downloadDocumentWithUrl:requestUrl];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    UINib *cellNib = [UINib nibWithNibName:@"DocumentCell" bundle:nil];
    [self.collectionView registerNib:cellNib forCellWithReuseIdentifier:CellIdentifier];
    ...
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    DocumentCell *cell = (DocumentCell *)[collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
 cell.documentImage.....etc

return cell;
} 
```

任何人都可以帮助我吗？调用下载文件的方法，下载的字节的nslog工作，进度条不...请帮我更新这个进度条...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:46:00.317

试试这个：

```
[self performSelectorOnMainThread:@selector(updateBar:) withObject:[NSNumber numberWithFloat:((float)totalBytesReadForFile/(float)totalBytesExpectedToReadForFile)] waitUntilDone:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T05:54:13.370

这是我第一次使用 UIProgressView。尝试设置 UIProgressView 框架时遇到同样的问题。但是当initWithProgressViewStyle，就OK了。请再次检查我的代码： [https ://github.com/lequysang/TestCollectionViewWithProgressBar](https://github.com/lequysang/TestCollectionViewWithProgressBar)

# python - Kivy - 滚动视图不起作用。以及如何在侧窗格中添加聊天用户

> ID：14542189
> 
> 赞同：0
> 
> 时间：2013-01-26T22:23:12.747
> 
> 标签：python, kivy

我正在尝试编写一个聊天应用程序，其界面在可滚动的侧窗格上具有用户名。

我有两个问题：

1-此代码不滚动，请让我知道我做错了什么：

```
stacklayout2 = StackLayout(orientation='lr-tb',)
## Scrollview layout
scroll_layout = GridLayout(cols=1, 
                           spacing=20,
                           size_hint_y=None
                           )
scroll_layout.bind(minimum_height=layout.setter('height'))

for i in range(10):
    scroll_layout.add_widget(ToggleButton(text=str(i), 
                                          size_hint_y=None, 
                                          height=40
                                          )
                            )

scrollview = ScrollView(size_hint=(.3,.5), do_scroll_x=False)
scrollview.add_widget(scroll_layout)

stacklayout2.add_widget(scrollview)
stacklayout2.add_widget(Button(text='Send',size_hint=(.2,.2)))

s2.add_widget(stacklayout2) 
```

2-将（可点击/可选择）用户放在侧窗格上的最佳方式，我做得对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:08:22.143

根据要求重新提交作为答案:)

错误在绑定上，

```
scroll_layout.bind(minimum_height=scroll_layout.setter('height')) 
```

是您所需要的，因此在更新 minimum_heigh 时会更新 scool_layout 高度。

# api - oauth 1.0a api，无需登录即可使用

> ID：14542190
> 
> 赞同：0
> 
> 时间：2013-01-26T22:23:28.047
> 
> 标签：api, rest, oauth, tumblr

我想使用 Tumblr 的 api 从博客中提取一些图像。

我正在查看他们的 api，它是 oauth 1.0a ，我不希望我的用户必须登录，也不希望他们拥有 tumblr 帐户，我只想动态显示博客中的内容

这可能与oauth吗？我不确定我是否对该协议有完整的基本了解以在精神上回答这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:53:37.440

支持 Oauth 并不一定意味着最终用户必须提供凭据。事实上，虽然 Tumblr 确实使用 OAuth，但他们的 API 调用实际上并不需要它来提取已发布的数据，包括我相信您感兴趣的数据。您需要在此处注册您的应用程序：[http://www .tumblr.com/oauth/apps](http://www.tumblr.com/oauth/apps)获取 api 密钥，但随后您应该能够访问您正在寻找的博客信息。我在这里整理了一个关于 theRightAPI 的示例场景：http://therightapi.com/tDWRFGE [，](http://therightapi.com/tDWRFGE)它显示了如何使用适当的数据调用此 API。您可以使用您喜欢的标签和您的 api 密钥（我从他们的示例中插入一个）指定不同的博客名称，然后您可以验证您是否得到了您期望的结果。

希望这可以帮助！

# java - 如何使用 Facebook SDK android 获取 Facebook 照片、全名、性别

> ID：14542193
> 
> 赞同：23
> 
> 时间：2013-01-26T22:23:36.510
> 
> 标签：java, android, facebook-graph-api, facebook-android-sdk

我正在开发一个 Android 应用程序，其中任何使用我们的应用程序登录到 Facebook 的 Android 用户，我需要从 Facebook 中提取他的照片、他的性别、他的全名。我为此使用 Facebook SDK。

在 Facebook SDK 的帮助下，我可以登录 Facebook，但我不知道如何从 facebook 中提取他的照片、性别和全名？

下面是我用来登录 Facebook 的代码。我跟着这个[教程](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#prerequisities)

```
public class SessionLoginFragment extends Fragment {

    private static final String URL_PREFIX_FRIENDS = "https://graph.facebook.com/me/friends?access_token=";

    private TextView textInstructionsOrLink;
    private Button buttonLoginLogout;
    private Session.StatusCallback statusCallback = new SessionStatusCallback();

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment, container, false);

    buttonLoginLogout = (Button) view.findViewById(R.id.buttonLoginLogout);
    textInstructionsOrLink = (TextView) view.findViewById(R.id.instructionsOrLink);

    Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

    Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
        session = Session.restoreSession(getActivity(), null, statusCallback,
            savedInstanceState);
        }
        if (session == null) {
        session = new Session(getActivity());
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        }
    }

    updateView();

    return view;
    }

    @Override
    public void onStart() {
    super.onStart();
    Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
    super.onStop();
    Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(getActivity(), requestCode, resultCode, data);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState);
    }

    private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        Log.d("Hello", URL_PREFIX_FRIENDS + session.getAccessToken());
        Intent i = new Intent(getActivity(), ThesisProjectAndroid.class);
        startActivity(i);

    } else {
        Log.d("Hello", "Login Failed");
        textInstructionsOrLink.setText(R.string.instructions);
        buttonLoginLogout.setText(R.string.login);
        buttonLoginLogout.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            onClickLogin();
        }
        });
    }
    }

    private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(getActivity(), this, true, statusCallback);
    }
    }

    private void onClickLogout() {
    Session session = Session.getActiveSession();
    if (!session.isClosed()) {
        session.closeAndClearTokenInformation();
    }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        updateView();
    }
    }
} 
```

谁能告诉我在上面的课程中我需要在哪里进行更改以获得我需要的所有三个信息。据我所知，如果我能够获得该人的 facebook 唯一 ID，我可以获得我猜想的所有信息。有什么想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-02-09T06:03:57.160

使用新的 api 和您的 facebook 自定义按钮，您可以使用以下代码：

在你的 gradle 文件中放下面的 gradle：

```
 compile 'com.facebook.android:facebook-android-sdk:4.20.0'

  Newer sdk does not need initializaion .

    private CallbackManager callbackManager;
    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    FacebookSdk.sdkInitialize(LoginActivity.this);//Is now depricated
    setContentView(R.layout.activity_login);
    callbackManager = CallbackManager.Factory.create();
    } 
```

活动结果：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
        callbackManager.onActivityResult(requestCode, resultCode, data);
         } 
```

按钮点击：

```
 @Override
    public void onClick(View v) {
    switch (v.getId())
    {
        case R.id.btn_f_sign_in_login:
            LoginManager.getInstance().logInWithReadPermissions(
                    this,
                    Arrays.asList("user_friends", "email", "public_profile"));

            LoginManager.getInstance().registerCallback(callbackManager,
                    new FacebookCallback<LoginResult>() {
                        @Override
                        public void onSuccess(LoginResult loginResult) {
                            setFacebookData(loginResult);
                        }

                        @Override
                        public void onCancel() {
                        }

                        @Override
                        public void onError(FacebookException exception) {
                        }
                    });
            break;
    }
} 
```

设置Facebook数据：

```
 private void setFacebookData(final LoginResult loginResult)
       {
    GraphRequest request = GraphRequest.newMeRequest(
            loginResult.getAccessToken(),
            new GraphRequest.GraphJSONObjectCallback() {
                @Override
                public void onCompleted(JSONObject object, GraphResponse response) {
                    // Application code
                    try {
                        Log.i("Response",response.toString());

                        String email = response.getJSONObject().getString("email");
                        String firstName = response.getJSONObject().getString("first_name");
                        String lastName = response.getJSONObject().getString("last_name");
                        String gender = response.getJSONObject().getString("gender");

                        Profile profile = Profile.getCurrentProfile();
                        String id = profile.getId();
                        String link = profile.getLinkUri().toString();
                        Log.i("Link",link);
                        if (Profile.getCurrentProfile()!=null)
                        {
                            Log.i("Login", "ProfilePic" + Profile.getCurrentProfile().getProfilePictureUri(200, 200));
                        }

                       Log.i("Login" + "Email", email);
                        Log.i("Login"+ "FirstName", firstName);
                        Log.i("Login" + "LastName", lastName);
                        Log.i("Login" + "Gender", gender);

                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });
    Bundle parameters = new Bundle();
    parameters.putString("fields", "id,email,first_name,last_name,gender");
    request.setParameters(parameters);
    request.executeAsync();
} 
```

获取下载您应用的 Facebook 好友：

替换**parameters.putString("fields", "id,email,first_name,last_name");**

with **parameters.putString("fields", "id,email,first_name,last_name,friends");**

添加以下逻辑以获取朋友数据

```
 if (object.has("friends")) {
                  JSONObject friend = object.getJSONObject("friends");
                  JSONArray data = friend.getJSONArray("data");
                  for (int i=0;i<data.length();i++){
                 Log.i("idddd",data.getJSONObject(i).getString("id"));
                  }
             } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-06-30T16:42:45.943

在您的`StatusCallback`函数中，您可以从`GraphUser`对象中获取详细信息

```
private class SessionStatusCallback implements Session.StatusCallback {
    private String fbAccessToken;

    @Override
    public void call(Session session, SessionState state, Exception exception) {
        updateView();
        if (session.isOpened()) {
            fbAccessToken = session.getAccessToken();
            // make request to get facebook user info
            Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
                @Override
                public void onCompleted(GraphUser user, Response response) {
                    Log.i("fb", "fb user: "+ user.toString());

                    String fbId = user.getId();
                    String fbAccessToken = fbAccessToken;
                    String fbName = user.getName();
                    String gender = user.asMap().get("gender").toString();
                    String email = user.asMap().get("email").toString();

                    Log.i("fb", userProfile.getEmail());
                }
            });
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-26T11:08:49.017

使用新的 API

```
private void importFbProfilePhoto() {

    if (AccessToken.getCurrentAccessToken() != null) {

        GraphRequest request = GraphRequest.newMeRequest(
                AccessToken.getCurrentAccessToken(), new GraphRequest.GraphJSONObjectCallback() {
                    @Override
                    public void onCompleted(JSONObject me, GraphResponse response) {

                        if (AccessToken.getCurrentAccessToken() != null) {

                            if (me != null) {

                                String profileImageUrl = ImageRequest.getProfilePictureUri(me.optString("id"), 500, 500).toString();
                                Log.i(LOG_TAG, profileImageUrl);

                            }
                        }
                    }
                });
        GraphRequest.executeBatchAsync(request);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T22:48:06.070

[请参阅以下教程](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/personalize/)

您必须请求获取 GraphUser-Object。使用此对象，您可以获得所需的信息： GraphUser`user.getName();`等`user.getId();`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-27T12:28:31.570

使用 Sdk v4.28 和登录用户作为问题，很容易在`Profile.getCurrentProfile()`内部（或之后）调用成功回调`LoginManager`：

```
facebookCallbackManager = CallbackManager.Factory.create();
LoginManager.getInstance().registerCallback(facebookCallbackManager,
            new FacebookCallback<LoginResult>() {
                @Override
                public void onSuccess(LoginResult loginResult{ 
                    //Profile.getCurrentProfile()
                }
                @Override
                public void onCancel() {
                }
                @Override
                public void onError(FacebookException exception) {
                }
            }); 
```

您可以使用[Graph Api](https://developers.facebook.com/docs/android/graph)，但文档本身说在上面使用登录用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-24T18:36:41.177

如果您将获得空配置文件，则使用 Profile Tracker if(Profile.getCurrentProfile() == null) {

```
 mProfileTracker = new ProfileTracker() {
                @Override
                protected void onCurrentProfileChanged(Profile profile, Profile profile2) {
                    // profile2 is the new profile
                    Log.d("facebook - profile", profile2.getFirstName());
                    profile_firstname=profile2.getFirstName();
                    profile_lastname=profile2.getLastName();
                   // Toast.makeText(LoginActivity.this, "User ID : "+ profile2.getFirstName(), Toast.LENGTH_LONG).show();
                    mProfileTracker.stopTracking();
                }
            };

        } 
```

# c# - 使用自动映射器将 ViewModel 映射到模型

> ID：14542200
> 
> 赞同：-1
> 
> 时间：2013-01-26T22:24:14.713
> 
> 标签：c#, automapper

我在使用此模型的 Automapper 时遇到问题

```
public class Contact 
    {
        public string Name { get; set; }
        public string Email { get; set; }
        public string MessageTitle { get; set; }
        public string MessageBody { get; set; }
        public string MessageTime { get; set; }
    } 
```

和这个 ViewModel

```
 public class ContactView
    {
        public string Name { get; set; }
        public string Email { get; set; }
        public string MessageTitle { get; set; }
        public string MessageBody { get; set; }
        public string MessageTime { get; set; }
    } 
```

这是我的转换方法：

```
//Convert to Model
    public static Contact ConvertToContactModel(this ContactView contactView)
    {
        return Mapper.Map<ContactView, Contact>(contactView);

    }

 //Convert to ViewModel
     public static ContactView ConvertToContactView(this Contact contact)
            {
                return Mapper.Map<Contact, ContactView>(contact);
            } 
```

为什么转换为模型（ConvertToContactModel）方法不起作用？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:32:03.273

确保在映射某些对象**之前创建映射。**您应该在应用程序启动（`Main`方法或*Global.asax*`Application_Start`中）有此代码：

 *```
Mapper.CreateMap<ContactView, Contact>();
Mapper.CreateMap<Contact, ContactView>(); 
```*

# php - 类的对象无法转换为字符串

> ID：14542201
> 
> 赞同：1
> 
> 时间：2013-01-26T22:24:41.153
> 
> 标签：php

我试图将登录用户的用户名与他的年龄相关联，但出现以下错误。有人可以帮帮我吗？请帮我插入带有年龄的用户名。

```
Catchable fatal error: Object of class loggedInUser could not be converted to string 
```

这是插入查询：

```
<?php

if ( isset( $_POST['submit'] ) ) { 
require_once("models/config.php");
securePage($_SERVER['PHP_SELF']);

$age = $_POST["age"];
$username = $_SESSION["userCakeUser"];
$stmt = $mysqli->prepare("INSERT INTO test (username, Age) VALUES (?, ?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("ss",  $username, $age);

$stmt->execute();

$stmt->close();

mysqli->close();
}
?>
<html>
<body>
<form action="" method="post" enctype="multipart/form-data">
Age:<input type="text" name="age" required><br>
<input type="submit" value="Submit" name="submit">
</form> 
```

这是我里面的东西`config.php`：

```
<?php
require_once("db-settings.php"); //Require DB connection

//Retrieve settings
$stmt = $mysqli->prepare("SELECT id, name, value
FROM ".$db_table_prefix."configuration");   
$stmt->execute();
$stmt->bind_result($id, $name, $value);

while ($stmt->fetch()){
$settings[$name] = array('id' => $id, 'name' => $name, 'value' => $value);
}
$stmt->close();

//Set Settings
$emailActivation = $settings['activation']['value'];;
$mail_templates_dir = "models/mail-templates/";
$websiteName = $settings['website_name']['value'];
$websiteUrl = $settings['website_url']['value'];

$emailAddress = $settings['email']['value'];
$resend_activation_threshold = $settings['resend_activation_threshold']['value'];
$emailDate = date('dmy');
$language = $settings['language']['value'];
$template = $settings['template']['value'];

$default_hooks = array("#WEBSITENAME#","#WEBSITEURL#","#DATE#");
$default_replace = array($websiteName,$websiteUrl,$emailDate);

if (!file_exists($language)) {
$language = "models/languages/en.php";
}

if(!isset($language)) $langauge = "models/languages/en.php";

//Pages to require
require_once($language);
require_once("class.mail.php");
require_once("class.user.php");
require_once("class.newuser.php");
require_once("funcs.php");

session_start();

//Global User Object Var
//loggedInUser can be used globally if constructed
if(isset($_SESSION["userCakeUser"]) && is_object($_SESSION["userCakeUser"]))
{
$loggedInUser = $_SESSION["userCakeUser"];
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:31:58.407

我不知道您的 loggedInUser 对象具有哪些属性，但请尝试这样的事情

```
$user = $_SESSION["userCakeUser"]; // I think this returns an object - loggedInUser
$stmt = $mysqli->prepare("INSERT INTO test (username, Age) VALUES (?, ?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("ss",  $user->userName, $age); //or $user->getUsername() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:31:05.197

在某些时候——虽然我看不到你的代码在哪里——你把一个对象当作一个字符串。有几种方法可以解决这个问题，具体取决于您要执行的操作：

*   在课堂上使用`__toString()`魔法方法`$loggedInUser`
*   从类中获取一个字符串属性`$loggedInUser`并处理它。例如`$loggedInUser->getName()`

# javascript - 按 id 值排序 li

> ID：14542203
> 
> 赞同：0
> 
> 时间：2013-01-26T22:25:20.403
> 
> 标签：javascript, jquery

`LI`单击排序按钮后，我需要使用标签的 ID 值对列表进行升序或降序排序。如果是升序，则必须按降序排序，反之亦然。

例如：

```
 <ul id="place-list">
      <li id="0">Paris</li>
      <li id="1">greece</li>
      <li id="2">London</li>
 </ul> 
```

我需要在不使用`tsort`jQuery-tinysort 中的函数的情况下对其进行排序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:30:31.280

不要在不需要的时候使用 jQuery。

```
function sortList() {
    sortList.direction = sortList.direction ? false : true;
    var arr = [], list = document.getElementById('place-list'),
        c = list.children, l = c.length, i;
    for(i=0; i<l; i++) arr[i] = c[i]; // "convert" NodeList to array
    arr.sort(function(a,b) {return a.id < b.id ? -1 : 1;}); //sorting function ends here.
    if( !sortList.direction) arr = arr.reverse();
    for(i=0; i<l; i++) list.appendChild(arr[i]);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T23:53:34.693

可以用于`sort()`jQuery 元素的集合：

```
var $list = $('#place-list');    
/* store lastSort direction in button data*/
$('button').data('lastSort', 'asc').click(function() {
    var $btn=$(this), $items = $list.children(), lastSort=$btn.data('lastSort');
    var direction = lastSort=='asc' ? 'desc' :  'asc';
   $btn.data('lastSort',direction);
    $list.empty().append($items.sort(directionSort[direction]));
});

var directionSort = {
    asc: function (a, b) {
        return a.id < b.id ? -1 : 1;
    },
    desc: function (a, b) {
        return a.id > b.id ? -1 : 1;
    }
} 
```

演示：http: [//jsfiddle.net/XAutV/1/](http://jsfiddle.net/XAutV/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T12:02:45.797

你也可以使用[.map()](http://api.jquery.com/jQuery.map/)

我也将更`id=""`改为`data-id=""`.

## HTML

```
<ul id="place-list">
    <li data-id="4">Tokyo 4</li>
    <li data-id="0">Paris 0</li>
    <li data-id="5">Frankfurt 5</li>
    <li data-id="2">London 2</li>
    <li data-id="1">greece 1</li>
    <li data-id="3">Munich 3</li>
</ul>
<button id="asc">ASC</button>
<button id="desc">DESC</button> 
```

## jQuery

```
var sortArray = function (items, inverse) {
    var inverse = inverse || false;

    var sortedArray = items.map(function () {
        return {
            id: $(this).data("id"),
            element: $(this)[0].outerHTML
        };
    });

    var appendTo = items.parent();
    items.remove();

    sortedArray.sort(function (a, b) {
        return a.id > b.id ? (inverse ? -1 : 1) : (inverse ? 1 : -1);
    });

    sortedArray.each(function () {
        $(appendTo).append(this.element);
    });
}

$("#asc").click(function () {
    sortArray($("#place-list").find("li"));
});

$("#desc").click(function () {
    sortArray($("#place-list").find("li"), true);
}); 
```

## 例子

[http://jsfiddle.net/995dY/](http://jsfiddle.net/995dY/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T22:36:40.777

我添加了一个`#sort`可以单击以对元素进行排序的元素

```
$("#sort").click(function(){
    var sortedLis = [];
    var lis = $("#place-list").find("li");
    lis.remove();

    var descending = $(lis[0]).attr("id") == lis.length -1;
    lis.each(function(index, element){
        if(!descending){
          sortedLis[lis.length - $(element).attr("id")] = element;
        }else{
            sortedLis[$(element).attr("id")] = element;
        }
    });

    $("#place-list").append(sortedLis);
}); 
```

[例子](http://jsfiddle.net/ZdNac/2/)

# python - 在 Python 中翻来覆去？

> ID：14542204
> 
> 赞同：0
> 
> 时间：2013-01-26T22:25:21.033
> 
> 标签：python, math, module, turtle-graphics

我发现自己在 Python 中使用 turtle 模块，只是将一些东西调整为其他人 (Dmitri Kurilo) 编写的代码。我用它做了一个非常整洁的图形，形成了美丽的曲线。因为我对数学知之甚少，也许你们中的一些人可以帮助我破译这里发生的事情！非常感谢，代码如下！：

```
import turtle, random
from math import *
def fib(n):    
    for n in range(400):
        turtle.color("black")
        turtle.right(pi*19)
        turtle.forward(n)
        if n > 400:
            break    

turtle.title("The Looping ball")
turtle.colormode(255)
turtle.color("white")
turtle.goto(0,0)
turtle.color("black")
turtle.speed(500)
fib(1)
turtle.getscreen()._root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:53:39.177

```
import turtle, random
from math import * 
```

进口`random`是多余的。最后，只有`turtle`和`math.pi`被使用。

```
def fib(n):    
    for n in range(400):
        turtle.color("black")
        turtle.right(pi*19)
        turtle.forward(n)
        if n > 400:
            break 
```

绘制一个由 400 条线段构成的图形，其中每两条线段之间的夹角为 59.69 度（`turtle`模块默认使用度数），每条线段都比前一条线长一个单位。这应该几乎会产生一个 6 角的[螺旋](http://en.wikipedia.org/wiki/Spirangle)角，但是因为线段之间的角度不是整圈（60 度）的六分之一，所以它稍微偏离了。

请注意，该参数`n`未使用，因为它被`n`循环中的覆盖。条件`n > 400`永远不会达到（因为`range(400)`范围从包含 0 到不包含 400），所以循环的最后一部分没有什么值得一提的。

现在主要部分：

```
turtle.title("The Looping ball")
turtle.colormode(255)
turtle.color("white")
turtle.goto(0,0)
turtle.color("black")
turtle.speed(500) 
```

选择结果窗口的一些设置：设置标题，`colormode`设置（如何指定颜色值；此处未使用），在屏幕中心画一条白线并将海龟留在那里（最好使用`turtle.penup()`和`turtle.pendown()`为此），并尽可能快地设置绘图速度（`turtle.speed(0)`会做同样的事情，任何大于 10 的都与 相同`turtle.speed(0)`）。

```
fib(1) 
```

螺旋被绘制。

```
turtle.getscreen()._root.mainloop() 
```

程序的控制权交给`turtle`屏幕的主事件循环。如果您不这样做，窗口将在完成绘图后立即关闭。如果您“运行”主循环，只要窗口打开，它就会使程序保持活动状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T23:24:28.617

原始程序的更清晰版本：

```
import turtle

def fib(num, rot=59.7, scale=1.0):
    for n in range(num):
        turtle.right(rot)
        turtle.forward(n*scale)

turtle.title('The Looping ball')
turtle.speed(2000)
turtle.pencolor('blue')
fib(400, rot=92, scale=0.75)
turtle.getscreen()._root.mainloop() 
```

这删除了一些不必要的东西并参数化了一些值，因此 OP 可以使用行数、每行之前的旋转和行的长度。这有助于了解每个参数如何改变事物。

# php - 通过 php 将文件附加到电子邮件

> ID：14542206
> 
> 赞同：0
> 
> 时间：2013-01-26T22:25:37.237
> 
> 标签：php, sendmail

如何将我的 backup.zip 文件附加到电子邮件中。这是我当前的代码：

```
<?php
unlink('./backups/backup.zip');
Zip('/home/example/public_html/', './backups/backup.zip'); // I have removed the ZIP function just to make this code look cleaner

    mail('example@gmail.com', '"'.date('d-m-Y h:m:s').'" Daily Backup: example.co.uk', 'You will find today's backup attached to this email. - This backup does NOT contain backups for MySQL databases. You must backup these up manually.');

?> 
```

谢谢！

我需要附加 /public_html/backups/ 文件夹中的 backup.zip 文件

基本上，我正在尝试创建一个自动化的每日 cron，它将向用户发送一封电子邮件，并将他的备份附加到他的电子邮件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:31:38.833

我不会将 PHP 用于这类东西，而是使用 Perl 或 Python 之类的语言。两者都有很多处理文件发送的模块，比如[MIME::Lite](http://search.cpan.org/dist/MIME-Lite/)，并且比 PHP 运行得更快。

我用于备份的模板示例，您可以使用其他模块（例如[Tar 模块](http://search.cpan.org/~bingos/Archive-Tar-1.90/lib/Archive/Tar.pm)）来处理备份

```
$msg = MIME::Lite->new(
  From    => 'backup@domain.com',
  To      => 'example@gmaiL.com',
  Subject => "Back-up completed",
  Type    => "text/plain",
  Data    => "Back-up from ".time());

$msg->attach(Type=> "application/x-tar",
             Path =>"/var/backup.tgz",
             Filename =>"backup.tgz");

$msg->send; 
```

# jquery - 通过 for 循环添加点击事件

> ID：14542218
> 
> 赞同：2
> 
> 时间：2013-01-26T22:27:25.903
> 
> 标签：jquery

此代码工作正常——单击第一个 (li) 产生“0”，单击第二个 (li) 产生“1”。

```
$("li").eq(0).click(function () { alert(0) });
$("li").eq(1).click(function () { alert(1) }); 
```

但是，我宁愿使用 for 循环。通过以下，每个 (li) 产生“2”。

```
for (var i = 0; i < 2; i++) {
            $("li").eq(i).click(function () { alert(i) });
        } 
```

为什么？提前致谢。抱歉，如果这是显而易见的事情，但这让我发疯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:33:52.730

`index()`使用不需要`for`循环的 jQuery 方法要简单得多：

```
$('li').click(function(){ 
   /* "this " is element clicked*/       
    alert( $(this).index() );
}); 
```

不带参数使用`index()`将返回与其兄弟姐妹相关的元素索引。还有一些方法可以`index()`用于其他元素集合

API参考：http: [//api.jquery.com/index](http://api.jquery.com/index)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:36:29.640

这称为闭包。执行此操作时，您正在设置一个名为`i`. 因此，当您单击它时，您的`click`函数会记住此变量，该变量始终为 2，因为它是循环结束时的值。

现在为什么它是一个全局变量？，因为javascript有函数范围而不是块范围

```
<script type="text/javascript">
    var imGlobal = "Hello!";
    // ^ Watch out for the scope! I'm NOT inside a function

    for (var i = 0; i < 2; i++){}
    // ^ Watch out for the scope! I'm NOT inside a function EITHER!!!

    function(){
        // ^ Watch out for the scope! I'm inside a function
        var imNOTGlobal = "I won't exist after the function has returned (under certain circumstances ;])";
    }();
    console.log(imGlobal);    //"Hello!"
    console.log(i);           //2
    console.log(imNOTGlobal); //undefined
</script> 
```

闭包是 javascript 的一种方法，可以执行以下有用的操作：

```
// To get the nth prime number
var getPrimeNumber = function (){
    var primeNumbers = [];
    return function(n){
        if(!primeNumbers[n]){
            // Calculate the nth prime number and insert it into the array.
        }

        return primeNumbers[n];
    };
}(); // The function is executed immediately 
// making "var getPrimeNumber" to hold the result of the execution 
// which is a function that remembers primeNumbers 
// and is who does the actual calculation

getPrimeNumber(1);
getPrimeNumber(2);
getPrimeNumber(3); // Calculate it the first time
getPrimeNumber(4);
getPrimeNumber(3): // This is already calculated!
// The array ends up with 4 slots; 
```

每次调用该函数时，它都会检查它是否已经计算出第 n 个素数并将其存储在闭包可访问的数组中，这样您就不必在每次询问函数时计算第 n 个数。

现在，这有什么用处？：您可以使用每次调用时都未初始化的变量，`getPrimeNumber();`并且该变量不是全局对象。

注意：该功能不起作用，但说明了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T22:32:14.383

变量 i 是一个全局变量。在 for 循环之后，它的值为 2，每次单击任何 li 元素时，它都会提醒 i 的值，现在是 2。

尝试：

```
for (var i = 0; i < 2; i++) {
   $('li').eq(i).click(function() { 
         alert( $(this).index() ); 
    });        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T22:34:28.080

闭包是个婊子:)你应该做这样的事情——这将捕捉到“正确的”我

```
function createAlertFunction(i) {
    return (function onClickFunc () {
        alert(i)
    });
}

for (var i = 0; i < 2; i++) {
    $("li").eq(i).click = createAlertFunction(i);
} 
```

# scala - 如何在 Sbt 的 Build.scala 中设置喷罐的堆大小？

> ID：14542224
> 
> 赞同：1
> 
> 时间：2013-01-26T22:28:23.037
> 
> 标签：scala, sbt, xsbt-web-plugin, spray

我有一个正在运行的 sbt 项目，可以使用重新启动来启动我的服务器。设置是使用[xsbt-web-plugin](https://github.com/siasia/xsbt-web-plugin)完成的。

现在我注意到服务器进程以 128M 的堆运行，这有点短。我知道如何为 sbt 进程配置堆大小，但显然 spray 正在运行不同的 jvm。

如何在这种设置中为喷雾罐配置更大的堆？

## 细节

我已经像我在这里回答的那样配置了我的 sbt：[How to specify JVM maximum heap size "-Xmx" for running an application with "run" action in SBT?](https://stackoverflow.com/questions/3868863/how-to-specify-jvm-maximum-heap-size-xmx-for-running-an-application-with-run/14561346#14561346)

但是当我使用 jconsole 查看正在运行的进程时，我可以看到服务器进程正在不同的 jvm 中运行：

![jconsole 在 sbt-launch.jar 旁边显示服务器的不同进程](../Images/d3a30b19fd77579b36189fffc6e72f13.png)

而且我可以看到这个进程只有128M的堆，而不是.sbtconfig中配置的3.5GI。

![jconsole 显示这个进程只有 128M 内存](../Images/55514c032a6b3b15432ea92de2c4acd9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:45:26.550

[可以通过为分叉的 JVM 设置 javaOptions](http://www.scala-sbt.org/release/docs/Detailed-Topics/Forking#forked-jvm-options)来解决这个问题

```
object BuildSettings {
   ....
   val buildSettings = Defaults.defaultSettings ++ Seq(
     ....
     javaOptions += "-Xmx1G"
     ....
  )
} 
```

如果您想更具体地了解不同的流程，您可以使用类似的东西

```
javaOptions in run +="-Xmx1G" 
```

但我还没有找到你应该传递给哪个值`in`。

# java - 让网络上的客户端发现服务器

> ID：14542226
> 
> 赞同：0
> 
> 时间：2013-01-26T22:28:37.157
> 
> 标签：java, tcp, client, ip

我目前正在编写一个使用 TCP/IP 进行通信的 Java 应用程序。我想要完成的是让客户端轻松找到服务器并通过发送一些消息进行连接。

现在的问题是：我该怎么做才能让客户端发现服务器？

有没有办法可以向路由器（可能是 DHCP 服务器）发送一条消息，告诉它我正在使用此服务？然后客户端可以检查路由器（DHCP服务器）上是否有类似的东西并连接到适当的IP。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:54:46.350

您可以使用 UDP 广播。这里有一些关于实现的[细节。](http://michieldemey.be/blog/network-discovery-using-udp-broadcast/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:57:05.590

查看[zeroconf](http://en.wikipedia.org/wiki/Zero_configuration_networking)。它是用于服务广告和发现的多播 DNS 解决方案。该协议最初由 Apple 作为[bonjour](http://en.wikipedia.org/wiki/Bonjour_%28software%29)协议。该协议还有一个流行的开源实现，称为[Avahi](http://avahi.org/)。

有一个 java 库[avahi4j](http://code.google.com/p/avahi4j/)可能会有所帮助。我个人对 avahi4j 没有第一手经验，但在其他非 Java 项目中使用过 avahi。

请注意，此方法仅适用于本地子网的广播域。

# android - 来自 SQL 的 TableView 与 OnClickListener

> ID：14542229
> 
> 赞同：0
> 
> 时间：2013-01-26T22:28:54.043
> 
> 标签：android, sql, tableview, clickable

我一直在搜索并找到一些问题，但不是我想问的问题。[第一](https://stackoverflow.com/questions/5209561/tableview-in-android)，[第二](https://stackoverflow.com/questions/4968226/show-data-in-table-view-in-android)，而不是我的主题，[第三个](https://stackoverflow.com/questions/8543647/editing-android-textview-after-populating-tableview-from-db-seems-not-possible)为我提供了一些帮助，但根本没有。

我想制作一个使用 dbquery 从数据库填充的 tableview。每个表行包含三个文本视图，第一列和最后一列是 4 位数字，最后一列是大约 30 个字母的字符串。

所有这些我都能以某种方式管理。问题是我想让每一行都成为可点击的元素。我有一个梦想，首先使用 cursorAdapter 进行填充，然后使用 OnClickListener，但据我所知，tableview 没有这样的东西。而且 gridView 对我来说不是一个解决方案，因为我需要让第一列和最后一列比中间列窄得多。至少我没有在gridview中找到这样做的方法。

你有什么主意吗？如果您需要一些额外的信息，请问我，我会尽力而为。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:45:16.250

```
/**
 * Call once per row.
 * 
 * @param data
 *            Text containing data for each cell.
 * @param rowId
 *            unique id for OnClickListener
 */
public void addRow(String[] data, int[] rowId) {
    for (int i = 0; i < data.length; i++) {
        TextView tv = getTextViewAndMakeThemPretty(data[i]);
        tv.setId(rowId[i]);
        tv.setFocusable(false);
        tv.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                /**
                 * Do your stuff here.
                 */

            }
        });
        this.addView(tv);
        /**
         * Adds the TextView to Row as Cell
         */
    }
} 
```

您必须扩展 TableRow 并将此代码添加到其中。当您需要添加行并在第一个参数中传入数据时调用它。

# ruby-on-rails - Rails 控制台无法打开 - 没有错误

> ID：14542230
> 
> 赞同：1
> 
> 时间：2013-01-26T22:29:05.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, copycopter

我正在使用 Rails 3.2.11、Ruby 1.9.3，并且无法打开 rails 控制台。也没有返回错误。我得到的唯一消息是：

```
➜  projectname git:(development) ✗ rails c
** [Copycopter] [P:xxxx] [T:xxxxxxxxxxxxxx] Client 2.0.1 ready
** [Copycopter] [P:xxxx] [T:xxxxxxxxxxxxxx] Environment Info: [Ruby: 1.9.3] [Env: ]
** [Copycopter] [P:xxxx] [T:xxxxxxxxxxxxxx] Registered Resque after_perform hook 
```

任何帮助将不胜感激。

# python - 在 matplotlib 中用一个文本注释几个点

> ID：14542232
> 
> 赞同：10
> 
> 时间：2013-01-26T22:29:32.547
> 
> 标签：python, matplotlib, annotate

我想使用单个注释文本用多个箭头注释多个数据点。我做了一个简单的解决方法：

```
ax = plt.gca()
ax.plot([1,2,3,4],[1,4,2,6])
an1 = ax.annotate('Test',
  xy=(2,4), xycoords='data',
  xytext=(30,-80), textcoords='offset points',
  arrowprops=dict(arrowstyle="-|>",
                  connectionstyle="arc3,rad=0.2",
                  fc="w"))
an2 = ax.annotate('Test',
  xy=(3,2), xycoords='data',
  xytext=(0,0), textcoords=an1,
  arrowprops=dict(arrowstyle="-|>",
                  connectionstyle="arc3,rad=0.2",
                  fc="w"))
plt.show() 
```

产生以下结果： ![在此处输入图像描述](../Images/0c9837efe9247c416915af31a10c21b8.png)

但我真的不喜欢这个解决方案，因为它是......好吧，一个丑陋的肮脏黑客。

除此之外，它还会影响注释的外观（主要是在使用半透明 bbox 等时）。

所以，如果有人得到了一个实际的解决方案，或者至少知道如何实现它，请分享。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-27T09:11:42.850

我想正确的解决方案将需要太多的努力 - 子类化 _AnnotateBase 并自己添加对多个箭头的支持。但是我设法通过添加第二个注释影响视觉外观来消除这个问题`alpha=0.0`。因此，如果没有人会提供更好的解决方案，这里的更新解决方案：

```
def my_annotate(ax, s, xy_arr=[], *args, **kwargs):
  ans = []
  an = ax.annotate(s, xy_arr[0], *args, **kwargs)
  ans.append(an)
  d = {}
  try:
    d['xycoords'] = kwargs['xycoords']
  except KeyError:
    pass
  try:
    d['arrowprops'] = kwargs['arrowprops']
  except KeyError:
    pass
  for xy in xy_arr[1:]:
    an = ax.annotate(s, xy, alpha=0.0, xytext=(0,0), textcoords=an, **d)
    ans.append(an)
  return ans

ax = plt.gca()
ax.plot([1,2,3,4],[1,4,2,6])
my_annotate(ax,
            'Test',
            xy_arr=[(2,4), (3,2), (4,6)], xycoords='data',
            xytext=(30, -80), textcoords='offset points',
            bbox=dict(boxstyle='round,pad=0.2', fc='yellow', alpha=0.3),
            arrowprops=dict(arrowstyle="-|>",
                            connectionstyle="arc3,rad=0.2",
                            fc="w"))
plt.show() 
```

结果图片： ![在此处输入图像描述](../Images/6a0dc7152559c1c6c13f18bb7063b1eb.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-07T17:26:09.690

就个人而言，我会使用设置轴分数坐标来保证文本标签的位置，然后通过使用 color 关键字参数使除一个标签之外的所有标签可见。

```
ax = plt.gca()
ax.plot([1,2,3,4],[1,4,2,6])
label_frac_x = 0.35
label_frac_y = 0.2

#label first point
ax.annotate('Test', 
  xy=(2,4), xycoords='data', color='white',
  xytext=(label_frac_x,label_frac_y), textcoords='axes fraction',
  arrowprops=dict(arrowstyle="-|>",
                  connectionstyle="arc3,rad=0.2",
                  fc="w"))

#label second point    
ax.annotate('Test', 
      xy=(3,2), xycoords='data', color='black',
      xytext=(label_frac_x, label_frac_y), textcoords='axes fraction',
      arrowprops=dict(arrowstyle="-|>",
                      connectionstyle="arc3,rad=0.2",
                      fc="w"))
plt.show() 
```

[![查看示例图](../Images/c3ce2354d4290f015670355c59b02455.png)](https://i.stack.imgur.com/xnsX3.png)

# jsf - 为什么 bean中不填数据

> ID：14542234
> 
> 赞同：1
> 
> 时间：2013-01-26T22:29:41.467
> 
> 标签：jsf

我有一些 JSF 页面和一些管理 bean。在管理 bean 中，我创建了一些 odel 文件并尝试通过 JSF 填充它。但它没有设置值。但是当我使用现有的模型对象时效果很好。

这是我的 JSF 代码：

```
 <h:form>           
            <c:set var="patient" value="#{manageBean.patient}" />
            <p:panel id="panel" header="Patient" style="margin-bottom:10px;">  
                <h:panelGrid columns="2">  
                    <h:outputLabel value="First  name" />  
                    <p:inputText id="firstName" required="true" value="#{patient.firstName}" />  

                    <h:outputLabel value="Family  name" />  
                    <p:inputText id="familyName" required="true" value="#{patient.familyName}" />  

                    <h:outputLabel value="Sex"/>
                    <p:selectOneMenu id="sex" rendered="true" value="#{patient.sex}">
                        <f:selectItem itemLabel="Male" itemValue="male" />  
                        <f:selectItem itemLabel="Female" itemValue="female" />  
                    </p:selectOneMenu>

                    <h:outputLabel value="Birthday date" />  
                    <p:calendar value="#{patient.birthdayDate}" mode="inline" id="birthdayDate"/>  

                    <h:outputLabel value="Nationality"/>
                    <p:selectOneMenu id="nationality" rendered="true" value="#{patient.nationality}">
                        <f:selectItem itemLabel="Russian" itemValue="russian" />  
                        <f:selectItem itemLabel="Ukranian" itemValue="ukranian" />  
                    </p:selectOneMenu>

                    <h:outputLabel value="Adress" />  
                    <p:inputText id="adress" required="true" value="#{patient.adress}" />  

                    <h:outputLabel value="Phone number" />  
                    <p:inputMask id="phoneNumber" required="true" value="#{patient.phoneNumber}" mask="(999) 999-9999"/>
                </h:panelGrid>  
            </p:panel> 
            <p:commandButton value="Save" action="#{manageBean.save}" />  
        </h:form> 
```

还有我的 ManageBean：

```
@ManagedBean(name = "manageBean")
@SessionScoped
public class ManageBean implements Serializable {

    private Patient patient;
    private SessionFactory factory;

    public ManageBean() {
        factory = SessionFactoryWrap.getInstance();
    }

    public Patient getPatient() {
        patient = (Patient) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("patient");
        if (patient == null) {
            //patient = new Patient("", "", Sex.male, new Date(), Nationality.ukranian, "", "");
            patient = new Patient();
        }
        return patient;
    }

    public String save() {
        Session session = factory.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.saveOrUpdate(patient);
            tx.commit();
        } catch (HibernateException ex) {
            if (tx != null) {
                tx.rollback();
            }
            ex.printStackTrace();
        } finally {
            session.close();
        }
        patient=null;
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("patient", null);
        return "go_home";

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:37:59.683

尝试改变：

```
<c:set var="patient" value="#{manageBean.patient}" /> 
```

到：

```
<ui:param name="patient" value="#{manageBean.patient}" /> 
```

这样，您将其放入[Facelets](https://stackoverflow.com/tags/facelets/info)变量中，您将能够在稍后的 get 和 set 中引用它。

然后，将患者对象的初始化放入带`@PostConstruct`注释的方法中，如下所示：

```
@PostConstruct
public void init() {
    patient = new Patient(); // this will execute every tyme the bean is initialized
} 
```

然后只需对患者属性使用普通的 getter 和 setter（无自定义代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T18:16:38.347

您可以解决问题的另一种方法是根本不使用任何参数，而只是将`UIInput`组件直接绑定到您的属性：

```
<h:form>
    <p:panel id="panel" header="Patient" style="margin-bottom:10px;">
        <h:panelGrid columns="2">
            <h:outputLabel value="First  name" />
            <p:inputText id="firstName" required="true"
                value="#{manageBean.patient.firstName}" />
<!-- rest of JSF/Facelets code... -->
</h:form> 
```

此外，遵循 JSF 最佳实践，您可以通过两种方式重新定义托管 bean（据我所知 atm）：

*   您不需要`@SessionScoped`注释来处理 ajax 请求，这也意味着构造函数（和方法）**每个 session**`@PostConstruct`只会被调用一次。这种情况下最好的选择是注释。更多信息：[托管 Bean 范围](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)。**`@ViewScoped`**

***   您的 getter/setter 方法中不能有任何业务逻辑，因为它将为`#{managedBean.property}`您的 JSF 代码中的每个执行，更多信息：[为什么 JSF 调用 getter 多次](https://stackoverflow.com/q/2090033/1065197)。知道了这一点，最好在 bean 构造函数或`@PostConstruct`方法中只加载一次会话数据。** 

 **有了这一切，您的托管 bean 应该如下所示：

```
@ManagedBean(name = "manageBean")
@ViewScoped
public class ManageBean implements Serializable {

    private Patient patient;
    private SessionFactory factory;

    public ManageBean() {
    }

    @PostConstruct
    public void init() {
        //it would be better to initialize everything here
        factory = SessionFactoryWrap.getInstance();
        patient = (Patient)FacesContext.getCurrentInstance().getExternalContext().
            getSessionMap().get("patient");
        if (patient == null) {
            patient = new Patient();
        }
    }

    public Patient getPatient() {
        return patient;
    }

    public void setPatient(Patient patient) {
        this.patient = patient;
    }

    public String save() {
        Session session = factory.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.saveOrUpdate(patient);
            tx.commit();
        } catch (HibernateException ex) {
            if (tx != null) {
                tx.rollback();
            }
            ex.printStackTrace();
            //in my opinion, it would be better to show a descriptive message
            //instead of returning to the `go_home` view in case of errors.
        } finally {
            session.close();
        }
        //clumsy code line, no need to have it at all
        //patient = null;
        //Don't set the parameter to null, instead remove it from the session map.
        FacesContext.getCurrentInstance().getExternalContext().
            getSessionMap().remove("patient");
        return "go_home";

    }
} 
```**

# html - 将跨度视为输入元素

> ID：14542238
> 
> 赞同：14
> 
> 时间：2013-01-26T22:30:12.090
> 
> 标签：html, css, forms, icons

是否可以使用跨度触发输入？

例如

```
<div class='btn'>
    <span type="submit" aria-hidden="true" data-icon="&#xe000;"></span>
</div> 
```

我可能遗漏了一些非常明显的东西，但我基本上只想使用图标字体作为发送按钮。

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-26T23:06:56.937

如果你有表格，你可以打电话`myform.submit()`

```
<form name="myform" method="post" action="action.php">
    <div>
        <label for="email">E-Mail</label>
        <input type="text" id="email" name="email"/>
    </div>
    <div class="btn">
        <span aria-hidden="true" data-icon="&#xe000;" onclick="myform.submit()">Submit</span>
    </div>
</form> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-26T22:33:36.907

你不能放`type="submit"`，但是当你点击它时你可以执行一些Javascript代码。

**jQuery**

```
<span id="mySpan"> </span>

$("#mySpan").click(function(){

    //stuff here

}); 
```

**Javascript**

```
<span id="mySpan" onclick="MyClick()"> </span>

function MyClick()
{

  //stuff here

} 
```

**SPAN 用作提交按钮**

```
<input type="text" id="usernameInputField />
<input type="email" id="emalInputField />
<span id="mySpan" onclick="Register()"></span> 
```

现在在 Javascript..

```
function Register()
{
   //First you need to do some validation
   var username = document.getElementById("usernameInputField").value;
   var email = document.getElementById("emailInputField").value;
   //Password, Gender, etc...
   //Then start doing your validation the way you like it...
   /*if(password.length<6)
     {
         alert("Password is too short");
         return false;
     }
   */
   //Then when everything is valid, Post to the Server
   //This is a PHP Post Call
   $.post("Register.php",{ username:username,email:email } ,function(data) {
       //more codes
   });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-08T20:11:28.957

我猜奥拉夫的答案比阿里的简单。但是，当您希望在您的 php 脚本中验证表单是否已提交时，使用 Olaf 的解决方案时会出现一个小问题。

为了避免这个问题，只需添加一个隐藏输入来确认表单已发送。

```
<form name="myform" method="post" action="action.php">
    <div>
        <label for="email">E-Mail</label>
        <input type="text" id="email" name="email"/>
        <input type="hidden" id="gustav" value="1"/>
    </div>
    <div class="btn">
        <span aria-hidden="true" data-icon="&#xe000;" onclick="myform.submit()">Submit</span>
    </div>
</form> 
```

然后，在您的 PHP 中，只需查找`if($_POST['gustav']){ ...`确认表单已发送。

这样，您可以在一个页面上有多个表单，所有表单都由同一个 php 脚本收集，仍然使用 Olaf 的解决方案来触发提交。

# c# - MVVM Light DataGrid DeleteCommand

> ID：14542245
> 
> 赞同：0
> 
> 时间：2013-01-26T22:31:13.170
> 
> 标签：c#, wpf, mvvm, wpfdatagrid, mvvm-light

我的项目的简短结构是（使用 MVVM Light Toolkit）：

*   使用 DataGrid 查看（用户控件）

*   视图模型

*   带有值对象的数据访问

*   D B

我正在使用 ObservableCollection 将数据绑定到我的 DataGrid，但我坚持删除 Datagrid 中的行并将其保存到数据库。

在较旧的项目中，我使用了 System.Windows.Input 中的 CommandManager.PreviewExecuted 事件，并在那里检查了 DataGrid.DeleteCommand 的事件参数。简单地说：

```
if(e.Command == DataGrid.DeleteCommand)
{
    DataAccessContext.Sample.DeleteOnSubmit(data);
    DataAccessContext.SubmitChanges();
} 
```

我已经用谷歌搜索了几个小时，但没有找到正确的方法。我尝试使用 PassEventArgsToCommand，但事件 DataGrid.DeleteCommand 或 CommandManager.PreviewExecuted 未触发，SelectionChangedCommand 运行良好，但我不知道如何检查重要的 DataGrid.DeleteCommand。

这是我的xml：

```
<DataGrid x:Name="dataGrid1" ItemsSource="{Binding Items}" CanUserAddRows="True" CanUserDeleteRows="True" AutoGenerateColumns="False" Height="391" HorizontalAlignment="Left" VerticalAlignment="Top" Width="auto" Margin="2,0,0,0" RowEditEnding="dataGrid1_RowEditEnding" CellEditEnding="dataGrid1_CellEditEnding">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="SelectionChanged">
                                <cmd:EventToCommand
                                Command="{Binding SelectionChangedCommand,Mode=OneWay}"
                                CommandParameter="{Binding SelectedItems,ElementName=dataGrid1}">
                                </cmd:EventToCommand>
                            </i:EventTrigger>
                            <i:EventTrigger EventName="DataGrid.DeleteCommand"> //I've also tried PreviewExecuted and CommandManager.PreviewExecuted as EventName
                                <cmd:EventToCommand
                                    Command="{Binding SelectedItems,Mode=OneWay}"
                                    CommandParameter="{Binding ExecutedRoutedEventArgs, ElementName=dataGrid1}"
                                    PassEventArgsToCommand="True"
                                    ></cmd:EventToCommand>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                            <DataGrid.Columns>
                            <DataGridTextColumn Header="Name" Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}" Width="auto"></DataGridTextColumn>
                        <DataGridTextColumn Header="Vorname" Binding="{Binding Surname, UpdateSourceTrigger=PropertyChanged}" Width="auto"></DataGridTextColumn>
            </DataGrid.Columns>
                    </DataGrid> 
```

感谢您的回答和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T16:57:10.907

尝试禁用 DataGrid 上的删除，而是将 Delete 键连接到一个命令（通过 KeyBinding），该命令将执行您的保存并从源集合中删除该行。

看看这个[问题](https://stackoverflow.com/questions/9412743/how-to-bind-delete-action-in-wpf-datagrid-to-a-command-or-property-in-view-mod)。

# iphone - 如何为 UIPickerView 设置数据？

> ID：14542247
> 
> 赞同：3
> 
> 时间：2013-01-26T22:31:27.100
> 
> 标签：iphone, xcode, uipickerview

我正在尝试添加 PickerView - 但我看到黑屏......我做错了什么？？？

```
UIPickerView *myPickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];

    [self.view addSubview:myPickerView]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T22:45:09.807

实现[UIPickerViewDataSource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html)方法：

```
– numberOfComponentsInPickerView:
– pickerView:numberOfRowsInComponent: 
```

和[UIPickerViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html)方法：

```
– pickerView:titleForRow:forComponent: 
```

不要忘记设置属性：

```
UIPickerView * myPickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
myPickerView.delegate = self;
myPickerView.dataSource = self;
[self.view addSubview:myPickerView]; 
```

在 .h 文件中，记得放：

```
<UIPickerViewDelegate, UIPickerViewDataSource> 
```

我通常使用`NSMutableArray`填充字符串来填充数据。希望有帮助！

# c++ - 使用继承重载模板链表中的 << 运算符

> ID：14542252
> 
> 赞同：1
> 
> 时间：2013-01-26T22:32:10.963
> 
> 标签：c++, templates, linked-list, operator-overloading

我正在尝试在模板链接列表中重载 << 运算符。

简而言之，我有一个抽象类和两个继承了他的派生类。如果我使用 dynamic_cast，所有 3 个类都有 operator << 编写和运行良好。

但是，当我尝试在模板链接列表中使用运算符 << 时，由于某种原因，我要么得到地址，要么得到链接器错误。

**抽象类 - 播放器**

```
#ifndef PLAYER_H_
#define PLAYER_H_
#include <iostream>

class Player {
private:
  const char* m_name;
  int age;
public:
  static int numofPlayers;
  Player(const char*,int);
  virtual ~Player();
  friend std::ostream& operator<<(std::ostream& out, const Player &p);
};

std::ostream& operator<<(std::ostream& out, const Player &p);

#endif 
```

**派生类之一**

```
class Goalkeeper:public Player {
private:
  int Saved_Goals;
  int Shirt_Number;
public:
  Goalkeeper(const char* name,int age, int number);
  ~Goalkeeper();

  friend std::ostream& operator<<(std::ostream& out, const Goalkeeper& s);
};

std::ostream& operator<<(std::ostream& out, const Goalkeeper& s); 
```

基础和派生的两个 << 运算符都运行良好！只有当我尝试在模板链表中使用它们时，我才会得到地址而不是数据：

**模板链表**

```
template <typename T>
class Node {
  T* m_data;
  Node* next;
public:
  Node ();
  Node(T*, Node<T>*);
  ~Node();
  T* getData ()const {return this->m_data;};
  Node* getNext()const{return this->next;};
  template <typename T>
  friend std::ostream& operator<<(std::ostream &output, const Node<T>& Nd );
};

template <typename T>
std::ostream &operator << (std::ostream &output,const Node<T>& Nd ) {
  output<<Nd.m_data<<endl;
  return output;
}

template <typename T>
void List<T>::PrintMe() const {
  Node<T>* temp=this->head;
  while(temp) {
    cout<<*temp;
    temp=temp->getNext();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:53:33.343

您正在打印指针。使用取消引用运算符打印出该值。

```
output<<*(Nd.m_data)<<endl; 
```

另外，请在发布前缩进您的代码！

评论中的问题：

> 它现在打印数据，但仅用于基类而不是派生类，出于某种原因

因为方法重载是基于表达式的**静态类型。**因此用 a `List<Base>`，调用的方法是`operator<<(ostream&, const Base&)`。尝试a `List<Derived>`，您的代码将起作用！您需要一个虚函数调用，它在基类的 operator<< 中为您完成工作，以使包含这两种元素的列表工作。

# php - 显示带有异常消息的变量值

> ID：14542253
> 
> 赞同：0
> 
> 时间：2013-01-26T22:32:12.073
> 
> 标签：php, debugging, magento, error-handling

我正在尝试通过使用非常基本的方法检查每个阶段的变量/对象来调试发票问题...

我有以下代码

```
$capOrder = $payment->getOrder();
$capTransID = $capOrder->getPayment()->getLastTransId();

if(!empty($capTransID )){

Mage::throwException(Mage::helper('paygate')->__('zaffar_checking for trans  ID. its not EMPTY'));

} 
```

我的输出看起来像

> zaffar_checking 反式 ID。它不是空的

我想`$capTransID`用我的自定义错误消息来回显 的值...比如

> zaffar_checking 反式 ID。它不是 EMPTY——值为 XXXX

我该怎么做？？我无法找到将变量与错误消息组合/连接的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:36:29.413

将此更改为

```
if(!empty($capTransID )){

Mage::throwException(Mage::helper('paygate')->__("zaffar_checking for trans  ID. its not EMPTY--value is $capTransID"));

} 
```

# asp.net-mvc - SimpleMemership CreateUserAndAccount 自定义

> ID：14542257
> 
> 赞同：11
> 
> 时间：2013-01-26T22:32:31.073
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, webmatrix, simplemembership

我正在尝试向`UserProfile`模型中的类添加一个新属性

```
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email Address")]
    public string Email { get; set; } \\this is the new property
    public virtual IList<Game> Games { get; set; }
} 
```

我正在尝试将它添加到我的`Configurations.cs`文件中的种子方法中

```
private void SeedMembership()
    {
        WebSecurity.InitializeDatabaseConnection("MafiaContext",
            "UserProfile", "UserId", "UserName", autoCreateTables: true);

        var roles = (SimpleRoleProvider)Roles.Provider;
        var membership = (SimpleMembershipProvider)Membership.Provider;

        if (!roles.RoleExists("Administrator"))
        {
            roles.CreateRole("Administrator");
        }
        if (membership.GetUser("drew", false) == null)
        {

            membership.CreateUserAndAccount(
                "drew", 
                "password", false,
                new { Email = "myemail@gmail.com" }); \\ this line errors
        }
        if (!roles.GetRolesForUser("drew").Contains("Administrator"))
        {
            roles.AddUsersToRoles(new[] { "drew" }, new[] { "Administrator" });
        }
    } 
```

但是，我收到一个错误：

`Error 2 Argument 4: cannot convert from 'AnonymousType#1' to 'System.Collections.Generic.IDictionary<string,object>' C:\Code\Mafia\Mafia.EF\Migrations\Configuration.cs 65 21 Mafia.EF`

我遵循了示例，例如：[http ://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-特性/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)

但我什么都想不出来......我的`WebMatrix.WebData`版本是`v4.0.30319`

有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T22:43:34.720

试试这样：

```
private void SeedMembership()
{
    WebSecurity.InitializeDatabaseConnection(
        "MafiaContext",
        "UserProfile", 
        "UserId", 
        "UserName", 
        autoCreateTables: true
    );

    if (!Roles.RoleExists("Administrator"))
    {
        Roles.CreateRole("Administrator");
    }

    if (!WebSecurity.UserExists("drew"))
    {
        WebSecurity.CreateUserAndAccount(
            "drew", 
            "password",
            new { Email = "myemail@gmail.com" },
            false
        );
    }

    if (!Roles.GetRolesForUser("drew").Contains("Administrator"))
    {
        Roles.AddUsersToRoles(new[] { "drew" }, new[] { "Administrator" });
    }
} 
```

这是[`nice tutorial`](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)关于您可能会考虑使用的 SimpleMembershipProvider 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:49:02.877

由于[SimpleMembershipProvider.CreateUserAndAccount](http://msdn.microsoft.com/en-us/library/gg537973%28v=vs.111%29.aspx)方法的最后一个参数应该是`IDictionary<string, Object>`你的代码应该重写如下：

```
 membership.CreateUserAndAccount(
            "drew", 
            "password",
            new Dictionary<string, object> { new { "Email", "myemail@gmail.com" } }
        ); 
```

# xml - 如何合并具有相同属性的兄弟元素？

> ID：14542260
> 
> 赞同：1
> 
> 时间：2013-01-26T22:33:06.380
> 
> 标签：xml, haskell, hxt

考虑这样的 XML 输入：

```
<root>
  <sub>
      <p att1=0 att2=1><i>foo</i></p>
      <p att1=1 att2=1><i>bar</i></p>
      <p att1=0 att2=0><i>baz</i></p>
      <p att1=0 att2=1><i>bazz</i></p>
  </sub>
</root> 
```

应该转换为：

```
<root>
  <sub>
      <p att1=0 att2=1><i>foo</i><i>bazz</i></p>
      <p att1=1 att2=1><i>bar</i></p>
      <p att1=0 att2=0><i>baz</i></p>
  </sub>
</root> 
```

（因为 和 的两个`p`父元素都是兄弟姐妹`<i>foo</i>`并且`<i>bazz</i>`具有相同的属性。）

如何用 HXT 箭头进行这样的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:49:57.277

好的，这是我的尝试：代码首先收集兄弟姐妹的父级的所有属性列表，然后对所有不同的属性列表进行合并：

```
{-# LANGUAGE Arrows #-}

module Main
where

import Data.List
import Text.XML.HXT.Core

example="\
\<root>\
\  <sub>\
\      <p att1=\"0\" att2=\"1\"><i>foo</i></p>\
\      <p att1=\"1\" att2=\"1\"><i>bar</i></p>\
\      <p att1=\"0\" att2=\"0\"><i>baz</i></p>\
\      <p att1=\"0\" att2=\"1\"><i>bazz</i></p>\
\  </sub>\
\</root>"

get_attrs name = getChildren >>> hasName name >>> proc x -> do
   a <- listA (((
          getAttrName
          &&& (getChildren >>> getText))  ) <<< getAttrl ) -< x
   returnA -< a

has_attrs atts = proc x -> do
   a <- listA (((
           getAttrName
           &&& (getChildren >>> getText))  ) <<< getAttrl ) -< x
   if (a == atts)
   then returnA -< x
   else none -<< ()

mk_attrs atts = map f atts
  where
    f (n, v) = sqattr n v

mergeSiblings_one inp name att = catA (map constA inp)
    >>> mkelem name
               (mk_attrs att)
               [getChildren
                >>> hasName name  >>> has_attrs att >>> getChildren ]

mergeSiblings_core name = proc x -> do
    a <- listA (get_attrs name >>. (sort.nub) ) -< x
    b <- listA this -< x
    c <- listA (getChildren >>> neg (hasName name)) -< x
    catA ((map (mergeSiblings_one b name) a) ++ (map constA c) ) -<< ()

is_parent_of name = getChildren >>> hasName name

mergeSiblings name = processTopDownUntil (
        is_parent_of name `guards` mergeSiblings_core name
    )

stuff = mergeSiblings "p"

main :: IO ()
main
    = do
      x <- runX ( 
             configSysVars  [withTrace 1]
             >>> readString [withValidate no
                           ,withPreserveComment yes
                           ,withRemoveWS yes
                        ] example
             >>> setTraceLevel 4
             >>> stuff >>> traceTree >>> traceSource
           )
      return () 
```

## 示例的输出

```
<root>
  <p att1="0" att2="0">
    <i>baz</i>
  </p>
  <p att1="0" att2="1">
    <i>foo</i>
    <i>bazz</i>
  </p>
  <p att1="1" att2="1">
    <i>bar</i>
  </p>
</root> 
```

## 很高兴有

上面的版本将合并的子节点放在前面，将不匹配的子节点放在父节点的新子节点列表中：一个不错的变化是：将每个合并的子节点插入第一个旧兄弟节点的旧位置并且不要更改非合并节点的顺序。例如那个

```
<other>1</other><p><a/></p><other>2</other><p><b/></p> 
```

被转化为

```
<other>1</other><p><a/><b/></p><other>2</other> 
```

而不是：

```
<p><a/><b/></p><other>1</other><other>2</other> 
```

## 免责声明

由于我是 HXT 和箭头的新手 - 如果有更简洁/HXT0 惯用/优雅的答案，我不会感到惊讶。

# c - 访问头文件中的结构

> ID：14542264
> 
> 赞同：0
> 
> 时间：2013-01-26T22:33:35.287
> 
> 标签：c

我在头文件中定义了这个：

```
typedef struct Code {
   char *data;
   unsigned short size;
} Code; 
```

这两个在我的 .c 文件中：

```
typedef struct MemBlock {
   char data[BLOCK_SIZE];
   int bytesUsed;
   struct MemBlock *next;
} MemBlock;

typedef struct CodeSet {
   Code *codes;
   MemBlock *memBlock;
   int size;
   int index;
} CodeSet; 
```

我正在尝试在代码中设置数据，例如：

```
mySet->codes[mySet->index]->size = 1; 
```

但是每次我尝试使用 -> 在我输入代码 [] 之后都会出错。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:39:04.023

您应该使用`->`来访问指向`struct`. 由于取消引用的数组不是指针，因此应该使用`.`而不是访问它`->`。

因此正确的语法是：`mySet->codes[mySet->index].size = 1;`因为`codes[]`是数组而不是指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:35:28.203

`mySet->codes[mySet->index]`不是指针，它*是*一个`struct Code`.

使用`mySet->codes[mySet->index].size`.

# javascript - jquery/javascript事件后刷新页面？

> ID：14542271
> 
> 赞同：2
> 
> 时间：2013-01-26T22:34:11.227
> 
> 标签：javascript

有人可以告诉我如何在发生以下 jquery 事件后添加自动页面刷新吗？

谢谢。

```
<script>
    $(document).ready(function() {
        setTimeout(function() {
            $(".infobox-forum").fadeOut("slow", function () {
                $("infobox-forum").remove();
            });         
        }, 2000);
     });         
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:36:16.683

是的，您可以使用它`location.reload()`来执行此操作：

```
$(document).ready(function(){
    setTimeout(function(){
        $(".infobox-forum").fadeOut("slow", function () {
            $("infobox-forum").remove();
            location.reload(); // <---
        });
    }, 2000);
}); 
```

另一种可能性是改为使用`window.location.href = window.location.href`。要决定选择哪一个，请参阅[此问题](https://stackoverflow.com/questions/2405117/difference-between-window-location-href-window-location-href-and-window-location)。

# javascript - 数组和切片的奇怪行为

> ID：14542278
> 
> 赞同：4
> 
> 时间：2013-01-26T22:34:58.767
> 
> 标签：javascript

当我遇到一些奇怪的事情时，我正在使用 JavaScript 中的一些数组。这是我的代码：

```
var origArray = new Array("one","two","three","four","five","six","seven","eight");

var newArray = origArray.slice(1,3);
origArray[1] = "octopus";
console.log(newArray.join()); //prints two,three 

var origArray = new Array(["one","two"],["three","four"],["five","six"],["seven","eight"]);

var newArray = origArray.slice(1,3);
origArray[1][0] = "octopus";
console.log(newArray.join()); //prints octopus,four,five,six 
```

我不明白为什么`newArray`在第二种情况而不是第一种情况下会受到影响。这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T22:39:08.560

*这是浅拷贝*和*深拷贝*之间的区别。

`slice`结果是与原始对象不同的另一个对象，但这并不意味着*数组*中的对象（一直向下）被复制。如果这些内部对象恰好是数组，*它们*会在副本和原始对象之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:39:32.700

因为数组是引用，所以*切片*复制引用而不是值。

# oauth-2.0 - Box iOS SDK 在调用 initializeSessionWithAuthToken 时总是返回 BoxCallbackResponseUserCancelled

> ID：14542279
> 
> 赞同：0
> 
> 时间：2013-01-26T22:34:58.977
> 
> 标签：oauth-2.0, box-api

附：Box 的 OneCloud iOS SDK 于 2012 年 12 月 10 日更新。

我们自己管理 Oauth2 身份验证过程，并成功地列出文件并上传它们的新版本，直接调用 REST HTTP 请求，如[完整文档](http://developers.box.com/docs/)中所述。

我们现在想开始使用 SDK，而不必替换所有当前工作的代码。如 Box.h 头文件中所述，我们使用与上述相同的令牌调用**initializeSessionWithAuthToken** ，但它始终会在 on.after 回调块中返回**BoxCallbackResponseUserCancelled 。**

*来自 Box.h 标头*

```
// You can also use the Box web APIs detailed at http://developers.box.com to implement your own user login.
// If you choose to do that, please call initializeSessionWithAuthToken:callbacks: with the auth token you
// obtain during login to take advantage of the library after authentication.

// If there is already a user logged in, this method is a no-op. No callbacks will be called in that case.
// Otherwise, this method initializes the authenticating user's session. You can expect your callbacks' on.before to
// be called immediately before initialization. on.after will be called upon success or failure of the operation.
// The response argument will be set accordingly.
+ (void)initializeSessionWithAuthToken:(NSString *)authToken callbacks:(BoxOperationCallbacksDefine)callbacks; 
```

有人成功使用此方法或找到有关返回的错误代码的扩展文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:53:39.330

这可能是因为 iOS SDK 是针对我们的 V1 API 构建的，它不支持 OAuth 2。这是我们意识到的差异，我们正在努力移植 iOS SDK 以使用 V2 API。

# informatica-powercenter - Informatica 存储库信息

> ID：14542281
> 
> 赞同：0
> 
> 时间：2013-01-26T22:35:27.473
> 
> 标签：informatica-powercenter

我是 informatica 的新手，并试图了解 informatica 在哪个数据库中存储所有信息，如目标、源、转换、存储库？

如果它存储在表中，我可以查询这些表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:04:55.577

您要从存储库表中寻找什么样的信息？正如 Marek 所提到的，不鼓励直接查询存储库数据库，因为损坏的可能性更大。

Informatica 提供报告服务，您可以将其指向 PowerCenter 存储库并在元数据上运行报告。

如果您必须查询 PowerCenter 数据库，建议查询 REP_ 视图，因为它们更有意义并且可能提供您正在寻找的信息。

-萨达戈潘

# jquery - 动态元素上的jQuery多次单击事件不起作用

> ID：14542300
> 
> 赞同：1
> 
> 时间：2013-01-26T22:37:08.407
> 
> 标签：jquery, asp-classic

我首先想说的是，我花了一整天时间寻找这个问题的答案，但在任何地方都找不到。我希望有人可以在这里帮助我。我根本没有使用 jQuery 的经验，所以请耐心等待。:)

我在经典 ASP 中创建了代码，该代码生成从数据库中提取的动态数据表。我希望能够单击表中的 DIV 并让它隐藏数据并显示输入字段。我编写了执行此操作的代码，但它仅针对出现的第一个结果执行此操作，对其余结果无效。CLASS 名称和 ID 都是唯一的，但仍然不允许 jQuery click 事件在第 2、3、4 等行上起作用。

这是我的 jQuery 代码：

```
<script>
$(document).ready(function(){
 var taskId = $("div[class*='hide']").attr("id");
 var edittaskId = $("div[class*='show']").attr("id");
   $("#" + taskId).click(function(){
   $("#" + taskId).hide();
   $("#" + edittaskId).show();
    });
});    
</script> 
```

这是我拥有的 HTML/ASP 代码：

```
 <div id="hide_<%=rs("id")%>" class="hide<%=rs("id")%>" align="right"><%=F_task_due_date%></div>
    <div id="show_<%=rs("id")%>" class="show<%=rs("id")%>" style="display: none;">
    <div>
    <input type="text" name="edit_task_due_date" value="<%=F_task_due_date%>" />
    </div>
    </div>
    </div> 
```

正如我所说，上面的代码非常适用于第一个 DIV，但不适用于表中它下面的其他 DIVS。如何获取此 jQuery 代码以允许我单击与 jQuery 代码中的响应匹配的任何其他 DIV 元素，并让它们隐藏/显示？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:55:59.200

如果您尝试从一组元素中获取一个值，例如属性或文本或 html，则只能返回一个值，它将是集合中第一个元素的值。

相反，您需要在事件处理程序中处理每个实例案例的值。在类中使用唯一标识符很少有必要或有益。

如果您要删除和类的`id`部分，您可以简单地执行类似的操作`show``hide`

```
$('.hide, .show').click(function(){
  /* "this" is the element clicked*/
   var taskId=this.id;
   $('#hide_'+taskId, #show_'+taskId).toggle();

}); 
```

不需要 ID 的更简单的方法是：

```
$('.hide, .show').click(function(){      
       $(this).toggle().siblings('.hide,.show').toggle();
}); 
```

# php - 模块化分离

> ID：14542305
> 
> 赞同：0
> 
> 时间：2013-01-26T22:38:04.987
> 
> 标签：php, codeigniter, module, hmvc

我正在为我的 Codeigniter 应用程序使用 HMVC 模块化分离，并试图弄清楚如何使用我设置的模板来尝试这个。可能有更好的方法来处理这个问题，我不确定，但如果有人能提出建议，我会全力以赴。这是我当前的文件系统。如下面的文件夹所示，Supr 是我正在使用的当前主题模板。

每个模块控制器内部都有一个名为 $view_file 的变量。这是传递给正文内容视图页面的变量，并告诉它在我的控制面板的内容包装器中显示哪个视图文件。

我需要弄清楚的是如何在 if 语句中添加 file_exists 函数，以便它查看变量的值是否可以查看该文件是否存在，但不确定如何使用此 HMVC 模块分离框架来完成此操作。我需要帮助理解如何做到这一点的原因是因为我不知道如何让它知道要查看哪个模块视图。

我还包含了我的正文内容视图代码，其中包含一个 if 语句来找出它需要加载的文件。

[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)

```
application/
    modules/
        blog/
            controllers/
                blog.php
            models/
                blog_model.php
            views/
                blog_view.php
        dashboard/
            controllers/
                dashboard.php
            models/
                dashboard_model.php
            views/
                dashboard_view.php
    views/
        supr/
            cpanel/
                header.php
                footer.php
                body_content.php

<!--Body content-->
<div id="content" class="clearfix">
    <div class="contentwrapper"><!--Content wrapper-->

    <?php 

    if ((empty($view_file)) || (!isset($view_file)) || (trim($view_file) == '')) //add file exists to if statement for module view file being requested
    {
        $this->load->view('supr/body_unknown_view');
    }
    else
    {
        $this->load->view('supr/cpanel/pages/' . $view_file);  // Change to module speration view file 
    }

    ?>
</div><!-- End contentwrapper -->
</div><!-- End #content --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T05:44:57.813

这是您可以用于视图正文内容的一种方法，利用 OOP 扩展您的控制器，使用 MY_Controller 在应用程序核心下创建 MY_Controller 类。

```
class MY_Controller extends MX_Controller { 
     // not using Modular extentions then extend with CI_Controller

    function __construct(){
          parent::__construct;
    }

    function build($view=null,$data=array()){

          $load_view = 'supr/body_unknown_view';

          if(strlen($view))
          {
               $load_view = 'supr/cpanel/pages/' . $view;
          }

        $body = $this->load->view($load_view,$data,TRUE);

        $this->load->view('supr/cpanel/body_content',array('body'=>$body));

    }

}

//blog controller
class blog extends MY_Controller { 

        function __construct(){
              parent::__construct;
        }

        function index(){
           //anydata
           $data['blog_content'] = 'blog content';
           $this->build('blog_view',$data);
        }

    }

<!--Body content-->
<div id="content" class="clearfix">
    <div class="contentwrapper"><!--Content wrapper-->

    <?php echo $body; ?>

</div><!-- End contentwrapper -->
</div><!-- End #content --> 
```

# assembly - 为什么 x86_64 程序集执行“/bin/bash”段错误？

> ID：14542309
> 
> 赞同：0
> 
> 时间：2013-01-26T22:38:44.213
> 
> 标签：assembly, x86, x86-64, disassembly

我一直在重新学习和编写一些汇编代码，对于初学者来说是非常基本的东西。我在 x86_64 上运行 Ubuntu，但是我跟随的教程是在 32 位 x86 上完成的。

我在下面包含了简短的汇编程序，它可以很好地组装和链接，但是在运行时会出现段错误。我打赌我的错误是关于 32 位和 64 位指令之间的行和内存使用情况的一些混淆/混淆。例如，我`movq`在所有寄存器上使用指令`r**`（我收集到的 32 位寄存器的 x86_64 版本）——但这可能是错误的。

如果有人能够在这里解释这个问题，我真的很感激，我觉得如果我更好地理解原因，它真的有助于避免将来出现这些类型的问题。

```
 .data
Bash:
    .asciz "/bin/bash"
Null1:
    .int 0
AddrToBash:
    .int 0
Null2:
    .int 0

.text
.globl _start

_start:
movq $Bash, AddrToBash
movq $59, %rax
movq $Bash, %rbx
movq $AddrToBash, %rcx
movq $Null2, %rdx
syscall 

Exit:
movq $60, %rbx
movq $1, %rax
syscall 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:55:38.380

1.  系统调用参数在`%rsi`, `%rdi`, `%rdx`. 请参阅[x86-64 上 UNIX 和 Linux 系统调用的调用约定是什么](https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-on-x86-64)。
2.  `.int 0`太短了，应该`.quad 0`三个地方都有。

# python - 用十六进制转义值列出 Python 中的可读字符串

> ID：14542310
> 
> 赞同：0
> 
> 时间：2013-01-26T22:38:44.660
> 
> 标签：python, list, escaping, hex, iso-8859-1

我有一个这样的列表：

```
['<option value="284">\xc2\xa0\xc2\xa0\xc2\xa0\xc2\xa0 Historia </option>', '<option value="393">\xc2\xa0\xc2\xa0\xc2\xa0\xc2\xa0 H\xc3\xa4lsa & sk\xc3\xb6nhet </option>'] 
```

如何将此列表转换为具有实际可读元素的列表？

我相信它在[ISO 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:47:21.537

使用方法解码字符串值`.decode()`；您实际上正在查看[UTF-8](http://en.wikipedia.org/wiki/UTF-8)数据：

```
>>> print lst[0].decode('utf8')
<option value="284">     Historia </option>
>>> print lst[1].decode('utf8')
<option value="393">     Hälsa & skönhet </option> 
```

第一个字节代表[Unicode](http://en.wikipedia.org/wiki/Unicode)代码点 U+00a0，一个不间断的空格（`&nbsp;`作为 HTML 实体）：

```
>>> lst[0].decode('utf8')
u'<option value="284">\xa0\xa0\xa0\xa0 Historia </option>'
>>> lst[1].decode('utf8')
u'<option value="393">\xa0\xa0\xa0\xa0 H\xe4lsa & sk\xf6nhet </option>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:54:05.467

看起来像 UTF-8：

```
>>> s=['<option value="284">\xc2\xa0\xc2\xa0\xc2\xa0\xc2\xa0 Historia </option>', '<option value="393">\xc2\xa0\xc2\xa0\xc2\xa0\xc2\xa0 H\xc3\xa4lsa & sk\xc3\xb6nhet </option>']
>>> for v in s:
...     print v.decode('utf8')
...     
<option value="284">     Historia </option>
<option value="393">     Hälsa & skönhet </option> 
```

# c# - 删除了我的 App.xml 和 App.xml.cs 文件

> ID：14542311
> 
> 赞同：3
> 
> 时间：2013-01-26T22:38:47.927
> 
> 标签：c#, wpf, visual-studio-2012

愚蠢的是，我错误地删除了我的 App.xml 和 App.xml.cs 文件。

我可以在使用源代码控制时重新创建这些文件（有点过时，令人遗憾），但是当我重新创建这些文件并将它们添加回我的项目时，VS 无法构建项目，因为我被告知我没有有一个入口点。

我的解决方法是为应用程序条目创建一个带有“Main”关键字的加载类，并与项目关联，但是在 VS 中重新创建和重新关联我的 App.xml 和 App.xml.cs 文件的正确过程是什么我的项目。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:48:05.370

你的问题引起了我的兴趣，所以我创建了一个新项目并删除了`App.xaml`和`App.xaml.cs`文件。然后我在项目中添加了一个窗口，并将其在文件属性编辑器中的构建操作更改为`ApplicationDefinition`from `Page`，然后我`xaml`将`xaml.cs`文件更改为应用程序类。之后它正常工作。

IE

**应用程序.xaml**

```
<Application x:Class="WpfApplication1.App"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        StartupUri="MainWindow.xaml">
    <Application.Resources>

    </Application.Resources>
</Application> 
```

**应用程序.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Windows;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application 
    {

    }
} 
```

# android - Eclipse 可执行启动器无法找到它的配套共享库

> ID：14542319
> 
> 赞同：4
> 
> 时间：2013-01-26T22:39:26.880
> 
> 标签：android, eclipse

我是一名 Java 初学者，正在阅读 Rogers Cadenhead 的《Java In 24 Hours Sixth Edition》一书。我在第 24 章“创建 Android 应用程序”。这本书告诉我在我的计算机上下载 Eclipse 和 Android SDK 并解压缩它们进来的 zip 文件。我把它们放在同一个父文件中（`C:\Documents and Settings\Administrator\My Documents\Downloads`）。然后这本书告诉我我现在可以运行 Eclipse，但我收到一条消息而不是说

> “Eclipse 可执行启动器无法找到它的配套共享库”。

有没有办法来解决这个问题？我只需要重新安装 SDK 和 Eclipse 吗？我已经下载了适用于 windows 64 位的 SDK，并且我有 windows 64 位。任何有关如何解决此问题的信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T14:53:15.783

确保 launcher.library 目录中的 .dll 具有 EXECUTE 权限。Windows中的DLL需要执行权限...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T07:44:55.097

打开 eclipse.ini 并 caopy&paste 这个...

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
C:\Program files\Java\jdk1.6.0_26\bin\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx1024m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:58:08.390

再次解压eclipse。此消息表明 eclipse 文件夹未正确提取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T18:08:50.113

我也遇到了这个错误。对我来说，这似乎是一个简单但相当奇怪的问题。Eclipse 需要“plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar”才能启动（参见 eclipse.ini）。出于某种原因，集成的 windows 解压缩没有正确提取插件文件夹中的所有文件。由于某种原因，再次运行它似乎有效。因此，请检查所有文件是否已正确提取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-04T23:23:31.000

如果我是你，我不会下载 ADT 包，因为我上次尝试时该版本附带的 Eclipse 有问题，最后我删除了那个 Eclipse 并自行下载了 Eclipse Kepler，并自行下载了 SDK

如果仍然无法解决，请尝试：

分别下载 Eclipse 和 SDK，然后按照 SDK 网站上的说明启用它。

# bash - 在 Cloud9.io 上的交互式 shell 中从 bash 脚本调用函数

> ID：14542323
> 
> 赞同：0
> 
> 时间：2013-01-26T22:39:58.783
> 
> 标签：bash

我没有使用 shell 脚本的经验。我做的：

```
#!/bin/bash

function hac() {
    echo "test: $1"
    javac $1.java && java $1
}

hac SquareDriver 
```

所以我在工作目录中有 SquareDriver.class，当我调用 ./scriptname.sh

但是，我想这样做，所以我可以在命令行上调用 hac 文件名，它会从这个文件中执行函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:07:23.343

将函数定义放在您的`~/.bashrc`. 这将`hac`在您的所有终端会话中可用。

# git - 撤消 git 过滤器分支

> ID：14542326
> 
> 赞同：77
> 
> 时间：2013-01-26T22:40:56.660
> 
> 标签：git

我不小心使用 git filter-branch 从我的仓库中删除了一个文件：

```
git filter-branch -f --index-filter 'git rm --cached --ignore-unmatch images/thumb/a.JPG' HEAD 
```

我该如何撤消此操作？是否可以？即文件是否被永久删除？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-01-27T04:52:09.923

使用时`git filter-branch`，会创建一个备份文件

```
refs/original/refs/heads/master 
```

如果您在分支中使用了该命令`master`。您可以检查目录中是否有备份`.git/refs`。考虑到这一点，您可以使用此备份来恢复您的文件：

```
git reset --hard refs/original/refs/heads/master 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-01-16T00:04:41.480

可能比仅仅对原始 master 进行硬重置更合适的方法是恢复**所有**由 重写的 refs `git filter-branch`，甚至可能在之后删除备份 refs 以便能够在`git filter-branch`没有 的情况下再次调用`--force`：

```
for orig_ref in $(git for-each-ref --format="%(refname)" refs/original/); do
    git update-ref "${orig_ref#refs/original/}" $orig_ref
    git update-ref -d $orig_ref  # to also remove backup refs
done 
```

在那之后：

```
git reset --hard master 
```

## UPD。

这是（可以说）在没有外壳 for 循环的情况下执行相同操作的更 git'ish 方式：

```
git for-each-ref --format="update %(refname:lstrip=2) %(objectname)" refs/original/ | git update-ref --stdin
git for-each-ref --format="delete %(refname) %(objectname)" refs/original/ | git update-ref --stdin 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-08T12:03:20.513

@jthill在[这个答案](https://stackoverflow.com/a/23483576/281545)中给出了一个更清洁的解决方案。

```
git fetch . +refs/original/*:* 
```

如该答案中所述，如果要恢复当前签出的分支，您可能需要分离 HEAD。

要删除`refs/original`参考，请发出：

```
git for-each-ref refs/original --format='delete %(refname) %(objectname)' | git update-ref --stdin 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-26T22:50:22.770

您的旧分支提示可能会保留在您的[reflog](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)中。然后，您应该能够使用所有先前的历史记录检查未更改的提交。

# fedora - 编写可移植的 RPM 规范文件

> ID：14542329
> 
> 赞同：3
> 
> 时间：2013-01-26T22:41:32.333
> 
> 标签：fedora, packaging, rpm, opensuse, rpmbuild

我开始为我们的软件创建 RPM 包，但我不确定我是否按预期使用了系统。我想创建一个 RPM 规范/源代码包，我可以在不同的 RPM 系统上构建它，例如 fedora、centos 和 opensuse（这是我喜欢 rpm 的地方）。

但是，我开始意识到 eg 中的许多脚本都`%pre`依赖`%post`于发行版。例如，我的 pre 脚本停止 Apache：

```
service httpd stop 
```

但是，此命令在 OpenSUSE 上不起作用。这只是一个示例，我的脚本中还有许多其他内容在发行版之间有所不同。

那么通常的方法是什么？我应该为每个发行版创建单独的 .spec 文件吗？或者有什么技巧可以让东西变得便携？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:41:40.143

将 shell 脚本添加到执行命令的规范文件的顶部，如下所示：

`%define distribution %(sh -c "[ -f /etc/redhat-release ] && cat /etc/redhat-release | awk '{print $1}' || [ -f /etc/SuSE-release ] && head -n1 /etc/SuSE-release | awk '{print $1}' || echo 'Unknown'")`

在您的`%pre`等`%post`脚本中，您可以执行以下操作：

```
distribution=${distribution}
case $distribution in
    "Fedora")
        # do fedora stuff
    ;;
    "openSUSE")
        # do suse stuff
    ;;
    *)
        # handle error condition
        exit 1
    ;;
esac 
```

并添加您需要的任何分发字符串及其相关脚本。

# booksleeve - 使用 BookSleeve 保存对象集合

> ID：14542331
> 
> 赞同：5
> 
> 时间：2013-01-26T22:41:33.567
> 
> 标签：booksleeve

我是 Redis 和 BookSleeve 的新手。我正在评估是否应该使用 BookSleeve 或 ServiceStack.Redis。

ServiceStack 看起来更直接，但我喜欢 BookSleeve 提供的流水线的想法。

我有 Redis 和 BookSleeve 正在运行，并且获取和设置字符串很容易，但我正在努力寻找设置和获取对象集合的示例，例如我的 pocos。

```
public class MyType
{
....
}

IEnumerable<MyType> types = .... 
```

如何使用 BookSleeve 获取和设置这些？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T10:00:42.240

BookSleeve 公开 API 以读取/写入字符串和 blob (byte[])，但它不会强制您关闭任何特定的序列化路线，或指示集合是否应存储为单个值，而不是列表等。

基本上，使用 BookSleeve，您可以通过任何您喜欢的序列化程序（XML、json、protobuf 等）单独序列化，然后*发送*. 这通常只有大约 2 或 3 行代码（通常涉及 MemoryStream）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:04:14.367

使用 ServiceStack.Redis 时，只需：

```
var redisClient = new RedisClient();
redisClient.StoreAll(myTypes); 
```

不确定您正在寻找哪些**流水线功能，但您可以使用**[ServiceStack.Redis 的事务 API](https://github.com/ServiceStack/ServiceStack.Redis/wiki/RedisTransactions)（始终流水线化）创建自定义流水线操作，或者如果您不希望操作在您可以使用的事务中执行`Redis.CreatePipeline()`- 请参阅这些[测试举一些例子](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/tests/ServiceStack.Redis.Tests/RedisPipelineCommonTests.cs)。

# android - 警报管理器触发通知

> ID：14542336
> 
> 赞同：3
> 
> 时间：2013-01-26T22:42:22.410
> 
> 标签：android, alarm, notificationmanager

我有一个警报管理器，每个星期天都会触发一个通知。它工作正常，但每当我打开应用程序时，即使不是星期天也会显示通知。应用打开时是否触发了onReceive方法？如何更改它以便在打开应用程序时不显示通知？

代码：

```
package com.sjjgames.abortionappnoads;

import java.util.Calendar;
import android.app.AlarmManager;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import android.support.v4.app.NotificationCompat;
import android.support.v4.app.TaskStackBuilder;
import android.widget.Toast;

    public class Alarm extends BroadcastReceiver
    {
         @Override
         public void onReceive(Context context, Intent intent) 
         {   
             PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
             PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
             wl.acquire();

                // Put here YOUR code.
                //NOTIFICATION
                NotificationCompat.Builder mBuilder =
                        new NotificationCompat.Builder(context)
                        .setSmallIcon(R.drawable.icon)
                        .setContentTitle("Fetal Development")
                        .setContentText("Click here to view you child's development for this week!");
                Intent resultIntent = new Intent(context, StatusOfChild.class);
                TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
                stackBuilder.addParentStack(StatusOfChild.class);
                stackBuilder.addNextIntent(resultIntent);
                PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);
                mBuilder.setContentIntent(resultPendingIntent);
                NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                mNotificationManager.notify(9011, mBuilder.build());

             wl.release();
         }

     public void SetAlarm(Context context)
     {
         AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         Intent i = new Intent(context, Alarm.class);
         PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
         /*
         Calendar calendar = Calendar.getInstance();
         calendar.set(Calendar.DAY_OF_WEEK, 1);
         calendar.set(Calendar.HOUR_OF_DAY, 12);
         calendar.set(Calendar.MINUTE, 00);
         calendar.set(Calendar.SECOND, 00);
         */
        long day = 0;
        Calendar dayCalendar = Calendar.getInstance();
        long dayOfWeek = dayCalendar.get(Calendar.DAY_OF_WEEK);
        if (dayOfWeek == 1){ //Sunday
            day = System.currentTimeMillis();
        }
        if (dayOfWeek == 2){ //Monday
            day = 24*60*60*1000*2;
        }
        if (dayOfWeek == 3){ //Tuesday
            day = 24*60*60*1000*3;
        }
        if (dayOfWeek == 4){ //Wednesday
            day = 24*60*60*1000*4;
        }
        if (dayOfWeek == 5){ //Thursday
            day = 24*60*60*1000*5;
        }
        if (dayOfWeek == 6){ //Friday
            day = 24*60*60*1000*6;
        }
        if (dayOfWeek == 7){ //Saturday
            day = 24*60*60*1000;
        }
        am.setRepeating(AlarmManager.RTC_WAKEUP, day, 24*60*60*1000*7, pi);

     }

     public void CancelAlarm(Context context)
     {
         Intent intent = new Intent(context, Alarm.class);
         PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
         AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
         alarmManager.cancel(sender);
     }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:49:21.013

这与[setRepeating()](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)将在过去时立即触发警报这一事实有关。您将需要计算时间差，然后发出警报。添加到日历似乎是一种简单的方法。

例如，如果您使用日历并且当前日期是星期一：

```
Calendar calendar = Calendar.getInstance();
         calendar.set(Calendar.HOUR_OF_DAY, 12);
         calendar.set(Calendar.MINUTE, 00);
         calendar.set(Calendar.SECOND, 00);
         calendar.add (Calendar.DATE, 6); //add 6 days. 
```

# ios - 需要时未调用 iOS 委托方法

> ID：14542337
> 
> 赞同：0
> 
> 时间：2013-01-26T22:42:23.040
> 
> 标签：ios, methods, delegates, instance-methods

我有一个用于我的应用程序的自定义数据控制器，并且在其中我设置了一些委托方法。它们都可以工作，但在我想要它们的时候却不行。当我调用 [dataController refreshData] 时，我有一个委托方法 refreshDidStart 和 refreshDidFinishWithoutError。我分配数据控制器，将委托设置为 self 并在 applicationDidFinishLaunching 中调用 refreshData，但是当方法执行完成时，委托方法不会刷新视图控制器中的表视图。但是，当我设置刷新 UIBarButtonItem 来调用 [dataController refreshData] 时，会调用 refreshDidFinish 委托方法并执行预期的操作。我相信这与我正在使用的拆分视图控制器有关。下面是代码：

应用代表：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    dataController = [[DataController alloc] init];
    [dataController setDelegate:self];
    [dataController refreshData];

} 
```

主视图控制器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    dataController = [[DataController alloc] init];
    [dataController setDelegate:self];

    self.tableView.backgroundView = nil;
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"texture3.png"]];
}

- (void)refreshDataDidStart:(DataController *)view {

    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = @"Loading";
}

- (void)refreshDataDidFinishWithoutError:(DataController *)view {

    [callsTableView reloadData];
    [MBProgressHUD hideHUDForView:self.view animated:YES];
}

- (void)refreshDataDidFailWithError:(DataController *)view withError:(NSError *)error {

    [MBProgressHUD hideHUDForView:self.view animated:YES];

    NSLog(@"%@", error.localizedDescription);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:55:40.360

在您的 App Delegate 中，您将 DataController 的委托设置为 App Delegate。因此，被调用的委托方法需要在您的 App Delegate 类代码中。

在您的 MasterViewController 中，您将 DataController 的委托设置为 MasterViewController，因此 DataController 的委托方法在 MasterViewController 类中被调用。

您将需要将 DataController 委托方法添加到您的 App Delegate 代码中以触发刷新表视图，可能通过使用 NSNotificationCenter。或者让 App Delegate 告诉 MasterViewController 在其 DataController 上调用 refreshData 可能会更好。

# c# - 从静态方法获取派生类型

> ID：14542347
> 
> 赞同：10
> 
> 时间：2013-01-26T22:44:32.657
> 
> 标签：c#, reflection, types, static

我想从静态方法中获取派生类型。

我想做这样的事情

```
void foo()
{
  this.getType();
} 
```

但在静态方法中

我知道

```
MethodBase.GetCurrentMethod().DeclaringType 
```

返回基本类型，但我需要派生。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T22:51:03.500

假设你的意思是你有这样的东西

```
class MyBaseClass
{
    public static void DoSomething()
    {
        Console.WriteLine(/* current class name */);
    }
}

class MyDerivedClass : MyBaseClass
{
} 
```

并想`MyDerivedClass.DoSomething();`打印`"MyDerivedClass"`，那么答案是：

您的问题没有解决方案。静态方法不像实例方法那样被继承。您可以参考`DoSomething`使用`MyBaseClass.DoSomething`or `MyDerivedClass.DoSomething`，但两者都被编译为对 的调用`MyBaseClass.DoSomething`。无法找出源代码中使用了哪个来进行调用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-26T22:54:11.107

我想你需要这样的场景：

```
void Main()
{
  Base.StaticMethod(); // should return "Base"
  Derived.StaticMethod();  // should return "Derived"
}

class Base
{
  public static void StaticMethod()
  {
    Console.WriteLine(MethodBase.GetCurrentMethod().DeclaringType.Name);
  }
}

class Derived: Base 
{
} 
```

但是，此代码将返回

```
Base       
Base 
```

这是因为静态方法调用在编译时被解析为对基类的调用，基类实际上定义了它，即使它是从派生类调用的。线条

```
Base.StaticMethod();
Derived.StaticMethod(); 
```

生成以下 IL：

```
IL_0001:  call        Base.StaticMethod
IL_0006:  nop         
IL_0007:  call        Base.StaticMethod 
```

一句话，做不到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-30T04:41:15.547

7 1/2 年后……

我想做的事情与我发现这个问题的方式非常相似。有一个接近于所要求的解决方案，并且*可能*对其他搜索此问题的人有用。

我想要一个静态方法，它会返回一个类的实例，其中包含为我设置的所有基本设置。以下作品：

```
void Main()
{
    ChildClassA cA = ChildClassA.SetFoo();
}

public abstract class BaseClass
{
    public bool Foo {get; set;}
}

public class ChildClassA : BaseClass
{
    public static ChildClassA SetFoo() => new ChildClassA{Foo = false};
}

public class ChildClassB : BaseClass
{
    public static ChildClassB SetFoo() => new ChildClassB { Foo = false };
} 
```

这一切都很好，但我想把那个`SetFoo`函数放在基类中，这样

1.  我不必有那么多重复的代码和
2.  确保所有 BaseClass 对象都有`SetFoo`.

你不能这样做：

```
 public abstract static BaseClass SetFoo; 
```

因为静态的东西不可能是抽象的。你也不能这样做：

```
 public static BaseClass SetFoo => new BaseClass{ Foo = false }; 
```

因为你不能新建一个抽象类。

但是，您可以做的是使用泛型来指定您想要的派生类型。看起来像这样：

```
void Main()
{
    ChildClassA cA = BaseClass.SetFoo<ChildClassA>();
}

public abstract class BaseClass
{
    public bool Foo {get; set;}

    public static T SetFoo<T>() where T:BaseClass, new() => new T{Foo = false };
}

public class ChildClassA : BaseClass
{
    // You can leave this here if you still want to call ChildClassA.SetFoo();
    //public static ChildClassA SetFoo() => new ChildClassA{Foo = false};
}

public class ChildClassB : BaseClass
{
    //Again, you can leave this for ChildClassB.SetFoo()--the compiler won't mind
    //public static ChildClassB SetFoo() => new ChildClassB { Foo = false };
} 
```

这只是比我们真正想要的（derived.StaticBase）稍微笨拙一点，但它非常接近。

# c - 如何在 Linux 源代码中找到特定系统调用的定义？

> ID：14542348
> 
> 赞同：2
> 
> 时间：2013-01-26T22:44:35.483
> 
> 标签：c, linux, kernel, system-calls

我最近想看看`open()`系统调用是如何在 Linux 内核中实现的。查看 syscall 表表明我要查找的函数的名称是`sys_open()`，因此我对其进行了查找。虽然我找不到任何声明，但我能得到的最接近的`do_sys_open`是`fs/open.c`. 它是否以某种方式翻译成这个功能？我可能错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T23:13:07.780

不，`do_sys_open`不是 的实现`sys_open`，它只是一个通用代码`open`并被`openat`分解出来。

Syscall 函数名称，总是`sys_`*一些东西*，是由有趣的预处理器宏生成的（`SYSCALL_DEFINEn`其中`n`是参数的数量）。

如您所见（非常接近`do_sys_open`）：

```
SYSCALL_DEFINE3(open, const char __user *, filename, int, flags, umode_t, mode)
{
        long ret;
        .... 
```

*这*是`open`系统调用的代码。

# php - XMLHttpRequest POST 被取消

> ID：14542351
> 
> 赞同：0
> 
> 时间：2013-01-26T22:44:40.447
> 
> 标签：php, javascript, xmlhttprequest

我在我的站点中使用 XMLHttpRequest，但我只有一个问题。当我尝试登录时，帖子被取消，但它只发生在整个站点中的此操作中。

这是我的代码：

```
var hr = new XMLHttpRequest();
var url = "logIn.php";

var email = document.getElementById("input-username").value;
var password = document.getElementById("input-login-password").value;

var vars = "email=" + email + "&password=" + password;

hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "x-www-form-urlencoded");

hr.onreadystatechange = function() {
    var return_data = hr.responseText;
    if(hr.readyState == 4 && hr.status == 200) {
        isLoggedIn(return_data);
    }else{
        if (hr.readyState == 4 && hr.status == 400){
            alert('problem logging in');
        }
    }
}
hr.send(vars); 
```

我的帖子信息：

```
Request URL:http://beta.amanha.eu/logIn.php
Request Headersview source
Content-type:x-www-form-urlencoded
Origin:http://beta.amanha.eu
Referer:http://beta.amanha.eu/?
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
Request Payload
email=a@a.com&password=12345 
```

这可能是php文件中的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:53:52.440

您正在设置无效的`Content-Type`. 正确的类型是`application/x-www-form-urlencoded`.

# css - 如何在 RoR 3.2 项目中链接到 CSS 文件中的图像？

> ID：14542352
> 
> 赞同：0
> 
> 时间：2013-01-26T22:44:49.337
> 
> 标签：css, image, ruby-on-rails-3.2, asset-pipeline

RoR 的新手，但我不想在 application.css 中硬编码我的图像路径：

```
.nav {
  padding-top: 10px;
  height: 60px;
  background-image:url('/assets/static/bg-nav.png');
  background-repeat:repeat-x;
} 
```

因此，我在其他地方也遇到了错误。我花了几次尝试找到完整的路径，但是我应该使用另一个标签吗？我以前有：

```
background-image:url('../images/static/bg-nav.png') 
```

如果您查看目录树，这是有道理的，但不知何故变成了别的东西。如果我需要在这里内联一些rails，文件是否需要更改为.css.erb？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:51:47.453

没关系，我刚开始阅读更多关于资产管道的信息。这是一个如何以编程方式在 .css 文件中插入适当路径的示例（不，不需要是其他扩展类型）：

```
.class { background-image: url(<%= asset_path '/mysubdirectory/myimage.png' %>) } 
```

来自： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

你从`app/assets/images/`

# wpf - 单选按钮数据绑定在 wpf 中不起作用

> ID：14542355
> 
> 赞同：0
> 
> 时间：2013-01-26T22:45:12.143
> 
> 标签：wpf, data-binding, mvvm, radio-button

我有这样的“VM”和“模型”代码，它代表具有 INotifyPropertyChanged 实现的 Product 类：

**模型：**

```
public class Product : INotifyPropertyChanged
{
    public Product(string name, bool isEnable)
    {
        Name = name;
        IsEnable = isEnable;
    }
    public string Name { get; set; }
    private bool _isEnable;
    public bool IsEnable
    {
        get { return _isEnable; }
        set
        {
            if (value != _isEnable)
            {
                _isEnable = value;
                OnPropertyChanged("IsEnable");
            }
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

**视图模型：**

```
 public ObservableCollection<Product> Products
    {
        get { return _products; }
        set { _products = value;}
    }
    private ObservableCollection<Product> _products = new ObservableCollection<Product>()
        {
            new Product("a", false),
            new Product("b", false),
            new Product("c", false),
        }; 
```

**并使用 ListBox 查看，其中每个项目都是 RadioButton：**

```
<Window.Resources>
     <Style x:Key="RadioButtonListStyle" TargetType="{x:Type ListBox}">
        <Setter Property="SelectionMode" Value="Single"></Setter>
        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="{x:Type ListBoxItem}" >
                    <Setter Property="Margin" Value="2" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                <RadioButton GroupName="Gr1" 
                                      IsChecked="{Binding Path=IsEnable,RelativeSource={RelativeSource TemplatedParent},
                                      UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                                 <ContentPresenter></ContentPresenter>
                               </RadioButton>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid Margin="5">
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
    </Grid.RowDefinitions>
    <ListBox x:Name="UserList" Style="{StaticResource RadioButtonListStyle}" ItemsSource="{Binding Products}">
    </ListBox>
</Grid> 
```

但是每次单击单选按钮时都没有发生任何事情。在调试模式下，我无法到达 setter 方法中的断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:19:59.290

您应该将 IsEnable Binding 直接引用到绑定对象（产品），而不是模板化父对象；

```
<RadioButton GroupName="Gr1" IsChecked="{Binding Path=IsEnable}, UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"> 
```

# ruby - 无法通过heroku推送到master

> ID：14542357
> 
> 赞同：2
> 
> 时间：2013-01-26T22:45:16.017
> 
> 标签：ruby, heroku, rubygems, ruby-on-rails-3.2

在此先感谢您的帮助。

当我尝试跑步时

```
$ git push heroku master 
```

我收到一个错误：

```
An error occurred while installing sqlite3 (1.3.7), and Bundler cannot continue.
      Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.
!
!     Failed to install gems via Bundler.
! 
```

我已将我的 Gemfile 更新为如下所示：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

group :production, :staging do
   gem "pg"
 end

 group :development, :test do
   gem "sqlite3-ruby", :require => "sqlite3"
 end

 # Gems used only for assets and not required
 # in production environments by default.
 group :assets do
   gem 'sass-rails',   '~> 3.2.4'
   gem 'coffee-rails', '~> 3.2.2'

   # See https://github.com/sstephenson/execjs#readme for more supported runtimes
   # gem 'therubyracer', :platform => :ruby

   gem 'uglifier', '>= 1.2.3'
 end

 gem 'jquery-rails'

 # To use ActiveModel has_secure_password
 # gem 'bcrypt-ruby', '~> 3.0.0'

 # To use Jbuilder templates for JSON
 # gem 'jbuilder'

 # Use unicorn as the app server
 # gem 'unicorn'

 # Deploy with Capistrano
 # gem 'capistrano'

 # To use debugger
 # gem 'ruby-debug19', :require => 'ruby-debug' 
```

我的 Gemfile.lock 文件看起来像：

```
 GEM
   remote: https://rubygems.org/
   specs:
     actionmailer (3.2.3)
       actionpack (= 3.2.3)
       mail (~> 2.4.4)
     actionpack (3.2.3)
       activemodel (= 3.2.3)
       activesupport (= 3.2.3)
       builder (~> 3.0.0)
       erubis (~> 2.7.0)
       journey (~> 1.0.1)
       rack (~> 1.4.0)
       rack-cache (~> 1.2)
       rack-test (~> 0.6.1)
       sprockets (~> 2.1.2)
     activemodel (3.2.3)
       activesupport (= 3.2.3)
       builder (~> 3.0.0)
     activerecord (3.2.3)
       activemodel (= 3.2.3)
       activesupport (= 3.2.3)
       arel (~> 3.0.2)
       tzinfo (~> 0.3.29)
     activeresource (3.2.3)
       activemodel (= 3.2.3)
       activesupport (= 3.2.3)
     activesupport (3.2.3)
       i18n (~> 0.6)
       multi_json (~> 1.0)
     arel (3.0.2)
     builder (3.0.4)
     coffee-rails (3.2.2)
       coffee-script (>= 2.2.0)
       railties (~> 3.2.0)
     coffee-script (2.2.0)
       coffee-script-source
       execjs
     coffee-script-source (1.4.0)
     erubis (2.7.0)
     execjs (1.4.0)
       multi_json (~> 1.0)
     hike (1.2.1)
     i18n (0.6.1)
     journey (1.0.4)
     jquery-rails (2.2.0)
       railties (>= 3.0, < 5.0)
       thor (>= 0.14, < 2.0)
     json (1.7.6)
     mail (2.4.4)
       i18n (>= 0.4.0)
  mime-types (~> 1.16)
  treetop (~> 1.4.8)
mime-types (1.19)
multi_json (1.5.0)
pg (0.14.1)
polyglot (0.3.3)
rack (1.4.4)
rack-cache (1.2)
  rack (>= 0.4)
rack-ssl (1.3.2)
  rack
rack-test (0.6.2)
  rack (>= 1.0)
rails (3.2.3)
  actionmailer (= 3.2.3)
  actionpack (= 3.2.3)
  activerecord (= 3.2.3)
  activeresource (= 3.2.3)
  activesupport (= 3.2.3)
  bundler (~> 1.0)
  railties (= 3.2.3)
railties (3.2.3)
  actionpack (= 3.2.3)
  activesupport (= 3.2.3)
  rack-ssl (~> 1.3.2)
  rake (>= 0.8.7)
  rdoc (~> 3.4)
  thor (~> 0.14.6)
rake (10.0.3)
rdoc (3.12)
  json (~> 1.4)
sass (3.2.5)
sass-rails (3.2.6)
  railties (~> 3.2.0)
  sass (>= 3.1.10)
  tilt (~> 1.3)
sprockets (2.1.3)
  hike (~> 1.2)
  rack (~> 1.0)
  tilt (~> 1.1, != 1.3.0)
sqlite3 (1.3.7)
sqlite3-ruby (1.3.3)
  sqlite3 (>= 1.3.3)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.12)
  polyglot
  polyglot (>= 0.3.1)
tzinfo (0.3.35)
uglifier (1.3.0)
  execjs (>= 0.3.0)
  multi_json (~> 1.0, >= 1.0.2)

 PLATFORMS
   ruby

 DEPENDENCIES
   coffee-rails (~> 3.2.2)
   jquery-rails
   pg
   rails (= 3.2.3)
   sass-rails (~> 3.2.4)
   sqlite3-ruby
   uglifier (>= 1.2.3) 
```

我已经运行 Bundle Install 和 Bundle Update 无济于事。

# asp.net - 如何从另一个行值读取 SQL 数据库特定的行文本

> ID：14542358
> 
> 赞同：0
> 
> 时间：2013-01-26T22:45:21.400
> 
> 标签：asp.net, sql, database

我正在尝试从另一列查询特定列文本的数据。

基本上，我有一个包含 SupplierID 和 Country 列的供应商数据库。

例如，我已经有了该特定行的 SupplierID，它是 14。我想根据 14 值获取 Country 列的文本值。

我通过以下代码（列表框）获得的供应商 ID：

```
<asp:ListBox ID="SupplierListBox" runat="server" 
            DataSourceID="SupplierCompanyDataSource" DataTextField="Company" 
            DataValueField="SupplierID" Width="315px" 
            Height="80px" 
            onselectedindexchanged="SupplierListBox_SelectedIndexChanged" 
            AutoPostBack="True"></asp:ListBox> 
```

代码：

```
 string SupplierListvalue = SupplierListBox.SelectedItem.Value; //SupplierListvalue retrieves the SupplierID value

        SqlDataReader rdr = null;
        SqlConnection conn = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True");
        SqlCommand cmd = new SqlCommand("select Country from SupplierDB", conn);
        cmd.Connection = conn;

        conn.Open();
        rdr = cmd.ExecuteReader();
        while (rdr.Read())
        {
            TextBox1.Text = rdr["Country"].ToString();
            MessageBox.Show("Connection Successful");
            MessageBox.Show(rdr.ToString());
        }

        conn.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:58:06.657

好吧，目前还不清楚主要问题是什么，所以我将向您展示一个工作示例，它`Country`使用 ADO.NET 从数据库中选择列，使用参数来避免 SQL 注入和`using`-statement 以确保所有非托管资源作为连接得到处置（关闭）。

```
string sql = @"
            SELECT Country
            FROM dbo.Supplier
            WHERE SupplierID = @SupplierId";
using (var con = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True"))
{
    using (var cmd = new SqlCommand(sql, con))
    {
        con.Open();
        cmd.Parameters.Add("@SupplierId", SqlDbType.Int);
        cmd.Parameters["@SupplierId"].Value = int.Parse(SupplierListBox.SelectedItem.Value);
        using (var rdr = cmd.ExecuteReader())
        {
            if (rdr.Read())
            {
                TextBox1.Text = rdr.GetString(0);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:59:47.527

您需要考虑使用参数化查询。试试这个：

```
 string SupplierListvalue = SupplierListBox.SelectedItem.Value; //SupplierListvalue retrieves the SupplierID value
    ...
    SqlCommand cmd = new SqlCommand("select Country from SupplierDB WHERE SupplierID = @supplierId", conn);
    cmd.Parameters.AddWithValue("@supplierId", SupplierListvalue);
    ... 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:41:24.943

我以错误的方式接近它。基本上以下是正确的代码：

`<asp:SqlDataSource ID="SupplierCompanyDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ROGConnectionString %>"
SelectCommand="SELECT [Company], [SupplierID] FROM [SupplierDB] WHERE ([SupplierID] &gt;= @SupplierID)"> <SelectParameters> <asp:Parameter DefaultValue="14" Name="SupplierID" Type="Int32" /></SelectParameters> </asp:SqlDataSource>`

`<asp:SqlDataSource ID="SupplierCountryDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ROGConnectionString %>" SelectCommand="SELECT [SupplierID], [Country] FROM [SupplierDB] WHERE ([SupplierID] = @SupplierID)"> <SelectParameters> <asp:ControlParameter ControlID="SupplierListBox" Name="SupplierID" PropertyName="SelectedValue" Type="Int32" /></SelectParameters></asp:SqlDataSource>`

这完成了工作！所以现在当我点击 listbox1 时， listbox2 也会被点击，类似于级联。

# php - TcPDF 生成在 adobe reader 中损坏的 pdf

> ID：14542360
> 
> 赞同：2
> 
> 时间：2013-01-26T22:45:31.187
> 
> 标签：php, pdf, export, tcpdf, fpdf

使用 TcPDF PHP 类，我生成了一个 pdf，我使用的“特殊”函数是：

*   `addTTFfont`（添加自定义字体）
*   `ImageSVG`（添加 svg）
*   `Image`
*   `writeHTMLCell`

输出的 pdf 在 Foxit 阅读器和 Mac Premier 中正确打开。但是 Adob​​e 阅读器有一个 AcroRd32.exe 进程，它占用了无限量的工作内存并且没有任何响应，之后我需要重新启动计算机。当我删除自定义字体时，它确实打开了，但很快就崩溃了。似乎html单元格也给出了错误......

谷歌搜索我看到了将 TTF 的导入从 truetype 更改为 truetypeunicode 的建议。那没有帮助。

这个事情谁有经验？为什么这只能在 Acrobat 阅读器中看到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:40:37.903

固定的。显然，问题是在生成时动态转换为正确的 tcPdf 格式的字体被错误地创建，导致文件损坏。但是当我在另一个服务中手动转换它时（我使用[http://www.xml-convert.com/en/convert-tff-font-to-afm-pfa-fpdf-tcpdf](http://www.xml-convert.com/en/convert-tff-font-to-afm-pfa-fpdf-tcpdf)）并将te文件存储在tcPdf字体中文件夹，它确实有效（只需像请求其他预安装字体一样请求字体）

# android - 在 Facebook 上发布照片后如何获取照片的网址？

> ID：14542361
> 
> 赞同：2
> 
> 时间：2013-01-26T22:45:32.797
> 
> 标签：android, facebook, url, facebook-graph-api

我需要获取上传照片的网址。我发布了它并得到了帖子的ID：

```
JSONObject graphResponse = response.getGraphObject()
  .getInnerJSONObject();
String postId = null;

try {
  postId = graphResponse.getString("id");
} 
catch (JSONException e) {
  Log.i("Facebook Error", "JSON error " + e.getMessage());
} 
```

现在我想获取这张照片的网址。我怎样才能得到这个网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:28:28.383

根据@Tomislav 的链接，使用：

```
https://graph.facebook.com/10150146071831729?access_token=AAAAAAITEghMBAC041bexTcyhRKuLWt7MaXNTy3YydqD3mN6lvrmeZCbxiUQGcgBJ7v3rOrvrlzBuByzGjWZBLOhcafA0IuMXjN9tLlaQZDZD` 
```

其中 <10150146071831729> 是您感兴趣的照片的 ID 将`link`在返回的 JSON 对象中返回 URL

参考：http: [//developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:52:03.943

我已经解决了这个问题。

1.必要的权限：publish_actions、user_photos、read_stream

2.照片上传后获取post_id：

```
postId = graphResponse.getString("post_id"); 
```

3.获取帖子：

```
Request mRequest = new Request(session, "me/feed", null,
                HttpMethod.GET, callback); 
```

按 id 查找帖子。并获取照片的网址：

```
String id = json_obj.getString("id");

if (id.equals(postId)) {

String url = json_obj.getString("picture");

} 
```

# c++ - 链接器出错

> ID：14542363
> 
> 赞同：1
> 
> 时间：2013-01-26T22:45:49.223
> 
> 标签：c++, gcc, linker, g++

我正在尝试编译一个用 C++ 编写的程序，但我无法解决链接器的问题：

```
g++ -Wl,--export-dynamic  -Wl,-rpath,/home/*****/omnetpp-4.2.2/lib -Wl,-rpath,. -o ../out/gcc-debug//src/802.11n  ../out/gcc-debug//src/BCJR.o ../out/gcc-debug//src/Calcul_Metric_Checksum.o ../out/gcc-debug//src/Channel_802_11.o ../out/gcc-debug//src/Checksum.o ../out/gcc-debug//src/Deflate.o ../out/gcc-debug//src/Handle_checksum_error.o ../out/gcc-debug//src/Handle_CRC_error.o ../out/gcc-debug//src/Helper.o ../out/gcc-debug//src/Receiver.o ../out/gcc-debug//src/Scrambler_Soft.o ../out/gcc-debug//src/Stackchemin.o ../out/gcc-debug//src/Transmitter.o ../out/gcc-debug//src/Trellis_Calcul_Liste.o ../out/gcc-debug//src/APL_m.o ../out/gcc-debug//src/IPv6_m.o ../out/gcc-debug//src/MAC_m.o ../out/gcc-debug//src/PHY_PLCP_m.o ../out/gcc-debug//src/PHY_PMD_m.o ../out/gcc-debug//src/RTP_m.o ../out/gcc-debug//src/Soft_bits_m.o ../out/gcc-debug//src/UDP_m.o  -Wl,--no-as-needed -Wl,--whole-archive  -Wl,--no-whole-archive -L"/home/gueguet/omnetpp-4.2.2/lib/gcc" -L"/home/gueguet/omnetpp-4.2.2/lib" -loppmaind -u _tkenv_lib -Wl,--no-as-needed -lopptkenvd -loppenvird -lopplayoutd -u _cmdenv_lib -Wl,--no-as-needed -loppcmdenvd -loppenvird  -loppsimd -ldl -lstdc++  `pkg-config --cflags itpp` `pkg-config --libs itpp` 
/usr/bin/ld: ../out/gcc-debug//src/Handle_checksum_error.o: undefined reference to symbol 'dcopy_'
/usr/bin/ld: note: 'dcopy_' is defined in DSO /usr/lib/libblas.so.3gf so try adding it to the linker command line
/usr/lib/libblas.so.3gf: could not read symbols: Invalid operation
collect2: ld a retourné 1 code d'état d'exécution
make: *** [../out/gcc-debug//src/802.11n] Erreur 1 
```

谁能帮帮我？提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:04:25.583

我可能会建议仔细阅读您收到的错误报告。他们提供了很好的信息来提供帮助。

```
Handle_checksum_error.o: undefined reference to symbol 'dcopy_'
note: 'dcopy_' is defined in DSO /usr/lib/libblas.so.3gf 
so try adding it to the linker command line 
```

# objective-c - 如何在 iOS 上轻松存储 NSDictionary？

> ID：14542366
> 
> 赞同：-2
> 
> 时间：2013-01-26T22:46:22.180
> 
> 标签：objective-c, nsdictionary

我有一个 NSDictionary，我需要将它保存并加载到内存中。例如，很容易将 NSString 保存在 NSUserDefaults 中。请帮帮我 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T23:02:05.040

只要你的字典内容符合要求，你可以使用[-[NSDictionary writeToFile:atomically:]](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-CBHDBHDB)或[-[NSDictionary writeToURL:atomically:]](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-BCIICEDB)来持久化字典，然后使用[+[NSDictionary dictionaryWithContentsOfFile:]](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-CBHEADHI)或[+[NSDictionary dictionaryWithContentsOfURL:]](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-BCIDGEBC)将文件读回字典。

MVCNetworking[示例项目](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-BCIDGEBC)包含一些执行此操作的代码。

# php - 适用于 windows 8 的邮件服务器与 php 邮件兼容

> ID：14542371
> 
> 赞同：2
> 
> 时间：2013-01-26T22:47:21.203
> 
> 标签：php

使用 php 5.3 并尝试使用 mail 命令。我有windows 8，想要一个pop3/smtp 邮件服务器设置，这样我就可以实际测试php 邮件功能。我正在使用 apache web 服务器和 IIS，因为我的 windows 8 版本没有附带 smtp 服务器。

关于我应该使用什么来获得此设置的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:22:04.750

所有附件都是一个指向 Php 类的链接，它将通过安全身份验证将邮件发送到基于 SSL SMTP 的服务器，这几乎是现在所有主要的邮件服务器。在我意识到剪切和粘贴删除了字符串上一些重要的反斜杠转义后，我将其插入并完美运行。

[http://www.kidmoses.com/blog-article.php?bid=56](http://www.kidmoses.com/blog-article.php?bid=56) 感谢 KidMoses

无论如何，我把它放进去，瞧，它做了 php 邮件不会做的事情，即处理基于 SSL 的 SMTP 身份验证。

这是一只需要追踪的野兽。当然，有很多关于 PEAR 做同样事情的讨论，但是在搜索之后我找不到用于 pear 模块安装的基于 Windows 的安装程序。我也敢于尝试查找有关 Windows 8 SMTP 设置的任何信息，因为 SMTP 是从 IIS 8 中提取的，我找不到一篇关于如何在 Windows 8 中本地配置 SMTP 服务器的文章……微软只是继续厄运本身。

# javascript - Chrome和Firefox的时间戳转换区别

> ID：14542377
> 
> 赞同：1
> 
> 时间：2013-01-26T22:48:26.190
> 
> 标签：javascript, google-chrome, date, firefox, integer

我目前在处理时间戳时遇到了麻烦。我正在 Chrome 24.0.1312.56 m 和 Firefox 18.0.1 控制台中调试以下完全相同的代码：

```
new Date(parseInt('2012'), parseInt('09') - 1, parseInt('30')).getTime()/1000 
```

当我在**Chrome**中执行它时，我得到：

```
1348956000 
```

**当我在Firefox**中执行它时，我得到：

```
1325199600 
```

**问题**：这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T23:00:10.847

对于`parseInt('09')`：

*   Chrome 24 似乎返回**9**
*   FireFox 18 似乎将数字视为[八进制](http://en.wikipedia.org/wiki/Octal)，因此返回**0**（解析了 0，但未解析 9）

[`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt#Octal_Interpretations_with_No_Radix)从文档中引用：

> 尽管 ECMAScript 3 不鼓励，但许多实现将以 0 开头的数字字符串解释为八进制。
> [...]
> 函数 parseInt 的 ECMAScript 5 规范不再允许实现将以 0 字符开头的字符串视为八进制值。
> [...]
> 由于截至 2011 年许多实现尚未采用此行为，并且必须支持较旧的浏览器，因此请始终指定基数。

解决方案：修改代码并明确指定基数参数：

```
new Date(parseInt('2012', 10), parseInt('09', 10) - 1, parseInt('30', 10)).getTime()/1000
// 1348945200 
```

# java - bluej界面的eclipse插件

> ID：14542383
> 
> 赞同：0
> 
> 时间：2013-01-26T22:48:51.727
> 
> 标签：java, eclipse, object, plugins, bluej

是否有一个 Eclipse 插件可以让我们像 BlueJ 一样查看类和对象？我发现在 BlueJ 中创建对象和测试其方法比在 Eclipse 中更容易。我还在学习，但是程序员是否在实际项目中使用 Bluej，然后在 Eclipse 中导入代码，或者 Bluej 只是一个为学生了解java的基础知识？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:35:08.307

BlueJ 是为初学者设计的 IDE - 它不是专业级别的 IDE，它旨在使学习 Java 的过程对初学者尽可能有效。它仍然可以用于更高级的程序和任务，但是大多数人在胜任之后会迁移到 Netbeans 或 Eclipse 之类的东西。

我对 Eclipse 一无所知，但那里有一个[Netbeans 插件](http://bluej.org/netbeans/)。我不确定这是否适用于更高版本的 Netbeans 但是，引用的版本是 6.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:53:05.107

BlueJ 主要用于开始 Java 编程。但是，该行业似乎正在使用 Eclipse 和 NetBeans。

# python - Python中的基本绘图

> ID：14542386
> 
> 赞同：2
> 
> 时间：2013-01-26T22:49:14.250
> 
> 标签：python, graphics

作为一个类项目，我需要在 Python 中创建一个图形库。我可以创建窗口和访问单个像素的最基本方法是什么？Tkinter 似乎是一种过度杀戮，因为它已经内置了绘制线条的方法。有没有更基本的方法在 python 中做图形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:54:37.680

如果您只想创建位图并将它们保存为 jpeg、png 或 bmps，请参阅[另存为图像？](https://stackoverflow.com/questions/902761/saving-a-numpy-array-as-an-image)

如果您想获取图形上下文并绘制到屏幕上，请参阅[如何在 python 中将像素绘制到屏幕上？](https://stackoverflow.com/questions/7585447/in-python-how-can-i-draw-to-a-pixel-on-the-screen-directly)还是[用于绘图的最佳 Python 库？](https://stackoverflow.com/questions/326300/python-best-library-for-drawing).

如果您想玩图形用户界面，请参阅[Python 对 GUI 开发有什么好处？](https://stackoverflow.com/questions/115495/is-python-any-good-for-gui-development)

# php - 创建一个 facebook 识别的链接

> ID：14542389
> 
> 赞同：1
> 
> 时间：2013-01-26T22:49:37.150
> 
> 标签：php, facebook, audio

我有一个问题，我不知道如何解释。如果我在 soundcloud（例如）上发布音频文件，该网站会给我一个链接。Facebook 识别出该链接并向我显示播放按钮，我可以直接在页面上收听，而无需转到 soundcloud。另外，在 soundcloud 上我上传了一张图片，facebook 会显示我的图片。有人可以解释我该怎么做吗？

我有一台服务器，有时我想将一些音频文件（来自我的服务器的链接）发布到 Facebook。我希望 facebook 能够识别我的链接，以便访问我页面的每个人都能够收听音频文件。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:10:38.270

你需要一个叫做[Open Graphs Tags](http://developers.facebook.com/docs/opengraphprotocol/)的东西。这是位于页面标题中的元数据。

# windows - 使用 SETLOCAL 时如何将目录持久添加到 PATH？

> ID：14542391
> 
> 赞同：2
> 
> 时间：2013-01-26T22:49:47.260
> 
> 标签：windows, batch-file, environment-variables

> **可能重复：**
> [使环境变量存活 ENDLOCAL](https://stackoverflow.com/questions/3262287/make-an-environment-variable-survive-endlocal)
> [如何将变量的值保留在使用“延迟扩展本地”模式的 Windows 批处理脚本之外？](https://stackoverflow.com/questions/12020152/how-to-keep-the-value-of-a-variable-outside-a-windows-batch-script-which-uses)

我有一个批处理文件，它是这样的：

```
REM I need to use SETLOCAL so as not to pollute the environment
REM with any variables used to implement the logic in this script
SETLOCAL
SET I_DONT_WANT_THIS_VARIABLE_TO_LEAK_OUTSIDE=c:\

REM BUT, there is this one change to the environment I want to make sticky:
PATH %PATH%;%I_DONT_WANT_THIS_VARIABLE_TO_LEAK_OUTSIDE% 
```

该脚本用于`SETLOCAL`将环境与批处理文件想要做的任何事情隔离开来，但这会导致一个问题：最后我*确实*想以某种非常具体的方式修改调用者的环境，但`SETLOCAL`会阻止这种情况（更改会立即撤消批处理文件退出）。我也不能`ENDLOCAL`在设置路径之前调用，因为这会将环境恢复到其原始状态，清除变量的值，因此我不能将其值附加到路径中。

**有没有办法在忽略`SETLOCAL`有效的情况下设置路径？或者，是否有任何技巧可以在调用时显式保护变量的值不被清除`ENDLOCAL`？**

我知道可以使用临时文件作为可以绕过`ENDLOCAL`障碍的容器，但欢迎使用更优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T22:57:11.830

将此添加到脚本的末尾（或在您返回之前）：

```
endlocal & @set path=%path% 
```

这样做的原因是 cmd 解析器在执行任何一个之前将环境变量扩展到整行。因此，在`endlocal`执行时，`cmd`正在处理的行如下所示：

```
endlocal & @set path=c:\whatever\the;c:\new\path;c:\is 
```

然后`endlocal`丢弃所有本地更改，但对路径所做的更改已暂时保留在`set`即将执行的命令中。

# java - 虽然循环没有爆发

> ID：14542392
> 
> 赞同：0
> 
> 时间：2013-01-26T22:49:51.130
> 
> 标签：java, algorithm, loops

```
Scanner input = new Scanner(System.in);
selection = input.nextInt();
while (selection != 1 || selection != 2 || selection != 3 || selection != 4){
    System.out.println("*");
    selection = input.nextInt(); 
} 
```

无论我输入什么，上面的代码都会进入一个循环，它只会重复自己。我可能在某个地方犯了一个愚蠢的错误，但我可能因为睡眠不足而看不到它。欢迎任何帮助，谢谢。

所有的 or 符号都已更改为 && 符号，但它仍在循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T22:51:16.060

代替

```
while (selection != 1 || selection != 2 || selection != 3 || selection != 4) 
```

经过

```
while (selection != 1 && selection != 2 && selection != 3 && selection != 4) 
```

选择！= 1 || selection != 2 `is always`true `because`selection` 不能不是 1 也不是 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T22:51:24.297

你的条件总是正确的。对于您选择的任何数字，它始终不是 1*或*不是 2。1*等于*1，但它不等于 2，因此条件为真，同样 2 不等于 1，因此条件为真。每隔一个数都不等于 1*或*2，所以条件仍然成立。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T22:54:01.997

`while`除非表达式为假，否则将执行该块。 `selection != 1 || selection != 2`总是正确的。

我想你想改变`!=`或`==`更好

```
while (0 < selection && selection <= 4) 
```

# java - 第二个组合框中的选项取决于第一个组合框

> ID：14542408
> 
> 赞同：0
> 
> 时间：2013-01-26T22:52:11.957
> 
> 标签：java, swing

> **可能重复：**
> [Dynamic JComboBoxes](https://stackoverflow.com/questions/3191837/dynamic-jcomboboxes)
> [如何通过使用另一个组合框摆动来控制组合框](https://stackoverflow.com/questions/10367834/how-to-control-a-combo-box-by-using-another-combo-box-swing)

```
 // model drop-down      
    final JComboBox modelName = new JComboBox();
    modelName.addItem("Choose One...");
    modelName.addItem("Hypercom");
    modelName.addItem("Deja Voo");
    modelName.addItem("Nurit");
    modelName.addItem("Verifone");
    int modelIndex = modelName.getSelectedIndex();      

    modelPanel.add(modelName); 
```

我在下面要做的是让第二个组合框的选项根据第一个选择的内容而改变......但它没有这样做。无论我在顶部组合框中选择什么，第二个选项都不会改变......我错过了什么？

```
 // Terminal Panel (within Panel1)
    JPanel termPanel = new P(15);
    termPanel.setBackground(Color.WHITE);
    panel1.add(termPanel);

    final JComboBox termName = new JComboBox();

    if (modelIndex == 1) {              
        termName.addItem("Choose One...");
        termName.addItem("T7Plus");
        termName.addItem("4205");
        termName.addItem("4210");
        termName.addItem("4220");           

    } else if (modelIndex == 2) {           
        termName.addItem("Choose One...");
        termName.addItem("M-3");
        termName.addItem("X-5");
        termName.addItem("X-8");
        termName.addItem("V Series");

    } else if (modelIndex == 3) {
        termName.addItem("Choose One...");
        termName.addItem("2085");
        termName.addItem("3020/8320");
        termName.addItem("8400");
        termName.addItem("8000/8020");

    } else if (modelIndex == 4) {
        termName.addItem("Choose One...");
        termName.addItem("37 Dial");
        termName.addItem("37 IP");
        termName.addItem("VX Dial");
        termName.addItem("VX IP");

    } else {
        termName.addItem("Select Model Above");
    }

    termName.getSelectedIndex();
    termPanel.add(termName); 
```

***更新***

我更新了代码，但现在我得到了一个 nullPoint 异常错误......这是它的位置：

```
 final DefaultComboBoxModel termModel = new DefaultComboBoxModel(new String[]{"Choose One...", "Hypercom", "DejaVoo", "Nurit", "Verifone"}); 
```

...

```
// model drop-down      
    modelName.setModel(termModel);  // NULLPOINT EXCEPTION HERE

    modelName.addActionListener (new ActionListener () {
        public void actionPerformed(ActionEvent e) {
            if ("Hypercom".equals(modelName.getSelectedItem())){
                termName.setModel(hSpecModel);    
            } else if ("Deja Voo".equals(modelName.getSelectedItem())){
                termName.setModel(dSpecModel);    
            } else if ("Nurit".equals(modelName.getSelectedItem())){
                termName.setModel(nSpecModel);
            } else if ("Verifone".equals(modelName.getSelectedItem())){
                termName.setModel(vSpecModel);
            } else {
                termName.setModel(slctAbove);
            }
        }
    });

    modelPanel.add(modelName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:06:01.763

您应该添加`ActionListener`哪个能够更改第二个 JComboBox 的内容。此外，您应该考虑在 Map 中链接模型名称和术语名称。请看我的例子：

```
class TwoComboboxFrame extends JFrame {

    private static final long serialVersionUID = 1L;

    private Map<String, List<String>> modelNameTermName = new LinkedHashMap<String, List<String>>();

    private JComboBox<String> termNameComboBox;

    public TwoComboboxFrame() {
        init();
        buildDataModel();

        JPanel panel = createAndAddPanel();
        buildModelNameComboBox(panel);
        buildTermNameComboBox(panel);
    }

    private void buildTermNameComboBox(JPanel panel) {
        termNameComboBox = new JComboBox<String>();
        termNameComboBox.addItem("Select Model Above");
        panel.add(termNameComboBox);
    }

    private void buildModelNameComboBox(JPanel panel) {
        JComboBox<String> modelName = new JComboBox<String>();
        modelName.addItem("Choose One...");
        for (String value : modelNameTermName.keySet()) {
            modelName.addItem(value);
        }
        panel.add(modelName);
        modelName.addActionListener(new ActionListener() {

            @SuppressWarnings("unchecked")
            @Override
            public void actionPerformed(ActionEvent e) {
                JComboBox<String> source = (JComboBox<String>) e.getSource();
                String selectedValue = source.getSelectedItem().toString();
                List<String> termNames = modelNameTermName.get(selectedValue);
                termNameComboBox.removeAllItems();
                if (termNames == null) {
                    termNameComboBox.addItem("Select Model Above");
                } else {
                    termNameComboBox.addItem("Choose One...");
                    for (String name : termNames) {
                        termNameComboBox.addItem(name);
                    }
                }
            }
        });
    }

    private void buildDataModel() {
        modelNameTermName.put("Hypercom",
                Arrays.asList("T7Plus", "4205", "4210", "4220"));
        modelNameTermName.put("Deja Voo",
                Arrays.asList("M-3", "X-5", "X-8", "V Series"));
        //Add other data
    }

    private void init() {
        setTitle("Two comboboxex");
        setSize(300, 200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
    }

    private JPanel createAndAddPanel() {
        JPanel panel = new JPanel(true);
        panel.setLayout(new GridLayout(1, 2));
        add(panel);
        return panel;
    }
} 
```

使用示例：

```
public static void main(String[] args) throws Exception {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            TwoComboboxFrame ex = new TwoComboboxFrame();
            ex.setVisible(true);
        }
    });
} 
```

# ruby-on-rails - 使用“sunspot_rails”gem 更改 SOLR schema.xml 无效

> ID：14542411
> 
> 赞同：2
> 
> 时间：2013-01-26T22:52:55.633
> 
> 标签：ruby-on-rails, solr, sunspot

我正在尝试使用 SOLR 在我的 rails 应用程序中搜索部分单词。这需要更改 schema.xml 文件。正如其他人所[建议](http://railscasts.com/episodes/278-search-with-sunspot?view=comments)的那样，我已经更新了我的“app_root/solr/conf/schema.xml”文件以删除

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

并添加...

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
    <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.NGramFilterFactory" minGramSize="1" maxGramSize="15" />
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
</fieldType> 
```

进行这些更改后，我运行 rake 命令`rake sunspot:reindex`并获得 100% 完整的重新索引结果。然后我启动我的服务器......但是，我仍然只收到完整单词的回复，而不是部分单词。

以防万一，这是我的 Style 模型中的相关代码：

```
 searchable do
    text :full_name 
    #full_name is just one of Style's attribute columns
  end 
```

以及执行提取的代码...

```
if params[:sSearch].present?
  @search = Style.search do 
    fulltext params[:sSearch]
  end
  styles = @search.results
end 
```

任何帮助将不胜感激。

参考见：

[https://github.com/sunspot/sunspot/blob/master/README.md](https://github.com/sunspot/sunspot/blob/master/README.md)

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-13T20:00:21.257

我遇到了类似的问题，解决方案是重新启动您的 solr 实例并运行重新索引，`bundle exec rake`而不仅仅是`rake`：

```
$ bundle exec rake sunspot:solr:stop 
$ bundle exec rake sunspot:solr:start 
$ bundle exec rake sunspot:reindex 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-04T01:49:18.127

除非自 sunspot_solr-2.1.1 以来的某个版本发生了变化，否则问题是 Solr 没有读取复制到 [rails_root]/solr 目录中的 schema.xml。它正在读取 gem 文件中的 schema.xml（大致在这里：/gems/sunspot_solr-2.1.1/solr/solr/conf/schema.xml）。

我能够通过更改该文件、重新启动服务器并检查 solr 管理界面中的架构来验证这一点。

它在我的 Mac 和我使用的虚拟机上以同样的方式工作（Ubuntu 14.04 LTS - Trusty Tahr）。

（创可贴）解决方案是在那里编辑和使用文件。不过先备份一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T11:58:48.327

您正在运行哪个版本的 Solr？我在使用 Solr 4 时遇到了类似的问题，它表明一旦 Solr 服务器重新启动，架构就会更新，但索引不会根据架构发生变化。在花费大量时间重新启动和重新建立索引之后，我使用更新的配置创建了一个新核心（一个新集合），这对我有用。

因此，尝试创建一个全新的核心，看看是否有帮助。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T03:06:17.770

如果您使用的是 Solr 4，最好的解决方法是进入管理界面中的分析窗口，并针对您的索引和查询界面运行一些测试字符串。您可以在下拉列表中选择任何具有“文本”类型的字段或类型本身。

在您的特定设置中，您似乎在说，对于您想要匹配它的任何起始子集的每个单词，从 1 个前导字符（真的吗？）到 15。因此，如果有人搜索“a”，您将得到所有单词从'a'开始。那是你要的吗？

在尝试对黑子部分进行故障排除之前，请尝试所有这些。

# javascript - 用于匹配 URL 路径组件的 JavaScript 正则表达式

> ID：14542412
> 
> 赞同：0
> 
> 时间：2013-01-26T22:52:57.523
> 
> 标签：javascript, regex, url, jslint

我应该使用什么 JavaScript 正则表达式来匹配 URL 路径的各个组件？路径是指服务器上资源的路径，例如，如果 URL 是“http://example.com/directory/resource?start=0”，则路径是“/directory/resource”。路径组件是指路径的 / 分隔部分。

假设我们有 URL 'http://example.com/component1/component2'。我想要的是能够将'component1'或'component2'与每个分组的正则表达式匹配，因此可以提取每个组件，即像这样：'http://example.com/( *$component- regex* )/( *$component-regex* ) ( *$component-regex*是我们需要设计的正则表达式)。在此示例中，将有两个匹配的组：“component1”和“component2”。

请提出一个 JSLint 认为安全的正则表达式 :) 例如，它认为`[^/]+`不安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:57:47.337

您不需要正则表达式：

```
var components = url.split(/[?#]/)[0].split("/").slice(3); 
```

好的，您确实需要一个正则表达式来拆分两个可能的字符之一，但是您可以在没有任何正则表达式的情况下这样做：

```
var components = url.split("#")[0].split("?")[0].split("/").slice(3); 
```

# jasper-reports - 将变量添加到列脚 iReport

> ID：14542417
> 
> 赞同：0
> 
> 时间：2013-01-26T22:53:39.617
> 
> 标签：jasper-reports, ireport

我想在表格的列页脚中添加一个变量。它是列值的总和。例如：总销售额，如果列名是销售额。

但是当我尝试它时，它说由于某种原因找不到变量。我已将表格定位在标题带中，因为如果我将其放在详细带中，则表格重复乘以表格中的行数。5rows = 5pages，同一张表。

有人可以帮助我，因为我是 jasper 和 ireport 的新手。

我正在使用 ireport 5.0.0

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:54:52.953

我们总是在中心级别定义变量，因此请确保如果您为表组件使用任何子数据集，请在主报表查询区域中复制相同的查询，然后添加变量并在 Ireport 中更改这些属性：-

```
Variable class :- java.lang.integer or java.math.BigDecimal
Calculation :-     Sum
Variable expression:-  $F{total_sales} 
```

XML:- 如果您不使用 Ireport

```
 <variable name="total_sales" class="java.math.BigDecimal" calculation="Sum">
    <variableExpression><![CDATA[$F{total_sales}]]></variableExpression>
</variable> 
```

在此之后，您可以将此变量用于求和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:00:43.503

确保你的 xml 中有这个

```
<field name="total_column" class="java.lang.Long"/> 
```

并将其作为您的文本字段表达式

```
$F{total_column} 
```

将名称更改为您使用的任何名称。

# javascript - 在 Azure 移动服务上使用服务器端脚本修改响应

> ID：14542418
> 
> 赞同：0
> 
> 时间：2013-01-26T22:53:45.060
> 
> 标签：javascript, azure-table-storage, serverside-javascript, azure-mobile-services

我有一个使用 Azure 移动服务作为后端的移动应用程序。我有一个场景，我需要修改客户端从数据库请求的元素。我需要根据其最佳分数和表中所有其他记录的最佳分数来计算所请求记录的排名和百分位数。我按照[此处的示例](http://msdn.microsoft.com/en-us/library/windowsazure/jj631631.aspx)编写了以下脚本：

```
function read(query, user, request) {
    request.execute({
        success: function(results) {
            results.forEach(function(item) {
                var totalsql = "SELECT COUNT(*) FROM scoreInfo";
                mssql.query(totalsql, {
                    success: function(totalresults) {
                        var totalCount = totalresults[0].Column0;

                        var moresql = "SELECT COUNT(*) FROM scoreInfo WHERE bestscore > ?";      
                        mssql.query(moresql, [item.bestscore], {
                            success: function(moreresults) {
                                var moreBestCount = moreresults[0].Column0;

                                item.bestrank = moreBestCount + 1;
                                item.bestpercentile = 100 - moreBestCount*100/(totalCount+1);                                
                            }
                        });
                    }
                });
            });
            request.respond();
        }
    });
} 
```

但我没有看到客户端预期的结果。我什至尝试在服务器端记录结果，但我在客户端看到的与记录的不匹配。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:33:55.383

这里的问题是该`mssql.query`函数是异步的。最终发生的事情是，在`forEach`循环中，您正在触发许多异步 mssql 请求，然后（不等待它们完成）您正在调用 ng`request.respond();`那时您仍然没有任何响应（请记住node.js 是单线程的，所以还没有响应）。

您需要做的是延迟调用`request.respond()`，直到对 mssql 调用的所有响应都到达。下面的代码显示了一种方法。

```
function read(query, user, request) {
    request.execute({
        success: function(results) {
            var updateResult = function(index) {
                if (index >= results.length) {
                    // all done
                    request.respond();
                } else {
                    var item = results[index];
                    var totalsql = "SELECT COUNT(*) FROM scoreInfo";
                    mssql.query(totalsql, {
                        success: function(totalresults) {
                            var totalCount = totalresults[0].Column0;

                            var moresql = "SELECT COUNT(*) FROM scoreInfo WHERE bestscore > ?";
                            mssql.query(moresql, [item.bestscore], {
                                success: function(moreresults) {
                                    var moreBestCount = moreresults[0].Column0;

                                    item.bestrank = moreBestCount + 1;
                                    item.bestpercentile = 100 - moreBestCount*100/(totalCount+1);

                                    updateResult(index + 1); // update next result
                                }
                            });
                        }
                    });
                }
            }

            updateResult(0);
        }
    });
} 
```

# android - 无法连接 Android 设备以进行 Eclipse 开发

> ID：14542428
> 
> 赞同：2
> 
> 时间：2013-01-26T22:55:17.713
> 
> 标签：android, driver

我正在运行 Windows 7，尝试通过 USB 连接我的 Android 手机，以便我可以开始在 Eclipse 中进行开发。手机是华为Prism，运行Android 2.3.6，我设置为USB调试模式。手机驱动安装失败，我收到以下错误信息：

```
Device driver software was not successfully installed
Android Adapter                      No driver found 
```

我四处搜索，但找不到有关此错误的任何信息。设备管理器显示一个黄色感叹号。

我不确定这是设备使用问题还是开发问题。我的目标是让我的手机在 Eclipse 中的 Run As... 下可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T23:15:01.833

下载并安装 Hi Suite。它用于同步华为设备，它会有你需要的驱动程序。

[http://www.huaweidevice.com/resource/mini/201105239635/hi_suite_en/](http://www.huaweidevice.com/resource/mini/201105239635/hi_suite_en/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T23:15:02.300

您必须始终安装特定手机的 USB 驱动程序才能通过 USB 进行调试。

因此，通常在 Google 上搜索“USB 驱动程序”确实有效。

我为你做了，找到了这个页面：[http ://www.huaweidevice.com/worldwide/downloadCenter.do?method=toDownloadFile&flay=software&softid=Mzk1MzA=](http://www.huaweidevice.com/worldwide/downloadCenter.do?method=toDownloadFile&flay=software&softid=Mzk1MzA=)

是你试过的驱动吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-25T13:24:21.340

更灵活的方式是安装 Adb Driver Installer：[http ://adbdriver.com/downloads/](http://adbdriver.com/downloads/)

下载后，在手机上启用 USB 调试并将其插入计算机。然后，使用 Adb Driver Installer 安装所需的驱动程序。它适用于任何安卓设备！希望这会有所帮助。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-15T03:16:11.527

我最近找到了解决华为这个 USB 问题的正确方法。

1.  访问[http://consumer.huawei.com/en/?method=toDownloadFile&flay=software&softid=Mzk1MzA=](http://consumer.huawei.com/en/?method=toDownloadFile&flay=software&softid=Mzk1MzA=)

2.  搜索：USB驱动

3.  这将是选项 HUAWEI Android Phones USB Driver

4.  确保它是版本 v1[1].0 和文件大小 7.76 MB

5.  下载 zip，解压，继续 USB 下载

注意：确保在连接设备之前进行调试并保持“保持清醒”状态。

# javascript - 如何为这个框设置动画以产生弹出效果？

> ID：14542429
> 
> 赞同：5
> 
> 时间：2013-01-26T22:55:18.413
> 
> 标签：javascript, jquery, css

我有一个简单的 div 设置，我想知道如何使它具有“弹出”效果。例如，我希望它从一个较小的矩形开始，然后让它动画成一个稍大的矩形，让它产生一种它正在向你弹出的错觉。

HTML

```
<div id="submit-logged-out">
    You must be <a href="/wp-login.php?action=register">registered</a> to submit.
</div> 
```

CSS

```
#submit-logged-out {
background: #000;
color: #fff;
font-size: 2em;
left: 112px;
padding: 40px;
position: absolute;
top: 200px;
} 
```

JSFiddle：http: [//jsfiddle.net/SSsVx/](http://jsfiddle.net/SSsVx/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T23:01:59.173

最好使用纯 CSS 来完成：

```
.popout {
    animation: popout 1s ease;
    -webkit-animation: popout 1s ease;
}
@keyframes popout {
    from{transform:scale(0)}
    80%{transform:scale(1.2)}
    to{transform:scale(1)}
}
@-webkit-keyframes popout {
    from{-webkit-transform:scale(0)}
    80%{-webkit-transform:scale(1.2)}
    to{-webkit-transform:scale(1)}
} 
```

然后只需将`.popout`课程添加到您的框中。

[更新小提琴](http://jsfiddle.net/SSsVx/2/)

# php - 使用多站点管理器在 ExpressionEngine 站点中删除通道字段时出现数据库错误

> ID：14542432
> 
> 赞同：0
> 
> 时间：2013-01-26T22:55:46.367
> 
> 标签：php, database, expressionengine

我在我的 Media Temple 网站上使用 ExpressionEngine 2.5.2。

我最近在本地环境、暂存环境和生产环境中使用 Multisite Manager 添加了第二个站点。安装完成，我的第二个模板工作正常。我只在本地设置上工作，但是一旦我启动并运行没有错误，我会将所有更改移到我的暂存站点，然后是生产站点。在本地，当我尝试在我的 ExpressionEngine 控制面板中将新的通道字段组添加到我的第二个站点时，我新创建的通道字段组会自动显示来自我的主站点的通道字段。我无法删除旧频道字段，因为我收到以下数据库错误：

错误号：1091

不能 DROP 'field_id_176'; 检查列/键是否存在

更改表`exp_channel_data`删除`field_id_176`

文件名：libraries/api/Api_channel_fields.php

行号：434

此错误因我尝试删除的频道字段而异。它会因列出无法删除的不同数据库条目而有所不同（即。“field_id_176”、“field_id_178”等）

如果我手动删除数据库中的这些字段，它会将它们从我的第二个站点中删除，但它也会将它们从我的主站点中删除。显然这是一个问题，因为我收集了太多令人困惑的领域。我还担心当我开始在生产服务器上工作时这会导致更大的问题。帮助将不胜感激。

我也无法删除第二个站点，因为它给了我相同的数据库错误。当我尝试连接第三个站点时，它无法识别包含我的模板的文件夹，并且模板管理器页面显示没有模板或模板组（文件夹存在于本地，并且我到相应目录的所有路径都是正确的）。

谢谢！

* * *

这是我的第二个站点上新创建的频道字段组的屏幕截图。我刚刚创建了这个新的字段组“新闻和视频”，并没有添加组中列出的字段。- 他们只是自动出现在组中。这些频道字段是来自我的主站点的字段。 ![在此处输入图像描述](../Images/9925543fceb33c572085f0ef5e6cf95e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:04:03.897

不幸的是，我无法解决计算机上的确切问题，但是（幸运的是！）我们在计算机上运行了第二个副本而没有错误。我结束了将所有这些文件复制到我的机器上，然后导入该数据库，现在一切正常。

# php - MYSQL 将标签表合二为一

> ID：14542433
> 
> 赞同：1
> 
> 时间：2013-01-26T22:55:56.603
> 
> 标签：php, mysql, database-design

我有表格来组织标签..

文章和文章标签的 3 个表格：

```
article_tags
---
tag_id *
tag_name

articles
---
article_id *
article_name 

individual_article_tags
----
article_id *
tag_id * 
```

以及 3 个用于图像和图像标签的单独表格

```
image_tags
---
tag_id *
tag_name

images
---
image_id *
image_name 

individual_image_tags
----
image_id *
tag_id * 
```

我希望文章和图像表仅引用 1 个标签表，而不是像这样的 2 个标签表：

```
tags
---
tag_id *
tag_name

articles
---
article_id *
article_name 

individual_article_tags
----
article_id *
tag_id *

images
---
image_id *
image_name 

individual_image_tags
----
image_id *
tag_id * 
```

问题是标签有不同的ID，我不知道如何合并它们..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:05:12.697

首先，`tags_unified`通过`INSERT INTO ...SELECT`使用`UNION`. 结果将是两个表中所有标签的不同集合。

```
CREATE TABLE tags_unified (
  tags_id INT PRIMARY KEY AUTO_INCREMENT,
  tag_name VARCHAR(64)
);

/* Load up all the tags with new ids */
INSERT INTO tags_unified (tag_name)
  SELECT tag_name FROM article_tags
  UNION
  SELECT tag_name FROM image_tags 
```

然后`UPDATE`所有的`individual_image_tags`和`inidividual_article_tags`用一个`JOIN`查询来获取新的ID。

```
UPDATE
  individual_image_tags
  JOIN image_tags ON individual_image_tags.tag_id = image_tags.tag_id
  /* LEFT JOIN the old tags to the new tags by tag_name */
  LEFT JOIN tags_unified ON image_tags.tag_name = tags_unified.tag_name
SET individual_image_tags.tag_id = tags_unified.tag_id
/* And update those which have a match in the new tags table */
WHERE tags_unified.tag_id IS NOT NULL

UPDATE
  individual_article_tags
  JOIN article_tags ON individual_article_tags.tag_id = article_tags.tag_id
  LEFT JOIN tags_unified ON article_tags.tag_name = tags_unified.tag_name
SET individual_article_tags.tag_id = tags_unified.tag_id
WHERE tags_unified.tag_id IS NOT NULL 
```

在运行`UPDATE`语句之前，将它们重新形成为`SELECT`语句以验证结果。

```
SELECT
  individual_image_tags.*, 
  tags_unified.*
FROM
  individual_image_tags
  JOIN image_tags ON individual_image_tags.tag_id = image_tags.tag_id
  LEFT JOIN tags_unified ON image_tags.tag_name = tags_unified.tag_name
WHERE tags_unified.tag_id IS NOT NULL

SELECT
 individual_article_tags.*, 
 tags_unified.*
FROM
  individual_article_tags
  JOIN article_tags ON individual_article_tags.tag_id = article_tags.tag_id
  LEFT JOIN tags_unified ON article_tags.tag_name = tags_unified.tag_name
WHERE tags_unified.tag_id IS NOT NULL 
```

### 编辑：

`LEFT JOIN`and`WHERE`子句实际上不应该是必需的，因为应该*是*表中每个现有标记的匹配项`tags_unified`。

### 评论后更新：

创建临时表并从中重新填充原始链接表可能比删除和重新添加唯一约束或复合键更容易。使用`CREATE TEMPORARY TABLE AS SELECT...`. 然后从原始表中删除所有行并用于`INSERT INTO ... SELECT`从临时表中重新填充它。

```
CREATE TEMPORARY TABLE temp_individual_article_tags AS
    SELECT
     individual_article_tags.article_id 
     tags_unified.tag_id
    FROM
      individual_article_tags
      JOIN article_tags ON individual_article_tags.tag_id = article_tags.tag_id
      LEFT JOIN tags_unified ON article_tags.tag_name = tags_unified.tag_name
    WHERE tags_unified.tag_id IS NOT NULL 
```

# javascript - 使用 list.js 不会显示 HTML5 音频

> ID：14542436
> 
> 赞同：1
> 
> 时间：2013-01-26T22:55:58.903
> 
> 标签：javascript, jquery, html, audio

我使用 list.js 制作了一个列表，但我遇到了 HTML5 音频标签的问题。

我有这个页面：[http](http://bagnummeret.dk/list) ://bagnummeret.dk/list ，它可以在桌面浏览器（Chrome、Safari、Firefox、Opera）中完美运行。**但**如果我在 iPhone（Safari、Chrome、Opera）上访问同一页面，音频将不会显示。

使音频显示的解决方法是在`<ul>`而不是“类”上使用“id”：http: [//bagnummeret.dk/list-id](http://bagnummeret.dk/list-id)

这将使音频同时出现在桌面和移动浏览器中。**但是**，这会破坏 list.js 实现，它会过滤类元素。在 list-id 页面上，您可以看到过滤器不起作用。

我不是 javascript 和 jquery 方面的专家，但可以通过 list.js 代码并使过滤器在“id”上工作，但这真的有必要吗？

我希望我已经为您提供了足够的文档来深入了解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:25:11.603

好的，所以我使用[audio.js](http://kolber.github.com/audiojs/)代码解决了我的问题 :)

# vba - VBA for Word - 基于页面定位文本框

> ID：14542438
> 
> 赞同：0
> 
> 时间：2013-01-26T22:56:40.400
> 
> 标签：vba, ms-word

在将大量（150 个？）标注（边缘中的简单文本框，没有边框）添加到带有镜像奇数/偶数页的 Word 2010 .docx 文件后，我需要调整一些文本。这将文档缩短到足以删除一页，因此调整后的所有奇数页都变成了偶数页，而偶数页变成了奇数页。文本框没有移动，现在它们都从纸张边缘掉了下来，由于纸张边界之外的文本没有显示在文档中，甚至都很难找到它们，更不用说移动它们了到他们在相反边距的正确位置。此外，我可能需要再次调整文本，问题可能会再次出现。

我正在寻找一种自动化的方式，使用 VBA（我绝对是一个新手，虽然是一个专家程序员），记录一些宏来说，“将所有现有的文本框居中在宽边距中，并使宽度一致。” 就像是，

> 作为一个文本框，如果我发现自己在奇数页上，使文本框的左边缘距页面左边缘 0.5"；如果我在偶数页上，使文本框的左边缘在右边距 + 0.5"。我的身高应该是一致的，我的身高可以保持原来的样子。

我需要知道用什么单位来表示 Top 和 Width 值，如何确定我是在奇数/偶数页上，以及如何找到所有文本框。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:39:04.403

```
Sub AdjustTextBoxes()

Dim myTextBox As Shape
Dim PageNumber As Integer

For Each myTextBox In ActiveDocument.Shapes
    If myTextBox.Type = msoTextBox Then
        myTextBox.Select
        PageNumber = Selection.Information(wdActiveEndPageNumber)
        'Mod returns the remainder (rounded up) of the division.
        'No remainder is even. Any remainder is an odd page.
        If PageNumber Mod 2 = 1 Then
            With myTextBox 'Odd numbered pages
                .RelativeHorizontalPosition = wdRelativeHorizontalPositionPage 
                .Left = InchesToPoints(0.5)
            End With
        Else
            'Because wdRelativeHorizontalPositonPage measures from the left
            'edge of the page the positioning for text boxes on even pages
            'is not based on the distance from the right margin.
            'So below .Left = 8.5" (page width) - (1" (textbox with) + .5" (distance
            'from the right edge of the page). The measurement for .left below
            'will need to be altered based on the position from the right edge
            'of the page and the width of your text boxes and pages.
            With myTextBox 'Even numbered pages
                .RelativeHorizontalPosition = wdRelativeHorizontalPositionPage
                .Left = InchesToPoints(7)
            End With
        End If
    End If
Next

End Sub 
```

# windows-8 - 重复入口主题过渡

> ID：14542439
> 
> 赞同：9
> 
> 时间：2013-01-26T22:57:08.113
> 
> 标签：windows-8, winrt-xaml

我使用模板化的 RadioButtons 和 Grids 完成了一个简单的 TabControl，当 RadioButton 上的 IsChecked 发生变化时，它们会改变可见性，如下所示：

```
<Grid Name="TabGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Orientation="Horizontal">
            <RadioButton x:Name="RadioButton1" Content="Latest" Style="{StaticResource TabRadioButtonStyle}" IsChecked="True" GroupName="G1"/>
            <RadioButton x:Name="RadioButton2" Content="Popular" Style="{StaticResource TabRadioButtonStyle}" IsChecked="False" GroupName="G1" Margin="30,0,0,0" />
        </StackPanel> 
```

现在，里面的每个网格都定义了 EntranceThemeTransition，如下所示：

```
 <GridGrid.Row="1" Visibility="{Binding ElementName=RadioButton1, Path=IsChecked, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid.ChildrenTransitions>
                <TransitionCollection>
                    <EntranceThemeTransition />
                </TransitionCollection>
            </Grid.ChildrenTransitions> 
```

据我了解，EntranceThemeTransition 仅在项目首次显示时显示。每次 Grid 的可见性发生变化时，有没有办法强制 EntranceThemeTransition 重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-24T12:43:25.950

这并不能完全回答您的问题，但我认为这将帮助许多人登陆这里：

如果您想为数据绑定列表框中的项目重复入口动画，我发现只有一种方法：

*   将列表框的 DataContext 设置为 null（这将删除项目）。
*   将列表框的 DataContext 设置回您的列表/可观察集合（这将重新创建项目并将它们添加到带有动画的列表框）。

通过重置 DataContext 您正在创建新的列表框项，并且它们尚未标记为已进入视图。

关于你的问题；我认为您需要创建一个新版本的网格才能再次播放入口动画。

# unix - rm -rf 中的 rf 代表什么？

> ID：14542441
> 
> 赞同：60
> 
> 时间：2013-01-26T22:57:21.963
> 
> 标签：unix, terminal

Unix 中的 in 代表`rf`什么？`rm -rf`

更一般地说，我很难记住 Unix 命令和选项，因为我不明白它们代表什么。是否有资源可以解释这些速记的含义？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-26T22:58:51.967

在`rm`,

*   `-r`代表*递归*
*   `-f`代表*力量*

文件：

```
man rm 
```

说过 ：

> ```
>  -f, --force
>            ignore nonexistent files and arguments, never prompt
> 
>     -r, -R, --recursive
>            remove directories and their contents recursively 
> ```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-26T22:58:52.180

`rm`意味着删除

`r`表示递归，在删除整个文件夹时必须使用它 `f`意味着强制删除

结合，`rm -rf someDirectory`意味着**强制递归删除 someDirectory**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-12T10:02:45.297

-r

> 递归删除参数列表中的目录和子目录。该目录将清空文件并删除。通常会提示用户删除目录包含的所有写保护文件。但是，如果使用了 -f 选项，或者如果标准输入不是终端并且未使用 -i 选项，则会在不提示的情况下删除写保护文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-26T22:58:39.747

我相信这是递归的力量

# codeigniter - Codeigniter 加载没有“_helper”后缀的助手？

> ID：14542443
> 
> 赞同：2
> 
> 时间：2013-01-26T22:57:26.903
> 
> 标签：codeigniter, codeigniter-2, helpers, orientdb

我正在尝试在 Code Igniter 中实现 OrientDB HTTP 连接，但我不能完全决定如何去做。基本上，我使用的是[此处](https://github.com/doctrine/orientdb-odm)找到的 php 代码，我无法决定是否将该文件集合放入库或助手中。

现在，我倾向于使用助手，因为自动实例化类，在示例代码`$this->load->library()`中我还需要调用静态方法的能力（从使用 中可以看出）。`BindingParameters::create('http://admin:admin@127.0.0.1:2480/demo');`

那么，如果我将这些文件变成不应该实例化类的助手，有没有办法在不向文件本身添加“_helper”后缀的情况下加载它们？我想避免使用 require/include，但如果没有其他方法可以做到这一点，那么我别无选择。

有没有人有任何提示或想法可以帮助我解决这个问题？预先感谢。

# magento - 找不到免费的 Facebook 连接错误 404

> ID：14542446
> 
> 赞同：1
> 
> 时间：2013-01-26T22:57:48.960
> 
> 标签：magento

我安装了 Magento 扩展 Facebook Connect [http://www.magentocommerce.com/magento-connect/facebookfreebelvg-4448.html](http://www.magentocommerce.com/magento-connect/facebookfreebelvg-4448.html) 但是当我去配置 - > facebook 我收到一个错误：404 错误，找不到页面有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:51:07.297

退出管理面板并重新登录，以便重新加载 ACL。

与更多信息相关的问题：[安装新的 Magento 扩展需要注销/登录，否则您会在管理页面中获得 404](https://stackoverflow.com/questions/12956794/installing-a-new-magento-extension-requires-logout-login-otherwise-you-get-404)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:25:44.947

清除缓存等。这是在 Magento 中使用 3rd 方扩展时要知道的简单内容。

*附言。[http://store.belvg.com/media/Facebook%20Connect%20and%20Like%20User%20Guide.pdf](http://store.belvg.com/media/Facebook%20Connect%20and%20Like%20User%20Guide.pdf)*

# java - 在 JAVA 中捕获外部程序的输出

> ID：14542448
> 
> 赞同：8
> 
> 时间：2013-01-26T22:58:14.737
> 
> 标签：java, exec, output

我正在尝试使用 java 捕获外部程序的输出，但我不能。

我有显示它的代码，但没有将它放入变量中。

例如，我将使用 sqlplus 执行我的 oracle 代码“进入 exec.sql” system/orcl@orcl ：用户/密码/数据库名称

```
public static String test_script () {
        String RESULT="";
        String fileName = "@src\\exec.sql";
        String sqlPath = ".";
        String arg1="system/orcl@orcl";
        String sqlCmd = "sqlplus";

        String arg2   = fileName;
        try {
            String line;
            ProcessBuilder pb = new ProcessBuilder(sqlCmd, arg1, arg2);
            Map<String, String> env = pb.environment();
            env.put("VAR1", arg1);
            env.put("VAR2", arg2);
            pb.directory(new File(sqlPath));
            pb.redirectErrorStream(true);
            Process p = pb.start();
          BufferedReader bri = new BufferedReader
            (new InputStreamReader(p.getInputStream()));

          while ((line = bri.readLine()) != null) {

              RESULT+=line;

          }

          System.out.println("Done.");
        }
        catch (Exception err) {
          err.printStackTrace();
        }
 return RESULT;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T23:39:16.877

因为 Process 将在新线程中执行，所以当您进入 while 循环时，可能没有输出或不完整的输出可用。

```
Process p = pb.start();  
// process runs in another thread parallel to this one

BufferedReader bri = new BufferedReader(new InputStreamReader(p.getInputStream()));

// bri may be empty or incomplete.
while ((line = bri.readLine()) != null) {
    RESULT+=line;
} 
```

因此，您需要等待该过程完成，然后再尝试与其输出进行交互。尝试使用[Process.waitFor()](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#waitFor%28%29)方法暂停当前线程，直到您的进程有机会完成。

```
Process p = pb.start();  
p.waitFor();  // wait for process to finish then continue.

BufferedReader bri = new BufferedReader(new InputStreamReader(p.getInputStream()));

while ((line = bri.readLine()) != null) {
    RESULT+=line;
} 
```

这只是一种简单的方法，您还可以在进程并行运行时处理进程的输出，但随后您需要监视进程的状态，即它是否仍在运行或是否已完成，以及输出的可用性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T23:00:23.607

使用[Apache Commons Exec](http://commons.apache.org/exec/)，它会让你的生活更轻松。查看[教程](http://commons.apache.org/exec/tutorial.html)以获取有关基本用法的信息。要在获取`executor`对象（可能是）后读取命令行输出，请为您希望的任何流`DefaultExecutor`创建一个（即实例可能是，或），并且：`OutputStream``FileOutputStream``System.out`

```
executor.setStreamHandler(new PumpStreamHandler(yourOutputStream)); 
```

# function - 编写一个函数，计算输入项数的正弦值。MATLAB

> ID：14542451
> 
> 赞同：-5
> 
> 时间：2013-01-26T22:58:41.000
> 
> 标签：function, matlab, trigonometry

我一生都无法弄清楚如何在 MATLAB 中创建一个函数来执行此操作。我对 MATLAB 完全陌生，我真的不知道从哪里开始。我知道如何编写一个函数来计算阶乘，但我不知道如何使用循环将每个下一项添加到我想要的项数.. 一些帮助将不胜感激。![这是问题所在](../Images/932035384e0b2081a4fedc9e2825075b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:25:25.350

你可以试试这个

`syms x Y = sin(x);`

`Y_1 = taylor(Y,1);`

Taylor 将以一系列一阶展开 Y_1。如果您想扩展订单，`n`只需输入`taylor(Y,n)`

如果您想在某个点上评估泰勒级数，`x0`请致电

`subs(Y_1,x0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:05:22.657

自己找到了答案。请注意，sinx 和 sin(x) 之间存在差异

```
function  [sinx, error] = sinx_approx(x)
%   approximates the value of sin(x), the approximation is more accurate as
%   the number of terms selected is increased. 

n= input('Up to how many terms would you like to evaluate?');

sinx=0;
for i=1:1:n
    sinx=(-1)^(i+1) * x.^(2*i-1)/ factorial(2*i-1)+ sinx;
    error=((sin(x)-sinx)/sin(x))*100;
    display(sinx);
    display(error);
end    

end 
```

%%Factorial 是一个内置命令

# html - Firefox 不正确地显示表格单元格

> ID：14542455
> 
> 赞同：2
> 
> 时间：2013-01-26T22:59:21.487
> 
> 标签：html, css, firefox

在用 HTML 构建表格时，我在 Firefox 中遇到了一个奇怪的行为，其中两个单元格被错误地分组。这是该表的 HTML：

```
<table id="schedule">
    <thead>
        <tr>
            <td id="corner"></td>
            <th colspan="1">Monday</th>
            <th colspan="1">Tuesday</th>
            <th colspan="1">Wednesday</th>
            <th colspan="1">Thursday</th>
            <th colspan="1">Friday</th>
        </tr>
    </thead>
    <tfoot></tfoot>
    <tbody>
        <tr style="height: 54px;">
            <th>10:00 - 11:00</th>
            <td class="class" rowspan="9"><span class="acronym">1</span><span class="location"><br/></span></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="class" rowspan="4"><span class="acronym">6</span><span class="location"><br/></span></td>
        </tr>
        <tr style="height: 54px;">
            <th>11:00 - 12:00</th>
            <td style="display: none;"></td>
            <td class="class" rowspan="7"><span class="acronym">2</span><span class="location"><br/></span></td>
            <td></td>
            <td></td>
            <td style="display: none;"></td>
        </tr>
        <tr style="height: 54px;">
            <th>12:00 - 13:00</th>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td class="class" rowspan="5"><span class="acronym">3</span><span class="location"><br/></span></td>
            <td></td>
            <td style="display: none;"></td>
        </tr>
        <tr style="height: 54px;">
            <th>13:00 - 14:00</th>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td class="class" rowspan="3"><span class="acronym">4</span><span class="location"><br/></span></td>
            <td style="display: none;"></td>
        </tr>
        <tr style="height: 54px;">
            <th>14:00 - 15:00</th>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td class="class" rowspan="1"><span class="acronym">5</span><span class="location"><br/></span></td>
        </tr>
        <tr style="height: 54px;">
            <th>15:00 - 16:00</th>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td></td>
        </tr>
        <tr style="height: 54px;">
            <th>16:00 - 17:00</th>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td></td>
            <td></td>
        </tr>
        <tr style="height: 54px;">
            <th>17:00 - 18:00</th>
            <td style="display: none;"></td>
            <td style="display: none;"></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr style="height: 54px;">
            <th>18:00 - 19:00</th>
            <td style="display: none;"></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

这是我正在使用的 CSS：

```
body {
    margin: 2%;
    padding: 0;
    font-family: sans-serif;
    background: #f9f9f9;
    color: #333;
}
#schedule {
    width: 100%;
    border-collapse: collapse;
    vertical-align: middle;
    font-size: 9px;
}
#schedule #corner {
    border: 0;
    background: none;
}
#schedule th {
    min-width: 85px;
    width: 16%;
    border: 1px solid #a6a6a6;
    padding: 5px 0;
    background: #737373;
    color: #fff;
    font-weight: bold;
    text-align: center;
}
#schedule td {
    border: 1px solid #a6a6a6;
    background: white;
    text-align: center;
}
#schedule .class {
    background: #e0e0e0;
}
#schedule .acronym {
    font-weight: bold;
    font-size: 11px;
}
#schedule .location {
    font-size: 8px;
}
#schedule .footer {
    border: 0;
} 
```

我使用我正在测试的脚本制作了这个，所以请不要介意表格与所有`display: none`.

因此，发生的情况是，在 Firefox 中，在最后一列（星期五）中，两个单元格（5 和 6）似乎都是分组的，即使它们不是。
这可能是我正在使用的 CSS 或 Firefox 本身的问题，因为该问题似乎不会出现在其他浏览器中（至少是我测试过的浏览器）。

这是带有上述代码的 JSFiddle：[jsfiddle.net/kdH5M/4/](http://jsfiddle.net/kdH5M/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:43:10.387

我修改了你的[小提琴](http://jsfiddle.net/axelmichel/U7fh3/2/)。问题是边框折叠，确实很奇怪，所以我删除了它并手动定义了边框，如下所示：

```
#schedule {
    width: 100%;
    vertical-align: middle;
    border: 1px solid #a6a6a6;
    border-collapse:separate;
    border-width:0 1px 0 0;
    font-size: 9px;
}

#schedule tbody tr:first-child th,
#schedule thead th {
    border-top: 1px solid #a6a6a6;
}

#schedule th {
    min-width: 85px;
    width: 16%;
    border: 1px solid #a6a6a6;
    border-width:0 0 1px 1px;
    padding: 5px 0;
    background: #737373;
    color: #fff;
    font-weight: bold;
    text-align: center;
}
#schedule td {
    border: 1px solid #a6a6a6;
     border-width:0 0 1px 1px;
    background: white;
    text-align: center;
} 
```

# jquery - 通过单击表格行查看详细信息

> ID：14542456
> 
> 赞同：0
> 
> 时间：2013-01-26T22:59:27.650
> 
> 标签：jquery, jsp, spring-mvc

我的jsp中有简单的表格。

```
<table class="table table-bordered">
    <tr>
        <th>#</th>
        <th>Name</th>
        <th>Surname</th>
        <th>Age</th>
        <th>Email</th>
    </tr>
    <c:forEach var="employee" items="${employeeList}">
        <tr class=row>
            <td>${employee.id}</td>
            <td>${employee.name}</td>
            <td>${employee.surname}</td>
            <td>${employee.age}</td>
            <td>${employee.email}</td>
        </tr>
    </c:forEach>
</table> 
```

我的控制器：

```
 @Controller
public class BrowseController {

    @Autowired
    private SpringJdbcDao springJdbcDao;

    public void setSpringJdbcDao(SpringJdbcDao springJdbcDao) {
        this.springJdbcDao = springJdbcDao;
    }

    @RequestMapping(value = "/browse")
    public String browseEmployees(Model model) {
        List<Employee> employeeList = new ArrayList<Employee>(springJdbcDao.getEmployeesList());
        model.addAttribute("employeeList", employeeList);
        return "browse";
    }

    @RequestMapping(value = "/browse/details/{id}", method = RequestMethod.GET)
    public String viewDetails(@PathVariable("id") int id, Model model) {
        Employee employee = springJdbcDao.getEmployeeById(id);
        model.addAttribute("data", employee);
        return "details";
    }
} 
```

我需要通过单击表格的行重定向到“/browse/details/{id}”以查看有关员工的详细信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:05:54.283

建议在行中添加一个`data-`属性，以便更简单地获取员工 ID：

```
<tr class=row data-emp_id="${employee.id}"></tr> 
```

现在单击行时对服务器进行 AJAX 调用：

```
var dataType='html';/* this is default and argument for `$.get` not needed for default, is shown for understanding*/
$('tr').click(function(){        
   $.get('/path/to server/', { id: $(this).data('emp_id') }, function( response){
       /* do something with response be it html, xml or JSON response*/
   }, dataType)
}); 
```

在服务器接收`id`任何表单控件元素`name="id"`并发送回相应的数据

# debugging - 如何让 Firefox 调试器在单独的窗口/选项卡中运行？

> ID：14542459
> 
> 赞同：1
> 
> 时间：2013-01-26T22:59:58.710
> 
> 标签：debugging, firefox, browser

我确实想知道是否可以在新窗口/选项卡中打开 Firefox（我有 18.0.1）调试器，因为现在调试器的窗格在页面底部太小了。

[编辑] 好的，我制作了一些屏幕截图来显示 Firefox 确实有自己的调试器：

![激活开发者工具](../Images/0fb73511c1e446637eabcc52a4dc91af.png)

![调试器出现在页面底部](../Images/3c32a5b55041feebfbfe9b366652b591.png)

![点击调试按钮](../Images/8c5fd3a1f42ef1d0e42ee204a7f8c37a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:47:05.060

当前的 Firefox nightlies 在调试器工具栏中的“x”旁边有一个小两个窗口图标，可以将其撕成一个单独的窗口，但在 18 中可能还没有......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:05:27.740

如果您指的是 Firebug，那么这些说明就足够了。

*   单击 Firebug 启动图标，显示隐藏的子菜单。
*   将鼠标悬停在“Firebug UI 位置”上
*   选择“分离”

**编辑：** 好的，我明白了...您使用的是开发人员工具中内置的 Firefox，而不是 Firebug。

据我了解，似乎没有办法在单独的窗口上运行 JavaScript 调试器以进行非远程工作。这是直接来自 JS Debugger 文档的声明：

> JavaScript 调试器有两种可用：一种用于调试直接在 Firefox 中运行的内容，另一种用于调试在 Firefox OS 设备或 Android 设备上的 Firefox 中运行的代码。两者的主要区别在于远程调试器在自己的窗口中运行，而 Web 内容调试器在与您正在调试的 Web 内容相同的选项卡中运行。

这里也是调试器文档的链接： [https ://developer.mozilla.org/en-US/docs/Tools/Debugger](https://developer.mozilla.org/en-US/docs/Tools/Debugger)

为什么你认为 Debugger 视图太小了？如果将鼠标悬停在顶部栏上，则可以根据需要向上/向下拖动它。另外，您确定 JavaScript 调试器是您要使用的吗？例如 Firefox 也有其他工具。“更多工具”链接还显示了其他内置工具 - 所有这些工具统称为“开发者工具”。这是他们所有文档的链接：[https ://developer.mozilla.org/en-US/docs/Tools](https://developer.mozilla.org/en-US/docs/Tools)

我希望这现在更有意义！

截屏： ![在此处输入图像描述](../Images/b1ddb081a424925cb639c71ca8a5d0ca.png)

# mysql - 创建mysql多对多查询

> ID：14542463
> 
> 赞同：0
> 
> 时间：2013-01-26T23:00:34.967
> 
> 标签：mysql, sql, phpmyadmin

好的，我是 mysql 的初学者，但我一直在尝试为多对多表创建查询。

我目前的结构是：

* * *

## 产品

*   库存单位
*   产品名称
*   价格
*   ETC..

* * *

## 类别

*   ID
*   类别

* * *

## products_categories

*   product_id（来自 sku 列）
*   类别ID

* * *

如何查询以下内容：

*   一个类别中的所有产品
*   与产品关联的所有类别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:09:42.460

**一个类别中的所有产品**

```
select p.product_name 
from products p
join product_categories pc
on p.sku = pc.product_id
join categories c
on c.id = pc.category_id
where c.category like '%CATEGORY_NAME_HERE%'; 
```

**与产品关联的所有类别**

```
select c.category
from category c
join product_categories pc
on c.category_id = pc.category_id
join product p
on p.sku = pc.product_id
where p.product_name like '%PRODUCT_NAME_HERE%'; 
```

# php - 在 PHP 中将 MySQL 数据导出为 CSV 时自动前进到下一行？

> ID：14542464
> 
> 赞同：1
> 
> 时间：2013-01-26T23:00:40.380
> 
> 标签：php, mysql, csv, export

我试图让一个脚本工作，其中选择某些选定的记录（取决于用户输入），然后导出到 CSV 文件。我已经尝试了各种方法来做到这一点；到目前为止，这是我能找到的最成功的（实际上来自我几年前做的一些代码），但它只会一遍又一遍地返回第一行，直到行用完（你可以看到我的锯末-传输方法我曾经告诉 PHP 不断获取行，直到结果用尽）。我的问题：可能有一种更简单的方法可以做到这一点——有什么想法吗？如果没有，我该怎么做才能让 MySQL 在下次运行循环时前进到下一行？我认为无论如何都应该使用 mysql_fetch_array 来做到这一点。

是的，我看过 fputcsv，但我似乎无法让任何数据通过。当我尝试使用 fputcsv 传递数组并通过 mysql_fetch_array、mysql_fetch_assoc 或 mysql_fetch_row 获取数组时，CSV 文件总是空白。

我一直在学习，这是我还没有学到一些东西以继续前进的那些时候之一。而且我知道的也不多。

我的代码，或者至少是必要的代码：

```
 $result = mysql_query("SELECT id FROM student_history WHERE username='$username'");
    $numrows = mysql_num_rows($result);
    if (!$result) {
        die("Query to show fields from table failed!:" .mysql_error());
    }
    $write = fopen("exportedmagic.csv", 'w') or die ("Can't create/open file to write! Drats!");
    fwrite($write, "ID, Username, Class, Status, Date, Time\n");
    while($numrows > 0) {
        $query = "SELECT id, username, class, status, date, time FROM student_history WHERE username='$username'";
        $result = mysql_query($query);
        $row = mysql_fetch_array($result);
        $id = $row['id'];
        $username = $row['username'];
        $class = $row['class'];
        $status = $row['status'];
        $date = $row['date'];
        $time = $row['time'];
        fwrite($write, $id .", " .$username .", " .$class .", " .$status .", " .$date .", " .$time ."\n");
        $numrows--;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:06:54.547

您是否考虑过 MySQL 将查询结果转储到 CSV 输出文件的内置功能？

[http://dev.mysql.com/doc/refman/5.5/en/select-into.html](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)

它有几个注意事项，例如文件是写在数据库服务器上的。

但是谈到您的代码，我注意到您将 mysql_query()*放在*while 循环中，因此它在仅获取一行后有效地重新开始查询。我期待更多这样的事情：

```
$result = mysql_query(...);
while ($row = mysql_fetch_array($result)) {
  fputcsv($filehandle, $row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:13:25.160

尝试更改为-

```
if($numrows > 0) {
    $query = "SELECT id, username, class, status, date, time FROM student_history WHERE username='$username'";
    $result = mysql_query($query);
    while ($row = mysql_fetch_array($result){
        $id = $row['id'];
        $username = $row['username'];
        $class = $row['class'];
        $status = $row['status'];
        $date = $row['date'];
        $time = $row['time'];
        fwrite($write, $id .", " .$username .", " .$class .", " .$status .", " .$date .", " .$time ."\n");
    }
} 
```

随着使用`while($numrows > 0){$query= ... $numrows--;`，您每次通过循环时都会重做查询。

此外，`fwrite()`您可以使用[`fputcsv()`](http://us2.php.net/manual/en/function.fputcsv.php)which 而不是使用 which 可以添加行，而无需遍历当前代码中的每个列值。

注意：您将需要查看更新到`mysqli_*`或`PDO`在`mysql_*`扩展折旧时更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T00:21:25.367

`mysql_`已弃用。请使用[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)或[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)。

这是 PHP PDO 示例：

```
$stmt = $this->db
    ->prepare("SELECT 1;", [\PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => false]);
$stmt->execute();

$fp = fopen('compress.zlib:///foo.csv.gz', 'wb9');

while ($e = $stmt->fetch(\PDO::FETCH_NUM)) {
    fputcsv($fp, $e);
}

fclose($fp); 
```

如果您不想使用 gzip 压缩，则只需删除`compress.zlib://`前缀并替换`wb9`为`wb`.

# ios - 应用进入应用商店后，有什么方法可以更改捆绑显示名称？

> ID：14542465
> 
> 赞同：0
> 
> 时间：2013-01-26T23:01:07.120
> 
> 标签：ios

> **可能重复：**
> [应用程序必须准备好上传到 iTunes Connect，然后才能从 Xcode 中验证或提交](https://stackoverflow.com/questions/12825724/applications-must-be-ready-for-upload-on-itunes-connect-before-they-can-be-valid)

在发布我的应用程序时，我遇到了一些关于配置文件、认证等的问题，并且不得不手动更改我的 info.plist 文件中的一些值。我错误地将捆绑显示名称更改为 com.myname.appname。现在，在应用程序获得批准后，它会在图标下显示此名称。当然我想要正常的名称，当我尝试在 xcode 中更改捆绑显示名称时，当我尝试提交更新时它不会允许我，因为它说我的 iTunes 中没有这样的应用程序。我该如何解决？我只想在图标下使用不同的名称。而且iTunes connect和appstore上的应用名称都是正常的。可以做什么？

编辑：澄清。我在应用商店有一个应用。它有错误的捆绑显示名称。在我更改捆绑显示名称后，在 Xcode 中将版本设置为 1.1，然后我尝试将其上传到 Appstore，它显示 - “应用程序必须准备好上传到 iTunes Connect，然后才能从 Xcode 中验证或提交。” 我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:38:26.307

在发布更新之前，您必须继续 iTunes 连接并填写所需信息。

完成后，您可以继续从 XCode 中进行实际上传。

# c# - 从其他线程更新 GUI

> ID：14542466
> 
> 赞同：1
> 
> 时间：2013-01-26T23:01:13.433
> 
> 标签：c#, .net, multithreading

我正在尝试从另一个线程更新列表框，实现此目的的最简单方法是什么？

我尝试调用文本框，但它不起作用。

```
private void dowork()
{
    TcpClient client = new TcpClient();
    client.Connect("192.168.1.3", 10);
    StreamWriter writer = new StreamWriter(client.GetStream());
    StreamReader reader = new StreamReader(client.GetStream());

    JObject o = new JObject();
    o.Add("comando", 1);
    o.Add("dir", @"C:\Users\klein\Desktop\Acionamentos");
    writer.Write(o.ToString());
    writer.Flush();
    JArray array = JArray.Parse(reader.ReadToEnd());
    for (int i = 0; i < array.Count; i++)
    {
        listBox1.Items.Add(array[i]);  //update GUI from this thread
    }
}

private void button1_Click(object sender, EventArgs e)
{
    Thread t = new Thread(dowork);
    t.Start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:04:30.260

您可以使用`Control.Invoke`获取 UI 线程，然后更新列表框。

但是，我建议您考虑使用`BackgroundWorker`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:13:03.553

我会使用`BackgroundWorker`，您可以在 中执行异步操作`DoWork`，使用报告您的进度`bgworker.ReportProgress()`，您将获得回调`ProgressChanged`（我会为每个处理的元素调用 ReportProgress），然后您将能够更新您的 GUI 控件。

工人也可以`RunWorkerCompleted`在结束时开火。

```
YourType arrayitem;

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    TcpClient client = new TcpClient();
    client.Connect("192.168.1.3", 10);
    StreamWriter writer = new StreamWriter(client.GetStream());
    StreamReader reader = new StreamReader(client.GetStream());

    JObject o = new JObject();
    o.Add("comando", 1);
    o.Add("dir", @"C:\Users\klein\Desktop\Acionamentos");
    writer.Write(o.ToString());
    writer.Flush();
    JArray array = JArray.Parse(reader.ReadToEnd());

    int percentage;

    for (int i = 0; i < array.Count; i++)
    {
        arrayitem = array[i];
        percentage = ((i + 1)*100)/array.Count;
        backgroundWorker1.ReportProgress(percentage);
    }
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    listBox1.Items.Add(arrayitem);
    progressBar1.Value = e.ProgressPercentage; // in case you'd want to add a progressbar
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    label1.Text = "Done";
} 
```

请记住，您的背景工作者必须在`WorkerReportProgress`属性中具有 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T06:26:52.753

您需要使用 Dispatcher.BeginInvoke。您可以查看[此](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)链接以更好地了解如何从不同线程更新 UI 控件。例如，如果列表框名为 listbox1

```
for (int i = 0; i < array.Count; i++)
{
    listBox1.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal,
        new Action(delegate() { listBox1.Items.Add(array[i]) });
} 
```

# c# - DataGridView 列中的数字文本框

> ID：14542470
> 
> 赞同：2
> 
> 时间：2013-01-26T23:01:54.017
> 
> 标签：c#, winforms, datagridview

我有一个`DataGridView`. 我希望它的第一列或任何所需的列（其中包含`textboxes`）为*`NUMERIC ONLY`*. 我目前正在使用此代码：

```
private void dataGridViewItems_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            if (dataGridViewItems.CurrentCell.ColumnIndex == dataGridViewItems.Columns["itemID"].Index)
            {
                TextBox itemID = e.Control as TextBox;
                if (itemID != null)
                {
                    itemID.KeyPress += new KeyPressEventHandler(itemID_KeyPress);
                }
            }
        }

private void itemID_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!char.IsControl(e.KeyChar)
                && !char.IsDigit(e.KeyChar))
            {
                e.Handled = true;
            }
        } 
```

此代码有效，但问题是所有`textboxes`列中的所有列都只获取数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:07:42.583

我自己想出来了：）

刚刚删除了解决我的问题的函数开始时的先前事件。

```
private void dataGridViewItems_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            e.Control.KeyPress -= new KeyPressEventHandler(itemID_KeyPress);//This line of code resolved my issue
            if (dataGridViewItems.CurrentCell.ColumnIndex == dataGridViewItems.Columns["itemID"].Index)
            {
                TextBox itemID = e.Control as TextBox;
                if (itemID != null)
                {
                    itemID.KeyPress += new KeyPressEventHandler(itemID_KeyPress);
                }
            }
        }

private void itemID_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!char.IsControl(e.KeyChar)
                && !char.IsDigit(e.KeyChar))
            {
                e.Handled = true;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:06:47.433

您可以在列表中添加所有数字单元格索引。

像这样：

```
List<int> list_numeric_columns = new List<int>{ dataGridViewItems.Columns["itemID"].Index}; 
```

您在那里添加所有需要的列。

然后，而不是这样做：

```
if (dataGridViewItems.CurrentCell.ColumnIndex == dataGridViewItems.Columns["itemID"].Index) 
```

你来做这件事：

```
if (list_numeric_columns.Contains(dataGridViewItems.CurrentCell.ColumnIndex)) 
```

那应该行得通。您只需添加一次列..

希望那有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:15:04.623

这是如何`EditingControlShowing`使用`TextBox`→`Keypress Event`

```
 private void dataGridViewItems_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        var itemID = e.Control as TextBox;
        if (dataGridViewItems.CurrentCell.ColumnIndex ==  1) //Where the ColumnIndex of your "itemID"
        {
            if (itemID != null)
            {
                itemID.KeyPress += new KeyPressEventHandler(itemID_KeyPress);
                itemID.KeyPress -= new KeyPressEventHandler(itemID_KeyPress);
            }
        }
    }

    private void itemID_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsControl(e.KeyChar)
            && !char.IsDigit(e.KeyChar))
            e.Handled = true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-19T06:01:07.757

单击您希望为数字的文本框，然后在属性中单击“事件”（看起来像雷声），然后查找“按键”，然后双击然后键入：

```
if (char.IsNumber(e.KeyChar) || char.IsControl(e.KeyChar))
{
    e.Handled = false;
}
else
{
    e.Handled = true;
} 
```

[![](../Images/1aeccbf7d99c4a03fc8037ce54a2a474.png)](https://i.stack.imgur.com/4BGek.png)

# magento - 带有块 toHTML 的内存泄漏

> ID：14542471
> 
> 赞同：2
> 
> 时间：2013-01-26T23:01:56.507
> 
> 标签：magento, memory-leaks, cron, magento-1.7

我对所有产品（在一个 cron 内）进行了一个简单的循环，以生成一个块并缓存结果，

但是 toHhtml 方法让 memory_get_usage() 每个产品增长到大约 0.1M

我可以减少 getModel 负载的影响，但 toHTML 会杀死它

```
foreach($products as $productid) {

// leaks but clear instance helps
$model = Mage::getModel("catalog/product")->load($productid);

$block1 = Mage::app()->getLayout()->createBlock("catalog/product_list_upsell");
$block1 = $block1->setTemplate("catalog/product/list/upsell.phtml");

// kills it
cacheContent($block1->toHTml());

// this helps 
$model->clearInstance();

} 
```

任何想法，除了在单独的 php 调用中处理每个循环项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:10:31.403

您不需要每次都创建一个新的块实例。每次调用时都会准备好数据`toHtml()`，只需创建`$block1`一次并重用它。

这应该会删除对不再需要的模型实例的大量引用。

*编辑：话虽如此，您是否遗漏了为块注册产品实例的代码？它应该是：*

```
$block1 = Mage::app()->getLayout()->createBlock("catalog/product_list_upsell");
$block1 = $block1->setTemplate("catalog/product/list/upsell.phtml");

foreach($products as $productid) {

    $model = Mage::getModel("catalog/product")->load($productid);

    Mage::unregister('product');
    Mage::register('product', $model);

    cacheContent($block1->toHTml());

    $model->clearInstance(); 
```

}

# perl - XML::Simple 删除根元素

> ID：14542475
> 
> 赞同：2
> 
> 时间：2013-01-26T23:02:29.770
> 
> 标签：perl, xml-parsing

嗨，我有一个从哈希数组中获取的 xml 数据，当我对其执行 Dumper 时，输出如下：

```
$var1=
    '<Data>
            <Data1>ABC</Data1>
            <Data2>ABCD</Data2>
    </Data>'; 
```

我在一个变量调用 $var1 中有这个。现在我正在使用`XML::Simple`它..有点像：`{Data1=>'ABC',Data2=>'ABCd'};`

第一个标签数据不见了。怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T23:25:44.343

似乎有[据可查](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)：

> `KeepRoot => 1`：
> 
> 在尝试返回没有多余细节和不必要的间接级别的数据结构时，`XMLin()`通常会丢弃根元素名称。将`KeepRoot`选项设置为`1`将导致保留根元素名称。所以执行这段代码后：
> 
> ```
>  $config = XMLin('<config tempdir="/tmp" />', KeepRoot => 1) 
> ```
> 
> 您将能够引用 tempdir `"$config->{config}->{tempdir}"`而不是 default `"$config->{tempdir}"`。

# javascript - 在 jQuery 插件中使用来自 javascript 的变量

> ID：14542481
> 
> 赞同：0
> 
> 时间：2013-01-26T23:03:02.967
> 
> 标签：javascript, jquery, variables

嗨，我正在使用这个[jQuery 插件 jCanvas](http://calebevans.me/projects/jcanvas/index.php)来绘制线条。

它工作完美

```
 $("canvas").drawLine({   
    strokeStyle: "#d96363",   
    strokeWidth: 5,  
    x1: 68, y1: 318,   
    x2: 176, y2: 158,   
    x3: 566, y3: 138,   
    x4: 559, y4: 199,   
    x5: 68, y5: 318 
}); 
```

但在我的 javascript 源代码中生成的字符串**suradnice**看起来（例如具有相同的值）：

> x1：68，y1：318，x2：176，y2：158，x3：566，y3：138，x4：599，y4：199，x5：68，y5：318

我需要用字符串**suradnice中的值画线**

```
function draw_graph(suradnice){

  $("canvas").drawLine({
  strokeStyle: "#d96363",
  strokeWidth: 5,

  suradnice //Here 

}));
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:06:17.113

您正在做的事情看起来像是在尝试使用 C 风格的宏来插入您的值。不幸的是，JavaScript 中没有这样的功能。

但是，如果您的数据格式如下：

```
var suradnice = '{"x1":68,"y1":318.....}'; 
```

然后你就可以做到这一点：

```
var tmp = JSON.parse(suradnice);
tmp.strokeStye = "#d96363";
tmp.strokeWidth = 5;
$("canvas").drawLine(tmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:47:10.880

您可以使用 eval 作为变体：

```
obj = eval('({' + suradnice + '})');
obj.strokeStyle = '#d96363';
obj.strokeWidth = 5;
$("canvas").drawLine(obj); 
```

您可以在[此问题的答案](https://stackoverflow.com/questions/1086404/string-to-object-in-js)中找到更多变体。

# eclipse - Aptana Studio 3 Git 同步工作区功能

> ID：14542483
> 
> 赞同：0
> 
> 时间：2013-01-26T23:03:26.693
> 
> 标签：eclipse, git, aptana, egit

我在我的 Windows PC 上安装了 Git。

通常我使用 eclipse + egit 并且亲爱的是一个功能：“同步工作区”。

如何在 Aptan Studio 中获得此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:22:03.370

本机 Aptana Git 集成不支持此功能。但是，由于 Aptana 是基于 Eclipse 的，因此您可以在 Aptana 中安装 EGit，然后您就可以获得该功能。

# ios - RightBarButtonItem 未出现在导航栏中

> ID：14542484
> 
> 赞同：0
> 
> 时间：2013-01-26T23:03:32.083
> 
> 标签：ios, xcode, uinavigationbar, uibarbuttonitem, uinavigationitem

这让我很烦！我只是想以编程方式在我的导航栏上添加一个右侧的“flash”按钮，无论出于何种原因，我都无法让它出现。我的代码如下。谁能帮我？提前致谢。

```
 //Note: flashButton is declared as a UIButton property in .h, and synthesized in .m        
    UIView *flashContainer = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 36, 36)];

    [flashButton addTarget:self action:@selector(toggleTorch) forControlEvents:UIControlEventTouchUpInside];
    [flashButton setBackgroundImage: [UIImage imageNamed:@"FlashIconInactive_small.png"] forState:UIControlStateNormal];
    [flashButton setBackgroundImage: [UIImage imageNamed:@"FlashIconActive_small.png"] forState:UIControlStateHighlighted];

    [flashContainer addSubview:flashButton];
    [flashButton sizeToFit];

    UIBarButtonItem *flashButtonItem = [[UIBarButtonItem alloc] initWithCustomView:flashContainer];

    scannerVC.delegate = self;
    scannerVC.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelTapped)];
    [[scannerVC navigationItem] setRightBarButtonItem:flashButtonItem]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:22:45.890

flashButton 是否通过 IBOutlet 连接到 xib 或情节提要中的按钮？如果没有，您需要使用[+[UIButton buttonWithType:]](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/clm/UIButton/buttonWithType%3a)创建 UIButton 的实例。

另一个要尝试的测试是在第一行（addTarget: one）上设置一个断点并进入`po flashButton`调试器。输出是什么？如果为 nil，则您的按钮不存在，需要创建。

# javascript - 在 div 元素下创建 img 元素时无法摆脱 img 元素的结束标记

> ID：14542485
> 
> 赞同：0
> 
> 时间：2013-01-26T23:03:31.843
> 
> 标签：javascript, dom

我正在尝试使用 javascript DOM 动态添加一些元素。我正在使用必须具有结束标记的 javascript DOM 成功创建元素。我不知道如何创建一个没有结束标签的元素，如 img 元素。

这是我这样做的方式：

```
<html>
<head>
<script>
function add(){
var myImg = document.createElement("img");
    myImg.setAttribute("src","c:\abc.png");
    myImg.setAttribute("width","20");
    myImg.setAttribute("height","20");

    var myDiv = document.getElementById("mydiv");
    myDiv.appendChild(myImg);
}
</script>
</head>
<body >
<div id="mydiv">
<button onclick="add();">Add</button>
</div>
</body>
</html> 
```

通过这样做，它也创建了带有结束标签的 IMG 元素。请参阅下面我在说什么。

```
<img src="c:\abc.png" width="20" height="20"></img> //Incorrect(Ending tag available) 
```

这就是我要的：

```
<img src="c:\abc.png" width="20" height="20"> 
```

请帮我解决一下这个。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:08:57.513

由于您是使用 JavaScript 创建的，因此您可能正在查看开发人员控制台以查看代码（例如结束标记）。这一切都是由浏览器生成的，包括浏览器对您的代码所做的修复。你不应该担心这个，因为它大部分是你无法控制的。

# java - 无论如何要找出当前正在使用该对象的线程数？

> ID：14542486
> 
> 赞同：1
> 
> 时间：2013-01-26T23:03:47.627
> 
> 标签：java, multithreading, concurrency

基本上我想找出当前有多少线程正在使用该对象。如果没有人使用这个对象引用，那么我想销毁这个对象。

例子

```
 User u = new User();
 (here I have other code) 
 if (u is not used by any thread) {
   u = null;
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T00:35:51.687

这个问题是基于对 Java 内存管理的*基本误解*。

分配`null`给变量不会**破坏**它之前引用的对象。它*实际上*所做的是打破可能的许多路径之一（来自实时变量的引用链）到使其“可访问”的对象。当不再存在路径时，程序中的任何东西都无法到达（使用）该对象，并且有*资格*进行垃圾收集。它何时真正消失由 JVM / 垃圾收集器决定。

`User`当没有其他参考时，您正试图使对象“消失”。但这无论如何都会发生。您真正需要做的就是无条件地分配`null`给，`u`这样*这个*变量就不会阻止用户对象消失。

你能让`User`物体“现在”消失吗？答案很复杂，归结为：

*   你不能可靠地做到这一点，并且
*   你不能有效地做到这一点。

* * *

并回答问题标题中的问题。

> 无论如何要找出当前正在使用该对象的线程数？

不，不是你的意思。JVM 甚至没有提供一种方法来找出对象引用的活动副本有多少。JVM 最接近提供此功能的是可用于检测对象不再具有任何正常（强）引用的`SoftReference`和类。`WeakReference`

但这不是解决您的“问题”所必需的。

# php - MySQL 优化：更多条目与复杂查询

> ID：14542487
> 
> 赞同：0
> 
> 时间：2013-01-26T23:03:52.650
> 
> 标签：php, mysql, database, query-optimization, mysql-slow-query-log

我想提高通知板的速度。它从`event`表中检索数据。此时`events`MySQL 表看起来像这样

```
id | event_type | who_added_id | date 
```

在`event`表中，我存储了一行，其中包含有关特定事件的信息。每次用户 A 请求新的通知时，查询都会遍历表并查看用户 B 添加的通知是否适合他（他们必须是朋友，同一组的成员，以前聊天过）。表`events`变大了，因为查询量很大，页面加载速度很慢。我正在考虑完全改变这种设计，而不是添加一个事件行然后比较用户的事件是否适合，而是添加与感兴趣的用户一样多的行。我会改变表`events`结构如下：

```
id | event_type | who_added_id | forwho_id | date 
```

现在，如果用户 B 创建了一个让其他 50 名成员感兴趣的事件，我创建了 50 行具有相同信息的行，并且在“forwho_id”字段中我提到了必须收到此通知的那 50 名成员。我认为查询将变得更加简单，并且搜索它所需的时间会更少。您如何看待： 1\. 这是存储此类数据的好方法还是我们应该不惜一切代价避免重复数据？`events`2.如果感兴趣的用户数量不是 50 而是数百，您认为该表会如何表现？

感谢您阅读本文，我希望我能理解自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:55:39.153

重复数据并不是“坏事”，也不是“不惜一切代价避免”。

“坏”是不受控制的冗余，以及当逻辑数据模型不是第三范式时出现的那种问题。实现将偏离逻辑数据模型并引入冗余以提高性能是可以接受的并且可以预期。

您修改后的设计看起来适合您的需求。

# memory-management - 物理地址扩展

> ID：14542491
> 
> 赞同：0
> 
> 时间：2013-01-26T23:04:43.783
> 
> 标签：memory-management, architecture

[物理地址扩展](http://en.wikipedia.org/wiki/Physical_Address_Extension)可用于通过 32 位架构访问超过 4 GB 的物理内存。这是否意味着一个进程可以使用超过 4 GB 的 RAM？根据[这张图](http://en.wikipedia.org/wiki/File%3aX86_Paging_PAE_4K.svg)，如果我们有 32 位来寻址内存，我们仍然不能使用超过 4 GB 的虚拟内存，对吧？那么如果我们不能将它用作虚拟内存，为什么我们需要寻址更多的物理内存呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:23:19.517

您一次只能**寻址**4GB（在 32 位 Windows 下，您将有 2GB 或 3GB 用于您自己的进程的需要（取决于 boot.ini 设置），因为其余部分用于内核模式的东西。）

对于 Windows，您将使用*Address Windowing Extensions - 将可寻址***窗口**映射到超过 4GB 的物理内存。我不知道其他系统如何处理它，但是Linux可能通过mmap（）来处理它？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-27T19:17:00.010

好吧，如果我们有 32 位数据总线，那么我们可以寻址 2^32=4GB，这是事实。这意味着即使我们只有 1GB 物理内存，我们也可以处理更多。然而，在那种情况下，超过 1GB 的地址，即使是有效的，也会导致页面错误，因为内存不存在！

SO 使他们的魔法简单地捕捉页面错误和交换内存到磁盘/从磁盘交换内存。这就是我们称之为“虚拟”记忆的原因，因为它只是一种幻觉，一种诡计（一个伟大的）。

一个进程不可能拥有超过 4GB 的 32 位数据总线，因为它不可能寻址更多。

# mysql - 安装：在 `PREFIX=~/perlmods' 之后缺少目标文件操作数

> ID：14542494
> 
> 赞同：0
> 
> 时间：2013-01-26T23:05:04.990
> 
> 标签：mysql, perl, cpan, dbd

尝试安装 DBD::mysql。共享主机。Perl/cpan 使用 perlbrew 安装在我的主目录中。这个盒子上没有运行 mysql 服务器，也不应该有。

这是我在安装 DBD::mysql 时得到的输出

```
DBD-mysql-4.022/TODO
DBD-mysql-4.022/ChangeLog
DBD-mysql-4.022/INSTALL.html
DBD-mysql-4.022/t/
DBD-mysql-4.022/t/41bindparam.t
DBD-mysql-4.022/t/51bind_type_guessing.t
DBD-mysql-4.022/t/80procs.t
DBD-mysql-4.022/t/25lockunlock.t
DBD-mysql-4.022/t/40bindparam.t
DBD-mysql-4.022/t/40nulls.t
DBD-mysql-4.022/t/55utf8.t
DBD-mysql-4.022/t/91errcheck.t
DBD-mysql-4.022/t/41blobs_prepare.t
DBD-mysql-4.022/t/31insertid.t
DBD-mysql-4.022/t/35prepare.t
DBD-mysql-4.022/t/50chopblanks.t
DBD-mysql-4.022/t/42bindparam.t
DBD-mysql-4.022/t/32insert_error.t
DBD-mysql-4.022/t/50commit.t
DBD-mysql-4.022/t/10connect.t
DBD-mysql-4.022/t/86_bug_36972.t
DBD-mysql-4.022/t/40bindparam2.t
DBD-mysql-4.022/t/20createdrop.t
DBD-mysql-4.022/t/40keyinfo.t
DBD-mysql-4.022/t/40server_prepare.t
DBD-mysql-4.022/t/mysql.mtest
DBD-mysql-4.022/t/52comment.t
DBD-mysql-4.022/t/65types.t
DBD-mysql-4.022/t/30insertfetch.t
DBD-mysql-4.022/t/40catalog.t
DBD-mysql-4.022/t/70takeimp.t
DBD-mysql-4.022/t/40types.t
DBD-mysql-4.022/t/75supported_sql.t
DBD-mysql-4.022/t/53comment.t
DBD-mysql-4.022/t/85init_command.t
DBD-mysql-4.022/t/mem_leak.pl
DBD-mysql-4.022/t/40numrows.t
DBD-mysql-4.022/t/76multi_statement.t
DBD-mysql-4.022/t/71impdata.t
DBD-mysql-4.022/t/35limit.t
DBD-mysql-4.022/t/mysql.dbtest
DBD-mysql-4.022/t/00base.t
DBD-mysql-4.022/t/40blobs.t
DBD-mysql-4.022/t/40nulls_prepare.t
DBD-mysql-4.022/t/60leaks.t
DBD-mysql-4.022/t/29warnings.t
DBD-mysql-4.022/t/40server_prepare_error.t
DBD-mysql-4.022/t/40listfields.t
DBD-mysql-4.022/t/lib.pl
DBD-mysql-4.022/dbdimp.c
DBD-mysql-4.022/constants.h
DBD-mysql-4.022/eg/
DBD-mysql-4.022/eg/proc_example3.pl
DBD-mysql-4.022/eg/proc_example2b.pl
DBD-mysql-4.022/eg/issue21946.pl
DBD-mysql-4.022/eg/bug30033pg.pl
DBD-mysql-4.022/eg/proc_example2.pl
DBD-mysql-4.022/eg/decimal_test.pl
DBD-mysql-4.022/eg/proc_example1.pl
DBD-mysql-4.022/eg/prepare_memory_usage.pl
DBD-mysql-4.022/eg/bug21028.pl
DBD-mysql-4.022/eg/proc_example2a.pl
DBD-mysql-4.022/eg/bug14979.pl
DBD-mysql-4.022/eg/proc_example4.pl
DBD-mysql-4.022/eg/bug30033.pl
DBD-mysql-4.022/myld
DBD-mysql-4.022/Makefile.PL
DBD-mysql-4.022/MANIFEST.SKIP
DBD-mysql-4.022/README.OSX
DBD-mysql-4.022/MANIFEST
DBD-mysql-4.022/dbdimp.h
DBD-mysql-4.022/META.yml
CPAN: File::Temp loaded ok (v0.22)
CPAN: Parse::CPAN::Meta loaded ok (v1.4402)
CPAN: CPAN::Meta loaded ok (v2.120630)
Prepending /home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/arch /home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/lib /home/rkltwitter/.cpan/build/Class-DBI-v3.0.17-TE00jx/blib/arch /home/rkltwitter/.cpan/build/Class-DBI-v3.0.17-TE00jx/blib/lib /home/rkltwitter/.cpan/build/Class-Data-Inheritable-0.08-6zT5e2/blib/arch /home/rkltwitter/.cpan/build/Class-Data-Inheritable-0.08-6zT5e2/blib/lib /home/rkltwitter/.cpan/build/Class-Trigger-0.14-ojTrtL/blib/arch /home/rkltwitter/.cpan/build/Class-Trigger-0.14-ojTrtL/blib/lib /home/rkltwitter/.cpan/build/Class-Accessor-0.34-I26kqc/blib/arch /home/rkltwitter/.cpan/build/Class-Accessor-0.34-I26kqc/blib/lib to PERL5LIB for 'make'

  CPAN.pm: Building C/CA/CAPTTOFU/DBD-mysql-4.022.tar.gz

Argument "PREFIX=~/perlmods" isn't numeric in alarm at /home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2/CPAN/Distribution.pm line 1945.

PLEASE NOTE:

For 'make test' to run properly, you must ensure that the
database user 'rkltwitter' can connect to your MySQL server
and has the proper privileges that these tests require such
as 'drop table', 'create table', 'drop procedure', 'create procedure'
as well as others.

mysql> grant all privileges on test.* to 'rkltwitter'@'localhost' identified by 's3kr1t';

You can also optionally set the user to run 'make test' with:

perl Makefile.PL --testuser=username

I will use the following settings for compiling and testing:

  cflags        (mysql_config) = -I/usr/include/mysql  -DBIG_JOINS=1  -fno-strict-aliasing   -DUNIV_LINUX -DUNIV_LINUX
  embedded      (mysql_config) =
  ldflags       (mysql_config) = -rdynamic
  libs          (mysql_config) = -L/usr/lib/mysql -lmysqlclient
  mysql_config  (guessed     ) = mysql_config
  nocatchstderr (default     ) = 0
  nofoundrows   (default     ) = 0
  ssl           (guessed     ) = 0
  testdb        (default     ) = test
  testhost      (default     ) =
  testpassword  (default     ) =
  testsocket    (default     ) =
  testuser      (guessed     ) = rkltwitter

To change these settings, see 'perl Makefile.PL --help' and
'perldoc INSTALL'.

Checking if your kit is complete...
Looks good
Multiple copies of Driver.xst found in: /home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/arch/auto/DBI/ /home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/lib/site_perl/5.16.2/x86_64-linux/auto/DBI/ at Makefile.PL line 941.
Using DBI 1.623 (for perl 5.016002 on x86_64-linux) installed in /home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/arch/auto/DBI/
Writing Makefile for DBD::mysql
Writing MYMETA.yml and MYMETA.json
CPAN: Module::CoreList loaded ok (v2.76)
cp lib/DBD/mysql.pm blib/lib/DBD/mysql.pm
cp lib/DBD/mysql/GetInfo.pm blib/lib/DBD/mysql/GetInfo.pm
cp lib/DBD/mysql/INSTALL.pod blib/lib/DBD/mysql/INSTALL.pod
cp lib/Bundle/DBD/mysql.pm blib/lib/Bundle/DBD/mysql.pm
cc -c  -I/home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/arch/auto/DBI -I/usr/include/mysql  -DBIG_JOINS=1  -fno-strict-aliasing   -DUNIV_LINUX -DUNIV_LINUX -DDBD_MYSQL_INSERT_ID_IS_GOOD -g  -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\"4.022\" -DXS_VERSION=\"4.022\" -fPIC "-I/home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2/x86_64-linux/CORE"   dbdimp.c
dbdimp.c: In function ‘mysql_describe’:
dbdimp.c:3617: warning: assignment from incompatible pointer type
/home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/bin/perl -p -e "s/~DRIVER~/mysql/g" /home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/arch/auto/DBI/Driver.xst > mysql.xsi
/home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/bin/perl /home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2/ExtUtils/xsubpp  -typemap /home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2/ExtUtils/typemap  mysql.xs > mysql.xsc && mv mysql.xsc mysql.c
Warning: duplicate function definition 'do' detected in mysql.xs, line 242
Warning: duplicate function definition 'rows' detected in mysql.xs, line 752
cc -c  -I/home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/arch/auto/DBI -I/usr/include/mysql  -DBIG_JOINS=1  -fno-strict-aliasing   -DUNIV_LINUX -DUNIV_LINUX -DDBD_MYSQL_INSERT_ID_IS_GOOD -g  -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\"4.022\" -DXS_VERSION=\"4.022\" -fPIC "-I/home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2/x86_64-linux/CORE"   mysql.c
Running Mkbootstrap for DBD::mysql ()
chmod 644 mysql.bs
rm -f blib/arch/auto/DBD/mysql/mysql.so
LD_RUN_PATH="/usr/lib/../lib" /home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/bin/perl myld cc  -shared -O2 -L/usr/local/lib -fstack-protector dbdimp.o mysql.o  -o blib/arch/auto/DBD/mysql/mysql.so         \
           -L/usr/lib/mysql -lmysqlclient       \

chmod 755 blib/arch/auto/DBD/mysql/mysql.so
cp mysql.bs blib/arch/auto/DBD/mysql/mysql.bs
chmod 644 blib/arch/auto/DBD/mysql/mysql.bs
Manifying blib/man3/DBD::mysql.3
Manifying blib/man3/DBD::mysql::INSTALL.3
Manifying blib/man3/Bundle::DBD::mysql.3
  CAPTTOFU/DBD-mysql-4.022.tar.gz
  /usr/bin/make PREFIX=~/perlmods PREFIX=~/perlmods -- OK
Prepending /home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/arch /home/rkltwitter/.cpan/build/DBI-1.623-Wb16cS/blib/lib /home/rkltwitter/.cpan/build/Class-DBI-v3.0.17-TE00jx/blib/arch /home/rkltwitter/.cpan/build/Class-DBI-v3.0.17-TE00jx/blib/lib /home/rkltwitter/.cpan/build/Class-Data-Inheritable-0.08-6zT5e2/blib/arch /home/rkltwitter/.cpan/build/Class-Data-Inheritable-0.08-6zT5e2/blib/lib /home/rkltwitter/.cpan/build/Class-Trigger-0.14-ojTrtL/blib/arch /home/rkltwitter/.cpan/build/Class-Trigger-0.14-ojTrtL/blib/lib /home/rkltwitter/.cpan/build/Class-Accessor-0.34-I26kqc/blib/arch /home/rkltwitter/.cpan/build/Class-Accessor-0.34-I26kqc/blib/lib to PERL5LIB for 'test'
Running make test
PERL_DL_NONLAZY=1 /home/rkltwitter/perl5/perlbrew/perls/perl-5.16.2/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/*.t
t/00base.t .................. ok
t/10connect.t ............... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) Can't continue test
t/20createdrop.t ............ skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/25lockunlock.t ............ skipped: Can't connect to database ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/29warnings.t .............. skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/29warnings.t line 15.
t/30insertfetch.t ........... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/31insertid.t .............. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/32insert_error.t .......... skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/32insert_error.t line 17.
t/35limit.t ................. skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/35limit.t line 18.
t/35prepare.t ............... skipped: Can't connect to database ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40bindparam.t ............. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40bindparam2.t ............ skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40blobs.t ................. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40catalog.t ............... "my" variable $info masks earlier declaration in same scope at t/40catalog.t line 288.
t/40catalog.t ............... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40keyinfo.t ............... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40listfields.t ............ skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40nulls.t ................. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40nulls_prepare.t ......... skipped: Can't connect to database ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40numrows.t ............... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/40server_prepare.t ........ skipped: ERROR: DBI connect('test;mysql_server_prepare=1','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/40server_prepare.t line 16.
t/40server_prepare_error.t .. skipped: ERROR: DBI connect('test;mysql_server_prepare=1','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/40server_prepare_error.t line 18.
t/40types.t ................. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/41bindparam.t ............. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/41blobs_prepare.t ......... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/42bindparam.t ............. skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/42bindparam.t line 13.
t/50chopblanks.t ............ skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/50commit.t ................ skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/51bind_type_guessing.t .... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/52comment.t ............... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/53comment.t ............... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2), DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/53comment.t line 15.
t/55utf8.t .................. skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/55utf8.t line 18.
t/60leaks.t ................. skipped: Skip $ENV{SLOW_TESTS} is not set
t/65types.t ................. skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/65types.t line 13.
t/70takeimp.t ............... skipped: Can't connect to database ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/70takeimp.t line 27.
t/71impdata.t ............... DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/71impdata.t line 14.
t/71impdata.t ............... skipped: Can't obtain driver handle. Can't continue test
t/75supported_sql.t ......... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/76multi_statement.t ....... skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/76multi_statement.t line 15.
t/80procs.t ................. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/85init_command.t .......... skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2). Can't continue test
t/86_bug_36972.t ............ skipped: ERROR: DBI connect('test','rkltwitter',...) failed: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) at t/86_bug_36972.t line 14.
t/91errcheck.t .............. skipped: ERROR: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) Can't continue test
All tests successful.
Files=41, Tests=6,  8 wallclock secs ( 0.38 usr  0.10 sys +  6.53 cusr  1.11 csys =  8.12 CPU)
Result: PASS
  CAPTTOFU/DBD-mysql-4.022.tar.gz
  /usr/bin/make test -- OK
Running make install
Prepending %BUILDDIR%/DBD-mysql-4.022-H2H5qd/blib/arch %BUILDDIR%/DBD-mysql-4.022-H2H5qd/blib/lib %BUILDDIR%/DBI-1.623-Wb16cS/blib/arch %BUILDDIR%/DBI-1.623-Wb16cS/blib/lib %BUILDDIR%/Class-DBI-v3.0.17-TE00jx/blib/arch %BUILDDIR%/Class-DBI-v3.0.17-TE00jx/blib/lib %BUILDDIR%/Class-Data-Inheritable-0.08-6zT5e2/blib/arch %BUILDDIR%/Class-Data-Inheritable-0.08-6zT5e2/blib/lib %BUILDDIR%/Class-Trigger-0.14-ojTrtL/blib/arch %BUILDDIR%/Class-Trigger-0.14-ojTrtL/blib/lib %BUILDDIR%/Class-Accessor-0.34-I26kqc/blib/arch %BUILDDIR%/Class-Accessor-0.34-I26kqc/blib/lib to PERL5LIB; %BUILDDIR%=/home/rkltwitter/.cpan/build for 'install'
install: missing destination file operand after `PREFIX=~/perlmods'
Try `install --help' for more information.
  CAPTTOFU/DBD-mysql-4.022.tar.gz
  PREFIX=~/perlmods install PREFIX=~/perlmods -- NOT OK
Failed during this command:
 CAPTTOFU/DBD-mysql-4.022.tar.gz              : install NO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:50:57.353

它使用的安装命令：

```
PREFIX=~/perlmods install PREFIX=~/perlmods 
```

您应该使用的安装命令：

```
/usr/bin/make install. 
```

你的`cpan`配置搞砸了。它应该看起来像

```
make               [/usr/bin/make]
make_arg           []
make_install_arg   []
make_install_make_command [/usr/bin/make]
makepl_arg         []
mbuild_arg         []
mbuild_install_arg []
mbuild_install_build_command [./Build]
mbuildpl_arg       [] 
```

要从内部修复`cpan`，请使用

```
o conf make_install_make_command '/usr/bin/make'
o conf make_install_arg ''
o conf mbuild_install_build_command './Build'
o conf mbuild_install_arg ''
(...?)
o conf commit 
```

使用时没有理由指定安装位置`perlbrew`，而且做的很不对。

# paypal - 我应该在以下情况下使用哪种贝宝产品

> ID：14542499
> 
> 赞同：0
> 
> 时间：2013-01-26T23:05:50.717
> 
> 标签：paypal, payment

我想做以下

1- 使用 Paypal 帐户和信用卡接受付款
2- 付款将被授权并稍后捕获或作废
3- 用户向银行帐户或 Paypal 帐户付款

我应该使用哪个 API？
如果我结合多个 API 可以吗？

# java - requestLocationUpdates 中的 minDistance 参数

> ID：14542502
> 
> 赞同：2
> 
> 时间：2013-01-26T23:06:10.490
> 
> 标签：java, android

我试图在 requestLocationUpdates 方法中为我的应用程序找到最佳的 minDistance 值。我想每 10 分钟生成 1 个位置，并且当我移动 100 米时。

我尝试将 minDistance 参数设置为 100，但我一直在获取位置，而我的手机甚至没有移动 1 米！我不断增加它，因为它变得无用，所以我在 500m 作为参数停了下来。

我的问题是，当我的手机在 5 米的情况下移动并且我的 minDistance 参数是 500 时，我为什么一直在获取更新。

这是一些代码：

```
if (mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) 
        mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, TEN_SECONDS*6*5, TEN_METERS*50, listener);

if (mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) 
        mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, TEN_SECONDS*6*5, TEN_METERS*50, listener); 
```

我正在使用每 10 分钟运行一次的计时器任务，这是侦听器和任务：

```
...
@Override
    public void onLocationChanged(Location location) 
    {
        handleLocation(location);
    }
...
    private void handleLocation(Location location) 
{
    if(isUsable(location))
        this.location = location;
}
public boolean isUsable(Location location)
{
    return location!=null && location.hasAccuracy() && location.getAccuracy() < 800;
}

        public void run()
    {
        if(location!=null)
        {
            Timestamp ts1 = new Timestamp(new java.util.Date().getTime());
            if (mGeocoderAvailable) 
                address = reverseGeocode(LocationService.this.location);
            if(address != "" && !address.equals(lastAddress))
            {
                lastAddress = address;
                new SendLocation(LocationService.this.id,address,ts1);
            }
        }
    } 
```

我认为这里的任务并不重要，它包括一些我关心的条件以及启动一个将信息发送到数据库的新线程。

结果是：同一位置为我提供了不同的位置，而我的手机没有移动 500m 作为 minDistance 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:42:41.267

这是因为 GPS 正在设置自己以供使用（在此期间它会尝试获取您的确切位置），因此很少会注意到位置更新。

尝试在您的代码中使用它：-

```
public boolean isUsable(Location location)
{
    return location!=null && location.hasAccuracy() && location.getAccuracy() < 800 && location.getSpeed() > 0;
} 
```

这可确保仅在速度 > 0 时才进行处理。现在，如果您的设备在同一个地方，您的设备将不会打扰，您也可以使用最远 100m 的最小距离。

# c++ - 如何在 Visual Studio (2008)、C++ 中显示包含函数变量的堆栈帧

> ID：14542504
> 
> 赞同：3
> 
> 时间：2013-01-26T23:06:20.170
> 
> 标签：c++, visual-studio-2008, stack-frame

有没有办法配置 Visual Studio (2008) 以可视化每个堆栈帧中的函数变量？我可以使用函数参数很好地看到调用堆栈，但想知道是否也有办法查看函数中的变量。这对于检查堆栈内容和了解递归函数调用的工作方式特别有帮助。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:16:02.273

Debug + Windows + Locals 显示活动堆栈帧中的所有局部变量。

![在此处输入图像描述](../Images/5889b83ed4b8bce2052a627dfb060d43.png)

# c# - 从 C# 调用时 SSIS package.execute 失败

> ID：14542505
> 
> 赞同：0
> 
> 时间：2013-01-26T23:06:41.093
> 
> 标签：c#, ssis, package

我有以下代码：

```
 string filePath1 = Server.MapPath(System.IO.Path.GetFileName(FileUpload.PostedFile.FileName.ToString()));

FileUpload.PostedFile.SaveAs(filePath1);

package = app.LoadPackage(@"C:\inetpub\wwwroot\UploadApplication\UploadedCSVFiles\Package1.dtsx", null);

 Microsoft.SqlServer.Dts.Runtime.DTSExecResult results = package.Execute(); 
```

当我执行包时，我一直失败。我该如何解决这个问题？提前致谢！

# objective-c - 为什么 [[NSWindow animator] setFrame...] 有时非常滞后？

> ID：14542509
> 
> 赞同：3
> 
> 时间：2013-01-26T23:07:12.223
> 
> 标签：objective-c, macos, cocoa, animation, nswindow

所以，我有以下代码来显示我的`NSWindow`：

```
[_window makeKeyAndOrderFront:self]; 

[NSAnimationContext beginGrouping];
[[_window animator] setAlphaValue:1.0];
[[_window animator] setFrame:NSMakeRect([[NSApp currentEvent] window].frame.origin.x - 102, [[NSApp currentEvent] window].frame.origin.y - 238, _window.frame.size.width, _window.frame.size.height) display:YES];
[NSAnimationContext endGrouping]; 
```

此代码在用户单击应用程序的状态栏图标后立即调用，这就是我使用`[[NSApp currentEvent] window].frame.origin.y/x`获取状态栏图标位置的原因。
这段代码运行完美，但有时它非常滞后和“跳跃”，我不知道为什么。
关于这个以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T09:13:51.080

`NSWindow`动画师使用，这`NSAnimation`意味着它会快速触发一个计时器来为窗口的框架设置动画。在动画的每一帧，窗口内的每个视图都被重绘。如果您的视图层次结构有些复杂的大型视图，则性能非常糟糕，并且没有真正的解决方法。

我会推荐[JNWAnimatableWindow](https://github.com/jwilling/JNWAnimatableWindow)作为默认`NSWindow`动画器的替代品，因为它使用核心动画`CALayer`来执行动画，因此更加流畅。

# java - 来自 TargetDataLine 的声波

> ID：14542514
> 
> 赞同：1
> 
> 时间：2013-01-26T23:08:37.493
> 
> 标签：java, audio, audio-streaming, javasound

目前我正在尝试从麦克风录制声波并在 Java 中实时显示振幅值。我遇到了 Targetdataline，但我在理解我从中获取数据时遇到了一些麻烦。

来自 Oracle 的示例代码指出：

```
line = (TargetDataLine) AudioSystem.getLine(info);
line.open(format, line.getBufferSize());
ByteArrayOutputStream out  = new ByteArrayOutputStream();
int numBytesRead;
byte[] data = new byte[line.getBufferSize() / 5];

// Begin audio capture.
line.start();

// Here, stopped is a global boolean set by another thread.
while (!stopped) {
// Read the next chunk of data from the TargetDataLine.
numBytesRead =  line.read(data, 0, data.length);

****ADDED CODE HERE*****

// Save this chunk of data.
out.write(data, 0, numBytesRead);
} 
```

因此，我目前正在尝试添加代码以获取幅度值的输入流，但是当我打印添加的代码行中的变量数据时，我得到了大量的字节。

```
for (int j=0; j<data.length; j++) {
   System.out.format("%02X ", data[j]);
} 
```

以前使用过 TargetDataLine 的人知道我可以如何使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:56:23.373

对于将来在使用 TargetDataLine 进行声音提取时遇到问题的任何人，Ganesh Tiwari 的 WaveData 类包含一个非常有用的方法，可以将字节转换为浮点数组（[http://code.google.com/p/speech-recognition-java -hidden-markov-model-vq-mfcc/source/browse/trunk/SpeechRecognitionHMM/src/org/ioe/tprsa/audio/WaveData.java](http://code.google.com/p/speech-recognition-java-hidden-markov-model-vq-mfcc/source/browse/trunk/SpeechRecognitionHMM/src/org/ioe/tprsa/audio/WaveData.java)）：

```
public float[] extractFloatDataFromAudioInputStream(AudioInputStream audioInputStream) {
    format = audioInputStream.getFormat();
    audioBytes = new byte[(int) (audioInputStream.getFrameLength() * format.getFrameSize())];
    // calculate durationSec
    float milliseconds = (long) ((audioInputStream.getFrameLength() * 1000) / audioInputStream.getFormat().getFrameRate());
    durationSec = milliseconds / 1000.0;
    // System.out.println("The current signal has duration "+durationSec+" Sec");
    try {
        audioInputStream.read(audioBytes);
    } catch (IOException e) {
        System.out.println("IOException during reading audioBytes");
        e.printStackTrace();
    }
    return extractFloatDataFromAmplitudeByteArray(format, audioBytes);
} 
```

使用它我可以获得声音幅度数据。

# java - return 转到下一行而不是离开方法

> ID：14542517
> 
> 赞同：0
> 
> 时间：2013-01-26T23:08:57.780
> 
> 标签：java, android

我将此代码作为我的页面查看器和片段活动的一部分：

```
 @Override
    public int getCount() {
        if (GlobalVars.operator.equals("vodafone")) {
            return 5;
        }
        if (GlobalVars.operator.equals("kpn")) {
            return 4;
        }
        return 0;
    } 
```

当满足其中一个条件时，它会转到返回 5 的行；或返回 4；然后返回 0；为什么不只将方法与 if-then 部分的返回值一起保留？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T23:22:31.647

在 Java 中，一个方法只能有一个*返回*值。这意味着`getCount`不能同时返回`4`or`5`和`0`。

作为一种调试方法，您可以尝试以某种方式显示函数的返回值（例如`System.out.println(getCount());`）。如果显示的值为`0`，则您的条件均未满足，并且该方法返回您的“其他地方”值。

我想你没有对这个上下文的数据进行正确的比较。正如一些评论者所提到的，如果您正在接收字符串数据，您可能需要比较忽略大小写；此外，如果您从某个输入流接收数据，您可能需要确保它没有前导或尾随空格。

# ios - 更改我想在我的应用程序中使用的示例的 AppDelegate 文件

> ID：14542519
> 
> 赞同：-3
> 
> 时间：2013-01-26T23:09:03.620
> 
> 标签：ios, objective-c, xcode, appdelegate

大家好，我是为 iOS 创建应用程序的新手，如果这个问题有点愚蠢，我很抱歉。我正在尝试构建应用程序，其中登录 Facebook 并获取朋友列表只是其中的一部分，所以我想使用 Facebook 提供给开发人员的示例，但它有 appDelegate 文件，其中包含如下方法：

* * *

> ```
> #import "FPAppDelegate.h"
> #import "FPViewController.h"
> @implementation FPAppDelegate
> @synthesize window = _window;
> @synthesize rootViewController = _rootViewController;
> - (BOOL)application:(UIApplication *)application
>  .......
>     return [FBSession.activeSession handleOpenURL:url]; 
> }
> - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
>     [FBFriendPickerViewController class];
>     ........
> 
>     return YES;
> }
> - (void)applicationWillTerminate:(UIApplication *)application {
>     [FBSession.activeSession close];
> } 
> ```

* * *

它有带有 h 和 m 文件的 FPViewController 的 xib 文件，所以在我的应用程序中使用这个示例的更好方法是什么，我知道我不能使用两个 appDelegate 文件，我试图将 UIResponder 的 FPAppDelegate 更改为 UIViewController 类从我的应用程序中的某个地方推送它，如下所示：

```
- (IBAction)loginFacebook:(id)sender
{
        NSLog(@"Facebook");
   delegateViewController *appDelegate = [[delegateViewController alloc] initWithNibName:nil bundle:NULL];
    [self.navigationController pushViewController: appDelegate animated:YES];
} 
```

其中 delegateViewController 是 FPAppDelegate 示例我更改为：

```
#import "delegateViewController.h"
#import "AppDelegate.h"
#import "FPViewController.h"
@interface delegateViewController ()
@end
@implementation delegateViewController
@synthesize window2=_window2;
@synthesize rootViewController2=_rootViewController2;
- (BOOL)application:(UIApplication *)application
     ......
    return [FBSession.activeSession handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [FBFriendPickerViewController class];
    ......
    self.window2 = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window2.rootViewController = navigationController;
    [self.window2 makeKeyAndVisible];
    return YES;
}
- (void)applicationWillTerminate:(UIApplication *)application {
   ........
    [FBSession.activeSession close];
} 
```

但它不起作用，所以，如果我还需要更改 xib 文件？或者更改我的项目的 appDelegate 文件？还是在我的应用程序中使用此示例的另一种方式？我想让你向我解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:43:24.140

您应该从阅读 Apple 教程开始，以便了解 UIKit 框架以开始开发 iOS 应用程序。

[http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html](http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html)

# gcc - 为什么 GCC 会在我的程序集文件中插入看似不需要的变量？

> ID：14542520
> 
> 赞同：2
> 
> 时间：2013-01-26T23:09:11.890
> 
> 标签：gcc, arm, c-preprocessor

我有一个汇编文件，如下所示。它只有几个函数，一旦编译，我只希望这些函数在二进制文件中。

```
#include            <arm.h>

.section            vectors

reset:              ldr pc, =entry

undefined:          b undefined

swi:                b swi

prefetch_abort:     b prefetch_abort

data_abort:         b data_abort

reserved:           b reserved

interrupt_request:  b irq

fiq:                b fiq

irq:

.text

entry:              mov     sp,     #stack_address

                    bl      init

.end 
```

但是当我编译它时，NM 揭示了这一点。它有一些多余的变量。

```
00000000 t reset
00000004 t undefined
00000008 t swi
0000000c t prefetch_abort
00000010 t data_abort
00000014 t reserved
00000018 t interrupt_request
0000001c t fiq
00000020 t irq
0000002c T init
00000040 T main
00008024 t entry
00080000 N _stack
a0000000 D __data_start
a0000000 D a
a0000004 D b
a0000008 D __bss_end__
a0000008 D __bss_start
a0000008 D __bss_start__
a0000008 D __end__
a0000008 D _bss_end__
a0000008 D _edata
a0000008 D _end 
```

为什么 gcc 会在我的代码中插入不必要的变量，例如**data_start、__bss_end**、__bss_start 等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T23:13:35.940

发生的事情是 GCC 将默认库链接到项目中并包括它们的所有功能。您需要编译`-nodefaultlibs`以防止这种情况发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T02:53:32.397

链接描述文件定义了这些，以便您可以在启动代码中拥有 .data 部分或将 .bss 部分归零。使用您自己的链接器脚本以及其他答案，nodefault this nostd that 等。

# database - 伪造记录 ID 会导致数据库性能不佳？

> ID：14542522
> 
> 赞同：1
> 
> 时间：2013-01-26T23:09:27.310
> 
> 标签：database, ruby-on-rails-3, performance, sqlite

我已经将一些数据建模成一个表格，但是隐私是一个非常重要的问题。每当我创建一个新记录时，我都会寻找一个未使用的随机 9 位 id。（这是为了避免任何人能够推断出在最坏的情况下创建记录的顺序。）通过伪造 id 字段，我是否有失去数据库性能的风险，因为它无论如何都用于寻址数据？对于 SQLite3？这是一个 RubyonRails3 应用程序，目前仍在开发环境中，所以不确定 SQLite3 是否会进入生产环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:32:32.373

```
CREATE TABLE    Bargains
        (
            RowID INT IDENTITY PRIMARY KEY,
            Code AS ABS(CHECKSUM(NEWID())),
            CustomerID INT
        )

CREATE TABLE    Bargains
        (
            RowID INT IDENTITY PRIMARY KEY,
            TheOtherBit VARCHAR(4) NOT NULL DEFAULT(SUBSTRING(CONVERT(varchar(50), NEWID()),
            CustomerID INT
        ) 
```

我们使用 NEWID() 生成一个“随机”值，从中取出几位数字，将其放在一个单独的字段中，并将其合并到向用户显示的“漂亮值”中（并且在用户检索数据时需要，但内部不需要）。

所以我们有

```
MyID INT IDENTITY NOT NULL PRIMARY KEY ...

TheOtherBit VARCHAR(4) NOT NULL DEFAULT(SUBSTRING(CONVERT(varchar(50), NEWID()) 
```

但在我们内部，它将在 RowID 上订购，当然您也不必随机生成一个数字，用户也看不到您的 RowID...

这是一些工作代码来解释您如何在数据库中创建唯一 ID

```
USE TEST
GO
CREATE TABLE NEWID_TEST
(
ID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
TESTCOLUMN CHAR(2000) DEFAULT REPLICATE('X',2000)
)
GO
CREATE TABLE NEWSEQUENTIALID_TEST
(
ID UNIQUEIDENTIFIER DEFAULT NEWSEQUENTIALID() PRIMARY KEY,
TESTCOLUMN CHAR(2000) DEFAULT REPLICATE('X',2000)
)
GO

-- INSERT 1000 ROWS INTO EACH TEST TABLE
DECLARE @COUNTER INT
SET @COUNTER = 1

WHILE (@COUNTER <= 50)
BEGIN
   INSERT INTO NEWID_TEST DEFAULT VALUES
   INSERT INTO NEWSEQUENTIALID_TEST DEFAULT VALUES
   SET @COUNTER = @COUNTER + 1
END
GO

SELECT TOP 5 ID FROM NEWID_TEST
SELECT TOP 5 ID FROM NEWSEQUENTIALID_TEST
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:10:01.050

较大的 ID 值不会使索引查找变慢。

较小的值在存储在数据库文件中时[使用较少的字节](http://www.sqlite.org/fileformat2.html#record_format)，但差异不太可能很明显。

为了获得最佳性能，您应该声明您的`ID`列，[`INTEGER PRIMARY KEY`](http://www.sqlite.org/lang_createtable.html#rowid)以便`ID`查找不需要单独的索引，但可以使用表结构本身作为索引。

# sql - 如何将多个关键字传递给存储过程

> ID：14542524
> 
> 赞同：0
> 
> 时间：2013-01-26T23:10:08.367
> 
> 标签：sql, sql-server-2008

我有这个存储过程，它返回包含指定关键字的记录。

```
CREATE procedure [dbo].[SearchKeywordPaged](
    @KeyWordFilter varchar(50)
    ,@PageNumber int = 1)      

as
begin

declare @PageSize int = 50
declare @FirstRow int
declare @LastRow int
declare @TotalRows int

SELECT      @FirstRow = (@PageNumber - 1) * @PageSize + 1,
            @LastRow = (@PageNumber - 1) * @PageSize + @PageSize;

select @TotalRows =      COUNT(*) from 
    [Quotes] q inner join [Keywords] k 
    ON q.id = k.Quoteid where k.Keyword = @KeyWordFilter;

with Results as
(                  
    SELECT            
        q.*
        ,ROW_NUMBER() over (Order By Author asc) as Instance_Count
        ,@TotalRows as the_Count
    FROM [Quotes] q
    INNER JOIN [Keywords] k ON q.id = k.Quoteid
    WHERE k.Keyword = @KeyWordFilter
)            

select      *
from      results
where      Instance_Count between @FirstRow and @LastRow
order by Instance_Count asc

end 
```

如何修改此存储过程以接受超过 1 个关键字进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:50:10.060

创建一个将字符串转换为表格的函数。您可以使用以下示例：

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[fn_SplitString]') AND type in (N'FN', N'IF', N'TF', N'FS', N'FT'))
DROP FUNCTION [dbo].[fn_SplitString]
GO
CREATE   FUNCTION [dbo].[fn_SplitString]    (@xStr varchar(8000))
RETURNS @out table (
    x varchar(500))  AS  
begin

declare @lp int set @lp=1
declare @xlen int
set @xlen=len(@xstr)

declare @xchar char(1)
declare @thisSplit varchar(50)
set @thisSplit=''

while @lp <= @xlen
 begin
    set @xchar=substring(@xstr,@lp,1)

    set @thisSplit=@thisSplit + @xchar

        if (@xchar=',') or (@lp=@xlen)
         begin
            insert into @out (x) values (replace(@thisSplit,',',''))
            set @thisSplit=''
         end
    set @lp=@lp+1   
 end

RETURN  
end
GO
select X from fn_SplitString('aaa,bbb,cccc') 
```

然后，`WHERE`像这样修改存储过程的子句：

```
WHERE k.Keyword in (select x from fn_SplitString(@KeyWordFilter) ) 
```

最后，您可以使用您的 SP 将关键字列表作为逗号分隔列表传递，如下所示：

```
exec [SearchKeywordPaged]  @KeyWordFilter='keyword1,keyword2,...' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:37:03.610

您可能必须在存储过程中做一些动态的事情。例如：

```
declare @keywords varchar(50);
declare @sql  varchar(256);

-- @keywords is defined locally here, but it would be passed into your proc.
-- these are all single quotes.
select @keywords = ' ''keyword1'', ''keyword2'', ''keyword3'' '

select @sql = 'select * from a_table where keyword in (' + @keywords + ')'
exec(@sql) 
```

# ef-code-first - Entity Framework 5 Code First 数据库初始化策略

> ID：14542527
> 
> 赞同：1
> 
> 时间：2013-01-26T23:10:32.947
> 
> 标签：ef-code-first, entity-framework-5

你好我正在开始一个新项目，我一直在努力获得一个好的数据库初始化算法。

我想要的是每次应用程序初始化时都删除/创建。然后运行迁移。

所以我理想的工作流程是（当应用程序启动时）： 1\. 如果数据库存在则删除数据库 2\. 从模型类创建数据库 3\. 初始化网络安全（ASP.NET 角色提供程序） 4\. 运行迁移脚本

3和4可以互换。

我遇到的问题是迁移没有运行，或者删除数据库（如果存在）没有运行。（并且网络安全的初始化涉及一些技巧，因为它必须在创建数据库之后运行，以便它可以在步骤 #2 中创建的 UserProfile 表上添加外键约束。

我认为我遇到困难的一个可能原因是，迁移从未打算与 Drop/Create 策略一起运行。我需要为一个全新的项目运行迁移的原因是我想在列上指定一个索引。到目前为止，我知道如何做到这一点的唯一方法是在迁移脚本中：

```
 public override void Up()
    {
        CreateIndex("dbo.UserProfile", "UserName", true); 
    } 
```

# php - 如何找到类似的帖子？

> ID：14542528
> 
> 赞同：0
> 
> 时间：2013-01-26T23:10:36.083
> 
> 标签：php, mysql

所以，我有 PHP+MySQL。我正在浏览该`title`列以查找最相似的字符串。

如何在数据库中找到最相似的字符串并按相似度排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:54:44.220

您可以使用 PHP 函数[levenshtein](http://php.net/manual/en/function.levenshtein.php)来获取字符串之间的[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)。

Levenshtein 距离是衡量字符串差异程度（反之亦然，相似程度）的量度。假设你有 3 个字符串：

*   见现场跑
*   观看现场跑
*   你好，我的名字是约翰

使用 Levenshtein 距离，我们得到结果：

```
See spot run - See spot run: 0
See spot run - Watch spot run: 5
See spot run - Hello my name is John: 17

Watch spot run - See spot run: 5
Watch spot run - Watch spot run: 0
Watch spot run - Hello my name is John: 18

Hello my name is John - See spot run: 17
Hello my name is John - Watch spot run: 18
Hello my name is John - Hello my name is John: 0 
```

如您所见，更相似的字符串具有更低的 Levenshtein 距离。这种解决方案并不总是实用的，因为您必须在要比较的每个字符串之间存储结果。因此，如果您已经有 1000 条记录，则在创建新记录时，您必须将新字符串的结果与其他字符串进行比较。然后，您可以在 SQL 查询中使用这些分数。

这对你来说可能不是最好的解决方案，但由于没有人提到它，我想我会的。

您还可以查看其他一些有趣的 PHP 函数来了解字符串相似性：

*   [similar_text](http://www.php.net/manual/en/function.similar-text.php) — 计算两个字符串之间的相似度
*   [soundex](http://php.net/manual/en/function.soundex.php) — 计算字符串的 soundex 键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:15:04.673

您应该使用 SELECT LIKE 查询[，这里](http://dev.mysql.com/doc/refman/5.6/en/string-comparison-functions.html)有一些文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:16:00.863

最简单的方法是在 SQL 查询中使用 LIKE：

```
WHERE column_name LIKE '%string%' 
```

您可以将空格替换为“％”以使其更有效。我不会把它称为正确的方式，但考虑到你的问题应该足够好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T23:17:00.190

我不确定您真正想要做什么，但我认为您正在寻找在标题列中找到最相似文本的查询。

如果是真的，它可以帮助：

**SQL**

```
SELECT * FROM yourTable where table LIKE '%searchedText%' 
```

在这种情况下`%`，意味着您找到包含您的`searchedText`

# php - PHP页眉和页脚

> ID：14542530
> 
> 赞同：0
> 
> 时间：2013-01-26T23:10:38.873
> 
> 标签：php, html, header, include, footer

我想使用 php 使用 php incluse 标签在我的网站上创建一致的页眉和页脚。创建头文件时，我需要 html 和 body 标签还是可以从 div id="header"....开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:15:20.277

您应该担心的是网站标记的最终结果，在您包含所有内容之后。

**例子：**

头文件.php

```
<div id="header"></div> 
```

页脚.php

```
<div id="footer"></div> 
```

索引.php

```
<html>
<head></head>
<body>
    <?php include('header.php'); ?>
    <div id="content"></div>
    <?php include('footer.php'); ?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:13:45.707

为了正确的语义，包括`<html>`和`<body>`标签，确保在`footer.php`文件中关闭它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T23:19:56.543

是的你应该。不过，使用 include 中的变量来设置诸如`<title>`...

```
<?php 
$pagetitle="My page";
include('header.php');
?>
Content here
<?php include('footer.php'); ?> 
```

header.php 在哪里

```
<html>
<head>
<title><?php echo $pagetitle; ?></title>
<!-- your meta tags etc -->
</head>
<body> 
```

页脚是

```
<script>/* your javascript includes */</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T23:13:06.080

您可以在这样的文件中包含一段 HTML。

```
<footer> This is my global footer! </footer> 
```

然后在 PHP 中，您可以使用`include()`包含该 html 文件。它会将文件的内容呈现到包含它的输出中。

```
include 'globalFooter.html'; 
```

> 我需要 html 和 body 标签还是可以从 div 开始？

你不可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T23:14:20.697

您的问题并不*完全*清楚，但您似乎在询问您是否需要*包含*文件中的任何特殊标签。简短的回答是否定的——包含的文件被逐字插入到包含文件中，因此它将包含呈现您想到的页眉（或页脚）所需的任何标签。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T23:15:22.723

无论您做什么，结果都应该是有效的 HTML。

因此，如果您`index.php`以开头，`<?php include "header.php" ?>`那么您的`header.php`文件应该以`<!DOCTYPE html><html>...`Same 开头。

# java - 不关闭 stringwriter 会导致泄漏吗？

> ID：14542535
> 
> 赞同：39
> 
> 时间：2013-01-26T23:11:53.917
> 
> 标签：java, memory-management, freemarker, stringwriter

我意识到在java中GC最终会清理对象，但我问不关闭你的字符串编写器是否是不好的做法，目前我正在这样做：

```
 private static String processTemplate(final Template template, final Map root) {
        StringWriter writer = new StringWriter();
        try {
            template.process(root, writer);
        } catch (TemplateException e) {
            logger.error(e.getMessage());
        } catch (IOException e) {
            logger.error(e.getMessage());
        }
        finally {

        }

        return writer.toString();
    } 
```

我应该关闭作家并创建一个这样的新字符串：

```
String result = "";

...

finally {
  result = writer.toString();
  writer.close();
} 
```

这样做更好吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-26T23:13:51.743

[javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/StringWriter.html)非常明确：

> 关闭 StringWriter 无效。

快速浏览一下[代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/io/StringWriter.java#StringWriter.close%28%29)即可确认：

```
public void close() throws IOException {
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T23:15:15.623

它不持有任何非内存资源。它将像其他任何东西一样被垃圾收集。close() 可能只是因为其他编写器对象确实拥有需要清理的资源而存在，并且需要 close() 来满足接口。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-01T03:35:48.767

不，不关闭 a`StringWriter`不会导致泄漏：如前所述，`StringWriter#close()`它是一个 nop，并且 writer 只保存内存，而不是外部资源，因此在收集 writer 时会收集这些资源。（明确地说，它包含对私有字段中的对象的引用，这些对象不会转义对象，具体来说是 a `StringBuffer`，因此没有外部引用。）

此外，您通常*不应该*关闭 a `StringWriter`，因为它会将样板代码添加到您的代码中，从而模糊了主要逻辑，正如我们将看到的。但是，为了让读者放心，您正在小心并有意这样做，我建议您评论这个事实：

```
// Don't need to close StringWriter, since no external resource.
Writer writer = new StringWriter();
// Do something with writer. 
```

如果您确实想关闭编写器，最优雅的是使用[try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)`close()` ，它会在您退出 try 块的主体时自动调用：

```
try (Writer writer = new StringWriter()) {
    // Do something with writer.
    return writer.toString();
} 
```

但是，由于[Writer#close()](http://docs.oracle.com/javase/8/docs/api/java/io/Writer.html#close--) throws `IOException`，您的方法现在也需要 throw`IOException` *即使它从未发生*，或者您需要捕获它，以向编译器证明它已被处理。这涉及到很多：

```
Writer writer = new StringWriter();
try {
    // Do something with writer, which may or may not throw IOException.
    return writer.toString();
} finally {
    try {
        writer.close();
    } catch (IOException e) {
        throw new AssertionError("StringWriter#close() should not throw IOException", e);
    }
} 
```

这一级别的样板文件是必要的，因为您不能只在整个 try 块上放置一个 catch，否则您可能会不小心吞下`IOException`代码主体抛出的一个异常。即使目前没有，将来也可能会添加一些，并且您希望编译器对此进行警告。正在记录的`AssertionError`当前行为`StringWriter#close()`，这可能会在未来的版本中发生变化，尽管这种可能性极小；它还掩盖了 try 主体中可能发生的任何异常（同样，这在实践中绝不应该发生）。这是太多的样板和复杂性，您显然最好省略`close()`并评论原因。

一个微妙的点是，不仅会`Writer#close()`抛出 an `IOException`，而且也会抛出[`StringWriter#close()`](http://docs.oracle.com/javase/8/docs/api/java/io/StringWriter.html#close--)，因此您无法通过使用变量 a`StringWriter`而不是a 来消除异常`Writer`。这与 String *Reader**不同*，后者覆盖方法并指定它不*抛出*异常！请参阅我对[是否应该关闭 StringReader](https://stackoverflow.com/q/6122013)[的回答？](https://stackoverflow.com/a/32301841). 这看起来可能是错误的——为什么你会有一个什么都不做但可能抛出异常的方法？– 但可能是为了向前兼容，以便为将来关闭关闭的可能性留有余地，因为这对于作家来说是一个普遍的问题。（也可能只是一个错误。）*`close()`*`IOException`**

 **总结一下：不关闭 a 很好`StringWriter`，但不做通常正确的事情的原因，即 try-with-resources，只是因为`close()`它声明它抛出了一个它实际上并没有抛出的异常，并处理这个正是很多样板。在任何其他情况下，最好只使用传统上正确的资源管理模式并防止出现问题和令人头疼的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T23:15:48.910

在方法结束时，没有对 的引用，`writer`因此它将被 GC 释放。**

# spring - 如何配置 Spring @ControllerAdvice 将应用于哪些控制器？

> ID：14542538
> 
> 赞同：11
> 
> 时间：2013-01-26T23:12:22.757
> 
> 标签：spring, spring-mvc, spring-3

我的 spring 应用程序中有两种类型的控制器。

*   转发到视图以生成 HTML 的视图控制器
*   直接从控制器返回 JSON 的 API 控制器

API 和 View 控制器都是同一个 spring dispatcher servlet 的一部分。Spring 3.2 引入了`@ControllerAdvice`注解以允许全局位置处理异常。

该文档暗示`@ControllerAdvice`将应用于与 Dispatcher Servlet 关联的每个控制器。

有没有办法配置哪些控制器`@ControllerAdvice`将适用？

例如，在我的场景中，我想要一个`@ControllerAdvice`用于我的视图控制器并`@ControllerAdvice`为我的 API 控制器分开。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-14T00:35:13.943

对于仍然会发现这个问题的人：

从 Spring 4 开始，ControlerAdvice 可以限制为具有指定注释的 Controler。看一眼：

[http://blog.codeleak.pl/2013/11/controlleradvice-improvements-in-spring.html](http://blog.codeleak.pl/2013/11/controlleradvice-improvements-in-spring.html)

（本文后半部分）了解更多详情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-20T10:53:25.460

**更新**

我正在使用 spring 4。您可以执行以下 2 个选项之一。

(1) 你可以添加你想要的包。（在这些包中，您有要遵循的控制器`@ControllerAdvice`）。

前任：

```
@ControllerAdvice(basePackages={"my.pkg.a", "my.pkg.b"}) 
```

(2) 你可以直接添加你想要的控制器类。

前任：

```
@ControllerAdvice(basePackageClasses={MyControllerA.class, MyControllerB.class}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T10:24:37.157

我认为现在不可能。如果您可以让 API 和 View 控制器抛出不同的异常类型，那么您可以定义两个不同的 @ExceptionHandler 并实现您想要的。

```
// For handling API Exceptions
@ExceptionHandler(APIException.class)  // Single API Exception 
@ExceptionHandler({APIException.class, ..., ,,,}) // Multiple API Exceptions

// For handling View Exceptions
@ExceptionHandler(ViewException.class) // Single View Exception
@ExceptionHandler({ViewException.class, ..., ...}) // Multiple View Exceptions 
```

您可以使用 aop 将来自 API 的异常转换为标准 APIException。[请参阅春季论坛上的](http://forum.springsource.org/showthread.php?50632-exception-conversion-Aspect)此线程。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-18T18:35:47.577

您的例外不应决定您的回复的内容类型。而是检查请求的`Accept`标头以了解浏览器的期望。

```
@ExceptionHandler(Throwable.class)
public @ResponseBody String handleThrowable(HttpServletRequest request, HttpServletResponse response, Throwable ex) throws IOException {

...

String header = request.getHeader("Accept");

if(supportsJsonResponse(header)) {

    //return response as JSON
    response.setContentType(JSON_MEDIA_TYPE.toString());

    return Json.stringify(responseMap);

} else {
    //return as HTML
    response.setContentType("text/html");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-07T15:53:46.993

```
@ExceptionHandler(value=Exception.class)    
    public ModelAndView error(Exception ex) {                                
        return new ModelAndView("redirect:/error/m");                
    }

...//ErrorController

@RequestMapping(value = "/m", produces="text/html")
public ModelAndView error()...

@RequestMapping(value = "/m", produces="application/json")
@ResponseBody
public Map errorJson()... 
```

# ios - 带有复选标记的自定义 UITableViewEditingStyle - iOS SDK

> ID：14542539
> 
> 赞同：1
> 
> 时间：2013-01-26T23:12:45.863
> 
> 标签：ios, objective-c, uitableview

在管理 Spotlight 搜索选项时，我试图复制“设置”应用程序中的功能：

[![图1](../Images/095db46ac959c79428bfc95aa841bc16.png)](https://i.stack.imgur.com/WSIQI.png)

我需要能够在没有编辑按钮的情况下重新排列表格视图的顺序，并且需要能够选择/取消选择一个单元格，复选标记出现在单元格标签的左侧。

当我使用以下代码时：

```
-(UITableViewCellEditingStyle)tableView:(UITableView*)tableView editingStyleForRowAtIndexPath:(NSIndexPath*)indexPath {
    return 3;
} 
```

我明白了：

[![图2](../Images/463f7b7ef00780ad7d095501984ac457.png)](https://i.stack.imgur.com/DXxH8.png)

这可行，但我想知道是否有任何方法可以自定义编辑样式，以便复选标记更像它们在聚光灯设置中（红色复选标记看起来像是正在选择要删除的项目）。

可能重复：[我如何自定义 UITableViewCell 编辑样式？](https://stackoverflow.com/questions/9530238/how-can-i-custom-uitableviewcell-editing-style)，但似乎没有人回答它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:22:13.847

将编辑样式设置为`UITableViewCellEditingStyleNone`。相反，创建一个复选标记图像和一个“空白”图像（复选标记图像的大小相同）并使用它们来设置单元格的`imageView.image`属性。您将需要跟踪检查了哪些单元格。从方法切换此状态和图像视图`didSelectRowAtIndexPath`。

# asp.net - 在 MVC4 中使用具有 1 个视图的多个模型

> ID：14542540
> 
> 赞同：1
> 
> 时间：2013-01-26T23:12:54.880
> 
> 标签：asp.net, .net, vb.net

我在尝试将两个模型与视图结合使用时遇到了麻烦。我创建了一个合并模型对象：

```
Public Class BusinessFormModel
    Public Property busModel As Business
    Public Property busMetaModel As BusinessMeta

    Public Sub New()
         busModel = New Business
         busMetaModel  = New BusinessMeta
    End Sub

End Class 
```

对于我的观点，我有一个类似的表格：

```
@ModelType business.BusinessFormModel

@Html.TextBox("business_category", Model.busModel.business_category)
..
@Html.TextBox("business_name", Model.busMetaModel.business_name)
..
@Html.TextBox("business_description", Model.busMetaModel.business_description) 
```

我的控制器如下所示：

```
Function ShowForm() As ActionResult
     Dim model As new BusinessFormModel
     model.busModel.PopulateFromId(2)
     model.busMetaModel.PopulateFromId(2)

     Return View(model)
End Function

Function Submit(ByVal model As BusinessFormModel) As String
     model.busModel.UpdateCategory()
     ...
     model.busMetaModel.UpdateBusinessDescription()
     Return "Submitted"
End Function 
```

基本上，ShowForm 将使用基于 id 的数据库中的值填充对象。id 也是这个模型中的一个属性。然后，当表单提交时，我具有根据 id 更新特定字段的功能。但是，似乎在调用 Submit() 时，传递的对象包含`Nothing`值。我至少应该得到绑定到 HTML 助手控件的数据，对吧？

我不确定我这样做是否正确，因为当我提交表单时，传递回控制器的模型对象不包含任何数据。我是否在视图中执行了正确的语句？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:23:12.020

您需要研究`ViewModel`哪些允许您在单个视图中拥有多个模型和其他业务逻辑。[ViewModel 示例练习](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx)

举个例子。`ViewModel`除了`Controller`. _

**视图模型**

```
Public Class StoreIndexViewModel
    Public Property NumberOfGenres As Integer
    Public Property Genres As List(Of String) 

    Public Property AnotherComplexModel As ComplexModel
End Class 
```

**控制器**

```
Public Function Index() As ActionResult
    'Create list of genres
    Dim genres = New List(Of String) From {"Rock", "Jazz", "Country", "Pop", "Disco"}
    'Create your view model
    Dim viewModel = New StoreIndexViewModel With {.NumberOfGenres = genres.Count, .Genres = genres}
    Return View(viewModel) 
End Function 
```

在您的`View`中，您仍然可以以`Model`相同的方式引用您的对象，但它现在包含`Models`现在可以使用的所有数据和其他数据。希望这可以帮助。

# sql - 设计源自单个表的多个多对多关系的正确或有效方法

> ID：14542552
> 
> 赞同：6
> 
> 时间：2013-01-26T23:13:53.767
> 
> 标签：sql, database-design, many-to-many

我正在设计一个电影编目器，它将依赖 SQL 数据库来存储数据。我不是数据库设计专家，老实说，除了基本的数据库查询之外，我对其他任何事情都没有那么老练。我的问题是进行以下操作的最有效方法是什么。

我目前创建了 5 个表

```
Movies
------
[id] integer
[title] nvarchar(100)
[duration] integer
[year] datetime

People
------
[people_id] integer
[person] nvarchar(100)

Writers
-------
[id] integer
[people_id] integer

Directors
---------
[id] integer
[people_id] integer

Actors
------
[id] integer
[people_id] integer 
```

基本上使用联结表的多对多关系，电影->作家<-人物，电影->导演<-人物，最后是电影->演员<-人物。People 表是从中提取每个角色所需数据的池。由于一个人可以同时是电影中的导演和明星，作家和导演，甚至三个角色，我相信 3 个连接表可以解决这个问题。自然，一个人也可以出现在许多电影中。所以我认为这是做到这一点的方法。

我通过几篇网络文章阅读了建立多对多关系的内容，并且阅读的越多，我对如何设置这种情况就越感到困惑。大多数只是处理一个领域或使用作者/书籍类比，这无助于我理解如何实现我的情况。

如前所述，我的问题是，这是一种有效的方法吗？甚至是正确的？

我希望能够轻松地查询一部电影，并将与它相关的所有信息都输出到一个表单中。

谢谢-Res

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:20:19.153

不要创建单独的表，创建一个像`PeopleRoles`contains`'Actor'`等的新表`'Director'`，然后创建一个关系表来同时连接电影、人物和角色：

```
Movies
------
[id] integer
[title] nvarchar(100)
[duration] integer
[year] datetime

People
------
[people_id] integer
[person] nvarchar(100)

PeopleRoles
-----------
[role_id] integer
[name] nvarchar(100)

MovieCollaborators
------------------
[id] integer
[people_id] integer
[movie_id] integer
[role_id] integer 
```

您将获得灵活性，并且能够通过单个`JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:14:39.143

如果事情仍然如此简单，您应该使用包含“角色”列的单个连接表的其他答案中建议的模型。

但是，您可能希望开始向模型中添加仅适用于某些角色的内容。例如，演员是主角、配角还是客串？在这种情况下，您在问题中描述的模型更好。你的模型的缺点是，如果你想以一种通用的方式处理电影中的参与，你需要将`UNION`很多表放在一起。

这是一个权衡。具有角色列的单个连接表可以更容易地对角色进行一般处理。为每个角色使用单独的连接表可以更轻松地区别对待它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T05:32:25.873

我建议将作家、导演和演员放在一张桌子上。

![在此处输入图像描述](../Images/e2da2bf7eb54ff8efd60da065f2d21db.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T23:18:03.600

您正在模拟继承，但您的派生类型没有任何不同的字段，因此，您不妨将它们全部放在一个表中并有一个标识符列来指示它们的类型。

此建模问题的另一个复杂部分是您可以让同一个人担任多个角色，例如 Write、Direct、Star。我认为您需要介绍角色的概念。然后链接到角色而不是人。角色类是多对多模型中的常见特征。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T23:18:43.550

而不是您建议的三个多对多表，最好有一个表 movie-people，它将包含三列：MovieId、peopleId、roleType

通过 roleType(actor, director, writer) 你会知道这个人的角色

# javascript - 带有来自javascript的页面转换的jquery mobile更改页面

> ID：14542553
> 
> 赞同：5
> 
> 时间：2013-01-26T23:13:58.810
> 
> 标签：javascript, jquery, jquery-mobile

我正在此页面的帮助下进行转换：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)

单击链接时我会进行转换：

```
<a href="#page1" data-transition="slide" data-role="button" > Submit </a> 
```

这使得幻灯片过渡。

如果我在哪里将 data-transition 属性更改为 data-transition="none" 我将不会得到任何转换。

**现在我想在转换之前做一些逻辑。换句话说，如果我可以使用 javascript 执行相同的转换，那就太好了。**这就是我现在所拥有的：

```
function GoTopage1()
{
    if(someVar == true)
        window.location = "#page1";
} 
```

我现在的链接是这样的：

```
<a onclick="GoTopage1()" data-transition="slide" data-role="button" > Submit </a> 
```

该代码有效，但我失去了幻灯片过渡。单击链接时，我会得到默认过渡，即淡入过渡。我怎么能用代码进行转换？

* * *

## 编辑

最后我想出了如何做到这一点：

我放置了一个隐藏链接：

```
<a id="t1" href="#page1"  data-transition="slide" ></a> 
```

然后在我的功能上我现在有：

```
function GoTopage1()
{
    if(someVar == true)
        $("#t1").click(); // simulate link click        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:27:05.340

我怀疑因为你绑定`onclick`了锚标签，你的方法首先发生，然后 jQuery mobile 可能会说“我们已经在那里 - 不需要转换”。

我想知道您是否可以使用`$.mobile.changePage()`jQuery-mobile 中的方法而不是设置 window.location。这可能会通过 jQuery-mobile 代码推动活动并使转换工作。

或者，由于 jQuery 页面逻辑基于 hashchange 事件，也许您应该设置 location.hash 而不是 location。你可以在这里查看文档：

[http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)

编辑：从 jQuery Mobile 1.4 开始， $.mobile.changePage() 已被弃用，而应使用 $.mobile.pageContainer.pagecontainer("change") 。例子：

```
$.mobile.pageContainer.pagecontainer("change", "#page1", {transition: "slide"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T04:19:49.600

您可以使用以下内容：

1.  `$.mobile.navigate("#bar", {transition: "slide", info: "info about the #bar hash"});`
2.  `$.mobile.pageContainer.pagecontainer("change", "target", {transition: "flow", changeHash: false, reload: true})`

还值得注意的是，`$.mobile.changePage()`现在已弃用，不应再使用。 [http://api.jquerymobile.com/jQuery.mobile.changePage/](http://api.jquerymobile.com/jQuery.mobile.changePage/)

只是想我会根据我从其他线程中学到的东西来回答这个问题。我没有足够的声誉来放置其余的链接。只需在 Google 上搜索代码即可找到它们各自的 StackOverflow 线程。

# maven - Maven 部署仅针对某些捆绑包静默失败

> ID：14542554
> 
> 赞同：3
> 
> 时间：2013-01-26T23:14:13.240
> 
> 标签：maven, tomcat, tomcat6, nexus, sonatype

所以，我有一个多层的 Maven 项目。我正在使用托管在 Tomcat 6.0.24 上的 Maven 版本 3.0.3 和 Sonatype Nexus 2.0.3。`mvn clean install`该项目干净地构建（ ），但`mvn deploy`在中途随机捆绑失败。手动部署该捆绑包也失败了。我可以使用`mvn deploy -rf :<next-bundle>`和部署剩余的工件，但是其中一个包无法上传。如果我`mvn deploy`只对那个目录/项目进行操作，它也无法上传。

如果我运行`mvn -X deploy`，我会得到以下堆栈跟踪：

```
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for http://nexushost:8080/nexus/content/repositories/my-snapshots/ as nexusadmin
Downloading: http://nexushost:8080/nexus/content/repositories/my-snapshots/my-toplevel/catalog/failing-project-name/1.2.0-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata my-toplevel.catalog:failing-project-name:1.2.0-SNAPSHOT/maven-metadata.xml from/to snapshots (http://nexushost:8080/nexus/content/repositories/my-snapshots/): Access denied to: http://nexushost:8080/nexus/content/repositories/my-snapshots/my-toplevel/catalog/failing-project-name/1.2.0-SNAPSHOT/maven-metadata.xml
org.sonatype.aether.transfer.MetadataTransferException: Could not transfer metadata my-toplevel.catalog:failing-project-name:1.2.0-SNAPSHOT/maven-metadata.xml from/to snapshots (http://nexushost:8080/nexus/content/repositories/my-snapshots/): Access denied to: http://nexushost:8080/nexus/content/repositories/my-snapshots/my-toplevel/catalog/failing-project-name/1.2.0-SNAPSHOT/maven-metadata.xml
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$3.wrap(WagonRepositoryConnector.java:932)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$3.wrap(WagonRepositoryConnector.java:923)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.flush(WagonRepositoryConnector.java:695)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.flush(WagonRepositoryConnector.java:689)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.get(WagonRepositoryConnector.java:445)
        at org.sonatype.aether.impl.internal.DefaultDeployer.upload(DefaultDeployer.java:379)
        at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:260)
        at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:215)
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.deploy(DefaultRepositorySystem.java:480)
        at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:137)
        at org.apache.maven.plugin.deploy.DeployMojo.execute(DeployMojo.java:156)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.wagon.authorization.AuthorizationException: Access denied to: http://nexushost:8080/nexus/content/repositories/my-snapshots/my-toplevel/catalog/failing-project-name/1.2.0-SNAPSHOT/maven-metadata.xml
        at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:119)
        at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)
        at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
        at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:608)
        at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:64)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679) 
```

发生这种情况时，即使将 Sonatype 的日志级别设置为 DEBUG，也会向 tomcat 日志 ( `$tomcat_home/logs/catalina.out`) 或 Sonatype Nexus 日志 ( )发出精确的零输出。`$tomcat_home/sonatype-work/nexus/logs/nexus.log`文件系统上的预期树是完全空的，并且 Tomcat 用户对整个 sonatype-work 树具有完全权限。这种行为是一致的，即使我重命名了有问题的包。如果我将另一个项目（通过“mvn deploy”成功上传的项目）重命名为失败项目名称，它可以工作。POM 中没有任何明显不同的项目——它与我所有的其他 POMS 基本相同；我指定了一些依赖项，并为 cxf-codegen 和 maven-bundle-plugin 提供了构建步骤。

有什么想法吗？关于如何调试它的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:03:03.810

找到了。我被这个错误咬了：

[https://issues.apache.org/jira/browse/CXF-4687](https://issues.apache.org/jira/browse/CXF-4687)

某些版本的 apache 的 cxf-codegen-plugin（包括我正在使用的 2.6.2）与代理设置混淆。我在 Nexus 日志中没有看到任何条目的原因是代理设置阻止了请求甚至到达那里。

# android - Android 使用形状、选择器或列表的不同状态的不同 EditText 背景

> ID：14542557
> 
> 赞同：16
> 
> 时间：2013-01-26T23:14:37.580
> 
> 标签：android, styles, android-edittext, state, shape

我正在启动一个使用 ActionBarSherlock 和 HoloEverywhereLib 的新应用程序。我的最小和目标 SDK 相同（10/2.3.3）。这只是为了让我也可以使用他们拥有的 android 运行时将其快速移植到 Amazon Kindle 和 BB10（已经将此设置用于另一个应用程序并且它可以正常工作）。一直以来，应用程序的外观应尽可能接近 ICS/JB。

不过，对于我的 EditTexts，我给他们一个 Girgerbread/iOS（圆角，但没有阴影）的外观

几周前有人向我提到要获取 Gingerbread 的可绘制对象并将它们用于我的 EditTexts。但我开始使用我在 S/O 找到的另一个答案，非常简单：

```
<EditText
 background:"@drawable/edittext_round_white"
 ..../> 
```

&我的edittext_round_white.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android" 
  android:shape="rectangle"
  >
  <corners android:radius="8dp"/>
<stroke android:width="1dp"
    android:color="#444"/>
<solid android:color="#FFFFFF" />
  </shape> 
```

现在，当我运行应用程序时，有两件事不对

a）根本没有“焦点”（我知道我需要实现这一点，这是问题的重点）

b）光标根本没有出现在我的编辑文本中（灰色垂直线提示输入在编辑文本中的位置）

对于 a) 我假设我必须使用某种选择器或列表，对吗？如何？我是 android 样式的新手，任何帮助将不胜感激。我唯一要改变的是描边颜色。

对于b）我怎样才能让光标出现？

非常欢迎这里的任何提示/链接/等！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-27T01:18:45.757

我建议使用 NinePatch 图像来自定义您的 EditText。这是基于我的代码的示例：

选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_window_focused="false" android:state_enabled="true"
        android:drawable="@drawable/twitter_im_edittext_normal" />
  <item android:state_window_focused="false" android:state_enabled="false"
        android:drawable="@drawable/twitter_im_edittext_normal" />
  <item android:state_pressed="true" android:drawable="@drawable/twitter_im_edittext_normal" />
  <item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/twitter_im_edittext_focused" />
  <item android:state_enabled="true" android:drawable="@drawable/twitter_im_edittext_normal" />
  <item android:state_focused="true" android:drawable="@drawable/twitter_im_edittext_focused" />
  <item android:drawable="@drawable/twitter_im_edittext_normal" />
</selector> 
```

使用与代码中相同的方式使用选择器，将其设置为 EditText 的背景。

图片：

![twitter_im_edittext_focused.9.png](../Images/d0f50b6639eb1176d7c0c4683fd59dbd.png) twitter_im_edittext_focused.9.png

![twitter_im_edittext_normal.9.png](../Images/73cad48d3a6f35442a849a8923739643.png) twitter_im_edittext_normal.9.png

您可以在[此处](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)找到有关 NinePatch 图像的更多信息。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-05T11:03:02.503

已接受答案的简短版本

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="true" android:state_focused="true"
        android:drawable="@drawable/edit_text_background_focused" />
    <item android:drawable="@drawable/edit_text_background_normal" />
</selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T13:37:22.733

我认为问题在于您的光标位于editText框的左侧“边框/墙”上方，并且由于重叠而不可见。

我所做的是为文本添加一些填充，这使光标和文本更“向内”移动，然后变得可见。

尝试将此添加到您的editText：

```
android:paddingLeft="8dp" 
```

# android - 打开 .trace 文件

> ID：14542571
> 
> 赞同：1
> 
> 时间：2013-01-26T23:15:50.510
> 
> 标签：android, performance, android-traceview

我正在使用 Eclipse Juno。

我创建了一个跟踪文件，我可以在我的 Android 文件资源管理器中看到这个文件。

我现在怎么打开它？

# c++ - 有没有更好的方法来通过模板用预先计算的值填充数组（用于在运行时使用）？

> ID：14542572
> 
> 赞同：0
> 
> 时间：2013-01-26T23:15:51.477
> 
> 标签：c++, templates, c-preprocessor

所以，假设我有一个模板 structure-function `fib<i>::value`。我想在运行时获得第 n 个斐波那契数。为此，我创建了数组`fibs[] = { fib<0>::value, ... , fib<maxN>::value }`。不幸的是，对于某些功能`maxN`可能非常大，我不能只用手填充它。所以我写了一些预处理指令来简化任务。

```
#define fib(x) (fib<(x)>::value)
#define fibLine_level_0(x) fib(5*(x) + 0), fib(5*(x) + 1), fib(5*(x) + 2), fib(5*(x) + 3), fib(5*(x) + 4)
#define fibLine_level_1(x) fibLine_level_0(2*(x) + 0), fibLine_level_0(2*(x) + 1)
#define fibLine_level_2(x) fibLine_level_1(2*(x) + 0), fibLine_level_1(2*(x) + 1)
#define fibLine_level_3(x) fibLine_level_2(2*(x) + 0), fibLine_level_2(2*(x) + 1)

#define cAarrSize(x) (sizeof(x) / sizeof(x[0])) 
```

我这样使用它：

```
int fibs[] = { fibLine_level_3(0) };

for (int i = 0; i < cAarrSize(fibs); i++)
    cout << "fib(" << i << ") = " << fibs[i] << endl; 
```

您可能需要的代码：

```
template<int i>
struct fibPair{
    static const int fst = fibPair<i-1>::snd;
    static const int snd = fibPair<i-1>::fst + fibPair<i-1>::snd;
};

template<>
struct fibPair<0> {
    static const int fst = 0;
    static const int snd = 1;
};

template<int i>
struct fib {
    static const int value = fibPair<i>::fst;
}; 
```

但是这段代码真的很丑。怎么做才能让它更漂亮？

约束：此代码必须在体育节目中使用。这意味着 - 没有第三方库，有时也没有 C++11（但它可以）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:30:17.320

`Fib`结构可以改写如下：

```
template <size_t i>
struct fib
{
    static const size_t value = fib<i - 1>::value + fib<i - 2>::value;
};

template <>
struct fib<0>
{
    static const size_t value = 0;
};

template <>
struct fib<1>
{
    static const size_t value = 1;
}; 
```

斐波那契数列的编译时数组可以使用 C++11 计算。

**编辑 1**（更改了`fib`值的类型）。

**编辑 2**：

斐波那契数列的编译时生成（基于[此](https://stackoverflow.com/a/2981617/1043806)答案）。

```
template<unsigned... args> struct ArrayHolder
{
    static const unsigned data[sizeof...(args)];
};

template<unsigned... args>
const unsigned ArrayHolder<args...>::data[sizeof...(args)] = { args... };

template<size_t N, template<size_t> class F, unsigned... args>
struct generate_array_impl
{
    typedef typename generate_array_impl<N-1, F, F<N>::value, args...>::result result;
};

template<template<size_t> class F, unsigned... args>
struct generate_array_impl<0, F, args...>
{
    typedef ArrayHolder<F<0>::value, args...> result;
};

template<size_t N, template<size_t> class F>
struct generate_array
{
    typedef typename generate_array_impl<N-1, F>::result result;
};

int main()
{
    const size_t count = 10;
    typedef generate_array<count, fib>::result fibs;

    for(size_t i = 0; i < count; ++i)
        std::cout << fibs::data[i] << std::endl;
} 
```

您所需要的只是提供`generate_array`生成«function»（我们的`fib`结构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:36:47.883

感谢@nameless，提供了问题的链接，在那里我找到了@MichaelAnderson 对简单c++（没有新功能）的[回答。](https://stackoverflow.com/a/2979120/855229)我使用它并根据自己的需要进行扩展。

所以，概念很简单，但有点奇怪。我们必须生成递归模板化结构，其中第一个字段是与其他参数相同的模板化结构。

```
template<size_t N>
struct FibList {
    FibList<N-1> previous;
    size_t value;
    FibList<N>() : value(fib<N>::value) {}
}; 
```

让我们尝试扩展一下（只是看看，编译器会产生什么）：

```
template<size_t N>
struct FibList {
    FibList<N-3> previous;
    size_t value_N_minus_2;
    size_t value_N_minus_1;
    size_t value_N;
}; 
```

所以我们可以认为 FibList 是数组并且只是转换它（这是我的解决方案的弱点 - 我现在无法证明这一点）

```
static const size_t maxN = 2000;
FibList<maxN> fibList;
size_t *fibArray = &fibList.value - maxN; 
```

或者以另一种方式：

```
size_t *fibArray = reinterpret_cast<size_t*>(&fibList); 
```

**重要提示**：数组的大小为 maxN+1，但获取数组大小（`sizeof(array) / sizeof(array[0]`）的标准方法将失败。对此非常准确。

现在我们必须停止递归：

```
// start point
template<>
struct FibList<0> {
    size_t value;
    FibList<0>() : value(0) {}
};

// start point
template<>
struct FibList<1> {
    FibList<0> previous;
    size_t value;
    FibList<1>() : value(1) {}
}; 
```

请注意，交换位置`FibList<1>`和`FibList<0>`将在编译器中产生堆栈溢出。

我们必须解决另一个问题——模板递归的深度有限（取决于编译器和/或选项）。但是，幸运的是，编译器只有深度限制，没有模板的内存限制（嗯，是的，内存限制大于深度限制）。所以我们有明显丑陋的解决方案 -`fib<N>`以等于深度限制的步长串联调用 - 我们永远不会捕获模板深度限制`fib<N>`。但是我们不能只`fib<500>::value`在运行时写 not。所以我们得到了解决方案 - 编写将专门`FibList<N>`使用的宏`fib<N>::value`：

```
#define SetOptimizePointForFib(N) template<>\
struct FibList<N> {\
    FibList<(N)-1> previous;\
    size_t value;\
    FibList<N>() : value(fib<N>::value) {}\
}; 
```

我们必须这样写：

```
SetOptimizePointForFib(500);
SetOptimizePointForFib(1000);
SetOptimizePointForFib(1500);
SetOptimizePointForFib(2300); 
```

所以我们得到了真正的编译时间预计算并填充了惊人长度的静态数组。

# iphone - iPhone 5 与 iPhone 4 屏幕尺寸对比

> ID：14542574
> 
> 赞同：0
> 
> 时间：2013-01-26T23:15:56.343
> 
> 标签：iphone, ios, cocos2d-iphone, iphone-5

我一直在为 iPhone 开发 cocos2d 应用程序。我一直在我的 iPhone 5 上测试它。一切看起来都很棒，但是当我在 3.5 英寸模拟器 iPhone 上测试它时，一些按钮丢失了，一些标签放错了位置。

我想知道为什么会这样？我原以为一切都通过 cocos2d 网格定位，然后将其转换为像素，因此无论屏幕大小如何，布局看起来都应该相同。

我认为问题的部分原因可能是当我设置菜单项的位置时，(0,0) 将它放在屏幕的中心。我不知道这是为什么。

关于发生了什么的任何建议？

左边是 iPhone 5，左边是模拟器（3.5 英寸）。

![在此处输入图像描述](../Images/950f5d0575356184986489ac6bd5620b.png)

这是此屏幕的代码：

```
 CCSprite *title = [CCSprite spriteWithSpriteFrameName:@"highscoresTitle.png"];
    [self addChild:title];
    title.position = ccp([CCDirector sharedDirector].winSize.width/2, [CCDirector sharedDirector].winSize.height-title.contentSize.height-15);
    background.position = ccp([CCDirector sharedDirector].winSize.width/2, [CCDirector sharedDirector].winSize.height/2);
    play = [CCMenuItemSprite itemWithNormalSprite:[CCSprite spriteWithSpriteFrameName:@"playNew.png"] selectedSprite:[CCSprite spriteWithSpriteFrameName:@"playNew.png"] target:self selector:@selector(playScene:)];
    play.position = ccp(0, -200);

    CCLabelTTF *backLabel = [CCLabelTTF labelWithString:@"BACK" fontName:@"RBNo2-Light-Alternative" fontSize:25];
    CCMenuItemLabel *goBack = [CCMenuItemLabel itemWithLabel:backLabel target:self selector:@selector(back:)];
    goBack.position = ccp(0, -260);

    CCMenuItemSprite *gameicon = [CCMenuItemSprite itemWithNormalSprite:[CCSprite spriteWithSpriteFrameName:@"gameCenter.png"] selectedSprite:[CCSprite spriteWithSpriteFrameName:@"gameCenter.png"] target:self selector:@selector(gameIcon:)];
    gameicon.position = ccp(0, -150);

    CCMenu *menu = [CCMenu menuWithItems:play,goBack, gameicon, nil];
    [self addChild:menu z:0]; 

    for(int i = 0; i<5 && i<length; i++){

        NSString *temp = [NSString stringWithFormat:@"%d: %d", i+1,[[highscores objectAtIndex:i]intValue]];
        CCLabelTTF *label = [CCLabelTTF labelWithString:temp fontName:@"RBNo2-Light-Alternative" fontSize:20];
        label.position = ccp([CCDirector sharedDirector].winSize.width/2, 350-i*30);
        label.visible = YES;
        [self addChild:label z:100 tag:1];

    }

    NSString *temp = [NSString stringWithFormat:@"Last Score: %d", newHighscore];
    CCLabelTTF *label = [CCLabelTTF labelWithString:temp fontName:@"RBNo2-Light-Alternative" fontSize:20];
    label.position = ccp([CCDirector sharedDirector].winSize.width/2, 415);
    label.visible = YES;
    [self addChild:label z:100 tag:1]; 
```

这是另一个带有滑块的示例：（iPhone 5 左） ![在此处输入图像描述](../Images/40e5fbffc9261c680d499cf75539b7a9.png)

这是滑块的代码：

```
 sliderCtl = [[UISlider alloc]initWithFrame:CGRectMake(100, 460, 200, 0)];
    //[sliderCtl.layer setAffineTransform:CGAffineTransformMakeRotation(3.141/2)];
    [sliderCtl addTarget:self action:@selector(sliderAction:) forControlEvents:UIControlEventValueChanged];

    sliderCtl.backgroundColor = [UIColor clearColor];
    sliderCtl.value = 1.0;

    [[[[CCDirector sharedDirector] openGLView] window] addSubview:sliderCtl];

    sliderEff = [[UISlider alloc]initWithFrame:CGRectMake(100, 402, 200, 0)];

    [sliderEff addTarget:self action:@selector(effectsSlider:) forControlEvents:UIControlEventValueChanged];

    sliderEff.backgroundColor = [UIColor clearColor];
    sliderEff.value = 1.0;

    [[[[CCDirector sharedDirector] openGLView] window] addSubview:sliderEff]; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:57:53.033

这个答案很可能会让你失望。iPhone 5 的长边上有许多像素，这与以前的所有型号都不同。用于在场景中放置对象的坐标系是点，其中 1 pt 在配备 Retina 显示器的设备上等于 2 px。

您确实使用了`winSize`由`CCDirector`. 这确实可以帮助您计算相对位置，例如，以便像我在代码的某些地方看到的那样沿水平居中，例如 for `label`. 在、 和相关属性的帮助下`anchorPoint`，您一个人负责定位您的对象。`winSize`

**具体示例**：您放置`goBack`在 -260 pt 的相对位置。请注意，`menu`默认情况下，您在屏幕上居中。在 iPhone 4S 和之前的所有型号中，这意味着绝对位置为 480 pt / 2 - 260 pt = -20 pt。毫不奇怪，按钮不在屏幕上。您将不得不进行`winSize.height`相应的测试和调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:44:43.577

我遇到了同样的问题，现在我在以下链接中使用来自 GitHub 的 UIDevice Extension 库来识别设备。这有点矫枉过正，除非您使用已识别设备中的其他项目，而不仅仅是屏幕尺寸，但认为您可能能够使用它，因为我往往会遇到更多设备类型的需求。

[https://github.com/erica/uidevice-extension](https://github.com/erica/uidevice-extension)

# include - 如何在 D 源代码中包含文件，就像在 C 中一样

> ID：14542578
> 
> 赞同：1
> 
> 时间：2013-01-26T23:16:19.123
> 
> 标签：include, d

那是：

```
#include "mySnippet.h" 
```

D竟然有这种东西？

使用`import "myInclude.d"`过程：

```
test.d(5): Error: Identifier expected following import
test.d(5): Error: ';' expected 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T17:31:53.957

与 C/C++ #include 语句远程相似的唯一事情是文件的就地导入，然后将其混合到源代码中：

```
mixin(import("mySnippet.d")); 
```

D 是一种[模块化编程语言](http://en.wikipedia.org/wiki/Modular_programming)`import`，当您进行 D 编程时，该语句是您的朋友。

在 D 中，你真的不需要像`#pragma once`. 这个扩展和包含守卫在那里是因为 C 和 C++ 不关心这些东西。D 可以。

但是，我假设您可能想知道如何为您的客户提供接口，以防您创建一个库并且您不想公开内部。为此，DPL 团队提出了[D 接口文件](http://dlang.org/dmd-linux.html#interface_files)来解决这个问题。因此，您只需将接口文件连同您的库一起提供给您的客户端，工作就完成了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T23:24:03.253

请参阅参考文件：[http ://dlang.org/module.html](http://dlang.org/module.html)

导入是这样完成的（从那里提取）：

```
import std.stdio; // import module stdio from package std
import foo, bar; // import modules foo and bar

void main() {
  writefln("hello!\n"); // calls std.stdio.writefln
} 
```

模块是这样创建的：

```
module A;
void foo();
void bar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:20:46.967

D风格是：

```
import myinclude; 
```

D 没有像 C 那样的文本包含。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T03:01:26.037

D 不像 C/C++ 那样包含文件。

C/C++ 实际上将包含文件的内容复制到#include 的位置，这就是为什么需要'#pragma once' 或其他包含保护的原因，因为代码每次在#include 中时都会被复制包括线。

D 不费心复制源代码，并将每个源文件编译成自己的目标文件。D 中的“import”命令要求在模块中找到的符号（或每个函数、类、结构、枚举和变量的名称）。然后编译器只需将这些目标文件连接到可执行文件中。好吧，还有比这更多的东西，但这应该足够准确。

此外，正如 Ruppe 先生所说，无需将源文件的名称括在引号中，也无需在名称中添加文件扩展名。

例如，如果你在 main.d 中有你的 main() 函数，并且你想包含一个名为 foo.d 的源文件，它与 main.d 位于同一文件夹中，那么你在 main.d 中键入以下内容;

```
import foo; 
```

在 foo 中，你会有；

```
module foo;
<other code here> 
```

希望这可以帮助。其中大部分也位于[http://dlang.org](http://dlang.org)的语言定义下的“模块”页面上[。](http://dlang.org/module.html#ImportDeclaration)

# android - 共享数据库数据

> ID：14542583
> 
> 赞同：3
> 
> 时间：2013-01-26T23:17:55.127
> 
> 标签：android, database, sqlite, database-design

我需要在 2 个用户之间共享文本数据。我可能会使用一些 Android Cloud 服务（Open to Suggestion）来这样做，但我不确定一个好的 PK。我不想使用 DATETIME 作为 PK，但我不知道任何其他方式。什么是在 2 个（或更多）用户之间共享而没有太多开销的好 PK？

如果我有`SharedTable`100 个条目，而我的朋友只有 2 个条目，`ShareTable`那么我需要他的 (2) PK 和我的 (101) PK 来共享我自己、他和我正在共享的任何其他人之间对数据的任何编辑这些信息似乎无法自动增加。

我无法想象这不是一个常见的问题，但我无法理解它，所以很难理解我的观点。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:25:05.917

使用 uids（唯一 ids）作为您的 pk，这将保证无论在何处创建的条目都是唯一的，因此可以进行组合、更新等操作。

```
java.util.UUID.randomUUID(); 
```

# ruby-on-rails - 在不更改链接的情况下呈现错误 - Ryan Bates - RAILS

> ID：14542586
> 
> 赞同：0
> 
> 时间：2013-01-26T23:18:27.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, railscasts

对于那些真正拥有或正在观看 RailsCasts 的人，以及真正看过这两个视频的人： [http](http://railscasts.com/episodes/250-authentication-from-scratch?view=comments) [: //railscasts.com/episodes/250-authentication-from-scratch?view=comments http://railscasts.com/episodes/250-authentication-from-scratch?view=comments //railscasts.com/episodes/250-authentication-from-scratch-revised](http://railscasts.com/episodes/250-authentication-from-scratch-revised)

你会注意到，在他们两个中，在他所做的每次登录空白测试中，Ryan Bates 似乎并不关心在登录validation_presence 错误时，他会从/sessions/new 重定向到/sessions。这让我很困扰，我仍然很难找到解决方案？我有一种感觉，它相当简单，但我想它只是隐藏在某个可见的地方，但对我来说不是。

****这基本上是 RYAN BATES 代码：* *他有错误 - 我有错误。：想法？？？**

**用户模型：**

```
has_secure_password

attr_accessible :email, :password, :password_confirmation

validates_uniqueness_of :email 
```

**会话控制器：**

```
def new
end

def create
  user = User.find_by_email(params[:email])
  if user && user.authenticate(params[:password])
    session[:user_id] = user.id
    redirect_to root_url, notice: "Logged in!"
  else
    flash.now.alert = "Email or password is invalid"
    render "new"
  end
end

def destroy
  session[:user_id] = nil
  redirect_to root_url, notice: "Logged out!"
end 
```

**会话登录页面：**

```
<h1>Log In</h1>

<%= form_tag sessions_path do %>
  <div class="field">
    <%= label_tag :email %><br />
    <%= text_field_tag :email, params[:email] %>
  </div>
  <div class="field">
    <%= label_tag :password %><br />
    <%= password_field_tag :password %>
  </div>
  <div class="actions"><%= submit_tag "Log In" %></div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:23:35.903

我没有专业人士，所以无法观看这一集……你为什么说你被重定向到 /sessions？日志文件是否真的说它正在这样做？

请记住...当您提交该表单时，它会 POST 到 /sessions。因此，您会在地址栏中*看到*“/sessions”，但不会将您重定向到那里。当该表单提交失败时，它将`render :action => 'new'`在“/sessions”的当前 url 处。但是您仍然没有重定向....

# c - 该程序适用于小数据输入，但在输入大字符串时会出现运行时错误..?? 为什么..？

> ID：14542590
> 
> 赞同：-3
> 
> 时间：2013-01-26T23:18:49.900
> 
> 标签：c, string, pointers

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
int main()
{
char* str;
int i;
printf("Enter the String:\n");
gets(str);
int len=strlen(str)-1;
while(len>0&& isspace(str[len]))
len--;
str[len+1]='\0';
printf("Output string:\n%s\n",str);
return 0;
} 
```

当输入很小（如“尾随空间”）时，此代码工作得非常好，但在大输入（如“尾随空间已删除”）时崩溃。我不知道为什么会这样，所以请帮助我。该程序删除字符串末尾的尾随空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:20:47.950

因为`str`从未初始化并且指向垃圾数据。

你很幸运，这是未定义的行为

而是使用`malloc()`动态分配内存，`str`我猜它会这样做。

像这样：`char *str = malloc(100); // say for 100 characters`

`len`然后将小于或等于 100（并且应该包括 '\0'）

另请注意，使用`gets()`是一个坏主意。而是使用`fgets()`或`gets_s()`功能

# c++ - 列出库中的变量导致运行时错误，为什么？

> ID：14542591
> 
> 赞同：0
> 
> 时间：2013-01-26T23:18:51.027
> 
> 标签：c++, static-libraries, stdlist

好的，伙计们。我已经通过移动变量定义修复了错误，但我不明白为什么会出现问题。
简化背景：我有一个对象，我想在一个列表中跟踪该对象的所有实例，所以我只是创建了一个 List<> 类的静态成员。下面是一个简单的表示，让我可以使用它。如果我在静态库中将该行标记为“此行”。我收到运行时错误。该对象在头文件中定义，并且在两个地方都是相同的头文件。如果我将“这一行”移动到最终应用程序中的代码并且它可以工作......为什么？我只是不明白为什么它不同。

```
#include "stdafx.h"
#include <list>

using namespace std;

class someobject
   {
   public:
      someobject()
         {
         // do some stuff.
         theStaticList.push_back(this);
         }

      void func()
         {
         printf("Made it!!\n");
         }
   static list<someobject*> theStaticList;
   };

list<someobject*> someobject::theStaticList;    //*** This line

someobject global;

int main()
{
   someobject initial;

   initial.func();
   global.func();

   list<someobject*>::iterator iter;

   printf("\n\nLoop the Static List\n");

   for (iter = someobject::theStaticList.begin(); iter != someobject::theStaticList.end  ();       iter++)
       (*iter)->func();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:23:25.943

如果将该行放在头文件中，然后将头包含在两个或多个源文件中，则您将在包含头的每个源文件中定义列表对象。

这违反了一个定义规则，所以当你这样做时，链接器会很正确地给你一个错误。

您想在*一个*（并且只有一个）源文件中定义对象。对于一个库，它应该是库中的某个目标文件，而不是用户的源文件（至少作为一般规则）。

# html - HTML5 链接到部分

> ID：14542592
> 
> 赞同：6
> 
> 时间：2013-01-26T23:19:18.207
> 
> 标签：html

好吧，在 HTML 4.01 中，例如`<div id="example">`我可以`<a href="#example">`滚动到那个 div。

我怎样才能做出同样的效果`<section class="asd xyz">`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-26T23:22:16.757

它们的工作方式相同。向该部分添加一个 ID，链接应该可以工作。

```
<section id="example"></section> 
```

此代码跳转到部分`#example`。

```
<a href="#example">Jump to example</a> 
```

**编辑：** 纯 HTML 不允许您跳转到类名，这是有充分理由的。ID 是唯一的，而类可以根据需要重复使用。因此你不能跳转到一个类名，因为它可能没有一个目标。

# regex - 了解后视

> ID：14542597
> 
> 赞同：-1
> 
> 时间：2013-01-26T23:20:08.700
> 
> 标签：regex, lookbehind

我将正则表达式 => 和主题字符串 => USD100 放入在线测试仪中 `.{3}(?<=USD\d{3})`，这将返回 100。我想知道正则表达式引擎在这种情况下是如何工作的？正则表达式引擎如何返回这 100？

正则表达式：.{3}(?<=USD\d{3})

主题：100美元

回报：100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:46:18.703

您的正则表达式表示“三个字符”（`.{3}`），加上附加规则，即当您到达三个字符的末尾时，如果向后看（`(?<=...)`），您将看到“USD”加上三个数字（`USD\d{3}`）。

在您的输入字符串 ( `USD100`) 中，只有一个位置您可以向后看并看到“USD”加上三位数字：即最后。因此，当应用于您的输入字符串时，您的正则表达式实际上意味着“字符串末尾之前的三个字符”，即`100`.

那有意义吗？

# ruby-on-rails - ActiveAttr 停止在生产服务器上工作

> ID：14542600
> 
> 赞同：0
> 
> 时间：2013-01-26T23:20:28.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, active-attr

我创建了一个简单的模型来处理联系表：

```
 class ContactForm
   include ActiveAttr::Model

  attribute :name
  attribute :email
  attribute :message

  attr_accessible :name, :email, :message

  validates_presence_of :name, :email, :message
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]    {2,4}$/i
end 
```

它在开发环境中运行良好，但在生产服务器上给我一个错误，记录在 unicorn 日志中：

```
E, [2013-01-26T18:15:42.724973 #8940] ERROR -- : uninitialized constant ContactForm::ActiveAttr (NameError) 
```

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'bootstrap-sass'
gem 'font-awesome-sass-rails'
# gem 'acts_as_tree', :git => 'git://github.com/amerine/acts_as_tree.git'
gem 'closure_tree'
gem 'kaminari'
gem 'friendly_id'
gem 'slim'
gem 'gmaps4rails'
gem 'devise'
gem 'omniauth'
gem 'oauth2'
gem 'omniauth-facebook'
gem 'omniauth-twitter'
gem 'simple_form'
gem 'pg_search'
gem 'stamp'
gem 'acts-as-taggable-on', '~> 2.3.1'
gem 'rmagick'
gem 'carrierwave'
gem 'active_attr'
gem 'select2-rails'
# gem 'roo'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
  gem 'compass-rails'
end

group :development do 
  gem "better_errors"
  gem "binding_of_caller"
  gem 'guard'
  gem 'letter_opener'
end

group :test do 
  gem 'minitest'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
gem 'unicorn'

# Deploy with Capistrano
gem 'capistrano'

# To use debugger
# gem 'debugger'

gem 'bullet', :group => :development
gem 'rack-mini-profiler' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T21:47:53.850

我遇到了同样的问题，我的解决方法是`active_attr`在我的`gemfile`.

```
gem 'active_attr', '0.7.0' 
```

我在 GitHub 上发现了一个问题，其他人在[这里](https://github.com/cgriego/active_attr/issues/119 "Github")遇到了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:31:22.193

我在开发环境中遇到了同样的问题。我按照这个分步教程[https://github.com/thomasklemm/email_form_rails](https://github.com/thomasklemm/email_form_rails)。

当我尝试在控制台中创建新消息时，我得到：

```
m=Message.new
NameError: uninitialized constant Message::ActiveAttr 
```

我使用 Rails 3.2.1，active_attributes gem 版本是 0.0.1。

编辑

我的错，似乎我在安装 gem 时犯了一个错误（不是好的那个）

从 gem 'active_attributes','0.0.1' 更改 gemfile

到 gem 'active_attr', '0.0.7'

现在它似乎工作......

# php - 另一个内部的 Foreach 循环

> ID：14542605
> 
> 赞同：0
> 
> 时间：2013-01-26T23:21:02.707
> 
> 标签：php, foreach

我有一个现有的 foreach 循环，如下所示，我希望在其中添加另一个 foreach 循环。基本上我正在做的是为 SEO 目的创建文件。这并不理想，但一位客户坚持认为他希望这样做。无论如何，所以我有以下循环，我希望了解如何添加另一个循环，该循环将循环遍历一系列城市并将它们也添加到文件名中。

例如，现在文件名的结构是这样的......

公司名称 - 电话号码 - 关键字

它循环浏览通过网络表单提供的关键字列表，并为每个文件分配一个关键字。现在他也想添加城市，但当然同样的规则也适用。每个文件一个城市，在关键字之后找到。

我试过了，但不是每个文件一个城市，而是将数组中的每个城市插入一个文件名。我希望这是一个快速修复。:)

谢谢！

```
<?php
foreach ($keyword_list as $key => $value) {
$keyword = strtolower($value);
//REMOVE COMMAS
$keyword = str_replace(',', '', $keyword);
//ADD HYPHENS
$keyword = str_replace(' ', '-', $keyword);

for ($i = 0; $i < count($content); $i++) {
    $content[$i] = trim($content[$i]);
    //RE-REPLACE SINGLE QUOTES TO ESCAPED VERSIONS FOR INCLUSION IN HTML DOC (PHP ARRAY)
    $content[$i] = str_replace("'", "\'", $content[$i]);
}

$file = strtolower(str_replace(' ', '-', $businessName . '-' . $businessPhone));
$file .= '-' . $keyword;

$filename = $file . '.php';
}
?> 
```

# bash - 将变量转换为 bash 脚本转换为 python 脚本

> ID：14542607
> 
> 赞同：1
> 
> 时间：2013-01-26T23:21:18.870
> 
> 标签：bash, arguments, alias

我有一个要用于导航的 python 脚本。它返回一个目录路径 ex /user/bin/dir/ 我正在向它发出一个错误，但我似乎无法传递它变量

这在外壳中有效

```
> cd `python ~doug/scripts/nv.py arg1
>>/user/bin/dir/ 
```

alias nav='cd `python ~doug/scripts/nv.py $1`' 但这个别名不起作用

我希望 arg1 被传递到 $1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:04:36.753

`bash`别名不能带参数；您想改用 shell 函数：

```
nav () {
    cd $(python ~doug/scripts/nv.py $1)
} 
```

# c# - 在 Visual C# 2010 Express 中，“类”Babel 图标和“字段/变量”图标旁边的数字“1”是什么意思？

> ID：14542609
> 
> 赞同：1
> 
> 时间：2013-01-26T23:21:28.830
> 
> 标签：c#, visual-studio-2010, express, icons, babeljs

我是 Visual C# 2010 Express 的新手。我正在尝试了解 Babel 图标的含义。

到目前为止，链接[http://msdn.microsoft.com/en-us/library/y47ychfe(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/y47ychfe(v=VS.100).aspx)已经回答了我所有的问题——除了一个：

当我在调试时查看“Locals”窗口时，“类”和“字段/变量”的 Babel 图标在最左侧/底部图标旁边的方框内都有一个非常小的数字“1” .

我似乎找不到任何关于方框中的“1”是什么意思的信息。

我有一个屏幕截图，但这个网站不允许我发布它，因为我是新成员。

非常感激你的帮助！

一切顺利，

布莱恩·S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:41:26.643

是**`static`**会员的意思。例如在课堂上：

```
class Elephant
{
  public int I;
  public static int J;
} 
```

该字段意味着即使您创建了许多这样的字段，也只有一个这样的`J`字段。相反，每个都有一个，即“许多”。`static``Elephant``I``Elephant`

# java - 使用堆栈了解 Java 代码中的后缀表达式求值

> ID：14542610
> 
> 赞同：1
> 
> 时间：2013-01-26T23:21:30.000
> 
> 标签：java, stack, postfix-notation

我得到了一段代码来破译、解释并提供任何改进建议。有人告诉我它可以工作，我们无法运行代码来测试它。我非常了解它，但只需要由某人运行它以确保我对它的理解是正确的，请在解释我不理解的内容时获得任何帮助。我一直在做大量的研究，但仍然有一些问题。

该代码用于读取仅使用乘法和加法的后缀表达式。然后评估表达式，同时将结果保存到堆栈中。然后它打印出结果。操作数被压入堆栈，然后当它读取一个运算符时，它会从堆栈中弹出顶部的 2 个操作数来执行计算并将结果存储回堆栈中。

该程序假定整数和运算符由某种字符（如空格或其他字符）分隔，但根本不检查输入的合法性。

```
 public static void main(String[] args)
{
    char[] a = args[0].toCharArray();
    int N =a.length;
    intStack s = new intStack();
    for (int i = 0; i<N; i++)
    {
        if (a[i]=='+')
        {
            s.push(s.pop() + s.pop());
        }
        if (a[i]=='*')
        {
            s.push(s.pop() * s.pop());
        }
        if ((a[i] >= '0') && (a[i] <= '9'))
        {
            s.push(0);
        }
        while ((a[i] >= '0') && (a[i] <= '9'))
        {
            s.push(10*s.pop() + (a[i++]-'0'));
        }
        Out.println(s.pop() + "");
    }
} 
```

后修复表达式示例：2 3 5 + * = 16

***当谈到最后一个 if 语句和 while 循环时，我感到很困惑。***

所以第一次推送一个 0-9 数字字符时，它将存储一个 #0，然后弹出该 0，将其乘以 10 并将其添加到下一个转换为 int 的数字字符（如果有的话）和将结果推回堆栈？如果是这样，为什么将 0 压入堆栈？

它不应该将第一个 0-9 编号的字符转换为 int 数据类型，将其压入堆栈然后进入 while 循环吗？

然后在 While 循环中，读取数组并继续将 0-9 编号的字符转换为 int 数据类型并将它们推入堆栈，直到读取到不同的字符？

我也看不到它在 while 循环中增加 int i 的位置，还是跳出 while 循环以前进到下一个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:27:26.270

零的初始推动有点令人困惑。理解那里发生的事情的关键是观察`i`不增加的情况。当代码看到，比如说，`'4'`它是 中的第一个数字时`"42"`，`if`语句压入零；然后循环立即弹出它，乘以十，添加`4`，然后推回。`i`前进到下一个字符（即`2`），然后循环弹出`4`，乘以 10，`2`加 ，然后存储回来`42`- 所需的结果。

代码中有一个错误：当表达式以数字结尾时，会得到一个索引越界异常。例如，`42`是一个有效的后缀表达式（没有运算符是可以的，对吗？）内部循环会前进到字符串的末尾，从而导致异常。

# javascript - Javascript脚本/dom依赖？

> ID：14542611
> 
> 赞同：1
> 
> 时间：2013-01-26T23:21:49.463
> 
> 标签：javascript, ajax

当帮助某人拥有一个相当大且包含许多内容的网站时，我遇到了一个错误并且无法理解它。是这样的

```
<script src=...></script>
<div ...
<script>
alert('myscript');
</script> 
```

在我使用 html 的那部分并使用 jquery 将内容插入之前，此页面运行良好。它破坏了代码，但我不明白为什么。我看到了我的警报。我可以看到脚本正在通过浏览器网络日志进行访问。我看到了第一个脚本标记的一些结果，但它已损坏。

为什么顺序很重要？我认为只要 dom 准备好并且脚本执行完毕，一切都应该没问题。但在这种情况下，被 ajaxed 破坏它。我不能花太多时间，但很高兴看到某些事情取决于时间。

--edit--
**我还注意到如果脚本已经包含在页面中，它会运行良好**

有谁知道为什么内容中的ajaxing会中断？当它没有被罚款时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:42:31.290

根据你说的，我给出以下评价：

40% 的可能性——这与脚本加载有关。ajaxed 脚本中对其他脚本的依赖关系、您在页面上定义的变量，甚至应该加载的 DOM 内容，在脚本被 ajaxed 和执行时可能不会被加载。尝试更改页面上脚本标记的顺序，将脚本的加载放在文档`ready`事件处理程序中，或者使用 setTimeout 延迟脚本执行，或者`defer="defer"`——或者如果你真的很酷，创建一个引导加载程序来确保加载每个脚本并按照您指定的确切顺序执行：通过将无依赖的同时加载集链接到依赖加载的序列。

> Script1 <---- 取决于 --- (Script 2.1, Script 2.2, Script 2.3 ) <--- 取决于 --- Script3。

所以首先加载 1，然后是所有 2\. 脚本，然后是 3。

40% 的可能性——这与安全模型有关。您从哪个网站进行 ajaxing，那在哪里？它与页面所在的域有什么关系？您是否正在对此进行测试`localhost`？如果是这样，则有更多限制。在实际服务器上呢？是否在 ajax 响应中正确设置了 Access-Control-Allow-Origin 标头？

20% 的可能性——这是脚本和 DOM 之间的循环依赖。假设元素 X 上的某个事件处理程序在引用元素 X 的范围内关闭。然后在对 X 的引用中会有对 X 的引用，因此它们不能都被垃圾收集，所以 X 将持续存在，导致内存泄漏，并且可能会创建一个不可用的引用，这可能会破坏您的代码。

- 编辑 -

**根据您**对`.html(...)`我认为 .html 或 .load 运行脚本的评论太乱了，甚至可能根本不起作用。请参阅[.load() 不加载脚本](https://stackoverflow.com/questions/5467221/jquery-load-doesnt-load-script)以了解使用 ajax 加载脚本的好方法。或者你可以`jQuery.getScript(...)`。

此外，我似乎还记得使用 ajax 从纯 HTML 加载 html 节点时遇到问题。这对我来说似乎太乱了。如果您想通过 ajax 传输结构化信息，请使用 JSON，然后使用 javascript 和 HTML 在您身边呈现该信息。所以，不要抓整个数据+演示，只抓数据，然后在你身边做自己的演示。它整洁多了。

# parameters - 如何在 Inno Setup 中使用参数运行 .exe 文件

> ID：14542615
> 
> 赞同：5
> 
> 时间：2013-01-26T23:22:27.290
> 
> 标签：parameters, executable, exe, inno-setup

请，我尝试运行一个 .exe 文件，该文件在 cmd 控制台中以以下方式运行：

nameFile.exe -inf fileDriver.inf install

在 Inno 设置中，我有以下内容：

```
var
command: Srtring;

Begin

command := 'nameFile.exe -inf fileDriver.inf install';
command := AddQuotes(command);
Exec(command, '', 'C:\pathOfFileName', SW_SHOWNORMAL, ewWaitUntilTerminated, ResultCode);
S:= SysErrorMessage(ResultCode);
MsgBox(S, mbInformation, MB_OK);
end; 
```

提示参数无效，如何运行带参数的exe文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T23:31:14.777

查看您的[`Exec`](http://jrsoftware.org/ishelp/topic_isxfunc_exec.htm)调用，您需要将命令参数传递给函数调用的第二个参数。尝试使用这样的东西：

```
...
Exec('nameFile.exe', '-inf fileDriver.inf install', 'C:\pathOfFileName', 
      SW_SHOWNORMAL, ewWaitUntilTerminated, ResultCode);
... 
```

该[`Exec`](http://jrsoftware.org/ishelp/topic_isxfunc_exec.htm)函数声明为：

```
function Exec(const Filename, Params, WorkingDir: String; 
  const ShowCmd: Integer; const Wait: TExecWait; 
  var ResultCode: Integer): Boolean; 
```

# android - 我怎样才能让物理按钮回到上一课

> ID：14542617
> 
> 赞同：1
> 
> 时间：2013-01-26T23:22:38.730
> 
> 标签：android, back

```
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
     if ((keyCode == KeyEvent.KEYCODE_BACK)) {
         moveTaskToBack(true);
         return true;
     }

     return super.onKeyDown(keyCode, event);
   } 
```

嗨，有此代码可以返回上一课，但是当我点击返回按钮时，我进入了我的主启动器屏幕。我想进入我的应用程序的上一个屏幕并保留我在设置菜单中所做的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:54:28.963

尝试添加这个而不是 moveTaskToBack()：

```
super.onBackPressed(); 
```

所以你的代码应该是这样的：

```
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
     if ((keyCode == KeyEvent.KEYCODE_BACK)) {
         super.onBackPressed();
         return true;
     }

     return super.onKeyDown(keyCode, event);
   } 
```

显然，如果您在应用程序的第一个活动中，您将被带到您的主屏幕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:25:07.150

这是我的主要活动

公共类 MainActivity 扩展 FragmentActivity {

```
SectionsPagerAdapter mSectionsPagerAdapter;

ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);  
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.menu_settings4:
            mainactivity();
            return true;
        case R.id.menu_settings1:
            ipallilos();
            return true;
        case R.id.menu_settings2:
            rithmisi();
            return true;
        case R.id.menu_settings3:
            sxetika();
            return true;

        default:
            return super.onOptionsItemSelected(item);
    }

}

private void mainactivity() {

    Toast.makeText(MainActivity.this, "Επιστροφή στην Αρχική Σελίδα", 
            Toast.LENGTH_SHORT).show();
}
private void rithmisi() {
    setContentView(R.layout.rithmisis);
    Toast.makeText(MainActivity.this, "Loading Settings", 
            Toast.LENGTH_SHORT).show();
}

private void ipallilos() {
    setContentView(R.layout.ipallilos);
    Toast.makeText(MainActivity.this, "Loading Staff", 
            Toast.LENGTH_SHORT).show();
}

private void sxetika() {
    //anoigma menou efarmogis
    setContentView(R.layout.sxetikame);
    Toast.makeText(MainActivity.this, "Loading about Software", 
            Toast.LENGTH_SHORT).show();

}

 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
     if ((keyCode == KeyEvent.KEYCODE_BACK)) {
         //moveTaskToBack(true);
         super.onBackPressed();
         return true;
     }

     return super.onKeyDown(keyCode, event);
 }

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 2;
    }

    /**
     * εγω γράφεις τον τίτλο που θα φενεται
     * στο γραμμη το paper title
     */

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase();
           // case 1:
              //  return getString(R.string.title_section2).toUpperCase();
            case 1:
                return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

/**
 * ΕΔΩ ΓΡΑΦΕΙΣ ΓΙΑ ΤΟ ΤΙ ΘΑ ΦΕΝΕΤΑΙ ΜΕΣΑ
 * 
 */
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }
    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        Bundle args = getArguments();
        switch (args.getInt(ARG_SECTION_NUMBER)){

        case 1: 
            return inflater.inflate(R.layout.paraggeleialayout, container, false);

        case 2:
             return inflater.inflate(R.layout.trapezia, container, false);

    }

        return getView();

}
} 
```

}

# android - 按下退格键时应用程序崩溃

> ID：14542620
> 
> 赞同：4
> 
> 时间：2013-01-26T23:23:16.460
> 
> 标签：android

我正在尝试在构建 android 应用程序时学习 java。我有一个没有按钮的积分计算器，它使用 textchange 监听器来计算总数。当按下退格键并且该框为 null 时，它会崩溃。我尝试使用下面的代码进行验证（仅在字段开始验证）。但它不起作用。任何帮助将不胜感激。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_wwcalc);
    etFat = (EditText)findViewById(R.id.editTextFat);
    etFiber = (EditText)findViewById(R.id.editTextFiber);
    etProtein = (EditText)findViewById(R.id.editTextProtein);
    etCarbs = (EditText)findViewById(R.id.editTextCarbs);
    tvTotal = (TextView)findViewById(R.id.textViewPoints);

    TextWatcher watcher = new TextWatcher() {

        @Override 
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            if(isEmpty(etFat) == false){
                intFat = Integer.parseInt(etFat.getText().toString());
            }
            else{

                etFat.setText("0");
                etFat.hasFocus();
                return;
            }
            intProtein =   Integer.parseInt(etProtein.getText().toString());
            intFiber = Integer.parseInt(etFiber.getText().toString());
            intCarbs = Integer.parseInt(etCarbs.getText().toString());
            calculate();
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub

        }

    };

    etFat.addTextChangedListener(watcher);
    etProtein.addTextChangedListener(watcher);
    etFiber.addTextChangedListener(watcher);
    etCarbs.addTextChangedListener(watcher);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_wwcalc, menu);

return true;

}
public void calculate(){
    //intTot = intFat + intCarbs + intFiber + intProtein;
    intTot = (int) Math.ceil((intFat * (4/35)) + (intCarbs * (4/36.84)) - (intFiber* (4/50))+ (intProtein * (4/43.75)) ) ;
    tvTotal.setText(Integer.toString(intTot));
}
private boolean isEmpty(EditText etText)
{
 if(etText.getText().toString().trim().length() > 0 || etText.getText().toString().trim() != null)
    return false;
 else
   return true; 
} 
```

}

感谢大家的帮助。如果有人认为有更好的方法让我知道，我不确定它是否是最好的解决方案。conor 建议的 try catch 捕获异常，然后只需插入 0 集焦点并选择 0

```
try {
                intFat = Integer.parseInt(etFat.getText().toString());
            } catch (NumberFormatException e) {
                // TODO Auto-generated catch block
                etFat.setText("0");
                etFat.hasFocus();
                etFat.selectAll();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:21:54.260

没有看到堆栈跟踪很难知道，但无论如何我都会刺伤它。

当盒子仍然是空的时，您的函数的以下部分`isEmpty()`允许返回 false 。

```
etText.getText().toString().trim() != null 
```

这意味着当您按退格键并清除该字段时，它是空的，但您的函数说它不是。然后踢球者，当您的应用程序认为该字段不为空时，它会尝试将内容解析为整数值（不存在）。这种解析尝试会引发异常并使您的应用程序崩溃。

我希望堆栈跟踪显示应用程序在这一行崩溃

```
intFat = Integer.parseInt(etFat.getText().toString()); 
```

值得注意的是，您应该始终`Integer.parseInt()`使用 try、catch 块来包围调用。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:22:35.650

异常应该是Integer.parseInt引起的，

```
intFat = Integer.parseInt(etFat.getText().toString());
ntProtein = Integer.parseInt(etProtein.getText().toString());
intFiber = Integer.parseInt(etFiber.getText().toString());
intCarbs = Integer.parseInt(etCarbs.getText().toString()); 
```

如果将带空格的字符串传递给parseInt，会抛出NumberFormatException，需要对文本进行修整，然后设置，比如，

```
intFat = Integer.parseInt(etFat.getText().toString().trim()); 
```

# algorithm - 大数的阶乘

> ID：14542625
> 
> 赞同：0
> 
> 时间：2013-01-26T23:24:00.377
> 
> 标签：algorithm

考虑计算一个数的阶乘问题。当结果大于 2^32 时，我们会得到溢出错误。我们如何设计一个程序来计算大数的阶乘？

编辑：假设我们使用的是 C++ 语言。

[EDIT2：这](https://stackoverflow.com/q/1384160/1082727)是一个重复的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:33:06.910

作为仅标记算法的问题。您的 2^32 不是问题，因为算法永远不会出现溢出错误。算法的实现可以并且确实存在溢出错误。那你用什么语言？

大多数语言都有可以使用的 BigNumber 或 BigInteger。

这是一个 C++ BigInteger 库：[https ://mattmccutchen.net/bigint/](https://mattmccutchen.net/bigint/)

我建议你谷歌搜索：`c++ biginteger`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:50:48.043

测试这个脚本：

```
import gmpy as gm 
print gm.fac(3000) 
```

对于非常大的数字很难存储或打印结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T04:52:22.973

对于某些目的，例如计算组合的数量，计算阶乘的对数就足够了，因为您将阶乘除以阶乘并且最终结果的大小更合理 - 您只需在取之前减去对数结果的指数。

您可以通过添加对数或使用[http://en.wikipedia.org/wiki/Gamma_function](http://en.wikipedia.org/wiki/Gamma_function)来计算阶乘的对数，这通常在数学库中可用（有很好的方法来近似）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T23:31:43.930

这样做需要您采取几种方法之一，但基本上可以归结为：

1.  将您的号码拆分为多个变量（存储在数组中）和
2.  跨阵列管理您的操作。

这样，数组中的每个 int/元素都有一个位置大小，最后可以串在一起形成整数。

C中的一个很好的例子：[http ://www.go4expert.com/forums/c-program-calculate-factorial-t25352/](http://www.go4expert.com/forums/c-program-calculate-factorial-t25352/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T23:28:28.133

如果您可以接受近似值，请考虑使用[斯特林近似](http://en.wikipedia.org/wiki/Stirling%27s_approximation)并以双精度计算。

如果你想要精确的值，你将需要[任意精度的算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)和大量的计算时间......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T23:28:48.570

首先发明一种存储和使用大数的方法。常见的方法是将整数数组解释为大数的数字。然后将基本运算添加到您的系统中，例如乘法。然后相乘。

或者使用已经制定的解决方案。Google for：c++ 大整数库

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-18T20:28:35.603

You can use BigInteger for finding factorial of a Big numbers probably greater than 65 as the range of data type long ends at 65! and it starts returning 0 after that. Please refer to below Java code. Hope it would help:

```
import java.math.BigInteger;

public class factorial {

public factorial() {
        // TODO Auto-generated constructor stub
    }
    public static void main(String args[])
    {
        factorial f = new factorial();

        System.out.println(f.fact(100));
    }
    public BigInteger fact(int num)
    {
        BigInteger sum = BigInteger.valueOf(1);

        for(int i = num ; i>= 2; i --)
        {
            sum = sum.multiply(BigInteger.valueOf(i));
        }
        return sum;

    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-28T11:09:23.573

如果要提高测量范围，可以使用对数。对数会将您的乘法转换为加法，使其存储起来要小得多。

```
factorial(n) => n * factorial(n-1) 
log(factorial(n)) => log(n) * log(factorial(n-1))

5! = 5*4*3*2*1 = 120
log(5!) = log(5) + log(4) + log(3) + log(2) + log(1) = 2.0791812460476247

In this example, I used base 10 logarithms, but any base works.

10^2.0791812460476247

Or 10^0.0791812460476247*10^2 or 1.2*10^2 
```

[javascript中的实现示例](https://gist.github.com/AlexisTM/ad72976d89da8360cd9ddd4d120701b7)

# java - 在适配器中添加项目

> ID：14542629
> 
> 赞同：1
> 
> 时间：2013-01-26T23:24:22.967
> 
> 标签：java, android

我是编程新手。`GridView`我在从 Internet填写时遇到问题。通过`AsyncTask`，我解析了很多内容（img，txt），创建和填充数据库。而当我调用适配器`GridView`（`CursorAdapter`或任何标准适配器）时，他总是完全更新所有已经制作的内容。请提供某种方式来填充内容`GridView`而不更改已经完成的视图，来自 DB，它主动添加来自解析器的数据。在这种情况下使用什么适配器和方法更好？我将非常感谢一些指导或示例。谢谢你花几分钟给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:35:21.450

基本上，如果您有对您的列表适配器的引用，您只需要向您的适配器添加一个项目，然后调用[`notifyDataSetChanged()`](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)适配器。这将在您的网格视图中显示新项目，而无需再次添加所有项目。

# android - AsyncTask #3 解析 JSON 对象时出错。字符串无法转换为 JSONObject

> ID：14542631
> 
> 赞同：4
> 
> 时间：2013-01-26T23:24:40.787
> 
> 标签：android, json, android-asynctask

有人可以告诉我我的错误是什么吗？我从 AndroidHive.info 下载了这段代码。我不断收到“解析数据错误错误。还有人可以告诉我如何找出错误所在的行吗？

```
public class NewProductActivity extends Activity {

    // Progress Dialog
    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    EditText inputName;
    EditText inputPrice;
    EditText inputDesc;

    // url to create new product
    private static String url_create_product = "http://xxx.xxx.xxx.xxx/include/create_product.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_product);

        // Edit Text
        inputName = (EditText) findViewById(R.id.inputName);
        inputPrice = (EditText) findViewById(R.id.inputPrice);
        inputDesc = (EditText) findViewById(R.id.inputDesc);

        // Create button
        Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct);

        // button click event
        btnCreateProduct.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // creating new product in background thread
                new CreateNewProduct().execute();
            }
        });
    }

    /**
     * Background Async Task to Create new product
     * */
    class CreateNewProduct extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(NewProductActivity.this);
            pDialog.setMessage("Creating Product..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String name = inputName.getText().toString();
            String price = inputPrice.getText().toString();
            String description = inputDesc.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));
            params.add(new BasicNameValuePair("price", price));
            params.add(new BasicNameValuePair("description", description));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }
} 
```

**这是我的日志猫**

```
01-26 18:14:35.366: D/dalvikvm(12395): GC_CONCURRENT freed 72K, 52% free 2619K/5379K, external 1529K/2026K, paused 8ms+2ms
01-26 18:14:36.296: E/JSON Parser(12395): Error parsing data org.json.JSONException: Value Unknown of type java.lang.String cannot be converted to JSONObject
01-26 18:14:36.296: W/dalvikvm(12395): threadid=9: thread exiting with uncaught exception (group=0x2aac8560)
01-26 18:14:36.306: E/AndroidRuntime(12395): FATAL EXCEPTION: AsyncTask #1
01-26 18:14:36.306: E/AndroidRuntime(12395): java.lang.RuntimeException: An error occured while executing doInBackground()
01-26 18:14:36.306: E/AndroidRuntime(12395):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.lang.Thread.run(Thread.java:1019)
01-26 18:14:36.306: E/AndroidRuntime(12395): Caused by: java.lang.NullPointerException
01-26 18:14:36.306: E/AndroidRuntime(12395):    at com.example.androidhive.AllProductsActivity$LoadAllProducts.doInBackground(AllProductsActivity.java:129)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at com.example.androidhive.AllProductsActivity$LoadAllProducts.doInBackground(AllProductsActivity.java:1)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-26 18:14:36.306: E/AndroidRuntime(12395):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-26 18:14:36.306: E/AndroidRuntime(12395):    ... 4 more
01-26 18:14:36.566: E/WindowManager(12395): Activity com.example.androidhive.AllProductsActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2afca938 that was originally added here
01-26 18:14:36.566: E/WindowManager(12395): android.view.WindowLeaked: Activity com.example.androidhive.AllProductsActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2afca938 that was originally added here
01-26 18:14:36.566: E/WindowManager(12395):     at android.view.ViewRoot.<init>(ViewRoot.java:265)
01-26 18:14:36.566: E/WindowManager(12395):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
01-26 18:14:36.566: E/WindowManager(12395):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-26 18:14:36.566: E/WindowManager(12395):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
01-26 18:14:36.566: E/WindowManager(12395):     at android.app.Dialog.show(Dialog.java:241)
01-26 18:14:36.566: E/WindowManager(12395):     at com.example.androidhive.AllProductsActivity$LoadAllProducts.onPreExecute(AllProductsActivity.java:116)
01-26 18:14:36.566: E/WindowManager(12395):     at android.os.AsyncTask.execute(AsyncTask.java:391)
01-26 18:14:36.566: E/WindowManager(12395):     at com.example.androidhive.AllProductsActivity.onCreate(AllProductsActivity.java:57)
01-26 18:14:36.566: E/WindowManager(12395):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-26 18:14:36.566: E/WindowManager(12395):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
01-26 18:14:36.566: E/WindowManager(12395):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
01-26 18:14:36.566: E/WindowManager(12395):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
01-26 18:14:36.566: E/WindowManager(12395):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
01-26 18:14:36.566: E/WindowManager(12395):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-26 18:14:36.566: E/WindowManager(12395):     at android.os.Looper.loop(Looper.java:123)
01-26 18:14:36.566: E/WindowManager(12395):     at android.app.ActivityThread.main(ActivityThread.java:3701)
01-26 18:14:36.566: E/WindowManager(12395):     at java.lang.reflect.Method.invokeNative(Native Method)
01-26 18:14:36.566: E/WindowManager(12395):     at java.lang.reflect.Method.invoke(Method.java:507)
01-26 18:14:36.566: E/WindowManager(12395):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
01-26 18:14:36.566: E/WindowManager(12395):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
01-26 18:14:36.566: E/WindowManager(12395):     at dalvik.system.NativeStart.main(Native Method)
01-26 18:16:02.626: I/Process(12395): Sending signal. PID: 12395 SIG: 9 
```

谢谢！

编辑：这是 AllProductsActivity.java 的代码：

```
public class AllProductsActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products =    "http://xxx.xxx.xxx.xxx/include/get_all_products.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PRODUCTS = "products";
    private static final String TAG_PID = "pid";
    private static final String TAG_NAME = "name";

    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_products);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        // Get listview
        ListView lv = getListView();

        // on seleting single product
        // launching Edit Product Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                        .toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        EditProductActivity.class);
                // sending pid to next activity
                in.putExtra(TAG_PID, pid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        });

    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllProductsActivity.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
             Log.d("All Products: ", json.toString()); 

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS); 

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        productsList.add(map);
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AllProductsActivity.this, productsList,
                            R.layout.list_item, new String[] { TAG_PID,
                                    TAG_NAME},
                            new int[] { R.id.pid, R.id.name });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-26T23:33:31.970

首先，将您的方法包装在

```
try{
} catch(Throwable t) { Log.e("MyActivity", t.getMessage(), t); } 
```

你应该得到一个更容易阅读的堆栈跟踪。

要使此代码正常工作，您需要在 Web 服务器上安装“include/get_all_products.php”。然后您需要使用您的服务器的 IP 地址更新 url_all_products 中定义的 URL。你做过吗？

内部 JSON 解析器可用于少量数据。对于更多数据，像 GSON 这样的东西可以让你保持理智。

# php - 有没有办法让 get_post_meta() 函数在这个类中工作？

> ID：14542635
> 
> 赞同：0
> 
> 时间：2013-01-26T23:25:38.993
> 
> 标签：php, wordpress, class, function

我正在尝试在 PHP 中创建一个需要使用 Wordpress 中的函数的类，但该函数在类中不起作用。有没有办法让它工作？谢谢！

```
class MetaData
{   
    private $key;

    public function __construct($key){
        $this->key = get_post_meta($post->ID, $key, TRUE); 
    }
    public function getData(){
        print $this->key;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:26:42.160

`$post`是一个全局变量，因此您必须明确声明：

```
public function __construct ($key) {
    global $post;
    $this->key = get_post_meta($post->ID, $key, TRUE); 
} 
```

# matlab - 用“NaN”替换向量的有条件给定部分？

> ID：14542639
> 
> 赞同：1
> 
> 时间：2013-01-26T23:25:56.557
> 
> 标签：matlab

我想用`A`大于`0.5`的部分替换我的向量`NaN`。这个向量的一部分是在某个时间范围内定义的`x = ( t>=2 & t<5 )`。`t`并且`A`具有相同的长度。

到目前为止，我想出了这个：

```
A = [0.1 0.4 0.3 1 0.6 3 0.3 0.4 0.6 0.8 0.4 0.8 0.9 0.2 1];
t = [1 1 1 1 1 1 1 2 2 2 3 3 3 4 5];
x = (t >= 2 & t < 5);

if A(x) > 0.5
    A = nan;
end 
```

然而它不起作用！我尝试了各种事情，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:15:12.180

让我们一步一步来。

* * *

# 第一步——构造条件

如果你这样做：

```
A > 0.5 
```

您将在大于的元素位置上获得长度为`A`with的向量，即：`1``A``0.5`

```
Columns 1 through 14

0     0     0     1     1     1     0     0     1     1     0     1     1     0

Column 15

1 
```

如果你这样做：

```
t >= 2 & t < 5 
```

你会得到与上面类似的向量（相同的长度），但这次`1`在某个位置上将表示向量`t`中的特定元素在区间**[ 2, 5 >**中。矢量看起来像这样：

```
Columns 1 through 14

0     0     0     0     0     0     0     1     1     1     1     1     1     1

Column 15

0 
```

您可以通过要求满足两个条件来组合这两个向量：

```
(A > 0.5) & (t >= 2) & (t < 5) 
```

你得到向量：

```
Columns 1 through 14

0     0     0     0     0     0     0     0     1     1     0     1     1     0

Column 15

0 
```

请注意，一个在前两个向量中*都有*一个的位置上！

* * *

# 第二步——从向量中提取元素

如果你这样做：

```
A( logical([1 0 0 0 0 0 0 0 0 0 0 0 0 0 0]) ) 
```

你会注意到只有第一个元素是从 vector 中提取的`A`，你会得到：

```
0.1000 
```

您将提取前两个元素：

```
A( logical([1 1 0 0 0 0 0 0 0 0 0 0 0 0 0]) ) 
```

等等。

如果您希望更改 vector 中某个元素的值`A`，例如将第一个和最后一个元素设置为 value `3`，您可以使用以下方法：

```
A( logical([1 0 0 0 0 0 0 0 0 0 0 0 0 0 1]) ) = 3; 
```

* * *

# 总结（或 TLDR）

从 中提取所需元素`A`并为其分配值`NaN`：

```
A( (A > 0.5) & (t >= 2) & (t < 5) ) = NaN; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:34:50.440

鉴于：

```
A=[0.1 0.4 0.3 1 0.6 3 0.3 0.4 0.6 0.8 0.4 0.8 0.9 0.2 1];
t = [1 1 1 1 1 1 1 2 2 2 3 3 3 4 5];
x=(t>=2 & t<5); 
```

您可以简单地执行以下操作：

```
A (A > 0.5) = NaN; 
```

在 GNU Octave 中，我最终得到以下输出：

```
octave:6> disp(A)
0.10000   0.40000   0.30000   1.00000   0.60000   3.00000   0.30000   0.40000   0.60000   0.80000   0.40000   0.80000   0.90000   0.20000   1.00000 
```

# iphone - 使用 ARC 转换为 CFStringRef 会导致 iphone 应用程序崩溃

> ID：14542642
> 
> 赞同：-1
> 
> 时间：2013-01-26T23:27:09.327
> 
> 标签：iphone, objective-c, xcode, sockets

我正在关注一个[简​​单的套接字教程](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)，该教程是在没有考虑 ARC 的情况下编写的。我将教程中的想法注入到我的应用程序中，这一切都是在启用 ARC 的情况下编写的。

我遇到了这个特定代码行的问题：

```
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)self.SERVER, self.PORT, &readStream, &writeStream); 
```

在 ARC 下无法编译，所以我尝试了两种“修复它”，其中之一是：

```
CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)self.SERVER, self.PORT, &readStream, &writeStream); 
```

但是这条线给我带来了一些问题。我的应用程序因内部调用“objc_msgsend”而崩溃，给我一个 exc_bad_access 错误。

关于如何为 ARC 修复这条线的任何想法？

**编辑：我的调试技能在发布之前失败了。问题的原因不是上述原因，而是我的代码中的其他原因。我认为这与处理传入流有关。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:35:32.387

这行代码很好——你的方法的名称不是：`SERVER`应该是`server`，`PORT`同样如此。你绝对应该采用 Objective-C 编码风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:45:57.013

正如尼古拉正确指出的那样，除了方法和属性的命名约定之外，我怀疑您没有保留您的流。

应该将`strong`它们声明为属性，您能否显示其余代码？

# c# - VS 2010 类图 - 可以删除按字母顺序排序吗？

> ID：14542643
> 
> 赞同：12
> 
> 时间：2013-01-26T23:27:10.497
> 
> 标签：c#, visual-studio-2010, sorting, class-diagram

Visual Studio 2010 中的类图是一个很棒的功能，但是当它“按种类”排序时，它也会按字母顺序对字段和方法进行排序。我知道它们可以按种类、组或字母顺序排序，但我希望知道是否有一种方法可以按照它们在 .java 文件中写入的顺序显示类组件。

我查看了[MSDN How to Customize the Class Class Diagrams: Class Designer](http://msdn.microsoft.com/en-us/library/8tkebx17%28v=vs.100%29.aspx)但除了可用的菜单按钮之外，没有找到有关如何自定义显示的太多信息。

如果这是一个失败的原因，请随时建议另一种方法或类图插件或应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T00:03:57.357

在搜索了这个问题的答案之后，似乎没有人找到一种方法来阻止图表按字母顺序对元素进行排序。

# objectify - Objectify 4 用 Ref 保存实体

> ID：14542644
> 
> 赞同：0
> 
> 时间：2013-01-26T23:27:15.977
> 
> 标签：objectify

我稍微修改了当前文档中的示例。在保存和具有从未保存的实体创建的参考的实体时，参考是否也被保存？在我的情况下，司机有@Parent - 一辆车。

```
@Entity
class Car {
    @Id Long id;
    @Load Ref<Person> driver;    // Person is an @Entity
}

Car car = new Car();
car.driver = Ref.create(driver);
ofy().save().entity(car).now(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:16:02.810

不，保存操作不会级联。并且加载操作仅在存在显式 @Load 注释时级联。

如果您也想保存驱动程序，请明确执行。

# ruby-on-rails - Rails 多个数据库

> ID：14542648
> 
> 赞同：0
> 
> 时间：2013-01-26T23:27:52.580
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我有一个 Rails 应用程序（出于某种原因）需要连接到多个数据库。我知道我可以使用 ActiveRecord::Base.establish_connection 但问题是数据库名称可能是具有相同前缀的许多名称之一。即 db_001、db_002 等。“001”、“002”数字将从控制器传递给模型，并且基于当前的应用程序流程。

问题：是否可以像这样将数据库名称作为参数传递给建立连接？

```
class Some < ActiveRecord::Base
 establish_connection ({
    :adapter  => "mysql2",
    :username => "name",
    :password => "pass"
    :database => "db_#{THE_PASSED_VALUE}"
 })
end 
```

这些特定的数据库（db_001、db_002、...）将仅由这一模型使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:41:34.333

在 rails 2.3.x 中有

来自 ActiveRecord::Base 的 database_name。

这看起来类似于[如何在 Ruby on Rails 中动态更改所有模型的 Active Record 数据库？](https://stackoverflow.com/questions/180349/how-can-i-dynamically-change-the-active-record-database-for-all-models-in-ruby-o)

# bash - 用于在我的 LAN 中安装 PC 的 Bash 脚本

> ID：14542649
> 
> 赞同：0
> 
> 时间：2013-01-26T23:27:53.630
> 
> 标签：bash, networking, ssh, mount

我刚刚通过更新我的挂载脚本提高了我的 Bash 技能，我想与世界分享它。如果您有任何想法，请在此处发布。

这是我的脚本：

```
#!/bin/bash

SDIR="/"
DIR="/home/MyUsername/fusessh/MyNetworkPC"
FMGR='thunar'
USER='MyUsername'
PASS='MyPassword'
IP[0]='192.168.0.100'
IP[1]='192.168.0.101'
IP[2]='192.168.0.102'
IP[3]='192.168.0.103'
PORT='-p 22'

if [ "$(ls -A $DIR)" ]; then
  echo "$DIR is not Empty. And so it will be unmounted..."
  fusermount -u $DIR
else
  CURRENTIP=0
  CONNECTED="False"
  while [ "$CONNECTED" = "False" ] && [ $CURRENTIP -lt ${#IP[@]} ] ; do
    if echo $PASS | sshfs $PORT -o ServerAliveInterval=15 -o password_stdin $USER@${IP[$CURRENTIP]}:$SDIR $DIR > /dev/null; then
      echo "Mounted ${IP[$CURRENTIP]}:$SDIR to $DIR"
      CONNECTED="True"
      $FMGR $DIR &
    else
      echo "Could not mount ${IP[$CURRENTIP]}:$SDIR to  $DIR" 
      let CURRENTIP+=1
    fi 
  done
fi

exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:06:34.863

这是一个有用且方便的脚本！这是一个稍作修改的版本，并附有一些关于您可能选择合并的更改的注释：

```
#!/bin/bash

sdir="/"
dir="/home/MyUsername/fusessh/MyNetworkPC"
fmgr='thunar'
#USER is also a builtin variable,
#lowercase avoids overriding/confusing these
user='MyUsername'
pass='MyPassword'
ips[0]='192.168.0.100'
ips[1]='192.168.0.101'
ips[2]='192.168.0.102'
ips[3]='192.168.0.103'
port='-p 22'

# Instead of toggling, let the user decide when to mount/umount
# This makes behavior more predictable
if [ "$1" == "-u" ]; then
  # Quoting $dir ensures filenames with spaces still work
  fusermount -u "$dir"
else
  mounted=0
  # We can loop over IPs without keeping a counter
  for ip in "${ips[@]}"
  do
    # echo has some issues when e.g. $PASS is '-n'
    if printf "%s\n" "$PASS" | sshfs $PORT -o ServerAliveInterval=15 -o password_stdin "$user@$ip:$sdir" "$dir" > /dev/null; then
      echo "Mounted $ip:$sdir to $dir"
      $fmgr "$dir" &
      mounted=1
      break
    else
      echo "Could not mount $ip:$sdir to $dir"
      mounted=0
    fi
  done

  if ! (( mounted ))
  then
      echo "Couldn't mount. Sorry!"
      exit 1 # Exit with failure if we can't mount any dir
  fi
fi

# With no explicit 'exit 0' here, the default
# return value is that of the last executed command.
# If fusermount -u fails, the script will now signal this 
```

# php - PHP，来自 shell_exec 的标准输出

> ID：14542653
> 
> 赞同：0
> 
> 时间：2013-01-26T23:28:25.703
> 
> 标签：php, bash, webserver

我正在开发一个需要远程调用另一台服务器的脚本。我通过执行调用我的脚本：

```
(host server) shell_exec("php /dir/script/script.php > /dev/null 2>/dev/null &"); 
```

依次执行

```
(host server) ssh2_exec($con, "php /remote/server/dir/script.php"); 
```

我的脚本“script.php”使用标准输出缓冲区来返回其值（当它执行 shell 命令时），然后它捕获标准输出，将其读回，然后对数据执行一些工作。

我的问题是，当我在远程服务器上本地运行 script.php 时，它可以工作，因为它可以捕获标准输出，但是远程运行脚本失败，因为没有记录输出。

如何在远程服务器上捕获远程脚本的输出，以允许我的 script.php 执行。

谢谢您的帮助！

编辑：

我执行 ssh2_exec 的代码如下：

```
$stream = ssh2_exec($con, "php /remote/server/dir/script.php" );
stream_set_blocking($stream, true);
$stream_out = ssh2_fetch_stream($stream, SSH2_STREAM_STDIO);
echo stream_get_contents($stream_out); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:36:16.833

没有看到代码，这似乎很抽象。但似乎这两个脚本实际上都没有返回一个值。所以你使用你的片段我可以推荐这个：

**服务器1：**

```
<?php
    shell_exec("php /dir/script/script.php > /dev/null 2>/dev/null &");
?> 
```

**服务器2：**

```
<?php
    return shell_exec("php /dir/script/script.php");
?> 
```

请注意，第二个脚本返回一个值 & 我也`> /dev/null 2>/dev/null &`从第二个脚本中删除了它，因为所做的只是阻止正在进行的内联命令的输出。

希望这可以帮助。如果不是，请用不那么抽象——更具体——的例子来说明你在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:48:32.797

用于`stream_get_contents()`获取命令输出的内容。

如果您尝试进行一些大型处理，您可能想要使用消息队列（amqp、rabbitmq）或类似 gearman 的东西。

# delphi - 我可以检查是否已调用 CoInitialize 吗？

> ID：14542655
> 
> 赞同：17
> 
> 时间：2013-01-26T23:28:38.723
> 
> 标签：delphi, activex, delphi-xe2, ado

在具有 ADO 数据库连接的多线程环境中，我想知道是否调用了 CoInitialize。我将如何检查这个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T23:55:49.820

通常你不应该做这个检查而只是跟注`CoInitialize`/`CoUnInitialize`配对。你仍然可以这样做：

```
function IsCoInitialized: Boolean;
var
  HR: HResult;

begin
  HR:= CoInitialize(nil);
  Result:= (HR and $80000000 = 0) and (HR <> S_OK);
  if (HR and $80000000 = 0) then CoUnInitialize;
end; 
```

* * *

`CoInitialize`如果你在一个线程中多次调用没有问题。第一次调用应该返回`S_OK`，所有后续调用都应该返回`S_FALSE`。所有这些调用都被认为是成功的，应该通过`CoUnInitialize`调用配对。如果您`CoInitialize`在一个线程中调用了 n 次，则只有最后的第 n 次`CoUnInitialize`调用会关闭 COM。

# c# - 有没有办法在 Qt/C++ 项目中使用 C# 库？

> ID：14542659
> 
> 赞同：1
> 
> 时间：2013-01-26T23:29:00.883
> 
> 标签：c#, c++, qt

我正在尝试在 Qt/C++ 项目中使用[OpenHardwareMonitor库。](http://code.google.com/p/open-hardware-monitor/)这可能吗？我已经成功地使用这个库来获取 C# 中的 CPU 温度。

# javascript - 将聊天嵌入到 html 网站

> ID：14542661
> 
> 赞同：-1
> 
> 时间：2013-01-26T23:29:03.530
> 
> 标签：javascript, html, chat, skype

我最近阅读了一些关于将诸如Skype聊天之类的聊天嵌入网站的帖子，但其中大多数都已过时。那么您对将聊天嵌入网站的快速方法（如果可能的话）有什么想法吗？有没有办法嵌入已知的聊天引擎？像Skype，ebuddy，digsby，yahoo chat..等。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:10:10.350

请查看 Mibbit Web IRC 聊天[http://mibbit.com/](http://mibbit.com/)。它可以在您的网站中嵌入很多 IRC 网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:35:46.907

1.  用php获取mysql数据库和webserver
2.  在服务器端编写一个脚本，它可以做两件事：

a：将用户输入保存到数据库 b：回显自上次拉取用户以来的所有更改

然后，您只需要创建一个客户端（在本例中为网站），其表单使用 AJAX 将新消息推送到服务器，并使用计时器来拉取新消息。

为此，您只需要学习 Javascript 和 PHP。

（Java 插件也可以工作，但最近出现了一些安全漏洞 *g*）

如果你懒得学习编码，只使用 Joomla 或 Webspell 之类的东西，他们应该有可以下载的聊天插件。

# python-2.7 - Python：urllib2.urlopen retrns 类型的字符串

> ID：14542662
> 
> 赞同：0
> 
> 时间：2013-01-26T23:29:21.133
> 
> 标签：python-2.7, urllib2

我试图通过先发出请求然后使用 urlopen 函数来获取 URL 内容，但是当我尝试关闭流时它给了我类型错误。经过调查，我发现它正在返回字符串类型。下面是我的代码：

```
 req = urllib2.Request(url, '', HEADERS)
 html = urllib2.urlopen(req).read()
 print(type(html)) #retrns str 
```

我想关闭 urllib 流。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:48:07.233

你没有关闭流。您正在关闭由返回的字符串`.read()`，并且关闭字符串没有意义。

在调用它之前尝试将结果存储在`urlopen(...)`某个地方（可能在一个名为流的变量中）`.read()`，以便`.close()`在完成后也可以使用它。

# mysql - 从另一个带有内部的表中计数

> ID：14542663
> 
> 赞同：0
> 
> 时间：2013-01-26T23:29:31.780
> 
> 标签：mysql

我想在 MySQL 的另一个表中获取出现的次数。

我当前的查询如下所示：

```
SELECT
teilnehmer.`name`,
teilnehmer.`status`
FROM
teilnehmer
INNER JOIN chat ON chat.cid = teilnehmer.id
INNER JOIN videos ON videos.tid = teilnehmer.id
GROUP BY
chat.id,
videos.tid 
```

我现在想要chat.cid 中teilnehmer.id 的数量和videos.tid 中teilehmer.id 的数量

我怎样才能做到这一点？

![在此处输入图像描述](../Images/8d8bb3d525873035b5939467251d1efe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:14:55.993

Seems like you want this:

```
SELECT teilnehmer.`name`,
  teilnehmer.`status`,
  c.ChatCount,
  v.VideoCount
FROM teilnehmer
INNER JOIN
(
  select count(cid) ChatCount, cid
  from chat 
  group by cid
) c
  ON c.cid = teilnehmer.id
INNER JOIN
(
  select count(tid) VideoCount, tid
  from videos 
  group by tid
) v
  ON v.tid = teilnehmer.id 
```

# python - 如何使用 macports 在 mac osx 10.8.2 上安装 opencv

> ID：14542664
> 
> 赞同：0
> 
> 时间：2013-01-26T23:29:48.760
> 
> 标签：python, macos, opencv, macports

我按照此页面上的所有说明进行操作：http: [//blog.cingusoft.org/howto-install-opencv-on-mac-os-x-lion](http://blog.cingusoft.org/howto-install-opencv-on-mac-os-x-lion)

我什至再次安装了 numpy，但我仍然收到此错误。请帮忙！

```
import cv
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named cv
import cv2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:19:05.633

[http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)上的 Macports 说明为我安装了 2.4.1（在雪豹中）。

# html - 如何在 HTML5/Javascript 中随机调用 mp3 文件列表？

> ID：14542667
> 
> 赞同：0
> 
> 时间：2013-01-26T23:30:09.473
> 
> 标签：html, random

我不是一个真正的编码员，所以请稍微详细一点。我想知道是否有任何方法可以随机调用文件夹中的一堆 mp3 文件。（或根据这些文件的标记方式调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:46:15.577

我将使用与此类似的代码 -[使用 html5 文件系统 api 获取本地 mp3 文件的元数据](https://stackoverflow.com/questions/14425007/get-metadata-of-local-mp3-file-using-html5-filesystem-api/14448532)- 将目录中的所有文件选择到一个数组中，然后使用 Math.random 从数组中选择条目

# postgresql - postgresql plpgsql 编译器：为什么在没有歧义的地方发现歧义

> ID：14542671
> 
> 赞同：0
> 
> 时间：2013-01-26T23:30:22.767
> 
> 标签：postgresql, runtime-error, plpgsql, ambiguity

为什么会出现这个运行时错误？

错误：列引用“到达”不明确第 6 行：case when ((cast('05:00' as time) >=arrive)
详细信息： **它可以引用 PL/pgSQL 变量或表列。**

问题是，case 语句在查询中，我正在从一个表中进行选择，该表确实有一个名为“arrive”的列。我还*没有*声明一个名为到达的变量。为什么 PG 不能简单地检查一下是否没有声明这样的变量，并得出结论必须是对列的引用？

我附上了下面的代码。我看到的唯一表面上的冲突是这个函数返回的传出表的定义，其中有一个名为“到达”的列，以及在最终选择中针对临时表 TT 使用列名。

```
CREATE or replace function GetHourlyView
(v_whichDate date)
returns TABLE
(
stagecoach,
arrive time,
depart time,
t5am int,t6am int,t7am int,t8am int,t9am int,t10am int, t11am int,
t12pm int, t1pm int, t2pm int t3pm int,t4pm int,t5pm int,t6pm int, 
t7pm int, t8pm int, t9pm int, t10pm int, t11pm int
)
as $body$
declare v_dow int := date_part('dow',v_whichDate);
begin

drop table if exists TT;
create temp table TT
(stagecoach varchar(25),
arrive time,
depart time,
t5am int,t6am int,t7am int,t8am int,t9am int,t10am int, t11am int,
t12pm int, t1pm int, t2pm int t3pm int,t4pm int,t5pm int,t6pm int, 
t7pm int, t8pm int, t9pm int, t10pm int, t11pm int
) without OIDS on commit drop;

insert into TT 
select * from
GetDailySchedule( v_whichDate);

-- (arrive=depart) means 'cancelled'
delete from TT where TT.arrive=TT.depart;   

return QUERY
select 
TT.stagecoach, 
arrive, 
depart,
case when ( (cast('05:00' as time) >=  arrive) and  (cast('05:00' as time) <  depart )) then 1    else 0 end as t5am,
case when ( (cast('06:00' as time) >=  arrive) and  (cast('06:00' as time) <  depart )) then 1 else 0 end as t6am,

<snip>
.
.
.
case when ( (cast('23:00' as time) >=  arrive) and  (cast('23:00' as time) <  depart )) then 1    else 0 end as t11pm
from TT
;

drop table TT;
end
$body$
LANGUAGE 'plpgsql' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:59:09.300

这真的很简单：函数参数在函数体内随处可见（动态 SQL 除外）。对于*所有*参数都是如此：[`IN`、`OUT`、`INOUT`和`VARIADIC`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)`RETURNS TABLE`子句中使用的任何列名。
您还有其他几个小错误。

*   通过表限定列名避免冲突：`tt.arrive`而不是仅仅`arrive`.
*   `stagecoach`in缺少类型`RETURNS TABLE`。
*   最后不要单引号`plpgsql`。这是一个标识符。

我还建议调整你的语法风格。你生活在对面的世界。惯例是大写 SQL 关键字和小写标识符，而不是相反。请记住，PostgreSQL 会自动将不带引号的标识符转换为小写。

除了所有这些，您的函数可以在**很大程度上简化**为简单的 SQL 查询。我将它包装成一个 SQL 函数：

```
CREATE OR REPLACE FUNCTION gethourlyview(v_whichdate date)
  RETURNS TABLE (
    stagecoach text, arrive time, depart time
   , t5am  int, t6am  int, t7am int, t8am  int, t9am  int, t10am int, t11am int
   , t12pm int, t1pm  int, t2pm int, t3pm  int, t4pm  int, t5pm  int, t6pm  int
   , t7pm  int, t8pm  int, t9pm int, t10pm int, t11pm int
   ) AS
$body$
   SELECT tt.stagecoach
         ,tt.arrive -- "depart" would cause conflict
         ,tt.depart
         ,CASE WHEN '05:00'::time >= tt.arrive
                AND '05:00'::time <  tt.depart THEN 1 ELSE 0 END -- AS t5am
         ,...
         ,CASE WHEN '23:00'::time >= tt.arrive
                AND '23:00'::time <  tt.depart THEN 1 ELSE 0 END -- AS t11pm
   FROM   getdailyschedule($1) tt
   WHERE  tt.arrive IS DISTINCT FROM tt.depart;
$body$ LANGUAGE sql; 
```

无需创建临时表。您可以在一个语句中完成所有操作。

# sql - 关系代数只适用于任何地方

> ID：14542674
> 
> 赞同：-3
> 
> 时间：2013-01-26T23:31:14.037
> 
> 标签：sql, relational-algebra

这是一个简单的数据库

```
/* Delete the tables if they already exist */
drop table if exists Person;
drop table if exists Frequents;
drop table if exists Eats;
drop table if exists Serves;

/* Create the schema for our tables */
create table Person(name text, age int, gender text);
create table Frequents(name text, pizzeria text);
create table Eats(name text, pizza text);
create table Serves(pizzeria text, pizza text, price decimal);

/* Populate the tables with our data */
insert into Person values('Amy', 16, 'female');
insert into Person values('Ben', 21, 'male');
insert into Person values('Cal', 33, 'male');
insert into Person values('Dan', 13, 'male');
insert into Person values('Eli', 45, 'male');
insert into Person values('Fay', 21, 'female');
insert into Person values('Gus', 24, 'male');
insert into Person values('Hil', 30, 'female');
insert into Person values('Ian', 18, 'male');

insert into Frequents values('Amy', 'Pizza Hut');
insert into Frequents values('Ben', 'Pizza Hut');
insert into Frequents values('Ben', 'Chicago Pizza');
insert into Frequents values('Cal', 'Straw Hat');
insert into Frequents values('Cal', 'New York Pizza');
insert into Frequents values('Dan', 'Straw Hat');
insert into Frequents values('Dan', 'New York Pizza');
insert into Frequents values('Eli', 'Straw Hat');
insert into Frequents values('Eli', 'Chicago Pizza');
insert into Frequents values('Fay', 'Dominos');
insert into Frequents values('Fay', 'Little Caesars');
insert into Frequents values('Gus', 'Chicago Pizza');
insert into Frequents values('Gus', 'Pizza Hut');
insert into Frequents values('Hil', 'Dominos');
insert into Frequents values('Hil', 'Straw Hat');
insert into Frequents values('Hil', 'Pizza Hut');
insert into Frequents values('Ian', 'New York Pizza');
insert into Frequents values('Ian', 'Straw Hat');
insert into Frequents values('Ian', 'Dominos');

insert into Eats values('Amy', 'pepperoni');
insert into Eats values('Amy', 'mushroom');
insert into Eats values('Ben', 'pepperoni');
insert into Eats values('Ben', 'cheese');
insert into Eats values('Cal', 'supreme');
insert into Eats values('Dan', 'pepperoni');
insert into Eats values('Dan', 'cheese');
insert into Eats values('Dan', 'sausage');
insert into Eats values('Dan', 'supreme');
insert into Eats values('Dan', 'mushroom');
insert into Eats values('Eli', 'supreme');
insert into Eats values('Eli', 'cheese');
insert into Eats values('Fay', 'mushroom');
insert into Eats values('Gus', 'mushroom');
insert into Eats values('Gus', 'supreme');
insert into Eats values('Gus', 'cheese');
insert into Eats values('Hil', 'supreme');
insert into Eats values('Hil', 'cheese');
insert into Eats values('Ian', 'supreme');
insert into Eats values('Ian', 'pepperoni');

insert into Serves values('Pizza Hut', 'pepperoni', 12);
insert into Serves values('Pizza Hut', 'sausage', 12);
insert into Serves values('Pizza Hut', 'cheese', 9);
insert into Serves values('Pizza Hut', 'supreme', 12);
insert into Serves values('Little Caesars', 'pepperoni', 9.75);
insert into Serves values('Little Caesars', 'sausage', 9.5);
insert into Serves values('Little Caesars', 'cheese', 7);
insert into Serves values('Little Caesars', 'mushroom', 9.25);
insert into Serves values('Dominos', 'cheese', 9.75);
insert into Serves values('Dominos', 'mushroom', 11);
insert into Serves values('Straw Hat', 'pepperoni', 8);
insert into Serves values('Straw Hat', 'cheese', 9.25);
insert into Serves values('Straw Hat', 'sausage', 9.75);
insert into Serves values('New York Pizza', 'pepperoni', 8);
insert into Serves values('New York Pizza', 'cheese', 7);
insert into Serves values('New York Pizza', 'supreme', 8.5);
insert into Serves values('Chicago Pizza', 'cheese', 7.75);
insert into Serves values('Chicago Pizza', 'supreme', 8.5); 
```

问题是“找出所有只有 24 岁以下的人才能吃的比萨饼，或者在任何地方都花费不到 10 美元的比萨饼”。问题就在这里：

```
\project_{pizza} ( Eats \join \select_{age < 24 } Person) 
```

我这样写，但缺少一件事。它只说24岁以下的人。同样，第二个“无处不在”的问题仍然存在。我该如何限制呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:22:35.237

试试这个

```
SELECT pizza AS oldest_age
FROM Person
JOIN Eats ON Eats.name = Person.name
GROUP BY pizza
HAVING MAX( age ) <24

UNION ALL

SELECT pizza AS highest_price
FROM Serves
GROUP BY pizza
HAVING MAX( price ) <10; 
```

# jquery - 没有覆盖的 JQuery 模态对话框

> ID：14542678
> 
> 赞同：8
> 
> 时间：2013-01-26T23:31:45.947
> 
> 标签：jquery, jquery-ui, overlay

我试图显示一个阻止界面（模式）但没有覆盖的“ajax 加载器对话框”。

这就是我初始化对话框的方式：

```
 $("<div></div>").dialog({
         modal: true,
         dialogClass: "noOverlayDialog",
         autoOpen: false, //opened later
         ...
  }); 
```

我添加了以下 CSS 来隐藏叠加层：

```
.ui-dialog.noOverlayDialog + .ui-widget-overlay { opacity: 0 !important; } 
```

但是，当我调用`dialog("open")`覆盖闪烁然后消失时，就好像我使用 Javascript 隐藏了它一样。使用`display:none;`or的效果相同`visibility:hidden`。

为了确保是 css 删除了覆盖而不是其他东西，我删除了 css 行，并且可以肯定覆盖现在总是可见的。

为什么会这样？我认为静态 CSS 不应该有这种行为，并且覆盖层应该立即隐藏而无需闪烁。

如果我找不到直观的解决方案，也许另一种方法是将 modal 选项设置为 false 以防止叠加在一起，然后编写代码来获取模态行为。无论哪种方式，我都需要一个可行的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:18:14.990

我让它在 jsFiddle 上工作。 [试试这个链接](http://jsfiddle.net/hb8yA/)

```
<div id="dialog">
    <h3>Here is the dialog content</h3>
    <p id="dialogContent"></p>
</div>
<button onclick="$('#dialog').dialog('open');">open</button>

<script>
    $(document).ready(function(){
        $('#dialog').dialog({
            title: 'My dialog',
            dialogClass: "noOverlayDialog",
            autoOpen:false,
            modal: true,
            open: function(event,ui){
                $('.noOverlayDialog').next('div').css( {'opacity':0.0} );
            }
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T16:33:40.757

jQuery 使用的覆盖具有 class `ui-widget-overlay`。所以在你的css中包含下面的css规则，

```
.ui-widget-overlay {
    opacity: 0;
    filter: alpha(opacity=0);  /* IE8 and lower */
} 
```

**演示：http:** [//jsfiddle.net/Lhwsq/](http://jsfiddle.net/Lhwsq/)

**笔记：**

1.  确保在 jQuery css 或任何其他插件 css 之后包含此规则。
2.  此样式将应用于同一页面中的任何对话框。

要使其在任何特定对话框上工作，请参阅[https://stackoverflow.com/a/14586175/297641](https://stackoverflow.com/a/14586175/297641)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T23:18:56.563

一种选择是创建一个附加类，并在[打开](http://api.jqueryui.com/dialog/#event-open)`overlay-hidden`对话框时将其添加到覆盖层中，在[关闭](http://api.jqueryui.com/dialog/#event-beforeClose)时再次将其删除。这将确保页面中的其他对话框（可能需要可见的覆盖）继续正常工作：

```
open: function(event,ui){
    $('.ui-widget-overlay').addClass('overlay-hidden');
},
beforeClose: function(event,ui){
    $('.ui-widget-overlay').removeClass('overlay-hidden');
} 
```

正如@Vega所[建议](https://stackoverflow.com/a/14587592/520779)的那样，该类`overlay-hidden`将覆盖`opacity`to ：`0`

```
.overlay-hidden {
    opacity: 0.0;
    filter: alpha(opacity=0);  /* IE8 and lower */
} 
```

[jsFiddle 的工作示例](http://jsfiddle.net/hb8yA/5/)（改编自 @ShadeTreeDeveloper 的[回答](https://stackoverflow.com/a/14586175/520779)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T14:52:53.917

我有一种感觉，您看到的是在透明效果（顺便说一句，并非所有浏览器都支持）能够启动之前短暂渲染的叠加背景图像。

```
.ui-widget-overlay { background: none !important; } 
```

以上应该工作。但是，正如上面的评论已经说明的那样，在您的服务器上发布一个示例，或者 JSFiddle 将允许进行更具体的诊断。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T01:48:54.220

下面的答案都不适合我，但我最终找到了解决方案。

事实证明，对话框最初是在一个容器内渲染的，该容器调用的是容器`.ui-effects-wrapper`后面的覆盖而不是对话框：

```
<div class="ui-effects-wrapper" ... >
     <div class="ui-dialog" .... >
     </div>
</div>
<div class="ui-widget-overlay" ...> </div> 
```

因此，我的选择器`.ui-dialog.noOverlayDialog + .ui-widget-overlay`只有在效果容器被移除后才会生效。为了解决我需要针对两个选择器的问题：

```
.ui-dialog.noOverlayDialog + .ui-widget-overlay, 
.ui-effects-wrapper + .ui-widget-overlay {
      background: none !important;
      opacity: 0 !important;
} 
```

注意，第二个选择器是全局的。

# wpf - 如果项目被选中，则更改 ListBoxItem 中的 DataTemplate 样式

> ID：14542682
> 
> 赞同：2
> 
> 时间：2013-01-26T23:32:10.637
> 
> 标签：wpf, xaml, triggers, listbox, styles

我在 ItemTemplate 中有一个带有扩展器的列表框。我设法将扩展器的 IsExpanded 属性绑定到 ListBoxItem 的 IsSelected 属性确定。现在我想将样式应用于 ListBoxItem 的内容，该内容也绑定到 IsSelected 属性。

```
 <ListBox.ItemTemplate>
        <DataTemplate>
            <Border Name="myBorder">
                    <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding Description}" />
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Date:"/>
                        <TextBlock Text="{Binding Date}"/>
                    </StackPanel>
                    <dx:DXExpander Name="expanderDetails" 
                              IsExpanded="{Binding Mode=TwoWay, Path=IsSelected,
                              RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Count:"/>
                            <TextBlock Text="{Binding Count}"/>
                        </StackPanel>
                    </dx:DXExpander>
                </StackPanel>
            </Border>
        </DataTemplate>
    </ListBox.ItemTemplate> 
```

我想要做的是以某种方式将“myBorder”边框的样式设置为“NotSelectedBorderStyle”以用于未选择的ListBoxItems，并将“SelectedBorderStyle”用于SelectedItem（具有单选的ListBox）。

仅供参考，样式定义了背景，边框和那种东西，只是为了明确选择了哪个项目，这些样式没有什么花哨的。

我在这里尝试了[接受的答案，](https://stackoverflow.com/questions/146269/change-wpf-datatemplate-for-listbox-item-if-selected)但如果我完全切换样式，我会失去我的 DXExpander 拥有的漂亮的扩展动画。

我想一定有一些使用触发器的解决方案，但我不能只打对了位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:17:47.420

终于我明白了，我把它贴在这里，希望这能节省别人的时间和痛苦:-P

这段代码做了一些额外的事情：EventSetter 和相应的 Handler 方法用于捕获对 DataTemplate 内元素的点击，以便选择包含该元素的 ListBoxItem（如果不这样做，您可以在项目内键入文本，而选择了不同的）。

内部边框（“myBorder”）只是堆栈面板的容器，我必须将所有内容包装在另一个边框（“backgroundBorder”）内，当 ListBoxItem 被选中时，样式会发生变化。

```
 <Style x:Key="FocusedContainer" TargetType="{x:Type ListBoxItem}">
        <Setter Property="Background" Value="LightGray"/>
        <EventSetter Event="GotKeyboardFocus" Handler="OnListBoxItemContainerFocused" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border x:Name="backgroundBorder" Width="Auto" Style="{StaticResource NotSelectedBorderStyle}">
                        <ContentPresenter Content="{TemplateBinding Content}">
                            <ContentPresenter.ContentTemplate>
                                <DataTemplate>
                                    <Border Name="myBorder">
                                         <StackPanel Orientation="Vertical">
                                               <TextBlock Text="{Binding Description}" />
                                         <StackPanel Orientation="Horizontal">
                                               <TextBlock Text="Date:"/>
                                               <TextBlock Text="{Binding Date}"/>
                                         </StackPanel>
                                         <dx:DXExpander Name="expanderDetails" 
                                             IsExpanded="{Binding Mode=TwoWay, Path=IsSelected,
                                             RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}}">
                                                <StackPanel Orientation="Horizontal">
                                                     <TextBlock Text="Count:"/>
                                                     <TextBlock Text="{Binding Count}"/>
                                                </StackPanel>
                                         </dx:DXExpander>
                                       </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ContentPresenter.ContentTemplate>
                        </ContentPresenter>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="backgroundBorder" Property="Style" Value="{StaticResource SelectedBorderStyle}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

然后我将 ListBox 中的 ItemContainerStyle 设置为上述样式：

```
<ListBox Background="#7FFFFFFF" HorizontalContentAlignment="Stretch" 
         ItemsSource="{Binding}" IsSynchronizedWithCurrentItem="True"
         ItemContainerStyle="{StaticResource FocusedContainer}"/> 
```

最后，GotKeyBoardFocus 处理程序背后的代码：

```
 private void OnListBoxItemContainerFocused(object sender, RoutedEventArgs e)
    {
        (sender as ListBoxItem).IsSelected = true;
    } 
```

代码乱七八糟，但 UI 很整洁。希望这对某人有帮助！

# jquery - 一遍又一遍地调用 document.ready 函数

> ID：14542684
> 
> 赞同：1
> 
> 时间：2013-01-26T23:32:23.790
> 
> 标签：jquery, ajax, login

我有一个没有页面更改的 html 网站。它只是使用 ajax 调用将不同的元素加载到页面上的每个位置。我需要在第一次加载页面后运行登录功能（因为它需要索引上的元素存在），但是当我使用 $(document).ready(login) 时，它会在每次加载元素时触发（因为它将元素加载到页面上，它陷入了无限循环）。除了将它放在我的索引页面的底部（这看起来很脆弱）之外，有没有办法让它在索引页面完成加载后加载，但不是每次 ajax 请求向页面添加内容时都运行它？

我的登录功能如下所示：

```
function login ()
{
    if($.cookie('employee'))
        employee = $.cookie('employee');

    if(employee && !employee.login)
        $("div.middle").load('login.html');
    else
            $("div.middle").load('main.html');

}

function logout ()
{
    //FIXME send a logout request to server to end session also
    employee = null;
    $.cookie('employee', null);
    $("div.middle").load('login.html'); 
} 
```

我最初的准备函数看起来像：//全局变量 var employee = new Object;

```
$(document).ready(function(){
        $("div.leftColumn").html(buildLeftNav());
        //set height of middle if height of leftColumn is less than height of middle
        if($("div.leftColumn").css('height') < $("div.middle").css('height'))
            $("div.center").css('height' , $('div.middle').css('height'));

        //handle login and logout
        $.cookie.json = true;
        login();

    }); 
```

我设置了一个小提琴来说明：http: [//jsfiddle.net/uZVP4/](http://jsfiddle.net/uZVP4/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T00:03:37.570

您的问题可能不在于`document.ready`您可能在 AJAX 调用中一遍又一遍地加载相同的脚本。由于脚本会自动加载新内容，因此它会创建一个无限循环的加载新内容，这会导致新内容再次加载……一遍又一遍。

如果您必须将脚本保存在远程页面中，您可以使用`$.get`它不会在 ajax 内容中执行脚本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T23:46:16.123

通常`$(document).ready()`每页只调用一次。

如果你想要一个“hacky”解决方案，你可以设置一个变量

`var wasReady = false;`

并将`$(document).ready()`该值设置为`true`if it is `false`，否则什么也不做。

```
$(document).ready(function(){
if(!wasReady)
 wasReady = true;
else return;
...
} 
```

我通常使用

```
$(function(){
 /* code here */
}); 
```

这与准备好文档相同，但如果您想在所有页面加载（包括图像）后执行 javascript，请使用

```
$(window).load(function(){ 
 /*code here */
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T19:10:48.220

使用“.one”为我们“解决”了这个问题

```
$(document).one("ready", function () {
   // code
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T23:46:45.713

你应该试着把它放在body标签的onload中，把它放在这里只在每次提交表单时运行。

```
....
<body onload="login()">
.... 
```

# c++ - 没有winrt的Metro风格gui c ++库？

> ID：14542687
> 
> 赞同：1
> 
> 时间：2013-01-26T23:32:47.617
> 
> 标签：c++, user-interface, microsoft-metro

是否有模拟 Metro 风格外观的跨平台 gui 库？
如果没有，我想知道你们是否可以为我提供一个可定制的跨平台 gui 库。
我尝试了 SFGUI，它很好，但仍在开发中并且非常有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:36:15.027

如果您不介意切换到另一种语言，我建议您使用允许此类自定义的 C# 和 WPF。

如果你想坚持使用 C++，试试 Embarcadero C++Builder 和他们的 Firemonkey API（它也是跨平台的）或者我最喜欢的诺基亚 Qt

我的另一个建议是使用 Webkit 控件并在 HTML/CSS/Javascript 中构建 Metro 风格 UI。

有很多方法可以实现您想要实现的目标。

# c# - WPF 应用程序中的业务逻辑放置

> ID：14542690
> 
> 赞同：1
> 
> 时间：2013-01-26T23:33:14.713
> 
> 标签：c#, wpf, ef-code-first, sql-server-ce, prism

这可能是一长串问题，但请多多包涵。我开始使用 WPF、PRISM、CODE FIRST 和 SQL CE 构建 LOB 应用程序，在我的第一个应用程序（或尝试）之后，我有很多问题，所以首先：

1.  业务逻辑应该放在哪里，在模型中还是在域层之上的 BLL 层中？
2.  视图模型应该接收对存储库的引用还是应该仅由域模型对象使用存储库？
3.  换句话说，第二个问题应该给视图模型什么样的对象？
4.  我在显示中使用相同的视图模型（例如在数据网格中）并在表单中进行编辑，但这会导致很多麻烦，有没有更好的方法可以在不重复代码的情况下做到这一点？
5.  我遇到的最大问题是我总是以层次关系组织我的视图模型，而不允许层次结构中的子级获取对其父级的引用，并且由于绑定到这些子级的视图和调用的方法导致将对象添加到我找不到一种方法来通知父母这些 repos 的更改。所以绑定视图可以更新，我看到有些人使用事件解决了这个问题，但我不喜欢这个解决方案，我想知道是否有更好的方法来做到这一点？
6.  谁能指出使用上述技术构建真实 LOB 应用程序的示例，至少不是使用 VB .NET 或 WCF 的示例（我想要本地数据库）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:28:33.840

我现在正在使用 WPF、Entity Framework Code First 和带有本地数据库的 SQL CE 4.0 开发 LOB 应用程序。我没有使用 PRISM，但我使用 MEF 作为 IoC 和我自己的实现。

1.  到目前为止，我建议您使用 Code-First 方法的好处并在您的域类中实现尽可能多的业务逻辑。还要在其中实施 INPC。如果不这样做，您最终会在 ViewModel 中复制所有属性，这是无稽之谈。没有规则说模型应该是愚蠢的（尽管有些人倾向于这样认为），但是愚蠢的模型只会让 ViewModel 使用起来更加乏味。
2.  在不了解您的项目的情况下，这里没有明确的建议，但有常识：尽量坚持最佳实践，除非它们开始妨碍您。“完美”往往是“好”的敌人。
3.  让 ViewModel 获得他们需要的任何东西（单个模型对象、集合等）来为您的视图提供服务。从长远来看，通常更简单的解决方案更容易维护。
4.  我不太明白你的意思......如果可能的话，我会多次使用我的 ViewModel，但是如果你在尝试让一个 VM 为多个 View 工作时遇到问题，我认为 ViewModel 的功能是提供一个 View ，很可能你需要把它分成两个不同的VM。只需在一个基类中收集所有常见的属性和方法，并根据需要从它继承。
5.  虚拟机之间有一些松散耦合的方式来相互通信。我正在为此类事情使用 MVVM Light Messenger 类，但我知道 PRISM 提供了类似的功能。如果您不滥用它，那么从孩子中引用父母并不是一种罪过。我有一个 ViewModelBase<T> 并且孩子有一个指向基类并指定 T 类型的父级的引用，这是迄今为止硬引用和松散引用之间的良好平衡。
6.  如果有人向您指出这样的例子，请告诉我！实际上，使用本地数据库应该更简单。在我的情况下，我使用的是单例上下文（很多人似乎讨厌它），但由于这是一个本地应用程序，只有一个用户并且没有线程复杂性，所以单例上下文使我的生活更轻松。在这种情况下，我仍在等待找到一个不这样做的真正充分理由。

PS：有些人可能会否决您的问题，因为...这不是一个问题，它为大量辩论开辟了空间。如果它被关闭，请尝试聊天。

希望这对你有帮助，问候！

# php - 从 Instagram PHP API 显示用户信息

> ID：14542691
> 
> 赞同：3
> 
> 时间：2013-01-26T23:33:23.340
> 
> 标签：php, api, oauth, instagram

请原谅这个超精确的问题，但我对此很陌生，可以使用一些帮助。我以为我已经理解了一切，直到我遇到了这个障碍。

我正在使用[9lesson 的 Instagram PHP Oauth 教程](http://www.9lessons.info/2012/05/login-with-instagram-php.html)，它建立在 cosenary 的 Instagram PHP API 类之上。

一切运行正常，但我正在尝试添加一行，显示登录用户有多少关注者。

我添加了第三行，复制了已经存在的前两行。

```
echo '<b>Profile Pic:</b> '.$data->user->profile_picture.'</br>';
echo '<b>Access Token:</b> '.$data->access_token.'</br>';
echo '<b>Followed by</b> '.$data->user->counts->followed_by.'</br></div>'; 
```

我在下面添加了最后一行`$_SESSION['userdetails']=$data;`

```
$followers =$data->user->counts->followed_by; 
```

为什么这不会返回任何数据，即使它是端点的正确名称？我觉得我已经尝试了 10 种可能的组合。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:46:06.977

我查看了您正在使用的 Instagram API。

看起来你是`$data`从这个电话中收到的

```
$data = $instagram->getOAuthToken($code); 
```

此调用旨在获取访问令牌并调用此端点

```
https://api.instagram.com/oauth/access_token 
```

如果您查看[Instagram API](http://instagram.com/developer/authentication/)，您会发现此调用不返回任何计数

```
{
    "access_token": "fb2e77d.47a0479900504cb3ab4a1f626d174d2d",
    "user": {
        "id": "1574083",
        "username": "snoopdogg",
        "full_name": "Snoop Dogg",
        "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg"
    }
} 
```

使用他的 API，我不确定如何计算。我构建了一个[API](https://github.com/galen/PHP-Instagram-API)（需要 php 5.3+），使它变得超级简单。

```
$current_user = $instagram->getCurrentUser();
$followers = $current_user->getFollowers(); //get first page of followers
$followers_count = $current_user->getFollowersCount(); //get number of followers 
```

这是一个例子

[http://galengrover.com/projects/instagram/?example=current_user.php](http://galengrover.com/projects/instagram/?example=current_user.php)

# php - 定义函数参数 2 并将参数 1 保留为默认值

> ID：14542693
> 
> 赞同：0
> 
> 时间：2013-01-26T23:33:27.337
> 
> 标签：php

如果你有以下功能

```
function func1($captainObvious="John",$name){
  return "Hallo my name is ".$captainObvious."<br>Welcome ".$name."!";
} 
```

你如何在不给出论点 1 的情况下用论点 2 来称呼它？我想用类似的东西来称呼它

```
func1(default,"Benny"); 
```

但我似乎找不到这种可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:34:47.953

创建函数时，您应该*首先*放置所需的参数，然后将具有默认值的参数放在它们之后。否则，您最终会遇到这样的情况，您现在必须为第一个参数提供一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:40:31.907

如果你不能改变`func1`，你将不得不使用`func1("John", "Benny")`. 如果您可以更改它，但由于遗留问题而无法更改参数顺序（首选解决方案！），您可以将`null`其用作默认标志：

```
function func1($captainObvious="John", $name){
  if ($captainObvious === null) {
    $captaionObvious = "John";
  }
  return "Hallo my name is ".$captainObvious."<br>Welcome ".$name."!";
}

func1(null,"Benny"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T23:44:56.390

您必须首先放置所需的变量。

例如

```
Function func1($captainObvious="John",$name){
    return "Hallo my name is ".$captainObvious."<br>Welcome ".$name."!";
}

Function func2($name, $captainObvious="John"){
    return "Hallo my name is ".$captainObvious."<br>Welcome ".$name."!";
} 
```

那么如果你调用这些函数

```
echo(func1('', 'Benny'));
echo(func2('Benny', ''); 
```

会给func1

> > 你好，我的名字是。
> > 
> > 欢迎本尼！

对于 func2

> > 你好，我的名字是约翰。
> > 
> > 欢迎本尼！

# opengl - OpenGL - 多边形边缘上的奇怪线条

> ID：14542695
> 
> 赞同：2
> 
> 时间：2013-01-26T23:33:32.967
> 
> 标签：opengl, polygon

在我正在制作的类似我的世界的游戏中，我在多边形边缘上得到了这些奇怪的线条：

![](../Images/2ecb59d2f20803046b25266337d260d3.png)

我正在使用纹理图集，被`GL_CLAMP_TO_EDGE`.

我尝试使用设置`GL_TEXTURE_MIN_FILTER`to `GL_LINEAR`，`GL_NEAREST`甚至使用 mipmap，但这并没有什么不同。我还尝试将纹理坐标插入半个像素，或者使用 x16 各向异性过滤，但没有成功。

有什么帮助吗？

编辑 - 立方体的顶面被渲染成这样：

```
 glBegin(GL_QUADS);

            glTexCoord2f(0f, 0f);
            glVertex3f(x, y + 1f, z);

            glTexCoord2f(0f, 1 / 8f);
            glVertex3f(x, y + 1f, z + 1f);

            glTexCoord2f(1 / 8f, 1 / 8f);
            glVertex3f(x + 1f, y + 1f, z + 1f);

            glTexCoord2f(1 / 8f, 0f);
            glVertex3f(x + 1f, y + 1f, z);

            glEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:58:05.883

这对我来说就像经典的纹理像素 <-> 屏幕像素围栏问题。在这里查看我的答案：[https ://stackoverflow.com/a/5879551/524368](https://stackoverflow.com/a/5879551/524368)

另一个问题可能是，立方体的角坐标并不完全相同。浮点数有一些内在误差，如果您通过向其添加一些浮点数将这些立方体排列在网格中，则可能会发生顶点位置稍微偏离并且由于舍入误差而导致您看到深度战斗的情况。解决这个问题的两件事：第一：如果两个立方体的面接触，不要渲染它们。第二：使用整数坐标布局立方体网格，只有在提交到OpenGL时才将顶点转换为浮点数，或者根本不转换。

# c++ - 程序创建向量的向量并计算组合的数量

> ID：14542697
> 
> 赞同：-4
> 
> 时间：2013-01-26T23:33:48.707
> 
> 标签：c++, vector

我必须编写一个程序来创建一个数组，然后计算元素之间可能添加的总数。（元素中的实际内容无关紧要，可以进行多少组合）。即一个 2*2 数组应该有 10 个可能的加法。到目前为止，我的代码看起来像

```
#include <iostream>
#include <ctime>
#include <stdlib.h>
#include <vector>
using namespace std;

int n;
int count;

int main()
{
cout<<"\nEnter Number of rows and columns you wish to calculate the 
possible number additions. \n;            
cin >> n;
if (!cin)
{
    do
    {
    n = 0;
    cout << "That is not a valid number, please enter another. \n";
    cin >> n;
    }
    while (!cin);
}

vector<vector<int> > matrix(n);
for ( int i = 0 ; i < n ; i++ )
{
matrix[i].resize(n);
}

for(int i =1; i < n^2; ++i)
{   
    count = count + i;
}

cout << count;

return (0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:39:43.353

你能试着解释一下你想要做什么吗？你是什​​么意思“计算元素之间可能添加的总数”？如果答案独立于实际元素，为什么需要创建一个数组（否则我不理解你的 2*2 示例）。

我可以在您的代码中发现的一个问题是您将 n^2 误认为等于 n*n 但 '^' 运算符实际上是 XOR 位运算符。

# php - 无法以正确的方式从数据库中收集数据

> ID：14542698
> 
> 赞同：0
> 
> 时间：2013-01-26T23:33:52.760
> 
> 标签：php, android

我有这个功能`getDistance()`。while 循环内的函数，通过使用坐标（纬度-经度）计算 2 个用户之间的距离，并将距离以米为单位`findDistance()`返回给 var 。是用户第一次提交的字符串，是从数据库中调用的字符串。我希望能够从我的数据库中保存所有用户的名称，其中的条件为真，关于提交数据的新用户与数据库内旧用户的距离之和。问题是保存了从数据库调用的名字，并且循环继续进行多次，甚至没有考虑限制。例如，如果调用的名字`$djson``$distance``$user_old["distance"]``$query``$matched_names``if()``$matched_names``if()``$user`是“迈克”，`$user`有 5 行，那么输出将是：`Mike,Mike,Mike,Mike,Mike`。

我想我在内部工作的方式上犯了一些错误，而..

```
<?php
public function getDistance($uuid, $name, $distance, $latstart, $lonstart, $latend, $lonend, $gcm_regId) {

    $query = sprintf("SELECT uid, gcm_regid, name, distance,latstart, lonstart, latend, lonend  FROM user_demand WHERE latstart='%s' AND lonstart='%s'",
    mysql_real_escape_string($latstart),
    mysql_real_escape_string($lonstart));
    $user = mysql_query($query);

    $no_of_rows = mysql_num_rows($user);
    $user_old = mysql_fetch_assoc($user);

    while( $user_old = mysql_fetch_assoc($user)) {
        $djson = $this->findDistance($latend,$lonend,$user_old["latend"],$user_old["lonend"] );
        if ($user_old["distance"] + $distance >= $djson) {
            $match = $this ->df->addUserMatch($user_old['gcm_regid'],$user_old['name'],$gcm_regId,$name);
            $matched_names = array_fill(0,$no_of_rows,$user_old['name']);   
            $matched_gcmz = array_fill(0,$no_of_rows,$user_old['gcm_regid']); 
        }
    }

    $registatoin_ids = array($gcm_regId);

    $message = array("names" =>$matched_names,"gcm" => $matched_gcmz);
    $result = $this ->gcm->send_notification($registatoin_ids, $message);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:34:36.140

我通常做的是，当我要写一些复杂的东西时，就是让它在没有函数的情况下工作，然后把它分解成函数。以这种方式解决问题更容易混淆和更容易。

很难说出它在做什么，因为您没有发布其他函数，并且 if 语句依赖于该函数的输出。

顺便说一句，这可能是您使用 $name 和 $user_old['name']

$match = $this ->df->addUserMatch($user_old['gcm_regid'],$user_old['name'],$gcm_regId,$name);

我想你会希望它相互匹配。就像 if $name = $user_old['name'] 然后添加它，如果没有，做其他事情。

# php - 在 PHP 中不做循环的 foreach

> ID：14542699
> 
> 赞同：1
> 
> 时间：2013-01-26T23:33:53.950
> 
> 标签：php, foreach

例如，如何在`foreach`不执行循环的情况下执行功能

```
foreach($result['orders'] as $order) { 
```

但我不想做一个 foreach 我想要类似的东西

```
$result['orders'] == $order; 
```

或者类似的东西，而不是在循环中执行它，因为`$result['orders']`无论如何只返回 1 个结果，所以我看不出在循环中执行它的意义。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T23:36:12.133

您可以使用任何从数组中获取元素的数组函数来获取数组中的第一个（并且显然是唯一的）元素，例如[`array_pop()`](http://php.net/array_pop)或[`array_shift()`](http://php.net/array_shift)：

```
$order = array_shift( $result['orders']); 
```

或者`list()`：

```
list( $order) = $result['orders']; 
```

或者，如果您知道它是数字索引的，请直接访问它：

```
$order = $results['orders'][0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:37:30.720

你也许只是在寻找这个？

```
$result['orders'] = $result['orders'][0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:37:20.140

在第二个代码示例中，您有一个比较运算符 (==) 而不是赋值运算符 (=)。如果您只是尝试将变量设置为等于数组中的位置，则可以使用：

`$order = $results['orders'];`

我不确定这是否是你想要完成的。

# ios - 使用文件中的数据填充 NSArray

> ID：14542702
> 
> 赞同：-1
> 
> 时间：2013-01-26T23:34:28.267
> 
> 标签：ios, objective-c, nsarray

我被困住了！我不能让它工作。

这就是我打算做的：Io 在 .txt 文件中有一些数据，我最终想用这些数据填充 NSArray！这就是我所做的：

```
NSString *urlString = [[NSBundle mainBundle] pathForResource:@"intsAndsStrings" ofType:@"txt"];
NSArray *objectsArray = [[NSArray alloc]initWithContentsOfFile:urlString];
NSLog(@"objectsArray is: %@", objectsArray); 
```

我从最后一行得到的唯一输出是；

```
 objectsArray is: (null) 
```

txtFile 中的对象用逗号(,) 分隔。

请帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T23:47:51.110

您发布的代码要求该文件是一个 plist 类型的文件，`array`它是根元素。如果您的`txt`文件只是一个普通的旧文本文件，并且您希望将每一行文本放入数组中，那么您需要一种完全不同的方法。

一种选择是将文本文件加载到`NSString`变量中，然后使用`componentsSeparatedByCharactersInSet:`传入的`newlineCharacterSet`.

```
NSString *urlString = [[NSBundle mainBundle] pathForResource:@"intsAndsStrings" ofType:@"txt"];
NSString *rawText = [NSString stringWithContentsOfFile:urlString encoding:NSUTF8StringEncoding error:nil];
NSArray *objectsArray = [rawText componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

真正的代码会正确处理错误。

编辑：我刚刚注意到您声明文本文件是 CSV 文件。这需要更多的处理。CSV 文件是否不止一行？每一行的每个值应该如何存储？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T23:46:06.340

为了使用`initWithContentsOfFile:`，您的文件必须是属性列表格式，而不是逗号分隔的格式。查看属性列表编程指南。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T23:45:36.140

正如我从您使用的扩展名中看到的那样，这可能不是 plist 文件。

您应该使用包含数组的 plist 文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>hello</string>
</array>
</plist> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T04:12:43.143

使用`CHCSVParser`. 给它一个你的文件的路径，它会给你一大堆NSStrings。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"csv"];

NSError *error = nil;
NSArray *rows = [NSArray arrayWithContentsOfCSVFile:path encoding:NSUTF8StringEncoding error:&error];
if (rows == nil) {
  //something went wrong; log the error and exit
  NSLog(@"error parsing file: %@", error);
  return;
} 
```

此时， rows 是一个数组。rows 中的每个元素本身就是一个数组，表示 CSV 文件中的一行。该数组的每个元素都是一个 NSString。

# arrays - 如何使用 Derby.js 模型数组？

> ID：14542705
> 
> 赞同：0
> 
> 时间：2013-01-26T23:34:58.920
> 
> 标签：arrays, model, push, derbyjs

`Fatal error: [object Object] is not an Array`每当我尝试使用 Derby.js/Racer 的模型数组方法（例如 ( , ) 时，我都会遇到服务器崩溃`push`。`insert`

```
app.ready (model)->
   model.set 'list', []
   model.push 'list', 'test' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:41:37.447

[https://github.com/codeparty/racer/issues/71](https://github.com/codeparty/racer/issues/71)

根模型必须有一个对象。所以下面会起作用。

```
app.ready (model)->
    model.set 'list.list', []
    model.push 'list.list', 'test' 
```

# clojure - 有没有一种聪明的方法来验证 Clojure 中的函数输入？

> ID：14542707
> 
> 赞同：8
> 
> 时间：2013-01-26T23:35:09.530
> 
> 标签：clojure, validation

我正在编写一个简单的 DiceRoller 应用程序并创建了主函数，但是我想知道是否有一种“智能”方法来验证 Clojure 中的函数输入，而不是使用分支条件来验证输入？我的函数在下面带有一个示例测试，我还必须测试 n 是否不是另一个 if 或 an or 的数字，并且感觉很乱。

另外，如果有人能指出一种更聪明的方法来执行此功能，我将不胜感激任何反馈，这是我第一次尝试功能性编程

```
(ns DiceRoller)

(defn roll
"rolls a specified number of n sided dice "
([] (roll 1 6))
([number] (roll number 6))
([number n]
  (if-not number? number (throw (IllegalArgumentException. (str "incorrect input, integers only"))))
  (take number (repeatedly #(+ (rand-int n) 1)))
  )
) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-27T06:59:52.357

当然有——你可以`:pre`为此使用断言。

```
(defn some-fun [x]
  {:pre [(number? x)]}
  (foo x)) 
```

现在你会得到*AssertionError Assert failed: (number?x)*如果你给函数传递一个非数字参数`x`。

正如@amalloy 已经指出的那样，检查输入是否是数字有点没用，但是有很多完全有效的前置条件（和后置条件）检查您可能想要应用于您的函数。[您可以在此处](http://objectcommando.com/blog/2010/03/07/design-by-contract-with-clojure/)和[此处](http://blog.fogus.me/2009/12/21/clojures-pre-and-post/)查看有关该主题的更多详细信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T00:35:57.593

大多数情况下，Clojure 的态度是“假设你得到了正确的东西”。在这种情况下，如果您完全取出支票，用户最终会得到基本相同的异常。但是如果你真的想这样做，你应该正确地做！现在你的代码在每个输入上都会抛出一个异常，因为你在`(number? number)`.

# css - css中的列表点不起作用

> ID：14542720
> 
> 赞同：0
> 
> 时间：2013-01-26T23:36:19.453
> 
> 标签：css, list

我在 css 中创建了一个框并将文本放入框内。我希望它是一个列表。但是，当我尝试使用它时，会弄乱整个页面的格式。我也在这里尝试了解决方案：[CSS list-style-type not working](https://stackoverflow.com/questions/12447611/css-list-style-type-not-working)，但这也不起作用。我的原始代码如下。我的问题是，是列表样式还是我创建的框可能给我带来了问题？

```
<p class = "total" style= "background-color: #C6C29E;opacity:.9;height:2000px;width:500px;float:left;color:black;text-shadow: 4px 0px #aaa;list-style-type:circle;">
<li>Text</li><br>
    <li>Text<br></li>
 </p> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:37:41.063

要创建列表，您必须将`li`项目包装在 a`ul`或 a中`ol`：

```
<ul class="total" style="list-style-type:circle;">
    <li>Text</li>
    <li>Text</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:41:42.560

我同意约瑟夫。`<p>`将标签包裹在`<li>`元素周围并以`<br>`这种方式使用标签是个坏主意。你应该使用 CSS 来设置内容的样式，而不是使用`<br>`标签来为你做。

如果您只想将列表项添加到其自己的自扩展框中[，这是否有帮助，](http://jsfiddle.net/EP8m8/)或者这不是您的意思？

```
<ul class="my-list">
  <li>text</li>
  <li>text</li>
</ul> 
```

```
ul.my-list {
  background: red;
  padding: 20px;
  float: left;
} 
```

# objective-c - 比较 char 和 enum

> ID：14542721
> 
> 赞同：1
> 
> 时间：2013-01-26T23:36:54.160
> 
> 标签：objective-c, enums, c99

我有一个这样定义的枚举：

```
typedef enum : unsigned char {
    START_DELIMITER = 0xAA,
    END_DELIMITER   = 0xBB,
} Delimiter; 
```

当我将分隔符值与 const char* 中的 char 字节进行比较时，如下所示：

```
// data is NSData;
const char *bytes = [data bytes];
if (bytes[0] == START_DELIMITER) { } 
```

即使 bytes[0] 包含 0xAA，上述测试也是错误的。

如果我将 START_DELIMITER 定义为 const char，则比较为真。为什么即使枚举已经定义为无符号字符，对枚举的测试也会失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:39:51.203

char 是有符号的，而 enum 是无符号的。也许编译器在进行比较之前进行符号扩展？

# ruby-on-rails - 为参数值传递一个长字符串

> ID：14542722
> 
> 赞同：0
> 
> 时间：2013-01-26T23:37:02.877
> 
> 标签：ruby-on-rails, parameters, omniauth

我正在使用 Omniauth 让用户注册 Facebook 帐户。当他们第一次点击 auth 链接时，我会将他们引导到注册页面，让他们输入一些额外的信息，除非他们已经有我的应用程序的帐户。

*会话控制器*

```
 def create_facebook
        #make an environment variable
        auth = request.env['omniauth.auth']
        if User.find_by_provider_and_uid(auth["provider"], auth["uid"])
            user = User.find_by_provider_and_uid(auth["provider"], auth["uid"])
            session[:user_id] = user.id
            redirect_to lessons_path, flash[:notice] => "Signed in!"
        else
            #go to signup page to get additional info
            redirect_to new_user_path(:auth => auth) #problem
        end
  end 
```

在这种情况下，我使用 URL 中的参数传递整个 auth 哈希，因为我想调用`User.create_with_omniauth(auth)`. `Users#new`我应该避免这样做吗？其他选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:36:29.857

你有一些我可以看到的方法：

*   将 auth 值存储在用户的会话中（但请记住，会话默认情况下不会加密值；它只会对其进行签名），然后在查看新用户操作时将其拉出。

或者：

*   只需直接调用新的用户操作代码（通过帮助程序共享它，或者如果它在同一个控制器上 - 调用操作，然后确保调用`render`以设置正确的视图）

第三种更强大的替代方案，类似于会话方法，但更重量级：

*   使用您在此步骤中拥有的信息设置用户（并将其设置为某种“部分注册”状态）。让他们登录。然后确保在查看 new_user 操作时读入任何现有数据。可能还希望设置您的路由层以始终将处于此状态的用户重定向到注册页面，无论他们在哪里。

# javascript - JSON 键存在但返回 false

> ID：14542729
> 
> 赞同：2
> 
> 时间：2013-01-26T23:37:36.293
> 
> 标签：javascript, json, node.js

首先，我所有的代码都是在 node.js 中完成的，但这也可以应用于 javascript。

这是我用来检查密钥是否存在的代码，问题是它总是返回 false。所以我在 console.log 中添加了显示值是什么：

```
if(!choice.name || !choice.realm || !choice.region || !choice.roll){
    console.log(choice);
    console.log(choice.name);
    console.log(choice.realm);
    console.log(choice.region);
    console.log(choice.roll);
    return false;
} 
```

这是它的输出：

```
{"name":"Imacactus","realm":"Velen","region":"US","roll":"DPS"}
undefined
undefined
undefined
undefined 
```

我猜它与引号有关？但我从来没有听说过报价搞砸了。这是 node.js 的问题吗？我也尝试过 .hasOwnProperty('realm') ，但仍然失败。

这是具有所有功能的大部分代码：http: [//pastebin.com/DUN9VdHr](http://pastebin.com/DUN9VdHr)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T23:43:10.623

您需要先将 json 解析为 javascript 对象，然后才能引用其属性。

您可以使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)

```
var choiceobj = JSON.parse(choice);
if(!choiceobj.name || !choiceobj.realm || !choiceobj.region || !choiceobj.roll){

    console.log(choiceobj);
    console.log(choiceobj.name);
    console.log(choicepbj.realm);
    console.log(choiceobj.region);
    console.log(choiceobj.roll);
    return false; 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T23:44:54.740

问题是引号是密钥的一部分，因此要访问它，您必须执行以下操作： `console.log(choice['"name"']);`

# django - 访问本地网络中 ubuntu 服务器上托管的网页

> ID：14542732
> 
> 赞同：0
> 
> 时间：2013-01-26T23:38:02.060
> 
> 标签：django, networking, ubuntu, web

我有一个托管由 Python Django 驱动的网页的 ubuntu 服务器，我可以使用以下命令访问该页面：elinks http://127.0.0.1:8000。

现在，如果我想在与我的 ubuntu 服务器（本地 ip：10.0.0.9）共享同一个家庭路由器的 macbook 上访问同一个网页，我该怎么做？输入 elinks http://10.0.0.9:8000 不起作用。

非常感谢，ZZ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:41:18.410

您是否使用 manage.py 运行开发服务器？

如果是这样，您应该使用以下命令启动服务器：

```
python manage.py runserver 0.0.0.0:8000 
```

这将允许 ips 在所有接口上访问开发服务器，而不仅仅是 localhost。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:40:41.327

你需要为它服务。有很多方法可以做到这一点，但我首选的方法是使用[Nginx](http://nginx.org/)作为[gunicorn](http://gunicorn.org/)的反向代理服务器。[这](http://senko.net/en/django-nginx-gunicorn/)是一个很好的教程。

# iphone - 调整包含 UIButtons 的 UIView 的大小会使这些按钮失去透视位置

> ID：14542734
> 
> 赞同：-1
> 
> 时间：2013-01-26T23:38:37.893
> 
> 标签：iphone, uiview, uiimageview, autoresize

我得到了一个 UIView，其中包含一个 UIIMageView 和几个按钮，这些按钮分配在与 UIIMageView 的图像相关的特定位置。

UIView 的框架是 (0,0,250,250) UIView 中的 UIIMageView 在 IB 中设置为自动调整（全部）。所有按钮都设置为自动调整大小（无）和原点中间。

当我更改 UIView 的框架，即（0,0,500,500）时，UIIMageView（和图像）会调整大小，但按钮会失去几个像素的透视位置（在垂直和水平轴上大约 2 到 3）。

这是正常的吗？有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:12:38.323

尝试将按钮放在另一个 UIView 中，然后在这个新视图上设置自动调整大小选项。您应该在新视图中保留按钮而不自动调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:36:45.477

毕竟没有答案。我必须接受这样一个事实，即调整大小的视图和其中的按钮将在 x/y 轴上失去 2/ 3 个像素的透视位置...

奇怪的....

# google-app-engine - 使用 Google Analytics 进行 Google App Engine 短 URL 跟踪

> ID：14542736
> 
> 赞同：0
> 
> 时间：2013-01-26T23:38:49.773
> 
> 标签：google-app-engine, google-analytics, shortcode, short-url

当用户共享链接时，我的网站会生成一些短 URL（例如： http: [//futureo.us/l/ixjF](http://futureo.us/l/ixjF)）。

这些短 URL 将用户重定向到我链接到的原始内容。在重定向之前，应用程序会呈现一个仅包含 Google Analytics javascript 代码的页面。

目前我的处理程序代码如下所示：

```
class PostHandler(handler.Handler):
def get(self, code):
    #strip URL shortcode
    code = code.strip('/')
    #grab URL based on shortcode
    url = scripts.urlshort.getURL(code)
    if url:
        self.render('tracking.html')
        self.redirect(str(url))
    else:
        self.write('Code not FOUND.') 
```

此解决方案不起作用。GA 未注册这些短链接的综合浏览量。我也想看看这些短链接的推荐人在哪里。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:24:15.743

我相信您的问题是您在具有 HTTP 重定向的响应中添加了 HTML 跟踪代码。可能 HTTP 重定向比 HTML 更早处理，如果后者被评估的话。

在我看来，最好的解决方案是在服务器端而不是客户端跟踪重定向。由于这些都是重定向，因此您不需要跟踪仅客户端数据，例如在页面上花费的时间、页面事件等。如果在 python 代码中完成跟踪重定向将是最准确和最简单的。（不过，我不知道如何使用谷歌分析工具来跟踪这些；对于我的用途，我只是在 NDB 模型中跟踪重定向）。

另一种解决方案（可能会降低用户体验）是避免使用 HTTP 重定向 ( `self.redirect`)，而是放置一个 javascript 客户端重定向，该重定向将在跟踪代码之后进行评估。

```
window.location = "{{url}}"; 
```

# android - 在应用小部件 GridView 中保留图像纵横比

> ID：14542738
> 
> 赞同：3
> 
> 时间：2013-01-26T23:38:58.643
> 
> 标签：android, android-appwidget, android-gridview, remoteview

我正在开发一个具有多个应用程序小部件的应用程序，其中一些正在使用 a`GridView`来显示其内容。内容是一堆电影封面图片，我想保留图片的原始纵横比。

或者，我正在寻找一种方法来声明图像的纵横比。`GridView`但是，当用户更改应用小部件的大小时，图像仍然适合宽度是很重要的。

`ImageView`由于在处理`RemoteView`s时不可能使用子类，所以这是不可能的。我目前正在使用`ScaleType.CENTER_CROP`以及`ImageView`定义的高度和宽度，但正如你可以想象的那样，这并不完美。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:51:03.333

您是否在 ImageView 上尝试过此方法？

```
 imageView.setAdjustViewBounds(true); 
```

由于这个[链接](http://developer.android.com/guide/topics/ui/layout/gridview.html)，我找到了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:31:10.160

创建远程视图的子类，在其中设置位图时使用如下内容：

[https://stackoverflow.com/a/2999707/944070](https://stackoverflow.com/a/2999707/944070)

或在这种情况下覆盖 onMeasure：

[https://stackoverflow.com/a/4688335/944070](https://stackoverflow.com/a/4688335/944070)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:21:15.210

尝试将 GridView columnWidth 设置为图像宽度，将 numColumns 设置为“auto_fit”，将 stretchMode 设置为“spacingWidth”：

```
<GridView
        android:id="@+id/gridView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnWidth="50dp"
        android:numColumns="auto_fit"
        android:stretchMode="spacingWidth" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T09:24:05.717

ImageView 与 TextView 有点不同。ImageView 具有“src”，它定义了小部件中的前景图像。如果在 imageview 中设置背景，它会显示在前景的后面。这两个图像的控制方式与`android:stretchMode`其他 android 参数不同。

我建议您尝试将所有内容更改`android:src`为`android:background`AND 反过来，以获得您认为对您有用的模式。在您以您希望的方式获得一些图像之后，然后使用 GIMP、Photoshop 处理图像，使其大小与您认为您喜欢的相同。图像本身需要很好，这样这些参数才能很好地工作。图像的大小、密度和 XY 比率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-23T20:09:15.143

请参阅此处用于另一个 appwidget 纵横比问题的 RelativeLayout+ShapeDrawable 技术：[How can I fill an ImageView in an Appwidget while mainiting aspect ratio?](https://stackoverflow.com/questions/20920174/how-can-i-fill-an-imageview-in-an-appwidget-while-mainiting-the-aspect-ratio/21973733#21973733)

它在 AppWidget 约束内工作，应该适用于这个问题。

# python - Python 因大量数字而崩溃

> ID：14542739
> 
> 赞同：1
> 
> 时间：2013-01-26T23:39:16.057
> 
> 标签：python

我对 Python 还很陌生，但我遇到了这个挑战，要递归地创建一个斐波那契生成器，让我开始学习这门语言。问题是，如果我发现超过 3226/3227 个斐波那契数，Python 就会崩溃。(Python 3)

注意：我在 PHP、JavaScript、VBA 和 Java 中做了很多编程，但我对 Python 完全陌生。因此，如果这只是数据类型错误之类的问题，我真的很抱歉。

```
import sys
sys.setrecursionlimit(1000000000)

cache = dict()

 def fibonacci(n, arr = False):
    global cache

    if n == 0 or n == 1:
         r = n
    else:
        nVal1 = n - 1
        nVal2 = n - 2
        if (not nVal1 in cache):
            num1 = cache[nVal1] = fibonacci(nVal1, arr)
        else:
            num1 = cache[nVal1]
        if (not nVal2 in cache):
            num2 = cache[nVal2] = fibonacci(nVal2)
        else:
            num2 = cache[nVal2]

        r = num1 + num2

     if arr != False:
        arr.append(r)

    return r

fib = list()
# 3227 is max without generating a list.
# 3226 is max when generating a list.
fibonacci(3226, fib)
for x in fib: print(x) 
```

我能做些什么让它比这更进一步？我不认为它已经耗尽内存，因为它在我的慢速 i3 笔记本电脑上运行大约两秒钟..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:42:26.320

阅读[sys.setrecursionlimit的注释](http://docs.python.org/2/library/sys.html#sys.setrecursionlimit)

> 可能的最高限制取决于平台。当用户有一个需要深度递归的程序和一个支持更高限制的平台时，她可能需要将限制设置得更高。这应该小心完成，因为过高的限制会导致崩溃。

我会这样实现fibo

```
def fib():
    a,b = 1,0
    while True:
        yield a
        b = a+b
        yield b
        a = a+b

fibs = fib()
fibo = [next(fibs) for i in xrange(100)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T23:42:47.207

我猜你超过了 python 解释器允许的最大堆栈深度。随着您进一步研究新功能，您最终将耗尽 python VM 分配的内存量以适应堆栈。

您可以将[http://docs.python.org/library/sys.html#sys.setrecursionlimit](http://docs.python.org/library/sys.html#sys.setrecursionlimit)更改为某个点，但最大可能的深度是由实现定义的。

# ios - UITableView - 点击更改单元格颜色

> ID：14542741
> 
> 赞同：2
> 
> 时间：2013-01-26T23:39:19.383
> 
> 标签：ios, uitableview, ios6

我已经阅读了很多帖子，但没有一个回答这个问题。我创建了一个填充玩家姓名列表的表格视图。当用户点击一个名称时，我希望单元格的背景颜色根据它们在循环中的位置更改为红色、黄色或绿色。我不想改变 selectionStyle 颜色。背景颜色的变化将表明每个玩家将在游戏中收到的问题的难度。这是我迄今为止一直在尝试的。当我调试时，我可以看到 didSelectRowAtIndexPath 被击中，但没有任何变化。有任何想法吗？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Player Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.backgroundColor = [UIColor greenColor];
    UILabel *playerName = (UILabel *)[cell viewWithTag:PLAYER_NAME];

    playerName.backgroundColor = [UIColor redColor];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T23:43:36.173

尝试：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    cell.backgroundColor = [UIColor greenColor];
    UILabel *playerName = (UILabel *)[cell viewWithTag:PLAYER_NAME];

    playerName.backgroundColor = [UIColor redColor];
} 
```

这应该有效，因为您只需要一个可见的单元格。该表将返回已经可见的单元格。

您确实还需要更新数据源中的一些状态变量，因此如果此单元格滚动然后返回视图，您将知道使用正确的颜色再次绘制单元格。

# android - 样式化 java 邮件（无需用户交互）

> ID：14542742
> 
> 赞同：0
> 
> 时间：2013-01-26T23:39:21.500
> 
> 标签：android, jakarta-mail

我能够通过 java 邮件发送邮件而无需用户交互。如何设置邮件文本（正文）的样式（大小、粗体、颜色）？

**编辑：** 我正在使用我发现的代码[在没有用户交互的情况下发送邮件][1]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:12:40.403

[如 JavaMail FAQ 中所述，发送 html 文本。](http://www.oracle.com/technetwork/java/javamail/faq/index.html#sendrich)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:37:40.690

谢谢比尔香农，你是对的，我需要发送 html 文本和 Krylez。

方法是在 Mail Class/Mail.jave 文件中更改 send() 方法的这一部分：

// 设置消息体

BodyPart messageBodyPart = new MimeBodyPart();

messageBodyPart.setText(_body);

_multipart.addBodyPart(messageBodyPart);

对此

// 设置消息体

BodyPart messageBodyPart = new MimeBodyPart();

messageBodyPart.setContent(_body, "text/html");

_multipart.addBodyPart(messageBodyPart);

# mysql - mysql查询有效地删除重复项

> ID：14542744
> 
> 赞同：0
> 
> 时间：2013-01-26T23:39:28.987
> 
> 标签：mysql, performance, duplicate-removal

大家好，感谢阅读

我的网站上有一个测验功能，它将分数、用户名和 IP 地址存储为最重要的列。我目前有一系列可怕的观点，根据我需要的标准恢复高分，这些标准是......

首先是最低分，但......只有每个测验用户的最低分。

复杂性在于用户是否更改了 ip，即保持相同的用户名但具有不同的 ip，或者如果用户保持相同的 IP 地址但更改用户名。

用一个例子更容易解释。

*   第一个访问者有 4 个条目，但来自 3 个不同的 IP 地址
*   来自 2 个 IP 地址的第二个用户
*   第三个用户使用一个 IP 地址但使用 3 个用户名

```
带有 VALUES（用户 ID、IPA、分数）的表
```

*   **用户 1、IP1、13**
*   **用户 1、IP1、20**
*   **用户 1、IP2、30**
*   **用户 1、IP3、10**
*   *用户 2, IP4, 20*
*   *用户 2, IP5, 22*
*   *用户 2, IP5, 15*
*   **用户 3, IP6, 12**
*   **用户 3，IP6，20**
*   **用户 4, IP6, 15**
*   **用户 5, IP6, 11**

高分查询将为您呈现

1.  用户 1、IP3、10
2.  用户 5, IP6, 11
3.  用户 2, IP5, 15

得分值极不可能被复制，但我想这是可能的。上面的数字被简化以解释我的难题！

任何人都可以建议一种有效的方法来删除这些重复项，因为我的表现在有超过 15,000 条记录并且视图正在吱吱作响！

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:58:03.470

识别重复`(UserID,IPA)`元组的出现非常简单：

```
SELECT s.UserID
     , s.IPA
  FROM mytable s
 GROUP
    BY s.UserID
     , s.IPA
HAVING COUNT(1) > 1 
```

要获得最低分数，您可以添加`MIN(s.Score)`到选择列表中。

删除重复项有点困难，因为您似乎无法保证唯一性。有些人会建议您将要保留的行复制到单独的表中，然后使用重命名交换表，或者截断原始表并从新表重新加载。（这通常是最有效的方法。）

```
CREATE TABLE newtable LIKE mytable ;

INSERT INTO newtable (UserID,IPA,Score)
SELECT s.UserID
     , s.IPA
     , MIN(Score) AS Score
  FROM mytable s
 GROUP
    BY s.UserID
     , s.IPA ; 
```

* * *

如果您想仅通过 UserID 识别重复项，则可以使用相同的方法。如果 IPA 值来自得分最低的行并不重要，那就更容易了。我可以将获取用户得分最低的行的查询放在一起。

* * *

如果您想从现有表中删除行，而不在每行上添加唯一标识符（如 AUTO_INCREMENT id 列），也可以这样做。

这将使您中途删除分数高于最低分数的给定（UserID，IPA）的所有行：

```
DELETE t.*
  FROM mytable t
  JOIN ( SELECT s.UserID
              , s.IPA
              , MIN(s.Score)
           FROM mytable s
          GROUP
             BY s.Userid
              , s.IPA
       ) k
    ON k.UserID = t.UserID
   AND k.IPA = t.IPA
   AND k.Score < t.Score 
```

但这仍然会留下重复`(UserID,IPA,Score)`元组的重复出现。如果表上没有其他使该行唯一的列，则删除重复项会更加困难。（同样，一种常见的技术是将要保留的行复制到另一个表，然后交换表或从保存的行重新加载原始表。

* * *

## 跟进

请注意，对于 MySQL，视图（存储的和内联的）在性能方面可能会很昂贵，因为视图被具体化为临时 MyISAM 表（MySQL 称它们为“派生表”）。

但是在大集合上，相关子查询可能会更成问题。

所以，选择你的毒药。

如果该表有一个索引`ON (userID, Score, IPA)`，那么我将如何获得结果集：

```
SELECT IF(@prev_user=t.UserID,@i:=@i+1,@i:=1) AS seq
     , @prev_user := t.UserID AS UserID
     , t.IPA
     , t.Score
  FROM mytable t
  JOIN (SELECT @i := NULL, @prev_user := NULL) i
 GROUP
    BY t.UserID ASC
     , t.Score ASC
     , t.IPA ASC
HAVING seq = 1 
```

这利用了一些 MySQL 特定的特性：user_variables 和 GROUP BY 将返回排序结果集的保证。（EXPLAIN 输出将显示“Using index”，这意味着我们避免了排序操作，但查询仍会创建派生表。我们使用 user_variables 来标识每个 UserID 的“第一”行，而 HAVING 子句消除了所有但第一行。

* * *

测试用例：

```
create table mytable (UserID VARCHAR(6), IPA varchar(3), Score INT);
create index mytable_IX ON mytable (UserID, Score, IPA);
insert into mytable values ('User 1','IP1',13)
,('User 1','IP1',20)
,('User 1','IP2',30)
,('User 1','IP3',10)
,('User 2','IP4',20)
,('User 2','IP5',22)
,('User 2','IP5',15)
,('User 3','IP6',12)
,('User 3','IP6',20)
,('User 4','IP6',15)
,('User 5','IP6',11); 
```

* * *

## 另一个跟进

要从结果集中消除“用户 4”和“用户 5”（目前还不清楚您为什么要或需要这样做。如果是因为这些用户在表中只有一行，那么您可以添加一个 JOIN 到一个子查询（内联视图），它获取包含多行的 UserID 值列表，如下所示：

```
SELECT IF(@prev_user=t.UserID,@i:=@i+1,@i:=1) AS seq
     , @prev_user := t.UserID AS UserID
     , t.IPA
     , t.Score
  FROM mytable t
  JOIN ( SELECT d.UserID
           FROM mytable d
          GROUP
             BY d.UserID
         HAVING COUNT(1) > 1
       ) m
    ON m.UserID = t.UserID
 CROSS
  JOIN (SELECT @i := NULL, @prev_user := NULL) i
 GROUP
    BY t.UserID ASC
     , t.Score ASC
     , t.IPA ASC
HAVING seq = 1 
```

# scala - 使用 Scala 的构建器习语时，运行时“找不到参数的隐含值”错误

> ID：14542745
> 
> 赞同：0
> 
> 时间：2013-01-26T23:39:43.120
> 
> 标签：scala, builder, implicit

我正在编写一个实现任意对象的二维矩阵的 Scala 类。我需要这个类比嵌套的对象对更专业`IndexedSeq`，但是扩展一个集合类是多余的，所以我正在编写自己的。为了从我的矩阵类中的方法返回正确的类型，我使用了隐式构建器习语，但在运行时我得到一个我不明白的“找不到参数的隐式值”错误。

我的矩阵类的精简版本如下所示。

```
trait MatrixBuilder[V, M <: Matrix[V]] {
  def apply(values: IndexedSeq[IndexedSeq[V]]): M
}

abstract class Matrix[V](values: IndexedSeq[IndexedSeq[V]]) extends Function2[Int, Int, V] {

  def apply(row: Int, col: Int): V = values(row)(col)

  def set[M <: Matrix[V]](row: Int, col: Int, value: V)(implicit builder: MatrixBuilder[V, M]): M =
    builder(values.updated(row, values(row).updated(col, value)))
}

case class IntMatrix(values: IndexedSeq[IndexedSeq[Int]]) extends Matrix[Int](values)

object IntMatrix {
  def apply(n: Int) = new IntMatrix(IndexedSeq.fill(n, n)(0))

  implicit object IntMatrixBuilder extends MatrixBuilder[Int, IntMatrix] {
    def apply(values: IndexedSeq[IndexedSeq[Int]]) = IntMatrix(values)
  }
} 
```

我希望该`set`函数设置指定的单元格，然后返回正确类型的新矩阵。所以我希望`IntMatrix(2).set(0,0,5)`返回一个`IntMatrix`在除 (0,0) 之外的所有单元格中都为零的对象，它应该有一个 5。相反，我在运行时收到以下错误。

```
error: could not find implicit value for parameter builder: MatrixBuilder[Int,M]
    IntMatrix(2).set(0,0,5) 
```

我在这里做错了什么？

* * *

正如[pedrofurla](https://stackoverflow.com/users/480674/pedrofurla)在下面指出的那样，如果您首先运行该行，则该代码确实可以在 REPL 中运行`import IntMatrix._`。并且查看[集合文档](http://docs.scala-lang.org/overviews/core/architecture-of-scala-collections.html)，使用构建器的源代码中似乎有类似的导入语句。我尝试在我的`IntMatrix`班级中添加一个。

```
case class IntMatrix(values: IndexedSeq[IndexedSeq[Int]]) extends Matrix[Int](values) {
    import IntMatrix._
} 
```

但这没有效果。（事实上​​，我的 IDE IntelliJ 将此标记为未使用的导入语句。）

为了比较，我从上面逐字链接的集合文档中复制了 RNA 序列示例。该`import RNA._`行没有被标记为多余的，并且所有操作都返回正确的类型。如果答案是我需要添加一个`import IntMatrix._`，我不知道该放在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:12:40.737

这个小代码在这里工作：

```
scala> import IntMatrix._
import IntMatrix._

scala> IntMatrix(2).set(0,0,5)
res1: Mat.IntMatrix = <function2> 
```

隐式参数由调用站点中的编译器填充，因此它们必须在`set`被调用的范围内可用。

# jquery - ajax 和基本数据提交的异常问题

> ID：14542749
> 
> 赞同：0
> 
> 时间：2013-01-26T23:40:06.647
> 
> 标签：jquery, ajax, json

当我提交ajax时，我需要将三个数据参数发布到`process.conversation.php`：`method`、、`s_state`和`c_id`。`s_state`并`c_id`在这两个输入值中找到。两个变量都被正确设置。我使用`alert(s_state)`and `alert(c_id)`，它们都符合我的预期。

一切都很好，除了我`c_id`没有发布。如果我在 ajax 中更改，`c_id: '1'`将按`1`我的预期发布；但是，当我使用分配给的变量 c_id 时`1`，它不会被发布（或者至少不会以我收到警报的值发布......我不确定是哪个。）但是，我确实获得了成功`toggleClass`在所有情况下。

注意：`s_state`完全按照我的预期工作，就像`method`. 如果`s_state = '1'`，它将与该变量一起发布。所以，我不知道为什么`c_id`不工作。

任何和所有的想法都是完全欢迎的。
可能出了什么问题？

jQuery/ajax：

```
$(".__conversation_s").click(function() {

var $thisS = $(this);
var s_state = $thisS.find("input[name='s_state']").val();
var c_id = $thisS.find("input[name='c_id']").val();

jQuery.ajax({
   type: 'POST',
   url: "./process.conversation.php",
   data: {
       method: 'star_toggle', 
       s_state: 's_state',
       c_id: 'c_id'     
   },
   cache: True,
   success: function() {
       $thisS.toggleClass("__starred");
   }
});
}); 
```

和一些html：

```
<div class='__conversation_s'>
    <input type='hidden' name='s_state' value="<?php echo $s_important; ?>">
    <input type='hidden' name='c_id' value="<?php echo $c_id; ?>">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:09:43.073

您的数据对象中的语法不正确。您在变量名称周围加上引号，这意味着它们不是变量，而是包含与变量名称相同的字母的字符串。

```
data: {
       method: 'star_toggle', 
       s_state: 's_state',
       c_id: 'c_id'  /* will send the string with letters `c` and `_` and `id` to server*/   
   } 
```

从变量中删除引号：

```
data: {
       method: 'star_toggle', 
       s_state: s_state,
       c_id: c_id 
   } 
```

# svn - 在没有 SVN 客户端的情况下应用 TortoiseSVN 补丁

> ID：14542751
> 
> 赞同：1
> 
> 时间：2013-01-26T23:40:13.493
> 
> 标签：svn, patch

我目前正在为其他不太懂计算机的人使用的开源程序（不是我创作的）开发补丁。我将我的更改存储在个人 SVN 中，并希望将它们以补丁的形式分发给这些“其他人”。通常，如果他们是程序员，我可以给他们一个 SVN 补丁文件，然后可以合并更改，但同样，这是没有问题的。

一种可能的解决方案是将所有更改的文件捆绑在一起（保留层次结构）并告诉其他文件解包和覆盖，但是跟踪哪些文件被更改以及哪些文件没有那么好可能有点烦人需要为此编写脚本。

有没有更优雅的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:00:33.363

SVN 不用于向最终用户分发软件或路径。您应该使用一些安装程序。

JRSoftware 的 Inno Setup 是用于创建安装程序的非常强大的工具。

您可以使用一些向导来预先配置您的安装程序，然后通过更改生成 exe 文件的脚本来自定义它。

[在这里你可以下载 IS (Inno Setup)](http://www.jrsoftware.org/isdl.php)

如果您不熟悉此类工具 - 您应该获得“QuickStart Pack”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:58:53.593

> 跟踪哪些文件已更改以及哪些文件未更改可能有点烦人

不适合你。

如果您知道，您的 repo 中的哪个版本是（原始程序的）“香草代码”，您可以

*   获取 revrange (rev:HEAD) 中仅更改文件的树
*   将您当前的 HEAD 标记为`<ANYLABEL>`
*   下次生产树使用 ANYLABEL:HEAD 范围并从 p.2 重复

> 需要为此编写脚本

TortoiseSVN 用于导出修订范围的[脚本和方法](https://stackoverflow.com/a/13063724/960558)

# php - 是否可以在网站上显示 Facebook 用户时间线？

> ID：14542752
> 
> 赞同：-1
> 
> 时间：2013-01-26T23:40:19.347
> 
> 标签：php, facebook, json

**目标：**我需要使用 PHP 在网站上显示来自用户时间轴的最新 5 个条目。请不要说我谈论用户个人资料的时间线 - 不是粉丝页面，不是群组。

**到目前为止，我这样做了：**

1.  注册为 Facebook 开发者
2.  注册应用
3.  获得令牌
4.  打开网址：[https ://graph.facebook.com/USER_ID/feed?access_token=MY_TOKEN](https://graph.facebook.com/USER_ID/feed?access_token=MY_TOKEN)
5.  瞧。现在显示该用户的提要，**但是..**

**问题：**所以现在我有用户提要，但看起来它部分工作。它经常不显示一些更新，有时它只显示帖子的日期而不是内容。

但是，当我尝试从一些 facebook 粉丝页面获取提要时，一切正常。

**我的问题：**我们可以获取用户时间线吗？如果是，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:36:23.280

您永远不会通过 api 看到 Facebook 应用程序中可见的所有信息。这来自 Facebook 如何过滤数据。有关更多信息，请参阅此 Facebook 开发人员博客文章：[https ://developers.facebook.com/blog/post/478/](https://developers.facebook.com/blog/post/478/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:48:04.653

是的，如果您的应用请求 read_stream 权限，即使有限制，您也可以抓取用户时间线帖子。向以下 URL 发出 HTTP GET 请求：

```
https://graph.facebook.com/user_id/posts?access_token=token&limit=5 
```

# virtualization - qemu KVM 内核模块没有这样的文件或目录

> ID：14542754
> 
> 赞同：13
> 
> 时间：2013-01-26T23:40:29.083
> 
> 标签：virtualization, qemu, kvm

我目前正在上操作系统课，我需要使用 qemu 来运行我教授提供的小型操作系统。我正在尝试在我的 macbook air 5.2 上的 virtualbox 上的 ubuntu 12.04 虚拟机中使用 qemu。我知道我遇到的问题可能与嵌套虚拟化有关，但是当我尝试运行 qemu 时遇到的具体错误是：

> 无法访问 KVM 内核模块：没有这样的文件或目录
> 
> 初始化 KVM 失败：没有这样的文件或目录 返回 tcg 加速器。

qemu 确实启动了操作系统，但窗口闪烁很多，如果可能的话，我想修复 KVM 问题。我已经进行了研究，但找不到我能理解或有效的解决方案，因此将不胜感激。

同样对于 virtualbox 中的 ubuntu 虚拟机，我在硬件虚拟化下选中了 Enable VT-x/AMD-V 和 Enable Nested Paging。我也尝试过使用

```
modprobe kvm-intel 
```

我得到这个错误：

> 致命：插入 kvm_intel (/lib/modules.3.5.0-22-generic/kernel/arch/x86/kvm/kvm-intel.ko) 时出错：不允许操作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2018-04-20T08:52:14.487

在我的情况下，虚拟化被禁用。

所以`sudo modprobe kvm-intel`一直给我以下错误

> 无法插入“kvm_intel”：不支持操作

我只需要进入 BIOS 并启用虚拟化。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-26T23:43:09.373

尝试使用`sudo modprobe kvm-intel`.

为了在虚拟机启动时自动加载模块，请执行以下操作：

1.  从外壳编辑相应的文件`sudo vim /etc/modules.conf`
2.  可能输入您的用户名密码。
3.  按 键`G`转到文档末尾，然后`o`开始插入。
4.  编写`kvm-intel`并按 Enter 键，生成一个新行。
5.  按`Esc`可返回 vim 的正常模式。“--INSERT--”将从底部消失。
6.  保存文件并`vim`通过写入退出`:wq`。

你完成了。尝试重新启动并加载嵌套虚拟机。

# python - 使用 Django 上传 ImageField

> ID：14542758
> 
> 赞同：1
> 
> 时间：2013-01-26T23:40:56.307
> 
> 标签：python, django, upload

我正在尝试使用 django 上传图像，但到目前为止我看不到`upload_to`创建的目录或数据库字段中的任何文件源。

**我的模特。**

```
class Person(models.Model):
  photo = models.ImageField(upload_to='profiles/', null=True, blank=True) 
```

**我的观点**

```
def create_profile(request):
    if request.method == "POST":
        form = PartialPersonForm(request.POST, request.FILES,)
        addressForm = PartialAddressForm(request.POST) 
```

当我上传并保存时，我没有收到任何错误。无论如何，我可以调试它并找出是否设置了照片字段。

```
 <div class="photo-upload">{{ form.photo|attr:"onchange:readURL(this);" }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:05:36.800

除非您在媒体存储方面做一些特殊的事情，否则您应该将[MEDIA_ROOT](https://docs.djangoproject.com/en/dev/ref/settings/#media-root)设置为您希望保存上传文件的目录。

处理文件类型字段时，您需要遵循 Django 文档中有关[FileField.storage](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.storage)的说明。

在您看来，您将需要`save()`上传的表单数据。

```
def create_profile(request):
    if request.method == "POST":
        form = PartialPersonForm(request.POST, request.FILES,)
        addressForm = PartialAddressForm(request.POST)
        form.save()
        addressForm.save() 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-26T23:43:14.130

我相信您应该自己创建 upload_to 目录。还要确保为目录设置适当的权限，否则将无法写入。

# java - Selenium WebDriver in Parallel - 关闭 WebDriver 实例会中断其他测试

> ID：14542760
> 
> 赞同：0
> 
> 时间：2013-01-26T23:41:02.547
> 
> 标签：java, selenium, web-scraping, selenium-webdriver

我无法让 RemoteWebDriver 关闭会话。当并行运行测试并且 RemoteWebDriver 的实例之一调用 close 方法时，会出现此问题。

例如：

1.  测试 A 启动并连接到 selenium 服务器。
2.  测试 B 启动并连接到 selenium 服务器。
3.  测试一个呼叫关闭方法。
4.  测试 B 抛出一个异常，说明连接可能已终止。

如果我注释掉对 close() 的调用，那么两个测试都会成功运行到完成，但是之后两个浏览器窗口都保持打开状态。

我目前正在运行最新版本的 Firefox 和 2.29.0 的 seleium-server。Selenium 被用于从现场刮取客户发票，并在 JBoss 服务器上运行。

创建连接的代码如下：

```
public WebDriver getRemoteWebDriver() {
    DesiredCapabilities capabilities = new DesiredCapabilities();
    WebDriver driver = null;
    URL url = null;

    // Connect to the selenium server
    try {
        url = new URL("http://127.0.0.1:4441/wd/hub");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }

    capabilities.setBrowserName("firefox");
    capabilities.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, UnexpectedAlertBehaviour.IGNORE);
    capabilities.setCapability(CapabilityType.ForSeleniumServer.ENSURING_CLEAN_SESSION, true);

    driver = new RemoteWebDriver(url, capabilities);
    driver = new Augmenter().augment(driver);           // Used to take screens
    driver.manage().timeouts().implicitlyWait(SELENIUM_IMPLICIT_WAIT_SECONDS, TimeUnit.SECONDS);    // Set implicit wait time
    driver.manage().deleteAllCookies();                                                                             // Make sure we have clean session

    return driver;
} 
```

我的问题是：如何正确地在一台机器上并行创建和关闭 RemoteWebDriver 的实例？任何帮助深表感谢。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:48:07.453

如果你从单元测试运行这个测试，你可以定义一个 beforeclass 和 afterclass-hook。这样，您的 selenium 驱动程序可以在运行所有测试之前启动并在之后关闭。

# javascript - 根据放入的内容调整 EpicEditor 的大小

> ID：14542761
> 
> 赞同：3
> 
> 时间：2013-01-26T23:41:21.560
> 
> 标签：javascript, html, css, coffeescript, epiceditor

我在我的网站中使用了史诗编辑器，并且我正在使用服务器嵌入在页面上的降价来填充它。目前，当史诗编辑器显示时，它具有非常小的默认高度，并带有滚动条来处理查看整个内容。我可以手动设置 div 的高度，目前这是我能做到的最好的（我已经将它设置为相当大的值：800px）。但是，我希望它的高度始终足以容纳整个内容而无需滚动条。本质上类似于溢出：可见。

这是到目前为止的相关部分

```
<html>
    <head>
        <script src="/assets/javascripts/epiceditor/js/epiceditor.min.js"       type="text/javascript"></script>

        <script id="postMarkdown" type="text/markdown" data-postId="1">
            #Markdowns in here
            ...
        </script>
        <style>
            #epiceditor{
                height: 800px;
            }
        </style>
        <script src="/assets/javascripts/thrown/posts/edit.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="epiceditor">
        </div>
    </body>
</html> 
```

继承人的edit.js源（它从coffescript编译）

```
$ ->
    postMarkdown = $("#postMarkdown").first()

    options =
        basePath : '../../assets/javascripts/epiceditor'
    editor = new EpicEditor(options).load()
    postId = postMarkdown.data('postId')
    markdown = postMarkdown.html()
    editor.importFile('posts/'+postId,markdown);
    editor.reflow(); 
```

我希望在插入内容后回流可能会扩大高度，但是没有这样的运气。但是，如果我调整 div 的大小并调用 reflow，它确实会正确调整大小。我检查了它创建的标记，希望我可以确定高度并调整其容器的大小并告诉它重排。然而，它似乎包含多个 iframe，乍一看，我没想到这是一个快速的变化，或者甚至可能。但是，我欢迎任何解决方案。

我也明白，如果我将它的容器调整到正确的高度，epiceditor 将填充适当的空间。但是，我希望它的高度是渲染所需的量，以便编辑器在站点设计的其余部分中占据正确的空间。因此，如果我可以在 EpicEditor 中设置一些东西使其不会以它的方式溢出，或者在它加载后确定高度的方法，我已经设置好了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:29:04.880

我是制作 EpicEditor 的人，这里有一个解决方案：

```
var editor = new EpicEditor({
  basePath: 'https://raw.github.com/OscarGodson/EpicEditor/develop/epiceditor'
});

var updateEditorHeight = function () {
  editorHeight = $(editor.getElement('editor').body).height();
  // +20 for padding
  $('#epiceditor').height(editorHeight + 20);
  editor.reflow();
}

editor.load(function (){
  updateEditorHeight();
});

editor.on('update', function () {
  // You should probably put a check here so it doesn't
  // run for every update, but just on update, AND if the
  // element's height is different then before.
  updateEditorHeight();
}); 
```

此外，在 CSS 中，我`overflow: hidden`在史诗编辑器的包装器中添加了一个，这样滚动条就不会随着它的增长而出现。

演示： http: [//jsbin.com/eyidey/1/](http://jsbin.com/eyidey/1/)
演示代码：http: [//jsbin.com/eyidey/1/edit](http://jsbin.com/eyidey/1/edit)

# 更新

从 EpicEditor 0.2.2 开始，自动增长是内置的。只需打开该`autogrow`选项。

# database - ER图中2个实体之间的2个关系

> ID：14542763
> 
> 赞同：10
> 
> 时间：2013-01-26T23:41:33.730
> 
> 标签：database, database-design, entity-relationship, database-schema

我正在尝试绘制描述以下内容的 ER 图：

-“部门”雇用“员工”

-一些“员工”是“特殊的”，有更多的属性

- 一些“员工”（“特殊”和非特殊）是“经理”

-“经理”管理“部门”

因此，为了传达这一点，我有：

```
Department ------(employs)------- Employee-----<--------Special
      |                             |
      |-----------(manages)---------- 
```

据我了解，我不能在 2 个实体之间建立 2 个关系。那我该如何处理这种情况呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T23:58:07.650

没有理由不能在相同的两个实体之间建立多个关系，您在这方面的理解是错误的。

当然，您必须确定这些关系捕获了不同的信息，并且您没有将单一关系的两个方面误认为是两个不同的关系。您的示例似乎很适合在两个实体之间建立两种关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T00:03:54.747

![数据库图](../Images/87e380ee290f2efca53fbb8661444924.png)

嗨，朋友看这张图，希望对你有帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-27T00:13:51.200

![图表](../Images/eda5c270718a7eb793aae8ec34064f90.png)更好的方法是在 Employee 表 IsManager 中添加一个位字段，所以如果他是经理，这意味着他是他所在部门的经理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T00:03:05.277

您的雇员和管理人员的关系将是两个链接表。例如，考虑如下表和字段：

```
Department
   DepartmentID
   DepartmentName

Employee
   EmployeeID
   EmployeeName

SpecialEmployee
   EmployeeID
   Attr1
   Attr2 
```

现在您可以继续链接员工和部门，如下所示：

```
DepartmentEmploys
     DepartmentEmploysID
     DepartmentID
     EmployeeID

ManagesDepartment
     ManagesDepartmentID    
     EmployeeID
     DepartmentID 
```

现在你们的关系不会重叠或干扰。您的图表中似乎绘制的内容是正确的。两个实体之间可以存在不止一种关系。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-07-19T05:45:16.377

应该只有一类员工如果您有多个类别的员工，那么您可以创建员工类的子类。
父母：员工
第一个孩子：特殊员工
第二个孩子：普通员工

# haskell - 测量 Tchan 长度

> ID：14542766
> 
> 赞同：0
> 
> 时间：2013-01-26T23:41:58.703
> 
> 标签：haskell, stm

我需要在 STM 中存储一些值的缓冲区。编写器线程需要监视缓冲区的大小。[我开始使用TChan](http://hackage.haskell.org/packages/archive/stm/2.1.1.2/doc/html/Control-Concurrent-STM-TChan.html)来实现这个东西，但后来我发现 API 没有提供测量通道长度的方法。作为一个固执的人，我自己实现了这个东西：

```
readTChanLength ch = do
  empty <- isEmptyTChan ch
  if empty 
    then return 0
    else do
      value <- readTChan ch
      length <- readTChanLength ch
      unGetTChan ch value
      return $ 1 + length 
```

现在一切正常，但我想知道在标准库中没有实现这样一个微不足道的事情的原因是什么，以及解决这个问题的首选方法是什么。我意识到这个算法至少有 O(n) 复杂度，但这不可能是原因，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:54:07.530

首选方法是在通道中保留一个计数器，并在写入通道时自动递增计数器，并在读取通道时递减计数器。

您的解决方案遍历通道的所有元素，这可能不适用于实际的高并发工作负载。

# python - matplotlib：出现值时绘制特殊符号

> ID：14542768
> 
> 赞同：2
> 
> 时间：2013-01-26T23:42:14.790
> 
> 标签：python, graph, matplotlib, plot

使用`matplotlib`我想绘制一个延迟列表，以便：

*   在**X 轴上**，我在列表中有延迟的位置
*   在**Y 轴上**我有延迟本身

现在，在我的列表中有一个**特殊值**“L”，我想在它出现时在 X 轴上画一个**红十字。**

我该怎么做这最后一件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:57:28.947

有许多不同的方法可以做到这一点。

首先，让我们将您的数据设为一个 numpy 数组，以便我们可以使用布尔索引。这允许更容易地将“标记”`"L"`值与数据值隔离。

理想情况下，您会将事物转换为带有“L”值的屏蔽数组（并且随处浮动，而不是混合数据类型）。不过，为了简单起见，我们在这里只使用一个对象数组，以便您可以混合字符串和浮点数。

```
import matplotlib.pyplot as plt
import numpy as np

delays = np.array([0.5, 2.3, 'L', 0.9, 'L', 2], dtype=object)
x = np.arange(delays.size)

fig, ax = plt.subplots()
ax.plot(x[delays != 'L'], delays[delays != 'L'], 'bo')

# Expand axis limits by 0.5 in all directions for easier viewing
limits = np.array(ax.axis())
ax.axis(limits + [-0.5, 0.5, -0.5, 0.5])

flag_positions = x[delays == 'L']
ax.plot(flag_positions, np.zeros_like(flag_positions), 'rx', 
        clip_on=False, mew=2)

plt.show() 
```

![在此处输入图像描述](../Images/ac6ffd1a012c229512cdad03889ccfe0.png)

但是，红色的 x 位于固定的 y 位置，如果我们平移或缩放，它们将离开 x 轴。

您可以通过使用自定义转换来解决此问题。在这种情况下，我们希望 x 坐标使用“正常”数据坐标 ( `ax.transData`)，y 坐标使用轴坐标系（例如 0-1，其中 0 是底部，1 是顶部：）`ax.transAxes`。为此，我们将使用 a `BlendedGenericTransform`，它使用两种不同的变换：一种用于 x 坐标，另一种用于 y 坐标。

因此，如果您希望 red`x`始终位于 x 轴上，而不管绘图是如何平移或缩放的，那么您可以执行以下操作：

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.transforms import BlendedGenericTransform

delays = np.array([0.5, 2.3, 'L', 0.9, 'L', 2], dtype=object)
x = np.arange(delays.size)

fig, ax = plt.subplots()
ax.plot(x[delays != 'L'], delays[delays != 'L'], 'bo')

flags = x[delays == 'L']
ax.plot(flags, np.zeros_like(flags), 'rx', clip_on=False, mew=2,
        transform=BlendedGenericTransform(ax.transData, ax.transAxes))

# Expand axis limits by 0.5 in all directions for easier viewing
limits = np.array(ax.axis())
ax.axis(limits + [-0.5, 0.5, -0.5, 0.5])

plt.show() 
```

![在此处输入图像描述](../Images/4e548cec22d69cd8c00d2d3edb34b935.png)

我们可以通过使用掩码数组让事情变得更简洁（也可以看看`pandas`）。与使用具有混合字符串和浮点值的对象数组相比，使用掩码数组（或再次使用`pandas`）是指示缺失数据的更好选择。举个例子：

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.transforms import BlendedGenericTransform

delays = [0.5, 2.3, 'L', 0.9, 'L', 2]
delays = [item if item != 'L' else np.nan for item in delays]
delays = np.ma.masked_invalid(delays)

fig, ax = plt.subplots()

ax.plot(delays, 'bo')

flags = delays.mask.nonzero()
ax.plot(flags, np.zeros_like(flags), 'rx', clip_on=False, mew=2,
        transform=BlendedGenericTransform(ax.transData, ax.transAxes))

# Expand axis limits by 0.5 in all directions for easier viewing
limits = np.array(ax.axis())
ax.axis(limits + [-0.5, 0.5, -0.5, 0.5])

plt.show() 
```

# php - Codeigniter：从视图页面重定向到另一个 URL

> ID：14542770
> 
> 赞同：2
> 
> 时间：2013-01-26T23:42:22.260
> 
> 标签：php, codeigniter

google-php-client 示例在用户单击链接时调用授权 URL。我想在没有任何用户点击的情况下加载页面时调用它。它在 google-client 示例中的实现方式：

```
$client = new Google_Client();
$client->setApplicationName('Google Contacts PHP Sample');
$client->setScopes("http://www.google.com/m8/feeds/");
$auth = $client->createAuthUrl();
print "<a class=login href='$auth'>Connect Me!</a>"; 
```

我正在尝试消除对单击`Connect Me`链接和调用 url 给出的依赖`$client->createAuthUrl()`。我是 Codeigniter 的新手，这就是为什么要在这个简单的任务上苦苦挣扎的原因。
我检查是否有以下不同的方法来调用 URL，但不确定哪种方法可以在这里工作：

1.  卷曲
2.  文件获取内容
3.  stream_context_create

我正在使用带有 XAMPP 的 php 5.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:55:23.513

对于使用 CodeIgniter 库的简单重定向，请使用以下命令：

```
$client = new Google_Client();
$client->setApplicationName('Google Contacts PHP Sample');
$client->setScopes("http://www.google.com/m8/feeds/");
$auth = $client->createAuthUrl();

$this->load->helper('url');
redirect($auth); // Returns a HTTP redirect to the client 
```

`header('Location: ... ');`当没有传递第二个参数（或作为）传递时，这是一个包装器`'location'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:49:33.147

[只需使用来自url helper](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)或替代方法的重定向：

```
echo '<script>window.location = "'.$your_location.'"</script>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:49:09.810

使用php函数！

```
header('Location: $auth', TRUE, 301); 
```

由于我们正在讨论 Codeigniter，因此使用内置的**redirect()会*****更合适***

 **```
 //loading the helper
 $this->load->helper('url');
 redirect($auth); 
```

更多阅读 Codeigniter [URL Helper](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)**

# java - 所有应用程序活动都无法加载 android

> ID：14542771
> 
> 赞同：0
> 
> 时间：2013-01-26T23:42:23.367
> 
> 标签：java, android, listview

我正在创建一个 android 应用程序抽屉，但是当我调用活动时它失败了。似乎第 39 行有问题。它看起来像 NullPointerException。请你帮助我好吗？

Java代码：

```
package com.mysoftware.mysoftwareos.mobile;

import java.util.ArrayList;

import android.app.ListActivity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class AllAppsActivity extends ListActivity {
LinearLayout appsLinearLayout;
ListView list;
Intent intent;
private ArrayList<ResolveInfo> mApplicationList;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.allapps_screen);
    //Import views
    appsLinearLayout = (LinearLayout)findViewById(R.id.appsLinearLayout);

    //Set wallpaper
    appsLinearLayout.setBackgroundResource(R.drawable.images);

    //Load all apps
    final PackageManager pm = this.getPackageManager();

    final ArrayList<ResolveInfo> list =
            (ArrayList<ResolveInfo>) pm.queryIntentActivities(intent, 
                    PackageManager.PERMISSION_GRANTED);
    for (ResolveInfo rInfo : list)
    {

        Log.i("TAG", ": Installed Applications " + rInfo.activityInfo.
                applicationInfo.loadLabel(pm).toString());
    }

    final ArrayAdapter<ResolveInfo> adapter = 
        new ArrayAdapter<ResolveInfo>(this, android.R.layout.simple_list_item_1, list)
        {
            @Override
            public View getView(int position, View convertView, ViewGroup parent)
            {
                convertView = super.getView(position, convertView, parent);
                final String text = list.get(position).activityInfo.
                    applicationInfo.loadLabel(pm).toString();
                ((TextView)convertView).setText(text);
                return convertView;
            }
        };
    setListAdapter(adapter);
}
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    final Intent intent = new Intent(Intent.ACTION_MAIN);
    final ActivityInfo info = mApplicationList.get(position).activityInfo;
    intent.setClassName(info.packageName, info.name);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
    startActivity(intent);
}
} 
```

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/appsLinearLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Apps"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="35dp" />

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

</ListView>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="35dp"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ImageView03"
        android:layout_width="match_parent"
        android:layout_height="13dp"
        android:scaleType="fitXY"
        android:src="@drawable/seperator" />
</LinearLayout>

</LinearLayout> 
```

日志猫：

```
01-27 01:35:24.610: E/AndroidRuntime(2150): FATAL EXCEPTION: main
01-27 01:35:24.610: E/AndroidRuntime(2150): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mysoftware.mysoftwareos.mobile/com.mysoftware.mysoftwareos.mobile.AllAppsActivity}: java.lang.NullPointerException
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at  android.app.ActivityThread.access$600(ActivityThread.java:127)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.os.Looper.loop(Looper.java:137)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.ActivityThread.main(ActivityThread.java:4499)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at java.lang.reflect.Method.invokeNative(Native Method)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at java.lang.reflect.Method.invoke(Method.java:511)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at dalvik.system.NativeStart.main(Native Method)
01-27 01:35:24.610: E/AndroidRuntime(2150): Caused by: java.lang.NullPointerException
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.ApplicationPackageManager.queryIntentActivities(ApplicationPackageManager.java:440)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at com.mysoftware.mysoftwareos.mobile.AllAppsActivity.onCreate(AllAppsActivity.java:39)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.Activity.performCreate(Activity.java:4637)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1051)
01-27 01:35:24.610: E/AndroidRuntime(2150):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
01-27 01:35:24.610: E/AndroidRuntime(2150):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:48:16.447

据我所知，从这里：

```
final ArrayList<ResolveInfo> list =
            (ArrayList<ResolveInfo>) pm.queryIntentActivities(intent, 
                    PackageManager.PERMISSION_GRANTED); 
```

`intent`仍然为空，您还没有创建意图对象。

我不确定您要匹配的 Intent 是什么，但您仍然需要`new`在使用它之前使用关键字对其进行实例化。

例如

```
intent = new Intent (Intent.ACTION_MAIN); 
```

**同样**来自同一个调用，您正在隐藏全局变量`list`。要么考虑取出

```
final ArrayList<ResolveInfo> 
```

因此您正在使用全局`list` **或**删除该全局引用。

继续前进，我不认为[这个方法](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)`PackageManager.PERMISSION_GRANTED`是一个有效的标志，因为这似乎是一个结果常数。

最后：`mApplicationList`也没有实例化，但是您尝试从中读取。现在这可能设置在其他地方，我们没有完整的代码。这只会影响对列表项的单击。

# svg - inkscape 插件实时编辑 svg 代码

> ID：14542775
> 
> 赞同：21
> 
> 时间：2013-01-26T23:42:59.857
> 
> 标签：svg, vector-graphics, inkscape

我正在寻找一个用于inkscape（或任何基于矢量的编辑器）的插件，以查看一个窗口，该窗口旁边的代码带有SVG的图形对象。两个窗口都是动态的，这意味着如果您在图形视图中更改某些内容，它会自动更新代码，而更改代码将自动更新图形对象。如果选择一个对象会突出显示相关代码，那就太好了。

我看过这里但没有看到这样的东西：[http ://wiki.inkscape.org/wiki/index.php/Extension_repository](http://wiki.inkscape.org/wiki/index.php/Extension_repository)

是否存在这样的事情，或者其他人会对这样的事情感兴趣吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-27T16:59:51.447

在 inkscape 的编辑菜单中找到的 XML 编辑器有什么问题？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-03T21:13:09.757

您可以使用[Notepad++](https://notepad-plus-plus.org/download/)之类的文本编辑器打开 svg 文件。svg 只是一组关于如何绘制矢量线的说明，文件是基于文本的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-06T07:36:40.997

由于 Inkscape 仍然不支持这一点，并且假设您正在手动编辑“svg”文件以包含在网站上，您最好使用像[CodePen](https://codepen.io/)这样的服务。

虽然它确实需要互联网连接，但它也满足您在文件更新时查看文件的要求。可以在[此处找到有关手动编辑 SVG 的教程。](http://svgpocketguide.com/book/)

# iphone - 制作 UIImage 的副本

> ID：14542776
> 
> 赞同：2
> 
> 时间：2013-01-26T23:43:04.943
> 
> 标签：iphone, ios, uiimage, copy

我目前正在使用我在[在线教程](http://www.techotopia.com/index.php/An_Example_iOS_6_iPhone_Camera_Application)中找到的代码让 iPhone 用户从他们的相机胶卷中选择一张图片。将图像设置为`UIImageView`工作正常，但随后我尝试在图像上调用一个函数（每次移动滑块时）。事实证明，操作系统没有保留图像，所以当我尝试访问它（或我创建的缓存变量）时，它不起作用（因为地址被设置为`0x0000000`）。

如果`UIImage`符合`NSCopying`，这将是简单的。但是，事实并非如此。那么，如何复制图像以使操作系统不会删除它？

### 可能的重复

*   [如何制作从 UIImagePickerController 返回的 UIImage 的精确副本？](https://stackoverflow.com/questions/3867980/how-do-i-make-an-exact-copy-of-a-uiimage-returned-from-a-uiimagepickercontroller)
*   [制作 UIImage 的深拷贝](https://stackoverflow.com/questions/4002040/making-deep-copy-of-uiimage)

编辑：滑块在更改时调用此函数：

```
- (IBAction)samplingSliderChanged:(id)sender {
    NSLog(@"%@", self.imageStay);
    float sample = self.samplingSlider.value * 0.6 + 0.2;
    self.samplingRateText.text =  [NSString stringWithFormat:@"%.0f%%", sample*100];
    //self.imageView.image = [self.brain sampleImage:self.imageStay atRate:sample];
    self.imageView.image = [self.brain sampleImage:self.imageStay.copy atRate:sample];
    NSLog(@"self.imageStay: %@, self.imageStay.copy: %@", self.imageStay, self.imageStay.copy);
} 
```

第一次移动滑块时，我`self.imageStay`的（缓存变量）的地址为`0x0000`.

我的显示相机胶卷功能如下：

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = info[UIImagePickerControllerMediaType];
    UIImage * image;

    [self dismissViewControllerAnimated:YES completion:nil];

    image = info[UIImagePickerControllerOriginalImage];
    image = [self imageWithImage:image scaledToSize:CGSizeMake(256, 256)];
    self.imageView.image = image;

    if (_newMedia)
        UIImageWriteToSavedPhotosAlbum(image,
                                       self,
                                       @selector(image:finishedSavingWithError:contextInfo:),
                                       nil);
    self.imageView.image = image;
    self.imageStay = image

} 
```

在这里，缓存变量与 具有相同的内存地址`image`，我猜这稍后会被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:06:57.617

你不应该担心 NSCopying，或者复制 UIImage，这不是你的问题。您正在失去对 imageView 中图像的引用。操作系统*会*保留图像，否则它会从您的 imageView 中消失。我希望您只是没有正确引用它。也许您应该说明“缓存变量”的含义...

在任何情况下，获取当前在 imageView 中显示的图像的可靠方法是从 imageView 的 image 属性中获取它，如`self.imageView.image`.

*更新*

如果`self.imageView.image`可能会受到过滤，并且您还需要保留对原始图像的引用（例如在 self.imageStay 中），您应该将 imageStay 属性声明为

```
@property (nonatomic, strong) UIImage* imageStay; 
```

如果您已正确执行此操作，并且在 self.imageStay 中仍然有一个 nil 引用，请在调试器中单步执行您的代码以查看这里发生了什么：

```
 self.imageView.image = image;

    if (_newMedia)
        UIImageWriteToSavedPhotosAlbum(image,
                                   self,
                                   @selector(image:finishedSavingWithError:contextInfo:),
                                   nil);
    self.imageView.image = image;
    self.imageStay = image 
```

`self.imageStay`现在`self.imageView.image`应该都引用同一个对象。顺便说一句，你在`self.imageView.image = image`这里的第二次分配是多余的。

然后，`- (IBAction)samplingSliderChanged:(id)sender`您应该会发现这些引用仍然存在。

如果您已将您声明`@property imageStay`为弱引用，则可能会导致您的问题。应该是`strong`确保它持续存在。

# ruby-on-rails - 说到中间件，config.ru 和 application.rb 有什么区别？

> ID：14542778
> 
> 赞同：2
> 
> 时间：2013-01-26T23:43:08.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rack, middleware

我是否正确理解`application.rb`在整个 Rails 堆栈中运行中间件，同时在 Rails 堆栈中放置一些东西`config.ru`？

这意味着如果我说例如想要访问与我的 Rails 应用程序相同的会话和其他功能，我应该将我的中间件放入`application.rb`? 但是，如果我所做的不一定依赖于 Rails，它可能会进入`config.ru`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:38:59.647

我不是 Rails/Rack 专家，但我编写了一些机架应用程序和中间件。所以我会尽力解决这个问题。

这里有两个独立的过程，初始化和运行时执行。`config.ru`在初始化过程中，任何 Rack 兼容的服务器都会默认以您的文件启动。在这种情况下，该`run YourApp::Application`行之前的任何内容都无法访问文件中未明确包含的任何内容`config.ru`。所以`use MyMiddleware something: MyRailsModel.first`行不通。如果您要在or中执行相同的操作，`application.rb`或者您将处于 Rails 初始化过程的中间，并且可以访问已经初始化的任何内容，这可能是您需要的 Rails 核心中的任何内容。`environment.rb``config/initializers/*.rb`

但这只是初始化，所以它几乎只适用于您要发送到中间件的任何配置参数。在运行时，Rails 已经完全初始化，您应该可以访问任何 Rails 类、模块等。但是您绝对应该运行`rake middleware`并查看堆栈，看看您自己的中间件与其他中间件的关系以及应用程序本身。Rails 不仅仅是实际的应用程序，它还将大量中间件注入堆栈。并且取决于您的中间件相对于堆栈中其他中间件的位置会影响请求的状态。

具体到会话，最近的 Rails 版本使用 Rack 会话，所以从 Rack 访问会话应该没有任何问题。

我知道这可能不像您想要的那样简单或明确的答案，但希望它有所帮助。机架和中间件一开始看起来很复杂，但是当你最终把它们的工作原理放在一起时，发现幕后并没有太多神奇的东西，它最大的优点就是它的简单性，它变得更容易理解.

# ruby-on-rails - 在 Rails 中使用 Mongoid 更新记录

> ID：14542782
> 
> 赞同：0
> 
> 时间：2013-01-26T23:43:12.137
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在从 rails 控制台对此进行测试：

```
Credential.last.token => nil
Credential.last.update_attribute :token, '123'   => true
Credential.last.token => nil 
```

这是我的课：

```
class Credential
  include Mongoid::Document
  include Mongoid::Timestamps

  field :_id,              type: String
  field :user_id,          type: Integer
  field :code,             type: String
  field :provider,         type: String
  field :token,            type: String

end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:14:14.277

如果您启用了身份映射，则需要将其包装在

```
Mongoid.unit_of_work { Credential.last.token } 
```

Mongoid 缓存查询。对于 Web 请求来说这不是问题，但是在控制台中您不会看到更改，除非您在工作单元块中执行此操作，或者重新启动控制台（不仅仅是重新加载）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:52:23.347

我不得不把

```
attr_accessor :token, ... 
```

# javascript - 用于确定输入日期是今天还是以后的逻辑

> ID：14542791
> 
> 赞同：0
> 
> 时间：2013-01-26T23:44:51.020
> 
> 标签：javascript, date, if-statement, logic

我的函数每 500 毫秒循环一次，并收集日期信息：

```
var mlptoday = {};

var timer = setTimeout(today,500);

function today(){
    var d = new Date()
    mlptoday.date = checkTime(d.getDate()); //output: "27"
    mlptoday.year = d.getFullYear(); //output: "2013"
    mlptoday.month = checkTime(d.getMonth()+1); //output: "01"
}

function checkTime(i) { if (i<10){i="0" + i} return i } 
```

在另一个函数中，我想检查用户输入的日期是同一天还是在给定日期之后。

示例输入可能是：`2013.01.27`.

我使用这段代码来实现我想要的：

```
var remTime = "2013.01.27"; //user input
var remTimeArray = remTime.split('.') //output: ["2013","01","27"]
if (
    !(remTimeArray[0] >= parent.mlptoday.year &&
    remTimeArray[1] >= parent.mlptoday.month) ||
    !((remTimeArray[1] == parent.mlptoday.month) ? Boolean(remTimeArray[2]*1 >= parent.mlptoday.date) : true)
){
    //the input date is in the past
} 
```

正如您可能猜到的那样，这不起作用。条件语句似乎让我失望了，因为如果我`Boolean(...)`用反转`!(...)`，它永远不会触发错误，否则它总是会。

这是一个 jsFiddle，它应该在哪里工作：http: [//jsfiddle.net/DJDavid98/Cy6Ms/3/](http://jsfiddle.net/DJDavid98/Cy6Ms/3/)

我需要一种更好的方法来做到这一点，而且我不想使用任何日期选择器插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:15:59.503

我会将日期作为整数进行比较以避免复杂的逻辑。

```
var todayConcat = "" + parent.mlptoday.year + parent.mlptoday.month + parent.mlptoday.date;
var remTimeConcat = remTime.replace(/\./g, "");
if (remTimeConcat < todayConcat) {
  //the input time is in the past
} 
```

只要确保日期和月份总是有前导零。

# regex - C# 正则表达式匹配 + 下 n 个字符

> ID：14542794
> 
> 赞同：1
> 
> 时间：2013-01-26T23:44:56.487
> 
> 标签：regex

我是 Regex 的新手，我需要从网站解析源代码。谁能告诉我匹配一个单词后跟字符串中接下来的 n 个字符的语法是什么。

假设我想匹配单词“country”，然后是字符串中的下 15 个字符。

如果字符串是 "...<tr class="hover"><td>country</td><td>RO</td></t......" 我需要得到 "country</ td><td>RO" ，我可以像这样处理字符串，理想情况下只有“country RO”，但我不想要求太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:47:50.017

根据您的正则表达式引擎的风格：

```
"country.{15}" 
```

应该完全匹配“国家”，后跟 15 个任意字符。

值得注意的是，这是完全匹配的。如果单词“country”后面没有正好 15 个字符，则此匹配将失败。这对你来说可能是个问题。

```
"country.{1,15}" 
```

这将匹配“国家”后跟任何字符（最多 15 个）。同样，这也可能是有问题的，具体取决于您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:50:25.380

就像是：`(country)<\/td><td>(\.\.)`

使用 $1 $2 作为您的输出应该可以满足您的需求。

解释：

1.  将 () 括号放在某物周围可以让您用 $1 等回溯引用它。
2.  否则，您可以匹配精确的字符。
3.  注意用反斜杠转义特殊的正则表达式字符，如 /
4.  括号中的第二个匹配只是匹配接下来的两个字符，无论它们是什么。如果你有一个子集，这些可以是（即[A-Za-z]），最好使用它

有了这个假设，我会使用类似的东西：`(country)<\/td><td>([A-za-z]{2})`

也有助于找到一个好的参考：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# python - 更新字典对象中的值

> ID：14542795
> 
> 赞同：1
> 
> 时间：2013-01-26T23:45:05.710
> 
> 标签：python, dictionary

我的程序有一个`class Words`其中一个`defaultdict(int)`命名`t_e_f`的对象被创建为一个对象和一个函数，该函数`main()`包含一个指向一个函数的指针，该函数使用字典't_e_f'的值来计算其他计算。't_e_f' 是一个字典，键为单词元组，值为浮点数。我的程序如下所示：

```
class Words:
     def __init__(init):
       self.t_e_f=Words.set_t_e_f(self)
     def set_t_e_f(self):
        raw_text_e=open_file('toyen')
        raw_text_f=open_file('toyde')

        tokens_e=raw_text_e.split()
        tokens_f=raw_text_f.split()+['NULL'] 

        tef_dict=collections.defaultdict(int)           
        for word_e in tokens_e_set:
            for word_f in tokens_f_set:
                tef_dict[(word_e,word_f)]=1/len(tokens_e_set)
        return tef_dict

     def get_t_e_f(self):
        return self.t_e_f
def main():
     words=Words()
     t_e_f=words.get_t_e_f()
     s_total_e=normalization(t_e_f) 
```

然后我有一个`normalization`函数，它接受`t_e_f`并使用它来计算在规范化函数中创建的另一个字典的值的计算，`s_total_e`.

```
def normalization(t_e_f):
    s_total_e=collections.defaultdict(int)

    words_sent_e=['the','big','book']
    words_sent_de=['das','grosse','buch']
    for item in words_sent_e:
         s_total_e[item]
    for item in words_sent_e:
        for item_2 in words_sent_de:
             s_total_e[item]+=t_e_f[(item,item_2)] 
```

问题是，当`t_e_f`传递给规范化时，所有值都设置为 0，因此会丢失创建 words 对象时设置的初始值。我想知道发生了什么以及如何解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:22:24.267

该`tef_dict`变量没有被保存到实例中并且没有被返回。添加一行到`set_t_e_f()`：

```
return tef_dict 
```

另请注意，即使您仅查找或检查丢失的键， *defaultdict也会自动添加零条目。*

改用你可能会更好[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)。与 defaultdict 不同，它会为丢失的键返回零，但不会将它们添加到底层字典中。

# migration - EF5 迁移错误

> ID：14542797
> 
> 赞同：0
> 
> 时间：2013-01-26T23:45:55.050
> 
> 标签：migration, entity-framework-5

当我**尝试**

```
Update-Database 
```

**无法更新数据库以匹配当前模型，因为存在待处理的更改并且自动迁移已禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。您可以使用 Add-Migration 命令将挂起的模型更改写入基于代码的迁移。**

在 __MigrationHistory 表中，我只看到一个迁移，它是昨天成功完成的。

“将挂起的模型更改写入基于代码的迁移”是什么意思，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:36:10.217

它告诉您您已经对模型（即您的 .NET 类）进行了一些更改，这些更改尚未反映在基于代码的迁移类中。

执行“添加迁移”将实现“将待处理的模型更改写入基于代码的迁移”的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:47:41.653

据我了解，某些更改（例如列重命名）需要代码迁移。如果是这种情况，您可能需要先添加迁移才能删除这些更改。

我不确定这是否会禁用自动迁移，但值得一试。反复试验是我理解事物的最佳工具。:)

# javascript - 无法使用鼠标滚轮 js 阻止滚动父级

> ID：14542802
> 
> 赞同：0
> 
> 时间：2013-01-26T23:46:09.620
> 
> 标签：javascript, jquery, html, scroll, mousewheel

我试图阻止在最新的 Google Chrome 中使用鼠标滚轮进行父级滚动，但它不起作用。所以我需要对代码进行一些解释。

```
$(function() {

var toolbox = $('#68').find('.medium-folder-body'),

//The medium-folder-body height - 500px here
height = toolbox.height(),

//scrollHeight 693px (I got the height but don't understand what is that for)
//what is .get(0) ?
scrollHeight = toolbox.get(0).scrollHeight;

toolbox.bind('mousewheel', function(e, d) {

//This is js question which I don't understand often - What is 'this'?
//Second question. What is d?
    if((this.scrollTop === (scrollHeight - height) && d < 0) || (this.scrollTop === 0 && d > 0)) {
      alert(this.scrollTop);
    }
  });

}); 
```

html相当混乱。我在这里简单

```
<div class="folder">
   <div class="header"></div>
   <div class="medium-folder-body">
     <ul class="photo-lists></ul>
   </div>
   <div class="footer"></div>
</div> 
```

文件夹主体 css`height:500px overflow-y:scroll`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:22:20.270

您不包括处理鼠标滚轮滚动方向数据的附加插件：

```
<script src="https://github.com/brandonaaron/jquery-mousewheel/raw/master/jquery.mousewheel.js"></script> 
```

[http://jsfiddle.net/ExplosionPIlls/ZQgfr/](http://jsfiddle.net/ExplosionPIlls/ZQgfr/)

# ember.js - Ember.js 所见即所得的内联编辑器

> ID：14542803
> 
> 赞同：4
> 
> 时间：2013-01-26T23:46:11.307
> 
> 标签：ember.js, wysiwyg

很长一段时间以来，我一直在寻找一款小巧、快速的内联编辑器。新的 ckeditor 看起来像是一个替代品，但还是太多了。我所需要的只是内联格式化、图像处理。

有谁知道与 Ember.js 完美配合的所见即所得编辑器？（我知道，所有人都这样做，但我真的是说一起工作很棒）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-21T16:11:40.707

我刚刚发表了一篇关于将 Summernote 与 Ember.js 结合使用的文章，您可以在此处查看[http://hbrysiewicz.github.io/2014-04-18-summernote-ember-wysiwyg.html](http://hbrysiewicz.github.io/2014-04-18-summernote-ember-wysiwyg.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T13:50:58.030

也许这是一个选择：

用于[ember](https://github.com/pjlammertyn/ember-bootstrap/blob/master/packages/ember-bootstrap/lib/views/wysihtml5.js)[的 bootstrap-wysihtml5](http://jhollingworth.github.com/bootstrap-wysihtml5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T06:17:53.363

另一个不错的选择是一个[名为 editable 的 jQuery 插件](http://plugins.jquery.com/editable/)。我在我的项目中使用它，它似乎与 Ember 配合得很好——到目前为止没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:56:58.680

也许比玩新的 HTML5 contenteditable 标签？

或者开始编码并自己实现一些东西，比如[Create.js](http://createjs.org/)，但使用 ember 而不是下划线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-16T11:13:51.770

[TinyEditor](https://github.com/woody180/tinyeditor)是一个很酷的内联编辑解决方案。它基本上是一个带有 elFinder 文件管理器的 tinyMCE 编辑器，仅封装在一个 - tinyeditor.js 文件中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-25T22:23:29.887

纯 ember.js 所见即所得组件：http: [//indexiatech.github.io/ember-components/#/component/component.wysiwyg/simple](http://indexiatech.github.io/ember-components/#/component/component.wysiwyg/simple)

# javascript - 您将如何仅使用 Javascript（无 css）创建从黑色到白色的渐变？

> ID：14542812
> 
> 赞同：0
> 
> 时间：2013-01-26T23:47:20.783
> 
> 标签：javascript, gradient

有什么帮助吗？我是 Javascript 新手。这只是我在网上看到的一个有趣的问题，我很好奇可能的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:51:09.997

黑色是十六进制值#000000，白色是#FFFFFF，为了方便起见，我们可以用十进制值将其表示为 RGB (0,0,0) 和 RGB (255,255,255)。

然后，您可以使用多种方法在 RG 和 B 之间以相等的量改变颜色值，从而创建一系列灰度颜色。

您可以在画布上执行此操作，甚至可以为每个像素使用一个 div，或者如果 CSS 不是一个选项，您可以只使用图像。每个像素使用 div 是一种选择，但在我看来真的不是一个很好的选择。

伪代码：

```
for i = 0 to 255 {
    create div 1/255th of the height of the container and set its background colour to RGB(i,i,i)
} 
```

这样做的问题是您仍然必须使用 CSS，因为没有 DIV 样式就无法完成。

完全不使用 CSS 的唯一可能方法是使用图像。如果您想使用图像动态创建渐变，您甚至可以为每种灰度颜色设置图像并在 img 标签中使用这些图像。同样，您将无法使用背景图像等，因为这也是 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:06:42.150

使用示例[`canvas`](https://developer.mozilla.org/en-US/docs/HTML/Canvas)：

```
var
  canvas = document.getElementById('gradient'),
  context = canvas.getContext('2d'),
  gradient = context.createLinearGradient(0, 0, 0, canvas.height);

gradient.addColorStop(0, '#ffffff');
gradient.addColorStop(1, '#000000');  

context.fillStyle = gradient;
context.fillRect(0, 0, canvas.width, canvas.height); 
```

（[演示](http://jsfiddle.net/UYxs7/)）

或者通过用元素填充 DOM：http: [//jsfiddle.net/UYxs7/1](http://jsfiddle.net/UYxs7/1)（技术上这是 CSS）

# c++ - 从 LPTSTR 到 tstring 的转换会导致运行时错误

> ID：14542813
> 
> 赞同：0
> 
> 时间：2013-01-26T23:47:27.147
> 
> 标签：c++, winapi, unicode

我正在尝试将 LPTSTR 变量转换为 tstring（即，unicode 应用程序中的 wstring 和 ANSI 中的字符串）。

**如何执行此转换？**

我的代码尝试执行转换，但它导致错误：“调试断言失败！表达式：无效的空指针”：

```
#ifdef UNICODE  
#define tstring std::wstring  
#else  
#define tstring std::string  
#endif 

tstring TVManager::getDevicePropertyTEST(HDEVINFO hDevInfo, SP_DEVINFO_DATA deviceInfoData, DWORD flag)
{
    DWORD dataT      = 0;
    DWORD buffersize = 0;
    LPTSTR buffer    = NULL;

    while (!SetupDiGetDeviceRegistryProperty(hDevInfo,  &deviceInfoData, flag, &dataT,
                                             (PBYTE)buffer, buffersize, &buffersize))
    {
        if (GetLastError() == ERROR_INSUFFICIENT_BUFFER) {
            // Change the buffer size.
            if (buffer) 
                LocalFree(buffer);
            buffer = (LPTSTR)LocalAlloc(LPTR, buffersize);
        }
        else {
            // Insert error handling here.
            debug_print_ex("Else happened:", buffer);
            break;
        }
    }

    tstring propertyValue = tstring(buffer); // ERROR OCCURS HERE

    if (buffer) 
        LocalFree(buffer);

    return propertyValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:52:53.880

你将一个空指针传递给`std::basic_string<>`'s 的构造函数——不好。假设您只想要一个空字符串 if`buffer`为 null，然后执行以下操作：

```
tstring propertyValue;
if (buffer)
    propertyValue = buffer; 
```

# css - 计算 960 网格填充的响应百分比

> ID：14542816
> 
> 赞同：0
> 
> 时间：2013-01-26T23:47:53.147
> 
> 标签：css, responsive-design, percentage, 960.gs, calculated-columns

我正在构建我的第一个基于 960 网格的响应式网站，但我遇到了一些我无法解决的问题。

直奔主题，我的网格中有 2 列：

.left：总宽度 720px .right：总宽度 240px

这两个都包括左右 10px 的填充，所以在我的固定布局中，我将应用以下非常适合的内容：

```
.left {
    width: 700px;
    padding: 0 10px;
    float: left;
}
.right {
    width: 220px;
    padding: 0 10px;
    float: right;
} 
```

一切都很好，但现在我使用**目标/上下文=结果**公式来计算这个网格，所以它是响应式的。我有一个包含 90% 的 div，这是我的计算：

```
.left {
    width: 72.916667%;
    padding: 0 1.388889%;
    float: left;
}
.right {
    width: 22.916667%;
    padding: 4.166667%;
    float: right;
} 
```

我相信这些计算是正确的，但我的右手栏总是下降到下一行，因为它不适合。

任何我出错的帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:55:06.840

我通过反复试验弄明白了。

事实证明，我使用列宽作为上下文而不是包含的 div 错误地计算了填充。

修正后的计算看到所有填充的 10 / 960 = 1.041667，现在它适合了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:55:30.280

您的填充计算不正确：`10px / 960px = 1.0416667%`

基本上，您需要*除以总跨度*，例如（最初）对应于 100% 的宽度。在你的情况下，那是`960px`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:51:13.150

我认为您需要稍微减少计算，当我将这些值相加时，我得到 101.38889 ;)

# php - 遇到函数结构不遵循的问题（PHP）

> ID：14542821
> 
> 赞同：4
> 
> 时间：2013-01-26T23:48:24.697
> 
> 标签：php

```
<?php

        PickModule(); // Show the thing to pick module

        if(ModuleIsSubmitted()) // When module is picked
        {
            PickSession(); // Show the thing to pick session
            if(SessionIsSubmitted()) // When session is picked
            {
              ShowAssessment(); // Show students and questions information
              if(StudentAnswersIsSubmitted()) // Student Answers button is submitted
                {
                  StudentAnswers();
                }

            }

        }

    ?> 
```

我正在尝试遵循这样的页面结构：

*   `PickModule()`被展示

*   当用户在函数中提交时`PickModule()`，它会做一个签入`if(ModuleIsSubmitted())`，然后输出签入结果`PickSession()`

*   `PickSession()`被展示

*   当用户在函数中提交时`PickSession()`，它会做一个签入`if(SessionIsSubmitted())`，然后输出签入结果`ShowAssessment()`

*   `ShowAssessment()`被展示

*   当用户在`ShowAssessment()`函数中提交时，它会`if(StudentAnswersIsSubmitted())`检查提交按钮是否被点击，然后输出结果`StudentAnswers()`

*   `StudentAnswers()`被展示

我遇到的问题是最后两个要点，当`answerSubmit`单击按钮并在 中检查时，它不会`if(StudentAnswersIsSubmitted())`在 中显示结果`StudentAnswers()`，而是直接返回到该`PickModule()`功能。我究竟做错了什么？

下面是每个函数的代码：

这是以下代码的演示：[演示](http://helios.hud.ac.uk/u0867587/Mobile_app/Text29.php)

```
function PickModule()
{ ?>
    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
        <?php            
        $moduleactive = 1;

        $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

        //mysqli code for modules drop down menu

        ?>
        <strong>Module:</strong>
        <select name="module" id="modulesDrop">
            <option value="">Please Select</option>
            <?php
            while($sqlstmt->fetch()) { 
                $ov = $dbModuleNo . "_" . $dbModuleName . "_" . $dbModuleId; 
                if(isset($_POST["module"]) && $ov == $_POST["module"]) 
                    echo "<option selected='selected' value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL; 
                else 
                    echo "<option value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL;
             } 
            ?>
        </select>
        <br>
        <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" />
    </form>
<?php }
function ModuleIsSubmitted()
{
    if(isset($_POST["module"]) && empty($_POST["module"])) // We picked the "Please select" option
    { ?>
            Please Select a Module
    <?php 
        return false;
    }
    else if(!isset($_POST["module"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;
}
function PickSession()
{

    $dataTransfered = explode( "_" , $_POST["module"] );
    $moduleNo = $dataTransfered[0];
    $moduleName = $dataTransfered[1];
    $moduleId = $dataTransfered[2];

    //Get data from database
    $sessionquery = "
        SELECT s.SessionId, SessionName, SessionDate, SessionTime, ModuleId, SessionActive, Complete
        FROM Session s
        INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId
        WHERE
        (ModuleId = ? AND Complete = ?)
        ORDER BY SessionName 
        ";
    $complete = 1;

//mysqli code for assessments drop down menu  

    ?>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
        <input type="hidden" name="module" value="<?php echo $_POST['module']; ?>">
        <p>
            <strong>Selected Module: </strong><?php echo $moduleNo ." - ". $moduleName; ?> 
        </p>
    <?php if ($sessionnum == 0 ){ ?>
        <div class="red">
            Sorry, You have No Assessments under this Module
        </div>
    <?php } else { ?>
           <p>
        <strong>Asessments:</strong>
        <select name="session" id="sessionsDrop">
            <option value="">Please Select</option>
            <?php
                while ( $sessionqrystmt->fetch() ) {
                    $sv = $dbSessionId;
                    if($dbSessionActive == 0){
                        $class = 'red';
                    }else{
                        $class = 'green';   
                    }
                    if(isset($_POST["session"]) && $sv == $_POST["session"]) 
                        echo "<option selected='selected' value='$sv' class='$class'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                    else
                        echo "<option value='$sv' class='$class'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                }
            ?>
        </select>
        </p>
        <input id="sessionSubmit" type="submit" value="Submit Assessments" name="sessionSubmit" />
    </form>
<?php
}
}
function SessionIsSubmitted()
{
        if(isset($_POST["session"]) && empty($_POST["session"])) // We picked the "Please select" option
        { ?>
            <div class="red">
                Please Select an Assessment
            </div>
        <?php 
            return false;
        }
    else if(!isset($_POST["session"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;

}

function ShowAssessment()
{   

$studentactive = 1;

$currentstudentqry = "
SELECT
st.StudentId, st.StudentAlias, st.StudentForename, st.StudentSurname
FROM
Student_Session ss 
INNER JOIN
Student st ON ss.StudentId = st.StudentId
WHERE
(ss.SessionId = ? AND st.Active = ?)
ORDER BY st.StudentAlias
";

//mysqli code for students drop down menu

if($studentnum == 0){ ?>

<div class="red">
There are no Students who have currently taken this Assessment
</div>
<?php } else { 

$questionsqry = "
SELECT
QuestionId, QuestionNo
FROM
Question
WHERE
(SessionId = ?)
ORDER BY QuestionNo
";

//mysqli code for questions drop down menu

        ?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">         
<p>
<input type="text" name="session" value="<?php echo $_POST['session']; ?>">
<strong>Student:</strong>
<select name="student" id="studentsDrop">
<option value="All">All</option>
<?php
while ( $currentstudentstmt->fetch() ) {
$stu = $dbStudentId;
if(isset($_POST["student"]) && $stu == $_POST["student"]) 
    echo "<option selected='selected' value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
else
    echo "<option value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
}
?>
</select>
</p>

<p>
<strong>Question:</strong>
<select name="question" id="questionsDrop">
<option value="All">All</option>
<?php
while ( $questionsstmt->fetch() ) {
$ques = $dbQuestionId;
if(isset($_POST["question"]) && $ques == $_POST["question"]) 
    echo "<option selected='selected' value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
else
    echo "<option value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
}
?>
</select>
</p>

<input id="answerSubmit" type="submit" value="Get Student's Answers" name="answerSubmit" />
</form>

<?php
}
}

function StudentAnswersIsSubmitted()
{

if(!isset($_POST["answerSubmit"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;

}

function StudentAnswers()
{

echo "student answers";

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:25:19.987

我想我在这里看到了错误，在`PickSession`函数中你有这行代码，在表单中，

```
<input type="hidden" name="module" value="<?php echo $_POST['module']; ?>"> 
```

这会将指定的模块重新发布回脚本，您在`ShowAssessment`函数下缺少这一行，因此当用户提交“获取学生答案”表单时，数据不会发布到表单中。请注意，您还必须在表单中重新发布会话变量，正如我看到的那样，但我假设您希望将其设置为隐藏字段，

```
function ShowAssessment()
{
    //Sql...

     //Line 169 of bottom code sample
     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">         
     <p>
        <input type="hidden" name="module" value="<?php echo $_POST['module']; ?>">
        //type="hidden" not "text"    
        <input type="hidden" name="session" value="<?php echo $_POST['session']; ?>">

        //Rest of code...
} 
```

我相信添加它会修复您的代码。请注意，您必须*不断地重新发布所有先前提交的数据*以维护此代码结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T05:26:20.810

我不确定提交按钮是否可以这样工作。

此外，如果您希望它发送 POST 变量，您需要在表单中有 method="POST"，您有 post=""，AFAIK 不会做任何事情。

尝试这个：

```
function ShowAssessment()
{   

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="POST">
<input name="answerSubmit" type="hidden" value="1" />
<input id="answerSubmit" type="submit" value="Get Student's Answers" />
</form>

<?php
} 
```

# php - 成功提交时清除表单输入而不是错误

> ID：14542823
> 
> 赞同：1
> 
> 时间：2013-01-26T23:48:32.850
> 
> 标签：php, forms, input

我正在构建（从基本教程）注册页面。输入包含这样的验证 -

```
if (isset($_POST['formsubmitted'])) {
$error = array();//Declare An Array to store any error message  
if (empty($_POST['name'])) {//if no name has been supplied 
    $error[] = 'Please Enter a name ';//add to array "error"
} else {
    $name = $_POST['name'];//else assign it a variable
} 
```

问题是，在任何不正确的输入之后，表单会在显示错误消息时清除其数据。为了解决这个问题，我在表单输入中实现了以下内容 -

```
value='<?php echo $_POST['name']; ?>' 
```

这意味着如果出现错误，这些字段会保留其数据。伟大的。问题是当表单成功提交后，它仍然保留了我真的不想要的数据。

是否有一种“简单”的方式，如果表单返回错误 - 数据仍然存在，如果表单提交成功 - 数据会清除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:01:29.783

对于您的每个输入，请使用数组，例如：

```
<input name="customer[name]" type="text" value="<?php echo $customer['value'] || "" ?>"/> 
```

如果没有错误，重置 $customer 数组：

```
 <?php if count($errors === 0) {
       $customer = NULL;
    } 
```

那就是如果您不想隐藏表单...

# javascript - 如何在将包含 window.onload 的脚本注入到同一页面上的 iframe 后执行该脚本

> ID：14542824
> 
> 赞同：0
> 
> 时间：2013-01-26T23:48:33.107
> 
> 标签：javascript, dom, iframe, onload

我想知道如何获取插入到 iframe 中以执行包含 window.onload 函数的脚本。因为 iframe 已经加载，所以当我插入脚本时它不会执行。我不想操纵以任何方式插入的脚本。有没有办法在不丢失新插入的脚本的情况下重新创建 iframe 的 onload 状态，或者，有没有办法将脚本保存到 iframe 的 DOM 中，以便在刷新时加载？

[您可以在http://www.fundifi.com/victor/pixel_sandbox/sandbox.html](http://www.fundifi.com/victor/pixel_sandbox/sandbox.html)看到代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:56:41.580

如果您没有任何其他脚本监听窗口的加载事件，您可以尝试重新触发加载事件：

```
$(window).trigger('load'); 
```

如果您无法从 iframe 中运行该代码，您可以尝试从父级中查找 iframe 窗口（前提是不存在跨域问题）：

```
var iframeWindow = $('iframe#my-frame').get(0).contentWindow;
$(iframeWindow).trigger('load'); 
```

# templates - 在 g++ 中编译但不是在 Visual C++ 中编译的类模板特化

> ID：14542825
> 
> 赞同：0
> 
> 时间：2013-01-26T23:48:46.820
> 
> 标签：templates, visual-c++, compiler-errors

以下在 g++ 中编译，但不在 Visual C++ (Visual Studio Express 2012) 中。为什么？

如果我要使用（例如）`foo`以外的类型进行调用，那么我希望这会中断，因为在这种情况下是没有意义的。但如果我打算只用类型调用，那么它应该可以工作。事实上，即使我根本不调用，VC++ 中的编译也会失败！`int``double``B<double>::bbb:aaa``foo``int``foo`

```
struct A {
    typedef int aaa;
};

template <typename T>
struct B {
    typedef void bbb;
};

template <>
struct B<int> {
    typedef A bbb;
};

template <typename T>
typename B<T>::bbb::aaa // line 16
foo(const T &arg) {     // line 17
    return typename B<T>::bbb::aaa();
}

int main() {
    // Compilation fails with or without the following two lines.
    //int x = 0;
    //foo(x);
} 
```

这是我收到的错误消息：

```
gcc_vs_vs.cc(16) : error C2510: 'bbb' : left of '::' must be a class/struct/union
gcc_vs_vs.cc(17) : error C2146: syntax error : missing ';' before identifier 'foo'
gcc_vs_vs.cc(17) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
gcc_vs_vs.cc(17) : error C2143: syntax error : missing ',' before '&' 
```

# javascript - 函数 setTimeout 抛出错误

> ID：14542826
> 
> 赞同：0
> 
> 时间：2013-01-26T23:48:48.537
> 
> 标签：javascript, variables, settimeout

我对 setTimeout 函数有疑问。这是代码：

```
1   var urlArray = ["pic1.gif"; "pic2.gif"]

2   function changeBackground(elementId, backgroundImage){
3       document.getElementById(elementId).style.background="url("+backgroundImage+")";
4   }

5   function mouseover_1(elementId){
6           changeBackground(elementId,urlArray[0]);
7           setTimeout("changeBackground(elementId,urlArray[1])",300);
8   } 
```

在体内：

```
<area shape="rect" coords="0,0,95,91" onMouseOver="mouseover_1('navigator_1')"> 
```

现在，Javascript 代码中的第 6 行就像一个魅力（图片改变了！），但第 7 行不起作用（图片没有改变）。这是在 Firefox 中调试的错误：

```
elementId is not defined  line: 7 
```

但是由于第 6 行有效，我真的不知道问题出在哪里。你有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T23:50:14.890

如果将字符串传递给`setTimeout`，则不会在函数的上下文中评估该字符串（因此`elementId`不存在）。

您应该改用闭包：

```
setTimeout(function()
{
    changeBackground(elementId, urlArray[1]);

}, 300); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T23:55:57.520

您可以尝试使用这种形式将参数传递给 setTimeout 函数：

```
setTimeout(changeBackground, 300, elementId, urlArray[1]); 
```

在这里你可以看到其他形式来做同样的事情：

[将参数传递给使用 setTimeout 调用的函数](http://www.makemineatriple.com/2007/10/passing-parameters-to-a-function-called-with-settimeout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T01:55:58.567

读完后： http: [//www.makemineatriple.com/2007/10/passing-parameters-to-a-function-called-with-settimeout](http://www.makemineatriple.com/2007/10/passing-parameters-to-a-function-called-with-settimeout)

...我了解到需要“parameter = null”并最终实现了一个闭包：

```
setTimeout(function(){changeBackground(elementId,urlArray[1]);
    parameter = null},300); 
```

但是函数 setTimeout() 必须始终包裹在一个 setInterval() 线程中，否则它将无法顺利运行。

# web-scraping - 如何从维基百科下载所有人物页面？

> ID：14542827
> 
> 赞同：0
> 
> 时间：2013-01-26T23:48:50.117
> 
> 标签：web-scraping, wikipedia, wikipedia-api

是否可以下载一个类别的所有维基百科页面（例如[http://en.wikipedia.org/wiki/Category:Births_by_year](http://en.wikipedia.org/wiki/Category:Births_by_year)）及其所有子类别？

问题是特定页面没有用最顶层类别标记，并且使用 Wikimedia API 的每个页面跟踪非常长。是否可以使用某些工具批量下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T20:58:36.290

不，这是不可能的，因为类别是如何制作的。你必须自己走类别。[另请参阅http://lists.wikimedia.org/pipermail/analytics/2013-December/thread.html#1368](http://lists.wikimedia.org/pipermail/analytics/2013-December/thread.html#1368)上的讨论

对于特定类别，您只需使用 Special:Export 并在其中添加类别而不是标题列表。假设您的意思是“下载”的 wikitext 导出；如果你想要 HTML，你唯一的选择是 API 中的渲染模块，或者 parsoid。

# visual-studio - 如何在 Visual Studio Express 中查看异常详细信息？

> ID：14542831
> 
> 赞同：11
> 
> 时间：2013-01-26T23:49:26.613
> 
> 标签：visual-studio, debugging, exception, visual-studio-2012, stack-trace

您如何在 VS Express 2012 中查看异常详细信息，例如消息和堆栈跟踪？我正在使用适用于 Windows Phone 的 Visual Studio Express 2012，每当调试时抛出异常时，Visual Studio 所做的只是突出显示发生异常的代码行。![问题截图](../Images/dc4aea58d5e974f1c789a95aa3533087.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-11-27T10:07:31.560

您可以按下`Break`按钮，然后查看下的异常详细信息`Locals`。在那里寻找`$exception`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T02:16:36.593

异常助手已从 Visual Studio 2012 的 Express 版本中删除。从[此处：](http://connect.microsoft.com/VisualStudio/feedback/details/762652/enable-exception-assistant-option-missing-from-vs2012-express-for-desktop)

> 您是对的，我们故意从 VS 2012 的 WDX sku 中删除了异常助手。在 2012 年，此功能需要 pro 及更高版本。您应该能够在监视窗口中查看异常信息，包括内部异常。
> 
> 我们将听取您的反馈并考虑在未来版本中将此对话框重新添加到 express sku 中，但我们目前没有在 2012 年更改此对话框的计划。
> 
> 马克·潘恩
> 
> Visual Studio 调试器 QA 主管

除非有一天有更新将其添加回来，否则您必须购买完整版的 VS 2012。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T01:08:28.780

是的，多麻烦！但幸运的是，除非在外部代码中抛出异常，否则您可以通过将有问题的代码行暂时包含在 try catch 块中，然后在 catch 中设置断点来化解这种情况：

![在此处输入图像描述](../Images/548bf8494ede38ac0a075fc0d1ead0d8.png)

# php - Foreach 有多个选择器。

> ID：14542834
> 
> 赞同：0
> 
> 时间：2013-01-26T23:50:00.987
> 
> 标签：php

我认为这个问题的答案可能很简单，但我很难过。我正在使用以下一小段代码从一些 html 中获取信息，然后将其写入数据库。（目前只是显示它）

```
foreach($html->find('div[class=posttitle front] a, div[class=copy post] a') as $a){
$articles[] = array($a->href,$a->innertext);
}
foreach($articles as $item) {
echo "<p>";
$href =  $item[0];
echo "</p><p>"; 
echo $href;
echo "</p><p>";
echo $item[2];
echo "</p>";
} 
```

代码工作正常。我得到了我需要的一切。但是由于多个选择器返回的信息是针对同一个链接的，因此对于每个单独的链接，我都会为每个选择器得到一个 $articles[0[, 和 $articles[1] ]，这很痛苦。

基本上，这两个选择器具有有关同一链接的信息。

我不知道如何问得更清楚，对不起。基本上我想要的是 $articles[0],[1],[2],[3]。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:43:16.670

由于无法使用 DOM 执行此操作，我选择了另一条路线。我在最初的示例中使用了代码，但从我正在搜索的内容中删除了 a 属性。我只抓住了两个 div 标签的内部文本。将其写入我的数据库，然后使用正则表达式获取信息要容易得多。

DOM 非常适合非凌乱的 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:54:25.340

据我了解，您希望在数组中进行记录唯一比较`href`。您只应该`href`用作数组的键：

```
foreach($html->find('div[class=posttitle front] a, div[class=copy post] a') as $a){
    $articles[$a->href] = $a->innertext;
}
foreach($articles as $href=>$innertext) {
    echo "<p>";
    echo "</p><p>"; 
    echo $href;
    echo "</p><p>";
    echo $innertext;
    echo "</p>";
} 
```

# c - 可变长度消息数据的队列缓冲区类型

> ID：14542838
> 
> 赞同：1
> 
> 时间：2013-01-26T23:50:17.573
> 
> 标签：c, data-structures

## 短篇故事

我需要将传入消息数据添加到固定长度的缓冲区。
如果缓冲区已满，则用新的替换最旧的消息数据（或缓冲区中最旧的字节）。这是某种队列。
如何实现这种队列？
程序是用 C 语言编写的，我对 C 语言知之甚少（更像是没有）。

## 很长的故事

我有一个从设备接收消息的程序。
此消息可能具有可变长度并具有关联的 Id。
目前，该程序仅保留每个 Id 收到的最新消息。
此消息由程序内部保存，仅在有配置或用户发送命令（实时）以获取给定 ID 的接收消息时才显示给用户。
现在需要保留给定 Id 的几条收到的消息（不仅仅是最后一条）并返回它们。它们不需要单独退回。它们可以在一个块中全部返回（将多个消息视为设备正在返回的一段内存数据）。
目前有一个固定长度的缓冲区来保存接收到的消息和一个变量来跟踪接收到的消息长度。
所以我正在考虑使用现有的缓冲区并继续向其中添加新消息。如果另一条消息出现并且缓冲区上没有更多空间，那么我应该覆盖最旧的消息数据。有点像排队。
尤其是实现这种队列的最后一部分是我需要更多帮助的地方。
该程序是用 C 编写的，不是我做的，而且我对 C 的了解有限（不是说不存在 :)
我真的应该先学习 C，但现在没有时间了 :) 我已经完成了 C#， Java、Javascript 等等。

对管理这个队列之王有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:06:14.723

在这种情况下，循环缓冲区会有所帮助，只需稍加修改即可在缓冲区满时踢出最旧的条目。想象一下，你有一些这样`typedef struct msg {...} msg`的数组`message[N]`，然后你管理两个索引，`int in, out`它们都初始化为 0。

虽然`out != in`您可以从该数组中读取消息。您使用某种形式`in`的. 到目前为止，这与任何其他循环缓冲区没有什么不同。`out``out = (++ out) % N;`

现在，让我们解决您在缓冲区已满的情况下替换最旧消息的问题，即`(in + 1) % N == out`当您即将执行插入时。使用循环缓冲区，这现在非常简单。为了腾出空间，`out`向前推一个，让你`in`无论如何都增加，然后你插入：

```
if (((in + 1) % N) == out)
{ 
    out = (++ out) % N;
}
in = (++ in) % N;
message[in] = incoming_msg; 
```

向前推动读者的索引`out`，允许该位置用于最新消息。

# java - 如何在 JSP 中突出显示字符串中的特定单词

> ID：14542840
> 
> 赞同：0
> 
> 时间：2013-01-26T23:50:24.877
> 
> 标签：java, html, css, string, jsp

我有一个 JSP，在文本区域中，我正在读取整个句子的字符串数组并逐行打印。不，我想以粗体和红色字体突出显示线条中的一些图案。例如，如果正在读取的行包含模式“error”（它可以是单个单词或单词的一部分，例如“initializationerror”或“”），它将以粗体和红色突出显示。该行的其余部分将按原样打印。

下面是代码片段：

```
<table border="2">
<% 
    if(session.getAttribute("Result") != null)
    {
        String Result = (String) session.getAttribute("Result");
        if(Result.length() != 0)
        {
            String[] split_EOL = Result.split("\n");
%>
            <tr align="center"> 
                <td>
                    // Text area start here 
                    <textarea rows="50" cols="100" readonly="yes">   
<%
                        for(int i = 0; i < split_EOL.length; i++)
                        {
                            out.println(split_EOL[i]);
                            out.println(" ");
                        }
%>
                    </textarea>
                 </td>
             </tr>
<%
         }
    }
%>
</table> 
```

请帮忙

我尝试了以下方法：

```
<textarea rows="50" cols="100" readonly="yes"> 
<% 
     for(int i=0;i<split_EOL.length ; i++){ 
     out.println(split_EOL[i].replaceAll("\\b\\w*"+Pattern+"\\w*\\b", "<b>$0</b>"));   
     out.println(" "); 

                                          }
%> 
</textarea> 
```

这里 Pattern = ERROR ..... 但它显示如下

```
95323:[<b>ERROR</b>] Logger not set 
```

即使我确实在 out.println 中以粗体显示了一些单词，但它没有呈现粗体标签：

```
 out.println("<b>"+Pattern+"</b>");%> 
```

仅显示

> ```
> <b>ERROR</b> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:57:18.753

您可以将模式[替换](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)`\b\w*error\w*\b`为`<span class="error-string">$0</span>`

```
out.println(split_EOL[i].replaceAll("\\b\\w*error\\w*\\b", "<span class=\"error-string\">$0</span>")); 
```

并在 CSS 中定义

```
error-string {
    color: red;
    font-weight: bold;
} 
```

如果您需要不区分大小写的搜索，您可以在模式前加上`(?i)`，请参阅[Pattern - Special 结构](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#special)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:57:43.570

```
<%if( //your condition )
  {
    out.println("<span style=\"font-weight:bold; color:red; \"> Bla Bla Bla </span>");
  }
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T09:01:47.273

最简单的方法是： string textString="这是我想突出显示单词 text";

字符串高亮= `"<mark>text</mark>";` ;

<%=textString.replaceAll("text", highlight) %>

# php - DOM而不是preg_replace？

> ID：14542842
> 
> 赞同：0
> 
> 时间：2013-01-26T23:50:34.860
> 
> 标签：php, dom, replace, preg-replace

只是尝试使用 preg_replace 删除两个元素，但无法使其始终如一地工作。我想删除一个具有匹配类的元素。我不习惯 PHP，也不知道如何使用语法字符串。我尝试自定义示例代码，但它还不起作用。

由于有人告诉我使用 DOM 而不是我完全困惑：S

```
<?php

$url = "http://competitive.euw.leagueoflegends.com/de/ladders/euw/current/ranked_team_3x3";

preg_match('#<table class="views-table cols-6"[^>]+>[\w\W]*?</table>#i', file_get_contents($url), $match);
var_dump($match);
$html = preg_replace('~<td([^>]*)(class\\s*=\\s*["\']views-field views-field-roster-json["\'])([^>]*)>(.*?)</td>#~', '', $html);
$html2 = preg_replace('~<th([^>]*)(class\\s*=\\s*["\']views-field views-field-roster-json["\'])([^>]*)>(.*?)</th>#~', '', $html);
?> 
```

# cassandra - Cassandra 读取 sliceRange 非常慢，TimedOutException

> ID：14542844
> 
> 赞同：2
> 
> 时间：2013-01-26T23:50:40.090
> 
> 标签：cassandra, pelops

卡桑德拉 1.0.12

我们有一个名为 transactionRecords 的列族，它的 rowkey 是“ApplicationName”。列族用于记录事务，名称值对如 (UUID, transInfo)。

在大约 1.5K TPS 的重负载下，1 小时后，SliceRange 查询非常慢。对于 sliceRage，我们只设置了限制，比如 10000。开始和结束都是空的。我们想用 sliceRange 读取事务信息，做一些业务逻辑，然后从 Cassandra 中删除。

我们使用 org.scale7.cassandra.pelops.Mutator API 插入 DB：Mutator.writeColumn(columnFamily, rowkey, Mutator.newColumn(uuid, string));

使用 nodetool，SliceRange 读取时延迟超过 10 秒。

但是现在，它在读取时出现 TimedOutException。

有人有类似的问题吗？如何减少延迟？我们的数据结构是否符合我们的目的？有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:18:00.523

我认为这是我的编程错误。

当我做范围扫描时，总是从头开始（我有5G MEMTable），随着DB中的条目越来越多，扫描速度下降，最后超过30秒，并导致TimedOutException。

通过从先前停止的位置（在排序键上）更改为扫描，现在对我来说效果很好。

# php - curl php很慢

> ID：14542848
> 
> 赞同：0
> 
> 时间：2013-01-26T23:51:12.130
> 
> 标签：php, facebook-graph-api, curl

我使用令牌构建以下脚本来喜欢 facebook 状态问题是执行需要花费太多时间来处理 5 个令牌需要 >= 10 秒

```
foreach ($tokens as $token) 

{           
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/post_id/like');
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,1);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.001 (windows; U; NT4.0;    en-US; rv:1.0) Gecko/25250101');
    curl_setopt($ch, CURLOPT_POSTFIELDS, array('access_token' => $token));
    curl_exec($ch);
    curl_close($ch);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:32:20.913

我让你使用 curl 多请求的函数，输入是一个带有 urls 的数组，输出是一个带有结果的数组。

对我来说很有帮助。

对于您的问题，您只需为令牌添加一个新输入并在 curl 请求中添加一个参数。

```
function multiRequest($data, $options = array()) {

      // array of curl handles
      $curly = array();
      // data to be returned
      $result = array();

      // multi handle
      $mh = curl_multi_init();

      // loop through $data and create curl handles
      // then add them to the multi-handle
      foreach ($data as $id => $d) {

        $curly[$id] = curl_init();

        $url = (is_array($d) && !empty($d['url'])) ? $d['url'] : $d;
        curl_setopt($curly[$id], CURLOPT_URL,            $url);
        curl_setopt($curly[$id], CURLOPT_HEADER,         0);
        curl_setopt($curly[$id], CURLOPT_RETURNTRANSFER, 1);

        //Set proxy type

        // post? 
        if (is_array($d)) {
          if (!empty($d['post'])) {
            curl_setopt($curly[$id], CURLOPT_POST,       1);
            curl_setopt($curly[$id], CURLOPT_POSTFIELDS, $d['post']);
          }
        }

        // extra options?
        if (!empty($options)) {
          curl_setopt_array($curly[$id], $options);
        }

        curl_multi_add_handle($mh, $curly[$id]);
      }

      // execute the handles
      $running = null;
      do {
        curl_multi_exec($mh, $running);
      } while($running > 0);

      // get content and remove handles
      foreach($curly as $id => $c) {
        $result[$id] = curl_multi_getcontent($c);
        curl_multi_remove_handle($mh, $c);
      }

      // all done
      curl_multi_close($mh);

      return $result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:06:09.673

您在每次迭代中打开和关闭 http 连接 :)

使用 curl_multi_init()：

```
$chm = curl_multi_init();// <---

foreach ($tasks as $task) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/post_id/like');
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,1);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.001 (windows; U; NT4.0;    en-US; rv:1.0) Gecko/25250101');
    curl_setopt($ch, CURLOPT_POSTFIELDS, array('access_token' => $token));
    curl_multi_add_handle($cmh, $ch);// <---
} 
```

有关 curl_multi_init() 的更多信息，您可以在[php.net上看到](http://php.net/manual/ru/function.curl-multi-init.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:04:29.800

每次您打开一个新的 curl 会话时，设置相同的数据并发送请求。通过声明不会在循环外更改的数据，以下内容可能会更快一些。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/post_id/like');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.001 (windows; U; NT4.0;    en-US; rv:1.0) Gecko/25250101');

foreach ($tokens as $token) {           
    curl_setopt($ch, CURLOPT_POSTFIELDS, array('access_token' => $token));
    curl_exec($ch);
}

curl_close($ch); 
```

# command-line - 在 Windows 与 Ubuntu 服务器中使用 pdftotext

> ID：14542850
> 
> 赞同：1
> 
> 时间：2013-01-26T23:51:24.970
> 
> 标签：command-line, ubuntu-12.04, pdftotext

在我的 Windows 7 PC 上，命令行输入“pdftotext myfile.pdf”会在与 myfile.pdf 相同的目录中创建一个 .txt 文件。但是，当我在具有相同 myfile.pdf 的 ubuntu-12.04 服务器上尝试相同的命令行输入时，我得到如下错误输出：

```
Error: May not be a PDF file (continuing anyway)
Error (2): Illegal character <21> in hex string
Error (4): Illegal character <4f> in hex string
Error (6): Illegal character <54> in hex string
Error (7): Illegal character <59> in hex string
Error (8): Illegal character <50> in hex string
Error (11): Illegal character <48> in hex string
Error (12): Illegal character <54> in hex string
Error (13): Illegal character <4d> in hex string
Error (14): Illegal character <4c> in hex string
Error (16): Illegal character <50> in hex string
Error (17): Illegal character <55> in hex string
Error (19): Illegal character <4c> in hex string
Error (20): Illegal character <49> in hex string
Error (23): Illegal character <22> in hex string
Error (24): Illegal character <2d> in hex string
Error (25): Illegal character <2f> in hex string
Error (26): Illegal character <2f> in hex string
Error (27): Illegal character <57> in hex string
Error (30): Illegal character <2f> in hex string
Error (31): Illegal character <2f> in hex string
Error (33): Illegal character <54> in hex string
Error (36): Illegal character <48> in hex string
Error (37): Illegal character <54> in hex string
Error (38): Illegal character <4d> in hex string 
```

等等...

```
Error (122): Illegal character <6c> in hex string
Error: PDF file is damaged - attempting to reconstruct xref table...
Error: Couldn't find trailer dictionary
Error: Couldn't read xref table 
```

Windows 7 pdf 实用程序包是否与 Linux（来自 Poppler）上可用的不同？否则，相同的调用应该产生相同的结果，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:07:31.993

这是因为您尝试作为输入的文件不是 PDF 文件。

它以（空格是未知字符）开头

```
 ! O TYP  HTML PU LI  "-//W  // T  HTM 
```

...可以很快（？）被解释为...

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 
```

所以它很可能是下载 PDF 时出现的错误页面。无论哪种情况，它都是 HTML 文件，而不是 PDF。

# try-catch - 返回输入索引对象的函数

> ID：14542851
> 
> 赞同：1
> 
> 时间：2013-01-26T23:51:36.873
> 
> 标签：try-catch, throw

我有一个像

```
public object getObj(int index,object[] a)
{
  if(index>a.size)
       //what to return??
  else
    return a[index-1];
 } 
```

如果索引大于大小，我应该返回什么？我不想返回 null 因为 null 可以是一个对象，我希望能够区分索引大于大小和对象本身为 null 的情况。我应该如何使用 java 错误处理程序类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:54:47.400

当有人提供负索引或超出范围的索引时，肯定是编程错误。编程错误在 Java 中通过抛出未经检查的异常（即源自 的异常`RuntimeException`）来发出信号。在这种特定情况下，您应该抛出[`IndexOutOfBoundsException`](http://docs.oracle.com/javase/6/docs/api/java/lang/IndexOutOfBoundsException.html).

# php - 如何将php打印为html文本

> ID：14542853
> 
> 赞同：-2
> 
> 时间：2013-01-26T23:52:15.877
> 
> 标签：php, html, printing

请问，如何将php打印为html文本？

例如：

我有这个 php 行

```
if(defined('LOAD_VARS') AND LOAD_VARS === TRUE) 
```

我想将其打印为 html 文本

所以输出将是

```
if(defined('LOAD_VARS') AND LOAD_VARS === TRUE) 
```

我试过这个

```
<textarea style="width:600px; height:30px;">if(defined('LOAD_VARS') AND LOAD_VARS === TRUE)</textarea> 
```

但它不起作用并显示错误

请问我该怎么做？

如何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T23:55:31.653

你的问题不是很清楚，但这里有：

在输出任何内容之前关闭 PHP 标签，或者简单地使用`print()`or `echo`。

**示例 1：**

```
<?php
print('if(defined(\'LOAD_VARS\') AND LOAD_VARS === TRUE)');
?> 
```

**示例 2**

```
<?php
// Your code that you want to be run.
?>

<pre>if(defined('LOAD_VARS') AND LOAD_VARS === TRUE)</pre> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:55:16.120

看一下[`highlight_string`](http://php.net/highlight-string)

```
$source = "if(defined('LOAD_VARS') AND LOAD_VARS === TRUE)";
echo highlight_string($source, true); 
```

# openoffice.org - 如何在 OpenOffice 单元格中添加前缀和子前缀 - 并合并到新单元格中？

> ID：14542857
> 
> 赞同：0
> 
> 时间：2013-01-26T23:52:58.403
> 
> 标签：openoffice.org, openoffice-calc

如何在单元格中添加前缀和后缀？我需要插入 30000 个数据集。有没有自动化？

`Cell A`, `Cell B`, `CellC`
`word`, `word-type`, `meanings`
`Love`, `n`,`to like or enjoy something very much`

进入

`Love (n) to like or enjoy something very much`

提前谢谢了。

最好的问候，柯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:35:35.343

柯，

我假设您已经尝试过诸如 cell 之类的东西`D1`：

```
=A1&" ("&B1&") "&C1 
```

# matlab - 如何在 MATLAB 中第一次迭代后忽略 for 循环中的部分代码？

> ID：14542858
> 
> 赞同：0
> 
> 时间：2013-01-26T23:53:04.627
> 
> 标签：matlab, loops, for-loop

我有一个似乎很简单的问题。我有一个 for 循环，我在每次迭代中调用不同的函数。如果满足特定条件，则仅需要在第一次迭代时使用其中一些函数。解决此问题的一种方法是在调用相关函数之前使用“if”语句检查条件，但我想知道是否有任何其他方法可以解决这个问题，因为我有超过 10 个具有相同情况的函数（不同的当然条件）？例如，请看下面的伪代码：

```
for Iteration < Generation
    ...
    if ('certain condition 01 holds true')
        output = function01(arguments)
    end
    ...
    ...
    if ('certain condition 02 holds true')
        output = function02(arguments)
    end
    ...    
    ...
    if ('certain condition 10 holds true')
        output = function10(arguments)
    end
    ...
 end 
```

如果我有 10000 次迭代，那么每个“if”语句都应该被评估 10000 次，这会显着增加计算时间。是否可以使用面向对象的编程和类而不是函数来使其更好并且可能更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:16:50.880

如果您总是需要检查某些条件，那么就没有办法避免它。但是，如果您知道前两个条件只能在第一个循环中出现，比如 500 个循环，那么将大循环分成两个 - 第一个包含所有 10 个条件（500 次迭代），第二个只有 8 个（总计 - 500 次迭代）。

要记住的另一件重要事情是[`elseif`](http://www.mathworks.co.uk/help/matlab/ref/elseif.html)在您的条件或[`continue`](http://www.mathworks.co.uk/help/matlab/ref/continue.html)循环中使用（前提是条件是互斥的 - 我从您的代码示例中推断出这一点）。通过这种方式，您可以确保一旦找到相关条件，其余`if`语句将不会被执行。此外，您应该在循环开始时检查最可能的情况。即，如果您知道在大多数情况下最有可能出现条件 5，则应首先检查条件 5。`if`通过这种方式，您可以减少评估语句的次数。

最后，您可以使用该[`switch`](http://www.mathworks.co.uk/help/matlab/ref/switch.html)语句 - 它比多个`elseif`'s 更具可读性，如果其中一个条件为真，则自动忽略以下条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:20:43.317

我不了解类和面向对象，但您可以将函数内部的顺序更改为如下所示：

```
...
% 'iteration' 1
if (condition1) then
    output = function1(args)
end

if (condition2) then
    output = function2(args)
end
.
.
.
for ix = 2:max
    % code inside loop
end 
```

换句话说，将仅在第一次迭代中调用的代码放在循环开始之前，然后在第二次迭代中开始。

# c++ - boost::asio::async_read_some 在父线程中运行

> ID：14542859
> 
> 赞同：0
> 
> 时间：2013-01-26T23:53:09.447
> 
> 标签：c++, boost-asio, asyncsocket

我正在编写一个高效的套接字服务器。目的是良好的整体吞吐量。我使用主线程作为监听器。它`async_accept`是一个客户端并将套接字添加到队列中。有一个调度程序线程从队列中拾取一个准备好从中读取的套接字，并将其添加到工作线程的队列之一。我保留了一个工作线程池。工作线程将执行实际的读/写。

我`async_accept`在我的听众中使用。为了找出可以读取的套接字，我在调度程序中使用了 async_read_some。这个想法可行，但有一个问题。My`io_service.run()`在 listener 中被调用，所以在 dispatcher 中的 handler `async_read_some`，实际上是在 listener 线程中运行的。

这是我的代码：

```
using boost::asio::ip::tcp;
using namespace std;

std::queue<std::shared_ptr<tcp::socket>> q_sock;
boost::mutex m_log1;
boost::condition_variable m_cond1;
boost::mutex::scoped_lock m_lock1 = boost::mutex::scoped_lock(m_log1);
sem_t _sem_sock;

enum { max_length1 = 1024 };
char data_1[max_length1];

void handle_read1(std::shared_ptr<tcp::socket> sock, const boost::system::error_code& error,
  size_t bytes_transferred)
{
    printf("handle_read1 : error : %s : %d, thread id is: %ld, pid : %d \n", error.category().name(), error.value(), (long int)syscall(SYS_gettid), getpid());

    boost::asio::write(*(sock.get()), boost::asio::buffer(data_1, bytes_transferred));
}

void sock_dispatch() {
    int v_size = 0;
    std::shared_ptr<tcp::socket> curr_sock;

    printf("sock_dispatch started. The ID of this of this thread is: %ld, pid : %d \n", (long int)syscall(SYS_gettid), getpid());

    while(1) {

        while(1) {
            sem_wait(&_sem_sock);
            v_size = q_sock.size();
            sem_post(&_sem_sock);

            if(v_size <= 0)
                m_cond1.timed_wait(m_lock1,boost::posix_time::milliseconds(5000));
            else
                break;
        }

        sem_wait(&_sem_sock);
        curr_sock = q_sock.front();
        q_sock.pop();
        sem_post(&_sem_sock);

        curr_sock->async_read_some(boost::asio::buffer(data_1, max_length1),
        boost::bind(handle_read1, curr_sock,
          boost::asio::placeholders::error,
          boost::asio::placeholders::bytes_transferred));
    }

}

class session
{
    public:
      session(boost::asio::io_service& io_service)
        : sockptr(new tcp::socket(io_service)) {}

      void start()
      {
            printf("START NEW SESSION   The ID of this of this thread is: %ld, pid : %d \n", (long int)syscall(SYS_gettid), getpid());

            sem_wait(&_sem_sock);

            q_sock.push(sockptr);

            sem_post(&_sem_sock);

            m_cond1.notify_all();
      }

      std::shared_ptr<tcp::socket> sockptr;
};

class server
{
    public:
      server(boost::asio::io_service& io_service, short port)
        : io_service_(io_service),
          acceptor_(io_service, tcp::endpoint(tcp::v4(), port))
      {
        session* new_session = new session(io_service_);
        acceptor_.async_accept(*(new_session->sockptr.get()),
            boost::bind(&server::handle_accept, this, new_session,
              boost::asio::placeholders::error));

        printf("WAITING TO ACCEPT: The ID of this of this thread is: %ld, pid : %d \n", (long int)syscall(SYS_gettid), getpid());

      }

      void handle_accept(session* new_session,
          const boost::system::error_code& error)
      {
          new_session->start();
          new_session = new session(io_service_);
          acceptor_.async_accept(*(new_session->sockptr.get()),
              boost::bind(&server::handle_accept, this, new_session,
                boost::asio::placeholders::error));
      }

    private:
      boost::asio::io_service& io_service_;
      tcp::acceptor acceptor_;
};

int main(int argc, char* argv[])
{
    sem_init(&_sem_sock, 0, 1);

    boost::asio::io_service io_service;

    using namespace std;
    server s(io_service, atoi(argv[1]));

    boost::thread t(boost::bind(sock_dispatch));

    io_service.run();

    return 0;
} 
```

此代码是从 boost::asio 示例[http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp](http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)修改而来的。客户端代码是[http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_client.cpp](http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_client.cpp)。

当客户端连接时，服务器的输出：

```
WAITING TO ACCEPT: The ID of this of this thread is: 3843, pid : 3843 
sock_dispatch started. The ID of this of this thread is: 3844, pid : 3843 
START NEW SESSION   The ID of this of this thread is: 3843, pid : 3843 
handle_read1 : error : system : 0, thread id is: 3843, pid : 3843 
```

在这种情况下，调度程序线程 id 是 3944，但 handle_read1 在线程 3843 中运行。理想情况下，handle_read1 应该在调度程序中运行，因此它不会阻塞侦听器中的接受。

知道我应该怎么做才能实现这一目标吗？或者整个事情有更好的设计:)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:55:25.400

如果您需要在特定线程中调用特定的处理程序，则使用不同的`io_service`对象。例如，`acceptor`可以用 构造`io_service1`，而套接字可以用 构造`io_service2`。然后主线程可以执行`io_service1.run()`，而线程池中的线程执行`io_service2.run()`。

话虽如此，混合异步和同步功能可能相当棘手。在我从事的大多数异步程序中，很少需要将线程专用于特定的异步链。

* * *

总的来说，我认为概念设计还不错，但我对实现有几点建议：

*   `q_sock`消费者和生产者代码是较高级别和较低级别结构的混合体。条件变量的使用有点不习惯，它引出了一个问题，即为什么要使用, 和锁`sem_t`来代替。`boost::mutex`例如，以下消费者和生产者代码：

    ```
    // Consumer
    while(1)
    {
      sem_wait(&_sem_sock);
      v_size = q_sock.size();
      sem_post(&_sem_sock);

      if (v_size <= 0)
        m_cond1.timed_wait(m_lock1, boost::posix_time::milliseconds(5000));
      else
        break;
    }
    sem_wait(&_sem_sock);
    curr_sock = q_sock.front();
    q_sock.pop();
    sem_post(&_sem_sock);

    // Producer    
    sem_wait(&_sem_sock);
    q_sock.push(sockptr);
    sem_post(&_sem_sock);
    m_cond1.notify_all(); 
    ```

    可以在不使用 的情况下重写，并且根据 Boost.Thread 的文档`sem_t`更加惯用。[`condition_variable`](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref)考虑替代方案：

    ```
    // Consumer
    boost::unique_lock<boost::mutex> lock(m_log1);
    while (q_sock.empty())
    {
      m_cond1.wait(lock);
    }
    curr_sock = q_sock.front();
    q_sock.pop();
    lock.unlock();

    // Producer
    {
      boost::lock_guard<boost::mutex> lock(m_log1);
      q_sock.push(sockptr);
    }
    m_cond1.notify_all(); 
    ```

*   目前还不清楚`session`提供什么功能。

    *   它似乎只是作为分配套接字并将其放入队列的一种手段。为什么不直接分配套接字并让调用者将其放入队列中呢？
    *   `session::sockptr`通过智能指针管理，但`session`不是。由于`session`不通过智能指针管理，内存泄漏发生在 中，因为在重新分配中丢失`server::handle_accept`了句柄。`session`

    确定`session`要提供的功能，并围绕它设计界面。

    *   如果它旨在提供封装，那么非成员函数，例如`handle_read1`，可能需要成为成员函数。
    *   如果`session`有自己的异步链，并且将自己提供给处理程序，那么考虑使用[`enable_shared_from_this`](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/enable_shared_from_this.html). Boost.Asio[教程](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime3.html)提供了一个示例用法，其中一些[示例](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/examples.html)也是如此。
*   目前，[`async_read_some`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/basic_stream_socket/async_read_some.html)不指示哪个套接字已准备好被读取。调用时`ReadHandler`，数据已被读取。

    这是 Proactor 和 Reactor 之间的根本区别。如果您需要 Reactor 样式的操作，请使用[`boost::asio::null_buffers`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/null_buffers.html). 有关更多详细信息，请参阅[此](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/overview/core/reactor.html)文档。然而，每种方法都有其后果。因此，了解这些后果以便做出最佳决策至关重要。

*   Boost.Asio 通过高级构造提供事件多路分解，`sock_dispatch`线程可能看起来不切实际。成员函数可以在`session::start`套接字上启动异步读取。这个微小的更改将消除`q_sock`示例代码中对 , 和所有同步结构的需要。

*   检查为什么必须使用同步写入。在回显客户端的情况下，如示例所示，通常可以通过控制异步链本身的流量来消除资源争用，从而使用异步写入。这允许每个连接都有自己的缓冲区，可用于读取和写入。

*   不要预先优化。由于控制流的反向，异步编程本质上更难调试。尝试对吞吐量进行预优化只会加剧复杂性问题。程序运行后，执行吞吐量测试。如果结果不符合要求，则剖析确定瓶颈。根据我的经验，大多数具有高吞吐量的服务器在受 CPU 限制之前就会受到 I/O 限制。

# facebook - 如何在 facebook 上针对非音乐内容实施“收听”操作？

> ID：14542862
> 
> 赞同：0
> 
> 时间：2013-01-26T23:53:32.413
> 
> 标签：facebook, facebook-opengraph, podcast

我正在寻找对 facebook 应用程序使用“听”操作。Facebook 似乎要求我们使用他们内置的“听”动作，这似乎只与音乐相关的对象连接……但我的内容是每周新闻播客。

这样做的最佳方法是什么？使用“歌曲”开放图形标签标记我的播客剧集对象，即使它不是音乐？这可能会在 Facebook 审核后被拒绝吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:14:00.817

内置的“music.listen”动作确实非常受限，来自[https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/#listen](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/#listen)：

> 为了访问内置的 Listen 操作，您必须与权利所有者建立适当的关系。我们正在慢慢增加可以利用内置 Listen 操作的开发人员数量。如果您有兴趣，请填写此表格并通过电子邮件发送至 musicdevelopers@fb.com。

这意味着，Facebook 正在启用 music.listens 仅为内容的权利所有者。对于播客应用程序，我认为很难证明这种权利。

你可以做什么：使用自定义动作“播放”或类似的。使用自定义动作时，请记住，从 2013 年 2 月 15 日起，您不得被动/自动发布此操作！您只能在用户明确选择这样做时发布这些操作（这意味着，自动发布所有播放的播客的应用程序可能是不可能的）。

您根本不应该做的事情：使用自定义操作“听” - 这肯定不会获得批准。

# xcode - 在 OS X 10.8.2 上编译 VLCKit

> ID：14542864
> 
> 赞同：1
> 
> 时间：2013-01-26T23:53:44.860
> 
> 标签：xcode, macos, vlc, libvlc

我正在尝试在 OS X 10.8.2 上构建 VLCKit。截至今天（2013.01.27），我已经安装了最新的 Xcode。到目前为止我做了什么：

```
git clone git://git.videolan.org/vlc-bindings/VLCKit.git
cd VLCKit
xcodebuild -alltargets -configuration Release -project VLCKit.xcodeproj ARCHS="x86_64" -sdk macosx10.8 
```

一段时间后，我收到以下错误：

```
Undefined symbols for architecture x86_64:
  "_iconv", referenced from:
      _sub_recode in libass.a(ass.o)
      _FcSfntNameTranscode in libfontconfig.a(fcfreetype.o)
  "_iconv_close", referenced from:
      _sub_recode in libass.a(ass.o)
      _FcSfntNameTranscode in libfontconfig.a(fcfreetype.o)
  "_iconv_open", referenced from:
      _sub_recode in libass.a(ass.o)
      _FcSfntNameTranscode in libfontconfig.a(fcfreetype.o)
  CCLD     libtelx_plugin.la
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[4]: *** [liblibass_plugin.la] Error 1
make[4]: *** Waiting for unfinished jobs....
make[3]: *** [all] Error 2
make[2]: *** [all-recursive] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

我错过了什么吗？如何在 10.8.2 上编译 VLCKit？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:58:48.387

尝试克隆此存储库：

```
git clone git://git.videolan.org/vlc/vlc-2.0.git 
```

然后构建：

```
cd vlc-2.0/projects/macosx/framework/
xcodebuild -target "Build Everything" -configuration Release -project VLCKit.xcodeproj ARCHS="x86_64" -sdk macosx10.6 
```

第一次不太可能工作，所以请通读这些说明 - 特别是故障排除部分

[http://wiki.videolan.org/OSXCompile](http://wiki.videolan.org/OSXCompile)

我刚刚构建了 VLCKit 2.06，在播放 UDP 流时遇到了一些问题。对我来说，解决方案暂时是在这里使用旧的稳定分支：

```
git clone git://git.videolan.org/vlc/vlc-1.1.git 
```

# python - 将 heroku django 应用程序与 ec2 postgres 数据库连接

> ID：14542866
> 
> 赞同：2
> 
> 时间：2013-01-26T23:53:50.007
> 
> 标签：python, django, heroku, amazon-ec2

我有一个在 heroku 上运行的 django 应用程序。它适用于 heroku 提供的 5 mb 数据库。

我有一个 ec2 实例，我在其中安装了 postgresql 数据库并根据以下答案[在两个不同的 EC2 实例上设置 Django 和 PostgreSQL设置了数据库](https://stackoverflow.com/questions/13424267/setting-up-django-and-postgresql-on-two-different-ec2-instances)

我在 PG 的安全组中添加了自定义 TCP 端口 5432。

要将我的 heroku 应用程序与 EC2 上的 postgresql 数据库连接，我尝试以下操作

```
heroku config:add DATABASE_URL=\
postgres://my_database_name:my_database_password@\
<Public_DNS>:<PORT>/my_user_name 
```

完成此操作后，我尝试这样做`heroku run python manage.py syncdb`，然后收到错误消息：

```
psycopg2.OperationalError: could not connect to server: Connection timed out
    Is the server running on host "......compute-1.amazonaws.com" and accepting
    TCP/IP connections on port 5432? 
```

请让我知道，出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:59:20.260

检查主机是否仍然可用。我认为这可能是问题所在。

显示什么`heroku config | grep HEROKU_POSTGRESQL`？

它是否提供与中所见相同的主机

```
"could not connect to server: Connection timed out
    Is the server running on host "......compute-1.amazonaws.com" 
```

# c# - 在 WP8 WinRT 组件中使用 Windows::UI::Xaml::Media::Imaging::WriteableBitmap 类

> ID：14542869
> 
> 赞同：0
> 
> 时间：2013-01-26T23:54:16.403
> 
> 标签：c#, windows-phone-8, c++-cx

我想将在 C++ 上编写的库移植到 WP8 并从 C# 代码中使用它。我为此创建了 WP8 WinRT 并使用 C++/CX。我需要从我的 WinRT 组件中获取位图，看起来我对 WinRT for Win8 Store App 和 WinRT for WP8 有点困惑。

我可以使用 Windows::UI::Xaml::Media::Imaging::WriteableBitmap 吗？如果是，我该如何添加对它的引用，如果没有，从 C# 代码中的 WinRT WP8 组件获取位图的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:04:01.033

Windows.UI.Xaml 命名空间不是 WinPRT（Windows Phone 运行时）的一部分。WP8 上的 WriteableBitmap 仅适用于 C#，因此您将无法共享有权访问 WriteableBitmap 的代码。实现这项工作的一种方法是让您的共享代码使用 WriteableBitmap.Pixels 数组，而不是 WriteableBitmap 本身。

# java - 将 add_jar 与 Swig 生成的 Java 绑定一起使用的正确方法是什么？

> ID：14542872
> 
> 赞同：15
> 
> 时间：2013-01-26T23:54:41.067
> 
> 标签：java, cmake, swig

我正在使用[Swig](http://www.swig.org)为 C 库生成 Java 绑定。构建系统是用[CMake](http://www.cmake.org)编写的，以实现平台中立。我希望生成一个包含 Java 绑定的 JAR 文件（即由 Swig 创建的 .java 文件编译产生的 .class 文件）。我正在尝试使用 Cmake`add_jar()`命令执行编译并生成 JAR 文件。

我的问题是 Swig 在构建时生成了一组 Java 文件，但在执行*cmake*`add_jar()`时需要一个源文件列表。我目前正在使用 UNIX 通配符（按字面意思传递给 javac 命令行）解决这个问题。

 *```
# How do I avoid the shell wildcard?
add_jar(ExampleJNI ${CMAKE_SWIG_OUTDIR}/*.java) 
```

有没有更好的办法？

我在下面包含一个完整的示例（由三个文件组成）来说明我的方法。如果您想自己尝试，请将三个文件放在一个目录中，然后调用`cmake . ; make VERBOSE=1`.

### CMakeLists.txt

```
cmake_minimum_required (VERSION 2.8)
find_package(Swig REQUIRED)
find_package(Java REQUIRED)
find_package(JNI REQUIRED)
include(UseJava)
include(UseSWIG)

project (Example)

add_library (Example example.c)

set(CMAKE_SWIG_FLAGS -package org.mycompany)
set(CMAKE_SWIG_OUTDIR ${CMAKE_CURRENT_BINARY_DIR}/src/main/java/org/mycompany)

swig_add_module(ExampleSWIG java example.i)
include_directories(${JNI_INCLUDE_DIRS})

swig_link_libraries(ExampleSWIG Example)

# How do I avoid the wildcard?
add_jar(ExampleJNI ${CMAKE_SWIG_OUTDIR}/*.java)

add_dependencies(ExampleJNI ExampleSWIG) 
```

### 例子.c

```
int foo() {
  return 0;
} 
```

### 例子.i

```
%module example

%inline %{
    extern int    foo();
%} 
```

我在用：

*   cmake 版本 2.8.10.2
*   Java版本“1.6.0_37”
*   SWIG 版本 2.0.9
*   Mac OS X 达尔文内核版本 12.2.0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-31T15:45:51.623

这篇文章很旧，但我今天遇到了同样的问题并找到了一个很好的解决方案。

我目前的方法区分**buildsystem generation time**和**build-time**。而不是使用通配符（在 Windows 上似乎不适用于 add_jar）。我使用[add_custom_command()在](http://www.cmake.org/cmake/help/v3.3/command/add_custom_command.html)**build-time**生成带有生成的 java 类的 JAR 。**我在构建系统生成时**知道这个 JAR 的名称。所以我可以使用名称作为 add_jar() 函数的 INCLUDE_JAR 参数。我将包含由 SWIG 生成的 java 文件的 JAR 称为*Native.jar*。

这是一个如何实现 CMake + Java + SWIG 的示例

首先我们需要找到必要的包：

```
FIND_PACKAGE(SWIG REQUIRED)
FIND_PACKAGE(JNI REQUIRED)
FIND_PACKAGE(Java REQUIRED)
INCLUDE(UseSWIG)
INCLUDE(UseJava) 
```

然后我们需要定义我们的 SWIG 模块：

```
SET(CMAKE_SWIG_OUTDIR "${CMAKE_CURRENT_BINARY_DIR}/java")
SET_PROPERTY(SOURCE "native-interface.i" PROPERTY CPLUSPLUS ON)
SWIG_ADD_MODULE(Native java "native-interface.i" 
    "algorithm.hpp"
    "algorithm-listener.hpp"
    "simple-methods.hpp" "simple-methods.cpp"
    )
TARGET_INCLUDE_DIRECTORIES(Native
    PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}
    PRIVATE ${JAVA_INCLUDE_PATH}
    PRIVATE ${JAVA_INCLUDE_PATH2}) 
```

如您所见，我使用*java*子目录来存储 java 文件。我还将为类文件添加一个子目录，然后注册 POST_BUILD 事件来构建*Native.jar*：

```
FILE(MAKE_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/classes")
ADD_CUSTOM_COMMAND(TARGET Native POST_BUILD
    COMMAND "${Java_JAVAC_EXECUTABLE}" -d classes java/*.java
    COMMAND "${Java_JAR_EXECUTABLE}" -cfM Native.jar -C classes .
    )
# Store Path to native JAR in variable:
SET(NATIVE_JAR "${CMAKE_CURRENT_BINARY_DIR}/Native.jar") 
```

在下一步中，我们将使用 add_jar() 函数生成一个 java 项目：

```
ADD_JAR(ConsoleApp 
    SOURCES "NativeInvoker.java"
    INCLUDE_JARS ${NATIVE_JAR})
SET(CMAKE_JAVA_COMPILE_FLAGS "-source" "1.8" "-target" "1.8") 
```

如果您为您的项目使用不同的文件夹（例如在一个子目录中有本地文件，而在另一个子目录中有 java 的东西）。您必须将 Native.dll 复制到与您的 java 应用程序相同的文件夹中，或者确保它可以被 Java 找到。要在 CMake 中执行此操作，您可以再次使用[add_custom_command()](http://www.cmake.org/cmake/help/v3.3/command/add_custom_command.html)。

```
ADD_CUSTOM_COMMAND(TARGET ConsoleApp POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_if_different $<TARGET_FILE:Native> ${CMAKE_CURRENT_BINARY_DIR}) 
```

希望这对你们很多人有帮助。

问候蒂姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T07:57:39.427

您可以尝试使用文件通配符：

```
FILE(GLOB SWIG_JAVA_FILES ${CMAKE_SWIG_OUTDIR}/*.java)
add_jar(ExampleJNI ${SWIG_JAVA_FILES}) 
```*

# delphi - 在特定 Web 服务器上将 IdHTTP1.Get 与 Delphi 和 Indy 9/10 一起使用会返回异常

> ID：14542873
> 
> 赞同：3
> 
> 时间：2013-01-26T23:54:41.567
> 
> 标签：delphi, http, indy, indy10, indy-9

我在使用 Delphi 和 Indy 9/10 从特定 Web 服务器接收 favicon.ico 时遇到问题。其他服务器工作正常。问题不在于此 Web 服务器，因为 wget 命令行实用程序可以正确获取文件。

这是 wget 的输出：

```
c:\a>wget http://perforce.eigenbase.org:8080/favicon.ico
SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc
syswgetrc = c:/progra~1/wget/etc/wgetrc
--2013-01-27 00:12:39--  http://perforce.eigenbase.org:8080/favicon.ico
Resolving perforce.eigenbase.org... 72.14.190.177
Connecting to perforce.eigenbase.org|72.14.190.177|:8080... connected.
HTTP request sent, awaiting response... 200 No headers, assuming HTTP/0.9
Length: unspecified
Saving to: `favicon.ico'

    [ <=>                                   ] 2.862       --.-K/s   in 0s

2013-01-27 00:12:40 (143 MB/s) - `favicon.ico' saved [2862] 
```

这是我的 Delphi Indy 9/10 示例代码。它生成一个“正常关闭连接”异常，结果是一个空字符串。

```
procedure TForm1.Button1Click(Sender: TObject);
var s: string;
begin
  s := '';
  try
    s := IdHTTP1.Get('http://perforce.eigenbase.org:8080/favicon.ico');
  except
     on E: Exception do
     begin
          {$IFDEF DEBUG}ShowMessage('get error:'+E.Message){$ENDIF};
     end;
  end;
  ShowMessage(IntToStr(Length(s)));
end; 
```

如果我在不同的服务器上尝试相同的代码，例如：

```
s := IdHTTP1.Get('http://www.google.com/favicon.ico'); 
```

一切正常。

是否有解决方法可以使用 IdHTTP1.Get 从服务器获取[http://perforce.eigenbase.org:8080/favicon.ico文件？](http://perforce.eigenbase.org:8080/favicon.ico)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T06:51:25.153

失败的原因`TIdHTTP`是 wget 报告的关键信息：

> 没有标头，假设 HTTP/0.9

在 HTTP 0.9 响应中，根本不存在 HTTP 状态行和标头，只有原始文件数据本身，由断开连接终止。wget 支持，但`TIdHTTP`不支持（即使官方[HTTP 1.0](https://www.rfc-editor.org/rfc/rfc1945)和[HTTP 1.1](https://www.rfc-editor.org/rfc/rfc2616)规范要求支持识别 HTTP 0.9 响应）。 `TIdHTTP`仅支持 HTTP 1.0 和 1.1 格式的消息，这需要使用 HTTP 状态行和标头。无论出于何种原因，此特定服务器选择为 Indy's 发送 HTTP 0.9 响应`UserAgent`，但选择为 Internet Explorer UserAgents 发送 HTTP 1.0 响应。奇怪的。

短期解决方案是按照@TLama 所说的去做。将`TIdHTTP.Request.UserAgent`属性设置为模仿 Internet Explorer 可以`TIdHTTP.Get()`正常工作：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  icon: TMemoryStream;
begin
  icon := TMemoryStream.Create;
  try
    try
      IdHTTP1.Request.UserAgent := 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; SLCC1';
      IdHTTP1.Get('http://perforce.eigenbase.org:8080/favicon.ico', icon);
    except
      on E: Exception do
      begin
        {$IFDEF DEBUG}ShowMessage('get error:'+E.Message){$ENDIF};
      end;
    end;
    ShowMessage(IntToStr(icon.Size));
  finally
    icon.Free;
  end;
end; 
```

长期的解决方案是更新`TIdHTTP`以支持 HTTP 0.9 响应，即使它们现在很少遇到。为此，我在 Indy 的问题跟踪器中打开了票证。

# html - 具有 100% 浏览器高度的静态和流体列

> ID：14542879
> 
> 赞同：0
> 
> 时间：2013-01-26T23:55:08.683
> 
> 标签：html, css, position

我试图有一个布局，其中左列是固定宽度和 100% 高度，右列是 100% 宽度和高度。我还希望页脚粘在底部。

我遇到的问题是，由于列是标题下方浏览器视图高度的 100%，它们在横幅和页脚 div 后面运行。我希望他们停在横幅上。为这些 div 设置样式以实现此目的的最佳方式是什么？

如果在其他地方提出这个问题，任何帮助表示赞赏和抱歉，我找不到我面临的同样问题。

CSS和HTML如下：

```
@charset "UTF-8";
/* CSS Document */

html, body
{
    width: 100%;
    height: 100%;
    overflow: hidden;
}

body
{
    margin: 0;
}

/*----- HEADER -----*/

#header
{
    width: 100%;
    height: 50px;
    background: linear-gradient(to bottom, #BBBBBB 0%, #CCCCCC 100%) repeat scroll 0 0 #455774;
    border-bottom: 1px solid #666666;
    box-shadow: 0 2px 2px #666666;
}

/*----- END HEADER -----*/

/*----- SEARCH -----*/

#searchBox
{
    width: 100%;
    height: 50px;
    background: #EEEEEE;
    border-top: 1px solid #FFFFFF;
}

/*----- END SEARCH -----*/

/*----- APP SECTION -----*/

#appView
{
    width: 100%;
    background: white;
}

    #leftPane, #rightPane
    {
        height: 100%;
        position: absolute;
    }

    #leftPane
    {
        float: left;
        width: 270px;
        background: #FFFFFF;
        border-right: 20px solid #EEEEEE;
    }

        #leftPaneNav
        {
            background-color: #666666;
            float: left;
            height: 100%;
            width: 50px;
        }

        #sidebar
        {
            float: left;
            height: 100%;
            left: 50px;
            margin: 0;
            padding: 0;
            position: absolute;
            right: 0;
            background: #red;
            box-shadow: 0px -5px 5px 0px rgb(136, 136, 136) inset;
        }

    #rightPane
    {
        width: 100%;
        left: 290px;
        background: #FFFFFF;
        box-shadow: 2px 2px 5px 2px rgb(136, 136, 136) inset;
    }

/*----- END APP SECTION -----*/

/*----- BANNER DIV -----*/

#banner
{
    position: absolute;
    bottom: 50px;
    width: 100%;
    height: 50px;
    background: red;
}

/*----- FOOTER -----*/  

#footer
{
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 50px;
    background: black;
}

HTML
<body>
<div id="header">
</div>
<div id="searchBox">
</div>
<div id="appView">
    <div id="leftPane">
        <div id="leftPaneNav">
        </div>
        <div id="sidebar">
        </div>
    </div>
    <div id="rightPane">
    </div>
</div>
<div id="banner">
</div>

<div id="footer">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:12:42.997

解决问题的最简单方法是添加`padding-bottom`与页脚高度匹配的 100% 高度 div，这样底部的东西就不会被页脚覆盖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:36:07.873

与其绝对定位列和页脚，不如让它们静态显示（默认定位）。这样一来，他们就会相互对抗。然后使用 CSS 获得粘性页脚。一个很好的例子可以在这里找到：**[Ryan Fait 的 Sticky Footer Page](http://ryanfait.com/sticky-footer/)**。最后，使用 JQuery 使您的列等于内容区域的高度：**[请参阅此站点](http://www.jainaewen.com/files/javascript/jquery/equal-height-columns.html)**。

# knockout.js - 将项目插入数组后，KnockoutJS ko.computed() 未更新

> ID：14542887
> 
> 赞同：0
> 
> 时间：2013-01-26T23:55:30.007
> 
> 标签：knockout.js

我有以下对象：

```
function Category (id, name, weight) {
    this.categoryId = ko.protectedComputed(id);
    this.name  = ko.protectedComputed(name); 
    this.weight = ko.protectedComputed(weight);
    // this.dirtyFlag = new ko.dirtyFlag(this);
}

function Item (id, name, categoryId, gradeMax) {
    this.itemId = ko.observable(id);
    this.name  = ko.observable(name); 
    this.categoryId = ko.observable(categoryId);
    this.gradeMax = ko.observable(gradeMax);
}

function Grade (gradeId, itemId, studentId, studentName, grade) {
    this.gradeId = gradeId;
    this.itemId =  itemId;
    this.studentId  =  studentId; 
    this.studentName = studentName;
    this.grade = ko.observable(grade);
}

var viewModel =  function () {
    var self = this;

    self.items = ko.observableArray([
        new Item(3, "Homework 3", 1, 10),
        new Item(1, "Homework 1", 1, 20),
        new Item(2, "Homework 2", 1, 30),
        new Item(4, "Quiz", 3, 5)
    ]);

    self.categories = ko.observableArray([ 
        new Category(1, "Homework", 50) , 
        new Category(2, "Test", 25), 
        new Category(3, "Quiz", 25)          
    ]);

    self.grades = ko.observableArray([  
        //grades for item 4
        new Grade(10, 4,1, "Olivo,  Omar", 2)  ,   
        new Grade(11, 4,2, "Mercado,  Coryann",5),           
        new Grade(12, 4,3, "Pena,  Juan", 4) 
    ]);

    self.addItem = function () {
        var randId = int.rand(); 
        var newItem = new Item(randId , "new item", 1, 100);
        self.items.push(newItem);

        self.selectedItem(newItem);           
    };

    self.getStudentAverage = function (studentId) {
        return ko.computed(function () 
        {
            var total = 0,
            numOfItems = 0;

            // Get the grades for the assignment for this student
            var studentGrades =   ko.utils.arrayFilter(self.grades(), function(grade) {                          
                return grade.studentId == studentId;
            }); 

            // Calculate the Weighted Average
            if ( self.isWeighted() == true ){
                var faceAverage= 100;

                return tempAvg ;
            }  
        }, this)();
    };
}; 
```

HTML

```
<tbody data-bind="foreach: { data : $root.students, as : 'student' }  "  >                  
   <tr> 
        <td>
                <span data-bind="text: student.studentId" ></span>   - 
                <span data-bind="text: student.studentName" ></span>  
        </td>

        <td> 
             <span data-bind="text:  $root.getStudentAverage(student.studentId) "> </span> 
        </td>

        <!-- ko foreach: { data : $root.items, as : 'item' }  -->             
        <td > <!--   <span data-bind="css: { dirty : $root.getGrade(item.itemId(), student.studentId).grade.isDirty()}"></span> -->
              <input  class="grade-input" data-bind="value: $root.getGrade(item.itemId(), student.studentId).grade " />  
        </td>          
        <!-- /ko -->
    </tr>
</tbody> 
```

问题是`vm.getStudentAverage()`当我插入新项目时没有更新。我试图弄清楚为什么这对我不起作用。我想在插入新项目后计算每个学生的平均值。

这是一个演示问题的[小提琴。](http://jsfiddle.net/pisqko/s5uGb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:27:20.597

您的代码中缺少部分，但主要问题似乎是您在该函数中返回计算的 observable 的初始值，而不是计算的 observable 本身。所以最后，你绑定的是一个值，而不是计算出来的 observable。

```
self.getStudentAverage = function (studentId)
{
    return ko.computed(function () 
    {
        // code...
    }, this)(); // <-- you are returning the result of the computed
}; 
```

只需返回计算值，不要调用它（使用 extra `()`）。

更新代码：

```
self.getStudentAverage = function (studentId)
{
    return ko.computed(function () 
    {
        // code...
    }, this);
}; 
```

注意：在您提供的代码中，您甚至没有引用计算中的 items 数组。您必须使用 items 数组，以便在 items 更改时更新计算。否则，计算不依赖于项目，因此没有理由更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:07:23.367

问题是这`getStudentAverage`只是一个返回计算出的 observable 的函数。它本身必须是可观察的。我看到您尝试让它使用 studentId 参数，但这只是您设计中错误的解决方法：

您需要一个`Student`模型，然后您可以遍历一组学生并调用类似`student.getAverage`. 无需再偷偷输入ID。

# java - netbeans 大纲的展开/折叠侦听器

> ID：14542891
> 
> 赞同：1
> 
> 时间：2013-01-26T23:55:51.160
> 
> 标签：java, swing, netbeans, listener, jtreetable

我在用[`org.netbeans.swing.outline`](http://bits.netbeans.org/dev/javadoc/org-netbeans-swing-outline/index.html?org/netbeans/swing/outline/DefaultOutlineModel.html)

如何为生成的树设置展开/折叠侦听器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:27:12.133

的[`addTreeExpansionListener()`](http://bits.netbeans.org/dev/javadoc/org-netbeans-swing-outline/org/netbeans/swing/outline/TreePathSupport.html#addTreeExpansionListener%28javax.swing.event.TreeExpansionListener%29)方法[`TreePathSupport`](http://bits.netbeans.org/dev/javadoc/org-netbeans-swing-outline/org/netbeans/swing/outline/TreePathSupport.html)可以添加一个常规的`javax.swing.event.TreeExpansionListener`.

附录：例如，给定一个名为 的实例`outline`，以下匿名侦听器将打印受影响的路径：

```
TreePathSupport tps = outlineModel.getTreePathSupport();
tps.addTreeExpansionListener(new TreeExpansionListener() {

    @Override
    public void treeExpanded(TreeExpansionEvent e) {
        System.out.println(e.getPath());
    }

    @Override
    public void treeCollapsed(TreeExpansionEvent e) {
        System.out.println(e.getPath());
    }
}); 
```

# ruby - ruby 使用 session 来处理安静的请求和 redirect_to

> ID：14542892
> 
> 赞同：0
> 
> 时间：2013-01-26T23:55:50.997
> 
> 标签：ruby, session, rest, redirect

我正在尝试将我的请求设置为 RESTful，但我不认为我在这方面做得很好。这就是我所拥有的，我希望始终保持参数 p1 和 p2 不被查看，以便成为 RESTful：

在我的控制器中：

```
 def index
    #if can't find p1 then grab from session and re-direct to make it a RESTful request
    #if not in session then it's a brand new call
    if params[:p1] == nil && session[:p1] != nil
      params[:p1] = session[:p1]
      redirect_to :action => "index", params[:p1] => session[:p1]
    else
      session[:p1] = params[:p1]
    end

   ... same as above but with p2 ... 
```

我得到一个错误，在同一个动作中不能发生两个重定向......所以我尝试将它组合起来，但它一直在循环，页面会说 Ruby 已经确定这个请求永远不会完成......有没有更好的实现这一目标的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:54:00.537

为什么不在`||=`Ruby 中使用运算符。这样你就不需要`if-else`代码中发生的惨败。

尝试类似：

```
params[:p1] ||= session[:p1] 
```

但是，我不太确定您所说的您想让您的操作更加 RESTful 是什么意思？如果您使用更多见解和背景更新您的问题，我会尝试更新我的答案，这将为我们提供更多背景信息。

# php - 智能搜索 - 直接到页面

> ID：14542896
> 
> 赞同：0
> 
> 时间：2013-01-26T23:56:37.957
> 
> 标签：php, javascript, jquery, wordpress, search

我想知道是否有一种方法可以创建一个接受输入并直接转到相关页面的搜索。

例如：如果我要限制仅搜索电影并输入“终结者”，它将直接将我带到“终结者”的个人资料页面，而不是搜索列表并返回不同的结果。

类似 if: search_input = n, n = "movie_title" true 然后转到 "blah.com/movie_title" 如果 false 返回 "No Result"

希望这是有道理的？

如果有人可以帮助或知道任何插件或脚本或其他东西，那将非常感激。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:59:33.827

我将使用一个自动完成插件，例如：

-http://textextjs.com/manual/examples/autocomplete.html

或者

-http://jqueryui.com/autocomplete/

因为你的想法有问题你什么时候知道一个输入是正确的重定向？我的意思是“终结者”对标题“终结者 1”（例如）有效，但“终结者”是否正确？或“reminatort”？

# sitecore - Sitecore WFFM - 自定义字段的缺失字段属性

> ID：14542902
> 
> 赞同：3
> 
> 时间：2013-01-26T23:57:00.310
> 
> 标签：sitecore, sitecore6, custom-fields, web-forms-for-marketers

我按照[本指南的](http://sdn.sitecore.net/upload/sdn5/products/web_forms2/web%20forms%20for%20marketers%20v2_3%20reference-usletter.pdf)*创建 DatePicker 字段类型*部分的`DatePicker`所有步骤创建了一个新字段。

 *在表单设计器中，我看到`The field has no properties`了该字段的文本。尽管`[VisualProperty]`代码中有某些属性的属性，但这些属性并未显示在表单设计器窗口中。

我需要使用一些属性创建自己的字段。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:19:49.817

在处理自定义字段时，我发现选择现有字段并对其进行扩展比从头创建一个更容易。根据您正在寻找的功能，您可以选择最接近您需要的现有字段类型。

听起来您的属性可能未初始化。如果不查看您的代码，我真的无法告诉您任何更有用的信息。

当我不得不做这样的事情时，我使用[了WFFM Custom Field Type made easy](http://divamatrix.wordpress.com/2011/12/20/wffm-custom-field-type-made-easy/)文章作为参考，主要是Reflector来看看Sitecore是如何实现其他字段类型的。你也可以[在这里阅读我的博文](http://elenazlateva.blogspot.com/2012/09/custom-field-type-for-sitecore-web.html)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T10:44:27.107

在创建的自定义字段类型项目中找到复选框字段“必填”（在行为字段部分下）

![在此处输入图像描述](../Images/8d7c6331d43fcd5869c3dc1692125acd.png)

您现在可以开始了，您会发现在表单设计器中为您的自定义字段启用了所需的复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T16:46:37.250

当不从现有字段之一继承而是从这些基本字段类型继承时，我遇到了类似的问题。我通过将任何 VisualProperties 放在类的顶部附近来解决这个问题，就在任何其他属性之后：

```
[ValidationProperty("Value")]
MyCustomField : ValidateUserControl, IHasTitle 

protected Panel ControlContainer;
protected TextBox Field1;
protected global::System.Web.UI.WebControls.Label Help;

[Localize, VisualCategory("Appearance"), VisualFieldType(typeof(EditField)), VisualProperty("Help Text:", 101)]
public string HelpText
{
  get
    {
      return this.Help.Text;
    }
  set
    {
      this.Help.Text = value;
    }
 }
```

由于某种原因，在我的代码中进一步添加这些自定义属性字段时没有显示出来。希望这可以帮助。*

# c# - 在没有 Windows shell 的情况下启用 WebGl

> ID：14542905
> 
> 赞同：2
> 
> 时间：2013-01-26T23:57:08.453
> 
> 标签：c#, windows, webgl, windows-shell, windows-explorer

我正在尝试制作自己的 Windows 外壳（不要问），但问题是：当我在本机外壳（Windows 资源管理器）未运行时使用 Google Chrome 时，除非我关闭GPU 加速堆肥。在我看来，WebGL 根本没有绘制页面内容。当 Windows 资源管理器未运行时，我必须做什么才能启用 WebGL？[我正在使用 C#.net]

请注意，如果我转到 get.webgl.org/ 之类的页面，无论如何都不会显示任何内容。

如果你能回答这个问题，你就是天才。

# html - 如何在顶部获得搜索（向右浮动）

> ID：14542910
> 
> 赞同：1
> 
> 时间：2013-01-26T23:57:53.453
> 
> 标签：html, css

这是我的 jsfiddle（有结果）。[http://jsfiddle.net/76kmL/2/](http://jsfiddle.net/76kmL/2/)

CSS

```
header {
    background: red;
    color: #FFFFFF;
    padding: 18px;
    height: 110px;
}

#search {
    float: right;
} 
```

HTML

```
<div id="container">
    <header>
        <a href="#"><h1>Code Name</h1></a>
        <div id="search">
            <form method="post" action="#">
                <input type="text" name="search" value="" placeholder="Search">
                <input type="submit" name="submit" value="Search">
            </form>
        </div>
    </header> 
```

如何使搜索栏与标题对齐？（而不是低于它，就像在 jsfiddle 中一样）

我真的需要使用浮点数才能正确对齐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:04:15.323

你不必使用花车。你有很多选择。一个是使用`display:inline-block`，就像这样[http://jsfiddle.net/jalbertbowdenii/76kmL/4/](http://jsfiddle.net/jalbertbowdenii/76kmL/4/)你也可以使用 position:(ing) 和/或负边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:02:48.267

`float:left;`在标题中添加一个：`<a href="#" style="float:left;"><h1>Code Name</h1></a>`

```
 <div id="container">
        <header>
            <a href="#" style="float:left;"><h1>Code Name</h1></a>
            <div id="search">
                <form method="post" action="#">
                    <input type="text" name="search" value="" placeholder="Search">
                    <input type="submit" name="submit" value="Search">
                </form>
            </div>
        </header> 
```

如果您想降低搜索输入，`margin-top:20px;`请在搜索栏上使用。

检查它[http://jsfiddle.net/CtRBz/](http://jsfiddle.net/CtRBz/)

同一行： http: [//jsfiddle.net/WjSvG/](http://jsfiddle.net/WjSvG/)（添加边距）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:08:45.123

浮动是（在我看来）使块元素正确对齐的最一致的方式。或者，尽管您可以使用`position:absolute;`and`right: 0;`来向右对齐，但这会带来它自己的一系列问题。

要垂直对齐标题，您有两个选项：

*   将标题向左浮动
*   使用负上边距。

使用负上边距的示例：

```
 header {
    background: red;
    color: #FFFFFF;
    padding: 18px;
    height: 110px;
}

#search {
    float: right;
    margin-top:-20px;
} 
```

HTML：

```
<div id="container">
    <header>
        <a href="#"><h1>Code Name</h1></a>
        <div id="search">
            <form method="post" action="#">
                <input type="text" name="search" value="" placeholder="Search">
                <input type="submit" name="submit" value="Search">
            </form>
        </div>
    </header> 
```

JsFiddle 示例：http: [//jsfiddle.net/LR2LY/1/](http://jsfiddle.net/LR2LY/1/)

**编辑**

替代 CSS 在标题上使用左浮动，而不是负上边距。相同的 HTML 适用：

```
h1 {font-size:30px; }

#container header a {
    display:block;
    float:left;
}

header {
    background: red;
    color: #FFFFFF;
    padding: 18px;
    height: 110px;
}

#search {
float: right;
} 
```

JsFiddle：http: [//jsfiddle.net/LR2LY/2/](http://jsfiddle.net/LR2LY/2/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T00:03:06.133

您可以通过 z-index 使用 css 定义 z 位置

```
#search {
    float: right;
    z-index:99;
} 
```

我弄错了。

```
float:left; 
```

对于标题和

```
margin-top:20px; 
```

是您想要的解决方案，所以其他答案是正确的。

# android - Android：文件资源管理器中没有文件

> ID：14542914
> 
> 赞同：3
> 
> 时间：2013-01-26T23:58:26.317
> 
> 标签：android, eclipse, ddms

我发现我无法在 Eclipse 中查看我的 Android 数据库文件，而无需 root 我的手机，所以我最终使用这里的说明来 root 我的三星 Galaxy SII：

[http://galaxys2root.com/galaxy-s2-root/how-to-root-ics-on-att-galaxy-s2-sgh-i777/](http://galaxys2root.com/galaxy-s2-root/how-to-root-ics-on-att-galaxy-s2-sgh-i777/)

现在，当我使用 adb shell 时，我可以查看 /data/data/... 文件夹中的所有数据库。但是在 Eclipse 中，当我打开 DDMS 并查看文件资源管理器时，我看不到任何文件。我确保我在“设备”窗口中选择了我的设备。

有没有办法来解决这个问题？

![在此处输入图像描述](../Images/d564c79f0251dab8ed7541062c9adc78.png)

**编辑：**如果有人可以为我指出正确的方向来扎根仍然可以与 Eclipse 一起使用的三星 Galaxy S II，请告诉我……我花了几个小时才让我的手机扎根，因为像“简单”一键这样的事情没有为我工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:48:44.253

运行模拟器时查看数据库文件的简单方法

Eclipse 有一个简洁的小插件，称为[CellObject SQLite Browser](http://marketplace.eclipse.org/content/cellobject-sqlite-xml-browser#.UQQ00Wfw6RM) ，它允许您查看 sqlite 数据库及其内容（而不是修改）。尝试启动模拟器，然后导航到文件资源管理器选项卡，找到应用程序的包名称、数据文件夹，然后通过单击插件图标打开 db 文件（它会自动在 DDMS 选项旁边包含一个图标）

# c++ - 创建输出文件时出错 .rdstate() 返回值 2

> ID：14542915
> 
> 赞同：0
> 
> 时间：2013-01-26T23:58:33.750
> 
> 标签：c++

与主题一样，当我执行以下代码时，.rdstate() 返回值 2。我做错了什么？

```
string logger_path_and_name("\"F:\\windowsqnx\\loggs\\logger_file.dat");

/* file to store simulation data */
std::ofstream fout( logger_path_and_name.c_str(), std::ios_base::out | std::ios_base::binary);

/* check if ios::binary supported */
if (!fout.is_open())
{
    std::cerr << "can't create file logger_file.dat\n";
    std::cerr << fout.rdstate();
    system("PAUSE");
    exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:17:02.307

```
"\"F:\\windowsqnx\\loggs\\logger_file.dat" 
```

你的问题是这变成了`"F:\windowsqnx\loggs\logger_file.dat`. 如您所见，一`"`开始您有一个孤儿。

您可以通过两种方式解决此问题。1.`\"`最后再放一个。2.去掉`\"`开头的

附带说明一下， ios::rdstate 返回一个 Bitmask 类型，您检索信息的方式是使用`bitwise AND or OR`iostate [flags](http://www.cplusplus.com/reference/ios/ios_base/iostate/)。

从[这里](http://www.cplusplus.com/reference/ios/ios/rdstate/)可耻地被盗的例子：

```
// getting state of stream object
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  ifstream is;
  is.open ("test.txt");
  if ( (is.rdstate() & ifstream::failbit ) != 0 )
    cerr << "Error opening 'test.txt'\n";
  return 0;
} 
```

# java - Java 集合：对象添加是否直接添加到集合中？

> ID：14542917
> 
> 赞同：3
> 
> 时间：2013-01-26T23:58:40.957
> 
> 标签：java, collections

我知道，当我将对象添加到某些集合（例如 LinkedList）时，该元素不会直接添加到集合中；实际上，将一个节点添加到提供链接功能的集合中，并且该节点具有对我添加到集合中的对象的引用。对于所有 Java 集合类都是这样吗？例如，当我执行以下操作时：

```
List<String> list = new ArrayList<String>();
list.add("Car"); 
```

是直接将字符串对象“Car”添加到列表中，还是仅将一个节点添加到指向“Car”的列表中？

另外，我可以认为这是一种代理设计模式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T00:05:49.677

Java 中的 ArrayList 使用数组来存储对对象的引用，因此它与 Proxy 模式无关。您可以自己查看，[这里](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/tip/src/share/classes/java/util/ArrayList.java)是它的 OpenJDK 实现的链接。第 103 行有相关的代码。

```
private transient Object[] elementData; 
```

您还可以将其与[LinkedList](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/tip/src/share/classes/java/util/LinkedList.java)进行比较，后者使用 Nodes 来存储对`List`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:38:05.270

不向 LinkedList 添加元素不是代理模式。代理模式是一种创建模式。在 LinkedList 中没有关于它所包含的内容的创建。Node 包装一个 Object 的事实并不足以将其限定为代理。包装节点也没有实现与它和集合中包含的对象的共享接口。

代理是可以代替另一个对象的对象，因此共享接口很重要。这种替代对象可以通过按需创建真实对象来节省内存、时间或两者兼而有之。它还可以选择在不需要时销毁对象。代理控制它包装的对象的生命周期，这是代理模式的标志。集合中的节点不控制它指向的对象的生命周期，因为它被赋予了它包装的对象。

例如，假设我们有一个连接到许多数据库的应用程序，但它并不总是需要一次连接到所有数据库。我们可以实现一个特殊的 DataSource，它只会在请求连接时创建底层 DataSource。它还可以在您没有活动连接时关闭 DataSource（例如，当最后一个分发的连接关闭时）。

这类似于在大多数连接池库中实现连接池的方式。底层 DataSource 只是提供到 DB 的连接，但连接池位于 DataSource 之上，并在客户端没有意识到它发生的情况下提供池。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T00:18:38.240

您实际上可以**查看**`ArrayList`等的源代码。

An在内部`ArrayList`使用`Object[]`数组，因此它不涉及额外的包装器，但它直接存储对象引用。所以这里绝对没有“代理”。

如果您输入原始类型，它们将被自动装箱为对象。我也不会将此称为代理模式的实例。

如果您寻找代理模式，请查看 RMI。

# python - 尝试安装 pygame

> ID：14542919
> 
> 赞同：1
> 
> 时间：2013-01-26T23:59:13.010
> 
> 标签：python, netbeans, pygame

我在`C:\\Python27\\lib\\site-packages\\pygame`sys.path 的末尾添加了该条目。

当我运行代码时：

```
import pygame, sys
from pygame.locals import *

pygame.init()
DISPLAYSURF = pygame.display.set_mode((400,300))
pygame.display.set_caption('Hello World!')
while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        pygame.display.update() 
```

我得到错误：`ImportError: No module named locals`。但是我可以在 C:\Python27\lib\site-packages\pygame\ANYFOLDER 中运行这个 .py 而不会出错。

另外，如果可能的话，我想在 Netbeans 中使用这个路径。我已经在 Netbeans 的 Python 平台管理器中添加了路径，但我得到了与上面相同的错误。

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:44:40.670

提问者自己的解决方案：

> 好的，我发现我不能命名我的文件 pygame.py 否则它会尝试导入自己（？）。
> 
> 与 Netbeans 相同。绝对没有任何东西（项目、文件夹等）可以命名为“pygame”。

# javascript - 我认为可变范围麻烦

> ID：14542920
> 
> 赞同：1
> 
> 时间：2013-01-26T23:59:12.967
> 
> 标签：javascript, node.js

我认为我在变量范围方面遇到了麻烦。最终，我正在创建一个文本日志，其中包含某些文件及其上次使用此代码修改的日期：

```
var fs = require('fs');

fs.writeFileSync('./scan_log.txt', "");

for(e in extensions){
    createScanLogHeader(extensions[e]);

    for (l in lines){
        if(lines[l].indexOf(extensions[e]) > -1){
        var fileMtime = getFileProperty(lines[l], "mtime");
        fs.appendFileSync('./scan_log.txt', fileMtime + " " + lines[l] + "\n");
        }
    }
}

function getFileProperty(path, prop){
    fs.stat(path, function(err, stats){
        return stats.prop;
    });
} 
```

我在文件路径而不是 mtime 文件属性之前添加了“未定义”。但是，如果我`console.log(stats.prop)`在`getFileProperty`上面的函数中添加一个，`return stat.prop`我确实会在控制台中记录正确的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:02:06.233

您的`stat`调用是异步的，并且您的`getFileProperty`函数没有`return`定义任何值，因此它返回`undefined`.

要么使用`statSync`并返回它的值，要么将回调传递给`getFileProperty`.

```
 for (l in lines){
        if(lines[l].indexOf(extensions[e]) > -1){
            getFileProperty(lines[l], "mtime", function(path, prop) {
                fs.appendFileSync('./scan_log.txt', prop + " " + path + "\n");
            });
        }
    } 
```

* * *

```
function getFileProperty(path, prop, fn){
    fs.stat(path, function(err, stats){
        fn(path, stats[prop])
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:02:09.007

这不是范围问题，*而是*您`return stats.prop;`从. 由于是异步的，回调的返回值没有意义（如果有，它仍然会在以后发生，与对 的调用异步）。*`stat``stat``getFileProperty`*

 *如果您绝对肯定必须`getFileProperty` *返回*该值，则必须`statSync`改用。`return`必须来自，而`getFileProperty`不是您传递的回调`stat`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:08:49.443

不熟悉node.js框架，但是google了一下发现fs.stat(path,function)是异步的；所以基本上当你打电话时

```
var fileMtime = getFileProperty(lines[l], "mtime"); 
```

您输入*立即返回的***getFileProperty**，因此异步返回 stats.prop 基本上无处可去...我*认为*您应该使用**fs.statSync(path)** insteaad，这是同步版本。*

# html - 是否可以使用 HTML 5 File API 读取文件/图像属性

> ID：14542921
> 
> 赞同：4
> 
> 时间：2013-01-26T23:59:33.907
> 
> 标签：html, file, fileapi

我正在玩弄 HTML 5 File API，到目前为止创建了一个不错的小图像预览：http: [//jsfiddle.net/ZZNn9/3/](http://jsfiddle.net/ZZNn9/3/)

```
<div id="dropbox" data-bind="style: {background: mapBackground}, event:dragenter:imageDropboxDragEnter, dragover:imageDropboxDragOver, drop: imageDropboxDrop}" style="width:400px;height:400px;background-color:#ccc"></div>
<p data-bind="text:status"></p>
<script>
var viewModel;

function ViewModel()
{
    var self = this;
    self.status = ko.observable();
    self.mapBackground = ko.observable();

    self.imageDropboxDragEnter = function(data, event)
    {
        self.status('enter');
    }
    self.imageDropboxDragOver = function(data, event)
    {
        self.status('over');
    }
    self.imageDropboxDrop = function(data, event)
    {
        event.stopPropagation();
        self.status('drop');
        console.log(event.dataTransfer.files[0]);

        var fileReader = new FileReader();
        fileReader.onload = function(event)
        {
            console.log(event);
            var mapImage = event.target.result;
            self.mapBackground('url(' + mapImage + ') no-repeat center');
        }
        fileReader.readAsDataURL(event.dataTransfer.files[0]);
    }
}

viewModel = new ViewModel();
ko.applyBindings(viewModel);
</script> 
```

现在我的下一个目标是读取文件属性，例如图像的尺寸。我在任何一个中都找不到这些信息

event.dataTransfer.files[0]

也不在 FileReader() 事件中

所以我的问题是：是否可以读取这些属性中的任何一个？我似乎没有找到任何关于这件事的有用信息。

非常感谢！

# javascript - 获取特定html标签的内部，多次出现

> ID：14542929
> 
> 赞同：0
> 
> 时间：2013-01-27T00:00:40.783
> 
> 标签：javascript, rss

我有一个 XML，它是一个包含 400 个左右项目的 RSS 提要。里面是一个重复的行：

```
<span class="rtm_due_value">Tue 29 Jan 13</span> 
```

这是日期将根据帖子更改的地方。我想要做的是计算在过去 48 小时内获得日期的次数。现在我有一个脚本，它计算条目元素的数量，给出总数，尽管这是完整的列表。

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:14:13.700

尝试这样的事情：

```
var spans = document.querySelectorAll('.rtm_due_value'),
    _48h = new Date() - 172800000; // <= 48h in ms

spans = [].filter.call(spans, function(span) {
  return new Date(span.textContent) - _48h > 0;
});

var howMany = spans.length; 
```

# php - 从 URL 链接中分离出数字 id

> ID：14542931
> 
> 赞同：0
> 
> 时间：2013-01-27T00:01:25.860
> 
> 标签：php, regex

我正在浏览 stackoverflow 并在[这里](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string/5831191#5831191)找到了一个很棒的正则表达式代码。可能有其他方法可以隔离 youtube 视频 ID，但我选择使用正则表达式进行学习。`input1`带有（如下所示）的正则表达式代码忽略`&`字符之后的所有内容。这会清除视频 id，因此会给出不正确或空的 id 结果。为什么正则表达式会在之后清除所有内容`&`？

**错误：**

[输入 1： http](http://www.youtube.com/watch?feature&v=317a815FLWQ) ://www.youtube.com/watch?feature&v= 317a815FLWQ

结果1：http//www.youtube.com/watch?feature

**普通的：**

输入2：[http ://www.youtube.com/watch?v=spDj54kf-vY&feature=g-vrec](http://www.youtube.com/watch?v=spDj54kf-vY&feature=g-vrec)

结果 2： [http ://www.youtube.com/watch?v=spDj54kf-vY](http://www.youtube.com/watch?v=spDj54kf-vY)

**正则表达式代码**（带有原始评论）

```
$text = preg_replace('~
        # Match non-linked youtube URL in the wild. (Rev:20111012)
        https?://         # Required scheme. Either http or https.
        (?:[0-9A-Z-]+\.)? # Optional subdomain.
        (?:               # Group host alternatives.
          youtu\.be/      # Either youtu.be,
        | youtube\.com    # or youtube.com followed by
          \S*             # Allow anything up to VIDEO_ID,
          [^\w\-\s]       # but char before ID is non-ID char.
        )                 # End host alternatives.
        ([\w\-]{11})      # $1: VIDEO_ID is exactly 11 chars.
        (?=[^\w\-]|$)     # Assert next char is non-ID or EOS.
        (?!               # Assert URL is not pre-linked.
          [?=&+%\w]*      # Allow URL (query) remainder.
          (?:             # Group pre-linked alternatives.
            [\'"][^<>]*>  # Either inside a start tag,
          | </a>          # or inside <a> element text contents.
          )               # End recognized pre-linked alts.
        )                 # End negative lookahead assertion.
        [?=&+%\w-]*        # Consume any URL (query) remainder.
        ~ix', 
        '<a href="http://www.youtube.com/watch?v=$1">YouTube link: $1</a>',
        $text);
    return $text; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T00:07:15.933

忘记`regex`，使用[parse_url](http://php.net/parse_url)：

```
Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
) 
```

然后在 url 部分使用parse_str来提取变量[。](http://php.net/manual/en/function.parse-str.php)`query`

**编辑**

这是一个更好的演示：

```
$url = "http://www.youtube.com/watch?feature&v=317a815FLWQ";

$parsed_url = parse_url($url);
$query = $parsed_url['query'];

$parsed_query = array();
parse_str($query, $parsed_query);

var_dump($parsed_query); 
```

输出：

```
array(2) {
  ["feature"]=>
  string(0) ""
  ["v"]=>
  string(11) "317a815FLWQ"
} 
```

**编辑 2**

从评论中给出的第二个链接中提取 ID 的另一个示例：

```
$url = "http://www.youtube.com/sandalsResorts#p/c/54B8C800269D7C1B/2/PPS-8DMrAn4";

$parsed_url = parse_url($url);
$fragment = $parsed_url['fragment'];
$fragment_parts = explode('/', $fragment);
$video_id = array_pop($fragment_parts);

print($video_id); 
```

输出：

```
PPS-8DMrAn4 
```

**但是**，如果您要求用户提供链接，则需要非常具体地与他们联系。第二个示例中的链接不是视频链接，但如果您想原谅用户的输入，您可以通过两个代码片段运行链接并检查您是否获得了 ID。

# ruby-on-rails - 将 Twilio SMS 响应保存为 Ruby 中的模型属性

> ID：14542934
> 
> 赞同：1
> 
> 时间：2013-01-27T00:01:50.260
> 
> 标签：ruby-on-rails, ruby, sms, twilio

目标：

我正在使用 Twilio 通过 SMS 向用户发送响应。然后我要求该用户再次通过 SMS 对响应进行评分。我想将用户的评分保存为响应模型的属性。

问题：

*   我不知道如何以聪明的方式做到这一点。现在我能想到的最好的方法是找到发送给该用户的最新响应（用户可以有很多响应）并给它评分。但这有一些问题，例如，如果用户收到多个响应并想要对旧响应进行评分。

*   我很绿色，我不知道如何实现代码。这就是我在相关控制器中的内容：

    ```
    class TwilioController < ApplicationController

      def process_sms
        @rating = params[:Body]
        #Find the response that this rating should get
        #Assign this rating to that response
        if @rating == "10"
          #thanks for the high rating
        else
          #will try to do better next time
        end
      end
    end 
    ```

提前致谢，如果我能把这个问题做得更好，请告诉我——这是我第一次发帖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-25T17:51:20.133

From the comments above:

> 1) I'm not sure how to turn that SMS into an attribute of the correct Response model

This would be the same as any Rails model - create a migration which adds the string to the model and run the migration. Then, a new attribute should be "settable" on the model.

> 2) I'm not sure how if there's a clever way to detect which Response the Rating corresponds to, since SMS doesn't have threading/replies/etc.

You should be able to [use the REST API to get a list of SMS messages](https://www.twilio.com/docs/api/rest/message#list) sent to your app from a given number. Unless your users can rate multiple responses at once, this should give you a list of replies from a specific user.

# symfony - 重定向已经登录的用户 Symfony2

> ID：14542940
> 
> 赞同：3
> 
> 时间：2013-01-27T00:02:22.577
> 
> 标签：symfony

有没有办法将已经登录的用户重定向到主页？例如，那些带有 cookie 或“记住我”的人？

我在我的“loginController”中试过这个，但它不起作用

```
public function loginAction()
{
    $request = $this->getRequest();
    $session = $request->getSession();
   // $user = new Usuario();

    // get the login error if there is one
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
        $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    } else {
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
    }
    $securityContext = $this->container->get('security.context');
    if( $securityContext->isGranted('IS_AUTHENTICATED_REMEMBERED') ){
       $this->redirect($this->generateUrl('MonsePanelBundle_homepage'));
    }
    return $this->render('UsuariosBundle:Security:login.html.twig', array(
        // last username entered by the user
        'last_username' => $session->get(SecurityContext::LAST_USERNAME),
        'error'         => $error,
    ));
} 
```

我已经阅读了所有其他类似的问题，但到目前为止还没有运气......

这是我的 security.yml 以防万一……

```
security:
encoders:
   Monse\UsuariosBundle\Entity\Usuario:
        algorithm: sha512
        encode-as-base64: true
        iterations: 10

role_hierarchy:
    ROLE_ADMIN: [ROLE_USER]
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    user_db:
        entity: { class: Monse\UsuariosBundle\Entity\Usuario, property: usuario }

firewalls:
    main:
        pattern: /.*
        provider: user_db
        form_login:
            login_path: /login
            check_path: /login_check
            remember_me: true
            default_target_path: /panel
        logout:
            path: /logout
            target: /login
        remember_me:
            key: MiClaveSegura
            lifetime: 1800
            path: /.*
            domain: ~
        security: true
        anonymous: true
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/panel, roles: [ROLE_SUPER_ADMIN, ROLE_ADMIN, ROLE_USER] } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-18T11:16:06.690

您错过了重定向行中的“返回”

```
$securityContext = $this->container->get('security.context');
if($securityContext->isGranted('IS_AUTHENTICATED_REMEMBERED')){
    return $this->redirect($this->generateUrl('MonsePanelBundle_homepage'));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T09:31:41.440

有时您需要在每个操作之前在控制器上执行一个方法，有时在多个控制器上执行。即，如果您想检查用户是否已登录。

我的代码是[https://matt.drollette.com/2012/06/calling-a-method-before-every-controller-action-in-symfony2/的自定义](https://matt.drollette.com/2012/06/calling-a-method-before-every-controller-action-in-symfony2/)

如果将其应用于控制器，它会检查用户是否已登录。如果是，则不会显示登录页面。但您可以将用户重定向到项目的任何页面

* * *

在 UsuariosBundle 旁边创建一个新的 Bundle，将其命名为 CoreBundle。在这个包中创建两个文件夹 EventListener 和 Model。在模型中创建：

```
interface InitializableControllerInterface
{
    public function initialize(Request $request, 
                               SecurityContextInterface $security_context, 
                               FilterControllerEvent $event);
} 
```

在 EventListener 创建：

```
class BeforeControllerListener
{
    private $security_context;

    public function __construct(SecurityContextInterface $security_context)
    {
        $this->security_context = $security_context;
    }

    public function onKernelController(FilterControllerEvent $event)
    {
        $controller = $event->getController();

        if (!is_array($controller)) {
            // not a object but a different kind of callable. Do nothing
            return;
        }

        $controllerObject = $controller[0];

        // skip initializing for exceptions
        if ($controllerObject instanceof ExceptionController) {
            return;
        }

        if ($controllerObject instanceof InitializableControllerInterface) {
            // this method is the one that is part of the interface.
            $controllerObject->initialize($event->getRequest(),
                                          $this->security_context, $event);
        }
    }
} 
```

在类中，您不需要进行任何自定义。只需复制并粘贴它们。假设您有一个 DefaultController，其中索引操作默认指向登录页面。您可能希望阻止已登录的用户查看登录页面，因为它只有促销内容：

```
class DefaultController extends Controller 
                        implements InitializableControllerInterface {

    /* Do not show landing page if user is logged in */

    public function initialize(Request $request, 
                               SecurityContextInterface $security_context, 
                               FilterControllerEvent $event) {

        $parent = $this;

        $securityContext = $this->container->get('security.context');

        if ($securityContext->isGranted('IS_AUTHENTICATED_FULLY') ||
            $securityContext->isGranted('IS_AUTHENTICATED_REMEMBERED')) {

            if ($parent->container->get('request')->get('_route') != 
                                                   'my_homepage') {
                //nothing
            } else {
                $event->setController(function() use ($parent) {
                return new RedirectResponse(
                           $parent->generateUrl('my_user'));
                        });
            }
        }
    }

   //your code
} 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:01:00.910

我认为你需要像这样实现你的安全监听器

```
 public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
    {
        $this->dispatcher->addListener(KernelEvents::RESPONSE, array($this, 'onKernelResponse'));
    }
 public function onKernelResponse(FilterResponseEvent $event)
    {
        if ($this->security->isGranted('ROLE_SUPER')) {
            $response = new RedirectResponse($this->router->generate('route1'));
        } 

        elseif ($this->security->isGranted('ROLE_USER')) {
            $response = new RedirectResponse($this->router->generate('route2'));
        } 

        $event->setResponse($response);
    } 
```

在这里查看更多信息[http://symfony.com/doc/2.0/components/event_dispatcher/introduction.html](http://symfony.com/doc/2.0/components/event_dispatcher/introduction.html)

# java - 带有花括号的正则表达式，带有额外的扭曲

> ID：14542944
> 
> 赞同：1
> 
> 时间：2013-01-27T00:02:55.433
> 
> 标签：java, regex

我对正则表达式比较陌生，我不确定这是否是解决我的问题的方法，但这里有。

我有可能包含以下内容的文本文件：

```
program A {
   int x = 10;
   tuple date {
            int day;
            int month;
            int year;
   }
}

function B {
    int y = 20;
    ...
}

process C {
    more code;
} 
```

我需要提取程序或函数或进程之间的任何文本。所以只有 3 种类型的标题。

所以我决定使用正则表达式来获取大括号之间的任何文本。我开始的方式是通过这个表达式，假设我事先知道标识符列表：

```
(program|function|process)+ A[\s\S]*(?=function) 
```

这可以完美地捕获程序 A 中的任何文本。但有时程序 A 后面可能没有函数。它后面可以跟进程或其他程序。一旦我在最后一个组中添加 OR，它将无法正常工作。

```
(program|function|process)+ A[\s\S]*(?=function|process|program) 
```

我看到它的方式是通过3个选项：

1.  通过正则表达式，但上述可行吗？
2.  跟踪大括号，但如果输入缺少一个怎么办。如果在另一组代码中找到匹配的括号，可能很难抛出错误。
3.  使用上下文无关语法，但我将最后保留此选项。

提前致谢！

PS：我用它来帮助 RegExpr：[http ://gskinner.com/RegExr/?33i30](http://gskinner.com/RegExr/?33i30)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T00:21:58.357

您应该考虑为此使用 LL 解析器而不是正则表达式。正则表达式不是每个解析需求的正确答案，而只是正则语言。如果您有上下文无关语法，请使用 LL 解析器。

[https://en.wikipedia.org/wiki/LL_parser](https://en.wikipedia.org/wiki/LL_parser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:43:15.617

如果您更喜欢正则表达式解决方案，请尝试以下操作：

```
/(program|function|process).*?{(.*?)}\n+(program|function|process)/m 
```

您可能想在[这里](http://rubular.com/r/D6FMq4TX8M)测试一下。

不过，正则表达式解决方案对您的问题并不可靠。在使用它之前，我们必须做出一些假设。例如，代码需要格式化。玩它以防万一它应该为您提供解决方法。

**更新**：这是经过测试的 Java 代码：

```
public class Test {
    public static void main(String[] args) throws IOException {
        String input = FileUtils.readFileToString(new File("input.txt"));
        Pattern p = Pattern.compile("(?<=program|function|process)[^{]*\\{(.*?)\\}\\s*(?=program|function|process|$)", Pattern.DOTALL);
        Matcher m = p.matcher(input);
        while(m.find()) {
            System.out.println(m.group(1));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T00:47:55.570

如果你真的不想使用语法，你可以实现一个简单的解析器，它可以逐行分析文件：

请看我的例子：

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.regex.Pattern;

import org.apache.commons.io.IOUtils;

public class SourceCodeProgram {

    public static void main(String[] args) throws Exception {
        File source = new File("C:\\test.txt");
        SourceCodeScanner scanner = new SourceCodeScanner(source);
        for (Code code : scanner.readAll()) {
            System.out.println(code);
            System.out.println("-----------");
        }
    }
}

class SourceCodeScanner {

    private File source;

    private Pattern startCodePattern = Pattern.compile(
            "^(\\s)*(program|function|process)", Pattern.CASE_INSENSITIVE);

    public SourceCodeScanner(File source) {
        this.source = source;
    }

    public Collection<Code> readAll() throws Exception {
        List<String> lines = readFileLineByLine();
        List<Code> codes = new ArrayList<Code>();
        StringBuilder builder = new StringBuilder(512);

        for (String line : lines) {
            if (containsSourceCodeHeader(line)) {
                int length = builder.length();
                if (length != 0) {
                    codes.add(new Code(builder.toString().trim()));
                    builder.delete(0, length);
                }
            }
            addNextLineOfSourceCode(builder, line);
        }
        String lastCode = builder.toString();
        if (containsSourceCodeHeader(lastCode)) {
            codes.add(new Code(builder.toString().trim()));
        }
        return codes;
    }

    private boolean containsSourceCodeHeader(String line) {
        return startCodePattern.matcher(line).find();
    }

    private void addNextLineOfSourceCode(StringBuilder builder, String line) {
        builder.append(line);
        builder.append(IOUtils.LINE_SEPARATOR);
    }

    private List<String> readFileLineByLine() throws Exception {
        FileInputStream fileInputStream = new FileInputStream(source);
        return IOUtils.readLines(new BufferedInputStream(fileInputStream));
    }
}

class Code {
    private String value;

    public Code(String value) {
        this.value = value;
    }

    public String getValue() {
        return value;
    }

    @Override
    public String toString() {
        return value;
    }
} 
```

# python - 如何比较列表中的项目是否与另一个列表中的项目具有相同的值和位置？蟒蛇 2.7

> ID：14542948
> 
> 赞同：2
> 
> 时间：2013-01-27T00:03:08.960
> 
> 标签：python, list, python-2.7

例如。

```
l1 = [a,b,c,d]
l2 = [e,b,f,g] 
```

当它看到 b 在 l1 和 l2 中，并且在两个列表中的位置 [1] 时，将返回 true 的方法。最好是我可以在 for 循环中使用的东西，以便我可以比较列表中的所有项目。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:06:58.767

试试这个代码：

```
if 'b' in l1 and 'b' in l2: # Separated both statements to prevent ValueErrors
    if l1.index('b') == l2.index('b'): 
        print 'b is in both lists and same position!' 
```

与 Volatility 的代码不同，任一列表中的长度都无关紧要。

index() 函数获取字符串中元素的位置。例如，如果有：

```
>>> mylist = ['hai', 'hello', 'hey']
>>> print mylist.index('hello')
1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:08:24.350

你可以做：

```
def has_equal_element(list1, list2):
    return any(e1 == e2 for e1, e2 in zip(list1, list2)) 
```

`True`当至少一个元素具有与另一个列表中相同的值和位置时，此函数将返回。当列表长度不同时，此功能也有效，如果不需要，您需要调整该功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T00:05:34.810

假设列表的长度相同，您可以使用该`zip`函数

```
for i, j in zip(l1, l2):
    if i == j:
        print '{0} and {1} are equal and in the same position'.format(i, j) 
```

该`zip`函数的作用是这样的：

```
l1 = [1, 2, 3]
l2 = [2, 3, 4]
print zip(l1, l2)
# [(1, 2), (2, 3), (3, 4)] 
```

如果你想要一个返回`True`或`False`给出输入的函数，你可以这样做

```
def some_func(your_input, l1, l2):
    return (your_input,)*2 in zip(l1, l2) 
```

`(your_input,)`是一个包含 的单元组`your_input`，将其乘以 2即可得到`(your_input, your_input)`- 这就是您要测试的内容。

或者如果您想要退货（`True`如果有任何满足条件）

```
def some_func(l1, l2):
    return any(i == j for i, j in zip(l1, l2)) 
```

该`any`函数基本上检查列表的任何元素（或在这种情况下为生成器）是否`True`在布尔上下文中，因此在这种情况下，如果两个列表满足您的条件，它会返回 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T00:06:43.557

如果您确实想要一种方法来比较两个列表中的一个位置，您可以使用以下方法：

```
def compare_pos(l1, l2, pos):
    try:
        return l1[pos] == l2[pos]
    except IndexError:
        return False

l1 = [0, 1, 2, 3]
l2 = [0, 2, 2, 4]

for i, _ in enumerate(l1):
    print i, compare_pos(l1, l2, i)

# Output:
# 0 True
# 1 False
# 2 True
# 3 False 
```

如果你想测试两个列表是否在相同的位置有所有相同的元素，你可以检查是否相等：

```
print l1 == l2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T00:08:36.443

我会从两个列表中得到共同的元素：

```
l1 = [a, b, c, d]
l2 = [e, b, f, g]
common_elements = [(i, v) for i,v in enumerate(l1) if l2[i] == v] 
```

这将创建一个元组列表：`(index, value)`然后您可以检查您想要的值或索引是否在列表中。

# sql - 通过第三个加入 2 个表 - 一个表来统治它们

> ID：14542950
> 
> 赞同：2
> 
> 时间：2013-01-27T00:03:53.880
> 
> 标签：sql, database-design, ms-access-2007, table-relationships, object-relationships

我已经完成了我的研究，花了几个小时在教程上，但找不到一种易于理解的方法来创建我需要的东西。

我是 Access 新手，但非常渴望学习。我在 Excel 上做了大量的报告，但厌倦了当我的数据表上的数据太多时它会有多慢。所以我转向访问。

我有 3 个 Excel 文件，每个文件都有一个表格。

1° 第一个 excel 表有一个活动名称列表和与之配套的跟踪代码。
“Campaign-TrackCode”（从软件导出）
例如：
国家/地区 广告系列名称 Track Code
美国广告系列名称 1 us-ad-1-1
美国广告系列名称 1 us-ad-2-1
美国广告系列名称 2 us-ad-1- 2
美国广告系列名称 2 us-ad-2-2
美国广告系列名称 2 us-ad-3-2
等...

2°第二个excel表有日期；注册 ID 和来自哪个跟踪代码“注册”（从软件导出）
例如：
日期注册 ID 跟踪代码
01.01.2013 1021 us-ad-1-1
01.01.2013 1022 us-ad-1-1
01.01.2013 1023 us -ad-1-2
01.02.2013 1024 us-ad-4-2
01.02.2013 1025 us-ad-2-1
等...

3° 3rd excel 表格是一个包含日期、点击次数、活动名称的报告。“ggle 报告”（从 ggle 广告导出）
例如：
日期 广告系列名称点击次数
01.01.2013 广告系列名称 1 12
01.01.2013 广告系列名称 1 46
01.01.2013 广告系列名称 2 16
01.02.2013 广告系列名称 2 35
01.02.2013 广告系列名称2 23
等...

我正在尝试通过第一个将我的第二个和第三个表合并在一起，以便在 Access 中获得这样的表：
日期国家活动名称计数 RegID 点击
01.01.2013 美国活动名称 1 21 12
01.01.2013 美国活动名称 2 23 35
01.02.2013 美国竞选名称 1 22 46
等...

我不知道该怎么办。我已经尝试使用表格分析器将我的第一个表格拆分为 3 个表格（国家、活动名称和跟踪代码），然后通过跟踪代码将其连接到我的第二个表格，然后通过活动将第一个表格连接到第三个表格，然后最终使用第一个表连接第二个和第三个。

不起作用。因为我是新手，所以能够一步一步地创建决赛桌会很棒。我对主键和唯一值有点迷茫。（我开始建立一对多的关系，所以我认为我走在正确的学习道路上）。我不想更改我的 excel 表格，因为每天在 access 中的导入几乎是完全自动化的。我下载了 3 个报告，然后在访问时根据已保存的规则附加已导入的表以导入这些 Excel 文件。

有人知道该怎么做吗？

这是一个包含表格示例和所需输出的链接：

[表格示例](https://imgur.com/a/7DzZE#0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:31:04.440

您可以尝试运行此查询（根据需要更改表/字段名称）并查看是否是这样？当我们确定这是您想要实现的目标时，我将稍后编辑此答案。;)

```
SELECT 
  Table2.Date, 
  Table1.Country, 
  Table1.[Campaign name], 
  Table2.[Track Code], 
  Table2.[Reg ID], 
  Table3.Clicks
FROM 
  Table3 INNER JOIN 
  (Table2 INNER JOIN Table1 ON Table2.[Track Code] = Table1.[Track Code]) ON 
  Table3.[Campaign name] = Table1.[Campaign name]
ORDER BY Table2.Date, Table1.Country, Table1.[Campaign name]; 
```

*   复制上面的这个示例 SQL 查询，
*   打开您的 Access 数据库，
*   点击查询选项卡，
*   点击新建图标，
*   选择设计视图，
*   关闭添加表对话框，
*   单击 SQL 按钮（左上角），
*   粘贴此代码，
*   根据需要更改名称，
*   点击红色感叹号（运行）图标，
*   带着你的发现回来...

;)

**编辑：**我在查询末尾添加了排序。你当然可以通过交换 ORDER BY 子句中列出的字段来更改排序顺序，添加一些，省略一些，如果你希望它们按降序排序，在字段名称的末尾添加 DESC，用空格分隔（例如：`ORDER BY Table2.Date DESC, Table1.Country`让记录首先按日期降序排序，然后按国家升序排序`ASC`，这是默认排序顺序）。

`Design View`我还建议您在完成 SQL 语法编辑后查看内置的查询构建器 ( )。您会发现快速构建自己的查询非常有用。`WYSIWYG`复制的 SQL 子句将为您提供一个很好的示例，说明表如何在查询构建器中相互关联。当然，您也可以通过简单地移动事物来更改所有关系、排序顺序、显示顺序……。;)

# c# - 遍历应用程序中所有加载的模块并查看是否正在导出某个函数

> ID：14542955
> 
> 赞同：-3
> 
> 时间：2013-01-27T00:04:19.160
> 
> 标签：c#

在我的应用程序中获取已加载模块的列表后，我想遍历所有这些模块并查看这些模块中是否有任何模块正在导出某个功能。

如何检查模块是否正在导出功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:21:22.733

有几种方法：

```
 Type IType = Type.Assembly.Load("YourProjectName").GetType("FunctionName");
 if (IType == null)
 {  
     Text = "Function Not Exist";
 }
 else
 {
     Text = "Function  Exist";
 } 
```

或者通过使用 Linq：

```
var isImplemented = Assembly.GetExecutingAssembly().
                         GetTypes().
                         Any(t => t.IsAssignableFrom(typeof (FunctionName))); 
```

或者：

```
var isImplemented = false;
foreach (var t in Assembly.GetExecutingAssembly().GetTypes())
{
   if (!t.IsAssignableFrom(typeof (FunctionName))) continue;
   isImplemented = true;
   break;
} 
```

# php - 主机移动后magento不发送电子邮件

> ID：14542958
> 
> 赞同：1
> 
> 时间：2013-01-27T00:04:42.090
> 
> 标签：php, email, magento, move, host

我最近为我的 magento 商店购买了一个 vps 托管帐户，因为它对于旧主机（20000 多种产品）来说变得越来越大。我还没有更改域的 ns，因为我想确保在 48 小时传播停机时间之前一切正常。

我观察到的事情之一是，magento 没有向我的客户发送任何电子邮件，我的意思是任何，甚至没有重置密码电子邮件。

我对这个问题感到困惑，因为设置都是有序的（就像我的旧主机一样）。

我没有改变ns的事实是否与它有关？

================== 编辑=====================

设法让它向客户发送确认电子邮件，但无法让它将邮件副本发送给管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:40:24.127

是的，如果您的名称服务器没有更改，您的 MX 记录将不匹配。您的电子邮件被您的网络主机或其他介于两者之间的东西丢弃，因为它们在您的 MX 记录匹配之前是垃圾邮件。

# php - PHP Gearman 重复任务

> ID：14542959
> 
> 赞同：0
> 
> 时间：2013-01-27T00:04:59.193
> 
> 标签：php, task-queue, gearman, worker

我有：

*   Debian 6
*   nginx 1.2.6
*   PHP 5.3.20-1~dotdeb.0 (fpm-fcgi) (内置: Dec 24 2012 11:53:16)
*   齿轮指令 1.1.4
*   pecl gearman ext 1.1.1

我得到了两个脚本（可能是我从 php 复制的）。客户：

```
<?php
$gmc= new GearmanClient();
$gmc->addServer();

$gmc->setCompleteCallback("reverse_complete");
$gmc->setStatusCallback("reverse_status");

$gmc->addTask("reverse", "!dlroW olleH", null, "2");

if (!$gmc->runTasks())
{
    echo "Error " . $gmc->error() . "\n";
    exit;
}

echo "Done\n";

function reverse_status($task)
{
    echo "Status: " . $task->unique() . ", " . $task->jobHandle() . " - " . $task->taskNumerator() .
         "/" . $task->taskDenominator() . "\n";
}

function reverse_complete($task)
{
    echo "Done: " . $task->unique() . ", " . $task->data() . "\n";
}

?> 
```

和工人：

```
<?php
$gmworker= new GearmanWorker();
$gmworker->addServer('127.0.0.1');
$gmworker->addOptions(GEARMAN_WORKER_GRAB_UNIQ);
$gmworker->addFunction("reverse", "reverse_fn");

print "Waiting for tasks...\n";
while($gmworker->work())
{

  if ($gmworker->returnCode() != GEARMAN_SUCCESS)
  {
    echo "return code: " . $gmworker->returnCode() . "\n";
    break;
  }
}

function reverse_fn($job)
{

  echo "uniq: " . $job->unique() . "\n";
  echo "I got job: " . $job->handle() . "\n";

  $workload = $job->workload();
  $workload_size = $job->workloadSize();

  echo "Workload: $workload ($workload_size)\n";

  for ($x= 0; $x < $workload_size; $x++)
  {
    echo "Sending status: " . ($x + 1) . "/$workload_size is done\n";
    $job->sendStatus($x+1, $workload_size);
    $job->sendData(substr($workload, $x, 1));
    sleep(1);
  }

  $result= strrev($workload);
  echo "The result: $result\n";

  return $result;
}

?> 
```

我通过“gearmand -d”运行 gearmand。我通过“php worker.php”启动工作者。

我从浏览器打开客户端脚本，任务转到服务器，一切正常。但是当我从 2+ 个浏览器选项卡打开相同的脚本时，gearmand 会收到 2+ 个具有相同唯一 ID 的类似任务。

当我添加后台任务或使用 doBackground 方法或在 CLI 模式下时，不会发生这种情况。两种以上不同的浏览器也不会发生这种情况。

我尝试了不同的客户端和服务器版本。同样的事情也会发生。

我完全被困住了。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:20:06.317

$gmc->addTask("reverse", "!dlroW olleH", null, "2"); 最后一个选项是您的唯一密钥。所以当然它总是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T13:31:40.960

旧的，但我想我想通了。浏览器不允许一次发送 2 个以上相同的查询。第二个等待第一个先完成。

# html - 只有第一个 nth-child 命令被识别

> ID：14542960
> 
> 赞同：0
> 
> 时间：2013-01-27T00:05:01.887
> 
> 标签：html, css, css-selectors

我正在尝试修改这个“悬停在任何东西上”的代码（[http://csstricks.com/examples/HoverEverythingBut/](http://csstricks.com/examples/HoverEverythingBut/)），以便悬停的链接会改变颜色或者最终被图像替换。我认为完成此任务的最佳方法是使用 nth-child 命令，并且我添加了以下 CSS ...

```
 #all:hover ul li a:hover:nth-child(1)  { background: #ffffff no-repeat; }
    #all:hover ul li a:hover:nth-child(2)  { background: #000000 no-repeat; }
    #all:hover ul li a:hover:nth-child(3)  { background: #bbbbbb no-repeat; }
    #all:hover ul li a:hover:nth-child(4)  { background: #c73b1b no-repeat; }
    #all:hover ul li a:hover:nth-child(5)  { background: #367db2 no-repeat; }
    #all:hover ul li a:hover:nth-child(6)  { background: #111111 no-repeat; }
    #all:hover ul li a:hover:nth-child(7)  { background: #222222 no-repeat; }
    #all:hover ul li a:hover:nth-child(8)  { background: #333333 no-repeat; }
    #all:hover ul li a:hover:nth-child(9)  { background: #444444 no-repeat; } 
```

不幸的是，似乎只有第一个 nth-child 命令被识别。现在每当我将鼠标悬停在一个链接上（无论是第一个还是最后一个），背景只会变成白色。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:08:02.627

如果你的 html 是这样`<ul><li><a></li><li><a></li>...`的，那么第 n 个孩子应该在`li`

```
#all:hover ul li:nth-child(1) a:hover  { background: #ffffff no-repeat; }
#all:hover ul li:nth-child(2) a:hover  { background: #000000 no-repeat; }
#all:hover ul li:nth-child(3) a:hover  { background: #bbbbbb no-repeat; }
#all:hover ul li:nth-child(4) a:hover  { background: #c73b1b no-repeat; }
#all:hover ul li:nth-child(5) a:hover  { background: #367db2 no-repeat; }
#all:hover ul li:nth-child(6) a:hover  { background: #111111 no-repeat; }
#all:hover ul li:nth-child(7) a:hover  { background: #222222 no-repeat; }
#all:hover ul li:nth-child(8) a:hover  { background: #333333 no-repeat; }
#all:hover ul li:nth-child(9) a:hover  { background: #444444 no-repeat; } 
```

# ruby-on-rails - 如何将一个类应用于由 simple_form 生成的整个表单？

> ID：14542963
> 
> 赞同：0
> 
> 时间：2013-01-27T00:05:31.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

根据[文档](https://github.com/plataformatec/simple_form)，我尝试了很多变体，但似乎都没有。

我想要发生的是这样的：

```
<form accept-charset="UTF-8" action="/listings" class="simple_form new_listing form-horizontal" id="new_listing" method="post" novalidate="novalidate"> 
```

但是当我尝试这个时：

```
 <%= simple_form_for @listing, :defaults => { :class => 'form-horizontal' } do |f| %> 
```

这是生成的：

```
<form accept-charset="UTF-8" action="/listings" class="simple_form new_listing" id="new_listing" method="post" novalidate="novalidate"> 
```

注意`form-horizontal`类属性中的 no。

当我尝试：

```
 <%= simple_form_for @listing, :defaults => { :wrapper_html => { :class => 'form-horizontal' } } do |f| %> 
```

这是生成的输出：

```
<form accept-charset="UTF-8" action="/listings" class="simple_form new_listing" id="new_listing" method="post" novalidate="novalidate"> 
```

它还将该类应用于表单中的所有元素，例如：

```
<div class="control-group select optional form-horizontal"> 
```

这不是我想要的结果。

我也试过这个：

```
 <%= simple_form_for @listing, :defaults => { :input_html => { :class => 'form-horizontal' } } do |f| %> 
```

这是`form`它产生的输出：

```
<form accept-charset="UTF-8" action="/listings" class="simple_form new_listing" id="new_listing" method="post" novalidate="novalidate"> 
```

这看起来就像其他一些输出，但不同之处在于它将该类应用于`input`表单中的所有元素，如下所示：

```
<input class="numeric float optional form-horizontal"> 
```

所以....我已经尝试了我能想到的一切，以及文档中看到的一切（我认为）。

我错过了什么？

谢谢。

**编辑1：**

我还尝试了明显的“正常”版本：

```
<%= simple_form_for @listing, :class => 'form-horizontal' do |f| %> 
```

这会产生：

```
<form accept-charset="UTF-8" action="/listings" class="simple_form new_listing" id="new_listing" method="post" novalidate="novalidate"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:12:53.293

```
<%= simple_form_for @listing, :html => { :class => 'form-horizontal' } do |f| %> 
```

那不行吗？

# c# - 使用 DbSet.Find() 的空引用异常

> ID：14542964
> 
> 赞同：0
> 
> 时间：2013-01-27T00:05:31.090
> 
> 标签：c#, sql-server, entity-framework, exception-handling, nullreferenceexception

看截图：

![在此处输入图像描述](../Images/f7bbbfccf73ca9263b6273c24de21dbd.png)

正如您在上图中看到的，当我尝试调用*Db.Players.Find()*时，我得到了一个空引用异常，尽管事实上我给它的值很清楚地存在于表中我要求它搜索。

我仍然只是一个新手，所以我真的不知道我可能做错了什么。

我想要的只是能够查看 Players 表，并将具有指定 ID 的玩家添加到 Pairs.Players，这只是玩家本身的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:42:25.393

`Pair.Players`可能为空。

# php - 表单提交后，Drupal 7 重定向到特定页面（选项卡）

> ID：14542975
> 
> 赞同：4
> 
> 时间：2013-01-27T00:06:52.860
> 
> 标签：php, drupal, drupal-7, drupal-modules

提交表单后，我正在尝试重定向页面。表格位于“formulaires/demande-de-subvention-pour-les-entraineurs”页面，我想重定向到“formulaires/demande-de-subvention-pour-les-entraineurs/entraineurs”我该怎么做？

```
function ulsform_form_alter(&$form, $form_state, $form_id) {
  if ($form_id == 'ulsform_demande_de_subvention_pour_les_entraineurs_form') {
    $form['#submit'][] = 'ulsform_demande_submited_form';
  }else if($form_id == 'ulsform_demande_de_subvention_pour_les_entraineurs_02_form'){
    $form['#submit'][] = 'ulsform_entraineur_submited_form';
  }
}

function ulsform_demande_submited_form(&$form, $form_state){
  global $user;

  $v = $form_state['values'];
  $form_state['redirect'] = 'formulaires/demande-de-subvention-pour-les-entraineurs/entraineurs';

/* My code to insert into the db */    

} 
```

它不起作用，当我尝试在另一个帖子上创建一个表单['#redirect'] 时，它也不起作用。我可以尝试什么？

感谢您的帮助！我是drupal的新手

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-27T02:33:57.067

您忘记了通过`$form_state`引用传递，因此您的更改仅在`form_alter`函数中起作用。

如下更改您的函数签名。注意`&$form_state`：

```
function ulsform_form_alter(&$form, &$form_state, $form_id) { 
```

$form_state['redirect'] 可以是一个数组或一个简单的字符串。如果它是一个字符串，用户将被重定向到那里。如果它是一个数组，它将根据[drupal_goto](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_goto/7)的工作方式工作。

```
$form_state['redirect'] = array(
  'node/123',
  array(
    'query' => array(
      'foo' => 'bar',
    ),'fragment' => 'baz'); 
```

到`node/123?foo=bar#baz`

```
$form_state['redirect'] = 'node/123' 
```

到`node/123`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-07T15:39:31.320

我在自定义模块中有以下代码，在编辑内容后它总是重定向到 /admin/content

```
function redirect_to_edit_form_alter(&$form, &$form_state, $form_id) {
    if ($form_id == "page_article_node_form") {
        $form['#submit'][] = "_redirect_to_edit";
    }
}

function _redirect_to_edit($form, &$form_state) {
    $form_state['redirect'] = array(
            'node/' . $form['nid']['#value'],
            array(
                    'query' => array(
                            'destination' => 'node/' . $form['nid']['#value'],
                    )
            )
    );
    dpm($form_state);

    drupal_set_message("L'article a été mis à jour.", 'status');
} 
```

我最后一次尝试添加的查询部分。提交后，我可以阅读我的自定义消息，但我不能让用户停留在编辑页面。

我在跳过什么？

谢谢。

**编辑：**

关于[https://www.drupal.org/node/1074616](https://www.drupal.org/node/1074616)和我在这个问题上的经验，有些情况下重定向不起作用。对我来说，我已经实现了像这样进行所需的重定向：

```
function redirect_to_edit_form_alter(&$form, &$form_state, $form_id) {
    if ($form_id == "page_article_node_form") {
        //$form['actions']['submit']['#submit'][] = '_redirect_to_edit';
        $form['#action'] = '?destination=node/' . $form['nid']['#value'] . '/edit';
    }
} 
```

# javascript - 主干.js 和 MVC - 多个页面

> ID：14542976
> 
> 赞同：-1
> 
> 时间：2013-01-27T00:06:56.410
> 
> 标签：javascript, model-view-controller, backbone.js

我查看了backbone.js，有点困惑，它是专门用于创建一页网站，还是可以用来创建动态页面更新（比如facebook新闻源）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:35:43.090

Backbone 并非专门用于创建单页网站。它基本上可以帮助您创建动态页面，如果您想将其扩展到整个站点并使其成为单页站点，那也是可能的。

# javascript - 执行一段时间后重复的功能的好模式是什么？

> ID：14542985
> 
> 赞同：0
> 
> 时间：2013-01-27T00:07:54.080
> 
> 标签：javascript, settimeout, setinterval

使用 setInterval/setTimeout，我怎样才能确保我的函数在等待一段时间然后再次执行之前完成执行，完成，然后等待，等等。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T00:10:50.533

这是一系列链接的经典用例`setTimeout`：

```
setTimeout(foo, yourInterval);
function foo() {
    // ...do the work...

    // Schedule the next call
    setTimeout(foo, yourInterval);
} 
```

由于`setTimeout`只安排对该函数的*一次*调用，因此您可以在函数完成其工作后重新安排它（如果合适的话）。

与 不同`setInterval`的是，即使您的函数所做的工作是异步的，只要您从异步工作的回调中重新安排它，它也能正常工作。例如：

```
setTimeout(foo, yourInterval);
function foo() {
    callSomethingAsynchronous(function() {
        // ...we're in the async callback, do the work...

        // ...and now schedule the next call
        setTimeout(foo, yourInterval);
    });
} 
```

相反，如果你正在做一些异步的事情，那么`setInterval`快速使用就会变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:25:02.223

```
function execute_and_wait( repeated_function, time_delay ) {
    var next_run = function () {
        var complete_callback = function () {
            next_run();
        }
        var killcode = setTimeout(
            function () {
                repeated_function(complete_callback);
            },
            time_delay 
        );
        return killcode;
     };
     return next_run;
} 
```

用法 ：

```
// Runs a function that prints hi every 2 seconds
// Kills it after 10 seconds
var ka = function (r) { alert('hi'); r(); };
var runka = execute_and_wait(ka,2000);
var killka = runka();
setTimeout( 
   function () {
       clearTimeout(killka);
   },
   10000
); 
```

# linux - 为什么在 Linux 中进行 I/O 是不间断的？

> ID：14542987
> 
> 赞同：11
> 
> 时间：2013-01-27T00:08:03.887
> 
> 标签：linux, process, io, linux-kernel, sleep

其背后的原理是什么？如果允许执行 I/O 的进程处理信号，会产生什么不良后果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-05T04:42:27.660

现在我已经阅读了 Maurice Bach 的《Unix 操作系统的设计》一书，让我自己回答这个问题。

简而言之，让 I/O 不可中断是为了让 I/O 任务尽快完成，不受信号干扰。

我从书中获得的一些相关知识：

1.  “不间断”这个词应该是指“不间断的睡眠”。当一个进程处于不间断睡眠时，它不能被信号唤醒，也不会处理信号。
2.  一个进程在以下情况下处理信号： a．它正在内核模式下运行，即将返回用户模式。湾。当睡眠可中断时，即将进入和离开睡眠状态。
3.  当一个睡眠进程被信号唤醒时会发生什么？它将处理信号，默认操作是退出进程。当进程等待 I/O 完成时，您当然不希望它过早退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:28:22.130

根据[Linux Developers Documentation](http://www.lindevdoc.org/wiki/Uninterruptible_sleep)，这是为了防止数据丢失并避免硬件进入不一致的状态。

想象一下，如果一个`read()`（例如来自磁盘的）是可中断的并且信号处理程序以及其他职责改变了读取缓冲区会发生什么。由于信号是异步的，读取结果将无法重现。如果写作被打断，也会出现类似的混乱。

# .net - mvc4 + jquery mobile + 多页表单最佳实践

> ID：14542991
> 
> 赞同：0
> 
> 时间：2013-01-27T00:08:38.673
> 
> 标签：.net, forms, jquery-mobile, asp.net-mvc-4

在 jquerymobile 和 mvc4 中表单拆分为多个页面的任何准则或最佳实践？Jqm 允许在一个 html 文档中将多个 div 设置为“页面”，但是对于我正在成像数据验证等的表单，走这条路会让人头疼吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:08:02.250

在过去的几个月里，我一直在探索基于 asp.net 的 jQuery Mobile，包括 Web 表单和 mvc。首先，我意识到这不是你的问题的一部分，jQM 和 web 表单和回发模型从根本上被破坏了。使用 web 的唯一方法是关闭 jQM 的 mobileinit 中的 ajax 加载。我最近完成了由 4 或 5 个页面组成的小型站点，需要部署在 Web 表单之上。我最终使用了一个包含 4 或 5 个“页面”/`<div data-role="page">`元素的 html 文件。所有数据交换都是通过 ASMX 服务调用完成的。一些 JavaScript 和 KnockoutJS。它工作得很好，但对于这样一个简单的网站来说过于复杂了。

至于 mvc，jQM 模型及其 ajax 实现工作正常。混合单页和多页模板可以，但您需要在应用程序的不同区域之间进行清晰的划分。我使用了后一种方法，最后转向单页模板，主要是因为它是与我当前的 mvc 开发经验最一致的方法。我还探索了一种完整的 SPA 方法，但最终放弃了它，因为它不是必需的，并且大大复杂了我的工作。

我继续挣扎的唯一一点是，大多数具有移动体验的用户都希望当您通过任何链接导航离开页面时，所有数据都将保存在页面上。如果您只有标准表单`submit`按钮和其他导航按钮，这些按钮可能不在您的`form`，您将需要调用某种类型的 javascript/ajax 以确保您的表单被提交。请记住，您的导航按钮可能位于页脚和表单之外。

总的来说，我仍然对 jQM 和 mvc 的可能性感到非常兴奋。如果我能以这些为职业，我将成为一个快乐的露营者。jQM 和 MVC 的端到端示例并不多。如果您想就此进行更多讨论，我将很高兴。我显然没有所有的答案，但经历了一些痛苦，可以引导你远离一些方法。

# java - 将宏嵌入到openoffice使用java

> ID：14542994
> 
> 赞同：0
> 
> 时间：2013-01-27T00:09:04.793
> 
> 标签：java, openoffice.org, openoffice-impress

我想问是否可以**通过 Java 代码**将宏（OpenOffice.org BASIC 宏）嵌入到 OpenOffice 文档中，尤其是 Open Office Impress？如果答案是肯定的，我可以用来克服它的库或 API 的名称是什么？我一直在互联网上彻底寻找它，找不到任何可以解决我的问题的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:13:04.197

这个怎么样？

[http://wiki.openoffice.org/w/index.php?title=Documentation/DevGuide/Scripting/Writing_Macros](http://wiki.openoffice.org/w/index.php?title=Documentation/DevGuide/Scripting/Writing_Macros)

文档有一些很好的例子来解释 api。不要浪费时间查看论坛。它是失败的不活动的。

# ios - iOS 循环遍历对象的属性并添加动作

> ID：14542997
> 
> 赞同：3
> 
> 时间：2013-01-27T00:09:08.913
> 
> 标签：ios, iterator

我有一个具有几个类似属性的类 - UISliders，我想为用户何时开始和结束使用每个滑块添加操作。每个滑块都将链接到同一个选择器，所以我想只对它们进行迭代，而不是写出 10 个几乎相同的代码块。

问题是，最有效的方法是什么？我尝试过这样的事情： [在运行时循环遍历所有对象属性，](https://stackoverflow.com/questions/9269372/loop-through-all-object-properties-at-runtime)但 问题是我无法调用`addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents`. `objc_property_t property`我应该将属性粘贴在数组中并对其进行迭代吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T00:32:20.917

如果您不需要在运行时检查对象属性的动态级别，那么 an`NSArray`是最直接和可读的方法；就效率而言，我想创建一个动态类型的数组`void *`并迭代它可能会更快，但考虑到典型的大小，以值得怀疑的速度回报为你做更多的工作。

```
for (UISlider *slider in @[self.slider1, self.slider2, self.slider3]) {
    [slider addTarget:self action:@selector(action:) forControlEvents:UIControlEventValueChanged];
} 
```

如果您确实需要调查您的属性，那么我会像其他问题的答案所建议的那样处理它。我的回答起初建议解析属性属性字符串以考虑自定义命名属性，但显然 KVC 会为您处理这些问题。

```
unsigned int numberOfProperties;
objc_property_t *properties = class_copyPropertyList([self class], &numberOfProperties);
for (int i = 0; i < numberOfProperties; i++) {
    objc_property_t property = propertieses[i];
    NSString *propertyName = [NSString stringWithUTF8String:property_getName(property)];
    id valueForProperty = [self valueForKey:propertyName];
    if ([valueForProperty isKindOfClass:[UISlider class]]) {
        [(UISlider *)valueForProperty addTarget:self 
                                         action:@selector(action:) 
                               forControlEvents:UIControlEventValueChanged];
    }
}
free(properties); 
```

# php - 创建没有最终用户身份验证的播放列表 - YouTube API v3

> ID：14542998
> 
> 赞同：1
> 
> 时间：2013-01-27T00:09:13.983
> 
> 标签：php, youtube-api, google-api-php-client

我正在尝试找出一种方法来创建播放列表、上传视频等，而无需自己进行用户身份验证，而是让服务器使用我的 YouTube 帐户为他们执行此操作。

我开始只是做一个添加`mine`参数的频道列表，因为这需要身份验证。

这是我使用的代码，结果可以在[http://www.daysofthedead.net/testing/playlist.php看到](http://www.daysofthedead.net/testing/playlist.php)

您可以在底部看到代码有效，因为我可以从不需要身份验证的搜索中提取结果。但是频道列表是空的，需要认证。

```
<?php
require_once 'GoogleClient/Google_Client.php';
require_once 'GoogleClient/contrib/Google_YoutubeService.php';

// Set your client id, service account name, and the path to your private key.
// For more information about obtaining these keys, visit:
// https://developers.google.com/console/help/#service_accounts
const CLIENT_ID = 'xxxxxxxxxx.apps.googleusercontent.com';
const SERVICE_ACCOUNT_NAME = 'xxxxxxxxxx8@developer.gserviceaccount.com';

// Make sure you keep your key.p12 file in a secure location, and isn't
// readable by others.
const KEY_FILE = 'xxxxxxxxxx-privatekey.p12';

$client = new Google_Client();
$client->setApplicationName("Google YouTube Sample");

// Set your cached access token. Remember to replace $_SESSION with a
// real database or memcached.
session_start();
if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

// Load the key in PKCS 12 format (you need to download this from the
// Google API Console when the service account was created.
$key = file_get_contents(KEY_FILE);
$client->setAssertionCredentials(new Google_AssertionCredentials(
    SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/youtube'),
    $key)
);

$client->setClientId(CLIENT_ID);
$service = new Google_YouTubeService($client);

# User to search Youtube for.
$search_user = "BruceLeeOfficialPage";

# listSearch optional parameters
$search_optParams = array('part' => 'snippet', 'q' => $search_user, 'maxResults' => 2, 'type' => 'video');
# Search YouTube
$search = $service->search->listSearch($search_optParams);

# listChannels optional parameters.
$channel_optParams = array('maxResults' => 50, 'mine' => 'true');
# Get YouTube user's channel information
$channel = $service->channels->listChannels('snippet', $channel_optParams);

// We're not done yet. Remember to update the cached access token.
// Remember to replace $_SESSION with a real database or memcached.
if ($client->getAccessToken()) {
  $_SESSION['token'] = $client->getAccessToken();
}
?>
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link rel='stylesheet' href='style.css' />
</head>
<body>
<header><h1>YouTube API v3 Sample App</h1></header>
<div class="box">

<?php if(isset($search)): ?>
<div class="search"><H1>Search:</H1>
<pre><?php print_r($search); ?></pre></div>
<?php endif ?>

<?php if(isset($channel)): ?>
<div class="channel"><H1>Channel:</H1>
<pre><?php print_r($channel); ?></pre></div>
<?php endif ?>

</div>
</body>
</html> 
```

有人能帮我解决这个问题吗？有什么解决办法吗？代码示例将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:51:20.077

您正在尝试使用 OAuth 2 for Service Accounts 流程，YouTube API 不支持该流程。支持的流程列表记录在[https://developers.google.com/youtube/v3/guides/authentication](https://developers.google.com/youtube/v3/guides/authentication)

通常，您需要使用 Web 浏览器完成一次支持流程，从那时起，您可以在无需用户干预的情况下提出请求。

# actionscript-3 - StageX 和 StageY 下台

> ID：14542999
> 
> 赞同：0
> 
> 时间：2013-01-27T00:09:18.080
> 
> 标签：actionscript-3, flash, actionscript, air

我遇到了一个难题，我有一个 vcam（虚拟摄像头）可以将我的播放器带离舞台，这使得触摸事件的工作方式不同，因为我使用`var touchX = stageX`and `var touchY = stageY`，但是当视图离开舞台时这不起作用. 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:48:11.017

我想你可以做到`e.localX + obj.x`。