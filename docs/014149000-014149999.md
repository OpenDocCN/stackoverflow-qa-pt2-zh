# StackOverflow 问答 14149000-14149999

# coding-style - 第一次将库从一种语言移植到另一种语言

> ID：14149006
> 
> 赞同：2
> 
> 时间：2013-01-03T23:32:01.890
> 
> 标签：coding-style, porting

我正在将一个库从 C++ 移植到 Java。这是我第一次，我不确定“移植”的真正含义是什么？具体来说，如果作者将变量命名为“A”，我认为更好的名称是“B”。方法、类和命名空间也是如此。另外，如果我认为可以做得更好怎么办？移植是否意味着我应该尽可能多地保留原始代码精神，但仍然允许自己自由地改进东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:36:55.437

它不一定必须是一对一的翻译（在许多情况下，它不能完成）。移植只是用不同的语言/环境/等重写一个软件。有时移植需要你调整并以不同的方式实现它们，所以我认为你帖子的最后一句话几乎抓住了事情的要旨。

我认为这相当于将一本书从英语翻译成另一种语言。在某些情况下，需要根据如何表达源材料的意图/功能进行判断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:42:55.763

当从系统 A 移植到系统 B 时，世界就是你的牡蛎。如果您认为这是一种改进，您几乎可以改变任何东西。唯一需要注意的是在处理接口时。比如说，你正在移植一个 API，例如，命名外部可用的方法不是一个好主意，因为这会破坏一些东西。跨多个类跟踪命名问题是一大难题。

作为一个从一种语言移植到另一种语言的人，我建议首先坚持实现细节。一个好的工程原则是随时改变一件事。这样，当事情没有按预期运行时，您就会知道应该归咎于您的实现，而不是一些愚蠢的命名问题。当您确实要重命名时，我想这是不言而喻的，要非常小心并经常备份。这是软件版本控制可以为您节省数小时时间的一种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T00:33:54.550

当将库从一个平台“移植”到另一个平台时，您就是在移植**功能**。您*不是在*移植代码风格。这不像在文学中，一个人必须保持作品的风格，记住隐喻和抑扬格五音步或你有什么。

# database - 在运行时添加持久性单元

> ID：14149009
> 
> 赞同：0
> 
> 时间：2013-01-03T23:32:22.377
> 
> 标签：database, datanucleus

假设您有一个应用程序，用户可以在某个时候将数据从某个数据存储区拉入内存，但您希望允许用户在运行时添加数据源。您能否使用数据核提供此功能？似乎数据核只允许您在设计时使用 persistence.xml 文件添加数据源。有没有办法在运行时添加持久性单元？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:53:22.957

您似乎还没有阅读此页面底部的文档 [http://www.datanucleus.org/products/accessplatform_3_2/jpa/persistence_unit.html](http://www.datanucleus.org/products/accessplatform_3_2/jpa/persistence_unit.html)

# events - 在 Corona SDK 中，当对象的 alpha 为 0 时获取触摸事件

> ID：14149012
> 
> 赞同：2
> 
> 时间：2013-01-03T23:32:41.813
> 
> 标签：events, lua, alpha, coronasdk

例如，如果我想要一个不可见的盒子，如果它的 alpha 为 0，我怎么能获得触摸事件？或者有没有另一种方法可以制作一个隐形盒子。

```
local function invisiblebuttontouch(event)
    if event.phase == 'began' then
        print (event.x..","..event.y)
    end
end

button = display.newRect(1,1,300,300)
button:addEventListener("touch",invisiblebuttontouch)
button.alpha = 0 
```

它永远不会打印出 x 和 y，但是如果我不将 alpha 设置为 0，那么它可以正常工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T13:06:30.317

您需要将此行添加到您的代码中：

```
button.isHitTestable = true 
```

来源：[http ://docs.coronalabs.com/api/type/DisplayObject/isHitTestable.html](http://docs.coronalabs.com/api/type/DisplayObject/isHitTestable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T14:37:48.500

应该注意的是，如果其中一个父组不可见而忽略 isHittestable，则不会触发目标的回调。同样设置母组的 isHittestable 也不会改变这一点。

# jquery - 播放 Flash 视频时 jQuery 淡入淡出效果不起作用

> ID：14149015
> 
> 赞同：0
> 
> 时间：2013-01-03T23:32:54.183
> 
> 标签：jquery, firefox, jquery-animate, flash

我正在使用[http://jplayer.org](http://jplayer.org)插件将视频播放为 Flash。

在视频结束前几秒钟，我试图让它淡出显示它背后的内容，它与视频的最终帧相匹配，因此视频和静态内容之间的过渡看起来很平滑。

这在 Chrome 中效果很好，但是 IE9 和 FF17 根本不会淡化视频。他们都只是等待它结束，然后立即隐藏视频。

视频位于`div`整个屏幕上，并且在视频开始播放时已经加载了后面的内容。

在 jPlayer 构造函数的情况下，**以约 60% 的持续时间隐藏视频**的相关代码。`timeupdate`

```
$(".landing-video").jPlayer({
    ...
    timeupdate: function (e) {
       var progress = e.jPlayer.status.currentTime / e.jPlayer.status.duration;
       if (progress > 0.6 && isVideoPlaying) {
          isVideoPlaying = false;
          $(".landing").hide("fade", 3500);         
       }
    }
    ...
}); 
```

再次重申，该效果在 Chrome 上效果很好，只是在 IE 和 FF 上不行。同样更改动画时间似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:54:57.143

我可以看到的一个问题是 jquery`hide`函数不`"fade"`作为参数。

而不是使用[hide](http://api.jquery.com/hide/)：

```
$(".landing").hide("fade", 3500); 
```

你想使用[fadeOut](http://api.jquery.com/fadeOut/)：

```
$(".landing").fadeOut(3500); 
```

我很惊讶这在 Chrome 中工作。

除此之外，请确保您已`wmode` `param`设置为`opaque`：

```
<param name="wmode" value="opaque"> 
```

# php - 通过比较 varchar 中的所有字母/数字来进行不精确的搜索。mysql, php

> ID：14149021
> 
> 赞同：0
> 
> 时间：2013-01-03T23:33:24.400
> 
> 标签：php, mysql

所以我有一个型号数据库。我需要做的是，如果存储的型号是“ `ABCD1234`”并且用户搜索“ `BCD123`”，它仍然会返回结果。如果数据库条目在开头或结尾包含搜索到的模型#，则使用“ `like`”对我有用，但我需要在数据库条目包含搜索到的数字时返回结果的东西。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:13:55.703

用 % 包围搜索文本，例如：

SELECT * FROM table WHERE model LIKE '%BCD123%';

# css - 如何使用 Sublime Text 2 在 CSS 中删除冒号后的多余空格？

> ID：14149024
> 
> 赞同：6
> 
> 时间：2013-01-03T23:33:35.170
> 
> 标签：css, macos, sublimetext2, sublimetext

当为 CSS 样式触发自动完成时，Sublime 默认会在冒号后添加一个空格，如下所示：

```
position: relative; 
```

如何删除这个空间？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T19:38:13.313

我做了更多的挖掘，并想提出一个替代解决方案。

1.  `~/Library/Application Support/Sublime Text 2/Packages/CSS/css_completions.py`在 Sublime 中打开。

2.  在第 190 行，删除冒号后的空格：

    ```
    l.append((p, p + ": ")) 
    ```

我能想到的唯一警告是，当您更新 Sublime 时，这可能会被覆盖，但如果不安装额外的包，这似乎工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:00:14.010

编辑：我在下面提交了一个不同的解决方案，但想把它留在这里，以防人们对 Emmet 感兴趣，它看起来仍然很整洁。

我想提供一个经过测试的解决方案：PI`:<space>`用`:)`.

*   为 Sublime Text 2 安装 Emmet 包：[https](https://github.com/sergeche/emmet-sublime) ://github.com/sergeche/emmet-sublime （最简单的方法是通过包管理器）

> 这似乎是一个非常流行的插件。我会先扫描功能集，因为它看起来会添加一堆你可能不想要的快捷方式。

*   查看有关自定义的文档：http: [//docs.emmet.io/customization/preferences/](http://docs.emmet.io/customization/preferences/)
*   搜索页面`css.valueSeparator`- 这是您要更改的字段。它默认为`:<space>` - 这里有编辑包首选项的说明：http: [//docs.emmet.io/customization/](http://docs.emmet.io/customization/)

> 我想我可能会自己保留/尝试这个包。我希望它能给你你正在寻找的东西。

**编辑：** 我发现 emmet 说明有些含糊。具体来说，在 Sublime Text 2 中转到：

`Sublime Text 2 > Preferences > Package Settings > Emmet > Settings - User`并以 JSON 格式输入您的覆盖首选项。方便地，您可以从中剪切和粘贴模板代码`Sublime Text 2 > Preferences > Package Settings > Emmet > Settings - Default`（但不要理会该文件，因为下次更新包时它将被覆盖）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T10:17:48.577

额外的答案补充说，如果您正在使用 Sass 或 SCSS 文件，则需要在 ~/Library/Application Support/Sublime Text 2/Packages/Sass/Snippets 中逐一编辑片段以实现此目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-12T10:42:06.230

如果您使用的是 Emmet 包，则以下解决方案也适用于 Sublime Text 3：

打开：Sublime Text 3 > Package Setting > Emmet > Settings-User 并粘贴

```
{
    "preferences": {
        "css.valueSeparator": ":",
    },
} 
```

* * *

## 回答 #5

> 赞同：-9
> 
> 时间：2016-02-17T13:08:39.003

Sublime Text 3 的解决方案：

安装包控制（如果尚未安装）：打开控制台 ctrl + `

插入：

```
import urllib.request,os,hashlib; h = '2915d1851351e5ee549c20394736b442' + '8bc59f460fa1548d1514676163dafc88'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by) 
```

按 eneter，检查控制台并重新启动程序。

组合 Ctrl + Shift + P 启动 Pacage 控件 选择“Pacage control: Install Pacage”，等待新窗口 选择 PackageResourceViewer 选择“PackageResourceViewer: Open Resource” 选择 CSS 选择 css_completions.py

改变：

```
.append ((p, p + ":")) 
```

在：

```
.append ((p, p + ":")) 
```

如果你有 Emmet Package，你还需要做：

在顶部菜单 Package Setting> Emmet> Settings-User 并粘贴

```
{
    "Preferences": {
        "Css.valueSeparator": ":"
    }
} 
```

# windows-phone-8 - 使用远程图像创建 CycleTile

> ID：14149026
> 
> 赞同：8
> 
> 时间：2013-01-03T23:33:43.937
> 
> 标签：windows-phone-8

我已经看到了许多显示 CycleTile 的示例，但这些都使用了本地图像。一旦应用程序首次运行并将 CycleTile 指向远程图像，是否可以设置这些图像？或者如果我确实需要先将这些保存到手机中，我怎样才能让 CycleTile 引用它们？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-04T02:15:33.983

CycleTileTemplate & CycleTileData 仅支持本地 URI，不支持远程 Web URI。这意味着您只能从从 XAP 安装的文件或从 IsoStore 中的文件设置循环图像的来源。

为了支持 CycleTileData 中的远程图像，您需要在周期性后台代理中下载图像，将它们保存到 IsoStore，然后使用这些图像更新 CycleTileData。推送通知在这里不起作用，因为图像需要是本地的，ShellTileSchedule 也不需要。

确保将图像保存到“/Shared/ShellContent”下的 IsoStore，并将其 URI 设置为“isostore:/Shared/Shellcontent/myImage.png”，否则开始屏幕磁贴将无法访问它们。

让我们看一个例子。首先，我们首先编写一个并行线程算法，该算法启动 9 个下载线程，等待结果，然后更新切片：

```
private IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();

private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
        var threadFinishEvents = new List<WaitHandle>();

        DownloadImages(threadFinishEvents);

        new Thread(()=>
        {
            Mutex.WaitAll(threadFinishEvents.ToArray());

            UpdateTiles();

            isoStore.Dispose();
        }).Start();
} 
```

接下来，我们将 9 个图像下载到 IsoStore“/Shared/ShellContent”。我们将特别注意为每个 Web 下载添加新的线程标志，并在文件位于 IsoStore 后将标志设置为完成。

```
private void DownloadImages(List<WaitHandle> threadFinishEvents)
{
    for (int i = 0; i < 9; i++)
    {
        var localI = i;

        var threadFinish = new EventWaitHandle(false, EventResetMode.ManualReset);
        threadFinishEvents.Add(threadFinish);

        var request = WebRequest.CreateHttp("http://www.justinangel.net/storage/691x336.png");
        request.BeginGetResponse(ir =>
        {
            var result = request.EndGetResponse(ir);
            using (var isoStoreFile = isoStore.OpenFile("shared/shellcontent/myImage" + localI + ".png",
                                                        FileMode.Create,
                                                        FileAccess.ReadWrite))
            using (var response = result.GetResponseStream())
            {
                var dataBuffer = new byte[1024];
                while (response.Read(dataBuffer, 0, dataBuffer.Length) > 0)
                {
                    isoStoreFile.Write(dataBuffer, 0, dataBuffer.Length);
                }
            }

            threadFinish.Set();
        }, null);
    }
} 
```

最后，我们将更新动态磁贴以使用 IsoStore 中的新图像。

```
private void UpdateTiles()
{
    ShellTile.ActiveTiles
        .First()
        .Update(new CycleTileData()
        {
            Title = "Cyclical",
            CycleImages = new Uri[]
            {
                new Uri("isostore:/Shared/ShellContent/myImage0.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage1.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage2.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage3.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage4.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage5.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage6.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage7.png", UriKind.Absolute), 
                new Uri("isostore:/Shared/ShellContent/myImage8.png", UriKind.Absolute), 
            }
        });
} 
```

有几件有趣的事情需要考虑：

1.  周期性后台代理只有 25 秒的时间来完成它们的操作，因此在激活 Mutex.WaitAll 时添加计时器阈值并让它优雅地失败可能是有意义的。
2.  在某些网络条件下，在 25 秒内下载 9 张图像可能根本无法工作，因此最好对此进行优化。您可以使用更少的图像，也可以每 30 分钟只更新几张图像。
3.  将 CycleTileData 更新到相同的文件 URI 不会触发磁贴的更新 (AFAIK)。因此，您将需要比 myImage0 更好的文件名，而是为图像提供唯一的文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T00:49:55.060

对于 CycleTile，图像必须是本地的。您可以设置一个[定期任务](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.scheduler.periodictask%28v=vs.105%29.aspx)来刷新图像，然后将这些图像存储在本地/隔离存储中的 shared/shellcontent 特殊文件夹中（例如，ms-appdata:///local/shared/shellcontent/image01.png）

[Windows Phone 8 Jumpstart 的第 7 节](http://channel9.msdn.com/Series/MVA-Jump-Start/Building-Apps-for-Windows-Phone-8-Jump-Start-07-Tiles-and-Lock-Screen-Notifications)是一个很好的参考 - 特别是大约 25:30。

# php - 使用包含 @ 的用户名通过 ftp:// 连接到 FTP

> ID：14149027
> 
> 赞同：1
> 
> 时间：2013-01-03T23:33:47.310
> 
> 标签：php, ftp

我了解到您可以将 url 用于 filesize()、filetype()、isdir() 等。

这个网址是： [ftp://user:password@example.com/pub/fichier.txt](ftp://user:password@example.com/pub/fichier.txt)

但是，我想知道如果您的用户名是 sjobs@apple.com

我会这样写网址吗：

```
ftp://sjobs@apple.com:funpassword@ftp.apple.com/pub/ficher.txt 
```

此外，共享主机上的 CPanel 似乎没有提供在没有 @ 符号的情况下进行连接的选项。

换句话说，当用户名是 dog@cat.com 时，我如何通过[ftp://user:password@example.com登录。](ftp://user:password@example.com)

谢谢赛勒斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:41:12.833

来自[http://www.ietf.org/rfc/rfc1738.txt](http://www.ietf.org/rfc/rfc1738.txt)

> 用户名（和密码）（如果存在）后跟商业符号“@”。在用户和密码字段中，必须对任何“:”、“@”或“/”进行编码。

使用[`rawurlencode()`](http://php.net/rawurlencode)- 参见示例 #1

# xcode - 如何将所有文件从 RestKit 复制到我的项目中？

> ID：14149028
> 
> 赞同：0
> 
> 时间：2013-01-03T23:33:47.437
> 
> 标签：xcode, restkit

我在 Xcode 中将 RestKit 添加到我的项目时遇到问题。我已经下载了它，当我将 RestKit.xcodeproj 文件拖到我的项目导航器中时，我只得到一个文件，而不是包含“代码”、“网络”等文件夹的整个包。我已经成功地将它添加到项目中以前也是这样，现在不行了。重新下载 RestKit 是我使用过的一种解决方法，但我不应该为我所做的每个项目都这样做。如何确保所有 RestKit 文件都进入我的项目？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:25:38.070

好的，我想出了解决我自己问题的方法。如果其他人遇到此问题，请尝试关闭并重新打开 Xcode。当我这样做时，RestKit 的文件进入了包含 RestKit.xcodeproj 文件的项目。

# javascript - 如果提交处理程序返回 true，则不会在 Safari 中执行 jQuery show() 函数

> ID：14149038
> 
> 赞同：2
> 
> 时间：2013-01-03T23:34:58.633
> 
> 标签：javascript, jquery, safari, forms

好的，我已将提交事件处理程序绑定到表单。处理程序设置为验证数据，然后在验证通过后禁用进一步的表单提交，并显示“请等待...处理”消息。

这是基本结构：

```
function handler() {
    // Validation stuff goes here.
    ...
    // Validation passes, show message and return true.
    $('#processing-msg').show();  // Show the 'processing' message.
    $form.bind('submit', function() { return false }); // Disable further form submits.
    return true;  // Proceed with form submittal.
} 
```

直到最后一条`return`语句，如果我 break before `return true`，将显示处理消息。但是，如果我允许它，`return true`则消息根本不会出现。提交按钮也不会显示为禁用（过程的另一部分）。这适用于除 Safari 之外的几乎所有浏览器。我试过注释掉提交禁用逻辑，但没有骰子。

### 更新

我无法在 jsfiddle 上完全重新创建问题。但在这里您可以看到 Safari 中调用的函数顺序有何不同（`alerts()`在显示消息之前发生）：http: [//jsfiddle.net/skttw/3/](http://jsfiddle.net/skttw/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:44:55.957

问这个问题得到了答案：[JavaScript commands not executed in order in Safari](https://stackoverflow.com/questions/14166459/javascript-commands-not-executed-in-order-in-safari)

显然 Safari 根据其内部 tic 呈现对 HTML 的更改。因此，所有调用的函数*都*按顺序执行，但不一定要*渲染*。

此外，在某些功能的执行过程中，渲染会停止，`alert()`作为其中之一，在我的情况下，`onsubmit`事件！这就是为什么我看到乱序的结果。

所以我最终使用了一些肮脏的东西：

```
 var show = function() { $('#processing_msg').show() };
            setTimeout(show,0); 
```

# javascript - 复选框“错误：无法获取属性‘已检查’的值：对象为空或未定义”

> ID：14149041
> 
> 赞同：4
> 
> 时间：2013-01-03T23:35:39.277
> 
> 标签：javascript, asp.net, checkbox

我正在尝试解决是否选中了复选框。这似乎相当直截了当。

```
<script type="text/Javascript">
function ValidateReqNum() {

        var zCheckBox = document.getElementById('chkAllJobs');

        if (zCheckBox.checked)
            alert("true");

        if (!zCheckBox.checked)
            alert("false");

        return true;
    }
</script> 
```

和复选框：

```
 <asp:CheckBox ID="chkAllJobs" runat="server" Text="All Jobs" /> 
```

调用自：

```
<asp:Button ID="btnPrintReport" runat="server" Text="Run Report" 
  OnClientClick="return ValidateReqNum();" OnClick="CreatePDFJobReport" /> 
```

我已经尝试了几十种不同的方法并且它不断地回来

```
Error: Unable to get value of the property 'checked': object is null or undefined 
```

我在同一个 aspx 页面中的其他元素报告得很好。我可以从我的 c# 代码中调用 chkAllJobs，我也可以解决它是否也从 c# 检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:10:33.113

如果您使用母版页，则客户端子页的控制 ID 将与其服务器 ID 不同。因此，不要使用服务器控件名称，而是尝试将其客户端 ID 用作；

```
var zCheckBox = document.getElementById('<%= chkAllJobs.ClientID %>');

function ValidateReqNum() {
   alert(zCheckBox.checked);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:47:26.553

这是复选框如何工作的示例。如果您有以下复选框：

```
 <input id="Checkbox" type="checkbox" name="mycheckbox" value="5"/> 
```

然后您可以使用表单集合获取值

```
label_Result.text = Request.Form["mycheckbox"]; 
```

因此，只有选中该复选框，您才会得到值 5。

# javascript - 如果 IE8 兼容则弹出

> ID：14149043
> 
> 赞同：1
> 
> 时间：2013-01-03T23:35:46.343
> 
> 标签：javascript, internet-explorer, internet-explorer-8, ie8-compatibility-mode

我一直在网上寻找答案……这是我需要的，但我没有得到。

预告

*   运行一个 WordPress 网站*   使用 IE8 兼容性时网站无法正确加载（9 很好）。*   已实施快速修复

    ```
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    ```

    乃至

    ```
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
    ```

    这并不能解决问题。

    *   由于各种原因，我需要一个 javascript 解决方案

这个想法是，当用户打开兼容模式时，会出现一条消息，告诉用户将其关闭。

我知道这与它有关，但我不知道如何在 javascript 中对其进行编码来做某事。

```
IE8 Compatibility View: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; Trident/4.0;...) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:57:21.773

`X-UA-Compatible` (either meta element or HTTP response header) with `IE=edge` value reliably prevents user from switching to compatibility mode by clicking button at the right of location bar — since the button is not shown at all when `X-UA-Compatible` with `IE=edge` value is present.

Ability to switch modes via developer tools (opening via F12 key) is not an issue — this is development feature which state does not persist after browser is restarted so is totally safe and is not something to care about.

However, if page works incorrectly in IE8 compatibility mode, then it very likely works incorrectly in real IE8 too. So if support for IE8 is important for you, you should fix issues related to IE8 itself, not to compatibility-mode feature.

# python - 在 Python GAE 中接收请求并在查询中使用 If else 语句

> ID：14149044
> 
> 赞同：0
> 
> 时间：2013-01-03T23:35:49.463
> 
> 标签：python, google-app-engine, google-cloud-datastore

我试图混合搭配一切，似乎找不到正确的答案。

我正在尝试对查询使用过滤器。但结果如下： if `q!=None`，它会生成一个过滤器。但是，如果`q==None`，使用后它不会显示任何数据`run()`

```
q = self.request.get('q')
if q!=None:
  custQuery = db.Query(Customer)
  custQuery.filter('license = ',q)
elif q==None:
  custQuery = Customer.all() 
```

但是，如果我用下面的代码替换所有这些，它会显示所有数据。

```
custQuery = db.Query(Customer) 
```

如果 if-else 语句中没有 q/query，如何显示数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:49:07.927

我得到了它！

收到请求时，结果如下。如果`query is ''`，它将显示“有空白”。如果`query!=None`，则显示“带有查询”。但是，如果`query is None`，这永远不会显示，因为您要求 aq/query 的事实总是意味着 q/query 是空白的。

```
if q is None:
  a = "without query"
  #custQuery = Customer.all()
elif q is '':
  a = "with blank"
elif q!=None:
  a = "with query" 
```

因此，为了解决这个问题，一旦您收到数据，您就声明`query is None`. 像这样：

```
q = self.request.get('q')
if q is '':
  custQuery = db.Query(Customer)
elif q is None:
  q = '' #Force it! (Previously: q is '' - and it works.)
  custQuery = db.Query(Customer)
elif q!=None:
  custQuery = db.Query(Customer)
  custQuery.filter('license = ',q) 
```

**解决方案：**强制它为“空白”！仅当查询为“空白”时，才会显示所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:45:32.107

使用 时，如果不存在`self.request.get('q')`，则默认值为None。`'q'`你可以用一个简单的字典来测试它：

```
>>> d = {'q': 'message'}
>>> print d.get('q')
'message'
>>> d = {'a': 'no q here'}
>>> print d.get('q')
None 
```

因此，如果您正在检查“q”是否在您的请求字典中，您应该与 None ( `if q is None:`) 进行比较。

如果您要比较以查看您的查询是否为空白，您可以执行以下操作：

```
>>> query = ''
>>> print query is None
False
>>> print query == ''
True
>>> print len(query) > 0
False
>>> print bool(query) 
False

>>> query = 'valid'
>>> print query is None
False
>>> print query == ''
False
>>> print len(query) > 0
True
>>> print bool(query)
True 
```

* * *

您可以使用`repr()`查看实际结果：（在本例中为空白字符串）

```
>>> print repr(d.get('q', ''))
'' 
```

* * *

因此，由于`self.request.get('q')`默认为 ''，我将执行以下操作：

```
q = self.request.get('q')

if q is '': # Blank or non-existent
  custQuery = Customer.all()

else: # Non-blank
  custQuery = db.Query(Customer) 
```

# java - 从不同的文件夹java读取配置文件

> ID：14149045
> 
> 赞同：1
> 
> 时间：2013-01-03T23:35:52.193
> 
> 标签：java

我正在尝试根据此处的代码读取配置文件：

[http://www.opencodez.com/java/read-config-file-in-java.htm](http://www.opencodez.com/java/read-config-file-in-java.htm)

所以我发现如果 config.cfg 与我运行代码的目录位于同一目录中，那么一切都很好，但如果配置位于不同的目录中

```
example: /path/to/config.cfg 
```

我收到此错误：

```
java.lang.NullPointerException
at java.util.Properties$LineReader.readLine(Properties.java:418)
at java.util.Properties.load0(Properties.java:337)
at java.util.Properties.load(Properties.java:325)
at packagename.conf.Config.<init>(Config.java:14)
at packagename.conf.Config.main(Config.java:30) 
```

我的猜测是它无法找到该文件。但是如何修改上面的代码以从不同的文件夹中读取配置文件？谢谢

编辑：来自链接的代码：

```
import java.util.*;
import java.util.Properties;

public class Config 
{
   Properties configFile;
   public Config()
   {
    configFile = new java.util.Properties();
    try {           
      configFile.load(this.getClass().getClassLoader().
      getResourceAsStream("myapp/config.cfg"));         
    }catch(Exception eta){
        eta.printStackTrace();
    }
   }

   public String getProperty(String key)
   {
    String value = this.configFile.getProperty(key);        
    return value;
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:46:42.457

您发布的代码期望配置文件位于类路径上（即，在 Java 查找`.class`文件的相同位置）。因此，您可以在类路径中包含包含配置文件的目录：

```
java   -classpath .:/path/to   packagename.conf.Config 
```

或者您可以修改代码以期望配置文件是常规文件系统文件：

```
final InputStream cfg = new FileInputStream("/path/to/config.cfg");
try
    { configFile.load(cfg); }
finally
    { cfg.close(); } 
```

# jquery - 使用母版页和内容页的菜单驱动界面

> ID：14149049
> 
> 赞同：2
> 
> 时间：2013-01-03T23:36:18.680
> 
> 标签：jquery, asp.net, ajax, master-pages

我似乎很难找到答案。我正在创建一个网站，其中主页（母版页）的标题中有一个漂亮的图形以及一个可以单击并收听歌曲的媒体播放器。该主页还将包含一个菜单，供用户导航到网站的各个部分（例如信息、联系人、媒体等）。我想要的是能够通过单击菜单项而不刷新母版页来更改内容部分，以便媒体播放器不会停止播放。我查看了 UpdatePanel，它似乎在回发时有很多开销来加载页面的内容（例如，可能是相册等）。是否有一种相当直接的方法可以使用 ajax 或 aps.net 内置的东西来执行此操作，从而允许在不刷新母版页的情况下更新内容页面？我' 我有点惊讶，考虑到很多网站都能够做到这一点，我还没有找到使用谷歌的可靠解决方案。也许我的措辞是错误的。;) 我使用的是基本的 asp.net 4 webform 模板，而不是 mvc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:41:29.080

据我所知，WebForms 没有比使用 UpdatePanels 更好的方法了。它们产生的开销是由于 WebForms 需要跟踪每个页面的 ViewState 的方式。

您可能可以使用框架来解决问题，但这对我来说似乎更糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:43:17.853

你想要做的将是非常 ajaxy 和使用 jQuery 的大量 javascript .. 你会想要做类似的事情

```
$('#someMenuElement').click(function () {
     $.ajax(...) //Fetch your data here
});

page.successFetchMethod = function (data) {
    //Render your data here
} 
```

您可以使用[jsRender](https://github.com/BorisMoore/jsrender)之类的东西来轻松地对页面进行模板渲染。获取页面后，您可以设置一个标志，以便您知道只设置显示，而不是重新获取。您甚至可以添加过期时间，以便在“x”秒过去后获取数据的新副本。

# objective-c - 创建可拖动的图像视图

> ID：14149050
> 
> 赞同：0
> 
> 时间：2013-01-03T23:36:20.183
> 
> 标签：objective-c, uiimageview, position, touchesmoved

我已经在网上搜索了很长时间，但我还没有找到一种使图像视图可拖动的具体方法。这是我到目前为止所拥有的：

**临时视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "MyRect.h"
@class UIView;
@interface tempViewController : UIViewController

@property (nonatomic, strong) MyRect *rect1;
@end 
```

**临时视图控制器.m**

```
#import "tempViewController.h"

@interface tempViewController ()

@end

@implementation tempViewController

@synthesize rect1 = _rect1;

- (void)viewDidLoad
{
    [super viewDidLoad];

    _rect1 = [[MyRect alloc]initWithFrame:CGRectMake(150.0, 100.0, 80, 80)];
    [_rect1 setImage:[UIImage imageNamed:@"cloud1.png"]];
    [_rect1 setUserInteractionEnabled:YES];
    [self.view addSubview:_rect1];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches]anyObject];
    if([touch view] == _rect1)
    {
        CGPoint pt = [[touches anyObject] locationInView:_rect1];
        NSLog(@"%@",NSStringFromCGPoint(pt));
        _rect1.center = pt;
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches]anyObject];
    if([touch view] == _rect1)
    {
        CGPoint pt = [[touches anyObject] locationInView:_rect1];
        NSLog(@"%@",NSStringFromCGPoint(pt));
        _rect1.center = pt;
    }
}

@end 
```

* * *

`MyRect`现在是一个空的 UIImageView 类。

将图像从诸如`[532,589]`微米之类的点拖动到屏幕的完全不同的部分，例如`[144, 139]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:49:14.037

只需将 a 添加`UIPanGestureRecognizer`到您的视图中。在识别器的操作中，根据识别器的“平移”（偏移）更新视图的中心，然后将识别器的平移重置为零。这是一个例子：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIView *draggableView = [[UIView alloc] initWithFrame:CGRectMake(150, 100, 80, 80)];
    draggableView.userInteractionEnabled = YES;
    draggableView.backgroundColor = [UIColor redColor];
    [self.view addSubview:draggableView];

    UIPanGestureRecognizer *panner = [[UIPanGestureRecognizer alloc]
        initWithTarget:self action:@selector(panWasRecognized:)];
    [draggableView addGestureRecognizer:panner];
}

- (void)panWasRecognized:(UIPanGestureRecognizer *)panner {
    UIView *draggedView = panner.view;
    CGPoint offset = [panner translationInView:draggedView.superview];
    CGPoint center = draggedView.center;
    draggedView.center = CGPointMake(center.x + offset.x, center.y + offset.y);

    // Reset translation to zero so on the next `panWasRecognized:` message, the
    // translation will just be the additional movement of the touch since now.
    [panner setTranslation:CGPointZero inView:draggedView.superview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:46:07.293

不要使用`-touchesBegan:withEvent:`等。

您想要用于此类“高级”事物的是`UIGestureRecognizers`.

您将在视图中添加一个平移手势识别器设置一个委托（可能是视图本身），并在回调中将视图移动识别器移动的距离。

您要么记住初始位置并`-translationInView`每次移动，要么只是按平移移动，然后使用`-setTranslation:inView:`将识别器平移重置为零，因此在下一次调用委托方法时，您将再次获得自上次调用以来的移动.

# asp.net - 为什么我的 ASP.NET 页面中的这个 SQL 连接失败了？

> ID：14149051
> 
> 赞同：0
> 
> 时间：2013-01-03T23:36:39.067
> 
> 标签：asp.net, iis

我有以下代码

```
 SqlConnection conn = new SqlConnection("user id=clearpath\\user;" +
                                                            "password=Password1;server=sqldatamart;" +
                                                            "Trusted_Connection=yes;" +
                                                            "database=LENDER_LOAN_SERVICE;" +
                                                            "connection timeout=30");

    SqlCommand cmd = new SqlCommand("INSERT INTO [LENDER_LOAN_SERVICE].[CMC].[Turn_Times] values('"+dateadded+"','"+username+"','"+prevtime+"','"+type+"','"+newturntime+"')",conn);

    conn.Open(); 
```

当我进行本地开发时，效果很好。但是，当我将网站放在计算机上的 IIS 6 上时，出现以下错误。

```
 Login failed for user 'CLEARPATH\IT-CARLOSDELL$'. 

    Line 42:             SqlCommand cmd = new SqlCommand("CMC.sp_NewDocMod", conn);
Line 43: 
Line 44:             conn.Open();
Line 45: 
Line 46:             SqlDataReader reader = cmd.ExecuteReader(); 
```

第 44 行出现错误。

似乎它将连接字符串从 clearpath\cpereyra 更改为 clearpath\IT-CARLOSDELL$

我的电脑名称是 IT-CARLOSDELL

有想法该怎么解决这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:42:13.123

您需要执行以下操作之一：

1.  在 SQL 中为 CLEARPATH\IT-CARLOSDELL$ 帐户授予权限
2.  将应用程序池上的身份更改为具有数据库权限的身份（可能是 clearpath\cpereyra）
3.  在您的站点上设置身份验证以模拟连接到该站点并在 SQL DB 中具有权限的用户。
4.  `Trusted_Connection=yes`从您的连接字符串中删除。

您选择哪一种取决于您用来保护网站的方法。

顺便说一句：它不会更改连接字符串。它正在使用该帐户，因为您有 Trusted_Connection=yes。它正在使用运行 ASP.NET 工作进程的帐户来尝试连接到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:42:18.240

听起来您的应用程序池正在使用 'LocalSystem' 作为[池标识](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:49:11.207

`Trusted_Connection=yes`从连接字符串中删除。现在，该字符串给出了一个特定的用户名和密码，并表示使用传递 Windows 身份验证。在本地运行时，您的 Windows 帐户有权访问 SQL（我假设），但在 IIS 中，它很可能以匿名身份登录。

# matlab - 在 MATLAB 中更改文本的简单按钮

> ID：14149054
> 
> 赞同：6
> 
> 时间：2013-01-03T23:37:08.337
> 
> 标签：matlab, button, jbutton

我正在尝试实现一个非常简单的 GUI，它只包含一个按钮。我希望它以 START 作为标签开始。然后按下它变为停止。当用户第一次单击按钮时，回调将布尔值设置为 true 并更改标签。当第二次单击按钮时，布尔值更改为 false 并且 GUI 关闭。

我找不到任何关于如何在 MATLAB 中制作像这样的简单 GUI 的信息。GUIDE 工具对我来说毫无意义，而且似乎生成了很多无用的代码。Matlab 按钮是 jButtons 的包装器，如此处[所示](http://undocumentedmatlab.com/blog/button-customization/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:55:16.493

GUIDE 非常简单——自动化工具为所有回调生成存根，因此剩下的就是填写回调运行时要执行的代码。如果您更喜欢以编程方式创建 GUI，您可以创建所需的按钮，如下所示：

```
%# create GUI figure - could set plenty of options here, of course
guiFig = figure;

%# create callback that stores the state in UserData, and picks from
%# one of two choices
choices = {'start','stop'};
cbFunc = @(hObject,eventdata)set(hObject,'UserData',~get(hObject,'UserData'),...
          'string',choices{1+get(hObject,'UserData')});

%# create the button
uicontrol('parent',guiFig,'style','pushbutton',...
          'string','start','callback',cbFunc,'UserData',true,...
          'units','normalized','position',[0.4 0.4 0.2 0.2]) 
```

# fonts - Sass Mixin 可选参数

> ID：14149055
> 
> 赞同：1
> 
> 时间：2013-01-03T23:37:12.993
> 
> 标签：fonts, sass, mixins

我在下面写这个mixin：

```
=font-placeholder($location, $name, $fallback: '', $fallback-style: '')
  %#{$location}-font
    font-family: "#{$name}", "#{$fallback}", $fallback-style

+font-placeholder($location: body, $name: FontName) 
```

而不是输出这个：

```
%body-font {
  font-family: "FontName", "", ""; 
```

我希望它输出这个：

```
%body-font {
  font-family: "FontName"; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:00:48.670

如果字符串不需要引号，请不要引用它。这样您以后就不必取消引用它了。

您需要的是一个字体列表，这样您就不必担心额外的逗号或空字符串。

```
=font-placeholder($location, $fonts...)
  %#{$location}-font
    font-family: $fonts

+font-placeholder(body, FontName)
+font-placeholder(body, FontName, serif)
+font-placeholder(body, FontName, Arial, sans-serif) 
```

应该生成这样的东西：

```
%body-font {
  font-family: FontName;

%body-font {
  font-family: FontName, serif;

%body-font {
  font-family: FontName, Arial, sans-serif; 
```

# javascript - KML 文件 - 创建不同颜色的线串？

> ID：14149059
> 
> 赞同：1
> 
> 时间：2013-01-03T23:38:03.623
> 
> 标签：javascript, kml, google-earth-plugin

> **可能重复：**
> [在 kml 文件中为单个轨道着色](https://stackoverflow.com/questions/11874858/colorise-single-track-in-kml-file)

我想创建一个线串，线的不同部分具有不同的颜色。
我正在使用 google-earth API 来加载 kml 文件。

如果我可以通过 google-earth javascript 编程来实现这个目标，那也很好。但如果我能在 kml 文件中实现这一点，我会更喜欢。

我能想到的一种简单方法是创建多条不同颜色的线条。当我将此 kml 文件加载到 Google 地球时，它看起来像一条路径。这使文件的大小变大并且需要很长时间来加载文件。所以寻找更好的方法。

# r - 生成逆排列

> ID：14149070
> 
> 赞同：13
> 
> 时间：2013-01-03T23:39:17.067
> 
> 标签：r, vector, permutation

假设我们有一个向量`foo`，我们**必须**临时置换它（排序或重新排序），在它的基础上计算一些向量，`bar`最后置换回原来的顺序- 这意味着逆置换：`foo``bar``foo`

```
foo <- c(1, 7, 3, 5, 2)
o <- order(foo)
foo <- foo[o] # Now foo is permuted, and sorted: foo == 1 2 3 5 7
bar = 2 * foo # bar == 2 4 6 10 14 
```

这里应该是你的答案，这样我们就有了以下所需的最终值：

```
foo == 1 7 3 5 2
bar == 2 14 6 10 4 
```

这该怎么做？

请不要回答：“你可以做`bar = 2 * foo`而不是改变它”。这只是一个简单的例子。在某些情况下，我们必须对`foo`效率进行排序（快速搜索）或类似的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T00:12:31.340

这将起作用，因为`[order(o)]`反转了 的动作`[o]`：

```
foo <- c(1, 7, 3, 5, 2)
o <- order(foo)

(foo[o]*2)[order(o)]
# [1]  2 14  6 10  4 
```

为了表明它更普遍地工作：

```
testAlgorithm <- function(foo) {
    o <- order(foo)
    identical(foo, foo[o][order(o)])
}

x <- c(1, 7, 3, 5, 2)
y <- c(1,2,5,7,4, 99, 88, 3, 0)
z <- sample(1000)                  ## (No ties)
zz <- sample(1000, replace=TRUE)   ## (Many ties)
all(sapply(list(x,y,z,zz), testAlgorithm))
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T23:44:32.563

要恢复原始订单，请使用`order(o)`：

```
> (foo[o]*2)[order(o)]
[1]  2 14  6 10  4 
```

# wpf - OnRenderSizeChanged 调用不正确吗？

> ID：14149074
> 
> 赞同：2
> 
> 时间：2013-01-03T23:40:07.003
> 
> 标签：wpf

我有一个自定义画布，它应该用最大数量的 Tile 对象填充自己。

如果它被调整为更大，它会用额外的瓷砖填充空白空间。如果它被调整为更小，它会删除不再可见的瓷砖。

这仅在我非常缓慢地调整大小时才有效，否则一切都会开始混乱。

[正确图片 http://imageshack.us/a/img585/105/50186779.png](http://imageshack.us/a/img585/105/50186779.png) [正确图片 http://imageshack.us/a/img267/3179/76648216.png](http://imageshack.us/a/img267/3179/76648216.png)

我肯定做错了什么，下面的代码是画布：

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication1.View
{
    public class TileCanvas : Canvas
    {
        #region Fields

        private Boolean _firstCreation;
        private Double _heightDifference;
        private Double _widthDifference;

        #endregion // Fields

        #region Properties

        public static readonly DependencyProperty TileSizeProperty =
            DependencyProperty.Register("TileSize", typeof (Int32), typeof (TileCanvas),
                                        new PropertyMetadata(30));

        public Int32 TileSize
        {
            get { return (Int32) GetValue(TileSizeProperty); }
            set { SetValue(TileSizeProperty, value); }
        }

        public Int32 Columns { get; private set; }
        public Int32 Rows { get; private set; }

        #endregion // Properties

        #region Constructors

        public TileCanvas()
        {
            _firstCreation = true;
        }

        #endregion // Constructors

        #region Methods

        #region Public

        #endregion // Methods - Public

        #region Protected

        /// <summary>
        /// Gets called when the rendering size of this control changes.
        /// </summary>
        /// <param name="sizeInfo">Information on the size change.</param>
        protected override void OnRenderSizeChanged(SizeChangedInfo sizeInfo)
        {
            Console.WriteLine("{0}x{1}", sizeInfo.NewSize.Width, sizeInfo.NewSize.Height);

            _widthDifference += sizeInfo.NewSize.Width - sizeInfo.PreviousSize.Width;
            _heightDifference += sizeInfo.NewSize.Height - sizeInfo.PreviousSize.Height;

            int columnDifference = 0;
            int rowDifference = 0;

            if (_widthDifference > TileSize || _widthDifference < TileSize*-1)
            {
                columnDifference = ((Int32) _widthDifference)/TileSize;
                Columns += columnDifference;
                _widthDifference = 0;
            }

            if (_heightDifference > TileSize || _heightDifference < TileSize*-1)
            {
                rowDifference = ((Int32) _heightDifference)/TileSize;
                Rows += rowDifference;
                _heightDifference = 0;
            }

            UpdateTileSet(columnDifference, rowDifference);
        }

        #endregion // Methods - Protected

        #region Private

        /// <summary>
        /// Updates the number of tiles if the control changed in size.
        /// </summary>
        private void UpdateTileSet(Int32 columnChange, Int32 rowChange)
        {
            // Exit if there's no practical change
            if (columnChange == 0 && rowChange == 0)
            {
                return;
            }

            // Delete all tiles that fall out on vertical resize
            if (rowChange < 0)
            {
                for (var row = Rows; row > Rows + rowChange; row--)
                {
                    for (var column = 0; column < Columns; column++)
                    {
                        Children.RemoveRange(GetListIndex(0, Rows), Columns);
                    }
                }
            }

            // Delete all tiles that fall out on horizontal resize
            if (columnChange < 0)
            {
                for (var column = Columns; column > Columns + columnChange; column--)
                {
                    for (var row = 0; row < Rows; row++)
                    {
                        Children.RemoveAt(GetListIndex(column, row));
                    }
                }
            }

            // Fill new rows with tiles on vertical resize
            if (rowChange > 0)
            {
                for (var row = Rows - rowChange; row < Rows; row++)
                {
                    for (var column = 0; column < Columns; column++)
                    {
                        var tile = new Tile(column, row);

                        Point position = GetCanvasPosition(column, row);
                        var index = GetListIndex(column, row);

                        SetLeft(tile, position.X);
                        SetTop(tile, position.Y);

                        Children.Insert(index, tile);
                    }
                }
            }

            // The first population is a special case that can be handled
            // by filling rows only.
            if (_firstCreation)
            {
                _firstCreation = false;
                return;
            }

            // Fill new columns with tiles on horizontal resize
            if (columnChange > 0)
            {
                for (var column = Columns - columnChange; column < Columns; column++)
                {
                    for (var row = 0; row < Rows; row++)
                    {
                        var tile = new Tile(column, row);

                        Point position = GetCanvasPosition(column, row);
                        var index = GetListIndex(column, row);

                        SetLeft(tile, position.X);
                        SetTop(tile, position.Y);

                        Children.Insert(index, tile);
                    }
                }
            }
        }

        /// <summary>
        /// Returns the index a tile should occupy based on its column and row.
        /// </summary>
        /// <param name="column">The column in which this tile resides.</param>
        /// <param name="row">The row in which this tile resides.</param>
        /// <returns></returns>
        private Int32 GetListIndex(Int32 column, Int32 row)
        {
            return row*Columns + column;
        }

        /// <summary>
        /// Returns the coordinates of a specific position.
        /// </summary>
        /// <param name="column">The column the position is in.</param>
        /// <param name="row">The row the position is in.</param>
        /// <returns></returns>
        private Point GetCanvasPosition(Int32 column, Int32 row)
        {
            var positionX = column*TileSize;
            var positionY = row*TileSize;

            return new Point(positionX, positionY);
        }

        #endregion // Methods - Private

        #endregion // Methods
    }
} 
```

这是 Tile.cs

```
using System;
using System.Windows.Controls;

namespace WpfApplication1.View
{
    /// <summary>
    /// Interaction logic for Tile.xaml
    /// </summary>
    public partial class Tile : Border
    {
        public Tile(Int32 column, Int32 row)
        {
            InitializeComponent();

            Textfield.Text = String.Format("{0}x{1}", column, row);
        }
    }
} 
```

和 Tile.xaml

```
<Border x:Class="WpfApplication1.View.Tile"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             Width="40" Height="40">
    <TextBlock x:Name="Textfield" FontSize="8" HorizontalAlignment="Center" VerticalAlignment="Top"/>
</Border> 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:29:07.637

这是有关如何在 WPF 控件中的自定义位置放置元素的良好信息来源：http: [//codeblitz.wordpress.com/2009/03/20/wpf-auto-arrange-animated-panel/](http://codeblitz.wordpress.com/2009/03/20/wpf-auto-arrange-animated-panel/)

我不知道它是否适用于画布，但将代码放在 Measure/Arrange Override 方法中可能会产生更好的结果。

# redmine - 有没有办法在 redmine 中使用 stackexchange 语法来发布帖子、提交评论、wiki ......

> ID：14149076
> 
> 赞同：0
> 
> 时间：2013-01-03T23:40:16.783
> 
> 标签：redmine, redmine-plugins

是否有模块或简单的方法可以在 redmine中启用 stackexchange 的[语法？](https://stackoverflow.com/editing-help)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:56:23.070

Yes, there is a [Markdown formatter plugin](http://www.redmine.org/projects/redmine/wiki/Plugin_List#Markdown-formatter-plugin) for redmine. It probably doesn't match SE's markdown flavour exactly, but it'll put you in the right direction.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:01:43.287

使用最新版本的 redmine (2.2.2) 我发现网站上的插件都没有工作。

我终于找到了[redmine_markdown_extra_formatter](https://github.com/urigon/redmine_markdown_extra_formatter)的一个分支，它适用于当前版本的 redmine。

* * *

作为参考，我试过：

*   [redmine_markdown_formatter](https://github.com/bitherder/redmine_markdown_formatter/tree)
*   [redmine_markdown_extra_formatter](https://github.com/juno/redmine_markdown_extra_formatter/tree)
*   [redmine_redcarpet_formatter](https://github.com/alminium/redmine_redcarpet_formatter)
*   [chiliproject_markdown_formatter](https://github.com/Odie/chiliproject_markdown_formatter)
*   [redmine_ultraviolet](https://github.com/epitron/redmine_ultraviolet)

# mysql - Perl DBD 错误 FUNCTION dbName.GLOB 不存在

> ID：14149078
> 
> 赞同：1
> 
> 时间：2013-01-03T23:41:04.440
> 
> 标签：mysql, perl, dbd

我开始为一些 cron 作业编写一些 Perl 脚本，这些作业将查询数据库并发送有关即将发生的事件的提醒。我对 Perl 中的数据库访问非常陌生，因为到目前为止我的大部分工作都是使用 PHP 在 Web 端进行的。无论如何，第一个查询可以很好地生成一个临时输出文件，然后我正在读取该输出文件以循环通过结果查询来查找在第一个查询中发现的用户的特定事件。

我现在遇到的问题是出现以下错误：

```
./remind.pl 
DBD::mysql::st execute failed: FUNCTION dbName.GLOB does not exist at ./remind.pl line 41.
SQL Error: FUNCTION dbName.GLOB does not exist 
```

这是我的 Perl 代码

```
$host = 'localhost';
$database = 'dbName';
$user = 'user';
$password = 'password';

use POSIX qw(strftime);
use List::MoreUtils qw(uniq);
use Mail::Sendmail;
use DBI;

$dt = strftime("%Y%m%d%H%M%S", localtime(time));
$List30 = "../tmp/queries/30DayUserList.$dt";
open my $UserList30Day, ">> $List30" or die "Can't create tmp file: $!";

$dbh = DBI->connect('dbi:mysql:dbName',$user,$password) or die "Connection error: $DBI::errstr\n";

$sql = "SELECT DISTINCT user FROM shows WHERE initial_date BETWEEN CURDATE() AND CURDATE() + INTERVAL 30 DAY";
$sth = $dbh->prepare($sql);
$sth->execute or die "SQL Error: $DBI::errstr\n";

while (@jeweler = $sth->fetchrow_array()) {
print $UserList30Day "$user[0]\n";
}
close $UserList30Day;

open my $UserIDList, "< $List30" or die "Can't open temp file: $List30";

while ($id = $UserIDList) { # Read in User ID from temp file as $id
# Query for show information for next 30 days

my $sql = "SELECT shows.initial_date, shows.initial_time, shows.hostess_key, hostess.hostess_fname, hostess.hostess_lname, hostess.primary_phone, hostess.address1, hostess.address2, hostess.city, hostess.zipcode, hostess.state
        FROM shows, hostess
        WHERE shows.user = $id
        AND initial_date BETWEEN CURDATE() AND CURDATE() + INTERVAL 30 DAY
        AND shows.hostess_key = hostess.hostess_key";
my $sth = $dbh->prepare($sql);
$sth->execute or die "SQL Error: $DBI::errstr\n";

# Iterate thru query results to create output data
while (@row = $sth->fetchrow_array()) {
    $content = "Reminder: You have a show for $row[3] $row[4] coming up on $row[0] at $row[1].\n";
    $content .= "Location:  $row[6] \n";
    if ($row[7] != '') {
        $content .=  "           " . $row[7] . "\n";
    }
    $content .=  "           $row[8], $row[10]  $row[9] \n";
    $content .=  "Phone: $row[5] \n";
}

%mail = (To => 'email',
    From => 'email',
    Subject => 'Just another test',
    Message => $content
    );

# sendmail(%mail) or die $Mail::Sendmail::error;
print %mail;
}
close $UserList30Day; 
```

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:13:04.047

```
while ($id = $UserIDList) { 
```

应该

```
while ($id = <$UserIDList>) {
    chomp; 
```

# c# - 将创建列表的字典从 Python 转换为 C#

> ID：14149082
> 
> 赞同：2
> 
> 时间：2013-01-03T23:41:30.783
> 
> 标签：c#, python, list, dictionary

我正在将游戏项目的代码从 Python 移植到 C#。现在我在翻译一段特定的代码时遇到了麻烦，游戏会在其中检查两艘太空飞船是友好还是敌对。派系通过整数标识。使用敌对或友好派系编号列表。

检查敌意或友好的功能是（Python）：

```
def is_hostile_faction(ownF, oppF):
    hostile_factions = { 1:[5], 2:[4,5], 3:[5], 4:[2,5], 5:[1,2,3,4], 6:[5], 7:[8,9,10], 8:[5,7,9,10], 9:[7,8,10], 10:[7,8,9]}
    if oppF in hostile_factions[ownF]:
        return True
    else:
        return False 
```

和

```
def is_allied_faction(ownF, oppF):
    allied_factions = { 1:[1,2], 2:[1,2,3], 3:[3], 4:[4], 5:[5], 6:[1,2,3,6], 7:[7], 8:[8], 9:[9], 10:[10] }    
    if oppF in allied_factions[ownF]:
        return True
    else:
        return False 
```

分别。到目前为止，很容易。我如何在 C# 中重新创建相同的函数而不编写丑陋的代码，例如：

```
List<int> faction1hostiles = new List<int> {5};
List<int> faction2hostiles = new List<int> {4,5};
// etc
Dictionary<int,List<int>> hostileFactions = new Dictionary<int,List<int>();
hostileFactions.Add(faction1hostiles);
hostileFactions.Add(faction2hostiles);
// etc

public void isHostile(int ownF, int oppF) {
    if (hostileFactions[ownF].Contains(oppF)) {
        return true; }
    else { return false; }
}

// same for friendly factions 
```

以前的代码是 Python（Panda3D 框架），目标代码是 C#（Unity3D 框架）。考虑到 Python 代码的简单性，即动态创建数据结构，C# 必须有一个同样简单的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:49:02.897

我认为你可以这样做：

```
Dictionary<int,int[]> hostileFactions = new Dictionary<int,int[]>(){
    {1,new[]{5}}, {2,new[]{4,5}}
};

public void isHostile(int ownF, int oppF) {
    return hostileFactions[ownF].Contains(oppF)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:48:19.510

这取决于您所说的“丑陋代码”。你可以这样写：

```
var allies = new Dictionary<int, List<int>>{
    {1, new List<int>{1,2}},
    {2, new List<int>{1,2,3}},
    //...
}; 
```

或者您可以像这样跟踪特定的敌对行动和联盟：

```
var alliances = new[]{
    new {a=1,b=1},
    new {a=1,b=2},
    new {a=2,b=1},
    new {a=2,b=2},
    new {a=2,b=3},
    //...
};

var allies = alliances.ToLookup(e => e.a, e => e.b); 
```

或者，如果您永远不需要给定团队的实际盟友列表，而只想快速发现两个团队是否有联盟，您可以创建一组盟友团队对，如下所示：

```
private struct TeamPair
{
    private int _team1;
    private int _team2;
    public TeamPair(int team1, int team2)
    {
        _team1 = team1;
        _team2 = team2;
    }
}

ISet<TeamPair> alliances = new HashSet<TeamPair>(
    new[]{
        new {a=1,b=1},
        new {a=1,b=2},
        new {a=2,b=1},
        new {a=2,b=2},
        new {a=2,b=3},
        // ...
    }.Select(e => new TeamPair(e.a, e.b)));

public bool isAllied(int ownF, int oppF) {
    return alliances.Contains(new TeamPair(ownF, oppF));
} 
```

如果你真的想的话，我相信你可以使用数组的数组来想出其他更简洁的语法。

但是您可能需要考虑将联盟映射存储在代码之外：可能是 XML 或 CSV 文件，或关系数据库，然后使用您的代码将该数据读入数据结构。在我看来，您将数据与代码过度耦合。

正如@Lattyware 所提到的，进行重写为您提供了一个独特的机会来思考为新语言编写程序的更好方法：直接翻译很少是最好的方法。如果他们今天有机会再做一次，即使是原作者也可能不会以同样的方式编写游戏。

# javascript - 将 Throttle-Debounce 与 addEventListener 一起使用

> ID：14149084
> 
> 赞同：2
> 
> 时间：2013-01-03T23:41:41.697
> 
> 标签：javascript, dom-events, addeventlistener, throttling

我`deviceorientation`在移动网站上使用，但我不想捕捉每一个动作。我只想要每秒 1 个，所以我尝试使用节流去抖动插件。

我原来的工作代码看起来像这样......

```
window.addEventListener(
  'deviceorientation', 
  function (event) {
    tilt([event.alpha, event.beta, event.gamma]);
  }, 
  true); 
```

...但是当我像这样添加油门时...

```
window.addEventListener(
 'deviceorientation', 
 $.throttle(
   1000, 
   function (event){
     tilt([event.alpha, event.beta, event.gamma]);
   }), 
 true); 
```

...我得到一个...

```
Uncaught TypeError: Object function ( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
} has no method 'throttle' 
```

我猜我的语法错误，但我尝试了几种变体，但我不太明白。帮助？

如果有人在没有插件的情况下有更好的方法来做同样的事情:)

# javascript - 使用映射插件 Knockout 刷新 viewModel

> ID：14149086
> 
> 赞同：3
> 
> 时间：2013-01-03T23:41:53.197
> 
> 标签：javascript, jquery, json, knockout.js, mapping

我正在尝试使用淘汰赛和映射插件刷新一个小部件。到目前为止，这是我的代码：

```
var AppViewModel = function (data, total, qty) {
    var self = this;
    self.Products = ko.mapping.fromJS(data, {}, this);
    self.CartTotals = ko.observable(total);
    self.TotalQty = ko.observable(qty);
};

var func = function(u) {
    return $.ajax({ type: "POST", contentType: "application/json; charset=utf-8", data: "{}", dataType: "json", url: u });
},
getQtyTotal = function(b) {
    var a = 0;
    $.each(b.Table.Rows, function(c) {
        a += parseInt(b.Table.Rows[c].Quantity) || 0;
    });
    return a;
};

$.when(func("/store/MiniCart.aspx/GetShoppingCartInfo"), func("/store/MiniCart.aspx/GetCartTotal")).done(function (jsonA, jsonB) {
    var ds = $.parseJSON(jsonA[0].d), ds2 = $.parseJSON(jsonB[0].d), qtyTotal = getQtyTotal(ds);
    ko.applyBindings(new AppViewModel(ds, ds2, qtyTotal));
});

<div class="cartDropDownProductItemWrapper" data-bind="foreach: Products.Table.Rows">
    <div class="cartDropDownProductItem">
        <div class="cartDropDownProductImg">
            <img id="cart_details_rpt_prod_image_0" style="height: 71px; width: 55px;" data-bind="attr: { src: ProductImageURL }">
        </div>

        <div class="cartDropDownProductDesc">
            <h6><a data-bind="text: ModelName, attr: { href: ProductLink }"></a></h6>
            <div class="cartDropDownProductDescInner">
            <div class="cartDropDownColor"> COLOR 
                <strong><span data-bind="text:ColorName"></span></strong>
            </div>
            <div class="cartDropDownSize"> SIZE
                <strong><span data-bind="text: SizeName"></span></strong>
            </div>
            <div class="cartDropDownSize"> QTY 
                <strong><span data-bind="text: Quantity"></span></strong>
            </div>
            <div class="cartDropDownPrice"> PRICE 
                <strong><span data-bind="text: UnitCost().toFixed(2)"></span></strong>
            </div>
            <div class="cartDropDownRemove">
                <a href="javascript:void(0);" class="remove" onclick="removeItem('v3BuhngpE4c=')">
                    <img src="/images/layout/icons/remove.gif" alt="Remove Item">
                </a>
            </div>
        </div>
    </div>
    <div class="clear"></div>
</div>

<!-- end fo reach -->
<div class="clear"></div>
<div class="cartDropDownButtons clearfix">
    <ul class="clearfix">
        <li class="countItems"><span data-bind="text: TotalQty"></span> Items</li>
        <li class="subTotal" id="subTotal">SUBTOTAL: $<span data-bind="text: CartTotals().toFixed(2)"></span></li>
    </ul>
</div> 
```

它最初渲染得很好，但是当我尝试重新绑定 jQuery 单击事件并调用时：

```
 ko.applyBindings(new AppViewModel(ds, ds2, qtyTotal)); 
```

它复制数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:42:50.990

如果您从创建一个空的 viewModel... 开始，它的构造函数不接受任何参数，如下所示：

```
function ViewModel()
{
    var self = this;
}
var viewModel = new ViewModel(); 
```

...然后您可以按名称引用它以使用 ko.mapping 加载数据，如下所示：

```
ko.mapping.fromJS({ "PropertyName": plainJsObject }, {}, viewModel); 
```

它的作用是在 plainJsObject 上运行**ko.mapping 魔法**，并将结果填充到 viewModel 对象的一个​​属性（在本例中称为 PropertyName）中。

**您会特别关心的部分是：**

如果您想使用来自服务器的新数据刷新位于 viewModel.PropertyName 中的数据......您只需调用完全相同的方法，它会更新您的 viewModel 上的相同属性。只需在您的 plainJsObject 中使用新值再次调用相同的东西：

```
ko.mapping.fromJS({ "PropertyName": plainJsObject }, {}, viewModel); 
```

由于您（我假设）已经在代码中的某个位置执行了 ko.applyBindings()，因此上面的这一行将立即更新您的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:16:32.520

您应该只需要执行一次绑定，因此只需将其保留在任何事件驱动的函数调用之外。

```
 ko.applyBindings(new AppViewModel(ds, ds2, qtyTotal)); 
```

我认为您在上面的示例中过于复杂了您的代码。我只返回一组 Product 对象，其中包含描述、单价、数量等属性，然后计算总数，使用 ko 计算变量，如果用户尝试增加/减少数量，该变量将自动更新。

```
function Product(item) {
    var self = this;
    self.description = ko.observable(item.description);
    self.quantity = ko.observable(item.quantity);
    self.unitPrice = ko.observable(item.unitPrice);
    self.total =  ko.computed(function() {
        return self.quantity() * self.unitPrice();
    });
}

function AppViewModel() {
    var self = this;
    self.products = ko.observableArray([]);
    self.overvallTotal =  ko.computed(function() {
        var total = 0;
        for (var i = 0; i < self.products().length; i++) {
            total += self.products()[i].total;
        }
        return total;
    });        
    self.removeProduct = function(item) { self.products.remove(item) };

    // Load initial state from server, convert it to Product instances
    $.getJSON("/store/MiniCart.aspx/GetShoppingCartInfo", function(allData) {
        var mappedProducts = $.map(allData, function(item) { return new Product(item) });
        self.products(mappedProducts);
    });    
}

ko.applyBindings(new AppViewModel()); 
```

您将不得不调整您的服务器端 json 结果以使用它。

# wpf - 如何使用基于 Window 的 ViewModel 属性的 DataTemplate 的 DataTriggers 更改 ContentControl 的 Content 属性，该属性是枚举值

> ID：14149093
> 
> 赞同：1
> 
> 时间：2013-01-03T23:42:53.347
> 
> 标签：wpf, enums, views, datatemplate, datatrigger

我请求您帮助解决一些说得简单而且很可能只是完成但目前不适合我的事情。我正在开发的是一个使用 FluidUI 控件集看起来像 Of​​fice 2013 的应用程序。我想从 Word/Access 中实现视图切换器，其中功能区上有“视图”选项卡，并且有用于切换视图的按钮。我认为将整个 View 对象存储在我的 ViewModel 的属性 CurrentView 中是错误的方式，我试图使这个应用程序尽可能地成为纯 MVVM。这个应用程序更像是“如何使用 MVVM 编写应用程序”，因为我还在学习 WPF。行。所以我有我的窗口（正确的是 MainWindowModern），它有 Fluid Ribbon。有 3 个按钮可以切换视图（我称它们为编辑器）。他们所做的是改变 MainWindowModern 的 ViewModel' s CurrentView 属性并为其设置新的枚举值。这部分设置新的枚举值已经完成并且可以工作。现在。窗口的主体只是 ContentControl。现在我想根据 DataContext.CurrentView 属性值更改此 ContentControl 的 Content 属性。就像我之前说的。我不想在视图的 c#（我正在用 C# 编写这个应用程序）文件中做任何代码隐藏。唯一不起作用的只是更改 ContentControl Content 属性。我正在尝试使用 DataTemplates 和 DataTemplate.Triggers 来做到这一点 不想在视图的 c#（我正在用 C# 编写这个应用程序）文件中执行任何代码隐藏。唯一不起作用的只是更改 ContentControl Content 属性。我正在尝试使用 DataTemplates 和 DataTemplate.Triggers 来做到这一点 不想在视图的 c#（我正在用 C# 编写这个应用程序）文件中执行任何代码隐藏。唯一不起作用的只是更改 ContentControl Content 属性。我正在尝试使用 DataTemplates 和 DataTemplate.Triggers 来做到这一点

现在这是我到目前为止所得到的（没有不相关的代码）。

窗口的 XAML

 `````
<Fluent:MetroWindow
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Fluent="clr-namespace:Fluent;assembly=Fluent"
    xmlns:localVM="clr-namespace:MVVMTest.ViewModels"
    xmlns:local="clr-namespace:MVVMTest"
    x:Class="MVVMTest.Views.MainWindowModern"
    x:Name="ThisWindow"
    Title="Dialogue Editor (Modern UI Version)"
    Width="1280" Height="480"
    RibbonThemeColor="Red" WindowState="Maximized"
    Icon="..\Assets\App\AppIcon_32x32.png">

    <Window.Resources>
        <DataTemplate x:Key="CharactersEditorTemplate">
            <TextBlock Text="Characters Editor Template Body" />
        </DataTemplate>
        <DataTemplate x:Key="ChaptersEditorTemplate">
            <TextBlock Text="Chapters Editor Template Body" />
        </DataTemplate>
        <DataTemplate x:Key="ConversationsEditorTemplate">
            <TextBlock Text="Conversations Editor Template Body" />
        </DataTemplate>
        <DataTemplate x:Key="aaa" DataType="{x:Type ContentControl}" >
            <TextBlock Text="{Binding ElementName=ThisWindow, Path=DataContext.CurrentView}" />
            <DataTemplate.Triggers>
                <!--<DataTrigger Binding="{Binding CurrentView}">
                    <DataTrigger.Value>
                        <localVM:EditorView>CharactersEditor</localVM:EditorView>
                    </DataTrigger.Value>
                    <Setter Property="Content" Value="{StaticResource CharactersEditorTemplate}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding CurrentView}">
                    <DataTrigger.Value>
                        <localVM:EditorView>ChaptersEditor</localVM:EditorView>
                    </DataTrigger.Value>
                    <Setter Property="Content" Value="{StaticResource ChaptersEditorTemplate}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding CurrentView}">
                    <DataTrigger.Value>
                        <localVM:EditorView>ConversationsEditor</localVM:EditorView>
                    </DataTrigger.Value>
                    <Setter Property="Content" Value="{StaticResource ConversationsEditorTemplate}" />
                </DataTrigger>-->

                <DataTrigger Binding="{Binding ElementName=ThisWindow, Path=DataContext.CurrentView}">
                    <DataTrigger.Value>
                        <localVM:EditorView>ChaptersEditor</localVM:EditorView>
                    </DataTrigger.Value>
                    <DataTrigger.Setters>
                        <Setter Property="Content" Value="{StaticResource ChaptersEditorTemplate}" />
                    </DataTrigger.Setters>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </Window.Resources>

    <Window.DataContext>
        <localVM:MainWindowVM />
    </Window.DataContext>

    <DockPanel x:Name="LayoutRoot" LastChildFill="True">
        <Fluent:Ribbon DockPanel.Dock="Top">

            <Fluent:RibbonTabItem Header="VIEW" Fluent:KeyTip.Keys="V" ReduceOrder="ViewsRibbonGroupBox, ViewsRibbonGroupBox, ViewsRibbonGroupBox">

                <Fluent:RibbonGroupBox Name="ViewsRibbonGroupBox" Header="Views">

                    <Fluent:Button Name="CharactersViewButton" 
                                   Header="Characters" 
                                   LargeIcon="..\Assets\Ribbon\View\CharacterEditorIcon_32x32.png"
                                   Icon="..\Assets\Ribbon\View\CharacterEditorIcon_32x32.png"
                                   Command="{Binding SwitchToCharactersEditorCommand}" >
                        <Fluent:Button.ToolTip>
                            <Fluent:ScreenTip
                                Image="..\Assets\Ribbon\View\CharacterEditorIcon_32x32.png"
                                Title="Characters Editor"
                                Text="Changes current view to Characters Editor view.&#x0a;&#x0a;In this view user can:&#x0a;&#x2022; List existing characters&#x0a;&#x2022; Create new characters&#x0a;&#x2022; Edit existing characters&#x0a;&#x2022; Delete existing characters&#x0a;&#x0a;It is also possible to manage character's emotions in this view." />
                        </Fluent:Button.ToolTip>
                    </Fluent:Button>

                    <Fluent:Button Name="ChaptersViewButton" 
                                   Header="Chapters" 
                                   LargeIcon="..\Assets\Ribbon\View\ChapterEditorIcon_32x32.png"
                                   Icon="..\Assets\Ribbon\View\ChapterEditorIcon_32x32.png"
                                   Command="{Binding SwitchToChaptersEditorCommand}" >
                        <Fluent:Button.ToolTip>
                            <Fluent:ScreenTip
                                Image="..\Assets\Ribbon\View\ChapterEditorIcon_32x32.png"
                                Title="Chapters Editor"
                                Text="Changes current view to Chapters Editor view.&#x0a;&#x0a;In this view user can:&#x0a;&#x2022; List existing chapters&#x0a;&#x2022; Create new chapters&#x0a;&#x2022; Edit existing chapters&#x0a;&#x2022; Delete existing chapters&#x0a;&#x0a;It is also possible to manage chapters's missions in this view." />
                        </Fluent:Button.ToolTip>
                    </Fluent:Button>

                    <Fluent:Button Name="ConversationsViewButton" 
                                   Header="Conversations" 
                                   LargeIcon="..\Assets\Ribbon\View\ConversationEditorIcon_32x32.png"
                                   Icon="..\Assets\Ribbon\View\ConversationEditorIcon_32x32.png"
                                   Command="{Binding SwitchToConversationsEditorCommand}" >
                        <Fluent:Button.ToolTip>
                            <Fluent:ScreenTip
                                Image="..\Assets\Ribbon\View\ConversationEditorIcon_32x32.png"
                                Title="Conversations Editor"
                                Text="Changes current view to Conversations Editor view.&#x0a;&#x0a;In this view user can:&#x0a;&#x2022; List existing conversations&#x0a;&#x2022; Create new conversations&#x0a;&#x2022; Edit existing conversations&#x0a;&#x2022; Delete existing conversations&#x0a;&#x0a;It is also possible to manage conversations's statements and statement's stages in this view."
                                DisableReason="Please define at least one chapter with at least one mission in it to enable Conversations Editor.&#x0a;Also it would be helpful to define at least one character with at least one emotion.&#x0a;It is optional action but highly recommended." />
                        </Fluent:Button.ToolTip>
                    </Fluent:Button>

                </Fluent:RibbonGroupBox>
            </Fluent:RibbonTabItem>

        </Fluent:Ribbon>

        <ContentControl Name="MainContent" ContentTemplate="{StaticResource aaa}" />

    </DockPanel>
</Fluent:MetroWindow> 
````  `Window 的 ViewModel 和枚举

 `````
using MVVMTest.Models;
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MVVMTest.ViewModels {
    public enum EditorView {
        CharactersEditor,
        ChaptersEditor,
        ConversationsEditor
    }

    public class MainWindowVM : ViewModelBase {

        public MainWindowVM() {
            this.init();
        }

        protected void init() {
            this.Characters = new ObservableCollection<CharacterVM>();

            this.initCommands();
            this.initSampleData();
        }

        protected void initSampleData() {
            Character ch1 = new Character() { Name = "Character 1" };
            Emotion e1 = new Emotion() { Name = "Emotion 1" };
            ch1.Emotions.Add(e1);
            CharacterVM ch1vm = new CharacterVM(ch1);
            this.Characters.Add(ch1vm);

            this.CurrentView = EditorView.ConversationsEditor;
        }

        protected void initCommands() {
            this.SwitchToCharactersEditorCommand = new RelayCommand(param => this.SwitchToCharactersEditor(), param => this.CanSwitchToCharactersEditor());
            this.SwitchToChaptersEditorCommand = new RelayCommand(param => this.SwitchToChaptersEditor(), param => this.CanSwitchToChaptersEditor());
            this.SwitchToConversationsEditorCommand = new RelayCommand(param => this.SwitchToConversationsEditor(), param => this.CanSwitchToConversationsEditor());
        }

        public ObservableCollection<CharacterVM> Characters { get; set; }

        protected EditorView _currentView;
        public EditorView CurrentView {
            get { return this._currentView; }
            set {
                if (this._currentView == value) {
                    return;
                }
                this._currentView = value;
                this.OnPropertyChanged("CurrentView");
            }
        }

        #region Commands

        #region View Tab

        #region Switch To Characters Editor
        public RelayCommand SwitchToCharactersEditorCommand { get; private set; }
        protected void SwitchToCharactersEditor() {
            this.CurrentView = EditorView.CharactersEditor;
        }
        protected bool CanSwitchToCharactersEditor() {
            if (this.CurrentView != EditorView.CharactersEditor) {
                return true;
            }
            return false;
        }
        #endregion Switch To Characters Editor

        #region Switch To Chapters Editor
        public RelayCommand SwitchToChaptersEditorCommand { get; private set; }
        protected void SwitchToChaptersEditor() {
            this.CurrentView = EditorView.ChaptersEditor;
        }
        protected bool CanSwitchToChaptersEditor() {
            if (this.CurrentView != EditorView.ChaptersEditor) {
                return true;
            }
            return false;
        }
        #endregion Switch To Chapters Editor

        #region Switch To Conversations Editor
        public RelayCommand SwitchToConversationsEditorCommand { get; private set; }
        protected void SwitchToConversationsEditor() {
            this.CurrentView = EditorView.ConversationsEditor;
        }
        protected bool CanSwitchToConversationsEditor() {
            if (this.CurrentView != EditorView.ConversationsEditor) {
                return true;
            }
            return false;
        }
        #endregion Switch To Conversations Editor

        #endregion View Tab

        #endregion Commands
    }
} 
````  `当这一切都完成后，下一步就是像在 ModernUI 应用程序（或 android 智能手机）上一样为视图开关添加动画，这样旧的内容就会越过窗口的边界，而新的内容来自另一边。如果不可能，那么我将只使用工作切换器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:14:56.960

好消息是这实际上很容易做到，包括动画切换。您需要的是一个 ItemsControl 来托管您的子视图。ItemsControl 允许您使用 DataTemplateSelector。因此，根据您的枚举值，您可以生成一些输出，选择器可以使用这些输出来确定要使用的数据模板。尝试对选择器进行一些研究。如果您仍然感到困惑，请随时与我联系。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:40:17.360

对于动画，我建议使用一个容器控件来托管您的子视图。查看[此链接](http://www.codeproject.com/Articles/197132/Simple-WPF-Page-Transitions)以获得一个非常可靠的实现来帮助您入门。````

# php - 具有 GPS 坐标的光线投射算法

> ID：14149099
> 
> 赞同：3
> 
> 时间：2013-01-03T23:43:48.557
> 
> 标签：php, gps, maps, raycasting

我正在使用谷歌地图制作一个小型应用程序，以确定输入的地址是否是预定义服务区域的一部分。

用户输入一个地址，PHP 脚本从[地理编码 API](https://developers.google.com/maps/documentation/geocoding/)中获取纬度/经度，并使用构成该区域顶点的一组坐标应用光线投射（取自生成的 KML 文件地图）。

问题是这样的：它大部分时间都可以工作，但是服务区域*外*的一些地址错误地报告为合格，而该区域内的其他*一些*地址不合格。起初我认为这是 Google 地图的精度问题，但从地理编码服务中的地址生成的坐标是准确的。这可能与公式有关。

在这里（它基于我在其他地方找到的代码）：

```
// $points is an array full of Point objects (the vertices), which contain lat/long variables
// $ctr is simply a counter that we will test to see if it's even/odd
for ($i = 0, $j = sizeof($points) - 1; $i < sizeof($points); $j = $i++) {
    $p1 = $points[$i];
    $p2 = $points[$j];
    // $test_point is the lat/long pair of the user's address
    if ($p1->lat < $test_point->lat && $p2->lat >= $test_point->lat ||  $p2->lat < $test_point->lat && $p1->lat >= $test_point->lat)  {
        if ($p1->long + ($test_point->lat - $p1->lat)/($p2->lat - $p1->lat)*($p2->long - $p1->long) < $test_point->long)  
            $ctr++;
    }
} 
```

我在这里缺少什么吗？我尝试自己推导出一个公式，并且在某种程度上理解了这背后的数学原理，但是可以使用谷歌地图中的 GPS 坐标吗？

关于错误报告的内容似乎没有真正的模式：我测试了靠近边界的地址或服务区角落的地址，但那里没有运气。另外值得注意的是，这个服务区只是一个城市中一个相对较小的区域，与州或全国范围内的区域完全不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:31:34.807

好吧....您的第二个 if() 不能弥补任何减法都可能导致负数的事实；只有当坐标被严格排序时它才会起作用。

更新：在[http://rosettacode.org/wiki/Ray-casting_algorithmn](http://rosettacode.org/wiki/Ray-casting_algorithmn)上有一大堆各种语言的算法详细描述了这个过程（不幸的是，没有 PHP 版本）。您的解决方案中似乎缺少的是选择一个保证在多边形之外的点；因为您正在处理应该很容易的经度/纬度。其次，确保你的多边形是封闭的（即从最后一个点回到第一个点，如果谷歌地图还没有这样做的话）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T06:10:39.407

There is a bug with this algorithm, when the ray is tangent to the shape. Just add an epsilon to the test point's latitude when it might happen (line 3 of Ilmari's code):

```
if ($test_point->lat == $p0->lat)
    $test_point->lat += 0.0000000001; 
```

Also see [http://rosettacode.org/wiki/Ray-casting_algorithm](http://rosettacode.org/wiki/Ray-casting_algorithm) (corrected URL).

Thanks.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:08:23.990

假设`$points`数组包含按顺时针（或逆时针顺序）描述覆盖区域的多边形的角，您的代码对我来说看起来是正确的。基本上，它计算的是与从给定点到第 180 条子午线正东绘制的线相交的多边形边的数量。

为了清楚起见，我可能会像这样重写它：

```
$p0 = end($points);
foreach ( $points as $p1 ) {
    // ignore edges of constant latitude (yes, this is correct!)
    if ( $p0->lat != $p1->lat ) {
        // scale latitude of $test_point so that $p0 maps to 0 and $p1 to 1:
        $interp = ($test_point->lat - $p0->lat) / ($p1->lat - $p0->lat);
        // does the edge intersect the latitude of $test_point?
        // (note: use >= and < to avoid double-counting exact endpoint hits)
        if ( $interp >= 0 && $interp < 1 ) {
            // longitude of the edge at the latitude of the test point:
            // (could use fancy spherical interpolation here, but for small
            // regions linear interpolation should be fine)
            $long = $interp * $p1->long + (1 - $interp) * $p0->long;
            // is the intersection east of the test point?
            if ( $long < $test_point->long ) {
                // if so, count it:
                $ctr++;
            }
        }
    }
    $p0 = $p1;
} 
```

请注意，如果区域边界越过 180 度子午线，此代码将以各种有趣的方式中断，因此如果您在太平洋中部有任何服务区域，请不要使用它。

如果您仍然遇到问题，请尝试`$points`在地图上绘制数组所描述的多边形；您可能会发现它看起来不像您想象的那样，例如，如果某些点以错误的顺序列出。

# python - 使用 httplib 读取不完整

> ID：14149100
> 
> 赞同：26
> 
> 时间：2013-01-03T23:43:56.510
> 
> 标签：python, feedparser, httplib

我一直在从特定网站获取 RSS 提要时遇到问题。我最终编写了一个相当丑陋的程序来执行此功能，但我很好奇为什么会发生这种情况以及是否有任何更高级别的接口正确处理此问题。这个问题并不是真正的阻碍，因为我不需要经常检索提要。

我已经阅读了一个捕获异常并返回部分内容的解决方案，但是由于不完整的读取在实际检索到的字节数上有所不同，我不确定这种解决方案是否真的有效。

```
#!/usr/bin/env python
import os
import sys
import feedparser
from mechanize import Browser
import requests
import urllib2
from httplib import IncompleteRead

url = 'http://hattiesburg.legistar.com/Feed.ashx?M=Calendar&ID=543375&GUID=83d4a09c-6b40-4300-a04b-f88884048d49&Mode=2013&Title=City+of+Hattiesburg%2c+MS+-+Calendar+(2013)'

content = feedparser.parse(url)
if 'bozo_exception' in content:
    print content['bozo_exception']
else:
    print "Success!!"
    sys.exit(0)

print "If you see this, please tell me what happened."

# try using mechanize
b = Browser()
r = b.open(url)
try:
    r.read()
except IncompleteRead, e:
    print "IncompleteRead using mechanize", e

# try using urllib2
r = urllib2.urlopen(url)
try:
    r.read()
except IncompleteRead, e:
    print "IncompleteRead using urllib2", e

# try using requests
try:
    r = requests.request('GET', url)
except IncompleteRead, e:
    print "IncompleteRead using requests", e

# this function is old and I categorized it as ...
# "at least it works darnnit!", but I would really like to 
# learn what's happening.  Please help me put this function into
# eternal rest.
def get_rss_feed(url):
    response = urllib2.urlopen(url)
    read_it = True
    content = ''
    while read_it:
        try:
            content += response.read(1)
        except IncompleteRead:
            read_it = False
    return content, response.info()

content, info = get_rss_feed(url)

feed = feedparser.parse(content) 
```

如前所述，这不是一个关键任务问题，而是一个好奇心，因为即使我可以预期 urllib2 有这个问题，我很惊讶在 mechanize 和 requests 中也遇到了这个错误。feedparser 模块甚至不会抛出错误，因此检查错误取决于是否存在“bozo_exception”键。

编辑：我只想提一下 wget 和 curl 都完美地执行了该功能，每次都能正确检索完整的有效负载。我还没有找到一个纯 python 方法来工作，除了我丑陋的 hack，我很想知道 httplib 后端发生了什么。巧的是，前几天我决定用斜纹布也试试这个，得到了同样的 httplib 错误。

PS 还有一件事也让我觉得很奇怪。IncompleteRead 始终发生在负载中的两个断点之一。似乎 feedparser 和 requests 在读取 926 个字节后失败，但 mechanize 和 urllib2 在读取 1854 个字节后失败。这种行为是一致的，我没有解释或理解。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-07T23:41:46.017

归根结底，所有其他模块（`feedparser`、`mechanize`和`urllib2`）都会调用`httplib`抛出异常的地方。

现在，首先，我还用 wget 下载了这个文件，结果文件是 1854 字节。接下来，我尝试了`urllib2`：

```
>>> import urllib2
>>> url = 'http://hattiesburg.legistar.com/Feed.ashx?M=Calendar&ID=543375&GUID=83d4a09c-6b40-4300-a04b-f88884048d49&Mode=2013&Title=City+of+Hattiesburg%2c+MS+-+Calendar+(2013)'
>>> f = urllib2.urlopen(url)
>>> f.headers.headers
['Cache-Control: private\r\n',
 'Content-Type: text/xml; charset=utf-8\r\n',
 'Server: Microsoft-IIS/7.5\r\n',
 'X-AspNet-Version: 4.0.30319\r\n',
 'X-Powered-By: ASP.NET\r\n',
 'Date: Mon, 07 Jan 2013 23:21:51 GMT\r\n',
 'Via: 1.1 BC1-ACLD\r\n',
 'Transfer-Encoding: chunked\r\n',
 'Connection: close\r\n']
>>> f.read()
< Full traceback cut >
IncompleteRead: IncompleteRead(1854 bytes read) 
```

所以它正在读取所有 1854 个字节，但随后认为还有更多。如果我们明确告诉它只读取 1854 个字节，它就可以工作：

```
>>> f = urllib2.urlopen(url)
>>> f.read(1854)
'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">...snip...</rss>' 
```

显然，这只有在我们总是提前知道确切长度时才有用。我们可以使用部分读取作为异常属性返回的事实来捕获全部内容：

```
>>> try:
...     contents = f.read()
... except httplib.IncompleteRead as e:
...     contents = e.partial
...
>>> print contents
'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">...snip...</rss>' 
```

[This blog post](http://bobrochel.blogspot.co.nz/2010/11/bad-servers-chunked-encoding-and.html)表明这是服务器的故障，并描述了如何使用上面`httplib.HTTPResponse.read()`的块对方法进行猴子修补`try..except`以处理幕后的事情：

```
import httplib

def patch_http_response_read(func):
    def inner(*args):
        try:
            return func(*args)
        except httplib.IncompleteRead, e:
            return e.partial

    return inner

httplib.HTTPResponse.read = patch_http_response_read(httplib.HTTPResponse.read) 
```

我应用了补丁然后`feedparser`开始工作：

```
>>> import feedparser
>>> url = 'http://hattiesburg.legistar.com/Feed.ashx?M=Calendar&ID=543375&GUID=83d4a09c-6b40-4300-a04b-f88884048d49&Mode=2013&Title=City+of+Hattiesburg%2c+MS+-+Calendar+(2013)'
>>> feedparser.parse(url)
{'bozo': 0,
 'encoding': 'utf-8',
 'entries': ...
 'status': 200,
 'version': 'rss20'} 
```

这不是最好的做事方式，但它似乎有效。我在 HTTP 协议方面不够专业，无法确定服务器是否做错了，或者是否`httplib`错误处理了边缘情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-17T22:14:40.423

我发现在我的情况下，发送一个 HTTP/1.0 请求，解决问题，只需将其添加到代码中：

```
import httplib
httplib.HTTPConnection._http_vsn = 10
httplib.HTTPConnection._http_vsn_str = 'HTTP/1.0' 
```

在我提出要求后：

```
req = urllib2.Request(url, post, headers)
filedescriptor = urllib2.urlopen(req)
img = filedescriptor.read() 
```

在我回到 http 1.1 之后（对于支持 1.1 的连接）：

```
httplib.HTTPConnection._http_vsn = 11
httplib.HTTPConnection._http_vsn_str = 'HTTP/1.1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-03T19:55:14.253

我已经通过使用 HTTPS 而不是 HTTP 解决了这个问题，并且它工作正常。无需更改代码。

# c++ - 调试时看不到变量值

> ID：14149102
> 
> 赞同：0
> 
> 时间：2013-01-03T23:44:36.663
> 
> 标签：c++, visual-studio-2010, debugging

> **可能重复：**
> [为什么 Visual Studio 2010 会说它在调试期间不能显示变量？](https://stackoverflow.com/questions/2784678/why-would-visual-studio-2010-say-it-cant-show-a-variable-during-debug)

这种情况经常发生在我进入 c++ 中的一个函数并且我看不到变量的值的地方。在 C# 中，我只是介入，我可以看到有关该对象的所有内容。这是一个已知问题还是我做错了什么。

我希望能够进入`MethodName(x,y);`并查看新方法中的 x 和 y 值。

我正在使用视觉工作室 2010

# jquery - 滚动条内的寻呼机

> ID：14149104
> 
> 赞同：0
> 
> 时间：2013-01-03T23:44:49.080
> 
> 标签：jquery, jquery-ui, scroll, pager

我需要这方面的帮助我需要在滚动条内放置一个寻呼机，我正在使用[滑块小部件](http://jqueryui.com/slider/#side-scroll) ，但我不明白如何实现任何想法？

[这就是我所做的](http://mauriciocastillo.com/clientes/kinema/coleccion.html) Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:52:45.793

如果我理解正确，您正在尝试将寻呼机文本置于滚动条的中心？我已经设法通过添加`text-align:center`到类来实现这一点`ui-slider-handle ui-state-default ui-corner-all`

# javascript - 从 javascript 调用 css 规则

> ID：14149107
> 
> 赞同：0
> 
> 时间：2013-01-03T23:45:04.307
> 
> 标签：javascript, css

大家好，我想知道是否可以通过javascript通过调用该css规则将通过css访问的.png转换为可点击的链接。

```
.calendar {
    background: transparent url("../cal_icon.png") no-repeat 94px 3px;
    background-repeat: no-repeat;
    margin-right: 2px;
} 
```

这是我想让我的 cal_icon.png 可点击的 css 规则。这可能吗？请原谅我对这件事的无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:10:23.447

正如评论中所说，您需要向元素添加点击处理程序，而 css 仅用于样式

你可以看看这个小提琴，它使用 jQuery (onLoad) [http://jsfiddle.net/tq92z/](http://jsfiddle.net/tq92z/)

```
$('.calendar').click(function(){
    $(this).css('color','red');
}) 
```

IE 有一个 css 表达式，也许其他浏览器有别的东西（但我现在什么都不记得了）

[http://www.richnetapps.com/using_javascript_expressions_in_css/](http://www.richnetapps.com/using_javascript_expressions_in_css/)

但是用 css 进行 dom 操作并不是一种常见的做法

# c# - 如何在实体框架代码中首先表示桥表

> ID：14149110
> 
> 赞同：13
> 
> 时间：2013-01-03T23:45:31.833
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-4.1

我试图找出如何表示两个实体之间的桥接表（多对多关系）我首先使用实体​​框架代码

```
Student:
   StudentID int  PK
   StudentName VARCHAR(50)

Class:
   ClassID int PK
   ClassName VARCHAR(50)

StudentClass:
   StudentID INT PK
   ClassID INT PK 
```

我应该使用什么最好的类结构来在实体框架代码中表示它，以及如何从桥表中选择并插入其中。

我应该像这样表示类：

```
 public class Student
    {
        public int StudentId { get; set; }
        public string StudentName { get; set; }

        public List<Class> Class { get; set; }

    }

    public class Class
    {
        public int ClassId { get; set; }
        public string ClassName { get; set; }

        public List<Student> Students { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T23:50:51.443

**简而言之：**`Student`和之间的这种关系类型在EF术语中`Class`称为**多对多关系。**

> 实体框架以一种很好的方式处理参与多对多关系的表。如果联结表（有时称为桥表、关联表、链接表等）仅由外键组成，没有其他列，则该表由 EF 抽象，并且双方获得一个导航属性，公开对方的集合边。

您需要首先为上述表格生成一个实体模型，或者定义您的代码优先结构，如下面的帖子 -[使用代码优先创建多对多映射](http://www.codeproject.com/Articles/234606/Creating-a-Many-To-Many-Mapping-Using-Code-First)。

基本上，根据您的结构，您需要设置`OnModelCreating`适合类中关系的方法。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
```

根据您的**查询需求**，您会发现查看以下参考资料会有所帮助：

*   [涉及多对多关系表的查询](http://smehrozalam.wordpress.com/2010/06/29/entity-framework-queries-involving-many-to-many-relationship-tables/)
*   [实体框架中的多对多映射](http://weblogs.asp.net/zeeshanhirani/archive/2008/08/21/many-to-many-mappings-in-entity-framework.aspx)
*   [与实体框架的多对多关系](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/db6df279-a925-443c-a616-7375867409a6/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-16T02:15:20.813

在 Code First 中有很多方法可以表示多对多关系。这实际上仅取决于您对映射的需求。如果您只需要注册地图，那么到目前为止您所拥有的一切都有效。您显示的关系将被 Code First 识别，并且会自动为您创建一个名为“StudentClasses”的映射表

要在映射表中创建映射，只需执行以下操作：

```
using(var context = new StudentClassContext())
{ 
     Student aStudent = new Student{ StudentName="Johnny", Class = new Class(){ ClassName="Gym"}}
     context.Students.Add(aStudent);
     context.SaveChanges();
} 
```

您也可以反过来执行此操作：

```
using(var context = new StudentClassContext())
{ 
     Class aClass = new Class{ ClassName = "Gym", Students = new Student(){ StudentName="Johnny"}}
     context.Classes.Add(aClass);
     context.SaveChanges();
} 
```

如果您想更具体和明确地了解关系，可以在覆盖的上下文 OnModelCreating() 方法中设置显式映射。看起来像这样：

```
public class StudentClassContext
{
    public DbSet<Student> Students { get; set; }
    public DbSet<Class> Classes { get; set; }

    public StudentClassContext()
    {

    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Student>()
           .HasMany(aStudent => aStudent.Classes) // A student can have many classes
           .WithMany(aClass => aClass.Students)); // Many classes can have many students
         //.Map(c => c.ToTable("StudentClass); // Set the mapping table to this name
    }

} 
```

如果由于某种原因您需要在代码中或在 EntityFramework 上下文操作之外访问映射表，我会说创建一个专用的映射类并使其成为代码中的一等公民：

```
public class Student
{
    //...
}

public class Class
{
    //...
}

// New Map Class
public class StudentClassMapRecord
{
    public int Id; // Map record PK
    public Student Student { get; set; }
    public Class Class { get; set; }

    public StudentClassMapRecord(Student aStudent, Class aClass)
    {
        Student = aStudent;
        Class = aClass;
    }

    //Uncomment below if you don't need property navigation
    //public int StudentId { get; set; }
    //public int ClassId { get; set; }        
    //public StudentClassMapRecord(int studentId, int classId)
    //{
    //    StudentId = studentId;
    //    ClassId = classId;
    //} 
} 
```

# javascript - 如何使用 javascript 将 X-header 字段添加到 Gmail 标头？

> ID：14149111
> 
> 赞同：3
> 
> 时间：2013-01-03T23:45:32.493
> 
> 标签：javascript, google-chrome-extension, gmail, email-headers, content-script

我正在编写一个基于 Gmail 的 Chrome 扩展程序，它需要在发送邮件之前向邮件标题添加几个专有标题字段。我的应用程序逻辑如下：用户在 Gmail 中撰写邮件并按下发送按钮后，内容脚本中的代码拦截 Click 事件并创建标题字段。所以我的问题是，如何访问可以插入新字段的邮件标题？我在 JavaMail 和 Android 中寻找类似 Message.setHeader() 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:42:41.013

你不能。Gmail 没有规定用户可以添加除`Reply-To`.

但是，如果您可以展示如何*手动*添加自定义标题，那么我们可以向您展示如何使用内容脚本自动添加。

在此之前，要发送 X-header，您必须使用不同的电子邮件客户端。 [例如，配置 Thunderbird 以通过 IMAP 使用 Gmail](https://support.mozillamessaging.com/en-US/kb/thunderbird-and-gmail)。

# php - Mysql查询变量语法

> ID：14149113
> 
> 赞同：1
> 
> 时间：2013-01-03T23:45:52.753
> 
> 标签：php, mysql

我正在尝试将变量传递给一个非常基本的 mysql 查询。但 php 不返回一个真值。没有。

我已经检查了一切

问题就在这里。

$a 变量输入 mysql 查询的语法

```
$result = mysql_query("SELECT id,floatingnumber FROM posts WHERE id='$a' LIMIT 1"); 
```

当我将 $a 更改为 22 时，它返回一个值，否则什么也没有。

确切的查询在这里...

```
$a=$this->post_id;
$result = mysql_query('SELECT floatingnumber FROM posts WHERE id="'.$a.'" LIMIT 1')or die(mysql_error());

$row = mysql_fetch_row($result);

  $sdfa=$a.'-'.$row[0]; 
```

$sdfa 返回 "86 - " 不带引号 86 - 空格

所以问题出在mysql fetch行上请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:47:01.843

您是否尝试过回显查询以查看真正的价值`$a`是什么？

```
echo "SELECT id,floatingnumber FROM posts WHERE id='$a' LIMIT 1"; 
```

您是否尝试过检查错误？

```
$result = mysql_query("SELECT id,floatingnumber FROM posts WHERE id='$a' LIMIT 1") or die(mysql_error()); 
```

此外，您甚至不应该使用 mysql_* ，因为它已被弃用。

这就是你在 PDO 中的做法：

```
$stmnt = $db->prepare("SELECT id,floatingnumber FROM posts WHERE id=:id LIMIT 1");
$stmnt->bindValue( ':id' , $a , PDO::PARAM_INT );
$stmnt->execute();
$result = $stmnt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:48:30.143

试试这个

```
 $result = mysql_query("SELECT id,floatingnumber FROM posts WHERE id='".$a."' LIMIT 1"); 
```

如果你`$a`是一个数字，那么就这样做

```
 $result = mysql_query("SELECT id,floatingnumber FROM posts WHERE id= $a  LIMIT 1"); 
```

**编辑 ：**

你的代码是正确的

```
 $row = mysql_fetch_row($result);

      $sdfa=$a.'-'.$row[0]; 
```

问题出在您的 sql 或表中，因为没有`floatingnumber`id 在哪里`86`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:50:59.503

通常当我用双引号书写时，只需输入变量即可：

```
"... $1 ..." 
```

而且，我最初是用括号学的

```
"... {$1} ..." 
```

你可以试试。此外，编写查询的一种方便方法是将查询字符串存储在它自己的变量中，这样您就可以轻松地打印出查询并在提交之前查看您写的内容。

```
$query = "SELECT id,floatingnumber FROM posts WHERE id=$a LIMIT 1";
$result = mysql_query( $query ); 
```

这有助于识别这样的事情。

# java - 为什么 wsimport 对具有 @XmlRootElement 注释的服务器对象有问题？

> ID：14149121
> 
> 赞同：2
> 
> 时间：2013-01-03T23:46:48.830
> 
> 标签：java, jaxb, jax-ws, xjc, wsimport

我正在使用服务器端的 JAX-WS 完成 Web 服务的工作。在许多领域对象中，我`@XmlRootElement`使用 JAXB 帮助促进将 XML 文件解组到服务中。一切顺利，输出是我使用 SoapUI 所期望看到的。

但是，当我使用 wsimport 创建客户端（作为其他开发人员的便利 DAO）时，我开始在客户端集成测试类中遇到 NullPointerExceptions。

对 web 服务的调用正常工作，客户端收到了响应，但我的更复杂的对象为空。简单的属性，如字符串，返回的都是可用数据，但不是较大的对象。

通过使用简单字符串重新创建服务并迁移到更复杂的对象的迭代，我发现当客户端收到在服务器上声明的对象时`@XmlRootElement`，这些对象是空的。如果服务器对象没有`@XmlRootElement`注释，则客户端会收到所有复杂荣耀中的所有数据。

最初，缺乏`@XmlRootElement`让我适合解组服务器上的数据，但[这个答案](https://stackoverflow.com/a/6998627/197496)帮助了我。

`@XmlRootElement`因此，wsimport 客户端由于注释（在服务器上！）而在 Web 服务响应的解组时静默失败的现象让我感到担忧。在这种情况下，我可以控制双方并且可以做点什么。但是，如果我无法控制服务器怎么办？仅使用 wsimport 生成的代码我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T15:58:18.197

Found the answer, or the reason, so thought I would share.

The `@XmlRootElement` annotation is useful for plain `JAXB` bindings, but when the objects (and the resulting XML) are packaged as a `SOAP` response it is possible that they don't exactly match the `WSDL`'s representation of the data depending on the value of other annotations.

With the `@XmlRootElement` annotation on the class on the server which is being returned by a `@WebMethod` method, the `WSDL` will include an element definition such as:

```
<xs:element name="foo" type="tns:FooType"/> 
```

then elsewhere your `WSDL` will include a reference to the element in a sequence such as:

```
<xs:seqeunce>
<xs:element maxOccurs="unbounded" minOccurs="0" ref="tns:foo"/>
</xs:sequence> 
```

This referencing is caused by the `@XmlRootElement` annotation may confuse the intent of the root element declaration compared to the actual XML of the SOAP response.

In contrast, the `WSDL` generated without the `@XmlRootElement` annotation on the server objects does not contain a `<xs:element name="foo"/>` declaration at all. Rather its element is described as:

```
<xs:sequence>
<xs:element maxOccurs="unbounded" minOccurs="0" name="foo" type="tns:FooType"/>
</xs:sequence> 
```

This probably better matches the way the SOAP response XML is represented and the unmarshalling of the XML into the classes generated by `wsimport` works just fine.

**How to use `@XmlRootElement` in a `JAX-WS` service?**

`wsimport` seems to handle some degree of laziness in the validity of the XML returned by a service. The lesson learned is to be diligent in your use of `name` and `targetNamespace` on your `@WebResult` annotations describing your web service method. The `@XmlRootElement` annotation needs to match the `name` within the `targetNamespace`. When they all match, the unmarshalling happens as expected. When those values do not match, your stubbed classes generated and annotated by `wsimport` will not be able to properly consume the XML.

# c - 如何将包含十六进制字符代码的字符串转换为字符值？

> ID：14149130
> 
> 赞同：-7
> 
> 时间：2013-01-03T23:47:26.950
> 
> 标签：c

我有一个 chars 数组`"0x55"`。我想要做的是将它转换`char`为将要成为的`U`（因为 ASCII 0x55 = `U`）。

那么如何进行这种转换呢？

```
#include <windows.h>

int main()
{
array[] = "0x55"
char test;

**// I want to move the string to that test to be one character which is U**

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:53:17.787

我认为这就是你所追求的：

```
int main(int argc,char**argv)
{
  char array[] = "0x55";
  int value;
  char test;

  sscanf(array,"%x",&value);
  test = value;

  return 0;
} 
```

在 C++ 中，我会对其进行一些不同的编码，但这似乎更像是一个 C 问题。

# border - 具有实心边框半径的 CSS 拆分条形图

> ID：14149133
> 
> 赞同：0
> 
> 时间：2013-01-03T23:47:40.700
> 
> 标签：border, css

我试图让具有黑色背景的 div 容器替代具有边框半径的条形图的边框样式。这是 HTML/CSS：

HTML：

```
<div class="graph-outer">
    <div class="inner-left-cap"></div>
    <div class="inner-left-bar">40%</div>
    <div class="inner-right-bar">60%</div>
    <div class="inner-right-cap"></div>
</div> 
```

CSS：

```
.graph-outer {
    background-color: black;
    height: 20px;
    width: 300px;   
    border-radius: 10px;
    padding: 1px;
}

.inner-left-cap {
    background: orange;
    width: 2%;
    height: 100%;
    border-top-left-radius: 10px;
    border-bottom-left-radius: 10px;
    float: left;
}

.inner-left-bar {
    background: orange;
    width: 38%;
    height: 100%;
    text-align: center;
    float: left;
}

.inner-right-cap {
    background: red;
    width: 2%;
    height: 100%;
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    float: left;
}

.inner-right-bar {
    background: red;
    width: 58%;
    height: 100%;
    text-align: center;
    float: left;
} 
```

[http://jsfiddle.net/2ZkDz/115/](http://jsfiddle.net/2ZkDz/115/)

我遇到的问题是角落看起来好像没有任何黑色边框样式。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:53:50.677

将此版本与溢出：隐藏和外部控制器上的显式边框一起使用，并且没有填充。

```
.graph-outer {
    background-color: black;
    height: 20px;
    width: 300px;   
    border:1px solid black;
    border-radius: 10px;
    overflow:hidden;
}

.inner-left-cap {
    background: orange;
    width: 2%;
    height: 100%;
    float: left;
}

.inner-left-bar {
    background: orange;
    width: 38%;
    height: 100%;
    text-align: center;
    float: left;
}

.inner-right-cap {
    background: red;
    width: 2%;
    height: 100%;
    float: left;
}

.inner-right-bar {
    background: red;
    width: 58%;
    height: 100%;
    text-align: center;
    float: left;
}
​ 
```

[http://jsfiddle.net/2ZkDz/116/](http://jsfiddle.net/2ZkDz/116/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:56:30.710

[http://jsfiddle.net/2ZkDz/120/](http://jsfiddle.net/2ZkDz/120/)

```
border-radius: 10px;
padding: 2px; 
```

That should do it! I just threw on a border-radius and bumped up the padding 1\. There should be an easier way using the actual border property but im feeling lazy and this does it

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:53:52.060

我已经更新了您的 CSS，我将每个上限更改为 3%，并使条形变小。里面的酒吧正在越过帽子。

```
.graph-outer {
    background-color: black;
    height: 20px;
    width: 300px;   
    border-radius: 10px;
    padding: 1px;
}

.inner-left-cap {
    background: orange;
    width: 3%;
    height: 100%;
    border-top-left-radius: 10px;
    border-bottom-left-radius: 10px;
    float: left;
}

.inner-left-bar {
    background: orange;
    width: 37%;
    height: 100%;
    text-align: center;
    float: left;
}

.inner-right-cap {
    background: red;
    width: 3%;
    height: 100%;
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    float: left;
}

.inner-right-bar {
    background: red;
    width: 57%;
    height: 100%;
    text-align: center;
    float: left;
}
​ 
```

[http://jsfiddle.net/2ZkDz/119/](http://jsfiddle.net/2ZkDz/119/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:55:15.443

没有端盖的解决方案（这样条形宽度与值匹配）

[演示 jsfiddle](http://jsfiddle.net/2ZkDz/118/)

高度为20`graph-outer`像素，因此嵌套条为 18 像素（20 像素 - 2 像素（1 像素顶部/底部填充）），将条上的边框半径设置为每个 9 像素（高度的一半，因此每个角都是统一的并与父项曲率相匹配）

```
.inner-left-bar {
    background: orange;
    width: 40%;
    height: 100%;
    text-align: center;
    float: left;
    border-radius:9px 0 0 9px; /* add this */
}

.inner-right-bar {
    background: red;
    width: 60%;
    height: 100%;
    text-align: center;
    float: left;
    border-radius:0 9px 9px 0; /* and this */
}

/* and drop the end-caps */
​ 
```

# javascript - 如何为 nicEditor 使用多个配置？

> ID：14149139
> 
> 赞同：0
> 
> 时间：2013-01-03T23:48:19.503
> 
> 标签：javascript, nicedit

我有一个 id 为“ `p_1_input`”的文本区域，如下所示，我试图限制此编辑器对话框的功能并限制其高度，因此过多的内容不会推动对话框扩展但可滚动。
我怎样才能把这两个配置放在网上，比如：“ `{maxHeight : 200}" and "{buttonList : ['bold','italic']}`”？

```
new nicEditor({buttonList : ['bold','italic']}).panelInstance('p_1_input');
new nicEditor({maxHeight : 200}).panelInstance('p_1_input'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:18:23.477

你可以这样使用。

```
new nicEditor({
         maxHeight: 133,
         buttonList: ['bold','italic']
          }).panelInstance('p_1_input'); 
```

# d3.js - 使用 d3.js 将 DOM 的现有元素连接到数据

> ID：14149145
> 
> 赞同：5
> 
> 时间：2013-01-03T23:48:59.420
> 
> 标签：d3.js

我正在尝试加入现有的输入文本（由 选择`d3.selectAll()`），这些文本具有与与 D3 连接的数据中的键相对应的唯一 ID。我希望 D3 将输入元素的 ID 与数据的键相关联，但事实并非如此。

关联是按照它们分别出现在 DOM 和数组中的顺序进行的。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T02:39:46.053

请记住，将对数据数组的每个元素（即 dt）以及选择中的每个元素（即 d3.selectAll(".input")）调用 key 函数。在这两种情况下，键函数都需要返回一个有效值，并且这些输出值将用于建立关联。

为了实现您的目标，您可以执行以下示例。现场版本见小提琴：http: [//jsfiddle.net/2Fkjq/](http://jsfiddle.net/2Fkjq/)

如果您的文档包含以下内容：

```
<div id="c"></div>
<div id="a"></div>
<div id="b"></div> 
```

然后执行这个：

```
var data = [
    { key: "a", val: "aaa" },
    { key: "b", val: "bbb" },
    { key: "c", val: "ccc" }
];

d3.selectAll("div")
    .data(data, function(d) { return (d && d.key) || d3.select(this).attr("id"); })
    .text(function(d) { return d.val; }); 
```

将导致此文档：

```
<div id="c">ccc</div>
<div id="a">aaa</div>
<div id="b">bbb</div> 
```

您会看到关键功能由两部分组成。第一部分是为数据数组设计的：

```
(d && d.key) 
```

该部分将返回`undefined`d3 选择中的元素。第二部分针对这些元素：

```
d3.select(this).attr("id") 
```

# asp.net - ASP.Net 网络表单中的 Twitter Bootstrap 表单？

> ID：14149149
> 
> 赞同：1
> 
> 时间：2013-01-03T23:49:16.250
> 
> 标签：asp.net, twitter-bootstrap, webforms

尝试在 ASP.Net webforms 应用程序和 Twitter Bootstrap 上设置一些表单*非常*有帮助。

除了.... 对于其中一些，我真的希望能够使用默认样式以外的表单样式，这需要我在父表单上设置一个类名。如果我知道如何在 Webforms 中访问它，我现在已经完全忘记了。

有没有办法做到这一点，任何人都可以指出我？谢谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T20:50:21.863

要添加任何不可用作控件中的属性的属性，您可以执行以下操作：

```
Form.Attributes.Add("class", "any_css_to_the_form"); 
```

# mysql - MySQL 分析不适用于嵌套函数

> ID：14149150
> 
> 赞同：0
> 
> 时间：2013-01-03T23:49:27.560
> 
> 标签：mysql, performance, profiling

我正在尝试分析 MySQL 中的一些查询，版本：

```
mysql  Ver 14.14 Distrib 5.5.28, for debian-linux-gnu (x86_64) using readline 6.2 
```

从标准方法开始，

```
SET profiling = 1; 
```

...和一个示例查询：

```
SELECT  mer.name
FROM    merchants mer
JOIN (
        SELECT  mem.id, mem.merchant_id
        FROM    members mem
        WHERE   is_test_account(mem.email) = false # THIS CAUSES PROBLEMS!
     ) subquery
ON mer.id = subquery.merchant_id
GROUP BY mer.id; 
```

当我在嵌套查询中使用**任何自定义函数**`is_test_account`时会出现问题，如上图所示。执行显示的查询会阻止它出现在配置文件列表中，`SHOW PROFILES;` 从内部查询的条件中删除函数可以`WHERE`解决问题！

作为参考，该函数`is_test_account`如下所示：

```
DELIMITER //

CREATE FUNCTION is_test_account(p_email_addr VARCHAR(255))
    RETURNS BOOLEAN
    DETERMINISTIC
BEGIN
    RETURN (p_email_addr like '%demo.com'
        OR  p_email_addr like '%example.com'
           );
END// 
```

为什么在嵌套查询中使用该函数会阻止 MySQL 分析工作？

任何解决问题的见解将不胜感激。谢谢你。

# php - 检查是否安装了 Chrome 扩展程序

> ID：14149152
> 
> 赞同：0
> 
> 时间：2013-01-03T23:50:17.370
> 
> 标签：php, javascript, google-chrome

> **可能重复：**
> [检查用户是否安装了我的 chrome 扩展](https://stackoverflow.com/questions/6293498/check-whether-user-has-my-chrome-extension-installed)

是否有任何简单的方法可以为安装了 chrome 扩展程序的用户显示 div，并为没有安装 chrome 扩展程序的用户显示不同的 div，如下所示：

```
<div>X Chrome Extension is installed</div>

<div>X Chrome Extension is not isntalled</div> 
```

php 或 javascript 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:55:14.227

**那是不可能的。**您无法通过 JavaScript 获得简单的列表。

您只能检查特定扩展引入的内容（例如新的 DOM 元素等）。

您无法使用 PHP 完成任何客户端检查，因为它是在服务器端解释和运行的。

# php - 使用 TCPDF 将特定 div 转换为 PDF

> ID：14149153
> 
> 赞同：0
> 
> 时间：2013-01-03T23:50:22.733
> 
> 标签：php, html, tcpdf

我有一个用 javascript 编写的 Web 应用程序。在应用程序结束时，用户会收到一张收据，其中显示了他们在操作应用程序过程中的所有操作。我想将此收据转换为 PDF 文件，以便更轻松地访问它（例如，下载、打印等）。我无法定位我希望用作收据的特定 div。

```
<div id="receipt"> --- Some Content --- </div> 
```

我想针对特定的 div 'receipt' 但仅在应用程序结束时（我正在修改 DOM 很多，因此收据 div 每次都包含新内容，并且只在最后才相关）。我想知道是否有一些 PHP 命令可以从网页获取 HTML 文本，以便我可以将变量输入到 TCPDF PHP 调用中：

```
$pdf->writeHTML($html, true, false, true, false, ''); 
```

第一个变量是一些 html 文本。

如何声明一个变量 $html，它包含来自 .html 页面的特定 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:52:33.633

您可以使用[PHP: DOM](http://php.net/manual/en/book.dom.php)搜索 HTML 文件并找到 DIV 的内容，然后将找到的内容转换为 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:49:54.140

1.  在收据底部添加一个“打印”按钮。
2.  在打印按钮的 'onclick' 事件中添加一个 javascript 函数。获取收据 div 的内容（使用 jquery: $('#receipt').html() 或 javascript 'document.getEmementById('receipt').innerHTML'）。将此内容添加到表单中的隐藏变量中。将表单提交到专用的 php 文件。(<form target='_blank')
3.  您在专用 php 文件中获得了发布数据。

    $html = $_POST['hiddenHtml'];

4.  $pdf->writeHTML($html, true, false, true, false, '');

# python - 在 pandas 中将多索引与单索引数据帧合并

> ID：14149156
> 
> 赞同：34
> 
> 时间：2013-01-03T23:50:49.317
> 
> 标签：python, pandas

我有两个数据框。df1 是多索引的：

```
 value
first second    
a     x         0.471780
      y         0.774908
      z         0.563634
b     x         -0.353756
      y         0.368062
      z         -1.721840 
```

和df2：

```
 value
first   
a     10
b     20 
```

如何仅将两个数据框与一个多索引合并，在这种情况下是“第一个”索引？所需的输出将是：

```
 value1      value2
first second    
a     x         0.471780    10
      y         0.774908    10
      z         0.563634    10
b     x         -0.353756   20
      y         0.368062    20
      z         -1.721840   20 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T00:10:22.773

你可以使用[`get_level_values`](http://pandas.pydata.org/pandas-docs/dev/indexing.html#reconstructing-the-level-labels)：

```
firsts = df1.index.get_level_values('first')
df1['value2'] = df2.loc[firsts].values 
```

注意：你*几乎*在这里做一个[`join`](http://pandas.pydata.org/pandas-docs/dev/merging.html#joining-on-index)（除了df1是MultiIndex）......所以可能有一种更简洁的方式来描述这个......

.

在一个例子中（类似于你所拥有的）：

```
df1 = pd.DataFrame([['a', 'x', 0.123], ['a','x', 0.234],
                    ['a', 'y', 0.451], ['b', 'x', 0.453]],
                   columns=['first', 'second', 'value1']
                   ).set_index(['first', 'second'])
df2 = pd.DataFrame([['a', 10],['b', 20]],
                   columns=['first', 'value']).set_index(['first'])

firsts = df1.index.get_level_values('first')
df1['value2'] = df2.loc[firsts].values

In [5]: df1
Out[5]: 
              value1  value2
first second                
a     x        0.123      10
      x        0.234      10
      y        0.451      10
b     x        0.453      20 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-08-03T17:34:14.320

根据[文档](http://pandas.pydata.org/pandas-docs/stable/merging.html#joining-a-single-index-to-a-multi-index)，从 pandas 0.14 开始，您可以简单地加入单索引和多索引数据帧。它将匹配公共索引名称。该`how`论点与`'inner'`and一起按预期工作`'outer'`，尽管有趣的是它似乎与 and 相反`'left'`（`'right'`这可能是一个错误吗？）。

```
df1 = pd.DataFrame([['a', 'x', 0.471780], ['a','y', 0.774908], ['a', 'z', 0.563634],
                    ['b', 'x', -0.353756], ['b', 'y', 0.368062], ['b', 'z', -1.721840],
                    ['c', 'x', 1], ['c', 'y', 2], ['c', 'z', 3],
                   ],
                   columns=['first', 'second', 'value1']
                   ).set_index(['first', 'second'])
df2 = pd.DataFrame([['a', 10], ['b', 20]],
                   columns=['first', 'value2']).set_index(['first'])

print(df1.join(df2, how='inner'))
                value1  value2
first second                  
a     x       0.471780      10
      y       0.774908      10
      z       0.563634      10
b     x      -0.353756      20
      y       0.368062      20
      z      -1.721840      20 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T04:17:51.167

由于`.ix`语法是重新索引的强大快捷方式，但在这种情况下，您实际上并没有进行任何组合的行/列重新索引，因此只需使用重新索引就可以更优雅地完成（对于我不起眼的味蕾）：

来自海登的准备：

```
df1 = pd.DataFrame([['a', 'x', 0.123], ['a','x', 0.234],
                    ['a', 'y', 0.451], ['b', 'x', 0.453]],
                   columns=['first', 'second', 'value1']
                   ).set_index(['first', 'second'])
df2 = pd.DataFrame([['a', 10],['b', 20]],
                   columns=['first', 'value']).set_index(['first']) 
```

然后这在 iPython 中看起来像这样：

```
In [4]: df1
Out[4]: 
              value1
first second        
a     x        0.123
      x        0.234
      y        0.451
b     x        0.453

In [5]: df2
Out[5]: 
       value
first       
a         10
b         20

In [7]: df2.reindex(df1.index, level=0)
Out[7]: 
              value
first second       
a     x          10
      x          10
      y          10
b     x          20

In [8]: df1['value2'] = df2.reindex(df1.index, level=0)

In [9]: df1
Out[9]: 
              value1  value2
first second                
a     x        0.123      10
      x        0.234      10
      y        0.451      10
b     x        0.453      20 
```

您必须在重新索引方法中使用的级别的助记符：它说明您已经在更大的索引中覆盖的级别。因此，在这种情况下，df2 已经覆盖了 df1.index 的级别 0。

# c# - 绑定 UserControls 属性

> ID：14149160
> 
> 赞同：1
> 
> 时间：2013-01-03T23:51:01.410
> 
> 标签：c#, wpf, xaml, user-controls, opacity

我有点奇怪atm。

我要做的第一件事是将我的用户控件的不透明度绑定到带有转换器的布尔属性。我在一个带有小菜单的全屏 WPF 应用程序上。如果菜单打开，其他任何东西都应该得到较低的不透明度。有点灰了一切。

第二件事是菜单不应该从用户控件继承不透明度。

不知道我可以用谷歌搜索什么。我努力寻找有用的东西是徒劳的。希望您能够帮助我。

问候卢卡斯

看法：

```
<UserControl ....>
...

    <view:InvisibleButtonView Grid.Row="0" Grid.Column="2" 
                            Height="75" Width="75"
                            VerticalAlignment="Top" HorizontalAlignment="Right" />

    <view:IdleScreenView Visibility="{Binding IsWelcomeScreenActive,Converter={StaticResource ResourceKey=NegativeBooleanToVisibilityConverter}}" 
                       Grid.Row="0" Grid.RowSpan="2" Grid.Column="1" 
                       VerticalAlignment="Center"/>

    <view:WelcomeScreenView Visibility="{Binding IsWelcomeScreenActive,Converter={StaticResource ResourceKey=BooleanToVisibilityConverter}}" 
                          Grid.Row="0" Grid.RowSpan="2" Grid.Column="1" 
                          VerticalAlignment="Center"/>

    <view:DateView Grid.Row="2" Grid.Column="1" 
                 VerticalAlignment="Center" />

    <view:InvisibleInputView Height="25" Width="100" Background="Transparent" BorderBrush="Transparent" Cursor=""/>

    <view:MainMenuView Grid.RowSpan="3" Grid.ColumnSpan="3" Visibility="{Binding IsAnyMenuActive, Converter={StaticResource ResourceKey=BooleanToVisibilityConverter}}" 
                         Height="300" Width="250" />

</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:37:40.410

帮助我获得了背景视图

```
<UserControl.Resources>
    <SolidColorBrush x:Key="MenuActiveBackgroundColor" Color="Green"/>
    <SolidColorBrush x:Key="MenuInactiveBackgroundColor" Color="Tomato"/>
</UserControl.Resources>

<Grid>
    <Grid.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding AnyMenuIsActive}" Value="true">
                    <Setter Property="Grid.Background" Value="{DynamicResource MenuActiveBackgroundColor}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding AnyMenuIsActive}" Value="false">
                    <Setter Property="Grid.Background" Value="{DynamicResource MenuInactiveBackgroundColor}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Style>
</Grid> 
```

# python - 由于撇号“'”（无 XML 声明）导致的 ElementTree 解析错误

> ID：14149162
> 
> 赞同：1
> 
> 时间：2013-01-03T23:51:14.217
> 
> 标签：python, xml, encoding, elementtree

我正在使用 ElementTree 来查看 MySQL 记录并解析出没有任何声明存储的 XML。我知道文本编码有问题，但我不确定如何解决这个问题。我得到的错误是：

```
xml.parsers.expat.ExpatError: not well-formed (invalid token): 
```

我试过 s.decode("CP1252").encode("UTF-8") 和一个简单的 s.replace("'", "") 但都没有帮助（其中 s 是 XML 的记录）。我还在这些转换之前和之后打印了字符串，只是看到打印时，字符读取“？”，在转换之前和之后。我期待看到它在替换（“'”，“”）之后消失，但它没有。

有任何想法吗？

谢谢！

' 编辑：：

我正在使用字符串与使用 MySqlDb 来复制问题，但它没有产生错误。默认情况下，MySQLDb 不是 UTF-8 编码的，因此必须在 DB 连接中指定。一旦我将 'init_command... ...utf8' 添加到我的连接末尾，它就能够解释撇号并将其​​包含在我的查询的 REPLACE(column_with_xml, "'", "") 部分中。

```
conn = MySQLdb.Connection(db=config.mydb['mydb'], host=config.mydb['host'], port=config.mydb['port'], user=config.mydb['user'], passwd=config.mydb['password'], init_command='SET NAMES utf8',charset='utf8') 
```

# php - 加载图像时如何使淡入效果（当我滚动时）

> ID：14149166
> 
> 赞同：0
> 
> 时间：2013-01-03T23:51:48.947
> 
> 标签：php, jquery, mysql, ajax

如果我加载 20 张图像，我希望仅在用户向下滚动时才以淡入效果加载它们。

继承人的代码：

```
<?php
//Proceso de conexión con la base de datos
$conex = mysql_connect("localhost", "root", "root")
        or die("No se pudo realizar la conexion");
    mysql_select_db("sesiones_php",$conex)
        or die("ERROR con la base de datos");

//Iniciar Sesión
session_start();

//Validar si se está ingresando con sesión correctamente
if (!$_SESSION){
echo '<script language = javascript>
alert("usuario no autenticado")
self.location = "login.php"
</script>';
}

?>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Navbar Examples</title>

<!-- Mobile viewport optimized: h5bp.com/viewport -->
      <meta name="viewport" content="width=device-width">

<!-- Main stylesheet imports bootstrap css and adds custom -->
    <link href="css/style.css" rel="stylesheet">

    <style>
        /* To keep short panes open decently tall */
        .tab-pane {min-height: 500px;}
    </style>

<!-- Modernizr for browser feature-checking 
            + HTML5shiv (included in modernizr) see modernizr.com -->
    <script src="js/modernizr-2.5.3.min.js"></script>

<!-- Fav and touch icons -->
        <!-- alternatively, remove these lines and place icons
                directly in the site parent folder 
                mathiasbynens.be/notes/touch-icons -->
    <link rel="shortcut icon" href="img/favicon.ico">
    <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container">
              <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a class="brand" href="members.php">Divagueando</a>
              <div class="nav-collapse">
                <ul class="nav">
                  <li><a href="members.php"><i class="icon-home icon-white"></i> Inicio</a></li>
                  <li><a href="bandeja.php">Mensajes Privados</a></li>
                  <li><a href="inbox.php">Nuevo Mensaje</a></li>
                  <li class="active"><a href="galeria.php">Ver todas las fotos</a></li>
                  <li><a href="fotoperfil.php">Foto perfil</a></li>
                </ul>
                <a class="btn btn-primary pull-right" href="logout.php">Cerrar Sesion</a>
                <a class="btn btn-primary pull-right" href="configuracion.php"><?php echo $_SESSION['username'];?></a>
              </div><!-- /.nav-collapse -->
            </div><!-- /.container -->
          </div><!-- /navbar-inner -->
        </div><!-- /navbar -->

        <div class="container">

        <div class="contenedorfoto">

        <?php 
        $conexion=mysql_connect('localhost','root','root') or die('No hay conexión a la base de datos');
        $db=mysql_select_db('carpe',$conexion)or die('no existe la base de datos.');

        $id=$_SESSION['id'];
        $consulta=mysql_query("select * from datos where idUsuario='".$id."' order by id desc");
        while($filas=mysql_fetch_array($consulta)){
            $ruta=$filas['ruta'];
            $desc=$filas['descripcion'];

        ?>

        <?php echo $desc;?><br>
        <img src="imagenperfil/<?php echo $ruta; ?>" width="200" height="300"><br>
        <hr>
        <?php }?>

        </div>

      <footer>
        <p>By David Cochran of <a href="http://okwu.edu">Oklahoma Wesleyan University</a> and <a href="http://alittlecode.com/">aLittleCode.com</a> for <a href="http://webdesign.tutsplus.com/">webdesign.tutsplus.com</a>. Free for your use! (No warranties, no guarantees.)</p>
      </footer>

    </div> <!-- /container -->

<!-- ==============================================
         JavaScript below!                                                          -->

<!-- jQuery via Google + local fallback, see h5bp.com -->
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.7.1.min.js"><\/script>')</script>

<!-- Bootstrap JS: compiled and minified -->
    <script src="js/bootstrap.min.js"></script>

<!-- Example plugin: Prettify -->
    <script src="js/prettify/prettify.js"></script>

<!-- Initialize Scripts -->
        <script>
            // Activate Google Prettify in this page
            addEventListener('load', prettyPrint, false);

            $(document).ready(function(){

                // Add prettyprint class to pre elements
                    $('pre').addClass('prettyprint');

                // Initialize tabs and pills
                    $('.note-tabs').tab();

            }); // end document.ready
        </script>

  </body>
</html> 
```

基本上，我检索一个用户的所有图像并显示它们。当他滚动时，我想向他们展示淡入淡出的效果。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:58:20.600

It sounds like you want the [Lazy Load plugin for jQuery](http://www.appelsiini.net/projects/lazyload) to delay the loading of image data until they are visible. The plugin site has an [example with the fadeIn effect](http://www.appelsiini.net/projects/lazyload/enabled_fadein.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:28:02.943

延迟加载是一种选择，但这会延迟加载。另一种选择是使用[jQuery inview 事件](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)插件，它可以更好地提供您想要的效果。这完全取决于您想要什么。

使用*jQuery inview*，代码如下：

```
$(function(){
    $('img.fadeMe').css('opacity', 0).one('inview', function(event, visible) {
      if(visible) {
        $(this).fadeIn();
      }
    });
    window.trigger('scroll');//fadeIn images at top of page that are initially in view.
}); 
```

*未经测试*

使用这种方法，允许以正常方式加载图像，并预先设置样式`'opacity', 0`以使它们最初不可见。因此，在每个图像被加载之前，它很有可能在它进入视野时淡入之前实现零延迟。

使用延迟加载，您可以保证在图像可用之前加载延迟 - 这就是延迟加载所做的。

尝试这两种方法，看看哪种方法最适合您的网站。

# ruby - 在这种情况下使用 &（和号）是什么意思？

> ID：14149167
> 
> 赞同：0
> 
> 时间：2013-01-03T23:51:50.693
> 
> 标签：ruby, operators

我试图了解`contents_support?`在这个 Array 类的方法中使用注入。操作员的目的是什么`&`/它是如何工作的？我认为它是按位和运算符。`&`我找到了运营商的这个解释：

> 二元 & 运算符的最简单用法可能是在 Array 类中。`&`是集合交集运算符，这意味着结果是两个数组中公共元素的集合。
> 
> ```
> irb(main):001:0> [1,2,3] & [1,2,5,6]
> => [1, 2] 
> ```

但是在这种情况下这意味着什么， where`true`作为参数传递给`inject`where 某些对象（即局部变量`items`）可能不会响应发送的消息。你能解释一下什么`contents_support?`返回以及为什么`&`是必要的吗？上面提到的代码片段是否解释`&`了在下面的代码中思考的正确方法`&`？

```
class Array
   def contents_support?(message)      
      self.inject(true) { |all_ok, item| all_ok = all_ok & item.respond_to?(message) }       
   end

   def thunk(message, *args)
      if contents_support?(message)
        self.each { |item| args.empty? ? item.send(message) : item.send(message, args) }
      else
        raise "Not all contents of #{self.inspect} respond to method #{message}"       
      end   
   end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:34:32.507

丁多留斯没有说的话。
在您的案例中， 的用法`&`不相关，您可以使用`&&`. 实际上性能会更好。

```
a & b 
```

执行`a` *AND* `b`并返回它们的组合结果。

```
a && b # equals if a
       #          return b
       #        else
       #          return a
       #        end 
```

这意味着，如果是假的，*它就不会执行`b`*`a`。在您的情况下，您不需要检查`item.respond_to?(message)`是否`all_ok`为假。

顺便说一句，`contents_support?(message)`使用[`all?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-all-3F).

```
def contents_support?(message)
  self.all? { |item| item.respond_to?(message) }       
end 
```

既然您问过，请`contents_support?(message)`测试数组的所有项目是否支持`message`属性或方法。前任：`[1, 2, 3].contents_support?(:next) #=> true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:12:48.967

像 Ruby 中的大多数运算符一样，`&`它是重载的：它的行为取决于其参数的类型。

*   在您的第一个片段中，两边的对象`&`都是`Array`s。在这种情况下，`&`类似于集合交集：`Array`如果在 的两个参数中都找到了一个元素，则结果仅包含一个元素`&`。
*   在您的第二个片段中，左侧是一个布尔值。显然，这意味着`.respond_to?`必须返回一个布尔值（名称末尾的问号应该是一个提示）。在布尔值的情况下，`&`是逻辑合取：如果两边都是`true`，结果是`true`，否则是`false`。

# php - 从 2 个数组创建一个 json 文件

> ID：14149170
> 
> 赞同：0
> 
> 时间：2013-01-03T23:52:29.840
> 
> 标签：php, arrays, json, apache

我需要使用两个数组的内容创建一个 JSON 文件：

```
$titles=array("title1"..."title20")
$urls=array("http://url1.com"..."http:/url5.com"); 
```

使用以下 JSON 格式：

```
{resultCount = 5;
    results =[
{"title":title1, "url":http://url1.com}
{"title":title2, "url":http://url2.com}
{"title":title3, "url":http://url3.com}
{"title":title4, "url":http://url4.com}
{"title":title5, "url":http://url5.com}]
} 
```

你们中的任何人都知道我怎么能做到这一点？

我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:58:16.067

使用结果创建数组，[`compact`](http://www.php.net/compact)然后使用[`json_encode`](http://www.php.net/json_encode).

```
$resultCount = min(count($titles), count($urls));
$results = array();
for ($i=0; $i < $resultCount; $i++) {
  $results[] = array('title'=>$titles[$i], 'url'=>$urls[$i]);
}

echo json_encode(compact('resultCount', 'results')); 
```

如果`$titles`和`$urls`不同的长度，它现在将使用两者中最短的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:08:30.097

这是否如您所愿？

```
$array_1 = array("title1", "title2", "title3", "title4", "title5");
$array_2 = array("http://url1.com", "http://url2.com", "http://url3.com", "http://url4.com", "http://url5.com");

function formatForJSON($first_array, $second_array) {

    $results = array();
    $resultCount = count($first_array);

    if ($resultCount != count($second_array)) 
        $resultCount = max(count($first_array), count($second_array));

    for ($x = 0, $y = 0; $x <= count($first_array)-1, $y <= count($second_array)-1; $x++, $y++)
        array_push($results, array('title' => $first_array[$x], 'url' => $second_array[$y]));

    return compact('resultCount', 'results');
}

echo '<pre>' . json_encode(formatForJSON($array_1, $array_2)) . '</pre>'; 
```

编辑：啊——忍者

# c - 如何在 C API 中产生 ipairs（而不是pairs）行为

> ID：14149178
> 
> 赞同：11
> 
> 时间：2013-01-03T23:53:17.300
> 
> 标签：c, api, lua

在 Lua 中，`pairs`可以`ipairs`以不同的顺序迭代相同的元素：

```
> t = {[1]=1, [2]=2, [3]=3}
> for k,v in pairs(t) do print(k,v) end
2       2
1       1
3       3
> for k,v in ipairs(t) do print(k,v) end
1       1
2       2
3       3 
```

在使用 C API 时，我只看到一个用于迭代表的工具：[lua_next()](http://www.lua.org/manual/5.2/manual.html#lua_next)函数，它的作用非常类似于`pairs()`产生上述 2-1-3 顺序的 Lua 函数。

我正在寻找一种有效的 C 方法来按顺序迭代表的整数键（ipairs 的 C API 版本）。

我天真地认为：

```
int tableLength = luaL_len(L, tableIndex);
for (i=0, i++, i>tableLength){   
    // if t[i] is not null ...
} 
```

但我不清楚表大小与连续整数键的数量不匹配的潜在性能问题：

```
t = {[1]=1, [2]=2, [4]=4}     -- has a (reported) length of 4
t = {[1]=1, [2]=2, [40000]=4} -- has a (reported) length of 2 
```

如果这确实是 ipairs 的方式，那么是否有一种简单的方法可以开始使用 lua_next 和最后找到的整数键来继续遍历表的其余部分，避免再次遍历整数键部分？这样做有没有机会看到一些整数键两次？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T14:05:12.640

你只需使用 rawgeti 直到你得到一个 nil 键：

```
// Tabs is on top of stack
for ( int i=1 ; ; i++ ) {
    lua_rawgeti(L,-1,i);
    if ( lua_isnil(L,-1) ) {
        lua_pop(L,1);
        break;
    }
    /* Do something */
    lua_pop(L,1);
} 
```

通过查看源代码，您可以看到 ipairs 在内部执行的操作：[http ://www.lua.org/source/5.1/lbaselib.c.html#ipairsaux](http://www.lua.org/source/5.1/lbaselib.c.html#ipairsaux)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T00:53:36.323

```
t = {[1]=1, [2]=2, [4]=4}     -- has a length of 4 
```

那么你的问题就在那里；它的长度不是 4。你可能*认为*它有，并且`#t`可能返回 4。但就 Lua API 而言，这个表的长度是*undefined*。

[Lua 5.1 状态](http://www.lua.org/manual/5.1/manual.html#2.5.5)：

> 表 t 的长度被定义为任何整数索引 n，使得 t[n] 不为 nil 且 t[n+1] 为 nil；此外，如果t [1](http://www.lua.org/manual/5.1/manual.html#2.5.5)为零，则n可以为零。对于从 1 到给定 n 的非 nil 值的常规数组，它的长度正好是 n，它的最后一个值的索引。如果数组有“洞”（即，其他非 nil 值之间的 nil 值），那么 #t 可以是直接在 nil 值之前的任何索引（也就是说，它可以将任何这样的 nil 值视为结束的数组）。

[Lua 5.2 更加明确](http://www.lua.org/manual/5.2/manual.html#3.4.6)：

> 表 t 的长度仅在表是序列时才定义，也就是说，对于某个整数 n，其正数字键的集合等于 {1..n}。在这种情况下，n 是它的长度。请注意，像

```
 {10, 20, nil, 40} 
```

> 不是一个序列，因为它有键 4 但没有键 3。（因此，没有 n 使得集合 {1..n} 等于该表的正数字键的集合。）但是请注意，非数字键不会影响表是否为序列。

但在这两种情况下，长度都是*undefined*。

# javascript - .each 之后的 Jquery 未定义

> ID：14149182
> 
> 赞同：0
> 
> 时间：2013-01-03T23:53:32.360
> 
> 标签：javascript, jquery, each, .post

我从 .post 后调用的 .each 得到未定义的结果。以下是我的代码。

Javascript

```
 var index=0;
    $("td.load_ads").each(function(){
        var loading=$(this);
        $.post('/self_coded_helpers/jpost_get_ads.php',{index:index,type:'fetch_id'},function(data){
            if($("input.exist").length > 0){
                $("input.exist").each(function(){
                    if($(this).val()==data){
                        var load='0';
                    }else{
                        var load='1';
                    }
                });
            }else{
                var load='1';
            }
            alert(load);
            if(load == 1){
                $.post('/self_coded_helpers/jpost_get_ads.php',{index:index,type:'fetch_details',id:data},function(data2){
                    $("body").append('<input type="hidden" class="exist" name="exist" value="'+data+'">');
                    if(data2!=0){
                        loading.html(load+'--'+data2);
                    }else{
                        loading.html("Place a Free Ad Now!");
                    }
                });
            }else{
                loading.html(load+"--"+data+"Place a Free Ad Now!");
            }
        });
        index=index+1;
    }); 
```

我在这里要做的是在我的每个 td.load_ads 上启动一个 .post，然后使用每个现有的 input.val 检查数据。如果每个现有输入的输入值与收集的数据相同，那么我不会回显第二个 .post 结果。

但是，整个操作似乎没有正确显示。我意识到我的问题出在 .post 之后的 .each 上。当我发出警报（加载）时。返回的结果未定义。我错过了什么还是我的编码在逻辑上不正确？任何帮助将不胜感激。

**/**添加的问题****/* *

所以现在，我有另一个问题，所以我想不妨在这里添加它。

我尝试附加输入

($("body").append('');)

在脚本的第二部分。

这样当循环自身重复时，它将能够读取输入并接收新附加的输入值。但我的负载总是返回 1，因为我的 $("input.exist").length 总是返回 false。

或者这不可能用jquery做？

**/**添加的问题结束****/* *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:55:43.493

You need to declare the `load` variable ahead of time. Right now, you are declaring it twice inside of an anonymous function, and the variable's scope will be limited to that function; the `var load = ...;` statements will have *no observable effect* from the perspective of the outer function.

Try this instead:

```
var load = '1';

if($("input.exist").length > 0){
    $("input.exist").each(function(){
        if($(this).val()==data){
            load='0';
        }else{
            load='1';
        }
    });
}

alert(load); 
```

# java - 为我的 API 实现 API 密钥

> ID：14149189
> 
> 赞同：11
> 
> 时间：2013-01-03T23:54:37.433
> 
> 标签：java, javascript, spring, node.js, api-key

我已经创建了一个 api，我想对谁使用它、使用频率等进行一些控制。我想要一个 API 密钥策略，以便用户必须提供密钥才能使用 API。但是我不知道如何实现它。用户使用用户名和密码注册。我想到的是在用户登录时分配一个 UUID 并将其存储在数据库的表中。然后每个请求都包含这个 uuid，并在服务器上对每个请求进行检查。

然而，这似乎不对。有人可以解释创建 api 密钥的步骤吗，比如 dropbox、twitter、facebook 等？我想尝试自己实现这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T00:01:54.073

> 有人可以解释创建 api 密钥的步骤吗，比如 dropbox、twitter、facebook 等？我想尝试自己实现这个。

## 生成 API 密钥

1.  选择一些你想使用的加密/解密方法
2.  选择一种盐，您将在加密*之前*添加到数据中
3.  决定你想要加密字符串中的数据：时间戳、Uid、角色等。时间戳是其中最有用的部分，因为使用时间戳，你可以限制来自某个时间之前的密钥的请求，因此需要一个要生成的新密钥。
4.  将其捆绑在解密后可以稍后解析的内容中。有些人使用 json 对象，有些人使用 char 分隔的字符串

注意：如果您不希望它成为可解密的密钥，例如，它是经过散列的，因此难以破解，那么您可以简单地遵循以下策略：执行一组步骤来形成您的未散列数据字符串：`sha1("some-secret"."some-other-bit-of-info"."etc"."etc")`和然后 API 使用者有责任生成自己的密钥。因此，只有当他们拥有构建它所需的必要部件/信息时，他们才能访问。

## 使用 API

以 Stripe 的 API 为例：

1.  发出授权请求：返回一个 API 密钥。“ *curl 使用 -u 标志传递基本身份验证凭据（在您的 API 密钥后添加冒号将阻止它询问您的密码）。* ” --Stripe Docs

2.  将该密钥连同所有进一步的请求一起发送。

# tfs - 拆分变更集？

> ID：14149193
> 
> 赞同：1
> 
> 时间：2013-01-03T23:54:58.050
> 
> 标签：tfs

我们的 .NET 商店中有 TFS2010，我签入了一个变更集，其中包含多个文件。出于组织原因，我需要将该变更集拆分为更小的变更集。除了回滚更改并将它们重新提交到 TFS 之外，是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:25:41.650

不，可悲的是，唯一的方法是执行回滚。

如果您在每个文件中有独立的更改，我的意思是 B.cs 不依赖 A.cs 中的更改，那么您可以检查待处理的更改，只需检查每个新更改集所需的文件。

最好的做法是让每个变更集（在任何 VCS 中）都是[原子](http://en.wikipedia.org/wiki/Atomic_commit#Revision_Control)的，这不仅可以避免您遇到的问题，而且还允许在需要删除变更集时回滚（即它们引入了您不需要的错误）有时间在发布前修复）。

# python - 无法从 http POST 获得响应

> ID：14149203
> 
> 赞同：0
> 
> 时间：2013-01-03T23:55:49.733
> 
> 标签：python, iptables, twilio

我正在尝试使用 twilio 自动为我打几个电话，但我在让它正常工作时遇到了一些麻烦。我正在使用 twilio 拨打电话，如下所示：

```
conn.calls.create(
    to = event.student.phone_number,
    from_ = event.message.teacher.twilio_number,
    url = '%stwilio_calls/%d/' % (BASE_URL, event.id)) 
```

我相当肯定这部分代码是有效的，因为我收到了对我的手机的呼叫作为测试。但是，当我接到电话时，它告诉我有一个应用程序错误。在 Twilio 调试面板中，我看到了这个：

![http://i.stack.imgur.com/O3oJZ.png](../Images/dbb88fd47621fd99b36987876aedfa48.png)

看起来 twilio 没有从我的网站得到回复。奇怪的是，我可以导航到 URL ( `http://166.78.13.45:8000/twilio_calls/19/`) 并接收看起来像正确格式化程序 twiml 的内容。不知道为什么 twilio 不能拿起它。创建此页面的视图如下所示：

```
@csrf_exempt
def twilio_call(request, event_id):
    event = Event.objects.get(pk=event_id)

    t = template.Template(event.message.text)
    c = template.Context({'student': event.student})
    call_text = t.render(c)

    # TODO if student not found ?
    # TODO if student.objects.call_notification_ind if false?

    r = twiml.Response()
    r.say(call_text)

    return HttpResponse(str(r)) 
```

我需要做什么才能让 twilio 阅读此页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:22:33.640

从测试 URL 来看，如果您在 POST 正文中放入任何数据，则响应正文为空。

```
$ curl -iXPOST http://166.78.13.45:8000/twilio_calls/19/
HTTP/1.1 200 OK
Server: nginx/1.2.6
Date: Fri, 04 Jan 2013 00:20:45 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive

<?xml version="1.0" encoding="UTF-8"?><Response><Say>Hi Dan,

This is a very long test message for you to try out.  Let's see what you think of it.  Give it a shot!!!

Call me back if you have any questions</Say></Response> 
```

但是在请求中添加 CallSid 参数：

```
$ curl -iXPOST http://166.78.13.45:8000/twilio_calls/19/ -d 'foo'
HTTP/1.1 200 OK
Server: nginx/1.2.6
Date: Fri, 04 Jan 2013 00:20:58 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive 
```

没有身体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:16:26.297

这真的很奇怪，我仍然不确定是什么导致了我的问题，但我确实有一个解决方案。在我的 views.py 文件中添加该行`print request`似乎可以解决这个问题以及我正在使用的另一个区域。我只能想象我在这里做错了什么，如果有人可以帮助我弄清楚为什么会这样以及将来如何避免它，我会很高兴。

# java - KeyListener and MouseListener not working

> ID：14149204
> 
> 赞同：1
> 
> 时间：2013-01-03T23:55:51.243
> 
> 标签：java, swing, keylistener, mouselistener

Im working on making a simple Java game and had the great idea of separating my input handling to a separate class then the main game. I am having trouble getting my InputHandler class to actually receive input.

Main Game Class (DrawPanel.java)

```
package com.eriksaulnier.DesignedToFail;

import java.awt.*;
import java.awt.image.*;
import com.eriksaulnier.DesignedToFail.InputHandler;

import javax.swing.*;

public class DrawPanel extends JPanel {
private static final long serialVersionUID = 1L;
BufferedImage buffer;
InputHandler inputHandler;
Entity player;
Entity enemy;
public boolean spawnBullet = false;

public DrawPanel () {
    setIgnoreRepaint(true);
    setVisible(true);
    setFocusable(true);
    addKeyListener(inputHandler);
    addMouseListener(inputHandler);
    new InputHandler();
}

public void initialize() {
    buffer = new BufferedImage(800,600,BufferedImage.TYPE_INT_RGB);
    player = new Entity(370, 270);
    enemy = new Entity(100, 100);
}

public void update() {
    player.move();
}

public void checkCollisions() {
    if (player.getBounds().intersects(enemy.getBounds()))
        player.collision = true;
    else
        player.collision = false;
}

public void drawBuffer() {
    Graphics2D b = buffer.createGraphics();
    b.setColor(Color.white);
    b.fillRect(0, 0, 800, 600);
    if (player.collision == false) {
        b.setColor(Color.blue);
        b.fillRect(player.getX(), player.getY(), player.getWidth(), player.getHeight());
        b.setColor(Color.red);
        b.fillRect(enemy.getX(), enemy.getY(), enemy.getWidth(), enemy.getHeight());
        b.dispose();
    }
    else {
        b.setColor(Color.black);
        b.drawString("Collision!", 350, 300);
        b.dispose();
    }
}

public void drawScreen() {
    Graphics2D g = (Graphics2D)this.getGraphics();
    g.drawImage(buffer, 0, 0, this);
    Toolkit.getDefaultToolkit().sync();
    g.dispose();
}

public void startGame() {
    initialize();
    while(true) {
        try {
            update();
            checkCollisions();
            drawBuffer();
            drawScreen();
            Thread.sleep(15);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
    }

}

} 
```

InputHandler (InputHandler.java)

```
package com.eriksaulnier.DesignedToFail;

import java.awt.event.KeyListener;
import java.awt.event.MouseListener;
import java.awt.event.KeyEvent;
import java.awt.event.MouseEvent;

import javax.swing.JPanel;

public class InputHandler extends JPanel implements KeyListener, MouseListener {
public boolean isShooting = false;
Entity player;

public InputHandler () {
    System.out.println("Listener Works!");
}

public void mouseClicked(MouseEvent e) {

}

public void mousePressed(MouseEvent e) {
    int button = e.getButton();
    if (button == MouseEvent.BUTTON1)
        isShooting = true;
        System.out.println("Shooting!");
}

public void mouseReleased(MouseEvent e) {
    int button = e.getButton();
    if (button == MouseEvent.BUTTON1)
        isShooting = false;
        System.out.println("Not Shooting!");
}

public void mouseEntered(MouseEvent e) {

}

public void mouseExited(MouseEvent e) {

}

public void keyTyped(KeyEvent e) {

}

public void keyPressed(KeyEvent e) {
    int key = e.getKeyCode();
    if (key == KeyEvent.VK_W)
        player.up = true;
    if (key == KeyEvent.VK_S)
        player.down = true;
    if (key == KeyEvent.VK_A)
        player.left = true;
    if (key == KeyEvent.VK_D)
        player.right = true;
}

public void keyReleased(KeyEvent e) {
    int key = e.getKeyCode();
    if (key == KeyEvent.VK_W)
        player.up = false;
    if (key == KeyEvent.VK_S)
        player.down = false;
    if (key == KeyEvent.VK_A)
        player.left = false;
    if (key == KeyEvent.VK_D)
        player.right = false;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:58:48.217

You seem to be passing null handlers into your GUI. Where for instance do you instantiate the inputHandler variable before using it?

For example:

```
public class DrawPanel extends JPanel {
  //...

  InputHandler inputHandler; // here you declare the variable 

  //...

  public DrawPanel () {
    setIgnoreRepaint(true); // why this line?
    setVisible(true); // not needed in a JPanel's code
    setFocusable(true);
    addKeyListener(inputHandler); // here you use a null variable
    addMouseListener(inputHandler); // ditto, here you use a null variable
    new InputHandler(); // I don't know what you're doing here
  } 
```

In the code above I don't see anywhere you have `inputHandler = new InputHandler()` before using it. Your line where you appear to create a new InputHandler, you don't assign the object to any variable or use it, and so it seems a futile line of code, hence my comment on how I'm not sure what that line is supposed to achieve. Note that these problems have nothing to do with Swing and all to do with basic core Java.

Also:

*   Your handler classes should not extend Swing components such as JPanels. They should implement listener interfaces only.
*   You should avoid use of KeyListeners with Swing GUI's and instead use Key Bindings if possible. Please Google for and check the Key Bindings tutorial for more on this.
*   The use of handlers is well explained in the Oracle Swing tutorials. Again, please Google these and study them. I can attest to their usefulness as they are where I learned my Swing coding.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T23:58:59.513

At least, you have forgotten to create instance of the inputHandler before binding. Your DrawPanel constructor should start like:

```
public DrawPanel () {
    inputHander=new InputHandler();
    ...
} 
```

Let us know if it doesn't work after fixing this issue and I'll take a deeper look.

# yahoo-weather-api - What pressure units yahoo weather api delivered when use u=f parameter

> ID：14149208
> 
> 赞同：3
> 
> 时间：2013-01-03T23:56:31.927
> 
> 标签：yahoo-weather-api

I was wondering what "in" stands for if we talk about pressure units? I believe that mb = mili bars = hPa. With this assumption there's something strange about it. I took 2 diffrent WOEID's for each using u=c and then u=f and results were following

1.  982.05 [mb], 29.88[in]
2.  1017.30[mb], 29.09[in]

First ratio is 32,866465863453815261044176706827

Second ratio is 34,97078033688552767273977311791

*   Where this difference comes from. Does api take into consideration temperature or something else,
*   What are those "in" anyway,
*   Does anybody know exact formula which yahoo weather api use to conversion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T13:40:23.510

“in”代表英寸汞柱 (Hg)，“mb”代表毫巴

# google-chrome-extension - Read the version from manifest.json

> ID：14149209
> 
> 赞同：58
> 
> 时间：2013-01-03T23:56:54.057
> 
> 标签：google-chrome-extension

Is there a way for a Chrome extension to read properties from `manifest.json`? I'd like to be able to read the version number and use it in the extension.

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-01-15T22:49:56.967

您可以只使用`chrome.runtime.getManifest()`来访问清单数据 - 您不需要 GET 并解析它。

```
var manifestData = chrome.runtime.getManifest();
console.log(manifestData.version);
console.log(manifestData.default_locale); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-12T20:37:49.767

snipet`chrome.app.getDetails()`不再工作，返回错误：

> TypeError: Object # has no method 'getDetails'

你想`chrome.runtime.getManifest()`改用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-04T08:53:53.920

我用[这种](http://martinsikora.com/accessing-manifest-json-in-a-google-chrome-extension)方式。

```
chrome.manifest = (function() {

    var manifestObject = false;
    var xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4) {
            manifestObject = JSON.parse(xhr.responseText);
        }
    };
    xhr.open("GET", chrome.extension.getURL('/manifest.json'), false);

    try {
        xhr.send();
    } catch(e) {
        console.log('Couldn\'t load manifest.json');
    }

    return manifestObject;

})(); 
```

就这样。这个简短的代码片段加载清单对象并将其放在其他 chrome.* API 中。因此，现在您可以获得所需的任何信息：

```
// current version 
chrome.manifest.version

// default locale
chrome.manifest.default_locale 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-08T10:02:56.633

从 Chrome 22 开始，您应该使用[chrome.runtime](https://developer.chrome.com/extensions/runtime)

```
console.log(chrome.runtime.getManifest().version);
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-29T21:17:26.480

其实很简单。

```
function yourFunction() {
return chrome.app.getDetails().version;
} 
```

您可以在其中命名`yourFunction`任何您喜欢的名称。

然后调用它，只需`yourfunction()`在要调用版本号的任何位置插入即可。

例如，如果您的版本号是**9.07**，那么实际上等于**9.07**`yourfunction()`的数值

# python - How to change Django's default label name of comment form into Chinese?

> ID：14149210
> 
> 赞同：2
> 
> 时间：2013-01-03T23:56:57.280
> 
> 标签：python, django, django-forms

I am using Django's built-in comments app. But I have met one problem.

The default label for the comments form is English(e.g. "Name","Email Address"), but I'd like to change them into Chinese. So I went to `site-packages/django/contrib/comments/forms.py` and amend them as below:

```
name          = forms.CharField(label=_("姓名 Name"), max_length=50)
email         = forms.EmailField(label=_("邮箱 Email"))
url           = forms.URLField(label=_("网站 URL"), required=False)
comment       = forms.CharField(label=_("评论 Comment"), widget=forms.Textarea,
                               max_length=COMMENT_MAX_LENGTH) 
```

But it failed when I runserver again, it says

```
SyntaxError: Non-ASCII character '\xe5' in file /usr/lib/python2.7/site-packages/django/contrib/comments/forms.py on line 98, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details 
```

So I went to [http://www.python.org/peps/pep-0263.html](http://www.python.org/peps/pep-0263.html) and Add "# -*- coding: utf-8 -*-" in the head of forms.py file. To be joy, I can run the server. But when I went to the comment Page, the comment form disappeared!

Can anybody tell me what's going on? And how to repair it ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:04:37.423

Django 的`comments`应用程序[已经翻译成中文了](https://github.com/django/django/blob/master/django/contrib/comments/locale/zh_CN/LC_MESSAGES/django.po)，你不需要自己做。

您只需要在 django 配置中[启用国际化：](https://docs.djangoproject.com/en/1.3/topics/i18n/deployment/)

```
USE_I18N = True

LANGUAGES = (
  ('zh_CN', 'Chinese'),
) 
```

您可以回滚对`django/contrib/comments/forms.py`文件所做的所有更改。

# python - Thorough setuptools installation help (Mac)

> ID：14149211
> 
> 赞同：1
> 
> 时间：2013-01-03T23:57:17.217
> 
> 标签：python, installation, setuptools

I am learning python with no programming experience, from a textbook. It asked me to install setup tools, which I downloaded. However, whenever I try to install it through terminal as the website says, I get the following message:
error:

```
can't create or remove files in install directory

The following error occurred while trying to add or remove files in the
installation directory:

[Errno 13] Permission denied: '/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/test-easy-install-2960.write-test' 
```

I think I am doing something wrong on my part however I don't know what I'm doing wrong. I am running python 2.5, and i have downloaded setuptools 2.5 (the textbook asked for these specific versions).I have only gotten as far as downloading the setup tools file to my desktop. Can somebody please provide extremely thorough and easy instructions about how to install setup tools? I am running Mac OS X Mountain Lion.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:26:07.903

首先，Mountain Lion 附带的 Python 2.5、2.6 和 2.7 版本已经具有 setuptools 和/或分发，因此您无需在此处执行任何操作。但是，您稍后将再次遇到相同的问题，因此：

如果您想将任何东西安装到系统范围的站点包中，则需要使用它`sudo`来执行此操作，否则您没有写入权限。例如：

```
sudo python2.5 setup.py install 
```

我也很好奇你为什么使用`python2.5`而不是`python2.7`（或只是`python`，这是同一件事）。没有多少库和程序可以与 2.5 一起使用，但不能与 2.7 一起使用，除非您特别需要其中一个程序，否则您应该坚持使用 2.7。（如果您遵循此建议，则可以在后面的所有内容中删除`2.5`和`-2.5`后缀。）

同时，所有三个版本的 Python 都`easy_install`已经配置好了，因此您很少需要下载并手动安装；你可以这样做`sudo easy_install-2.5 foo`。但是，它`pip`甚至比. 所以，你应该做的第一件事是：`easy_install``pip`

```
sudo easy_install-2.5 pip 
```

`foo`然后，每当您将来需要安装软件包时：

```
sudo pip-2.5 install foo 
```

许多人急于建议安装其他版本的 Python——Homebrew、MacPorts、Python.org、Enthought 或 ActiveState。不要这样做。在 Tiger（10.4）时代，这通常是必要的，因为 Apple 曾经发布不完整或损坏的 Python 版本，但很长一段时间以来都不是这样。这意味着您最终将得到两个`python2.7`/副本`python`，两个 / 副本`easy_install-2.7`，`easy_install`最糟糕的是，一个`pip-2.7`/副本`pip`（无论您以后安装哪个副本都会删除旧的副本）。我保证你不会直截了当，你会带着新的问题回到这里，关于“我安装了包 foo 并且它成功了，但是现在我不能导入它”。

但是，如果你想要 Python 3，那么我肯定会推荐从 Homebrew 或 Python.org安装*它。*没有 Apple 安装的 3.x 版本，Python 2.x 和 3.x 通常不会互相影响（例如，你得到`python3`而不是仅仅 .x `python`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:59:28.307

You don't have permission to install to this folder, likely because the command should be run as root (using `sudo`).

* * *

Alternatively, you might want to look into [homebrew](http://mxcl.github.com/homebrew/), which is a package manager for Mac OS. If you install Python through homebrew, it will come bundled with distutils and pip, which is all you should need.

And will be a more up-to-date version of Python too!

# git - 如何删除“未为提交暂存的更改”？在 git

> ID：14149216
> 
> 赞同：5
> 
> 时间：2013-01-03T23:58:04.660
> 
> 标签：git

当我做'git status'时，我得到

```
% git status
# Not currently on any branch.
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops
#       modified:   Source/WebKit/win/WebKit.vcproj/WebKitDirectX.vsprops 
```

但是在我执行 '% git checkout -- Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops' 之后，我看到了相同的结果：

```
% git checkout -- Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops
% git status
# Not currently on any branch.
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops
#       modified:   Source/WebKit/win/WebKit.vcproj/WebKitDirectX.vsprops
# 
```

如何删除那些“未暂存为提交的更改”？

我什至尝试过“git stash”，但仍然有一些这些变化是如何持续存在的。

我做了一个'git diff'。这就是结果，我没有看到 ^M: 我看过 '.gitconfig'，我没有 'autoctrl

```
% git diff       
diff --git a/Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops b/Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops
index 2ea7a51..9643739 100644
--- a/Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops
+++ b/Source/WebKit/win/WebKit.vcproj/WebKitApple.vsprops
@@ -1,12 +1,12 @@
-<?xml version="1.0" encoding="Windows-1252"?>
-<VisualStudioPropertySheet
- ProjectType="Visual C++"
- Version="8.00"
- Name="WebKitApple"
- >
- <Tool
-         Name="VCLinkerTool"
-         AdditionalDependencies="CFNetwork$(LibraryConfigSuffix).lib CoreFoundation$(LibraryConfigSuffix).lib CoreGraphics$(LibraryConfigSuffix).lib QTMovieWin$(WebKitConfigSuffix).lib WebKitSystemInterface$(WebKitConfigSuffix).lib"
-         DelayLoadDLLs="QTMovieWin$(WebKitConfigSuffix).dll"
- />
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioPropertySheet
+       ProjectType="Visual C++"
+       Version="8.00"
+       Name="WebKitApple"
+       >
+       <Tool
+               Name="VCLinkerTool"
+               AdditionalDependencies="CFNetwork$(LibraryConfigSuffix).lib CoreFoundation$(LibraryConfigSuffix).lib CoreGraphics$(LibraryConfigSuffix).lib QTMovieWin$(WebKitConfigSuffix).lib WebKitSystemInterface$(WebKitConfigSuffix).lib"
+               DelayLoadDLLs="QTMovieWin$(WebKitConfigSuffix).dll"
+       />
 </VisualStudioPropertySheet>
\ No newline at end of file
diff --git a/Source/WebKit/win/WebKit.vcproj/WebKitDirectX.vsprops b/Source/WebKit/win/WebKit.vcproj/WebKitDirectX.vsprops
index 797b4cb..c95c87d 100644
--- a/Source/WebKit/win/WebKit.vcproj/WebKitDirectX.vsprops
+++ b/Source/WebKit/win/WebKit.vcproj/WebKitDirectX.vsprops
@@ -1,15 +1,15 @@
-<?xml version="1.0" encoding="Windows-1252"?>
-<VisualStudioPropertySheet
- ProjectType="Visual C++"
- Version="8.00"
- Name="WebKitDirectX"
- >
-  <Tool
-         Name="VCCLCompilerTool"
-         AdditionalIncludeDirectories="&quot;$(DXSDK_DIR)\Include&quot;"
- />
-  <Tool
-         Name="VCLinkerTool"
-         AdditionalLibraryDirectories="$(DXSDK_DIR)\Lib\x86"
- />
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioPropertySheet
+       ProjectType="Visual C++"
+       Version="8.00"
+       Name="WebKitDirectX"
+       >
+  <Tool
+               Name="VCCLCompilerTool"
+               AdditionalIncludeDirectories="&quot;$(DXSDK_DIR)\Include&quot;"
+       />
+  <Tool
+               Name="VCLinkerTool"
+               AdditionalLibraryDirectories="$(DXSDK_DIR)\Lib\x86"
+       />
 </VisualStudioPropertySheet>
\ No newline at end of file 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T00:01:50.783

听起来您正在使用该`core.autocrlf`选项。可能发生的情况是存储库中的文件具有 CRLF 行结尾，但是由于设置了此选项，Git 认为该文件在存储库中应该具有 LF 行结尾。当您签出文件时，您将在工作目录中获取带有平台本地行结尾的文件（如果在 Windows 上为 CRLF，在 Unix 上为 LF 等）。

作为`git status`操作的一部分，Git 正在将它们转换回 LF。如果 HEAD 修订中的文件以 CRLF 结尾存储在 Git 中，这可以解释为什么 Git 仍然认为这两个版本不同，即使您从索引中检查了修订。

最直接的检测方法是`git diff`从终端运行，它会将 CR 字符显示为`^M`.

要解决这种情况，您可以只提交文件（带有“标准化行尾”之类的消息）或者您可以`core.autocrlf`完全禁用，这意味着文件将按原样存储在存储库*中，*并且不会执行行尾调整吉特。（如果您与不使用同一平台的其他人一起开发，这可能会产生非常负面的后果。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-13T03:01:09.163

我只想添加到**@cdhowie**的答案。

我遇到了与OP相同的问题。

验证 windows 行尾的最佳方法不是通过 vim，而是通过`od`：

```
od -xcb foo.txt | tail 
```

Windows 行尾应如下所示：

```
\r \n 
```

要轻松获取所有受影响的文件并转换为 unix（在我的情况下）是这样做的：

```
git ls-files -m | xargs dos2unix
dos2unix: converting file foo.txt to Unix format ...
dos2unix: converting file moo.txt to Unix format ... 
```

# jquery-ui - 如何在 jQuery 对话框中关闭嵌入的 YouTube 视频

> ID：14149223
> 
> 赞同：1
> 
> 时间：2013-01-03T23:59:04.427
> 
> 标签：jquery-ui, youtube, jquery-ui-dialog

我将这个 youtube 视频嵌入到一个 jQuery 对话框中。对话框是这样创建的：

```
$(function() {
    $.prepare_dialog2 = function() {
        $('body').append('<div class="dlgVid"></div>');
        $('.dlgVid').dialog({ autoOpen: false,  modal: true, position: ['center',100], resizable: false, width: 640 });
    }
    $.dlgVid = function(url,ttl) {
        $.ajax({
            type: 'POST', url: url,
            success: function(data) { $('.dlgVid').dialog('open').dialog('option','title',ttl).html(data);},
            error: function() { alert('Oops! An error occured. Please try again or contact us if the problem persists.');}
        });
    }

    $.prepare_dialog2();    
}); 
```

并使用该`$.dlgVid`函数调用。在对话框窗口中，有一个关闭链接，单击它会关闭对话框，如下所示：

```
$('.dlgCloser').live('click',function(){
    $('.dlgVid').dialog('close');
}); 
```

**问题是**当我关闭对话框时，视频继续播放。我需要它停下来。我试过了，但没有用（因为视频仍在播放，我可以听到音频）：

```
$('.dlgCloser').live('click',function(){
    $('.dlgVid').dialog('destroy');
    $.prepare_dialog2();
}); 
```

有没有人如何停止播放或为什么销毁没有从 DOM 中删除对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:03:24.960

我认为这种破坏实际上是在隐藏它，因此它为什么仍在播放。试试这个：

```
$('.dlgCloser').live('click',function(){
    $('.dlgVid').remove();
}); 
```

虽然这可能会解决问题，但这也将删除每个实例`.dlgVid`

此外，使用`.live()`jQuery 库已弃用。你应该使用`.on()`.

# windows - Passive FTP connection using Batch Script

> ID：14149230
> 
> 赞同：1
> 
> 时间：2013-01-03T23:59:47.917
> 
> 标签：windows, batch-file, ftp, ftp-client, passive-mode

I wrote a batch script to upload files to FTP server. It works fine but I wanted to establish passive connection to the FTP server.

Most of the articles say command line FTP.exe does not have this feature but one blog says using `QUOTE PASV` will set the ftp client to work in passive mode.

I used that command and ran the script, it said its entering passive mode and was able to upload the files.

Could someone confirm this information?

Thanks

# c - C2371: 'mxArray' : redefinition; different basic types

> ID：14149234
> 
> 赞同：0
> 
> 时间：2013-01-04T00:00:23.703
> 
> 标签：c, matlab, compiler-construction

Im trying to MEX piece of code with VS 2010 MATLAB 2012b and getting this error

c:\users\krzysztof\desktop\libocas_v096\libocas_v096\sparse_mat.h(27) : error C2371: 'mxArray' : redefinition; different basic types c:\program files\matlab\r2012b\extern\include\matrix.h(293) : see declaration of 'mxArray'

the code contains #include which includes matrix.h

another piece code includes sparse_mat.h which redefines matrix.h types e.g.

```
typedef struct {
  INDEX_TYPE_T *ir;
  INDEX_TYPE_T *jc;
  INDEX_TYPE_T m;
  INDEX_TYPE_T n;
  double *pr;
  NNZ_TYPE_T nzmax;
  int sparse;

} mxArray; 
```

Any idea how to get rid of this error ?? GCC compiles this code.

Krzysztof

it complains about line 293\. Below part from matrix.h with this line

```
#ifndef MATHWORKS_MATRIX_MXARRAY_PUB_FWD_H
#define MATHWORKS_MATRIX_MXARRAY_PUB_FWD_H

/* Copyright 2008 The MathWorks, Inc. */

/**
 * Published incomplete definition of mxArray
 */
typedef struct mxArray_tag mxArray; <--- line 293

#endif /* MATHWORKS_MATRIX_MXARRAY_PUB_FWD_H */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:52:18.370

尝试包含 header`"mex.h"`而不是`"matrix.h"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:08:40.950

看来您没有`forward declaration`正确使用。

在

```
typedef struct {
  INDEX_TYPE_T *ir;
  INDEX_TYPE_T *jc;
  INDEX_TYPE_T m;
  INDEX_TYPE_T n;
  double *pr;
  NNZ_TYPE_T nzmax;
  int sparse;

} mxArray; 
```

您正在定义一个名为`mxArray`.

在

```
typedef struct mxArray_tag mxArray; 
```

您正在为一个与您已经定义的类型发生冲突的类型`struct mxArray_tag`起别名。`mxArray``mxArray`

根据您的代码中的注释，您正在尝试`mxArray`通过前向声明来声明类型。为您的代码执行此操作的正确方法是`typedef mxArray mxArray_tag;`. 或者，更自然地，您可以将您的完整类型定义更改`mxArray`为非匿名结构：

```
typedef struct _mxArray {
  INDEX_TYPE_T *ir;
  INDEX_TYPE_T *jc;
  INDEX_TYPE_T m;
  INDEX_TYPE_T n;
  double *pr;
  NNZ_TYPE_T nzmax;
  int sparse;

} mxArray; 
```

并且前向声明将是`typedef struct _mxArray mxArray;`.

# ruby-on-rails - 什么是“public.rr_pending_changes”，为什么要占用 9gigs？

> ID：14149235
> 
> 赞同：2
> 
> 时间：2013-01-04T00:00:32.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-9.1

我在 AWS 上使用 PostgreSQL 9.1 运行 rails 3 应用程序。PostgreSQL 设置有一个主服务器和一个从服务器。我们最近注意到我们的数据库备份需要很长时间并且压缩超过 1gig。在本地查看了一个db备份后，我们注意到占用空间最多的表是：

```
"public.rr_pending_changes"    8851 MB 
```

第二大表只有 355 MB。`public.rr_pending_changes`如果我们真的需要它来占用这么多空间，有谁知道这张桌子是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:52:22.757

一个快速的谷歌搜索表明这`rr_pending_changes`是用于 ruby​​rep，一个复制系统。

也许你有 ruby​​rep，停止使用它，并且没有删除它的触发器？或者，也许您认为您正在复制，但它实际上不起作用？

# javascript - 基本的 JavaScript 手风琴

> ID：14149238
> 
> 赞同：1
> 
> 时间：2013-01-04T00:01:29.877
> 
> 标签：javascript, css

我正在制作手风琴常见问题解答。网上有很多脚本，但我讨厌使用我不理解的脚本（我是 Javascript 新手）。所以我从基础开始，一步步往上走。以下代码让我感到沮丧，为什么它不起作用：

Javascript：

```
function faq1() {

var faq1 = document.getElementById("faq1")

if (faq1.style.display = "none") {
faq1.style.display = "block";
}

else {
faq1.style.display = "none";
}
} 
```

HTML/CSS：

```
<a href="#" onclick="faq1()">Question 1</a>
<div id="faq1" style="display: none">
Answer to question 1
</div> 
```

该脚本打开了刚刚找到的手风琴。但是，Javascript 的“其他”部分不起作用，当我再次单击该链接时，我无法关闭显示。我已经尝试了各种“else if's”的方法，看看这是否会奏效。

多谢你们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T00:04:01.587

您在条件中使用赋值 ( `=`) 而不是比较 ( `==`)。

或者，

```
function faq1() {

    var faq1 = document.getElementById("faq1");

    faq1.style.display = faq1.style.display == "none" ? "" : "none";

} 
```

# c# - How to get alternate single words during dictation in SAPI 5.4 using C#?

> ID：14149239
> 
> 赞同：1
> 
> 时间：2013-01-04T00:01:29.050
> 
> 标签：c#, speech-recognition, speech-to-text, sapi

I am running a user study with speech recognition and new technologies. During the laboratory tests, I need to display all the dictated text using an interface that I programmed.

Currently, I can get the alternate whole sentences in C# but I need to get the single words. For example, if someone says "Hello, my name is Andrew", I want to get an alternate word for "Hello", "my", "name", "is" and "Andrew", instead of an alternate for the complete sentence.

Here is a code snippet of the handler I'm using.

```
public void OnSpeechRecognition(int StreamNumber, object StreamPosition, SpeechRecognitionType RecognitionType, ISpeechRecoResult Result)
{
    int NUM_OF_ALTERNATES = 5; // Number of alternates sentences to be read
    string recognizedSentence = Result.PhraseInfo.GetText(0, -1, true);

    // Get alternate sentences
    ISpeechPhraseAlternates phraseAlternates = Result.Alternates(NUM_OF_ALTERNATES);
} 
```

Any ideas are appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:38:54.023

您需要在 Result.Alternates 调用中指定元素计数和索引。

例如，

```
public void OnSpeechRecognition(int StreamNumber, object StreamPosition, SpeechRecognitionType RecognitionType, ISpeechRecoResult Result)
{
    int NUM_OF_ALTERNATES = 5; // Number of alternates sentences to be read
    string recognizedSentence = Result.PhraseInfo.GetText(0, -1, true);

    // Get alternate sentences
    int elementCount = Result.PhraseInfo.Elements.Count();
    for (int i = 0; i < elementCount; ++i)
    {
          ISpeechPhraseAlternates phraseAlternates = Result.Alternates(NUM_OF_ALTERNATES, i, 1);
    }
} 
```

# c# - WCFTestClient 连接但“添加服务引用”不生成引用

> ID：14149243
> 
> 赞同：0
> 
> 时间：2013-01-04T00:01:59.800
> 
> 标签：c#, wcf, rest, iis, service

我有一个在 IIS 中托管的具有 2 个端点（1 个 webHttpBinding 和 1 个 basicHttpBinding）的 WCF 服务。客户端可以毫无问题地发出 http 请求。我能够通过 WCFTestClient 连接和调用 SOAP 端点，并且能够成功地将服务引用添加到我的客户端项目。问题是**在 Reference.cs 文件或客户端上的 app.config 文件中没有生成代码**……它们都是空的。

我的问题是，为什么我能够通过 WCFTestClient 而不是通过 Add Service Reference 方法毫无问题地连接和调用 SOAP 端点？

编辑：我在添加服务引用的程序集上的引用似乎是一个问题。我正在引用另一个类库（服务中存在相同的库），并且在构建解决方案时收到此警告：

```
Warning 12  Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Referenced type 'MyNamespace.KPI.ChartObject`2, MyNamespace.KPI.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=3e720b7e8a51f8d5' with data contract name 'ChartObjectOfdecimalZKPIPeriodaU4eboDJ' in namespace 'http://schemas.datacontract.org/2004/07/MyNamespace.KPI' cannot be used since it does not match imported DataContract. Need to exclude this type from referenced types. 
```

需要注意的是，这个特定的类是一个泛型类...不知道这是否与错误有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:10:22.753

你需要遵循你的ABC：

*   地址
*   捆绑
*   合同

通过 HTTP 公开的地址只需要一个部署 URL。互联网信息系统正在为您处理所有这些。然而; 如果您尝试在`Service Reference`没有正确定义的情况下使用 - 它不会显示。因为它**没有去向的细节**。

一旦您定义了该标准，它应该按正常显示。

* * *

**更新：**

您可以将 SOAP 和 REST 从同一个服务合同中推向高潮，也可以将它们分开。在这个例子中；我会把它们分开。

**创建服务：**

```
[ServiceContract]
public interface IMath
{
      [OperationContract]
      int Add(int Number1, int Number2);
} 
```

**创建休息服务合同：**

```
[ServiceContract]
public interface IMathRest
{

     [OperationContract]
     [WebGet(UriTemplate = "/Add/{Number1}/{Number2}", RequestFormat = WebMessageFormat.Json,
              ResponseFormat = WebMessageFormat.Json)]
     int AddRest(string Number1, string Number2);
} 
```

在上述服务中；它明确设置消息格式。

**实现服务：“绑定”**

```
public class Math : IMath, IMathRest
{
     public int Add(int Number1, int Number2)
     {
         return Number1 + Number2;
     }

     public int AddRest(string Number1, string Number2)
     {
         int num1 = Convert.ToInt32(Number1);
         int num2 = Convert.ToInt32(Number2);
         return num1 + num2;
     }
} 
```

**配置服务：**

```
<serviceBehaviors>
      <behavior name = "servicebehavior">
          <serviceMetadata httpGetEnabled = "true" />
          <serviceDebug includeExceptionDetailInFaults = "false" />
      </behavior>
</serviceBehaviors> 
```

以上将服务设置为Basic / Web Http。

配置完成后，您`serviceBehavior`需要定义端点：

```
<endpointBehaviors>
     <behavior name="restBehavior">
          <webHttp/>
     </behavior>
</endpointBehaviors> 
```

这会将您的 Rest Endpoint 配置为`webHttpBinding`上面指定的。现在你需要定义你的肥皂。

```
<endpoint name = "SoapEndPoint"
       contract = "Namespace in which Service Resides goes here"
       binding = "basicHttpBinding" <!-- Mirrors are above configuration -->
       address = "soap" /> 
```

以上将进入您的配置；但是在使用服务时**，需要端点名称**。端点将在基地址/肥皂地址处可用。使用的绑定是指定的。

除了我们只配置了我们的肥皂，而不是我们的休息。所以我们需要指定我们的端点：

```
<endpoint name = "RestEndPoint"
       contract = "Namespace that our Rest Interface is located goes here"
       binding = "webHttpBinding"
       address = "rest"
       behaviorCOnfiguration = "restBehavior" /> 
```

我们的 Rest Endpoint 将在我们的 Url（基地址/Rest/Add/Parameter/Parameter）处调用。我们已经指定了绑定；并设置我们的休息行为。

当你把整件事放在一起时；它看起来像：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name ="servicebehavior">        
          <serviceMetadata httpGetEnabled="true"/>        
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="restbehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service name ="MultipleBindingWCF.Service1"
               behaviorConfiguration ="servicebehavior" >
        <endpoint name ="SOAPEndPoint"
                  contract ="MultipleBindingWCF.IService1"
                  binding ="basicHttpBinding"
                  address ="soap" />

        <endpoint name ="RESTEndPoint"
                  contract ="MultipleBindingWCF.IService2"
                  binding ="webHttpBinding"
                  address ="rest"
                  behaviorConfiguration ="restbehavior"/>

        <endpoint contract="IMetadataExchange"
                  binding="mexHttpBinding"
                  address="mex" />
      </service>
    </services>   
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
</configuration> 
```

**消费：**

使用我们的肥皂很简单；直截了当。制作服务参考并拨打电话。

```
static void CallingSoapFunction()
{
     SoapClient proxy = new SoapClient("SoapEndPoint");
     var result = proxy.Add(7,2); // Proxy opens the channel, we invoke our method, we input our parameters.
     Console.WriteLine(result);
} 
```

除了我们的 Restful 消费略有不同；特别是因为我们必须将其格式化为 Json。所以我们需要准确地指定名称。

Rest 将依赖 Json 对数据进行反序列化。

```
static void CallRestFunc()
{
     WebClient RestProxy = new WebClient();
     byte[] data = RestProxy.DownloadData(new Uri("http://localhost:30576/MathRest.svc/Rest/Add/7/2")); // As you see it is following the exact location of the project, invoking method / parameter and so on down the line.
Stream stream = new MemoryStream(data);
DataContractJsonSerializer obj = new DataContractJsonSerializer(typeof(string));
string result = obj.ReadObject(stream).ToString();
Console.WriteLine(result);
} 
```

以上将使用 Rest Uri 下载数据。反序列化该数据；并被展示出来。

希望这有助于澄清。

如果您的配置文件中没有创建正确的项目；那么它将不允许适当的消费。ABC 在 WCF 中至关重要。如果它不是在配置文件中创建的，您需要在代码中以编程方式创建它们。

* * *

**更新：**

```
static void Main(string[] args)
{
    var binding = new BasicHttpBinding();
    var endpoint = new EndpointAddress("http://localhost:8080/");
    using (var factory = new ChannelFactory<IPerson>(binding, endpoint))
    {
        var request = new Dictionary<Guid, Person>();
        request[Guid.NewGuid()] = new Person { Name = "Bob", Email = "Bob@abc.com" };

        var client = factory.CreateChannel();
        var result = client.SetCustomer(request);

        Console.WriteLine("Name: {0} | Email: {1}", result.Name, result.Email);
        factory.Close();
    }
    Console.ReadKey(true);
} 
```

正如您在这个基本示例中看到的那样；绑定和端点都已配置。您需要确保所有这些都在您的服务器和客户端中定义。它必须知道它要去哪里。这更有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T10:03:37.423

看看这个[网址](http://www.naveenbhat.in/2013/07/mvc-4-wcf-add-service-reference.html)。希望这对您有所帮助。

# meteor - 如何在 Meteor 中使用客户端重新连接事件

> ID：14149245
> 
> 赞同：3
> 
> 时间：2013-01-04T00:02:06.470
> 
> 标签：meteor, reconnect

如何在 Meteor 中使用客户端重新连接事件。

> 在客户端，Meteor.apply 采用新的等待选项，确保在此方法完成之前不会向服务器发送进一步的方法调用；它用于登录和注销方法，以保持用户 ID 的明确定义。您还可以指定在重新建立连接时运行的 onReconnect 处理程序；Meteor Accounts 使用它在重新连接时重新登录。

有人可以提供一个例子。

这是帐户包中的示例。

```
 Accounts._makeClientLoggedIn = function(userId, token) {
    Accounts._storeLoginToken(userId, token);
    Meteor.default_connection.setUserId(userId);
    Meteor.default_connection.onReconnect = function() {
      Meteor.apply('login', [{resume: token}], {wait: true}, function(error, result) {
        if (error) {
          Accounts._makeClientLoggedOut();
          throw error;
        } else {
          // nothing to do
        }
      });
    };
    userLoadedListeners.invalidateAll();
    if (currentUserSubscriptionData) {
      currentUserSubscriptionData.handle.stop();
    }
    var data = currentUserSubscriptionData = {loaded: false};
    data.handle = Meteor.subscribe(
      "meteor.currentUser", function () {
        // Important! We use "data" here, not "currentUserSubscriptionData", so
        // that if we log out and in again before this subscription is ready, we
        // don't make currentUserSubscriptionData look ready just because this
        // older iteration of subscribing is ready.
        data.loaded = true;
        userLoadedListeners.invalidateAll();
      });
  }; 
```

如果您希望帐户仍然有效，我假设您不能只定义另一个 default_connection.onReconnect ？

谢谢。

**编辑**：

再想一想，而不是使用 onReconnect 你可能应该使用它`Meteor.status()`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T02:39:50.937

哈利，我在上面看到了你的评论并做了这个改变。我认为你是对的。因为[`Meteor.status`](http://docs.meteor.com/#meteor_status)是一个反应变量，所以只要连接状态发生变化，它就会重新运行。

```
if (Meteor.isClient) {
    Tracker.autorun(function () {
        if (Meteor.status().connected) {
            console.log("connected");
        } else {
            console.log("disconnected");
        }
    });
} 
```

# php - 通过 Javascript 或 PHP 删除 cookie

> ID：14149247
> 
> 赞同：0
> 
> 时间：2013-01-04T00:02:07.733
> 
> 标签：php, javascript, cookies

我想向我的客户提供一个 javascript 代码段（有点像谷歌分析），它将使用他们网站上的代码并跟踪他们网站上的访问持续时间。我想为此使用cookies。

我唯一的问题是最好的实施方式是什么？我想到的几个选项：

1.  我是否应该从 PHP 设置 cookie（它将位于我的域中），这是否会被视为 3rd 方 cookie？
2.  还是我必须从 Javascript 设置一个 cookie，因为它将是从我的站点加载的客户端？
3.  还是使用 javascript 设置 cookie 并使用 PHP 访问它们的最佳方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:22:07.187

如果您在 JavaScript 中设置 cookie，则 cookie 的域将是网站的域，而不是您的域。因此，在执行类似操作时，该信息不可用。

```
<script src="http://example.com/tracking-js.php"></script> 
```

换句话说，那是行不通的。

相反，您需要使用 AJAX 或（谷歌如何做）通过加载空白图像将客户信息发送到您的网络服务。

JavaScript中有很多参数可用，但不能发送到服务器（不在`$_SERVER`）。Google 将该信息添加为 GET 参数。

但是，如果您真的不需要这些数据，最简单的方法是将您的脚本作为图像包含在客户的网站上。

```
<img src="http://example.com/tracking.php" /> 
```

`$_SERVER['HTTP_REFERRER']`将是包含脚本的页面的 URL。确保设置`Content-Type`为`'image/gif'`并输出一个空白的 1px gif。

使用 AJAX 时，请注意您需要使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，这意味着设置`Access-Control-Allow-Origin`响应标头。

请注意，在没有 jQuery 的情况下使用 AJAX 可能会很痛苦。由于您不关心响应，因此创建跟踪图像（使用 javascript）可能是您的最佳选择。阅读[这篇文章](http://www.arlocarreon.com/blog/javascript/javascript-image-beacons-for-tracking-user-interactions/)，了解如何实现它。

# android - 点击并移动二维

> ID：14149248
> 
> 赞同：0
> 
> 时间：2013-01-04T00:02:36.850
> 
> 标签：android

我需要创建一个用户可以点击的窗口。我需要知道用户何时开始点击、停止点击、用户是否移动手指并保持向下，以及他点击的位置的确切坐标，以及他实时移动手指的位置。我不明白哪种小部件最适合这种活动：有人可以给我一个提示吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:35:51.567

带有附件的任何`View`（包括任何）都可以做你正在寻找的东西。在这种情况下，您可以记录点击发生的位置；在事件中，您可以获得当前指针位置的坐标。`ViewGroup``OnTouchListener``ACTION_DOWN``ACTION_MOVE`

只需将 an 附加`OnTouchListener`到您的视图并相应地处理它：

```
View view = findViewById(R.id.my_view);
view.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        switch(event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                float xTap = event.getX();
                float yTap = event.getY();
                break;
            case MotionEvent.ACTION_MOVE:
                float xMovement = event.getX();
                float yMovement = event.getY();
                break;
        }
    }
} 
```

# java - 使用掩码读取 int 的未知方式

> ID：14149251
> 
> 赞同：1
> 
> 时间：2013-01-04T00:03:01.803
> 
> 标签：java, android, c, image-processing

我尝试解决*Android*的各种限制，但我很困惑如何解释以下代码

```
static bool read_mbf(SkStream* stream, int* value)
{
    int n = 0;
    uint8_t data;
    do {
        if (!read_byte(stream, &data)) {
            return false;
        }
        n = (n << 7) | (data & 0x7F); // Appends lower 7 bits
    } while (data & 0x80); // Handles upper bit as flag!?

    *value = n;
    return true;
} 
```

在我看来，高位是*数据继续*的标志。当它丢失时，读取 int 停止。这个对吗？

要在 Java 中正确编码（另见 Daniel 的回答）：

```
private void encode( byte[] array, int offset, int value ) {
    if( (value & 0xF0000000) != 0 )
        throw new InvalidParameterException("Value " + value + "is too big to be encoded (max: " + 0x0FFFFFFF + ")");

    // | 0x80 makes sure, upper most bit is set so next byte is processed
    // & 0x7F makes sure, upper most bit is NOT set to end processing
    array[offset + 0] = (byte)((value >> 21) | 0x80);
    array[offset + 1] = (byte)((value >> 14) | 0x80);
    array[offset + 2] = (byte)((value >>  7) | 0x80);
    array[offset + 3] = (byte)((value >>  0) & 0x7F);
} 
```

有人可以确认或指出我做错了什么吗？

编辑：

更新了 Java 代码以反映 Daniel Fischer 的更正

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:51:40.450

您的实现几乎是正确的，但是由于太累了，您将错误的值转移到错误的方向：

```
array[offset + 0] = (byte)((value & (0x7F << 21)) | 0x80); 
```

因此，您从 中屏蔽除位置 21 到 27 之外的所有位`value`，然后按位或使用`0x80`. 然后将结果转换为`byte`，这意味着丢弃除最低有效 8 位之外的所有位。那离开

```
array[offset + 0] = (byte)0x80; 
```

你要

```
array[offset + 0] = (byte)(((value >> 21) & 0x7F) | 0x80); 
```

等等

而你的例外条件，

```
if( (value & 0xF0000000) == 0xF0000000 ) 
```

不正确。仅当设置了所有四个最高有效位时才会抛出。如果只设置了其中一些，您的编码只会丢弃它们。条件可能是

```
if( (value & 0xF0000000) != 0 ) 
```

检查是否设置了这些位中的任何一个。

但是你真的想要那个例外吗？C 代码中没有理由限制这种限制（但是，有理由禁止负`int`s，因为这会导致溢出，从而导致上次左移时出现未定义的行为）。

如果你想用编码允许的最小字节数对任何非负数`int`进行编码，代码会变得有点复杂，因为使用的字节数会随着编码值的大小而变化。

```
private int encode( byte[] array, int offset, int value ) {
    if (value < 0)
        throw new InvalidParameterException("Value " + value + " is negative and cannot safely be decoded.");
    byte temp;
    int shift = 28;
    // find highest set septet
    while(shift > 0 && (value >> shift) == 0) {
        shift -= 7;
    }
    // encode parts that have a successor
    while(shift > 0) {
        array[offset++] = (byte)(((value >> shift) & 0x7F) | 0x80);
        shift -= 7;
    }
    // last septet
    array[offset++] = (byte)(value & 0x7F);
    // return offset for next value
    return offset;
} 
```

线

```
array[offset++] = (byte)(((value >> shift) & 0x7F) | 0x80); 
```

也可以写成

```
array[offset++] = (byte)((value >> shift) | 0x80); 
```

因为强制转换为`byte`丢弃所有其他位。

（我省略了对 的检查`offset < array.length`，因为这不是算法的一部分，为了安全起见应该添加它们。）

# node.js - 如何将变量传递给 Express 中的视图？

> ID：14149252
> 
> 赞同：5
> 
> 时间：2013-01-04T00:03:03.620
> 
> 标签：node.js, express

我对 Express.js/Node.js 很陌生，并尝试将多个值从路由传递到视图，以便能够在页面上显示用户特定的输入。这就是我的路线：

```
// Dashboard for site after the login
app.get('/dashboard', function(req, res) {
 res.render('dashboard.jade', {
  title: 'Dashboard',
  user: app.get('user_name')
 });
}); 
```

我已将用户名存储在`app.get('user_name')`. 如果我用普通的字符串替换它，`'test string'`它就会起作用。但是，如果我使用此`app.get`功能，则不会将任何内容传递给视图。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T18:10:53.413

尝试使用此处记录的 app.locals：http: [//expressjs.com/api.html#app.locals](http://expressjs.com/api.html#app.locals)

# ruby-on-rails - 使用 MailChimp API 时导致 -32601 错误的原因是什么？

> ID：14149256
> 
> 赞同：3
> 
> 时间：2013-01-04T00:03:19.767
> 
> 标签：ruby-on-rails, mailchimp

我正在使用 hominid gem 与 MailChimp API 交互，但我更新活动内容的尝试失败了。

我用来更新广告系列的代码是：

```
h = Hominid::Base.new({:api_key => ENV["MAILCHIMP_API_KEY"]})
h.update(self.mail_chimp_campaign_id, "content", {:html_content => content_string}) 
```

我得到的错误是：

```
<-32601> server error. requested method not found 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:03:19.767

我发现问题出在我试图发送到 MailChimp 的内容上。MailChimp 无法处理一些特殊字符，在清理我试图发送的数据后一切正常。

虽然它在我的情况下对我没有帮助，但我确实[在这里](https://groups.google.com/forum/#!msg/mailchimp-api-discuss/pN0lDXnAeI4/tDvYdbSXXioJ)读到，在将数据发送到 MailChimp 之前转换数据是一种可能的解决方案。建议是获取导致问题的数据，并`Iconv`在将其发送到 MailChimp 之前运行它：

```
utf8_to_ascii = Iconv.new("US-ASCII//TRANSLIT//IGNORE", "UTF8")
utf8_to_ascii.iconv(gnarly_user_data) 
```

# css - 铬的CSS字体系列问题

> ID：14149261
> 
> 赞同：0
> 
> 时间：2013-01-04T00:03:27.237
> 
> 标签：css, chromium

这个CSS定义：

`* {font-family: 'Lucida console', monospace;}`

由Firefox正确解释。

使用 ubuntu-chromium (v18.0.1025..)，为了获得相同的字体，我写了

`* {font-family: monospace 'Lucida console';}`（是的，没有逗号）

您可以使用两种浏览器（嵌入在链接中的代码）尝试这个[实时示例。](http://mrdoob.com/projects/htmleditor/#B/ZVBNSwMxED3HXzFtDwVx2YIX2UQvq+BB0IMgHtN8dINJpiTZ6rr0v5tk9eRc3sDMe/PesNX9c//6/vIAQ3L27oItQNiguMxImFOJgxh4iCrdrsekm5t1HcQ0WVU6skc5wbzn4uMQcPSyEWgxdLDRtajj4WB8B9e73fGL4kkFbfGzg8FIqTw9F41LmDX61GjujJ06cOgxHrlQV7B9GoWR2QT6iFZtASjU3Wi+VVHNokDPhBQdaU4wwz8vm77vKZRLrP0zztrfkKwEqJkyu+CjshbhDYOVsKqcZcDaZTMzy5t+AA==)

如何使“monospace lucida console”两者都可用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T11:28:34.800

我找到了答案的开头。

Firefox (22.0) 控制台谈到：

```
[13:03:08,615] downloadable font: download failed 
  (font-family: "lucida_consoleregular" [...])
  bad URI or cross-site access not allowed
  source: http://www.goto.com/font/lucida_console-webfont.ttf 
  @ http://www.goto.com/css/style.css
  source: [...] lucida_console-webfont.woff
[13:03:08,615] downloadable font: no supported format found 
```

针对该网站的 DNS 从两个 URL 重定向：一个以“ **w3** ”为前缀。另一个是“ **www** ”。字体路径是样式表是相对路径，但服务器根 URI 是唯一的，无论是 www 还是 w3

```
@font-face {
    font-family: 'lucida_consoleregular';
    src: url('../fonts/lucida_console-webfont.eot');
    src: url('../fonts/lucida_console-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/lucida_console-webfont.woff') format('woff'),
         url('../fonts/lucida_console-webfont.ttf') format('truetype');
} 
```

调用与正确根 URI 相关的正确前缀时不会发生错误

另一方面，Ubuntu-Chromium（现在是 28.0）和 Opera（12.16）对此没有任何问题。

# java - Java 程序在 Netbeans 中运行良好，但是从构建的 JAR 运行时它不起作用

> ID：14149262
> 
> 赞同：1
> 
> 时间：2013-01-04T00:03:26.810
> 
> 标签：java, mysql, netbeans, jdbc, netbeans-7.2

我现在是一个 java 新手，我想做的就是将 MySQL 日志记录添加到这个用于 Minecraft 服务器的 Java 代理中。

当程序在 NetBeans 中运行时，程序运行良好，没有任何错误。但是，当构建一个 jar 并从该 jar 运行程序时，登录到 Minecraft 服务器时会引发此错误：

SQLNestedException 出错：无法为连接 URL 'jdbc:mysql://localhost:3306/userips'@org.apache.commons.dbcp.BasicDataSource:1452 创建类 'com.mysql.jdbc.Driver' 的 JDBC 驱动程序

基本上它应该做的是记录用户IP、用户名、登录时间和日期。

我正在使用 Netbeans IDE 7.2.1 并使用 Maven 构建 jar 来处理所有依赖项。

我使用 maven 将 commons-dbcp-1.4.jar、mysql-connector-java-5.1.22.jar 和 commons-pool-1.5.4.jar 导入到我的依赖项中，它们位于 jar 文件中。

这是建立连接的类：

```
import java.sql.Connection;
import java.sql.SQLException;
import org.apache.commons.dbcp.BasicDataSource;

public final class ConnectionPooler {

    public static final Configuration config = new Configuration();

    private static final BasicDataSource dataSource = new BasicDataSource();

    static {
        config.load();
        dataSource.setDriverClassName("com.mysql.jdbc.Driver");
        dataSource.setUrl(config.sql_url);
        dataSource.setUsername(config.sql_user);
        dataSource.setPassword(config.sql_pass);
        dataSource.setInitialSize(5);
        dataSource.setMaxActive(30);
    }

    public static Connection getConnection() throws SQLException {
        return dataSource.getConnection();
    } 

} 
```

这是执行 mysql 查询和所有操作的类：

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

public class IPLogger {

public boolean logip(String player, String ipp) throws SQLException {
    Connection connection = null;
    PreparedStatement statement = null;
    ResultSet resultSet = null;

    Calendar now = Calendar.getInstance();
    TimeZone timeZone1 = now.getTimeZone();
    String timeZone = timeZone1.getDisplayName();
    DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
    DateFormat timeFormat = new SimpleDateFormat("HH:mm:ss");
    Date date1 = new Date();
    Date date2 = new Date();
    String date;
    String time;
    date = dateFormat.format(date1);
    time = timeFormat.format(date2);

    String SQL_EXIST = "INSERT INTO `proxyips` (`username`, `ip`,`date`,`time`) VALUES ('"+player+"', '"+ipp+"','"+date+"','"+time+" "+timeZone+"')";

    try{
        connection = ConnectionPooler.getConnection();
        statement = connection.prepareStatement(SQL_EXIST);
        statement.executeUpdate();

    } finally {
        if (resultSet != null) {
            try { resultSet.close(); } catch (SQLException ignore) {ignore.printStackTrace(); }
        }
        if (statement != null) {
            try { statement.close(); } catch (SQLException ignore) {ignore.printStackTrace(); }
        }
        if (connection != null) {
            try { connection.close(); } catch (SQLException ignore) {ignore.printStackTrace(); }
        }
    }       

    return true;
}

} 
```

这是 pom.xml，以防我在构建时遇到一些错误或类似的错误：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>net.md-5</groupId>
    <artifactId>BungeeCordKC</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>BungeeCordKC</name>
    <url>http://maven.apache.org</url>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                  <showDeprecation>false</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.0</version>
                <configuration>

                    <filters>
                        <filter>
                            <artifact>*:*</artifact>
                            <excludes>
                                <exclude>**/*.java</exclude>
                                <exclude>**/*.properties</exclude>
                                <exclude>**/*.SF</exclude>
                                <exclude>**/*.DSA</exclude>
                            </excludes>
                        </filter>
                    </filters>

                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <archive>
                        <manifestEntries>
                            <Main-Class>${main.class}</Main-Class>
                            <Implementation-Version>${describe}</Implementation-Version>
                        </manifestEntries>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <build.number>unknown</build.number>
        <main.class>net.md_5.bungee.BungeeCord</main.class>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.yaml</groupId>
            <artifactId>snakeyaml</artifactId>
            <version>1.11</version>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>0.11.4</version>
        </dependency>
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>13.0.1</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.findbugs</groupId>
            <artifactId>annotations</artifactId>
            <version>2.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcprov-ext-jdk15on</artifactId>
            <version>1.47</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.22</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <artifactId>commons-pool</artifactId>
            <groupId>commons-pool</groupId>
            <type>jar</type>
            <version>1.5.4</version>
        </dependency>
    </dependencies>
</project> 
```

如果有人知道出了什么问题，或者您对我如何设置环境有任何疑问，请告诉我。

编辑：当我将该 catch 语句添加到 try 块时，这是完整的堆栈跟踪。

```
org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class '
com.mysql.jdbc.Driver' for connect URL 'jdbc:mysql://localhost.com:3306/use
rips'
        at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(Basic
DataSource.java:1452)
        at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSou
rce.java:1371)
        at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource
.java:1044)
        at net.md_5.bungee.ConnectionPooler.getConnection(ConnectionPooler.java:
30)
        at net.md_5.bungee.IPLogger.logip(IPLogger.java:44)
        at net.md_5.bungee.InitialHandler.run(InitialHandler.java:77)
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ExceptionInInitializerError
        at com.mysql.jdbc.Util.stackTraceToString(Util.java:355)
        at com.mysql.jdbc.Util.<clinit>(Util.java:120)
        at com.mysql.jdbc.NonRegisteringDriver.parseURL(NonRegisteringDriver.jav
a:764)
        at com.mysql.jdbc.NonRegisteringDriver.acceptsURL(NonRegisteringDriver.j
ava:265)
        at java.sql.DriverManager.getDriver(Unknown Source)
        at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(Basic
DataSource.java:1437)
        ... 11 more
Caused by: java.lang.RuntimeException: Can't load resource bundle due to underly
ing exception java.util.MissingResourceException: Can't find bundle for base nam
e com.mysql.jdbc.LocalizedErrorMessages, locale en_US
        at com.mysql.jdbc.Messages.<clinit>(Messages.java:61)
        ... 17 more
Caused by: java.util.MissingResourceException: Can't find bundle for base name c
om.mysql.jdbc.LocalizedErrorMessages, locale en_US
        at java.util.ResourceBundle.throwMissingResourceException(Unknown Source
)
        at java.util.ResourceBundle.getBundleImpl(Unknown Source)
        at java.util.ResourceBundle.getBundle(Unknown Source)
        at com.mysql.jdbc.Messages.<clinit>(Messages.java:59)
        ... 17 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:02:05.490

错误的原因是您在`.properties`使用 maven-shade 构建 JAR 时排除了文件。我强烈建议您不要构建大 jar，而只需按照预期使用类路径机制，并将驱动程序等保存在自己的 jar 文件中。

堆栈跟踪的以下部分证明了这一点：

```
Caused by: java.lang.RuntimeException: Can't load resource bundle due to underly
ing exception java.util.MissingResourceException: Can't find bundle for base nam
e com.mysql.jdbc.LocalizedErrorMessages, locale en_US
        at com.mysql.jdbc.Messages.<clinit>(Messages.java:61) 
```

资源包也是`.properties`.

因此，要解决此问题，我的第一个建议是不要构建一个大罐子，否则，您需要通过以下方式删除来更改 maven-shade 排除过滤器`<exclude>**/*.properties</exclude>`：

```
<filters>
    <filter>
        <artifact>*:*</artifact>
        <excludes>
            <exclude>**/*.java</exclude>
            <exclude>**/*.properties</exclude>
            <exclude>**/*.SF</exclude>
            <exclude>**/*.DSA</exclude>
        </excludes>
    </filter>
</filters> 
```

它在您的 IDE 中工作的原因是它使用使用 maven 下载的实际 JAR 文件。

# xcode - Objective-C 运行时信息与测试台所需的运行时信息不匹配

> ID：14149264
> 
> 赞同：1
> 
> 时间：2013-01-04T00:03:31.853
> 
> 标签：xcode, macos

我有几个旧的 32 位非 ARC 框架（预编译，我无权访问源代码）我正试图包含在一个新项目中。该项目构建良好，但是当我尝试运行单元测试时，我收到以下错误：

> [...]MappingKitTests.octest 的测试包无法加载，因为它的 Objective-C 运行时信息与测试台所需的运行时信息不匹配。这可能是因为测试平台在禁用 Objective-C 垃圾收集的情况下运行，但测试包需要 Objective-C 垃圾收集。要为测试装备启用 Objective-C 垃圾收集，请在没有 OBJC_DISABLE_GC 环境变量的环境中运行它。

我的新项目和单元测试是 32 位的，非 ARC，所以这个错误对我来说没有多大意义。

项目和框架是否必须使用相同版本的 OS X SDK 构建？这是我唯一能想到的。这些框架是使用 10.6 SDK 构建的，而我的新项目是使用 10.8 SDK 构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:48:22.467

我想通了。我对垃圾收集 (GC) 和自动引用计数 (ARC) 感到困惑。此错误专门针对 GC。

**添加GCC_ENABLE_OBJC_GC = unsupported**的用户定义构建设置更正了该问题。

# java - 包含 Java 项目作为库

> ID：14149269
> 
> 赞同：4
> 
> 时间：2013-01-04T00:05:02.893
> 
> 标签：java, android, eclipse, cross-platform

我的 Eclipse 工作区中有三个项目：

```
EventKitchenCore
EventKitchenDesktop
EventKitchenAndroid 
```

`EventKitchenCore`包含所有核心功能，并且`EventKitchenDesktop`本质`EventKitchenAndroid`上只是不同的用户界面。

我已经`EventKitchenCore`添加并作为库`EventKitchenDesktop`在`EventKitchenAndroid`.

**我该怎么做呢？**`lib`每次我进行更改时都必须在目录中导出为 jar，这将是一件很痛苦的事情......

我尝试在`Properties > Java Build Path > Libraries`and中添加核心项目`Properties > Android > Library`，但没有运气：\

**更新**- 现在，我通过将核心项目导出为 libs 文件夹中的 jar 来使其工作。但是我经常进行更改，就像我说的那样，这很痛苦。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T04:23:55.513

Eclipse 具有内置的[Ant](http://ant.apache.org/)支持。您可以利用它自动创建当前项目的 JAR 并将其放在另一个项目的文件夹中。

如果`EventKitchenAndroid`和`EventKitchenCore`项目都在同一个工作区中，请`build.xml`在项目中创建一个文件，`EventKitchenCore`其中仅包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="EventKitchenCore" default="createjar">
    <target name="createjar">
        <jar destfile="../EventKitchenAndroid/libs/EventKitchenCore.jar" basedir="bin" />
    </target>
</project> 
```

要对其进行测试，请在 Eclipse 中选择该文件并按`Ctrl`+`F11`将其作为 Ant 构建文件运行。如果它以您想要的方式工作，那么您可以告诉 Eclipse 在每次构建项目时自动执行此构建文件。转到*Builders*`EventKitchenCore`属性中的项目属性，单击*Import...*并选择您刚刚创建的文件。**`build.xml`**

 **现在，它将在每次构建项目时执行。`Ctrl`您可以通过按+手动强制构建项目`B`。另请参阅我刚刚创建的[视频演示。](http://www.screencast.com/t/AXtu0ekoE0q3)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T04:47:58.633

您可以将您的项目配置为依赖于 EventKitchenCore 的**Maven Artifact**，因此，Maven 将为您处理：

EventKitchenCore pom.xml：

```
<project ...>
   <modelVersion>4.0.0</modelVersion>
   <groupId>com.adamgaskins</groupId>
   <artifactId>event-kitchen-core</artifactId>
   <packaging>jar</packaging>
   <version>0.0.1-SNAPSHOT</version>
   <name>EventKitchenCore</name>
</project> 
```

EventKitchenDesktop pom.xml：

```
<project ...>
   <modelVersion>4.0.0</modelVersion>
   <groupId>com.adamgaskins</groupId>
   <artifactId>event-kitchen-desktop</artifactId>
   <packaging>jar</packaging>
   <version>0.0.1-SNAPSHOT</version>
   <name>EventKitchenDesktop</name>
   <dependencies>
     <dependency>
       <groupId>com.adamgaskins</groupId>
       <artifactId>event-kitchen-core</artifactId>
       <version>0.0.1-SNAPSHOT</version>
     </dependency>
   <dependencies>
</project> 
```

EventKitchenAndroid pom.xml：

```
<project ...>
   <modelVersion>4.0.0</modelVersion>
   <groupId>com.adamgaskins</groupId>
   <artifactId>event-kitchen-android</artifactId>
   <packaging>apk</packaging> <!-- for this, you need the maven-android-plugin -->
   <version>0.0.1-SNAPSHOT</version>
   <name>EventKitchenAndroid</name>
   <dependencies>
     <dependency>
       <groupId>com.adamgaskins</groupId>
       <artifactId>event-kitchen-core</artifactId>
       <version>0.0.1-SNAPSHOT</version>
     </dependency>
   <dependencies>
</project> 
```

不要忘记 SNAPSHOT 后缀，否则，Maven 将不会更新您的更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T03:12:41.623

最简单的想法（也可以在 Eclipse 之外工作）是从库的包目录创建符号链接/快捷方式到`src`项目的 -folder 中：

```
|- EventKitchenCore
   |- src/
      |- org.your.library.package <-+
|- EventKitchenDesktop              |
   |- src/                          |
      |- org/desktop/something/     |
      |- symlink to ----------------+
|- EventKitchenAndroid              |
   |- src/                          |
      |- org/android/something/     |
      |- symlink to ----------------+ 
```

这样，您可以编译实际项目，就好像您的库将成为应用程序的一部分一样，并且您的更改会立即反映在两个项目中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T17:11:15.640

正如一些贡献者所建议的那样，我会说使用 maven 或 ant。配置很简单，大部分都已经放好了，复制粘贴就行了。当您在开发环境中时，您可以做的是在构建路径中添加项目。转到构建路径并选择“项目”选项卡并添加您需要的项目，因此每次进行更改时，所有更改对于链接的项目都是可见的。当您即将部署时，您可以使用 maven 或 ant。但是，您也可以在开发中同时使用它们。但是，如果您想要快速修复，如果您还不想使用 maven 或 ant，我建议您参考这些项目。但是，当您部署时，我强烈建议使用这两个项目经理之一，因为正如您所提到的，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T06:58:50.850

这是一个可以帮助您的解决方案：

1）Eclipse-Package Explorer - 您的项目（Android） - 右键单击​​您的项目。

2）点击Android（在屏幕左侧） - 现在你的屏幕可能看起来像这样 -

![在此处输入图像描述](../Images/e7746ea357c67d1a48d799e2b42cef9c.png)

现在在屏幕底部的库部分，您可以直接添加所有库项目，而无需制作任何 JAR。只需要在工作区中导入这些库项目，或者您的所有库项目都应该在 Eclipse 中打开。

1）单击添加按钮，您将获得可用的库项目列表，从中选择并构建您的项目。

祝你好运..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T00:09:38.350

您必须转到要创建库的项目的首选项并检查`Is Library`子`Android`菜单。然后您可以尝试再次导入您的项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T19:25:59.333

我相信您正在寻找的是 Eclipse 中的“链接源”选项。从您的 android 项目中，选择项目并右键单击以选择“构建路径”>“链接源”。这将允许您在与您的 android 应用程序相同的构建路径中访问您的 Java 库以进行开发。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-17T08:39:55.883

如果您只想引用核心项目代码，那么在 Eclipse 中，您只需从 Android 项目中引用该项目即可。（“库项目”功能仅适用于 Android 库项目，您这里只有一个普通的 Java 项目，对吧？）

因此，在您的包资源管理器中，您拥有所有三个（核心、Android 和桌面）项目。右键单击`EventKitchenAndroid`并选择属性。选择 Java Build Path -> Project 选项卡并单击 Add... 按钮。选择`EventKitchenCore`。转到 Order & Export 选项卡，确保`EventKitchenCore`项目已选中，一切顺利。对 EventKitchenCore 源的任何更改都会立即用于 Android 项目。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-18T10:40:02.917

这是我将库添加到我的项目的方式

![图书馆项目](../Images/8525919345d4f9d73c0cd6b25ccb674e.png)

**阶段 1：创建图书馆项目**

在图像上，您可以看到 2 个名为**library**和**ListSamples**的项目，它们正在使用 library

要将项目**库**作为库项目右键单击项目并选择属性

![设置库](../Images/9e2520ecab253639f73c3c731403f081.png)

标记**IsLibrary**复选框以使其成为库

您可以在库项目的 bin 文件夹中看到 .jar 文件

![编译库](../Images/e644343fc566f6704603815242813ac7.png)

现在创建了库项目

**阶段 2：将库项目添加到 android 项目**

现在右键单击您的**android 项目**并选择其属性。然后单击库区域内的**添加**按钮并将库项目的路径设置为它

![在此处输入图像描述](../Images/680b7a53b9e2c1e1af3e94348cf56760.png)

![在此处输入图像描述](../Images/2776e2f310da281d124f299c67573711.png)

然后会出现一个弹出窗口，显示您在 eclipse 中创建的当前处于活动状态的库项目列表（不会显示已关闭的库项目）

![在此处输入图像描述](../Images/049221fdcc26e9f22eba0adb8e302d6d.png)

这里我只有一个项目，所以在这里列出

选择您需要的所有库，然后单击**OK**。现在库项目将添加到您的项目中

![在此处输入图像描述](../Images/008d14dcdec91f9cf5fca76fac366cfa.png)

在检查您的 android 项目时，您可以看到项目的**.jar**文件已添加到您的 android 项目中

![在此处输入图像描述](../Images/d8c6d9b487cb5a7c3530e4cd5eb6f154.png)

**注意：-**如果您在库项目中使用 android 支持包（**android-support-v4.jar**），则无需在您的 Android 项目中再次添加它。

您还可以使用 ant 将库添加到项目中。但我对此一无所知。**

# node.js - 将对 DB 的引用传递到路由中不适用于我的 Node / Express 项目

> ID：14149270
> 
> 赞同：3
> 
> 时间：2013-01-04T00:05:03.650
> 
> 标签：node.js, express, node-mongodb-native

我正在使用 node + express 创建一个简单的 REST API，并试图将路由逻辑与 db 逻辑分开。我在从路由访问数据库时遇到问题。

这是我的 server.js 代码：

```
var express = require('express')
  , path = require('path')
  , http = require('http')
  , mongo = require('mongodb');

// Configure Express app
var app = express();
app.configure(function () {
    app.set('port', process.env.PORT || 3000);
    app.use(express.logger('dev'));  /* 'default', 'short', 'tiny', 'dev' */
    app.use(express.bodyParser()),
    app.use(express.static(path.join(__dirname, 'public')));
});

// Configure DB
var Server = mongo.Server
  , Db = mongo.Db
  , BSON = mongo.BSONPure
  , server = new Server('localhost', 27017, {auto_reconnect: true})
  , db = new Db('mydb', server, {safe: true});

// Open DB to see if we need to populate with data
db.open(function(err, db) {
  if(!err) {
    console.log("Connected to 'mydb' database");
    var Post = require('./routes/posts')
      , post = new Post(db);

    // Set the routes
    app.get('/:org/posts', post.find);
    app.get('/:org/posts/:id', post.get);
    app.post('/:org/posts', post.add);
    app.put('/:org/posts/:id', post.update);
    app.delete('/:org/posts/:id', post.remove);

    // Fire up the server
    http.createServer(app).listen(app.get('port'), function () {
      console.log("Express server listening on port " + app.get('port'));
    });
  }
}); 
```

这是 post.js 文件中的逻辑：

```
var Post = function(db) {
  this.db = db;
};

Post.prototype.get = function(req, res) {
  var id = req.params.id;
  var org = req.params.org;
  var db = this.db;

  console.log('Retrieving post: ' + id + ' from org: ' + org);
  db.collection('ads', function(err, collection) {
    collection.findOne({'_id':new BSON.ObjectID(id), 'org':org}, function(err, item) {
      res.send(item);
    });
  });
};

Post.prototype.find = function(req, res) {
  var org = req.params.org;
  var db = this.db;

  console.log('Finding posts for org: ' + org);
  db.collection('posts', function(err, collection) {
    collection.find({'org':org}).toArray(function(err, items) {
      res.send(items);
    });
  });
};

Post.prototype.add = function(req, res) {
  var org = req.params.org;
  var post = req.body;
  var db = this.db;

  console.log('Adding post: ' + JSON.stringify(post) + ' for org: ' + org);
  db.collection('posts', function(err, collection) {
    collection.insert(post, {safe:true}, function(err, result) {
      if (err) {
        res.send({'error':'An error has occurred'});
      } else {
        console.log('Success: ' + JSON.stringify(result[0]));
        res.send(result[0]);
      }
    });
  });
};

Post.prototype.update = function(req, res) {
  var id = req.params.id;
  var org = req.params.org;
  var post = req.body;
  var db = this.db;

  delete post._id;
  console.log('Updating post: ' + id + ', org: ' + org);
  console.log(JSON.stringify(post));
  db.collection('posts', function(err, collection) {
    collection.update({'_id':new BSON.ObjectID(id)}, post, {safe:true}, function(err, result) {
      if (err) {
        console.log('Error updating post: ' + err);
        res.send({'error':'An error has occurred'});
      } else {
        console.log('' + result + ' document(s) updated');
        res.send(post);
      }
    });
  });
};

Post.prototype.remove = function(req, res) {
  var id = req.params.id;
  var org = req.params.org;
  var db = this.db;

  console.log('Deleting post: ' + id + ', org: ' + org);
  db.collection('posts', function(err, collection) {
    collection.remove({'_id':new BSON.ObjectID(id), 'org':org}, {safe:true}, function(err, result) {
      if (err) {
        res.send({'error':'An error has occurred - ' + err});
      } else {
        console.log('' + result + ' document(s) deleted');
        res.send(req.body);
      }
    });
  });
};

module.exports = Post; 
```

我认为 post 对象在从路由调用时会保留数据库引用以供使用，但出现以下错误：

```
TypeError: Cannot call method 'collection' of undefined
    at Post.find (../routes/posts.js:23:6) 
```

谁能指出我正确的方向？非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-10T17:34:02.500

Try this way. It became my favourite way of writing modules since I found this on Stack Overflow some time ago.

server.js:

```
...    
var Post = require('./routes/posts')(db);
... 
```

posts.js:

```
...
module.exports =function(db) {
        var module = {};

         module.get = function(req, res){
            ...
            /* db should be accessible here */

         }

         return module;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:58:43.587

当您正在注册的 Express 路由处理程序调用时，您的对象在您的方法中丢失`post`。您需要实例的方法，以便无论 Express 如何调用它们，都将是您的. 像这样：`this``Post``bind``post``this``post`

```
// Set the routes
app.get('/:org/posts', post.find.bind(post));
app.get('/:org/posts/:id', post.get.bind(post));
app.post('/:org/posts', post.add.bind(post));
app.put('/:org/posts/:id', post.update.bind(post));
app.delete('/:org/posts/:id', post.remove.bind(post)); 
```

# r - 在不重叠的多边形上绘制点文本标签

> ID：14149274
> 
> 赞同：1
> 
> 时间：2013-01-04T00:05:11.437
> 
> 标签：r, shapefile, maptools

在 R 的 maptools 包中使用 pointLabel 将为点绘制文本标签以避免文本重叠。

但是有没有办法避免/最小化文本标签与从形状文件创建的底层多边形的轮廓重叠？

例如，在绘制人口普查块的位置时，希望文本标签不要落在附近人口普查块边界的顶部等。

我使用的数据是从 2000 年人口普查块第 12A 版获得的，位于： [http ://www.nyc.gov/html/dcp/download/bytes/nycd_12aav.zip](http://www.nyc.gov/html/dcp/download/bytes/nycd_12aav.zip)

并解压成以下5个文件：

```
nycd.dbf
nycd.prj
nycd.shp
nycd.shp.xml
nycd.shx 
```

我打算从我自己的包含垂直列表的文本文件中标记各种块：

```
Zone 1
Zone 2 
Zone 3 
Zone 4
etc. 
```

我加载了以下库：

```
library(gpclib)
library(maptools)     
library(RColorBrewer) 
library(classInt)
library(maps) 
```

然后我尝试了：

```
zip=readShapePoly(file.choose()) 
```

并选择了`nycd.shp`上面的文件。然后：

```
plot(zip, col="lightgray", border="black", axes=TRUE, pbg="white") 
```

如果它不会与标签引起其他冲突，我更愿意给它上色：

```
zip@data$noise <- rnorm(nrow(zip@data))
colors=brewer.pal(9, "YlOrRd")
cols[is.na(cols)] <- "#D9D9D9"
brks=classIntervals(zip$noise, n=9, style="quantile")$brks
plot(zip, col=colors[findInterval(zip$noise, brks,all.inside=TRUE)], axes=F) 
```

我将如何按区域 1、区域 2 等标记各个区域，而无需/最小化标签从每个多边形之外延伸？我的问题意味着我知道如何用文本标记形状文件。我不知道如何用单词标记形状，只用 xy 值标记形状，或者用`pointLabel`. 如果文本包含在原始文件中，我可以使用该工具找出一些功能，`maps`因此可以使用`$name`扩展名进行访问。类似于我从[http://geography.uoregon.edu/GeogR/examples/maps_examples02.htm](http://geography.uoregon.edu/GeogR/examples/maps_examples02.htm)看到的代码：

```
# map of large cities
data(world.cities) # make the world cities location data set from the maps package available
# match the large cities with those in the database
m <- match(paste(tolower(as.character(cities$City)),tolower(as.character(cities$Country))),
    paste(tolower(world.cities$name),tolower(world.cities$country.etc)))

# assign the world.cities location information to the large cities
big.cities <- NULL
big.cities$name <- cities2$City
big.cities$long <- world.cities$long[m]
big.cities$lat <- world.cities$lat[m]
big.cities

# plot the map
map("world")
map.axes()
points(big.cities$long,big.cities$lat, col="blue")
text(big.cities$long, big.cities$lat, big.cities$name, col="red", cex=.5 
```

`$name`但不幸的是，这对我来说不是一个解决方案，因为我想使用的标签没有扩展。我只能说，直到我通过内部搜索和最近几天的在线谷歌搜索浏览了这个网站，我才发帖。从我所看到的情况来看，这个网站和这个社区可以帮助像我这样的初学者[相对于这里的人的非常先进的技能]。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:22:30.563

在没有示例的情况下，我将提供 plotrix 包中现成的内容

```
> require(plotrix)
> x<-rnorm(10)
> y<-rnorm(10)
> plot(x,y); thigmophobe.labels(x,y,labels=paste(round(x,2),round(y,2))) 
```

# asp.net - 索引（从零开始）必须大于或等于零且小于参数列表的大小

> ID：14149277
> 
> 赞同：1
> 
> 时间：2013-01-04T00:05:36.070
> 
> 标签：asp.net, sql-server-2008

我试图从 asp.net 向 sql 表添加行

**参数**sqlServer 是：

```
[id] smallint IDENTITY (1, 1) NOT NULL ,
[purchaseNum] int NULL,
[purchaseDate] DateTime  NULL,
[prodId] smallint NULL,
[amount] int NULL,
[price] decimal NULL,
[paidStatus] char NULL,
Primary key (id) 
```

)

而asp.net中的代码是：

```
 private String BuildInsertCommand(Sale sale)
{
    String command;

    StringBuilder sb = new StringBuilder();
    // use a string builder to create the dynamic string
    sb.AppendFormat("Values('{0}', '{1}' ,'{2}', '{3}', '{4}','{5}', '{6}')", Convert.ToInt16(sale.ProductId), Convert.ToDateTime(sale.PurchaseDate), Convert.ToInt16(sale.ProductId), Convert.ToDecimal(sale.AmountOfItems),sale.TotalPrice, Convert.ToChar(sale.PaidStatus));
    String prefix = "INSERT INTO sale " + "(purchaseNum, purchaseDate,prodId, amount, price,paidStatus) ";

    command = prefix + sb.ToString();

    return command;
} 
```

我不明白为什么会有错误消息，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:14:24.790

您定义了 7 个占位符

```
{0}', '{1}' ,'{2}', '{3}', '{4}','{5}', '{6}' 
```

你传递了 6 个参数

# sql - SQL - 解析字符串

> ID：14149280
> 
> 赞同：0
> 
> 时间：2013-01-04T00:05:49.957
> 
> 标签：sql, sql-server-2012

我有一个表，其中包含：

```
ID     Names 
1      Aaron, Betsy, Cindy 
2      Dillon, Eric, Fred 
```

我想解析 name 列并让它返回：

```
ID   Names 
1    Aaraon 
1    Betsy 
1    Cindy 
2    Dillon 
```

我在网上找到了几个解析名称列但不将 ID 绑定回它的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:11:25.300

像这样的东西怎么样：

```
;with cte (id, name, names) as
(
  select id,
    cast(left(names, charindex(',',names+',')-1) as varchar(50)) name,
         stuff(names, 1, charindex(',',names+','), '') names
  from yourtable
  union all
  select id,
    cast(left(names, charindex(',',names+',')-1) as varchar(50)) name,
    stuff(names, 1, charindex(',',names+','), '') names
  from cte
  where names > ''
) 
select id, name
from cte
order by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/edc32/2)

返回结果：

```
| ID |   NAME |
---------------
|  1 |  Aaron |
|  1 |  Betsy |
|  1 |  Cindy |
|  2 | Dillon |
|  2 |   Eric |
|  2 |   Fred | 
```

# authentication - Game Center 登录视图控制器仅在我使用已弃用的 authenticateWithCompletionHandler: 方法时出现

> ID：14149282
> 
> 赞同：2
> 
> 时间：2013-01-04T00:06:08.793
> 
> 标签：authentication, ios6, game-center, gamekit

我意识到以下方法在 iOS 6 中已被弃用，但它仍然有效。它只是发出不推荐使用的方法警告。从我的`AppDelegate.m`文件：

```
[[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:(^(NSError *error) {
            if (localPlayer.isAuthenticated) {
                self.gameCenterAuthenticationComplete = YES;

                if (! self.currentPlayerID || ! [self.currentPlayerID isEqualToString:localPlayer.playerID]) {
                    self.currentPlayerID = localPlayer.playerID;
                }
            } else {
                self.gameCenterAuthenticationComplete = NO;
            }
        })]; 
```

因此，我尝试改用此方法，这是在 iOS 6 中执行此操作的正确方法。我收到了要显示的警报，但无法`Game Center login view controller`显示：

```
[[GKLocalPlayer localPlayer] setAuthenticateHandler:(^(UIViewController *viewController, NSError *error) {
            if (localPlayer.isAuthenticated) {
                self.gameCenterAuthenticationComplete = YES;

                if (! self.currentPlayerID || ! [self.currentPlayerID isEqualToString:localPlayer.playerID]) {
                    self.currentPlayerID = localPlayer.playerID;
                    }
                } else {

                    UIAlertView *alertView = [[UIAlertView alloc]
                                              initWithTitle:@"NOT AUTHORIZED"
                                              message:@"This game requires Game Center to create matches."
                                              delegate:self
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
                    [alertView show];
                    self.gameCenterAuthenticationComplete = NO;
                }
        })];
    }
    return YES; 
```

第一种方法——不推荐使用的方式——`Game Center login view`在应用打开并检测到用户未登录到 GC 时立即显示。当用户登录时，它还会显示**“欢迎回来”**弹出框。

第二种方法——iOS 6 的方式——不显示`GC login screen`，正如我上面所说的，但如果用户已经通过 GC 应用程序登录到 GC ，它会显示**“欢迎回来” 。**

有关信息，我已经**在我的 iPhone 5 (6.0.1)、我的 iPad mini (6.0.2) 和模拟器 (6.0) 上进行了尝试。**

任何人都知道为什么会发生这种情况？`GC login view controller`如果这是我需要做的，我如何手动显示第二种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:37:57.733

您必须自己显示登录屏幕。对 setAuthenticationHandler 的调用设置屏幕并在“viewController”中为您提供指向它的指针。你就说

```
[self presentViewController:viewController]; 
```

这使您可以在游戏环境中最有意义的时候显示登录屏幕。

顺便说一句...您没有检查错误。错误很常见（例如，无法访问网络）。

# hashtable - Hashtbl.create 复杂性

> ID：14149283
> 
> 赞同：0
> 
> 时间：2013-01-04T00:06:10.453
> 
> 标签：hashtable, ocaml, complexity-theory

我在某处读到 Hashtbl.create 的复杂性是 O(nlogn)。

我觉得这很奇怪，因为 Hashtbl 是作为数组实现的，而 Array.create 的复杂度为 O(n)。所以我查看了源代码：

```
let rec power_2_above x n =
    if x >= n then x
    else if x * 2 > Sys.max_array_length then x
    else power_2_above (x * 2) n

let create ?(random = !randomized) initial_size =
    let s = power_2_above 16 initial_size in
    let seed = if random then Random.State.bits (Lazy.force prng) else 0 in
    { initial_size = s; size = 0; seed = seed; data = Array.make s Empty } 
```

在我看来，它首先找到*initial_size* 之上的最小 2 次方，然后从中创建一个数组。这听起来不像O（n logn）......我在想像O（2 **（logn +1））这样的东西。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:38:09.497

你的例子是什么`n`意思？在数组的情况下，我们说它的创建是`O(n)`数组`n`元素的数量。在哈希表的情况下，有一个初始化为 size 的底层数组`O(n)`，但`n`这里与哈希表的（未来）元素数量无关，仅与初始大小参数有关。

您可能总是传递大小`1`或您喜欢的任何常数，并且哈希表将不得不更频繁地调整大小，这是一个昂贵但摊销的操作：一个可笑的小初始大小只会影响您运行时间的常数乘法因子，而不是其算法复杂度。一个大得离谱的初始大小会在时间和内存上造成巨大的持续开销（并且可能在 32 位架构上失败，或者如果您没有足够的内存）。

# google-app-engine - 500 服务器错误现在出现在现有的 Google App Engine 网站上

> ID：14149284
> 
> 赞同：2
> 
> 时间：2013-01-04T00:06:20.263
> 
> 标签：google-app-engine

我有一个现有的 GAE 应用程序，我已经在 www.sachinrekhi.com 上运行了几个月，它刚刚开始返回以下 500 服务器错误。我没有对应用程序进行任何更改（56 天内没有进行部署）。我检查了日志，日志中没有最近的错误来帮助找到根本原因。App Engine 状态页面似乎表明目前一切正常，因此似乎不是一个整体的 GAE 问题。

似乎有 0 个正在运行的应用程序实例。但即使在我访问该站点之后，似乎也没有自动添加一个正在运行的实例。但是，我低于今天的速率限制，所以我不明白为什么实例不会自动启动。

我怎样才能找到问题的根源？

> 错误：服务器错误
> 
> 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息以及导致它的 > 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:40:56.083

我有同样的问题。还有 2 人报告了这个 [https://groups.google.com/forum/#!topic/google-appengine/g1VinggHeqU](https://groups.google.com/forum/#!topic/google-appengine/g1VinggHeqU) https://groups.google.com/forum/#!topic/google-appengine/4f9mcNiErnM Takashi谷歌回应了第二份报告。

更新：太平洋时间下午 16:37，我的实例开始备份，到目前为止一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T07:52:49.183

有关此问题的更多信息，请访问[http://code.google.com/status/appengine/detail/serving/2013/01/03#ae-trust-detail-helloworld-get-latency](http://code.google.com/status/appengine/detail/serving/2013/01/03#ae-trust-detail-helloworld-get-latency)。

# html - RSS提要到外部

> ID：14149286
> 
> 赞同：1
> 
> 时间：2013-01-04T00:06:31.910
> 
> 标签：html, rss

我正在寻找一种方法来设置我自己的 RSS 提要。我希望能够在我的网站上发布一些内容（锁定给我，或者通过记事本），但我也希望它能够将此提要发布到 facebook 和 twitter 上。

有没有一种新手方法来设置它，或者通过购买一些软件可以更好地解决这个问题？

我在设置我将通过笔记本更新的 rss 提要的错误尝试如下（尽管我暂时没有按预期工作）：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">

<channel>
    <title>First post title</title>
        <link>http://www.mysite.com</link>
    <description>I'm posting a lot of words to fill in this space for my first potential rss feed, let's hope it works!</description>
        <atom:link href="http://www.mysite.com" rel="self" type="application/rss+xml" />

<item>
    <title>Or maybe this is the first title</title>
    <link>http://www.mysite.com/page.html</link>
    <pubDate>Mon, 03 Dec 2012 16:50:32</pubDate>
    <guid isPermaLink="true">http://www.mysite.com/page.html</guid>
    <description>This is potentially the first post or perhaps the second post of the new feed being create.<description>
</item>

</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:16:02.450

您的 Feed 存在几个问题，即日期无效和商品描述缺少结束标记。尝试以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>

    <title>First post title</title>
    <link>http://www.mysite.com</link>
    <description>I'm posting a lot of words to fill in this space for my first potential rss feed, let's hope it works!</description>
    <atom:link href="http://www.mysite.com" rel="self" type="application/rss+xml" />

    <item>
      <title>Or maybe this is the first title</title>
      <link>http://www.mysite.com/page.html</link>
      <pubDate>Mon, 03 Dec 2012 16:50:32 GMT</pubDate>
      <guid isPermaLink="true">http://www.mysite.com/page.html</guid>
      <description>This is potentially the first post or perhaps the second post of the new feed being create.</description>
    </item>

  </channel>
</rss> 
```

如果您手动创建提要，则可以使用[W3C 提要验证器](http://validator.w3.org/appc/#validate_by_input)验证您的标记。

有很多方法可以自动执行此操作，但在不知道您当前如何生成网站内容的情况下无法提供推荐。

# php - 如何构建 PHP 队列系统

> ID：14149291
> 
> 赞同：10
> 
> 时间：2013-01-04T00:07:17.580
> 
> 标签：php, queue, system, daemon, queuing

我必须构建一个 PHP 队列系统，发现这篇[精彩的文章](https://web.archive.org/web/20160110135044/http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-1-understanding-the-project/) ~~`http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-1-understanding-the-project`~~，我用它来创建一个 PHP 队列系统，它非常易于设置和使用。

下面是 queue.php 的代码，从 shell（puTTy 或类似的）运行。

```
<?PHP 

//. set this constant to false if we ever need to debug
//. the application in a terminal.
define('QUEUESERVER_FORK', true);

//////// fork into a background process ////////
if(QUEUESERVER_FORK){    
    $pid = pcntl_fork(); 
    if($pid === -1) die('error: unable to fork.');    
    else if($pid) exit(0);        
    posix_setsid();    
    sleep(1);        
    ob_start();
}

$queue = array();

//////// setup our named pipe ////////
$pipefile = '/tmp/queueserver-input';

if(file_exists($pipefile))    
    if(!unlink($pipefile))         
        die('unable to remove stale file');

umask(0);

if(!posix_mkfifo($pipefile, 0666))    
    die('unable to create named pipe');

$pipe = fopen($pipefile,'r+');

if(!$pipe) die('unable to open the named pipe');

stream_set_blocking($pipe, false);

//////// process the queue ////////
while(1){    

    while($input = trim(fgets($pipe))){        
        stream_set_blocking($pipe, false);        
        $queue[] = $input;    
    }    

    $job = current($queue);    
    $jobkey = key($queue);    

    if($job){        
        echo 'processing job ', $job, PHP_EOL;                
        process($job);                
        next($queue);        
        unset($job, $queue[$jobkey]);            
    }else{        
        echo 'no jobs to do - waiting...', PHP_EOL;        
        stream_set_blocking($pipe, true);    
    }        

    if(QUEUESERVER_FORK) ob_clean();

}

?> 
```

最难的部分是让 pcntl 函数在我的服务器上工作。

我的问题是“当/如果服务器必须重新启动时，我如何让工作自动启动？”

* * *

正如评论中所指出的，编辑了断开的链接，并为后代指出了优秀的网络档案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T00:49:11.750

> 我的问题是“当/如果服务器必须重新启动时，我如何让工作自动启动？”

通过将其添加到服务器启动时启动的事物列表中。不幸的是，这样做的说明因操作系统和操作系统版本而异。您可能想要使用稍微跨平台的东西。我对[supervisor](http://supervisord.org/)很幸运，你可以在你选择的操作系统的包 repos 中找到它。

也就是说，你正在走上*疯狂*的道路。你正在做的事情以前已经做过了，更好的是，很棒的人。查看[Gearman](http://gearman.org/)工作队列系统和随附的[PECL 扩展](http://php.net/book.gearman)。碰巧，主管也很方便让您的 Gearman 工人活着。

# javascript - 通过组合单词列表 生成名称

> ID：14149294
> 
> 赞同：0
> 
> 时间：2013-01-04T00:07:39.550
> 
> 标签：javascript, jquery, json, forms, backbone.js

所以我想说的是有一些文本字段，用户可以在其中输入 2 或 3 个单词。提交后，拿这些词并尝试与它们进行各种组合。有点像企业名称生成器，您可以在其中键入一些单词，然后使用这些单词的组合为您提供企业名称。

想知道是否已经有一个用于此类事情的 jquery 插件？如果不是带有 javascript 的基本代码示例，可以向我发送正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:11:29.083

我有点怀疑您是否会为此类特定任务找到一个库。至于基本代码示例...

```
$('#yourForm').submit(function() {
    var words = $('#words').val().split();
    // do whatever logic you want to combine the words
}); 
```

# php - php curl - 浏览器与脚本

> ID：14149295
> 
> 赞同：-2
> 
> 时间：2013-01-04T00:07:47.703
> 
> 标签：php, browser, curl, web-crawler

所以我试图通过 PHP 中的 CURL 抓取一些网页。

当我通过 Web 浏览器与 php 脚本查看页面时，我遇到的是不同的结果。

也许他们实现了某种功能来在通过 PHP 脚本查看页面时重定向页面

任何帮助，将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:10:41.283

想象这真的会发生并不是没有道理的。网站所有者可能希望阻止页面抓取。您可以通过这样的 cURL 传递用户代理来测试这个理论（这是 iPhone 的 UserAgent）：

```
curl -A "Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5" http://www.apple.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:12:51.217

您可能会得到不同的结果，因为您加载的页面可能包含一些 ajax 内容并且是动态加载的。cURL 只能加载静态 html，仅此而已。初始负载之后的任何内容都会丢失。如果你想要一个类似体验网络抓取的浏览器，请考虑[PhantomJS](http://phantomjs.org/)

# c# - 如何检查我的应用程序内的另一个表中是否存在数组值？

> ID：14149296
> 
> 赞同：0
> 
> 时间：2013-01-04T00:07:54.310
> 
> 标签：c#, asp.net, asp.net-mvc, linq, entity-framework

我有以下课程：-

```
public class ContactsDetails
    {
        public IEnumerable<AaaUserContactInfo> Info { get; set; }
    } 
```

其中 AaaUserContactInfo 有两个外键引用其他表：-

```
public partial class AaaUserContactInfo
    {
        public long USER_ID { get; set; }
        public long CONTACTINFO_ID { get; set; }
        public string desc { get; set; }

        public virtual AaaContactInfo AaaContactInfo { get; set; }
        public virtual AaaUser AaaUser { get; set; }
    } 
```

现在我有以下类启动一个新的 ContactDetails 对象：-

```
public ActionResult CustomersDetails(long[] OrganizationIds)
{

    if (OrganizationIds == null)
    {
        return RedirectToAction("customer", new { isError = true });
    }
    else
    {

        var ContactsDetails = new ContactsDetails
        {
            Info = r.getcontactinfo(OrganizationIds)
        };
    }

        return View();    

} 
```

现在我需要返回所有的 AaaUserContactInfo 对象，这些对象的电子邮件 ID 包含组织名称的一部分，类似于：-

```
public IEnumerable<AaaUserContactInfo> getcontactinfo(long[] Organizationid)
        {
            var result = ((from uci in entities.AaaUserContactInfoes
                          join ci in entities.AaaContactInfoes on uci.CONTACTINFO_ID equals ci.CONTACTINFO_ID
                          where ci.EMAILID.ToString() == // contains any organization name in their emailIds ,, where i can get the organization name using sonthing similar to var orgname = entities.SDOrganizations.Where(a => a.ORG_ID == OrganizationIds[i]).FirstOrDefault().NAME;
                               select uci)) ;
            return result;
                                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:27:22.367

您可以尝试使用下一个查询吗？`FirstOrDefault()`如果在您的示例中返回 null，我不知道您想做什么。在我的情况下，不会抛出异常，但不会返回记录。请注意实施的细节以及它是否有效。

```
public IEnumerable<AaaUserContactInfo> getcontactinfo(long[] organizationIds)
{
    var organizationNames = entities.SDOrganizations
                           .Where(org => organizationIds.Contains(org.ORG_ID))
                           .Select(org=> org.Name);

    var result = from userContactInfo in entities.AaaUserContactInfoes
                 join contactInfo in entities.AaaContactInfoes on userContactInfo.CONTACTINFO_ID equals contactInfo.CONTACTINFO_ID

                 //check if EMAILID string has at least one organizationName as substring
                 where organizationNames.Any(orgName => contactInfo.EMAILID.ToString().Contains(orgName))
                 select userContactInfo;
    return result;
} 
```

**编辑：**更新了一个答案来处理基于`Organizationid`. `entities.AaaContactInfoes`如果`EMAILID`包含在至少一个组织的名称字段中，则被选中。

**注意：**我已经重命名了一些仅在方法范围内使用的参数，只是为了使代码更具可读性。

# c++ - Visual C++中的模板非类型成员函数指针参数推导错误

> ID：14149297
> 
> 赞同：1
> 
> 时间：2013-01-04T00:07:55.677
> 
> 标签：c++, templates, visual-c++

考虑以下代码：

```
class Foo {
public:
    void foo() {}
    void foo(double d) {}
};

template <typename Fun>
void bar_simple(Fun fun) {}

template <typename Base>
struct Wrapper {
    template <typename Type>
    static void bar(Type Base::* fun) {}
};

template <typename Type, typename Base>
void bar(Type Base::* fun) {}

int main() {
    //ok
    bar_simple<void(Foo::*)()>(&Foo::foo);
    bar_simple<void(Foo::*)(double)>(&Foo::foo);

    //ok
    Wrapper<Foo>::bar<void()>(&Foo::foo);
    Wrapper<Foo>::bar<void(double)>(&Foo::foo);

    //yields: error C2784: 'void bar(Type Base::* )' : 
    //could not deduce template argument for 'overloaded function type' 
    //from 'overloaded function type'; see declaration of 'bar'
    bar<void()>(&Foo::foo);
    bar<void(double)>(&Foo::foo);

    return 0;
} 
```

上面的代码在 gcc-4.3.4 和 comeau 4.3.10.1 上编译，在 Visual C++ 9.0 和 10.0 上都失败了。这似乎是一个错误；您是否知道 MS 的“错误跟踪器”中存在适当的错误报告？

# python - 禁止发布输出消息

> ID：14149298
> 
> 赞同：0
> 
> 时间：2013-01-04T00:07:59.287
> 
> 标签：python, boto

当 Boto 建立连接以执行 get_all_instances 或 connect_to_region 等操作时，有没有办法将“POST”消息抑制到控制台？例如

```
myReservations = myConnection.get_all_instances(filters={'tag-key' : tagKey}) 
```

这会弹出一个大的 POST 消息：

> 发送：'POST / HTTP/1.1\r\n主机：ec2.us-west-1.amazonaws.com\r\n接受编码：身份\r\n内容长度：264\r\n内容类型：应用程序/x -www-form-urlencoded；charset=UTF-8\r\n用户代理：Boto/2.0 (linux2)\r\n\r\nAWSAccessKeyId=ACCESS_KEY_VALUE&Action=DescribeInstances&Filter.1.Name=tag-key&Filter.1.Value.1=stage&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp =2013-01-03T23%3A46%3A40Z&版本=2011-01-01&签名=BLAHBLAHBLAHBLAH

我不想看到这条消息。也不是回复，也不是标题消息。

# python - UnboundLocalError：分配前引用的局部变量“文件”

> ID：14149300
> 
> 赞同：0
> 
> 时间：2013-01-04T00:08:14.637
> 
> 标签：python

Guyz，我在下面的代码中遇到了以下错误，你哪里出错了？任何清理建议也被接受

```
 for line in file(timedir + "/change_authors.txt"):
UnboundLocalError: local variable 'file' referenced before assignment 
```

下面的代码：

```
 import os,datetime
    import subprocess
    from subprocess import check_call,Popen, PIPE
    from shutil import copyfile,copy

def main ():
    #check_call("ssh -p 29418 review-droid.comp.com change query --commit-message status:open project:platform/vendor/qcom-proprietary/radio branch:master | grep -Po '(?<=(email|umber): )\S+' | xargs -n2")
    global timedir
    change=147441
    timedir=datetime.datetime.now().strftime('%Y-%m-%d_%H-%M-%S')
    #changeauthors = dict((int(x.split('/')[3]), x) for line in file(timedir + "/change_authors.txt"))
    for line in file(timedir + "/change_authors.txt"):
        changeauthors = dict(line.split()[0], line.split()[1]) 
    print changeauthors[change]
    try:
        os.makedirs(timedir)
    except OSError, e:
        if e.errno != 17:
            raise # This was not a "directory exist" error..
    with open(timedir + "/change_authors.txt", "wb") as file:
        check_call("ssh -p 29418 review-droid.comp.com "
            "change query --commit-message "
            "status:open project:platform/vendor/qcom-proprietary/radio branch:master |"
            "grep -Po '(?<=(email|umber): )\S+' |"
            "xargs -n2",
                shell=True,   # need shell due to the pipes
                stdout=file)  # redirect to a file

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:10:54.180

这与功能范围有关。由于您的 main 函数稍后定义了自己的文件变量，因此内置的文件函数被破坏了。因此，当您最初尝试调用它时，它会抛出此错误，因为它为自己保留了本地文件变量。如果您要将此代码从主函数中取出或在您的 with open() 语句中更改稍后对“文件”的引用，它应该可以工作。

但是我会做以下事情......

代替：

```
for line in file(timedir + "/change_authors.txt"): 
```

你应该使用：

```
for line in open(timedir + "/change_authors.txt", 'r'): 
```

open ( [) 函数](http://docs.python.org/2/library/functions.html#open)应该用于返回一个文件对象，并且比[file()](http://docs.python.org/2/library/functions.html#file)更可取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:11:01.950

您不应该使用`file()`打开文件系统上的文件：使用`open`（在导致错误的行）。

* * *

该文档[建议反对它](http://docs.python.org/2/library/functions.html#file)：

> 文件类型的构造函数，在文件对象部分进一步描述。构造函数的参数与下面描述的 open() 内置函数的参数相同。
> 
> 打开文件时，最好使用 open() 而不是直接调用此构造函数。file 更适合类型测试（例如，编写 isinstance(f, file)）。
> 
> 2.2 版中的新功能。

此外，它会在 Python 3 中消失。

# dust.js - 尘满 0.3.0.min.js 在哪里

> ID：14149309
> 
> 赞同：5
> 
> 时间：2013-01-04T00:09:08.523
> 
> 标签：dust.js

我刚刚开始研究linkedin`dustjs`框架，它是一个非常酷的库。我的问题可能听起来很傻，但我找不到`dust-full-0.3.0.min.js`要包含在我的页面中的文件！

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T23:00:36.423

对于dustjs的主项目，你可以从GitHub克隆它时在项目的dist文件夹中找到dust-full-0.3.0-min.js。

[https://github.com/akdubya/dustjs/tree/master/dist](https://github.com/akdubya/dustjs/tree/master/dist)

对于dustjs 的LinkedIn 分支，您可以在其dist 文件夹中找到dust-full-1.1.1.js。

[https://github.com/linkedin/dustjs/tree/master/dist](https://github.com/linkedin/dustjs/tree/master/dist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:33:53.087

我不知道你为什么要找那个版本。您可以在此处找到 1.1.1（未完成）版本：[https ://github.com/linkedin/dustjs/tree/master/dist](https://github.com/linkedin/dustjs/tree/master/dist)

我想要缩小版，你必须缩小它。您会在名为“min”的 make 文件中找到一个 make 任务。因此，如果您执行 make min，您将在 dist 文件夹中获得缩小版本。

旧版本：

[https://github.com/linkedin/dustjs/tags](https://github.com/linkedin/dustjs/tags)

# tomcat - 带有maven的tomcat7上的SSL

> ID：14149310
> 
> 赞同：-3
> 
> 时间：2013-01-04T00:09:29.580
> 
> 标签：tomcat, maven, ssl, tomcat7

类似于[这个](https://stackoverflow.com/questions/11633486/ssl-configuration-on-maven-tomcat-plugin)问题，但没有得到答复。我希望有一个分步指南，说明我需要更改哪些文件以及我的 maven web-app 项目中的哪些内容，以确保与我的 webapp 的所有连接都是通过 ssl 进行的。我在搜索中发现[了这个](http://dsc.sun.com/asiasouth/features/webapps_tomcat_ssl.html)，但它似乎写得很糟糕，从 2006 年开始，不包括 maven。您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:53:52.140

我想问一个问题以澄清，但我的代表还不允许 - 所以我会尽力回答。大多数情况下，我不清楚您是要使用 Tomcat 服务器还是 Maven 插件提供的嵌入式 Tomcat 实例。

首先，我通常将 http 重定向到 https 的设置是使用带有 mod_rewrite 规则的 Apache Web 服务器。

话虽如此，如果我正确理解您要完成的工作，是您想使用 Maven 动态配置您的 WEB-INF/web.xml 或任何其他适用于您的应用程序的上下文配置，作为构建配置的一部分Tomcat 将 http 页面请求重定向到 https。 [这](http://www.itworld.com/development/79351/how-configure-tomcat-always-require-https)是Tomcat中将http请求重定向到https的示例

我将如何解决这个问题是确保为您的 Tomcat 实例配置了 Maven settings.xml。例如：

```
<settings>
    <servers>
        <server>
            <id>myserver</id>
            <username>admin</username>
            <password>admin</password>
         </server>
</servers> 
```

如果要在 Maven-Tomcat 插件中使用嵌入式 Tomcat 服务器，则需要将 pom.xml 编辑为如下内容：

```
<build>
<finalName>sw</finalName>
<plugins>
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.0</version>
        <configuration>
                 <server>myserver</server>
                 <path>/sw</path>
        </configuration>
    </plugin>
</plugins> 
```

然后，在 pom.xml 的 maven-tomcat-plugin 设置中，您可以按照上面的示例配置指南，根据[此规范指定插件参数。](http://mojo.codehaus.org/tomcat-maven-plugin/run-mojo.html)我会指定参数，如`<contextFile>, <httpsPort>, <keystoreFile>, <keystorePass>, <tomcatWebXml>, and <warSourceDirectory>`

恐怕如果您想为现有的 Tomcat 服务器（不是嵌入式 Maven）动态配置 web.xml、context.xml 或 server.xml，您不应该使用 Maven 来执行此操作。相反，您应该提前编辑这些文件，然后相应地配置 tomcat:deploy 目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:15:08.663

您的第一个链接确实得到了回答；关于您的第二个链接，我没有看到任何写得不好或过时的东西；而 Maven 是一种构建技术，与运行时发生的事情无关，这由应用程序本身决定。如那篇文章所述，这完全取决于您在 web.xml 中添加的内容。

# oracle - 处理光标内的 LONG RAW 数据

> ID：14149314
> 
> 赞同：0
> 
> 时间：2013-01-04T00:09:59.310
> 
> 标签：oracle, plsql, cursor, blob

首先，我知道 LONG RAW 已被弃用/邪恶/糟糕/难以使用。我无法控制我的数据库架构。:)

我目前有一个从数据库中检索 LONG RAW 列并在客户端处理它的程序。这很好用，但我想做的是将此处理移动到服务器，这样我就不必在不同的客户端情况下将处理代码翻译成不同的语言。

所以我目前的查询只是

```
SELECT t.ID, t.POINTS
  FROM TBL_DATAPOINTS t
 WHERE ...etc 
```

然后`t.POINTS`由客户端处理。

我试图将其移至 Oracle 过程，但我不知道如何将 LONG RAW 列转换为我可以使用的东西 - 最好是 VARCHAR2。如果将其检索到游标中，如何处理每一行，然后将游标与处理后的数据一起返回？

我不能内联：

```
OPEN curData FOR
  SELECT t.ID, t.POINTS, fnProcessData(t.POINTS)
    FROM TBL_DATAPOINTS t
   WHERE ...etc 
```

由于将 LONG RAW 数据传递给函数的限制（我得到“非法使用 LONG 数据类型”）。

我在想也许我可以检索游标中的原始数据，然后遍历它并处理每一行，但我不知道如何（或是否）动态更改游标的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:12:29.693

这取决于您需要做的处理。如您所见，使用 LONG RAW，您的功能非常有限。如果可行，您可以使用 TO_LOB() 函数将您的行存储在临时表中，您的值将作为 BLOB 列访问（检查 DBMS_LOB 包）。

# javascript - 切换画布渲染 svg 上的可见性

> ID：14149315
> 
> 赞同：0
> 
> 时间：2013-01-04T00:09:59.193
> 
> 标签：javascript, canvas, svg, canvg

我正在使用 canvg 将大量 svg 渲染到画布上。我希望这些 svgs 基于复选框消失/出现 - 我已经将复选框位向下以及使 svgs 出现。但我的问题是如何让 svgs 消失？

这就是我渲染 svg 的方式：

```
if(cb.checked){
    //loops through an svg array
    if(svg has certain conditions)
        canvg('canvas1', svgs[i]);
 } 
```

现在，我想让我渲染的那些/一些（选定的）svg 在一些条件下消失。我一直无法让任何工作，你们有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:15:20.297

我认为您没有内置功能，如果您有 id 为什么不设置 canvas 元素的显示属性

```
var id = 'canvas1';
var canvId  = document.getElementById(id);
if(cb.checked){
    //loops through an svg array
        canvg(id, svgs[i]);
}
else{
   canvId.style.display = "none";
} 
```

# java - Java 2D 游戏，当只有一个应该移动时，我的两个矩形都在移动

> ID：14149316
> 
> 赞同：-3
> 
> 时间：2013-01-04T00:10:08.263
> 
> 标签：java, rectangles, 2d-games

我编写了一个简单的 Java 游戏，其中屏幕上有两个矩形，一个矩形应该移动，另一个应该保持静止，移动的矩形随着键盘箭头输入移动，可以向上、向下、向左或向右移动。我遇到的问题是，当只有一个矩形应该（rectOne）并且rectTwo应该保持静止时，两个矩形都在移动，我的变量设置如下所示：

```
 float buckyPositionX = 0;
    float buckyPositionY = 0;
    float shiftX = buckyPositionX + 320;//keeps user in the middle of the screem
    float shiftY = buckyPositionY + 160;//the numbers are half of the screen size
//my two rectangles are shown bellow 
java.awt.geom.Rectangle2D.Float rectOne = new Rectangle2D.Float(shiftX, shiftY,90,90);
java.awt.geom.Rectangle2D.Float rectTwo = new Rectangle2D.Float(500 + buckyPositionX, 330 + buckyPositionY, 210, 150); 
```

坐标变量 buckyPositionX 和 buckyPositionY 为 0,0，因此它们显示我屏幕的左两个角，坐标变量 shiftX 和 shiftY 显示屏幕中心的坐标，以便移动矩形始终居中。

包含所有游戏代码的 Play 类由几个方法组成，重要的是更新和渲染，更新处理矩形移动速度和键盘输入，以向您展示内部内容的示例更新类，这里是当他们按下键时的代码示例：

```
if(input.isKeyDown(Input.KEY_UP)){buckyPositionY += 2;} 
```

这适用于所有键盘箭头输入。接下来是 render 方法，它处理在屏幕和图形上绘制所有内容，该方法包括在屏幕上绘制先前使用变量编码的矩形。

因此，当我尝试使用键盘输入移动矩形时，我在屏幕上绘制了两个矩形，这两个矩形同时一起移动，我认为我如何设置矩形坐标并尝试播放存在问题例如，从它们中删除 +buckyPositionX 和 +buckyPositionY 但会出现同样的问题，如果您对可以解决此问题的方法有任何想法，请告诉我。

先感谢您。

编辑1：

这是我要求的游戏课的完整代码：

```
 imports are here

    public class Play extends BasicGameState{

    Animation bucky, movingUp, movingDown, movingLeft, movingRight;
    Image worldMap;
    int[] duration = {200, 200};//how long frame stays up for
    float buckyPositionX = 0;
    float buckyPositionY = 0;
    float shiftX = buckyPositionX + 320;//keeps user in the middle of the screem
    float shiftY = buckyPositionY + 160;//the numbers are half of the screen size

    java.awt.geom.Rectangle2D.Float rectOne = new Rectangle2D.Float(shiftX, shiftY,90,90);
    java.awt.geom.Rectangle2D.Float rectTwo = new Rectangle2D.Float(500 + buckyPositionX, 330 + buckyPositionY, 210, 150);

    public Play(int state){
    }   
    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
          worldMap = new Image("res/world.png");
          Image[] walkUp = {new Image("res/b.png"), new Image("res/b.png")}; //these are the images to be used in the "walkUp" animation
          Image[] walkDown = {new Image("res/f.png"), new Image("res/f.png")};
          Image[] walkLeft = {new Image("res/l.png"), new Image("res/l.png")};
          Image[] walkRight = {new Image("res/r.png"), new Image("res/r.png")};

    movingUp = new Animation(walkUp, duration, false);
    movingDown = new Animation(walkDown, duration, false);  
    movingLeft = new Animation(walkLeft, duration, false);  
    movingRight = new Animation(walkRight, duration, false);
    bucky = movingDown;//facing screen initially on startup
    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
    worldMap.draw(buckyPositionX, buckyPositionY);//position 0,0
    bucky.draw(shiftX, shiftY);//makes him appear at center of map

    g.fillRect((float)rectOne.getX(), (float)rectOne.getY(), (float)rectOne.getWidth(), (float)rectOne.getHeight());
    g.fillRect((float)rectTwo.getX(), (float)rectTwo.getY(), (float)rectTwo.getWidth(), (float)rectTwo.getHeight());
}

    public void update(GameContainer gc, StateBasedGame sbg, int delta)throws SlickException{
    Input input = gc.getInput();

    //up
    if(input.isKeyDown(Input.KEY_UP)){
        bucky = movingUp;//changes the image to his back
        buckyPositionY += 2;;//increase the Y coordinates of bucky (move him up)
        if(buckyPositionY>162){//if I reach the top 
            buckyPositionY -= 2;//stops any further movement in that direction
        }
    }

    //down
    if(input.isKeyDown(Input.KEY_DOWN)){
        bucky = movingDown;
        buckyPositionY -= 2;
        if(buckyPositionY<-550){
            buckyPositionY += 2;//basically change the direction if + make -
    }}
    //left
    if(input.isKeyDown(Input.KEY_LEFT)){
        bucky = movingLeft;
        buckyPositionX += 2;
        if(buckyPositionX>324){
            buckyPositionX -= 2;//delta * .1f
    }}
    //right
    if(input.isKeyDown(Input.KEY_RIGHT)){
        bucky = movingRight;
        buckyPositionX -= 2;
        if(buckyPositionX<-776){
            buckyPositionX += 2;
    }}}   

    public int getID(){
        return 1;
    }} 
```

回答问题：

我在我的 rectTwo 变量中使用变量 buckyPositionX 和 buckyPositionY 的原因是，当我尝试使用 g.fillRect 函数绘制它时，这些输入一切正常，rectOne 移动并且 RectTwo 保持静止，但是当我从通过说 g.fillRect(rectOne.X,rectOne.Y...) 我得到了这个问题，两个矩形一起移动，这很奇怪，因为坐标和大小与使用 g 绘制时完全相同。 fillRect(500 + buckyPositionX, 330 + buckyPositionY, 210, 150) 与 rectOne 相同。我将尝试使用一些代码使其更清晰：

如果我在我的变量中使用它：

```
java.awt.geom.Rectangle2D.Float rectOne = new Rectangle2D.Float(shiftX, shiftY,90,90);
        java.awt.geom.Rectangle2D.Float rectTwo = new Rectangle2D.Float(500 + buckyPositionX, 330 + buckyPositionY, 210, 150); 
```

这在我的渲染方法中：

```
 g.fillRect((float)rectOne.getX(), (float)rectOne.getY(), (float)rectOne.getWidth(), (float)rectOne.getHeight());
        g.fillRect((float)rectTwo.getX(), (float)rectTwo.getY(), (float)rectTwo.getWidth(), (float)rectTwo.getHeight()); 
```

rectOne 和 rectTwo 这两个矩形一起移动。

但是如果我在我的渲染方法中使用它而不设置任何变量：

```
g.fillRect(shiftX, shiftY,90,90)
g.fillRect(500 + buckyPositionX, 330 + buckyPositionY, 210, 150) 
```

尽管我的碰撞不适用于这种方法（这就是我要修复它的原因），但一切都可以视觉上工作，矩形都出现在屏幕上并且 rectOne 移动而 rectTwo 保持静止。

我将发表一篇新文章更详细地解释我的问题，因为这个问题已经开始变得过于拥挤和偏离主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:20:44.473

这是一个循环吗？

```
float buckyPositionX = 0;
float buckyPositionY = 0;
float **shiftX** = buckyPositionX + 320;//keeps user in the middle of the screem
float **shiftY** = buckyPositionY + 160;//the numbers are half of the screen size
//my two rectangles are shown bellow 
java.awt.geom.Rectangle2D.Float rectOne = new Rectangle2D.Float(shiftX, shiftY,90,90);
*java.awt.geom.Rectangle2D.Float rectTwo = new Rectangle2D.Float(500 + buckyPositionX, 330 + buckyPositionY, 210, 150);*
if(input.isKeyDown(Input.KEY_UP)){**buckyPositionY** += 2;} 
```

如果 rectTwo 保持不动，为什么要使用 buckyPositiony？- 你正在用 keyup 更新它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:32:49.220

我想这个问题与[此](https://stackoverflow.com/questions/14148353/java-how-to-drawing-rectangle-variables-on-my-screen/14148378#14148378)有关？

无论如何，但是 rectangles 依赖于**buckyPositionY**所以通过更新这个变量，你实际上是在更新两个矩形。

试试这样的东西。最好您只需将坐标更新为**rectOne**但据我所知， **Rectangle2D没有****setX**方法

 **```
if (input.isKeyDown(Input.KEY_UP)){
  rectOne = new Rectangle2D.Float((float)rectOne.getX(), (float)rectOne.getY()+2, (float)90, (float)90);
} 
```**

# python - 如何使用自定义 CellRendererText 创建 Gtk Iconview

> ID：14149324
> 
> 赞同：3
> 
> 时间：2013-01-04T00:10:55.460
> 
> 标签：python, gtk3, gio

我正在研究如何在 Python（2.7 或更高版本）中创建一个 GtkIconView，该 GtkIconView 具有用于 IconView 的文本元素的自定义 CellRendererText。

这样做的原因是我需要在创建图标视图期间覆盖某些属性。

环顾四周，我发现了这个 PyGtk for TreeViews 的例子——类似，但我需要一个 IconView 的 Introspection 例子

*   [突出显示行时设置 cellrenderertext 前景色](https://stackoverflow.com/questions/3629386/gtk-set-cellrenderertext-foreground-color-when-a-row-is-highlighted)

我查看了 C++ 文档，但我真的不明白如何将 cellrenderertext 分配给 IconView。

*   [http://developer.gnome.org/gtk3/stable/GtkIconView.html](http://developer.gnome.org/gtk3/stable/GtkIconView.html)

我再次找到了一些 python 文档来为树视图创建自定义单元渲染器

*   [http://www.scribd.com/doc/99516129/41/CellRendererText](http://www.scribd.com/doc/99516129/41/CellRendererText)

谁能指出我正确的方向如何修改 IconView 的示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-17T12:34:12.570

官方的做法是使用`set_cell_data_func`.

但是，在 IconView 的上下文中，它与 TreeView 的情况不同（您只需将自定义呈现函数传递给 TreeViewColumn 实例）。

这也让我感到困惑，直到我在 GTK3 Ruby 绑定中找到[了这个块](https://github.com/ruby-gnome2/ruby-gnome2/blob/master/gtk3/sample/gtk-demo/iconview_edit.rb)，其中 Kouhei Sutou 演示了使用 GtkCellLayout 接口在 IconView 中设置单元格渲染器。

**NOTE**: If you previously had setup your columns using setters such as `iconView.text_column = TEXT_IDX`, then you should remove them once your custom renderer is in place or you will see duplicate text labels.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:42:10.327

`Gtk.IconView`继承自`Gtk.CellLayout`，因此您可以使用单元格布局功能来替换当前的文本渲染器。类似的东西：

```
renderers = iconview.get_cells()
iconview.clear()
for r in renderers:
    if not isinstance(r, Gtk.TextRenderer):
        iconview.pack_start(r)
    else:
        iconview.pack_start(my_custom_renderer) 
```

我不知道这是否有效，但这就是我的做法。

# validation - 淘汰赛验证可以将 validateObservable 扩展到针对整个模型进行验证吗？

> ID：14149327
> 
> 赞同：2
> 
> 时间：2013-01-04T00:11:02.450
> 
> 标签：validation, mvvm, knockout.js, knockout-validation

我正在将 Knockout 用于绑定到具有一定深度/复杂性的 ViewModel 的视图。

为了验证我的 ViewModel，我需要计算整个 VM 树（遍历和比较后代）。我希望利用淘汰验证插件@ [https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)创建一些任意自定义验证规则并报告任何错误。

[我使用 KO 计算的 observable @ http://jsfiddle.net/drdamour/ZrVZ7/](http://jsfiddle.net/drdamour/ZrVZ7/)设置了一种可能的方法。验证规则是确保没有 2 个 SubCollections 具有相同的值。这是有效的，但它没有使用 Knockout-Validation，我的规则现在在我的计算 observable 中实现，这似乎是错误的。

[我的问题与Knockout ValidationvalidatedObservable 组错误](https://stackoverflow.com/questions/13364788/knockout-validation-validatedobservable-group-error)非常相似，但我发现发现的解决方案（托管在[http://jsfiddle.net/CGuW2/6/](http://jsfiddle.net/CGuW2/6/)上）不太理想：

```
var viewModel = {
    num1: ko.observable("50").extend({ number: true, min: 0, max: 100 }),
    num2: ko.observable("50").extend({ number: true, min: 0, max: 100 })
};

viewModel.isValidSum = ko.validatedObservable({
                            num1: viewModel.num1,
                            num2: viewModel.num2
                        }).extend({ mustEqual: 100 });

ko.applyBindings(viewModel); 
```

因为它通过将经过验证的 self 作为属性添加到自身 (isValidSum) 来复制 ViewModel。我试图消除这种冗余@ [http://jsfiddle.net/drdamour/5B8s4/](http://jsfiddle.net/drdamour/5B8s4/)但视图无法绑定到已验证的Observable：

```
var viewModel = {
    num1: ko.observable("50").extend({ number: true, min: 0, max: 100 }),
    num2: ko.observable("50").extend({ number: true, min: 0, max: 100 })
};

var vm = ko.validatedObservable(viewModel).extend({ mustEqual: 101 });

ko.applyBindings(vm); 
```

这可能是 KO 或 KO-Validation 的错误，或者我可能只是做错了。

所以问题是：在淘汰赛中确定 VM 是否对跨 VM 的多个属性和层进行评估的条件有效的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T00:42:06.880

我通过采用不同的方法通过`grouping`我想在模型上验证的可观察量来验证我的模型，从而避免了这种马车盘旋：

这是一些用于设置我的阶段的初始化代码（您可以在[此处](https://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration)查看所有可用选项：

```
 ko.validation.init({
        registerExtenders: true,
        parseInputAttributes: true,
        grouping: { deep: true, observable: false }
    }); 
```

然后我会像这样设置你的模型：

```
function testModel() {
    var self = this;
    self.num1 = ko.observable(100).extend({ number: true, min: 0, max: 100 });
    self.num2 = ko.observable(50).extend({ number: true, min: 0, max: 100 });

    self.sum = ko.observable(150).extend({ number: true, equal: 100 });
    self.num1.subscribe(function () {
        self.sum(self.num1() + self.num2());
    });
    self.num2.subscribe(function () {
        self.sum(self.num1() + self.num2());
    });

    self.errors = ko.validation.group(this);
}

var viewModel = new ViewModel();

//somewhere later where we are testing the model
if (viewModel.sum.isValid())
    //YAY!!!
else
   //this will update the UI as you have configured it to show the error messages
   viewModel.errors.showAllMessages(); 
```

using`ko.validation.group(model)`将导致验证遍历模型中的所有可观察对象（多深，取决于初始设置，您会注意到我制作了我`grouping: { deep: true }`的，这意味着如果此模型中有带有可观察对象的子模型，它也会验证这些。

如果您想隔离不同的验证用例，您不仅可以对整个模型执行此操作，还可以对其中的部分执行此操作。

**编辑：**

这是一种可以满足您的要求的方法。订阅所有要针对某个条件进行验证的可观察对象并不理想，但您唯一的选择是将它们简单地分组到一个已验证的Observable 中，这意味着您的数据最有可能首选结构。

# jquery - jQuery - 结束“连续”动画/功能

> ID：14149330
> 
> 赞同：0
> 
> 时间：2013-01-04T00:11:44.720
> 
> 标签：jquery, animation, loops

我有一个函数设置来连续循环动画，如下所示：

```
$(document).ready(function() {
    function boxGlow() {
        $("#not_bg").animate({opacity:0}, 1000);
        $("#not_bg").animate({opacity:1}, 1000, boxGlow);    
    }
}); 
```

该片段按预期工作，但我正在寻找最有效的方法来取消外部 div 时的循环（例如`#stopbutton`，出于测试目的）。因此，当用户单击 div 时`#stopbutton`，该`boxGlow()`功能将停止，并且不透明度重置为 0。非常感谢任何有关从何处开始的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:18:01.380

一个非常简单的方法是设置一个标志。

```
$(document).ready(function() {

    var stop = false;

    $('#stopbutton').on('click', function() {
          stop = true;
    });

    function boxGlow() {

        if ( stop ) return;

        $("#not_bg").animate({opacity:0}, 1000);
        $("#not_bg").animate({opacity:1}, 1000, boxGlow);    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:18:07.090

我认为最好使用 javascript 计时事件来做到这一点：[JavaScript Timing Events](http://www.w3schools.com/js/js_timing.asp)
像这样：

```
 $(function()
    {
       var intv = setInterval(function()
       {
          $("#not_bg").animate({opacity:0}, 1000);
          $("#not_bg").animate({opacity:1}, 1000);
       },2000);
       $('#stop').click(function()
       {
          window.clearInterval(intv);
       });
    }}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T00:23:15.197

当点击事件发生时，您可以向 div 添加一个类：

```
$(document).ready(function() {
    $('#stopbutton').click(function(){
        $('#not_bg').stop().addClass('done').css({opacity:0});
    });
    (function boxGlow() {
        if(!this || !$(this).is('.done')){
            $("#not_bg").animate({opacity:0}, 1000);
            $("#not_bg").animate({opacity:1}, 1000, boxGlow);
        }
    })();
}); 
```

这是一个演示：http: [//jsfiddle.net/N42rn/](http://jsfiddle.net/N42rn/)

# c++ - typedef + enum 的奇怪用法

> ID：14149331
> 
> 赞同：2
> 
> 时间：2013-01-04T00:11:46.427
> 
> 标签：c++

> **可能重复：**
> [typedef 声明中的 typedef-name 是可选的吗？](https://stackoverflow.com/questions/6399898/is-the-typedef-name-optional-in-a-typedef-declaration)

我在 Visual Studio 2008 上，我看到了这个：

```
typedef enum testfoo
{
    enum1,
    enum2,
    enum3
}; 
```

通常以这种方式使用 typedef 的 C 风格的方式需要一个额外的部分（名称）：

```
typedef enum testfoo
{
    enum1,
    enum2,
    enum3
} testfoo_name; 
```

前一个例子在做什么？奇怪的是它可以编译，但不确定它实际定义的是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:19:01.430

第一个例子只是一个无用的`typedef`. 我相信它在语法上是合法的，但它没有为类型定义提供名称，所以它相当于：

```
enum testfoo { enum1, enum2, enum3 ); 
```

在 C 中，这会创建一个名为`enum testfoo`;的类型。使用 typedef 来允许将类型称为 just 是很常见的（但不是必需的）`testfoo`。

在 C++ 中，即使没有 typedef ，类型也可以称为`enum testfoo`或。`testfoo`

我怀疑有人对规则感到困惑，看到类型可以（在 C++ 中）称为`testfoo`，并错误地认为这是因为`typedef`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:15:35.220

它们是有区别的。第二个为第一个创建别名，`enum`但第一个没有。第`typedef`一个示例中的实际并没有做任何事情。这在 GCC 中给了我一个警告，所以我怀疑你可以把它拿出来。

在 C 中，结构和枚举很常见，`typedef`以避免使用结构或枚举名称进行实例化。例如：

```
struct A {};

struct A a; 
```

为了缩短这一点， a`typedef`可以解决问题：

```
typedef struct {} A; 
```

这在 C++ 中不再需要，所以我推导出我对他对这个概念的误解的假设。或者作者忘了给它起个名字……

使用类或结构时也会发生同样的事情：

```
typedef struct A {}; // simply a class-declaration, generates a warning 
```

# ios - 应用程序中的本机设置

> ID：14149332
> 
> 赞同：0
> 
> 时间：2013-01-04T00:11:55.847
> 
> 标签：ios, settings

是否可以在应用程序中使用实际的或类似于设置包的东西？我的意思是设置您要在本机设置应用程序中使用的捆绑包，并使用单独的捆绑包来处理应用程序中的更具体的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:48:11.977

InAppSettingsKit 允许您将设置直接包含在您的应用程序中。在这里查看：

[http://www.cocoacontrols.com/platforms/ios/controls/inappsettingskit](http://www.cocoacontrols.com/platforms/ios/controls/inappsettingskit)

# php - 不同文件的自定义网址（下载+嵌入）

> ID：14149333
> 
> 赞同：1
> 
> 时间：2013-01-04T00:11:56.093
> 
> 标签：php

假设我有一张图片`http://.../images/1.jpg`，我不希望人们看到这个网址，而是让他们去`http://.../view.php?f=aADSdR`或类似的东西。我也想知道如何下载这样的`http://.../download.php?f=aASfasd`

视频 mp4 文件也必须做同样的事情。

如果有人可以提供一些文章（如果知道），我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:17:00.367

我能想到的最简单的方法是，在数据库中存储一个对应于图像 ( `view.php?f=HASH`) 的哈希值。表格中将是图像的绝对路径和 web 路径，其中一个将用于在`view.php`ie中显示图像`<img src="{$web_path_from_db}">`，以及可用于下载文件的绝对路径。[这是一个教程来做到这一点](http://www.finalwebsites.com/forums/topic/php-file-download)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:16:43.610

只需在文件中使用`mod_rewrite`规则`.htaccess`：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^view.php?f=(.*)$ images/$1 [L]
RewriteRule ^download.php?f=(.*)$ images/$1 [L] 
```

# mod-rewrite - htaccess 短网址

> ID：14149339
> 
> 赞同：1
> 
> 时间：2013-01-04T00:12:33.520
> 
> 标签：mod-rewrite

> **可能重复：**
> [.htaccess 重写 URL 显示不正确？](https://stackoverflow.com/questions/9594579/htaccess-rewrite-url-not-showing-correctly)

我试图用 htaccess 在我的 url 中隐藏动态 php，现在我完全是使用 htaccess 的初学者，从我到目前为止所学到的知识中，我设法做到了这一点：

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule ^home/$ http://www.something.com/index.php?p=home [NC,L]
RewriteRule ^home$ http://www.something.com/index.php?p=home [NC,L] 
```

现在发生的事情是当我写的时候让我们说：

www.something.com/home

或者

www.something.com/home/

我重定向到[http://www.something.com/index.php?p=home](http://www.something.com/index.php?p=home)但我想要发生的也是被视为 www.something.com/home 的 url，而不是显示完整路径用户，有人可以告诉我我做错了什么吗？

提前致谢 ：））

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T00:21:31.367

如果您在重写规则中写入完整的 url - apache 将执行重定向（因为不可能透明地将请求重写到不同的服务器 - 即使完整的 url 对应于当前服务器）。

## 最简单的解决方案

对于问题中的示例，您可以简单地从重写规则中删除域名：

```
RewriteRule ^home/?$ /index.php?p=home [QSA,NC,L] 
```

这将匹配 url`/home`或`/home/`并将它们重写为`/index.php?p=home`

## 处理任何网址

一个更灵活的想法是重写所有 url，例如：

```
RewriteRule ^(.*)$ index.php?p=$1 [QSA,L] 
```

它将重写当前 url 的任何内容作为 get 参数“p”。

一个完整的示例，它不会重写对真实文件（/css/foo.css 或任何其他资产）的请求：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?p=$1 [QSA,L] 
```

## QSA 标志的用途

两个示例中使用的标志将任何现有的 get 参数与正在重写[`qsa`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)的新 get arg 合并。`p`所以例如

```
 /foo?bar=zum 
```

变成

```
/index.php?p=/foo&bar=zum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T00:22:31.763

发生这种情况是因为您输入了完整的网址。尝试这个：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^home/$ index.php?p=home [NC,L]
RewriteRule ^home$ index.php?p=home [NC,L] 
```

# javascript - 在没有命名空间的情况下将单例体引用到单例体，但是如何？

> ID：14149345
> 
> 赞同：1
> 
> 时间：2013-01-04T00:13:18.550
> 
> 标签：javascript, object, singleton, return

我的目标是将函数引用到单例/对象体中！

#

这个结果是我的目标：

```
var singletonObj_1 = (function () {
      return {
               custom_fn1 : function(){...},
               custom_fn2 : function(){...}    <<-- *But Imported
      }

})(); 
```

所以导入后，我可以调用 singletonObj_1.custom_fn2(); 但是 custom_fn2 来自另一个函数体，如何将它导入到上面的样子？

#

第二个函数“custom_fn2”未在上层函数 singletonObj_1 中声明！它应该被导入，所以结果如上所示！

singletonObj_1 的实际外观如何：

```
var singletonObj_1 = (function () {
      return {
               custom_fn1 : function(){...},
               *Here I need any kind of reference to singletonObj_2.custom_fn1 to look like above
      }

})();

var singletonObj_2 = function () {
      return {
               custom_fn1 : function(){...} *This function shall be exported into singletonObj_1
      }

} 
```

#

我没有成功的尝试：

```
var singletonObj_1 = (function () {
      return {
               custom_fn1 : function(){...},

               (function(){
                    singletonObj_2(); // just to return custom_fn1 : function(){...} 
                })();
      }

})(); 
```

当然，我不能以这种方式在单例对象中声明自调用函数！希望我能表达我的问题！

提前感谢很多

真诚的 okyo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:55:52.577

```
var exported_fn = function () { ... };

var singletonObj_1 = (function () {
      return {
               custom_fn1 : function(){...},
               custom_fn2 : exported_fn
      };

})();

var singletonObj_2 = function () {
      return {
               custom_fn1 : exported_fn
      };
}; 
```

# c# - 我应该将什么值传递给 TimeZoneInfo.FindSystemTimeZoneById(String)？

> ID：14149346
> 
> 赞同：111
> 
> 时间：2013-01-04T00:13:26.420
> 
> 标签：c#, .net, timezone

我想使用该[`TimeZoneInfo.FindSystemTimeZoneById(String)`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.findsystemtimezonebyid.aspx)方法，但我不知道使用什么值作为输入？

我在哪里可以获得`id`required for的值列表`FindSystemTimeZoneById`？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2014-06-27T21:03:36.233

这是 Windows 8 中的列表（我从 Windows 注册表中提取）

```
阿富汗标准时间
阿拉斯加标准时间
阿拉斯加标准时间\动态 DST
阿拉伯标准时间
阿拉伯标准时间
阿拉伯标准时间
阿拉伯标准时间\动态 DST
阿根廷标准时间
阿根廷标准时间\动态 DST
大西洋标准时间
大西洋标准时间\动态 DST
澳大利亚中部标准时间
澳大利亚东部标准时间
澳大利亚东部标准时间\动态 DST
阿塞拜疆标准时间
亚速尔群岛标准时间
亚速尔群岛标准时间\动态 DST
巴伊亚标准时间
巴伊亚标准时间\动态 DST
孟加拉国标准时间
孟加拉国标准时间\动态 DST
加拿大中部标准时间
佛得角标准时间
高加索标准时间
高加索标准时间\动态 DST
岑。澳大利亚标准时间
岑。澳大利亚标准时间\动态 DST
中美洲标准时间
中亚标准时间
巴西中部标准时间
巴西中部标准时间\动态 DST
中欧标准时间
中欧标准时间
中太平洋标准时间
中部标准时间
中部标准时间\动态 DST
中部标准时间（墨西哥）
中国标准时间
日期线标准时间
E. 非洲标准时间
E. 澳大利亚标准时间
E. 欧洲标准时间
E. 南美标准时间
E. 南美标准时间\动态 DST
东部标准时间
东部标准时间\动态 DST
埃及标准时间
埃及标准时间\动态 DST
叶卡捷琳堡标准时间
叶卡捷琳堡标准时间\动态 DST
斐济标准时间
斐济标准时间\动态 DST
FLE 标准时间
格鲁吉亚标准时间
GMT 标准时间
格陵兰标准时间
格陵兰标准时间\动态 DST
格林威治标准时间
GTB 标准时间
夏威夷标准时间
印度标准时间
伊朗标准时间
伊朗标准时间\动态 DST
以色列标准时间
以色列标准时间\动态 DST
约旦标准时间
约旦标准时间\动态 DST
加里宁格勒标准时间
加里宁格勒标准时间\动态 DST
堪察加标准时间
韩国标准时间
利比亚标准时间
利比亚标准时间\动态 DST
马加丹标准时间
马加丹标准时间\动态 DST
毛里求斯标准时间
毛里求斯标准时间\动态 DST
大西洋中部标准时间
中东标准时间
中东标准时间\动态 DST
蒙得维的亚标准时间
蒙得维的亚标准时间\动态 DST
摩洛哥标准时间
摩洛哥标准时间\动态 DST
山区标准时间
山地标准时间\动态 DST
山区标准时间（墨西哥）
缅甸标准时间
北中亚标准时间
N. 中亚标准时间\动态 DST
纳米比亚标准时间
纳米比亚标准时间\动态 DST
尼泊尔标准时间
新西兰标准时间
新西兰标准时间\动态 DST
纽芬兰标准时间
纽芬兰标准时间\动态 DST
北亚东部标准时间
北亚东部标准时间\动态 DST
北亚标准时间
北亚标准时间\动态 DST
太平洋 SA 标准时间
太平洋 SA 标准时间\动态 DST
太平洋标准时间
太平洋标准时间\动态 DST
太平洋标准时间（墨西哥）
巴基斯坦标准时间
巴基斯坦标准时间\动态 DST
巴拉圭标准时间
巴拉圭标准时间\动态 DST
浪漫标准时间
俄罗斯标准时间
俄罗斯标准时间\动态 DST
SA东部标准时间
南太平洋标准时间
SA 西部标准时间
萨摩亚标准时间
萨摩亚标准时间\动态 DST
东南亚标准时间
新加坡标准时间
南非标准时间
斯里兰卡标准时间
叙利亚标准时间
叙利亚标准时间\动态 DST
台北标准时间
塔斯马尼亚标准时间
塔斯马尼亚标准时间\动态 DST
东京标准时间
汤加标准时间
土耳其标准时间
土耳其标准时间\动态 DST
乌兰巴托标准时间
美国东部标准时间
美国东部标准时间\动态 DST
美国山区标准时间
世界标准时间
UTC+12
UTC-02
UTC-11
委内瑞拉标准时间
委内瑞拉标准时间\动态 DST
符拉迪沃斯托克标准时间
符拉迪沃斯托克标准时间\动态 DST
西澳大利亚标准时间
西澳大利亚标准时间\动态 DST
W. 中非标准时间
W. 欧洲标准时间
西亚标准时间
西太平洋标准时间
雅库茨克标准时间
雅库茨克标准时间\动态 DST

```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-01-04T00:18:10.437

`TimeZoneInfo`您可以从类中的静态列表中获取它们

```
var infos = TimeZoneInfo.GetSystemTimeZones();
foreach (var info in infos)
{
    Console.WriteLine(info.Id);
} 
```

例子：

```
 var tzInfo = TimeZoneInfo.FindSystemTimeZoneById("New Zealand Standard Time"); 
```

或者，如果您只想要 DJ KRAZE 建议的时区 ID 列表

```
 var timeZoneIds = TimeZoneInfo.GetSystemTimeZones().Select(t => t.Id); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-04-07T16:57:02.230

可用的时区是：

```
Console.WriteLine(string.Join("\n",TimeZoneInfo.GetSystemTimeZones().Select(x=>x.Id))); 
```

结果：

```
Dateline Standard Time
UTC-11
Aleutian Standard Time
Hawaiian Standard Time
Marquesas Standard Time
Alaskan Standard Time
UTC-09
Pacific Standard Time (Mexico)
UTC-08
Pacific Standard Time
US Mountain Standard Time
Mountain Standard Time (Mexico)
Mountain Standard Time
Central America Standard Time
Central Standard Time
Easter Island Standard Time
Central Standard Time (Mexico)
Canada Central Standard Time
SA Pacific Standard Time
Eastern Standard Time (Mexico)
Eastern Standard Time
Haiti Standard Time
Cuba Standard Time
US Eastern Standard Time
Paraguay Standard Time
Atlantic Standard Time
Venezuela Standard Time
Central Brazilian Standard Time
SA Western Standard Time
Pacific SA Standard Time
Turks And Caicos Standard Time
Newfoundland Standard Time
Tocantins Standard Time
E. South America Standard Time
SA Eastern Standard Time
Argentina Standard Time
Greenland Standard Time
Montevideo Standard Time
Saint Pierre Standard Time
Bahia Standard Time
UTC-02
Mid-Atlantic Standard Time
Azores Standard Time
Cape Verde Standard Time
UTC
Morocco Standard Time
GMT Standard Time
Greenwich Standard Time
W. Europe Standard Time
Central Europe Standard Time
Romance Standard Time
Central European Standard Time
W. Central Africa Standard Time
Namibia Standard Time
Jordan Standard Time
GTB Standard Time
Middle East Standard Time
Egypt Standard Time
E. Europe Standard Time
Syria Standard Time
West Bank Standard Time
South Africa Standard Time
FLE Standard Time
Israel Standard Time
Kaliningrad Standard Time
Libya Standard Time
Arabic Standard Time
Turkey Standard Time
Arab Standard Time
Belarus Standard Time
Russian Standard Time
E. Africa Standard Time
Iran Standard Time
Arabian Standard Time
Astrakhan Standard Time
Azerbaijan Standard Time
Russia Time Zone 3
Mauritius Standard Time
Georgian Standard Time
Caucasus Standard Time
Afghanistan Standard Time
West Asia Standard Time
Ekaterinburg Standard Time
Pakistan Standard Time
India Standard Time
Sri Lanka Standard Time
Nepal Standard Time
Central Asia Standard Time
Bangladesh Standard Time
Omsk Standard Time
Myanmar Standard Time
SE Asia Standard Time
Altai Standard Time
W. Mongolia Standard Time
North Asia Standard Time
N. Central Asia Standard Time
Tomsk Standard Time
China Standard Time
North Asia East Standard Time
Singapore Standard Time
W. Australia Standard Time
Taipei Standard Time
Ulaanbaatar Standard Time
North Korea Standard Time
Aus Central W. Standard Time
Transbaikal Standard Time
Tokyo Standard Time
Korea Standard Time
Yakutsk Standard Time
Cen. Australia Standard Time
AUS Central Standard Time
E. Australia Standard Time
AUS Eastern Standard Time
West Pacific Standard Time
Tasmania Standard Time
Vladivostok Standard Time
Lord Howe Standard Time
Bougainville Standard Time
Russia Time Zone 10
Magadan Standard Time
Norfolk Standard Time
Sakhalin Standard Time
Central Pacific Standard Time
Russia Time Zone 11
New Zealand Standard Time
UTC+12
Fiji Standard Time
Kamchatka Standard Time
Chatham Islands Standard Time
Tonga Standard Time
Samoa Standard Time
Line Islands Standard Time 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-04T00:15:02.640

看一下`TimeZoneInfo`被调用方法上的静态[`TimeZoneInfo.GetSystemTimeZones()`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.getsystemtimezones.aspx)方法。

`TimeZoneInfo`这将从注册表中返回您操作系统上所有 's 的列表。它们都存储在：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones`.

例如，“都柏林、爱丁堡、里斯本、伦敦”时区的“GMT 标准时间”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-29T22:32:14.593

要获取最新的时区列表，请使用 Windows 中的 tzutil：

> tzutil /l

在这里，您可以在 MSDN 中找到 Microsoft 的官方时区 ID 列表： [https ://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/default-time-zones](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/default-time-zones)

> ```
>  ID      |   Time zone name
> ----------|------------------------
>   0       |   Dateline Standard Time
>   110     |   UTC-11
>   200     |   Hawaiian Standard Time
>   300     |   Alaskan Standard Time
>   400     |   Pacific Standard Time
>   410     |   Pacific Standard Time (Mexico)
>   500     |   Mountain Standard Time
>   510     |   Mountain Standard Time (Mexico)
>   520     |   US Mountain Standard Time
>   600     |   Canada Central Standard Time
>   610     |   Central America Standard Time
>   620     |   Central Standard Time
>   630     |   Central Standard Time (Mexico)
>   700     |   Eastern Standard Time
>   710     |   SA Pacific Standard Time
>   720     |   US Eastern Standard Time
>   840     |   Venezuela Standard Time
>   800     |   Atlantic Standard Time
>   810     |   Central Brazilian Standard Time
>   820     |   Pacific SA Standard Time
>   830     |   SA Western Standard Time
>   850     |   Paraguay Standard Time
>   900     |   Newfoundland Standard Time
>   910     |   E. South America Standard Time
>   920     |   Greenland Standard Time
>   930     |   Montevideo Standard Time
>   940     |   SA Eastern Standard Time
>   950     |   Argentina Standard Time
>   1000    |   Mid-Atlantic Standard Time
>   1010    |   UTC-2
>   1100    |   Azores Standard Time
>   1110    |   Cabo Verde Standard Time
>   1200    |   GMT Standard Time
>   1210    |   Greenwich Standard Time
>   1220    |   Morocco Standard Time
>   1230    |   UTC
>   1300    |   Central Europe Standard Time
>   1310    |   Central European Standard Time
>   1320    |   Romance Standard Time
>   1330    |   W. Central Africa Standard Time
>   1340    |   W. Europe Standard Time
>   1350    |   Namibia Standard Time
>   1400    |   E. Europe Standard Time
>   1410    |   Egypt Standard Time
>   1420    |   FLE Standard Time
>   1430    |   GTB Standard Time
>   1440    |   Israel Standard Time
>   1450    |   Jordan Standard Time
>   1460    |   Middle East Standard Time
>   1470    |   South Africa Standard Time
>   1480    |   Syria Standard Time
>   1490    |   Turkey Standard Time
>   1500    |   Arab Standard Time
>   1510    |   Arabic Standard Time
>   1520    |   E. Africa Standard Time
>   1530    |   Kaliningrad Standard Time
>   1550    |   Iran Standard Time
>   1540    |   Russian Standard Time
>   1600    |   Arabian Standard Time
>   1610    |   Azerbaijan Standard Time
>   1620    |   Caucasus Standard Time
>   1640    |   Georgian Standard Time
>   1650    |   Mauritius Standard Time
>   1630    |   Afghanistan Standard Time
>   1710    |   West Asia Standard Time
>   1750    |   Pakistan Standard Time
>   1720    |   India Standard Time
>   1730    |   Sri Lanka Standard Time
>   1740    |   Nepal Standard Time
>   1700    |   Ekaterinburg Standard Time
>   1800    |   Central Asia Standard Time
>   1830    |   Bangladesh Standard Time
>   1820    |   Myanmar Standard Time
>   1810    |   N. Central Asia Standard Time
>   1910    |   SE Asia Standard Time
>   1900    |   North Asia Standard Time
>   2000    |   China Standard Time
>   2020    |   Singapore Standard Time
>   2030    |   Taipei Standard Time
>   2040    |   W. Australia Standard Time
>   2050    |   Ulaanbaatar Standard Time
>   2010    |   North Asia East Standard Time
>   2100    |   Korea Standard Time
>   2110    |   Tokyo Standard Time
>   2130    |   AUS Central Standard Time
>   2140    |   Cen. Australia Standard Time
>   2120    |   Yakutsk Standard Time
>   2200    |   AUS Eastern Standard Time
>   2210    |   E. Australia Standard Time
>   2220    |   Tasmania Standard Time
>   2240    |   West Pacific Standard Time
>   2230    |   Vladivostok Standard Time
>   2300    |   Central Pacific Standard Time
>   2310    |   Magadan Standard Time
>   2400    |   Fiji Standard Time
>   2410    |   New Zealand Standard Time
>   2430    |   UTC+12
>   2500    |   Tonga Standard Time
>   2510    |   Samoa Standard Time 
> ```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-07-06T16:46:14.780

最新的 Microsoft 文档及其列表可在[https://support.microsoft.com/en-gb/help/973627/microsoft-time-zone-index-values找到](https://support.microsoft.com/en-gb/help/973627/microsoft-time-zone-index-values)

时区 ID 字符串目前如下（如果您想查看每个时区 ID 的十六进制索引的实际时差，请单击上面的链接）：

> 萨摩亚标准时间
> 
> 阿拉斯加标准时间
> 
> 山区标准时间
> 
> 美国山区标准时间
> 
> 加拿大中部标准时间
> 
> 中美洲标准时间
> 
> 美国东部标准时间
> 
> 大西洋标准时间
> 
> 太平洋 SA 标准时间
> 
> E. 南美标准时间
> 
> 格陵兰标准时间
> 
> 亚速尔群岛标准时间
> 
> GMT 标准时间
> 
> 中欧标准时间
> 
> 浪漫标准时间
> 
> W. 中非标准时间
> 
> 埃及标准时间
> 
> GTB 标准时间
> 
> 南非标准时间
> 
> 阿拉伯标准时间
> 
> 阿拉伯标准时间
> 
> 阿拉伯标准时间
> 
> 阿富汗过渡伊斯兰国标准时间
> 
> 西亚标准时间
> 
> 尼泊尔标准时间
> 
> 斯里兰卡标准时间
> 
> 缅甸标准时间
> 
> 北亚标准时间
> 
> 新加坡标准时间
> 
> 西澳大利亚标准时间
> 
> 韩国标准时间
> 
> 雅库茨克标准时间
> 
> 岑。澳大利亚标准时间
> 
> E. 澳大利亚标准时间
> 
> 符拉迪沃斯托克标准时间
> 
> 中太平洋标准时间
> 
> 新西兰标准时间
> 
> 阿塞拜疆标准时间 
> 
> 约旦标准时间
> 
> 山区标准时间（墨西哥）
> 
> 纳米比亚标准时间
> 
> 巴西中部标准时间
> 
> 亚美尼亚标准时间
> 
> 阿根廷标准时间
> 
> 巴基斯坦标准时间
> 
> 世界标准时间
> 
> 堪察加标准时间

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-12T09:47:46.413

就像其他人所说的，您可以通过迭代`TimeZoneInfo.GetSystemTimeZones()`找到要使用的字符串来找到列表。也就是说，如果您只有关于时差的信息（如 GMT+9 或 GMT-10 ）并且在迭代时区后找不到您的时区，您可能希望查看以下 url 以查看您需要哪个时区 [https:/ /msdn.microsoft.com/en-US/library/ms912391(v=winembedded.11).aspx](https://msdn.microsoft.com/en-US/library/ms912391(v=winembedded.11).aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-11T19:56:36.763

或者你可以这样传递`TimeZoneInfo.Local.Id`：

```
TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById(TimeZoneInfo.Local.Id);
DateTime localDateTime = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, tzi); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-12T16:32:05.070

您可以在下面使用该代码

```
using System;

namespace TimeZoneIds
{
    class Program
    {
        static void Main(string[] args)
        {
            foreach (TimeZoneInfo z in TimeZoneInfo.GetSystemTimeZones())
                Console.WriteLine(z.Id);
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-21T12:31:21.493

> 我应该将什么值传递给 TimeZoneInfo.FindSystemTimeZoneById(String)？

答案是视情况而定。Windows 和 MacOS/Linux 对这些有不同的 id。

> 我在哪里可以获得 FindSystemTimeZoneById 所需的 id 值列表？

我认为 MacOS/Linux 使用 IANA id，你可以在[NodaTime 文档](https://nodatime.org/TimeZones)中找到它，或者我猜你可以在[IANA 官方文档](https://www.iana.org/time-zones)的某个地方找到它们。对于 Windows id，请查看[Microsoft 时区索引值](https://docs.microsoft.com/en-us/previous-versions/windows/embedded/ms912391(v=winembedded.11)?redirectedfrom=MSDN)

### 例子

在我的 Macbook 上运行以下代码很好`var europeSthlm = TimeZoneInfo.FindSystemTimeZoneById("Europe/Stockholm");`

而跑步`var wEuropeStdTime = TimeZoneInfo.FindSystemTimeZoneById("W. Europe Standard Time");`会抛出一个`System.TimeZoneNotFoundException: The time zone ID 'W. Europe Standard Time' was not found on the local computer.`

### 进一步阅读

在这里，您可以看到如何使用 NodaTime 检索时区列表，以及如何分别在 Windows 和 Mac 上获取 id：[https ://stackoverflow.com/a/19697827/2874896](https://stackoverflow.com/a/19697827/2874896)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-17T10:35:56.980

一种从一个时区转换到另一个时区的方法：

```
DateTime n = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(datetime, "sourceTimeZoneId", "destinationTimeZoneId"); 
```

我在 Win10 上，我`Time Zone Id`列出`time difference`：

```
Dateline Standard Time                  -12
UTC-11                                  -11
Hawaiian Standard Time                  -10
Aleutian Standard Time                  -9
Marquesas Standard Time                 -9
UTC-09                                  -9
Alaskan Standard Time                   -8
UTC-08                                  -8
Pacific Standard Time (Mexico)          -7
Pacific Standard Time                   -7
US Mountain Standard Time               -7
Mountain Standard Time (Mexico)         -6
Mountain Standard Time                  -6
Central America Standard Time           -6
Easter Island Standard Time             -6
Canada Central Standard Time            -6
Central Standard Time                   -5
Central Standard Time (Mexico)          -5
SA Pacific Standard Time                -5
Eastern Standard Time (Mexico)          -5
Eastern Standard Time                   -4
Haiti Standard Time                     -4
Cuba Standard Time                      -4
US Eastern Standard Time                -4
Turks And Caicos Standard Time          -4
Paraguay Standard Time                  -4
Venezuela Standard Time                 -4
Central Brazilian Standard Time         -4
SA Western Standard Time                -4
Pacific SA Standard Time                -4
Atlantic Standard Time                  -3
Tocantins Standard Time                 -3
E. South America Standard Time          -3
SA Eastern Standard Time                -3
Argentina Standard Time                 -3
Montevideo Standard Time                -3
Magallanes Standard Time                -3
Bahia Standard Time                     -3
Newfoundland Standard Time              -2
Greenland Standard Time                 -2
Saint Pierre Standard Time              -2
UTC-02                                  -2
Mid-Atlantic Standard Time              -1
Cape Verde Standard Time                -1
Azores Standard Time                    0
UTC                                     0
Greenwich Standard Time                 0
Sao Tome Standard Time                  0
GMT Standard Time                       +1
Morocco Standard Time                   +1
W. Central Africa Standard Time         +1
W. Europe Standard Time                 +2
Central Europe Standard Time            +2
Romance Standard Time                   +2
Central European Standard Time          +2
Egypt Standard Time                     +2
South Africa Standard Time              +2
Kaliningrad Standard Time               +2
Sudan Standard Time                     +2
Libya Standard Time                     +2
Namibia Standard Time                   +2
Jordan Standard Time                    +3
GTB Standard Time                       +3
Middle East Standard Time               +3
E. Europe Standard Time                 +3
Syria Standard Time                     +3
West Bank Standard Time                 +3
FLE Standard Time                       +3
Israel Standard Time                    +3
Arabic Standard Time                    +3
Turkey Standard Time                    +3
Arab Standard Time                      +3
Belarus Standard Time                   +3
Russian Standard Time                   +3
E. Africa Standard Time                 +3
Iran Standard Time                      +4
Arabian Standard Time                   +4
Astrakhan Standard Time                 +4
Azerbaijan Standard Time                +4
Russia Time Zone 3                      +4
Mauritius Standard Time                 +4
Saratov Standard Time                   +4
Georgian Standard Time                  +4
Volgograd Standard Time                 +4
Caucasus Standard Time                  +4
Afghanistan Standard Time               +4
West Asia Standard Time                 +5
Ekaterinburg Standard Time              +5
Pakistan Standard Time                  +5
Qyzylorda Standard Time                 +5
India Standard Time                     +5
Sri Lanka Standard Time                 +5
Nepal Standard Time                     +5
Central Asia Standard Time              +6
Bangladesh Standard Time                +6
Omsk Standard Time                      +6
Myanmar Standard Time                   +6
SE Asia Standard Time                   +7
Altai Standard Time                     +7
W. Mongolia Standard Time               +7
North Asia Standard Time                +7
N. Central Asia Standard Time           +7
Tomsk Standard Time                     +7
China Standard Time                     +8
North Asia East Standard Time           +8
Singapore Standard Time                 +8
W. Australia Standard Time              +8
Taipei Standard Time                    +8
Ulaanbaatar Standard Time               +8
Aus Central W. Standard Time            +8
Transbaikal Standard Time               +9
Tokyo Standard Time                     +9
North Korea Standard Time               +9
Korea Standard Time                     +9
Yakutsk Standard Time                   +9
Cen. Australia Standard Time            +9
AUS Central Standard Time               +9
E. Australia Standard Time              +10
AUS Eastern Standard Time               +10
West Pacific Standard Time              +10
Tasmania Standard Time                  +10
Vladivostok Standard Time               +10
Lord Howe Standard Time                 +10
Bougainville Standard Time              +11
Russia Time Zone 10                     +11
Magadan Standard Time                   +11
Norfolk Standard Time                   +11
Sakhalin Standard Time                  +11
Central Pacific Standard Time           +11
Russia Time Zone 11                     +12
New Zealand Standard Time               +12
UTC+12                                  +12
Fiji Standard Time                      +12
Chatham Islands Standard Time           +12
Kamchatka Standard Time                 +13
UTC+13                                  +13
Tonga Standard Time                     +13
Samoa Standard Time                     +13
Line Islands Standard Time              +14 
```

获取时差的代码：

```
DateTime dt = Convert.ToDateTime("2020-04-17T09:00:00");
Dictionary<string, int> zoneHour = new Dictionary<string, int>();
var infos = TimeZoneInfo.GetSystemTimeZones();
foreach (var info in infos)
{
    zoneHour.Add(info.Id,
        TimeZoneInfo.ConvertTimeBySystemTimeZoneId(dt, "UTC", info.Id).Subtract(dt).Hours
    );
}

var zoneHourOrder = zoneHour.OrderBy(z => z.Value);
foreach (var kv in zoneHourOrder)
{
    Console.WriteLine(kv.Key.PadRight(40) + (kv.Value > 0 ? "+" + kv.Value : kv.Value.ToString()));
} 
```

# javascript - 通过在 for 循环中解析字符串来委派事件

> ID：14149349
> 
> 赞同：4
> 
> 时间：2013-01-04T00:13:47.790
> 
> 标签：javascript, jquery

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

最近我一直在研究 JavaScript 的一些更复杂的方面，其中之一就是设计模式和委托。

我创建了一个包含 2 个键的对象，然后我对其进行解析并将一个事件附加到主体上。

我的问题是，对于 for 循环的任何迭代，似乎都附加了最后一个函数。我很确定这是通过引用/范围界定（感谢 Shmiddty）问题的副本，但如果我错了，请纠正我。

无论如何要解决我的问题以正确附加 2 个事件而不进行太多更改？（因为这是一个复杂的应用程序，我已将其简化为手头的问题）。

在[jsfiddle 示例](http://jsfiddle.net/TXjjn/2/)中，请查看警报消息`.div1`与`.div2`

```
var foo = {
    init: function() {

        var i = 0,
            keys = []
            self = this;

        for (var key in this) {
            keys.push(key);
        }

        for (i; i < keys.length; i++) {
            if (keys[i].match(/^on/i)) {
                var delegateFunc = keys[i].split(' | '),
                    event = delegateFunc[2],
                    selector = delegateFunc[1],
                    keyName = keys[i];

                console.log('###');
                console.log( 'selector: ' + selector );
                console.log( 'event: ' + event );
                console.log( 'function: ' + self[keyName] );

                $('body').on(event, selector, function(ev) {
                    self[keyName](ev, ev.target);
                });
            }
        }

    },

    'on | .div1 | click': function(ev, el) {
        alert('you clicked 1');
    },

    'on | .div2 | click': function(ev, el) {
        alert('you clicked 2');
    }
}

$(function() { foo.init(); });​ 
```

需要更多信息吗？给我留言。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:21:23.583

```
 $('body').on(event, selector, function(ev) {
                self[keyName](ev, ev.target);
            }); 
```

将其替换为以下代码：

```
 (function(keyName) {
                $('body').on(event, selector, function(ev) {
                    self[keyName](ev, ev.target);
                });
            })(keyName); 
```

原因是 JavaScript 没有块作用域。所以你`var keyName`在每个循环中都是同一个变量，你的回调函数的闭包绑定了变量，而不是它当时的值。因此，一旦循环完成，变量将是*所有*回调函数中的最后一个值。

`keyName`通过添加以作为参数的立即执行的函数，您可以创建一个*新*变量（函数参数），从而避免该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:21:14.853

**经典的关闭问题..**

将您的 for 循环放在[立即调用的函数表达式中](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

```
for (i; i < keys.length; i++) {
            (function(lockedIndex) {
                if (keys[lockedIndex].match(/^on/i)) {
                    var delegateFunc = keys[lockedIndex].split(' | '),
                        event = delegateFunc[2],
                        selector = delegateFunc[1],
                        keyName = keys[lockedIndex];

                    console.log('###');
                    console.log('selector: ' + selector);
                    console.log('event: ' + event);
                    console.log('function: ' + self[keyName]);

                    $('body').on(event, selector, function(ev) {
                        self[keyName](ev, ev.target);
                    });
                }
            })(i)
        } 
```

**[检查小提琴](http://jsfiddle.net/TXjjn/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T00:21:44.990

`keyName`在您的事件处理程序被触发时已经过时，您需要将其包装在一个新的范围内：

```
(function(key) {
    $('body').on(event, selector, function(ev) {
        self[key](ev, ev.target);
    });
})(keyName); 
```

# mysql - 简化 R 中的数据库访问

> ID：14149350
> 
> 赞同：3
> 
> 时间：2013-01-04T00:13:48.760
> 
> 标签：mysql, r, rmysql

有没有一种简单的方法可以通过 Web 界面访问 MySQL DB 中的数据？是否有将程序化 HTTP 查询转换为 CSV 文件的包？

我想让我实验室中的其他人可以使用 R 脚本，但是这些脚本依赖于来自 mySQL 数据库的数据。RMySQL的入门门槛对于一般Windows机器来说是比较高的【下载安装mysql客户端访问，安装RTools包，安装RMySQL源码，测试一下，解决不可避免的问题。】

是否有将程序化 HTTP 查询转换为 CSV 文件的包？这样，我可以简单地将 URL 嵌入到我的 R 脚本中来获取数据，而无需修改所有客户端。

看起来[DBSlayer](http://code.nytimes.com/projects/dbslayer)是一种选择。我想过使用 PHPMyAdmin 但这似乎真的是为了管理任务，而不是数据库代理。

有什么常见的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:03:49.893

只是为了将这个问题从未回答的堆中移出，我将把我的评论转换为答案。

您可以在 Linux 机器上运行 RStudio，并让用户通过 Web 界面进行访问。它强制用户使用 RStudio 界面，但它是一个非常好的界面，所以也许这还不错。

您也可以运行`RODBC`而不是`RMySQL`. 设置 ODBC 驱动程序可能很痛苦，但不如在 Windows 机器上从源代码编译程序那么困难。

# vb.net - 获取父ShapeContainer的子LineShape

> ID：14149353
> 
> 赞同：1
> 
> 时间：2013-01-04T00:14:10.377
> 
> 标签：vb.net, visual-studio-2010, line

当我创建一对 LineShape 和 ShapeContainer 对象时，我使用以下代码将 ShapeContainer 设为父对象：

```
 myLS.Parent = mySC
 Me.Controls.Add(mySC) 
```

接下来，每当光标位置接近 LineShape 的末尾时，我需要更改线条的颜色，并开始执行以下代码：

```
 Dim ClickedShapeContainerName As String = sender.Name
        Dim siSCId As Integer
        Dim myLS As New LineShape
        Dim mySC As New ShapeContainer
        'get ID of clicked ShapeContainer
        For Each c As Control In Me.Controls
            If c.Name = ClickedShapeContainerName Then
                mySC = CObj(c)
                If mySC.HasChildren Then
                    myLS =???????
                    siSCId = 1
                End If
                Exit For
            End If
        Next

        If siSCId > -1 Then
            If MouseIsNearBy(myLS.EndPoint) Then
                myLS.BorderColor = Color.Red
                NearLineEndPoint = True
            End If
        End If

Private Function MouseIsNearBy(ByVal testPoint As Point) As Boolean
        testPoint = Me.PointToScreen(testPoint)
        Return Math.Abs(testPoint.X - MousePosition.X) <= HitTestDelta AndAlso Math.Abs(testPoint.Y - MousePosition.Y) <= HitTestDelta
End Function 
```

但是，我无法确定如何获取父 ShapeContainer 的子 LineShape，以便我可以将我的新 LineShape（“myLS”）设置为等于找到的一个子节点。mySC 已成功设置为单击的 ShapeContainer，但我无法提升子 LineShape。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:24:24.317

您必须遍历 ShapeContainer 的 Shape 集合，而不是 Controls：

```
If Me.Controls.ContainsKey(clickedShapeContainerName) Then
  mySC = DirectCast(Me.Controls(clickedShapeContainerName), ShapeContainer)
  For Each ls As LineShape In mySC.Shapes
    If MouseIsNearBy(ls.EndPoint) Then
      ls.BorderColor = Color.Red
    End If
  Next
End If 
```

您也可以只订阅 LineShape 的 MouseEnter 和 MouseLeave 事件。

此外，[ShapeContainer 类](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.shapecontainer.aspx)做了一个特别说明：

> 注意不要为每个表单或容器创建多个 ShapeContainer；这样做可能会引入意外行为。如果您在编写代码以编程方式创建后将设计时线条或形状控件添加到窗体或容器，则应修改该代码以使用设计器创建的 ShapeContainer。

# css - 图片鼠标悬停上的文字？

> ID：14149360
> 
> 赞同：31
> 
> 时间：2013-01-04T00:15:07.893
> 
> 标签：css, image, text, mouseover

当鼠标移到图像上时，我试图让一个小框出现在图像的左下角。在框内将有一个指向不同页面的链接。

[这里](http://theme-frsch2.tumblr.com/)有点类似于我想要的，但是盒子要小一些并且不连接到图像的边框。

我已经尝试了一切，但找不到答案。而且我不想使用工具提示，更不用说我没有任何 javascript 知识这一事实。我真的希望这是 CSS。

我正在尝试使用的图像也可以在[这里找到。](http://silentthemes.tumblr.com)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-04T00:47:27.740

这是使用`:hover`CSS3 中的伪元素。

**HTML：**

```
<div id="wrapper">
    <img src="http://placehold.it/300x200" class="hover" />
    <p class="text">text</p>
</div>​ 
```

**CSS：**

```
#wrapper .text {
position:relative;
bottom:30px;
left:0px;
visibility:hidden;
}

#wrapper:hover .text {
visibility:visible;
} 
```

[在这里](http://jsfiddle.net/3Pghz/3/)演示。

* * *

相反，这是一种使用 jquery 实现相同结果的方法：

**HTML：**

```
<div id="wrapper">
    <img src="http://placehold.it/300x200" class="hover" />
    <p class="text">text</p>
</div>​ 
```

**CSS：**

```
#wrapper p {
position:relative;
bottom:30px;
left:0px;
visibility:hidden;
} 
```

**jQuery代码：**

```
$('.hover').mouseover(function() {
  $('.text').css("visibility","visible");
});

$('.hover').mouseout(function() {
  $('.text').css("visibility","hidden");
}); 
```

您可以将 jquery 代码放在您想要的位置，在 HTML 页面的**正文**中，然后您需要在**头部**包含 jquery 库，如下所示：

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head> 
```

[你可以在这里](http://jsfiddle.net/RetMp/1/)看到演示。

当您想在您的网站上使用它时，只需更改`<img src />`值，您就可以添加多个图像和标题，只需复制我使用的格式：insert image with`class="hover"`和 p with`class="text"`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-04T00:37:20.350

这是使用 css 执行此操作的一种方法

**HTML**

```
<div class="imageWrapper">
    <img src="http://lorempixel.com/300/300/" alt="" />
    <a href="http://google.com" class="cornerLink">Link</a>
</div>​ 
```

**CSS**

```
.imageWrapper {
    position: relative;
    width: 300px;
    height: 300px;
}
.imageWrapper img {
    display: block;
}
.imageWrapper .cornerLink {
    opacity: 0;
    position: absolute;
    bottom: 0px;
    left: 0px;
    right: 0px;
    padding: 2px 0px;
    color: #ffffff;
    background: #000000;
    text-decoration: none;
    text-align: center;
    -webkit-transition: opacity 500ms;
    -moz-transition: opacity 500ms;
    -o-transition: opacity 500ms;
    transition: opacity 500ms;

}
.imageWrapper:hover .cornerLink {
    opacity: 0.8;
} 
```

**[演示](http://jsfiddle.net/UqdVp/1/)**

或者，如果您只想将其放在左下角：

**[演示](http://jsfiddle.net/UqdVp/2/)**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-08-08T13:18:59.403

如果您将来来自更远的地方，您现在可以使用 div 标签上的 title 属性来提供工具提示：

```
<div title="Tooltip text">Hover over me</div> 
```

我们只是希望您没有使用过去的浏览器。

```
<div title="Tooltip text">Hover over me</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-06T10:31:15.747

对于来自未来的人，您现在可以完全在 CSS 中完成此操作。

```
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black; 
  margin: 5rem;
}

/* Tooltip text */
.tooltip .tooltiptext {
  visibility: hidden;
  background-color: black;
  color: #fff;
  text-align: center;
  padding: 5px 0;
  border-radius: 6px;

  width: 120px;
  bottom: 100%;
  left: 50%;
  margin-left: -60px;

  position: absolute;
  z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}
```

```
<div class="tooltip">Hover over me
  <span class="tooltiptext">Tooltip text</span>
</div>
```

# r - Rmpi：mclapply：在selectChildren（ac，1）中：选择中的错误“系统调用中断”

> ID：14149361
> 
> 赞同：5
> 
> 时间：2013-01-04T00:15:16.727
> 
> 标签：r, parallel-processing

以下最小示例...

```
require(Rmpi)
set.seed(1)
foo <- parallel::mclapply(seq_len(10), function(l)
                          lapply(1:10, function(x) mean(rnorm(10000, mean=x))),
                          mc.cores=4) 
```

...产生类型的警告消息

```
1: In selectChildren(ac, 1) : error 'Interrupted system call' in select
2: In selectChildren(ac, 1) : error 'Interrupted system call' in select
3: In selectChildren(ac, 1) : error 'Interrupted system call' in select 
```

如何避免它们？

我在一个包中使用`Rmpi`and ，这就是我问的原因`parallel`。`mclapply`请注意，这已发布[在这里，](https://stat.ethz.ch/pipermail/r-sig-hpc/2012-December/001572.html)但我还没有收到答案（还）。如果这很重要，我会使用 Ubuntu 12.10、Emacs 24 和 R 2.15.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T18:44:17.937

我在使用 Open MPI 1.4.3 构建的 Rmpi​​ 安装中看到了这个问题。我假设您也在使用 Open MPI，因为您使用的是 Ubuntu。加载 Rmpi​​ 调用`MPI_Init`会导致`SIGCHLD`信号被捕获而不是被忽略。我相信结果是`SIGCHLD`现在将在子进程通过`mclapply`退出分叉时发送，这会意外中断`select`系统调用`mclapply`。如果这不会导致任何实际错误，您可以通过调用`mclapply`inside来阻止警告消息`suppressWarnings`。

在 Open MPI 用户的邮件列表中对此问题进行了[讨论，这](http://www.open-mpi.org/community/lists/users/2012/08/20044.php)表明该问题已在 Open MPI 1.6 系列中的某个时间点得到修复，因此解决此问题的最佳方法可能是升级您的 MPI 安装（如果您尚未安装的话）。

**更新**

我使用 Open MPI 1.6.5 和 1.7.3 尝试了您的示例，但问题仍然存在。我决定使用该`inline`包来实现将`SIGCHLD`信号重置为默认处理的功能。使用它我能够运行您的示例而不会产生任何警告：

```
library(Rmpi)
library(inline)
includes <- "#include <signal.h>"
code <- "signal(SIGCHLD, SIG_DFL);"
ignchld <- cfunction(body=code, includes=includes, convention=".C")
ignchld()
foo <- parallel::mclapply(seq_len(10), function(l)
                          lapply(1:10, function(x) mean(rnorm(10000, mean=x))),
                          mc.cores=4) 
```

当然，禁用信号可能会给 Rmpi​​ 带来一些问题。在这种情况下，您可以修改代码以保存和恢复`SIGCHLD`处理程序，但我不知道这是否有必要。

# ios - 仅在详细视图上的 ECSlidingViewController

> ID：14149366
> 
> 赞同：1
> 
> 时间：2013-01-04T00:15:26.497
> 
> 标签：ios, uistoryboard

我有一个应用程序，它显示带有导航控制器的 UICollectionView，然后点击一个项目会将您带到该项目的详细视图。我想将 ECSlidingViewController 添加到仅详细视图中，以便在详细视图下方具有附加信息。

到目前为止我发现的最好的类是 ECSlidingViewController 可以在这里找到：[ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)

查看示例，我无法找到仅在详细视图而不是整个应用程序中创建此效果。

几天来我一直试图解决这个问题，但似乎无法让它正常工作。我已按照所有步骤操作，但随后将其应用于详细视图，但它不起作用。

我的项目正在使用故事板。

任何帮助都会很棒，谢谢！

# android - 如何知道 Android 操作栏的操作图标是在顶栏还是底栏（拆分）？

> ID：14149368
> 
> 赞同：5
> 
> 时间：2013-01-04T00:15:33.047
> 
> 标签：android, android-actionbar

我有一个拆分操作栏，顶部栏是暗的，底部栏（拆分）是亮的。

因此，我想显示一个对比动作图标：顶部深色栏中的浅色图标和底部浅色栏中的深色图标。

问题是知道动作应该绘制在顶部还是底部栏上。我怎么知道？

另一种选择是知道操作栏当前是否被拆分。我怎么知道？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T01:52:56.893

简单的。您使用布尔值。默认情况下，如果屏幕宽度小于 400dp，您将拥有一个拆分的 ActionBar。因此，在您的值文件夹中，您可以放置​​：

**/values/bools.xml：**

```
<resources>
    <bool name="split_action_bar">true</bool>
</resources> 
```

并在您的 values-sw400dp 中输入以下内容。

**/values-sw400dp/bools.xml：**

```
<resources>
    <bool name="split_action_bar">false</bool>
</resources> 
```

现在您可以根据该值设置您的图标：

```
boolean isActionBarSplitted = getResources().getBoolean(R.bool.split_action_bar);
if(isActionBarSplitted){
      // set light icon
}
else{
     // set dark icon
} 
```

**编辑：**

实际上忘记我写的内容，您不需要创建自己的布尔值来检查它。已经声明了一个（这是 ActionBar 用来确定它是手机设备还是平板电脑的那个）。如果您的目标是 Android HC+，那么您可以访问默认的 ActionBars 值： `android.R.bool.split_action_bar_is_narrow`如果您使用的是 ActionBarSherlock `R.bool.abs_split_action_bar_is_narrow`：。[在这里](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/bools.xml)找到默认的 ActionBar，[这里](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/values/abs__bools.xml)是您的 ABS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T13:22:39.613

这取决于您使用的库。

对于新的**Appcompat**：检查的值`R.bool.abc_split_action_bar_is_narrow`：

```
boolean split = getResources().getBoolean(R.bool.abc_split_action_bar_is_narrow); 
```

对于**ActionBarShelock**：从库中导入`ResourcesCompat`类并调用：

```
boolean split = ResourcesCompat.getResources_getBoolean(this, R.bool.abs__split_action_bar_is_narrow); 
```

如果您不使用任何库，那么您可以使用 Ahmad 的答案，但前提**是**您不使用库。这是因为它们使用不同的值。如果宽度低于 400dp，android 框架似乎会拆分条形，但对于 appcompat 和 ABS，它是 480dp。

# php - 如何静态分析 php 脚本以检测全局变量的使用情况

> ID：14149372
> 
> 赞同：3
> 
> 时间：2013-01-04T00:16:26.773
> 
> 标签：php, global-variables, static-analysis, tokenize

我想处理一个文件夹并计算每个全局变量的使用次数。我确实有一个全局变量列表，但如果脚本检测到并输出实例的名称和数量，那就更酷了。但是，这不能在运行时完成。

我怀疑可以在 PHP 中使用 token_get_all 来做到这一点，但文档相当稀疏......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:23:26.807

这是我刚刚编写的一个简单的 FSM，用于演示如何从代码中提取所有全局变量：

```
$tokens = token_get_all('<?php function a() { global $b,

$c; } ?>');

$state = 0; // 1 for processing T_GLOBAL, 0 otherwise
$global_vars = array();
foreach ($tokens as $token) {
    if (!is_array($token)) {
        if ($state == 1 && $token == ';') {
            $state = 0;
        }

        continue;
    }

    if ($token[0] == T_GLOBAL) {
        $state = 1;
        continue;
    }

    if ($state == 1 && $token[0] == T_VARIABLE) {
        $global_vars[] = $token[1];
        continue;
    }
}

var_dump($global_vars); 
```

为每个变量添加计数器非常容易。

# ios - 在运行自动化仪器时从 c 代码写入 iPhone 控制台

> ID：14149373
> 
> 赞同：1
> 
> 时间：2013-01-04T00:16:27.647
> 
> 标签：ios, c

我正在尝试调试一个位置感知应用程序，该应用程序使用 C 库，该库作为源代码文件包含并编译到应用程序中。

为了让我在不同的国家/地区测试位置变化的方向和速度，我在 Instruments 中使用自动化并调用 setLocationWithOptions 从脚本执行位置更新。

这使我无法附加 Xcode 调试器，因此我无法在 C 库代码中放置任何断点。我正在尝试将信息记录到 iPhone 控制台，该控制台可以通过 Organizer 访问。我可以在控制台中看到所有 NSLog 调用，但是我找不到从 C 代码中获取日志条目的方法。

我尝试使用 syslog 来获取消息

```
const char* myApp = "MYAPP";
openlog(myApp, LOG_NOWAIT, LOG_USER);
syslog(LOG_DEBUG, "%s", "This is my first log message"); 
```

然而，这似乎只是有时有效并且非常不一致。

通过 Instruments 在设备上运行应用程序时，是否有另一种方法可以从 C 代码中获取日志消息？

# c# - AutoMapper 一对多模型到 ViewModel 问题

> ID：14149374
> 
> 赞同：0
> 
> 时间：2013-01-04T00:16:28.903
> 
> 标签：c#, asp.net-mvc, automapper

我无法找到创建复杂 ViewModel 的正确方法。

B类型号：

```
public class A{public int A_id;}
public class B{
 public int B_id; 
 public string Name; 
 public virtual ICollection<A> A_Items;
} 
```

视图模型 C 类：

```
public class C {public int B_id; public CountOfA;} 
```

所以我试图找到另一种方法来包含 B 类中 A 的出现次数并将其放入 ViewModel 类 C 中。目前我可以通过创建自定义 IResolver 类来做到这一点，就像这样。

```
CreateMap<B,C>().ForMember(dest => dest.CountOfA, opt => opt.ResolveUsing<ListToCountResolver>()); 
```

所以然后在控制器中我使用“包含”方法来包含“A_Items”，这很好用。但是必须有一种更好的方法，当我想要的只是一个简单的 COUNT(*) 行时，不要从数据库中获取整个列表。或者每次我试图从 B 类中获取一些自定义值时，我是否必须创建一个自定义解析器。获取行数只是一个示例，但是如果我想使用 AutoMapper 将“A”集合的“名称”转换为单个字符串，用逗号分隔怎么办。那可能吗？仅供参考，我对 MVC 世界还很陌生，我正在努力坚持“精益控制器”、“胖模型”和“虚拟视图”的设计建议，这样我就可以遵循良好的实践。感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:05:17.660

你能使用简单的`MapFrom`实现吗，看起来像这样：

```
Mapper.CreateMap<B, C>().ForMember(dest => dest.CountOfA, opt => opt.MapFrom(src => src.A_Items.Count())); 
```

我创建了一个小单元测试，它工作正常。

```
var b = new B {A_Items = new Collection<A>{new A(), new A(), new A()}, B_id = 1};

var c = Mapper.Map<C>(b);

c.CountOfA.Should().Be(3);
c.B_id.Should().Be(1); 
```

# wpf - relaycommand CanExecute 返回不正确的值

> ID：14149382
> 
> 赞同：2
> 
> 时间：2013-01-04T00:17:40.193
> 
> 标签：wpf, data-binding, mvvm-light, relaycommand, canexecute

我创建了一个非常标准的 MVVM Light RelayCommand，canExecute 参数为：

> () => (customer.Regions.Count > 0)

必要时我打电话`RaiseCanExecuteChanged();`给 canExecute 并没有正确重新评估。然后我也像这样手动调用它：`var canExecute = myCommand.CanExecute(null);`，它仍然是错误的。在 I do 之后的下一条语句中`var foo = (customer.Regions.Count > 0)`，它返回正确的结果。这里发生了什么？

**命令定义：**

```
SaveCustomerRegionsCommand = new RelayCommand(SaveCustomerRegions, () => (customer.Regions.Count > 0)); 
```

customer 是实例化类时设置的私有属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:59:09.647

（来自评论）创建一个 CanExecute 方法以避免使用 lambda 表达式。

正如您所建议的，看起来 MVVM Light Framework 的 IsAlive 属性正在以某种方式干扰。如果您愿意，您可以发布另一个关于此的问题。问候！

# asp.net - gridview SelectedIndexChanged 事件未触发。我正在使用 asp.net 4.0 。顺便说一句，rowdatabound 事件正在完美触发

> ID：14149383
> 
> 赞同：0
> 
> 时间：2013-01-04T00:17:43.993
> 
> 标签：asp.net

```
 <asp:GridView ID="gridPlace" runat="server" AutoGenerateColumns="False" Width="800px"
        BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px"
        CellPadding="5" OnRowDataBound="gridPlace_RowDataBound" OnSelectedIndexChanged="gridPlace_SelectedIndexChanged">
        <Columns>
            <asp:BoundField HeaderText="DetailID" DataField="PID" />
            <asp:BoundField HeaderText="Name" DataField="Name" ControlStyle-Width="200px" />
            <asp:BoundField HeaderText="Description" DataField="Description" />
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:ImageButton ID="btnEdit" runat="server" ImageUrl="~/Images/Edit.png" ToolTip="Click To Edit this Record" />
                </ItemTemplate>
                <ItemStyle Width="40px" HorizontalAlign="Center" />
            </asp:TemplateField>
        </Columns>
        <EmptyDataTemplate>
            <h2 class="CustomErrorMsg">
            No Record Found</h3>
        </EmptyDataTemplate>
    </asp:GridView> 
```

这是我的 gridview 的 html 标记。RowDatabound 事件正在完美触发。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:47:32.120

您不能只单击行上的任意位置来触发事件，您需要 JavaScript 来执行此操作。认为这些会有所帮助

1.  `<asp:GridView Runat="server" ID="GridView1" AutoGenerateSelectButton="true" />`-[如何：在 GridView Web 服务器控件中启用默认选择](http://msdn.microsoft.com/en-us/library/wbk82279%28v=vs.100%29.aspx)

2.  添加

    `<asp:TemplateField> <ItemTemplate> <asp:LinkButton CommandName="Select" /> </ItemTemplate> </asp:TemplateField>`

3.  如果您不希望出现选择按钮，请使用 JavaScript - [http://forums.asp.net/t/992062.aspx/1](http://forums.asp.net/t/992062.aspx/1)

4.  `<asp:CommandField ShowSelectButton="true" ButtonType="Image" />`- [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandfield.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandfield.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T12:45:09.010

我使用 TemplateFields 有过这些症状。

TemplateFields 允许您在具有相同 ID 的不同列中拥有项目 - 无需智能感知突出显示错误。

在这种情况下，具有相同 ID 的两个链接可能会阻止点击被解析。

通常这将是一个复制和粘贴错误。

希望这对某人有帮助！

# c++ - 使用 delete[] 但字节肯定会丢失，为什么？

> ID：14149384
> 
> 赞同：0
> 
> 时间：2013-01-04T00:17:53.173
> 
> 标签：c++

为了解释我的问题，这是极简主义的 main.cc：

```
#include "./main.h"

int main(int argc, char *argv[]) {
    char *buffer = new char[12];
    char *output = new char[12];
    FILE *input  = fopen("file.test", "r");

    while ( read_stdin(buffer, 12, input, output) ) {
        // Operations on output
        // (...)
    }

    fclose(input);
    delete[] output; output = 0;
    delete[] buffer; buffer = 0;

    return 0;
} 
```

和 main.h：

```
#include <cstdio>
#include <cstring>

inline bool read_stdin(char *tmp_buffer, const size_t &len, FILE *input, char *&output) {
    output = fgets(tmp_buffer, len, input);
    if ( output != NULL ) {
        char *lf = strchr(output, '\n');
        if ( lf != NULL ) {
            *lf = '\0';
        }
        return true;
    }
    return false;
} 
```

函数 read_stdin() 可以从 STDIN 读取，它解释了它的名字。

好吧，一切都按预期工作，但 valgrind 告诉我这样的事情：

```
==6915== 12 bytes in 1 blocks are definitely lost in loss record 1 of 1
==6915==    at 0x4C29527: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==6915==    by 0x4008A2: main (main.cc:6) 
```

我编译为`g++ -O0 -g main.cc -o test`

我知道这12个字节是“输出”，但是为什么会丢失一些字节？我使用 delete[]，即使 STDIN 或输入​​没有任何内容，输出也会为 NULL 对吗？

我误解了为什么还有这12个字节，我错在哪里？

先感谢您 ：）

**编辑**

感谢 Vaughn Cato、Dietmar Kühl 和 Richard J. Ross III，我改变了台词：

```
output = fgets(tmp_buffer, len, input);
    if ( output != NULL ) { 
```

至

```
if ( fgets(output, len, input) != NULL ) { 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T00:20:50.350

您已替换`output`为不同的指针，因此您不会删除分配的相同内容：

```
output = fgets(tmp_buffer, len, input); 
```

我不确定为什么`read_stdin`有`output`参数。如果您只需要检查 fgets 的结果，那么您可以使用局部变量：

```
inline bool read_stdin(char *tmp_buffer, const size_t &len, FILE *input) {
    char *output = fgets(tmp_buffer, len, input);
    .
    .
    .
} 
```

# php - 特定时间点的 MySQL 字段类型

> ID：14149391
> 
> 赞同：0
> 
> 时间：2013-01-04T00:18:32.323
> 
> 标签：php, mysql, unix-timestamp, fieldtype

我需要一个可以及时存储特定日期的 MySQL 列。我正在使用的应用程序给了我一个 UNIX 时间戳（自 1970 年 1 月 1 日以来经过的秒数）。我需要将此信息存储在数据库中，稍后以特定方式检索它，见下文。

存储此日期后，我需要能够根据此时间戳查询数据库。例如，我需要能够检索时间戳日期为 4 日的所有行。

那么我的问题是如何将此日期存储在最容易执行查询的位置？DATETIME 和 TIMESTAMP 对我来说似乎是有效的选项，但我似乎无法弄清楚如何处理查询。我不期待将时间戳存储为整数，因为它不允许我创建这样的查询，我必须将这项工作卸载到 PHP。

如果有帮助，我需要以 UTC 时间处理这些时间戳。我知道 TIMESTAMP 会为我转换为 PST（我的本地时间），所以我必须在 MySQL 或 PHP 中转换回 UTC。（至少我认为我必须这样做）

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:31:08.970

如果我是你，我会将这些数据保存为`DateTime`. 原因是

*   我们可以亲眼阅读这些记录。例如`2013-01-04 00:25:12`优于`1357259112`.
*   您*不必使用我认为会杀死索引的任何转换*函数[`FROM_UNIXTIME`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)。所以最好使用`date`or因为您可以使用索引，因为您可以使用or`datetime`直接搜索值`=``BETWEEN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:21:53.540

将其存储为`integer`，然后使用 MySQL 的`FROM_UNIXTIME()`函数如下：

```
SELECT
    `field_list`
FROM
    `table_name`
WHERE
    FROM_UNIXTIME(`the_date`, '%d') = 4; 
```

# magento - 数据库升级慢

> ID：14149392
> 
> 赞同：1
> 
> 时间：2013-01-04T00:18:36.860
> 
> 标签：magento, magento-1.7

我已经在我的 Dev 和 Staging 服务器上运行了几次 Magento 从 1.5 到 1.7 的升级，没有出现很多问题，但是当我尝试对生产数据库运行它时，它需要永远完成（到目前为止几个小时）。

有没有更好的方法来升级 Magento DB？我不能让网站关闭几个小时来升级数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:00:55.097

您可能在这里遇到 IO 瓶颈，因为 magento 使用 innodb 引擎，并且在更新更改大表和删除/创建主键之间永远依赖于您的表 sises 和可用资源。

在 innodb 中，当添加列时，表基本上会重新创建并复制到正在进行的临时表中，因此如果您的数据库堆栈上有 100k 行和较差的 IO（例如，不使用 SSD），那么这是可以预期的。

您可以通过对您的 sales_flat_quote 表或 sales_flat_order 进行更改（查看哪个有更多行）并查看需要多长时间来轻松衡量这一点：）然后乘以您需要执行的所有更改命令，您就可以得到更新时间。Magento 从这方面来说有点愚蠢，并且不会在一次通话中一个接一个地进行更改和键删除/添加，因此基本上很可能您将所有时间都浪费在等待更改完成上。

# coldfusion - 如何使用 AngularJS 和 serializeJSON cfquery

> ID：14149398
> 
> 赞同：3
> 
> 时间：2013-01-04T00:19:26.563
> 
> 标签：coldfusion, angularjs, cfquery

我正在尝试使用 cf 后端查看 AngularJS

我有以下代码可以提取一个名为 getIndex 的常规 cfquery，它每列提取五行（firstName，lastName）

```
var theQuery = <cfoutput>#serializeJSON(getIndex,true)#</cfoutput>;
        var theData = theQuery.DATA

        function dataLooper($scope){
            $scope.people = theData;
            console.log($scope.people);
        } 
```

控制台日志产生

> 对象 { FIRSTNAME=[5], LASTNAME=[5]}

我的 html 看起来像

```
<div ng-controller="dataLooper">
          <div ng-repeat="person in people">
          {{person}} - {{person.FIRSTNAME}}<br>
          </div>
</div> 
```

产生

```
 ["Yasteel","Kyleigh","Gary","Nick","Kerry-Leigh"] -
["Si","No","Ho","Ga","Gr"] - 
```

显然我错过了一些东西，因为这根本不是我所期望的。我猜这是因为 AngularJS 正在寻找一个数组而不是一个对象。我不确定，但我希望 serializeJSON 能给我某种类型的可用对象，而无需进行大量额外操作。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:06:56.003

[ng-repeat](http://docs.angularjs.org/api/ng.directive%3angRepeat)可以处理数组或对象。对于对象，使用“(key, value)”语法。

但这不会解决您的问题，除非您像这样重新格式化数据：

```
{ 'Yasteel':'Si', 'Kyleigh':'No', ... } 
```

然后你可以这样做：

```
<div ng-repeat="(first,last) in people">
    {{first}} - {{last}} <br>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:18:08.763

@Mark 感谢您的帮助。我的问题是关于将 CFQUERY 转换为 ANGULAR 可以处理的东西。[在 Ben Nadel关于 Angular](http://www.bennadel.com/blog/2439-My-Experience-With-AngularJS-The-Super-heroic-JavaScript-MVW-Framework.htm?&_=0.6299782912246883&_=0.9592064458411187#comments_41352)的[文章和关于将查询转换为 structs 数组](http://www.bennadel.com/blog/124-Ask-Ben-Converting-a-Query-to-an-Array.htm)的文章中提供了一点帮助。我把它完成了。

对于那些会发现这个的 CFers 去获取 Ben 的[queryToArray](http://www.bennadel.com/blog/124-Ask-Ben-Converting-a-Query-to-an-Array.htm)。这是一个包含列 firstName、lastName、age 的查询的示例。

```
<cfscript>
  a = createObject('component','angular');
  getQuery = a.getQuery();
  QueryArray = a.queryToArray(getQuery);
</cfscript>

<script type="text/javascript"> 
  var theQuery = <cfoutput>#serializeJSON(QueryArray)#</cfoutput>;
  function dataLooper($scope){
    $scope.people = theQuery;
  }
</script>

<div ng-controller="dataLooper">
  <div ng-repeat="person in people">
  {{person.FIRSTNAME}} - {{person.LASTNAME}} - {{person.AGE}}<br>
  </div>
</div> 
```

我希望这对正在尝试学习 Angular 的其他人有所帮助！

# jquery - Twitter Bootstrap：goToByScroll jQuery 插件在初始化折叠插件后不起作用？

> ID：14149399
> 
> 赞同：3
> 
> 时间：2013-01-04T00:19:30.713
> 
> 标签：jquery, twitter-bootstrap

**编辑：我通过取出页面底部的一个 jQuery 链接使滚动工作**

**但是，现在手风琴折叠不起作用并扩展了所有链接。**

我拿出了这个：`<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`

* * *

我的 jQuery 插件有问题，它会慢慢滚动到锚链接。它以前工作过，直到我修复了手风琴崩溃。我到处寻找，我是 jQuery 的初学者，想知道我是否链接了正确的文件？

我知道我的 goToByScroll 插件的 HTML 代码很好，我认为它只是我的 jQuery 链接或 jQuery 代码。我参考了[http://www.spydertrap.com/blog/2012/08/user-experience-jquery-smooth-page-anchor-transitions/](http://www.spydertrap.com/blog/2012/08/user-experience-jquery-smooth-page-anchor-transitions/)的 jQuery 滚动效果。

代码如下。

在我的文件的开头，我有：

```
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--Le Styles-->
<link href="css/bootstrap.css" rel="stylesheet" media="screen">
<link href="css/bootstrap-responsive.css" rel="stylesheet"> 
```

我想要任何与 jQuery 链接的帮助，因为我基本上是在自学。这是手风琴折叠代码：

```
<div class="accordion" id="accordion1">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-parent="#accordion1" data-toggle="collapse" href="#panel1">

                    <h4>Piece Title</h4>

                </a><!--end link heading-->
            </div><!--end accordian heading-->

            <div class="accordion-body collapse in" id="panel1">
                <div class="accordion-inner">

                    <p>Here's some text.Here's some text.Here's some text.Here's some text.                     
                </div><!--end inner accordion-->
            </div><!--end accordion collapse-->
        </div><!--end accordion group-->
</div><!--end accordion complete--> 
```

这是带有脚本的 HTML 页面的底部：

```
<script src="js/bootstrap.min.js"></script> 
```

**这个被取出了，goToByScroll jQuery 工作了，但折叠功能没有：** `<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`

```
<script type="text/javascript" src="/static/js/bootstrap.js"></script>

<!--calls and pauses carousel from sliding-->
<script type="text/javascript">
    $(document).ready(function(){
        $('.carousel').carousel();
        $('.carousel').carousel('pause');
    });
</script>

<script type="text/javascript">
    $(document).ready(function(){
        $(".collapse").collapse()
    });
</script>

<!--eases transitions between anchors-->
<script type="text/javascript">
    function goToByScroll(id){
        $('html,body').animate({scrollTop: $(id).offset().top},'slow');
    }

    $(document).ready(function(){
        $('.nav a').click(function(){
        goToByScroll($(this).attr('href'));
        return false;
        });
    });
</script> 
```

谢谢！如果有更多需要的文件，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:14:32.817

1.  为了让手风琴工作，它需要`jquery`图书馆。[这里](http://code.jquery.com/jquery-1.8.3.min.js "jQuery 1.8.3")
2.  为什么你有两个引导脚本： `<script src="js/bootstrap.min.js"></script>`和`<script type="text/javascript" src="/static/js/bootstrap.js"></script>`？两者有什么区别？如果它们相同，则可以使用，`bootstrap.min.js`因为这只是`bootstap.js`.
3.  你怎么能在没有图书馆的情况下使用`.animate()`, `.attr()`,`.ready()`等？`jquery`

# java - 锁定 CSV 文件（仅允许读取访问）。可能的？

> ID：14149400
> 
> 赞同：0
> 
> 时间：2013-01-04T00:19:31.103
> 
> 标签：java, applet, locking, persistence, file-locking

我正在编写一个将数据保存到 CSV 文件的游戏小程序，并获得了一些可以读取和写入同一`.csv`文件的方法。不知何故，我需要锁定文件，而我的每个方法都有一个打开的写入器流到文件，所以在我关闭写入流之前无法更改文件内容，但我只想允许读取访问。

可能吗？

或者，如果它可以在完全不访问文件的情况下完成，那也很好。

编辑：我的电脑将成为提供在线游戏小程序的服务器，而 csv 文件仅在我的电脑上。要玩本游戏，您必须登录我的网站，并将所有帐户信息（用户名、密码、总赢、总输等）存储到我的计算机（服务器）上的 csv 文件中。所以我有几种方法可以更改文件。因此，我需要在写入文件时将其锁定在每种方法中，如果从理论上讲，将是几个玩家同时玩。

我将信息存储到 csv 文件的原因是我接受了 java 开发人员的教育并且只编程了 4 个月，我们将在几个月内首先了解数据库。

这是一项功课，这就是我制作小程序的原因。唯一将连接到我的计算机（将通过一个简单的 servlet 和网页为小程序提供服务）的用户是我的老师。所以不存在安全威胁。

这是播放器对象的代码：

```
public class Player {
    private String userName;
    private String passWord;
    private int currentWins;
    private int currentLosses;
    private int totalWins;
    private int totalLosses;
    private boolean isLoggedIn = false;
    private String playerId; 
    public Player(String playerId, String userName, String passWord, int totalWins, int totalLosses) { 
        this.playerId = playerId;
        this.userName = userName;
        this.passWord = passWord;
        this.totalWins = totalWins;
        this.totalLosses = totalLosses;
        this.currentWins = 0;
        this.currentLosses = 0;
        }
    public Player(String userName, String passWord, int totalWins, int totalLosses) {
        this.userName = userName;
        this.passWord = passWord;
        this.totalWins = totalWins;
        this.totalLosses = totalLosses;
        this.currentWins = 0;
        this.currentLosses = 0;
        this.playerId = UUID.randomUUID().toString();
    }
    public void incrementWins()
    {
        currentWins++;
        totalWins++;
    }
    public void incrementLosses()
    {
        currentLosses++;
        totalLosses++;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String getPassword() {
        return passWord;
    }
    public void setPassword(String passWord) {
        this.passWord = passWord;
    }
    public boolean isLoggedIn() {
        return isLoggedIn;
    }
    public void setLoggedIn(boolean isLoggedIn) {
        this.isLoggedIn = isLoggedIn;
    }
    public int getTotalWins()
    {
        return this.totalWins;
    }
    public void setTotalWins(int totalWins)
    {
        this.totalWins = totalWins;
    }
    public int getTotalLoss()
    {
        return this.totalLosses;
    }
    public void setTotalLoss(int totalLoss)
    {
        this.totalLosses = totalLoss;
    }
    public int getCurrentWins()
    {
        return this.currentWins;
    }
    public void setCurrentWins(int currentWins)
    {
        this.currentWins = currentWins;
    }
    public int getCurrentLoss()
    {
        return this.currentLosses;
    }
    public void setCurrentLoss(int currentLosses)
    {
        this.currentLosses = currentLosses;
    }
    public String getPlayerId() {
        return playerId;
    }
    public void setPlayerId(UUID playerId) {
        this.playerId = playerId.toString();
    }   
} 
```

这里播放器管理器代码：

```
public class PlayerManager {
    private final File file = new File("Players.csv");
    public PlayerManager() throws IOException
    {
        if (!file.exists())
            file.createNewFile();
    }

    public Player getPlayer(String playerId) throws IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(file), "UTF-8"));

        String line;

        while((line = reader.readLine()) != null) {
            if(line.equalsIgnoreCase("PlayerID;Username;Password;Total Wins;Total Losses"))
                continue;

            String[] playerInfo = line.split(";");
            String existingPlayerID = playerInfo[0];
            String userName = playerInfo[1];
            String password = playerInfo[2];
            int totalWins = Integer.parseInt(playerInfo[3]);
            int totalLoss = Integer.parseInt(playerInfo[4]);

            if(existingPlayerID.equals(playerId)) {
                reader.close();
                return new Player(existingPlayerID,userName, password, totalWins, totalLoss);
            }
        }

        reader.close();
        return null;
    }
    public ArrayList<Player> getAllPlayers() throws IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(file), "utf-8"));
        ArrayList<Player> players = new ArrayList<Player>();
        String line;
        while((line = reader.readLine()) != null)
        {
            if(line.equalsIgnoreCase("PlayerID;Username;Password;Total Wins;Total Losses"))
                continue;
            String[] playerInfo = line.split(";");
            String playerID = playerInfo[0];
            String userName = playerInfo[1];
            String password = playerInfo[2];
            int totalWins = Integer.parseInt(playerInfo[3]);
            int totalLoss = Integer.parseInt(playerInfo[4]);
            players.add(new Player(playerID,userName, password, totalWins, totalLoss));
        }
        reader.close();
        return players;
    }
    public void savePlayer(Player player) throws IOException {
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(file, true), "utf-8"));
        if(file.length() == 0) {
            writer.write("PlayerID;Username;Password;Total Wins;Total Losses");
            writer.newLine();
            writer.flush();
        }
        if(playerExists(player)) {
            writer.close();
            updatePlayer(player);
            return;
        }
        writer.write(player.getPlayerId() + ";" + player.getUserName() + ";" + player.getPassword() + ";" + 
                player.getTotalWins() + ";" + player.getTotalLoss());
        writer.newLine();
        writer.flush();
        writer.close();
    }
    public Player loginPlayer(String userName, String passWord) throws IOException {

        for(Player p : getAllPlayers()) {
            if(p.isLoggedIn())
                return p;

            if(p.getUserName().equals(userName) && p.getPassword().equals(passWord)) {
                p.setLoggedIn(true); 
                return p;
            }
        }
        return null;
    }
    private void updatePlayer(Player player) {

        try
        {
            ArrayList<Player> players = getAllPlayers();
            for(Player p : players) {
                if(p.getPlayerId().equals(player.getPlayerId())) {
                    p.setUserName(player.getUserName());
                    p.setPassword(player.getPassword());
                    p.setCurrentWins(player.getCurrentWins());
                    p.setCurrentLoss(player.getCurrentLoss());
                    p.setLoggedIn(player.isLoggedIn());
                    p.setTotalWins(player.getTotalWins());
                    p.setTotalLoss(player.getTotalLoss());
                    break;
                }
            }
            File tempFile = new File("Players.csv.bak");
            if (!tempFile.exists())
                tempFile.createNewFile();
            else
            {
                tempFile.delete();
                tempFile.createNewFile();
            }
            BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(tempFile), "utf-8"));

            if(tempFile.length() == 0) {
                writer.write("PlayerID;Username;Password;Total Wins;Total Losses");
                writer.newLine();
                writer.flush();
            }
            for(Player p : players) {
                writer.write(p.getPlayerId() + ";" + p.getUserName() + ";" + p.getPassword() + ";" + 
                        p.getTotalWins() + ";" + p.getTotalLoss());
                writer.newLine();
            }
            writer.flush();
            writer.close();
            this.file.delete();
            tempFile.renameTo(this.file);
        }
        catch(Exception ex)
        {
        }
    }
    private boolean playerExists(Player player) throws IOException {
        Player p = getPlayer(player.getPlayerId());

        if(p != null && p.getPlayerId().equals(player.getPlayerId()))
            return true;
        return false;
    }
} 
```

这是 servlet（尚未完成）：

```
public class TickTackToeServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private boolean newUser = true;

    public String getLoginForm() throws IOException {
        File loginForm = new File("login.html");
        BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(loginForm)));
        StringBuilder str = new StringBuilder();

        String line;
        while((line = reader.readLine()) != null) {
            str.append(line);
        }

        reader.close();
        return str.toString();
    }

    public String displayGamePage() {
        return null;
    }

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        response.setContentType("text/html; charset=utf-8");
        response.setStatus(HttpServletResponse.SC_OK);
        Writer writer = response.getWriter();

        String loginForm = getLoginForm();

        writer.write(loginForm);
    }

    @Override
    public void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        response.setContentType("text/html; charset=utf-8");
        Writer writer = response.getWriter();

        String userName = request.getParameter("username");
        String passWord = request.getParameter("password");

        if(userName == null || passWord == null) {
            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
            writer.write("<h1>You forgot to enter username/password. Please refresh to try again.</h1>");
            writer.write(getLoginForm());
            return;
        }

        PlayerManager playerManager = new PlayerManager();
        playerManager.loginPlayer(userName, passWord);

        Player player = new Player(userName, passWord, 0 , 0);
        if(!player.isLoggedIn()) {
            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
            writer.write("<h1>Bad username or password. Please refresh to try again.</h1>");
            return;
        }

        HttpSession session = request.getSession(true);

        if(session.getAttribute(userName) == null || session.getAttribute(passWord) == null) {
            session.setAttribute("username", userName);
            session.setAttribute("password", passWord);
        }

        response.setStatus(HttpServletResponse.SC_OK);
        response.sendRedirect(request.getParameter("url"));

    }

    public static void main(String... args) throws Exception {
        ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
        context.addServlet(TickTackToeServlet.class, "/");

        Server server = new Server(8080);
        server.setHandler(context);
        server.start();
        server.join();
    }

} 
```

这是小程序（尚未完成）：

```
public class TickTackToeApplet extends JApplet implements ActionListener {
    private static final long serialVersionUID = 1L;
    private ArrayList<JButton> buttons = new ArrayList<JButton>();

    private JPanel panel = new JPanel();
    private Game game;
    private Player player1;
    private Player player2;
    private int numberOfPlacedOutChars = 0;

    public TickTackToeApplet() {}

    public TickTackToeApplet(int gameBoardSize, Player player1, Player player2) {
        createGUI(gameBoardSize);

        game = new Game(gameBoardSize);
        this.player1 = player1;
        this.player2 = player2;

        if(!player1.isLoggedIn() && !player2.isLoggedIn()) {
            try {
                PlayerManager playerManager = new PlayerManager();

                playerManager.loginPlayer(player1.getUserName(), player1.getPassword());
                playerManager.loginPlayer(player2.getUserName(), player1.getPassword());
            } catch (IllegalArgumentException e) {
                JOptionPane.showMessageDialog(this, "Couldn't login player, please enter correct username & password!");
            } catch (IOException e) {
                JOptionPane.showMessageDialog(this, "Server error...");
                e.printStackTrace();
            }
        }
    }

    //  public void init() {
    //      new TickTackToeApplet(4, "Henrik", "temp123");
    //  }

    public void CreateButtons(int gameBoardSize)
    {
        for(int x=0; x<gameBoardSize; x++)
        {
            for(int y=0; y<gameBoardSize; y++)
            {
                JButton btn = new JButton("");
                btn.setFont(new Font("Tahoma", Font.PLAIN, 32));
                btn.setName(x + ";" + y);
                btn.addActionListener(this);
                buttons.add(btn);
            }
        }
    }

    public void PlaceOutButtons()
    {
        for(JButton btn : buttons)
            panel.add(btn);
    }

    public void createGUI(int gameBoardSize) {

        panel.setSize(gameBoardSize*25, gameBoardSize*25);
        panel.setBackground(Color.BLACK);
        getContentPane().add(panel, BorderLayout.CENTER);
        panel.setLayout(new GridLayout(gameBoardSize, gameBoardSize));

        CreateButtons(gameBoardSize);
        PlaceOutButtons();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        JButton buttonClicked = (JButton)e.getSource();
        String coordinates = buttonClicked.getName();
        String[] strArr = coordinates.split(";");
        int x = Integer.parseInt(strArr[0]);
        int y = Integer.parseInt(strArr[1]);

        if (numberOfPlacedOutChars % 2 == 0) {
            game.placeChar('X', x, y);
            buttonClicked.setText("X");
            buttonClicked.setEnabled(false);
        }
        else {
            game.placeChar('O', x, y);
            buttonClicked.setText("O");
            buttonClicked.setEnabled(false);
        }

        numberOfPlacedOutChars++;

        boolean win = game.checkWin();

        if(win == true) {
            player1.incrementWins();
            try {
                PlayerManager playerManager = new PlayerManager();
                playerManager.savePlayer(player1);
            } catch (IllegalArgumentException | IOException e1) {
                JOptionPane.showMessageDialog(this, "Couldn't update player info!");
            } 

            for(JButton btn : buttons) {
                btn.setEnabled(false);
            }

            int choice = JOptionPane.showConfirmDialog(this, "Winner is: " + player1.getUserName() + ", play again?", "WE GOT A WINNER", JOptionPane.YES_NO_OPTION);

            if(choice == 0) {
                for(JButton btn : buttons) {
                    btn.setEnabled(true);
                    btn.setText("");
                }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:25:57.350

使用 Java.NIO，您可以使用一个名为[FileLock](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/FileLock.html)的类来做到这一点。这是取自[一篇关于 JavaBeat](http://www.javabeat.net/2007/10/locking-files-using-java/)的文章的示例：

```
import java.io.*;
import java.nio.channels.FileChannel;
import java.nio.channels.FileLock;

public class FileLockTest {
  public static void main(String[] args) throws Exception {
    RandomAccessFile file = null;
    FileLock fileLock = null;
    try {
      file = new RandomAccessFile("FileToBeLocked", "rw");
      FileChannel fileChannel = file.getChannel();

      fileLock = fileChannel.tryLock();
      if (fileLock != null){
        System.out.println("File is locked");
        accessTheLockedFile();
      }
    } finally {
      if (fileLock != null) {
        fileLock.release();
      }
    }
  }

  static void accessTheLockedFile() {
    try {
      FileInputStream input = new FileInputStream("FileToBeLocked");
      int data = input.read();
      System.out.println(data);
    } catch (Exception exception) {
      exception.printStackTrace();
    }
  }
} 
```

因为这涉及到文件系统，所以您需要一个 .policy 文件，并且您需要对小程序进行签名。尽管您应该[阅读以下内容，](http://docs.oracle.com/javase/1.5.0/docs/guide/security/permissions.html#FilePermission)但该政策应该有效：

```
grant {
  permission java.io.FilePermission "<<ALL FILES>>","write";
}; 
```

# python - 在线运行python脚本（django）

> ID：14149404
> 
> 赞同：7
> 
> 时间：2013-01-04T00:20:26.313
> 
> 标签：python, django, pythonanywhere

我是 Python 的新手，一般来说是编程，所以任何解释都应该用外行术语。

我创建了一个简单的脚本来读取 CSV 文件并输出结果。我想上传该脚本并将其作为简单的 Web 界面或 Web 应用程序在线运行。

我已经使用 Django 框架注册了 pythonanywhere.com。我在正确的轨道上吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T08:55:26.300

我可能有偏见，但我可以肯定地说，你在正确的轨道上！

听起来您希望人们能够上传 csv，然后您的网络应用程序将处理它并输出结果？如果是这样，请查看 Django 文档：

[https://docs.djangoproject.com/en/1.3/topics/http/file-uploads/](https://docs.djangoproject.com/en/1.3/topics/http/file-uploads/)

`FileField`没有什么太复杂的，如果你按照示例 创建一个 Django Form 对象。

```
from django import forms

class UploadFileForm(forms.Form):
    file  = forms.FileField() 
```

然后将其放入您的网页或模板中，包括正确的`enctype`：

```
<form enctype="multipart/form-data" method="post" action="/foo/">
{{form.as_p}}
</form> 
```

最后，您在处理帖子的视图中处理它（使用表单操作中的 url）：

```
def handle_csv_upload(request):
    form = UploadFileForm(request.POST, request.FILES)
    if form.is_valid():
        results = do_my_csv_magic(request.FILES['file'])
        # now eg save the results to the database, and show them to the user
        db_entry = MyCSVResults(results=results)
        db_entry.save()
        # it's good practice to use a redirect after any POST request:
        return HttpResponseRedirect('/show_results/%d/' % db_entry.id) 
```

除此之外，在 PythonAnywhere 上不需要特别的特殊配置。该文件（临时）保存到 /tmp，它可以正常工作。如果您想保存文件以供以后使用，则必须添加一些代码来执行此操作。

希望有帮助。如果您还有任何问题，我们在这里！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T08:53:51.950

作为一名[PythonAnywhere](http://www.pythonanywhere.com)开发人员，我会说你是从正确的地方开始的。我们确实尝试使事情尽可能简单。

您可以使用[flask web 框架](http://flask.pocoo.org/)从一个更简单的应用程序开始。也有一个快速入门。下面是一个非常简单的烧瓶应用程序，在访问时会返回一些输出。此代码将进入`\var\www\your_username_pythonanywhere_com_wsgi.py`文件。

```
import os
import sys
from flask import Flask

app = Flask(__name__)
app.debug = True

path = '/home/your_username/'
if path not in sys.path:
    sys.path.append(path)

from my_script import function_that_parses_csv

@app.route('/')
def root():
    return function_that_parses_csv() 
```

这是将少量数据作为 Web 服务提供的最简单的单一文件方式。我会说首先让它发挥作用，然后您就可以开始扩展您的知识并添加功能。

# magento - 使用自定义渲染器过滤网格

> ID：14149409
> 
> 赞同：6
> 
> 时间：2013-01-04T00:21:02.287
> 
> 标签：magento, magento-1.7

我在管理网格的模块中的过滤器有问题。

我的问题是：使用自定义渲染器过滤列不起作用。

```
public function _prepareColumns()
    {
        $this->addColumn('entity_id', array(
            'header' => 'ID',
            'index'  => 'entity_id',
            'width'  => '30px'
        ));
        $this->addColumn('author', array(
            'header'   => 'Author',
            'index'    => 'author',
            'renderer' => 'Test_Block_Adminhtml_Vj_Renderer_Author'
        )); 
```

渲染器是

```
class Test_Block_Adminhtml_Vj_Renderer_Author extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract
{
    public function render(Varien_Object $row)
    {
        $value = $row->getData($this->getColumn()->getIndex());
        $autor = Mage::getModel('test/test')->load($value);
        return ($author->getName() . ' ' . $author->getSurname());
    }
 } 
```

网格中的作者显示良好，例如“George Bush”，但如果我尝试写入过滤器（例如“Bu”）过滤器返回零行。：-/

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-16T15:14:40.623

这篇文章可能会有所帮助...... [http://www.atwix.com/magento/grid-filter-for-columns/](http://www.atwix.com/magento/grid-filter-for-columns/)

在自定义字段的 addColumn() 调用中，添加类似...

`'filter_condition_callback' => array($this, '_myCustomFilter'),`

然后添加过滤方法（根据需要更改“where（）”）...

```
protected function _myCustomFilter($collection, $column)
{
    if (!$value = $column->getFilter()->getValue()) {
        return $this;
    }

    $this->getCollection()->getSelect()->where(
        "my_field like ?"
    , "%$value%");

    return $this;
} 
```

# ember.js - #if 的双重条件

> ID：14149415
> 
> 赞同：8
> 
> 时间：2013-01-04T00:21:38.580
> 
> 标签：ember.js

如何做双重条件 {{#if person && work}} ？&& 似乎不是有效的运算符

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T00:56:47.813

我不相信车把支持 {{#if}} 语句中的多个项目（相关：[handlebars.js {{#if}} 条件中的逻辑运算符](https://stackoverflow.com/questions/8853396/logical-operator-in-a-handlebars-js-if-conditional)）。

您可以将控制器/视图中的多个值折叠成单个计算属性，并在模板中检查该单个值。当任何一个原始值更新时，这个新的计算属性将更新：

```
App.ValuesTestController = Ember.Controller.extend({
    value1: false,
    value2: true,
    value1and2: function(){
            return this.get('value1') && this.get('value2');
    }.property('value1', 'value2')
}); 
```

您的模板将如下所示：

```
<div>{{#if value1 }}value 1 true{{/if}}</div>
<div>{{#if value2 }}value 2 true{{/if}}</div>
<div>{{#if value1and2 }}value 1 and 2 true{{/if}}</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-14T15:36:31.480

即使[@CraigTeegarden 的答案](https://stackoverflow.com/a/14149648/316700)是优雅的，我也发现了一些案例，这种解决方法让我的生活更轻松，因此让我更快乐：

```
{{#if person}}
  {{#if work}}
    Yeah!
  {{/if}}
{{/if}} 
```

# python - 在带有 CNTLM 的代理后面使用 pip

> ID：14149422
> 
> 赞同：290
> 
> 时间：2013-01-04T00:22:17.577
> 
> 标签：python, proxy, pip

我正在尝试在工作中使用代理后面的 pip。

[这篇文章](https://stackoverflow.com/questions/9698557/how-to-use-pip-on-windows-behind-an-authenticating-proxy)的答案之一建议使用[CNTLM](http://cntlm.sourceforge.net/)。我按照[其他帖子](https://stackoverflow.com/questions/9181637/how-to-fill-proxy-information-in-cntlm-config-file)安装并配置了它，但运行`cntlm.exe -c cntlm.ini -I -M http://google.com`给出了错误`Connection to proxy failed, bailing out`。

我也尝试过`pip install -–proxy=user:pass@localhost:3128`（默认的 CNTLM 端口），但这引发了`Cannot fetch index base URL http://pypi.python.org/simple/`. 很明显，代理出了点问题。

有谁知道如何更明确地检查 CNTLM 是否设置正确，或者是否有另一种解决方法？我知道您也可以按照[此处](https://stackoverflow.com/questions/11726881/how-to-set-an-http-proxy-in-python-2-7)`http_proxy`所述设置环境变量，但我不确定要输入什么凭据。来自?`cntlm.ini`

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2013-11-13T19:44:27.273

使用 Ubuntu，我无法让代理选项像宣传的那样工作——因此以下命令**不起作用**：

```
sudo pip --proxy http://web-proxy.mydomain.com install somepackage 
```

但是导出`https_proxy`环境变量（注意它`https_proxy`不是`http_proxy`）起到了作用：

```
export https_proxy=http://web-proxy.mydomain.com 
```

然后

```
sudo -E pip install somepackage 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-05-03T10:50:07.963

Windows下别忘了设置

```
SET HTTPS_PROXY=<proxyHost>:<proxyPort> 
```

我需要设置什么

```
pip install pep8 
```

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2013-01-07T00:02:28.070

要为 Windows 设置 CNTLM，请遵循[本文](http://stormpoopersmith.com/2012/03/20/using-applications-behind-a-corporate-proxy/)。对于 Ubuntu，请阅读[我的博文](http://annelagang.blogspot.com/2012/11/installing-gems-in-ubuntu-1204-using.html)。

**编辑：**

基本上，要在任何平台上使用 CNTLM，您需要设置您的用户名和*散列*密码，然后再将`http://127.0.0.1:3128`其用作父代理的代理。

1.  编辑配置并添加重要信息，如域、用户名、密码和父代理。

2.  生成哈希密码。

    **视窗** `cntlm –c cntlm.ini –H`

    **Ubuntu/Linux** `cntlm -v -H -c /etc/cntlm.conf`

3.  从配置中删除纯文本密码并将其替换为生成的密码。

检查是否工作：

**视窗** `cntlm –M http://www.google.com`

**Ubuntu/Linux** `sudo cntlm -M http://www.google.com/`

有关更详细的说明，请参阅上面的链接。

**更新：**

为了完整起见，我最近能够在 Windows 中配置和使用 CNTLM。由于我们的代理，我在 Kindle for PC 的同步过程中遇到了一个问题，安装和配置 CNTLM for Windows 为我解决了这个问题。有关详细信息，请参阅[我的文章](http://annelagang.blogspot.com/2014/01/register-and-download-books-using.html)。

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2015-11-09T14:12:03.183

它不适合我。我不得不在工作中使用**https**：

```
pip install --proxy=https://user@mydomain:port somepackage 
```

为了更新，添加 -U。

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2014-03-06T15:51:22.973

您可以通过将您公司的根证书添加到您的 site-packages/pip 文件夹中的 cacert.pem 文件来继续通过 HTTPS 使用 pip。然后通过将以下行添加到 ~/pip/pip.conf（或 ~\pip\pip.ini，如果您在 Windows 上）来配置 pip 以使用您的代理：

```
[global]
proxy = [user:passwd@]proxy.server:port 
```

就是这样。无需使用第三方软件包或放弃 HTTPS（当然，您的网络管理员仍然可以看到您在做什么）。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2013-01-04T02:46:17.110

窗户；在命令提示符中将您的代理设置为
`set HTTP_PROXY=domain\username:password@myproxy:myproxyport`

例子：
`set http_proxy=IND\namit.kewat:xl123456@192.168.180.150:8880`

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2016-06-08T08:51:25.303

这对我有用（通过 CMD 在 Windows 上）：

```
pip install --proxy proxyserver:port requests 
```

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2018-05-02T14:40:08.683

```
$ pip --proxy http://proxy-host:proxy-port install packagename 
```

这对我有用

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2013-05-28T09:24:36.803

根据我们的安全政策**，我可能不会将 https**与 pypi 一起使用，SSL-inspection 会重写证书，它会破坏 pip 对 www.python.org 的内置安全性。中间的人是网络管理员。

所以**我需要使用普通的 http**。为此，我需要覆盖系统代理以及默认的 pypi：

```
bin/pip install --proxy=squidproxy:3128 -i http://www.python.org/pypi --upgrade "SQLAlchemy>=0.7.10" 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2018-09-06T11:44:53.720

打开 Windows 命令提示符。

设置代理环境变量。

```
set http_proxy=http://user:password@proxy_ip:port
set https_proxy=https://user:password@proxy_ip:port 
```

在同一 Windows 命令提示符下使用代理安装 Python 包。

```
pip install --proxy="user:password@proxy_ip:port" package_name 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2014-01-08T04:15:37.070

## 手机作为移动热点/USB 网络共享

如果我很难通过公司代理找到方法，我会通过我的手机连接到网络（如果我有 wifi，则为无线热点，如果没有，则使用 USB 系绳）并快速执行`pip install`.

可能不适用于所有设置，但应该让大多数人在紧要关头。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2017-02-15T11:26:15.760

在 Windows 7 中：

```
pip install --proxy DOMAIN\user:password@proxyaddress:port package 
```

IE：

```
pip install --proxy BR\neo:p4ssw0rd@myproxyrocks.com.br:8080 virtualenv 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2015-09-29T17:53:45.057

在 Ubuntu 14.04 LTS 中

```
 sudo pip --proxy http://PROXYDOM:PROXYPORT install package 
```

干杯

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2013-04-24T13:43:38.617

我遇到了同样的问题：在工作中使用身份验证的公司代理后面，我无法使用 pip 以及 Sublime Text 2（嗯，它与我的代理设置的自定义设置一起使用）。对于 pip（我将在 git 上尝试），我解决了安装 cntlm 代理的问题。配置非常简单：

1.  编辑cntlm.ini
2.  编辑“用户名”、“域”、“密码”字段
3.  使用您的代理设置添加“代理”行：`server:port`
4.  确保“NoProxy”行集成了“localhost”（默认情况下如此）
5.  注意默认端口：3128
6.  保存，就是这样。

要测试它是否有效，只需启动一个新的命令行工具，然后尝试：

```
pip install django --proxy=localhost:3128 
```

这对我有用。希望这会帮助你。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-06-17T08:13:57.833

在高级系统设置中设置环境变量。在命令提示符下，它的行为应该是这样的：

> C:\Windows\system32>echo %http_proxy%
> 
> [http://username:passowrd@proxy:port](http://username:passowrd@proxy:port)
> 
> C:\Windows\system32>echo %https_proxy%
> 
> [http://username:password@proxy:port](http://username:password@proxy:port)

后来，Simply `pip install whatEver`应该可以工作。

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2019-04-24T16:13:27.913

我可以通过运行来实现这一点：

```
pip install --proxy=http://user:pass@your.proxy.com:3128 package==version 
```

我在公司代理中使用 Python 3.7.3。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2018-03-27T16:45:42.497

如果您想通过代理升级 pip，可以使用（例如在 Windows 中）：

```
python -m pip --proxy http://proxy_user:proxy_password@proxy_hostname:proxy_port insta
ll --upgrade pip 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2015-06-08T06:34:52.637

对于 Windows 用户：如果要安装 Flask-MongoAlchemy，请使用以下代码

```
pip install Flask-MongoAlchemy --proxy="http://example.com:port"** 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2020-03-20T12:36:28.783

在具有身份验证的工作代理后面使用 pip，请注意，在使用用户和密码指定代理 url 时，某些操作系统需要引用：

```
pip install <module> --proxy 'http://<proxy_user>:<proxy_password>@<proxy_ip>:<proxy_port>' 
```

文档：[https ://pip.pypa.io/en/stable/user_guide/#using-a-proxy-server](https://pip.pypa.io/en/stable/user_guide/#using-a-proxy-server)

例子：

```
pip3 install -r requirements.txt --proxy 'http://user:password@192.168.0.1:1234' 
```

例子：

```
pip install flask --proxy 'http://user:password@192.168.0.1:1234' 
```

代理也可以在 pip.ini 中手动配置。例子：

```
[global]
proxy = http://user:password@192.168.0.1:1234 
```

文档：[https ://pip.pypa.io/en/stable/user_guide/#config-file](https://pip.pypa.io/en/stable/user_guide/#config-file)

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2019-09-17T09:12:58.297

如果您通过代理连接到 Internet，则运行某些命令可能会出现问题。

在命令提示符下设置代理配置的环境变量如下：

```
set http_proxy=http://username:password@proxyserver:proxyport
set https_proxy=https://username:password@proxyserver:proxyport 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-04-09T15:05:47.907

只在本地做怎么样？您很可能可以通过浏览器从 https 源下载

1.  下载你的模块文件（mysql-connector-python-2.0.3.zip /gz...等）。
2.  提取它并转到 setup.py 所在的提取目录并调用：

    ```
    C:\mysql-connector-python-2.0.3>python.exe setup.py install 
    ```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2015-07-15T10:37:09.960

在 CentOS（实际上我认为所有 linux 发行版都相似）运行

```
env|grep http_proxy 
```

和

```
env|grep https_proxy 
```

检查这些命令的输出（它们应该包含您的代理地址）。

如果输出为空或具有不正确的值，请修改它们，例如：

```
export http_proxy=http://10.1.1.1:8080
export https_proxy=http://10.1.1.1:8080 
```

现在尝试使用 pip 获取并安装一些包：

```
pip --proxy http://10.1.1.1:8080 install robotframework 
```

实际上我从来没有遇到过它不起作用的情况。对于某些系统，您需要成为 root（sudo 是不够的）。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2015-07-28T15:19:12.877

警告，“pip search”命令有一些不好的地方。搜索命令不使用代理设置，无论其传递方式如何。

我试图找出问题只尝试“搜索”命令，并发现这篇文章详细解释了该错误：[https ://github.com/pypa/pip/issues/1104](https://github.com/pypa/pip/issues/1104)

我可以用 python 2.7.9 在 Debian 8 上用 pip 1.5.6 确认该错误仍然存​​在。“pip install”命令就像一个魅力。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2016-01-29T13:53:35.680

我得到了错误：

```
chris@green:~$ sudo http_proxy=http://localhost:3128 pip install django==1.8.8 
Downloading/unpacking django==1.8.8
  Cannot fetch index base URL http://pypi.python.org/simple/
  Could not find any downloads that satisfy the requirement django==1.8.8
No distributions at all found for django==1.8.8
Storing complete log in /home/chris/.pip/pip.log 
```

（代理服务器的端口是转发到的 ssh 端口`localhost:3128`）。

我必须同时设置 http 和 https 代理才能使其工作：

```
chris@green:~$ sudo http_proxy=http://localhost:3128 https_proxy=http://localhost:3128 pip install django==1.8.8
Downloading/unpacking django==1.8.8
  Downloading Django-1.8.8.tar.gz (7.3Mb): 7.3Mb downloaded
  Running setup.py egg_info for package django

    warning: no previously-included files matching '__pycache__' found under directory '*'
    warning: no previously-included files matching '*.py[co]' found under directory '*'
Installing collected packages: django
  Running setup.py install for django

    warning: no previously-included files matching '__pycache__' found under directory '*'
    warning: no previously-included files matching '*.py[co]' found under directory '*'
    changing mode of build/scripts-2.7/django-admin.py from 644 to 755
    changing mode of /usr/local/bin/django-admin.py to 755
    Installing django-admin script to /usr/local/bin
Successfully installed django
Cleaning up... 
```

as`http://pypi.python.org/simple/`重定向到`https://pypi.python.org/simple`but`pip`的错误不会告诉你。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-05-20T12:41:54.243

我也不是这方面的专家，但我通过`all_proxy`在 ~/.bashrc 文件中设置变量使其工作。`~/.bashrc`要从终端打开文件并编辑它，请运行以下命令，

```
gedit ~/.bashrc & 
```

在文件末尾添加以下内容，

```
export all_proxy="http://x.y.z.w:port" 
```

然后打开一个新终端或在同一终端中运行以下命令，

```
source ~/.bashrc 
```

仅仅设置`http_proxy`和`https_proxy`变量对于简单的使用是不够的`pip install somepackage`。虽然以某种方式`sudo -E pip install somepackage`有效，但这给了我一些问题，以防我在我的用户文件夹中使用本地安装的 Anaconda。

PS - 我使用的是 Ubuntu 16.04。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2017-03-30T16:44:39.213

这对我有用：

```
pip --proxy proxy url:port command package 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-12-13T06:58:16.393

设置以下环境变量：`export PIP_PROXY=http://web-proxy.mydomain.com`

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2019-01-16T20:48:13.257

如果您使用的是 Linux，请以 root 身份：

```
env https_proxy=http://$web_proxy_ip:$web_proxy_port pip install something 
```

当您使用 env 时，它会为当前执行命令 pip install 导出变量 https_proxy。

$web_proxy_ip 是您的代理的主机名或 IP $web_proxy_port 是端口

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-05-23T17:40:53.880

[我使用“Fiddler”（ https://www.telerik.com/download/fiddler](https://www.telerik.com/download/fiddler)）解决了 Windows 中 PIP 的问题。下载并安装后，执行以下操作：

“规则” => 点击“自动验证”

示例： pip install virtualenv -proxy 127.0.0.1:8888

只需打开提示并使用。

[https://github.com/pypa/pip/issues/1182](https://github.com/pypa/pip/issues/1182)搜索“voltagex”（2015 年 5 月 22 日评论）

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-11-16T15:11:10.567

对于 Windows 转到 C:/ProgramData/pip/pip.ini，然后设置

[全球的]

代理 = [http://YouKnowTheRest](http://YouKnowTheRest)

与您的代理详细信息。这会永久配置 pip 的代理。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-09-25T05:57:50.070

一个更简单的方法可能是：

1.  在您的目录中创建一个名为“pip”的文件夹`$HOME`。
2.  在步骤 1 中创建的目录中创建一个名为“pip.ini”（Windows）或“pip.conf”（Linux）的文件
3.  在 pip.ini/pip.conf 下复制并粘贴以下行：

    ```
    [global]
    trusted-host = pypi.python.org
                   pypi.org
                   files.pythonhosted.org 
    ```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2019-11-08T10:19:56.807

1.  对于 PIP 安装：

```
ex:PORT = 9090
ex:PROXY_SERVER = stackoverflow
USERNAME:your user id
PASSWORD: your password 
```

• `sudo pip2 install PACKAGENAME --proxy https://USERNAME:PASSWORD@PROXY_SERVER:PORT/` 对于 Python2.7

• `sudo pip3 install PACKAGENAME --proxy https://USERNAME:PASSWORD@PROXY_SERVER:PORT/` 对于 Python3.5

例子：

```
sudo pip2 install pandas --proxy https://USERNAME:PASSWORD@PROXY_SERVER:PORT/ 
```

2.  `apt-get`安装_

```
sudo http_proxy=http://USERNAME:PASSWORD@PROXY_SERVER:PORT/ apt-get install PACKAGENAME 
```

例子：

```
sudo http_proxy=http://USERNAME:YOURPASSWORD@PROXY_SERVER:PORT/ apt-get install tensorrt

sudo http_proxy=http://USERNAME:YOURPASSWORD@PROXY_SERVER:PORT/ apt-get update 
```

# ruby-on-rails - 在用户和位置创建上分配管理员

> ID：14149428
> 
> 赞同：0
> 
> 时间：2013-01-04T00:22:36.507
> 
> 标签：ruby-on-rails, devise, nested-forms, cancan, rolify

我有一个用于用户注册的嵌套模型表单，它同时创建一个用户和一个位置。我希望自动为创建位置的用户分配管理员角色。我正在使用设计/cancan/rolify。关于如何做到这一点的任何想法？

能力模型

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.has_role? (:admin, Location.first)
      can :manage, :all
    end 
```

位置模型

```
class Location < ActiveRecord::Base
  resourcify
  has_and_belongs_to_many :users
  accepts_nested_attributes_for :users, :allow_destroy => true
  attr_accessible :lat, :long, :name, :street_address, :places_id, :user_attributes
  validates_uniqueness_of :places_id, :message => "location already taken"
end 
```

用户模型

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :locations
  accepts_nested_attributes_for :location
  rolify
  resourcify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :location_attributes
end 
```

好榜样

```
class Role < ActiveRecord::Base
  has_and_belongs_to_many :users, :join_table => :users_roles
  belongs_to :resource, :polymorphic => true

  scopify
end 
```

最后，注册表格

```
<% resource.build_location %>
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>
 <%= f.error_notification %>
 <%= f.fields_for :location do |location_form| %>
<%= location_form.text_field :name, "data-geo" => "name" %>
<%= location_form.text_field :places_id, "data-geo" => "id" %>
<% end %>

  <%= f.input :name, :autofocus => true %> 
  <%= f.input :email, :required => true %>
  <%= f.input :password, :required => true %>
  <%= f.input :password_confirmation, :required => true %>
  <%= f.button :submit, 'Sign up', :class => 'btn-primary' %>
<% end %>
<%= render "devise/shared/links" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:03:42.400

您将需要添加`user.add_role :admin, location`将处理注册表单发布请求的控制器。这可能是你`users_controller.rb`的`create`功能

# ios - 无法将数据添加到本地数据库 sqlite IOS

> ID：14149431
> 
> 赞同：2
> 
> 时间：2013-01-04T00:22:42.583
> 
> 标签：ios, sqlite

这是我的代码：

为了创建数据库，在我的 ViewDidLoad 中：

```
 NSString *docsDir;
    NSArray *dirPaths;

    dirPaths=NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"contacts.db"]];

    NSFileManager *filemgr=[NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath:databasePath]==NO)
    {
        NSLog(@"Creating DB");
        const char *dbpath=[databasePath UTF8String];

        if (sqlite3_open(dbpath, &contactDB)==SQLITE_OK)
        {
            char *error_msg;
            const char *sql_stmt = "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, URL TEXT, EMAIL TEXT, CODE TEXT, FULL TEXT)";

            if (sqlite3_exec(contactDB, sql_stmt, NULL, NULL, &error_msg) != SQLITE_OK)
            {
               NSLog(@"Failed to create table");
            }

            sqlite3_close(contactDB);

        } else {
            NSLog(@"Failed to open/create database");
        }
    } else {
        NSLog(@"DB exists");
    } 
```

我可以看到输出消息`"Creating DB"`

然后我必须在那里添加我的数据，我确实有：

```
sqlite3_stmt    *statement;

                const char *dbpath = [databasePath UTF8String];

                if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
                {
                    NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS (url, email, code, full) VALUES (\"%@\", \"%@\", \"%@\", \"%@\")", url_2, mail, keycode,full_2 ];

                    const char *insert_stmt = [insertSQL UTF8String];

                    sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);
                    if (sqlite3_step(statement) == SQLITE_DONE)
                    {
                        NSLog(@"Contact added");
                    } else {
                        NSLog(@"Failed to add contact");
                    }
                    sqlite3_finalize(statement);
                    sqlite3_close(contactDB);
                } else {
                    NSLog(@"PROBLEM - CONTACT NOT ADDED");
                } 
```

我看到了`"PROBLEM - CONTACT NOT ADDED"`消息。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:43:51.323

问题是您正在打开数据库`NSDocumentationDirectory`，而不是`NSDocumentDirectory`.

一些不相​​关的观察：

1.  如果`sqlite3_open()`失败，您应该查看有助于诊断问题根源的数字返回代码。`sqlite3.h`您可以在头文件中查找值。

2.  与您的代码示例无关的观察：您应该检查您的`sqlite3_prepare_v2()`返回代码，因为 SQL 错误通常在那里被识别，而不是在`sqlite3_step()`. 如果它返回的不是`SQLITE_OK`，则立即调用`sqlite3_errmsg()`以准确确定失败的原因。

3.  您不应该使用`stringWithFormat`为`INSERT`SQL 语句添加值。相反，使用`?`占位符，然后使用[`sqlite3_bind_XXX()`](https://www.sqlite.org/c3ref/bind_blob.html)函数将值绑定到这些 SQL 值。事实上，如果您插入的任何值包含引号，您的 SQL 就会失败（并且容易受到 SQL 注入攻击）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T11:23:14.690

如@Rob所示，您犯了一个小错误...

代替

`dirPaths=NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);`

你应该使用

`dirPaths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);`

以下是更正后的代码，

```
NSString *docsDir;
NSArray *dirPaths;

dirPaths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];
databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"contacts.db"]];

NSFileManager *filemgr=[NSFileManager defaultManager];

if ([filemgr fileExistsAtPath:databasePath]==NO)
{
    NSLog(@"Creating Database...");
    const char *dbpath=[databasePath UTF8String];

    if (sqlite3_open(dbpath, &contactDB)==SQLITE_OK)
    {
        char *error_msg;
        const char *sql_stmt = "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, URL TEXT, EMAIL TEXT, CODE TEXT, FULL TEXT)";

        if (sqlite3_exec(contactDB, sql_stmt, NULL, NULL, &error_msg) != SQLITE_OK)
        {
           NSLog(@"Failed to create table");
        }

        sqlite3_close(contactDB);

    } 
    else 
    {
        NSLog(@"Failed to open/create database");
    }
} 
else 
{
    NSLog(@"DB exists");
} 
```

你可以像这样插入数据，

```
sqlite3_stmt *statement;

const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
{
    NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS (url, email, code, full) VALUES (\"%@\", \"%@\", \"%@\", \"%@\")", url_2, mail, keycode,full_2 ];

    const char *insert_stmt = [insertSQL UTF8String];

    sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        NSLog(@"Contact added");
    } 
    else
    {
        NSLog(@"Failed to add contact");
    }
    sqlite3_finalize(statement);
    sqlite3_close(contactDB);
} 
else
{
    NSLog(@"PROBLEM - CONTACT NOT ADDED");
} 
```

谢谢你...！！！

# php - php中的打包目录

> ID：14149436
> 
> 赞同：2
> 
> 时间：2013-01-04T00:23:10.563
> 
> 标签：php, linux, zip

我打包目录树

```
system('zip -r -0   '.$file_arch.' /var/www/catalog/catalog_user/xml/1/ '); 
```

它有效，但我解压缩所有子文件夹的完整路径，我只想打包目录中的内容

参数 -j 不起作用..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:30:43.297

删除`-r`见[http://linux.about.com/od/commands/l/blcmdl1_zip.htm](http://linux.about.com/od/commands/l/blcmdl1_zip.htm)

-r 代表递归，将包括所有子文件夹。

或更改为：

```
system('cd /var/www/catalog/catalog_user/xml/1/ && zip -r -0   '.$file_arch.' . '); 
```

在没有整个路径的情况下存储。

# android - v2：ant 构建所需的 android 更新 lib-project？

> ID：14149440
> 
> 赞同：2
> 
> 时间：2013-01-04T00:23:47.150
> 
> 标签：android, ant, maps

我成功升级了我的应用程序以使用 Android Google Maps V2 而不是 V1，并一直使用 Eclipse 进行构建。当我转向让 ant 构建工作时，我立即发现 ant 想要构建 google-play-services_lib 库项目，但来自 Google 的项目分发不包含 build.xml 文件。

经过一番研究，我决定需要在 Google 提供的项目上运行“android update lib-project”以生成 build.xml 文件。我这样做了，现在蚂蚁构建工作了。

然而，这有点痛苦，因为它要么意味着我必须将库项目签入源代码管理，以便团队的其他成员可以构建，要么要求每个人自己获取它并执行“android update lib -项目”。无论哪种方式，该项目都必须随着时间的推移进行维护，以获取 Google 可能发布的任何更新。

这种解决方案真的是解决这个问题的唯一方法吗？

谢谢，

马克·彼得斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:38:18.690

> 这种解决方案真的是解决这个问题的唯一方法吗？

好吧，您可以[在 Maps V2 问题跟踪器](http://code.google.com/p/gmaps-api-issues/issues/list)上提交问题，让他们发送命令行构建项目文件。或者，如果您是 Maven 用户，您可以查看 Maven+Android 社​​区是否/何时对 Google Play 服务库进行 Maven 化，如果他们还没有这样做的话。

但是，归根结底，命令行构建需要相应的构建文件。类似地，Eclipse 用户必须将库项目导入 Eclipse —— 它不会被 IDE gnomes（懒惰的流浪汉！）神奇地放到那里。

# javascript - 附加 .each 并在下一个循环 jquery 上获取值

> ID：14149448
> 
> 赞同：2
> 
> 时间：2013-01-04T00:25:16.090
> 
> 标签：javascript, jquery, each, .post

请参考以下代码：

```
 var index=0;
    var load=0;
    $("td.load_ads").each(function(){
        var loading=$(this);
        $.post('/self_coded_helpers/jpost_get_ads.php',{index:index,type:'fetch_id'},function(data){
            if($("input.exist").length > 0){
                $("input.exist").each(function(){
                    if($(this).val()==data){
                        load='0';
                    }else{
                        load='1';
                    }
                });
            }else{
                load='1';
            }
            if(load == 1){
                $.post('/self_coded_helpers/jpost_get_ads.php',{index:index,type:'fetch_details',id:data},function(data2){
                    $("div.main_ads_div").append('<input type="hidden" class="exist" name="exist" value="'+data+'">');
                    if(data2!=0){
                        loading.html(load+'--'+data2);
                    }else{
                        loading.html("Place a Free Ad Now!");
                    }
                });
            }else{
                loading.html(load+"--"+data+"Place a Free Ad Now!");
            }
        });
        index=index+1;
    }); 
```

我所做的是`input`每次循环时都附加一个元素`td.load_ads`：

```
$("div.main_ads_div").append('<input type="hidden" class="exist" name="exist" value="'+data+'">'); 
```

希望我能在下一次相同的循环中得到它`.each`。

但是 var load 一直返回 1，因为在这种特殊情况下，我的 input.exist 长度总是错误的。

是因为输入没有那么快附加吗？

HTML 代码：

```
 <table id="main_ads_table" col="7" row="4">
        <tr>
            <td colspan="8"></td>
        </tr>
        <tr>
            <td class="load_img"></td>
            <td class="load_img"></td>
            <td class="load_img"></td>
            <td class="load_img"></td>
            <td class="load_img"></td>
            <td class="load_img"></td>
            <td class="load_img"></td>
            <td class="load_img"></td>
        </tr>
        <tr>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
        </tr>
        <tr>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
        </tr>
        <tr>
            <td class="load_ads"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads priority"></td>
            <td colspan="2">
                                            <div id="main">

                                            <?php if ($this->countModules('position-12')): ?>
                                                    <div id="top"><jdoc:include type="modules" name="position-12"   />
                                                    </div>
                                            <?php endif; ?>

                                                    <jdoc:include type="message" />
                                                    <jdoc:include type="component" />

                                            </div><!-- end main -->
            </td>
            <td class="load_ads priority"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads"></td>
        </tr>
        <tr>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
        </tr>
        <tr>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads priority"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
            <td class="load_ads"></td>
        </tr>
    </table> 
```

.POST 脚本

```
 $type=$_POST['type'];
    function limit_words($string, $word_limit)
    {
        $words = explode(" ",$string);
        return implode(" ",array_splice($words,0,$word_limit));
    }

    if($type=='fetch_id'){
        $query="SELECT * FROM ads1_adsmanager_ads ORDER BY RAND() LIMIT 1";
        $db->setQuery($query);
        $ad_details=$db->loadRow();

        echo $ad_details[0];
    }elseif($type=='fetch_details'){
        $id=$_POST['id'];
        $query="SELECT * FROM ads1_adsmanager_ads WHERE id=$id";
        $db->setQuery($query);
        $ad_details=$db->loadRow();

        if(!empty($ad_details)){
            echo '<input type="hidden" name="id" value="'.$ad_details[0].'">';
            echo limit_words($ad_details[9],5);
            echo '<br />';
            echo limit_words($ad_details[10],20);
        }else{
            echo '0';
        }

    } 
```

添加了我的 HTML 和 Post Script。看看它是否可以提供更多帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:57:19.373

你让自己很难受。您无需先收集 ID 或使用 ajax 获取每个单独的广告。通过将所有内容都放在一篇文章中，您首先不会遇到重复的问题。

jpost_get_ads.php：

```
function limit_words($string, $word_limit)
{
    $words = explode(" ",$string);
    return implode(" ",array_splice($words,0,$word_limit));
}

$count = (int)$_POST['count'];
$query="SELECT id, title, description FROM ads1_adsmanager_ads ORDER BY RAND() LIMIT $count";
$db->setQuery($query);
$ad_details = array();

while ($row = $db->loadAssoc()) {
    $key = array_search($ids, $row['id']);
    $row['title'] = limit_words($row['title'],5);
    $row['description'] = limit_words($row['description'],20);

    $ad_details[$key] = $row;
}

header('Content-Type: application/json');
echo json_encode($ad_details);
exit(); 
```

javascript

```
var count = $("td.load_ads").length;

$.post('/self_coded_helpers/jpost_get_ads.php', { count: count } function(ads){
   $("td.load_ads").each(function(){
      var ad = ads.unshift()
        , content;

      if (ad) {
         content = ad.title + "<br>" + ad.description;
      } else {
         content = "Place a Free Ad Now!";
      }

      $(this).html(content);
    });
}); 
```

# opengl - 从顶点数据中获取像素法线

> ID：14149452
> 
> 赞同：2
> 
> 时间：2013-01-04T00:25:46.397
> 
> 标签：opengl, glsl, shader, normals, vertices

对于照明，我需要片段着色器中的法线向量。我阅读的教程要求我提供法线数据以及模型的顶点。但是顶点指定的面不是已经给出了法线吗？

为了计算法线，我需要三角形的所有三个顶点。但据我所知，我们只能在顶点着色器的每个通道中访问一个顶点。

如何根据顶点数据计算每个像素的法线向量？我想在那之后应用法线贴图，但那是后来的，与这个问题并没有真正的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:32:08.860

> 但是顶点指定的面不是已经给出了法线吗？

是的，没有。从技术上讲，您可以确定每张脸的法线，但通常在建模器中设计 3D 模型的艺术家希望微调法线以调整照明计算。

> 基于顶点数据的每个像素的法线向量？

只需将法线作为可变变量（`varying`或`out`关键字，取决于 GLSL 版本）传递给片段着色器。法线向量将被重心插值。然后，您可以在片段着色器中将其标准化为单位长度。

# java - 将 Spring MVC 渲染为字符串或 PDF

> ID：14149455
> 
> 赞同：4
> 
> 时间：2013-01-04T00:26:08.660
> 
> 标签：java, spring, spring-mvc

我正在尝试将 Spring MVC 控制器呈现为 String 以使用 iText 创建 PDF。因为应用程序位于 Oracle Access Manager 后面，所以我无法对页面的 URL 进行 URL 请求并将输出保存到字符串，因此我需要在不发出另一个 HTTP 请求的情况下呈现页面。

我的目标是执行以下操作：

```
MyMvcController controller = new MyMvcController();
ModelAndView modelAndView = new ModelAndView("TemplateName");

...
modelAndView.addObject(someObject);
etc, etc
...

String html = controller.render(modelAndView);
...
render in iText to a PDF
... 
```

我已经可以使用 Flying Saucer + iText 渲染标记，我只是有一段时间将控制器的输出捕获到字符串。有什么想法吗？我愿意先不渲染到字符串，最终结果只需要是我可以附加到电子邮件的 PDF，并且我需要能够动态地将数据添加到我正在渲染的 JSP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:46:23.207

我假设您使用 jsp 作为视图技术 - 如果是这样，则渲染不受 Spring 控制，而是被分派到要渲染的容器（`dispatcher.forward(request, response)`）。就像您发现的那样，我怀疑是否有办法拦截控制器层中的响应，作为替代方案，让我推荐这种方法：

1.  使用[Freemarker](http://freemarker.sourceforge.net/)或[Stringtemplate](http://www.stringtemplate.org/)之类的模板引擎来生成 html，这样您需要的特定 html 可以独立于 Spring MVC 生成。

2.  使用上面生成的html通过iText/Flying Saucer运行生成pdf。

**编辑**

经过一番思考，另一种可行的方法是简单地编写一个 servlet 过滤器来拦截到您的特定控制器请求映射的请求，该过滤器可以拦截 html 响应，使用 itext 转换为 pdf 并流式传输 pdf。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T07:22:06.083

正如@Biju Kunjummen 已经说过的，渲染是在视图中而不是在控制器中完成的。控制器只准备模型，视图将模型数据添加到静态内容并渲染。

SpringMVC 中默认的视图技术是 JSP。PDF 可以被视为另一种视图技术，SpringMVC 已经规定使用 PDF 作为视图。与其转发到 JSP 视图，不如转发到 PDF 视图。

查看 Spring 的[AbstractPDFView](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/view/document/AbstractPdfView.html)并查看本教程： http: [//numberformat.wordpress.com/2009/07/20/spring-mvc-with-pdf-output/](http://numberformat.wordpress.com/2009/07/20/spring-mvc-with-pdf-output/)。不幸的是，本教程在 中手动创建 PDF `buildPDFDocument`，这并不是您想要的。您需要将教程扩展到

*   `renderMergedOutputModel`在方法中将 JSP 渲染为 HTML
*   用飞碟把HTML+CSS做成PDF的`buildPDFDocument`方法。

正如该`renderMergedOutputModel`方法的 JavaDoc 所述

> 第一步是准备请求：在 JSP 案例中，这意味着将模型对象设置为请求属性。第二步将是视图的实际呈现，例如通过 RequestDispatcher 包含 JSP。

代码应如下所示：

> RequestDispatcher rd = request.getRequestDispatcher("some.jsp"); request.setAttribute("anotherString", model.getValue());
> rd.forward（请求，响应）；

但是有一个技巧：我们不想渲染到 servlet 响应，而是使用包装器渲染到单独的 ByteArrayOutputStream。`ByteArrayOutputStream`可以用作飞碟的输入。在此处检查包装器的解决方案： [JSP 编译到字符串或内存字节数组与 Tomcat/Websphere](https://stackoverflow.com/questions/1189094/jsp-compilation-to-string-or-in-memory-bytearray-with-tomcat-websphere)

在该`buildPDFDocument`方法中，您现在以 ByteArrayOutputStream 的形式从 Wrapper 获取呈现的 HTML，并使用它在 Flying Saucer 中呈现 PDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T08:34:24.177

我找到了一个教程：[http ://technologicaloddity.com/2011/10/04/render-and-capture-the-output-of-a-jsp-as-a-string/](http://technologicaloddity.com/2011/10/04/render-and-capture-the-output-of-a-jsp-as-a-string/)

它需要spring框架和dwr api。

我还没有测试它，但如果它有效，我将不再需要速度来呈现 HTML 电子邮件模板。

# paypal-ipn - PayPal IPN 通知中未显示日文字符

> ID：14149457
> 
> 赞同：2
> 
> 时间：2013-01-04T00:26:35.590
> 
> 标签：paypal-ipn

在 PayPal（沙盒）中，我用日文字符定义了一个日文用户，其名字和姓氏。

但是，我收到的 IPN 通知是用 charset=windows-1252 编码的。事实上，这是从 Paypal 收到的 HTTP 请求中的参数之一。

我想用他/她的名字问候用户，但由于我收到的似乎不是 Unicode，我会发送垃圾字符而不是付款人姓名。

有什么方法可以从 Paypal 以 Unicode 将 IPN 通知发送给我的听众？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T01:12:21.790

我在这里找到了答案：[https ://www.x.com/developers/paypal/forums/ipn/pdt/ipn-encoding-returns-invalid](https://www.x.com/developers/paypal/forums/ipn/pdt/ipn-encoding-returns-invalid)

你应该去**Profile** -> **Selling Preferences** -> **Language Encoding** -> **More Options**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T07:10:22.500

此设置的新路径： **个人资料 -> 我的销售工具 -> PayPal 按钮语言编码 -> 更多选项 -> “您是否要对从 PayPal 发送给您的数据使用相同的编码（例如，IPN、可下载日志、电子邮件） ？” -> 选择“否，使用：UTF8”**

# android - 每周显示一次通知

> ID：14149458
> 
> 赞同：1
> 
> 时间：2013-01-04T00:26:37.227
> 
> 标签：android

我是 Android 通知的新手，我希望该应用程序每周日显示一次通知。当活动未运行时，我不确定如何执行此操作。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:47:59.473

您应该开始阅读并了解警报的工作原理：[在这里](http://developer.android.com/reference/android/app/AlarmManager.html)，您可以让警报在给定时间激活通知。

注意：重启后警报不会被保存，因此您需要添加一个启动完成接收器。

# python - Twitter API Python 字符编码

> ID：14149460
> 
> 赞同：3
> 
> 时间：2013-01-04T00:26:42.277
> 
> 标签：python, api, twitter, encoding

我正在试验 Python 的 Twitter API 并遇到了字符编码/解码问题；当我为用户（在本例中为@BBCWorld）收集推文时，如果有*特殊*标点符号，我会收到以下错误：

```
286952044814794753 :  Traceback (most recent call last):
  File "C:\Python27\lib\encodings\cp850.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode character u'\u201c' in position 0: character maps to <undefined> 
```

注意：开头的长数字是导致错误的推文的 ID。

导致此问题的特定字符是一个角（打开）双引号（如 MS-Word 中使用的那些）。有没有办法以兼容的形式显示这种标点符号？理想情况下，我想通过使用替换来清理推文以克服这种错误，从而保持上下文，而不是省略字符。

这是代码的核心：

```
tweets=api.GetUserTimeline('BBCWorld') 
try: 
    for tweet in tweets: 
        print tweet.id, ": ", (tweet.text) 
except UnicodeEncodeError as uee: 
    print uee 
```

感谢您的任何指点，

米卢汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:07:28.853

这个问题似乎不是 python-twitter 或 python 的问题 - 这是 Windows cmd 的问题。

如果您在合适的 Unix 终端下尝试此操作，您将得到以下结果：

```
>>> import twitter
>>> api = twitter.Api()
>>> print api.GetStatus('286952044814794753').text
“How do you change mindsets at a societal level, in a country of 1.2bn people?” - Viewpoints from India http://t.co/RiP4t71q #Delhigangrape 
```

看一下这个问题，讨论如何在 Windows 下处理这个问题：[Unicode not print correct to cp850 (cp437), play card suits](https://stackoverflow.com/questions/4233227/unicode-not-printing-correctly-to-cp850-cp437-play-card-suits)

我最好的选择是将控制台字体和代码页更改为兼容 unicode，如下所述： [https](https://stackoverflow.com/a/4234515/679897) ://stackoverflow.com/a/4234515/679897 或此处：[http ://www.velocityreviews.com/forums /t717717-python-unicode-and-windows-cmd-exe.html](http://www.velocityreviews.com/forums/t717717-python-unicode-and-windows-cmd-exe.html)

# c# - VS2012 导出“用户设置”

> ID：14149461
> 
> 赞同：4
> 
> 时间：2013-01-04T00:27:02.193
> 
> 标签：c#, xml, settings.settings

我正在尝试找到一个好的系统来存储用户可以更改的设置。
我试图使用一个`.ini`文件，但我似乎无法保存和加载一些值，比如颜色。
我也尝试过使用`XML`，但这使我的速度减慢到无用的地步。

我想知道是否可以`Settings.settings`从 Properties 项目中导出。如果是这样，如何导出到`XML`文件？

**这是我用来调用设置的一些代码**

```
 button1.BackColor = Properties.Settings.Default.ColorINFO;
        button2.BackColor = Properties.Settings.Default.ColorWARNING;
        button3.BackColor = Properties.Settings.Default.ColorServer; 
```

**这是我用来保存设置的代码**

```
 Properties.Settings.Default.ColorINFO = button1.BackColor;
        Properties.Settings.Default.ColorWARNING = button2.BackColor;
        Properties.Settings.Default.ColorServer = button3.BackColor;
        Properties.Settings.Default.Save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:45:09.053

我通过使用允许读取和写入任何 XML 文件的 XML 编辑器来修复它，这样我可以制作自定义设置文件。谢谢大家的帮助 ：）。

# ios - 如何正确实现 didReceiveWriteRequests？iOS6 Core蓝牙

> ID：14149462
> 
> 赞同：19
> 
> 时间：2013-01-04T00:27:07.463
> 
> 标签：ios, ios6, bluetooth, core-bluetooth

我实现了 iOS CoreBluetooth 客户端和服务器来发送数据

```
client site
[self.connectedPeripheral writeValue:mainData forCharacteristic:characteristic type:CBCharacteristicWriteWithResponse]; 
```

和

```
- (void)peripheral:(CBPeripheral *)peripheral didWriteValueForCharacteristic:(CBCharacteristic *)characteristic 
{
   NSString *s= [[NSString alloc] initWithData:characteristic.value encoding:NSUTF8StringEncoding];
   NSLog(@"didWriteValue characteristic.value: %@ ", s);
} 
```

和服务器站点

```
- (void)peripheralManager:(CBPeripheralManager *)peripheral didReceiveWriteRequests:(NSArray *)requests
{
  NSData *res= [[NSString stringWithFormat:@"Hello"] dataUsingEncoding:NSUTF8StringEncoding];
 [self.peripheral updateValue:res
                        forCharacteristic:self.writeCharacteristic
                     onSubscribedCentrals:nil];
 [peripheral respondToRequest:aReq withResult:CBATTErrorSuccess];
} 
```

但是，客户端无法接收任何数据。任何想法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-12T09:12:41.793

根据 Apple 在 CoreBluetooth 上的文档，您应该使用：

```
- (void)respondToRequest:(CBATTRequest *)request withResult:(CBATTError)result; 
```

回复中央。这也是收到阅读请求时的选择

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-09T11:56:27.333

要使用：

```
- (BOOL)updateValue:(NSData *)value forCharacteristic:(CBMutableCharacteristic *)characteristic onSubscribedCentrals:(NSArray *)centrals; 
```

您首先需要使用订阅它

```
- (void)setNotifyValue:(BOOL)enabled forCharacteristic:(CBCharacteristic *)characteristic; 
```

从客户端。

# javascript - 使用 jQuery load 方法将新内容加载到 li 元素

> ID：14149463
> 
> 赞同：1
> 
> 时间：2013-01-04T00:27:12.717
> 
> 标签：javascript, jquery, html, jquery-selectors

我在使用 load 方法将新内容加载到 li 元素时遇到了一些困难。当我尝试使用它时，新内容会添加到元素之前，它会被添加到顶部而不是替换当前内容。这是元素布局

```
 <!-- List The News Items mainPage.php-->
                        <li id="news_list"> 

                            <?php include 'libs/file.php';?>
                         </li>

           //pagination links
          for($i=1; $i<=$pages; $i++)
            { 
                echo '<li id="'.$i.'"><a href="#" >'.$i.'</a></li>';

                  } 
```

和js函数

```
 //js function
            //Pagination Click
     $(".paging li").click(function(event){
     event.preventDefault();
     $("#news_list").val("");
      //Loading Data
      var pageNum = $(this).attr("id");
     $("#news_list").load("file.php?news_page=" + pageNum);
      $(this).children("a").setClass("active");

}); 
```

这是我正在构建的分页脚本的一部分。还有下一行

```
 $(this).children("a").setClass("active"); 
```

不将该类应用于所选 li 内的嵌套“a”元素。任何帮助表示赞赏。

# email - 在 Marmalade 中为剧本发送邮件并使用 libcurl

> ID：14149468
> 
> 赞同：2
> 
> 时间：2013-01-04T00:28:29.490
> 
> 标签：email, libcurl, blackberry-playbook, marmalade, playbook

我正在编写使用剧本和果酱发送邮件的代码，这是我的代码

```
curl_easy_setopt(curl, CURLOPT_URL, "smtp://smtp.gmail.com:587");
    //curl_easy_setopt(curl, CURLOPT_PORT, this->_PORT);
    curl_easy_setopt(curl,CURLOPT_CONNECTTIMEOUT, 15);
    curl_easy_setopt(curl,CURLOPT_TIMEOUT, 30);
    curl_easy_setopt(curl, CURLOPT_USE_SSL, (long)CURLUSESSL_ALL);
    curl_easy_setopt(curl, CURLOPT_USERNAME, "xxxxxxx@gmail.com");
    curl_easy_setopt(curl, CURLOPT_PASSWORD, "xxxxxxx");
    curl_easy_setopt(curl, CURLOPT_MAIL_FROM, this->_FROM);
    recipients = curl_slist_append(recipients, this->_TO);
    curl_easy_setopt(curl, CURLOPT_MAIL_RCPT, recipients);
    curl_easy_setopt(curl, CURLOPT_READFUNCTION, payload_source);
    curl_easy_setopt(curl, CURLOPT_READDATA, &upload_ctx);
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);
    res = curl_easy_perform(curl); 
```

这是来自 libcurl 的示例。( [http://curl.haxx.se/libcurl/c/smtp-tls.html](http://curl.haxx.se/libcurl/c/smtp-tls.html) )

但是每次执行 curl_easy_perform 时，我都会收到错误**CURLE_COULDNT_RESOLVE_HOST**与每个地址无关，如果它是 http、smtp、ftp 等。

如果我输入 IP 而不是名称，我总是会得到 Permission Denied。

我认为错误是 fake-ares.cpp 及其异步解析。

我正在使用**libcurl 7.21.7**和**Marmalade 6.1**

谁能帮我？:/ 或者还有其他发送邮件的方法吗？

谢谢

# multicast - 如何在 OpenWRT 中启用 IGMP Snooping？

> ID：14149469
> 
> 赞同：2
> 
> 时间：2013-01-04T00:28:43.437
> 
> 标签：multicast, openwrt, igmp

我在 TP-LINK TL-WR703N 上使用 OpenWRT。我需要阻止有线端的大量多播数据在 Wifi 上传输。我想我可以为此使用 IGMP Snooping，因为我发现了一条评论[“从 2.6.34 开始，内核具有软件桥的 IGMP 监听功能（在 OpenWrt 中默认禁用）](http://wiki.openwrt.org/doc/howto/udp_multicast) ”并且我的内核是运行 r34761 的 3.6.11，但我找不到任何解释如何打开此功能的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T21:17:47.527

终于在[这里](https://forum.openwrt.org/viewtopic.php?pid=188293)得到了回应：

> echo "1" > /sys/devices/virtual/net/br-lan/bridge/multicast_snooping

或将其设置在文件中`sysctl.conf`

# postgresql - 用户输入处理 postgresql

> ID：14149476
> 
> 赞同：0
> 
> 时间：2013-01-04T00:30:22.820
> 
> 标签：postgresql, perl-module

我觉得我错过了一个非常基本的概念。我可以使用一些说明或参考材料。

在我的网站上，我有一个用户在输入框中输入文本并将其提交到要存储的数据库。我使用下面代码块中的函数将该文本插入数据库，其中`$conn->exec(query)`来自[Pg.pm](http://search.cpan.org/~mergl/pgsql_perl5-1.9.0/Pg.pm)。

```
$conn->exec("select someFunc($mykey,'text to insert');"); 
```

现在，这可行，但容易受到 sql 注入的攻击，或者即使用户输入逗号，它也会中断。

我阅读了有关[DBD::Pg](http://search.cpan.org/~turnstep/DBD-Pg-2.16.1/Pg.pm)的内容，其中包含`prepare`我想要的语句，但我找不到与`Pg.pm`. 我错过了吗？

如果`Pg.pm`不支持`prepare`。我应该使用支持该`prepare`语句的 perl 模块吗？或者我可以按照[bobby-tables](http://bobby-tables.com/postgresql.html)`quote_ident()`中概述的方法使用`quote_literal`插入/更新用户输入字段的 SQL 函数。

我应该如何以安全的方式处理用户输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:41:59.770

您*不能*只使用`quote_ident`and `quote_literal`，因为它们处于 SQL 级别，因此可以应用于使用 调用的动态 SQL `EXECUTE`。将参数传递给函数时对您没有任何好处，因为 SQL 字符串解析（和 SQL 注入攻击风险）发生在函数甚至使用这些参数执行之前。

您*确实*需要准备好的语句支持或理解 PostgreSQL 文字引用规则的强大、安全的文字转义函数。如果您的数据库驱动程序两者都没有提供，那么它是不安全的，并且应该被丢弃以支持提供的一个。

# linux - 在 BeagleBoard 上登录 Angstrom 时自动启动程序

> ID：14149477
> 
> 赞同：1
> 
> 时间：2013-01-04T00:30:33.670
> 
> 标签：linux, beagleboard, autostart, angstrom-linux

登录后如何自动启动应用程序？我尝试了以下方法：

1.  正在编辑`/etc/inittab`，但我没有`/etc/inittab`文件，看起来我的系统使用 systemd。
2.  通过将其添加到脚本来启动我的应用程序`/etc/rc.local`。
3.  在 .in中添加脚本`/etc/init.d`和到脚本的符号链接 `/etc/rc5.d/S51script_name`。
4.  `~/.bashrc`从和调用我的脚本`~/.bash_profile`。
5.  向 systemd 添加服务，但我无法让它工作，而且它似乎比我的目的更复杂。

我在 BeagleBoard xM 上运行 Angstrom v2012.01-core - Kernel 3.0.17+。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T00:30:33.670

找到答案：脚本 /etc/profile 在用户登录时运行。您可以在最后添加一行来启动您的应用程序。

# regex - 正则表达式作为触发器

> ID：14149491
> 
> 赞同：6
> 
> 时间：2013-01-04T00:32:17.473
> 
> 标签：regex, emacs, yasnippet

工作中的代码约定之一是在方括号和圆括号内包含一个空格的填充。所以`list[ index ]`，不是`list[index]`。添加这些空格可能很烦人，所以我尝试编写一个片段：

```
# name: Bracket
# key: [
# --
[ ${1:exp} ] 
```

这适用于左方括号前面有空格或行首的情况，但不适用于前面有标识符的情况。我认为这样做的一种方法是让触发器成为正则表达式：

```
# key: "[:ascii:]"[ 
```

或类似的东西。这甚至可能吗？还是有其他聪明的方法来完成这项工作？我正在为 python 写这个，但我认为这不重要。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T07:46:00.820

我不了解 YASnippet，但是使用[自动配对](https://github.com/capitaomorte/autopair)（可以*通过*打包系统安装）可以轻松实现您想要的：

```
(defun autopair-space-after-bracket (action pair pos-before)
  (when (and (eq action 'opening)
             (eq pair ?\]))
    (insert "  ")
    (backward-char)))

(setq autopair-handle-action-fns (list #'autopair-default-handle-action
                                       #'autopair-space-after-bracket)) 
```

* * *

使用它，并从以下情况开始（`|`标记点位置）：

> `list|`

然后插入`[`产量：

> `list[ | ]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:33:39.300

## 次模解决方案

我也不得不处理这样的编码标准。我最初的解决方案与[@Francesco](https://stackoverflow.com/a/14153161/903943)基于自动配对的解决方案相同。

但是，在某些情况下，我实际上想删除此填充，因此使此次要模式更加灵活。我绝对建议将它与某种配对分隔符插入工具一起使用（我最喜欢的是自动配对）。

参见： [定界垫](https://github.com/lewang/delim-pad)

## 使用 yasnippet

继续使用 yasnippet ...（顺便说一句，自动配对和 yasnippet 都是由[João Távora](http://github.com/capitaomorte)编写的，两者都非常强大和灵活。向那个人致敬！）

即使您将“[”识别为*key*，您仍然必须按住触发键来展开代码段。这很快就会累。

Yasnippet 还允许您直接将片段绑定到键，因此这将起作用：

```
# -*- mode: snippet -*-
# name: beginsquare
# binding: [
# --
[ $0 ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:08:40.777

这不起作用的原因是因为您正在尝试扩展，`list[`而不是`[`在此方括号之前。Yasnippet 是“不是你的家伙”，我想说的是在`[`. 最后，我将向您展示 yasnippet 的更常见用法。

考虑到我真的不想在`TAB`输入括号时按下激活键（例如），我会选择 Francesco 的上述答案。如果有帮助，我也会使用自动配对。

此外，使用 yasnippet 的一种好的或至少更好的方法是，如果您确实有兴趣将其仅用于列表或您愿意事先定义的某些情况。考虑为您经常使用的代码创建许多片段，您将非常快速地生成代码。无论如何，这是我认为适合您在这种情况下需要的示例：

`list[ $0 ]`

将它绑定到任何一个`list`或什至更短`l`，无论您的船漂浮在哪里。

就我个人而言，我会结合使用 autopair 和 yasnippet，它们都很棒。祝你好运！

复制粘贴：

```
# name: List
# key: list
# --
list[ $0 ] 
```

# rest - 如何找到 fb:comments 的 OpenGraph url？

> ID：14149493
> 
> 赞同：0
> 
> 时间：2013-01-04T00:32:27.177
> 
> 标签：rest, facebook-opengraph, facebook-comments

我们继承了一个应用程序，它使用

```
<fb:comments href="/article/101" width="500" num_posts="20"></fb:comments> 
```

并且评论的工作类似于这个小提琴：http: [//jsfiddle.net/Couto/w8xcf/](http://jsfiddle.net/Couto/w8xcf/)没有指定完整的网址。

但是，现在他们希望获得该文章的全部评论，以便在网站的其他地方使用。如果它使用完整的 url 作为[http://domain.com/article/101](http://domain.com/article/101)我们可以轻松地使用 OpenGraph 查询：

[https://graph.facebook.com/?ids=http://example.com/](https://graph.facebook.com/?ids=http://example.com/)

[https://graph.facebook.com/comments/?ids=http://example.com/](https://graph.facebook.com/comments/?ids=http://example.com/)

```
https%3A%2F%2Fgraph.facebook.com%2Ffql%3Fq%3Dselect%20post_fbid%2C%20fromid%2C%20object_id%2C%20text%2C%20time%20from%20comment%20where%20object_id%20in%20(select%20comments_fbid%20from%20link_stat%20where%20url%20%3D'http%3A%2F%2Fexample.com%2F')%26pretty%3D1> 
```

（对不起，无法弄清楚如何链接上面的网址..）

当有人没有指定href（如小提琴）或仅相对路径时，任何人都知道一种检索Facebook正在使用的ID的方法吗？显然我们可以更新 fb:comment 代码以使用完整的 url，但我们会丢失每篇文章的所有评论......希望有办法避免这种情况

# c# - 使用 WMI root\virtualization 命名空间在 c# 中获取等效的 VMMServer

> ID：14149494
> 
> 赞同：0
> 
> 时间：2013-01-04T00:32:31.920
> 
> 标签：c#, namespaces, wmi, virtualization, virtual-machine

我正在搜索虚拟化命名空间，寻找一个可以为我提供主机的 VMM 服务器的类。我似乎找不到任何具有 VMM 服务器字段或属性的类。

我正在寻找主机连接到的虚拟机管理服务器。

WMI 虚拟化命名空间中是否存在此信息？注册表？配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T10:42:08.910

可能有点晚了，但它位于以下注册表项中，您可以使用此命令查看：

REG QUERY "HKLM\Software\Microsoft\Virtual Machine\Guest\Parameters" /s

我正在尝试找到一种方法从 WMI 自己获取它。

# wpf - VS2012 中没有 WPF/Silverlight？

> ID：14149498
> 
> 赞同：0
> 
> 时间：2013-01-04T00:32:49.503
> 
> 标签：wpf, visual-studio-2012

我已经在 Windows 8 机器上安装了 VS2012，但令人惊讶的是，当我创建项目时没有显示任何 WPF 或 Silverlight 选项。

我在这里错过了什么吗？！其实VS2010已经不是以前的样子了。我只能在 Visual C# 下将其视为模板，它又在 Online 下。

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:33:50.077

您需要安装“Visual Studio Express for Windows Desktop”....这是一个不同的版本，它恢复了 WPF 功能。

*   [http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop)
*   [http://blogs.msdn.com/b/visualstudio/archive/2012/09/12/visual-studio-express-2012-for-windows-desktop-is-here.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/09/12/visual-studio-express-2012-for-windows-desktop-is-here.aspx)

为了帮助确定它是否具有您需要的所有功能：

*   [Visual Studio 2012 Express 桌面版的限制](https://stackoverflow.com/questions/12408610/limitations-of-visual-studio-2012-express-desktop)

# html - 使用静态 iFrame 选项卡直接在新选项卡中重定向网站，中间没有超链接

> ID：14149502
> 
> 赞同：0
> 
> 时间：2013-01-04T00:33:26.630
> 
> 标签：html

我正在使用[Facebook 上的静态 iFrame 选项卡，](https://apps.facebook.com/iframehost/?fb_page_id=116508435185776)目的是将点击它的访问者发送到网站。它具有重定向选项，并在同一选项卡（窗口）中执行此操作。我希望它在新选项卡中重定向/打开。

我已经将其编码为通过普通方式重定向到新选项卡中的网站：_Blank 在这种情况下，必须（在单击应用程序/选项卡后）单击超链接以将其重定向到新选项卡。

是否有代码无需（单击）超链接即可重定向并通过单击应用程序/选项卡直接在新选项卡中打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T16:30:54.050

如果您在选项卡设置中使用 HTML 编辑器并将此代码放入

```
<script type="text/javascript">
  window.open("URL HERE", "_blank");
</script> 
```

它将在一个新窗口中打开，（用户必须允许来自 facebook 的弹出窗口并启用 javascript）。

# html - 自动扩展div的宽度

> ID：14149507
> 
> 赞同：0
> 
> 时间：2013-01-04T00:34:32.460
> 
> 标签：html, css

看看我找到的这个小提琴，并调整结果窗口的大小：http: [//jsfiddle.net/qPHgR/286/](http://jsfiddle.net/qPHgR/286/)

这是小提琴的css：

```
.left { 
    float: left;
}
.right { 
    background-color: #DDD;
    overflow: hidden;
} 
```

我想实现同样的目标，但我希望右 div 具有固定宽度（300px），而左 div 在调整窗口大小时展开/收缩。如果不更改代码中左右 div 的 HTML 顺序，我无法弄清楚如何修复它。我已经尝试过花车和其他属性，但无法使其工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:47:29.517

这个怎么样：http: [//jsfiddle.net/7DKX8/2](http://jsfiddle.net/7DKX8/2)

```
.left {
    float: left;
    background-color: #DDD; } 

 .right {

     width: 300px;
     overflow: hidden; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:00:18.967

```
.container {
  position: relative;
}
.left { 
  background-color: #DDD;
  margin-right: 300px;
}
.right {
  position: absolute;
  right: 0;
  top: 0;
  width: 300px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T00:59:48.680

这是你想要的吗？[http://jsfiddle.net/3ZUas/](http://jsfiddle.net/3ZUas/)

文字干扰，但这是你想要的吗？

主要的是`float: right;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T07:53:47.387

检查这个：

HTML：

```
<div class="container">
    <div class="left">
        some text goes here which is just here to change
    </div>    
    <div class="right">
        some longer bunch of text to go here, it should stick to the right some longer bunch of text to go here, it should stick to the rightsome longer bunch of text to go here, it should stick to the rightsome longer bunch of text to go here, it should stick to the rightsome longer bunch of text to go here, it should stick to the rightsome longer bunch of text to go here, it should stick to the right
    </div>
</div> 
```

​CSS：

```
.left { 
    float: left;
margin-right: 300px;
    border: 1px solid #000;
}
.right { 
position: absolute;
    right: 0;
    width: 300px;
    background-color: #DDD;
    overflow: hidden;

}
​ 
```

希望这对你有用......！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T08:42:51.560

**[更新了 jsFiddle](http://jsfiddle.net/qPHgR/298/)**

浮动对于保持两个元素彼此相邻很重要。我在左边添加了 310 像素的边距（右边`DIV`300 像素，`DIV`空白 10 像素）。然后我用一个负数`margin-left`将右边拉到`DIV`那个边距的顶部。

我还补充`overflow: hidden;`说明`DIV.container`了一个简单的浮动遏制解决方案。如果不需要，可以将其删除，但您可能会发现它使您的布局样式的其余部分更容易。

# asp.net - 使用大小写更新列

> ID：14149508
> 
> 赞同：0
> 
> 时间：2013-01-04T00:34:38.533
> 
> 标签：asp.net, sql-server-2008, sql-update, case

我有一个 asp.net 项目，在这个项目上，

我需要根据我的其他 2 列的值更新我的列。我的桌子结构看起来;

ID - 名称 - GK - PG - GK+PG

1 - mike - 1 - 1 [sql 应该在这里写 540 但写 180 的情况]

2 - john - 2 - 1 [sql 应该在这里写 1080 但写 180 的情况]

3 - sue - 1 - 2 [这里的 sql 应该写 1080 但为 case 写 180]

这是它的 .cs 代码。

```
string strSQL = "UPDATE [info] SET
[GK_PG] = (CASE
WHEN ([GK]='1') THEN '180'
WHEN ([PG]='1') THEN '180'
WHEN ([GK]='2') THEN '540'
WHEN ([PG]='2') THEN '540'
WHEN ([GK]='3') THEN '1080'
WHEN ([PG]='3') THEN '1080'
WHEN ([GK]='1' AND [PG]='1') THEN '540'
WHEN ([GK]='2' AND [PG]='1') THEN '1080'
WHEN ([GK]='1' AND [PG]='2') THEN '1080'
ELSE 0
END)
WHERE [DATE] BETWEEN @DATE1 AND @DATE1 AND WORK_TYPE='IN'"; 
```

此代码仅写入我的 [GK_PG] 列“180”，它不查找其他状态。

等待你的答复。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:48:26.750

我已经通过将 GK 和 PG 情况分成 2 个不同的按钮单击事件来解决它。

不管怎么说，还是要谢谢你。

# objective-c - 在 nil 上调用 Block_copy() 和 Block_release() 是否安全？

> ID：14149510
> 
> 赞同：3
> 
> 时间：2013-01-04T00:35:43.713
> 
> 标签：objective-c, memory-management, objective-c-blocks, null

我是否需要检查或者它的行为是否像`free()`它会忽略的那样`nil`？

我找不到明确说明一种或另一种方式的文档。

我*怀疑*它是安全的。比如，这...

```
(lldb) p (void)_Block_release(0)
<no result> 
```

......似乎没有崩溃。我想这就是这个意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:31:21.503

我试过这个：

```
Block_copy(-1); 
```

这显然导致了崩溃，所以我进入了汇编代码：

```
0x7fff9035342a:  movq   %rdi, %r15
0x7fff9035342d:  xorl   %eax, %eax
0x7fff9035342f:  testq  %r15, %r15
0x7fff90353432:  je     0x7fff903535ca            ; _Block_copy_internal + 430 
```

在 rdi 中应该有唯一的参数被推送：在这种情况下是块地址。

它的内容存储在 r15 中，并在条件跳转之前进行比较。并且地址 0x7fff903535ca 在末尾，当它开始从堆栈中弹出时，所以是的，它是 nil 安全的：

```
0x7fff903535ca:  addq   $8, %rsp
0x7fff903535ce:  popq   %rbx
0x7fff903535cf:  popq   %r12
0x7fff903535d1:  popq   %r13
0x7fff903535d3:  popq   %r14
0x7fff903535d5:  popq   %r15
0x7fff903535d7:  popq   %rbp
0x7fff903535d8:  ret 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T00:55:38.207

我认为它是安全的，例如 free() 等，但找不到任何引用作为证据。

您是否试图避免检查或代码中的混乱？如果是后者，我们可以添加一个宏来实现它，所以我们不在乎正确的答案是什么......

```
// Not sure if it's okay to Block_release nil
#define My_Block_release(b) ((b)? _Block_release(b) : 0) 
```

# javascript - 带有 Javascript 引荐来源网址的 IE 弹出窗口定位问题

> ID：14149512
> 
> 赞同：2
> 
> 时间：2013-01-04T00:35:53.473
> 
> 标签：javascript, internet-explorer, popup, referrer

我遇到了一些代码，这些代码使用以下类型的referrer hack通过IE中的Javascript将referrer信息传递到弹出窗口：

```
 var targetName = "linkTarget";
    _win = window.open("", targetName, 'width=800,height=480,resizable=yes,status=yes,location=yes,toolbar=no');

    var _link;
    if (!document.getElementById("referrerHackLink")) {
        _link = document.createElement('a');
        _link.id = "referrerHackLink";
        document.body.appendChild(_link);
    }
    else {
        _link = document.getElementById("referrerHackLink");
    }

    _link.target = targetName;
    _link.href = url;
    _link.click(); 
```

[HTTP Referrer 和 IE7 和 IE8](https://stackoverflow.com/questions/2460490/http-referrer-and-ie7-and-ie8)

[http://webbugtrack.blogspot.com/2008/11/bug-421-ie-fails-to-pass-http-referer.html](http://webbugtrack.blogspot.com/2008/11/bug-421-ie-fails-to-pass-http-referer.html)

有趣的是，当我尝试对某些 URI（包括 localhost）使用该方法时，IE9 和 IE10 会模糊弹出窗口并导航到主窗口中的目标 URL。

你可以在这里找到一个例子：http: [//jsfiddle.net/geoffreymoller/JKXzk/](http://jsfiddle.net/geoffreymoller/JKXzk/)

关于为什么 localhost 版本可能会更改弹出窗口和目标信息的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:38:51.667

`_win = window.open("", targetName, 'width=800,height=480,resizable=yes,status=yes,location=yes,toolbar=no');`

我认为 IE 中的窗口名称仅限于名称`_self, _top, _blank, etc...` ，因此任何与预期列表不同的名称都可能被视为`_self`

# oauth - 如何为组织下的 github 企业创建 oauth2 令牌？

> ID：14149514
> 
> 赞同：3
> 
> 时间：2013-01-04T00:36:08.900
> 
> 标签：oauth, github, oauth-2.0, github-api

我正在尝试为组织创建一个 oauth2 令牌。这似乎是不可能的（或者至少我没有找到它）。这将用于各种脚本之一（非网络使用）。这也适用于企业 github（github.company.com/api/v3 vs api.github.com）。

我在我的用户下创建了一个这样的：

```
curl -u 'username:password' -d '{"scopes":["scripts!"],"note":"test?"}' https://github.company.com/api/v3/authorizations 
```

并且按预期工作。我想不通的是在组织下执行此操作的神奇方式，因为组织没有基本的身份验证凭据。我找不到任何文档来告诉我如何提供客户端 ID/秘密并从中获取 oauth 令牌，这*似乎*是我想做的事情。

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:30:30.850

在撰写[本文时，不支持此功能](https://twitter.com/fernandezpablo/status/312389762017263617)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T20:28:33.803

您不能直接为组织创建令牌，但如果您有一个对组织具有完全访问权限的开发帐户，您可以这样做（有点），只是以一种迂回的方式。

1.  为该开发帐户创建 oauth 令牌。
2.  当向第 3 方（例如 Confluence、Jira 等）注册令牌时，您可以将组织指定为“团队”/“所有者”。

这将使用开发帐户凭据，但仅授予对组织下事物的访问权限（而不是对开发帐户存储库的完全访问权限等）。

我在尝试将 github org 帐户与我公司的 Jira 帐户链接时遇到了您的问题，所以我想我会分享。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T09:30:42.040

我很确定目前这是不可能的。正如您所说 - 组织本身没有任何与之关联的凭据。因此，唯一的方法是自己做，作为开发人员，使用您的凭据。

这可能是发送给 GitHub 人员的一个很酷的功能请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-09T18:16:01.797

更新：此设置现在下

**开发人员设置 > OAuth 应用程序**

# java - 为什么 int 被作为 Object 传递？

> ID：14149515
> 
> 赞同：0
> 
> 时间：2013-01-04T00:36:20.803
> 
> 标签：java, object, arraylist, java-7

```
import java.util.ArrayList;

class Stack {
    private ArrayList stack;
    private int pos;

    Stack() {
        stack = new ArrayList();
        pos = -1;
    }
    int pop() {
        if(pos < 0) {
             System.out.println("Stack underflow.");
             return 0;
        }
        int out = stack.get(pos);
        stack.remove(pos);
        pos--;
        return out;
    }
} 
```

我正在尝试编写一个基本的可变长度堆栈，这是我的代码片段。当我运行它时，我得到一个错误：

```
Main.java:16: error: incompatible types
   int out = stack.get(pos);
                       ^
required: int
found:    Object 
```

为什么这被作为对象传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:39:25.273

目前，您没有定义`ArrayList`被调用的泛型类型，`stack`因此您将从以下位置获得原始`Object`返回类型`ArrayList.get`：

你需要更换

```
ArrayList stack; 
```

和

```
ArrayList<Integer> stack; 
```

同样地

```
stack = new ArrayList(); 
```

和

```
stack = new ArrayList<Integer>(); // new ArrayList<>(); for Java 7 
```

也看看使用`java.util.Stack`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:40:23.793

`stack`没有被告知它拥有什么变量类型，所以它求助于泛型`Object`。

```
ArrayList stack; 
```

应该

```
ArrayList<Integer> stack; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T00:40:37.257

该`stack.get(int)`方法返回一个对象。这里的 int 只是索引。如果您想在 index 处获取堆栈的值`int`并返回 an`Integer`您需要执行以下操作：

`Integer x = stack.get([int index position]);`

# ruby-on-rails - Rails 时间表单助手

> ID：14149517
> 
> 赞同：0
> 
> 时间：2013-01-04T00:36:29.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我目前有一个表单，`select_date Date.today`当我查看表单时，我可以选择诸如 2012 年 1 月 3 日之类的选项。虽然当我发布值时，它显示`2013-01-03 00:00:00`

在创建操作中，节目日期的参数如下：

```
@show.date = Date.civil(params[:date][:year].to_i, 
                        params[:date][:month].to_i, 
                        params[:date][:day].to_i) 
```

当我选择日期（也就是“2013 年 1 月 3 日”）时，我如何才能让它读起来？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:44:32.377

一个答案是在要*显示*日期的任何地方调用[`date.strftime`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime)传递格式字符串。（如果你不想被零填充，你可以使用）：`"%B %d, %Y"`*`"%B %-d, %Y"``day`*

 *```
Show: <%= date.strftime("%B %d, %Y") %> 
```*

# c# - 多视图加载所有选项卡

> ID：14149519
> 
> 赞同：0
> 
> 时间：2013-01-04T00:36:43.723
> 
> 标签：c#, asp.net, multiview

我有 2 个标签的多视图

每个选项卡都包含一个用户控件，问题是当我激活其中一个选项卡时，多视图会加载两个选项卡，这会导致性能问题。有什么方法可以防止这种情况吗？

```
<asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0"  >
    <asp:View ID="Tab1" runat="server"  >

        <asp:Test1 runat="server" id="Test1" ></asp:Test1>
 </asp:View>
<asp:View ID="Tab2" runat="server">
   <asp:Test2 runat="server" id="Test2" ></asp:Test2>
</asp:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T11:48:21.067

[https://msmvps.com/blogs/luisabreu/archive/2008/02/20/multiview-control-should-you-use-it.aspx](https://msmvps.com/blogs/luisabreu/archive/2008/02/20/multiview-control-should-you-use-it.aspx)

[如何避免asp：Multiview加载所有视图](https://stackoverflow.com/questions/2457898/how-to-avoid-an-aspmultiview-to-load-all-the-views)

# php - 我可以直接在 echo 函数中使用变量而不会导致任何不兼容吗？

> ID：14149520
> 
> 赞同：1
> 
> 时间：2013-01-04T00:36:46.833
> 
> 标签：php, string, variables

当我为 MySQL 编写查询时，通常使用如下形式：

```
$column= "column_name";
$query = "SELECT * FROM table_name WHERE \"".$column."\"" = \"some_value\" "; 
```

如果我想避免使用 \""。变量的顺序，我可以使用这种其他形式还是可能存在一些兼容性问题或其他一些问题？

```
$column= "column_name";
$query = "SELECT * FROM table_name WHERE \"$column\" = \"some_value\"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T00:41:46.800

在这两种情况下，您所做的都很好，但请注意：

1）您在第一种形式中所做的是使用字符串，如字符串文字，这意味着您可以/应该使用单引号而不是双引号，因为它们的解析速度要快得多。

```
 $column = 'column_name';
 $query = 'SELECT * FROM table_name WHERE ' . $column . ' = "some_value"'; 
```

你在第二个例子中所做的也很好，它只是取决于你试图避免使用转义字符的原因，但如果你只是为了可读性而这样做，你所拥有的就很好。

值得注意的是，以您在此处执行的方式处理查询已被弃用，您应该查看 PDO 并以这种方式注入您的值。

**根据上面的评论编辑**- 从列周围删除“。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T00:58:45.133

是的你可以。

*   用双引号分隔的字符串由 PHP 解析器解释。
*   为确保正确识别变量，请将其放入大括号中

**例子**

```
$variable = 1;

$array = array( 1,2 );

$object = new stdclass();
$object->member = 1;

$string = "You can basically put every kind of PHP variable into the string. This can be a simple variable {$variable}, an array {$array[0]} or an object member {$object->member} even object methods."; 
```

如果您希望 PHP 采用`$variable`不解释的字面意思，请将字符串放在单引号中。

我真正喜欢用于查询的另一种方法是[heredoc](http://php.net/manual/de/language.types.string.php#language.types.string.syntax.heredoc)表示法

```
$sqlQuery = <<< EOQ
    SELECT 
           "field"
    FROM
           "table"
    WHERE
           "id" = '{$escapedValue}'
EOQ; 
```

**还有一点注意事项：**

在 SQL 中，你应该用单引号分隔值，用双引号（ANSI 兼容）或反引号 ``` 来分隔表名和字段名等标识符

# c++ - 当使用 'new int[n]' 声明一个新数组时，为什么它不出现在本地列表中？

> ID：14149522
> 
> 赞同：2
> 
> 时间：2013-01-04T00:37:06.607
> 
> 标签：c++, arrays, visual-studio, pointers

> **可能重复：**
> [在 Visual Studio 调试器中查看数组？](https://stackoverflow.com/questions/972511/view-array-in-visual-studio-debugger)

我使用以下方法声明了一个包含 50 个元素的数组：

```
int *ans;
ans = new int[50]; 
```

然而，当我查看“Locals”列表并尝试扩展数组时，它只有一个元素，这是为什么呢？难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T00:38:20.910

该`locals`列表只知道您有一个指向整数的指针。不幸的是，它没有一个很好的方法来知道这个数组有多大。它可能会变得更复杂，或者您可以为该变量创建自己的自定义查看器 - 这取决于您可能使用的 IDE。

# javascript - 以编程方式访问使用数据 URI 作为源的 iframe

> ID：14149523
> 
> 赞同：10
> 
> 时间：2013-01-04T00:37:13.040
> 
> 标签：javascript, iframe, webkit

我正在使用“数据”URI 以编程方式创建 iframe：

```
<iframe id="myFrame" src='data:text/html;charset=utf-8,<!DOCTYPE html><html><head></head><body><h1>Hello.</h1></body></html>'></iframe>​ 
```

此框架加载正常，但似乎以编程方式使用 iframe 会命中跨域安全检查。

```
var iframeDoc = document.getElementById('myFrame').contentWindow.document;
$(iframeDoc.body).find('h1').text('Changed'); 
```

在 Chrome 和 Safari 中引发错误：

> 不安全的 JavaScript 尝试使用 URL 访问框架 data:text/html;charset=utf-8,... from frame with URL http://... 请求访问的框架具有“http”协议，被访问的框架有一个协议''。协议必须匹配。

这是一个显示安全错误的小提琴：http: [//jsfiddle.net/bhGcw/4/](http://jsfiddle.net/bhGcw/4/)

Firefox 和 Opera 不会抛出此异常并允许更改 iframe 内容。似乎 Webkit 看到了数据 URI 的空白协议，并将其视为跨域违规。

有没有办法解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-30T19:21:54.177

有点晚了，不如不使用数据 URL，而是使用 HTML5 属性 srcdoc。

```
<iframe id="iframe" srcdoc='<html><body><h1>Hello!</h1></body></html>'></iframe>
<script type="text/javascript">
    $(function(){
        $($("iframe")[0].contentWindow.document).find("h1").text("Modified from the parent window!");
    });
</script> 
```

[在http://jsfiddle.net/ff3bF/](http://jsfiddle.net/ff3bF/)有一个例子

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T00:52:30.933

似乎 Webkit 在其[域检查代码](http://git.chromium.org/gitweb/?p=external/WebKit_trimmed.git;a=blob_plain;f=Source/WebCore/page/DOMWindow.cpp)中进行了简单的字符串比较：

```
String DOMWindow::crossDomainAccessErrorMessage(DOMWindow* activeWindow)
{
    ...

    SecurityOrigin* activeOrigin = activeWindow->document()->securityOrigin();
    SecurityOrigin* targetOrigin = document()->securityOrigin();
    if (targetOrigin->protocol() != activeOrigin->protocol())
        return message + " The frame requesting access has a protocol of '" + activeOrigin->protocol() + "', the frame being accessed has a protocol of '" + targetOrigin->protocol() + "'. Protocols must match.\n";

    ...
} 
```

看起来 Chromium 比 HTML5 规范更严格，至少根据以下错误报告：

*   [https://bugs.webkit.org/show_bug.cgi?id=17352](https://bugs.webkit.org/show_bug.cgi?id=17352)
*   [https://code.google.com/p/chromium/issues/detail?id=58999](https://code.google.com/p/chromium/issues/detail?id=58999)

Chromium 开发人员似乎不赞成放宽此规则。真可惜。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-08T04:11:21.190

@jamie 提出的答案非常适合将 HTML 加载到 iframe 中并允许随后与内容文档进行编程交互。

XHTML 并不那么容易。

该`srcdoc`属性似乎仅限于 HTML，而不是 XHTML。

一种解决方法是使用`Blob`允许`content-type`指定的 URL。

```
var documentSource = '<?xml version="1.0" encoding="UTF-8"?>\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>...';
var blob = new Blob([documentSource], { type: "application/xhtml+xml" });
iframe.src = URL.createObjectURL(blob); 
```

这种技术至少适用于 Chrome、Firefox 和 Safari。

# asp.net - 如何在 html 或 asp.net aspx 文件中跳过/插入行高的一半？

> ID：14149526
> 
> 赞同：2
> 
> 时间：2013-01-04T00:37:23.707
> 
> 标签：asp.net, html

我`<br />`过去常常在 aspx 文件中换行。

这给了我比我想要的更多的行高。意味着行之间有太多的空白。如何在 aspx 或 html 中仅插入或跳过一半的行高？

顺便说一句，如果此信息有用，我`asp:Label`将在下一行使用控件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T00:44:59.870

尝试类似：

CSS

```
.half-line {
  line-height: .5em;
} 
```

然后添加`<p class="half-line">&nbsp;</p>`而不是您的`<br>`标签

或者不使用`<br>`标签，您可以将标签`margin-bottom`上的设置`<p>`更小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-16T13:18:17.003

<SUP> </SUP>

上标在它所在的行上方添加半行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-06T22:43:56.397

下面是我尝试获得正好半个换行符。 [https://codepen.io/qkeave/pen/oqQLBN](https://codepen.io/qkeave/pen/oqQLBN)

不幸但重要的是要记住 1em 与 1 行的高度不同。

试试这个：

```
p:after{
    content: "\00a0";
    display: block;
    line-height: ($yourLineHeight/2);
} 
```

# uiactivityviewcontroller - UIActivityViewController - 有没有办法知道选择了哪个活动？

> ID：14149532
> 
> 赞同：52
> 
> 时间：2013-01-04T00:38:29.550
> 
> 标签：uiactivityviewcontroller

我希望能够跟踪用户是否通过 facebook、twitter 等共享，但似乎无法知道选择了哪种方法。有没有？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-05T02:28:30.847

您可以在 setCompletionHandler 中使用活动类型

```
UIActivityViewController *activityVC = [[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:nil];

[activityVC setCompletionHandler:^(NSString *activityType, BOOL completed) {
    if([activityType isEqualToString: UIActivityTypeMail]){
        NSLog(@"Mail");
    }
    if([activityType isEqualToString: UIActivityTypePostToFacebook]){
        NSLog(@"Facebook");
    }

}];
[self presentViewController:activityVC animated:TRUE completion:nil]; 
```

系统内置支持的内置活动类型。

```
NSString *const UIActivityTypePostToFacebook;

NSString *const UIActivityTypePostToTwitter;

NSString *const UIActivityTypePostToWeibo;

NSString *const UIActivityTypeMessage;

NSString *const UIActivityTypeMail;

NSString *const UIActivityTypePrint;

NSString *const UIActivityTypeCopyToPasteboard;

NSString *const UIActivityTypeAssignToContact;

NSString *const UIActivityTypeSaveToCameraRoll; 
```

**为 iOS 8 编辑**

请注意，这将在 iOS 8 中生成编译器警告，您需要使用`setCompletionWithItemsHandler`方法而不是`setCompletionHandler`方法。

代替：

```
[activityVC setCompletionHandler:^(NSString *activityType, BOOL completed) { 
```

和：

```
[activityVC setCompletionWithItemsHandler:^(NSString *activityType, BOOL completed,  NSArray *returnedItems, NSError *activityError) { 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-11-28T02:11:05.617

在 Swift 4 中：

```
activityViewController.completionWithItemsHandler = { activity, success, items, error in
        if !success{
            print("cancelled")
            return
        }

        if activity == .postToTwitter {
            print("twitter")
        }

        if activity == .mail {
            print("mail")
        }
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-09T21:41:15.630

迅速 3

```
let activityViewController:UIActivityViewController = UIActivityViewController(activityItems: [screenCapture], applicationActivities: nil)
activityViewController.excludedActivityTypes = [UIActivityType.print, UIActivityType.postToWeibo, UIActivityType.copyToPasteboard, UIActivityType.addToReadingList, UIActivityType.postToVimeo]

activityViewController.completionWithItemsHandler = { activity, success, items, error in
    if !success{
        print("cancelled")
        return
    }

    if activity == UIActivityType.postToFacebook {
        print("facebook")
    }

    if activity == UIActivityType.mail {
        print("mail")
    }

}

self.present(activityViewController, animated: true, completion: nil) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T12:52:28.137

您可以使用此库[https://github.com/rdougan/RDActivityViewController](https://github.com/rdougan/RDActivityViewController)来识别已触及的活动，并仅通过实现其协议来按活动返回自定义数据。

像这样：

```
- (NSArray *)activityViewController:(NSArray *)activityViewController itemsForActivityType:(NSString *)activityType
{
    if ([activityType isEqualToString:UIActivityTypePostToTwitter]) {
        return @[@"Twitter text"];
    } else if ([activityType isEqualToString:UIActivityTypeMessage]) {
        return @[@"Message text"];
    } else if ([activityType isEqualToString:UIActivityTypeMail]) {
        return @[@"Mail text"];
    } else if ([activityType isEqualToString:UIActivityTypePostToFacebook]) {
        return @[@"Facebook text"];
    } else {
        return @[@"Default text"];
    }
} 
```

我希望我对你有所帮助！

# three.js - 为什么正交投影在使用 Three.js 使用 CombinedCamera.js 时不能完全正常工作？

> ID：14149539
> 
> 赞同：0
> 
> 时间：2013-01-04T00:40:07.817
> 
> 标签：three.js, orthographic, perspectivecamera

我已经浏览了[CombinedCamera](http://mrdoob.github.com/three.js/examples/canvas_camera_orthographic2.html)的实际工作示例，并且受到启发，我将combinedcamera 嵌入到我的工作中。

```
 camera = new THREE.CombinedCamera( width /2, height/2, 45, 0.1, 1000, -1000, 1000, 1000 ); 
```

但是在使用透视相机时，我的应用程序运行良好：

![在此处输入图像描述](../Images/72a7f8fc2031fedbdc2c3cc5a2501943.png)

但是同样的应用程序，在使用正交投影时根本不起作用，而且看起来很奇怪。

![在此处输入图像描述](../Images/f73f6a3b8dc9151c1675fd2f08c28c6f.png)

我的代码有什么问题？我想要对象上所有 x、y 和 z 方向的正交投影。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:28:50.450

正交投影的宽度和高度`CombinedCamera`来自透视投影的近平面和远平面的中间平面的交点。如果您的对象很小但靠近相机，它将被渲染得非常小，就像在您的第二张图像中一样。

您的设置具有`0.1, 1000`近平面和远平面，因此它试图从相机构图约 500 个单位的对象，这比您的对象大得多。

您有多种选择：

1.  在正交模式下使用 setFov 或 setZoom 可以更好地构图对象。
2.  放大您的对象并放置相机/对象，使其中心位于相机近平面和远平面的中间。
3.  修改相机的近平面和远平面，以便它们更接近您的场景 - 例如，如果您的相机距离对象中心 25 个单位，则将相机上的近平面和远平面距离设置为`0.1, 50`- 中点约为 25 个单位和切换模式时将根据需要对您的对象进行构图。

# javascript - javascript cookie，设置多个cookie

> ID：14149542
> 
> 赞同：1
> 
> 时间：2013-01-04T00:40:27.333
> 
> 标签：javascript, cookiestore

我正在尝试创建一个应用程序，它使用 cookie 接收多个值，但是似乎我的 setCookie 函数没有接收多个值，而是在我输入新值时替换每个值，因此 showCookie 函数只显示最后输入的值.

设置饼干：

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
} 
```

存储值函数：

```
function storeValues()  
{
var note= document.getElementById("note").value;

 setCookie("note",note,365);

 alert("Cookies stored!")

 } 
```

显示功能：

```
function show()
{
 var note= document.getElementById("note").value;

 alert("Note:" + note  );

}

function showall()
{
var allcookies = document.cookie;
 alert("All Cookies : " + allcookies );

// Get all the cookies pairs in an array
cookiearray  = allcookies.split(';');

// Now take key value pair out of this array
for(var i=0; i<cookiearray.length; i++){
  name = cookiearray[i].split('=')[0];
  value = cookiearray[i].split('=')[1];
  alert("Key is : " + name + " and Value is : " + value);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:55:17.513

您需要将赋值运算符 ( `=`) 更改为连接和赋值复合运算符 ( `+=`)。

如果存在 cookie 密钥，覆盖它也是一个好主意。所以我建议将 cookie 值转换为一个对象，修改它们，然后序列化回一个 cookie 字符串。

# java - java.security.cert.CertificateException：证书不符合算法约束

> ID：14149545
> 
> 赞同：37
> 
> 时间：2013-01-04T00:40:48.813
> 
> 标签：java, ssl, java-7, arcgis, arcgis-server

我有一个地图应用程序，可以在给定 URL 的情况下添加*ArcGIS 9.3+基本地图。*我要添加的 URL 之一来自客户的 URL，并且是安全的。我的地图应用程序之前使用的是 Java 6，并且能够毫无问题地添加安全 URL。我现在升级到 Java 7 并获得了

```
"java.security.cert.CertificateException: Certificates does not conform to algorithm constraints" 
```

例外。起初，我认为是这种情况，因为在 Java 7 中，默认情况下，`MD2`签署 SSL 证书的算法是禁用的。您可以在 java.security 文件中看到这一点：

```
"jdk.certpath.disabledAlgorithms=MD2" 
```

但是当我检查`Certification Signature Algorithm`那个 URL 的时候，它说`SHA-1`. 更奇怪的是，如果我注释掉文件`"jdk.certpath.disabledAlgorithms=MD2"`中的行`java.security`，URL 将毫无问题地工作。`MD2`在 SSL 过程中在其他地方使用？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-01-05T08:41:51.953

## 背景

MD2 被广泛认为是不安全的，因此在 JDK 6u17 版本的 Java 中被禁用（请参阅发行说明[http://www.oracle.com/technetwork/java/javase/6u17-141447.html](http://www.oracle.com/technetwork/java/javase/6u17-141447.html)，“在证书链验证中禁用 MD2”） ，以及 JDK 7，根据您在 中指出的配置`java.security`。

Verisign 使用带有`md2WithRSAEncryption`签名算法（串行`70:ba:e4:1d:10:d9:29:34:b6:38:ca:7b:03:cc:ba:bf`）的第 3 类根证书，但不推荐使用它并用另一个具有相同密钥和名称但使用算法签名的证书替换它`sha1WithRSAEncryption`。但是，在 SSL 握手期间，一些服务器仍在发送旧的 MD2 签名证书（具有讽刺意味的是，我在 Verisign 运行的服务器上遇到了这个问题！）。

[您可以通过从服务器获取证书链](https://stackoverflow.com/questions/7885785/using-openssl-to-get-the-certificate-from-a-server)并检查它来验证是否是这种情况：

`openssl s_client -showcerts -connect <server>:<port>`

JDK 的最新版本（例如 6u21 和所有已发布的 7 版本）应通过自动删除具有与受信任锚点相同的颁发者和公钥的证书（默认为 cacerts ）来[解决此问题。](http://bugs.java.com/view_bug.do?bug_id=6948803)

## 如果您在使用较新的 JDK 时仍然存在此问题

检查您是否有实现旧`X509TrustManager`接口的自定义信任管理器。JDK 7+ 应该与此接口兼容，但是根据我的调查，当信任管理器实现`X509TrustManager`而不是较新的`X509ExtendedTrustManager`( [docs](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#X509ExtendedTrustManager) ) 时，JDK 使用自己的包装器 ( `AbstractTrustManagerWrapper`) 并以某种方式绕过此问题的内部修复。

解决方案是：

1.  使用默认信任管理器，或

2.  修改您的自定义信任管理器以直接扩展`X509ExtendedTrustManager`（一个简单的更改）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-02-02T15:27:33.673

Eclipse 无法连接到 SVN https 存储库（也应该适用于任何使用 SSL/TLS 的应用程序）。

svn：E175002：连接已关闭：javax.net.ssl.SSLHandshakeException：java.security.cert.CertificateException：证书不符合算法约束

该问题是由禁用 MD5 相关算法的最新 Java 8 OpenJDK 更新引起的。作为一种解决方法，直到颁发新证书（如果有），在 java.security 文件中更改以下密钥

> **警告**
> 请记住，这可能会产生安全隐患，因为禁用的算法被认为是弱算法。作为替代方案，可以通过命令行选项在 JVM 基础上应用解决方法，以使用具有此更改的外部*java.security*文件，例如：*对于*
> `java -Djava.security.properties=/etc/sysconfig/noMD5.java.security`
> Eclipse *，*在*eclipse.ini上的**-vmargs*下面添加一行 *`-Djava.security.properties=/etc/sysconfig/noMD5.java.security`*

 *# 原始钥匙

```
jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize < 1024
jdk.tls.disabledAlgorithms=SSLv3, RC4, MD5withRSA, DH keySize < 768 
```

# 改成

```
jdk.certpath.disabledAlgorithms=MD2, RSA keySize < 1024
jdk.tls.disabledAlgorithms=SSLv3, RC4, DH keySize < 768 
```

java.security 文件位于 linux 64 中的 /usr/lib64/jvm/java/jre/lib/security/java.security

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-05-30T18:39:47.540

在 Fedora 28 上，只要注意行

> security.useSystemPropertiesFile=true

文件，`java.security`位于：

> $(dirname $(readlink -f $(which java)))/../lib/security/java.security

Fedora 28 引入了 disabledAlgorithms 控制的外部文件

> /etc/crypto-policies/back-ends/java.config

`java.security`您可以编辑此外部文件，也可以通过设置将其排除在外

> security.useSystemPropertiesFile=false

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-14T23:23:31.843

我们无法控制的一个数据库存在这个问题，它需要另一种解决方案（此处列出的那些不起作用）。对于我的我需要：

```
-Djdk.tls.client.protocols="TLSv1,TLSv1.1" 
```

我认为就我而言，这与强制执行某个命令有关。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-03T09:48:54.810

由于此结果是 Google 针对此错误返回的第一个结果，我将补充一点，如果有人想在不更改全局文件 java.security 的情况下更改 java 安全设置（例如，您需要运行一些测试），您可以只需通过 JVM 参数**-Djava.security.properties=your/file/path**提供一个覆盖安全文件 ，您可以在其中通过覆盖禁用来启用必要的算法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T09:18:13.013

这更有可能发生，因为在您的证书链的某个地方，您有一个证书，更有可能是一个旧的根，它仍然使用 MD2RSA 算法签名。

您需要将其定位到您的证书存储中并将其删除。

然后回到您的证书颁发机构并要求他们提供新的根。

它更有可能是具有相同有效期的相同根，但已通过 SHA1RSA 重新认证。

希望这有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-19T19:19:18.000

同事。

在为我们的 REST API 开发自动化测试期间，我遇到了这个麻烦。JDK 7_80 仅安装在我的机器上。在我安装 JDK 8 之前，一切正常，我有可能获得带有`JMeter`. 在我安装 JDK 8 之后，噩梦就`Certificates does not conform to algorithm constraints`开始了。

JMeter 和 Serenity 都没有获得令牌的可能性。JMeter 使用 JDK 库来发出请求。当库调用连接到使用它的端点时，库只会引发异常，而忽略请求。

接下来是*注释*所有java.security 文件中专用于 disabledAlgorithms 的所有行*。*

```
C:\Java\jre7\lib\security\java.security
C:\Java\jre8\lib\security\java.security
C:\Java\jdk8\jre\lib\security\java.security
C:\Java\jdk7\jre\lib\security\java.security 
```

然后它终于开始工作了。我知道，这是一种蛮力方法，但这是修复它的最简单方法。

```
# jdk.tls.disabledAlgorithms=SSLv3, RC4, MD5withRSA, DH keySize < 768
# jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize < 1024 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-19T19:39:47.097

在 docker 中使用 openjdk-7 我已经安装了一个内容为[https://gist.github.com/dtelaroli/7d0831b1d5acc94c80209a5feb4e8f1c#file-jdk-security的文件](https://gist.github.com/dtelaroli/7d0831b1d5acc94c80209a5feb4e8f1c#file-jdk-security)

```
#Location to mount
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/security/java.security 
```

谢谢@luis-muñoz

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-30T14:15:35.377

我在 SOAP-UI 中遇到了这个问题，上面没有一个解决方案对我没有帮助。

对我来说正确的解决方案是添加

> -Dsoapui.sslcontext.algorithm=TLSv1

在 vmoptions 文件中（在我的情况下是 ...\SoapUI-5.4.0\bin\SoapUI-5.4.0.vmoptions）*

# python - 在 TKinter Python 中删除窗口标题栏

> ID：14149549
> 
> 赞同：2
> 
> 时间：2013-01-04T00:41:16.340
> 
> 标签：python, tkinter

如何从 Tkinter 的 Toplevel() 窗口中删除标题栏。现在我主要我有

```
 self.master.title("Subtest")
    self.master.geometry("400x200")

    self.alertwindow()

    Label(self.master,textvariable=self.connected,height=4).grid(row=0,column=0)

    Button(self.master,text="Monitor",command= lambda: self.startnewthread(1),width=10).grid(row=6,column=1)
    Button(self.master,text="Quit",command=self.haltprogram).grid(row=6,column=0) 
```

对于我的警报窗口功能，我有

```
def alertwindow(self):
self.listbox=Listbox(Toplevel(self.master,width=150).overrideredirect(True),width=150).pack) 
```

我希望程序打开一个根窗口，然后是一个没有标题栏的顶级列表框；但是，程序现在唯一要做的就是冻结，当我删除 .overrideredirect(True) 时，程序会启动两个列表框窗口。如何让程序在 Windows 上只打开一个没有标题栏的列表框？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:28:37.123

看着这条线

```
self.listbox=Listbox(Toplevel(self.master,width=150).overrideredirect(True),width=150).pack) 
```

很明显，您试图在 1 行上做太多事情*。*（你的括号甚至不匹配）。让我们分手吧，好吗？

```
new_top = Toplevel(self.master,width=150)
new_top.overrideredirect(True)
self.listbox = Listbox(new_top,width=150)
self.listbox.pack() 
```

另请注意，您似乎正在使用`.grid`和`.pack`- 通常这是不明智的，并且`Tkinter`当您尝试将它们一起使用时，会很高兴地花费所有时间来尝试协商一个小部件的正确放置。

* * *

我对正在发生的事情的猜测：

*   您的实际代码具有适当平衡的括号，因此没有 SyntaxError
*   Toplevel.overrideredirct 返回无
*   Listbox 将 None 视为父窗口小部件并替换根窗口小部件 ( `Tk`)
*   然后你在根小部件上使用`.grid`and `.pack`，这会导致你的程序挂起。

# mongodb - 升级后的 MongoDB，现在 shell 因“非法指令”而死

> ID：14149550
> 
> 赞同：2
> 
> 时间：2013-01-04T00:41:20.127
> 
> 标签：mongodb

我正在运行 MongoDB v2.0.4。我安装了 v2.2.2 并重新启动。

mongod 进程运行良好。客户端应用程序正在连接并且运行良好。但是 mongo 弹弹出来了。

```
$: ~ mongo localhost/da
MongoDB shell version: 2.2.2
connecting to: localhost/da
Illegal instruction
$: ~ 
```

我的“安装”过程是下载和解压缩 .tgz 并将 bin 中的所有二进制文件链接到 /usr/local/bin。

这是我在登录开始时看到的内容。

```
Thu Jan  3 16:14:54 Mongo DB : starting : pid = 7225 port = 27017 dbpath = /var/lib/mongodb/ master = 0 slave = 0  32-bit 

** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
**       see http://blog.mongodb.org/post/137788967/32-bit-limitations for more

Thu Jan  3 16:14:54 db version v1.2.2, pdfile version 4.5
Thu Jan  3 16:14:54 git version: nogitversion
Thu Jan  3 16:14:54 sys info: Linux vernadsky 2.6.24-27-server #1 SMP Fri Mar 12 01:45:06 UTC 2010 i686 BOOST_LIB_VERSION=1_40
Thu Jan  3 16:14:54 waiting for connections on port 27017 
```

这是在 32 位机器上运行，配备 4GB 内存和双核 PIII 1.4GHz 处理器。

认为这可能是 MongoDB 下载页面上提到的“浮点异常”，我尝试了 legacy-static 构建。结果是一样的。

更新

我认为在较旧的 32 位系统上运行的限制使运行 v2.2.2 过于不稳定。在进行修复操作或在启动时检查日志文件时，很容易超过 2GB 限制（如“得到信号：4”错误所证明的）。

我决定使用 Ubuntu 包管理器恢复到 v1.2.2。

参考：

[https://jira.mongodb.org/browse/SERVER-5639](https://jira.mongodb.org/browse/SERVER-5639)

[https://groups.google.com/d/topic/mongodb-user/gaAlONRvVSU/discussion](https://groups.google.com/d/topic/mongodb-user/gaAlONRvVSU/discussion)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T22:41:41.743

我在 Debian Squeeze 6.0.10 上遇到了同样的问题，这是一台旧的 32 位/i386 机器和官方 mongodb 指令的 10gen 分发版。在安装时，mongo-org-server 和依赖项的 --configure 存在一些问题尝试执行 mongod“非法指令”和

我不得不通过一个简单的`apt-get install mongodb`.

# javascript - 仅为新条目或已删除条目订阅可观察数组

> ID：14149551
> 
> 赞同：75
> 
> 时间：2013-01-04T00:41:25.007
> 
> 标签：javascript, knockout.js, knockout-2.0

所以是的，我可以订阅一个可观察的数组：

```
vm.myArray = ko.observableArray();
vm.myArray.subscribe(function(newVal){...}); 
```

问题是`newVal`传递给函数的是整个数组。无论如何我只能得到增量部分吗？说**添加**或**删除**的元素？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-10-31T16:42:17.500

从 KnockoutJS 3.0 开始，ko.observableArray 上有一个[arrayChange 订阅选项](http://blog.stevensanderson.com/2013/10/08/knockout-3-0-release-candidate-available/)。

```
var myArray = ko.observableArray(["Alpha", "Beta", "Gamma"]);

myArray.subscribe(function(changes) {

    // For this example, we'll just print out the change info
    console.log(changes);

}, null, "arrayChange");

myArray.push("newitem!"); 
```

在上面的回调中，更改参数将是一个更改对象数组，如下所示：

```
[ 
   { 
      index: 3, 
      status: 'added', 
      value: 'newitem!' 
   }
] 
```

对于您的具体问题，**您希望收到有关新项目或已删除项目的通知**。要使用 Knockout 3 实现它，它看起来像这样：

```
myArray.subscribe(function(changes) {

    changes.forEach(function(change) {
        if (change.status === 'added' || change.status === 'deleted') {
            console.log("Added or removed! The added/removed element is:", change.value);
        }
    });

}, null, "arrayChange"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-29T18:36:37.730

由于我在其他地方找不到关于此的任何信息，我将添加一个关于如何将其与 TypeScript 一起使用的回复。

这里的关键是使用 KnockoutArrayChange 接口作为订阅的 TEvent。如果您不这样做，它将尝试使用另一个（非通用）订阅，并会抱怨状态、索引和值不存在。

```
class ZoneDefinition {
    Name: KnockoutObservable<String>;
}

class DefinitionContainer
{
    ZoneDefinitions: KnockoutObservableArray<ZoneDefinition>;
    constructor(zoneDefinitions?: ZoneDefinition[]){
        this.ZoneDefinitions = ko.observableArray(zoneDefinitions);
        // you'll get an error if you don't use the generic version of subscribe
        // and you need to use the KnockoutArrayChange<T> interface as T
        this.ZoneDefinitions.subscribe<KnockoutArrayChange<ZoneDefinition>[]>(function (changes) {
            changes.forEach(function (change) {
                if (change.status === 'added') {
                    // do something with the added value
                    // can use change.value to get the added item
                    // or change.index to get the index of where it was added
                } else if (change.status === 'deleted') {
                    // do something with the deleted value
                    // can use change.value to get the deleted item
                    // or change.index to get the index of where it was before deletion
                }
            });
        }, null, "arrayChange");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T15:10:45.837

为了只检测`push()`和`remove()`事件，而不是移动项目，我在这些可观察数组函数周围放置了一个包装器。

```
var trackPush = function(array) {
    var push = array.push;
    return function() {
        console.log(arguments[0]);
        push.apply(this,arguments);
    }
}
var list = ko.observableArray();
list.push = trackPush(list); 
```

原始的 push 函数存储在一个闭包中，然后被一个包装器覆盖，它允许我在推送项目之前或之后对它做任何我想做的事情，它被推送到数组上。

的类似模式`remove()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T01:15:34.113

我正在使用类似但不同的方法，跟踪元素是否已在元素本身中检测：

```
myArray.subscribe(function(array){
  $.each(array, function(id, el) {
    if (!el.instrumented) {
      el.instrumented = true;
      el.displayName = ko.computed(function(){
        var fn = $.trim(el.firstName()), ln = $.trim(el.lastName());
        if (fn || ln) {
          return fn ? (fn + (ln ? " " + ln : "")) : ln;
        } else {
          return el.email();
        }
      })
    }
  });
}) 
```

但这真的很乏味，并且在我的代码中重复了这种模式

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-04T01:00:04.533

据我所知没有。想知道我是做什么的吗？我使用以前的变量来保存值，称为`selectedItem`

```
vm.selectedItem = ko.observable({});
function addToArray(item) { vm.selectedItem(item); vm.myArray.push(item); } 
```

这样，当我的可观察数组发生问题时，我知道添加了哪个项目。

```
vm.myArray.subscribe(function(newArray) { var addedItem = vm.selectedItem(item); ... } 
```

这真的很冗长，假设您的数组包含多种数据，您将需要某种标志来帮助您知道如何处理已保存的变量......

```
vm.myArray.subscribe(function(newArray) {
  if ( wasUpdated )
    // do something with selectedItem
  else
    // do whatever you whenever your array is updated
} 
```

需要注意的重要一点是，如果您知道是否使用`push`或`unshift`使用过，您可能知道添加了哪个项目。只需浏览数组的最后一项或第一项，瞧。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-09-18T21:16:55.400

尝试`vm.myArray().arrayChanged.subscribe(function(eventArgs))`

添加项目时具有附加值，删除项目时具有删除值。

# symfony - 向 Symfony2 分析器时间线添加额外信息

> ID：14149555
> 
> 赞同：5
> 
> 时间：2013-01-04T00:41:49.607
> 
> 标签：symfony, symfony-2.1

我的应用程序使用 AWS DynamoDB，我希望能够跟踪 Dynamo 请求所用的时间，就像我使用 Doctrine 或 Propel 时一样。

一些控制器还访问一堆自定义服务，理想情况下我也能够跟踪每个控制器所花费的时间。

有没有办法在这些代码块之前和之后在我的代码中添加一些钩子来跟踪时间并将其添加到分析器时间轴中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:20:45.967

我认为你可以使用这个新组件“秒表”

[http://symfony.com/blog/new-in-symfony-2-2-new-stopwatch-component](http://symfony.com/blog/new-in-symfony-2-2-new-stopwatch-component)

# java - 可以在 Play Framework 中的 @Entity Model 类上实现 equals() 和 hashCode() 吗？

> ID：14149563
> 
> 赞同：2
> 
> 时间：2013-01-04T00:42:46.550
> 
> 标签：java, jpa, playframework, playframework-1.x

我的 Play 应用程序中有一个`@Entity`-annotated`Model`类，我将其填充到一个`Set`以确保在保存到数据库之前的唯一性。由于对象尚未保存，因此它们没有键值。因此，必须根据它们的属性进行比较。

我看了一下 中的`equals()`实现`JPABase`，如果它们还没有键，它似乎显式地使所有实体对象不相等。

所以，我的问题：

1.  可以在我的子类中实现`equals()`和吗？`hashCode()``Model`
2.  如果是这样，最好/正确的方法是什么？我应该打电话`super.equals()`，我应该如何处理结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:23:15.987

我不建议实现`equals`或`hashCode`在应用程序模型类中。唯一性最终应该由数据库来保证。从应用程序的角度来看，唯一性几乎总是强加于某个字段，例如用户名或电子邮件等。我从未遇到过通过`hashCode`or`equals`方法对整个对象计算数据实体唯一性的情况。

# android - 使用 Android 将 Launcher 和 Activity 图标分开

> ID：14149564
> 
> 赞同：7
> 
> 时间：2013-01-04T00:42:46.537
> 
> 标签：android, android-activity, icons, launcher

我有一个简单的应用程序，只有一个活动。实际上，启动器图标与活动的图标（左上角的那个）相同。我想在我的活动中添加另一个图标而不更改启动器的图标。

这是我的清单：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.natinusala.pebkac.MainActivity"
        android:label="@string/app_name">
        <intent-filter android:logo="@drawable/pebkac">
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>
    </activity>
</application> 
```

实际上，我可以通过编辑该`android:icon="@drawable/ic_launcher"`行来编辑启动器和活动图标。我也可以在其中添加一个`android:icon`，`<activity>`但它也修改了启动器的图标。

如何在不触摸启动器图标的情况下编辑我的活动图标？

谢谢 ！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T00:49:43.190

在您的清单中，添加`android:logo="@drawable/ic_yourIcon"`到您的 Activity 或 Application 标记。

# mysql - 数据库设计 - 目录 - 范围 - 产品

> ID：14149566
> 
> 赞同：2
> 
> 时间：2013-01-04T00:42:54.627
> 
> 标签：mysql, database, database-design

任何人都可以建议以下数据库设计：

用户可以创建目录 在目录中，用户可以创建一个范围 - 即一系列产品 在一个范围内，用户可以添加多个产品 在一个范围内，用户可以添加多个范围 -> range->range->range all with其中的产品。

我目前在我的数据库中 -

catalogue_range with - id, name, description 和 catalogue_product with - id, range_id, name, description

谁能看到我想要制作的东西？

我的目标是能够在一个目录范围内创建多个目录范围，并将多个产品添加到每个目录范围中。

这是我当前的 SQL：

```
`catalogue_range` (
      `id` char(40) NOT NULL,
      `profile_id` char(40) NOT NULL,
      `type` enum('pdf','db') DEFAULT NULL,
      `status` enum('new','draft','live') NOT NULL,
      `name` varchar(64) NOT NULL,
      `description` varchar(1000) NOT NULL,
      `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
      PRIMARY KEY (`id`),
      KEY `profile_id` (`profile_id`)
    )

`catalogue_product` (
  `id` char(40) NOT NULL,
  `catalogue_id` char(40) NOT NULL,
  `order` smallint(5) unsigned NOT NULL,
  `name` varchar(50) NOT NULL,
  `description` varchar(250) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `catalogue_id` (`catalogue_id`)
) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:25:02.263

1.  目录（**目录 ID**，您的私有属性）
2.  产品（**产品 id**，#catalogue id，您的私人属性）
3.  range( **range id** , #range id parent, 你的私有属性)
4.  产品范围（**#product id**，**#range id**）

您将需要存储过程/应用算法来编译：

*   一个范围的产品列表（计算递归 sqls mysql 不像 oracle 那样提供分析函数）
*   目录/范围的范围列表

希望能帮助到你。S。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:16:09.527

假设一个产品一次只能存在于一个目录中，那么您的设计几乎没有问题。您缺少**的**是`catalogue_range`. `catalogue_range`在表定义中添加如下内容：

```
`parent_range_id` char(40) NULL,
FOREIGN KEY (`parent_range_id`) REFERENCES catalogue_range(`id`) 
```

任何给定用户的顶级范围都将具有 NULL `parent_range_id`，其他用户将引用包含范围。请注意，层次结构在 SQL 中不一定很容易使用。您可能还想研究使分层数据对 SQL 更友好的技术，例如[嵌套集](https://stackoverflow.com/questions/7420885/how-do-i-design-a-database-to-store-properties-selecting-attributes-by-synonyms/7423459#7423459)。

# sockets - 用于在 Netty 上发送图像文件的套接字发送缓冲区的最佳设置

> ID：14149567
> 
> 赞同：1
> 
> 时间：2013-01-04T00:43:04.580
> 
> 标签：sockets, tcp, netty

我正在考虑在 Netty 中实现一个 HTTP 图像服务器，我想知道最佳的发送缓冲区大小应该是多少：

```
ie. bootstrap.setOption("sendBufferSize", 1048576); 
```

我已经阅读[了如何编写高性能的 Netty 客户端](https://stackoverflow.com/questions/8444267/how-to-write-a-high-performance-netty-client)，但我想知道将这个值设置得太小或太大会有什么后果。

我提供的图像大多在 100K 到 5MB 左右（平均 1MB）。我在想一个大的（1MB）值会导致操作系统内存被 TCP 缓冲数据填充，但是将它设置为一个小值（即 8192KB）是否会降低性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:24:25.257

您可能会发现[这篇文章](http://www.ibm.com/developerworks/linux/library/l-hisock/index.html#N100D7)很有用。

您可能还需要调整对等方的接收缓冲区大小。在这种情况下，请确保将其设置为服务器套接字。否则，您的上限为 64KiB。

# java - 具有两种或多种类型的类的泛型（接口）错误

> ID：14149569
> 
> 赞同：0
> 
> 时间：2013-01-04T00:43:29.923
> 
> 标签：java, generics, java-7

这是我的课：

```
public class MyTreeMap
< K extends CharSequence, V extends CharSequence & Map > {
} 
```

我的主要内容：

```
{MyTreeMap< String, String > s = new MyTreeMap < >();} 
```

错误是什么？Netbeans 给我这个错误：

类型参数字符串不在类型变量 K 的范围内，其中 K 是类型变量：K 扩展在 MyTreeMap 类中声明的 CharSequence

类型参数 String 不在类型变量 V 的范围内，其中 V 是类型变量：V 扩展 String,Map 在类 MyTreeMap 中声明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:45:49.747

part:意味着您的第二种类型需要扩展[String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)不需要`V extends CharSequence & Map`的两者。您是否正在寻找 CharSequences 的地图？

```
public class MyTreeMap< K extends CharSequence, V extends Map<K, CharSequence> > {} 
```

跟进您的评论，您不能使用泛型来接受具有不同类型的两个不同对象（当您调用 get 时它怎么知道要返回什么）。您可以创建一个名为的包装类，该类`ValidTreeType`具有 Map 和 String 属性，并制作这些属性的 Map。

# ruby - Ruby 的 YAML 模块可以用来嵌入评论吗？

> ID：14149570
> 
> 赞同：5
> 
> 时间：2013-01-04T00:43:42.740
> 
> 标签：ruby, yaml, to-yaml

to_yaml 方法产生了不错的 YAML 输出，但我想在某些元素之前包含注释行。有没有办法这样做？

例如，我想制作：

```
# hostname or IP address of client
client: host4.example.com
# hostname or IP address of server
server: 192.168.222.222 
```

从类似的东西：

```
{
  :client => 'host4.example.com',
  :server => '192.168.222.222',
}.to_yaml 
```

...但不确定 YAML 模块是否有办法完成。

更新：我最终没有使用使用正则表达式插入评论的解决方案，因为它需要将数据与评论分开。对我来说最简单和最容易理解的解决方案是：

```
require 'yaml'

source = <<SOURCE
# hostname or IP address of client
client: host4.example.com
# hostname or IP address of server
server: 192.168.222.222
SOURCE

conf = YAML::load(source)

puts source 
```

对我的好处是没有任何重复（例如'client:'只指定一次），数据和注释在一起，源可以输出为YAML，数据结构（conf中可用）可用于利用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:19:43.850

您可以对所有插入进行字符串替换：

```
require 'yaml'

source = {
  :client => 'host4.example.com',
  :server => '192.168.222.222',
}.to_yaml

substitution_list = {
  /:client:/ => "# hostname or IP address of client\n:client:",
  /:server:/ => "# hostname or IP address of server\n:server:"
}

substitution_list.each do |pattern, replacement|
  source.gsub!(pattern, replacement)
end

puts source 
```

输出：

```
--- 
# hostname or IP address of client
:client: host4.example.com
# hostname or IP address of server
:server: 192.168.222.222 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T01:02:07.033

像这样的东西：

```
my_hash = {a: 444}
y=YAML::Stream.new()
y.add(my_hash)
y.emit("# this is a comment") 
```

当然，您需要自己`add()`或`emit()`根据需要遍历输入哈希。您可以查看该`to_yaml`方法的来源以快速入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-03T20:35:55.083

这并不完美（例如，没有中间阵列支持），但它可以满足我的需求。

```
 def commentify_yaml(db)
    ret = []
    db.to_yaml(line_width: -1).each_line do |l|
      if l.match(/^\s*:c\d+:/)
        l = l.sub(/:c(\d+)?:/, '#').
            sub(/(^\s*# )["']/, '\1').
            sub(/["']\s*$/, '').
            gsub(/''(\S+?)''/, "'\\1'").
            gsub(/(\S)''/, "\\1'")
      end
      ret << l.chomp
    end
    ret * "\n"
  end 
```

示例用法。

```
commentify_yaml(
  {
    c1: 'Comment line 1',
    c2: 'Comment line 2',
    'hash_1' => {
      c1: 'Foo',
      c2: 'Bar',
      'key_1' => "Hello!",
    },
    'baz' => qux,
    c3: 'Keep up-numbering the comments in the same hash',
    'array_1' => [
       1,
       2,
       3
     ]
  }
)

==>

# Comment line 1
# Comment line 2
hash_1:
  # Foo
  # Bar
  key_1: "Hello!"
baz: "Value of qux"
# Keep up-numbering the comments in the same hash
array_1:
- 1
- 2
- 3 
```

（注意：Syck 并没有按照他们应该的方式缩进数组。）

# android - WebView 指令序列有时不按预期顺序

> ID：14149571
> 
> 赞同：0
> 
> 时间：2013-01-04T00:44:20.227
> 
> 标签：android, browser, webview, spinner, sequence

我正在尝试根据我的网络浏览器中当前显示的页面来更新微调器项目。当我点击后退按钮时遇到问题，因为在 goBack 函数返回 PREVIOUS 而不是更新的 URL 之后从 getUrl() 返回的 url。浏览器按预期更新，我的 url 变量只是得到一个过时的值。我假设我看到了与多个线程相关的问题。谁能告诉 mw 如何确保我的 goBack() 和 getUrl() 指令按预期顺序工作？谢谢！

```
 Button back_button = (Button) findViewById(R.id.back_button);
    back_button.setOnClickListener(new View.OnClickListener() {
        @Override
        public synchronized void onClick(View view) {
            if (browser.canGoBack())
                browser.goBack();
                String url = browser.getUrl();
                Log.v(LOG_TAG, "Browser URL = " + url);
                setDocSpinner(doc_spinner, url);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:54:43.217

考虑从 a[`WebViewClient`](http://developer.android.com/reference/android/webkit/WebViewClient.html)而不是从后退按钮的侦听器执行此操作。覆盖[`onPageStarted`](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageStarted%28android.webkit.WebView,%20java.lang.String,%20android.graphics.Bitmap%29)并且[`onPageFinished`](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageFinished%28android.webkit.WebView,%20java.lang.String%29)可能特别有用。

# meteor - 如何使用 Meteor 解析 url

> ID：14149576
> 
> 赞同：2
> 
> 时间：2013-01-04T00:45:11.623
> 
> 标签：meteor

我将 Meteor 与另一个 CMS 一起使用，并正在创建一个包含运行 Meteor 所需的变量的 url（例如[http://site.com?a=flash&b=hash](http://site.com?a=flash&b=hash)）。如何使这些变量可用，并让 Meteor 将其忽略为位置？当我像这样加载 url 时，我的应用程序无法正确加载，大概是因为它认为我正在请求不同的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:54:30.327

除非您使用例如，否则在 Meteor 中使用查询字符串应该没有效果。Meteor Router 根据当前 URL 调用不同的方法。

如果要解析查询字符串，只需使用例如手动解析它。（在咖啡脚本中）

```
 querystring: ->
    qs = {}
    for pair in window.location.search.replace("?", "").split "&"
      [k, v] = pair.split("=")
      qs[k] = v
    qs 
```

这将返回一个对象，如：

```
{ "a": "flash", "b": "hash" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T14:44:24.633

使用 Iron 路由器，如果 url 中有查询字符串或哈希片段，您可以使用 this.params 对象的查询和哈希属性访问那些。

```
// given the url: "/post/5?q=s#hashFrag"
Router.route('/post/:_id', function () {
  var id = this.params._id;
  var query = this.params.query;

  // query.q -> "s"
  var hash = this.params.hash; // "hashFrag"
}); 
```

# fortran - 在程序运行期间从用 FORTRAN 写入的文件中检索数据

> ID：14149582
> 
> 赞同：1
> 
> 时间：2013-01-04T00:46:06.033
> 
> 标签：fortran

我正在尝试将一系列时间值（实际值）写入 FORTRAN 中的 dat 文件。这是 MPI 代码的一部分，代码运行时间很长。所以我想在每个时间步提取数据并将其打印到文件中，并在程序执行期间随时读取文件。目前，我面临的问题是，在程序结束之前时间值不会写入文件。我将 open 语句放在 do 循环之前，将 close 语句放在 do 循环结束之后。

我的代码部分如下所示：

```
open(unit=57,file='inst.dat')
do loop starts
.
.
.
write(57,*) time
.
.
.
end do
close(57) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T09:38:51.740

在每个时间步之后关闭文件怎么样（假设时间步之间经过了合理的时间）？

```
do loop starts
.
.
  !Note: an if statement should wrap the following so that it is
  !only called by one processor.
  open(unit=57,file='inst.dat')
  write(57,*) time
  close(57)
.
.
end do 
```

或者，如果时间步长之间的时间很短，则在 10、100、... 迭代块之后写入数据可能更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:58:39.240

来自 Gfortran[手册](http://gcc.gnu.org/onlinedocs/gfortran/FLUSH.html)：

从 Fortran 2003 标准开始，有一个`FLUSH`语句应该优于`FLUSH`内在语句。

`FLUSH`内在语句和 Fortran 2003语句具有相同的`FLUSH`效果：它们刷新运行时库的 I/O 缓冲区，以便数据对其他进程可见。这并不能保证将数据提交到磁盘。

在 POSIX 系统上，您可以通过调用 fsync 函数请求将所有数据传输到存储设备，并将 I/O 单元的 POSIX 文件描述符作为参数（使用 GNU 内部 FNUM 检索）。以下示例显示了如何：

```
 ! Declare the interface for POSIX fsync function
    interface
      function fsync (fd) bind(c,name="fsync")
      use iso_c_binding, only: c_int
        integer(c_int), value :: fd
        integer(c_int) :: fsync
      end function fsync
    end interface

    ! Variable declaration
    integer :: ret

    ! Opening unit 10
    open (10,file="foo")

    ! ...
    ! Perform I/O on unit 10
    ! ...

    ! Flush and sync
    flush(10)
    ret = fsync(fnum(10))

    ! Handle possible error
    if (ret /= 0) stop "Error calling FSYNC" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:13:53.987

试试`call flush(unit)`。检查您的编译器文档，因为我认为这是一个扩展。

您提到 MPI：对于并行代码，我认为您需要为每个线程提供自己的文件/单元，或采取其他措施来避免冲突。

# ogre - OSX 上的 ROS Groovy 安装失败 - rviz 和 OGRE

> ID：14149593
> 
> 赞同：0
> 
> 时间：2013-01-04T00:48:11.670
> 
> 标签：ogre, ros

尝试在 mac osx 中安装 ROS Groovy 时，按照[http://www.ros.org/wiki/groovy/Installation/OSX/Homebrew/Source](http://www.ros.org/wiki/groovy/Installation/OSX/Homebrew/Source)教程，我得到

> [ 60%] 构建 CXX 对象 src/rviz/CMakeFiles/rviz.dir/moc_widget_geometry_change_detector.cxx.o 构建 CXX 对象 src/rviz/CMakeFiles/rviz.dir/moc_selection_panel.cxx.o [ 61%] 构建 CXX 对象 src/rviz /CMakeFiles/rviz.dir/moc_tool_properties_panel.cxx.o 链接 CXX 共享库 /Users/mllofriu/ros_catkin_ws/devel_isolated/rviz/lib/librviz.dylib ld：未找到 -lOgreMain 的库 clang：错误：链接器命令失败并出现退出代码1（使用 -v 查看调用） make[2]: *** [/Users/mllofriu/ros_catkin_ws/devel_isolated/rviz/lib/librviz.dylib] 错误 1 ​​make[1]:****[src/rviz/CMakeFiles/rviz.dir/all] 错误 2 make: ** * [all] 错误 2*
> 
>  *<== 无法处理包“rviz”：命令“/opt/ros/groovy/env_cached.sh make -j4”返回非零退出状态 2 命令失败，退出。*

 *OgreMain 在 OSX 中似乎不存在。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:50:19.877

Ogre 是一个 3D 渲染引擎，不是 OSX 的一部分（但在该平台上受支持）。ROS 项目在其可视化工具中使用 Ogre 作为渲染部分。

根据他们的网站，目前他们正在处理的 ROS+Ogre 构建过程存在问题，比较此[ROS 支持票](https://code.ros.org/trac/ros-pkg/ticket/5595)。

[同时，您应该尝试此处](http://www.ros.org/wiki/groovy/Installation/OSX/Homebrew/Source#groovy.2BAC8-Installation.2BAC8-Source.Building_the_catkin_Packages)列出的其他两个构建选项，直到他们设法解决了构建过程问题：

**桌面安装（推荐）：** ROS、rqt、rviz 和机器人通用库
**ROS-Comm：（Bare Bones）** ROS 包、构建和通信库。没有 GUI 工具。

如果您觉得自己能胜任这项任务，另一种选择可能是自己编译 Ogre。*

# php - 在注册表中添加数据

> ID：14149601
> 
> 赞同：0
> 
> 时间：2013-01-04T00:49:40.247
> 
> 标签：php, mysql

好的，我正在制作一个基于浏览器的口袋妖怪游戏，但我在制作它时遇到了麻烦，所以当用户注册到我的网站时，他们会获得一个他们选择的入门口袋妖怪。除了它为用户提供口袋妖怪的部分外，我已经完成了所有工作，现在它会将口袋妖怪输入数据库，但它不会将口袋妖怪提供给注册它的用户，因此将 belongsto 字段留空。我有点难以解释。

这是我的代码的一部分，它将数据输入到存储所有用户口袋妖怪的表中。

```
<?php

if ($_POST['starter'] == '1' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Bulbasaur','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '2' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Charmander','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '3' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Squirtle','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '4' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Chikorita','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '5' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Cyndaquil','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '6' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Totodile','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '7' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Treecko','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '8' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Torchic','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '9' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Mudkip','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '10' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Turtwig','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '11' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Chimchar','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '12' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Piplup','".$_SESSION['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}
?> 
```

我想不通的是如何制作它，因此它采用用户注册的名称并将其替换为 .$_SESSION['username']。我知道这行不通，因为此人尚未登录，因为他们仍在注册。

这是我的表格。

```
<form action="" method="post">
        <div align="center">
          <ul>
            <p></p>
              Username* <br>
              <input type="text" name="username">

            <p></p>
              Password*<br>
              <input type="password" name="password">

            <p></p>
              Password again*<br>
              <input type="password" name="password_again">

            <p></p>
              First name<br>
              <input type="text" name="first_name">

            <p></p>
              Last name<br>
              <input type="text" name="last_name">

            <p></p>
              Email*<br>
              <input type="text" name="email">

            <p></p>
              Starter*<br>
              <select name="starter" id="" >
                <option value="1">Bulbasaur</option>
                <option value="2">Charmander</option>
                <option value="3">Squirtle</option>
                <option value="4">Chikorita</option>
                <option value="5">Cyndaquil</option>
                <option value="6">Totodile</option>
                <option value="7">Treecko</option>
                <option value="8">Torchic</option>
                <option value="9">Mudkip</option>
                <option value="10">Turtwig</option>
                <option value="11">Chimchar</option>
                <option value="12">Piplup</option>
              </select>

              <p></p>
              <input type="submit" value="Register">

            </ul>
          </div>
        <ul>
        </ul>
</form> 
```

我很抱歉这个巨大的问题，但任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:23:55.897

伙计，看起来你真的是 PHP 新手，所以让我提供一些建议。

1.  在查询中使用 $_POST/$_GET 值？不要那样做。永远不要相信用户。[了解原因。](http://en.wikipedia.org/wiki/SQL_injection)

> 您必须假设您的访问者是一个疯狂的连环杀手，目的是破坏您的应用程序。你必须阻止它。

1.  清理你的代码。正如其他人所建议的那样，循环/切换可能会对您有所帮助
2.  也许对于您的项目来说还为时过早，但请尝试移动 OOP。（即使有时看起来有点矫枉过正，但缺点很低，优点很大）

顺便说一句，这应该可以解决问题，使用[PDO](http://php.net/manual/en/class.pdo.php "PDO")：

```
$dbh = new PDO('mysql:dbname=YOURDBNAME;host=localhost', $db_user, $db_passwd);
// Get the choosen starter pokemon
$starter = $_POST['starter'];
$pokemons = array(
    1 => 'Bulbasaur',
    2 => 'Charmander',
    //[.. and so on..]
);

// check if choosed pokemon is available
if(!in_array($starter, $pokemons))
{
    // Pokemon not available, throw exception, error, die(), whatever
}
else
{
    // Insert the pokemn into the db
    $insert = $dbh->prepare("INSERT INTO user_pokemon (pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES (:pokemon, :user, 100,:time ,1, 5 ,'Normal')");

    $user_name = $_POST['username']; // what about check the username? Sanitization, etc..

    if($insert->execute(array(':pokemon' => $pokemons[$starter], ':user' => $user_name, ':time' => time())))
    {
        // Success!
    }
    else
    {
        // Error!
        $error = $insert->errorInfo();
        print_r("There was an error: \ncode: %s\nmessage:%s", $error[1], $error[2]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:03:24.247

您的代码有很多需要改进的地方。但这里有一个快速修复：

```
<?php

if ($_POST['starter'] == '1' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Bulbasaur','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '2' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Charmander','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '3' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Squirtle','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '4' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Chikorita','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '5' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Cyndaquil','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '6' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Totodile','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '7' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Treecko','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '8' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Torchic','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '9' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Mudkip','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '10' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Turtwig','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '11' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Chimchar','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}

if ($_POST['starter'] == '12' ) {
mysql_query("INSERT INTO user_pokemon 
(pokemon, belongsto, exp, time_stamp, slot, level,type) VALUES('Piplup','".$_POST['username']."', 100,'".time()."','1' ,'5','Normal' )
 ") or die(mysql_error());  
}
?> 
```

这假设您的帖子是从您页面上的该表单提交的。就像别人说的，学习 PDO： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

您当前的代码容易发生 SQL 注入： [http ://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

这是不好的。

# c# - 使用 C# 以编程方式打开魅力栏、电源栏和开始菜单

> ID：14149603
> 
> 赞同：5
> 
> 时间：2013-01-04T00:49:45.660
> 
> 标签：c#, windows, winapi, windows-8, charms-bar

如何以编程方式打开：

*   魅力酒吧

*   电源选项

*   开始菜单

在 Windows 8 中？

我希望能够从我的 c# 应用程序中打开它们

找不到我需要的文件

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:55:46.943

我敢打赌，发送 Windows 密钥（以及其他密钥，根据需要）就足够了。

这是另一篇关于如何使用 API 调用的帖子。

[SendKeys.Send 和 Windows 键](https://stackoverflow.com/questions/6407584/sendkeys-send-and-windows-key)

打开...

*   ...开始屏幕 - 只需发送 Windows 键。
*   ... Charms - 发送 Windows 键 + C。
*   ...设置超级按钮栏（靠近电源选项） - 发送 Windows 键 + I。

# java - 不同的参数类型

> ID：14149604
> 
> 赞同：0
> 
> 时间：2013-01-04T00:49:45.770
> 
> 标签：java, arguments

我有一个关于设计实施的问题。因此，有两种方法可以运行该程序。

1.  通过命令行传递输入、输出目录
2.  或从配置文件中读取（在这种情况下，我通过命令行传递配置文件的参数）
3.  如果没有传递参数，则抛出错误

到目前为止，我一直在使用 args[0]、args[1]...

有没有办法（我确定有），以便我可以将标志（如 --input --output 等）作为参数传递给 java。

对设计实施有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:53:54.327

您可以使用这个专注于您的需求的 apache 库：

[http://commons.apache.org/cli/usage.html](http://commons.apache.org/cli/usage.html)

因此，您将能够避免使用糟糕的`args`表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:55:40.717

另一个（简单）替代方案

[http://www.martiansoftware.com/jsap/](http://www.martiansoftware.com/jsap/)

# java - jScrollPane 无法添加组件

> ID：14149608
> 
> 赞同：4
> 
> 时间：2013-01-04T00:51:25.640
> 
> 标签：java, swing, layout-manager, jcomponent

我`jScrollPane`在表单上有一个和一个按钮。该按钮将一个组件添加到`jScrollPane`. 我正在使用`FlowLayout`带有中心对齐的 a 来排列`jScrollPane`.

第一个组件没有出现任何问题并且完美对齐。当我再次按下按钮时，似乎什么也没有发生。当我跟随调试器时，它表明一切都像以前一样发生。

单击按钮时正在执行的代码：

```
jScrollPane.getViewport().add(new Component()); 
```

这就是我设置`FlowLayout`的`Viewport`方式`jScrollPane`：

```
jScrollPane.getViewport().setLayout(new FlowLayout(FlowLayout.CENTER)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T02:54:00.470

您将重量级 (AWT) 组件与重量级 (Swing) 组件混合在一起，这是不可取的，因为它们往往不能很好地配合使用。

`JScrollPane`包含一个`JViewPort`您可以在其上添加子组件的组件，即视图。

![在此处输入图像描述](../Images/28ff4d4e0a8e05d475a56fe686327242.png)

（来自[JavaDocs](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html)的图像）

所以调用`jScrollPane.getViewport().setLayout(new FlowLayout(FlowLayout.CENTER));`实际上是在设置`JViewPort`的布局管理器，这确实是不可取的。

您应该做的是创建要添加到滚动窗格的组件，设置它的布局并将其所有子组件添加到其中，然后将其添加到滚动窗格中。如果需要，您可以在稍后阶段将组件添加到“视图”，但这取决于您...

```
// Declare "view" as a class variable...
view = new JPanel(); // FlowLayout is the default layout manager
// Add the components you need now to the "view"
JScrollPane scrollPane = new JScrollPane(view); 
```

现在您可以根据需要向视图中添加新组件...

```
view.add(...); 
```

如果您不想维护对 的引用`view`，可以通过调用`JViewport#getView`which 来访问它，这将返回由视口管理的组件。

```
JPanel view = (JPanel)scrollPane.getViewPort().getView(); 
```

**工作示例**

这对我来说很好......

nb - 我添加`view.validate()`到我的代码中，你可能没有，在我添加了一个新组件之后......

```
public class TestScrollPane01 {

    public static void main(String[] args) {
        new TestScrollPane01();
    }

    public TestScrollPane01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MainPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MainPane extends JPanel {

        private JScrollPane scrollPane;
        private int count;

        public MainPane() {
            setLayout(new BorderLayout());
            scrollPane = new JScrollPane(new JPanel());
            ((JPanel)scrollPane.getViewport().getView()).add(new JLabel("First"));
            add(scrollPane);

            JButton add = new JButton("Add");
            add.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JPanel view = ((JPanel)scrollPane.getViewport().getView());
                    view.add(new JLabel("Added " + (++count)));
                    view.validate();
                }
            });

            add(add, BorderLayout.SOUTH);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

    }

} 
```

# mysql - mysql分布组合/值

> ID：14149611
> 
> 赞同：1
> 
> 时间：2013-01-04T00:51:39.600
> 
> 标签：mysql, sql, combinatorics

我有一个 mysql 表，其中包含一些随机数字组合。为简单起见，以下表为例：

```
index|n1|n2|n3
1     1  2  3
2     4  10 32
3     3  10 4 
4     35  1 2
5     27  1 3 
etc 
```

我想知道的是表中组合出现的次数。例如，4 10 或 1 2 或 1 2 3 或 3 10 4 等的组合出现了多少次。

我是否必须创建另一个包含所有可能组合的表并从那里进行比较，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:21:36.947

表中只有三列，因此您正在寻找 1、2 和 3 个元素的组合。

为简单起见，我将从下表开始：

```
select index, n1 as n from t union all
select index, n2 from t union all
select index, n3 from t union all
select distinct index, -1 from t union all
select distinct index, -2 from t 
```

我们称之为“价值观”。现在，我们想从这个表中获取给定索引的所有三元组。在这种情况下，-1 和 -2 表示 NULL。

```
select (case when v1.n < 0 then NULL else v1.n end) as n1,
       (case when v2.n < 0 then NULL else v2.n end) as n2,
       (case when v3.n < 0 then NULL else v3.n end) as n3,
       count(*) as NumOccurrences
from values v1 join
     values v2
     on v1.n < v2.n and v1.index = v2.index join
     values v3
     on v2.n < v3.n and v2.index = v3.index 
```

这是使用连接机制来生成组合。

此方法查找所有组合而不考虑排序（因此 1、2、3 与 2、3、1 相同）。此外，这会忽略重复项，因此如果 2 重复两次，则无法找到 (1, 2, 2) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:06:40.153

对于单个组合，这很容易：

```
SELECT COUNT(*)
FROM my_table
WHERE n1 = 3 AND n2 = 10 AND n3 = 4 
```

如果您想使用多种组合来执行此操作，您可以创建它们的（临时）表并将该表与您的数据连接起来，如下所示：

```
CREATE TEMPORARY TABLE combinations (
  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
  n1 INTEGER, n2 INTEGER, n3 INTEGER
);

INSERT INTO combinations (n1, n2, n3) VALUES
  (1, 2, NULL), (4, 10, NULL), (1, 2, 3), (3, 10, 4);

SELECT c.n1, c.n2, c.n3, COUNT(t.id) AS num
FROM combinations AS c
  LEFT JOIN my_table AS t
    ON (c.n1 = t.n1 OR c.n1 IS NULL)
   AND (c.n2 = t.n2 OR c.n2 IS NULL)
   AND (c.n3 = t.n3 OR c.n3 IS NULL)
GROUP BY c.id; 
```

（[关于 SQLize 的演示](http://www.sqlize.com/64bNtQfEXc)）

请注意，由于`OR c.n? IS NULL`子句的原因，编写的这个查询效率不高，MySQL 不够聪明，无法优化。如果您的所有组合都包含相同数量的术语，则可以将其省略，这将允许查询利用数据表上的索引。

附言。使用上面的查询，组合`(1, 2, NULL)`将不匹配`(35, 1, 2)`。但是，`(NULL, 1, 2)`如果你想要两者，一个简单的解决方法是在你的组合表中包含这两种模式。

如果您实际上有比示例中显示的多得多的列，并且您想要匹配任何一组连续列中出现的模式，那么您真的应该将您的列打包成一个字符串并使用`LIKE`or`REGEXP`查询。例如，如果您将所有数据列连接到名为 的列中的逗号分隔字符串中`data`，您可以像这样搜索它：

```
INSERT INTO combinations (pattern) VALUES
  ('1,2'), ('4,10'), ('1,2,3'), ('3,10,4'), ('7,8,9');

SELECT c.pattern, COUNT(t.id) AS num
FROM combinations AS c
  LEFT JOIN my_table AS t
    ON CONCAT(',', t.data, ',') LIKE CONCAT('%,', c.pattern, ',%')
GROUP BY c.id; 
```

（[关于 SQLize 的演示](http://www.sqlize.com/9h349S43m0)）

您可以通过在表中添加前缀和后缀以及部分实际数据来使此查询更快一些`CONCAT()`，但是如果您要搜索大量数据，这仍然是一个相当低效的查询，因为它无法使用的索引。如果您需要在大型数据集上有效地执行这种子字符串搜索，您可能希望使用比 MySQL 更适合特定目的的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T00:58:39.683

```
SELECT
    CONCAT(CAST(n1 AS VARCHAR(10)),'|',CAST(n2 AS VARCHAR(10)),'|',CAST(n3 AS VARCHAR(10))) AS Combination,
    COUNT(CONCAT(CAST(n1 AS VARCHAR(10)),'|',CAST(n2 AS VARCHAR(10)),'|',CAST(n3 AS VARCHAR(10)))) AS Occurrences
FROM
    MyTable
GROUP BY
    CONCAT(CAST(n1 AS VARCHAR(10)),'|',CAST(n2 AS VARCHAR(10)),'|',CAST(n3 AS VARCHAR(10))) 
```

这将创建一个单列，通过连接值来表示 3 列中的值的组合。它将计算每个的出现次数。

# python - 将变量附加到 msg [“To”] 后未发送电子邮件

> ID：14149613
> 
> 赞同：1
> 
> 时间：2013-01-04T00:51:50.653
> 
> 标签：python

我正在尝试将变量`to`（具有电子邮件 ID）附加到并将`msg["To"]`电子邮件发送到此列表。没有错误或任何东西，但没有发送电子邮件。一旦我`to`从中删除变量`msg["To"]`，电子邮件就会成功发送。我哪里错了？

```
def email (body,subject,to):
    msg = MIMEText("%s" % body)
    msg["Content-Type"] = "text/html"
    msg["From"] = "service@company.com"
    msg["To"] = to + "username@company.com"
    msg["Subject"] = '%s' % subject
    p = Popen(["/usr/sbin/sendmail", "-t"], stdin=PIPE)
    p.communicate(msg.as_string()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:06:19.293

问题是，如果您有一个电子邮件地址，附加第二个只会将它们一起运行。

```
to = "address1@example.com"
msg["To"] = to + "address2@example.com"
print msg["To"]
>>> address1@example.comaddress2@example.com 
```

不用说，`address1@example.comaddress2@example.com`这不是一个有效的电子邮件地址，任何 MTA 都会对它大发雷霆。

根据 RFC 822 及其后续标准，MTA 期望地址之间使用逗号，因此：

```
msg["To"] = to + ", address2@example.com" 
```

应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T00:57:38.443

添加 to=to.strip() 修复它..

# c# - Use of unassigned local variable when variable will always be assigned

> ID：14149617
> 
> 赞同：0
> 
> 时间：2013-01-04T00:52:17.303
> 
> 标签：c#

The code below (that will not be production code) will not compile because of an `Use of unassigned local variable 'dateTime'` Looking at it I can tell that the variable would never be unassigned at return time. Returning an out parameter in an Any clause is bad form, but why can't it compile?

```
 private static DateTime? ConvertStringToDateByFormat(string date) {
     DateTime dateTime;

     var acceptableDateFormats = new List<String>{
        "d/MM/yyyy",
        "d/M/yyyy",
        "d/MM/yy",
        "d/M/yy",
        "d-MM-yyyy",
        "d-M-yyyy",
        "d-MM-yy",
        "d-M-yy",
        "d.MM.yyyy",
        "d.M.yyyy",
        "d.MM.yy",
        "d.M.yy",
        "d-MMM-yyyy",
        "d-MMM-yy",
        "d MMM yyyy",
        "d MMM yy"
     };

     if (acceptableDateFormats.Any(format => DateTime.TryParseExact(date, format, CultureInfo.CurrentCulture, DateTimeStyles.None, out dateTime))) {
        return dateTime;   
     }
     else {
        return null;
     }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:55:36.957

Because the lambda passed to `Any` may not be executed - imagine that your acceptableDateFormats were an empty collection. The compiler could be smarter and see that it was defined before and it has some values, but like many other things which the compiler *could* do, it probably wasn't worth the effort of the developers of the compiler to implement such thing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:57:30.230

Add to @carlosfigueira's answer: Additionally, The compiler will never know at compile-time whether your `date` variable can be parsed successfully and store it in your `dateTime` variable. Thus your `dateTime` variable may not be initialized when the program reaches your `return dateTime` statement.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:02:11.133

This is because the .Net compiler is checking the syntax of your code. And as you already pointed out, the dateTime object is not instantiate, which lead to an "invalid syntax".

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T01:02:59.247

You could just assign it a value since you return `null` if it does not parse anyway

```
private static DateTime? ConvertStringToDateByFormat(string date)
{
    DateTime dateTime = DateTime.MinValue;
     ... 
```

# c++ - 实现方法时如何使用命名空间？

> ID：14149624
> 
> 赞同：2
> 
> 时间：2013-01-04T00:53:29.670
> 
> 标签：c++, class, namespaces, header-files

`.hpp`我在命名空间中包含的一行中有一个类声明：

```
namespace mylib
{
    class MyClass
    {
        public:

        MyClass();
    }
} 
```

我计划在一个`.cpp`文件中实现类的功能。

但是，这两种方法似乎都有效：

```
mylib::MyClass::MyClass()
{
} 
```

和

```
namespace mylib
{
    MyClass::MyClass()
    {
    }
} 
```

所以我想知道这些方法之间有什么区别，以及我是否应该更喜欢其中一种。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T01:01:23.643

这是个人喜好。`namespace`但是，您可以使用带括号的关键字来保存代码。此外，这些可能更容易阅读（知道一切都在同一个命名空间中）。

还要记住，`namespace`一旦您开始使用在您的类中定义的自定义类型，例如用作返回或参数类型的不同本地类，不使用可能会变得相当乏味和混乱：

```
myNamespace::myClass::myType &myNamespace::myClass::doSomething(const myNamespace::myOtherClass &theOther) {
    // ...
}

namespace myNamespace {
    myClass::myType &myClass::doSomethingDifferent(const myOtherClass &theOther) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:02:49.217

`mylib::`包含 7 个字符

`namespace mylib { }`包含 16 个字符（不包括空格）

因此，通过使用第二种形式，只要您定义 3 个或更多方法，您就可以节省输入时间。

# ruby-on-rails - 保留编辑页面的 meta_search 参数？

> ID：14149626
> 
> 赞同：0
> 
> 时间：2013-01-04T00:53:52.873
> 
> 标签：ruby-on-rails, session, meta-search

我正在使用 meta_search gem。对于带有搜索参数的管理项目索引页面，我有这样的 url。

```
admin/projects?utf8=✓&amp;search%5Bid_equals%5D=&search%5Btitle_contains%5D=&search%5Bstage_in%5D=completed 
```

然后用户选择一个项目，网址将是这个

```
admin/projects/a--15/edit?page=1 
```

当用户更新此表单时，搜索参数将丢失。

我怎样才能保留这些参数。我的意思是 session 或 meta_search 有一些方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:28:45.237

首先，为每个可能想要访问搜索参数的操作创建一个过滤器：

```
ProjectsController < ApplicationController
  before_filter :save_searches 

  def save_searches
    @addons = ''
    [:page, :id_equals,:title_contains,:stage_in].each do |k|
      if params[k]
        pval = params[k].is_a?(Array) ? params[k].join(',') : params[k]
        @addons << k.to_s + "=" + pval + "&" 
      end
    end
    @addons.chop!
  end 
```

现在，当你的动作触发时，@addons 将被设置，然后你可以这样做：

```
<%= link_to 'Edit' , edit_path(@project.id) + @addons.length > 0 ? "?" + @addons : '' %> 
```

就是说，我敢打赌这在某种程度上是一种黑客行为，并且有一种更清洁的方法可以做到这一点。但这对我有用。

:page 键使得如果您运行分页并使用 :page 参数跟踪当前页面，您的分页也应该被记住。

另请注意，如果您在参数中获得一个数组（即使用 :multiple=>true 进行选择的结果），则会处理此问题。

# sql-server - SQL Server 2008R2 Express 和 LocalDB 在同一台机器上

> ID：14149628
> 
> 赞同：0
> 
> 时间：2013-01-04T00:53:59.583
> 
> 标签：sql-server, sql-server-2008

我正在尝试评估 LocalDB。我的电脑上已经安装了 SQL Server 2008 R2 Express（除了 SQL Server 2008 R2 Standard 和 SQL Server 2008 Standard）。

当我尝试安装 LocalDB 时，它会要求确认升级。所以它试图通过 2008 R2 Express 升级到 Localdb？我打了不，没有进一步进行。

有人可以向我指出他们解释到底发生了什么的链接吗？我的 2008 R2 Express 会永远消失吗？所有数据库都将升级到LocalDB？不会再有快递服务了？

我只想使用 localdb 作为补充，而不是作为替代。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:09:41.493

您如何尝试安装 LocalDB？如果您通过 SSDT（SQL Server 开发工具）执行此操作，它不会触及您的任何其他 SQL Server 实例。另外，请记住 LocalDB 不是 SQL Server 的实例，因为您的其他实例是。它本质上是一个在需要时启动（尝试连接到它）并在不需要时关闭的过程。因此，它不会与您的其他 SQL Server 实例竞争。

# c++ - 对象比较与排序。C++

> ID：14149629
> 
> 赞同：2
> 
> 时间：2013-01-04T00:54:14.577
> 
> 标签：c++

我很难在这里理解其他人的代码。如果有人帮助我，我将不胜感激。

假设有一个 object 数组：`vpair_list`并且 this`vpair_list`有一个 class 的类型`vpair`。所以，它会是这样的：

```
class vpair
{
public:
    int vid;
    int vlabel;
};

bool operator < (const vpair& x, const vpair& y);

vpair* vpair_list;
vpair_list = new vpair[25];
..
sort(vpair_list, vpair_list+j); 
```

我从中知道的是`sort()`比较数组的每个元素`vpair_list`并对它们进行排序。

问题是我无法理解排序是如何工作的，因为对象`vpair`有两个不同的属性。

排序是否像比较每个属性（`vid`和`vlabel`）或......？我认为排序应该通过比较特定字段或属性（`vid`或`vlabel`此处）来完成。

但是这段代码与此无关，似乎只是比较了整个对象。有人可以告诉我这是如何工作的吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:58:17.797

标准做法：

```
class vpair
{
public:
    int vid;
    int vlabel;
};

bool operator < (vpair const& x, vpair const& y)
{
     return std::tie(x.vid, x.vlabel) < std::tie(y.vid, y.vlabel);
} 
```

当然，操作员可以是成员：

```
class vpair
{
    int vid;
    int vlabel;
public:
    bool operator < (vpair const& y) const
    {
         return std::tie(vid, vlabel) < std::tie(y.vid, y.vlabel);
    }

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:59:05.483

默认情况下，排序与`operator<`. 您可以像这样为您的类实现此运算符：

```
public:
bool operator < (const vpair& other) const
{
     return (vid < other.vid); // Uses vid but this can be vlable or something else.
} 
```

如果您使用的类没有重载，`operator<`则始终可以将比较函数作为`std::sort`的第三个参数传入：

```
bool compare_func(vpair i,vpair j) { return (i.vid < j.vid); }
sort(vpair_list, vpair_list+j, compare_func); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:11:58.577

> 排序是否像比较每个属性（vid 和 vlabel）或....？

它**完全按照您希望**的方式发生。

默认情况下，正如人们所提到的，各种排序算法都使用运算符来**按该运算符的升序**`<`排列元素。然而，对于类/结构，**没有默认方法**来比较它们，这意味着**程序员**必须对其进行编码。

 ******那是什么

```
bool operator < (const vpair& x, const vpair& y); 
```

是。它只是对程序员提供的用于比较 2`vpair`顺序的函数定义的声明。程序员使用他的规则来决定并最终返回`true`or `false`。这是用来排序的。

因此**，您可以**准确地决定您希望它如何排序。

```
bool operator < (const vpair& x, const vpair& y)
{
     if(x.vid != y.vid)
        return x.vid<y.vid;

     return x.vlabel <y.vlabel;
} 
```

这将按 ID 的升序排序，如果它们相等，则按 vlabel 的升序排序。******

# assembly - 这个装配错误是什么意思？“必须指定语言类型”？

> ID：14149641
> 
> 赞同：0
> 
> 时间：2013-01-04T00:55:42.040
> 
> 标签：assembly, x86, masm, masm32

我刚开始使用 MASM32 学习 x86 汇编，我编写了一个程序并运行它，但它抛出错误“必须指定语言类型”。这个错误是什么意思？谷歌搜索一无所获。

我确定我在我的程序中包含了所有相关信息：

```
.386
model flat, stdcall
option casemap :none
<includes>
... 
```

我错过了什么？我有一个 x64 592Mhz 英特尔处理器，我正在使用 MASM32 和 Windows 7 Starter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:08:48.950

我很惊讶您的 Google 搜索结果一无所获。我将错误消息输入谷歌，并找到了这个。

来自 Microsoft KB 文章[PROC w/Parameters Requires Language Specifier on .MODEL](http://support.microsoft.com/kb/75248)：

> 与参数一起使用的 PROC 指令需要 Microsoft 宏汇编程序 (MASM) 5.1、5.1a 和 6.0 版以及 Microsoft QuickAssembler 2.01 和 2.51 版中的 .MODEL 指令中的语言说明符。语言说明符是必需的，因为它确定将与 PROC 参数一起使用的参数传递约定。

...

> 要更正代码，请在 .MODEL 语句中指定一种语言。要更正以下程序，请将语句“.MODEL small”替换为“.MODEL small, language”，其中语言为 FORTRAN、PASCAL、Basic 或 C。

# c++ - 使用 Qt 在 Mac 上设置表单行，如 iTunes 信息对话框

> ID：14149644
> 
> 赞同：0
> 
> 时间：2013-01-04T00:55:49.690
> 
> 标签：c++, qt

我只是一个初学者，我想知道是否可以在 Mac 上创建一个表单小部件，就像 iTunes 中的信息对话框一样。

![](../Images/1cc939d66980f6454826b0460f65e9a2.png "iTunes 信息对话框")

我尝试使用：

*   QGroupBox：我找不到摆脱框架的方法。
*   创建我自己的小部件：我找不到使用 QVBoxLayout 修复标签和 QLineEdit 小部件之间间距的方法（实际上我不确定我是否理解边距/间距之间的差异）。
*   QFormLayout：使用 setrowWrapPolicy::WrapAllRows 后，我找不到减小 QLabel 大小的方法

另外我（还）对 QtDesigner 不太满意，所以我想（暂时）使用它

提前致谢

编辑：程序的一些精度。我在 Mac OS X Mountain Lion 上使用 QtCreator 2.6.1 和 Qt 4.8.1 和 5.0。

编辑2：这是代码。

QWidget 的子类：

```
MCLineEdit::MCLineEdit(const QString &header)
{
    m_lineEdit = new QLineEdit;
    m_lineTitle = new QLabel(header);

    QVBoxLayout *layout = new QVBoxLayout;        
    layout->addWidget(m_lineTitle);
    layout->addWidget(m_lineEdit);
    layout->setSpacing(0);
    setLayout(layout);
} 
```

显示小部件

```
myView::myView(QWidget *parent) :
QWidget(parent)
{
    setFixedSize(600, 500);
    MCLineEdit *lineEdit1 = new MCLineEdit("Test 1");
    MCLineEdit *lineEdit2 = new MCLineEdit("Test 2");
    MCLineEdit *lineEdit3 = new MCLineEdit("Test 3");
    MCLineEdit *lineEdit4 = new MCLineEdit("Test 4");

    QVBoxLayout *mainLayout = new QVBoxLayout;
    mainLayout->addWidget(lineEdit1);
    mainLayout->addWidget(lineEdit2);
    mainLayout->addWidget(lineEdit3);
    mainLayout->addWidget(lineEdit4);
    mainLayout->setSpacing(0);

    setLayout(mainLayout);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:09:00.833

我敢肯定，这可以通过很多方式完成。Qt 为您提供了实现这一目标所需的所有可能的布局。您可以使用[`QGridLayout`](http://qt-project.org/doc/qt-4.8/qgridlayout.html), 并添加具有不同数量的“单元格”跨度的小部件，并控制行和列大小以适应。或者你可以用一堆嵌套的垂直/水平布局来做到这一点。

例如，您可以在 a 中将标签和字段组合在一起`QVBoxLayout`，方法是[添加左对齐的小部件](http://qt-project.org/doc/qt-4.8/qboxlayout.html#addWidget)，然后将项目之间的间距设置为 0：

```
layout->setSpacing(0);
layout->addWidget(aLabel, Qt::AlignLeft);
layout->addWidget(aLineEdit, Qt::AlignLeft);

mainVerticalLayout->addLayout(layout); 
```

对于像轨道号这样的东西，它只是更多的嵌套布局：

```
vLayout->addWidget(aLabel);
hLayout->addWidget(aCheckbox);
hLayout->addWidget(aLabel);
hLayout->addWidget(aCheckbox);
vLayout.addLayout(hLayout); 
```

关于你的要点：

1.  QGroupBox 让你删除框架[`setFlat(bool)`](http://qt-project.org/doc/qt-4.8/qgroupbox.html#flat-prop)
2.  对于布局，边距是包含的小部件外部的填充。您想要的是[`setSpacing(int)`](http://qt-project.org/doc/qt-4.8/qboxlayout.html#setSpacing)控制布局中项目之间的空间量。
3.  `QFormLayout`在这里可能不是您的最佳选择。这通常是为了在一侧有标签，在另一侧有小部件。基本上它是一个 2 列布局。QGridLayout 会更合适。并且要减小 的大小`QLabel`，您可以给它一个最大或固定大小。比如在标签上使用[`setFixedWidth()`](http://qt-project.org/doc/qt-4.8/qwidget.html#setFixedWidth)或。[`setMaximumWidth()`](http://qt-project.org/doc/qt-4.8/qwidget.html#maximumWidth-prop)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T00:37:48.863

所以我在玩了一下QtCreator之后终于得到了预期的结果。

以下是可能感兴趣的人的代码：

```
myLineEdit:myLineEdit(const QString &header)
{
m_lineEdit = new QLineEdit;
m_groupBox = new QGroupBox;

QFont groupFont;
groupFont.setPixelSize(10);
groupFont.setBold(true);
m_groupBox->setTitle(header);
m_groupBox->setFlat(true);
m_groupBox->setFont(groupFont);
m_groupBox->setSizePolicy(QSizePolicy::Minimum, QSizePolicy::Minimum);

QFont lineFont;
lineFont.setPixelSize(13);
lineFont.setBold(false);
m_lineEdit->setFont(lineFont);

QHBoxLayout *layout = new QHBoxLayout;
layout->addWidget(m_lineEdit);
layout->setContentsMargins(0, 10, 0, 0);
layout->setSpacing(10);
layout->setSizeConstraint(QLayout::SetMinAndMaxSize);
m_groupBox->setLayout(layout);

QHBoxLayout *mainLayout = new QHBoxLayout;
mainLayout->addWidget(m_groupBox);
setLayout(mainLayout);
} 
```

不过有一条评论：仅适用于 Qt 5，因为在 4.8 上，setFlat() 方法将在标题和 QLineEdit 之间显示一条分隔线。

感谢 jdi 的帮助！

# javascript - 用 Javascript 说“今天”

> ID：14149646
> 
> 赞同：1
> 
> 时间：2013-01-04T00:56:12.957
> 
> 标签：javascript, time, client-side, dayofweek

我正在制作一个显示商店营业时间的简单插件。我已经对其进行了编码，它看起来相当不错。它显示为类似于我在下面键入的列表。

周一 - 上午 9:00 至下午 5:00
周二 - 上午 9:00 至下午 5:00
周三 - 上午 9:00 至下午 5:00

...等等。生成的 HTML 如下所示：

```
<div id="%id%container">
    <div id="%id%title">%text="Opening Hours"%</div>
    <ul class="%id%hours">
        <li>Monday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Tuesday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Wednesday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Thursday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Friday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Saturday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Sunday<span>%text="9:00AM - 5:00PM"%</span></li>
    </ul>
</div> 
```

假设今天是星期二。与其读“星期二”，不如说“今天”。有没有办法只用Javascript（客户端）来完成这个？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:59:12.243

您应该能够利用 javascript 中的 getDay() 方法来确定星期几，然后以编程方式替换它。

[http://www.w3schools.com/jsref/jsref_getday.asp](http://www.w3schools.com/jsref/jsref_getday.asp)

编辑：看到源代码后，我认为如果您将 id 属性添加到列表项以供参考，这会更容易。然后，如果您的 ID 是 day0、day1、day2 等，则可以使用如下所示的 javascript。

```
<script type="text/javascript">
  var d = new Date();
  var obj = document.getElementById('day' + d.getDay);
  // TODO - replace day of the week on the 'obj' object
</script> 
```

不确定您是否打算使用像 jQuery 这样的 javascript 框架，但它会以包含源代码为代价使其不那么冗长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:00:15.917

看看[moment.js](http://momentjs.com/)。它应该允许你做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:19:10.107

在这里，纯 JS 解决方案：

```
<div id="%id%container">
    <div id="%id%title">%text="Opening Hours"%</div>
    <ul class="%id%hours">
        <li>Monday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Tuesday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Wednesday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Thursday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Friday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Saturday<span>%text="9:00AM - 5:00PM"%</span></li>
        <li>Sunday<span>%text="9:00AM - 5:00PM"%</span></li>
    </ul>
</div> 
```

```
var dayNames = ["Sunday","Monday","Tuesday","Wednesday","Thirsday","Friday","Saturday"];
var dayOfWeek = new Date().getDay();
var dayOfWeekText = dayNames[dayOfWeek]
var elements = document.querySelectorAll('div[id="%id%container"] ul[class="%id%hours"] li');

window.onload = function(){
    for (var i=0; i < elements.length; i++ ){
        if (elements[i].innerHTML.indexOf(dayOfWeekText) != -1){
            elements[i].innerHTML = elements[i].innerHTML.replace(new RegExp(dayOfWeekText),'Today');
            return false;
        }
    }
} 
```

`[**JSFIDDLE**](http://jsfiddle.net/DJDavid98/fNDSn/)`

# templates - Dojo 小部件模板

> ID：14149647
> 
> 赞同：0
> 
> 时间：2013-01-04T00:56:31.153
> 
> 标签：templates, dojo, widget

参考[Dojo MVC 的简单登录实现](https://stackoverflow.com/questions/10984855/simple-login-implementation-for-dojo-mvc)/ - 有一点我不明白。关于 phusick 的示例，登录对话框类调用 dom.byId("dialog-template") - "dialog-template" 是脚本中的一个 id，它是对话框的模板，应该出现在html 模板 - 不在主 html 中。因此，如果我删除它，对 dom.byId 的调用将失败

所以我的代码结构如下

main.html（调用只调用 main.js - 仅此而已） main.js（包含以下内容）

```
 require([
"dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/dom","dojo/Evented",
"dojo/_base/Deferred","dojo/json","dijit/_Widget","dijit/_TemplatedMixin",
"dijit/_WidgetsInTemplateMixin","dijit/Dialog",
"widgets/LoginDialog",
"widgets/LoginController",
"dijit/form/Form","dijit/form/ValidationTextBox","dijit/form/Button",

"dojo/domReady!"
], function(
declare,lang,on,dom,Evented,Deferred,JSON,  
_Widget,
_TemplatedMixin,
_WidgetsInTemplateMixin,

 Dialog,
 LoginDialog,
 LoginController
) {
// provide username & password in constructor
// since we do not have web service here to authenticate against    
var loginController = new LoginController({username: "user", password: "user"});

var loginDialog = new LoginDialog({ controller: loginController});
loginDialog.startup();
loginDialog.show();

loginDialog.on("cancel", function() {
    console.log("Login cancelled.");        
});

loginDialog.on("error", function() {
    console.log("Login error.");
});

loginDialog.on("success", function() {
    console.log("Login success.");
    console.log(JSON.stringify(this.form.get("value")));
});

}); 
```

现在 LoginDialog.js 和 LoginDialogTemplate.html 是对话框的模板化小部件，而 LoginController.js 是控制器。

我的 LoginDialog.js 是

```
define([
"dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/dom","dojo/Evented","dojo/_base/Deferred","dojo/json",

"dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin",
"dijit/Dialog","dijit/form/Form","dijit/form/ValidationTextBox","dijit/form/Button",
"dojo/text!templates/loginDialogTemplate.html",
"dojo/text!templates/loginFormTemplate.html",

"dojo/domReady!"
], function(
declare,lang,on,dom,Evented,Deferred,JSON,
_Widget,
_TemplatedMixin,
_WidgetsInTemplateMixin,
Dialog,
Form,
Button,
template

) {

return declare([ Dialog, Evented], {

    READY: 0,
    BUSY: 1,

    title: "Login Dialog",
    message: "",
    busyLabel: "Working...",

    // Binding property values to DOM nodes in templates
    // see: http://www.enterprisedojo.com/2010/10/02/lessons-in-widgetry-binding-property-values-to-dom-nodes-in-templates/
    attributeMap: lang.delegate(dijit._Widget.prototype.attributeMap, {
        message: {
            node: "messageNode",
            type: "innerHTML"               
        }            
    }),

    constructor: function(/*Object*/ kwArgs) {
        lang.mixin(this, kwArgs);            
        var dialogTemplate = dom.byId("dialog-template").textContent;
        var formTemplate = dom.byId("login-form-template").textContent;
        var template = lang.replace(dialogTemplate, {
            form: formTemplate                
        });

        var contentWidget = new (declare(
            [_Widget, _TemplatedMixin, _WidgetsInTemplateMixin],
            {
                templateString: template                   
            }
        ));
        contentWidget.startup();
        var content = this.content = contentWidget;
        this.form = content.form;
        // shortcuts
        this.submitButton = content.submitButton;
        this.cancelButton = content.cancelButton;
        this.messageNode = content.messageNode;
    },

    postCreate: function() {
        this.inherited(arguments);

        this.readyState= this.READY;
        this.okLabel = this.submitButton.get("label");

        this.connect(this.submitButton, "onClick", "onSubmit");
        this.connect(this.cancelButton, "onClick", "onCancel");

        this.watch("readyState", lang.hitch(this, "_onReadyStateChange"));

        this.form.watch("state", lang.hitch(this, "_onValidStateChange"));
        this._onValidStateChange();
    },

    onSubmit: function() {
        this.set("readyState", this.BUSY);
        this.set("message", "");
        var data = this.form.get("value");

        var auth = this.controller.login(data);

        Deferred.when(auth, lang.hitch(this, function(loginSuccess) {
            if (loginSuccess === true) {
                this.onLoginSuccess();
                return;                    
            }
            this.onLoginError();
        }));
    },

    onLoginSuccess: function() {
        this.set("readyState", this.READY);
        this.set("message", "Login sucessful.");             
        this.emit("success");
    },

    onLoginError: function() {
        this.set("readyState", this.READY);
        this.set("message", "Please try again.");
        this.emit("error");         
    },

    onCancel: function() {
       this.emit("cancel");     
    },

    _onValidStateChange: function() {
        this.submitButton.set("disabled", !!this.form.get("state").length);
    },

    _onReadyStateChange: function() {
        var isBusy = this.get("readyState") == this.BUSY;
        this.submitButton.set("label", isBusy ? this.busyLabel : this.okLabel);
        this.submitButton.set("disabled", isBusy);
    }            
});
}); 
```

我的 loginDialogTemplate.html 如下

```
<script type="text/template" id="dialog-template">
<div style="width:300px;">

    <div class="dijitDialogPaneContentArea">
        <div data-dojo-attach-point="contentNode">
            {form}              
        </div>
    </div>

    <div class="dijitDialogPaneActionBar">
        <div
            class="message"
            data-dojo-attach-point="messageNode"                
        ></div>      
        <button
            data-dojo-type="dijit.form.Button"
            data-dojo-props=""                
            data-dojo-attach-point="submitButton"
        >
            OK
        </button>

        <button
            data-dojo-type="dijit.form.Button"
            data-dojo-attach-point="cancelButton"
        >
            Cancel
        </button>
    </div>      
</div>
</script> 
```

由于模板具有 id="dialog-template" 所以我猜当小部件调用 dom.byId("dialog-template") 时，它会在该行：-> var dialogTemplate = dom.byId("dialog-template").textContent;

那么我在这里做错了什么？

如果我在主 html 中使用所有模板脚本，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:58:22.640

阿西夫，

由于您在定义函数中传递模板，因此不需要 dom.byId() 来获取内容。尝试这个：

从 HTML 模板中删除元素。

在 LoginDialog.js 中，将函数参数更改为：

```
...
Button,
dialogTemplate,
formTemplate 
```

您将需要 formTemplate 进行下一次更改。我使用了“dialogTemplate”而不是“模板”，因此更明显的是它是如何替换示例中的代码的。接下来，将构造函数的开头更改为：

```
constructor: function(/*Object*/ kwArgs) {
    lang.mixin(this, kwArgs);
    //var dialogTemplate = dom.byId("dialog-template").textContent;
    //var formTemplate = dom.byId("login-form-template").textContent;
    var template = lang.replace(dialogTemplate, {
        form: formTemplate
    });

    var contentWidget = new (declare(
       ... 
```

我只留下了注释代码，所以你可以看到我改变了什么。它的作用是创建一个名为“模板”的新模板字符串，方法是将您的 dialogTemplate HTML 中的 {form} 占位符替换为您传入的 formTemplate。然后它使用该新模板字符串来创建小部件。

# android - 找不到搜索结果时如何显示 2 No Results Found 文本？在安卓中

> ID：14149651
> 
> 赞同：0
> 
> 时间：2013-01-04T00:57:13.053
> 
> 标签：android, listview, textview

我的主 xml 文件中有 2`TextViews`和 2`ListViews`和一个`EditText`。

“搜索”`EditText`首先是“工具” `TextView`，然后是“工具” `ListView`，然后是“文章” `TextView`，然后是“文章” `ListView`。

我想要做的是`"No Results Found for Tools"`当有人输入一个单词（即“test”）并且它在我的 sql 中不存在时显示，我想在我的工具部分和`"No Results found for Articles"`我的文章部分中显示它

我的主要问题是，当我运行项目时，textViews 之间有很大的空间。看起来像这样

```
No Results Found in Tools

No Results Found in Articles. 
```

我想要实现的输出是：

```
No Results Found in Tools

No Results Found in Articles 
```

我尝试将列表视图的可见性设置为消失，但仍然无法正常工作。你能帮助我吗？

编辑：这是我的 xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/navbar_search"
        android:paddingLeft="5dp" >

        <ImageView
            android:id="@+id/buttonBack"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:src="@drawable/btn_back" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/violet"
        android:padding="5dp" >

        <EditText
            android:id="@+id/editTextSearch"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/hint_search"
            android:paddingLeft="35dp" >
        </EditText>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/editTextSearch"
            android:layout_centerVertical="true"
            android:layout_marginLeft="5dp"
            android:src="@drawable/search" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@color/blue"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/textArticlesResult"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:text="@string/label_articles"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/black"
            android:textStyle="bold" />

        <ListView
            android:id="@+id/listViewArticlesResult"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/textArticlesResult"
            android:cacheColorHint="@color/white"
            android:fadeScrollbars="false" >
        </ListView>
    </RelativeLayout>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@color/blue"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/textToolsResult"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:text="@string/label_tools"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/black"
            android:textStyle="bold" 
            android:layout_below = "@id/listViewArticlesResult" />

        <ListView
            android:id="@+id/listViewToolsResult"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/textToolsResult"
            android:cacheColorHint="@color/white"
            android:fadeScrollbars="false" >
        </ListView>
    </RelativeLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="46dp" >

        <ImageView
            android:id="@+id/tabHome"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_home_unselected" />

        <ImageView
            android:id="@+id/tabFb"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_fb_unselected" />

        <ImageView
            android:id="@+id/tabSearch"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_search_selected" />

        <ImageView
            android:id="@+id/tabFaves"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_myfaves_unselected" />

        <ImageView
            android:id="@+id/tabSettings"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_settings_unselected" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:06:08.203

您的代码块：`

```
 <TextView
        android:id="@+id/textArticlesResult"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:text="@string/label_articles"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/black"
        android:textStyle="bold" />

    <ListView
        android:id="@+id/listViewArticlesResult"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/textArticlesResult"
        android:cacheColorHint="@color/white"
        android:fadeScrollbars="false" >
    </ListView>
</RelativeLayout>` 
```

替换为：

```
<TextView
    android:id="@+id/textArticlesResult"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:text="@string/label_articles"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/black"
    android:textStyle="bold" />

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="@color/blue"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingTop="5dp"
    android:visibility="visible" >

    <ListView
        android:id="@+id/listViewArticlesResult"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="@color/white"
        android:fadeScrollbars="false"
        android:visibility="visible" >

    </ListView>

</RelativeLayout> 
```

并修改`android:visibility`其中`RelativeLayout`封装了您的`ListView`

# vb.net - 我的 HashTable 正在反转其输出

> ID：14149654
> 
> 赞同：3
> 
> 时间：2013-01-04T00:57:24.863
> 
> 标签：vb.net

所以我正在编写一个程序，它应该花费某人出生的一年，然后告诉他们他们的年龄以及他们出生年份的事实。所以我写了一个 Hashtable，其中包含 1950 年的事实和年龄-2012，现在我正试图让他们在有人进入一年时输出。现在它正在做的是计算年份，并进行我试图得到的计算，以及正确的年龄数字，但它与哈希表直接相反（例如，如果你说你出生于 1950 年，那么程序将给出它应该给那些说他们的出生年份是 2012 年等的人的响应）。

这是到目前为止的代码。我希望有一种方法可以解决它，而不必从头开始。

```
Imports System
Imports System.Collections

Module Module1
  Sub Main()
    Console.WriteLine("This program tells you your age based off of your birth year, and gives you a fact about that year. Please note, this year does not account for the recent year change to 2013 due to the majority of the work on it being done prior to 2013")
    Dim Years As New Hashtable
    Years.Add(0, "You are most likely less than 1 year old, your birth year (2012) was the year that the US Embassy in Lybia was attacked, leaving the US ambassador dead.")
    Years.Add(1, "You are most likely 1 year old, your birth year (2011) was the year that Osama Bin Laden, the master mind behind the September 11th attacks, was killed by Seal Team 6 in Pakistan.")

    Console.WriteLine("Please input the year of your birth.")
    Dim x As Integer
    Dim Y As Integer
    Try
        x = Console.ReadLine
    Catch ex As InvalidCastException
        Console.WriteLine("Please input a year between 1950 and 2012, the program will not work with an empty number.")
        End
    End Try
    Y = 2012 - x
    Console.WriteLine(Years.Values(Y))
    Console.ReadKey()
  End Sub
End Module 
```

我删除了大部分哈希表，因为哈希表有 63 个单位长，所以不发布一堵文字墙，但我留下了几个，以防问题在于我是如何做的。除了事实和数字之外，它们都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:07:29.197

`HashTable`需要 a `key`，您可以从`Add(key, value)`您正在调用的方法中看到。

要根据`key`（年份）访问数据，您将执行以下操作：

```
Console.WriteLine(Years(x)) 
```

其中 x 是年份（或`key`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:16:26.330

为什么不直接创建一个包含所有事实的字符串数组？然后你可以做

```
Dim facts as String() = {"fact0", "fact1", ...}
Dim Y as String = facts(2012 - x) 'Y is your value 
```

# javascript - Google Maps API + Internet Explorer + 标记不显示

> ID：14149656
> 
> 赞同：0
> 
> 时间：2013-01-04T00:57:36.940
> 
> 标签：javascript, google-maps

尽管它在其他浏览器上运行良好，但我似乎无法让标记显示在 Internet Explorer 上。

当我在 IE 上运行它时，它让我调试它并给出错误。“行：173 错误：‘控制台’未定义”

```
 <script type='text/javascript'>
var markerList = new Array();
var propertyList = new Array();
var itemDisplayList = new Array();
var geocoder;
var map;
var latLng;
var browserSupportFlag =  new Boolean();
var yaml;

var currentWindow = null;
var addr = "Kansas, KA"

function initialize() {
   newMap();
   showAllProperties();
   <% @yaml = YAML.load(File.read("config/property.yml")) %>
   <%
    addr = []
    name = []
    link = []
    contact = []
    @yaml.each do |property|
      prop = Property.new(property)
      addr << prop.format_address
      contact << prop.format_contact_info
      name << prop.property
      link << prop.link
    end
   %>
   var addresses = <%= addr.to_json %>;
   var names = <%= name.to_json %>;
   var contacts = <%= contact.to_json %>;
   var links = <%= link.to_json %>;
   var i = 0;
   function slow_addMarker(){
   if(i < addresses.length){
     var propertyObj = {address: addresses[i], name: names[i], link: links[i], contact: contacts[i]};
     propertyList.push(propertyObj);
     addMarker(propertyObj, i);
     i++;
     if (i < addresses.length){
         timeout = setTimeout(slow_addMarker,500);
     }
    }    
   }
   slow_addMarker();
/*
   for(var i = 0; i < addresses.length; i++)
   {
     var propertyObj = {address: addresses[i], name: names[i], link: links[i], contact: contacts[i]};
     propertyList.push(propertyObj);
     addMarker(propertyObj, i); //We need to specify the id or else items can be populated in the wrong order due to difference in API call timing
   }
*/
   itemDisplayList = $('.locations li');
}

function newMap()
{
  geocoder = new google.maps.Geocoder();
  var myOptions = {
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.HYBRID
      }; //end of my options
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  geocoder.geocode({'address': addr}, function(results, status)
  {
    if(status == google.maps.GeocoderStatus.OK)
    {
      latLng = results[0].geometry.location;
      map.setCenter(latLng);
      // var marker = new google.maps.Marker(
      //   {
      //     // map: map,
      //     position: latLng
      //     // icon: "/images/common/gmap_blue_icon.png",
      //     // shadow: "/images/common/shadow50.png"
      //   });
      // google.maps.event.addListener(marker, 'click', function()
      //        {
      //          if (currentWindow != null)
      //          {
      //            currentWindow.close();
      //          }
      //          infoWindowHere.open(map,marker);
      //          currentWindow = infoWindowHere;
      //        });
      }
    else
    {
      alert("Geocode was not successful for the following reason: " + status);
      latLng = new google.maps.LatLng(0.0, 0.0);
    }
  });

}

function handleNoGeolocation(errorFlag) 
{
  if(errorFlag == true)
  {
    alert("Geolocation service failed.");
    geocoder.geocode( { 'address': "<%= Property.new(YAML.load(File.read("config/property.yml"))[0]).format_address%>"}, function(results, status) 
    {
      if (status == google.maps.GeocoderStatus.OK) 
        {
          map.setCenter(results[0].geometry.location);
        } 
      else 
        {
          alert("Geocode was not successful for the following reason: " + status);
        }
    });
  } 
  else 
  {
    alert("Your browser doesn't support geolocation.");
    geocoder.geocode( { 'address': "<%= Property.new(YAML.load(File.read("config/property.yml"))[0]).format_address%>"}, function(results, status) 
    {
      if (status == google.maps.GeocoderStatus.OK) 
      {
        map.setCenter(results[0].geometry.location);
      } 
      else 
      {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
}

function addInfoWindow(propertyObject)
{
  var contentStr =''+
          '<div id="siteNotice">'+
          '<h2>'+ propertyObject.name +'</h2>'+
          '<p>'+ propertyObject.address +'</p>'+
          '<p>'+ propertyObject.contact +'</p>'+
          '<a class="goto" href="'+ propertyObject.link + '">View Details</a>'+
          '</div>';
  var infoWindow = new google.maps.InfoWindow(
    {
      map: map,
      content: contentStr
    });
  return infoWindow
}

function addMarker(propertyObject, id) 
{
  var wait_time = 200 * id;
  setTimeout(function(){
    geocoder.geocode({'address': propertyObject.address}, function(results, status)
    {
      if(status == google.maps.GeocoderStatus.OK)
      {
        var marker = new google.maps.Marker(
          {
            map: map,
            position: results[0].geometry.location
          });
        markerList[id] = marker;
        // google.maps.event.addListener(marker, 'click',  function()
        // {
        //   if (currentWindow != null)
        //   {
        //     currentWindow.close();
        //   }
        //   var infoWindow = addInfoWindow(propertyObject);
        //   infoWindow.open(map,marker);
        //   currentWindow = infoWindow;
        //   
        // });

      }
      else
      {
        //alert("Geocode was not successful for the following reason: " + status);
        if (status = google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
          setTimeout(function(){addMarker(propertyObject, id)}, 600);  //try to reload it a bit later
        }
      }
    });
  }, wait_time);
}

function hideAllMarkers() 
{
  for( var i = 0; i < markerList.length; i++)
  {
    markerList[i].setVisible(false);
  }
}

function openWindow(map, marker)
{
  // // if currentWindow != null
  // //   google.maps.event.trigger(currentWindow, 'closeclick');
  // var infoWindow = addInfoWindow(propertyObject);
  // infoWindow.open(map,marker);
  // currentWindow = infoWindow;
}

function showAllProperties() 
{
  for(var i = 0; i < propertyList.length; i++)
  {
      markerList[i].setVisible(true);
      $(itemDisplayList[i]).show('slow');
  }
}

function showOneCity(city) 
{
  for(var i = 0; i < propertyList.length; i++)
  {
    if(propertyList[i].address.search(city) != -1)
    {
      markerList[i].setVisible(true);
      $(itemDisplayList[i]).show('slow');
    }
    else
    {
      markerList[i].setVisible(false);
      $(itemDisplayList[i]).hide('slow');
    }
  }
}

function showOneProperty(property)
{
  for(var i = 0; i < propertyList.length; i++)
  {
    // alert(propertyList[i].name + " " + property)
    if(propertyList[i].name == property)
      markerList[i].setVisible(true);
    else
      markerList[i].setVisible(false);

  }  
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:21:43.893

IE 中没有控制台。删除或注释掉第 173 行（或编写控制台替换函数）。一旦你这样做，它似乎工作正常。

# javascript - SWFObject - 如何将 SWF 嵌入到 html 的不同文件夹中？

> ID：14149659
> 
> 赞同：1
> 
> 时间：2013-01-04T00:58:08.157
> 
> 标签：javascript, html, flash, swfobject

```
 <div id="flashContent">
        <h1>You need at least Flash Player 9.0 to view this page.</h1>
        <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
    </div>

    <script type="text/javascript">
        //Dynamic publishing with swfObject 

        //A 'name' attribute with the same value as the 'id' is REQUIRED for Chrome/Mozilla browsers
        var flashvars = {};
        var params = {"base": "../flashgame_new/"};
        var attributes = {id: "iTag", name: "iTag"};
        swfobject.embedSWF("flashgame.swf", "flashgame", "720", "610", "9.0", null, flashvars, params, attributes);
    </script> 
```

*   html 文件位于根目录中。
*   它正在尝试在“/iTag_FLASH_new/”中加载“iTag.swf”
*   我尝试在 swfURL 参数中输入路径 - embedSWF("/iTag_FLASH_new/iTag.swf" - 这不起作用，文件不加载
*   一些谷歌搜索告诉我这是因为我必须通过如上所述更改基本路径来指定路径 - 这也不起作用，文件仍然无法加载。

我可能只是因为累了而犯了一个非常愚蠢的错误，但是有人有什么建议吗？干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:02:57.630

尝试在基本路径中删除 '..' 和前导 '/'。

```
var params = {"base": "iTag_FLASH_new/"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:46:08.870

您无需指定“base”标签，您可以将其指定为 embedSWF 的一部分。

根据您的信息：页面位于：(http://blah/whatever.html)，flash 位于：(http://blah/iTag_FLASH_new/iTag.swf)

我会通过直接在浏览器中访问它来确保 swf 正确加载的路径...

如果您的页面位于：(http://blah/somedirectory/whatever.html) 并且闪存位于 (http://blah/somedirectory/iTag_FLASH_new/iTag.swf)

您需要将路径指定为“iTag_FLASH_new/iTag.swf”，注意缺少斜线。

# jsp - JSP/Java 三元运算符在呈现的属性 JSTL 中返回布尔值和正则表达式检查

> ID：14149672
> 
> 赞同：0
> 
> 时间：2013-01-04T00:59:41.743
> 
> 标签：jsp, boolean, jstl, ternary

这是将 Servlet 异常作为无效表达式错误抛出的示例代码。

数据类型因此是：

```
boolean: bean1.isValid1
boolean: bean1.isValid2
boolean: bean1.isValidSubCondn

String: bean2.StringData1 
String: bean2.StringData2 
```

想在 JSTL 标记中使用它：

```
 <x:div id="someID" 
               rendered='#{!bean1.isValid1 || bean1.isValid2 ? (bean1.isValidSubCondn ? bean2.StringData1.matches("^a|^b") : bean2.StringData2.matches("^c|^d") ) : "true"}'> 
```

现在，如果这可行，我想添加一个方法调用，而不是在 JSP 本身内进行 RegEx 检查。这也不起作用 - 可能与相同的语法问题有关。

```
[ServletException in:/beanName.jsp] 
 Invalid expression:
  '${!bean1.booleanProperty1 && bean1.booleanProperty2? (beanInstance.booleanProperty3 ? beanName.methodName1(bean2.stringProperty) : beanName.methodName1(bean3.stringProperty) ) :'true'}'' 
```

我的 JSP 代码是这样的：

```
 <x:div id="something" rendered="#{not bean1.booleanProperty1 or (bean1.booleanProperty2 ? (beanInstance.booleanProperty3 ? beanName.methodName1(bean2.stringProperty) : beanName.methodName1(bean3.stringProperty) )) :true}"> 
```

这也不起作用：

```
 <x:div id="something" rendered="#{!bean1.booleanProperty1 || bean1.booleanProperty2 ? (beanInstance.booleanProperty3 ? beanName.methodName1(bean2.stringProperty) : beanName.methodName1(bean3.stringProperty) ) :true}"> 
```

因此 beanName.methodName1 是：

```
public boolean methodName1(String stringValuex) {
    if(stringValuex.matches("^A|^B"))
        { return true; }

   return false; 
 } 
```

或者，我尝试在 bean 类中使用 getter/setter 方法来获取和设置属性。在 JSP 中也不起作用。不知道如何解决。我需要使用另一个类的 bean 数据执行验证以显示某些结果。

这里是setter/getter的方法，需要弄清楚如何使用这个，然后，在JSP验证中。

```
 <x:div id="something" rendered="#{!bean1.booleanProperty1 and bean1.booleanProperty2 ? (beanInstance.booleanProperty3 ? beanName.booleanFieldName(bean2.stringProperty) : beanName.booleanFieldName(bean3.stringProperty) ) : true}"> 
```

beanName.java 类

```
 private boolean booleanFieldName = false;
   public boolean getbooleanFieldName() {
        return this.booleanFieldName;
    }

    public void setbooleanFieldName(String valueToTest) {
         if(valueToTest.matches("^a|^A"))
            { this.booleanFieldName= true;
            }
        this.booleanFieldName= false; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:01:51.270

您不能在三元中混合类型，并且您正在混合布尔`with`字符串`“true”`。`

 `试试这个，替换`"true"`为`true`：

```
rendered='#{!bean1.isValid1 || bean1.isValid2 ? (bean1.isValidSubCondn ? bean2.StringData1.matches("^a|^b") : bean2.StringData2 .matches("^c|^d") ) : true}'> 
````

# php - 学说触发过多的数据库查询

> ID：14149674
> 
> 赞同：3
> 
> 时间：2013-01-04T00:59:53.480
> 
> 标签：php, doctrine, symfony-1.4

我已经在 Symfony 中解决了几个星期的问题，但一无所获。

事件和播放列表具有一对多的关系。我的 schema.yml 文件的相关部分：

```
Event:
  actAs:
    Timestampable: ~
  columns:
    date:
      type: date(25)
      default: '0000-00-00'
      notnull: true
    name:
      type: string(60)
      notnull: true
    host_title_id:
      type: integer
    broadcast_format:
      type: enum(7)
      values:
        - Radio
        - Live
        - Podcast
        - Video
      default: Podcast
      notnull: true
    long_description:
      type: string()
      notnull: true
    geography_id:
      type: integer
      default: NULL
    has_been_emailed:
      type: boolean
      default: '0'
      notnull: true
    active:
      type: boolean
      default: '0'
      notnull: true

Playlist:
  actAs:
    Timestampable: ~
  columns:
    show_time: string(40)
    recorded:
      type: boolean
      default: '0'
      notnull: true
    title: string(100)
    event_id: integer
    podcast_id: integer
  relations:
    Event:
      local: event_id
      foreign: id
      foreignAlias: Playlists 
```

下面的代码没问题，它会导致对数据库的一次查询：

```
return Doctrine_Query::create()
            ->from('Playlist P')
            ->leftJoin('P.Event E')
            ->limit(1)->execute(); 
```

以下代码不正确，并导致对数据库的六次查询：

```
return Doctrine_Query::create()
            ->from('Event E')
            ->leftJoin('E.Playlists P')
            ->limit(1)->execute(); 
```

更糟糕的是，使用第二条语句，返回的对象在 [Playlists] 部分中没有数据。即它看起来像这样：

```
sfOutputEscaperArrayDecorator Object
(
    [count:sfOutputEscaperArrayDecorator:private] => 1
    [value:protected] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [date] => 1998-08-01
                    [name] => Showname
                    [host_title_id] => 1
                    [broadcast_format] => Radio
                    [long_description] => This is an episode.
                    [geography_id] => 25
                    [has_been_emailed] => 1
                    [active] => 1
                    [created_at] => 0000-00-00 00:00:00
                    [updated_at] => 0000-00-00 00:00:00
                    [Playlists] => Array
                        (
                        )

                )

        )

    [escapingMethod:protected] => esc_specialchars
) 
```

这两个命令有什么区别？我不明白。

更新：如果我在模式和 DQL 中将名为 Playlists 的关系更改为 TestPlaylists，效果会更好。它仍然比我预期的多触发一个查询，但是返回的对象填充了正确的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:06:28.080

您使用的是什么 Symfony 版本？我刚刚在 Symfony 1.4.18 项目中测试了您的模式，当我从 Doctrine 查询中取出限制时，它们都只创建一个对数据库的查询。

如果我在那里保持限制，第二个 Doctrine 查询会创建一个额外的数据库查询（即在事件上选择不同的）。

# c++ - 解析波前 obj 文件格式

> ID：14149675
> 
> 赞同：3
> 
> 时间：2013-01-04T00:59:54.190
> 
> 标签：c++, algorithm, opengl, graphics, wavefront

我想将 obj 模型导入我的 opengl 程序。我有一个类/数据格式，用于将属性数据传递到着色器：

```
class CustomVertex : public IVtxFmt
{
public:
  float m_Position[3];      // x, y, z      offset 0, size = 3*sizeof(float)    
  float m_Normal[3];        // nx, ny, nz;  offset 3
  float m_TexCoords[2];     // u, v         offset 6
  float m_Colour[4];        // r, g, b, a   offset 8
  float m_Tangent[3];       // r, g, b      offset 12
  float m_Bitangent[3];     // r, g, b      offset 15
}; 
```

因此，我正在使用从 Internet 下载的小木屋模型。

小木屋有几个顶点、法线和纹理坐标定义，后面是面定义列表。

所以我的第一个直觉是解析 obj 文件并最终得到

```
vector<vertex>
vector<Normal>
vector<TexCoord> 
```

将其转换为我的 CustomVertex 格式并不简单，因为文件中可能定义了 210 个顶点、100 个 tex 坐标和 80 个法线。

在以这种格式列出约 390 个面孔之后：

```
f 83/42/1 67/46/1 210/42/1 
```

我在文件中遇到以下内容：

```
#
# object tile00
# 
```

其次是更多的顶点定义。

因此，据此，我推断一个模型可能由几个子对象组成，每个子对象由多个面定义；每个面由 3 x vertex / normal / texcoord 索引值定义。

因此，为了获得 CustomVertex 的向量，我认为我需要执行以下操作：

创建和填充：

```
vector <vertex>
vector <normal>
vector <texcoord>

vector <indices> 
```

我需要为面部定义中的每个唯一的 v/vn/vt 三元组创建一个 CustomVertex。

所以我想到了创建一个地图：

```
std::vector<CustomVertex> and
std::map< nHashId, CustomVertex_index > 
```

所以我的想法是，对于我遇到的每个 v/vn/vt，我创建这个字符串的散列，例如 nHashId = hash("80/50/1")* 并在地图中搜索散列。如果不存在，我创建一个 CustomVertex 并将其添加到向量中，然后将新创建的哈希和 CustomVertex_index 添加到地图中。

*：*通过创建 v/vn/vt 字符串的哈希，我正在创建一个与该字符串对应的唯一数值，我希望在地图中搜索/比较它比等效文本更快。*

如果我遇到哈希匹配，我认为 customvertex 已经存在，而不是创建新的 CustomVertex，我只是将 CustomVertex_index 条目添加到索引向量并继续前进。

由于这似乎是一项计算成本很高的练习，我想我会将我的 CustomVertex 数组（和相应的索引数组）转储到磁盘以供以后检索，而不是每次都解析 obj 文件。

在我提出问题之前，我是否可以指出，由于时间限制并且不想重新设计我的 Vbo 类（一项不平凡的任务），我坚持使用 CustomVertex 格式 - 我知道它可以提供属性将数组与我的着色器分开，但我已经读过像使用 CustomVertex 一样交错数据可以提高性能。

所以我的问题是： 1\. 我的方法看起来是合理的还是疯狂的？如果疯了，请指出我哪里出错了。

1.  你能发现任何潜在的问题吗？

2.  有没有人这样做过并且可以推荐一种更简单的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T18:00:15.047

这个想法不是创建“v/vn/vt”的字符串散列，而是仅将 v 散列为整数。之后，您将获得一个包含共享相同 v 索引的所有“v/vn/vt”组合的存储桶。

如果发生哈希冲突（遇到相同的 v），您会将冲突的组合与桶中的组合进行比较，以查看它是否真的重复。如果没有，请记住将碰撞的组合添加到存储桶中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:02:32.257

> 你能发现任何潜在的问题吗？

你的意思是除了哈希冲突？因为我没有看到处理该问题的算法部分。

> 有没有人这样做过并且可以推荐一种更简单的方法来实现我想要的？

有一个更简单的方法：只比较索引而不使用哈希。

# android - Android 解析 KML 时出错

> ID：14149679
> 
> 赞同：0
> 
> 时间：2013-01-04T01:00:23.177
> 
> 标签：android, parsing, kml

我正在尝试在到位置之间绘制一条路径，但在解析 KML 时出现错误。执行在这里停止：

> InputSource inputSource = new InputSource(url.openStream());

不执行以下行，

> reader.parse(inputSource);

```
private void drawPath(GeoPoint src, GeoPoint dest, MapView mapView) {

    String strUrl = "http://maps.google.com/maps?";
    //From
    strUrl += "saddr=" +
           (src.getLatitudeE6()/1.0E6) + 
           "," +
           (src.getLongitudeE6()/1.0E6);
    //To
    strUrl += "&daddr=" +
           (dest.getLatitudeE6()/1.0E6) + 
           "," + 
           (dest.getLongitudeE6()/1.0E6);
    //Walk attribute (for walk path)
    strUrl += "&dirflg=w";
    //File format
    strUrl += "&output=kml";

    try {
        //Parse KML
        URL url = new URL(strUrl.toString());
        SAXParserFactory saxFactory = SAXParserFactory.newInstance();
        SAXParser parser = saxFactory.newSAXParser();
        XMLReader reader = parser.getXMLReader();
        KMLHandler kmlHandler = new KMLHandler();
        reader.setContentHandler(kmlHandler);
        InputSource inputSource = new InputSource(url.openStream());
        reader.parse(inputSource);

        String path = kmlHandler.getPathCoordinates();
        //Draw path
        if(path != null) {
            RouteOverlay routeOverlay = new RouteOverlay();
            String pairs[] = path.split(" ");
            for (String pair : pairs) {
                String coordinates[] = pair.split(",");
                GeoPoint geoPoint = new GeoPoint(
                        (int) (Double.parseDouble(coordinates[1]) * 1E6),
                        (int) (Double.parseDouble(coordinates[0]) * 1E6));
                routeOverlay.addGeoPoint(geoPoint);
            }

            mapView.getOverlays().add(routeOverlay);
        }
    } catch (Exception e) {
        Log.w("RoutePath", e.toString());
    }
} 
```

# clojure - 构建一个惰性的、不纯的 id 生成器

> ID：14149688
> 
> 赞同：10
> 
> 时间：2013-01-04T01:01:27.943
> 
> 标签：clojure

我想知道如何在 Clojure 中创建一个无限的、不纯的唯一值序列。

```
(def generator ...) ; def, not defn
(take 4 generator) ; => (1 2 3 4)
(take 4 generator) ; => (5 6 7 8). note the generator's impurity. 
```

我认为这样的设计可能比例如将单个整数值包装到引用类型中并从其消费者增加它更方便，例如：

*   所提出的方法将实现细节减少到一个单一的变化点：生成器。否则所有的消费者都必须关心引用类型（`atom`）和提供下一个值的具体函数（`inc`）
*   序列可以利用许多 clojure.core 函数。“手动”从一个原子中构建一个 id 列表会有点笨重：`(take 4 (repeatedly #(swap! _ inc)))`

我想不出一个可行的实现。**有可能吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T03:04:00.213

您可以将惰性序列包装在不纯类（如 java.util.concurrent.atomic.AtomicLong）周围以创建 id 序列：

```
(def id-counter (java.util.concurrent.atomic.AtomicLong.))

(defn id-gen []
  (cons
   (.getAndIncrement id-counter)
   (lazy-seq
     (id-gen)))) 
```

这有效，但前提是您不保存序列的头部。如果您创建一个捕获头部的 var：

```
(def id-seq (id-gen)) 
```

然后重复调用它，它会从序列的开头返回 id，因为你已经抓住了序列的头部：

```
(take 3 id-seq)
;; => (0 1 2)
(take 3 id-seq)
;; => (0 1 2)
(take 3 id-seq)
;; => (0 1 2) 
```

但是，如果您重新创建序列，由于杂质，您将获得新的值：

```
(take 3 (id-gen))
;; (3 4 5)
(take 3 (id-gen))
;; (6 7 8)
(take 3 (id-gen))
;; (9 10 11) 
```

我只建议出于教育目的（不是生产代码）执行以下操作，但您可以创建自己的 ISeq 实例，它更直接地实现杂质：

```
(def custom-seq
     (reify clojure.lang.ISeq
            (first [this] (.getAndIncrement id-counter))
            (next  [this] (.getAndIncrement id-counter))
            (cons  [this thing]
                   (cons thing this))
            (more [this] (cons
                          (.getAndIncrement id-counter)
                          this))
            (count [this] (throw (RuntimeException. "count: not supported")))
            (empty [this] (throw (RuntimeException. "empty: not supported")))
            (equiv [this obj] (throw (RuntimeException. "equiv: not supported")))
            (seq   [this] this)))

(take 3 custom-seq)
;; (12 13 14)
(take 3 custom-seq)
;; (15 16 17) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T02:51:49.030

在回答您的问题时，我发现了一些有趣的东西。我首先想到的是，对于您需要这些 ID 的任何最终目标，该[`gensym`](http://clojuredocs.org/clojure_core/clojure.core/gensym)功能可能会有所帮助。

然后，我想“嗯，嘿，这似乎增加了一些不纯的计数器来生成新的 ID”和“嗯，嘿，源代码中有什么？” 这导致我这样做：

```
(. clojure.lang.RT (nextID)) 
```

这似乎可以满足您的需求。凉爽的！如果您想按照建议的方式使用它，那么我可能会将其设为函数：

```
(defn generate-id []
  (. clojure.lang.RT (nextID))) 
```

然后你可以这样做：

```
user> (repeatedly 5 generate-id)
=> (372 373 374 375 376) 
```

我还没有测试这是否会“全局”产生始终唯一的值——我不确定术语，但我说的是你什么时候可能`generate-id`在不同的线程中使用这个函数，但仍然想确定它正在产生独特的价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T02:35:28.277

这是另一种解决方案，也许：

```
user=> (defn positive-numbers
          ([] (positive-numbers 1))
          ([n] (cons n (lazy-seq (positive-numbers (inc n))))))
#'user/positive-numbers
user=> (take 4 (positive-numbers))
(1 2 3 4)
user=> (take 4 (positive-numbers 5))
(5 6 7 8) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-21T04:03:42.587

一种更惯用、线程安全且不会对头部引用产生奇怪影响的方法是对内置于可变引用中的 clojures 之一使用闭包。这是我遇到相同问题后处理的一个快速示例。它只是关闭了一个参考。

```
(def id-generator (let [counter (ref 0)]
                (fn [] (dosync (let [cur-val @counter] 
                         (do (alter counter + 1)
                           cur-val)))))) 
```

每次调用 (id-generator) 时，您都会得到序列中的下一个数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-12T04:40:37.877

这是另一种快速方法：

```
user> (defn make-generator [& [ii  init]]
  (let [a (atom (or ii 0 ))
        f #(swap! a inc)]
    #(repeatedly f)))
#'user/make-generator
user> (def g (make-generator))
#'user/g
user> (take 3 (g))
(1 2 3)
user> (take 3 (g))
(4 5 6)
user> (take 3 (g))
(7 8 9) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-09T10:56:12.410

这是 hack，但它有效，而且非常简单

```
; there be dragons !
(defn id-gen [n] (repeatedly n (fn [] (hash #()))))
(id-gen 3) ; (2133991908 877609209 1060288067 442239263 274390974) 
```

基本上 clojure 创建了一个“匿名”函数，但由于 clojure 本身需要一个名称，它使用唯一的不纯 ID 来避免冲突。如果你散列一个唯一的名字，那么你应该得到一个唯一的数字。

希望能帮助到你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-13T16:41:34.373

从任意种子标识符集合创建标识符：

```
(defonce ^:private counter (volatile! 0))

(defn- next-int []
  (vswap! counter inc))

(defn- char-range
  [a b]
  (mapv char
        (range (int a) (int b))))

(defn- unique-id-gen
  "Generates a sequence of unique identifiers seeded with ids sequence"
  [ids]
  ;; Laziness ftw:
  (apply concat
         (iterate (fn [xs]
                    (for [x xs
                          y ids]
                      (str x y)))
                  (map str ids))))

(def inf-ids-seq (unique-id-gen (concat (char-range \a \z)
                                        (char-range \A \Z)
                                        (char-range \0 \9)
                                        [\_ \-])))

(defn- new-class
  "Returns an unused new classname"
  []
  (nth inf-ids-seq (next-int)))

(repeatedly 10 new-class) 
```

示范：

```
(take 16 (unique-id-gen [\a 8 \c]))
;; => ("a" "8" "c" "aa" "a8" "ac" "8a" "88" "8c" "ca" "c8" "cc" "aaa" "aa8" "aac" "a8a") 
```

# mysql - 如何使用大型 IN 子句优化此 SQL 查询？

> ID：14149689
> 
> 赞同：1
> 
> 时间：2013-01-04T01:01:28.840
> 
> 标签：mysql, sql

我有一个相当复杂的操作，我试图只使用一个 SQL 查询来执行，但我不确定这是否比将其分解为 n 个查询更优化。基本上，我有一个名为“Users”的表，其中包含用户 ID 及其相关联的 fb_ids（id 是 pk，fb_id 可以为空）。

```
+-----------------+
| id | .. | fb_id |
|====|====|=======|
| 0  | .. | 12345 |
| 1  | .. | 31415 |
| .. | .. |  ..   |
+-----------------+ 
```

我还有另一个名为“Friends”的表，它代表两个用户之间的朋友关系。这使用他们的 id（不是他们的 fb_id），应该是双向关系。

```
+----------------+
| id | friend_id |
|====|===========|
| 0  |     1     |
| 1  |     0     |
| .. |    ..     |
+----------------+
// user 0 and user 1 are friends 
```

**所以问题来了：** 我们得到了一个特定用户的 id（“my_id”）和一个该用户的 Facebook 好友数组（一个 fb_id 数组，称为 fb_array）。我们希望更新 Friends 表，以便它尊重 Facebook 友谊作为我们用户之间的有效友谊。需要注意的是，并非他们所有的 Facebook 朋友都会在我们的数据库中拥有帐户，因此应该忽略这些朋友。每次用户登录时都会调用此查询，以便在他们在 Facebook 上添加任何新朋友时更新我们的数据。这是我写的查询：

```
INSERT INTO Friends (id, friend_id)
SELECT "my_id", id FROM Users WHERE id IN
  (SELECT id FROM Users WHERE fb_id IN fb_array)
AND id NOT IN
  (SELECT friend_id FROM Friends WHERE id = "my_id") 
```

第一个 IN 子句的重点是获取所有用户的子集，这些用户也是你的 Facebook 朋友，这是我担心的主要部分。因为 fb_ids 是作为一个数组给出的，所以我必须将所有 id 解析为一个用逗号分隔的巨大字符串，该字符串构成“fb_array”。我担心为那个 IN 子句设置这么大的字符串的效率（用户可能在 Facebook 上有成百上千的朋友）。你能想出更好的方法来编写这样的查询吗？

还值得注意的是，此查询不保持朋友关系的双重性质，但这不是我担心的（为此扩展它是微不足道的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:07:20.153

如果我没记错的话，如果您`UNIQUE`对组合有限制，您的查询可以简化`(id, friend_id)`为：

```
INSERT IGNORE INTO Friends 
  (id, friend_id)
SELECT "my_id", id 
FROM Users 
WHERE fb_id IN fb_array ; 
```

您应该有索引`User (fb_id, id)`并测试效率。如果数组中的项目数太大（超过几千个），您可能必须拆分数组并多次运行查询。包含您的数据和设置的配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:12:57.397

取决于以下列是否可以为空（值可以是`NULL`）：

*   用户.id
*   FRIENDS.friend_id

## 可空：

```
SELECT DISTINCT
       "my_id", u.id 
  FROM Users u
 WHERE u.fb_id IN fb_array
   AND u.id NOT IN (SELECT f.friend_id 
                      FROM FRIENDS f
                     WHERE f.id = "my_id") 
```

## 不可为空：

```
 SELECT "my_id", u.id 
     FROM Users u
LEFT JOIN FRIENDS f ON f.friend_id = u.id
                   AND f.id = "my_id"
    WHERE u.fb_id IN fb_array
      AND f.fried_id IS NULL 
```

欲了解更多信息：

*   [http://explainextended.com/2010/05/27/left-join-is-null-vs-not-in-vs-not-exists-nullable-columns/](http://explainextended.com/2010/05/27/left-join-is-null-vs-not-in-vs-not-exists-nullable-columns/)
*   [http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)

## 谈到数组中的值的数量

上面提到的两篇文章中运行的测试包含 100 万行，具有 10,000 个不同的值。

# ios - 在调试器中导航对象层次结构

> ID：14149698
> 
> 赞同：2
> 
> 时间：2013-01-04T01:02:15.650
> 
> 标签：ios, debugging, uiview, lldb

假设我有一些代码，包括以下内容：

```
UIView *myView = [[UIView alloc] initWithFrame:myFrame];
[self.view addSubView:myView]; 
```

我在调试器中单步执行代码，直到到达该代码之后的下一行。调试器窗口的左侧是我可以检查的对象列表，其中列出了 myView。但是，我看不到框架的详细信息或 myView.center 坐标的位置。我不能通过我刚才描述的对象层次结构检查这些属性吗？如果没有，我如何在不使用 NSLog 的情况下查询这些值是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:08:48.917

尝试调试器命令`po`

示例输出：

```
(lldb) po theView
(UIView *) $1 = 0x09b83750 <UIView: 0x9b83750; frame = (0 0; 768 1024); layer = <CALayer: 0x9b837b0>> 
```

# java - Java GUI - JTextArea 扩展但不收缩

> ID：14149702
> 
> 赞同：2
> 
> 时间：2013-01-04T01:02:56.187
> 
> 标签：java, swing, jpanel, jscrollpane

**主要问题：**在包含 JTextArea 的带有 JPanel 的 JScrollPane 中，如果 GUI 展开，则文本会自动换行，但当 GUI 收缩时，文本不会返回。请参阅下面的示例

好的，我正在为我目前正在开发的应用程序构建 GUI，但我遇到了一些问题。

**解释：** 我的 GUI 结构如下图所示：
![在此处输入图像描述](../Images/8c11c649e7104acf94e41229f16aadd8.png)

这就是它的样子。

![在此处输入图像描述](../Images/cc83bb4cbe62b1a947ceb5ea60306fe0.png)

展开后，panelWithText 内的 JTextArea 会展开并调整文本的大小，如下所示：
![在此处输入图像描述](../Images/3d16241d9f5bdbf78f22502e81e2fc87.png)

但问题是当你缩小 GUI 时会发生什么。“问题”是我希望文本像以前一样弯曲回来。我通过`ComponentListener`对 the`JScrollPane`和 the实现 a 做了一些实验`panelWithText`，发现它在扩展时`componentResized`需要`panelWithText`，但在收缩时不需要。有没有办法在`panelWithText`组件中实现文本回退的行为？
![在此处输入图像描述](../Images/9807f188bcb160a525a73a3ab0e56471.png)

**PS：**显然，如果我`JScrollPane`用常规切换`JPanel`它就可以了。但我不能那样做！我有很多东西`panelWithText`要展示给用户。

**PS PS：**对不起，这是我正在使用的代码。
**JFrameExt.java**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JScrollPane;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.Insets;
import java.awt.FlowLayout;
import java.awt.Window.Type;
import javax.swing.ScrollPaneConstants;
import java.awt.CardLayout;
import com.jgoodies.forms.layout.FormLayout;
import com.jgoodies.forms.layout.ColumnSpec;
import com.jgoodies.forms.layout.RowSpec;
import com.jgoodies.forms.factories.FormFactory;

public class JFrameExt extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    JFrameExt frame = new JFrameExt();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public JFrameExt() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 246, 164);
        contentPane = new JPanel();
        contentPane.setBorder(null);
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setViewportBorder(null);
        scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        contentPane.add(scrollPane, BorderLayout.CENTER);

        JPanel panel = new JPanel();
        scrollPane.setViewportView(panel);
        GridBagLayout gbl_panel = new GridBagLayout();
        gbl_panel.columnWidths = new int[]{0, 0};
        gbl_panel.rowHeights = new int[]{0, 0, 0, 0, 0, 0, 0, 0};
        gbl_panel.columnWeights = new double[]{1.0, Double.MIN_VALUE};
        gbl_panel.rowWeights = new double[]{0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, Double.MIN_VALUE};
        panel.setLayout(gbl_panel);

        panelWithText panelWithText_ = new panelWithText();
        GridBagConstraints gbc_panelWithText_ = new GridBagConstraints();
        gbc_panelWithText_.anchor = GridBagConstraints.NORTH;
        gbc_panelWithText_.insets = new Insets(0, 0, 5, 0);
        gbc_panelWithText_.fill = GridBagConstraints.HORIZONTAL;
        gbc_panelWithText_.gridx = 0;
        gbc_panelWithText_.gridy = 0;
        panel.add(panelWithText_, gbc_panelWithText_);

        panelWithText panelWithText__1 = new panelWithText();
        GridBagConstraints gbc_panelWithText__1 = new GridBagConstraints();
        gbc_panelWithText__1.insets = new Insets(0, 0, 5, 0);
        gbc_panelWithText__1.anchor = GridBagConstraints.NORTH;
        gbc_panelWithText__1.fill = GridBagConstraints.HORIZONTAL;
        gbc_panelWithText__1.gridx = 0;
        gbc_panelWithText__1.gridy = 1;
        panel.add(panelWithText__1, gbc_panelWithText__1);

        panelWithText panelWithText__2 = new panelWithText();
        GridBagConstraints gbc_panelWithText__2 = new GridBagConstraints();
        gbc_panelWithText__2.insets = new Insets(0, 0, 5, 0);
        gbc_panelWithText__2.fill = GridBagConstraints.BOTH;
        gbc_panelWithText__2.gridx = 0;
        gbc_panelWithText__2.gridy = 2;
        panel.add(panelWithText__2, gbc_panelWithText__2);

        panelWithText panelWithText__3 = new panelWithText();
        GridBagConstraints gbc_panelWithText__3 = new GridBagConstraints();
        gbc_panelWithText__3.insets = new Insets(0, 0, 5, 0);
        gbc_panelWithText__3.fill = GridBagConstraints.BOTH;
        gbc_panelWithText__3.gridx = 0;
        gbc_panelWithText__3.gridy = 3;
        panel.add(panelWithText__3, gbc_panelWithText__3);

        panelWithText panelWithText__4 = new panelWithText();
        GridBagConstraints gbc_panelWithText__4 = new GridBagConstraints();
        gbc_panelWithText__4.insets = new Insets(0, 0, 5, 0);
        gbc_panelWithText__4.fill = GridBagConstraints.BOTH;
        gbc_panelWithText__4.gridx = 0;
        gbc_panelWithText__4.gridy = 4;
        panel.add(panelWithText__4, gbc_panelWithText__4);

        panelWithText panelWithText__5 = new panelWithText();
        GridBagConstraints gbc_panelWithText__5 = new GridBagConstraints();
        gbc_panelWithText__5.insets = new Insets(0, 0, 5, 0);
        gbc_panelWithText__5.fill = GridBagConstraints.BOTH;
        gbc_panelWithText__5.gridx = 0;
        gbc_panelWithText__5.gridy = 5;
        panel.add(panelWithText__5, gbc_panelWithText__5);

        panelWithText panelWithText__6 = new panelWithText();
        GridBagConstraints gbc_panelWithText__6 = new GridBagConstraints();
        gbc_panelWithText__6.fill = GridBagConstraints.BOTH;
        gbc_panelWithText__6.gridx = 0;
        gbc_panelWithText__6.gridy = 6;
        panel.add(panelWithText__6, gbc_panelWithText__6);
        setSize(300,100);
    }

} 
```

**panelWithText.java**

```
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Color;
import javax.swing.JTextArea;
import javax.swing.ImageIcon;
import java.awt.BorderLayout;

public class panelWithText extends JPanel {

    /**
     * Create the panel.
     */
    public void me_resized(Dimension d){
        System.out.println("CALLED..");
        super.setPreferredSize(d);
    }
    public panelWithText() {
        setBackground(Color.DARK_GRAY);
        setForeground(Color.WHITE);
        setLayout(new BorderLayout(0, 0));

        JTextArea txtrIveBeenReading = new JTextArea();
        txtrIveBeenReading.setEditable(false);
        txtrIveBeenReading.setColumns(28);
        txtrIveBeenReading.setFont(new Font("Tahoma", Font.PLAIN, 10));
        txtrIveBeenReading.setLineWrap(true);
        txtrIveBeenReading.setWrapStyleWord(true);
        txtrIveBeenReading.setText("\n A bunch of really important text here... A bunch of really important text here... A bunch of really important text here... A bunch of really important text here...\n");
        txtrIveBeenReading.setForeground(Color.WHITE);
        txtrIveBeenReading.setBackground(Color.DARK_GRAY);
        add(txtrIveBeenReading, BorderLayout.CENTER);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T03:18:59.937

玩了一会儿，我想出了这个......

![在此处输入图像描述](../Images/db8e5db32232426d217e5e435dcdcdaf.png)![在此处输入图像描述](../Images/0c279d63cfe72f9d06255aeb49f2f3c7.png)![在此处输入图像描述](../Images/4bb0f864360b0422ef37595bc0430730.png)

```
public class Test {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    JFrameExt frame = new JFrameExt();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public static class ScrollablePane extends JPanel implements Scrollable {

        @Override
        public Dimension getPreferredScrollableViewportSize() {
            return new Dimension(100, 100);
        }

        @Override
        public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
            return 64;
        }

        @Override
        public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
            return 128;
        }

        @Override
        public boolean getScrollableTracksViewportWidth() {
            return true;
        }

        @Override
        public boolean getScrollableTracksViewportHeight() {
            return false;
        }

    }

    public static class JFrameExt extends JFrame {

        private JPanel contentPane;

        /**
         * Create the frame.
         */
        public JFrameExt() {
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setBounds(100, 100, 246, 164);
            contentPane = new JPanel();
            contentPane.setBorder(null);
            contentPane.setLayout(new BorderLayout(0, 0));
            setContentPane(contentPane);

            JScrollPane scrollPane = new JScrollPane();
            scrollPane.setViewportBorder(null);
            scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
            contentPane.add(scrollPane, BorderLayout.CENTER);

            JPanel panel = new ScrollablePane();
            scrollPane.setViewportView(panel);
            GridBagLayout gbl_panel = new GridBagLayout();
//            gbl_panel.columnWidths = new int[]{0, 0};
//            gbl_panel.rowHeights = new int[]{0, 0, 0, 0, 0, 0, 0, 0};
//            gbl_panel.columnWeights = new double[]{1.0, Double.MIN_VALUE};
//            gbl_panel.rowWeights = new double[]{0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, Double.MIN_VALUE};
            panel.setLayout(gbl_panel);

            panelWithText panelWithText_ = new panelWithText();
            GridBagConstraints gbc_panelWithText_ = new GridBagConstraints();
            gbc_panelWithText_.anchor = GridBagConstraints.NORTH;
            gbc_panelWithText_.insets = new Insets(0, 0, 5, 0);
            gbc_panelWithText_.fill = GridBagConstraints.HORIZONTAL;
            gbc_panelWithText_.gridx = 0;
            gbc_panelWithText_.gridy = 0;
            gbc_panelWithText_.weightx = 1;
            panel.add(panelWithText_, gbc_panelWithText_);

//            panelWithText panelWithText__1 = new panelWithText();
//            GridBagConstraints gbc_panelWithText__1 = new GridBagConstraints();
//            gbc_panelWithText__1.insets = new Insets(0, 0, 5, 0);
//            gbc_panelWithText__1.anchor = GridBagConstraints.NORTH;
////            gbc_panelWithText__1.fill = GridBagConstraints.HORIZONTAL;
//            gbc_panelWithText__1.gridx = 0;
//            gbc_panelWithText__1.gridy = 1;
//            panel.add(panelWithText__1, gbc_panelWithText__1);
//
//            panelWithText panelWithText__2 = new panelWithText();
//            GridBagConstraints gbc_panelWithText__2 = new GridBagConstraints();
//            gbc_panelWithText__2.insets = new Insets(0, 0, 5, 0);
////            gbc_panelWithText__2.fill = GridBagConstraints.BOTH;
//            gbc_panelWithText__2.gridx = 0;
//            gbc_panelWithText__2.gridy = 2;
//            panel.add(panelWithText__2, gbc_panelWithText__2);
//
//            panelWithText panelWithText__3 = new panelWithText();
//            GridBagConstraints gbc_panelWithText__3 = new GridBagConstraints();
//            gbc_panelWithText__3.insets = new Insets(0, 0, 5, 0);
////            gbc_panelWithText__3.fill = GridBagConstraints.BOTH;
//            gbc_panelWithText__3.gridx = 0;
//            gbc_panelWithText__3.gridy = 3;
//            panel.add(panelWithText__3, gbc_panelWithText__3);
//
//            panelWithText panelWithText__4 = new panelWithText();
//            GridBagConstraints gbc_panelWithText__4 = new GridBagConstraints();
//            gbc_panelWithText__4.insets = new Insets(0, 0, 5, 0);
////            gbc_panelWithText__4.fill = GridBagConstraints.BOTH;
//            gbc_panelWithText__4.gridx = 0;
//            gbc_panelWithText__4.gridy = 4;
//            panel.add(panelWithText__4, gbc_panelWithText__4);
//
//            panelWithText panelWithText__5 = new panelWithText();
//            GridBagConstraints gbc_panelWithText__5 = new GridBagConstraints();
//            gbc_panelWithText__5.insets = new Insets(0, 0, 5, 0);
////            gbc_panelWithText__5.fill = GridBagConstraints.BOTH;
//            gbc_panelWithText__5.gridx = 0;
//            gbc_panelWithText__5.gridy = 5;
//            panel.add(panelWithText__5, gbc_panelWithText__5);
//
//            panelWithText panelWithText__6 = new panelWithText();
//            GridBagConstraints gbc_panelWithText__6 = new GridBagConstraints();
////            gbc_panelWithText__6.fill = GridBagConstraints.BOTH;
//            gbc_panelWithText__6.gridx = 0;
//            gbc_panelWithText__6.gridy = 6;
//            panel.add(panelWithText__6, gbc_panelWithText__6);
            setSize(300, 100);
        }
    }

    public static class panelWithText extends JPanel {

        /**
         * Create the panel.
         */
        public void me_resized(Dimension d) {
            System.out.println("CALLED..");
            super.setPreferredSize(d);
        }

        public panelWithText() {
            setBackground(Color.DARK_GRAY);
            setForeground(Color.WHITE);
            setLayout(new BorderLayout(0, 0));

            JTextArea txtrIveBeenReading = new JTextArea();
            txtrIveBeenReading.setEditable(false);
            txtrIveBeenReading.setColumns(28);
            txtrIveBeenReading.setFont(new Font("Tahoma", Font.PLAIN, 10));
            txtrIveBeenReading.setLineWrap(true);
            txtrIveBeenReading.setWrapStyleWord(true);
            txtrIveBeenReading.setText("\n A bunch of really important text here... A bunch of really important text here... A bunch of really important text here... A bunch of really important text here...\n");
            txtrIveBeenReading.setForeground(Color.WHITE);
            txtrIveBeenReading.setBackground(Color.DARK_GRAY);
            add(txtrIveBeenReading, BorderLayout.CENTER);

        }
    }
} 
```

基本上，您需要一个实现`Scrollable`接口的容器。这将允许您指定容器应跟踪/匹配视口宽度。当视口改变大小时，这将导致容器被布局......

作为旁注，您可以使用 的单个副本`GridBagConstraints`，当您将每个新组件添加到容器中时，`GridBagLayout`将生成它自己的副本。当您想要在组件之间共享属性时，这非常强大`GridBagConstraints`；）

# css - 需要更改下拉css菜单才能下拉

> ID：14149707
> 
> 赞同：1
> 
> 时间：2013-01-04T01:03:28.337
> 
> 标签：css, drop-down-menu, menu

我需要将这个纯 CSS 下拉菜单修改为下拉菜单。看到一个类似的帖子，但似乎无法修改我的。这是用于下拉菜单的 css 代码，它按预期工作。我尝试使用`bottom: 100%`within `ul.drop li.hover, ul.drop li:hover {`，但没有奏效。有什么建议么。

**HTML**

```
<body>

<ul id="nav" class="drop">
  <li><a href="#">Home</a></li>
  <li>Portfolio
    <ul>
      <li><a href="#">Horses</a>
        <ul>
          <li><a href="#">Horses 1</a>
          <li><a href="#">Horses 2</a>
          <li><a href="#">Horses 3</a>
        </ul>
      </li>
      <li><a href="#">Dogs</a></li>
      <li><a href="#">People</a></li>
      <li><a href="#">Stills</a></li>
    </ul>
  </li>
  <li><a href="#">Order</a></li>
  <li><a href="#">Contact Me</a>
     </li>
    </ul>
  </li>
</ul> 
```

**CSS**

```
ul {
font-family: Arial, Verdana;
font-size: 14px;
margin: 0;
padding: 0;
list-style: none;
}

ul li {
display: block;
position: relative;
float: left;
width: 130px;
text-align: center;
}
li ul {
display: none;
}

ul li a {
    display: block;
    text-decoration: none;
    color: #ffffff;
    border-top: 0px solid #ffffff;
    padding: 0px 0px 0px 0px;
    background: transparent;
#    margin-left: 1px;
    white-space: nowrap;
}
ul li a:hover {
background: transparent;
}
li:hover ul {
    display: block;
    position: absolute;
}
li:hover li {
    float: none;
    font-size: 11px;
    width: 160px;
    text-align: left;
}
li:hover a { background: transparent; }
li:hover li a:hover {
    background: #3ba110;
}

ul.drop a {
display:block; color: #fff; font-family: Verdana; font-size: 14px; text-decoration:    none;
}

ul.drop, ul.drop li, ul.drop ul {
list-style: none; margin: 0; padding: 0; border: 1px solid #fff; background: #1302CB; color: #fff;
}
ul.drop {
position: relative; z-index: 597; float: left;
}
ul.drop li {
float: left; line-height: 1.3em; vertical-align: middle; zoom: 1; padding: 5px 10px;
}
ul.drop li.hover, ul.drop li:hover {
position: relative; z-index: 599; cursor: default; background: #3ba110;
}

ul.drop ul {
visibility: hidden; position: absolute; bottom: 100%; left: 0; z-index: 598; width: 160px; background: #cccccc; border: 1px solid #fff;
}

ul.drop ul li {
float: none;
}
ul.drop ul ul {
top: -2px; left: 100%;
}

ul.drop li:hover > ul {
visibility: visible
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:27:44.383

I didn''t use your CSS because I am not sure what is going on without HTML. Anyways I created a basic demo of what I think you are trying to accomplish.

[http://jsfiddle.net/krishollenbeck/JgWEL/45/](http://jsfiddle.net/krishollenbeck/JgWEL/45/)

**HTML**

```
<div class="page">
<ul>
    <li class="navlink">
        <a href="">MENU ITEM:</a>
        <ul class="dropmenu">
            <li><a href="">Link One</a></li>
            <li><a href="">Link Two</a></li>
            <li><a href="">Link Three</a></li>
        </ul>   
    </li>    
</ul>  
</div> 
```

**CSS**

```
.page {
    width:200px;
    height:100px;
    position:fixed;
    top:50%;
    bottom:50%;
}    
.dropmenu {
    display:none;
    border:1px solid #CCC;
    background-color:#eee;
    width:150px;
    padding:5px;
    position:absolute;
    top:-70px;
}
.navlink {
    background-color:#000;
    padding:5px;
}
.navlink > a {color:#FFF;}
.navlink:hover > .dropmenu {display:block;}
​ 
```

# ios - 具有优化可见区域的 UIScrollView

> ID：14149708
> 
> 赞同：1
> 
> 时间：2013-01-04T01:03:33.797
> 
> 标签：ios, uiscrollview

我正在为社交媒体流实现 UIScrollView。流中的项目是不同大小和复杂性的定制 UIVIew（子视图、图像等）。

我使用 MGBox2 控件进行 UI 和 RestKit 进行 API 通信。

复杂性在于我从服务器调用分页结果并将它们显示在无限可滚动的流中，例如 Google plus、pinterest、facebook 应用程序。UIScrollView 将要求当它滚动时，项目会从视图中掉落或即时渲染到其中。我还可以拉刷新最新的activity，所以滚动视图的内容需要在滚动视图当前位置的上下更新

有没有人有一个很好的示例代码或链接，可以为这种实现优化 ScrollView 的智能方法？

谢谢，哈米什。

# function - Magento 调用默认商店视图的核心功能是什么

> ID：14149709
> 
> 赞同：0
> 
> 时间：2013-01-04T01:05:11.133
> 
> 标签：function, magento, model

有人能告诉我 Magento 需要在前端设置默认商店视图的核心功能是什么吗？

我在 Mage/Core/Model 中搜索了几个小时，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:58:27.903

为方便起见提供了方法链接。

1.  [`Mage::run('','store')`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/index.php#L87)
2.  [`Mage_Core_Model_App::run(array(array('scope_code'=>'','scope_type'=>'store')))`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/Mage.php#L679)
3.  [`Mage_Core_Model_App::_initCurrentStore('','store')`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/App.php#L349)
4.  [`Mage_Core_Model_App::_initStores('','store')`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/App.php#L466)

内部`_initStores()`是一个[循环，它遍历`core_store`集合](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/App.php#L643)。该循环包含一个测试以查看 App 实例的`_store`属性是否已设置，如果未设置，则将其设置为当前集合成员（*如果该成员具有评估为 true 的主键）*。换句话说，尽管 admin store 是集合中的第一项，但因为它的 ID 为 0，所以它*不会*被使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:54:15.110

这将在 index.php 中

```
/* Store or website code */
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';

/* Run store or run website */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

Mage::run($mageRunCode, $mageRunType); 
```

[从这篇很酷的博客文章http://blog.belvg.com/magento-certified-developer-exam-module-initialization.html](http://blog.belvg.com/magento-certified-developer-exam-module-initialization.html)中获取有关它是如何完成的更多详细信息，其中涵盖了您需要了解的所有内容。

# c++ - 扩展 Web 服务器以使用 C++ 编写脚本？

> ID：14149710
> 
> 赞同：4
> 
> 时间：2013-01-04T01:05:10.980
> 
> 标签：c++, scripting, webserver

好吧，我想知道是否有任何 Web 服务器扩展允许我在 C++ 中“编写脚本”而不是像 php 这样的脚本语言？

一些伪代码：

```
#include <iostream>

cout << "<html><title>this is a webpage</title></html>"; 
```

我知道这听起来很傻，但我真的想知道这样的事情是否存在。

或者也许有一些东西可以让编译的 C++ 代码作为网页从 Web 服务器运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:50:20.180

好吧，正如评论中所说，您可以使用 CGI 做您想做的事情。如果您需要使用 c++ 制作 webapp，WT 可能是您想要的框架：

[http://www.webtoolkit.eu/wt](http://www.webtoolkit.eu/wt)

# c# - Outlook 2003 信任中心在哪里

> ID：14149713
> 
> 赞同：1
> 
> 时间：2013-01-04T01:05:36.200
> 
> 标签：c#, security, outlook, outlook-addin, outlook-2003

我有一个禁用的 Outlook 插件，表明它不在受信任的源列表中。我找到了 Outlook 2010 的信任中心，但找不到 Outlook 2003 的位置。

有人可以告诉我是否应该看一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:10:29.197

2003 年的位置略有不同。打开 Outlook，单击工具，然后单击选项，然后单击安全选项卡，然后单击下载图片部分。

# php - 同一页面 PHP/JavaScript 上的多个随机广告 Div

> ID：14149714
> 
> 赞同：1
> 
> 时间：2013-01-04T01:05:45.437
> 
> 标签：php, javascript

我已经用尽了我的业余脚本技能并寻求帮助。

这是我的网站主索引和当前工作脚本，其中一组添加随机显示在我的主页上。

**http://blessone.netau.net/**

在尝试了很多不同的代码后，我已经设法解决了这个问题。

```
divs = ['d1','d2','d3','d4'];

function hideDivs() {
for (var i=0; i<divs.length; i++)
document.getElementsByClassName('adbox');

}

function showDiv() {
hideDivs(); //hide them all before we show the next one.
var randomDiv = divs[Math.floor(Math.random()*divs.length)];
var div = document.getElementsByClassName(randomDiv).style.display =
'block';

setTimeout(showDiv,500); //set a delay before showing the next div

}` 
```

我试图从“adverts/pop_left_ad.php”中的一组 div 中随机在我的主页上显示一个 div。

效果很好！

但是一个问题。当我尝试使用......

```
<?php include("adverts/pop_left_ad.php"); ?> 
```

...在一页上两次它不会在我的页面上给我两个不同的随机 div，无论我将它们放在哪里。我为每组 div 使用不同的文件，而不是由他们的调用 div 随机调用。

我应该指出我不确定如何为我的第二次包含编辑 JS。我只在其中添加一系列 div ID 吗？？？我在 JS 中更改了哪些元素？

我现在了解到问题是我的 id 设置，并将其更改为类设置。所以我需要帮助对我的 JS 进行额外的更改以合并类等等。

任何帮助是极大的赞赏。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:18:55.690

问题似乎是您正在为您的 div 使用 id 属性。这在代码中只有一个 d1、d2、d3、d4 副本的情况下很好，但如果它被包含多次，getElementById 将难以区分具有相同 id 的不同 div。

我会做什么将 d1 到 d4 中的每一个的 id 属性更改为类属性（并对 d1-d4 中的每一个的内容执行相同的操作，例如将 id="adTitle" 设置为 class="adTitle"），然后将div 中的一组广告，其类属性名为“adbox”

从那里，您修改您的代码以获取所有具有 adbox 类的 div，然后像现在一样循环使用类名 d1-d4 的内部 div。使用 jQuery，您可以执行类似的操作`$('.adbox').each()`，使循环变得简单，但`document.getElementsByClassName('adbox')`如果您想坚持使用纯 JS ，也可以使用

# php - 如何在PHP中将数据从表格传输到pdf

> ID：14149718
> 
> 赞同：3
> 
> 时间：2013-01-04T01:06:24.433
> 
> 标签：php

> **可能重复：**
> [使用 PHP 生成 PDF](https://stackoverflow.com/questions/265760/generating-pdfs-with-php)

如何将数据从表格传输到pdf？还是有其他方法可以从表格中打印报告这是我当前的表格我希望它以 pdf 格式传输

```
$tbl_select_exp=mysql_query("select * from expeditures where Date between '$date1' and '$date2' and active= '1' order by        Date ASC"); 
    while($test = mysql_fetch_array($tbl_select_exp))
   {
    ?><tr id="<?php  echo  $test['ExpenseID'] ?>" onclick="a(this.id); myfunction(this)">
    <?php
    echo"<td>".$test['Date']."</td>";
    echo"<td>".$test['ORno']."</td>";
    echo"<td>".$test['AccountName']."</td>";
    echo"<td>".$test['Amount']."</td>";
    echo "</tr>";   
    $test++;    
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:10:26.263

对于简单的 PDF，请查看 FPDF 库，对于更高级的功能，请查看 tcPDF 和 mPDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:13:27.453

我使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，它是一个非常简单的命令行工具，可以从您的 HTML 源代码生成 pdf 文件。

从您的脚本中，您可以使用 exec 调用它，或者您可以在 Google 上搜索帮助类。

我喜欢它，而且 CSS 支持非常酷。

# mongodb - Mongoose Db：如何在 Mongoose 查询中使用参数化方法？

> ID：14149723
> 
> 赞同：0
> 
> 时间：2013-01-04T01:07:18.913
> 
> 标签：mongodb, mongoose

```
var mongoose = require('mongoose'),
    Schema = mongoose.Schema, 
    ObjectId = Schema.ObjectId;

var Group = new Schema({
    name: { type: String, required: true },
    members: [{ type: ObjectId, ref: 'User' }],
    leader: { type: ObjectId, ref: 'User' },
    // more fields to filter by
});

Group.method('role', function (user) {
    if (this.leader === user) return "Leader";
    else if (this.members.indexOf(user) >= 0) return "Member";
    else return "Non-Member";
}); 
```

我是 Mongoose 新手，我的第一个真正的问题是一个棘手的问题。我需要选择一组组显示组名和当前用户的角色（user_id 存储在会话变量中）。

我可以在 Mongoose 选择查询中使用“角色”方法吗？

也许我应该使用自定义节点流并在那里实现角色方法？

我注意到我的条件 (this.leader === user) 或 (this.members.indexOf(user) >= 0) 是正确或有效的。我需要避免为每个 Group 文档加载 User 对象。

需要代码示例。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:24:04.353

您要使用的是聚合框架

[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

您可能需要深入了解此查询的本机驱动程序。

# c# - 这是在方法和类上创建和使用自定义属性的正确方法吗？

> ID：14149727
> 
> 赞同：3
> 
> 时间：2013-01-04T01:07:47.947
> 
> 标签：c#, .net, custom-attributes

今天晚上我一直在玩自定义属性，看看我是否可以简化我的缓存层。我想出了以下几点：

```
namespace AttributeCreationTest
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Struct, AllowMultiple = false)]
    public class Cache : Attribute
    {
        public Cache()
        {
            Length = "01h:30m";
        }

        public string Length;
    }

    [AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
    public class CacheIdentifier : Attribute
    {
    }

    [Cache]
    class Class1
    {
        [CacheIdentifier]
        public int ID { get; set; }
    }

    class Class2
    {
        [CacheIdentifier]
        public bool ID { get; set; }
    }

    [Cache(Length = "01h:10m")]
    class Class3
    {
        [CacheIdentifier]
        public string ID { get; set; }
    }

    class Program
    {

        static void Main(string[] args)
        {
            var f1 = new Class1 { ID = 2 };
            var f2 = new Class2 { ID = false };
            var f3 = new Class3 { ID = "someID" };

            DoCache(f1);
            DoCache(f2);
            DoCache(f3);
        }

        public static void DoCache(object objectToCache)
        {
            var t = objectToCache.GetType();

            var attr = Attribute.GetCustomAttribute(t, typeof(Cache));

            if (attr == null) return;

            var a = (Cache)attr;
            TimeSpan span;

            if (TimeSpan.TryParse(a.Length.Replace("m", "").Replace("h", ""), out span))
            {
                Console.WriteLine("name: {0}, {1}", t.Name, span);

                ExtractCacheData(objectToCache);

                return;
            }

            throw new Exception(string.Format("The Length value of {0} for the class {1} is invalid.", a.Length, t.Name)); 
        }

        public static void ExtractCacheData(object o)
        {
            var t = o.GetType();

            foreach (var prop in t.GetProperties(BindingFlags.Instance | BindingFlags.Public))
            {
                if (Attribute.IsDefined(prop, typeof(CacheIdentifier)))
                {
                    Console.WriteLine("   type: {0}, value {1}", prop.PropertyType, prop.GetValue(o));
                    break;
                }

                throw new Exception(string.Format("A CacheIdentifier attribute has not been defined for {0}.", t.Name));
            }
        }

    }
} 
```

“缓存”属性将被充实，但我在学习 C# 的这一领域时将其保持在最低限度。我的想法是允许更轻松地缓存项目，包括指定缓存对象的时间量的简化方法。

这看起来好吗？使用这种模式将项目推送到缓存是否会对性能产生重大影响？

我还没有找到任何详细介绍这种想法的教程，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:23:50.097

您的实现似乎很好，但`CacheAttribute`对象将是每个属性声明一个，而不是每个`Class1`对象。换句话说，你将创建多少个对象并不重要——如果属性只被分配一次——具有`Length`属性的那个属性的对象将只是`clr`.

但是你为什么不想将`DoCache`一些接口传递给方法，你将定义一些方法来从对象中检索 CacheIdentifier 呢？这样的实现将更加健壮、准确、可读。当然，您需要在每个类中实现它——但我看不到在不指定其任何职责的情况下传递它有很多`object`好处`DoCache`。对于用户而言，此 API 不直观且难以理解。

另一点，如果你愿意的话，更高级 - 出于缓存目的，我建议总体上看面向方面的编程，特别是 PostSharp。这篇文章[Postsharp 可以 SOLIDify 您的代码的 5 种方法：缓存](http://www.sharpcrafters.com/blog/post/solid-caching.aspx)为实现缓存方面提供了一个很好的案例。简而言之，PostSharp 还在编译的第二步通过 IL 编织使用属性和插入缓存行为

**编辑：**如果你想要漂亮和干净的模型，没有任何非域元素的扭曲，我建议另一种 AOP 技术，称为动态拦截。最流行的框架是[LinFu](http://code.google.com/p/linfu/)和[Castle Dynamic Proxy](http://www.castleproject.org/projects/dynamicproxy/)。结果，您将通过构造函数指定依赖项，并且 IoC 容器将在解析这些依赖项时创建代理。但关键是这些模型对代理一无所知，并将在简单对象中使用它们。这有点类似于[装饰者模式](http://en.wikipedia.org/wiki/Decorator_pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T01:26:00.987

您的用法基本正确，但您可能希望缓存结果。`object`您可以将类型传递给它，而不是传递您的实例。此外，为了避免每次都必须使用反射——这肯定不会加速程序的执行——你可以将类型及其相关属性保存在字典中，并在每次使用该方法时进行查找被调用，然后仅在查找失败时通过反射操作。

此外，不是强制性的，但我建议您遵循属性的[命名约定](http://msdn.microsoft.com/en-us/library/w875ab50%28v=vs.71%29.aspx)。

保持结果缓存的示例：

```
static readonly Dictionary<Type, Attribute> CacheAttributes = 
    new Dictionary<Type,Attribute>(); 
```

然后你会修改`DoCache`如下：

```
var t = objectToCache.GetType();
Attribute attr;
var success = CacheAttributes.TryGetValue(t, out attr);
if (!success)
{
    attr = Attribute.GetCustomAttribute(t, typeof (CacheAttribute));
    CacheAttributes[t] = attr;
}
if (attr == null) return;
var a = attr as CacheAttribute;
TimeSpan span;
//Continues with your code 
```

您可以将相同的概念应用于`ExtractCacheData`.

# jquery - 如果可能，使用 AJAX 从 URL 获取 JSON 数据

> ID：14149729
> 
> 赞同：3
> 
> 时间：2013-01-04T01:08:26.247
> 
> 标签：jquery, ajax, json

我想从下面的 URL 获取 JSON 数据并以任何可能的方式在我的网页中使用它，可以做到吗？

[http://fantasy.premierleague.com/web/api/elements/100/](http://fantasy.premierleague.com/web/api/elements/100/)

（注意我不拥有这个网站，我只是将数据用于一个简单的免费应用程序。）

如果我只是将 URL 输入到浏览器中，它可以工作，但这并不好，因为我希望我的页面使用数据，所以 AJAX 请求将是理想的，但我无法让它工作。我尝试过使用 jQuery AJAX 调用，但无法使其正常工作。

我开始认为在浏览器中这是不可能的，我需要使用 Mechanize 或类似的东西，这不是一个真正的选择。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T02:47:43.620

我有这个工作，现在错误函数正在使用 200 状态代码执行。他们是否有可能限制每 x 秒的查询数，因为它是间歇性工作的。

编辑：他们的缓存发生了一些事情。东西被顶起来了。

```
$.ajax({
    type:"GET", 
    url: "http://fantasy.premierleague.com/web/api/elements/100/", 
    success: function(data) {
            $("body").append(JSON.stringify(data));
        }, 
    error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.status);
        },
   dataType: "jsonp"
});​​​​​​​​​​​​​​​ 
```

# iphone - iPhone OpenGL ES 2.0 来自 COLLADA 文件的球体上奇怪的图案渲染纹理

> ID：14149732
> 
> 赞同：1
> 
> 时间：2013-01-04T01:08:49.650
> 
> 标签：iphone, objective-c, cocoa, opengl-es, collada

我正在使用 Cheetah3D 导出​​ COLLADA 文件 ( .dae )，然后使用 Erik Buck 的 COLLADAViewer2 ( [https://github.com/erikbuck/COLLADAViewer2/tree/master/COLLADAViewer2](https://github.com/erikbuck/COLLADAViewer2/tree/master/COLLADAViewer2) ) 程序导出模型列表格式，如他的书中所述。

我的 COLLADA 文件是一个简单的球体，我正在尝试在其上渲染地球纹理。

在 COLLADAViewer 程序中，我导出的 .dae 文件看起来不错，这是一个屏幕截图：

![在此处输入图像描述](../Images/545a5790e86620ecd8b16fb7590cae72.png)

我用于在球体上渲染纹理的代码部分在这里：

```
// Setup texture
CGImageRef imageRef =
[[UIImage imageNamed:@"Earth.jpg"] CGImage];

GLKTextureInfo *textureInfoEarth = [GLKTextureLoader
                               textureWithCGImage:imageRef
                               options:[NSDictionary dictionaryWithObjectsAndKeys:
                                        [NSNumber numberWithBool:YES],
                                        GLKTextureLoaderOriginBottomLeft, nil]
                               error:NULL];

self.baseEffect.texture2d0.name = textureInfoEarth.name;
self.baseEffect.texture2d0.target = textureInfoEarth.target;

// Enable fragment blending with Frame Buffer contents
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

不幸的是，在 XCode 中，当我构建和运行我的球体时，在模拟器上看起来像这样：

![在此处输入图像描述](../Images/d16cbb693c9e89f711bb601faa591fff.png)

我不知道如何解释球体上的奇怪图案，就像纹理在那里但被重复一样。谁能帮我解决这个问题？谢谢 -

我将我正在试验的 xcode 项目上传到 Github。它使用了 Buck 先生的 OpenGL 书中的大量示例代码。

这是链接： [https ://github.com/phishstang65/renderer](https://github.com/phishstang65/renderer)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:03:53.950

在我看来，模型中每个三角形的纹理坐标都是相同的。

查看您的代码，我认为您的顶点缓冲区的格式为每个顶点 40 个字节，每个值是`GLFloat`两个字节，3 表示位置，3 表示法线，2 表示纹理坐标，2 表示第二组纹理坐标。

我运行该应用程序，在它填充`UtilityMesh`对象中的数据后使用断点。在调试器中查看它的数据转储，有一个明确的模式，每 40 个字节重复一次。位置和法线的前 24 个字节按预期变化。最后八个字节始终为0，我认为对应于未使用的第二组纹理坐标。问题是对应于主要纹理坐标的八个字节循环通过三个值。

```
00000000 00000000 
0000003d 0000803d 
00000000 0000803d 
```

所以我认为你的程序很好，只是得到了坏数据。检查您的转换过程。

# java - Java 数组的克隆方法

> ID：14149733
> 
> 赞同：84
> 
> 时间：2013-01-04T01:08:58.167
> 
> 标签：java, arrays, clone

当在数组上使用时，Java 中的 clone() 方法究竟返回了什么？它是否返回一个新数组，其中包含从原始数据复制的数据？

前任：

```
int[] a = {1,2,3};
int[] b = a.clone(); 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-01-04T01:24:27.967

当对`clone`数组调用该方法时，它会返回对新数组的引用，该数组包含（或引用）与源数组相同的元素。

因此，在您的示例中，`int[] a`是在堆上创建的单独对象实例，并且`int[] b`是在堆上创建的单独对象实例。（记住所有数组都是对象）。

```
 int[] a = {1,2,3};
    int[] b = a.clone();

    System.out.println(a == b ? "Same Instance":"Different Instance");
    //Outputs different instance 
```

如果要修改`int[] b`更改将不会反映，`int[] a`因为这两个是单独的对象实例。

```
 b[0] = 5;
    System.out.println(a[0]);
    System.out.println(b[0]);
    //Outputs: 1
    //         5 
```

当源数组包含对象时，这会变得稍微复杂一些。该`clone`方法将返回对新数组的引用，该数组引用与源数组相同的对象。

所以如果我们有课`Dog`...

```
 class Dog{

        private String name;

        public Dog(String name) {
            super();
            this.name = name;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

    } 
```

我创建并填充了一个类型的数组`Dog`......

```
 Dog[] myDogs = new Dog[4];

    myDogs[0] = new Dog("Wolf");
    myDogs[1] = new Dog("Pepper");
    myDogs[2] = new Dog("Bullet");
    myDogs[3] = new Dog("Sadie"); 
```

然后克隆狗...

```
 Dog[] myDogsClone = myDogs.clone(); 
```

数组引用相同的元素...

```
 System.out.println(myDogs[0] == myDogsClone[0] ? "Same":"Different");
    System.out.println(myDogs[1] == myDogsClone[1] ? "Same":"Different");
    System.out.println(myDogs[2] == myDogsClone[2] ? "Same":"Different");
    System.out.println(myDogs[3] == myDogsClone[3] ? "Same":"Different");
    //Outputs Same (4 Times) 
```

这意味着如果我们修改通过克隆数组访问的对象，则更改将在我们访问源数组中的相同对象时反映出来，因为它们指向相同的引用。

```
 myDogsClone[0].setName("Ruff"); 
    System.out.println(myDogs[0].getName());
    //Outputs Ruff 
```

但是，对数组本身的更改只会影响该数组。

```
 myDogsClone[1] = new Dog("Spot");
    System.out.println(myDogsClone[1].getName());
    System.out.println(myDogs[1].getName());
    //Outputs Spot
    //        Pepper 
```

如果您大致了解对象引用的工作原理，就很容易理解对象数组如何受到克隆和修改的影响。为了进一步了解引用和原语，我建议阅读这篇出色的[文章](http://www.javaranch.com/campfire/StoryCups.jsp)。

[源代码要点](https://gist.github.com/kmb385/5fab1e3815e2856726ef)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T01:26:35.690

`clone()`方法创建并返回此对象的副本。“复制”的确切含义可能取决于对象的类别。一般意图是，对于任何对象 x，表达式：

```
 x.clone() != x 
```

将是真的，那表达式：

```
 x.clone().getClass() == x.getClass() 
```

会是真的，但这些不是绝对的要求。

虽然通常是这样的：

```
 x.clone().equals(x) 
```

会是真的，这不是一个绝对的要求。

By convention, the returned object should be obtained by calling `super.clone`. If a class and all of its superclasses (except Object) obey this convention, it will be the case that `x.clone().getClass() == x.getClass()`.

# android - GPS Android 查找位置应用程序

> ID：14149734
> 
> 赞同：0
> 
> 时间：2013-01-04T01:08:59.307
> 
> 标签：android, google-maps, gps, locate

是否可以使用 Google 地图创建 GPS 应用程序来定位物品的位置。为此，我认为该过程是将 GPS 传输设备附加到物品（例如车钥匙或太阳镜）上，如果丢失它们，可以定位它们的位置。

我已经开发了一些 Android 手机应用程序，并希望制作该应用程序来定位手机市场的设备。

对于这种情况，最好的传输设备是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:35:00.490

当我放错太阳镜、钥匙或其他东西时，它们通常会落到卫星视线之外的某个地方……因此，即使这些物品有 GPS 接收器，它们也无法修复。此外，这些项目需要能够将其位置传达给您的设备或互联网。这些物品需要电源来操作 GPS（和通信设备）。

在我看来，对于室内丢失的物品，最好使用物品中的一些信号，然后根据信号回家（蓝牙、wifi 等）。这也比 GPS 需要更少的功率。

# c# - LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式

> ID：14149736
> 
> 赞同：2
> 
> 时间：2013-01-04T01:09:36.057
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我在我的 asp.net mvc 应用程序中有以下视图：-

```
 @model MvcApplication4.Models.ContactsDetails
     <h3>Select Contacts Detials</h3>
    <p class="dashboarder" style = "color:#5c87b2"><strong>@Model.Info.Count()</strong> Selected Customers Accounts.</p>
    @using (Html.BeginForm("Export", null))
    {
        Int32 c = -1;
        <table>
            <tr>
                <th>
                    Account Name @Html.CheckBox("IncludeAccountName", true)
                </th>
                <th>
                    Name @Html.CheckBox("IncludeName", true)
                </th> 
```

使用以下操作方法填充：-

```
public ActionResult CustomersDetails(long[] SelectRight)
{

    if (SelectRight == null)
    {
        return RedirectToAction("customer", new { isError = true });
    }
    else
    {

        var ContactsDetails2 = new ContactsDetails
        {
            Info = r.getcontactinfo(SelectRight)
        };
        return View(ContactsDetails2);

    }          

} 
```

然后是以下存储库方法：-

```
public IEnumerable<AaaUserContactInfo> getcontactinfo(long[] id)
{
    var organizationNames = entities.SDOrganizations
                   .Where(org => id.Contains(org.ORG_ID))
                   .Select(org => org.NAME);

    var result = from userContactInfo in entities.AaaUserContactInfoes
                 join contactInfo in entities.AaaContactInfoes on userContactInfo.CONTACTINFO_ID equals contactInfo.CONTACTINFO_ID
                 where organizationNames.Contains(contactInfo.EMAILID.ToString())
                 select userContactInfo;
    return result; 
```

但是当我运行 mu 应用程序时，我在视图上得到了以下不清楚的错误：-

```
LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression. 
```

在以下代码上：-

```
<strong>@Model.Info.Count()</strong> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T01:13:42.963

使用[`SqlFunctions.StringConvert`](http://msdn.microsoft.com/en-us/library/dd487127.aspx)方法代替`ToString`（不能转换成SQL）：

```
where organizationNames.Contains(SqlFunctions.StringConvert(contactInfo.EMAILID)) 
```

如果`EMAILID`不是 double 或 decimal，则只需将 value 转换为其中一种类型。

# java - 禁用 Java ImageIO 色度二次采样

> ID：14149739
> 
> 赞同：3
> 
> 时间：2013-01-04T01:09:46.080
> 
> 标签：java, image, javax.imageio, jai, subsampling

我正在尝试使用 ImageIO 将 BufferedImage 保存为 JPEG。但即使使用 100 质量进行保存，由于色度子采样，我也会遭受质量损失。

我已经通过恢复到较旧的 JAI 库并将水平和垂直二次采样显式设置为 1 成功解决了这个问题。然而，一个关键要求是我将图像保存为渐进式，JAI 似乎不支持。

有没有办法使用较新的 ImageWriter 禁用子采样？

提前致谢

如果可能的话，我想避免使用 ImageMagick

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:41:55.467

阅读[JPEG Metadata Format Specification and Usage Notes](http://docs.oracle.com/javase/7/docs/api/javax/imageio/metadata/doc-files/jpeg_metadata.html)似乎表明这可以通过使用自定义`IIOMetadata`.

在互联网上搜索会出现[https://codereview.appspot.com/3082041/patch/204004/210007](https://codereview.appspot.com/3082041/patch/204004/210007)，它似乎正是以这种方式使用 ImageIO。

我没有尝试过，不知道它是否真的有效。

# objective-c - 如何在 NSNumberFormatter 的输出上强制使用符号字符

> ID：14149740
> 
> 赞同：16
> 
> 时间：2013-01-04T01:09:50.773
> 
> 标签：objective-c, ios, nsnumberformatter

我想使用数字格式化程序来生成我的输出，所以数字会自动格式化为用户的语言环境，但我希望它像*printf()中的***"%+.1f"**一样工作，总是有一个指定的符号。

 *```
NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
nf.numberStyle = NSNumberFormatterDecimalStyle;
nf.maximumFractionDigits = 1;

double val = 3.1234;
label.text = [NSString stringWithFormat: @"XXX %@ XXX", [nf stringFromNumber: [NSNumber numberWithDouble: val]]]; 
```

我希望标签在美国出现“XXX +3.1 XXX”，并在任何其他位置出现适当但等效的字符串。我唯一能找到的是`setPositiveFormat:`和`setPositivePrefix:`。

但是我*不想*设置格式，因为我不知道如何格式化其他国家的数字；我不知道加号是否用于在阿拉伯语或俄语或我没有想到的某些文化中指定正数。例如，我知道小数点、逗号、空格等在欧洲国家与美国相比都有不同的含义 - +/- 符号也是如此吗？

我目前做的是：

```
label.text = [NSString stringWithFormat: @"XXX %s%@ XXX", (val < 0) ? "" : "+",
    [nf stringFromNumber: [NSNumber numberWithDouble: val]]]; 
```

但这假定 '+' 和 '-' 对于所有格式都是正确的。

我敢肯定它必须在那里，因为它是自黑暗时代以来一直在*printf()中的标准格式设置...*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T03:05:52.640

这个怎么样：

```
NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
nf.numberStyle = NSNumberFormatterDecimalStyle;
nf.maximumFractionDigits = 1;

double val = 3.1234;
NSString *sign = (val < 0) ? [nf minusSign] : [nf plusSign];
NSString *num = [nf stringFromNumber:@(abs(val))]; // avoid double negative
label.text = [NSString stringWithFormat: @"XXX %@%@ XXX", sign, num]; 
```

您可能需要检查是否`num`有`sign`前缀，所以它不会显示两次。

编辑：经过一番尝试，已经确定，对于“十进制”样式，当前语言环境没有使用`positivePrefix`. 当前的语言环境不使用`plusSign`标准字符以外的`+`字符。当前没有任何语言环境使用`negativePrefix`不同于`minusSign`. 当前的语言环境不使用`positiveSuffix`或`negativeSuffix`。

因此，一种更简单的方法是：

```
NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
nf.numberStyle = NSNumberFormatterDecimalStyle;
nf.maximumFractionDigits = 1;
[nf setPositivePrefix:[nf plusSign]];
[nf setNegativePrefix:[nf minusSign]];

label.text = [nf stringFromNumber:@(val)]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-04T02:05:44.397

这种情况很简单，只需添加前缀：

```
nf.positivePrefix= nf.plusSign; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-09T21:50:00.237

虽然它不会使用用户的语言环境，但您可以执行以下操作来生成 +/- 符号，而无需花费一些昂贵的开销`NSNumberFormatter`：

```
// assume 'number' is an NSNumber
label.text = [NSString stringWithFormat:@"%+.02f", [number floatValue]]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-09T06:20:59.370

**简单案例：**

```
 let f = NumberFormatter()
    f.positivePrefix = f.plusSign 
```

**货币案例：**

*需要破解，因为将前缀设置为 plusSign only 将删除货币符号。*

```
 let f = NumberFormatter()
    f.numberStyle = .currency
    f.positivePrefix = f.plusSign + f.currencySymbol 
```

取决于语言环境，还有一些工作要做。货币符号可能在之前或之后，但这可能是另一个主题。

**编辑：**

即使它是另一个主题，我会说上述问题的可能解决方案是子类 NSNumberFormatter ：

```
override func string(from number: NSNumber) -> String? {
    returns ( number.doubleValue >= 0 ? super.plusSign : "" ) + super.string(from: number)
} 
```

这样，NSNumberFormatter 应该管理货币头寸，而您的子类只需添加 + 号。没有时间对此进行深入测试，但至少这是一种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T02:10:54.030

的[底层格式化语言](http://www.unicode.org/reports/tr35/tr35-17.html#Number_Format_Patterns)对`NSNumberFormatter`您想要做的事情没有任何规定——它将允许您*在 exponents 上*指定一个本地化的正号，但不能为整个格式化字符串指定一个本地化的正号。[`NSLocale`似乎](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html#//apple_ref/doc/uid/TP30001224-SW21)也没有提供本地化的正号。

除了制作一个包含指数的虚拟字符串，将本地化的正号拉出并手动将最终格式化的字符串放在一起之外，我认为你不走运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-19T15:44:37.803

swift中可重用的格式化程序：

```
var numberFormatter: NSNumberFormatter {
    let formatter = NSNumberFormatter()
    formatter.numberStyle = .DecimalStyle
    formatter.locale = NSLocale(localeIdentifier: "it_IT")//your Locale
    formatter.maximumFractionDigits = 2
    formatter.minimumFractionDigits = 0
    formatter.positivePrefix = formatter.plusSign
    return formatter
} 
```

然后使用它：

```
let myDoubleValue = 12.00
let myStringNumber = numberFormatter.stringFromNumber(myDoubleValue)! 
```*

# iphone - UITableView 滚动不顺畅，因为它再次加载单元格

> ID：14149746
> 
> 赞同：2
> 
> 时间：2013-01-04T01:10:36.540
> 
> 标签：iphone, ios, uitableview

> **可能重复：**
> [UITableViewCell 中的延迟加载图像](https://stackoverflow.com/questions/531482/lazy-load-images-in-uitableviewcell)

我的 UITableView 单元格有问题，我的单元格每次从屏幕上出来时都会重新加载。我的应用程序从 url 加载图像并将它们放在单元格左侧的 ImageView 中，因此它使 UITableView 滚动非常慢。

我想知道是否有办法：

1.一次加载所有单元格。2.禁用单元格的重新加载。

这样 TableView 可以平滑滚动。每个单元格由三个子视图组成。两个用于标题和描述标签，最后一个用于图像。内容来自 NSXMLParse，因此加载这些单元格需要时间。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:33:33.923

我能想到的改善滚动的三种方法是：

1.  不在主线程中加载图像，只需插入占位符并在数据最终可用时填充它们（评论中提到的延迟加载）。

2.  自己缓存图像，以便稍后查看单元格时，您已经有了要显示的数据。

3.  为显示的行上方和下方的单元格将预期图像预取到缓存中。

当然，这些并不是相互排斥的，应该将它们组合起来以获得最流畅的用户界面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T01:52:19.077

而不是使用 uiimageview 使用 sdwebimage。我想它会帮助你。

# javascript - 使用 javascript 获取活动字段 ID

> ID：14149747
> 
> 赞同：1
> 
> 时间：2013-01-04T01:11:15.237
> 
> 标签：javascript, html

我有大约 30 个输入的所有文本，我有一个按钮，我想在按下按钮时获取焦点的 ID。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:19:01.953

对焦很棘手。只要其他一些元素（如单击按钮），焦点就已经移动，因此您无法通过查看焦点来查看上次活动的输入字段。

您可以将焦点事件的事件处理程序附加到每个输入元素，并跟踪自己最后收到焦点的那个，然后在按下按钮时使用该变量。

也许如果您描述您要解决的实际问题，我们可以提供更好的解决方案。

您可以在这里看到一个记住最后一个活动输入字段的示例：http: [//jsfiddle.net/jfriend00/XmqPe/](http://jsfiddle.net/jfriend00/XmqPe/)。单击该按钮，最后一个活动字段将以红色突出显示。

```
var lastInput;
function gotInput() {
    lastInput = this;
}

function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn);
    } else {
        elem.attachEvent("on" + event, function() {
            fn.call(elem, window.event);
        });
    }
}

var inputs = document.getElementsByTagName("input");
for (var i = 0; i < inputs.length; i++) {
    addEvent(inputs[i], 'focus', gotInput);
}

addEvent(document.getElementById('test'), 'click', function() {
    for (var i = 0; i < inputs.length; i++) {
        inputs[i].style.borderColor = '#000';
    }
    if (lastInput) {
        lastInput.style.borderColor = '#F00';
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:36:59.370

您可以尝试此解决方法以在按下按钮时获得最后一个输入焦点：

使用 jquery 的示例：

```
<script type="text/javascript">
    $(document).ready(function () {

        var lastId = null;

        $(".inputTest").focus(function () {
            //put the last input id in a "global" variable:
            lastId = $(this).attr("id");
        });

        $("#btnTest").click(function () {

            if (lastId) {
                //if exists, do something:
                alert(lastId);
            }
        });
    });
</script> 
```

html示例：

```
<body>
     <input type="text" name="test1" id="test1" class="inputTest" />
     <input type="text" name="test2" id="test2" class="inputTest"/>
     <input type="text" name="test3" id="test3" class="inputTest" />
     <input type="text" name="test4" id="test4" class="inputTest" />
     <input type="text" name="test5" id="test5" class="inputTest" />
     <input type="text" name="test6" id="test6" class="inputTest" />

     <input type="button" value="test" id="btnTest" />

</body> 
```

# excel - 使用 python 格式化单个 Excel 单元格中的单个字符

> ID：14149748
> 
> 赞同：7
> 
> 时间：2013-01-04T01:11:17.937
> 
> 标签：excel, xlrd, xlwt, xlutils

我在带有 Python 2.7 的 Windows Vista 操作系统上使用 xlrd、xlwt 和 xlutils。我在一个 100 个字符长的 Excel 工作表中有一组 DNA 序列，每个序列都在一个单元格中。我试图在 excel 中突出显示每个序列中特定位置的字符（加粗或更改颜色），但还没有找到一种方法来格式化单元格中的单个字符。据我所知，应用样式会将其应用于整个单元格。因此，我试图将序列分解为单独的组件，其中序列的某些部分将使用样式进行修改，而其他部分则不会，然后将它们重新整理成单个单元格中的单个字符串。

代码：

```
    rb = open_workbook('Mybook',formatting_info=True)
    rs = rb.sheet_by_index(0)
    wb = 复制（rb）
    ws = wb.get_sheet(0)

    minus35style = xlwt.easyxf('font: bold 1') # 只需要一个字符的样式
    对于范围内的 b (0, 368, 1)：
        rscellin = rs.cell(b,9)
        f = rscellin.value
        tominus35 = str(f[0:34])
        减 35 = str(f[35:36])
        ws.write(b, 14, tominus35)
        ws.write(b, 14, minus35, minus35style)
    wb.save('我的书')

```

我的问题是添加样式会更改整个单元格，而我只想修改某些字符。此外，随后对同一单元格的写入会覆盖之前的内容。有没有办法修改单个单元格中的单个字符，或者将不同格式的文本添加到已经有文本的现有单元格中？

如果您需要我忽略的其他信息，请告诉我。我提前感谢您的时间。

布雷特

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T23:30:46.513

最新版本`xlwt`包括在单元格中使用富文本的能力。通常你会使用的地方`ws.write`，使用`ws.write_rich_text`代替。像往常一样，前两个参数是行索引和列索引；但下一个参数是一系列组件。每个组件可以是“裸”文本值或（文本，字体）对。裸文本值将使用单元格整体样式中的字体，可以使用可选的第四个参数指定。

对于 (text, font) 对，使用新功能生成字体是最简单的`easyfont`，这有点像`easyxf`，但仅适用于字体。这是一个例子：

```
import xlwt

wb = xlwt.Workbook()
ws = wb.add_sheet('Sheet1')

font0 = xlwt.easyfont('')
font1 = xlwt.easyfont('bold true')
font2 = xlwt.easyfont('color_index red')
style = xlwt.easyxf('font: color_index blue')

seg1 = ('bold', font1)
seg2 = ('red', font2)
seg3 = ('plain', font0)
seg4 = ('boldagain', font1)

ws.write_rich_text(2, 5, (seg1, seg2, seg3, seg4))
ws.write_rich_text(4, 1, ('xyz', seg2, seg3, '123'), style)

wb.save('rich_text.xls') 
```

您应该能够根据您的目的调整上述内容。请注意，您仍然必须一次写入或覆盖整个单元格；您以后不能返回并仅更新单元格的一部分。

# github - Github 上 Java Eclipse 项目的奇怪缩进

> ID：14149750
> 
> 赞同：3
> 
> 时间：2013-01-04T01:11:37.873
> 
> 标签：github

Eclipse 中的一切都很好，缩进很好。然后我把我的代码放在 github 上，由于某种原因，缩进是一团糟。我不确定发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T07:35:49.993

如果这些缩进问题在 git 推送到 GitHub 后反映在您的代码中，您可以：

*   在制表符之前删除空格的钩子（如“[让 git 在提交之前自动删除尾随空格](https://stackoverflow.com/questions/591923/make-git-automatically-remove-trailing-whitespace-before-committing)”）
*   或在文件中声明的过滤器内容驱动程序`.gitattributes`（如“ [git 可以在空格和制表符之间自动切换吗？](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728) ”）

这两个自动机制可以解释`git commit`.

* * *

但是如果你的代码在 git push*后*在本地看起来不错，但在 GitHub 上看起来不太好，那么你必须在本地正确呈现空格和制表符的组合，并在 GitHub 上以不同方式呈现。

如“ [Indentation issue using sublime text 2](https://stackoverflow.com/questions/11776009/indentation-issue-using-sublime-text-2) ”中所述：

> 问题不是硬制表符，问题是混合空格和制表符以进行缩进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-22T21:31:16.747

我在eclipse中得到了这个：

**日食设置：**

*   首选项：Java -> 代码样式 -> 格式化程序
*   创建新的个人资料
*   更新配置文件缩进设置：

![在此处输入图像描述](../Images/6a8c981ecd9bcc22a54b8e6a377773dd.png)

**更新现有的 Java 源：**

*   （工具栏）来源：正确的缩进
*   检查文件，您应该看到所有缩进都使用空格，而不是制表符

# python - 设置“if”以确保变量是数字而不是字母/符号

> ID：14149751
> 
> 赞同：2
> 
> 时间：2013-01-04T01:11:51.120
> 
> 标签：python, if-statement

如何创建“if”语句以确保输入变量是数字而不是字母？

```
radius = input ('What is the radius of the circle? ') 

#need if statement here following the input above in case user
#presses a wrong key 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T01:17:01.040

假设您使用的是 python2.x：我认为更好的方法是将输入作为`raw_input`. 然后你*知道*它是一个字符串：

```
r = raw_input("enter radius:")  #raw_input always returns a string 
```

上述语句的 python3.x 等效项是：

```
r = input("enter radius:")      #input on python3.x always returns a string 
```

现在，从中构造一个浮点数（或尝试）：

```
try:
    radius = float(r)
except ValueError:
    print "bad input" 
```

*关于 python 版本兼容性的一些进一步说明*

在 python2.x 中，`input(...)`相当于`eval(raw_input(...))`这意味着你永远不知道你会从中得到什么——你甚至可以在`SyntaxError`里面得到一个提升`input`！

****关于在 python2.x 上****使用的警告**`input`**

 ****作为旁注，我提出的程序使您的程序免受各种攻击。考虑一下如果用户输入以下内容将是多么糟糕的一天：

```
__import__('os').remove('some/important/file') 
```

提示时而不是数字！如果您`eval`通过`input`在 python2.x 上使用或`eval`显式使用之前的语句，则您刚刚`some/important/file`删除了该语句。哎呀。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T01:14:17.700

尝试这个：

```
if isinstance(radius, (int, float)):
    #do stuff
else:
    raise TypeError  #or whatever you wanna do 
```****

# json - 从列表框导航 Windows Phone 传递数据

> ID：14149753
> 
> 赞同：0
> 
> 时间：2013-01-04T01:11:59.670
> 
> 标签：json, listbox, windows-phone-7.1, listboxitem

我正在获取数据来创建一个类似于博客的列表框，其中包含来自网络博客的 JSON，我想在您选择一个项目时将此数据传递到另一个包含此新闻信息（标题、内容和图像）的简单 xaml 页面。如何使用列表中所选项目的信息获取新页面的所有值？

我有这个列表框的代码：

```
 <ListBox x:Name="NewsList" Margin="0,200,0,0" ItemsSource="{Binding Items}" SelectionChanged="ListBox_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,17" Width="432" Height="100">
                                <!--Replace rectangle with image-->
                                <Image x:Name="Imagen" Height="100" Width="100"  Margin="12,0,9,0">
                                    <Image.Source>
                                        <BitmapImage UriSource="{Binding LineThree}" />
                                    </Image.Source>
                                </Image>
                                <StackPanel Width="311">
                                    <TextBlock x:Name="Titulo" Text="{Binding LineOne}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="18.667" FontFamily="Tahoma" Margin="12,0,12,6"/>
                                    <TextBlock x:Name="Contenido" Text="{Binding LineTwo}" TextWrapping="Wrap" Margin="12,0" Style="{StaticResource PhoneTextSubtleStyle}" FontSize="16"/>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

我从这里的新闻中获取值：项目是我添加新闻值的列表（标题、内容和图像）

```
 public void LoadData()
    {
        WebRequest.RegisterPrefix("http://automaticband.es/blog/", WebRequestCreator.ClientHttp);
        Uri serviceUri = new Uri("http://automaticband.es/blog/?json=get_recent_post");
        WebClient downloader = new WebClient();
        downloader.OpenReadCompleted += new OpenReadCompletedEventHandler(downloader_OpenReadCompleted);
        downloader.OpenReadAsync(serviceUri);
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    void downloader_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            try
            {
                Stream responseStream = e.Result;
                DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Posts));
                Posts response = (Posts)ser.ReadObject(responseStream);
                if (response.posts != null && response.posts.Count > 0)
                {
                    foreach (Post post in response.posts)
                    {

                        this.Items.Add(new ItemViewModel() { LineOne = post.title, LineTwo = post.excerpt,
                            LineThree = post.thumbnail});
                    }
                }
            }
            catch (Exception x)
            {
                return;
            }
            this.IsDataLoaded = true;
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:28:29.487

我在这里找到了解决方案：

[http://windowsphonegeek.com/articles/Windows-Phone-MVVM-Master---Details-Navigation-in-5-minutes](http://windowsphonegeek.com/articles/Windows-Phone-MVVM-Master---Details-Navigation-in-5-minutes)

使用 ItemViewModel 在页面之间传递数据的简单方法。

# facebook - facebook用户名可以更改吗？它是独一无二的吗？适合我们自己的内部ID吗？

> ID：14149757
> 
> 赞同：1
> 
> 时间：2013-01-04T01:12:22.233
> 
> 标签：facebook

基本上我允许人们通过 facebook 注册我的应用程序。

我想知道我是否应该存储 facebook ID 或 facebook 用户名。

用户名更有吸引力。然而，能改变吗？它是独一无二的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:14:05.660

> 用户名更有吸引力。然而，能改变吗？

是的！用户可以更改他的用户名一次。（https://www.facebook.com/help/162586890471598/）

> 它是独一无二的吗？

是的。

# arrays - 仅使用一个块或线程太少时，Cuda 共享内存超出范围

> ID：14149758
> 
> 赞同：0
> 
> 时间：2013-01-04T01:12:22.590
> 
> 标签：arrays, cuda, gpu, shared-memory, nvidia

我尝试自己使用 CUDA 实现向量和缩减，但遇到了一个我可以修复但不了解实际问题的错误。

我在下面实现了内核，它与 NVIDIA 的示例中使用的内核几乎相同。

```
__global__ 
void reduce0(int *input, int *output)
{
    extern __shared__ int s_data[];

    int tid = threadIdx.x;
    int i = blockIdx.x * blockDim.x + threadIdx.x;

    s_data[tid] = input[i];
    __syncthreads();

    for( int s=1; s < blockDim.x; s *= 2) {
        if((tid % 2*s) == 0) {
            s_data[tid] += s_data[tid + s];
        }

        __syncthreads();
    }

    if(tid == 0) {
        output[blockIdx.x] = s_data[0];
    }
} 
```

此外，我在主机端计算共享内存空间如下

```
int sharedMemSize = numberOfValues * sizeof(int); 
```

如果使用了超过 1 个线程块，则代码运行良好。仅使用 1 个块会导致上述索引超出范围错误。通过将我的主机代码与我发现以下行的示例之一进行比较来查找我的错误：

```
int smemSize = (threads <= 32) ? 2 * threads * sizeof(T) : threads * sizeof(T); 
```

稍微玩一下我的块/网格设置，我得到了以下结果：

1.  块，任意数量的线程 => 代码**崩溃**
2.  >2 块，任意数量的线程 => 代码运行**良好**
3.  1 块，任意数量的线程，共享内存大小 2*#threads => 代码运行**良好**

尽管考虑了几个小时，但我不明白为什么在使用太少数量的线程或块时会出现越界错误。

更新：主机代码按要求调用内核

```
int numberOfValues = 1024 ;
int numberOfThreadsPerBlock = 32;
int numberOfBlocks = numberOfValues / numberOfThreadsPerBlock;

int memSize = sizeof(int) * numberOfValues;

int *values = (int *) malloc(memSize);
int *result = (int *) malloc(memSize);

int *values_device, *result_device;
cudaMalloc((void **) &values_device, memSize);
cudaMalloc((void **) &result_device, memSize);

for(int i=0; i < numberOfValues ; i++) {
    values[i] = i+1;
}

cudaMemcpy(values_device, values, memSize, cudaMemcpyHostToDevice);

dim3 dimGrid(numberOfBlocks,1);
dim3 dimBlock(numberOfThreadsPerBlock,1);
int sharedMemSize = numberOfThreadsPerBlock * sizeof(int);

reduce0 <<< dimGrid, dimBlock, sharedMemSize >>>(values_device, result_device);

if (cudaSuccess != cudaGetLastError())
        printf( "Error!\n" );

cudaMemcpy(result, result_device, memSize, cudaMemcpyDeviceToHost); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:35:05.057

你的问题可能是模数和乘法的优先顺序吗？ `tid % 2*s`等于`(tid % s)*2`但你想要`tid % (s*2)`

您需要`int smemSize = (threads <= 32) ? 2 * threads * sizeof(T) : threads * sizeof(T)`用于少量线程的原因是超出范围的索引。发生这种情况的一个示例是当您启动 29 个线程时。何时`tid=28`和`s=2`分支将被采用，`28 % (2*2) == 0`并且您将索引到`s_data[28+2]`但您只为 29 个线程分配了共享内存。

# c++ - 为什么将视频录制到文件需要很长时间？

> ID：14149762
> 
> 赞同：1
> 
> 时间：2013-01-04T01:12:54.880
> 
> 标签：c++, windows-ce, directshow

我开发了一个视频捕获应用程序，其中 CPU 为 624MHz（ARM920T-PAX310），RAM 为 72MB。捕获的视频是 1 分钟，但保存视频文件需要将近 10 分钟。我设置了一个断点，发现花了很长时间。

```
 //------------------- set filename
HRESULT hResult;
    CComPtr<IFileSinkFilter>        pFileSinkFilter;

    m_pMediaControl->Stop();
    m_pMediaControl->Run();
    CHK(m_pASFMultiplexer->QueryInterface(&pFileSinkFilter));   CHK(pFileSinkFilter->SetFileName(L"\\windows\\sample.asf",NULL));// pFileSinkFilter.Release();
//------------------start record
LONGLONG dwStart = 0, dwEnd = 0;
    WORD     wStartCookie = 1, wEndCookie = 2;
    HRESULT hResult = 0;
    if( m_pCaptureGraphBuilder == NULL )
    {
       return FALSE;
    }    
    //
    dwStart=0;
    dwEnd=MAXLONGLONG;
    hResult = m_pCaptureGraphBuilder->ControlStream( &PIN_CATEGORY_CAPTURE, &MEDIATYPE_Video, m_pVideoCaptureFilter, &dwStart, &dwEnd, wStartCookie, wEndCookie );
Sleep(60000);//1 minute
//------------------stop record
HRESULT   hResult = S_OK;
    LONGLONG  dwStart = 0, dwEnd = 0;
    WORD      wStartCookie = 1, wEndCookie = 2;
    LONG lEventCode = 0;
    LONG lParam1 = 0;
    LONG lParam2 = 0;
    if( m_pCaptureGraphBuilder == NULL )
    {
       return FALSE;
    }
    //
    dwStart = 0;
    hResult = m_pMediaSeeking->GetCurrentPosition( &dwEnd );
    hResult = m_pCaptureGraphBuilder->ControlStream( &PIN_CATEGORY_CAPTURE, &MEDIATYPE_Video, m_pVideoCaptureFilter, &dwStart, &dwEnd, wStartCookie, wEndCookie );
    //
    while (true)
    {
        m_pMediaEvent->GetEvent( &lEventCode, &lParam1, &lParam2, INFINITE );
        m_pMediaEvent->FreeEventParams( lEventCode, lParam1, lParam2 );
        if( lEventCode == EC_STREAM_CONTROL_STOPPED ) {
            TRACE(L"Record stop\n");
            break;
        }
        Sleep(100);
        NKDbgPrintfW(L"lEventCode = %d dwEnd = %d\n",lEventCode,dwEnd);
    } 
```

我发现文件的大小从“开始记录”开始不断增加。为什么“停止记录”需要很长时间“停止记录”我应该做什么？？？

# node.js - HAproxy 和 Node.js+Spdy

> ID：14149767
> 
> 赞同：2
> 
> 时间：2013-01-04T01:13:25.313
> 
> 标签：node.js, haproxy, spdy

我目前正在使用[node spdy](https://github.com/indutny/node-spdy)来提供文件。这很好用。

但是我想使用 HAproxy 在这些节点服务器之间进行负载平衡。但是当我的节点/spdy 服务器落后于 HAproxy 时，`request.isSpdy`是不是`false`……突然不支持 spdy 了？

这是我的 HAproxy 配置： global maxconn 4096

```
defaults
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend http_proxy
    mode http
    bind *:80
    redirect prefix https://awesome.com code 301

frontend https_proxy
    mode tcp
    bind *:443
    default_backend webservers

backend webservers
    balance source
    server server1 127.0.0.1:10443 maxconn 4096
    # server server2 127.0.0.1:10444 maxconn 4096 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T03:45:28.667

您不能将 HAProxy 的 HTTP 负载平衡机制与 SPDY 一起使用。首先，您需要使用最新的开发分支来启用对 NPN（以及 SPDY）的支持，然后，您必须将其配置为更接近于简单的 TCP 负载平衡模式——HAProxy 不支持 SPDY。

有关示例 HAProxy + SPDY 配置脚本，请参见此处： [http ://www.igvita.com/2012/10/31/simple-spdy-and-npn-negotiation-with-haproxy/](http://www.igvita.com/2012/10/31/simple-spdy-and-npn-negotiation-with-haproxy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-27T00:10:02.220

我遇到了同样的问题。我没有使用 spdy，而是使用 express 并让 haproxy 使用 http/2 协议。

```
 frontend http-in
   bind *:80
   mode http
   redirect scheme https code 301

frontend https-in
    mode http
    bind *:443 ssl crt /path/to/cert.pem alpn h2,http/1.1 
```

这里的关键是这部分`alpn h2,http/1.1`

# c# - 有关数据保护 API (DPAPI) 的信息

> ID：14149769
> 
> 赞同：4
> 
> 时间：2013-01-04T01:13:28.550
> 
> 标签：c#, asp.net-mvc, security, hash, dpapi

我目前正在编写 ac# mvc Web 应用程序，其中从用户那里获取密码并存储在数据库 - sql server 中。我需要一种散列密码的方法。

建议使用数据保护 API (DPAPI)。我不熟悉它，从互联网上的研究来看，关于它的信息很少。

任何人都可以指出方向以获取更多信息吗？或者给我一个关于如何设置和使用它等的概述。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T01:32:14.323

数据保护 API 主要用于保护用户凭据下的加密密钥和机密。如果您想将散列密码存储在数据库中，那么 DAPI 并不是您真正想要的。

[ASP.NET Membership Provider](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)用于管理用户，包括使用盐散列密码。不幸的是，似乎没有一种方法可以只返回散列密码，所以如果您不需要额外的功能，可能值得从[CodeFirst Membership Provider](http://codefirstmembership.codeplex.com/)之类的东西中提取相关代码（参见源代码中的 Crypto.cs代码）。这里的优势是这个 Membership Provider 使用 PBKDF2 来派生哈希，考虑到轮数，它更能抵抗暴力攻击。这也是[StackOverflow](https://blog.stackoverflow.com/2011/05/stack-exchange-is-an-openid-provider/#comment-59112)本身使用的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T01:31:50.723

.Net 有一个名为[ProtectedData](http://msdn.microsoft.com/library/system.security.cryptography.protecteddata.aspx)的 DPAPI 包装类。它非常易于使用，并且只包含两个静态方法：`Protect`和`Unprotect`. 可以在[此处找到操作方法文章](http://msdn.microsoft.com/en-US/library/ms229741%28v=vs.110%29.aspx). DPAPI 不需要密钥，因为它使用登录用户的凭据或计算机的凭据进行加密，具体取决于您在调用 Protect 时选择的范围。请注意，如果您打算将加密数据存储在数据库中，则必须确保始终使用相同的 Windows 用户帐户或机器（同样，取决于加密范围），否则您将无法解密数据。因此，根据您的应用程序，此 API 可能不是最佳的。它主要用于在单台机器上进行本地加密，而不是分布式应用程序。

# c# - VS2012EXPRESS Ado.Net SQLite 缺少 DLL 问题

> ID：14149771
> 
> 赞同：2
> 
> 时间：2013-01-04T01:13:49.030
> 
> 标签：c#, sqlite, exception, ado.net

我试图弄清楚如何在 VS2012 Express 中使用 ADO.Net Sqlite，但没有运气。

我从一开始就在做的事情：

1.  启动新项目并通过 NuGet 安装“System.Data.SQLite (x86/x64)”以获得解决方案。
2.  添加`using System.Data.SQLite;`到指令。
3.  编写简单的代码，例如：

    SQLiteConnection sql_sck = new SQLiteConnection("Data Source=test.sqlite;Version=3;New=False;Compress=True;");

一切似乎都很好，VS 识别类名并改变它们的颜色。然而，在运行程序后，在 sql_sck... 行中，引发了异常 - 关于缺少 dll ？

```
An unhandled exception of type 'System.DllNotFoundException' occurred in System.Data.SQLite.dll
Additional information: Could not load DLL 'SQLite.Interop.dll': Could not find specified module. (Exception HRESULT: 0x8007007E) 
```

有什么想法可以让我完成这项工作吗？我做错了什么/缺少任何步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:31:33.110

Visual Studio 将在某个地方创建 SQLite.Interop.DLL。您需要找到该 DLL 并将其复制到与应用程序的可执行文件相同的目录中。

我通常将 Interop DLL 作为参考添加到我的项目中，并将它们标记为复制到输出目录，以确保使用这些项目的其他人不会忘记手动步骤。

# c++ - 对向量进行连续排序的最有效排序算法 >

> ID：14149775
> 
> 赞同：0
> 
> 时间：2013-01-04T01:14:02.977
> 
> 标签：c++, algorithm, real-time

什么是最快的算法来保持

```
vector<vector<double>> 
```

连续“合并”排序能够实时处理更新？

例如，在 T0`vec<vector<double>`为空

在 T1，（实际上`vec<double>`一次只有一个进来）

```
A = 1, 2, 4
B = 1, 3, 4, 5
C = 6, 7 
```

被`vector<vector>`合并排序为，

1 1 2 3 4 4 5 6 7

在 T2

```
C = 0, 4
D = 3, 7 
```

新名单将是

> 0 1 1 2 3 3 4 4 4 5 7

因此，首先我们必须删除 C 的旧值，然后正确“插入”C 的新值。

像这样`AVL_Tree Func(vector<vector<double>> vecvec, vector<double> newVec)`返回树的排序函数似乎是最好的。AVL树？有人可以给我看一个可以工作的 c++ 模板化版本的代码吗？Boost，STL等使用很好。

# javascript - IronJS / Twilio 浏览器软电话

> ID：14149778
> 
> 赞同：3
> 
> 时间：2013-01-04T01:14:17.643
> 
> 标签：javascript, twilio, dynamic-language-runtime, ironjs

我正在创建一个 Fiddler 扩展来简化我在开发过程中与 Twilio 的交互。我即将将它发布到野外，但在我这样做之前我想要一个更多的功能。

我能够返回我的 Twilio 帐户上的各种电话号码，并将它们与所需的各种 URL 一起列出。

我想选择一个号码，然后“点击测试”将拨打所选电话号码。然后，我想通过我的计算机与我的 Twilio 服务进行交互，而不是拿起电话。我应该能够收听语音提示，并在出现提示时通过拨打 1、2、3 等进行交互。

Twilio 在此处提供此 JavaScript 库（[浏览器中的 Twilio ），并在此处通过 Azure （](http://www.twilio.com/docs/client/twilio-js) [Javascript 应用程序中的 Twilio](http://www.windowsazure.com/en-us/develop/java/how-to-guides/twilio-phone-call/)）或此处通过 MVC（[Hello Monkey Client](http://www.twilio.com/docs/quickstart/csharp/client/hello-monkey)）给出示例

所有这些都利用了在客户端创建 Twilio 设备的 Javascript 库。我还不是一个 Javascript 人（但它看起来像是我每一个不断增长的学习这个技术列表中的下一个），但我不得不认为相同的功能可以在 C# 中实现。

我试图在浏览器控件中托管设备，但我并没有深入了解它，并且集成仍然涉及如何将 C# 中的选择项传递给在浏览器中运行的执行 Java 脚本库。

我还研究了 IronJS 通过动态运行时运行 JavaScript，但我不确定这最终是否会起作用。Twilio 库在网页中查找脚本标记，并连接多个事件处理程序。在 IronJS 中运行该库会导致它失败，因为没有网页，而且我的 Java 印章无法破解这部分内容。

我的问题是：这个 Javascript 库不能移植到 C#，并创建一个 Twilio 看到的像 Javascript 软电话一样的完整客户端吗？我认为这不仅对我有帮助，而且对 Win 8 dev 和 Windows Phone 8 Dev 也有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:54:44.790

我不是 C# 开发人员，我相信将 JS 库托管在 WebBrowser 控件中似乎是可行的方法（至少比将库移植到 C# 容易得多）。

根据[MSDN](http://msdn.microsoft.com/en-us/library/a0746166.aspx)，您可以使用[Document](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.document.aspx)属性从您的应用程序中调用 JS 代码。例如，如果您在网页中定义了这个：

```
function test(message) { 
    alert(message); 
} 
```

您可以从您的应用程序中调用它：

```
webBrowser1.Document.InvokeScript("test",
    new String[] { "called from client code" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T22:42:29.257

不幸的是，在 Windows 8 或其他 Windows 桌面应用程序中使用 Twilio 客户端并没有直接的途径。我将传递这个反馈，如果通过 Twilio 为 Windows 8 应用程序提供 VoIP 功能会很棒。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T02:06:57.160

Twilio C# 帮助程序库应该对此有所帮助。

[https://github.com/twilio/twilio-csharp](https://github.com/twilio/twilio-csharp)

有关示例应用程序，请参阅下面的博客文章：

[http://www.twilio.com/blog/2012/02/twilio-for-net-developers-part-5-twilio-client-mvc-and-webmatrix-helper-libraries.html](http://www.twilio.com/blog/2012/02/twilio-for-net-developers-part-5-twilio-client-mvc-and-webmatrix-helper-libraries.html)

您之前还链接到 Twilio Client C# 代码示例：

[http://www.twilio.com/docs/quickstart/csharp/client/hello-monkey](http://www.twilio.com/docs/quickstart/csharp/client/hello-monkey)

可以使用右上角的语言下拉菜单在 C# 中查看所有 Twilio 快速入门。

# php - PHP/MySQL/PDO 库 - 从数据库中分发信息？最有效的方法是什么？

> ID：14149781
> 
> 赞同：1
> 
> 时间：2013-01-04T01:14:54.417
> 
> 标签：php, mysql, pdo

我有一个项目的密钥，我在该项目中尝试测试许可系统（只是为了好玩和学习），我认为我会遇到的一个部分是如何分发密钥。我在数据库中有大约 100 个密钥，我正在尝试找出分发它们的最佳方法。数据库布局如下，

```
ID (Auto Increment) | key 
```

使用 PDO 库，按 ID 按时间顺序排列的最有效方法是什么？但是即使我按时间顺序，当我删除了分发的密钥时，我将如何按时间顺序？或者可能是随机的身份证号码？我不知道如何以最有效的方式分发这些密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:23:07.927

如果我正确理解你的问题...

您可以通过 PDO 尝试此查询：

```
SELECT * FROM `table-name`
ORDER BY `ID` ASC 
```

然后，当您从执行的返回单步执行 while() 循环中的行时，它将按照您所要求的时间顺序排列。

至于丢失 ID，例如如果您删除 ID #10 的键，您的表将在返回的行 ID 中从 9 跳转到 11。添加新密钥时，除非您在插入时明确指定该 ID，否则不会使用 #10。

编辑：从你的问题的措辞来看，听起来你可能会担心你如何为钥匙设置 ID。也许你已经明白这一点，但是由于你有 Auto Increment，当你插入新的 key 时，你的 ID 会自动生成，所以一个新的 key 将被分配一个 ID 为（最后插入的 key 的 ID）+1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:24:06.703

年表不完全是 PDO 的功能，或者就此而言，您使用的任何数据库驱动程序......它更多的是您的架构问题。

通常，任何数据库结构中常用的字段是“时间戳”或“创建”字段，它保存记录在数据库中创建的时间。这些字段可以是 MySQL 数据类型`TIMESTAMP`（在这种情况下，驱动程序将返回自 Unix 纪元以来的秒数），或者`DATETIME`（在这种情况下，大多数驱动程序将尝试返回语言的本地 DateTime 对象，如果存在的话。）即使单调递增的主键意味着排序时一定数量的时间顺序，时间戳字段可以记录在服务器上创建记录的确切时间，以及使用`ON UPDATE CURRENT_TIMESTAMP`. 因此，我建议将其添加到您的架构中。

使用数据库中的此类字段，您始终可以使用以下方式对查询进行排序：

`SORT BY timestamp_field_name ASC`

此外，如果通过“分发”您的意思是某些数据可以通过使用此键作为某种查询参数来公开访问，那么出于您描述的确切原因，我不会使用单调主键，特别是如果这是“许可”概念证明，如果您的意思是 DRM 类型的东西可能应该产生一个复杂的字符串。字段中的哈希时间戳`UNIQUE`或 php`uniqid`函数可以生成可以存储在具有键约束的`VARCHAR`数据库字段中的值。`UNIQUE`这是如果我理解你描述的目标。

# c++ - 0x7FFF 和 32767 的类型有什么区别？

> ID：14149782
> 
> 赞同：4
> 
> 时间：2013-01-04T01:14:56.753
> 
> 标签：c++, c

我想知道值 0x7FFF 和 32767 之间有什么区别。据我所知，它们都应该是整数，唯一的好处是符号方便。它们将占用相同的内存量，并以相同的方式表示，或者还有其他原因选择将数字写成`0x`vs 以 10 为底的数字吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T01:18:34.523

唯一的好处是一些程序员发现在他们的头脑中更容易在基数 16 和二进制之间进行转换。由于每个基数 16 位恰好占据 4 位，因此更容易可视化位的对齐方式。并且以 2 为基数编写非常麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T01:16:20.020

未修饰的十进制整数常量的类型始终是有符号的。当您达到由整数类型的宽度确定的各种边界值时，未修饰的十六进制或八进制常量的类型在有符号和无符号之间交替。

对于修饰为无符号的常量（例如`0xFU`），没有区别。

此外，不可能将 0 表示为十进制文字。

请参阅 C++11 中的表 6 和 C11 中的 6.4.4.1/5。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T01:16:17.290

两者都是整数文字，只是提供了表示相同数字的不同方式。使用一种形式优于另一种形式没有技术优势。

请注意，您也可以使用八进制表示法（通过在值前面加上 0）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T01:30:56.227

0x7FFF 表示法比十进制表示法更清楚潜在的上溢/下溢。

如果您使用 16 位宽的东西，0x7FFF 会提醒您这样一个事实，即如果您以有符号方式使用这些位，那么对于正的有符号值，您将处于这 16 位可以容纳的最大值。加1，你就会溢出。

32 位宽也是如此。它可以容纳的最大值（有符号，正数）是 0x7FFFFFFF。

您可以直接从十六进制表示法中看到这些最大值，而您不能从十进制表示法中看到这些最大值。（除非你碰巧记得 32767 是 16 位的正符号最大值）。

*（注意：如果 16 位保存有符号值，则当二进制补码*用于区分正值和负值时，上述情况为真）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T01:16:15.673

一个是十六进制的——以 16 为底——另一个是十进制的？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T01:16:23.193

这是真的，没有区别。任何差异都将存在于存储值的变量中。 *文字 0x7FFF 和 32767 在各个方面都与编译器相同。*

请参阅[http://www.cplusplus.com/doc/tutorial/constants/](http://www.cplusplus.com/doc/tutorial/constants/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T01:32:23.423

选择将 0x7fff 或 32767 写入源代码只是程序员的选择，因为这些值以相同的方式存储到计算机内存中。

例如：当我需要使用 4bit 而不是经典字节进行操作时，我会觉得使用 0x 表示法更舒服。

如果我需要提取 char 变量的低 4 位，我会这样做

```
res = charvar & 0x0f; 
```

这与以下内容相同：

```
res = charvar & 15; 
```

后者只是不太直观和可读，但操作是相同的

# envdte - 如何使用 EnvDTE 在 Visual Studio 中获取打开的网页列表

> ID：14149785
> 
> 赞同：3
> 
> 时间：2013-01-04T01:16:09.620
> 
> 标签：envdte

作为 NuGet 安装的一部分，我们需要在安装完成时打开一个网页。

我们的要求是：

1.  如果页面尚未在另一个窗口中打开，则在新窗口中打开 Visual Studio 中的网页。

自己打开网页很简单：

```
... DTE.ItemOperations.Navigate(WebPageUri.ToString(), EnvDTE.vsNavigateOptions.vsNavigateOptionsNewWindow); ... 
```

问题一直在寻找一种方法来获取当前打开的网页列表，以便我们可以决定是否需要打开一个页面。

我确信解决方案很简单，并且一直盯着我们看。

我们如何使用 EnvDTE 在 Visual Studio 中获取当前打开的网页列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:58:54.477

下面列出了该问题的解决方案。我怀疑这种方法是否是最佳实践，但它似乎确实有效。

Visual Studio 中的 Web 浏览器窗口具有“EnvDTE.Constants.vsWindowKindWebBrowser”的“ObjectKind”值。“Object”值是 Internet Explorer 浏览器并实现“IWebBrowser2”。尽管“IWebBrowser2”不是.Net，“System.Windows.Forms.WebBrowser”（显然）是“IWebBrowser2”的包装。“System.Windows.Forms.WebBrowser”有一个可以被覆盖的“AttachInterfaces”方法，它允许我们传递窗口对象并让“System.Windows.Forms.WebBrowser”完成繁重的工作。

最终结果是：

```
public class VisualStudioWebBrowser : System.Windows.Forms.WebBrowser
{
    protected VisualStudioWebBrowser(object IWebBrowser2Object)
    {
        this.IWebBrowser2Object = IWebBrowser2Object;
    }

    protected object IWebBrowser2Object { get; set; }

    public static void Evaluate(EnvDTE.Window WindowReference, Action<System.Windows.Forms.WebBrowser> OnEvaluate)
    {
        //Note: Window of EnvDTE.Constants.vsWindowKindWebBrowser type contains an IWebBrowser2 object
        if (VisualStudioWebBrowser.IsWebBrowserWindow(WindowReference))
        {
            using (System.Threading.ManualResetEvent evt = new System.Threading.ManualResetEvent(false))
            {
                System.Threading.Thread STAThread = new System.Threading.Thread(new System.Threading.ParameterizedThreadStart((o) =>
                {
                    try
                    {
                        using (VisualStudioWebBrowser Browser = new VisualStudioWebBrowser(o))
                        {
                            try
                            {
                                OnEvaluate.Invoke((System.Windows.Forms.WebBrowser)Browser);
                            }
                            catch { }
                        }
                    }
                    catch { }
                    evt.Set();
                }));
                STAThread.SetApartmentState(System.Threading.ApartmentState.STA);
                STAThread.Start(WindowReference.Object);
                evt.WaitOne();
            }
        }
    }
    public static bool IsWebBrowserWindow(EnvDTE.Window WindowReference)
    {
        return (WindowReference != null && WindowReference.ObjectKind.Equals(EnvDTE.Constants.vsWindowKindWebBrowser, StringComparison.InvariantCultureIgnoreCase));
    }
    public static IEnumerable<EnvDTE.Window> GetWebBrowserWindows(EnvDTE.DTE EnvDTEReference)
    {
        List<EnvDTE.Window> BrowserWindows = new List<EnvDTE.Window>();
        foreach (EnvDTE.Window WindowReference in EnvDTEReference.Windows)
        {
            if (VisualStudioWebBrowser.IsWebBrowserWindow(WindowReference) == true)
            {
                BrowserWindows.Add(WindowReference);
            }
        }
        return BrowserWindows;
    }
    public static Uri GetWebBrowserWindowUrl(EnvDTE.Window WindowReference)
    {
        Uri BrowserUrl = new Uri("", UriKind.RelativeOrAbsolute);
        VisualStudioWebBrowser.Evaluate(WindowReference, new Action<System.Windows.Forms.WebBrowser>((wb) =>
        {
            BrowserUrl = wb.Url;
        }));
        return BrowserUrl;
    }
    public static IEnumerable<Uri> GetWebBrowserWindowUrls(EnvDTE.DTE EnvDTEReference)
    {
        List<Uri> BrowserUrls = new List<Uri>();

        foreach (EnvDTE.Window BrowserWindow in VisualStudioWebBrowser.GetWebBrowserWindows(EnvDTEReference))
        {
            try
            {
                Uri BrowserUrl = VisualStudioWebBrowser.GetWebBrowserWindowUrl(BrowserWindow);
                if (String.IsNullOrWhiteSpace(BrowserUrl.LocalPath) == false)
                {
                    BrowserUrls.Add(BrowserUrl);
                }
            }
            catch { }
        }

        return BrowserUrls;
    }

    protected override void AttachInterfaces(object nativeActiveXObject)
    {
        base.AttachInterfaces(this.IWebBrowser2Object);
        //base.AttachInterfaces(nativeActiveXObject);
    }
    protected override void DetachInterfaces()
    {
        base.DetachInterfaces();
        this.IWebBrowser2Object = null;
    }
} 
```

然后通过以下方式找到打开的网页列表：

```
IEnumerable<Uri> Urls = VisualStudioWebBrowser.GetWebBrowserWindowUrls(EnvDTEReference); 
```

# javascript - 有什么方法可以确定变量是否包含 MooTools 类实例

> ID：14149792
> 
> 赞同：2
> 
> 时间：2013-01-04T01:16:40.050
> 
> 标签：javascript, class, mootools

我想知道是否有办法确定变量是否包含 MooTools 类实例。

下面是 jsFiddle 中的示例：http: [//jsfiddle.net/kGnaa/](http://jsfiddle.net/kGnaa/)

```
var a = new Class();
var aInstance = new a();
document.write('#1 instanceOf(aInstance,a) = ' + instanceOf(aInstance,a) + '<br>') // aInstance is instance of a. Returns true.
document.write('#2 instanceOf(aInstance,Class) = ' + instanceOf(aInstance,Class) + '<br>') // aInstance isn't instance of Class, so returns false. 
```

有没有办法让#2发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:26:00.410

我想我明白了。

```
var Foo = new Class({});
var FooInstance = new Foo();
alert(typeOf(FooInstance.$constructor)); // alerts 'class' 
```

# asp.net-mvc - 在mvc控制器上注入属性

> ID：14149793
> 
> 赞同：0
> 
> 时间：2013-01-04T01:16:44.503
> 
> 标签：asp.net-mvc, dependency-injection, inversion-of-control, spring.net

我正在使用 mvc4 Web 应用程序并使用 spring.net v2 M2 进行依赖注入。

我想知道是否可以注入我的控制器、过滤器/属性到控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:45:30.827

与**Asp.Net MVC3**相同：注册一个自定义的 spring 感知`FilterAttributeFilterProvider`派生您的应用程序，`SpringMvcApplication`而不是`HttpApplication`查看神奇的工作。示例实现。未准备好生产：

```
public class FilterProvider : FilterAttributeFilterProvider, IApplicationContextAware
{
    public IApplicationContext ApplicationContext
    {
        set;
        get;
    }

    public override IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        var filters = base.GetFilters(controllerContext, actionDescriptor);
        foreach (var filter in filters)
        {
            ApplicationContext.ConfigureObject(filter.Instance, filter.Instance.GetType().Name);
            yield return filter;
        }
    }
} 
```

# javascript - 从仅显示一次的数组中选择图像

> ID：14149795
> 
> 赞同：1
> 
> 时间：2013-01-04T01:17:04.030
> 
> 标签：javascript, javascript-events

我正在尝试向用户展示图片，他们可以选择一张并将其添加到表格中。这很好，但是当我尝试将不同的图像添加到另一个表节点时，会再次生成完整列表。基本上，我想要一个图像选择器。我知道每次点击时 img.onclick 都会构建图像列表，但我无法理解它。我试过了

```
var element = document.getElementById("menu");
element.parentNode.removeChild(element); 
```

每次调用事件时尝试删除附加的 div 的方法，但它对我不起作用。一直在努力解决这个问题，所以所有的帮助都非常感激。

```
function addImage(col) {
    var img = new Image();
    img.src = "../www/images/TEST.png";
    col.appendChild(img);
    img.onclick = function () {
        var myImages = new Array();
        myImages[0] = "../www/images/TEST3.png";
        myImages[1] = "../www/images/TEST2.png";
        myImages[2] = "../www/images/TEST4.png";

        for (var i = 0; i < myImages.length; i++) {
            var allImages = new Image();
            allImages.src = myImages[i];

            var my_div = document.createElement("div");
            my_div.id = "showPics";
            document.body.appendChild(my_div);
            newList = document.createElement("ul");
            newList.appendChild(allImages);
            my_div.appendChild(newList);
            my_div.style.display = 'block';

            allImages.onclick = function (e) {
                img.src = e.target.src;
                my_div.style.display = 'none';
            };
        }
    };
}
for (r = 0; r < howOften; r++) {
    row = table.insertRow(-1);
    for (c = 0; c < numDays; c++) {
        col = row.insertCell(-1);
        addImage(col);
    }
}
document.getElementById('holdTable').appendChild(table); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:58:42.393

我在这里创建了代码的更新版本：http: [//jsfiddle.net/NyxCu/15/](http://jsfiddle.net/NyxCu/15/)这可能会做你想做的事。

您需要学习 JavaScript 样式的一些细节。但让我们先回顾一下问题：

在这些行中：

```
 var my_div = document.createElement("div");
        my_div.id = "showPics";
        document.body.appendChild(my_div); 
```

您正在多次创建具有相同 id 的 div。但是 id 在您的文档中应该是唯一的。浏览器不会抱怨它，但如果你`getElementById`稍后再做，你会得到一个不需要的 div。

在您发送的 jsfiddle 链接 (http://jsfiddle.net/Inkers/NyxCu/) 中，代码在`getElementById`几行之后执行：

```
 my_div = document.getElementById("showPics");
            my_div.appendChild(newList); 
```

这意味着每次点击第一张图片时，第二张图片总是添加到同一个 div 中（这就是为什么图片会一遍又一遍地复制）。

可能你做了那个hack，因为`onclick`事件处理程序设置在循环上：

```
 allImages.onclick = function (e) {
            img.src = e.target.src;
            my_div.style.display = 'none';
        }; 
```

没有按预期工作。问题是**JavaScript 变量范围仅适用于函数级别**。

代表着：

```
 for (var i = 0; i < length; i++) {
         var item = create(i);
     } 
```

相当于：

```
 var i, item;
    for (i = 0; i < length; i++) {
         item = create(i);
    } 
```

这个很重要。因为当你创建一个事件处理程序时，像这样：

```
 var i, item;
    for (i = 0; i < length; i++) {
         item = create(i);
         something.onclick = function () {
               use(item);
         }
    } 
```

`item`不是你所期望的。分配给的函数`onclick`是一个引用父环境的闭包：父函数不是 for 循环的范围。这意味着`item`永远等于`create(length - 1);`。

这就是为什么在代码中你得到了意想不到的`my_div`。

代码中的另一个问题（我没有更改，在链接的重写代码中）是第二个图像列表反复生成（检查 HTML 以查看）。

总结一下：

*   元素的 ID 应该是唯一的。重复的 ids 不会产生错误，但 find by id 会给你带来意想不到的结果。

*   请注意 JavaScript 范围的差异和闭包。一旦你学会它，就很统一了：JavaScript 的变量作用域总是在函数级别。

一些技巧：

*   学习一点 jQuery，对 DOM 操作有很大帮助。

*   避免`new Array()`，使用数组文字更短且更具可读性。

*   看看ECMAScript`forEach`和. 它们将帮助您编写具有我喜欢的更易于阅读的函数式风格的 JavaScript（它们在旧版本的 Explorer 中不可用，但您可以使用 shim 或 Underscore.js）。`map``filter`

# elasticsearch - elasticsearch有什么方法可以获取部分搜索结果？

> ID：14149796
> 
> 赞同：0
> 
> 时间：2013-01-04T01:17:57.123
> 
> 标签：elasticsearch

我想知道是否有某种方法可以在弹性搜索中获得部分结果？例如，有 100 个搜索结果，想要从 50 到 70 得到 20 个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:24:24.260

您可以在[URI](http://www.elasticsearch.org/guide/reference/api/search/uri-request.html)或搜索[请求](http://www.elasticsearch.org/guide/reference/api/search/from-size.html)`from`中使用和`size`字段。

# algorithm - 创建歌曲列表算法

> ID：14149797
> 
> 赞同：2
> 
> 时间：2013-01-04T01:18:06.727
> 
> 标签：algorithm, traveling-salesman, knapsack-problem

我想创建一个程序，为我的乐队创建随机设置列表；但是，我不希望这些集合是完全随机的。有的歌曲最好作为开始，有的歌曲最好作为结尾。有些歌曲需要更换乐器，所以我想限制开关的数量。从一首快歌到一首慢歌通常不是一个好主意，但最好是从慢到快。我们不能连续玩 180 分钟，所以我想把演出分成三组，每组 50 分钟。

我可以将歌曲的关系想象为一个完全连接的有向图，每首歌曲作为一个节点，它们之间的连接是一个分数，表示一首歌曲在前一首歌曲之后的好坏程度，这适用于旅行推销员。但是，我不想要最短路径，我想要 50 分钟集合内的最佳歌曲过渡（每首歌曲都有一个时长，并且集合列表中所有歌曲的总时长不得超过 50 分钟），这听起来更像一个背包问题。

有人可以帮我吗？我应该研究什么算法？

编辑（更多信息）：

我已经想到了一个函数来对两首歌曲 f(s,t) 之间的过渡进行评分，它产生一个介于 0 和 100 之间的整数值，其中 100 是更好的过渡。我还考虑为节目的开始（“START”）、节目的结束（“END”）和中间的中断（“BREAK 1”、“BREAK 2”等）创建节点。前面提到的函数可以对从“START”到另一首歌曲或歌曲到“BREAK 1”的过渡进行评分，以表示打开一组或​​关闭一组给定的歌曲。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T05:09:54.580

TSP 可能不是这个问题的一个很好的描述。原因是您实际上并没有在寻找最佳套装列表，因为您只是在寻找一些好的套装列表。

话虽如此，您的问题让我想起了很多使用粒子过滤器来尝试定位某物的位置。

稍微调整一下该方法会得到如下结果：

1.  使用加权概率随机生成 100 个集合列表。手工挑选一些可能​​会很有用。
2.  计算每个集合列表的分数，然后将其用作权重，随机选择 10 个集合列表。
3.  对于这些集合列表中的每一个，使用加权概率随机生成 10 首歌曲。例如，您可以使用歌曲的分数作为权重来确定是否应该更改它（较低的相对分数意味着歌曲更有可能被更改）。
4.  根据需要重复步骤二和三。
5.  选择当前最好的，或随机选择当前 100 个中的一个。

我使用了 100 个示例，但您可以使用几乎任何可能低于一百万左右的样本量，除非您有很多时间让它运行。请注意您选择了多少 VS 从选定的那些中生成了多少。选择的数字乘以生成的数字应该等于您最初开始使用的数字。

编辑：

不确定您是否熟悉加权概率，所以我可能应该总结一下，因为它对算法相当重要。假设您有歌曲 AC，权重分别为 1-3。处理加权概率的一种方法不是从 [A,B,C]（未加权）中随机选择 100 个元素，而是从 [A,B,B,C,C,C] 中随机选择 100 个元素。由于 C 的权重是 A 的 3 倍，因此它被选中的可能性是 3 倍。

理想情况下，如果您使用该方法，您应该将分数保持为整数，并且它们应该相对较低（以便从中选择元素的列表的最大长度不会太高）。如果您不介意精度损失（在这种情况下可能没问题），您还可以标准化概率并使用它创建一个列表，该列表在其大小方面将更加可预测。这可以通过将权重相加，然后将每个权重除以总和，然后将所有结果乘以一个数字来完成。因此，例如，如果您的权重为 [1000,10000,100000] 而不是 1-3，则将每个权重除以总和 (111000) 得出大约 [0.009,0.090,0.901]，乘以 100（给出列表大小约 100) 并四舍五入到最接近的整数给出： [1,9, 90] 因此，您从中随机选择元素的列表应恰好包含 1 个 A、9 个 B 和 90 个 C。有可能只选择 A 进行重新采样（步骤 3），但这是不太可能的，尽管如果发生它会出现问题。在这种情况下，您可能必须重新运行该程序。有一些方法可以解决这个问题，但最终会失去算法的很多随机性。

哦，再加上 3) 更改歌曲时，计算可以替换该歌曲的每首歌曲的分数。删除所有权重较低的歌曲或可能略低于其权重的一部分*，然后使用分数作为权重并随机选择将替换它的新歌曲（如果分数相当高，这实际上可能是同一首歌曲） .

*这是可选的，但如果您认为它可能有用，那么实施它可能不是一个坏主意，因为您可以将其设置为低于 0.0 * 重量。

# scala - Akka SLF4J logback 配置和使用

> ID：14149798
> 
> 赞同：27
> 
> 时间：2013-01-04T01:18:12.097
> 
> 标签：scala, akka, slf4j, logback

我已完成以下步骤来尝试为我的 akka 应用程序配置日志记录：

*   创建了一个 application.conf 文件并将其放在 src/main/resources 中。看起来像：

    ```
     akka { 
          event-handlers = ["akka.event.slf4j.Slf4jEventHandler"] 
          loglevel = "INFO"
        } 
    ```

*   创建了一个 logback.xml 文件并将其放在 src/main/resources 中。看起来像：

    ```
    <configuration>

      <appender name="FILE" class="ch.qos.logback.core.fileappender">
        <File>./logs/akka.log</File>
        <encoder>
          <pattern>%d{HH:mm:ss.SSS} [%-5level] %msg%n</pattern>
        </encoder>
      </appender>

      <root level="info">
        <appender-ref ref="FILE" />
      </root>

    </configuration> 
    ```

*   将以下内容添加到我的 .scala sbt 构建文件中：

    ```
     libraryDependencies += "com.typesafe.akka" % "akka-slf4j" % "2.0.3", 
        libraryDependencies += "ch.qos.logback" % "logback-classic" % "1.0.9"
        lazy val logback = "ch.qos.logback" % "logback-classic" % "1.0.9" 
    ```

*   尝试此代码记录：

    ```
     import akka.event.Logging

        val log = Logging(context.system, this)
        log.info("...") 
    ```

我得到的只是标准输出日志，没有使用日志创建日志文件。

我错过了一步吗？还是配置错误？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-13T16:47:18.680

With this arrangement I can use an akka.event.Logging, no need to specify SLF4J instance.

(tested 13 Dec 2013)

I get console logging and logging to a file. To prove this is not built-in logger I changed to include %X{akkaTimestamp} as explained here:

```
http://doc.akka.io/docs/akka/snapshot/scala/logging.html 
```

build.sbt

```
library dependencies: (Akka version 2.2.3)

...
"com.typesafe.akka" %% "akka-slf4j" % "2.2.3"
"ch.qos.logback" % "logback-classic" % "1.0.9"
... 
```

src/main/resources/application.conf

```
akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  loglevel = "INFO"
} 
```

src/main/resources/logback.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <target>System.out</target>
        <encoder>
            <pattern>%X{akkaTimestamp} %-5level[%thread] %logger{0} - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>log/akka.log</file>
        <append>false</append>
        <encoder>
            <pattern>%date{yyyy-MM-dd} %X{akkaTimestamp} %-5level[%thread] %logger{1} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="akka" level="INFO" />

    <root level="DEBUG">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>

</configuration> 
```

This arrangement works when I use an ActorLogging mixin and also create a Logging directly:

```
import akka.event.Logging

val log = Logging(context.system, classOf[NameOfYourActor])

log.info("good luck!") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-30T08:24:31.070

我也遇到了这个问题，但就我而言，这不是类路径的问题。

我用 com.typesafe.scalalogging.slf4j.Logging 替换了 akka.event.Logging，它就像一个魅力！

我的 logback.xml（在 main/resource 下）：

```
<configuration>
  <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>logs/filename.log</file>
    <encoder>
      <pattern>%date %level %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
      <maxIndex>10</maxIndex>
      <FileNamePattern>logs/filename.log.%i.gz</FileNamePattern>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <maxFileSize>20MB</maxFileSize>
    </triggeringPolicy>
  </appender>
  <root level="info">
    <appender-ref ref="FILE" />
  </root>
</configuration> 
```

我的 pom.xml：

```
<dependency>
  <groupId>com.typesafe</groupId>
  <artifactId>scalalogging-slf4j_2.10</artifactId>
  <version>1.0.1</version>
</dependency>
<dependency>
  <groupId>ch.qos.logback</groupId>
  <artifactId>logback-classic</artifactId>
  <version>1.0.13</version>
</dependency> 
```

并在代码中：

```
import com.typesafe.scalalogging.slf4j.Logging

class LoggingService extends Actor with Logging {
  // use logger.info() etc.
} 
```

（没有使用application.conf）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-06T10:42:07.377

尝试使用这个 application.conf：

```
akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  loglevel = "DEBUG"
  logging-filter = "akka.event.slf4j.Slf4jLoggingFilter"
} 
```

我还注意到您可能在文件附加程序的 logback 配置中使用了错误的类名。你有`<appender name="FILE" class="ch.qos.logback.core. fileappender">`，但应该是`<appender name="FILE" class="ch.qos.logback.core.FileAppender">`。

另一个问题可能是文件的路径。尝试使用绝对文件路径而不是相对路径。`<file>/absolute/path/testFile.log</file>`

您也可以尝试将 logback 版本更改为`1.2.3`. 以下是有关配置 sl4j 的 akka 文档：[链接](https://doc.akka.io/docs/akka/2.5/logging.html#slf4j)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T10:06:26.243

我要在您的设置中更改的唯一一件事是添加[weiglewilczek slf4j 适配器](https://github.com/weiglewilczek/slf4s)。

我的以下设置工作得很好：

```
akka {
  event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
  loglevel = DEBUG
} 
```

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>log/app.log</file>

        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>log/app.%d{dd-MM-yyyy}.log</fileNamePattern>
            <maxHistory>60</maxHistory>
        </rollingPolicy>

        <encoder>
            <pattern>%d [%thread] [%class] %5p - %m%n</pattern>
        </encoder>
    </appender>

    <root level="INFO">
        <appender-ref ref="FILE"/>
    </root>
</configuration> 
```

* * *

```
trait test extends com.weiglewilczek.slf4s.Logging {
  def logIt() {
    logger.info("this logs fine")
  }
} 
```

# ios - 使用 glVertexAttribPointer 在 OpenGL 2.0 中使用着色器绘制模型

> ID：14149799
> 
> 赞同：1
> 
> 时间：2013-01-04T01:18:19.777
> 
> 标签：ios, opengl-es-2.0, vertex-shader, vertex-array

我已经基于使用 OpenGLES 2.0 并且还使用着色器的默认模板松散地敲开了面向对象的 iOS 应用程序，但我正在尝试加载一个我曾经调用它的模型：

```
#import "./sphere_model.h"
glVertexPointer(3, GL_FLOAT, 0, sphere_modelVerts);
glNormalPointer(GL_FLOAT, 0, sphere_modelNormals);
glDrawArrays(GL_TRIANGLES, 0, sphere_modelNumVerts); 
```

我之所以使用上面的代码是因为我将我`.obj`的文件转换为一个可以包含我需要定义的所有数组的文件（参见[obj2opengl](http://heikobehrens.net/2009/08/27/obj2opengl/)）。现在，我不是 100%，但我在某个`glVertexPointer`已弃用的地方读到了，我正在努力让它在我的演示应用程序中工作。目前我正在绘制这个简单的立方体：

![立方体！](../Images/ba4f405855de94e4d949163faf5216c3.png)

我取而代之的是使用 OpenGL 着色器代码的模板，使用`glVertexAttribPointer`的顶点数组略有不同，因为它在同一个数组中包含法线：

```
GLfloat gCubeVertexData[216] =
{
    // Data layout for each line below is:
    // positionX, positionY, positionZ,     normalX, normalY, normalZ,
    0.5f, -0.5f, -0.5f,        1.0f, 0.0f, 0.0f,
    0.5f, 0.5f, -0.5f,         1.0f, 0.0f, 0.0f,
    0.5f, -0.5f, 0.5f,         1.0f, 0.0f, 0.0f,
    0.5f, -0.5f, 0.5f,         1.0f, 0.0f, 0.0f,
    0.5f, 0.5f, -0.5f,          1.0f, 0.0f, 0.0f,
    0.5f, 0.5f, 0.5f,         1.0f, 0.0f, 0.0f,
    ....
}; 
```

我使用此代码绘制立方体（加载着色器文件后）：

```
glBufferData(GL_ARRAY_BUFFER, sizeof(gCubeVertexData), gCubeVertexData, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(12));

glUseProgram(GetProgram());

glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

glDrawArrays(GL_TRIANGLES, 0, 36);

glDisableVertexAttribArray(GLKVertexAttribNormal);
glDisableVertexAttribArray(GLKVertexAttribPosition);

glBindVertexArrayOES(0); 
```

现在我的问题是，使用 Open GLES 2.0，是否可以在`obj2opengl`我之前提到的使用`glVertexAttribPointer`而不是`glVertexPointer`仍然使用着色器时加载定义的顶点？

以下是其中一个模型文件的一些示例：

```
unsigned int sphere_modelNumVerts = 864;

float sphere_modelVerts [] = {
    -1.93077099209747e-18, 0.49025, 0.098,
    0.098, 0.49025, -1.78225014655151e-18,
    -1.93077099209747e-18, 0.5, -1.78225014655151e-18,
    -1.93077099209747e-18, 0.44725, 0.2235,
    0.11775, 0.4715, 0.11775,
    -1.93077099209747e-18, 0.49025, 0.098,
    ...
}

float sphere_modelNormals [] = {
    0, 0.980579906452681, 0.196119981290155,
    0.196119981290155, 0.980579906452681, 0,
    0, 1, 0,
    0, 0.894429190989163, 0.447209595499104,
    ...
}

float sphere_modelTexCoords [] = {
    0.75000, 0.0628300000000001,
    1, 0.0628300000000001,
    0.87500, 0,
    0.75000, 0.14758,
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:15:48.930

使用数组结构。绘制立方体的代码示例使用交错的顶点数据。它也被称为结构数组。这是[推荐的布局](http://developer.apple.com/library/ios/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html#//apple_ref/doc/uid/TP40008793-CH107-SW10)。

要支持您的数据格式，只需为每个属性（sphere_modelVerts、sphere_modelNormals ...）创建单独的缓冲区并定义没有偏移的属性。

# android - 修改 libusb 以接受文件描述符

> ID：14149801
> 
> 赞同：4
> 
> 时间：2013-01-04T01:18:35.013
> 
> 标签：android, android-ndk, usb, libusb, libusb-1.0

我修改libusb1.0打开函数如下：

```
static int op_open2(struct libusb_device_handle *handle, int fd) {
    struct linux_device_handle_priv *hpriv = _device_handle_priv(handle);

    hpriv->fd = fd;

    return usbi_add_pollfd(HANDLE_CTX(handle), hpriv->fd, POLLOUT);
} 
```

其中 fd 是通过[android.hardware.usb.UsbDeviceConnection.html#getFileDescriptor()获得的](http://developer.android.com/reference/android/hardware/usb/UsbDeviceConnection.html#getFileDescriptor%28%29)

```
final UsbDeviceConnection connection = manager.openDevice(device); 
return connection.getFileDescriptor(); 
```

不幸的是，当我打电话时，我不断收到错误消息

```
static int op_claim_interface(struct libusb_device_handle *handle, int iface)
{
    int fd = _device_handle_priv(handle)->fd;

    int r = ioctl(fd, IOCTL_USBFS_CLAIMINTF, &iface);

    if (r) {
        if (errno == ENOENT)
            return LIBUSB_ERROR_NOT_FOUND;
        else if (errno == EBUSY)
            return LIBUSB_ERROR_BUSY;
        else if (errno == ENODEV)
            return LIBUSB_ERROR_NO_DEVICE;

        usbi_err(HANDLE_CTX(handle),
            "claim interface failed, error %d errno %d", r, errno);
        return LIBUSB_ERROR_OTHER;
    }
    return 0;
} 
```

**声明接口失败，错误-1 errno 9**

翻译为“错误的文件号”。我从 Java 得到的文件描述符是一个正整数！

唯一的其他小细节是我的本机代码作为一个单独的二进制文件运行，该二进制文件由 Java ProcessBuilder 生成。但是它们共享相同的 uid，所以我认为我从 Java 获得的 USB 权限仍应适用于 libusb。

我不需要独立于平台，所以任何黑客都可以完成这项工作:)

任何想法将不胜感激！

附加信息！我从**lsof**得到的输出是（缩短以强调其中最有趣的部分）

```
my.activity 13374     u0_a62  exe       ???                ???       ???        ??? /system/bin/app_process
my.activity 13374     u0_a62    0       ???                ???       ???        ??? /dev/null
my.activity 13374     u0_a62    1       ???                ???       ???        ??? /dev/null
my.activity 13374     u0_a62    2       ???                ???       ???        ??? /dev/null
my.activity 13374     u0_a62    3       ???                ???       ???        ??? /dev/log/main
my.activity 13374     u0_a62    4       ???                ???       ???        ??? /dev/log/radio
my.activity 13374     u0_a62    5       ???                ???       ???        ??? /dev/log/events
my.activity 13374     u0_a62    6       ???                ???       ???        ??? /dev/log/system
my.activity 13374     u0_a62    7       ???                ???       ???        ??? /system/framework/core.jar
my.activity 13374     u0_a62    8       ???                ???       ???        ??? /system/framework/core-junit.jar
my.activity 13374     u0_a62    9       ???                ???       ???        ??? /dev/__properties__ (deleted)
...
my.activity 13374     u0_a62   44       ???                ???       ???        ??? /dev/bus/usb/002/002
...    
my.activity 13374     u0_a62   51       ???                ???       ???        ??? pipe:[51015]
my.activity 13374     u0_a62   53       ???                ???       ???        ??? pipe:[51016]
...

my_exe   13546     u0_a62  exe       ???                ???       ???        ??? /data/data/my.activity/files/my_exe
my_exe   13546     u0_a62    0       ???                ???       ???        ??? pipe:[51015]
my_exe   13546     u0_a62    1       ???                ???       ???        ??? pipe:[51016]
my_exe   13546     u0_a62    2       ???                ???       ???        ??? pipe:[51016]
my_exe   13546     u0_a62    3       ???                ???       ???        ??? /dev/log/main
my_exe   13546     u0_a62    4       ???                ???       ???        ??? /dev/log/radio
my_exe   13546     u0_a62    5       ???                ???       ???        ??? /dev/log/events
my_exe   13546     u0_a62    6       ???                ???       ???        ??? /dev/log/system
my_exe   13546     u0_a62    9       ???                ???       ???        ??? /dev/__properties__ (deleted)
my_exe   13546     u0_a62  mem       ???              b3:09         0     302530 /data/data/my.activity/files/my_exe
my_exe   13546     u0_a62  mem       ???              b3:09     36864     302530 /data/data/my.activity/files/my_exe
my_exe   13546     u0_a62  mem       ???              b3:09     40960     302530 /data/data/my.activity/files/my_exe
my_exe   13546     u0_a62  mem       ???              b3:03         0        200 /system/bin/linker
my_exe   13546     u0_a62  mem       ???              b3:03     57344        200 /system/bin/linker
my_exe   13546     u0_a62  mem       ???              b3:03     61440        200 /system/bin/linker 
```

这让我觉得我传递给 my_exe 的文件描述符 44 实际上不是继承的！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:34:58.370

原来，文件描述符没有被进程继承。如果使用 JNI 一切都应该没问题，但如果您想与第三方应用程序交互，则需要将文件描述符传输到第三方应用程序。

我的解决方案是[使用 UNIX 套接字](http://infohost.nmt.edu/~eweiss/222_book/222_book/0201433079/ch17lev1sec4.html)通过 JNI 传输 fd，它成功了！

附言

我在 GNU 许可下发布了该项目 - [https://github.com/martinmarinov/rtl_tcp_andro-](https://github.com/martinmarinov/rtl_tcp_andro-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:44:32.573

文件句柄是进程私有的。保证将它们按原样传递给不同的进程不会在任何风格的 *nix 上工作。

Android 的 Binder/Parcel IPC 接口可以编组文件描述符。

或者您可以继承句柄 - 如果在生成进程时它已经打开，则句柄在生成的进程中也将有效。

# jquery - stage.toJSON() 在 html5 和 kineticJS 中加载

> ID：14149812
> 
> 赞同：-1
> 
> 时间：2013-01-04T01:19:46.170
> 
> 标签：jquery, html, kineticjs

```
$("#show").click(function(){
    var stage = Kinetic.Node.create(json, 'container2');

    var ball = new Image();
    var cone = new Image();
    var tshirt = new Image();
    ball.onload = function() {
        stage.get('.ball').apply('setImage', ball);
        stage.get('.cone').apply('setImage', cone);
        stage.get('.tshirt').apply('setImage', tshirt);
        stage.draw();
    };
    ball.src = 'images/sport_soccer.png';
    cone.src = 'images/cone.png';
    tshirt.src = 'images/school_events.png';
}); 
```

显示按钮在新的 div 中加载舞台，我加载它很好，但如果我在舞台上有三张图像，它会在新舞台上加载三遍，依此类推

当我使用

```
ball.onload = function() {
    stage.get('.ball').apply('setImage', ball);
    stage.draw();
};

tshirt.onload = function() {
    stage.get('.tshirt').apply('setImage', tshirt);
    stage.draw();
};

cone.onload = function() {
    stage.get('.cone').apply('setImage', cone);
    stage.draw();
}; 
```

这里同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:34:06.743

不要在节目事件中创建点击项目。在页面加载时创建您的动力学对象，然后使用显示按钮使舞台等可见。这避免了多次点击的重复。

# jaxb - 将 MOXy 与私有 XmlAdapters 一起使用？

> ID：14149813
> 
> 赞同：1
> 
> 时间：2013-01-04T01:20:03.157
> 
> 标签：jaxb, eclipselink, moxy

我以前使用 Sun 的 JAXB RI，但遇到了一个错误，我无法使用自定义编组器来编组为空字符串。

我现在已切换到 MOXy 以避免该问题，但我发现，至少开箱即用的 MOXy 不处理私有 XmlAdapters。相反，它会引发 IllegalAccessException。有关复制此内容的示例代码，请参见下文。

有什么办法可以说服 MOXy 使用私有 XmlAdapters，还是我坚持使用公共的？我当然已经通读了文档并尝试向 Google 寻求解决方案，但没有任何反应。

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlJavaTypeAdapter(StringField.StringFieldAdapter.class)
public class StringField {

    private static final long serialVersionUID = 1L;

    @XmlValue
    private String value;

    public boolean isSet() {
        return value != null;
    }

    public void reset() {
        value = null;
    }

    public String get() {
        return value;
    }

    public void set(String value) {
        this.value = value;
    }

    // N.B - 'non-public' class works with RI, but not with MOXy
    private static class StringFieldAdapter extends XmlAdapter<String, StringField> {

        @Override
        public StringField unmarshal(String v) throws Exception {

            StringField field = new StringField();

            if (v != null) {
                field.set(v);
            }

            return field;
        }

        @Override
        public String marshal(StringField v) throws Exception {

            if (v != null && v.isSet()) {
                return v.get();
            }
            else {
                return null; // Switched to MOXy because this doesn't work in the RI
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:25:19.860

我已经能够重现您看到的错误。您可以使用以下错误跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/397445](http://bugs.eclipse.org/397445)

**解决方法**

作为一种解决方法，您可以将`StringFieldAdapter`课程公开。

```
public static class StringFieldAdapter extends XmlAdapter<String, StringField> { 
```

# c - C中的静态函数

> ID：14149814
> 
> 赞同：4
> 
> 时间：2013-01-04T01:20:14.880
> 
> 标签：c, function, static

我有一个由 *.h 文件和 *.c 文件组成的软件模块。变量和函数声明位于 *.h 文件中，而函数定义位于 *.c 文件中。模块内的两个函数是辅助函数，不打算在模块外使用。

向模块用户明确这一意图的最佳方法是什么？

我尝试声明函数`static`，但在 *.h 文件中这样做会导致 GCC 编译器警告这些函数“声明为静态但从未定义”。即使 *.c 文件使用`#include`指令包含 *.h 文件，如何将 *.h 和 *.c 文件视为不同的翻译单元？

对于这个问题，是否有不涉及将要`static`在 *.c 文件中进行的函数声明及其定义的解决方案？虽然这个解决方案确实有效，但它打破了我认为将声明保存在头文件中并将定义保存在实现文件中的良好做法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T01:22:12.190

> *.h 和 *.c 文件如何被视为不同的翻译单元，即使 *.c 文件使用 #include 指令包含 *.h 文件？

标头通常也包含在其他源文件中。这就是警告的原因。

如果你编译包括头文件在内的其他文件，你确实有一个未定义的函数声明。

好的做法是在定义它们的源文件中声明静态函数，因为这是它们可见的唯一文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T01:23:21.333

`static`声明不应出现在头文件中（除了`inline`那些，我现在将忽略它）。如果你想要一个只出现在模块内部的函数，根本不要把它放在`.h`文件中。该`.h`文件供外部使用。将静态函数放入`.c`文件中。请注意，如果需要，您仍然可以转发声明该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-09T22:25:49.060

在定义它们的源文件中声明静态函数（请同时提供原型），因为这是它们可见的唯一文件。

重复：[函数声明为静态但从未定义](https://stackoverflow.com/questions/15681442/function-declared-static-but-never-defined)

# visual-studio-2012 - 为什么 DOM Explorer 在 VS2012 中显示为灰色？

> ID：14149816
> 
> 赞同：4
> 
> 时间：2013-01-04T01:20:26.520
> 
> 标签：visual-studio-2012, visual-studio-debugging

每当我尝试为 Windows 商店调试 javascript 应用程序时，DOM 资源管理器完全灰显（例如，“选择元素”选项灰显，当我处于调试模式时，在我的应用程序中按 control-b 没有任何作用）。

我尝试了以下方法无济于事：

*   一个全新的项目，里面什么都没有
*   以管理员身份运行 VS
*   将我的所有设置重置为 VS 中的默认 Web 开发人员设置

有任何想法吗？

另外，我正在运行 Windows 8 x64。带有 SP1 更新的 VS2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:18:29.533

转到 DEBUG/Properties.../，在`Debugger Type`选择`Script Only`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T11:47:41.393

此外，应该注意的是，没有将调试器设置为`script only`不会禁用`refresh windows app`但会阻止它做任何事情......

# android - 如果电子邮件已在 Android 中发送，则通知应用程序

> ID：14149817
> 
> 赞同：0
> 
> 时间：2013-01-04T01:20:32.377
> 
> 标签：android, email

我正在使用此处提供的代码发送带有附件的电子邮件：[https ://stackoverflow.com/a/4918531/1594522](https://stackoverflow.com/a/4918531/1594522)

发送工作正常。现在，我想在电子邮件发送完成后通知我的应用程序。有没有办法做到这一点？

先感谢您！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:39:55.990

调用 startActivityForResult 而不是 startActivity，然后您可以实现自己的 onActivityResult 方法，该方法将在电子邮件活动完成时被调用。

# jquery - 干燥 jquery 函数

> ID：14149824
> 
> 赞同：1
> 
> 时间：2013-01-04T01:21:55.703
> 
> 标签：jquery, dry

我有一个表单，其中包含许多按主题分组的选择输入。我对每个组都有一个主选择，允许用户将组中的所有选择设置为主值（等级是一种提供等级 1-8 的方法）。

我怎么能把它弄干？

# 形式

```
<label>Change all to:</label>
<%= select_tag "section_one", options_for_select(gradescales), :id => "section_one_master" %>

    <div id="section_one_wrapper">
      <%= f.input :item_one,   :collection => gradescales %>
      <%= f.input :item_two,   :collection => gradescales %>
      <%= f.input :item_three, :collection => gradescales %>
      <%= f.input :item_four,  :collection => gradescales %>
    </div> 
```

# jquery 函数看起来像：

```
$("#section_one_master").change( function() { 
   var a = $("#section_one_master").val(); 
   $("#section_one_wrapper select").val(a);
 });

$("#section_two_master").change( function() { 
   var a = $("#section_two_master").val(); 
   $("#section_two_wrapper select").val(a);
 });    

 ...again, and again 
```

因此，当 section_one_master 更改时，该函数会被触发，并且 section_one_wrapper div 中的所有选择输入都会更改以匹配主控中选择的任何值。

我有很多组，每个组都有一个主选择输入。我怎么能干这个最多一个函数，然后动态地识别首先调用该函数的主节点并使用约定来更改选择的适当分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:27:24.297

您可以将类添加到*主部分*元素：

```
$(".section-masters").change( function() {  
    var id = this.id.replace('master', 'wrapper');   
    $('#' + id + " select").val(this.value);
}); 
```

请注意，在更改处理程序`this`引用元素的上下文中，您不必重新选择元素。

您还可以选择*部分包装*元素并缓存对象和使用`filter`方法，通过缓存对象，您只需选择一次这些元素，这比重新选择它们要好。

```
var $wrappers = $('.section-wrappers');
//...
$wrappers.filter('[id="' + id + '"]').val(this.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:29:11.853

是的，正如@Blazemonger 所说，你可以使用一个类，它会有很大帮助

但你也可以这样做

```
var foos = ['one', 'two'];

$.each(foos, function(index, elem){
  var $selector = $("#section_" + elem + "_master");
  $selector.change( function() { 
   var a = $selector.val(); 
   $("#section_" + elem + "_wrapper select").val(a);
  });
}); 
```

但是完全！如果你可以使用一个类做它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:32:54.547

我最终为每个 master 添加了一个类和一个 id，并将每个部分包装在一个 id 中。然后在我的咖啡脚本中：

```
 $(".master_change").change -> $("div##{@.id}_section select").val $(@).val() 
```

该脚本由任何 .master_change 触发，它从 'this' 中获取 id，然后将其添加到 '_section' 中，后者获取该部分选择的包装器......然后当然会更改它们的所有值以匹配主人。12线对1线！

# c++ - 在 OS X 上，简单的 C++ 程序给出不正确的结果（这是命令行选项 'c++03' 与 'c++11' 的结果）

> ID：14149835
> 
> 赞同：8
> 
> 时间：2013-01-04T01:23:32.350
> 
> 标签：c++, linux, macos, operator-keyword, rvalue

这个简单的程序（在 Linux 上编译时）将根据是否编译正确给出两个不同的答案`-std=c++0x`。

问题：我无法在 OS X（Mountain Lion，10.8 SDK）上重现相同的内容。我错过了什么？

```
#include <iostream>
#include <sstream>

class Thing : public std::ostringstream
{
public:
    Thing() : std::ostringstream() {}
    virtual ~Thing() { std::cerr << str(); }
};

int main(int argc, const char * argv[]) {
    Thing() << "Hello" << std::endl;
    return 0;
} 
```

* * *

要明白我的意思，请执行以下操作（首先在 Linux 上，看看它应该如何工作）：

```
> g++ main.cpp
> ./a.out
0x401471 
```

* * *

```
> g++ -std=c++0x main.cpp
> ./a.out
Hello 
```

* * *

第一个将打印一个十六进制地址，第二个将打印“Hello”。这是正确的行为，因为运算符`<<`解析为两个不同的东西（C++03 中没有右值引用，所以你去吧）。

现在，在 OS X 上尝试同样的事情：

* * *

```
> xcrun c++ main.cpp
> ./a.out
0x10840dd88 
```

（这会正确产生十六进制输出。）

* * *

```
> xcrun c++ -std=c++0x main.cpp
> ./a.out
0x10840dd88 
```

（糟糕……仍然是十六进制输出……我们处于 C++11x 模式，但可能没有使用正确的标头？）

* * *

注意：编译器版本在这里：

```
> xcrun c++ --version
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix 
```

注意：这本身不是 C++ 问题，而是 OS X 构建问题。对于那些感兴趣的人，它与 C++03 和 C++11 产生不同结果的原因在下面的答案之一中突出显示。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T02:51:22.610

首先，预期的行为差异是因为`operator<<(std::ostream&, const char*)`重载（它实际上是一个函数模板专业化，但现在没关系）有一个类型的参数，`std::ostream&`一个左值引用只能绑定到一个左值，在你的例子中，流是一个右值所以不能使用过载。在 C++03 中，这意味着唯一可行的重载是`std::ostream::operator<<(const void*)`成员函数，因为*可以*在右值对象上调用成员函数，所以字符串被写为`void*`十六进制的地址。在 C++11 中有一个新的`operator<<(std::ostream&&, const T&)`函数模板，它允许写入右值流并转发到`operator<<(std::ostream&, const char*)`重载，因此输出的是字符串而不是十六进制地址。

在 GNU/Linux 上，您可能使用的是相当新的 GCC 版本，它在编译器 (g++) 和标准库 (libstdc++) 中都对 C++11 提供了相当好的支持，因此它具有`operator<<(std::ostream&&, const T&)`重载并且一切正常。

在 OS X 上，您可能将 Clang 与 GCC 的标准库 libstdc++ 一起使用。Xcode 默认附带一个古老版本的 GCC (4.2)，并且来自 GCC 4.2 的标准库不支持 C++11，因此没有`operator<<`右值流的重载。using`-std=c++0x`告诉 Clang 支持 C++11 语言特性（例如右值引用），但不会神奇地使 GCC 4.2 的库增长 C++11 代码，在 GCC 4.2 时甚至在标准委员会的眼中都没有闪烁被释放。Apple 没有发布非史前的 libstdc++，而是编写了自己的标准库实现来配合 LLVM 和 Clang 项目。Using`-stdlib=libc++`告诉 clang 使用那个 libc++ 标准库实现而不是古老的 libstdc++。由于 libc++ 是最近编写的，它具有`operator<<`右值引用的重载。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T02:02:46.920

默认情况下使用 libstdc++ 而不是 libc++ 似乎是 clang 的一个问题。像这样编译：`clang++ -std=c++0x -stdlib=libc++ test.cpp`产生预期的输出。

# asp.net-mvc - 将 cdn 附加到 mvc 应用程序中的图像

> ID：14149836
> 
> 赞同：1
> 
> 时间：2013-01-04T01:23:38.753
> 
> 标签：asp.net-mvc, asp.net-mvc-4, cdn

我正在使用 asp.net mvc 4 应用程序。我想将我的网站图像设置为通过 CDN 呈现。

MVC 中是否有任何机制来设置解析为 cdn 的图像路径？我希望 CDN 是动态的，因此我可以通过应用程序设置对其进行配置。

我有几个想法可以接受

*   使用 Html Helper 来解析所有带有 cdn 的图像。唯一的问题是我使用 spring.net 依赖注入并且不相信直接注入静态类
*   创建一个我放置在控制器上的属性，该属性检查我的视图中的 html 输出，使用正则表达式查找所有未解析的域并解析它们。关心这方面的表现
*   创建一个从我的视图返回的操作结果，它与我之前的观点类似。

对此有任何想法/提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:29:17.440

使用 CDN 时存在很大的问题，尤其是在 CSS 方面。

来自这里的一些想法： [http ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

```
public static void RegisterBundles(BundleCollection bundles)
{
    //bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
    //            "~/Scripts/jquery-{version}.js"));

    bundles.UseCdn = true;   //enable CDN support

    //add link to jquery on the CDN
    var jqueryCdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js";

    bundles.Add(new ScriptBundle("~/bundles/jquery",
                jqueryCdnPath).Include(
                "~/Scripts/jquery-{version}.js"));

    // Code removed for clarity.
}

</footer>

        @Scripts.Render("~/bundles/jquery")

        <script type="text/javascript">
            if (typeof jQuery == 'undefined') {
                var e = document.createElement('script');
                e.src = '@Url.Content("~/Scripts/jquery-1.7.1.js")';
                e.type = 'text/javascript';
                document.getElementsByTagName("head")[0].appendChild(e);

            }
        </script> 

        @RenderSection("scripts", required: false)
    </body>
</html> 
```

它变得复杂，但可以通过一些努力来完成。

这也是一篇非常好的文章：http: [//ofps.oreilly.com/titles/9781449320317/ch_ClientOptimization.html](http://ofps.oreilly.com/titles/9781449320317/ch_ClientOptimization.html)

希望有些帮助

图像路径解析在这里处理： [MVC4 StyleBundle not resolve images](https://stackoverflow.com/questions/11355935/mvc4-stylebundle-not-resolving-images)

在控制器中：

```
ViewBag.CDNPath= "http://thepathtomyddnserver"; 
```

鉴于：

```
<img src="@Html.Raw(@ViewBag.CDNPath)/logo1.png"> 
```

这是容易的一点吗？

# java - setText(String) 不适用于 TextView

> ID：14149847
> 
> 赞同：0
> 
> 时间：2013-01-04T01:25:50.423
> 
> 标签：java, android

我正在尝试简化我的代码，但由于某些原因，“setText”方法不可用。

这是目前为我工作的代码：

```
TextView textView = (TextView)view.findViewById(R.id.testId);
textView.setText("Test"); 
```

我正在尝试将其简化为以下代码：

```
(TextView)view.findViewById(R.id.testId).setText("Test"); 
```

但我收到错误消息：“找不到符号”。甚至 IDE 也没有给我这个选项：

![在此处输入图像描述](../Images/ea2b554a1178f81ea354a6d235c37f0d.png)

但是，此代码在其他一些事情上运行良好，例如：

```
view.findViewById(R.id.another_testID).setOnClickListener(test_listener); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T01:29:35.507

对于一个班轮：

```
((TextView)view.findViewById(R.id.testId)).setText("Test"); 
```

请注意添加的额外括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T01:28:02.603

正如您目前所拥有的`(TextView)view.findViewById(R.id.testId).setText("Test");`，findViewById 返回一个标准`View`，因为 setText 方法是 a 的属性`TextView`。

在此语句中，您尝试`view.findViewById(R.id.testId).setText("Test")`强制转换为 TextView。

`2`您上面的行解决方案是设置文本的最简单方法。

**编辑**

要在一行中执行此操作：

```
((TextView)findViewById(R.id.testId)).setText("Test"); 
```

在这一行中，您正在设置 TypeCast 元素的属性。在您的示例中，您将属性设置作为类型转换的一部分。

如果您曾经在同一个类中需要更改此元素的文本，这不是最好的方法，因为它会消耗额外的时钟周期，而不是仅仅保留元素的变量。

# android - GIF 在三星 Galaxy Note 2 上不显示

> ID：14149852
> 
> 赞同：2
> 
> 时间：2013-01-04T01:26:31.783
> 
> 标签：android, android-layout, gif, samsung-mobile

我在我的应用程序中的三星 Galaxy Note 2 (Android 4.1.1) 上显示 GIF 时遇到问题。Galaxy Nexus 7 模拟器和其他模拟器上的一切都很好。这是我的源代码：

```
public class ShouldersEx1 extends Activity {

View view;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    view = findViewById(R.id.image_arms_ex1);

    setContentView(R.layout.shoulders_ex1);
} 
```

}

```
public class GIFView extends View {
private Movie movie;
private long moviestart;

public GIFView(Context context) throws IOException {
    super(context);
    movie = Movie.decodeStream(getResources().getAssets().open("barki1.gif"));
}

public GIFView(Context context, AttributeSet attrs) throws IOException {
    super(context, attrs);
    movie = Movie.decodeStream(getResources().getAssets().open("barki1.gif"));
}

public GIFView(Context context, AttributeSet attrs, int defStyle) throws IOException {
    super(context, attrs, defStyle);
    movie = Movie.decodeStream(getResources().getAssets().open("barki1.gif"));
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    long now = android.os.SystemClock.uptimeMillis();
    Paint p = new Paint();
    p.setAntiAlias(true);
    if (moviestart == 0)
        moviestart = now;
    int relTime;
    relTime = (int) ((now - moviestart) % movie.duration());
    movie.setTime(relTime);
    movie.draw(canvas, 0, 0);
    this.invalidate();
} 
```

}

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.personaltrainer.utils.GIFView
    android:id="@+id/image_arms_ex1"
    android:layout_width="320dp"
    android:layout_height="240dp"
    android:layout_gravity="center"
    android:layout_marginLeft="30dp" >
</com.personaltrainer.utils.GIFView>

<TextView
    android:id="@+id/tresc_informacje"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/shoulders_ex1"
    android:textSize="20sp" 
    android:layout_margin="3dp"/> 
```

有什么问题？请注意，在每个屏幕上我都有以下错误：

```
01-04 02:12:06.250: E/SpannableStringBuilder(29691): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:17:27.053

好的，据我所知，没有解决方法。这是一个官方报告的问题：[http ://code.google.com/p/android/issues/detail?id=3422](http://code.google.com/p/android/issues/detail?id=3422)

GIF 不适用于 Android 4.1 及更高版本，尽管在 Android 模拟器上它适用于每个 Android 版本。

我看到的可能解决方案：

*   等待安卓开发者解决这个问题

*   将每个 GIF 拆分成单独的帧并“手动”每 200 毫秒或类似的时间更改一次

# javascript - 外部字体完全加载后执行 JavaScript

> ID：14149855
> 
> 赞同：0
> 
> 时间：2013-01-04T01:27:00.807
> 
> 标签：javascript

我正在使用 Google 字体，我在 $(window).load(function(){... 中有代码，其中有一些文字说“正在加载...”，在执行 $(window) 中的代码之前，所有内容都在页面上呈现.load(function(){ 除了具有 CSS 属性 font 的文本使用 Google 字体。

我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:54:35.207

您可以进行非异步（同步？）AJAX 调用以确保下载字体：

```
xmlhttp.open('GET','path/to/needed/font',false); 
```

这将满足您的要求。但是，老实说，这并不是最好的用户体验。相反，我建议制作“正在加载”文本的微小 SVG 图像，然后只显示该图像。SVG 很好，因为您可以在 HTML 中包含代码，这样您就知道它已被下载。

如果您不能使用 SVG，或者出于某种原因只喜欢 JPG 或 PNG，您可以将图像数据嵌入到页面中：[Embedding Base64 Images](https://stackoverflow.com/questions/1207190/embedding-base64-images)。

最后，如果您不关心 Internet Explorer，并且您*真的*不想使用图像，那么我想您可以将数据 url 放入`@font-face`src。例如：[http ://robert.accettura.com/blog/2009/07/03/optimizing-font-face-for-performance/](http://robert.accettura.com/blog/2009/07/03/optimizing-font-face-for-performance/)

# php - 通过 curl 或其他方法强制下载远程文件

> ID：14149856
> 
> 赞同：2
> 
> 时间：2013-01-04T01:27:01.747
> 
> 标签：php

我有一个远程链接，我想从中强制下载文件。现在我正在使用 cURL。

我的脚本适用于这个网址（因为我测试了一个不同的网址）：http: [//images.mob.org/iphonegame_img/rip_curl_surfing_game_live_the_search/real/1_rip_curl_surfing_game_live_the_search.jpg](http://images.mob.org/iphonegame_img/rip_curl_surfing_game_live_the_search/real/1_rip_curl_surfing_game_live_the_search.jpg)

但我需要它来处理这个： [https ://googledrive.com/host/0B_3oJnpnNoF9UjlkVUwtWE5CY0U/city.jpg](https://googledrive.com/host/0B_3oJnpnNoF9UjlkVUwtWE5CY0U/city.jpg)

这是我的 PHP 代码

```
 <?php
    $file = 'http://images.mob.org/iphonegame_img/rip_curl_surfing_game_live_the_search/real/1_rip_curl_surfing_game_live_the_search.jpg';
    download($file,2000);

    function download($file,$chunks){
        set_time_limit(0);
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-disposition: attachment; filename='.basename($file));
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Expires: 0');
        header('Pragma: public');
        $size = get_size($file);
        header('Content-Length: '.$size);

        $i = 0;
        while($i<=$size){
            //Output the chunk
            get_chunk($file,(($i==0)?$i:$i+1),((($i+$chunks)>$size)?$size:$i+$chunks));
            $i = ($i+$chunks);
        }

    }

    //Callback function for CURLOPT_WRITEFUNCTION, This is what prints the chunk
    function chunk($ch, $str) {
        print($str);
        return strlen($str);
    }

    //Function to get a range of bytes from the remote file
    function get_chunk($file,$start,$end){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $file);
        curl_setopt($ch, CURLOPT_RANGE, $start.'-'.$end);
        curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
        curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'chunk');
        $result = curl_exec($ch);
        curl_close($ch);
    }

    //Get total size of file
    function get_size($url){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HEADER, true);
        curl_setopt($ch, CURLOPT_NOBODY, true);
        curl_exec($ch);
        $size = curl_getinfo($ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
        return intval($size);
    }

    ?> 
```

我不知道该怎么办知道。请指教一些东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-04T01:38:14.890

您不需要复杂的代码来完成简单的任务，这应该可以正常工作

```
$file = 'https://googledrive.com/host/0B_3oJnpnNoF9UjlkVUwtWE5CY0U/city.jpg';
download($file);

function download($url) {
    set_time_limit(0);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    $r = curl_exec($ch);
    curl_close($ch);
    header('Expires: 0'); // no cache
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Last-Modified: ' . gmdate('D, d M Y H:i:s', time()) . ' GMT');
    header('Cache-Control: private', false);
    header('Content-Type: application/force-download');
    header('Content-Disposition: attachment; filename="' . basename($url) . '"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . strlen($r)); // provide file size
    header('Connection: close');
    echo $r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:53:00.650

假设您也没有 SSL 证书问题，问题是 Google[似乎没有](https://stackoverflow.com/questions/3854842/content-length-header-with-head-requests)返回 HEAD 请求的内容长度。

所以删除 CURLOPT_NOBODY 行，脚本就可以工作了。

**编辑**：Barmar 已经在上面提到了 Google Drive 的内容长度问题，但该解决方案仍然适用。

# javascript - JSON，转换为 HTML 以与 Isotope.js 一起使用

> ID：14149860
> 
> 赞同：0
> 
> 时间：2013-01-04T01:27:50.117
> 
> 标签：javascript, jquery, json

更新：我已经改变了这个问题。我无法弄清楚，即使我确信我得到了两个很好的答案。我试图简化这个问题，以便以更有条理的方式解决这个问题。我希望这可以帮助像我这样的其他新手......

我想使用 isotope.js 显示来自 JSON 的选定数据（这个问题与我在此处发布的问题有关）：

[根据条目数动态调整大小的 JSON 数据创建网格的最佳方法](https://stackoverflow.com/questions/14146526/best-way-to-create-grid-from-json-data-which-dynamically-resizes-based-on-number)

我今天一直在阅读有关同位素的文章（我也是 Javascript 的新手），我相信这个问题对你们中的很多人来说似乎很基础。反正这里是...

据我所见，我需要有这种格式的 html 来提供给同位素（这取自这里找到的关于同位素的基本示例 - [https://github.com/DaweiCheng/isotope-tutorial/blob/master/basic .html](https://github.com/DaweiCheng/isotope-tutorial/blob/master/basic.html)）：

```
<div class="element other nonmetal   " data-symbol="H" data-category="other">
      <p class="number">1</p>
      <h3 class="symbol">H</h3>
      <h2 class="name">Hydrogen</h2>
      <p class="weight">1.00794</p>
    </div> 
```

所以，如果我有这样的 JSON（请假设多个记录相似）：

```
[{"name":"Hydrogen","number":1,"symbol":"H","weight":1.00794},{"name":"Helium","number":2,"symbol":"He","weight":4.002602},{"name":"Lithium","number":3,"symbol":"Li","weight":6.941},{"name":"Beryllium","number":4,"symbol":"Be","weight":9.012182},{"name":"Boron","number":5,"symbol":"B","weight":10.811},...] 
```

*请注意，JSON 中的任何数字字段都是整数，而不是字符串。

我想把 JSON 变成这样：

```
<div id="container">

<div class="element">
<p class="number">1</p>
<h3 class="symbol">H</h3>
<h2 class="name">Hydrogen</h2>
<p class="weight">1.00794</p>
</div>
<div class="element">
...
</div>

</div> 
```

如何将 JSON 转换为所需的 HTML？

为了让事情变得简单（对我来说），我希望每个记录的 div 类始终是元素（所以当我学习改变同位素时，我最初可以从使用他们教程中的 css 开始）。容器 div 不需要对每条记录重复，所有的记录都会显示在容器内（我想不用多说）...

我已经尝试使用下面的答案（它回答了我之前如何问这个问题）来做这件事，但是这样做时，我要么什么都没有返回（控制台中也没有错误），要么我得到了一个看起来像空表格单元格的东西。

任何帮助是极大的赞赏。我对回复的两位用户感到非常抱歉，感谢您的帮助，我将继续使用您的答案，希望我能弄明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:42:56.573

创建一个函数，其作用是接受来自 Ajax 的结果，它遍历每个对象，从中获取必要的数据并输出一个包含所需信息的 div。

例如：

```
function renderUser(ajaxResponse) {

    // turn string response to JSON array
    var responseArray = JSON.parse(ajaxResponse);

    // make sure there is a response
    if (responseArray.length > 0) {

        // get container
        var container = document.getElementById("container");

        // iterate over each response
        for (var i = 0; i < responseArray.length; i += 1) {

            // create the elems needed
            var player = document.createElement("div");
            player.className = "players";
            player.data-Name = responseArray[i].name;

            var score = document.createElement("p");
            score.className = "score";
            score.innerHTML = responseArray[i].score;

            var name = document.createElement("h3");
            name.className = "name";
            name.innerHTML = responseArray[i].name;

            var city= document.createElement("p");
            city.className = "city";
            city.innerHTML = responseArray[i].city;

            // append them all to player wrapper
            player.appendChild(score);
            player.appendChild(name);
            player.appendChild(city);

            // append player to container
            container.appendChild(player);
        }
    } 
} 
```

编辑：

冒昧地做一个小提琴来做你想做的事：http: [//jsfiddle.net/92FgL/](http://jsfiddle.net/92FgL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:07:49.083

如果你想使用更多的 jQuery 和更少的 vanilla js，你可以这样做：

```
// document.ready shorhand
$(function() {
  var $container;

  // store destination element
  $container = $('#container');

  $.getJSON('myjson.json', function(data) {
    var items;

    // initialize array where we'll store html
    items = [];

    // loop through ajax response
    $.each(data, function() {
      var html;

      // build player html
      html = "<div class=\"players\" data-name=\"" + data.name + "\"> \
      <p class=\"score\">" + data.score + "</p> \
      <h3 class=\"name\">" + data.name + "</h3> \
      <p class=\"city\">" + data.city + "</p> \
      </div>"

      // add new html onto array
      items.push(html);
    });

    // squish all the html into a string
    items.join('');

    // set the html of the container to the html built above
    $container.html(items);
  });

  $container.isotope({
    itemSelector: '.players'
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:09:20.677

你可以使用 jQuery tmpl 插件。它不再开发了，但它工作得非常好。

[https://github.com/jquery/jquery-tmpl](https://github.com/jquery/jquery-tmpl)

html中定义的模板

```
 <script id="myTmpl" type="x-jquery-tmpl">
        <div class="player" data-name="${name}">
            <p class="score">${score}</p>
            <h3 class="name">${name}</h3>
            <p class="city">${city}</p>
        </div>
    </script> 
```

使用 jquery 推送到 tmpl 的数据。注意：您不需要使用 $.each 或 for 循环遍历数据：您可以推送整个数组，tmpl 插件将处理它，将数据推送到数组每个条目的模板。

```
 $.getJSON('myjson.json', function(data) {
         var items = $('#mytmpl').tmpl(data);
         //items is your html object containing a div for each element of data.
         //you can push it to the dom through jQuery 
         //or $container.isotope( 'insert', items );
    }); 
```

希望能帮助到你。

如果不清楚，请进一步询问。

# ruby-on-rails - has_man 与条件的关系

> ID：14149861
> 
> 赞同：0
> 
> 时间：2013-01-04T01:27:55.030
> 
> 标签：ruby-on-rails, relationship

我有一个模型（用户） has_many :bookings

预订有一个完整的字段

我希望能够查看预订完成的用户的所有预订我还希望有时能够显示用户的所有预订，无论是否完成

在我的模型中设置它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:33:47.117

假设`complete`是一个布尔值`Bookings`：

```
class User < ActiveRecord::Base
  has_many :bookings
end
class Bookings < ActiveRecord::Base
  belongs_to :user
  scope :completed, where(complete: true)
end
@user.bookings.completed #Complete bookings
@user.bookings           #All bookings 
```

# c++ - Qt：拖放小部件以实现任意布局（拆分），就像在 Eclipse 中一样

> ID：14149862
> 
> 赞同：2
> 
> 时间：2013-01-04T01:27:55.630
> 
> 标签：c++, qt, layout, drag-and-drop, split

我知道停靠小部件、拆分器等。我仍然想知道，是否可以像在 Eclipse 中那样创建灵活的拆分系统：当任何小部件在拖动过程中根据光标的位置保持垂直或水平拆分时。

例如，第一个小部件`A`占据了整个`QMainWindow`. 第二个`B`首先在选项卡中打开，所以它要么

```
-----
| A |
----- 
```

或者

```
-----
| B |
----- 
```

然后我将选项卡拖到`B`（假设）右侧区域`QMainWindow`- 并获得垂直拆分，如：

```
---------
| A | B |
--------- 
```

然后我打开其他一些小部件`C`。它再次在选项卡中打开（默认情况下在最左边和最顶部），所以它要么

```
---------
| A | B |
--------- 
```

或者

```
---------
| C | B |
--------- 
```

现在，我将标签拖到`C`底部`B`并得到：

```
---------
|   | B |
  A -----
|   | C |
--------- 
```

或者，如果我将它拖到底部中间，`QMainWindow`我会得到：

```
---------
| A | B |
---------
|   C   |
--------- 
```

我希望你明白了。如果您熟悉 Eclipse，它应该更容易理解。这里的关键是我可以无限次这样做并构建绝对自定义的布局，例如：

```
-----------------
|   | B | G |   |
| A ---------   |
|   | D |   | F |
--------- E |   |
|   C   |   |   |
-----------------
|       H       |
----------------- 
```

这个例子看起来很混乱，这种疯狂布局的好处当然值得怀疑，但无论如何，问题是——Qt 是否提供了开箱即用的这种行为，或者至少提供了一些工具来以最少的编码工作来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:43:09.017

您可能想查看在[`setDockNestingEnabled(bool)`](http://qt-project.org/doc/qt-4.8/qmainwindow.html#dockNestingEnabled-prop)您的`QMainWindow`. 这将使您的码头能够在拖放操作期间进行拆分。

您可以将此与其他小部件（如选项卡小部件）中的拖放支持结合起来。

# javascript - 发现资源分配冲突的最快方法

> ID：14149865
> 
> 赞同：1
> 
> 时间：2013-01-04T01:28:33.197
> 
> 标签：javascript, algorithm

我们有一个子数组的*顺序选项*数组。`n`我们想知道我们是否可以获得一个*订单履行*数组，其中：

1.  每个订单项目都有一个（任何）选项，
2.  *订单履行*数组由唯一值组成

一些可视化问题的示例：

```
[
  [3, 5],
  [3, 5]
]
result: true
possible order_fulfillment = [3,5]
----------------------------------
[
  [3, 5],
  [3, 5],
  [3, 5]
]
result: false
----------------------------------
[
  [3, 5],
  [3, 5],
  [3, 5, 6]
]
result: true
possible order_fulfillment = [3,5,6] 
```

我目前正在使用蛮力方法，检查所有可能的组合，直到我找到完整的*订单履行*，此时我返回 true，或者直到我检查了所有可能的组合但没有成功然后返回 false。

我很想知道是否存在更好的方法。这将在浏览器中执行，因此是 javascript 标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:42:41.997

所以只需遍历每个子数组，遍历子元素，只添加唯一的。

```
var OrderOptions = [[3,5],[3,5],[3,5,6]];
var PossibleFullFillment = {};
for( var a = 0; a < OrderOptions.length; a++ )
{
 var OrderItems = OrderOptions[a];
 for( var b = 0; b < OrderItems.length; b++ )
 {
  var current = "" + OrderItems[b].toString();
  PossibleFullFillment[current] = current;
 }
}
var FullFillment = [];
for( var possible in PossibleFullFillment )
{
 FullFillment.push(parseInt(possible));
}
FullFillment.sort();
console.log(FullFillment); 
```

这是一个演示：http: [//jsfiddle.net/NtPwc/](http://jsfiddle.net/NtPwc/)

# php - 如何动态刷新页面？

> ID：14149870
> 
> 赞同：-2
> 
> 时间：2013-01-04T01:29:24.663
> 
> 标签：php, jquery, mysql, ajax

> **可能重复：**
> [每隔预定义的秒数刷新一个 PHP 页面](https://stackoverflow.com/questions/815003/refresh-a-php-page-for-every-predefined-seconds)

我有一些代码，想每 20 秒刷新一次页面。

刷新必须在事件上。我的意思是，如果我加载网络，然后有人把东西放在桌子上，我想每 20 秒显示一次（例如）。

这是链接：[http ://tuts.wtfdiary.com/2012/07/twitter-style-dynamic-tweet-update.html](http://tuts.wtfdiary.com/2012/07/twitter-style-dynamic-tweet-update.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:38:18.743

您可以使用 javascript `setInterval()`（更具体地说，`window.setInterval()`）以间隔运行函数。像这样的东西：

```
setInterval(myFunction,20000); //time is in milliseconds, so 20 seconds is 20000

function myFunction() {
  console.log('hi');
  //or whatever else you want to run at an interval.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:40:21.143

创建将实现 GET 的 PHP Get 数据和 JavaScript 函数

```
//Ajax call to get tweets

function GetTweets(){
    $.ajax({
    url: "Get_tweet.php",
    data: /supply parameter if you have any/,
    cache: false,
    success: function(html){
       $("#content").prepend(html);
    }
    });
} 
```

使用 window.setInterval 方法调用函数并根据您指定的时间间隔获取数据

```
window.setInterval(GetTweets(),20000) 
```

# mysql - 如何创建 MySQL / PHP 子查询来计算匹配值的记录数？

> ID：14149871
> 
> 赞同：0
> 
> 时间：2013-01-04T01:29:25.470
> 
> 标签：mysql, sql, select

我在查询 MySQL 时遇到问题。我想实际获取具有 current 值的记录数`parent_cat_id`。所以在这种情况下，我们需要一个 sub_query 来告诉我们 4（因为有 4

```
id  parent_cat_id   cat_name                                        
6   2   Carrot                                      
8   2   Potatoes                                        
7   2   Lettuce                                     
13  2   Asparagus                                       
4   1   Pears                                       
3   1   Banannas                                        
2   1   Apples 
```

Main $query 产生我发布的内容以及我将使用的更多信息....

```
$menu_query = "SELECT c.id AS id, parent_cat_id, cat_name FROM db.category c JOIN db.parent_category pc ON pc.id = c.parent_cat_id WHERE c.is_active = 1 AND c.is_menu = 1 ORDER BY pc.sort_order, c.sort_order;";

$menu_result = mysql_query($menu_query) or die(mysql_error());

while($menu_row = mysql_fetch_array($menu_result)){
    $menu_name = $menu_row['cat_name'];
    $id = $menu_row['id'];
    $parent_cat_id = $menu_row['parent_cat_id'];
            #echo $parent_cat_id;
    #return from database the $count of  records with the same  ['parent_cat_id'] 's 
```

所以我希望有某种形式的 $sub_query 以便我知道在我的 php 代码中构建下一个菜单项。第一个菜单应该有 4 个，第二个菜单应该有 3 个。

谢谢。

**更新**最终工作子查询

```
SELECT c.id AS category_id, c.parent_cat_id, cat_name, d.totalCount 
FROM category c 
INNER JOIN parent_category pc 
ON pc.id = c.parent_cat_id 
INNER JOIN(
    SELECT parent_cat_id, COUNT(*) totalCount 
    FROM category 
    WHERE is_menu = 1 
    AND parent_cat_id = 2 
    ORDER BY parent_cat_id 
) d 
ON c.parent_cat_id = d.parent_cat_id 
WHERE c.is_active = 1 
AND c.is_menu = 1 
ORDER BY pc.sort_order, c.sort_order; 
```

再次感谢您的帮助！！！我只需要在你教我的子查询中加入另一个 WHERE 子句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:32:32.813

您可以有额外的子查询来计算每个的值`parent_cat_id`

```
SELECT  c.id AS id,
        pc.parent_cat_id,
        pc.cat_name,
        d.totalCount
FROM    db.category c
        INNER JOIN db.parent_category pc
            ON pc.id = c.parent_cat_id
        INNER JOIN
        (
            SELECT parent_cat_id, COUNT(*) totalCount
            FROM db.parent_category
            GROUP BY parent_cat_id
        ) d ON c.parent_cat_id = d.parent_cat_id
WHERE   c.is_active = 1 AND 
        c.is_menu = 1
ORDER   BY  pc.sort_order,
            c.sort_order 
```

# visual-studio - 在 Visual Studio 2012 中是否有用于关闭文件的键盘快捷键？

> ID：14149874
> 
> 赞同：15
> 
> 时间：2013-01-04T01:29:45.743
> 
> 标签：visual-studio, keyboard-shortcuts

或者更好的组合键可以保存和关闭打开的文件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-04T01:33:01.767

关闭打开的文件：ctrl+f4（用于c#环境设置）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T01:48:27.733

不完全是键盘组合，但是如果您按 Ctrl+s（保存），然后松开 s 并按 F4（关闭），它会做您想做的事情。

否则，[VsVim](http://visualstudiogallery.msdn.microsoft.com/59ca71b3-a4a3-46ca-8fe1-0e90e3f79329)扩展将使用 ZZ 进行标准保存和关闭。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-26T16:25:56.037

Shift + Esc

用搜索[在这里](http://www.veodin.com/keyrocket/visual-studio-2012-shortcuts/)找到他们所有的快捷键

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-10T09:19:10.037

如果您想了解可以使用的所有 Visual Studio 快捷方式，您会喜欢这个应用程序：KeyRocket Premium for Visual Studio (http://bit.ly/WRalto)。它会在您使用 Microsoft 应用程序时建议上下文感知键盘快捷键，因此您不必在 Internet 上查找它们然后将它们写下来以记住。

# c# - 如何在某个字符后获取子字符串

> ID：14149875
> 
> 赞同：8
> 
> 时间：2013-01-04T01:29:47.560
> 
> 标签：c#, asp.net

我需要从我的 asp.net mvc Web 应用程序中的电子邮件中提取公司名称：- 例如，如果我有`email address = myeamil@mycompanyname.com`

获得`Mycompanyname`首字母大写？BR

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T01:37:10.787

```
string address = "myeamil@mycompanyname.com";
string name = address.Split('@')[1].Split('.')[0];
name = name.Substring(0,1).ToUpper() + name.Substring(1); // Mycompanyname 
```

获取名称的另一个选项是正则表达式：

```
var name = Regex.Match(address, @"@([\w-]+).").Groups[1].Value 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T01:38:44.500

要摆脱 @ 和之前的所有内容，您可以在特定情况下使用类似这样的内容：

```
string test = "myeamil@mycompanyname.com";
            test = test.Substring(test.IndexOf('@')+1, test.IndexOf(".") -(test.IndexOf('@')+1));
            MessageBox.Show(test); 
```

这[解释](http://www.dotnetperls.com/uppercase-first-letter)了如何将第一个字母设为大写字母，您将在去掉 @ 和 .com 部分后使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T01:50:03.710

只是另一个变种

```
var name = new MailAddress("myeamil@mycompanyname.com").Host.Split('.').First();
name = name.First().ToString().ToUpper() + String.Join("", name.Skip(1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T03:20:07.303

```
string email = "myemail@mycompanyname.com";
int startIndex = email.IndexOf( "@" );
int endIndex = email.IndexOf( ".", startIndex );
string domain = email.SubString( startIndex + 1, endIndex );
string domain = CultureInfo.CurrentCulture.TextInfo.ToTitleCase(domain); 
```

这将返回**Mycompanyname**

# linq - 多对多关联没有智能感知

> ID：14149877
> 
> 赞同：0
> 
> 时间：2013-01-04T01:30:06.630
> 
> 标签：linq, entity-framework, linq-to-entities

我正在尝试在 LINQ 中为 EF5 构建查询。我的模型建立了一个有两个外键的关联，shippingcompanycontacts 有一个 contactid 和一个 shippingcompanyid。该“表”没有智能感知（它在 mySQL 中显示为表）我尝试以这种方式访问​​数据无济于事。（我硬编码了id）

```
 Dim testquery = (From s In ctx.shippingcompanies Where s.Id = 1 Join
                c In ctx.contacts On s.Id Equals c.Id Select New With {c.LastName}).ToList() 
```

我真的需要访问关联表，但它没有智能感知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:21:58.097

The association table is not available in EF by default. You have only `Contacts` and `ShippingCompanies` and each of them contains navigation property to their related counter part so your query can be defined as (C#):

```
var query = from s in ctx.shippingcompanies 
            where s.Id == 1
            from c in s.contacts // accessing navigation property
            select c.LastName; 
```

You can [manually edit EDMX](https://stackoverflow.com/questions/5910517/how-to-get-the-entity-to-table-mapping-for-many-to-many-relations-from-the-metam) and bring `ShippingCompanyContacts` as a new entity but it is not usual way to use EF.

# timer - Android在活动销毁然后重新创建时保存变量

> ID：14149879
> 
> 赞同：1
> 
> 时间：2013-01-04T01:30:18.993
> 
> 标签：timer, savestate

我正在创建一个应用程序，该应用程序有一个控制 countDownTimer 的按钮，无论应用程序是否打开，它都会运行。在计时器结束时，状态栏中会弹出一条通知，提示用户开始另一个活动。该计时器以递增的间隔重复 x 次。此外，为了防止用户多次意外启动计时器，我在第一次按下后禁用了该按钮。在倒计时重复循环结束时，按钮重新启用。

当我保持活动打开时，所有这些都很好......

我的问题是当我按 BACK 时。如果我重新打开活动，则在倒计时周期结束后按钮无法重新启用。我相信当活动被破坏时，变量“计数”的状态就会丢失。

我对编程很陌生，希望能提供任何帮助。对于这段代码的混乱程度，我深表歉意！这仍然是一项正在进行中的工作。提前致谢！

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    startB = (Button) this.findViewById(R.id.button);
    startB.setOnClickListener(this);
    countDownTimer = new MyCountDownTimer(times[count], interval);
    LoadPreferences();
    if (savedInstanceState !=null)
    {
        count = savedInstanceState.getInt("mCount");
    }
    else
    {
        count=0;
    }

}

@Override
public void onSaveInstanceState(Bundle savedInstanceState)
{
    savedInstanceState.putInt("mCount", count);
    super.onSaveInstanceState(savedInstanceState);
}
@Override
public void onBackPressed(){
    SavePreferences();

    super.onBackPressed();
}

private void SavePreferences(){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putInt("mCount", mCount);
    editor.putBoolean("state", startB.isEnabled());
    editor.commit();
}

private void LoadPreferences(){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    int mCount = sharedPreferences.getInt("count", mCount);
    Boolean state = sharedPreferences.getBoolean("state",true);
    startB.setEnabled(state);
    mCount = count
}

            public void onClick(View v)
                {
                    if (!timerHasStarted)
                        {
                            countDownTimer.start();
                            timerHasStarted = true;
                            Toast t= Toast.makeText(this,"Timer Started", Toast.LENGTH_SHORT);
                            t.show();
                        }
                    else
                        {
                            startB.setEnabled(false);

                        }
                }

            // CountDownTimer class
            public class MyCountDownTimer extends CountDownTimer
                {

                    public MyCountDownTimer(long startTime, long interval)
                        {
                            super(startTime, interval);
                        }

                    @Override
                    public void onFinish()
                        {

                        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(getBaseContext())
                        .setSmallIcon(R.drawable.ic_launcher)
                        .setContentTitle("ASL Teacher")
                        .setContentText("Play Lesson One");
                        //Intent resultIntent= new Intent();
                        //TaskStackBuilder stackBuilder = TaskStackBuilder.create(MainActivity.this);
                        //stackBuilder.addParentStack(NextActivity.class);
                        //stackBuilder.addNextIntent(resultIntent);
                        //PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);
                        //mBuilder.setContentIntent(resultPendingIntent);
                            NotificationManager mNotificationManager =
                            (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

                        // mId allows you to update the notification later on.
                        mNotificationManager.notify(0, mBuilder.build());

                        Vibrator v= (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
                        v.vibrate(pattern,-1); 
```

// Toast t= Toast.makeText(getApplicationContext(),"Times Up "+String.valueOf(times[count]),Toast.LENGTH_SHORT); // t.show(); 计数++；

```
 if (count < 3)
                        {

                            countDownTimer = new MyCountDownTimer(times[count], interval);
                            countDownTimer.start();
                        }

                        else
                        {
                        count=0;
                            startB.setEnabled(true);
                            timerHasStarted=false;

                        }

                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T13:08:40.320

我不知道这个问题是否仍然相关。

您应该检查变量 mCount 出现的位置。当您 LoadPreferences 时，您将“mCount”读入 mCount，使用其未定义的值作为默认值。然后通过执行 mCount=count 删除读取值。你的意思是count=mCount吗？

onCreate 中的LoadPreferences 后，只根据saveInstanceState 设置count。因此，无论 LoadPreferences 对计数所做的任何事情都将被忽略。当您通过按 BACK 将其杀死后启动 Activity 时，savedInstanceState 将为空，但如果首选项另有说明，您将不希望 count 为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T09:24:45.180

代替这个使用倒数计时器的取消方法并保存剩余时间，然后在活动的恢复方法中启动一个新的倒数计时器

# mysql - 有没有办法从每组行中获取 2 行？

> ID：14149882
> 
> 赞同：2
> 
> 时间：2013-01-04T01:30:52.890
> 
> 标签：mysql, sql, greatest-n-per-group

> **可能重复：**
> [如何为每个组选择固定数量的行？](https://stackoverflow.com/questions/2886064/how-do-i-select-a-fixed-number-of-rows-for-each-group)

例如......如果我有这个表（按颜色排序）：

```
--------------
| id | color |
--------------
| 95 | red   |
| 7  | red   |
| 44 | red   |
| 46 | red   |
| 49 | red   |
| 24 | green |
| 37 | green |
| 91 | green |
| 88 | green |
| 44 | blue  |
| 10 | blue  |
| 11 | blue  |
-------------- 
```

有没有办法让我从每种颜色中获取 2 行？例子：

```
--------------
| id | color |
--------------
| 7  | red   |
| 44 | red   |
| 24 | green |
| 37 | green |
| 10 | blue  |
| 11 | blue  |
-------------- 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T01:35:57.950

你可以有这样的东西，

```
SELECT id, color
FROM   TableName a
WHERE 
(
   SELECT COUNT(*) 
   FROM   TableName AS f
   WHERE  f.color = a.color AND f.id <= a.id
) <= 2; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/778e5/4)

# php - 如何从另一个脚本返回值和调用函数？

> ID：14149887
> 
> 赞同：0
> 
> 时间：2013-01-04T01:31:48.710
> 
> 标签：php, jquery, ajax

下面我试图创建一个功能，如果用户在当前页面上，则数组中的所有其他页面都被锁定（无法访问），在用户完成当前页面之前无法访问其他页面。上。

下面是处理 6 个 php 脚本的代码：

```
 <script type="text/javascript">

$(function() {
    var link = $("#createLink");

    link.click(function() {
        $.ajax({
           url: "removesession.php",
           async: false,
           type: "POST",
           success: function() {
                window.location.href = link.attr("href");
           }
         });

         //cancels the links true action of navigation
         return false;
    });
);
</script>

    <?php

    $steps = array('create_session.php', 'QandATable.php', 'individualmarks.php', 'penalty.php', 'penaltymarks', 'complete.php');

    // Track $latestStep in either a session variable
    // $currentStep will be dependent upon the page you're on

    $latestStep = $_SESSION['latestStep'];
    $currentStep = basename(__FILE__); 

    $currentIdx = array_search($currentStep, $steps);
    $latestIdx = array_search($latestStep, $steps);

    if ($currentIdx - $latestIdx > 1 ) {
        ?>
    <div class="boxed">
    <a href="<?= $pages[$currentPages+1] ?>">Continue</a>
    <br/><a href="create_session.php" id="createLink">Create New</a>
    </div>

    <?

    } else {
        // let the user do the step
    }

    ?> 
```

所以这里有一个可能发生的例子：

1.  用户在`penalty.php`页面上，因此阵列中的其他页面被锁定
2.  如果用户尝试访问另一个页面，则会显示上面显示的 div 框：

    *   如果用户选择`Continue`链接，那么它应该将用户导航到他们应该在哪个页面上的`penalty.php`页面

    *   如果用户选择`Create New`链接，那么它应该导航到`create_session.php`并执行 jquery/ajax 方法并导航到`removesession.php`后台脚本

现在上面的代码在一个名为的 php 脚本中`steps.php`，它被外部化，以便可以使用它来访问它`include(steps.php)`，它将包含在数组中的 6 个 php 脚本中，以便这些脚本可以访问这些页面。

现在我的问题是我需要在这段代码中再做一件事，它处理我在上面代码中的 if/else 语句，并在其他脚本中包含代码：

> 使用返回值，如果用户可以执行该步骤，则返回 1，如果不能，则返回 0。然后在每个页面上，您将调用此函数，并根据返回值显示页面或显示错误

我的问题是，我似乎不太了解如何编写上述引文中提到的内容。有人可以展示 if/else 语句应该是什么样子，以及应该在 6 的 php 脚本之一中包含哪些代码，以便能够调用该脚本中的函数？

**更新：**

步骤.php

```
<?php

function allowed_in($steps){

$steps = array('create_session.php', 'QandATable.php', 'individualmarks.php', 'penalty.php', 'penaltymarks', 'complete.php');

// Track $latestStep in either a session variable
// $currentStep will be dependent upon the page you're on

$latestStep = $_SESSION['latestStep'];
$currentStep = basename(__FILE__); 

$currentIdx = array_search($currentStep, $steps);
$latestIdx = array_search($latestStep, $steps);

if ($currentIdx - $latestIdx > 1 ) {

   return 1;

} else {

    return 0;

}

}

?> 
```

创建会话.php：

```
if(allowed_in($steps)){

//all code in the create_session.php

}else{
?>

<div class="boxed">
  <a href="<?= $pages[$currentPages+1] ?>">Continue</a>
<br/>
<a href="create_session.php" id="createLink">Create New</a>
</div>

<?php   

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:44:34.817

*非常*伪代码：

```
function allowed_in($pased_vars){

//your code

if($foo){
    return 1;
}else{
    return 0;
}

} 
```

在包含的页面上

```
<?php
//include file with code

if(allowed_in($vars)){
//allowed
}else{
//not
} 
```

# ruby-on-rails - 仅获取特定日期范围的平均值

> ID：14149889
> 
> 赞同：2
> 
> 时间：2013-01-04T01:31:50.450
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

在具有过去十年每小时交易价格的数据库中，以下查询将按天对价格进行分组，生成每日平均价格，并在数据库中返回每天的平均价格：

```
Trade.average(:price, :group => "DATE_TRUNC('day', date)") 
```

但是，这将返回一个过大的响应，我只需要获得过去 7 天的平均价格。我可以在此查询中添加什么以仅对`date`列中给出的最后 7 天数据执行平均？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:34:16.497

像这样的东西应该工作：

```
Trade.where('date >= ?', 7.days.ago).average(:price, :group => "DATE_TRUNC('day', date)") 
```

# google-apps-script - 图表和对象类型错误

> ID：14149893
> 
> 赞同：0
> 
> 时间：2013-01-04T01:32:16.307
> 
> 标签：google-apps-script, google-visualization

图表服务的新手，希望能详细说明这篇文章[Google 图表对象错误](https://stackoverflow.com/questions/14132295/google-charts-object-error)

我遇到了同样的“对象类型与列类型不匹配”的问题，但我检查了行并确保数据是相同的类型。如果我将整个工作表设置为纯文本格式，则图形执行正确且没有错误；但我放弃了所有使用航班日期或尝试汇总航班时间的过滤器和功能，并计算工作簿中其他工作表上的航班类型。

有没有办法让图表在使用之前将列数据串起来？（简单地）。我什至将数据范围设置为不包括字符串标题，以防万一出现问题，但这也不起作用。

样本数据表链接：[样本数据表](https://docs.google.com/spreadsheet/ccc?key=0AvmOEVr803HMdGNLXzBxNVYwTFAwZjRwYWlPWm5oYUE#gid=0)

这是代码：

```
 function doGet(){
    //Get the data from spreadsheet
    var ss = SpreadsheetApp.openById(ScriptProperties.getProperty('hoistLog'));
    var sheet = ss.getSheetByName('Flight Tracking');
    var data = sheet.getDataRange();

    //Filters
    var unitFilter = Charts.newCategoryFilter()
    .setFilterColumnIndex(22)
    .build();

    var missionTypeFilter = Charts.newCategoryFilter()
    .setFilterColumnIndex(2)
    .build();

    //Charts
    var missionTypePieChart = Charts.newPieChart()
    .setDataViewDefinition(Charts.newDataViewDefinition().setColumns([2]))
    .setDimensions(550, 350)
    .setTitle('Mission Types')
    .set3D()
    .build();

    var unitTypePieChart = Charts.newPieChart()
    .setDataViewDefinition(Charts.newDataViewDefinition().setColumns([22]))
    .setDimensions(550, 350)
    .setTitle('Flights By Unit')
    .set3D()
    .build();

    var tableChart = Charts.newTableChart()
    .setDataViewDefinition(Charts.newDataViewDefinition().setColumns([0, 2, 22, 23, 24, 25,     33, 34, 35, 36, 37]))
    .setDimensions(1100, 500)
    .build();

    //Dasboard
    var dashboard = Charts.newDashboardPanel().setDataTable(data)
    .bind([unitFilter, missionTypeFilter], [missionTypePieChart, unitTypePieChart,   tableChart])
    .build();

    var app = UiApp.createApplication();
    var filterPanel = app.createHorizontalPanel();
    var chartPanel = app.createHorizontalPanel();
    var tablePanel = app.createVerticalPanel();
    filterPanel.add(unitFilter).add(missionTypeFilter).setSpacing(10);
    chartPanel.add(missionTypePieChart).add(unitTypePieChart).setSpacing(10);
    tablePanel.add(tableChart).setSpacing(10);

                        dashboard.add(app.createVerticalPanel().add(filterPanel).add(chartPanel).add(tablePanel));
    app.add(dashboard);
    return app;  
   } 
```

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:55:06.600

问题出在 line `var dashboard = Charts.newDashboardPanel().setDataTable(data)`， data 在这里是一个范围。你需要以某种方式转换它：

```
//Dasboard
var vals=data.getValues();
var dataTable=Charts.newDataTable();
for (var i in vals[0]) {
  dataTable.addColumn (Charts.ColumnType.STRING, ""+i);
}
for (var i in vals) {
  var x=vals[i];
  for (var j in x) {
    x[j]=""+x[j];
  }  
  dataTable.addRow (vals[i]);
}  
var dashboard = Charts.newDashboardPanel().setDataTable(dataTable)
.bind([unitFilter, missionTypeFilter], [missionTypePieChart, unitTypePieChart,   tableChart])
.build(); 
```

然后它会显示一些东西。但是，可以采用转换来更适合您的表格（这里所有内容都只是转换为字符串，并且标题只是 0, 1, 2...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T09:39:41.460

我发现即使在添加了数据的新创建的电子表格上：

```
var data = sheet.getDataRange(); 
```

没有工作。

我改为命名范围并按名称指定它以将数据范围限制为输入的数据：

```
var data = ss.getRangeByName("theData"); 
```

它似乎在我认为`.getDataRange`会限制的预期数据范围之外找到一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T06:49:57.813

如果工作表中的日期列包含一些空白，请打开工作表并将这些列格式化为“数字 > 纯文本”，以防止出现“对象类型与列类型不匹配”错误。

# node.js - 如何为 mongoDB 设计模式

> ID：14149896
> 
> 赞同：0
> 
> 时间：2013-01-04T01:32:26.137
> 
> 标签：node.js, mongodb, mongoose

在 Node.js + Mongoose 中，我想在收藏文章中找到一些用户的评论。

设计一：

```
articles:
{
    ...
    users: ["a@a.com","b@b.com","c@c.com"]
    comments: [
        {email:"a@a.com", comment:"..."},
        {email:"b@b.com", comment:"..."},
        {email:"c@c.com", comment:"..."},
        ...
    ]
} 
```

设计二：

```
articles:
{
    ...
    comments: [
        {email:"a@a.com", comment:"..."},
        {email:"b@b.com", comment:"..."},
        {email:"c@c.com", comment:"..."},
        ...
    ]
} 
```

我正在使用设计 1，首先找到 {users:req.query.user} ，然后从结果中检索用户的评论。但我觉得它不聪明。有没有像解决方案2这样的方法，我不知道如何编写数据库查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:42:50.437

您对第二个结构的查询实际上同样简单。在 mongo shell 上，它将是：

`db.collection_name.find({'comments.email': 'a@a.com'})`

查询引擎足够聪明，可以自省到该数组并返回符合要求的文档。

从那时起，您只需要遍历应用程序代码中的注释并提取具有匹配电子邮件的注释。如果这是您构建数据的方式，则无需在查询时进行此限制。根据需要循环浏览所有评论。

如果将结果集限制为仅针对特定用户的评论很重要，您可能需要重新考虑将对象构造成更具相关性的方式（也许每个评论的文档都与文章集合相关？）尝试根据查找潜力方面的重要值来考虑您的模式，并在可能的情况下对它们进行索引。

# heroku - 如何在 Heroku 中为 webapp-runner 指定自定义信任库？

> ID：14149898
> 
> 赞同：2
> 
> 时间：2013-01-04T01:32:52.227
> 
> 标签：heroku, jersey

我的示例 webapp 代表其客户对 web 服务进行安全调用，这适用于我的本地环境，现在我想尝试在 Heroku 上部署它。

我已经设置了一个`Procfile`看起来像：

```
web: java $JAVA_OPTS -Djavax.net.debug=ssl -Djavax.net.ssl.trustStore=cacerts_custom.jks -Djavax.net.ssl.trustStorePassword=password -jar target/dependency/webapp-runner.jar --port $PORT target/*.war 
```

由于`-Djavax.net.debug=ssl`我可以清楚地看到我添加到`cacerts`文件中的自定义服务器证书正在加载。

```
app web.1 - - trustStore is: cacerts_custom.jks
app web.1 - - trustStore type is : jks
app web.1 - - trustStore provider is :
app web.1 - - init truststore
app web.1 - - adding as trusted cert:
app web.1 - - Subject: me me me
app web.1 - - Issuer: me me me 
```

但我仍然不断收到这些异常：

```
com.sun.jersey.api.client.ClientHandlerException: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
  at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle (ApacheHttpClient4Handler.java:184)
...
Caused by: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
  at sun.security.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:371)

app web.1 - - INFO: 1 * Client out-bound request
app web.1 - - 1 > GET https://webservice.com:80/gimmestuff
app web.1 - - 1 > Accept-Encoding: application/zip
app web.1 - -
app web.1 - - http-nio-31384-exec-5, setSoTimeout(0) called
app web.1 - - Allow unsafe renegotiation: false
app web.1 - - Allow legacy hello messages: true
app web.1 - - Is initial handshake: true
app web.1 - - Is secure renegotiation: false
app web.1 - - %% No cached client session
app web.1 - - *** ClientHello, TLSv1
app web.1 - - RandomCookie:  GMT: 1340484029 bytes = { 185, 85, 19, 4, 68, 226, 214, 134, 35, 143, 91, 59, 106, 156, 34, 20, 77, 75, 64, 92, 131, 186, 239, 23, 168, 188, 37, 157 }
app web.1 - - Session ID:  {}
app web.1 - - Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
app web.1 - - Compression Methods:  { 0 }
app web.1 - - ***
app web.1 - - http-nio-31384-exec-5, WRITE: TLSv1 Handshake, length = 75
app web.1 - - http-nio-31384-exec-5, WRITE: SSLv2 client hello message, length = 101
app web.1 - - http-nio-31384-exec-5, READ: TLSv1 Alert, length = 2
app web.1 - - http-nio-31384-exec-5, RECV TLSv1 ALERT:  fatal, handshake_failure
app web.1 - - http-nio-31384-exec-5, called closeSocket()
app web.1 - - http-nio-31384-exec-5, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
app web.1 - - http-nio-31384-exec-5, IOException in getSession():  javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
app web.1 - - http-nio-31384-exec-5, called close()
app web.1 - - http-nio-31384-exec-5, called closeInternal(true)
app web.1 - - http-nio-31384-exec-5, called close()
app web.1 - - http-nio-31384-exec-5, called closeInternal(true) 
```

所以，在这一点上，我想知道：

1.  我还能做些什么来尝试配置`webapp-runner.jar`使用 cacerts_custom.jks 文件？
2.  如果 Procfile 或运行应用服务器的其他 Heroku 级别组件存在问题？
3.  如果没有其他问题，我可能在我的代码中做错了什么？

* * *

## 更新＃1：

我看到[Using Apache httpclient for https](https://stackoverflow.com/questions/5206010/using-apache-httpclient-for-https)在这里 httpclient 可能存在潜在问题，但我很难相信它今天仍然是一个问题。我会研究并回帖，但如果有人知道答案，请告诉我。

* * *

## 更新#2（2013 年 1 月 15 日）：

如果我按照以下stackoverflow帖子中的内容进行操作：

[收到 SSLHandshakeException：handshake_failure 尽管我的客户忽略了所有证书](https://stackoverflow.com/questions/9828414/receiving-sslhandshakeexception-handshake-failure-despite-my-client-ignoring-al#9837743)

它暗示以下日志是麻烦的迹象：

```
app[web.1]: http-nio-45949-exec-4, WRITE: TLSv1 Handshake, length = 75
app[web.1]: http-nio-45949-exec-4, WRITE: SSLv2 client hello message, length = 101
app[web.1]: http-nio-45949-exec-4, READ: TLSv1 Alert, length = 2
app[web.1]: http-nio-45949-exec-4, RECV TLSv1 ALERT:  fatal, handshake_failure 
```

那么这里有什么错呢？提供服务器证书的一方？那不可能是因为我的本地托管的 web 应用程序可以与那一侧一起工作......除非它在我的本地环境中的 JDK 与 Heroku 上的 JDK 在其 SSL 握手和/或协议的实现方面完全不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:35:20.820

出于许可原因，Heroku 使用的 OpenJDK 构建不包括 Java Cryptography Extensions (JCE)。某些 SSL 证书需要处理 JCE。

您可以按照本文中的步骤将 JCE 包含在要包含在 JDK 中的应用程序中：[https ://devcenter.heroku.com/articles/customizing-the-jdk](https://devcenter.heroku.com/articles/customizing-the-jdk)

在此处下载 JCE：[http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# javascript - Spotify 视频背景

> ID：14149900
> 
> 赞同：1
> 
> 时间：2013-01-04T01:33:23.233
> 
> 标签：javascript, jquery, html

如果您第一次访问 spotify.com，它会播放一段很酷的视频，并且上面会覆盖一些不同的内容。我认为这是一种让人们参与网站并希望复制这种功能的独特方式。

看起来视频大小调整得很漂亮。他们在页面上运行了很多脚本，我想知道产生同样结果所必需的基本内容。我熟悉 JQuery 等，但不是 100% 确定如何使视频随屏幕调整大小并产生此结果。

如果有人能给我一个例子，说明制作这个所需的最低要求，那就太好了。此外，对于移动设备，处理此问题的最佳方法是什么？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T23:13:56.847

我建议简单地看一下[BigVideo.js](http://dfcb.github.com/BigVideo.js/)。看起来很实用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T16:02:17.203

您可以使用一些基本的 CSS 轻松实现这一点

```
<video autoplay loop="loop" preload="auto" src="video.webm"></video>

video {
  width: 100%;
  height: auto;
} 
```

# mysql - sql查询交叉表

> ID：14149902
> 
> 赞同：1
> 
> 时间：2013-01-04T01:33:34.243
> 
> 标签：mysql, sql

我有一个带有以下表格的数据库：

具有以下列的 customer_info 表：

```
custID | storeName     | accName
  1    |  bayport      | name one
  2    |  plainfield   | name two
  3    |  bayport      | name three 
```

处理具有以下列的表：

```
dealID | dealDate     | custID
  1    | 2012-10-15   |   1
  2    | 2012-11-25   |   2
  3    | 2012-12-17   |   3
  4    | 2012-12-17   |   1 
```

具有以下列的 phone_details 表

```
phone_ID  | instore  | online  | received | dealID  
    1     |    1     |    0    |    0     |   1
    2     |    1     |    0    |    0     |   1
    3     |    0     |    1    |    1     |   1    
    4     |    0     |    1    |    0     |   2
    5     |    0     |    1    |    0     |   3
    6     |    0     |    1    |    1     |   3
    7     |    1     |    0    |    1     |   4
    8     |    1     |    0    |    1     |   4 
```

发票明细

```
payment_ID   | due  | paid | tender | dealID
      1      | 1000 | 500  | cash   |    1    
      2      | 500  | 100  | credit |    2 
      3      | 200  | 200  | cash   |    3 
      4      | 350  | 350  | debit  |    4 
```

如何查询此表，以便我的结果在某个日期看起来像这样？

例如，2012-10-15 - 2012-11-25 它看起来像这样

```
 | bayport |   plainfield 
# of instore   |    2    |       0
# of online    |    1    |       1
total          |    3    |       1
# of received  |    1    |       0
total amount   |  1000   |      500 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:03:10.050

与@MichaelBerkowski[的出色答案](https://stackoverflow.com/a/14149976)相比，如果您可以容忍以bayport/plainfield 作为行和instore/online 作为列的数据（根据[我](https://stackoverflow.com/questions/14149902/sql-query-cross-tab/14150113#comment19598021_14149902)上面的评论），您可以简单地执行以下操作：

```
SELECT    c.storeName,
          SUM(p.instore) AS `# of instore`,
          SUM(p.online ) AS `# of online`
FROM      customer_info c
LEFT JOIN deals         d
       ON d.custID    = c.custID
      AND d.dealDate  = '2012-10-15'
LEFT JOIN phone_details p USING (dealID)
GROUP BY  storeName 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/d288b/1/0)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T01:46:11.630

这绝对是一个奇怪的配置。

这将需要 a `UNION ALL`which 获取每个的`online`和`instore`值，以使它们成为行而不是列。然后使用 a 将其旋转`SUM(CASE...)`以将商店名称转换为列。

```
SELECT 
  calltype,
  /* In the outer query, pivot the storeName */
  SUM(CASE WHEN storeName = 'bayport' THEN num ELSE 0 END) AS bayport,
  SUM(CASE WHEN storeName = 'plainfield' THEN num ELSE 0 END) AS plainfield
FROM (
    /* First half gets the instore */
    SELECT
      /* String literal for label column */
      '# of instore' AS calltype,
      COUNT(*) AS num,
      storeName
    FROM
      customer_info c
      LEFT JOIN deals d ON c.custID = d.custID
      LEFT JOIN phone_details p ON d.dealID = p.dealID
    WHERE instore = 1 AND dealDate = '2012-10-15'
    GROUP BY storeName, calltype
    UNION ALL
    /* Second half gets the online */
    SELECT
      '# of online' AS calltype,
      SUM(online) AS num,
      storeName
    FROM
      customer_info c
      LEFT JOIN deals d ON c.custID = d.custID
      LEFT JOIN phone_details p ON d.dealID = p.dealID
    WHERE online = 1 AND dealDate = '2012-10-15'
    GROUP BY storeName, calltype
) totals 
GROUP BY calltype, storeName 
```

[http://sqlfiddle.com/#!2/af18b/13](http://sqlfiddle.com/#!2/af18b/13)

# python - 使用正则表达式的 Python 深奥解释器

> ID：14149904
> 
> 赞同：3
> 
> 时间：2013-01-04T01:33:38.560
> 
> 标签：python, regex, esoteric-languages

我一直在搞乱 ZOMBIE 深奥的语言，而我一直在使用的解释器正在抛出一些错误。

解释器在这里：[http ://esolangs.org/wiki/User:Marinus/ZOMBIE_interpreter](http://esolangs.org/wiki/User:Marinus/ZOMBIE_interpreter)

规范在这里：[http ://www.dangermouse.net/esoteric/zombie.html](http://www.dangermouse.net/esoteric/zombie.html)

我在 Mac 上使用终端。当我通过解释器运行 Hello World 程序时，

```
HelloWorld is a zombie
summon
task SayHello
    say "Hello World!"
animate
animate 
```

终端说——

```
HelloWorld is a zombie
                     ^
SyntaxError: invalid syntax 
```

我相信解释器中识别语法的正则表达式存在问题，但我没有使用它们的经验。这是我认为应该归咎的代码：

```
comment_re = re.compile("\{.*?\}", re.DOTALL)
declaration_re = re.compile(r'([A-Za-z0-9_\-]*?)\s+is\s+an?\s+(zombie|enslaved undead|' + \
                        r'ghost|restless undead|vampire|free-willed undead' + \
                        r'|demon|djinn)', re.I)

task_re = re.compile("task\s+([A-Za-z0-9_-]*)", re.I)
remember_re = re.compile("remember\s+(.*)", re.I)

string_re = re.compile('".*?"')
integer_re = re.compile('[\-0-9\.]+') 
```

对不起，我不能更具体......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:42:26.927

它对我来说很好：

```
temp $ python zombie.py zombie.z 
Hello World! 
```

我直接从您为解释器发布的链接中复制了解释器的源代码，并将其保存`zombie.py`在当前目录中（`~/temp`尽管这无关紧要）。然后我直接从您的帖子中复制了僵尸HelloWorld程序的源代码并将其保存为`zombie.z`（再次在当前目录中）。它打印出来`Hello World!`，因为我假设它应该......

(python2.7, Mac OS X 10.5.8)

SyntaxError 使我相信您正在尝试`zombie.z`直接从 python 运行（或您所称的任何内容），例如`python zombie.z`或类似的东西......那是行不通的。

* * *

顺便说一句，我认为我和您上一个问题的海报（独立地）选择`.z`作为`zombie`源文件的扩展名很有趣。应该是自然而然的选择...

# css - 水平样式的下拉菜单

> ID：14149908
> 
> 赞同：-3
> 
> 时间：2013-01-04T01:34:42.930
> 
> 标签：css

当您将鼠标悬停在产品上时，有谁知道如何在 CSS 中以水平样式创建下拉菜单，下拉菜单将水平弹出

第一个：

主页 | 关于 | **产品**| 接触

**苹果 | 香蕉 | 橙色 | 浆果 | 梨**

///////////////////////////////////////// /////////////

第二个：

家

关于

**产品 - 苹果 | 香蕉 | 橙色 | 浆果 | 梨**

接触

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:51:48.060

给你。

考虑到您想要水平类型的下拉菜单并考虑您可能想要向其中添加子菜单。这是一个例子。

[水平下拉菜单](http://www.dynamicdrive.com/style/csslibrary/item/jquery_drop_line_tabs/)

# jquery-ui - 使用 JQuery 进行拖放匹配

> ID：14149910
> 
> 赞同：1
> 
> 时间：2013-01-04T01:35:24.023
> 
> 标签：jquery-ui, drag-and-drop, draggable, droppable

我有 9 个可拖动元素和 9 个插槽。5 个可拖动元素需要匹配它们自己的插槽。其他 4 个元素需要可放置在其余 4 个插槽中的任何一个上……它们放置在四个插槽中的哪个上都没有关系。

以下代码适用于在 5 个插槽上具有唯一匹配的 5 个可拖动元素，但其他 4 个 ( `#element_2`) 只允许一个可拖动元素。有什么想法可以使`#element_2`可拖动元素（全部 4 个）与任何可放置的`#slot_2`插槽匹配吗？

```
<!doctype html>
<html lang="en">
<head>
<title>Assay - Overview</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript">

$(init);

function init() {

    $('#element_1').data( 'number', 1 ).attr( 'id', 'card'+1 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_3').data( 'number', 3 ).attr( 'id', 'card'+3 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_5').data( 'number', 5 ).attr( 'id', 'card'+5 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_7').data( 'number', 7 ).attr( 'id', 'card'+7 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_9').data( 'number', 9 ).attr( 'id', 'card'+9 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

  // Create the element slots

    $('#slot_1').data( 'number', 1 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_3').data( 'number', 3 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_5').data( 'number', 5 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_7').data( 'number', 7 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_9').data( 'number', 9 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );
}

function handleCardDrop( event, ui ) {
  var slotNumber = $(this).data( 'number' );
  var cardNumber = ui.draggable.data( 'number' );

  if ( slotNumber == cardNumber ) {
    ui.draggable.addClass( 'correct' );
    ui.draggable.draggable( 'disable' );
    $(this).droppable( 'disable' );
    ui.draggable.position( { of: $(this), my: 'left top', at: 'left top' } );
    ui.draggable.draggable( 'option', 'revert', false );
  } 
}
</script>
</head>
<body>
<div id="content">
  <div id="cardPile"> 
  <div id="element_3">Harvest Cells for Virus stock generation</div>
  <div id="element_2">Maintain Cell Line</div>
  <div id="element_9">Freeze Cell Line for long term storage</div>
  <div id="element_2">Maintain Cell Line</div>
  <div id="element_5">Harvest Cells for TCID50</div>
  <div id="element_2">Maintain Cell Line</div>
  <div id="element_7">Harvest Cells for Microneut</div>
  <div id="element_1">Establish Cell Line</div>
  <div id="element_2">Maintain Cell Line</div> 
  </div>
  <div id="cardSlots"> 
  <div id="slot_1" style="position: absolute; left: 797px; top: 223px;"></div>
  <div id="slot_2" style="position: absolute; left: 958px; top: 281px;"></div>
  <div id="slot_3" style="position: absolute; left: 1044px; top: 428px;"></div>
  <div id="slot_2" style="position: absolute; left: 1015px; top: 597px;"></div>
  <div id="slot_5" style="position: absolute; left: 884px; top: 709px;"></div>
  <div id="slot_2" style="position: absolute; left: 712px; top: 708px;"></div>
  <div id="slot_7" style="position: absolute; left: 580px; top: 600px;"></div>
  <div id="slot_2" style="position: absolute; left: 550px; top: 430px;"></div>
  <div id="slot_9" style="position: absolute; left: 637px; top: 281px;"></div> 
  </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:29:12.830

这只是没有重复 id 引用 $('#element_2') 的问题

# for-loop - For 循环遍历数组的一段

> ID：14149911
> 
> 赞同：0
> 
> 时间：2013-01-04T01:35:26.780
> 
> 标签：for-loop, google-apps-script

我需要使用该`for`子句遍历一个数组，但从某个特定索引开始，直到最大迭代次数。

下面的代码完成了这项任务，但对我来说看起来很糟糕：有更好的方法吗？

```
 var offset = 10, max = 5;
  for (var i = 0; (i + offset) < data.length && i < max; i++) {
    doSomething(data[i + offset]);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:49:11.510

如果我正确理解您的问题，您只需要将 i 初始化为偏移量。

```
var offset = 10, max = 5 + offset;
for (var i = offset; i < data.length && i < max; i++) {
    doSomething(data[i]);
} 
```

编辑：起初不了解最大值。

# java - Java类中方法和字段访问修饰符的简写？

> ID：14149915
> 
> 赞同：1
> 
> 时间：2013-01-04T01:35:57.877
> 
> 标签：java, class, access-modifiers

是否有定义类字段和方法的访问修饰符的简写？更多的是 C++ 风格，我已经搜索过，但不断提出网站来解释每个修饰符的用途，而不是简写。

```
public class myNum {
    public int getNum() { return 0; }
    public void setNum(int n) { int num = n; }
    private int num;
    private String value;
} 
```

可能成为

```
public class myNum {
    public:
        int getNum() { return 0; }
        void setNum(int n) { int num = n; }
    private:
        int num;
        String value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:38:33.613

对于方法不。对于变量，您可以尝试

`public int n1,n2,n3..n;`

`private int n1,n2,n3..n;`

但正如你所看到的，它很快就会变得一团糟。即便如此，它也不允许在一个访问修饰符下使用不同的类型。

但真的不行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:50:26.763

虽然没有定义方法的缩写，但 Eclipse 可以自动为您生成 getter 和 setter 方法。

# jquery - jQuery隐藏/显示随机不起作用？

> ID：14149917
> 
> 赞同：0
> 
> 时间：2013-01-04T01:36:21.243
> 
> 标签：jquery

我在这里束手无策。我有一个 .each() 函数，它循环并有条件地隐藏/显示我的固定宽度 div 中的一列。如果显示该列，则会缩小前一列以使所有内容都适合，并且在隐藏新列时将其扩展为原始宽度。我的代码在 80% 的情况下都能完美运行，但有时完全随机地它不起作用，并且显示新列，并且前一列被扩展。如果我只是单击屏幕上的其他位置，则会立即修复。发生了什么？？

```
function doLoop(condition) {
    if (condition) {    
        $(".utility-split-rmdr").each(function(index) {
            $(this).prev().animate({width: "97px"}, 200);
            $(this).hide();
        });
    } else {
        $(".utility-split-rmdr").each(function(index) {
            $(this).hide();
            $(this).prev().animate({width: "130px"}, 200);
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:58:37.893

试试这个：

```
function doLoop(condition) {
    if(!$(".utility-split-rmdr").is(':animated')) {
        if (condition) {    
            $(".utility-split-rmdr").each(function(index) {
                $(this).prev().animate({width: "97px"}, 200);
                $(this).hide();
            });
        } else {
            $(".utility-split-rmdr").each(function(index) {
                $(this).hide();
                $(this).prev().animate({width: "130px"}, 200);
            });
        }
    }
} 
```

这将只允许在当前没有动画列的情况下执行代码。

如果它仍然中断，至少您知道这不是因为动画干扰。

# actionscript-3 - AS3：如何用另一个数组中的对象对一个数组中的对象进行测试

> ID：14149918
> 
> 赞同：0
> 
> 时间：2013-01-04T01:36:37.030
> 
> 标签：actionscript-3

据我了解：

如果我想测试两个非数组对象，代码将是：

```
if(player.hitTestObject(enemy))
{
} 
```

如果我用数组中的每个对象测试一个非数组对象，同样的代码也可以工作。

但是，如果我想用第二个数组中的每个对象对一个数组中的每个对象进行命中测试，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:34:39.800

这是一个资源友好型的，如果您只想知道**任何**物品是否会击中**任何**其他物品：

```
public function anyItemWasHit( arr1:Array, arr2:Array ) : Boolean {
    for each( var item:DisplayObject in arr1) 
        if( itemHitArrItem( item, arr2 ) ) 
            return true;
    return false;
}

private function itemHitArrItem( item:DisplayObject, arr:Array ) : Boolean {
    for each( var arrItem:DisplayObject in arr ) 
        if( item.hitTestObject( arrItem ) )
            return true;
    return false;
} 
```

基于前面的示例，这里有一个返回命中**任何**其他项目的**所有项目的数组：**

 **```
public function itemsThatHitOtherItems( arr1:Array, arr2:Array ) : Array {
    var items:Array = [];
    for each( var item:DisplayObject in arr1 )
        if( itemHitArrItem( item, arr2) )
            items[items.length] = item;
    return items;
} 
```

最后，返回一个包含所有对的数组（击中另一个项目的项目**，**以及被击中的项目）：

```
public function allPairsThatHitEachOther( arr1:Array, arr2:Array ) : Array {
    var pairs:Array = [];
    for each( var item:DisplayObject in arr1 ) {
        var itemPairs:Array = allPairsForItem( item, arr2 );
        if ( itemPairs.length > 0 ) 
            pairs = pairs.concat( itemPairs );
    }
    return pairs;
}

private function allPairsForItem( item:DisplayObject, array:Array ) : Array {
    var pairs:Array = [];
    for each( var otherItem:DisplayObject in array )
        if( item.hitTestObject( otherItem ) )
            pairs[pairs.length] = [item, otherItem];
    return pairs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:53:49.290

```
outerLoop: for (var i:int = 0; i < arr1.length; i++) {
    var obj1:DisplayObject = arr1[i] as DisplayObject;
    for (var j:int = 0; j < arr2.length; j++) {
        var obj2:DisplayObject = arr2[j] as DisplayObject;
        if (obj1.hitTestObject(obj2)) {
            // these 2 hit each other
            break outerLoop;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:48:31.050

我猜你真的只是在问语法。在这种情况下，它将是：

在哪里：

*   indexOne 从 0 变为 arrayOne.length - 1（可以在 for 循环中）
*   indexTwo 从 0 变为 arrayTwo.length - 1（也可以在嵌套的 for 循环中）

    arrayOne[indexOne].hitTestObject(arrayTwo[indexTwo])**

# java - 尝试从在某些标签之间读取的缓冲阅读器中提取子字符串

> ID：14149919
> 
> 赞同：0
> 
> 时间：2013-01-04T01:36:57.633
> 
> 标签：java, android, bufferedreader

我正在使用 bufferedreader 提取 5 个网页，每个网页用空格分隔，我想使用一个子字符串来提取每个页面的 url、html、源和日期。但是我需要有关如何正确使用子字符串来实现这一点的指导，干杯。

```
public static List<WebPage> readRawTextFile(Context ctx, int resId) {   

    InputStream inputStream = ctx.getResources().openRawResource(
            R.raw.pages);

    InputStreamReader inputreader = new InputStreamReader(inputStream);
    BufferedReader buffreader = new BufferedReader(inputreader);
    String line;
    StringBuilder text = new StringBuilder();

    try {
        while ((line = buffreader.readLine()) != null) {

            if (line.length() == 0) {       
                // ignore for now 
                                //Will be used when blank line is encountered
            }

            if (line.length() != 0)  {
         //here I want the substring to pull out the correctStrings
                int sURL = line.indexOf("<!--");
                    int eURL = line.indexOf("-->");
                line.substring(sURL,eURL);
                **//Problem is here**
            }
        }
    } catch (IOException e) {
        return null;

    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:49:09.733

我想你想要的是这样的，

```
public class Test {
   public static void main(String args[]) {
    String text = "<!--Address:google.co.uk.html-->";
    String converted1 = text.replaceAll("\\<!--", "");
    String converted2 = converted1.replaceAll("\\-->", "");
    System.out.println(converted2);
   } 
```

}

结果显示：地址：google.co.uk.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:07:15.597

在 catch 块中不要`return null`使用`printStackTrace();`. 它将帮助您查找是否出现问题。

```
 String str1 = "<!--Address:google.co.uk.html-->";
        // Approach 1
        int st = str1.indexOf("<!--"); // gives index which starts from <
        int en = str1.indexOf("-->");  // gives index which starts from -
        str1 = str1.substring(st + 4, en);
        System.out.println(str1);

        // Approach 2
        String str2 = "<!--Address:google.co.uk.html-->";
        str2 = str2.replaceAll("[<>!-]", "");
        System.out.println( str2); 
```

**注意 $100：请**注意，在 replaceAll 中使用正则表达式将替换包含正则表达式参数的字符串中的所有内容。

# javascript - jQuery 过渡？

> ID：14149924
> 
> 赞同：-4
> 
> 时间：2013-01-04T01:37:53.687
> 
> 标签：javascript, jquery, css, animation, transition

我想使用 jquery 访问 li 元素上的悬停状态。在悬停在它上面之前，它是灰色的。当您将鼠标悬停在它上面时，它会变成红色并带有下划线。您可以在 css 中执行此操作，但诀窍是我希望它从 li 的左侧过渡到右侧，因此它看起来像是在滑动颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:45:56.653

如果您正在谈论为 li 的下划线设置动画：

创建一个细的（2px 高，li 的宽度）红色 div，其中包含一个细（相同大小）的白色 div。您应该只能看到白色，完全覆盖红色 div。

确保红色 div 具有溢出：隐藏为 css 属性。然后做一个 jQuery 动画，将白色的 div 向右移动，创建一条红线慢慢地在 li 下划线的错觉。当有人将鼠标悬停在任何 li 上时，找到最近的“红/白”嵌套 div 并在白色 div 上执行动画。有点像这样：

```
$("li").hover(function(){
    $(this).next('div').children('div').animate({left: (width of div)px});
}); 
```

next('div') 找到红色 div，然后 children('div') 在其中找到白色 div。animate 函数将白色 div 移开，露出红色 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:45:36.937

最好在 li 维度中具有所需颜色的背景图像。这样就可以在mouseover 和mouseout 事件li 时制作动画效果。在鼠标悬停时，将背景图像从一些“-”的背景位置设置为 0，而在鼠标移出时则相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:50:27.940

你试过这个例子吗：

[http://www.incg.nl/blog/2008/hover-block-jquery/](http://www.incg.nl/blog/2008/hover-block-jquery/)

或者使用 lavalamp 插件： [http ://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/](http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/)

# javascript - 我可以用什么来替换嵌套的异步回调？

> ID：14149925
> 
> 赞同：4
> 
> 时间：2013-01-04T01:38:01.533
> 
> 标签：javascript, node.js, asynchronous, callback, middleware

假设我想发送一封电子邮件然后更新数据库，这两个操作都是异步的。这就是我通常会写它的方式。

```
send_email(function(err, id){
    if(err){
        console.log("error");
    }else{
        update_database(id,function(err, id){
            if(err){
                console.log("error");
            }else{
                console.log("success");
            }
        });
    }
}); 
```

我想用中间件来代替。

```
var mid = {};

mid.send_email = function(){
    return function(next){
        send_email(function(err,id){
            if(err){
                console.log("error");
            }else{
                next(id);
            }
        });
    }
}

mid.update_database = function(){
    return function(id,next){
        update_database(id,function(err,id){
            if(err){
                console.log("error");
            }else{
                next(id);
            }
        });
    }
}

mid.success = function(){
    return function(id,next){
        console.log("success")
        next(id);
    }   
} 
```

堆叠中间件。

```
middleware.use(mid.send_email());
middleware.use(mid.update_database());
middleware.use(mid.success()); 
```

手头有两个主要问题。

*   如何使用中间件代替嵌套回调？
*   是否可以将变量传递给`next()`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T02:11:38.390

您想要的是能够处理异步控制流。很多 js 库可以帮助你实现这一点。您可以尝试`Async`使用该函数的库，`waterfall`因为您希望能够将变量传递给将要执行的下一个函数：

[https://github.com/caolan/async#waterfall](https://github.com/caolan/async#waterfall)

“连续运行一系列函数，每个函数将其结果传递给数组中的下一个。但是，如果任何函数将错误传递给回调，则不会执行下一个函数，并且会立即调用主回调并显示错误。”

例子 ：

```
async.waterfall([
    function(callback){
        callback(null, 'one', 'two');
    },
    function(arg1, arg2, callback){
        callback(null, 'three');
    },
    function(arg1, callback){
        // arg1 now equals 'three'
        callback(null, 'done');
    }
], function (err, result) {
   // result now equals 'done'    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:36:43.043

[**使用CommonJS`module.exports`**](http://nodejs.org/api/modules.html)可能会更好。

你可以像这样创建一个文件：

```
module.exports = function (){
    function sendEmail(doneCallback){
        // do your stuff, then when you are done:
        if(!err){
            doneCallback(whatever,args,you,need);
        }
    }

    function updateDB(success){
        // do your stuff, then when you are done:
        success(whatever,args,you,need);
    }

    return {
        send: sendEmail,
        update: updateDB
    };
}; 
```

然后在你的`server.js`：

```
var lib = require('./mylib.js');

lib.send(function(result){
   console.log(result);
}); 
```

这是一个类似的模式，它可能会让你更好地理解我的意思。它由库烘焙 a`function`并将其传递给需要链接的任何人组成，如下所示（更实际的示例，这次是客户端）：

```
ui.bistate($('#mybutton'), function(restore){
    $.ajax({
        url: '/api/1.0/catfood',
        type: 'PUT',
        data: {
            catfood: {
                price: 1.23,
                name: 'cheap',
                text: 'Catzy'
            }
        }
    }).done(function(res){
        // stuff with res
        restore();
    });
}); 
```

在图书馆中，这`restore`就是提供的方式：

```
var ui = function(){
    function bistate(button, action) {
        var originalText = buttonText.data('text'),
            disabledText = buttonText.data('text-disabled');

        function restore(){
            button.prop('disabled', false);
            button.text(originalText);
        }

        function disable(){
            button.prop('disabled', true);
            button.text(disabledText);
        }

        button.on('click', function(){
            disable();
            action(restore);
        });
        restore();
    }

    return {
        bistate: bistate
    };
}(); 
```

允许消费者在想要恢复按钮时控制流程，并让库不必处理消费者想要在两者之间进行异步操作的复杂情况。

总的来说，要点是：来回传递回调是**巨大的**，并且使用*得不够广泛*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T03:51:32.243

一段时间以来，我一直在工作中使用[Queue.js 。](https://github.com/mbostock/queue)

# android - 具有 layout_marginStart 和其他未在 MonoDroid 中构建的属性的布局，适用于 Eclipse ADT

> ID：14149926
> 
> 赞同：2
> 
> 时间：2013-01-04T01:38:09.477
> 
> 标签：android, layout, xamarin.android

我正在尝试在 MonoDroid 中使用一些布局属性，但它不会构建：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_marginStart="16dip"
    android:layout_marginEnd="16dip" /> 
```

这在 Eclipse ADT 中构建，但我在 Visual Studio 中收到此错误：

```
No resource identifier found for attribute 'layout_marginStart' in package 'android'
No resource identifier found for attribute 'layout_marginEnd' in package 'android' 
```

该项目设置为面向 Android 4.1，API 级别 16。

我可以在非布局小部件（如 Button）上使用 layout_margin* 属性，但它们不适用于布局小部件（RelativeLayout、LinearLayout 等）。同样，一切都在 Eclipse ADT 中工作，但在 Visual Studio 中失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:07:32.213

This is now building in Mono for Android 4.4.54

# polygons - 在一组多边形中不跨越任何交叉边的快速算法

> ID：14149930
> 
> 赞同：5
> 
> 时间：2013-01-04T01:38:37.390
> 
> 标签：polygons, planar-graph

我有许多多边形，每个多边形都表示为一个点列表。我正在寻找一种快速算法来遍历多边形列表并取消所有交叉边，直到没有交叉边为止。

当前版本的伪代码：

```
While True:
    For each pair of polygons:
         for edge1 in first_polygon:
             for edge2 in second_polygon:
                 if edges_cross(edge1,edge2): # Uses a line segment intersection test
                     uncross_edges(first_polygon,second_polygon,edge1,edge2)
    If no edges have been uncrossed:
        break 
```

这可以通过用递归替换 while 循环来改进。但是，它在性能方面仍然很差。

下面是解开*的简单示例。实际上会有大量的多边形和每个多边形的相当数量的点（大约 10-500）。红线显示哪些两条边未被交叉。结果应该始终是一系列平面图，尽管不确定是否有多个有效结果或只有一个。

编辑：这次我先添加线条，然后添加点，并使用更复杂的形状。假装点是固定的。

![例子](../Images/301117163bf3fb2647c88998533a70ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:03:03.570

首先，让我们说明您想要什么（如果我没记错的话）。假设您有两个多边形，其中一个的边`(a, b)`与另一个的边相交`(s, r)`。这些多边形也具有顺时针方向，因此您知道 之后的下一个顶点`b`，以及 之后的下一个顶点`r`。由于边缘交叉，您将它们都删除，并添加四个新的。您添加的新内容是：`(a, r)`, `(r, next(b))`; `(s, b)`, `(b, next(r))`. 所以你再次有两个多边形。如下图所示。请注意，通过最初仅删除两条边（每个多边形中的一条），所有交叉都已解决。

![在此处输入图像描述](../Images/ed925793677cd46031f0ba7c71ff6bc4.png)

加快每次迭代的简单实现`O(n^2)`并不完全容易，每个多边形 500 个点是一个非常需要担心的数量。如果您决定这次需要改进，我最初的建议是以某种聪明的方式使用[Bentley-Otmann 算法](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)。聪明的方法是运行算法，然后当你找到一个交叉点时，你执行上面的过程来消除交叉点，然后你更新引导算法的事件。希望可以更新要处理的事件，而不会使算法在这种情况下无用，但我没有证据证明这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:25:43.597

您似乎希望最终得到一个嵌入的平面多边形，其顶点正是给定的点集合。点上所需的“顺序”是您通过绕过多边形的边界并按照它们出现的顺序枚举顶点而得到的。

对于给定的点集合，通常会有多个具有此属性的嵌入多边形；例如，考虑以下点列表：

```
(-1,-1), (0,0), (1,0), (1,1), (0,1) 
```

此列表定义了一个符合您标准的多边形（如果我理解正确的话）。但是此列表的以下顺序也是如此：

```
(-1,-1), (1,0), (0,0), (1,1), (0,1) 
```

这是一种可行的算法（我不知道快速）。

首先，按 x 坐标（例如使用快速排序）以升序对您的点进行排序（称为此列表 L）。

其次，找到凸包（例如用 quickhull）；凸包的边界将包含排序列表 L 中最左边和最右边的点（称为这些 L[1] 和 L[n]）；令 S 为 L[1] 和 L[n] 边界上的点的子集。

您想要的列表是 S，按照它在 L 中出现的顺序（这也是它在凸包边界中出现的顺序），然​​后是其他元素 LS，其顺序与它们在 L 中出现的顺序相反。

前两个操作通常需要时间 O(n log n)（最坏情况 O(n^2)）；最后一个需要时间 O(n)。您得到的多边形将是凸包的下边界（例如，从左到右），以及它们上方从右到左的“之字形”中的其余点。

# c# - RegEx 用于 6 位十进制和 1-4 位以上

> ID：14149931
> 
> 赞同：1
> 
> 时间：2013-01-04T01:38:40.040
> 
> 标签：c#, regex

我已经尝试并尝试对此进行研究，并尝试了多次表达式迭代，但似乎仍然无法正确处理。我放弃了，请有人帮忙。

我有一个文本框，在文本框更改时，我用 regex.replace 文本替换文本我需要文本框只允许 \d{6} 后跟一个 . 然后 \d{1,4}

接受 123456.1、123456.12、123456.123、123456.1234

不接受 123.45612、aqwerty.12、123456..12

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:40:09.687

你试过这个模式吗？`.`也许你忘了逃跑`\`

```
^\d{6}\.\d{1,4}$ 
```

![在此处输入图像描述](../Images/9474fb3672425b38cacbd9905fbe1ba7.png)

# objective-c - NSSet：返回一个对象的 NSArray，按每个对象的某些属性上的字符串列表排序？

> ID：14149934
> 
> 赞同：-1
> 
> 时间：2013-01-04T01:39:32.890
> 
> 标签：objective-c, ios, nsarray, nsset

我有一个`NSSet`对象。

`MyObject`集合中的每个对象都是一个具有名为 的属性的实例`name`。

我有另一个`NSArray`名为 nameIndexes 的名称，其中包含名称值。

我想要一个函数，它接受`NSSet`并返回一个排序数组，该数组使用 name 属性根据其在 nameIndexes 数组中的位置进行排序。

**编辑：**

对不起，我的误导，这是一个例子：

我有一组 MyObject（可能顺序不同）：

```
MyObject1 {name:@"A"}

MyObject2 {name:@"B"}

MyObject3 {name:@"C"} 
```

我还有另一个名称数组：

```
{"B", "A", "C"} 
```

我想要一个 NSArray：

```
{MyObject2, MyObject1, MyObject3} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T01:48:04.813

```
NSSet *set = //your set.

NSArray *nameIndexes = //the array of names for sorting.

NSArray *result = [[set allObjects] sortedArrayUsingComparator:^NSComparisonResult(MyObject *obj1, MyObject *obj2) {
    int index1 = [nameIndexes indexOfObject:obj1.name];
    int index2 = [nameIndexes indexOfObject:obj2.name];
    return [[NSNumber numberWithInt:index1] compare:[NSNumber numberWithInt:index2]];
}]; 
```

Not 100% certain what you are asking but this will sort take the set of names and turn it into a sorted array sorted based on the index of the names in a second array.

**After edit**

Edit... ok, so your edit completely changed the question. Anyway, from the edit you can just do...

```
NSArray *result = [[set allObjects] sortedArrayUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:"name" ascending:YES]]]; 
```

This will take the set and return a sorted array sorted by the name property of the objects in alphabetical order.

# typescript - 打字稿历史js冲突

> ID：14149936
> 
> 赞同：2
> 
> 时间：2013-01-04T01:40:02.610
> 
> 标签：typescript

我正在使用下面链接中的 history.js 声明文件。

[History.js 声明文件](https://github.com/borisyankov/DefinitelyTyped/blob/master/history/history-1.7.d.ts)

但是，“历史”对象与 lib.d.ts 中的本机历史对象冲突。有没有办法克服这个问题？我进行了三次检查，包括对 history.js 声明文件的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:36:08.713

I have sent a pull request to the Definitely Typed project to change the definition file to this:

```
interface HistoryAdapter {
    bind(element, event, callback);
    trigger(element, event);
    onDomLoad(callback);
}

interface History {
    enabled: bool;
    pushState(data, title, url);
    replaceState(data, title, url);
    getState();
    getHash();
    Adapter: HistoryAdapter;
    back();
    forward();
    go(X);
    log(...messages: any[]);
    debug(...messages: any[]);
} 
```

This gracefully adds the additional properties and methods to the existing interface and so on to the existing History class definition, so using:

```
var history = new History(); 
```

Should now work. Just [grab the latest History definition from Definitely Typed](https://github.com/borisyankov/DefinitelyTyped/blob/master/history/history-1.7.d.ts).

## Edit:

Github links have changed (yet again). File is now at: [https://github.com/borisyankov/DefinitelyTyped/tree/master/history](https://github.com/borisyankov/DefinitelyTyped/tree/master/history)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:46:12.707

当然，只需将您的对象转换为`HistoryStatic`DefinitelyTyped 提供的接口即可。

```
var h = new History();
h = <HistoryStatic>h;
h.getState(); 
```

如果声明文件扩展已经提供`History`的接口`lib.d.ts`而不是创建自己的接口会更好。或许是有意为之，或许是被忽视了。

# svn - SVN 与上下文菜单比较被禁用 - IntelliJ

> ID：14149939
> 
> 赞同：1
> 
> 时间：2013-01-04T01:40:39.183
> 
> 标签：svn, intellij-idea

我最近从 Eclipse 切换到 IntelliJ。我的项目使用 SVN。在 IntelliJ 中，我可以很好地提交或更新代码。但是，当我想将当前代码库与存储库中的最新代码库进行比较时，在上下文菜单中`Subversion > Compare with Latest Repository Version`，此菜单被禁用。与其他比较菜单或显示当前版本相同。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:30:36.283

IntelliJ IDEA 目前不支持 Subversion 目录上的“比较”操作。您可以在单个文件上调用“比较”，并且可以使用 Changes | 存储库视图以查看对存储库的最新提交。

对应的功能请求是[http://youtrack.jetbrains.com/issue/IDEA-55335](http://youtrack.jetbrains.com/issue/IDEA-55335)

# python - 在不应该返回 None 类型的 grouper 时重新组合

> ID：14149942
> 
> 赞同：2
> 
> 时间：2013-01-04T01:41:01.483
> 
> 标签：python, django

我目前正在尝试使用重组模板标签按发布年份排序博客文章发布日期列表。

我传递到我的上下文中以重新组合的查询集是：

```
 'post_archive_months': Post.objects.published().\
 filter(site__id=settings.SITE_ID).dates('publish','month').reverse(), 
```

在模板中，我这样称呼它：

```
<section class="blog_archive_block">
  <h4>Blog Archive</h4>
    {% regroup post_archive_months by year as post_archive_dates %}
    <ul class="" id="">
      {% for year in post_archive_dates %}
      <li>
        <div class="header_box">
          <h4>{{year.grouper}} <a href="#" class="arrow_up"></a></h4>
        </div>
        <div class="content_box">
          <ul class="month">
          {% for month in year.list %}
            <li>
              <a href="/blog/{{year.grouper}}/{{month|date:'M'}}">{{month|date:"F"}}</a>
            </li>
          {% endfor %}
          </ul>
        </div>
      </li>
      {% endfor %}
    </ul>
</section> 
```

返回的数据是：

```
[{'list': [[datetime.datetime(2012, 9, 1, 0, 0, tzinfo=<UTC>), datetime.datetime(2012, 5,    
1, 0, 0, tzinfo=<UTC>), datetime.datetime(2012, 4, 1, 0, 0, tzinfo=<UTC>), 
datetime.datetime(2011, 10, 1, 0, 0, tzinfo=<UTC>), datetime.datetime(2011, 8, 1, 0, 0,   
tzinfo=<UTC>)]], 'grouper': None}] 
```

我原以为石斑鱼会是一年，或者至少是 None 类型之外的东西，但情况似乎并非如此。

如果您需要我提供更多信息，请告诉我。谢谢！

# listview - 如何在列表视图项模板中添加数据图标

> ID：14149950
> 
> 赞同：0
> 
> 时间：2013-01-04T01:42:29.103
> 
> 标签：listview, kendo-ui, listviewitem

我正在使用 JQuery 初始化语法。

截至目前，我创建了我想要的列表视图链接，如下所示：

```
<li data-icon="featured"><a>My Listview Item Link</a></li> 
```

这给了我一个列表视图链接，左边是“特色”字体图标，后面是链接文本，右边是一个小箭头。

我想要做的是转换为使用模板，但我无法实现与上述相同的结果。这是我到目前为止所拥有的：

```
<script type="text/x-kendo-template" id="mListviewTemplate">
    <a data-role="listview-link">${name}</a>
</script> 
```

这导致了我需要的东西，除了缺少的字体图标。文档说明我可以添加一个`<img>`元素来获取字体图标，但它有点模糊并且没有示例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:54:28.463

只需选择一个元素并向其添加`.km-icon`和`.km-featured`css 类。

```
<script type="text/x-kendo-template" id="mListviewTemplate">
    <span class="km-icon km-featured"></span><a data-role="listview-link">${name}</a>
</script> 
```

您可以在[kendo 的移动演示页面上](http://demos.kendoui.com/mobile/listview/index.html)检查图标，看看它是如何呈现的。

# ios - iOS 视图中不同 UI 组件的单独滚动条

> ID：14149951
> 
> 赞同：1
> 
> 时间：2013-01-04T01:42:30.327
> 
> 标签：ios, uitableview, uiwebview, scrollbar

我正在创建一个具有`single view`. 视图的左侧是 a `tableView`，右侧是 a `webView`。当用户点击表格中的一个单元格时，`webView`右侧会加载该单元格存储的 URL 指向的网页。现在，一切正常，除了整个屏幕只有一个`scroll bar`.

我想要的是类似于**Facebook 应用程序**的东西，您可以选择向左`tableView`滚动而不滚动 webView，并且滚动`webView`不会影响`tableView`. 不知道是不是模拟器运行的问题，`scrollbar`整个App好像只有一个，如果我在Mac的触摸板上滚动手指，整个iPad模拟器屏幕都会滚动，而不是单独滚动`UI area (tableView or webView)`我的鼠标在哪里。任何人都可以解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:47:11.380

听起来您的视图层次结构有问题。您需要确保 Web 视图不是表格视图的子视图，反之亦然。

编辑：根据您提供的屏幕截图，您的网络视图似乎占据了整个屏幕。您需要调整 Web 视图的大小，使其不与表格视图重叠。

# java - 多线程控制台输出不同

> ID：14149954
> 
> 赞同：1
> 
> 时间：2013-01-04T01:42:43.887
> 
> 标签：java, multithreading

多线程新手，我遇到了一些问题和困惑。:)

```
public class NewThread implements Runnable {

    Thread  t;

    NewThread() {
        t = new Thread(this, "Demo Thread");
        System.out.println("Child Thread " + t);
        t.start();
    }

    @Override
    public void run() {

        try {
            for (int i = 5; i > 0; i--) {
                System.out.println("Child Thread: " + i);
                Thread.sleep(500);
            }
        } catch (InterruptedException e) {
            System.out.println("Child Interrupted.");
        }

        System.out.println("Exiting Child Thread.");
    }

}

class ThreadDemo {

    public static void main(String[] args) {

        NewThread t = new NewThread();

        try {
            for (int i = 5; i > 0; i--) {
                System.out.println("Main Thread: " + i);
                Thread.sleep(1000);
            }
        } catch (InterruptedException e) {
            // TODO: handle exception
            System.out.println("Main Thread Interrupted.");
        }

        System.out.println("Main Thread Exiting.");
    }

} 
```

**例外输出**

![在此处输入图像描述](../Images/e730a4492173211d9a42f0f6ead66c99.png)

**我的输出**

![在此处输入图像描述](../Images/2813e784699add017eff8e2ab111309e.png)

为什么我的控制台输出与预期输出不同？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:45:46.050

我认为问题在于您的 NewThread 类的构造函数没有被调用。关于你的构造函数的奇怪部分

```
 NewThread() {
        <STUFF>
    } 
```

是没有访问修饰符，即它缺少`public`关键字。这使得构造函数包私有。如果您的`ThreadDemo`类在不同的包中，它将无法看到构造函数，并且构造函数随后将不会在您调用时执行

> ```
>  NewThread t = new NewThread(); 
> ```

因此，我认为您应该将`public`关键字添加到构造函数中，一切都很好。或者将`NewThread`和`ThreadDemo`类放在同一个包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:04:04.720

您发布的代码很好！我得到了你的预期输出！

我怀疑您开始使用其他代码，其中您使用 main 中的另一个变量“t”覆盖变量“t”。也许您将代码的一部分声明为静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:50:47.790

NewThread 类中的变量`t`不是`NewThread`类型，所以它从不执行子线程循环。您永远不会在 NewThread 对象上调用 start()，因此您看不到其执行的任何输出是有道理的。

System object 是静态的，并且由在此 VM 上执行的所有线程共享。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-04T01:56:17.147

```
class ThreadDemo {

public static void main(String[] args) {

    NewThread t = new NewThread();

    try {
        for (int i = 5; i > 0; i--) {
            System.out.println("Main Thread: " + i);
            Thread.sleep(1000);
            t.run(); //// forgot here
        }
    } catch (InterruptedException e) {
        // TODO: handle exception
        System.out.println("Main Thread Interrupted.");
    }

    System.out.println("Main Thread Exiting.");
} 
```

}

添加 t.run();

# python - 使用 urllib 打开 url 时添加有效负载

> ID：14149956
> 
> 赞同：0
> 
> 时间：2013-01-04T01:42:52.650
> 
> 标签：python, chat, bots

我创建了一个连接到服务器并可以读取消息的聊天机器人，现在我需要发送消息，需要请求有效负载（根据谷歌浏览器上的开发人员工具中的网络选项卡）。我的开瓶器只包含以下内容：

```
import urllib
import urllib2
from cookielib import CookieJar
self.cj = CookieJar()
self.opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(self.cj)) 
```

为了保持连接和阅读消息，我执行以下操作，我执行以下操作：

```
def connect(self,settings,xhr):
    xhr_polling = self.get_code(xhr)
    data = self.opener.open("http://chat2-1.wikia.com:80/socket.io/1/xhr-polling/" + xhr_polling + "?name=HairyBot&key=" + 
        settings['chatkey'] + "&roomId=" + str(settings['room']) + "&t=" + timestamp())
    return data.read() 
```

由 roomId 和 chatkey 组成的设置。timestamp 函数根据服务器的需要创建一个时间戳（对于这个问题不需要知道）。回到问题，如何将有效负载添加到开启程序以向聊天发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:57:48.703

作为建议，我建议使用[Requests](http://docs.python-requests.org)库。它使这些东西变得非常简单：

```
import requests

session = requests.session()  # For connection pooling

def connect(self,settings,xhr):
    xhr_polling = self.get_code(xhr)
    request = session.get('http://chat2-1.wikia.com:80/socket.io/1/xhr-polling/' + xhr_polling, params={
        'name': 'HairyBot',
        'key': settings['chatkey'],
        'roomId': settings['room'],
        't': timestamp()
    })

    return request.text 
```

如果您想发送 POST 请求，只需更改`get`并`post`添加一些数据：

```
def connect(self,settings,xhr):
    xhr_polling = self.get_code(xhr)
    request = session.post('http://chat2-1.wikia.com:80/socket.io/1/xhr-polling/' + xhr_polling, params={
        'name': 'HairyBot',
        'key': settings['chatkey'],
        'roomId': settings['room'],
        't': timestamp()
    }, data={
        'key': 'value'
    })

    return request.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:52:32.677

我不确定您所说的“有效负载”是什么意思，但大概它只是另一个名为`payload`. 如果是这样，您发送它的方式与发送任何其他表单变量的方式相同，并且您已经发送了一堆 - <code>roomId,`t`等。

发送表单变量的一种方法是对它们进行 URL 编码，将它们附加到查询字符串上，然后发送 GET 请求。这就是你现在正在做的事情。（最好使用适当的`urllib`方法，而不是将其与字符串连接一起破解，但最终结果是相同的。）

另一种方法是发送一个 POST 正文。[`urllib2`文档](http://docs.python.org/2/library/urllib2.html)解释了如何做到这一点，网上有很多很好的例子，但基本上你所要做的就是调用`urllib.urlencode()`你的名称-值对，然后将结果作为第二个参数（或作为名为的关键字参数`data`）传递给`open`通话。

换句话说，是这样的：

```
data = self.opener.open("http://chat2-1.wikia.com:80/socket.io/1/xhr-polling/" + xhr_polling,
                        urllib.urlencode(("name", "HairyBot"),
                                         ("key", settings['chatkey']),
                                         ("roomId", str(settings['room']),
                                         ("key", settings['chatkey']),
                                         ("t", timestamp()),
                                         ("payload", payload))) 
```

或者，如果您愿意，大多数服务器将允许您在查询字符串中发送一些参数，而在 POST 数据中发送其他参数，因此您可以不理会现有代码，只需进行一项更改：

```
data = self.opener.open("http://chat2-1.wikia.com:80/socket.io/1/xhr-polling/" + xhr_polling + "?name=HairyBot&key=" + 
    settings['chatkey'] + "&roomId=" + str(settings['room']) + "&t=" + timestamp(),
    urllib.urlencode(("payload", payload))) 
```

# c - 为什么我要在 C 中按值传递函数参数？

> ID：14149959
> 
> 赞同：3
> 
> 时间：2013-01-04T01:43:24.817
> 
> 标签：c, function, pass-by-reference, pass-by-value

我正在为我的一些 C 库上的 C 技能打扫灰尘。在完成了第一个工作实现之后，我现在正在检查代码以使其更高效。目前我的主题是通过引用或值传递函数参数。

我的问题是，为什么我会在 C 中按值传递任何函数参数？代码可能看起来更简洁，但它不会总是比通过引用传递效率低吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T01:52:21.337

因为为计算机编写代码不如为下一个人类编写代码重要。如果您要传递引用，那么任何读者都必须假设任何被调用的函数都可以更改其参数的值，并且有义务在调用之前对其进行检查或复制参数。

你的函数签名是一个契约，它把你的代码分开，这样你就不必为了理解某个区域发生的事情而将整个代码库放到你的脑海中，通过传递引用你会让下一个人的生活变得更糟，作为程序员，你最大的工作应该是让下一个人的生活变得更好——因为下一个人很可能就是你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T01:49:04.497

在 C 中，所有参数都按值传递。真正的引用传递是当您看到修改的效果时根本没有任何显式间接：

```
void f(int c, int *p) {
  c++; // in C you can't change the original paramenter passed like this
  p++; // or this
} 
```

但是，通常需要使用值而不是指针：

```
int sum(int a, int b) {
    return a + b;
} 
```

你不会这样写：

```
int sum(int *a, int *b) {
    return *a + *b;
} 
```

因为它不安全而且效率低下。效率低下，因为有一个额外的间接。此外，在 C 中，指针参数建议调用者将通过指针修改值（尤其是当指向的类型的大小小于或等于指针本身时更是如此）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T01:49:14.693

请参阅[C 中的引用传递](https://stackoverflow.com/questions/2229498/passing-by-reference-in-c)。通过引用传递在 C 中是用词不当。它指的是传递变量的地址而不是变量，但您是通过**值**传递指向变量的指针。

也就是说，如果您要将变量作为指针传递，那么是的，它会稍微更有效率，但主要原因是能够修改它指向的原始变量。如果您不想这样做，建议您按价值衡量以明确您的意图。

当然，就 Cs 较重的数据结构之一而言，所有这些都没有实际意义。无论您喜欢与否，数组都通过指向其第一个变量的指针传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T01:49:26.737

两个原因：

1.  很多时候，您将不得不取消引用您多次传递的指针（想想一个长的 for 循环）。您不想在每次要查找该地址的值时都取消引用。直接访问速度更快。

2.  有时你想在你的函数中修改传入的值，而不是在调用者中。例子：

    ```
    void foo( int count ){
        while (count>0){
            printf("%d\n",count);
            count--;
        }
    } 
    ```

如果您想使用通过引用传递的内容来执行上述操作，您将不得不在您的函数中创建另一个变量来首先存储它。

# objective-c - NSFetchRequest 返回错误的实体类型

> ID：14149964
> 
> 赞同：1
> 
> 时间：2013-01-04T01:44:03.710
> 
> 标签：objective-c, ios, macos, core-data

我的 Core Data 应用程序有两个实体：“Note”和“Marker”。Note 实体与标记具有一对多的关系（即，注释包含许多标记）。我有一个 fetchedRequestController 负责获取所有“Note”实体。创建 1 个注释和 1 个标记（属于该注释）后，我收到一个错误，因为 fetchedRequestController 获取了标记和注释。注意是预期的，但不应获取标记。

这是我获取的请求控制器

```
 TCModel *model = [TCModel sharedModel];
    NSManagedObjectContext *context = [model managedObjectContext];
    NSParameterAssert(context);
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Note" inManagedObjectContext:context];
    NSParameterAssert(entity);
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"creationDate" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *controller = [[NSFetchedResultsController alloc]
                                              initWithFetchRequest:fetchRequest
                                              managedObjectContext:context
                                              sectionNameKeyPath:nil
                                              cacheName:@"Root"];
    NSParameterAssert(controller);
    self.fetchedResultsController = controller;
    controller.delegate = self;
    NSError *error;
    BOOL success = [controller performFetch:&error];
    if ( success == NO )
    {
        NSLog(@"Failed to fetch!");
        NSParameterAssert(nil);
    } 
```

使用两个辅助方法创建对象，然后使用第三个方法保存

```
- (TCNote *)newNote
{
    TCNote *note = [NSEntityDescription insertNewObjectForEntityForName:@"Note"
                                                 inManagedObjectContext:self.managedObjectContext];
    note.creationDate = [NSDate new];
    return note;
}

- (TCMarker *)newMarker
{
    TCMarker *marker = [NSEntityDescription insertNewObjectForEntityForName:@"Marker"
                                                 inManagedObjectContext:self.managedObjectContext];
    return marker;
}

- (void)_save
{
    NSError *error;
    NSLog(@"Saving");
    if (![self.managedObjectContext save:&error])
    {
        NSLog(@"Error saving context: Error = %@", error);
    }
} 
```

这是控制台输出：

2013-01-03 17:41:12.062 时间码 [10269:c07] CoreData: sql: 从 Z_METADATA 中选择 Z_VERSION、Z_UUID、Z_PLIST

2013-01-03 17:41:12.063 时间码 [10269:c07] CoreData: sql: SELECT t0.Z_ENT, t0.Z_PK, t0.Z_OPT, t0.ZNOTEDATE, t0.ZSCENEDESCRIPTION, t0.ZSCENETITLE, t0.ZTIMECODEDATE, t0 .ZDATE, t0.ZTITLE, t0.ZPARENT, t0.Z1_PARENT 来自 ZNOTE t0

2013-01-03 17:41:12.064 时间码[10269:c07] CoreData：注释：sql 连接获取时间：0.0005s

2013-01-03 17:41:12.064 时间码 [10269:c07] CoreData：注释：总提取执行时间：2 行 0.0011 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:51:02.563

您已将*Note定义为**Marker*的“父实体” ，即*Marker*是*Note*的“子实体” ：

![在此处输入图像描述](../Images/f0b7f6b8ec39918cce814f3d78d49bd3.png)

这意味着每个*Marker*对象也是一个*Note*对象（与类和子类相同）。*因此，获取Note*实体的所有对象也会返回*Marker*实体的对象。

在这种情况下，SQLite 文件只包含一个表 ZNOTE，其中包含*Note的属性和**Marker*的附加属性的列。

因此，如果您真的不需要*Marker作为**Note*的子实体，只需将“父实体”设置为“无父实体”即可。

# mysql - Windows 上的 Mysql2 和 Rails

> ID：14149969
> 
> 赞同：2
> 
> 时间：2013-01-04T01:45:02.527
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3

所以。我正在尝试开发一个 Rails 应用程序，并且我正在尝试在 Windows 7 中这样做。这是我所做的：

1.  使用 ruby​​installer 安装 Ruby 1.9.3
2.  `gem update`
3.  `gem install rails`
4.  `gem update`
5.  `rails new`
6.  修改了gemfile，替换`sqlite3`为`mysql2`
7.  正确修改 database.yml
8.  `bundle install`
9.  `gem update`
10.  将mysql添加到我的路径
11.  在 ruby​​ bin 中添加了到 libmysql c 连接器的硬链接

到目前为止一切正常，除了当我这样做时`rake db:create:all`，这会导致：

```
rake aborted!
126: The specified module could not be found.   - C:/Ruby193/lib/ruby/gems/1.9.1
/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so
C:/Users/username/Documents/workspace/appname/config/application.rb:7:in `<top (
required)>'
C:/Users/username/Documents/workspace/appname/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace) 
```

什么？

更新：

完整跟踪，应要求：

```
rake aborted!
126: The specified module could not be found.   - C:/Ruby193/lib/ruby/gems/1.9.1
/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.
rb:2:in `require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.
rb:2:in `<top (required)>'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in
 `require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in
 `<top (required)>'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `
require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `
block (2 levels) in require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `
each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `
block in require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `
each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `
require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require
'
C:/Users/mschultz/Documents/workspace/recruit/config/application.rb:7:in `<top (
required)>'
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
C:/Users/mschultz/Documents/workspace/recruit/Rakefile:5:in `<top (required)>'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `l
oad'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `l
oad_rakefile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:583:in `
raw_load_rakefile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:89:in `b
lock in load_rakefile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `
standard_exception_handling'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:88:in `l
oad_rakefile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:72:in `b
lock in run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `
standard_exception_handling'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `r
un'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>
'
C:/Ruby193/bin/rake:23:in `load'
C:/Ruby193/bin/rake:23:in `<main>' 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
gem 'capistrano'

# To use debugger
# gem 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T11:21:47.430

我正在使用 railsinstaller 解决方案：如果您使用 --database=mysql 参数创建应用程序，则必须将 libmysql.dll 添加到 Ruby bin，顺便说一句，它来自 bundle installator 的提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T23:24:26.720

如果我可以推荐。

[http://railsinstaller.org/](http://railsinstaller.org/)

是安装导轨的最简单方法。只要确保它匹配正确的系统软件。

但是，我认为这不是您的安装。我认为这是您更改了数据库。首先，我推荐使用 PG，我认为它比 sql2 或 sql3 好很多。

但是，鉴于您出于某种原因需要 sql2，我认为您修改后的 database.yml 已关闭。您说它是正确的，但您可能需要仔细检查它。

我不是专家，但也许这里有一些帮助。否则，祝你好运！

# c++ - 如何阅读 MSDN 并申请？

> ID：14149971
> 
> 赞同：0
> 
> 时间：2013-01-04T01:45:11.940
> 
> 标签：c++, visual-studio, msdn, manual

好的，所以我不想再问很多关于如何做大多数编程工作的问题，因为我的大部分问题都给出了“阅读 MSDN”的答案[。](http://msdn.microsoft.com/en-us/)问题是，我不知道如何阅读它或大多数编程语言。例如，让我们使用 MSDN 上的 FtpCreateDirectory 函数（您可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384136%28v=vs.85%29.aspx)找到）

现在，假装我刚刚学会了这个功能，我想尝试一下。我如何阅读它，如何使用它显示给我的功能/命令。我该如何输入？这没有帮助：

```
BOOL FtpCreateDirectory(
_In_  HINTERNET hConnect,
_In_  LPCTSTR lpszDirectory
); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:04:48.067

我自己没有使用过这个，但让我们一步一步来举个例子：

```
HINTERNET hinternet = InternetConnect(...); //assume hinternet is valid

if (!FtpCreateDirectory(hinternet, "C:\\example")) {
    std::cerr << "Error creating FTP directory. Code: " << GetLastError();
} 
```

一步步：

*   首先，我们得到一个`HINTERNET`句柄。如何？好吧，文档对参数这么说：

> 先前使用 INTERNET_SERVICE_FTP 调用 InternetConnect 返回的句柄。

这就是我`InternetConnect`在示例中调用的原因。

*   接下来，我们看第二个参数。查看`Windows Data Types`文章，您可以看到它需要 a`CONST WCHAR *`或`CONST CHAR *`，具体取决于是否`UNICODE`定义。为简单起见，我表现得好像不是，尽管您可以使用`TEXT`宏根据`UNICODE`.

> 指向包含要创建的目录名称的以空字符结尾的字符串的指针。这可以是完全限定路径或相对于当前目录的名称。

正如我们所见，它只是一个路径，所以我传入了一个示例路径。这只是一个示例，但请记住备注部分对此参数的说明。

*   现在，我们检查返回值：

> 如果成功则返回 TRUE，否则返回 FALSE。要获取特定的错误消息，请调用 GetLastError。（更多未显示）

因此，我们将调用包装在 if 语句中以捕获错误，我们可以检索到 using 的代码`GetLastError`。使用每个函数的文章中描述的错误处理技术很重要。他们中的很多人说发生错误时可以使用`GetLastError`，但有些不支持`GetLastError`使用，有些支持不同类型的错误检索功能，因此请确保单独遵循每个功能的指南。

除此之外，`_In_`表示参数进入后就没​​用了。这与 , 其中相反`_Out_`，这意味着您将传递分配的内存并且函数将写入它，因此您可以在函数调用之后使用函数写入的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:52:20.747

在 MSDN 的参考部分有一个基本假设，即您了解 API 集的上下文。

如果您想要win32 c(++) 编程，那么您需要阅读windows 编程/win32 的介绍。不清楚您感兴趣的领域是什么，您是否正在尝试编写桌面应用程序、服务器、驱动程序......

在某些情况下，像 Charles Petzold 编程窗口这样的经典书籍是一个不错的起点。MSDN 也有很多介绍级别的东西（google 'start win32 programming'）

# wpf - ValidationRule 成功后仍显示 WPF TextBox 红色边框

> ID：14149972
> 
> 赞同：2
> 
> 时间：2013-01-04T01:45:22.707
> 
> 标签：wpf, validationrule

我有一个非常简单的 ValidationRule 的文本框：

```
<TextBox x:Name="textFirstName" Width="120">
    <TextBox.Text>
        <Binding
           Path="CurrentSelectionData.Tables[cpeople].Rows[0][FirstName]"
           UpdateSourceTrigger="PropertyChanged">
           <Binding.ValidationRules>
               <local:NonEmptyStringValidationRule ValidatesOnTargetUpdated="True"/>
           </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox>

public class NonEmptyStringValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        if (value == null || string.IsNullOrWhiteSpace(value.ToString()))
            return new ValidationResult(false, "Must provide a value.");

        return ValidationResult.ValidResult;
    }
} 
```

问题是即使文本框绑定到非空数据，启动时也会显示红色验证错误边框。

观察验证规则上的断点，我看到它为空字符串调用一次（在绑定更改为有效数据之前），在绑定更新为有效数据之后再次调用。果然，第二次调用返回了ValidResult，但红色边框依然存在。

手动清除文本框并在其中输入新文本会清除红色边框，但只需在其中输入新文本而不先清除它不会。

通过阅读其他人的问题，我可以看到一个潜在的棘手问题，这个 TextBox 位于选项卡控件中。但是，我的问题与其他人相反（尽管验证失败，他们没有得到红色边框），我也没有在任何时候移动到不同的选项卡控件（这是其他问题的原因）。

有什么想法我在这里想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T05:54:28.273

事实证明，在 Window 的 Loaded 事件期间更改已验证的绑定数据会导致问题。就我而言，问题是通过在 Initialized 或 ContentRendered 期间执行数据更改来解决的。Initialized 的优点是在第一次（无效）绑定之前发生，从而避免在应用加载期间临时出现红色边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:53:15.670

我试图复制您的问题，但在我的测试中似乎可以正常工作，因此问题必须与您绑定的数据有关，正如您所说的`validationRule`工作正常。

表是您的绑定`TwoWay`吗？

我的测试：

xml:

```
<TextBox x:Name="textFirstName" Width="120" ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}">
    <TextBox.Text>
        <Binding ElementName="UI" Path="TextTest" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True" >
            <Binding.ValidationRules>
                <local:NonEmptyStringValidationRule ValidatesOnTargetUpdated="True"  />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private string _textTest;
    public string TextTest
    {
        get { return _textTest ; }
        set { _textTest = value; }
    }
}

public class NonEmptyStringValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        return (value is string && !string.IsNullOrEmpty(value.ToString()))
            ? new ValidationResult(true, null)
            : new ValidationResult(false, "Invalid Text");
    }
} 
```

# wpf - CurrentUICulture 忽略区域和语言设置

> ID：14149978
> 
> 赞同：7
> 
> 时间：2013-01-04T01:46:44.360
> 
> 标签：wpf, localization, currentuiculture

Windows 7 区域和语言对话框中的各种设置为 CurrentCulture 对象的属性提供值。但是，WPF 控件似乎改用 CurrentUICulture，导致完全无法尊重用户的偏好。

例如，在我的工作站上，WPF 控件似乎使用的是 en-US 的 CurrentUICulture，导致它们以美国格式 M/d/yyyy 显示日期，而不是在区域和语言对话框中指定的澳大利亚格式。

在数据绑定中明确指定 en-AU 区域性会导致相关控件使用默认的澳大利亚格式，但它会继续忽略用户指定的格式。这很奇怪；进入应用程序我验证了 DateTimeFormatInfo.CurrentInfo == Thread.CurrentThread.CurrentCulture.DateTimeFormat （相同的对象）和 DateTimeFormatInfo.CurrentInfo.ShortDatePattern == "yyyy-MM-dd" （我设置的一个值，以便我可以确定用户偏好或正在选择默认值）。一切都如预期的那样，所以从表面上看，最大的问题是如何说服 WPF 控件和数据绑定使用 CurrentCulture 而不是 CurrentUICulture。

我们应该如何让 WPF 应用程序尊重区域和语言设置？

* * *

基于 Sphinxx 的回答，我覆盖了 Binding 类的*两个*构造函数，以提供与标准标记的更完整兼容性。

```
using System.Globalization;
using System.Windows.Data;

namespace ScriptedRoutePlayback
{
  public class Bind : Binding
  {
    public Bind()
    {
      ConverterCulture = CultureInfo.CurrentCulture;
    }
    public Bind(string path) : base(path)
    {
      ConverterCulture = CultureInfo.CurrentCulture;
    }
  }
} 
```

* * *

进一步的实验表明，您可以使用 x:Static 在标记中引用 System.Globalization.CultureInfo.CurrentCulture。这在运行时是完全成功的，但在设计时是灾难，因为绑定编辑器不断删除它。更好的解决方案是一个帮助类来遍历窗口的 DOM 并修复它找到的每个 Binding 的 ConverterCulture。

```
using System;
using System.Windows;
using System.Windows.Data;
using System.ComponentModel;
using System.Collections.Generic;
using System.Diagnostics;
using System.Globalization;

namespace ScriptedRoutePlayback
{
  public static class DependencyHelper
  {
    static Attribute[] __attrsForDP = new Attribute[] { new PropertyFilterAttribute(PropertyFilterOptions.SetValues | PropertyFilterOptions.UnsetValues | PropertyFilterOptions.Valid) };

    public static IList<DependencyProperty> GetProperties(Object element, bool isAttached = false)
    {
      if (element == null) throw new ArgumentNullException("element");

      List<DependencyProperty> properties = new List<DependencyProperty>();

      foreach (PropertyDescriptor pd in TypeDescriptor.GetProperties(element, __attrsForDP))
      {
        DependencyPropertyDescriptor dpd = DependencyPropertyDescriptor.FromProperty(pd);
        if (dpd != null && dpd.IsAttached == isAttached)
        {
          properties.Add(dpd.DependencyProperty);
        }
      }

      return properties;
    }

    public static IEnumerable<Binding> EnumerateBindings(DependencyObject dependencyObject)
    {
      if (dependencyObject == null) throw new ArgumentNullException("dependencyObject");

      LocalValueEnumerator lve = dependencyObject.GetLocalValueEnumerator();

      while (lve.MoveNext())
      {
        LocalValueEntry entry = lve.Current;

        if (BindingOperations.IsDataBound(dependencyObject, entry.Property))
        {
          Binding binding = (entry.Value as BindingExpression).ParentBinding;
          yield return binding;
        }
      }
    }

    /// <summary>
    /// Use in the constructor of each Window, after initialisation.
    /// Pass "this" as the dependency object and omit other parameters to have 
    /// all the bindings in the window updated to respect user customisations 
    /// of regional settings. If you want a specific culture then you can pass 
    /// values to recurse and cultureInfo. Setting recurse to false allows you 
    /// to update the bindings on a single dependency object.
    /// </summary>
    /// <param name="dependencyObject">Root dependency object for binding change treewalk</param>
    /// <param name="recurse">A value of true causes processing of child dependency objects</param>
    /// <param name="cultureInfo">Defaults to user customisations of regional settings</param>
    public static void FixBindingCultures(DependencyObject dependencyObject, bool recurse = true, CultureInfo cultureInfo = null)
    {
      if (dependencyObject == null) throw new ArgumentNullException("dependencyObject");
      try
      {
        foreach (object child in LogicalTreeHelper.GetChildren(dependencyObject))
        {
          if (child is DependencyObject)
          {
            //may have bound properties
            DependencyObject childDependencyObject = child as DependencyObject;
            var dProps = DependencyHelper.GetProperties(childDependencyObject);
            foreach (DependencyProperty dependencyProperty in dProps)
              RegenerateBinding(childDependencyObject, dependencyProperty, cultureInfo);
            //may have children
            if (recurse)
              FixBindingCultures(childDependencyObject, recurse, cultureInfo);
          }
        }
      }
      catch (Exception ex)
      {
        Trace.TraceError(ex.Message);
      }
    }

    public static void RegenerateBinding(DependencyObject dependencyObject, DependencyProperty dependencyProperty, CultureInfo cultureInfo = null)
    {
      Binding oldBinding = BindingOperations.GetBinding(dependencyObject, dependencyProperty);
      if (oldBinding != null)
        try
        {
          //Bindings cannot be changed after they are used.
          //But they can be regenerated with changes.
          Binding newBinding = new Binding()
          {
            Converter = oldBinding.Converter,
            ConverterCulture = cultureInfo ?? CultureInfo.CurrentCulture,
            ConverterParameter = oldBinding.ConverterParameter,
            FallbackValue = oldBinding.FallbackValue,
            IsAsync = oldBinding.IsAsync,
            Mode = oldBinding.Mode,
            NotifyOnSourceUpdated = oldBinding.NotifyOnSourceUpdated,
            NotifyOnTargetUpdated = oldBinding.NotifyOnValidationError,
            Path = oldBinding.Path,
            StringFormat = oldBinding.StringFormat,
            TargetNullValue = oldBinding.TargetNullValue,
            UpdateSourceExceptionFilter = oldBinding.UpdateSourceExceptionFilter,
            UpdateSourceTrigger = oldBinding.UpdateSourceTrigger,
            ValidatesOnDataErrors = oldBinding.ValidatesOnDataErrors,
            ValidatesOnExceptions = oldBinding.ValidatesOnExceptions,
            XPath = oldBinding.XPath
          };
          //set only one of ElementName, RelativeSource, Source
          if (oldBinding.ElementName != null)
            newBinding.ElementName = oldBinding.ElementName;
          else if (oldBinding.RelativeSource != null)
            newBinding.Source = oldBinding.Source;
          else
            newBinding.RelativeSource = oldBinding.RelativeSource;
          BindingOperations.ClearBinding(dependencyObject, dependencyProperty);
          BindingOperations.SetBinding(dependencyObject, dependencyProperty, newBinding);
        }
        catch (Exception ex)
        {
          Trace.TraceError(ex.Message);
        }
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T19:16:15.010

[这个 SO 帖子](https://stackoverflow.com/questions/9162050/how-to-set-silverlight-currentuiculture-currentculture-correctly#9162111)(WPF/Silverlight) 有一个指向[这篇文章](http://www.west-wind.com/weblog/posts/2009/Jun/14/WPF-Bindings-and-CurrentCulture-Formatting)的链接（仅限 WPF），解释了如何使用 CurrentCulture 作为您的应用程序的默认设置。这能解决你的问题吗？

**编辑：**

使用“区域和语言”中的自定义设置而不是当前语言的*默认*设置进行绑定需要更多技巧。[这篇文章的](https://stackoverflow.com/questions/5831455/use-real-cultureinfo-currentculture-in-wpf-binding-not-cultureinfo-from-ietfl)结论是，每个绑定`ConverterCulture`也必须明确设置为`CultureInfo.CurrentCulture`. 以下是一些 DateTime 测试：

```
<!-- Culture-aware(?) bindings -->
<StackPanel DataContext="{Binding Source={x:Static sys:DateTime.Now}}" >

    <!-- WPF's default en-US formatting (regardless of any culture/language settings) -->
    <TextBlock Text="{Binding Path=.}" />

    <!-- *Default* norwegian settings (dd.MM.YYY) -->
    <TextBlock Text="{Binding Path=., ConverterCulture=nb-NO}" />

    <!-- Norwegian settings from the "Region and Languague" dialog (d.M.YY) -->
    <TextBlock Text="{Binding Path=., ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" />

    <!-- Hiding ConverterCulture initialization in our own custom Binding class as suggested here:
         https://stackoverflow.com/questions/5831455/use-real-cultureinfo-currentculture-in-wpf-binding-not-cultureinfo-from-ietfl#5937477 -->
    <TextBlock Text="{local:CultureAwareBinding Path=.}" />

</StackPanel> 
```

自定义绑定类：

```
public class CultureAwareBinding : Binding
{
    public CultureAwareBinding()
    {
        this.ConverterCulture = System.Globalization.CultureInfo.CurrentCulture;
    }
} 
```

这一切最终在挪威机器上看起来像这样：

![WPF 日期时间绑定](../Images/3f081de6cd7576a908eee1fe8d7d76a1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-25T11:13:35.987

在 WPF 中有一种非常肮脏的方法，但据我所知，它是最好的，因为它无需任何其他额外代码或具有特定的文化感知绑定即可工作。您唯一需要做的就是在应用程序启动时调用 SetFrameworkElementLanguageDirty 方法（在答案下方），或者在应用程序的构造函数中调用更好。

方法注释是不言自明的，但简而言之，该方法用 CurrentCulture 覆盖 FrameworkElement 的 LanguageProperty 的默认元数据，包括用户在窗口中的特定修改（如果有）。缩小/肮脏的部分是它使用反射来设置 XmlLanguage 对象的私有字段。

```
 /// <summary>
    ///   Sets the default language for all FrameworkElements in the application to the user's system's culture (rather than
    ///   the default "en-US").
    ///   The WPF binding will use that default language when converting types to their string representations (DateTime,
    ///   decimal...).
    /// </summary>        
    public static void SetFrameworkElementLanguageDirty()
    {
        // Note that the language you get from "XmlLanguage.GetLanguage(currentCulture.IetfLanguageTag)"
        // doesn't include specific user customizations, for example of date and time formats (Windows date and time settings).            
        var xmlLanguage = XmlLanguage.GetLanguage(Thread.CurrentThread.CurrentCulture.IetfLanguageTag);
        SetPrivateField(xmlLanguage, "_equivalentCulture", Thread.CurrentThread.CurrentCulture);

        FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement), new FrameworkPropertyMetadata(xmlLanguage));
    } 
```

SetPrivateField 方法可能如下所示。

```
 private static void SetPrivateField(object obj, string name, object value)
    {
        var privateField = obj.GetType().GetField(name, BindingFlags.Instance | BindingFlags.NonPublic);
        if (privateField == null) throw new ArgumentException($"{obj.GetType()} doesn't have a private field called '{name}'.");

        privateField.SetValue(obj, value);
    } 
```

# iphone - 如何压缩包含巨大 blob 的巨大 sqlite 文件？

> ID：14149979
> 
> 赞同：0
> 
> 时间：2013-01-04T01:46:44.390
> 
> 标签：iphone, ios, cocoa-touch, sqlite

我有一个超过 300m 的 sqlite 文件，这在我的应用程序中是不切实际的。

我想知道是否有一种方法可以压缩它以使其更小以便从应用商店下载，然后在首次启动时提取它。

# java - 对于 Java HashMap 上的每个循环

> ID：14149984
> 
> 赞同：19
> 
> 时间：2013-01-04T01:47:21.970
> 
> 标签：java, loops, hashmap

我编写的一个基本聊天程序有几个关键词，可以生成特殊动作、图像、消息等。我将所有关键词和特殊函数存储在一个 HashMap 中。关键字是键，功能是值。我想将用户输入与某种循环的键进行比较。我已经尝试了我能想到的一切，但没有任何效果。这是我能弄清楚的：

```
myHashMap = <File Input>
for(String currentKey : <List of HashMap Keys>){
    if(user.getInput().equalsIgnoreCase(currentKey)){
        //Do related Value action
    }
}
... 
```

我将不胜感激任何帮助。如果我忽略了类似的问题或者答案很明显，请原谅我。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-04T02:01:15.297

如果您需要同时访问键和值，那么这是最有效的方法

```
 for(Entry<String, String> e : m.entrySet()) {
        String key = e.getKey();
        String value = e.getValue();
    } 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-04T01:51:18.777

好吧，你可以写：

```
for(String currentKey : myHashMap.keySet()){ 
```

但这并不是使用哈希映射的最佳方式。

更好的方法是使用全小写键填充`myHashMap`，然后编写：

```
theFunction = myHashMap.get(user.getInput().toLowerCase()); 
```

检索函数（或者`null`如果用户输入未出现在地图中）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-10-19T07:38:09.460

仅在 Java 8 及更高版本中

```
map.forEach((k,v)->System.out.println("Key: " + k + "Value: " + v)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T01:51:29.917

这里更好的模式可能是：

```
Value val = hashMap.get(user.getInput());
if (val != null) {
    doVal();
}
else {
    // handle normal, non-keyword/specfial function
} 
```

`null`如果键不包含在 Map 中，它利用了 HashMap 返回的事实。

# actionscript-3 - 在文档类 Actionscript 3 中对事物进行排序

> ID：14149985
> 
> 赞同：0
> 
> 时间：2013-01-04T01:47:25.940
> 
> 标签：actionscript-3, flash

我最近刚从做时间线代码切换到文档类，我在弄清楚这一点时遇到了一些麻烦......

我正在制作一个基于选择的游戏，所以我有很多选择需要发生......

在时间线上，我所做的是让每一帧都有选择。如果用户选择了一个选项，它将为该选项分配一个变量，并在游戏结束时运行一个 switch case 以选择具有该变量的选项并将其添加到屏幕...

但是一旦我进入文档类尝试仅使用代码做同样的事情；我不知道该怎么办...

我的意思是我不能以同样的方式操作它，否则我会有 if 循环和 in if 循环和 in if 循环，我将不得不手动写下每种可能性。所以我决定改用位图屏幕截图，但现在我不知道......我如何在文档类中准确排序？......我的意思是我的意思是如何告诉它在前一个之后向我展示这些选择完成了吗？并且不必进入永无止境的 if 循环。使用时间轴，我可以使用帧对事物进行排序，但无需访问帧，如果单击选择，我如何根据这些对象对事物进行排序，删除这些对象并添加新对象，但不会被锁定在函数的函数中？有人可以通过提供一个清晰的例子来告诉我吗？我对此很陌生，也很迷茫……

# node.js - mongoose doc.save 在模式方法中失败且没有错误

> ID：14149986
> 
> 赞同：2
> 
> 时间：2013-01-04T01:47:35.610
> 
> 标签：node.js, mongoose

使用猫鼬我正在做：

```
var postSchecma = mongoose.Schema({
title: String,
body: String,
link: String,
voting: {
    has: {
        type: Boolean,
    default:
        false
    },
    canVoteFor: [mongoose.Schema.Types.Mixed],
    votedFor:{},
    voteDates:{}
},
comments: [mongoose.Schema.Types.Mixed],
date: {
    type: mongoose.Schema.Types.Mixed,
default:
    new Date().getTime()
}
}, {
    strict: false,
    safe:true
}) 
```

和

```
postSchecma.methods.vote = function(voteFor, callback) {
var self = this;
if(self.voting.canVoteFor.indexOf(voteFor) < 0) {
    callback(new Error('Error: Invalid Thing To Vote For'));
    return;
}
this.voting.voteDates[voteFor].push(new Date().getTime())
this.voting.votedFor[voteFor]++
s = this;
this.save(function(err) {
    if(err) {
        callback(err)
    }
    console.log(err);
    console.log("this:"+ s);
    callback(s)
})
} 
```

在 postSchecma.methods.vote 中 this.voting.votedFor[voteFor] 的值是正确的。但是当我查询数据库时，它是旧值。如果它有帮助，我在 2 个文件中使用 db，并且这些方法可能不是完全重复的。我也知道它与猫鼬有关，因为我可以使用 mongoDB GUI 将记录更改为不同的值，并且效果很好。如果您需要更多信息，请告诉我，谢谢，Porad

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T03:15:31.127

架构中定义为`{}`或`Mixed`必须明确标记为已修改的任何字段，否则 Mongoose 将不知道它已更改并且 Mongoose 需要保存它。

在这种情况下，您需要在 之前添加以下内容`save`：

```
this.markModified('voting.voteDates');
this.markModified('voting.votedFor'); 
```

请参阅`Mixed` [此处](http://mongoosejs.com/docs/schematypes.html#mixed)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T23:41:21.573

事实证明，这有时也适用于非`Mixed`物品，正如我痛苦地发现的那样。如果您重新分配整个子对象，您也需要在`markModified`那里使用。至少……有时。我没有用得到这个错误，然后我做了，没有更改任何相关代码。我的猜测是这是猫鼬版本的升级。

例子！说你有...

```
personSchema = mongoose.Schema({
    name: {
        first: String,
        last: String
    }
}); 
```

...然后你打电话给...

```
Person.findById('whatever', function (err, person) {
    person.name = {first: 'Malcolm', last: 'Ocean'};
    person.save(function (err2) {
        // person.name will be as it was set, but this won't persist
        // to the database
    });
}); 
```

`person.markModified('name')`...除非您之前打电话，否则您将度过一段糟糕的时光`save`

（或者，同时调用`person.markModified('name.first')` *and* `person.markModified('name.last')` ...但这似乎明显逊色）

# ruby - Ruby - URL 编码

> ID：14149987
> 
> 赞同：4
> 
> 时间：2013-01-04T01:47:39.900
> 
> 标签：ruby, url, urlencode, url-encoding

我有一个 URL 字符串，其中有换行符和回车符。例如

```
http://xyz.com/hello?name=john&msg=hello\nJohn\n\rgoodmorning&note=last\night I went to \roger 
```

我的实际`msg`字符串在哪里：

```
hello
john
goodmorning 
```

和`note`字符串是

```
last\night I went to \roger 
```

为了正确发送它，我必须对此进行 urlencode

```
 http://xyz.com/hello?name%3Djohn%26msg%3Dhello%5CnJohn%5Cn%5Crgoodmorning%26note%3Dlast%5Cnight%20I%20went%20to%20%5Croger 
```

但是这个编码搞砸了\n和\r。虽然我希望 \n 应该转换为 %0A 和 \r 到 %0D

我写的代码是红宝石。我试图寻求帮助，`Addressable::URI`但还没有帮助。其他方法可能是将 \n 和 \r 分别手动替换为 %0A 和 %0D。但是该替换可以替换有效字符，例如我不想要的`last\night`字符。`last%0Aight`任何人都可以提出更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T02:22:56.197

关于什么[`CGI::escape`](http://ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-escape)

您只需要对参数进行编码。

```
url = "http://xyz.com/hello?"
params = "name=john&msg=hello\nJohn\n\rgoodmorning&note=last\night I went to \roger"

puts "#{url}#{CGI::escape(params)}"
# => "http://xyz.com/hello?name%3Djohn%26msg%3Dhello%0AJohn%0A%0Dgoodmorning%26note%3Dlast%0Aight+I+went+to+%0Doger" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T04:11:39.537

这就是我使用[Addressable::URI](https://github.com/sporkmonger/addressable)的方法：

```
require 'addressable/uri'

url = 'http://xyz.com/hello'

msg = 'hello
john
goodmorning'

note = "last\night I went to \roger"

uri = Addressable::URI.parse(url)
uri.query_values = {
  'msg'  => msg,
  'note' => note
}

puts uri.to_s 
```

返回：

```
http://xyz.com/hello?msg=hello%0Ajohn%0Agoodmorning&note=last%0Aight%20I%20went%20to%20%0Doger 
```

`\r`in`\roger`和`\n`in被转换了，`\night`因为我使用了双引号分隔的字符串，而不是单引号分隔的字符串，单引号分隔的字符串将保留`\r`并`\n`作为文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-18T06:20:11.097

在 GET 请求中传递 json、引号等很棘手。在 Ruby 2+ 中，我们可以使用 Ruby 的 URI 模块的 'escape' 方法。

```
> URI.escape('http://app.com/method.json?agent={"account":
{"homePage":"http://demo.my.com","name":"Senior Leadership"}}') 
```

但我建议将其用作 POST 请求并将其作为消息体传递。

# objective-c - 在 ViewController 之间切换时 UIProgressView 开始闪烁

> ID：14149990
> 
> 赞同：2
> 
> 时间：2013-01-04T01:48:22.427
> 
> 标签：objective-c, ios, progress-bar, afnetworking

我有一个进度条（UIProgressView），它显示了一个事件的进度，当我从它开始时就停留在视图上时，没有问题。

但是，当我切换到另一个 VC 并再次返回时，进度条会闪烁。

我正在使用 AFNetworking 下载文件——以防万一：-)

有没有办法防止这种情况发生？？

这是 UIProgressView 所在单元格的代码

```
 [_operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead)
 {
     float progress = ((float)totalBytesRead) / totalBytesExpectedToRead;
     //NSLog(@"PROGRESS - %f", progress); //Can be deleted once the progress bar works.

     _jwkCell.progressView.progress = progress;

     _jwkCell.progressView.progressTintColor = [UIColor redColor];

 }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:03:24.653

解决它

我刚刚添加了一个检查以查看 Float 返回的值是否返回 0 以外的值，因此它会复制下载

```
 if(_jwkCell.progressView.progress == 0)
{
    [self temp];
}
else
{
    NSLog(@"Is Something Downloading??");
} 
```

# jquery - Asp.net Mvc Web Api Http 通过 jQuery $.get 获取请求

> ID：14149993
> 
> 赞同：0
> 
> 时间：2013-01-04T01:48:44.303
> 
> 标签：jquery, asp.net, asp.net-mvc, http, asp.net-web-api

我想知道从当前上下文中的 Javascript 文件访问 MVC 控制器类中的 ASP.Net Web Api HTTP GET 方法的正确方法是什么。以下代码段位于 document.ready 主体的函数中。

Javascript：

```
 var Id1 = $('#EmployeePrimaryId').val();
        var Id2 = $('#EmployeeSecondaryId').val();

        var url = "api/employees/getemployeename?Id1=" + Id1 + "?Id2=" + Id2;

        $.get(url, function (data) {
            $('#EmployeeName').val(data);
        }); 
```

我目前在 $.get 收到 404 错误，并相信它可能与路由有关。本文中的“扩展示例”：[http](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection) ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection解释了在适当时选择查询字符串参数路由已经到位，我不太确定路由模板中是否需要可选的 Id，因为这些示例显示的控制器方法只有一个 Id 的重载，所以我包含了两个路由，但这两个路由都不起作用。此外，控制器类实现了 ApiController 类。

Web API 控制器方法：

```
 [System.Web.Http.HttpGet]
    public string GetEmployeeName([FromUri]int Id1, int Id2)
    {
        var data = _context.Employees
            .Where(x => x.EmployeePrimaryId == Id1
                   && x.EmployeeSecondaryId == Id2)
                   .Select(x => x.EmployeeName);

        return data;
    } 
```

RouteConfig 类：

```
 private static void RegisterApiRoutes(RouteCollection routes)
    {

        routes.MapHttpRoute(
                name: "Employees",
                routeTemplate: "api/{controller}/{action}/",
                defaults: new { controller = "Employees",
                    action = "GetEmployeeName",}
            );

        routes.MapHttpRoute(
                name: "Employees",
                routeTemplate: "api/{controller}/{action}/{id}",
                defaults: new
                {
                    controller = "Employees",
                    action = "GetEmployeeName",
                    id = RouteParameter.Optional
                }
            ); 
```

我认为该错误与路由配置有关，因为除了 404 通知之外，我没有收到任何构建或 Web 开发人员工具错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:20:59.033

Uri 中的多个查询字符串参数应该用`&`-- 你`?`前面有一个`Id2`...

在你的 javascript 中试试这个：

```
var url = "api/employees/getemployeename?Id1=" + Id1 + "&Id2=" + Id2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:55:27.783

您是否尝试过使用[Glimpse](http://www.getglimpse.com/)调试您的路线？

[http://www.hanselman.com/blog/NuGetPackageOfTheWeek5DebuggingASPNETMVCApplicationsWithGlimpse.aspx](http://www.hanselman.com/blog/NuGetPackageOfTheWeek5DebuggingASPNETMVCApplicationsWithGlimpse.aspx)

此外，[Fiddler](http://www.fiddler2.com/fiddler2/)或[curl](http://curl.haxx.se/)是发送测试请求的有用工具。

# jar - 在 talend 工作中，如何添加依赖 jar 文件？

> ID：14149996
> 
> 赞同：1
> 
> 时间：2013-01-04T01:49:08.577
> 
> 标签：jar, talend

我想在我的 talend 工作例程中使用 jar 文件中的实用程序方法。如何将此 jar 添加为依赖于我当前的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:27:02.900

尝试使用 tLibraryLoad 组件 - 它可以让您加载一个 jar 文件，以便您可以在工作开始时添加它，之后该库将可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:16:13.223

tLoadLibrary 将起作用，或者您也可以通过右键单击存储库中的作业来将依赖项添加到作业。