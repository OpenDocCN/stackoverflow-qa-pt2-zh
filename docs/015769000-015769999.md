# StackOverflow 问答 15769000-15769999

# javascript - HTML5 视频选项

> ID：15769007
> 
> 赞同：0
> 
> 时间：2013-04-02T16:13:07.170
> 
> 标签：javascript, html, jquery-mobile, video

现在这似乎是一个愚蠢的问题，但是对于 html5 视频，一旦您离开页面，是否可以显示视频海报？
例如，我有一个 JQM 页面，其中有一个 html 视频，并分配有一张海报。当我离开页面时，我有一个小脚本将播放时间设置回 0 并暂停视频

```
<script>    
 var video = document.getElementById("video");
 $("#trigger").bind("click", function(){
        video.pause();
        video.currentTime = 0;});
</script> 
```

这可行，但我也希望能够显示视频海报。有没有办法通过我的javascript做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:33:24.273

只需通过 javascript 重新设置海报以“恢复”海报：

```
<script>    
var video = document.getElementById("video");
$("#trigger").bind("click", function(){
    video.pause();
    video.currentTime = 0;
    video.poster = "yourPoster.png";});
</script> 
```

# c# - ext: Window 可以限制在框架状的主标记中吗？

> ID：15769010
> 
> 赞同：2
> 
> 时间：2013-04-02T16:13:16.120
> 
> 标签：c#, asp.net, asp.net-mvc, ext.net

我正在构建一个带有静态导航的 MVC4-Ext.net 应用程序。我已成功绑定母版页中的导航并使项目无错误运行。现在我想`<ext:Window/>`在“主要内容”中使用一个，它`<ext:Panel region="Center">`来自我的母版页。

我试着去：

```
 <ext:Window runat="server" Constrain="true" Width="600" /> 
```

但是窗口仍然可以从“MainContent”中移出。我也尝试过介绍

```
 <ext:Viewport runat="server" ID="InnerViewPort" Layout="FitLayout"> 
```

约束窗口，但这也不起作用。

我想避免使用“约束窗口”来避免将我的内容测量设置为固定值。

这些尝试在我`<asp:Content ID="Content" ContentPlaceHolderID="Main">`的主页视口的居中面板内

我有一些带有简化标记的 Base.Master 文件，如下所示：

```
<ext:Viewport ID="CompleteView" runat="server">
   <Items>
      <ext:Panel runat="server" Region="North" ID="TopBar" />
      <ext:Panel runat="server" Region="West" ID="Navigation" />
      <ext:Panel runat="server Region="Center" ID="MainContent" />
          <Content>
              <asp:ContentPlaceholder ID="Main" runat="server" />
          </Content>
      </ext:Panel>
   </Items>
</ext:Viewport> 
```

`MainContent`我现在希望在将视图加载到占位符时将窗口限制在面板内`Main`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:58:56.447

根据您的描述，我认为以下示例演示了该场景。

您可以设置 .Constrain="true" 并将 .RenderTo 属性设置为您希望窗口约束到的容器的 .ID。

**例子**

```
<%@ Page Language="C#" %> 

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" />

        <ext:Viewport runat="server" Layout="BorderLayout">
            <Items>
                <ext:Panel
                    runat="server"
                    Title="Example"
                    Region="West"
                    Width="350"
                    Collapsible="true"
                    />
                <ext:Panel 
                    id="Panel1" 
                    runat="server" 
                    Title="Center" 
                    Region="Center"
                    />
            </Items>
        </ext:Viewport>
        <ext:Window 
            ID="Window1" 
            runat="server" 
            Title="Window"
            Constrain="true"
            RenderTo="Panel1"
            />
    </form>
</body>
</html> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:49:45.390

一点点返工和排除母版页让我想到了[这个问题中描述的问题](https://stackoverflow.com/questions/15785240/load-asp-mvc-view-with-ext-panel-loader)。

加载一个带有 ext.net.Window 组件的视图，该组件设置为`constrain="true"`确实限制了窗口，假设你在`loadMode="IFrame"`

# android - Android 4.2 上 PhoneGap 中的 jQuery 移动“可折叠内容”

> ID：15769016
> 
> 赞同：3
> 
> 时间：2013-04-02T16:13:35.937
> 
> 标签：android, jquery, cordova, mobile

我正在开发一个带有 jQ​​uery“可折叠内容”元素的 PhoneGap 应用程序。现在我在 Nexus 7 设备上测试 Android 4.2.2 下的应用程序，我遇到了展开/折叠事件的问题。元素在触摸事件后立即展开和折叠。如果我点击并按住该元素一秒钟，则折叠或展开事件将起作用。

这很奇怪，因为它适用于 iOS（iPhone 5、iPad）和 Android 2.3.5（HTC Desire HD）

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:20:11.850

您可能会看到与此相同的双击错误。[带有 Android 4.2 的 Phonegap 2.4.0 - 奇怪的双击行为](https://stackoverflow.com/questions/14982864/phonegap-2-4-0-with-android-4-2-strange-double-click-behaviour)

您可以尝试链接中提出的解决方案。

# php - 并行运行 PHP foreach？

> ID：15769018
> 
> 赞同：2
> 
> 时间：2013-04-02T16:13:39.357
> 
> 标签：php, parallel-processing

在 PHP 中并行运行 foreach 作业的最佳方法是什么？对此有最佳做法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:15:20.303

答案很简单：php 不支持将并行处理作为一种语言特性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:16:07.430

php 不支持线程。它提供的最多的是分叉。

# android - Robospice 使用 SpringAndroidSpiceRequest 上传文件

> ID：15769019
> 
> 赞同：2
> 
> 时间：2013-04-02T16:13:39.573
> 
> 标签：android, spring, robospice

我正在使用 robospice。现在我想上传文件。我使用 SpringAndroidSpiceService 并编写自己的请求，如下所示：

```
public class UploadFileRequest extends SpringAndroidSpiceRequest<String>{
private static final String TAG = "UploadFileRequest";
private UploadRequestModel requestModel;
private String link;
public UploadFileRequest(UploadRequestModel model, String link) {
    super(String.class);
    requestModel = model;
    this.link = link;
}

@Override
public String loadDataFromNetwork() throws Exception {    

    MultiValueMap<String, Object> parts = new LinkedMultiValueMap<String, Object>();
    parts.add("file1", new FileSystemResource(requestModel.getFile1()));
    parts.add("file2", new FileSystemResource(requestModel.getFile1()));

    HttpHeaders headers = new HttpHeaders();
    HttpEntity<MultiValueMap<String, Object>> request = 
            new HttpEntity<MultiValueMap<String, Object>>(parts, headers);

    return getRestTemplate().postForObject(link, request, String.class);

}

} 
```

我现在可以发送文件了。但是我遇到了一个问题。文件发送后。我在磁盘上的文件几乎被删除。它的大小为零。你知道为什么吗 ？我该如何解决？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:17:09.883

我是 RS 的作者之一。您面临的问题与 RS 没有直接关系，而是与 Spring Android 有关。我建议你写信给他们的论坛以获得答案。对不起，但我们不能告诉你更多。

斯蒂芬妮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T12:11:02.547

```
 this.message.setApi_key(ConfigurationBean.getTab_id());
        this.message.setApi_password(ConfigurationBean.getTab_assword());
        this.message.setNursery_id(ConfigurationBean.getNursery_id());          
        url=ConfigurationBean.getNursery_url()+"/api/v1/installation.php";

        try {
            list=service.getConfiguration(admin, pass);

        } catch (Exception e) {
            Log.e("request", ""+e.getMessage());
        }

        // Add the Jackson and String message converters
        restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());
        restTemplate.getMessageConverters().add(new StringHttpMessageConverter());

        // Make the HTTP POST request, marshaling the request to JSON, and the response to a String
        String response = restTemplate.postForObject(url, message, String.class);

        return response; 
```

这是我的代码，在我遇到同样的问题之前，它工作不正常你可以试试这个消息`enter code here`转换器，这会有所帮助

# django - 南迁一团糟

> ID：15769020
> 
> 赞同：0
> 
> 时间：2013-04-02T16:13:40.917
> 
> 标签：django, django-south

南迁一团糟。我可以做些什么来重置我的 django 应用程序的迁移而不破坏任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:08:08.080

在迁移“搞砸”的应用程序的目录中，应该有一个名为“迁移”的子目录。如果您删除该目录中的文件（全部，或只是导致问题的文件），您可以重新运行 manage.py schemamigration yourapp。

# java - J2ME HttpConnection 无限重定向

> ID：15769026
> 
> 赞同：2
> 
> 时间：2013-04-02T16:13:59.793
> 
> 标签：java, redirect, java-me, httpconnection, gprs

我正在为 GPRS 调制解调器 (Siemens TC65) 开发一个 java 应用程序。我多次调用一个方法来对不同的 URL 进行 HttpConnection。有时它可以正常工作，但有时我会被我的操作员重定向（HTTP 代码 302）。我遵循 Location 标头中提供的 URL，它返回 200，但它不是我想要的页面。

如果我在 gsm 笔中使用 SIM 卡并使用浏览器访问，有时会发生相同的重定向，但我最终会到达所需的页面。问题是调制解调器不执行Javascript，所以我分析了javascript的作用，过程如下：

page1 -> page2 -> page3 -> 所需页面

Page1 和 page2 对 URL 和参数进行一些 base64 编码，page3 是一个 .aspx。因此，每次我收到重定向时，我都会对我的 URL 进行编码 64 并发送到 .aspx 页面，.aspx 页面返回 302 并在 Location 标头中解码所需的页面。它甚至返回一个带有 ASP.NET_SessionId 的 cookie，我保存它并在下一个请求中发送。

但即使我做了所有这些并遵循 .aspx 返回的 URL（与我开头的相同），它也只是从头开始，我得到了一个无限循环的重定向。

我可以发布代码，但我认为它没有任何问题，因为它工作正常，有时......问题是操作员的连续重定向而不是运行浏览器。

尝试从 aspx 服务器进行重定向时，我应该做些什么不同的事情？

有人有类似的问题吗？我将不胜感激任何帮助。

提前致谢！雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:32:17.230

我设法使它工作。

我正在做的是用我自己的代码在我的程序中替换 page2 中的 javascript，因为调制解调器无法运行 javascript。并使用结果并将其发送到 page3。这很好，但我实际上并没有向 page2 发出 HTTP 请求。

如果我以正确的顺序请求三个页面，复制 javascript 在我自己的代码中执行的功能并保存 cookie，在 page3 之后，我会收到指向所需网页的重定向，并且不会像以前那样再次重定向。我想，既然我做了 page2 所做的一切，我真的不需要提出请求，直接跳到 page3。但是出于某种原因，我不知道为什么，也许 asp 会话实际上是在该页面上开始的，并且没有显示在页面源代码上或服务器监视页面请求。而且我什至不明白为什么运营商需要这样做，我认为它甚至可能会中断来自旧手机的 HTTP 连接，因为它并不是真正为无法运行 javascript 的设备设计的。

下次我将使用不同的运算符 =p

感谢 Charles Forsythe 的提示和帮助。

# java - Java regex 去除 XML 标签，但不去除标签内容

> ID：15769028
> 
> 赞同：11
> 
> 时间：2013-04-02T16:14:09.950
> 
> 标签：java, xml, regex, string

我有以下 Java 代码：

```
str = str.replaceAll("<.*?>.*?</.*?>|<.*?/>", ""); 
```

这会变成这样的字符串：

```
How now <fizz>brown</fizz> cow. 
```

进入：

```
How now  cow. 
```

但是，我希望它只去除`<fizz>`and`</fizz>`标签，或者只是独立`</fizz`的 > 标签，并保留元素的内容。因此，一个正则表达式会将上述内容变为：

```
How now brown cow. 
```

或者，使用更复杂的字符串，会变成：

```
How <buzz>now <fizz>brown</fizz><yoda/></buzz> cow. 
```

进入：

```
How now brown cow. 
```

我试过这个：

```
str = str.replaceAll("<.*?></.*?>|<.*?/>", ""); 
```

这根本行不通。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-02T16:18:15.193

```
"How now <fizz>brown</fizz> cow.".replaceAll("<[^>]+>", "") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T16:18:42.110

你快到了；）

试试这个：

```
str = str.replaceAll("<.*?>", "") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T18:00:01.683

虽然还有其他正确答案，但没有一个给出任何解释。

您的正则表达式`<.*?>.*?</.*?>|<.*?/>`不起作用的原因是它会选择任何标签**以及其中的所有内容**。您可以在[debuggex](http://www.debuggex.com/?re=%3C.%2a?%3E.%2a?%3C/.%2a?%3E%7C%3C.%2a?/%3E&str=How%20%3Cbuzz%3Enow%20%3Cfizz%3Ebrown%3C/fizz%3E%3Cyoda/%3E%3C/buzz%3E%20cow.)上看到这一点。

您的第二次尝试`<.*?></.*?>|<.*?/>`不起作用的原因是因为它将从标签的开头选择到 tag**之后的第一个关闭标签**。这有点拗口，但你可以更好地理解[这个例子中](http://www.debuggex.com/?re=%3C.%2a?%3E%3C/.%2a?%3E%7C%3C.%2a?/%3E&str=How%20%3Cbuzz%3Enow%20%3Cfizz%3Ebrown%3C/fizz%3E%3Cyoda/%3E%3C/buzz%3E%20cow.)发生了什么。

您需要的正则表达式要简单得多：`<.*?>`. 它只是选择每个标签，忽略它是否打开/关闭。[可视化](http://www.debuggex.com/?re=%3C.%2a?%3E&str=How%20%3Cbuzz%3Enow%20%3Cfizz%3Ebrown%3C/fizz%3E%3Cyoda/%3E%3C/buzz%3E%20cow.)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T16:32:42.363

你也可以试试这个：

```
str = str.replaceAll("<.*?>", ""); 
```

请查看以下示例以更好地理解：

```
public class StringUtils {

    public static void main(String[] args) {
        System.out.println(StringUtils.replaceAll("How now <fizz>brown</fizz> cow."));
        System.out.println(StringUtils.replaceAll("How <buzz>now <fizz>brown</fizz><yoda/></buzz> cow."));
    }

    public static String replaceAll(String strInput) {
        return strInput.replaceAll("<.*?>", "");
    }
} 
```

**输出：**

```
How now brown cow.
How now brown cow. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-29T14:33:51.663

这并不优雅，但很容易遵循。如果它们一起出现在一行中，下面的代码将删除开始和结束 XML 标记

`<url>"www.xml.com"<\url> , <body>"This is xml"<\body>`

正则表达式：

```
to_replace='<\w*>|<\/\w*>',value="" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-23T12:32:14.550

如果你想解析 XML 日志文件，那么你可以使用正则表达式 {java} `<[^<]+<`，.so 你得到`<name>DEV</name>`. 输出如名称> DEV。你只需要玩 REGEX。

# android - 根据 Google Play 中的条件设置应用程序价格

> ID：15769032
> 
> 赞同：1
> 
> 时间：2013-04-02T16:14:22.517
> 
> 标签：android, google-play

我刚刚在 Google Play 创建了一个开发者帐户。现在我要上传应用程序，但我有一些疑问：

1.  我可以为不同的应用程序添加多个 Android APK 吗？
2.  是否可以上传应用程序进行测试，然后设置应用程序的价格？
3.  是否可以设置这样的标准，让前 500 个用户免费下载，然后支付应用程序？
4.  如果上传时出现问题，是否可以删除应用程序并重新上传？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:45:43.203

1.  [一个应用程序的多个 APK](http://developer.android.com/google/play/publishing/multiple-apks.html)：

    > 多 APK 支持是 Google Play 上的一项功能，它允许您为您的应用程序发布不同的 APK，每个 APK 针对不同的设备配置。每个 APK 都是您的应用程序的完整且独立的版本，但它们在 Google Play 上共享相同的应用程序列表，并且必须共享相同的包名称并使用相同的发布密钥进行签名。

    除此之外，使用您的开发者帐户，您当然可以创建多个应用程序项目并为它们提供您的 APK。

2.  不可以。免费发布应用程序后，您不能为其定价。您必须创建一个具有不同包名称的新应用程序项目。

3.  Google Play 商店自然不支持这一点。但是您可以通过编写一个在网络上同步的计数器函数来实现这一点。您还可以在 Google Play 商店中抓取/抓取您的应用页面以[获取安装号](https://stackoverflow.com/a/8628884/1140682)。有多种方式。

4.  上传 APK 后，Play 商店例程中集成了某种健全性检查。这应该可以防止在上传过程中出现任何问题。无论如何，您也可以上传一个新的 APK，替换以前的。这就是应用程序更新的工作方式。

总体而言，您的案例听起来您可以使用[In-App-Billing](http://developer.android.com/google/play/billing/index.html)让您的用户免费访问您应用中的大部分功能，并在经过一段时间后，在付款后为他们提供全部功能。
请记住，在 Play 商店中免费推广您的应用程序，然后将所有内容隐藏在应用程序内的支付墙后面并不是一个好习惯。

**更新答案：**
如果您想提供免费和付费 APK，您需要有不同的包名称（即您的开发者帐户中的不同应用项目）。这实际上是一种常见做法，您会在 Play 商店中找到许多具有“免费”和付费“高级”版本的应用程序。

很多时候，如果高级版仅用作解锁免费版某些功能的钥匙（即没有实际功能），则维护和更新您的应用程序会更容易。因此，如果用户安装了高级版本，您可以[签入您的代码。](https://stackoverflow.com/questions/3062946/how-can-i-use-the-paid-version-of-my-app-as-a-key-to-the-free-version)

尽管如此，不使用虚拟高级应用程序“污染”Play Store 并通过应用程序内购买高级功能来实现这一点会更优雅。[这](http://blog.blundell-apps.com/simple-inapp-billing-payment/)是一个很好的教程（除了我上面链接的 Android 指南）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:44:22.097

1)是的，您的帐户可以有多个应用程序。还是您的意思是同一个应用程序有多个 apk？

2）不，一旦应用程序免费，以后就不能再增加价格。如果它有价格，你可以改变它的成本

3)没有

4）您可以随时上传新版本，这似乎是您想要的。

# c# - 视图显示“System.Data.Entity.DynamicProxies ...”而不是实际的子数据

> ID：15769034
> 
> 赞同：1
> 
> 时间：2013-04-02T16:14:25.717
> 
> 标签：c#, .net, razor, asp.net-mvc-4, displayfor

我有一个通过数据库优先导入生成的主/子关系模型。当我尝试在同一页面上输出子数据时，我会为每个子行而不是数据显示“System.Data.Entity.DynamicProxies ...”字符串。我认为 .NET MVC 足够聪明，可以识别子集合并自动输出行数据（我最终会添加显示/编辑格式化模板）。我可以通过主视图中的循环遍历数据，因此数据在集合中，但尝试 DisplayFor 子类正在显示代理名称或其他内容。有谁知道怎么回事？谢谢。

生成的模型（为简洁起见省略了额外的字段）如下：

```
namespace Test.Models
{

    public partial class HCCB_CR
    {
        public HCCB_CR()
        {
            this.HCCB_CR_CONTACTS = new HashSet<HCCB_CR_CONTACT>();
        }

        public string CCID { get; set; }
        public virtual ICollection<HCCB_CR_CONTACT> HCCB_CR_CONTACTS { get; set; }
    }
}

namespace Test.Models
{
    public partial class HCCB_CR_CONTACT
    {
        public decimal ID { get; set; }     //key
        public string CCID { get; set; }    // foreign key to hccb_cr

        public virtual HCCB_CR HCCB_CR { get; set; }
    }
} 
```

为详细信息生成的脚手架（缩写）：

```
@model Test.Models.HCCB_CR
@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<fieldset>
    <legend>HCCB_CR</legend>

    <div class="display-label">
         @Html.DisplayNameFor(model => model.CCID)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model.CCID)
    </div>

    <div class="display-field">
        @Html.DisplayFor(model => model.HCCB_CR_CONTACTS)
    </div>
</fieldset> 
```

输出：

```
CCID 
HCCB-CR100290 
System.Data.Entity.DynamicProxies.HCCB_CR_585E5CAF66461CDD0DF7F83DACDFCA848E78470297E638B38AB0FFDC8CBD83DASystem.Data.Entity.DynamicProxies.HCCB_CR_585E5CAF66461CDD0DF7F83DACDFCA848E78470297E638B38AB0FFDC8CBD83DASystem.Data.Entity.DynamicProxies.HCCB_CR_585E5CAF66461CDD0DF7F83DACDFCA848E78470297E638B38AB0FFDC8CBD83DASystem.Data.Entity.DynamicProxies.HCCB_CR_585E5CAF66461CDD0DF7F83DACDFCA848E78470297E638B38AB0FFDC8CBD83DASystem.Data.Entity.DynamicProxies.HCCB_CR_585E5CAF66461CDD0DF7F83DACDFCA848E78470297E638B38AB0FFDC8CBD83DASystem.Data.Entity.DynamicProxies.HCCB_CR_585E5CAF66461CDD0DF7F83DACDFCA848E78470297E638B38AB0FFDC8CBD83DA 
```

什么是 System.Data.Entity.DynamicProxies.HCCB_CR_... 为什么我会得到？

**更新：**希望这可能会有所帮助。当我进入 DisplayFor 时调试输出：

```
The thread '<No Name>' (0x3e70) has exited with code 0 (0x0).
Step into: Stepping over non-user     code 'System.Web.Mvc.WebViewPage<Test2.Models.HCCBJEFF_CR>.Html.get'
The thread '<No Name>' (0x3e48) has exited with code 0 (0x0).
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR.HCCBJEFF_CR_CONTACTS.get'
Step into: Stepping over non-user code 'System.Data.Entity.DynamicProxies.HCCBJEFF_CR_9D376C551350D68ED0D45F44495C7047639AE18E195454A7CE1DAB8EB66DDAF2.HCCBJEFF_CR_CONTACTS.get'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR.CCID.get'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.RelatedEnd.CreateSourceQuery<Test2.Models.HCCBJEFF_CR_CONTACT>'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.RelatedEnd.ValidateLoad<Test2.Models.HCCBJEFF_CR_CONTACT>'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.EntityCollection<Test2.Models.HCCBJEFF_CR_CONTACT>.Load'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.HCCBJEFF_CR_CONTACT'
Step into: Stepping over non-user code 'System.Data.Entity.DynamicProxies.HCCBJEFF_CR_CONTACT_0D5EDED0A9ECB95525658A667586E43649A2EDCBFD933981026D54A30B929661.HCCBJEFF_CR_CONTACT_0D5EDED0A9ECB95525658A667586E43649A2EDCBFD933981026D54A30B929661'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.CONTACTID.set'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.CNAME.set'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.CCID.set'
Step into: Stepping over non-user code 'System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly<Test2.Models.HCCBJEFF_CR_CONTACT>'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.CONTACTID.get'
Step into: Stepping over non-user code 'System.Data.Objects.ObjectStateManager.CheckKeyMatchesEntity'
Step into: Stepping over non-user code 'System.Data.Objects.ObjectStateManager.AddEntry'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.CNAME.get'
Step into: Stepping over non-user code 'System.Data.Objects.EntityEntry.TakeSnapshot'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.CCID.get'
Step into: Stepping over non-user code 'System.Data.Objects.EntityEntry.TakeSnapshot'
Step into: Stepping over non-user code 'System.Data.Objects.ObjectStateManager.AddEntry'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.HCCBJEFF_CR.get'
Step into: Stepping over non-user code 'System.Data.Entity.DynamicProxies.HCCBJEFF_CR_CONTACT_0D5EDED0A9ECB95525658A667586E43649A2EDCBFD933981026D54A30B929661.GetBasePropertyValue'
Step into: Stepping over non-user code 'System.Data.Objects.Internal.EntityProxyFactory.TryGetBasePropertyValue'
Step into: Stepping over non-user code 'System.Data.Objects.Internal.EntityProxyFactory.CreateBaseGetter.AnonymousMethod__4'
Step into: Stepping over non-user code 'System.Data.Objects.Internal.PocoPropertyAccessorStrategy.GetNavigationPropertyValue'
Step into: Stepping over non-user code 'System.Data.Objects.EntityEntry.WillNotRefSteal'
Step into: Stepping over non-user code 'System.Data.Objects.EntityEntry.FixupEntityReferenceToPrincipal'
Step into: Stepping over non-user code 'Test2.Models.HCCBJEFF_CR_CONTACT.HCCBJEFF_CR.set'
Step into: Stepping over non-user code 'System.Data.Entity.DynamicProxies.HCCBJEFF_CR_CONTACT_0D5EDED0A9ECB95525658A667586E43649A2EDCBFD933981026D54A30B929661.HCCBJEFF_CR.set'
Step into: Stepping over non-user code 'System.Data.Objects.Internal.PocoPropertyAccessorStrategy.SetNavigationPropertyValue'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.RelatedEnd.Add'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.EntityReference<Test2.Models.HCCBJEFF_CR>.ReferenceValue.set'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.EntityReference.SetEntityKey'
Step into: Stepping over non-user code 'System.Data.Objects.EntityEntry.FixupEntityReferenceToPrincipal'
Step into: Stepping over non-user code 'System.Data.Objects.EntityEntry.FixupReferencesByForeignKeys'
Step into: Stepping over non-user code 'System.Data.Objects.ObjectStateManager.FixupReferencesByForeignKeys'
Step into: Stepping over non-user code 'System.Data.Objects.ObjectStateManager.AddEntry'
Step into: Stepping over non-user code 'System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly<Test2.Models.HCCBJEFF_CR_CONTACT>'
Step into: Stepping over non-user code 'System.Data.Common.Internal.Materialization.Coordinator<Test2.Models.HCCBJEFF_CR_CONTACT>.ReadNextElement'
Step into: Stepping over non-user code 'System.Data.Common.Internal.Materialization.Shaper<Test2.Models.HCCBJEFF_CR_CONTACT>.SimpleEnumerator.MoveNext'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.RelatedEnd.Merge<Test2.Models.HCCBJEFF_CR_CONTACT>'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.EntityCollection<Test2.Models.HCCBJEFF_CR_CONTACT>.Load'
Step into: Stepping over non-user code 'System.Data.Objects.DataClasses.RelatedEnd.DeferredLoad'
Step into: Stepping over non-user code 'System.Data.Objects.Internal.LazyLoadBehavior.LoadProperty<System.__Canon>'
Step into: Stepping over non-user code 'System.Data.Entity.DynamicProxies.HCCBJEFF_CR_9D376C551350D68ED0D45F44495C7047639AE18E195454A7CE1DAB8EB66DDAF2.HCCBJEFF_CR_CONTACTS.get'
Step into: Stepping over non-user code 'System.Web.Mvc.ModelMetadata.FromLambdaExpression<Test2.Models.HCCBJEFF_CR,System.Collections.Generic.ICollection<Test2.Models.HCCBJEFF_CR_CONTACT>>.AnonymousMethod__2'
Step into: Stepping over non-user code 'System.Web.Mvc.ModelMetadata.Model.get'
Step into: Stepping over non-user code 'System.Web.Mvc.Html.TemplateHelpers.TemplateHelper'
Step into: Stepping over non-user code 'System.Web.Mvc.Html.TemplateHelpers.TemplateFor<Test2.Models.HCCBJEFF_CR,System.Collections.Generic.ICollection<Test2.Models.HCCBJEFF_CR_CONTACT>>' 
```

HCCB_CR_CONTACT 模板：

```
 @model Test.Models.HCCB_CR_CONTACT

    <fieldset>
        <legend>HCCB_CR_CONTACT</legend>

        <div class="display-label">
             @Html.DisplayNameFor(model => model.ID)
        </div>
        <div class="display-field">
            @Html.DisplayFor(model => model.ID)
        </div>
        <div class="display-label">
             @Html.DisplayNameFor(model => model.CCID)
        </div>
        <div class="display-field">
            @Html.DisplayFor(model => model.CCID)
        </div>
    </fieldset>
    <p>
        @Html.ActionLink("Edit", "Edit", new { id=Model.ID }) |
        @Html.ActionLink("Back to List", "Index")
    </p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:26:23.877

由于它不知道如何呈现哈希集中的项目，因此 DisplayFor 正在调用集合中每个项目的 ToString 方法。

您可能希望查看[创建 MVC 显示模板和编辑模板](http://msdn.microsoft.com/en-us/library/ee308450%28v=VS.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T16:08:27.963

我有同样的问题，但不知何故，我的**.cshtml**文件（在**DisplayTemplates**中）没有发布（不再）。

确保它的**Build Action**设置为**Content**。

我花了几个小时才弄清楚，所以我想把它作为一个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T15:53:04.907

我自己也遇到了这个。确保您具备以下条件：

1.  在您的共享视图文件夹中，您需要一个文件夹标题 DisplayTemplates。
2.  在您的 DisplayTemplates 文件夹中，您需要部分视图，该视图的名称与您的模型完全相同（因此，在您的情况下，该文件将是 /Shared/DisplayTemplates/HCCB_CR_CONTACT.cshtml，文件名前没有下划线）。

因此，作为使用您的测试内容的示例，您将做一些非常类似于...

**/Views/Shared/DisplayTemplates/HCCB_CR_CONTACT.cshtml**

```
@model Test.Models.HCCB_CR_CONTACT

<fieldset>
    <legend>HCCB_CR_CONTACT</legend>

    <div class="display-label">
         @Html.DisplayNameFor(model => model.ID)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model.ID)
    </div>
    <div class="display-label">
         @Html.DisplayNameFor(model => model.CCID)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model.CCID)
    </div>
</fieldset>
<p>
    @Html.ActionLink("Edit", "Edit", new { id=Model.ID }) |
    @Html.ActionLink("Back to List", "Index")
</p> 
```

**/Views/HCCB_CR_BlahBlah.cshtml**

```
@model HCCB_CR

<div>
   <span>@Model.CCID</span>
   @Html.DisplayFor(model => model.HCCB_CR_CONTACTS)       
</div> 
```

***注意***：此方法使用带有剃刀视图的 ASP.Net MVC 5 和 .Net 4.5.1。

# java - java.net.SocketException：套接字关闭 TCP 客户端服务器通信

> ID：15769035
> 
> 赞同：6
> 
> 时间：2013-04-02T16:14:26.923
> 
> 标签：java, sockets, tcp, client-server, socketexception

我正在通过 TCP 创建一个 java 客户端/服务器应用程序，我们有两个套接字：

*   一种是用于交换消息。
*   二是用于文件传输。

我在服务器中创建了两个 ServerSocket，以便
通过接受 ServerSocket 来创建 Socket 1 和 2。

首先，客户端通过第一个 Socket 发送一些字节，
以便它可以告诉服务器它需要哪个文件。

然后服务器通过第二个套接字将文件发送给客户端。
客户端收到文件后，会尝试向服务器发送一条传输完成消息。

在那里我得到了关闭套接字的异常。
但是，直到现在我才关闭套接字。
我只关闭发送文件的缓冲区。
即使我在发送文件后尝试再次打开socketInputStream，错误仍然相同。
此外，如果我不关闭发送文件的缓冲区，客户端将不会获取文件。

**服务器异常**

> 返回消息中的错误 - java.net.SocketException：套接字已关闭

**客户端异常**

> 服务器响应 - java.net.SocketException：软件导致连接中止：套接字写入错误

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T02:57:10.717

“套接字关闭”异常意味着*捕获异常的应用程序*关闭了套接字，然后继续尝试使用它。您可能不知道关闭套接字的输入或输出流也会关闭另一个流和套接字。对于“软件导致的连接中止”，请参见重复链接。

# java - 如何在自定义安全领域（Glassfish）中使用自定义主体？

> ID：15769037
> 
> 赞同：6
> 
> 时间：2013-04-02T16:14:29.143
> 
> 标签：java, security, jakarta-ee, glassfish

我按照[说明](https://blogs.oracle.com/nithya/entry/groups_in_custom_realms "指示")为我的 glassfish 创建了一个自定义安全领域。一切正常，用户已正确验证。然而问题如下：

*   用户凭据在字符串中加密
*   领域解密此字符串并针对数据库执行身份验证（有效）
*   不是使用解密的值作为 securityContext 中的主体，而是传递加密的字符串。

我已经尝试覆盖 commit() 方法来替换`_userPrincipal`或附加我自己的实现，使用`getSubject().getPrincipals().add(new PrincipalImpl("user"))`. 两者都没有按预期工作。基本上这个问题很简单：如何在 glassfish 的自定义安全领域中设置我自己的主体，使其可以与注入的 securityContext 一起使用？

我的环境：

*   Glassfish 3.1.2.2 (Build 5) 完整配置文件
*   在身份验证之后运行的应用程序是基于 JAX-RS 1.1 的应用程序
*   SecurityContext 是使用注入获得的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T19:01:25.270

> 我已经尝试覆盖 commit() 方法来替换 _userPrincipal 或使用 getSubject().getPrincipals().add(new PrincipalImpl("user")) 附加我自己的实现。两者都没有按预期工作。

你得到什么样的错误？

无论如何，我认为您的问题在于此过程的第三步。SecurityContext 仅将 BASIC_AUTH、FORM_AUTH、CLIENT_CERT_AUTH、DIGEST_AUTH 定义为 AuthenticationScheme，因此 SecurityContext 可能无法看到您的安全方案或类型的实现。但是您可以尝试这些步骤，我希望它们对您有用。

A- 实现 Java 身份验证和授权服务 (JAAS) LoginModule 或扩展 com.sun.appserv.security.AppservPasswordLoginModule

```
public class MyLoginModule extends AppservPasswordLoginModule {

@Override
protected void authenticateUser() throws LoginException {
    if (!authenticate(_username, _password)) {
//Login fails
        throw new LoginException("LoginFailed");
    }
    String[] myGroups = getGroupNames(_username);
    commitUserAuthentication(myGroups);
}

private boolean authenticate(String username, String password) {
    /*
     Check the credentials against the authentication source, return true if          authenticated, return false otherwise
     */
    return true;
}

private String[] getGroupNames(String username) {
// Return the list of groups this user belongs to.
} 
```

B- 实现你的领域类。

```
public class MyRealm extends AppservRealm {

@Override
public void init(Properties props)
throws BadRealmException, NoSuchRealmException {
//here you initialize the realm
}
@Override
public String getAuthType() {
return "Custom Realm";
}
} 
```

C- 在服务器中安装和配置领域和 LoginModule。

为此，您需要查看 JSR 196 并通过实施 javax.security.auth.message.module.ServerAuthModule 来编写自己的 SAM。看看下面的链接。 [https://blogs.oracle.com/enterprisetechtips/entry/adding_authentication_mechanisms_to_the](https://blogs.oracle.com/enterprisetechtips/entry/adding_authentication_mechanisms_to_the)

# jquery - 查找其文本与列表中单击的文本匹配的元素

> ID：15769040
> 
> 赞同：3
> 
> 时间：2013-04-02T16:14:36.200
> 
> 标签：jquery

我在侧面导航栏中有一个列表，它代表页面上的对象。对象的标题与列表中的标题相匹配。如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/A35hB.png)

我正在尝试使用 jQuery 显示切换这些对象，以便当用户单击红色列表项（与红色页面对象的标题标题相同）时，相应的页面对象会切换为显示或隐藏。

这是我的简化代码：

```
// The left navigation list
<ul>
    <li>Charity Challenge Golf Outing</li>
    <li>Spring 2014 Membership Renewal</li>
    <li>EMEA Product Launch</li>
    <li>Platinum Customer Retention Spring Offer</li>
    <li>Key Account Upsell 2014</li>
</ul> 
```

* * *

```
// A couple of page objects
<div class="single-activity">
    <h2>Charity Challenge Golf Outing</h2>

    [...]
</div>

<div class="single-activity">
    <h2>Spring 2014 Membership Renewal</h2>

    [...]
</div>

<div class="single-activity">
    <h2EMEA Product Launch</h2>

    [...]
</div> 
```

* * *

```
// The jQuery
$(".left-panel li").click(function() {
    $(this).toggleClass("selected");
    $("#page-content").find(".single-activity").slideToggle();
}); 
```

* * *

**问题：**我现在知道为什么它不起作用，但我有点不确定如何根据`<h2>`标题“找到”对象。该代码可以滑动切换所有对象（因为它们都有`.single-activity`类，但我只想隐藏单击的那个。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:17:00.293

您可以使用 a`filter()`或`:contains`选择器：

```
$(".left-panel li").click(function() {
    $(this).toggleClass("selected");
    $("#page-content").find(".single-activity:contains("+$(this).text()+")").slideToggle();
}); 
```

或与`filter()`：

```
$(".left-panel li").click(function() {
    var txt = $.trim( $(this).text() );
    $(this).toggleClass("selected");
    $("#page-content").find(".single-activity").filter(function() {
        return $.trim( $(this).text() ) == txt;
    }).slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:17:56.447

```
$(".left-panel li").click(function() {
    var $this = $(this);
    $this.toggleClass("selected");
    $("#page-content").find(".single-activity:contains(" + $this.html() + ")").slideToggle();
}); 
```

# vhdl - 我在 ISE 中的 microblaze 系统的 .ucf 文件存在问题

> ID：15769041
> 
> 赞同：1
> 
> 时间：2013-04-02T16:14:40.153
> 
> 标签：vhdl, fpga, microblaze

好的，所以我从 XPS 添加了我的 microblaze，生成了一个 topvhdl 文件，添加了 ucf 文件，在我的 microblaze 中我有 4 个 GPIO，但我没有在 .ucf 文件中放置任何引脚，尽管它们在 topvhdl 中作为 inout 存在，但我能够编译项目并生成比特流。现在我注释掉顶部 vhdl 中的所有 GPIO 引脚，并将我的 microblaze 系统 GPIO 与内部信号连接，如图所示。这也没有遇到任何问题，我可以生成一个比特流。现在导致问题的原因是当我将 LED 的 7 个端口添加到我的顶级 vhdl 文件的外部引脚（这与我的 GPIO 无关）时，它开始告诉我 GPIO 引脚上的错误！！！这是代码：

```
-------------------------------------------------------------------------------
-- system_top.vhd
-------------------------------------------------------------------------------
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

library UNISIM;
use UNISIM.VCOMPONENTS.ALL;

entity system_top is
  port (
    fpga_0_Ethernet_MAC_PHY_tx_clk_pin : in std_logic;
    fpga_0_Ethernet_MAC_PHY_rx_clk_pin : in std_logic;
    fpga_0_Ethernet_MAC_PHY_crs_pin : in std_logic;
    fpga_0_Ethernet_MAC_PHY_dv_pin : in std_logic;
    fpga_0_Ethernet_MAC_PHY_rx_data_pin : in std_logic_vector(3 downto 0);
    fpga_0_Ethernet_MAC_PHY_col_pin : in std_logic;
    fpga_0_Ethernet_MAC_PHY_rx_er_pin : in std_logic;
    fpga_0_Ethernet_MAC_PHY_rst_n_pin : out std_logic;
    fpga_0_Ethernet_MAC_PHY_tx_en_pin : out std_logic;
    fpga_0_Ethernet_MAC_PHY_tx_data_pin : out std_logic_vector(3 downto 0);
    fpga_0_Ethernet_MAC_PHY_MDC_pin : out std_logic;
    fpga_0_Ethernet_MAC_PHY_MDIO_pin : inout std_logic;
    fpga_0_DDR2_SDRAM_DDR2_Clk_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_Clk_n_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_CE_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_CS_n_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_ODT_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_RAS_n_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_CAS_n_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_WE_n_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_BankAddr_pin : out std_logic_vector(1 downto 0);
    fpga_0_DDR2_SDRAM_DDR2_Addr_pin : out std_logic_vector(12 downto 0);
    fpga_0_DDR2_SDRAM_DDR2_DQ_pin : inout std_logic_vector(15 downto 0);
    fpga_0_DDR2_SDRAM_DDR2_DM_pin : out std_logic_vector(1 downto 0);
    fpga_0_DDR2_SDRAM_DDR2_DQS_pin : inout std_logic_vector(1 downto 0);
    fpga_0_DDR2_SDRAM_DDR2_DQS_n_pin : inout std_logic_vector(1 downto 0);
    fpga_0_DDR2_SDRAM_DDR2_DQS_Div_O_pin : out std_logic;
    fpga_0_DDR2_SDRAM_DDR2_DQS_Div_I_pin : in std_logic;
    fpga_0_clk_1_sys_clk_pin : in std_logic;
    fpga_0_rst_1_sys_rst_pin : in std_logic;
        LED : out std_logic_vector(0 to 7)--when i add this line it causses problems
--      xps_gpio_0_GPIO_IO_pin : inout std_logic_vector(0 to 31);--commented out the lines
--      xps_gpio_1_GPIO_IO_pin : inout std_logic_vector(0 to 31);
--      xps_gpio_2_GPIO_IO_pin : inout std_logic_vector(0 to 31);
--      xps_gpio_3_GPIO_IO_pin : inout std_logic_vector(0 to 31)
  );
end system_top;

architecture STRUCTURE of system_top is

  component system is
    port (
      fpga_0_Ethernet_MAC_PHY_tx_clk_pin : in std_logic;
      fpga_0_Ethernet_MAC_PHY_rx_clk_pin : in std_logic;
      fpga_0_Ethernet_MAC_PHY_crs_pin : in std_logic;
      fpga_0_Ethernet_MAC_PHY_dv_pin : in std_logic;
      fpga_0_Ethernet_MAC_PHY_rx_data_pin : in std_logic_vector(3 downto 0);
      fpga_0_Ethernet_MAC_PHY_col_pin : in std_logic;
      fpga_0_Ethernet_MAC_PHY_rx_er_pin : in std_logic;
      fpga_0_Ethernet_MAC_PHY_rst_n_pin : out std_logic;
      fpga_0_Ethernet_MAC_PHY_tx_en_pin : out std_logic;
      fpga_0_Ethernet_MAC_PHY_tx_data_pin : out std_logic_vector(3 downto 0);
      fpga_0_Ethernet_MAC_PHY_MDC_pin : out std_logic;
      fpga_0_Ethernet_MAC_PHY_MDIO_pin : inout std_logic;
      fpga_0_DDR2_SDRAM_DDR2_Clk_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_Clk_n_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_CE_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_CS_n_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_ODT_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_RAS_n_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_CAS_n_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_WE_n_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_BankAddr_pin : out std_logic_vector(1 downto 0);
      fpga_0_DDR2_SDRAM_DDR2_Addr_pin : out std_logic_vector(12 downto 0);
      fpga_0_DDR2_SDRAM_DDR2_DQ_pin : inout std_logic_vector(15 downto 0);
      fpga_0_DDR2_SDRAM_DDR2_DM_pin : out std_logic_vector(1 downto 0);
      fpga_0_DDR2_SDRAM_DDR2_DQS_pin : inout std_logic_vector(1 downto 0);
      fpga_0_DDR2_SDRAM_DDR2_DQS_n_pin : inout std_logic_vector(1 downto 0);
      fpga_0_DDR2_SDRAM_DDR2_DQS_Div_O_pin : out std_logic;
      fpga_0_DDR2_SDRAM_DDR2_DQS_Div_I_pin : in std_logic;
      fpga_0_clk_1_sys_clk_pin : in std_logic;
      fpga_0_rst_1_sys_rst_pin : in std_logic;

      xps_gpio_0_GPIO_IO_pin : inout std_logic_vector(0 to 31);
      xps_gpio_1_GPIO_IO_pin : inout std_logic_vector(0 to 31);
      xps_gpio_2_GPIO_IO_pin : inout std_logic_vector(0 to 31);
      xps_gpio_3_GPIO_IO_pin : inout std_logic_vector(0 to 31)
    );
  end component;

  attribute BUFFER_TYPE : STRING;
 attribute BOX_TYPE : STRING;
  attribute BUFFER_TYPE of fpga_0_Ethernet_MAC_PHY_tx_clk_pin : signal is "IBUF";
  attribute BUFFER_TYPE of fpga_0_Ethernet_MAC_PHY_rx_clk_pin : signal is "IBUF";
 attribute BOX_TYPE of system : component is "user_black_box";
signal      xps_gpio_0_GPIO_IO :  std_logic_vector(0 to 31);
signal      xps_gpio_1_GPIO_IO :  std_logic_vector(0 to 31);
signal      xps_gpio_2_GPIO_IO :  std_logic_vector(0 to 31);
signal      xps_gpio_3_GPIO_IO :  std_logic_vector(0 to 31);
begin

  system_i : system
    port map (
      fpga_0_Ethernet_MAC_PHY_tx_clk_pin => fpga_0_Ethernet_MAC_PHY_tx_clk_pin,
      fpga_0_Ethernet_MAC_PHY_rx_clk_pin => fpga_0_Ethernet_MAC_PHY_rx_clk_pin,
      fpga_0_Ethernet_MAC_PHY_crs_pin => fpga_0_Ethernet_MAC_PHY_crs_pin,
      fpga_0_Ethernet_MAC_PHY_dv_pin => fpga_0_Ethernet_MAC_PHY_dv_pin,
      fpga_0_Ethernet_MAC_PHY_rx_data_pin => fpga_0_Ethernet_MAC_PHY_rx_data_pin,
      fpga_0_Ethernet_MAC_PHY_col_pin => fpga_0_Ethernet_MAC_PHY_col_pin,
      fpga_0_Ethernet_MAC_PHY_rx_er_pin => fpga_0_Ethernet_MAC_PHY_rx_er_pin,
      fpga_0_Ethernet_MAC_PHY_rst_n_pin => fpga_0_Ethernet_MAC_PHY_rst_n_pin,
      fpga_0_Ethernet_MAC_PHY_tx_en_pin => fpga_0_Ethernet_MAC_PHY_tx_en_pin,
      fpga_0_Ethernet_MAC_PHY_tx_data_pin => fpga_0_Ethernet_MAC_PHY_tx_data_pin,
      fpga_0_Ethernet_MAC_PHY_MDC_pin => fpga_0_Ethernet_MAC_PHY_MDC_pin,
      fpga_0_Ethernet_MAC_PHY_MDIO_pin => fpga_0_Ethernet_MAC_PHY_MDIO_pin,
      fpga_0_DDR2_SDRAM_DDR2_Clk_pin => fpga_0_DDR2_SDRAM_DDR2_Clk_pin,
      fpga_0_DDR2_SDRAM_DDR2_Clk_n_pin => fpga_0_DDR2_SDRAM_DDR2_Clk_n_pin,
      fpga_0_DDR2_SDRAM_DDR2_CE_pin => fpga_0_DDR2_SDRAM_DDR2_CE_pin,
      fpga_0_DDR2_SDRAM_DDR2_CS_n_pin => fpga_0_DDR2_SDRAM_DDR2_CS_n_pin,
      fpga_0_DDR2_SDRAM_DDR2_ODT_pin => fpga_0_DDR2_SDRAM_DDR2_ODT_pin,
      fpga_0_DDR2_SDRAM_DDR2_RAS_n_pin => fpga_0_DDR2_SDRAM_DDR2_RAS_n_pin,
      fpga_0_DDR2_SDRAM_DDR2_CAS_n_pin => fpga_0_DDR2_SDRAM_DDR2_CAS_n_pin,
      fpga_0_DDR2_SDRAM_DDR2_WE_n_pin => fpga_0_DDR2_SDRAM_DDR2_WE_n_pin,
      fpga_0_DDR2_SDRAM_DDR2_BankAddr_pin => fpga_0_DDR2_SDRAM_DDR2_BankAddr_pin,
      fpga_0_DDR2_SDRAM_DDR2_Addr_pin => fpga_0_DDR2_SDRAM_DDR2_Addr_pin,
      fpga_0_DDR2_SDRAM_DDR2_DQ_pin => fpga_0_DDR2_SDRAM_DDR2_DQ_pin,
      fpga_0_DDR2_SDRAM_DDR2_DM_pin => fpga_0_DDR2_SDRAM_DDR2_DM_pin,
      fpga_0_DDR2_SDRAM_DDR2_DQS_pin => fpga_0_DDR2_SDRAM_DDR2_DQS_pin,
      fpga_0_DDR2_SDRAM_DDR2_DQS_n_pin => fpga_0_DDR2_SDRAM_DDR2_DQS_n_pin,
      fpga_0_DDR2_SDRAM_DDR2_DQS_Div_O_pin => fpga_0_DDR2_SDRAM_DDR2_DQS_Div_O_pin,
      fpga_0_DDR2_SDRAM_DDR2_DQS_Div_I_pin => fpga_0_DDR2_SDRAM_DDR2_DQS_Div_I_pin,
      fpga_0_clk_1_sys_clk_pin => fpga_0_clk_1_sys_clk_pin,
      fpga_0_rst_1_sys_rst_pin => fpga_0_rst_1_sys_rst_pin,
      xps_gpio_0_GPIO_IO_pin => xps_gpio_0_GPIO_IO,--connected to a signal not any external pin
      xps_gpio_1_GPIO_IO_pin => xps_gpio_1_GPIO_IO,--connected to a signal not any external pin
      xps_gpio_2_GPIO_IO_pin => xps_gpio_2_GPIO_IO,--connected to a signal not any external pin
      xps_gpio_3_GPIO_IO_pin => xps_gpio_3_GPIO_IO--connected to a signal not any external pin
    );

end architecture STRUCTURE; 
```

错误信息 ：

```
ERROR:Place:866 - Not enough valid sites to place the following IOBs:
   IO Standard: Name = LVCMOS25, VREF = NR, VCCO = 2.50, TERM = NONE, DIR = BIDIR, DRIVE_STR = 12
    xps_gpio_0_GPIO_IO_pin<0>
    xps_gpio_0_GPIO_IO_pin<1>
    xps_gpio_0_GPIO_IO_pin<2>
    xps_gpio_0_GPIO_IO_pin<3>
    xps_gpio_0_GPIO_IO_pin<4>
    xps_gpio_0_GPIO_IO_pin<5>
    xps_gpio_0_GPIO_IO_pin<6>
    xps_gpio_0_GPIO_IO_pin<7>
    xps_gpio_0_GPIO_IO_pin<8>
    xps_gpio_0_GPIO_IO_pin<9>
    xps_gpio_1_GPIO_IO_pin<0>
    xps_gpio_1_GPIO_IO_pin<1>
    xps_gpio_1_GPIO_IO_pin<2>
    xps_gpio_1_GPIO_IO_pin<3>
    xps_gpio_1_GPIO_IO_pin<4>
    xps_gpio_1_GPIO_IO_pin<5>
    xps_gpio_1_GPIO_IO_pin<6>
    xps_gpio_1_GPIO_IO_pin<7>
    xps_gpio_1_GPIO_IO_pin<8>
    xps_gpio_1_GPIO_IO_pin<9>
    xps_gpio_1_GPIO_IO_pin<10>
    xps_gpio_1_GPIO_IO_pin<11>
    xps_gpio_1_GPIO_IO_pin<12>
    xps_gpio_1_GPIO_IO_pin<20>
    xps_gpio_1_GPIO_IO_pin<13>
    xps_gpio_1_GPIO_IO_pin<21>
    xps_gpio_1_GPIO_IO_pin<14>
    xps_gpio_1_GPIO_IO_pin<22>
    xps_gpio_1_GPIO_IO_pin<30>
    xps_gpio_1_GPIO_IO_pin<15>
    xps_gpio_1_GPIO_IO_pin<23>
    xps_gpio_1_GPIO_IO_pin<31>
    xps_gpio_1_GPIO_IO_pin<16>
    xps_gpio_1_GPIO_IO_pin<24>
    xps_gpio_1_GPIO_IO_pin<17>
    xps_gpio_1_GPIO_IO_pin<25>
    xps_gpio_1_GPIO_IO_pin<18>
    xps_gpio_1_GPIO_IO_pin<26>
    xps_gpio_1_GPIO_IO_pin<19>
    xps_gpio_1_GPIO_IO_pin<27>
    xps_gpio_1_GPIO_IO_pin<28>
    xps_gpio_1_GPIO_IO_pin<29>
    xps_gpio_3_GPIO_IO_pin<10>
    xps_gpio_3_GPIO_IO_pin<11>
    xps_gpio_3_GPIO_IO_pin<12>
    xps_gpio_3_GPIO_IO_pin<20>
    xps_gpio_3_GPIO_IO_pin<13>
    xps_gpio_3_GPIO_IO_pin<21>
    xps_gpio_3_GPIO_IO_pin<14>
    xps_gpio_3_GPIO_IO_pin<22>
    xps_gpio_3_GPIO_IO_pin<30>
    xps_gpio_3_GPIO_IO_pin<15>
    xps_gpio_3_GPIO_IO_pin<23>
    xps_gpio_3_GPIO_IO_pin<31>
    xps_gpio_3_GPIO_IO_pin<16>
    xps_gpio_3_GPIO_IO_pin<24>
    xps_gpio_3_GPIO_IO_pin<17>
    xps_gpio_3_GPIO_IO_pin<25>
    xps_gpio_3_GPIO_IO_pin<18>
    xps_gpio_3_GPIO_IO_pin<26>
    xps_gpio_3_GPIO_IO_pin<19>
    xps_gpio_3_GPIO_IO_pin<27>
    xps_gpio_3_GPIO_IO_pin<28>
    xps_gpio_3_GPIO_IO_pin<29>
    xps_gpio_2_GPIO_IO_pin<0>
    xps_gpio_2_GPIO_IO_pin<1>
    xps_gpio_2_GPIO_IO_pin<2>
    xps_gpio_2_GPIO_IO_pin<3>
    xps_gpio_2_GPIO_IO_pin<4>
    xps_gpio_2_GPIO_IO_pin<5>
    xps_gpio_2_GPIO_IO_pin<6>
    xps_gpio_2_GPIO_IO_pin<7>
    xps_gpio_2_GPIO_IO_pin<8>
    xps_gpio_2_GPIO_IO_pin<9>
    xps_gpio_0_GPIO_IO_pin<10>
    xps_gpio_0_GPIO_IO_pin<11>
    xps_gpio_0_GPIO_IO_pin<12>
    xps_gpio_0_GPIO_IO_pin<20>
    xps_gpio_0_GPIO_IO_pin<13>
    xps_gpio_0_GPIO_IO_pin<21>
    xps_gpio_0_GPIO_IO_pin<14>
    xps_gpio_0_GPIO_IO_pin<22>
    xps_gpio_0_GPIO_IO_pin<30>
    xps_gpio_0_GPIO_IO_pin<15>
    xps_gpio_0_GPIO_IO_pin<23>
    xps_gpio_0_GPIO_IO_pin<31>
    xps_gpio_0_GPIO_IO_pin<16>
    xps_gpio_0_GPIO_IO_pin<24>
    xps_gpio_0_GPIO_IO_pin<17>
    xps_gpio_0_GPIO_IO_pin<25>
    xps_gpio_0_GPIO_IO_pin<18>
    xps_gpio_0_GPIO_IO_pin<26>
    xps_gpio_0_GPIO_IO_pin<19>
    xps_gpio_0_GPIO_IO_pin<27>
    xps_gpio_0_GPIO_IO_pin<28>
    xps_gpio_0_GPIO_IO_pin<29>
    xps_gpio_3_GPIO_IO_pin<0>
    xps_gpio_3_GPIO_IO_pin<1>
    xps_gpio_3_GPIO_IO_pin<2>
    xps_gpio_3_GPIO_IO_pin<3>
    xps_gpio_3_GPIO_IO_pin<4>
    xps_gpio_3_GPIO_IO_pin<5>
    xps_gpio_3_GPIO_IO_pin<6>
    xps_gpio_3_GPIO_IO_pin<7>
    xps_gpio_3_GPIO_IO_pin<8>
    xps_gpio_3_GPIO_IO_pin<9>
    xps_gpio_2_GPIO_IO_pin<10>
    xps_gpio_2_GPIO_IO_pin<11>
    xps_gpio_2_GPIO_IO_pin<12>
    xps_gpio_2_GPIO_IO_pin<20>
    xps_gpio_2_GPIO_IO_pin<13>
    xps_gpio_2_GPIO_IO_pin<21>
    xps_gpio_2_GPIO_IO_pin<14>
    xps_gpio_2_GPIO_IO_pin<22>
    xps_gpio_2_GPIO_IO_pin<30>
    xps_gpio_2_GPIO_IO_pin<15>
    xps_gpio_2_GPIO_IO_pin<23>
    xps_gpio_2_GPIO_IO_pin<31>
    xps_gpio_2_GPIO_IO_pin<16>
    xps_gpio_2_GPIO_IO_pin<24>
    xps_gpio_2_GPIO_IO_pin<17>
    xps_gpio_2_GPIO_IO_pin<25>
    xps_gpio_2_GPIO_IO_pin<18>
    xps_gpio_2_GPIO_IO_pin<26>
    xps_gpio_2_GPIO_IO_pin<19>
    xps_gpio_2_GPIO_IO_pin<27>
    xps_gpio_2_GPIO_IO_pin<28>
    xps_gpio_2_GPIO_IO_pin<29> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T14:30:57.867

这是一条评论，因为我还不能发表评论：/

我不确定，如果错误是失败的。我宁愿说之前不打印错误消息是失败的。如果您正在处理一些输入，您应该始终注意快捷方式。尝试将它们设置为`open`，因此它们根本不会连接到您的 FPGA。

# php - 从 PHP 中的多个 cURL 返回 http 状态码

> ID：15769046
> 
> 赞同：3
> 
> 时间：2013-04-02T16:14:44.563
> 
> 标签：php, curl, http-status-codes, curl-multi

我试图从我的脚本发出的两个并行 cURL 请求的标头信息中返回两个 http 状态代码。到目前为止，我的脚本如下所示，最后的 print_r() 打印出：Array ( [0] => 200 [1] => )。我不确定为什么它不返回第二个状态码？提前致谢。

```
function checkHTTPStatusCode($ip1,$ip2) {
    $agent = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";

    //create cURL resources
    $ch1 = curl_init();
    $ch1 = curl_init();

    //set opptions
    curl_setopt ($ch1, CURLOPT_URL,$ip1);
    curl_setopt ($ch1, CURLOPT_USERAGENT, $agent);
    curl_setopt ($ch1, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch1, CURLOPT_VERBOSE, false);
    curl_setopt ($ch1, CURLOPT_TIMEOUT, 5);

    curl_setopt ($ch2, CURLOPT_URL,$ip2);
    curl_setopt ($ch2, CURLOPT_USERAGENT, $agent);
    curl_setopt ($ch2, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch2, CURLOPT_VERBOSE, false);
    curl_setopt ($ch2, CURLOPT_TIMEOUT, 5);

    //create the multiple cURL handle
    $mh = curl_multi_init();

    //add the two handles
    curl_multi_add_handle($mh,$ch1);
    curl_multi_add_handle($mh,$ch2);

    //execute the handles
    $running = null;
    do {
        curl_multi_exec($mh, $running);
    } while($running > 0);

    //get http status codes
    $httpcode1 = curl_getinfo($ch1, CURLINFO_HTTP_CODE);
    $httpcode2 = curl_getinfo($ch2, CURLINFO_HTTP_CODE);

    //close the handles
    curl_multi_remove_handle($mh, $ch1);
    curl_multi_remove_handle($mh, $ch2);
    curl_multi_close($mh);  

    return array($httpcode1,$httpcode2);
}

$test = checkHTTPStatusCode('http://www.yahoo.com','http://www.google.com');

print_r($test); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:19:35.423

在这里打错字：

```
//create cURL resources
$ch1 = curl_init();
$ch1 = curl_init(); 
```

我猜你的意思`$ch2 = curl_init();`是第二个。

# java - 清理登录数据

> ID：15769049
> 
> 赞同：1
> 
> 时间：2013-04-02T16:14:58.137
> 
> 标签：java, android, out-of-memory

我创建了一个连接到 facebook 的应用程序，还从服务器下载了一些图片和从 facebook 下载的个人资料图片。

然后我在我的应用程序中创建了一个退出按钮，该按钮从用户登录的帐户中退出。然后应用程序返回登录页面。

但是，当我从以前的帐户注销后再次连接到 Facebook 时，它会显示 OutOfMemory 异常。

然后我将 VM 堆大小从 32 MB 增加到 48MB，它仍然显示 OutOfMemory 异常。

当用户登录然后退出他的帐户以避免OutOfMemory异常时，如何清除到目前为止所有下载的数据？

这是我的退出活动：

```
public class ExitActivity extends Activity{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.freinds_listview);

        Session session = Session.getActiveSession();
        if (!session.isClosed()) {
            session.closeAndClearTokenInformation();
        }

        Intent i = new Intent(getApplicationContext(), MainActivity.class);

        startActivity(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:20:28.590

当用户登录应用程序时，您可以尝试使用此代码吗？

```
File[] files = cacheDir.listFiles();
for (File file : files){
    file.delete();
} 
```

# single-sign-on - 使用 openAm 作为 IDP 和另一个服务提供商会抛出名称 ID 格式的异常

> ID：15769050
> 
> 赞同：0
> 
> 时间：2013-04-02T16:15:06.857
> 
> 标签：single-sign-on, openam

我正在尝试使用 OpenAm 作为 IDP 和应用程序本身作为服务提供商为我的应用程序配置 SSO。

以下是 IDP 和服务提供商的元数据：

```
 <EntityDescriptor entityID="http://www.cpfdomain.com:8091/openam_10.0.1" xmlns="urn:oasis:names:tc:SAML:2.0:metadata">
<IDPSSODescriptor WantAuthnRequestsSigned="false" protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">
    <ArtifactResolutionService index="0" isDefault="true" Binding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Location="http://www.cpfdomain.com:8091/openam_10.0.1/ArtifactResolver/metaAlias/idp"/>
    <SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="http://www.cpfdomain.com:8091/openam_10.0.1/IDPSloRedirect/metaAlias/idp" ResponseLocation="http://www.cpfdomain.com:8091/openam_10.0.1/IDPSloRedirect/metaAlias/idp"/>
    <SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="http://www.cpfdomain.com:8091/openam_10.0.1/IDPSloPOST/metaAlias/idp" ResponseLocation="http://www.cpfdomain.com:8091/openam_10.0.1/IDPSloPOST/metaAlias/idp"/>
    <SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Location="http://www.cpfdomain.com:8091/openam_10.0.1/IDPSloSoap/metaAlias/idp"/>
    <ManageNameIDService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="http://www.cpfdomain.com:8091/openam_10.0.1/IDPMniRedirect/metaAlias/idp" ResponseLocation="http://www.cpfdomain.com:8091/openam_10.0.1/IDPMniRedirect/metaAlias/idp"/>
    <ManageNameIDService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="http://www.cpfdomain.com:8091/openam_10.0.1/IDPMniPOST/metaAlias/idp" ResponseLocation="http://www.cpfdomain.com:8091/openam_10.0.1/IDPMniPOST/metaAlias/idp"/>
    <ManageNameIDService Binding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Location="http://www.cpfdomain.com:8091/openam_10.0.1/IDPMniSoap/metaAlias/idp"/>
    <NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress</NameIDFormat>
    <NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</NameIDFormat>
    <NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:WindowsDomainQualifiedName</NameIDFormat>
    <NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos</NameIDFormat>
    <NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</NameIDFormat>
    <SingleSignOnService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="http://www.cpfdomain.com:8091/openam_10.0.1/SSORedirect/metaAlias/idp"/>
    <SingleSignOnService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="http://www.cpfdomain.com:8091/openam_10.0.1/SSOPOST/metaAlias/idp"/>
    <SingleSignOnService Binding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Location="http://www.cpfdomain.com:8091/openam_10.0.1/SSOSoap/metaAlias/idp"/>
    <NameIDMappingService Binding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Location="http://www.cpfdomain.com:8091/openam_10.0.1/NIMSoap/metaAlias/idp"/>
    <AssertionIDRequestService Binding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Location="http://www.cpfdomain.com:8091/openam_10.0.1/AIDReqSoap/IDPRole/metaAlias/idp"/>
    <AssertionIDRequestService Binding="urn:oasis:names:tc:SAML:2.0:bindings:URI" Location="http://www.cpfdomain.com:8091/openam_10.0.1/AIDReqUri/IDPRole/metaAlias/idp"/>
</IDPSSODescriptor> 
```

服务提供商元数据：

```
<EntityDescriptor xmlns="urn:oasis:names:tc:SAML:2.0:metadata" entityID="test">
    <SPSSODescriptor AuthnRequestsSigned="false" WantAssertionsSigned="true" protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">
        <KeyDescriptor>
            <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
                <X509Data>
                    <X509Certificate>Key Info</X509Certificate>
                </X509Data>
            </KeyInfo>
        </KeyDescriptor>
        <SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="LOGOUT LOCATION URI" ResponseLocation="LOGOUT LOCATION URI"/>
        <NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress
        </NameIDFormat>
        <AssertionConsumerService index="0" isDefault="true" Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="ASSERTION URI"/>
    </SPSSODescriptor>
</EntityDescriptor> 
```

当我测试联邦时，我总是收到以下错误：

```
message Error processing AuthnRequest. Service provider does not support name identifier format urn:oasis:names:tc:SAML:2.0:nameid-format:transient. 
```

在我正在测试的信任圈中，我已从 IDP 和 SP 中删除了此标识符。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:54:21.503

由于您已经从 IdP 和 SP MetaData 中删除了 NameIdFormat 'urn:oasis:names:tc:SAML:2.0:nameid-format:transient' ，因此您不能使用它......这应该很明显。

当然，您必须通过指定两个实体都支持的 NameIdFormat 来测试 SSO ...在您的情况下为“urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress”。

要使用 HTTP-POST 绑定测试 IdP 发起的 SSO，请使用 ...

OPENAM_SCHEME://OPENAM_FQDN:OPENAM_PORT/OPENAM_DEPLOYMENT_URI/idpssoinit?NameIDFormat=urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&metaAlias=IDP_META_ALIAS&spEntityID=test&binding=urn:oasis:names:tc:SAML:2.0:bindings: HTTP-POST

# java - 无法让 Apache POI autosizeColumn() 正常工作

> ID：15769054
> 
> 赞同：1
> 
> 时间：2013-04-02T16:15:19.080
> 
> 标签：java, apache, excel, apache-poi

好的，所以我知道您必须在将所有数据输入工作表和工作簿后添加 autoSizeColumns() 方法。这就是我正在做的，但它只是调整到最后输入的单元格的宽度？

```
public void writeFile() {
            Workbook wb = new HSSFWorkbook();
            Sheet s = wb.createSheet();
            try {

                FileOutputStream out = new FileOutputStream(
                        this.getSelectedFile());
                // create a new workbook

                // create a new sheet

                // declare a row object reference
                Row r = null;
                // declare a cell object reference
                Cell c = null;
                // in case of plain ascii
                wb.setSheetName(0, "Street Light Report");
                // create a sheet with 30 rows (0-29)
                // int rownum;
                // short rownum;
                // PrintWriter printOut = new PrintWriter(
                // this.getSelectedFile());
                String[] colName = { "Light Id", "Flagged",
                        "Malfunction", "Comments", "Location", "Date" };
                // printOut.println("Light Id,Flagged,Malfunction,Comments,Location,Date");
                Connections.connect();
                String[][] data = Connections.searchForFlagged();
                for (int i = 0; i < data.length; i++) {
                    r = s.createRow(i);
                }
                r.setRowNum(0);
                for (int j = 0; j < 6; j++) {
                    c = r.createCell(j);
                    switch (j) {
                    case 0:
                        c.setCellValue(colName[j]);
                        break;
                    case 1:
                        c.setCellValue(colName[j]);
                        break;
                    case 2:
                        c.setCellValue(colName[j]);
                        break;
                    case 3:
                        c.setCellValue(colName[j]);
                        break;
                    case 4:
                        c.setCellValue(colName[j]);
                        break;
                    case 5:
                        c.setCellValue(colName[j]);
                        break;

                    }
                }

                for (int i = 0; i < data.length; i++) {

                    r.setRowNum(i + 1);
                    for (int j = 0; j < data[i].length; j++) {

                        c = r.createCell(j);

                        // System.out.println(data[i][j]);

                        switch (j) {
                        case 0:
                            c.setCellType(Cell.CELL_TYPE_NUMERIC);
                            c.setCellValue(Integer.parseInt(data[i][j]));
                            break;
                        case 1:
                            if (data[i][j].equals("true"))
                                c.setCellValue("Yes");
                            else
                                c.setCellValue("No");
                            break;
                        case 2:
                            if (data[i][j].equals("I"))
                                c.setCellValue("Intermittent");
                            else
                                c.setCellValue("Not Functional");
                            break;
                        case 3:
                            c.setCellValue(data[i][j]);
                            break;
                        case 4:
                            c.setCellValue(data[i][j]);
                            break;
                        case 5:
                            c.setCellValue(data[i][j]);
                            break;
                        }

                    }
                }
                                        wb.getSheetAt(0).setPrintGridlines(true);
                for (int j = 0; j < 6; j++) {
                    s.autoSizeColumn(j);
                }
                wb.write(out);
                out.close();
            } catch (Exception ex) {

            }
    }; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-19T16:22:05.900

看来您没有太多列。您可以尝试像这样定义每一列：

```
sheet.autoColumnWidth(column number); //0 for the first column, 1 for the second, etc. 
```

如果可行，那么您的循环有问题。

# android - GL_LUMINANCE 与 OpenGL ES 2.0 上的字节数组

> ID：15769056
> 
> 赞同：1
> 
> 时间：2013-04-02T16:15:21.457
> 
> 标签：android, opengl-es, opengl-es-2.0, shader

我正在结合 libvpx（WebM 解码库）和 OpenGL ES 2.0 着色器（适用于 Android）获得的 yuv 数据进行编程。

这些是相同的字节数组，但在这种情况下未正确绘制。

成功：

```
// ex) unsigned char *p = yuv.y, yuv.u or yuv.v;
for(int dy = 0; dy < hh; dy++){
    glTexSubImage2D(GL_TEXTURE_2D, 0,   0, dy, ww, 1, GL_LUMINANCE, GL_UNSIGNED_BYTE, p);
    p += ww;
} 
```

失败 ：

```
glTexSubImage2D(GL_TEXTURE_2D, 0,  0, 0, ww, hh, GL_LUMINANCE, GL_UNSIGNED_BYTE, p); 
```

因为我不了解OpenGL，所以我不明白这个原因。我认为如果每行都调用 glTexSubImage2D ，性能会变差。是不是不能再改进了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:34:35.463

我最好的猜测是您传递给 glTexSubImage2D 的数据未正确对齐。

从 OpenGL ES 2.0 的[glTexSubImage2D 参考页面](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexSubImage2D.xml "glTexSubImage2D 参考页")：

> 由 glPixelStorei 设置的存储参数 GL_UNPACK_ALIGNMENT 会影响从客户端内存中读取数据的方式。有关说明，请参见 glPixelStorei。

从您的数据中一次传递一行可能会隐藏每行未正确对齐的事实，因此调用成功。

# excel - 在 VBA 中交换轴绘制散点图

> ID：15769059
> 
> 赞同：1
> 
> 时间：2013-04-02T16:15:30.970
> 
> 标签：excel, charts, vba

使用以下代码，我得到了我想要的图形，只是它以错误的方式绘制了轴。如何将 X 数据更改为 Y 数据，反之亦然？

```
 Sub AddChartObject()

    Set cht = ActiveChart
    Set rng = ActiveSheet.Range("AB30:AD40")

    With ActiveSheet.ChartObjects.Add(Left:=rng.Left, Width:=rng.Width, Top:=rng.Top, Height:=rng.Height)
     '(Left:=100, Width:=375, Top:=75, Height:=225)
        .Chart.ChartType = xlXYScatterLines

        .Chart.SetSourceData Source:=Range("O30:O40,N30:N40")

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:23:27.467

将数据添加到图表后，您需要单独设置`XValues`和。`Values`

```
Dim srs as Series

With ActiveSheet.ChartObjects.Add(Left:=rng.Left, Width:=rng.Width, Top:=rng.Top, Height:=rng.Height)
 '(Left:=100, Width:=375, Top:=75, Height:=225)
    .Chart.ChartType = xlXYScatterLines

    '.Chart.SetSourceData Source:=Range("O30:O40,N30:N40")
    Set srs = .Chart.SeriesCollection.NewSeries
    srs.Name = "The series name" '<-- edit as needed
    srs.XValues = Range("O30:O40")
    srs.Values = Range("N30:N40")

End With 
```

如果那不这样做，那么只需翻转 Values/xValues，如：

```
 srs.XValues = Range("N30:N40")
    srs.Values = Range("O30:O40") 
```

这些方法之一将为您做到这一点。

# jquery - 导入带有渐变和纹理的 svg 文件

> ID：15769066
> 
> 赞同：0
> 
> 时间：2013-04-02T16:15:50.880
> 
> 标签：jquery, svg, raphael, textures, gradient

我正在使用库[raphael-svg-import-classic](https://github.com/crccheck/raphael-svg-import-classic)。

有人知道如何导入带有渐变和纹理的 svg 文件吗？

我使用我在公司使用的相同代码，（相同，我想是的，现在我无法再访问它，但我正在使用的代码使用相同的库 raphael svg import classic）。

```
jQuery(document).ready(function(){
    jQuery.ajax({
    type: "GET",
    url: "assets/demo.svg",
    dataType: "xml",
    success: function(svgXML) {
        var paper = Raphael(10, 10, 800, 600);
        var newSet = paper.importSVG(svgXML);
        }
    });
}); 
```

在调试器中没有错误，我可以导入文件但 svg 元素没有纹理和渐变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:16:24.663

这是我的js代码。

正如我之前提到的，元素出现但没有纹理和渐变。

```
<script type="text/javascript">
    function mouseHover(svgObjects){
        var mouseover = function (event) {
            this.attr({opacity:0.8});
        }
        var mouseout = function (event) {
            this.attr({opacity:1});
        }
        svgObjects.hover(mouseover, mouseout);
    }

    function dragNdrop(paper, newSet, svgObjects){
        var posX = 't' + svgObjects.getBBox().x;
        var posY = svgObjects.getBBox().y;

        mouseHover(svgObjects);

        var start = function () {
            this.ox = 0;
            this.oy = 0;
        },
        move = function (dx, dy) {
            var objectScale = this.matrix.a;
            var trans_x = dx-this.ox;
            var trans_y = dy-this.oy;
            if(((this.matrix.e>0) 
                    && (this.matrix.e+this.getBBox().width)<paper.width
                    && (this.matrix.f>0) 
                    && (this.matrix.f+this.getBBox().height)<paper.height
                )){
                this.translate(trans_x/objectScale,trans_y/objectScale);
                if(((this.matrix.e>newSet.getBBox().x) 
                    && (this.matrix.e+this.getBBox().width)<newSet.getBBox().x2
                    && (this.matrix.f>newSet.getBBox().y) 
                    && (this.matrix.f+this.getBBox().height)<newSet.getBBox().y2
                )){
                    newSet.attr({opacity:0.7});
                }else{
                    newSet.attr({opacity:1});
                }
            }
            this.ox = dx;
            this.oy = dy;
        },
        up = function () {
            if(!((this.matrix.e>newSet.getBBox().x) 
                    && (this.matrix.e+this.getBBox().width)<newSet.getBBox().x2
                    && (this.matrix.f>newSet.getBBox().y) 
                    && (this.matrix.f+this.getBBox().height)<newSet.getBBox().y2
                )){
                this.animate({
                    transform: '"' + posX + ',' + posY + ',s1' + '"'
                }, 500, 'easeIn');   
            }else{
                newSet.attr({opacity:1});
            }
        };
        paper.set(svgObjects).drag(move, start, up);
    }

    function getSVG(url){
        jQuery.ajax({
            type: "GET",
            url: "images/tshirt.svg",
            dataType: "xml",
            success: function(svgXML) {
                var width = 1024; 
                var height = 768;
                var paper = Raphael('tela', width, height);
                var newSet = paper.importSVG(svgXML);
                var basePlusValue = newSet.getBBox().width;
                var centerBase = (width/2)-(basePlusValue/2);
                newSet.translate(centerBase, 20);
                newSet.attr({id : 'base'});
                jQuery.ajax({
                    type: "GET",
                    url: url,
                    dataType: "xml",
                    success: function(svgComponent) {
                        var newComponent = paper.importSVG(svgComponent);
                        var spacePaperToElement = newComponent.getBBox().width*2;
                        newComponent.translate(centerBase + spacePaperToElement, 20);
                        newComponent.attr({cursor: "pointer"});
                        dragNdrop(paper, newSet, newComponent);
                        var texture1 = paper.image('images/textures/text1.jpg', centerBase + spacePaperToElement, 160, 100, 100);
                        texture1.attr({cursor: "pointer"});
                        mouseHover(texture1);
                        function handler(){
                            var cloneTexture1 = this.clone();
                            cloneTexture1.translate(-500, -100);
                            cloneTexture1.attr({opacity:1});
                            texture1.unclick(handler);
                        }
                        texture1.click(handler);

                    }
                });
            }
        }); 
    }

    jQuery(document).ready(function(){
        getSVG("images/horse.svg");
    });
</script> 
```

# c# - 从列表中将元素添加到组合框

> ID：15769076
> 
> 赞同：0
> 
> 时间：2013-04-02T16:16:28.807
> 
> 标签：c#, xaml, combobox, itemssource

我的问题：我有一个带有狗主人的列表框，我有一个带有狗的列表框。我想修改狗列表框项模板如下：DogName(textblock)+DogKind(textblock)+Owners(combobox)。前两个是成功的，但我无法将现有所有者添加到组合框中。如果我给我的组合框起一个名字，例如：

```
<ComboBox x:Name="mycombo" /> 
```

我在 c# 代码中看不到 mycombo 变量。XAML：

```
<Window x:Class="CodeFirst.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sajat="clr-namespace:CodeFirst"
        Title="MainWindow" Height="557.638" Width="721.294"
        >
<Grid x:Name="grid1"> 
<ListBox x:Name="listbox2" HorizontalAlignment="Left" Height="313" Margin="338,10,0,0" VerticalAlignment="Top" Width="250">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">                        
                        <TextBlock Text="{Binding Path=Name}"/>
                        <TextBlock Text=", "/>
                        <TextBlock Text="{Binding Path=Kind}"/>     
                        <ComboBox />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
</ListBox>     
</Grid>
</Window> 
```

我如何将 itemsource 提供给组合框，或者我如何才能添加所有者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:39:03.557

如果你使用 DataContext，你可以像这样设置 Binding：

```
<ComboBox ItemsSource="{Binding Path=DataContext.MyItemsSource, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"></ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:39:42.090

首先，为了使用 WPF 或其他基于 XAML 的技术，您必须了解

[UI 不是数据。数据就是数据。用户界面就是用户界面。](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)

这意味着您不应`ComboBox`在代码中操纵任何或任何其他 UI 元素，以便用数据填充它们，而是创建一个`ViewModel`并将这些对象绑定到该元素。

在此示例中，`Window`使用 as 本身是`ViewModel`因为它是一个简单的示例，但您应该考虑将所有应用程序逻辑移动到一个单独的类中：

```
<Window x:Class="MiscSamples.UIisNotData"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="UIisNotData" Height="300" Width="300">
    <UniformGrid Rows="1" Columns="2">
        <DockPanel>
            <TextBlock Text="Owners:" DockPanel.Dock="Top" FontWeight="Bold" TextAlignment="Center" Margin="2"/>
            <Button Content="Add" Width="80" DockPanel.Dock="Bottom" Margin="2" Click="AddOwner"/>

            <ListBox ItemsSource="{Binding Owners}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <TextBlock Text="{Binding Name}" x:Name="block"/>
                            <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" Visibility="Collapsed" x:Name="box"/>
                        </Grid>
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType=ListBoxItem}}" Value="True">
                                <Setter TargetName="block" Property="Visibility" Value="Collapsed"/>
                                <Setter TargetName="box" Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>

        <DockPanel>
            <TextBlock Text="Dogs:" DockPanel.Dock="Top" FontWeight="Bold" TextAlignment="Center" Margin="2"/>
            <ListBox ItemsSource="{Binding Dogs}" HorizontalContentAlignment="Stretch">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <DockPanel>
                            <ComboBox ItemsSource="{Binding DataContext.Owners, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                      SelectedItem="{Binding Owner}" DisplayMemberPath="Name"
                                      DockPanel.Dock="Right" Width="100"/>
                            <TextBlock>
                                <Run Text="{Binding Name}"/>
                                <Run Text=", "/>
                                <Run Text="{Binding Kind}"/>
                            </TextBlock>
                        </DockPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>
    </UniformGrid>
</Window> 
```

后面**的代码（此代码应放在 ViewModel 中）**：

```
public partial class UIisNotData : Window
    {
        public ObservableCollection<Owner> Owners { get; set; }
        public ObservableCollection<string> Kinds { get; set; }
        public ObservableCollection<Dog> Dogs { get; set; } 

        public UIisNotData()
        {
            InitializeComponent();

            Owners = new ObservableCollection<Owner>
                {
                    new Owner() {Name = "Jack"},
                    new Owner() {Name = "Mike"},
                    new Owner() {Name = "Kirk"},
                    new Owner() {Name = "John"},
                };

            Kinds = new ObservableCollection<string>
                {
                    "Affenpinscher",
                    "Afghan Hound",
                    "Airedale Terrier",
                    "Akita"
                    //.. All the rest of dog Breeds taken from http://www.petmd.com/dog/breeds?breed_list=az#.UVsQKpPcmQo
                };

            Dogs = new ObservableCollection<Dog>
                {
                    new Dog() {Name = "Bobby", Kind = Kinds[0], Owner = Owners[0]},
                    new Dog() {Name = "Fido", Kind = Kinds[1], Owner = Owners[1]},
                    new Dog() {Name = "Toby", Kind = Kinds[2], Owner = Owners[2]}
                };

            DataContext = this;
        }

        private void AddOwner(object sender, RoutedEventArgs e)
        {
            Owners.Add(new Owner(){Name = "New Owner"});
        }
    } 
```

数据模型：

```
 public class Owner : PropertyChangedBase
    {
        private string _name;
        public string Name
        {
            get { return _name; }
            set
            {
                _name = value;
                OnPropertyChanged("Name");
            }
        }
    }

    public class Dog: PropertyChangedBase
    {
        private string _name;
        public string Name
        {
            get { return _name; }
            set
            {
                _name = value;
                OnPropertyChanged("Name");
            }
        }

        private Owner _owner;
        public Owner Owner
        {
            get { return _owner; }
            set
            {
                _owner = value;
                OnPropertyChanged("Owner");
            }
        }

        private string _kind;
        public string Kind
        {
            get { return _kind; }
            set
            {
                _kind = value;
                OnPropertyChanged("Kind");
            }
        }
    } 
```

**PropertyChangedBase 类**：

```
public class PropertyChangedBase:INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/itFJQ.png)

关于此示例，您需要考虑 3 个重要方面：

*   **我绝不会在代码中操纵 UI 元素。这在 WPF 中大部分时间是完全没有必要的。**
*   数据模型中的类实现`INotifyPropertyChanged`以支持 WPF 中的 2 路绑定。
*   集合的类型`ObservableCollection<T>`是为了在从集合中添加/删除元素时支持自动通知（以便自动更新`ListBoxes`等）。

您可能会注意到的另一件事是，我的示例中的 XAML 元素没有特定的大小或`Margin`值。类似的东西`Margin="338,10,0,0"`通常是您从 Visual Studio 设计器中得到的，表明布局结构不佳。我建议您查看 WPF 中的布局元素（`DockPanel`、`StackPanel`、`Grid`、`UniformGrid`、`WrapPanel`等），然后自己开始编写 XAML，而不是使用设计器。这将允许更高级别的可扩展性，并且还将使您免于固定位置元素的细微差别。

# python - python:inspect.getmembers to locals() vs import

> ID：15769078
> 
> 赞同：0
> 
> 时间：2013-04-02T16:16:33.570
> 
> 标签：python

在 django 中，而不是

```
from app.models import xxx,xxx,xxx 
```

我可以

```
from app import models as app_models
for name,value in inspect.getmembers(app_models, predicate=inspect.isclass):
    locals()[name] = value 
```

这有什么缺点吗？这两种模式有什么区别？

# java - 从请求中获取命名空间前缀并在 Spring Java 中使用它查找元素

> ID：15769081
> 
> 赞同：1
> 
> 时间：2013-04-02T16:16:36.587
> 
> 标签：java, xml, spring, soap, spring-ws

我想摆脱静态的“ims：”并将 SOAP 请求中的前缀与 namespace 一起使用`xmlns:ims="http://www.imsglobal.org/services/lis/bdems1p0/wsdl11/sync/imsbdems_v1p0`。如何在 Spring 拦截器中执行此操作？

```
protected String findProperty(SOAPHeader soapHeader, String propertyName) {

        NodeList list = soapHeader.getElementsByTagName("ims:" + propertyName); 
```

我想要的财产是

```
<ims:imsx_syncRequestHeaderInfo>
         <ims:imsx_version>V1.0</ims:imsx_version>
         <ims:imsx_messageIdentifier>?</ims:imsx_messageIdentifier>
      </ims:imsx_syncRequestHeaderInfo> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:52:13.493

用以下方法修复它。

```
NodeList nodeList = soapHeader.getElementsByTagName("*");

for (int i = 0; i < nodeList.getLength(); i++) {
    Node node = nodeList.item(i);
    if (node.getNodeType() == Node.ELEMENT_NODE 
            && node.getLocalName().equalsIgnoreCase(propertyName)) {
            if (node.getTextContent().isEmpty()) {
                    return null;
            } else {
                    return node.getTextContent();
            }
    }
} 
```

# json - 自定义设计sign_up：注册后的json响应

> ID：15769082
> 
> 赞同：3
> 
> 时间：2013-04-02T16:16:38.180
> 
> 标签：json, ruby-on-rails-3, devise

我想自定义设计 sign_up 以便在 json 注册发布请求之后，我得到一个 json 响应。

因此，在应用程序/控制器中，我创建了 session_controller.rb：

```
class SessionsController < Devise::SessionsController

def create
   self.resource = warden.authenticate!(auth_options)
   set_flash_message(:notice, :signed_in) if is_navigational_format?
   sign_in(resource_name, resource)
   respond_to do |format|
       format.html do
        respond_with resource, :location => after_sign_in_path_for(resource)
       end
       format.json do
        render :json => { :response => 'ok'}.to_json, :status => :ok
       end
  end
 end
end 
```

在 routes.rb 中：

```
devise_for(:users, :controllers => { :sessions => "sessions" }) 
```

现在我想发出一个 json 发布请求来注册用户并获得 json 响应。我设置了 URL：localhost:3000/users.json

方法：发布

标头：内容类型：应用程序/json

数据：{"user":{"email":"test@gmail.com", "password":"password123", "password_confirmation":"password123"}}

为什么我没有收到正确的 json 响应？我收到：

状态：406 不可接受

X-Runtime：0.102006 日期：2013 年 4 月 2 日星期二 16:03:03 GMT 服务器：WEBrick/1.3.1 (Ruby/1.9.3/2012-02-16) 内容类型：application/json；charset=utf-8 缓存控制：无缓存连接：保持活动内容长度：1 X-Request-Id：24f5d66b1de09560b88e332e06b33c1b X-Ua 兼容：IE=Edge

# hash - xkcd：外部性

> ID：15769093
> 
> 赞同：30
> 
> 时间：2013-04-02T16:17:11.620
> 
> 标签：hash, cryptography, skein

因此，2013 年 4 月 1 日的 xkcd [Externalities](http://xkcd.com/1193/)网络漫画以 Skein 1024 1024 哈希破解[比赛](http://almamater.xkcd.com)为特色。我假设这一定是一种蛮力努力，其中随机字符串被散列以匹配 Randall 发布的散列？它是否正确？

此外，我对 Skein 散列理论的了解几乎不存在，但作为一名中途的程序员，我能够在 1024 1024 模式下使用一些输入字符串在本地下载和运行[SkeinFish](https://code.google.com/p/skeinfish/) (C#) 和[Maarten Bodewes Skein实现 (Java)。](http://warper.home.xs4all.nl)然而，他们给出的哈希值与 xkcd 为相同输入返回的哈希值不同。这可能是一个非常幼稚的问题，但是不同的 Skein 实现会给出不同的哈希值吗？xkcd 使用什么 Skein 实现？

谢谢你原谅我的无知！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T21:34:25.363

绞纱算法有几种不同的迭代。XKCD 使用的是 1.3 版本，这也是最新的。可以在[此处](http://www.skein-hash.info/downloads)找到源（查找“V1.3”）

有趣的是，这种蛮力方法与比特币用来“挖掘”比特币的方法相同。最大的区别是散列算法（在这种情况下为 SHA-256）和目标散列（动态确定为以一定数量的零开头的任何散列。）发现散列需要大量工作，但一次已经发现验证源位和生成的哈希符合标准是微不足道的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T14:20:59.827

这是斯坦福团队使用的源代码。我们在大约一百台 8 核 EC2 服务器上运行了一段时间，但不是整个竞争。

[https://github.com/jhiesey/skeincrack](https://github.com/jhiesey/skeincrack)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T01:49:33.233

如果您对非字母数字字符（空格、标点符号等）进行散列处理，由于 HTML 表单编码，您可能会得到不同的结果。XKCD 托管的表单上的“enctype”属性是“application/octet-stream”，根据[https://developer.mozilla.org/en-US/docs/HTML/Element/form](https://developer.mozilla.org/en-US/docs/HTML/Element/form) ，它不是浏览器支持的标准。我假设浏览器在看到它无法识别的 URL 编码类型时会退回到 URL 编码类型。

我观察到字符串“=”在 Chrome 中提交 URL 编码，并返回与我在本地使用最新 pyskein 获得的不同的哈希值。但是当我使用这个 curl 命令行（不再有效）提交它时，我得到了预期的哈希：

```
curl -X POST --data-binary "hashable==" "http://almamater.xkcd.com/?edu=school.edu" 
```

另一个答案中的斯坦福代码做同样的事情，他们显然取得了一些成功。我从来没有得到任何随机数据在本地散列到比我自己的学校更好的分数，所以我从来没有机会彻底测试如何正确传递任意数据。我不知道确切的行为是什么（例如，如果你省略了 hashable=，服务器可能会检测到它并只是散列整个 POST 主体），但作为愚人节的一部分，它可能故意有点棘手。

# ocaml - 如何找到元组列表的最小值

> ID：15769095
> 
> 赞同：1
> 
> 时间：2013-04-02T16:17:17.323
> 
> 标签：ocaml

我必须找到一个元组列表的最小值，但我只想返回元组中`snd`元素的最小值，而不是整个元组。不幸的是，我在以下代码中遇到以下错误，我不知道为什么。l 参数是一个元组列表`(float * float)`

```
let rec minRight l = match l with
    | [] -> raise (Arg.Bad "minRight: empty list")
    | [x]-> x
    | (_,y)::xs -> min y (minRight xs) 
```

**错误：**

```
| (_,y)::xs -> min y (minRight xs)
Error: This expression has type 'a but an expression was expected of type
         'b * 'a 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:40:58.253

这是一个问题，除了前面的答案中提到的问题：线

```
| [x]-> x 
```

返回一个元组，而您说要“返回元组的最小 snd 元素[s]”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:23:51.000

我想也许你的问题是你命名了你的函数`min`，但你也想使用标准的 OCaml 函数`min`。那可能吗？

OCaml 没有重载（作为补偿，它具有参数多态性）。所以你需要为事物使用不同的名称。

# ember.js - 使用 Handlebars 定义块助手

> ID：15769096
> 
> 赞同：3
> 
> 时间：2013-04-02T16:17:19.727
> 
> 标签：ember.js, handlebars.js

我想定义一个块助手，将块中的文本放入`<a href=""></a>`标签中。我使用了[http://handlebarsjs.com/block_helpers.html](http://handlebarsjs.com/block_helpers.html)中的示例作为开始，但我的代码不起作用。`<a href="http://www.example.com">test</a>`作为这个块助手的输出，我必须改变什么？

**应用程序.js**

```
App = Ember.Application.create();

Handlebars.registerHelper('link', function(options) {
  var result = '<a href="http://www.example.com">' + options.fn(this) + '</a>';
  return Handlebars.SafeString(result);
}); 
```

**索引.html**

```
 <!DOCTYPE html>
  <html lang="en">
    <head>
      <title>Example</title>
    </head>
    <body>
      <script type="text/x-handlebars">
        <p>
        {{#link}}
        test
        {{/link}}
        </p>
      </script>

    </body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/handlebars.js"></script>
    <script type="text/javascript" src="js/ember.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
  </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T17:16:04.240

只是几个细节（编辑）：

*   您只需要在返回它之前创建一个**新实例**。`Handlebars.SafeString`请在此处查看@muistooshort 的[jsfiddle](http://jsfiddle.net/6Jaya/)以及您要实现的工作示例。

*   **块助手**稍微复杂一些，当需要调用具有不同上下文的模板部分时使用。如果不是您的情况，您可以使用*常规* [Handlebars helpers](http://handlebarsjs.com/#helpers)的语法。（我将在此处留下以下代码以供将来参考，尽管在这种情况下不相关）

**在app.js**中声明助手：

```
Ember.Handlebars.registerHelper('link', function(value) {
  var result = '<a href="http://www.example.com">' + value + '</a>';
  return new Handlebars.SafeString(result);
}); 
```

在**index.html**中，将您当前的模板替换为：

```
<script type="text/x-handlebars">
  <p>
    {{link test}}
  </p>
</script> 
```

希望这可以帮助！

# apache - 通过 apache2 在 ckan 2.0 上部署问题

> ID：15769099
> 
> 赞同：0
> 
> 时间：2013-04-02T16:17:26.290
> 
> 标签：apache, installation, ckan

尝试在 apache2 上部署 ckan 2.0 后出现以下问题。这是来自 apache 的日志：

```
tail -f /var/log/apache2/demo.ckan.net.error.log
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]     return context.create()
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]   File "/home/ubuntu-ckan-last/pyenv/lib/python2.6/site-packages/paste/deploy/loadwsgi.py", line 710, in create
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]     return self.object_type.invoke(self)
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]   File "/home/ubuntu-ckan-last/pyenv/lib/python2.6/site-packages/paste/deploy/loadwsgi.py", line 146, in invoke
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]     return fix_call(context.object, context.global_conf, **context.local_conf)
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]   File "/home/ubuntu-ckan-last/pyenv/lib/python2.6/site-packages/paste/deploy/util.py", line 56, in fix_call
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]     val = callable(*args, **kw)
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]   File "/home/ubuntu-ckan-last/pyenv/src/ckan/ckan/config/middleware.py", line 104, in make_app
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1]     who_parser.parse(open(app_conf['who.config_file']))
[Tue Apr 02 10:34:34 2013] [error] [client 127.0.0.1] KeyError: 'who.config_file' 
```

我关注了有关如何在 apache 或 nginx 上部署 ckan 2.1a 实例的最新文档...

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:11:28.400

该错误表明它无法找到`who.config_file`您的 CKAN 配置文件（例如 std.ini）：

```
 [app:main]
 ...
 who.config_file = %(here)s/who.ini 
```

然而，这是访问此配置文件的代码中的第一点，因此它表明配置文件更重要。

检查您的 wsgi 脚本文件是否包含正确的配置文件路径。该行如下所示：

```
config_file = '/usr/local/demo.ckan.net/pyenv/src/ckan/development.ini' 
```

# c# - 在任意对象结构中设置一个字段

> ID：15769101
> 
> 赞同：0
> 
> 时间：2013-04-02T16:17:32.827
> 
> 标签：c#, reflection, reference

我正在尝试解决以下问题。我们有一个任意结构的对象和一个表示字段名称的字符串数组。该数组是用于使用反射检索特定字段的路径。然后有一个值应该存储在最终字段中。例如，考虑以下类层次结构：

```
class A {
  public int i;
}

class B {
  public A a;
}

class C {
  public B b;
}

class D {
  public C c;
} 
```

假设我们以某种方式获得输入：

```
object obj = GetObject();              // e.g. returns object of type D
List<string> path = GetPathToStore();  // e.g. returns {"c", "b", "a", "i"}
object value = GetValueToBeStored();   // e.g. returns 42 
```

我写了以下循环：

```
foreach (string fieldName in path) {
  FileInfo fieldInfo = obj.GetType().GetField(fieldName);
  obj = fieldInfo.GetValue(obj);
} 
```

那么有这样的东西会很好：

```
obj = value; 
```

但这只会改变引用而不是对象中的实际字段。在 C++ 中，我会写：

```
*obj = value; 
```

但是如何在 C# 中做到这一点？

当路径为空时，我还需要支持边缘情况，在这种情况下，需要为根对象本身分配不同的值。

**编辑**：我的代码实际上使用更复杂的方法来检索成员。路径中的条目不一定是字段名称，它们也可以是属性名称、数组或列表中的索引、字典中的键等。因此，包装它的类会很复杂。我正在寻找一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:23:28.457

您可以在托管语言中添加额外的间接层，就像通过指针操作一样。通常，这通常是通过使用新类来完成的，因为您通常可以将类视为指向对象的指针。

```
public class FieldWrapper
{
    private object obj;
    private FieldInfo field;
    public FieldWrapper(object obj, FieldInfo field)
    {
        this.obj = obj;
        this.field = field;
    }

    public object Value
    {
        get
        {
            return field.GetValue(obj);
        }
        set
        {
            field.SetValue(obj, value);
        }
    }
} 
```

通过持有对象实例和`FieldInfo`对象，您可以获取和设置该对象的值。这允许您传递一个`FieldWrapper`around 的实例并获取/设置属性并让它影响构造函数中提供的对象的基础字段。

如果你需要更通用的东西，你可以依赖闭包：

```
public class Wrapper
{
    private Func<object> getter;
    private Action<object> setter;
    public Wrapper(Func<object> getter, Action<object> setter)
    {
        this.getter = getter;
        this.setter = setter;
    }

    public object Value
    {
        get
        { return getter(); }
        set
        { setter(value); }
    }
} 
```

然后要使用它，您可以执行以下操作：

```
Wrapper pointer = new Wrapper(()=> fieldInfo.GetValue(obj)
    , value =>  fieldInfo.SetValue(obj, value)); 
```

创建对象需要更多的工作，但效果相同。

您可以采取的另一种方法是创建一个`FieldWrapper`DictionaryWrapper `PropertyWrapper`IWrapper `, etc. and have them all implement an`Value` `interface that exposes a`，这样一旦您创建了包装器，您就不必关心底层实现是什么。为每种类型的对象创建包装器需要更多的工作，但最终会花费更少的时间来创建包装类型的每个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:23:44.193

我不确定我是否正确理解了您的问题，但我认为您想要：

```
var fieldInfo = obj.GetType().GetField(fieldName);
fieldInfo.SetValue(obj, newValue); 
```

编辑：要支持属性和字段，请尝试：

```
foreach(var memberInfo in obj.GetType().GetMember(memberName))
{
    if(memberInfo is FieldInfo)
    {
        ((FieldInfo)memberInfo).SetValue(obj, newValue);
    }
    else if(memberInfo is PropertyInfo)
    {
        ((PropertyInfo)memberInfo).SetValue(obj, newValue);
    }
    // etc ...
} 
```

不过，不确定您想如何处理索引。您可以将索引属性的索引传递给`PropertyInfo.SetValue()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:39:36.793

也许是这样的：

```
object obj = new D { c = new C { b = new B { a = new A { i = 1 } } } };
List<string> path = new List<string> { "c", "b", "a", "i" };
object value = 42;

FieldInfo fieldInfo = null;
object prevObj = null;
object obj2 = obj;
for (int i = 0; i < path.Count; i++)
{
    string fieldName = path[i];
    fieldInfo = obj2.GetType().GetField(fieldName);
    if (i == path.Count - 1) prevObj = obj2;
    obj2 = fieldInfo.GetValue(obj2);
}
if (fieldInfo != null)
{
    fieldInfo.SetValue(prevObj, value);
}
Console.WriteLine(((D)obj).c.b.a.i == (int) value); 
```

# regex - 正则表达式，url中的可选匹配

> ID：15769102
> 
> 赞同：0
> 
> 时间：2013-04-02T16:17:33.543
> 
> 标签：regex, pattern-matching, optional

我花了几个小时没有好的结果（也许我的心情没有帮助）。

我正在尝试构建一个正则表达式来帮助我匹配两个网址：

```
/reservables/imagenes/4/editar/6
/reservables/imagenes/4/subir 
```

正如您在上面提到的，第一个 url 中的最后一段`6`不会出现在第二个 url 的末尾，因为这个段在这里是可选的。所以我需要在一个正则表达式中匹配两个网址，为此，我已经尝试过：

```
reservables/(editar|imagenes)/([0-9]+)/(imagen|editar|actualizar|subir)/([0-9]+) 
```

这仅适用于第一个网址。所以，阅读一些关于正则表达式的注释它表明我需要这个`?`符号，对吧？所以，我尝试了这个，但它没有用：

```
reservables/(editar|imagenes)/([0-9]+)/(imagen|editar|actualizar|subir)/([0-9]+)? 
```

好吧，我没有做错什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:29:22.877

你也想把`?`周围的`/`，像这样：

```
reservables/(editar|imagenes)/([0-9]+)/(imagen|editar|actualizar|subir)(?:/([0-9]+))? 
```

[您可以在debuggex](http://www.debuggex.com/?re=reservables/%28editar%7Cimagenes%29/%28%5B0-9%5D%2b%29/%28imagen%7Ceditar%7Cactualizar%7Csubir%29%28?:/%28%5B0-9%5D%2b%29%29?&str=/reservables/imagenes/4/editar/6%0D%0A/reservables/imagenes/4/subir)上看到它正确匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:19:18.910

这将起作用：

```
reservables/(editar|imagenes)/([0-9]+)/(imagen|editar|actualizar|subir)/([0-9]*) 
```

# asp.net - Kendo TabStrips：添加模板

> ID：15769104
> 
> 赞同：1
> 
> 时间：2013-04-02T16:17:37.827
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, kendo-ui

在 MVC 4 中使用 Kendo Tabstrip。

我有一个标签条。每个选项卡都包含多个用于整个页面表单的表单域。

现在我添加如下字段，但它非常混乱。有没有办法使用某种模板，我不必将字符串连接在一起？

这是我目前要做的：

```
 @(Html.Kendo().TabStrip()
          .Name("tabFormItems")
          .Items(items =>
              {
                  items.Add().Text("Rex Online").Content(
                      "<table><tr>" +
                      "<td>" + Html.LabelFor(x => x.ClientID).ToString() + "</td>" +
                      "<td>" + Html.EditorFor(x => x.ClientID).ToString() + "</td>" +
                      "</tr></table>") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:21:30.297

是的。您可以使用 Razor 模板委托，如下例所示：[http ://demos.kendoui.c​​om/web/tabstrip/index.html](http://demos.kendoui.com/web/tabstrip/index.html)

以下是相关代码：

```
tabstrip.Add().Text("New York")
              .Content(@<text>
                <div class="weather">
                    <h2>29<span>&ordm;C</span></h2>
                    <p>Sunny weather in New York.</p>
                </div>
                <span class="sunny">&nbsp;</span>
              </text>); 
```

# iphone - 将 url 附加到图像路径 NSString？

> ID：15769106
> 
> 赞同：0
> 
> 时间：2013-04-02T16:17:48.373
> 
> 标签：iphone

我正在开发一个 iOS 应用程序，该应用程序由一个静态 sqlite 数据库、一系列表视图和基于选项卡的详细视图组成，其中在详细视图中加载的第一个视图是一个可滑动的 imageView，它加载了一系列图像。

我已经使用此代码在本地查找图像，但我想让它从 URL 加载图像，或者如果没有可用的 Internet 连接，则显示默认图像。

这些图像在数据库中被命名为（例如）image.jpg，我希望它们都从同一个 URL 目录（例如）[http://www.someurl.com/images/加载](http://www.someurl.com/images/)

谢谢

```
- (UIImage *) imageAtIndex:(NSUInteger)index {

Image  *currentImage = (Image *) [self.images objectAtIndex:index];

NSString *path = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@",[[currentImage filename] stringByDeletingPathExtension]] ofType:@"jpg"];

return [UIImage imageWithContentsOfFile:path];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:06:26.530

The process for this is really very simple:

1.  Try to download your image data using `NSURLConnection`
2.  If successful, create a UIImage from the data
3.  If either of the above fails, switch over to your placeholder/built-in image
4.  Display the resulting image

I advise you have some sort of placeholder while the image is downloading, since that can take quite a while.

**Don't** bother with reachability; it's not 100% reliable, whereas actually *trying* the download is.

**Avoid** doing this on a background thread or queue. `NSURLConnection` is asynchronous out of the box to make this easier for you. There are a ton of third-party frameworks that try to simplify working with connections if you wish, though.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T16:40:18.630

```
NSString *urlStr = [@"http://www.someurl.com/images/" stringByAppendingString:[currentImage filename]];
NSURL *url = [NSURL URLWithString:urlStr];
NSData *imageData = [NSData dataWithContentsOfURL:url];
UIImage *image = [[UIImage alloc] initWithData:data]; 
```

或类似的东西...

如果图像很大或者网络连接很慢，NSData 初始化可能需要一些时间。考虑在后台线程中获取图像数据，或使用一些现有的框架，如[SDWebImage](https://github.com/rs/SDWebImage)

# java - ProGuard 还在剥离 Facebook 代码？（或禁用 ProGuard ！！）

> ID：15769109
> 
> 赞同：0
> 
> 时间：2013-04-02T16:17:56.827
> 
> 标签：java, android, eclipse, proguard, dalvik

我真的很喜欢 Android 的 ProGuard / Release 版本。我尝试将我的应用程序上传到 Play 商店，但每次我修复某些问题时都会出现另一个错误。而且这只发生在发布模式下。经过大量试验和错误后，我的应用程序在 Play 商店中。以前它会在启动时崩溃（通过在 ProGuard 设置中添加类来修复）。然后Facebook不会登录（通过添加修复

```
 -keep class com.facebook.** {
   *;
} 
```

到 ProGuard 设置。

现在，当我尝试连接 Facebook 的 Open Graph 并发布消息时，我的应用程序崩溃了。我收到此错误，但在网上找不到任何关于它的信息：

```
04-02 18:09:20.160: E/AndroidRuntime(16163): FATAL EXCEPTION: main
04-02 18:09:20.160: E/AndroidRuntime(16163): com.facebook.FacebookGraphObjectException: Factory can't proxy method: public abstract java.lang.String com.xxxx.views.am.a()
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.facebook.model.GraphObject$Factory.verifyCanProxyClass(SourceFile:270)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.facebook.model.GraphObject$Factory.createGraphObjectProxy(SourceFile:196)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.facebook.model.GraphObject$Factory.access$0(SourceFile:195)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.facebook.model.GraphObject$Factory$GraphObjectProxy.proxyGraphObjectMethods(SourceFile:530)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.facebook.model.GraphObject$Factory$GraphObjectProxy.invoke(SourceFile:470)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at $Proxy3.cast(Native Method)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.facebook.Response.getGraphObjectAs(SourceFile:124)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.xxxxx.views.aa.a(SourceFile:432)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.xxxxxx.views.aa.a(SourceFile:419)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.xxxxx.views.ag.a(SourceFile:377)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.xxxxx.views.ag.onPostExecute(SourceFile:1)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at android.os.AsyncTask.finish(AsyncTask.java:631)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at android.os.Looper.loop(Looper.java:137)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at android.app.ActivityThread.main(ActivityThread.java:4931)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at java.lang.reflect.Method.invokeNative(Native Method)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at java.lang.reflect.Method.invoke(Method.java:511)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-02 18:09:20.160: E/AndroidRuntime(16163):    at dalvik.system.NativeStart.main(Native Method) 
```

ProGuard 是否仍在剥离我正在使用的代码？什么设置可以解决这个问题？作为记录..在构建模式下一切都很好。

另一个问题。是否可以只禁用 ProGuard？我认为真的没用，只会给更多的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:26:00.600

默认情况下禁用 ProGuard，在发布版本中也是如此。您已通过启用文件`proguard.config`中的行自己启用它`project.properties`。您可以通过注释掉该行来再次禁用它。

ProGuard 可能很有用，但您需要为应用程序中的任何反射配置它。在这种情况下，Facebook API 正在对您自己的类执行反射。查看 API 的代码，它正在搜索 GraphObject 的扩展中的 getter、setter 和注解方法。ProGuard 默认重命名甚至删除它们，因为它不（并且通常不能）知道反射。使用 API 的其他人可能知道需要保留哪些类、字段和方法。您传递给 API 并且具有一些方法命名约定的类可能是很好的候选者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T14:32:00.380

这个问题花了我几个小时。解决方案是除了您当前的 proguard 代码之外，还排除您构建 OpenGraphObject 的类。因此，您可以使用 ProGuard 而不是将其关闭。

# javascript - 如何让子指令以角度了解其所有父母？

> ID：15769118
> 
> 赞同：0
> 
> 时间：2013-04-02T16:18:11.000
> 
> 标签：javascript, angularjs, angularjs-directive

这是一个略长的。

我怎样才能让子指令知道他们所有的祖先，而不仅仅是他们的直接父母？

我问的原因是我想要一个 Raphael 论文指令，为所有子项提供对 Raphael 论文的引用。另外，我试图有一个“rl-shape”指令，可以将不同的形状组合在一起，这样它们就可以一起翻译、转换等。我还希望这个“rl-shape”指令能够出现在自身内部，允许任意形状的树。

可能有一种完全不同的更好的方法来做到这一点。如果是这样，请纠正我。

这是我到目前为止的代码：

```
<!doctype html>
<html xmlns:ng="http://angularjs.org" ng-app="myApp">
  <head>
    <title>Test</title>

    <script src="js/underscore.js"></script>
    <script src="js/raphael-min.js"></script>
  </head>

  <body>
    <rl-paper>
      <rl-shape name="myShape">
        <rl-circle name="inner" cx="0" cy="0" r="50"></rl-circle>
        <rl-circle name="outer" cx="0" cy="0" r="100"></rl-circle>
      </rl-shape>
    </rl-paper>

    <p>
      <button ng-click="myShape.translate(0, -10)">Move shape up</button>
      <button ng-click="myShape.translate(0, 10)">Move shape down</button>
    </p>

    <script src="js/angular.min.js"></script>
    <script>
      var myApp = angular.module("myApp", []);

      function Shape(children) {
        this.translate = function(dx, dy) {
          _.each(children, function(c) { c.translate(dx, dy); });
        };
      }

      myApp.directive("rlPaper", function() {
        return {
          restrict: "E",
          controller: function($element) {
            this.paper = new Raphael($element[0], 220, 220);
            this.paper.setViewBox(-110, -110, 220, 220);
          }
        };
      });

      myApp.directive("rlShape", function () {
        return {
          restrict: "E",
          require: ["^rlPaper"],
          controller: function($scope, $element, $attrs, $transclude) {
            this.children = [];
          },
          link: function(scope, element, attrs, ctrls) {
            // How can the link function of the rlShape directive access its
            // own controller?  If I could figure that out, I could do
            // something like the following:
            var shapeCtrl = undefined;  // Don't know how to get this

            var shape = Shape(shapeCtrl.children);
            scope[attrs.name] = shape;
          }
        };
      });

      myApp.directive("rlCircle", function() {
        return {
          restrict: "E",
          require: ["^rlPaper", "?^rlShape"],
          link: function(scope, element, attrs, ctrls) {
            var paperCtrl = ctrls[0];
            var shapeCtrl = ctrls[1];

            var circle = paperCtrl.paper.circle(attrs.cx, attrs.cy, attrs.r);
            scope[attrs.name] = circle;

            if ( shapeCtrl ) {
              shapeCtrl.children.push(circle);
            }
          }
        };
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:04:56.433

（您的问题中有很多问题。如果您为每个问题发布单独的问题，并使用简约的小提琴或 plunker 展示问题/问题，您会得到更好的，并且可能更快的答案。）

> 我怎样才能让子指令知道他们所有的祖先，而不仅仅是他们的直接父母？

如果指令没有创建隔离范围（在您提供的示例代码中，您的指令都没有这样做），那么该指令可以通过[正常的 JavaScript 原型继承](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)访问所有祖先的 $scopes 。

因此，如果您在指令中定义数据`$scope`，子指令将能够直接访问该数据：

例如，如果您在父指令的控制器函数中有此代码：

```
$scope.paper = new Raphael($element[0], 220, 220); 
```

然后子指令可以访问它（在它们的控制器或链接函数中）：

```
var paper = $scope.paper;  // prototypal inheritance will find it 
```

> 我想要一个 Raphael 论文指令，为所有子项提供对 Raphael 论文的引用。

因此，在`rlPaper`指令中，在该指令`$scope`（而不是`this`）上定义一个“Raphael paper”对象。在指令的控制器函数中执行此操作，而不是链接函数，因为链接函数将运行得太晚。（[小提琴](http://jsfiddle.net/mrajcok/xfh3F/)显示指令的控制器和链接函数何时运行，带有两个嵌套指令。）

> rlShape 指令的链接功能如何访问自己的控制器？

有一种方法可以做到这一点，但我认为更好的方法是将数据和函数放在指令的`$scope`，由指令的链接和控制器函数共享。

在指令中，如果您将数据放到对象`rlCircle`上，则不必要求其他父控制器。`$scope`

# php - WordPress 和订阅者级别

> ID：15769119
> 
> 赞同：0
> 
> 时间：2013-04-02T16:18:12.140
> 
> 标签：php, wordpress

有谁知道如何创建 3 个不同的订阅者级别？级别 1 将有权访问定义为 A 的所有页面 级别 2 将有权访问定义为 B 的所有页面 级别 3 将有权访问所有页面 A 和 B

我在想我可以使用用户角色和功能来做到这一点，但我不清楚如何创建不同的订阅者。

我希望避免使用插件，因为我想让它尽可能简单。

谢谢！迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:49:09.653

我认为做到这一点并保持简单的最好方法是向 user_meta 添加一个 meta_key。user_key 将是成员并具有一个值数组。在我的输出中，我将首先检查用户是否具有订阅者角色。然后我将检查 user_meta - 成员的值。这将决定用户看到什么。

# sql - 显示当前日期

> ID：15769123
> 
> 赞同：0
> 
> 时间：2013-04-02T16:18:17.547
> 
> 标签：sql, database, oracle, sqlplus

有什么方法可以在不使用 SELECT 语句的情况下在报告中显示当前日期？我什至不想手动编写它我希望系统在报告标题中显示当前日期本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:21:12.497

使用 Sql Reporting Services，您应该能够在标题中添加一个新字段，然后右键单击该字段 > 表达式 > 类别：内置字段项目：执行时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:06:43.980

sqlplus 中没有内置的 show-date-at-top-of-each-page 功能，您必须解决这个问题。在运行报告之前，我会使用[TTITLE并从双重选择日期。](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12048.htm)

```
12:59:29 SYSTEM@dwal> col now new_value header_date;
12:59:31 SYSTEM@dwal> select to_char(sysdate, 'ddmmyyyy hh24miss') as now from dual;

NOW
---------------
03042013 125944

Elapsed: 00:00:00.02
12:59:40 SYSTEM@dwal> def header_date
DEFINE HEADER_DATE     = "03042013 125944" (CHAR)
13:03:28 SYSTEM@dwal> ttitle left '&header_date'
13:03:32 SYSTEM@dwal> set pagesize 10
13:03:36 SYSTEM@dwal> select rownum from dual connect by rownum <= 20;

03042013 125944
    ROWNUM
----------
         1
         2
         3
         4
         5
         6

03042013 125944
    ROWNUM
----------
         7
         8
         9
        10
        11
        12

03042013 125944
    ROWNUM
----------
        13
        14
        15
        16
        17
        18

03042013 125944
    ROWNUM
----------
        19
        20

20 rows selected.

Elapsed: 00:00:00.03 
```

但是，如果您坚持不必执行单个附加选择 - 总体思路保持不变，即使用替换变量。`&1`可能你可以在启动 sqlplus 时从你的 shell 传递一个当前日期参数，并在你的 TTITLE 规范中引用它。

# git - Visual Studio 一直弹出数据库图表对话框

> ID：15769125
> 
> 赞同：3
> 
> 时间：2013-04-02T16:18:20.467
> 
> 标签：git, visual-studio-2012

我最近将我正在研究的解决方案的源代码控制从 SVN 切换到 git（使用 VS 的 TFS git 工具，在[VS Tools for Git](http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c "Git 的 VS 工具")中找到）。既然这样做了，当我现在在 VS 中右键单击我的解决方案时，它会为启动项目的配置文件中的每个连接字符串弹出数据库图表对话框。确切的信息是

**Microsoft Visual Studio** *此服务器没有使用数据库图表所需的一个或多个数据库对象。你想创建它们吗？* **是 否 帮助**

我正在使用 VS 2012，当我右键单击解决方案时，这些框会始终弹出（即使我选择“否”，它也会在我下次右键单击时再次弹出）。我在这个问题中看到了这个问题的可能解决方案，[Visual Studio 真的想创建一个数据库图](https://stackoverflow.com/questions/1393188/visual-studio-really-wants-to-create-a-database-diagram)，但是使用 VS 的 git 工具没有“按解决方案过滤”选项（这是该问题中建议的一轮工作）。欢迎任何想法或建议！

# powershell - 在 Powershell { } 脚本块中解释变量

> ID：15769126
> 
> 赞同：2
> 
> 时间：2013-04-02T16:18:24.950
> 
> 标签：powershell, block

我有一个 shell 脚本，它应该在后台启动一个 .exe：

```
$strPath = get-location
$block = {& $strPath"\storage\bin\storage.exe" $args}
start-job -scriptblock $block -argumentlist "-f", $strPath"\storage\conf\storage.conf" 
```

在前面的[问题](https://stackoverflow.com/questions/15767657/start-a-exe-in-the-background-with-parameters-in-a-powershell-script)中，我发现我需要绝对路径。但是，如果您查看命令，则不会解释 $strPath 变量：

```
PS Q:\mles\etl-i_test> .\iprog.ps1 --start1
Start Storage

Id              Name            State      HasMoreData     Location             Command
--              ----            -----      -----------     --------             -------
37              Job37           Running    True            localhost            & $strPath"\storage\bi... 
```

我怎样才能解决这个问题？

编辑：我知道我需要将路径作为参数传递，如何传递？就像是：

```
$block = {& $args[0]"\storage\bin\storage.exe" $args[1] $args[2]}
start-job -scriptblock $block -argumentlist $strPath, "-f", $strPath"\storage\conf\storage.conf" 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:33:19.693

脚本块的内容将在另一个无法访问您的变量的 PowerShell.exe 实例（作为作业）中执行。这就是为什么您需要将它们发送到`Start-Job`参数列表中。发送作业需要用作参数的所有数据。storage.exe 的完整路径，例如

```
$path = (Get-Location).Path
$block = {& $args[0] $args[1] $args[2]}

start-job -scriptblock $block -argumentlist `
    "$path\storage\bin\storage.exe" `
    "-f", `
    "$path\storage\conf\storage.conf" 
```

# jquery - DotNetNuke 如何将 javascript 或 css 文件添加到内容资源管理中？

> ID：15769131
> 
> 赞同：3
> 
> 时间：2013-04-02T16:18:34.397
> 
> 标签：jquery, dotnetnuke

使用 dotnetnuke 7.0 社区版。

我知道如何将脚本/css 添加到皮肤文件中，但我想将它们包含在整个系统的标签中。

查看源代码，我看到 DNN 将 ?cdv=NUMBER 附加到一些脚本/css，它指的是内容资源管理版本。我也知道如何增加这个数字。

我想在我的所有页面上使用 jquery 插件，我想将它包含在标题中并使用版本号。

我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T16:21:00.787

您将在您的皮肤文件中执行此操作并使用 CRM 注册标签

[http://www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx)

将以下内容添加到您的皮肤中

```
<%@ Register TagPrefix="dnn" Namespace="DotNetNuke.Web.Client.ClientResourceManagement" Assembly="DotNetNuke.Web.Client" %>

<dnn:DnnJsInclude runat="server" FilePath="jquery.cycle.min.js" PathNameAlias="SkinPath" /> 
```

DNN 应该处理其余的细节。

# php - 部分 body 标记保留在 file_get_contents 输出中，如何删除它

> ID：15769135
> 
> 赞同：0
> 
> 时间：2013-04-02T16:18:56.923
> 
> 标签：php

我正在使用 file_get_contents 获取网页的内容，并且部分 body 标记保留在输出中。我还使用 strip_tags() 删除其他 html 标签，但部分正文标签仍然存在。

我怎样才能删除它？

我得到的输出是 body> 然后是内容。

这是我的代码：

```
$content = file_get_contents( $url );
$content = stristr( $content, "body" );
echo strip_tags($content); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:22:10.050

`stristr`从匹配字符串*开始的索引开始返回，但实际上你在它**结束*后一个字符：

```
$content = substr(strpos($content, "<body>") + strlen("<body>") + 1); 
```

您还想搜索“”而不是“body”，因为“body”可能出现在实际内容中。但是，由于您`strip_tags`无论如何都在使用，您实际上可以从 body 标记的开头开始抓取，它会正常工作：

```
$content = stristr($content, "<body>"); 
```

这将返回以 开头的内容`<body>`，该内容将被 剥离`strip_tags`。

# jquery - 使用jquery将链接附加到div

> ID：15769142
> 
> 赞同：0
> 
> 时间：2013-04-02T16:19:17.137
> 
> 标签：jquery, jquery-mobile

我有一个 div，我想将一段代码附加到 onclick 中。问题是代码不起作用。我认为这与 onclick 和我使用 '/' 的注释尝试有关

这是jQuery：

```
$("#content_type_nav").html("<a id='add_content_container' onClick=/"window.location.href='create.php';/"><img id='add_content_icon' src='Site_Images/add_column.PNG'/></a>"); 
```

这是html：

```
<div data-role="footer" id="content_type_nav" data-position="fixed">
        //I want the link to be inserted here
        <h1>Show me my...</h1>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:26:11.853

由于您已经在使用 jquery，您应该委托 onclick 事件。
并使用 prepend() 作为第一个孩子插入。

```
var html = "<a id='add_content_container'><img id='add_content_icon' src='Site_Images/add_column.PNG'/></a>";

    $("#content_type_nav").prepend(html);
    $("#content_type_nav").on('click', 'a#add_content_container', function(){
             window.location.href='create.php';
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:21:54.360

似乎您正在替换该 div 的内容。如果你想追加到那个 div，你想使用 append() 方法而不是 html() 方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T16:25:48.833

从您的代码中，试试这个：

```
$("#content_type_nav").append("<a id='add_content_container' onClick=window.location.href='create.php;'/><img id='add_content_icon' src='Site_Images/add_column.PNG'/></a>"); 
```

# jquery - jQuery AJAX 成功问题

> ID：15769143
> 
> 赞同：0
> 
> 时间：2013-04-02T16:19:18.270
> 
> 标签：jquery

即使表单填写正确，以下代码片段也会返回“失败”警报框，我想显示“通过”警报框。肯定有问题，但我找不到哪里……

完整代码在这里：[http ://alessandrosantese.com/Forms/Custom_Validation/Form-Validation-Plugin-AJAX.html](http://alessandrosantese.com/Forms/Custom_Validation/Form-Validation-Plugin-AJAX.html)

```
 submit.click(function(evt) {  
        evt.preventDefault();

        validate_form();

        $('form input:not(.submit, .email, .test)').each(function(){
            if ($(this).val() == '') {
                add_color($(this), red);
            }
            else {
                add_color($(this), white);
            }

        });

        var data = form.serialize();

            // AJAX call
            $.ajax({
                url: 'process.php',
                type: "post",
                data: data,
                success: function(r){

                    if (r.success) {
                        alert('passed');
                    } else {
                        alert('failed');
                    }

                }
            });

    }); 
```

PHP 代码（非常基础，现在只是为了让 AJAX 成功运行）

```
<?php

    $name = $_POST['f_name'];
  $l_name = $_POST['l_name'];
  $email1 = $_POST['email'];
  $email2 = $_POST['email_c'];
     $tel = $_POST['tel'];
$postcode = $_POST['postcode'];
     $url = $_POST['url'];
     $checkbox = $_POST['checkbox'];

echo "\n$name\n$l_name\n$email1\n$email2\n$tel\n$postcode\n$url\n$checkbox";

?> 
```

我需要找到一种方法来确保 validate_form(); 在 AJAX 调用本身之前工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:29:21.500

validate_form 是否返回任何内容？如果是这样，您可以在`validate_form()`任何地方捕获函数的返回值。

`validate_form()`必须返回一个布尔值来指示表单是否有效。在您的每个函数 - `validateEmail()`,`checkPostCode()`中，`checkURL()`根据这些字段是否有效返回一个布尔值。并重写`validate_form()`为

```
function validate_form()
{ 
    return (validateEmail() && checkPostCode() && checkURL());
} 
```

我想你想要这样的东西：

```
if(validate_form()) //if the form is valid
{
    $.ajax({
        url: 'process.php',
        type: "post",
        data: data,
        success: function(r){
            alert('passed')
            },
        error: function(r){
            alert('failed: ' + r.statusText);
    });
}
else
{
      alert('failed');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:22:23.023

您没有返回 JSON 字符串，因此`r`永远不可能有`.success`属性。你传回一个简单的字符串，所以也许你最好别做

```
if (r <> '') {
   alert('success');
} else {
   alert('failed');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:27:38.910

最好的解决方案可能是将要返回的信息存储在一个数组中；然后在回显之前使用[json_encode() 。](http://php.net/manual/en/function.json-encode.php)

将 AJAX 脚本的 PHP 部分更改为如下所示：

```
$return = array();
$return['name'] = $_POST['f_name'];
$return['l_name'] = $_POST['l_name'];
$return['email'] = $_POST['email'];
$return['email_c'] = $_POST['email_c'];
$return['tel'] = $_POST['tel'];
$return['postcode'] = $_POST['postcode'];
$return['url'] = $_POST['url'];
$return['checkbox'] = $_POST['checkbox'];
$return['success'] = true;

echo json_encode($return); 
```

这将以 r.nameofparam 的形式将信息以您可以访问的格式发送回 jquery ...因此您可以使用以下方式访问成功的值

*r.成功*

或 url 的值

*r.url*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T17:14:47.910

尝试使用完成并失败：

```
// AJAX call
$.ajax({
 url: 'process.php',
 type: "post",
 data: data
}).done(function() { alert("passed"); })
.fail(function() { alert("failed"); }); 
```

# android - 根植于 android 4.1.2 上的 gcc

> ID：15769146
> 
> 赞同：1
> 
> 时间：2013-04-02T16:19:36.537
> 
> 标签：android, gcc, executable, root

我下载了

[https://www.dropbox.com/s/uammywfed6d2rgj/android_gcc_r2a.tar.bz2](https://www.dropbox.com/s/uammywfed6d2rgj/android_gcc_r2a.tar.bz2)

和

[https://www.dropbox.com/s/uammywfed6d2rgj/android_gcc_supplement.tar.bz2](https://www.dropbox.com/s/uammywfed6d2rgj/android_gcc_supplement.tar.bz2)

从

[http://rwiki.sciviews.org/doku.php?id=getting-started:installation:android](http://rwiki.sciviews.org/doku.php?id=getting-started:installation:android)

并在/data 中创建/data/local/gcc，将之前的两个文件放入其中并使用它们。

然后我修改了文件 /system/etc/mkshrc 使它这样做：

导出 LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/data/local/gcc/lib 导出 PATH=$PATH:/data/local/gcc/bin

按照建议。然后我创建了一个 test1.c 文件

```
#include <stdio.h>
int main()
{
printf("Hello")
return 0;
} 
```

并用命令编译它

```
gcc test1.c -o test1 
```

然后执行命令

```
./test1 
```

结果：

“无法执行：权限被拒绝”。test1 上的 ls -l 给了我 -rw-rw-r-- root （因为我已经将它创建为 root ；但我并没有成为 root 以及相同的“权限被拒绝”结果）。然后我尝试了一个 chmod 使其可执行，但没有成功。你有什么主意吗 ？

多谢

* * *

**编辑**

```
Symbol table '.symtab' contains 55 entries:
   Num:    Value  Size Type    Bind   Vis      Ndx Name
     0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND
     1: 000080f4     0 SECTION LOCAL  DEFAULT    1
     2: 00008108     0 SECTION LOCAL  DEFAULT    2
     3: 00008158     0 SECTION LOCAL  DEFAULT    3
     4: 00008248     0 SECTION LOCAL  DEFAULT    4
     5: 000082e8     0 SECTION LOCAL  DEFAULT    5
     6: 000082f8     0 SECTION LOCAL  DEFAULT    6
     7: 00008330     0 SECTION LOCAL  DEFAULT    7
     8: 00008388     0 SECTION LOCAL  DEFAULT    8
     9: 00010398     0 SECTION LOCAL  DEFAULT    9
    10: 000103a0     0 SECTION LOCAL  DEFAULT   10
    11: 000103a8     0 SECTION LOCAL  DEFAULT   11
    12: 000103b0     0 SECTION LOCAL  DEFAULT   12
    13: 000103b8     0 SECTION LOCAL  DEFAULT   13
    14: 00010478     0 SECTION LOCAL  DEFAULT   14
    15: 00000000     0 SECTION LOCAL  DEFAULT   15
    16: 00000000     0 SECTION LOCAL  DEFAULT   16
    17: 00000000     0 FILE    LOCAL  DEFAULT  ABS bionic/libc/arch-arm/bion
    18: 00000000     0 FILE    LOCAL  DEFAULT  ABS test1.c
    19: 00008388     0 NOTYPE  LOCAL  DEFAULT    8 $d
    20: 00008360     0 NOTYPE  LOCAL  DEFAULT    7 $a
    21: 00008384     0 NOTYPE  LOCAL  DEFAULT    7 $d
    22: 00000000     0 FILE    LOCAL  DEFAULT  ABS bionic/libc/arch-arm/bion
    23: 00008398     0 NOTYPE  LOCAL  DEFAULT  ABS __exidx_end
    24: 000103b8     0 OBJECT  LOCAL  DEFAULT   13 _DYNAMIC
    25: 00008398     0 NOTYPE  LOCAL  DEFAULT  ABS __exidx_start
    26: 00010478     0 OBJECT  LOCAL  DEFAULT   14 _GLOBAL_OFFSET_TABLE_
    27: 00008330     0 NOTYPE  LOCAL  DEFAULT    7 $d
    28: 00010398     0 NOTYPE  LOCAL  DEFAULT    9 $d
    29: 000103a0     0 NOTYPE  LOCAL  DEFAULT   10 $d
    30: 000103a8     0 NOTYPE  LOCAL  DEFAULT   11 $d
    31: 000103b0     0 NOTYPE  LOCAL  DEFAULT   12 $d
    32: 0001039c     0 NOTYPE  LOCAL  DEFAULT    9 $d
    33: 000103a4     0 NOTYPE  LOCAL  DEFAULT   10 $d
    34: 000103ac     0 NOTYPE  LOCAL  DEFAULT   11 $d
    35: 000103b4     0 NOTYPE  LOCAL  DEFAULT   12 $d
    36: 000082f8     0 NOTYPE  LOCAL  DEFAULT    6 $a
    37: 00008308     0 NOTYPE  LOCAL  DEFAULT    6 $d
    38: 0000830c     0 NOTYPE  LOCAL  DEFAULT    6 $a
    39: 0001048c     0 NOTYPE  GLOBAL DEFAULT  ABS _bss_end__
    40: 0000830c     0 FUNC    GLOBAL DEFAULT  UND puts
    41: 000103a8     0 NOTYPE  GLOBAL DEFAULT   11 __FINI_ARRAY__
    42: 0001048c     0 NOTYPE  GLOBAL DEFAULT  ABS __bss_start__
    43: 00008318     0 FUNC    GLOBAL DEFAULT  UND __libc_init
    44: 000103b0     0 NOTYPE  GLOBAL DEFAULT   12 __CTOR_LIST__
    45: 0001048c     0 NOTYPE  GLOBAL DEFAULT  ABS __bss_end__
    46: 00008330     0 FUNC    GLOBAL DEFAULT    7 _start
    47: 000103a0     0 NOTYPE  GLOBAL DEFAULT   10 __INIT_ARRAY__
    48: 0001048c     0 NOTYPE  GLOBAL DEFAULT  ABS __bss_start
    49: 00008360    40 FUNC    GLOBAL DEFAULT    7 main
    50: 0001048c     0 NOTYPE  GLOBAL DEFAULT  ABS __end__
    51: 00010398     0 NOTYPE  GLOBAL DEFAULT    9 __PREINIT_ARRAY__
    52: 0001048c     0 NOTYPE  GLOBAL DEFAULT  ABS _edata
    53: 0001048c     0 NOTYPE  GLOBAL DEFAULT  ABS _end
    54: 0001048c     0 NOTYPE  GLOBAL DEFAULT   14 __data_start
root@android:/sdcard/Development/cpp # 
```

编辑 2：运行“mount”的结果：

```
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
shell@android:/ $ su
su
root@android:/ # mount
mount
rootfs / rootfs ro,relatime 0 0
tmpfs /dev tmpfs rw,nosuid,relatime,mode=755 0 0
devpts /dev/pts devpts rw,relatime,mode=600 0 0
proc /proc proc rw,relatime 0 0
sysfs /sys sysfs rw,relatime 0 0
none /acct cgroup rw,relatime,cpuacct 0 0
tmpfs /mnt/asec tmpfs rw,relatime,mode=755,gid=1000 0 0
tmpfs /mnt/obb tmpfs rw,relatime,mode=755,gid=1000 0 0
none /dev/cpuctl cgroup rw,relatime,cpu 0 0
/dev/block/mmcblk0p13 /system ext4 ro,relatime,barrier=1,data=ordered 0 0
/dev/block/mmcblk0p3 /efs ext4 rw,nosuid,nodev,noatime,barrier=1,journal_async_commit,data=ordered 0 0
/dev/block/mmcblk0p12 /cache ext4 rw,nosuid,nodev,noatime,errors=panic,barrier=1,journal_async_commit,data=ordered 0 0
/dev/block/mmcblk0p16 /data ext4 rw,nosuid,nodev,noatime,barrier=1,journal_async_commit,data=ordered,noauto_da_alloc,dis
card 0 0
/sys/kernel/debug /sys/kernel/debug debugfs rw,relatime 0 0
/dev/fuse /storage/sdcard0 fuse rw,nosuid,nodev,noexec,relatime,user_id=1023,group_id=1023,default_permissions,allow_oth
er 0 0
/dev/block/dm-0 /mnt/asec/eu.chainfire.supersu.pro-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-1 /mnt/asec/com.keramidas.TitaniumBackupPro-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-2 /mnt/asec/stericson.busybox.donate-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-3 /mnt/asec/eu.chainfire.mobileodin.pro-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-4 /mnt/asec/com.vito.lux-2 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-5 /mnt/asec/com.speedsoftware.rootexplorer-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-6 /mnt/asec/eu.chainfire.triangleaway-2 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-7 /mnt/asec/com.ea.game.realracing2_OTD_row-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-8 /mnt/asec/com.zausan.zscreenrecorderpro-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-9 /mnt/asec/sixgreen.aos.itap.notes-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0 0
/dev/block/dm-10 /mnt/asec/com.square_enix.android_googleplay.ffl_gp-1 ext4 ro,dirsync,nosuid,nodev,noatime,barrier=1 0
0
/dev/block/vold/179:17 /storage/extSdCard exfat rw,dirsync,nosuid,nodev,noexec,noatime,nodiratime,uid=1000,gid=1023,fmas
k=0002,dmask=0002,allow_utime=0020,codepage=cp437,iocharset=utf8,namecase=0,errors=remount-ro 0 0
root@android:/ # 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:06:52.437

看起来您的编译程序位于 /sdcard/ 中。/sdcard/ 很可能是 FAT 文件系统，因此 chmod +x 将不起作用。你必须把它放在 /system/ 里面（注意： /system/ 是只读的）。

我在运行 CyanogenMod 的 GS3 上尝试了相同的操作，并将其放入 /system/ 为我工作。

# java - JavaEE：Login-config，不同角色的不同形式

> ID：15769147
> 
> 赞同：1
> 
> 时间：2013-04-02T16:19:42.033
> 
> 标签：java, jakarta-ee, web.xml

[文档](http://docs.oracle.com/cd/E13222_01/wls/docs70/webapp/web_xml.html#1045762)似乎表明不可能根据他想申请的角色来定义表格。

```
<login-config>
  <auth-method>FORM</auth-method>
  <form-login-config>
    <form-login-page>/login.xhtml</form>
    <form-error-page>/loginerror.xhtml</form>
  </form-login-config>
 </login-config> 
```

例如，导航到 xxx.xx/admin 将转到 adminlogin.xhtml，导航到 xxx.xx/account 将转到 login.xhtml。

有没有办法做到这一点？

PS。通常，您会将管理​​面板部署到子域，但由于规范，这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:28:31.340

不，没有办法做到这一点，而且有充分的理由。用户可以属于多个角色，即使您可以为 /admin/ *、 /account/*或 /whatever/* 配置不同的安全约束，用户也可以授予所有这些角色，其中一些角色或没有。无论如何，这不能提前知道。

# javascript - JQuery 悬停淡入淡出与默认 div 过渡口吃

> ID：15769149
> 
> 赞同：0
> 
> 时间：2013-04-02T16:19:47.753
> 
> 标签：javascript, jquery, fadein, fadeout

当鼠标悬停在导航按钮上时，我正在尝试使用悬停与交换 div 可见性。当没有鼠标悬停时，应该出现一个“默认”div。

我的问题是每次鼠标在链接之间转换时，默认的 div 都会短暂地重新出现。

是否有可能使交换无缝，或者不同的交换方法是否有效？我尝试为默认 div 设置带有淡出/淡入淡出事件的导航容器 div，但我没有任何运气。

有关示例，请参阅以下小提琴：http: [//jsfiddle.net/ElectricCharlie/Wk8Yd/](http://jsfiddle.net/ElectricCharlie/Wk8Yd/)

```
$('div.hmnav').hover(function()
        {
        $('#_wnr00').stop(true,true).fadeOut();
        $('#_'+this.id).stop(true,true).fadeIn(400);
        },
        function ()
            {
        $('#_'+this.id).stop(true,true).fadeOut(400);
        $('#_wnr00').stop(true,true).fadeIn();      
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:24:00.547

我刚刚摆脱了`true,true`它，它工作正常：

```
$('div.hmnav').hover(function () {
    $('#_wnr00').stop().fadeOut();
    $('#_' + this.id).stop().fadeIn(400);
},

function () {
    $('#_' + this.id).stop().fadeOut(400);
    $('#_wnr00').stop().fadeIn();
}); 
```

也更新了你的 jsFiddle。

**编辑**：也花时间清理你的 jQuery：

```
$('#navbox_inner')
    .corner("round 12px")
    .parent()
    .css({padding:1})
    .corner("round 14px")

$('#navbox_inner').on({
    mouseenter: function () {
        $('#_wnr00').stop().fadeOut();
        $('#_' + this.id).stop().fadeIn(400);
    },
    mouseleave: function(){
        $('#_' + this.id).stop().fadeOut(400);
        $('#_wnr00').stop().fadeIn();
    }
},'.hmnav'); 
```

这要快得多，因为它绑定到一个项目，并适当地委托。我还删除了元素选择器，因为纯基于类/基于 id 的选择器更快。第二次更新了你的 jsFiddle。

# jsf - JSF2 构建动态 EL 表达式

> ID：15769150
> 
> 赞同：1
> 
> 时间：2013-04-02T16:19:52.800
> 
> 标签：jsf, jsf-2, jstl, el

我正在使用 JSTL forEach 和 ah:dataTable 创建一个动态表，并很好地显示所有控件和潜在的错误消息，但现在我坚持为每个控件设置值。我需要创建（我认为）一个动态 EL 表达式来设置值，但我的任何版本都无法正常工作。我希望使用 c:out 构建表达式，但发现该标记在 JSF2 中不可用。

那么，是否可以在页面中构建动态表达式？如果控件尚未构建，如何在支持 bean 中设置表达式？

```
 <h:dataTable id="dtDetails" styleClass="slate_table" value="#{remediationDetail.eventList}" var="dataItem">
 <c:forEach items="#{remediationDetail.eventHeaders}" var="key">
  <h:column>
      <f:facet name="header">#{key.fieldDefinition.fieldConfiguration.customLabel}</f:facet>
         <h:inputText value="" id="txtNumber" styleClass="remediation_textbox error_marker" title="#{remediationDetail.errorMessages(dataItem.id, key.fieldDefinition.id)}">
           <f:convertNumber maxFractionDigits="0" maxIntegerDigits="19"/>
  </h:column>
 </c:forEach>
</h:dataTable> 
```

与往常一样，感谢任何帮助或指导。

问候，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:40:56.350

我无法创建动态 EL 表达式。所以，我结束了使用 c:forEach 的索引来帮助定义我正在寻找的值。这个结果的唯一问题是我希望我将要显示的数据在数组中具有相同数量的位置。

```
<c:forEach items="#{remediationDetail.eventHeaders}" var="key" varStatus="looper">
    <h:column>
        <f:facet name="header">#{key.fieldDefinition.fieldConfiguration.customLabel}</f:facet>
<h:inputText id="txtNumber" value="#{dataItem.entityList[looper.index].val}">
   <f:convertNumber maxFractionDigits="0" maxIntegerDigits="19"/>
</h:inputText>
    </h:column>
 </c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T08:53:33.927

在我的情况下，以下内容有助于构建动态 EL。

```
<ui:param name="beanName" value="myBackedBean"/>
<ui:param name="propertyName" value="field1"/>
<ui:param name="nestedPropertyName" value="field1"/>

<p:inputTextarea value="#{sessionScope[beanName][propertyName][nestedPropertyName]}"/> 
```

受此[主题启发](https://stackoverflow.com/a/12159937/3629114)

# python - 在已经填充的字典上调用 dict.__init__ 是否安全？

> ID：15769152
> 
> 赞同：0
> 
> 时间：2013-04-02T16:19:59.600
> 
> 标签：python

我有一个继承自内置类的`dict`类。它曾经看起来有点像：

```
class AwesomeDictionary(dict):
    def __init__(self, *args, **args):
        self['hello'] = 'world'
        i = {}
        dict.__init__(i, *args, **kargs)
        self.update(i) 
```

我用一个临时字典来实现它，因为我认为`__init__`会创建一个全新的字典或至少清除它。

我最近才意识到你可以在 Python 解释器中毫无问题地做这样的事情：

```
f = {'hi':56, '67':89}
dict.__init__(f, **{'h':67})
print f
#You get:  {'67': 89, 'h': 67, 'hi': 56} 
```

如果您指定相同的字段：

```
f = {'hi':56, '67':89}
dict.__init__(f, **{'hi':34})
print f
#You get:  {'67': 89, 'hi': 34} 
```

因此，在这种情况下，它的行为似乎`__init__`与`.update`.

出现这种情况有什么特别的原因吗？我可以期望这在实现和版本之间保持一致吗？

在类似的说明中，`.update`除了代码的清晰度和可读性之外，调用常规字典是否有任何目的（请注意，这是一个很好的理由，我只是想知道这是否是唯一的原因）？

哦，我知道我可以保持原样并进行更新以使您安心，但是如果您两次执行相同的操作，则会感觉效率很低。

如果这是一个愚蠢的问题，我深表歉意。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:22:25.397

您也可以调用`f.__init__(hi=34)`.

`__init__`对象上的方法是*初始化器*。它被调用来初始化一个新创建的对象，并且通常该方法假定该对象在`__init__`执行时仍然是新鲜的和空的。

如果您稍后再次调用它，它是否会起作用取决于课程。因为`dict`它显然有效。我不会指望这种跨版本的工作，`dict.__init__`文档中未指定您观察到的方法的行为。碰巧在 CPython 中，`__init__`被实现为`self.update()`（尽管在 C 中）。

最大的缺点是它会使任何试图理解您的代码的人感到困惑。为什么打电话`__init__`什么时候`.update()`清楚得多？

# sublimetext2 - 在 Sublime Text 2 中增加最近项目的数量？

> ID：15769156
> 
> 赞同：25
> 
> 时间：2013-04-02T16:20:12.590
> 
> 标签：sublimetext2

是否可以增加 Sublime Text 2 的 Projects -> Recent Projects 菜单中出现的最近项目的数量？我已经搜索了设置，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-02T16:49:34.037

编辑这个文件：

```
~/Library/Application Support/Sublime Text 2/Packages/Default/Main.sublime-menu 
```

在第 715 行附近，您会看到：

```
"caption": "Recent Projects",
            "mnemonic": "R",
            "children":
            [
                { "command": "open_recent_project", "args": {"index": 0 } },
                { "command": "open_recent_project", "args": {"index": 1 } },
                { "command": "open_recent_project", "args": {"index": 2 } },
                { "command": "open_recent_project", "args": {"index": 3 } },
                { "command": "open_recent_project", "args": {"index": 4 } },
                { "command": "open_recent_project", "args": {"index": 5 } },
                { "command": "open_recent_project", "args": {"index": 6 } },
                { "command": "open_recent_project", "args": {"index": 7 } },
                { "command": "open_recent_project", "args": {"index": 8 } },
                { "command": "open_recent_project", "args": {"index": 9 } },
                { "caption": "-" },
                { "command": "clear_recent_projects", "caption": "Clear Items" }
            ] 
```

添加额外的行

```
{ "command": "open_recent_project", "args": {"index": n } }, 
```

IE

```
"caption": "Recent Projects",
            "mnemonic": "R",
            "children":
            [
                { "command": "open_recent_project", "args": {"index": 0 } },
                { "command": "open_recent_project", "args": {"index": 1 } },
                { "command": "open_recent_project", "args": {"index": 2 } },
                { "command": "open_recent_project", "args": {"index": 3 } },
                { "command": "open_recent_project", "args": {"index": 4 } },
                { "command": "open_recent_project", "args": {"index": 5 } },
                { "command": "open_recent_project", "args": {"index": 6 } },
                { "command": "open_recent_project", "args": {"index": 7 } },
                { "command": "open_recent_project", "args": {"index": 8 } },
                { "command": "open_recent_project", "args": {"index": 9 } },
                { "command": "open_recent_project", "args": {"index": 10 } },
                { "caption": "-" },
                { "command": "clear_recent_projects", "caption": "Clear Items" }
            ] 
```

现在你有 11 个最近的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-07T07:19:42.610

对于崇高文本 3，我建议（基于[https://stackoverflow.com/a/34512015/3061838](https://stackoverflow.com/a/34512015/3061838)`Main.sublime-menu` ）向您的文件夹添加一个新文件，`%APPDATA%\Sublime Text 3\Packages\User`其中包含以下内容

```
[
    {
        "caption": "Project",
        "id": "project",
        "mnemonic": "P",
        "children":
        [
            {
                "caption": "Open Recent More",
                "children":
                [
                    { "command": "open_recent_project_or_workspace", "args": {"index": 0 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 1 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 2 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 3 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 4 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 5 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 6 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 7 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 8 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 9 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 10 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 11 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 12 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 13 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 14 } },
                    { "command": "open_recent_project_or_workspace", "args": {"index": 15 } },
                    { "caption": "-" },
                    { "command": "clear_recent_projects_and_workspaces", "caption": "Clear Items" }
                ]
            },
        ]
    },] 
```

这个解决方案的优点是它可以在 Sublime Text 更新中存活。缺点是您将有 2 个最近打开的菜单。

您可以选择删除索引为 0-7 的行，因为它们存在于原始菜单中。

# javascript - 在jQuery中获取焦点表单字段ID

> ID：15769157
> 
> 赞同：0
> 
> 时间：2013-04-02T16:20:14.380
> 
> 标签：javascript, jquery, forms, autosuggest

我目前正在修改一个开箱即用的 php/jQuery 自动建议脚本。我正在努力让脚本与多个文本输入字段一起工作。它最初是为与 ONE 字段一起工作的。

这是原始脚本和表单代码：

```
function suggest(inputString){
    if(inputString.length == 0) {
        $('#suggestions').fadeOut();
    } else {
    $('#city').addClass('load');
        $.post("autosuggest.php", {queryString: ""+inputString+""}, function(data){
            if(data.length >0) {
                $('#suggestions').fadeIn();
                $('#suggestionsList').html(data);
                $('#city').removeClass('load');
            }
        });
    }
}

function fill(thisValue) {
    $('#city').val(thisValue);
    setTimeout("$('#suggestions').fadeOut();", 0);
} 
```

我相信，修改脚本以使用多个输入字段的方法是获取焦点表单元素的 id，然后执行以下操作：

```
function getFocusID() {
    // get the focused form field id here
}

if(focusedID == "city") {
    //Script for form field with "city" as id

    function suggest(inputString){
        if(inputString.length == 0) {
            $('#suggestions').fadeOut();
        } else {
        $('#city').addClass('load');
            $.post("autosuggest.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').fadeIn();
                    $('#suggestionsList').html(data);
                    $('#city').removeClass('load');
                }
            });
        }
    }

    function fill(thisValue) {
        $('#city').val(thisValue);
        setTimeout("$('#suggestions').fadeOut();", 0);
    }
} // code for input id "city" END

// And now create if else statements for the other 4 input text fields, filling them with the code above. 
```

我在这里想对了吗？或者有没有其他更有效的方法来做到这一点？如果这是正确的方法，我如何获得重点输入文本字段的输入 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:22:14.570

那将是[activeElement](https://developer.mozilla.org/en-US/docs/DOM/document.activeElement)：

```
function getFocusID() {
    return document.activeElement.id;
} 
```

# c++ - VARIANT 成员未在 C++ OLE 自动化应用程序 (Eclipse IDE) 中解析

> ID：15769159
> 
> 赞同：0
> 
> 时间：2013-04-02T16:20:24.317
> 
> 标签：c++, eclipse, ole, variant

我正在开发一个使用 OLE 自动化读取和写入 Excel 的 C++ 应用程序（基于此的代码：http: [//support.microsoft.com/kb/216686](http://support.microsoft.com/kb/216686)）。

当我使用 VS2010 时，该应用程序已经启动并运行良好。但是最近我决定迁移到 Eclipse，突然之间编译器 (CL) 无法识别 VARIANT 结构的结构（文档：http: [//msdn.microsoft.com/en-us/library/aa908601\. .aspx](http://msdn.microsoft.com/en-us/library/aa908601.aspx)）。例如在这段代码中：

```
VARIANT tmp;
tmp.vt = VT_R4;
tmp.fltVal = 5.0f; 
```

tmp.fltVal 无法在 Eclipse 中解析（虽然它在 VS2010 和我在网上看到的每个代码示例都可以正常工作）。让 Eclipse 停止显示错误的唯一方法是将最后两行替换为：

```
tmp.n1.n2.vt = VT_R4;
tmp.n1.n2.n3.fltVal = 5.0f; 
```

tmp.parray 和 VARIANT 的所有其他成员也是如此。有没有人遇到过这个？我在这里想念什么？

PS：不，到处替换代码并不是一种选择

# asp.net-mvc - Visual Studio 2012 - 将“视图”和“内容”复制到项目输出路径

> ID：15769165
> 
> 赞同：2
> 
> 时间：2013-04-02T16:20:41.287
> 
> 标签：asp.net-mvc, visual-studio-2012, msbuild

我有一个 MVC 项目，并且希望将构建输出到不同的目录。我已经在项目属性中设置了**输出路径**，这会处理所有 .DLL 的部署位置，但是如何让我的**Views**和**Content**文件夹也移动到那里？

我意识到我可以使用构建后事件来移动文件，但我觉得有一种更简单的方法（我以前可能做过......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:47:45.700

我最终选择了**构建后事件**，因为它很容易......

```
Robocopy $(ProjectDir)Views $(TargetDir)..\Views /s
Robocopy $(ProjectDir)Content $(TargetDir)..\Content /s
Copy $(ProjectDir)Web.config $(TargetDir)..\Web.config 
```

这仍将使用Visual Studio 项目属性中设置的*输出路径变量。*这对我来说很重要，因为一些团队成员相当初级，我希望设置过程简单明了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T13:06:26.500

有点晚了，但我认为您也需要设置“WebProjectOutputDir”。对于我的项目，我有：

```
WebProjectOutputDir=ReleaseFolder 
```

和

```
OutDir=ReleaseFolder\bin 
```

# msbuild - 将值从 MSBuild 任务传递到 TFS 构建工作流

> ID：15769175
> 
> 赞同：3
> 
> 时间：2013-04-02T16:20:57.897
> 
> 标签：msbuild, tfsbuild, msbuild-task

将属性值从 TFS 2010 Build Workflow 传递到 MSBuild 有很多示例和方法，但是我需要做相反的事情。

基本上在构建框上已经编写了自定义目标文件，以便对在框上运行的所有构建进行一些处理。这些目标文件中有自定义任务，其中一些公开返回值（或输出参数）。

如果可能，我希望能够从构建工作流程（TFS 2010）中读取这些输出参数的值。所以基本上

1.  TFS 2010 构建工作流在构建服务器上运行
2.  构建服务器具有注入到 MSBuild 管道并进行一些处理的自定义目标文件
3.  上述 2\. 的结果需要返回到 TFS 构建工作流程。

请对这个问题提供一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:46:38.183

一种方法是将输出数据写入可从 TFS 工作流轻松访问的位置。比如文件。然后，您需要稍微自定义 TFS 工作流，以便在 MSBuild 活动之后从文件中读取。

# prolog - Prolog - 同源列表

> ID：15769182
> 
> 赞同：0
> 
> 时间：2013-04-02T16:21:13.597
> 
> 标签：prolog

如果两个列表具有相同的长度并且除第一个和最后一个之外的所有元素都相同，则它们是同系的。我已经设法在长度之间进行了比较，但是如何查看元素是否相同，除了两个列表中的第一个和最后一个。
这是我的代码：

```
sug([H|T],[H1|T1]) :-
   length([H|T],N),
   length([H1|T1],M),
   N==M. 
```

> ex of what is syngeneic list -> sug([a,b,c,d],[d,b,c,a])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:32:22.483

你可以用几个规则来做到这一点：

1.  空列表是同源的
2.  当列表的尾部相同时，除了可能是最后一个元素之外，列表是同系的
3.  空列表是一样的
4.  对于规则 2，只有一个元素的列表是相同的
5.  如果列表的头部匹配且尾部对于规则 2 的目的相同，则列表对于规则 2 的目的是相同的。

无需显式检查长度，因为上面的规则永远不会匹配具有不同数量元素的两个列表。

以下是如何在 Prolog 中对上述规则进行编码 - 本质上，存在逐行匹配：

```
sug([], []).
sug([_|T1], [_|T2]) :- sameExceptLast(T1, T2).
sameExceptLast([], []).
sameExceptLast([_], [_]).
sameExceptLast([X|T1], [X|T2]) :- sameExceptLast(T1, T2). 
```

这是[关于 ideone 的演示](http://ideone.com/jMxL8D)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:35:00.273

假设列表中必须至少有两个元素（以便它们在每个对应列表中有所不同），您可以使用`append/3`来匹配中间列表并检查第一个和最后一个是否不同：

```
sug([HL|LTail], [HR|RTail]):-
  HL \= HR,
  append(L, [LL], LTail),
  append(L, [LR], RTail),
  LL \= LR. 
```

如果第一项和最后一项不需要不同（可能会或可能不会），那么该过程将看起来：

```
sug([_|LTail], [_|RTail]):-
  append(L, [_], LTail),
  append(L, [_], RTail). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:33:24.437

为什么不呢，在 SWI-Prolog 中：

```
sug(L1, L2) :-
    append([[_], Ls, [_]], L1),
    append([[_], Ls, [_]], L2). 
```

# c# - 在 c# 中使用 CSV 作为 datagridview 的数据源

> ID：15769186
> 
> 赞同：1
> 
> 时间：2013-04-02T16:21:35.640
> 
> 标签：c#, csv, datagridview, datatable

我有一个 CSV 文件，我想作为 datagridview 的数据源，但在列标题之前有 3 条随机行，它们不需要并且会影响表格

例如：

```
Username: 01   
Date: 04/02/13   
*blank*            
Source, file, date, time 
```

我用来获取 CSV 并将其用作 datagridview 的代码：

```
{
   string conStr = @"Driver={Microsoft Text Driver (*.txt; *.csv)};Dbq=" + Path.GetDirectoryName(Path.GetFullPath(path)) + ";Extensions=csv,txt";
   OdbcConnection conn = new OdbcConnection(conStr);

   OdbcDataAdapter da = new OdbcDataAdapter("Select * from [" + Path.GetFileName(path) + "]", conn);
   DataTable dt = new DataTable(path);
   da.Fill(dt);

   dataGridView1.DataSource = dt;

   da.Dispose();
   conn.Close();
   conn.Dispose();
} 
```

所以基本上，我需要阅读表格的所有 CSV，但删除文本的前 3 行。有没有办法作为查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:51:19.510

您可以将[.NET txtReader 用于文本文件](http://www.xporttools.net/txtReader.aspx)

它支持以下可能对您有用的连接字符串选项

*   跳过行
*   有标题
*   忽略空行

这是一个示例连接字符串：

```
 Data Source='C:\MyFolder';Delimiter=',';Has Quotes=True;Skip Rows=0;Has Header=True;
 Comment Prefix='';Column Type=String,String,String,Int32,Boolean,String,String;
 Trim Spaces=False;Ignore Empty Lines=True; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:35:56.450

在填充数据表之后并将其分配给 gridview 的数据源之前插入以下行：

```
 dt.Rows[0].Delete();
 dt.Rows[1].Delete();
 dt.Rows[2].Delete();
 dt.AcceptChanges(); 
```

# android - 尝试从不同的包执行活动时出错

> ID：15769188
> 
> 赞同：1
> 
> 时间：2013-04-02T16:21:37.887
> 
> 标签：android, android-activity

我有 2 个包裹：

1）com.example.appui

2)com.example.mapsApi

我想从第一个包开始第二个包的主要活动。这是我的代码：

在清单上 `<activity android:name="com.example.mapsApi.MapsActivity"/>`

关于活动：

```
 try{
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.example.mapsApi","com.example.mapsApi.MapsActivity");
startActivity(intent);
}catch (Exception e)
{
e.printStackTrace();
} 
```

我得到的错误是：无法找到显式类（com.example.mapsApi.MapsActivity）已在清单中声明它？

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:24:42.150

您可以在清单文件中保留完整路径。在你的代码中试试这个：

```
Intent intent = new Intent(this, MapsActivity.class); 
```

并在 java 类的顶部使用完整路径导入此活动，如下所示：

```
import com.example.mapsApi.MapsActivity; 
```

# c# - 在任务中进行 Async/Await db 调用？

> ID：15769189
> 
> 赞同：2
> 
> 时间：2013-04-02T16:21:38.317
> 
> 标签：c#, wcf, asynchronous, task-parallel-library, async-await

我们有一个 WCF 服务，它以下列方式处理传入消息：

```
public bool ProcessMessage(string message)
{
    var returnValue = GetReturnValue();

    Task.Run(() => {
        //do some things with the message
        UpdateDatabase();
        SendRepliesOverNetwork();
    });

    return returnValue;
} 
```

为了处理尽可能多的消息，我们在此处添加了任务。我们希望尽快将 returnValue 返回给调用者，让 Task 完成它的工作。

**我的问题：使用等待的异步数据库调用和/或使用异步方法通过网络进行回复有什么好处吗？**

我很谨慎，因为我认为这可能会造成过多的上下文切换。我们已经看到该应用程序在负载下使用了 100 多个线程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T17:51:53.603

首先，我建议你退后一步，认真问问早点回来是不是个好主意。你所做的通常是危险的；在进行实际处理之前，您将“确定”返回给客户端。仅当您的客户知道“returnValue”并不意味着操作已完成并且仅在收到“SendReplies”时才认为它已完成，这才是一个好主意。

就是说，是的，您应该会看到尽可能使一切异步的好处。如果你所有的任务都是非阻塞的，你会更好地利用你的线程池（更少的上下文切换）。

```
public bool ProcessMessage(string message)
{
  var returnValue = GetReturnValue();

  Task.Run(async () => {
    //do some things with the message
    await UpdateDatabaseAsync();
    await SendRepliesOverNetworkAsync();
  });

  return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T17:52:35.353

我可以看到这种方法的几个潜在问题。

首先，如果您在 IIS 中托管 WCF 服务，那么使用比请求寿命更长的后台线程是一个很大的禁忌。当一个请求完成时，IIS 可以自由地拆除整个请求，`AppDomain`这将中止所有后台工作，并带有极大的偏见！

其次，如果现有工作量增加，WCF 将限制请求。使用这种模式，您可以快速处理请求，线程池排队的工作量可能会无限增加。

* * *

您可以尝试使用 WCF 异步服务方法。这将释放正在等待 IO 的线程 - 您的数据库和网络访问 - 这可以提高吞吐量。

这里有一篇关于这种方法的深入文章：[`Dan Rigsby: Async Operations in WCF`](http://www.danrigsby.com/blog/index.php/2008/03/26/async-operations-in-wcf-iasyncresult-model-server-side/)

此外，这里的 MSDN 中有一个部分：[`WCF: Synchronous and Asynchronous Operations`](http://msdn.microsoft.com/en-us/library/ms734701.aspx)

# javascript - 如何使用 Knockout 遍历选择中的项目以显示范围值

> ID：15769191
> 
> 赞同：0
> 
> 时间：2013-04-02T16:21:46.260
> 
> 标签：javascript, asp.net-mvc, knockout.js

有没有办法遍历选择列表中的项目并计算一个值。例如我有以下数据

“因素”：[20、40、60、80、100]

它目前在多选列表框中显示如下，我在 HTML 语句中计算级别 Level 0: 20 Level 1: 40 Level 2: 60 Level 3: 80 Level 4: 100

我想计算并显示一个起始值，如下所示；0 级：0-20 1 级：21-40 2 级：41-60 3 级：61-80 4 级：81-100

当我显示当前级别时，如何在淘汰赛中恢复到以前的级别。例如在选择列表框中，我显示的是 100，上一个级别是 80，但是当我显示 100 时，我想显示上一个级别 + 1 和当前级别 100，级别 4：81-100

用户可以更改这些值，因此他们可以输入 15、45、70、80、100 的因子。然后我想根据这些数字显示一个范围值，例如。0-15、16-45 等

在淘汰赛/javascript/html 中执行此操作的任何方法

HTML：

```
 <select id="factorsSelect" multiple="multiple" size="10" data-bind="options:factors, selectedOptions:selectedFactors, 
          optionsText: function(factor) {return 'Level ' + factors().indexOf(factor) + ': ' + factor}"></select> 
```

JavaScript：

```
 function FactorInfo(projectid, adjustmentfactor, listpoints) {
    this.projectid = ko.observable(projectid);
    this.adjustmentfactor = ko.observable(adjustmentfactor);
    this.listpoints = ko.observableArray(listpoints);

    this.displayFactorName = ko.dependentObservable(function () {
        return this.projectid() + " -- " + this.adjustmentfactor();
    }, this);
}

    // Factor construction
    var Factor = function () {
        this.factor = ko.observable();
    };
   // get project trusted data from wcf service
    $.getJSON("../../Home/GetProjectTrustSettings", function (jsonData) {
        var mappedGlobal = $.map(jsonData, function (item) {
            vm.adjustmentFactor(item.AdjustmentFactor);
            vm.mySelectedproject(item.ProjectId);
            vm.factors(item.ListPoints);
            return new FactorInfo(item.AdjustmentFactor, item.ProjectId, item.ListPoints);
        });

    });

     var vm = {
        //app observables
        levelIdSize: ko.observable(""),
        myGlobal: ko.observableArray([]),

        // percent tab observables
        percents: ko.observableArray([]),
        percentlevelids: ko.observableArray([]),
        selectedPercents: ko.observableArray([]).trackDirtyFlag(),
        percentItemToAdd: ko.observable(""),
        globalPercent: ko.observable("").extend({ required: "Enter a Global Percent, between 1 and 100." }).trackDirtyFlag(),
        levelSize: ko.observable(""),

        // factor tab observables
        factors: ko.observableArray([]),
        factorlevelids: ko.observableArray([]),
        selectedFactors: ko.observableArray([]).trackDirtyFlag(),
        factorItemToAdd: ko.observable(""),
        adjustmentFactor: ko.observable("").extend({ required: "Enter an Adjustment Factor, between 1 and 100." }).trackDirtyFlag(),

        // project observable
        myProject: ko.observableArray([]),
        mySelectedproject: ko.observable("1"),
        projectIdChange: ko.observable(false),

        // check if something changes with project ID
        setProjectDirtyFlag: function () {
            this.projectIdChange(true);
            //console.log(this.projectIdChange());
        }

    }; 
```

使用 MVC 格式： 模型：使用系统；使用 System.Collections.Generic；使用 System.Linq；使用 System.Web；

```
 namespace AuditReview.Models
 {
 public class ProjectTrustSetting
   {
    public string ProjectId { get; set; }
    public int AdjustmentFactor { get; set; }
    public List<int> ListPoints { get; set; }
   }
 } 
```

样本控制器数据：

```
 public JsonResult GetProjectTrustSettings()
    {
        //create list
        var trustSetting = new List<ProjectTrustSetting>
            {
                new ProjectTrustSetting
                    {
                        ProjectId = "30729",
                        AdjustmentFactor = 5,
                        ListPoints = new List<int>
                            { 20, 40, 60, 80, 100} 
                    }
            };

        return Json(trustSetting, JsonRequestBehavior.AllowGet);
    } 
```

寻找创建起始范围值的最佳方法，无论是在淘汰赛、HTML、JavaScript 中。我在想应该有一些方法可以在 HTML 中，在我已经拥有的功能中。

optionsText: function(factor) {return 'Level ' + factor().indexOf(factor) + ': ' + factor}，或者在淘汰赛中作为计算出的 observable 或任何其他建议。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:25:20.447

您可以在视图模型上创建一个函数来处理生成标签。如果你为绑定提供一个函数，它会传入当前上下文作为第一个参数，所以你可以这样做：

```
<select data-bind="options: levels, 
                   optionsText: label, 
                   selectedOptions: selectedLevels" multiple="true"></select>

self.label = function(level) {
    var index = self.levels().indexOf(level);
    if (index === 0) {
        return level.name() + " 0-" + level.level();
    } else {
        var floor = self.levels()[index -1].level() + 1;
        return level.name() + " " + floor + "-" + level.level();
    }
}; 
```

这是[一个小提琴](http://jsfiddle.net/tyrsius/6qABH/1/)，展示了它是如何工作的。

# ios - ios AFDownloadRequestOperation 我用了，为什么启动界面没反应

> ID：15769196
> 
> 赞同：0
> 
> 时间：2013-04-02T16:21:57.440
> 
> 标签：ios, performance, file, download, operation

请帮助我，为什么我启动 AFDownloadRequestOperation ，界面没有响应，但我下载了文件，界面响应。我应该如何解决？

我认为是否与文件的写入速度有关，如果您可以使程序保持无响应，则下载太快和写入太快？

这是我的代码：

```
self.operation = [[AFDownloadRequestOperation alloc] initWithRequest:[[NSURLRequest      
                                alloc] initWithURL:[NSURL URLWithString:video.url]] 
                                                          targetPath:[[[[PlistManager         
                                           sharedInstance] getDirectory]  
                                        stringByAppendingPathComponent:[NSString  
                               stringWithFormat:@"%@.mp4",video.vid]] 
                                                        shouldResume:YES];

[self.operation start]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:30:08.937

问题是你告诉操作在你的主线程上开始。这将阻止您的用户界面。

您想要创建并保留 a`NSOperationQueue`并将您的操作添加到其中，以便它在后台执行。

或者，`AFHTTPClient`还创建和维护一个操作队列，因此如果您已经拥有其中一个，您可以将您的操作添加到其操作队列中。

# asp.net-mvc - 创建类 MVC 4 的新实例时创建相关属性 - 实体框架

> ID：15769202
> 
> 赞同：1
> 
> 时间：2013-04-02T16:22:23.883
> 
> 标签：asp.net-mvc, entity-framework

我刚刚进入 MVC 4 和 Entity Framework 5，想知道我所做的是否正确？

我有一个 UserObject 和一个 JobObject，jobObject 引用了一个用户对象。

```
public class Job
{
    public int id { get; set; }
    public virtual MyUser User { get; set; }
    public JobType JobType { get; set; }
} 
```

当我想创建作业的实例时，我在查询字符串中传递了一个参数 UserID，但作业只处理 MyUser 的实例。

以下是将用户与工作相关联的正确方法吗？

```
[HttpPost]
public ActionResult Create(Job job, int userid)
{
   if (ModelState.IsValid)
   {    
     MyUser staffmember = db.MyUsers.Find(userid);
     if (staffmember == null)
      {
        return View("StaffMemberNotFound");
      }
     job.User = staffmember;
     db.Jobs.Add(job);
     db.SaveChanges(); 
   }
} 
```

或者有没有更好的方法将用户与工作相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:42:16.553

你的方式会奏效，但如果可能的话，我更喜欢简单地使用 id。

我建议您`MyUserId`向您的类添加一个属性`Job`（如果您使用的是 codefirst，请记住更新数据库）：

```
public class Job
{
    public int id { get; set; }
    [ForeignKey("User")]
    public int MyUserId { get; set: }

    public virtual MyUser User { get; set; }
    public JobType JobType { get; set; }
} 
```

然后简单地填充`MyUserId`. 您还可以更改您的检查以简单地检查 id 是否存在与查找对象并让 EF 在将其返回给您之前将其映射到一个类

```
[HttpPost]
public ActionResult Create(Job job, int userid)
{
   if (ModelState.IsValid)
   {    
     if (!db.MyUsers.Any(u => u.Id == userid)
     {
        return View("StaffMemberNotFound");
     }

     job.MyUserId = userid;
     db.Jobs.Add(job);
     db.SaveChanges(); 
   }
} 
```

当您下次从数据库中检索记录时，EF 将为您完成其余的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:11:15.457

**您的方法效果很好**，您唯一可以做的小优化就是不接受“检索命中”，`MyUser staffmember = db.MyUsers.Find(userid);`因为您已经拥有`userid`.

我正在使用 ASP.NET MVC 4 和 Entity Framework 5.0，这是我的代码（不同的模型对象，但与您正在做的事情相同）。

注意：我让 EF 通过右键单击`Models`文件夹并`Add->ADO.NET Entity Data Model`在 VS.NET 2012 中选择来生成我的模型类。

**Store.Models.Product**

```
namespace Store.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Product
    {
        public long Id { get; set; }
        public string ProductName { get; set; }
        public decimal Price { get; set; }
        public int Quantity { get; set; }
        public System.DateTime DateAdded { get; set; }
        public Nullable<long> CategoryId { get; set; }

        public virtual Category Category { get; set; }
    }
} 
```

**Store.Models.Category**

```
namespace Store.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Category
    {
        public Category()
        {
            this.Products = new HashSet<Product>();
        }

        public long Id { get; set; }
        public string CategoryName { get; set; }
        public System.DateTime DateAdded { get; set; }

        public virtual ICollection<Product> Products { get; set; }
    }
} 
```

在我的`Create.cshtml`页面上，我让用户从下拉列表中选择 CategoryId。此类别 ID 绑定到`Product.CategoryId`。我在我的方法中所做的就是：

**产品控制器**

```
public class ProductController : Controller
{
    ...
    [HttpPost]
    public ActionResult Create(Product product)
    {
        product.DateAdded = DateTime.Now;
        if (dbContext != null)
        {
            dbContext.Products.Add(product);
            dbContext.SaveChanges();
        }
        return RedirectToAction("Index");
    }
    ...
} 
```

# youtube - 2013 年嵌入 YouTube 的可访问性如何？

> ID：15769213
> 
> 赞同：1
> 
> 时间：2013-04-02T16:22:53.527
> 
> 标签：youtube, embed, accessibility

我有一个大约 5 年前建立的网站，其中包括视频。当时，我们认为 YouTube 无法访问，所以选择了 JW Player。他们所有的内容现在都是 Flash 视频，我们希望让它在 iOS 等设备上运行。

一个简单的解决方案是将所有内容都移到 YouTube 上（这样可以提高在线知名度），所以我想知道：如今嵌入式 YouTube 视频的可访问性如何？新的 HTML5 iframe 嵌入或多或少可访问？我可以找到很多几年前的帖子，说它是多么难以访问，但过去几年的帖子不多。在这个网站上不会有任何抄送 - 有一个单独的成绩单可用 - 所以它真的只需要通过键盘/屏幕阅读器在基本级别上进行控制。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:33:35.577

iframe 相当容易访问，尽管 youtube 文档信息量不是很大。如果你想进入兔子洞，你可以阅读这些电子邮件： http: [//lists.w3.org/Archives/Public/w3c-wai-ig/2012JanMar/0234.html](http://lists.w3.org/Archives/Public/w3c-wai-ig/2012JanMar/0234.html)

iframe 在此处嵌入规范详细信息：http: [//static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en/us/events/io/2011/static/presofiles/youtube_iframe_player_the_future_of_embedding.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en/us/events/io/2011/static/presofiles/youtube_iframe_player_the_future_of_embedding.pdf)

更多详细信息：[http](http://polylearnsupport.calpoly.edu/About/YouTubeAccessibility.html) ://polylearnsupport.calpoly.edu/About/YouTubeAccessibility.html Flash 仍然存在键盘问题，但如果用户使用的是支持 html5 的浏览器，则不再是问题。实际上，我认为用户必须选择加入 html5。或者你可以自己动手：http: [//icant.co.uk/easy-youtube/docs/index.html](http://icant.co.uk/easy-youtube/docs/index.html)

看起来它相当不错，并且是一个可行的选择。当然，您可以随时上传视频并自行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T02:29:45.210

可能不是很好，但这是 2011 年的旧评论 - [http://terrillthompson.com/blog/44](http://terrillthompson.com/blog/44) - 不确定有多少变化。

iframe 只是挑战的一部分。

# html - 删除 AHREF 下一个 Html 标记

> ID：15769214
> 
> 赞同：0
> 
> 时间：2013-04-02T16:22:54.647
> 
> 标签：html, wordpress, css

```
</body>
</html>
<a href="http://example.com">visit us</a> 
```

我在所有页面中都有这个 ahref 的 wordpress 主题，我可以删除吗？？我搜索所有 php 函数和 css 样式，但什么都没有……知道吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:27:14.213

CSS 无法从 DOM 中移除元素。如果您知道 javascript 或更好的 jQuery，只需提供要删除特定类的所有锚点，然后使用以下命令将其全部删除：

```
$(".yourClass").remove(); 
```

如果你不懂 jQuery，那么你需要使用每个元素的父元素来移除它：

```
element.parentNode.removeChild(element); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T07:15:16.023

看起来你在页脚模板中有这个标签，向下滚动以检查在关闭 html 标签后是否有任何文本，或者有时可能是你的编辑器没有设置换行文本选项，结果你看不到此文本可能在右侧，滚动到编辑器的右侧，或者您可以使用搜索选项来查找文本。

# matlab - 如何创建 3d 符号张量？

> ID：15769217
> 
> 赞同：1
> 
> 时间：2013-04-02T16:23:08.383
> 
> 标签：matlab

这有效

```
A = sym('A%d%d', [2 4])

A =

[ A11, A12, A13, A14]
[ A21, A22, A23, A24] 
```

但这会产生错误

```
A = sym('A%d%d%d', [2, 4 ,6])
Error using sym>createCharMatrix (line 2001)
Matrix syntax can only create vectors and
matrices.

Error in sym>convertCharWithOption (line 1960)
        s = createCharMatrix(x,a);

Error in sym>tomupad (line 1693)
        S = convertCharWithOption(x,a);

Error in sym (line 113)
            S.s = tomupad(x,a); 
```

如何在 matlab 中创建符号 3d 张量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:30:46.960

一种可行的方法是创建一个字符串元胞数组并将其转换为符号变量：

```
%// Create matrices of indices
[k1 k2 k3] = ndgrid(1:2, 1:4, 1:6);

%// Create a cell array of strings
C = regexp(sprintf('A%d%d%d', [k1(:) k2(:) k3(:)]'), 'A\d{3}', 'match');

%// Convert strings to symbolic objects and convert back into a matrix
A = cell2mat(cellfun(sym, reshape(C, size(k1)), 'UniformOutput', 0)); 
```

# ruby-on-rails - 无法使用插值实例变量渲染部分

> ID：15769219
> 
> 赞同：0
> 
> 时间：2013-04-02T16:23:12.070
> 
> 标签：ruby-on-rails, spree

我正在尝试在表格列“组”设置为“女性”的产品页面上呈现部分内容。

在 products_controller.rb 我有：

```
@subnav = Spree::Product.find(params[:group]) 
```

然后在 products#show 我有：

```
<div class="subnav">
 <%= render "spree/shared/#{@subnav}_subnav" %>
</div><!--subnav --> 
```

因此，当产品具有组“女性”时，它应该呈现“spree/shared/women_subnav”。但相反，我收到“ActionView::MissingTemplate in Spree/products#show”错误，说

```
 "Missing partial spree/shared/_subnav with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :rabl], :versions=>[:v1]}. 
```

所以由于某种原因，它甚至没有认识到变量的存在。

我也试过

```
 @subnav = params[:group] 
```

和

```
 @subnav = Product.find(params[:group] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:54:26.683

您有此错误，因为 in `<%= render "spree/shared/#{@subnav}_subnav" %>`,`@subnav`为 nil 或空白。它是空白的，因为它`params[:group]`是 nil 或空白。它是空白的，因为 params 没有`:group`密钥。

你的网址是`pants.telegraphbranding.com/products/:id`

这意味着 params 有一个键 : `id`。

如果你想访问一个组，你必须定义一个这样的路由：

```
pants.telegraphbranding.com/groups/:group_id/products/:id 
```

或者直接在 URL 中传递组：`pants.telegraphbranding.com/products/123?group_id=456`

接下来，你可以写

```
@subnav = Spree::Product.find(params[:group_id]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:50:47.923

根据评论，您没有将组参数传递给 url 中的服务器。

```
 @subnav = Spree::Product.find(params[:group]) 
```

这里@subnav 将为零，字符串插值将“#{@subnav}”替换为空字符串。

@subnav 也将是 ActiveRecord 的实例而不是字符串，因此您需要调用所需的属性，该属性将返回字符串（在您的情况下为“妇女”）。

在渲染部分以处理 nil 值之前，还要注意检查 @subnav 的值

像

```
<% unless @subnav.nil? %>
<div class="subnav">
 <%= render "spree/shared/#{@subnav.name}_subnav" %>
</div><!--subnav -->
<% end %> 
```

假设 name 是 ActiveRecord 实例的属性，用于保存“女性”值

# java - 重入锁 - 尝试使用 rxtx 将字节 [] 写入串行端口时出现非法监视器状态异常

> ID：15769220
> 
> 赞同：2
> 
> 时间：2013-04-02T16:23:14.130
> 
> 标签：java, concurrency, locking, rxtx, reentrantlock

我有以下代码给我带来了很多麻烦，我想我已经盯着它太久了，新鲜的眼睛将不胜感激 -

调用方法 - （在 RobotInterface 类中）

```
 try
        {
            serialConnection.put(candidate.getCandidate().getGenome());
            TwoWaySerialCommTest.inputAvailable.await();
        }
        catch ( Exception e )
        {
            TwoWaySerialCommTest.listPorts();
            e.printStackTrace();
        } 
```

TwoWaySerialCommTest 类 - 改编自 rxtx 网站示例。完整代码供参考，重要部分是 put() 方法和 serialwriter。

```
 package org.dnsdojo.ryanhost.GA.MuPlusOne;

    import gnu.io.CommPort;
    import gnu.io.CommPortIdentifier;
    import gnu.io.SerialPort;
    import gnu.io.SerialPortEvent;
    import gnu.io.SerialPortEventListener;

    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.util.concurrent.locks.*;

    /**
     * This version of the TwoWaySerialComm example makes use of the
     * SerialPortEventListener to avoid polling.
     *
     */
    public class TwoWaySerialCommTest
    {
            static Lock lock = new ReentrantLock();
            static Condition outputAvailable = lock.newCondition();
            static Condition inputAvailable = lock.newCondition();
            public volatile byte[] inputBuffer = new byte[1024];
            public volatile byte[] outputBuffer = new byte[1024];

            public TwoWaySerialCommTest()
        {
            super();
        }

            public void put(byte[] buffer)
            {
                    try
                    {
                            lock.lock();
                            int i = 0;
                            for(; i < buffer.length; i++ )
                            {
                                    outputBuffer[i] = buffer[i];
                            }
                            System.out.println((byte) '\n');
                            outputBuffer[i] = (byte) '\n';
                            i++;
                            for(; i < outputBuffer.length; i++ )
                            {
                                    outputBuffer[i] = 0;
                            }
                            System.out.println("Output buffer after put");
                            for(int j = 0; j < outputBuffer.length; j++)
                            {
                                    System.out.print(outputBuffer[j]);
                            }

                    }
                    catch(Exception e)
                    {
                            System.out.println("Exception for lock in put");
                            e.printStackTrace();
                    }
                    finally
                    {
                            lock.unlock();
                            outputAvailable.signal();
                    }
            }

        void connect ( String portName ) throws Exception
        {
            CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
            if ( portIdentifier.isCurrentlyOwned() )
            {
                System.out.println("Error: Port is currently in use");
            }
            else
            {
                CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

                if ( commPort instanceof SerialPort )
                {
                    SerialPort serialPort = (SerialPort) commPort;
                    serialPort.setSerialPortParams(57600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                    InputStream in = serialPort.getInputStream();
                    OutputStream out = serialPort.getOutputStream();

                    serialPort.addEventListener(new SerialReader(in , inputBuffer));
                    serialPort.notifyOnDataAvailable(true);

                    (new Thread(new SerialWriter(out , outputBuffer))).start();

                }
                else
                {
                    System.out.println("Error: Only serial ports are handled by this example.");
                }
            }
        }

        static void listPorts()
        {
            java.util.Enumeration<CommPortIdentifier> portEnum = CommPortIdentifier.getPortIdentifiers();
            while(portEnum.hasMoreElements())
            {
                    CommPortIdentifier portIdentifier = portEnum.nextElement();
                    if(portIdentifier == null)
                    {
                            System.out.println("No ports");
                    }
                    System.out.println("Available - " + portIdentifier.getName());
            }
        }

        /**
         * Handles the input coming from the serial port. A new line character
         * is treated as the end of a block in this example.
         */
        public static class SerialReader implements SerialPortEventListener
        {
            private InputStream in;
            byte[] buffer;

            public SerialReader ( InputStream in )
            {
                this.in = in;
            }

            public SerialReader (InputStream in, byte[] buffer)
            {
                    this.in = in;
                    this.buffer = buffer;
            }

            public void serialEvent(SerialPortEvent arg0) {
                lock.lock();
                    int data;

                try
                {

                    int len = 0;
                    while ( ( data = in.read()) > -1 )
                    {
                        if ( data == '\n' )
                        {
                            break;
                        }
                        buffer[len++] = (byte) data;
                    }
                    //inputAvailable.signal();
                    //outputAvailable.signal();
                }
                catch ( IOException e )
                {
                    e.printStackTrace();
                    System.exit(-1);
                }
                finally
                {
                    lock.unlock();
                }
            }

        }

        /** */
        public static class SerialWriter implements Runnable
        {
            OutputStream out;
            volatile byte[] buffer;

            public SerialWriter ( OutputStream out )
            {
                this.out = out;
            }

            public SerialWriter ( OutputStream out, byte[] buffer)
            {
                    this.out = out;
                    this.buffer = buffer;
            }

            public void run ()
            {
                    while(true)
                    {
                            lock.lock();
                            try
                        {
                            outputAvailable.await();
                            System.out.println("Waking up");
                            int i = 0;
                            if (this.buffer != null)
                            {
                                    System.out.println("Buffer isn't empty");
                                    for (int j = 0; j < buffer.length; j++)
                                    {
                                            System.out.print(buffer[i]);
                                    }
                                    while(buffer[i] != ((byte)'\n') && i < buffer.length -1 )
                                    {
                                            this.out.write(buffer[i++]);
                                            System.out.print(buffer[i-1]);
                                            buffer[i-1] = 0;
                                    }
                            }
                            else
                            {
                                    System.out.println("Buffer is null");
                                    System.out.println(this.buffer.toString());
                            }
                        }
                        catch ( IOException e )
                        {
                            e.printStackTrace();
                            System.exit(-1);
                        }
                        catch(Exception e)
                        {
                            e.printStackTrace();
                        }

                            finally
                            {

                                    lock.unlock();
                            }
                    }
            }
        }

       /* public static void main ( String[] args )
        {
            try
            {
                (new TwoWaySerialCommTest()).connect("/dev/ttyS82");
            }
            catch ( Exception e )
            {
                TwoWaySerialCommTest.listPorts();
                e.printStackTrace();
            }
        }
*/

    } 
```

输出如下所示。我试过移动锁定文件，从串行写入器中取出锁，在调用方法中加锁以及其他一些技巧。

期望的结果是该方法将调用 serialConnection（已连接的 TwoWaySerialCommTest 的一个实例），并等待 serialConnection 写入串行端口并接收响应，然后再继续执行。

几个小时以来我一直在努力解决这个问题，请帮忙:)

```
Output buffer after put
10101010000001101111010110101111010000100110101000000011101011100011000101111111010011101111001100111110001010011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000RXTX fhs_lock() Error: creating lock file: /var/lock/LCK..ttyS82: File exists
java.lang.IllegalMonitorStateException
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.signal(AbstractQueuedSynchronizer.java:1941)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.TwoWaySerialCommTest.put(TwoWaySerialCommTest.java:64)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.RobotInterface.evaluate(RobotInterface.java:35)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.RobotInterface.run(RobotInterface.java:58)
    at java.lang.Thread.run(Thread.java:722) 
```

如果我按照建议将通知移动到 try 块内，则输出为

```
Output buffer after put
    11100111000111010010111111000110100010010111000000110001010011001001110001010111110001010110010001010001010110101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000Waking up
Buffer isn't empty
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111RXTX fhs_lock() Error: creating lock file: /var/lock/LCK..ttyS82: File exists
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110011100011101001011111100011010001001011100000011000101001100100111000101011111000101011001000101000101011010java.lang.IllegalMonitorStateException
    at java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:155)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1260)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.fullyRelease(AbstractQueuedSynchronizer.java:1723)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2040)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.RobotInterface.evaluate(RobotInterface.java:36)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.RobotInterface.run(RobotInterface.java:58)
    at java.lang.Thread.run(Thread.java:722) 
```

RobotInterface 类 -

```
package org.dnsdojo.ryanhost.GA.MuPlusOne;

import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

public class RobotInterface implements Runnable
{
    // create a serial connection
    // transmit a string and check for response
    // wait for evaluation
    // take evaluation
    private CandidateTest candidate;
    private TwoWaySerialCommTest serialConnection;
    //private Random rng = new Random();

    protected static Logger logger = Logger.getLogger("Thread" + Thread.currentThread().getName());

    public RobotInterface(CandidateTest test, TwoWaySerialCommTest serialConnection)
    {
            this.candidate = test;
            this.serialConnection = serialConnection;
            PropertyConfigurator.configure("log4j.properties");
    }

    public void evaluate (Genome genome)
    {
            //send to robot and return fitness
            //genome.setFitness(rng.nextDouble());
            logger.debug("fitness is " + genome.getFitness());
            try
            {
                    try
        {

            serialConnection.put(candidate.getCandidate().getGenome());
            TwoWaySerialCommTest.inputAvailable.await();

        }
        catch ( Exception e )
        {
            TwoWaySerialCommTest.listPorts();
            e.printStackTrace();
        }
            }
            catch(Exception E)
            {

            }

    }

    public void run()
    {
            logger.debug("entering run of Robot Interface");
            logger.debug("Send Genome via serial and wait for a response");
            Genome testSubject = candidate.getCandidate();
            evaluate(testSubject);
            candidate.finished();
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:26:22.543

您在`signal`释放锁之后调用它，而[您应该在持有锁时调用它](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#newCondition%28%29)：

```
lock.unlock();
outputAvailable.signal(); 
```

应该相反：

```
outputAvailable.signal();
lock.unlock(); 
```

`signal`尽管在块的末尾调用会更好`try`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:32:32.660

[根据此链接...](http://rxtx.qbang.org/wiki/index.php/Trouble_shooting#How_can_I_use_Lock_Files_with_rxtx.3F)
在使用锁定文件之前，您需要做以下两件事之一：
每当您使用 RXTX .. 或 ..
添加需要使用 RXTX 到组“uucp”（首选）

# c++ - 可以从硬编码的整数常量中删除“LL”，并替换为“static_cast （……）”？

> ID：15769226
> 
> 赞同：4
> 
> 时间：2013-04-02T16:23:30.703
> 
> 标签：c++

我正在修改`LL`对硬编码常量使用“long long”( ) 数据类型定义的遗留代码，如下所示：

```
0xFFFFFFFFFFFFFFFFLL 
```

我相信`LL`附加到常量的保证该常量将被解释为`long long`.

但是，我不想`long long`在位数方面依赖于任何特定的编译器相关解释。

因此，我希望我的变量声明不`LL`使用常量，而是使用：

```
uint64_t a = static_cast<uint64_t>(0xFFFFFFFFFFFFFFFF); 
```

我想认为`0xFFFFFFFFFFFFFFFF`编译器在转换为 之前不会将常量解释为 32 位整数`uint64_t`，这将导致`a`成为包含 value 的 64 位整数`0xFFFFFFFF`，而不是所需的值。

（我目前感兴趣的 64 位编译器是 VS 2010 和 Ubuntu 12.04 LTS GCC。但是，我希望这段代码能够以任何现代编译器所需的方式运行。）

对于大多数或所有现代编译器，上述代码是否会按预期工作，因此`a`正确设置的值可以根据需要包括常量中的所有数字，`0xFFFFFFFFFFFFFFFF`而不包括`LL`常量末尾的 ？

（注意：包含`I64`在常量末尾会导致编译器错误。也许有另一个标记需要（或可以）包含在常量末尾以告诉编译器将常量解释为 64 位整数？）

（另外：也许甚至`static_cast<uint64_t>`是不必要的，因为变量被明确定义为 uint64_t？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:32:17.733

根据 C++11 标准的第 2.1.14/2 段：

> 整数文字的类型是表 6 中对应列表的第一个，其中可以表示其值

表 6 指定对于十六进制文字常量，文字的类型应为：

*   `int`; 或（如果不合适）
*   `unsigned int`; 或（如果不合适）
*   `long int`; 或（如果不合适）
*   `unsigned long int`; 或（如果不合适）
*   `long long int`; 或（如果不合适）
*   `unsigned long long int`.

如果我们做出合理的假设，`0xFFFFFFFFFFFFFFFF`不适合上面列表中的前 5 种类型，那么它的类型应该是`unsigned long long int`. 只要您使用的是 64 位编译器，就可以合理地假设这种类型的值的大小为 64 位，并且`unsigned long long int`如您所愿，该常量将被解释为 64-bit 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T17:01:44.843

为了减少安迪所说的要点：如果实现具有一种或多种能够表示的标准整数类型，`0xFFFFFFFFFFFFFFFF`则文字`0xFFFFFFFFFFFFFFFF`具有这些类型中的一种*。*

对您而言，这并不重要，因为无论是哪一个，转换为的结果`uint64_t`都是相同的。

如果（C++11 之前的）实现没有足够大的整数类型，那么（a）程序格式错误，所以你应该得到一个诊断；和（b）它*可能*`uint64_t`无论如何都不会。

你是对的，这`static_cast`是不必要的。`uint64_t`无论如何，它都会执行与分配给相同的转换。有时，强制转换会抑制某些隐式整数转换的编译器警告，但我认为在这种情况下，任何编译器都不太可能警告隐式转换。通常不会有一个，因为`0xFFFFFFFFFFFFFFFF`通常已经有类型`uint64_t`。

顺便说一句，写起来可能更好`static_cast<uint64_t>(-1)`，或者只是`uint64_t a = -1;`。它保证等于`0xFFFFFFFFFFFFFFFF`，但读者更容易看到和之间的区别，`-1`而`0xFFFFFFFFFFFFFFF`不是看到和之间的`0xFFFFFFFFFFFFFFFF`区别`0xFFFFFFFFFFFFFFF`。

# html - 如何防止响应式网页上的水平滚动？

> ID：15769229
> 
> 赞同：26
> 
> 时间：2013-04-02T16:23:35.813
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我正在使用 twitter 引导程序来使我的应用程序响应。当我将浏览器窗口的宽度缩小到最小尺寸或在移动设备（例如 iPhone）上查看页面时，用户可以水平滚动。水平滚动的数量很小，但我想将其全部删除。

我相信这是由于我包含的 img 容器，但我不在这里。该页面的 html 位于此处： http: [//pastebin.ca/2347946](http://pastebin.ca/2347946)。

关于如何防止页面水平滚动同时仍保持 img 容器中的滚动的任何建议？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-01-29T06:43:53.003

我有同样的问题，并应用它来解决它：

```
body {
    overflow-x: hidden !important;
}
.container {
    max-width: 100% !important;
    overflow-x: hidden !important;
} 
```

扩展一下，我只是在手机上遇到了问题，所以这是我的最终代码：

```
@media screen and (max-width: 667px) {
    body {
        overflow-x: hidden !important;
    }
    .container {
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
} 
```

我在 Github 上发现了这方面的问题，所以我猜 Bootstrap 的更新版本已经打​​了补丁。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-03T20:43:23.073

我很确定您的某个子元素的某个地方超出了其父元素的宽度。检查您的代码两次，如果内部子元素的任何 box-size 很大，因为其中一个原因，例如 - 当包含`margin`,`padding`的框宽度`border`超出限制时。而且我们可能还没有添加`overflow: hidden;`到它的外部父元素。在这种情况下，它们被认为超出了它们的父元素，浏览器会用滚动条显示它。所以通过删除额外的边距、填充、边框来修复它，或者如果你不想让任何头痛，只需尝试添加`overflow:hidden;`到外框。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-30T07:41:30.457

“溢出：隐藏；” 风格是补救措施而不是预防措施。如果你想防止这种情况发生，你必须检查比身体大的身体元素。当您在“.container”类（twitter bootstrap）之外使用带有一些“填充”或“边距”的 div 时，就会发生这种情况。所以删除容器类之外的所有填充和边距。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-24T12:23:00.237

事实证明，我放大了 100% 以上，导致页面滚动。Cmd+0 帮助将缩放比例提高到 100%，从而摆脱了滚动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:30:11.787

尝试添加（在相关的`@-rule`） a `max-width`：

```
img {
    max-width: NNNpx;
} 
```

这样可以防止`img`太宽。

# css - Opera 浏览器以不同方式显示边距

> ID：15769236
> 
> 赞同：1
> 
> 时间：2013-04-02T16:23:56.490
> 
> 标签：css, layout, margin, opera

我要疯了，我不知道是什么原因导致右侧边栏画廊图像的边距在 Opera 浏览器上呈现不同。更具体地说，图像的底部边距似乎在其他所有常见浏览器中都加倍，它设置为 2px，只有 opera 将其显示为 2 px。

这是网址 - [http://www.roxopolis.de/media](http://www.roxopolis.de/media)[在此处](http://imgur.com/a/KdsKB)查看屏幕截图。

请帮我解决这个问题，我不太关心它的显示方式不同，但它会暴露一些以下画廊图像，这些图像应该保持隐藏，这让我很困扰。如果有另一种方法可以隐藏以下图像（由小部件放置），那也很好。也许为歌剧有条件地设置边距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:36:54.777

我已经快速浏览了 Dragonfly 中的页面以及 Chrome 的检查器进行比较，并且没有任何特定的风格，包括继承的风格，让我觉得“导致”了这个问题。也许其他人可以找到一些东西，但乍一看，我会说 Opera 似乎在“做正确的事”。

如果您将每个锚标记及其各自的图像放在其自己的容器中并尝试设置它们的样式（例如，包含包含每个项目图像的锚的 div 并将它们浮动在父容器中，则您可能对间距有更多的控制分）。

你有比你想显示的更多的图像有什么特别的原因吗？我没有看到任何控件来滚动该页面上的图像，所以我不确定为什么你需要超过你已经显示的六个图像。当然，如果您在某处有随机顺序的代码，您可以更改它，使其仅显示前六张图像。

另外，您是否尝试将问题分解为可以在[jsfiddle](http://jsfiddle.net)中测试/调整的较小用例？如果您无法使用上述建议解决问题，这可能有助于深入了解您的问题。

# c# - 减少 ASP.Net Web 窗体中的名称长度

> ID：15769237
> 
> 赞同：1
> 
> 时间：2013-04-02T16:23:57.403
> 
> 标签：c#, asp.net, html, webforms

我现在正在尝试减小 ASP.Net 页面大小。我已经成功地减少了 ID 的长度，但是 ASP.Net 控件的经典名称存在问题。

例如， `<input type="hidden" name="ctl00$mainContentPlaceHolder$repeaterListView$ctl03$ProductListSearchPanel1$hiddenfieldProductId" id="hiddenfieldProductId" value="24052" />`

我可以使用哪些功能或方法来减少 ASP.Net 中的名称长度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:26:08.040

设置`ClientIdMode`服务器控件的属性通常会使 id 更具可读性和一致性。( `ClientIDMode="Static"`)

# ios - 尝试从视图控制器中关闭

> ID：15769238
> 
> 赞同：0
> 
> 时间：2013-04-02T16:24:00.183
> 
> 标签：ios, objective-c

我有两个班，在一等

```
- (IBAction)Login:(id)sender {
 SampleViewController2 *sampleView = [[[SampleViewController2 alloc] init];
   [self presentModalViewController:sampleView animated:YES];
} 
```

在二等。。

```
- (IBAction)Logout:(id)sender {
  [self dismissModalViewControllerAnimated:YES];
} 
```

它说警告尝试从视图控制器中解散..这里有什么问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:28:14.907

添加这个：

```
 if (![[self modalViewController] isBeingDismissed])
        [self dismissModalViewControllerAnimated:YES]; 
```

做一个简单的谷歌搜索，你说的问题很常见......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:26:29.897

如果您当前视图的模态视图正在被关闭，您可以在关闭之前检查它

```
if (![[self modalViewController] isBeingDismissed]){
        [self dismissModalViewControllerAnimated:YES];
} 
```

# angularjs - Angular.js - 将指令绑定到控制器中的变量

> ID：15769241
> 
> 赞同：0
> 
> 时间：2013-04-02T16:24:00.823
> 
> 标签：angularjs

我想将指令绑定到控制器中的变量，但无法从 Angular.js 文档中确定如何执行此操作（也无法搜索网络，查看 Egghead 视频）。

我有以下html：

```
<body ng-app="MyApp">

    <div ng-controller="triCtrl">

        <div jqslider pleaseBindTo="firstValue"></div>
        <br>
        <br>
        <br>
        <br>
        <div jqslider pleaseBindTo="secondValue"></div>

        <p>{{firstValue.v}}</p>
        <p>{{secondValue.v}}</p>
    </div>

</body> 
```

以及以下JS：

```
function triCtrl($scope) {
    $scope.firstValue = {"min":0, "max":100, "v":50};
    $scope.secondValue = {"min":0, "max":1000, "v":450};
}

var myAppModule = angular.module('MyApp', []);

myAppModule.directive('jqslider', function() {
    return {
        link:function(scope, element, attrs) {
            element.slider({
                range: false,
                min: scope.min,
                max: scope.max,
                value: scope.v,
                slide: function( event, ui ) {
                    scope.v = ui.value;
                    scope.$apply();
                }
            });
        }
    };
 }); 
```

我尝试了几种使用范围的方法：{ } 与 &、@、= 等，但我无法让它工作。有任何想法吗？我知道`pleaseBindTo`必须在某处捕获该属性，但我不知道在哪里或如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:57:37.413

一些观察：
1\. 您的指令是一个属性 2\. 您正在将值传递给属性本身。

也许您应该将指令更改为元素。重写代码如下：

```
<jqslider pleaseBindTo="firstValue"></jqslider> 
```

删除`div`'s 并将指令直接用作元素。接下来，在指令的定义中，编写以下内容：

```
myAppModule.directive('jqslider', function() {
    return {
        scope: {
            pleaseBindTo: "=pleaseBindTo"
        }
        link:function(scope, element, attrs) {
            element.slider({
                range: false,
                min: scope.pleaseBindTo.min,
                max: scope.pleaseBindTo.max,
                value: scope.pleaseBindTo.v,
                slide: function( event, ui ) {
                    scope.pleaseBindTo.v = ui.value;
                    scope.$apply();
                }
            });
        }
    };
 }); 
```

如果您仍希望将该指令保留为属性，您可以尝试`pleaseBindTo`使用该语句访问链接函数内部的值`attrs.pleaseBindTo`- 我不确定这一点，需要检查一下。

# asp.net - 将 GridView 参数传递给存储过程

> ID：15769242
> 
> 赞同：0
> 
> 时间：2013-04-02T16:24:02.700
> 
> 标签：asp.net, sql-server, stored-procedures

我正在处理一些我以前没有处理过的新概念，所以我可能过于复杂了。

我有一个从 5 表连接填充的 GridView。每列代表联接中的 5 个表之一。我想要实现的功能是这样的：

1.  用户选择自动生成的编辑链接按钮
2.  用户编辑行中的一个或多个单元格
3.  用户选择自动生成的更新链接按钮
4.  参数被传递给更新受影响的表的存储过程。

我对如何进行有一些不确定性。如果我直接查询更新，我需要从另一列传递 ID、更改的文本和外键 ID。所以我的问题是如何让 GridView UpdateCommand 将整行的数据传递给存储的 Proc？我目前已经用一个额外的参数设置了存储过程，我用它来确定需要更新哪个表，但由于它可能是多个表，我认为这是错误的方法。这是我的 GV、DSN 和 SP。

```
 <asp:GridView ID="GridView1"
    runat="server"
    AutoGenerateColumns="False" 
    DataKeyNames="id" DataSourceID="SqlDataSource1" 
    EnableModelValidation="True"
    AllowSorting="True" 
    EnableSortingAndPagingCallbacks="True"
    allowpaging="True"
    pagesize="26"
    ondatabound="GridView1_DataBound">    

        <Columns>
<asp:BoundField DataField="id" HeaderText="id" InsertVisible="True"
 ReadOnly="True" SortExpression="id" />
            <asp:BoundField DataField="Manufacturer" HeaderText="Manufacturer"   
SortExpression="Manufacturer" />
            <asp:BoundField DataField="PriModel" HeaderText="PriModel" 
SortExpression="PriModel" />
            <asp:BoundField DataField="SecModel" HeaderText="SecModel"  
SortExpression="SecModel" />
            <asp:BoundField DataField="Form" HeaderText="FormFactor" 
SortExpression="Form" />
            <asp:BoundField DataField="Active" HeaderText="Active" 
SortExpression="Active"/>
            <asp:CommandField ShowEditButton="True" />                
        </Columns>
       </asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" DataSourceMode="DataSet"
    ConnectionString="<%$ ConnectionStrings:inventory_v2ConnectionString %>" 
    SelectCommand="SELECT dbo.Models.ID,dbo.Models.Active, 
    dbo.Models_PriModels.PriModel, dbo.Models_SecModels.SecModel, 
    dbo.Models_OEMs.Manufacturer, dbo.Models_FormFactor.Form
    FROM dbo.Models INNER JOIN dbo.Models_FormFactor ON 
    dbo.Models.FormFactor = dbo.Models_FormFactor.ID INNER JOIN
    dbo.Models_OEMs ON dbo.Models.Manufacturer = dbo.Models_OEMs.ID INNER JOIN
    dbo.Models_PriModels ON dbo.Models.PriModel = dbo.Models_PriModels.ID AND   
    dbo.Models_OEMs.ID = dbo.Models_PriModels.Manufacturer INNER JOIN
    dbo.Models_SecModels ON dbo.Models.SecModel = dbo.Models_SecModels.ID AND 
    dbo.Models_PriModels.ID = dbo.Models_SecModels.PriModel ORDER BY dbo.Models.ID 
    DESC"
    UpdateCommand="Procedure_UpdateModelsTables" UpdateCommandType="StoredProcedure"
    OnUpdated="OnDSUpdatedHandler"   
    InsertCommand="">
</asp:SqlDataSource>

    CREATE PROCEDURE <Procedure_UpdateModelsTables> 

    <@Param int>,
    <@ManufacturerID int>,
    <@Manufacturer varchar(50)>,
    <@PriModelID int>,
    <@PriModel varchar(50)>,
    <@SecModelID int>,
    <@SecModel varchar(50)>,
    <@FormID int>,
    <@Form varchar(50)>,
    <@ModelsID int>,
    <@Active char(1)>,
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    -- Insert statements for procedure here
    --SELECT <@Param1, sysname, @p1>, <@Param2, sysname, @p2>
    IF @param = 1     
        exec SP_OEMTable @ManufacturerID,@Manufacturer;
    IF @param = 2
       exec SP_PriModelsTable @PriModelID,@PriModel;
    IF @param = 3     
        exec SP_SecModelsTable @SecModelID,@SecModel;
    IF @param = 4
       exec SP_FormsTable @FormID,@Form;
    IF @param = 5
       exec SP_ModelsTable @ModelsID,@Active;

END

CREATE PROCEDURE SP_OEMTable
    @ManufacturerID int,
    @Manufacturer varchar(50)
AS
BEGIN  
    UPDATE Models_OEMs SET Manufacturer = @Manufacturer WHERE ID = @ManufacturerID;
END

CREATE PROCEDURE SP_PriModelsTable
    @PriModelID int,
    @ManufacturerID int,
    @PriModel varchar(50)
AS
BEGIN  
    UPDATE Models_PriModels SET PriModel = @PriModel WHERE ID = @PriModelID AND Manufacturer = @ManufacturerID;
END
CREATE PROCEDURE SP_SecModelsTable
    @SecModelID int,
    @PriModelID int,
    @SecModel varchar(50)
AS
BEGIN  
    UPDATE Models_SecModels SET SecModel = @SecModel WHERE ID = @SecModelID AND PriModel = @PriModelID;
END
CREATE PROCEDURE SP_FormsTable
    @FormID int,
    @Form varchar(50)
AS
BEGIN  
    UPDATE Models_FormFactor SET Form = @Form WHERE ID = @FormID;
END
CREATE PROCEDURE SP_ModelsTable
    @ModelsID int,
    @Active char(1)
AS
BEGIN  
    UPDATE Models SET Active = @Active WHERE ID = @ModelsID;
END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:20:42.243

本教程是我用来学习此过程的内容：

[http://www.codeproject.com/Articles/24085/Insert-Update-Delete-with-Gridview-Simple-Way](http://www.codeproject.com/Articles/24085/Insert-Update-Delete-with-Gridview-Simple-Way)

# actionscript-3 - 从 XML 文件创建索引列表，然后按索引顺序显示所选内容

> ID：15769244
> 
> 赞同：1
> 
> 时间：2013-04-02T16:24:04.843
> 
> 标签：actionscript-3, xml-parsing

我有一个包含如下节点的 XML 文件，用于数百节课程。每节课在 XML 文件中有多个节点（最多 50 个）。

我想通读 XML，只选择具有请求的课程编号的课程节点，然后按照课程节点的索引编号顺序（i 的顺序）显示课程节点的数据。例如，如果我想使用第 1-3 课，则代码确定这些课以索引 0 开始并以索引 75 结束。一旦我有了课程范围的开始和结束索引，我就知道其余的了。或者，如果有更简单的方法来完成所描述的事情，我会尝试一下。

```
<Course>
    <i>
        <Lesson>1</Lesson>
        <Word1>tank</Word1>
        <Audio1>../audio/1s-1a.mp3</Audio1>
        <Word2>fish</Word2>
        <Audio2>../audio/1s-1b.mp3</Audio2>
    </i>
    <i>
        <Lesson>1</Lesson>
        <Word1>thought</Word1>
        <Audio1>../audio/1s-2a.mp3</Audio1>
        <Word2>action</Word2>
        <Audio2>../audio/1s-2b.mp3</Audio2>
    </i>
    <i>
        <Lesson>1</Lesson>
        <Word1>trace</Word1>
        <Audio1>../audio/1s-3a.mp3</Audio1>
        <Word2>follow</Word2>
        <Audio2>../audio/1s-3b.mp3</Audio2>
    </i>
</Course> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:03:31.013

试试这个，它对我有用：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

<fx:Script>
    <![CDATA[
        private var data:XML = 
            <Course>
                <i>
                    <Lesson>1</Lesson>
                    <Word1>tank</Word1>
                    <Audio1>../audio/1s-1a.mp3</Audio1>
                    <Word2>fish</Word2>
                    <Audio2>../audio/1s-1b.mp3</Audio2>
                </i>
                <i>
                    <Lesson>1</Lesson>
                    <Word1>thought</Word1>
                    <Audio1>../audio/1s-2a.mp3</Audio1>
                    <Word2>action</Word2>
                    <Audio2>../audio/1s-2b.mp3</Audio2>
                </i>
                <i>
                    <Lesson>3</Lesson>
                    <Word1>trace</Word1>
                    <Audio1>../audio/1s-3a.mp3</Audio1>
                    <Word2>follow</Word2>
                    <Audio2>../audio/1s-3b.mp3</Audio2>
                </i>
                <i>
                    <Lesson>5</Lesson>
                    <Word1>trace</Word1>
                    <Audio1>../audio/1s-3a.mp3</Audio1>
                    <Word2>follow</Word2>
                    <Audio2>../audio/1s-3b.mp3</Audio2>
                </i>
            </Course>

        protected function onBtnClick(event:MouseEvent):void
        {
            var xmlList:XMLList = data.i.(Lesson >= 1 && Lesson <= 3);
            //do something
        }

    ]]>
</fx:Script>

<s:Button label="Get Lessons" click="onBtnClick(event)" />
</s:Application> 
```

# python - Pythonic 打印列表项的方法

> ID：15769246
> 
> 赞同：135
> 
> 时间：2013-04-02T16:24:15.517
> 
> 标签：python, list, printing, list-comprehension

我想知道是否有比这更好的方法来打印 Python 列表中的所有对象：

```
myList = [Person("Foo"), Person("Bar")]
print("\n".join(map(str, myList)))
Foo
Bar 
```

我读这种方式不是很好：

```
myList = [Person("Foo"), Person("Bar")]
for p in myList:
    print(p) 
```

是不是有类似的东西：

```
print(p) for p in myList 
```

如果不是，我的问题是……为什么？如果我们可以用综合列表来做这种事情，为什么不作为一个列表之外的简单语句呢？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2013-04-02T16:27:43.107

假设您使用的是 Python 3.x：

```
print(*myList, sep='\n') 
```

您可以在 Python 2.x 上使用 获得相同的行为`from __future__ import print_function`，正如 mgilson 在评论中所指出的那样。

使用 Python 2.x 上的 print 语句，您将需要某种迭代，关于您关于`print(p) for p in myList`不工作的问题，您可以使用以下内容，它做同样的事情并且仍然是一行：

```
for p in myList: print p 
```

对于使用 的解决方案`'\n'.join()`，我更喜欢列表推导和生成器，`map()`因此我可能会使用以下内容：

```
print '\n'.join(str(p) for p in myList) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-02T16:28:06.767

我经常用这个 ：

```
#!/usr/bin/python

l = [1,2,3,7] 
print "".join([str(x) for x in l]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-07-08T15:05:49.607

`[print(a) for a in list]`尽管它会打印出所有项目，但最后会给出一堆 None 类型

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T16:35:00.710

对于 Python 2.*：

如果为 Person 类重载函数 __str__()，则可以省略带有 map(str, ...) 的部分。另一种方法是创建一个函数，就像你写的那样：

```
def write_list(lst):
    for item in lst:
        print str(item) 

...

write_list(MyList) 
```

在 Python 3.* 中有 print() 函数的参数**sep**。看看文档。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-18T01:14:39.270

扩展@lucasg 的答案（受到它收到的评论的启发）：

要获得***格式化的***列表输出，您可以执行以下操作：

```
l = [1,2,5]
print ", ".join('%02d'%x for x in l)

01, 02, 05 
```

现在`", "`提供分隔符（仅在项目之间，而不是在末尾），并且格式化字符串`'02d'`结合`%x`为每个项目提供格式化字符串`x`- 在这种情况下，格式化为具有两位数的整数，左侧填充零。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-08T12:22:17.890

为了显示每个内容，我使用：

```
mylist = ['foo', 'bar']
indexval = 0
for i in range(len(mylist)):     
    print(mylist[indexval])
    indexval += 1 
```

在函数中使用的示例：

```
def showAll(listname, startat):
   indexval = startat
   try:
      for i in range(len(mylist)):
         print(mylist[indexval])
         indexval = indexval + 1
   except IndexError:
      print('That index value you gave is out of range.') 
```

希望我有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-25T04:50:21.000

如果您只想查看列表中的内容，我认为这是最方便的：

```
myList = ['foo', 'bar']
print('myList is %s' % str(myList)) 
```

简单易读，可与格式字符串一起使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-29T15:01:30.600

我最近制作了一个密码生成器，虽然我对 python 非常陌生，但我将它作为一种在列表中显示所有项目的方式（进行小的编辑以满足您的需求......

```
 x = 0
    up = 0
    passwordText = ""
    password = []
    userInput = int(input("Enter how many characters you want your password to be: "))
    print("\n\n\n") # spacing

    while x <= (userInput - 1): #loops as many times as the user inputs above
            password.extend([choice(groups.characters)]) #adds random character from groups file that has all lower/uppercase letters and all numbers
            x = x+1 #adds 1 to x w/o using x ++1 as I get many errors w/ that
            passwordText = passwordText + password[up]
            up = up+1 # same as x increase

    print(passwordText) 
```

就像我说的，我对 Python 非常陌生，我敢肯定这对专家来说很笨拙，但我只是在这里举个例子

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-21T13:33:33.027

假设您可以打印列表 [1,2,3]，那么 Python3 中的一种简单方法是：

```
mylist=[1,2,3,'lorem','ipsum','dolor','sit','amet']

print(f"There are {len(mylist):d} items in this lorem list: {str(mylist):s}") 
```

运行它会产生以下输出：

> 此 lorem 列表中有 8 项：[1, 2, 3, 'lorem', 'ipsum', 'dolor', 'sit', 'amet']

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-16T07:15:58.687

OP的问题是：*是否存在类似以下的内容，如果不存在，那么为什么*

```
print(p) for p in myList # doesn't work, OP's intuition 
```

答案是，它**确实存在**，即：

```
[p for p in myList] #works perfectly 
```

基本上，`[]`用于列表理解并摆脱`print`避免打印`None`。要了解为什么`print`打印`None`看到[这个](https://stackoverflow.com/questions/18193205/list-comprehension-returning-values-plus-none-none-none-why)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-01T23:59:13.403

使用单行代码打印给定列表的每个元素

```
 for i in result: print(i) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-19T05:16:06.473

您还可以使用 len() 函数并确定列表的长度以打印元素，如下例所示：

```
sample_list = ['Python', 'is', 'Easy']

for i in range(0, len(sample_list)):

      print(sample_list[i]) 
```

参考：[https ://favtutor.com/blogs/print-list-python](https://favtutor.com/blogs/print-list-python)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-27T23:17:00.347

您可以尝试这样做：这也会将其打印为字符串

```
print(''.join([p for p in myList])) 
```

或者如果你想让它每次打印一些东西时都打印一个换行符

```
print(''.join([p+'\n' for p in myList])) 
```

# python - 如何使用 attr 在 Account 模块中隐藏 view.xml 字段组

> ID：15769249
> 
> 赞同：1
> 
> 时间：2013-04-02T16:24:33.167
> 
> 标签：python, xml, openerp

我正在使用 openerp 版本 7，需要从现有模块中隐藏以下部分。我尝试了很多方法，但仍然无法做到这一点。请建议我解决这个问题（帐户模块中的第 933 行）核心模块是否有任何限制或我缺少什么？

```
<group string="Refunds" attrs="{'invisible':[('active','=',True)]}">
<field name="account_paid_id" domain="[('type','&lt;&gt;','view'),('type','&lt;&gt;','consolidation')]"/>
<field name="account_analytic_paid_id" domain="[('type','&lt;&gt;','view'), ('company_id', '=', company_id), ('parent_id', '&lt;&gt;', False)]" groups="analytic.group_analytic_accounting"/>

<field name="ref_base_code_id"/>
<field name="ref_base_sign"/>
<field name="ref_tax_code_id"/>
<field name="ref_tax_sign"/>
</group> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:33:51.583

您的 attrs 语法是正确的，除了域中给出的值。您给出的 'true' 将被视为字符串而不是布尔值。

试试这个：

`<group string="Refunds" attrs="{'invisible':[('active','!=',True)]}">`

# naming - 命名类时“线程安全”的同义词？

> ID：15769251
> 
> 赞同：3
> 
> 时间：2013-04-02T16:24:38.940
> 
> 标签：naming

也许是一个愚蠢的问题，但是对于提供线程安全操作的类是否有任何通用的命名约定，除了`ThreadSafeFoo`？这是最明确的并且效果很好，但我想我会问是否有任何代表线程安全概念的单字同义词（“安全”，“锁定”？），或者是否有任何更短的常用词?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-10T14:51:00.507

我认为`Concurrent...`是一个不错的选择。它很好地描述了应该使用它的用例，而没有过多地谈论技术细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T16:19:20.167

SyncFoo 是避免类名过长的不错选择。

# javascript - 如何使用 JavaScript 添加图像

> ID：15769255
> 
> 赞同：0
> 
> 时间：2013-04-02T16:24:46.170
> 
> 标签：javascript, image

```
for (var i = 0; i < itemNumber.length; i++) {
    tableres += '< tr>';
    tableres += '<td>' + itemNumber[i] + '</td>';
    tableres += '<td>' + itemName[i] + '</td>';
    tableres += '<td>' + itemType[i] + '</td>';
    tableres += '<td>' + itemDesc[i] + '</td>';
    tableres += '<td>' + itemStock[i] + '</td>';
    tableres += '<td>' + itemPrice[i] + '</td>';
    tableres += '</tr>';
}
tableres += '< /table>'; 
```

在这段代码中，在 itemType 中有 5 种不同的类型。我想用我保存的图像替换这种类型。我该怎么做呢？

不同的类型是 - 电子产品、时装、体育用品、娱乐、玩具。

这些也是项目类型的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:29:21.787

您可以像这样添加图像：

```
tableres += '<td><img src="' + itemImage[i] + '"/></td>'; 
```

或者

```
tableres += '<td><img src="http://.../yourimage.jpg"/></td>'; 
```

根据我的猜测，这就是你想要的。

# asp.net-mvc - ASP.NET IEnumerable 视图

> ID：15769257
> 
> 赞同：0
> 
> 时间：2013-04-02T16:24:49.677
> 
> 标签：asp.net-mvc, ienumerable

我有一个`IEnumerable`返回备注列表的视图，但我也有一个菜单，其中包含一个链接，其中包含来自与备注链接的不同实体的学生编号，这很难解释，所以我将发布我的代码

```
<a href="@Url.Content("~/StudentGegevens/index/"+ Model.LRL_NR)" class="buttonStudentGegevens"><img src="../../images/ViewAccount.png"/> Student gegevens </a>
<a href="@Url.Content("~/StudentGegevens/MedischeInformatie/" +@Model.LRL_NR)" class="buttonMedischeInformatie"><img src="../../images/ViewMedischeInfo.png"/> Medische informatie </a>
<a href="@Url.Content("~/StudentGegevens/BijlageenCommentaar/" +@Model.LRL_NR)" class="buttonBijlagenCommentaar"><img src="../../images/ViewBijlage.png"/> Bijlage en commentaar </a> 
```

a`foreach(var item in Model)`行不通，因为我只希望菜单显示一次。

正如您在此处看到的，我将学生编号提供给链接`@Model.LRL_NR`，但是使用`IEnumerable`视图，您不能这样做`@Model.LRL_NR`，有什么方法可以使用`@Model.LRL_NR`视图`IEnumerable`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:27:46.963

遍历您的`IEnumerable`并为其中的每个项目写出链接：

```
@foreach(var item in Model)
{
     <a href="@Url.Content("~/StudentGegevens/index/"+ item.LRL_NR)" class="buttonStudentGegevens"><img src="../../images/ViewAccount.png"/> Student gegevens </a>
     <a href="@Url.Content("~/StudentGegevens/MedischeInformatie/" +@item.LRL_NR)" class="buttonMedischeInformatie"><img src="../../images/ViewMedischeInfo.png"/> Medische informatie </a>
     <a href="@Url.Content("~/StudentGegevens/BijlageenCommentaar/" +@item.LRL_NR)" class="buttonBijlagenCommentaar"><img src="../../images/ViewBijlage.png"/> Bijlage en commentaar </a>
} 
```

* * *

根据您的描述，您需要同时`LRL_NR`访问`REMARK`.

一种方法是拥有一个封装它们的类，并将其用作您的`Model`：

```
public class RemarksModel
{
   public int LRL_NR { get; set }
   public IEnumerable<PvBempty.REMARK> Remarks { get; set }
} 
```

这将允许您执行以下操作：

```
<a href="@Url.Content("~/StudentGegevens/index/"+ Model.LRL_NR)" class="buttonStudentGegevens"><img src="../../images/ViewAccount.png"/> Student gegevens </a>
<a href="@Url.Content("~/StudentGegevens/MedischeInformatie/" +@Model.LRL_NR)" class="buttonMedischeInformatie"><img src="../../images/ViewMedischeInfo.png"/> Medische informatie </a>
<a href="@Url.Content("~/StudentGegevens/BijlageenCommentaar/" +@Model.LRL_NR)" class="buttonBijlagenCommentaar"><img src="../../images/ViewBijlage.png"/> Bijlage en commentaar </a>

foreach(var item in Model.Remarks)
{
    // each item is a PvBempty.REMARK
} 
```

# jquery - jQuery - 将引导下拉类添加到现有的 UL LI 菜单结构

> ID：15769259
> 
> 赞同：2
> 
> 时间：2013-04-02T16:25:01.880
> 
> 标签：jquery, twitter-bootstrap, drop-down-menu, menu, traversal

我认为我的问题可以用 jQuery 解决。

**情况：**

我有一个特定的 CMS（photostore 脚本）。它有一个类别菜单项。类别可以由用户添加，并由管理员移动和删除。因此，结构和层次结构正在发生变化。输出导致级联 UL/LI。我不能也不会更改任何核心 PHP 文件，所以我猜想解析 UL/LI，并添加必要的引导 CSS 类是一个不错的选择。是否有意义？

**暗示：**

主要导航是 UL/LI 本身！此主导航包括 3 个 UL/LI 子菜单项。以下类别 UL 就是其中之一。它没有特殊等级，也没有ID！其他两个子菜单不应受到伤害/触摸。

核心示例类别菜单结构如下所示：

```
<ul>
<li><a href="/category/nature.html" title="Nature">Nature</a>
    <ul>
        <li><a href="/category/animals.html" title="Animals">Animals</a>
        <ul>
        <li><a href="/category/birds.html" title="Birds">Birds</a></li>
        <li><a href="/category/cats.html" title="Cats">Cats</a></li>
        </ul>
        </li>
    </ul>
</li>
<li><a href="/category/test.html" title="Test">Test</a></li>
<li><a href="/category/cities.html" title="Cities">Cities</a>
    <ul>
      <li><a href="/category/architecture.html" title="Architecture">Architecture</a</li>
      <li><a href="/category/firenze.html" title="Firenze">Firenze</a></li>
      <li><a href="/category/venezia.html" title="Venezia">Venezia</a></li>
    </ul>
</li>
<li><a href="/category/movies.html" title="Movies">Movies</a></li>
<li><a href="/category/sounds.html" title="Sounds">Sounds</a></li>
<li><a href="/category/illustrations.html" title="Illustrations">Illustrations</a>
    <ul>
<li><a href="/category/vector.html" title="Vector">Vector</a></li>
    </ul>
</li>
<li><a href="/category/misc.html" title="Misc">Misc</a></li>
</ul> 
```

**问题：**

是否可以在客户端应用 Bootstrap CSS 类？甚至关于动态结构？[http://twitter.github.com/bootstrap/components.html#dropdowns](http://twitter.github.com/bootstrap/components.html#dropdowns)

**想法1和任务：**

我只需要 FIRST UL 上的这个课程。在 FIRST 上添加它很重要，因为核心脚本在输出例程中使用单个 UL。

```
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu"> 
```

如果一个子类别 LI 包含一个新的 UL……它只需要：

```
<li class="dropdown-submenu"> 
```

似乎引导子菜单需要一个额外的链接（a-tag）。插入到 UL 子菜单之前。

引导示例结构如下所示：

```
<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
  ...
  <li class="dropdown-submenu">
    <a tabindex="-1" href="#">More options</a>
    <ul class="dropdown-menu">
      ...
    </ul>
  </li>
</ul> 
```

**想法2和任务：**

如果想法 1 过于复杂或不可预测。它应该使用更简单的解决方案。只有 1 级和下拉效果。因此，整个菜单显示为展开的树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T17:06:04.260

将引导菜单更改为示例 ul li 菜单

```
 $('ul li:has(ul)').addClass('dropdown');
 $('ul li:has(ul) ul').addClass('dropdown-menu');
 $('ul li a:has(ul)').addClass('dropdown-toggle');
 $(".dropdown a").attr("data-toggle", "dropdown");
 $(".dropdown-menu a").removeAttr("data-toggle", "dropdown"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T17:20:33.320

有人找到合适的解决方案吗？我正在尝试完成同样的事情，到目前为止，最后一个解决方案很接近，但它没有添加插入符号，我想知道是否有更好的解决方案。

这就是接近...

```
$('ul li:has(ul)').addClass('dropdown');
$('ul li:has(ul) ul').addClass('dropdown-menu');
$('ul li a:has(ul)').addClass('dropdown-toggle');
$(".dropdown a").attr("data-toggle", "dropdown");
$(".dropdown-menu a").removeAttr("data-toggle", "dropdown"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:30:41.600

您可以在客户端执行此操作而不会出现任何问题。例如：

```
$(function(){        

    $("ul").addClass("dropdown-menu");    

    var menu = $("ul").first()               
            .attr("role", "menu")
            .attr("aria-labelledby", "dropdownMenu")

    $("a").attr("tabindex", "-1");    

    $("li").has("ul").addClass("dropdown-submenu");   

    $("<div/>").addClass("dropdown clearfix").appendTo("body").append($(menu));

}); 
```

请参阅[jsFiddle上的工作示例](http://jsfiddle.net/aMY5g/3/ "jsFiddle")

# git - GIT_DIR 是如何工作的？确切地

> ID：15769263
> 
> 赞同：2
> 
> 时间：2013-04-02T16:25:14.193
> 
> 标签：git, github

这对我来说根本不清楚：http: [//git-scm.com/2010/04/11/environment.html](http://git-scm.com/2010/04/11/environment.html)

据我所知，我不能为个人回购做这件事。只是命令不够清楚...

据我所知，我可以这样做：

```
GIT_DIR="directory here" 
```

但是，这似乎是 Git repos 的 Git 文件夹的全局目录。是这样吗？

我如何才能仅为这个 repo 设置 Git 目录？

谢谢你的帮助。如果它太愚蠢了，我很抱歉，但这对我来说真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:37:36.427

如果您使用环境变量，则必须在使用之前为每个存储库设置它。您可以通过设置正确环境变量的特殊批处理文件启动您的 shell / 程序来做到这一点。像这样，它不会影响其他进程，因为只会为当前进程及其子进程设置环境变量。

没有永久的方法可以将某个 GIT_DIR 值分配给磁盘上的某个文件夹，因为没有 .git 目录，就无法存储此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-12T10:25:45.320

您可以通过将`.git`文件夹替换为`.git`包含`gitdir: <path>`. 该路径将指向另一个文件夹，该文件夹将充当您的存储库文件夹。

注意：`<path>`包含存储库文件夹的名称，而不仅仅是`.git`文件夹的路径。

您可以使用它来将所有存储库文件夹存储在具有唯一名称的单个位置。您仍然可以在文件所在位置执行 git 命令`.git`。

GIT_DIR、GIT_WORK_TREE 等只是环境变量，如果设置，则由 git 使用。如果您在全局范围内设置它们，它们将在全局范围内应用，并且可能会搞砸一切。如果在您这样做时设置了它们`git init`，它将使用适当的配置创建存储库，以便在未设置环境后继续工作。

# ruby - 遍历数组（Project Euler #23）

> ID：15769265
> 
> 赞同：1
> 
> 时间：2013-04-02T16:25:16.860
> 
> 标签：ruby, arrays, iteration

我有以下代码

```
#!/usr/bin/ruby -w
c = 1
d = Array.new(6965)  #6965 is the amount of abundant numbers below 28123 of which all numbers greater than that can be written as the sum of two abundant numbers
f = 0
while c < 28124      # no need to go beyond 28123 for this problem
  a = 0
  b = 1
  i = true           # this will be set to false if a number can be written as the sum of two abundant numbers
  while b <= c/2 + 1 # checks will go until they reach just over half of a number
    if c % b == 0    # checks for integer divisors
      a += b         # sums integer divisors
    end
    b += 1           # iterates to check for new divisor
  end
  if a > c           # checks to see if sum of divisors is greater than the original number
    d << c           # if true it is read into an array
  end
  d.each{|j|         # iterates through array
    d.each{|k|       # iterates through iterations to check all possible sums for number
                     # false is declared if a match is found. does ruby have and exit statement i could use here?
      i = false if c - j - k == 0
    }
  }
  c+=1               # number that we are checking is increased by one
                     # if a number cannot be found as the sum of two abundant number it is summed into f
  f += c if i == true
end
puts f 
```

对于以下代码，每当我尝试对`d`数组进行双重迭代时，都会出现以下错误：

> euler23:21:in block (2 levels) in ' from euler23:20:in block in ' from euler23:19:in ' `-': nil can't be coerced into Fixnum (TypeError)
> from euler23:21:in`
> `each'
> from euler23:20:in`
> `each'
> from euler23:19:in`

由于我对 Ruby 不熟悉，因此我为解决此问题所做的各种尝试都是徒劳的。我感觉有些库我需要包含，但我的研究没有提到任何库，我很茫然。这段代码旨在将所有不能写成两个丰富数字之和的数字相加；这是[欧拉计划的第二十三道题](http://projecteuler.net/problem=23)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:33:29.223

当你这样做时：

```
d = Array.new(6965) 
```

`nil`您创建一个包含 6965 个值的数组。

如果在第 21 行之前添加此测试代码：

```
p [c,j,k] 
```

然后你得到结果：

```
[1, nil, nil] 
```

这表明`j`和`k`都是`nil`值。您正在遍历数组中的空项目。

如果您将创建更改`d`为：

```
d = [] # an empty array, which in Ruby can change size whenever you want 
```

...然后您的代码运行。（我没有让它运行足够长的时间来查看它*是否正确运行*，但它至少运行了相当长一段时间没有错误。）

* * *

最后，一些随机风格的建议：

这段代码：

```
while b <= c/2 + 1
  if c % b == 0
    a += b
  end
  b += 1
end 
```

可以更简洁和更 Ruby-esque 重写为：

```
b.upto(c/2+1){ a+=b if c%b==0 } 
```

同样，这个循环：

```
c=1
while c < 28124
  # ...
  c += 1
end 
```

可以改写为：

```
1.upto(28123) do |c|
  # ...
end 
```

当您询问是否要跳出循环时，您可以根据需要使用[`break`or`next`](http://phrogz.net/ProgrammingRuby/tut_expressions.html#breakredoandnext)或[`throw`and`catch`](http://phrogz.net/ProgrammingRuby/tut_exceptions.html#catchandthrow)（在 Ruby 中不用于错误处理）来跳转到特定的嵌套循环级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T16:33:42.977

下面的代码有问题：

```
d.each{|j|                     
d.each{ |k|             
p c,j,k  #1,nil,nil
i = false if c - j - k == 0 }} 
```

因为：

```
1 - nil - nil
#TypeError: nil can't be coerced into Fixnum
#      from (irb):2:in `-'
#      from (irb):2
#     from C:/Ruby193/bin/irb:12:in `<main>' 
```

# ios - ios - 如何解析格式与以前略有不同的 JSON 数据

> ID：15769270
> 
> 赞同：-3
> 
> 时间：2013-04-02T16:25:27.750
> 
> 标签：ios, objective-c, cocoa-touch, nsdictionary

我曾经有来自服务器的 JSON 数据。它的格式如下：

```
(
        {
        comment = 1;
        "comment_id" = 41;
        "commenter_id" = 1;
        date = "2013-04-02";
        "first_name" = Alex;
        "plan_id" = 27;
        privacy = 0;
        "solution_part" = 1;
    }
) 
```

我这样解析它：

```
-(void)loadTitleStrings
{
    theArray = [NSMutableArray array];

    if(!standardUserDefaults)
        standardUserDefaults = [NSUserDefaults standardUserDefaults];

    NSLog(@"Arrayyy: %@", items_array);

    NSString *is_private = [standardUserDefaults objectForKey:@"is_private"];
    NSMutableArray *titleStrings = [NSMutableArray array];
    for(NSDictionary *dictionary in items_array)
    {
        //NOT SURE WHAT THIS IS FOR, SEEMS WEIRD
        NSString *tcid = [dictionary objectForKey:@"comment_id"];
        [theArray addObject:tcid];
        //NSLog(@"Arrayyy: %@", theArray);

        NSString *string;
        if(!is_private || [is_private isEqualToString:@"0"])
        {
            string = [NSString stringWithFormat:@"%@: %@", [dictionary objectForKey:@"first_name"], [dictionary objectForKey:@"comment"]];
        }
        else
        {
            string = [NSString stringWithFormat:@"%@", [dictionary objectForKey:@"comment"]];
        }

        [titleStrings addObject:string];
    }

    cellTitleArray = titleStrings;
} 
```

但是现在服务器发生了变化，数据的格式如下：

```
{
    data =     (
                {
            comment = 1;
            "comment_id" = 41;
            "commenter_id" = 1;
            date = "2013-04-02";
            "first_name" = Alex;
            "plan_id" = 27;
            privacy = 0;
            "solution_part" = 1;
        },
                {
            comment = 2;
            "comment_id" = 42;
            "commenter_id" = 1;
            date = "2013-04-02";
            "first_name" = Alex;
            "plan_id" = 27;
            privacy = 0;
            "solution_part" = 1;
        }
    ); 
```

并且解析它的原始代码崩溃了。我不确定格式差异到底是什么。我将如何更改原始代码以使用新的数据格式？

这是我得到的错误：

```
2013-04-02 12:31:28.798 Funding[70605:11303] -[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x72b9a10
2013-04-02 12:31:28.800 Funding[70605:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x72b9a10'
*** First throw call stack:
(0x1dd5012 0x126ce7e 0x1e604bd 0x1dc4bbc 0x1dc494e 0x14a52 0x1695b 0x17cb731 0x17da014 0x17ca7d5 0x1d7baf5 0x1d7af44 0x1d7ae1b 0x21687e3 0x2168668 0x1b0ffc 0x26dd 0x2605)
libc++abi.dylib: terminate called throwing an exception 
```

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:38:21.447

我就是这样做的。。

```
-(void)loadTitleStrings
{
    theArray = [NSMutableArray array];

    if(!standardUserDefaults)
        standardUserDefaults = [NSUserDefaults standardUserDefaults];

    NSLog(@"Arrayyy: %@", items_array);

    NSString *is_private = [standardUserDefaults objectForKey:@"is_private"];
    NSMutableArray *titleStrings = [NSMutableArray array];
    for(NSDictionary *dictionary in items_array)
    {
        NSArray *comments = [dictionary objectForKey:@"data"];
        for (NSDictionary * comment in comments)
        {
          NSString *tcid = [comment objectForKey:@"comment_id"];
           [theArray addObject:tcid];
           //NSLog(@"Arrayyy: %@", theArray);

          NSString *string;
          if(!is_private || [is_private isEqualToString:@"0"])
          {
              string = [NSString stringWithFormat:@"%@: %@", [comment objectForKey:@"first_name"], [dictionary objectForKey:@"comment"]];
        }
          else
        {
              string = [NSString stringWithFormat:@"%@", [comment objectForKey:@"comment"]];
        }

           [titleStrings addObject:string];
    }

    cellTitleArray = titleStrings;
} 
```

基本上，我会得到数据字典，然后在数据字典中，逐条评论迭代......

希望这会有所帮助...您可能需要根据您的情况进行更改，因为我不知道完整的故事...

# .net - 创建具有可变数量 Y 值的柱形图

> ID：15769271
> 
> 赞同：0
> 
> 时间：2013-04-02T16:25:28.033
> 
> 标签：.net, charts

我正在使用 asp.net 图表控件并进行了搜索，但无法找到创建类似于以下图表的解决方案（为 ascii 道歉）。

```
|
| +-+
| | | +-+
| +-+ | | +-+ | |
| | | +-+ | | | | | | +-+
| | | | | | | | | | | | |
+---------|---------|------------
    美国广播公司

```

问题是所有解决方案似乎都假设所有 X 值的 Y 系列数量相同。

我应该补充一点，我的数据与此类似：

```
制作 | 型号 | 评分
---------------------
福特 | 轿跑车 | 4.5
福特 | 货车 | 3.5
雪佛兰 | 舱口 | 2.5
克莱 | 货车 | 4.5
克莱 | 轿车 | 5.5
克莱 | 轿跑车 | 4.5

```

MAKE 将是 X 系列，而 MODEL/RATING 将是 X 系列中的 Y 系列。

有没有人有这种图表的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:35:08.583

.NET 有一组相当不错的图表控件。我用过它们。它可以处理这样的条形图。

[在此处下载它们](http://www.microsoft.com/en-us/download/details.aspx?id=14422)或在 Google 上下载 Microsoft Chart Controls

# objective-c - 指针和字典：复制还是存储？

> ID：15769273
> 
> 赞同：0
> 
> 时间：2013-04-02T16:25:33.580
> 
> 标签：objective-c, cocoa, pointers, memory, nsdictionary

似乎存储在字典中的对象是原始对象的副本！这么奇怪 ！！

在下面的代码中，

```
myData = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:myEntries, preambule, nil]
            forKeys:[NSArray arrayWithObjects:@"myEntries", @"preambule", nil]];

NSMutableArray * myEntriesDico = [myData objectForKey:@"myEntries"] ;
NSLog(@"!!!!!!!!! Address of myEntries (in the le dict) : %p", &myEntriesDico);
NSLog(@"!!!!!!!!! Address of myEntries : %p", &myEntries); 
```

我有两个不同的地址！

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:07:17.187

你只是打印了错误的东西。`myEntriesDico`和`myEntries`是两个*不同的*变量，它们的*值*相同 - 这些值是引用。

当您传递`&myEntries`给`NSLog`您时，您传递的是对变量的引用，`myEntries`而不是其中的值，对于`myEntriesDico`.

删除两个`&`'s，这将传递作为引用的值，`%p`并将正确格式化它们 - 两个输出应该是相同的。

# c# - 在方法执行代码时显示进度表的最佳方式？

> ID：15769276
> 
> 赞同：4
> 
> 时间：2013-04-02T16:25:42.783
> 
> 标签：c#, multithreading

我有一个 WinForm 加载方法，它需要很长时间才能收集一些数据以显示给用户。

在执行此方法时，我会显示一个带有“Loading”字样的大字体表单。

但是，有时会出现此错误并且“加载”进度表没有关闭，然后最终我的整个应用程序将退出：

**创建窗口句柄时出错。在 System.Windows.Forms.NativeWindow.CreateHandle（CreateParams cp）**

当我在加载方法中执行代码时，有没有更好的方法来显示我的进度/加载表单？

这是我的代码：

```
//I launch a thread here so that way the Progress_form will display to the user
//while the Load method is still executing code.  I can not use .ShowDialog here
//or it will block.

//Progress_form displays the "Loading" form    
Thread t = new Thread(new ThreadStart(Progress_form));  

t.SetApartmentState(System.Threading.ApartmentState.STA);
t.IsBackground = true;
t.Start();

//This is where all the code is that gets the data from the database.  This could
//take upwards of 20+ seconds.

//Now I want to close the form because I am at the end of the Load Method                         

try
{
   //abort the Progress_form thread (close the form)
   t.Abort();
   //t.Interrupt();
}
catch (Exception)
{
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T18:19:45.310

A[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)是在不锁定 UI 线程的情况下执行长时间运行操作的好方法。

使用以下代码启动 BackgroundWorker 并显示加载表单。

```
// Configure a BackgroundWorker to perform your long running operation.
BackgroundWorker bg = new BackgroundWorker()
bg.DoWork += new DoWorkEventHandler(bg_DoWork);
bg.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bg_RunWorkerCompleted);

// Start the worker.
bg.RunWorkerAsync();

// Display the loading form.
loadingForm = new loadingForm();
loadingForm.ShowDialog(); 
```

这将导致在后台线程上执行以下方法。请注意，您不能从此线程操作 UI。尝试这样做将导致异常。

```
private void bg_DoWork(object sender, DoWorkEventArgs e)
{
    // Perform your long running operation here.
    // If you need to pass results on to the next
    // stage you can do so by assigning a value
    // to e.Result.
} 
```

当长时间运行的操作完成时，该方法将在 UI 线程上调用。您现在可以安全地更新任何 UI 控件。在您的示例中，您可能希望关闭加载表单。

```
private void bg_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // Retrieve the result pass from bg_DoWork() if any.
    // Note, you may need to cast it to the desired data type.
    object result = e.Result;

    // Close the loading form.
    loadingForm.Close();

    // Update any other UI controls that may need to be updated.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-31T01:03:31.433

我已经在 .NET 4.0 上成功测试了这个。（WinForms）我有理由确定这将适用于 .NET 4.0+，并且应该是一个有用的代码片段，可以在大多数需要在进程结束时关闭表单的项目中重用。

```
private void SomeFormObject_Click(object sender, EventArgs e)
{
    myWait = new YourProgressForm();//YourProgressForm is a WinForm Object
    myProcess = new Thread(doStuffOnThread);
    myProcess.Start();
    myWait.ShowDialog(this);
}

private void doStuffOnThread()
{
    try
    {
        //....
        //What ever process you want to do here ....
        //....

        if (myWait.InvokeRequired) {
            myWait.BeginInvoke( (MethodInvoker) delegate() { closeWaitForm(); }  );
        }
        else
        {
            myWait.Close();//Fault tolerance this code should never be executed
        }
    }
    catch(Exception ex) {
        string exc = ex.Message;//Fault tolerance this code should never be executed
    }
}

private void closeWaitForm() {
    myWait.Close();
    MessageBox.Show("Your Process Is Complete");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:34:36.537

我会将您在加载方法中的代码放入一个线程中。在表单的某处设置进度条，并在收集数据的代码的关键阶段增加它 - 但请注意不要在线程本身中执行此操作，即不要在单独的线程中篡改 ui 元素，您将需要使用委托来调用它们。

# dom - 查找当前选择的 使用 XPath

> ID：15769282
> 
> 赞同：14
> 
> 时间：2013-04-02T16:26:06.853
> 
> 标签：dom, xpath

什么是正确的 XPath 语法来检查***当前***`option`是否选择了一个元素，或者只是从一个元素中获取所选元素，在用户和 JavaScript 可能已经交互的打开页面上？这甚至可以使用 XPath，还是它缺乏查看 DOM 属性的能力？*`option``select`*

 *我找不到任何关于此的文档，并且（推测性地）尝试过：

*   `//option[@selected=true]`
*   `//option[@selected="selected"]`
*   `//option[@selected]`

但这些都不起作用；它们根本不匹配任何元素。

*（以防万一，我已经尝试过使用`$x`Chrome 开发者控制台中的函数，以及使用`find_elements_by_xpath`Selenium for Python 中的方法。）*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-01T08:10:09.083

简短的回答：这是不可能的。

更长的答案：XPath 可以查看 HTML 属性，但不能查看 DOM 属性。选择 a 中的`<option>`元素`<select>`会更改to的`selected` *属性*，也会更改其父元素的属性，但不会影响两者的属性，因此对 XPath 是不可见的。`<option>``true``value``<select>`

要查找`<option>`具有`selected`属性集的元素（通常是页面作者确定最初选择哪个选项的方式），您可以使用`//option[@selected]`. 但这*并没有*找到*当前*选中的`<option>`；用户对选择所做的更改对 XPath 是不可见的。不能保证它甚至会找到*最初*选择的选项，因为页面作者可能没有将`selected`属性放在*任何*元素上，而是让浏览器默认选择第一个选项，或者让一些 JavaScript 通过`selected` *属性*选择初始选项.

[这里](https://stackoverflow.com/a/27642105/1709587)的多个[其他](https://stackoverflow.com/a/17132439/1709587) [答案](https://stackoverflow.com/a/17992485/1709587) [声称](https://stackoverflow.com/a/15769357/1709587)选择器之类的可以检测到用户在页面加载后所做的选择更改是完全错误的。 `//option[@selected]`

当然，如果您能够使用*CSS*选择器而不是 XPath 选择器，那么[`option:checked`](https://developer.mozilla.org/en-US/docs/Web/CSS/:checked)就可以完成这项工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-01T11:13:08.313

问题可能是`"`（双引号）。

`//select/option[@selected='selected']`- 将匹配所选选项，我正在成功使用它。

`//select/option[@selected='selected' and @value='specific value']`- 只有当它具有“特定值”时才会匹配选定的选项，我也在使用它。

如果您仍然遇到问题，这可能是一个完全不同的问题，也许没有选项节点。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T20:57:17.060

我认为我们可以使用@Mark 回答中的知识并加以说明。让我们找到一个具有所需属性的节点：

```
tree.xpath('//select/option[@selected]/text()')[0].strip() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-09-02T12:37:09.683

我尝试了**"//option[@selected='']**并且它对我有用。它能够突出显示页面对象模型中的选定选项。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-02T16:29:38.097

我会尝试`//option[@selected='true']`

IE`driver.findElements(By.xpath("//option[@selected='true']")).getText();`*

# php - 从 PHP 生成的 URL 中删除不需要的间隙

> ID：15769288
> 
> 赞同：0
> 
> 时间：2013-04-02T16:26:16.463
> 
> 标签：php, html

当单击 php 生成的链接时，此脚本会发送指令以从数据库中删除用户。

```
<?php

    $user = $_GET['user'];
    $zip = $_GET['zip'];  

    $url = "<p>http://domain.org/remove.php?do=delete";
    $url .= "&removeid=".$user."&rcrd=".$zip."</p>"; 
    echo $url;

?> 
```

但是生成的链接在“&removeid=”之后有一个不需要的空间，产生以下内容：

[http://domain.org/remove.php?do=delete&removeid=160294&rcrd=41233](http://domain.org/remove.php?do=delete&removeid=) _

因此，该链接不可点击。

建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:27:12.633

使用功能修剪 - [http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

`trim($user);`

# tfs - 尝试使用“获取”任务时 MSBuild 构建失败

> ID：15769293
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:26:32.947
> 
> 标签：tfs, msbuild, build-automation

我正在进行从 TFS2010 到 TFS2012 的测试升级。他们正在使用升级模板来运行大量自定义 MSBuild 任务，以自动化他们的构建和部署。MSBuild 项目最初是为 TFS2005 创建的，并在某些时候直接升级到 TFS2010。他们正在构建的解决方案主要针对 .NET 2.0，并且他们仍在使用 VS2005 进行大多数开发。

到目前为止，我已经安装了带有 Update 1 的 VS2005、VS2010 和 TFS2012（按此顺序），并将它们的 TFS2010 数据库升级到 TFS2012。构建控制器与应用层和数据库位于同一台机器上，只是因为这是一个“概念证明”升级，以识别在真正升级之前需要在构建过程中解决的任何问题。

当我运行他们的任何基于 MSBuild 的构建时，我收到以下错误：

> C:\Builds\18\Web\ES-INTEGRATION-WebTest\BuildType\TFSBuild.proj (75)：必须配置“Microsoft.TeamFoundation.Build.Client.IBuildDetail”类型的扩展才能运行此工作流。C:\Builds\18\Web\ES-INTEGRATION-WebTest\BuildType\TFSBuild.proj (75)：“获取”任务意外失败。
> 
> System.Activities.ValidationException：必须配置“Microsoft.TeamFoundation.Build.Client.IBuildDetail”类型的扩展才能运行此工作流。
> 
> 在 System.Activities.Hosting.WorkflowInstanceExtensionCollection..ctor（活动 workflowDefinition，WorkflowInstanceExtensionManager extensionManager）
> 
> 在 System.Activities.Hosting.WorkflowInstanceExtensionManager.CreateInstanceExtensions（活动工作流定义，WorkflowInstanceExtensionManager extensionManager）
> 
> 在 System.Activities.Hosting.WorkflowInstance.RegisterExtensionManager（WorkflowInstanceExtensionManager extensionManager）
> 
> 在 System.Activities.WorkflowApplication.EnsureInitialized()
> 
> 在 System.Activities.WorkflowApplication.RunInstance（WorkflowApplication 实例）
> 
> 在 System.Activities.WorkflowApplication.Invoke（活动活动，IDictionary`2 输入，WorkflowInstanceExtensionManager 扩展，TimeSpan 超时）
> 
> 在 System.Activities.WorkflowInvoker.Invoke（活动工作流，IDictionary`2 输入，TimeSpan 超时，WorkflowInstanceExtensionManager 扩展）
> 
> 在 Microsoft.TeamFoundation.Build.Tasks.WorkflowTask.ExecuteInternal()
> 
> 在 Microsoft.TeamFoundation.Build.Tasks.Task.Execute()
> 
> 在 Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
> 
> 在 Microsoft.Build.BackEnd.TaskBuilder.d__20.MoveNext()

我已经完成并将构建缩减为一个重现问题的非常小的案例。完整的.proj文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="DesktopBuild" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">

    <!-- Do not edit this -->
    <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets" />
    <ProjectExtensions>
        <!--  DESCRIPTION
     The description is associated with a build type. Edit the value for making changes.
    -->
        <Description>Builds and Deploys the BE site to the integration environment</Description>
        <!--  BUILD MACHINE
     Name of the machine which will be used to build the solutions selected.
    -->
        <BuildMachine>[redacted]</BuildMachine>
    </ProjectExtensions>
    <PropertyGroup>
        <!--  TEAM PROJECT
     The team project which will be built using this build type.
    -->
        <TeamProject>Web</TeamProject>
        <!--  BUILD DIRECTORY
     The directory on the build machine that will be used to build the
     selected solutions. The directory must be a local path on the build
     machine (e.g. c:\build).
    -->
        <BuildDirectoryPath>c:\build</BuildDirectoryPath>
        <!--  DROP LOCATION
      The location to drop (copy) the built binaries and the log files after
     the build is complete. This location has to be a valid UNC path of the
     form \\Server\Share. The build machine service account and application
     tier account need to have read write permission on this share.
    -->
        <DropLocation>\\[redacted]\BuildDrop</DropLocation>
        <!--  TESTING
     Set this flag to enable/disable running tests as a post build step.
    -->
        <RunTest>True</RunTest>
        <!--  WorkItemFieldValues
      Add/edit key value pairs to set values for fields in the work item created
      during the build process. Please make sure the field names are valid 
      for the work item type being used.
    -->
        <WorkItemFieldValues>Symptom=build break;Steps To Reproduce=Start the build using Team Build</WorkItemFieldValues>
        <!--  CODE ANALYSIS
       To change CodeAnalysis behavior edit this value. Valid values for this
       can be Default,Always or Never.

     Default - To perform code analysis as per the individual project settings
     Always  - To always perform code analysis irrespective of project settings
     Never   - To never perform code analysis irrespective of project settings
     -->
        <RunCodeAnalysis>Default</RunCodeAnalysis>
        <!--  UPDATE ASSOCIATED WORK ITEMS
     Set this flag to enable/disable updating associated workitems on a successful build
    -->
        <UpdateAssociatedWorkItems>false</UpdateAssociatedWorkItems>
        <!-- Title for the work item created on build failure -->
        <WorkItemTitle>Build failure in build:</WorkItemTitle>
        <!-- Description for the work item created on build failure -->
        <DescriptionText>This work item was created by Team Build on a build failure.</DescriptionText>
        <!-- Text pointing to log file location on build failure -->
        <BuildlogText>The build log file is at:</BuildlogText>
        <!-- Text pointing to error/warnings file location on build failure -->
        <ErrorWarningLogText>The errors/warnings log file is at:</ErrorWarningLogText>
    </PropertyGroup>

    <PropertyGroup>
        <SourceBranchPath>Main</SourceBranchPath>
    </PropertyGroup>

  <!-- Does some basic validation of the environment before the build starts -->
  <Target Name="PreBuildValidations" >
    <Get FileSpec="$/Web/$(SourceBranchPath)/BuildFiles/Tools/PSExec.exe" Workspace="$(WorkspaceName)" Recursive="false" Force="true" TeamFoundationServerUrl="$(TeamFoundationServerUrl)"/>
  </Target>

    <Target Name="BeforeGet">
        <CallTarget Targets="PreBuildValidations" />
    </Target>

</Project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:34:41.803

我想到了。显然，该`BuildUri`参数是`Get`任务所必需的。我补充说`BuildUri="$(BuildURI)"`，一切都很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T17:01:05.233

您的构建在 msbuild 脚本中的“[获取任务”上失败。](http://msdn.microsoft.com/en-us/library/aa721740%28v=vs.100%29.aspx)您只在 BeforeGet 目标中拉下一个 .exe 文件。为了构建项目，您需要一个项目文件。

看起来错误可能是因为您在 Get 任务中缺少参数或传入了无效参数。

当构建可以从构建定义工作区中拉出文件时，为什么需要 prebuildvalidation 步骤？

# php - 使用 PHP 根据 URI 更改 href

> ID：15769297
> 
> 赞同：3
> 
> 时间：2013-04-02T16:26:40.030
> 
> 标签：php, switch-statement, uri

我正在尝试根据访问者的当前页面使主菜单栏链接动态化。

我从

```
 $path = $_SERVER['REQUEST_URI']; 
```

当然，它会返回类似

*   /子文件夹/page.html
*   /subfolder1/subfolder2/page.html
*   /page.html

我需要抓住第一个'/'之后的任何东西。我试过搞乱爆炸，但我偶然发现如何处理结果数组。我也想写一个正则表达式 - 似乎是一个更优雅的解决方案。

然后我需要构建我的交换机。类似于以下内容：

```
switch ($path)
{
case '/subfolder0':
  $link = $root_url.'/subfolder0/anotherfolder/page.html';
  break;
case '/subfolder1':
  $link = $root_url.'/subfolder1/page.html';
  break;
default:
  $link = $root_url.'/subfolder2/page.html';
} 
```

最后，我应该使用 if...elseif 代替 switch 吗？

谢谢大家的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:31:56.790

在第一个 / 之后获取所有内容：

```
strstr($_SERVER['REQUEST_URI'], '/'); 
```

或者，使用正则表达式：

```
preg_match('#(/.*)#', $_SERVER['REQUEST_URI'], $matches);  // $matches[1] will be the path 
```

至于开关，我想说 if/elseif/else 在你的情况下是最不优雅的，开关还不错，但我个人会使用关联数组：

```
$mapping = array('/subfolder0' => $root_url.'/subfolder0/anotherfolder/page.html', 'etc' => 'etc');
$link = $mapping($path); 
```

这使您可以将映射保存在另一个文件中以进行组织，并通过将配置与实现分开来使其更易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:36:31.143

如果您对 URI 的所有部分都感兴趣，那么使用 explode 并不是一个坏主意，您应该查看[explode 的文档](http://php.net/explode)

它的用法是这样的：

```
$exploded = explode('/','/path/to/page.html');

echo $exploded[0]; // Will print out '' (empty string)
echo $exploded[1]; // Will print out 'path'
echo $exploded[2]; // Will print out 'to'
echo $exploded[3]; // Will print out 'page.html' 
```

但是据我了解，您希望将链接替换为第一个字符（始终为“/”）之后的任何内容，您可以像这样使用 substr：

```
// Get whatever is after the first character and put it into $path
$path = substr($_SERVER['REQUEST_URI'], 1); 
```

在您的情况下，不需要它，因为您能够预测字符串的开头有一个反斜杠。

我还建议使用[关联数组](http://php.net/manual/en/language.types.array.php)来替换 URL。

我会像这样实现整个事情（根据需要删除第一个反斜杠）：

```
// Define the URLs for replacement
$urls = array(
    'subfolder0' => '/subfolder0/anotherfolder/page.html',
    'subfolder1' => '/subfolder1/page.html'
);

// Get the request URI, trimming its first character (always '/')
$path = substr($_SERVER['REQUEST_URI'], 1);

// Set the link according to $urls associative array, or set
// the default URL if not found
$link = $urls[$path] or '/subfolder2/page.html'; 
```

或者使用explode，只取URI的第一部分：

```
// Get the parts of the request
$requestParts = explode('/', $_SERVER['REQUEST_URI']);

// Set the link according to $urls associative array, or set
// the default URL if not found
$link = $urls[$requestParts[1]] or '/subfolder2/page.html'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:38:38.713

在分析了OP的问题后，我认为他/她的意思是“第一个'/'之后的所有内容，但在第二个'/'之前。这是我得到的：

你可以试试这个正则表达式：

```
<?php

/*
 *  Regex: /((\w+?|\w+\.\w+?)(?!^\/))(?=\/.*$|$)/
 */

$paths = array(
    '/subfolder9/',
    '/subfolder/page.html',
    '/subfolder1/subfolder2/page.html',
    '/page.html'
);

foreach ($paths as $path) {
    preg_match("/((\w+?|\w+\.\w+?)(?!^\/))(?=\/.*$|$)/", $path, $matches);
    debug($matches);
}

// $matches[1] will contain the first group ( ) matched in the expression.
// or "subfolder<#>" or "<page>.<ext>"

// The loop results is as follows:
Array
(
    [0] => subfolder9
    [1] => subfolder9
    [2] => subfolder9
)

Array
(
    [0] => subfolder
    [1] => subfolder
    [2] => subfolder
)

Array
(
    [0] => subfolder1
    [1] => subfolder1
    [2] => subfolder1
)

Array
(
    [0] => page.html
    [1] => page.html
    [2] => page.html
)

?> 
```

注意：这仅适用于支持环视的正则表达式风格（零宽度正面和负面展望是示例中使用的。）

这是正则表达式的一个很好的备忘单，没有它我不会编写代码。

[Regular-Expressions.info](http://www.regular-expressions.info/) - （点击查看）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T16:54:03.690

你可以只使用[dirname](http://www.php.net/manual/en/function.dirname.php)函数来获得你想要的：

```
$path = dirname('/subfolder/page.html'); // returns '/subfolder'
$path = dirname('/subfolder1/subfolder2/page.html'); // returns '/subfolder1'
$path = dirname('page.html'); // returns '.' 
```

**编辑：**基于正则表达式的解决方案：

```
$path = preg_replace('#^(/[^/]*).*$#', '$1', '/subfolder/page.html' ) 
```

# git - git blame：合并后的正确作者

> ID：15769298
> 
> 赞同：17
> 
> 时间：2013-04-02T16:26:44.257
> 
> 标签：git, merge, git-merge, annotate, blame

GIT 合并引入了一个新的提交。这会导致“git blame”出现问题：合并的行似乎是由进行合并的开发人员提交的。

我可以理解这是*冲突更改*的情况（因为他解决了冲突）。但是有没有办法让不冲突的行不发生这种情况？“git责备”的一些选择？

如果没有办法，当您进行大量合并时，这基本上会使“git blame”几乎无用 - 而GIT鼓励大量合并。

SVN 是否存在非冲突合并的问题？我不这么认为，但我可能是错的，因为我在使用 SVN 时（可以理解地）避免了像瘟疫这样的分支。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T16:50:11.527

内部`git blame`用于`git rev-list`创建修订列表。并`git rev-list`接受该`--no-merges`选项。

所以你可以这样做：

```
git blame --no-merges <file> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-21T02:00:06.797

我刚刚尝试与 git 版本 2.3.8 合并，非合并冲突行不归于合并提交作者，它们归于原作者。也许自从您的 git 版本以来，这个问题已经得到解决。

# javascript - 如何通过 getUserMedia 在 Google Chrome 中访问麦克风？

> ID：15769301
> 
> 赞同：0
> 
> 时间：2013-04-02T16:27:04.203
> 
> 标签：javascript, html, google-chrome, microphone, getusermedia

我尝试了许多不同类型的 Javascript 代码，并且在 Windows 和 Chrome 的设置中更改了我的麦克风设置，但没有任何效果。我尝试过启用“Web 音频输入”，`chrome://flags`但根本没有任何效果。有没有人有什么建议？摄像头访问有效，我可以轻松地进行 HTML5 摄像头操作，但任何麦克风任务都不起作用。

以下 JSFiddle 在我的浏览器上不起作用：http: [//jsfiddle.net/BWYu9/3/](http://jsfiddle.net/BWYu9/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:38:22.080

在 Chrome 的 Canary 版本中试一试。我认为使用音频流执行此操作的能力非常新——尽管由于某种原因我找不到指向 Chromium 问题的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:02:34.003

我发现 Chrome 的 Google 搜索窗口中的麦克风会产生许多不同的问题。我发现最令人不安的主要问题是在 Java 更新之后我发现它无法正常工作，但我的所有音频设置似乎一切正常。我的麦克风水平在 Google 语音和视频聊天的声音属性方面很好。但是在 Google chrome 的搜索栏中，这件事仍然无法解决问题，我发现将集成麦克风阵列重置为默认值已被取消，在再次将其重置为默认值后，麦克风就可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:56:45.800

您可以尝试使用 Chrome Canary 或执行以下步骤：

1.  打开 google.com
2.  用麦克风说话
3.  如果答案是“无法识别语音，则可能是您的麦克风未被识别。（这将有助于确定问题的根源）

有关此问题，请参阅以下链接： [https ://code.google.com/p/chromium/issues/detail?id=226327](https://code.google.com/p/chromium/issues/detail?id=226327)

# java - 为什么我会收到不可转换的类型错误？

> ID：15769308
> 
> 赞同：6
> 
> 时间：2013-04-02T16:27:24.773
> 
> 标签：java, casting, type-conversion

如果我使用这个类：

```
public class BooleanTest {
    public static void main(String args[]) {
        final Object[] objarray = new Object[2];
        try {
            objarray[0] = "Hello World!";
            objarray[1] = false;
        } catch (NullPointerException e) {
        }
        boolean bool = (boolean) objarray[1];
    }
} 
```

它工作正常，我可以分配`boolean`没有问题。为什么我在向用户询问密码时不能做同样的事情？

```
final Object result[] = new Object[2];
try {
    java.awt.EventQueue.invokeAndWait(new Runnable() {
        @Override
        public void run() {
            JPanel panel = new JPanel();
            panel.setLayout(new GridLayout(3,0));
            JLabel label = new JLabel();

            label.setHorizontalAlignment(SwingConstants.LEADING);
            JTextField input = new JTextField();

            input.setHorizontalAlignment(SwingConstants.CENTER);
            JCheckBox checkbox = new JCheckBox("Pair with this device");
            checkbox.setHorizontalAlignment(SwingConstants.LEADING);
            panel.add(label);
            panel.add(input);
            panel.add(checkbox);
            if (wrong) {
                label.setText("Wrong password. Please enter the password from the other device:");
            } else {
                label.setText("Please enter the password from the other device:");
            }
            int response = JOptionPane.showConfirmDialog(SendGUI.this, panel, "Enter password", JOptionPane.OK_CANCEL_OPTION);
            if (response == JOptionPane.OK_OPTION) {
                result[0] = input.getText();
                result[1] = (boolean)checkbox.isSelected();
            } else {
                result[0] = null;
                result[1] = false;
            }
        }
    });
} catch (InterruptedException e) {
} catch (InvocationTargetException e) {
}
boolean pair = (boolean)result[1]; //inconvertible type, expected boolean found Object 
```

据我所见，我在这两种情况下都在做同样的事情，但是第一个例子编译得很好，而第二个例子没有。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T16:42:13.703

您正在使用不同的编译器选项。你一定是。这两段代码都在 Java 7 规则下编译；两者都不能在 Java 6 规则下编译。例如，获取您的*第一段*代码（您所说的为您编译的代码）：

```
c:\Users\Jon\Test>javac -source 1.7 BooleanTest.java

(No console output, i.e. no errors)

c:\Users\Jon\Test>javac -source 1.6 BooleanTest.java
warning: [options] bootstrap class path not set in conjunction with -source 1.6
BooleanTest.java:10: error: inconvertible types
        boolean bool = (boolean) objarray[1];
                                         ^
  required: boolean
  found:    Object
1 error
1 warning 
```

编辑：我相信更改在 JLS（铸造转换）的第 5.5 节中。

[Java 7 版本](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5)包括：

> 强制转换上下文允许使用以下之一：
> 
> *   ...
> *   缩小参考转换（第 5.1.6 节）可选地后跟取消装箱转换（第 5.1.8 节）或未经检查的转换（第 5.1.9 节）

[JLS 第 3 版](http://docs.oracle.com/javase/specs/jls/se5.0/html/conversions.html#5.5)（基本上是 Java 5 和 6）包括：

> 强制转换上下文允许使用以下之一：
> 
> *   ...
> *   缩小参考转换（第 5.1.6 节）可选地后跟未经检查的转换

请注意那里缺少“拆箱转换”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:32:28.030

改变：

```
result[1] = (boolean)checkbox.isSelected(); 
```

到：

```
result[1] = Boolean.valueOf(checkbox.isSelected()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:35:14.947

您遇到的问题与Java 1.6中的[自动装箱有关](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)

您将原始类型放入 Object 数组中。Java 不能将原始与对象混合，因此它将原始布尔值包装成布尔值。

所以你在做什么不能表示为：

`boolean result = (boolean) Boolean.TRUE;`

解决方案是：

1.  将 Object 数组替换为布尔数组。
2.  使用`Boolean.TRUE.equals(result[1])`；
3.  正如约翰在回答中指出的那样，切换到 Java 1.7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:31:18.677

尝试通过[Boolean](http://docs.oracle.com/javase/6/docs/api/java/lang/Boolean.html)更改布尔值，这是一个继承自 java.lang.Object 的类，并且您拥有 Boolean.TRUE 和 Boolean.FALSE

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:32:36.610

用这个

```
 Boolean pair = (Boolean)result[1]; 
```

# c# - 模态弹出扩展器丢失 ID

> ID：15769309
> 
> 赞同：0
> 
> 时间：2013-04-02T16:27:25.857
> 
> 标签：c#, asp.net

**编辑：**

添加了onload方法：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["usersName"] != null)
        {

            object a = Session["_id"];

            IDMaster = Convert.ToInt32(a);

            GridView1.Columns[10].Visible = true;
            GridView1.Columns[11].Visible = true;

        } 
```

我正在使用模态弹出扩展器来警告我的客户特定项目的项目数量超过一定数量。

我在这个扩展器中有两个按钮，允许用户确认他们是否希望在新库存到货时向他们发送电子邮件。

“是”按钮的触发器工作正常，但是当我将行 ID 发送到用于存储电子邮件详细信息的类的构造函数时，它始终设置为 0，即使变量是全局的。

这是我的代码以进一步解释该问题：

我的模式中的按钮将项目添加到购物车：

```
protected void LinkButton1_Click(object sender, EventArgs e)   
    {

        GridViewRow row = ((Button)sender).Parent.Parent as GridViewRow;
        TextBox t = (TextBox)row.FindControl("txtQuan");

        *********Gain the item row ID (this is what needs to be passed*******
        object ID = GridView1.DataKeys[row.RowIndex].Value;

        *********This ID should be passed but is setting to 0************
        rowID = Convert.ToInt32(ID);

        string qty = t.Text;

        int stockToAdd = Convert.ToInt32(qty);

        DBHandler add = new DBHandler(rowID);

        int qtyCheck = add.getStockQty();

        if (stockToAdd > qtyCheck)
        {

            Button2_ModalPopupExtender.Show();

        }

        else{

            SqlConnection con;
            con = add.openDB();

            con.Open();

            DBHandler idCheck = new DBHandler(rowID);
            int rows = idCheck.checkCartRows();

            if (rows > 0)
            {

               int qtyNow = idCheck.getCartQty();

                int updateStock = qtyNow + stockToAdd;

                idCheck.updateQty(rowID, updateStock);
                updatePanel();

            }

            else
            {

                idCheck.insertCart(qty);
                updatePanel();

            }
            add.close();

        }

        } 
```

以下代码显示了我的确认 onclick 按钮方法。请注意单击添加到购物车按钮时存储在上述方法中的 ID 'rowID'。此 rowID 设置为 0，而不是保存 rowID 值。

```
 protected void btnOK_Click(object sender, EventArgs e)
    {
       ***** rowID is setting to 0*******
        DBoutOfStockEmail insertNewEmailDetail = new DBoutOfStockEmail(IDMaster, rowID);

        DBMembershipHandler getEmail = new DBMembershipHandler(IDMaster);

        string emailToSend = getEmail.emailOfMember();

        insertNewEmailDetail.insertDetails(emailToSend);

    } 
```

**总结这个问题：为什么当我单击带有模态弹出扩展器的“是”按钮时，rowID 变量设置为“0”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:34:58.987

根据我最初的评论，我将把这个作为答案发布

> 这可能来自几件事..您是否正在检查或进行 IsPostBack 检查，您是否将值保存在会话变量中..？ViewState 是启用还是禁用..？你能展示一下你的 Page_Load 事件是什么样的吗

# livecode - 我希望仅对特定 dataGrid 列中的单元格应用背景颜色？

> ID：15769312
> 
> 赞同：2
> 
> 时间：2013-04-02T16:27:38.987
> 
> 标签：livecode

我在 LiveCode 电子邮件列表上问了这个问题。没有回应，所以我认为这不可能。我知道编辑启用交替行颜色的模板图形。这对我没有帮助。

本课与我发现的最接近，但它仅将覆盖颜色设置为空单元格。它还有一个不良影响，即网格中存在的任何数据都不再显示。

[http://lessons.runrev.com/s/lessons/m/datagrid/l/7327-how-do-i-override-the-default-behavior-for-rendering-data-to-a-cell](http://lessons.runrev.com/s/lessons/m/datagrid/l/7327-how-do-i-override-the-default-behavior-for-rendering-data-to-a-cell)

作为一个小实验，由于数据变得不可见（注意我在 WinXP 上），我尝试在我希望着色的列上放置一个不透明的图形。我将图形的墨迹设置为 AddMax 或 AddOver，看起来不错，但单元格中的文本消失了。然后我尝试将墨水设置为AddMin，它看起来仍然很好，但测试显示通过！！！！

所以，我认为这在视觉上可以正常工作，但是我怎样才能通过双击这个图形传递到下面的单元格（只允许在这个列中编辑单元格）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:52:28.773

是的，你可以这样做。

这个建议来自[http://www.bluemangolearning.com/的 Trevor DeVore](http://www.bluemangolearning.com/)

使用属性检查器创建自定义列模板。从那里您可以编辑列的行为以对该列的字段的背景颜色进行着色，或者只需编辑模板组中的字段以更改颜色。

但是，背景颜色只会显示在有数据的行中。

# mysql - 显示来自两个表的图表的组合结果

> ID：15769314
> 
> 赞同：3
> 
> 时间：2013-04-02T16:27:43.450
> 
> 标签：mysql, sql

我有两张桌子：

**投票**

```
ID |  YEARMONTH | VOTES
========================
1  | 201101     | 23
1  | 201102     | 12
1  | 201103     | 12
2  | 201101     | 15
3  | 201102     | 1
4  | 201102     | 17 
```

**讲座**

```
ID |  YEARMONTH | LECTURES
========================
1  | 201101     | 1
2  | 201101     | 2
3  | 201102     | 5 
```

假设一个 ID 在给定年月（讲座或投票）的每个表中都没有行，我需要列出结果，以便可以在图表中显示它们。

**如果在另一张表上缺少一年的结果，我需要显示零。**

所以结果应该是这样的：

```
ID |  YEARMONTH | VOTES | LECTURES
==================================
1  | 201101     | 23    | 1
1  | 201102     | 12    | 0
1  | 201103     | 12    | 0 
```

但是，当然，如果没有 LECTURES 的地方没有 VOTES，我需要在那里显示 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:31:00.873

您通常会为此使用 FULL OUTER JOIN，但 MySQL 不支持它们。

[但是，您可以使用 UNION 来模拟它，正如该问题](https://stackoverflow.com/questions/4796872/full-outer-join-in-mysql)的公认答案所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:32:41.030

一种选择是使用所有可能的 ID/YearMonth 组合创建子查询，然后`LEFT JOIN`在其他表上创建。如果对应的记录为空，则使用`COALESCE`返回 0：

```
SELECT t.ID, t.YearMonth, COALESCE(V.Votes,0) Votes, COALESCE(L.Lectures,0) Lectures
FROM (
    SELECT DISTINCT ID, YearMonth
    FROM Votes
    UNION 
    SELECT DISTINCT ID, YearMonth
    FROM Lectures 
    ) t
    LEFT JOIN Votes v on t.ID = v.ID AND t.YearMonth = v.YearMonth
    LEFT JOIN Lectures l on t.ID = l.ID AND t.YearMonth = l.YearMonth 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/04cb6/2)

# asp.net - 将标签与文本框垂直对齐

> ID：15769315
> 
> 赞同：1
> 
> 时间：2013-04-02T16:27:44.123
> 
> 标签：asp.net, textbox, alignment, label, webpage

我有一个 asp.net 网页 - 在其中我有一个 asp 文本框，在它的右边有一个 asp 标签。

标签的字体很小，因此高度比文本框小得多。我希望标签垂直对齐到文本框的中间。

当前标签与文本框的底部对齐。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T17:48:15.793

最好的方法总是使用“表格”，我总是这样做。有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:28:02.047

最简单的方法是使用 CSS 解决。

```
<asp:TextBox runat="server" ID="txtEveryHour" Width="30px" CssClass="textbox" /> 
<asp:Label ID="Label6" runat="server" text="Hours" CssClass="label" />

.textbox {border: 1px solid #828282; height: 21px; }
.label { height: 25px; line-height: 25px; } 
```

**结果**

![在此处输入图像描述](https://i.stack.imgur.com/WlIQM.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:30:35.193

你可以试试这个：

```
.myLabelClass {
 position: relative;
 top: 5px;
} 
```

# csv - 从 csv 结果中删除列错误

> ID：15769319
> 
> 赞同：0
> 
> 时间：2013-04-02T16:28:00.057
> 
> 标签：csv, python-2.7

试图从 csv 文件中删除除“fruit”之外的所有列。

我从本网站的另一篇文章中修改的脚本

```
import csv
with open("C:\\Test\\source.csv","rb") as source:
    rdr= csv.reader(source)
    with open("C:\\Test\\result.csv","wb") as result:
        wtr= csv.writer(result)
        for r in rdr:
            wtr.writerow(r[1]) 
```

源文件.csv

```
ID,fruit,number,location  
0,apple,2,3  
1,banana,1,1  
2,pear,2,3  
3,grape,0,1 
```

我得到的结果：

```
f,r,u,i,t  
a,p,p,l,e  
b,a,n,a,n,a  
p,e,a,r  
g,r,a,p,e 
```

期望的结果

```
fruit  
apple  
banana  
pear  
grape 
```

关于如何摆脱逗号的任何想法？我正在使用python 2.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:29:07.780

你需要给出`writerow()`一个清单：

```
wtr.writerow([r[1]]) 
```

`writerow()`需要一个*序列*，有序的东西。列表是序列，但字符串也是；可以对字符串进行索引、迭代等。通过传入，`r[1]`您只需给出`.writerow()`一系列单独的字符，每个字符都写为单独的列。

# c# - 替换添加时间的日期时间中的 timeValue

> ID：15769322
> 
> 赞同：0
> 
> 时间：2013-04-02T16:28:08.167
> 
> 标签：c#, .net, wpf, datetime, datetimepicker

在 WPF 应用程序中，我有一个`DateTimePicker`. 我保存一个`DateTime`变量，`DateTimePicker`一个时间的值。

```
dDate = DateTimePicker_Date.SelectedDate.Value.Add(TimePicker_Heure.Value.Value.TimeOfDay); 
```

当 dDate 为空时，此代码可以，但是，当我更新时`DateTimePicker`，`Time`添加了。

所以，如果我`DateTimePicker`是：2013 年 1 月 2 日，01:20。

一开始 ：

```
dDate = DateTimePicker_Date.SelectedDate.Value.Add(TimePicker_Heure.Value.Value.TimeOfDay); 
```

一切都很好，但是，如果我重新执行这一行：

```
dDate = DateTimePicker_Date.SelectedDate.Value.Add(TimePicker_Heure.Value.Value.TimeOfDay); 
```

dDate 值将是：1/2/2013 和 02:40。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:29:48.503

添加到 的`Date`属性`DateTime`：

```
DateTimePicker_Date.SelectedDate.Value.Date.Add(
                                        TimePicker_Heure.Value.Value.TimeOfDay); 
```

该`Date`物业有`00:00:00`时间。

# php - 具有集成安全 PHP 和 MS SQL Server 的 ODBC 连接

> ID：15769324
> 
> 赞同：2
> 
> 时间：2013-04-02T16:28:10.877
> 
> 标签：php, sql-server, connection-string, integrated-security

我需要有关 PHP 中的 ODBC 连接字符串的指导帮助，我用它来连接到 MS SQL Server。

```
 <?php
$server = 'UKEMO03'; 
    $database = 'mtpFetch';//the database to connect to
    $user = 'shoabg';// the user has PERMISSIONS AT THE DATABASE
    $pass = 'Shsx12x';//and here the user's password
    $dsn = "Driver={SQL Server};Server=$server;Database=$database;";
    $connect = odbc_connect($dsn, $user, $pass); 
    ?> 
```

上面的代码可以处理，但我要求不指定用户名和密码，并使用具有集成安全性的连接字符串。我在互联网上找不到任何东西，也无法更改连接字符串方法，因为我已经完成了大部分工作，并且通过调整另一种连接方法需要对代码进行大量更改，理论上它不是我的选择。

有没有一种方法可以创建集成安全连接以使用 ODBC 在 PHP 中连接 MS SQL Server

请帮助我不知道该怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-04T13:00:46.543

这会将您连接到 ODBC 主数据库（目录）。我没有成功连接到另一个数据库。ODBC SDN的配置中有默认数据库的选项，但没有效果（“将默认数据库更改为”）。

```
$this->dbHandle = odbc_connect("Driver={SQL Server};Server=localhost;Integrated Security=SSPI", '', ''); 
```

如果您使用 PHP ini，请确保您使用：

```
mssql.secure_connection=On 
```

在数据库服务器上，确保您有与您的登录用户名关联的 Windows 身份验证

# perl - 在 perl 中读取新行

> ID：15769336
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:28:43.513
> 
> 标签：perl, newline

我使用以下方法创建了一个文件：

```
open OUT, ">$outfile";
print OUT "$file_in;$system_in;$symbol_in;$price_in\n"; 
```

并稍后尝试从此文件中读取：

```
open DATAIN, "<", "$outfile" or die $!;
while(<DATAIN>)
{
    chomp($_);
    my @ld = split(/\;/,$_);
    my $system = $ld[1];
    my $file = $ld[0];
    ...

    print "HELLOOO?$file\t$system\..";
} 
```

但在第一次迭代中，它给了我这个错误：

```
Can't use an undefined value as an ARRAY reference 
```

问题实际上出在 \n 中，我用它在文件中创建了我之后尝试读取的新行。

我也尝试使用 \r ，错误不存在，但随后它全部读取为一行。

请问有什么帮助吗？提前非常感谢！

**完整代码：**

```
open OUT, ">$outfile";
print OUT "$file_in;$system_in;$symbol_in;$price_in\n";

open my $fh, "<", "$outfile" or die $!;
while(<$fh>)
{
    chomp;

    my @ld = split(/\;/);
    my $system = $ld[1];
    my $file = $ld[0];
    my $symbol = $ld[2];
my $price = $ld[3];

    my $key = $file . $symbol;

    print "HELLOOO?$file\t$system\t$symbol\t$price\n"
} 
```

错误：

```
Can't use an undefined value as an ARRAY reference at C:/Perl/lib/Math/BigInt/Calc.pm line 476, <fh> line1. 
```

错误是当它从文件中读取该行时。如果在我放置的初始文件中`/r`不是`/n`，我不会收到此错误，但所有文件都被读取为一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:37:46.820

您`<>`错误地调用了运算符。

您不应该使用文件句柄`DATA`。

您应该使用词法文件句柄。

您不需要传递`$_`给`chomp`或`split`。这就是`$_`存在的原因。

这就是你想要的方式。

```
open my $fh, '<', $outfile or die $!;
while(<$fh>) {
    chomp;
    my @ld = split(/\;/);
    ...
} 
```

# c++ - 如何在没有库的情况下有效地对双精度数组进行排序？

> ID：15769337
> 
> 赞同：-4
> 
> 时间：2013-04-02T16:28:43.593
> 
> 标签：c++, c, sorting

我正在寻找一种对双精度数组进行排序的有效方法。我知道冒泡排序和选择排序，它们似乎都不够快。我读到了快速排序，但我不明白它是如何工作的。有很多示例源代码，但它们都没有得到很好的评论。有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:43:14.590

在了解了 qsort 的工作原理后，我写了这篇文章。我确实认为 qsort 不是那么容易理解。它可能需要一些优化，并且与原始的 qsort 相比可能没有，但它就是这样。感谢那些试图帮助解决这个问题的人。

```
/*recursive sorting, throws smaller values to left,
bigger to right side, than recursively sorts the two sides.*/
void sort(double szam[], int eleje, int vege){
  if (vege > eleje + 1){            //if I have at least two numbers
    double kuszob = szam[eleje];    //compare values to this.
    int l = eleje + 1;              //biggest index that is on the left.
    int r = vege;                   //smallest index that is on the right side.
    while (l < r){                  //if I haven't processed everything.
      if (szam[l] <= kuszob) l++;   //good, this remains on the left.
      else
        swap(&szam[l], &szam[--r]); //swap it with the farthest value we haven't checked.
    }
    swap(&szam[--l], &szam[eleje]); //make sure we don't compare to this again, that could cause STACK OVERFLOW
    sort(szam, eleje, l);           //sort left side
    sort(szam, r, vege);            //sort right side
  }
  return;                           //if I have 1 number break recursion.
} 
```

# css - 指南针精灵 - 包含精灵时避免使用扩展

> ID：15769338
> 
> 赞同：4
> 
> 时间：2013-04-02T16:28:44.467
> 
> 标签：css, sass, compass-sass

我正在使用 Compass 生成我的精灵，它工作得很好，但我遇到了一个小烦恼。在另一个 @include 中时，我无法使用 @include 语句包含单个精灵，例如我常用的媒体查询混合。我的精灵 SCSS 看起来像这样：

```
.sp {
    background-repeat: no-repeat;
    overflow: hidden;
    line-height: 0;
    font-size: 0;
    text-indent: 100%;
    border: 0;
}

$sp-sprite-dimensions: true;
$sp-sprite-base-class: '.sp';
$sprite-layout: smart;
@import "sp/*.png";
@include all-sp-sprites; 
```

在另一个位置，我正在尝试这样做：

```
.logo {
    a {
        @include break($break1) {
            @include sp-sprite(logo-small);
        }
    }
} 
```

SCSS 可以使用嵌套的@include 语句，但它不允许在@include 语句中使用@extend 语句，而且显然精灵@include 正在幕后生成@extend 语句，这是我不想要的。有人知道解决这个问题的方法吗？

编辑：

@lolmaus 引起了我的注意，真正的问题是我在媒体查询中嵌套了一个 @extend。我想这是不允许的，有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T20:06:33.773

在媒体查询中使用 Compass 精灵是不可能的，至少按照文档中描述的方式。

有几个解决方法：

*   通过命令行[手动创建精灵；](https://github.com/chriseppstein/compass/issues/617#issuecomment-2746951)
*   使用[自定义 mixin](https://gist.github.com/dfadler/3105369)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T14:10:44.627

这是一个 SASS (SCSS) mixin，用于生成可与媒体查询一起使用的精灵声明块

**SCSS：**

```
// http://compass-style.org/reference/compass/helpers/sprites/
@mixin get-sprite($map, $sprite, $repeat: no-repeat, $height: true, $width: true) {

  //http://compass-style.org/reference/compass/helpers/sprites/#sprite-file
  $sprite-image: sprite-file($map, $sprite);

  // http://compass-style.org/reference/compass/helpers/sprites/#sprite-url
  $sprite-map: sprite-url($map);

  // http://compass-style.org/reference/compass/helpers/sprites/#sprite-position
  $sprite-position: sprite-position($map, $sprite);

  // Returns background
  background: $sprite-map $sprite-position $repeat;

  // http://compass-style.org/reference/compass/helpers/image-dimensions/
  // Checks to see if the user wants height returned
  @if $height == true {
    // Gets the height of the sprite-image
    $sprite-height: image-height($sprite-image);
    // Returns the height
    height: $sprite-height; }

  // http://compass-style.org/reference/compass/helpers/image-dimensions/
  // Checks to see if the user wants height returned
  @if $width == true {
    // Gets the width of the sprite-image
    $sprite-width: image-width($sprite-image);
    // Returns the width
    width: $sprite-width; }
} 
```

**用法：**

```
$icons: sprite-map("sprites/icons/*.png"); // define a sprite map 

// ... later

@media only screen and (max-width: 500px) {
    .video .overlay {
        @include get-sprite($icons, play-btn-large);
    }
} 
```

[来源：GitHubGist - brubrant / get-sprite.scss](https://gist.github.com/brubrant/3166895)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T16:24:45.490

以下代码描述了如何做到这一点

要点：[@media 查询中的@extend 指南针精灵](https://gist.github.com/shaharhesse/dc7c75979dfc1dd11e55 "@media 查询中的 @extend 指南针精灵")

```
/*
 * A simple way to extend Compass sprite classes within media queries.
 * Based on the knowledge gained here: http://www.sitepoint.com/cross-media-query-extend-sass/
 * I admit it's nowhere near as clever, but it does work :)
 */

/*
 * Set-up sprites for each media size
 */

// default
@import "icons-sm/*.png"
@include all-icons-sm-sprites

// corresponding sprites for larger devices
// notice that @import is within the @media query
// that's critical!

@media (min-width: $large)
  @import "icons-lg/*.png"
  @include all-icons-lg-sprites

/*
 * Now you can do something like this
 */

// an example mixin

@mixin social-links($size)
  $socials: facebook, twitter, youtube
  @each $social in $socials
    &.#{$social}
      @extend .icons-#{$size}-#{$social}

/*
 * Put to use
 */

// assuming you've got mark-up like this

<p class="social">
  <a href="#" class="facebook">facebook</a>
  <a href="#" class="twitter">twitter</a>
  <a href="#" class="youtube">youtube</a>
</p>

// you can do this                          
.social
  a
    @include social-links(sm)
    width: 25px
    height: 25px
    @media (min-width: $large)
      @include social-links(lg)
      width: 50px
      height: 50px 
```

# google-bigquery - 谷歌大查询；在外部选择中使用子选择结果；交叉连接

> ID：15769339
> 
> 赞同：1
> 
> 时间：2013-04-02T16:28:52.197
> 
> 标签：google-bigquery

我有一个查询结果到一个行表中，我需要在后续计算中得到这个结果。这是无效的简化示例（只是为了描述我想要实现的目标）：

```
SELECT amount / (SELECT SUM(amount) FROM [...]) FROM [...] 
```

我尝试了一些嵌套的子选择和连接（一个行表与另一个表的交叉连接），但没有找到任何可行的解决方案。有没有办法让它在 BigQuery 中工作？

谢谢，拉德克

编辑：

好的，我找到了解决方案：

```
select
  t1.x / t2.y as z
from
  (select 1 as k, amount as x from [...] limit 10) as t1
join
  (select 1 as k, sum(amount) as y from [...]) as t2
on
  t1.k = t2.k; 
```

但不确定这是否是最好的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T16:09:19.397

使用最近宣布的 ratio_to_report() 窗口函数：

```
 SELECT RATIO_TO_REPORT(amount) OVER() AS z
 FROM [...] 
```

`ratio_to_report`取`amount`, 并将其除以所有结果行`amount`s 的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:20:29.643

您找到的方式（本质上是使用虚拟键的交叉连接）是我所知道的执行此查询的最佳方式。我们考虑过添加一个显式的交叉连接运算符，以便更容易了解如何执行此操作，但是如果没有正确完成交叉连接可能会变得很昂贵（例如，如果在两个大表上完成可能会产生 n^2 个结果）。

# php - 使用 swiftmailer 包发送电子邮件的问题 - Symfony2.1

> ID：15769351
> 
> 赞同：1
> 
> 时间：2013-04-02T16:29:27.323
> 
> 标签：php, smtp, symfony-2.1, swiftmailer

尝试使用 swiftmailer 发送电子邮件，配置为：

```
transport: smtp
host:      smtp.emailsrvr.com
user:      *user*
password:  *password* 
```

我正在尝试使用 xampp 和 symfony 2.1 从 localhost 进行测试。目前我得到的错误是这样的：

“无法与主机 smtp.emailsrvr.com 建立连接 [连接尝试失败，因为连接方在一段时间后没有正确响应，或建立连接失败，因为连接的主机未能响应。#10060]”

我调用发送电子邮件的方法如下所示：

```
/**
 * Send an email
 * @param type $data
 * @return boolean
 */
protected function sendMail($data)
{
    $message = \Swift_Message::newInstance()
            ->setSubject(isset($data['subject']) ? $data['subject'] : 'No subject')
            ->setFrom($data['from'])
            ->setTo($data['to'])
            ->setBody(
                $this->render('myBundle:emails:'.$data['view'].'.txt.twig',
                $data['viewData']));
    $this->get('mailer')->send($message);

    return true;
} 
```

在我可以发送电子邮件之前，我可能需要在 XAMPP 中设置一些东西吗？我已经尝试了一些东西，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T17:52:22.707

这是 ISP 阻止某些端口的问题，我最终不得不将端口 587 用于 localhost，并且我们切换了服务器提供商，因为 Bluehost 阻止了 25 和 587。希望这对遇到同样问题的任何人都有帮助。

# linux - 使用 node.js 解析 word 文档中的表格

> ID：15769352
> 
> 赞同：4
> 
> 时间：2013-04-02T16:29:28.997
> 
> 标签：linux, node.js, powershell, ms-word

我正在尝试创建一个由 linux 服务器托管的**node.js** Web 应用程序。该应用程序必须读取并解析**Word 文档**中的表格。

我环顾四周，发现**Powershell**可以轻松[实现](https://stackoverflow.com/questions/13105142/read-word-document-doc-content-with-tables-etc)这一点。问题是**Powershell**是一种 MS 脚本语言，它的 Mac 端口（[pash](https://stackoverflow.com/questions/13105142/read-word-document-doc-content-with-tables-etc)）非常不稳定，每当我想执行这样简单的事情时就会[窒息：](https://github.com/Pash-Project/Pash/issues/65)

```
$wd = New-Object -ComObject Word.Application
$wd.Visible = $true
$doc = $wd.Documents.Open($filename)
$doc.Tables | ForEach-Object {
  $_.Cell($_.Rows.Count, $_.Columns.Count).Range.Text
} 
```

我已经研究过像[**Docsplit**](http://documentcloud.github.com/docsplit/)这样的其他解决方案，它太通用了（即，它将整个单词 doc 转换为纯文本，对于我的目的来说不够精细）。

有些人[建议](https://stackoverflow.com/a/12905370/766570)使用[saaspose](http://saaspose.com/) API，但它要花很多钱！我想我自己可以做到这一点。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:22:02.580

这是一个可以读/写 docx 文件的 python 模块：

[https://github.com/mikemaccana/python-docx](https://github.com/mikemaccana/python-docx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:46:36.040

如果您在 Linux 机器上进行部署，最好使用 Docsplit 然后解析输出文本，或者您可以尝试[Apache POI](http://poi.apache.org/hwpf/index.html)。

另一种选择是尝试在 Wine 上运行 MS COM API，但我不确定它是否兼容。

# ios - 如何从 UITextField 中获取 UITableViewCell 的索引？

> ID：15769354
> 
> 赞同：4
> 
> 时间：2013-04-02T16:29:31.580
> 
> 标签：ios, objective-c, xcode, ios6

我在表格内的自定义单元格中有一个 UITextField。我创建了新类**DataCell**，它是 UITableViewCell 的子类。在 DataCell 中，我为文本字段创建了出口，并且在实现文件中也有使用“编辑结束”的方法，并在那里操作文本字段值。

我现在想知道如何获取单元格的 rowIndex 或编号，因为每次单击 + 按钮时都会在表格上加载新的自定义单元格。如果我得到标签，无论我选择什么单元格，我总是会得到相同的标签号。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T16:34:51.107

传递给您的委托的文本字段是单元格的子视图`contentView`。

```
UITableViewCell *cell = (UITableViewCell*) textField.superview.superview; 
NSIndexPath *indexPath = [self.tableView indexPathForCell:cell]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:47:55.497

当您不确定文本字段和单元格之间的层次结构时，可以使用此逻辑。

```
UITableViewCell *cell = nil;
UIView *parentView = textField.superview;
while(parentView) {
    if([parentView isKindOfClass:[UITableViewCell class]]) {
         cell = parentView;
         break;
    }
    parentView = parentView.superview;
} 

if(cell)
 NSIndexPath *indexPath = [self.tableView indexPathForCell:cell]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T17:38:33.163

将标签添加到 tableView:cellForRowAtIndexPath: 方法中的文本字段。在此示例中，我有一个带有标签和文本字段的自定义单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    RDCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.label1.text = self.theData[indexPath.row];
    cell.textField.tag = indexPath.row;
    return cell;
} 
```

听起来您可能正在处理自定义单元格类中的编辑结束，但您可能想考虑在表格视图控制器中进行，因为这使您可以轻松访问模型，我认为您正在修改模型用户在文本字段中键入。如果你这样做，那么你应该将文本字段的委托属性连接到 IB 中的表视图控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:31:10.833

如果我们接受脆弱的答案，那么为了对对话做出新的贡献：

```
CGRect rectInTableView =
    [tableView convertRect:textField.bounds fromView:textField];

NSUInteger indexOfCellContainingTextField =
    (NSUInteger)(rectInTableView.y / tableView.rowHeight); 
```

使其脆弱的假设：（i）所有行的高度相同；(ii) 高度在表格视图上设置。如果您尚未实施`UITableViewDelegate -tableView:heightForRowAtIndexPath:`，那么这两个假设都将成立。您还利用了将正浮点数转换为整数向下舍入的事实。

我会争辩说，尽管还没有完全清除假设，但这比 Mundi 的解决方案要脆弱，因为它只对您直接控制的事情（即单元格大小）做出假设，而不是对您不控制的事情（即视图层次结构）做出假设UIKit 在内部使用来呈现表格视图）。

# performance - 当屏幕上有很多控件时出现严重的 FireMonkey 性能问题

> ID：15769356
> 
> 赞同：44
> 
> 时间：2013-04-02T16:29:34.320
> 
> 标签：performance, delphi, firemonkey

我们在办公室与 FireMonkey 合作已经有一段时间了。过了一段时间，我们注意到由于 GPU 加速，它并没有像 Embarcadero 告诉我们的那样快如闪电。

所以我们构建了一个基本的应用程序来测试 FireMonkey 的性能。基本上它是一个底部有一个面板（alBottom）的表单，用作状态栏和一个所有客户端（alClient）面板。底部的面板有一个进度条和一个动画。

我们向表单添加了一个方法，该方法可以释放所有客户端面板中存在的任何控件，并使用自定义类型的单元格和“鼠标悬停”样式来实现它，并使用有关信息的信息更新动画、进度条和表单的标题充实的进步。最重要的信息是所需的时间。

最后我们在表单的 OnResize 中添加了这样的方法，运行应用程序并最大化表单（1280x1024）。

XE2 的结果真的很慢。花了大约11秒。此外，由于面板在应用程序准备好接收用户输入之前完成，因此会有大约 10 秒的额外延迟（如冻结）。总共21秒。

XE3 的情况变得最糟糕。对于相同的操作，总共需要 25 秒（14 + 11 冻结）。

有传言称 XE4 将比 XE3 更糟糕。

考虑到完全相同的应用程序，使用 VCL 而不是 FireMonkey 并使用 SpeedButtons 来获得相同的“鼠标悬停效果”，这非常令人恐惧，只需 1.5 秒！所以问题显然存在于一些内部 FireMonkey 引擎问题。

我打开了 QC (#113795) 和 embarcadero 支持的（付费）票，但他们解决不了问题。

我真的不明白他们怎么能忽视这么严重的问题。对于我们的企业来说，它是一个表演者和破坏者。我们不能向我们的客户提供性能如此差的商业软件。早晚我们将被迫迁移到另一个平台（顺便说一句：使用 WPF 的相同代码 Delphi Prism 与 VCL 的代码一样需要 1.5 秒）。

如果有人对如何解决问题或尝试提高此测试性能有任何想法并想提供帮助，我将非常高兴。

先感谢您。

布鲁诺·弗拉蒂尼

该应用程序如下：

```
unit Performance01Main;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Rtti, System.Classes,
  System.Variants, FMX.Types, FMX.Controls, FMX.Forms, FMX.Dialogs, FMX.Objects;

const
  cstCellWidth = 45;
  cstCellHeight = 21;

type

  TCell = class(TStyledControl)
  private
    function GetText: String;
    procedure SetText(const Value: String);
    function GetIsFocusCell: Boolean;
  protected
    FSelected: Boolean;
    FMouseOver: Boolean;
    FText: TText;
    FValue: String;
    procedure ApplyStyle; override;
    procedure MouseDown(Button: TMouseButton; Shift: TShiftState; X, Y: Single); override;
    procedure DoMouseEnter; override;
    procedure DoMouseLeave; override;
    procedure ApplyTrigger(TriggerName: string);
  published
    property IsSelected: Boolean read FSelected;
    property IsFocusCell: Boolean read GetIsFocusCell;
    property IsMouseOver: Boolean read FMouseOver;
    property Text: String read GetText write SetText;
  end;

  TFormFireMonkey = class(TForm)
    StyleBook: TStyleBook;
    BottomPanel: TPanel;
    AniIndicator: TAniIndicator;
    ProgressBar: TProgressBar;
    CellPanel: TPanel;
    procedure FormResize(Sender: TObject);
    procedure FormActivate(Sender: TObject);
  protected
    FFocused: TCell;
    FEntered: Boolean;
  public
    procedure CreateCells;
  end;

var
  FormFireMonkey: TFormFireMonkey;

implementation

uses
  System.Diagnostics;

{$R *.fmx}

{ TCell }

procedure TCell.ApplyStyle;
begin
  inherited;
  ApplyTrigger('IsMouseOver');
  ApplyTrigger('IsFocusCell');
  ApplyTrigger('IsSelected');
  FText:= (FindStyleResource('Text') as TText);
  if (FText <> Nil) then
    FText.Text := FValue;
end;

procedure TCell.ApplyTrigger(TriggerName: string);
begin
  StartTriggerAnimation(Self, TriggerName);
  ApplyTriggerEffect(Self, TriggerName);
end;

procedure TCell.DoMouseEnter;
begin
  inherited;
  FMouseOver:= True;
  ApplyTrigger('IsMouseOver');
end;

procedure TCell.DoMouseLeave;
begin
  inherited;
  FMouseOver:= False;
  ApplyTrigger('IsMouseOver');
end;

function TCell.GetIsFocusCell: Boolean;
begin
  Result:= (Self = FormFireMonkey.FFocused);
end;

function TCell.GetText: String;
begin
  Result:= FValue;
end;

procedure TCell.MouseDown(Button: TMouseButton; Shift: TShiftState; X, Y: Single);
var
  OldFocused: TCell;
begin
  inherited;
  FSelected:= not(FSelected);
  OldFocused:= FormFireMonkey.FFocused;
  FormFireMonkey.FFocused:= Self;
  ApplyTrigger('IsFocusCell');
  ApplyTrigger('IsSelected');
  if (OldFocused <> Nil) then
    OldFocused.ApplyTrigger('IsFocusCell');
end;

procedure TCell.SetText(const Value: String);
begin
  FValue := Value;
  if Assigned(FText) then
    FText.Text:= Value;
end;

{ TForm1 }

procedure TFormFireMonkey.CreateCells;
var
  X, Y: Double;
  Row, Col: Integer;
  Cell: TCell;
  T: TTime;
  // Workaround suggested by Himself 1
  // Force update only after a certain amount of iterations
  // LP: Single;

  // Workaround suggested by Himself 2
  // Force update only after a certain amount of milliseconds
  // Used cross-platform TStopwatch as suggested by LU RD
  // Anyway the same logic was tested with TTime and GetTickCount
  // SW: TStopWatch;

begin
  T:= Time;
  Caption:= 'Creating cells...';

  {$REGION 'Issue 2 workaround: Update form size and background'}
  // Bruno Fratini:
  // Without (all) this code the form background and area is not updated till the
  // cells calculation is finished
  BeginUpdate;
  Invalidate;
  EndUpdate;
  // Workaround suggested by Philnext
  // replacing ProcessMessages with HandleMessage
  // Application.HandleMessage;
  Application.ProcessMessages;
  {$ENDREGION}

  // Bruno Fratini:
  // Update starting point step 1
  // Improving performance
  CellPanel.BeginUpdate;

  // Bruno Fratini:
  // Freeing the previous cells (if any)
  while (CellPanel.ControlsCount > 0) do
    CellPanel.Controls[0].Free;

  // Bruno Fratini:
  // Calculating how many rows and columns can contain the CellPanel
  Col:= Trunc(CellPanel.Width / cstCellWidth);
  if (Frac(CellPanel.Width / cstCellWidth) > 0) then
    Col:= Col + 1;
  Row:= Trunc(CellPanel.Height / cstCellHeight);
  if (Frac(CellPanel.Height / cstCellHeight) > 0) then
    Row:= Row + 1;

  // Bruno Fratini:
  // Loop variables initialization
  ProgressBar.Value:= 0;
  ProgressBar.Max:= Row * Col;
  AniIndicator.Enabled:= True;
  X:= 0;
  Col:= 0;

  // Workaround suggested by Himself 2
  // Force update only after a certain amount of milliseconds
  // Used cross-platform TStopwatch as suggested by LU RD
  // Anyway the same logic was tested with TTime and GetTickCount
  // SW:= TStopwatch.StartNew;

  // Workaround suggested by Himself 1
  // Force update only after a certain amount of iterations
  // LP:= 0;

  // Bruno Fratini:
  // Loop for fulfill the Width
  while (X < CellPanel.Width) do
  begin
    Y:= 0;
    Row:= 0;
    // Bruno Fratini:
    // Loop for fulfill the Height
    while (Y < CellPanel.Height) do
    begin
      // Bruno Fratini:
      // Cell creation and bounding into the CellPanel
      Cell:= TCell.Create(CellPanel);
      Cell.Position.X:= X;
      Cell.Position.Y:= Y;
      Cell.Width:= cstCellWidth;
      Cell.Height:= cstCellHeight;
      Cell.Parent:= CellPanel;

      // Bruno Fratini:
      // Assigning the style that gives something like Windows 7 effect
      // on mouse move into the cell
      Cell.StyleLookup:= 'CellStyle';

      // Bruno Fratini:
      // Updating loop variables and visual controls for feedback
      Y:= Y + cstCellHeight;
      Row:= Row + 1;
      ProgressBar.Value:= ProgressBar.Value + 1;
      // Workaround suggested by Himself 1
      // Force update only after a certain amount of iterations
      // if ((ProgressBar.Value - LP) >= 100) then

      // Workaround suggested by Himself 2
      // Force update only after a certain amount of milliseconds
      // Used cross-platform TStopwatch as suggested by LU RD
      // Anyway the same logic was tested with TTime and GetTickCount
      // if (SW.ElapsedMilliseconds >= 30) then

      // Workaround suggested by Philnext with Bruno Fratini's enhanchment
      // Skip forcing refresh when the form is not focused for the first time
      // This avoid the strange side effect of overlong delay on form open
      // if FEntered then
      begin
        Caption:= 'Elapsed time: ' + FormatDateTime('nn:ss:zzz', Time - T) +
                  ' (min:sec:msec) Cells: ' + IntToStr(Trunc(ProgressBar.Value));

        {$REGION 'Issue 4 workaround: Forcing progress and animation visual update'}
        // Bruno Fratini:
        // Without the ProcessMessages call both the ProgressBar and the
        // Animation controls are not updated so no feedback to the user is given
        // that is not acceptable. By the other side this introduces a further
        // huge delay on filling the grid to a not acceptable extent
        // (around 20 minutes on our machines between form maximization starts and
        // it arrives to a ready state)

        // Workaround suggested by Philnext
        // replacing ProcessMessages with HandleMessage
        // Application.HandleMessage;
        Application.ProcessMessages;
        {$ENDREGION}

        // Workaround suggested by Himself 1
        // Force update only after a certain amount of iterations
        // LP:= ProgressBar.Value;

        // Workaround suggested by Himself 2
        // Force update only after a certain amount of milliseconds
        // Used cross-platform TStopwatch as suggested by LU RD
        // Anyway the same logic was tested with TTime and GetTickCount
        // SW.Reset;
        // SW.Start;
      end;
    end;
    X:= X + cstCellWidth;
    Col:= Col + 1;
  end;

  // Bruno Fratini:
  // Update starting point step 2
  // Improving performance
  CellPanel.EndUpdate;

  AniIndicator.Enabled:= False;
  ProgressBar.Value:= ProgressBar.Max;
  Caption:= 'Elapsed time: ' + FormatDateTime('nn:ss:zzz', Time - T) +
            ' (min:sec:msec) Cells: ' + IntToStr(Trunc(ProgressBar.Value));

  // Bruno Fratini:
  // The following lines are required
  // otherwise the cells won't be properly paint after maximizing
  BeginUpdate;
  Invalidate;
  EndUpdate;
  // Workaround suggested by Philnext
  // replacing ProcessMessages with HandleMessage
  // Application.HandleMessage;
  Application.ProcessMessages;
end;

procedure TFormFireMonkey.FormActivate(Sender: TObject);
begin
  // Workaround suggested by Philnext with Bruno Fratini's enhanchment
  // Skip forcing refresh when the form is not focused for the first time
  // This avoid the strange side effect of overlong delay on form open
  FEntered:= True;
end;

procedure TFormFireMonkey.FormResize(Sender: TObject);
begin
  CreateCells;
end;

end. 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-06T07:10:55.140

我尝试了您的代码，在 XE3 上的 PC 上需要 00:10:439 才能用单元格填充屏幕。通过禁用这些行：

```
 //ProgressBar.Value:= ProgressBar.Value + 1;
  //Caption:= 'Elapsed time: ' + FormatDateTime('nn:ss:zzz', Time - T) +
  //          ' (min:sec:msec) Cells: ' + IntToStr(Trunc(ProgressBar.Value));
  ...
  //Application.ProcessMessages; 
```

这下降到 00:00:106 (!)。

更新视觉控件（例如 ProgressBar 或 Form.Caption）非常昂贵。如果您真的认为您需要这样做，请仅每 100 次迭代执行一次，或者更好的是，仅每 250 个处理器周期执行一次。

如果这对性能没有帮助，请在禁用这些行的情况下运行您的代码并更新问题。

此外，我添加了代码来测试重绘时间：

```
T:= Time;
// Bruno Fratini:
// The following lines are required
// otherwise the cells won't be properly paint after maximizing
//BeginUpdate;
Invalidate;
//EndUpdate;
Application.ProcessMessages;
Caption := Caption + ', Repaint time: '+FormatDateTime('nn:ss:zzz', Time - T); 
```

第一次运行时，创建所有控件需要 00:00:072，重绘需要 00:03:089。所以不是对象管理而是第一次重绘很慢。

第二次重绘要快得多。

由于评论中有讨论，以下是您如何进行进度更新：

```
var LastUpdateTime: cardinal;
begin
  LastUpdateTime := GetTickCount - 250;
  for i := 0 to WorkCount-1 do begin
    //...
    //Do a part of work here

    if GetTickCount-LastUpdateTime > 250 then begin
      ProgressBar.Position := i;
      Caption := IntToStr(i) + ' items done.';
      LastUpdateTime := GetTickCount;
      Application.ProcessMessages; //not always needed
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T10:38:41.503

我只有 XE2 并且代码并不完全相同，但是正如其他一些人所说的那样，pb 似乎在

> Application.ProcessMessages；

线。所以我建议用 realign ex 来“刷新”你的组件：

```
 ProgressBar.Value:= ProgressBar.Value + 1;
  Caption:= 'Elapsed time: ' + FormatDateTime('nn:ss:zzz', Time - T) +
            ' (min:sec:msec) Cells: ' + IntToStr(Trunc(ProgressBar.Value));

  // in comment : Application.ProcessMessages;
  // New lines : realign for all the components needed to be refreshes
  AniIndicator.Realign;
  ProgressBar.Realign; 
```

在我的 PC 上，使用原始代码在 0.150 秒而不是 3.7 秒内生成 210 个单元格屏幕，以便在您的环境中进行测试...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T18:21:33.503

你为什么要测试

> “重绘”、“InvalidateRect”、“Scene.EndUpdate”

我可以从您的代码中看到，最昂贵的操作是重新创建控件。你为什么要在 OnResize 事件中这样做（也许放一些按钮来重新创建控件）

仅此循环就可以占用 30% 的执行时间

```
 while (CellPanel.ControlsCount > 0) do
    CellPanel.Controls[0].Free; 
```

它应该是这样的：（避免在每次空闲后复制列表内存）

```
for i := CellPanel.ControlsCount - 1 downto 0 do
   CellPanel.Controls[i].Free; 
```

并且不要在循环中运行 ProcessMessages（或者至少在每 10 次迭代左右运行一次）

**使用 AQTime 来分析你的代码**（它会显示什么是这么长的）

# scala - 如何在元组列表中找到最大值？

> ID：15769366
> 
> 赞同：17
> 
> 时间：2013-04-02T16:30:13.410
> 
> 标签：scala

我有以下元组列表：

```
val arr = List(('a',10),('b',2),('c',3)) 
```

如何找到具有最大键或最大值的元组？

正确的答案应该是`(c, 3)`按字典顺序的最大键或`('a', 10)`最大值。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-02T16:32:32.250

十分简单：

```
scala> val list = List(('a',10),('b',2),('c',3))
list: List[(Char, Int)] = List((a,10), (b,2), (c,3))

scala> val maxByKey = list.maxBy(_._1)
maxByKey: (Char, Int) = (c,3)

scala> val maxByVal = list.maxBy(_._2)
maxByVal: (Char, Int) = (a,10) 
```

因此，基本上您可以提供任何用于查找最大值的`List[T]`函数`T => B`（`B`可以是任何有序类型，例如`Int`或示例）。`String`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-07T07:18:04.757

从 开始`Scala 2.13`，一个稍微安全的解决方案（处理空列表）将包括使用[`maxByOption`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#maxByOption%5BB%5D(f:A=%3EB)(implicitcmp:scala.math.Ordering%5BB%5D):Option%5BA%5D)/如果序列为空则`minByOption`返回：`None`

```
List(('a', 10),('b', 2),('c', 3)).maxByOption(_._1)
// Option[(Char, Int)] = Some((c,3))
List[(Char, Int)]().maxByOption(_._1)
// Option[(Char, Int)] = None 
```

这样，您还可以决定在列表为空时回退到默认值：

```
List[(Char, Int)]().maxByOption(_._1).getOrElse(('a', 1))
// (Char, Int) = (a,1) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-27T19:01:12.367

No doubt @[om-nom-nom](https://stackoverflow.com/users/298389/om-nom-nom) provided a concise, correct answer. However, it will throw an exception for an empty list.

**EDIT #2** Given my first edit, it's worthwhile to re-write my original, flawed answer:

```
def max[A](list: List[(A, Int)]): Option[Int] = list match  {
    case Nil => None
    case x :: xs => { val result = xs.foldLeft(x._2) { // acc = first item in list                                        
                              (acc, elem) => if(elem._2 > acc) elem._2 else acc 
                      }
                      Some(result)
                    }
} 
```

**Note**: I'm guessing that [scalaz](https://github.com/scalaz/scalaz) would let you use a more generic `Num`-like type instead of `Int`, but I haven't worked with it at all.

**Testing**

```
scala> val list = List(('a',10),('b',2),('c',3))
list: List[(Char, Int)] = List((a,10), (b,2), (c,3))

scala> max(list)
res5: Option[Int] = Some(10)

scala> val list: List[(String, Int)] = Nil
list: List[(String, Int)] = List()

scala> max(list)
res6: Option[Int] = None 
```

**EDIT** For picking a start value, I decided to edit my answer after talking with @[DustinGetz](https://stackoverflow.com/users/20003/dustin-getz).

Picking `Int.MinValue` might not be a good choice as it's dependent on the particular OS/system on which the app is running.

I would argue that the first element in the list should be the start value. However, there's a potential run-time exception if the list is empty.

Please take a look at this post for more discussion - [https://stackoverflow.com/a/23184020/409976](https://stackoverflow.com/a/23184020/409976).

# asp.net - 服务器端脚本不起作用

> ID：15769367
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:30:14.020
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

![在此处输入图像描述](https://i.stack.imgur.com/TOXLT.png)我是 MVC 新手，通过查看[此](http://www.youtube.com/watch?v=0-UdqWy9lVc&feature=youtu.be&hd=1)视频创建了一个示例应用程序。我在模型和控制器中创建了一个类。现在当我尝试通过视图访问 Class 属性时，我无法访问它，即使我正在写作在像 <%=Model.Id %> 这样的视图中，尖括号没有像服务器端脚本那样标记为黄色。我无法找到问题所在？

模型中的客户类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MvcCustomer.Models
{
    public class Customer
    {
        public int Id { get; set; }
        public string  Name { get; set; }
        public double Amount { get; set; }

    }
} 
```

控制器是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcCustomer.Models;

namespace MvcCustomer.Controllers
{
    public class LoadCustomerAndDisplayController : Controller
    {
        //
        // GET: /LoadCustomerAndDisplay/

        public ActionResult Index()
        {
            Customer customer = new Customer();
            customer.Name = "Devesh";
            customer.Amount = 22.9;
            customer.Id = 1;

            return View(customer);
        }

    }
} 
```

我的强类型视图（IntelliSense 也不起作用）是

```
@model MvcCustomer.Models.Customer

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
</head>
<body>
    <div>
        The Customer id is: <%= Model.Id %>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:51:18.263

首先，您使用的是 Razor 视图，而不是 ASP.NET 视图，因此语法`@Model.Id` *不是* `<%= Model.Id %>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:50:42.897

你的视图是用 Razor 编码的。

启动服务器端行为使用`@`，而不是`<%= ... %>`

看看这里。

[http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

# php - 运行单行 javascript 代码？

> ID：15769368
> 
> 赞同：1
> 
> 时间：2013-04-02T16:30:23.550
> 
> 标签：php, javascript, jquery

以下是我遇到的问题。我一直在使用 php，这一切都很好。我遇到的问题是 JavaScript。我的导师帮助我设置了一个 JavaScript 来在后台完成这项工作，所以这不是我的问题。我对 JavaScript 很陌生，甚至不知道在下面的部分中运行命令。JS代码已经用一个标签作为href实现了，所以我知道它可以工作，只是不知道如何在这里应用它。

```
 <?php           

        if (isset($_GET['item'])) { ** This way it is dependent on them having created a product and the add page redirecting them with all required info to pop up the edit form. **

?>   

            ** This is the section I have the problem with... No idea how to implement the following correctly. **

            <script>

                openEditItemForm(<?php echo $_GET['item'] ?>);

            </script>

 <?php

        } else{

            }

?> 
```

抱歉，如果这似乎是一个相当荒谬的问题，但正如我所说，我对 JS 的接触极少，甚至不知道如何在搜索中找到我正在寻找的东西。

编辑：好的，所以我有点离开这个开放式结束这是为了什么......这是一个后端部分，我的客户将在他的网站上添加项目。“openEditItemForm”是在别处定义的，并且在页面上的另一点起作用。这不是我的问题。我在这部分的问题实际上是在重新打开页面并且 url 包含项目标识时运行代码。在将代码更改为 json_encode 等推荐的代码后，它仍然没有完成它创建的功能。

另外，感谢 Rick Burgess 解释为什么要包含 json_encode，感谢 Brad 和 steveukx 提供更新的代码。

再说一次，我在这方面迷失了方向，所以我可能会再次寻找错误的交易。该代码应该打开一个对话框，其中包含一个编辑表单。以另一种形式在页面的其他地方工作（如上面在 < a > 标签的 href 部分中所述）。我期待不会发生的事情吗？

第二次编辑：好的，所以我忽略了我试图开始工作的功能已经工作了......下面的人提供的编码帮助很大。奇迹般有效。现在，一旦客户输入项目标识符，它就会调用对话框。惊人的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:33:17.977

如果`$_GET['item']`是字符串，则需要将其用引号括起来以防止导致 JavaScript 错误：

```
<script>
    openEditItemForm("<?php echo $_GET['item'] ?>");
</script> 
```

值得注意的是，这将是一个安全漏洞，您应该确保在将其打印到文档之前验证该值。

正如布拉德所评论的，应该应用于用户内容的最低限度是`json_encode`：

```
openEditItemForm("<?php echo json_encode($_GET['item']) ?>"); 
```

# php - 使用正则表达式将通配符值替换为变量

> ID：15769372
> 
> 赞同：1
> 
> 时间：2013-04-02T16:30:45.520
> 
> 标签：php, regex

我正在使用 php，需要找到下面定义的通配符字符串。然后我需要在通配符值的末尾附加一个字符串。

值为 "awn.Funnel.Widget.createForm("awn.co.uk", "--wildcard--here--")

这是我尝试过的：

```
if (preg_match('/awn.Funnel.Widget.createForm("awn.co.uk",[_a-zA-Z]+/', $competition_code, $matches)) { print_r ($matches); } 
```

但它给了我：

```
Warning: preg_match(): Compilation failed: missing ) at offset 52 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:57:16.110

你的正则表达式：

```
'/awn.Funnel.Widget.createForm("awn.co.uk",[_a-zA-Z]+/' 
```

应改写为：

```
'/awn\.Funnel\.Widget\.createForm\("awn\.co\.uk",[_a-zA-Z]+/' 
```

或者更好地使用**[preg_quote 函数](http://php.net/manual/en/function.preg-quote.php)**：

```
$regex = '/' . preg_quote('awn.Funnel.Widget.createForm("awn.co.uk', '/') 
         . '[_a-zA-Z]+/'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:55:33.263

preg_match 的第一个参数：

```
'/awn.Funnel.Widget.createForm("awn.co.uk",[_a-zA-Z]+/' 
```

是一个正则表达式模式。因此，字符 ' `(`' 被解释为捕获组的开始。由于这不是您想要的，因此您需要转义括号：

```
'/awn.Funnel.Widget.createForm\("awn.co.uk",[_a-zA-Z]+/' 
```

您还应该转义 ' `.`'，因为如果没有转义，它们将被解释为任何字符，而不是句号。

# linux - 文件编辑 - 命令行 unix

> ID：15769375
> 
> 赞同：0
> 
> 时间：2013-04-02T16:30:53.630
> 
> 标签：linux, file, unix, sed

我想从命令行编辑一个文件，因为在 vim 或其他编辑器中打开它需要很长时间（一个大文件）。我想在每行的开头添加一个字符串（'chr'），而不是用 # 注释掉。我正在使用的命令是这样的：

```
cat '/home/me/37.vcf' | sed s/^/chr/>'sp.vcf' 
```

但它会在每一行的开头添加一个 chr，在每一行的末尾添加一个 >。我不希望这两种情况发生。任何人都可以提供任何建议来改善我的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:35:02.710

要将替换仅应用于不以 a 开头的行`#`：

```
sed '/^[^#]/s/^/chr/' file > output 
```

注意：该命令`cat`用于连接文件，此处无用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:33:58.657

您可以在 sed 命令中出现语法错误。使用这个语法正确的 sed 命令：

```
sed -E 's/^([^#]|$)/chr/' /home/me/37.vcf > sp.vcf 
```

或者在 Linux 上：

```
sed -r 's/^([^#]|$)/chr/' /home/me/37.vcf > sp.vcf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:01:29.180

这可能对您有用（GNU sed）：

```
sed '/^\s*#/!s/^/chr/' file > new_file 
```

# c# - ASP.Net MVC 4 将 onSessionStart 重定向到一个动作

> ID：15769377
> 
> 赞同：0
> 
> 时间：2013-04-02T16:30:58.603
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

在我的 Global ASAX 中，我检测到一个条件，如果不满足，我转到**帐户**控制器上的**登录**操作。

 **```
 void Session_Start(object sender, EventArgs e)
    {
        if(thingy==null)
            Response.Redirect(Request.ApplicationPath + "/Account/Login");
    } 
```

有没有办法在这个阶段获取 Account 上的 Login 操作的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:10:15.297

试试这个：

```
void Session_Start(object sender, EventArgs e)
{
    if (Session.IsNewSession)
        Response.RedirectToRoute("LogOn", "User");
} 
```**

# jsp - Apache Sling 和小脚本

> ID：15769381
> 
> 赞同：3
> 
> 时间：2013-04-02T16:31:09.760
> 
> 标签：jsp, sling

我是 Apache Sling 的新手，我在所有示例中都看到它使用 JSP scriptlet 来呈现页面。

严重地？有没有一种方法可以使用普通的 java 代码，而不是被认为过时的技术，并且由于它所呈现的所有缺点而在 10 多年前被 Sun 自己劝阻？

或者也许有一个模糊的原因，即使用 scriptlet 是实现的最佳选择，而我不知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:04:05.003

如果你不喜欢 scriptlet，你也可以使用 taglibs 和 EL。如需快速概览，请参阅Sling SVN 存储库中[最新版本的 TLD 文件](http://svn.apache.org/viewvc/sling/trunk/bundles/scripting/jsp-taglib/src/main/resources/META-INF/sling.tld?view=markup)。您当然可以使用 Javascript、Groovy、Ruby 或 Sling 支持的任何其他脚本语言。

至于标签库，引用[SLING-2648: Add Resource Access Tags](https://issues.apache.org/jira/browse/SLING-2648)，您可以使用它们来执行以下操作

```
<c:set var="currentResource" value="${sling:getResource(resourceResolver,'/etc')}" />
<c:forEach var="child" items="${sling:listChildResources(currentResource)}">
    <c:if test="${child.name != 'jcr:content'}">
        <sling:getResource var="pageContent" path="${child.path}/jcr:content" />
        <sling:adapt adaptable="${pageContent}" adaptTo="org.apache.sling.api.resource.ValueMap" var="childProperties" />
        <sling:getProperty key="jcr:title" defaultValue="${child.name}" var="title" properties="${childProperties}" />
        <li><a href="${child.path}.html">Title: ${title}</a></li>
    </c:if>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:56:27.017

Sling 在如何处理请求和呈现页面方面留下了很大的自由。您可以仅使用 Java 代码，通过 OSGi 服务和请求处理 servlet，仅使用各种语言和模板系统的服务器端脚本，使用 Sling 的默认 JSON 呈现的完整客户端呈现，或这些技术的任意组合。

可能有许多“次优”的例子，但您可以选择适合您需要的请求处理和呈现方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-17T18:53:22.517

好的 Sling 开发人员不再使用 JSP。它只是在文档和示例中，因为它是长期以来的标准。

JSP，您正确地视为犯罪（或反模式），包含两件事：

*   介绍
*   商业逻辑

这些需要分成不同的文件。

**演示文稿**

使用“Sightly”，现在称为“HTL”。阅读这些：

*   [https://docs.adobe.com/docs/en/htl/docs/getting-started.htm](https://docs.adobe.com/docs/en/htl/docs/getting-started.htm)
*   [https://sling.apache.org/documentation/bundles/scripting/scripting-htl.html](https://sling.apache.org/documentation/bundles/scripting/scripting-htl.html)

Sightly 是一个现代的服务器端表示框架，它*正确地*将业务逻辑与表示声明分开，就像您熟悉的任何其他框架一样，例如 Handlebars 或 FreeMarker，甚至是 facelets。

诚然，它不是在 Sling 框架之外使用的语法，因此它不是可重用的知识，但你真的可以在大约一个小时内完全学会它，而且它优雅而流畅。

您可以使用任何其他您希望的演示逻辑，包括

*   车把
*   Groovy GSP
*   自由标记
*   百里香叶

但是 - 这些都不会“开箱即用”。您必须找到合适的“脚本引擎”并自己安装它们，或者自己编写脚本引擎以在 Sling 中启用这些。例如，流行的 Adob​​e AEM 产品Sling 附带了一个开箱即用的把手脚本引擎*。*如果您愿意做这项工作，那么您可以使用所有的演示框架。

**对于业务逻辑**

如果您使用 Sightly（又名 HTL）进行演示，您将使用“使用”api 来声明哪个脚本或类为该演示准备您的业务逻辑。在这里，您实际上只有 2 个“开箱即用”选项：

*   JavaScript（注意：服务器端！）
*   爪哇

目标是让这些语言中的一种提供“支持 bean”类型的业务逻辑，为您获取数据并准备好由您的演示文稿呈现。为了让您的直观演示声明它使用哪个“bean”或脚本，您在此处使用“使用 API”：

[https://docs.adobe.com/docs/en/htl/docs/use-api.html](https://docs.adobe.com/docs/en/htl/docs/use-api.html)

例子：

```
<div data-sly-use.bean="myscript.js">${bean.valueFromJavascript}</div> 
```

现在，您可以使用比这更多的语言，但您必须编写一些自定义代码以允许 Sling 通过 Use API 使用这些替代语言。例如，我现在正试图弄清楚如何通过 Use API 公开 groovy 或 Kotlin，以便我可以执行以下操作：

```
<div data-sly-use.bean="myscript.groovy">${bean.valueFromGroovy}</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:21:08.050

这似乎是 Apache Sling 和 Adob​​e CQ 等衍生产品（或现在所称的任何产品）的方式。我同意这会导致编写糟糕的 JSP 和难以维护软件。

正如 Robert Munteanu 所述，使用 JSTL 是创建更简洁代码的第一步。

在我目前的工作中，我编写了一个框架，它使用 Servlet 过滤器根据资源类型将 Java 类作为“控制器”注入到 JSP 中。访问其中的数据或功能是微不足道的，并且可以生成更干净的 JSP。

然后是 Cognifide 的[Slice 框架](https://github.com/Cognifide/Slice "切片框架")，看起来它解决了很多这样的问题，但我从来没有使用过它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-20T04:04:09.940

听起来您通常是 OSGi 的新手，因此您需要知道如何创建服务。如果你能做到这一点，你可以创建实现 javax.servlet.Servlet 的服务——

这个[LINK](http://sling.apache.org/documentation/the-sling-engine/servlets.html)很好地概述了您将如何塑造您的 servlet 组件。

正如 Bertrand 所提到的，Sling 为您提供了很多自由，因此您需要使用 Sling 来了解如何使用其资源和资源处理程序方法（在 OSGi 服务之上）来设计您的应用程序。

# php - 由于命令不同步，单击按钮时php表单将不会提交

> ID：15769383
> 
> 赞同：1
> 
> 时间：2013-04-02T16:31:15.190
> 
> 标签：php, forms, command, submit, sync

以下代码不会将表单提交到页面，即使它应该这样做。我的表单标签在文件夹层次结构中向上 2 层的页面中声明，我制作它以便它能够与层次结构中向下 2 层的代码进行通信。我的表单方法是post。此代码不会运行，因为命令不同步，我无法运行该命令。

```
public function getStudents()
    {
        $studentList = mysql_query("CALL GetLogin();")
        or die(mysql_error());
        $studentRows = mysql_num_rows($studentList);
        $counter = 1;

        while ($row = mysql_fetch_array($studentList))
        {
            echo '<tr>
            <td colspan="3"><center>
            <input type="checkbox" name="myselectedstudent' . $counter . '" value="' . $row["username"] . '">' . $row["username"] . '<br>
            </center></td>
            </tr>';
            $counter++;
        }
        echo '<tr>
        <td align="center" colspan="3"><br/><strong>
        <input type="submit" name="Submit" value="Confirm Student">
        </strong></td>
        </tr>';
        $counter = 0;

        while ( $counter <= $studentRows )
        {
            $counter++;
            if ( isset($_POST['myselectedstudent' . $counter . '']) )
            {
                $_SESSION["Student"] = $_POST['myselectedstudent' . $counter . ''];
                $this->getAllAssignedStudents( $_SESSION["Student"], $_SESSION["testName"], $_SESSION["user"] );

                if ( $counter == $studentRows )
                {
                    echo '<script language="javascript">
                    alert ( "Students Added!" );
                    </script>';
                    Header
                    ("Location: http://localhost/AndrewPHP/Greenboard/PresentationLayer/mainpageGUI.php?PageID=" . $_SESSION["accessLevel"] . "");
                }
            }
        }
    } 
```

# ruby - 带有块变量插值的 Ruby 发送方法

> ID：15769385
> 
> 赞同：5
> 
> 时间：2013-04-02T16:31:25.293
> 
> 标签：ruby, send, interpolation

我是一个新手，正在学习一些 Ruby 教程，并且对以下`send`方法的使用感到困惑。我可以看到 send 方法正在读取属性迭代器的值，但是 Ruby 文档指出 send 方法采用一个以冒号开头的方法。所以，我的困惑在于下面的 send 方法*如何*插入被迭代的属性变量。

```
module FormatAttributes
  def formats(*attributes)
    @format_attribute = attributes
  end

  def format_attributes
    @format_attributes
  end
end

module Formatter
  def display
    self.class.format_attributes.each do |attribute|
      puts "[#{attribute.to_s.upcase}] #{send(attribute)}"
    end
  end
end

class Resume
  extend FormatAttributes
  include Formatter
  attr_accessor :name, :phone_number, :email, :experience
  formats :name, :phone_number, :email, :experience
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:50:51.143

它不是“调用迭代器的值”，而是调用具有该名称的方法。在这种情况下，由于`attr_accessor`声明，这些方法映射到属性。

通称`object.send('method_name')`或`object.send(:method_name)`等同`object.method_name`于笼统的说法。同样，`send(:foo)`并且将在上下文中`foo`调用该方法。`foo`

由于`module`声明了一个稍后与 混合的方法，因此在模块中`include`调用`send`具有调用 Resume 类实例上的方法的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:45:50.587

[`send Documentation`](http://ruby-doc.org/core-2.0/Object.html#method-i-send)

这是您的代码的简化版本，可以告诉您发生了什么：

```
def show
 p "hi"
end

x = "show"
y = :show

"#{send(y)}"   #=> "hi"
"#{send(x)}"   #=> "hi" 
```

# debian - Debian 挤压和设置 ulimit

> ID：15769387
> 
> 赞同：4
> 
> 时间：2013-04-02T16:31:38.550
> 
> 标签：debian, ulimit

全部

我想将核心文件大小永久设置为无限制。阅读它，建议是修改 /etc/security/limits.conf。我已经通过以下行做到了：

*   软核10000根硬核10000

更改后我重新启动并发出 ulimit -a 并且核心仍然设置为 0。无法理解为什么设置不起作用。什么可以覆盖它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T18:28:49.970

试试这个：

```
*               soft    nofile          10000
*               hard    nofile          10000 
```

并将这一行添加到`.profile`文件中，fe for `root`in`/root/.profile`

```
ulimit -c 10000 
```

或适用于`/etc/profile`.

记住：对于远程用户：`/etc/pam.d/sshd`对于 su`/etc/pam.d/su`

```
session    required     /lib/security/pam_limits.so 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T12:47:40.610

使用这个命令

```
ulimit -SHn 65535 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-10T18:41:41.257

如果你在做 docker-compose up 并且有问题

启动 Apache httpd web server: apache2/usr/sbin/apache2ctl: 99: ulimit: error setting limit (Operation not allowed)

请以 sudo service docker restart 重新启动您的 docker 服务

# vb.net - 尝试 - 多线程 - 在 VB.net Windows 窗体中

> ID：15769389
> 
> 赞同：1
> 
> 时间：2013-04-02T16:31:50.993
> 
> 标签：vb.net, multithreading, delegates, invoke

一段时间以来，我一直在使用此代码：

```
Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    Dim t2 As New Threading.Thread(AddressOf SetLabelText2)
    t2.IsBackground = True
    t2.Start()
End Sub

Delegate Sub UpdateDelegate()

Private Sub SetLabelText2()
    If InvokeRequired Then
        Invoke(New UpdateDelegate(AddressOf SetLabelText2))
    Else
        For i = 1 To 110
            Label2.Text = Text
            Threading.Thread.Sleep(200)
        Next
    End If
End Sub 
```

这段代码运行良好，除了它不是多线程我的应用程序并将其置于无响应状态。

我的问题很简单，1.如何解决这个问题（我将使用的应用程序将有几个函数调用

```
If InvokeRequired Then

    Invoke(New UpdateDelegate(AddressOf SetLabelText2))

Else

   FunctionCall1()

   FunctionCall2()

   FunctionCall3()

End If 
```

他们都工作并掌握了我的 UI 线程。

我一直在寻找很长一段时间，任何帮助表示赞赏。

-Edit- 在线程中从表单中读取信息时也遇到问题... :) 感谢您迄今为止的帮助

编辑 - -

好的，我已经改变了我的代码看起来像

```
Delegate Sub setForm1PrgBarPerformStepdelegate(s As Integer) 
    Private Sub setForm1PrgBarPerformStep(ByVal s As Integer)
        If Form1.ProgressBar1.InvokeRequired Then
            Dim d As New setForm1lblAlltextdelegate(AddressOf setForm1PrgBarPerformStep)
            Form1.Invoke(d, New Object() {s})
        Else
            If s = 1 Then
            Form1.ProgressBar1.PerformStep()
        Else

        End If
    End If
End Sub 
```

这段代码是用 setForm1PrgBarPerformStep(1) ' 或 0 调用的

Wich 由我的线程调用，（它可以工作（线程部分 - 女巫很棒顺便说一句），具有不执行执行步骤的小缺陷 - 或我在 Private Sub setForm1PrgBarPerformStep() 中编码的任何其他 UI 更改

这有充分的理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T17:20:02.053

当您的线程第一次点击 SetLabelText2 时，InvokeRequired 将为真，所以

```
Invoke(New UpdateDelegate(AddressOf SetLabelText2)) 
```

将被调用。

现在，在 Invoke 调用中实际发生的是您的线程将把委托作为任务传递给 UI 线程。因此，对 SetLabelText2 的第二次递归调用将由 UI 线程完成，而您的线程只是等待 UI 线程从 SetLabelText2 返回。因此，您的 UI 会阻塞，因为 UI 线程将处于循环中，设置标签文本并处于睡眠状态，并且没有机会处理消息/事件。

作为一种解决方案，您可以在循环中调用 Application.DoEvents() 而不是 Sleep(200)，但这可能会产生副作用，因此不建议这样做。

更好的解决方案是将 Invoke 限制为严格必要的 UI 调用，在您的示例中：

```
Private Sub SetLabelText2()
    For i = 1 To 110
        'Label2.Text = Text
        Invoke(MyDelegateThatDoesNothingButSettingTheLabelText)
        Threading.Thread.Sleep(200)
    Next
End Sub 
```

现在睡眠将由您的线程完成，并且您的 UI 保持响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:59:57.470

您的第一个问题是由于调用，SetLabelText2 中的 Sleep 在 UI 线程上而不是在后台线程上被调用。这将导致 UI 显示为锁定状态。新线程仅用于启动 SetLabel，但工作几乎立即返回给调用线程。相反，您需要调用循环内的后台任务，并为每次标签更新委派回 UI。

其次，您不应该在此示例中创建显式线程。从 .Net 4 开始，您应该改用 Tasks。要像使用 Thread.Sleep 一样模拟长时间运行的操作，请使用 Task.Delay(200)，然后 Await 或显式调用 .Wait。请记住在后台线程上安排延迟并委托回 UI 更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:30:16.267

好的，感谢本节中的评论和一些研究的帮助，我终于弄明白了。

我有点被运行 UI 线程欺骗了一点，只是为了在循环或短时间内完成繁重的工作而爆发，这里有一些代码 - 希望这对其他人有帮助。

```
Public t2 As Threading.Thread ' Instantiating the Thread. I do this in my Modules
                              ' You will want to do this for all threads needed.

'You would then go through your program like normal until you hit a heavy process eating point,
'For me it was when i was converting images and sending them / moving them across the network

'So to get what i wanted i used this in the middle of my public Function

    For Each s As String In sFiles
        c += 1 'This was just a simple file counter for the prg bar

CheckAgain:
        If t3 Is Nothing Then
            t3 = New Thread(New ParameterizedThreadStart(AddressOf DoWork))
            t3.Start(s)
            GoTo NextOne
        ElseIf t4 Is Nothing Then
            t4 = New Thread(New ParameterizedThreadStart(AddressOf DoWork))
            t4.Start(s)
            GoTo NextOne
        ElseIf t5 Is Nothing Then
            t5 = New Thread(New ParameterizedThreadStart(AddressOf DoWork))
            t5.Start(s)
            GoTo NextOne
        ElseIf t6 Is Nothing Then
            t6 = New Thread(New ParameterizedThreadStart(AddressOf DoWork))
            t6.Start(s)
            GoTo NextOne
        ElseIf t7 Is Nothing Then
            t7 = New Thread(New ParameterizedThreadStart(AddressOf DoWork))
            t7.Start(s)
            GoTo NextOne
        ElseIf t8 Is Nothing Then
            t8 = New Thread(New ParameterizedThreadStart(AddressOf DoWork))
            t8.Start(s)
            GoTo NextOne
        ElseIf t9 Is Nothing Then
            t9 = New Thread(New ParameterizedThreadStart(AddressOf DoWork))
            t9.Start(s)
            GoTo NextOne
        Else
            GoTo CheckAgain
        End If
NextOne:
    Next

Sub DoWork(ByVal s As Object)

        ChangeCompression("Variables for my Function that did alot of work")
        'System.Threading.Thread.Sleep(10)

    'This is how i disposed of my threads

    If Not (t3 Is Nothing) Then
        t3 = Nothing
    ElseIf Not (t4 Is Nothing) Then
        t4 = Nothing
    ElseIf Not (t5 Is Nothing) Then
        t5 = Nothing
    ElseIf Not (t6 Is Nothing) Then
        t6 = Nothing
    ElseIf Not (t7 Is Nothing) Then
        t7 = Nothing
    ElseIf Not (t8 Is Nothing) Then
        t8 = Nothing
    ElseIf Not (t9 Is Nothing) Then
        t9 = Nothing
    End If

End Sub 
```

仅此而已:)-希望这可以帮助某人，并感谢所有人帮助我完成了我的多线程工作，是的...我知道有更好的方法，但这对我有用:)

# sql - SQLite“COUNT(*)”被认为是有害的？

> ID：15769390
> 
> 赞同：2
> 
> 时间：2013-04-02T16:31:51.887
> 
> 标签：sql, database, sqlite

考虑以下简单示例：

```
prompt% sqlite3 test.db
sqlite> create table employee (
           employee_id   integer       primary key,
           first_name    varchar2(32)  not null,
           last_name     varchar2(32)  not null
        );

sqlite> insert into employee (first_name, last_name) values ('Bill', 'Smith');
sqlite> insert into employee (first_name, last_name) values ('Sally', 'Jones');
sqlite> insert into employee (first_name, last_name) values ('Bill', 'Jones');

sqlite> select first_name, count(*) from employee; 
```

结果会怎样？

天真的可能会认为它将是：

```
Bill|2
Sally|1 
```

但是有经验的人会注意到 SELECT 查询缺少 'GROUP BY' 子句。事实上，当 Oracle 出现这个查询时，会抛出一个错误：

```
SQL ERROR: ORA-00937: not a single-group group function 
```

然而，SQLite 并没有抱怨，而是产生：

```
Bill|3 
```

这对我来说似乎是假的......我想显示总行数可能是有道理的，但简单地选择最后一个'first_name'似乎相当随意且有潜在危险。

这是我无法理解的错误还是功能？SQLite 不提供类似的安全网是否有原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:38:42.270

这一切都[记录在案](http://www.sqlite.org/lang_select.html)：

> 如果 SELECT 语句是没有 GROUP BY 子句的聚合查询，则结果集中的每个聚合表达式都会在整个数据集上计算一次。结果集中的每个非聚合表达式都会针对任意选择的数据集行进行一次评估。每个非聚合表达式使用相同的任意选择的行...
> 
> 通过评估结果集中的聚合和非聚合表达式创建的单行结果集数据形成了没有 GROUP BY 子句的聚合查询的结果。没有 GROUP BY 子句的聚合查询总是只返回一行数据，即使有零行输入数据。

简而言之，没有安全网。如果需要，请不要忘记 GROUP BY。

# .htaccess - .htaccess 强制非 www 到 www 与单页异常

> ID：15769392
> 
> 赞同：0
> 
> 时间：2013-04-02T16:31:56.043
> 
> 标签：.htaccess, exception, redirect

我们已经使用以下代码成功地强制站点中的所有页面使用 WWW：

```
##### Redirect non-www to www -- BEGIN
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/TEST_SITE/$1 [R=301,L]
##### Redirect non-www to www -- END 
```

但是我们的注册页面是一个例外，它必须使用不包含 WWW 的 URL。两天的测试和研究，我唯一能产生的就是错误和无限循环。有没有人建议强制所有页面到 WWW 除了这一页？

```
http://mysite.com/TEST_SITE/component/users/?view=registration 
```

似乎它应该在一般的 WWW 重定向之前使用简单的重定向，但我在论坛中找不到类似的解决方案。我很感激任何想法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:45:06.467

有没有人建议强制除这一页之外的所有页面到 WWW`http://mysite.com/TEST_SITE/component/users/?view=registration`是的，你可以。

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{QUERY_STRING} !view=registration
RewriteRule ^(.*) http://www.%{HTTP_HOST}/TEST_SITE/$1 [R=301,L] 
```

只需添加一个新条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:19:49.857

```
#strip www from registration page
RewriteCond %{HTTP_HOST} ^(www\.)(.+)$
RewriteCond %{QUERY_STRING} ^view=registration$ [NC]
RewriteRule ^TEST_SITE/component/users/$ http://%2%{REQUEST_URI} [L,R=301,NC]

# prevent adding www to registration page
RewriteCond %{QUERY_STRING} ^view=registration$ [NC]
RewriteRule ^TEST_SITE/component/users/$ %{REQUEST_URI} [L,NC]

RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/TEST_SITE/$1 [R=301,L] 
```

# ios - iOS EAGL 视频渲染仅在设备旋转后有效

> ID：15769396
> 
> 赞同：0
> 
> 时间：2013-04-02T16:32:22.280
> 
> 标签：ios, opengl-es, opengl-es-2.0

我有一个将视频帧绘制到带有 CAEAGLLayer 类层的 UIView 的应用程序。使用 GStreamer 生成/解码视频帧。

我是OpenGL（ES）世界的新手，我面临的问题是我没有从glGetError中得到任何错误，但是直到我旋转iPad然后它才能工作并且我可以将它旋转回来时才显示视频到原来的方向，它继续工作。模拟器也会发生同样的行为。

在使用 XCode GL 调试功能（显示 GL 缓冲区和对象）后，它也可以工作，在激活它并让程序再次运行后，视频渲染得很好。

这可能是什么原因？我可能会丢失任何旋转设备或启用 GL 调试的 GL 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:55:17.673

[黑屏/iOS OpenGL ES 2 中没有事件](https://stackoverflow.com/questions/14074511/black-screen-no-events-in-ios-opengl-es-2?rq=1)

这个问题与我的问题相同，并且相同的解决方案有效。

伟大的！

# css - WP Nav 下拉菜单隐藏在 ie 中

> ID：15769403
> 
> 赞同：0
> 
> 时间：2013-04-02T16:32:34.487
> 
> 标签：css, internet-explorer, drop-down-menu

我的导航下拉菜单隐藏在我网站上的徽标和横幅后面时遇到问题。我尝试将导航 div 的 z-index 更改为 99，然后将标题 div 更改为 0，但无济于事。我在使用 Mac 时遇到了问题。您可以在 www.miles2give.org 上查看该网站。我从 wp 主题二十二创建了一个子主题，我想我可能在此过程中不小心搞砸了一些东西。我不知道要包含什么代码，或者我会。

# python - 来自 iptables 的 Python UDP syslog 服务器中的重复日志条目

> ID：15769408
> 
> 赞同：3
> 
> 时间：2013-04-02T16:32:46.240
> 
> 标签：python, udp, iptables, rsyslog

我已经使用以下代码在 Python 中实现了一个基本的远程系统日志服务器：

```
self.UDPsock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
self.UDPsock.bind(self.addr)
self.UDPsock.settimeout(1)
while self.carryOn:
  try: 
    data = self.UDPsock.recv(self.buf)
    print data
  except socket.timeout:
    pass 
```

我正在使用它从我的路由器（Tomato Shibby v108）接收日志消息。我对截获来自我的手机的消息特别感兴趣，这样我就可以创建一个“存在”脚本。

我最初尝试了以下 iptable 条目进行测试：

```
iptables -I FORWARD -s 192.168.2.54 -m limit --limit 1/minute --limit-burst 1 -j LOG 
```

这按预期工作，我会收到如下消息：

```
<12>Apr  1 21:51:47 kernel: IN=br0 OUT=ppp0 SRC=192.168.2.54 DST=17.158.8.77 LEN=70 TOS=0x00 PREC=0x00 TTL=63 ID=23055 DF PROTO=TCP SPT=60779 DPT=993 WINDOW=65535 RES=0x00 ACK PSH URGP=0 MARK=0x5 
```

但是，我不想依赖静态 IP，因此更改了 iptable 过滤器以在 MAC 地址上触发：

```
iptables -t raw -A PREROUTING -m mac --mac-source SOURCE_MAC -m limit --limit 1/minute --limit-burst 1 -j LOG --log-ip-options 
```

这里的问题是我现在每个日志条目收到 >50 条消息，所有重复的表单：

```
<12>Apr  1 19:54:00 kernel: IN=br0 OUT= MAC=DEST_MAC:SOURCE_MAC:08:00 SRC=192.168.2.54 DST=224.0.0.251 LEN=101 TOS=0x00 PREC=0x00 TTL=255 ID=36530 PROTO=UDP SPT=5353 DPT=5353 LEN=81 
```

当我将过滤器更改为：

```
iptables -t raw -A PREROUTING -m mac --mac-source SOURCE_MAC -m limit --limit 1/minute --limit-burst 1 -j LOG 
```

它将重复的数量减少到 4 个：

```
<12>Apr  2 12:21:55 kernel: IN=br0 OUT= MAC=DEST_MAC:SOURCE_MAC:08:00 SRC=192.168.2.54 DST=224.0.0.251 LEN=101 TOS=0x00 PREC=0x00 TTL=255 ID=1384 PROTO=UDP SPT=5353 DPT=5353 LEN=81 
```

任何人都可以提供任何关于为什么会发生这种情况的见解吗？我假设有某种“有趣”的角色导致了这种情况。我可以将 iptable 条目或 Python 程序更改为每条消息只接收一个日志条目吗？

# ckeditor - 如何在ckeditor中禁用标签验证？

> ID：15769409
> 
> 赞同：0
> 
> 时间：2013-04-02T16:32:50.470
> 
> 标签：ckeditor

当您输入开始标签时，CKeditor 显然会自动创建匹配的结束标签。有没有办法关闭这种行为？

我有一种情况，我正在使用 CKeditor 在管理程序中创建两个文本块，然后我使用它们来绘制一个包含第一个块、一些静态内容和第二个块的页面。现在我有一个案例，我想将静态内容包装在一个表格中。我在想，没问题，我将 <table> 标签放在第一个块中，将 </table> 标签放在第二个块中，静态内容将在表格内。但是不，CKeditor 坚持在第一个块中关闭 table 标记。

一般来说，我可以进入源代码模式并直接输入 HTML，但 CKeditor 然后决定重新格式化我的标记。这似乎违背了拥有源模式的目的。（当我告诉计算机我想要什么并且它告诉我，不，你错了，我比你更清楚你想要什么时，我讨厌它！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:13:24.987

CKEditor 生成有效的 HTML。有效的 HTML 必须同时包含 - 开始和结束标签。没有黑客编辑器就无法改变这种行为。请注意，即使您强制编辑器生成没有这些标签之一的内容，它也会尝试修复此问题，并且不会按照您的预期执行此操作。例如负载：

```
<p>foo</p></td></tr></table> 
```

而且您将完全松开此表，因此只有基于正则表达式的数据加载修复才能有所帮助。在相反的情况下：

```
<table><tr><td><p>foo</p> 
```

你最终会得到用表格包裹的段落，所以它会更好。但是，如果有人从编辑器内容中删除此表怎么办？

因此，您应该在编辑器之外进行此集成 - 将表格添加到一个编辑器的内容并附加到第二个编辑器的内容。您根本无法强制编辑器处理部分 HTML。

# c# - 在多个程序之间共享可更新的序列化 xml 文件

> ID：15769410
> 
> 赞同：0
> 
> 时间：2013-04-02T16:32:53.127
> 
> 标签：c#, xml, xml-serialization

我有一组相关的应用程序，它们都使用相同的 xml 文件进行设置。我目前使用 XmlSerializer 在程序启动时加载文件。

我现在需要从应用程序中更新设置文件。显然，现有代码将无法工作，因为所有当前运行的应用程序将具有相同的 xml 数据，就像它们在启动时加载的一样，并且每个程序都将使用原始值覆盖文件，只加上它自己的更改。

尽可能简单地处理这个问题的最佳方法是什么？

要求是：

*   设置文件必须是人类可读和可编辑的。

*   我不想每次访问设置对象的元素时都读取整个设置文件。

*   我希望设置类易于编写和更改 - 它目前只是一个属性列表，一个使用 XmlSerializer 从磁盘读取它的方法，以及一个再次写出它的方法。

# bash - Sed/Awk - 在模式 x 和 y 之间拉线

> ID：15769411
> 
> 赞同：12
> 
> 时间：2013-04-02T16:32:58.843
> 
> 标签：bash, sed, awk

我有一些大型 CSV 文件，我想在其中提取包含模式“x”的 X 行和包含模式“y”的 Y 行之间的所有数据

例如：

```
other_data
Header
data
data
data
Footer
other_data 
```

我希望能够将（包括）Header -> Footer 之间的所有内容通过管道传输到一个新文件。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T16:35:33.307

使用`awk`它非常简单：

```
awk '/Header/ { show=1 } show; /Footer/ { show=0 }' 
```

基本上将状态保存在一个名为`show`. 当我们点击页眉时，我们将其打开，页脚我们将其关闭。当它打开时，该`show`规则会执行打印记录的默认操作。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-02T16:38:52.057

在 sed 中非常简单：

```
sed -n '/Header/,/Footer/p' 
```

或者

```
sed '/Header/,/Footer/!d' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-02T16:49:08.980

另一种方式`awk`：

```
awk '/Header/,/Footer/' file
Header
data
data
data
Footer 
```

只需重定向输出以保存在新文件中：

```
awk '/Header/,/Footer/' file > newfile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T18:56:49.910

这可能对您有用（GNU sed）：

```
 sed '/^Header/,/^Footer/w new_file' file 
```

# sql-server - 创建函数时关键字“CREATE”附近的语法不正确

> ID：15769413
> 
> 赞同：6
> 
> 时间：2013-04-02T16:33:03.867
> 
> 标签：sql-server

当谈到 MS SQL 时，我是一个完整的新手，并且在搜索时在线找到了此代码。它似乎完全符合我的要求，即根据纬度和纬度值进行半径搜索。

但是，我不断收到：**关键字“CREATE”附近的语法不正确。**，这是代码的第一行。我的数据库是 2008 MS SQL

这是代码：

```
CREATE FUNCTION CalculateDistance
            (@Longitude1 Decimal(8,5),
            @Latitude1   Decimal(8,5),
            @Longitude2  Decimal(8,5),
            @Latitude2   Decimal(8,5))
        Returns Float
        AS BEGIN
        Declare @Temp Float

        Set @Temp = sin(@Latitude1/57.2957795130823) * sin(@Latitude2/57.2957795130823) + cos(@Latitude1/57.2957795130823) * cos(@Latitude2/57.2957795130823) * cos(@Longitude2/57.2957795130823 - @Longitude1/57.2957795130823)

        if @Temp > 1
            Set @Temp = 1
        Else If @Temp < -1
            Set @Temp = -1

        Return (3958.75586574 * acos(@Temp) )

        End

        -- FUNCTION 
        CREATE FUNCTION LatitudePlusDistance(@StartLatitude Float, @Distance Float) Returns Float
        AS BEGIN
            Return (Select @StartLatitude + Sqrt(@Distance * @Distance / 4766.8999155991))
        End

        -- FUNCTION 
        CREATE FUNCTION LongitudePlusDistance
            (@StartLongitude Float,
            @StartLatitude Float,
            @Distance Float)
        Returns Float
        AS BEGIN
            Return (Select @StartLongitude + Sqrt(@Distance * @Distance / (4784.39411916406 * Cos(2 * @StartLatitude / 114.591559026165) * Cos(2 * @StartLatitude / 114.591559026165))))
        End

        -- ACTUAL QUERY 
        -- Declare some variables that we will need. 
        Declare @Longitude Decimal(8,5),
                @Latitude Decimal(8,5),
                @MinLongitude Decimal(8,5),
                @MaxLongitude Decimal(8,5),
                @MinLatitude Decimal(8,5),
                @MaxLatitude Decimal(8,5)

        -- Get the lat/long for the given id
        Select @Longitude = Longitude,
               @Latitude = Latitude
        From   qccities
        Where  id = '21'

        -- Calculate the Max Lat/Long 
        Select @MaxLongitude = LongitudePlusDistance(@Longitude, @Latitude, 20),
               @MaxLatitude = LatitudePlusDistance(@Latitude, 20)

        -- Calculate the min lat/long 
        Select @MinLatitude = 2 * @Latitude - @MaxLatitude,
               @MinLongitude = 2 * @Longitude - @MaxLongitude

        -- The query to return all ids within a certain distance 
        Select id
        From   qccities
        Where  Longitude Between @MinLongitude And @MaxLongitude
               And Latitude Between @MinLatitude And @MaxLatitude
               And CalculateDistance(@Longitude, @Latitude, Longitude, Latitude) <= 2 
```

知道发生了什么吗？

谢谢！！！

**编辑：**非常感谢 bluefeet 和 Aaron Bertrand 为我指明了正确的方向！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:38:04.720

您还应该以`GO`分号或分号结束每个 create 语句：

此外，应该将架构添加到函数中。例如下面使用`dbo.`架构：

```
CREATE FUNCTION dbo.CalculateDistance
            (@Longitude1 Decimal(8,5),
            @Latitude1   Decimal(8,5),
            @Longitude2  Decimal(8,5),
            @Latitude2   Decimal(8,5))
        Returns Float
        AS BEGIN
        Declare @Temp Float

        Set @Temp = sin(@Latitude1/57.2957795130823) * sin(@Latitude2/57.2957795130823) + cos(@Latitude1/57.2957795130823) * cos(@Latitude2/57.2957795130823) * cos(@Longitude2/57.2957795130823 - @Longitude1/57.2957795130823)

        if @Temp > 1
            Set @Temp = 1
        Else If @Temp < -1
            Set @Temp = -1

        Return (3958.75586574 * acos(@Temp) )

        End
        GO 
```

请参阅[SQL Fiddle 以及](http://sqlfiddle.com/#!3/76f75)正在创建的所有函数的演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:32:42.970

尝试一个没有`GO`. `GO`不是 T-SQL 的一部分，它是 Management Studio 等客户端工具的批处理分隔符。ColdFusion 可能会将其传递给 SQL Server，但它不理解`GO`. 因此，要么从 ColdFusion 一次发送一个函数（不带`GO`），要么使用更好的工具来创建对象和发送查询（例如 Management Studio 或主机为您提供的任何客户端接口）。

我不确定为什么您认为需要在单个代码块中创建三个函数而不是单独创建它们（因为您的网页显然不知道批处理）。您只需要创建一次函数。在数据库中创建它们后，您可以在随后的查询中整天/周/月/年等引用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:40:13.360

您必须使用OR （或两者 - 我更喜欢哪一个）来分隔多个`CREATE FUNCTION`调用：`GO``;`

```
CREATE FUNCTION CalculateDistance
        (@Longitude1 Decimal(8,5),
        @Latitude1   Decimal(8,5),
        @Longitude2  Decimal(8,5),
        @Latitude2   Decimal(8,5))
    Returns Float
    AS BEGIN
    Declare @Temp Float

    Set @Temp = sin(@Latitude1/57.2957795130823) * sin(@Latitude2/57.2957795130823) + cos(@Latitude1/57.2957795130823) * cos(@Latitude2/57.2957795130823) * cos(@Longitude2/57.2957795130823 - @Longitude1/57.2957795130823)

    if @Temp > 1
        Set @Temp = 1
    Else If @Temp < -1
        Set @Temp = -1

    Return (3958.75586574 * acos(@Temp) )

    End;
GO

    -- FUNCTION 
CREATE FUNCTION LatitudePlusDistance(@StartLatitude Float, @Distance Float) Returns Float
    AS BEGIN
        Return (Select @StartLatitude + Sqrt(@Distance * @Distance / 4766.8999155991))
    End

    -- FUNCTION 
    CREATE FUNCTION LongitudePlusDistance
        (@StartLongitude Float,
        @StartLatitude Float,
        @Distance Float)
    Returns Float
    AS BEGIN
        Return (Select @StartLongitude + Sqrt(@Distance * @Distance / (4784.39411916406 * Cos(2 * @StartLatitude / 114.591559026165) * Cos(2 * @StartLatitude / 114.591559026165))))
    End;

GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:40:17.770

该 SQL中有许多`CREATE`语句。`GO`它们必须通过在语句之间放置来分成批次。

SSMS 中的一半消息揭示了这一点：

> 'CREATE FUNCTION' 必须是查询批处理中的第一条语句。

所以要修复：

```
CREATE FUNCTION CalculateDistance
        (@Longitude1 Decimal(8,5),
        @Latitude1   Decimal(8,5),
        @Longitude2  Decimal(8,5),
        @Latitude2   Decimal(8,5))
    Returns Float
    AS BEGIN
    ...
    END

GO

CREATE FUNCTION LatitudePlusDistance(@StartLatitude Float, @Distance Float) Returns Float
    AS BEGIN
        Return (Select @StartLatitude + Sqrt(@Distance * @Distance / 4766.8999155991))
    End

 GO

 CREATE FUNCTION... etc 
```

# c# - 在 dll 中配置 log4net 日志记录

> ID：15769414
> 
> 赞同：6
> 
> 时间：2013-04-02T16:33:04.310
> 
> 标签：c#, dll, log4net, log4net-configuration

我正在设置一个 dll 以用作不同应用程序的第三方 dll。我希望这个 dll 拥有自己的日志记录，因此外部应用程序不必处理任何设置（我不相信他们使用与我们相同的日志记录）。我读过这可能不是最好的解决方案，但这是我被赋予的任务。我们想用这个来使用 log4net。我在这里查看了其他一些问题，他们提到它可以通过代码进行配置，但是，我遇到的主要问题是我们的代码中没有明确的入口点来配置 log4net。我很好奇我是否应该放弃让dll自行配置并拥有一个由配置dll日志记录的辅助应用程序调用的方法，或者是否有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-02T16:03:55.470

您可以通过编程方式配置 log4net。也许将此代码添加到 DLL 的构造函数中。

```
if (!log4net.LogManager.GetRepository().Configured)
{
    // my DLL is referenced by web service applications to log SOAP requests before
    // execution is passed to the web method itself, so I load the log4net.config
    // file that resides in the web application root folder
    var configFileDirectory = (new DirectoryInfo(TraceExtension.AssemblyDirectory)).Parent; // not the bin folder but up one level
    var configFile = new FileInfo(configFileDirectory.FullName + "\\log4net.config");

    if (!configFile.Exists)
    {
        throw new FileLoadException(String.Format("The configuration file {0} does not exist", configFile));
    }

    log4net.Config.XmlConfigurator.Configure(configFile);
} 
```

# java - Grizzly 和 ServletContainerContext

> ID：15769415
> 
> 赞同：8
> 
> 时间：2013-04-02T16:33:05.363
> 
> 标签：java, servlets, jersey, grizzly

我试图在我编写的在 Grizzly 上运行的 Servlet 中获取一些注入的上下文（例如 Session 或 HttpServletRequest），但我所做的似乎没有任何效果。由于以下错误，整个过程似乎过早地停止了：

```
SEVERE: Missing dependency for field: javax.servlet.http.HttpServletRequest com.test.server.LolCat.hsr 
```

服务器非常简单，它由两个文件组成，静态入口点（Main.java）：

```
package com.test.server;

import java.io.IOException;
import java.net.URI;
import javax.ws.rs.core.UriBuilder;

import org.glassfish.grizzly.http.server.HttpServer;
import com.sun.jersey.api.container.grizzly2.GrizzlyServerFactory;
import com.sun.jersey.api.core.ClassNamesResourceConfig;
import com.sun.jersey.api.core.ResourceConfig;

public class Main {

    private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost/").port(8080).build();
    }

    public static final URI BASE_URI = getBaseURI();

    public static void main(String[] args) throws IOException {
        ResourceConfig rc = new ClassNamesResourceConfig(LolCat.class);
        HttpServer httpServer = GrizzlyServerFactory.createHttpServer(BASE_URI, rc);
        System.in.read();
        httpServer.stop();
    }
} 
```

和 serlvet (LolCat.java)：

```
package com.test.server;

import javax.servlet.http.HttpServletRequest;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.core.Context;

@Path(value = "/lol")
public class LolCat {

    @Context HttpServletRequest hsr;

    @GET
    @Path(value="/cat")
    public String list() {
        return "meow";
    }

} 
```

具体来说，上面源文件中的@Context-line 是我所有问题的来源和解决方案。我需要它，根据我读过的关于 Jersey 和 Servlets 的所有内容，它应该可以工作，但可惜它没有。我也尝试过使用 GrizzlyWebContainerFactory 而不是 GrizzlyServerFactory，但无济于事。

作为参考，该项目使用以下依赖项进行编译：

*   org.glassfish.grizzly:grizzly-framework:jar:2.2.21
*   org.glassfish.grizzly:grizzly-http:jar:2.2.21
*   org.glassfish.grizzly:grizzly-http-servlet:jar:2.2.21
*   org.glassfish.grizzly:grizzly-http-server:jar:2.2.21
*   com.sun.jersey:jersey-server:jar:1.17
*   com.sun.jersey:jersey-servlet:jar:1.17
*   com.sun.jersey:jersey-core:jar:1.17
*   javax.servlet:javax.servlet-api:jar:2.5.0
*   com.sun.jersey:jersey-grizzly2:jar:1.17
*   com.sun.jersey:jersey-grizzly2-servlet:jar:1.17
*   asm:asm:jar:3.3.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:12:08.647

这个主要课程对我来说很好：

```
package com.test.server;

import com.sun.jersey.api.container.grizzly2.GrizzlyServerFactory;
import java.io.IOException;
import java.net.URI;
import javax.ws.rs.core.UriBuilder;

import com.sun.jersey.api.core.ClassNamesResourceConfig;
import com.sun.jersey.spi.container.servlet.ServletContainer;
import org.glassfish.grizzly.http.server.HttpHandler;
import org.glassfish.grizzly.http.server.HttpServer;
import org.glassfish.grizzly.http.server.Request;
import org.glassfish.grizzly.http.server.Response;
import org.glassfish.grizzly.servlet.ServletRegistration;
import org.glassfish.grizzly.servlet.WebappContext;

public class Main {
    private static final String JERSEY_SERVLET_CONTEXT_PATH = "";

    private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost").port(8080).path("/").build();
    }

    public static final URI BASE_URI = getBaseURI();

    public static void main(String[] args) throws IOException {
        // Create HttpServer and register dummy "not found" HttpHandler
        HttpServer httpServer = GrizzlyServerFactory.createHttpServer(BASE_URI, new HttpHandler() {

            @Override
            public void service(Request rqst, Response rspns) throws Exception {
                rspns.setStatus(404, "Not found");
                rspns.getWriter().write("404: not found");
            }
        });

        // Initialize and register Jersey Servlet
        WebappContext context = new WebappContext("WebappContext", JERSEY_SERVLET_CONTEXT_PATH);
        ServletRegistration registration = context.addServlet("ServletContainer", ServletContainer.class);
        registration.setInitParameter(ServletContainer.RESOURCE_CONFIG_CLASS, 
                ClassNamesResourceConfig.class.getName());
        registration.setInitParameter(ClassNamesResourceConfig.PROPERTY_CLASSNAMES, LolCat.class.getName());
        registration.addMapping("/*");
        context.deploy(httpServer);

        System.in.read();
        httpServer.stop();
    }
} 
```

`http://localhost:8080/lol/cat`在您的浏览器中尝试。您可以更改 JERSEY_SERVLET_CONTEXT_PATH 以更新 Servlet 的上下文路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-09T13:10:47.780

根据开发人员的解释——Grizzly 并不完全符合 JAX-RS 2.0，因此不会有官方的上下文注入/包装。请参阅[Jersey Bug-1960](https://java.net/jira/browse/JERSEY-1960) 适用于 Jersey + Grizzly 版本 2.7+

幸运的是，有一种方法可以注入 Grizzly 请求/响应对象。泽西的一个单元测试中提供了一种棘手但有效的代码示例。见[泽西容器测试](https://github.com/jersey/jersey/blob/cf236e5ae2820db67a9581a8eece53d01a412cae/tests/e2e/src/test/java/org/glassfish/jersey/tests/e2e/container/Jersey2462Test.java#L113)

所以代码片段将是：

```
import javax.inject.Inject;
import javax.inject.Provider;

public someclass {
    @Inject
    private Provider<Request> grizzlyRequestProvider;

    public void method() {
         if (grizzlyRequestProvider != null) {
            Request httpRequest = grizzlyRequestProvider.get();

            // Extract what you need
         }
    }
} 
```

适用于过滤器和服务方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-06T02:40:58.150

你也可以手动注册一个 ResourceContext

```
 HttpServer httpServer = GrizzlyHttpServerFactory.createHttpServer(getBaseURI());

  WebappContext context = new WebappContext("WebappContext", "/api");
  ServletRegistration registration = context.addServlet("ServletContainer",
    new ServletContainer(config));
  registration.addMapping("/*");
  context.deploy(httpServer); 
```

其中 config 是您的资源上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-04T19:38:21.187

尝试这样的事情：-

```
public class Main {

    private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost/").port(8080).build();
    }

    public static void main(String[] args) throws IOException {
        ResourceConfig rc = new ResourceConfig().packages("com.example");//path to you class files
        HttpServer httpServer = GrizzlyHttpServerFactory.createHttpServer(getBaseURI(), rc);
        System.in.read();
        httpServer.stop();
    }
} 
```

# jquery - 使用 jQuery 插件对地理位置列表进行排序

> ID：15769420
> 
> 赞同：1
> 
> 时间：2013-04-02T16:33:20.663
> 
> 标签：jquery, html, google-maps-api-3, github, geolocation

在 GitHub 上找到 GeoLocation jQuery 插件（下面的链接），效果很好。我唯一的问题是，在对 10 个地址进行排序后，任何剩余的地址都会以未知的距离返回。我有 12 个地址要排序。

我不确定这是否是 Google API 的默认设置，或者是否需要对文件 jquery-location.js 进行一些更改。这也发生在他们的演示[http://atxwebshow.com/coffeeshops/](http://atxwebshow.com/coffeeshops/)上。

**文件** [https://github.com/teleject/HTML5-GeoLocation-jQuery-Plugin](https://github.com/teleject/HTML5-GeoLocation-jQuery-Plugin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:49:59.443

[Google Maps API v3 地理编码服务](https://developers.google.com/maps/documentation/javascript/geocoding)受速率限制和配额限制。如果您不尊重这一点并检查错误，您会得到大约 10 个左右的结果（取决于服务器负载），然后您会收到 OVER_QUERY_LIMIT 响应。

该插件中的大多数错误路径导致它静默失败，尽管问题似乎首先是地理位置（如果失败，它甚至不会尝试排序），如果成功，那么你会得到 OVER_QUERY_LIMIT （来自[DirectionsService](https://developers.google.com/maps/documentation/javascript/directions)）。[您的代码带有一些错误检查](http://www.geocodezip.com/echristo_com_test.html)

# javascript - IE滚动条+溢出滚动+div在上面

> ID：15769422
> 
> 赞同：0
> 
> 时间：2013-04-02T16:33:26.393
> 
> 标签：javascript, css, internet-explorer, internet-explorer-9, overflow

我有两个div。一个 div（副本）的 css 溢出属性设置为 auto。另一个 div（覆盖）位于顶部。我无法更改这两个 div 的 z-index，因为从视觉上看，叠加层需要位于副本的顶部。在 IE9 中，“复制”div 的滚动条不可点击/可用。在 Chrome 中，它工作正常，因为我使用的是指针事件属性。我怎样才能让这个例子在 IE9 中工作？我需要能够滚动内容。

CSS

```
#overlay{
    width:400px;
    height:200px;
    position:absolute;
    display:block;
    background-color:#990000;
    z-index:2;
    opacity:.2;
    pointer-events:none;
}
#copy{
    overflow:auto;
    width:300px;
    height:200px;
    position:absolute;
    overflow-y: scroll;
    overflow-x: hidden;
    z-index:1; 
```

}

HTML

```
<div id="overlay"></div>
<div id="copy">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in felis elit. Mauris elementum mi non mauris euismod interdum. Morbi auctor velit lacinia augue vehicula vel egestas tortor scelerisque. Sed quis arcu massa, quis elementum ligula. Nunc et quam id ipsum consequat ullamcorper.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in felis elit. Mauris elementum mi non mauris euismod interdum. Morbi auctor velit lacinia augue vehicula vel egestas tortor scelerisque. Sed quis arcu massa, quis elementum ligula. Nunc et quam id ipsum consequat ullamcorper.</div> 
```

在此处查看示例：http: [//jsfiddle.net/7w4Jh/1/](http://jsfiddle.net/7w4Jh/1/)

请记住，该示例在 webkit 浏览器中运行良好。该问题仅出现在 Internet Explorer (9)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:38:10.987

这是因为您的 z-index 设置为`#overlay`位于副本的顶部，从而防止底层`#copy`接收鼠标事件。通过切换每个的 z-index，它工作得很好。

此外，您不需要`overflow`声明所有三个属性。这就足够了：

```
overflow:hidden;
overflow-y:scroll; 
```

只是一个抬头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:50:46.630

`pointer-events` （[CSS指针事件允许点击底层元素](http://robertnyman.com/2010/03/22/css-pointer-events-to-allow-clicks-on-underlying-elements/)）**在IE中不起作用..**

我发现 ：

[通过层转发鼠标事件/](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

和

[http://jsbin.com/uhuto](http://jsbin.com/uhuto)

# ruby-on-rails - 避免 Rails ActiveRecord 查询中的重复连接

> ID：15769425
> 
> 赞同：1
> 
> 时间：2013-04-02T16:33:29.377
> 
> 标签：ruby-on-rails

我有一个场景，我在查询链中的某处有 SQL 连接，然后在更进一步的点我需要附加一个需要相同连接的条件，但我现在不知道该连接是否已经存在于范围内. 例如：

```
@foo = Foo.joins("INNER JOIN foos_bars ON foos_bars.foo_id = foos.id")
....
@foo.joins(:bars).where(bars: { id: 1 }) 
```

这将产生一个关于重复表/别名的 SQL 错误。

我在第一个实例中手动编写 SQL 连接的原因是为了提高效率，因为经典的 rails AREL 连接将产生两个 INNER JOINS，而在我的情况下我只需要一个。

有没有推荐的解决方法？例如，某种检查当前范围内连接的方法。

**回复评论：**

`has_and_belongs_to_many`Rails 产生两个`INNER JOINS`这样的关系：

```
SELECT "journals".* FROM "journals"
INNER JOIN "categories_journals"
  ON "categories_journals"."journal_id" = "journals"."id"
INNER JOIN "categories"
  ON "categories"."id" = "categories_journals"."category_id"
WHERE "categories"."id" = 1 
```

而我相信我可以这样做：

```
SELECT "journals".* FROM "journals"
INNER JOIN "categories_journals"
  ON "categories_journals"."journal_id" = "journals"."id"
WHERE "categories_journals"."category_id" = 1 
```

如我错了请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:56:54.703

解决方案是普遍使用字符串连接。我不知道 Rails 实际上`uniq`是字符串连接——所以只要它们是**相同的字符串**，这个问题就不会发生。

*[这篇文章](http://pivotallabs.com/pivots-patch-rails-named-scope-with-the-joins-can-cause-table-aliasing-issues/)*让我闻到了气味，作者展示了和我一模一样的问题，并且给 Rails 打了补丁，看起来补丁是很久以前实现的。我不认为它是完美的。rails 应该有一种方法来处理散列参数连接和字符串连接，并且在它们重叠时不会爆炸。看看能不能打补丁。。

编辑：

我做了几个基准测试，看看我是否真的什么都不担心（在两种加入方式之间）：

```
1.9.3p194 :008 > time = Benchmark.realtime { 1000.times { a = Incident.joins("INNER JOIN categories_incidents ON categories_incidents.incident_id = incidents.id").where("categories_incidents.category_id = 1") } }
 => 0.042458 
1.9.3p194 :009 > time = Benchmark.realtime { 1000.times { a = Incident.joins(:categories).where(categories: { id: 1 }) } }
 => 0.152703 
```

我不是一个常规的基准测试者，所以我的基准测试可能并不完美，但在我看来，我的更有效的方法确实对大型查询或大量查询进行了现实世界的性能改进。

以我所做的方式连接的缺点是，如果 a`Category`不存在但仍记录在连接表中，那么这可能会导致一些问题，否则这些问题可以通过更彻底的连接来避免。

# django - Django通过FK过滤超过x值计数

> ID：15769428
> 
> 赞同：1
> 
> 时间：2013-04-02T16:33:45.427
> 
> 标签：django

我希望你能看到我想用下面的线做什么......

```
Group.objects.filter(contacts.count>1) 
```

我想过滤并仅获取具有 1 个以上相关联系人的组。

以上将不起作用，那么应该如何完成？

谢谢

**模型.py**

```
class Contact(models.Model):
    first_name = models.CharField(max_length=60)
    group = models.ForeignKey(Group, related_name='contacts')

class Group(models.Model):
    name = models.CharField(max_length=60) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T16:46:10.487

```
from django.db.models import Count

Group.objects.annotate(c=Count('contacts')).filter(c__gt=1) 
```

关于注释和聚合的[文档。](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)另请参阅[对注解进行过滤](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#filtering-on-annotations)。

# bdd - 使用 SpecFlow 作为主要的需求管理工具

> ID：15769435
> 
> 赞同：2
> 
> 时间：2013-04-02T16:34:01.523
> 
> 标签：bdd, specflow

我们计划使用[SpecFlow](http://www.specflow.org)作为基于 Web 的项目的主要需求工具。这个应用程序有很多常见的目标形式的变化。这些变化主要针对应用程序服务的每个用户国家（多租户）。

**Q1。SpecFlow 是否适合此类要求？**

我们已经发现每个表单中的字段数量非常多，其中许多字段需要验证。一些在客户端，一些在数据可用性或其他服务器端验证。这在 SpecFlow 中很乏味，尽管并非完全不可能。但这不是 SpecFlow 的设计目的（行为驱动而不是以数据为中心）

**Q2。请建议我们应该遵循哪些最佳实践来捕获 SpecFlow**和

**Q3。在哪些方面我们需要使用一些其他的工具。（SpecFlow 不能很好地捕捉需求的地方）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:39:51.430

SpecFlow 是[Cucumber的 .Net 实现，是一种](http://cukes.info/)[行为驱动开发](http://en.wikipedia.org/wiki/Behavior-driven_development)的[工具](http://lizkeogh.com/2011/03/04/step-away-from-the-tools/)，也称为[示例规范](http://specificationbyexample.com/key_ideas.html)。场景用 Cucumber 的[Gherkin 语言](https://github.com/cucumber/cucumber/wiki/Gherkin)描述。

Gherkin 允许您在表中指定内联或[示例](https://github.com/cucumber/cucumber/wiki/Scenario-Outlines)中的数据：

```
Scenario Outline: eating
  Given there are <start> cucumbers
  When I eat <eat> cucumbers
  Then I should have <left> cucumbers

Examples:
| start | eat | left |
|  12   |  5  |  7   |
|  20   |  5  |  15  | 
```

使用表格可以帮助您以易于阅读的方式指定表单的字段。

如果这仍然无法管理，另一种选择是使用 NUnit，它允许您指定多个[值](http://www.nunit.org/index.php?p=values&r=2.5.9)并生成[组合](http://www.nunit.org/index.php?p=combinatorial&r=2.5.9)测试用例集。如果您想使用 Cucumber 库进行组合测试用例，您可能需要考虑切换到[TickSpec](http://tickspec.codeplex.com)，它支持每个场景的[多个示例表。](http://skillsmatter.com/podcast/agile-testing/examples-examples-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:31:45.977

我看不出你不能为此使用 SpecFlow 的任何明显原因。只需注意以适当的高抽象级别编写规范。

如果您发布一个您认为乏味的示例，那么可能会提供一些建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T12:26:11.747

还可以查看配套产品“SpecLog”作为可视化这些要求的一种方式。

# c# - C#输入vector3用于计算重心坐标

> ID：15769437
> 
> 赞同：0
> 
> 时间：2013-04-02T16:34:02.703
> 
> 标签：c#, input, vector-graphics

我在学校学习了一些关于重心坐标的知识，我在下面找到了计算点是否在三角形中的代码。但是我不知道如何更改代码，以便可以从标准输入中输入点的值。我该怎么办？

```
public static bool PointInTriangle(ref Vector3 A, ref Vector3 B, ref Vector3 C, ref Vector3 P)
{
    // Prepare our barycentric variables
    Vector3 u = B - A;
    Vector3 v = C - A;
    Vector3 w = P - A;

    Vector3 vCrossW = Vector3.Cross(v, w);
    Vector3 vCrossU = Vector3.Cross(v, u);
    // Test sign of r
    if (Vector3.Dot(vCrossW, vCrossU) < 0)
         return false;

    Vector3 uCrossW = Vector3.Cross(u, w);
    Vector3 uCrossV = Vector3.Cross(u, v);

    // Test sign of t
    if (Vector3.Dot(uCrossW, uCrossV) < 0)
        return false;

    // At this piont, we know that r and t and both > 0
    float denom = uCrossV.Length;
    float r = vCrossW.Length / denom;
    float t = uCrossW.Length / denom;

    return (r <= 1 && t <= 1 && r + t <= 1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:02:28.807

您应该查看如何创建简单应用程序的[演练。](https://msdn.microsoft.com/en-us/library/0wc2kk78(v=vs.90).aspx)之后，您可以查看解释如何提示输入参数的[这篇文章。](https://msdn.microsoft.com/en-us/library/aa288457(v=vs.71).aspx)完成后，您可以使用以下命令调用您的函数：

```
bool isInTrigangle = MyClass.PointInTriangle(a, b, c, p); 
```

我写`MyClass`是因为我不知道有这个静态方法的类的名字。我也没有将参数设置为，`ref`因为我认为您将函数的签名更改为：

```
public static bool PointInTriangle(Vector3 A, Vector3 B, Vector3 C, Vector3 P) 
```

# python - ImageSpecField 原始图像的 Django-ImageKit 问题

> ID：15769439
> 
> 赞同：1
> 
> 时间：2013-04-02T16:34:21.353
> 
> 标签：python, django-models, imagekit, django-imagekit

ImageKit 在过去的几天里让我很头疼。我的网站出现内部服务器错误，因为我遵循了[GitHub](https://github.com/jdriscoll/django-imagekit)页面上的示例 ImageSpecField：

```
avatar_thumbnail = ImageSpecField(source='avatar',
                                  processors=[ResizeToFill(100, 50)],
                                  format='JPEG',
                                  options={'quality': 60}) 
```

结果错误是：

```
TypeError: __init__() got an unexpected keyword argument 'source' 
```

因此，我更新了 avatar_thumbnail 以使用[ReadTheDocs](http://django-imagekit.readthedocs.org/en/latest/)页面上的示例 ImageSpecField：

```
avatar_thumbnail = ImageSpecField(image_field='avatar',
                                  processors=[ResizeToFill(100, 50)],
                                  format='JPEG',
                                  options={'quality': 60}) 
```

然后我得到了错误：

```
TypeError: __init__() got an unexpected keyword argument 'image_field' 
```

奇怪的是，当我使用“源”时，应用程序将在本地成功运行而没有错误。在服务器上，应用程序使用“image_field”运行而没有内部错误，但实际上仍然没有创建或显示头像图像。服务器和本地都安装了 2.0.4 版的 django-imagekit。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:53:37.120

我是 ImageKit 的维护者之一。我认为第一个问题是您正在查看开发版本的文档（在 GitHub 上），但使用的是最新的稳定版本（来自 PyPI）。开发版本目前是 3.0b，与 2.x 系列相比有一些变化——其中一个是`image_field`参数被重命名为`source`. （在接下来的一周左右，我们将放弃“测试版”，将 3.0 推送到 PyPI，并更新 RTD 上的“最新”文档。）

更正后，当您访问缩略图的 url 属性时，应该会自动生成缩略图（通常在模板中完成以显示图像）。

希望这可以帮助。

# python - 具有绑定的 Python sqlite 查询将其按字符拆分

> ID：15769440
> 
> 赞同：1
> 
> 时间：2013-04-02T16:34:22.067
> 
> 标签：python, sqlite, binding

```
some_list = ['11', '22', '33']
for i in some_list:
    c.execute("INSERT INTO dbtable (dbcolumn) VALUES (?)", (i)) 
```

返回错误：

```
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 2 supplied. 
```

它爆炸`'11'`成字符。

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:36:00.217

请注意，参数需要是一个序列：

```
 c.execute("INSERT INTO dbtable (dbcolumn) VALUES (?)", (i,)) 
```

**逗号**使它成为一个元组，而不是括号/括号。

* * *

或者，如果您可以使每个列表元素成为一个元组，您可以使用以下`.executemany()`方法：

```
sequence_of_sequences = [('11',), ('22',), ('33',)]
c.executemany("INSERT INTO dbtable (dbcolumn) VALUES (?)", sequence_of_sequences) 
```

# python - 我用 pyinstaller 创建的二进制文件与 linux 不兼容

> ID：15769441
> 
> 赞同：3
> 
> 时间：2013-04-02T16:34:23.270
> 
> 标签：python, linux, binary, pyinstaller

我使用了最新版本的 pyinstaller，可以选择`--onefile`创建我的 python 脚本的一个独立文件。在我的 Mac 上，如果我在终端（bash shell）中打开文件，它工作得很好，但在 Linux bash 中，我收到以下错误

```
bash: ./myprog: cannot execute binary file 
```

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:37:14.830

`pyinstaller`创建一个可执行文件，该可执行文件将在运行它的机器上运行。因此，如果您在 Windows 上运行 pyinstaller，它会为 Windows 创建一个可执行文件。Mac、Linux 等也一样，所以我会尝试在你的 Linux 机器上运行 pyinstaller 来为该环境生成一个工作可执行文件。Mac 可执行文件不是 Linux 可执行文件。

这是因为（据我了解）底层 Python 包括某些特定于平台的实现。例如，该`os`模块有一堆有条件的、依赖于平台的导入，它们将被捆绑到可执行文件中。由于它只能访问`pyinstaller`正在运行的平台上可用的任何二进制文件，因此它无法为其他平台生成版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:36:02.147

Linux 检查可执行文件的幻数，Linux 可执行文件的幻数以“DLE elf”开头

执行“od -c YUPUR_FILE”并查看结果

# vb.net - 你能用在 VB 的 ComboBox 中输入的数据填充 ListBox 吗？

> ID：15769446
> 
> 赞同：0
> 
> 时间：2013-04-02T16:34:30.570
> 
> 标签：vb.net, visual-studio-2012, combobox, listbox, populate

我有一个程序，它有许多用户可以输入数据的字段，还有一些用户可以从中选择数据的组合框。

我的问题是是否可以使用这些选定的数据来填充一个列表框或多个列表框（每个字段一个）。

我目前有这个填充组合框的代码：

```
 Private Sub BusinessSalesPage_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Me.ComboBox1.Items.AddRange(New String() {"0", "1-2", "3-9", "10-19", "20-49", "50-99", "100+"})
    Me.ComboBox2.Items.AddRange(New String() {"0", "0-1", "2-4", "5+"})
    Me.ComboBox3.Items.AddRange(New String() {"<£1k", "£1k-£5k", "£5k-£10k", "£10k-£29k"})
    Me.ComboBox4.Items.AddRange(New String() {"1-10", "10-20", "20-50"})
    Me.ComboBox5.Items.AddRange(New String() {"<£50k", "£50k-£100k", "£100k-£250k"})
    Me.ComboBox6.Items.AddRange(New String() {"Limited", "Partnership", "PLC"})
    Me.ComboBox7.Items.AddRange(New String() {"Established more than 5 years", "Established in 2007", "Established in 2008", "Established in 2009"})
    Me.ComboBox8.Items.AddRange(New String() {"CEO", "Deputy Head", "Manager", "Other"})
    Me.ComboBox9.Items.AddRange(New String() {"Marketing", "Energy Provider", "Retail", "IT"})
    Me.ComboBox10.Items.AddRange(New String() {"Post Code", "Account Number", "Phone Number", "Business Name"})
End Sub 
```

是的，我是 VB 的新手，在此先感谢。

值得注意的是，我正在使用 TabPages 浏览表单。

编辑：

我只想从一个文本框获取用户输入并将其显示到一个列表框中这是我目前所拥有的：

```
 Dim postcode As String = String.Empty

    postcode = TextBox16.Text

    If postcode = "" Then
        MessageBox.Show("Please enter a postcode")
    Else

    End If 
```

不确定需要进入 ElseIf 什么才能使 inout 进入 ListBox1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:10:58.577

你只需要在下面

```
 listbox1.Items.Add(postcode) 
```

# android - 具有新布局的空指针异常

> ID：15769449
> 
> 赞同：0
> 
> 时间：2013-04-02T16:34:46.087
> 
> 标签：android, layout, layout-inflater

我遇到了下一个问题：

*   我有一个具有自己布局的活动，称为`camera_layout`，当我在该文件中的所有布局都正常时，
*   现在为了在我的扩展表面视图上显示一些视图，我添加了另一个布局，其中包含这些视图的代码
*   为了在添加surfaceview之后将此线性布局添加到包含我的扩展surfaceview的框架布局中，在我的`oncreate`方法中我使用设置了一些视图 `findviewbyid`，
*   此刻一切都好
*   在我的`onpreview` 方法上之后，我在我设置的视图中得到了一个空指针异常。

这是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Log.d("Function", "onCreate iniciado");
    setContentView(R.layout.camera_layout);

    //tFrame=new Target_Frame(this);
    cViewActual=(CView)findViewById(R.id.cViewActual);
    bestMatchCView=(CView)findViewById(R.id.cViewBestMatch);

    actualCLabelTextView=(TextView)findViewById(R.id.textViewActualC);
    bestMatchLabelTextView=(TextView)findViewById(R.id.BestMatchtextViewLabel);
    coNametextView=(TextView)findViewById(R.id.textViewCName);

    mCamera=getCameraInstance();
    mPreview=new CameraPreview(this,mCamera,cViewActual,bestMatchCView,colorNametextView);          
    FrameLayout preview=(FrameLayout)findViewById(R.id.camera_preview);

    hasFlash=checkFlash(this);
    flashActivated=false;
    flashButton=new ImageButton(this);

    flashButton.setImageResource(R.drawable.flashofficon);
    LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);
    params.gravity=Gravity.CENTER;

    flashButton.setLayoutParams(params);
    addListenerToFlashButton();

    preview.addView(mPreview);

    preview.addView(flashButton);
    View  itemLayout = LayoutInflater.from(getApplicationContext()).inflate(R.layout.item_bar_layout,null,false);
    preview.addView(itemLayout);
} 
```

我的相机布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <Button
            android:id="@+id/button1"
            android:layout_width="5dp"
            android:layout_height="5dp"
            android:layout_gravity="top|left"           
            android:text="Button" />

    </FrameLayout>

</LinearLayout> 
```

以及我想要放置在表面视图上的视图布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="113dp"
    android:layout_height="fill_parent"
    android:gravity="right"
    android:id="@+id/itemToolLayout" 
    android:orientation="vertical">

    <TextView
        android:id="@+id/textViewActualC"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Actual Color"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <com.example.prueba.CView
        android:id="@+id/cViewActual"
        android:layout_width="50dp"
        android:layout_height="50dp" />

    <TextView
        android:id="@+id/BestMatchtextViewLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Best Match"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <com.example.prueba.CView
        android:id="@+id/cViewBestMatch"
        android:layout_width="50dp"
        android:layout_height="50dp" />

    <TextView
        android:id="@+id/textViewCName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Color Name"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/button_capture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Capture" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:42:02.327

采用

```
actualCLabelTextView=(TextView)findViewById(R.id.textViewActualC); 
```

代替

```
actualCLabelTextView=(TextView)findViewById(R.id.textViewActual); 
```

`textViewActual`因为当前 Activity 布局中不存在带有 id 的 TextView`textViewActualC`

如果应用程序崩溃，请始终附上相关的 logcat 结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:39:49.873

我改变了一些错误的东西，我在这里发布了新代码，问题是我的 cViewActual 和之后的所有视图都是空的，因为它们不在我的主要布局文件中，我认为在膨胀视图之后 - >itemlayout 与我的辅助布局文件的布局我可以使用 findViewById 访问该布局的视图，但似乎这没有找到视图，现在我更改了一些东西以在 itemlayout 视图上使用 findViewById，现在我可以找到二级布局的视图

这是我修改后的代码：

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Log.d("Function", "onCreate iniciado");
    setContentView(R.layout.camera_layout);

    FrameLayout preview=(FrameLayout)findViewById(R.id.camera_preview);

    hasFlash=checkFlash(this);
    flashActivated=false;
    flashButton=new ImageButton(this);

    flashButton.setImageResource(R.drawable.flashofficon);
    LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);
    params.gravity=Gravity.CENTER;

    flashButton.setLayoutParams(params);
    addListenerToFlashButton();

    View  itemLayout = LayoutInflater.from(getApplicationContext()).inflate(R.layout.item_bar_layout,null,false);

    tFrame=new Target_Frame(this);
    cViewActual=(ColorView)itemLayout.findViewById(R.id.colorViewActual);   
    bestMatchCView=(ColorView)itemLayout.findViewById(R.id.colorViewBestMatch);
    actualColorLabelTextView=(TextView)itemLayout.findViewById(R.id.textViewActualColor);
    bestMatchLabelTextView=(TextView)itemLayout.findViewById(R.id.BestMatchtextViewLabel);
    colorNametextView=(TextView)itemLayout.findViewById(R.id.textViewColorName);
    mCamera=getCameraInstance();
    mPreview=new CameraPreview(this, mCamera,cViewActual,bestMatchCView,colorNametextView);

    preview.addView(mPreview);
    preview.addView(flashButton);
    preview.addView(itemLayout);
} 
```

# matlab - 在一个相当小的矩阵上内存不足

> ID：15769454
> 
> 赞同：0
> 
> 时间：2013-04-02T16:34:54.210
> 
> 标签：matlab

我正在对一个相当小的视频进行运动检测。56 帧 288x384xRGB。我保留了它的两份副本，所以它应该达到大约 40 Mb 的顶部，包括我的其他变量。

现在，这条线给了我一个内存不足的错误

```
output = uint8(zeros(this.videoHeight,2.*this.videoWidth,3,size(this.originalFrames,4))); 
```

打字记忆报告

```
 >> memory
Maximum possible array:             202 MB (2.114e+08 bytes) *
Memory available for all arrays:    863 MB (9.045e+08 bytes) **
Memory used by MATLAB:              527 MB (5.526e+08 bytes)
Physical Memory (RAM):             3071 MB (3.220e+09 bytes)

*  Limited by contiguous virtual address space available.
** Limited by virtual address space available.
>> 
```

我是 MATLAB 新手，但对编程并不陌生。我不明白什么？

***编辑*** 所以我做了一些处理：

```
 disp(this.videoHeight)
        disp(2.*this.videoWidth)
        disp(size(this.originalFrames,4)) 
```

产生：

```
288

768

54 
```

所以，它实际上比我建议的要小......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:39:40.557

我没有详细查看，但如果 Matlab 没有产生很多开销，我会感到惊讶。您使用的内存可能比您想象的要多得多。

尝试调低您处理的帧数，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:47:09.120

你应该使用

```
zeros(..., 'uint8') 
```

而不是

```
uint8(zeros(...)) 
```

避免先以双精度创建数组，然后将其复制到`uint8`数组中。

# python - 无法将列表导入 MySQL - Python、Tweepy 和 MySQL.Connector

> ID：15769462
> 
> 赞同：1
> 
> 时间：2013-04-02T16:35:07.337
> 
> 标签：python, mysql, mysql-connector, tweepy

我已经编写了以下代码。我非常接近让它工作，我几乎可以品尝和闻到它。

我正在使用 mysql.connector、tweepy、python 3.2 和 xampp 堆栈。我正在创建一个独特的表来保存来自用户的最后 3200 条推文。我正在循环运行它，我可以将所有结果打印到屏幕上；绝对没有问题。当我尝试写入 MYSQL 数据库时出现问题。该表创建良好，列也是如此。

编辑：

在@Yarkee 和@bernie 的帮助下，我将其编辑为以下内容：

```
tweet_created_date = str(tweet.created_at)
list = [tweet.id, tweet.text, tweet_created_date,
                    tweet.geo, tweet.contributors, tweet.coordinates,
                    tweet.favorited, tweet.in_reply_to_screen_name,
                    tweet.in_reply_to_status_id, tweet.in_reply_to_status_id_str,
                    tweet.in_reply_to_user_id, tweet.in_reply_to_user_id_str,
                    tweet.place, tweet.retweeted, tweet.retweet_count,
                    tweet.source, tweet.truncated]
sql = ("""INSERT INTO %(table_name)s (tweet_id, tweet_text,
    tweet_created_at, tweet_geo, tweet_contributors,
    tweet_coordinates, tweet_favorited,
    tweet_in_reply_to_screen_name, tweet_in_reply_to_status_id,
    tweet_in_reply_to_status_id_str, tweet_in_reply_to_user_id,
    tweet_in_reply_to_user_id_str, tweet_place,
    tweet_retweeted, tweet_retweet_count, tweet_source,
    tweet_truncated) VALUES (%s, %s, %s, %s, %s, %s, %s, %s,
    %s, %s, %s, %s, %s, %s, %s, %s, %s)""" % dict(table_name=table_name))
cursor.execute(sql, list) 
```

我现在有一个`TypeError: not enough arguments for format string`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:47:35.150

MySQLdb 使用`%s`paramstyle，例如：`(%s,%s,%s)`. 它不使用`?`paramstyle。参考： http: [//mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:54:54.640

您需要`'%s'`以`'%%s'`.

```
>>> '%(a)s, %s, %s' % dict(a='x')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not enough arguments for format string
>>> '%(a)s, %%s, %%s' % dict(a='x')
'x, %s, %s' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:52:35.187

最终代码如下。表名是根据当前 unix 时间值和用户的屏幕名称的组合单独且唯一地生成的。

```
 tweet_list = [tweet.id, tweet.text, tweet.created_at, tweet.geo, 
    tweet.contributors, tweet.coordinates, tweet.favorited, 
    tweet.in_reply_to_screen_name, tweet.in_reply_to_status_id, 
    tweet.in_reply_to_status_id_str, tweet.in_reply_to_user_id, 
    tweet.in_reply_to_user_id_str, tweet.place, tweet.retweeted, tweet.retweet_count, 
    tweet.source, tweet.truncated]

    sql = ("""insert into %(table_name)s (tweet_id, tweet_text,
    tweet_created_at, tweet_geo, tweet_contributors, tweet_coordinates,
    tweet_favorited, tweet_in_reply_to_screen_name,
    tweet_in_reply_to_status_id, tweet_in_reply_to_status_id_str,
    tweet_in_reply_to_user_id, tweet_in_reply_to_user_id_str,
    tweet_place, tweet_retweeted, tweet_retweet_count, 
    tweet_source, tweet_truncated) VALUES (%%s,%%s,%%s,%%s,%%s,%%s,
    %%s,%%s,%%s,%%s, %%s,%%s,%%s,%%s,%%s,%%s,%%s)""" 
    % dict(table_name=table_name))

    cursor.execute(sql, tweet_list) 
```

非常感谢您提供的所有帮助，我希望这对将来的某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T08:56:21.957

使用 Python 3（甚至 Python 2.6 或 2.7），您应该利用 string.format()。使用更简化的示例来展示如何使用它：

```
cnx = mysql.connector.connect(database='test')
cur = cnx.cursor()

stmt = "INSERT INTO {table} (c1) VALUES (%s)".format(
    table='t1'
) 
data = ('ham',)
cur.execute(stmt, data)
cnx.commit() 
```

使用 format() 您不必转义 %s 参数标记。（请注意，我使用的是原始问题中使用的 MySQL 连接器/Python。）

# jquery - 我怎么知道有多少具有特定背景颜色的元素？

> ID：15769465
> 
> 赞同：0
> 
> 时间：2013-04-02T16:35:15.087
> 
> 标签：jquery, html, css

我有一张桌子。当我点击一个 td 时，它会为该 td 添加背景颜色，颜色取决于选中的单选按钮，然后它将计算有多少 td 具有 xxx 背景颜色。

您可以查看[JSFiddle](http://jsfiddle.net/hyNMN/3/)上的演示。您必须先选中一个单选按钮。

这是我的 JS。

```
var method1 = 0;
var method2 = 0;
var method3 = 0;
var method4 = 0;
var method5 = 0;
var clickedTeeth;

$('td').click(function(){
    if($('input[type=radio]').is(':checked')) {
            var clickingTeeth = $(this).attr('id');
            if(clickedTeeth == clickingTeeth) {

        } else {
            clickedTeeth = clickingTeeth;
            var color;
            var value = $("input:radio:checked").val();
            value = parseInt(value);
            switch(value){
                case 1:
                    color = 'red';
                    break;
                case 2:
                    color = 'blue';
                    break;
                case 3:
                    color = 'green';
                    break;
                case 4:
                    color = 'yellow';
                    break;
                case 5:
                    color = 'purple';
                    break;
            }
            $(this).css('background-color',color);
            updateResult();
        }

} else {
    alert('You must check radio button first');
}
});

function updateResult(){
    $('td').each(function(){
        if($(this).css('background-color') == 'red'){
            method1++;
        }
        if($(this).css('background-color') == 'blue'){
            method2++;
        }
        if($(this).css('background-color') == 'green'){
            method3++;
        }
        if($(this).css('background-color') == 'yellow'){
            method4++;
        }
        if($(this).css('background-color') == 'purple'){
            method5++;
        }
    });
    alert(method1); // Alert amount of red here.
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:51:42.003

在你的情况下：

```
var method1 = 0;
var method2 = 0;
var method3 = 0;
var method4 = 0;
var method5 = 0;
var clickedTeeth;

$('td').click(function(){
   if($('input[type=radio]').is(':checked')) {
        var clickingTeeth = $(this).attr('id');
        if(clickedTeeth == clickingTeeth) {

        } else {
            clickedTeeth = clickingTeeth;
            var color;
            var value = $("input:radio:checked").val();
            value = parseInt(value);
            switch(value){
                case 1:
                    color = 'red';
                    updateResult(++method1);
                    break;
                case 2:
                    color = 'blue';
                    updateResult(++method2);
                    break;
                case 3:
                    color = 'green';
                    updateResult(++method3);
                    break;
                case 4:
                    color = 'yellow';
                    updateResult(++method4);
                    break;
                case 5:
                    color = 'purple';
                    updateResult(++method5);
                    break;
            }
            $(this).css('background-color',color);
        }

  } else {
    alert('You must check radio button first');
  }
});

function updateResult(method){
 alert(method); // Alert amount of red here.
} 
```

# sql - 查找具有匹配主键的两个表的最新日期

> ID：15769470
> 
> 赞同：1
> 
> 时间：2013-04-02T16:35:43.810
> 
> 标签：sql

我有两个表，每个表都有不同人的主键和每个类别中的联系日期。我试图找到每个人最近的联系日期，不管它在哪个表中。例如：

CustomerService 列：CustomerKey、DateContacted CustomerOutreach 列：CustomerKey、DateContacted

我只是想找到每个人的最新日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:41:53.267

使用这样的东西。

您需要合并这两个表。你可以通过工会来做到这一点。会有重复，但您只需按 customerKey 分组，然后找到 Max DateContacted

```
SELECT * INTO #TEMP FROM (
SELECT 
    CustomerKey
    , DateContacted
FROM CustomerService CS
UNION
SELECT 
    CustomerKey
    , DateContacted
FROM CustomerOutreach CS
)

SELECT
    CustomerKey
    , MAX(DateContacted)
FROM #TEMP
GROUP BY
    CustomerKey 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:50:22.697

在主键上加入您的表并进行条件投影。

```
 Select cs.CustomerKey, 
         CASE WHEN cs.DateContacted  <= co.DateContacted   
                 THEN co.DateContacted  
                 ELSE cs.DateContacted END  
      from CustomerService cs inner join CustomerOutreach co
           on cs.CustomerKey = co.CustomerKey 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:57:09.960

我会做这样的事情。

```
Select b.customerKey, b.dateContacted
from (
  select a.customerKey, a.DateContacted, Row_Number() over (Partition by customerKey      order by DateContacted desc) as RN
  from (
    Select c.customerKey, 
     case when (s.DateContacted > o.dateContacted) then s.dateContacted else o.datecontacted end as DateContacted
    from Customer c
    left outer join customerService s on c.customerKey = s.customerKey
    left outer join customerOutreach o on c.customerKey = s.customerKey
    where s.customerKey is not null or o.customerKey is not null
  )a
)b
where b.RN = 1 
```

如果两个表具有相同的最大 DateContacted，则此解决方案应注意防止出现重复的情况。

[http://sqlfiddle.com/#!3/ca968/1](http://sqlfiddle.com/#!3/ca968/1)

# actionscript-3 - Flex 4.5 , 如何创建通用皮肤库并动态更改我的 AIR 应用程序的主题？

> ID：15769472
> 
> 赞同：2
> 
> 时间：2013-04-02T16:35:48.010
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, flashcatalyst

我正在开发企业级 AIR 应用程序，我需要为多个客户端更改我的应用程序 UI，它有一个复杂的 UI，包含超过 250 个 MXML 皮肤文件，用于所有显示对象，如按钮、组合框、容器等，是是否可以创建一个通用皮肤库来通过 CSS 管理皮肤和资产，或者我必须为每个客户端创建一个单独的库？

目前我正在为每个客户端复制皮肤文件并更改 CSS（皮肤库的 default.css）和皮肤中的路径数据中的颜色值（样式）。

有没有什么简单的方法可以在 flex 4.5 中创建皮肤主题并在库中管理资产（图标、fxg）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:52:40.233

## 创建自定义主题

我想您已经知道这一点，但是创建自定义主题很简单：

*   为每个组件创建自定义皮肤
*   创建`defaults.css`文件来分配这些皮肤，并可能提供一些额外的样式信息
*   确保 css 文件包含在 swc 中
*   使用编译器标志应用主题`--theme`（或通过 IDE 提供的任何方式）

## 应用不同的配色方案

您可以使用`chromeColor`和其他一些预定义样式来解决此问题，但这种方法可能会受到限制。我通过用我自己更精细的版本替换 Spark 皮肤基类来解决这个问题。这里有太多代码要粘贴，但归结为：

我创建了一个这样的界面：

```
public interface IColorizedSkin {

    function colorizeBorder(color:uint, lowLight:uint, highLight:uint):void;
    function colorizeBackground(color:uint, lowLight:uint, highLight:uint):void;
    function colorizeShadow(color:uint):void;

} 
```

我在我的自定义版本中实现了这个接口：

*   火花皮肤
*   SparkButtonSkin
*   ColorizedItemRenderer

这三个函数是从一个被覆盖的函数中调用的，`updateDisplayList`并使用自定义 CSS 样式名称，例如`chromeBorderColor`（它是一个颜色数组，表示组件边框的基色、低光颜色和高亮颜色）。
所有需要着色的皮肤都扩展了这些基类。

主题库`defaults.css`中带有默认配色方案，但您可以通过向客户端应用程序添加另一个具有不同着色指令的 css 文件来覆盖它。
请注意，由于这些自定义样式名称并未作为元数据添加到组件中，因此您只能通过 CSS 或 ActionScript 分配这些颜色，而不能通过 MXML 属性。

## 着色图标

如果您有一个使用足够中性颜色的图标集（例如，所有图标都是深灰色，或者可能是灰色渐变），您也可以将它们着色。
适用于纯色的最简单方法是这样的：

```
 if (iconDisplay) {
        var colorTrans:ColorTransform = new ColorTransform();
        colorTrans.color = getStyle("color");
        iconDisplay.transform.colorTransform = colorTrans;
    } 
```

如果您需要更细粒度的东西，则必须使用变换矩阵。

## 使用不同的图标

我不会将图标烘焙到皮肤中，因为这会降低灵活性。我倾向于在库 swc 中包含图标，因此可以从那里访问它们。
如果您需要为不同的客户端应用程序设置不同的图标集，只需为每个集创建一个仅包含这些资产（即没有编译代码）的 swc。只要这些 swc 中的名称和路径相同，您就应该能够用一个替换另一个。

# jsp - 在显示标签分页中提交表单

> ID：15769473
> 
> 赞同：2
> 
> 时间：2013-04-02T16:35:56.020
> 
> 标签：jsp, spring-mvc, portlet, displaytag

我正在使用 spring portlet mvc 和 JQuery。问题是，当我单击 displayTag 中的分页链接时，我需要提交表单（例如，当我尝试转到第二页时）

```
<form:form id="myForm" action="${formAction}" method="post" modelAttribute="myBean" enctype="multipart/form-data">

<portlet:actionURL var="viewListURL" portletMode="view">
     <portlet:param name="action" value="${ServletContextKeys.MY_ACTION}"/>  
</portlet:actionURL>

    <display:table id="displayImpGasto"
                   name="${myList}"       
                   requestURI="${viewListURL}"   
                   htmlId="impList"
                   class="displayTagTable"
                   uid="imp" 
                   pagesize="10">
        <display:column>
           //Whatever
        </display:column>
     </display:table>

</form:form> 
```

只是这样做，不提交表单。任何的想法..？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:52:05.870

要在分页链接上提交表单，您需要覆盖显示标记的属性，您可以通过创建一个名为 displaytag.properties 的自定义属性文件并将其放置在应用程序类路径中（通常是 WEB-INF/classes）。他们需要定义属性 paging.banner.first,paging.banner.last,paging.banner.page.link 以获取更多信息，请通过此[链接](http://www.displaytag.org/1.2/configuration.html)。例如 ：

```
paging.banner.page.link :<a  onclick="this.form.action='{1}';this.form.submit();" title="Go to page {0}">{0}</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:52:01.613

按照上面帖子的想法：

```
<script type="text/javascript">
function submitPagination(url) {
    jQ("#formPagoParcial").attr('action', url);
    jQ("#formPagoParcial").submit();
}
</script>

 <display:setProperty name="paging.banner.page.link"> 
   <a href="javascript:void(submitPagination(&#39;{1}&#39;))" title="Go to page {0}">{0}</a> 
 </display:setProperty> 
```

这正在按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T15:29:53.270

我通过将表格插入另一个jsp并使用struts2标签“include”来包含它来解决它。此外，您必须在标签“display:table”中使用 Displaytagin 的属性：-requestURI="yourAction"-excludedParams="*"

[可显示的文档](http://www.displaytag.org/10/tagreference-displaytag-12.html)

# jsp - 我们如何在 JSP 的会话变量中存储按钮文本？

> ID：15769475
> 
> 赞同：0
> 
> 时间：2013-04-02T16:35:56.747
> 
> 标签：jsp

存在一个 JSP 问答网站。答案显示在 html 按钮中。有 5 个问题，每个问题有 4 个答案（因此，每个问题有 4 个按钮）。我想将用户单击的按钮的值存储到会话中，以便我可以将所有 5 个答案传递到下一页。

你能为此提出一个方法吗？

谢谢。

# oracle - 如何创建oracle DSN？

> ID：15769476
> 
> 赞同：2
> 
> 时间：2013-04-02T16:35:56.920
> 
> 标签：oracle, odbc

我已经尝试远程下载任何类似于 oracle odbc 驱动程序的东西，但我仍然无法为 oracle 生成 DSN。

我什至没有看到 oracle 驱动程序出现在 odbc 创建向导中！

我看到的只是 SQL 服务器和 SQL 本地客户端的驱动程序。

如何为 oracle 创建系统 DSN？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:40:35.473

您需要使用 32 或 64 位 ODBC 管理客户端。

64 位版本的 Microsoft Windows 操作系统包括以下版本的 Microsoft 开放式数据库连接 (ODBC) 数据源管理器工具 (Odbcad32.exe)： 32 位版本的 Odbcad32.exe 文件位于 % systemdrive%\Windows\SysWoW64 文件夹。64 位版本的 Odbcad32.exe 文件位于 %systemdrive%\Windows\System32 文件夹中。

看：

[http://support.microsoft.com/kb/942976](http://support.microsoft.com/kb/942976)

# backbone.js - 主干 + 布局管理器（主干样板）集合在 beforeRender 中为空

> ID：15769479
> 
> 赞同：0
> 
> 时间：2013-04-02T16:36:05.110
> 
> 标签：backbone.js, backbone-boilerplate, backbone-layout-manager

我正在做一个项目来测试这个骨干样板（[https://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)），但我在渲染视图时遇到了问题。我第一次调用 beforeRender，集合（图片）是空的，因为 Flickr 照片的获取仍在进行中。但是当加载数据时，我可以在我的 Pics.Collection 的“解析”函数中看到它们（带有断点），我的视图的 beforeRender 再也不会被调用。

我的 router.js ：

```
 define([
    // Application.
    "app",

    "modules/pics"
],

function(app, HomePage, Pics) {

    // Defining the application router, you can attach sub routers here.
    var Router = Backbone.Router.extend({
        initialize: function() {
            // Init collections
            var collections = {
                pics: new Pics.Collection()
            };
            console.log('collec');
            // Register in the router
            _.extend(this, collections);
        },

        routes: {
            "": "pics"
        },

        pics: function() {
            this.reset();

            app.useLayout().setViews({
                "#content": new Pics.Views.List({ pics: this.pics }),
                "header": new Backbone.View({
                    tagName: "span",
                    beforeRender: function() {
                        this.$el.html("Header Pics");
                    }
                })
            }).render();

            this.pics.fetch();
        },

        reset: function() {
            if (this.pics.length) {
                this.pics.reset();
            }
        }
    });

  return Router;

}); 
```

我的模块 pics.js ：

```
define([
    "app"
], function(app) {

    var Pics = app.module();

    Pics.Model = Backbone.Model.extend({ });

    Pics.Collection = Backbone.Collection.extend({
        model: Pics.Model,
        url: function() {
            return "http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=?";
        },
        cache: true,
        parse: function(obj) {
            return obj.items;
        }
    });

    Pics.Views.Item = Backbone.View.extend({
        template: "pics/item",
        tagName: "li",

        serialize: function() {
            return { model: this.model };
        },

        initialize: function() {
            this.listenTo(this.model, "change", this.render);
        }
    });

    Pics.Views.List = Backbone.View.extend({
        template: "pics/list",

        serialize: function() {
            return { collection: this.options.pics };
        },

        beforeRender: function() {
            this.options.pics.each(function(pic) {
                this.insertView("#pics-list", new Pics.Views.Item({
                    model: pic
                }));
            }, this);
        },

        initialize: function() {
            this.listenTo(this.options.pics, {
                "reset": this.render(),
                "request": function() {
                    this.$("ul").parent().html("<img src='/app/img/spinner-gray.gif'>");
                }
            });
        }
    });

    return Pics;
}); 
```

list.html（模板）：

```
<h1>Liste des photos</h1>
<div>
    <div class="loading"></div>
    <ul id="pics-list"></ul>
</div> 
```

item.html（模板）：

```
<li>
    <img src="<%= model.get("link") %>" />
</li> 
```

索引.html：

```
<main role="main" id="main">

      <nav>
          <ul>
              <li><a href="">Home</a></li>
          </ul>
      </nav>
      <header></header>
      <aside></aside>
      <section id="content"></section>
      <footer>
          Copyright 2013
      </footer>

  </main> 
```

两天以来，我在论坛上和我自己搜索是否存在现有问题，但我找不到问题所在。

在此先感谢，皮埃里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:13:28.233

我发现了问题，听“同步”事件而不是“更改”。

# perl - 如何构建 Perl 扩展 XML::Sablotron？

> ID：15769482
> 
> 赞同：1
> 
> 时间：2013-04-02T16:36:24.813
> 
> 标签：perl

尝试安装[XML::Sablotron](http://search.cpan.org/perldoc/XML%3a%3aSablotron)时出现错误。我需要做什么才能成功构建此模块？

### `perl -V`

```
我的perl5（revision 5 version 14 subversion 2）配置总结：
平台：
osname=cygwin，osvers=1.7.15(0.26053)，archname=cygwin-thread-multi-64int
uname='cygwin_nt-5.1 winxp 1.7.15(0.26053) 2012-05-09 10:25 i686 cygwin'
config_args='-de -Dlibperl=cygperl5_14.dll -Dcc=gcc-4 -Dld=g++-4 -Darchname= i686-cygwin-threads-64int -Dmksymlinks -Dusethreads -Accflags=-g'
提示=推荐，useposix=true，d_sigaction=define
useithreads=define，usemultiplicity=define
useperlio=define，d_sfio=undef，uselargefiles=define，usesocks=undef
use64bitint=define，use64bitall=undef，uselongdouble=undef
使用mymalloc=n，bincompat5005=undef
编译器：
cc='gcc-4', ccflags ='-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -g -fno-stric t-aliasing -pipe -fstack-protector',
优化='-O3',
cppflags='-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -g -fno-strict-aliasing - pipe -fstack-protector'
ccversion=''，gccversion='4.5.3'，gccosandvers=''
intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=12345678
d_longlong=定义，longlongsize=8，d_longdbl=定义，longdblsize=12
ivtype='long long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lsee ksize=8
alignbytes=8，原型=定义
链接器和库：
ld='g++-4', ldflags =' -Wl,--enable-auto-import -Wl,--export-all-symbols -Wl ,--enable-auto-image-base -fstack-protector -L/ usr/local/lib'
libpth=/usr/local/lib /usr/lib /lib
libs=-lgdbm -ldb -ldl -lcrypt -lgdbm_compat
perllibs=-ldl -lcrypt
libc=/usr/lib/libc.a，so=dll，useshrplib=true，libperl=cygperl5_14.dll
gnulibc_version=''
动态链接：
dlsrc=dl_dlopen.xs，dlext=dll，d_dlsymun=undef，ccdlflags=''
cccdlflags=' ', lddlflags=' --shared -Wl,--enable-auto-import -Wl,--export- all-symbols -Wl,--enable-auto-image-base -L/usr/local/ lib -fstack-protector'

此二进制文件的特征（来自 libperl）：
编译时选项：MULTIPLICITY PERL_DONT_CREATE_GVSV
                    PERL_IMPLICIT_CONTEXT PERL_PRESERVE_IVUV
                    PERL_USE_SAFE_PUTENV USE_64_BIT_INT USE_ITHREADS
                    USE_LARGE_FILES USE_PERLIO USE_PERL_ATOF
                    USE_REENTRANT_API
 本地应用的补丁：
    错误#55162 File::Spec::case_allow 性能
    CYG07 $vendorarch/auto/.rebase
    CYG15静态Win32CORE
    CYG17 cyg-1.7 路径-utf8
    0c612ce82 修复在 cygwin 上构建静态扩展，-UUSEIMPORTLIB
    1bac5ecc1 修复 64 位线程 sv.c：S_anonymise_cv_maybe
    Cygwin::sync_winenv 添加
在cygwin下构建
编译于 2012 年 7 月 12 日 14:17:21
@INC：
/usr/lib/perl5/site_perl/5.14/i686-cygwin-threads-64int
/usr/lib/perl5/site_perl/5.14
/usr/lib/perl5/vendor_perl/5.14/i686-cygwin-threads-64int
/usr/lib/perl5/vendor_perl/5.14
/usr/lib/perl5/5.14/i686-cygwin-threads-64int
/usr/lib/perl5/5.14
/usr/lib/perl5/site_perl/5.10
/usr/lib/perl5/vendor_perl/5.10
/usr/lib/perl5/site_perl/5.8
```

Cygwin 版本是 2.774。[pango库](http://sourceforge.net/mailarchive/message.php?msg_id=30388786)有问题，但我认为这不是以下问题

我尝试构建时遇到的错误`XML::Sablotron`（之后`perl makeFile.PL`）：

```
make[1]: 进入目录`/usr/src/XML-Sablotron-1.01/DOM'
make[1]: 离开目录`/usr/src/XML-Sablotron-1.01/DOM'
make[1]: 进入目录`/usr/src/XML-Sablotron-1.01/Situation'
make[1]: 离开目录`/usr/src/XML-Sablotron-1.01/Situation'
make[1]: 进入目录`/usr/src/XML-Sablotron-1.01/SXP'
make[1]: 离开目录`/usr/src/XML-Sablotron-1.01/SXP'
make[1]: 进入目录`/usr/src/XML-Sablotron-1.01/Processor'
make[1]: 离开目录`/usr/src/XML-Sablotron-1.01/Processor'
gcc-4 -c -DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -g -fno-strict-aliasing -pipe -fstack-protector -DUSEIMPORTLIB -O3 -DVERSION=\"1.01\" -DXS_VERSION=\"1.01\" "-I/usr/lib /perl5/5.14/i686-cygwin-threads-64int/CORE" -DPERL_POLLUTE Sablotron.c
在 Sablotron.xs:88:0 包含的文件中：
DOM/DOM.h: 在 Funktion »__createNodeOld«:
DOM/DOM.h:90:17：警告：Typkonvertierung von Zeiger auf Ganzzahl anderer Breite
在 Sablotron.xs:88:0 包含的文件中：
DOM/DOM.h：在 Funktion »__checkNodeInstanceData«：
DOM/DOM.h:120:22：警告：Zeiger von Ganzzahl anderer Breite 中的 Typkonvertierung
DOM/DOM.h：在 Funktion »__createNodeNew«：
DOM/DOM.h:153:5：警告：Typkonvertierung von Zeiger auf Ganzzahl anderer Breite
在 Sablotron.xs:89:0 包含的文件中：
Processor/Processor.h：在 Funktion »MessageHandlerMakeCodeStub« 中：
Processor/Processor.h:122:7: Fehler: »sv_undef« 未声明（在此函数中首次使用）
Processor/Processor.h:122:7: Anmerkung: 只报告每个未声明的标识符     
每个函数出现一次
Processor/Processor.h：在 Funktion »MessageHandlerLogStub«：
...
在 Sablotron.xs:91:0 包含的文件中：
Situation/Situation.h：在 Funktion »_SV2SXP_Node«：
Situation/Situation.h:113:19：警告：Zeiger von Ganzzahl anderer 中的 Typkonvertierung     
布雷特
./DOM/DOM.xsh: 在 Funktion »XS_XML__Sablotron__DOM_parse«:
./DOM/DOM.xsh:53:30：警告：Zeiger von Ganzzahl anderer Breite 中的 Typkonvertierung
……
（Processor/Processor.xsh 和 Situation/Situation.xsh 的错误相同）
```

当然，最好的方法是不要使用 Sablotron。但因为时间关系，我宁愿不改变一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:38:41.387

你刚刚表现出一个非常危险的特质。你犯了一个错误，例如：

```
Processor/Processor.h：在 Funktion »MessageHandlerMakeCodeStub« 中：
Processor/Processor.h:122:7: Fehler: »sv_undef« 未声明
```

并做了一系列毫无根据的假设并得出以下结论：1）问题是 Cygwin 和 Windows 特定的；`perl`2）问题是由配置的事实引起的`use64bitint=define`；和 3) 解决方案是更改整数大小。（顺便说一句，错误消息中德语和英语的混合是怎么回事？）

我刚刚尝试使用我的[perlbrew](http://search.cpan.org/perldoc/App::perlbrew) ed和 MacPorts 构建的库在我的 OSX 10.8 笔记本电脑上安装[XML::Sablotron 。](http://search.cpan.org/XML::Sablotron)`perl``sablotron`

[在Google 上搜索`sv_undef`](https://www.google.com/search?q=perl+sv_undef)会导致一个主题[Old CPAN modules with sv_undef](http://www.perlmonks.org/?node_id=227161)这导致[ExtUtils::MakeMaker](http://search.cpan.org/perldoc/ExtUtils::MakeMaker)：

> `POLLUTE`
> 
> 5.005 版通过为扩展源兼容性提供预处理器宏，继承了旧的全局符号名称。从 5.6 版开始，这些预处理器定义默认不可用。该`POLLUTE`标志指定仍应定义旧名称：
> 
> ```
>  perl Makefile.PL POLLUTE=1 
> ```
> 
> 如果需要在 5.6 或更高版本下成功安装模块，请告知模块作者。

不幸的是，这个简单的解决方案并没有成功构建。

相反，使用[Devel::PPPort](http://search.cpan.org/perldoc/Devel::PPPort)生成一个`ppport.h`您可以用来根据您的系统生成补丁的。

这与 Cywgin 或 32 vs 64 位无关。您的问题与使用[很久以前](http://markmail.org/message/lvgwrrxdkcgn2s3h)`XML::Sablotron`不推荐使用的东西有关。

# php - 返回列的多个值

> ID：15769484
> 
> 赞同：-3
> 
> 时间：2013-04-02T16:36:27.670
> 
> 标签：php, sql

我在我的数据库中创建了一个诊所表，其中包含诊所的详细信息，例如。ClinicID（主键）、姓名、地址、电子邮件等。我有另一个名为 Doctor 的表，它根据 ClinicID 列出诊所中医生的姓名。问题是，在一个诊所中，每个诊所可能有超过 1 名医生。如何在 html 表格中显示诊所的详细信息，该表格将列出所有详细信息，包括诊所可用的所有医生？

诊所表

```
clinicID
name
address
email 
```

医生桌

```
clinicID
nameOfDoctor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:38:25.177

```
select nameOfdoctor from Doctor where ClinicId=1 
```

将向您显示诊所 1 的医生名单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:39:48.297

您必须拨打两次电话来整理每个查询中的信息：

```
$raw_clinics = //sql query to get clinic data
$doctors = //sqlquery to get doctors data
$clinics = array();

foreach($raw_clinics as $c) {
    $clinics[$c['clinicID']] = $c;
}

foreach($doctors as $d) {
    if (!isset($clinic[$d['clinicID']]['doctors'])) $clinic[$d['clinicID']]['doctors'] = array();
    $clinic[$d['clinicID']]['doctors'][] = $d;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:44:34.010

你需要两个迭代循环来得到这个（假设你想要一个诊所列表）：

```
$clinicResult = $mysqli->query("SELECT * FROM Clinic");
while ($clinicData = $clinicResult->fetch_assoc()) {
    //Insert your HTML statements regarding clinic details here
    $doctorResult = $mysqli->query("SELECT * FROM Doctor WHERE clinicID = ".$clinicData['clinicID']);

    while ($doctorData = $doctorResult->fetch_assoc() {
        //Insert your HTML statements regarding doctors here
    }
} 
```

# windows - shell32.dll：GetOpenFileName 新线程期间的访问冲突

> ID：15769488
> 
> 赞同：1
> 
> 时间：2013-04-02T16:36:42.580
> 
> 标签：windows, shell32, getopenfilename, createthread

GetOpenFileName 因访问冲突而失败。文件必须在桌面上并且具有长名称。只有在第一次成功打开文件后才会出现问题。当鼠标光标悬停在文件上时会出现问题，因为工具提示即将显示。

请参阅下面的答案。我将在下面留下原始问题描述。

迈克 D。

========================

我正在使用 GetOpenFileName。我有时会在 shell32 内部遇到访问冲突。第一次使用此代码时不会发生违规，通常需要五六次尝试。此外，如果在打开文件窗口弹出后的一两秒内选择一个文件，则不会发生违规。此外，我调试时显示的调用堆栈不包括我的任何代码。就好像一些独立的线程正在醒来做某事。

任何关于我如何调试这个的见解都非常感谢！

我制作了一个“你好”的世界应用程序，表现出相同的行为。然而，它需要更多的尝试才能失败。似乎还必须在失败之前切换目录。

GOFN 是通过专门为此目的创建的线程完成的。下面是来自“hello world”应用程序的代码。

```
typedef struct 
{
public:
    HWND        hWnd;
    HINSTANCE   hInst;
} def_params, *p_params;

DWORD WINAPI ReadLogFile_DataRecorderThread (PVOID pvoid);

void ReadLogFile_DataRecorder (HWND hWnd, HINSTANCE hInst)  // ***************************
{
    static def_params Params;

    Params.hWnd = hWnd;
    Params.hInst = hInst;

    HANDLE T = CreateThread (NULL,0,ReadLogFile_DataRecorderThread,&Params,0,NULL);

    CloseHandle (T);

    return;
}

DWORD WINAPI ReadLogFile_DataRecorderThread (PVOID pvoid)   
{
    p_params P = (p_params) pvoid;

    HWND hWnd = P->hWnd;
    HINSTANCE hInst = P->hInst;

    char    ReadLogFileLastDir[256];

//  static def_OpenFileHook Hook;

    OPENFILENAME    ofn;
    char            fn[MAX_PATH]="\0";
    char            filter[32]="Text Files\0*.TXT;\0\0";
    char            title[]="Open IMC Data Recorder Log File";
    char            defext[]="TXT";
    int             status;

// Get File Name

    fn[0] = '\0';
    ReadLogFileLastDir[0] = '\0';

    ZeroMemory(&ofn, sizeof(ofn));

    ofn.lStructSize         = sizeof(ofn);
    ofn.hwndOwner           = hWnd;
    ofn.hInstance           = hInst;
    ofn.hInstance           = (HINSTANCE) GetWindowLong (hWnd, GWL_HINSTANCE);

    ofn.lpstrFilter         = filter;
    ofn.nFilterIndex        = 0;
    ofn.lpstrCustomFilter   = NULL ;
    ofn.nMaxCustFilter      = 0 ;
    ofn.lpstrFile           = fn;
    ofn.nMaxFile            = sizeof(fn);
    ofn.lpstrFileTitle      = NULL;

    if (ReadLogFileLastDir[0] == '\0')
    {
        SHGetSpecialFolderPath (NULL,ReadLogFileLastDir,0x0005,false);
    };
    ofn.lpstrInitialDir = ReadLogFileLastDir;
    ofn.lpstrTitle          = title;
    ofn.Flags               = OFN_FILEMUSTEXIST  | 
                              OFN_PATHMUSTEXIST  | 
                              OFN_EXPLORER       | 
                              // OFN_ENABLETEMPLATE | 
                              OFN_ENABLESIZING   | 
                              // OFN_ENABLEHOOK     |
                              OFN_READONLY;
    ofn.lpstrDefExt         = NULL;
    ofn.lpfnHook            = NULL;         // Hook.DialogHook; // hook routine
    ofn.lCustData           = NULL;          // (long) &Hook;       // data for hook routine
    ofn.lpTemplateName      = NULL;          // MAKEINTRESOURCE(IDD_HOOKFILEOPEN);
    ofn.nFileOffset         = 0 ;
    ofn.nFileExtension      = 0 ;
    ofn.lpstrDefExt         = defext;

    status = GetOpenFileName (&ofn);

    int S;

    S = CommDlgExtendedError();

    return 0;
} 
```

当它失败时，调用堆栈看起来像这样......

```
SHELL32! 7ca4e035()
SHELL32! 7cb2dc16()
SHELL32! 7cb2dd5a()
SHELL32! 7cb27361()
SHELL32! 7c9f40a3()
BROWSEUI! 75f81b9a()
SHLWAPI! 77f69548()
NTDLL! 7c927545()
NTDLL! 7c927583()
NTDLL! 7c927645()
NTDLL! 7c92761c()
KERNEL32! 7c80b50b() 
```

抱歉，我无法获得这些符号，因为我有一个旧的 Visual C++ :-(

在我看来，当鼠标光标悬停在文件名上时，当 GOFN 内容即将打开描述文件的弹出窗口时，就会出现问题。

**导致问题的一系列情况有些奇怪。实验表明，必须在 GOFN 窗口中执行以下操作：**

*   在桌面上打开文件
*   将鼠标悬停在长文件名上

如果我这样做两次，它总是失败。我使用的文件名是

IMCLOG_20120323_1658_-_20120324_0653_CST_+DST_E2_2_second.TXT

**我用记事本尝试了同样的事情，同样的问题发生了！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:26:33.007

我发现了许多相同问题的报告。例如：

[Social.MSDN 问题报告](http://social.msdn.microsoft.com/forums/en-US/vcgeneral/thread/ea702e63-4f6e-4497-a554-f3cda396d05d)
[CodeProject 问题](http://www.codeproject.com/Questions/201333/CFileDialog-and-ToolTip-Text-Crash-Exception)
[CodeGuru 线程](http://forums.codeguru.com/showthread.php?386414-CFileDialog-Tooltip-Program-Termination)

还有一个谷歌缓存的链接指向一个自删除的 MS Connect 错误报告。正如您所发现的，该问题似乎特定于桌面中的文件。

我发现的唯一建议解决方案是`CoInitializeEx(NULL)`在线程开始时调用，并`CoUninitialize()`在结束时调用，所以值得一试。

此外，MSDN 文档`GetOpenFileName()`说：

> 从 Windows Vista 开始，“打开”和“另存为”常用对话框已被“常用项对话框”取代。

所以它可能值得`GetOpenFileName()`完全丢弃。

# java - 当 JPanel 显示在屏幕上时，如何获得通知

> ID：15769489
> 
> 赞同：2
> 
> 时间：2013-04-02T16:36:46.553
> 
> 标签：java, swing, notifications, render

我有一个应用程序，它根据用户输入更改 JFrame 的全部内容。我通过删除包含当前组件的 JPanel 并将其替换为具有新组件的新 JPanel 来做到这一点。之后，其中一个组件需要获得焦点，并且 JScrollpane 应该滚动到该组件。在大多数情况下，这可以正常工作。现在有一个场景导致添加了一个 JPanel，它本身包含 500 多个组件。渲染它需要一些时间，并且似乎在 UI 未完全渲染的地方调用了 scrollRectToVisible()。如果我调试，我实际上可以看到它首先滚动到正确的位置，但随后完成了进一步的渲染，并且组件再次移出视口。

所以我试图找到一个监听器，它在渲染完成后被调用。我尝试使用 ComponentListener 和 AnchestorListener。两者都没有收到我所期待的大部分事件。但即使他们这样做了，回调方法也会在屏幕上显示任何 UI 更改之前被调用。

我在 EDT 中交换 JPanel，然后在 JFrame 上调用 validate()。之后我不再处理任何代码。但是，如果我在最后执行的行中设置断点并更进一步，屏幕上的 UI 并没有改变。EDT 正在积极地做某事（我假设渲染 UI）。当 EDT 完成渲染时，我想收到通知。

我尝试过的另一件事：如果我创建另一个只休眠几秒钟的线程（直到 UI 确定呈现）并调用 scrollRectToVisible() ，那么一切正常。

很抱歉没有提供 SSCCE。我试过了，但它似乎相当复杂。我真的很感激任何关于如何在 UIbeeing 完全呈现并且对用户可见的通知上的想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:49:15.947

> 如果我创建另一个只休眠几秒钟的线程（直到 UI 确定呈现）并调用 scrollRectToVisible() ，那么一切正常。

无需休眠，只需将 scrollRectToVisibl() 代码包装在 SwingUtilities.invokeLater() 中。这会将代码添加到 EDT 的末尾，因此应该在所有其他渲染之后对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:29:40.873

添加属性更改侦听器：

```
 jPanel.addPropertyChangeListener(new PropertyChangeListener() {
        @Override
        public void propertyChange(final PropertyChangeEvent evt) {
            System.out.println(evt);
        }
    }); 
```

产生类似的东西：

```
java.beans.PropertyChangeEvent[propertyName=ancestor; oldValue=null; newValue=javax.swing.JPanel[null.contentPane,0,0,0x0,invalid,layout=javax.swing.JRootPane$1,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=]; propagationId=null; source=javax.swing.JPanel[,0,0,0x0,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=]] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T17:31:51.070

也许 JComponent.addNotify() 是你需要的。如果您覆盖该方法，请确保您也调用了 super.addNotifty()！

# wpf - WPF将列表框绑定到具有子枚举的事物

> ID：15769491
> 
> 赞同：1
> 
> 时间：2013-04-02T16:36:59.050
> 
> 标签：wpf, data-binding, listbox, datatemplate

我有这样的课：

```
public class UIThing {
   public string Name{get;set}
   public IEnumerable<Thing> LotsOfThings;
} 
```

`List`我在( )中有其中一些，`List<UIThings>`我想将它们绑定到 a`ListBox`中，以便将 lotOfThings 成员扩展为`ListBox`. 就像我猜的列表一样。但我无法理解`DataTemplate`需要的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:51:49.487

可以用GridView 可以ComboBox

```
<GridViewColumn Width="100">
    <GridViewColumnHeader Content="Main"/>
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <ComboBox ItemsSource="{Binding Path=GroupsMain, Mode=OneWay}" DisplayMemberPath="Name"  IsEditable="False" SelectedIndex="0" />
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

如果您需要单列中的所有内容，那么按照 Matt Matt 的建议使用 TreeView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:53:00.733

您需要为您的`UIThing`. 在该模板中，您将拥有另一个绑定到您的`LotsOfThings`列表的 ListView。然后，您也可以为您的`Thing`班级添加一个 DataTemplate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T17:35:49.400

这可能会给你一个想法：

我建议你使用`ItemsControl`

```
public class UIThing
{
    public string Name { get; set; }
    public List<string> LotsOfThings { get; set; }
}

private void Button_Click(object sender, RoutedEventArgs e)
{
    UIThing item1 = new UIThing() { Name = "A", LotsOfThings = new List<string>() { "1A", "2A", "3A", "4A" } };
    UIThing item2 = new UIThing() { Name = "B", LotsOfThings = new List<string>() { "1B", "2B", "3B", "4B" } };
    UIThing item3 = new UIThing() { Name = "C", LotsOfThings = new List<string>() { "1C", "2C", "3C", "4C" } };
    UIThing item4 = new UIThing() { Name = "D", LotsOfThings = new List<string>() { "1D", "2D", "3D", "4D" } };

    var list = new List<UIThing>() { item1, item2, item3, item4 };
    itemsControl.ItemsSource = list;
} 
```

这是 XAML：

```
<ItemsControl Name="itemsControl" HorizontalAlignment="Left" Width="100">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Expander Header="{Binding Name}" Margin="0,5" Width="auto">
                <ListBox Width="auto" ItemsSource="{Binding LotsOfThings}" Margin="20,0,0,0" Background="AliceBlue"></ListBox>
            </Expander>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/9Z6zV.jpg)

**编辑：**这是列表框版本

```
<ListBox Name="itemsControl" Margin="0,0,197,0">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <Label Content="{Binding Name}" Margin="0,5"></Label>
                <Border Margin="20,0,0,0" Background="AliceBlue" CornerRadius="10">
                    <ListBox Width="auto" ItemsSource="{Binding LotsOfThings}" ></ListBox>
                </Border>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# c# - 如何使用约束列表进行查询

> ID：15769493
> 
> 赞同：1
> 
> 时间：2013-04-02T16:37:05.843
> 
> 标签：c#, sql

我不确定我是否正确地用了标题。但这里有一个问题：

我有

1.  A `list<int>` `orderIDs`，有超过 200 万个元素，用 C# 创建

2.  SQL Server 中包含两列的表：`"name"`和`"orderID"`

3.  无权在 DB istance 中创建临时表。

在 C# 中检索每个 orderID 的名称集的最快方法是什么？

在我的头顶上，我可以

*   a) 遍历 orderID，每次都更改查询，但这太耗时了
*   b）连接“WHERE”中的所有orderID，但这会使查询很长

有更好的方法来实现这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:13:45.690

如果您可以将平面文件推送到 SQL Server 可以读取的位置，请考虑使用`OpenRowset`( [here](http://msdn.microsoft.com/en-gb/library/ms190312.aspx) ) 或`OpenDataSource`( [here](http://msdn.microsoft.com/en-us/library/ms179856.aspx) ) 函数。

这些允许您将平面文件视为可以连接到数据库中其他表的行集。

但请注意争用 - 如果您有多个客户想要为其自己的 ID 列表查找名称，则您需要在每次查询期间创建文件的不同命名副本。

# ios - iOS：游戏中心帐户能否以某种方式用于自定义 Web 服务的身份验证？

> ID：15769494
> 
> 赞同：1
> 
> 时间：2013-04-02T16:37:11.080
> 
> 标签：ios, game-center, backend

假设我们想要一个 iOS 游戏的自定义后端来管理用户帐户并允许用户相互发送对象，但我们实际上不希望用户为我们的游戏创建一个专用的用户帐户。可以简单地使用 playerID 进行用户管理，但这并不安全。有什么方法可以使用本地游戏中心身份验证来在自定义 Web 服务上进行身份验证？

目前我正在思考“口袋青蛙”游戏如何让玩家向游戏中心的朋友发送礼物。Gamecenter 似乎没有提供此功能，所以我假设他们使用自定义后端，但这样的后端如何验证玩家身份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T17:36:23.817

我不能确定这是否是 Pocket Frogs (PF) 的做法，但基于只有同时玩 PF 的 Game Center (GC) 朋友出现在邻居列表中的事实，我认为它可能会这样工作：

当玩家第一次开始游戏时，他们会从存储在本地的 PF 后端获得一个用户 ID（例如，一个 32 位整数）。一旦玩家拥有此 id，它就可以存储在 GKScore`context`属性下的 GC 排行榜之一中，而不是`value`. 据我所见，PF 几乎会立即自动将每个玩家添加到所有排行榜中。

然后当另一个玩家想要送礼物时，PF 会得到他们所有 GC 朋友的排行榜分数，如果他们有一个有效的分数，他们必须是 PF 玩家，并且`context`可以读取该值来获取他们的 PF id。

这样 PF 后端就可以得到正确的 id，但不需要使用它们的 GC id。

顺便说一下，我尝试了使用挑战发送礼物的想法，它可以工作。请参阅[http://www.lrgdigital.com/ofgame.html](http://www.lrgdigital.com/ofgame.html)了解我尝试过的游戏 - 您必须先赢得游戏才能赠送礼物。它的好处是您可以将礼物发送给您朋友列表中的任何人，而不仅仅是玩游戏的朋友，但也有一些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:11:45.290

不可以。Gamecenter 使用苹果 id，出于显而易见的原因，这是禁止使用的。如果你研究一下游戏中心框架，有一种方法可以让游戏中心成为朋友。

在这里查看如何获取好友数组：[Game Center 好友列表](https://stackoverflow.com/questions/8336971/game-center-friend-list)

# html - 使用 CreateHTMLQuestion 命令在 R 中创建 MTurk Hit

> ID：15769495
> 
> 赞同：5
> 
> 时间：2013-04-02T16:37:13.147
> 
> 标签：html, r, mechanicalturk

我想通过使用 R 中的 MTurK 包来创建 Mechanical Turk Hit。我使用的 R 代码如下：

```
filecontent <- GenerateHTMLQuestion(file="file.html")
print(filecontent)
#filestring <- filecontent [["string"]]
#filestring <- filecontent [["xml.parsed"]]
#filestring <- filecontent [["url.encoded"]]
filecontentForQuestion <- filecontent$string
filecontentForQuestion <- filecontent$xml
filecontentForQuestion <- filecontent$url
print(filecontentForQuestion)
testhit<-CreateHIT(question=filecontentForQuestion,
         title="Title",
         description="Description",
         keywords="Keyword",
         reward="0.05",
         assignments="3",
         duration="3600",
         expiration="20000",
         auto.approval.delay="2590000",
         qual.req=GenerateQualificationRequirement("Approved",">","5"),
     browser = F,
     sandbox=T) 
```

我已经尝试了每个不同的文件内容，但是当我使用这个命令时我总是得到一个错误。不幸的是，我总是收到以下错误：

```
Error (AWS.MechanicalTurk.HTML5ParseError): There was an error parsing the
  HTML5 data in your request.  Please make sure the data is 
  well-formed and validates as HTML5 
```

但是，我使用的 html 文件来自 MTurk API 手册，如下所示：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
<script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/ex
ternalHIT_v1.js'></script>
</head>
<body>
<form name='mturk_form' method='post' id='mturk_form' action='ht
tps://www.mturk.com/mturk/externalSubmit'>
<input type='hidden' value='' name='assignmentId' id='assignmentId'/>
<h1>What's up?</h1>
<p><textarea name='comment' cols='80' rows='3'></textarea></p>
<p><input type='submit' id='submitButton' value='Submit' /></p></form>
<script language='Javascript'>turkSetAssignmentID();</script>
</body>
</html> 
```

如果我使用只有必要占位符的完整空 html5 文档，我会收到相同的错误。有谁知道，为什么这不起作用？

使用 hitlayoutid 参数或 ExternalQuestion 命令有效，因此我想明确使用 GenerateHTMLQuestion 命令。

# matlab - 用元胞数组标记 x 轴

> ID：15769496
> 
> 赞同：1
> 
> 时间：2013-04-02T16:37:13.850
> 
> 标签：matlab

我已经搜索了几个小时的各种论坛，但似乎不可能在 Matlab 中做一个在 excel 中自动执行的事情......我使用 uiimport 将一个 xls 文件导入到两个数组中（？总新手），一个包含我的 x- 的日期轴和其他我要绘制的值。

我有 180 个值。这些日期是每月三个日期，或多或少从 2008 年 5 月到现在，3 月底。

使用

> > 情节（我的数字）
> > 
> > 设置（gca，'XTickLabel'，日期）

仅将 2008 年 5 月的日期放在我的 x 轴上！其他日期都去哪儿了？

而是使用

> > 情节（我的数字）
> > 
> > 设置（gca，'XTick'，我的号码，'XTickLabel'，日期）

给出错误消息“???错误使用==>设置值必须单调递增。”

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:15:46.623

> 其他日期都去哪儿了？

第一个问题的答案是 MATLAB 仅使用与 x 轴上默认 N 个刻度线相对应的前 N ​​个字符串。

> “？？？错误使用 ==> 设置值必须单调递增。”

该错误告诉您您的日期刻度必须均匀分布。您可以获取 MATLAB 自动分配给您的图形的 x 刻度值，而不是使用与您的实际数据点对应的日期，将它们转换为文本，然后将日期重新分配为 x 刻度标签，如下所示：

```
% generate example unevenly spaced date vector
time = [now,now+1,now+25,now+28.5,now+36,now+40,now+51,now+65];
% generate random data points
data = rand(size(time));
% plot time vs data, storing the axes handle in the process
figure;
axH = axes;
plot(axH,time,data)
% get the x-axis tick locations
ticLoc = get(axH,'XTick');
% format tick labels (substitute any date format you wish)
ticLab = cellfun(@(x) datestr(x,'mm/dd'),num2cell(ticLoc),'UniformOutput',false);
% apply tick labels
set(axH,'XTickLabel',ticLab) 
```

MATLAB 的内置函数[`datetick`](http://www.mathworks.com/help/matlab/ref/datetick.html)也执行类似的操作。

但是，如果您之后进行缩放，您将无法获得准确的刻度标签。所以你可能想[`datetick2`](https://www.mathworks.com/matlabcentral/fileexchange/20422-datetick-with-zooming-panning-and-subplots)在文件交换上使用。

如果您在将 Excel 中的日期元胞数组转换为数值数组时遇到问题，请使用：

```
dateNumeric = cell2mat(cellfun(@datenum,dateStrings,'UniformOutput',false)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T22:29:44.763

try `set (gca,'XTickLabel',num2str(dates))`

# javascript - 类名解析不正确

> ID：15769498
> 
> 赞同：0
> 
> 时间：2013-04-02T16:37:16.583
> 
> 标签：javascript, jquery

我有一个函数可以找到类名 fc-id##，它可能是 ex: fc-id3 或 fc-id14

我把它变成了fc-day##。问题是 fc-id14 变成 fc-day1 之类的东西......似乎只解析了第一个数字......

```
$(mondays).each(function () {
    var num = this.className.split(' ')[0].match(/fc-id(\d)/)[1];
    var clsnme = '.fc-day' + num;

    $(this).addClass('monday');
    $(clsnme).addClass('monday');
}); 
```

我怎样才能让它解析整个数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:39:00.373

匹配多个数字 ( `\d`)：

```
var num = this.className.split(' ')[0].match(/fc-id(\d+)/)[1]; 
```

`\d`只匹配一位数字，`\d+`匹配一位或多位数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:39:07.437

它给你的正是你所要求的。`\d`匹配单个数字。如果要匹配*多个*数字，则需要使用`*`（零或多个）或`+`（一个或多个）之类的量词：

```
/fc-id(\d+)/ 
```

# html - 默认选中复选框未提交

> ID：15769500
> 
> 赞同：0
> 
> 时间：2013-04-02T16:37:18.487
> 
> 标签：html

我在网页上有一些复选框，例如：

```
<input type="checkbox"<?php echo $checked; ?> name="stuff[]" value="First" /> 
```

where`$checked`要么是空字符串，要么`checked="checked"`取决于提交的内容。

我提交表单并且（假设至少有一些复选框的名称`stuff[]`被选中），`_POST['stuff']`在 PHP 中是一个选中框的值数组，例如`('first', 'third', 'fourth')`. 但是，如果使用 预先选中复选框，则`checked="checked"`框的值（上例中的“第一个”）将被排除在`stuff`值列表之外。即使用户取消选中该框然后重新选中它，它也会被忽略。

我希望提交的值包括所有已检查的项目，包括预先检查（而不是用户未检查）的项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:39:28.203

如果没有看到代码，我会猜测这`checked="checked"`实际上不是 PHP 代码输出的内容。相反，您可能缺少 a`"`并且它导致 th 元素的其余值被弄乱了。

相反，请执行以下操作：

```
<input type="checkbox" checked="<?php echo $checked; ?>" name="stuff[]" value="First" /> 
```

其中 $checked =`checked`或`null`（没有`"`）

# select - 如何获得特定类的特定'li'的值

> ID：15769501
> 
> 赞同：0
> 
> 时间：2013-04-02T16:37:18.787
> 
> 标签：select, jquery-selectors, click, menuitem

我正在使用 jquery 菜单 UI。当 select 函数被触发时，一个类被添加到选定的项目中，该类用颜色突出显示它，同时取消突出显示先前的选择。在该代码中，我有一个按钮，一旦单击该按钮，我想提醒选择的文本值。问题不在于我无法提醒该值，而是如果我选择列表中的第 3 或第 4 项，则会显示前第三或第二行项目以及已单击的项目的警报框. 我可以使用什么代码将警报值限制为仅使用添加颜色的类突出显示的选择。

```
<script>
              $(function(){

                $(".menu").menu({

                    select: function (event, ui) {

                     $('.selected', this).removeClass('selected');

                         // add the css class as well as get the text value of the selection

                        var selection = ui.item.addClass('selected').text();

                            $("button").click(function(){

                                alert(selection);

                           }); //closes click()

                  }// closes select function

               });// closes menu  

    });
</script>

<ul class="menu" id="menu">
                <li><a href="#" id="artStudies" class="academic"><img src="" alt="" /><h2>Academic: Art Studies</h2></a></li>
                <li><a href="#" id="Literature" class="academic"><img src="" alt="" /><h2>Academic: Literature</h2></a></li>
                <li><a href="#" id="socialSci" class="academic"><img src="" alt="" /><h2>Academic: Social Sciences</h2></a></li>
                <li><a href="#" id="physicalSci" class="academic"><img src="" alt="" /><h2>Academic: Physical/Natural Sciences</h2></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:02:58.190

您在每次选择时将单击事件多次绑定到按钮。去掉按钮点击绑定，放到菜单功能之外。见[小提琴](http://jsfiddle.net/anpsmn/gETye/15/)

```
 $(function () {
   var selection ;
   $(".menu").menu({

     select: function (event, ui) {

       $('.selected', this).removeClass('selected');

       // add the css class as well as get the text value of the selection

       selection = ui.item.addClass('selected').text();

     } // closes select function

   }); // closes menu  

   $("button").on('click', function () {

     alert(selection);

   }); //closes click()
}); 
```

# java - 如何使用 Java 将每个文件存储在 zip 存档中的数组中？

> ID：15769502
> 
> 赞同：1
> 
> 时间：2013-04-02T16:37:22.207
> 
> 标签：java, arrays, compiler-construction, zip, archive

理想情况下，我只想阅读 zip 存档并将每个文件存储在准备编译的 Iterable 中。（假设 zip 仅包含 .java 文件）

像这样的东西会很好，但这不起作用，因为我无法获取 zip 中每个文件的路径。

```
private ArrayList<String> javaFilePaths = new ArrayList<String>();
Iterable<? extends JavaFileObject> = fileManager.getJavaFileObjectsFromStrings(javaFilePaths); 
```

是否可以让每个元素`ArrayList`成为存档中文件的路径？到目前为止，我只能通过 zip 存档并获取所有无用的文件名，因为当我调用`getJavaFileObjectsFromStrings(javaFilePaths);`它时，它不会是文件的完整路径。也许我需要先将每个文件的内容存储在一个新的位置`JavaFileObject`？真的不确定解决这个问题的最佳方法......

有人可以帮忙解决这个问题，事实证明这非常棘手！

`UPDATE:`

考虑将 zip 存档中的每个文件存储`File`为类型数组中的对象`File`

然后调用`getJavaFileObjectsFromFiles(arrayOfFiles);`方法。

解决方案，想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:53:07.490

我会按照您的要求对您的回答发表评论，但评论的长度有限。可以实现您想要的：编译源代码而不将其实际提取到文件系统上的物理文件中。

引用接口[StandardJavaFileManager的 API](http://exoa.postech.ac.kr:8080/java5/api/javax/tools/StandardJavaFileManager.html)

> 此文件管理器创建表示常规文件、**zip 文件条目**或类似基于文件系统的容器中的条目的文件对象

在谷歌搜索我发现以下文章：[使用 javax.tools 创建动态应用程序](http://www.ibm.com/developerworks/java/library/j-jcomp/)

在“Java 编译：概念和实现”部分中，它在“源文件”中声明了以下内容：

> 一个或多个要编译的 .java 源文件。JavaFileManager 提供了一个抽象文件系统，它将源文件名和输出文件名映射到 JavaFileObject 实例。（**这里，文件是指唯一名称和字节序列之间的关联。客户端不需要使用实际的文件系统**。）

下面的文章也做了同样的事情：[动态内存编译](http://www.javablogging.com/dynamic-in-memory-compilation/)

两者都使用 CharSequence 作为编译源。您可以尝试根据上面文章中的解释构建自己的实现，并更改为基于 ZipEntry。否则，您可以将 zip 条目的内容（如您所提到的，您知道它是一个 java 源文件）读入 StringBuffer 并使用其中一篇文章中的实现来编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:18:21.343

您可以扫描 ZIP 文件并保留对其条目的引用。然后从列表中选择条目，提取文件并执行您需要执行的任何操作。最初不必完全读取所有文件。`ZipFile.close()`一个缺点：在处理完 ZIP 存档之前，您不得调用。

例如：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.nio.charset.Charset;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Enumeration;
import java.util.zip.ZipEntry;
import java.util.zip.ZipException;
import java.util.zip.ZipFile;

public class SO {
    static class ZipFileRecord {
        final ZipFile zf;
        final ZipEntry ze;

        public ZipFileRecord(ZipFile zf, ZipEntry ze) {
            super();
            this.zf = zf;
            this.ze = ze;
        }

        public String content() throws IOException {
            InputStream is = zf.getInputStream(ze);
            BufferedReader br = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));
            StringBuilder sb = new StringBuilder();
            String line = null;
            int count = 5;  // limit loop for reduced output
            while ((line = br.readLine())!=null) {
                sb.append(line);
                sb.append("\n");
                if (count--<=0) {
                    sb.append("...\n");
                    break;
                }
            }
            br.close();
            return sb.toString();
        }
    }
    public static class ZipWalker {
        final ArrayList<ZipFileRecord> list = new ArrayList<>();
        ZipFile zf;

        public void scan(String fn) throws ZipException, IOException {
            File f = new File(fn);
            if (!f.exists()) throw new RuntimeException("File not found: " + f);
            zf = new ZipFile(f);
            Enumeration<? extends ZipEntry> entries = zf.entries();
            for (ZipEntry ze : Collections.list(entries)) {
                if (ze.getName().endsWith(".java")) {
                    list.add(new ZipFileRecord(zf, ze));
                }
            }
        }

        public void dump() throws IOException {
            int count = 3;  // limit loop for reduced output
            for (ZipFileRecord fr : list) {
                System.out.println("=============> " + fr.ze);
                System.out.println(fr.content());
                if (count--<=0)
                    break;
            }
            zf.close();
        }
    }
    public static void main(String[] args) throws ZipException, IOException {
        ZipWalker zw = new ZipWalker();
        zw.scan("path/to/your/file.zip");
        zw.dump();
    }
} 
```

值得注意的事情：

1.  该`scan`方法进行扫描，该`dump`方法表示您想要对文件执行的所有其他操作。
2.  `ZipFile.close()`必须在完成 ZIP 文件后调用。`close()`如果已调用，则无法从其条目中读取数据。
3.  代码中的`count`变量是为了输出简洁 - 您需要删除这些变量和相关`if`的 s。
4.  为简单起见，我使用了`Reader`and `UTF-8`。如果您将文件内容呈现给用户，您可能必须处理文件的字符集。您可能还必须处理它以进行编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:01:29.280

我快到了，它可以工作，但是 FileOutputStream 创建文件，我可以在之后简单地删除它，但是有没有办法在不创建文件的情况下做到这一点，而是让它成为虚拟的？请评论我的回答。

```
btnBrowse.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                int returnVal = fileChooser.showOpenDialog(null);
                if (returnVal == JFileChooser.APPROVE_OPTION) {
                    try {
                        isZip = true;
                        ZipFile zipFile = new ZipFile(fileChooser.getSelectedFile());
                        Enumeration<?> enu = zipFile.entries();
                        while (enu.hasMoreElements()) {
                            ZipEntry zipEntry = (ZipEntry) enu.nextElement();
                            File file = new File(zipEntry.getName());
                            InputStream is = zipFile.getInputStream(zipEntry);
                            FileOutputStream fos = new FileOutputStream(file);
                            byte[] bytes = new byte[1024];
                            int length;
                            while ((length = is.read(bytes)) >= 0) {
                                fos.write(bytes, 0, length);
                            }
                            is.close();
                            fos.close();
                            fileArrayList.add(file);
                        }
                        zipFile.close();
                    } catch (IOException ioe) {
                        ioe.printStackTrace();
                    }
                }
            }
        }); 
```

# sql-server-2008 - 如何仅在 SQL 查询中使用 AM/PM 显示时间？

> ID：15769503
> 
> 赞同：7
> 
> 时间：2013-04-02T16:37:23.750
> 
> 标签：sql-server-2008

我有以下问题，我使用的是 SQL Server MS，下面是我的结果。它看起来很简单，但我无法弄清楚。

我的查询：

```
SELECT  RIGHT(CONVERT(VARCHAR(26), Timein, 109), 14) from vwSignIn 
```

**早上 9:12:16:597**会给我这个

 **我想要这个**上午 9:12:16**作为我的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T16:57:23.977

这是一种只有一次转换的方法：

```
SELECT RIGHT(CONVERT(CHAR(20), GETDATE(), 22), 11); 
```

但是，您应该考虑在客户端对其进行格式化，因为字符串格式化更加强大和合适。

在 SQL Server 2012 中，您将能够使用[`FORMAT()`](http://msdn.microsoft.com/en-us/library/hh213505.aspx)，这意味着您不必记住所有这些样式编号（但我仍然认为您最好尽可能在表示层中执行此操作）：

```
SELECT FORMAT(GETDATE(), 'hh:mm:ss tt'); 
```

请注意，[`FORMAT()`相对于其他方法来说是昂贵的](http://sqlperformance.com/2015/06/t-sql-queries/format-is-nice-and-all-but)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-02T16:43:43.707

这是您可以做到的一种方法：

```
CONVERT(VARCHAR(8), Timein, 108) + ' ' + RIGHT(CONVERT(VARCHAR(30), Timein, 9), 2) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/3ac7e/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-11T18:11:49.670

我发现这种方式更优雅一点：

```
SELECT LTRIM(Right(REPLACE(CONVERT(nvarchar(MAX),CAST(GetDate() as smalldatetime), 109),':00:000', ' '), 8)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-21T09:08:22.020

```
SELECT substring(convert(varchar(20), GetDate(), 9), 13, 5) + ' ' + substring(convert(varchar(30), GetDate(), 9), 25, 2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-08T07:50:17.497

我猜最简单的方法是：

```
select ISNULL(CONVERT(VARCHAR(10), Timein, 100), '') 
```**

# jquery - 将 $.getJSON() 与同一子域上的机器一起使用？

> ID：15769507
> 
> 赞同：1
> 
> 时间：2013-04-02T16:37:34.003
> 
> 标签：jquery, json, getjson, same-origin-policy

我的网络服务器的名称是`mybox.ourcorp.ourdomain.com`. 从它我试图对同一子域中的另一台服务器进行 json 调用——`http://otherbox.ourcorp.ourdomain.com/feed`

如果我在我的网络服务器上打开浏览器并将该 URL 粘贴到其中，我会返回 json 数据，没问题。但是将其放入`$.getJSON()`我没有返回任何值：

```
 $.getJSON('http://otherbox.ourcorp.ourdomain.com/feed', function (json) {
               storeDataFeed(json); //<----json is null
        }); 
```

这是同源政策问题吗？我不这么认为，因为它们在同一个子域中？

如果是这样，是否`otherbox`必须以某种方式设置才能使用 jsonp 才能让我走这条路？

有没有办法找出为什么调用`.getJSON`返回null？浏览器控制台中没有消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:35:16.027

是的，不同的子域将被视为跨域请求（[http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)）。

但是，您应该能够将 $.ajax 与 dataType:"jsonp" 一起使用：

```
$.ajax({
 dataType: "jsonp",
 url: "http://otherbox.ourcorp.ourdomain.com/feed",
 success:function(json) {
   storeDataFeed(json); //<----json is null
 }
}); 
```

# javascript - window.onclose 函数

> ID：15769514
> 
> 赞同：19
> 
> 时间：2013-04-02T16:37:55.267
> 
> 标签：javascript, jquery

我使用这个函数来关闭我的窗口。

这是确认框弹出窗口。

```
if(confirm("Sure you want to close the window");
{
     // yes return to submit function
}
else
{
  // no return to Other call function
}

window.onclose = function()
{
  alert('yes');
} 
```

在右上角用 X 符号关闭窗口时，我需要返回 false。我正在尝试使用此`window.onclose`功能，但它没有弹出。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-02T16:43:32.257

不幸的是，弹出窗口没有任何您可以收听的关闭事件，但是当窗口关闭时有一个关闭的属性为真。解决此问题的一个解决方案是启动一个计时器并每秒检查一次子窗口的关闭属性，并在窗口关闭时清除计时器。这是代码：

```
var win = window.open('http://www.google.com','google','width=800,height=600,status=0,toolbar=0');   
var timer = setInterval(function() {   
    if(win.closed) {  
        clearInterval(timer);  
        alert('closed');  
    }  
}, 1000); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-02T16:39:35.537

今天的浏览器无法捕捉到“关闭”事件。

有一个[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)，但是当它被调用时你不能做很多事情，特别是你不能在没有用户同意的情况下阻止窗口关闭，如果你从正在关闭的页面尝试它们，大多数远程操作都会失败。

对于弹出窗口，您可以获取关闭事件，并进行长时间操作，但仅限于打开窗口：

```
 var w = window.open('popup.html');
 w.onbeforeunload = function(){
       // set warning message
 }; 
```

**重要提示**：在最近的 chrome 版本中，`onbeforeunload`只允许你设置警告信息；您可能不会运行额外的逻辑。

# vhdl - VHDL 读取通用默认值

> ID：15769520
> 
> 赞同：1
> 
> 时间：2013-04-02T16:38:10.120
> 
> 标签：vhdl

我想知道是否有办法在综合过程中访问`entities default generic values`或`an entities architectures constants`。

这是出于好奇（我想实现类似的东西）。

**可能的用例**

1）为默认实体生成Testbench：

```
entity testme is
    generic(outputs:integer:=4);
    ports(output:out bit_vector(0 to outputs);
end entity; 
```

在测试台中，我需要生成一个可以连接到输出的信号，而在不知道泛型值的情况下没有办法这样做。

2）我想知道我在实例化 Blockram 时使用的实际大小。在 FPGA 上有 Blockram，可以使用固定的 ram 块，如果需要的 ram 多于一个块中可用的 ram，则将多个块组合在一起。随着技术的变化，可用块的大小可以改变。因此，我编写了一个具有两个通用参数的实体，`memory`并`technology`以尽可能少的 Blockrams 实现了我的记忆。这可能会导致内存大于请求。如果我现在有另一个实体需要内存大小来充分利用它（即循环缓冲区控制器），我必须向它提供所分配内存的实际大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:01:08.767

您必须从顶部（即从测试台）向下推动这些东西。无法检查较低级别的块（尽管我猜您可以将信号带出并返回到顶部！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:23:05.720

您可以使用不受约束的类型，例如：

```
entity example
port(
    i: std_logic_vector;
    o: std_logic_vector
); 
```

在测试台中，您添加定义的向量，例如：

```
....
signal i,o: std_logic_vector(10 downto 0);

begin
   uut: example
   port map(
      i => i,
      o => o
   ); 
```

# node.js - 为什么 Node.js 控制台中没有下划线模块？

> ID：15769521
> 
> 赞同：6
> 
> 时间：2013-04-02T16:38:10.587
> 
> 标签：node.js, underscore.js

我运行以下代码来安装下划线 js 模块：

```
npm install -g underscore 
```

然后我尝试通过节点控制台访问它，但出现以下错误：

```
node
> __ = require('underscore');
Error: Cannot find module 'underscore'
  at Function.Module._resolveFilename (module.js:338:15)
  at Function.Module._load (module.js:280:25)
  at Module.require (module.js:362:17)
  at require (module.js:378:17)
  at repl:1:6
  at REPLServer.self.eval (repl.js:109:21)
  at rli.on.self.bufferedCmd (repl.js:258:20)
  at REPLServer.self.eval (repl.js:116:5)
  at Interface.<anonymous> (repl.js:248:12)
  at Interface.EventEmitter.emit (events.js:96:17) 
```

为什么这个例子不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:49:46.433

我真的不知道为什么，但它确实失败了（在全局安装下划线时，就像你所做的那样）。

如果你在没有 -g 的情况下安装它，它应该可以工作（但是要小心，因为 Node REPL 已经使用 '_' 来保存最后一次操作的结果，如下所述： [Using the Underscore module with Node.js](https://stackoverflow.com/questions/5691901/using-the-underscore-module-with-node-js?rq=1)

你真的需要全局安装吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T20:59:46.333

我只是有同样的问题

```
$ export NODE_PATH=/usr/local/share/npm/lib/node_modules 
```

帮我解决了；这显然取决于您的平台以及 npm 安装它的位置。此外，正如 Javo 的回答中所述，不要在 REPL 中将其命名为 _ 。

# asp.net-mvc - ASP MVC3 - 为多个项目设置下拉列表

> ID：15769523
> 
> 赞同：0
> 
> 时间：2013-04-02T16:38:11.933
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, html.dropdownlistfor

在我的 ASP MVC3 站点的编辑页面上，有一部分代码处理附加到每个模型项的动态数量的代理。下面的代码用于创建要显示的表格行的确切数量

```
 @for (int i = 0; i < Model.Fixed.Count; i++)
    {
        if(!String.IsNullOrWhiteSpace(Model.Fixed[i].AgentId))
        {
           <tr>
            <td>
                @Html.DropDownListFor(model => model.Fixed[i].StateCode,
                 (SelectList)ViewBag.StateCodeList)
            </td>
            <td>
                @Html.EditorFor(model => model.Fixed[i].AgentId)
                @Html.ValidationMessageFor(model => model.Fixed[i].AgentId)
            </td>
          </tr>                
        }
    } 
```

不幸的是，我不确定如何显示与每个代理关联的属性状态代码。现在，此代码是控制器中唯一处理设置下拉列表值的区域：

```
 SelectList tmpList = new SelectList(new[] { "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NA", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "US", "VT", "VI", "VA", "WA", "WV", "WI", "WY" });
        ViewBag.StateCodeList = tmpList; 
```

由于可能有 0 到 100 个代理，我遇到的问题是在它们各自的下拉框中显示与该特定代理关联的正确状态代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:45:06.493

我很快就发现了这个超载：

```
 <td>
                  @Html.DropDownListFor(model => model.Fixed[i].StateCode,
                      (SelectList)ViewBag.StateCodeList, Model.Fixed[i].StateCode)
                </td> 
```

# linux - 签署（和验证）ELF 文件的规范方法？

> ID：15769525
> 
> 赞同：6
> 
> 时间：2013-04-02T16:38:20.973
> 
> 标签：linux, code-signing, digital-signature, elf

我想签署 ELF 文件，最好使用 PGP 密钥，然后能够验证签名。如果这更有意义，我还将使用 Authenticode 或 SSL 证书进行签名。现有选项，例如[signelf](http://sourceforge.net/projects/signelf/)，似乎仅在 copyleft 许可下可用（即使它是 LGPL，但它施加了阻止我使用它的限制）或旧的/未维护的。

我有哪些可以*在专有程序*中使用的选项？

注意：我们可以将问题的范围限制在 Linux 上，即使 ELF 不是 Linux 特有的。

即使在自由（非 copyleft）FLOSS 许可下没有现成可用的程序和/或库，如果出现某种事实上的标准，我也会很感激标准化文档的指针。我不知道，但这就是我问的原因。

* * *

据我所知，所有发行版似乎都依赖于对*包*进行签名并验证这些。总的来说这很好，但我想更进一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T17:42:15.933

正如您提到的写作作为答案，您可以尝试[elfgpg](https://github.com/bartman/elfgpg)。

# rest - 用于将文件和其他数据发送到不同域的 SOAP、REST 或普通 HTTP POST？

> ID：15769529
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:38:29.003
> 
> 标签：rest, post, soap, service, web

我正在为 Web 应用程序上的一些新功能创建和协商规范。新功能包括使用户能够将 PDF 文件连同一些其他数据（名称、创建日期、城市等）发送到不同域上的服务器。所以它实际上是多部分数据，二进制和纯文本混合在一起。

知道这一点，您首选的方法是什么

*   PDF 文件不会超过 5 MB，纯文本数据字段非常小
*   我们的开发时间限制在 10 天左右

接收应用程序的开发人员支持 SOAP（不确定他是要对文件进行编码还是将其作为附件发送），因为它已在他们的应用程序中进行了尝试和测试。我认为我赞成只使用普通的 POST，因为它很简单并且不需要额外的协议。我反对 SOAP 的论点是我们的应用程序是用 Java 编写的，而他们的应用程序是用 .NET 编写的，我不想遇到与 SOAP 的兼容性问题。

我对 Web 服务几乎没有经验，因此任何反对或支持这些技术的论点都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:59:25.760

您被否决的原因是您几乎没有付出任何努力。

在大多数情况下，java 与 .NET 不存在兼容性问题。此外，如果您的供应商（开发人员）已通过某种方法证明是成功的，那么您为什么要花钱开发一个必须专门为您维护的完全独立的解决方案。

听起来您只是在夸夸其谈，因为您希望赢得争论而不是正确的。

# map - 根据clojure中最长的seq来映射向量的惯用方法是什么？

> ID：15769530
> 
> 赞同：11
> 
> 时间：2013-04-02T16:38:34.613
> 
> 标签：map, vector, clojure

```
(map vector [1 2 3] [4 5]) 
```

会给：

```
([1 4] [2 5]) 
```

这里 3 被丢弃。

如果我想自动将那些太短的序列填充到最大长度怎么办？

例如，如果我想得到，惯用的方式是什么

```
([1 4] [2 5] [3 nil]) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T18:35:03.270

```
(defn map-all [f & colls]
  (lazy-seq
   (when (some seq colls)
     (cons (apply f (map first colls))
           (apply map-all f (map rest colls))))))

(map-all vector [1 2 3] [4 5])
;=> ([1 4] [2 5] [3 nil]) 
```

# asp.net-mvc - 如何在 MVC4/Razor 中向访问者显示数据库名称？

> ID：15769535
> 
> 赞同：2
> 
> 时间：2013-04-02T16:38:47.917
> 
> 标签：asp.net-mvc, string, razor, asp.net-mvc-4, connection

我想告诉我的访问者他们当前正在与哪个数据库进行交互。我的应用程序的 web.config 中只有一个实体框架连接字符串。数据库名称（初始目录）是存储在 web.config 中的连接字符串的一部分。

我可以通过包含以下 html 在共享布局中公开整个连接字符串。

```
You are connecting to <span class="databasename">@System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionStringName"].ConnectionString)</span>! 
```

但我不需要整个连接字符串，只需要数据库名称。有没有办法在不涉及控制器或实例化新的 SqlConnection() 的情况下做到这一点？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:41:54.043

你可以尝试这样的事情：

```
@{
    var sqlDB = new System.Data.SqlClient.SqlConnectionStringBuilder(
        System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionStringName"].ConnectionString)
    );
    var dbName = sqlDB.InitialCatalog;
}

You are connecting to <span class="databasename">@dbName</span>! 
```

这将解析连接字符串并返回数据库。或者，如果您想要与连接字符串不同的属性，只需使用对象的不同属性即可`SqlConnectionStringBuilder`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-26T12:27:43.057

我用

```
@using Firm.Applic.Common
@Html.RenderDataSource() 
```

在标记中和这个 HtmlHelper 在一个类中

```
using System.Web;
using System.Web.Mvc;
using System.Configuration;
using System.Data.Common;

namespace Firm.Applic.Common
{
    public static class HtmlHelpers
    {
        public static IHtmlString RenderDataSource(this HtmlHelper htmlHelper)
        {
            var cnstr = ConfigurationManager.ConnectionStrings["ORA"].ConnectionString;
            var builder = new DbConnectionStringBuilder();
            builder.ConnectionString = cnstr;
            return new MvcHtmlString(builder["Data Source"].ToString());
        }
    }   
} 
```

# web - Like Button（社交插件）和自定义 og:type 混淆

> ID：15769536
> 
> 赞同：1
> 
> 时间：2013-04-02T16:38:50.620
> 
> 标签：web, facebook-like, facebook-opengraph, facebook-apps, facebook-social-plugins

不久前，我尝试了 facebook 应用程序，并在我的网站上指定了自定义 og:types。

这是一个图片网站，有大约 20,000 个单独的 URL，每周增长大约 1000 个，我指定的两种对象类型是：

```
<meta property="og:type" content="mynamespace:album" /> 
```

（对于相册的缩略图概览页面，目前大约有 200 个）

```
<meta property="og:type" content="mynamespace:picture" /> 
```

（对于单个图像的详细视图，目前大约有 20,000 个）

但是，我从未开发过自定义应用程序，因为我觉得用户必须登录并授权我的应用程序只是为了喜欢/分享图片是不值得的，所以我最终在这些页面上使用了标准的社交插件“喜欢按钮” .

不幸的是，我忘了删除自定义对象类型。现在社交按钮上的点赞数似乎计算正确，facebook linter 也没有抱怨任何事情，但我有点担心这样留下是否有任何不利影响，因为当我暂时删除自定义类型时（我认为它会默认为 og:type 网站）调试器警告我该对象以前有另一种类型并且数据可能已损坏。它现在再次使用自定义对象类型，直到我找到解决方案......

所以我该怎么做？删除自定义类型还是保留它们？这两种选择的含义是什么？如果用户单击“喜欢”社交插件并找到自定义 og:type，我的内容是否在用户墙上正确共享？

如果有人能在不破坏社交插件中所有累积的用户活动的情况下阐明摆脱这种混乱的最佳方法，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:44:34.160

Facebook 鼓励开发人员使用与内容本身尽可能密切相关的标签使用开放图形标签来标记他们的内容。更改现有标签中的标签不会产生不利影响，这只是 Facebook 输出的警告，以防您错误地更改了标签。

Facebook 使用标签对收到的帖子进行分类（当它第一次被点赞时，Facebook 会向您的页面发送一个抓取工具，以找出它可以做些什么），最后，“任何东西都有帮助”。通过更改标签，不会影响之前发布的帖子的分类，但任何新帖子都会有新的标签信息。

如果您的新标签与内容更接近，请更改。

# sparql - SPARQL 四边形

> ID：15769541
> 
> 赞同：2
> 
> 时间：2013-04-02T16:39:01.570
> 
> 标签：sparql

在 SPARQL中a`QuadPattern`定义[为](https://www.w3.org/TR/sparql11-query/#rQuadPattern)

```
QuadPattern ::= '{' Quads '}'
Quads       ::= TriplesTemplate? ( QuadsNotTriples '.'? TriplesTemplate? )* 
```

由此我了解到 a`QuadPattern`可以为空。但我无法理解原因。空的目的是什么`QuadPattern`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:58:04.247

正如@Antoine Zimmermann 指出的那样，仅仅因为语法允许它并不意味着它是有意义的。

在这种情况下，我相信这样做是为了将语法保持在一定的约束范围内并简化它。如果您不允许`Quads`为空，则必须重新定义`QuadPattern`规则：

```
QuadPattern ::= '{' '}' | '{' Quads '}' 
```

这只会增加不必要的复杂性，尤其是在您使用解析器生成器时

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:03:48.100

例如，使用空的四边形图案，您可以完全删除默认图形：

```
DELETE WHERE { } 
```

但是语法允许某些东西的事实并不一定意味着有一个故意的选择来允许特定的模式。在某些情况下，以更通用的方式定义事物可能更方便。

# android - Android 替换 ViewPager 中的 Fragment

> ID：15769544
> 
> 赞同：1
> 
> 时间：2013-04-02T16:39:04.857
> 
> 标签：android, android-viewpager, fragment

我搜索了替换存储在 ViewPager 中的选项卡中的片段的可能性。我阅读了这个问题的答案[Replace Fragment inside a ViewPager](https://stackoverflow.com/q/7723964/1069981)

一个答案 ( [https://stackoverflow.com/a/13925130/1069981](https://stackoverflow.com/a/13925130/1069981) ) 包含一个基于自 Android 4.2 起受支持的嵌套片段的解决方案。但是这个答案似乎不是正确的解决方案。现有的 Fragment 不会被另一个 Fragment 替换。一个新的片段将被添加（嵌套）到现有的片段中。或者我误解了什么？

现在我想知道我是否有可能根据这个答案替换一个片段，或者许多答案的最佳解决方案是什么？

# python - 在python的代码中获取索引错误

> ID：15769546
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:39:14.460
> 
> 标签：python

```
def fact(n):
    fac = 1
    while (n>1):
        fac = fac*n
        n -= 1

    return fac

z = 0
t = int(raw_input())
nz = []
for i in range(0,t):
    c = 0
    n = int(raw_input())
    z = fact(n)

    z = list(str(z))
    for j in range(len(z)-1,1,-1):
        if z[j] != '0':
            break
        else:
            c +=1
    nz[i].append(c)
for k in range(0,t):
    print nz[k] 
```

你好我得到

> 索引错误：索引超出范围“nz[i].append(c)

这个程序应该计算 N 的阶乘中的尾随零。你能帮我优化我的代码，所以它也可以在 N 的大值下运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:42:40.933

`nz`是空列表。它没有任何元素，所以`nz[i]`总是 raise `IndexError`。也许你的意思是`nz.append(c)`ie。`c`在末尾添加`nz`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:48:08.137

这就是[append()](http://docs.python.org/2/tutorial/datastructures.html)的工作方式：

> list.append(x)
> 
> 在列表末尾添加一个项目；相当于 a[len(a):] = [x]。

因此您可能需要更改`nz[i].append(c)`为`nz.append(c)`，因为您的`i`索引已由 append 函数处理。你实际上假设你`i`的列表中有一个元素，这是错误的，因为你使用的是一个空列表

关于优化，您的问题可能是由于您的递归限制。在你的 python shell 中尝试`import sys; sys.getrecursionlimit()`，你应该会看到类似 1000 的结果。

交换阶乘函数的迭代版本*可能*是一个开始

```
def fact(n):
    r = 1
    for x in range (n):
        r = r * (x+1)
    return r 
```

# html - 在 CSS 中使用图层并使图像显示在菜单前面的方法

> ID：15769547
> 
> 赞同：0
> 
> 时间：2013-04-02T16:39:14.730
> 
> 标签：html, css, menu

我有一个菜单

![在此处输入图像描述](https://i.stack.imgur.com/aoVJm.png)

但想得到这样的结果

![在此处输入图像描述](https://i.stack.imgur.com/S8tda.png)

到目前为止，我有这个：

```
<div id="bottomnav">
    <ul>
        <li>

<a  href="#" target="_blank" title="lamp">
    <img class="swing" src="http://site.cheetos.com.br/static/masterbrand/img/cap1-poste.png" width=250 height=350 style="z-index: 10"  /> 
</a>            

        </li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
    </ul>
    </div> 
```

我添加了z-index，但是我做错了，将图像放在菜单上方可以做什么？请看一下[小提琴](http://jsfiddle.net/e5Vv5/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:50:38.150

**在固定页脚中对齐多个图像**

你想要这样的东西：

```
#bottomnav{
    width: 100%;
    height: 50px;
    background: no-repeat url(http://eurekavi.com/barraroja.png);
    background-size: 100% 100%;
    position: absolute;
    bottom: 0px;
}

#bottomnav ul {
    width: inherit;
    height: inherit;
    list-style: none;
}

#bottomnav ul li {
    width: 25%;
    height: inherit;
    position: relative;
    float: left;
    outline: 1px solid yellow;
}

#bottomnav li img {
    position: absolute;
    bottom: 0;
    left: 0;
} 
```

你的 HTML 看起来像这样：

```
<ul>
    <li>
       <a  href="#" target="_blank" title="lamp"><img ...  /> </a>            
    </li>
    <li>
       <a  href="#" target="_blank" title="lamp"><img ...  /> </a>            
    </li>
    <li>
       <a  href="#" target="_blank" title="lamp"><img ...  /> </a>            
    </li>
</ul> 
```

小提琴：http: [//jsfiddle.net/audetwebdesign/s5GNA/](http://jsfiddle.net/audetwebdesign/s5GNA/)

**一些解释**

您的`bottomnav`父容器绝对位于底部，这很好。

对于`ul`and `li`，继承高度以便从元素底部的位置中排除猜测工作（当您浮动内容时，高度将折叠否则）。

对于`li`，您必须将位置设置为相对并将它们向左浮动。

最后，将图像的左下角绝对定位到 0。

如果可以的话，使您的图像具有相同的尺寸并调整灯座，使它们具有共同的基线，否则，您需要调整`bottom: {n}px`每个图像的设置，其中“{n}”是通过试验找到的某个数字和错误。

# arduino - 在 NetBeans 7.3 中运行 Arduino 程序

> ID：15769550
> 
> 赞同：0
> 
> 时间：2013-04-02T16:39:18.467
> 
> 标签：arduino, netbeans-plugins

我在我的项目中使用 Arduino 和[NetBeans 。](http://en.wikipedia.org/wiki/NetBeans)我最后的工作是从 Arduino 程序切换到[Java](http://en.wikipedia.org/wiki/Java_%28programming_language%29)。我设法安装了一个 Arduino-NetBeans 插件，如*[Arduino - NetBeans Plugin detail中所述](http://plugins.netbeans.org/plugin/46054/arduino)*

我的 Arduino 程序包括

```
Serial.begin(9600); /////// Serial.print(); 
```

我收到一条错误消息，提示“无法解析标识符序列”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-09T13:33:25.610

这是您必须添加到源文件中的内容：

```
#include <Arduino.h>
// imports the Serial class to allow log output
extern HardwareSerial Serial; 
```

那么它将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-03T18:43:19.847

正如cgo回答的那样，您可以添加`extern HardwareSerial Serial;`

[![netbeans arduino 序列号](https://i.stack.imgur.com/RtccG.jpg)](https://i.stack.imgur.com/RtccG.jpg)

或进入您的项目设置，转到 BUILD > C++ COMPILER > PREPROCESSOR DEFINITIONS 并添加：（`__AVR_ATmega328P__`如果您正在使用 Arduino UNO）

[![netbeans arduino 预处理器](https://i.stack.imgur.com/2ZInt.jpg)](https://i.stack.imgur.com/2ZInt.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:19:52.277

消息“无法解析标识符序列”意味着编译器正在搜索变量`Serial`，但找不到它的声明。您应该检查是否正确包含所有头文件。我不知道 NetBeans 插件，但我猜 Serial-structure/class 是在那里初始化的。

如果这没有帮助，您应该检查编译器选项并将它们设置为默认值，如项目站点上所述。

# functional-programming - 我在 OCaml 中实现就地图 BFS 时出现奇怪的错误

> ID：15769555
> 
> 赞同：0
> 
> 时间：2013-04-02T16:39:31.733
> 
> 标签：functional-programming, ocaml

我`in-place graph BFS`在 OCaml 中实现。

这是我的代码：

```
type graph = {s : int list array;num_v:int;mutable num_e : int};;

let bfs u g p =
  let marker = Array.make g.num_v false
  in
  let q = Queue.create()
  in 
  Queue.push u q;
  let rec add_to_queue v = function
    | [] -> ()
    | hd::tl -> 
      if not marker.(hd) then begin
        marker.(hd) <- true;
        Queue.push hd q;
        p.(hd) <- v
      end; 
      add_to_queue v tl
  in 
  **let rec bfs_go =**
    if Queue.length q > 0 then begin
      let v = Queue.pop q
      in 
      print_int v;
      add_to_queue v g.s.(v);
      bfs_go
    end 
  in 
  bfs_go;; 
```

我认为代码很好，但编译器给了我这个错误：

`File "", line 20, characters 4-177: Error: This kind of expression is not allowed as right-hand side of 'let rec'`

看来我的实现`bfs_go`有问题（我用** **标记），但为什么呢？我看不到任何错误。

**编辑：**

`DFS`功能风格

```
let dfs_better u g p =
  let marker = Array.make g.num_v false in
  let rec dfs_go current next =
    match current, next with
      | [], _ -> ()
      | parent::[], [] -> ()
      | parent::next_parent::rest, [] -> dfs_go (next_parent::rest) g.s.(next_parent)
      | parent::rest, node::tl -> 
          if not marker.(node) then begin
            print_int node;
            marker.(node) <- true;
            p.(node) <- parent;
            dfs_go next g.s.(node)
          end;
          dfs_go current tl in 
  marker.(u) <- true;
  dfs_go [u] g.s.(u);; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:44:34.413

你大概是说

```
let rec bfs_go () =
  ...;
  bfs_go () 
```

代替

```
let rec bfs_go =
   ...;
   bfs_go 
```

编辑：我无法抗拒一些改进。

用你的命令式风格：

```
let bfs start graph from =
  let marker = Array.make graph.num_v false in
  let q = Queue.create() in 
  let add_to_queue parent node =
    if not marker.(node) then begin
      marker.(node) <- true;
      Queue.push node q;
      from.(node) <- parent;
    end in
  Queue.push start q;
  while not (Queue.is_empty q) do
    let node = Queue.pop q in 
    print_int node;
    List.iter (add_to_queue node) graph.s.(node)
  done 
```

如果你想要更实用的东西：

```
let bfs start graph from =
  let marker = Array.make graph.num_v false in
  let rec bfs current next = match current, next with
    | [], [] -> ()
    | [], (_::_ as next) -> bfs next []
    | node::current, next ->
      let add parent node next =
        if marker.(node) then next
        else begin
          marker.(node) <- true;
          from.(node) <- parent;
          node :: next
        end in
      print_int node;
      bfs current (List.fold_right (add node) graph.s.(node) next)
  in bfs [start] [] 
```

编辑2：

尝试 DFS 问题，完全未经测试（刚刚编译）：

使用数据结构来处理要访问的节点：

```
let dfs u g p =
  let marker = Array.make g.num_v false in
  let rec dfs_go = function
    | [] -> ()
    | node::next ->
        print_int node;
        let children =
          List.filter (fun child -> not marker.(child)) g.s.(node) in
        List.iter (fun child -> marker.(child) <- true) children;
        dfs_go (children @ next)
  in 
  marker.(u) <- true;
  dfs_go [u];; 
```

仅使用（非尾）递归：

```
let dfs u g p =
  let marker = Array.make g.num_v false in
  let rec dfs_go node =
    print_int node;
    let go_child child =
      if not marker.(child) then begin
        marker.(child) <- true;
        dfs_go child;
      end in
    List.iter go_child g.s.(node)
  in 
  marker.(u) <- true;
  dfs_go u;; 
```

# javascript - excanvas IE8，对方法或属性访问的意外调用

> ID：15769560
> 
> 赞同：1
> 
> 时间：2013-04-02T16:39:38.250
> 
> 标签：javascript, html, canvas, excanvas

嗨，我在 IE8 上收到一个错误，即“意外调用方法或属性访问”。在“foo.appendChild(canvas);”行 我的代码如下。

```
 <canvas id="foo" class="canvasstyle" height="300" width="300"></canvas>

var foo = document.getElementById("foo");
var canvas = document.createElement('canvas');
canvas.setAttribute("width", 300);
canvas.setAttribute("height", 300);
foo.appendChild(canvas);
canvas= G_vmlCanvasManager.initElement(canvas);
var ctx = canvas.getContext('2d');
ctx.save();
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.translate(canvas.width / 2, canvas.height / 2);
    ctx.drawImage(server, -112, -120);
    ctx.rotate(x2 * Math.PI / 180);

        ctx.drawImage( point, -198, -80 );
        ctx.restore(); 
```

有谁知道如何摆脱这个错误并在 IE8 上工作。谢谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T03:17:28.260

我认为您的问题很有可能是您正在将画布插入另一个画布......我想不出一个合理的原因，因为画布元素内的任何内容仅在不支持的浏览器中可见画布，这肯定违反了预期用途。

这是预期用途：

```
<canvas width="600" height="400">
    Your browser can't handle our site and it looks very outdated... Try installing
    <a href="https://chrome.google.com">one that doesn't suck</a>.
</canvas> 
```

在任何支持画布的浏览器上，里面的消息都不会显示。尝试将画布插入另一个元素。

# html - 当页面滚动到某个点时使 div 消失

> ID：15769562
> 
> 赞同：0
> 
> 时间：2013-04-02T16:39:43.930
> 
> 标签：html, css

我有以下代码块，描述了一个 div：

```
#posts{
position:absolute;
left:150px;
top:90px;
width:640px;  
} 
```

我的问题是：当我向下滚动时，它超出了“top：90px”。我想做的是：上面的div内容部分`top:90px`应该是不可见的。

问题是......我不能使用`z-index:(...)`，因为我在这个 div 后面唯一的东西就是背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:47:03.663

```
$(function () {
$(window).scroll(function () {
$('#clickme').click(function() {
if ($(this).scroll() > 100) {
      $('#myDiv').hide('slow', function() {
              alert('Animation complete.');
      });
}
} else {
      alert('Error');
}
});
/*HTML*/
<div id="clickme">
test.
</div> 
```

这将隐藏 div。

# audio - 如何打开 .RAW 文件以查看除 AUDACITY 之外的内容

> ID：15769567
> 
> 赞同：0
> 
> 时间：2013-04-02T16:39:50.680
> 
> 标签：audio, binary

我已经使用 audacity 将一个 mp3 文件转换为 .RAW 格式，现在我想打开它来查看它的二进制内容。

当我用记事本++打开它时... NUL ....符号几乎要了我的命...

如果有人知道一些 .RAW 格式文件的编辑器将会非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T15:20:15.443

只是为了回答我自己的问题......十六进制编辑器是工具

# c# - 如何在 c# 和 ASP.NET 中处理多个连接？

> ID：15769570
> 
> 赞同：0
> 
> 时间：2013-04-02T16:40:03.763
> 
> 标签：c#, sql, connection-string, sqlconnection, pool

这就是我的连接方式

```
SqlConnection conn = new SqlConnection(connectionstring);
conn.open();

SqlCommand comando = new SqlCommand(/*my query update/delete/insert/select o execute sp*/,conn);
comando.Parameters.Add("@parameter1","value1")
comando.Parameters.Add("@parameter2","value2")
comando.Parameters.Add("@parameterN","valueN")
comando.ExecuteNonQuery()

conn.close(); 
```

但服务器管理员说有很多连接。

那么，我该如何执行我的查询呢？

如果我不关闭连接会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:48:20.383

不，最好让连接保持打开状态。使用“使用”命令来管理系统资源。

```
using(SqlConnection conn = new SqlConnection(stringconection))
{
    conn.Open();
    SqlCommand comando = new SqlCommand(/*my query update/delete/insert/select o execute sp*/,conn);
    comando.Parameters.Add("@parameter1","value1");
    comando.Parameters.Add("@parameter2","value2");
    comando.Parameters.Add("@parameterN","valueN");
    comando.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:55:01.680

这是文档中的引用：

> 建议您在使用完连接后始终关闭连接，以便将连接返回到池中。这可以使用 Connection 对象的 Close 或 Dispose 方法来完成。未明确关闭的连接可能不会添加或返回到池中。例如，一个超出范围但没有显式关闭的连接只有在达到最大池大小并且连接仍然有效时才会返回到连接池。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T17:06:32.423

您可以像上面提到的 Mark 一样使用“使用”（我的偏好）。您还可以使用 try-catch-finally 块。

```
try
{
    SqlConnection conn = new SqlConnection(stringconection);

    conn.Open();

    SqlCommand comando = new SqlCommand(/*my query update/delete/insert/select o execute sp*/,conn);
    comando.Parameters.Add("@parameter1","value1");
    comando.Parameters.Add("@parameter2","value2");
    comando.Parameters.Add("@parameterN","valueN");
    comando.ExecuteNonQuery();
}
catch(Exception ex) 
{
   // catch exceptions here 
}
finally
{
    if(comando != null)
    {
        comando.Dispose();
    }
    if(conn != null)
    {
        conn.Dispose();
    }
} 
```

# sql - 如何在给定 1 列的情况下仅显示 1 行在 SQL 中具有相同的值

> ID：15769575
> 
> 赞同：2
> 
> 时间：2013-04-02T16:40:17.453
> 
> 标签：sql, db2

我现在有一个示例输出：我们称它为表 X 和属性 x.name、x.title、x.best x.lowest

```
NAME                 TITLE                     BEST            LOWEST 
-------------------- ------------------------- --------------- -------
Andy Aardverk        Avarice is Good           CARP             215.95
Andy Aardverk        Avarice is Good           YRB Bronze       215.95
Andy Aardverk        Yon-juu Hachi             CARP              41.95
Andy Aardverk        Yon-juu Hachi             YRB Bronze        43.95 
```

鉴于最后一列的重复值为 215.95，我想只显示包含相同值的 2 行中的 1 行。所以我希望它显示这样的东西

```
NAME                 TITLE                     BEST            LOWEST 
-------------------- ------------------------- --------------- -------
Andy Aardverk        Avarice is Good           CARP             215.95
Andy Aardverk        Yon-juu Hachi             CARP              41.95
Andy Aardverk        Yon-juu Hachi             YRB Bronze        43.95 
```

我知道我可以取出 X.best，它会给我关于 X.lowest 的唯一行，但我需要属性 X.best 用于稍后的另一个查询。我试过了

```
select distinct x.name, x.title, x.best, x.lowest 
```

但这无济于事。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:50:19.707

如果最低列重复，或者如果名称、标题和最低列重复，您是否要显示单行？

通常你会有保留哪一行的标准，但如果没关系，一个简单`GROUP BY`的 with `MAX`or`MIN`应该可以工作。这假设您关心名称和标题也是不同的：

```
SELECT name, title, MIN(best) best, lowest
FROM tablex
GROUP BY name, title, lowest 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/56a40/2)

如果您只关心不同的最低字段，您可以使用`ROW_NUMBER()`：

```
SELECT name, title, best, lowest
FROM (
     SELECT name, title, best, lowest, 
        ROW_NUMBER() OVER (PARTITION BY lowest ORDER BY lowest) rn
     FROM tablex
  ) X
WHERE rn = 1 
```

[更多小提琴](http://sqlfiddle.com/#!3/56a40/5)

# c# - 获取特定月份和年份内的交易数量

> ID：15769579
> 
> 赞同：0
> 
> 时间：2013-04-02T16:40:24.980
> 
> 标签：c#, linq

我知道如何获取交易数量，但如何获取特定月份发生的交易数量？

例如，如果我想要 2013 年 3 月的交易？

这是我当前的查询：

```
 textBox_PaymentsCount.Text = 
       (from tot in _entities.Payments
        where tot.CorporationId == _currentcorp.CorporationId && 
         tot.Result != null
          select tot).Count().ToString(CultureInfo.InvariantCulture); 
```

我需要按字段最小化我的查询`TransactionDateTime`。

我尝试指定第一天和最后一天，但最后一天因月而异。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:42:36.083

> 但最后一天因月而异。

您可以只使用当前和下个月的第一天，然后使用`<`下个月：

```
&& TransactionDateTime >= firstDayOfThisMonth 
&& TransactionDateTime < firstDayOfNextMonth 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:43:43.273

我想你正在寻找这样的东西：

```
where tot.TransactionDateTime.Year == year && tot.TransactionDateTime.Month == month 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:43:50.470

`where`在子句中添加另一个条件并使用`DateTime.Month`和`DateTime.Year`属性：

```
tot.DateProperty.Month == 3 && tot.DateProperty.Year == 2013 
```

整个查询应如下所示：

```
textBox_PaymentsCount.Text = 
    (from tot in _entities.Payments
     where tot.CorporationId == _currentcorp.CorporationId && 
     tot.Result != null &&
     tot.DateProperty.Month == 3 && tot.DateProperty.Year == 2013
     select tot).Count().ToString(CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:44:29.653

尝试：

```
var from = new DateTime(2013, 1, 1);
var until = new DateTime(2013, 2, 1);

....
where tot.CorporationId == _currentcorp.CorporationId 
&& tot.Result != null
&& tot.TransactionDateTime > from && tot.TransactionDateTime < until
.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:45:55.530

第一天 i = 1 和最后一天 = 30 或 31 或 28 / 29 创建一个将月份链接到对应最后日期的结构，根据月份输入，它将采用相应的最后一天，然后计算编号。给定月份的交易量

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T16:52:33.320

只需从您那里获取月份和年份 TrasanctionDateTime

tot.TransationDate.Year == 年 && tot.Transaction.Month == 月

# delphi - Delphi - 将分配延迟到输出参数

> ID：15769580
> 
> 赞同：2
> 
> 时间：2013-04-02T16:40:27.427
> 
> 标签：delphi, pointers, rtti, out

在 Delphi 中，假设我有一个带有（非常简化的）签名的方法，如下所示：

```
procedure abc( const prop1:string; const arg1:TValue; const prop2:string; 
  out arg2:TValue ); 
```

我正在使用提供的参数构建这样的记录的 TList<PPropValPair> ：

```
type
  TPVPType = (ptIn, ptOut);
  PPropValPair = ^TPropValPair;
  TPropValPair = record
    io   : TPVPType;
    prop : string;     // property name
    iVal : TValue;     // input value
    oVar : Variant;    // <-- how to save for later use???  Variant? TValue? 
  end; 
```

（从表面上看，这个例子看起来很傻。同样，它只是为了传达问题而非常简化。）

在运行时，我想将所有输入值 ival（其中 io=ptIn）填充到类中的每个公共属性“prop”中，调用类方法，然后提取所有公共属性“prop”的值（其中io=ptOut) 到 oVar。

输入端使用 RTTI 工作正常。

但是，我需要以某种方式将 REFERENCE 保存到 oVar 中的输出变量，以便在调用类方法后保存关联属性的值。

我没有直接为 arg2 分配任何东西。相反，我保存了对 arg2 的引用并稍后间接分配该值。

诀窍是......我不想对 abc(...) 中的输出参数做任何额外的注释。

在 C++ 中，您可以通过在参数前面加上“&”来将参数声明为“引用”。因此，在 C++ 术语中，这可能大致定义为：

```
procedure abc( arg1 : TValue; &arg2 : TValue ); 
```

稍后，您可以参考 &arg2 ，它使用指向对象的指针。但是在调用该函数时，您只需说：

```
abc( somevar1, somevar2 ); 
```

somevar1 通过值传递， somevar2 通过引用传递。在函数内部，我可以将 somevar2 保存在引用 var 中，然后稍后通过说 &arg2ref = 'abc' 通过指针（如果它是一个字符串）为其分配一个值。

我猜在 Delphi 中有一种方法可以做到这一点，或者使用 Variant 作为 oVar 类型，或者使用 RTTI，或者其他东西。我只是还没有弄清楚碎片的神奇组合。（我只是在 Delphi 中不经常使用指针。）

也许我需要在 oVar 中保存一个原始指针以及类型（比如 oType），并通过指针转换一个值来保存属性的值？

我希望这里有人可能有一些明确的想法。

顺便说一句，我正在使用 Delphi XE3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:55:07.307

使用指针。它不必（实际上也不应该）是“原始”指针。使用类型化指针，`PValue`. 将 a 传递`PValue`给您的函数，然后将其存储在 中`oVal`，您还应该声明 aa `PValue`。用于`@`创建指针和`^`取消引用。

我不建议通过`arg2`引用传递。尽管您仍然可以使用`@`它来获取指向传递给的原始变量的指针`abc`，但引用参数掩盖了变量需要无限期保持可用的事实。相反，声明`arg2`这样`PValue`对调用者来说更明显的是涉及间接。

```
// declaration
procedure abc(...; arg2: PValue);

// call
abc(..., @somevar2); 
```

# ms-access - 获得将电子邮件发送到动态地址的访问权限

> ID：15769581
> 
> 赞同：0
> 
> 时间：2013-04-02T16:40:30.793
> 
> 标签：ms-access, vba, ms-access-2010

这是在 Access 2010 中，我对 VBA 几乎没有经验或熟悉。

在我的表单 (frmEmailLookup) 中，我设置了组合框和列表框以及一个子表单，以便当用户从 cmbBuilding 选择建筑物时，表单的其余部分会填充该建筑物的数据，包括最多 4 个的联系电子邮件建筑物中的人员（lstBuildingRepEmail1、lstBuildingRepEmail2、lstBuildingRepEmail3、lstBuildingRepEmail4）。我需要一个按钮（butEmailRecords）来生成一封电子邮件，其中包含来自子表单（qryBuildingAreaLookup）的查询作为附件。我可以设置一个可以关闭的宏，但它不允许动态电子邮件地址。我不希望我的用户必须深入到程序中来进行更新。

感谢您提供任何帮助，我知道我正在寻求大量代码编写帮助。

这是我尝试过的：

```
 Option Compare Database
Private Sub butEmailRecords_Click()
Dim outputFileName As String
outputFileName = CurrentProject.Path & "\BuildingInventory" & ".xlsx"
DoCmd.TransferSpreadsheet acExport,      acSpreadsheetTypeExcel9, "qryBuildingAreaLookup",     outputFileName, True

On Error GoTo Error_Handler
Dim objOutlook As Outlook.Application
Dim objEmail As Outlook.MailItem
Set objOutlook = CreateObject("Outlook.application")
Set objEmail = objOutlook.CreateItem(olMailItem)

Dim rs As DAO.Recordset
Set rs = CurrentDb.OpenRecordset("qryBuildinAreaLookup")
With rs

With objEmail
.To = tblBuilding.BuildingRep1
.To = tblBuilding.BuildingRep2
.To = tblBuilding.BuildingRep3
.To = tblBuilding.BuildingRep4
.Subject = "Look at this sample attachment"
.body = "The body doesn't matter, just the attachment"
.Attachments.Add "L:\Administration\FacilityInventoryDatabase\BuildingInventory.xls    x"
.Send
'.ReadReceiptRequested
End With
Exit_Here:
Set objOutlook = Nothing
Exit Sub

Error_Handler:
MsgBox Err & ": " & Err.Description
Resume Exit_Here
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:08:13.663

这是我使用的基础知识：

```
'Refers to Outlook's Application object
Dim appOutlook As Object

'Refers to an Outlook email message
Dim appOutlookMsg As Object

'Refers to an Outlook email recipient
Dim appOutlookRec As Object

'Create an Outlook session in the background
Set appOutlook = CreateObject("Outlook.Application")

'Create a new empty email message
Set appOutlookMsg = appOutlook.CreateItem(olMailItem)

'Using the new, empty message...
With appOutlookMsg

'SQL statement to grab emails

Set recordset = currentdb.openrecordset('SQL statement')

Do While Not recorset.EOF
Set appOutlookRec = .Recipients.Add(recordset.Email)
appOutlookRec.Type = olTo
recordset.MoveNext
Loop

.Subject = ....
.Body = ....
.Send

End With 
```

这就是我使用的基础知识。我是初学者，所以这可能不是最好的方法，但它应该是一个开始。（我还必须在参考库中添加 Microsoft Oulook。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:28:27.867

我使用 CDO 对象来发送消息，因为我不喜欢依赖 Outlook（任何事情）。

这里有一篇关于使用 CDO 发送邮件（包括可下载的 VBA 代码）的相当全面的文章：

[http://www.cpearson.com/excel/Email.aspx](http://www.cpearson.com/excel/Email.aspx)

# java - JSF 2.0 WITH richfaces 4.2.3 org.apache.jasper.JasperException: /Web/login.jsp(21,20) #{...} is not allowed in template text

> ID：15769583
> 
> 赞同：0
> 
> 时间：2013-04-02T16:40:36.643
> 
> 标签：java, jsf-2, richfaces

我目前正在从事一个项目，我想从 3.3.3 版迁移到 RichFaces 4.2.3。并将 JSF1.2 转换为 JSF2.0 。
部署我的项目后出现一些奇怪的错误。
**“org.apache.jasper.JasperException: /Web/login.jsp(21,20) #{...} is not allowed in template text”**
这是我的 login.jsp 文件

```
<code>

  <?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

</head>
<body>
    <h1>Registration is successful.</h1>
    <a4j:commandButton value="LOGIN"  
        action="#{userBean.validateUser}" />
</body>
</html>
<code> 
```

更奇怪的是，这个错误只发生在**动作标签**
action="#{userBean.validateUser}" 并且使用 value="#{userBean.pwd}"

伙计们请尝试从这里帮助我，我已经浪费了我的一整天有了这个问题。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:44:44.167

看起来 Richfaces 4 及更高版本不支持 JSP

[#{...} 不允许出现在模板文本中](https://stackoverflow.com/questions/12478640/is-not-allowed-in-template-text)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:37:44.093

JSP自 JSF 2.0 起已被[**弃用。**](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)所有从一开始就为 JSF 2.0 设计的组件库将不再支持 JSP。其中包括 RichFaces 4.x。RichFaces 3.x 是一个 JSF 1.x 兼容的组件库，也可以在 JSF 2.0 上使用。由于它最初与 JSF 1.x 兼容，因此它只支持 JSP。

如果您需要迁移到 RichFaces 4.x，您还应该从 JSP 迁移到 Facelets (XHTML)。

### 也可以看看：

*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

# php - PHP：为什么类构造函数不起作用？

> ID：15769585
> 
> 赞同：-2
> 
> 时间：2013-04-02T16:40:41.987
> 
> 标签：php

我创建了 Date() 类。但它没有提供所需的输出。
我的代码

```
<?php
class Date{
    public $day = 1;
    public $month = "January";
    public $year = 2013;

    public function __construct($dy, $mon, $yar){
        $this->day = $dy;
        $this->month = $mon;
        $this->year = $yar;
    }
    public function lessthan($dt){
        if($year != $dt->year)
            return $year - $dt->year;
        if($month != $dt->month)
            return $month - $dt->month;
        return $day - $dt->day;
    }
    public function pr(){
        echo $day;
        echo "<br>";
        echo $month;
        return;
    }
}
$a = new Date(1,"January",2002);
$b = new Date(1,"January",2002);
$a->pr();
$b->pr();
echo "Hello";
?> 
```

它只输出

```
[newline]
[newline]
Hello 
```

我将 __construct() 更改为此

```
public function __construct($dy, $mon, $yar){
        this->$day = $dy;
        this->$month = $mon;
        this->$year = $yar;
    } 
```

但输出仍然相同。错误是什么？

编辑：对不起我的错误。我输入了 this->$day 而不是 $this->day

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T16:42:46.370

您没有正确引用变量，您需要使用

```
$this->day;
$this->month;
$this->year; 
```

尝试将您的课程更新为此

```
class Date{
    public $day = 1;
    public $month = "January";
    public $year = 2013;

    public function __construct($dy, $mon, $yar){
        $this->day = $dy;
        $this->month = $mon;
        $this->year = $yar;
    }
    public function lessthan($dt){
        if($this->year != $dt->year)
            return $this->year - $dt->year;
        if($this->month != $dt->month)
            return $this->month - $dt->month;
        return $this->day - $dt->day;
    }
    public function pr(){
        echo $this->day;
        echo "<br>";
        echo $this->month;
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T16:42:33.057

您的 OOP 不正确：

```
public function __construct($dy, $mon, $yar) {
   $this->day = $dy;
   $this->month = $mon;
   $this->year = $yar;
} 
```

注意`$`在作业中的位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T16:42:54.823

您的类函数和构造函数缺少`$this->`变量以表明它们是类的一部分，而不是在函数内本地设置。：

```
public function __construct($dy, $mon, $yar){
    $this->day = $dy;
    $this->month = $mon;
    $this->year = $yar;
}

public function pr(){
    echo $this->day;
    echo "<br>";
    echo $this->month;
    return;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T16:42:24.160

这是你的变量引用，`$`在第一个对象引用之前，而不是在成员引用之前：

```
public function __construct($dy, $mon, $yar){
    $this->day = $dy;
    $this->month = $mon;
    $this->year = $yar;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-02T16:42:25.103

您需要正确引用您的类变量。例如：

`echo $this->day;`

这需要对类中的每个类变量进行。

# audio - 替换 WAV 标头

> ID：15769588
> 
> 赞同：2
> 
> 时间：2013-04-02T16:41:12.903
> 
> 标签：audio, header, wav

所以这就是我所拥有的：

我面临的问题需要我从 WAV1 获取一个专门的标头，并将其作为 WAV2 的标头，以使 WAV2 与我正在使用的 API 一起工作。但是，每当我尝试将 WAV2 的前 38 个字符替换为 WAV1 的前 38 个字符时，当我尝试播放文件时都会收到错误消息，提示文件格式不正确。WAV1 和 WAV2 在编辑前都能正常播放。

你们知道我做错了什么吗？

非常感谢你的帮助。

-Rhynorater。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:43:46.850

Wav format is a standardised format (see [https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/) for details about file format). I'm not sure what a "specialized" header is (perhaps you could clarify what your specialised header is?) as the format is standard - any variation would not be a wav file.

The first 38 bytes of a wav file are the header and should adhere to the standard. You cannot copy the header from one file and use it for another as the header contains information specific to the individual file (number of channels, sample rate, file length, etc).

If you both files playback normally (how are you testing this?) I'm not sure why the API you are using is not compatible (which API are you using?).

# sql-server-2008 - 未登录 Windows 的 Active Directory 用户的 SQL Server ODBC 连接

> ID：15769590
> 
> 赞同：0
> 
> 时间：2013-04-02T16:41:23.390
> 
> 标签：sql-server-2008, active-directory, odbc

您是否认为可以为未登录 Windows 的活动目录用户创建 SQL 服务器 ODBC 连接。

理想情况下，此类用户将用于批处理。因此，另一个人登录并创建一个批处理并与另一个用户一起运行它。

注意：我不想创建 SQL 服务器身份验证。而是想使用活动目录。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-20T02:49:14.833

您不能将备用 Windows 身份验证凭据保存到 SQL Server 的 ODBC 连接中。如果您使用 SQL Server 身份验证，则只能将凭据保存到 ODBC 设置中。

不过还有其他选择。

即使您创建连接的帐户没有数据库访问权限，您也可以创建到 SQL Server 的 Windows 身份验证 ODBC 连接。您只需取消勾选“连接到 SQL Server 以获取其他配置选项的默认设置”，并且您不能使用“测试连接”功能。你只需要在信仰上建立联系。

使用该连接，只有当您的批处理或应用程序以与登录用户不同的帐户运行时，它才会起作用。作为系统帐户运行的服务会做这种事情。如果您创建一个可以作为服务运行的应用程序，那么您可以更改它运行的帐户。

您也可以手动作为另一个帐户运行。使用资源管理器，您可以 [shift] + 右键单击​​应用程序并选择“以其他用户身份运行”，然后输入其他帐户凭据。然后当进程或应用程序使用 ODBC 连接时，它将以正确的凭据和工作。

还有“ShellRunAs” [https://technet.microsoft.com/en-us/sysinternals/shellrunas.aspx](https://technet.microsoft.com/en-us/sysinternals/shellrunas.aspx)

# python - 创建一个使用卡片列表并生成红色和奇数卡片列表的函数

> ID：15769599
> 
> 赞同：0
> 
> 时间：2013-04-02T16:41:57.963
> 
> 标签：python, class

我必须编写函数 red_odd，它使用卡片列表、手牌列表，并生成红色卡片（即“钻石”或“红心”）且具有奇数值的列表，按照它们出现的顺序排列消费清单。消费列表不能被改变。

例如，

red_odd([card1, card2, card3, card4]) => [card2]

所以到目前为止我有这个：

```
class card:
    'Fields: suit, value'
    def __init__(self, suit, value):
        self.suit = suit
        self.value = value

card1 = card('spades', 8) 
card2 = card('hearts', 5) 
card3 = card('diamonds', 6) 
card4 = card('clubs', 5)

def red_odd(hand):
    card_list = []
    for c in hand:
        if (c.suit == 'diamonds' or c.suit == 'hearts')  and (c.value / 2 != 0):
            card_list.append(c)
    return card_list 
```

它没有运行，我不确定我哪里出错了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:44:23.140

你只需要调用你的函数：

```
odd_red_cards = red_odd([card1,card2,card3,card4])
print(odd_red_cards) 
```

这会给你更多的调试。

* * *

请注意，添加一个`__str__`or`__repr__`函数以使您的卡片打印得更自然一点可能很有用，这对于查找其他错误可能很有用。例如：

```
class card(object):
     ...
     def __repr__(self):
         return '{suit} {value}'.format(suit=self.suit,value=self.value) 
```

# android - HTML5 查找附近的地理位置

> ID：15769607
> 
> 赞同：1
> 
> 时间：2013-04-02T16:42:21.523
> 
> 标签：android, html, cordova, google-maps-api-3, geolocation

我正在创建一个应用程序，我需要该应用程序从用户位置查找最近的汽车租赁，或者如果他们输入邮政编码。目前我已经查看了以前关于堆栈溢出的帖子，并找到了以下找到用户当前位置的帖子。我对此很陌生，所以提前道歉，但我不确定我将如何从这里进行数据显示。

```
<!DOCTYPE html>
<html>
    <head>
        <title>HTML5 Geolocation</title>
        <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script>
            // Integration with google maps
            function loadMap(lat, lng) {
                var latlng = new google.maps.LatLng(lat, lng);

                var settings = {
                    zoom: 14,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                var map = new google.maps.Map(document.getElementById('map_canvas'), settings);

                var marker = new google.maps.Marker({
                    position: latlng, 
                    map: map, 
                    title: 'Your Position!'
                });  

                document.getElementById('status').innerHTML = 'Position Found!';
            }

            // Initialize geolocation
            function initialize() {             
                if (navigator.geolocation) {
                    document.getElementById('status').innerHTML = 'Checking...';

                    navigator.geolocation.getCurrentPosition(
                        onSuccess, 
                        onError, {
                            enableHighAccuracy: true,
                            timeout: 20000,
                            maximumAge: 120000
                        });
                }
                else {
                    document.getElementById('status').innerHTML = 'Geolocation not supported.';
                }
            }

            // Map position retrieved successfully
            function onSuccess(position) {
                var data = '';

                data += 'latitude: ' + position.coords.latitude + '<br/>';
                data += 'longitude: ' + position.coords.longitude + '<br/>';
                data += 'altitude: ' + position.coords.altitude + '<br/>';
                data += 'accuracy: ' + position.coords.accuracy + '<br/>';
                data += 'altitudeAccuracy: ' + position.coords.altitudeAccuracy + '<br/>';
                data += 'heading: ' + position.coords.heading + '<br/>';
                data += 'speed: ' + position.coords.speed + '<br/>';

                document.getElementById('data').innerHTML = data;

                loadMap(position.coords.latitude, position.coords.longitude);
            }

            // Error handler
            function onError(err) {
                var message;

                switch (err.code) {
                    case 0:
                        message = 'Unknown error: ' + err.message;
                        break;
                    case 1:
                        message = 'You denied permission to retrieve a position.';
                        break;
                    case 2:
                        message = 'The browser was unable to determine a position: ' + error.message;
                        break;
                    case 3:
                        message = 'The browser timed out before retrieving the position.';
                        break;
                }

                document.getElementById('status').innerHTML = message;
            }
        </script>
    </head>
    <body onload="initialize()">
        <div id="status"></div>
        <div id="data"></div>
        <div id="map_canvas" style="width: 640px; height: 480px"></div> 
    </body>
</html> 
```

当用户选择当前位置或输入他们的邮政编码时，我如何让应用程序显示最近的汽车租赁列表？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:20:06.367

如果您要构建汽车租赁位置数据库，MongoDB 具有内置的地理定位/地理空间查询功能。一般来说，听起来您需要购买或租用代理列表，将其转换为数据库格式，然后使用 html 中的地理查询查询该数据库。

# javascript - JavaScript 中的“新”运算符

> ID：15769612
> 
> 赞同：2
> 
> 时间：2013-04-02T16:42:27.270
> 
> 标签：javascript, constructor

我试图了解`new`运营商。看看下面的函数：

```
var _new = function(fn) {
    var obj = Object.create(fn.prototype);
    fn.apply(obj);
    obj.constructor = fn; // <--- EDIT: unnecessary
    return obj;
}; 
```

可以这样应用：

```
var Test = function(){
    this.foo = 1;
};

var instance = _new(Test); 
```

当然，它可以很容易地扩展到任意数量的参数（我只是想保持简单）。

它似乎像`new`关键字一样工作。那么有什么区别呢？`new`运算符对对象还有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:48:51.290

你是对的，这基本上`new`是在做什么：创建一个继承自该新对象并引用该新对象进行`Func.prototype`调用的新对象。`Func``this`

不过，您的实现略有不同：如果构造函数 ( `Func`) 不*返回*对象，`this`则*隐式*返回。*如果*它返回一个对象（任何对象），它将成为构造函数调用的返回值。

因此，更准确的复制将是：

```
var _new = function(fn) {
    var obj = Object.create(fn.prototype);
    var result = fn.apply(obj);
    return result != null && typeof result === 'object' ? result : obj;
}; 
```

就是这样。如果您愿意，您可以将其视为语法糖，就像条件运算符一样。

* * *

一些指向引用的指针： 当`new`被使用时，构造函数的内部`[[Construct]]`函数被调用。[规范的第 13.2.2 节](http://es5.github.com/#x13.2.2)描述了究竟发生了什么，它与您（和我）编写的函数几乎相同。

我不完全确定的一点是对象的内部`[[Extensible]]`属性设置为`true`. 我会假设您创建的每个对象`Object.create`默认情况下都是可扩展的（如果它的原型是可扩展的）。

# macos - 删除终端中新标签的“上次登录”消息

> ID：15769615
> 
> 赞同：63
> 
> 时间：2013-04-02T16:42:32.380
> 
> 标签：macos, terminal

经过一番搜索后，我创建了一个`~/.hushlogin`文件并且它可以工作，但仅适用于新窗口。有没有办法让它也适用于新标签？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-11-30T17:41:16.903

在 Mavericks 上，创建空文件 `~/.hushlogin`会删除新窗口和新标签的“上次登录”行。

在我的 Mac 上它可以工作。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-04-23T23:53:12.943

## 解决方案

这是运行 OS X 10.8.3。我没有在其他版本上测试过它，但只要终端有上述选项，它应该可以工作。

1.  在 Terminal.app 中，转到 Preferences->Settings 并选择您正在使用的配置文件。转到“Shell”选项卡，在“启动”标题下，选中“运行命令：”并输入框：

    ```
    login -fpql your-username /bin/bash 
    ```

    替换`your-username`为您的实际 Unix 用户名。如果您使用默认 bash shell 以外的 shell，请替换`/bin/bash`为该 shell 的完整路径（是的，即使您已经在 Preferences->Startup 中设置了它。）

2.  **确保未选中**“在外壳内运行” 。

3.  如果您选择了“关闭前提示：仅当存在除登录 shell 和：以外的进程时”选项，则将“登录”和“bash”添加到它不会提示的进程列表中。

4.  确保你有一个`~/.bashrc`文件，因为这将是 bash 从现在开始在启动时使用的文件，而不是`~/.bash_profile`. 我只有一个文件使用[此方法](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)引用另一个文件。您还需要确保它来自 /etc/profile。

## 解释

我们希望运行`login`选项`-q`来告诉它抑制“上次登录”消息，即使在没有`.hushlogin`文件的情况下也是如此。（如上所述，`login`只会在 cwd 中查找该文件，而不是您的主目录，因此您需要`.hushlogin`在打开 shell 的每个目录中都有一个文件，该方法才能工作。）

问题是终端运行类似于当您创建一个缺少标志`login -pfl your-username /bin/bash -c exec -la bash /usr/local/bin/bash`的新 shell 时（我使用的是自制版本的 bash，因此最后出现了奇怪的 bash 路径） 。`-q`

不幸的是，没有办法直接改变终端使用的参数，所以我们只是`login -pfql`从终端的默认会话中蹦床一个新的登录`login -pfl`会话。不优雅，但它有效。

我们需要有`-q`选项和 bash 路径以保持“新窗口/选项卡打开方式：相同的工作目录”选项正常工作。如果您不关心该选项，则可以删除该标志和参数，并且可能避免上述`.bashrc`内容。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-08-27T16:57:25.283

你可以在`clear`你的`.bash_profile`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-02T17:44:22.737

这可能取决于操作系统版本。在终端 2.3（在 10.8）上，触摸文件`~/.hushlogin`会抑制新选项卡和新窗口的“上次登录”消息。也就是说，它对我有用。

以防万一有助于弄清楚发生了什么（如果您不知道），请注意“最后登录”消息原则上来自`login`(1)，而不是外壳。或者，更准确地说，如果以特定方式调用 shell（包括使用`-l`选项启动它），那么 bash 将“就像作为登录 shell 被调用一样”（zsh 可能具有类似的功能，尽管我可以现在找不到）。现在，*可能*是当 Terminanl 在您的 OS X 版本中打开一个新选项卡时，shell 正在有效地*模拟*打开登录 shell，并且可能会弄错这个细节。但是如果你有 10.8 版本的 bash/zsh（即 3.2.48 / 4.3.11），那我不知道会出现什么问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-11-10T15:03:40.947

添加`~/.hushlogin`很好，除非您想在同一文件夹中打开一个新选项卡，或者在确切的文件夹上从 Finder 打开终端，在这种情况下它将不起作用。

由于奇怪的不必要的方案，我想避免将正在运行的命令更改为另一个登录名`login -> login -> zsh`。您可以在 Activity Monitor 中看到它，但它也会在您退出交互式程序（如 python repl）时显示在 python、login 和 zsh 正在运行的消息中。

放入并不理想，因为在 mac 上它只会打印很多换行符（如果你向后滚动，你会看到它们）`clear`。`~/.zshrc`

到目前为止，我发现的最好方法是添加`printf '\33c\e[3J'`到`~/.zshrc`（或`Terminal/Preferences/Profiles/Shell/Startup/Run command`选中`Run inside shell`）。我选择了`~/.zshrc`文件开头，因为启动命令在它之后运行，如果`~/.zshrc`文件很重，您可以在 printf 执行之前简要地看到 Last Login 消息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-05T15:52:51.187

*一个不更改与登录相关的任何内容*的简单解决方案就是在您的or文件的末尾添加`clear`命令。它将从任何初始化打印中清除初始化中的终端。它非常适合我。`~/.bashrc``~/.zshrc`

# imagemagick - 将 ImageMagick 版本升级到 6.7.8 后，ImageMagick convert pdf to jpeg 文本质量很差

> ID：15769623
> 
> 赞同：34
> 
> 时间：2013-04-02T16:42:55.333
> 
> 标签：imagemagick, imagemagick-convert, pdf-conversion

`ImageMagick`在将 pdf 转换为 jpeg 时，升级文本质量会下降：

**旧图像** ![在此处输入图像描述](https://i.stack.imgur.com/90lQg.jpg)

**新的图像** ![在此处输入图像描述](https://i.stack.imgur.com/Lh5Mt.jpg) 转换命令：`convert foo.pdf foo.jpeg`

**旧 ImageMagick 版本：**

```
[root@home]#  convert -version
Version: ImageMagick 6.2.8 05/07/12 Q16 file:/usr/share/ImageMagick-6.2.8/doc/index.html
Copyright: Copyright (C) 1999-2006 ImageMagick Studio LLC 
```

生成的文件大小：

```
-rw-r--r-- 1 root root 139K Apr  2 16:11 foo-0.jpeg
-rw-r--r-- 1 root root 130K Apr  2 16:11 foo-1.jpeg
-rw-r--r-- 1 root root 334K Mar 24 14:27 foo.pdf 
```

**升级 ImageMagick 后**

```
[root@home]#  convert -version
Version: ImageMagick 6.7.8-10 2012-08-17 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP 
```

生成的文件大小：

```
-rw-r--r-- 1 root root  60K Apr  2 16:11 foo-0.jpeg
-rw-r--r-- 1 root root  55K Apr  2 16:11 foo-1.jpeg
-rw-r--r-- 1 root root 334K Mar 24 14:27 foo.pdf 
```

我试过使用[`antialias`](http://www.imagemagick.org/script/command-line-options.php#antialias)标志：

```
convert -antialias  foo.pdf foo.jpeg 
```

什么都没做，我尝试设置一个更高的值[`quality`](http://www.imagemagick.org/script/command-line-options.php#quality)：

```
convert -quality 100 foo.pdf foo.jpeg 
```

和[超级采样](http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=17658)：

```
convert -density 288 -background white -alpha off foo.pdf -resize 25%  foo.jpeg 
```

两者都提供了更大的文件和更好的结果，但运行时间更长，质量低于旧 ImageMagick 版本。

有什么建议吗？

## [链接到文件](https://docs.google.com/file/d/0B7lQLM2Zf1UDUDNHaVNFQ2lfV00/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-08T08:08:29.577

我看到您的示例文件存在同样的问题。看起来 ImageMagick 的 PDF 转换代表可能已随着新安装而改变。

如果您尝试`convert -verbose foo.pdf foo.jpeg`，您是否`-sDEVICE=pngalpha`在发送到 gs 的命令中看到？pnmraw 设备过去曾使用过，切换回该设备似乎可以解决我的问题。

在 ImageMagick 的`delegates.xml`文件中（可能在 /etc/ImageMagick 中，但可能在其他地方，具体取决于您的设置），查找`decode="ps:alpha"`委托行并将`-sDEVICE=pngalpha`命令更改为`-sDEVICE=pnmraw`. （您可能只在文件中搜索 pngalpha 。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-22T10:00:19.097

似乎**DPI**的问题。转换 pdf 时，imagemagick 使用**Ghostscript**。你可以跳过使用 imagemagick。

```
$ gs -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dGridFitTT=2 -dUseCropBox -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -r200x200 -sDEVICE=jpeg -dJPEGQ=100 -sOutputFile=foo-%05d.jpg foo.pdf 
```

设置 -r 选项更高的值。**Ghostscript**的默认值为 100DPI。

或使用转换选项 -density。此选项设置 pdf 转换后的 DPI。

```
$ convert -density 200x200 foo.pdf foo.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T05:13:29.490

PDF 文件是矢量文件，没有特定的大小。它们的大小通过在读取 PDF 文件之前定义密度和单位来控制。通过超级采样，您可以为相同的所需输出文件大小获得更好的质量。这意味着将 PDF 栅格化为大尺寸，然后调整为所需的实际尺寸。例如在 ImageMagick 中：

```
convert -units pixelsperinch -density 288 image.pdf -resize 25% output.jpg 
```

如果不设置，标称密度为 72 dpi。所以 72*4=288。然后将大小调整 1/5=25% 会恢复到相同的默认大小，但看起来应该会好很多。根据需要更改密度或调整大小以处理质量和最终大小。

# facebook - facebook喜欢我们所做的

> ID：15769626
> 
> 赞同：1
> 
> 时间：2013-04-02T16:43:13.327
> 
> 标签：facebook

我们有几个人在我们的 Facebook 页面上工作，我正在尝试找出是否有办法列出我们喜欢的所有公司——而不是那些喜欢我们的公司。

我知道这是不可能的（除了分析数据）。我们是一家商会，我们喜欢所有在 Facebook 上的会员，希望能够回头看看有多少人实际上在 Facebook 上。

希望这是有道理的，我希望这是可能的。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:03:27.827

当然只需访问：[https](https://developers.facebook.com/tools/explorer) ://developers.facebook.com/tools/explorer （您必须是注册的 facebook 开发人员才能访问此工具）。

然后在你有这个的输入上：

`your_fb_id?fields=id,name`

改成这个

`your_fb_id?fields=id,name,accounts`并按发送。

您将获得您作为管理员的所有页面，通过单击相应的 ID 选择您想要的页面。现在您正在查询您选择的页面。最后一步，在进行查询的输入上将其更改为：

```
your_page_id?fields=likes 
```

**编辑**

上一个请求仅返回页面的总喜欢数。

要获得该页面在其他页面上的点赞，您必须使用**FQL 查询**

从**Graph API**更改为**FQL Query**并粘贴

```
SELECT page_id, name FROM page WHERE page_id IN (SELECT page_id FROM page_fan WHERE uid = your_PAGE_ID) 
```

这无需执行任何代码，如果您想以自己的方式获取信息并对其进行格式化，则必须开发一个应用程序，在其中授予权限 manage_pages 和 user_likes （虽然我认为这不是强制性的） , 使用graph api获取点赞并格式化json返回数据

# mongodb - 如何指定用于存储 mongodb 数据的相对 db 路径？

> ID：15769627
> 
> 赞同：5
> 
> 时间：2013-04-02T16:43:18.200
> 
> 标签：mongodb, configuration

我想为 mongodb 使用相对路径，以便每个用户在运行 mongo 时都有一个单独的数据目录。

我试过设置

```
dbpath = ~/mongodb_data 
```

在我的配置文件中，但由于某种原因似乎不起作用 - 我得到：

```
ERROR: dbpath (~/mongodb_data) does not exist. 
```

起初我以为这可能是权限错误，但我在一个有 rw 到 ~/mongodb_data 的用户下运行 mongod。

我正在尝试做的事情是否可行，如果是，我该如何去做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:49:42.187

你好蓝莓园，

我可以在我的 Windows 机器上做到这一点：

```
mongod --dbpath ..\..\data\db 
```

您也可以使用符号链接。

但如前所述，更新用户启动脚本是最好的可管理解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:56:30.993

我会从根目录指定完整路径，而不是使用波浪号。我不确定它是否可以使用它。

```
dbpath = /home/yourusername/mongodb_data 
```

# java - 从弹出窗口仅刷新父级上的更新面板

> ID：15769629
> 
> 赞同：0
> 
> 时间：2013-04-02T16:43:31.000
> 
> 标签：java, c#, asp.net, popup, updatepanel

我有一个按钮，可以打开一个弹出窗口和一个 Ajax 更新面板。在那个窗口内，我有另一个按钮。

如果我想刷新更新面板，当我从父页面按下按钮而不刷新整个页面时，我必须运行什么代码？

我在刷新页面的网络上播下了这段代码：

```
<div id="Container" onclick="__doPostBack('UpdatePanel1', '');"> 
```

我是 Java 的好朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:37:34.377

您需要利用[window.opener](http://www.w3schools.com/jsref/prop_win_opener.asp#gsc.tab=0)对象。

```
window.opener.document.getElementById('Container').onclick(); 
```

我建议使用 jQuery 来确保跨浏览器兼容性。当然还添加了一些空值检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T19:42:28.830

使用jQuery：

如果 DIV ID 保持不变：

```
$("#Container").click(function() {
  // REFRESH CONTAINER HERE
}); 
```

如果 Div ID 是动态的，则使用类而不是 ID：

```
$(".Container").click(function() {
  // REFRESH CONTAINER HERE
}); 
```

# string - 比较 2 个字符串（星期几）无效

> ID：15769631
> 
> 赞同：0
> 
> 时间：2013-04-02T16:43:35.990
> 
> 标签：string, validation, compare, equals, dayofweek

我正在尝试验证 sVenueDay（通过文本框输入的文本），以确保输入的值是有效日期。我在 txtBoxVenueDay.Text 中输入了“星期日”。运行程序时，即使输入的“星期日”是有效日期，也会显示“输入的日期无效”。我尝试使用 !sVenueDay.Equals("Sunday") 格式（以及其他日子）但没有：/

```
string sVenueDay = txtBoxVenueDay.Text;

if (sVenueDay != "Monday" || sVenueDay != "Tuesday" || sVenueDay != "Wednesday" || sVenueDay != "Thursday" || sVenueDay != "Friday" || sVenueDay != "Saturday" || sVenueDay != "Sunday")

    {
        lblOutput.Text = "Input entered not valid day";
        return;
    }

 else
    lblOutput.Text = "Valid day"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:46:52.160

您正在检查它是否不等于“星期一”*或*不等于“星期二”。你能提出哪个字符串同时等于“Monday”*和*“Tuesday”吗？:)

我怀疑你想要：

```
if (sVenueDay != "Monday" && sVenueDay != "Tuesday" && ...) 
```

或者，更有用的是：

```
private static readonly HashSet<string> ValidDays = new HashSet<string>(
    new[] { "Monday", "Tuesday", ... });

...

if (!ValidDays.Contains(sVenueDay))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:55:46.873

当您使用或如果第一个条件为真时，我将不检查下一个条件。所以先检查真然后假；尝试如下：（使用 equals 方法）字符串 sVenueDay = txtBoxVenueDay.Text;if (sVenueDay == "Monday" || sVenueDay == "Tuesday" || sVenueDay == "Wednesday" || sVenueDay == "Thursday" || sVenueDay == "星期五" || sVenueDay == "星期六" || sVenueDay == "星期日") { lblOutput.Text = "有效日期"; 返回; }else lblOutput.Text = "输入的输入无效日期";

# java - 线程二叉树

> ID：15769641
> 
> 赞同：1
> 
> 时间：2013-04-02T16:44:08.493
> 
> 标签：java, binary-tree

大家好，我应该编写 ThreadedNode() 类，但我遇到了一些问题。

我知道通过将每个空左子节点设置为中序遍历中节点的前任节点并将每个空右子节点设置为中序遍历中节点的后继节点来获得二叉树的线程二叉树。

但是我的问题从构造函数开始 // 当您获得根时，将二叉树线程化 public ThreadedNode(BinaryNode root)

我知道它接收一个 binaryNode 并且我必须使它成为一个线程树，但我如何创建新的线程树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:11:52.557

创建线程二叉树的一种常见方法是使用*假 head*。这使得单节点树更容易理解，构造函数更直接。

因此，您的构造函数可能看起来像：

```
public class ThreadedNode {

    private BinaryNode head;

    public ThreadedNode(BinaryNode root) {

        head = new BinaryNode();
        root.makeThreaded();
        root.setRight(head);
        head.setRight(root);

    }
} 
```

请记住，稍后您需要在插入、删除等中考虑这个假头。

# java - 如何将 JTable 保存和加载为 .txt 文件

> ID：15769642
> 
> 赞同：0
> 
> 时间：2013-04-02T16:44:09.523
> 
> 标签：java, arrays, swing, arraylist, awt

我想知道如何将表格保存并加载为文本文件，这样我就不必在重新打开表格后继续将信息输入到表格中。如果可能的话，还可以导出表格和一个 excel 文件，以便我可以在 Microsoft excel 中查看。

```
import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;
import javax.swing.border.LineBorder;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Window.Type;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import org.eclipse.wb.swing.FocusTraversalOnArray;
import java.awt.Component;
import java.awt.SystemColor;
import java.text.ParseException;
import javax.swing.JFormattedTextField;
import javax.swing.text.MaskFormatter;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.io.*;
import java.util.ArrayList;

public class Main extends JFrame  {
    private JTextField Searchtextfield;
    private JTable table;
    private JTextField Firstnametext;
    private JTextField lastnametext;
    private JTextField Phonenumbertext;
    private JTextField Emailtext;

    /**
     * Instantiates a new main.
     * 
     * This program allow you to store information in a table and export out and excel file
     * or save as a text file
     *
     * @throws Exception the exception
     */
    public Main() throws Exception  {

        getContentPane().setLayout(null);
        JTabbedPane tabbedPane = new JTabbedPane(JTabbedPane.TOP);
        tabbedPane.setBackground(new Color(189, 183, 107));
        tabbedPane.setBounds(0, 32, 650, 365);
        getContentPane().add(tabbedPane);
        MaskFormatter mf2 = new MaskFormatter("(###) ###-####");

        // the main panel that hold the search bar and table
        JPanel MainPanel = new JPanel(); 
        MainPanel.setBackground(Color.LIGHT_GRAY);
        tabbedPane.addTab("Main", null, MainPanel, null);
        MainPanel.setLayout(null);

        // the search text field
        Searchtextfield = new JTextField(); 
        Searchtextfield.setBounds(485, 11, 129, 20);
        MainPanel.add(Searchtextfield);
        Searchtextfield.setColumns(10);

        // the search label on the main panel
        JLabel Searchlabel = new JLabel("Seach:"); 
        Searchlabel.setBounds(443, 14, 46, 14);
        MainPanel.add(Searchlabel);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(10, 42, 604, 195);
        MainPanel.add(scrollPane);

        table = new JTable();
        table.setBorder(UIManager.getBorder("DesktopIcon.border"));
        scrollPane.setViewportView(table);

        // the column in the table
        table.setModel(new DefaultTableModel(

                new Object[][] {
            },
            new String[] {
                "First Name", "Last Name", "Phone Number", "Email"
            }
        ));

        // a panel that hold the first name, last name, phone number and email text field for entering 
        // information into the table on the main panel 
        JPanel AddentryPanel = new JPanel();
        AddentryPanel.setBackground(Color.LIGHT_GRAY);

        // add the entry tab for inputting information
        tabbedPane.addTab("Add Entry", null, AddentryPanel, null); 
        // set absolute layout
        AddentryPanel.setLayout(null);

        // a text field for entering you first name
        Firstnametext = new JTextField();

        Firstnametext.setBounds(175, 49, 308, 34);

        // add the first name text field to the add entry panel
        AddentryPanel.add(Firstnametext);
        Firstnametext.setColumns(10);

        JLabel lblNewLabel = new JLabel("First Name:");
        lblNewLabel.setForeground(Color.BLUE);
        lblNewLabel.setBounds(98, 59, 99, 14);
        AddentryPanel.add(lblNewLabel);

        JLabel Lastnamelabel = new JLabel("Last Name:");
        Lastnamelabel.setForeground(Color.BLUE);
        Lastnamelabel.setBounds(98, 104, 110, 14);
        AddentryPanel.add(Lastnamelabel);

        // a text field for entering you last name
        lastnametext = new JTextField();
        lastnametext.setColumns(10);
        lastnametext.setBounds(175, 94, 308, 34);

        // add the last name to the entry panel
        AddentryPanel.add(lastnametext);

        // add a formatted text field for you phone number. This field only allow number.
        Phonenumbertext = new JFormattedTextField(mf2);
        Phonenumbertext.setColumns(10);
        Phonenumbertext.setBounds(175, 145, 308, 34);

        // add the formatted text field  to entry panel
        AddentryPanel.add(Phonenumbertext);

        // a text field for entering you email 
        Emailtext = new JTextField();
        Emailtext.setColumns(10);
        Emailtext.setBounds(175, 190, 308, 34);

        // add the email text field to the add entry panel
        AddentryPanel.add(Emailtext);

        JLabel Phonenumberlabel = new JLabel("Phone Number:");
        Phonenumberlabel.setForeground(Color.BLUE);
        Phonenumberlabel.setBounds(77, 155, 93, 14);
        AddentryPanel.add(Phonenumberlabel);

        JLabel Email = new JLabel("Email:");
        Email.setForeground(Color.BLUE);
        Email.setBounds(126, 200, 54, 14);
        AddentryPanel.add(Email);

        // a button that add information into the table from the first name, last name, email
        // and you phone number field.
        JButton AddEntrybutton = new JButton("Add");

        AddEntrybutton.setForeground(Color.GREEN);

        // add a action listener for add entry button
        AddEntrybutton.addActionListener(new ActionListener() {
            /*
             * This action listener for entry button will prompt
             * you, if you want to add information into the table.
             * It also check if all the mandatory field have been filled correctly
             * so that it can proceed with the adding. If field has a error it will 
             * display a error.
             */

            public void actionPerformed(ActionEvent e) {

            // check if the option field are filled and correct before adding.
                if(Firstnametext.getText().equalsIgnoreCase("")|| Phonenumbertext.getText().equalsIgnoreCase("(   )    -    ")){
                    JOptionPane.showMessageDialog (null, "Make sure the the First Name and Phone Number field are filled"); 
                }

                // prompt if you are sure you want to add these information into the table
                else if (JOptionPane.showConfirmDialog(null, "Would you like to add these field to table?", "Request", 
                        JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE)
                        == JOptionPane.YES_OPTION)
                    {

                    DefaultTableModel dtm = (DefaultTableModel)table.getModel();

                    dtm.addRow(new Object[] { Firstnametext.getText(), lastnametext.getText(), Phonenumbertext.getText(), Emailtext.getText()});
                    }

            }
        });
        AddEntrybutton.setBounds(175, 253, 89, 23);

        // add the add button to the entry panel 
        AddentryPanel.add(AddEntrybutton);

        // a button the is use for clearing the field in the add entry panel
        JButton ClearButton = new JButton("Clear");
        ClearButton.setForeground(Color.RED);
        ClearButton.addActionListener(new ActionListener() {
            /*
             *  prompt you if you want to clear the first name,
             *  last name, phone number and email text field.
             *  if you select yes the field will be clear.
             *  if you select no the field will not be clear.
             */

            public void actionPerformed(ActionEvent e) {
                if (JOptionPane.showConfirmDialog(null, "Are you sure you want to clear the field?", "Request", 
                        JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE)
                        == JOptionPane.YES_OPTION)
                    {
                     Firstnametext.setText("");
                     lastnametext.setText("");
                     Phonenumbertext.setText("");
                     Emailtext.setText("");

                    }
                    else
                    {
                     //Go back to normal
                    }

            }
        });
        ClearButton.setBounds(394, 253, 89, 23);

        // add the clear button the entry panel
        AddentryPanel.add(ClearButton);

        // label tell that field is optional and doesn't need to be filled
        JLabel Optionallabel1 = new JLabel("Optional");

        Optionallabel1.setBounds(493, 200, 54, 14);
        AddentryPanel.add(Optionallabel1);

        // label tell that field is optional and doesn't need to be filled
        JLabel Optionallabel2 = new JLabel("Optional");

        Optionallabel2.setBounds(493, 104, 54, 14);
        AddentryPanel.add(Optionallabel2);

        // label that tell you that this field has to be filled
        JLabel Mandatorylabel1 = new JLabel("Mandatory");

        Mandatorylabel1.setForeground(Color.RED);
        Mandatorylabel1.setBounds(493, 155, 79, 14);
        AddentryPanel.add(Mandatorylabel1);

        // label that tell you that this field has to be filled
        JLabel Manatorylabel2 = new JLabel("Mandatory");

        Manatorylabel2.setForeground(Color.RED);
        Manatorylabel2.setBounds(493, 59, 64, 14);
        AddentryPanel.add(Manatorylabel2);

        // a menu bar for displaying the option to load contact, save contact, 
        // export contact as excel file and be able to close option
        JMenuBar menuBar = new JMenuBar();
        menuBar.setBounds(0, 0, 650, 21);
        getContentPane().add(menuBar);

        JMenu fileoption = new JMenu("File");

        menuBar.add(fileoption);

        JMenuItem loadcontact = new JMenuItem("Load Contact");

        // add load contact file to menu
        fileoption.add(loadcontact);

        JMenuItem savecontact = new JMenuItem("Save Contact");

        // add a save contact file to menu
        fileoption.add(savecontact);

        JMenuItem close = new JMenuItem("Close");
        close.addActionListener(new ActionListener() {

            /*
             * When selected the program will close.
             * 
             */
            public void actionPerformed(ActionEvent arg0) {
                System.exit(0);
            }
        });
        fileoption.add(close);
        table.getColumnModel().getColumn(2).setPreferredWidth(124);

    }

public static void main(String[] args) throws Exception {
        Main frame = new Main();
        frame.setTitle("Phone Book App");
        frame.setSize(640, 400);
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:56:27.640

您可以尝试如下以`txt`格式保存表格的内容。`.xls` 如果您愿意，也可以打开格式相同的文件：

```
public void saveTable()throws Exception
{
  BufferedWriter bfw = new BufferedWriter(new FileWriter("Data.txt"));
  for(int i = 0 ; i < table.getColumnCount() ; i++)
  {
    bfw.write(table.getColumnName(i));
    bfw.write("\t");
  }

  for (int i = 0 ; i < table.getRowCount(); i++)
  {
    bfw.newLine();
    for(int j = 0 ; j < table.getColumnCount();j++)
    {
      bfw.write((String)(table.getValueAt(i,j)));
      bfw.write("\t");;
    }
  }
  bfw.close();
} 
```

# postgresql - 具有许多左连接的 Postgresql 查询优化

> ID：15769643
> 
> 赞同：3
> 
> 时间：2013-04-02T16:44:11.307
> 
> 标签：postgresql, doctrine-orm

我有一个需要几秒钟才能运行的 Doctrine 查询。我想确保它尽可能快地进行。查询如下（来自 Doctrine）：

```
SELECT DISTINCT task.id AS id0,
                task.rate AS rate1,
                task.revised_rate AS revised_rate2,
                task.title AS title3,
                task.points AS points4,
                task.due AS due5,
                task.created AS created6,
                invoice.id AS id7,
                invoice.title AS title8,
                company.id AS id9,
                company.customer_code AS customer_code10,
                taskStatus.id AS id11,
                taskStatus.title AS title12,
                priority.id AS id13,
                taskUser.id AS id14,
                taskUser.firstname AS firstname15,
                taskUser.lastname AS lastname16,
                invoiceUser.id AS id17,
                invoiceUser.firstname AS firstname18,
                invoiceUser.lastname AS lastname19,
                invoiceStatus.id AS id20,
                invoiceStatus.title AS title21,
                opportunity.id AS id22,
                opportunity.name AS name23,
                SUM(slip.stop - slip.start) AS sclr24,
                task.projected_minutes AS projected_minutes25
FROM task task
INNER JOIN invoice invoice ON task.invoice_id = invoice.id
AND (invoice.deleted IS NULL)
INNER JOIN company company ON invoice.company_id = company.id
LEFT JOIN task_status taskStatus ON task.status_id = taskStatus.id
AND (taskStatus.deleted IS NULL)
LEFT JOIN slip slip ON task.id = slip.task_id
AND (slip.deleted IS NULL)
LEFT JOIN fos_user taskUser ON task.user_id = taskUser.id
AND (taskUser.deleted IS NULL)
LEFT JOIN priority priority ON task.priority_id = priority.id
AND (priority.deleted IS NULL)
LEFT JOIN task_comment taskComment ON task.id = taskComment.task_id
AND (taskComment.deleted IS NULL)
LEFT JOIN task_file taskFile ON task.id = taskFile.task_id
AND (taskFile.deleted IS NULL)
LEFT JOIN task_step taskStep ON task.id = taskStep.task_id
AND (taskStep.deleted IS NULL)
LEFT JOIN fos_user invoiceUser ON invoice.user_id = invoiceUser.id
AND (invoiceUser.deleted IS NULL)
LEFT JOIN invoice_status invoiceStatus ON invoice.status_id = invoiceStatus.id
AND (invoiceStatus.deleted IS NULL)
LEFT JOIN opportunity opportunity ON invoice.opportunity_id = opportunity.id
LEFT JOIN fos_user slipUser ON slip.user_id = slipUser.id
AND (slipUser.deleted IS NULL)
WHERE (taskStatus.id IN (3)
       AND slipUser.id IN (605))
  AND (task.deleted IS NULL)
GROUP BY task.id,
         company.id,
         taskUser.id,
         taskStatus.id,
         invoice.id,
         invoiceUser.id,
         invoiceStatus.id,
         opportunity.id,
         priority.id
ORDER BY priority.id ASC, task.due ASC, company.customer_code ASC, taskUser.firstname ASC, taskUser.lastname ASC, task.points ASC, task.title ASC, taskStatus.title ASC, task.created ASC, invoice.title ASC, invoiceUser.firstname ASC, invoiceUser.lastname ASC, invoiceStatus.title ASC, opportunity.name ASC LIMIT 50
OFFSET 0 
```

这是[解释的链接](http://explain.depesz.com/s/TouD)。

[任务表和索引](http://pastebin.com/EbudRuDw)

[发票表和索引](http://pastebin.com/drJgVkkN)

[公司表和索引](http://pastebin.com/7sBwUAup)

[任务状态表和索引](http://pastebin.com/xaRdaEXF)

[单据表和索引](http://pastebin.com/LcPL7Su8)

[fos_user 表和索引](http://pastebin.com/9E0KW97D)

[优先级表和索引](http://pastebin.com/tdzA8rLu)

[任务评论表和索引](http://pastebin.com/GbCY8Dda)

[任务文件表和索引](http://pastebin.com/BgMfKk9N)

[任务步骤表和索引](http://pastebin.com/mTJN379z)

[发票状态表](http://pastebin.com/ZRZt7LcS)

[机会表](http://pastebin.com/T8gYhP8e)

有什么我可以在加入方面做得更好的事情吗？使它们成为子选择？

任何意见表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:26:03.297

您可以尝试[部分索引](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)。

```
CREATE INDEX idx_deleted_rows (some_id) ON some_table WHERE (deleted IS NULL); 
```

# django - 多个实例的 Django Celery 问题

> ID：15769647
> 
> 赞同：1
> 
> 时间：2013-04-02T16:44:18.180
> 
> 标签：django, celery

我有两个芹菜实例。我希望能够通过电子邮件、推送等通知特定事件的所有用户。但是，我想确保所有用户只收到一次通知。有没有一个如何循环访问用户并保证每个用户被联系一次的例子？

我的解决方案是简单地将用户标记为已收到通知......但这将非常低效。并且可能存在用户在保存标记之间收到通知的情况。

我试图阅读以下内容：

[http://docs.celeryproject.org/en/latest/userguide/routing.html](http://docs.celeryproject.org/en/latest/userguide/routing.html)

[http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)

**[编辑]**

2 个实例是指两个 EC2 上的 1 个工作人员，所以 2 个工作人员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T17:29:24.663

你读过这个吗？[确保一个任务一次只执行一个](http://docs.celeryproject.org/en/latest/tutorials/task-cookbook.html#cookbook-task-serial)

尽管我认为您的方法很好，但是将其存储为数据库是`slow`，您应该将其缓存起来以非常快。作为一个简单的设置，您可以在发送电子邮件之前缓存电子邮件（散列）。如果缓存已经存在，则不要发送电子邮件。

所以它会像

```
from hashlib import md5
from django.core.cache import cache
from celery import task

# 1 day because I expect that the whole email task finish within a day
# But the same email may be send out if executed on the next day.
LOCK_TIME = 24 * 60 * 60

@task
def notify_user(email):
    uid = md5(email).hexdigest()

    # This will return False if the uid already exists in the cache
    if cache.add(uid, 'notified', LOCK_TIME):
        send_mail("Subject", "Message", None, [email,]) 
```

注意：我认为删除缓存可能没有必要。因为您只关心发送一次，直到它过期。

# android - 如何在滑动菜单中使用 Android Google Map V2 作为片段？

> ID：15769648
> 
> 赞同：2
> 
> 时间：2013-04-02T16:44:18.813
> 
> 标签：android, android-fragments, actionbarsherlock, slidingmenu

我正在使用带有 ActionBarSherlock 的滑动菜单，并且需要在片段中显示 android google map v2。该类扩展了 SherlockFragment。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:51:01.930

最好的方法是扩展`SupportMapFragment`并在那里做所有你的逻辑。

然后，您可以简单地将这个片段添加到`ViewPager`使用`FragmentPagerAdapter`以下数据集的使用中：

```
class FrgInfo {
    Class clss;
    Bundle args;
} 
```

并覆盖该`getItem`方法：

```
@Override
public Fragment getItem(final int position) {
    final FrgInfo info = fragments.get(position);
    return Fragment.instantiate(context, info.clss.getName(), info.args);
} 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:09:26.647

[我已经在https://stackoverflow.com/a/14768343/1276967](https://stackoverflow.com/a/14768343/1276967)解决了我的问题。它适用于 SherlockFragment，但很少出现膨胀问题。可能是因为其他问题。。

# php - 通过 jquery ajax 提交联系表单时出错

> ID：15769651
> 
> 赞同：2
> 
> 时间：2013-04-02T16:44:28.580
> 
> 标签：php, jquery, html, ajax, forms

基于这个[问题](https://stackoverflow.com/questions/15767317/initialize-javascript-in-php-script-for-a-contact-form)，我不得不重写我的联系表单脚本。目标是有一个标记为 的发送按钮`send`。clickick 后它应该显示`sending`直到 php 脚本完成。当它完成它应该显示`sent`。

那是我的简单形式：

```
<form id="contactForm" action="mail.php" method="post">
  <input type="text" id="name" name="name" placeholder="Name" required><br />
  <input type="text" id="email" name="email" placeholder="Mail" required><br />
  <textarea name="message" id="message" placeholder="Nachricht" required></textarea><br />
  <button name="submit" type="submit" id="submit">send</button>
</form> 
```

这是用于标签更改和 ajax 提交的 jquery 脚本。

```
<script>
            $( init );
            function init() {
                $('#contactForm').submit( submitForm );
            }
            function submitForm() {
                var contactForm = $(this);
                if ( !$('#name').val() || !$('#email').val() || !$('#message').val() ) {
                    $('#submit').html('error');
                } else {
                    $('#submit').html('sending');
                    $.ajax( {
                      url: contactForm.attr( 'action' ) + "?ajax=true",
                      type: contactForm.attr( 'method' ),
                      data: contactForm.serialize(),
                      success: submitFinished
                    } );
                }
                return false;
            }
            function submitFinished( response ) {
                response = $.trim( response );
                if ( response == "success" ) {
                    $('#submit').HTML = ('sent');
                } else {
                  $('#submit').html('error');
                }
            }
        </script> 
```

邮件.php：

```
<?php 

define( "RECIPIENT_NAME", "John Doe" );
define( "RECIPIENT_EMAIL", "john@doe.com" );
define( "EMAIL_SUBJECT", "Subject" );

$success = false;

$name = isset( $_POST['name'] ) ? preg_replace( "/[^\.\-\' a-zA-Z0-9]/", "", $_POST['name'] ) : "";
$email = isset( $_POST['email'] ) ? preg_replace( "/[^\.\-\_\@a-zA-Z0-9]/", "", $_POST['email'] ) : "";
$message = isset( $_POST['message'] ) ? preg_replace( "/(From:|To:|BCC:|CC:|Subject:|Content-Type:)/", "", $_POST['message'] ) : "";

if ( $name && $email && $message ) {
  $recipient = RECIPIENT_NAME . " <" . RECIPIENT_EMAIL . ">";
  $headers = "Von: " . $name . " <" . $email . ">";
  $success = mail( $recipient, EMAIL_SUBJECT, $message, $headers );
}

if ( isset($_GET["ajax"]) ) {
  echo $success ? "success" : "error";
} else {
 //add html for javascript off user
}
?> 
```

它提交正确，我收到了邮件，但我没有将标签更改为。`sent`它卡在了`sending`。任何想法或建议我的代码有什么问题？

最好的问候丹尼姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:50:22.860

错误在这一行：

```
$('#submit').HTML = ('sent'); 
```

将其更改为：

```
$('#submit').html('sent'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:50:14.740

```
$('#submit').HTML = ('sent'); 
```

应该

```
$('#submit').html('sent'); 
```

就像你在其他地方一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T16:52:40.923

你必须改变

```
$('#submit').HTML = ('sent'); 
```

到：

```
$('#submit').html('sent'); 
```

在你的功能中`submitFinished()`；

# java - 在jruby中导入java包中的所有类

> ID：15769653
> 
> 赞同：4
> 
> 时间：2013-04-02T16:44:32.710
> 
> 标签：java, import, jruby

我正在寻找相当于的语法

```
import com.mycom.mypack.* 
```

为 jruby

例如 java_import com.mycom.mypack。

此功能是通过 JRUBY 6334 JIRA 添加的

[https://jira.codehaus.org/browse/JRUBY-6334](https://jira.codehaus.org/browse/JRUBY-6334)

但我不清楚实际的语法是什么。

以下是 Jruby 先生本人的评论：

```
Charles Oliver Nutter added a comment - 17/Feb/12 1:13 PM

commit a39a7440c21b411c4592a27d2ef9e0ca73736590
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 17 13:06:24 2012 -0600

    Fix JRUBY-6334: Import multiple classes via java_import

    I opted to just go with the simple version to resolve this issue.
    I have nothing against introducing some syntax to import multiple
    classes from the same package, but I didn't see anything that we
    all agreed looked nice, and in any case you could use other Ruby
    constructs to build the list of full names you pass to java_import. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:42:19.043

```
require 'java'

module JavaUtil
  include_package "java.util"
end

JavaUtil::Date.new 
```

# php - 尝试获取 Magento 产品图片 - 仅获取一张图片

> ID：15769657
> 
> 赞同：3
> 
> 时间：2013-04-02T16:44:36.430
> 
> 标签：php, magento

我正在尝试在 Magento 1.7.0.2 中获取一系列产品图片网址。这是我当前的（例如稍微复杂的）代码：

```
foreach ($_product->getMediaGalleryImages() as $_image) {
    $tmp = array(
        'image' => $this->helper('catalog/image')
                    ->init($this->getProduct(), 'thumbnail', $_image->getFile())
                    ->constrainOnly(true)
                    ->keepAspectRatio(true)
                    ->keepFrame(false)
                    ->resize(800, null),
        'thumb' => $this->helper('catalog/image')
                    ->init($this->getProduct(), 'thumbnail', $_image->getFile())
                    ->constrainOnly(true)
                    ->keepAspectRatio(true)
                    ->keepFrame(false)
                    ->resize(227, null),
        'label' => $this->htmlEscape($this->getImageLabel())
    );

    echo $tmp['image'] . '<br>';

    $all_imgs[] = $tmp;
}

foreach ($all_imgs as $blah) {
    echo $blah['image'] . '<br>';
    echo $blah['thumb'] . '<br>';
    echo $blah['label'] . '<br>';
} 
```

我有两张图片，a.jpg 和 b.jpg。在第一个 foreach 中，我得到了 somefolder/a.jpg 和 somefolder/b.jpg。在第二个 foreach 中，我得到 somefolder/b.jpg*两次*。

不知何故 a.jpg 被 b.jpg 取代，但我不知道为什么。我唯一能想到的是某些东西是通过引用而不是值传递的，但如果是这种情况，我看不出发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:08:07.860

代码

... = $this->helper('目录/图像')->...

返回一个对象，而不是字符串。而且这个对象是单例的，这意味着它没有实例并且数据被替换。

尝试使用

```
... = (string)$this->helper('catalog/image')->... 
```

# rubygems - SimpleCov 没有为应用程序/代码生成覆盖率

> ID：15769659
> 
> 赞同：1
> 
> 时间：2013-04-02T16:44:50.770
> 
> 标签：rubygems, code-coverage

我目前正在使用 SimpleCov 为我的 Ruby 代码生成覆盖率。我将其配置如下。

```
SimpleCov.start do
  add_filter "spec/"
end 
```

但是，不会为应用程序文件夹（模型、视图、控制器等）生成覆盖率报告。该报告仅针对 lib/ 和 db/ 生成覆盖范围

有什么遗漏吗？

# c# - 单击另一个按钮时如何取消选中一个按钮？

> ID：15769661
> 
> 赞同：0
> 
> 时间：2013-04-02T16:44:57.747
> 
> 标签：c#, winforms, .net-3.5

我有三个按钮用于在富文本框中对齐字体。目前，每个按钮在单击时都是“选中”的（它在图标周围显示一个蓝色边框）。有没有办法在选择其他按钮之一时取消选中当前选中的按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:55:13.223

对于这种类型的行为，您最好使用[RadioButtons](http://msdn.microsoft.com/en-gb/library/system.windows.forms.radiobutton.aspx)并将它们分组。他们会自动为您处理切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:47:39.477

您可以使用以下内容：

```
If (Button1.Checked == true)
{ 
Button2.Checked = false;
}
Else
{
Button2.Checked = true;
} 
```

遍历所有按钮。

# javascript - 解释全局命名空间的这个声明

> ID：15769663
> 
> 赞同：2
> 
> 时间：2013-04-02T16:45:04.223
> 
> 标签：javascript, jquery

我在脚本的顶部看到了很多，但我不完全确定这意味着什么，谁能解释一下？

```
var whatevername = whatevername || {}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:46:04.000

它使用 OR 运算符来设置默认值。如果`whatevername`已设置它将被使用，否则将使用一个新的空对象。

一个例子：

```
function sayHi(options){
    options = options || {};
    if (options.useAlert){
        alert("hi");
    } else {
        console.log("hi");
    }
} 
```

在这种情况下，您始终可以使用 options 参数，即使它没有传递给函数：

```
sayHi(); 
sayHi({"useAlert": true}); 
```

在第一种情况下`{}`将被使用并且 options.useAlert 将是未定义的。在 if 语句中，它与设置为 false 相同，`console.log`将用于打印。

OR 运算符通常这样使用：

> if (hasAnEmailAddress || hasAPhoneNumber) {contactPerson()}

如果`hasAnEmailAddress`为真，则运算符将返回值 of`hasAnEmailAddress`而不是`hasAPhoneNumber`。如果不正确，`hasAPhoneNumber`则返回第二个参数的值。

设置默认值时使用该逻辑：如果第一个参数是假的，则返回第二个参数 - 即使它不是布尔值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:47:19.360

如果尚未初始化`whatevername`，则使用空对象进行初始化。`whatevername`

等效代码

```
if(!whatevername) whatevername  = {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T16:50:19.013

在许多语言中，您会看到使用三元运算符完成此操作，我认为这很清楚发生了什么。例子：

```
var whatevername = (whatevername != NULL) ? whatevername : {}; 
```

在 Javascript 中，如果 || 运算符的计算结果为真，它不会像预期的那样返回布尔值，而是返回最后一次计算的操作数的值。因此，如果whatevername为null，它将返回一个新对象，否则将返回whatevername。Ruby 也这样做，只是举出这种行为的另一个例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T16:47:03.553

这是一个默认值声明。`||`是 OR 的符号，您可能知道。

该语句读取“将whatevername设置为whatevername或一个空对象”。OR 将选择读取为真值（非空，非假）的两个对象中的第一个。如果设置了whatevername，您将得到whatevername。如果不是（或者如果设置为 null），您将得到一个空对象。

# java - 组织服务职责

> ID：15769666
> 
> 赞同：0
> 
> 时间：2013-04-02T16:45:16.130
> 
> 标签：java, spring, jakarta-ee

我正在创建一个 RESTful Web 服务，我需要映射我想要作为路径公开的方法。我有一个关于服务类组织的问题。

创建一个服务类作为内部委托给其他服务类的应用程序的端点是否正常？

以及如何组织属于资源的方法和路径？您是否创建了一个 MyClassCrudService 类、一个 MyClassOperationsService 类等？然后在每个类上添加路径映射注释，还是创建一个 MyClassResourceService 类？

我发现很难将服务方法划分为不同的类，并正确命名它们。

我可能需要一些关于如何正常组织服务的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:50:28.460

我建议从每个逻辑资源一个 Resource 类开始，仅在必要时增加复杂性。定义必要性真的只需要经验并发展个人品味或团队标准。

如果您是 REST 新手，我还推荐[Bill Burke 的 RESTful Java with JAX-RS](https://rads.stackoverflow.com/amzn/click/com/0596158041)。

# kdb - 符号文字中的空格字符

> ID：15769671
> 
> 赞同：5
> 
> 时间：2013-04-02T16:45:27.753
> 
> 标签：kdb

我需要查询一个包含公司名称的数据库。我有大约 50 个名字的列表，我必须为此获取数据。但是我无法使用 in 命令编写查询，因为名称中存在无法识别的空格。前任

```
select from sales where name in (`Coca Cola, `Pepsi) 
```

这给了我一个错误，因为“可乐”没有被识别。有没有办法编写这样的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T17:46:59.283

字符串之间的空格会导致解释器感到困惑。`$() 将字符列表转换为符号。

```
q)t:([] a:1 2 3; name:`$("coca cola";"pepsi";"milk"))

q)select from t where name in `$("coca cola";"pepsi")
a name
-----------
1 coca cola
2 pepsi 
```

您可能还需要注意大小写，并始终使用小写或大写，否则会导致意外的空结果：

```
q)select from t where name in `$("Coca Cola";"Pepsi")
a name
------

q)select from t where upper[name] in upper `$("Coca Cola";"Pepsi")
a name
-----------
1 coca cola
2 pepsi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:54:40.497

您需要执行以下操作：

```
select from sales where name in `$("Coca Cola";"Pepsi") 
```

# c - 在 C 中使用没有 time.h 的 randomize()

> ID：15769672
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:45:29.443
> 
> 标签：c, random, time.h

我能够在不包含 time.h 库的情况下运行使用 randomize 函数的代码。它是否自动包含在我可能已经包含在我的代码中的其他一些库中？以下是我包含的库的列表：

```
#include <graphics.h>
#include <stdlib.h>
#include <stdio.h>
#include <conio.h>
#include <dos.h>
#include <string.h> 
#include <io.h> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:51:46.827

这对于您的库的版本和实现非常具体。该标准不强制任何标题包含`time.h` ¹所以你不能依赖它。

在您的情况下，它可能是,之一`dos.h`，例如包含（或任何其他标题）。`io.h``conio.h``time.h`

* * *

¹至少不是那里的那些，也不可能在你看似古老的图书馆里。C11 说`threads.h`应该包括`time.h`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:49:36.707

说什么`<compiler with high warning level> yourcode.c`？我的猜测是：

*   任何一个非标准的 DOS 特定标头 ( `conio.h`, `dos.h`, `io.h`, ...) 都包含它，

*   或者根本没有声明，即不包括在内，在这种情况下，您的编译器会默默地隐式地假设一个函数签名（具体来说，它假设一个返回值`int`以及您第一次调用它时使用的任何类型的参数）。

请注意，后一种情况是**错误的，**您应该注意**不要这样做**（因为它可能会导致您的程序调用未定义的行为）。始终在启用所有警告的情况下进行编译，以便您可以追踪此类错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T17:06:25.510

当 C 编译器找不到函数的原型时，它假定它是一个返回 int 的函数。如果您没有更改默认设置，它还会打印警告功能。

所以。在您的情况下，也许 time.h 被包括在内，但请注意，如果不包括在内，它可能会导致很多问题。

# c# - 从列表中查找存在于另一个列表中的项目

> ID：15769673
> 
> 赞同：47
> 
> 时间：2013-04-02T16:45:32.517
> 
> 标签：c#, linq, collections, lambda

我有一个`List<PropA>`

```
PropA  
{  
    int a;  
    int b;  
} 
```

和另一个`List<PropX>`

```
PropX  
{  
    int a;  
    int b;  
} 
```

现在我必须使用 lambda 或 LINQ查找匹配**b**`List<PropX>`属性中存在的项目。`List<PropA>`

 *** * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-02T16:47:43.690

```
ListA.Where(a => ListX.Any(x => x.b == a.b)) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-02T16:49:20.047

你想要做的是`Join`两个序列。LINQ 有一个`Join`运算符可以做到这一点：

```
List<PropX> first;
List<PropA> second;

var query = from firstItem in first
    join secondItem in second
    on firstItem.b equals secondItem.b
    select firstItem; 
```

请注意，`Join`LINQ 中的运算符也被编写为执行此操作，这比在第二个集合中对每个项目进行线性搜索的简单实现要高效得多。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-02-20T10:11:01.227

```
var commonNumbers = first.Intersect(second); 
```

这将为您提供两个列表之间的公共值，这是一种比 join 或其他 Lambda 表达式更快、更简洁的方法。

就试一试吧。

资料来源：[MSDN](https://msdn.microsoft.com/en-us/library/vstudio/bb460136%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-05T19:57:59.757

如果您有多个参数，那么以上所有方法都不起作用，所以我认为这是最好的方法。

例如：从 pets 和 pets2 中查找不匹配的项目。

```
var notMatchedpets = pets
    .Where(p2 => !pets2
    .Any(p1 => p1.Name == p2.Name && p1.age == p2.age))
    .ToList(); 
```**

# javascript - dojo 声明类变量未定义

> ID：15769675
> 
> 赞同：3
> 
> 时间：2013-04-02T16:45:49.277
> 
> 标签：javascript, class, dojo

我正在学习将 dojo 用于我即将开展的项目，因此提前承认这可能是一个非常基本的问题。我试图找到答案，但没有成功。此外，我不得不使用稍旧版本的 dojo - 1.6 我认为没有 AMD。

我已经使用 dojo.declare 定义了一个类，这是一个稍微修改的示例：

```
dojo.declare("myNamespace.CustomClass", null, {
    firstProperty: "The default value",
    constructor: function () { }
    Test: function () {
        alert(this.firstProperty);
    }
}); 
```

因此，本质上，一个名为 CustomClass 的类具有一个名为 firstProperty 的公共属性，该属性的默认值为“默认值”，一个当前不执行任何操作的构造函数和一个名为 Test 的公共方法，当调用该方法时，该方法的值将发出警报第一属性。

我的假设是，当我创建一个 CustomClass 实例并调用 Test() 时，我会得到一个带有“默认值”的警报框。但是，我没有，而是收到一个带有“未定义”的警报框。如果我在创建实例后设置 firstProperty 的值，然后调用 Test，它会起作用，我会得到属性设置的任何值。因此，一种解决方法是在构造函数中设置默认值，但我读过的内容表明它应该按照我假设的方式工作，所以我宁愿正确地做。

我还尝试在构造函数中调用 dojo.safeMixin(this, null) ，因为我读到的内容让我想知道这是否是必需的，但这并没有什么不同。

提前感谢无论如何，读这个！西蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:49:00.927

您缺少的关键概念是范围的概念。当你这样做时`alert(firstProperty);`，你指的是一个局部变量`firstProperty`。其中，在您的情况下，您尚未定义任何具有该名称的局部变量。但是，您已经使用该名称定义了一个**实例**变量。与 java 等语言不同，实例变量必须使用`this`.

所以你的例子应该是：

```
dojo.declare("myNamespace.CustomClass", null, {
firstProperty: "The default value",
constructor:function(params){
    console.log(params);
    dojo.safeMixin(this,params);
},
Test: function () {
    alert(this.firstProperty);
} 
```

});

```
var myInstance = new myNamespace.CustomClass({firstProperty:'something else'});
myInstance.Test(); 
```

您可能还想看看[Javascript Scope Tricks](https://stackoverflow.com/questions/500431/javascript-variable-scope)，因为 javascript 中的范围可能会变得非常棘手。

编辑：我意识到你不是从 dijit._Widget 继承的。在这种情况下，您需要手动将构造函数参数应用到使用 `dojo.safeMixin`. 我更新了上面的代码示例。我还创建了一个[简单的 jsfiddle 来](http://jsfiddle.net/jrkeller/mUDyR/)演示代码。

# ruby-on-rails-3 - Rails/Rack：POST 数据的“ArgumentError: invalid %-encoding”

> ID：15769681
> 
> 赞同：12
> 
> 时间：2013-04-02T16:45:58.133
> 
> 标签：ruby-on-rails-3, rack, ruby-1.9.3

我们的 ruby​​ on rails 网站有一个 URI，我们的合作伙伴之一将 XML 数据发布到该 URI。

由于我们不想处理 XML，我们实际上只是将原始数据填充到数据库列中，并且不再进一步处理它。

但是，我们收到的一篇帖子在空气制动中给了我们这个错误：

```
ArgumentError: invalid %-encoding ("http://ns.hr-xml.org/2004-08-02" 
userId="" password=""><BackgroundReportPackage type="report">
<ProviderReferenceId>.... 
```

使用回溯：

```
vendor/ruby-1.9.3/lib/ruby/1.9.1/uri/common.rb:898:in `decode_www_form_component'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/utils.rb:41:in `unescape'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/utils.rb:94:in `block (2 levels) in parse_nested_query'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/utils.rb:94:in `map'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/utils.rb:94:in `block in parse_nested_query'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/utils.rb:93:in `each'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/utils.rb:93:in `parse_nested_query'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/request.rb:332:in `parse_query'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/request.rb:209:in `POST'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:26:in `method_override'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:14:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/static.rb:63:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:143:in `pass'
vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:155:in `invalidate'
vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:71:in `call!'
vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:479:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:223:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/deflater.rb:13:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/rack/log_tailer.rb:17:in `call'
vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'
vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'
vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/thin.rb:13:in `run'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:268:in `start'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands/server.rb:70:in `start'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:55:in `block in <top (required)>'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<main>' 
```

问题是 POST 包含数据：

```
<ChargeOrComplaint>DRIVE WHILE BLOOD ALCOHOL LEVEL IS 0.08% OR MORE</ChargeOrComplaint> 
```

大概这是有效的 XML，但最后的裸体`%`导致`0.08%`错误，因为它是通过 HTTP 来的，我猜 rack 期望它是 URL 编码的。

回溯表明这甚至在它到达我们的代码之前就已经发生了，所以我认为这与我们如何处理它没有任何关系。

那么我的问题：

1）问题出在哪里？Ruby 1.9.3 的实现`decode_www_form_component`（在堆栈跟踪的顶部）？架子？我们合作伙伴的 POST 数据或标头？我们对 POST 的处理？

2) 通过 HTTP 发布的 XML 数据是否需要进行 URL 编码？

3) 这个 POST 是否需要一个标题才能让 Rack 正确解释它？（即：它是 XML 二进制数据，而不是 URL 编码的）。

4) 如果我无法让我们的合作伙伴更改他们发布给我们的内容，我们该如何解决？一些机架中间件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T17:15:43.557

我猜你的搭档可能会将数据以“x-www-form-urlencoded”的形式发布给你，让 Rack 尝试以这种方式解析它。如果他们可以更改他们发送的内容，我怀疑将他们的内容类型设置为“text/xml”将解决这个问题。

如果你不能让他们改变他们发送的内容，那么是的，我认为你必须使用 Rack 中间件（或猴子补丁）。尽管您可以浏览 Rack 源代码，但也许有一个设置可以避免进行任何解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-07T16:29:46.833

关于在请求正文内容中捕获无效编码错误的责任在各个论坛上存在一些争论，但是 rack 和 rails 都没有处理它，都把它留给了应用程序来处理。为了解决我的应用程序中 POST 数据中的无效 %-encoding 问题，我对这个相关问题使用了类似的解决方案：[Rails ArgumentError: invalid %-encoding](https://stackoverflow.com/questions/16269897/rails-argumenterror-invalid-encoding)

我添加了这个中间件`app/middleware/invalid_post_data_interceptor.rb`来拦截无效的帖子数据：

```
class InvalidPostDataInterceptor
  def initialize(app)
    @app = app
  end

  def call(env)
    request_content = Rack::Request.new(env).POST rescue :bad_form_data

    headers = {'Content-Type' => 'text/plain'}

    if request_content == :bad_form_data
      [400, headers, ['Bad Request']]
    else
      @app.call(env)
    end
  end
end 
```

然后将其添加到中间件堆栈，方法是将其添加到`application.rb`：

```
config.middleware.insert_before Rack::Runtime, "InvalidPostDataInterceptor" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T20:45:02.467

在我的情况下，原因是标题之后和请求正文之前的额外换行符。我猜有 Content-Length 不一致会抛出解析器。如果您以编程方式设置标题，请确保它们没有尾随换行符。

# ruby-on-rails - 实现用户电子邮件首选项的方法？

> ID：15769687
> 
> 赞同：2
> 
> 时间：2013-04-02T16:46:21.100
> 
> 标签：ruby-on-rails, email

我想实现一个功能，让每个用户决定他/她将收到的电子邮件类型。到目前为止，我只能看到用户在收到好友请求和收到新消息时收到电子邮件。我计划实施的方式如下：

1.  每个用户`has_one`电子邮件首选项
2.  EmailPreferences 表将有 2 列：友谊（布尔）和消息（布尔）。
3.  默认情况下，它们将是真的。因此，用户将收到有关收到的新消息和新请求的电子邮件。
4.  用户可以转到编辑操作并根据他的选择更新值。
5.  我计划使用`if statement`which 将检查是否`@user.emailpreference.message?`或`@user.emailpreference.friendship?`在发送电子邮件方法之前。

我想知道这是否是最好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:25:14.047

几个考虑因素 - 我会质疑您是否要执行 has_one 或只是将列添加到用户。我也倾向于使用日期而不是布尔值，因此您可以看到布尔值的设置时间。对于命名，请考虑“友谊”和“信息”以外的其他内容。如果它是用户的一个属性，我会考虑像“subscribed_to_friendships”和“subscribed_to_messages”这样的东西。

我通常避免使用 has_one 的原因是进行非常简单的查询并减少维护需求。您可能会得到所有应该收到消息并循环访问它们的用户，我更喜欢避免加入并保持简单。我也不太喜欢孩子身上的 false 和 null 是多么的相同。这将帮助您避免删除/添加首选项记录，尤其是在默认设置为 true 并且您将在默认情况下为大多数用户创建首选项的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:36:03.863

我看到该方法中的一个问题是，如果明天您有更多类型作为首选项，则意味着当有人加入而不是您想要发送电子邮件时，在这种情况下，您必须再添加一列。为什么不进一步规范化它并使用更多表来存储 Preference 类型

```
 Id Name
             1  Friendship
             2  Message

             Id  User Id Flag
             1      1     TRUE
             2      1     False 
```

这意味着用户 1 选择了友谊，但没有选择消息。现在您可以轻松添加任何新的偏好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T14:36:35.850

[https://stackoverflow.com/users/177489/swards](https://stackoverflow.com/users/177489/swards)的方法对我来说是最好的选择，因为 has_one 查询以后可能会一团糟。将列添加到用户模型和 gg！

# wcf - 访问 wcf 服务

> ID：15769699
> 
> 赞同：0
> 
> 时间：2013-04-02T16:47:28.263
> 
> 标签：wcf

我有个问题。我尝试从应用程序 ASP.net MVC 访问 wcf Web 服务，但在调用该方法时出现此异常。

> 没有在 URI 上侦听可以接受消息的端点。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

这是我的代码

```
var client = new DSServiceClient();
client.Methode(); 
```

web.config 的服务模型部分

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IDSService" />
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="localhost:1695/Service1.svc"; binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IDSService" contract="ServiceReference1.IDSService" name="BasicHttpBinding_IDSService" />
    </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:59:38.147

检查您使用的 URL 是否可以从 asp.net mvc 站点访问。如果您使用的是 http 绑定，则可以将 url 复制并粘贴到部署站点的服务器上的浏览器中。URL 应位于站点根文件夹中的 web.config 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:18:21.380

您是否使用 IIS 7 进行托管？如果这样，您可以访问您的站点，启用目录浏览（暂时），单击 IIS 管理器右侧的浏览链接，选择服务类（“something.svc”），它应该会在浏览器中弹出。此时，您可以从浏览器复制 URL 并将 localhost 替换为服务器名称。您甚至可以继续单击该页面上的顶部链接以访问 WSDL。如果出现问题，您可能会收到一条可能更有帮助的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:18:04.723

这是我的服务的 web.config

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpEndpointBinding">
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
        realm="" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service behaviorConfiguration="DSWebService.Service1Behavior"
    name="DSWebService.Service1">
    <endpoint address="" binding="wsHttpBinding"
      contract="DSWebService.IDSService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:1695/DSWebService" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="DSWebService.Service1Behavior">
      <!-- To avoid disclosing metadata information, set the value below to false before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

这是我的客户端的 web.config：

```
<system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="WSHttpBinding_IDSService" />
  </wsHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:1695/Service1.svc" binding="wsHttpBinding"
      bindingConfiguration="WSHttpBinding_IDSService" contract="IDSService"
      name="WSHttpBinding_IDSService">
    <identity>
      <dns value="localhost" />
    </identity>
  </endpoint>
</client> 
```

并且 2 项目应该在同一个解决方案上，并且在我们添加参考之后：

```
DSServiceClient client = new DSServiceClient(); 
```

客户端.Methode();

# c# - 如何创建 C# TCP 侦听器，使所有客户端连接在一个线程中，仅在客户端写入时发送事件？

> ID：15769700
> 
> 赞同：2
> 
> 时间：2013-04-02T16:47:31.303
> 
> 标签：c#, .net

假设我们想要这样的 API：

```
var Listner = new ServerSocket();
Listner.Bind(URL);
Listner.OnData((senderClient, ClientDataStream) => {/* ... */}) 
```

*   我们还希望传递给 OnData 的委托在不影响套接字接收性能的有限多线程任务池中执行。
*   只有当 senderClient 上的当前任务被执行时，新的 senderClient 任务才会进入任务池的末尾。
*   当然，在使用 OnData 时，我们将能够通过套接字将数据写回客户端。

`ClientDataStream` `length`解析当前帧时，我们无法提供关于 next 的信息。因此`ClientDataStream`，应以异步操作的形式提供尽可能多地读取它的能力：

```
{
   byte[] data = ClientDataStream.Read(5).Wait();
   /* */
   byte[] data = ClientDataStream.Read(someDinamicVarNWeGotFromThatFirstFiveBytes).Wait(); //...
} 
```

在任务等待时，它可能会允许其他任务工作。

.Net 中或某些 OSS 库中是否有这样的智能套接字服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:59:32.527

我不知道`ServerSocket`.NET 中有一个类。只是[`Socket`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)。它可以异步做一些事情。MSDN 上有一篇详尽的文章：http: [//msdn.microsoft.com/en-us/library/5w7b7x5f%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/5w7b7x5f%28v=vs.110%29.aspx)

API 与您的伪代码有些不同。没有`OnData`事件，而是一个`BeginReceive`采用回调方法的方法。

该类`Socket`不支持开箱即用的 async/await（如果您使用的是 .NET 4.5），但我遇到了[这篇博客文章](http://blogs.msdn.com/b/pfxteam/archive/2011/12/15/10248293.aspx)，该文章定义了该类的一些扩展方法，以便也可以使用该编程模型。

# javascript - 如何在 node.js 中安全地运行用户提交的模块？

> ID：15769704
> 
> 赞同：3
> 
> 时间：2013-04-02T16:47:39.180
> 
> 标签：javascript, node.js, code-access-security

我们计划在node.js + express上开发一个面向业务的应用平台。而且我们喜欢允许用户运行他们自己的原生 node.js 模块（一组文件 js、css、html），所以通常它应该像门户和 portles/servlets。用户应该能够通过其客户端部分在服务器端安装模块，并且这些模块应该与平台交互，其他模块会抛出一些 api。因此需要将这些模块与对系统文件和数据库的直接访问隔离开来，但它们应该可以访问自己的文件和数据库。请帮助我我们应该挖掘什么方向以使其安全。我检查了以下信息：虚拟机和子进程中的沙箱。

我试过：

```
// Main file:
var util = require('util'),
  vm = require('vm'),
  fs = require('fs'),
  sandbox = {
    animal: 'cat',
    count: 2,
    require: require // I pass it to make possible for the module to
                     // include some additional files 
                     // but it opens access for all system files
  };
var context = vm.createContext(sandbox);

fs.readFile('./user_modules/index.js', 'utf8', function (err, data) {
  vm.runInNewContext(data, context);
  console.log(util.inspect(context));
});

//** User Module 
// user_modules/index.js

var fs = require('fs');
count++;
animal = 'Dog';

fs.readFile('README.md', 'utf8', function (err, data) {
  animal = 'Fox';
}); 
```

我将**REQUIRE**对象传递给模块以使包含一些附加文件成为可能，但它打开了对所有系统文件的访问权限，是否可以告诉 VM 或子进程仅使用特定文件夹？目前我不知道如何使用数据库，但我认为当用户安装他的模块时，平台应该复制所有文件并为用户创建一个数据库方案，然后当模块启动时我只需要传递连接到用户的对象数据库方案。

请帮助我，我对节点真的很陌生，有什么建议可以解决我的问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:47:14.517

您可以做的一件事是围绕 require 创建一个 shim 函数，该函数执行您想要的任何验证，然后调用系统的 require 函数。然后，您可以将其传递给沙箱作为“require”的替代品。

我不确定为 node.js 制作“安全”沙箱所需的所有更改。在某种程度上，这将取决于用户提交的模块需要做什么。

帮助确保用户模块不会干扰您的代码的一种方法是在它们自己的进程中运行它们。在 unix 系统上，您可以使用 chroot 创建一个隔离的文件系统供进程在其中运行，然后通过 stdio 管道或套接字与进程通信。

# python - 将字典中的列表转换为系列

> ID：15769706
> 
> 赞同：7
> 
> 时间：2013-04-02T16:47:41.123
> 
> 标签：python, python-3.x, pandas

我正在尝试从 HTML 输入文件中读取行并准备 Series / DataFrames，以便最终可以创建图表。我正在使用 lxml 的 objectify 来获取 HTML 数据行并将它们转换为列表。每当我尝试获取列表数据并制作一个系列或数据框时，我都会得到一个系列（或数据框），其中包含的元素数量等于列表中的项目数，但元素的数据是我的列表本身。

我可以展示我的问题的最简单方法是：

```
from lxml import etree
from lxml import objectify
from pandas import Series
line='<tr class="alt"><td>192.168.1.0</td><td>XXDHCP</td><td>Y</td><td>255</td><td>0</td><td>YYDHCP</td><td>Y</td><td>250</td><td>0</td><td>0%</td><td>505</td><td>505</td><td>0</td><td></td></tr>'
htmldata=(objectify.fromstring(line)).getchildren()
htmlseries=Series(htmldata) 
```

htmlseries 最终看起来像：

```
0     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
1     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
2     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
3     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
4     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
5     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
6     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
7     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
8     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
9     [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
10    [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
11    [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
12    [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ...
13    [[[192.168.1.0, XXDHCP, Y, 255, 0, YYDHCP, Y, ... 
```

`type(htmldata[0])`是：`lxml.objectify.StringElement`
`type(htmldata[3])`是：`lxml.objectify.IntElement`

虽然我正在寻找类似的东西：

```
0     192.168.1.0
1          XXDHCP
2               Y
3             255
4               0
5          YYDHCP
6               Y
7             250
8               0
9              0%
10            505
11            505
12              0
13 
```

我究竟做错了什么？我对发生了什么感到有些困惑。当我尝试将每一列读入列表时：

```
data=objectify.fromstring(line).getchildren()
labdata[ip]['Scope'].append(data[0])
labdata[ip]['Cluster1'].append(data[1])
labdata[ip]['Active1'].append(data[2])
...etc... 
```

我的清单最终看起来像：

```
labdata['192.168.1.0']['Utilization']
['100%',
 '96%',
 '96%',
 '90%',
 '81%',
 '96%',
 '90%',
 '97%',
 '98%',
 '92%',
 '99%',
 ...etc...
 ] 
```

但由于某种原因：

```
Series(labdata['192.168.1.0']['Utilization'])
0     [[[192.168.1.0, XXDHCP, Y, 0, 383, YYDHCP, Y...
1     [[[192.168.1.0, XXDHCP, Y, 28, 355, YYDHCP, ...
2     [[[192.168.1.0, XXDHCP, Y, 28, 355, YYDHCP, ...
3     [[[192.168.1.0, XXDHCP, Y, 76, 307, YYDHCP, ...
4     [[[192.168.1.0, XXDHCP, Y, 104, 279, YYDHCP,...
5     [[[192.168.1.0, XXDHCP, Y, 27, 356, YYDHCP, ...
6     [[[192.168.1.0, XXDHCP, Y, 66, 317, YYDHCP, ...
7     [[[192.168.1.0, XXDHCP, Y, 15, 368, YYDHCP, ...
8     [[[192.168.1.0, XXDHCP, Y, 15, 368, YYDHCP, ...
9     [[[192.168.1.0, XXDHCP, Y, 54, 329, YYDHCP, ...
...etc... 
```

`type(labdata['192.168.1.0']['Utilization'][0])`是`lxml.objectify.StringElement`

我需要将这些元素转换为普通字符串和整数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T17:07:58.400

问题是 htmldata 中的元素不是简单类型，并且 np.isscalar 在这里被愚弄了（因为这是它如何确定我们是否有列表列表或标量列表只是将元素字符串化，这将起作用

```
In [23]: print [ type(x) for x in htmldata ]
[<type 'lxml.objectify.StringElement'>, <type 'lxml.objectify.StringElement'>, <type 'lxml.objectify.StringElement'>, <type 'lxml.objectify.IntElement'>, <type 'lxml.objectify.IntElement'>, <type 'lxml.objectify.StringElement'>, <type 'lxml.objectify.StringElement'>, <type 'lxml.objectify.IntElement'>, <type 'lxml.objectify.IntElement'>, <type 'lxml.objectify.StringElement'>, <type 'lxml.objectify.IntElement'>, <type 'lxml.objectify.IntElement'>, <type 'lxml.objectify.IntElement'>, <type 'lxml.objectify.StringElement'>]

In [24]: Series([ str(x) for x in htmldata ])
Out[24]: 
0     192.168.1.0
1          XXDHCP
2               Y
3             255
4               0
5          YYDHCP
6               Y
7             250
8               0
9              0%
10            505
11            505
12              0
13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T17:08:48.603

好问题！这是奇怪的行为。

出现问题是因为您正在向 Series 传递 list `lxml.objectify.StringElement`。`pandas`由`np.array`s 支持，因此更喜欢将其数据存储在统一数组中。因此，它将所有内容抽象为一个`np.object`，以便可以将它们推入一个数组。实际上，如果您查看数据的底层数组 ( `Series.values`)，您会发现它创建得很好，尽管它是一个 numpy 数组，`lxml.objectify.StringElements`其中可能不是您想要的。

简单的解决方案当然是将所有内容都转换为字符串，这可能是您在这种情况下想要做的。

* * *

但你问为什么打印很有趣？好吧，如果你在 pandas 中钻取代码，你最终会得到以下函数`pandas.core.common`：

```
def _is_sequence(x):
    try:
        iter(x)
        len(x) # it has a length
        return not isinstance(x, basestring) and True
    except Exception:
        return False 
```

换句话说，pandas 看到 lxml 对象不是基本字符串，因此假定它们是序列。熊猫可能应该检查`isinstance(x, collections.Sequence)`...

# codeigniter - php 文件存在总是不返回任何内容 - CodeIgniter

> ID：15769715
> 
> 赞同：1
> 
> 时间：2013-04-02T16:48:07.823
> 
> 标签：codeigniter, file-exists

我想显示图像。用户最多可以添加 7 个图像，但如果需要，他们也可以添加少于 7 个。

我四处搜寻，发现这`file_exists()`是我所追求的功能，但我尝试了几种方法，但它总是给我没有形象。

这是我尝试的一种方法：

```
<?php if(file_exists(base_url() . "photos/" . $p['p_id'] . "_5.jpg")):?>
    <div class="single">
       <a href="<?php echo base_url();?>photos/<?php echo $p['p_id'];?>_5.jpg" rel="lightbox[image]">
         <img src="<?php echo base_url();?>photos/<?php echo $p['p_id'];?>_5.jpg" style="width:100px; height:100px;"/>
       </a>
    </div>
<?php endif; ?> 
```

然后我四处寻找，发现在函数内部定义路径不是一个好主意，所以我在外面定义了它：

```
<?php $path = base_url() . "photos/" . $p['p_id'] . "_";?>
     <?php $img4 = $path . "4.jpg";?>
      <?php if(file_exists($img4)):?> 
```

这也不起作用。我正在测试文件夹“照片”中的 4 张图像，所以我知道应该显示 4 张图像。关于我应该如何解决它的任何想法都会很棒。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T17:09:25.777

该函数`file_exists`接受文件路径作为其参数，而不是像您现在使用的是 CodeIgniter 那样的 url `base_url()`。

您应该使用`FCPATH`指向您的 codeigniter 应用程序基目录的常量。这是您应该分配给路径的内容（取决于图像文件在应用程序目录中的位置）：

```
<?php $path = FCPATH . "htdocs/images/" . $product[0]['product_id'] . "_";?> 
```

但由于某种原因，如果你真的需要使用`base_url()`. 您可以使用`get_headers()`which 检查关联数组中 url 返回的标头，并在失败时检查 false。从返回的标头中，您可以确定图像 url 是否有效。[更多关于 get_headers()](http://php.net/manual/en/function.get-headers.php)。

希望能帮助到你。

干杯，

阿迪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:38:43.320

文件存在需要目录路径而不是 URL，URL 将始终返回 false。

```
 <?php 
    for($i=1; $i < 7; $i++):
    {
    $img = $path . $i . ".jpg";
    $url=getimagesize($img);
    if(!is_array($url))
    {
    ?>
    <div class="single">
            <a href="<?php echo base_url();?>images/<?php echo $product[0]['product_id'];?>_<?php echo $i; ?>.jpg" rel="lightbox[productimage]">
                  <img src="<?php echo base_url();?>images/<?php echo $product[0]['product_id'];?>_<?php echo $i; ?>.jpg" style="width:100px; height:100px;"/>
                </a>
            </div>
    <?php
    }
    }
    ?> 
```

请注意，这有点慢，但它确实适用于服务器上的 URL。

# wcf - 如何在双工回调中读取 WCF 消息头？

> ID：15769719
> 
> 赞同：5
> 
> 时间：2013-04-02T16:48:12.953
> 
> 标签：wcf, message, duplex, operationcontext

在正常的 WCF 请求/回复合同中，您可以使用以下内容读取消息标头：

```
OperationContract.Current.IncomingMessageHeaders 
```

我不知道如何在双工合约的回调端执行此操作。回调实现内部`OperationContext.Current`是`null`.

编辑 4/5/2013：我正在使用基于 net.tcp 的自定义绑定，但有很多自定义项。例如，使用协议缓冲区消息编码而不是 Xml。还有一些自定义安全性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:51:28.290

你用的是什么绑定？在 SSCCE 下面的回调实现中，上下文不为空。

```
public class StackOverflow_15769719
{
    [ServiceContract(CallbackContract = typeof(ICallback))]
    public interface ITest
    {
        [OperationContract]
        string Hello(string text);
    }
    [ServiceContract]
    public interface ICallback
    {
        [OperationContract(IsOneWay = true)]
        void OnHello(string text);
    }
    public class Service : ITest
    {
        public string Hello(string text)
        {
            ICallback callback = OperationContext.Current.GetCallbackChannel<ICallback>();
            ThreadPool.QueueUserWorkItem(delegate
            {
                callback.OnHello(text);
            });

            return text;
        }
    }
    class MyCallback : ICallback
    {
        AutoResetEvent evt;
        public MyCallback(AutoResetEvent evt)
        {
            this.evt = evt;
        }

        public void OnHello(string text)
        {
            Console.WriteLine("[callback] Headers: ");
            foreach (var header in OperationContext.Current.IncomingMessageHeaders)
            {
                Console.WriteLine("[callback]   {0}", header);
            }

            Console.WriteLine("[callback] OnHello({0})", text);
            evt.Set();
        }
    }
    public static void Test()
    {
        bool useTcp = false;
        string baseAddress = useTcp ? 
            "net.tcp://" + Environment.MachineName + ":8000/Service" :
            "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        Binding binding = useTcp ?
            (Binding)new NetTcpBinding(SecurityMode.None) :
            new WSDualHttpBinding(WSDualHttpSecurityMode.None)
            {
                ClientBaseAddress = new Uri("http://" + Environment.MachineName + ":8888/Client")
            };
        host.AddServiceEndpoint(typeof(ITest), binding, "");
        host.Open();
        Console.WriteLine("Host opened");

        AutoResetEvent evt = new AutoResetEvent(false);
        MyCallback callback = new MyCallback(evt);
        DuplexChannelFactory<ITest> factory = new DuplexChannelFactory<ITest>(
            new InstanceContext(callback),
            binding,
            new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();

        Console.WriteLine(proxy.Hello("foo bar"));
        evt.WaitOne();

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# angularjs - 在 AngularJS 中更改页面（在 requireJS 下）

> ID：15769724
> 
> 赞同：0
> 
> 时间：2013-04-02T16:48:49.037
> 
> 标签：angularjs, requirejs, transition

我是 AngularJs 的初学者，我有一个简单的问题：如何在 AngularJS 中更改页面？

不在 AngularJS 中使用路由器（ng-view），因为我需要一个没有通用模板的新 html 页面。我尝试使用“ng-href”，但效果不佳，因为系统在**requireJS**下运行，并且新的 html 不包含我需要的任何 js 或 css。（除非我强制添加它们..）

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:40:09.880

你可以使用一些模板引擎来实现，比如“Swig” [http://paularmstrong.github.io/swig/](http://paularmstrong.github.io/swig/)有一个布局模板，如果你是基础 js 和 css，你可以扩展它。

# oracle - 为存储过程 Oracle 重构字符串

> ID：15769730
> 
> 赞同：0
> 
> 时间：2013-04-02T16:49:07.557
> 
> 标签：oracle, stored-procedures, plsql, split, query-string

在 SOURCE 列下的视图中，我有以下值。

SRC - TERM - randomtext - LOCATION（仅供参考）

```
ABC DE RANDOMJIBBERISH MORE RANDOMJIBBERISH FORWARD
ARY HES RANDOMJIBBERISH MORE RANDOMJIBBERISH  BACKWARD
IGHE UER RANDOMJIBBERISH MORE RANDOMJIBBERISH  LEFT 
```

现在我有一个查询，需要根据源查找该视图。这个工作得很好。

```
SELECT 
    t.DATE_, t.PX_LAST
FROM 
    THIS.TABLE_NEW t 
WHERE
    t.DATE_ >= '2003-03-02'
    AND t.DATE_ <= '2013-03-02' 
    AND t.SOURCE LIKE 'ABC DE % FORWARD' --Where the magic happens
    AND t.SOURCE LIKE '%'||'1M'||'%'
    AND t.PX_LAST is NOT NULL
ORDER BY 
    t.DATE_ ASC; 
```

现在，问题是，当我尝试在存储过程中实现它时，我需要在我得到的参数中插入百分号。这不起作用，尤其是它使用 inSource 查找源的部分

```
PROCEDURE Get_It
(
    inSource VARCHAR2,
    inStartDate DATE,
    inEndDate DATE,
    inLength VARCHAR2,
    inRC1 OUT SYS_REFCURSOR
) AS
BEGIN
OPEN inRC1 FOR
SELECT t.DATE_, t.PX_LAST
FROM THIS.TABLE_NEW t WHERE

t.DATE_ >= inStartDate
AND t.DATE_ <= inEndDate 
AND t.SOURCE LIKE inSource --Where the magic needs to happen 
AND t.SOURCE LIKE '%'||length||'%'
AND t.PX_LAST is NOT NULL
ORDER BY t.DATE_ ASC;
END GET_IT; 
```

所以基本上我需要在字符串 ( ) 的中间插入一个百分号`inSource`，在最后一个单词和倒数第二个单词之间，一直。我能够在查询中做到这一点，因为我可以手动将其放入字符串中，但在实际的存储过程中，我不知道如何操作字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:58:29.823

在我看来，您的查询很好，但您的 inLength 参数未在游标定义中正确使用。

根据您的编辑说明，有两种可能的解决方案。

第一个选项：将 inSource 作为两个 varchar 传递，这将是所有字符串，直到空格，然后是最后一个单词

```
PROCEDURE Get_It
(
inSourceFirst VARCHAR2,
inSourceLast VARCHAR2,
inStartDate DATE,
inEndDate DATE,
inLength VARCHAR2,
inRC1 OUT SYS_REFCURSOR
) AS
BEGIN
OPEN inRC1 FOR
SELECT t.DATE_, t.PX_LAST
FROM THIS.TABLE_NEW t WHERE

t.DATE_ >= inStartDate
AND t.DATE_ <= inEndDate 
AND t.SOURCE LIKE inSourceFirst || '%' || inSourceLast
AND t.SOURCE LIKE '%'|| inLength ||'%'
AND t.PX_LAST is NOT NULL
ORDER BY t.DATE_ ASC;

END GET_IT; 
```

第二种选择：使用 regexp_substr() 函数[More here](http://psoug.org/reference/regexp.html)。然后，您的 inSource 字符串将被 regexp_replace 替换为两个 regexp_substr 函数调用，该函数调用抓取空格之前和之后的内容，并在其间附加 & 字符。就像是...

```
regexp_substr('SPACE MAN BEAR PIG DOG CAT','[^ ]+{4}',1,5) || ' % ' || regexp_substr('SPACE MAN BEAR PIG DOG CAT','[^ ]+',1,6) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:39:29.120

假设您想传入一个`inSource`like的值`'ABC DE FORWARD'`并让程序将其转换为`'ABC DE % FORWARD'`-`%`总是在第二个和第三个单词之间 - 然后你可以搞砸并重建字符串，或者你可以做一个简单的[`regexp_replace()`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions149.htm)：

```
AND t.SOURCE LIKE regexp_replace(inSource, ' ', ' % ', 1, 2)
AND t.SOURCE LIKE '%'||inLength||'%' 
```

这将用空格填充的百分号替换空格，从位置 1（即字符串的开头）开始并且仅适用于第二个实例 - 因此它跳过第一个空格并且仅影响第二个和第三个单词之间的那个.

为了证明这一点：

```
select regexp_replace('ABC DE FORWARD', ' ', ' % ', 1, 2)
from dual;

REGEXP_REPLACE('
----------------
ABC DE % FORWARD 
```

# php - 写入 PHP 输出缓冲区，然后从缓冲区下载 CSV

> ID：15769732
> 
> 赞同：7
> 
> 时间：2013-04-02T16:49:08.983
> 
> 标签：php, csv

我需要将 CSV 文件写入 PHP 输出缓冲区，然后在完成写入后将该文件下载到客户端计算机。（我想把它写在服务器上并下载它，它正在工作，但事实证明我在生产服务器上没有写访问权）。

我有以下 PHP 脚本：

```
$basic_info = fopen("php://output", 'w');
$basic_header = array(HEADER_ITEMS_IN_HERE);

@fputcsv($basic_info, $basic_header);

while($user_row = $get_users_stmt->fetch(PDO::FETCH_ASSOC)) {
    @fputcsv($basic_info, $user_row);
}

@fclose($basic_info);

header('Content-Description: File Transfer');
header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename=test.csv');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize("php://output"));
ob_clean();
flush();
readfile("php://output"); 
```

我不知道该怎么办。CSV 文件下载但不显示任何内容。我认为这与我的 ob_clean() 和 flush() 命令的顺序有关，但我不确定订购这些东西的最佳方法是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T17:06:11.983

你做的有点过分了。创建脚本的唯一目的是输出 CSV。只需将其直接打印到屏幕上即可。不要担心标题或缓冲区或 php://output 或类似的东西。

一旦您确认您正在将数据正确地打印到屏幕上，只需在开头添加这些标题：

```
<?php
header("Content-disposition: attachment; filename=test.csv");
header("Content-Type: text/csv");
?> 
```

...确认正确下载文件。然后您可以根据需要添加其他标头（我上面包含的标头是我自己使用的标头，没有任何额外的麻烦来使其正常工作，其他标头基本上是为了提高效率和缓存控制，其中一些可能已经适当处理由您的服务器提供，对于您的特定应用程序可能重要也可能不重要）。

如果需要，可以使用输出缓冲`ob_start()`和`ob_get_clean()`将输出内容转换为字符串，然后您可以使用该字符串来填充`Content-Length`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-12T13:41:51.757

正如我在对 Edson 的回答的评论中提到的，我希望在最后一行代码出现“标头已发送”警告：

```
header('Content-Length: '.$streamSize); 
```

因为输出是在发送此标头之前写入的，但他的示例工作正常。

一些调查使我得出以下结论：

> 在您使用输出缓冲区（无论是用户缓冲区还是默认的 PHP 缓冲区）时，您可以按照您想要的方式发送 HTTP 标头和内容。您知道任何协议都需要在正文之前发送标头（因此称为“标头”），但是当您使用输出缓冲层时，PHP 会为您处理这些。任何使用输出标头（header()、setcookie()、session_start()）的 PHP 函数实际上都将使用内部 sapi_header_op() 函数，该函数只是填充标头缓冲区。然后，当您使用 printf() 写入输出时，它会写入输出缓冲区（假设为一个）。**当要发送输出缓冲区时，PHP 开始首先发送标头，然后是正文。PHP 为您处理一切。**如果您不喜欢这种行为，您别无选择，只能禁用任何输出缓冲层。

和

> 在大多数配置下，PHP 缓冲区的默认大小是 4096 字节 (4KB)，这意味着 PHP 缓冲区最多可以容纳 4KB 的数据。**一旦超过此限制或 PHP 代码执行完成，缓冲的内容将自动发送**到正在使用的任何后端 PHP（CGI、mod_php、FastCGI）。PHP-CLI 中的输出缓冲总是关闭。

Edson 的代码之所以有效，是因为输出缓冲区没有自动刷新，因为它没有超过缓冲区大小（并且脚本在发送最后一个标头之前没有明显终止）。

一旦输出缓冲区中的数据超过缓冲区大小，就会引发警告。或者在他的例子中，当数据

```
$get_users_stmt->fetch(PDO::FETCH_ASSOC) 
```

太大。

为了防止这种情况，您应该使用 ob_start() 和 ob_end_flush() 管理自己的输出缓冲；如下所示：

```
// Turn on output buffering
ob_start();

// Define handle to output stream
$basic_info   = fopen("php://output", 'w');

// Define and write header row to csv output 
$basic_header = array('Header1', 'Header2');  
fputcsv($basic_info, $basic_header);  

$count = 0; // Auxiliary variable to write csv header in a different way

// Get data for remaining rows and write this rows to csv output
while($user_row = $get_users_stmt->fetch(PDO::FETCH_ASSOC)) {  
    if ($count == 0) {
        // Write select column's names as CSV header
        fputcsv($basic_info, array_keys($user_row));  
    } else {
        //Write data row
        fputcsv($basic_info, $user_row);
    }
    $count++;
}  

// Get size of output after last output data sent  
$streamSize = ob_get_length();

//Close the filepointer
fclose($basic_info);  

// Send the raw HTTP headers
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=test.csv');  
header('Expires: 0');  
header('Cache-Control: no-cache');
header('Content-Length: '. ob_get_length());

// Flush (send) the output buffer and turn off output buffering
ob_end_flush(); 
```

但是，您仍然受到其他限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T18:44:43.593

我对你的代码做了一些调整。

*   [根据PHP 文档的](http://php.net/manual/en/function.header.php)建议，在任何输出之前移动了标题；

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP

*   删除了一些没有太大变化的标题；
*   评论了使用选择列的名称编写 csv 标题的另一个选项；
*   现在内容长度有效；
*   没有必要回显 $basic_info 因为它已经在输出缓冲区中，我们通过标题将它重定向到文件中；
*   已删除`@`（PHP 错误控制运算符），因为它可能会导致开销，目前没有可显示的链接，但您可能会在搜索时找到它。在消除错误之前您应该三思而后行，**大多数**情况下应该修复而不是消除错误。

* * *

```
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=test.csv');  
header('Expires: 0');  
header('Cache-Control: no-cache'); 

$basic_info   = fopen("php://output", 'w');  
$basic_header = array(HEADER_ITEMS_IN_HERE);  

fputcsv($basic_info, $basic_header);  
$count = 0; // auxiliary variable to write csv header in a different way

while($user_row = $get_users_stmt->fetch(PDO::FETCH_ASSOC)) {  
    // Write select column's names as CSV header
    if ($count == 0) {
        fputcsv($basic_info, array_keys($user_row));  
    }

    fputcsv($basic_info, $user_row);  
    $count++;
}  

// get size of output after last output data sent  
$streamSize = ob_get_length(); 
fclose($basic_info);  

header('Content-Length: '.$streamSize); 
```

# c# - 代码要求下载文件+对话框但仅显示对话框

> ID：15769735
> 
> 赞同：0
> 
> 时间：2013-04-02T16:49:16.927
> 
> 标签：c#

我用C#调用了以下文件下载，对话框显示说文件正在下载，所以当我去检查文件夹时，文件没有下载！

```
private void Button_Click_1(object sender, RoutedEventArgs e) {
    string url = @"http://dc451.4shared.com/download/eWW2ICvX/Alexville.zip?tsid=20130402-163358-7222b14a";
    // Create an instance of WebClient
    System.Net.WebClient client = new System.Net.WebClient();
    // Hookup DownloadFileCompleted Event
    client.DownloadFileCompleted += new AsyncCompletedEventHandler(client_DownloadFileCompleted);

    // Start the download and copy the file to c:\temp
    client.DownloadFileAsync(new Uri(url), @"C:\Users\PC\Desktop\Medieval Silver Edition");
}

void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e) {
    MessageBox.Show("File downloaded");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:01:53.187

你没有给它一个文件名。

```
client.DownloadFileAsync(new Uri(url),
           @"C:\Users\PC\Desktop\Medieval Silver Edition\Alexville.zip"); 
```

# ruby - 确定Ruby中对象的类型

> ID：15769739
> 
> 赞同：426
> 
> 时间：2013-04-02T16:49:26.227
> 
> 标签：ruby, types

我将使用 python 作为我正在寻找的示例（如果您不了解 Python，可以将其视为伪代码）：

```
>>> a = 1
>>> type(a)
<type 'int'> 
```

我知道在红宝石中我可以做到：

```
1.9.3p194 :002 > 1.class
 => Fixnum 
```

但这是确定对象类型的正确方法吗？

* * *

## 回答 #1

> 赞同：695
> 
> 时间：2013-04-02T16:53:39.890

确定对象“类型”的正确方法是调用`object.class`.

由于类可以从其他类继承，如果您想确定一个对象是否“属于特定类型”，您可以调用`object.is_a?(ClassName)`以查看是否`object`属于类型`ClassName`或派生自它。

通常在 Ruby 中不进行类型检查，而是根据对象对特定方法的响应能力来评估对象，通常称为“[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)”。换句话说，如果它响应您想要的方法，则没有理由特别关注类型。

例如，`object.is_a?(String)`太死板了，因为另一个类可能会实现将其转换为字符串的方法，或者使其行为与 String 的行为方式相同。`object.respond_to?(:to_s)`将是一种更好的方法来测试有问题的对象是否符合您的要求。

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-04-02T17:03:58.873

你也可以试试：[`instance_of?`](http://ruby-doc.org/core-2.0/Object.html#method-i-instance_of-3F)

```
p 1.instance_of? Fixnum    #=> True
p "1".instance_of? String  #=> True
p [1,2].instance_of? Array #=> True 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-04-02T16:56:01.640

通常在 Ruby 中，您实际上并不关心对象的类本身是什么，您只关心它是否响应某个方法。这被称为[Duck Typing](http://en.wikipedia.org/wiki/Duck_typing)，您会在各种 Ruby 代码库中看到它。

因此，在许多（如果不是大多数）情况下，最好使用 Duck Typing 使用[`#respond_to?(method)`](http://ruby-doc.org/core-2.0/Object.html#method-i-respond_to-3F)：

```
object.respond_to?(:to_i) 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2016-12-05T17:42:47.613

我会说“是”。正如“Matz”在他的一次演讲中所说的那样，“Ruby 对象没有类型”。不是全部，而是他试图传达给我们的部分。那么为什么有人会说“一切都是对象”呢？添加他说“数据有类型而不是对象”。

所以我们可能会喜欢这个。

[https://www.youtube.com/watch?v=1l3U1X3z0CE](https://www.youtube.com/watch?v=1l3U1X3z0CE)

但是 Ruby 并不关心对象的类型，只关心类。我们使用类而不是类型。然后所有数据都有一个类。

```
12345.class

'my string'.class 
```

他们也可能有祖先

```
Object.ancestors 
```

他们也有元类，但我会为您保存详细信息。

一旦你知道了这个类，那么你就可以查找你可以为它使用的方法。这就是需要“数据类型”的地方。如果您真的想了解详细信息，请查看...

“Ruby 对象模型”

这是用于 Ruby 如何处理对象的术语。这都是内部的，所以你并没有真正看到很多，但很高兴知道。但这是另一个话题。

是的！类是数据类型。对象有类，数据有类型。因此，如果您了解数据库，那么您就会知道只有一组有限的类型。

文本块数字

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-24T18:07:52.497

变量名.class

这里变量名是“a” `a.class`

# highcharts - highcharts 传奇中间 ie7

> ID：15769745
> 
> 赞同：0
> 
> 时间：2013-04-02T16:49:36.817
> 
> 标签：highcharts

我被 highcharts+ie7 的问题难住了。出于某种原因，我的图例出现在图表中间（见下文）。它在 FF、Chrome 和更新版本的 IE 中看起来不错。

当我将 verticalAlign 更改为 'top' 时，图例会很好地移到顶部，但重置 verticalAlign: 'bottom' 会让我回到中间。有什么想法吗？

见图片：

![例子](https://i.stack.imgur.com/aaEFx.png)

# xsd - XSD - 如何将两个“引用”添加到同一个元素

> ID：15769747
> 
> 赞同：0
> 
> 时间：2013-04-02T16:49:48.127
> 
> 标签：xsd, element, ref

我一直在尝试形成这个XSD，有人可以帮忙吗...

我有一个元素“国家”，如下所示：

```
<xs:element name="country">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="id" type="xs:long" minOccurs="0" />
            <xs:element name="isoCode" type="xs:string" minOccurs="0" />
            <xs:element name="currencyCode" type="xs:string" minOccurs="0" />
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

现在，我需要用两个元素“源国家”和“目标国家”来形成 XSD，它们都应该引用“国家”。有人可以帮我形成那个XSD。

```
<xs:element name="crossCountries">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="id" type="xs:long" minOccurs="0" />

            <xs:element ref="country" />   <!-- Source Country -->

            <xs:element ref="country" />   <!-- Destination Country -->

        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:28:44.183

您不能引用元素并为该引用分配不同的标记名称。相反，您要做的是为该元素定义内容模型（复杂类型会这样做）并在不同命名的标签下重用它。

```
<xs:complexType name="country">
    <xs:sequence>
        <xs:element name="id" type="xs:long" minOccurs="0" />
        <xs:element name="isoCode" type="xs:string" minOccurs="0" />
        <xs:element name="currencyCode" type="xs:string" minOccurs="0" />
    </xs:sequence>
</xs:complexType> 
```

然后：

```
<xs:element name="crossCountries">
  <xs:complexType>
    <xs:sequence>
        <xs:element name="id" type="xs:long" minOccurs="0" />

        <xs:element name="sourceCountry" type="country" />   <!-- Source Country -->

        <xs:element name="destinationCountry" type="country" />   <!-- Destination Country -->

    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

# count - 排序和匹配逗号分隔的字符串值 (PHP / mySQL)

> ID：15769749
> 
> 赞同：2
> 
> 时间：2013-04-02T16:49:50.453
> 
> 标签：count, matching, comma

我希望今天能在以下方面得到一些帮助：

我的数据库表中有两个字段需要整理和匹配。一个是`staff_id`，另一个是`staff_name`。

```
staff_id = "1958324, 5930349, 6802941, 0592854"

staff_name = "John D. Doe, Sammy D'man, Lucy Lane, Jesse J. James" 
```

我需要能够做的是知道第一个 ID 与名字一起，第二个 ID 与第二个名字等。所有匹配的值都用逗号分隔，所以它不应该很难，但它让我很适合.

我正在传递`staff_id`变量，我需要能够查询我的数据库并吐出匹配的名称。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T12:51:57.123

```
public List<String> getMatchedValues(List<String> staff_id, List<String> staff_name){
    List<String> retVal = new arrayList<String>();
        for(int i=0; i<staff_id.size()){
            retVal.add(staff_id.get(i)+" "+staff_name.get(i));
        }
    return retVal;
} 
```

# css - GWT：在单元格浏览器中为单元格设置特定样式

> ID：15769752
> 
> 赞同：0
> 
> 时间：2013-04-02T16:50:00.460
> 
> 标签：css, gwt, cellbrowser

我需要通过 CSS 文件在 GWT 中设置特定样式的 Cell Browser 单元格。关于如何做的任何指示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:54:28.503

*如果您使用的是 2.4 或 2.5 sdk 的 GWT*

`getCellStyleNames()`创建列时覆盖。

```
 TextColumn<String> col= new TextColumn<String>() {

                @Override
               public String getCellStyleNames(Context context, String  object) {
                     return "yourStylee";
                 }  

                @Override
                public String  getValue(String object) {                                            
                return object.getName();
                }           

              };

        }; 
```

如果它的细胞

```
 public void render(com.google.gwt.cell.client.Cell.Context context, Meeting object, SafeHtmlBuilder sb) {

        sb.append(SafeHtmlUtils.fromString(" <div class=youclass><table>"));
        // Code goes here
        sb.append(SafeHtmlUtils.fromString("<table> </div>")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:01:25.927

您应该能够使用 UIObject 中的方法在任何小部件上设置 css 样式。在这种情况下，这样的事情应该起作用：

```
cellBrowserInstance.setStylePrimaryName("newStyle"); 
```

在您的 CSS 中列出“newStyle”。

# asp.net - 动态隐藏/显示元标记 ASP.NET

> ID：15769754
> 
> 赞同：0
> 
> 时间：2013-04-02T16:50:01.787
> 
> 标签：asp.net, metadata

嘿，所以目前我正在放置元标记，例如：

```
<meta name="WT.oss_r" content="<%= SearchNumberOfResults%>"/> 
```

我正在考虑把它放在一个`ASP:Panel`可见`true`或`false`取决于`SearchNumberOfResults`存在的设置中，`String.IsNullOrEmpty`但这会将 div 标记放在`<head>`不理想的部分中。

隐藏和显示元标记的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:11:49.193

```
private string description; 
```

页面初始化：

```
HtmlMeta tag = new HtmlMeta();
tag.Name = "description";
tag.Content = description;
Header.Controls.Add(tag); 
```

看到这个：[使用-Meta-Tags-with-Master-Pages-in-ASP-NET](http://www.codeproject.com/Articles/17368/Using-Meta-Tags-with-Master-Pages-in-ASP-NET)

* * *

```
<%@ Page Language="C#" MetaKeywords="<%=SearchNumberOfResults%>" MetaDescription="This is my blog that focuses on ASP.NET." AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %> 
```

* * *

```
protected void Page_Load(object sender, EventArgs e)
{                        
    Page.MetaDescription = "sample meta description";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:07:33.017

添加您的元标记：

```
runat="server" id="xxx" 
```

在 ASP.NET 代码中

```
MyPanel.xxx.visible = false; 
```

或者

```
xxx.visible = false; 
```

我相信“面板”在头部不起作用

# javascript - 通过对表格单元格进行数学运算来填充 div

> ID：15769764
> 
> 赞同：1
> 
> 时间：2013-04-02T16:50:27.627
> 
> 标签：javascript, jquery

试图在这里弄清楚这些东西。不知道是不是因为我已经在 tds 中有数字了。它是否将 em 作为字符串输入，所以它不知道如何进行数学运算？我知道我错了，但我认为这很容易，所以我希望你能纠正我。非常感谢。

```
<table id="Table">
                <tr>
                <td width="124" style="position: relative" rowspan="4"> 
                    <div id="percentage"></div>
                </td>
                <td>Total</td>
                <td id="Total">259</td>
                <td>Result</td>
                <td id="Count">11</td>
            </tr>
        </table> 
```

JS：

```
var total = $("Total");
var count = $("Count");
var Result = (Count/Total*100);

document.getElementById("percentage").innerHTML =  Result; 
```

那没有用。

我还需要 .innerHTML 中的 Result 以百分比形式出现。我应该像在这里一样将它乘以 100 并手动附加一个“%”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:53:39.313

您的 JavaScript 正在寻找元素类型而不是 id 将您的 js 更改为：

```
var total = parseInt($("#Total").text(), 10);
var count = parseInt($("#Count").text(), 10);
var Result = (count/total*100); 
```

您也没有转换为数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:19:51.093

你忘记了 '#' 通过 Id 选择并且你没有转换为 int，所以你可以通过 jQuery 在一行中进行选择：

```
$('#percentage').text(parseInt($('#Count').text())/parseInt($('#Total').text())*100); 
```

# c - 为什么 ioctl 返回“错误地址”

> ID：15769770
> 
> 赞同：6
> 
> 时间：2013-04-02T16:50:50.547
> 
> 标签：c, linux, posix, ioctl

我使用下面的代码从嵌入式板的 SPI 端口输出数据（olimex imx233-micro - 这不是板特定的问题）。当我运行代码`ioctl`时返回“**错误地址**”。我正在修改[http://twilight.ponies.cz/spi-test.c](http://twilight.ponies.cz/spi-test.c)上的代码，它工作正常。谁能告诉我我做错了什么？

```
root@ubuntu:/home# gcc test.c -o test
test.c:20: warning: conflicting types for ‘msg_send’
test.c:16: note: previous implicit declaration of ‘msg_send’ was here
root@ubuntu:/home# ./test
errno:Bad address - cannot send SPI message
root@ubuntu:/home# uname -a
Linux ubuntu 3.7.1 #2 Sun Mar 17 03:49:39 CET 2013 armv5tejl GNU/Linux 
```

代码：

```
//test.c
#include <stdint.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <getopt.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <linux/types.h>
#include <linux/spi/spidev.h>
#include <errno.h>

static uint16_t delay;

int main(int argc,char *argv[]){
     msg_send(254); //the message that I want to send decimal "254"
     return 0;
}

void msg_send(int msg){
    int fd;
    int ret = 0;
    fd = open("/dev/spidev32766.1", O_RDWR); //ls /dev outputs spidev32766.1
    if(fd < 0){
        fprintf(stderr, "errno:%s - FD could be not opened\n ", strerror(errno));  
        exit(1);
        }

    struct spi_ioc_transfer tr = {
        .len = 1,
        .delay_usecs = delay,
        .speed_hz = 500000, //500 kHz
        .bits_per_word = 8,
        .tx_buf = msg,
        .rx_buf = 0, //half duplex
    };

    ret = ioctl(fd, SPI_IOC_MESSAGE(1), &tr);
    if (ret <1 ){
        fprintf(stderr, "errno:%s - cannot send SPI message\n ", strerror(errno));
    }
    close(fd);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T17:03:22.113

错误消息“Bad address”来自错误代码`EFAULT`，当您将地址传递给内核时，该地址在您的进程的虚拟地址空间中不是有效的虚拟地址。您的`tr`结构的地址显然是有效的，因此问题必须出在其中一个成员上。

根据 的[定义`struct spi_ioc_transfer`](https://github.molgen.mpg.de/git-mirror/linux/blob/3c9688876ace9ca4cd8630e5fbba8bb28235990a/include/uapi/linux/spi/spidev.h#L89)，`.tx_buf`and`.rx_buf`成员必须是指向用户空间缓冲区的指针，或者为 null。您设置`.tx_buf`为整数 254，这不是一个有效的用户空间指针，所以这就是错误地址的来源。

我对这个 IOCTL 不熟悉，所以我最好的猜测是您需要以二进制形式存储数据。一种方法是：

```
struct spi_ioc_transfer tr = {
    .len = sizeof(msg),  // Length of rx and tx buffers
     ...
    .tx_buf = (u64)&msg, // Pointer to tx buffer
    ...
}; 
```

如果您需要将其作为 ASCII 发送，那么您应该使用一个函数，例如[`snprintf(3)`](http://linux.die.net/man/3/snprintf)将整数转换为 ASCII 字符串，然后将 TX 缓冲区指向该字符串并相应地设置长度。

# c++ - “c++ 单元测试文件只能添加到 Dll 项目类型”？

> ID：15769772
> 
> 赞同：-4
> 
> 时间：2013-04-02T16:50:52.833
> 
> 标签：c++, visual-studio

我正在尝试测试用 C++ 编写的代码。但是当我想创建测试类来检查我的代码时，Visual Studio 会显示对话框。

编辑以澄清问题。

我在 Visual Studio 中有一个 C++ 项目。它构建为 .EXE 文件。

我现在想添加一个单元测试类。

当我尝试向项目添加新项目时，我可以选择“C++ 单元测试类”并单击添加。

但随后我得到一个对话框，显示“C++ 单元测试文件只能添加到 Dll 项目类型”。

将单元测试添加到需要构建为 .exe 的项目的最佳方法是什么？

我需要创建一个新项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:58:09.100

使用单元测试设置项目的模型通常是：

```
Production executable -+ 
                       |--> Production code library
Unit test executable  -+ 
```

库在两者之间共享，作为静态链接的库或 DLL。

听起来您正在尝试将单元测试附加到 exe，这可能是不可能的。

# javascript - chrome 26，只有 mac 的拖放和数据传输问题：无法访问“text/html”

> ID：15769773
> 
> 赞同：3
> 
> 时间：2013-04-02T16:51:00.947
> 
> 标签：javascript, html, google-chrome, drag-and-drop

我正在开发一个使用拖放 API 来从各种网站收集资源的网络应用程序。

有了这个API，我打算解析拖拽资源的HTML，得到链接的URL和链接中的文字和图片。

它在 Firefox 19（Windows 和 Mac）上运行良好。它曾经可以在 Chrome 25 上运行，但自从最新更新以来，它在 Mac 26 的 Chrome 上无法运行，尽管它可以在 Windows 上运行。

这是我正在使用的代码片段——你可以在 jsfiddle 上试试：http: [//jsfiddle.net/rYcyP/](http://jsfiddle.net/rYcyP/)

```
document.getElementById("destination").addEventListener("dragover", function(_event) {
    _event.stopPropagation();
    _event.preventDefault();
}, false);
document.getElementById("destination").addEventListener("drop", function(_event) {
    _event.stopPropagation();
    _event.preventDefault();
    console.log(Array.prototype.slice.call(_event.dataTransfer.types));
}, false); 
```

当拖动嵌入图像的链接时，例如来自新闻网站（或 Stack Overflow 中的上述广告，或我的 gravatar），这是控制台在 Firefox 中读取的内容：

```
["text/x-moz-url", "text/x-moz-url-data", "text/x-moz-url-desc", "text/uri-list", "text/_moz_htmlcontext", "text/_moz_htmlinfo", "text/html", "text/plain", "application/x-moz-nativeimage", "application/x-moz-file-promise", "application/x-moz-file-promise-url", "application/x-moz-file-promise-dest-filename", "Files"] 
```

这比我真正需要的数据多得多，但是 text/html 就在这里！

在 Chrome 26.0.1410.43 Windows 中：

```
["text/plain", "text/uri-list", "text/html", "Files"] 
```

对我还是有好处的。

这是我在 MacOS X 上使用 Chrome 26.0.1410.43 得到的结果：

```
["text/uri-list"] 
```

其中不包括我的网络应用程序所需的“文本/html”。

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:32:26.743

是的，我搞砸了。这已在 Chrome 28 中修复，我将修复合并回 Chrome 27，因此您应该会在下一次更新中看到修复。Chrome 26 对所有非安全关键的更新都关闭了，所以我不能把它推回那个更新。

很抱歉给您带来麻烦。挂在那里，它应该重新开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:48:53.163

通过尝试构建相同的东西，遇到了同样的错误。我向 Chromium 提交了一份关于它的错误报告： [https ://code.google.com/p/chromium/issues/detail?id=225710](https://code.google.com/p/chromium/issues/detail?id=225710)

与此同时，我求助于单击图像将其插入，如下所示：http: [//jsfiddle.net/kthornbloom/jwvha/366/](http://jsfiddle.net/kthornbloom/jwvha/366/)

```
. 
```

# javascript - Javascript 在视图中不起作用，但在应用程序的其余视图中起作用

> ID：15769780
> 
> 赞同：1
> 
> 时间：2013-04-02T16:51:11.253
> 
> 标签：javascript, asp.net-mvc

我有一个视图，它引用了一个包含自动完成功能的 Javascript 文件。问题是在这个视图中 Javascript 根本不起作用。即使是 document.ready 上的警报也不起作用。我可以在不同的视图中使用确切的 javascript 文件，并且效果很好。我不知道下面的观点有什么问题。

**看法**

```
 @model RunLog.Domain.Entities.ErrorCode
    @{
        ViewBag.Title = "Create";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Enter a new Error Code</legend>@*<div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Error ID")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.ID)
            </span>
        </div>*@
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Error Description")
            </span><span class="rightContent">
                @Html.TextBoxFor(model => model.ErrorDescription, new { style = "width: 500px;" })
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Parent ID")
            </span><span class="rightContent">
                @Html.DropDownList("ParentID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Error Description Complete")
            </span><span class="rightContent">
                @Html.TextBoxFor(model => model.ErrorDescriptionWithParent, new { style = "width:500px;" })
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("High Level Error")
            </span><span class="rightContent">
                @Html.TextBoxFor(model => model.highlevelerror, new { style = "width:500px;" })
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Error Number")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.ErrorNumber)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Track")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.track)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Lane")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.lane)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Subsystem")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.subsystem, new { id = "rootcause" })
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Critical")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.critical)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent"></span><span class="rightContent">
                <input id="create" class="art-button" type="submit" value="Create" />
            </span>
        </div>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "List")
</div>
<script type="text/javascript">

    var serviceRootCauseUrl = '@Url.Action("FindRootCause", "ServiceEntry")';
</script>
<script src="@Url.Content("~/Scripts/rootcause.js")" type="text/javascript"></script> 
```

**JAVASCRIPT 文件**

```
$(document).ready(function () {
    $("#rootcause").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: serviceRootCauseUrl, type: "POST", dataType: "json",
                minLength: 0,
                data: { searchText: request.term, maxResult: 100 },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item.FullName, value: item.RootCauseName, id: item.ID }
                    }))
                }
            })
        },
        select: function (event, ui) {
            //                $("#rootcause").text(selecteditem.text);
            //                alert(ui.item ? ("You picked '" + ui.item.label + "' with an ID of " + ui.item.id)
            //                            : "Nothing selected, input was " + this.value);
        }
    });
}); 
```

**布局文件**

```
<title>@ViewBag.Title</title>
<link rel="stylesheet" href="@Url.Content("~/style.css")" type="text/css" media="screen" />
<!--[if IE 6]><link rel="stylesheet" href="@Url.Content("~/style.ie6.css")" type="text/css" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="@Url.Content("~/style.ie7.css")" type="text/css" media="screen" /><![endif]-->
<link href="@Url.Content("~/Content/css/Site.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/css/main.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/css/Content.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.core.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.tabs.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/jquery.treeview.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/jquery-ui-timepicker-addon.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.dialog.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/jquery-1.8.3.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/jquery.treeview.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.cookie.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/scrolltable.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/grid.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/datetime.js")" type="text/javascript"></script> 
```

# c# - 重新调整表单大小时文本框大小发生变化

> ID：15769784
> 
> 赞同：20
> 
> 时间：2013-04-02T16:51:21.073
> 
> 标签：c#, forms, resize

当您更改整个表单的大小时，许多程序会重新调整其文本框、标签、图片框等的大小。但是当我在表单中拖动一个文本框并使表单变小时，它会与文本框重叠，并且它将无用，因为我看不到那里写的所有内容。

很难解释所以这里有一些照片：

![在此处输入图像描述](https://i.stack.imgur.com/gcotg.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-02T16:52:49.497

检查文本框的属性[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)。
看来您需要设置为`Top, Left, Right`

如果以这种方式设置，文本框将保持锚定在其容器的左、上和右边框上。
因此，当窗体（容器）调整大小时，文本框会*自动*增大或缩小以保持设计器中设置的原始距离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-04T10:06:51.743

[![单击 Dock 下拉菜单并选择所需位置](https://i.stack.imgur.com/4zUJI.png)](https://i.stack.imgur.com/4zUJI.png)

单击 Dock 下拉菜单并选择所需位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T16:25:53.203

在 WPF 中，文本框会自动调整大小

# ios - 原生应用 UIWebview 中的 FaceBook JavaScript API

> ID：15769786
> 
> 赞同：2
> 
> 时间：2013-04-02T16:51:33.673
> 
> 标签：ios, facebook, uiwebview

我正在创建一个应用程序，它重用了我网站上的一些 HTML 页面。在其中一个页面中，facebook 功能中有一个分享事件。这在 UIWebview 中不起作用，因为 uiwebview 中没有“弹出窗口”的概念。FB.Login() 在实际浏览器中打开一个新选项卡，但在 UIWebview 中，它加载在现有页面的顶部。因此登录后，实际浏览器选项卡会自行关闭并将控制权转移到原始选项卡中的回调函数, UIWebview 页面只是变成空白，因为它可能再也找不到原来的回调函数了。有什么解决办法吗？

# linq - 两个源列表中出现的 ID 的附加内容更改的联合 2 列表

> ID：15769788
> 
> 赞同：1
> 
> 时间：2013-04-02T16:51:39.217
> 
> 标签：linq

如何合并这两个集合？

问题：当一个ApplicationID在listOfPM和listOfPM2中时，Test2为null，应该是一个数字

```
var listOfPM = from d in gbc
                select new Tab24PresentationModel
                {
                    ApplicationID = d.ApplicationID,
                    ApplicationName = d.ApplicationName,
                    Test1 = d.count,
                    Test2 = null
                };

var listOfPM2 = from d in gbc2
                select new Tab24PresentationModel
                {
                    ApplicationID = d.ApplicationID,
                    ApplicationName = d.ApplicationName,
                    Test1 = null,
                    Test2 = d.count
                };

var result = listOfPM.Union(listOfPM2); 
```

尝试从 PM 列表中删除 Test2 并从 listOfPM2 中删除 Test1 并获得：

> “xxx.Tab24PresentationModel”类型出现在单个 LINQ to Entities 查询中的两个结构不兼容的初始化中。可以在同一个查询中的两个位置初始化一个类型，但前提是在两个位置都设置了相同的属性并且这些属性以相同的顺序设置。

我可以想办法使用多个 foreach 来解决这个问题。想使用 Linq！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:35:50.297

您需要手动合并这两个对象（具有相同的 ApplicationID），这是无法解决的。

编辑 - 试试这个：

```
var list = gbc.Union( gbc2 ).ToLookup( d => d.ApplicationID ).Select( g =>
    {
        var first = g.First();
        var retVal = new Tab24PresentationModel
        {
            ApplicationID = first.ApplicationID,
            ApplicationName = first.ApplicationName,
            Test1 = first.count,
            Test2 = null
        };

        var second = g.Skip(1).Take(1).SingleOrDefault();

        if( null != second )
        {
            retVal.Test2 = second.count;
        }

        return retVal;
    } ); 
```

编辑2：hrm，仅当您不希望`Test1 = null, Test2 = value`仅存在 gbc2 时才有效。如果这不是问题，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:48:37.583

非常感谢您的回答和评论 - 这就是我想出的。

```
// take each list in turn and either add or update
var result = new List<Tab24PresentationModel>();
foreach (var t in listOfPM)
{
    var a = new Tab24PresentationModel
        {
            ApplicationID = t.ApplicationID,
            ApplicationName = t.ApplicationName,
            Test1 = t.Test1
        };

    result.Add(a);
}

// list2
foreach (var t in listOfPM2)
{
    // is this already in result
    if (result.Any(x => x.ApplicationID == t.ApplicationID))
    {
        var existing = result.First(x => x.ApplicationID == t.ApplicationID);
        existing.Test2 = t.Test2;
    }
    else
    {
        var a = new Tab24PresentationModel
            {
                ApplicationID = t.ApplicationID,
                ApplicationName = t.ApplicationName,
                Test2 = t.Test2
            };
        result.Add(a);
    }
} 
```

# jquery - 为什么这在 jsfiddle 中有效，但在其他地方无效？

> ID：15769789
> 
> 赞同：1
> 
> 时间：2013-04-02T16:51:39.623
> 
> 标签：jquery, css, css-float

[http://jsfiddle.net/Jg3FP/1/](http://jsfiddle.net/Jg3FP/1/)

这在各种浏览器中没有正确排列，但在 js fiddle 中工作正常，我没有做任何异国情调的事情。为什么它会这样，我该如何解决？

![在此处输入图像描述](https://i.stack.imgur.com/1teFL.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/yFHli.jpg)

```
<div id="diceDiv">
    <div id="dice1Div">#</div>
    <input type="checkbox"/>
    <div id="dice2Div">#</div>
    <input type="checkbox"/>
    <div id="dice3Div">#</div>
    <input type="checkbox" />
    <div id="dice4Div">#</div>
    <input type="checkbox"/>
    <div id="dice5Div">#</div>
    <input type="checkbox"/>
    <div id="dice6Div">#</div>
    <input type="checkbox"/>
    <br/>
    <input type="button" value="Roll" />
</div>
<div id="log"></div>
<div id="score"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    $("div div").css("float", "left");
    $("div input").css("clear", "right");
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:53:47.537

那是因为 jsFiddle 为您设置了正确的标头，尤其是没有 IE 切换到模拟旧版本行为的模式的文档类型。

尝试像这样启动您的 HTML 文件：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:10:43.480

您的 HTML 中存在一些问题。

关于[浮动](https://developer.mozilla.org/en-US/docs/CSS/float)概念：当您为 div`right`设置浮动时，您正在清除浮动。`left`

此外，您应该将希望在显示时运行的每个 jQuery 调用移动到[$(document).ready()](http://api.jquery.com/ready/)中。

`DIV`通常是一个块元素，我冒昧地修改了您的 HTML，以便每个选项都有一个 div 围绕它。通过这种方式，您可以让块格式化为您“清除”。

此外，我对复选框应用了零填充和边距。如果需要，您可以更改它。

查看 HTML（您可以在本地保存并运行它）：

* * *

```
<!DOCTYPE html>
<html>
<head>
<title>Sample</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
    $('#diceDiv INPUT').css({padding: '0px', margin: '0px'})
    });
</script>
</head>
<body>
<div id="diceDiv">
    <div>
    <span id="dice1Div">#</span><input type="checkbox"/>
    </div>
    <div>
    <span id="dice2Div">#</span><input type="checkbox"/>
    </div>
    <div>
    <span id="dice3Div">#</span><input type="checkbox" />
    </div>
    <div>
    <span id="dice4Div">#</span><input type="checkbox"/>
    </div>
    <div>
    <span id="dice5Div">#</span><input type="checkbox"/>
    </div>
    <div>
    <span id="dice6Div">#</span><input type="checkbox"/>
    </div>
    <br/>
    <input type="button" value="Roll" />
</div>
<div id="log"></div>
<div id="score"></div>
</body>
</html> 
```

# delphi - Delphi 填充 VirtualStringTree 的理想方法是什么？

> ID：15769790
> 
> 赞同：3
> 
> 时间：2013-04-02T16:51:41.480
> 
> 标签：delphi, record, nodes, virtualtreeview, tvirtualstringtree

所以我正在使用Delphi 2010，自从我开始使用VirtualTreeView（确切地说是VirtualStringTree）以来已经有一段时间了..似乎我做错了..因为事情没有像我一样工作期待。

我正在尝试使用指向存储在数据记录中并通过扫描用户给出的路径生成的文件/子文件夹描述的节点填充我的 VST ..（更多详细信息如下图所示）

![在此处输入图像描述](https://i.stack.imgur.com/lSmy3.jpg)

如图所示，节点以奇怪的方式显示..&无论我做什么，节点数据都没有正确初始化..“文件”列的节点标题是唯一可以正常工作的东西。

&这是我使用的代码：

1-**节点数据声明**：

```
type  nodeData=record
            Text, Size, Path:String;
            ImageIndex:Integer;
           end;

  PNodeData=^nodeData;

var hashmap:TDictionary<String, PVirtualNode>; // hashmap-> to store parent nodes (Folder)
    filesList:TDictionary<Integer,nodeData>; // fileList to store records of data 
```

* * *

2-**方法**

a) 扫描用户给定的路径

```
procedure AddAllFilesInDir(const Dir:String);
begin
// it scans the path 'Dir' and extract the "name & size" of each file/folder found in this dir
end; 
```

b) 生成**filesList** tdictionary... & 图像存储在“ **treeImageLIst** ”中，该“treeImageLIst”链接到**treeview.images**属性

```
procedure addFileToList(Name, Size:String);
var d:nodeData;
    parent:String;
    SHFileInfo :TSHFileINfo;
    Icon:TIcon;
begin
parent:=ExtractFileDir(Name);

//Get The Icon That Represents The File/Folder
SHGetFileInfo(PChar(Name), 0, SHFileInfo,  SizeOf(SHFileInfo),
                SHGFI_ICON or SHGFI_SMALLICON );

Icon := TIcon.Create;
Icon.Handle := SHFileInfo.hIcon;

// set The Name, Size, Path
d.Name:=ExtractFileName(Name);
d.Size:=Size;
d.Path:=parent;

// set the ImageIndex
d.ImageIndex:=Form1.treeImageList.AddIcon(Icon);

// add the node to fileList
filesList.Add(filesList.Count, d);

// Destroy the Icon
DestroyIcon(SHFileInfo.hIcon);
Icon.Free;
end; 
```

c) 创建树“theTree”

```
procedure createTree();
var theNode, Node:PVirtualNode;
    d:PNodeData;
    parent:String;
    nData:nodeData;
    i:integer;
begin

for i := 0 to filesList.Count - 1 do
begin

 nData:=filesList.Items[i];  parent:=nData.Path;

 if(hashmap.ContainsKey(parent))then theNode:=hashmap.Items[parent]
 else theNode:=nil;

 Node:=Form1.theTree.AddChild(theNode);

 // add a checkbox and make it checked
 Node.CheckType:=ctCheckBox;
 Node.CheckState:=csCheckedNormal;

 // get the newly created node data
 d:=Form1.theTree.GetNodeData(Node);

 // assign a data  to the newly created node
 d^:=nData;

 // add the node to hashmap if it's a new folder node
 if((ExtractFileExt(nData.Text)='')and(not hashmap.ContainsKey(nData.Path+'\'+nData.Text)))
 then hashmap.Add(nData.Path+'\'+nData.Text, Node);

end;

 Form1.theTree.Expanded[Form1.theTree.TopNode]:=True;
end; 
```

d) 树视图事件

```
procedure TForm1.theTreeFreeNode(Sender: TBaseVirtualTree; Node: PVirtualNode);
var d:PNodeData;
begin
  d := Sender.GetNodeData(Node);
  Finalize(d^);
end;

procedure TForm1.theTreeGetText(Sender: TBaseVirtualTree; Node: PVirtualNode;
  Column: TColumnIndex; TextType: TVSTTextType; var CellText: String);
var d:PNodeData;
begin
 d:=Sender.GetNodeData(Node);

 case Column of
  0:CellText:=d^.Text;
  1:CellText:=d^.Size;
 end;
end;

procedure TForm1.theTreeGetImageIndex(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Kind: TVTImageKind; Column: TColumnIndex;
  var Ghosted: Boolean; var ImageIndex: Integer);

var d:PNodeData;
begin
d:=Sender.GetNodeData(Node);

if(Kind in [ikNormal, ikSelected])then
begin
 if(Column=0)then ImageIndex:=d^.ImageIndex;
end;

end; 
```

* * *

我现在真的很沮丧..我不知道为什么节点没有正确创建..虽然我测试了记录数据并且它们创建得很好但是当我测试**onNodeClick**事件时我发现节点指向的数据记录仅返回第一个字段。而其他字段要么为空，要么生成**访问冲突异常**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:02:16.820

您发布的代码太多，无法提出有用的问题。每天都会发布数百个没有代码示例或代码示例不足的问题。你走了另一条路，真的走得很远。

“填充”虚拟树视图的最佳方法是不填充它。相反，您只需要设置`rootNodeCount`然后迭代地设置子节点的子节点计数。对于折叠节点，树视图知道有子节点或没有子节点就足够了。展开子节点后，您可以填充子元素。

请注意，当您按照虚拟控件的预期方式进行操作时，您不会编写大量代码。相反，您只是“回答有关模型对象的基础状态的问题”。有多少根节点？你告诉虚拟树那个数字。然后从那里，您只需在它问您时回答问题。对于根节点下的节点 #3，第 0 列的文本是什么？（它调用您处理的事件，然后您返回该信息）。请注意，初始化 DATA 是大多数 VirtualTreeViews 新手经常误解的事情。理想情况下，DATA 应该包含一个指向真实模型对象的指针，该对象可以回答 VirtualTreeView 提出的问题。回答这些问题的最有效的类甚至可能不需要为树中的每个可见节点实例化一个真实的模型对象，尽管这当然是可以接受和常见的。重要的是，您要了解它并不是严格意义上的 ESSENTIAL。

其次，如果您的目标是使用 TVirtualTreeView 来模拟 shell 资源管理器，那么该代码已经为您完成，请查看VirtualTreeview 网站上的**Advanced VT demo 的子部分。**请参阅我在此处指示的选项卡：

![在此处输入图像描述](https://i.stack.imgur.com/cgIwy.png)

# objective-c - 防止 ARC 在分配后立即将弱 ivar 归零（在发布版本中）

> ID：15769792
> 
> 赞同：6
> 
> 时间：2013-04-02T16:51:43.527
> 
> 标签：objective-c, automatic-ref-counting, weak-references

我有一个自动合成的`readonly`&`weak`属性：

```
@property (nonatomic, readonly, weak) KTWindowController* windowController; 
```

我分配合成的 ivar，然后将其添加到数组中：

```
_windowController = [KTWindowController controller];
[self addSubController:_windowController]; 
```

这在调试版本中运行良好。但我得到一份报告，在发布（临时）构建中，这将立即 nil `_windowController`，然后它尝试将 nil 添加到数组中，导致应用程序崩溃。

**与 Debug 构建相比，发布（临时）构建中的哪些特定设置（优化级别？）会改变此行为？**

奇怪的是，这种行为会从 Debug 版本变为 Release 版本。但是我能够重现这种行为，而且它实际上是有道理的——只是当它与调试版本中发生的事情不一致时就不行了。

建议的解决方法：

```
KTWindowController* windowController = [KTWindowController controller];
[self addSubController:windowController];
_windowController = windowController; 
```

**除了使用上面看到的局部变量之外，在这种情况下您会推荐什么解决方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:25:08.387

当您将属性声明为**weak**时，您承诺由其他对象负责所有权。这就是**弱**的意思。当你违反这一点时，就会发生不好的事情。因此，例如，当您编写时：

```
KTWindowController* windowController = [KTWindowController controller];
[self addSubController:windowController];
_windowController = windowController; 
```

您正在履行您的义务：强临时变量`windowController`在此方法中处理所有权，然后再`windowController subController`处理所有权。

当你写

```
 _windowController = [KTWindowController controller]; 
```

你没有做你承诺做的事情。_windowController 很弱，所以其他人正在管理生命周期。但看！没有人管理一生！因此，我们可以随时摆脱弱变量。优化器在你的发布版本中查看这个并说，

> 嘿！这家伙说他不在乎这个窗口控制器是死是活，只要其他人不在乎。有些人！但这不关我的事。但是看这个：既然他不在乎，那我根本就不用做！或者，无论如何，我可以在我成功的那一刻摆脱它。

编译器只是按照您所说的去做。

您确定要将此属性设为弱属性吗？每当我在我的代码中看到这一点时，我都会检查该属性是否真的应该是弱的；通常，无论如何我都想要一个强大的财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:30:05.470

我发现将优化级别从更改`None (-O0)`为`Fast (-O, O1)`引入了这个问题。

[正如这里提到的](https://stackoverflow.com/questions/15118909/arc-weak-ivar-released-before-being-returned-when-building-for-release-not-de)，这种行为是可以预料的。它真的应该是一个编译器警告。

我最终通过将分配移动到一行来合并解决方法中的额外行，这同样有效：

```
// extra local var to prevent ARC from nil'ing the weak var right away in release
KTWindowController* windowController = _windowController = 
                                                 [KTWindowController controller];
[self addSubController:windowController]; 
```

# java - AngularJS抛出错误根路径

> ID：15769799
> 
> 赞同：1
> 
> 时间：2013-04-02T16:52:11.110
> 
> 标签：java, javascript, tomcat, twitter-bootstrap, angularjs

我很难找到为什么我的应用程序在一条路径上抛出错误而不是在另一条路径上。

我的 Angular 应用程序使用我的默认 servlet 在以下 URL 中运行良好。

```
http://localhost:8080/#/ 
```

web.xml

```
<servlet-mapping>
    <servlet-name>cr</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我希望通过以下 servlet 映射，我应该能够使用以下 url 访问另一个应用程序。

```
http://localhost:8080/admin/ 
```

web.xml

```
<servlet>
    <servlet-name>admin</servlet-name>
    <jsp-file>/resources/admin/index.jsp</jsp-file>
</servlet>

<servlet-mapping>
    <servlet-name>admin</servlet-name>
    <url-pattern>/admin/*</url-pattern>
</servlet-mapping> 
```

但是，它会不断抛出以下错误，直到我在我的 chrome 调试器中暂停页面。

```
SyntaxError: Unexpected token < 
```

但是，如果我转到以下 URL，则管理应用程序会起作用。

```
http://localhost:8080/admin#/ 
```

供参考的是我的 app.js

```
'use strict';
var AdminApp = angular.module('AdminApp', ['AdminApp.services'])
    .config(['$routeProvider', function ($routeProvider) {
// default route
        $routeProvider.when('/', {templateUrl: 'resources/admin/views/dashboard.jsp', controller: 'DashboardCtrl'}).otherwise({redirectTo: '/'});

    }]); 
```

main.js

```
//Dashboard Controller
AdminApp.controller('DashboardCtrl', function ($scope) {

}); 
```

服务.js

```
var service = angular.module("AdminApp.services", ['ngResource']); 
```

注意：我知道应用程序、主程序和服务实际上并没有做任何事情，我只是想在开始使用有效数据扩展它之前让 shell 工作。

这是我启动一切的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:45:46.677

在我将 web.xml 更改为以下之后，它按预期运行。我仍然不知道为什么它会抛出错误。

```
<servlet>
    <servlet-name>admin</servlet-name>
    <jsp-file>/resources/admin/index.jsp</jsp-file>
</servlet>

<servlet-mapping>
    <servlet-name>admin</servlet-name>
    <url-pattern>/admin/</url-pattern>
</servlet-mapping> 
```

# iphone - CoreText 通过 DTCoreText 编译错误

> ID：15769802
> 
> 赞同：0
> 
> 时间：2013-04-02T16:52:26.943
> 
> 标签：iphone, ios, core-text

在我第一次使用 CocoaPods 时，我遇到了一个问题。我在现有项目上使用 CocoaPods 专门为 DTAttributedLabel 安装 DTCoreText。一切顺利，似乎工作正常，但第二个我包含 DTCoreText.h 我在 CoreText 框架中遇到多个错误，如下所示：

```
CoreText.framework/Headers/CTRunDelegate.h:130:16: Expected member name or ';' after declaration specifiers

 typedef struct
 {
     CFIndex                            version;
     CTRunDelegateDeallocateCallback    dealloc;
     CTRunDelegateGetAscentCallback getAscent;
     CTRunDelegateGetDescentCallback    getDescent;
     CTRunDelegateGetWidthCallback  getWidth;
 } CTRunDelegateCallbacks;

CoreText.framework/Headers/SFNTLayoutTypes.h:821:23: Expected member name or ';' after declaration specifiers

struct LcarCaretTable {
   Fixed               version;
   UInt16              format;
   SFNTLookupTable     lookup;
 }; 
```

我创建了一个单一视图项目只是为了检查我的安装技术，并且能够很好地使用 DTCoreText。

*   是否有我缺少的设置可能导致这种情况？（部署目标：6.1，SDK 6.1）
*   也许与现有图书馆发生冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:24:06.737

我通过创建一个新项目并通过 Cocoapods 安装所有依赖项解决了这个问题。该问题似乎与冲突有关。

# apache-flex - Flash Builder 4.6 - MultiDPIBitmapSource 问题

> ID：15769803
> 
> 赞同：0
> 
> 时间：2013-04-02T16:52:30.267
> 
> 标签：apache-flex, flash-builder

我是 flash builder 的新手，并且一直在寻找几个小时都没有运气，任何人都可以解释为什么这不起作用，当使用

不会工作。

```
<s:BitmapImage id="pgImage" left="0" top="3"> 
    <s:source.normal>
        <s:MultiDPIBitmapSource source160dpi="@Embed('assets160/{largeimage}')"
                                source240dpi="@Embed('assets240/{largeimage}')"
                                source320dpi="@Embed('assets320/{largeimage}')"/>
    </s:source.normal>
</s:BitmapImage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:07:58.587

AFAIK 你不能使用绑定变量嵌入资产。原因是编译器在编译时无法知道 {largeimage} 中的内容，因为此信息仅在运行时可用。

因此，请尝试删除 @Embed 标记...

# soap - Axis2 WebService 客户端：给定的 SOAPAction 与操作不匹配

> ID：15769806
> 
> 赞同：1
> 
> 时间：2013-04-02T16:52:37.050
> 
> 标签：soap, axis2, webservice-client

我有一个使用 CXF 在我的计算机上运行的测试 web 服务，我一直在尝试使用 Apache Axis2 的“wsdl2java”功能来制作客户端。我已经生成了代码，但出现以下错误：

```
org.apache.axis2.AxisFault: The given SOAPAction http://service.taller1.webservices.spring.com/HolaMundoService/saludaHola does not match an operation.
at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at com.spring.webservices.taller1.service.impl.HolaMundoServiceImplServiceStub.saludaHola(HolaMundoServiceImplServiceStub.java:182)
at mian.Main.main(Main.java:27) 
```

这里是wsdl：

```
<?xml version='1.0' encoding='UTF-8'?><wsdl:definitions xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://impl.service.taller1.webservices.spring.com/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:ns2="http://schemas.xmlsoap.org/soap/http" xmlns:ns1="http://service.taller1.webservices.spring.com/" name="HolaMundoServiceImplService" targetNamespace="http://impl.service.taller1.webservices.spring.com/">
  <wsdl:import location="http://localhost:8080/webservice-cfx-spring-0.0.1-SNAPSHOT/HolaMundoService?wsdl=HolaMundoService.wsdl" namespace="http://service.taller1.webservices.spring.com/">
    </wsdl:import>
  <wsdl:binding name="HolaMundoServiceImplServiceSoapBinding" type="ns1:HolaMundoService">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="saludaHola">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="saludaHola">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="saludaHolaResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="HolaMundoServiceImplService">
    <wsdl:port binding="tns:HolaMundoServiceImplServiceSoapBinding" name="HolaMundoServiceImplPort">
      <soap:address location="http://localhost:8080/webservice-cfx-spring-0.0.1-SNAPSHOT/HolaMundoService"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

我将不胜感激任何帮助。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-11T15:37:06.573

您可能使用了错误的操作或错误的模式绑定。

以下内容可能对您有用：

```
 ServiceClient client = new ServiceClient();
    OperationClient operationClient = client.createClient(ServiceClient.ANON_OUT_IN_OP);

    // creating message context
    MessageContext outMsgCtx = new MessageContext();
    // assigning message context’s option object into instance variable
    Options opts = outMsgCtx.getOptions();
    // setting properties into option
    opts.setTo(new EndpointReference("http://localhost:8080/webservice-cfx-spring-0.0.1-SNAPSHOT/HolaMundoService"));
    opts.setAction(""); //your soap action is null
    HttpTransportProperties.Authenticator auth = new HttpTransportProperties.Authenticator();
    auth.setUsername("user");
    auth.setPassword("pass");
    opts.setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, auth);
    //Create the Soap Factory
    SOAPFactory fac = OMAbstractFactory.getSOAP11Factory();
    //Create the request envelope
    SOAPEnvelope envelope = fac.getDefaultEnvelope();
    OMNamespace globalNs = fac.createOMNamespace("http://service.taller1.webservices.spring.com/", "ns1");
    // creating the payload
    OMElement method = fac.createOMElement("saludaHola", globalNs);
    method.setText("Hello");
    envelope.getBody().addChild(method);
    outMsgCtx.setEnvelope(envelope);
    operationClient.addMessageContext(outMsgCtx);
    operationClient.execute(true);
    MessageContext inMsgtCtx = operationClient.getMessageContext("In");
    //get the response
    SOAPEnvelope response = inMsgtCtx.getEnvelope();
    System.out.println(response); 
```

# max - PL SQL - 加入 2 个表并从右表返回最大值

> ID：15769809
> 
> 赞同：0
> 
> 时间：2013-04-02T16:52:43.240
> 
> 标签：max

试图检索右表中的 MAX 文档。

```
SELECT   F43.PDDOCO, 
     F43.PDSFXO, 
     F43.PDLNID,
     F43.PDAREC/100 As Received, 
     F431.PRAREC/100,
     max(F431.PRDOC)

FROM     PRODDTA.F43121 F431
     LEFT OUTER JOIN PRODDTA.F4311 F43
      ON 
          F43.PDKCOO=F431.PRKCOO 
      AND F43.PDDOCO=F431.PRDOCO 
      AND F43.PDDCTO=F431.PRDCTO 
      AND F43.PDSFXO=F431.PRSFXO 
      AND F43.PDLNID=F431.PRLNID 
WHERE   F431.PRDOCO = 401531
and     F431.PRMATC = 2
and     F43.PDLNTY = 'DC'

Group by 

     F43.PDDOCO, 
     F43.PDSFXO, 
     F43.PDLNID,
     F43.PDAREC, 
     F431.PRAREC/100 
```

此查询仍返回右表中的两行。对 SQL 来说相当新，并且在语句中挣扎。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:18:27.780

如果没有看到您的数据，很难判断问题可能出在哪里，因此我将提供一些可能有所帮助的建议。

首先，您正在加入 a `LEFT JOIN`on the`PRODDTA.F4311`但您在`WHERE`子句中有该表的过滤器。您应该将 移动`F43.PDLNTY = 'DC'`到 JOIN 条件。这导致查询像`INNER JOIN`.

其次，您可以尝试使用子查询来获取`MAX(PRDOC)`值。然后，您可以限制要分组的列，以消除重复项。查询将类似于以下内容：

```
SELECT F43.PDDOCO, 
  F43.PDSFXO, 
  F43.PDLNID,
  F43.PDAREC/100 As Received, 
  F431.PRAREC/100,
  F431.PRDOC
FROM PRODDTA.F43121 F431
INNER JOIN
(
  -- subquery to get the max
  -- then group by the distinct columns
  SELECT PDKCOO, max(PRDOC) MaxPRDOC
  FROM PRODDTA.F43121
  WHERE PRDOCO = 401531
    and PRMATC = 2
  GROUP BY PDKCOO
) f2
  -- join the subquery result back to the PRODDTA.F43121 table
  on F431.PRDOC = f2.MaxPRDOC
  AND F431.PDKCOO = f2.PDKCOO
LEFT OUTER JOIN PRODDTA.F4311 F43
  ON F43.PDKCOO=F431.PRKCOO 
  AND F43.PDDOCO=F431.PRDOCO 
  AND F43.PDDCTO=F431.PRDCTO 
  AND F43.PDSFXO=F431.PRSFXO 
  AND F43.PDLNID=F431.PRLNID 
  AND F43.PDLNTY = 'DC'  -- move this filter to the join instead of the WHERE
WHERE F431.PRDOCO = 401531
  and F431.PRMATC = 2 
```

如果您提供表结构和一些示例数据，将更容易确定问题。

# css - 使用单个 url 的多个背景

> ID：15769813
> 
> 赞同：0
> 
> 时间：2013-04-02T16:52:52.180
> 
> 标签：css, background

嘿，这是我在背景中使用 2 张图片的代码，但是是否可以对使用 2 张图片的两张图片使用一个 url。

`body { background-image: url(images/bgtop.png), url(images/bg.png); background-repeat: repeat-x, repeat; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:12:55.217

当然，但它会在 Photoshop 中涉及比实际 css 更多的图像处理。

您必须将背景变成某种精灵，这意味着您必须将背景合并为一张图像。然后使用多个不同的背景位置来显示图像的不同部分。

精灵示例：[http ://www.w3schools.com/css/css_image_sprites.asp#gsc.tab=0](http://www.w3schools.com/css/css_image_sprites.asp#gsc.tab=0)

多个背景的示例，使用不同的背景位置：[http](http://www.css3.info/preview/multiple-backgrounds/) ://www.css3.info/preview/multiple-backgrounds/请注意，此示例有两个单独的图像，因此有两个单独的 URL。您需要将不同背景位置的使用与精灵的使用结合起来。

# php - Internet Explorer 中的表单总是发布

> ID：15769816
> 
> 赞同：1
> 
> 时间：2013-04-02T16:52:54.210
> 
> 标签：php, javascript, mysql, internet-explorer, post

我想知道为什么`Internet Explorer`（任何版本）总是在`POST`不调用 right 的情况下给出`function` `onSubmit`。仅当我`refresh`页面时才有效

表单的内容`PHP/MySQL`在这里动态生成：

```
<form id="formQtd" name="formQtd" onSubmit="return validaQtd();" method="post">
        <p class="cab">Por favor informe a quantidade de Ovos de P&aacute;scoa em estoque em sua loja neste momento:</p>
        <div id="produtos">
            <?
                if ($linhas2 == 0)
                    echo "<p style='margin-left: 15px'>A pesquisa foi cancelada pelo administrador</p>";
                else {
                    if ($linhas == 0)
                        echo "<p style='margin-left: 15px'>Nenhum ovo de p&aacute;scoa cadastrado</p>";
                    else {
                        while ($row = mysql_fetch_array($result)) {
                            $texto = "<div id='thumb'>
                            ";
                                $texto .= "<img width='100' height='100' src='img_pan/".$row["imagem"]."' />
                                ";
                                $texto .= "<p id='pNome'>".utf8_encode($row["nome"])."</p>
                                ";
                                $texto .= " <input type='text' value='' class='inputQtd num' name='".$row["id"]."_prod' id='qtd$row[id]' placeholder='Quant.' /> 
                                ";
                                $texto .= "</div>";
                                echo $texto;
                        }?>
        </div>
        <input type="submit" name="submit" id="submitQtd" value="Enviar" style="width:70px;height:25px;clear:both;float:right;border:1px solid #873305; background-color:#300300; color:white; margin:5px 0px 20px 0px" />
    </form>  
    <?
                            }
                }
    ?> 
```

我的`function`验证：

```
function validaQtd() { 
  var inp = document.forms[0].getElementsByTagName('input');
  console.log(inp.length);
  for (var i = 0; i < inp.length; i++){
    if(inp[i].type == "text"){
        if(inp[i].value == ""){
            console.log(inp[i].value+" - "+inp[i].id);
            alert('Preencha as quantidades em branco');
            inp[i].focus();
            return false;
        }
    }
  }
} 
```

我的`POST`：

```
if ($_POST) {

    $time = microtime(true);
    $micro_time = sprintf("%06d",($time - floor($time)) * 1000000);
    $date = new DateTime( date('Y-m-d H:i:s.'.$micro_time,$time) );
    $dt = $date->format("Y-m-d H:i:s.u");
    $dtAtual = substr($dt, 0, -3);

    $upload = 0;                
    foreach ( $_POST as $nome => $valor ) {
        if($nome != "submit" && $valor != "") {
            $upload = 1;
            //separando o codigo do nome
            $prov = explode("_", $nome);
            $cdProd = str_replace("_","",$prov[0]); 

            //inserindo no banco    
            $queryIns = "INSERT INTO registro_ovos2013 (idusuario, idproduto, quantidade, data) VALUES ('".$cdUsu."', ".$cdProd.", ".$valor.", '".$dtAtual."')";
            $resultIns = mysql_query($queryIns);
        }   
    }
    if ($upload == 1) {
        ?>
        <script>
            alert("Quantidade cadastrada!");                        
            window.location = "?codigo=<?=$cdUsu;?>";
        </script>
        <?
    } 
    else {
        ?>
        <script>
            alert("Preencha os campos em branco");                      
            window.location = "?codigo=<?=$cdUsu;?>";
        </script>
        <?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:59:04.783

你的意思是你的步骤是这样的：

*   加载页面。
*   输入有效数据。
*   提交（函数被调用）
*   重新加载（已处理 POST，未调用验证函数）

如果是，那是很正常的。页面加载了一些 POST 请求并重新加载它会导致再次请求。并且不涉及任何javascript。

这就是为什么您也总是需要在服务器端验证数据。紧接着`if ($_POST) {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:25:52.577

如果您的页面被解析为 XML（作为 XHTML），您应该使用`onsubmit`作为属性的名称（而不是`onSubmit`）。XML 区分大小写。

# php - 条件语句中带有行距的 PHP 变量

> ID：15769824
> 
> 赞同：2
> 
> 时间：2013-04-02T16:53:31.363
> 
> 标签：php, variables, conditional-statements

***注意我发现问题是尝试在用于“发件人”标头值 (** *duh* ) 的电子邮件变量中输入空格/换行符。这当然行不通。因此，我将值附加到消息正文中。请参阅下面的正确代码。

```
<?php

$send_to = "[MY@EMAIL.COM]";
$send_subject = "contact form from website";

$f_name = cleanupentries($_POST["namn"]);
$f_message = cleanupentries($_POST["meddelande"]);
$from_ip = $_SERVER['REMOTE_ADDR'];
$from_browser = $_SERVER['HTTP_USER_AGENT'];

function cleanupentries($entry) {
    $entry = trim($entry);
    $entry = stripslashes($entry);
    $entry = htmlspecialchars($entry);

    return $entry;
}

$message = $f_message . "\n\n" . $f_name . "can be reached on:\n";

if(($_POST["epost"]) == "epost" || ($_POST["epost"]) == ""){
    $f_email =  $send_to;
    $f_email_check = "";

    }else{
    $f_email_check = cleanupentries($_POST["epost"]);
    $f_email = $f_email_check;
    $message .= $f_email_check;
    $message .= "\n";
}

if(($_POST["telefon"]) == "telefon" || ($_POST["telefon"]) == ""){
    $f_phone_check = "";

    }else{
    $f_phone_check = cleanupentries($_POST["telefon"]);
    $message .= $f_phone_check;
    $message .= "\n";
}

$message .= "\nTechnical info:\n" . $from_ip . "," . $from_browser;

$headers = "From: " . $f_email . "\r\n" .
    "Reply-To: " . $f_email . "\r\n" .
    "X-Mailer: PHP/" . phpversion();

if (!$f_email) {
    echo '<p>No email.</p><br /><p>< <a style="text-decoration: none; color: blue;" href="/" target="_self">Pleas try again</a></p>';
    exit;
}else if (!$f_name){
    echo '<p>No name.</p><br /><p>< <a style="text-decoration: none; color: blue;" href="/" target="_self">Pleas try again</a></p>';
    exit;
}else{
    if (filter_var($f_email, FILTER_VALIDATE_EMAIL)) {
        mail($send_to, $send_subject, $message, $headers);
        echo "true";
    }else{
        echo '<p>Invalid email.</p><br /><p>< <a style="text-decoration: none; color: blue;" href="/" target="_self">Pleas try again</a></p>';
        exit;
    }
}
?> 
```

**-------------- 原帖 --------------**

我一直在尝试来回让它发挥作用，但无论我做什么，我都无法让它发挥作用。我在这里做错了什么（见下面的代码）？

如果 else 为真，我想要做的是添加一个行空间 (\n)，否则它不应该显示任何内容。什么都不显示的部分工作得很好，它添加了一个我无法工作的行空间。如果我添加`$f_email_check .= "\n";`电子邮件不会发送。

我也试过`$f_email_check = cleanupentries($_POST["epost"]."\n");`同样的问题。

和同样的事情`$f_email_check = cleanupentries($_POST["epost"])."\n";`。

如果我完全删除邮件发送的 \n 部分就好了。但是，由于电子邮件和电话（位于电子邮件之后）位于同一行，并且消息正文中没有空格，因此电子邮件和电话将成为一个长字符串。我知道我可以在邮件正文中输入一个 \n 或空格，但是即使邮件正文中的电子邮件为空，也会有一个行空格。

我想要实现的是，如果没有提供电子邮件，则不提供任何内容（关于电子邮件），如果同时提供电话和电子邮件，则将电子邮件放在一行然后在下一行显示电话...

这是我正在使用的完整代码

```
<?php

$send_to = "[MY@EMAIL.COM]";
$send_subject = "webpage contactform";

$f_name = cleanupentries($_POST["namn"]);

if(($_POST["epost"]) == "epost" || ($_POST["epost"]) == ""){
    $f_email =  $send_to;
    $f_email_check = "";

    }else{
    $f_email_check = cleanupentries($_POST["epost"]."\n");
    $f_email_check .= "";
    $f_email = $f_email_check;
}

if(($_POST["telefon"]) == "telefon" || ($_POST["telefon"]) == ""){
    $f_phone_check = "";

    }else{
    $f_phone_check = cleanupentries($_POST["telefon"]);
}

$f_message = cleanupentries($_POST["meddelande"]);
$from_ip = $_SERVER['REMOTE_ADDR'];
$from_browser = $_SERVER['HTTP_USER_AGENT'];

function cleanupentries($entry) {
    $entry = trim($entry);
    $entry = stripslashes($entry);
    $entry = htmlspecialchars($entry);

    return $entry;
}

$message = $f_message . "\n\n" . $f_name . "can be reached on\n" . $f_email_check . "" . $f_phone_check . "\n\nTechnical info:\n" . $from_ip . "," . $from_browser;

$headers = "From: " . $f_email . "\r\n" .
    "Reply-To: " . $f_email . "\r\n" .
    "X-Mailer: PHP/" . phpversion();

if (!$f_email) {
    echo '<p>No email.</p><br /><p>< <a style="text-decoration: none; color: blue;" href="/" target="_self">Please try again</a></p>';
    exit;
}else if (!$f_name){
    echo '<p>No name.</p><br /><p>< <a style="text-decoration: none; color: blue;" href="/" target="_self">Please try again</a></p>';
    exit;
}else{
    if (filter_var($f_email, FILTER_VALIDATE_EMAIL)) {
        mail($send_to, $send_subject, $message, $headers);
        echo "true";
    }else{
        echo '<p>Invalid email.</p><br /><p>< <a style="text-decoration: none; color: blue;" href="/" target="_self">Please try again</a></p>';
        exit;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:55:43.893

您似乎正在发送 HTML 格式的电子邮件。HTML 忽略空格。

用于`<br>`获取换行符。您也可以`nl2br()`输入您的`cleanupentries`功能，但这可能不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:14:06.567

使用 FILTER_VALIDATE_EMAIL 阅读 filter_var 的手册（注释）并不是最好的选择（[http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)）。

代替：

```
if (filter_var($f_email, FILTER_VALIDATE_EMAIL)) {
    mail($send_to, $send_subject, $message, $headers);
    echo "true";
}else{
    echo '<p>Invalid email.</p><br /><p>< <a style="text-decoration: none; color: blue;" href="/" target="_self">Please try again</a></p>';
    exit;
} 
```

我会尝试类似的东西：

```
try {
    mail($send_to, $send_subject, $message, $headers);
}
catch (Exception $e) {
    throw new Exception($e->__toString();
} 
```

或者

```
$mail =   mail($send_to, $send_subject, $message, $headers);

//check result of $mail.
//... 
```

# sql - sql批量插入带引号的逗号分隔值

> ID：15769828
> 
> 赞同：0
> 
> 时间：2013-04-02T16:53:39.640
> 
> 标签：sql, sql-server-2008

我有以下带有引号的逗号分隔文件的 txt 文件

```
"col1","Col2","col3","col4","col4","col5","col6","col7"
"text for col1","123 NW St, Suite 23",,,"12345","AZ" 
```

我对此没有任何问题，除非有时街道地址中有一个逗号，然后批量插入认为它是一个新列。然后使用空记录/值没有引号。我已经看到了一些使用 with 格式文件的示例。我将如何为这种类型的文件使用格式文件？

```
bulk insert #temptbl
from 'C:\test\Test.txt' 
with (FORMATFILE='C:\test\formattest.txt',rowterminator='\n') 
```

我还想补充一点，那些有值的空字段，它们有引号。

# r - 通过 not head(key(DT),m) 对 data.table 进行子集，使用二进制搜索而不是矢量扫描

> ID：15769837
> 
> 赞同：7
> 
> 时间：2013-04-02T16:54:22.497
> 
> 标签：r, data.table

如果我将 n 列指定为 a 的键`data.table`，我知道只要加入 of ，我就可以加入比该键中定义的更少的`head`列`key(DT)`。例如，对于 n=2 ：

```
X = data.table(A=rep(1:5, each=2), B=rep(1:2, each=5), key=c('A','B'))
X
    A B
 1: 1 1
 2: 1 1
 3: 2 1
 4: 2 1
 5: 3 1
 6: 3 2
 7: 4 2
 8: 4 2
 9: 5 2
10: 5 2

X[J(3)]
   A B
1: 3 1
2: 3 2 
```

在那里，我只加入了 2 列键的第一列`DT`。我知道我可以像这样加入键的两列：

```
X[J(3,1)]
   A B
1: 3 1 
```

但是我如何仅使用键的第二列（例如`B==2`）进行子集化，但仍然使用二进制搜索而不是矢量扫描？我知道这是重复的：

[仅通过 2 列键的第 2 列对 data.table 进行子集，使用二进制搜索而不是矢量扫描](https://stackoverflow.com/questions/15597685/data-table-and-binary-search)

所以我想把这个问题概括为`n`. 我的数据集有大约一百万行，上面链接的 dup 问题中提供的解决方案似乎不是最佳的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T04:47:54.120

Here is a simple function that will extract the correct unique values and return a data table to use as a key.

```
 X <- data.table(A=rep(1:5, each=4), B=rep(1:4, each=5), 
                  C = letters[1:20], key=c('A','B','C'))
 make.key <- function(ddd, what){
  # the names of the key columns
  zzz <- key(ddd)
  # the key columns you wish to keep all unique values
  whichUnique <- setdiff(zzz, names(what))
  ## unique data.table (when keyed); .. means "look up one level"
  ud <-  lapply([, ..whichUnique], unique)
  ## append the `what` columns and  a Cross Join of the new
  ## key columns
  do.call(CJ, c(ud,what)[zzz])
}   

X[make.key(X, what = list(C = c('a','b'))),nomatch=0]
## A B C
## 1: 1 1 a
## 2: 1 1 b 
```

I'm not sure this will be any quicker than a couple of vector scans on a large data.table though.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:49:55.497

添加辅助键在功能请求列表中：

[FR#1007 内置辅助键](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=1007&group_id=240&atid=978)

与此同时，我们陷入了向量扫描，或者问题中链接的 n=2 案例的答案中使用的方法（@mnel 在他的回答中很好地概括了这一点）。

# jstree - 最初关闭的树 [JsTree]

> ID：15769839
> 
> 赞同：1
> 
> 时间：2013-04-02T16:54:29.263
> 
> 标签：jstree

所以我正在使用 JsTree 插件，我希望最初关闭所有树。我不知道为什么我最初打开它。顺便说一句，我正在通过 Jquery（附加）动态创建叶子。提前致谢。

我的代码曾经是这样的：

```
<div id="demo2" class="demo">
<ul>
<li class="jstree-open"><a href="#">Root node 1</a>
    <ul>
        <li id="One"><a href="#">Child node 1</a></li>
        <li><a href="#">Child node 2</a></li>
        <li><a href="#">ADV_SEARCH</a></li>
        <li><a href="#">Child node 4</a></li>
    </ul>
</li>
<li><a href="#">Root node 2</a></li>
</ul>
</div> 
```

所以我只是更改`<li class="jstree-open">`为`<li class="jstree-closed">`有孩子的节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:36:02.860

好吧，因为我不太了解这个插件，所以我在 li 标签中使用了 class="jstree-open" 并且我不知道它是什么意思，所以出于好奇，我将其关闭而不是打开，我得到了我想要的通缉。然后我偶然发现这个类真的存在。无论如何，正如我在不同的帖子中所说，JsTree 确实需要更多文档，因为我发现它是一个很棒的插件。

# c# - Selenium 和 TFBuild - 页面似乎永远不会加载

> ID：15769843
> 
> 赞同：1
> 
> 时间：2013-04-02T16:54:55.777
> 
> 标签：c#, selenium, tfs, automated-tests, selenium-webdriver

我使用 Selenium 和 webdriver 为 MVC 应用程序编写了许多测试。这些在我的开发机器上工作没有问题。我们正在使用 PageFactory 设计。目前，我在页面加载时有 3 秒的显式等待（尽管我已经测试了长达 10 秒没有变化）。

下面是一个比较简单的测试：

## 考试

```
 [TestMethod]
    public void Can_Log_In_With_Valid_Credential()
    {
        Pages.LoginPage.Goto();
        var success = Pages.LoginPage.Login(Properties.Settings.Default.UserName,
                                            Properties.Settings.Default.Password);
        Assert.IsTrue(success);
        Pages.HeaderPage.LogOut();
    } 
```

## 页面及相关逻辑

```
public static class Pages
{
    public static LoginPage LoginPage
    {
        get
        {
            var loginPage = new LoginPage();
            PageFactory.InitElements(Browser.Driver, loginPage);
            return loginPage;
        }
    }
}

public class LoginPage : Page
{
    public static string Url = Properties.Settings.Default.DomainAddress + "/Account/Logon";
    public static string PageTitle = "Log On";

    [FindsBy(How = How.Id, Using = "UserName")]
    private IWebElement _userNameBox;

    [FindsBy(How = How.Id, Using = "Password")]
    private IWebElement _passwordBox;

    [FindsBy(How = How.ClassName, Using = "validation-summary-errors")] 
    private IWebElement _validationErrors;

    [FindsBy(How = How.CssSelector, Using = "div#LoginSubmit.signin input")]
    private IWebElement _submitButton;

    public void Goto()
    {
        Browser.Goto(Url);

    }

    public bool IsAt()
    {
        return Browser.Title == PageTitle;
    }

    public bool Login(string username, string password)
    {
        try
        {
            _userNameBox.SendKeys(username);
        }
        catch (Exception)
        {
            _userNameBox = ((IWebDriver) Browser.Driver).FindElement(By.Id("UserName"), 10);
            _userNameBox.SendKeys(username);
        }
        _passwordBox.SendKeys(password);
        _submitButton.Click();

        return Browser.CurrentUrl != Properties.Settings.Default.DomainAddress + "/Account/Logon";
    }
} 
```

问题出现在构建服务器上。所有测试均失败，原因如下：

> 类初始化方法 KepsPortalMvc.UserAccountManagementTests.Initialize 抛出异常。OpenQA.Selenium.WebDriverTimeoutException: OpenQA.Selenium.WebDriverTimeoutException: 10 秒后超时---> OpenQA.Selenium.NoSuchElementException: 无法定位元素：{"method":"id","selector":"UserName"}。

似乎 Firefox 甚至没有加载该页面。我已经（通过任务管理器）验证了 Webdriver 和 Firefox 都由 BuildServiceAccount 启动，但是我还没有找到监视网络活动的方法（Fiddler 没有向我显示与该 Firefox 实例相关的任何 HTTP 流量）非常少）。

有没有办法让我监控 WebDriver-Firefox？它不会弹出，因为它作为不同的帐户运行（我假设这就是原因）。

任何帮助将不胜感激。

# 澄清

这适用于我的开发机器，但不适用于 Team Foundation Build 服务器。我们在单个服务器上运行 Team Foundation。TFBuild 服务帐户是当前运行 Webdriver 和 Firefox 的帐户。Firefox 的进程条目在运行时会出现在任务管理器中，就像 WebDriver 的条目一样。Firefox 的窗口没有。Fiddler 没有向我显示该 Firefox 实例的任何流量（但我不确定这是否是因为根本没有加载任何内容，或者它只是没有显示在另一个用户会话中加载的流量）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:10:58.197

这里有一个有根据的猜测，但可能是您的测试环境没有为 UI 测试设置。看看MSDN 上的[这篇](http://msdn.microsoft.com/en-us/library/ee291332.aspx)文章，看看应该怎么做。

其次，根据我的经验，如果构建代理运行不同版本的 msbuild，则可能会发生这种行为。确保它们相同。例如，使用 VS 2010 和 VS 2012 构建将使用不同的程序集，从而在运行时引发不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:41:49.513

```
OpenQA.Selenium.NoSuchElementException 
```

我认为这个错误表明没有元素是 fpund。可能是因为FF在当前窗口失去焦点？你开了几扇窗？或者可能在打开 URL 后添加睡眠或隐式等待直到元素 isVisible ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:13:15.737

如果我理解正确，您可以使用 Selenium 在本地开发机器上运行 UI 测试，并希望它们在没有 TFS 构建机器的情况下运行。

这在默认情况下不起作用，因为构建过程是一个没有 UI 的服务，并且当它在 TFS 构建服务“会话”中运行时，您将无法看到它。因此，您需要设置 TFS 构建以作为交互式进程运行 ( [http://msdn.microsoft.com/en-us/library/hh691189.aspx#agent_test](http://msdn.microsoft.com/en-us/library/hh691189.aspx#agent_test) )，但这意味着服务器始终被阻止。如果它是某处的硬件机器，则可以打开监视器并将其与构建凭据一起使用，因为它没有被锁定。

我做了一些与 MS Coded UI Tests 类似的事情，并查看它是否正常工作，我使用我的帐户作为构建帐户，因此我可以打开到服务器的 RDP 会话，这与构建相同。所以我可以看到测试期间发生了什么，但关闭 RDP 最终导致测试失败。这就是为什么我总是等待测试完成然后重新启动机器。

# qt - Qt 5：Debug\release 和 Release\debug 目录

> ID：15769848
> 
> 赞同：2
> 
> 时间：2013-04-02T16:55:09.000
> 
> 标签：qt, directory-structure, visual-studio-2010, project-structure

我将 Qt 5.0.1 与 Windows SDK 7.1 一起使用。如果我创建一个新应用程序，New app 向导的 Kits 页面会提供创建 Debug 和 Release 目录：

```
Debug:   C:\Projects\MyProject-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Debug
Release: C:\Projects\MyProject-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Release 
```

1）如果我在调试模式下编译应用程序，Qt Creator 会创建两个目录：

```
C:\Projects\MyProject-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Debug\debug
C:\Projects\MyProject-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Debug\release 
```

可执行文件将在前者中创建，`C:\...-Debug\debug`.

2）如果我在发布模式下编译应用程序，我会得到另一对目录：

```
C:\Projects\MyProject-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Release\debug
C:\Projects\MyProject-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Release\release 
```

在这种情况下，可执行文件将被放置在后者中，`C:\...-Release\release`.

这种嵌套目录结构背后的逻辑是什么？IDE 何时使用目录`C:\...-Debug\release`和`C:\...-Release\debug`？

**更新**

@phyatt 指出，在项目设置中关闭[阴影构建可以解决问题。](http://qt-project.org/doc/qtcreator-2.7/creator-glossary.html)调试和发布目录将在项目的源目录中生成：

```
C:\Projects\MyProject\debug
C:\Projects\MyProject\release 
```

不幸的是，这并不能回答上述问题。此外，现在项目设置页面显示警告：

> C:\Projects\MyProject 中存在不完整的构建，它将被覆盖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:22:41.193

如果您只使用单个编译器，我会进入 Projects 选项卡 > Build > General > Shadow Build，然后取消选中 Shadow Build。

这将简化配置和文件夹结构，并可能为您修复错误。

也许进去做一个干净的构建。

希望有帮助。

# c# - 如何使用 WinJS.xhr 将参数传递给 WCF REST 方法？

> ID：15769859
> 
> 赞同：0
> 
> 时间：2013-04-02T16:55:57.233
> 
> 标签：c#, wcf, rest, winjs

我正在尝试将参数传递给我的 WCF，它使用 REST 来传递数据。

我的方法的定义是：

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json)]
void newUserAndImageEntry(byte[] pArrayImage, string pContentType, string pUserName, string pFileName); 
```

我正在尝试的是：

```
WinJS.xhr({ url: "http://localhost:9814/Student.svc/newUserAndImageEntry" })
    .then(function (r ) {
        DO WHAT?;
    }); 
```

但是不知道在函数中要做什么，或者我是否必须提前传递我的参数..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:52:19.023

您的操作将不起作用 - 因为您有多个参数，您需要将`BodyStyle`属性定义为`Wrapped`（或者`WrappedRequest`- 在您的场景中，由于操作没有返回值，所以没关系）：

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.WrappedRequest)]
void newUserAndImageEntry(byte[] pArrayImage, string pContentType,
    string pUserName, string pFileName); 
```

另一个问题是字节数​​组可能不是从 JavaScript 接收数据的好类型——它将作为一个效率不高的数字数组接收。在客户端上进行一些预处理 - 例如，将字节编码为 base64，将为您提供更小的有效负载

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.WrappedRequest)]
void newUserAndImageEntry(string pArrayImageAsBase64, string pContentType,
    string pUserName, string pFileName); 
```

现在对于客户端：您需要在`data`作为参数传递的对象的字段中传递参数。类似于下面的代码。查看[WinJS.xhr 文档](http://msdn.microsoft.com/en-us/library/windows/apps/br229787.aspx)以获取有关该调用的更多详细信息。

```
var arrayImage = getArrayImage();
var arrayImageBase64 = convertToBase64(arrayImage);
var contentType = 'image/jpeg';
var userName = 'johndoe';
var fileName = 'balls.jpg';
var data = {
    pArrayImageAsBase64: arrayImageBase64,
    pContentType: contentType,
    pUserName: userName,
    pFileName: fileName
};
var xhrOptions = {
    url: "http://localhost:9814/Student.svc/newUserAndImageEntry",
    headers: { "Content-Type": "application/json" },
    data: JSON.stringify(data)
};
WinJS.xhr(xhrOptions).done(
    function (req) {
        // Call completed, find more info on the parameter
    }, function (req) {
        // An error occurred, find more info on the parameter
    }); 
```

# python - 具有特定规则的组合数

> ID：15769860
> 
> 赞同：0
> 
> 时间：2013-04-02T16:55:57.177
> 
> 标签：python, combinatorics

我想找出以下问题的组合数量：

有4个部分。每个部分包含 12 个类别。每个类别又包含 3 种类型。A、B 和 C。对于每个部分，您必须选择 3 种类型。不能多次选择该类别，并且每个部分必须具有每种类型之一。结果可能如下所示：

```
S1
    C1 TA
    C2 TB
    C3 TC
S2
    C4 TA
    C5 TB
    C6 TC
S5
    C7 TA
    C8 TB
    C9 TC
S4
    C10 TA
    C11 TB
    C12 TC 
```

或者

```
S1
    C1 TC
    C2 TB
    C4 TA
S2
    C3 TB
    C5 TC
    C6 TA
S5
    C7 TC
    C10 TA
    C9 TB
S4
    C11 TC
    C8 TB
    C12 TA 
```

我已经达到了解决这个问题的能力的尽头。我已经尝试过循环，只是过滤掉了不好的结果，但我真的不能让它工作。我希望得到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:29:49.900

是否需要编写脚本来计算它？它可以纯粹以数学方式完成。诚然，我的组合学相当生疏，但我的想法是这个问题可以简化为

```
(3! * choose(12, 3)) * (3! * choose(9, 3)) * (3! * choose(6, 3)) * (3! * choose(3, 3)) 
```

这很好地简化了`12!`。您也可以轻松地将其概括为任意数量的类别、部分、每个类别的部分和类型。我只是不确定为什么你需要为此编写脚本，除非它是为了分配，在这种情况下，你应该真正发布你拥有的代码并解释你的思维过程和问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:31:15.303

一个简单的方法来打破这个逻辑可能是这样的：

您需要将*12 个类别*随机分为*4 个部分*。[random](http://docs.python.org/2/library/random.html)是一个很好的工具。

```
categories = range(1,13) # 1-based
# now you can use random.shuffle to shuffle it in place
import random
random.shuffle(categories) # now categories is shuffled.
# split the categories evenly between the 4 sections
sections = [categories[3*i:3*(i+1)] for i in range(4)] 
```

您现在需要将*3 种类型*随机分配到每个*部分*的*类别*中。

 *```
# lets make a function that returns a randomly ordered sequence of types 1,2,3
def rand_types():
    types = [1,2,3]
    random.shuffle(types)
    return types
# now we can use this for each assignment
final = []
for section in sections:
     final.append(zip(section, rand_types()))
# [[(8, 2), (5, 1), (10, 3)], 
#  [(6, 2), (7, 3), (2, 1)], 
#  [(4, 1), (12, 3), (1, 2)], 
#  [(11, 2), (3, 1), (9, 3)]] 
```

如果您不喜欢使用`zip`，您可以自己构建`(category, type)`元组：

```
for section in sections:
    final.append([])
    for i, t in enumerate(rand_types()):
        final[-1].append((section[i], t)) 
```*

# javascript - dust.js 包括不修剪的部分

> ID：15769861
> 
> 赞同：2
> 
> 时间：2013-04-02T16:55:57.250
> 
> 标签：javascript, node.js, dust.js

我正在使用dust.js 模板引擎。主模板包含一个部分模板，问题在于dust.js 修剪了包含模板文件的每一行。

例如，主模板是：

```
<h1>{header}</h1>
{>dust_cnt /} 
```

dust_cnt.dust 是：

```
<div>
  This is
  the content
</div> 
```

我通过以下方式呈现响应： res.render('dust_template.dust', {header: 'TEST OK'});

输出之间没有空格的`This is`问题`the content`。所以输出看起来像：

```
TEST OK

This isthe content 
```

**我不能通过放置 {~n}**或其他分隔符来更改所有内容，我认为没有任何理由这样做。

在[http://linkedin.github.com/dustjs/](http://linkedin.github.com/dustjs/)上，我发现了以下注释`GH- 166 - Added trimming of white spaces in dust templates configuration in the dust.compile ( default option is still true)`。但是找不到设置选项以避免修剪的方法？

我怎样才能让dust.js以我期望的方式呈现它（带空格）？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:43:01.137

好的，我找到了解决方案:)。在挖掘源代码 + 检查灰尘 GitHub 上的问题后，我决定使用以下内容来防止模板节点的格式化：

```
dust.optimizers.format = function(ctx, node) { return node }; 
```

（也在[https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#controlling-whitespace-suppression](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#controlling-whitespace-suppression)上）

默认行为是非常危险的——正如它在 GitHub 上提到的那样，它可能会导致严重的问题，例如：

```
<script>
//this will alert "test"
alert("this is test");
</script> 
```

将呈现为：

```
<script>//this will alert "test" alert("this is test");</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:43:57.027

这很奇怪，我知道您不想编辑模板文件。但是，您可以通过在行尾添加一个空格来以一种不那么难看的方式解决此问题：

```
<div>
  This is < add space here
  the content
</div> 
```

仅针对这种情况，您无法找到真正的解决方案。

# grails - Groovy：在静态范围内找到了表观变量 xyz，但不引用局部变量、静态字段或类。可能的原因：

> ID：15769863
> 
> 赞同：4
> 
> 时间：2013-04-02T16:56:04.020
> 
> 标签：grails, groovy, spring-tool-suite

我在所有域类的 Spring Tool Suite 中都收到了这个“错误”。它不是真正的错误，因为它编译得很好。但它掩盖了真正的编译错误，我该如何摆脱它？它们在同一个包中，所以我不需要导入，如果我添加导入它说它找不到类...

所以下面的代码产生一个红色的 x

> Groovy：在静态范围内找到了表观变量“ExampleB”，但不引用局部变量、静态字段或类。可能的原因：

```
package domain.com.so;

class ExampleA {
    static belongsTo  = [exampleB: ExampleB]
    static constraints = {
    }
} 
```

* * *

这段代码会产生一个简单的错误：

> Groovy：在静态范围内找到了表观变量“ExampleA”，但不引用局部变量、静态字段或类。可能的原因：

```
package domain.com.so;

class ExampleB {
    static hasMany  = [exampleAs: ExampleA]
    static constraints = {
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T18:11:00.447

通常，当 STS 抱怨这样的事情时，我会跑

```
grails clean 
```

和

```
grails compile --refresh-dependencies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T23:10:49.790

当我对静态成员进行更改并且在运行应用程序时启用了动态重新加载时，这种情况经常发生。我发现我必须删除项目并将其重新添加到工作区。这几乎就像项目的元数据在运行时发生错误时处于“卡住”状态。

# java - 是否可以从 xml 加载 java 类型

> ID：15769872
> 
> 赞同：0
> 
> 时间：2013-04-02T16:56:48.543
> 
> 标签：java, class, dynamic, loading

举个例子，从不同的角度来看……

例如，我在 xml 文件（几乎就像 hbm 文件）中定义类属性

```
<class name="my.package.Employee">
<prop name="ename" type="string"> <<legth of string in xml format>> </prop>
<prop name="dob" type="date"/> 
</class> 
```

在我的java代码中，我应该可以直接使用这个类。

```
import my.package;

method1(){
    Employee e = new Employee();
    e.name = "My Name";
    e.dob = "04/02/2000";
} 
```

我的实际问题是：**如何告诉 JVM 从不同格式加载/形成 java 类/类型，而不仅仅是从“.java”文件。**

——下面的东西只是对未来的一个想法。

今天我以 XML 格式解释它。可能是明天我写一个解释器来理解文本段落中的类定义。

*“每家公司都有很多员工。每个员工都有姓名和年龄。姓名最多使用50个字母，年龄将根据出生日期计算。”*

使用此文本，JVM 应加载 Company 类和 Employee 类。

公司类应该有一个列表/设置属性和相应的员工吸气剂。Employee类应该有姓名、dob属性和年龄，但是年龄是计算出来的。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:04:41.273

**如何告诉 JVM 从不同的格式加载/形成 java 类/类型，而不仅仅是从“.java”文件。**

它实际上是一个类文件，你不能。您有几个工具可以从 XML 模式文件中生成 Java 源文件，例如[xjc 编译器](http://jaxb.java.net/2.2.4/docs/xjc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:09:35.647

您可以通过代码生成来解决您的问题：您可以在运行时或构建时生成和编译。

本质上，您阅读您的描述文件（无论是 xml 还是自然语言描述）并编写一个 .java 文件，其中包含定义您的类的所有代码。类似的东西写[在这里](https://stackoverflow.com/a/7660332/349620)

# vb.net - VSTO 文档自定义：缺少控制表参考，除非先采取其他操作

> ID：15769874
> 
> 赞同：0
> 
> 时间：2013-04-02T16:57:04.440
> 
> 标签：vb.net, excel, deployment, vsto

所以我有一个解决我的问题的方法，但我并不真正理解这个问题，而且我的解决方法很粗糙。我有一个文档级别的自定义，可以插入自定义文档中未包含的其他文档的工作表：

```
Private Sub LabReportTemplateAdder()
    Dim ReportTemplate As Excel.Workbook
    CurrentRun = Marshal.GetActiveObject("Excel.Application")
    ReportTemplate = CurrentRun.Workbooks.Open("C:\Reports\Templates\" & LabReportListBox.SelectedItem())
    ReportTemplate.Worksheets(1).Move(Before:=Globals.ThisWorkbook.Sheets(5))
End Sub 
```

该脚本实际上每次在部署中都能正常工作。但是，当我尝试修改添加的模板（即从数据库中添加信息）时，修改（许多不同的操作）都失败并出现缺少参考错误：

“此文档可能无法按预期运行，因为缺少以下控件：Sheet5。依赖此控件的数据将不会自动显示或更新，并且其他自定义功能将不可用。请联系您的管理员或此文档的作者以获取更多帮助。”

失败的代码类型示例：

```
Private Sub AllMaterialsAdder(xxDataGridView As DataGridView, CostColumnID As Double, InsertColumnID As Double, CountColumnID As Double, DescriptionIndex As Integer, CostIndex As Integer)
    CurrentSheet = Globals.ThisWorkbook.ActiveSheet
    If CurrentSheet.Name = NameSet Then 'this is abbreviated test to check make sure only the sheets we need are added
        MsgBox("The active sheet isn't a Lab Report.  It's " & CurrentSheet.Name & ".")
    Else
        Dim ItemCount As Double
        ItemCount = CurrentSheet.Cells(1, CountColumnID).value
        For Each row As DataGridViewRow In xxDataGridView.SelectedRows
            CurrentSheet.Cells((4 + ItemCount), InsertColumnID).value = xxDataGridView.Item(DescriptionIndex, row.Index).Value
            CurrentSheet.Cells((4 + ItemCount), CostColumnID).value = xxDataGridView.Item(CostIndex, row.Index).Value
            ItemCount = ItemCount + 1
        Next
    End If
End Sub 
```

或者

```
Private Sub MaterialSummaryUpdater()
    CurrentSheet = Nothing
    Globals.MaterialSummaryWorksheet.UsedRange(5, 26).Clear()
    For Each Me.CurrentSheet In Globals.EOSWorkbook.Worksheets
        If CurrentSheet.Name <> NameSet Then 'this is abbreviated test to check make sure only the sheets we need are added [excluding NameSet] 
            Dim CurrentCount1, CurrentCount2, CurrentCount3, MasterCount1, MasterCount2, MasterCount3 As Int32
            CurrentCount1 = CurrentSheet.Cells(1, 28).Value
            CurrentCount2 = CurrentSheet.Cells(1, 33).Value
            CurrentCount3 = CurrentSheet.Cells(1, 39).Value
            If CurrentCount1 > 0 Then
                MasterCount1 = Globals.MaterialSummaryWorksheet.Cells(2, 3).Value
                Globals.MaterialSummaryWorksheet.Range(Globals.MaterialSummaryWorksheet.Cells((5 + MasterCount1), 1), Globals.MaterialSummaryWorksheet.Cells((4 + MasterCount1 + CurrentCount1), 6)).Value = CurrentSheet.Range(CurrentSheet.Cells(4, 25), CurrentSheet.Cells((3 + CurrentCount1), 30)).Value
            End If
            If CurrentCount2 > 0 Then
                MasterCount2 = Globals.MaterialSummaryWorksheet.Cells(2, 8).Value
                Globals.MaterialSummaryWorksheet.Range(Globals.MaterialSummaryWorksheet.Cells((5 + MasterCount2), 7), Globals.MaterialSummaryWorksheet.Cells((4 + MasterCount2 + CurrentCount2), 10)).Value = CurrentSheet.Range(CurrentSheet.Cells(4, 31), CurrentSheet.Cells((3 + CurrentCount2), 35)).Value
            End If
            If CurrentCount3 > 0 Then
                MasterCount3 = Globals.MaterialSummaryWorksheet.Cells(2, 13).Value
                Globals.MaterialSummaryWorksheet.Range(Globals.MaterialSummaryWorksheet.Cells((5 + MasterCount3), 12), Globals.MaterialSummaryWorksheet.Cells((4 + MasterCount3 + CurrentCount3), 16)).Value = CurrentSheet.Range(CurrentSheet.Cells(4, 36), CurrentSheet.Cells((3 + CurrentCount3), 40)).Value
            End If
        End If
    Next
End Sub 
```

我应该注意，这不会发生在我正在开发的计算机上，而只会发生在部署中，这可能与[this question](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/81bd2438-ef51-4032-802e-13e9041b0e06/)或[this one](https://stackoverflow.com/questions/5356550/vsto-cant-find-project-or-library-error-occurs-on-property-get-callvstoassem)相关。

虽然我觉得这个问题对我来说有点不同。首先，我尝试在其上部署它的所有机器都安装了 VSTO Tools for Office。其次，如果我运行一个脚本来调用自定义文档中的一个命名表，它就可以工作。在我添加工作表之前简单地添加一个毫无价值的变量似乎可以解决问题：

```
Dim currentcount As Int32 = Globals.HistologyLaborSummaryWorksheet.Cells(2, 11).value 
```

但是，如果我在添加工作表后调用它，那没关系它会失败。我的简单解决方法是将其添加到`LabReportTemplateAdder`子中，但我仍然不明白为什么它会失败，以及为什么会修复它。显然工作表存在，但我不知道它是否与修改工作表索引有关，或者是否需要在类似于[我之前遇到的 ROT 问题](https://stackoverflow.com/questions/15688982/excel-vsto-workbooks-open-only-working-when-another-action-is-taken-first)的地方注册工作表。

如果有一个更好的解决方案，我正在寻找一个更好的解决方案，并解释这里真正失败的原因。
谢谢。

编辑：我现在在更多地方遇到了这个问题，而且，解决方法似乎很粗糙。这是一个完整的错误：

```
Microsoft.VisualStudio.Tools.Applications.Runtime.ControlNotFoundException: 
This document might not function as expected because the following control is missing:
Sheet5\. Data that relies on this control will not be automatically displayed or updated, 
and other custom functionality will not be available. Contact your administrator or the 
author of this document for further assistance. ---> 
System.Runtime.InteropServices.COMException: Programmatic access to the Microsoft Office 
Visual Basic for Applications project system could not be enabled. If Microsoft Office 
Word or Microsoft Office Excel is running, it can prevent programmatic access from being 
enabled. Exit Word or Excel before opening or creating your project.

  at Microsoft.VisualStudio.Tools.Office.Runtime.Interop.IHostItemProvider.GetHostObject(String primaryType, String primaryCookie, IntPtr& hostObject)

   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.ExecuteCustomization.Microsoft.Office.Tools.IHostItemProvider.GetHostObject(Type primaryType, String primaryCookie)

   at Microsoft.Office.Tools.Excel.WorksheetImpl.GetObjects()

   --- End of inner exception stack trace ---

   at Microsoft.Office.Tools.Excel.WorksheetImpl.GetObjects()

   at Microsoft.Office.Tools.Excel.WorksheetImpl.GetPrimaryControl()

   at Microsoft.Office.Tools.Excel.WorksheetImpl.get_Cells()

   at Microsoft.Office.Tools.Excel.WorksheetBase.get_Cells() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:36:01.373

根据您插入工作表的事实，[这看起来很相关。](http://nodexl.codeplex.com/discussions/251117)

# jquery - blur() 隐藏字段时的 change() 问题

> ID：15769875
> 
> 赞同：0
> 
> 时间：2013-04-02T16:57:06.337
> 
> 标签：jquery, onchange, blur

```
<input id="blur-test" type="text"/>

$('#blur-test').blur(function() { $(this).hide(); });
$('#blur-test').change(function () { alert('ok'); });
$('#blur-test').keydown(function (e) {
    if (e.which == 13) { $(this).blur(); }
}); 
```

当我更改字段内容然后通过鼠标单击取消焦点时，一切正常（出现警报）。按下“输入”时会出现问题。Blur 事件以编程方式触发，该字段隐藏但 change() 不起作用。只有当我单击页面上的某个位置或使用选项卡时，它才会雇用。看起来输入并没有失去焦点。为什么这样？我应该如何正确触发模糊？

PS当模糊函数体为空时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:54:19.313

jQuery 更新到 1.9.1 解决了这个问题。干杯!

# java - Calendar.getTime().getYear() 返回 0113 而不是 2013

> ID：15769882
> 
> 赞同：0
> 
> 时间：2013-04-02T16:57:12.440
> 
> 标签：java, android, calendar

我正在做一个小游戏。当游戏第一次开始时，我会在 SharedPreferences 中以秒为单位保存自 01.01.1970 以来的时间。

现在我想以这种形式在我的屏幕上给出这个日期：DD.MM.YYYYY

我使用了日历功能，但它返回 02.04.0113，所以缺少 1900 年。

这是我的代码：

```
private void initBornTXT() {
    SharedPreferences pref = getSharedPreferences("LIFE", 0);
    long born = pref.getLong("BIRTHDAY", 0);
    Calendar c = Calendar.getInstance();

    c.setTimeInMillis(0);

    c.add(Calendar.SECOND, (int)born);
    int year = c.getTime().getYear();
    int month = c.getTime().getMonth();
    int day = c.getTime().getDay();
    String string_born = String.format("%02d.%02d.%04d", day, month, year);
    TextView born_txt = (TextView)findViewById(R.id.textViewBorn);
    born_txt.setText(string_born);
} 
```

有什么错？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T16:59:00.567

什么都没有。您只是没有查看您正在调用的方法的文档，[`Date.getYear()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getYear%28%29)：

> 返回一个值，该值是从包含或以此 Date 对象表示的时刻开始的年份减去 1900 的结果，如本地时区所解释的那样。

请注意，您应该已经收到警告说您正在使用已弃用的 API：不要只是忽略这些警告。

另外，帮自己一个忙，不要自己进行格式化：`SimpleDateFormat`改用。（或者理想情况下，使用[Joda Time](http://joda-time.sf.net)代替......）这样您也可以避免*月份*出错......您可能没有注意到由于月份是基于 0 的月份，您会休息一个月，这在`Calendar`和`Date`。_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:59:01.587

这是正常的，记录在案的行为。请参阅 JavaDoc 了解[Date#getYear()](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getYear%28%29)。

获得年份的更好方法是：

`c.get(Calendar.YEAR)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:59:19.090

您正在使用 getTime，它返回一个日期对象。日期基于 0=1900。所以这是预期的输出。请改用 SimpleDateFormat。

不过，感谢创建 Y2K 错误 :)

# asp.net-mvc - Dynamics crm 使用 linq 显示 memberworks 列表

> ID：15769884
> 
> 赞同：0
> 
> 时间：2013-04-02T16:57:17.923
> 
> 标签：asp.net-mvc, linq, linq-to-sql, dynamics-crm-2011, dynamics-crm

我正在尝试在托管 Dynamics CRM 的网站插件中运行 LINQ 查询。我需要使用 LINQ 来检索所有当前注册成员的列表，如 MemberWorks 选项卡中所示。但要成为主持人，我不知道从哪里开始。

我真的为了帮助一个朋友而深陷其中，我发现必要性和紧迫的时间要求是挑战我的大脑和学习新事物的最佳方式。所以请如果你给我相关的指针我真的很感激。

为了澄清我的 LINQ 知识处于初学者水平，而我对托管 Dynamics CRM 数据结构的知识处于相似水平。所以我没有真正尝试过任何事情，因为我根本不知道在这个阶段从哪里开始。但希望一些善良的人能给我指导，我会看看这会把我带到哪里。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:20:48.620

如果您查看[Hosk 的博客](http://crmbusiness.wordpress.com/2011/02/28/crm-2011-getting-started-with-linq-in-crm-2011/)，您可能会找到答案，否则您还有其他问题要问：）

这位将军的问题很难给出答案，所以如果它有点模糊并且不完全符合您的预期，请原谅

# asp.net-mvc - 如何将特定区域的视图配置为 MVC4 应用程序的主要入口？

> ID：15769885
> 
> 赞同：0
> 
> 时间：2013-04-02T16:57:21.117
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, routes

请我在这种情况下需要帮助：

我在他的 UIAreaRegistration 类中有一个带有一个控制器“ActionController”和他的视图“Login.cshtml”的区域“\UI”：

```
public class UIAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get { return "UI"; }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "UI_default",
            "UI/{controller}/{action}/{id}",
            new { controller = "Account", action = "Login", id = UrlParameter.Optional }
        );
    }
} 
```

现在我希望 Login.cshtml 成为应用程序的第一个视图。然后在 global.asax.cs 的“RegisterRoutes”中，我有：

```
AreaRegistration.RegisterAllAreas();

//Default    
//routes.MapRoute(
//    name: "Default",
//    url: "{controller}/{action}/{id}",
//    namespaces: new[] { "", "" },
//    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
//);

routes.MapRoute(
    name: "Default",
    url: "{area}/{controller}/{action}/{id}",
    defaults: new { area = "UI", controller = "Account", action = "Login", id = UrlParameter.Optional }
); 
```

但是没有用，请问我该怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:58:02.590

您要做的是使您的 UI 区域成为默认区域，因此 UI 中的任何控制器都可以在 URL 中没有 UI 前缀的情况下访问。问题在于根文件夹中的控制器将不再可访问。如果这是您想要的，您可以通过更改区域路线注册来做到这一点：

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "UI_default",
            "UI/{controller}/{action}/{id}",
            new { controller = "Account", action = "Login", id = UrlParameter.Optional }
        );
    } 
```

至：

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "UI_default",
            "{controller}/{action}/{id}",
            new { controller = "Account", action = "Login", id = UrlParameter.Optional }
        );
    } 
```

更简单的解决方案是在默认控制器上创建一个操作，将用户重定向到您的区域

# c++ - 什么 IDE 可以成功地将所有变量的类型从 QSharedPointer 更改为 boost::shared_ptr？

> ID：15769886
> 
> 赞同：2
> 
> 时间：2013-04-02T16:57:22.017
> 
> 标签：c++, refactoring

今天我尝试将一个100+文件的项目中所有QSharedPointer类型的智能指针的类型更改为boost::shared_ptr。

我用 sed 和 grep 解决了这个问题，但起初看起来很简单，结果却是一场噩梦，因为虽然 QSharedPointer 只有 clear 和 data，但 boost::shared_ptr 分别使用 reset 和 get。替换那些原来也替换了许多列表和字符串的清除，以及字节数组的 data()。

是否有可以自动完成这项工作的 IDE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:25:01.067

如果您还没有 Qt Creator，您也可以按照 Drew Dormann 的建议进行操作，并且它是免费的。只需右键单击实例的`clear()`和`data()`方法`QSharedPointer`，选择 Refactor - Rename 光标下的符号，然后替换为`boost::shared_ptr`

请记住，Creator 重构工具（至少在 Windows 上）将退出您的项目并提供重构 Qt 库头文件，因此您应该取消选中列表中的那些。

替换所有呼叫后，您可以重命名`QSharedPointer`为`boost::shared_ptr`输入名称，然后就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:02:59.957

[Visual Assist](http://www.wholetomato.com/)是 Visual Studio 的附加组件，具有免费试用期。

该工具包括一个“重命名此成员函数”，您可以在*sed-grepping*类型本身的名称`QSharedPointer`之前对两个成员使用它。

# android - Android 应用程序作为服务器，Web 应用程序作为客户端

> ID：15769892
> 
> 赞同：0
> 
> 时间：2013-04-02T16:57:34.723
> 
> 标签：android

需要创建 android 模拟器作为服务器和 web 应用程序作为客户端。是否可以从 Web 应用程序客户端调用模拟器中的应用程序。

# c# - 可以使用 HttpWebRequest 填充模型吗？

> ID：15769895
> 
> 赞同：0
> 
> 时间：2013-04-02T16:57:47.917
> 
> 标签：c#, asp.net-mvc, httpwebrequest

我想知道是否可以使用 HttpWebRequest 填充 MVC 模型？我正在尝试构建一个 MVC 4 应用程序，我从大学课程列表页面获取数据并在我的视图中以几种不同的方式对其进行按摩。我在周围看到的示例都采用了响应流并返回了一个字符串，或者没有为 MVC 格式化（使用 console.write）。另外，据我了解，返回的数据不是 JSON 或 XML 格式。到目前为止，这是我的控制器...

```
public ActionResult Index()
{
    string postData = "semester=20143Fall+2013+++++++++++++++++++++++++++++++&courseid=&subject=IT++INFORMATION+TECHNOLOGY&college=&campus=1%2C2%2C3%2C4%2C5%2C6%2C7%2C9%2CA%2CB%2CC%2CI%2CL%2CM%2CN%2CP%2CQ%2CR%2CS%2CT%2CW%2CU%2CV%2CX%2CZ&courselevel=&coursenum=&startTime=0600&endTime=2359&days=ALL&All=All+Sections";
    byte[] dataArray = Encoding.UTF8.GetBytes (postData);
    HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create("http://www3.mnsu.edu/courses/selectform.asp");
    myRequest.Method = "POST";
    myRequest.ContentType = "application/x-www-form-urlencoded";
    myRequest.ContentLength = dataArray.Length;
    using (WebResponse response = myRequest.GetResponse())
    {
        using (var reader = new StreamReader(response.GetResponseStream()))
        {
            //insert into a model? Maybe?
        }
    }
    return View();
} 
```

如果 HttbWebRequest 不能使用，有没有办法可行？还是我完全走错了方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:02:17.020

您可以使用 HttpWebRequest 和 WebResponse 从大学课程的网站获取流。然后使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)解析流中的废料并将所需的值插入模型

# ant - 如何从内部设置 Ant 对 FileSet 的引用 蚂蚁任务？

> ID：15769896
> 
> 赞同：1
> 
> 时间：2013-04-02T16:57:50.303
> 
> 标签：ant, groovy

我有类似的东西：

```
<groovy>
    import org.apache.tools.ant.types.FileSet
    import org.apache.tools.ant.types.selectors.FilenameSelector

    def aoeu = new FileSet()
    aoeu.setDir(new File('aoeu'))

    def snth = new new FilenameSelector()
    snth.setName('snth')

    aoeu.add(snth)

    project.references['aoeu'] = aoeu
</groovy> 
```

但：

```
<echo message="${toString:aoeu}"/> 
```

发出一个`NullPointerException`.

如何解决上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:32:07.553

[groovy 任务预先配置了与](http://groovy.codehaus.org/The+groovy+Ant+Task)[AntBuilder](http://groovy.codehaus.org/Using+Ant+from+Groovy)实例和 Ant“项目”对象的绑定。它使 groovy 对于在构建中创建编程逻辑非常有吸引力。

以下示例演示了如何在 groovy 脚本中创建文件集：

```
<project name="demo" default="process-text-files">

    <path id="build.path">
        <pathelement location="/path/to/jars/groovy-all-2.1.1.jar"/>
    </path>

    <target name="process-text-files">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>
        <groovy>
            ant.fileset(id:"textfiles",dir:"src", includes:"**/*.txt")

            project.references.textfiles.each {
                println it
            }
        </groovy>
    </target>

</project> 
```

以下示例演示了引用在脚本外部创建的普通文件集（我的首选方式）：

*   [Ant : 使用任务处理子文件夹中的文件](https://stackoverflow.com/questions/5075017/ant-process-the-files-in-the-subfolder-using-tasks/5083342#5083342)

# ruby-on-rails - 我如何在 Rails 中进行 POST？

> ID：15769899
> 
> 赞同：0
> 
> 时间：2013-04-02T16:58:05.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, ruby-on-rails-3.1, ruby-on-rails-3.2

以下是我的控制器代码和视图代码。该视图显示游戏列表，我想在同一视图中将游戏添加到现有表中。我在后期处理方面遇到了一些问题。任何建议或任何人都可以指出我可能做错了什么？

```
class GamesController < ApplicationController

  # GET /games
  def index
    @games = []
    client = Games::Client.new
    @games =client.get_games
    if @games.blank?
      render_404
    end  
    if params[:name]
      client.create_games params[:name] 
    end
  end
end

%nav.navigation-bar.clearfix{:role => "navigation"}
  %h3.reader-details Game tools
  %a.home{:href => root_path, :role => "link", :title => "Home"}Home
%body
  %section.form
    %form.standard{:action => "/games", :method => "post"}
      %input{type: 'text', name: 'name', class: 'text'}
      %input.primary-action{type: 'submit', value: 'Add', class: 'button'}
  .content
    - if @games.present?
      %table.games
        %thead
          %tr
            %th type
            %th id            
        %tbody
          - @games.each do |game|
            %tr
              %td= game['type']
              %td= game['id']

         %a= link_to "Back", root_path 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:05:14.677

您没有`create`定义操作。当您为资源创建 RESTful 路由时，POST`/games`不会查找`index`操作，而是查找`create`操作。

为资源搭建脚手架是了解 Rails 想要你做什么的好方法。

`rails g scaffold game name:string`

这将创建您的 RESTful 路由，并将在您的控制器中创建与它们对应的操作。请注意，您可能想在尝试使用脚手架之前废弃您拥有的东西，或者脚手架可能无法创建所需的一切。如果您想稍后将其粘贴回，请将您的视图代码保存到临时文件中。

这或多或少是我的做法：

```
# View
= form_for Game.new do |f|
  = f.text_field :name
  = f.submit 'Add'

# Controller
  def create
    if Game.create(params[:game])
      redirect_to :action => 'index'
    else
      flash[:notice] = "There was a problem creating your new game"
      render :action => 'index'
    end
  end

# Routes
  resources :games 
```

# xml - 从 xpath 字符串创建 XML

> ID：15769903
> 
> 赞同：0
> 
> 时间：2013-04-02T16:58:22.727
> 
> 标签：xml, xslt, xpath

我正在对 XML 文件进行 Schematron 验证，结果如下所示：

```
<fired-rule context="Message[@Name='SPY_IN']"/>
<failed-assert test="@OppositeMacAddress='0x00'" location="/Module[1]/Router[1]/Message[1]">
  <text>!Error! Erwarteter Wert:"0x00"</text>
</failed-assert>

<fired-rule context="Configuration[@Address='W_ST_PLAMA_MOD_OWM_OPP']"/>
<failed-assert test="@Name='8'"
  location="/Module[1]/DriverConfigurations[1]/DriverConfiguration[20]/Configuration[10]">
  <text>!Error! Erwarteter Wert:"8"</text>
</failed-assert> 
```

现在我正在尝试生成一个引用“位置”属性的 XML 文件。它应该如下所示：

```
<Module>
  <Router>
    <Message>
    </Message>
  </Router>
</Module>
<Module>
  <DriverConfigurations>
    <DriverConfiguration>
      <Configuration>
      </Configuration>
    </DriverConfiguration>
  </DriverConfigurations>
</Module> 
```

我试图参考这个：[auto created xml elements using XSLT](https://stackoverflow.com/questions/8450381/auto-creating-xml-elements-using-xslt) 但它对我不起作用。所以我不知道我的 xsl 文件应该是什么样子。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:06:51.090

试试这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="/">
    <root>
      <xsl:apply-templates select="//failed-assert/@location" />
    </root>
  </xsl:template>

  <xsl:template match="@location">
    <xsl:param name="path" select="." />

    <xsl:variable name="currentContext" 
                  select="substring-before(substring-after($path,'/'), '[')"/>
    <xsl:variable name="subContext" select="substring-after($path, ']')"/>
    <xsl:element name="{$currentContext}">
      <xsl:apply-templates select="current()[string($subContext)]">
        <xsl:with-param name="path" select="$subContext"/>
      </xsl:apply-templates>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<root>
  <fired-rule context="Message[@Name='SPY_IN']"/>
  <failed-assert test="@OppositeMacAddress='0x00'" location="/Module[1]/Router[1]/Message[1]">
    <text>!Error! Erwarteter Wert:"0x00"</text>
  </failed-assert>

  <fired-rule context="Configuration[@Address='W_ST_PLAMA_MOD_OWM_OPP']"/>
  <failed-assert test="@Name='8'"
    location="/Module[1]/DriverConfigurations[1]/DriverConfiguration[20]/Configuration[10]">
    <text>!Error! Erwarteter Wert:"8"</text>
  </failed-assert>
</root> 
```

结果是：

```
<root>
  <Module>
    <Router>
      <Message />
    </Router>
  </Module>
  <Module>
    <DriverConfigurations>
      <DriverConfiguration>
        <Configuration />
      </DriverConfiguration>
    </DriverConfigurations>
  </Module>
</root> 
```

# c# - Html.BuildImage 参数 htmlAttributes

> ID：15769905
> 
> 赞同：0
> 
> 时间：2013-04-02T16:58:30.907
> 
> 标签：c#, asp.net-mvc, image, html-helper

我的项目中有这个插件：ImageResizer.FluentExtensions.Mvc。这个插件包含一个助手：Html.BuildImage，这个助手包含多个参数，我使用了参数：htmlAttributes 但对我不起作用，我的代码：

`@Html.BuildImage("~/content/images/produto-foto/"+ (fotoPrincipal != null ? fotoPrincipal.FotoID : 0) + ".jpg", builder => builder.Resize(img => img.Dimensions(224,187)),Model.title, new {@class="img-produto"})`

这是我的html编译的响应：

`<img src="/content/images/produto-foto/8.jpg?width=224&amp;height=187" alt="">`

有谁知道我做错了什么？

PS：对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:30:39.780

您已链接到[https://github.com/benfoster/ImageResizer.FluentExtensions](https://github.com/benfoster/ImageResizer.FluentExtensions)作为`Html.BuildImage`实现的来源。我可以在那里找到这种方法的两种实现。

```
public static MvcHtmlString BuildImage(this HtmlHelper html, string src, Action<ImageUrlBuilder> configure, string alternateText = "", object htmlAttributes = null)
{
  var imageUrl = html.CreateUrlHelper().ImageUrl(src, configure);
  return html.Image(imageUrl.ToString());
}

public static MvcHtmlString BuildImage(this HtmlHelper html, string src, ImageUrlBuilder builder, string alternateText = "", object htmlAttributes = null)
{
  var imageUrl = html.CreateUrlHelper().ImageUrl(src, builder);
  return html.Image(imageUrl.ToString());
} 
```

这两个都完全忽略了`alternateText`and`htmlAttributes`参数，所以传递它们是没有用的。

为了设置标题和类，您需要以不同的方式构建图像，或者手动更改`BuildImage`.

# ajax - 如何使用 AJAX 获取响应标头

> ID：15769906
> 
> 赞同：0
> 
> 时间：2013-04-02T16:58:31.277
> 
> 标签：ajax, header

我正在尝试使用 AJAX 获取响应标头，但它不起作用。显然我没有做对：

```
$.ajax({
type: 'GET',
url:'http://www.somesite.com/',
data: formData,
success: function(data, textStatus, XMLHttpRequest){
alert(XMLHttpRequest.getResponseHeader('some_header'));
  }
error: function (XMLHttpRequest, textStatus, errorThrown) {
alert(XMLHttpRequest.getResponseHeader('some_header'));
  }
}); 
```

我也试试这个：

```
$.ajax({
type: "GET",
url: 'http://www.somesite.com/',
complete: function(xhr) {
alert(xhr.getAllResponseHeaders());
  }
}); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:07:15.700

你少了一个逗号。

```
success: function(data, textStatus, XMLHttpRequest){
    alert(XMLHttpRequest.getResponseHeader('some_header'));
},   // <------------- 
```

# .htaccess - api uri中可以有一个点作为分隔符吗？喜欢 api/Business.Country？

> ID：15769907
> 
> 赞同：0
> 
> 时间：2013-04-02T16:58:32.343
> 
> 标签：.htaccess, rewrite, restful-url

我的任务是制作一个 RESTful api，非常简单，只提供几个表。例如，您应该能够按企业或消费者查找国家/地区，或按国家或州获取信息。问题是，语法要求 api 调用应如下所示：

```
<domain>/api/v1/Business.Country 
```

或喜欢

```
<domain>/api/v1/Consumer.Country/us 
```

或者

```
<domain>/api/v1/Consumer.Country/us/State 
```

那里的那个点甚至可能吗？这是在 LAMP 平台上，所以我想它可以通过某种花哨的 Rewrite 来完成，但我想知道这对于 api 的未来扩展会有多大的灵活性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:05:58.440

是的，在您的 URI 中包含点是非常有可能（并且有效）的。您可以编写一些基于 .htaccess 的 mod_rewrite 规则来适当地路由这些请求。

### 示例重写规则：

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# to handle cases like <domain>/api/v1/Business.Country/us
RewriteRule ^api/v1/Business\.[^/]+/(.*?)/?$ /business?country=$1 [L,QSA,NC]

# to handle cases like <domain>/api/v1/Consumer.Country/us
RewriteRule ^api/v1/Consumer\.[^/]+/(.*?)/?$ /consumer?country=$1 [L,QSA,NC] 
```

# csv - d3.js - 在可缩放、可点击的地图上绘制点

> ID：15769909
> 
> 赞同：4
> 
> 时间：2013-04-02T16:58:39.920
> 
> 标签：csv, plot, maps, d3.js

我正在尝试调整在[http://bl.ocks.org/mbostock/2206340](http://bl.ocks.org/mbostock/2206340)上找到的地图并在其上绘制一些点。我在一个名为 data.csv 的 csv 文件中有我试图使用的数据（纬度和经度），其格式如下：

```
lon_0,lat_0,lon_1,lat_1
-122.1430195,37.4418834,-122.415278,37.778643
-122.1430195,37.4418834,-122.40815,37.785034
-122.4194155,37.7749295,-122.4330827,37.7851673
-122.4194155,37.7749295,-122.4330827,37.7851673
-118.4911912,34.0194543,-118.3672828,33.9164666
-121.8374777,39.7284944,-121.8498415,39.7241178
-115.172816,36.114646,-115.078011,36.1586877 
```

我对代码所做的修改包含在以下代码段中

```
d3.json("us-states.json", function(json) {
  d3.csv("data.csv", function(data) {
   dataset = data.map(function(d) { return [ +d["lat_0"], +d["lon_0"] ]; });
   console.log(data)
   states.selectAll("circle")
     .data(data)
     .enter()
     .append("circle")
     .attr("cx", function(d) {
               return projection([d["lon_0"], d["lat_0"] ])[0];
               })
     .attr("cy", function(d) {
               return projection([d["lon_0"],d["lat_0"] ])[1];
               })
     .attr("r", 5)
     .style("fill", "red");

});

  states.selectAll("path")
      .data(json.features)
    .enter().append("path")
      .attr("d", path)
      .on("click", click);

}); 
```

地图渲染良好，但未显示绘图。知道这里可能有什么问题吗？我尝试了很多不同的东西，我不确定这是否是州地图覆盖这些点的问题，或者投影是否有问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:25:48.863

示例中绘制的路径被填充，即它们后面的任何东西都将被遮盖。SVG 元素是按照它们指定的顺序绘制的。在您的情况下，首先绘制圆圈，然后绘制状态路径，从而使圆圈变得模糊。

当您在绘制圆圈之前绘制状态路径时，它会起作用。

# knockout.js - 当 observable 为 null 时避免错误

> ID：15769911
> 
> 赞同：1
> 
> 时间：2013-04-02T16:58:50.403
> 
> 标签：knockout.js

我使用淘汰赛绑定。我有以下代码：

```
<div  data-bind="with: transport()">
    <textarea data-bind="text: sender().complete()"></textarea>
</div> 
```

有时发件人`null`因此在此绑定上发生错误：`text: sender().complete()`

当 observable 为空时，如何进行淘汰赛以避免错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:01:55.073

```
<div  data-bind="with: transport()">
    <textarea data-bind="text: sender() ? sender().complete() : ''"></textarea>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:09:58.010

最后，这是我所做的：

当对象 Transport 初始化时，我为 senderSignaletic 创建了一个计算，它测试传输上是否存在发送者（=Shipper 实体），然后从中检索信号：

```
transport.senderSignaletic = ko.computed(function () {
    return (transport.sender()) ? transport.sender().signaletic : '';
}); 
```

当对象托运人初始化时，我为signaletic创建了一个计算值，它是名称、街道、号码、城市...的串联：

```
shipper.signaletic = ko.computed(function () {
    var name = shipper.name();
    var street = shipper.street();
    var number = shipper.number();
    var postcode = shipper.postCode();
    var city = shipper.city();

    var country = shipper.country().name();
    return name + '\n' + street + ' ' + number + '\n' + postcode + ' ' + city + ' ' + country;
}); 
```

# facebook-fql - 如何获得用户的生日但用户不是我，也不是我的朋友

> ID：15769919
> 
> 赞同：0
> 
> 时间：2013-04-02T16:59:16.217
> 
> 标签：facebook-fql, date

我正在尝试从参加指定活动的所有用户的表 USER 中获取生日日期字段。我正在使用以下查询：

```
SELECT name, sex, pic_big, profile_url, birthday, birthday_date, meeting_sex FROM user WHERE uid IN (SELECT uid FROM event_member WHERE eid=XXXXXXXXXXX AND rsvp_status='attending') 
```

但是如果用户不是我的朋友（access_token 是使用我的 facebook 帐户生成的），那么在字段birthday、birthday_date 和 meeting_sex 中的所有返回数据都是空的。即使我可以在用户的​​个人资料页面中看到用户的生日，我也无法使用 FQL 检索此信息。

我认为这不是权限问题，因为我授予了所有生日权限（用户和朋友权限），并且因为此权限是获取用户或朋友的生日，而不是一般用户的生日（不是我或我的朋友）。

@Black Maggie：但这不是活动许可。我无法获得独立于事件的生日日期。例如，尝试运行以下查询：

```
select birthday_date, profile_url from user where uid = 100002172431048 
```

我使用了一个 access_token 并授予了所有权限。字段生日日期始终返回 null 但是当我单击浏览用户个人资料时，我可以看到生日日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:55:32.793

您授予其他用户访问您的信息的权利。

未经他们的授权，您不能授予访问其他人信息的权限。

# objective-c - 使用可可绘制 NSImage

> ID：15769929
> 
> 赞同：2
> 
> 时间：2013-04-02T16:59:49.590
> 
> 标签：objective-c, macos, cocoa, core-graphics, nsview

目前我正在使用 NSView 上的贝塞尔路径绘制一些形状。绘图代码在 drawRect: 方法上执行并最终创建图像。

我不想在任何地方向用户显示此视图。然而，据我所知，drawRect: 方法只有在我们将视图添加到超级视图并随后在 NSView 上调用 display 或 displayNeedsUpdate 方法时才会被调用。

我的要求是创建所需绘图的图像。

而不是绘制到 NSView 并将其转换为 PNG，有什么方法可以直接绘制图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:08:33.340

您必须通过指定视图框架来创建`NSBitmapImageRep`和使用。`bitmapImageRepForCachingDisplayInRect:`

将绘制位图图像表示。

然后，您只需要使用`representationUsingType:NSPNGFileType properties:nil`并将结果写入文件。

下面的示例摘自 cocoa with love 的教程：[Advanced drawing using AppKit](http://www.cocoawithlove.com/2011/01/advanced-drawing-using-appkit.html)

```
NSRect iconViewFrame = iconView.frame;
[iconView setFrame:[iconView nativeRect]];

NSBitmapImageRep *bitmapImageRep =
    [iconView bitmapImageRepForCachingDisplayInRect:[iconView frame]];
[iconView
    cacheDisplayInRect:[iconView bounds]
    toBitmapImageRep:bitmapImageRep];
[[bitmapImageRep representationUsingType:NSPNGFileType properties:nil]
    writeToURL:[savePanel URL]
    atomically:YES];

[iconView setFrame:iconViewFrame]; 
```

**他们还建议：**

> 创建自己的 NSBitmapImageRep，使用 graphicsContextWithBitmapImageRep: 设置 NSGraphicsContext，自己锁定焦点并直接调用 drawRect: 将避免这些问题并且更灵活。但它会做更多的工作，所以我没有为这个示例项目费心（我主要把这个导出代码放到应用程序中，这样我就可以创建应用程序的图标）。

因此，您可以选择最适合您需求的解决方案。

# ios - 如何在更新期间更改应用程序的类别？

> ID：15769932
> 
> 赞同：-1
> 
> 时间：2013-04-02T17:00:01.977
> 
> 标签：ios, app-store-connect, categories

我正在更新我的应用程序，但找不到更改主要类别的位置。Itunes connect 让我可以更改所有内容，但不能更改类别（主要或次要）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:02:55.353

您应该能够单击“版本信息”标题旁边的“编辑”链接。

# javascript - Firefox 在 iframe 中打印 PDF 会引发错误

> ID：15769933
> 
> 赞同：4
> 
> 时间：2013-04-02T17:00:07.413
> 
> 标签：javascript, firefox, printing

需要帮忙

我需要`iframe`在单击时将 PDF 加载到其中，然后在其上调用打印对话框。

我有这样的代码：

```
$('.print').click(function () {
   var iframe = '<iframe src="test.pdf" id="print-iframe" name="print-iframe"></iframe>';
   $('body').append(iframe);
   window.frames["print-iframe"].focus();
   window.frames["print-iframe"].print();
}); 
```

它在 Chrome 中完美运行。但是在 Firefox 中我有这样一个错误： `Error: Permission denied to access property 'print'`.

我该如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-31T10:55:17.027

在最新版本的 Firefox（自 19 起）上，您必须在`about:config`. 将`pdfjs.disabled`属性设置为`true`，您将看到使用您的脚本出现的打印窗口。

如果开始下载，请将`plugin.disable_full_page_plugin_for_types`属性设置为`application/pdf`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T17:06:24.477

这是带有完整 url src="domain.com/file.pdf" 的 iframe 中的 Src 错误

你可以试试

```
$('.print').click(function () {

  var domain = location.protocol + "//" + location.host;
  var iframe = '<iframe src="'+domain+'/test.pdf" id="print-iframe" name="print-iframe"></iframe>';
  $('body').append(iframe);
  window.frames["print-iframe"].focus();
  window.frames["print-iframe"].print();
}); 
```

# javascript - 使用 Javascript 代码显示 Javascript 启用或禁用

> ID：15769935
> 
> 赞同：0
> 
> 时间：2013-04-02T17:00:35.387
> 
> 标签：javascript

我正在尝试检测 Javascript 启用或禁用，但从以下代码中，我没有得到确切的输出。

```
<script language="Javascript" type="text/javascript">
function detectJS() {
    document.getElementById("displayJS").innerHTML=true?"Enabled":"Disabled";
}
</script>

<body>
<div id="detectJS"></div>
</body> 
```

我哪里错了？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:03:20.527

我所能建议的就是使用“noscript”HTML标签，因为很明显，当javascript被禁用时你不能使用javascript函数......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:05:40.813

使用`<noscript>`. 只有禁用 JavaScript 时，浏览器才会显示内容。

另一种选择是在页面加载时隐藏元素。

```
<div id="nojs">You must enable JavaScript!</div>
<script type="text/javascript">
    document.getElementById("nojs").style.display = "none";
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T17:08:32.433

显然使用 JS 来检测 JS 是错误的方法，但这就是您的代码不起作用的原因：

您需要调用您的方法并且您要查找的 ID 错误：http: [//jsfiddle.net/FpY3A/](http://jsfiddle.net/FpY3A/)

```
<script language="Javascript" type="text/javascript">
function detectJS() {
    document.getElementById("displayJS").innerHTML=true?"Enabled":"Disabled";
}
detectJS();
</script>

<body>
<div id="displayJS"></div>
</body> 
```

# java - 如何在java中获取xml文件的文件路径

> ID：15769942
> 
> 赞同：0
> 
> 时间：2013-04-02T17:00:40.763
> 
> 标签：java, xml, filepath

我有一个 xml 文件，我想获取文件的直接路径并将其转换为 String 有什么办法吗？我试图编译下面的代码，但它发现了错误的文件。

```
 File temp = File.createTempFile("staff",".xml" );
          String absolutePath = temp.getAbsolutePath();
                String filePath = absolutePath.
                 substring(0,absolutePath.lastIndexOf(File.separator)); 
```

谢谢。

# http - 如何获取 Google Drive 文件的可缓存 URL？

> ID：15769944
> 
> 赞同：0
> 
> 时间：2013-04-02T17:00:45.697
> 
> 标签：http, url, caching, google-drive-api

我在 HTML5 应用程序中使用 Google Drive SDK 来显示用户的图像。相同的图像可能会在页面上多次出现和消失，因此缓存它们以减少显示图像时的延迟非常重要。然而，据我所知，`webContentLink`Google Drive SDK 调用中返回的返回值是不可缓存的；当我将它设置为`background-image`使用 CSS 时，它会触发对同一图像的 HTTP 请求，即使它已经在页面上使用过。

**如何获取 Google Drive 文件的可缓存 URL？**

我现在正在使用的一种似乎可以正常工作的解决方法是使用该文件`thumbnailLink`并将自定义大小参数注入其中；不像`webContentLink`,`thumbnailLink`似乎是可缓存的。但是，这种解决方案感觉非常笨拙和脆弱。

# javascript - 为什么 datepicker() 接受参数“getDate”？

> ID：15769945
> 
> 赞同：4
> 
> 时间：2013-04-02T17:00:47.347
> 
> 标签：javascript, jquery, jquery-ui, object, datepicker

```
var year= $("input[name=dateAccessed]").datepicker('getDate').getFullYear() 
```

上面的代码获取的是日期选择器中设置的日期，然后只获取日期的年份，然后将其保存在名为 year 的变量中。

我知道此代码将名称为 dateAccessed 的输入字段转换为 jQuery 对象。由于它现在是一个 jQuery 对象，因此可以对其应用 jQuery 方法。

然后我应用日期选择器，日期选择器是方法还是对象？我不明白，因为它同时接受参数（使其成为方法）和属性（对象具有属性）。有没有对象+方法之类的东西？

为什么 datepicker 接受`('getDate')`返回所选日期的参数？这是如何运作的？

如果 datepicker 有一个`.getDate`方法不是更好吗？所以我们可以把它写成`datepicker().getDate.getFullYear()`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T17:06:36.790

# 日期选择器

`datepicker`是一个函数。该函数使用括号调用，`('getDate')`由于此参数的值为`'getDate'`，它返回一个 Javascript`Date`对象，该对象是本机 Javascript 并具有该`getFullYear`功能。

有关. [_](http://api.jqueryui.com/datepicker/#method-getDate) _`datepicker`

```
getDate()

Returns: Date
Returns the current date for the datepicker or null if no date has been selected.

    This method does not accept any arguments.

Code examples:

Invoke the getDate method:

var currentDate = $( ".selector" ).datepicker( "getDate" ); 
```

# Javascript 概念

对 Javascript 有帮助的一个关键概念是理解函数调用和函数引用之间的区别。请参阅[我的另一个更详细的 javascript 答案](https://stackoverflow.com/a/15753516/57611)。一旦你理解了这一点，你就会明白为什么“日期选择器是一个方法还是一个对象”**必须**用“它是一个函数对象”来回答。

在 Javascript 中，函数只是特殊的对象，可以通过在其名称后添加一对括号来调用。这样做不会返回函数对象本身，而是返回函数对象*返回*的任何内容，其中包含`return somethingHere;`. 它可以帮助您阅读更多关于[原型继承](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)的信息。

# jQuery 概念

jQuery 利用了 Javascript 的链接能力。这是您调用函数的地方，该函数返回一个对象，您可以在该对象上调用另一个函数——一次又一次。另一种使用模式是为链的每个步骤声明变量并采取单个步骤，但这会变得混乱，通常我们都希望避免在不必要的地方声明变量。如果我们要转换您的代码以便没有链接，它可能看起来像这样：

```
var dateAccessedInput, selectedDate, year;
dateAccessedInput = $("input[name=dateAccessed]");
selectedDate = dateAccessedInput.datepicker('getDate');
year = selectedDate.getFullYear(); 
```

在 jQuery 中，一个 jQuery 函数在可能的情况下返回相同的 jQuery 对象是常见的做法，这样您就可以将另一个方法链接到它之外。当链接变长时，您甚至可以将它们放在单独的行上，以帮助防止它变成大块。这是我的一个项目中的一些真正的 javascript jQuery 代码：

```
incident
   .wireUp($('div.incidents div.incident'))
   .find('input:data(focus)')
   .first()
   .focus()
   .filter(':data(select)')
   .trigger('select'); 
```

我希望这可以更清楚地说明为什么可以将不同的功能链接在一起。

此外，就其价值而言，Javascript 具有*函数*，虽然是的，它们是方法，但我们通常不这样称呼它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T17:11:19.930

**一点关于链接和表达式**

您似乎对方法的[链接](https://stackoverflow.com/questions/5505648/jquery-chaining-can-everything-be-chained-when-can-we-not-chain)感到困惑，尤其是返回对象的方法。由于每个方法都返回一个值，因此它是一个引用该值的[*表达式*](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators)，无论是对象还是字符串。

下面的示例避免了方法的链接，并将您自己的示例分解为分配给变量的表达式。

**您的代码的非链接版本**

`$`是一个获取参数`"input[name=dateAccessed]"`并返回`jQuery`对象的函数。您可以像在示例中一样直接引用结果对象，也可以将其分配给变量。

例如：

```
var jquery_field_object = $("input[name=dateAccessed]"); 
```

同样，`datepicker`是`jQuery`获取参数`'getDate'`并返回对象的`Date`对象的方法。您可以再次直接引用结果对象或将其分配给变量。

例如：

```
var date_object = jquery_field_object.datepicker('getDate'); 
```

以类似的方式，`getFullYear()`是`Date`对象的方法。因此，完整的未链接示例将显示为：

```
var jquery_field_object = $("input[name=dateAccessed]");
var date_object         = jquery_field_object.datepicker('getDate');
var year                = date_object.getFullYear(); 
```

# sql - 通过执行更新代码

> ID：15769946
> 
> 赞同：0
> 
> 时间：2013-04-02T17:00:54.393
> 
> 标签：sql, sql-server, tsql, updates

我是一名初学者程序员，我正在尝试学习 SQL，但在这里遇到了一个问题，我得到的问题是：

> 编写一个`UpdateSuggestedPrice`接受 ISBN 编号和新建议价格的程序。如果 ISBN 不存在，则引发错误消息。如果没有错误，将建议价格更新为新价格。

```
Create PROCEDURE UpdateSuggestedPrice (@ISBN char(10), @SuggestedPrice smallmoney)
AS
BEGIN
   if @ISBN is null
   Begin
     Raiserror ('Provide a valid ISBN',16,1)
   End
   else
   Begin    
     if (select COUNT(*) from Title where SuggestedPrice = @SuggestedPrice) = 0
     begin
        Select 'Description sucessfully added'

        insert into Title (SuggestedPrice)
        values (@SuggestedPrice)
     End
     Else
        Raiserror ('Description already exists',16,1)
     End
   End

   Return

-- Here I'm trying to execute the procedure, search for ISBN and 
-- then update the suggested price, can someone please tell me 
-- what I'm doing wrong.
execute UpdateSuggestedPrice @ISBN= '1021031040', @SuggestedPrice = '40' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:28:24.570

您的代码有几个问题。首先，您在数据中搜索记录，`SuggestedPrice = @SuggestedPrice`这实际上应该是在寻找 ISBN，如`ISBN = @ISBN`. 您还缺少`END`存储过程末尾的 an 。

我建议重新阅读这个问题。

```
CREATE PROCEDURE UpdateSuggestedPrice (@ISBN char(10), @SuggestedPrice smallmoney)
AS
BEGIN
   IF @ISBN is null
   BEGIN
     RAISERROR ('Provide a valid ISBN',16,1)
   END
   ELSE
   BEGIN    
     IF (SELECT COUNT(*) FROM Title WHERE ISBN = @ISBN) = 0
     BEGIN
        RAISERROR ('ISBN does not exist.',16,1)
     END
     ELSE
     BEGIN
        SELECT 'Price sucessfully updated.';
        UPDATE Title /* Title is the table to be updated */
        SET SuggestedPrice = @SuggestedPrice /* this is the field to update */
        WHERE ISBN = @ISBN; /* this selects which record to update */
     END
   END
END 
GO
EXECUTE UpdateSuggestedPrice @ISBN= '1021031040', @SuggestedPrice = '40' 
```

# python - 将 Python 数字列表四舍五入并保持它们的总和

> ID：15769948
> 
> 赞同：12
> 
> 时间：2013-04-02T17:01:03.900
> 
> 标签：python, numpy, sum, rounding

我在 Python 中有一个十进制数的列表或数组。我需要将它们四舍五入到最接近的 2 位小数，因为这些是货币金额。但是，我需要保持总和，即四舍五入到小数点后 2 位的原始数组的总和必须等于数组的四舍五入元素的总和。

到目前为止，这是我的代码：

```
myOriginalList = [27226.94982, 193.0595233, 1764.3094, 12625.8607, 26714.67907, 18970.35388, 12725.41407, 23589.93271, 27948.40386, 23767.83261, 12449.81318]
originalTotal = round(sum(myOriginalList), 2)
# Answer = 187976.61

# Using numpy
myRoundedList = numpy.array(myOriginalList).round(2)
# New Array = [ 27226.95    193.06   1764.31  12625.86  26714.68  18970.35  12725.41 23589.93 27948.4   23767.83  12449.81]

newTotal = myRoundedList.sum()
# Answer = 187976.59 
```

我需要一种有效的方法来修改我的新舍入数组，使总和也是 187976.61。需要将 2 便士的差异应用于第 7 项和第 6 项，因为它们在四舍五入的条目和原始条目之间的差异最大。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T04:53:01.190

第一步是计算期望结果和实际总和之间的误差：

```
>>> error = originalTotal - sum(myRoundedList)
>>> error
0.01999999996041879 
```

这可以是正面的也可以是负面的。由于其中的每一项`myRoundedList`都在实际值的 0.005 范围内，因此该误差将小于原始数组的每项 0.01。您可以简单地除以 0.01 并四舍五入得到必须调整的项目数：

```
>>> n = int(round(error / 0.01))
>>> n
2 
```

现在剩下的就是选择应该调整的项目。最佳结果来自于首先调整最接近边界的那些值。您可以通过按原始值和舍入值之间的差异进行排序来找到它们。

```
>>> myNewList = myRoundedList[:]
>>> for _,i in sorted(((myOriginalList[i] - myRoundedList[i], i) for i in range(len(myOriginalList))), reverse=n>0)[:abs(n)]:
    myNewList[i] += math.copysign(0.01, n)

>>> myRoundedList
[27226.95, 193.06, 1764.31, 12625.86, 26714.68, 18970.35, 12725.41, 23589.93, 27948.4, 23767.83, 12449.81]
>>> myNewList
[27226.95, 193.06, 1764.31, 12625.86, 26714.68, 18970.359999999997, 12725.42, 23589.93, 27948.4, 23767.83, 12449.81]
>>> sum(myNewList)
187976.61 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-14T21:53:02.167

正如[kettlehell 的回答](https://stackoverflow.com/a/51451847/832230)中所指出的，请考虑PyPI 包[`iteround`](https://pypi.org/project/iteround/)。但是，它内部并不使用 NumPy。

```
>>> from iteround import saferound
>>> saferound([1.0, 2.1, 3.6], places=0)
[1.0, 2.0, 4.0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T17:34:41.370

关于使用浮点数的所有注意事项：

```
delta_pence = int(np.rint((originalTotal - np.sum(myRoundedList))*100))
if delta_pence > 0:
    idx = np.argsort(myOriginalList - myRoundedList)[-delta_pence:]
    myRoundedList[idx] += 0.01
elif delta_pence < 0:
    idx = np.argsort(myOriginalList - myRoundedList)[:delta_pence]
    myRoundedList[idx] -= 0.01

>>> myRoundedList.sum()
187976.60999999999 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T17:48:53.647

首先，您不应该使用浮点数来存储资金（改用小数）。但下面我提供了一些非常通用的解决方案——您需要存储、累积和使用舍入差异的总和。一些冗长的（而不是非常pythonic ;-) 的示例与您的数字：

```
# define your accuracy
decimal_positions = 2

numbers = [27226.94982, 193.0595233, 1764.3094, 12625.8607, 26714.67907, 18970.35388, 12725.41407, 23589.93271, 27948.40386, 23767.83261, 12449.81318]
print round(sum(numbers),decimal_positions)
>>> 187976.61

new_numbers = list()
rest = 0.0
for n in numbers:
    new_n = round(n + rest,decimal_positions)
    rest += n - new_n
    new_numbers.append( new_n )

print sum(new_numbers)
>>> 187976.61 
```

# oauth - box.com oauth2“请求权限”对话框出现在每次身份验证

> ID：15769950
> 
> 赞同：0
> 
> 时间：2013-04-02T17:01:06.093
> 
> 标签：oauth, oauth-2.0, box-api

我们的服务[http://docmunch.com](http://docmunch.com)正在使用 box.com oauth 来验证我们的用户并授权访问他们的盒子驱动器。但是，每次用户进行身份验证时，都会显示“请求权限”对话框。

对于 Google 或 Facebook（对于其他应用程序），这不会发生。一旦用户授权了应用程序，oauth 提供者就会记住该权限并且不会继续询问。但是，box.com 不记得授权。有什么方法可以设置 oauth 所以框只要求用户在第一次授权我们的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:18:29.133

通过 OAuth 流向用户发送后，您会收到一个`access_token`和一个`refresh_token`. 您需要`refresh_token`为特定用户存储以供将来使用。您不需要每次都通过授权流程发送用户。

# javascript - 使用 javascript 和 cordova 2.2.0 将 jpg/png 转换为 base64

> ID：15769951
> 
> 赞同：2
> 
> 时间：2013-04-02T17:01:06.223
> 
> 标签：javascript, cordova, base64

## 我正在处理的应用程序

我正在开发一个用于慢速（或无）互联网环境的 Cordova 2.2.0 应用程序。
它从 CMS 系统中获取数据。此数据 (JSON) 使用[Cordova 的文件系统](http://cordova.apache.org/docs/en/2.2.0/cordova_file_file.md.html#File)本地存储在移动设备上。这为该应用程序无法访问互联网的时刻提供数据。

## 问题

使用 Cordova 文件系统的数据存储和恢复工作正常。存储到文件系统的数据采用 JSON 格式。解析此 JSON 后，将其转换为 HTML。问题是这给了我带有外部来源的 IMG 标签，如下所示：

```
<img src="http://www.SomeUrl.com/Images/SomeImage.jpg" id="someImage" /> 
```

我想加载此图像并使用 JavaScript 将其转换为 base64。如果可能的话，我将能够将其写入本地文件系统以供离线使用。像这样的东西：

```
var imageFromURLToBase64(imageURL){ 
    "use strict";

    var image = doSomethingWithUrl(imageURL),
        base64 = "";

    //CONVERT IMAGE TO BASE64 HERE
    return base64;
};

var imageUrl = $("#someImage").attr("src"),
    base64 = imageFromURLToBase64(imageUrl);
//Store base64 image to local filesystem 
```

高度赞赏帮助！
*此服务器上启用了 PS 跨源请求！*

## 备择方案

如果那里有更好的缓存图像替代方案，我会很高兴听到它。我在这里阅读了一些关于 HTML 缓存清单[的信息](https://stackoverflow.com/questions/10924628/cache-external-image-in-a-phonegap-app)，但我不知道这是否适合我的问题。

### 重复的问题

有更多的人处理这个问题，这些问题的答案并没有解决我的问题。[这个答案](https://stackoverflow.com/questions/10924628/cache-external-image-in-a-phonegap-app?lq=1)或[这个答案](https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript)并没有告诉我为phonegap应用程序缓存我的图像的最佳方法是什么。我想知道是否有更好的方法将图像编码为 base64，但我真正的问题是：“为 phonegap 应用程序存储/缓存我的图像的最佳方法是什么？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:14:49.563

# 主意

创建`canvas`、加载图像，使用`drawImage`并`toDataURL()`用于转换为 base64 编码的字符串

相关答案：[在 JavaScript 中获取图像数据？](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)

### 注意事项

画布创建和转换可能需要一些时间。

一些较旧的 Android 手机不支持`toDataURL()`并通过返回一个无用的字符串来假装它正在工作。`data:,`

# 另一个想法

使用`readAsDataURL`in`FileReader`读取文件并将数据作为 base64 编码的数据 url 返回。

相关答案：[Phonegap 编码图像 base64](https://stackoverflow.com/questions/14286014/phonegap-encode-image-base64)

* * *

对于缓存，您可以搜索“延迟加载图像”。

# android - 在 Y 轴标签上绘制的 AchartEngine 条形图

> ID：15769952
> 
> 赞同：2
> 
> 时间：2013-04-02T17:01:11.957
> 
> 标签：android, achartengine

美好的一天，我在这里有一个小问题。我如何从原点偏移 x 标签以便可以正确绘制图形，因为当我尝试使用自定义 X 标签绘制条形图时，它会从 X 标签和 y 标签坐标的原点绘制，因此意味着它也绘制在 Y 轴标签上。无论如何，移动条形图以在 X 标签右侧绘制值或将 x 标签偏移 1。这是一个图像。条形图绘制在 Y 轴标签上。

![条形图](https://i.stack.imgur.com/VTnpG.png)

任何想法，我该如何解决这个问题？像把它移到右边还是什么的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:57:26.847

这曾经是其中一个版本中的错误。[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含此修复程序的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T09:58:13.457

从 index =1 开始添加您的自定义标签

```
renderer.addXTextLabel(index, key); 
```

并添加这一行

```
renderer.setXAxisMin(0.5); 
```

这将为您在条形图和左 y 轴线之间留出一些空间

# vb.net - VB.NET 无法检测网格视图中复选框/收音机的取消选中状态

> ID：15769954
> 
> 赞同：0
> 
> 时间：2013-04-02T17:01:19.093
> 
> 标签：vb.net, gridview

我很难调试这个奇怪的问题（也许这很奇怪，因为我是第一次做 VB.NET 的 PHP 人）

我有一个像下面这样的 Gridview

```
<asp:GridView ID="MyGridViewID" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="employee_id" DataSourceID="all_employee" >
    <Columns>

        <asp:BoundField DataField="employee_id" HeaderText="employee_id" 
            ReadOnly="True" SortExpression="employee_id" Visible="False" />
        <asp:BoundField DataField="employee_name" HeaderText="employee_name" 
            SortExpression="employee_name" />

        <asp:TemplateField HeaderText="Select">
            <ItemTemplate>
                <br />
                <asp:RadioButtonList ID="RadioPermission" runat="server">
                    <asp:ListItem Value="1">Yes</asp:ListItem>
                    <asp:ListItem Selected="True" Value="0">No</asp:ListItem>
                </asp:RadioButtonList>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowSelectButton="True" ItemStyle-CssClass="visibility" ShowHeader="false"
                            HeaderStyle-CssClass="visibility" >
        <HeaderStyle CssClass="visibility" />
        <ItemStyle CssClass="visibility" />
        </asp:CommandField>
    </Columns>
</asp:GridView> 
```

然后我有一个将信息保存到数据库的按钮，它与保存部分配合得很好

```
For Each row As GridViewRow In MyGridViewID.Rows
        Dim radio_cp As RadioButtonList =    CType(row.Cells(7).FindControl("RadioPermission"), RadioButtonList)

        If radio_cp.SelectedValue = 1 Then
            ' BLOCK A: saving to the db if the radio is YES
        Else
            ' BLOCK B: deleting from the db if the radio is NO.
        End If

    Next 
```

我的问题：

1.  当我第一次加载 Gridview 时将所有单选设置为 NO，我为某些单选选择 YES 并单击保存，它运行良好。

2.  然后刷新 Gridview 并在这些收音机中正确反映更改。

3.  然后我为当前设置为 YES 的收音机选择 NO 并再次单击 Save => radio_cp.SelectedValue 始终返回 1。

4.  Checkbox 和 Radio 的问题是一样的：我无法检测到用户何时取消选中 checkbox/radio。我认为gridview在某个地方保存了那些checkbox/radio的状态，但我不知道

5.  我尝试了 EnableViewState 没有运气，谷歌搜索了很多也没有运气。

6.  我尝试了 OnCheckedChecked 事件，但没有成功。

我可能会在这里遗漏一些东西，你能帮忙吗？

谢谢你所有的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:20:55.597

你的代码应该可以工作......我已经根据你的代码修补了一个简单的应用程序，它工作得很好。

我不确定问题到底出在哪里，还有其他可能影响单选按钮列表的东西吗？

编辑：

这可能对您的问题没有影响，但是您可以这样做：

```
Dim radio_cp As RadioButtonList =    CType(row.FindControl("RadioPermission"), RadioButtonList) 
```

# awk - 仅将函数应用于一列，位置可变

> ID：15769957
> 
> 赞同：4
> 
> 时间：2013-04-02T17:01:43.537
> 
> 标签：awk

我有一堆不同的文件。所有文件都包含一个标题为 ID 的列，但不一定在所有文件的同一位置。我有一个函数我想应用于所有文件中的 ID 以将它们更改为 NEWID。

我知道如果我传入 ID 的列号，我可以很简单地做到这一点，比如它是 5 列文件中的第 3 列，例如：

```
awk -v column=$COLNUMBER '{print $1, $2, FUNCTION($column), $4, $5}' FILE 
```

但是，如果我所有的文件都有数百列并且每个文件中的某个位置都是任意的，那么这将非常乏味。我正在寻找一种方法来做一些事情：

```
awk -v column=$COLNUMBER '{print #All columns before $column, FUNCTION($column), #All columns after $column}' FILE 
```

我尝试了不同的循环，但还没有任何工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T17:47:37.720

简单的：

```
$ awk -v column=$COLNUMBER '{ $column = FUNCTION($column); print }' $FILE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:59:59.777

保留字段之间的间距：

```
$ cat file
a b   c      d e  f
$ gawk -v col=3 '{print gensub("([[:space:]]*([^[:space:]]+[[:space:]]+){" col-1 "})[^[:space:]]+","\\1FUNCTION($col)","")}' file
a b   FUNCTION($col)      d e  f 
```

或者如果您实际上正在寻找要传递给 FUNCTION() 的列值：

```
$ gawk -v col=3 '{print gensub("([[:space:]]*([^[:space:]]+[[:space:]]+){" col-1 "})([^[:space:]]+)","\\1FUNCTION(\\3)","")}' file
a b   FUNCTION(c)      d e  f

$ gawk -v col=4 '{print gensub("([[:space:]]*([^[:space:]]+[[:space:]]+){" col-1 "})([^[:space:]]+)","\\1FUNCTION(\\3)","")}' file
a b   c      FUNCTION(d) e  f 
```

或者：

```
$ gawk -v col=3 '{print gensub("([[:space:]]*([^[:space:]]+[[:space:]]+){" col-1 "})[^[:space:]]+","\\1FUNCTION($"col")","")}' file
a b   FUNCTION($3)      d e  f

$ gawk -v col=4 '{print gensub("([[:space:]]*([^[:space:]]+[[:space:]]+){" col-1 "})[^[:space:]]+","\\1FUNCTION($"col")","")}' file
a b   c      FUNCTION($4) e  f 
```

上面使用 GNU awk 进行 gensub()，您可以在其他 awk 中使用多个 sub() 或 match()+substr() 完成相同的操作。

从其他人的答案看来，您实际上可能想在字段的值上调用 FUNCTION()，而不是打印 FUNCTION(field)。如果是这种情况，那么您只需执行以下操作：

```
$ gawk -v col=4 '{print gensub("([[:space:]]*([^[:space:]]+[[:space:]]+){" col-1 "})[^[:space:]]+","\\1"FUNCTION($col),"")}' file 
```

例如，如果 FUNCTION 是 toupper()：

```
$ gawk -v col=4 '{print gensub("([[:space:]]*([^[:space:]]+[[:space:]]+){" col-1 "})[^[:space:]]+","\\1"toupper($col),"")}' file
a b   c      D e  f 
```

# iphone - 如何在 UIWebView 中显示完整的 Web 内容，包括图像

> ID：15769962
> 
> 赞同：0
> 
> 时间：2013-04-02T17:01:51.780
> 
> 标签：iphone, html, xcode, uiwebview, uiscrollview

我面临的问题是，在我的网页中，有一些图像由于它们的大小而在屏幕上占了一半。我试过 UIScrollView 但它没有帮助。所以我需要找到一种方式，让 UIWebView 可以显示我的整个 html 内容，包括图像、文本等......

另外请让我知道如何在 UIWebView 中启用水平滚动。只有垂直滚动有效。可能是如果水平滚动开始工作，我的问题就解决了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:18:34.720

您是否在 Nib 文件的属性检查器中选择了“缩放页面以适应”复选框？这通常对我有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:05:14.307

可能是页面本身，如果 CSS 包含一个 100% 宽度围绕整个内容的包装器，它不会水平滚动，只会在较小的屏幕上截断内容。您可能想与其他网站进行测试以确保。

# php - PHP mysqli准备语句不起作用

> ID：15769966
> 
> 赞同：6
> 
> 时间：2013-04-02T17:02:00.837
> 
> 标签：php, sql, mysqli, prepared-statement

我正在使用 mysqli prepare 语句来查询具有多个约束的数据库。我已经在我的测试文件中运行了代码，它工作得很好。但是，当我将代码移到我的实时文件时，它会引发以下错误：

> PHP 警告：mysqli_stmt::bind_result()：绑定变量的数量与第 80 行 C:\wamp\www\firecom\firecom.php 中准备好的语句中的字段数不匹配
> 
> PHP 注意：未定义变量：导致第 89 行的 C:\wamp\www\firecom\firecom.php

两个参数都设置正确，但有些东西把它扔掉了。

代码：

```
$query = $mysqli->prepare("SELECT * FROM calls WHERE wcccanumber = ? && county = ?");
$query->bind_param("ss", $wcccanumber, $county);
$query->execute();

$meta = $query->result_metadata();

while ($field = $meta->fetch_field()) {
    $parameters[] = &$row[$field->name];
}

call_user_func_array(array($query, 'bind_result'), $parameters);

while ($query->fetch()) {
    foreach($row as $key => $val) {
        $x[$key] = $val;
    }
    $results[] = $x;
}

print_r($results['0']); 
```

$查询变量转储：

```
object(mysqli_stmt)#27 (10) { ["affected_rows"]=> int(-1) ["insert_id"]=> int(0) ["num_rows"]=> int(0) ["param_count"]=> int(2) ["field_count"]=> int(13) ["errno"]=> int(0) ["error"]=> string(0) "" ["error_list"]=> array(0) { } ["sqlstate"]=> string(5) "00000" ["id"]=> int(1) } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T17:20:01.600

为什么要用mysqli折磨自己？
在[PDO](https://stackoverflow.com/tags/pdo/info)中，您将不需要这些可怕的代码，而只需一行即可获得结果

```
$query = $pdo->prepare("SELECT * FROM calls WHERE wcccanumber = ? && county = ?");
$query->execute(array($wcccanumber, $county));
$results = $query->fetchAll();
print_r($results[0]); 
```

# jquery - Jquery在div中查找一个值，如果找到则创建元标记

> ID：15769967
> 
> 赞同：-3
> 
> 时间：2013-04-02T17:02:02.003
> 
> 标签：jquery, metadata

嘿，我正在寻找执行以下操作，

```
<div class="CesQuerySummary" id="content_0_leftcolumn_0_c_ctl01_ctl00_rs_ctl00_qsm">
  Showing results <b>1</b> - <b>6</b> of <b>6</b>.
</div> 
```

在上面的标记中找到第三个标签的值，即搜索结果的总数。

如果找到我想在页面的部分创建一个元标记，即

```
 //<meta name="WT.oss_r" content="2"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:07:51.173

试试这个：

```
if($('.CesQuerySummary b:eq(2)').length !=0 ){

     $('<meta>', {
      name: 'WT.oss_r',
      content: '2'
     }).appendTo('head');

} 
```

# gcc - 用 g++ 编译 GSL odeiv2

> ID：15769968
> 
> 赞同：2
> 
> 时间：2013-04-02T17:02:02.340
> 
> 标签：gcc, g++, gsl

我正在尝试`gsl/gsl_odeiv2`使用 g++ 编译与 ODE 求解器相关的示例代码。下面的代码来自他们的网站：

`http://www.gnu.org/software/gsl/manual/html_node/ODE-Example-programs.html`

并在 gcc 下编译良好，但 g++ 抛出错误

`invalid conversion from 'void*' to 'int (*)(double, const double*, double*, double*, void*)' [-fpermissive]`

在代码中：

```
#include <stdio.h>
#include <gsl/gsl_errno.h>
#include <gsl/gsl_matrix.h>
#include <gsl/gsl_odeiv2.h>

int func (double t, const double y[], double f[], void *params)
{
    double mu = *(double *)params;
    f[0] = y[1];
    f[1] = -y[0] - mu*y[1]*(y[0]*y[0] - 1);
    return GSL_SUCCESS;
}

int * jac;

int main ()
{
    double mu = 10;
    gsl_odeiv2_system sys = {func, jac, 2, &mu};

    gsl_odeiv2_driver * d = gsl_odeiv2_driver_alloc_y_new (&sys, gsl_odeiv2_step_rkf45, 1e-6, 1e-6, 0.0);
    int i;
    double t = 0.0, t1 = 100.0;
    double y[2] = { 1.0, 0.0 };

    for (i = 1; i <= 100; i++)
    {
        double ti = i * t1 / 100.0;
        int status = gsl_odeiv2_driver_apply (d, &t, ti, y);

        if (status != GSL_SUCCESS)
        {
            printf ("error, return value=%d\n", status);
            break;
        }

        printf ("%.5e %.5e %.5e\n", t, y[0], y[1]);
    }

    gsl_odeiv2_driver_free (d);
    return 0;
} 
```

错误就行了

`gsl_odeiv2_system sys = {func, jac, 2, &mu};`

解决这个问题的任何帮助都会很棒。我希望包含一些 stdlib 元素，因此希望将其编译为 C++。此外，如果我可以让它用 g++-4.7 编译，我可以更轻松地使用 C++11 对语言的添加来对它进行多线程处理。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:50:12.247

看起来你对雅可比有一些问题。在您的特定情况下，您可以在系统定义中使用 NULL 而不是 jac ，即

```
gsl_odeiv2_system sys = {func, NULL, 2, &mu}; 
```

一般来说，您的 Jacobian 必须是具有特定条目的函数 - 请参阅 gsl 手册 - 这就是您的编译器抱怨的原因。

此外，您可能需要手动链接 gsl 库：

```
-L/usr/local/lib -lgsl 
```

如果你在linux系统上。

# django - 在 Django 中，是否可以让 Django 忽略发送电子邮件的错误报告？

> ID：15769969
> 
> 赞同：0
> 
> 时间：2013-04-02T17:02:08.067
> 
> 标签：django, websocket

网址以？/socket.io/1/websocket/327459101594 仅仅通过搜索文档，似乎没有办法让Django忽略基于请求URL发送电子邮件错误报告。

有没有人有任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:09:14.470

您可以编写自己的日志处理程序。

要检查 url，您可以 sublcass djangos[`AdminEmailHandler`](https://github.com/django/django/blob/master/django/utils/log.py#L73)并扩展该`emit`方法以首先检查 url。

```
class MyAdminEmailHandler(AdminEmailHandler):

  def emit(self, record):
     record.request
     # request information is available as request property
     super(MyAdminEmailHandler, self).emit(record) 
```

# linux - Linux >2.6.33：sendfile() 可以用来实现更快的“猫”吗？

> ID：15769970
> 
> 赞同：3
> 
> 时间：2013-04-02T17:02:16.297
> 
> 标签：linux, cat, sendfile

必须将许多大文件连接成一个更大的单个文件，我们目前使用

```
猫文件1文件2 ...输出文件
```

但想知道是否可以比与那个老朋友更快地完成。

阅读手册页`sendfile()`，可以指定 *input_file* 的偏移量，从哪里将其剩余部分发送到 *output_file*。但是：我还可以指定 *output_file* 的偏移量吗？或者我可以简单地循环所有输入文件，只需打开我的输出 FD 和 sendfile()'ing 重复进入它，有效地连接 *input_files*？换句话说：如果我不关闭它也不在其中寻找（），指向我的输出 FD 的文件指针是否会保留在其末尾？

有人知道这样的`cat`实现`sendfile()`吗？

* * *

诚然，我是管理员，而不是程序员，所以请忍受我缺乏“真正的”编码知识......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T17:24:13.333

是的，输出 fd 的文件指针将保留在其末尾（如果文件是新文件或不大于您已经写入的数据）。

[sendfile()](http://linux.die.net/man/2/sendfile)的文档明确提到（强调我的）：

> 在 2.6.33 之前的 Linux 内核中，`out_fd`必须引用一个套接字。从 Linux 2.6.33 开始，它可以是任何文件。**如果是普通文件，则 `sendfile()`适当更改文件偏移量**。

我个人从未见过`cat`依赖. 也不是可移植的，因此这样做会导致仅在 Linux 2.6.33+ 上运行的版本（尽管我猜它仍然可以作为在编译时激活的平台相关优化来实现）。`sendfile()``out_fd``fileno(stdout)``sendfile()``cat`

# php - Ajax 预输入不起作用

> ID：15769974
> 
> 赞同：0
> 
> 时间：2013-04-02T17:02:24.010
> 
> 标签：php, jquery, ajax, twitter-bootstrap, web-deployment

我在 json 对象中从 Yahoo Finance 提取股票符号，并尝试在用户开始在搜索框中输入公司名称或符号时将它们显示为下拉菜单。

Typeahead 不能用作搜索框中的下拉菜单。这是我到目前为止的代码。

例如，如果我在将 {$_POST['symbol']} 替换为 goog 的同时将 $data 或 $result 转储到Suggest.php 中，我将得到一个数组。所以，我在想，要么Suggest.php echo 没有返回任何东西，要么没有从quote.js 文件中调用suggest.php。

如果我删除了建议.php 中的 if 语句并用 goog 替换 {$_POST['symbol']} 然后转到不`http://localhost/suggest.php`应该回显打印什么东西？

任何帮助表示赞赏。我是网络开发的新手，正在努力学习。

引用.js

```
$(document).ready(function() {

  // create autocomplete
  $('#form-quote input[name=symbol]').typeahead({

      // load autocomplete data from suggest.php
      source: function(query, callback) {
          $.ajax({
              url: '../suggest.php',
              type: 'POST',
              dataType: 'json',
              data: {
                  symbol: query
              },
              success: function(response) {
                  callback(response.symbols);

              }
          });
      }
  });

  // load data via ajax when form is submitted
  $('#form-quote').on('click', function() {

      // determine symbol
      var symbol = $('#form-quote input[name=symbol]').val();

      // send request to quote.php
      $.ajax({
          url: 'quote.php',
          type: 'POST',
          data: {
              symbol: symbol
          },
          success: function(response) {
              $('#price').text(response);
          }
      });

      return false;
  });

}); 
```

报价单.php

```
<?php

//configuration
require("../includes/config.php");

//if form was submitted 

if($_SERVER["REQUEST_METHOD"] == "POST"){

    $stock = lookup(strtoupper($_POST["symbol"]));

    if(empty($_POST["symbol"])){

        //echo "You must enter a stock symbol";

    }else if($_POST["symbol"]){

    $price = number_format($stock['price'], 2);

    echo "A share of {$stock['name']} costs $$price";
    }
}

else{

    // render portfolio
render("stock_search.php", ["title" => "Get Quote"]);
}   
?> 
```

报价搜索.php

```
<form id = "form-quote" action="quote.php" method="post">
<fieldset>     
    <div class="control-group">
        <input name="symbol" autofocus autocomplete="off"  placeholder="Symbol"  type="text"/>
    </div>

    <div class="control-group">
        <button type="submit" class="btn">Get Quote</button>
    </div>

</fieldset>
<div id="price"></div>
<div id="suggestions"></div> 
</form>
<script type="text/javascript" src="js/quote.js" ></script> 
```

建议.php

```
 <?php

// configuration
require("../includes/functions.php");

// if form was submitted
if ($_SERVER["REQUEST_METHOD"] == "POST")
{
    // load suggestion data
$data = @file_get_contents("http://d.yimg.com/aq/autoc?query=  {$_POST['symbol']}&region=US&lang=en-US&callback=YAHOO.util.ScriptNodeDataSource.callbacks");

    // parse yahoo data into a list of symbols
$result = array();
    $json = json_decode(substr($data, strlen('YAHOO.util.ScriptNodeDataSource.callbacks('), -1));
    foreach ($json->ResultSet->Result as $stock)
        $result[] = $stock;

    echo json_encode(array('symbols' => $result]));
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:11:46.320

我看到一些错别字。如果这是测试服务器，您可能希望在 php 中启用错误。

无论如何，从这段代码：

```
// load suggestion data
$data = @file_get_contents("http://d.yimg.com/aq/autoc?query=GOOG&region=US&lang=en-US&callback=YAHOO.util.ScriptNodeDataSource.callbacks");

// parse yahoo data into a list of symbols
$patt = array("/^YAHOO\.util\.ScriptNodeDataSource\.callbacks\(/","/\)$/");
$repl = array("","");
$json = json_decode(preg_replace($patt,$repl,$data));

foreach ($json->ResultSet->Result as $stock)
    $result[] = $stock;

echo json_encode(array('symbols' => $result)); 
```

我得到以下输出：

```
{"symbols":[{"symbol":"GOOG","name":"Google Inc.","exch":"NMS","type":"S","exchDisp":"NASDAQ","typeDisp":"Equity"},{"symbol":"^UVSPY","name":"NASDAQ OMX Alpha GOOG vs. SPY","exch":"NAS","type":"I","exchDisp":"NASDAQ","typeDisp":"Index"},{"symbol":"GOOG-U.TI","name":"GOOGLE-A","exch":"TLO","type":"S","exchDisp":"TLX Exchange ","typeDisp":"Equity"},{"symbol":"GOOG11BF.SA","name":"GOOGLE -DRN MB","exch":"SAO","type":"S","exchDisp":"Sao Paolo","typeDisp":"Equity"},{"symbol":"GOOG.MX","name":"Google Inc.","exch":"MEX","type":"S","exchDisp":"Mexico","typeDisp":"Equity"},{"symbol":"GOOF.EX","name":"GOOGLE-A","exch":"EUX","type":"S","exchDisp":"EUREX Futures and Options Exchange ","typeDisp":"Equity"},{"symbol":"GGQ1.F","name":"GOOGLE-A","exch":"FRA","type":"S","exchDisp":"Frankfurt","typeDisp":"Equity"},{"symbol":"GGQ1.MU","name":"GOOGLE-A","exch":"MUN","type":"S","exchDisp":"Munich","typeDisp":"Equity"},{"symbol":"GGQ1.HA","name":"GOOGLE-A","exch":"HAN","type":"S","exchDisp":"Hanover","typeDisp":"Equity"},{"symbol":"GGQ1.DE","name":"GOOGLE-A","exch":"GER","type":"S","exchDisp":"XETRA","typeDisp":"Equity"}]} 
```

更正数据获取和解析后，如果您使用的是 Bootstrap 2.1+，您应该能够按照[此答案](https://stackoverflow.com/a/13156734/1072176)中的描述实现对 PHP 代理的 ajax 调用。（如果链接没有跳到它，请在页面上搜索“Bootstrap 2.1”。）

# ios - 将 MPMoviePlayerController 视图置于 UIview 内部（相同位置）的中心

> ID：15769975
> 
> 赞同：0
> 
> 时间：2013-04-02T17:02:26.057
> 
> 标签：ios, ipad, uiview, mpmovieplayercontroller, movie

我正在尝试在屏幕上已有的 uiview 顶部或内部添加电影播放器​​。当我放置电影播放器​​时，它位于屏幕的左上角。我想要播放电影的 Uiview 位于底部屏幕的中心。

我可以通过在“makeframe”中添加点来处理数字并将其向下移动，但这似乎不是正确的方法。videoCubeSceneView 是我想要播放电影的视图。

```
 NSString*thePath=[[NSBundle mainBundle] pathForResource:@"cubeVideo" ofType:@"mp4"];
        NSURL*theurl=[NSURL fileURLWithPath:thePath];
        moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:theurl];
        [moviePlayer.view setFrame:CGRectMake(videoCubeSceneView.frame.origin.x, videoCubeSceneView.frame.origin.y, videoCubeSceneView.frame.size.width, videoCubeSceneView.frame.size.height)];
        [moviePlayer prepareToPlay];
        [moviePlayer play];
        moviePlayer.movieSourceType = MPMovieSourceTypeFile;
        moviePlayer.scalingMode = MPMovieScalingModeFill;
        moviePlayer.controlStyle = MPMovieControlStyleDefault;
        NSLog(@"url : %@", moviePlayer.contentURL);

        [moviePlayer setShouldAutoplay:NO]; // And other options you can look through the documentation.
        [self.view addSubview:moviePlayer.view];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playBackStateDidChange) name:MPMoviePlayerPlaybackStateDidChangeNotification object:moviePlayer];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playBackFinished) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:06:08.037

`self.moviePlayer.frame = self.view.bounds;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:07:10.547

让我们试试这段代码

```
self.moviePlayer.view.center = self.view.center; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:09:12.643

[videoCubeScene addSubview:moviePlayer.view]; 将它添加到我真正想要的视图中，然后它将是该视图的坐标。将其添加到“self.view”时，它会按原样将其添加到屏幕的左上角，因为坐标是主视图的坐标（整个屏幕）

# version-control - TortoisHg 无法更新和合并未提交的更改

> ID：15769977
> 
> 赞同：-2
> 
> 时间：2013-04-02T17:02:30.350
> 
> 标签：version-control, mercurial, repository, version, versioning

嗨，这是我的第一个 mercurial 项目，我知道更好的乌龟 svn。我有一个问题，无法合并来自其他人的更改有错误：中止：未提交的更改![在此处输入图像描述](https://i.stack.imgur.com/IkdHV.png)

我能做些什么 ？

好的，我终于合并了，现在有红线是什么意思？ ![在此处输入图像描述](https://i.stack.imgur.com/6syq3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:04:10.893

如果您有未提交的更改，则需要在合并之前提交或丢弃它们。

# sublimetext2 - 将 Sublime text 2 与 git 集成

> ID：15769978
> 
> 赞同：6
> 
> 时间：2013-04-02T17:02:37.897
> 
> 标签：sublimetext2

我正在使用 Sublime 编辑器并希望将其与 Github 同步。我们是否可以使用一些额外的插件来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T17:08:44.207

是的。

[sublime text 2 - git 插件](https://stackoverflow.com/questions/15001319/sublime-text-2-git-plugin)

[https://github.com/kemayo/sublime-text-2-git](https://github.com/kemayo/sublime-text-2-git)

# ms-access - Microsoft Access 2010 Max 对计数结果的查询

> ID：15769979
> 
> 赞同：1
> 
> 时间：2013-04-02T17:02:42.567
> 
> 标签：ms-access

我需要我的访问数据库我正在尝试对字段的 Count 函数的结果使用 Max 函数，但我找不到任何方法 - 不是通过用户界面，也不是通过 SQL 查询。

**这是我的屏幕：** ![在此处输入图像描述](https://i.stack.imgur.com/Q6gc4.jpg)

在屏幕上我的计数功能正常工作

如何在 Count 函数结果上运行 Max 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:38:54.923

要“对 Count 函数结果运行 Max 函数”，需要将计数结果“汇总”到更高级别的聚合。将现有查询另存为`HallCounts`，然后创建一个执行类似操作的新查询

```
SELECT Country_Id, Max(CountOfHall_Id) AS MaxHallCount 
FROM HallCounts 
GROUP BY Country_Id; 
```

或者，要仅选择计数最多的行，请尝试这样的操作

```
SELECT * FROM HallCounts 
WHERE CountOfHall_ID = (SELECT MAX(CountOfHall_ID) FROM HallCounts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T11:37:19.910

我会使用 TOP 1 SQL 和 DESC 函数。或者在设计器视图中它是“返回”。

例如：

```
SELECT TOP 1 the_column_to_display
FROM the_table
ORDER BY Count(the_column_to_count) DESC; 
```

# facebook-like - 像按钮不起作用

> ID：15769981
> 
> 赞同：0
> 
> 时间：2013-04-02T17:02:48.323
> 
> 标签：facebook-like, confirm

在我的某些页面上，点赞按钮不起作用。我有两种行为：

*   单击“赞”按钮会在按钮底部显示“添加评论”消息和“赞”按钮，但此消息在 1 秒后关闭，没有任何反应。

*   或者它显示一个确认按钮。当我点击它时，我有一个弹出窗口，我可以在其中进行确认。当我单击此弹出窗口上的点赞按钮时，弹出窗口关闭并且点赞不计在内，我总是有 0 个点赞。

这是我的页面：www.samhigan.com/testf.cfm（自发布此消息以来，我更新了此链接）

我刚刚将 facebook 代码放在此页面上，以检查它是否来自另一个标签。

你有想法吗？我在 facebook 的 bug 列表上搜索过，但找不到任何解决方案。

谢谢，最好的问候，马蒂厄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T07:02:16.703

您是否通过单击测试了喜欢按钮并经常取消它？这将导致 Facebook 认为您的页面可能是垃圾邮件并添加确认按钮。无法手动删除，点击多次确认后会自动消失。

这是关于此问题的官方回复：Facebook 开发人员 > 错误 >[赞按钮需要确认步骤](https://developers.facebook.com/bugs/412902132095994/)

# javascript - 从 AnySlider v1.2 迁移到最新版本 (v1.8.17)

> ID：15769982
> 
> 赞同：1
> 
> 时间：2013-04-02T17:02:48.493
> 
> 标签：javascript, jquery, jquery-plugins, slider, anythingslider

这是我现在使用的滑块的代码：

**JAVASCRIPT**

```
function formatText(index, panel) {
return index + "";

$(function () {

    $('.anythingSlider').anythingSlider({
         easing: "easeInOutExpo",        // Anything other than "linear" or "swing" requires the easing plugin
         autoPlay: true,                 // This turns off the entire FUNCTIONALY, not just if it starts running or not.
         delay: 5000,                    // How long between slide transitions in AutoPlay mode
         startStopped: false,            // If autoPlay is on, this can force it to start stopped
         animationTime: 600,             // How long the slide transition takes
         hashTags: true,                 // Should links change the hashtag in the URL?
         buildNavigation: false,         // If true, builds and list of anchor links to link to each slide
         pauseOnHover: true,             // If true, and autoPlay is enabled, the show will pause on hover
         startText: "Go",                // Start text
         stopText: "Stop",               // Stop text
         navigationFormatter: formatText // Details at the top of the file on this use (advanced use)
    });

    $("#slide-jump").click(function(){
         $('.anythingSlider').anythingSlider(5);
    });

}); 
```

**HTML**

```
<div class="anythingSlider">
   <div class="wrapper">
      <ul>
         <li>
            <p><img alt="" width="582" height="255" src="IMAGELINK"></p>
            <div class="container"><a href="LINK" class="info">TEXT</a></div>
         </li>
         <li>
            <p><img alt="" width="582" height="255" src="IMAGELINK"></p>
            <div class="container"><a href="LINK" class="info">TEXT</a></div>
         </li>                          
      </ul>
   </div>
</div> 
```

**这是它在 JSFiddle 上的工作：http: [//jsfiddle.net/LUEwg/1/](http://jsfiddle.net/LUEwg/1/)**

如您所见，它使用 jQuery (1.9.1)、AnythingSlider (v1.2) 和 Easing 插件（来自“外部资源”）。我想迁移到最新的 AnythingSlider 版本，即[v.1.8.17](https://github.com/CSS-Tricks/AnythingSlider/blob/master/js/jquery.anythingslider.js)。

问题是我的代码需要进行一些更改，因为它与 AnySlider 1.8.17 不兼容。

在这里您可以看到新旧版本之间的差异：http: [//diffchecker.com/3zadzbvc](http://diffchecker.com/3zadzbvc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:29:54.570

版本的主要区别在于 HTML 的设置方式。正如您在上面分享的，原始版本的 HTML 将设置如下（[演示](http://jsfiddle.net/Mottie/ycUB6/5149/)）：

```
<div class="anythingSlider">
   <div class="wrapper">
      <ul>
         <li>
            <p><img alt="" width="582" height="255" src="IMAGELINK"></p>
            <div class="container"><a href="LINK" class="info">TEXT</a></div>
         </li>
         <li>
            <p><img alt="" width="582" height="255" src="IMAGELINK"></p>
            <div class="container"><a href="LINK" class="info">TEXT</a></div>
         </li>                          
      </ul>
   </div>
</div> 
```

在最新版本中，两个`div`包装器是由脚本添加的，所以从以下开始`ul`：

```
<ul id="slider">
   <li>
      <p><img alt="" width="582" height="255" src="IMAGELINK"></p>
      <div class="container"><a href="LINK" class="info">TEXT</a></div>
   </li>
   <li>
      <p><img alt="" width="582" height="255" src="IMAGELINK"></p>
      <div class="container"><a href="LINK" class="info">TEXT</a></div>
   </li>                          
</ul> 
```

正因为如此，css已经完全重写，所以包含默认css并添加以下自定义css：

```
/*** Set Slider dimensions here! Version 1.7+ ***/
/* added #slider li to make panels the same size in case "resizeContents" is false */
ul#slider, ul#slider li {
    width: 589px;
    height: 296px;
    list-style: none;
}

.anythingSlider.anythingSlider-default .arrow.forward a {
    background:url(http://lorenzoraffio.com/images/next.png) no-repeat left top;
    right:6px;
}
.anythingSlider.anythingSlider-default .arrow.back a {
    background:url(http://lorenzoraffio.com/images/prev.png) no-repeat left top;
}
.anythingSlider a {
    color:#706b6b;
}
.anythingSlider a.info {
    background:url(http://lorenzoraffio.com/images/marker1.png) no-repeat left 1px;
    text-decoration:none;
    padding-left:20px;
    float:right;
}

.anythingSlider a.info {
    background:url(http://lorenzoraffio.com/images/marker1.png) no-repeat left 1px;
    text-decoration:none;
    padding-left:20px;
    float:right;
}
.anythingSlider a.info:hover {
    text-decoration:underline;
    color:#000;
}
.anythingSlider p {
    margin-bottom:0;
}
.anythingSlider .container {
    padding:8px 25px 0 22px;
    width:auto;
} 
```

对您的 javascript 的唯一更改是我添加了`buildStartStop: false`选项而不是使用 css：`#start-stop { display:none; }`

# asp.net - ASP.NET 内容在 GridView 中消失 onClick

> ID：15769985
> 
> 赞同：0
> 
> 时间：2013-04-02T17:02:50.040
> 
> 标签：asp.net, button, gridview

我在 TemplateField 中有一个带有按钮的 GridView。当我单击由 TemplateField 生成的按钮之一时，会出现母版页内容，但没有出现我实际加载的页面中的任何内容。我什至有一个 OutputLabel（用于调试目的），它位于与 GridView 或包含 GridView 的 div 相关的任何内容之外，它也没有。

内容页：

```
<%@ Page Title="Administration" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Admin.aspx.cs" Inherits="Default2" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="mainCon" Runat="Server">
    <div id="container" class="left-margin">
        <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="CustomGetAllUsers" TypeName="Helper"></asp:ObjectDataSource>
        <asp:GridView runat="server" ID="UserGrid" CssClass="UserList" AllowPaging="True" AllowSorting="True" AllowCustomPaging="True" DataSourceID="ObjectDataSource1" CellPadding="4" ForeColor="#333333" GridLines="None" style="margin: auto">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            <EditRowStyle BackColor="#999999" />
            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" Height="50"/>
            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#E9E7E2" />
            <SortedAscendingHeaderStyle BackColor="#506C8C" />
            <SortedDescendingCellStyle BackColor="#FFFDF8" />
            <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
            <Columns>
               <asp:TemplateField runat="server">
                   <ItemTemplate>
                       <asp:Button ID="EditButton" runat="server" Text="Rediger" BorderColor="LightBlue" BackColor="LightGray" BorderWidth="3px" BorderStyle="Solid" OnClick="EditButton_Click"/>
                   </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </div>
    <asp:Label runat="server" ID="OutputLabel" />
</asp:Content> 
```

点击时执行的代码：

```
protected void EditButton_Click(object sender, EventArgs e)
{
    Button btn = (Button)sender;
    GridViewRow gvr = (GridViewRow)btn.NamingContainer;
    HttpCookie cookie = new HttpCookie("Username", gvr.Cells[2].Text);
    Response.Cookies.Add(cookie);
    Response.Redirect("~/UserAdmin.aspx");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:11:14.433

我现在已经找到了解决方案。我将 TemplateField 更改为带有 CommandName="Edit" 的 ButtonField，并为 GridView 创建了一个 OnRowCommand。

整个问题是它没有在代码隐藏中调用适当的方法。现在它调用了这个方法，它可以正常工作。

```
protected void UserList_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Edit")
    {
        int index = Convert.ToInt32(e.CommandArgument);
        String s = (String) UserGrid.DataKeys[index].Value;
        HttpCookie cookie = new HttpCookie("Username", s);
        Response.Cookies.Add(cookie);
        Response.Redirect("UserAdmin.aspx");
    }
} 
```

无论如何感谢您的帮助！

# css - CSS - 将选择与无序列表保持在同一行

> ID：15769989
> 
> 赞同：0
> 
> 时间：2013-04-02T17:03:05.467
> 
> 标签：css

我试图将分段控件（无序列表）和选择保留在同一行，但我不知道该怎么做。我认为这就像使用 display:inline-block; 一样简单。

我把所有东西都放在一个跨度中：

```
<span style="display:inline-block;">
    <select name="my_select1"><option value="1">1</option><option value="2">2</option></select>
    <ul class="segmentedControl">
      <li class="selected">1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
    </ul>
    <select name="my_slect2"><option value="1">1</option><option value="2">2</option></select>
</span> 
```

我的小提琴在这里：http: [//jsfiddle.net/LdZk8/39/](http://jsfiddle.net/LdZk8/39/)

我是否遗漏了一些关于我需要在 CSS 中设置的琐碎内容？

编辑：我想我可以通过使用 divs/float 来做到这一点，这样做很愚蠢吗？

```
<div style="float:left;">
    <select name="my_select1"><option value="1">1</option><option value="2">2</option></select>
</div>
<div style="float:left;">
    <ul class="segmentedControl">
      <li class="selected">1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
    </ul>
</div>
<div style="float:left;">
    <select name="my_slect2"><option value="1">1</option><option value="2">2</option></select>
</div>
<div style="clear:both;"></div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:07:19.700

将 select 和 ul 设置为`float:left;`：[Fiddle](http://jsfiddle.net/syw86/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:16:25.313

您正在寻找的是`inline-box`. 以下修改将做到这一点：

[http://jsfiddle.net/LdZk8/41/](http://jsfiddle.net/LdZk8/41/)

```
.segmentedControl {
    display: -moz-inline-box;
    -moz-box-orient: horizontal;
    -moz-box-pack:justify;
    -moz-box-sizing: border-box;

    display: -webkit-inline-box;
    -webkit-box-orient: horizontal;
    -webkit-box-pack:justify;
    -webkit-box-sizing: border-box;

    width:100px;
    height:22px;
} 
```

但是，并没有真正的理由为此目的使用 Flexbox（更不用说您只包含了来自过时规范的属性）。`display: inline-table`使用and可以获得相同的效果`display: table-cell`，它的支持比 Flexbox 更广泛：

[http://jsfiddle.net/LdZk8/42/](http://jsfiddle.net/LdZk8/42/)

```
.segmentedControl {
    display: inline-table;
    width:100px;
    height:22px;
}

.segmentedControl > li
{
    display: table-cell;

    border: solid 1px #9a9a99;
    border-left: none;

    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius:0px;

    text-align: center;

    background: #fbfbfb; /* Old browsers */
    background: -moz-linear-gradient(top, #fbfbfb 0%, #bdbdbd 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fbfbfb), color-stop(100%,#bdbdbd)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #fbfbfb 0%,#bdbdbd 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #fbfbfb 0%,#bdbdbd 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #fbfbfb 0%,#bdbdbd 100%); /* IE10+ */
    background: linear-gradient(to bottom, #fbfbfb 0%,#bdbdbd 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fbfbfb', endColorstr='#bdbdbd',GradientType=0 ); /* IE6-9 */

    color: #6b6b6b;
    font-size: 10px;
    padding: 2px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T21:44:54.423

You could wrap the `ul` in a `div` like below and just add `display:inline-block;` to the "test" class.

```
 <select name="my_select1"><option value="1">1</option><option value="2">2</option></select>
 <div class="test">
    <ul class="segmentedControl">
      <li class="selected">1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
    </ul>
 </div>
 <select name="my_slect2"><option value="1">1</option><option value="2">2</option></select> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T17:07:02.210

`UL`默认情况下仍然是块级元素。您可能想要覆盖它。

# android - Android：使用意图启动新活动时找不到活动

> ID：15769990
> 
> 赞同：0
> 
> 时间：2013-04-02T17:03:09.300
> 
> 标签：android

我正在尝试从现有活动中启动一个新活动，但是我得到一个活动未找到异常。

这是我的代码的精简版本和 logcat 错误。任何帮助将非常感激。

主要活动

```
public class MainActivity extends FragmentActivity {

/* (non-Javadoc)
 * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        
    startActivity(new Intent(this, TermsAndConditions.class));
}
....

} 
```

新活动

```
public class TermsAndConditions extends Activity{

    /* (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.terms_and_conditions);

    }
} 
```

安卓清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:screenOrientation="sensorLandscape">
        <activity
            android:name=".MainActivity"
            android:screenOrientation="landscape" 
            android:configChanges="keyboardHidden|orientation"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:label="@string/app_name" android:name=".TermsAndConditions"></activity>

    </application>
</manifest> 
```

日志猫

```
04-02 16:48:43.255: E/AndroidRuntime(20856): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.app/com.example.app.MainActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.app/com.example.app.TermsAndConditions}; have you declared this activity in your AndroidManifest.xml? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:07:40.280

```
<activity android:label="@string/app_name" android:name="com.example.app.TermsAndConditions"></activity> 
```

和`clean`你的项目，

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:53:22.907

问题是，您已经告诉主要活动发送意图，但您没有告诉条款和条件活动接收意图。您可以在 Ts 和 Cs 页面的 onCreate 方法中执行此`getIntent()`操作`setContentView`

# java - 使用 POST 将图像上传到服务器

> ID：15769998
> 
> 赞同：0
> 
> 时间：2013-04-02T17:03:38.300
> 
> 标签：java, post, jax-rs, multipartform-data

我知道网站上有一些与此类似的问题，并且我已经阅读了其中的大部分。我也用谷歌搜索了一个解决方案，但仍然有问题。

因此，在我的项目中，我需要捕获用于从客户端发送混合数据（图像、两个字符串（公司、类型）、日期数据（月、年）和一些整数）的多部分发布请求。收到此请求后，我需要更改图像的对比度和亮度，并将颜色修改为灰色调。

对于调试，我使用 Postman Chrome 扩展程序，现在我只专注于发送图像。我已经测试了以不同方式发送请求，其中一半我收到“404 Not Found”错误，另一半返回错误数据（主要是 0 数组）。以下是我的资源方法中使用的代码：

```
@Component
@Path("/code")
@Produces("application/json")
public class EncodeResource extends BasicResource {
    @POST
    @Path("/encode")
    @Consumes("multipart/form-data")
    public String encodeImage(
            @FormDataParam("image") InputStream imageInputStream) {
        BufferedImage imageBuffer = null;
        try {
            imageBuffer = ImageIO.read(imageInputStream);
        } catch (IOException e) {
            e.printStackTrace();
        }
        if (imageBuffer != null)
            return okResponse(<some parameters>);
        else
            return errorResponse(<some parameters>);
    }
} 
```

ImageInputStream 包含一些字节数组，但 ImageIO.read() 总是返回*null*。我尝试了具有不同扩展名的不同图像（默认情况下 imageio 可以读取，检查它），但得到了相同的结果。我认为，这是因为我的 inputStream 中有一些“不必要的”信息，因此 imageio.read() 无法将其转换为任何类型的图像。我突然发现它，当将 InputStream 更改为 File 时：

```
@FormDataParam("image") File imageInputStream 
```

...然后检查由tomcat .tmp 文件保存。它看起来像这样：

> ------WebKitFormBoundary4nC1XD4cevbbRh7A
> 
> 内容处置：表单数据；名称=“图像”；文件名="1.jpg">
> 
> 内容类型：图片/jpeg
> 
> （很多字节）
> 
> ------WebKitFormBoundary4nC1XD4cevbbRh7A--

当然 imageio.read() 返回了*null*。

总结所有这些，我实际上有两个问题：

1.  为什么我会收到 404 错误，我该如何解决？例如，我试过[这个](http://www.mkyong.com/webservices/jax-rs/file-upload-example-in-resteasy/)并喜欢[这里](https://stackoverflow.com/questions/15271573/consuming-a-multipart-form-data-via-restful-cxf)。而且我必须从[这里](http://puspendu.wordpress.com/2012/08/23/restful-webservice-file-upload-with-jersey/)删除第二个@FormDataParam才能收到至少一些东西。这可能是邮递员“特定”表单数据请求的原因吗？
2.  为什么我得到了错误的数据？也许我可以解析收到的文件并获得“正确”的字节数组？或者是其他东西？..