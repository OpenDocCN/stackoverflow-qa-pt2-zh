# StackOverflow 问答 14002000-14002999

# matlab - Matlab中具有循环填充的中值滤波器

> ID：14002004
> 
> 赞同：3
> 
> 时间：2012-12-22T10:24:10.260
> 
> 标签：matlab, image-processing

```
%This routine performs median filtering on an image.
% 
% Input:       im - a grayscale image (values in [0,255]) 
%    winSize - a 1x2 vector describing the size (height,width) of thefiltering window. 
% Output:     nim - a grayscale image (values in [0,255]) which is the median filtered im.   
%             Image nim is of the same size as im.
% 
% Method:  Performs Median Filtering on image im in windows of size winSize. Assume the 
%                     window origin is at floor(size(B)/2)+1\. Assume cyclic-padding. 
```

所以这是我在图像处理中给出的练习的定义，这是我的解决方案：

```
function [ nim ] = medianFilt( im,winSize )
nim = im;
temp = cat(2,[im ;im(1:winSize(1)-1,:)],[ im(:,1:winSize(2)-1); im(1:winSize(1)-1,1:winSize(2)-1)])

for i = 1:size(im,1);
    for j = 1:size(im,2);
        winSizeMatrix = temp(i:i+winSize(1)-1,j:j+winSize(2)-1);
        winSizeVector = reshape(winSizeMatrix,[],1);
        medianOfVector = median(double(winSizeVector));
        nim(i,j) = medianOfVector;
    end
end

end 
```

我得到了一个平滑图片的结果 - 我正在使用盐和胡椒过滤器，但最后一个像素看起来像是从第一个像素复制的，而不是固定过滤器。他们是我的输出应该的方式吗？还是我错过了什么？

也有人可以解释一下为什么我需要假设窗口原点在地板（大小（im/2）+1）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:10:04.113

```
function [ nim ] = medianFilt( im,winSize )
%This routine performs median filtering on an image.
% 
% Input:       im - a grayscale image (values in [0,255]) 
%                       winSize - a 1x2 vector describing the size (height,width) of the filtering window. 
% Output:     nim - a grayscale image (values in [0,255]) which is the median filtered im. 
%                       Image nim is of the same size as im.
% 
% Method:  Performs Median Filtering on image im in windows of size winSize. Assume the 
%                     window origin is at floor(size(B)/2)+1\. Assume cyclic-padding.
nim = im;
%temp = cat(2,[im ;im(1:winSize(1)-1,:)],[ im(:,1:winSize(2)-1);     im(1:winSize(1)-1,1:winSize(2)-1)]);
paddedIm = padarray(im, [floor(winSize(1)/2) floor(winSize(2)/2)],'circular');

for i = 1:size(im,1);
    for j = 1:size(im,2);
        startAi = i; % start point of window in padded array A to convolve with mask
        finishAi = i + winSize(1) - 1; % start point of  window in padded array A to convolve with mask
        startAj = j; %end point of window in padded array A to convolve with mask
        finishAj = j + winSize(2) - 1; %end point of window in padded array A to convolve with mask
        % create vector out of the window to multiply with vector of mask
        vectPaddedA = reshape(paddedIm(startAi :finishAi,startAj:finishAj)',1,[]);
        medianOfVector = median(double(vectPaddedA));
        nim(i,j) = medianOfVector;
    end
end

end 
```

这是我对您的问题的解决方案。
您误解了遮罩的中心在地板（大小（遮罩，1）/ 2）中，您已将其计算为左上角（1,1）。

因此，填充需要在图像周围循环，而不仅仅是在下边缘和右边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:09:58.417

您的填充错误 - 您只在图像的末尾（两个轴）添加了填充，但没有在开头添加。

窗口原点表示在每个步骤中将过滤器的输出放在哪里。如果它不在窗口中心，则整个输出图像将被移动。在这种情况下，它不是很重要，但在更复杂的方法中，它可以产生不同的输出。

# subscription - 使用 Recurly 快速测试定期/订阅计费

> ID：14002009
> 
> 赞同：2
> 
> 时间：2012-12-22T10:24:44.667
> 
> 标签：subscription, billing, recurring-billing, recurly

**简短的问题**：如何在 Recurly 中快速模拟/测试流程，而不必等待 24 小时看看会发生什么？

**详细信息**：我的后端开发人员正在设置 Recurly 来处理我们产品的订阅计费，我们正在尝试模拟当我们的客户完成我们的流程时会发生什么：

1.  以 A 价格开始计划 1
2.  以价格 B 自动移至计划 2

这就是基础知识，如果客户带来更多新客户，推荐奖金之类的排列会推迟客户的下一个发票日期。例如，我们将为每位通过推荐链接注册的新客户提供 4 周的免费服务。

底线是这样的：我们需要能够只按下一个神奇的按钮并模拟时间飞逝，这样我们就可以准确地看到当客户的帐户从计划 1 转到计划 2 时会发生什么，而无需等待 24 小时来查看那里的错误可能是......把它想象成将你的系统时钟向前滚动 59 分钟，这样你就可以看到在第 60 分钟发生了什么。

熟悉 Recurly 的人以前做过这个吗？我知道我可以要求客户支持，但我想要一个 Stack 的答案（无论如何他们通常会更好），而且我正试图作为新来的孩子获得积分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:33:17.053

最简单的是使用他们的 API。使用您的计划创建新订阅，但将 first_renewal_date 和/或 trial_ends_at 设置为下一分钟左右。您还可以尝试更新现有订阅并将时间范围设置为“现在”。

API 文档： [http ://docs.recurly.com/api/subscriptions](http://docs.recurly.com/api/subscriptions)

使用他们的客户端库之一（用于 PHP、Ruby、Python 或 .NET）： [http ://docs.recurly.com/client-libraries/net](http://docs.recurly.com/client-libraries/net)

不要忘记使用您的测试帐户，以免您的生产帐户填满测试订阅。

# php - PHP：数组函数

> ID：14002010
> 
> 赞同：0
> 
> 时间：2012-12-22T10:25:07.870
> 
> 标签：php

我的页面上有一个选择菜单，其中列出了数组中的以下系统字体：

```
$default = array(
    'Arial'             => 'Arial',
    'Courier'           => 'Courier New',
    'Georgia'           => 'Georgia',
    'Helvetica'         => 'Helvetica',
    'Impact'            => 'Impact',
    'Palatino'          => 'Palatino',
    'Tahoma'            => 'Tahoma, Geneva',    
    'Times'             => 'Times New Roman',
    'Verdana'           => 'Verdana, Geneva'
); 
```

当用户从下拉/选择菜单中选择其中一种字体时，字体将输出到我网站的 CSS 头部部分，如下所示：

```
p {font: 12px Arial;} 
```

这工作得很好，但我希望做的是改变 CSS 也输出后备：

```
p {font: 12px Arial, san-serif;} 
```

由于我对 PHP 还很陌生，因此使用逗号和像下面的脚本这样的后备将不起作用，我想知道如何向数组添加另一种字体或后备？

```
$default = array(
    'Arial, sans-serif'             => 'Arial',
    'Courier New, monospace'        => 'Courier New',
    'Georgia, serif'                => 'Georgia',
    'Helvetica, sans-serif'         => 'Helvetica',
    'Impact, sans-serif'            => 'Impact',
    'Palatino, serif'               => 'Palatino',
    'Times New Roman, serif'        => 'Times New Roman',
    'Verdana, Geneva, sans-serif'   => 'Verdana, Geneva'
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:54:03.473

在您的选项面板中，使用以下代码：

```
// This is the value you retrieve from your database.
// Change it according to your code needs
$current_font_family = $db_options_result['font_family'];

$default = array(
    'Arial, sans-serif'             => 'Arial',
    'Courier New, monospace'        => 'Courier New',
    'Georgia, serif'                => 'Georgia',
    'Helvetica, sans-serif'         => 'Helvetica',
    'Impact, sans-serif'            => 'Impact',
    'Palatino, serif'               => 'Palatino',
    'Times New Roman, serif'        => 'Times New Roman',
    'Verdana, Geneva, sans-serif'   => 'Verdana, Geneva'
);

?>
<!-- Change the attributes of the select element according to your -->
<!-- code needs -->
<select name="fontFamily">
<?php
    foreach($default as $font_k => $font_v)
    {
?>
<!-- Remember to change the $current_font_family to your script variable name -->
<option value="<?php echo $font_k; ?>"<?php echo ($current_font_family == $font_k ? ' selected="selected"' : ''); ?>><?php echo $font_v; ?></option>
<?php
    }
?>
</select> 
```

以上将在您的管理面板中生成一个`HTML`select 元素，如下所示：

```
<select name="fontFamily">
    <option value="Arial, sans-serif">Arial</option>
    <option value="Courier New, monospace">Courier New</option>
    <option value="Georgia, serif">Georgia</option>
    <option value="Helvetica, sans-serif">Helvetica</option>
    <option value="Impact, sans-serif">Impact</option>
    <option value="Palatino, serif">Palatino</option>
    <option value="Times New Roman, serif">Times New Roman</option>
    <option value="Verdana, Geneva, sans-serif">Verdana, Geneva</option>
</select> 
```

然后在您`CSS`使用以下代码：

```
<?php
    // This is the value you retrive from your database.
    // Change it according to your code needs

    $current_font_family = $db_options_result['font_family'];
?>
p {font: 12px <?php echo $current_font_family; ?>;} 
```

最后，如果您使用`PHP`文件作为`CSS`动态内容的文件，请不要忘记在文件的最顶部添加此代码：

```
<?php
    header('Content-Type: text/css');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:33:32.043

也许你应该交换值的键，它会做你想做的，像这样：

```
$default = array(
    'Arial'             =>    'Arial, sans-serif',
    'Courier New'       =>    'Courier New, monospace',
   ...
); 
```

这应该可以解决问题。您通常按索引搜索数组并返回值。因此搜索 $default['Arial'] 将产生“Arial, sans-serif”。我希望这是你想要的。

# api - BounCycastle Lightweight API. What exactly it is?

> ID：14002013
> 
> 赞同：1
> 
> 时间：2012-12-22T10:25:52.220
> 
> 标签：api, bouncycastle

I don't quite understand, what exactly is Lightweight API and how to use it.

1.  Is there a compiled jar anywhere? I can download source code only.
2.  They say "From 1.47, the version 2 APIs are in the pcpkix packages"

e.g. a piece of code

```
 Store certs = new JcaCertStore(certList);
        AlgorithmIdentifier sigAlgId = new DefaultSignatureAlgorithmIdentifierFinder().find(algorithmName);
        AlgorithmIdentifier digAlgId = new DefaultDigestAlgorithmIdentifierFinder().find(sigAlgId);

        ContentSigner sigGen = new BcRSAContentSignerBuilder(sigAlgId, digAlgId).build(toRSAPrivateKey(pKey));
        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();

        X509CertificateHolder certHolder = new X509CertificateHolder(cert.getEncoded());
        gen.addSignerInfoGenerator(new SignerInfoGeneratorBuilder(new BcDigestCalculatorProvider()).setDirectSignature(true).build(sigGen, certHolder));
        gen.addCertificates(certs);
        .....
        ByteArrayOutputStream bOut = new ByteArrayOutputStream();

        DEROutputStream dOut = new DEROutputStream(bOut);
        dOut.writeObject(s.toASN1Structure().toASN1Primitive());
        dOut.close(); 
```

Store, AlgorithmIdentifier, DEROutputStream are in bcprovider (or lcrypto) jar. BcDigestCalculatorProvider, BcRSAContentSignerBuilder are in pcpix jar.

AlgorithmIdentifier, Store etc are not a part of lightweight API?

3.In order to use Lightweight API do I have to use several jars or is there all-in-1 jar ?

# php - 如果满足 if 语句，登录页面上的 if 语句将无法继续

> ID：14002017
> 
> 赞同：0
> 
> 时间：2012-12-22T10:26:27.677
> 
> 标签：php, if-statement, login, bcrypt

我目前对以下 php 代码有疑问：

```
if ($result['username'] == $_POST["name"]) {
        $bcrypt = new Bcrypt(10);
        $password = $_POST["password"];
        $hashdb = $result['password'];

        $hash = $bcrypt->hash($password);
        $isGood = $bcrypt->verify($password, $hashdb);

        if ($isGood == 1) {

            if($result['active'] == 1) {

                $_SESSION["login"] = $result['firstname']." ".$result['lastname'];
                $_SESSION["functionlevel"] = $result['functionlevel'];

                header("location:startpagina.php");
            } else {
                echo 'Account blocked or not activated';
            }

        } else {
            echo 'Password not correct';
        }

}  else {
    echo 'Username not correct';
} 
```

我正在使用[Andrew Moore bcrypt 类](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)来散列和验证密码。由于某种原因，我的 if 语句似乎失败并在第二个`if`语句之后突然停止。如果此失败，则显示密码不正确选项。但如果它是真的它不会继续到第三`if`。

我在第二个中尝试了不同的选项，`if`例如：

`if ($isGood){`

`if ($isGood == true){`

`if ($isGood !== false){`

`if ($isGood !== 0){`

但不知何故，如果满足该声明，这些似乎都不会继续。它只是再次显示登录页面，而不是继续`startpagina.php`。登录页面在没有 bcrypt 实现的情况下运行良好，并且只需检查两个 md5 哈希值。

有人可以帮我找出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:42:10.997

您的 $isGood 总是错误的 - 因为您没有正确验证哈希。

改变

```
 $hash = $bcrypt->hash($password);
    $isGood = $bcrypt->verify($password, $hashdb); 
```

至

```
 $hash = $bcrypt->hash($_POST["password"]);
    $isGood = $bcrypt->verify($hashdb, $hash); 
```

我就是这样写的

```
if ($result['username'] == $_POST["name"]) {
        $bcrypt = new Bcrypt(10);

        if ($bcrypt->verify($result['password'], $bcrypt->hash($_POST["password"]))) {

            if($result['active']) {

                $_SESSION["login"] = $result['firstname']." ".$result['lastname'];
                $_SESSION["functionlevel"] = $result['functionlevel'];

                header("location:startpagina.php");
                exit();
            } else {
                echo 'Account blocked or not activated';
            }
        } else {
            echo 'Password not correct';
        }

}  else {
    echo 'Username not correct';
} 
```

# android - Android SQLite 关闭异常

> ID：14002022
> 
> 赞同：12
> 
> 时间：2012-12-22T10:27:18.970
> 
> 标签：android, android-sqlite

我没有扎实的同步背景。*我认为当我使用同步*方法时这个问题将得到解决。但是谁能帮我解决这个问题？代码如下：

```
public HashMap<String, FriendInfo> getAllRecordsInList_HashMap() {

        MySQLiteHelper dbHelper = MySQLiteHelper.getInstance(mActivity);
        HashMap<String, FriendInfo> list_map = new HashMap<String, FriendInfo>();

        SQLiteDatabase db = dbHelper.getReadableDatabase();
        // Cursor cursor = db.rawQuery("SELECT * from " +
        // dbHelper.tbl_friendlist, new String[] {});
        String[] cols = { dbHelper.id, dbHelper.name, dbHelper.picture, dbHelper.birthday, dbHelper.livein, dbHelper.gender, dbHelper.is_online, dbHelper.is_vip };
        Cursor cursor = db.query(dbHelper.tbl_friendlist, cols, null, null, null, null, dbHelper.name);

        if (cursor != null && cursor.getCount() > 0) {

            // some code here....
        }
        cursor.close();
        return list_map;
    } 
```

不同的线程可以调用这个方法`getAllRecordsInList_HashMap()`。如果我使用同步方法，请告知如何解决此问题。会修复吗？

```
java.lang.IllegalStateException: Cannot perform this operation 
    because the connection pool has been closed. 

at android.database.sqlite.SQLiteConnectionPool.throwIfClosedLocked(SQLiteConnectionPool.java:962) 
at android.database.sqlite.SQLiteConnectionPool.waitForConnection(SQLiteConnectionPool.java:599) 
at android.database.sqlite.SQLiteConnectionPool.acquireConnection(SQLiteConnectionPool.java:348) 
at android.database.sqlite.SQLiteSession.acquireConnection(SQLiteSession.java:894) 
at android.database.sqlite.SQLiteSession.executeForCursorWindow(SQLiteSession.java:834) 
at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:62) 
at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:143) 
at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133) 
at com.platinumapps.friendlist.BLL_Friendlist.getAllRecordsInList_HashMap(BLL_Friendlist.java:290) 
at com.platinumapps.activities.Messages_Activity.addViewTOLayout(Messages_Activity.java:753) 
at com.platinumapps.activities.Messages_Activity.access$3(Messages_Activity.java:744) 
at com.platinumapps.activities.Messages_Activity$1$3.run(Messages_Activity.java:141) 
at ndroid.app.Activity.runOnUiThread(Activity.java:4644) 
at com.platinumapps.activities.Messages_Activity$1.onReceive(Messages_Activity.java:136) 
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:758) 
at android.os.Handler.handleCallback(Handler.java:725) 
at android.os.Handler.dispatchMessage(Handler.java:92) 
at android.os.Looper.loop(Looper.java:137) 
at android.app.ActivityThread.main(ActivityThread.java:5039) 
at java.lang.reflect.Method.invokeNative(Native Method) 
at java.lang.reflect.Method.invoke(Method.java:511) 
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-08-19T08:41:15.383

根据[Dianne Hackborn](https://groups.google.com/forum/#!msg/android-developers/NwDRpHUXt0U/jIam4Q8-cqQJ)（Android 框架工程师）的说法，没有必要在内容提供者中关闭数据库

> 内容提供程序在其托管进程创建时创建，并且只要该进程存在就一直存在，因此无需关闭数据库，它将作为内核的一部分在进程被清理时关闭进程的资源被杀。

所以没有必要**关闭**数据库。不需要时会自动关闭。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-22T11:05:50.017

您不应该关闭数据库，因为它将在下一次调用中再次使用。所以尝试删除

```
db.close(); 
```

从你的代码。

# java - 如何删除 , 并 通过解析 JSON 响应获得

> ID：14002024
> 
> 赞同：0
> 
> 时间：2012-12-22T10:27:23.357
> 
> 标签：java, android

我从服务器解析 json 响应得到 JSON 响应我得到了包含的内容`<p> </p>`以及`<br />`如何用空白或空白替换所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:28:34.813

您可以使用该`replace`功能吗？还是太容易了。。

例如：

```
json = json.replace("<br />", " ");
json = json.replace("<p>", " ");
json = json.replace("</p>", " "); 
```

我不知道你的 json 在这个替换之前是什么样子的。但是，您当然有可能拥有`&lt;br /&gt;`而不是`<br />`. 在这种情况下，您当然必须更改替换标签。

您也可能不得不使用正则表达式。我真的不知道这是如何完成的，但你可以谷歌这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:09:43.987

试试这个，它会解决你的问题。

```
String str = "<p>Your String</p>";
Spanned sp = Html.fromHtml(str); 
```

有关更多信息，请参见下面的链接。

[如何在格式化字符串中保留 HTML](http://blog.andromo.com/2011/how-to-preserve-html-in-formatted-strings/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:29:35.323

尝试`mystring.replace("<b>", "");`

此外，您可以替换`<br />`为`\n`.

# c++ - 为什么下面的代码会崩溃？

> ID：14002026
> 
> 赞同：9
> 
> 时间：2012-12-22T10:27:35.133
> 
> 标签：c++, list, crash

这只是创建一些列表元素，然后在开始通过反向迭代接近它时删除一个元素。它是代码实际问题的复制品，该代码在反向遍历元素时删除元素。

```
#include <list>

int main()
{
  std::list< int > lst;

  for ( int c = 33; c--; )
    lst.push_back( 0 );

  int count = 0;
  for ( std::list< int >::reverse_iterator i = lst.rbegin(), e = lst.rend();
        i != e; )
  {
    switch( count++ )
    {
      case 32:
      case 33:
        ++i;
        i = std::list< int >::reverse_iterator( lst.erase( i.base() ) );
      break;
      default:
        ++i;
    }
  }

  return 0;
} 
```

运行时，它会崩溃：

```
*** glibc detected *** ./a.out: double free or corruption (out): 0x00007fff7f98c230 *** 
```

当使用 valgrind 运行时，它会说：

```
==11113== Invalid free() / delete / delete[] / realloc()
==11113==    at 0x4C279DC: operator delete(void*) (vg_replace_malloc.c:457)
==11113==    by 0x40104D: __gnu_cxx::new_allocator<std::_List_node<int>     >::deallocate(std::_List_node<int>*, unsigned long) (in /tmp/a.out)
==11113==    by 0x400F47: std::_List_base<int, std::allocator<int>   >::_M_put_node(std::_List_node<int>*) (in /tmp/a.out)
==11113==    by 0x400E50: std::list<int, std::allocator<int> >::_M_erase(std::_List_iterator<int>) (in /tmp/a.out)
==11113==    by 0x400BB6: std::list<int, std::allocator<int> >::erase(std::_List_iterator<int>) (in /tmp/a.out)
==11113==    by 0x40095A: main (in /tmp/a.out) 
```

编译器：

```
$ g++ --version
g++ (Debian 4.7.1-7) 4.7.1 
```

拱：

```
$ uname -a
Linux hostname 3.2.0-2-amd64 #1 SMP Mon Apr 30 05:20:23 UTC 2012 x86_64 GNU/Linux 
```

你认为这是一个错误，还是我在这里做错了什么？

ps 如果你删除`case 33`（这永远不会发生），这将变成一个无限循环而不是崩溃。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T10:33:26.080

好的，所以我拿出笔和纸，现在我认为这*与*您的`e`迭代器无效有关。请记住，反向迭代器包含一个普通迭代器，指向容器中的下一个元素，即它的*基迭代器*。也就是说，当你有`rbegin()`指向最后一个元素的迭代器时，它的内部迭代器指向过去的元素。同样，当你有一个`rend()`指向前一个迭代器（反向迭代器可以指向的虚构元素）的迭代器时，它的内部迭代器指向第一个元素。

所以你的列表看起来像这样（BTB = 开始之前，PTE = 结束之后）：

```
BTB | 0 | 0 | ... | 0 | 0 | PTE
 ^    :                 ^    :
 |----'                 |----'
 e                      i 
```

虚线显示*基本迭代器*指向的位置。

现在，在第一次迭代中，您指向最后一个元素（反向第一个）并且`count`为 0，因为您执行后缀增量。因此，当开关与 匹配时`32`，您将指向列表中的第一个元素（反向第 33 个）。

好的，所以现在我们处于这种状态：

```
BTB | 0 | 0 | ... | 0 | 0 | PTE
 ^    ^   :
 |----|---'
 e    i 
```

然后执行以下代码：

```
++i;
i = std::list< int >::reverse_iterator( lst.erase( i.base() ) ); 
```

第一行让我们处于这种状态：

```
BTB | 0 | 0 | ... | 0 | 0 | PTE
 ^    :
 |----'
 i
 e 
```

然后你擦除基迭代器指向的元素并设置你的反向迭代器，以便它的基现在指向被擦除元素*之后的元素。*现在我们有：

```
 BTB | 0 | ... | 0 | 0 | PTE
 ^   ^    :
 |---|----'
 e   i 
```

不过现在`e`已经作废了。它的 base 不再指向列表的第一个元素，它指向一个无效元素。

现在，您的循环应该停止，因为`i`在最后，但它不会。它将继续另一次，首先使用`count`as ：`33``i++`

```
 BTB | 0 | ... | 0 | 0 | PTE
 ^   :
 |---'
 i   
 e 
```

然后试图擦除基地。哦亲爱的！基地没有指向一个有效的元素，我们得到了崩溃。事实上，我认为一旦你迭代得太远，你就已经遇到了未定义的行为。

**解决方案**

修复它的方法是`rend()`每次迭代时获取：

```
for ( std::list< int >::reverse_iterator i = lst.rbegin();
      i != lst.rend(); ) 
```

或者，`e`每当您删除元素时更新：

```
++i;
i = std::list< int >::reverse_iterator( lst.erase( i.base() ) );
e = lst.rend(); 
```

* * *

现在，我之前的回答是交换增量和擦除，这很有效，但为什么呢？好吧，让我们回到重要的点（为了在接下来的几个步骤中清晰起见，我添加了另一个元素）：

```
BTB | 0 | 0 | 0 | ... | 0 | 0 | PTE
 ^    ^   :
 |----|---'
 e    i 
```

所以现在我们*先擦除基础*，给我们这个：

```
BTB | 0 |     0 | ... | 0 | 0 | PTE
 ^    ^       :
 |----|-------'
 e    i 
```

然后我们增加`i`：

```
BTB | 0 |     0 | ... | 0 | 0 | PTE
 ^    :
 |----'
 i
 e 
```

然后`i == e`我们结束循环。因此，尽管这*确实*有效，但它并不能满足您的要求。它只删除第二个元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T11:05:40.480

错误是`e`无效，您应该直接比较`lst.rend()`. 为什么会失效？好吧，让我们看一下`rend()`( `§23.2.1.9`) 的定义：`reverse_iterator(begin())`。

所以构造`rend()`取决于`begin()`指向第一个元素的迭代器，你实际上用`case 32`. 因此，因为该操作使其失效`begin()`，它很可能也会失效`rend()`，这取决于它是如何实现的，这显然发生在这个版本的`libstdc++`.

让它崩溃也是有道理的`case 33`，这一次迭代器将指向不再在列表中的东西。删除它当然会无限循环，因为`e`它是无效的并且你的停止条件不会命中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T10:43:04.177

当你擦除元素时，`e`是无效的！您必须`e`在缓动后更新：

```
i = std::list< int >::reverse_iterator( lst.erase( i.base() ) );
e = lst.rend(); // update e 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T12:38:42.030

这应该工作 -

```
 #include <list>
    #include <iostream>

    int main()
    {
    std::list< int > list;
    for ( int c = 33; c--; )
    list.push_back( 0 );

    std::list<int>::reverse_iterator it = list.rbegin();
    int count = 0;
    while(  it != list.rend() )
    {

    switch( count++ )
    {
     case 32:
     case 33:
     std::cout<<*it<<std::endl;
     it = std::list< int >::reverse_iterator( list.erase((++it).base()));
     std::cout<<list.size()<<std::endl;
     break;
     default:

    ++it;
    }
   }
  return 0;} 
```

# java - HashMap 中的重复键

> ID：14002027
> 
> 赞同：0
> 
> 时间：2012-12-22T10:27:36.880
> 
> 标签：java, hashmap, keyset

我的 HashMaps 有一个奇怪的情况。在遍历 HashMap 的 keySet() 时，我得到了重复的值。在尝试获取值时，我得到了 NULL。

这是我的 HashMap 实现：

```
 import java.util.ArrayList;
    import java.util.HashMap;

    public class StreetsMap extends HashMap<String, ArrayList<String[]>> {
        public void put(String key, String[] data) {
            ArrayList<String[]> current = get(key);
            if (current == null) {
                current = new ArrayList<String[]>();
                super.put(key, current);
            }
            current.add(data);
        }
    } 
```

从 CSV 文件中读取行时，我正在用值填充 HashMap。
我在 CSV 中有这样的内容（原始列表更长）：

### Location_Code、Street_Name、开始、结束、奇偶

```
01001, JustAStreet ST, 1, 11, odd
01001, JustAStreet ST, 17, 47, odd
... more of this
01001, JustAStreet ST, 2, 30, even
01001, JustAStreet ST, 40, 80, even
01001, AnotherStreet ST, 3, 27, odd
01001, AnotherStreet ST, 9, 51, odd
... and even more
01001, AnotherStreet ST, 0, 50, even
01001, AnotherStreet ST, 2, 14, even
01001, AnotherStreet ST, 0, 100, even 
```

我用逗号分隔一行，修剪值并用数据填充 HashMap：

```
 String[] lines = inputText.split("\n");

    StreetsMap streetsData = new StreetsMap(); // 

    for (String line : lines) {
        String[] newLine = line.split(",");

        String[] streetData = new String[4];

        streetData[0] = newLine[0].trim();  // Location code
        streetData[1] = newLine[2].trim();  // Start
        streetData[2] = newLine[3].trim();  // End
        streetData[3] = newLine[4].trim();  // OddEven

        streetsData.put(newLine[1].trim(), streetData); 
```

问题就从这里开始。如果我遍历 keySet()：

```
 for (String name : streetsData.keySet()) {
        System.out.println(name);
    } 
```

我有类似的东西：

*   贾斯特街
*   另一条街
*   另一条街
*   贾斯特街
*   贾斯特街

当我尝试在通过 HashMap 迭代期间使用 .get(key) 方法访问数据时，有时我会得到空值。所以我正在失去价值。:(

我的问题是：在 HashMap 中有重复的键怎么可能是真实的？我做错了什么。

**UPD：密钥是唯一的。在另一个班级发现问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:08:17.620

> 在 HashMap 中有一个重复的键怎么可能是真实的？我做错了什么。

很可能字符串不完全相同。例如`AStreet`，`AStreet{space}`看起来相同，但事实并非如此。更糟糕的是，有些字符没有宽度；）

我建议您打印`Array.toString(text.getBytes())`每个键以查看它们包含哪些字节。

* * *

如果在将密钥添加到地图后修改密钥，您可以获得重复的密钥（您无法获得）。如果添加后密钥的哈希码发生更改，则它可能位于错误的位置。这将在您迭代时出现，但不会被视为要在 put 上替换的值，并且您不会在 get 上找到它。

简而言之，您应该注意不要更改 hashcode、equals 或 compareTo 中的任何字段使用。

# ajax - yii ajax 提交表单

> ID：14002028
> 
> 赞同：0
> 
> 时间：2012-12-22T10:27:43.810
> 
> 标签：ajax, yii

控制器：

```
public function actionCreate() {
    $model = new SiteWidget;
    if (isset($_POST['SiteWidget'])) {
        $model -> attributes = $_POST['SiteWidget'];
        if ($model -> validate()) {
            if ($model -> save())
            {
                return 'OK';
            }       
        }
    }
    $this -> render('create', array('model' => $model, ));
} 
```

看法：

```
<div class="form">  
    <?php $form=$this->beginWidget('CActiveForm', array(
        'id'=>'site-widget-form',
        'enableAjaxValidation'=>false,
        'htmlOptions'=>array(
                         'onsubmit'=>"return false;",
                         'onkeypress'=>" if(event.keyCode == 13){ send(); } "
                                 ),
    )); ?>

    <p class="note">
        Fields with <span class="required">*</span> are required.
    </p>

    <?php echo $form -> errorSummary($model); ?>

    <div class="row">
        <?php echo $form -> labelEx($model, 'title'); ?>
        <?php echo $form -> textField($model, 'title', array('size' => 60, 'maxlength' => 256)); ?>
        <?php echo $form -> error($model, 'title'); ?>
    </div>

    <div class="row">
        <?php echo $form -> labelEx($model, 'type'); 
            echo $form -> dropDownList($model, 'type',  SiteWidget::getConstants('W_', 'SiteWidget'));
            echo $form -> error($model, 'type'); ?>
    </div>
    <div class="row">
        <?php echo $form -> labelEx($model, 'status'); ?>
        <?php echo $form -> checkBox($model, 'status'); ?>
        <?php echo $form -> error($model, 'status'); ?>
    </div>
    <div class="row buttons">
        <?php echo CHtml::submitButton($model -> isNewRecord ? 'Create' : 'Save',array('onclick'=>'send();')); ?>
    </div>
    <?php $this -> endWidget(); ?>
</div>

<script language="JavaScript">
function send(){
    var data=$("#site-widget-form").serialize();

      $.ajax({
           type: 'POST',
            url: '<?php echo Yii::app()->createAbsoluteUrl("siteWidget/create"); ?>',
            data:data,
            success:function(data){
                        alert(data);
                      },
           error: function(data) {
                 alert("Error occured.please try again");
            },
          dataType:'html'
      });
}
</script> 
```

为什么ajax不起作用？我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T15:28:04.343

**解决方案：**

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'site-widget-form',
    'enableAjaxValidation'=>true,
    'htmlOptions'=>array(
                     'onsubmit'=>"return false;",
                     'onkeypress'=>" if(event.keyCode == 13){ send(); } "
                             ),
)); ?> 
```

在此处查看更多[带有验证的 ajax 提交按钮](http://www.codexamples.com/90/chtml-ajaxsubmitbutton/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T12:32:34.447

数据应该是一个 JavaScript 对象，也许 serialize() 产生问题？这是[带有工作示例的 jQuery - AJAX 文章](http://www.matw.pl/blog/2012/12/jquery-ajax):)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-06T08:34:08.403

尝试使用 Yii ajaxSubmitButton

# opencart - 在 OpenCart 的“估计运费”模块中添加链接

> ID：14002031
> 
> 赞同：0
> 
> 时间：2012-12-22T10:28:14.750
> 
> 标签：opencart

我有一个 OpenCart 商店，如果只有“从商店取货”可用，客户和最终用户可以联系公司。下面是它的外观模型。

[一只忙碌的猫 http://www.luof.co.uk/shipping.jpg](http://www.luof.co.uk/shipping.jpg)

理想情况下，如果可以交付，则尽可能不显示链接。

我尝试在管理面板中编辑运输模块，但没有所需的选项。因此，我猜我可以编辑某种形式的 PHP/TPL 文件来执行此功能？

有问题的 URL 是[http://www.luof.co.uk/shop](http://www.luof.co.uk/shop)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:39:28.870

您要查找的模板文件可以在`/catalog/view/theme/your-theme/template/checkout/cart.tpl`- 代码本身的模板实际上是用 javascript 构建的。在文件中搜索

```
if (json['shipping_method']) { 
```

代码就在那之后

# iis-7 - IIS7 启动画面显示，但个别应用程序无法访问

> ID：14002032
> 
> 赞同：0
> 
> 时间：2012-12-22T10:28:20.020
> 
> 标签：iis-7, acl

当我`http://myservername`在浏览器地址栏中键入内容时，会显示 IIS7 启动画面。默认网站是可操作的。但是，当我创建一个物理路径为 的虚拟目录时`inetpub/wwwroot/myappfolder`，转换为应用程序为其选择一个应用程序池（4.x）并启用匿名身份验证（使用应用程序池标识），然后将文件上传到物理路径，有一个当我`http://myservername/myappname/foo.htm`在浏览器地址栏中键入时出现错误屏幕。错误的可能原因是缺少所需的权限。我已授予`inetpub/wwwroot/myappfolder`对 IIS_IUSRS 和 IUSR 的读取权限。我错过了哪些步骤？是否还需要防火墙配置才能使 Web 应用程序正常工作？Windows 服务器 2008R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T18:46:16.740

工作进程在您提到的用户的上下文中不起作用。如果您使用默认应用程序池，它将是“IIS AppPool\DefaultAppPool”。[有关详细信息，请查看本文](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)的“保护资源”部分。

# java - 是否可以更容易地检查方法是否被超类覆盖？

> ID：14002035
> 
> 赞同：1
> 
> 时间：2012-12-22T10:28:41.190
> 
> 标签：java, java-bytecode-asm

我正在尝试创建简单的 Java 混淆器，以便使用 OW2 的 ASM 在运行时修改字节码来创建它。

我的目标是重命名每个类、字段和方法名称，但我无法弄清楚如何轻松检测超类中是否存在 MethodNode

我目前正在递归循环当前类中的每个超类，并查看是否存在具有相同名称和签名的方法

```
private boolean isSuperMethod(MethodNode method, ClassNode node) {
    if(node.superName == null)
        return false;
    boolean exists = false;
    ClassNode cn = null;
    try {
        ClassReader cr = new ClassReader(node.superName);
        cn = new ClassNode();
        cr.accept(cn, 0);
    } catch (IOException e) {
        e.printStackTrace();
    }
    for(MethodNode superMethod: (List<MethodNode>)cn.methods) {
        boolean sameSignature = (superMethod.signature == null && method.signature == null) || superMethod.signature.equals(method.signature);
        if(superMethod.name.equals(method.name) && sameSignature) {
            System.out.println(superMethod.name + " exists in parent class(" + cn.name + ")");
            exists = true;
            break;
        }
    }
    return exists || isSuperMethod(method, cn);
} 
```

有没有一种更清洁或更快的方法来实现这一点，因为这似乎有点矫枉过正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T16:05:03.427

当 JVM 加载一个类时，它会将这些类的方法组织在一个所谓的方法表中。此方法表通过名称和描述符来标识每个方法。因此，您所做的是确定覆盖方法的唯一方法。（检查`Overridden`注解不是一个解决方案，因为这个注解没有保存在编译的类中，它只是作为 Java 编译器的指令。）

当您考虑在已编译后更改类的`B extends A`类时，这一点变得更加明显。如果重写了 的方法，则在重新编译后不一定仍然如此。`A``B``B``A`

然而有一件事，方法的*签名*与被覆盖的方法无关。您应该改为检查*描述符*。

# c++ - Code::Blocks 无法识别 std::thread

> ID：14002036
> 
> 赞同：1
> 
> 时间：2012-12-22T10:28:47.773
> 
> 标签：c++, compiler-construction, c++11, codeblocks

> **可能重复：**
> [Windows 上的 C++11 线程](https://stackoverflow.com/questions/6783512/c11-threading-on-windows)

标题几乎描述了它，我正在尝试使用以下代码：

```
#include <thread>
#include <iostream>

using namespace std;

void task_1(){
    cout << "Thread 1" << endl;
}

int main(){
    thread task(task_1);
    task.join();
    return 1;
} 
```

但它给出了编译器错误

> D:\dev\cpp\trash\thread.cpp|11|错误：“线程”未声明此范围|

我正在使用带有 GNU GCC 编译器的 Code:Blocks 10.05，带有选项 -std=c++0x

Code:Blocks 是最近才下载的，所以我猜想一切都应该是最新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:40:08.543

您显示的错误是编译器错误，因此链接器选项不会产生任何影响。您需要确保正确配置编译器以支持 C++11 功能，例如`std::thread`. 使用编译器（而不是链接器）选项`-std=c++0x`或者`-std=c++11`可能是所有必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:28:09.830

您应该知道 C++11 支持在 GCC 中仍然是非常实验性的。支持即将到来，但仍然存在一些回归。见[http://gcc.gnu.org/](http://gcc.gnu.org/)

# c# - Json图像解析

> ID：14002039
> 
> 赞同：1
> 
> 时间：2012-12-22T10:29:04.560
> 
> 标签：c#, .net, json, image

嗨，这是我想要在我的应用程序中解析图像的 Json 链接

```
http://collectionking.com/rest/view/items_in_collection.json?args=122 
```

问题在于，在解析它时会解析文本，即标题和 nid 而不是图片。任何人都可以帮助如何解析其中包含空格的对象.. 即在我的 json 中有一个名为（主图像）的图像。这是主要问题。这是我解析 Json 的代码

```
using (var wc = new WebClient()) {
    JavaScriptSerializer js = new JavaScriptSerializer();
    var result = js.Deserialize<ck[]>(wc.DownloadString("http://collectionking.com/rest/node/122.json"));
    foreach (var i in result)
    {
        lblTitle.Text = i.node_title;
        lblNid.Text = i.nid;
        imgCk.ImageUrl = i.main_image;
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:31:36.853

这是我的新答案。

使用`JavaScriptSerializer`传入的 JSON 时会出现问题，如下所示：

```
[
   {
      "node_title":"<a href=\"/item/brickell-point\">Brickell Point</a>",
      "main image":"<img typeof=\"foaf:Image\" src=\"http://collectionking.com/sites/default/files/styles/collection_list/public/BrickellPoint_front.jpg\" width=\"200\" height=\"250\" alt=\"\" />",
      "nid":"123"
   },
   {
      "node_title":"<a href=\"/item/flagler-street-bridge\">Flagler Street Bridge</a>",
      "main image":"<img typeof=\"foaf:Image\" src=\"http://collectionking.com/sites/default/files/styles/collection_list/public/FlaglerStreetBridge_Miami_River.Front_.jpg\" width=\"200\" height=\"250\" alt=\"\" />",
      "nid":"124"
   }
] 
```

**并且有一个带有空格**的图像属性......这是无法完成的，所以让我们为此使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)。

**第 1 步**- 右键单击`References`​​您的项目并选择`Manage Nuget Packages`并在“在线”选项卡中安装 JSON.NET

之后，使用以下代码：

```
// grab information
using (var wc = new WebClient()) {
    json = wc.DownloadString(url);
}

// deserialize using JSON.NET
var result = Newtonsoft.Json.JsonConvert.DeserializeObject<ck[]>(json);

// output
foreach (var i in result)
{
    lblTitle.Text = i.node_title;
    lblNid.Text = i.nid;
    imgCk.ImageUrl = i.main_image;}
} 
```

并**记住将**您的`ck`对象修改为

```
public class ck
{
    public string node_title { get; set; }
    public string nid { get; set; }

    [Newtonsoft.Json.JsonProperty(PropertyName = "main image")]
    public string main_image { get; set; }
} 
```

我们使用`JsonProperty`来**映射**我们收到的正确属性。

为了从标签中提取标题和图像，因为我不喜欢 RegEx，我使用：

```
private static string ExtractImageFromTag(string tag)
{
    int start = tag.IndexOf("src=\""),
        end = tag.IndexOf("\"", start + 6);
    return tag.Substring(start + 5, end - start - 5);
}
private static string ExtractTitleFromTag(string tag)
{
    int start = tag.IndexOf(">"),
        end = tag.IndexOf("<", start + 1);
    return tag.Substring(start + 1, end - start - 1);
} 
```

所以你可以自己使用它：

```
// output
foreach (var i in result)
{
    // for this example, let's grab the last 
    lblTitle.Text= ExtractTitleFromTag(i.node_title);
    lblNid.Text= i.nid;
    imgCk.ImageUrl= ExtractImageFromTag(i.main_image);
} 
```

现在......**您确实意识到**您`foreach`只会获得接收 JSON 的最后一个条目吗？因为你不是

你应该简单地做：

```
foreach (var i in result)
{
    i.node_title = ExtractTitleFromTag(i.node_title);
    i.main_image = ExtractImageFromTag(i.main_image);
} 
```

例如，使用 DataGrid 显示的不仅仅是一个条目。

```
myDataGrid.Source = ck; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:44:04.647

该`main_image`属性不包含图像 URL。相反，它包含一段 HTML，例如：

```
<img typeof="foaf:Image" src="http://collectionking.com/sites/default/files/styles/collection_list/public/FlaglerStreetBridge_Miami_River.Front_.jpg" width="200" height="250" alt="" /> 
```

您可以使用正则表达式来提取 URL（这不是万无一失的，但在大多数情况下可能会起作用）：

```
string imageUrl = null;
string htmlPiece = i.main_image;
Match m = Regex.Match(htmlPiece, "src=\"[^\"]+\"");
if (m.Success)
  imageUrl = m.Value.Substring(5, m.Value.Length - 6); 
```

# c# - 播放嵌入的资源 mp3 文件

> ID：14002046
> 
> 赞同：1
> 
> 时间：2012-12-22T10:29:59.830
> 
> 标签：c#, winforms, mp3, embedded-resource

我正在尝试播放嵌入在我的 c# 应用程序（winforms）中但没有结果的 mp3 文件。我不想从资源创建文件并播放它。我搜索了互联网，但没有找到任何工作示例。他们都从资源中创建文件并保存，然后将文件路径传递给 mci 或 wmp。是否可以通过流？

```
public partial class Form1 : Form
{
    [DllImport("winmm.dll")]
    private static extern long mciSendString(string lpstrCommand, StringBuilder lpstrReturnString, int uReturnLength, int hwndCallback);
    public Form1()
    {
        InitializeComponent();
        Stream fileStream = Assembly.GetExecutingAssembly().GetManifestResourceStream("mymp3.mp3");
        string command = "open" + fileStream not filePath + "type MPEGVideo alias MyMp3";
        mciSendString(command, null, 0, 0);
        command = "play MyMp3";
        mciSendString(command, null, 0, 0);
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:55:10.353

您需要将 MP3 转换为可播放的格式。您已经有了 MP3 流，因此您可以使用 NAudio 之类的东西来转换为 WAV 流。完成此操作后，您可以使用 SoundPlayer 类。你会得到类似下面的东西。

```
using (Mp3FileReader reader = new Mp3FileReader(fileStream)) {  
    using (WaveStream pcmStream = WaveFormatConversionStream.CreatePcmStream(reader)) {   
        SoundPlayer player = new SoundPlayer(pcmStream);  
        player.Play();  
} } } 
```

# android - 谷歌图像在android中按图像搜索

> ID：14002048
> 
> 赞同：4
> 
> 时间：2012-12-22T10:30:21.907
> 
> 标签：android, google-image-search

android中是否有任何API可以通过从我的android应用程序上传图像来从google搜索图像？

例如，我们通过在 google 上上传来搜索图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:15:15.797

您可以使用 google goggle 的 API 通过搜索而不是关键字来搜索图像。

这是一些链接..

[链接 1](http://notanothercodeblog.blogspot.in/2011/02/google-goggles-api.html)

[所有谷歌 API](https://code.google.com/apis/console/#project:596254687690:services)

[问题](https://stackoverflow.com/questions/2080731/google-goggles-api)

# java - 使用 hql 覆盖 select 子句中实体的列而不枚举所有列

> ID：14002049
> 
> 赞同：2
> 
> 时间：2012-12-22T10:30:48.680
> 
> 标签：java, spring, hibernate, hql

我想用 hql（不是 sql！）覆盖 select 子句中的实体列，而不枚举所有列。我不会把我的实体放在这里，因为它们很复杂。相反，我通过一个简单的例子来简化这个问题。

考虑我有一个 CarEntity：

```
public CarEntity{
    private Long id;
    private Integer color;
    private Long Date;
    //...

    //getters and setters
} 
```

要获得所有汽车，我执行以下 hql 请求：

```
String query = "select c from CarEntity c"; 
```

现在，我想在 hql 的 select 子句中将 Date 值替换为 0。**我怎样才能做到这一点？**

我知道我不感兴趣的 3 种可能性，因为我的实体有很多列：

1）java（不是一个好的解决方案）：

```
String hql = "select c from CarEntity c";
List<CarEntity> list = session.createQuery(hql).list();
session.close();
for (CarEntity car: list)
    car.setDate(0); 
```

2) sql：

```
String sql = "select id, 0 as date from car";
List<CarEntity> list = session.createSQLQuery(sql)
    .addScalar("id",LongType.INSTANCE)
    .addScalar("date",LongType.INSTANCE)
    .setResultTransformer(Transformers.aliasToBean(CarEntity.class))
    .list(); 
```

3) hql（在 select 子句中使用 new CarEntity）：

```
String hql = "select new CarEntity(c.id,0) from CarEntity c"; 
```

当然，在最新的情况下，我必须在 CarEntity 中添加一个新的合适的构造函数。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:56:36.450

如果您有一个与 DAO 层对话并返回 VO/DTO 但最好不返回实体本身的服务层，您可能希望以不同的方式查看问题。在这种情况下，您可以在实体中具有瞬态字段或在服务层中构建逻辑。但这又取决于您的应用程序的现有设计。

# facebook - Facebook 登录网站“发生错误。请稍后再试。” 只偶尔发生

> ID：14002062
> 
> 赞同：3
> 
> 时间：2012-12-22T10:32:27.890
> 
> 标签：facebook, authentication, login

该网站已从一个域名和服务器转移到另一个域名和服务器。当我在页面上按 fb 登录时，Facebook 登录不起作用，它说标准**发生了错误。请稍后再试。**.

我之前遇到过这样的问题，因为 App ID: 或 App Secret: 不正确。现在这不是问题，它们是正确的（双重检查）。

```
The settings in the fb account to be able to login from <mydomain>.com via fb are:
Display Name:  Some name
Namespace:  <I left it empty>
Contact Email:  support@<mydomain>.com
App Domains:   www.<mydomain>.com

Hosting URL: You have not generated a URL through one of our partners (Get one)
Sandbox Mode: Disabled

Website with Facebook Login:
Site URL:  http://www.<mydomain>.com 
```

就是这样。它不起作用（如果您没有从您试图通过 fb 登录我的网站的浏览器登录到 fb 帐户）

我刚刚切换到启用沙盒和禁用沙盒（可能需要刷新某些设置，我不知道）。

它仍然不起作用。

在多个浏览器上测试。

此外，一旦我使用我的帐户登录 FB 然后退出，它看起来就像转到 facebook 页面并建议登录，一切看起来都很好。即使我在登录 fb 后清理了 Chrome 中的缓存和 cookie（魔法），它也能正常工作。有谁知道问题是什么以及如何解决？

当然，我使用的是真实域名而不是 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T10:59:34.887

找到解决方案！让我回答我的问题。在我的情况下，**应用程序域：**两者都`www.<mydomain>.com`应该`<mydomain>.com`输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:58:33.597

1.  您是否在 Facebook 应用设置中配置了“使用 Facebook 登录的网站”？

2.  facebook 登录弹窗的 url 中的 domain/app_id 是否正确？

如果这不能解决您的问题，请在此处分享您的登录代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:29:20.940

我曾经也遇到过这个问题。在 chrome 中，您必须禁用一个插件 => facebook 断开连接

我得到了每一个薄的工作正常。

# javascript - 对 ykatz 关于 javascript 构造函数和原型的文章感到困惑

> ID：14002063
> 
> 赞同：0
> 
> 时间：2012-12-22T10:32:38.080
> 
> 标签：javascript

这个问题的灵感[来自 Yehuda Katz 的这篇文章。](http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/) 相关部分是这样的：

> 为了便于面向对象编程，JavaScript 允许您使用 Function 对象作为用于新对象的原型和用于调用的构造函数的组合：
> 
> ```
> var Person = function(firstName, lastName) {
>   this.firstName = firstName;
>   this.lastName = lastName;
> }
> 
> Person.prototype = {
>   toString: function() { return this.firstName + ' ' + this.lastName; }
> } 
> ```
> 
> 在这里，我们有一个 Function 对象，它既是构造函数又是用作新对象原型的对象。

我很困惑，因为在我看来，充当构造函数的 Function 对象和原型是不同的。从 chrome 的以下控制台输出中可以清楚地看出这一点：

![铬控制台输出](../Images/1de45cc96f8293682e619071870b1389.png)

即构造函数就是上面的函数对象，有两个参数：firstName和lastName；而原型只是一个普通对象，它恰好具有一个属性（toString），而该属性又由单独的函数对象定义`function() { return this.firstName + ' ' + this.lastName; }`

是我误解了他在说什么，还是文章不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:39:00.820

是的，这是不正确的。用于新对象的原型是`.prototype`在创建对象时由构造函数的属性引用的原型，它是与构造函数分离的普通对象。

```
function Person() {

}

var a = new Person(); //a.__proto__ is assigned Person.prototype

Person.prototype = {}; //This doesn't affect a, because .__proto__ was assigned at creation time

var b = new Person(); //b.__proto__ is assigned Person.prototype, which is just the random object we created with {} 
```

# c# - 如何使用 C# 从字符串列表中提取公共部分

> ID：14002071
> 
> 赞同：3
> 
> 时间：2012-12-22T10:33:38.460
> 
> 标签：c#, linq

这是我的场景！

```
List<String> list = new List<String>();
list.Add("E9215001");
list.Add("E9215045");
list.Add("E1115001");
list.Add("E1115022");
list.Add("E1115003");
list.Add("E2115041");
list.Add("E2115042");
list.Add("E4115021");
list.Add("E5115062"); 
```

我需要使用 C# & LINQ 从上面的列表中提取以下常用部分

**E92150** -> 从 {* *E92150* *01, * *E92150* *45}中提取

**E11150** -> 从 {* *E11150* *01, * *E11150* *22, * *E11150* *03}中提取

**E21150** -> 从 {* *E21150* *41, * *E21150* *42}中提取

**E41150** -> 从 {* *E41150* *21}中提取

**E51150** -> 从 {* *E51150* *62}中提取

## 更新：谢谢！每个人！在@mlorbetske 和@shelleybutterfly 的帮助下，我想通了！

## 解决方案：

```
list.Select((item, index) => new {
Index=index, 
Length=Enumerable.Range(1, (item.Length-2)) //I'm ignoring the last 2 characters
                 .Reverse()
                 .First(proposedLength => list.Count(innerItem =>  
                   innerItem.StartsWith(item.Substring(0, proposedLength))) > 
                   1)}).Select(n => list[n.Index].Substring(0, n.Length)).Distinct() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T10:38:43.427

我怀疑这就是你要找的东西，但是

```
var result = list.Select(s => s.Substring(0, 6))
                 .Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:45:14.550

是否需要内联查询语法？如果是这样，如何：

```
var result =
    from item in list
    select item.Substring(0,6); 
```

或具有不同要求：

```
var result =
    (
        from item in list
        select item.Substring(0,6);
    )
    .Distinct(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T11:23:54.833

我不确定确定匹配的标准是什么，所以我写了这个——它完全是新奇的，99.9999% 确定它实际上不是你想要的。

本质上，外部选择获取确定长度的所有子字符串。

第一个内部选择确定在列表中至少一个其他字符串中找到的此字符串的最大长度。

group by（在第一个内部选择之后）将找到的长度自己分组。

然后将此分组转换为长度与找到次数的字典。

`Value`然后，我们按找到长度（升序）的频率（）对这组分组进行排序。

接下来，我们取实际长度（最不频繁出现的长度 - from `Key`）并将其返回到的第二个参数中，`Substring`因此我们将子字符串从 0 变为该长度。当然，我们现在又回到了外部选择中，所以我们实际上正在获取值（万岁！）。

现在，我们从该结果中获取不同的值集，瞧！

```
list.Select(
    item => item.Substring(0, 
        list.Select(
            innerItem => Enumerable.Range(1, innerItem.Length)
                           .Reverse()
                           .First(proposedlength => list.Count(innerInnerItem => innerInnerItem.StartsWith(innerItem.Substring(0, proposedlength))) > 1)
                   )
            .GroupBy(length => length)
            .ToDictionary(grouping => grouping.Key, grouping => grouping.Count())
            .OrderBy(pair => pair.Value)
            .Select(pair => pair.Key)
            .First())
        ).Distinct() 
```

在阅读了上面的评论之后，我发现人们也有兴趣找到每个术语中其他任何一个中存在的不同的最长子串。这是更新颖的代码：

```
list.Select((item, index) => new {
    Index=index, 
    Length=Enumerable.Range(1, item.Length)
                     .Reverse()
                     .First(proposedLength => list.Count(innerItem => innerItem.StartsWith(item.Substring(0, proposedLength))) > 1)
}).Select(n => list[n.Index].Substring(0, n.Length))
  .Distinct() 
```

简而言之，遍历列表中的每个项目并收集条目的索引和从该元素的开头开始的最长子字符串，该元素可能在列表中的至少一个其他条目中找到。然后通过从每个索引/长度对中收集所有子字符串并仅获取不同的字符串集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T14:01:05.250

**解决了**！感谢**@mlorbetske**和**@shelleybutterfly**

```
list.Select((item, index) => new { Index=index, 
            Length=Enumerable.Range(1, (item.Length-2)) //I don't need the last 2 Char so I'm ignoring it
            .Reverse()
            .First(proposedLength => list.Count(innerItem =>  
             innerItem.StartsWith(item.Substring(0, proposedLength))) > 
             1)}).Select(n => list[n.Index].Substring(0, n.Length)).Distinct() 
```

# php - 自动加载配置不加载 MongoDB 类

> ID：14002074
> 
> 赞同：4
> 
> 时间：2012-12-22T10:33:50.953
> 
> 标签：php, mongodb, mamp

我在 MAC OSX 10.8.2 上使用 PHP 5.3 安装了 MAMP 1.9 我安装了 MongoDB 和 PHP 扩展 mongo.so 并将其添加到我的 php.ini 中。

我可以在控制台上运行 MongoDB，我的 phpinfo 说 MongoDB 支持已启用，但我无法运行以下 PHP 脚本。

`<?php $connection = new MongoClient(); ?>`

PHP 出现了一个致命错误：

`Class 'MongoClient' not found`

我的 MAMP（或扩展安装）的自动加载配置似乎有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:50:24.537

正如 Sammaye 在上面的评论中提到的，看起来您只是在运行旧版本的驱动程序。您可以通过转储`Mongo::VERSION`或从`phpversion('mongo')`. 还[记录](http://us1.php.net/manual/en/mongo.installation.php#mongo.installation.osx)了通过 PECL 安装/升级驱动器的说明；但是，我们不再在 GitHub 上提供预编译版本（尽管我们最近开始将 Windows 构建发布到 S3，但 GitHub 很快将删除存储库下载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T23:33:04.517

我遇到了同样的问题，因为我更改了错误的 php.ini 文件。所以我运行了以下命令

> 回声 phpversion('mongo');

并采取了`Loaded Configuration File`/Applications/MAMP/bin/php/php5.4.4/conf/php.ini 并对其进行了更改。

重新启动 Apache，它工作了。耶！！！

# php - php数组，在foreach循环中使用相同的键存储多个值

> ID：14002080
> 
> 赞同：0
> 
> 时间：2012-12-22T10:36:14.240
> 
> 标签：php, arrays, multidimensional-array, key, multiple-value

我相信我想要完成的是直截了当的。

在某些情况下，如果给定距离小于给定接近距离（$prox），则下面的代码将城市名称（$cityProx）简单地推入一维数组（$validLocationCity）

```
if($actualDistance <= $prox)
{   
    array_push($validLocationCity,$cityProx);
} 
```

所以这很好。但现在我希望根据距离对这一系列城市进行排序。

我的理论实现这一点的一个简单方法是将距离作为键存储在数组中，允许我使用 ksort()，这将允许我循环遍历城市，稍后再靠近。

```
if($actualDistance <= $prox)
{   
    $validLocationCitySortDistance[$actualDistance] = $cityProx;
} 
```

以上是我第一次尝试实现这一点，但是，当然，任何具有相同距离的城市都会覆盖为该距离/键存储的先前值。

我如何实现这一点，以便如果键相同，即距离相等，新值（城市名称）将简单地添加/附加到该键。还假设在超过 1 种情况下距离相等。

// 结束问题
//--------------------------------->>

如果使用给定的键，我尝试添加一个新数组作为值

```
if($validLocationCitySortDistance[$actualDistance] != null) 
{
    $validLocationCitySortDistance[$actualDistance] [] = $cityProx;
}
else
{
     $validLocationCitySortDistance[$actualDistance] = $cityProx;
} 
```

这似乎是一种不正确且过于复杂的方式来做我想做的事情。由于我不知道我需要迭代多少次，所以这种方法很糟糕。我承认，我想我可能只是误解了我在上面的后一个示例中到底在做什么。

如果有人可以帮助它真的很感激，我还想问你是否看到一个快速的解决方案来展示我如何使用 foreach 或类似方法从你的解决方案中获取值。

希望你能得到我，
提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:14:14.480

使用城市名称作为键并应用 asort() 就可以了。

```
$myarr = ['delhi' => 12,
          'kolkata' => 30,
          'hyderabad' => 4,
          'adilabad' => 1,
          'vizag' => 10];
asort($myarr); 
```

然后您可以使用访问密钥

```
foreach($myarr as $key => $value) {
    echo "{$key} : {$value}";
} 
```

或者

```
array_walk($myarr, function($value, $key) {
   echo "{$key} : {$value} ";
}); 
```

# java - Java并发问题线程与executorservice

> ID：14002082
> 
> 赞同：2
> 
> 时间：2012-12-22T10:37:22.287
> 
> 标签：java, multithreading, concurrency, executorservice

我整天都在网上拖钓。没有真正的答案。我希望有人能给我一些建议。

我正在尝试构建的是一个汽车买家类型的应用程序，它需要轮询拍卖并检查我想要购买的物品是否可用。

所以从概念上讲，我认为我应该能够启动一个一直运行的线程（直到我告诉它停止）

当它找到一个项目时，它应该启动另一个线程来投标或购买该项目。

我已经完成了所有代码，它只是我坚持的线程。

第一个问题是我已经能够使用线程 /runnable 以及使用执行服务来启动线程

但在所有情况下，我都不知道如何让线程继续处理......然后允许我发出某种命令，当我想停止程序时停止线程......

一些指导将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:44:20.987

据我了解，您的下一个想法是：

1.  有线程不时轮询一些服务以找到便宜货
2.  如果找到，那么应该为**这个**具体的项目生成另一个线程，以进行投标、购买和惹恼其他没有这么好的工具的买家。
3.  如果您不想再购买商品，请停止特定线程。

所有这些都可以通过您自己的线程框架使用 JVM 线程原语来实现（这样做会很有趣！）。但是，我建议为此使用[Spring Framework](http://www.springsource.org/spring-framework)。[任务执行和调度](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html) 详细解释了如何做到这一点。在本质上：

*   想要定期执行一些方法吗？穿上`@Scheduled`它！（地址＃1）
*   想要以异步方式执行某些方法吗？放@Async！（地址＃1）
*   关于#3 - 取消/停止线程本身就是问题。看看[这个](https://stackoverflow.com/questions/671049/how-do-you-kill-a-thread-in-java)问题/答案。到目前为止，我发现的最好（也是推荐的）方法是使用内存中的共享变量或数据库中的某个值（如果应用程序在分布式环境中运行）作为要求后台线程停止的标志。

尽管听起来很简单，但您仍然需要了解引擎盖下发生的事情并了解一些关于 spring 的知识。此外`@Sheculed`/`@Async`任务在两个不同的线程池中执行，您可能想要更新它们的默认大小值 - 我只有在生产部署后才学到的教训 :-)

# jquery - mvc 中物理文件的链接

> ID：14002084
> 
> 赞同：2
> 
> 时间：2012-12-22T10:37:31.413
> 
> 标签：jquery, .net, asp.net-mvc

我需要从物理目录中读取文件并在视图上显示为链接。我正在获取文件的链接，但单击链接时未下载文件。下面是代码。请帮忙。当我将鼠标悬停在链接上时，我可以看到文件为 file:///c:/Test/Test.doc 但是在单击链接时，文件不会被下载。

```
 public class Documents: Controller
  {

    public ActionResult Documents()
    {
        return View();
    }

    //Read the files from directory and display
    [HttpGet]
    public JsonResult GetDocumentlinks()
    {
        string data = "";
            foreach (string s in Directory.GetFiles(@"C:/Test"))
                {

                    var uri = new Uri(s);
                    var converted = uri.AbsoluteUri;
                    data = "</br>" + data + "<a href='" + converted + "'>" + Path.GetFileName(s)      + " </a> </br></br>";

                }

        return Json(data, JsonRequestBehavior.AllowGet);
    }

   }

   <div id="links"></div>
   $(document).ready(function () {

   LoadTrainingDocsGrid();
   });

   function LoadTrainingDocsGrid()
   {
   $.ajax({
     cache: false,
     url: '../Document/GetDocumentlinks/',
     dataType: 'json',
     type: 'GET',
     contentType: 'application/json; charset=utf-8',
     success: function (data) {
         debugger;
         $('#links').html(data);
     }
     });
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:49:34.650

以下[帖子](https://stackoverflow.com/questions/7600897/creating-file-download-links-mvc3-razor-view-with-model)提供了有关您遇到的困难的详细信息。

它描述了物理文件夹和虚拟文件夹之间的关系，以及如何将您当前呈现的链接（物理文件链接）更改为正确的链接（http:// url 指的是**虚拟**文件夹中的文件）以获得您正在查看的行为为了。

希望有帮助。

# linux - Bash 脚本（分隔字符串）

> ID：14002087
> 
> 赞同：-2
> 
> 时间：2012-12-22T10:38:09.433
> 
> 标签：linux, bash, sorting, uniq

我有一个练习，我必须从用户那里获取一个字符串`read str`并打印该字符串的最后一个字符被重复的次数。

例如，字符串是：`ab2aa2b122` ，输出将是：`4`因为`2`在字符串中重复了 4 次。

我的问题是将字符串分成单个字符。`" "`我希望每个字符都用空格或 a与另一个字符分开，`\n`以便使用`tr`命令和`uniq`命令。

我必须使用`uniq`and`sort`命令，为了使用这些我必须拆分字符，这意味着每个字符必须用空格或`\n`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:57:23.700

100% 纯 bash 解决方案：

```
read -r -p "Enter your string: " a
l=${a:(-1)}
b=${a//[^$l]/}
n=${#b}
echo "Last character is \`$l' and is repeated $n times in the string \`$a'" 
```

没有循环，没有外部进程，什么都没有！

作为单线（以表明它真的很短，并且可能是最短的！）：

```
echo "ab2aa2b122"|{ read -r a;b=${a//[^${a: -1}]/};echo ${#b};} 
```

### 编辑

第一个版本的解释（第二个完全一样，但适合代码高尔夫比赛）。

*   第一行读取用户输入并将该输入存储在变量中`a`。
*   `l=${a:(-1)}`将存储 in 的最后一个`a`字符`l`。更一般地，`${a:i:j}`扩展为`a`从索引*i*开始、长度为*j*的子字符串。当*i* =-1 时，它扩展到最后一个字符。
*   参数扩展用于下一行：`${a//P/R}`将扩展为`a`所有的`P`' 替换为`R`。在这里，`R`是空的，并且`P`是`[^$l]`，所以这匹配所有不同于 的字符`l`。底线：`${a//[^$l]/}`扩展到`a`删除与最后一个不同的所有字符的位置。所以我们只剩`2222`下你的情况了。
*   `${#b}`扩展到`b`（这里是它的长度）的大小。所以我们完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:52:47.560

不确定您是否可以`sed`在锻炼中使用，但`sed`可以这样做：

```
bash-3.1$ PPP=`echo ab2aa2b122 | sed 's/\(.\)/\1 /g'`
bash-3.1$ echo $PPP
a b 2 a a 2 b 1 2 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:00:24.653

awk 单线：

```
kent$  echo "ab2aa2b122"|awk  'BEGIN{FS=""}{for(i=1;i<=NF;i++)a[$i]++;print "last char "$NF" : "a[$NF]" times";}'
last char 2 : 4 times 
```

如果您只想获得数字“4”：

```
kent$  echo "ab2aa2b122"|awk  'BEGIN{FS=""}{for(i=1;i<=NF;i++)a[$i]++;print a[$NF]}'
4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T13:04:41.417

**仅**使用`wc`,`cut`和`tr`:

```
#/bin/bash

input="ab2aa2b122"

length=$(wc -c <<< $input)

last=$(cut -c $((length-1)) <<< $input)

tr -dc $last <<< $input | wc -c 
```

`wc -c`计算字符串中的字符数。

`cut -c $len-1`获取字符串中的最后一个字符

`tr -dc $last`删除所有不是最后一个字符*（即 2 个）*离开字符串`2222`，然后用于`wc -c`再次计算长度。

```
./script.sh 
4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T11:56:05.077

从OP：

> 我的问题是将字符串分成单个字符。我希望每个字符都将通过空格（“”）或 \n（下一行）与另一个字符分隔 - 以便使用 tr 命令和 uniq 命令。

从作为评论留下的评论到我的其他答案：

> 我学习了基本命令，例如 cat、cut、tr、sort、uniq、for 和 while 循环、if、cp、wc、输入输出 (>|)、abit of globe 样式和扩展正则表达式 (egrep..)但我可以在当前练习中使用 egrep 和 Extended reg 表达式，以及地球样式。谢谢！

使用“划分”你的字符串`grep`：

*   使用可怕的`echo`-pipe 和 subshel​​l：

    ```
    echo "$string" | grep -o '.' 
    ```

*   使用此处的字符串：

    ```
    grep -o '.' <<< "$string" 
    ```

希望这可以帮助！

# android - 无法在 Android 中将 XMPP 服务器与 ASmack 连接

> ID：14002092
> 
> 赞同：1
> 
> 时间：2012-12-22T10:38:41.303
> 
> 标签：android, asmack

我有一个用 Java 制作的完整的聊天客户端。现在我期待在我的 android 设备上实现相同的功能。我开始在我的项目中导入 ASmack 库，并在每个阶段进行检查以避免错误。不过，我被困在了第一步。我的活动无法在 ASmack Jar 中找到课程，因此我认为我无法继续。

**我的简单代码：**

```
package com.test.mypro;

import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

    public class TestProjectActivity extends Activity {
        private static final String LOG_TAG = "TESTER";
        /** Called when the activity is first created. */
        TextView tvHello;
        XMPPConnection connection;
        ConnectionConfiguration config;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            tvHello = (TextView) findViewById(R.id.tvHello);
            Log.i(LOG_TAG, "I'm here");
            config = new ConnectionConfiguration("prc.p1.im", 5222, "prc.p1.im");
            connection = new XMPPConnection(config);
            try {
                connection.connect();
                // tvHello.setText("Connected to XMPP server");
                Log.i(LOG_TAG, "Successfully Connected");
            } catch (XMPPException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.e(LOG_TAG, "Not Connected");
            }
        }
    } 
```

**LogCat 日志：**

```
12-22 15:58:16.319: E/dalvikvm(828): Could not find class 'org.jivesoftware.smack.ConnectionConfiguration', referenced from method com.test.mypro.TestProjectActivity.onCreate
12-22 15:58:16.339: W/dalvikvm(828): VFY: unable to resolve new-instance 26 (Lorg/jivesoftware/smack/ConnectionConfiguration;) in Lcom/test/mypro/TestProjectActivity;
12-22 15:58:16.339: D/dalvikvm(828): VFY: replacing opcode 0x22 at 0x0019
12-22 15:58:16.351: D/dalvikvm(828): VFY: dead code 0x001b-0047 in Lcom/test/mypro/TestProjectActivity;.onCreate (Landroid/os/Bundle;)V
12-22 15:58:16.509: I/TESTER(828): I'm here
12-22 15:58:16.519: D/AndroidRuntime(828): Shutting down VM
12-22 15:58:16.519: W/dalvikvm(828): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-22 15:58:16.561: E/AndroidRuntime(828): FATAL EXCEPTION: main
12-22 15:58:16.561: E/AndroidRuntime(828): java.lang.NoClassDefFoundError: org.jivesoftware.smack.ConnectionConfiguration
12-22 15:58:16.561: E/AndroidRuntime(828):  at com.test.mypro.TestProjectActivity.onCreate(TestProjectActivity.java:24)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.os.Looper.loop(Looper.java:123)
12-22 15:58:16.561: E/AndroidRuntime(828):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-22 15:58:16.561: E/AndroidRuntime(828):  at java.lang.reflect.Method.invokeNative(Native Method)
12-22 15:58:16.561: E/AndroidRuntime(828):  at java.lang.reflect.Method.invoke(Method.java:507)
12-22 15:58:16.561: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-22 15:58:16.561: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-22 15:58:16.561: E/AndroidRuntime(828):  at dalvik.system.NativeStart.main(Native Method) 
```

**附加信息：**我导入了 asmack-android-7.jar 库。我的 AVD 运行的是 2.3.3 Android。

我假设因此我得到了致命的例外。我在这里想念什么？您的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T07:33:31.707

```
public class ChatScreen extends Activity implements android.view.View.OnClickListener { 

private final static String SERVER_HOST = "192.168.88.158";
private final static int SERVER_PORT = 5222;
private final static String SERVICE_NAME = "192.168.88.158";
private final static String LOGIN = "manish";
private final static String PASSWORD = "android";
private List<String> m_discussionThread;
private ArrayAdapter<String> m_discussionThreadAdapter;
private XMPPConnection m_connection;
private Handler m_handler;
public static  ArrayList<HashMap<String, String>> usersList;
Presence presence;
ListView list;
int position = 0;

private Button BackBtn;
private Button EndChatBtn;
TextView opretor;
    String opretorName;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.chat_screen);
    usersList=new ArrayList<HashMap<String, String>>();
    Intent intent = getIntent();
    opretorName = intent.getStringExtra("opName");
    opretor = (TextView) findViewById(R.id.Opretor1);
    opretor.setText(opretorName);
            m_handler = new Handler();
    try {
        initConnection();
    } catch (XMPPException e) {
        e.printStackTrace();
    }
    final EditText recipient = (EditText) this.findViewById(R.id.recipient);
    recipient.setText(opretorName + "@manishsys-pc");
    final EditText message = (EditText) this.findViewById(R.id.message);        
    list = (ListView) this.findViewById(R.id.thread);

    m_discussionThread = new ArrayList<String>();
    m_discussionThreadAdapter = new ArrayAdapter<String>(this,
            R.layout.multi_line_list_item, m_discussionThread);
    list.setAdapter(m_discussionThreadAdapter);

    Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(new View.OnClickListener() {
        @SuppressLint("SimpleDateFormat")
        public void onClick(View view) {
            String to = recipient.getText().toString();
            String text = message.getText().toString();

            Message msg = new Message(to, Message.Type.chat);
            Calendar c = Calendar.getInstance(); 
            SimpleDateFormat formatter = new SimpleDateFormat("yyyy MMMM d, hh:mm a");
            String strdt= formatter.format(c.getTime());
            msg.setBody(text);
            m_connection.sendPacket(msg);
            m_discussionThread.add("me :" + strdt);
            m_discussionThread.add(text);
            m_discussionThreadAdapter.notifyDataSetChanged();

        }
    });

    BackBtn = (Button) findViewById(R.id.ChatBackBtn);
    BackBtn.setOnClickListener(this);
    EndChatBtn= (Button) findViewById(R.id.EndChatBtn);
    EndChatBtn.setOnClickListener(this);

}

private void initConnection() throws XMPPException {
    //Initialisation de la connexion
    ConnectionConfiguration config =
            new ConnectionConfiguration(SERVER_HOST, SERVER_PORT, SERVICE_NAME );
    m_connection = new XMPPConnection(config);
    m_connection.connect();
    m_connection.login(LOGIN, PASSWORD);
    presence = new Presence(Presence.Type.available);
    m_connection.sendPacket(presence);

    //Get all userList
    Roster roster = m_connection.getRoster();
    String[] urlArray = new String[] { "office" };
    roster.createEntry("ravi", "ravi", urlArray);
    Collection<RosterEntry> entries = roster.getEntries();

    for(RosterEntry entry : entries) {
        HashMap<String, String> map = new HashMap<String, String>();
        presence = roster.getPresence(entry.getUser());

        Presence.Type type = presence.getType();       

        map.put("USER", entry.getName().toString());
        map.put("STATUS", type.toString());
        Log.e("USER", entry.getName().toString());

        usersList.add(map);
    }

 // Assume we've created a Connection name "connection".
    ChatManager chatmanager = m_connection.getChatManager();
    Chat newChat = chatmanager.createChat("mansih@manishsys-pc ", new MessageListener() {
        public void processMessage(Chat chat, Message message) {
            System.out.println("Received message: " + message);
        }
    });

    try {
        newChat.sendMessage("Howdy!");
    }
    catch (XMPPException e) {
        System.out.println("Error Delivering block");
    }

    //enregistrement de l'écouteur de messages
    PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
    m_connection.addPacketListener(new PacketListener() {
            @SuppressLint("SimpleDateFormat")
            public void processPacket(Packet packet) {
                Message message = (Message) packet;
                if (message.getBody() != null) {
                    String fromName = StringUtils.parseBareAddress(message
                            .getFrom());
                    Calendar c = Calendar.getInstance(); 
                    SimpleDateFormat formatter = new SimpleDateFormat("yyyy MMMM d, hh:mm a");
                    String strdt= formatter.format(c.getTime());
                    m_discussionThread.add(fromName + ":" + strdt);
                    m_discussionThread.add(message.getBody());

                    m_handler.post(new Runnable() {
                        public void run() {
                            list.smoothScrollToPosition(list.getCount()-1);
                            m_discussionThreadAdapter.notifyDataSetChanged();
                        }
                    });
                }
            }
        }, filter);
    }
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.ChatBackBtn:

        Intent BackIntent = new Intent(ChatScreen.this,
                OperatorScreen.class);
        BackIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(BackIntent);
        ChatScreen.this.finish();

        break;
    case R.id.EndChatBtn:

        Intent EndChtIntent = new Intent(ChatScreen.this,
                RatingScreen.class);
        EndChtIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(EndChtIntent);
        ChatScreen.this.finish();

        break;

    default:
        break;`
    }
  }
} 
```

这是我的代码，对我来说很好，希望对你有帮助。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:56:42.543

试试这个

```
private final static String server_host = "talk.google.com";
private final static int SERVER_PORT = 5222;
private final static String SERVICE_NAME = "gmail.com";

ConnectionConfiguration config = new ConnectionConfiguration( server_host, SERVER_PORT , SERVICE_NAME);
        XMPPConnection m_connection = new XMPPConnection(config);
                try {
                     SASLAuthentication.supportSASLMechanism("PLAIN");
                     config.setSASLAuthenticationEnabled(true);     
                     m_connection.connect();
                    Roster.setDefaultSubscriptionMode(Roster.SubscriptionMode.manual);
                } catch (XMPPException e) {
                    e.printStackTrace();
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:39:15.523

我找到了解决这个问题的方法。这是由于我对 API 所做的更新。我从我的项目属性中删除了导入的 ASmack 库。Lib 文件夹也丢失了。因此，我在他的项目中创建了一个文件夹（“libs”）并将 ASmack jar 粘贴到那里。通过清理项目一次，错误得到修复。谢谢你。 [参考](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# delphi - 过滤而不显示过滤器

> ID：14002094
> 
> 赞同：2
> 
> 时间：2012-12-22T10:38:52.343
> 
> 标签：delphi, devexpress, tcxgrid

我有一个表单，其中有一系列按钮，用户可以单击这些按钮来过滤记录 ia cxGrid 这工作正常，但我想在不显示实际过滤器栏的情况下进行过滤。这有可能吗？- 我一直无法弄清楚如何。我有一个带 * 的按钮来重置过滤器，所以我不需要过滤器栏

```
procedure TfrmJsCompanies.ButtonClick(Sender: TObject);
var
  ButtonValue: char;
  FilterString: string;
begin
  ButtonValue := (Sender as TcxButton).Caption[1];
  FilterString := ButtonValue + '%';
  with cxDbView1.DataController.Filter.Root do
    begin
      Clear;
      BoolOperatorKind := fboOr;
      AddItem(colCompany_Name, foLike, FilterString, FilterString);
    end;
  cxDbView1.DataController.Filter.Active := True;
  ActiveControl := grdCompanies;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:20:51.800

在 TcxGridTableView 上，将 FilterRow.Visible 属性设置为 False。这将隐藏过滤器栏。

# java - 无法使用“工厂方法”实例化单例

> ID：14002102
> 
> 赞同：0
> 
> 时间：2012-12-22T10:40:14.727
> 
> 标签：java, xml, spring, perfectjpattern

我有一段代码集成了 Hibernate 3.3.2.GA 和 Spring 2.5.x 并且这些版本很旧，所以我决定升级。我首先将 Spring 升级到了最新的可用版本 3.2.0.RELEASE，这很有效。实际上，最新 Spring 版本的工作项目可以使用`svn co https://perfectjpattern.svn.sourceforge.net/svnroot/perfectjpattern/trunk perfectjpattern`. 尝试升级到 Hibernate 4 我得到了一个不同的 Spring bean 行为，这让我无法理解，它显然与 Hibernate 4 无关。

失败的 bean 配置如下。使用 Hibernate 3 的完整工作配置[在这里](http://perfectjpattern.svn.sourceforge.net/viewvc/perfectjpattern/trunk/perfectjpattern-spring/src/test/resources/test-applicationContext.xml?revision=1036&content-type=text/plain)（我没有使用 Hibernate 4 ofc 签入失败的配置）：

```
<bean id="localDaoFactory" class="org.perfectjpattern.jee.integration.dao.LocalDaoFactory"  
    factory-method="getInstance">
    <property name="sessionStrategy">
        <ref bean="daoSessionStrategy" />
    </property>     
    <property name="transactionStrategy">
        <ref bean="daoTransactionStrategy" />
    </property>         
    <property name="personDao">
        <ref bean="personDao" />
    </property>     
</bean> 
```

并且异常的堆栈跟踪如下所示，这意味着它无法初始化`org.perfectjpattern.jee.integration.dao.LocalDaoFactory`，并且在寻找可访问的构造函数时显然失败了但在此配置中我指定使用工厂方法而不是直接实例化 bean。这在升级 Hibernate 之前有效，但在同一 Spring（最新）版本之后和之后都无效，这非常令人困惑。

```
java.lang.IllegalStateException: Failed to load ApplicationContext
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:313)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'localDaoFactory' defined in URL [file:src/test/resources/test-applicationContext.xml]: Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.perfectjpattern.jee.integration.dao.LocalDaoFactory
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1029)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:925)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:106)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:57)
        at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
        at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:248)
        at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
        ... 30 more
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.perfectjpattern.jee.integration.dao.LocalDaoFactory
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:160)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
        ... 47 more 
```

更新：在加载 Spring 配置时，Spring 找不到该类`LocalDaoFactory`，但它之前确实...

更新：这是运行的结果，`mvn dependency:tree -Dverbose`没有未解决的冲突

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ perfectjpattern-spring ---
[INFO] perfectjpattern:perfectjpattern-spring:jar:1.0.3-SNAPSHOT
[INFO] +- perfectjpattern:perfectjpattern-api:jar:1.0.3-SNAPSHOT:compile
[INFO] +- commons-lang:commons-lang:jar:2.5:compile
[INFO] +- org.springframework:spring-core:jar:3.2.0.RELEASE:compile
[INFO] +- org.springframework:spring-jdbc:jar:3.2.0.RELEASE:compile
[INFO] |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-tx:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-orm:jar:3.2.0.RELEASE:compile
[INFO] |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-jdbc:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-tx:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-tx:jar:3.2.0.RELEASE:compile
[INFO] |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (aopalliance:aopalliance:jar:1.0:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-aop:jar:3.2.0.RELEASE:compile
[INFO] |  +- (aopalliance:aopalliance:jar:1.0:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-context:jar:3.2.0.RELEASE:compile
[INFO] |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-aop:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- org.springframework:spring-expression:jar:3.2.0.RELEASE:compile
[INFO] |  |  \- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-context-support:jar:3.2.0.RELEASE:compile
[INFO] |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-context:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-beans:jar:3.2.0.RELEASE:compile
[INFO] |  \- (org.springframework:spring-core:jar:3.2.0.RELEASE:compile - omitted for duplicate)
[INFO] +- commons-logging:commons-logging:jar:1.1.1:test
[INFO] +- org.springframework:spring-test:jar:3.2.0.RELEASE:test
[INFO] |  +- org.springframework:spring-webmvc:jar:3.2.0.RELEASE:test
[INFO] |  |  +- (org.springframework:spring-context:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  |  +- org.springframework:spring-web:jar:3.2.0.RELEASE:test
[INFO] |  |  |  +- (org.springframework:spring-context:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  |  |  +- (org.springframework:spring-core:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  |  |  +- (org.springframework:spring-aop:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  |  |  +- (aopalliance:aopalliance:jar:1.0:test - omitted for duplicate)
[INFO] |  |  |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-expression:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  |  \- (org.springframework:spring-beans:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-core:jar:3.2.0.RELEASE:test - omitted for duplicate)
[INFO] +- perfectjpattern:perfectjpattern-testcommon:jar:1.0.3-SNAPSHOT:test
[INFO] |  +- junit:junit:jar:4.8.1:test
[INFO] |  +- org.slf4j:slf4j-log4j12:jar:1.7.2:test
[INFO] |  |  +- org.slf4j:slf4j-api:jar:1.7.2:test
[INFO] |  |  \- log4j:log4j:jar:1.2.17:test
[INFO] |  \- org.easymock:easymock:jar:2.5.2:test
[INFO] +- org.hsqldb:hsqldb:jar:2.2.9:test
[INFO] \- perfectjpattern:perfectjpattern-hibernate:jar:1.0.3-SNAPSHOT:test
[INFO]    +- perfectjpattern:perfectjpattern-jee:jar:1.0.3-SNAPSHOT:test
[INFO]    |  +- perfectjpattern:perfectjpattern-core:jar:1.0.3-SNAPSHOT:test
[INFO]    |  |  +- (perfectjpattern:perfectjpattern-api:jar:1.0.3-SNAPSHOT:test - omitted for duplicate)
[INFO]    |  |  +- (org.slf4j:slf4j-api:jar:1.7.2:test - omitted for duplicate)
[INFO]    |  |  \- (commons-lang:commons-lang:jar:2.5:test - omitted for duplicate)
[INFO]    |  +- org.apache.geronimo.specs:geronimo-ejb_3.0_spec:jar:1.0.1:test
[INFO]    |  +- org.apache.geronimo.specs:geronimo-jpa_3.0_spec:jar:1.1.1:test
[INFO]    |  \- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:test
[INFO]    +- javassist:javassist:jar:3.8.0.GA:test
[INFO]    +- commons-collections:commons-collections:jar:3.2.1:test
[INFO]    \- org.hibernate:hibernate-core:jar:4.1.9.Final:test
[INFO]       +- antlr:antlr:jar:2.7.7:test
[INFO]       +- org.jboss.logging:jboss-logging:jar:3.1.0.GA:test
[INFO]       +- org.javassist:javassist:jar:3.17.1-GA:test
[INFO]       +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:test
[INFO]       +- dom4j:dom4j:jar:1.6.1:test
[INFO]       +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Final:test
[INFO]       \- org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:test
[INFO]          \- (org.jboss.logging:jboss-logging:jar:3.1.0.CR2:test - omitted for conflict with 3.1.0.GA) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:18:45.753

该消息`Could not initialize class org.perfectjpattern.jee.integration.dao.LocalDaoFactory`意味着 JVM 无法静态初始化具有此名称的类。

我查看[了这个类](http://perfectjpattern.sourceforge.net/clover/org/perfectjpattern/jee/integration/dao/LocalDaoFactory.html)及其超类[HibernateDaoFactory](http://perfectjpattern.sourceforge.net/clover/org/perfectjpattern/jee/integration/dao/HibernateDaoFactory.html#HibernateDaoFactory)和[AbstractDaoFactory](http://perfectjpattern.sourceforge.net/clover/org/perfectjpattern/jee/integration/dao/AbstractDaoFactory.html#AbstractDaoFactory)的源代码。LocalDaoFactory 和 HibernateDaoFactory 完成的唯一静态初始化是创建每个类的单个实例并将其存储在`private static final`名为`INSTANCE`. 所以，实例化这些单例肯定有问题。

LocalDaoFactory 没有自己的构造函数，AbstractDaoFactory 的构造函数只使用标准的 Java 类和与它在同一个包中的类。HibernateDaoFactory 的构造函数更有趣，因为它创建了一个[HibernateCurrentSessionStrategy](http://perfectjpattern.sourceforge.net/clover/org/perfectjpattern/jee/integration/dao/HibernateCurrentSessionStrategy.html#HibernateCurrentSessionStrategy)和一个[HibernateConfiguredTransactionStrategy](http://perfectjpattern.sourceforge.net/clover/org/perfectjpattern/jee/integration/dao/HibernateConfiguredTransactionStrategy.html#HibernateConfiguredTransactionStrategy)。代码本身看起来并不是特别有问题，因此该代码尝试实例化的某些类似乎丢失了。

我可以在 PerfectJPattern 之外的代码上看到的唯一依赖项是：

*   休眠核心，
*   阿帕奇公共朗。

我将假设您确实拥有相关的 Hibernate 核心 JAR，因此将责任归咎于 Apache Commons Lang。

[Apache Commons Lang 网站](http://commons.apache.org/lang/)提到，commons-lang 版本 3 使用与早期版本的 commons-lang 不同的包。鉴于您的项目在升级到 Hibernate 4 之前工作并且现在不起作用，我猜测升级到 Hibernate 4 会用 commons-lang 3 或更高版本替换 commons-lang 2.6 或更早版本，问题出现是因为 PerfectJPattern 有对 commons-lang 2 的依赖。

**编辑**：看起来您的项目确实包含 commons-lang v2.5，所以没有它似乎不是问题。`NoClassDefFoundError`with 消息意味着 JVM*至少两次*`Could not initialize class ...`尝试加载该类但失败-如果您可以在第一次失败时获取异常消息，那可能会帮助您更多。恐怕我真正建议的只是在已设置为中断异常的调试器下启动您的项目。

# http - HTTP 重定向类型

> ID：14002105
> 
> 赞同：0
> 
> 时间：2012-12-22T10:40:27.753
> 
> 标签：http, redirect, httpwebrequest, httpwebresponse

我是 Web 技术的新手，我正在研究 GET 和 POST 方法以及 HTTP 重定向 + HTTP 状态代码的形式。

我知道存在两种重定向方法。一种是服务器返回带有 301/2 状态代码的请求并使用新 URL 进行响应，另一种是客户端不知道重定向。

这两种方法叫什么？我在哪里可以对它们进行更多研究，以便能够对这两种类型的重定向进行编程？

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:50:46.757

实际上还有更多；）您应该首先**仔细**阅读有关 url 重定向的相关[维基百科页面](http://en.wikipedia.org/wiki/URL_redirection)。

# prolog - 列表不等式约束

> ID：14002112
> 
> 赞同：11
> 
> 时间：2012-12-22T10:42:21.523
> 
> 标签：prolog, clpfd

我正在尝试编写一个 Prolog (CLP) 谓词，该谓词将构建一个约束两个列表不等式的约束。

更正式地说，有两个列表`A=[A1,...,AN], B=[B1,...,BN]`，约束被定义为`(A1 #\= B1) #\/ (A2 #\= B2) #\/ ... #\/ (AN #\= BN)`。

给定两个任意长度的列表，我不确定如何构建此约束。这是我的尝试。我明白为什么它不起作用，但无法修复它。

```
any_different([], []).
any_different([H1|T1], [H2|T2]):-
    H1 #\= H2 #\/ any_different(T1, T2). 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T13:12:57.047

您需要建立析取并通过第三个参数返回它：

```
any_different([], [], V) :-
    V #= 0\.  % no differences between [] and []
any_different([H1|T1], [H2|T2], Disj) :-
    any_different(T1, T2, Disj0),
    Disj #<==> (H1 #\= H2) #\/ Disj0. 
```

现在，调用`any_different(List1, List2, AnyDiff)`约束一个变量`AnyDiff`，您可以将其与其他变量一起传递给标签谓词。通过声明，`AnyDiff #= 0`您可以约束`List1`并`List2`使其相等，而`AnyDiff #= 1`将导致它们不相等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T11:33:59.260

我认为，至少在 SWI-Prolog 中，谓词 dif/2 和 library(clpfd) 可以替代物化：

```
?- L=[X,Y,Z], L ins 1..3, dif(L,[1,2,3]), label(L).
L = [1, 1, 1],
X = Y, Y = Z, Z = 1 ;
L = [1, 1, 2],
X = Y, Y = 1,
Z = 2 ;
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-09T09:09:00.443

这是一个基于`sum/3`clpfd reification的实现`(#<==>)/2`：

```
not_equals_reified(X, Y, B) :-
    X #\= Y #<==> B.

any_different(Xs, Ys) :-
    maplist(not_equals_reified, Xs, Ys, Bs), 
    sum(Bs, #>, 0). 
```

通过使用[元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") [`maplist/4`](https://stackoverflow.com/a/6683502/4609915)，我们甚至不需要编写递归代码！

# javascript - 如何将小数化简为可能的最小分数？

> ID：14002113
> 
> 赞同：3
> 
> 时间：2012-12-22T10:42:25.360
> 
> 标签：javascript, function, math

例如，如果我的函数被调用`getlowestfraction()`，这就是我期望它做的事情：

```
getlowestfraction(0.5) // returns 1, 2 or something along the lines of that 
```

另一个例子：

```
getlowestfraction(0.125) // returns 1, 8 or something along the lines of that 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T13:23:10.350

使用连[分数](http://en.wikipedia.org/wiki/Continued_fraction)可以有效地创建一个（有限或无限）分数序列*h [n] /k [n]*，它们是给定实数*x*的任意良好近似。

如果*x*是有理数，则该过程在*h [n] /k [n] == x*的某个点处停止。如果*x*不是有理数，则序列*h [n] /k [n] , n = 0, 1, 2, ...*会很快收敛到*x 。*

连分数算法只产生约化分数（分母和分母互质），分数在某种意义上是给定实数的“最佳有理近似值”。

我不是 JavaScript 人（通常用 C 编程），但我尝试使用以下 JavaScript 函数来实现该算法。如果有愚蠢的错误，请原谅我。但我已经检查了该功能，它似乎工作正常。

```
function getlowestfraction(x0) {
    var eps = 1.0E-15;
    var h, h1, h2, k, k1, k2, a, x;

    x = x0;
    a = Math.floor(x);
    h1 = 1;
    k1 = 0;
    h = a;
    k = 1;

    while (x-a > eps*k*k) {
        x = 1/(x-a);
        a = Math.floor(x);
        h2 = h1; h1 = h;
        k2 = k1; k1 = k;
        h = h2 + a*h1;
        k = k2 + a*k1;
    }

    return h + "/" + k;
} 
```

当有理逼近精确或具有给定精度时，循环停止`eps = 1.0E-15`。当然，您可以根据需要调整精度。（该`while`条件源自连分数理论。）

示例（带有 while 循环的迭代次数）：

```
getlowestfraction(0.5)     = 1/2               (1 iteration)
getlowestfraction(0.125)   = 1/8               (1 iteration)
getlowestfraction(0.1+0.2) = 3/10              (2 iterations)
getlowestfraction(1.0/3.0) = 1/3               (1 iteration)
getlowestfraction(Math.PI) = 80143857/25510582 (12 iterations) 
```

请注意，该算法给出了`1/3`的近似值`x = 1.0/3.0`。重复乘以`x`10 的幂并取消公因数会得到类似`3333333333/10000000000`.

以下是不同精度的示例：

*   随`eps = 1.0E-15`你得到`getlowestfraction(0.142857) = 142857/1000000`。
*   随`eps = 1.0E-6`你得到`getlowestfraction(0.142857) = 1/7`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:01:11.123

您可以继续乘以十，直到您的分子和分母具有整数值，然后使用[此问题](https://stackoverflow.com/questions/4652468/is-there-a-javascript-function-that-reduces-a-fraction)的答案将分数简化为最简单的项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T11:40:18.817

试试这个程序：

```
function toFrac(number) {
    var fractional = number % 1;

    if (fractional) {
        var real = number - fractional;
        var exponent = String(fractional).length - 2;
        var denominator = Math.pow(10, exponent);
        var mantissa = fractional * denominator;
        var numerator = real * denominator + mantissa;
        var gcd = GCD(numerator, denominator);
        denominator /= gcd;
        numerator /= gcd;
        return [numerator, denominator];
    } else return [number, 1];
}

function gcd(numerator, denominator) {
    do {
        var modulus = numerator % denominator;
        numerator = denominator;
        denominator = modulus;
    } while (modulus);

    return numerator;
} 
```

然后你可以按如下方式使用它：

```
var start = new Date;
var PI = toFrac(Math.PI);
var end = new Date;

alert(PI);
alert(PI[0] / PI[1]);
alert(end - start + " ms"); 
```

你可以在这里看到演示：http: [//jsfiddle.net/MZaK9/1/](http://jsfiddle.net/MZaK9/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T10:55:02.787

只是摆弄代码，自己得到了答案：

```
function getlowestfraction (num) {
  var i = 1;
  var mynum = num;
  var retnum = 0;
  while (true) {
    if (mynum * i % 1 == 0) {
      retnum = mynum * i;
      break;
    }
    // For exceptions, tuned down MAX value a bit
    if (i > 9000000000000000) {
      return false;
    }
    i++;
  }
  return retnum + ", " + i;
} 
```

以防有人需要。

PS：我不是想展示我的专业知识或知识范围。实际上，我确实在 JSFiddle 中花了很长时间试图弄清楚这一点（无论如何也不是很长时间）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T07:37:37.557

假设数字是`x = 0 . ( a_1 a_2 ... a_k ) ( a_1 a_2 ... a_k ) ....`为了简单起见（请记住，前几位数字可能不符合重复模式，我们需要一种方法来弄清楚是什么`k`）。如果`b`是基数，那么

```
b ^ k * x - x = ( b ^ k - 1 ) * x 
```

一方面，但

```
b ^ k * x - x = ( a_1 a_2 ... a_k ) 
```

（确切地说，即这是一个整数）另一方面。

所以

```
x = ( a_1 ... a_k ) / ( b ^ k - 1 ) 
```

现在您可以使用欧几里得算法得到 gcd 并将其除以得到减少的分数。

您仍然需要弄清楚如何确定重复序列。这个问题应该有答案。`\1`编辑 - 一个答案：它是如果与模式匹配的长度`/([0-9]+)\1+$/`（您可能想在匹配 bc 的舍入之前丢弃最后一个数字）。如果没有匹配，那么没有比“平凡”表示更好的“答案”了（x*base^precision/base^precision）。

注意这个答案对您对答案的期望做出了一些假设，可能不适合您的需求。但这是从重复的十进制表示中复制分数的“教科书”方式 -[参见例如here](http://en.wikipedia.org/wiki/Repeating_decimal#Converting_repeating_decimals_to_fractions)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-17T20:18:37.677

一个非常古老但又是**黄金**的问题，同时也是一个被忽视的问题。所以我会去[把这个受欢迎](https://stackoverflow.com/q/23575218/4543207)的标记为重复，希望新人最终会出现在正确的地方。

[这个问题的公认答案](https://stackoverflow.com/a/14011299/4543207)是互联网的瑰宝。我所知道的任何图书馆都没有使用这种宏伟的技术，最终得出的结果不是错误的而是愚蠢的理性。话虽如此，由于以下几个问题，公认的答案并不完全正确；

1.  那里到底发生了什么？
2.  为什么它仍然返回`'140316103787451/7931944815571'`而不是`'1769/100'`输入时返回`17.69`？
3.  你如何决定何时停止`while`循环？

现在最重要的问题是，那里发生了什么以及该算法为何如此高效。

我们必须知道，任何数字也可以表示为连续分数。说给你`0.5`。你可以这样表达

```
 1
0 + ___  // the 0 here is in fact Math.floor(0.5)
     2   // the 2 here is in fact Math.floor(1/0.5) 
```

所以说你得到了`2.175`然后你最终得到

```
 1
2 + _______________  // the 2 here is in fact Math.floor(2.175)
             1
    5 + ___________  // the 5 here is in fact Math.floor(1/0.175 = 5.714285714285714)
               1
        1 + _______  // the 1 here is in fact Math.floor(1/0.714285714285714 = 1.4)
                 1
            2 + ___  // the 2 here is in fact Math.floor(1/0.4 = 2.5)
                 2   // the 2 here is in fact Math.floor(1/0.5) 
```

我们现在有了像`[2;5,1,2,2]`for一样的连分数系数`2.175`。然而，这个算法的美妙之处在于它如何在我们计算下一个连分数常数时立即计算近似值，而不需要任何进一步的计算。此时，我们可以将当前达到的结果与给定值进行比较，并决定停止或再次迭代。

到目前为止这么好，但它仍然没有意义，对吧？让我们举另一个可靠的例子。输入值为`3.686635944700461`。现在我们将处理这个问题`Infinity`并很快收敛到结果。所以我们的第一个理性是`1/0`aka `Infinity`。我们将其表示为分子`n0`为`1`分母`d0`为`0`aka的分数`1/0`。第二个近似值将是积分部分，即是这样，`3`然后我们需要一个中间结果，就像下一阶段一样。让我们开始吧。也是如此。_ _`n1``3``d1``1``n2/d2``0``n2``0``d2``1`

重要的部分是，一旦我们知道了前两个近似值 ( `n0`,和) `d0`，我们就可以计算下一个系数以及下一个近似值，也就是与输入进行比较。计算系数就像下一个浮动部分的倒数一样简单。然后近似值将是。（[定理 2.4 @本文](https://pi.math.cornell.edu/%7Egautam/ContinuedFractions.pdf)）`n1``d1``n2``d2``i``Math.floor(xn)``xn``n2/d2``(i * n1 + n0)/(i * d1 + d0)`

现在给出上述信息，任何体面的程序员都可以轻松解决以下代码段。好奇的`3.686635944700461`是`800/217`，下面的代码只需要 5 次迭代就可以计算出来。

```
function toRational(x){
  var i  = Math.floor(x),
      xn = 1/(x-i),
      n0 = 1,
      d0 = 0,
      n1 = i,
      d1 = 1,
      n2 = 0,
      d2 = 1;
  if (x === i) return {n:n1,d:d1};
  while (Math.abs(x - n1/d1) > Number.EPSILON){
    i  = Math.floor(xn);
    n2 = i * n1 + n0;
    d2 = i * d1 + d0;
    n0 = n1;
    d0 = d1;
    n1 = n2;
    d1 = d2;
    xn = 1/(xn-i);
  }
  return isNaN(x) ? NaN : {n:n1,d:d1};
} 
```

在实际考虑中，最好将系数存储在分数对象中，以便将来您可以使用它们在有理数之间执行 CFA（连续分数算术）。这样，您可以`BigInt`通过留在 CF 域中执行求逆、求反、加法和乘法运算来避免巨大的整数和可能的使用。遗憾的是，CFA 是一个非常容易被忽视的话题，但它可以帮助我们在对有理类型值进行级联算术运算时避免双精度错误。

# kendo-ui - 如果我使用 KendoUI ASP MVC Complete，如何自定义 KendoUI 主题

> ID：14002119
> 
> 赞同：2
> 
> 时间：2012-12-22T10:42:53.707
> 
> 标签：kendo-ui

我正在尝试将我的剑道条形图的主题设置为“metro”主题，但似乎无法做到这一点，除非我在我的剃须刀代码中明确声明它。

我希望下面的代码可以工作，但渲染的条形图以某种方式使用默认主题。

```
<link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.metro.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.dataviz.metro.min.css" rel="stylesheet" type="text/css">  
<script src="http://cdn.kendostatic.com/2012.3.1114/js/jquery.min.js"></script>
<script src="http://cdn.kendostatic.com/2012.3.1114/js/kendo.all.min.js"></script>
<script src="http://cdn.kendostatic.com/2012.3.1114/js/kendo.aspnetmvc.min.js"></script>

<section id="content">
    <div class="row-fluid">
        @RenderBody()
        @(Html.Kendo().Chart()
            .Name("chart")
            .Title("Internet Users")
            .Series(series => {
                series.Bar(new double[] { 15.7, 16.7, 20, 23.5, 26.6 }).Name("World");
                series.Bar(new double[] { 67.96, 68.93, 75, 74, 78 }).Name("United States");
            })
            .CategoryAxis(axis => axis
                .Categories("2005", "2006", "2007", "2008", "2009")
            )
            .ValueAxis(axis => axis
                .Numeric().Labels(labels => labels.Format("{0}%"))
            )
            .Tooltip(tooltip => tooltip
                .Visible(true)
                .Format("{0}%")
            )
        )   
    </div>        
</section> 
```

但这有效。

```
 @(Html.Kendo().Chart()
            .Name("chart")
            .Title("Internet Users")
            .Series(series => {
                series.Bar(new double[] { 15.7, 16.7, 20, 23.5, 26.6 }).Name("World");
                series.Bar(new double[] { 67.96, 68.93, 75, 74, 78 }).Name("United States");
            })
            .CategoryAxis(axis => axis
                .Categories("2005", "2006", "2007", "2008", "2009")
            )
            .ValueAxis(axis => axis
                .Numeric().Labels(labels => labels.Format("{0}%"))
            )
            .Tooltip(tooltip => tooltip
                .Visible(true)
                .Format("{0}%")
            )
            .Theme("metro")
        ) 
```

# emacs - Emacs dired+tramp，UTF8 文件名错误

> ID：14002123
> 
> 赞同：4
> 
> 时间：2012-12-22T10:43:47.187
> 
> 标签：emacs, encoding, utf-8, dired, tramp

当首先使用 tramp+dired 时，我得到了这个：
![坏 utf8 符号](../Images/ebf8d13a7df25548aeb01533fd5ccb05.png)

我以为我通过以下几行解决了它：

```
(setq tramp-remote-process-environment ())
(add-to-list 'tramp-remote-process-environment "LC_ALL=en_US.utf8" 'append) 
```

但是现在发生了一些错误： ![错误的文件名，目录名长度](../Images/e795d015b88abeb40c44d3e781798d20.png)

也没有帮助：“LC_ALL=ru_RU.utf8”

现在 Dired 得到错误的文件名（目录名）长度。您可以在 dir 中看到这个，包括修改日期（也是蓝色的）。

这发生在任意文件名（不是全部）上。
因此，当 Dired 的名称不正确时，我无法操作文件。
有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:17:45.767

我报告了这个错误，作者修复了它。太棒了！
从源安装 Tramp。使用 2.2.7-pre 或更高版本。

[获取tramp](http://www.gnu.org/software/tramp/#Obtaining-Tramp)
[安装](http://www.gnu.org/software/tramp/#Installation)

```
cd ~/src
git clone git://git.savannah.gnu.org/tramp.git
# also see INSTALL file in dir
cd tramp
autoconf
./configure --with-contrib
make
make install 
```

# php - 如何对 Aptana 调试器超时进行故障排除？

> ID：14002125
> 
> 赞同：1
> 
> 时间：2012-12-22T10:44:03.180
> 
> 标签：php, aptana, zend-debugger

我已经在我的远程 Linux 服务器上安装了 Zend Debugger。我已经通过查看验证了安装`phpinfo()`。

我正在尝试在 Aptana 3.3.1 中调试 PHP 页面，但我不断收到以下错误消息：

```
A timeout occurred when the debug server attempted to connect to the following client hosts/IPs:
-192.168.1.64
-127.0.0.1
!DefaultDebugServerConnectionTest_theClientHostIPs!

Click here for more information on setting up remote debugging. 
```

单击“此处”不会执行任何操作。

我已经验证 Aptana 正在访问 dummy.php 文件，因为如果我删除它，我会收到一条错误消息，指出 dummy.php 丢失。问题似乎是 dummy.php 无法连接回我。

我尝试将路由器上的端口 10000 和 10137 转发到我的笔记本电脑，但没有帮助。Windows 防火墙没有记录任何丢弃的数据包，Apache`error_log`也没有显示任何异常。

还有什么我可以尝试的吗？

谢谢，谢恩。

# android - Contacts list crashes when accessed by app under some Android devices

> ID：14002127
> 
> 赞同：1
> 
> 时间：2012-12-22T10:44:19.900
> 
> 标签：android

In my app I give the user the opportunity to choose a number from his contacts. On my phone,(Samsung Galaxy SPlus) it works every time, without even a warning. I sent this app to some of my friends to test it before I upload it and they said that it crashed every time when choosing a name from the contacts list. I do not have access to any other device right now, so do you see anything problematic in my code?

```
search_contacts.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
                startActivityForResult(intent, 1);
            }
        });

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (data != null) {
            Uri uri = data.getData();

            if (uri != null) {
                Cursor c = null;
                try {
                    c = getContentResolver()
                            .query(uri,
                                    new String[] {
                                            ContactsContract.CommonDataKinds.Phone.NUMBER,
                                            ContactsContract.CommonDataKinds.Phone.TYPE },
                                    null, null, null);

                    if (c != null && c.moveToFirst()) {
                        String number = c.getString(0);
                        SharedPreferences settings = PreferenceManager
                                .getDefaultSharedPreferences(MainActivity.this);
                        SharedPreferences.Editor editor1 = settings.edit();
                        editor1.putString("phone", number);
                        editor1.commit();
                        System.out.println("Set phone number to: " + number);
                        send_to = number;
                        text.setText(send_to);
                        // int type = c.getInt(1);
                        // showSelectedNumber(type, number);
                    }
                } finally {
                    if (c != null) {
                        c.close();
                    }
                }
            }
        }
    } 
```

# java - 维护一个有性能的排序列表

> ID：14002129
> 
> 赞同：3
> 
> 时间：2012-12-22T10:44:54.460
> 
> 标签：java, android, algorithm, list, data-structures

**我的问题总结：**我需要一个可以快速迭代和排序的列表（通过排序方法或添加/删除对象）。

我正在编写一个游戏，其中有很多“碰撞区域”，每帧都会检查。为了优化，我有一个想法，根据它们的 X 位置对它们进行排序。问题不是所有的碰撞区域都是静态的，因为其中一些可以移动。

我已经设法处理了所有的更改，但是维护`ArrayList`（或`ConcurrentLinkedQueue`）排序使用`Collections.sort()`太慢了。

所以我有了一个新的想法：我可以使用树，每当一个区域的 X 发生变化时，我就可以从树中删除然后重新添加它，而不是再次对所有元素进行排序。但是，我认为在 TreeList 中添加和删除运算符也很昂贵。此外，遍历 Tree 不如`ConcurrentLinkedQueue`,`LinkedList`或有效`ArrayList`。

请告诉我是否有任何满足我需要的内置数据结构。如果没有这样的数据结构，我打算扩展`ArrayList`类，重写`add`方法以确保顺序（通过使用重载`add(index, item)`。如果您认为这是最好的方法，请给我找到索引的最佳方法。我已经使用 BinarySearch但我认为有一个错误：

```
@Override
public boolean add(T e) {
    // Find the position
    int left = 0;
    int right = this.size() - 1;
    int pos = right / 2;
    if (e.compareTo(this.get(0)) <= 0) {
        pos = 0;
    } else if (e.compareTo(this.get(this.size() - 1)) >= 0) {
        pos = this.size();
    } else {
        // Need: e[pos - 1] <= e[pos] <= e[pos + 1] 
        boolean firstCondition = false;
        boolean secondCondition = false;

        do {
            firstCondition = this.get(pos - 1).compareTo(this.get(pos)) <= 0;
            secondCondition = this.get(pos).compareTo(this.get(pos + 1)) >= 0;

            if (!firstCondition) {
                right = pos - 1;
                pos = (left + right) / 2;
            } else if (!secondCondition) {
                left = pos + 1;
                pos = (left + right) / 2;
            }
        } while (!(firstCondition && secondCondition));
    }

    this.add(pos, e);

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:55:37.527

我会使用树集。如果您需要允许重复，您可以使用自定义比较器。虽然迭代树集比数组稍慢，但添加和删除要快得多。

看来您正在执行 O (n) 的插入排序。树集上的插入是 O (ln n)

`TreeMap<MyKey, List<MyType>>`恕我直言，使用这样的存储重复项的最佳方法

```
Map<MyKey, List<MyType>> map = new TreeMap<>();
// to add
MyType type = ...
MyKey key = ...
List<MyType> myTypes = map.get(key);
if (myTypes == null)
    map.put(key, myTypes = new ArrayList<>());
myTypes.add(type);

// to remove
MyType type = ...
MyKey key = ...
List<MyType> myTypes = map.get(key);
if (myTypes != null) {
    myTypes.remove(myType);
    if (myTypes.isEmpty())
        map.remove(key);
} 
```

在这种情况下，添加和删除是 O(ln N)；

您可以通过将所有对象定义为不同的方式来允许“重复”是 TreeSet

```
Set<MyType> set = new TreeSet<>(new Comparator<MyType>() {
   public int compare(MyType o1, MyType o2) {
      int cmp = /* compare the normal way */
      if (cmp == 0) {
          // or use System.identityHashCode()
         cmp = Integer.compare(o1.hashCode(), o2.hashCode());
         return cmp == 0 ? 1 : cmp; // returning 0 is a bad idea.
      }
   }
} 
```

如您所见，除非您有某种方法可以使每个对象都独一无二，否则这种方法很丑陋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:53:30.240

听起来你想要一个[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:53:55.110

如果您打算在已排序的数组或 ArrayList 上使用二进制搜索/插入，那么您将获得与二叉树相同的大 O 复杂度。

所以我建议您实际*测试*提供的树实现（即`TreeSet`），而不仅仅是猜测。由于它们不是普通的树实现，如果它们的迭代速度也很快，我不会感到惊讶。

# css - 背景图像大小是否包括边框？

> ID：14002130
> 
> 赞同：3
> 
> 时间：2012-12-22T10:44:58.077
> 
> 标签：css, background-image

为元素设置背景图像时，`<div>`所需的图像大小是否受边框影响？

我正在开发一个元素为 100% 宽度的视网膜 iPhone 项目。我的背景图片是 640px 宽，我使用 background-size 让它在视网膜显示屏上很好地显示。

如果我在`<div>`遗嘱上使用边框，我需要减小图像尺寸以获得“完美”显示吗？

例如

```
320px(div) - 4px(2px border left and right) = 316px 
```

所以我的图像应该是 632px (2x316) 以获得 1:2 的“完美”像素比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:56:37.747

背景图像显示在边框的约束范围内——也就是说边框不包含在背景显示的空间中（尽管它会显示在填充上）。

`background-size: cover`使用（[MDN 参考](https://developer.mozilla.org/en-US/docs/CSS/background-size)）可能对您的特定情况有帮助？

# jquery - 使用 JQuery 查找任何点击的元素

> ID：14002135
> 
> 赞同：1
> 
> 时间：2012-12-22T10:45:43.633
> 
> 标签：jquery, jquery-ui, jsp

我只是想知道是否可以准确地找到在 jsp/html 页面上单击的元素。我不想为任何特定元素创建任何特殊的点击功能。像 Firebug 这样的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T10:48:05.277

```
$(document).click(function(event){
  // event.target is the clicked object
}); 
```

这将起作用，因为最终单击事件将冒泡到文档级别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T10:48:22.050

```
$('body').on('click', '*', function(){
    // `this` will refer to the clicked element
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T10:55:20.677

这是未经测试的，目前在移动设备上，但我建议（在纯 JavaScript 中）：

```
function wasClicked(evt) {
    var evt = evt || window.event,
          el = evt.target || evt.srcElement;
         console.log(el);
}

document.body.addEventListener('click', function(e) { wasClicked(e); }, false); 
```

我相信 IE 方法的语法`attachEvent()`是：

```
document.body.attachEvent('onclick', wasClicked); 
```

[JS Fiddle 演示（两者）](http://jsfiddle.net/davidThomas/HEHVQ/)。

参考：

*   [`attachEvent()`](http://help.dottoro.com/ljinxrmt.php).
*   [`Element.addEventListener()`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener).

# opengl - 我可以旋转 glOrtho() 的视图吗？

> ID：14002136
> 
> 赞同：3
> 
> 时间：2012-12-22T10:45:52.497
> 
> 标签：opengl, rotation, projection

我正在制作一个需要正交投影的程序。所以，我正在使用 glOrtho()。我做了一个缩放功能，但如果你可以旋转你的视图，我就在徘徊？因为 glOrho() 只与其他平面平行。或者是否有另一个投影可以做到这一点。glLookAt 可以旋转，但在远离相机时会改变尺寸。我阅读
[了如何使 glOrtho 平行六面体旋转？](https://stackoverflow.com/questions/11722273/how-can-i-make-the-glortho-parallelepiped-rotating) 但它没有给我答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:17:55.130

这里最重要的是您通常将操作拆分为两个矩阵：（模型）视图和投影。

虽然`glOrtho()`通常用 调用`glMatrixMode(GL_PROJECTION)`，但所有有关移动和旋转相机的操作（例如`glRotate*`、`glTranslate*`和`gluLookAt`）都应该在`glMatrixMode(GL_MODELVIEW)`.

在固定管道中，顶点的最终位置是通过将输入数据乘以这两个矩阵来计算的，并且使用的投影（正交或透视或非线性等）与相机变换是分开的。

# c++ - what data type use for storage of file names and file sizes?

> ID：14002137
> 
> 赞同：1
> 
> 时间：2012-12-22T10:45:56.427
> 
> 标签：c++, stl

What I need to do is to combine file names and their sizes in a one container, the file names can repeat and of course the sizes too. And second thing is that I need to sort this container by the sizes co it would be like this after sorting:

```
1100 -> a.txt
1100 -> a.txt
1200 -> a.txt
1200 -> b.txt 
```

So I can then iterate from smallest to biggest file using for loop. Something similar to arrays in php, but with both values allowed to repeat.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:49:19.167

Since you want the same as associative arrays with multiple values per key your practically asking for [`std::multimap`](http://en.cppreference.com/w/cpp/container/multimap).

### Example

```
typedef std::multimap<size_t, std::string> SFMap;
SFMap fileMap;

fileMap.insert(SFMap::value_type(1100,"a.txt"));
fileMap.insert(SFMap::value_type(1100,"a.txt"));
fileMap.insert(SFMap::value_type(1200,"a.txt"));
fileMap.insert(SFMap::value_type(1200,"b.txt"));

for(SFMap::iterator it = fileMap.begin(); it != fileMap.end(); it++){
    std::cout << it->first << " -> " << it->second << "\n";
} 
```

# php - Caching a Template in php

> ID：14002138
> 
> 赞同：0
> 
> 时间：2012-12-22T10:46:00.123
> 
> 标签：php, caching

I have a template which is of .php extension. This template contains the html maarkup along with some php variables. This is how it looks like.

```
include_once VIEWDIR . 'documentation/common/header.php';

include_once VIEWDIR . 'documentation/content/'.$this->view.'.php';

include_once VIEWDIR . 'documentation/common/leftsidebar.php';

include_once VIEWDIR . 'documentation/common/rightsidebar.php'; 
```

This is the way i am caching.

```
ob_start();
include_once('template.php');
$templateCache = ob_get_clean(); 
```

Then i store this in a .cache file.

The problem is when i load the template from cache, it is not able to read the php variables.

I know i am doing something wrong but not able to catch it. Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:50:09.223

# 一般缓存

缓存，根据定义，缓存各个变量的值。

您要做的是在模板中使用的变量之一更改其值时删除缓存。

这样，缓存将使用新值重新生成，您将拥有两全其美的优势：

*   一方面，当缓存命中时，HTTP 响应速度更快
*   另一方面，页面的动态性，当某些值发生变化时

# 在你的情况下缓存

免责声明：*这不一定将您的问题用作展示。如果您需要更中肯的答案，您应该改进您的问题*。

如果您的模板有一些经常更改的区域，而另一些则没有，那么您应该只缓存那些不经常更改的部分，并将包含更改变量的整个模板作为一个整体保持不缓存。

不要忘记按上述方式处理各个缓存，以使系统具有适当的行为。

因此，不是缓存整个文件，而是将其重写为：

```
echo $cache->get(VIEWDIR . 'documentation/common/header.php');//<-- this is a cache
include_once VIEWDIR . 'documentation/content/'.$this->view.'.php');
echo $cache->get(VIEWDIR . 'documentation/common/leftsidebar.php');//<-- this is a cache
echo $cache->get(VIEWDIR . 'documentation/common/rightsidebar.php');//<-- this is a cache 
```

并且您将模板的各个部分视为缓存本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:52:04.063

只是不要缓存它们。
您的“缓存”方式根本不是缓存，但这不是主要问题。
问题是我怀疑您是否有任何理由缓存您的模板或其输出。

所以，就让一切保持原样，没有任何“缓存”。

# tablesorter - How do exchange sorting with tablesorter

> ID：14002139
> 
> 赞同：1
> 
> 时间：2012-12-22T10:46:01.947
> 
> 标签：tablesorter

I want to sort the list of exchange. it looks the values ​​of foreign currencies. but, the country with the sort of value for money. transformed values ​​and the sort, to show the actual values​​.

I could not sort by a value converted. was the sort of values ​​that appear. How to sort with the values ​​calculated. But the secret values ​​calculated?

```
<script id="js">
    var dolar = 1.7849;
    var euro=2.3643;
    var yen=1;
    $(function() {
        $("table").tablesorter({ 
        theme: 'blue' 
        ,headers: {
                0: {
                    sorter: false
                },
                1: {
                    sorter: 'custom_sort_function'
                },
                2: {
                    sorter: false
                }
            }
        });
    });
</script>   

<table class="tablesorter">
    <thead>
        <tr>
            <th>ID</th>
            <th>Money</th>
            <th>Symbol</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>1</td><!-- exchenge value dolar * cellvalue -->
            <td>USD</td>
        </tr>
        <tr>
            <td>2</td>
            <td>1</td><!-- exchenge value euro * cellvalue -->
            <td>EUR</td>
        </tr>
        <tr>
            <td>3</td>
            <td>1YEN</td><!-- exchenge value yen * cellvalue -->
            <td></td>
            <td>TL</td>
        </tr>       
    </tbody>
</table>

Sample View:
Sort Money Field ASC
ID   Money   Symbol
--   ------- ----------
1    1YEN    YEN
2    1USD    USD
3    1EURO   EUR

Sort Money Field Desc
ID   Money   Symbol
--   ------- ----------
3    1EURO   EUR
2    1USD    USD
1    1YEN    YEN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:09:23.357

我不确定你想要什么，但我整理了[这个演示](http://jsfiddle.net/Mottie/abkNM/160/)，它将根据计算的汇率对 Money 列进行排序，但你不知道发生了什么，所以我在解析器中包含了一行来添加计算的值到表格单元格。

我稍微修改了 HTML：

```
<tbody>
    <tr>
        <td>1</td>
        <td data-value="usd">1</td><!-- exchenge value dolar * cellvalue -->
        <td>USD</td>
    </tr>
    <tr>
        <td>2</td>
        <td data-value="eur">1</td><!-- exchenge value euro * cellvalue -->
        <td>EUR</td>
    </tr>
    <tr>
        <td>3</td>
        <td data-value="yen">1</td><!-- exchenge value yen * cellvalue -->
        <td>YEN</td>
    </tr>       
</tbody> 
```

然后使用此代码：

```
// add the exchange rate out here
var exchange = {
    usd : 1.7849,
    eur : 2.3643,
    yen : 1
};

// add parser through the tablesorter addParser method 
$.tablesorter.addParser({ 
  // set a unique id 
  id: 'exchange', 
  is: function(s) { 
    // return false so this parser is not auto detected 
    return false; 
  }, 
  format: function(s, table, cell, cellIndex) { 
    // format your data for normalization
    var $c = $(cell),
        cur = $c.attr('data-value'),
        val = $.tablesorter.formatFloat(s, table) * (cur ? exchange[cur] : 1);
    $c.append(' (' + val.toFixed(2) + ')');
    return val; 
  }, 
  // set type, either numeric or text 
  type: 'numeric' 
}); 

$('table').tablesorter({
    theme : 'blue',
    headers: {
        1: { sorter: "exchange" }
    }
}); 
```

如果您不想将计算值添加到单元格，则只需删除此行：

```
$c.append(' (' + val.toFixed(2) + ')'); 
```

希望，我明白你想要什么。

# cocos2d-iphone - How to after recreate of same sprite, continue touch events

> ID：14002141
> 
> 赞同：0
> 
> 时间：2012-12-22T10:46:11.653
> 
> 标签：cocos2d-iphone, touch

i have 2 layers and on ccTouchMoves event i have to destroy and recreate sprite to move from 1st layer to 2nd

i did this something like that

```
-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
            sprite = [CCSprite spriteWithFile:@"file.png"];
            [[self parent] addChild: sprite]
            if (sprite)
            {
                [sprite ccTouchBegan:touch withEvent:event];
            //  [character ccTouchMoved:touch withEvent:event];
            }
            [self removeFromParentAndCleanup:true];
} 
```

sprite created and called method ccTouchBegan but after that method everything is terminate **how to call ccTouchMoved and ccTouchEnd just like simple touch event**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:00:21.610

如果它是同一个精灵，为什么要销毁并重新创建它？您可以继续使用相同的精灵。在[Kobold2D](http://www.kobold2d.com)中，我在 CCNode 类别中添加了此方法，以将节点的所有权从当前父节点转移到不同的父节点：

```
-(void) transferToNode:(CCNode*)targetNode
{
    CCNode* selfNode = [self retain];
    [self removeFromParentAndCleanup:NO];
    [targetNode addChild:selfNode z:selfNode.zOrder tag:selfNode.tag];
    [selfNode release];
} 
```

重要的部分是从其当前父节点中删除节点（您的精灵）而不进行清理，以便调度程序和操作继续运行。然后只需将其作为子节点添加到不同的节点（您的第二层）。

# encryption - 如何结合对称和非对称加密？

> ID：14002144
> 
> 赞同：1
> 
> 时间：2012-12-22T10:46:41.263
> 
> 标签：encryption, cryptography, openssl, public-key-encryption

在谈论非对称加密时，人们常说由于某些原因，您不应该对整个消息进行非对称加密，例如性能考虑。

通常建议的工作流程是：

*   为对称加密创建随机密钥
*   使用此随机密钥加密消息
*   使用非对称加密对随机密钥进行加密
*   将加密消息和加密密钥发送给收件人

到现在为止还挺好。

只有两个问题：

1.  如何组合发送加密消息和加密密钥？有标准吗？或者我对如何做到这一点完全自由？（如果有标准，我更喜欢标准）。
2.  有没有关于如何创建随机密钥的最佳实践？更具体地说：OpenSSL 中是否有特定的函数可以用于此目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:56:39.917

1.  这在评论中得到了回答。我最好建议检查 OpenPGP - 它更容易理解，CMS 有一个巨大的 ASN.1 结构过载。
2.  随机密钥应该是完全随机的字节串，由良好的随机源生成。

# php - 带有 2 个文本字段的提示框

> ID：14002148
> 
> 赞同：0
> 
> 时间：2012-12-22T10:47:39.090
> 
> 标签：php, javascript

我正在尝试制作一个社交网站`pop up window`。当用户单击按钮时，我需要创建一个（可能是 javascript 中的提示框）`create message`。弹出窗口应包含 2 个文本字段，就像 facebook 消息弹出窗口一样。第一个用于收件人的姓名和消息的第二个姓名。我搜索了很多，但找不到正确的姓名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:04:30.387

请参阅我制作的示例小提琴。进行必要的调整并使用它。

```
$("p").click(function () {
   $("<div class='popup'></div>").html('<input type="text" /><br /><input type="text" />').appendTo("body");
});​ 
```

这是它的样本小提琴。

[http://jsfiddle.net/zsfE3/9/](http://jsfiddle.net/zsfE3/9/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:54:05.160

没有用于创建自定义多字段输入的简单本机方法。[prompt](https://developer.mozilla.org/en-US/docs/DOM/window.prompt)提供了一个几乎但不完全的解决方案。

因此，您需要编写脚本来生成与 DOM 的接口。像[jQuery UI](http://jqueryui.com)这样的库提供了通用的方法来创建像这样的复杂的 UI 组件。

他们的对话框元素的[模态表单](http://jqueryui.com/dialog/#modal-form)实例可以提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T10:54:20.853

您可以实现自己的弹出窗口并为其提供您想要的任何功能。`<body>`一个好的技术是在页面标签的最后放置一个 div 元素。给它绝对定位和你拥有的最高 z-index 并将显示设置为无。

您将弹出内容放置在此元素中，并且无论何时要显示弹出窗口，都将包装器 div 设置为阻止显示。

### [这是一个快速演示](http://jsfiddle.net/gp54V/1/)

# java - FacesContext.getCurrentInstance() returns null

> ID：14002149
> 
> 赞同：0
> 
> 时间：2012-12-22T10:47:44.710
> 
> 标签：java, jakarta-ee, jsf-2

> **Possible Duplicate:**
> [FacesContext == null](https://stackoverflow.com/questions/2803160/facescontext-null)

I have an abstract class AbsClass in a API and Bean ViewBean. AbsClass abstract class is implemented with a name AbsClassImpl and abstract methods are declared. For arthiecturel aim, AbsClass is used in ViewBeans. But how I can reach ViewBean from AbsClassImpl. it is required because if some changed occured in API say raise an event, it has to notify ViewBean and then user on interface via AbsClassImpl->eventHandler() method.

FacesContext.getCurrentInstance() returns null since I think AbsClassImpl class is not in Context or somewhere else.

Could you give me an advice how to handle this situation? I am using JSF 2.0

# sharepoint - Sharepoint 2010 foundation and WAMP server on same machine (Win 7)

> ID：14002156
> 
> 赞同：0
> 
> 时间：2012-12-22T10:48:23.317
> 
> 标签：sharepoint, wamp

I've earlier installed sharepoint 2010 foundation on my win 7 notebook. recently installed wamp serever. Now when i try to access localhost though wamp i'm getting 404 error. Is there a chance both SP foundation 2010 and wamp can co-exist on the same machine.

Need help badly

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:24:45.863

端口冲突我应该认为，需要将 apache 设置为使用端口 80 以外的东西

# numpy - How to set time zone of values in a Pandas DataFrame?

> ID：14002158
> 
> 赞同：16
> 
> 时间：2012-12-22T10:49:03.097
> 
> 标签：numpy, timezone, pandas

I'd like to set the time zone of the values of a column in a Pandas DataFrame. I am reading the DataFrame with pandas.read_csv().

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-22T10:50:53.967

[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html#pandas.io.parsers.read_csv)您可以通过手动设置函数直接将日期读取为 UTC `date_parser`，例如：

```
from dateutil.tz import tzutc
from dateutil.parser import parse

def date_utc(s):
    return parse(s, tzinfos=tzutc)

df = read_csv('my.csv', parse_dates=[0], date_parser=date_utc) 
```

.

如果您正在创建时间序列，则可以使用以下`tz`参数`date_range`：

```
dd = pd.date_range('2012-1-1 1:30', periods=3, freq='min', tz='UTC')

In [2]: dd
Out[2]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-01-01 01:30:00, ..., 2012-01-01 01:32:00]
Length: 3, Freq: T, Timezone: UTC 
```

.

如果您的 DataFrame/Series 已经按时间序列索引，则可以使用该[`tz_localize`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.tz_localize.html#pandas.DataFrame.tz_localize)方法设置时区：

```
df.tz_localize('UTC') 
```

或者如果它已经有一个时区，请使用[`tz_convert`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.tz_convert.html#pandas.DataFrame.tz_convert)：

```
df.tz_convert('UTC') 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-04-27T12:10:33.053

```
# core modules
from datetime import timezone, datetime

# 3rd party modules
import pandas as pd
import pytz

# create a dummy dataframe
df = pd.DataFrame({'date': [datetime(2018, 12, 30, 20 + i, 56)
                            for i in range(2)]},)
print(df)

# Convert the time to a timezone-aware datetime object
df['date'] = df['date'].dt.tz_localize(timezone.utc)
print(df)

# Convert the time from to another timezone
# The point in time does not change, only the associated timezone
my_timezone = pytz.timezone('Europe/Berlin')
df['date'] = df['date'].dt.tz_convert(my_timezone)
print(df) 
```

给

```
 date
0 2018-12-30 20:56:00
1 2018-12-30 21:56:00
                       date
0 2018-12-30 20:56:00+00:00
1 2018-12-30 21:56:00+00:00
                       date
0 2018-12-30 21:56:00+01:00
1 2018-12-30 22:56:00+01:00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-08T04:14:15.623

df['date'] = df['date'].dt.tz_localize('UTC')

这似乎从我的“天真”时区开始工作。

# haskell - Multiple assignments to the same register in an RTL block with Kansas Lava

> ID：14002159
> 
> 赞同：38
> 
> 时间：2012-12-22T10:49:05.510
> 
> 标签：haskell, vhdl, lava

I'm having trouble understanding Kansas Lava's behaviour when an `RTL` block contains multiple assignments to the same register. Here's version number 1:

```
foo :: (Clock c) => Signal clk Bool
foo = runRTL $ do
    r <- newReg True
    r := low    
    return $ var r 
```

This behaves as I expected it:

```
*Main> takeS 10 foo :: Seq Bool
low | low | low | low | low | low | low | low | low | low | ? . 
```

The generated `VHDL` is:

```
architecture str of assignments is
  signal sig_2_o0 : std_logic;
begin
  sig_2_o0 <= '0';
  OUTPUT <= sig_2_o0;
end architecture str; 
```

However, I hoped this other version would also work:

```
foo = runRTL $ do
    r <- newReg True

    r := low
    r := high
    return $ var r 
```

But it doesn't, and the second assignment isn't taken into account:

```
*Main> takeS 10 foo :: Seq Bool
low | low | low | low | low | low | low | low | low | low | ? . 
```

The reason I'm confused is because `reg` and `var` are defined in terms of a full clock cycle, so it's not like I could do impossible-to-synthesize things like branch based on `r` and then reassign a new value to it. So why doesn't this second form work?

It's not just a simulation issue either: the generated `VHDL` for the second version clearly shows that the second assignment is thrown away at generation time:

```
architecture str of assignments2 is
  signal sig_2_o0 : std_logic;
begin
  sig_2_o0 <= '0';
  OUTPUT <= sig_2_o0;
end architecture str; 
```

So basically, I would have expected the output to be more like

```
architecture str of assignments2 is
  signal sig_2_o0 : std_logic;
begin
  sig_2_o0 <= '0';
  sig_2_o0 <= '1';
  OUTPUT <= sig_2_o0;
end architecture str; 
```

but I'm not sure what that would/should mean in VHDL.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T09:44:25.957

问题是您正在使用多个**非阻塞**语句来分配信号。

```
 sig_2_o0 <= '0';
  sig_2_o0 <= '1'; 
```

这转化为：

```
at next event assign '0' to sig_2_o0.
at next event assign '1' to sig_2_o0. 
```

这与使用**阻塞**分配不同：

```
 sig_2_o0 := '0';
  sig_2_o0 := '1'; 
```

这将转化为：

```
assign '0' to sig_2_o0.
assign '1' to sig_2_o0. 
```

**阻止分配**

当您使用阻塞分配时，值是明确定义的。首先它将设置为“0”，然后用“1”覆盖它。在此示例中，对于仿真或合成硬件，第一个阻塞分配应该没有影响。您可以将其视为第一次分配和第二次分配之间的延迟为 0。这意味着你有一个宽度为 0 的脉冲，这实际上什么都不是。它相当于只有最后一个赋值，第一个完全省略。需要注意的是，如果您对分配进行延迟，例如“1 ns 之后”，那么您会注意到模拟中的第一个分配，然后是第二个分配。在硬件中，延迟被忽略，因此添加延迟不会有任何变化。事实上，出于这个原因，强烈建议不要在打算合成的 RTL 中插入延迟。

**非阻塞赋值**

但是，当您使用非阻塞分配时，模拟器会为下一次事件安排两个分配。将信号设置为“1”，同时将其设置为“0”。那么信号将采用哪个预定任务呢？没有办法知道。它可能是任何一个值，因为它被错误地分配了。当遇到像这样的多个非阻塞分配时，地球上的每个 lint 检查器和综合工具都应该抛出错误。可以模拟它，但显然 RTL 存在问题。

# mysql - MySQL sum from two joined tables and multiple rows - need to bring out total or all rows

> ID：14002163
> 
> 赞同：1
> 
> 时间：2012-12-22T10:49:16.010
> 
> 标签：mysql, join, sum

I have the following query which works fine when bringing out the total price of each order (thanks to the stackoverflow community):

```
SELECT sum((ordered_items.price + ordered_items.vat) * ordered_items.qty) + orders.postage_price + orders.postage_vat as total_price
FROM orders
JOIN ordered_items
ON orders.id_orders = ordered_items.order_id
GROUP BY orders.id_orders 
```

However I also want to bring out the total amount of all the orders added together. I have tried taking off the GROUP BY but this returns the wrong price. I've figured that it's adding up all the items correctly, but then only adding on one postage.

*   ordered_items - includes all the items ordered (so there can be multiple rows)
*   orders - includes the postage price of the order (there will only ever be one row per order here)

Many thanks in advance for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:25:03.713

也许我遗漏了一些东西，但是，你不能把它放在一个子查询中以获得所有订单的总数：

```
SELECT sum(total_price) TotalAllOrders
FROM
(
  SELECT sum((ordered_items.price + ordered_items.vat) * ordered_items.qty) 
         + orders.postage_price + orders.postage_vat as total_price
  FROM orders
  JOIN ordered_items
    ON orders.id_orders = ordered_items.order_id
  GROUP BY orders.id_orders 
) src ; 
```

您还可以使用 group by 修饰符**[`WITH ROLLUP`](http://dev.mysql.com/doc/refman/5.5/en/group-by-modifiers.html)**来获得总和和每个订单的总和：

```
 SELECT sum((ordered_items.price + ordered_items.vat) * ordered_items.qty) 
         + orders.postage_price + orders.postage_vat as total_price
  FROM orders
  JOIN ordered_items
    ON orders.id_orders = ordered_items.order_id
  GROUP BY orders.id_orders 
    WITH ROLLUP ; 
```

# java - connecting two web view with hyperlink event in javafx

> ID：14002164
> 
> 赞同：1
> 
> 时间：2012-12-22T10:49:18.633
> 
> 标签：java, swing, javafx-2, javafx

I am trying to open webpage in another webview by using following code. In this program i am using two webview in one test1.htm is displayed and i want on clicking the hyperlink in first webview the new page should open in another webview

```
class webcontrol extends JFrame
{

    webcontrol()
    {
        setLayout(null);
        Container cp=this.getContentPane();
        fxpanel= new JFXPanel();
        add(fxpanel);
        fxpanel.setBounds(660, 0, 230, screenSize.height-120);

        Platform.runLater(new Runnable() {
            public void run()
            {
                initFx(fxpanel,fxpanel1);
            }
        }
   );

 }

 private static void initFx(final JFXPanel fxpanel, JFXPanel fxpanel1)
 { 
     WebView webview=null,webview1=null;
     WebEngine eng=null,eng1=null; 
     Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();

     Group group1= new Group();
     Scene scene1= new Scene(group1);
     fxpanel1.setScene(scene1);    

     webview1 = new WebView ();
     group1.getChildren().removeAll();
     group1.getChildren().add(webview1);

     Group group= new Group();
     Scene scene= new Scene(group);
     fxpanel.setScene(scene);    
     webview = new WebView ();
     group.getChildren().removeAll();

     group.getChildren().add(webview);

     eng= webview.getEngine();
     eng1=webview1.getEngine();
     File htmlFile = new File("d:/newfolder/test.htm");
     File htmlFile1 = new File("d:/newfolder/test1.htm");
     try
     {
         eng.load(htmlFile.toURI().toURL().toString());
         eng1.load(htmlFile1.toURI().toURL().toString());
     }
     catch(Exception ex)
     {
         ex.printStackTrace();
     }
 }

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:02:26.840

没有关闭字符串：

```
("d:/newfolder/test1.htm); 
```

然而

```
("d:/newfolder/test.htm"); 
```

很好。

# java - Java counting array objects

> ID：14002168
> 
> 赞同：1
> 
> 时间：2012-12-22T10:49:59.770
> 
> 标签：java, arrays, object, counting

I have some questions regarding arrays in java:

How many objects are created in the following expressions?

(a) `new int[0]` : There is one object created, an array of size 0.???

(b) `new int[2][2]` : There is one object created, an array with 2 rows and columns.???

(c) `new int[2][]` : There is no object created???

I was wondering if my solutions next to the expressions are correct. If not, hopefuly you can help and give me some explanation about them. I don't really get what im supposed to do.

Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:59:53.767

以下是 Java 规范的摘录：

> 在 Java 编程语言中，数组是对象（第 4.3.1 节），是动态创建的，并且可以分配给 Object 类型的变量（第 4.3.2 节）。Object 类的所有方法都可以在数组上调用。

这意味着每个数组都是一个自己的对象，这使您的答案**a)**正确。

**b)**创建 3 个对象：首先创建 1 个数组，然后创建两个数组，每个数组包含 2`int`秒。我不会计算`int`-entries，因为它们是 Java 中的原始类型。

**c)**创建了 1 个对象：1 个包含两个空条目的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T10:57:12.343

**新整数[0]**

是的，这是一个空数组，创建了一个对象。

```
 int[] emptyArray = new int[0];
    System.out.println(emptyArray.length); // Outputs 0 
```

**新整数[2][2]**

是的，这创建了 2 行和列的数组，创建了 3 个对象。

```
 int[][] bar = new int[2][2];
    System.out.println(bar.getClass()); // Outputs class [[I
    int[] bar1 = bar[0];
    System.out.println(bar1.getClass());  // Outputs class [I
    int[] bar2 = bar[1];
    System.out.println(bar2.getClass());  // Outputs class [I 
```

**新 int[2][]**

Java 支持锯齿状数组。这意味着当你创建`int[2][]`这意味着你有一个不同大小的数组`int[]`。此处仅创建 1 个对象。

```
 int[][] foo = new int[2][];
    System.out.println(foo[0]);  // Outputs null
    System.out.println(foo[1]);  // Outputs null
    foo[0] = new int[10];
    foo[1] = new int[5]; 
```

# .net - .net Razor ajax 复制视图

> ID：14002170
> 
> 赞同：1
> 
> 时间：2012-12-22T10:50:39.127
> 
> 标签：.net, asp.net-mvc-3, razor, view

我正在尝试在我的简单测试应用程序中使用 ajax。我有一个下拉列表、一个按钮和一个 div，我在其中显示从下拉列表中选择的项目。这是代码：

我的控制器：

```
public ActionResult Index()
    {
        if (Session["items"] == null)
        {
            Session["items"] = new List<Item>();
        }

        var items = new Item[] { 
            new Item("1", "one"),
            new Item("2", "two"),
            new Item("3", "three")
        };

        ViewBag.list = Session["items"];
        ViewBag.items = new SelectList(items, "Id", "Value");
        return View(new Item());
    }

    [HttpPost]
    public ActionResult Index(Item item)
    {
        ((List<Item>)Session["items"]).Add(item);
        return RedirectToAction("Index");
    } 
```

物品类别：

```
public class Item
{
    private string id;
    private string value;

    public Item(string id, string value)
    {
        this.id = id;
        this.value = value;
    }

    public Item()
    {
    }

    public string Id { get { return id; } set { id = value; } }
    public string Value { get { return value; } set { this.value = value; } }
} 
```

我的观点：

```
@model TestExample.Models.Item
@{
   ViewBag.Title = "Index";
 }
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "itemList" }))
{
  <div id="btn">
    @Html.DropDownListFor(m => m.Id, ViewBag.items as SelectList)
    <input type="submit" value="Add" />
  </div>
}

<div id="itemList">
  @foreach (TestExample.Models.Item item in ViewBag.list as     List<TestExample.Models.Item>)
  {
    <h1>@item.Value</h1>
  }
</div> 
```

问题是，每当我从列表中选择项目并按添加时，我都会复制我的下拉框和按钮以及显示在 div 中的项目。这发生在第一次单击之后，并且在它之后我总是看到两个下拉框和按钮，并且列表中的项目是重复的。这是什么原因？我该如何解决它..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:58:52.727

在 ajax 发布后，您将相同的页面插入：

```
<div id="itemList">
  ...
</div> 
```

这就是为什么你有 2 个按钮等。在这个动作中：

```
[HttpPost]
public ActionResult Index(Item item) { ... } 
```

您只需要返回包含列表项的部分视图。

# python - 如何在 django 自定义身份验证后端出现错误消息

> ID：14002173
> 
> 赞同：3
> 
> 时间：2012-12-22T10:50:49.707
> 
> 标签：python, django, templates, authentication, backend

我已经为我的 django 项目编写了一个新的身份验证后端，但是当用户名或密码不正确时，我无法在输出中显示错误消息。

这是我的身份验证功能代码：

```
def authenticate(self,username=None,password=None ):
    try:
        authService = AuthenticationLocator().getAuthenticationHttpSoap11Endpoint()
        authRequest = authenticateRequest()
        authRequest._Username = username
        authRequest._Password = password
        authResult = authService.authenticate(authRequest)

        if authResult._return[0] == 'true':

            try:
                user = User.objects.filter(username=username)
                if len(user) > 0:
                    usr = user[0]
                else:
                    usr = self.addUser(username)

#               Correct Login
                return usr

            except User.DoesNotExist:
                return None

        elif authResult._return[0] == 'error':
#           Connection Error
            return None
        elif authResult._return[0] == 'false':
#           InCorrect User
            return None
    except :
        return None

def get_user(self, user_id):
    try:
        return User.objects.get(pk=user_id)
    except User.DoesNotExist:
        return None 
```

当我的用户名和密码不正确时，我不知道应该编码什么。

我的登录模板是这样的：

```
{% block content %}
{% if error_message %}
<p class="errornote">{{ error_message }}</p>
{% endif %}
<div id="content-main">
    <form action="{{ app_path }}" method="post" id="login-form">
        {{ form.non_field_error }}
        {% csrf_token %}
        <div>
            {{ message }}
        </div>
        <div class="form-row">
            <div class="form_cell"><label for="id_username">{% trans 'Username:' %}</label></div>
            <div class="form_cell"><input type="text" name="username" id="id_username" /></div>
        </div>
        <div class="form-row">
            <div class="form_cell"><label for="id_password">{% trans 'Password:' %}</label></div>
            <div class="form_cell"><input type="password" name="password" id="id_password" /></div>
            <input type="hidden" name="this_is_the_login_form" value="1" />
        </div>
        <div class="submit-row">
            <label>&nbsp;</label><input type="submit" value="{% trans 'Log in' %}" />
        </div>
    </form>
<script type="text/javascript">
document.getElementById('id_username').focus()
</script>
</div>
{% endblock %} 
```

请尽快帮助我;-)

THNX 穆罕默德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T15:31:59.497

您需要在身份验证后端保存错误：

```
def authenticate(self,username=None,password=None,errors=[]):
    ... 
    errors.append('Connection error.') 
```

并在 django.contrib.auth.forms 中编写您的 AuthenticationForm 并修改 clean 方法：

```
def clean(self):
    ...
    errors = []
    self.user_cache = authenticate(username=username, password=password, errors=errors)
    ...
    raise form.ValidationError(" ".join(errors)) 
```

# excel - Excel 空日期列需要由 ADODB 和 vbscript 更新

> ID：14002177
> 
> 赞同：0
> 
> 时间：2012-12-22T10:51:05.170
> 
> 标签：excel, vbscript, ado, adodb, vba

我正在使用 MS Excel-2010。我有一个如下的 excel 表：

```
Process#       requirementrcvd     designdate     codingdate      test1 date      test2 date   deliverdate

  11           10/11/2009          12/12/2009     02/02/2011      02/03/2011      09/03/2011   10/04/2011
  12           10/11/2010          12/12/2011     15/02/2012      
  13           10/11/2009          12/12/2009     02/02/2011      02/03/2011 
```

所有日期都以递增的值给出。但我试图获得一些`ADODB`功能，通过它我可以将空的日期值设置为大于该记录的最后一列日期的值。

比如说，作为一个示例过程#12 test1 date,test2 date,delivery date 是`NULL`，所以通过 .vbs 脚本它应该设置为`16/02/2012,17/02/2012,18/02/2012`.

**代码：**

选项显式

```
Dim conn, cmd, rs
     Dim clauses(34), i
Dim xlApp, xlBook
Dim tempDate,LenDate

Set conn = CreateObject("ADODB.Connection")
With conn
.Provider = "Microsoft.ACE.OLEDB.12.0"
.ConnectionString = "Data Source=""D:\AravoVB\Final Scripts\GE_Wing_To_Wing_Report - Copy.xlsx"";" & _
    "Extended Properties=""Excel 12.0;HDR=Yes"""
.Open
End With
'tempDate=""
For i = 0 To 34
clauses(i) = "IIf(IsNull([Task" & i + 1 & " Start Date]),Date()+"& i &",[Task" & i + 1 & " Start Date]) < IIf(IsNull([Task" & i + 2 & " Start Date]),Date()+"& i &",[Task" & i + 2 & " Start Date])"
tempDate=tempDate & "NVL([Task" & i + 1 & " Start Date],Date()+"& i &"),"
Next
'LenDate=Len(tempDate)-1
'tempDate=Mid(tempDate,1,LenDate)
MsgBox(tempDate)

Set cmd = CreateObject("ADODB.Command")
cmd.CommandText = "SELECT * FROM [GEWingToWingMay25$] WHERE [Business Process ID] NOT IN (" & "SELECT [Business Process ID] FROM [GEWingToWingMay25$] WHERE " & Join(clauses, " OR ") & ")"
MsgBox(cmd.CommandText)
cmd.ActiveConnection = conn 
Set rs = cmd.Execute

Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = True
Set xlBook = xlApp.Workbooks.Add
xlBook.Sheets(1).Range("A1").CopyFromRecordset cmd.Execute
'xlBook.Sheets(1).Cells(1,25).Value=cmd.CommandText 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:26:12.343

您需要 UPDATE 语句而不是 SELECT 语句。具体是这样的：

```
cmd.CommandText = _
    "UPDATE [GEWingToWingMay25$] " & _
    "SET [Task1 Start Date] = Now() " & _
    "WHERE [Business Process ID] NOT IN (" & _
        "SELECT [Business Process ID] " & _
        "FROM [GEWingToWingMay25$] " & _
        "WHERE " & Join(clauses, " OR ") & 
    ")" 
```

# python - Flask：如何从模板目录提供静态文件？

> ID：14002178
> 
> 赞同：5
> 
> 时间：2012-12-22T10:51:27.650
> 
> 标签：python, flask, jinja2

我正在使用 Flask 开发 SAAS 应用程序，我希望用户能够创建/上传/使用他们自己的自定义模板。这就是我现在的目录结构：

```
/flaskapp
    /application.py
    /static
        /style.css
    /templates (site & admin templates goes here)
        /hello.html
    /userdata
        /user1
            /template1
                 hello.html
            /template2
                 hello.html
        /user2
            /template1
                 hello.html
            /template2
                 hello.html 
```

我可以使用通过这个 stackoverflow 问题找到的解决方案为用户指定的模板提供服务：[如何动态选择要在烧瓶中使用的模板目录？](https://stackoverflow.com/questions/13598363/how-to-dynamically-select-template-directory-to-be-used-in-flask)但是如何从模板目录提供静态文件。而不是从我提供静态文件，`/flaskapp/static/`我想使用`/flaskapp/userdata/<user>/<current-template>/static/`目录提供静态文件，并且将在运行时动态确定。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:37:26.833

大概你在 Flask 前面使用了一个网络服务器。解决此问题的一种方法（我通常在将 Apache + mod_wsgi 用于自定义 WSGI 应用程序时使用）是通过 Web 服务器直接从磁盘提供目录。在 Apache 上，我只是为此使用 Alias 指令。

如果您想改变每个用户在给定 URL 下提供的文件，则必须通过 Flask 管道传输文件。您必须弄清楚如何正确路由请求；之后，您也许可以使用[wsgi.file_wrapper](http://www.python.org/dev/peps/pep-0333/#optional-platform-specific-file-handling)来发送正确的文件（尽管我不确定您是如何通过 Flask 获得的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T10:47:03.857

这是我用来从任何系统目录提供文件的东西。

该应用程序在特定目录中搜​​索特定请求的文件：

当有人访问**http:/host/where/to/serve/files/example_file.txt**时，应用程序将尝试返回**example_file.txt**作为附件，如果文件不存在，它将返回 404。

您可以调整它并使用您的用户变量构建 DIRECTORY_TO_SERVE_PATH。

如果您有任何限制，您还应该验证要提供的文件，因为**这会返回路径中存在的任何文件**。

```
import os
from flask import abort, send_from_directory

DIRECTORY_TO_SERVE_PATH = '/where/files/are/in/disk/'

@app.route('/where/to/serve/files/<path:filename>')
def download_file(filename):
    if os.path.exists(DIRECTORY_TO_SERVE_PATH + filename):
        return send_from_directory(DIRECTORY_TO_SERVE_PATH, filename, as_attachment=True)
    else:
        abort(404) 
```

# java - 在android中使用kso ap2上传的空对象

> ID：14002179
> 
> 赞同：2
> 
> 时间：2012-12-22T10:51:33.347
> 
> 标签：java, android, web-services, ksoap2

每次我上传一个新对象时，它都会向数据库提交一个空对象并忽略我为其设置的所有参数。

这是安卓端：

```
public void createGroupServ(String groupName)
{
    request = new SoapObject(NAMESPACE, "createGroup");

    Group gr = new Group();
    gr.setGroupId(1L);
    gr.setGroupName("xxxx");
    gr.setUsers(null);

    PropertyInfo object = new PropertyInfo();
    object.setName("arg0");
    object.setValue(gr);
    object.setType(gr.getClass());
    request.addProperty(object);

    envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet = false;
    envelope.setOutputSoapObject(request);
    envelope.addMapping(NAMESPACE, "group", new Group().getClass());

    androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true; 
```

}

和域类组：

```
public class Group implements KvmSerializable {
    private long groupId;
    private String groupName;
    private List<User> users = null;

...setter and getters ...
} 
```

我的 WSDL xml：

```
<xs:complexType name="group">
<xs:sequence>
<xs:element name="groupId" type="xs:long"/>
<xs:element name="groupName" type="xs:string" minOccurs="0"/>
<xs:element name="users" type="tns:user" nillable="true" minOccurs="0" maxOccurs="unbounded"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="createGroup">
<xs:sequence>
<xs:element name="arg0" type="tns:group" minOccurs="0"/>
</xs:sequence>
</xs:complexType> 
```

关于为什么不使用组名参数上传整个对象的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:01:52.550

用这个

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
request.addproperty("arg0",gr); 
```

也不要忘记在方法中添加这个 -

```
void customMethod(@WebParam(name = "arg0")String arg0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:30:41.067

好的，我已经解决了这个问题。我没有实现`KvmSerializable`接口的方法-

```
public Object getProperty
public int getPropertyCount
public void getPropertyInfo
public void setProperty 
```

可以在这里找到： [http ://seesharpgears.blogspot.co.uk/2010/10/ksoap-android-web-service-tutorial-with.html](http://seesharpgears.blogspot.co.uk/2010/10/ksoap-android-web-service-tutorial-with.html)

此外，我将我的肥皂对象请求作为一个单独的类，因为它对我不起作用`MainActivity`。

# mysql - HQL 查询的简单困难

> ID：14002187
> 
> 赞同：0
> 
> 时间：2012-12-22T10:53:12.210
> 
> 标签：mysql, hibernate, hql

我在执行这样的 HQL 查询时遇到问题：

```
select new myPackage.view.CoverDocumentReportView(Re.code AS fulCd,
Re.creditPrice AS crtprc,
Re.debitPrice  AS dbtprc,
(Re.debitPrice - Re.debitPrice) AS redbtprc,
(Re.creditPrice- Re.creditPrice) AS recrtprc,
(Re.debitPrice-Re.creditPrice)   AS rem) 
from 
(select  fullCode as code, 
     sum(creditPrice) as creditPrice ,
     sum(debitPrice)  as debitPrice   
from    DocumentMaster DM,
     DocumentAccount   DA,
     Tree              T ,
     AccountTree       AT, 
     DocumentDetailed  DD 
where DM.id =  DA.documentMaster  and  
      DA.accountTree =  T.id      and   
      DA.accountTree =  AT.id     and   
      DD.documentAccount =  DA.id 
group by  DA.accountTree ) As Re 
```

* * *

**1）** 如果我这样执行：

```
SQLQuery crit = (SQLQuery) session
            .createSQLQuery(sql).setResultTransformer(Transformers.aliasToBean(CoverDocumentReportView.class));
ArrayList<CoverDocumentReportView> li =  (ArrayList<CoverDocumentReportView>) crit.list(); 
```

> 错误 2012-12-22 14:16:19,838 [http-8080-1] org.hibernate.util.JDBCExceptionReporter：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '.datx.web.accounting.view.CoverDocumentReportView(Re.code AS fulCd, Re.creditP' 附近使用正确的语法

* * *

**2）** 如果我用这个执行它：

```
Query query = session.createQuery(sql).setResultTransformer(Transformers.aliasToBean(CoverDocumentReportView.class));
ArrayList<CoverDocumentReportView> li =  (ArrayList<CoverDocumentReportView>)query.list(); 
```

错误将是：

> 错误 2012-12-22 14:51:46,709 [http-8080-1] org.hibernate.hql.ast.ErrorCounter：第 1:224 行：意外令牌：（错误 2012-12-22 14:51:46,709 [http -8080-1] org.hibernate.hql.ast.ErrorCounter：第 1:308 行：意外令牌：总和

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:40:59.910

SQL 和 HQL 是两种不同的语言。

HQL 不支持 from 子句中的子查询，因此该查询不能是 HQL 查询。

并且 SQL 不知道 Java 对象，并且没有任何`new()`允许创建它们的函数，因此该查询也不是有效的 SQL 查询。

使其成为有效的 SQL 查询，使用 执行它`createSQLQuery()`，然后遍历结果并从返回的行创建对象的实例。或者像你正在做的那样使用结果转换器，它会为你做到这一点。结果转换器将使用您分配给 SQL 查询的返回列的别名来为您创建 bean。您不需要`new CoverDocumentReportView()`查询中的任何内容即可使其正常工作。有关详细信息，请阅读 javadoc。

# c++ - 从qt中的对话框访问主窗口

> ID：14002194
> 
> 赞同：0
> 
> 时间：2012-12-22T10:54:11.067
> 
> 标签：c++, qt

在主窗口中它们是 lineEdit_1，在对话框中它们是 lineEdit_2。单击按钮后，将打开对话窗口。现在我需要 lineEdit_2 在主窗口中获取 lineEdit_1 的值。

（主窗口类是`MainWindow`，对话窗口类是`dialog`）

我试图这样做，但它给出了一个错误`error: ISO C++ forbids declaration of 'MainWindow' with no type`

对话框.h

```
MainWindow *main; //declair a pointer to the main window 
```

对话框.cpp

```
lineEdit_2->setText(main->lineEdit_1->text()); 
```

这里有什么错误。

我会非常感谢任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:48:27.793

```
 void dialog::lineText(QString text){

       lineEdit_text = text;  //let lineEdit_text be a QString member in your 
                              //dialog class. Pass the text before calling
                              //setVisible() in the client code
     } 
```

# javascript - 使用 javascript 检测设备 CPU/GPU 性能？

> ID：14002195
> 
> 赞同：21
> 
> 时间：2012-12-22T10:54:14.677
> 
> 标签：javascript, performance, html, cpu, three.js

（这个问题并不特定于three.js，但我会以它为例）

我最近一直在使用three.js 开发一个Web 应用程序界面，并在WebGL 和Canvas 渲染器（用于桌面浏览器）之间编写了一些不错的回退。

但是现在问题变成了如何正确检测设备能力，问题有两个方面：

1.  **浏览器特性**（像 webgl/canvas 这样的静态特性）：这在网络社区中使用简单的特性检测在很大程度上得到了解决。
2.  **设备能力**：这是困难的部分，如果不能直接访问设备的硬件信息，我们需要一些方法来判断我们是否应该回退到对硬件要求较低的代码。

**一个值得注意的例子**：Firefox 移动/Opera 移动声称支持 WebGL，但存在错误或受设备硬件限制。

到目前为止，我提出了一些解决方法：

1.  **使用通用功能作为性能指标**- 例如，触摸设备通常具有不太强大的硬件。缺点：它不是面向未来的。
2.  **黑名单已知有问题的浏览器/设备**- UA 嗅探将是不可避免的，并且可能难以维护。
3.  **性能测试**——因此问题是，除了运行代码和测量帧率之外，还有更好的选择吗？

或者也许它不必这么难，还有其他建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-20T03:29:38.470

我最终在一个项目中使用了性能测量方法，我们希望利用高规格 CPU/GPU 桌面以及低速设备（如桌子和电话）上可用的画布功能。

基本上我们从最小的场景复杂度开始，如果渲染循环花费少于 33 毫秒，我们会增加复杂度（如果渲染循环在稍后时间开始花费太长时间，我们也会降低复杂度）。

我想在您的情况下，您可能必须运行快速画布和 webgl 性能测试，然后选择一个。在花了一些时间研究这个之后，我没有遇到一些可以更好地解决这个问题的棘手的非显而易见的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:56:02.437

您可以使用[http://webglstats.com/](http://webglstats.com/)进行 WebGL 硬件支持和功能检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T05:43:36.067

如果您使用three.js，您可以只使用detector.js 来确定是否启用了webgl。远离 canvasrenderer 也会有所帮助。使用 webglrenderer 或 softwarerender。因为它们允许更多的顶点。softwarerender 相当新，需要一些工作，但可以使用。

# c# - Silverlight 小工具中的页面导航？

> ID：14002198
> 
> 赞同：1
> 
> 时间：2012-12-22T10:54:26.403
> 
> 标签：c#, silverlight

我一直在使用 Silverlight 小工具，但是当我创建新页面时，我无法导航到新页面；导航不存在。

代码

```
public partial class Test
{
    public Test()
    {
        MessageBox.Show("af");
        InitializeComponent();
    }

    // Executes when the user navigates to this page.
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {

    }
} 
```

和 xaml 代码是

```
<navigation:Page x:Class="SilverlightGadgetDocked.Test" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           mc:Ignorable="d"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           d:DesignWidth="359" d:DesignHeight="225"
           Title="Test Page">
    <Grid x:Name="LayoutRoot">
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="182,103,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </Grid>
</navigation:Page> 
```

# .net - 在一个 Web 应用程序上具有多个域的 IIS

> ID：14002200
> 
> 赞同：4
> 
> 时间：2012-12-22T10:54:45.317
> 
> 标签：.net, iis

我正在使用 asp.net在**IIS上构建****Web 应用程序**。概念如下。

 **客户购买一个域，然后从 20-30 个现成的模板中选择一个模板。

现在应用程序驻留在说`www.mywebappblabla.com/usersites`

用户域是`www.myowndomain.com`指向的 `www.mywebappblabla.com/usersites`，然后我们从数据库中跟踪 url，然后网站与用户的预定义模板一起显示。

因此，如果有其他用户的域`www.myotherdomain.com`将再次指向 `www.mywebappblabla.com/usersites`，然后根据数据库中存储的数据向他显示不同的模板和不同的页面内容。

我的问题是这个系统可能被 3000 -5000 个用户使用。那么这是正确的方法吗？或者我们应该为每个站点创建一个单独的文件夹和单独的 Db？

我们希望在更短的时间内配置系统。例如。用户发送带有内容的word文件和要使用的模板。我们应该能够让网站在 2-3 小时内上线。

应该是什么方法。会不会影响网站性能。

谢谢并恭祝安康

维平

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:55:55.423

这种方法很好。显然很多人使用子域代替，但主机同样合适。

您需要在 IIS 中设置绑定以允许`*`该站点在端口 80/443 上的所有请求。而且您显然希望存储他们的域并根据域将它们路由到正确的模板。您也可以设置它，以便未注册的域获得您网站的友好版本或友好的错误消息。

就技术帮助而言，更具体的问题会在您实施时产生更好的结果。如果你不熟悉 asp.net，你应该看看`HttpContext`. 这将让您检查请求的域。这应该给你一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T18:37:26.697

大多数网站对这类事情使用子域方法；例如，我的“网站”可能位于 joshuashanemartin.host.com，而您的“网站”可能位于 yourusername.host.com（Wordpress、Google 站点和其他网站都使用这种方法）。

基本上，您可以使用具有以下表的单个数据库：

*   顾客
*   网站
*   页面

一个客户可以有多个站点，每个站点都有许多页面。您可以在站点甚至页面中定义模板。每个“页面”对象都有一个“内容”属性，它可以是 HTML 或某种标记语言（就像我写答案时 StackOverflow 使用的那样）。

您是否采用子域方法（如 customername.host.com）或您的方法（如 www.host.com/usersites/customername）取决于您。最后，您只需从单个数据库中加载不同的内容，并使用 URL 来确定您正在加载的数据是谁。**

# javascript - 从 node.js 缓冲区读取 int64 精度损失

> ID：14002205
> 
> 赞同：2
> 
> 时间：2012-12-22T10:55:23.733
> 
> 标签：javascript, node.js, int64

将 Int64BE 从 node.js 缓冲区读取到 Number 原语中的最佳方法是什么，例如 readInt32BE 读取 Int32？

我知道我会失去数字 +/- 9'007'199'254'740'992 的精度，但我不会在我想要实现的协议中得到如此高的数字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T11:12:02.457

Javascript 仅使用 64 位双精度浮点数。要读取一个长数字，您必须读取两个 32 位整数并将高 32 位向左移动。另请注意，对于不在 9007199254740992 <= x <= -9007199254740992 范围内的长值，可能存在信息丢失，因为内部表示使用 1 位符号和 11 位指数。

由于低部分可以是负数但必须被视为无符号，因此添加了更正。

```
function readInt64BEasFloat(buffer, offset) {
  var low = readInt32BE(buffer, offset + 4);
  var n = readInt32BE(buffer, offset) * 4294967296.0 + low;
  if (low < 0) n += 4294967296;
  return n;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T15:00:50.980

不要尝试自己编写转换代码，请使用经过测试的版本，例如[`node-int64`](https://github.com/broofa/node-int64).

```
var Int64 = require('node-int64');
function readInt64BEasFloat(buffer, offset) {
  var int64 = new Int64(buffer, offset);
  return int64.toNumber(true);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-24T10:48:00.393

在最新的 Node.js (12.0.0) 中，您可以使用`buf.readBigInt64BE`:))

# java - Java 数组练习

> ID：14002207
> 
> 赞同：1
> 
> 时间：2012-12-22T10:55:38.713
> 
> 标签：java, arrays

我有这个数组练习。我想了解事情是如何运作的，如果有人可以的话

1.  我们有`index`4 个元素调用的 int 类型的对象数组
2.  我们有`islands`4 个元素调用的 String 类型的对象数组

我不明白事情是如何相互传递的，我需要一个很好的解释。

```
class Dog {
  public static void main(String [] args) {
    int [] index = new int[4];
    index[0] = 1;
    index[1] = 3;
    index[2] = 0;
    index[3] = 2;
    String [] islands = new String[4];

    islands[0] = "Bermuda";
    islands[1] = "Fiji";
    islands[2] = "Azores";
    islands[3] = "Cozumel";

    int y = 0;
    int ref;

    while (y < 4) {
      ref = index[y];
      System.out.print("island = ");
      System.out.println(islands[ref]);
      y ++;
    }
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T11:05:56.143

拿笔和纸做一张这样的表格，然后进行迭代：

```
 y    ref    islands[ret]
---   ---    ------------
 0     1      Fiji
 1     3      Cozumel
 2     0      Bermuda
 3     2      Azores 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:05:57.670

好吧，您已经`index`在名为 index 的数组中添加了然后在 while 循环中访问相同的值

```
int y=0;
ref = index[y]; // now ref = 1
islands[ref] // means islands[1] which returns the value `Fiji` that is stored in 1st position 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:06:50.330

首先，您创建一个包含`int`s 的数组，该数组的长度为 4（其中可以包含 4 个变量）：

```
int [] intArray = new int[4]; 
```

您的数组称为索引，这可能会使解释感到困惑。数组的**索引**是您所指的“位置”，并且介于`0`和`length-1`（包括）之间。您可以通过两种方式使用它：

```
int myInt = intArray[0]; //get whatever is at index 0 and store it in myInt
intArray[0] = 4; //store the number 4 at index 0 
```

下面的代码只是从第一个数组中获取一个数字并使用它来访问第二个数组中的变量。

```
ref = index[y];
System.out.println(islands[ref]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T11:17:29.777

为了使其理解，请拿纸和笔并以表格形式记下数组并遍历循环以理解。（回到学校时代，我们的老师称之为试跑）

首先我们表示数据

```
Iteration    y           ref ( `ref = index[y]`)  islands
  1          0                 1                    Fiji 
  2          1                 3                   Cozumel
  3          2                 0                   Bermuda
  4          3                 2                    Azores 
```

所以你可以通过迭代 **Iteration 1**

```
y=0
ref = index[y], i.e. index[0] i.e 1
System.out.print("island = "); prints island = 
System.out.println(islands[ref]); islands[ref] i.e islands[1] i.e Fiji 
```

因此对于*迭代 1*输出将是

```
island = Fiji 
```

# c - 请求超时的 libevent http 客户端

> ID：14002211
> 
> 赞同：3
> 
> 时间：2012-12-22T10:56:08.633
> 
> 标签：c, http, libevent

我正在使用 libevent 在特定时间间隔内获取网站的一些统计信息。我的程序基于[此](https://stackoverflow.com/questions/5237963/cross-platform-c-c-http-library-with-asynchronous-capability/5237994#5237994)。我唯一缺少的是请求超时，最好是亚秒级精度。

我尝试了几件事，但无法使其正常工作。我真的很感激对此的任何指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:28:23.100

这是一个非常粗略的例子：我使用 libevent 计时器来实现超时。这可以通过将计时器放在结构中并在回调中取消它来进一步改进。

```
#include <stdio.h>
#include <event.h>
#include <evhttp.h>
#include <stdlib.h>
#include <unistd.h>

struct http_client {
    struct evhttp_connection *conn;
    struct evhttp_request *req;
    bool finished;
};

void _reqhandler(struct evhttp_request *req, void *state) {
    struct http_client *hc = (http_client*)state;
    hc->finished = true;

    if (req == NULL) {
        printf("timed out!\n");
    } else if (req->response_code == 0) {
        printf("connection refused!\n");
    } else if (req->response_code != 200) {
        printf("error: %u %s\n", req->response_code, req->response_code_line);
    } else {
        printf("success: %u %s\n", req->response_code, req->response_code_line);
    }
    event_loopexit(NULL);
}

void timeout_cb(int fd, short event, void *arg) {
    struct http_client *hc = (http_client*)arg;
    printf("Timed out\n");

    if (hc->finished == false){ // Can't cancel request if the callback has already executed
        evhttp_cancel_request(hc->req);
    }
}

int main(int argc, char *argv[]) {
    struct http_client *hc = (struct http_client *)malloc(sizeof(struct http_client));
    hc->finished = false;

    struct event ev;
    struct timeval tv;

    tv.tv_sec = 3; // Timeout is set to 3.005 seconds
    tv.tv_usec = 5000;

    const char *addr = "173.194.39.64"; //google.com
    unsigned int port = 80;

    event_init();

    hc->conn = evhttp_connection_new(addr, port);
    evhttp_connection_set_timeout(hc->conn, 5);

    hc->req = evhttp_request_new(_reqhandler, (void*)hc);
    evhttp_add_header(hc->req->output_headers, "Host", addr);
    evhttp_add_header(hc->req->output_headers, "Content-Length", "0");
    evhttp_make_request(hc->conn, hc->req, EVHTTP_REQ_GET, "/");

    evtimer_set(&ev, timeout_cb, (void*)hc); // Set a timer to cancel the request after certain time
    evtimer_add(&ev, &tv);

    printf("starting event loop..\n");
    printf("\n");
    event_dispatch();

    return 0;
} 
```

# css - 如何在 div 浮动下方获取按钮元素？

> ID：14002217
> 
> 赞同：1
> 
> 时间：2012-12-22T10:57:00.117
> 
> 标签：css

如何获得div 下方的**“运行”按钮？**

![在此处输入图像描述](../Images/4e602d95e20062dfa8c63b8b486f1708.png)

这是代码：http: [//jsbin.com/ehurit/10/edit](http://jsbin.com/ehurit/10/edit)

相同的代码复制粘贴在下面。

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div.boxes { background:yellow; border:1px solid #AAA; width:80px; height:80px; margin:0 5px; float:left; }
  div.colored { background:green; }
  .clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
} 
  </style>
</head>
<body>
  <div class="boxes"></div>
  <div class="boxes" id="mover"></div>
  <div class="boxes"></div>     
  <button class="clearfix" id="run" >Run</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:00:40.707

尝试在你的`display: block`CSS类中`clear: both``.clearfix`

[演示](http://jsfiddle.net/dC7GL/)

**更新**：我刚刚再次检查，您可能应该像这样围绕浮动 div 设置 clearfix：http: [//jsfiddle.net/dC7GL/1/](http://jsfiddle.net/dC7GL/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T11:02:01.443

改变你的风格

```
.clearfix {
      clear:both;
} 
```

然后在按钮上方添加一个 div 标签并应用 clear fix 样式，它会将按钮向下推到框下方

```
 <div class="clearfix"></div>
  <button id="run" >Run</button> 
```

# c++ - 检查参数是否为空或不相同

> ID：14002218
> 
> 赞同：4
> 
> 时间：2012-12-22T10:57:02.303
> 
> 标签：c++, if-statement, arguments

```
#include <iostream>

using namespace std;

int main(int argc,char* argv[]){
    if(argv[1] == ""){
        cout << "please put something" << endl;
    }else if(argv[1] == "string"){
        cout << "yeah string" << endl;
    }else if(argv[1] == "integer"){
        cout << "yeah integer" << endl;
    }
} 
```

我不知道出了什么问题：我尝试检查为 argv[1] 提供的参数是否为空，因此它将是`false`并且应用程序将退出，所以请告诉我我的代码有什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T11:08:03.043

每个人都在给你不同的答案。事实上，每个人都是对的。

main 的签名`int main(int argc, char *argv[])`是从 C 继承的。在 C 中，字符串是指向`char`. 当您`==`对它们使用运算符时，您只比较指针值。

比较字符串内容的 C 方法是使用`strcmp`.

```
if (strcmp(argv[1], "integer") == 0){ 
```

使用 C++ 方式对您来说更安全、更容易。

```
if (std::string(argv[1]) == "integer"){ 
```

这一行从`argv[1]`. 你必须包括`string`这个才能工作。

最后检查是否`argc == 2`为了知道是否提供了参数。确实，[标准 3.6.1](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3092.pdf)以空值终止了 argv，但检查 argv 是否确实等于 2 肯定会让事情变得更清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T11:15:38.697

不能`==`用于 argv[] 因为它的`char*`类型，使用 strcmp 代替。

```
int main(int argc, char*argv[])
{
    if(argc == 1){
        cout << "please put something" << endl;
    }else if(strcmp(argv[1], "string") == 0){
        cout << "yeah string" << endl;
    }else if (strcmp(argv[1], "integer") == 0){
        cout << "yeah integer" << endl;
    }
  return 0;
} 
```

或者您需要将 argv[1] 复制到 std::string 然后您可以使用`==`运算符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T11:01:41.177

如果你想用 C++ 编写代码，你可以使用`std::string`，包括它的头文件：

```
#include <string> 
```

将第一个参数转换为`std::string`并使用它`operator==`：

```
std::string first = argv[1];

if(first == ""){
    cout << "please put something" << endl;
}else if(first == "string"){
    cout << "yeah string" << endl;
}else if(first == "integer"){
    cout << "yeah integer" << endl;
} 
```

与字符串文字的比较`char *`没有意义，如果您从中`std::string`脱颖而出，`argv[1]`那就是另一回事了，它将按您的预期工作。

但是，您应该首先检查用户提供给程序的参数数量，它位于`argc`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T11:01:51.843

首先检查 argc > 1。否则，您访问的内存无效。

```
if(argc < 2){
    cout << "please put something" << endl;
}else if(argv[1] == "string"){
    cout << "yeah string" << endl;
}else if(argv[1] == "integer"){
    cout << "yeah integer" << endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T23:13:30.010

```
 #include <string>
         #include <iostream> 
```

这将使用 c++ 方式来比较字符串。更安全的方式。将第一个参数转换为 std::string，然后使用 string::compare 函数

```
 std::string inString = argv[1];

          if(inString.compare("") != 0) 
          {
             std::cout << "please put something in" << std::endl;
          }
          else if(inString.compare("string") == 0 ){
             std::cout << "yeah you got a string" << std::endl;
          }
          else if(inString.compare("integer") == 0)
          {
             std::cout << "yeah you got an integer" << std::endl;
          } 
```

注意：使用 string::compare（字符串或指向字符串的指针）请参阅此函数的参考。字符串与您要比较的内容之间的关系：

0 它们比较相等。如果比较结果 < 0，则比较字符串中不匹配的第一个字符的值较低，或者所有比较字符都匹配但比较字符串较短。如果 > 0，则比较字符串中第一个不匹配的字符的值较大，或者所有比较字符都匹配但比较字符串较长。

# c# - WPF RichTextBox - 获取当前行

> ID：14002222
> 
> 赞同：2
> 
> 时间：2012-12-22T10:57:14.110
> 
> 标签：c#, wpf, richtextbox

如何在 WPF 中获取当前行（并删除）`RichTextBox`？

Winforms 具有`RichTextBox.GetLineFromCharIndex()`WPF 中没有的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T11:18:38.673

您可以通过调用获得一个段落`Paragraph para=CaretPosition.Paragraph;`

如果要删除此段落，请使用`Document.Blocks.Remove(para)`. 如果你想删除插入符号所在的行，你应该找到两个`TextPointer`s：一个在行首，一个在行尾。调用这两个`tp1`和`tp2`。您可以通过以下方式删除该行

```
TextRange tr=new textRange(tp1,tp2);
tr.Text=""; 
```

如果我理解正确，请告诉我如何获得这两个 TextPointers

# ruby-on-rails - ransack：如何默认没有结果

> ID：14002223
> 
> 赞同：1
> 
> 时间：2012-12-22T10:57:15.663
> 
> 标签：ruby-on-rails, search, rubygems

当我使用 ransack 在我的 rails 3.2 应用程序中搜索时，当我提交所有字段为空白的搜索表单时，我会得到所有项目的列表。

进行空白搜索时如何获取不到项目？

# powershell - 是什么导致错误消息 0x800700EA 与 PowerShell 远程处理

> ID：14002226
> 
> 赞同：2
> 
> 时间：2012-12-22T10:57:35.930
> 
> 标签：powershell, powershell-remoting

情况：我想设置 PowerShell 远程处理（它在我的其他 2 台机器上工作）。
我跑：

```
winrm 快速配置
```

结果：

```
winrm：WSManFault
在行：1 字符：1
+ winrm 快速配置
+ ~~~~~~~~~~~~~~~~~
    + CategoryInfo : NotSpecified: (WSManFault:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

    信息
        ProviderFault
            WSManFault
                消息 = 有更多数据可用。
错误号：-2147024662 0x800700EA
有更多数据可用。

```

我也想知道在哪里可以找到“更多数据”？

```
PS F:\powershell\Text\SEO> 启用-PSRemoting -Force
WinRM 已设置为在此计算机上接收请求。
Set-WSManQuickConfig ：有更多数据可用。

在行：69 字符：17
+ 设置-WSManQuickConfig -force
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo : InvalidOperation: (:) [Set-WSManQuickConfig], InvalidOperationException
    + FullyQualifiedErrorId : WsManError,Microsoft.WSMan.Management.SetWSManQuickConfigCommand

```

# sql - 如果可能，当我想在选择目标列表中使用记录返回函数的结果时，如何使用列定义列表？

> ID：14002228
> 
> 赞同：-1
> 
> 时间：2012-12-22T10:57:54.783
> 
> 标签：sql, postgresql, postgresql-9.1

我有一个带有一些 id 的简单表，我正在执行以下查询：

```
select funA(t.id), funB(t.id) from customers t 
```

正确返回 2 列的记录。函数 funA 和 funB RETURN 记录。（不是定义的记录类型）

现在，我想获取这两个函数的所有记录列，而不是 2 个记录列：

我知道当我在 FROM 子句中调用函数时可以使用列定义列表，但在这里我调用的是选择列表中的函数。当我想在 SELECT 列表中使用函数调用时，是否可以以某种方式提供列定义列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:27:18.943

尝试：

```
SELECT (sub.funA_result).field1,
       (sub.funA_result).field2,
       (sub.funB_result).field3,
       (sub.funB_result).field4
FROM (SELECT funA(t.id) as funA_result,
             funB(t.id) as funB_result
      FROM customers t) sub 
```

您还可以在我对类似问题的回答中找到一些详细信息：[在 Postgresql 中创建一个不返回复合值的函数](https://stackoverflow.com/questions/13810812/creating-a-function-in-postgresql-that-does-not-return-composite-values)

# powershell - 如何在 Visual Studio 解决方案中创建可重用的 PowerShell 函数

> ID：14002229
> 
> 赞同：1
> 
> 时间：2012-12-22T10:57:57.683
> 
> 标签：powershell, nuget-package

我们在 Visual Studio 2012 解决方案中使用了一些自定义脚手架以及一些内置脚手架（例如 Code First Migrations 命令）。然后我们在包管理器控制台中运行，使用 PowerShell 我们可以将它们组合成有用的功能，这些功能可以同时执行多项任务。

例如，我们有几个带有迁移的项目，我们希望为每个项目执行 Update-Database cmdlet，只编写一个命令。像这样的东西：

```
"Project1", "Project2", "Project3", "Project4" | ForEach-Object {Update-Database -StartUpProjectName $_ -ProjectName $_} 
```

它工作得很好，但我们想要一个类似的命令

```
Update-All 
```

这将做同样的事情，而无需键入前一件事。我们希望将它作为解决方案的一部分提供给所有开发人员，然后从源代码控制中获取。

任何想法如何做这种事情？

**编辑：** Keith Hill 关于使用 powershell 配置文件的建议效果很好。我也在考虑使用 Nuget 中的 Import-Module cmdlet。我实际上希望在管理项目中的可重用 cmdlet 时拥有非常流畅的工作流程。任何想法如何为解决方案执行导入模块？是否可以在不托管它的情况下编写自定义（私有）Nuget 包并让它执行将 Import-Module 的 init.ps？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T02:17:32.487

每个 PowerShell 都有自己的配置文件。您可以通过在 PM 控制台中运行以下命令来查看 NuGet 期望的配置文件的路径：

```
PM> $profile
C:\Users\Keith\Documents\WindowsPowerShell\NuGet_profile.ps1 
```

编辑该文件，添加您的功能，例如

```
function Update-All {
   "Project1", "Project2", "Project3", "Project4" | 
       ForEach-Object {Update-Database -StartUpProjectName $_ -ProjectName $_}
} 
```

下次您启动 Visual Studio 时，该功能将在您的 PM 控制台中可用。您可以根据需要对函数进行参数化。您可以将此配置文件放在源代码管理中，但每个开发人员都需要将其复制到他们的 Documents\WindowsPowerShell 目录中。

# mysql - 三张表并获取与中间字段连接的字段

> ID：14002230
> 
> 赞同：2
> 
> 时间：2012-12-22T10:58:10.380
> 
> 标签：mysql, sql, join

我有三个表 T1、T2 和 T3，并带有以下列。

```
T1: a, b
T2 b, c
T3 c,d 
```

我想创建一个名为 T4 的视图，其中包含字段 a、d

如何编写查询来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:59:43.767

你可以像这样加入他们：

```
CREATE VIEW T4 AS 
SELECT T1.a, T3.d
FROM T1 
JOIN T2 ON T1.b = T2.b
JOIN T3 ON T2.c = T3.c 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/b550f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:00:38.927

试试这个 ：：

```
CREATE VIEW T4
AS
SELECT 
T1.a, 
T3.d
FROM T1 
INNER JOIN T2 ON T1.b = T2.b
INNER JOIN T3 ON T2.c = T3.c 
```

# jtextpane - 尝试获取文本窗格中每行的起点和终点

> ID：14002238
> 
> 赞同：0
> 
> 时间：2012-12-22T10:59:17.947
> 
> 标签：jtextpane

试图在文本窗格中获取每行的起点和终点：文本窗格包含（注意目标是每行的结尾，不包括空白行）：

(blank space line) MVESMKKVAGMDVELTVEERN000TAQEGDHGSHVYTKQKEENKGGEDKLKMIREYRQMVETELKLICCDILDVLDKHDDDDDKVFYYKMKGDYHRYLAEFATGNDRKEAAENSLVAYKAASDIAMTELPPTHPIRLGLALNFSVFYYEILNSPDRACRLAKAAFDDAIAELDTLSEESYKDS00000VQVGQQRSDMQGDGKKKAAAEEQNKEALQDVEDENQtarget MVESMKKVAGMDVELTVEERN000TAQEGDHGSHVYTKQKEENKGGEDKLKMIREYRQMVETELKLICCDILDVLDKHDDDDDDVFYYKMKGDYHRYLAEFATGNDRKEAAENSLVAYKAASDIAMTELPPTHPIRLGLALNFSVFYYEILNSPDRACRLAKAAFDDAIAELDTLSEESYKDS00000VQVGQQRSDMQGDGKKKAAAEEQNKEALQDVEDENQtarget MVESMKKVAGMDVELTVEERN000TAQEGDHGSHVYTKQKEENKGGEDKLKMIREYRQMVETELKLICCDILDVLDKHDDDDDDDFYYKMKGDYHRYLAEFATGNDRKEAAENSLVAYKAASDIAMTELPPTHPIRLGLALNFSVFYYEILNSPDRACRLAKAAFDDAIAELDTLSEESYKDS00000VQVGQQRSDMQGDGKKKDDDDDDDEEQNKEALQDVEDENQtarget

//这就是我所拥有的

```
 Element root = jTextPane1.getDocument().getDefaultRootElement();

        Element one = root.getElement(0);
        while (one !=null){            
        int one1 = one.getStartOffset();
        int two1 = one.getEndOffset();
        System.out.println(one1);
        System.out.println(two1);
        one = root.getElement(two1);          
     } 
```

这就是我得到的（第一个和第二个元素）然后挂起：0 1 1 232

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:27:42.263

你混合模型和视图。`Document`只是模型，但行数取决于视图（内容的宽度）。

利用`javax.swing.text.Utilities.getRowStart()/getRowEnd()`

查看代码使用示例[http://java-sl.com/tip_row_column.html](http://java-sl.com/tip_row_column.html)

# android - 字符串到sharedpreference android

> ID：14002242
> 
> 赞同：2
> 
> 时间：2012-12-22T10:59:58.947
> 
> 标签：android, string, sharedpreferences

我的应用程序有一个登录屏幕。（微调器，edittext，按钮），我想将微调器选定的项目和输入的文本存储到共享首选项。在应用程序的任何地方使用。

**代码**

```
Button lgnbutton;
EditText lgnfield;
Spinner lgnspinner;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);

lgnbutton = (Button) findViewById(R.id.loginbutton);
lgnfield = (EditText) findViewById(R.id.loginfield);
lgnspinner = (Spinner) findViewById(R.id.loginspinner);

lgnbutton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        String ID = lgnfield.getText().toString();
        String Type = lgnspinner.getSelectedItem().toString();

        Intent myIntent = new Intent(LoginActivity.this, MainActivity.class);
        LoginActivity.this.startActivity(myIntent);
    }
});
}    
} 
```

跳过登录活动并继续进行主要活动也会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:09:19.943

在微调器单击时调用它

```
 SavePreferences("spinner_item",  mySpinner.getSelectedItem().toString()); 
```

SavePreferences 方法的主体。

```
 private void SavePreferences(String key, String value){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
       } 
```

调用此方法以加载微调器项目。

```
private void LoadPreferences(){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    String strSavedMem = sharedPreferences.getString("spinner_item", "");
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:09:42.253

您可以在 SharedPreferences 中存储登录详细信息和微调器选定项目

```
lgnbutton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

         ID = lgnfield.getText().toString();
         Type = lgnspinner.getSelectedItem().toString();

        SharedPreferences.Editor prefsEditor = loginpreferences.edit();
        prefsEditor.putString("ID", ID);
        prefsEditor.putString("Type", Type);
        prefsEditor.commit();

        Intent myIntent = new Intent(LoginActivity.this, MainActivity.class);
        LoginActivity.this.startActivity(myIntent);
    }
}); 
```

并检查是否存在登录详细信息，`onCreate`如果是，则移至：`LoginActivity``SharedPreferences``MainActivity`

```
SharedPreferences loginpreferences;
String ID="",Type="";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    loginpreferences = this.getSharedPreferences("loginPrefs", 
                                            MODE_WORLD_READABLE);

    ID = loginpreferences.getString("ID", "");
    Type = loginpreferences.getString("Type", "");

     if(!ID.equalsIgnoreCase("") && !Type.equalsIgnoreCase(""))
      {
        //move to MainActivity
      }else
     {
       //stay in LoginActivity
     } 
```

# java - 多次访问数组列表

> ID：14002245
> 
> 赞同：0
> 
> 时间：2012-12-22T11:00:17.060
> 
> 标签：java, performance, arraylist

我有可以包含许多实例（500-3000 个实例之间）的列表（数组列表）。在程序期间，某些功能需要**访问此列表**（多次）并搜索特定实例或更多，以获取他们需要在列表中循环并提供 parentName 和名称（这是字符串）并且不是唯一键的实例.

我的问题是，由于需要多次访问列表，因此有一种方法可以更好地定义/设计它**，以便更有效地访问列表？**

请记住，需要从列表中获取实例的函数不能提供完整的密钥，只能提供**名称**和**parentName**，它们可以有**多个**实例。

```
List<Obj>   myList = new ArrayList<Obj>();

class obj
{
parentName
Name
type 
curr
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:06:03.507

使用`Map<MyEntry, List<Obj>>`where`MyEntry`是一个包含父名称和名称的类：

```
public final class MyEntry
{
    private final String parentName;
    private final String name;
    private final int hashCode;

    public MyEntry(final String parentName, final String name)
    {
        this.parentName = parentName;
        this.name = name;
        hashCode = 31 * parentName.hashCode() + name.hashCode();
    }

    // Override .equals() and .hashCode()
    @Override
    public int hashCode()
    {
        return hashCode;
    }

    @Override
    public boolean equals(final Object o)
    {
        if (this == o)
            return true;
        if (o == null)
            return false;
        if (getClass() != o.getClass())
            return false;
        final MyEntry other = (MyEntry) o;
        return parentName.equals(other.parentName)
            && name.equals(other.name);
    }

    // Have a nice string representation
    @Override
    public String toString()
    {
        return "parent name: " + parentName + ", name: " + name;
    }
} 
```

例如，您可以在您的方法中有一个`Obj`返回匹配`MyEntry`对象的方法。此外，如果您使用 Guava，请查看`MultiMap`.

您会注意到哈希码是预先计算的：因为`MyEntry`类是不可变的，所以可以这样做。这允许非常快速地用作`Map`.

（编辑：添加`.toString()`）

# php - 应用程序使用 php 生成的请求不起作用

> ID：14002256
> 
> 赞同：1
> 
> 时间：2012-12-22T11:01:20.770
> 
> 标签：php, facebook, facebook-app-requests

```
function generateAppRequest() {

 try{

   $app_id = '';
   $app_secret = '';

   $token_url = "https://graph.facebook.com/oauth/access_token?" .
   "client_id=" . $app_id .
   "&client_secret=" . $app_secret .
   "&grant_type=client_credentials";

   $app_access_token = file_get_contents($token_url);

   $user_id ='';

   $apprequest_url ="https://graph.facebook.com/" .
   $user_id .
   "/apprequests?message=''" . 
   "&data=''&"  .   
    $app_access_token . "&method=post";

   $result = file_get_contents($apprequest_url);
   echo("App Request sent?", $result);

}

catch(Exception $e){
   echo 'Message: ' .$e->getMessage();
}
} 
```

应用程序生成请求的上述代码不起作用。该应用程序不显示任何内容。事件不显示异常。我在 heroku 平台上运行应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:31:35.613

这里有一些你应该看看的想法：

*   您确定 Heroku 平台允许您访问 facebook 网络服务器吗？
*   也许 fopen 和 file_get_contents 仅限于 Heroku 平台上的常规文件，尝试使用[Curl 库](http://php.net/curl)来访问远程 URL。

祝你的项目好运

# c# - MVC 4 项目中基本模型的最佳实践是什么？

> ID：14002257
> 
> 赞同：1
> 
> 时间：2012-12-22T11:01:35.853
> 
> 标签：c#, architecture, model, asp.net-mvc-4

我正在开始一个新的 MVC 项目，并且众所周知，每个视图都需要下一个项目：用户语言、时区和一些涉及城市、国家/地区等的用户设置。因此，我将创建一些基本实体来放置它特性。但是某些视图将是 PagedList 的类型（来自开源 MvcPaging 库的类）。而且我不确定如何将 Base 模型和 PagedList 组合在一个对象中？我感谢接口，但我读到它比使用类更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:08:47.120

听起来你应该研究继承：

```
public class BaseModel
{
    public string UserLanguage { get; set; }
    ...
}

public class SomePageModel : BaseModel
{
    public int Id { get; set; }
    public PagedList<Whatever> PagedStuff { get; set; }
    ...
} 
```

在这种情况下`SomePageModel`，继承 的所有属性`BaseModel`。您不需要将 PagedList 用作模型。您可以使用 SomePageModel 作为视图的模型，该视图位于 PagedList 内部。在这种情况下，您将在视图中编写：

```
@model [namespace].SomePageModel

//to access paged stuff:
@Model.PagedStuff 
```

但实际上，您的问题很幸运，并且很难根据您迄今为止提供的信息将您引导到正确的方向。

# java - 当我从 map 和 hashmap 创建对象时有什么不同

> ID：14002264
> 
> 赞同：0
> 
> 时间：2012-12-22T11:02:03.573
> 
> 标签：java, map, hashmap

> **可能重复：**
> [Java - HashMap vs Map 对象](https://stackoverflow.com/questions/1348199/java-hashmap-vs-map-objects)

有什么不同

```
private Map<String, Integer> drawableMap = new HashMap<String, Integer>(); 
```

和

```
private HashMap<String, Integer> drawableMap = new HashMap<String, Integer>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:07:48.770

赋值表达式左侧的变量类型与对象创建无关；因此，在这两种情况下，您都在创建**完全相同的对象**。由于在 Java 中您只能将对象的**引用**存储到变量中，因此该变量的类型限制了该变量可以引用的对象类型。在第一种情况下，它可以引用任何实现的对象`Map`；第二，只有`HashMap`对象是可以接受的。

另一个结果是，在第一种情况下，您只能调用`HashMap`在接口中声明的方法`Map`，而在第二种情况下，您可以调用特定于`HashMap`实现的任何其他方法。

在大多数实际情况下，您会更喜欢第一种情况，因为您几乎不需要特定于实现的方法。同样的规则也适用于完整的 Collections Framework。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:05:49.373

在第一个示例中，您可以稍后分配给（例如）`drawableMap`的其他实现。在第二个示例中，您不能 - 您仅限于s （及其任何子类）。一般来说，第一种方法比第二种方法更受欢迎，因为它将提供更大的灵活性。`Map``LinkedHashMap``HashMap`

最终，第一条语句创建了一个*类型* `Map`为 的实例的变量`HashMap`。第二个创建一个*类型* `HashMap`的变量，它也是`HashMap`.

# c# - 将json字符串的一部分转换为数组或列表或字典？

> ID：14002265
> 
> 赞同：1
> 
> 时间：2012-12-22T11:02:12.703
> 
> 标签：c#, json.net

我有一个`json string`由网页获取的。json的架构是这样的：

```
string schema = @"{
    'description': 'A person',
    'type': 'object',
    'properties':
    {
        'error': 
        {
            'type': 'object',
            'properties': 
            {
                'code': { 'type': 'integer' },
                'message': { 'type': 'string' }
            }
        },
        'response':
        {
            'type': 'object',
            'properties':
            {
                'code': { 'type': 'integer' },
                'status': { 'type': 'string' },
                'message': { 'type': ['string', 'object'] , 'items': {'type': 'string'}}
            }
        }
    }
}"; 
```

一切正常，json 现在有效。

现在，我想将其中的一部分转换`json string`为`array`循环抛出它并将数据放入网格。

我告诉的部分是这样的：

```
[{\"id\":\"1\",\"task\":\"some message here...\",\"sender\":\"123qwe\",\"time\":\"1356136733\"}, [{\"id\":\"1\",\"task\":\"some message here...\",\"sender\":\"123qwe\",\"time\":\"1356136733\"}, .... 
```

要访问它，我使用它：

```
var messages = (string)o["response"]["message"];//o is a JObject 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:55:09.240

我通过使用动态类型来解决这个问题......：

```
var jsonSerializer = new JsonSerializer();
                dynamic stuff = jsonSerializer.Deserialize(new JsonTextReader(new StringReader(json)));
                var ffff = stuff.response.message;

                var jss = new JsonSerializer();
                dynamic st = jsonSerializer.Deserialize(new JsonTextReader(new StringReader((string)ffff)));

                var bv = 0;
                foreach (var msg in st)
                {
                    bv++;
                } 
```

# wpf - 在 C++/CLI 中订阅窗口的 PropertyChanged 事件

> ID：14002266
> 
> 赞同：1
> 
> 时间：2012-12-22T11:02:35.560
> 
> 标签：wpf, c++-cli, dependency-properties, visual-c++-2010, propertychanged

我只是尝试使用 C++/CLI 订阅 WPF 属性更改事件。我没想到这会变得困难。

首先，我尝试订阅某个窗口的特定属性（IsMouseDirectlyOver），最后通过以下代码成功：

```
void MyClass::DependencyPropertyChanged(Object^ sender, DependencyPropertyChangedEventArgs args)
{
   Debug::WriteLine("DependencyPropertyChanged: "+sender->ToString()+", "+args.Property->Name);
}

window->IsMouseDirectlyOverChanged += gcnew DependencyPropertyChangedEventHandler(this, &MyClass::DependencyPropertyChanged); 
```

然后我尝试订阅对象的*任何*属性更改（这对我来说最重要，因为我的最终代码必须能够通过属性名称处理属性更改）。我在这方面完全失败了。

我尝试了各种方法，但没有任何效果。我找不到任何 C++/CLI 示例，但根据文档和 C# 示例，以下对我来说似乎是最明智的代码：

```
window->PropertyChanged += gcnew PropertyChangedEventHandler(this, &MyClass::PropertyChanged);

void MyClass::PropertyChanged(Object^ sender, PropertyChangedEventArgs^ args)
{
   ...
} 
```

但是编译器通过错误 C2039 告诉我“PropertyChangedEvent”不是“System::Windows::Window”的元素。

我怎样才能达到我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:59:02.790

阿尔在评论中提到，你的代码不起作用，因为没有`PropertyChanged`事件 on `Window`，就这么简单。

相反，您可以做的是覆盖[方法，](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.onpropertychanged.aspx)[该`OnPropertyChanged()`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.onpropertychanged.aspx)方法存在于`Window`. 在您的覆盖中，您可以做任何您想做的事情，包括引发`PropertyChanged`（不要忘记先创建该事件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:12:25.693

类[PropertyDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.aspx)（或派生的[DependencyPropertyDescriptor ）提供了一种通过其](http://msdn.microsoft.com/en-us/library/System.ComponentModel.DependencyPropertyDescriptor.aspx)[AddValueChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.addvaluechanged.aspx)方法添加属性更改处理程序的机制：

```
DependencyPropertyDescriptor^ propertyDescriptor = DependencyPropertyDescriptor::FromName(
    "ActualWidth", component->GetType(), component->GetType());

propertyDescriptor->AddValueChanged(component, gcnew EventHandler(ActualWidthChanged));
...

static void ActualWidthChanged(Object^ component, EventArgs^ e)
{
    ...
} 
```

不幸的是，处理程序没有通过更改的属性，所以我想您必须为要监视的所有属性添加不同的处理程序。

* * *

编辑：您可能会实现类似于下面显示的代码，该代码使用匿名委托将属性名称传递给适当的处理程序。但是请注意，这是 C#，据我了解，这不能在 C++/CLI 中完成，因为它不支持托管 lambda。也许你可以将这样的帮助类包装在一个单独的程序集中，并从你的 C++/CLI 代码中使用它。

```
public delegate void PropertyChangedHandler(object component, string propertyName);

public static class DependencyPropertyDescriptorExt
{
    public static void AddPropertyChangedHandler(
        this object component, string propertyName, PropertyChangedHandler handler)
    {
        var propertyDescriptor = DependencyPropertyDescriptor.FromName(
            propertyName, component.GetType(), component.GetType());
        propertyDescriptor.AddValueChanged(component, (o, e) => handler(o, propertyName));
    }
} 
```

现在您可以像这样编写和使用这样的 PropertyChangedHandler：

```
this.AddPropertyChangedHandler("ActualHeight", PropertyChanged);
...

private void PropertyChanged(object component, string propertyName)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T23:16:51.507

我查看了窥探源。我修改了它并写了一个非常非常基本的例子：

```
String^ ownerPropertyName = "IsActive";
DependencyObject^ propertyOwner = window;

DependencyPropertyDescriptor^ ownerPropertyDescriptor = DependencyPropertyDescriptor::FromName(ownerPropertyName, propertyOwner->GetType(), propertyOwner->GetType());
DependencyProperty^ ownerProperty = ownerPropertyDescriptor->DependencyProperty;
Type^ ownerPropertyType = ownerProperty->PropertyType;

DependencyProperty^ myProperty = DependencyProperty::Register(ownerPropertyName, ownerPropertyType, GetType(), gcnew PropertyMetadata(gcnew PropertyChangedCallback(&MyClass::BoundPropertyChangedCallback)));

Binding^ myPropertyToOwnerPropertyBinding = gcnew Binding(ownerPropertyName);
myPropertyToOwnerPropertyBinding->Mode = BindingMode::OneWay;
myPropertyToOwnerPropertyBinding->Source = propertyOwner;
BindingOperations::SetBinding(this, myProperty, myPropertyToOwnerPropertyBinding); 
```

和：

```
static void BoundPropertyChangedCallback(DependencyObject^ me, DependencyPropertyChangedEventArgs args)
{
   Debug::WriteLine("BoundPropertyChangedCallback: "+args.OldValue+", "+args.NewValue+", "+args.Property->Name);
} 
```

对我来说看起来很复杂。我不知道那些绑定的东西是否真的有必要。事实上，它甚至可以订阅没有事件的属性（比如 IsMouseOver），并且可以对没有实现 INotifyPropertyChanged 的​​对象（比如 Window）进行操作。而且它不需要任何属性的开关/案例。

# objective-c - 将 iOS 应用程序链接到数据库

> ID：14002267
> 
> 赞同：-2
> 
> 时间：2012-12-22T11:02:54.663
> 
> 标签：objective-c, ios, sql, database

在编写我的第一个 iOS 应用程序时需要一些建议，1\. 将应用程序链接到数据库的最佳方式（最简单）是什么，数据库是否必须是 SQLite（数据库将是外部的，即通过互联网链接） ? 我以前在 MAMP 中使用过 mySQL，

1.  我已经阅读了其他帖子，他们建议使用复杂的方法，例如通过 JSON 等，请提供一种简单的方法和可以教我您建议的方法的书籍/指南/网站也将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:06:40.880

SQLite 就是其中之一。

但是，如果您的要求是共享数据库，您可以使用 mySQL 甚至 Oracle 等。

JSON、xml 是帮助您制作客户端服务器应用程序的工具。

有用的链接：

[http://jainmarket.blogspot.in/2009/05/iphone-sdk-tutorial-reading-data-from.html](http://jainmarket.blogspot.in/2009/05/iphone-sdk-tutorial-reading-data-from.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:09:16.730

SQLite 通常通过 CoreData 用于本地数据库（也就是设备本身）。但似乎您有一个要连接的远程 MySQL 数据库。

您应该构建一些您的 iOS 应用程序与之对话的 API，以从数据库中获取数据。通常这是通过 http 完成的，它以您选择的任何服务器语言（例如 - python、ruby、php 等）生成 JSON。

对于 iOS 端，您可能会使用 Apple 的内置功能：[NSURLConnection](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)和[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

# asp.net - int 数据类型不能用作参数

> ID：14002271
> 
> 赞同：1
> 
> 时间：2012-12-22T11:04:04.150
> 
> 标签：asp.net, oracle, c#-4.0, telerik

我有一个 GridView，其中有复选框作为项目模板，并且在更改复选框时我正在更新 GridView。这是我的 GridView 代码：

```
<Columns>
    <telerik:GridTemplateColumn>
    <ItemTemplate>
        <asp:CheckBox ID="chkcelar" runat="server" Text="Clear" OnCheckedChanged="chkclearchng" AutoPostBack="true"/>
    </ItemTemplate>
    </telerik:GridTemplateColumn>
        <telerik:GridBoundColumn DataField="BPV_NUM" DataType="System.Int64"
            DefaultInsertValue="" HeaderText="BPV No" SortExpression="BPV_NUM" 
            UniqueName="BPV_NUM">
        </telerik:GridBoundColumn>
</Columns> 
```

这是我更新网格视图的c#代码

```
protected void chkclearchng(object sender, EventArgs e)
    {
        OleDbConnection con = new OleDbConnection("Data Source=sml; User ID=sml; Password=sml; provider=OraOLEDB.Oracle");
        OleDbCommand cmd  = new OleDbCommand();
        CheckBox chkcelar = ((CheckBox)(sender));
        GridDataItem  row = ((GridDataItem)(chkcelar.NamingContainer));
        long bpvnum = row.Cells[1].Text;

        if (chkcelar.Checked ) {
            cmd.CommandText = @"update sml.FND_01_11@wbg set CLR_FLG=1, CLR_DTE=sysdate where bpv_num=:bpv_num and bpv_dte=:bpv_dte";
        }
        else {
            cmd.CommandText = @"update sml.FND_01_11@wbg set CLR_FLG=0, CLR_DTE=sysdate where bpv_num=:bpv_num and bpv_dte=:bpv_dte";
        }
        cmd.CommandType = CommandType.Text;
        cmd.Connection  = con;

        cmd.Parameters.Add(":bpv_num",OleDbType.BigInt).Value = bpvnum;
        cmd.Parameters.Add(":bpv_dte",OleDbType.Date).Value   = RadComboBox1.SelectedValue;

        con.Open();
        cmd.ExecuteNonQuery();
        con.Close(); 

    } 
```

问题是当我更改复选框时出现此错误：

> 输入字符串的格式不正确。

谁能告诉我可能是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:09:48.337

可能是你应该使用

```
long bpvnum = long.Parse(row.Cells[1].Text); 
```

如果不起作用，那么在这条线上

```
cmd.Parameters.Add(":bpv_dte",OleDbType.Date).Value   = RadComboBox1.SelectedValue 
```

您需要参数类型`OleDbType.Date`，但您正在分配`RadComboBox1.SelectedValue`

所以你需要转换你的

```
RadComboBox1.SelectedValue to OleDbType.Date 
```

或者你应该简单地使用 [DateTimePicker](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.aspx) 而不是 ComboBox

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:14:33.463

像这样更改您的代码：

```
 protected void chkclearchng(object sender, EventArgs e)
    {
        using (OleDbConnection con = new OleDbConnection("Data Source=sml; User ID=sml; Password=sml; provider=OraOLEDB.Oracle"))
        {
            con.Open();
            using (OleDbCommand cmd = new OleDbCommand(null, con))
            {
                CheckBox chkcelar = ((CheckBox)(sender));
                GridDataItem row = ((GridDataItem)(chkcelar.NamingContainer));
                long bpvnum = Convert.ToInt64(row.Cells[1].Text);
                if (chkcelar.Checked)
                {
                    cmd.CommandText = @"update sml.FND_01_11@wbg set CLR_FLG=1, CLR_DTE=sysdate where bpv_num=@bpv_num and bpv_dte=@bpv_dte";
                }
                else
                {
                    cmd.CommandText = @"update sml.FND_01_11@wbg set CLR_FLG=0, CLR_DTE=sysdate where bpv_num=@bpv_num and bpv_dte=@bpv_dte";
                }
                cmd.Parameters.Add(new OleDbParameter("@bpv_num", bpvnum));
                cmd.Parameters.Add(new OleDbParameter("@bpv_dte", Convert.ToDateTime(RadComboBox1.SelectedValue)));
                cmd.ExecuteNonQuery();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:05:11.740

使用快速窗口检查“row.Cells[1].Text”上的值是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:57:57.553

您的代码中的问题是由于从“string”到“OleDbType.Date”的错误类型转换。所以替换下面的代码

```
cmd.Parameters.Add(":bpv_dte",OleDbType.Date).Value   = RadComboBox1.SelectedValue; 
```

使用以下代码

```
cmd.Parameters.Add(New OleDb.OleDbParameter("@bpv_dte", OleDb.OleDbType.Date));
cmd.Parameters("@bpv_dte").Value = RadComboBox1.SelectedValue.ToString("d"); 
```

如果有更多行用于插入，请确保将所有类型正确转换为 OleDbType。

# android - 使用按钮更改 int 值

> ID：14002272
> 
> 赞同：1
> 
> 时间：2012-12-22T11:04:06.267
> 
> 标签：android, int

我有 4 个 int 时间

```
int delay;
int period;
int delay1;
int period1; 
```

他们正在控制这些方法：

```
cameraOn();
    Timer timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            cameraOff();
        }
    },delay1,period1);

    Timer timer2 = new Timer();
    timer2.scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            cameraOn();
        }
    },delay,period);

        } 
```

这些方法是让闪光灯相机一直闪烁，我想要的是用我有的两个按钮，改变闪烁的速度，现在它们是这样的：

```
case R.id.btslow:
        delay = 2400;
        period = 2400;
        delay1 = 1200;
        period1 = 2400;
        break;

    case R.id.btfast:
        delay = 600;
        period = 600;
        delay1 = 300;
        period1 = 600;
        break; 
```

但他们不改变眨眼的速度，我该怎么做？因为如果稍后从一开始就给他们一些勇气，当我按下按钮时，他们不会改变。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:18:53.110

```
Handler handler = new Handler();
Runnable runnable = new Runnable{

public void run()
{
cameraOff();
handler.postDelayed(this,period);
}
};handler.postDelayed(runnable,delay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:12:11.317

更改变量不会改变当前计划任务的间隔和延迟，试试这个：[https ://stackoverflow.com/a/3871723/1333516](https://stackoverflow.com/a/3871723/1333516)

# c++ - 访问冲突读取位置 0xcdcdcdcd - VS 2010 win7

> ID：14002274
> 
> 赞同：0
> 
> 时间：2012-12-22T11:04:13.327
> 
> 标签：c++, visual-studio-2010, pointers, memory, matrix

很长一段时间后，我在做 C++，有些事情困扰着我。我在这里发现了类似的问题，但没有一个能解决我的问题。那么，有什么关系呢？

我有

```
SomeClass*** world; 
```

它提供了指向 SomeClass 对象的指针矩阵。

后来，在构造函数中，当我尝试初始化它时，像这样

```
for(int i = 0; i<20;i++)
    for(int j = 0;j<20;j++)
        world[i][j] = new SomeClass(); 
```

它打破了消息：访问冲突读取位置0xcdcdcdcd。我读到了这条消息可能意味着什么，但我仍然不知道如何让它发挥作用。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T11:42:41.783

我认为了解声明变量时*得到的结果非常重要。*如在内存中实际创建的内容。

那么让我们来看看`SomeClass*** world;`。这对*你*有什么好处？它会给你一个指针矩阵`SomeClass`吗？不，它没有。事实上，您可能会惊讶地发现，这只会为您带来一件事而且只有一件事 - 一个指针。是的，没错，只有一个指针。您已经定义了这个`world`变量，它是一个指针，这就是您从中得到的全部。那个单指针。

然后，该指针应用于指向其他指针，这些指针又指向指向 的指针`SomeClass`。但是，它指向的那些东西还不存在。因此，当您迭代最多 20 次并做`i`时，您正在尝试访问一个根本不存在的指针矩阵。`j``world[i][j]`

现在要使您编写的内容起作用，同时仍在使用`SomeClass***`，您需要分配指针矩阵：

```
world = new SomeClass**[20];
for (int i = 0; i < 20; i++) {
  world[i] = new SomeClass*[20];
} 
```

所以首先我们分配一个 20 的数组`SomeClass**`，然后我们让每个指针指向一个分配的 20 数组`SomeClass*`。这给了你你想要的...

但**坚持住**- 这很难看。这不是 C++ 的编写方式。这么多的动态分配根本没有理由。这也意味着`delete`当你完成所有事情时，你必须记住它——这也很丑陋。如果您不依赖动态分配，这一切都会变得容易得多。您可以只创建一个多维数组而不是使用指针，并且您的生活已经变得容易多了：

```
SomeClass* world[20][20]; 
```

所以现在`world`是一个 20 x 20 的指针数组`SomeClass`。你实际上在记忆中*得到了它。*你不会像以前那样得到一个指针。你得到一个完整的多维指针数组！幸运的你。

现在，您可以通过根本不使用指针来使它变得更好。目前，您需要动态分配`SomeClass`对象并将指向它们的指针粘贴到数组中。但是为什么不使用数组来`SomeClass`代替呢？

```
SomeClass world[20][20]; 
```

现在你有了一个多维`SomeClass`对象数组！生活没有比这更好的了。您不必手动分配或删除任何东西。您在内存中获得了一个完整的多维数组，其中每个元素已经是一个`SomeClass`对象，可以为您的服务做好准备。

我们甚至可以通过使用标准库中的容器来进一步提高安全性。如果您使用的是 C++03，则可以使用 a`std::vector<std::vector<SomeObject> >`但这可能有点矫枉过正。但是，C++11 引入了一种巧妙地替代传统数组的类型，并使其更加安全：`std::array`. 你可以像这样使用它：

```
std::array<std::array<SomeObject, 20>, 20> world; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T11:07:55.843

您得到的实际错误是使用尚未初始化的指针。0xcdcdcdcd 是 Visual Studio 中内存的“填充模式”。选择它是为了让您在使用它时“注意到”——它会导致内存访问冲突。

如何解决：谷歌“如何在 C++ 中分配两个维度数组”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T11:12:58.377

只需分配一个 20x20 的数组作为成员（或在堆栈上），然后填充它：

```
SomeClass *world[20][20];
for ... 
```

如果大小不固定，则需要逐行分配。

# php - 电子邮件模板未在 magento 中显示

> ID：14002278
> 
> 赞同：2
> 
> 时间：2012-12-22T11:04:42.680
> 
> 标签：php, magento

我已经从后端为订单电子邮件设置了新的电子邮件模板，并在销售电子邮件中应用了该模板，但我在下订单时收到的电子邮件模板不是我设置的。我必须设置其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:09:06.713

您是以用户还是访客的身份下订单？订单销售电子邮件设置中有两个模板设置

1.  新订单确认模板。
2.  客人的新订单确认模板。

您必须将这两种模板都设置为两种类型的用户的自定义电子邮件模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:10:02.473

尝试为具体的商店视图设置销售电子邮件模板，而不是全局设置。它可能会有所帮助。

# python - 获取机器人 [python] 将数据输入网站

> ID：14002282
> 
> 赞同：-1
> 
> 时间：2012-12-22T11:05:38.073
> 
> 标签：python, html

我刚刚开始研究 Python。

站点：[http ://toolserver.org/~diberri/cgi-bin/html2wiki/index.cgi](http://toolserver.org/~diberri/cgi-bin/html2wiki/index.cgi)

机器人是否可以将数据放在顶部框中，可能勾选一个框或其他内容，然后单击底部“转换”的按钮？

哦，还有，在选项标题下，有一个框，您可以在其中选择各种选项。您究竟如何让机器人选择其中之一？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:24:03.460

你当然可以，但你不会用你的机器人输入 HTML 代码。如果您查看该页面的源代码，您将看到：

```
<form method="post" action="index.cgi">
<fieldset style="display:none">
  <input type="hidden" name="m" value="convert" />
</fieldset> 
... 
```

它确实说该表单使用发布到此 uri 的方法：http: [//toolserver.org/~diberri/cgi-bin/html2wiki/index.cgi](http://toolserver.org/~diberri/cgi-bin/html2wiki/index.cgi)

所以现在你可以看看 urllib2，[urllib2](http://docs.python.org/2/library/urllib2.html)这是用于 http 请求的 python 库。并使用您想要的参数创建您的发布请求。

例如：

```
params = {
  'dialect' : googlecode,
  'uri' : myuri
} 
```

您将需要一个标头，告诉正在执行请求的服务器：

例如：

```
headers = {"Content-type": "application/x-www-form-urlencoded", "Accept": "text/plain"} 
```

像这样的东西：

```
u = urllib2.urlopen(' http://toolserver.org/~diberri/cgi-bin/html2wiki/index.cgi', params)
h.request('POST', ' http://toolserver.org/~diberri/cgi-bin/html2wiki/index.cgi', params, headers) 
```

# ruby-on-rails - 删除 rails 中不需要的参数

> ID：14002284
> 
> 赞同：1
> 
> 时间：2012-12-22T11:05:42.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
Parameters: {
  "artist"=>{
    "photos_attributes"=> {
       "0"=>{"id"=>"96", "description"=>"", "upload_on_facebook"=>"0"}, 
        "1"=>{"id"=>"97"}
     }, 
     "professional_nickname" => "testing",
     "authenticity_token"=>"xyz", 
     "utf8"=>"✓", "id"=>"testing"
   }
} 
```

在我的照片展示页面中，我从相册中删除了一张照片。使用 ajax 成功删除照片（也从表中删除）。但之后我提交其他图像的更新描述然后它就出现了错误。

```
Couldn't find Photo with ID=97 for Artist with ID=31 
```

我删除了这条记录，但我的参数显示了该 ID。

**我的控制器更新操作**

```
if @artist.update_attributes(params[:artist])
   flash[:notice] = "Artist record been updated successfully"
   redirect_to admin_artists_url
else
   render :edit
end 
```

使用 ajax 删除后，如何从参数中删除此 "1"=>​​{"id"=>"97"}。我正在使用semantic_form_for。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:35:20.517

有几种方法：

1.  在创建时，您可以简单地使用 js 删除 html 块。

2.  如果您想控制视图中的删除（在创建或更新时），您可以将隐藏字段（或复选框或您想要的）添加到您的 html 中，名称为艺术家 [photos_attributes][1][_destroy]，值为 true。

3.  如果在控制器中您知道要删除的元素，您可以在更新属性之前编写 params[:artist][:photos_attributes].delete('1') 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:28:15.980

`params[:artist]`只是一个哈希，因此您可以执行以下操作：

`params[:artist][:photos_attributes].delete('1')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T11:31:57.667

用ajax删除记录后，也要删除页面中相应的HTML块。

# telerik - 使用 radgrid 删除多行

> ID：14002287
> 
> 赞同：0
> 
> 时间：2012-12-22T11:05:53.273
> 
> 标签：telerik, radgrid

我正在使用带有多选行的 Radgrid 视图

我想使用 RadGrid 中的复选框删除所有选定的记录

代码：

```
<telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="False" 
    OnNeedDataSource="RadGrid1_NeedDataSource" 
    AllowMultiRowSelection="true">
    <MasterTableView DataKeyNames="ID">
        <Columns>
            <telerik:GridClientSelectColumn>
            </telerik:GridClientSelectColumn>
            <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
            </telerik:GridBoundColumn>
            <telerik:GridEditCommandColumn>
            </telerik:GridEditCommandColumn>
        </Columns>
    </MasterTableView>
    <ClientSettings>
        <Selecting AllowRowSelect="true" />
    </ClientSettings>
</telerik:RadGrid> 
```

.aspx.vb

```
 Protected Sub Button1_Click(sender As Object, e As EventArgs)
         For Each item As GridDataItem In RadGrid1.SelectedItems

            If item.Selected Then

            'Access data key

             Dim strID As String = item.GetDataKeyValue("ID").ToString()

            End If

         NEXT

       End Sub 
```

问题是当我使用此方法获取选定行 ID 以删除记录时，它只检索一个记录 ID 并删除检索到 ID 的记录。

示例：我选择记录 1,2,3,4 并单击删除按钮，它只删除 ID=4 的记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:25:42.133

我不太了解vs Basic。但我可以说，你在这个命令中失去了你当前的 ID 知识

```
Dim strID As String = item.GetDataKeyValue("ID").ToString() 
```

foreach 中的每次迭代，您的 strId 变量都会更新为新的项目 ID。

也许你可以使用 concat 字符串方法（也许

```
strId += item.id 
```

保存所有选定的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T19:17:08.967

试试下面的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    string strID = string.Empty;

    foreach( GridDataItem grditem in  RadGrid.SelectedItems)
    {
        if (grditem.Selected)
        {
            strID = strID +  "," + grditem.GetDataKeyValue("ID").ToString();
        }
    }

    if (strID != string.Empty)
    {
        //your delete logic for db
        // pass strID it will contain 1,2,3,4
    }
} 
```

# android - 谷歌样本软键盘

> ID：14002291
> 
> 赞同：0
> 
> 时间：2012-12-22T11:06:09.913
> 
> 标签：android, android-keypad

我只是加载 Android 示例项目“Samplesoftkeyboard”

我将symbols.xml 编辑到我的自定义模式中

现在的问题是

如果用户按下了一些组合键，我需要显示一些字符

我怎样才能做到这一点 ？

编辑：如果用户键入一些组合键，我需要显示一些不同的字符，例如：如果用户按 *45@，那么当用户在该键盘中键入 @ 符号时，我需要更改为 A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:30:29.053

`xml`使用名称创建一个文件`popup.xml`并插入以下代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
        android:keyWidth="10%p" 
        android:horizontalGap="0px"
    android:verticalGap="5%p"
    android:keyHeight="@dimen/key_height">
</Keyboard> 
```

在您的键盘布局文件（类似于`qwerty.xml`）中，您必须通过以下方式编辑键以获得带有定义的建议选择的弹出窗口：

```
<Key android:codes="117" android:keyLabel="u"
        android:popupKeyboard="@xml/popup"
        android:popupCharacters="ü"/> 
```

# html - 如何从父 CSS 属性中排除孩子？

> ID：14002299
> 
> 赞同：3
> 
> 时间：2012-12-22T11:06:55.953
> 
> 标签：html, css

我正在使用 css 处理元素的不透明度。一个段落放置在一个 div 中，但是当我将 div 的不透明度设置为 0.4 时，该段落也会影响。我试图通过分配不透明度 1.0 来覆盖段落中的 div，这不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:10:34.963

简短的回答是你不能。这就是不透明度的工作原理。

更长的答案取决于您实际尝试实现的目标（旧的 XY 问题）。

例如，如果您希望 div 的背景是半透明的，而不是段落，那么您可以通过使用半透明背景而不是使整个 div 半透明来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T11:12:44.977

我知道解决此问题的唯一方法是将背景与内容分开：

```
<div id="container" style="position: relative;">
    <div id="background" style="position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; opacity: 0.4; background: #ccc;">&nbsp;</div>
    <div id="content">Your content here</div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T11:42:12.657

我之前已经这样做了。如果我没记错的话，我将 设置`position:absolute;`为 innerDiv，因此 opacity 属性效果很好。

实现这种效果的另一种方法是将outerDiv的背景设置为alpha而不是opacity；例如：改变

```
.outerDiv{
  background-color: white; //or #fff or rgb(255,255,255) 
  opacity: 0.4;
} 
```

到

```
.outerDiv{
  background-color: rgba(225,225,225,0.4);
} 
```

第四个值是 alpha，其作用类似于不透明度。它不会打扰 div 的内容。

# javascript - 如何使用 javascript 或 jquery 向 json 添加键和值

> ID：14002300
> 
> 赞同：24
> 
> 时间：2012-12-22T11:07:04.577
> 
> 标签：javascript, json

我有一个像这样的 json 变量

```
var jsondata={"all":"true"} 
```

我想将另一个键和值推送到 jsondata。之后我的 jsondata 必须是这样的。

```
{"all":"true","FDamount":"false","DDamount":"true"} 
```

怎么做？？？我尝试了 jsondata.push({"FDamount":"false"}) 和 jsondata.push("FDamount:false")。这两种方法都不起作用。

谢谢你

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-22T11:10:04.330

像这样

```
jsondata.FDamount = 'false';
// or
jsondata['FDamount'] = 'false'; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-22T11:09:51.830

只需这样做：

```
jsondata['FDamount'] = 'false';
jsondata['DDamount'] = 'true'; 
```

或这个 ：

```
jsondata.FDamount = 'false';
jsondata.DDamount = 'true'; 
```

顺便说一句，您将布尔值定义为字符串，正确的方法应该是：

```
jsondata['FDamount'] = false;
jsondata['DDamount'] = true; 
```

为了更进一步，您可以使用 jQuery.extend 来扩展原始 var，如下所示：

```
jQuery.extend(jsondata, {'FDamount': 'false', 'DDamount': 'true'});
// Now, jsondata will be :
{"all":"true","FDamount":"false","DDamount":"true"} 
```

[jQuery.extend](http://api.jquery.com/jQuery.extend/)在使用 jQuery 时可用（当然），但我相信您可以在其他库/框架中找到类似的方法。

（我使用的是单引号，但双引号也可以）

# iphone - 如何仅为 iOS 6 导入社交框架？

> ID：14002304
> 
> 赞同：1
> 
> 时间：2012-12-22T11:07:33.720
> 
> 标签：iphone, ios, ios5, ios6

如何仅为 iOS 6 导入社交框架？我想禁用其他 iOS 版本的社交框架。目前我正在尝试这个，我也尝试将 FrameWork 更改为可选，但不在 iOS 5.1 模拟器上运行。

```
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0)
        {
          #import <Social/Social.h>   
        } 
```

请告诉如何检查和运行 iOS 5 和 iOS 6。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-22T11:14:13.403

首先：不要查询操作系统版本来猜测支持的内容，检查特定功能是否实际可用，而不是根据假设使用它。

也就是说，最新版本的 iOS 和工具链支持弱链接。只需检查您打算使用的类不是`Nil`（方法＃1）。您也可以为此使用 Objective-C 运行时（方法 #2）：

```
// method #1 - weak linking
if ([SLRequest class] != Nil) {
    // Social.framework is available
}

// method #2 - querying the runtime
if (NSClassFromString(@"SLRequest") != Nil) {
    // Social.framework is available
} 
```

为了使弱链接生效，您打算像这样使用的框架应添加为“可选”而不是“必需”。如果您不使用 Xcode 或 IDE，而仅使用命令行工具链，则可以通过传递来强制执行弱链接

```
-flat_namespace -undefined dynamic_lookup 
```

到链接器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T11:25:41.260

```
#import <Avaibility.h>

#if defined(__IPHONE_6_0) && __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_6_0
#import <Social/Social.h>
#import <Accounts/Accounts.h>
#elif defined(__IPHONE_5.0) && __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_5_0
#import <Twitter/Twitter.h>
#import <Accounts/Accounts.h>
#else
#error Your SDK is too old ! Need at least 5.0.
#endif 
```

# linux - 处理 unix 中的日期格式

> ID：14002307
> 
> 赞同：3
> 
> 时间：2012-12-22T11:08:01.287
> 
> 标签：linux, bash, shell, unix

以下`sql`代码将插入到文本文件中，作为 input.txt 的输入：

```
insert into t_agg_sgsn_gprs_usage
select
    served_imsi as imsi,
    served_msisdn as msisdn,
    NVL(cell_identity,'-1') as cell_id,
    NVL(trim(to_char(location_area_code,'99999999')),'UNKNOWN'),
    substr(served_imei,1,8) tac_code,
    to_char(to_timestamp(record_opening_time,'YYYYMMDDHH24MISS'),'YYYYMMDD')
        as call_dt,
    'ajay' as loaded_dt,
    count(1) as cdr_count,
    sum(data_volume_uplink) as uploaded_data_volume,
    sum(data_volume_downlink) as downloaded_data_volume,
    case
        when substr(imsi,6,2)='65'
        then substr(imsi,1,9)
        else substr(imsi,1,5)
    end imsi_prefix
from
    t_cdrc_sgsn_pdp_18
    where loaded_dt LIKE 'ajay%' AND trim(served_imsi) != ''
        AND trim(served_msisdn) != '' AND trim(served_imei) != ''
    group by imsi, msisdn, tac_code, cell_id, location_area_code, call_dt; 
```

我正在编写一个 unix 脚本，它应该给出日期加 1 的输出，并附加到一个 sql 文件（changer.sql），直到指定的日期。

```
insert into t_agg_sgsn_gprs_usage
select
        served_imsi as imsi,
        served_msisdn as msisdn,
        NVL(cell_identity,'-1') as cell_id,
        NVL(trim(to_char(location_area_code,'99999999')),'UNKNOWN'),
        substr(served_imei,1,8) tac_code,
        to_char(to_timestamp(record_opening_time,'YYYYMMDDHH24MISS'),'YYYYMMDD') as call_dt,
        '2012-10-17' as loaded_dt,
        count(1) as cdr_count,
        sum(data_volume_uplink) as uploaded_data_volume,
        sum(data_volume_downlink) as downloaded_data_volume,
        case when substr(imsi,6,2)='65' then substr(imsi,1,9) else substr(imsi,1,5) end imsi_prefix
from
        t_cdrc_sgsn_pdp_18
        where loaded_dt LIKE '2012-10-17%' AND trim(served_imsi) != '' AND trim(served_msisdn) != '' AND trim(served_imei) != ''
        group by imsi, msisdn, tac_code, cell_id, location_area_code, call_dt;

insert into t_agg_sgsn_gprs_usage
select
        served_imsi as imsi,
        served_msisdn as msisdn,
        NVL(cell_identity,'-1') as cell_id,
        NVL(trim(to_char(location_area_code,'99999999')),'UNKNOWN'),
        substr(served_imei,1,8) tac_code,
        to_char(to_timestamp(record_opening_time,'YYYYMMDDHH24MISS'),'YYYYMMDD') as call_dt,
        '2012-10-18' as loaded_dt,
        count(1) as cdr_count,
        sum(data_volume_uplink) as uploaded_data_volume,
        sum(data_volume_downlink) as downloaded_data_volume,
        case when substr(imsi,6,2)='65' then substr(imsi,1,9) else substr(imsi,1,5) end imsi_prefix
from
        t_cdrc_sgsn_pdp_18
        where loaded_dt LIKE '2012-10-18%' AND trim(served_imsi) != '' AND trim(served_msisdn) != '' AND trim(served_imei) != ''
        group by imsi, msisdn, tac_code, cell_id, location_area_code, call_dt; 
```

并继续递增并附加到`changer.sql`文件中，直到指定的结束日期。

以下是我到目前为止所拥有的，但这仍然没有产生预期的结果：

```
startdate = `date +"%y-%m-%d"`
set startdate =  2012-10-17
enddate = `date “+%y-%m-%d` 
set enddate = 2012-12-22
for($startdate <= $enddate)
do
for file in $(grep -il "ajay" input.txt)
do
sed -e "s/ajay/$startdate/ig" $file >> changer.sql
done
$startdate --startdate="-1 days ago"
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:37:40.603

考虑到您的问题仅涉及 bash，您会遇到以下错误：

1 - 你会这样做：

```
startdate=...
set startdate=... 
```

2 - 你的语法对于 bash 中的赋值是错误的；你不应该有空格：

```
rvalue=lvalue
startdate=`date +"%y-%m-%d"` 
```

3 - 这种语法对于`for`循环是错误的；猜你想要一个`while`循环：

```
for ($startdate <= $enddate)  *wrong*
do ...
done

while (( $startdate <= $enddate )); do
    ...
done 
```

4 - 你期待什么：

```
$startdate --startdate="-1 days ago" 
```

您可能正在尝试将 $startdate 的值降低`1 day`，因为您必须这样做：

```
startdate=$(date -d $startdate' -1 days' +"%y-%m-%d") 
```

# php - PHP中的复选框

> ID：14002324
> 
> 赞同：0
> 
> 时间：2012-12-22T11:09:52.220
> 
> 标签：php, checkbox

我有 HTML

```
<td><input value="on" checked="checked" name="checkbox1[0]" type="checkbox"></td>
<td><input value="on" checked="checked" name="checkbox2[0]" type="checkbox"></td>
<td><input value="on" checked="checked" name="checkbox3[0]" type="checkbox"></td> 
```

和功能

```
function checkbox_verify($_name) {
    $result = 0;
    if(isset($_REQUEST[$_name])) {
        if($_REQUEST[$_name] == 'on') {
            $result = 1;
        } else {
            $result = 0;
        }
    }
    return $result;
} 
```

使用：

```
$tmp = checkbox_verify("checkbox[$k]") . " " . checkbox_verify("checkbox2[$k]"). " " . checkbox_verify("checkbox3[$k]"); 
```

我只想选中复选框 - 选中与否。但每次结果都是“0”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:13:36.357

PHP 自动将`foo[bar]`-style 字段名称转换为数组。因此，您将需要检查`$_REQUEST['checkbox1'][0]`. 由于复选框仅在选中时才具有值，因此以下检查就足够了：

```
if(isset($_REQUEST['checkbox1'][0])) {
    // do stuff
} 
```

另一种选择是将您的复选框重命名为不包括括号。然后你可以简单地检查`$_REQUEST['name-of-the-checkbox']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:13:31.000

删除`[0]`名称：

```
<td><input value="on" checked="checked" name="checkbox1" type="checkbox"></td>
<td><input value="on" checked="checked" name="checkbox2" type="checkbox"></td>
<td><input value="on" checked="checked" name="checkbox3" type="checkbox"></td> 
```

然后你可以检查它`isset`：

```
function checkbox_verify($_name) {
  return isset($_REQUEST[$_name]);
} 
```

# android - 在 TabHost 上禁用系统音效

> ID：14002330
> 
> 赞同：0
> 
> 时间：2012-12-22T11:11:32.790
> 
> 标签：android, tabs, android-tabhost, audio

当用户单击 TabHost 中的选项卡并设置我自己的自定义声音时，我正在尝试禁用系统音效。所以我尝试了这个来禁用系统音效：

```
TabHost tabHost = getTabHost();
tabHost.setSoundEffectsEnabled(false); 
```

这是我播放自定义声音的代码：

```
tabHost.setOnTabChangedListener(new OnTabChangeListener() {
    public void onTabChanged(String tabId) {
        SoundUtility.getInstance(MainActivity.this).playPositive();
    }
}); 
```

我的自定义声音确实会播放，但系统音效也会播放，它没有被禁用。所以我实际上有 2 个声音相互重叠。那么如何禁用系统音效呢？

# ruby - 异步 Ruby 在 Vim 中是如何工作的？

> ID：14002334
> 
> 赞同：3
> 
> 时间：2012-12-22T11:12:42.330
> 
> 标签：ruby, vim, embedded-ruby

如果你用 +ruby 编译最新版本的 Vim，你可以在 Vim 中使用 :ruby 命令。

当我运行一些异步 Ruby 代码时，“幕后”发生了什么？

例如：

```
:ruby <<EOS
print 'hello'
Thread.new do
  sleep 1
  print 'world'
end
EOS
# hello

:ruby print 'foo'
# world
# foo 
```

正如预期的那样，这会立即打印“你好”。但是，在我运行另一个 :ruby 命令之前，'world' 不会打印。Vim 是否只支持一个线程，并将新线程推送到某种队列中以便在下一个 :ruby 命令上运行？

我已经尝试在 中查看 Vim 的源代码`src/if_ruby.c`，但我的 Ruby C-Extension 阅读技巧并不是最好的。

我在问，因为我想写一些 Ruby 每隔几秒轮询一次并更新一个 Vim 窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T19:26:47.547

Vim 本身是单线程的。但也有一些例外或解决方法：

1.  Python 线程正在工作，但由于某种原因不在 ARM 上。我不能说虽然我可以预测如果你`vim.*`从非主线程运行方法会发生什么。我看到它在一些插件中使用，但没有`vim.*`在线程中使用。
2.  Python 多处理模块运行良好（尽管您需要禁用所有 vim 信号处理程序）。我个人在我的 aurum 插件中使用了这个解决方案。我猜 ruby​​ 等价物会起作用，但 AFAIR 它只是一个`fork()`使用简单字节管道作为唯一通信的调用，没有什么比`multiprocessing.Pipe`（传递一组有限的 python 对象的管道）更复杂，（`multiprocessing.Queue`实现对象队列的管道的包装器），`multiprocessing.Value`（使用对象接口存储固定大小的值的共享内存）或`multiprocessing.Lock`（不知道它是什么，但名称本身就说明了目的）。至少不在标准库或核心中。

AFAIK 一些较旧的 ruby​​ 版本使用绿色线程，因此（从操作系统的角度来看）是单线程的，而较新的 ruby​​ 现在使用 POSIX 线程。您可以尝试更新，也许这会起作用。虽然你最好选择其他的东西作为测试（比如在单独的线程中修改一些变量），而不是调用 vim 的东西。您可以在用户系统上找到的任何当前 python 版本都使用 POSIX 线程，这可能是 ruby​​ 线程不起作用而 python 线程起作用的根本原因。

# ruby-on-rails - Rails - 验证文本框中的 25 行

> ID：14002341
> 
> 赞同：2
> 
> 时间：2012-12-22T11:13:34.577
> 
> 标签：ruby-on-rails

我想`validates`在模型中的一个文本字段上使用该方法，以便最终用户必须输入至少 25 行（用回车键分隔）。所以现在我验证输入的存在，所以它不会是空白的：

```
validates :lines, :presence => true 
```

这必须使用一些正则表达式来检查是否存在至少 24 ' `\n`' ？我怎样才能在我的模型中做到这一点？

编辑：值需要是 utf8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:25:10.053

也许你必须用`validate`方法来做：

```
validate do
  errors.add(:lines, "must be at least 25 lines") if lines.lines.to_a.size < 25
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:29:30.183

如果您真的需要使用正则表达式，请尝试类似

```
/([^\n]*\n[^\n]*){24,}/ 
```

但它也计算空行。

# highcharts - 删除图表上的网格线

> ID：14002342
> 
> 赞同：21
> 
> 时间：2012-12-22T11:13:36.227
> 
> 标签：highcharts, highstock

我有lib HighCharts的[图表](http://regexinfo.ru/my_infa/parse_position/good/kontek/chart.php)`gridLineWidth: 0`，我想在我写的图表上删除 yAxis 的网格线， 但网格线没有删除所有代码：

```
<script type="text/javascript">
(function($){ // encapsulate jQuery

$(function() {
    Highcharts.setOptions({
        lang: {
            rangeSelectorZoom: 'Маcштаб',
            rangeSelectorFrom: 'От',
            rangeSelectorTo: 'До',
            thousandsSep: ' '
        },
        global: {
            useUTC: false
        }
    });

    $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
        // Create the chart
        window.chart = new Highcharts.StockChart({
            chart : {
                borderColor: 'white',
                renderTo : <?php echo "cont".$i; ?>,
                backgroundColor: '#f9f9f9' // Сделаем слегка серый фон
            },

            rangeSelector: {
                buttons: [  
                { 
                    type: 'week', 
                    count: 1, 
                    text: 'Неделя',
                },  
                { 
                    type: 'month', 
                    count: 1, 
                    text: 'Месяц',
                },              
                { 
                    type: 'year', 
                    count: 1, 
                    text: 'Год'
                },
                {
                    type: 'all',
                    text: 'Всё'
                }],
                inputDateFormat: '%d.%m.%Y', // Меняем на привычный для нас формат даты в интервалах
                inputEditDateFormat: '%d.%m.%Y',
                buttonTheme: {
                    width: 43 // Увеличим ширину кнопки
                },
                selected: 1 // Какая кнопка выбрана по умолчанию
            },

            yAxis: [{
            gridLineWidth: 0,
            plotBands: [{ 
                 color: 'rgba(1, 143, 189, 1)',
                 from: -2,
                 to: 11
             },
             { 
                 color: 'rgba(157, 200, 5, 1)',
                 from: 11,
                 to: 21
             },
             { 
                 color: 'rgba(202, 1, 94, 1)',
                 from: 21,
                 to: 50
             }],

                title: {
                    text: 'Позиции'
                },
                startOnTick: false,
             //   min: 1,
                showFirstLabel: true,
                showLastLabel: true,
                reversed: true,
                tickPositioner: function(min, max) {
                    // specify an interval for ticks or use max and min to get the interval
                    var interval = Math.round((max-min)/5);
                    // push the min value at beginning of array
                    var dataMin=this.dataMin;
                    var dataMax=this.dataMax;          
                    var positions = [dataMin];
                    var defaultPositions = this.getLinearTickPositions(interval, dataMin, max);
                    //push all other values that fall between min and max
                    for (var i = 0; i < defaultPositions.length; i++) {
                        if (defaultPositions[i] > dataMin && defaultPositions[i] < dataMax) {
                            positions.push(defaultPositions[i]);
                        }
                    }
                    // push the max value at the end of the array
                    positions.push(dataMax);
                    return positions;
                },
                //changed min valuereversed: true
            }],
            navigator: {
                enabled: false,
                maskFill: 'rgba(255, 255, 255, 0.45)',
                //margin: 20,
                series: {
                    type: 'areaspline',
                    color: 'rgba(255, 255, 255, 0.00)',
                    fillOpacity: 0.4,
                    dataGrouping: {
                        smoothed: false
                    },
                    lineWidth: 2,
                    lineColor: '#e9cc00',
                    marker: {
                        enabled: false
                    },
                    shadow: true
                },
                yAxis: {
                    reversed: true
                }
            },
            xAxis : { 
                gridLineWidth: 0,
                type: 'datetime',
                title : {
                    text : ' '
                },
            },

            title : {
                //text : 'Позиции сайта'
            },
            legend: {
                enabled: true,
                align: 'center',
                itemWidth: 234, // указал ширину, чтобы выводились сайты в 4 колонки
                verticalAlign: 'top'
            },          
            series : [{
                lineColor: 'white',
                name : 'Позиция в яндексе',
                id : 'dataseries',
                data : <?php echo $d ?>,
                tooltip: {
                    backgroundColor: 'rgba(250, 250, 250, .85)', // Фон немного темнее
                    borderColor: 'rgba(100, 100, 100, .90)', // Цвет границы (по умолчанию меняется автоматом)
                    xDateFormat: '%d.%m.%Y %H:%M', // Наш формат даты
                    // Тут немного увеличиваем размер даты
                    headerFormat: '<span style="font-size: 12px">{point.key}</span><br/>',
                    // Формат надписей в подсказке, названия цветом графика, а значения жирным
                    pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
                    //valueDecimals: 2
                }
            }]
        });
    });

});

})(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-23T14:02:13.033

问题不在于`gridLineWidth`. 你已经正确设置了。

另外你需要设置`minorGridLineWidth`你必须设置的`0`

**[工作演示](http://jsfiddle.net/P2Mv2/1/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-05T14:38:58.827

如果您不想触摸配置对象，只需通过 css 隐藏网格：

```
.chart-container .highcharts-grid {
   display: none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-01T06:54:46.027

```
you just need to gridLineWidth set to 0
yAxis: {
           min:0,
           categories: ["","Low","Medium","High"],
           tickWidth: 0,
           crosshair: false,
           lineWidth: 0,
           gridLineWidth:0,//Set this to zero
           title: '',
           labels: {
                       formatter: function () {
                           return this.value;labels
                           }            
                       },
                       showEmpty: false
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-21T00:06:15.047

上面提到的解决方案都没有对我有用，所以这个终于奏效了（取自 Sparklines 示例：[https](https://www.highcharts.com/demo/sparkline) ://www.highcharts.com/demo/sparkline ）：

```
yAxis: {
    startOnTick: false,
    endOnTick: false,
    tickPositions: [],
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-26T16:52:09.677

对于所有其他线条，这对我有用，在某些情况下，使用线条透明度作为颜色是我能找到的唯一解决方案。

```
$(function() {                                                                                                                                               
  $('#container').highcharts({                                                                                                                               
    colors: ['#00f900', '#ffff3c', '#ff2600'],                                                                                                               
    credits: {                                                                                                                                               
      enabled: false                                                                                                                                         
    },                                                                                                                                                       
    exporting: {                                                                                                                                             
      enabled: false                                                                                                                                         
    },                                                                                                                                                       
    legend: {                                                                                                                                                
      itemDistance: 60                                                                                                                                       
    },                                                                                                                                                       
    lineColor: 'red',                                                                                                                                        
    chart: {                                                                                                                                                 
      type: 'column',                                                                                                                                        
      backgroundColor: 'transparent'                                                                                                                         
    },                                                                                                                                                       
    title: {                                                                                                                                                 
      text: ''                                                                                                                                               
    },                                                                                                                                                       
    legend: {                                                                                                                                                
      itemStyle: {                                                                                                                                           
        color: 'white',                                                                                                                                      
        fontWeight: 'normal',                                                                                                                                
        fontFamily: 'helvetica',                                                                                                                             
        fontSize: '12px'                                                                                                                                     
      }                                                                                                                                                      
    }
// ....rest in js fiddle 
```

[http://jsfiddle.net/fv50sLkj/23/](http://jsfiddle.net/fv50sLkj/23/)

# r - na.rm 和转换相关的警告

> ID：14002345
> 
> 赞同：1
> 
> 时间：2012-12-22T11:13:49.317
> 
> 标签：r, type-conversion, na, na.rm

今天我试图完成我最后的 R-study-exercises，但我失败了。我不允许你展示我学术的精确指示，但你可以帮助我解决采购后收到的警告。他们的意思是什么？什么不适合？我知道，这个问题很模糊，但这是唯一的问法。我相信它是关于“Aufgabe 3”和“Aufgabe 4”的

这是我的输入：

```
x <- read.csv ("http://hci.stanford.edu/jheer/workshop/data/worldbank/worldbank.csv")
y <- (colnames (x) <- (c ("Country", "Year", "co2", "power","energy", "fertility", "gni", "internet", "life.expectancy","military", "population", "hiv.prevalence")))
y

####Aufgabe 1####

f1 <- min(x$fertility, na.rm=TRUE)
f1

####Aufgabe 2####

f2 <- max (subset(x, Country=="Australia" | Country=="Belarus" | Country=="Germany", select=fertility), na.rm=TRUE)
f2

####Aufgabe 3####

q1 <- quantile (subset(x, Year==2005, select=military), probs=c(.25), na.rm=TRUE)
q1

####Aufgabe 4####

q2 <- quantile (subset(x, Year==2001, select=population), probs=c(.05), na.rm=TRUE)
q2

####Aufgabe 4####
n <- length(which (is.na (subset (x, Year==2000, select=military))))
n

####Aufgabe 5####

library(psych)

mil<- skew (x$military)
coun<- skew(x$Country)
Ye<- skew(x$Year)
co<- skew(x$co2)
po<- skew(x$power)
en<- skew(x$energy)
fer<- skew(x$fertility)
gni<- skew(x$gni)
inertnet<- skew(x$internet)
life<- skew(x$life.expectancy)
pop<- skew(x$population)
hiv<- skew(x$hiv.prevalence)

mil
coun
Ye
co
po
en
fer
gni
inertnet
life
pop
hiv

ku1<- "co2"
ku1 
```

...以及我在采购后收到的这些警告：

```
1\. In var(as.vector(x), na.rm = na.rm : Na generated through conversion
2\. n mean.default(x) : argument is not numeric or logical: returning NA
3\. 3: In Ops.factor(x, mx) : - not meaningful for factors
4\. In var(as.vector(x), na.rm =na.rm) : Na generated through conversion 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T11:22:29.227

1.  意味着`as.vector(x)`操作导致一个或多个元素`x`被转换`NA`为未定义这些组件的转换。
2.  当`mean.default`被调用时，`x`既不是数字也不是逻辑，因此该函数不能对数据做任何事情
3.  意味着`x`或`mx`两者都是因子，并且`-`（和其他数学运算符）没有为因子对象定义。
4.  见上文 1.。

所有这些都指向输入数据的问题，通常是已经创建了一个因素。

警告来自这一行：

```
> coun <- skew(x$Country)
Warning messages:
1: In var(as.vector(x), na.rm = na.rm) : NAs introduced by coercion
2: In mean.default(x) : argument is not numeric or logical: returning NA
3: In Ops.factor(x, mx) : - not meaningful for factors
4: In var(as.vector(x), na.rm = na.rm) : NAs introduced by coercion 
```

这是因为`x$Country`是一个因素：

```
> str(x)
'data.frame':   1362 obs. of  12 variables:
 $ Country        : Factor w/ 227 levels "","Afghanistan",..: 19 19 19 19 19 19 166 166 166 166 ...
.... 
```

即使你把它变成一个字符，你也可以计算这个变量的偏度。只需将此行注释掉即可。

# stanford-nlp - 斯坦福 NER - 堆空间错误

> ID：14002348
> 
> 赞同：1
> 
> 时间：2012-12-22T11:14:09.253
> 
> 标签：stanford-nlp

我在我的 Web 应用程序中使用斯坦福 NER，并使用 english.muc.7class.dissim.crf.ser.gz（16 MB 大小）作为分类器。当我尝试部署和运行我的应用程序时，我得到一个堆空间 - 内存不足加载分类器时出错。

已尝试仅保留有用的代码，还检查代码是否没有创建太多对象并占用空间。但没有成功。

是因为分类器的大小吗？但我想用同样的，我该怎么办？

在 tomcat 中使用 vm 选项增加了本地的堆大小。但是我可以在我将托管我的应用程序的实际服务器上增加 vm 的堆大小，这也不是正确的方法。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:27:47.237

是的，您基本上不应该太担心代码的大小，因为它由加载的数据的大小决定。

模型数据：分类器模型只是占用大量空间。似乎您需要大约 140 MB 的堆来加载当前（2012 年）版本的 english.muc.7class.dissim.crf.ser.gz 。它们只是很多字符串和双精度数，但是磁盘上的大小有很大的增加，因为：磁盘上的数据是压缩的，众所周知，Java 中的 String 对象每个都占用*大量*空间，而且它们通过占用更多空间的 HashMap 重新链接。似乎单独的 String 数据最终占用了大约 72 MB 的内存（36 MB 的 char[] 数据，36 MB 的 String 对象）。

要分析的数据：这取决于您如何调用它，并且在您使用 tomcat 的情况下可能不是问题，但是如果在文件上运行 NER，它将在分类之前将整个文件读入内存。因此，您可以通过给它多个较小的单元（文件、字符串或其他）进行分类来减少内存。

此外，您更有可能通过标签[stanford-nlp](/questions/tagged/stanford-nlp "显示标记为“stanford-nlp”的问题")获得有关此类问题的及时帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:28:51.210

我同意克里斯托弗的建议，你不用担心大小。

但是为了获得强大的性能，请尝试使用永远存在的 Java 线程，并在 serevr 开始时通过静态方法或某个侦听器仅加载一次分类器。然后对于进一步的注释使用相同的上下文。

# python - 在python中重复gzip文件

> ID：14002357
> 
> 赞同：1
> 
> 时间：2012-12-22T11:15:29.030
> 
> 标签：python, gzip

我正在用python编写一个脚本，用于将静态站点部署到aws（s3、cloudfront、route53）。因为我不想在每次部署时都上传每个文件，所以我通过比较它们的 md5 散列和它们的电子标签（s3 设置为对象的 md5 散列）来检查哪些文件被修改。这适用于所有文件，除了我的构建脚本在上传之前 gzip 压缩的文件。查看文件内部，gzip 似乎并不是真正的纯函数；每次运行 gzip 时，输出文件都会有非常细微的差异，即使源文件没有更改。

我的问题是：在给定完全相同的输入的情况下，有什么方法可以让 gzip 可靠且可重复地输出完全相同的文件？还是我最好检查文件是否已压缩，解压缩并计算 md5 哈希/手动设置电子标签值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:04:04.107

压缩后的数据每次都是一样的。唯一不同的可能是标头中的修改时间。的第五个参数`GzipFile`（如果您正在使用）允许您在标头中指定修改时间。第一个参数是文件名，它也包含在标题中，因此您希望保持相同。如果您为源数据提供第四个参数，则第一个参数仅用于填充标题的文件名部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T11:20:20.520

gzip 不稳定，正如您正确计算的那样：

```
[root@dev1 ~]# touch a b
[root@dev1 ~]# gzip a
[root@dev1 ~]# gzip b
[root@dev1 ~]# md5sum a.gz b.gz
8674e28eab49306b519ec7cd30128a5c  a.gz
4974585cf2e85113f1464dc9ea45c793  b.gz 
```

# recursion - Clojure 中的递归惰性序列

> ID：14002358
> 
> 赞同：4
> 
> 时间：2012-12-22T11:15:32.270
> 
> 标签：recursion, clojure, lazy-evaluation

我不明白为什么这个lazy-seq会导致stackoverflow，为什么不将序列传递给dorun：

```
(defn very-lazy [s]
    (lazy-seq
   (if (seq s)
     [(first s) (very-lazy (rest s))]
     [])))

(dorun (very-lazy (range 200000000)))
>nil

(take 2 (very-lazy (range 20000000))
>...(1577 (java.lang.StackOverflowError 
```

如果它是惰性的，那么`take 2`应该导致惰性序列只迭代两次，为什么不会发生，为什么 dorun 有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:54:28.357

在您的示例函数中返回 lazyseq `(0 (1 (2 (3 (...)))))`。这就是为什么`dorun`在没有 stackoverflow 的情况下运行（有两个元素的序列`0`并且`(1 (2 (...)))`不`dorun`评估）并且`second`失败（它返回 repl 尝试评估以打印出的无限嵌套序列）。

我猜你正在寻找这个解决方案

```
(defn very-lazy [s]
  (lazy-seq
   (if (seq s)
     (cons (first s) (very-lazy (rest s)))
     [])))

(take 10 (very-lazy (range 200000000)))
-> (0 1 2 3 4 5 6 7 8 9) 
```

# java - 解决方法？

> ID：14002360
> 
> 赞同：1
> 
> 时间：2012-12-22T11:15:48.820
> 
> 标签：java, architecture, wrapper

有很多情况我希望

```
this=somevalue 
```

在 Java 中是允许的。例如，当我在超类 Person 中并且我想将类型从 Person 修改为 Customer 时，分配如下

```
this=new Customer(); 
```

会有帮助的。想象一下，我有一个客户关系系统，我在其中保存了一个人员列表，我想根据他们的角色以不同的方式处理他们，但只允许一个主角色。所以一个人可以是客户、员工、朋友或......

所有人都以人的身份开始，但在任何时候他们都可以被“提升”为大师。稍后我可能想更改 Masterrole。

即使使用工厂、依赖注入等，如果不使用角色模式，似乎仍然很难获得有效的解决方案。

要获得对对象的引用可以由对象本身修改的预期效果，有什么好的解决方法？我的第一个想法是拥有一个 Wrapper 对象，它将所有访问权限委托给“真实对象”——真实对象实现了实体的接口，例如 Person。如果我知道要从 Person 转移到 Customer，则包装器会交换“真实”对象。有没有这些方面的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:24:20.667

我猜你想要实现的不仅是更改 this 指针，而且是对实例的所有引用。所以使用包装器的方法似乎是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:24:25.163

> 有没有这些方面的解决方案？

是的。您的包装器想法是一种常见且可行的解决方案，通常称为[状态模式](http://en.wikipedia.org/wiki/State_pattern)。来自[GoF](http://en.wikipedia.org/wiki/Design_Patterns)：

> 在状态模式中，对象将请求委托给代表其当前状态的状态对象。

# c - 条件运算符中赋值的优先级

> ID：14002361
> 
> 赞同：0
> 
> 时间：2012-12-22T11:15:52.880
> 
> 标签：c, operator-precedence

我创建了这个简单的程序来自动生成要在 Avisynth scipt 中使用的帧序列：

```
#include <stdio.h>

int main(void) {

    const int step = 3;
    const int arr[] = {31997, 31998, 32001};
    int i, ii = 0;

    for(i = 32002; i <= 32121; i += step, (sizeof(arr)/sizeof(int) - 1 ) != ii ? ++ii : ii = 0) {

        printf("freezeframe(%d,%d,%d)\n", i, i + step, arr[ii]);

    }

    return 0;
} 
```

将 MinGW 与 GCC 4.6.2 一起使用，我收到此错误：需要左值作为赋值的左操作数。

这个问题可以通过在 *ii=0*周围使用括号来解决。但是，我不明白为什么这是一个错误。不应该先评估赋值运算符吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T11:19:19.967

条件运算符的优先级高于 C 中的赋值运算符。

```
(sizeof(arr)/sizeof(int) - 1 ) != ii ? ++ii : ii = 0 
```

被评估为

```
((sizeof(arr)/sizeof(int) - 1 ) != ii ? ++ii : ii) = 0 
```

为了快速提醒 C 中的运算符优先级，您可以看到：

[http://www.kernel.org/doc/man-pages/online/pages/man7/operator.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/operator.7.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T11:25:43.507

维基百科有一个简短的部分解释了这一点：[http ://en.wikipedia.org/wiki/Operators_in_C_and_C++#Notes](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Notes)

C中条件运算符的语法是

```
logical-OR-expression ? expression : conditional-expression 
```

请注意， an`assignment-expression` *不*被视为 a `conditional-expression`，并且条件表达式不能位于赋值表达式的左侧，因此从技术上讲它是语法错误。见语法：[http ://www.lysator.liu.se/c/ANSI-C-grammar-y.html](http://www.lysator.liu.se/c/ANSI-C-grammar-y.html)

但是，GCC （错误地）将其解析为：

```
((sizeof(arr)/sizeof(int) - 1 ) != ii ? ++ii : ii) = 0 
```

这是一个语义错误，因为`++i`它不是左值表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:57:29.407

如果您以这种方式编写代码，则始终建议使用括号

```
(sizeof(arr)/sizeof(int) - 1 ) != ii ? ++ii : ii = 0 
```

像

```
(((sizeof(arr)/sizeof(int) - 1 ) != ii ? ++ii : ii) = 0) 
```

10 次中有 9 次你会卡住。

所以**养成使用括号的习惯，**这不会对编译器造成任何开销！！！

# linux - windows 和 linux 中的 IO 性能

> ID：14002366
> 
> 赞同：2
> 
> 时间：2012-12-22T11:17:01.227
> 
> 标签：linux, io

我们想构建一个 Web 服务来返回一些图像（如谷歌地图图块）。

源数据以 esri[紧凑型缓存格式](http://blogs.esri.com/esri/arcgis/2010/05/27/introducing-the-compact-cache-storage-format/)组织，我们服务的关键是从包中读取切片。

我不知道如何选择平台、windows 或 linux？

据说linux的IO读写性能比windows更好。

但是如果我们选择linux，java是我们唯一的选择，所以我想知道是否有什么我们应该知道的点来提高linux中的IO读取性能？

PS：

在winodws平台，我们将使用c#基于.net4构建服务，并使用iis部署服务。

在linux中，我们将使用java（可能基于spring mvc或其他一些mvc框架）构建服务，并使用tomcat部署服务。

**更新：**

我们可能有以下不同折叠的源压缩文件：

```
L1
    RxxCxx.bundle
    RxxCxx.bundlx
L2
    RxxCxx.bundle
    RxxCxx.bundlx 
```

来自客户端的请求可能如下所示：

```
http://ourserver/maptile?row=123&col=234&level=1.png 
```

对于这个请求，我们将进入折叠`L1`，因为级别是`1`，然后首先读取`RxxCxx.bundlx`文件，因为这个文件是元数据，直到告诉我们`RxxCxx.bundle`渲染图像数据的位置（偏移和长度）（`row=123&col=234`） ，然后我们将`RxxCxx.bundle`根据偏移量和长度读取。然后我们通过将数据写入响应并将内容类型设置为“image/png”或其他内容来将数据呈现为图像。

这是处理请求的整个过程。

然后我想知道是否有任何文档或现有的演示可以告诉我如何处理这些类型的 IO 读取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-17T18:23:47.307

> 您必须在您的环境中使用 Windows 服务器的唯一情况是当您选择 MS SQL Server DBMS（它几乎是 Sybase 但更便宜）时，在这种情况下为 DB 使用 Windows 机器，为中间层使用 *nix 服务器.

有很多情况可以使用 Windows。从声明“必须拥有 Windows”开始，揭示了一种现有的偏见，然后是许多毫无根据的声明。但至少你清楚地认识到了这一点。

> Java 是毫秒级中间件的最佳技术，主要用于大量成熟的标准化开源技术可用。从编码（Eclipse、NetBeans、Idea）到手动（ant、maven）和自动（teamcity、hudson/jenkins）构建、测试、静态代码分析的一切都在那里，是标准化的，是开源的，并且有数百万的支持大小社区。

我觉得有必要说 Visual Studio/C#（因为提到了 OP 作为替代方案）提供了你上面提到的所有东西，除了开源。也就是说，.NET Framework（或 .NET Core）现在是开源的。[在这里](http://blogs.msdn.com/b/dotnet/archive/2014/11/12/net-core-is-open-source.aspx)获取信息。根据您的上述评论，我想我可以得出结论，唯一可行的解​​决方案可以通过开源社区获得。

我曾经听过这句话很有道理：“只有当你的时间一文不值时，它才是免费的。”

此外，计算整个开源社区是一个虚假的论点。您必须使用一种开发工具/API 并将社区支持与另一种进行比较。例如，比较 Visual Studio 与 Eclipse 的社区规模/质量。或者 .NET Framework 与 Java 的对比。

顺便说一句，我没有体验过比 Visual Studio/Windows 更好的智能感知实现。当 Eclipse 工作时，您必须依赖您引用的开源库的质量才能获得任何有意义的东西。我发现 .NET Framework 需要比 Java 更少的 3rd 方库来实现相同的目标。

> Linux 是性能、稳定性、易于维护、开发环境质量最好的服务器端平台 - 一个极其强大的基于命令行的 IDE。您可以期望 Linux 服务器的正常运行时间长达数月，但 Windows 却不行。

我们有许多 Windows 服务器运行处理“大数据”的服务，这些服务自 2014 年 5 月 30 日（近一年）以来一直保持系统正常运行时间，自 2013 年以来还有更多运行时间没有中断。我们遇到正常运行时间问题的唯一时间是硬件老化/故障或我们编写的应用层软件包含错误。

> Tomcat/Servlet（或 Jetty/Servlet）是许多金融机构的经典工业组合，其中稳定性是第一要务。

也使用[IIS：金融机构 IIS 开发人员的职位发布](https://www.linkedin.com/groups/Searching-IIS-Admin-Large-Financial-1737677.S.94601197)

> 最后，IO 性能问题：高质量的用户空间非阻塞 IO 代码将受到 CPU 和硬件带宽的限制，因此操作系统不会成为决定因素。虽然像中断关联、线程固定、实时调整、内核绕过等花哨的东西我相信在 Linux 上更容易做到。

这些变量中的大多数是由每个操作系统定义的。听起来您对线程有很多经验，但我认为开发人员可以在两种环境中轻松地在应用程序层进行优化。更改线程优先级、实现自定义线程池、配置 BIOS 等都在 Windows 世界中可用。除非您想定制 Unix/Linux 允许的内核，否则您必须支持您自己的 Unix/Linux 定制构建。

我不认为商业软件应该被诋毁或避免，而支持开源作为一项规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T11:35:18.007

我知道这听起来可能毫无根据，但除非您必须使用 Windows，否则请使用 *nix。您必须在您的环境中使用 Windows 服务器的唯一情况是当您选择 MS SQL Server DBMS（它几乎是 Sybase 但更便宜）时，在这种情况下为 DB 使用 Windows 机器，为中间层使用 *nix 服务器.

**Java**是毫秒级中间件的最佳技术，主要用于大量成熟的标准化开源技术可用。从编码（Eclipse、NetBeans、Idea）到手动（ant、maven）和自动（teamcity、hudson/jenkins）构建、测试、静态代码分析的一切都在那里，是标准化的，是开源的，并且有数百万的支持大小社区。

**Linux**是性能、稳定性、易于维护、开发环境质量最好的服务器端平台 - 一个极其强大的基于命令行的 IDE。您可以期望 Linux 服务器的正常运行时间长达数月，但 Windows 却不行。

**Tomcat/Servlet**（或 Jetty/Servlet）是许多金融机构的经典工业组合，其中稳定性是第一要务。

**最后，IO 性能问题**：高质量的用户空间非阻塞 IO 代码将受到 CPU 和硬件带宽的限制，因此操作系统不是决定因素。虽然像中断关联、线程固定、实时调整、内核绕过等花哨的东西我相信在 Linux 上更容易做到。

# jquery - jQuery.ajax 回调中的抛出未被捕获？

> ID：14002368
> 
> 赞同：0
> 
> 时间：2012-12-22T11:17:07.277
> 
> 标签：jquery, ajax, asynchronous, try-catch, throw

我在从 Ajax 回调中的回调中捕获抛出时遇到了一些麻烦。[我在这里](http://www.jvanderspek.com/projects/development/ThrowTest.htm)做了一个最小的测试用例（下面的代码）。

在`init()`函数中，我创建了一个新的类对象`ResourceLoader`并尝试获取[http://www.jvanderspek.com](http://www.jvanderspek.com)。通过 $.ajax。这成功并`ResourceLoader.prototype.onDone`调用了该函数。现在为了争论，我想在那里抛出一个错误，并在我的调用树的顶部，在`init();`函数中捕获它，但是唉，抛出没有被捕获。现在，这可能与 Ajax 在不同的线程中执行有关，并且当执行已经在 try 块之外时调用 throw，但是我该如何补救呢？也许我弄错了原因，但额外的问题是，为什么会发生这种情况？

```
<html>
  <head>
    <title>testbed</title>
    <script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
  </head>
  <body onload="init();">
  </body>
  <script type="text/javascript">
    init = function() {
      ResourceLoader = function(){}
      ResourceLoader.prototype.load = function(){
        var done = $.proxy(this.onDone, this);
        $.ajax({
          url: "http://www.jvanderspek.com",
        }).done(done);
      }
      ResourceLoader.prototype.onDone = function() {
        console.log( "onDone");
        throw(new Error());
      }
      var rl = new ResourceLoader();
      try {
        rl.load();
      }
      catch(error){
        window.alert( "Error caught" );
      }
    }
  </script>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:19:51.013

这是因为 Ajax 使用异步执行模型。

在进行 ajax 调用之后的异步调用中，代码的执行将继续，而无需等待响应返回。当响应从服务器返回时，将调用成功/失败回调。

在您的情况下`rl.load();`，一旦向服务器发送请求（即：在引发错误之前），调用就会返回，这就是 catch 块不起作用的原因。

您的问题的一个可能的肮脏解决方案是将附加参数传递`async: false`给 ajax 调用。但它没有达到 Ajax 调用的全部目的，因为它会阻止用户体验，直到 ajax 调用完成。*我没有测试过这个解决方案*，也许你可以试试这个。**我不会向任何人推荐这个**，但作为了解 Ajax 的一部分，您可能可以试试这个。

另一种解决方案是将错误回调传递给该`load()`方法，并在该回调失败的情况下执行您想要的任何操作。

前任：

```
init = function() {
    ResourceLoader = function(){}
    ResourceLoader.prototype.load = function(errorCallback){
        var done = $.proxy(this.onDone, this);
        $.ajax({
          url: "http://www.jvanderspek.com",
        }).done(function(){
            try{
                console.log( "onDone");
                throw(new Error());
            }catch(error){
                errorCallback(error)
            }
        });
    }
    var rl = new ResourceLoader();
    rl.load(function(error){
        window.alert( "Error caught" );
    });
} 
```

# wpf - WPF 窗口 UI 未更新

> ID：14002371
> 
> 赞同：0
> 
> 时间：2012-12-22T11:17:52.833
> 
> 标签：wpf, vb.net, user-interface

我正在尝试创建一个对话框，显示将某些账单数据从 WPF VB.NET 应用程序加载到 Word 的过程。问题是 WPF UI 没有更新以显示更改。

WPF代码是：

```
 <StackPanel Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" >
        <TextBlock Name="StatusDisplayTextBlock" Text="Printing 30 of 40 to document......" FontSize="20"/>
        <ProgressBar Name="PrintProgressBar1" Height="30" Width="400" Margin="0,10,0,0"/>
    </StackPanel> 
```

VB.NET 代码：

```
Imports Microsoft.Office.Interop

Public Class PrintingToDocx
    Dim IsWorkDone As Boolean = False
    Public Enum BillPrintMode
        InOne = 0
        Seperate = 1
    End Enum

    Private BrowserBills As New List(Of Classes.BillsNS.BilBrowserClass)
    Private Bills As New List(Of Classes.BillsNS.BillClass)
    Private PrintMode As BillPrintMode

    Private Sub PrintingToDocx_Closing(ByVal sender As Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles Me.Closing
        If IsWorkDone = False Then
            e.Cancel = True
        End If
    End Sub

    Public Sub New(ByVal BrowserBills As List(Of Classes.BillsNS.BilBrowserClass), ByVal Mode As BillPrintMode)
        InitializeComponent()
        Me.BrowserBills = BrowserBills
        PrintMode = Mode
    End Sub

    Private Sub Window_Loaded(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded
        GetBills()
        If PrintMode = BillPrintMode.InOne Then
            PrintInOne()
            ' IsWorkDone = True
        Else
            Dim count As Integer = 0
            For Each k In Bills
                count = count + 1
                StatusDisplayTextBlock.Text = "Writing Bill " & count & " of " & Bills.Count & " to WORD....."
                DataAccessModuleNS.Reports.PrintaBill(k)
            Next
            IsWorkDone = True
        End If
        Me.Close()
    End Sub

    Private Sub GetBills()
        Me.Focus()
        StatusDisplayTextBlock.Text = "Reading Bills Data...."
        Dim count As Integer = 1
        For Each k In BrowserBills
            Bills.Add(DataAccessModuleNS.Bills.GetBill(k.ID.ToString))
            StatusDisplayTextBlock.Text = "Reading Bill " & count & " of " & BrowserBills.Count & "...."
            'count = count + 1
            count += 1
        Next
    End Sub

    Private Sub PrintInOne()
        Try
            StatusDisplayTextBlock.Text = "Writing Bill " & "0" & " of " & Bills.Count & " to WORD....."

            Dim oWord As Word.Application
            Dim oDoc As Word.Document
            Dim oTable As Word.Table

            Me.Focus()
            'Start Word and open the document template.
            oWord = CreateObject("Word.Application")
            oWord.Visible = False
            oDoc = oWord.Documents.Add
            Dim countBills As Integer = 0
            For Each Bill In Bills
                'To Addressing Fields
                countBills = countBills + 1
                StatusDisplayTextBlock.Text = "Writing Bill " & countBills & " of " & Bills.Count & " to WORD....."

    End Sub
End Class 
```

问题是这样的：功能如果工作正常，但直到所有处理完成后 UI 才会显示。以下是处理 word 时任务栏的示例图像： ![在此处输入图像描述](../Images/87a7705624d4c3264239148cab0b8c99.png)

完成工作后，它可以正常工作，如下所示：

以下是报告

![在此处输入图像描述](../Images/e0d494aa2301dd0b66c7bb7258ebcac3.png)

编辑：我现在使用了后台工作人员，但现在的问题是，当进度发生变化并且我尝试更新 UI 线程上的 TextBlock 时，我收到无法在不同线程上执行操作的错误。以下是我在 ProgressChanged 事件中使用的代码。

```
Private Sub BackgroundWorker_ProgressChanged(ByVal sender As Object, ByVal e As ProgressChangedEventArgs)
    'Throw New NotImplementedException
    StatusDisplayTextBlock.Text = e.UserState
End Sub 
```

您能否帮我弄清楚如何更新 UI 线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:59:58.343

您需要从 UI 线程中移动逻辑操作...

最好的解决方案是使用**Backgroundworker**类将所有操作与 UI 分开。可以在这里找到很好的教程[[链接](http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/)]

如果通过更改可以使用 .NET 4.5，则可以简单地使用**Async-** Await模式 [ [Async in VB](http://msdn.microsoft.com/en-us/library/vstudio/hh191564.aspx) ]

# java - SWT 中的鼠标事件

> ID：14002375
> 
> 赞同：1
> 
> 时间：2012-12-22T11:18:27.247
> 
> 标签：java, events, swt, composite, java-canvas

我定义了一个 Node 类扩展 Canvas 类并处理鼠标事件。

```
public class Node extends Canvas {
String name;

public String getName() { return name; }

public Node(Composite parent, int style, String name) {
    super(parent, style);
    // TODO Auto-generated constructor stub

    this.name = name;       
    this.setBackground(new Color(Display.getCurrent(), 0, 0, 0));

    this.addMouseListener(new MouseListener() {

        @Override
        public void mouseUp(MouseEvent arg0) {
            // TODO Auto-generated method stub
            System.out.println("Mouse up (" + arg0.x + ", " + arg0.y + ") at node " + getName());
        }

        @Override
        public void mouseDown(MouseEvent arg0) {
            // TODO Auto-generated method stub
            System.out.println("Mouse down (" + arg0.x + ", " + arg0.y + ") at node " + getName());
        }

        @Override
        public void mouseDoubleClick(MouseEvent arg0) {
            System.out.println("Double click at node " + getName());

        }
    });
} 
```

然后我创建了一个 Composite 对象并添加了两个 Node 对象：

```
 Node node1 = new Node(this, SWT.NONE, "node 1");
    node1.setBounds(25, 25, 50, 50);

    Node node2 = new Node(this, SWT.NONE, "node 2");
    node2.setBounds(35, 35, 60, 60);
    node2.setBackground(new Color(Display.getCurrent(), 75, 75, 75)); 
```

请注意，我选择了节点的位置，以便它们共享一些公共区域。使用颜色来区分两个节点，我发现`node1`它显示在顶部，而`node2`显示在后面。如果我在共享区域应用鼠标事件，`node1`处理这些事件而`node2`不是。

`node2`之后添加到组合中`node1`，所以我预计`node2`会有特权，即如果我将鼠标事件应用于共享区域，`node2`应该处理这些事件。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T20:37:16.523

如您所见，可见的控件（在另一个之上）获取鼠标事件。我认为这种行为是正确和预期的。我不认为您要问的是，即使`node1`在上方`node2`并绘制在上方，但仍然可以`node2`接收所有鼠标事件。使用标准方法可能无法做到这一点。

但是，如果您询问是否确保`node2`出现在上方`node1`并因此接收鼠标事件，您可以反转创建顺序，或者您可以使用[`Control#moveAbove(Control)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#moveAbove%28org.eclipse.swt.widgets.Control%29)如下：

```
Node node1 = new Node(this, SWT.NONE, "node 1");
node1.setBounds(25, 25, 50, 50);

Node node2 = new Node(this, SWT.NONE, "node 2");
node2.setBounds(35, 35, 60, 60);
node2.setBackground(new Color(Display.getCurrent(), 75, 75, 75));

// Use moveAbove(null) to move node2 above all its siblings
node2.moveAbove(node1); 
```

# iphone - UIImagePickerController 使应用程序崩溃，有时会重新启动设备 - 内存警告问题

> ID：14002377
> 
> 赞同：1
> 
> 时间：2012-12-22T11:18:47.720
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller

我们已经自定义了相机视图和移动和缩放选项。拍照后，原始图像将在具有自定义移动和缩放的新视图控制器中打开。它工作正常，但如果我们连续打开相机超过 7 次，应用程序会崩溃，有时操作系统会重新启动。我们检查了配置文件，没有内存泄漏，它在拍照后被释放

应用程序在继续使用相机大约 7 次后连续抛出内存警告

我们正在使用 ARC。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:26:25.663

我找到了答案。我用于裁剪的图像有问题。

请参阅以下链接。

[http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/) [http://wiresareobsolete.com/wordpress/tag/uiimagepickercontroller/](http://wiresareobsolete.com/wordpress/tag/uiimagepickercontroller/)

# java - java 7 nio 2程序的意外输出

> ID：14002379
> 
> 赞同：0
> 
> 时间：2012-12-22T11:18:52.127
> 
> 标签：java, nio2, watchservice

我正在尝试来自[Pro Java 7 NIO.2](http://books.google.co.in/books/about/Pro_Java_7_NIO_2.html?id=_kvm1aJyph8C) 第 118 页的小程序

代码是：

```
class WatchRafaelNadal {
    public void watchRNDir(Path path) throws IOException, InterruptedException {
        try (WatchService watchService = FileSystems.getDefault().newWatchService()) {
           path.register(watchService, StandardWatchEventKinds.ENTRY_CREATE,
                StandardWatchEventKinds.ENTRY_MODIFY, StandardWatchEventKinds.ENTRY_DELETE);

                //start an infinite loop
                while (true) {
                //retrieve and remove the next watch key
                final WatchKey key = watchService.take();
                //get list of pending events for the watch key
                for (WatchEvent<?> watchEvent : key.pollEvents()) {

                //get the kind of event (create, modify, delete)
                final Kind<?> kind = watchEvent.kind();
                //handle OVERFLOW event
                if (kind == StandardWatchEventKinds.OVERFLOW) {
                continue;
                }
                //get the filename for the event
                final WatchEvent<Path> watchEventPath = (WatchEvent<Path>) watchEvent;
                final Path filename = watchEventPath.context();
                //print it out
                System.out.println(kind + " -> " + filename);
                }
                //reset the key
                boolean valid = key.reset();
                //exit loop if the key is not valid (if the directory was deleted, for example)
                if (!valid) {
                break;
                }
           }
       }
    }
}

public class Main {
     public static void main(String[] args) {
        final Path path = Paths.get("C:/Java");
            WatchRafaelNadal watch = new WatchRafaelNadal();
            try {
            watch.watchRNDir(path);
            } catch (IOException | InterruptedException ex) {
            System.err.println(ex);
            }
        }
} 
```

但是，当我更改`global.properties`文件夹中存在的（或任何文件）中的一行时，`C:\\Java`我得到的输出为 -

```
 ENTRY_MODIFY  -> global.properties
 ENTRY_MODIFY  -> global.properties 
```

为什么会引发 2 次事件？
Java中是否有任何服务可以检测文件中精确修改的行/行？

JDK：jdk1.7.0_09
IDE：Eclipse Java EE IDE 版本：Juno 发布
平台：Windows 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:22:30.727

你是怎么改文件的？

也许您在*技术上*更改了文件*两次*。

例如，首先更改内容，然后更新文件元数据，这会产生两个事件。

如果您以能够处理此类情况的方式实现您的应用程序，那可能是最好的。

# javascript - Javascript：快速而肮脏的空 div 或其他元素

> ID：14002384
> 
> 赞同：0
> 
> 时间：2012-12-22T11:19:20.780
> 
> 标签：javascript, getelementbyid

我经常遇到一个问题，我习惯于`getElementById`填充 div 或 span 元素，通常是通过服务器中的 Ajax。但是，我希望用户能够做一些简单的事情来清空 div 并返回到以前的页面方式。例如，单击页面上的其他位置。我一直在使用一个小折叠图标，单击该图标会重新加载页面，但这显然不是最佳解决方案。

任何人都可以提出一个简单的方法来清除 div。我有一种预感，就是要找到合适的处理程序，但我对处理程序知之甚少。如果这可以在同一个脚本中，那就太好了，但欢迎任何方法。

现在，这已经提出了一个脚本，可以抓取选择并使用它进行搜索。如果结果没有用，我想让用户单击并清空 div。然而，这个问题真的一直都在出现。这是我现在正在处理的缩写代码......

JS

```
function getSelection() {
  var sel = getSelection();
  if (sel=""){
    alert("Please select text");
  } else {
    //grab selection and search on it using Ajax
    //code for browsers...
    xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        document.getElementById('searchresults').textContent=xmlhttp.responseText;
      }
    }
    xmlhttp.open("GET","search.php?q="+sel,true);
    xmlhttp.send();
  }
} 
```

HTML

```
<a href="javascript:void(0)" onclick="getSelection()">click</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:22:37.850

你为什么不使用

```
document.getElementById('searchresults').textContent=""; 
```

如果你有 jquery，那么

```
$("#searchresults").empty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:25:26.410

您拥有执行此操作的所有要素。`getSelection`您的功能的衍生产品：

```
var clear = function(){
  document.getElementById('searchresults').textContent = "";
}; 
```

```
<a href="javascript:void(0)" onclick="clear()">clear</a> 
```

**注意：**一个谦虚的建议：你应该从添加内联 JS 到绑定事件处理程序中毕业。

* * *

当检测到外部点击时清除内容的一种方法`searchresults`可以通过停止在下生成`searchresults`的任何事件的传播来完成。但是，对于.`click``searchresults``document``click``searchresults`

```
var searchresults = document.getElementById("searchresults")​;
var stop = function(evt){
    evt.stopPropagation();
};
var clear = function(){
    searchresults.innerHTML = "";
};
searchresults.addEventListener("click", stop, false);
document.addEventListener("click", clear, false); 
```

要实现这一点，您需要使用[`addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)（和[`attachEvent`](http://msdn.microsoft.com/en-us/library/ms536343%28VS.85%29.aspx)，它的 IE 对应物。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:24:55.263

如果我正在阅读此内容，然后询问您一次只想清除一个 div，您可以存储元素的 id，然后当用户单击其他地方时，从存储的 id 中获取元素并清空 textContent。我希望这就是你要找的我可能误解了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T11:39:11.640

您可以使用类似...的方式删除所有后代节点

```
var parentNode = document.getElementById('searchresults');

while (parentNode.hasChildNodes()) {
    parentNode.removeChild(parentNode.firstChild);
} 
```

当然，使用 jQuery 会更简单...

```
$("#searchresults").empty() 
```

# algorithm - 算法的摊销分析

> ID：14002391
> 
> 赞同：4
> 
> 时间：2012-12-22T11:21:03.940
> 
> 标签：algorithm, amortized-analysis

我目前正在阅读摊销分析。我无法完全理解它与我们为计算算法的平均或最坏情况行为而执行的正常分析有何不同。有人可以用排序或其他东西的例子来解释吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-22T18:18:52.063

摊销分析给出了最坏情况下每个操作的平均性能（随着时间的推移）。

在一系列操作中，最坏情况不会经常出现在每个操作中——有些操作可能很便宜，有些可能很昂贵。因此，传统的每个操作的最坏情况分析可能会给出过于悲观的界限。例如，在动态数组中，只有一些插入需要线性时间，而其他插入需要恒定时间。

当不同的插入所用的时间不同时，我们如何才能准确地计算出总时间呢？摊销方法将为序列中的每个操作分配一个“人为成本”，称为操作的摊销成本。它要求序列的总实际成本应受所有操作的摊销成本总和的限制。

请注意，摊销成本的分配有时具有灵活性。摊销分析中使用了三种方法

1.  聚合方法（或蛮力）
2.  会计方法（或银行家方法）
3.  势法（或物理学家的方法）

例如，假设我们正在对一个数组进行排序，其中所有键都是不同的（因为这是最慢的情况，并且如果我们不对等于枢）。

快速排序选择一个随机枢轴。枢轴同样可能是最小的键、第二小的键、第三小的键、...或最大的键。对于每个键，概率为 1/n。令 T(n) 是一个随机变量，等于对 n 个不同键进行快速排序的运行时间。假设快速排序选择第 i 个最小的键作为枢轴。然后我们在长度为 i-1 的列表和长度为 n-i 的列表上递归运行快速排序。划分和连接列表需要 O(n) 时间——假设最多 n 美元——所以运行时间是

![在此处输入图像描述](../Images/59f984eb52b0ab46868cd5731e8d3e09.png)

这里 i 是一个随机变量，可以是从 1（pivot 是最小键）到 n（pivot 是最大键）的任何数字，每个选择的概率为 1/n，所以

![在此处输入图像描述](../Images/40c2573fa6ef893898bfa6073e592f89.png)

这个方程称为递归。重复的基本情况是 T(0) = 1 和 T(1) = 1。这意味着对长度为 0 或 1 的列表进行排序最多需要 1 美元（时间单位）。

所以当你解决：

![在此处输入图像描述](../Images/7e1f1d43ecd4c38124a452b138d27824.png)

表达式 1 + 8j log_2 j 可能被高估了，但这并不重要。重要的一点是，这证明了 E[T(n)] 在 O(n log n) 中。换句话说，快速排序的预期运行时间是 O(n log n)。

此外，摊销运行时间和预期运行时间之间存在细微但重要的差异。具有随机枢轴的快速排序需要 O(n log n) 的预期运行时间，但其最坏情况的运行时间是 Θ(n^2)。这意味着快速排序花费 (n^2) 美元的可能性很小，但是随着 n 变大，这种情况发生的概率接近于零。

> 快速排序 O(n log n) 预期时间
> 快速选择 Θ(n) 预期时间

![在此处输入图像描述](../Images/fe3536f9b7a5248e78672df1a32f22db.png)

对于数字示例：

![在此处输入图像描述](../Images/7aba4b8ba73082a43522eaf886ea3530.png)

基于比较的排序下界是：

![在此处输入图像描述](../Images/b88573e4094470a215f3a950719c24da.png)

[最后，您可以在此处](http://www.cs.helsinki.fi/u/polishch/pages/teaching/average_case.pdf)找到有关快速排序平均案例分析的更多信息

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T23:02:00.837

**平均值**- 概率分析，平均值与所有可能的输入有关，它是对算法可能运行时间的估计。

**摊销**- 非概率分析，根据对算法的一批调用计算。

**示例 - 动态大小的堆栈：**

假设我们定义了一个一定大小的堆栈，每当我们用完空间时，我们分配旧大小的两倍，并将元素复制到新位置。

总的来说，我们的成本是：

*   O(1) 每次插入\删除

*   当堆栈已满时，每次插入（分配和复制）的 O(n)

所以现在我们问，n 次插入需要多少时间？

有人可能会说 O(n^2)，但我们不会为每次插入支付 O(n)。所以我们很悲观，正确的答案是 n 次插入的 O(n) 时间，让我们看看为什么：

假设我们从数组大小 = 1 开始。

忽略复制，我们将为每 n 次插入支付 O(n)。

现在，我们仅在堆栈具有以下数量的元素时才进行完整复制：

1,2,4,8,...,n/2,n

对于这些大小中的每一个，我们都会进行复制和分配，所以总结一下我们得到的成本：

常量*(1+2+4+8+...+n/4+n/2+n) = 常量*(n+n/2+n/4+...+8+4+2+1 ) <= const*n(1+1/2+1/4+1/8+...)

其中 (1+1/2+1/4+1/8+...) = 2

所以我们为所有的复制支付 O(n) + 为实际的 n 次插入支付 O(n)

n 次操作的 O(n) 最坏情况 -> O(1) 每一次操作摊销。

# php - 检查事务的状态 - MySQL 和 PHP

> ID：14002392
> 
> 赞同：2
> 
> 时间：2012-12-22T11:21:14.333
> 
> 标签：php, mysql, transactions

我想在 MySQL 中使用事务，我的问题是如何检查查询是否成功提交？我的查询是：

```
mysql_query("START TRANSACTION");
$query_1 = mysql_query("DELETE FROM BLAH WHERE BLAH");
$query_2 = mysql_query("DELETE FROM BLAH WHERE BLAH");
mysql_query("COMMIT"); 
```

据我所知，上面的代码进行了交易，但我想检查查询是否提交成功，所以：

```
 mysql_query("START TRANSACTION");
    $query_1 = mysql_query("DELETE FROM BLAH WHERE BLAH");
    $query_2 = mysql_query("DELETE FROM BLAH WHERE BLAH");
    if($query_1 && $query_2){
       mysql_query(COMMIT);
    }else{
       mysql_query(ROLLBACK);
    } 
```

但是我在某处读到，在事务中，当我们调用“ `COMMIT`”时查询提交，所以上面的代码不应该工作，因为当我们检查`$query_1 && $query_2`时，实际上没有任何东西提交给 db，因为它在“ `COMMIT`”查询之前，我怎么能执行这样的检查？

提前致谢

PS：我做的一切正确吗？请让我知道是否还有其他更好的方法...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:27:02.897

如果您正在执行`DELETE`命令，您将能够通过调用该[`mysql_affected_rows()`](http://php.net/manual/en/function.mysql-affected-rows.php)函数来查看是否有任何受影响的行。

> **mysql_affected_rows** — 获取先前 MySQL 操作中受影响的行数

甚至在文档[中提到了与交易一起使用-](http://php.net/manual/en/function.mysql-affected-rows.php#example-1615)

> **注意：事务**如果您使用事务，则需要在 INSERT、UPDATE 或 DELETE 查询之后调用 mysql_affected_rows()，而不是在 COMMIT 之后。

* * *

此处应注意，您使用的是旧版本的数据库连接。请参阅与命令相关的任何页面上的 php 文档`mysql_*`，您会遇到此消息 -

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)

# javascript - 使用 jquery ajax 和 FormData 跟踪文件上传的 ajax 发布进度

> ID：14002393
> 
> 赞同：6
> 
> 时间：2012-12-22T11:21:30.673
> 
> 标签：javascript, jquery, ajax, file-upload, progress-bar

```
var files = [];

$(document).ready(function (){
    dropArea = document.getElementById("droparea");
});

// when we drag and drop files into the div#droparea
dropArea.addEventListener("drop", function (evt) {
    files = evt.dataTransfer.files;
}, false);  

function uploadFiles(stepX) {
    var url = "/ajax/uploadfiles.php";
    var type = "POST";

    if (files.length > 0) {
         var data = new FormData(); // we use FormData here to send the multiple files data for upload

          for (var i=0; i<files.length; i++) {
       var file = files[i];
             data.append(i, file);  
   }
         //start the ajax
         return $.ajax({
   //this is the php file that processes the data and send mail
         url: url,  

  //POST method is used
  type: type,

   //pass the data          
   data: data,      

    //Do not cache the page
          cache: false,

// DO NOT set the contentType and processData
// see http://stackoverflow.com/a/5976031/80353
contentType: false,
processData: false,

//success
      success: function (json) {                
      //if POST is a success expect no errors
     if (json.error == null && json.result != null) {                   
                    data = json.result.data;

                // error 
                } else {
                    alert(json.error);  
                }           
            }       
        });
    } 
    return {'error' : 'No files', 'result' : null};
} 
```

如果我想保留此方法将文件上传到服务器，如何跟踪文件上传的进度？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-22T11:21:30.673

注意@TODO 的注释

```
//start the ajax
return $.ajax({
            //this is the php file that processes the data and send mail
            url: url,   

            //POST method is used
            type: type,

            //pass the data         
            data: data,     

            //Do not cache the page
            cache: false,

            //@TODO start here
            xhr: function() {  // custom xhr
                myXhr = $.ajaxSettings.xhr();
                if(myXhr.upload){ // check if upload property exists
                    myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
                }
                return myXhr;
            },
            //@TODO end here

            // DO NOT set the contentType and processData
            // see http://stackoverflow.com/a/5976031/80353
            contentType: false,
            processData: false, 
```

添加更新进度的独立功能。

```
function updateProgress(evt) {
    console.log('updateProgress');
    if (evt.lengthComputable) {
            var percentComplete = evt.loaded / evt.total;
            console.log(percentComplete);
    } else {
            // Unable to compute progress information since the total size is unknown
            console.log('unable to complete');
    }
} 
```

来自[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest) > 监控进度

# java - 对象的替换/覆盖方法，该对象是 Java 中接口的实现

> ID：14002397
> 
> 赞同：3
> 
> 时间：2012-12-22T11:22:24.833
> 
> 标签：java

我有一个只有一种方法的界面。我有一个接收对象的静态函数（这些对象实现接口），我想覆盖/替换在接口中定义的方法的实现，在对象中。在 Java 中执行此操作的最佳方法是什么

```
public class MyClass {

    public interface MyInterface {
         Object myMethod (Object blah);
    }

    public static MyInterface decorator(MyInterface obj) { 
          //I want to return a version of obj
          //with a different implementation of myMethod
          //everything else in obj should be same, except myMethod 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:23:54.397

您可以创建一个具有相同接口的类，该接口委托所有方法调用您的对象，然后创建一个匿名类扩展它并覆盖您想要的任何内容

接口：

```
Interface MyInterface {
    void m1();
    void m2();
} 
```

委托类：

```
class MyDelegate implements MyInterface {
    private MyInterface delegate;

    MyDelegate(MyInterface delegate) {
        this.delegate = delegate;
    }

    void m1() {
        delegate.m1();
    }

    void m2() {
       delegate.m2();
    }
} 
```

在静态方法中，您创建一个匿名类的实例，扩展`MyDelegate`并覆盖您想要的任何内容，其余的将由`obj`

```
static MyInterface wrap(MyInterface obj) {
    return new MyDelegate(obj) {
        void m1() {
            // overrided m1
        }

        // my will eventually get to obj
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:30:27.413

如果不知道您正在装饰的确切对象类型，您通常无法做到这一点。如果您知道，那么您可以创建该特定类的*子*类，并更改实现。Java 的类型系统不够灵活，无法像您需要的那样混合和匹配接口实现。

您**可以**求助于动态类定义技术，这将为您传递给您的`decorate`方法的每个对象创建一个动态代理，但这种方法的复杂性要高一个数量级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T11:34:28.643

Java 不直接支持这种动态行为。但是当对象合作时，您可以实现类似的效果。即它可以提供一种方法来改变以下的实现`myMethod`：

```
void changeMethod(MyInterface other) {
    realImpl = other;
}
Object myMethod (Object obj) {
    return realImpl.myMethod(obj);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T11:31:01.733

使用[CGLib](http://cglib.sourceforge.net/)，您可以在运行时实现接口。

例子 -

```
public class KeySample {
      private interface MyFactory {
         public Object newInstance(int a, char[] b, String d);
      }
      public static void main(String[] args) {
          MyFactory f = (MyFactory)KeyFactory.create(MyFactory.class);
          Object key1 = f.newInstance(20, new char[]{ 'a', 'b' }, "hello");
          Object key2 = f.newInstance(20, new char[]{ 'a', 'b' }, "hello");
          Object key3 = f.newInstance(20, new char[]{ 'a', '_' }, "hello");
          System.out.println(key1.equals(key2));
          System.out.println(key2.equals(key3));
      }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T11:33:07.037

如果我们可以将其限制为接口（任意数量），您正在寻找动态代理。

所以你的问题：如果你首先调用该接口中的方法而不调用装饰器，然后使用装饰器你想要不同的行为，那么给定这个接口实现：

```
MyInterface o = new MyInterface() {
    public Object myMethod(Object blah) {
        return "bar";
    }
}; 
```

这应该做不同的事情，例如改变返回值（和/或其他东西）：

```
System.out.println(o.myMethod(null));
o = decorator(o);
System.out.println(o.myMethod(null)); 
```

输出：

```
bar
foo 
```

这可以通过java中的动态代理来完成：

```
public static MyInterface decorator(final MyInterface obj) { 
  InvocationHandler handler = new InvocationHandler() {

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
      if (method.getName().equals("myMethod")) {
        //do something special
        return "foo";
      }
      return method.invoke(obj, args);
    }
  };

  MyInterface proxy = (MyInterface) Proxy.newProxyInstance(
                            MyInterface.class.getClassLoader(),
                            obj.getClass().getInterfaces(), //all or limit it to just one or a few
                            handler);
  return proxy;
} 
```

更新：如果您想涉及更多接口（上面更新了代理实例代码以实现接口而不是硬编码）：

现在使这项工作：

```
 public static void main(String[] args) {
        A o = new A();
        System.out.println(o.myMethod(null));
        System.out.println(o.myOtherMethod(1));
        Object o2 = decorator(o);
        System.out.println(((MyInterface) o2).myMethod(null));
        System.out.println(((MyInterface2) o2).myOtherMethod(1));
 } 
```

带输出：

```
bar
2
foo <-- changed
2 <- the same behavior 
```

鉴于：

```
class A implements MyInterface, MyInterface2 {
  @Override
  public Object myMethod(Object blah) {
    return "bar";
  }

  @Override
  public int myOtherMethod(int a) {
    return a+1;
  }
} 
```

# c# - 在 XNA WinForm C# 上创建一个类

> ID：14002417
> 
> 赞同：1
> 
> 时间：2012-12-22T11:25:05.227
> 
> 标签：c#, winforms, visual-studio, xna

我成功地创建了 xna winform，就像 [WinForms 系列 1：图形设备](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_2) 教程一样。好吧，现在我想创建一些类来按类绘制组件

在 xna 中，有几个“受保护的虚空”来构建游戏：**DrawableGameComponent**，但这是一个 xna winform，所以我们必须创建自己的图形设备。在 xna 中，看看下面这个“受保护的无效”代码：

```
 public override void Draw(GameTime gameTime)
        {
            // TODO: Add your drawing code here
            base.Draw(gameTime);
        }
        public override void Update(GameTime gameTime)

        {                                            

            base.Update(gameTime);
        } 
```

我希望上面的这些代码使用自己的图形设备在课堂上工作，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:04:42.513

在编写 WinForms 应用程序时，您不会依赖`Draw`和`Update`方法来告诉您何时绘制和更新；相反，您可以覆盖 Windows`OnPaintBackground`方法。对于更新，您可以使用`Timer`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:30:59.237

您需要将继承自的游戏组件添加`DrawableGameComponent`到`Game.Components`集合中。

此外，您不需要制作自己的图形设备。

# html - 从顶部淡入到段落？

> ID：14002419
> 
> 赞同：1
> 
> 时间：2012-12-22T11:25:13.273
> 
> 标签：html, css, animation

现在有没有人使用 css3 方式从顶部淡入文本，更精确地逐行显示文本，淡入淡出以及它们之间的一些延迟。我尝试为不透明度、位置、行高等设置动画，但我没有找到正确的组合。我的主要问题是我的主要内容背景复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:30:01.990

逐行部分大概只能通过设置正确的关键帧然后调用动画来解决。

我可以通过设置一个容器`div`来解决这个问题`overflow: hidden`，然后`height`使用几个关键帧逐步为容器设置动画。

更多关于[这里](http://www.w3schools.com/css/css3_animations.asp)

# android - 过滤返回错误结果的自定义适配器

> ID：14002421
> 
> 赞同：0
> 
> 时间：2012-12-22T11:25:26.073
> 
> 标签：android, filter, android-listview, baseadapter

查看：

![截屏](../Images/d6de3bf45dc49e62f5011af3e712664a.png)

我正在尝试在我的`ListView`. 但我面临着一个非常奇怪的问题。如果我在中键入字母`T`，就会充满从,开始的名称。请帮忙。`EditText``ListView``B``J`

```
public class MyCustomAdapter extends BaseAdapter implements Filterable {

Context mContext;
private LayoutInflater mInflater;
SparseBooleanArray mSparseBooleanArray;
private ArrayList<Map<String,String>> mAdapData = new ArrayList<Map<String, String>>();
private ArrayList<Map<String,String>> mOriginalData = new ArrayList<Map<String, String>>();

public MyCustomAdapter(Context mContext) {
    mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mSparseBooleanArray = new SparseBooleanArray();
}

public ArrayList<String> getCheckedItems() {
    ArrayList<String> mTempArry = new ArrayList<String>();
    for (int i = 0; i < mAdapData.size(); i++) {
        if (mSparseBooleanArray.get(i)) {
            Map<String, String> map = (Map<String, String>) mAdapData.get(i);
            final String numbr = map.get("Phone").toString();
            mTempArry.add(numbr);
        }
    }
    return mTempArry;
}

@Override
public int getCount() {
    return this.mAdapData.size();
}

public void addItem(String paramString1, String paramString2) {
    Map<String, String> NameNumber = new HashMap<String, String>();
    NameNumber.put("Name", paramString1);
    NameNumber.put("Phone", paramString2);
    this.mAdapData.add(NameNumber);
    this.mOriginalData.add(NameNumber);
    notifyDataSetChanged();
}

@SuppressWarnings("unchecked")
public Object getItem(int paramInt) {
    return (ArrayList<Map<String, String>>) this.mAdapData.get(paramInt);
}

@Override
public long getItemId(int paramInt) {
    return paramInt;
}

@Override
public View getView(final int paramInt, View paramView, ViewGroup paramViewGroup) {

    ViewHolder viewHolder;

    if (paramView == null) {
        viewHolder = new ViewHolder();
        paramView = mInflater.inflate(R.layout.multiplecontactview, null);
        viewHolder.tvName = (TextView) paramView.findViewById(R.id.txtContactName);
        viewHolder.tvNumber = (TextView) paramView.findViewById(R.id.txtContactNumber);
        viewHolder.cb = (CheckBox) paramView.findViewById(R.id.checkBox1);
        viewHolder.cb.setTag(paramInt);
        viewHolder.cb.setChecked(mSparseBooleanArray.get(paramInt));
        viewHolder.cb.setOnCheckedChangeListener(mCheckedChangeListener);
        viewHolder.tvName.setTextColor(Color.BLACK);
        viewHolder.tvNumber.setTextColor(Color.BLACK);
        for (int i = 0; i < mAdapData.size(); i++) {
            Map<String, String> map = (Map<String, String>) mAdapData.get(paramInt);
            final String name = map.get("Name").toString();
            Log.e("Name", name);
            final String numbr = map.get("Phone").toString();
            Log.e("Number", numbr);
            viewHolder.tvName.setText(name);
            viewHolder.tvNumber.setText(numbr);
        }
        paramView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) paramView.getTag();
    }       
    return paramView;
}

OnCheckedChangeListener mCheckedChangeListener = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        mSparseBooleanArray.put((Integer) buttonView.getTag(), isChecked);
    }
};

public static class ViewHolder {
    TextView tvName;
    TextView tvNumber;
    CheckBox cb;
}

@Override
public Filter getFilter() {
    return new MyContactFilter();
}

@SuppressLint("DefaultLocale")
private class MyContactFilter extends Filter {

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults results = new FilterResults();
        ArrayList<Map<String, String>> mFilteredData = new ArrayList<Map<String, String>>();

        if (!TextUtils.isEmpty(constraint)) { 
            for(int i = 0; i < mAdapData.size(); i++) {
                Map<String, String> map = (Map<String, String>) mAdapData.get(i);
                final String names = map.get("Name").toString();
                final String numbr = map.get("Phone").toString();
                if(names.toLowerCase().contains(constraint.toString().toLowerCase())) {
                    Map<String, String> FilNameNumber = new HashMap<String, String>();
                    FilNameNumber.put("Name", names);
                    FilNameNumber.put("Phone", numbr);
                    mFilteredData.add(FilNameNumber);
                }
            }
            results.values = mFilteredData;
            results.count = mFilteredData.size();

        } else {
            synchronized (mOriginalData) {
                results.values = mOriginalData;
                results.count = mOriginalData.size();
            }
        }
        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence cs, FilterResults fr) {
        mAdapData = (ArrayList<Map<String, String>>) fr.values;
        notifyDataSetChanged();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:43:35.647

您的问题来自您设置`getView()`方法的方式以及如何在该 SparseBooleanArray 中设置选中项。我已经编辑了您的适配器代码，现在应该可以使用了。主要变化在该`OnCheckedChangeListener`领域：

```
public class MyCustomAdapter extends BaseAdapter implements Filterable {

    private Context mContext;
    private LayoutInflater mInflater;
    private SparseBooleanArray mSparseBooleanArray;
    // from where do you get the data?
    private ArrayList<Map<String, String>> mAdapData = new ArrayList<Map<String, String>>();
    private ArrayList<Map<String, String>> mOriginalData = new ArrayList<Map<String, String>>();

    public MyCustomAdapter(Context mContext) {
        mInflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mSparseBooleanArray = new SparseBooleanArray();
    }

    public ArrayList<String> getCheckedItems() {
        ArrayList<String> mTempArry = new ArrayList<String>();
        for (int i = 0; i < mAdapData.size(); i++) {
            if (mSparseBooleanArray.get(i)) {
                Map<String, String> map = (Map<String, String>) mAdapData
                        .get(i);
                final String numbr = map.get("Phone");
                mTempArry.add(numbr);
            }
        }
        return mTempArry;
    }

    @Override
    public int getCount() {
        return this.mAdapData.size();
    }

    public void addItem(String paramString1, String paramString2) {
        Map<String, String> NameNumber = new HashMap<String, String>();
        NameNumber.put("Name", paramString1);
        NameNumber.put("Phone", paramString2);
        mAdapData.add(NameNumber);
        mOriginalData.add(NameNumber);
        notifyDataSetChanged();
    }

    @SuppressWarnings("unchecked")
    public Object getItem(int paramInt) {
        return (ArrayList<Map<String, String>>) this.mAdapData.get(paramInt);
    }

    @Override
    public long getItemId(int paramInt) {
        return paramInt;
    }

    @Override
    public View getView(final int paramInt, View paramView,
            ViewGroup paramViewGroup) {
        ViewHolder viewHolder;
        if (paramView == null) {
            viewHolder = new ViewHolder();
            paramView = mInflater.inflate(R.layout.adapters_specialfilterrow,
                    paramViewGroup, false);
            viewHolder.tvName = (TextView) paramView
                    .findViewById(R.id.textView1);
            viewHolder.tvNumber = (TextView) paramView
                    .findViewById(R.id.textView2);
            viewHolder.cb = (CheckBox) paramView.findViewById(R.id.checkBox1);
            paramView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) paramView.getTag();
        }
        viewHolder.cb.setTag(paramInt);
        viewHolder.cb.setOnCheckedChangeListener(null);
        viewHolder.cb.setChecked(mSparseBooleanArray.get(paramInt));
        viewHolder.cb.setOnCheckedChangeListener(mCheckedChangeListener);
        viewHolder.tvName.setTextColor(Color.BLACK);
        viewHolder.tvNumber.setTextColor(Color.BLACK);
        Map<String, String> map = (Map<String, String>) mAdapData.get(paramInt);
        final String name = map.get("Name");
        final String numbr = map.get("Phone");
        viewHolder.tvName.setText(name);
        viewHolder.tvNumber.setText(numbr);
        return paramView;
    }

    OnCheckedChangeListener mCheckedChangeListener = new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            // get the item from the current mAdapData
            Map<String, String> item = mAdapData.get((Integer) buttonView
                    .getTag());
            int position = -1;
            // see where is the item placed in the mOriginalData and use that
            // position
            for (int i = 0; i < mOriginalData.size(); i++) {
                final Map<String, String> tmp = mOriginalData.get(i);
                if (tmp.get("Name").toLowerCase().equals(item.get("Name").toLowerCase())) {
                    position = i;
                    break;
                }
            }
            mSparseBooleanArray.put(position, isChecked);
        }
    };

    public static class ViewHolder {
        TextView tvName;
        TextView tvNumber;
        CheckBox cb;
    }

    @Override
    public Filter getFilter() {
        return new MyContactFilter();
    }

    @SuppressLint("DefaultLocale")
    private class MyContactFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            ArrayList<Map<String, String>> mFilteredData = new ArrayList<Map<String, String>>();

            if (!TextUtils.isEmpty(constraint)) {
                for (int i = 0; i < mAdapData.size(); i++) {
                    Map<String, String> map = (Map<String, String>) mAdapData
                            .get(i);
                    final String names = map.get("Name");
                    final String numbr = map.get("Phone");
                    if (names.toLowerCase().contains(
                            constraint.toString().toLowerCase())) {
                        Map<String, String> FilNameNumber = new HashMap<String, String>();
                        FilNameNumber.put("Name", names);
                        FilNameNumber.put("Phone", numbr);
                        mFilteredData.add(FilNameNumber);
                    }
                }
                results.values = mFilteredData;
                results.count = mFilteredData.size();
            } else {
                synchronized (mOriginalData) {
                    results.values = mOriginalData;
                    results.count = mOriginalData.size();
                }
            }
            return results;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence cs, FilterResults fr) {
            mAdapData = (ArrayList<Map<String, String>>) fr.values;
            notifyDataSetChanged();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:56:09.753

在该`getView()`方法中，您没有更新 UI 以获取过滤结果的值。所以它返回了旧结果的视图。

就在 return paramView 之前，将视图的数据更新为过滤结果中的数据，并将其从 viewHolder 的准备中删除，因为这仅被调用了几次。

* * *

编辑：这是我对代码的更正。我认为它会解决它：

```
@Override
public View getView(final int paramInt, View paramView, ViewGroup paramViewGroup) {

ViewHolder viewHolder;

if (paramView == null) {
    viewHolder = new ViewHolder();
    paramView = mInflater.inflate(R.layout.multiplecontactview, null);
    viewHolder.tvName = (TextView) paramView.findViewById(R.id.txtContactName);
    viewHolder.tvNumber = (TextView) paramView.findViewById(R.id.txtContactNumber);
    viewHolder.cb = (CheckBox) paramView.findViewById(R.id.checkBox1);
    viewHolder.tvName.setTextColor(Color.BLACK);
    viewHolder.tvNumber.setTextColor(Color.BLACK);
    paramView.setTag(viewHolder);
    viewHolder.cb.setOnCheckedChangeListener(mCheckedChangeListener);
} else {
    viewHolder = (ViewHolder) paramView.getTag();
}       
viewHolder.cb.setTag(paramInt);
viewHolder.cb.setChecked(mSparseBooleanArray.get(paramInt));

Map<String, String> map = (Map<String, String>) mAdapData.get(paramInt);
final String name = map.get("Name").toString();
Log.e("Name", name);
final String numbr = map.get("Phone").toString();
Log.e("Number", numbr);
viewHolder.tvName.setText(name);
viewHolder.tvNumber.setText(numbr);

return paramView;
} 
```

* * *

编辑：这是我如何处理过滤的示例：

```
@Override
public Filter getFilter()
  {
  final Filter filter=new Filter()
    {
      @Override
      protected FilterResults performFiltering(final CharSequence constraint)
        {
        _lastFilterConstraint=constraint;
        if(TextUtils.isEmpty(constraint))
          return null;
        final String constraintToCheck=constraint.toString().toLowerCase(Locale.getDefault());
        final FilterResults results=new FilterResults();
        // <- here i do the filtering itself and later put the results into "results"
        results.values=values;
        results.count=values.size();
        return results;
        }

      @SuppressWarnings("unchecked")
      @Override
      protected void publishResults(final CharSequence constraint,final FilterResults results)
        {
        _filteredItems==null ? null : (ArrayList<Item>)results.values;
        notifyDataSetChanged();
        }
    };
  return filter;
  }

@Override
public int getCount()
  {
  if(_filteredItems!=null)
    return _filteredItems.size();
  return _originalItems.size();
  }

@Override
public Item getItem(final int position)
  {
  if(_filteredItems!=null)
    {
    if(position<_filteredItems.size())
      return _filteredItems.get(position);
    return null;
    }
  if(position<_originalItems.size())
    return _originalItems.get(position);
  return null;
  }

@Override
public View getView(final int position,final View convertView,final ViewGroup parent)
  {
  final View inflatedView;
  final ViewHolder viewHolder;
  if(convertView==null)
    {
    //<- here i inflate the view into the inflatedView
    }
  else
    {
    inflaterView=convertView;
    viewHolder=(ViewHolder)inflaterView.getTag();
    }
  // <- here i use getItem and update the view according to its data .
  return inflaterView;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T12:39:59.490

我还在我的应用程序中实现了过滤器列表视图。为此，我只需要一段代码。检查它，如果它有帮助。

```
editText.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {

            }
            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {

            }
            public void afterTextChanged(Editable arg0) {
                sendToList.this.adapter.getFilter().filter(arg0);

            }
        }); 
```

# ios - AFNetworking (AFHttpClient) 离线模式不适用于 NSURLRequestReturnCacheDataDontLoad 策略

> ID：14002422
> 
> 赞同：8
> 
> 时间：2012-12-22T11:25:27.770
> 
> 标签：ios, ios5, afnetworking, offline-caching

我在我的应用程序中使用 AFNetworking 并尝试通过使用缓存数据（如果可用）使其在离线模式下工作。

我预计在将请求缓存策略设置为 NSURLRequestReturnCacheDataDontLoad 后，getPath:parameters:success:failure: 将在离线时成功处理缓存数据。但是，即使缓存中有数据（我通过代码检查缓存来验证），getPath 在飞行模式下也会失败。

AFNetworking github 中有一个线程：[https](https://github.com/AFNetworking/AFNetworking/issues/378) ://github.com/AFNetworking/AFNetworking/issues/378 但似乎这个问题根本没有解决。AFNetworking 的作者只是简单地指向[苹果的文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLRequestUseProtocolCachePolicy)，它说：

> NSURLRequestReturnCacheDataDontLoad 指定应该使用现有的缓存数据来满足请求，而不管它的年龄或到期日期。如果缓存中不存在对应于 URL 加载请求的现有数据，则不尝试从原始源加载数据，则认为加载失败。此常量指定类似于“离线”模式的行为。

正如苹果所说，NSURLRequestReturnCacheDataDontLoad 是专为离线模式设计的。

我在 iOS6 上测试，我用 NSURLCache 和 SDURLCache 都测试过，结果都是一样的。

请求失败，错误信息：

> 2012-12-22 03:11:18.988 Testapp[43692:907] 错误：错误域=NSURLErrorDomain 代码=-1009“Internet 连接似乎处于脱机状态。” UserInfo=0x211b87c0 {NSErrorFailingURLStringKey=http://Testapp.com/api/v1/photo/latest/, NSErrorFailingURLKey=http://Testapp.com/api/v1/photo/latest/, NSLocalizedDescription=互联网连接似乎是离线。, NSUnderlyingError=0x211b9720 "互联网连接似乎离线。"}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T21:53:41.163

原来，这是iOS 6中的一个错误。

AFNetworking 中有一个专门针对此问题的讨论线程：[https ://github.com/AFNetworking/AFNetworking/issues/566](https://github.com/AFNetworking/AFNetworking/issues/566)

感谢 Guykogus 在这个问题上的提示和实验。我在这个问题上花了一个晚上！

一个总结的解决方法是从缓存中读取响应，而不是使用 NSURLRequestReturnCacheDataDontLoad 策略：

```
NSCachedURLResponse *cachedResponse = [[NSURLCache sharedURLCache] cachedResponseForRequest:request];
if (cachedResponse != nil &&
    [[cachedResponse data] length] > 0)
{
    // Get cached data
    ....
} 
```

# c# - 从 DatePicker 以 yyyy/MM/dd 格式获取日期

> ID：14002425
> 
> 赞同：6
> 
> 时间：2012-12-22T11:25:50.870
> 
> 标签：c#, wpf, xaml, mvvm, datepicker

我有一个 WPF C# 应用程序（.NET 4.0），我有一个日期选择器。我想知道是否可以将格式日期（日期选择器的文本属性）更改为`yyyy/MM/dd`格式。

我正在使用 MVVM 模式，所以我想知道 XAML 代码，如果可以在这个地方做的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T17:19:41.097

我可以使用这段代码：

```
<DatePicker SelectedDate="{Binding myVideModelProperty}"
                    Height="25" HorizontalAlignment="Left" Margin="81,-2,0,0" Name="myDatePicker" VerticalAlignment="Top" Width="115">
            <DatePicker.Resources>
                <Style TargetType="{x:Type DatePickerTextBox}">
                    <Setter Property="Control.Template">
                        <Setter.Value>
                            <ControlTemplate>
                                <TextBox x:Name="PART_TextBox" 
                                    Text="{Binding Path=SelectedDate, RelativeSource={RelativeSource AncestorType={x:Type DatePicker}}, StringFormat={}{0:yyyy/MM/dd}}" />
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </DatePicker.Resources>
        </DatePicker> 
```

Using the datePicker resources I can set the format of its textBox. In this way, It is not needed a converter, neither a general template and any other extra code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:37:50.997

根据这篇[文章](https://stackoverflow.com/questions/1378484/wpf-toolkit-how-to-apply-date-format-in-c-sharp-for-datepicker-control)，您可以更改文化以获得正确的日期格式

```
System.Globalization.CultureInfo culInfo = new System.Globalization.CultureInfo("en-us");
System.Globalization.DateTimeFormatInfo dtinfo = new System.Globalization.DateTimeFormatInfo();
dtinfo.ShortDatePattern = "yyyy/MM/dd"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T11:38:45.320

将此`Template`用于您的日期选择器并使用此值转换器。在模板中，带有的行`DatePickerTextBox`已被修改为使用`yyyy/MM/dd`您请求的格式（通过转换器）。我修改的模板来自[这里](http://cuppster.com/2011/02/02/xaml-template-for-the-wpf-datepicker-control/)。

示例用法：

```
<DatePicker Template="{StaticResource SpecialDatePicker}" SelectedDate="{Binding Path=Date}" /> 
```

值转换器代码：

```
public class DateFixerConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return DateTime.Parse((string)value).ToString("yyyy/MM/dd");
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return DateTime.Parse((string) value);
    }
} 
```

模板代码：

```
 <ControlTemplate x:Key="SpecialDatePicker" TargetType="DatePicker">
        <Border BorderThickness="{TemplateBinding Border.BorderThickness}" Padding="{TemplateBinding Control.Padding}" BorderBrush="{TemplateBinding Border.BorderBrush}" Background="{TemplateBinding Panel.Background}">
            <Grid Name="PART_Root" HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.Resources>
                    <SolidColorBrush x:Key="DisabledBrush">#A5FFFFFF</SolidColorBrush>
                    <ControlTemplate TargetType="Button" x:Key="DropDownButtonTemplate">
                        <Grid>
                            <Grid Background="#11FFFFFF" Width="19" Height="18" FlowDirection="LeftToRight" Margin="0,0,0,0" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20*" />
                                    <ColumnDefinition Width="20*" />
                                    <ColumnDefinition Width="20*" />
                                    <ColumnDefinition Width="20*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="23*" />
                                    <RowDefinition Height="19*" />
                                    <RowDefinition Height="19*" />
                                    <RowDefinition Height="19*" />
                                </Grid.RowDefinitions>
                                <Border BorderThickness="1,1,1,1" CornerRadius="0,0,1,1" BorderBrush="#FF45D6FA" Name="Highlight" Margin="-1,-1,-1,-1" Opacity="0" Grid.Row="0" Grid.ColumnSpan="4" Grid.RowSpan="4" />
                                <Border BorderThickness="1,1,1,1" CornerRadius="0.5,0.5,0.5,0.5" BorderBrush="#FFFFFFFF" Background="#FF1F3B53" Name="Background" Margin="0,-1,0,0" Opacity="1" Grid.Row="1" Grid.ColumnSpan="4" Grid.RowSpan="3" />
                                <Border BorderThickness="1,1,1,1" CornerRadius="0.5,0.5,0.5,0.5" BorderBrush="#BF000000" Name="BackgroundGradient" Margin="0,-1,0,0" Opacity="1" Grid.Row="1" Grid.ColumnSpan="4" Grid.RowSpan="3">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0.7,0" EndPoint="0.7,1">
                                            <LinearGradientBrush.GradientStops>
                                                <GradientStop Color="#FFFFFFFF" Offset="0" />
                                                <GradientStop Color="#F9FFFFFF" Offset="0.375" />
                                                <GradientStop Color="#E5FFFFFF" Offset="0.625" />
                                                <GradientStop Color="#C6FFFFFF" Offset="1" />
                                            </LinearGradientBrush.GradientStops>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                </Border>
                                <Rectangle StrokeThickness="1" Grid.ColumnSpan="4" Grid.RowSpan="1">
                                    <Rectangle.Fill>
                                        <LinearGradientBrush StartPoint="0.46,1.6" EndPoint="0.3,-1.1">
                                            <LinearGradientBrush.GradientStops>
                                                <GradientStop Color="#FF4084BD" />
                                                <GradientStop Color="#FFAFCFEA" Offset="1" />
                                            </LinearGradientBrush.GradientStops>
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                    <Rectangle.Stroke>
                                        <LinearGradientBrush StartPoint="0.48,1.25" EndPoint="0.48,-1">
                                            <LinearGradientBrush.GradientStops>
                                                <GradientStop Color="#FF494949" />
                                                <GradientStop Color="#FF9F9F9F" Offset="1" />
                                            </LinearGradientBrush.GradientStops>
                                        </LinearGradientBrush>
                                    </Rectangle.Stroke>
                                </Rectangle>
                                <Path Data="M11.426758,8.4305077L11.749023,8.4305077 11.749023,16.331387 10.674805,16.331387 10.674805,10.299648 9.0742188,11.298672 9.0742188,10.294277C9.4788408,10.090176 9.9094238,9.8090878 10.365967,9.4510155 10.82251,9.0929432 11.176106,8.7527733 11.426758,8.4305077z M14.65086,8.4305077L18.566387,8.4305077 18.566387,9.3435936 15.671368,9.3435936 15.671368,11.255703C15.936341,11.058764 16.27293,10.960293 16.681133,10.960293 17.411602,10.960293 17.969301,11.178717 18.354229,11.615566 18.739157,12.052416 18.931622,12.673672 18.931622,13.479336 18.931622,15.452317 18.052553,16.438808 16.294415,16.438808 15.560365,16.438808 14.951641,16.234707 14.468243,15.826504L14.881817,14.929531C15.368796,15.326992 15.837872,15.525723 16.289043,15.525723 17.298809,15.525723 17.803692,14.895514 17.803692,13.635098 17.803692,12.460618 17.305971,11.873379 16.310528,11.873379 15.83071,11.873379 15.399232,12.079271 15.016094,12.491055L14.65086,12.238613z" Stretch="Fill" Fill="#FF2F2F2F" Margin="4,3,4,3" HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="4" Grid.RowSpan="3" />
                                <Ellipse Fill="#FFFFFFFF" StrokeThickness="0" Width="3" Height="3" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.ColumnSpan="4" />
                                <Border BorderThickness="1,1,1,1" CornerRadius="0,0,0.5,0.5" BorderBrush="#B2FFFFFF" Name="DisabledVisual" Opacity="0" Grid.Row="0" Grid.ColumnSpan="4" Grid.RowSpan="4" />
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Grid.Resources>
                <Button Foreground="{TemplateBinding TextElement.Foreground}" Name="PART_Button" Width="20" Margin="3,0,3,0" HorizontalAlignment="Left" VerticalAlignment="Top" Focusable="False" Grid.Column="1" Grid.Row="0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Grid>
                                <Grid Background="#11FFFFFF" Width="19" Height="18" FlowDirection="LeftToRight" Margin="0,0,0,0" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="20*" />
                                        <ColumnDefinition Width="20*" />
                                        <ColumnDefinition Width="20*" />
                                        <ColumnDefinition Width="20*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="23*" />
                                        <RowDefinition Height="19*" />
                                        <RowDefinition Height="19*" />
                                        <RowDefinition Height="19*" />
                                    </Grid.RowDefinitions>
                                    <Border BorderThickness="1,1,1,1" CornerRadius="0,0,1,1" BorderBrush="#FF45D6FA" Name="Highlight" Margin="-1,-1,-1,-1" Opacity="0" Grid.Row="0" Grid.ColumnSpan="4" Grid.RowSpan="4" />
                                    <Border BorderThickness="1,1,1,1" CornerRadius="0.5,0.5,0.5,0.5" BorderBrush="#FFFFFFFF" Background="#FF1F3B53" Name="Background" Margin="0,-1,0,0" Opacity="1" Grid.Row="1" Grid.ColumnSpan="4" Grid.RowSpan="3" />
                                    <Border BorderThickness="1,1,1,1" CornerRadius="0.5,0.5,0.5,0.5" BorderBrush="#BF000000" Name="BackgroundGradient" Margin="0,-1,0,0" Opacity="1" Grid.Row="1" Grid.ColumnSpan="4" Grid.RowSpan="3">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0.7,0" EndPoint="0.7,1">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFFFFFFF" Offset="0" />
                                                    <GradientStop Color="#F9FFFFFF" Offset="0.375" />
                                                    <GradientStop Color="#E5FFFFFF" Offset="0.625" />
                                                    <GradientStop Color="#C6FFFFFF" Offset="1" />
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>
                                    <Rectangle StrokeThickness="1" Grid.ColumnSpan="4" Grid.RowSpan="1">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint="0.46,1.6" EndPoint="0.3,-1.1">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FF4084BD" />
                                                    <GradientStop Color="#FFAFCFEA" Offset="1" />
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                        <Rectangle.Stroke>
                                            <LinearGradientBrush StartPoint="0.48,1.25" EndPoint="0.48,-1">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FF494949" />
                                                    <GradientStop Color="#FF9F9F9F" Offset="1" />
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Rectangle.Stroke>
                                    </Rectangle>
                                    <Path Data="M11.426758,8.4305077L11.749023,8.4305077 11.749023,16.331387 10.674805,16.331387 10.674805,10.299648 9.0742188,11.298672 9.0742188,10.294277C9.4788408,10.090176 9.9094238,9.8090878 10.365967,9.4510155 10.82251,9.0929432 11.176106,8.7527733 11.426758,8.4305077z M14.65086,8.4305077L18.566387,8.4305077 18.566387,9.3435936 15.671368,9.3435936 15.671368,11.255703C15.936341,11.058764 16.27293,10.960293 16.681133,10.960293 17.411602,10.960293 17.969301,11.178717 18.354229,11.615566 18.739157,12.052416 18.931622,12.673672 18.931622,13.479336 18.931622,15.452317 18.052553,16.438808 16.294415,16.438808 15.560365,16.438808 14.951641,16.234707 14.468243,15.826504L14.881817,14.929531C15.368796,15.326992 15.837872,15.525723 16.289043,15.525723 17.298809,15.525723 17.803692,14.895514 17.803692,13.635098 17.803692,12.460618 17.305971,11.873379 16.310528,11.873379 15.83071,11.873379 15.399232,12.079271 15.016094,12.491055L14.65086,12.238613z" Stretch="Fill" Fill="#FF2F2F2F" Margin="4,3,4,3" HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="4" Grid.RowSpan="3" />
                                    <Ellipse Fill="#FFFFFFFF" StrokeThickness="0" Width="3" Height="3" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.ColumnSpan="4" />
                                    <Border BorderThickness="1,1,1,1" CornerRadius="0,0,0.5,0.5" BorderBrush="#B2FFFFFF" Name="DisabledVisual" Opacity="0" Grid.Row="0" Grid.ColumnSpan="4" Grid.RowSpan="4" />
                                </Grid>
                            </Grid>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <!-- THIS LINE :: Notice the binding for Text -->
                <DatePickerTextBox  Text="{Binding RelativeSource={RelativeSource AncestorType=DatePicker},Path=Text,Converter={StaticResource DateFixer}}" Foreground="{TemplateBinding TextElement.Foreground}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Name="PART_TextBox" Grid.Column="0" Grid.Row="0" xml:space="preserve"></DatePickerTextBox>
                <Grid Name="PART_DisabledVisual" Opacity="0" IsHitTestVisible="False" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Rectangle RadiusX="1" RadiusY="1" Fill="#A5FFFFFF" Grid.Column="0" Grid.Row="0" />
                    <Rectangle RadiusX="1" RadiusY="1" Fill="#A5FFFFFF" Width="19" Height="18" Margin="3,0,3,0" Grid.Column="1" Grid.Row="0" />
                    <Popup Placement="Bottom" StaysOpen="False" AllowsTransparency="True" Name="PART_Popup" />
                </Grid>
            </Grid>
        </Border>
    </ControlTemplate> 
```

# java - 在 Linux 上运行 Swing jar

> ID：14002430
> 
> 赞同：0
> 
> 时间：2012-12-22T11:26:39.503
> 
> 标签：java, linux, swing, deployment, jar

我已经为我在 Java Swing 中使用 JavaFX 制作的项目编译并创建了 jar 文件。现在我想在 Linux 上运行该项目。为此，我必须在 Linux 上运行我的设置，它从 Windows 中选择目录路径，`System.getProperty("user.dir");` 我想要 Linux 中的等效命令。

如何在 Linux 上运行 Java Swing jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:34:44.820

[系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)对所有操作系统都是通用的。`System.getProperties("user.dir");`在执行中返回你的执行目录（你运行主类的地方）。

**回答你评论：** 

1.  将您的可执行文件保存在用户目录`/home/userName`中。
2.  如果你`jar`有一个主类并且可以在没有任何参数的情况下运行，只需在 jar 上加倍以获得摇摆 UI
3.  如果您需要通过命令行传递参数，请创建一个`sh`文件`run.sh`， 如`java -jar yourjarName.jar argument1 argument2 ...`
4.  打开命令提示符并运行`sh run.sh`

# java - 在 JDialog 中更改 JPanel 内容

> ID：14002431
> 
> 赞同：1
> 
> 时间：2012-12-22T11:26:41.607
> 
> 标签：java, swing

在创建和显示 JDialog 之后，我正在尝试将组件添加到它。我没有尝试使更改真正更新到屏幕上，而且我已经阅读并应用了我能找到的与此相关的所有问题。

此示例代码创建了一个显示单词“test”的模态 JDialog。我无法让它显示“test2”。几乎完全相同的代码，但使用 JFrame 而不是 JDialog 的行为符合我的预期，所以我不明白。我是 Java 新手，尤其是摇摆不定。

```
import javax.swing.*;
public class DialogTester {
    public static void main(String[] args) {
        new DialogTester();
    }

    public DialogTester() {
        JFrame jframe = new JFrame();
        jframe.setVisible(true);
        JDialog jdialog = new JDialog(jframe,true);
        JPanel jpanel = new JPanel();
        jpanel.add(new JLabel("test"));
        jdialog.add(jpanel);
        jdialog.setVisible(true);
        jpanel.add(new JLabel("test2"));
        jpanel.revalidate();
        jdialog.getContentPane().validate();
        jdialog.pack();

    }
} 
```

我也试过打电话

```
jdialog.repaint(); 
```

什么也没做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T11:31:18.570

您创建了一个模态对话框。因此，一旦您调用`setVisible(true)`，以下指令将等待关闭对话框以执行。

将添加标签的代码放在对话框可见之前，或将其放在对话框显示后调用的事件处理程序中，例如，当您单击此对话框中的按钮时。

# php - 奇怪的数据库设计，需要指导

> ID：14002434
> 
> 赞同：13
> 
> 时间：2012-12-22T11:27:16.557
> 
> 标签：php, mysql, database, database-design

我可能正在考虑这个错误，但这里有。

计算机开始在线性行中吐出 11111111111111111111 和 999999999999999999999 之间的无数随机数：

*   有时计算机会在一行的一端添加一个数字。
*   有时计算机会在线路的另一端添加一个数字。
*   每个数字都有一个之前出现或将要出现的数字。
*   每个数字都有一个后面出现或将要出现的数字。
*   并非所有数字都是唯一的，许多数字（但不是大多数数字）是重复的。
*   计算机永远不会停止吐出数字。

当我记录所有这些数字时，我需要能够在任何给定时间做出有根据的猜测：

*   如果这是我第二次看到一个数字，我必须知道上次排在它前面的数字是什么。

*   如果它出现了两次以上，我必须知道它前面的数字的概率/频率。

*   如果这是我第二次看到一个数字，我一定也知道上次排在它后面的是什么数字。

*   如果它出现了两次以上，我必须知道它后面出现的数字的概率/频率。

* * *

我到底如何在 MySQL 数据库中构建表来存储所有这些数字？我使用哪个引擎，为什么？如何制定我的查询？我需要快速知道，但容量也很重要，因为什么时候才能停止吐出它们？

我的拙劣计划：

2 表：

```
1\. Unique ID/#
2\. #/ID/# 
```

我的想法：

唯一 ID 几乎总是比数字短=更快的匹配。数字重复 = 更少的 ID 行 = 最初的匹配速度更快。

```
Select * in table2 where id=(select id in table1 where #=?) 
```

或者：

3 表：

```
1\. Unique ID/#
2\. #/ID
3\. ID/# 
```

我的想法：

如果我只需要左/前，或者只需要后/右，我会缩小第二个查询的大小。

```
SELECT # IN table2(or 3) WHERE id=(SELECT id IN table1 WHERE #=?) 
```

或者

1 表：

```
1\. #/#/# 
```

想法：

更少的查询=更少的时间。

```
SELECT * IN table WHERE col2=#. 
```

我迷路了.... :(每个数字都有四个属性，一个是前面+频率，一个是后面+频率。

我这样想会更好吗？如果我在表中存储和增加频率，我会消除重复从而加快我的查询速度吗？我最初在想，如果我存储每一个事件，以编程方式计算频率会更快......

如此简单的数据，但我只是不知道数据库如何运行以知道哪个更有效。

* * *

根据最近的评论，我想添加一些关于实际问题的信息：我有一个不定长度的字符串。我正在尝试在此字符串中存储各种字符或字符块的马尔可夫链频率表。

给定字符串中的任何点，我需要知道下一个状态的概率和前一个状态的概率。

我正在预测用户输入，基于文本语料库和过去的用户输入。与我见过的其他应用程序相比，一个主要的区别是我在给定的时间走得更远，更多的状态，我需要频率数据来提供多种可能性。

我希望这能更清楚地说明情况。我不想深入了解问题的本质，因为过去我创建的问题不够具体，无法得到具体的答案。

* * *

这似乎可能好一点。我对这个解决方案的主要问题是：提供“密钥”（状态的前几个字符）会提高系统的速度吗？即查询state_key，然后只查询该查询的结果以获得完整状态？

```
Table 1:
name: state
col1:state_id - unique, auto incrementing
col2:state_key - the first X characters of the state
col3:state - fixed length string or state

Table 2:
name: occurence
col1:state_id_left - non unique key from table 1
col2:state_id_right - non unique key from table 1
col3:frequency - int, incremented every time the two states occur next to each other.

QUERY TO FIND PREVIOUS STATES:
SELECT * IN occurence WHERE state_id_right=(SELECT state_id IN state WHERE state_key=? AND state=?)

QUERY TO FIND NEXT STATES:
SELECT * IN occurence WHERE state_id_left=(SELECT state_id IN state WHERE state_key=? AND state=?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:27:30.297

我不熟悉马尔可夫链，但这里试图回答这个问题。注意：为简化起见，我们将每个数字字符串称为“状态”。

首先我想象这样一张桌子

```
Table states:
order : integer autonumeric (add an index here)
state_id : integer (add an index here)
state : varchar (?) 
```

order：只需使用序列号 (1,2,3,...,n)，这样可以轻松搜索上一个或下一个状态。

state_id：与状态关联的唯一编号。例如，您可以使用数字 1 来表示状态“1111111111...1”（无论序列的长度是多少）。重要的是状态的再次出现需要使用与之前使用的相同的 state_id。您可以根据字符串（可能减去一个数字）来制定 state_id。当然，state_id 只有在可能的状态数适合 MySQL int 字段时才有意义。

状态：那是数字'11111111...1'到'99999999...9'的字符串......我猜这只能存储为字符串，但如果它适合整数/数字列，你应该试试看，因为很可能你不需要 state_id

state_id 的重点是搜索数字比搜索文本更快，但在性能方面总是需要权衡取舍......配置文件并确定您的瓶颈以做出更好的设计决策。

那么，您如何查找先前出现的状态 S_i ？

“SELECT order, state_id, state FROM states WHERE state_id =” 然后附加 get_state_id(S_i) 其中 get_state_id 理想情况下使用公式为状态生成唯一 id。

现在，使用 order - 1 或 order + 1，您可以访问发出附加查询的相邻州。

接下来我们需要跟踪不同发生的频率。您可以在可能如下所示的不同表中执行此操作：

```
Table state_frequencies:
state_id integer (indexed)
occurrences integer 
```

并且仅在获得数字时添加记录。

最后，您可以使用表格来跟踪相邻州的频率：

```
Table prev_state_frequencies (next_state_frequencies is the same):
state_id: integer (indexed)
prev_state_id: integer (indexed)
occurrences: integer 
```

您将能够通过查看状态的出现次数（在 state_frequencies 中）与其前一状态的出现次数（在 prev_state_frequencies 中）来推断概率（我猜这是您想要做的）。

我不确定我是否解决了您的问题，但如果这是有道理的，我猜我有。

希望对你有帮助啊

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T04:44:59.790

在我看来，马尔可夫链是有限的，所以首先我会从定义链的限制开始（即 26 个字符，需要填充 x 个空格），然后您可以计算可能组合的总数。确定某种字符排列的概率，如果我没记错的话，数学是：

x = ((C)(C))(P)
其中
C = 可能的字符数，
P = 总潜在结果。

这是要存储的大量数据，而创建过滤数据的程序可能会变成一项看似无止境的任务。

-> 如果您在表中使用自动递增的 id，您可以查询该表并使用 preg_match 对照以前的结果测试新结果，然后将新结果的总匹配数插入表中，这也允许您查询前面的结果以查看之前的结果，这应该让您大致了解结果中的模式以及统计相关性和新算法生成的一般基础

# php - php单词微调器问题

> ID：14002437
> 
> 赞同：0
> 
> 时间：2012-12-22T11:27:57.957
> 
> 标签：php, mysql

我正在尝试制作一个微调器函数来旋转一个字符串并从 mysql 表中替换一个单词我使用了这个函数：

```
function mradef($text)
{
    global $db;
    $text = trim($text);
    $word = explode(" ", $text);
    $finalword='';
    foreach($word as $words) {
        $q = $db->query("select simple_id,name,synonym from simple where name='$words'");
        while($t = $db->fetch($q)){
            $finalword .= str_replace($words, 
                                  '<b>' . $t['synonym'] . '( ' . $words . ' )</b>', 
                                  ' ' . $text . ' ');

            return $finalword;
        }
    }
}

$amer = 'hello my name is Amer and I am a php programmer';
echo mradef($amer); 
```

我的表（简单）包含这些行

```
name       | synonym 
--------------
hello      | hi
programmer | web programmer 
```

但是代码不起作用。您需要做的就是让该代码将字符串中的任何单词更改为数据库中的（同义词）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:34:41.637

这一行：

```
return $finalword; 
```

应该在`foreach`循环之外，那是你的错误。

此外，数据库中未找到的所有单词都不会附加到`$finalword`. 要添加它们，请添加一个条件（如果没有任何 mysql 结果）并附加单词而不做任何更改。

# debian - 使用 Debian Squeeze 在 /usr/lib/xen-tools/ 中将更新的 ubuntu 版本添加到 XEN

> ID：14002438
> 
> 赞同：3
> 
> 时间：2012-12-22T11:27:58.180
> 
> 标签：debian, ubuntu-12.04, xen

我正在尝试使用 XEN 虚拟化`Ubuntu 12.04`在我的专用服务器 ( ) 上设置 VPS ( ) 。`Debian Squeeze`

目前我可以`Ubuntu 10.04`毫无问题地进行设置，但我想使用`Ubuntu 12.04`. 当尝试使用`xen-tools`dist `precise`( `Ubuntu 12.04`) 时，它告诉我发行版不可用，请查看`/usr/lib/xen-tools/`. 快速`ls`展示：

```
centos-4.d  debian.d          fedora-core-11.d  fedora-core-5.d  fedora-core-9.d  hardy.d     lenny.d     sarge.d    testing.d
centos-5.d  edgy.d            fedora-core-12.d  fedora-core-6.d  feisty.d         intrepid.d  lucid.d     sid.d      wheezy.d
common.sh   etch.d            fedora-core-13.d  fedora-core-7.d  gentoo.d         jaunty.d    maverick.d  squeeze.d
dapper.d    fedora-core-10.d  fedora-core-4.d   fedora-core-8.d  gutsy.d          karmic.d    natty.d     stable.d 
```

我一直在环顾四周，但根本不知道如何添加`precise`到此列表中，因此我可以使用它而不是`lucid`. 有人愿意指出如何做到这一点吗？

请指出是否缺少任何必要的信息以回答问题。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:55:59.003

要添加新的发行版，您必须在 中创建一个新目录`/usr/lib/xen-tools`，如[xen-tools FAQs](http://xen-tools.org/software/xen-tools/faq.html)所述。

Squeeze 的`xen-tools`包没有脚本，但你可以从[wheezy 的包](http://packages.debian.org/wheezy/all/xen-tools/download)`precise`中借用它们。

利用

```
dpkg -x xen-tools_4.3.1-1_all.deb 
```

提取文件，然后`precise.d`移至`/usr/lib/xen-tools`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:59:49.490

精确.d 是 karmic.d 的符号链接

```
cd /usr/lib/xen-tools
ln -s karmic.d precise.d 
```

# android - 直接把html代码放到一个WebView中（Android）

> ID：14002446
> 
> 赞同：34
> 
> 时间：2012-12-22T11:29:11.427
> 
> 标签：android, html, webview

在使用 WebView 时，我们通常会为其添加一个 URL：

```
WebView.loadUrl(myURL); 
```

但是可以直接放HTML代码吗？？所以它的逻辑是：

```
WebView.loadContent ( <html><head><script></script></head><body>....</body></html> ); 
```

谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-22T11:33:15.090

看看这个：http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

```
 // OR, you can also load from an HTML string:
 String summary = "<html><body>You scored <b>192</b> points.</body></html>";
 webview.loadData(summary, "text/html", null); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-22T11:32:58.617

```
 String yourhtmlpage = "<html><body>You scored <b>hello world</b> points.</body></html>";
 webview.loadDataWithBaseURL(null, yourhtmlpage, "text/html", "UTF-8", null); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-03T09:33:14.490

试试这个代码。这个对我有用。

```
WebSettings settings = mDesc.getSettings();
settings.setDefaultTextEncodingName("utf-8");
mDesc.loadData(mDescText, "text/html; charset=utf-8",null); 
```

# c# - 在 Windows RT 中向 ListBox 添加项目的说明

> ID：14002451
> 
> 赞同：0
> 
> 时间：2012-12-22T11:29:56.470
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我正在尝试为商店制作一个简单的 Windows 8/RT 应用程序，但我有一个关于将项目添加到 ListBox 的问题。

在我的 MainPage 中，我有以下代码：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        this.brain = new MainController();
        LoadData();
    }
    public void LoadData()
    {
        brain.GetNotesRepoFile().ReadFile();
        Debug(""+brain.GetNotesRepoFile().GetNotesList().Count);
        for(int i = 0; i < brain.GetNotesRepoFile().GetNotesList().Count; i++)
        {
           notesListBox.Items.Add( // code here );
        }
    }
 }

public class NotesRepositoryFile
{
    // CONSTRUCTOR
    public NotesRepositoryFile()
    {
        this.notesRepository = new List<Note>();
    }
    // Read from file
    public async void ReadFile()
    {
        // settings for the file
        var path = @"Files\Notes.txt";
        var folder = Windows.ApplicationModel.Package.Current.InstalledLocation;

        // acquire file
        var file = await folder.GetFileAsync(path);
        var readThis = await Windows.Storage.FileIO.ReadLinesAsync(file);
        foreach (var line in readThis)
        {
            notesRepository.Add(new Note(line.Split(';')[0], line.Split(';')[1]));
            // check if the item was added
            Debug.WriteLine("Added: " + notesRepository[notesRepository.Count - 1].ToString());
        }
        Debug.WriteLine("File read successfully");
    } 
```

}

**我的输出是：**

0

补充：测试1

添加：测试2

文件读取成功

我在这里尝试做的是从文件中读取字符串并使用 Items.Add 将它们添加到列表框中。但由于数组的大小为 0，即使项目已成功添加，也不起作用。

我不明白为什么*Debug(""+brain.GetNotesRepoFile().GetNotesList().Count);* *在Brain.GetNotesRepoFile().ReadFile()***之前** 执行；因为显然情况并非如此。

 *另外为什么这个解决方案有效，而上述无效？

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        this.brain = new MainController();
        ReadFile();
    }
    // Read from file
    public async void ReadFile()
    {
        // settings for the file
        var path = @"Files\Notes.txt";
        var folder = Windows.ApplicationModel.Package.Current.InstalledLocation;

        // acquire file
        var file = await folder.GetFileAsync(path);
        var readThis = await Windows.Storage.FileIO.ReadLinesAsync(file);
        foreach (var line in readThis)
        {
            brain.AddNote(line.Split(';')[0], line.Split(';')[1]);
            notesListBox.Items.Add(brain.GetNotesRepoFile().GetNotesList()[brain.GetNotesRepoFile().GetNotesList().Count - 1].ToString());
        }
        Debug.WriteLine("File read successfully");
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:49:38.723

嗯，async和await的用法不对是你的代码，请按照下面的代码改

一、在 NotesRepositoryFile 类中

```
public async Task<bool> ReadFile()
{
   //Your code
    if (notesRepository.Count > 0) return true;
            return false;
} 
```

主页中的第二个

```
public async void LoadData()
{
    bool HasNote = await brain.GetNotesRepoFile().ReadFile();

    if (HasNote)
    {
        for (int i = 0; i < brain.GetNotesRepoFile().notesRepository.Count; i++)
        {
                //Your code
        }
    }
 } 
```*

# c++ - 我可以忽略 gcc 警告：'Foo::m_bar' 应该在成员初始化列表中初始化 [-Weffc++]

> ID：14002454
> 
> 赞同：23
> 
> 时间：2012-12-22T11:30:20.303
> 
> 标签：c++, gcc, c++11, compilation, warnings

```
struct Bar
{
    Bar() {}
};

struct Foo
{
    Foo() = default;
    Bar m_bar;
};

int main()
{
    Foo foo;
} 
```

当使用 C++11`default`关键字和 gcc 警告`-Weffc++`时，gcc 输出：

> 警告：'Foo::m_bar' 应该在成员初始化列表中初始化 [-Weffc++]

忽略此警告是否安全？我应该向 gcc 提交错误吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-22T11:46:13.477

您可以忽略或抑制警告。这是对有效 C++ 指南之一的误解。该指南说更喜欢初始化而不是分配，但在您的示例中，`m_bar`将被初始化。你的代码是正确的。

资料来源：GCC 的错误跟踪器中的[Jonathan Wakely ：](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=16166#c3)

> # Item 12: 在构造函数中优先初始化而不是赋值。
> 
> 替换为第 4 项：“确保在使用对象之前对其进行初始化”，并且 G++ 无论如何都会误解原始项并警告*任何* 没有 mem-initializer 的成员，这非常烦人：初始化 std:: 没有意义字符串，它有一个完全安全的默认构造函数。我的 PR 2972​​ 的 -Wmeminit 补丁应该替换此项目的当前警告，因为它只警告构造函数未初始化的成员。

（并且由于这是一个已知问题，因此无需再次将其报告为错误。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-22T12:02:55.823

可以忽略这个警告吗？是的。

忽略这个警告是个好主意吗？依靠（*）

你应该向 gcc 提交错误吗？不（*）

(*)

*   `default`构造函数实际上初始化`m_bar`就好了，你可以测试一下
*   g++ 没有得到那个有点奇怪
*   您选择了非常详细的警告设置
*   警告不是关于你的代码的正确性，而是关于风格
*   您无法更正此问题并保留 Foo 的默认构造函数和 Bar 的自定义构造函数

`man g++`, 部分 -Weffc++

> 警告违反 Scott Meyers 的 Effective C++ 书中的以下样式指南：
> 
> *   第 11 项：为具有动态分配内存的类定义复制构造函数和赋值运算符。
> *   第 12 项：在构造函数中更喜欢初始化而不是赋值。
> *   第 14 条：在基类中使析构函数为虚拟。
> *   第 15 项：让“operator=”返回对 *this 的引用。
> *   第 23 条：当你必须返回一个对象时，不要试图返回一个引用。
> 
> 还要警告违反 Scott Meyers 的《更有效的 C++》一书中的以下样式指南：
> 
> *   第 6 项：区分递增和递减运算符的前缀和后缀形式。
> *   第 7 项：永远不要重载“&&”、“││”或“，”。
> 
> 选择此选项时，请注意标准库头文件并不遵守所有这些准则。

# iphone - 旋转后的 UIImageView 图像模糊

> ID：14002462
> 
> 赞同：1
> 
> 时间：2012-12-22T11:31:27.820
> 
> 标签：iphone, ios, cocoa-touch

`UIImageView`我使用以下代码旋转 a ：

```
[imageView setTransform:CGAffineTransformMakeRotation(-0.10)]; 
```

但是旋转后看起来很模糊，[就像这样](https://stackoverflow.com/questions/8999483/image-coming-blurred-and-screwed-after-applying-rotation-on-image-view)。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T21:54:56.630

可能是结果帧未在偶数整数上对齐。当您在半像素边界上绘图时，某些绘图例程会使事物看起来模糊。如果您看到任何非整数值，请使用其中一个`floor()`函数来修改结果帧，以便将其捕捉到边界。

# json - 修改 repo 以异步获取 JSON

> ID：14002476
> 
> 赞同：0
> 
> 时间：2012-12-22T11:33:15.820
> 
> 标签：json, web-services

我正在开发一个 iPhone 应用程序，该应用程序需要从我的服务器以 JSON 或 XML 格式加载数据。由于该应用程序是免费的，因此我会获得大量数据，并且由于加载数据时间过长而在启动应用程序时会崩溃。所以我知道我不应该一次得到“所有”JSON，但我必须加载“分页”的数据[一点一点]..

我发现这个项目非常适合我的需要，但无法成功修改它以满足我的需要：

[https://github.com/nmondollot/NMPaginator](https://github.com/nmondollot/NMPaginator)

项目以 Tw​​itter api 作为数据源，如果我需要处理一个返回 JSON 格式数据的简单 php 文件怎么办？

nb：我尝试修改后尝试联系项目开发人员，但直到现在才得到答复。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:20:58.787

最简单的解决方案可能是在另一个线程中下载数据。这可以通过多种方式完成，但其中一种方式是使用大中央调度 (GCD)。

像这样的东西

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    NSURL *url = [NSURL URLWithString:@"Your_URL"];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];
    [NSURLConnection sendAsynchronousRequest:req
                                       queue:[NSOperationQueue currentQueue]
                           completionHandler:
     ^(NSURLResponse *res, NSData *data, NSError *err) {
         // Convert the data to appropriate object
         NSString* myString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
//You would probably deserialize the json here
//self.tableViewArray = serialiedObjects;

         dispatch_async(dispatch_get_main_queue(), ^{
             //Reload table view
             [self.tableView reloadData];
         });
     }];
}); 
```

# android - 在视图画布上绘制文本时文本颜色太深

> ID：14002478
> 
> 赞同：0
> 
> 时间：2012-12-22T11:33:21.437
> 
> 标签：android, android-canvas, drawtext

我使用以下代码在视图画布上绘制文本：

```
Paint paint = new Paint();
paint.setTextSize(14);
paint.setColor(0xFFFFFFFF);
paint.setAntiAlias(true);

@Override
public void onDraw(Canvas canvas){
   super.onDraw(canvas); 

   canvas.drawText("abcdef", 0, 0, paint);
} 
```

问题：

文本以深灰色而不是白色 (0xFFFFFFFF) 显示。为什么这样？

我尝试使用 setShadowLayer() 或 paint.setAntiAlias(false) 来解决问题，不幸的是没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:17:35.393

必须在其他地方修改您的油漆颜色（或 alpha？）。我按如下方式实现了您的代码，文本颜色为白色。

```
private void drawText() {
    LinearLayout layout = (LinearLayout) findViewById(R.id.main_view);
    if (layout != null){
        View myView = new MyView(this);
        myView.setBackgroundColor(Color.BLACK);
        layout.addView(myView, 300, 100);
    }
}

private class MyView extends View{

    public Paint paint;

    public MyView(Context context) {
        super(context);

        paint = new Paint();
        paint.setTextSize(25);
        paint.setColor(0xFFFFFFFF);
        paint.setAntiAlias(true);
    }

    @Override
    protected void onDraw(Canvas canvas){
           super.onDraw(canvas); 
           canvas.drawText("abcdef", 0, 25, paint);
    }
} 
```

![在此处输入图像描述](../Images/b0670d19f9ba3943bbf5c2305a0d5987.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:38:46.213

在 res/value 中设置

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<color name="white">#FFFFFF</color>
</resources> 
```

然后将其放入您的代码中-

```
int myColor = context.getResources().getColor(com.example.test.R.color.white);
paint.setColor(myColor); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:00:31.540

像这样设置颜色代替你的代码使用这个

```
 Paint Paint = new Paint();
        Paint.setAntiAlias(true);
        Paint.setDither(true);
        Paint.setColor(Color.WHITE);
        Paint.setStyle(Paint.Style.STROKE);
        Paint.setStrokeJoin(Paint.Join.ROUND);
        Paint.setStrokeCap(Paint.Cap.ROUND);
        Paint.setStrokeWidth(10); 
```

看到这里是一个很好的例子[blogspot.in](http://polamreddyn.blogspot.in/2012/10/free-hand-graw.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T12:02:13.440

我不确定android是否支持这种颜色的十六进制代码（ 0xFFFFFFFF ），将 0x 替换为 # of 0xFFFFFFFF 并使用

```
paint.setColor(Color.parseColor("#FFFFFFFF")); 
```

代替

```
paint.setColor(0xFFFFFFFF); 
```

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-22T13:43:36.160

经过一番调查，我发现了问题和解决方案：

我的错误是，除了 onDraw() 方法之外，我还在子视图中使用了半透明背景颜色 setBackgroundColor(0x88000000)，这导致了奇怪的结果，即灰色文本颜色而不是白色文本颜色。当我从子视图中删除方法 setBackgroundColor() 时，文本颜色现在为白色。

谢谢大家的想法和建议！

# c# - 用空结构捕获 InvalidOperationException

> ID：14002479
> 
> 赞同：1
> 
> 时间：2012-12-22T11:33:25.287
> 
> 标签：c#, exception-handling, invalidoperationexception

我试图捕捉`InvalidOperationException`在声明变量时有时会发生的情况。但是，以下代码不起作用。可能是因为我真的不知道你是如何捕获异常的。

```
public override void Download()
{
    try
    {                                           
        var t = (ForumThread)Globals.Db.Thread.Get(_extIdForumThread, _idF);            
        try
        {
            throw new InvalidOperationException();
        }
        catch (InvalidOperationException exception)
        {
            return;
        }
        catch (Exception exception)
        {
            throw;
        }
    }
} 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T11:34:54.960

您不需要自己抛出异常。只要有：

```
 try
    {                                           
        var t = (ForumThread)Globals.Db.Thread.Get(_extIdForumThread, _idF);
    }
    catch (InvalidOperationException exception)
    {
        // Error logging, post processing etc.
        return;
    } 
```

除非您有一个非常好的理由，否则您也不应该真正捕获一般异常 - 即您的应用程序不会崩溃，但如果您这样做，您需要能够从中恢复。

# python - Python中数组的2D和3D散点直方图

> ID：14002480
> 
> 赞同：7
> 
> 时间：2012-12-22T11:33:34.163
> 
> 标签：python, numpy, matplotlib, histogram, binning

你知道吗，我如何将 3 个数组合并为直方图。我的数组看起来像

```
Temperature = [4,   3,   1,   4,   6,   7,   8,   3,   1]
Radius      = [0,   2,   3,   4,   0,   1,   2,  10,   7]
Density     = [1,  10,   2,  24,   7,  10,  21, 102, 203] 
```

一维图应该看起来：

```
Density

     |           X
10^2-|               X
     |       X
10^1-|   
     |   X
10^0-|
     |___|___|___|___|___   Radius
         0  3.3 6.6  10 
```

并且 2D 图应该（定性的）看起来像：

```
Density

     |           2      | |
10^2-|      11249       | |
     |     233          | | Radius
10^1-|    12            | |
     |   1              | |
10^0-|
     |___|___|___|___|___   Temperature
         0   3   5   8 
```

所以我想用 python/numpy 合并一两个字段，然后绘制它们以分析它们的对应关系。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-11T12:18:17.637

这里它遵循两个函数：`hist2d_bubble`和`hist3d_bubble`; 可能适合您的目的：

![在此处输入图像描述](../Images/dbc60831294b9809a23734e0f709c1e2.png)

```
import numpy as np
import matplotlib.pyplot as pyplot
from mpl_toolkits.mplot3d import Axes3D

def hist2d_bubble(x_data, y_data, bins=10):
    ax = np.histogram2d(x_data, y_data, bins=bins)
    xs = ax[1]
    ys = ax[2]
    points = []
    for (i, j), v in np.ndenumerate(ax[0]):
        points.append((xs[i], ys[j], v))

    points = np.array(points)
    fig = pyplot.figure()
    sub = pyplot.scatter(points[:, 0],points[:, 1],
                         color='black', marker='o', s=128*points[:, 2])
    sub.axes.set_xticks(xs)
    sub.axes.set_yticks(ys)
    pyplot.ion()
    pyplot.grid()
    pyplot.show()
    return points, sub

def hist3d_bubble(x_data, y_data, z_data, bins=10):
    ax1 = np.histogram2d(x_data, y_data, bins=bins)
    ax2 = np.histogram2d(x_data, z_data, bins=bins)
    ax3 = np.histogram2d(z_data, y_data, bins=bins)
    xs, ys, zs = ax1[1], ax1[2], ax3[1]
    smart = np.zeros((bins, bins, bins),dtype=int)
    for (i1, j1), v1 in np.ndenumerate(ax1[0]):
        if v1 == 0:
            continue
        for k2, v2 in enumerate(ax2[0][i1]):
            v3 = ax3[0][k2][j1]
            if v1 == 0 or v2 == 0 or v3 == 0:
                continue
            num = min(v1, v2, v3)
            smart[i1, j1, k2] += num
            v1 -= num
            v2 -= num
            v3 -= num
    points = []
    for (i, j, k), v in np.ndenumerate(smart):
        points.append((xs[i], ys[j], zs[k], v))
    points = np.array(points)
    fig = pyplot.figure()
    sub = fig.add_subplot(111, projection='3d')
    sub.scatter(points[:, 0], points[:, 1], points[:, 2],
                color='black', marker='o', s=128*points[:, 3])
    sub.axes.set_xticks(xs)
    sub.axes.set_yticks(ys)
    sub.axes.set_zticks(zs)
    pyplot.ion()
    pyplot.grid()
    pyplot.show()
    return points, sub 
```

上面的两个图是使用以下方法创建的：

```
temperature = [4,   3,   1,   4,   6,   7,   8,   3,   1]
radius      = [0,   2,   3,   4,   0,   1,   2,  10,   7]
density     = [1,  10,   2,  24,   7,  10,  21, 102, 203]
import matplotlib
matplotlib.rcParams.update({'font.size':14})

points, sub = hist2d_bubble(radius, density, bins=4)
sub.axes.set_xlabel('radius')
sub.axes.set_ylabel('density')

points, sub = hist3d_bubble(temperature, density, radius, bins=4)
sub.axes.set_xlabel('temperature')
sub.axes.set_ylabel('density')
sub.axes.set_zlabel('radius') 
```

有关的：

[如何在 Python 中将一系列浮点值合并到直方图中？](https://stackoverflow.com/questions/1721273/howto-bin-series-of-float-values-into-histogram-in-python)

[如何使用 python 中内置的 numpy 或 matplotlib 函数正确生成 3d 直方图？](https://stackoverflow.com/questions/8437788/how-to-correctly-generate-a-3d-histogram-using-numpy-or-matplotlib-built-in-func)

[使用 Python 的 2D 直方图](https://stackoverflow.com/questions/6832168/2d-histogram-with-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T19:57:07.227

这是上面 Castro 代码的简单 2D 版本。它只是在每个 x,y 坐标处绘制平均值。这可以使用 imshow 绘制，但 Castro 的方法可以绘制更整洁的散点图。

```
from matplotlib import pyplot as plt
import numpy as np

# make some x,y points and z data that needs to be averaged and plotted
x = [1,1,1,2,2,2,2,3,4,4,4,4]
y = [1,1,1,2,2,2,2,3,4,4,4,4]
z = [1,1,1,2,2,3,3,4,4,4,5,5]
xbins, ybins = int(max(x)), int(max(y))
rng = [[1, xbins+1], [1, ybins+1]]
bins = [xbins,ybins]

# get the sum of weights and sum of occurrences (their division gives the mean) 
H, xs, ys =np.histogram2d(x, y, weights=z, bins=bins, range=rng) 
count, _, _ =np.histogram2d(x, y, bins=bins, range=rng) 

# get the mean value of each x,y point
count = np.ma.masked_where(count==0,count)
H = np.ma.masked_where(H==0,H)
H/=count

# separate the H matrix into x,y,z arrays (and discard zero values)
points = []
for (i, j),v in np.ndenumerate(H):
    if v: points.append((xs[i], ys[j], v))
points = np.array(points)

# plot the data
fig = plt.figure()
cm = plt.cm.get_cmap('hot')
p = plt.scatter(points[:, 0], points[:, 1], c=points[:, 2], cmap=cm)
plt.colorbar(p).set_label('avg. z value')
plt.grid()
plt.show() 
```

所有重复的 x,y 点现在都减少到一个唯一的集合，并且它们的 z 值已被平均：

![重复 x,y 坐标的平均 z 值](../Images/ecff915d140e63caeed7459dd6a2607a.png)

# ruby-on-rails-3 - has_and_belongs_to_many 到 rails 3 中的同一模型

> ID：14002485
> 
> 赞同：0
> 
> 时间：2012-12-22T11:33:55.850
> 
> 标签：ruby-on-rails-3, has-and-belongs-to-many

我正在尝试与 has_and_belongs_to_many 建立朋友和敌人的联系，因此我创建了以下内容：

```
 create_table :people do |t|
     t.string :name
   end

   create_table "relations", :id => false do |t|
     t.integer "person_a_id", :null => false
     t.integer "person_b_id", :null => false
     t.boolean :friends
   end 
```

我希望完成的第一个阶段是定义 Person: HABTM 关系，然后是定义范围。现在我在 Person 中定义连接时遇到了麻烦，因为 has_and_belongs_to_many 有：foreign_key 和 :association_foreign_key，所以如果 A 是 B 的朋友，B 不是 A 的朋友。我已经搜索了 HABTM 注释，唯一的选择是我发现是手动设置：finder_sql 和：delete_sql。我很确定一定有一个我缺少的优雅解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:07:19.997

鉴于您的模型设置，我认为您正在尝试使用错误的关系。

每当您在关系上有额外的属性（这里是布尔朋友属性）时，使用 has_many :through 更正确。

请参阅[此处的讨论](http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many)

结论是：

> 如果您需要验证、回调或连接模型上的额外属性，您应该使用 has_many :through。

# android - Intellij 12 中的 Google Play 服务库

> ID：14002488
> 
> 赞同：4
> 
> 时间：2012-12-22T11:34:33.137
> 
> 标签：android, intellij-idea

有没有人有在 IntelliJ 中使用 Google Play 服务库项目的经验？

我最近购买了 IntelliJ，想使用 Google Play 服务库（特别是库的映射方面）。在 Eclipse 中，这没有问题，但在 IntelliJ 中，所有对 MapFragment 等的引用都没有得到解决。

我做了以下事情：

1）将Google play模块导入为库项目（在android facet中标记为库项目）

2) 将 google play 库项目标记为我的主应用程序的依赖项

尽管如此，它并没有解决所需的导入。

有人对如何在 IntelliJ android 项目中启用 Google Play 服务库有任何提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:15:13.007

[http://youtrack.jetbrains.com/issue/IDEA-96525](http://youtrack.jetbrains.com/issue/IDEA-96525)

为那里的人们找到了解决方案。

您需要在 src 文件夹中添加一个虚拟类。

您还需要将 google-play-services.jar 作为 jar 依赖项添加到您的模块中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T21:42:58.573

我在 stackoverflow.com 上尝试了很多建议。但是，我能够通过以下方式在 IntelliJ IDEA 12.0.2 中构建和运行该项目

1.  将位于我的 android sdk 目录中的 google-play-services.jar 文件复制到我的 Android 项目中的 ./libs 目录
2.  将项目（例如，在 Mac OS X 上，打开 IDEA 并转到 File -> Import Project...）重新导入 IntelliJ IDEA。

仔细按照向导中的步骤进行操作。您应该能够看到 IntelliJ IDEA 识别 google-play-services.jar 存档（已检查）。这对我有用。问题似乎是一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T15:47:23.693

这里的困惑是您需要将 google play 库添加为 android 库项目，而不是 JAR。您还需要确保导入库项目的副本，而不是直接从 android sdk 文件夹中导入。

在您的 IntelliJ 项目中，在工具/Android 菜单中打开 Android SDK 管理器。

滚动到 SDK Manager 的底部并选择安装 google play sdk。

转到您的 android sdk 目录中的 extras 文件夹，然后将 google-play-services_lib 文件夹复制到您方便的地方

打开您的模块设置 F4，右键单击您的模块并选择添加模块。按照指南从现有来源添加模块。

这样，您已经将 google play android 库项目添加到您的项目中，而不仅仅是 jar。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T11:45:32.343

因此，这样做的方法是从 IDEA 构建 goole-play-services.jar，然后将 jar 文件作为依赖项包含在内。

![这将如下所示](../Images/1421d2dcbae121e0c12af79847356dd0.png)

# uitextview - 如何添加按钮以清除 UITextView？

> ID：14002493
> 
> 赞同：1
> 
> 时间：2012-12-22T11:35:02.463
> 
> 标签：uitextview, xcode4.5

我有一个 UITextView，需要在它下面添加一个 CLEAR 按钮，这样当按下它时它会清除那个 UITextView。

不了解如何连接两个元素或在 ObjC 中创建委托。可以在 VisualBasic 中完成。

谢谢你。

# iphone - 在 UIWebView 中打开 RTFD 文件

> ID：14002494
> 
> 赞同：0
> 
> 时间：2012-12-22T11:35:10.053
> 
> 标签：iphone, ios, uiwebview

我正在为 iPhone 开发一个应用程序。我的项目中有一个名为 Class01.rtfd 的 RFTD 文件。我想在 UIWebView 中打开它。但它不起作用。我的代码如下：

```
NSString *localFilePath = [[NSBundle mainBundle] pathForResource:@"Class01" ofType:@"rtfd"] ;
NSURLRequest *localRequest = [NSURLRequest requestWithURL:
                              [NSURL fileURLWithPath:localFilePath]] ;

[self.webview loadRequest:localRequest] ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:00:05.610

要在 UIWebView 中显示 rtfd 文件，您应该将其压缩为 zip 文件，该文件必须保留两个扩展名，例如：Class01.rtfd.zip（[参考](http://developer.apple.com/library/ios/#qa/qa1630/_index.html#//apple_ref/doc/uid/DTS40008749)）

# matlab - matlab中如何插入坐标？

> ID：14002501
> 
> 赞同：0
> 
> 时间：2012-12-22T11:37:35.647
> 
> 标签：matlab, matrix

假设我有 3 个坐标 a(1,2)、b(3,4) 和 c(5,6)。

> 如何使用“输入”功能插入它们，以便用户可以输入坐标并将输入坐标保存为矩阵形式。

例如 A = 输入（……）；

A = [1,2;3,4;5,6]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:45:38.420

如果你想要一个单行输入，你可以这样做

```
 % // a string ('s') is expected as input;
                            % // it'll be parsed expecting 6 
                            % // real numbers space separated
  A = sscanf( input('','s'), '%f %f %f %f %f %f' ); 
```

你可能想做一个`reshape`

```
 A = reshape(A,2,[])'; 
```

例子

```
 % // {Keyboard input}: 
        1 2 3 4 5 6

 % // returned value

A =
 1     2
 3     4
 5     6 
```

# linux - ELF 可执行文件的起点？

> ID：14002502
> 
> 赞同：3
> 
> 时间：2012-12-22T11:37:40.797
> 
> 标签：linux, disassembly, entry-point

我用 anjuta 在 lubuntu 12.10 上编译了以下 C 程序

```
int main()
{
return 0;
} 
```

文件名为 foobar

然后我打开终端并编写命令

```
ndisasm foobar -b 32 1>asm.txt 
```

（使用 32 位指令选项反汇编 foobar 并将反汇编结果保存到 asm.txt）

我打开 asm.txt 有很多 0x0000 和无法理解的代码。

该指令`jg 0x47(0x7F45) on 0x00000000 and dec esp(0x4C) on 0x00000002` 似乎是 ELF 文件格式签名。（因为十六进制代码 0x454c46 在 ascii 中是 'ELF'）

Linux 可能会将此代码加载到内存中，并且不会跳转到 0x00000000，因为没有可执行代码。

我在这里有问题。

1.  我怎么知道起始地址的地址？
2.  哪些代码可以忽略？（也许很多 0x0000 可以忽略，但还有什么？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T13:28:17.167

即使对于像你这样的最简单的程序，`gcc`也需要链接一些库和一些目标文件（特别是`crt0.o`调用你的`main`和包含`_start`的 ELF 起点）。而且您的二进制文件可能是动态链接到某些`libc.so.6`的，因此需要动态链接器（用于`ldd foobar`查找）。用于`gcc -v`了解`gcc`正在做什么。[objdump](http://linux.about.com/library/cmd/blcmdl1_objdump.htm)有很多有趣的标志或选项。

您可能还想阅读[Assembly Howto](http://tldp.org/HOWTO/Assembly-HOWTO/)、[X86 调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)、[这个问题](https://stackoverflow.com/questions/12224188/x86-64-assembly-conventions-saving-argument-registers)、[X86-64 ABI](http://www.x86-64.org/documentation/abi.pdf)、[这些关于 X86-64 编程](http://web.cecs.pdx.edu/~apt/cs322/x86-64.pdf)的说明等

# jaxb - 使用 XmlElementWrapper 时编组集合

> ID：14002508
> 
> 赞同：2
> 
> 时间：2012-12-22T11:38:12.867
> 
> 标签：jaxb, moxy

我的班级有一个集合，它使用@XmlElementWrapper 将集合包装在一个额外的元素中。

所以，我的班级看起来像这样：

```
class A {
  @XmlElement(name = "bee")
  @XmlElementWrapper
  public List<B> bees;
} 
```

然后我的 XML 看起来像：

```
<a>
  <bees>
    <bee>...</bee>
    <bee>...</bee>
  </bees>
</a> 
```

太好了，这就是我想要的。但是，当我尝试编组为 JSON 时，我得到了这个：

```
{
  "bees": {
    "bee": [
      ....
    ]
  }
} 
```

而且我不希望那里有那个额外的“蜜蜂”键。

在进行这种编组时，是否有可能让 MOXy 忽略 XmlElement 部分？因为我仍然需要名字是“蜜蜂”而不是“蜜蜂”，而且我不想要两者。

我正在使用 MOXy 2.4.1 和 javax.persistence 2.0.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:27:26.513

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**oxm.xml**

您可以使用 MOXy 的外部映射文档为您的 JSON 绑定提供替代映射（请参阅： [http](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html) ://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html ）。

```
<?xml version="1.0"?>
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum14002508">
    <java-types>
        <java-type name="A">
            <java-attributes>
                <xml-element java-attribute="bees" />
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**演示**

在下面的演示代码中，我们将创建两个`JAXBContext`. 第一个是完全建立在我们将用于 XML 的 JAXB 注释之上。第二个是建立在 JAXB 注释之上，并使用 MOXy 的外部映射文件来覆盖类`bees`属性的映射`A`。

```
package forum14002508;

import java.util.*;
import javax.xml.bind.*;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {

        List<B> bees = new ArrayList<B>();
        bees.add(new B());
        bees.add(new B());
        A a = new A();
        a.bees = bees;

        JAXBContext jc1 = JAXBContext.newInstance(A.class);
        Marshaller marshaller1 = jc1.createMarshaller();
        marshaller1.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller1.marshal(a, System.out);

        Map<String, Object> properties = new HashMap<String, Object>(3);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum14002508/oxm.xml");
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc2 = JAXBContext.newInstance(new Class[] {A.class}, properties);
        Marshaller marshaller2 = jc2.createMarshaller();
        marshaller2.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller2.marshal(a, System.out);
    }

} 
```

**输出**

下面是运行与您的用例匹配的演示代码的输出。

```
<a>
   <bees>
      <bee/>
      <bee/>
   </bees>
</a>
{
   "bees" : [ {
   }, {
   } ]
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)
*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

# iphone - 如何取消从 AudioServicesPlaySystemSound 开始的播放声音？

> ID：14002510
> 
> 赞同：7
> 
> 时间：2012-12-22T11:38:33.233
> 
> 标签：iphone, ios, core-audio, audiotoolbox

有没有办法取消、暂停或停止通过调用 AudioServicesPlaySystemSound() 开始播放的声音？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T11:46:02.797

不幸的是你不能——就像名字所暗示的那样，它是为播放用于系统警报的声音而设计的，你不需要控制它们。您可以通过调用来*停止*播放的声音，但这是一个hacky，最好避免。`AudioServicesPlaySystemSound()``AudioServicesDisposeSystemSoundID()`

直接、简单地控制音频播放的最佳选择是使用`AVPlayer`, part of `AVFoundation`- documentation [here](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)。

# asp.net - 无法连接到 SQL Server 数据库

> ID：14002511
> 
> 赞同：5
> 
> 时间：2012-12-22T11:38:37.343
> 
> 标签：asp.net, sql-server

当我单击`Security`ASP.NET 网站管理工具上的选项卡时，我收到此错误。

> “无法连接到 SQL Server 数据库。”。

我正在使用 Visual Studio 2012

```
<configuration>
  <connectionStrings>

    <add name="devices" connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\devices.mdf;Integrated Security=True"
      providerName="System.Data.SqlClient" />
    <add name="users" connectionString="Data Source=(LocalDB)\v11.0;AttachDbfilename=|DataDirectory|\database.mdf;Integrated Security=True"
      providerName="System.Data.SqlClient"/>

  </connectionStrings>

<system.web>

    <roleManager enabled="true" />
    <compilation debug="true" targetFramework="4.5"/>
    <httpRuntime targetFramework="4.5"/>
  </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T00:52:32.090

```
Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\devices.mdf;Integrated Security=True 
```

查看您的数据源。是否`(LocalDB)\v11.0`存在，您可以连接到上述数据库吗？

如果不是这将是原因....

我发现每次为我的网站创建一个包（用于手动部署）时，它都会覆盖我在使用上述数据源创建的包中的连接字符串。

有时这可能会阻止您的新网站启动。（特别是如果它在错误的环境中。:)

[http://www.connectionstrings.com/](http://www.connectionstrings.com/) 这个站点非常适合帮助您为几乎所有数据库创建连接字符串。

# javascript - jquery .serialize() 不包含序列化字符串中的选择列表选定值

> ID：14002512
> 
> 赞同：1
> 
> 时间：2012-12-22T11:38:41.413
> 
> 标签：javascript, jquery

我想使用 jquery 序列化我的 div 部分`.serialize()`。我知道我们只能用这个函数序列化表单。因此，为此我创建了 div 部分的克隆并将其附加到新创建的表单元素中，然后进行序列化。其他输入字段正在序列化，但选择列表值不是（所选值不在序列化字符串中）。我创建了一个 JSFIDDLE ：

[http://jsfiddle.net/mj6Eg/1/](http://jsfiddle.net/mj6Eg/1/)

**html**

```
<div id="serializethis">
<label>Quantity</label>
<select id="quantity" name="Quantity" size="1">
  <option value="1">1</option>
  <option value="5">5</option>
  <option value="25">25</option>
  <option value="50">50</option>
</select>
</div>

<button id="serialize">Serialize</button>​ 
```

**JS**

```
$("#serialize").click(function(){

    var clone = $("#serializethis").clone();
    var form = $("<form />").append(clone);

    alert(form.serialize());

});​ 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T11:46:48.863

当`clone()`-ing 一个元素时，它的选定值会丢失。所以你的代码不起作用。最简单的解决方案是始终围绕元素保留 a `<form>`（除非您使用无论如何都需要的 HTML5）。

另一种解决方案是将您的元素临时包装在一个表单中：

```
$("#serialize").click(function() {
    var data = $("#serializethis").wrap('<form>').parent().serialize();
    alert(data);
    $("#serializethis").unwrap('form');
}); 
```

# android - android：停止之前的CountDownTimer

> ID：14002515
> 
> 赞同：0
> 
> 时间：2012-12-22T11:38:49.113
> 
> 标签：android, handler, countdowntimer

我现在正在制作一个游戏，首先玩家会看到按钮的颜色，然后 5 秒后所有按钮的颜色都将变为空白，用户必须选择具有相同颜色的按钮才能获胜。

对于5秒的等待，我使用了`handler`等待执行，同时通过 显示5秒的倒计时，`CountDownTimer`让玩家知道还剩多少时间。

如果用户放弃了当前的游戏，他可以点击重启按钮重新开始另一个游戏。

一切运行良好，当玩家点击重启按钮时，程序也知道需要等待 5 秒才能清除所有按钮的颜色。

## 问题：

这是关于5秒倒计时的显示。如果用户开始 1 场比赛，倒计时开始计数。如果用户再次按下重启按钮，例如3秒后，原来的倒计时不会终止，而是会同时显示两个倒计时。我想问如果玩家按下重启按钮，如何终止之前的倒计时。

## 代码：

```
protected void onCreate(Bundle savedInstanceState) 
{
        ...other actions

    restart.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            handler1.removeCallbacks(txtClearRun);
            SetNewQ();
        }
    });

    SetNewQ();      

} // end onCreate

private void SetNewQ() 
{       
    MyCount5sec counter5sec = new MyCount5sec(5000,1000);
    counter5sec.start();
    ...other actions below
}   

   public class MyCount5sec extends CountDownTimer
   {
       public MyCount5sec(long millisInFuture, long countDownInterval) {super(millisInFuture, countDownInterval);}
       @Override
       public void onFinish() 
       {
           ButtonRemainTime= (Button) findViewById(R.id.button_remaintime); 
           ButtonRemainTime.setText("Add oil!!");
           // game then start by blanking out all the colors
       }
       @Override
       public void onTick(long millisUntilFinished) 
       {
           ButtonRemainTime= (Button) findViewById(R.id.button_remaintime); 
           ButtonRemainTime.setText("" + millisUntilFinished/1000);
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:53:06.123

我知道你的问题是什么，但我会亲自通过以下方式调整我的设置。如果您的`CountDownTimer`类实现的其他内容不多，您实际上可以声明类 a`field`并一举实例化它。

```
protected void onCreate(Bundle savedInstanceState) 
{
        ...other actions

    restart.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            handler1.removeCallbacks(txtClearRun);
            MyCount5sec.start(); // ----------changed this line
        }
    });

    MyCount5sec.start(); // ---------- changed this line

} // end onCreate

CountDownTimer MyCount5sec = new CountDownTimer(5000,1000) {

    @Override
    public void onTick(long millisUntilFinished) {
           ButtonRemainTime= (Button) findViewById(R.id.button_remaintime); 
           ButtonRemainTime.setText("" + millisUntilFinished/1000);         
    }

    @Override
    public void onFinish() {
           ButtonRemainTime= (Button) findViewById(R.id.button_remaintime); 
           ButtonRemainTime.setText("Add oil!!");
           // game then start by blanking out all the colors            
    }
}; 
```

The benefit of doing it like this is that you'd always be referring to the same object. you wouldn't have to make a new timer on each `onClick` and then manage cancelling the other one. In fact, you wouldn't even have to `cancel` at all because calling `start` on the timer early on this same timer object will just restart it.

# jquery - 将 div 高度设置为手动更改之前的高度

> ID：14002522
> 
> 赞同：1
> 
> 时间：2012-12-22T11:40:36.513
> 
> 标签：jquery, html, css

我做了一个例子：http: [//jsfiddle.net/YfV7G/4/](http://jsfiddle.net/YfV7G/4/)

这是一个像这样的div

```
<div id="container">
    <h2>The header</h2>
    <a href="#">One of dynamic ammount of links</a>
    <a href="#">One of dynamic ammount of links</a>
    <a href="#">One of dynamic ammount of links</a>
    <a href="#">One of dynamic ammount of links</a>
    <a href="#">One of dynamic ammount of links</a>
</div> 
```

我通过以下方式更改高度：

```
$('#container').animate({
    height: '5px'
}, 1000, null);​ 
```

CSS是`overflow:hidden`

我将高度更改为仅显示 div 的最顶部。

但是我应该设置什么高度才能让它回来并显示全部内容？

我能想到的一种方法是在缩小之前保存它。还有其他选择吗？（如果在保存高度后内容发生变化，这种方式就不会发生，它可能会）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:52:17.347

使用`auto`值`height`

```
$('#container').height( 'auto' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T11:56:22.730

我找到了一种可以获得相同效果的方法，即使用 jQuerys`slideUp()`而`slideDown()` 不是“手动”进行。

然后它会是这样的：http: [//jsfiddle.net/YfV7G/9/](http://jsfiddle.net/YfV7G/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T05:58:10.617

您可以将初始高度存储在 rel 属性中并稍后检索它。像这样的东西：

```
var container = $("#container");

container.attr('rel', container.height()).animate({
    height: '40px'
}, 1000, null);

container.hover(
  function() {
    $(this).height(container.attr('rel'));
  },
  function() {
    $(this).animate({
      height: '40px'
    }, 1000, null);
  }
); 
```

示例：http: [//jsfiddle.net/kvZ26/](http://jsfiddle.net/kvZ26/)

**编辑：**
这是更新后的答案，应该适用于动态生成的内容。根据您`.outerHeight()`在检索值时可能需要使用的样式。

```
var container = $("#container");

container.attr('rel', container.height()).animate({
    height: '40px'
}, 1000, null);

container.hover(
  function() {
    var height = $("#container > h2").height() + ($("#container > a").height() * $("#container > a").length);
    $(this).height(height);
  },
  function() {
    $(this).animate({
      height: '40px'
    }, 1000, null);
  }
); 
```

（您可能需要对其进行调整，以便不需要复制容器 ID）。

示例：http: [//jsfiddle.net/xDCsY/1/](http://jsfiddle.net/xDCsY/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-22T11:51:31.440

```
height:initial
overflow: visible 
```

upd：在您的示例中添加“显示”按钮，[http://jsfiddle.net/YfV7G/6/](http://jsfiddle.net/YfV7G/6/)

# text - VHDL - 将 std_logic_vector 移动 8 位

> ID：14002523
> 
> 赞同：0
> 
> 时间：2012-12-22T11:40:56.823
> 
> 标签：text, scroll, vhdl, clock, shift

现在我已经设法在写作时移动了我的文本，我想实现另一个功能，每秒滚动文本 1 个数字。因此，例如，我将从键盘写入“STACK”，然后当我切换一个引脚时，它将开始浮动在七段显示器上。正如我所料，我收到了多个时钟错误。现在，我用计数器克服了这个错误，但文本没有正确滚动，随机字符出现在随机位置。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
use IEEE.numeric_std.all;

entity my_shifter is
        port(clk      : in  std_logic;
            doShift : in std_logic;--shift mode
            Scan_Dav : in  std_logic;--from keyboard module, new data
            Data_in  : in  std_logic_vector (7 downto 0);--scancode of the key pressed
            O1 : out std_logic_vector(7 downto 0);
            O2 : out std_logic_vector(7 downto 0);
            O3 : out std_logic_vector(7 downto 0);
            O4 : out std_logic_vector(7 downto 0)
            );
end my_shifter;

architecture bhv of my_shifter is

signal bytes : std_logic_vector(63 downto 0):=(others => '0');
signal Scan_Dav_Sync: std_logic_vector(1 downto 0):="00";
signal Previous_Scan_Dav: std_logic:='0';
signal shift : std_logic:='0';
signal flag : std_logic:='0';
signal first_letter: std_logic_vector(7 downto 0):="00000000";
begin
    process(clk)
        variable var:integer range 0 to 50000000 :=0;
        begin
            if rising_edge(clk) then
                if var = 50000000 then
                    var:=0;
                    flag<='0';
                    shift <= '1';
                else
                    flag <= '1';
                    var:=var+1;
                    shift <= '0';
                end if;
            end if;
    end process;

    process (clk, doShift) 
        begin
            case doShift is

                when '0' =>
                    if rising_edge(clk) then
                        Scan_Dav_Sync(0) <= Scan_Dav;
                        Scan_Dav_Sync(1) <= Scan_Dav_Sync(0);
                        Previous_Scan_Dav <= Scan_Dav_Sync(1);
                        if (Previous_Scan_Dav = '0') and (Scan_Dav_Sync(1) = '1') then
                            bytes <= bytes (bytes'high-8 downto 0) & Data_in;
                        end if;
                    end if;--till here it works fine.

                when '1' => -- this is where it messes up
                    if (shift = '1' and flag = '0' ) then
                        first_letter <= bytes(bytes'high downto bytes'high-7);
                        bytes <= bytes (bytes'high-8 downto 0) & first_letter;
                    end if; 

                when others =>--ignore here
                    bytes <= bytes (bytes'high-8 downto 0) & Data_in;

            end case;
    end process;
    O1 <= bytes(31 downto 24);
    O2 <= bytes(23 downto 16);
    O3 <= bytes(15 downto 8);
    O4 <= bytes(7 downto 0);
end bhv; 
```

我想知道如何克服这个问题？错误是什么或在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:30:28.287

如果你让你的第二个进程成为一个理智的时钟进程，你很可能可以摆脱这个工作。

就像是：

```
process (clk) 
begin
    if rising_edge(clk) then
        case doShift is
            when '0' =>
                Scan_Dav_Sync(0) <= Scan_Dav;
                Scan_Dav_Sync(1) <= Scan_Dav_Sync(0);
                Previous_Scan_Dav <= Scan_Dav_Sync(1);
                if (Previous_Scan_Dav = '0') and (Scan_Dav_Sync(1) = '1') then
                    bytes <= bytes (bytes'high-8 downto 0) & Data_in;
                end if;

            when '1' =>
                if (shift = '1' and flag = '0' ) then
                    first_letter <= bytes(bytes'high downto bytes'high-7);
                    bytes <= bytes (bytes'high-8 downto 0) & first_letter;
                end if; 

            when others =>
                bytes <= bytes (bytes'high-8 downto 0) & Data_in;

        end case;
    end if;
end process; 
```

# javascript - CSS Negate：在隐藏元素中显示特定元素？

> ID：14002528
> 
> 赞同：5
> 
> 时间：2012-12-22T11:41:18.363
> 
> 标签：javascript, html, css

假设我们有一个与此类似的元素

```
<div id="navigation">
   <div class="nav-block-1">....</div>
   <div class="nav-block-2">....</div>
   This is the offer
   <a href="#"> Report </a>
</div> 
```

现在我想隐藏所有元素，包括 textelements 但不隐藏`nav-block-2`，那么有没有办法可以做到这一点？像使用 CSS 否定之类的东西？

我尝试使用

```
#navigation :not(.nav-block-2) {
   display:none;
} 
```

但这似乎甚至否定了 nav-block-2 中的元素？我在这里做错了吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:07:37.933

也许不是你想要的，但这就是我要做的。

```
#navigation * {
    display:none;
}
#navigation a {
    display:inline;
} 
```

编辑：正如您在问题的评论中所说，我认为很难做到 :not 当文本周围没有标签时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:28:55.867

用这个：

```
#navigation > *:not(.nav-block-2) {
   display:none;
} 
```

但是，您不能隐藏单个文本节点。您需要将“这是报价”放在一个段落中或至少在一个`<span>`标签中以隐藏它，或者您需要隐藏`#navigation`不可避免包含`.nav-block-2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:04:20.380

尝试这个

```
#navigation div:not(.nav-block-2) {
   display:none;
}

<div id="navigation">
   <div class="nav-block-1">Div 1</div>
   <div class="nav-block-2">Div 2</div>
    This is the offer
   <a href="#"> Report </a>
</div> 
```

# javascript - 查找特定文本并获取完整文本

> ID：14002532
> 
> 赞同：0
> 
> 时间：2012-12-22T11:42:15.777
> 
> 标签：javascript, jquery, find

我正在使用代理来抓取此 url 的数据：[CNN 文章](http://edition.cnn.com/2012/12/22/world/africa/egypt-election/index.html?hpt=hp_t1)

我想获得整篇文章的文本（标题不一定）。所以我尝试了这个：

```
$(data).find("div:contains('Across the river from Cairo')"); 
```

这会找到这段文字，但是当我用它做我的事情时，`myThing = $(this).text();`它似乎得到的不仅仅是文章。这可能与 HTML 的构造方式有关。如果我查看源代码，我会看到文章文本被限制在`p`但是将`div:contains`in 更改为`p:contains`只会让我获得前几行（显然）

所以我的问题是，无论它是 HTML 结构，我如何获取文章文本。我正在寻找会说的东西（代码）：

```
find.('Across the river from Cairo') and get this text and all the text underneath this text(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:21:19.840

我使用 selector 从那篇文章中得到了想要的结果`p.cnn_storypgraphtxt`。要获取整篇文章，您可以使用`$("p.cnn_storypgraphtxt").text()`或

```
$("p.cnn_storypgraphtxt").map(function(){return $(this).text;}).get().join("\n"); 
```

* * *

为了获取遵循某个表达式的文本，您可以使用`.last()`获取最后选择的节点（即 DOM 中的最低节点），然后`.nextAll()`喜欢

```
$(":contains('Across the river from Cairo')").last().nextAll().text() 
```

但这将包含很多不需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:45:34.743

尝试使用

```
$someString = $(data).find("div:contains('Across the river from Cairo')").html(); 
```

使用该字符串进行操作或其他任何操作。

# exception - Idea 12/Haxe2.10(win)：为什么我尝试构建项目时出现 AssertionError: Wrong node？

> ID：14002539
> 
> 赞同：1
> 
> 时间：2012-12-22T11:42:51.267
> 
> 标签：exception, intellij-idea, haxe

我的操作系统是`Win7 64 Enterprise`.

我刚刚安装`idea12 (ultimate)`、添加`Haxe plugin (0.5.6)`、安装`haxe sdk 2.10win`，还尝试使用 fdt 附带的 2.09win。

当我尝试使用 Idea 构建项目时，出现以下异常：

```
Internal error: (java.util.concurrent.ExecutionException) java.lang.AssertionError: Wrong node: [null]
java.util.concurrent.ExecutionException: java.lang.AssertionError: Wrong node: [null]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader.a(JpsProjectLoader.java:231)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader.a(JpsProjectLoader.java:105)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:81)
    at org.jetbrains.jps.cmdline.JpsModelLoaderImpl.loadModel(JpsModelLoaderImpl.java:41)
    at org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:60)
    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:169)
    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:94)
    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:105)
    at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:26)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.AssertionError: Wrong node: [null]
    at com.intellij.util.xmlb.BeanBinding._deserializeInto(BeanBinding.java:133)
    at com.intellij.util.xmlb.BeanBinding.deserialize(BeanBinding.java:120)
    at com.intellij.util.xmlb.XmlSerializer.deserialize(XmlSerializer.java:58)
    at org.jetbrains.jps.haxe.model.module.JpsHaxeModuleType$1.loadProperties(JpsHaxeModuleType.java:26)
    at org.jetbrains.jps.haxe.model.module.JpsHaxeModuleType$1.loadProperties(JpsHaxeModuleType.java:23)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader.a(JpsProjectLoader.java:294)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader.a(JpsProjectLoader.java:255)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader.access$000(JpsProjectLoader.java:44)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader$2.call(JpsProjectLoader.java:225)
    at org.jetbrains.jps.model.serialization.JpsProjectLoader$2.call(JpsProjectLoader.java:222)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at com.intellij.util.concurrency.BoundedTaskExecutor$1.run(BoundedTaskExecutor.java:35)
    ... 7 more 
```

这个问题不能在 Haxe sdk 中，因为它在 fdt 下编译项目很好（但是，基于 sdk 的自动完成不起作用，但我认为它与想法问题无关）。其他项目类型（如java）在idea上运行良好。

那么，我该如何解决这个问题呢？这个例外是什么意思？

*更新*：安装`idea 12.01`在`WIN7 32 Professional`，创建新项目 - 发生同样的异常。因此，我得出结论，此问题与 32/64 位操作系统或 Java 无关。此问题并非特定于idea 12.00 版。

由idea创建的新项目既不包含`.hx`类也不包含任何构建配置文件（如`.hxml`）可能很重要。我尝试为它创建 .hx 主类和 .hxml 构建，但想法仍然没有构建项目。

将运行配置更改为这些文件之一或 .swf 结果（手动构建）或 cmd 无济于事（`run`选项仍然不可用）。

我也尝试过用ant task构建，它成功了，但是当我从菜单中选择这个选项时，idea仍然无法构建项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:20:25.007

该问题将在 IDEA 12.0.2 中修复，感谢报告。作为一种解决方法，您可以关闭 File | 中的“使用外部构建”选项。设置 | 编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T00:55:16.940

我无法重现您的错误。请尝试通常的重新安装，再次删除/添加 Haxe SDK，使缓存无效并重新启动（从文件菜单）。

如果您可以通过全新安装重现此问题，Idea 支持的最佳地点是他们的论坛或在他们的跟踪器上创建新问题[http://youtrack.jetbrains.com/issues/IDEA?p=0&q=haxe](http://youtrack.jetbrains.com/issues/IDEA?p=0&q=haxe)

他们过去对我很有帮助。

# javascript - 页面加载时 Javascript 字符串比较失败

> ID：14002540
> 
> 赞同：0
> 
> 时间：2012-12-22T11:43:11.347
> 
> 标签：javascript, string, match, onload

我安装了一个论坛站点，在其中添加了一个自动调整大小的模块，该模块在页面加载时调整所有图像的大小

```
<script>

    window.onload = resizeimg;

    function resizeimg()
    {
        if (document.getElementsByTagName)
        {
            for (i=0; i<document.getElementsByTagName('img').length; i++)
            {
                var check = 0;
                var str = 'http://sariylakirmizi.net/forum/styles/milky_way_red/imageset/sitelogo_small.png';

                im = document.getElementsByTagName('img')[i];
                var n =str.match(/sitelogo/gi);
                if(n == null)
                    check = 1;

                if (im.width > 600 &&  im.src !=str )
                {
                    im.style.width = '600px';

                    eval("pop" + String(i) + " = new Function(\"pop = window.open('" + im.src + "','phpbbegypt','fullscale','width=400,height=400,scrollbars=1,resizable=1'); pop.focus();\")");

                    eval("im.onclick = pop" + String(i) + ";");

                    if (document.all) im.style.cursor = 'hand';

                    if (!document.all) im.style.cursor = 'pointer';

                    im.title=im.src;
                    im.alt=check;
                }
            }
        }
    }

</script> 
```

现在我要排除我的标题徽标，以便它不会因为我引入字符串比较并硬编码我的徽标 URL 而调整大小，我不明白为什么检查失败并且我的徽标仍然调整大小；我还尝试了其他一些方法，例如引入检查变量匹配功能是否有效，但显然它不起作用，你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:56:00.197

```
window.onload = resizeimg;

function resizeimg() {
    if (document.getElementsByTagName) {
        var imgs = document.getElementsByTagName('img');
        for (i=0; i<imgs.length; i++) {
           var im = imgs[i];
           if (im.width > 600 && !im.src.match(/sitelogo/)) {
               im.style.width = '600px';
               eval("pop" + String(i) + " = new Function(\"pop = window.open('" + im.src + "','phpbbegypt','fullscale','width=400,height=400,scrollbars=1,resizable=1'); pop.focus();\")");
               eval("im.onclick = pop" + String(i) + ";");
               im.style.cursor = (document.all) ? 'hand' : 'pointer';
               im.title = im.src;
            }
        }
    }
} 
```

# php - 执行方法始终设置为 true

> ID：14002541
> 
> 赞同：2
> 
> 时间：2012-12-22T11:43:14.340
> 
> 标签：php, pdo, execute

我有一个 php 脚本的问题。

我想从我的数据库中删除一条记录，所以我使用了该`execute()`方法，当我作为参数传递的代码没有记录时，它应该返回 false，但是尽管没有任何记录与该代码，它总是返回 true。

这是脚本：

```
<?php

include('connexion.php');

//Récuperation des valeurs 
$code = $_POST['code'];

if($code)
{
    //Suppression de l'enregistrment avec le code = $code à m'aide d'une requête préparée
    $req = $bdd->prepare('Delete from chambre where code_ch = ?');
    $rowDeleted = $req->execute(array($code));
    //Ou bien : mysql_query('Delete from chambre where code_ch = '.$code);

    $supprimer = ($rowDeleted == true) ? 'OK' : 'notfound';

}
else
{
    $supprimer = 'empty';
}

header('Location: supprimer.php?supprimer='.$supprimer.'&code='.$code);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:51:11.320

PHP PDO 对象将（正确地）返回一个成功/真值以删除零行。解决此问题的一种方法是使用类似`$pdo->rowCount()`查看 PDO 影响的行数。如果您尝试删除行，则应考虑结果 0 from`$pdo->rowCount()`表示您没有成功删除您想要删除的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:02:37.863

你可能很困惑。执行文档说：

```
Returns TRUE on success or FALSE on failure. 
```

它没有说明行是否被删除。如果您想要删除的行数，您可能想要[受影响的行。](http://php.net/manual/en/mysqli.affected-rows.php)但是即使那样，依赖它也可能是一个坏主意。例如，如果两个删除同一行的调用同时发生怎么办？

您不应该关心 delete 实际上删除了一行，只是您尝试删除的行不再存在。

# php - 在禁止时间为“日期时间”的 mysql 数据库中实施永久禁止。如何？

> ID：14002543
> 
> 赞同：2
> 
> 时间：2012-12-22T11:43:21.687
> 
> 标签：php, mysql, datetime, permanent

我有一个 mysql 列被禁止。它的类型是“日期时间”。我将如何实施永久禁令？（我已经实施了一个基本的禁令系统，管理员/国防部定义了时间）。我应该只创建一个名为“permabanned”的布尔列并检查它的真假吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T11:51:12.227

前提`banneduntil`是在名为 的表中`bans`：

将`banneduntil`列设置为`NULL`。这正确地反映了永久禁令的含义，因为它是无限期的禁令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T11:51:01.113

对此的答案取决于表中包含的表示“未禁止”的内容？

假设空/零（0000-00-00 00:00:00）那么我建议最大日期时间（9999-12-31 23:59:59）。

虽然这会带来另一个 Y2K（Y10K？任何人）的风险，但我怀疑 9999 年会有更大的问题，假设那时您的代码仍在运行。

# ruby-on-rails - 回形针使用 instance_write 重命名 stringio.txt

> ID：14002546
> 
> 赞同：2
> 
> 时间：2012-12-22T11:44:38.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, omniauth

我正在使用omniauth-facebook 并尝试使用回形针显示个人资料图片。这是我用来获取图片到我的用户模型的代码

```
def picture_from_url(url)
    self.profile_pic =open(url)
end 
```

但是，它始终保存为 stringio.txt。所以搜索这个行为我发现回形针允许回调所以我在用户模型中编写了以下方法来重命名文件名

```
def rename_profile_pic
    self.profile_pic.instance_write :filename, "#{self.username}.jpg"
end 
```

并将其传递给回调

```
before_post_process :rename_profile_pic 
```

但这似乎没有帮助。

有什么想法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-17T20:37:25.783

如果您还没有找到解决方案：

```
data = StringIO.new(file_data)
data.class.class_eval { attr_accessor :original_filename, :content_type }

data.content_type = content_type
data.original_filename = file_name

object.attachment = data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:36:01.987

使用以下方法将您的 stringio.txt 转换为文件：

```
file = StringIO.new(obj)
file.original_filename = "#{self.username}.jpg" 
```

然后将您的文件分配给`profile_pic`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-20T11:18:27.193

我从字符串创建文件的解决方案：

```
class FileIO < StringIO
  def initialize(content:, filename:)
    super(content)
    @original_filename = filename
  end

  attr_reader :original_filename
end

FileIO.new(content: obj, filename: "#{username}.jpg") 
```

这帮助我解决了保存文件时出现 Carrierwave 错误的问题：

> *TypeError：没有将 nil 隐式转换为 String*

# python - 如何在鼠标单击时获取鼠标位置 - Python Gtk

> ID：14002549
> 
> 赞同：1
> 
> 时间：2012-12-22T11:44:59.490
> 
> 标签：python, gtk, pygtk

我正在写一个关于图论的学校项目。我需要实现一些图形算法（Dijkstra's、Prim's 等）。之后，我需要在同一个程序中可视化它们。

我可以在绘图区域内绘制矩形和线条以可视化图形。但我需要处理鼠标事件以使其具有交互性。

例如，当用户想向图形添加一个顶点时，我需要鼠标的位置。

我的母语不是英语。我无法很好地解释我的问题。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T12:25:22.777

使用一个`gtk.EventBox`和事件的`x`和`y`字段：

```
import gtk

win  = gtk.Window ()
box  = gtk.EventBox ()
area = gtk.DrawingArea ()

def onclick (box, event):
   print event.x, event.y

box.connect ('button-press-event', onclick)

box.add (area)
win.add (box)
win.show_all ()
win.connect ('destroy', lambda *x: gtk.main_quit ())

gtk.main () 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-17T14:35:31.050

这也适用于我使用 vala。我确实使用了 Gtk.Layout 而不是 Gtk.DrawingArea。此示例还显示了如何检测双击。

```
public class MyApp : Gtk.Application {
    public MyApp () {
    }

    protected override void activate () {

        var window = new Gtk.Window ();
        window.set_default_size (300, 400);

        var layout = new Gtk.Layout();
        layout.add (new Gtk.Label ("hello"));

        var eventbox = new Gtk.EventBox();
        eventbox.button_press_event.connect ((event) => {
            var type = event.type;
            string position = event.x.to_string() + "; " + event.y.to_string();
            if (type == Gdk.EventType.2BUTTON_PRESS) {
                print (position + " (Double click)" + "\n");
                return true;
            }
            print (position + "\n");
            return true;
        });
        eventbox.add (layout);
        window.add (eventbox);
        window.show_all ();

        add_window (window);

    }

    public static int main (string[] args) {
        return new MyApp ().run (args);
    }
} 
```

编译代码`valac --pkg gtk+-3.0 <file>.vala`

执行`./<file>`

# html - 如何通过css实现以下图形

> ID：14002553
> 
> 赞同：2
> 
> 时间：2012-12-22T11:45:22.580
> 
> 标签：html, css

我为自己设定了一个挑战，即在不使用单个图像的情况下开发网站。我将主要使用图标字体，但对于这个粒子图形，我认为我可以使用 div 或其他元素，而不是通过 css 设置样式，例如给边框或其他东西......但我发现它不像我那么容易思想，我无法实现。

这是我需要得到的最终结果：

![在此处输入图像描述](../Images/417f6ef21a512a54caa06c353de046f3.png)

我对对角线感兴趣，忽略背景。有没有办法在 html 或 css 的帮助下复制这些行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:06:37.060

您可以使用 css 执行您所要求的操作`background-image: repeating-linear-gradient()`

Lea Verou 有一个很棒的画廊：[http ://lea.verou.me/css3patterns/](http://lea.verou.me/css3patterns/)

您可以修改[对角条纹](http://lea.verou.me/css3patterns/#diagonal-stripes)图案并获得您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:52:16.893

试试这个， [http://www.patternify.com/](http://www.patternify.com/) 你可以在这里制作这样的图案，并将其转换为 CSS 以用于您的背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:41:29.620

`Hope this helps you get started..!!` [小提琴演示](http://jsfiddle.net/63hSw/1/)在这里..

HTML

```
<body>      
        <div class="myDiv"></div>        
        <div class="myDiv"></div>
        <div class="myDiv"></div>        
        <div class="myDiv"></div>        
        <div class="myDiv"></div>
        <div class="myDiv"></div>        
        <div class="myDiv"></div>
        <div class="myDiv"></div>                
</body>​ 
```

CSS

```
.myDiv {
background-color: none;
border: solid 2px #AAA;
margin: 30px;
height: 5px;
-webkit-transform: rotateZ(115deg); // Chrome
-moz-transform: rotateZ(115deg) // Mozilla Firefox
} 
```

# jquery - 通过拖动其左/上边框来调整 div 的高度/宽度而不使用 jQuery 可拖动？

> ID：14002556
> 
> 赞同：3
> 
> 时间：2012-12-22T11:45:54.093
> 
> 标签：jquery, html

我一直在努力实现这一目标！我们不想要额外的依赖，因此不使用可拖动的 UI。无论我尝试什么都在这里：http: [//jsfiddle.net/wSTcJ/](http://jsfiddle.net/wSTcJ/)

```
<div id="cont">
    <div id="test">

    </div>
    <div id="test2">

    </div>
    <div id="drag">

    </div>
</div> 
```

jQuery 代码在 Fiddle 中。

第一个 div 在第二个下面。第二个的宽度保持为0，现在当我拖动拖动条时，我想调整这个div的宽度，显示它的内容，从而与第一个的内容重叠。我的代码允许我拖动，但一段时间后停止并且不会从右向左拖动！

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T12:28:02.400

[http://jsfiddle.net/wSTcJ/2/](http://jsfiddle.net/wSTcJ/2/)

我假设你想要一个不同的栏来调整垂直大小。

我所做的更改的一些注释：

*   `mousemove`并且`mouseup`应该绑定到父元素，通常是`document`. JavaScript 没有任何类型的捕获鼠标（如 WPF 中的 CaptureMouse()），这意味着如果用户移动鼠标过快并离开您的元素，那么您的鼠标事件将停止被事件处理程序捕获。通过绑定，`document`您可以确保始终捕获页面中的鼠标事件。
*   在 中引用您的可拖动对象`mousedown`有助于保持理智。
*   如果要调整元素的大小，还必须更改元素`width`。
*   如果您不取消绑定添加的`mouseup`绑定`mousemove`，它们可能会被添加多次，然后触发多次。
*   不需要`drag = true`，因为`mousemove`当用户不拖动时，事件根本不应该存在。
*   为了让背景在调整大小后继续填充您的元素，我在 CSS 中将其更改`width`为`height`100%。

大多数可拖动的 div 被赋予绝对定位而不是相对定位。更改此设置还需要对代码进行一些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:22:38.573

我采用了您的代码并以这种方式解决了它：http: [//jsfiddle.net/bukart/wSTcJ/1/](http://jsfiddle.net/bukart/wSTcJ/1/)

您在方法的逻辑和使用方面遇到了一些问题。

```
$( function() {

    $( '#drag' ).each( function() {

        var $drag = $( this );

        $drag.parent().css( {
            'margin-left'      : $drag.parent().offset().left + 'px'
        } );

        $drag.on( 'mousedown', function( ev ) {
            var $this = $( this );
            var $parent = $this.parent();
            var poffs = $parent.position();
            var pwidth = $parent.width();

            var x = ev.pageX;
            var y = ev.pageY;

            $this.parent();

            $( document ).on( 'mousemove.dragging', function( ev ) {
                var mx = ev.pageX;
                var my = ev.pageY;

                var rx = mx - x;
                var ry = my - y;

                $parent.css( {
                    'left'       : (poffs.left + rx) + 'px',
                    'width'      : (pwidth - rx) + 'px'
                } );

            } ).on( 'mouseup.dragging mouseleave.draggign', function( ev) {
                $( document ).off( '.dragging' );
            } );

        } );

    } );

} );

​ 
```

# java - 在 JSON 对象中解析 JSON 对象

> ID：14002564
> 
> 赞同：0
> 
> 时间：2012-12-22T11:47:28.273
> 
> 标签：java, android, json

我有一个 JSON 文件，其中包含一组项目对象：

```
{
  "item": [
    {
      "title": "TitleA",
      "link": "http://www.abc.html?partner=rss&emc=rss",
      "guid": {
        "-isPermaLink": "true",
        "#text": "www.abc.html"
      },
      "atom:link": {
        "-rel": "standout",
        "-href": "http://www.abc.html?partner=rss&emc=rss"
      },
      "media:content": {
        "-url": "standard.jpg",
        "-medium": "image",
        "-height": "75",
        "-width": "75"
      },
      "media:description": "This is the description.",
      "media:credit": "Reuters",
      "description": "In depth description",
      "dc:creator": "By test creator",
      "pubDate": "Sun, 21 Oct 2012 11:29:12 GMT",
      "category": "World"

    },
    {
      "title": "TitleB",
      "link": "http://www.abc.html?partner=rss&emc=rss",
      "guid": {
        "-isPermaLink": "true",
        "#text": "www.abc.html"
      },
      "atom:link": {
        "-rel": "standout",
        "-href": "http://www.abc.html?partner=rss&emc=rss"
      },
      "media:content": {
        "-url": "standard.jpg",
        "-medium": "image",
        "-height": "75",
        "-width": "75"
      },
      "media:description": "This is the description.",
      "media:credit": "Reuters",
      "description": "In depth description",
      "dc:creator": "By test creator",
      "pubDate": "Sun, 21 Oct 2012 11:29:12 GMT",
      "category": "World"

    }
    ]
} 
```

现在我知道如何获取“标题”，但我不知道如何访问“媒体：内容”中的“-url”，因为它似乎是 Item 对象中的 JSON 对象。我将如何获取此值并将其分配给我的 Item 类中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:04:32.903

尝试 `"-url"`从`"media:content"`当前的 json 字符串中获取：

```
JSONObject jsonObject = new JSONObject("Your JSON STRING HERE");

JSONArray  jsonArray =jsonObject.getJSONArray("item");

 for (int i = 0; i < jsonArray.length(); i++) {
    JSONObject jsonObjectitem=
                           jsonArray.getJSONObject(i);                                                                            

  // get title or link here
     String strtitle=jsonObjectitem.getString("title");
      //....get other values in same way 

   // get media:content json object
  JSONObject jsonObjectmediacontent = 
                       jsonObjectitem.getJSONObject("media:content");

   // get url,medium,...

     String strurl=jsonObjectmediacontent.getString("-url"); 
     //....get other values in same way                                   
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T12:55:09.343

编写下面的代码来解析`-url`字符串，它将解决您的问题。

```
JSONObject mMainJsonObj = new JSONObject("Pass Json Response String Here");
JSONArray  mItemJsonArray = mMainJsonObj.getJSONArray("item");

for (int i = 0; i < mItemJsonArray.length(); i++) {
    JSONObject mJsonObj1 = mItemJsonArray.getJSONObject(i);
    String mTitle = mJsonObj1.getString("title");
    String mLink = mJsonObj1.getString("link");

    JSONObject mJsonObjGuid = mJsonObj1.getJSONObject("guid");
    String mIsPermLink = mJsonObjGuid.getString("-isPermaLink");
    String mText = mJsonObjGuid.getString("#text");

    JSONObject mJsonObjAtomLink = mJsonObj1.getJSONObject("atom:link");
    String mRel = mJsonObjAtomLink.getString("-rel");
    String mHref = mJsonObjAtomLink.getString("-href");

    JSONObject mJsonObjMediaContent = mJsonObj1.getJSONObject("media:content");
    String mUrl = mJsonObjMediaContent.getString("-url");
    String mMedium = mJsonObjMediaContent.getString("-medium");
    String mHeight = mJsonObjMediaContent.getString("-height");
    String mWidth = mJsonObjMediaContent.getString("-width");
} 
```

有关更多信息，请参见下面的链接。

[Json 解析示例](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T12:41:20.327

`JsonNode`杰克逊的解决方案：使用 an将您的 JSON 读入`ObjectMapper`并检索您的值，如下所示：

```
// Since JsonNode implements Iterable of itself and cycles through array elements,
// this works
for (final JsonNode element: node)
    doSomethingWith(element.get("media:content").get("-url")); 
```

# c++ - 返回类内结构

> ID：14002565
> 
> 赞同：2
> 
> 时间：2012-12-22T11:47:35.060
> 
> 标签：c++, class, templates

我有一个具有以下结构的模板类

```
//CFoo.hpp (header file)
template <typename T>
class CFoo {
        struct SFoo {
            T *ptr;
            /* rest is irrelevant */
        } *foo;

    public:
    /* omitting irrelevant parts */
    SFoo* get();
}; 
```

现在，如果我在头文件中实现方法**SFoo* get()一切正常。**但是，如果我将声明和定义分开，我的代码将停止处理以下编译错误。

```
//CFoo.cpp (source code, example 1)
/* omitting irrelevant parts */
template <typename T>
SFoo* CFoo<T>::get() { return foo; } //ERROR HERE 
```

错误：`<where-is-the-error>: error: ‘SFoo’ does not name a type`

```
//CFoo.cpp (source code, example 2)
/* omitting irrelevant parts */
template <typename T>
CFoo<T>::SFoo* CFoo<T>::get() { return foo; } //ERROR HERE 
```

错误：`<where-is-the-error>: error: need ‘typename’ before ‘CFoo<T>::SFoo’ because ‘CFoo<T>’ is a dependent scope`

我期待有关如何解决此问题的任何提示。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T11:51:36.513

您必须使用`typename`. 请参阅[在哪里以及为什么必须放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

```
//CFoo.cpp (source code, example 2)
/* omitting irrelevant parts */
template <typename T>
typename CFoo<T>::SFoo* CFoo<T>::get() { return foo; }
^^^^^^^^ 
```

在 C++11 中，您可以`auto`改用，因为`SFoo`将在函数名之后的范围内

```
template <typename T>
auto CFoo<T>::get() -> SFoo* { return foo; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:51:49.493

`SFoo`在类声明之外，您需要完全符合条件： `typename CFoo<T>::SFoo`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T11:53:54.993

通常，`typename`只要依赖于模板参数的名称是一种类型，就必须使用它。

```
template <typename T>
typename CFoo<T>::SFoo* CFoo<T>::get() { return foo; } 
```

**§ 14.6.2 名称解析**

> 在模板声明或定义中使用并且依赖于模板参数的名称被假定为不命名类型，除非适用的名称查找找到类型名称或该名称由关键字 typename 限定。

# appharbor - 如何将带有后台工作程序的 Web 应用程序部署到 AppHarbor？

> ID：14002568
> 
> 赞同：0
> 
> 时间：2012-12-22T11:48:13.223
> 
> 标签：appharbor

我有一个包含 Web 应用程序和后台工作人员的应用程序。

我定义了一个 AppHarbor.sln 解决方案文件，并包含了这两个项目。但是，只有后台工作人员被部署。此外，甚至 Web 应用程序项目的测试似乎也被忽略了。我在解决方案文件中尝试了项目排序，但它始终是被部署的后台工作人员。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:47:10.997

默认情况下，免费的 AppHarbor 应用程序只有一个关联的工作人员。这可以是后台工作人员或网络工作人员（在第一次成功构建时检测到）。

您可能只需要在“订阅”页面上将 Web Worker 的数量缩放为 1，这将立即触发 Web 应用程序的部署。

如果 Web 应用程序仍未运行，您应该检查构建输出以验证它是否包含 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T21:28:35.490

AppHarbor 有一个[常见问题解答](http://support.appharbor.com/kb/getting-started/frequently-asked-questions)，可帮助您解决此类问题。在您的情况下，我建议您下载构建输出并验证一切是否正常。如果您有任何问题，也可以随时联系 AppHarbor 支持。

# flash - Flash：在点创建对象

> ID：14002578
> 
> 赞同：0
> 
> 时间：2012-12-22T11:49:58.083
> 
> 标签：flash, flash-cs5

有人可以告诉我如何在点上创建一个新对象吗？我想做这样的事情：`addEventListener(Event.ENTER_FRAME, loop);

```
 private function loop(e:Event):void

        addChild {(myObject)} on(mouseX,mouseY);
        }` 
```

我知道这是不好的代码，但我只想告诉你我想做什么，所以请帮助我：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:07:34.970

你必须这样做：

```
private function loop(e:Event):void{
    addChild(myObject);
    myObject.x = mouseX;
    myObject.y = mouseY;
} 
```

# dynamics-crm-2011 - 获取相关实体crm

> ID：14002581
> 
> 赞同：1
> 
> 时间：2012-12-22T11:50:07.983
> 
> 标签：dynamics-crm-2011

我在 CRM 组织“模板”和“产品”上有两个实体，关系为 1:N。一个“模板”可以与多个“产品”相关，我想使用 C# 获取与一个“模板”相关的所有“产品”。

前任：

> Template1 与三个产品 P1、P2 和 P3 相关。当我检索 Template1 实体时，我想检索 P1、P2 和 P3。我想要相关的实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:53:41.103

除了 Konrad 的回答，您还可以使用 LINQ to CRM。如果您过去使用过 LINQ，我建议您这样做，因为查询表达式可能有点冗长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T21:29:50.177

从技术上讲，情况正好相反。*它是实体Product*的三个实例，即*P1*、*P2*和*P3*，它们链接到您的实体模板实例，即*Template1*。

你打算用什么技术来获取这些？在 C# 中，我会使用*QueryExpression*（但有些人更喜欢使用 fetch XML）。在 JavaScript 中，我会对*OrganizationData* Web 服务进行 REST 调用。从 GUI，高级搜索（我认为，至少，因为我不经常使用 GUI）。

# haskell - 如何使用 char* 类型的参数将 NULL 传递给外部函数？

> ID：14002583
> 
> 赞同：0
> 
> 时间：2012-12-22T11:50:25.627
> 
> 标签：haskell, ffi, c2hs

我正在为某个 C 项目编写 Haskell 绑定，并且有一个类型的函数

```
void foo(char *); 
```

问题是`foo`检查这个指针的`NULL`值并做一些不同于正常行为的事情。在我的 Haskell 源代码包装器中，此函数具有类型`foo :: String -> IO ()`并使用`newCString`inside 来编组它的参数。

我想知道我如何在`NULL`那里给用户能力通行证？从那以后，我一直期待这`newCString ""`会给我，但事实并非如此。`0``"" /= "\0"`

我现在看到的唯一方法是使用“”作为用户想要的指示符`NULL`，但这似乎很骇人听闻。我期待这个问题很常见，但没有找到关于 SO 的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T12:15:19.110

你可以改变你的功能

```
foo :: Maybe String -> IO () 
```

然后`Nothing`发送一个`nullPtr`到你的 C 函数。

# javascript - 用于填充数组的 javascript/jQuery 匿名函数

> ID：14002593
> 
> 赞同：4
> 
> 时间：2012-12-22T11:51:24.023
> 
> 标签：javascript, jquery

嗨，我只是想知道是否可以使用这样的函数在 javascript 中构建数组。我有一个变量，它使用`$(ele).css('margin');`. 这将返回一个字符串，`0px 0px 0px 0px`其中我只希望 left 属性检查它是否已被动画`-=`左侧。

我可以做类似的功能，但我知道必须有更好的方法。这是我的例子：

```
var marginsLeft = new array();
$(ele).each(function(i){
    var r = $(i).css('margin').split(" ");
    marginsLeft[i]=r[3];
}); 
```

我不完全确定如何简化这一点，但我确信这是可能的:) 提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T11:55:21.813

您可以使用[`$.map`](http://api.jquery.com/map/)：

```
var marginsLeft = $(ele).map(function() { 
    return parseInt($(this).css('margin-left'), 10);
}).get(); 
```

**更新：**正如@undefined 所指出的，如果您想要一个常规数组，您还应该调用[`.get`](http://api.jquery.com/get/)结果。否则，您将拥有一个 jQuery 包装的数组。它类似于数组，因此可以在许多情况下用作数组，但在其他情况下则不能（特别是，它可能没有本机`Array`方法）。

此外，要将结果转换为您可以使用的数字`parseInt`（这将忽略字母并仅使用数字），请记住明确说明基数 (10)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T11:58:04.007

查看[文档`.each()`](http://api.jquery.com/each/)：回调函数的第一个参数是索引，数组元素（DOM 节点）可以作为第二个参数或`this`值访问。所以，使用

```
var marginsLeft = []; // literal shortcut for "new Array()"
$(ele).each(function(i, el){
    marginsLeft[i] = $(el).css('margin-left');
}); 
```

您也可以查看[`.map()`method](http://api.jquery.com/map/)，但它返回一个 jQuery 包装对象而不是一个数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T11:53:50.093

你可以`css('margin-left')`改用

# macos - 如何在 Textmate 中显示方法/函数列表

> ID：14002598
> 
> 赞同：4
> 
> 时间：2012-12-22T11:51:54.673
> 
> 标签：macos, lua, textmate, coronasdk

我正在处理一个 Lua 文件。我有一些方法。我想知道是否可以配置 Textmate 以显示文件中的方法列表，以及通过从该列表中选择方法来快速到达方法的第一行的方法。我确实安装了 Lua 和 Corona 特定的 Textmate 包，用于突出显示 Lua 和 Corona API 的语法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T11:58:40.043

真可惜。找到了答案。它在 Textmate 窗口的底部窗格中。标签大小旁边。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-14T04:00:56.713

一个快速的快捷方式是 ⇧⌘T 或转到 Navigate -> Go to Symbol。

# python - pycassa - 通过二级索引删除多行？

> ID：14002605
> 
> 赞同：1
> 
> 时间：2012-12-22T11:53:25.897
> 
> 标签：python, cassandra, pycassa

我有一个带有二级索引“指针”的列族。如何删除具有相同“指针”值（例如 abc）的多行？

我知道的唯一选择是：

```
expr = create_index_expression('pointer', 'abc')
clause = create_index_clause([expr])
for key, user in cassandra_cf.get_indexed_slices(clause):
    cassandra_cf.remove(key) 
```

但我知道这是非常低效的，如果我有数千行具有相同的“指针”值，可能需要很长时间。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:55:35.350

您可以一次删除多行：

```
expr = create_index_expression('pointer', 'abc')
clause = create_index_clause([expr])
with cassandra_cf.batch() as b:
    for key, user in cassandra_cf.get_indexed_slices(clause):
        b.remove(key) 
```

这会将删除分组为 100 个批次（默认情况下）。当批处理对象在这里用作上下文管理器时，一旦`with`离开块，它将自动处理发送任何剩余的突变。

[`pycassa.batch`您可以在API 文档](http://pycassa.github.com/pycassa/api/pycassa/batch.html)中阅读更多相关信息。

# cucumber - 及时或提前写黄瓜特征

> ID：14002607
> 
> 赞同：1
> 
> 时间：2012-12-22T11:53:35.493
> 
> 标签：cucumber, bdd

[Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)谈到了与利益相关者和/或其他团队成员一起预先编写大多数功能。

然而，这意味着在发布/迭代之前的任何给定时间，都会有很多失败的测试；所有功能都已经存在，但失败了。

Rails 附带的 . 使用The [Rspec Book](https://rads.stackoverflow.com/amzn/click/com/1934356379)中讨论的标签`cucumber.yml`使用正在进行的实践。这是您编写即时场景的地方，即您要开发它的那一刻；不是在较大的迭代或项目开始时立即进行。`@wip`

这些似乎是矛盾的。有没有关于最好使用什么的文档？是否有有用的技巧，例如使用标签，预先编写功能但将它们排除在测试之外？或者这被认为是一种不好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:59:57.893

我们通常与产品负责人和/或开发人员一起预先编写功能，并在我们将它们签入我们正在处理的故事的分支时将它们标记为@wip。我们的故事足够小，我们可以在几天甚至几小时内开发它们，因此很少有未实现的功能。我过去曾在我们为大型项目预先编写功能的地方工作过，但效果不太好——需求发生了变化，使黄瓜功能冗余/过时。

这不是一个非黑即白的答案——只是什么对我有用，什么对我没用。希望这可以帮助。

# php - jquery创建问题

> ID：14002608
> 
> 赞同：0
> 
> 时间：2012-12-22T11:53:46.557
> 
> 标签：php, javascript, jquery-ui

```
 <link rel="stylesheet" href="{$base_url}resources/themes/{$set_theme}/css/jquery-ui.css" />
    <script type="text/javascript" src="{$base_url}resources/javascript/jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="{$base_url}resources/javascript/jquery/jquery-ui.js"></script>
    <script type="text/javascript">jQuery.noConflict();</script>

<form action="{$base_url}{$fil_index_register}" id="register" method="post" autocomplete="off">
date of brith:<input type="text" maxlength="50" name="cal" value="" class="" id="ds" >
<input type="button" name="button" onclick="javascript:$('register').submit();" value="ACCOUNT_040" class="button" />

</form>

<script type="text/javascript"> 
        {literal}

        $(function(){
            $( "#ds" ).datepicker({ dateFormat: "dd-mm-yy" });

        });

        {/literal}
    </script> 
```

问题：-当我包含 js 脚本脚本提交按钮不起作用但日历的 js 正在工作并且当删除 js 脚本提交按钮开始工作时。请帮助我。我正在 pixaria 软件上实现这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:40:06.350

## “$” 造成问题，所以我避免使用“$”

```
onclick="javascript:document.forms['register'].submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:58:57.093

您需要致电：

```
$('#register').submit(); 
```

你忘了#（选择元素的ID）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:58:59.903

所以，你的意思是提交按钮不起作用？好吧，这是解决方案：

更改：

```
$('register') 
```

到：

```
$('#register') 
```

'#' 符号是 id '.' 的标识符。符号用于类，没有符号用于 HTML 标签

希望这有效

# sql-server-2008 - strcomp 不适用于 ms sql

> ID：14002612
> 
> 赞同：0
> 
> 时间：2012-12-22T11:54:43.577
> 
> 标签：sql-server-2008, ms-access, vb6

用于登录的代码`ms access`，它工作正常。但是，我需要将数据库更改为`ms sql 2008`并且 in`sql strcomp`不起作用。那么，我是否需要替代`strcomp`in`sql`或者如何使下面的代码与`ms sql`数据库一起使用？

```
Set rs = con.Execute("SELECT * FROM Users where StrComp(UserName, '" & sfindtext & "', 0) = 0")

If rs.EOF Then
    recfound = False
Else
  With rs
    recfound = True
     UserID = !UserID
     Username = !Username
     Password = !UPassword
     Privilege = !Privilege
  End With
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:58:57.080

您可以使用`CASE`语句来检查 的值`sfindtext`：

```
Set rs = con.Execute("
SELECT * 
FROM Users 
where (case when UserName = '" & sfindtext & "' then 0 else 1 end) = 0") 
```

这是查询工作的[SQL Fiddle Demo](http://sqlfiddle.com/#!3/9e62b/2)

或者你甚至不需要逻辑`CASE`部分：

```
Set rs = con.Execute("
SELECT * 
FROM Users 
where UserName = '" & sfindtext & "'" 
```

# php - 使用复选框插入信息

> ID：14002620
> 
> 赞同：1
> 
> 时间：2012-12-22T11:55:54.333
> 
> 标签：php, html, phpmyadmin

这是问题所在：

用户将在必填字段中输入他的信息。然后用户将在复选框中选择一个选项（用户可以选择多个），该选项将保存在数据库中（复选框的值）。

例如：

大卫选择了 2 个选项。以体育运动为例。大卫选择篮球和排球。在我的数据库中，它看起来像这样：

```
| id |  firstname  |  lastname  |  sports      |
| 1  | David       |  White     |  Basketball  |
| 2  | David       |  White     | Volleyball   | 
```

我的主要问题是如果我必须更改或删除信息，只会更改或删除一行，这是一个大问题。我不能让它像爆炸或内爆一样，因为我已经显示了有多少用户选择了某项运动。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:59:41.430

看起来您需要规范化您的表格。您可以创建一个表来存储人员数据：

```
 person = (personid, firstname, lastname, other fields related to person) 
```

和一个存储选择的表：

```
 sport = (sportid, name, other data related to sport) 
```

最后是一个管理关系的表：

```
 PersonSport = (personid, sportid) 
```

然后在上述情况下，您的数据将是：

```
 Person
 personid    Firstname    Lastname
  1          David        White
  2          Sam          Black 
```

和

```
Sport
sportid       name
1             Basketball
2             Football
3             Tiddlywinks 
```

和

```
 PersonSport
 Personid   Sportid
   1        1
   1        2
   2        3
   2        1 
```

要计算有多少用户选择了一项运动：

```
 Select count(*) from PersonSport where sportid = 1; 
```

# php - 模块之间的 Codeigniter 类继承（线设计） - 再次

> ID：14002626
> 
> 赞同：2
> 
> 时间：2012-12-22T11:56:21.047
> 
> 标签：php, codeigniter, module, codeigniter-2

我之前问过这个问题：[Codeigniter Class Inheritance between modules (wiredesigns)](https://stackoverflow.com/questions/13994457/codeigniter-class-inheritance-between-modules-wiredesigns/13995249#comment19322675_13995249)

我接受了这个问题的答案，它提供了一种通过在应用程序/核心中扩展自定义控制器来做我想做的事情的方法。这种方法似乎很明智，并提供了允许两个模块独立运行的额外好处。

但是，考虑到这一点，我不确定这是这种情况的最佳方法，因为我的产品控制器将需要项目控制器的几乎所有功能，所以这种方法将使我的项目控制器几乎是空的 - 我不确定我喜欢这个。

**问题 1**

虽然我可能仍然采用之前建议的方法，但我想知道是否有办法在模块之间扩展类，以便我可以权衡这两个选项（请参阅下面的原始问题）

**问题2**

此外，我认为我应该能够重用我的大部分模型类，我可以看到我可以使用 MY_Model in app/core 方法来做到这一点。但...

a) 有没有办法直接访问其他模块模型？

b) 我可以在模块之间扩展我的模型吗，类似于控制器的问题 1

**上一个问题**

我的 CI2 应用程序正在使用 wiredesigns 模块化布局。

我在一个名为 modules 的文件夹中有一个名为 item 和 product 的两个模块，如下所示：

```
/application
    /modules
        /item
        /product 
```

在 Item 中，我有一个名为 item 的控制器，它的开头是这样的。

```
class Item extends MX_Controller
{
    //code here
} 
```

我需要做什么才能使我的产品控制器在不同的模块中扩展我的项目控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:36:13.123

这里的正确答案是：

> 别

你为什么要这样做？将您的逻辑放入库或某种共享文件中，然后实现对该库的调用。

你可以`Item`在你的文件夹中创建一个抽象类，`application/libraries`HMVC 内置的自动加载器会自动加载它。没有理由这需要在一个模块中，它绝对不需要是一个控制器。

# php - 通过cron更新php mysql

> ID：14002628
> 
> 赞同：1
> 
> 时间：2012-12-22T11:56:27.120
> 
> 标签：php, mysql

我有一个通过 cron 运行的 php 文件。为了测试，我将它设置为每小时运行一次，但通常它会每天运行一次。我想要做的是，如果玩家将 autotechrefinery 字段设置为 1，那么他们应该从表​​中删除他们的人口，他们拥有多少资金、研究用品和技术。

从那里，我想要的是扣除 500 个研究用品，添加 50 个技术，并从资金中扣除 10% 的人口。当我手动运行文件时，所有这些似乎都在工作，但是当我让它通过 cron 自动运行时，有些东西不起作用，因此它将技术设置为 50，研究供应设置为 -500，资金设置为 0 .

```
$refCheck = mysql_query("SELECT * FROM players WHERE autotechrefinery='1'");
while($rC = mysql_fetch_array($refCheck)) {

$nation = $rC['nation'];
$pop = $rC['population'];
$rsupplies = $rC['researchsupplies'];
$cash = $rC['money'];
$tech = $rC['technology'];

$newtech = $tech+50;
$newmoney = $cash-($pop*.1);
$newsupplies = $rsupplies-500;

mysql_query("UPDATE players SET money='$newmoney', technology='$newtech', researchsupplies='$newsupplies', techbought='1' WHERE autotechrefinery='1'"); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:12:17.083

您的代码中的错误是：UPDATE 将始终更新所有条目。因此，所有条目都会获得循环最后一次传递的值。

要修复代码，您需要一些 ID 来识别行并在更新中使用它：

```
$refCheck = mysql_query("SELECT * FROM players WHERE autotechrefinery='1'");
while($rC = mysql_fetch_array($refCheck)) {   
  $ID = $rC['id'];
  $nation = $rC['nation'];
  $pop = $rC['population'];
  $rsupplies = $rC['researchsupplies'];
  $cash = $rC['money'];
  $tech = $rC['technology'];

  $newtech = $tech+50;
  $newmoney = $cash-($pop*.1);
  $newsupplies = $rsupplies-500;

  mysql_query("UPDATE players SET money='$newmoney', technology='$newtech', researchsupplies='$newsupplies', techbought='1' WHERE id="$ID');
} 
```

您没有要求改进，但您可以使用一条 SQL 语句实现相同的结果：

```
UPDATE players set money=money - population * .1, technology = technology + 50, researchsupplies = researchsupplies - 500; 
```

# c++ - WriteFile 到串口总是超时，写入的字节数为零

> ID：14002629
> 
> 赞同：2
> 
> 时间：2012-12-22T11:56:36.143
> 
> 标签：c++, file-io, serial-port, port, at-command

我正在尝试将 At 命令发送到我的手机（诺基亚 5130）

手机通过 USB 端口（在调制解调器模式下使用）连接，因此在我安装驱动程序后，我将其列为设备管理器上的 COM 端口（诺基亚 5130 XPressMusic USB 串行端口（COM17））

这是代码：

```
 #include <iostream>
    #include <Windows.h>

    using namespace std;

    int main()
    {
        HANDLE hport = INVALID_HANDLE_VALUE;
        DCB portConfig;

        hport = CreateFile( TEXT("\\\\.\\COM17"),GENERIC_READ | GENERIC_WRITE,  
            0,NULL,OPEN_EXISTING,0,0); 

        if(hport == INVALID_HANDLE_VALUE)
        {
            cout<<GetLastError();
            system("pause");
            return 0;
        }

        if(GetCommState(hport,&portConfig)==0)
        {
            cout<<"Erreur de recuperation de la configuration :"<<GetLastError()<<endl;
            system("pause");
            return 0;
        }

        portConfig.BaudRate = CBR_9600;
        portConfig.Parity = NOPARITY ;
        portConfig.StopBits = ONESTOPBIT;
        portConfig.ByteSize = 8;
        portConfig.fBinary = TRUE;
        portConfig.fDtrControl = DTR_CONTROL_HANDSHAKE;
        portConfig.fOutX = true;
        portConfig.fRtsControl = RTS_CONTROL_HANDSHAKE;
        portConfig.fAbortOnError = TRUE;
        portConfig.fParity = TRUE;

        if(SetCommState(hport,&portConfig)==0)
        {
            cout<<"Erreur de configuration Setcommstate:"<<GetLastError()<<endl;
            system("pause");
            return 0;
        }

        COMMTIMEOUTS comTimeOut;                
        comTimeOut.ReadIntervalTimeout = 3000;
        comTimeOut.ReadTotalTimeoutMultiplier = 3000;
        comTimeOut.ReadTotalTimeoutConstant = 2000;
        comTimeOut.WriteTotalTimeoutMultiplier = 3000;
        comTimeOut.WriteTotalTimeoutConstant = 2000;
        SetCommTimeouts(hport,&comTimeOut);

        DWORD  dwNumberOfBytesWritten;
        unsigned char * buffer = new unsigned char[4];
        buffer[0] = 'A';
        buffer[1] = 'T';
        buffer[2] = '\r';
        buffer[3] = '\n';

        WriteFile(hport,buffer,4,&dwNumberOfBytesWritten,NULL);
        cout<<"erreur "<<dwNumberOfBytesWritten<<" d'ecriture :"<<GetLastError();

        delete [] buffer;

        system("pause");
        CloseHandle(hport);
        return 0;
    } 
```

谁能告诉我为什么 WriteFile 不向串口写入任何内容？

是因为 com 端口不是真正的 com 端口（usb 到 com）吗？
（注意：如果我没有指定超时 WriteFile 只是挂起）

portMon 转储：

```
 19  0.00002536  ConsoleApplica  IRP_MJ_CREATE   USBSER000   SUCCESS Options: Open   
        20  0.00047645  ConsoleApplica  IOCTL_SERIAL_GET_BAUD_RATE  USBSER000   SUCCESS     
        21  0.00035417  ConsoleApplica  IOCTL_SERIAL_GET_LINE_CONTROL   USBSER000   SUCCESS     
        22  0.00000045  ConsoleApplica  IOCTL_SERIAL_GET_CHARS  USBSER000   SUCCESS     
        23  0.00000045  ConsoleApplica  IOCTL_SERIAL_GET_HANDFLOW   USBSER000   SUCCESS     
        24  0.00032201  ConsoleApplica  IOCTL_SERIAL_GET_BAUD_RATE  USBSER000   SUCCESS     
        25  0.00022917  ConsoleApplica  IOCTL_SERIAL_GET_LINE_CONTROL   USBSER000   SUCCESS     
        26  0.00000091  ConsoleApplica  IOCTL_SERIAL_GET_CHARS  USBSER000   SUCCESS     
        27  0.00000000  ConsoleApplica  IOCTL_SERIAL_GET_HANDFLOW   USBSER000   SUCCESS     
        28  0.00071875  ConsoleApplica  IOCTL_SERIAL_SET_BAUD_RATE  USBSER000   SUCCESS Rate: 9600  
        29  0.00062953  ConsoleApplica  IOCTL_SERIAL_SET_LINE_CONTROL   USBSER000   SUCCESS StopBits: 1 Parity: NONE WordLength: 8  
        30  0.00000091  ConsoleApplica  IOCTL_SERIAL_SET_CHAR   USBSER000   SUCCESS EOF:0 ERR:0 BRK:0 EVT:0 XON:0 XOFF:0    
        31  0.00000045  ConsoleApplica  IOCTL_SERIAL_SET_HANDFLOW   USBSER000   SUCCESS Shake:80000042 Replace:81 XonLimit:0 XoffLimit:0    
        32  0.00000045  ConsoleApplica  IOCTL_SERIAL_SET_TIMEOUTS   USBSER000   SUCCESS RI:3000 RM:3000 RC:2000 WM:3000 WC:2000 
        33  14.00148370 ConsoleApplica  IRP_MJ_WRITE    USBSER000   TIMEOUT Length 4: ....  
        34  0.00000408  ConsoleApplica  IRP_MJ_CLEANUP  USBSER000   SUCCESS     
        35  0.00047464  ConsoleApplica  IRP_MJ_CLOSE    USBSER000   SUCCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:09:00.360

好的，我通过更改 com 端口号解决了这个问题，即使 COM17 是在设备管理器中显示的，它不是正确的端口，这与端口配置无关（默认值有效）就是这样！感谢大家。

# java - 构建基于 Web 的 SQL 类客户端

> ID：14002630
> 
> 赞同：1
> 
> 时间：2012-12-22T11:56:39.573
> 
> 标签：java, user-interface, web-applications

我们将数据以几种不同的数据格式存储在内部键值存储中，为了查看或更新存储中的数据，我构建了一个命令行工具，它接受自定义查询语言（类似于对象查询语言）解析的命令，解释它并在控制台上显示它。

我正在考虑为此构建一个基于 Web 的 GUI。由于我对此的经验有限，想知道什么是最简单的方法（在java中）。

目前，UI 只需要两个元素，一个用于接受命令的文本区域和一个用于显示输出的表格。输出表应该很容易实现，但我被困在输入元素部分，因为控制台应用程序默认提供命令的历史记录，但我不确定哪个 GUI 元素对此有好处。另一种方法是有一个大文本框，用户可以在其中键入多个命令并运行其中任何一个，只需像大多数标准 gui sql 客户端一样突出显示并执行它（ [http://mywebsql.net/screenshots/?cat= Sql+Editors#/images/screens/02.Sql%20Editors/Multiple%20Editors.png](http://mywebsql.net/screenshots/?cat=Sql+Editors#/images/screens/02.Sql%20Editors/Multiple%20Editors.png) )

我浏览了 Google Web Toolkit 小部件库（[https://developers.google.com/web-toolkit/doc/latest/RefWidgetGallery](https://developers.google.com/web-toolkit/doc/latest/RefWidgetGallery)），但它们似乎都不适合我的需要。

对此的任何建议都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:53:14.973

我认为您不会找到任何组件为您提供以前执行的命令的历史记录。但是没有人禁止您实施自己的解决方案。

只需提供一个文本字段或文本区域来键入命令，并在文本字段/区域旁边显示先前命令的列表。单击上一个命令时，将文本区域的文本替换为单击命令的文本。并且在执行命令时，将其添加到历史列表中。

任何 Web 框架，从基本的 servlet/JSP 到基于组件的框架，都应该允许您这样做。

# python - 为什么在提交对象之前 SQLAlchemy 默认列值不可用？

> ID：14002631
> 
> 赞同：36
> 
> 时间：2012-12-22T11:57:31.320
> 
> 标签：python, sqlalchemy, default-value

最近我发现 SQLAlchemy 的 Column 默认值不能像我期望的那样工作：

```
>>> Base = declarative_base()
>>> class TestModel(Base):
    ...     __tablename__ = 'tmodel'
...     id = sa.Column(sa.Integer, primary_key=True)
...     foo = sa.Column(sa.Integer, default=0)
...    
>>> tmodel_instance = TestModel()
>>> print tmodel_instance.foo
None
>>> session.add(tmodel_instance)
>>> print tmodel_instance.foo
None
>>> session.commit()
>>> print tmodel_instance.foo
0 
```

我想在对象实例化后`tmodel_instance.foo`立即等于`0`，但似乎默认值仅在执行`INSERT`命令时使用，这真的让我感到困惑。为什么会更喜欢 `default`over `server_default`？以及如何实现我想要的？我应该在 中指定所有默认参数`__init__`吗？这似乎是代码重复：要更改默认值，我必须更改两次并保持这些值相等——有什么方法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-23T17:35:45.483

出于以下四个原因之一，人们会更喜欢默认而不是服务器默认：

1.  你想运行一个 Python 函数，而不是 SQL 函数，作为默认值（或者一个需要每个 INSERT Python 状态的 SQL 表达式）。

2.  默认值是主键列的一部分。ORM 无法在没有主键的情况下加载行，因此 server_default 在使用 ORM 时通常对 PK 列没有用处。

3.  数据库不支持您要运行的 SQL 表达式作为“服务器默认值”。

4.  您正在处理您不能/不想更改的模式。

在这种情况下，当您希望应用程序中的“foo”为“0”而与数据库操作无关时，可以选择：

1.  使用`__init__()`. 是蟒蛇！

2.  使用事件。

这是`__init__()`：

```
class TestModel(Base):
   # ...

   def __init__(self):
       self.foo = 0 
```

这是事件（特别是[init 事件](http://docs.sqlalchemy.org/en/rel_0_8/orm/events.html?highlight=orm%20events#sqlalchemy.orm.events.InstanceEvents.init)）：

```
from sqlalchemy import event

@event.listens_for(Foo, "init")
def init(target, args, kwargs):
    target.foo = 0 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-04T14:40:32.533

您可以使用`force_instant_defaults`listener from`sqlalchemy_utils`来更改此行为：

```
from sqlalchemy_utils import force_instant_defaults

force_instant_defaults()

class TestModel(Base):
    __tablename__ = 'tmodel'
    id = sa.Column(sa.Integer, primary_key=True)
    foo = sa.Column(sa.Integer, default=0)

model = TestModel()
assert model.foo == 0 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-22T16:46:28.270

您可以使用该`init`事件来填充默认值。此事件侦听器将执行此操作：

```
from sqlalchemy import event
from sqlalchemy.orm import mapper
from sqlalchemy.inspection import inspect

def instant_defaults_listener(target, args, kwargs):
    for key, column in inspect(target.__class__).columns.items():
        if column.default is not None:
            if callable(column.default.arg):
                setattr(target, key, column.default.arg(target))
            else:
                setattr(target, key, column.default.arg)

event.listen(mapper, 'init', instant_defaults_listener) 
```

# asp.net - 如何在 radgrid 中显示自定义标题文本

> ID：14002632
> 
> 赞同：0
> 
> 时间：2012-12-22T11:57:53.623
> 
> 标签：asp.net

我编写此代码以更改 radgrid 中的标题文本但遇到此问题：请帮助我

指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

我的代码是：`RadGrid1.Columns[0].HeaderText = "Rank";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:25:18.240

对于自动生成的列。

```
protected void RadGrid1_ColumnCreated(object sender, GridColumnCreatedEventArgs e)
{
    if (e.Column.UniqueName == "FirstName") // Uniuename is your DataFieldName
    {
        e.Column.HeaderText = "Name";
    }
} 
```

对于静态列。

ASPX

```
<telerik:GridBoundColumn HeaderText="FirstName" DataField="FirstName"
        UniqueName="FirstName">
      </telerik:GridBoundColumn> 
```

C＃

```
if (RadGrid1.MasterTableView.Columns.FindByUniqueName("FirstName") != null)
    {
        RadGrid1.MasterTableView.Columns.FindByUniqueName("FirstName").HeaderText = "Name";
    } 
```

# android - 如何在 Android 中重用服务？

> ID：14002645
> 
> 赞同：2
> 
> 时间：2012-12-22T11:59:25.010
> 
> 标签：android, android-service

我已经提供了在服务器上上传文件的服务。它的工作完美，我正在调用这样的服务，

```
Intent upload = new Intent(this, UploadFileService.class);
        upload.putExtra("File", o);
        upload.putExtra("UserName", username);
        upload.putExtra("Password", password);
        startService(upload); 
```

它开始上传我的一个文件，现在我想使用相同的服务同时上传第二个文件而不打扰第一个文件。

现在它扰乱了第一次上传。请帮我....

在 manifest.xml 中定义

```
<service
    android:name=".UploadFileService"
    android:label="@string/app_name" >
</service> 
```

# node.js - Node.js 的续集：ER_NO_SUCH_TABLE

> ID：14002646
> 
> 赞同：17
> 
> 时间：2012-12-22T11:59:34.783
> 
> 标签：node.js, sequelize.js

我是续集和 Node.js 的新手。
我为测试续集编码，但发生错误**“ER_NO_SUCH_TABLE：表'db.node_tests'不存在”**
错误很简单。
但是，我想从“ **node_test** ”表中获取数据。
我认为 sequelize 附加了 's' 字符。

有我的源代码。

```
var Sequelize = require('sequelize');

var sequelize = new Sequelize('db', 'user', 'pass');
var nodeTest = sequelize.define('node_test',
        { uid: Sequelize.INTEGER 
         , val: Sequelize.STRING} );

nodeTest.find({where:{uid:'1'}})
    .success(function(tbl){
        console.log(tbl);
    }); 
```

我已经创建了表“node_test”，并使用 mysql 客户端插入了数据。

我误解了用法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-22T23:10:01.133

我找到了我自己的问题的答案。

我在后面附加了 Sequelize 方法选项。`{define:{freezeTableName:true}}`

**然后 sequelize 不在表名后附加 's' 字符。**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-27T06:49:43.140

虽然答案很好，但我现在建议`tableName`在声明模型时使用该选项：

```
sequelize.define('node_test', { 
  uid: Sequelize.INTEGER,
  val: Sequelize.STRING
}, {
   tableName: 'node_test'
}); 
```

[http://docs.sequelizejs.com/manual/tutorial/models-definition.html](http://docs.sequelizejs.com/manual/tutorial/models-definition.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-22T13:41:55.003

Sequelize 默认使用传递的模型名称的复数形式。因此它将查找表“node_tests”或“NodeTests”。如果您愿意，它也可以为您创建表格。

```
nodeTest.sync().success(function() {
  // here comes your find command.
}) 
```

如果该表尚不存在，同步将尝试创建该表。您还可以使用 删除现有表并从头开始创建一个新表`sync({ force: true })`。检查命令行上的 SQL 命令以获取有关正在发生的事情的更多详细信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-21T20:20:23.920

**为现有**表定义模型时，需要为 sequelize设置两个*选项：*

1.  *按原样*找到您的表名，然后
2.  不必担心它所期望的 sequelize 的默认列*updatedAt*和*createdAt*。

只需像这样添加两个选项：

```
var nodeTest = sequelize.define('node_test',
        { uid: Sequelize.INTEGER , val: Sequelize.STRING},
        { freezeTableName: true , timestamps: false} //add both options here
); 
```

注意*选项*参数：

```
 sequelize.define('name_of_your_table',
    {attributes_of_your_table_columns},
    {options}
     ); 
```

在使用诸如 nodeTest 之类的 sequelize 方法时，缺少任何一个选项都会触发相应的错误。*查找所有（）*。

```
> ER_NO_SUCH_TABLE    //freezeTableName
> ER_BAD_FIELD_ERROR  //timestamps 
```

或者，您可以：

1.  通过 sequelize 创建一个新表。它会将“s”附加到表名并创建两个时间戳列作为默认值或
2.  使用[sequelize-auto](https://github.com/sequelize/sequelize-auto)，一个很棒的 npm 包，以编程方式从现有数据库生成续集模型。

这是选项配置的 sequelize[文档](http://docs.sequelizejs.com/en/v3/docs/models-definition/#configuration)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-20T21:25:56.177

在我的情况下，这是由于情况。我有：

```
sequelize.define('User', { 
```

正确的方法是使用小写：

```
sequelize.define('user', { 
```

# python - “ImportError：没有名为 urls 的模块”出现在 Django admin 中

> ID：14002656
> 
> 赞同：1
> 
> 时间：2012-12-22T12:01:07.203
> 
> 标签：python, django, nginx, django-admin, uwsgi

Django：1.3.5
nginx：1.2.6
uwsgi：1.0.5

我的 django 应用程序在 nginx 和 uwsgi 上运行。打开管理页面时，出现 500 错误。此错误是“ImportError：没有名为 urls 的模块”。

运行命令“python manage.py runserver”并打开管理页面，然后没有出现500错误。

在 urls.py 上评论管理员，然后不会发生错误。

此错误仅发生在 nginx 和 uwsgi 上。

我该如何解决？

网址.py

```
from django.conf.urls.defaults import *
from django.conf import settings
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
                       (r'^blog/', include('myApp.blog.urls')),
                       (r'^admin/', include(admin.site.urls))
                       ) 
```

wsgi.py

```
import os
import sys
import site

reload(sys)
sys.setdefaultencoding('utf-8')
sys.path.append('/path/to/myApp/')

site.addsitedir('/usr/lib/python2.6/site-packages')
os.environ['DJANGO_SETTINGS_MODULE'] = 'myApp.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

错误回溯

```
Traceback (most recent call last):

File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

File "/usr/lib/python2.6/site-packages/django/contrib/admin/sites.py", line 214, in wrapper
    return self.admin_view(view, cacheable)(*args, **kwargs)

File "/usr/lib/python2.6/site-packages/django/utils/decorators.py", line 93, in _wrapped_view
    response = view_func(request, *args, **kwargs)

File "/usr/lib/python2.6/site-packages/django/views/decorators/cache.py", line 79, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)

File "/usr/lib/python2.6/site-packages/django/contrib/admin/sites.py", line 197, in inner
    return view(request, *args, **kwargs)

File "/usr/lib/python2.6/site-packages/django/views/decorators/cache.py", line 79, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)

File "/usr/lib/python2.6/site-packages/django/contrib/admin/sites.py", line 382, in index
    context_instance=context_instance

File "/usr/lib/python2.6/site-packages/django/shortcuts/__init__.py", line 20, in render_to_response
    return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)

File "/usr/lib/python2.6/site-packages/django/template/loader.py", line 188, in render_to_string
    return t.render(context_instance)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 123, in render
    return self._render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 117, in _render
    return self.nodelist.render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 744, in render
    bits.append(self.render_node(node, context))

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 757, in render_node
    return node.render(context)

File "/usr/lib/python2.6/site-packages/django/template/loader_tags.py", line 127, in render
    return compiled_parent._render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 117, in _render
    return self.nodelist.render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 744, in render
    bits.append(self.render_node(node, context))

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 757, in render_node
    return node.render(context)

File "/usr/lib/python2.6/site-packages/django/template/loader_tags.py", line 127, in render
    return compiled_parent._render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 117, in _render
    return self.nodelist.render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 744, in render
    bits.append(self.render_node(node, context))

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 757, in render_node
    return node.render(context)

File "/usr/lib/python2.6/site-packages/django/template/defaulttags.py", line 311, in render
    return self.nodelist_true.render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 744, in render
    bits.append(self.render_node(node, context))

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 757, in render_node
    return node.render(context)

File "/usr/lib/python2.6/site-packages/django/template/defaulttags.py", line 311, in render
    return self.nodelist_true.render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 744, in render
    bits.append(self.render_node(node, context))

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 757, in render_node
    return node.render(context)

File "/usr/lib/python2.6/site-packages/django/template/loader_tags.py", line 64, in render
    result = block.nodelist.render(context)

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 744, in render
    bits.append(self.render_node(node, context))

File "/usr/lib/python2.6/site-packages/django/template/base.py", line 757, in render_node
    return node.render(context)

File "/usr/lib/python2.6/site-packages/django/template/defaulttags.py", line 437, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=context.current_app)

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 391, in reverse
    *args, **kwargs)))

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 312, in reverse
    possibilities = self.reverse_dict.getlist(lookup_view)

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 229, in _get_reverse_dict
    self._populate()

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 208, in _populate
      For name in pattern.reverse_dict:

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 229, in _get_reverse_dict
    self._populate()

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 208, in _populate
      For name in pattern.reverse_dict:

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 229, in _get_reverse_dict
    self._populate()

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 197, in _populate
      For pattern in reversed(self.url_patterns):

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 279, in _get_url_patterns
    patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)

File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py", line 274, in _get_urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)

File "/usr/lib/python2.6/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)

ImportError: No module named urls 
```

设置.py (INSTALLED_APPS)

```
ROOT_URLCONF = 'myApp.urls'
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.admin',
    'django.contrib.sitemaps',
    'django.contrib.markup',
    'myApp.blog',
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T00:30:54.437

你如何开始你的 uwsgi 进程？您的 uwsgi 进程需要从项目根目录的位置启动。

我通过给它一个环境变量来配置我的 uwsgi 初始化文件，该`PROJECT_HOME`环境变量在我的进程用户`.bash_profile`文件中定义。

在我的流程用户中`.bash_profile`，我有：-

```
export PROJECT_HOME=/var/www/myproject 
```

然后，在我的 uwsgi 初始化文件中，我有：-

```
[uwsgi]

if-env = PROJECT_HOME
chdir = %(_)
touch-reload = %(_)/uwsgi.ini
daemonize = %(_)/myproject.log
endif =

if-env = VIRTUAL_ENV
virtualenv = %(_)
endif = 

socket = 127.0.0.1:3030
pidfile=/tmp/myproject.pid-3030
processes = 4
module = django.core.handlers.wsgi:WSGIHandler()
env = DJANGO_SETTINGS_MODULE=myproject.settings
master = True
vacuum = True
max-requests = 5000
logdate = True

enable-threads = True
single-interpreter = True 
```

该文件`chdir`中的配置`uwsgi.ini`告诉我`uwsgi`的进程从该目录启动该进程并将该目录包含在其中，`PYTHONPATH`以便可以找到我的项目的模块。

如果您还`VIRTUAL_ENV`定义了一个环境，正如您从我在文件`VIRTUAL_ENV`中的配置中看到的那样，该目录也包含在该进程中。`uwsgi.ini``VIRTUAL_ENV``PYTHONPATH``uwsgi`

要运行我的 uwsgi 进程，只需运行以下命令即可：-

```
uwsgi --ini /var/www/myproject/uwsgi.ini 
```

`urls.py`这可确保您的 uwsgi 进程正确加载您的所有 python 模块（例如您的）。希望这可以帮助！

# android - Android Sherlock Action - ShareActionProvider 图标

> ID：14002657
> 
> 赞同：2
> 
> 时间：2012-12-22T12:01:48.900
> 
> 标签：android, android-actionbar, actionbarsherlock, shareactionprovider

我在我的 Sherlock ActionBar 中使用 ShareActionProvider。我想更改图标但无法更改。

XML

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_share"
        android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider"
        android:icon="@drawable/ic_menu_share"
        android:showAsAction="always"
        android:title="Search"/>

</menu> 
```

即使在指定图标之后，它也会[从 Holo Light 主题中获取默认图标](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/ic_menu_share_holo_light.png)

有没有办法引用图标并通过 Program 强制更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:21:57.187

当我想要自定义操作栏时，通常我首先看的是 ActionBarSherlock 主题和样式。

我发现 Sherlock 主题使用了 theme.xml 文件中的“actionModeShareDrawable”。

尝试更改您的主题以直接包含“actionModeShareDrawable”项目。

```
<style name="Theme.MyApp" parent="Theme.Sherlock.Light">
    <item name="actionModeShareDrawable">@drawable/ic_action_share</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T12:15:37.147

`R.java`更改后可能文件未更新所以清理工作区或重新构建项目。

# sql - 在oracle中的某些字符之后替换列中的数据

> ID：14002661
> 
> 赞同：0
> 
> 时间：2012-12-22T12:02:20.810
> 
> 标签：sql, oracle

我有一列的值如下：

```
1492966EMAIL1ABCDEFGHIJK12/22/2012 04:20:35 
```

我想替换列中 EMAIL1 之后的整个部分，并且必须对超过 500000 行执行此操作。问题是 EMAIL1 之前的位数在所有行中并不常见，但值 EMAIL1 在所有行中都存在。我尝试使用 substr 和 trim 时找不到正确的函数来解决这个问题，但我无法获得正确的查询。

有人可以告诉我如何在 Oracle SQL 中实现这一点吗？让我知道是否需要更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:09:39.170

这将完全符合您的目的，

```
Select SUBSTR(val,1,instr(val,'EMAIL1')+5) from table1 
```

[小提琴演示](http://sqlfiddle.com/#!4/1c3c6/6)

获取 'EMAIL1' 之后的字符串并将其替换为所需的字符串，

```
Select replace(SUBSTR(val,instr(val,'EMAIL1')+5),
'String you want to replace','string that replaces')
from table1 
```

[演示](http://sqlfiddle.com/#!4/1c3c6/15)

```
update table1 set val=(Select replace(SUBSTR(val,instr(val,'EMAIL1')+5),
'String you want to replace','string that replaces') from table1)
where lower(val) like '%email1%'; 
```

[更新演示](http://sqlfiddle.com/#!4/1c3c6/18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:06:49.667

我希望您的要求是在 email1 之后连接一个字符串..对于这个子字符串位置直到 email1 并与您所需的字符串连接..

```
select SUBSTR(column_name,1,INSTR(column_name,'EMAIL1')+5)||'string' from table1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:10:52.153

*   使用**`INSTR`**函数查找字符串***EMAIL1***的出现位置。
*   选择从原始字符串的开头到***EMAIL1***的起始位置加上 6 个字符的子字符串。6 是*EMAIL1*子串的长度。

如果您想以这种方式选择，请执行

```
SELECT substr( column_name, 1, instr(column_name,'EMAIL1')+6) 
```

如果要更新列值

```
UPDATE <table>
SET column_name = substr( column_name, 1, instr(column_name,'EMAIL1')+6) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T12:13:40.187

似乎您可以使用以下功能`REPLACE()`，`SUBSTR()`并且`INSTR()`：

```
select 
  replace(yourcol, substr(yourcol, instr(yourcol, 'EMAIL1')+6), '') newCol
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/e2a0a/9)

您的最终价值将是：

```
|        NEWCOL |
-----------------
| 1492966EMAIL1 | 
```

然后，如果您要在`UPDATE`语句中使用它，则查询将是：

```
update yourtable
  set yourcol = replace(yourcol, substr(yourcol, instr(yourcol, 'EMAIL1')+6), ''); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/e2a0a/10)

# javascript - 如何在同一个对象上组合两个 Javascript 函数

> ID：14002666
> 
> 赞同：1
> 
> 时间：2012-12-22T12:02:50.843
> 
> 标签：javascript, random

我一直试图在这个网站上的图片上随机叠加颜色。 [http://www.reportageborsen.se/reportageborsen/wordpress](http://www.reportageborsen.se/reportageborsen/wordpress)

我试图结合的 Javascript 是：

```
 $(function() {
    $('.media-box .mask').each(function() {
        var hue = 'rgb(' + (Math.floor((256 - 199) * Math.random()) + 200) + ',' + (Math.floor((256 - 199) * Math.random()) + 200) + ',' + (Math.floor((256 - 199) * Math.random()) + 200) + ')';
        $(this).css("background-color", hue);
    });
}); 
```

///和///

```
$('.media-box').hover(function() {
    $(this).find('.mask').stop(true, true).fadeIn();
}, function() {
    $(this).find('.mask').stop(true, true).fadeOut();
});​ 
```

是否有可能以某种方式将它们组合在一起？

最好的祝福

长处

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:36:36.130

如果您希望将两个功能合二为一，您可以试试这个：

```
var getRandomInRange = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
};

$('.media-box').each(function() {

    var mediaBox = $(this);
    var mask = mediaBox.find('.mask');
    var hue = 'rgb(' + getRandomInRange(200, 255) + ',' + getRandomInRange(200, 255) + ',' + getRandomInRange(200, 255) + ')';

    mask.css("background-color", hue);

    mediaBox.hover(function() {
        mask.stop(true, true).fadeIn();
    }, function() {
        mask.stop(true, true).fadeOut();
    });
}); 
```

请注意，为了清楚起见，我还将随机数生成器移到了单独的函数中。让我知道这是否有效。

# javascript - 清除所有 ASP 标签字段

> ID：14002673
> 
> 赞同：2
> 
> 时间：2012-12-22T12:03:48.597
> 
> 标签：javascript, asp.net

我正在尝试使用 javascript 清除 .aspx 页面中的所有字段（*应该是跨浏览器*）。下面的代码适用于`TextBox`字段，但不适用于`Label`字段。

```
var elements = document.getElementsByTagName("input");
for (var i = 0; i < elements.length; i++) {
    if (elements[i].type == "text") {
        elements[i].value = "";
    }
    else if (elements[i].type == "label") {
        elements[i].value = "";
    }
} 
```

后来我看到 HTML 正在渲染 asp.net 标签，`span`所以我也尝试了：

```
else if (elements[i].type == "span") {
    elements[i].innerHTML = "";
} 
```

仍然没有清除标签。我在这里做错了吗？

另一个问题是，每当我刷新页面时，清除的`TextBox`字段都会再次被旧值填充..（真令人沮丧）

我通过引用**[这个来尝试上面的代码](https://stackoverflow.com/q/569357/1577396)**

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:32:46.163

在现代浏览器中，这将清除所有 span 元素。

```
[].slice.call(document.querySelectorAll("span")).forEach(function(e){
    e.innerHTML="";
}) 
```

如果您已将类“标签”应用于 ASP 标签，那么您可以更具体：

```
[].slice.call(document.querySelectorAll(".label")).forEach(function(e){
    e.innerHTML="";
}) 
```

这是一个适用于旧版浏览器的示例：

```
var spans = document.getElementsByTagName("span");
for (var i=0; i < spans.length; i++)
{
    if ("label" == spans[i].className)
        spans[i].innerHTML = "";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T12:53:29.453

这是因为没有`label`or之类的类型`span`。`span`并且`label`是完全不同的标签，因此您应该`getElementsByTagName`为它们中的每一个使用。下面的代码应该可以解决问题，但对 if 块使用更明确的条件。

```
var elements = document.getElementsByTagName("input");
for (var i = 0; i < elements.length; i++) {
    if (elements[i].type == "text") {
        elements[i].value = "";
    }
}

elements = document.getElementsByTagName("span");
for (var i = 0; i < elements.length; i++) {
    if (elements[i].className == "aspLabel") {
        elements[i].innerHTML = "";
    }
}

elements = document.getElementsByTagName("label");
for (var i = 0; i < elements.length; i++) {
    if (elements[i].className == "labelClass") {
        elements[i].innerHTML = "";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:29:47.840

通过引用@Bert Evans 的帖子，我解决了我的问题。问题是我的所有标签字段（包括标题）的类名称为“*标签*”。因此，如果我使用 Bert 的解决方案，它将清除所有标签字段，包括标题（我不想要）。早些时候，我认为我可以通过为要清除的字段分配多个类来解决这个问题。像这样的东西

```
<asp:Label class="label clear" ID="lblBoxId" runat="server" Text="Box Id:"></asp:Label> 
```

然后是伯特的解决方案，

```
 var spans = document.getElementsByTagName("span");
 for (var i=0; i < spans.length; i++)
 {
     if ("clear" == spans[i].className)  //replacing 'label' with 'clear'
        spans[i].innerHTML = "";
 } 
```

这并不能解决问题。但是当我使用这两个类的组合时，问题就解决了:)。

```
 if ("label clear" == spans[i].className)  //using combination of classes as condition 
```

这可能很简单，但我真的浪费了我宝贵的时间来理解它。所以我分享了:)

**编辑**：也可以使用简单的方法来解决`indexOf()`

```
if (spans[i].className.indexOf("clear") != -1)   //not tested 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T13:45:11.510

为什么不使用带有 runat="server" 的 html 标签或 span，那么您将不会面临在不同浏览器中呈现不同控件的任何问题

```
<label id="lblMyLabel" runat="server"></label> 
```

或者

```
<span id="spMySpan" runat="server"></span> 
```

然后这段代码应该可以工作

```
var elements = document.getElementsByTagName("label");
for (var i = 0; i < elements.length; i++) {
        elements[i].innerHTML = "";
} 
```

# c# - IList 和 IList 有什么区别

> ID：14002674
> 
> 赞同：5
> 
> 时间：2012-12-22T12:03:48.723
> 
> 标签：c#, .net, generics, collections

`List<T>`.net 中的定义表明它实现了各种接口。

```
public class List<T> : IList<T>, ICollection<T>, IEnumerable<T>, IList, ICollection, IEnumerable 
```

有什么改变接口和没有`T`带来什么，`IList`即如果我的一个类实现`IList<T>`而不是`IList`，那么我可以将它用作我的自定义集合类吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-22T12:14:28.487

`List<T>`实现这两者`IList<T>`的原因`IList`是为了让它在你的代码假设的任何地方都可用`IList`。这将使过渡到泛型更容易，`IList<T>`因为它更合适。此外，如果您有一个 .net 1.1 或更早版本的代码，即使您的类是在 .net 2.0 或更高版本的程序集中实现的，您也想重用它，这将成为可能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-22T12:08:00.447

在 a`IList<T>`中，您只能放入已定义（T）类型的对象，而 IList 可以包含不同类型的对象

由于 AdressInformation 不是客户列表中的有效对象，因此下面的代码将不符合要求

```
IList<Customer> customers = new List<Customer>();
customers.Add(new Customer());
customers.Add(new AdressInformation()); 
```

此代码将编译但在运行时抛出异常

```
IList customers = new List<Customer>();
customers.Add(new Customer());
customers.Add(new AdressInformation()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-10T21:52:24.700

**问题：**

`IList`和 和有什么不一样`IList<T>`？

**回答：**

`IList`和都是`IList<T>`接口，但`IList`不是通用的，它既是命名空间的成员又属于`System.Collections`命名空间，而`IList<T>`通用的，它既是命名空间的成员又属于`System.Collections.Generic`命名空间。

也`System.Collections.IList`只是等同于和相同`System.Collections.Generic.IList<object>`。

因为`object`，在 C# 中，可以是任何可以在泛型类型中使用的类型`T`，在尖括号内，extends `object`，这意味着`System.Collections.IList`和`System.Collections.Generic.IList<T>`具有相同的表达能力。

这也说明了所有可以在界面的帮助下完成的`System.Collections.IList`任务，这些任务也可以在`System.Collections.Generic.IList<T>`界面的帮助下完成。

如果是这样，那么更喜欢什么：`System.Collections.IList`或`System.Collections.Generic.IList<T>`？

虽然`System.Collections.IList`更短并且需要更少的输入，`System.Collections.Generic.IList<T>`但仍然更好且更推荐，因为它使您的代码更加精确，准确，准确，正确，严格，信息丰富，解释性，详细，详细，详细，详细，详细，富有表现力，清晰，可读性和易读性，如果程序员在使用通用接口时出现任何错误，编译可能会失败，程序员会立即知道并理解他/她做错了什么，纠正错误，客户可能会在应用程序中遇到更少的错误。

但是不正确地使用非通用接口可能会产生未知的错误，客户可能会发现在应用程序中引发转换失败异常，使他/她不满意，向开发人员报告这些错误，并且还可能要求/要求/发起退款。

例如：

```
System.Collections.Generic.IList<int> list = GetSomeListOfIntegers();
list.Add(1);
list.Add(2);
list.Add(3);
list.Add("four");
list.Add(5); 
```

由于该行，上面的代码无法编译`list.Add("four");`。

该错误或多或少表明参数必须是`int`，但它是`string`。

最好在构建应用程序之前查看编译器错误并纠正所有错误。这样，客户就不会在应用程序中遇到不必要的错误并保持满意。

但是如果程序员不更改行`list.Add("four");`，那会导致编译器失败，而是替换`System.Collections.Generic.IList<int>`并`System.Collections.IList`修改方法`GetSomeListOfIntegers`以返回实例`System.Collections.IList`而不是实例`System.Collections.Generic.IList<int>`

然后代码编译成功，但是在`list.Add("four");`执行时，抛出一个强制转换失败异常，然后应用程序停止执行并终止。

如果所有的程序员和开发人员都找不到这个 bug，谁知道哪个客户会发现这个 bug。

这就是为什么命名空间的所有泛型类和接口（包括`IList<T>`）都比命名空间`System.Collections.Generic`的所有类和接口（包括 ）要好得多，`IList`并且`System.Collections`通常**应该**`System.Collections.Generic`是推荐的命名空间。

 **从历史上看，命名空间`System.Collections`和在这个命名空间中定义的所有类和接口，包括 interface `IList`，都存在于命名空间`System.Collections.Generic`和它的所有类和接口（包括`IList<T>`通用接口）之前。

命名空间`System.Collections.Generic`及其所有类和接口是在 Microsoft 的 .NET Framework 的更高版本中引入的。**

# javascript - 确保 IFRAME 的 onLoad 不会执行得太快

> ID：14002675
> 
> 赞同：1
> 
> 时间：2012-12-22T12:03:53.793
> 
> 标签：javascript, dom, onload

我刚刚发现我的问题的根源是父 HTML 调用子 IFRAME 中的控件**但**速度太快了，有时，超级*onLoad*在子*onLoad*有机会添加内容**之前**尝试这样做DOM。

 *我能做些什么呢？

我试图在孩子的*onLoad*中设置某种反馈。惨遭失败，有这么多奇怪的错误，花花公子可以总结出来*，请不要*。

我试图设置一个延迟器，它是史诗般的丑陋**且**不是 100% 可靠的。

编辑：

在`onload`我这样做：

```
var stuff = getReferenceToStuff();
var someDiv = stuff.contentWindow.document.getElementById("someDiv");
someDiv.className = "classy"; 
```

问题是**有时**引用*someDiv*为*空*，有时（通常当我按 F5 重新加载页面时）它指向正确的元素。我知道这是因为 IFRAME 的内容有点慢。

所以我的问题是这样的。如何确保*onload*被推迟，直到嵌入式 IFRAME 组件的*onload*确保它已被加载并且所有组件都在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:06:12.913

该`onLoad`事件并不总是在`document`. 它虽然在每个元素上都能正常工作。

```
var iframes = document.getElementsByTagName('iframe'),
    counter = 0,
    max = iframes.length;

[].forEach.call(iframes, iLoaded);

function iLoaded() {
    if (++counter === max) {
        callback();
    }
}

function callback() {
    // All the iframes are loaded
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:38:12.563

使用的`window.onload` *所有*内容时`body`，包括`iframe`s 的内容和所有其他资源（如图像），应在触发*之前加载。*`onload`但是，一些浏览器在触发时间上存在问题`onload`，即不同的浏览器在页面解析的不同阶段触发事件。

如果您使用`DOMContentLoaded`jQuery 的`$(document).ready()`，则仅加载主页的 HTML，但某些资源仍在工作中（包括`iframe`的内容加载）。我不知道如果为`iframe`元素本身附加一个内联侦听器会发生什么。

如果有时间问题，可能根本不会触发需要`iframe`在主窗口中引用的功能。`irame`而是在's 的主窗口中调用该函数`window.onload`。但即使这样也无法解决问题，如果您使用一些异步技术来填充`iframe`. 在这种情况下，您需要在完成所有请求后在主窗口中调用该函数。

（现在您可能还知道，我希望在您的帖子中看到哪些代码片段：））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:58:57.193

I have 2 solutions to your problem:

1.  If you are on HTML5, use [window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage). Just message from iFrame to the parent in the onload of iFrame. Parent should register handler in `<script>` tag, that appears before iFrame.

2.  Add a callback function to window in the '' tag before iFrame. This function is called by iFrame when it's load is complete. Here is the basic template.

Here is the sample template:

```
 <script>
  window.iframeCallback = function(message) {

    // first clear the temp function we added to the window
    // It is a bad practice to corrupt the global namespace
    delete window.iframeCallback;

    // you do your work here

  };
  </script>

  ..
  ..

  <!-- iFrame should appear after the above script-->
  <iframe/> 
```*

# java - 从命令行生成 SVG 失败，但使用 NetBeans 成功

> ID：14002676
> 
> 赞同：0
> 
> 时间：2012-12-22T12:04:04.250
> 
> 标签：java, command-line, character-encoding, svg, batik

我有一个奇怪的问题。我目前正在尝试使用 svg 生成，我使用以下代码生成 svg 文件：

```
public class SVGGenerator {

    private static void drawSquare(Graphics2D g2d) {
        g2d.setPaint(Color.blue);
        g2d.setFont(new Font(g2d.getFont().getName(), g2d.getFont().getStyle(), 60));
        g2d.drawString("Ruccc", 200, 64);
        g2d.setFont(new Font(g2d.getFont().getName(), g2d.getFont().getStyle(), 120));
        AffineTransform fontAT = new AffineTransform();

        // get the current font
        Font theFont = g2d.getFont();

        // Derive a new font using a rotatation transform
        fontAT.rotate(Math.PI / 2);
        Font theDerivedFont = theFont.deriveFont(fontAT);

        // set the derived font in the Graphics2D context
        g2d.setFont(theDerivedFont);

        // Render a string using the derived font
        g2d.setPaint(Color.red);
        g2d.drawString("bloody", 200, 64);
        g2d.setPaint(Color.green);
        // put the original font back
        g2d.setFont(new Font(g2d.getFont().getName(), g2d.getFont().getStyle(), 60));
        g2d.drawString("Ruccc", 200, 440);
    }

    public static void GenerateSVG()
    {
        DOMImplementation dom = GenericDOMImplementation.getDOMImplementation();
        Document doc = dom.createDocument(null, "svg", null);
        SVGGraphics2D generator = new SVGGraphics2D(doc);
        drawSquare(generator);
        // Write the generated SVG document to a file
        try {
                FileWriter file = new FileWriter("c://Development//out.svg");
                PrintWriter writer = new PrintWriter(file);
                generator.stream(writer);
                writer.close();
            } catch (IOException ioe) {
                System.err.println("IO problem: " + ioe.toString());
            }
    }    
} 
```

如果我使用 NetBeans 运行我的程序，它会生成以下内容：

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.0//EN'
          'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'>
<svg fill-opacity="1" xmlns:xlink="http://www.w3.org/1999/xlink" color-rendering="auto" color-interpolation="auto" stroke="black" text-rendering="auto" stroke-linecap="square" stroke-miterlimit="10" stroke-opacity="1" shape-rendering="auto" fill="black" stroke-dasharray="none" font-weight="normal" stroke-width="1" xmlns="http://www.w3.org/2000/svg" font-family="&apos;Dialog&apos;" font-style="normal" stroke-linejoin="miter" font-size="12" stroke-dashoffset="0" image-rendering="auto"
><!--Generated by the Batik Graphics2D SVG Generator--><defs id="genericDefs"
  /><g
  ><g fill="blue" font-size="60" stroke="blue"
    ><text x="200" xml:space="preserve" y="64" stroke="none"
      >RÃºccc</text
      ><text x="200" font-size="120" y="64" transform="matrix(0,1,-1,0,264,-136)" fill="red" stroke="none" xml:space="preserve"
      >bloody</text
    ></g
    ><g fill="lime" font-size="60" stroke="lime"
    ><text x="200" xml:space="preserve" y="440" stroke="none"
      >RÃºccc</text
    ></g
  ></g
></svg
> 
```

这在浏览器中正确显示。但是，如果我用cmd运行，文件内容如下：

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.0//EN'
          'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'>
<svg fill-opacity="1" xmlns:xlink="http://www.w3.org/1999/xlink" color-rendering="auto" color-interpolation="auto" stroke="black" text-rendering="auto" stroke-linecap="square" stroke-miterlimit="10" stroke-opacity="1" shape-rendering="auto" fill="black" stroke-dasharray="none" font-weight="normal" stroke-width="1" xmlns="http://www.w3.org/2000/svg" font-family="&apos;Dialog&apos;" font-style="normal" stroke-linejoin="miter" font-size="12" stroke-dashoffset="0" image-rendering="auto"
><!--Generated by the Batik Graphics2D SVG Generator--><defs id="genericDefs"
  /><g
  ><g fill="blue" font-size="60" stroke="blue"
    ><text x="200" xml:space="preserve" y="64" stroke="none"
      >Rúccc</text
      ><text x="200" font-size="120" y="64" transform="matrix(0,1,-1,0,264,-136)" fill="red" stroke="none" xml:space="preserve"
      >bloody</text
    ></g
    ><g fill="lime" font-size="60" stroke="lime"
    ><text x="200" xml:space="preserve" y="440" stroke="none"
      >Rúccc</text
    ></g
  ></g
></svg
> 
```

在这种情况下，浏览器会给我以下错误：

```
XML5617: Illegal XML character. 
out.svg, line 9 character 9 
```

但是，如果我键入 Ruccc 而不是 Rúccc，那么无论是从命令行还是从浏览器，一切都很好。我想问题在于 ú 的匈牙利字符的存在。如何在 Java 中使用 svg 生成处理匈牙利字符，以便从命令行正确生成我的 svg？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:35:05.080

使用[PrintWriter](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.lang.String,%20java.lang.String%29)的 2 参数形式并指定允许匈牙利语输出的适当字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:12:20.730

似乎是字符编码问题。当您从命令行开始时尝试设置编码`-Dfile.encoding=...`（用您需要的编码替换点）

# php - 空php文件的第一个字节值的长时间

> ID：14002677
> 
> 赞同：18
> 
> 时间：2012-12-22T12:04:12.483
> 
> 标签：php, apache, .htaccess, cakephp, mod-php

几个月前我有这样的[问题。](https://stackoverflow.com/questions/12116746/cakephp-sites-main-pages-time-to-first-byte-is-very-long)现在为了隔离问题，我尝试了一种新方法。我把一个空文件放到我的服务器上。

文件名为“foobar.php”。其内容如下：

```
<?php
echo "hello world"; 
```

但是当我尝试进入**example.com/foobar.php**时，我得到 了

> DNS 203 毫秒
> 连接 3.33 秒
> 发送 0 毫秒
> 到第一个字节的时间 17.35 秒
> 接收 1 毫秒 总加载时间 20.88 秒

然后我放了另一个名为“foobar.txt”的文件。其内容如下：

```
hello world<br/> 
```

**foob​​ar.txt**的加载时间约为 0.2 秒。

该网站位于共享主机内，因此我无法获得根 Linux 访问权限。我试图找出是什么让我的网站变慢了。

*   当我得到这些结果时，我的网站上有 60 位访问者。当它们处于活动状态时，它们会发送 AJAX 请求。当它们处于活动状态时，它们几乎每 3 秒发送一次 AJAX 请求。
*   通常我的网站每秒有 5-20 个请求。
*   我的托管服务提供商说没有发生 CPU 过载，通常非常低。
*   我向托管公司询问了 Apache 限制。我得到整个共享服务器的这个值：

> MaxClients 300
> MaxRequestsPerChild 4000
> ThreadsPerChild 25

*   **example.com/mybigpage.php**和**example.com/foobar.php**页面几乎同时打开。
*   如果页面有 txt、jpeg 或其他扩展名，它们会立即打开。如果扩展名是 php，则打开速度很慢。
*   CakePHP 将会话文件存储在“/httpdocs/app/tmp/sessions”文件夹中。会话文件在创建两个小时后被删除。现在该文件夹中有 3653 个文件。最旧的文件是 2.5 小时前创建的。
*   在我的配置中，PHP 处理程序是 Apache 模块 mod_php

**新编辑：** 我和我的托管公司谈过了。并告诉他们“foobar.php”几乎在 20 秒内打开。尽管该文件根本没有代码。他们告诉我，他们将“foobar.php”放到我们使用同一服务器的其他网站上。我也试过“othersite.com/foobar.php”。它立即打开。但是“mysite.com/foobar.php”几乎在 15 秒内打开。什么会导致这种行为？我们在其他网站上使用相同的 PHP 配置，但它们会立即打开。可能是因为我的 .htaccess 规则吗？还是别的什么？

**新Edit2：** 我的提供商告诉我服务器内不存在“apd.so”文件。所以看起来我不能使用 APD。

我应该寻找什么来找到瓶颈？
什么会限制我的网站？

* * *

附加数据：从phpinfo，我得到这个：

> './configure' '--prefix=/usr/local/lsws/lsphp5' '--build=x86_64-redhat-linux-gnu' '--host=x86_64-redhat-linux-gnu' '--target= x86_64-redhat-linux-gnu' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' '--libexecdir =/usr/libexec' '--localstatedir=/var' '--sharedstatedir=/usr/com' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '- -cache-file=../config.cache''--with-libdir=lib64'''--with-config-file-path=/etc''--with-config-file-scan-dir=/etc /php.dd' '--disable-debug' '--with-pic' '--disable-rpath' '--without-pear' '--with-bz2' '--with-curl' '-- with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/usr' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv ' '--with-jpeg-dir=/usr' '--with-openssl' '--with-libexpat-dir=/usr/lib64' '--with-pcre-regex=/usr' '--with -zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-sysvsem' ' --enable-sysvshm' '--enable-sysvmsg' '--enable-wddx' '--with-kerberos' '--enable-ucd-snmp-hack' '--with-unixODBC=shared,/usr' '--enable-shmop' '--enable-calendar' '--with-libxml-dir=/usr' '--with-mysql' '--with-mysqli' '--with-gd' '--启用域''--disable-dba' '--without-unixODBC' '--enable-xmlreader' '--enable-xmlwriter' '--with-mcrypt' '--enable-mbstring' '--with-litespeed' '- -enable-soap' '--with-xsl' '--with-pdo-mysql' '--with-pdo-sqlite' '--enable-sqlite-utf8' '--with-pspell' '--with -sqlite=shared' '--with-xmlrpc' '--with-mhash' '--enable-pdo' '--with-imap' '--with-imap-ssl' '--without-suhosin' ' --with-tidy' '--enable-zip' '--enable-inline-optimization' '--enable-gd-native-ttf' '--enable-bcmath'--enable-soap' '--with-xsl' '--with-pdo-mysql' '--with-pdo-sqlite' '--enable-sqlite-utf8' '--with-pspell' '-- with-sqlite=shared' '--with-xmlrpc' '--with-mhash' '--enable-pdo' '--with-imap' '--with-imap-ssl' '--without-suhosin' '--with-tidy' '--enable-zip' '--enable-inline-optimization' '--enable-gd-native-ttf' '--enable-bcmath'--enable-soap' '--with-xsl' '--with-pdo-mysql' '--with-pdo-sqlite' '--enable-sqlite-utf8' '--with-pspell' '-- with-sqlite=shared' '--with-xmlrpc' '--with-mhash' '--enable-pdo' '--with-imap' '--with-imap-ssl' '--without-suhosin' '--with-tidy' '--enable-zip' '--enable-inline-optimization' '--enable-gd-native-ttf' '--enable-bcmath'--enable-inline-optimization''--enable-gd-native-ttf'''--enable-bcmath'--enable-inline-optimization''--enable-gd-native-ttf'''--enable-bcmath'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T01:31:07.177

似乎很明显是一个 PHP 问题，因为 Apache 提供静态文件没有问题。您是否尝试过从PECL安装[APD ？](http://us2.php.net/apd)

使用像 APD 这样的 PHP 分析器将向您显示瓶颈是否在 PHP 中，如果是的话，它在哪里。例如，您正在使用的框架是否运行缓慢？或者也许只是一个流氓扩展？

来自官方[手册](http://us2.php.net/manual/en/apd.examples.usage.php)的解释：

使用 APD，您只需在入口点添加一条指令：

```
<?php
apd_set_pprof_trace();
?> 
```

APD 会将分析信​​息转储到 *apd.dumpdir/pprof_pid.ext*。

然后，**pprofp**将使用您的转储文件并告诉您哪些方法正在消耗响应时间：

```
bash-2.05b$ pprofp -R /tmp/pprof.22141.0

Trace for /home/dan/testapd.php
Total Elapsed Time = 0.00
Total System Time  = 0.00
Total User Time    = 0.00

Real         User        System             secs/    cumm
%Time (excl/cumm)  (excl/cumm)  (excl/cumm) Calls    call    s/call  Memory Usage Name
--------------------------------------------------------------------------------------
100.0 0.00 0.00  0.00 0.00  0.00 0.00     1  0.0000   0.0009            0 main
56.9 0.00 0.00  0.00 0.00  0.00 0.00     1  0.0005   0.0005            0 apd_set_pprof_trace
28.0 0.00 0.00  0.00 0.00  0.00 0.00    10  0.0000   0.0000            0 preg_replace
14.3 0.00 0.00  0.00 0.00  0.00 0.00    10  0.0000   0.0000            0 str_replace 
```

如果您看到的延迟没有出现在配置文件中，则表明这是系统范围的 PHP 配置问题（可能是恶意扩展或配置错误的扩展）。但我猜这是框架中的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T14:22:04.073

您写道，在发生此问题时，您有几个客户端每 3 秒执行一次 AJAX 请求。这使得您服务器上所有可用的 PHP 工作者都可能被这些 AJAX 请求阻止。您的 Web 服务器收到您的请求`/foobar.php`，然后必须等到 PHP 工作人员有空处理您的请求。

因此，针对您的问题的可能解决方案包括（如果您没有更具体地说明 AJAX 的用途，我需要保持一般性）：

*   让 AJAX 请求转到静态文件
*   确保 PHP 在 (AJAX) 请求完成时真正关闭连接，例如使用 a `header("Connection: close");`（尽管这可能还不够，请查看[PHP 手册中有关连接处理](http://php.net/manual/en/features.connection-handling.php)的注释）
*   减少 AJAX 请求的数量（减少到与您的提供商合作制定的数量）

一般来说，您需要您的提供商帮助解决这个问题。您没有写出您的提供程序使用哪种方法来提供 PHP，例如使用 fpm 时，有一个名为的设置`process.max`可以限制您的 Web 服务器并行处理这么多 PHP 文件的能力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T13:37:23.277

没有您的供应商的合作，您将没有机会找出问题所在。

我建议它类似于会话的磁盘 io 问题。

另一个有趣的点是您的提供商使用： [http](http://www.litespeedtech.com/php-litespeed-sapi.html) ://www.litespeedtech.com/php-litespeed-sapi.html 从来没有听说过这种情况。

如果您的提供商愿意接受 mjk 的建议，您只需更换您的提供商。接缝似乎是他们没有控制住他们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-29T12:17:47.143

如果相同的空 PHP 文件在移动到另一个站点时立即加载，则不可能是由于任何框架或包含的文件，因为此时尚未加载。

它可能是 php 或 Apache 端的配置问题，也可能是由您的重写规则引起的。我建议尝试以下方法：

1.) 如果允许每个站点的 PHP 设置，请要求托管公司将您的特定 php.ini 重命名为其他名称，从另一个站点复制 php.ini 并重新启动 Apache，看看是否有帮助。我在 Windows 上遇到了类似的问题，这是由于 php.ini 上的文件访问问题，所以这可能会有所帮助。

2.) 暂时重命名您的 .htaccess 并再次访问 php 文件。如果加载时间减少，您将遇到错误的重写条件或其他指令。您还可以发布您的.htaccess 的内容吗？

# importerror - 如何在gjs中导入St库

> ID：14002684
> 
> 赞同：4
> 
> 时间：2012-12-22T12:05:33.277
> 
> 标签：importerror, gjs

对[类似问题的回答](https://stackoverflow.com/questions/8700347/use-of-shell-object-in-gjs)表明我无法在独立模式下导入 Shell 内容。但是，据我了解，St 是一个用 C 编写的单独库。但我仍然无法在 gjs 中导入它......

IE

```
$ gjs -c "imports.gi.Gtk" 
```

工作（即没有输出）。但

```
$ gjs -c "imports.gi.St" 
```

失败了

```
Error: Requiring St, version none: Typelib file for namespace 'St' (any version) not found 
```

有没有办法从独立（不是 GNOME Shell 扩展）gjs 导入 St 库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T05:47:13.753

其中一些不存在（例如 Meta、Shell、St），因为它们被认为是“私有的”。在此处阅读有关如何导入它们的更多信息： http: [//mathematicalcoffee.blogspot.ca/2012/09/developing-gnome-shell-extensions_6.html ?m=1](http://mathematicalcoffee.blogspot.ca/2012/09/developing-gnome-shell-extensions_6.html?m=1)

由于使用了 CSS，St Lib 真的会（！！！）帮助编写具有自定义界面的应用程序。如果我们可以将库与 Clutter 和 gjs 一起使用，那么由于 St 和 Shell 库的易用性，它确实会吸引开发人员。

# java - 我怎样才能使这个for循环更短？

> ID：14002685
> 
> 赞同：1
> 
> 时间：2012-12-22T12:05:40.360
> 
> 标签：java, processing

我的头不再工作了。我必须尽快完成这个我怎样才能让这个 for 循环更短。

目前我有 4 个不同的 for 循环。我想把它们结合起来，只有一个。

```
Card[] cards = new Card[4*13];

void testCreateCards() {

  int k = 0;
  for (int suit = 0; suit <= 3; suit++) {               // for suit
    for (int value = 1; value <= 13; value++) {             // from Ace to King
      // build new card
      cards[k++] = new Card(suit, value);
    }
  }
}

void testDrawClubs() {
  int x = 0;
  int y = 0;
  for (int i = 0; i <= 12; i++) {
    cards[i].displayCard(x, y);
    x +=80;
  }
}

void testDrawDiamonds() {
  int x = 0;
  int y = 80;
  for (int i = 13; i <= 25; i++) {
    cards[i].displayCard(x, y);
    x +=80;
  }
}

void testDrawHearts() {
  int x = 0;
  int y = 160;
  for (int i = 26; i <= 38; i++) {
    cards[i].displayCard(x, y);
    x +=80;
  }
}
void testDrawSpades() {
  int x = 0;
  int y = 240;
  for (int i = 39; i <= 51; i++) {
    cards[i].displayCard(x, y);
    x +=80;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:08:25.680

[您可以使用模算术](http://en.wikipedia.org/wiki/Modular_arithmetic)直接计算 x 和 y，因为`i % 13`为您提供 x 坐标并`i / 13`为您提供 y 坐标：

```
void testDrawCards() {
    for (int i = 0; i < 52; i++) {
        int x = i % 13;
        int y = i / 13;
        cards[i].displayCard(x * 80, y * 80);
    }
 } 
```

# javascript - 如何使用 javascript 将 .load() 函数中的数据附加到 div？

> ID：14002687
> 
> 赞同：2
> 
> 时间：2012-12-22T12:06:17.367
> 
> 标签：javascript, jquery

对不起，如果我的问题令人困惑，目前我得到了这个工作：

```
success: function(json) {
            $('.msgWrapper').load('http://localhost:88/TicketSystem/support/ajaxmsg', {date: json.date, msg: json.msg}).fadeIn("slow");
        } 
```

但这只会用 .load() 函数返回的数据**替换**我的 div 的内容，我想将数据**附加**到我的 div 而不仅仅是替换。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T12:09:06.440

您可以使用 jQuery AJAX 速记[post](http://api.jquery.com/jQuery.post/)方法并获取数据，然后只需附加到您的元素：

```
success: function(json){
    $.post('http://localhost:88/TicketSystem/support/ajaxmsg', { date: json.date, msg: json.msg }, function(data){
        var newData = $('<div>').html(data);
        $('.msgWrapper').append(newData);
        newData.hide().fadeIn("slow");
    };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T12:08:57.737

```
var $temp = $('<div>').load('http://localhost:88/TicketSystem/support/ajaxmsg', {date: json.date, msg: json.msg});
$('.msgWrapper').append($temp.html()).fadeIn("slow"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T12:09:28.357

我只是发送 POST 请求并手动附加：

```
$.ajax({
    url: 'http://localhost:88/TicketSystem/support/ajaxmsg',
    type: 'post',
    data: {
        date: json.date,
        msg: json.msg
    },
    success: function(response) {
        $('.msgWrapper').append(response);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T12:56:16.670

试试这个：

```
$(".msgWrapper").append($("<div>").load('http://localhost:88/TicketSystem/support/ajaxmsg', {date: json.date, msg: json.msg}).fadeIn("slow"); 
```

# relationship - 我可以在 CardDAV 服务器上创建 vCard 之间的关系吗？

> ID：14002688
> 
> 赞同：3
> 
> 时间：2012-12-22T12:06:19.707
> 
> 标签：relationship, carddav

很惊讶我在这里找不到类似的问题。

我正在寻找一种在人与人之间建立关系（父亲/姐妹/妻子等）的方法，最好是在 vCard 中。我可以很容易地创建一个保存关系的数据库，但是该应用程序将不遵守标准或建议。

有人知道相关的标准或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T01:54:39.407

该`RELATED`属性正是这样做的（参见[RFC 6350](https://www.rfc-editor.org/rfc/rfc6350) p.43）。引用规范，此属性的目的是：

> 指定另一个实体与此 vCard 表示的实体之间的关系。

它的值可以是 URI 或自由格式的文本。有用的 URI 示例包括网站地址、指向 vCard 的 URL 或引用`UID`另一个 vCard 属性的 URN。

它还有一个`TYPE`参数，可以选择用于定义关系的类型。此参数的可接受值列表可在[vCard 规范](https://www.rfc-editor.org/rfc/rfc6350)中找到。

```
RELATED;TYPE=parent:http://example.com/jeb-doe.vcf
RELATED;TYPE=sibling:urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
RELATED;TYPE=spouse;VALUE=text:Jane Doe 
```

`RELATED`vCard 4.0 版支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T17:45:13.897

对于 vCard 3，您可能想要镜像 iOS/OSX 所做的事情：

```
item3.X-ABRELATEDNAMES:John Doe
item3.X-ABLabel:_$!<Father>!$_
item4.X-ABRELATEDNAMES:Judy Doe
item4.X-ABLabel:_$!<Sister>!$_
item5.X-ABRELATEDNAMES:Joanna Doe
item5.X-ABLabel:_$!<Mother>!$_ 
```

# jdbc - 以正确的方式执行 jdbc 事务

> ID：14002691
> 
> 赞同：1
> 
> 时间：2012-12-22T12:07:06.477
> 
> 标签：jdbc, transactions

我有一个数据库表，用于记录其他表中发生的更改。我的日志表的表结构如下。

```
 Log_Table(id, table_name, operation, flag)
    values   (1,  Customer_Table, 1,       1);
    values   (2,  Customer_Table, 2,       1);
    values   (3,  Customer_Table, 1,       1);
    values   (4,  Customer_Table, 2,       1);
    values   (5,  Customer_Table, 1,       1); 
```

我通过执行以下操作针对网页上的按钮更新此表：

```
/* first */
public List<Long> select_Changes()
{
    select id from Log_Table where flag =1;
}

/* (wait for user input) */

/* second */
public void update_table(List<Long> ids)
{
    update Log_Table set flag =0 where id in( ids)
} 
```

问题是在第一次和第二次操作之间由用户来执行操作。同时另一个用户同时做同样的操作。我不希望第二个用户选择第一个用户已经选择的行；也就是说，当第二个用户运行第一步时（假设自第一个用户运行后又添加了两行），结果应该是：

```
 values(6,Customer,2,1);
    values(7,Customer,1,1); 
```

请建议我应该怎么做？选择行后，我需要锁定行以进行任何类型的操作。我尝试了 select for update 子句，但没有解决问题。它在一个网络应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:53:09.017

在等待用户输入时保持数据库事务打开几乎不是一个好主意。如果用户在交易未决时去吃午饭，或者他们的网络连接中断并且几天没有恢复怎么办？

此外，您没有说您使用的是什么数据库产品。根据产品、它的配置和事务隔离级别，并发尝试的结果是什么事务是未决的，所以如果你想要可移植的行为，你不能依赖于行为`SELECT FOR UPDATE`甚至更标准化的特性。

我的建议是在行中提供一种方法来识别等待用户确认的待处理行。您可以对列使用三种状态`flag`，以表示类似`available`、`pending`和`taken`; 但是，您可能希望有某种方法来识别呈现给用户但用户从未单击“确定”或“取消”（或任何选项）的行。如果为此目的添加时间戳列，则可以为该列保留两种状态，并在第一步`flag`使用类似这样的内容（假设您使用的是支持该子句的数据库）：`RETURNING`

```
public List<Long> select_Changes()
{
    UPDATE Log_Table
      SET when_presented = CURRENT_TIMESTAMP
      WHERE flag = 1
        AND when_presented = NULL
      RETURNING id, when_presented;
} 
```

第二步将改为：

```
public void update_table(List<Long> ids)
{
    UPDATE Log_Table
      SET flag = 0
      WHERE id IN (ids)
        AND when_presented = time_claimed;
} 
```

第二步*不一定*需要更改，但是通过上述更改，您可以使用另一个`RETURNING`子句来确认该用户实际声明了哪些值，如果维护过程重新设置到明显放弃的行集上`id`，则关闭竞争条件，否则会出现然后在第一个用户迟来试图认领它们之前将它们呈现给另一个用户。`when_presented``NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:05:16.350

我添加了一个时间戳列和一个带有结构的额外表

```
Last_Oeration_Time(id number, last_op_time timestamp(6)) 
```

当第一个用户单击按钮时，我在 Last_Oeration_Time 上运行 sql 插入查询，例如 insert int Last_Oeration_Time(id,last_op_time) values(seq_lasst_op_time_id.nextval,sysdate)

现在，当第二个用户运行第一步时（假设自第一个用户运行以来又添加了两行），结果是期望的结果。这个可以吗？

# android - 特定日期和时间的 AlarmManager

> ID：14002692
> 
> 赞同：4
> 
> 时间：2012-12-22T12:07:09.487
> 
> 标签：android, alarmmanager

我想在特定日期和时间（25/12/2012 12:00）显示一个对话框，我正在使用此代码。我设置为 11 个月（因为 0 是 gen），但警报没有启动。我的错误是什么？

```
Calendar cal=Calendar.getInstance();
    cal.set(Calendar.MONTH,11);
    cal.set(Calendar.YEAR,2012);
    cal.set(Calendar.DAY_OF_MONTH,25);
    cal.set(Calendar.HOUR_OF_DAY,12);
    cal.set(Calendar.MINUTE,00);
    cal.set(Calendar.SECOND,0);

Intent _myIntent = new Intent(context, Notify.class);
    PendingIntent _myPendingIntent = PendingIntent.getBroadcast(context, 123, _myIntent, PendingIntent.FLAG_UPDATE_CURRENT|  Intent.FILL_IN_DATA);

AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), _myPendingIntent); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T12:33:29.143

Look at below code about how i am going to set the alarm for the December month:

```
// for Alarm 25/12/2012 at 12.00   
Calendar myAlarmDate = Calendar.getInstance();
myAlarmDate.setTimeInMillis(System.currentTimeMillis());
myAlarmDate.set(2012, 11, 25, 12, 00, 0);
AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

Intent _myIntent = new Intent(context, AlarmReceiverNotificationForEveryMonth.class);
_myIntent.putExtra("MyMessage","HERE I AM PASSING THEPERTICULAR MESSAGE WHICH SHOULD BE SHOW ON RECEIVER OF ALARM");
PendingIntent _myPendingIntent = PendingIntent.getBroadcast(context, 123, _myIntent, PendingIntent.FLAG_UPDATE_CURRENT);
alarmManager.set(AlarmManager.RTC_WAKEUP, myAlarmDate.getTimeInMillis(),_myPendingIntent); 
```

You can update the above code with your intent and class and you will get your desire output.

Hope this help you.

# iphone - iPhone模拟器和设备之间的屏幕标签颜色不同？

> ID：14002694
> 
> 赞同：1
> 
> 时间：2012-12-22T12:07:16.290
> 
> 标签：iphone, ios

在我的应用程序中，我为我的 UILabel 设置了`Red(34)`, `Green(7)`,`Blue(107)`值。当我在 iPhone 模拟器中运行时，它会显示我需要的确切颜色。但是当我在 iPhone 设备上运行它时，与 iPhone 模拟器相比，它显示出一些颜色变化。但是当我从 iPhone 设备上截取屏幕截图时，它会显示准确的颜色。我真的很困惑。我无法获得我的彩色屏幕截图。

那么任何人都可以使用您的示例应用程序（使用标签）对此进行测试，并向我提供您的评论和反馈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:11:40.167

问题在于 iPhone 和 Mac 显示器的精确物理性能差异很大。这不是编程/软件错误，您对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:21:57.120

是的，会发生这种情况，因此您不能仅通过在模拟器中显示来检查和获得批准来依赖。您需要在 iPhone 中实时查看。

您可以做的是添加一些额外的值并在 iPhone 中再次检查

红色 +(10-15)，绿色 +20，蓝色 +15

这将使颜色接近您在 iPhone 中想要的颜色。

# javascript - 我无法停止 CSS 发光效果

> ID：14002697
> 
> 赞同：1
> 
> 时间：2012-12-22T12:07:51.607
> 
> 标签：javascript, jquery, html, css

发光的 CSS 效果是：

```
//Public Variables.
var clear_interval;
var stop_set_time_out;

function record_css_effect() {
    clear_interval = setInterval(

    function() {
        rec_block.css('background-color', "red");
        stop_set_time_out = setTimeout(function() {
            rec_block.css('background-color', "green");
        }, 500)
    }, 1000);
}; 
```

在另一个函数中，我调用：

```
function stop_record() {
    alert("Stop record.");
    clearTimeout(stop_set_time_out);
    clearInterval(clear_interval);
}​ 
```

发光只在第一次停止。

第二次，我没有调用`record_css_effect()`函数**，但是**发光效果自动发生了......这意味着`clearTimeout`and`clearInterval`不起作用......

为什么会这样，我该如何实现？

更新：

实际上，我使用**clearInterval( clear_interval );** 在很多地方。
当用户想要记录时，他们按下一个按钮，然后调用 pop_record_window()。

* * *

```
function pop_record_window()
{
 $('#start_and_stop_rec').click
 (
    function(){ record_voice(); }
 ) 
}
function record_voice()
{
    record_css_effect();
    REC= $("#start_and_stop_rec");
    if(REC.prop("value")=="record")
    {
        alert("Start to record");           
        alert( dir_path + User_Editime + "/rec"+"/" + "P" + current_page + "_" + records_pages_arr[current_page].get_obj_num() +".mp3");
        current_rec_path= dir_path + User_Editime + "/rec"+"/" + "P" + current_page + "_" + records_pages_arr[current_page].get_obj_num() +".mp3";
        cur_record_file= new Media(current_rec_path,onSuccess, onError);
        cur_record_file.startRecord();  

        $('#stop_rec').bind("click", function(){

            clearTimeout( stop_set_time_out );
            clearInterval( clear_interval ); 

        });

        REC.prop("value","stop");
    }
    else if(REC.prop("value") == "stop")
    {
        stop_record();
        cur_record_file.stopRecord();           

        clearInterval( clear_interval );
        //make visibility hidden!
        REC.prop("value","record");
    }   
}; 
```

但是从第二次开始，用户没有按下按钮：**start_and_stop_rec**，发光效果触发。但是， if(REC.prop("value")=="record") 条件中的代码不会执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:38:00.613

如果您`record_css_effect()`多次调用，可能会启动多个间隔，但只有最后一个间隔 ID 将存储在`clear_interval`. 通过确保一次只运行 1 个间隔，您可以防止这种情况发生。

```
//Public Variables.
var clear_interval;
var stop_set_time_out;

function record_css_effect() {
    if (clear_interval !== null) // if a timer is already returning don't start another
        return;

    clear_interval = setInterval(function () {
        rec_block.css('background-color', 'red');
        stop_set_time_out = setTimeout(function () {
            rec_block.css('background-color', 'green');
        }, 500)
    }, 1000);
};

function stop_record() {
    alert("Stop record.");
    clearTimeout(stop_set_time_out);
    clearInterval(clear_interval);
    stop_set_time_out = clear_interval = null;
} 
```

您还可以使代码更简单（通过删除`setTimeout`）以使其更易于调试，如下所示：

```
//Public Variables.
var clear_interval, isRed = false;

function record_css_effect() {
    if (clear_interval !== null) // if a timer is already returning don't start another
        return;

    clear_interval = setInterval(function () {
        if (isRed) {
            rec_block.css('background-color', 'red');
            isRed = false;
        } else {
            rec_block.css('background-color', 'green');
            isRed = true;
        }
    }, 500);
};

function stop_record() {
    alert("Stop record.");
    clearInterval(clear_interval);
    clear_interval = null;
}? 
```

# microcontroller - 如何重新编程旧计算机 rom 并将其用作 rom 内存以执行另一项任务？

> ID：14002701
> 
> 赞同：2
> 
> 时间：2012-12-22T12:08:26.803
> 
> 标签：microcontroller, robotics, rom

我已经打开了一个旧的 Pentium 桌面。主板是Zida 5svx。我从手册（我从互联网上下载的）知道了板上 ROM 芯片的位置，并把它拿出来。手册中提到该芯片是Flash EEPROM。

现在，我感兴趣的是：有没有办法擦除 ROM 并用它闪烁，比如说一个 C 程序来闪烁一个 LED（我知道这可能会让你大笑，但继续阅读)，还是控制电机？

我还想知道我是否可以用剩下的 Pentium、几 MB 的 RAM 和这个 ROM 构建一个超大尺寸的微控制器。

有什么建议么？

PS：我知道这样的 uC 需要适当的电源设置和其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-11T21:10:21.620

关键在于获取并深入研究制造商针对您移除并希望重复使用的每个设备的数据表。我假设既然您问了您所做的问题，那么您不是专业的电气工程师 - 没关系，但是您需要进行数小时、数天或数周的学习才能真正充分理解数据表以成功重用您的主板芯片，因为它们是为具有多年经验的专业工程师编写的，不幸的是，它们并不是为了让业余爱好者理解而编写的。如果您能够成功获取并彻底理解所有数据表（以及相关的用户指南以及更复杂的芯片），那么您已经到了可以根据您回收的零件开始定制设计的地步，至少在纸上。为了测试您的设计并确保其每个部分都能正常工作，至少需要一台示波器和电压表——以及如何使用它们的知识。了解基本的电子学是必不可少的，没有它你就不会成功。如果您希望让您的设计真正发挥作用，那么还需要非常好的焊接/返工/组装技能——您可以正确地做其他所有事情，如果您缺乏这方面的技能，它仍然可能失败。我根本没有足够的时间就你需要知道的一切向你提供建议——但如果你有动力、有奉献精神，并且在遇到挫折和障碍时不放弃（相信我，它们经常发生即使是最好的工程师和最好的设计）——这意味着当事情不顺利时你不会轻易感到沮丧——那么你就有成功的机会。我祝你一切顺利，并尝试在做的时候玩得开心（重要的是，如果你从项目中得到的只是乐趣）。:)

# c# - 从平铺地图中的索引获取矩形

> ID：14002702
> 
> 赞同：0
> 
> 时间：2012-12-22T12:08:47.500
> 
> 标签：c#, xna, grid, 2d, tile

我有一些瓷砖地图，其中所有瓷砖都是 64x64 像素。如果知道瓷砖地图中的索引，我需要知道瓷砖的位置。我如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T12:25:38.690

这应该可以帮助您找到图块的 x 和 y 坐标：

```
int tileY = tileIndex / numberOfTiles;
int tileX = (tileIndex % numberOfTiles) - 1; 
```

numberOfTiles 是指瓦片图 x 方向上的瓦片数，例如，如果瓦片图是 16 瓦片宽和 20 瓦片高，则 numberOfTiles 将为 16。要获得其他 2 个坐标，只需将瓦片高度添加到 tileY 和平铺宽度到 tileX。

# android - 如何在 netbeans 的 Web 服务中找到 SoapAction

> ID：14002705
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:08:48.653
> 
> 标签：android, web-services

有人可以帮忙吗

我在 NetBeans 中创建 Web 服务，但找不到soapAction。我想用它在eclipse中连接我的android应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:25:04.977

假设您的包是“com.android”，方法名称是“yourmethod”，那么soapAction 将是-

```
Private String SoapAction="http://android.com/yourmethod" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:11:47.137

我认为最简单的解决方案是解决我关于 Android 中 Ksoap 的问题

```
static final String ADDRESS = "http://10.0.2.2";
private static final String METHOD_NAME = "amir";
private static final String NAMESPACE = "http://abc/";
private static final String SOAP_ACTION = NAMESPACE + METHOD_NAME;
private static final String URL = ADDRESS + ":8080/Test/myaccount?WSDL"; 
```

# salesforce - 什么是销售队伍的动态顶点？

> ID：14002709
> 
> 赞同：2
> 
> 时间：2012-12-22T12:09:25.877
> 
> 标签：salesforce, apex-code

我正处于 Salesforce Apex 的学习阶段。我已阅读 Dynamic Apex 的主题，但无法理解该概念。有人可以解释一下如何处理它以及最好在哪些情况下使用？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T03:22:16.727

**用例 1：**

您正在开发一个页面，该页面读取 salesforce 对象元数据以向用户显示对象记录。您想使用 describe 全局方法，但不知道如何将标准 SOQL 与泛型`SObject`类型结合起来。

标准 SOQL 例如

```
Person__c [] persons = [SELECT Id, Name, Age__c, Height__c FROM Person__c]; 
```

但是 describe 全局元数据方法返回一个 SObject 类型。

**解决方案：**

使用 describe 全局方法获取对象列表，然后进一步获取该对象上的所有字段。在包含所有字段的本地字符串变量中构建一个 SELECT 语句，然后使用`Database.query()`.

```
string objectfullname = 'scenario__c';
Schema.SObjectType targetType = Schema.getGlobalDescribe().get('scenario__c');
if (targetType == null) {
    system.debug('Type not found: '+objectFullname);
    throw new TypeNotFoundException(objectFullName);
}
Schema.DescribeSObjectResult typedescription = targetType.getDescribe();
Map<String, schema.Sobjectfield> resultMap = typedescription.Fields.getMap();
string query = 'SELECT ' + string.join(new List<string>(resultMap.keySet()), ',') + ' FROM '+ objectfullname + ' LIMIT 100';
sobject [] records = Database.query(query); 
```

**用例 2**

您希望将代码与 beta 托管打包中的自定义对象松散耦合，以便可以卸载和升级托管打包。

**解决方案**

当您使用该`Database.query()`方法时，您的代码不会针对自定义对象进行编译，因此可以重新安装它，而无需注释掉代码以删除依赖关系。

**用例 3**

您有一个触发器，可在插入后根据动态字段映射架构将记录复制到另一个自定义对象。您不能以标准方式对其进行编码，`[SELECT ...]`因为您只知道在运行时要插入的对象。

**解决方案**

同样，使用 describe 全局方法和 Database.query 获取记录和类型信息，然后您可以像普通 DML 一样插入目标对象。

```
sobject newRecord = ...
for (integer i = 0; i < fieldCount; i++) {
    newRecord.put(fields[i],values[i]);
}
insert newRecord; 
```

如果您像往常一样进行批量插入，请确保不要将 DML（插入、更新）语句放在循环中。

# c# - 是否可以保存当前的 XMLReader Position 供以后使用？

> ID：14002711
> 
> 赞同：11
> 
> 时间：2012-12-22T12:09:33.397
> 
> 标签：c#, .net, xml, xml-serialization, xmlreader

我从之前由对象写入的对象中创建了`XMLReader`一个对象。`Stream``XMLWriter`

我知道`XMLReader`对象只是向前的，因此我希望能够保存当前的阅读位置，这样我就可以从我停止阅读的地方继续阅读。

可能吗？
我知道这可能很棘手，因为`XMLreader`读取内存块的块，所以恢复当前 XML 元素读取点可能会是一个问题。

请仅在您确定的情况下提供建议，这将根据您在此问题上的经验来发挥作用。

**注意**：
1.我想简单地保存该场景的整个`XMLReader`对象引用。
2.`XMLReader`位置=当前指向读取元素的指针，而不是`Stream.Position`其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-26T16:03:17.423

我在一个外部系统写入 xml（没有定义的命名空间）的项目中工作，我们需要读取它们以查找具有一些特殊值的节点：

*   当值没有准备好时，我们在几分钟后再次读取。
*   在其他情况下，我们处理节点（属性、值等）

所以，我认为这段代码可以帮助你：

```
var input1 = @"<root>
 <ta>
   <XGLi6id90>774825484.1418393</XGLi6id90>
   <VAfrBVB>
     <EG60sk>1030847709.7303829</EG60sk>
     <XR>NOT_READY</XR>
   </VAfrBVB>
 </ta>
 <DxshpR>1123</DxshpR> 
```

```
var input2 = @"<root>
 <ta>
   <XGLi6id90>774825484.1418393</XGLi6id90>
   <VAfrBVB>
     <EG60sk>1030847709.7303829</EG60sk>
     <XR>99999999</XR>
   </VAfrBVB>
 </ta>
 <DxshpR>1123</DxshpR> 
```

```
var stream1 = new MemoryStream(Encoding.UTF8.GetBytes(input1));
var stream2 = new MemoryStream(Encoding.UTF8.GetBytes(input2));
stream1.Position = 0;
stream2.Position = 0;

var position1 = DoWork(stream1, new Position());
var position2 = DoWork(stream2, position1);

    public static Position DoWork(Stream stream, Position position)
    {
        using (XmlTextReader xmlTextReader = new XmlTextReader(stream))
        {
            using (XmlReader xmlReader = XmlReader.Create(xmlTextReader, xmlReaderSettings))
            {
                // restores the last position 
                xmlTextReader.SetPosition(position);

                System.Diagnostics.Debug.WriteLine(xmlReader.Value); // Second time prints 99999999

                while (xmlReader.Value != "NOT_READY" && xmlReader.Read())
                {
                    // a custom logic to process nodes....
                }

                // saves the position to process later ...
                position = xmlTextReader.GetPosition();

                System.Diagnostics.Debug.WriteLine(xmlReader.Value); // First time prints NOT_READY
            }

        }

        return position;
    }
}

public class Position
{
    public int LinePosition { get; set; }
    public int LineNumber { get; set; }
}

public static class XmlReaderExtensions
{
    public static void SetPosition(this XmlTextReader xmlTextReader, Position position)
    {
        if (position != null)
        {
            while (xmlTextReader.LineNumber < position.LineNumber && xmlTextReader.Read())
            {
            }

            while (xmlTextReader.LinePosition < position.LinePosition && xmlTextReader.Read())
            {
            }
        }
    }

    public static Position GetPosition(this XmlTextReader xmlTextReader)
    {
        Position output;

        if (xmlTextReader.EOF)
        {
            output = new Position();
        }
        else
        {
            output = new Position { LineNumber = xmlTextReader.LineNumber, LinePosition = xmlTextReader.LinePosition };
        }

        return output;
    }
} 
```

重要且明显的是，只有当 xml 的结构（换行符、节点等）始终相同时，它才会起作用。在其他情况下，它将不起作用。

# jquery - 元素存在时触发事件

> ID：14002714
> 
> 赞同：4
> 
> 时间：2012-12-22T12:09:49.603
> 
> 标签：jquery

我有一个空`div`元素：

```
<div class="message"></div> 
```

在网页的某个点，一个`p`标签被动态添加到 div 中：

```
<div class="message">
  <p>Some Message</p>
</div> 
```

可以删除，然后`p`再次添加等等。

`div.message`如果有`p`孩子并执行一些代码，我应该使用什么事件来监听？

我发现[了这个](https://stackoverflow.com/questions/7219795/jquery-element-exists-event)问题，但它涉及外部插件。

难道没有一种简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T12:14:29.427

根据您的实现以及您需要以多快的速度识别更改，您可能能够避免使用 a`setInterval`定期监视某个元素的内容。

```
var checkContents = setInterval(function(){
  if ($("div.message p").length > 0){ // Check if element has been found
    // There is a <p> element in here!!
    console.log($("div.message p").length());
  }
},1000); 
```

前面的代码片段将每秒（1000 毫秒）检查`<p>`元素中的元素，如果存在，会将它们的数量记录到控制台。`div.message`

* * *

根据您的浏览器支持要求，您也可以使用突变事件 -

> [突变事件为网页或扩展提供了一种机制，以获取有关对 DOM 所做更改的通知...](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)

```
var element = document.querySelectorAll('div.message')
element.addEventListener("DOMNodeInserted", function (ev) {
  // ...
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-29T03:52:18.983

Vanilla JS 有一种很棒的方法来检测任何 DOM 更改（包括节点是否添加了任何子节点），请查看：[https ://developer.mozilla.org/en-US/docs/Web/API/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

但是这些文档不是很清楚，所以这里有一个快速的解释。

首先，你想要一个目标节点来监听：

`const targetNode = document.getElementById('some-id');`

然后你想在目标改变时创建一个触发器（称为 MutationObserver）：

`const observer = new MutationObserver(callbackFunction);`

定义当目标改变时你想要发生的事情：

`const callbackFunction = function(mutationsList) { // Use traditional 'for loops' for IE 11 for(const mutation of mutationsList) { if (mutation.type === 'childList') { console.log('A child node has been added or removed.'); } else if (mutation.type === 'attributes') { console.log('The ' + mutation.attributeName + ' attribute was modified.'); } } };`

注意：mutationsList 是一个包含大量信息的对象，targetNode 发生了什么变化，包括样式、addedNodes 等...

最后，您可以开始观察目标节点的突变（更改）：

`observer.observe(targetNode, { childlist: true, attributes: true });`

第二个参数是一个“选项”对象，用于定义您正在寻找的突变（更改）类型。

希望这会有所帮助，我发现它是 js 中一个非常强大且被低估的工具

# c# - 使用 JSON.NET 反序列化类型为接口的列表

> ID：14002716
> 
> 赞同：3
> 
> 时间：2012-12-22T12:10:02.263
> 
> 标签：c#, .net, serialization, json.net, deserialization

我有一个包含不同类型事件的列表的“包装器”类。因此，列表本身使用通用的“AnEvent”接口而不是具体类型。

```
public class EventLog
{
    [JsonProperty()]
    private List<AnEvent> events;

    // note that the list is private and has no getter/setter
} 
```

界面如下所示：

```
//public enum EventTypes { EventA, EventB };

public interface AnEvent
{
    EventTypes EventType
    {
        get;
        set;
    }

    // some other properties...
} 
```

最后但并非最不重要的一点是，具体的事件类型可能如下所示：

```
public class ConcreteEventA : AnEvent
{
    private EventTypes eventType = EventTypes.EventA;

    public EventTypes EventType
    {
        get { return eventType; }
        set { eventType = value; }
    }

     // ...
}

public class ConcreteEventB : Event
{
    // ....
} 
```

可以看到，这里关于事件类型的信息有点多余（有类本身的类型，例如ConcreteEventA，类内部有一个叫做EventType(enum)的属性）。

EventLog 对象的序列化工作正常并返回事件的 JSON 列表。事件的类型表示如下：（`"EventType": 0`它是枚举的“EventA”）。

但是我无法将 JSON 反序列化回 EventLog 实例（“类型是接口或抽象类，无法实例化”）。当然，绝对清楚解串器无法确定列表中每个事件所需的类型。但是由于由于 EventType 属性（在本例中为 0 或 1），我拥有类型的信息，我想知道如何使用该信息正确反序列化整个事物。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:40:08.253

好吧，它不是 JSON.Net，而是使用[System.Web.Script.Serialization.JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)，您可以使用[SimpleTypeResolver](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.simpletyperesolver.aspx)将派生类型映射到接口。

使用 JSON.Net，这似乎可以通过[IContractResolver](http://james.newtonking.com/archive/2009/10/23/efficient-json-with-json-net-reducing-serialized-json-size.aspx)来实现，它使您可以使用自定义行为来处理序列化和反序列化级别。

似乎这两种方法都需要在序列化期间将某些东西（例如指示类型的额外属性）插入 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T08:09:17.567

`JsonConverter`你能在这方面提供帮助吗？但是您需要在进行序列化时输入类型名称。有关更多信息，请参阅问题[using-json-net-converters-to-deserialize-properties](https://stackoverflow.com/questions/2254872/using-json-net-converters-to-deserialize-properties)

# grid - Kendo UI 网格：自定义 k-grouping-header 文本配置

> ID：14002717
> 
> 赞同：2
> 
> 时间：2012-12-22T12:10:05.443
> 
> 标签：grid, kendo-ui

当使用 jQuery 方法设置自定义分组标题消息时（编辑：过去在这些论坛上由 KENDO UI 支持人员推荐），例如

```
 $(".k-grouping-header").html("my custom grouping message"); 
```

如果用户将列标题拖到组标题，然后单击 (X) 以删除分组，则自定义消息将恢复为标准消息。

有没有办法将此自定义消息设置为网格配置的一部分，以便它能够在分组/解组操作中继续存在？

需要明确的是，我有一个自定义消息，与本地化消息不同；例如，如果部门是网格上设置为可分组的唯一列，则“将 [department] 列标题拖到此处以按部门分组”。消息会因网格而异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T15:03:57.923

根据您可以使用的文档。

```
groupable: {
    messages: {
        empty: "Custom message text"
    }
} 
```

文档最近变得相当好。

# asp.net-mvc - 链接将我转到错误的页面

> ID：14002722
> 
> 赞同：0
> 
> 时间：2012-12-22T12:11:31.880
> 
> 标签：asp.net-mvc, asp.net-mvc-3

嗨，我正在尝试创建指向 Products 控制器的链接，但我似乎做错了什么。这是我的代码：

```
@Html.ActionLink(subcategory, "Products") 
```

当我点击这个链接时，我想被发送到这样的地方：

```
http://localhost:2100/Products 
```

相反，我被发送到此页面：

```
http://localhost:2100/Home/Products 
```

如果我打开产品页面 cotontroller 并单击我收到的链接E：

```
http://localhost:2100/Products/Products 
```

那么，考虑到链接位于 _Layout.cshtml 视图中这一事实，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:14:07.443

因为您正在设置路线的动作部分。用这个：

```
@Html.ActionLink(subcategory, "Index", "Products") 
```

**编辑**

查看您正在使用的方法的签名：

```
Html.ActionLink(string linkText, string actionName, string controllerName) 
```

您正在使用的重载是这个：

```
Html.ActionLink(string linkText, string actionName) 
```

这意味着在此重载中，您不设置路由的控制器部分。因此，当我们不设置路由的一部分时，它将自动从当前路由中读取，这意味着：当我们在其控制器所在的路由中时`Home`，您的链接的控制器将是`Home`并且您将获得此路由：

```
@Html.ActionLink(subcategory, "Products", "Home") 
```

当您在带有控制器的路线中时`Products`，您将获得以下路线：

```
@Html.ActionLink(subcategory, "Products", "Products") 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:20:05.770

[Html.ActionLink](http://msdn.microsoft.com/en-us/library/dd505070%28v=vs.108%29.aspx)具有以下语法：

```
public static MvcHtmlString ActionLink(
this HtmlHelper htmlHelper,
string linkText,
string actionName,
string controllerName
) 
```

正如[Javad_Amiry](https://stackoverflow.com/users/645167/javad-amiry)正确回答的那样，您可以使用以下代码创建链接：

```
@Html.ActionLink(subcategory, "Index", "Products") 
```

其中，子类别：来自此的内容将用于创建链接文本“索引”：是操作名称。“产品”：是控制器名称。

帮助您会更容易，也必须发布路线配置代码。

# javascript - 在 Visual Studio 2012 中加载图像的问题

> ID：14002724
> 
> 赞同：2
> 
> 时间：2012-12-22T12:11:48.537
> 
> 标签：javascript, html, visual-studio-2012

我是 Visual Studio 2012 的新手，我有一个项目，我需要通过 javascript 将一些图像加载到视图中，基本上我有一个数组，其中填充了一些项目描述和每个图像的路径，但是当页面加载页面时无法加载图像，因为它永远找不到它们

我用来实现这一点的 javascript 代码是：

```
 var item = {
        name: "",
        price: 0,
        index: 0,
        picURL: ""
    };

    function Item(name, price, index, picURL) {
        this.name = name;
        this.price = price;
        this.index = index;
        this.picURL = picURL;
    }

    function FillArray() {

        var items = new Array();

        items[0] = new Item("Gnome1", 32, 001, "Content/img/gnome7.PNG");
        items[1] = new Item("Gnome2", 15, 002, "Content/img/gnome14.PNG");
        items[2] = new Item("Gnome3", 26, 003, "Content/img/gnome10.PNG");

        return items;
    }

    function addToCart() {
        var items = FillArray();
        var that = this;
        var ul = document.getElementById("list");
        for (var i = 0; i < items.length; i++) {

            var li = document.createElement("li");
            li.id = 'li' + items[i].index;
            var currentItem = items[i];

            for (p in currentItem) {
                var div = document.createElement("div");
                if (p.valueOf() == "picURL") {
                    div.innerHTML = "<img class='miniPic' src='" + currentItem[p].valueOf() + "'/>";
                }
                else if (p.valueOf() == "price") {
                    div.innerHTML = p.valueOf() + " : £" + currentItem[p].valueOf();
                }
                else {
                    div.innerHTML = p.valueOf() + " : " + currentItem[p].valueOf();
                }
                li.appendChild(div);
            }
} 
```

但是当我调用视图时，我得到的答案是：

获取 /Home/Content/img/gnome7.PNG 404（未找到）

我尝试更改文件的位置，路径，但似乎没有任何效果，当我尝试在我的项目中本地调用一个json文件时也是如此，它还说我找不到我，所以我认为这可能是我的视觉工作室的一种配置，但我无法使其工作，有人可以帮助我吗？这很烦人:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:21:17.147

我的猜测是您没有将图像作为解决方案的一部分包含在内，因此它们没有与您的解决方案一起部署。

要解决此问题，请转到`Solution Explorer`并导航到该`Content -> Img`文件夹​​。（确保选择了解决方案资源管理器顶部的*显示所有文件按钮）。*
在 img 文件夹中，您应该会看到`gnomeXX`图像。如果它们是灰色的，请右键单击它们并选择`Include in Project`。

再次尝试构建和运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T16:00:21.083

今天在这上面花了 5 分钟，然后我才意识到显而易见的……在浏览器上尝试 ctrl+f5……可能是静态内容/缓存问题。

您还需要确保相关文件的“属性”下的构建/内容设置与正确引用的其他资源相同。

# jquery - 具有响应式设计的 jQuery 滑块

> ID：14002738
> 
> 赞同：0
> 
> 时间：2012-12-22T12:15:09.207
> 
> 标签：jquery, slider

我希望我的网站具有响应性，因此我更改了我的图像，即 3 种不同尺寸的精灵图像。

现在我有了这段代码，如果我所有的图像的宽度都是 600px，它就可以工作，但现在我想要

`left: '-=600px'`改变所以它需要slideWidth。但是我该怎么做呢？

```
$(function() {
    var slides = $('.slide');
    var numberSlides = slides.length;
    var slideWidth = $('.slide').width();
    var wrap = $('#slideWrap')

    wrap.width(numberSlides * slideWidth);

    function moveMent() {
        for(r=0; r<100; r++) {
            for(i=0; i<numberSlides-1; i++) {
                wrap
                    .delay(3000)
                    .fadeTo(500, 0)
                    .animate({  
                    /*THIS NEEDS TO BE CHANGED:*/            
                        left : '-=600px'
                    })
                    .fadeTo(500, 1) 
            }
            wrap.delay(3000).fadeTo(500, 0).animate({left : '0'}).fadeTo(500, 1);
        }
    };

    moveMent(); 

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T21:47:17.257

只需将`left`动画属性设置为`-slideWidth`：

```
$(function() {
var slides = $('.slide');
var numberSlides = slides.length;
var slideWidth = $('.slide').width();
var wrap = $('#slideWrap')

wrap.width(numberSlides * slideWidth);

function moveMent() {
    for(r=0; r<100; r++) {
        for(i=0; i<numberSlides-1; i++) {
            wrap
                .delay(3000)
                .fadeTo(500, 0)
                .animate({  
                /*THIS NEEDS TO BE CHANGED:*/            
                    left : '-=600px'
                })
                .fadeTo(500, 1) 
        }
        wrap.delay(3000).fadeTo(500, 0).animate({left : '0'}).fadeTo(500, 1);
    }
};

moveMent(); 

}); 
```

这是一个[概念证明](http://jsfiddle.net/fmpeyton/R4kJp/)。

# blackberry - 从应用程序拨打 USSD 电话

> ID：14002742
> 
> 赞同：0
> 
> 时间：2012-12-22T12:15:29.270
> 
> 标签：blackberry

我已经编写了代码来拨打 USSD 电话：

```
PhoneArguments call = new PhoneArguments(PhoneArguments.ARG_CALL, "*004*"+
_字符串1+
"*"+
_字符串2+
“#”
);
Invoke.invokeApplication(Invoke.APP_TYPE_PHONE, call);

```

**该应用程序拨打电话并发送 USSD 请求并显示响应，没有任何问题。**
但它给出了“无法连接到....”的错误消息，如何隐藏此错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:31:00.653

确保没有重复

# php - 'where 子句中的未知列'AG'

> ID：14002743
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:15:31.310
> 
> 标签：php, mysql, identity-column

我在这样一个简单的查询中收到了这个错误错误（标题）：

```
function getBranch($BranchID){
$query = "SELECT Branch FROM Branches WHERE BranchID = {$BranchID}";
$r = mysql_query($query);
if (!$r) echo "Failed Query: " . mysql_error();
  else return mysql_result($r, 0);
} 
```

我知道 mysql_ 函数已被弃用，并且我知道“分支”列确实存在。调用时 var $BranchID 是 'AG' 并且我已经检查过，这是一个有效值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:16:35.460

您不应该使用已弃用的`mysql_*`功能。使用 PDO 和参数化查询要好得多。

您的查询的具体问题是您的字符串值周围缺少引号：

```
$query = "SELECT Branch FROM Branches WHERE BranchID = '$BranchID'"; 
```

您还应该确保使用 正确转义该值[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)。

```
$query = "SELECT Branch FROM Branches WHERE BranchID = '" . 
          mysql_real_escape_string($BranchID) . "'"; 
```

**有关的**

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

# java - 在 Eclipse Juno 中对 Java 进行分析

> ID：14002744
> 
> 赞同：5
> 
> 时间：2012-12-22T12:15:34.383
> 
> 标签：java, eclipse, profiling, eclipse-juno, eclipse-tptp

我必须优化团队项目的性能（在 eclipse Juno 中）。

为了识别瓶颈（时间），我正在寻找一个工具或插件。

似乎有一个很好的平台[TPTP](http://www.eclipse.org/tptp/home/documents/tutorials/profilingtool/profilingexample_32.html)，但是 Eclipse Juno 不再支持它。 [JVM](http://code.google.com/a/eclipselabs.org/p/jvmmonitor/)是一个好的开始，但似乎不足以进行更深入的分析。

您对 Eclipse Juno 中的集成插件有一些好的实践吗？

如果不是，也许一些独立的工具也很成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T12:53:15.313

Java profiler 世界中有几个大的解决方案：

*   [JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)
*   [你的套件](http://www.yourkit.com/overview/index.jsp)
*   [JVisualVM](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html) , (标准 Oracle JDK 工具)

JProfiler 和 YourKit 是分析大型 EE 应用程序的强大工具。我个人最喜欢YourKit。它[与 Eclipse 易于集成](http://www.yourkit.com/docs/11/help/eclipse.jsp)。但这一切都是付费解决方案，并不总是你需要购买这个。

如果您没有非常复杂的应用程序，请首先尝试使用[JVisualVM](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)。对于广泛的性能问题分析应该足够了。为了监控 GC 行为，它有很棒的[VisualGC](http://visualvm.java.net/plugins.html)插件。使用 VIsualGC 插件，制作堆转储并使用[MAT](http://www.eclipse.org/mat/)分析它，您可以在需要时完美地调整 GC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T12:30:43.540

[我是JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)的忠实粉丝，它也有一个[Eclipse 插件](https://www.ej-technologies.com/products/jprofiler/ide-eclipse.html)。

在这篇[SO](https://stackoverflow.com/questions/8053484/how-to-connect-jprofiler-to-an-application-running-on-localhost)帖子中，您可以找到它的工作原理。

# asp.net - 如何检查服务器控制文本是否包含 html 实体（复选标记、交叉等）？

> ID：14002752
> 
> 赞同：1
> 
> 时间：2012-12-22T12:16:50.607
> 
> 标签：asp.net, html-entities, linkbutton

很奇怪，但这对我来说正成为问题！我已在我的链接按钮文本中添加了带有此代码 ✔ 的 html 复选标记，但是当我尝试检查时

```
if(headerLinkButton.Text == "&#x2714;") 
```

它返回我错误！当我检查其放置断点的文本时，它显示的复选标记与在浏览器上显示的复选标记相同！ ![在此处输入图像描述](../Images/35cc9fc24a0ea00c51d505c326a41409.png)

奇怪如何在我的代码中模拟复选标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:43:56.450

试试这个：

```
switch(HttpUtility.HtmlEncode(headerLinkButton.Text)) 
{
    case "&#x2714;":
       // do your stuff
} 
```

或交替

```
if(headerLinkButton.Text == HttpUtility.HtmlDecode("&#x2714;")) 
```

希望这会有所帮助！

# git - 从 git 开始——从远程克隆到本地

> ID：14002754
> 
> 赞同：0
> 
> 时间：2012-12-22T12:17:18.693
> 
> 标签：git

我需要使用在我公司的远程计算机上设置的 git 存储库，我可以通过 ssh 访问我公司的登录名。我可以在远程机器上执行 sudo。

在阅读了一些 git 教程后，我看到我应该在本地克隆 repo，所以我尝试了：

```
me$ git clone git://remote.company.com/git/tools/thing.git
Cloning into thing...
remote.company.com[0: 1.2.3.4]: errno=Connection refused
fatal: unable to connect a socket (Connection refused)
me$ git clone http://remote.company.com/git/tools/thing.git
Cloning into thing...
fatal: http://remote.company.com/git/tools/thing.git/info/refs not found: did you run git update-server-info on the server? 
```

所以我切换回远程机器并尝试：

```
me@remote:/home/git/tools/thing.git$ git update-server-info
error: unable to update ./info/refs+
error: cannot open ./objects/info/packs+
me@remote:/home/git/tools/thing.git$ sudo git update-server-info
[sudo] password for me: 
me@remote:/home/git/tools/thing.git$ 
```

没有太大的成功！在开始使用这个 repo 时，我在概念上做错了吗？仅供参考，我正在考虑为一些新功能创建一个实际的远程分支并从那里开始工作。

更新 1：

```
me$ git clone ssh://git@remote.company.com/tools/thing.git
Cloning into thing...
fatal: '/tools/thing.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

在没有 .git 的情况下尝试了同样的事情`git@`，文件夹和 .git 扩展名的各种排列。没有任何效果。

更新 2：

好的，找到了.. :)`git clone git@remote.company.com:tools/thing`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T13:00:53.123

这里是：`git clone git@remote.company.com:tools/thing`

谢谢大家！

# php - PHP将字符串与文本文件每行的第一个单词进行比较？

> ID：14002757
> 
> 赞同：1
> 
> 时间：2012-12-22T12:17:56.887
> 
> 标签：php, regex

我有一个普通的文本文件，每一行都有以下格式的数据。

梅森，詹姆斯，第 13 大道，亚历山大，5812347

现在我想做的是在文件中搜索“Mason”，找到后，我会有一个包含所有找到的行的数组。下面的问题完美地解决了一个主要问题：

[PHP在txt文件中搜索并回显整行](https://stackoverflow.com/questions/3686177/php-to-search-within-txt-file-and-echo-the-whole-line)

**问题：**如果每一行都匹配，这将搜索整行，我只想将我的字符串与行中的第一个单词进行比较，或者换句话说，直到找到第一个逗号。

我似乎无法将正则表达式所需的修改“添加”到上面引用的问题中提供的代码中。帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:34:11.390

```
preg_match_all(
    '/^    # Match the start of the line
    [^,]*  # Match any number of characters except commas
    Mason  # Match "Mason"
    .*     # Match the rest of the line/mx', 
    $subject, $result, PREG_PATTERN_ORDER);
$result = $result[0]; 
```

`Mason`让您在第一个逗号之前找到所有行。

# jquery - asp.net mvc 中的 Javascript Serializer 生成格式错误的 Json

> ID：14002761
> 
> 赞同：0
> 
> 时间：2012-12-22T12:18:55.130
> 
> 标签：jquery, json, asp.net-mvc-3, javascriptserializer

我在带有剃刀的 asp.net mvc 3 中。该模型是类型`IList<PipeLineView>`。的定义`PipeLineView`是

```
public class PipeLineView
    {
        public string Stage { get; set; }
        public decimal Amount { get; set; }
        public string Color { get; set; }
        public int Count { get; set; }
        public int LevelNo { get; set; }
    } 
```

在视图中我正在做类似的事情

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
    var data = serializer.Serialize(Model); 
```

在我的javascript中

```
<script type="text/javascript">
 var data =JSON.parse(@Html.Raw(data));
</script> 
```

当我在Firefox中加载页面时，出现以下js错误

```
SyntaxError: JSON.parse: unexpected character
[Break On This Error]   

...":5,"LevelNo":1},{"Stage":"Level2","Amount":0.000,"Color":"Red","Count":0,"Level... 
```

这里可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:44:27.637

JSON.parse 需要一个 JSON 字符串，因此您需要对参数进行字符串引用，因此请`''`添加`@Html.Raw(data)`：

```
<script type="text/javascript">
   var data = JSON.parse('@Html.Raw(data)');
</script> 
```

但在你的情况下，你不需要解析你可以写：

```
<script type="text/javascript">
   var data = @Html.Raw(data);
</script> 
```

# php - CodeIgniter：未定义的属性：stdClass::$date

> ID：14002762
> 
> 赞同：0
> 
> 时间：2012-12-22T12:18:57.550
> 
> 标签：php, mysql, codeigniter, date-format

当我试图让我的 CodeIgniter 模型与数据库正确通信时，我遇到了一个严重的问题。

[在我在本主题中](https://stackoverflow.com/questions/9792814/codeigniter-message-undefined-property-stdclass)找到的答案中，我读到我不应该进行这样的查询：

```
 $query2 = $this->db->query("SELECT patient_id FROM visits
                          WHERE date LIKE DATE_FORMAT('$row->date', '%Y-%m-%d') GROUP BY date"); 
```

但就像这样：

```
$this->db->select('patient_id');
$this->db->from('visits');
$this->db->like('date', "DATE_FORMAT($row->date, '%Y-%m-%d')"); 
```

虽然，仍然无法弄清楚如何使它工作。我也不确定我是否正确使用了 $this->db->like。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:24:23.097

你只需要打电话：

```
$query = $this->db->get(); 
```

得到结果。此外，您不需要每次都 $this->db，因此您的查询可能如下所示：

```
$this->db
    ->select('patient_id')
    ->from('visits')
    ->like('date', "DATE_FORMAT($row->date, '%Y-%m-%d')", FALSE); 
 $query = $this->db->get(); 
```

# php - mysql_insert_id 更新

> ID：14002763
> 
> 赞同：-2
> 
> 时间：2012-12-22T12:19:05.727
> 
> 标签：php, mysql

执行下面的查询后，我使用 PHP 函数`mysql_insert_id()`，它总是给我 0。

```
UPDATE 
    tbl_training_types 
SET 
    fld_serial = $serial_no, 
    fld_name = $training_name, 
    fld_description = $training_description 
WHERE 
    fld_id = $id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:22:31.493

当您更新数据库中的注释时，您已经有了可以识别它的东西。在您的示例中，您已经拥有`$id`应该包含您最近更新的数据的值。如果您没有`id`并且您尝试在更新后使用名称或其他内容进行更新，您可以使用简单的查询简单地检索更新的数据：

```
select * from table_name where your condition 
```

**注意：** `mysql_*`函数已弃用，未来版本将不再支持。您应该使用[`mysqli_*`](http://php.net/manual/en/book.mysqli.php)或[`PDO`](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T12:21:51.743

返回值

上一个查询成功时为 AUTO_INCREMENT 列生成的 ID，如果上一个查询没有生成 AUTO_INCREMENT 值，则为 0，如果没有建立 MySQL 连接，则为 FALSE。

源[PHP 手册](http://php.net/manual/en/function.mysql-insert-id.php)

# javascript - 通过浏览器的 url 栏嵌入 JavaScript 时不起作用

> ID：14002764
> 
> 赞同：0
> 
> 时间：2012-12-22T12:19:07.197
> 
> 标签：javascript, google-chrome

我正在尝试将此行添加到浏览器的 url 栏中（我的浏览器是 Chrome）

```
javascript:document.getElementsByTagName("head")[0].innerHTML+="<link rel='stylesheet' type='text/css' href='st1.css'>"; 
```

当我按下回车键时，整个页面消失。

当我检查源代码时，我可以看到 JavaScript 被执行了，但是，整个内容消失了，虽然 body 的内容在源代码中保持不变！

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:40:49.803

您编写的 JavaScript 返回`document.getElementsByTagName("head")[0]`

为确保没有返回值，请将代码更改为以下内容：

```
javascript:(function(){document.getElementsByTagName("head")[0].innerHTML+="<link rel='stylesheet' type='text/css' href='st1.css'>";}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:29:39.000

您必须确保语句不返回任何内容 — 表达式中被视为可返回的任何内容都将被视为 URL 或页面内容以替换当前页面。Te 表达式`+=`将默认情况下。一个好的解决方案是在语句之​​前加上`void`不返回任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:24:24.267

我猜 innerHTML 仅用于在网页中显示它，而不是用于在标题中添加任何内容。

确切地说，您不能使用它来执行该部分中的任何操作。

# ajax - CakePHP 重定向整个页面而不是 div

> ID：14002767
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:20:25.590
> 
> 标签：ajax, cakephp

当我使用 ajax 在用户控制器中使用我的 CakePHP 登录功能登录时。错误将显示在登录表单上方的 Div 中。但是当我成功登录时，我想将页面重定向到主页。当我`$this->redirect('home');`在用户控制器中使用时，只会更新 Div。

如何确保重新加载整个页面？我宁愿用 PHP 来解决这个问题，而不是 Javascript，因为我正在使用带有 JSHelper 的 Writebuffer 方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:47:50.853

这应该在客户端解决。因为客户端浏览器获取 AJAX 响应并将输出放在 DIV 中。

虽然您可以在 AJAX 响应中嵌入 javascript 代码。例如，如果登录不正确，则在输出中放置一个 window.location javascript 代码。但这不是一个好的解决方案。

在 AJAX 响应中返回 HTTP 状态代码。例如，如果代码是 401，则重定向。

```
if (data == '401') {
  document.location.href="http://example.com";
} 
```

# java - 带有 bukkit 的 Java HashMaps

> ID：14002768
> 
> 赞同：0
> 
> 时间：2012-12-22T12:20:40.907
> 
> 标签：java, hashmap, bukkit

以及如何在 bukkit 中一次添加 2 个附魔

```
myItem.addEnchantments( Enchantment.KNOCKBACK, 1 /* TODO Here goes 2nd enchantment */ ); 
```

'addEnchantments' 接受 'addEnchantments(Map < Enchantment, int >)'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:44:17.497

你宁愿使用`addEnchantment`两次（或更多）：

```
myItem.addEnchantment(Enchantment.KNOCKBACK, 1);
myItem.addEnchantment(Enchantment.THRONS, 2); 
```

如果你坚持使用`addEnchantments`，你需要创建一个地图，填充它并传递它：

```
Map<Enhancement, Integer> map = new HashMap<Enhancement, Integer>();
map.put(Enchantment.KNOCKBACK, 1);
map.put(Enchantment.THRONS, 2);

myItem.addEnchantments(map); 
```

在你的情况下，我会选择选项 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T23:40:36.800

@John Smith的第二个问题：（如何将字符串转换为哈希图）您可以将哈希图转换为字符串，但java（据我所知）没有字符串到哈希图。您可以创建一个执行此操作的函数（可能是不可能的），或者创建几个将 hashmap 转换为 string 并将 string 转换为 hashmap 的函数。在这种情况下，您需要一个带有 Enchantment 和一个整数的 hashmap，所以您只需执行以下操作：

```
public /*static*/ String hashMapToString(HashMap<Enchantment, Integer> hashMap) {
    StringBuilder serializedString = new StringBuilder();
    for (Enchantment enchant : hashMap.keySet()) {
        serializedString.append(enchant.getName() + "<>" + hashMap.get(enchant) + ";");
    }
    return serializedString.toString();
} 
```

然后您将创建一个函数将其转换回哈希图：

```
public /*static*/ HashMap<Enchantment, Integer> stringToHashMap(String hashMapString) {
    HashMap<Enchantment, Integer> hashMap = new HashMap<>();
    for (String split : hashMapString.split(";")) {
        String[] splited = split.split("<>");
        hashMap.put(Enchantment.getByName(splited[0]), Integer.valueOf(splited[1]))
    }
    return hashMap;
} 
```

您甚至可以将它们设为静态（删除注释标记，如果您根本不想要它，只需删除注释标记内的内容）

# objective-c - 在 xcode 中清理 DerivedData 缓存 - 以消除设备中的错误

> ID：14002770
> 
> 赞同：0
> 
> 时间：2012-12-22T12:20:43.723
> 
> 标签：objective-c, xcode

尝试在设备上运行应用程序（之前确实有效）时出现错误：

```
No such file or directory (/Users/ran/Library/Developer/Xcode/DerivedData/appName...) 
```

我也已阅读以清理此路径：

```
Library/Developer/Xcode/DerivedData 
```

但我在我的 mac 中找不到它-它说我没有这条路！

知道如何解决这个问题吗？（重新启动 xcode 或 clean 无效）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:31:08.823

在 XCode 中打开“产品”组，然后右键单击 .app 文件并单击在 Finder 中显示，这将在您想要的位置。

# c++ - linux c在写入后刷新串行缓冲区

> ID：14002772
> 
> 赞同：2
> 
> 时间：2012-12-22T12:21:04.340
> 
> 标签：c++, c, linux, serial-port, embedded-linux

简单的问题。当我写信时`/dev/ttyS1`，它不会立即刷新它。这可能与我的串口初始化有关......但我想不通！我的代码是这样的：

```
#define BAUDRATE B115200
#define MODEMDEVICE "/dev/ttyS1"
#define _POSIX_SOURCE 1 /* POSIX compliant source */
#define FALSE 0
#define TRUE 1

volatile int STOP = FALSE;

void signal_handler_IO(int status); /* definition of signal handler */
int wait_flag = TRUE; /* TRUE while no signal received */

int main()
{
    int fd, c, res;
    struct termios oldtio, newtio;
    struct sigaction saio; /* definition of signal action */
    char buf[255];

    /* open the device to be non-blocking (read will return immediatly) */
    fd = open(MODEMDEVICE, O_RDWR | O_NOCTTY | O_NONBLOCK);
    if (fd < 0) {
        perror(MODEMDEVICE);
        exit(-1);
    }

    /* install the signal handler before making the device asynchronous */
    saio.sa_handler = signal_handler_IO;
    //saio.sa_mask = 0;
    saio.sa_flags = 0;
    saio.sa_restorer = NULL;
    sigaction(SIGIO, &saio, NULL);

    /* allow the process to receive SIGIO */
    fcntl(fd, F_SETOWN, getpid());
    /* Make the file descriptor asynchronous (the manual page says only
     O_APPEND and O_NONBLOCK, will work with F_SETFL...) */
    fcntl(fd, F_SETFL, FASYNC);

    tcgetattr(fd, &oldtio); /* save current port settings */
    /* set new port settings for canonical input processing */
    newtio.c_cflag = BAUDRATE | CRTSCTS | CS8 | CLOCAL | CREAD;
    newtio.c_iflag = IGNPAR | ICRNL;
    newtio.c_oflag = 0;
    newtio.c_lflag = ICANON;
    newtio.c_cc[VMIN] = 1;
    newtio.c_cc[VTIME] = 0;
    tcflush(fd, TCIFLUSH);
    tcsetattr(fd, TCSANOW, &newtio);

    int i = 0;

    /* loop while waiting for input. normally we would do something
     useful here */
    while (1) {
        printf(".\n");
        usleep(100000);
        //tcflush(fd, TCOFLUSH);
        //tcflush(fd, TCIOFLUSH);
        i++;
        if (i == 20) {
            // ------------------ write to serial ----------------------
            int n = write(fd, "ATZ\n", 4);
            if (n < 0)
                fputs("write() of 4 bytes failed!\n", stderr);

        }

        /* after receiving SIGIO, wait_flag = FALSE, input is available
         and can be read */
        if (wait_flag == FALSE ) {
            res = read(fd, buf, 255);
            buf[res] = 0;
            printf(":%s:%d\n", buf, res);
            wait_flag = TRUE; /* wait for new input */
        }
    }
    /* restore old port settings */
    tcsetattr(fd, TCSANOW, &oldtio);
}

void signal_handler_IO(int status) {
    printf("received SIGIO signal.\n");
    wait_flag = FALSE;
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:40:20.603

您已通过设置启用 CTS 硬件流控制`CRTSCTS`。这意味着如果 UART 的 CTS 输入未激活，则 UART 应停止发送。

通常，您可能希望查看*termios*手册页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T03:25:24.030

我不认为这是一个解决方案，但添加：

```
tcflush(fd, TCIOFLUSH); // clear buffer 
```

清除缓冲区似乎可以解决问题。但是，应该有一些更优雅和适当的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-06T12:19:05.227

由于“刷新”可以表示清除缓冲区或等到所有字节都发送完毕，这里是来自[https://linux.die.net/man/3/tcdrain的引用](https://linux.die.net/man/3/tcdrain)

> tcdrain() 一直等待，直到写入 fd 引用的对象的所有输出都已传输完毕。
> 
> tcflush() 根据 queue_selector 的值，丢弃写入 fd 引用的对象但未传输的数据，或接收但未读取的数据

所以，

```
tcdrain(fd); // Wait until transmission ends
tcflush(fd, TCOFLUSH); // Clear write buffer 
```

# ruby-on-rails - 如何检索值为 true 的实例属性名称？

> ID：14002776
> 
> 赞同：0
> 
> 时间：2012-12-22T12:21:28.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, attributes, data-retrieval

我正在使用 Ruby on Rails 3.2.9 和 Ruby 1.9.3。我有一个符号数组和一个模型类 ( `ActiveModel`)，将这些符号（更多其他符号）作为布尔属性。给定一个类实例，我想检索其值为 的所有属性名称`true`。那是：

```
# Given an array of symbols
[:attr_1, :attr_2, :attr_3]

# Given a class instance
<#Model attr_1: true, attr_2: false, attr_3: false, attr_4: true, ... attr_N: true>

# Then I would like to return
[:attr_1, :attr_4, ..., :attr_N] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:05:13.533

```
attrs = [:attr_1, :attr_2, :attr_3]

class Model
  def are_true?(attr_names)
    eval(attr_names.map {|a| "send(:#{a})"}.join(" && "))
  end
  def which_true?(attr_names)
    attr_names.map {|a| a if send(a) == true}.compact
  end
end

m = <#Model attr_1: true, attr_2: false, attr_3: false, attr_4: true, ... attr_N: true>

m.are_true?(attrs)  # evals if all given attr_names are true
m.which_true?(attrs) # returns array of attr_names which are true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:29:52.747

如果您有符号列表，则可以遍历它们并选择正确的符号

```
symbols = [:attr_1, :attr_2, :attr_3]
symbols.select {|sym| object.send(sym) == true } 
```

如果您没有所需的符号列表，则可以简单地遍历模型的所有属性

```
symbols = object.attributes
symbols.select {|sym| object.send(sym) == true } 
```

# ckeditor - 如何在 CKEditor 文本框中通过 JavaScript API 格式化文本？

> ID：14002782
> 
> 赞同：0
> 
> 时间：2012-12-22T12:21:56.017
> 
> 标签：ckeditor

注意：我不希望格式化发生选择的整个元素，也不希望使用工具栏或在插件中工作。格式化命令将通过 socket.io 发送，因此我需要一种从 CKEditor 代码库外部格式化所选文本的方法（也欢迎任何关于如何进行特定选择的想法，特别是如果有某种方法可以选择文本无需同时呈现该选择和/或基于开始/结束/长度参数格式化文本以实现相同的结果 - 尽管这对我来说不是绝对要求，但我很高兴能够格式化只是选定的文本，如字体名称、大小等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:54:36.093

我设法用以下方法解决了这个问题，以防有人在寻找解决方案：

* * *

$('#' + Document.ID + '_contents iframe').contents()[0].execCommand('forecolor',false,'#00ff00');

$('#' + Document.ID + '_contents iframe').contents()[0].execCommand('JustifyCenter', false, null);

$('#' + Document.ID + '_contents iframe').contents()[0].execCommand('fontsize', false, 15);

$('#' + Document.ID + '_contents iframe').contents()[0].execCommand('fontname', false, names);

# objective-c - 在菜单栏应用程序中显示 Tabview 而不是菜单

> ID：14002786
> 
> 赞同：0
> 
> 时间：2012-12-22T12:22:38.393
> 
> 标签：objective-c, macos, cocoa

我是 OSX 应用程序开发的新手，发现与 iOS 有点不同。我正在尝试创建一个示例菜单栏应用程序。我可以使用命令显示菜单

[statusItem setMenu: startMenu];

但我不知道如何显示 TabView 而不是菜单。有人可以帮我解决这个问题。

其中 statusMenu 是 NSMenu 的出口，statusitem 是 NSStatusItem 的对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:51:01.870

你不能。您必须将其显示在一个窗口中，您可以通过单击状态项打开该窗口。您可以使窗口无边框。

* * *

## 1.

你可以在这里使用这个，它是一个窗口中的 NSTableView，它可以伪造 a 的布局`NSMenu`：

[JG菜单窗口](http://www.cocoacontrols.com/platforms/mac-os-x/controls/jgmenuwindow)

虽然我不建议这样做，因为如果 Mac OS X 有一些布局更改，这将保持不变。

* * *

## 2.

或者您可以使用您自定义的普通窗口，如下所示：

[弹出窗口](https://github.com/shpakovski/Popup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:20:56.633

您可以设置 NSMenuItem 的自定义视图，因此您可以尝试将您的 tableview 添加到选择的 NSMenuItem。

# image - 使用图像集或动态图像调整大小？

> ID：14002788
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:23:26.373
> 
> 标签：image, media-queries

我在这里找不到合适的问题，所以我决定根据您的知识和经验提出自己的问题。什么是使网站准备好所有屏幕分辨率的更好解决方案。+ 媒体查询 + 多个图像集 + 媒体查询 + jquery 脚本来调整一组图像的大小（例如为屏幕宽度 1600 像素准备的图像）

哪种解决方案更好？从一方面来说，我认为由于 img 质量，多张图像更好，但它们会吸收大量的转移。

感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:27:36.777

已经处理了多个图像分辨率并不意味着您将使用大量传输，您将使用给定用户使用的分辨率的最佳带宽量，而不会牺牲图像质量。

你应该做这个：

1) 考虑到用户使用的设备类型，确定您需要的图像尺寸

2）创建一个脚本，在您上传图片时将其转换为所需的尺寸

3）创建一个合适的文件夹结构来存储每个图像大小，因此选择合适的图像将花费尽可能少的时间

4）避免内联图像调整大小，因为这确实浪费带宽

# mysql - 基于不同mysql服务器上的视图创建视图

> ID：14002789
> 
> 赞同：0
> 
> 时间：2012-12-22T12:23:48.403
> 
> 标签：mysql, sql

我`RDS mysql servers`在aws上有两个不同的....两个不同的登录名等。

如何根据`view`架构上`server 1`的视图创建架构内`server 2`？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:27:22.817

您不能连接到 a 中的其他服务器`view`，但您可以设置[复制](http://dev.mysql.com/doc/refman/5.5/en/replication.html)，这样只有一些表将从主服务器（您的`server 2`）复制到从服务器（`server 1`）。[您可以使用--replicate-do-table](http://dev.mysql.com/doc/refman/5.5/en/replication-options-slave.html#option_mysqld_replicate-do-table)选项指定要复制的表。然后，您将能够对复制的表执行查询或使用它们创建视图。表将在服务器之间同步。数据库复制可能有点难以理解，但看起来它是实现目标的唯一方法。

# css - 应用顺序的 CSS 文件

> ID：14002790
> 
> 赞同：1
> 
> 时间：2012-12-22T12:23:54.680
> 
> 标签：css

我有一个关于 CSS 文件的问题，它是在浏览器中应用的顺序。我们有：

1.  浏览器（系统）CSS文件，
2.  用户 CSS 文件，
3.  用户 CSS 重要文件，
4.  网站 CSS 文件，
5.  网站 CSS 重要文件，

加载页面时，一些 CSS 代码会根据顺序或 !important 字词替换其他代码。我上面列出的顺序是否正确，所以网站 CSS 重要文件可以覆盖所有以前的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:36:24.830

CSS 代码不替换其他 CSS 代码，与解析样式表的顺序无关。实际上没有应用顺序，因为所有适用的样式表都被考虑在内。当多个样式表为一个元素的属性赋值时，冲突就根据[级联规则](http://www.w3.org/TR/CSS21/cascade.html#cascade)解决。那么顺序是：

1.  用户代理声明（浏览器默认样式）

2.  用户正常声明

3.  作者（页面）正常声明

4.  作者（页）重要声明

5.  用户重要声明

所以作者（页面）`!important`声明胜过除用户`!important`声明之外的一切。在 Css 1 中，顺序有所不同，但在 CSS 2 中发生了变化，浏览器遵循当前规则：如果用户希望行使自己的权利，则始终拥有最终决定权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:29:28.500

不会。用户 CSS 文件将在站点 CSS 文件之后进行解析（否则拥有用户 CSS 文件没有任何意义）。这并不意味着它会自动覆盖网站 css 文件中的所有内容，但是，正常的[CSS 特异性规则](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)仍然适用。

让我们将所有段落都设为红色，例如我的网站有以下规则：

```
website.css: p { color: red; } 
```

但是，如果我实现一个用户样式表（如 FireFox 中的 userContent.css）并说：

```
FireFox userContent.css: p { color: blue; } 
```

文本颜色为蓝色。

如果我将网站的规则标记为重要：

```
website.css: p { color: red; !important } 
```

颜色会再次变红。

# php - 测试发布的表单值是否包含等于 XX php 的文本时使用的正确语法是什么

> ID：14002796
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:25:13.647
> 
> 标签：php

我正在尝试编写一个 if 语句来测试发布的表单值是否等于 xx

```
 $field = $_POST['myfield'];

 if($field == 'Hello world') {

 / /do something 

 } 
```

这个对吗..？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:30:17.533

是的。但首先检查它是否设置

```
$field =(isset($_POST['myfield']))?$_POST['myfield']:'';
    if($field == 'Hello world') {

     / /do something 

     } 
```

# javascript - Less @import 为 javascript 渲染一个文件

> ID：14002802
> 
> 赞同：0
> 
> 时间：2012-12-22T12:25:58.903
> 
> 标签：javascript, html, workflow, less, minify

我的网站少了几个样式表。

我的`style.css`文件如下所示：

```
@import "../components/bootstrap/less/bootstrap.less";
@import "./gist.less";
@import "./markdown.less";
@import "./main.less";
@import "./octicons.less"; 
```

我有一个手表应用程序，可以在保存时很好地编译所有内容。

我想要的是这样的javascript。我可以在其中设置一个文件，导入我想要的所有内容，并且我有一个可以在 html 中引用的文件。我检查了 require 但我不确定它与这个想法有多相似。

有没有办法做到这一点？我基本上想要一个像less这样的连接/缩小javascript文件持有者。我想我可以建造一些东西来做到这一点，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-08T01:59:15.180

您在这里寻找的是[`browserify`](https://github.com/substack/node-browserify)或 webpack。这篇文章是不久前的，那是在这类项目流行之前。但我认为这正是你想要的。这是[Browserify 的第一个提交](https://github.com/substack/node-browserify/commit/b0363ae3d5749b3f7e722b21c65484fdf634acf3)，要注意它是在问这个问题的时候。

# javascript - 在 img 上动态添加文本

> ID：14002803
> 
> 赞同：1
> 
> 时间：2012-12-22T12:26:02.433
> 
> 标签：javascript, html

我仍然在一些帖子中搜索过，但我还没有想法。

目标：我有一张图片（黄色便利贴 280 像素 x 280 像素），现在，我希望能够在用户按下按钮后在便利贴上放置文本，例如“文本”。我对 html 很坚定，但对 javascript 却不是。非常感谢！马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T19:21:12.597

我就是这样做的。

使用带有便利贴图像的 div 作为背景，该背景具有用于便笺的子 div。

```
<div class='post-it'>
    <div class="note">
    </div>
</div>​ 
```

`div.note`可以轻松定位，以免与图像重叠。

```
.post-it {
    background-image: url('http://alternatewrites.com/wp-content/uploads/2012/06/post-it-note-with-a-pin.jpg');
    background-repeat: no-repeat;
    width: 321px;
    height: 321px;
    position: relative;
}
.note {
    position: absolute;
    top: 90px;
    right: 30px;
    bottom: 30px;
    left: 60px;
    overflow: auto;
} 
```

然后 JavaScript 非常简单：

```
// Execute after DOM has loaded
window.onload = function() {
    var postIt = document.getElementsByClassName('post-it'),
        addTextToNote = function () {
            //"this" is the textarea because the function is bound to the textarea;
            var note = this.parentNode,
                postIt = note.parentNode;
            note.removeChild(this);
            note.innerText = this.value;
            postIt.onclick = addTextArea;
        },
        addTextArea = function addTextArea() {
            //"this" is the div with class "post-it" because the function is bound to it;
            var note = this.getElementsByClassName('note'),
                t = null,
                i = 0;
            for (i = 0; i < note.length; i += 1) {
                t = document.createElement('textarea');
                t.rows = 10; // 10 rows and 25 columns is about
                t.cols = 25; // the correct size for the image
                t.value = note[i].innerText; // add any existing text
                t.onblur = addTextToNote;
                note[i].appendChild(t); // add textarea to note
                this.onclick = null; // remove click handler to prevent multiple click problems
                t.focus(); // give focus to the textarea
            }
        },
        i = 0;
    for (i = 0; i < postIt.length; i += 1) {
        postIt[i].onclick = addTextArea;
    }
};​ 
```

请注意，在生产环境中，我也可能会为此使用 jQuery，因为我发现 DOM 操作的语法要简单得多（而且它是跨浏览器的，与上面的示例不同）。

这是一个 jsFiddle 演示：http: [//jsfiddle.net/gWf5Z/](http://jsfiddle.net/gWf5Z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T12:40:37.293

对于您的图像，我建议将其放入 div 元素中，以便更容易附加。使用 javascript 我会执行以下操作：

```
addText(){
    var ele = document.createElement("p");
    ele.appendChild(document.createTextNode('your text'));
    document.getElementById('yourDiv').innerHTML(ele);

}
document.getElementById('yourButton').addEventListener('click', addText(), false); 
```

据我所知，这应该是正确的。有很多更简单的方法。例如，这是一个 CSS 替代方案。

HTML

```
<div id="wrapper">
    <p>text</p>
</div> 
```

CSS

```
#wrapper {background-image:url('post-it.png');}
#wrapper > p {display:none;}
#wrapper > img:hover p{display:block;} 
```

# processing - 在参考中查找不起作用

> ID：14002804
> 
> 赞同：1
> 
> 时间：2012-12-22T12:26:09.263
> 
> 标签：processing

我选择函数名称（在本例中为 fill()）并从菜单中选择 Find in Reference 并收到错误消息

> 无法打开网址
> 
> 文件：/C:Users/userB/Desktop/processing-2.0b7/modes/java/reference/fill.html

但是文件在指定位置：

![在此处输入图像描述](../Images/4e5ddc09dbb736f3e8758f926970ee86.png)

有谁知道为什么网址打不开？

* * *

**编辑**

我刚刚注意到该文件的末尾有一个下划线：`fill_.html`. 这可能是原因吗？

**编辑 2**

没有下划线的文件正在打开。你知道为什么有些文件有下划线吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T18:21:24.920

根据 Processing 的问题列表[#1456](http://code.google.com/p/processing/issues/detail?id=1456)，这是当前 beta 版本 2.0b7 中的一个已知问题。问题[#1474](http://code.google.com/p/processing/issues/detail?id=1474)提到了下划线问题，但它被合并到问题 #1456 中。所以我希望它会在即将发布的版本中得到修复。

同时，您可能想尝试稳定版本，当前版本为 1.5.1。

* * *

**编辑**：正如评论所暗示的，临时解决方法是从 .html 中的每个 .html 文件中删除尾随下划线`inmodes\java\reference`。

# php - .f4v 文件未作为视频/mp4 MIME 类型返回

> ID：14002806
> 
> 赞同：1
> 
> 时间：2012-12-22T12:26:41.753
> 
> 标签：php, mime-types, mp4

当我运行此脚本以找出文件的 MIME 类型时，为 .f4v 文件返回的 MIME 类型返回为 application/octet-stream 而不是 video/mp4。这使得无法在我的网站上上传 .fv4 文件，因为 critira 用于文件的 MIME 类型为 video/mp4、video/x-flv 或 video/webm。有没有解决的办法？

```
<?php

   $fileName = "file.f4v";
   $finfo = finfo_open(FILEINFO_MIME_TYPE);
   $mime = finfo_file($finfo, $fileName);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:32:05.940

我在媒体上传表单中遇到了一个非常相似的问题，该表单最初配置为按 MIME 类型过滤上传，最终不得不完全废弃该规则。

问题是，您不能强制用户代理正确指示正在上传的文件的 MIME 类型。许多文件最终都以您意想不到的 MIME 类型上传。因此，您不能将随文件上传提交的 MIME 类型作为确定文件类型的标准。

我的解决方案是简单地依赖文件扩展名并使用 MIME 类型作为仅用于没有扩展名的文件的后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T23:40:51.917

将 mime 类型“video/x-f4v”添加到网络服务器

# iphone - 如何使用调用google api服务

> ID：14002808
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:26:51.817
> 
> 标签：iphone, ios, get

我是iOS新手我想调用google api方向服务并解析它，我知道如何使用post方法调用web服务，但我不知道如何将参数集成到url中，并从中获取json响应。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:59:16.413

要使用 Post 传递数据，`NSURLConnection`您可以使用`setHTTPBody`方法。

您可以使用以下代码：

```
NSURL *aUrl = [NSURL URLWithString:@"yourURL"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:aUrl
                                         cachePolicy:NSURLRequestUseProtocolCachePolicy
                                     timeoutInterval:60.0];

NSURLConnection *connection= [[NSURLConnection alloc] initWithRequest:request 
                                                             delegate:self];

[request setHTTPMethod:@"POST"];
NSString *postString = @"username=Midhun&password=Midhun";
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]]; 
```

并且可以通过`didReceiveData`委托方法获取响应数据。您需要将接收到的数据附加到`NSMutableData`对象以供进一步使用。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{ 
   [receivedData appendData:data];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:09:16.167

请看下面的代码，你会有所了解。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
dispatch_async(queue, ^{
    NSString *stringOrigin = @"Surandai";
    NSString *stringDestination = @"Coimbatore";
    NSData *dataDirection = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&sensor=true", stringOrigin, stringDestination]]];
    NSDictionary *dictionaryDirection = [NSJSONSerialization JSONObjectWithData:dataDirection options:NSJSONReadingAllowFragments error:nil];
    dispatch_sync(dispatch_get_main_queue(), ^{
        NSLog(@"dictionaryDirection - %@", dictionaryDirection);
        //Do UI update here
    });
}); 
```

# mysql - 识别行的 id 并从 db 中删除对象

> ID：14002809
> 
> 赞同：0
> 
> 时间：2012-12-22T12:26:53.623
> 
> 标签：mysql, delete-row, corresponding-records

我是Web开发的初学者。我制作了一个简单的表格，显示了我插入到数据库中的笔记的 ID、答案和日期。我需要一个简单的脚本来显示每个笔记的删除按钮。我想知道如何获取需要删除的每一行的 id。这是我的php代码：

```
<html>
<body>
<?php
 include '..//config.php';
 $result = mysql_query("SELECT * FROM **** Order by `id` ASC");
echo "<center><table width='400' border='1'>
<tr>
<th bgcolor='#D6D6D6' >ID</th>
<th bgcolor='#D6D6D6'>Answer</th>
<th bgcolor='#D6D6D6'>Date</th>
<th bgcolor='#D6D6D6'>Preview</th>
<th bgcolor='#D6D6D6'>Delete</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td bgcolor='#3399FF' scope='col width ='10%'>" . $row['id'] . "</td>";
  echo "<td width ='10%'>" . $row['answer'] . "</td>";
  echo "<td  bgcolor='#3399FF' scope='col width ='10%'>" . $row['date'] . " </td>";   
     if ($row['hidden'] > 'http://www.********/upload/upload/') {
  echo "<td width ='10%'><a href =" . $row['hidden'] . "><center>View</center></a></td>"; } else {echo "<td width ='10%'>" . $row[''] . "</td>";}
   echo "<td width ='10%'><a href = 'dlt.php'>Delete</a></td>";
   $row_id = $row['id'];
          }
  echo "</tr width ='10%'>"; 
  echo "</table></center>";
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:45:39.903

从您的问题中不清楚您的要求是什么，但我假设您想知道`id`当您单击“删除”链接（链接到`dlt.php`）时如何传递条目。

您可以将查询字符串参数传递给`dlt.php`条目`id`。

我已经清理了您的代码并在下面进行了修改：

```
<!Doctype html>
<html>
    <body>
    <?php
        include '../config.php';
        $result = mysql_query("SELECT * FROM **** Order by `id` ASC");
    ?>
        <center>
            <table width='400' border='1'>
                <tr>
                    <th bgcolor='#D6D6D6'>ID</th>
                    <th bgcolor='#D6D6D6'>Answer</th>
                    <th bgcolor='#D6D6D6'>Date</th>
                    <th bgcolor='#D6D6D6'>Preview</th>
                    <th bgcolor='#D6D6D6'>Delete</th>
                </tr>

                <?php
                    while ($row = mysql_fetch_array($result)) {

                        $row_id = $row['id'];
                        ?>
                        <tr>
                            <td bgcolor='#3399FF' scope='col' width='10%'><?php echo $row_id; ?></td>
                            <td width='10%'><?php $row['answer']; ?></td>
                            <td  bgcolor='#3399FF' scope='col' width ='10%'><?php $row['date']; ?></td>
                            <td width ='10%'>
                                <?php
                                    // I am not exactly sure what this line was meant to do in your code
                                    if ($row['hidden'] > 'http://www.********/upload/upload/') {
                                        echo "<a href='" . $row['hidden'] . "'><center>View</center></a>";
                                    }
                                ?>
                            </td>
                            <td width ='10%'><a href='dlt.php?id=<?php echo $row_id; ?>'>Delete</a></td>

                        </tr>

                        <?php
                    }

                ?>
            </table>
        </center>
    </body>
</html> 
```

然后在您的**dlt.php**文件中，您可以使用以下行检索`id`要删除的内容：

```
if (isset($_GET['id']) {
    $delete_id = $_GET['id'];
}
else {
    // no 'id' has been passed.
    die('Nothing to delete!');
}
$result = mysql_query("DELETE FROM **** WHERE `id` = $delete_id"); 
```

由于您是 Web 开发（或一般开发）的新手，因此您应该非常小心以下几件事：

1.  编写带有适当缩进的干净代码。它可以帮助您快速发现和调试问题。
2.  编写符合 W3C 标准的代码。
3.  了解您要使用的技术 API 并注意已弃用的功能。例如，在 PHP 中，`mysql_*`函数已被弃用。您应该使用`mysqli`or`PDO`代替。

我会提出更多的观点，但列表实际上可能会变得很长。这些应该对初学者有好处。

# c# - 使用 MemoryMappedFile 读取文件字节

> ID：14002814
> 
> 赞同：3
> 
> 时间：2012-12-22T12:27:18.610
> 
> 标签：c#, memory-mapped-files

如何使用读取文件字节`MemoryMappedFile`并将其放入`byte[]`数组中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T12:46:05.443

假设您只想读取文件的一部分，这样的事情应该可以工作：

```
long offset = 0x10000000; // 256 megabytes 
long length = 100; 
using (MemoryMappedFile mmf = MemoryMappedFile.CreateFromFile(@"c:\Test.data"))
    {
        using (MemoryMappedViewStream stream = CreateViewStream(offset, length))
        {
            byte[length] bytes;
            int bytesRead = stream.Read(bytes, 0, (int)length);
        }
    } 
```

如果你想读取整个文件，你真的不应该首先使用`MemoryMappedFile`对象。

# linux - Qt 应用程序 GUI -- 自动启动 -- linux

> ID：14002817
> 
> 赞同：0
> 
> 时间：2012-12-22T12:27:45.370
> 
> 标签：linux, qt

当我的 linux 系统启动时，我需要立即运行我的 Qt GUI 应用程序。除了这个 Qt GUI 应用程序之外，我不需要任何其他东西。不需要桌面。

以前我使用`update-rc.d`命令启动了 daemo，但我不知道如何启动 GUI，而且我对 X11 了解不多。

我浏览了网络并找到了两个链接：

1.  [在启动时运行 Qt 应用程序](https://stackoverflow.com/questions/4144222/running-a-qt-application-at-startup) 这告诉您为您创建桌面条目文件......但因为我不需要桌面。并且只希望我的 GUI 运行。所以这不是我正在寻找的解决方案。

2.  [http://www.qtcentre.org/threads/28564-Qt-app-in-linux-startup](http://www.qtcentre.org/threads/28564-Qt-app-in-linux-startup) 在这里我无法理解我必须做什么`/xinitrc.d`。以及我的应用程序 GUI 如何启动。有人可以澄清这一点吗？

有人可以建议我只启动 GUI 应用程序需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:10:14.640

您很可能需要一些[X 窗口管理器](http://en.wikipedia.org/wiki/X_window_manager)来运行您的 Qt 应用程序，甚至可能需要一些[桌面环境](http://en.wikipedia.org/wiki/Desktop_environment)（即您希望符合[EWMH](http://en.wikipedia.org/wiki/Extended_Window_Manager_Hints)和[ICCCM](http://en.wikipedia.org/wiki/Inter-Client_Communication_Conventions_Manual)），并且您显然需要一个正在运行的[X11](http://en.wikipedia.org/wiki/X11)服务器（通常`Xorg`）。所以你可以设法为所有这些提供一些[xinitrc](http://www.slackbook.org/html/x-window-system-xinitrc.html)。

请注意，像[lightdm](http://en.wikipedia.org/wiki/LightDM)这样的一些会话或[显示](http://en.wikipedia.org/wiki/X_display_manager_%28program_type%29)管理器可以配置为启动一些特殊会话。

在所有情况下，您需要的不仅仅是运行您的应用程序，而且您当然需要详细了解您的 Qt 应用程序真正需要什么（主要通过 Qt 库）。了解有关[X11 协议](http://en.wikipedia.org/wiki/X_Window_System_core_protocol)的更多信息。另请参阅[freedesktop.org](http://www.freedesktop.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T11:47:59.857

如果您使用的是 lightdm 桌面管理器，请通过取消注释行来编辑您的**/etc/lightdm/lightdm.conf**文件

> 会话设置脚本=

并在等号（不带空格）之后立即添加到您的 gui 应用程序的路径！

保存**lightdm.conf**文件，然后重启系统！

# java - 错误检查对象为空

> ID：14002822
> 
> 赞同：0
> 
> 时间：2012-12-22T12:28:16.990
> 
> 标签：java, eclipse, json, httpresponse, apache-httpclient-4.x

我得到了一个 HttpResponse，它得到了一个 json 响应。

现在，如果 json 响应包含数据，则一切正常，但只要 json 为空，我的应用程序就会崩溃。

我一直在尝试遵循代码但无济于事。

（sb = json 响应）

```
Object result11 = sb;
Log.d("Result11", result11.toString());

if (result11 == JSONObject.NULL)
    Log.d("if", "I am NULL");
else
    Log.d("else", "I am not null"); 
```

我尝试将 result11 与：

```
null, "", "null", JSONObject.NULL 
```

它总是返回“我不是空的”

虽然日志说 Resul11 = null。

任何帮助，将不胜感激。提前致谢。

编辑：

```
Object result11 = sb;
            Log.d("Result11", result11.toString());

            StringBuilder test = (StringBuilder)result11;

            if (test.toString().equals("null"))
                Log.d("if", "I am NULL");
            else
                Log.d("else", "I am not null"); 
```

@Mark Byers 的解决方案

```
test.toString().trim().equals("null") 
```

结果“我为空”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:34:26.660

你没有`null`. `StringBuilder`当转换为 a 时，您有a`String`包含值`"null"`。

比较字符串不要使用`==`操作符。相反，您应该转换为 a`String`并使用该`equals`方法。

```
StringBuilder stringBuilder = (StringBuilder)result11;
String trimmed = stringBuilder.toString().trim();
if (trimmed.equals("null")) { ... } 
```

`==`运算符比较引用，并且仅当操作数是对同一对象的引用（或两个空引用）时才返回 true 。该`equals`方法比较这些值。

**有关的**

*   [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:31:36.953

如果你得到一个空结果比较空指针：`result11 == null`

# ruby-on-rails - 如何检测它是从新提交还是从编辑提交？

> ID：14002825
> 
> 赞同：0
> 
> 时间：2012-12-22T12:28:42.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果验证码正确，此 before_filter 在更新或创建记录之前进行验证。
当它不正确时，它会带我回到上一页，但所有输入数据都会消失.... 我怎样才能保留在上一页输入的输入数据？

我想使用 before_filter 并应用这两个操作“更新”和“创建”。它应该检测提交的来源并切换重新渲染“新”或“编辑”的位置

```
before_filter :simple_captcha_check, :only => [:update, :create] 

def simple_captcha_check
    if !simple_captcha_valid?
        flash[:error] = 'Wrong Captcha!'
        redirect_to :back
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:45:15.173

假设您正在创建/更新`User`模型，您的代码可能如下所示：

```
def simple_captcha_check
  if !simple_captcha_valid?
    flash[:error] = 'Wrong Captcha!'

    if request.put? # We came from an edit request
      @user = User.find(params[:id])
      @user.attributes = params[:user]
      render :action => :edit
    elsif request.post? # We came from a new request
      @user = User.new params[:user]
      render :action => :new
    end
  end
end 
```

# ajax - 从 onstart 函数添加 ajax 参数

> ID：14002830
> 
> 赞同：1
> 
> 时间：2012-12-22T12:29:26.293
> 
> 标签：ajax, jsf-2, primefaces

一个有primefaces commandButton 和actionListener。在页面上我也有几个对话框，其中一些是打开的，另一些是关闭的。我需要动态找到第一个关闭的对话框，调用 actionListener 方法，并将参数传递给该方法，其中包含第一个关闭对话框的信息。我使用该信息更新该对话框，并调用 show() 方法打开对话框。我认为唯一可能的地方是 onstart 方法，但我找不到从 onstart 方法传递 ajax 参数的方法。有什么解决办法吗？

我正在使用 Primefaces 3.4、JSF 2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:18:17.103

如果我理解你是正确的，你希望将值保存在 JavaScript 变量中以及表单提交中。最简单的方法是将其设置为`<h:inputHidden>`组件的 HTML 表示形式的值。

鉴于此 JSF

```
<h:form id="form">
    <h:inputHidden id="hidden" value="#{bean.hidden}" />
    ...
</h:form> 
```

而这个 JS

```
var some = "some value"; 
```

可以通过JS设置如下

```
document.getElementById("form:hidden").value = some; 
```

或者，假设您使用的是 PrimeFaces，通过 jQuery

```
$("#form\\:hidden").val(some); 
```

在 JSF 操作方法中，它只是作为`hidden`属性直接可用。

# php - mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 9 行的 C:\xampp\htdocs\qcc\truckdelivery.php 中给出，没有选择数据库

> ID：14002831
> 
> 赞同：1
> 
> 时间：2012-12-22T12:29:27.373
> 
> 标签：php, html, mysql

```
<?php require_once('Connections/connect.php'); ?>
<?php
 $id_truck = mysql_real_escape_string($_GET['id_truck']);
 $sql_PK = "SELECT * FROM tbl_truck WHERE id_truck = '{$id_truck}'";
 $res_PK = mysql_query($sql_PK, $connect);
 $row_PK = mysql_fetch_assoc($res_PK);
 $truck_plate = $row_PK['truck_plate_no'];
 $truck_plate = mysql_real_escape_string($truck_plate);

 $sql = "SELECT tbl_truck.truck_plate_no, 
    tbl_delivery_details.delivery_details_route, 
    tbl_delivery_details.delivery_details_destination, 
    tbl_delivery_details.delivery_details_van_no, 
    tbl_delivery_details.delivery_details_waybill_no, 
    tbl_delivery_details.delivery_details_charge_invoice,
    tbl_delivery_details.delivery_details_revenue,
    tbl_delivery_details.delivery_details_strip_stuff,
    tbl_delivery_details.delivery_details_date
    FROM tbl_truck, tbl_delivery_details 
    WHERE tbl_truck.truck_plate_no = tbl_delivery_details.tbl_truck_id_truck 
    AND tbl_truck.truck_plate_no = '{$truck_plate}'";

$res = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_array($res);
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Truck Delivery</title>
<link rel="stylesheet" type="text/css" href="qcc.css"/>
</head>
<body>
<?php echo $row_PK['delivery_details_route'];?>
</body>
</html> 
```

> mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 9 行的 C:\xampp\htdocs\qcc\truckdelivery.php 中给出，没有选择数据库

我不知道我在哪里弄错了代码；此页面是我制作的充满车牌号的表格中的链接，我使用此代码将车牌号变成了链接。

```
href="truckdelivery.php?id_truck=<?php echo $row_truck['id_truck']?>"><?php echo    $row_truck['truck_plate_no']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:31:06.173

在处理查询结果之前检查 MySQL 错误。您的查询很可能以某种方式出错，因此`mysql_query()`没有返回有效结果，因此`mysql_fetch_assoc()`失败。

```
// ...
$PK = mysql_query($sql_PK, $connect);
if ( mysql_error() ) {
  die ( mysql_error();
}
$row_PK = mysql_fetch_assoc($PK);
// ... 
```

^(此外：`mysql_x()`函数已被弃用。请改用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:00:09.300

您的`connect.php`文件可能缺少`mysql_select_db()`声明。检查那个。

# c++ - Visual Studio 2010/2012 加载项项目问题

> ID：14002833
> 
> 赞同：3
> 
> 时间：2012-12-22T12:29:35.953
> 
> 标签：c++, visual-studio-2010, visual-studio, code-analysis, visual-studio-addins

我已经为 C/C++ 创建了一个简单的源代码分析工具，但我希望它成为 Visual Studio 2010 和 2012 版本的扩展或工具。它完全用 C++ 编写。出于这个原因，我使用“使用 Visual C++/ATL 创建加载项”选项创建了它。然后在“选择加载项选项”下，我遇到了一些问题。我不知道该选择哪一个或几个。我希望它在工具部分下有一个名称和图标，但另一方面，我的代码分析器也可以从命令行使用。如果有人可以建议我在那里选择哪个选项，我会很高兴。

我的第二个问题是，当我在 Visual Studio 中打开源文件时，如果我转到 Tools -> MyAddin，然后按下它，我希望它完成它的工作并分析代码，并在输出中显示结果下面的部分。

我的最后一个问题是，如果我有一个文件很少的 C/C++ 项目，如果我右键单击其中一个文件，我想查看我的加载项并能够从在那里，不要总是去工具 - > MyAddin。如果我右键单击项目，同样的事情也可以工作，然后它应该分析所有文件并在输出部分显示问题。

请注意，我已经在 C++ 中创建了源代码分析器工具，并且我将它作为 DLL。我也可以从终端在 Linux 中使用它，如果我愿意，我还可以为它创建一个 GUI，我计划稍后再做。但我对 Visual Studio 的经验并不多，尤其是在插件方面，这就是我需要你帮助的原因。如您所见，我的第一个问题是一种建议，但我认为我的第二个和第三个问题需要一些源代码。我知道你很难在没有看到我的代码的情况下给我一些帮助，但如果你能以某种方式帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:14:17.823

我想你会在这里找到关于这个主题的有价值的信息：[Developing extension packages for Visual Studio 2005/2008/2010/2012 using C# with real-life samples](http://www.viva64.com/en/b/0165/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:30:31.310

对于 Visual Studio 2010 和 2012，您应该考虑使用扩展，而不是加载项。它是 Visual Studio 2010 中引入的一项新技术。扩展以 VSIX 包的形式出现，并自动安装在 Visual Studio 的所有适用版本中。如果您的目标不是 2010 之前的 Visual Studio 版本，我强烈建议您使用扩展。

从这个角度来看，我不会回答您关于加载项的任何技术问题。以下是一些开始使用扩展的链接：

*   [VSIX 包剖析](http://msdn.microsoft.com/en-us/library/dd997148%28VS.100%29.aspx)
*   [为 Visual Studio 2010 构建和发布扩展](http://blogs.msdn.com/b/visualstudio/archive/2009/12/09/building-and-publishing-an-extension-for-visual-studio-2010.aspx)
*   [VSX 常见问题解答](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/0be62d3d-84b2-4e17-a306-bcc460621192)
*   [演练：创建选项页面](http://msdn.microsoft.com/en-us/library/bb166195)

# performance - mongo慢查询

> ID：14002839
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:30:07.253
> 
> 标签：performance, mongodb

我的 mongodb 目前加载了 105,000 个文档，我还需要再插入 500,000 个，而且由于查询引用，仅插入 1000 个文档就需要 4 个多小时：

插入DocA，DocA有很多引用（约30条） 在数据库中查找被DocA引用的文档。[即：findBy-Doi-Or-Pmid-Or-Pmc(...)]

- 所以对于 DocA 引用的每个查询，完成大约需要 400 毫秒。

以下是配置文件之一：Query { $or [ {$or [ {doi: ""}, {pmid: "10508155"} ] }, {pmc: "" } ]}

```
{
   "ts": ISODate("2012-12-22T11: 55: 39.796Z"),
   "op": "query",
   "ns": "fyparticles.mArticle",
   "query": {
     "$or": {
       "0": {
         "$or": {
           "0": {
             "doi": "" 
          },
           "1": {
             "pmid": "10508155" 
          } 
        } 
      },
       "1": {
         "pmc": "" 
      } 
    } 
  },
   "ntoreturn": NumberInt(1),
   "nscanned": NumberInt(105707),
   "responseLength": NumberInt(20),
   "millis": NumberInt(477),
   "client": "192.168.0.15",
   "user": "" 
} 
```

我创建的索引：

```
{
   "v": NumberInt(1),
   "key": {
     "doi": NumberInt(1),
     "pmid": NumberInt(1),
     "pmc": NumberInt(1) 
  },
   "ns": "fyparticles.system.indexes",
   "background": NumberInt(1),
   "name": "params" 
} 
```

请帮帮我！我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:08:57.837

首先，您使用的`$or`不是世界上最快的运算符，因为它需要运行多个查询，然后合并重复项以返回结果。

其次，您使用的是`$or`一个索引。由于 an`$or`基本上是一个或多个查询，您可能需要一个或多个索引来覆盖每个子句中的唯一字段。

第三，您使用`$or`的是nested，请注意，nested`$or`不使用索引：[https ://jira.mongodb.org/browse/SERVER-3327](https://jira.mongodb.org/browse/SERVER-3327)

因此，您的查询已经有 3 个或更多的性能问题。

首先，取出嵌套`$or`：

```
 { $or: [  {doi: ""}, {pmid: "10508155"}, {pmc: ""} ] } 
```

然后您可能需要在此创建三个索引（您可能能够获得一个适合所有我没有测试过的索引）：

```
db.col.ensureIndex({ doi: 1 });
db.col.ensureIndex({ pmdi: 1 });
db.col.ensureIndex({ pmc: 1 }); 
```

这应该是开始让您的查询更快的第一个地方。

# sql - 在两个服务器实例之间复制数据

> ID：14002849
> 
> 赞同：23
> 
> 时间：2012-12-22T12:31:27.113
> 
> 标签：sql, sql-server, tsql

我想要类似的东西：

`insert into server2.database1.table1 select * from server1.database1.table1`

两张表完全相同。

如何**在两个服务器实例之间复制数据？**

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-22T13:03:19.483

**SQL - 链接服务器**

如果两台服务器都是 SQL Server，您可以设置[链接服务器](http://msdn.microsoft.com/en-us/library/ff772782.aspx)- 我建议在那里使用 SQL 帐户以确保安全。

然后你可以简单地执行

```
insert into server2.database1.dbo.table1 
select * from server1.database1.dbo.table1 where col1 = 'X' 
```

如果您在连接到 server1 的 SQL Management Studio 中运行查询，并且当前数据库设置为 database1，则不需要前缀

```
server1.database1.dbo. 
```

此外，链接服务器将在 server1 上配置，以连接到 server2（而不是相反）。

如果您有正确的 OLE DB 驱动程序，此方法也可以在不同类型的 RDBMS（即非 SQL Server 的）之间工作。

*打开查询*

注意：注意不要过度依赖链接服务器，尤其是过滤和跨服务器连接，因为它们需要在应用任何条件之前将数据完整读取到原始 RDBMS。链接服务器可能会引起许多复杂情况，因此请在开始之前阅读，因为即使是版本差异也可能会引起头痛。

我建议您使用 SQL Server 的 OPENQUERY 命令来绕过这些限制。这是一个示例，但您应该通过进一步研究找到针对您需求的帮助：

```
insert into server2.database1.dbo.table1 
select * from OPENQUERY(server1, 'select * from database1.dbo.table1 where col1 = ''X'''); 
```

上面的代码更高效，过滤源服务器上的数据（并使用可用的索引），然后通过泵送数据，节省源服务器和目标服务器的带宽/时间/资源。

（还要注意双引号 ''，是产生单引号的转义序列。）

**SQL - 暂时在同一台服务器上**

将启用（注意下划线）：

```
insert into server2_database1.dbo.table1 
select * from database1.dbo.table1 
```

仍在 SQL 查询域内。如果您可以将 server2 上的数据库临时移动到 server1，那么您将不需要链接服务器。在 server1 上共存时，似乎需要重命名数据库。实现这样的协同定位可以使用各种方法，我建议在继续之前缩小数据库文件：

1.  **备份/恢复**- 在 server2 上备份，在 server1 上恢复（使用不同的名称） - 如上所述执行插入，但没有 server1 或 server2 前缀。然后反向 - 在 server1 上备份，在 server2 上恢复 /
2.  **分离/附加**- 重命名数据库，在 server2 上分离，（压缩），将文件复制到服务器 1，（解压缩），在 server1 上附加，执行插入。然后反...

在任何一种情况下，SQL Server 版本都可能是一个障碍。如果 server1 的 SQL 版本较低，则备份和分离/附加方法都可能会失败。这可以通过将 server1 数据库移动到 server2 来解决，这可能更合适也可能不合适。

**其他方法**

对于前面提到的方法，可能是合适的非 SQL/TSQL 方法失败了有利的环境因素。如果您有正确的访问权限（OLE DB 驱动程序等），此方法还可以在不同类型的 RDBMS（即非 SQL Server 的）和数据源（例如 XML、平面文件、Excel 电子表格）之间工作...)

*   **SSIS**显式与**业务开发管理工作室**- 直接数据泵或使用分隔文件中介。
*   **SSIS**隐式通过**SQL Management Studio**，右键单击 server1 上的 database1 > 任务 > 导出，然后完成向导。可以直接在 server2 上工作，也可以使用平面文件中介。
*   **使用**SqlBulkInsert进行****.Net 编程**（我相信 SSIS 数据泵使用了这样的对象），如果您感兴趣，我可以更详细地介绍这一点。**

 **例如。SQLBulkInsert (psedo-C# 代码)

```
SqlConnection c = new SqlConnection("connectionStringForServer1Database1Here");
SqlConnection c2 = new SqlConnection("connectionStringForServer2Database1Here");
c.Open();
SqlCommand cm = new SqlCommand(c);
cm.CommandText = "select * from table1;";
using (SqlDataReader reader = cm.ExecuteReader())
{
    using (SqlBulkInsert bc = new SqlBulkInsert(c))
    {
         c2.Open();
         bc.DestinationTable = "table1";
         bc.WriteToServer(reader);
    }
} 
```

很酷吧？如果速度/效率是一个问题 - 基于 SqlBulkInsert 的方法（如 SSIS）是最好的。

**更新 - 修改目标表**

如果您需要更新目标表，我建议您：

1.  写入目标数据库上的临时表（临时表，或在处理前后截断的适当表），后者更可取。如果您没有 CREATE TABLE 权限，前者可能是您唯一的选择。您可以使用上述任一选项执行传输。
2.  根据您的要求从暂存表到目标表运行 MERGE INTO 命令。这可以非常有效地根据需要进行插入、更新和删除。

这样的整个过程可以通过滑动窗口（自上次检查以来的更改）来增强，仅将源中最近更改的行应用到目标，这会使过程复杂化，因此您至少应该先完成更简单的过程。完成一个滑动窗口版本后，您可以定期运行完全更新版本，以确保滑动窗口没有错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-22T12:32:14.070

要在两个不同的服务器之间复制数据，您有多种选择：

*   使用[链接服务器](http://msdn.microsoft.com/en-us/library/ms188279.aspx)。
*   使用[数据导入导出向导](http://msdn.microsoft.com/en-us/library/ms140052.aspx)。
*   使用第三方工具，例如 Red Gate [SQL Data Compare](http://www.red-gate.com/products/sql-development/sql-data-compare/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-15T10:49:03.993

类似于 Todd C# SqlBulkCopy

通常这比创建链接服务器更容易。

创建一个单元测试并运行以下内容，如果您有触发器，请小心，您将需要 ALTER 权限。

```
 [Test]
    public void BulkCopy()
    {
        var fromConnectionString = @"fromConnectionString";
        var destinationConnectionString = @"destConnectionString2";

        using (var testConnection = new SqlConnection(fromConnectionString))
        {
            testConnection.Open();
            var command = new SqlCommand("select * from MyTable;", testConnection);
            using (var reader = command.ExecuteReader())
            {
                using (var destinationConnection = new SqlConnection(destinationConnectionString))
                {
                    using (var bc = new SqlBulkCopy(destinationConnection))
                    {
                        destinationConnection.Open();
                        bc.DestinationTableName = "dbo.MyTable";
                        bc.WriteToServer(reader);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T12:52:48.157

最好的方法是创建一个“链接服务器”。然后你可以在你的插入语句中使用下面的语句来定义你的表

```
 [linkedserver].databasename.dbo.tablename 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T12:46:38.637

在服务器 A 上添加链接服务器 (B)

[http://msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

然后，您可以在两者之间传输数据。

[将表数据从一个 SQL Server 导出到另一个](https://stackoverflow.com/questions/11009189/export-table-data-from-one-sql-server-to-another)

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-22T09:49:52.983

首先，您需要添加服务器，例如。服务器 1 和服务器 2

`sp_addlinkedserver 'Server-2'`

然后使用以下查询将您的数据从该服务器复制到您的服务器

在 Server-1 中写入

```
select *   INTO  Employee_Master_bkp
FROM [Server-2].[DB_Live].[dbo].[Employee_Master] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-30T20:57:55.693

如果您需要不使用链接服务器的替代方案，我最喜欢的选项是使用命令行 BCP 实用程序。使用此批量复制工具，您可以将数据导出到平面文件，通过网络复制文件并将其导入（加载）到目标服务器。

[https://docs.microsoft.com/en-us/sql/tools/bcp-utility](https://docs.microsoft.com/en-us/sql/tools/bcp-utility)**

# html - 具有流体布局的标题高度

> ID：14002850
> 
> 赞同：1
> 
> 时间：2012-12-22T12:31:31.183
> 
> 标签：html, css, height, responsive-design, fluid-layout

### 介绍

我正在做一个具有流畅布局的网站（所有容器宽度都以 % 表示）以适应所有分辨率。没关系，在小分辨率、宽 imac 屏幕、平板电脑和手机的浏览器中看起来不错。

### 布局

它有一些列，它是一个 1200px 页面的想法。布局是这样的：

![在此处输入图像描述](../Images/d51188c141c4c1ac3948bf749407b9c0.png)

### 问题

但我对标题高度有疑问。现在它是固定的：

```
#title {
    padding-top: 135px;
} 
```

我想在分辨率的基础上改变标题高度，但我不知道如何解决它。

如果我使用百分比作为高度，则不清楚它是如何计算的。我应该使用`html, body { height: 100%; }`但如果内容从一页到另一页不同怎么办？如果内容溢出视口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:10:59.277

我用一些javascript和jquery做到了：

```
 function resizeTitle() {
        var width = $(window).width();
        var h = width;
        $("header").css("height", h/8+"px");
        $("header #title").css("padding-top", h/14+"px");
    }
    $(window).resize(resizeTitle);
    resizeTitle(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:11:13.200

我不知道为什么 % 值不适用于高度或其他垂直属性。

我所做的是使用媒体查询。

前任：

```
#title {
padding-top: 135px;
}
@media screen and (max-width=600px)
    #title {
    padding-top: 100px
    }
} 
```

依此类推，适用于每个屏幕尺寸。

您可以使用 webdeveloper 工具栏之类的工具来查看它在多种屏幕分辨率下的显示方式

# javascript - 更改视图时如何从 AngularJS 调用 JQuery 函数

> ID：14002864
> 
> 赞同：13
> 
> 时间：2012-12-22T12:32:45.053
> 
> 标签：javascript, jquery, scrollbar, angularjs

我是 AngularJS 的新手，在我的应用程序中实现[jQuery 自定义内容滚动器](http://manos.malihu.gr/jquery-custom-content-scroller/)时遇到了一个问题。

当我使用 Angular 更新内容时，我需要更新滚动条，为此滚动条有一个`update`方法。我的问题是，我不知道在哪里调用它。内容的标记如下：

```
<div class="scroll-list nice-scrollbars">
    <ul class="gallery clearfix">
        <li class="extra-alt" ng-repeat="item in relatedItems.data">
            ...
        </li>
    </ul>
</div> 
```

我试图在 Angular 的成功分支中调用更新方法`$http.post`：

```
$scope.relatedItems = $http.post($scope.url, {
    'filterType': 'related', 'film': id
}).success(function() {
    $(".nice-scrollbars").mCustomScrollbar('update');
}); 
```

这不起作用，我认为是因为调用成功方法时，视图内容尚未更新（我可以使用`alert`函数看到它，关闭对话框后出现数据）

我能够使滚动条工作的唯一方法是使用滚动条的高级属性来观察内容的变化（这些是传递给滚动条的选项）：

```
var scrollbarOpts = {
    scrollButtons:{
        enable:true
    },
    advanced:{
        updateOnContentResize: true
        //@TODO: get rid of this, correctly find where to call update method
    }
} 
```

这是不好的做法，因为此选项会降低整个脚本的性能。 **我想知道，调用 jQuery 方法根据需要更新 DOM 所需的正确位置在哪里，或者这种绑定如何在 AngularJS 中正确完成查看更改？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-22T17:36:37.177

DOM 操作应该在指令（而不是控制器）中完成。该指令应该 $watch() 你的模型进行更改，并且 watch 回调应该执行 jQuery DOM 操作。有时需要 $evalAsync 在 Angular 更新/修改 DOM 之后（但在浏览器渲染之前运行 jQuery 代码。`$timeout`如果您想在浏览器渲染之后执行某些操作，请使用）。看到[这个答案](https://stackoverflow.com/a/13619324/215945)，我提供了一个小提琴，展示了如何使用指令来 $watch() 模型属性，我在模拟 fetch() 函数中使用了 $evalAsync。

对于您的特定情况，我建议您首先在指令中尝试以下操作：

```
scope.$watch("relatedItems.data", function() {
   $(".nice-scrollbars").mCustomScrollbar('update');
}); 
```

如果这不起作用，试试这个：

```
scope.$watch("relatedItems.data", function() {
   scope.$evalAsync(  // you might need to wrap the next line in a function, not sure
      $(".nice-scrollbars").mCustomScrollbar('update')
   );
}); 
```

# php - 如何强制所有链接在 iframe 中打开

> ID：14002867
> 
> 赞同：1
> 
> 时间：2012-12-22T12:33:13.790
> 
> 标签：php, iframe, hyperlink

有没有办法强制每个链接在 iframe 中打开？我可以控制一些我想展示的网站，但不能控制其他网站。我愿意使用 php 或 javascript。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:37:05.517

您可以使用 jQuery：

```
$(document).ready(function(){
   $('a').attr('target', 'iframeNameHere');
}); 
```

[这里](http://jsfiddle.net/TfkkE/)的小样本。

# angularjs - 如何在 ng:pluralize 中格式化数字

> ID：14002870
> 
> 赞同：8
> 
> 时间：2012-12-22T12:33:37.863
> 
> 标签：angularjs

如何格式化通过属性'count'传递给ng：pluralize指令的数字？

考虑以下代码：

```
<ng:pluralize count="5000000" when="{'other': '{} things'}"></pluralize> 
```

输出是：

```
5000000 things 
```

我如何修改它以使输出为：

```
5,000,000 things    // in US locale
5 000 000 things    // in Czech locale 
```

我尝试使用过滤器“数字”，但我想我不知道该放在哪里。它在传递给属性“when”的对象中不起作用。我试过这些：

```
... when="{'many': '{{{}|number}} things'}"
... when="{'many': '{}|number things'}"
... when="{'many': '{|number} things'}" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-22T17:46:26.503

您需要将值分配给变量

```
 <ng:pluralize ng-init="myCount=5000000" count="myCount" when="{'other': '{{myCount|number}} things'}"></ng:pluralize> 
```

这会将值格式化为当前的语言环境规则

**演示**：

*   [笨蛋](http://plnkr.co/edit/XvGHHmIuIgcqjIGgYVzp?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T11:40:42.587

扩展@Liviu T.'s answer，没有真正需要使用 ng-init 来分配变量。您可以直接在计数中进行。

```
<ng:pluralize count="myCount=5000000" when="{'other': '{{myCount|number}} things'}"></ng:pluralize> 
```

# java - 升级到 spring 3.2 但邮件似乎消失了？

> ID：14002875
> 
> 赞同：4
> 
> 时间：2012-12-22T12:34:26.910
> 
> 标签：java, spring, email, maven

刚刚升级到 spring3.2 - 但邮件已经消失了 AFAIK。

[官方指南](http://static.springsource.org/spring-framework/docs/3.2.0.RELEASE/spring-framework-reference/html/migration-3.2.html)中没有提到它。它去了哪里：

![它去哪儿了](../Images/703d2db2a4130e6db22f761c7cc6ea7e.png)

我的 pom 看起来像这样： ![核心](../Images/dcd3f6e920457403f21d846e88750b09.png)

[除了缓存管理器](https://stackoverflow.com/questions/13956224/spring-3-2-and-cache-abstraction-missing-ehcache-implementation)之外，其他一切都对我有用，但对此有解释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T12:45:59.837

我需要这个额外的 jar，与 ehcache 支持相同（但在指南中没有提到？）

```
 <dependency>
   <groupId>org.springframework</groupId>
    <artifactId>spring-context-support</artifactId>
    <version>3.2.0.RELEASE</version>
 </dependency> 
```

# webgl - 未应用三个 JS 3ds Max 渐变

> ID：14002879
> 
> 赞同：0
> 
> 时间：2012-12-22T12:34:54.903
> 
> 标签：webgl, three.js, 3dsmax

我使用threejsexporter（https://github.com/mrdoob/three.js/blob/dev/utils/exporters/max/ThreeJSExporter.ms）和.obj（然后我将其转换为）从3ds Max将我的3d模型导出为json使用 convert_obj_three.py 到 json）。我使用 three.js 在我的页面中加载了模型，但它们都没有保留使用 Gradient Ramp (3ds Max 2009) 应用于模型的渐变。

如何恢复渐变以使模型在网页中看起来与在 3ds Max 中相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:40:40.107

不支持 3ds Max 的渐变渐变。您必须使用位图或使用画布 API 动态创建位图。

# objective-c - Objective C NSMutable Array 无法添加项目

> ID：14002883
> 
> 赞同：0
> 
> 时间：2012-12-22T12:36:13.247
> 
> 标签：objective-c, object, interface, nsmutablearray, stack

请看我的代码 1st。我正在尝试将一些 Car 对象添加到 MutableArray *parkPlace （该属性属于 Park 类）

我的预期结果应该如下所示：

```
CarParkSim[2662:303] Parking: Car Number:1 At:3 o'clok Position:0
CarParkSim[2662:303] Parking: Car Number:2 At:4 o'clok Position:1
CarParkSim[2662:303] Parking: Car Number:3 At:5 o'clok Position:2 
```

但是，我得到的实际结果是这样的：

```
2012-12-22 12:13:46.085 CarParkSim[2662:303] Parking: Car Number:1 At:3 o'clok Position:0
2012-12-22 12:13:46.087 CarParkSim[2662:303] Parking: Car Number:2 At:4 o'clok Position:0
2012-12-22 12:13:46.088 CarParkSim[2662:303] Parking: Car Number:3 At:5 o'clok Position:0 
```

我确实检查了 NSmutablearray，它是空的......它似乎将任何东西推入堆栈......有什么建议吗？谢谢

无论如何，这里是代码：公园类：

```
#import <Foundation/Foundation.h>
#import "Stack.h"
#import "Car.h"

@interface Park : NSObject
@property(strong,nonatomic)NSMutableArray *parkPlace;
@property(strong,nonatomic)Car *car;
-(void)carMoveIntoPark:(Car *)car;
@end

#import "Park.h"
@implementation Park

-(void)carMoveIntoPark:(Car *)car
{

if ([self.parkPlace count] <= 2) {

    Car *car1 = [[Car alloc] init];
    car1.carNumber = 1;
    car1.timeIO = 3;

    [self.parkPlace push:car1];
    int carNumber = car.carNumber;
    int carTimer = car.timeIO;
    NSUInteger parkPosition = [self.parkPlace count];
    NSLog(@"Parking: Car Number:%d At:%d o'clok Position:%ld", carNumber, carTimer, parkPosition);

} else {
    //to be implement later
} 
}
 @end 
```

这是我的主要内容：

```
int main(int argc, const char * argv[])
{
Car *car1 = [[Car alloc] init];
car1.carNumber = 1;
car1.timeIO = 3;

Car *car2 = [[Car alloc] init];
car2.carNumber = 2;
car2.timeIO = 4;

Car *car3 = [[Car alloc] init];
car3.carNumber = 3;
car3.timeIO = 5;

Park *park = [[Park alloc] init];
[park carMoveIntoPark:car1];
[park carMoveIntoPark:car2];
[park carMoveIntoPark:car3]; 
```

这是我的汽车课：

```
#import <Foundation/Foundation.h>

@interface Car : NSObject
@property(assign,nonatomic)int carNumber;
@property(assign,nonatomic)int timeIO;

@end

#import "Car.h"
@implementation Car
@end 
```

顺便说一句，我正在尝试使用堆栈数据结构将汽车推到“堆栈”上，因为目标 c 中没有这样的数据结构，所以我实现了自己的，这里是堆栈类：

```
#import <Foundation/Foundation.h>

@interface NSMutableArray (Stack)
-(void) push:(id)item;
-(id)pop;
-(id)peek;
-(void)replaceTop:(id)item;

@end

#import "Stack.h"

@implementation NSMutableArray (Stack)

-(void)push: (id)item{
[self addObject:item];
}

-(id)pop {
id item = nil;
if ([self count] != 0) {
    item = [self lastObject];
    [self removeLastObject];
}
return item;
}

-(id)peek{
id item = nil;
if([self count] != 0) {
    item= [self lastObject];
}
return item;
}

-(void) replaceTop:(id)item{
if([self count] == 0) {
    [self addObject:item];
}else{
    [self removeLastObject];
    [self addObject:item];
}
}

@end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T12:41:05.643

您不会在任何地方为您的数组分配内存。这就是构造函数被发明的目的：

```
@implementation Park

- (id)init
{
    if ((self = [super init])) {
        parkPlace = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void)dealloc
{
    // The destructor needs to be implemented as well
    [parkPlace release];
    [super dealloc];
}

// Other parts of the implementation here

@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T12:40:49.180

你还没有初始化 parkPlace - 它仍然是 nil。Objective-C 允许你默认发送消息到 nil，但它们不做任何事情。

如果我是你，我会在你的 Park 类的 init 方法中设置它。

# php - My imploded string wont insert

> ID：14002886
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:36:41.173
> 
> 标签：php, mysql, sql

I had an multidimensional array which contained titles, links and descriptions for a collaboration of news stories crawled from the BBC News site.

I then used a function to implode it into a string, then defined the called function into a variable and inserted it into a database. But there is nothing being inserted. I have used the `die(mysql_error())` and nothing is being returned and I am struggling to think what I am doing wrong.

If I echo the variable I am inserting, I receive input similiar to the following: title, description, (where keywords should be), link, title, description, keywords link, title description, keywords, link.

Do you have any idea? Am I having some sort of quotation problem here?

```
 function r_implode( $glue, $pieces ) 
{ 
foreach( $pieces as $r_pieces ) 
{ 
    if( is_array( $r_pieces ) ) 
    { 
        $retVal[] = r_implode( $glue, $r_pieces ); 
    } 
    else
    { 
        $retVal[] = "'".$r_pieces."'";  //Here add quotes
    } 
} 
return implode( $glue, $retVal ); 
} 

$data = r_implode( ' , ', $news_stories); //And Here remove quotes
$query = mysql_query("INSERT INTO news_story (title, description, keywords, link) VALUES (". $data .")") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:45:47.543

我认为这里会有报价问题

```
function r_implode( $glue, $pieces ) 
{ 
    foreach( $pieces as $r_pieces ) 
    { 
        if( is_array( $r_pieces ) ) 
        { 
            $retVal[] = r_implode( $glue, $r_pieces ); 
        } 
        else
        { 
            $retVal[] = "'".$r_pieces."'";  //Here add quotes
        } 
    } 
    return implode( $glue, $retVal ); 
} 

$data = r_implode( ' , ', $news_stories); //And Here remove quotes
$query = mysql_query("INSERT INTO news_story (title, description, keywords, link) VALUES (". $data .")") or die(mysql_error()); 
```

# php - I want to submit this form into DB php

> ID：14002887
> 
> 赞同：0
> 
> 时间：2012-12-22T12:36:42.000
> 
> 标签：php, checkbox

i want to insert this below given form data to database, but i dont know how to do this, it is about inserting product to multiple warehouse with different quantities, when checkbox against the warehouse name is checked than the quantity textbox appears.

and this is my PHP code

```
<form name="form1" method="post" action="product_insert.php" enctype="multipart/form-data">
  <table>
    <tr>
      <td width="274" align="right" height="25"><strong>Product Name :</strong></td>
      <td><input type="text" name="wproname" value=""  /></td>
    </tr>
    <tr>
      <td width="274" align="right" height="25"><strong>Select Warehouse :</strong></td>
      <td width="500"><table style="border:none">
          <tr >
            <td> Select </td>
            <td> Name </td>
            <td> Quantity </td>
          </tr>
          <?php 
    $sql="select * from tbl_warehouse where w_flag='1'"; 
    $result=ExecuteGetRows($sql);   
    $num_rows=count($result); ?>
          <?php for($i=0;$i<$num_rows;$i++){ ?>
          <tr>
            <td><input type="checkbox" name="chk<?php echo $result[$i]['w_id'];?>" value="<?php echo $result[$i]['w_id'];?>" id="chk<?php echo $result[$i]['w_id'];?>" onChange="display<?php echo $result[$i]['w_id'];?>();" />
            </td>
            <td><?php echo $result[$i]['w_name'];?></td>
            <td><input type="text" name="qty<?php echo $result[$i]['w_id'];?>" id="qty<?php echo $result[$i]['w_id'];?>" style="display:none" />
             </td>
          </tr>
          <script>
function display<?php echo $result[$i]['w_id'];?>()
{
if(document.getElementById("chk<?php echo $result[$i]['w_id'];?>").checked)
{

document.getElementById("qty<?php echo $result[$i]['w_id'];?>").style.display="block";
}
if(!document.getElementById("chk<?php echo $result[$i]['w_id'];?>").checked)
{
document.getElementById("qty<?php echo $result[$i]['w_id'];?>").style.display="none";
}
}
</script>
          <?php } ?>
        </table></td>
    </tr>
       <tr>
      <td align="right"></td>
      <td width="296"><input type="submit" name="Submit" value="Add New" align="middle" class="button login_btn"/></td>
    </tr>
  </table>
</form> 
```

And I am using this php code for inserting data to the database

```
$sqls=mysql_query("select * from tbl_warehouse");
while($result=mysql_fetch_array($sqls)) {
    $w = $result['w_id'];

    echo $_POST['chk'.$w];

    foreach($_POST['chk'.$w] as $key=>$val) {
        echo $_POST['chk'.$w];
        $sql = "INSERT INTO tbl_product(p_id,w_id,p_name,p_qty) values ('','".$wid."','".$wproname."','".$qty."')"; 

        mysql_query($sql);  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:51:34.423

您不需要插入语句中值列表中的前导逗号。所以改变这个：

```
"INSERT INTO tbl_product(p_id,w_id,p_name,p_qty) values ('','".$wid."','".$wproname."','".$qty."')"; 
```

对此：

```
"INSERT INTO tbl_product(p_id,w_id,p_name,p_qty) values ('".$wid."','".$wproname."','".$qty."')"; 
```

# php - 原则 2：查询结果为关联数组

> ID：14002888
> 
> 赞同：20
> 
> 时间：2012-12-22T12:37:00.003
> 
> 标签：php, doctrine, doctrine-orm, dql

在我的 Repository 类中，我使用以下代码进行查询：

```
$query = $this->getEntityManager()->createQuery("
    SELECT s.term, COUNT(s.term) AS freq
    FROM App\Entities\SearchTerm s
    GROUP BY s.term
    ORDER BY s.term ASC
");

$result = $query->getResult(); 
```

我得到的结果是这样的：

```
array (size=4)
  0 => 
    array (size=2)
      'term' => string '' (length=0)
      'freq' => string '1' (length=1)
  1 => 
    array (size=2)
      'term' => string 'foo' (length=3)
      'freq' => string '1' (length=1)
  2 => 
    array (size=2)
      'term' => string 'bar' (length=3)
      'freq' => string '2' (length=1)
  3 => 
    array (size=2)
      'term' => string 'baz' (length=3)
      'freq' => string '2' (length=1) 
```

但我宁愿有一个关联数组作为结果：

```
array (size=4)
  '' => string '1' (length=1)
  'foo' => string '1' (length=1)
  'bar' => string '2' (length=1)
  'baz' => string '2' (length=1) 
```

**如果没有额外的 for 循环**来构建所需的数组，这是否可能？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-22T08:55:01.393

我知道它很旧，但今天我不得不做几乎相同的事情，我的解决方案没有定制保湿剂

*   索引按s.term
*   修改 getResult() 以确保

喜欢

```
$result = $query->getQuery()->getResult(\Doctrine\ORM\AbstractQuery::HYDRATE_ARRAY); 
```

*   格式化结果

作为

```
$resultNeeded = array_map(function($value) { return $value['freq']; }, $result); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-12-02T18:19:05.363

如果你想要一个数组，你可以[使用`getArrayResult`方法](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/AbstractQuery.php#L674-L684)。

> 获取查询的结果数组。
> 
> 执行的别名（null，HYDRATE_ARRAY）。

```
$result = $query->getQuery()->getArrayResult(); 
```

所以使用这个方法会给你[与使用常量完全相同的结果`HYDRATE_ARRAY`](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/AbstractQuery.php#L692)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-20T14:31:00.177

使用**INDEX BY**：

```
$em = $this->getEntityManager();
$query = $em->createQuery('SELECT c FROM SomeBundle:Configuration c INDEX BY c.name');
$query->getResult(\Doctrine\ORM\Query::HYDRATE_ARRAY); 
```

我在这里看到它并且工作正常：[https ://coderwall.com/p/crz4dq/defining-a-column-to-be-the-key-of-the-result-hydrad-as-array-in-doctrine -2](https://coderwall.com/p/crz4dq/defining-a-column-to-be-the-key-of-the-result-hydrated-as-array-in-doctrine-2)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-22T13:43:16.287

实际上，必须在*某个地方*进行换位。有关返回的内容以及已经存在哪些替代模式/变体，请参阅[*Hydration Modes 。*](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#hydration-modes)`->getResult()`

您还可以在中心位置添加自己的补水模式。[*自定义补水模式*](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#custom-hydration-modes)中对此进行了说明。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-16T14:48:17.847

经过大量搜索，我找到了一些**学说对象到数组转换**的解决方案。当我们在结果中有关联的对象时。

**1.**

```
$person = $em->find('Person', 2);
$da = array();
        $person = (array) $person;
        foreach($person as $i=>$d) {
            if (is_object($d)) {
                $d = (array) $d;
                foreach($d as $si=>$sd){
                    if (is_object($sd)) {
                        //var_dump('after convert array');
                        $da[$i][$si] = (array) $sd ;
                         //var_dump($da[$i][$si]);
                    } else {
                       $da[$i][$si] = $sd ;
                       //var_dump($da[$i][$si] );
                    }
                }

            } else {
                $da[$i] = $d;
                //var_dump($da[$i]);
            }
        }

echo '<pre>'; print_r($da); echo '<pre>'; exit; 
```

**2.**

```
$query = $em->createQuery('SELECT w FROM  Person w WHERE w.Id = 2');
$person = $query->getResult(\Doctrine\ORM\Query::HYDRATE_ARRAY);
echo '<pre>';  \Doctrine\Common\Util\Debug::dump($person); exit; 
```

**3.**

```
 $result = $em->createQueryBuilder();
            $person = $result->select('p')
            ->from('PsnPersonPsn', 'p')
            ->where('p.Id= 1')
            ->getQuery()
            ->getResult(\Doctrine\ORM\Query::HYDRATE_ARRAY);
             echo '<pre>';  \Doctrine\Common\Util\Debug::dump($person); exit; 
```

# ruby-on-rails - 时间对象的就地编辑

> ID：14002890
> 
> 赞同：2
> 
> 时间：2012-12-22T12:37:13.790
> 
> 标签：ruby-on-rails, time, edit-in-place, best-in-place

我有一个应用程序，用于为许多员工计划工作班次。我有一个`Shift`模型，我将`shiftstart`和存储`shiftend`为`Time`对象。

我`Shifts`在一个页面上显示用户，该页面在表格中显示了几天。这个想法是用户可以使用[Best In Place](https://github.com/bernat/best_in_place) gem直接在此表中编辑`shiftstart`和。`shiftend`

但是在处理 Time 对象时，我似乎无法弄清楚如何让它工作——任何人都对此有一些经验或建议。

我有以下代码：

看法：

```
<% @myShifts.where(:shiftdate => date).order(:shiftstart).each do |shift| %>
  <div class="shift-item span">
    <div class="hider">
      <p>
        <i class="icon gear"></i>
          <%= best_in_place shift.shiftstart.strftime("%H.%M"), :type => :input %> - <%= best_in_place shift.shiftend.strftime("%H.%M"), :type => :input %>
      </p>
    </div>
  </div>
<% end %> 
```

架构：

```
create_table "shifts", :force => true do |t|
  t.time     "shiftstart"
  t.time     "shiftend"
  t.integer  "type_id"
  t.integer  "user_id"
  t.string   "note"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
  t.date     "shiftdate"
end 
```

我收到*“08.00”：String 错误的“未定义方法 `{:type=>:input}'*并且我已经尝试将 Best In Place Type 切换到其他输入 - 没有帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T13:30:57.990

`best_in_place`方法接受两个强制参数；一个对象（`shift`在你的情况下）和一个字段（`shiftstart`和`shiftend`），然后是选项的可选哈希（`:type => :input`）。所以你的代码需要是这样的：

```
<%= best_in_place shift, :shiftstart, :type => :input, :display_with => Proc.new { |f| f.strftime("%H.%M") } %> 
```

# ajax - 是否可以让“ajaxed”页面使用调用者的脚本？

> ID：14002897
> 
> 赞同：0
> 
> 时间：2012-12-22T12:38:28.710
> 
> 标签：ajax, external

我真的不知道如何用正确的词来表达，但想法如下：

我想通过 jQuery 的 load() 调用一个页面，其中包含一个轮播的代码。

因为在主页上我已经包含了轮播的脚本（在本例中为 jQ Carousel），所以我想使用我包含的代码，而不是从“ajaxed”页面调用它。

可能吗？非常感谢人们！

* * *

以防万一这是我第二个轮播的脚本。

我不知道我是否做得对，并且正在破坏，因为它不默认为 $carousel 变量，因为另一个轮播将它用作全局变量而不是特定函数。

[http://5509.github.com/jq.carousel/](http://5509.github.com/jq.carousel/)

```
$carousel_pl = $('#carousel_pl').carousel({
    loop:false,
    group: 6,
    start:1,
    indicator:true
}) 
$prev_pl = $('#min_'),
$next_pl = $('#plus_'),
set_state_2_2 = function() {
    var state_2 = $carousel_pl.carousel('getMoveState');
    switch ( state_2 ) {
        case 'min':
            $prev_pl.prop('disabled', 'disabled');
            $next_pl.prop('disabled', '');
            break;
        case 'max':
            $prev_pl.prop('disabled', '');
            $next_pl.prop('disabled', 'disabled');
            break;
        case true:
            $prev_pl.prop('disabled', '');
            $next_pl.prop('disabled', '');
            break;
        default:
            $prev_pl.prop('disabled', 'disabled');
            $next_pl.prop('disabled', 'disabled');
    }
};
$('#min_').on('click', function(ev) {
    $carousel_pl.carousel('prev');
});
$('#plus_').on('click', function(ev) {
    $carousel_pl.carousel('next');
});
$carousel_pl.carousel('reset');
$carousel_pl.carousel('refresh'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:12:06.113

好的，解决了我自己的问题！

**它确实有效！**

问题是我错过了一个 DIV 并且代码不起作用。

# java - JFileChooser 保存对话框建议文件名

> ID：14002898
> 
> 赞同：3
> 
> 时间：2012-12-22T12:38:35.713
> 
> 标签：java, swing, filenames, jfilechooser, savefiledialog

> **可能重复：**
> [JFileChooser.showSaveDialog(...) - 如何设置建议的文件名](https://stackoverflow.com/questions/356671/jfilechooser-showsavedialog-how-to-set-suggested-file-name)

我已经看到这个问题被问了几次，但没有答案对我有任何帮助。我希望保存对话框使用 JFileChooser 建议像“myFile.txt”这样的文件名。

这是我所拥有的：

```
JFileChooser jFileChooser = new JFileChooser();
jFileChooser.setCurrentDirectory(new File("C:\\"));
jFileChooser.showSaveDialog(null); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T12:44:18.737

这将做到：

```
jFileChooser.setSelectedFile(new File(optionalPath + "myFile.txt")); 
```

# php - 运算符覆盖，如 php 类中的 .net

> ID：14002901
> 
> 赞同：2
> 
> 时间：2012-12-22T12:39:00.567
> 
> 标签：php

我有一个具有多个数值和功能的类（对于某种计数类别等）

```
class mBasicClass
{
    public $typ01Value = 0;
    public $typ02Value = 0;
} 
```

我还有一些其他类实际上是这些类的组

```
class mClass
{
    public $vjA = new mBasicClass();
    public $ntB = new mBasicClass();
    public $ntC = new mBasicClass();
    public $ntD = new mBasicClass();
} 
```

我想知道的-有没有办法在php类中编写像.net这样的运算符覆盖

这样我就可以使用

```
$vjA + $ntB 
```

实际上是

```
$vjA->$typ01Value + $ntB ->$typ01Value
$vjA->$typ02Value + $ntB ->$typ02Value 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T12:52:11.963

自 2001 年以来，对 PHP 对象运算符重载的请求一直是公开的票：

[https://bugs.php.net/bug.php?id=9331](https://bugs.php.net/bug.php?id=9331)

所以不幸的是你不能做你所要求的:(

相反，您必须创建一个类似的函数`addObjects($obj1, $obj2)`并自己进行手动计算：

```
addObjects($obj1, $obj2)
{
    $new_obj = new mBasicClass();
    $new_obj->typ01Value = $obj1->typ01Value + $obj2->typ01Value;
    $new_obj->typ02Value = $obj1->typ02Value + $obj2->typ02Value;

    return $new_obj;
} 
```

然后使用它：

```
$result = addOjbects($vjA, $ntB); 
```

# optimization - 计算独特事件的有效方法？

> ID：14002905
> 
> 赞同：0
> 
> 时间：2012-12-22T12:39:37.283
> 
> 标签：optimization, sqlite, query-optimization

我有一个更新项目的数据库表`(item_id, updated_time, key, value)`。我想知道每个项目更新了多少次。我目前的查询是：

```
SELECT item_id, count(*)
FROM (SELECT DISTINCT item_id, updated_time FROM updates)
GROUP BY item_id; 
```

问题是这运行非常缓慢。我的表有 2451 个项目和大约 800 万个更新，数据库目前只涵盖一天。我在和`item_id`上有索引。`updated_time``(item_id, updated_time)`

我可以让这个查询在 sqlite 中运行得更快吗？转向不那么“精简”的东西会有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:06:34.437

子查询阻止外部查询中的索引优化。使用单个查询，如下所示：

```
SELECT item_id,
       count(DISTINCT updated_time)
FROM updates
GROUP BY item_id 
```

使用足够新的 SQLite 版本，这将从覆盖索引运行（检查`EXPLAIN QUERY PLAN`）。

# android - Android 未检测到点击 EditText

> ID：14002906
> 
> 赞同：0
> 
> 时间：2012-12-22T12:39:45.553
> 
> 标签：android, datepicker, textview

我正在开发一个带有一些复杂表单的 Android 平板电脑应用程序（布局有一个 ListView 和包含表单的布局，所以我必须膨胀 EditText）。我的想法是，如果我单击显示日期的 TextView，DataPicker 将显示在对话框中。

问题是未检测到点击。没有日志。

爪哇：

```
 public static EditText datep;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.admissions_all);

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);

        View inf = LayoutInflater.from(getApplicationContext()).inflate(R.layout.admissions, null);
        datep = (EditText) inf.findViewById(R.id.date_value);

        datep.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Log.i("Date", "You clicked me mate!");
                showDatePickerDialog(v);
            }
        });

    }

    public void showDatePickerDialog(View v) {
        DialogFragment newFragment = new DatePickerFragment();
        newFragment.show(getFragmentManager(), "datePicker");
        Log.i("Date", "I want to show datePicker");
    }

    public static class DatePickerFragment extends DialogFragment
    implements DatePickerDialog.OnDateSetListener {

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            // Use the current date as the default date in the picker
            final Calendar c = Calendar.getInstance();
            int year = c.get(Calendar.YEAR);
            int month = c.get(Calendar.MONTH);
            int day= c.get(Calendar.DAY_OF_MONTH);

            // Create a new instance of DatePickerDialog and return it
            return new DatePickerDialog(getActivity(), this, year, month, day);
        }

        public void onDateSet(DatePicker view, int year, int month, int day) {
             datep.setText(day + "." + month+ "." + year);
        }
    } 
```

XML:

```
<RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/general"
        android:layout_alignRight="@id/general"
        android:layout_below="@+id/general"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Data"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <View
            android:id="@+id/line"
            android:layout_width="wrap_content"
            android:layout_height="1dp"
            android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
            android:layout_below="@+id/title"
            android:background="#333333" />

        <EditText
            android:id="@+id/date_value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/line"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/date_desc"
            android:ems="9"
            android:inputType="date" >
        </EditText>

        <TextView
            android:id="@+id/date_desc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/date_value"
            android:layout_alignBottom="@+id/date_value"
            android:layout_alignParentLeft="true"
            android:text="Date:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

我跟着这个：http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:26:33.887

我没有看到任何`dateup.setclickable(true);`，尝试添加这个。也许这就是它不起作用的原因，您也可以调试它，看看它是否调用`onlciklistner` 了

我看到你写了这样的东西。

```
datep = (EditText) inf.findViewById(R.id.date_value); 
```

当你有这个

```
setContentView(R.layout.admissions_all); 
```

这意味着您`editText`在另一个 Activity 中，但是您将他的设置在另一个 Activity`onclickListner`中，所以它不起作用。在activity中初始化他`onlcikListner`，那个内容视图是inf.xml。如果所有这些都无济于事，请添加更多代码部分

问候海克·纳哈佩蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:12:57.587

您需要将 date_value 在触摸模式下的可聚焦设置为 false。您可以通过添加`android:focusableInTouchMode="false"`到您的 xml 或在您的代码中使用`datep.setFocusableInTouchMode(false);`. 这应该会触发您的点击事件。（在模拟器上测试）

另请参阅：[用户点击我的 EditText 后如何做某事](https://stackoverflow.com/questions/2119072/android-how-to-do-something-after-user-clicks-on-my-edittext)

参考：[http ://android-developers.blogspot.com/2008/12/touch-mode.html](http://android-developers.blogspot.com/2008/12/touch-mode.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:34:19.207

您能否将 DatePickerFragment 更改为 DatePickerDialog。然后做一个 DatePickerDialog.show(); 就像是 ：

```
DatePickerDialog datePickerDialog = null;
datep.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Log.i("Date", "You clicked me mate!");
            showDatePickerDialog();
        }
    });

private void showDatePickerDialog() {
    datePickerDialog = new DatePickerDialog(context, new DateSetListener(), year, month, day);
    datePickerDialog.show();
} 
```

# python - 查询以获取日期重叠

> ID：14002907
> 
> 赞同：1
> 
> 时间：2012-12-22T12:39:56.527
> 
> 标签：python, django

我有一个`model`名字`Company_Position_Person`，可以确定每个人在公司工作，并在`startDate`和之间指定职位`endDate`：

```
class Company_Position_Person(models.Model):
    company_position=models.ForeignKey(Company_Position)
    person=models.ForeignKey(Person)
    startDate=models.CharField(max_length=25)
    endDate=models.CharField(max_length=25) 
```

现在我想根据日期重叠查找特定人员的同事列表。我的意思是找出在特定人员工作的同时在这家公司工作的人。例如，我在公司工作`startDate=2012-01-01`- `endDate=2012-21-12`。另一个人在同一家公司工作`startDate=2012-08-01`-`endDate=2013-21-12`是我此时的同事。我发现[客户经理](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers)可能很有用，但我不知道如何在运行查询时找出重叠以及如何将`startDate`特定`endDate`人员传递给经理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:55:20.467

它们是重叠的 4 种情况和不重叠的 2 种情况：

```
......********.......   Source User
........****.........   Target User Overlaping
....*****............   Target User Overlaping
..........*******....   Target User Overlaping
....************.....   Target User Overlaping

......********.......   Source User
..**.................   Target User Not Overlaping
................**...   Target User Not Overlaping 
```

`taget_end_date < source_begin_date`或时不重叠`target_begin_date > source_end_date`。然后**重叠**在哪里：

```
NOT (taget_end_date < source_begin_date or target_begin_date > source_end_date ) 
```

即等于：

```
 not (taget_end_date < source_begin_date ) 
 and 
   not( target_begin_date > source_end_date ) 
```

那等于

```
 taget_end_date >= source_begin_date  and  target_begin_date <= source_end_date 
```

对于您的代码：

```
source = Company_Position_Person.objects.get( pk = 12 )
targets = Company_Position_Person.filter( startDate__lte = target.endDate ,
                                          endDate__gte = target.startDate ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:01:58.363

你可以试试这个查询：

```
person = Company_Position_Person.objects.get(pk=...)
persons = Company_Position_Person.objects.exclude(startDate__gt=person.endDate, endDate__lt=person.startDate,pk=person.pk) 
```

# hibernate - 如何在数据表中获取转换后的值

> ID：14002910
> 
> 赞同：1
> 
> 时间：2012-12-22T12:40:27.837
> 
> 标签：hibernate, jsf, primefaces

我正在使用 primefaces 3.4 和 JSF 2.0。我有 2 张桌子，一张是客户大师，另一张是案例大师。完成案例主条目后，将在案例主表中更新客户端 ID（案例主表中的外键）。我使用了与 primefaces 展示中给出的相同场景来自动完成。

用户只需输入一些字符，并根据该名称将被建议。用户选择其中一个，并在保存时只保存客户端 ID，以防 master。基本上我使用了转换器。

当用户添加案例条目时，它必须显示在数据表中。现在的问题是我必须显示客户端名称而不是客户端 ID。任何人都可以建议我如何在数据表中实现。

我试过以下

```
Created method in managed bean.   
value="#{caseUitility.clientName(case.id.clientID)}"
but failed. 
```

> 严重：无法初始化代理 - 没有会话
> 
> org.hibernate.LazyInitializationException：无法初始化代理 - 没有会话

任何人都可以建议我如何在数据表中实现。我应该为返回客户端名称的同一个客户端主服务器再创建一个转换器吗？还是别的什么？

我希望这对你们所有人来说都是非常愚蠢的事情，但我真的在这里堆积了一天半。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:08:48.577

你有一个[LazyInitializationException](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/LazyInitializationException.html)。您正在尝试访问未初始化的休眠生成代理。

通过急切地获取内容或使用[Hibernate.initialize(proxy)](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Hibernate.html#initialize%28java.lang.Object%29)在 Web 应用程序中访问它之前正确初始化代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:03:29.453

似乎没有从数据库中查询您要在您的方法中访问的一个`entity`或一个。您可以通过在方法中从数据库中重新查询对象或相关实体来克服此问题。 检查您并找到引发异常的行，然后您可以找到延迟加载的. 如果没有看到您的方法和引发异常的行， 很难说更多的话。`field``clientName()``client``clientName()`
`stacktrace``entity`
`clientName()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T22:02:37.680

以下是获取转换值的步骤，例如主题 ID 的主题名称：

1.  在托管 Bean 类中创建获取主题名称的方法

```
 public String getSubjectNameById(Integer subjectID)
    {
        String subjectName = getSubjectsService().getSubjectById(subjectID).getSubjectName();
        return subjectName;
    } 
```

2.从数据表列中的xhtml类调用方法，如下所示：

```
<p:column sortBy="#{QuestionsMB.subjectNameById}">
     <f:facet name="header">
         <h:outputText value="Subject :" />
     </f:facet>
     <h:outputText value="#{QuestionsMB.getSubjectNameById(question.subjectId)}" />
</p:column> 
```

我希望这有帮助 ：）

# windows-8 - 使用 select() 函数来识别 HTML 中的绑定模板

> ID：14002915
> 
> 赞同：2
> 
> 时间：2012-12-22T12:40:45.130
> 
> 标签：windows-8, winjs

我无法找到`select()`我所见过的用于识别 Windows 8 商店应用程序中的绑定模板的函数的任何文档，也无法找到在 WinJS`base.js`或`ui.js`文件中定义的函数。它看起来像一个普通的 CSS 选择器来识别`itemTemplate`：

```
<div id="listViewTemplate" data-win-control="WinJS.Binding.Template">
    <h1 data-win-bind="textContent: firstName"></h1>
</div>

<div id="listViewDiv" data-win-control="WinJS.UI.ListView"
    data-win-options="{itemTemplate: select('#listViewTemplate')}">   <==== HERE <====
</div> 
```

当通过它来识别绑定模板时`id`，该`select()`函数的使用似乎是可选的。但是，如果使用它的类名，`select()`似乎是必需的。

该功能在哪里`select()`记录或定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T02:42:41.963

它在`base.js`第 2712 行，并最终调用[querySelector](http://msdn.microsoft.com/en-us/library/cc288169%28v=VS.85%29.aspx)（或[querySelectorAll](http://msdn.microsoft.com/en-us/library/cc304115%28v=vs.85%29.aspx)）

如果您在`_evaluateObjectQueryExpression`in `base.js`（第 6154 行附近）放置一个断点并单步执行，您将了解如何解析该值。

# ruby - 创建新数据库时DataMapper SQLite错误

> ID：14002921
> 
> 赞同：5
> 
> 时间：2012-12-22T12:41:14.483
> 
> 标签：ruby, datamapper

我是 Sinatra 的新手，我正在尝试使用 SQLite3 和 Datamapper 创建一个数据库。我安装了 gems 和适配器，然后尝试在文件中执行此代码：

```
#config
require 'sinatra'
require 'sinatra/contrib' if development?
require 'data_mapper'

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/recall.db")  
DataMapper.finalize.auto_upgrade! 
```

当我执行文件时，命令行给了我这个错误：

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':126: The specified module could not be found.   - 
C:/Ruby193/lib/ruby/gems/1.9.1/gems/do_sqlite3-0.10.10-x86-mingw32/lib/do_sqlite3/1.9/do_sqlite3.so (LoadError) 
```

然后由于这些错误而出现了许多其他问题。我尝试重新安装许多 gem，但似乎没有任何效果。

编辑：完整的错误代码是这样的：

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':126: The specified module could not be found.   - C:/Ruby193/lib/ruby/gems/1.9.1/gems/do_sqlite3-0.10.10-x86-mingw32/lib/do_sqlite3/1.9/do_sqlite3.so (LoadError)
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/backports-2.6.5/lib/backports/tools.rb:314:in `require_with_backports'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/do_sqlite3-0.10.10-x86-mingw32/lib/do_sqlite3.rb:31:in `rescue in <top (required)>'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/do_sqlite3-0.10.10-x86-mingw32/lib/do_sqlite3.rb:26:in `<top (required)>'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/backports-2.6.5/lib/backports/tools.rb:314:in `require_with_backports'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-sqlite-adapter-1.2.0/lib/dm-sqlite-adapter/adapter.rb:1:in `<top (required)>'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/backports-2.6.5/lib/backports/tools.rb:314:in `require_with_backports'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-sqlite-adapter-1.2.0/lib/dm-sqlite-adapter.rb:1:in `<top (required)>'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/backports-2.6.5/lib/backports/tools.rb:314:in `require_with_backports'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:163:in `load_adapter'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:133:in `adapter_class'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:13:in `new'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core.rb:230:in `setup'
from test.rb:7:in `<main>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-26T11:55:06.947

我遇到了这个问题，在 Windows 上使用 ruby​​ 1.9.3 - 通过从[http://www.sqlite.org/download.html](http://www.sqlite.org/download.html)下载 sqlite3.dll并将其放入 C:\Ruby193\bin来修复它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T01:49:24.607

尝试添加：

```
require 'dm-sqlite-adapter' 
```

如果这不能解决问题，您也可以尝试更改

```
DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/recall.db") 
```

至

```
DataMapper.setup(:default, 'sqlite:recall.db') 
```

看看是否可以解决它。我真的不知道原因，但是执行上述操作（单引号，没有“3”，没有路径）修复了我在尝试特定设置时收到的错误。

# android - 擦除数据或重新格式化 NFC 标签

> ID：14002929
> 
> 赞同：1
> 
> 时间：2012-12-22T12:42:41.713
> 
> 标签：android, xamarin.android, nfc

有没有办法擦除数据或重新格式化 NFC 标签？我的标签数量有限，我希望能够重新格式化它们以进行测试。

我正在寻找[NXP Tag Writer](https://play.google.com/store/apps/details?id=com.nxp.nfc.tagwriter&hl=en)专业版中的 Clean 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:59:54.370

这取决于标签类型和内部芯片是否可行。格式化的类型 2 标记无法撤消（某些字节是一次写入的）。最终用户也不能取消格式化类型 3 标签。如果您知道必要的身份验证密钥，则可以取消格式化作为类型 4 标记的 DESFire 标记。MIFARE Classic 标签也是如此。我认为 Type 1 Tag 可以通过用零覆盖来取消格式化。ICODE 标签也是如此。

# android - 从 url 下载图像并将其实现到 android 中的列表视图

> ID：14002932
> 
> 赞同：1
> 
> 时间：2012-12-22T12:43:47.013
> 
> 标签：android, facebook, listview, android-asynctask, lazy-loading

我正在尝试从不同的 url 在列表视图中显示图像，我从 jsonarray 接收我的 url 和其他详细信息，我从图形 api 获取这些信息，我从中将我的数据解析到列表并在列表视图中显示详细信息但是那个 jsonobject 给了我图像文件的 url，我想我需要先下载并显示而不是通过延迟加载，我正在按照这个教程进行延迟加载-http: [//wptrafficanalyzer.in/blog/android-延迟加载图像和文本列表视图来自 http-json-data/](http://wptrafficanalyzer.in/blog/android-lazy-loading-images-and-text-in-listview-from-http-json-data/)。我在一个片段类中实现，并且在运行应用程序时它只是停止工作。我将非常感谢提供的任何帮助。

这是我的代码

```
Request request1 = new Request(session,"/fql",params,HttpMethod.GET,new Request.Callback()
            {
                public void onCompleted(Response response)
                {

                    int indexex=nthOccurrence(response.getGraphObject().toString(),'{',1);
                    int index=response.getGraphObject().toString().length()-1;
                    String edit=response.getGraphObject().toString().substring(indexex, index);
                    try
                    {
                        JSONObject json = Util.parseJson(edit);
                        JSONArray data = json.getJSONArray( "data" );
                        JSONObject getVideo = data.getJSONObject(2);
                        String s="{data:"+getVideo.getString("fql_result_set")+"}";
                        JSONObject json1 = Util.parseJson(s);
                        JSONArray data1 = json1.getJSONArray("data");
                        ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();
                        listViewLoaderTask.execute(data1);
}
                    catch(Exception e){
                        userNameView.setText(e.toString());
                    }   
                }                  
            });
            Request.executeBatchAsync(request1); 

private class DisplayDetails extends AsyncTask<Session, Void, JSONArray>
    {
        Session session;
        Request request1;
        @Override
        protected JSONArray doInBackground(Session...sessions) 
        {
            session=sessions[0];
            Request request = Request.newMeRequest(session, new Request.GraphUserCallback() 
            {
                @Override
                public void onCompleted(GraphUser user, Response response) 
                {
                  if (user != null) 
                  {
                      profilePictureView.setProfileId(user.getId());
                      // Set the Textview's text to the user's name
                      userNameView.setText(user.getName());
                  }
                }
              });
            Request.executeBatchAsync(request);
            String fqlQuery = "{'myVideos':'SELECT vid, src, owner, title, description,thumbnail_link, created_time FROM video WHERE owner=me()'," +
                    "'friends':'SELECT uid2 FROM friend WHERE uid1 = me()',"+
                    "'friendsVideo':'SELECT vid, src, owner, title, description,thumbnail_link, created_time FROM video WHERE owner IN "+
                    "(SELECT uid2 FROM #friends) ORDER BY created_time',}";

            Bundle params = new Bundle();

            params.putString("q", fqlQuery);

            Session session1 = Session.getActiveSession();
            request1 = new Request(session,"/fql",params,HttpMethod.GET,new Request.Callback()
            {
                public void onCompleted(Response response)
                {

                    int indexex=nthOccurrence(response.getGraphObject().toString(),'{',1);
                    int index=response.getGraphObject().toString().length()-1;
                    String edit=response.getGraphObject().toString().substring(indexex, index);
                    try
                    {
                        JSONObject json = Util.parseJson(edit);
                        JSONArray data = json.getJSONArray( "data" );
                        String fbGraph;
                        JSONObject getVideo = data.getJSONObject(2);
                        String s="{data:"+getVideo.getString("fql_result_set")+"}";
                        JSONObject json1 = Util.parseJson(s);
                        data1 = json1.getJSONArray("data");
                    }
                    catch(Exception e){}

                }
            });
            return data1;
        }

        @Override
        protected void onPostExecute(JSONArray data1) 
        {
            ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();
            listViewLoaderTask.execute(data1);
            Request.executeBatchAsync(request1);
        }

    }

    private class ListViewLoaderTask extends AsyncTask<JSONArray, Void, SimpleAdapter>
    {

        JSONObject getVidDetails;
        // Doing the parsing of xml data in a non-ui thread
        @Override
        protected SimpleAdapter doInBackground(JSONArray... data) 
        {
            HashMap<String, Object> hm = new HashMap<String,Object>();
            List<HashMap<String, Object>> videoDetails = null;
            userNameView.setText("dsrf");
            try{
                for ( int i = 0, size = data1.length(); i < size; i++ )
                {                   
                    getVidDetails=data[0].getJSONObject(i);
                    hm.put("title", "Title : " + getVidDetails.getString("title") );
                    DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
                    hm.put("creationDate","Created On : " + formatter.format(Long.valueOf(getVidDetails.getString("created_time")).longValue()*1000));
                    hm.put("videoThumbnail", R.drawable.blank);
                    hm.put("thumbnail_path",getVidDetails.getString("thumbnail_link"));
                    hm.put("owner","Owner : " +getVidDetails.getString("owner") );
                    videoDetails.add(hm);
                }

            }catch(Exception e){
                Log.d("JSON Exception1",e.toString());
            }

            String[] itemControl = {"videoThumbnail","title","creationDate","owner"};
            int[] itemLayout={R.id.videoThumb,R.id.title,R.id.creationDate,R.id.owner};
            SimpleAdapter adapter = new SimpleAdapter(getActivity().getBaseContext(), videoDetails, R.layout.listvideos_layout, itemControl, itemLayout);

            return adapter;
        }

        *//** Invoked by the Android on "doInBackground" is executed *//*
        @Override
        protected void onPostExecute(SimpleAdapter adapter) 
        {

            // Setting adapter for the listview
            listView.setAdapter(adapter);

            for(int i=0;i<adapter.getCount();i++){
                HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
                String imgUrl = (String) hm.get("thumbnail_path");
                ImageLoaderTask imageLoaderTask = new ImageLoaderTask();

                HashMap<String, Object> hmDownload = new HashMap<String, Object>();
                hm.put("thumbnail_path",imgUrl);
                hm.put("position", i);

                // Starting ImageLoaderTask to download and populate image in the listview
                imageLoaderTask.execute(hm);
            }
        }
    }

    *//** AsyncTask to download and load an image in ListView *//*
    private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

        @Override
        protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

            InputStream iStream=null;
            String imgUrl = (String) hm[0].get("thumbnail_path");
            int position = (Integer) hm[0].get("position");

            URL url;
            try {
                url = new URL(imgUrl);

                // Creating an http connection to communicate with url
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                // Connecting to url
                urlConnection.connect();

                // Reading data from url
                iStream = urlConnection.getInputStream();

                // Getting Caching directory
                File cacheDirectory = getActivity().getBaseContext().getCacheDir();

                // Temporary file to store the downloaded image
                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+position+".jpg");

                // The FileOutputStream to the temporary file
                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                // Creating a bitmap from the downloaded inputstream
                Bitmap b = BitmapFactory.decodeStream(iStream);

                // Writing the bitmap to the temporary file as jpg file
                b.compress(Bitmap.CompressFormat.JPEG,100, fOutStream);

                // Flush the FileOutputStream
                fOutStream.flush();

               //Close the FileOutputStream
               fOutStream.close();

                // Create a hashmap object to store image path and its position in the listview
                HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

                // Storing the path to the temporary image file
                hmBitmap.put("videoThumbnail",tmpFile.getPath());

                // Storing the position of the image in the listview
                hmBitmap.put("position",position);

                // Returning the HashMap object containing the image path and position
                return hmBitmap;

            }catch (Exception e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(HashMap<String, Object> result) {
            // Getting the path to the downloaded image
            String path = (String) result.get("videoThumbnail");

            // Getting the position of the downloaded image
            int position = (Integer) result.get("position");

            // Getting adapter of the listview
            SimpleAdapter adapter = (SimpleAdapter ) listView.getAdapter();

            // Getting the hashmap object at the specified position of the listview
            HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(position);

            // Overwriting the existing path in the adapter
            hm.put("videoThumbnail",path);

            // Noticing listview about the dataset changes
            adapter.notifyDataSetChanged();
        }
    } 
```

我还添加了我的应用程序的日志 cat 文件-

```
12-22 16:08:41.371: W/dalvikvm(625): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
12-22 16:08:42.120: E/AndroidRuntime(625): FATAL EXCEPTION: AsyncTask #1
12-22 16:08:42.120: E/AndroidRuntime(625): java.lang.RuntimeException: An error occured while executing doInBackground()
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.lang.Thread.run(Thread.java:856)
12-22 16:08:42.120: E/AndroidRuntime(625): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:709)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.View.requestLayout(View.java:12675)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.View.requestLayout(View.java:12675)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.View.requestLayout(View.java:12675)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.View.requestLayout(View.java:12675)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.View.requestLayout(View.java:12675)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.View.requestLayout(View.java:12675)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:268)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.view.View.requestLayout(View.java:12675)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.widget.TextView.checkForRelayout(TextView.java:6773)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.widget.TextView.setText(TextView.java:3306)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.widget.TextView.setText(TextView.java:3162)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.widget.TextView.setText(TextView.java:3137)
12-22 16:08:42.120: E/AndroidRuntime(625):  at com.socialsober.LogFragment$ListViewLoaderTask.doInBackground(LogFragment.java:267)
12-22 16:08:42.120: E/AndroidRuntime(625):  at com.socialsober.LogFragment$ListViewLoaderTask.doInBackground(LogFragment.java:1)
12-22 16:08:42.120: E/AndroidRuntime(625):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-22 16:08:42.120: E/AndroidRuntime(625):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-22 16:08:42.120: E/AndroidRuntime(625):  ... 5 more
12-22 16:08:43.341: W/ActivityManager(77):   Force finishing activity com.socialsober/.MainActivity
12-22 16:08:43.341: W/WindowManager(77): Failure taking screenshot for (180x300) to layer 21010
12-22 16:08:43.861: W/ActivityManager(77): Activity pause timeout for ActivityRecord{416f0a08 com.socialsober/.MainActivity} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:39:42.793

尝试[在 ListView 中检查这个 Lazy load of images](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

这是最好的示例/教程[http://android-developers.blogspot.com.br/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com.br/2010/07/multithreading-for-performance.html)

我希望它有所帮助。

# joomla - 模态窗口中的Joomla 1.5系统消息？

> ID：14002941
> 
> 赞同：2
> 
> 时间：2012-12-22T12:44:35.080
> 
> 标签：joomla, joomla1.5

我已经建立了一个链接，它将 Joomla 的注册编辑表单提供给一个模态窗口。一切都很好，但是当用户单击保存按钮时，将整个主页加载到模式窗口中，并显示一条消息，说明所有内容都已保存。我怎样才能让它只将系统消息加载到模式窗口而不是整个主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:51:18.027

在调用模板之前在控制器中设置 tmpl=component & format=raw。您的系统消息 div 应该在要显示的组件内。

# google-drive-api - 访问未配置的谷歌驱动 API

> ID：14002942
> 
> 赞同：1
> 
> 时间：2012-12-22T12:44:38.153
> 
> 标签：google-drive-api

当我访问谷歌驱动器 uri [https://www.googleapis.com/drive/v2/files/1obpi0bmSDILX1cIQcVRNi1lUkm2K5xBFztmRFiM?fields=lastModifyingUserName%2CmodifiedDate%2CownerNames%2CselfLink&key=](https://www.googleapis.com/drive/v2/files/1obpi0bmSDILX1cIQcVRNi1lUkm2K5xBFztmRFiM?fields=lastModifyingUserName%2CmodifiedDate%2CownerNames%2CselfLink&key=) {YOUR_API_KEY}

[我在我的服务https://code.google.com/apis/console](https://code.google.com/apis/console)中同时拥有 Drive SDK、Drive API

但仍然得到：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

就好像我通过[https://developers.google.com/drive/v2/reference/files/get#try-it](https://developers.google.com/drive/v2/reference/files/get#try-it)运行它一样工作正常！

我如何正确返回json？

```
{
 "selfLink": "https://www.googleapis.com/drive/v2/files/1obpi0bmSDILX1cIQcVRNi1lUkm2K5xBFztmRFiM",
 "modifiedDate": "2012-12-13T20:41:07.602Z",
 "ownerNames": [
  "Norman"
 ],
 "lastModifyingUserName": "Norman"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:49:33.863

我使用的是旧的 api 密钥，现在可以了！

# d - D 中的显式 simd 代码

> ID：14002946
> 
> 赞同：3
> 
> 时间：2012-12-22T12:45:10.560
> 
> 标签：d, simd, avx

现在是否可以在开箱即用的 D 中做到这一点？如果有帮助，我正在使用 LDC2 编译器。我对使用 AVX 内在函数很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T22:24:37.353

有内联 ASM。我认为 DMD 支持 SIMD 指令。不知道 LDC 的故事是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T00:40:46.393

目前 DMD 没有 AVX 内在函数。考虑到所有 D 编译器都使用 DMD 前端，以及 druntime 和 phobos，我想说做你想做的唯一方法是使用 BCS 建议的内联汇编。

我建议您不时检查该`core.simd`模块，看看是否添加了 AVX 内在函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-29T18:08:22.303

使用 LDC，模块`ldc.gccbuiltins_x86`包含 GCC 样式的内置函数，例如`__builtin_ia32_vfnmaddps256`.

（还有`ldc.gccbuiltins_arm`, 和`ldc.gccbuiltins_ppc`, ...）

# nosql - HBase 中的 SQL LIMIT 等命令

> ID：14002948
> 
> 赞同：57
> 
> 时间：2012-12-22T12:45:19.993
> 
> 标签：nosql, hbase

HBase 有没有类似`SQL LIMIT`查询的命令？

我可以通过`setStart`and来做到这一点`setEnd`，但我不想迭代所有行。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-22T13:05:33.113

在 HBase shell 中，您可以使用 LIMIT：

```
hbase> scan 'test-table', {'LIMIT' => 5} 
```

在 Java API 中，您可以使用`Scan.setMaxResultSize(N)`或`scan.setMaxResultsPerColumnFamily(N)`.

*   [HBase API 文档 - Scan.setMaxResultSize](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Scan.html#setMaxResultSize%28long%29)
*   [HBase API 文档 - Scan.setMaxResultsPerColumnFamily](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Scan.html#setMaxResultsPerColumnFamily%28int%29)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-20T08:18:57.530

有一个名为 PageFilter 的过滤器。它的意思是为了这个目的。

```
Scan scan = new Scan(Bytes.toBytes("smith-"));
scan.addColumn(Bytes.toBytes("personal"), Bytes.toBytes("givenName"));
scan.addColumn(Bytes.toBytes("contactinfo"), Bytes.toBytes("email"));
scan.setFilter(new PageFilter(25));
ResultScanner scanner = table.getScanner(scan);
for (Result result : scanner) {
    // ...
} 
```

[http://java.dzone.com/articles/handling-big-data-hbase-part-4](http://java.dzone.com/articles/handling-big-data-hbase-part-4)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-27T21:22:40.887

如果使用 HBase Shell，可以使用以下命令限制查询结果：“LIMIT”必须用单引号括起来。

```
scan 'table-name', {'LIMIT' => 10} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-24T21:46:20.917

一种有保证的方法是在迭代器循环内对客户端进行限制。这是在 HBase Ruby Shell 中采用的方法。从 table.rb ($HBASE_HOME/hbase-shell/src/main/ruby/hbase/table.rb)：第 467 行：

```
 # Start the scanner
  scanner = @table.getScanner(_hash_to_scan(args))
  iter = scanner.iterator

  # Iterate results
  while iter.hasNext
    if limit > 0 && count >= limit
      break
    end

    row = iter.next
    ...
 end 
```

通过添加 scan.setFilter(new PageFilter(limit)) 和 scan.setCaching(limit)，然后添加 table.getScanner(scan)，可以提高效率。页面过滤器将确保每个区域服务器最多返回limit行，扫描缓存限制将确保每个区域服务器将提前读取并缓存最多'limit'行，然后客户端循环限制检查可以在之后打破循环按客户端收到的顺序获取第一个“限制”行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-14T08:42:24.710

在 HBase 1.2 中，`Scan.setMaxResultSize(N)`可能不作为行数限制的参数。maxResultSize 限制以字节为单位的最大结果大小（缓存在客户端）。我发现`ResultScanner.next(int nbRows)`可以在迭代期间限制行数。

# c - C 编程：如何将整个文件内容读入缓冲区

> ID：14002954
> 
> 赞同：98
> 
> 时间：2012-12-22T12:45:49.933
> 
> 标签：c, file-io

我想将文件的全部内容写入缓冲区。该文件实际上只包含一个字符串，我需要将其与字符串进行比较。

什么是最有效的选择，即使在 linux 上也是可移植的。

环境：窗户

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-12-22T12:51:41.427

Linux 和 Windows 之间的可移植性是一个令人头疼的问题，因为 Linux 是一个符合 POSIX 的系统，通常具有适用于 C 的适当、高质量的工具链，而 Windows 甚至没有在 C 标准库中提供很多功能。

但是，如果你想坚持标准，你可以这样写：

```
#include <stdio.h>
#include <stdlib.h>

FILE *f = fopen("textfile.txt", "rb");
fseek(f, 0, SEEK_END);
long fsize = ftell(f);
fseek(f, 0, SEEK_SET);  /* same as rewind(f); */

char *string = malloc(fsize + 1);
fread(string, fsize, 1, f);
fclose(f);

string[fsize] = 0; 
```

这里`string`将包含文本文件的内容作为正确的以 0 结尾的 C 字符串。此代码只是标准 C，它不是 POSIX 特定的（尽管它不能保证它可以在 Windows 上工作/编译......）

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-07-03T23:22:24.290

这是我推荐的。

它应该符合 C89，并且是完全可移植的。特别是，它也适用于 POSIXy 系统上的管道和套接字。

这个想法是我们以大块（`READALL_CHUNK`）读取输入，根据需要动态重新分配缓冲区。我们只使用`realloc()`, `fread()`,`ferror()`和`free()`:

```
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>

/* Size of each input chunk to be
   read and allocate for. */
#ifndef  READALL_CHUNK
#define  READALL_CHUNK  262144
#endif

#define  READALL_OK          0  /* Success */
#define  READALL_INVALID    -1  /* Invalid parameters */
#define  READALL_ERROR      -2  /* Stream error */
#define  READALL_TOOMUCH    -3  /* Too much input */
#define  READALL_NOMEM      -4  /* Out of memory */

/* This function returns one of the READALL_ constants above.
   If the return value is zero == READALL_OK, then:
     (*dataptr) points to a dynamically allocated buffer, with
     (*sizeptr) chars read from the file.
     The buffer is allocated for one extra char, which is NUL,
     and automatically appended after the data.
   Initial values of (*dataptr) and (*sizeptr) are ignored.
*/
int readall(FILE *in, char **dataptr, size_t *sizeptr)
{
    char  *data = NULL, *temp;
    size_t size = 0;
    size_t used = 0;
    size_t n;

    /* None of the parameters can be NULL. */
    if (in == NULL || dataptr == NULL || sizeptr == NULL)
        return READALL_INVALID;

    /* A read error already occurred? */
    if (ferror(in))
        return READALL_ERROR;

    while (1) {

        if (used + READALL_CHUNK + 1 > size) {
            size = used + READALL_CHUNK + 1;

            /* Overflow check. Some ANSI C compilers
               may optimize this away, though. */
            if (size <= used) {
                free(data);
                return READALL_TOOMUCH;
            }

            temp = realloc(data, size);
            if (temp == NULL) {
                free(data);
                return READALL_NOMEM;
            }
            data = temp;
        }

        n = fread(data + used, 1, READALL_CHUNK, in);
        if (n == 0)
            break;

        used += n;
    }

    if (ferror(in)) {
        free(data);
        return READALL_ERROR;
    }

    temp = realloc(data, used + 1);
    if (temp == NULL) {
        free(data);
        return READALL_NOMEM;
    }
    data = temp;
    data[used] = '\0';

    *dataptr = data;
    *sizeptr = used;

    return READALL_OK;
} 
```

上面，我使用了一个恒定的块大小，`READALL_CHUNK`== 262144 ( `256*1024`)。这意味着在最坏的情况下，最多有 262145 个字符被浪费（已分配但未使用），但只是暂时的。最后，该函数将缓冲区重新分配到最佳大小。此外，这意味着我们每读取一兆字节的数据进行四次重新分配。

上面代码中默认的 262144 字节是一个保守值；它甚至适用于旧的小型笔记本电脑和 Raspberry Pi 以及大多数具有至少几兆字节 RAM 可用于该过程的嵌入式设备。然而，它并没有小到会减慢大多数系统上的操作（由于许多读取调用和许多缓冲区重新分配）。

对于此时（2017 年）的台式机，我建议使用更大的`READALL_CHUNK`，也许是`#define READALL_CHUNK 2097152`（2 MiB）。

因为 的定义`READALL_CHUNK`是受保护的（即，仅当它在代码中仍未定义的那一点时才定义），您可以在编译时使用（在大多数 C 编译器中）`-DREADALL_CHUNK=2097152`命令行选项覆盖默认值 --但请检查您的编译器选项以使用命令行选项定义预处理器宏。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-22T12:50:08.690

便携式解决方案可以使用`getc`.

```
#include <stdio.h>

char buffer[MAX_FILE_SIZE];
size_t i;

for (i = 0; i < MAX_FILE_SIZE; ++i)
{
    int c = getc(fp);

    if (c == EOF)
    {
        buffer[i] = 0x00;
        break;
    }

    buffer[i] = c;
} 
```

如果您不想拥有`MAX_FILE_SIZE`宏或者它是一个大数字（这样`buffer`会太大而无法放入堆栈），请使用动态分配。

# sql-server - 如何创建互斥表列

> ID：14002957
> 
> 赞同：12
> 
> 时间：2012-12-22T12:46:05.247
> 
> 标签：sql-server, tsql, sql-server-2012, mutual-exclusion

我有一个表 Transactions ，其中我为一笔交易保存两条记录，一条用于借记和其他贷记。

`creditAmount(Money)`所以我在 table和中有两列`debitAmount(Money)`。

我想要一个表级约束，即每行中的任一列都不为空。即，如果第 3`creditAmount`行为空，则`debitAmount`必须保存一些值，反之亦然。

连续插入记录时如何确保相同？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-22T12:50:51.070

您可以向表中添加[CHECK 约束](http://msdn.microsoft.com/en-us/library/ms179491%28v=sql.105%29.aspx)：

```
ALTER TABLE Transactions ADD CONSTRAINT CK_Transactions_DebitOrCreditExists
CHECK ((creditAmount IS NULL AND debitAmount IS NOT NULL) 
   OR (creditAmount IS NOT NULL AND debitAmount IS NULL)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:10:38.380

如果您通过前端（您的应用程序）进行处理，则不会出现 Credit 和 Debit 都为空的问题。至少插入一个条目，在借方或贷方中。

我想当有人通过后端处理并直接在表中插入值时，你想设置一个约束。在这种情况下，克里斯提出了一个解决方案。

但是，即使您是从后端插入，我也不会理解为什么我会在既不是借方也不是贷方的情况下记录交易。

# javascript - 设备方向 - Phonegap

> ID：14002961
> 
> 赞同：2
> 
> 时间：2012-12-22T12:46:55.107
> 
> 标签：javascript, jquery, html, cordova, device-orientation

我有一个关于获取设备的从左到右倾斜和从前到后倾斜的问题。

我使用以下公式通过将从加速度计获得的值转换为度数来获得以度为单位的倾斜角：

`var tiltLR = Math.round(((acceleration.x) / 9.81) * -90);
var tiltFB = Math.round(((acceleration.y + 9.81) / 9.81) * 90 * facingUp);`

![在此处输入图像描述](../Images/d6204f71b40d80268b5bc1253fba2586.png)

当手机处于纵向模式时，上述内容适用。但是，当手机处于横向模式时，我有一个似乎无法理解的问题。

想象一下手机被旋转，如下图所示： ![在此处输入图像描述](../Images/a1768cfc0a80a678d8a2896a91948c98.png)

我猜测轴会相应地改变，所以如果在纵向模式下，x 轴是移动设备的左右，y 轴显示移动设备离你有多近/多远，这些将变为：

x：上/下 y：左/右 z：近/远

所以，横屏模式下的变量改成这样有意义吗？或者我没有正确可视化？

`var tiltLR = Math.round(((acceleration.y) / 9.81) * -90);
var tiltFB = Math.round(((acceleration.z + 9.81) / 9.81) * 90 * facingUp);`

**编辑** 或者它应该如下？
`var tiltLR = Math.round(((acceleration.y) / 9.81) * -90);
var tiltFB = Math.round(((acceleration.x + 9.81) / 9.81) * 90 * facingUp);`

# java - Android：如何从另一个网格视图的 set-on-item-click 侦听器函数中通过其位置获取网格视图项标记？

> ID：14002964
> 
> 赞同：1
> 
> 时间：2012-12-22T11:53:03.683
> 
> 标签：java, android

如何`grid-view`通过它的位置获取一个项目标签，并且必须从另一个`grid-view`项目点击监听器函数中获取。

```
gridview2.setOnItemClickListener(new OnItemClickListener() 
{
    public void onItemClick(AdapterView<?> parent, View v,
                            int position, long id) 
    {
        int i=(Integer)gridview1.getChildAt(gridview1s_position).getTag();---> it is returning Null     
    }  
}); 
```

MY`gridview1.setOnitemClicklistener`和`gridview2.setonitemclicklistener`在同一个文件中 ( `MainActivity.java`)

但是`gridview1`适配器是一个`ImageAdapter.java`（这是用于设置gridview1中的图像）和`gridview2`适配器是`imageadapter2.java`（这是用于设置黑色图像，以便`gridview2`看起来像一个带有行和列的框，否则它显示为粗线，因为我们没有'不要在gridview中放任何东西）

```
gridview1.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, View v,int position, long id) 
        {  
            int tag=(Integer)gridview1.getChildAt(position).getTag();//this returning the tag
        }
     }); 
```

ImageAdapter1.java

```
 public View getView(int arg0, View arg1, ViewGroup arg2) {
    // TODO Auto-generated method stub

    if(arg1!=null)
    {
        imv=(ImageView)arg1;
    }
    else
    {
        imv=new ImageView(cont);
        imv.setLayoutParams(new GridView.LayoutParams(40,40));
        imv.setScaleType(ScaleType.CENTER_CROP);
        imv.setPadding(0,0,0,0);

    }
    imv.setImageResource(imageid[arg0]);//imageid aray is having drawable images
    imv.setTag(imageid[arg0]);
    return imv;

} 
```

网格视图2

```
gridview2.setOnItemClickListener(new OnItemClickListener() 
    { 
      ImageAdapter ia=new ImageAdapter(getApplicationContext());
public void onItemClick(AdapterView<?> parent, View v,int position, long id) 
         {  
                ImageView imv;
                  if(v!=null)
            {
                imv=(ImageView)v;
            }
            else
            {
                imv=new ImageView(getApplicationContext());
                imv.setLayoutParams(new GridView.LayoutParams(40,40));
                imv.setScaleType(ScaleType.CENTER_CROP);
                imv.setPadding(0,0,0,0);
                imv.setBackgroundColor(5555);

            }

                  imv.setImageResource(ia.imageid[tt]); 
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:41:40.380

using`getChildAt`对于这样的事情可能太麻烦了，因为它仅用于引用视图中的视图并重新排序其索引以匹配它。我不知道你的其他人在哪里`GridView`进一步追求这条道路。

但无论如何，我会做这样的事情的方式是在两个适配器之间建立一个中间集合。就像在一个适配器中将所有标签保存在索引集合中一样，然后您可以制作某种阅读器`get`方法。至少，这种做法会让我放心。

```
gridview2.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        int i = gridview1.getTagFromPosition(position);

    }  
}); 
```

然后在`gridView1`适配器中类似于：

```
private int[] tagCollection;

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // .....
    convertView.setTag(tagCollection[position]);
    return convertView;
}

public int getTagFromPosition(int position) {
    return tagCollection[position];
} 
```

我至少希望这个想法能够被理解，以便您可以修改它，但是对于如何修改和访问您的对象是实用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:40:05.987

最后我自己得到了我的问题的解决方案。感谢所有提出宝贵建议的人。

我将grid-view1的特定单元格的标签保存在一个变量中，并在grid-view2中使用了该变量。

# java - Java名字冲突，有相同的擦除，不隐藏对方

> ID：14002965
> 
> 赞同：18
> 
> 时间：2012-12-22T12:47:45.240
> 
> 标签：java, generics, name-clash

我收到此名称冲突错误，我不知道应该如何解决这个问题。我有两个类，我正在使用重载方法“createSensors”。为了简化这里是产生问题的代码：

```
public abstract class ClassA {
    public static List<Sensor> createSensors(Collection<? extends ClassA> list) {
        List<Sensor> sensors = new ArrayList<Sensor>();
        for (ClassA s : list) {
           sensors.add(s.getSensor());
        }
        return sensors;
    }
}

public abstract class ClassB extends ClassA {
    public static List<Sensor> createSensors(Collection<? extends ClassB> list) {
        List<Sensor> sensors = new ArrayList<Sensor>();
        for (ClassB s : list) {
           sensors.add(s.getSensor());
        }
        return sensors;
   }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-26T17:09:25.163

## 一般回答：

除了这里实现相同的问题外，问题的核心是，有点野蛮，“方法A和方法B具有相同的擦除”。

使它成为一个复杂问题的原因是，我们通常（至少我今天早上没有）对“类型擦除”了解很多。

简而言之：

> 参数类型在编译时执行类型检查（以确保类型正确性）但在运行时忘记它们的类型参数（以避免生成底层方法）。

这听起来既简单又令人费解。了解它的最佳方法是参考以下文献：

1.  [什么是可具体化类型？](http://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html#non-reifiable-types)
2.  [如何以及在什么条件下执行擦除？](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html)
3.  [您对我的编码生活可能意味着什么有任何想法/示例吗？](http://en.wikipedia.org/wiki/Generics_in_Java#Problems_with_type_erasure)
4.  [嗯，这很奇怪，我不太喜欢它，但我很好奇他们为什么这样做......](http://gafter.blogspot.fr/2006/11/reified-generics-for-java.html)

希望这对你有帮助，就像它对我有帮助一样。

## 具体答案：

在你的情况下

```
public abstract class ClassA {
    public static List<Sensor> createSensors(Collection<? extends ClassA> list) {
        //do stuff
    }
}

public abstract class ClassB extends ClassA {
    public static List<Sensor> createSensors(Collection<? extends ClassB> list) {
        //do other stuff
   }
} 
```

将被javac“转换”为

```
public abstract class ClassA {
    public static List createSensors(Collection list) {
        //do stuff
    }
}

public abstract class ClassB extends ClassA {
    public static List createSensors(Collection list) {
        //do other stuff
   }
} 
```

其中一个显然不能覆盖另一个（不是相同的类型参数），但最终在运行时完全相同（您的程序无法选择使用哪一个）。

这个问题够了，怎么解决？您可以继续使用以下方法之一：

*   使用不同的名称：这种方法是最明显的`createASensors`，`createBSensors` 但看起来不太优雅。

*   添加一个参数：`createSensors(Collection<? extends ClassA> list, ClassA typeDefiner)` 这种方法看起来很野蛮，但不太优雅，但它是`java.util.List`用于该方法的方法`<T> T[] toArray(T[] a)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T13:42:47.640

一般的解决方案是使用不同的名称。这些方法可以在没有继承关系的类中，因为它们不是实例方法。

正如所指出的，问题中的方法实现是相同的（错字除外）。

（重载的这个问题经常与运行时类型的擦除混淆。重载是链接时问题而不是动态问题，因此可以很容易地在语言中修复。这不是一个特别有用的更改，也不是鼓励的好主意超载。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-11-05T09:35:39.720

检查项目的项目设置和编译器版本。右键单击项目 --> 属性 --> Java 编译器。确保合规性设置是最新的。当合规性设置设置为 1.4 而不是 1.6 时，我遇到了这个问题

# java - JSON 解析为 ArrayList

> ID：14002973
> 
> 赞同：0
> 
> 时间：2012-12-22T12:48:23.913
> 
> 标签：java, arraylist

我正在寻找方法。

我正在解析 JSON，它以形式返回数据

```
UserA  PhotoURL1  
UserA  PhotoURL2
UserB  PhotoURL3
UserA  PhotoURL4
UserB  PhotoURL5
UserA  PhotoURL6 
```

我需要将它存储在我的自定义数组列表中

```
String name,
List<Photo> photos 
```

所以结果应该是

```
UserA   Photo1 
        Photo2
        Photo4
        Photo6

UserB   Photo3
        Photo5 
```

我应该采取什么方法？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:57:51.063

从给定数据填充地图（如@Kent 建议的那样）通常使用如下方式完成：

```
Map<String, List<Photo>> result = new HashMap<String, List<Photo>>();

while(data.hasMoreData()) {

  String name = data.getName();
  String photo = data.getPhoto();

  List<Photo> photos = result.get(name);
  if (photos == null) {
    photos = new ArrayList<Photo>();
    result.put(name, photos);
  }
  photos.add(photo);

}

System.out.println(result); 
```

无论如何，我们都需要了解原始数据是如何格式化为 json 的。

# android - android，从 SD 卡的 xml 文件中读取值

> ID：14002974
> 
> 赞同：1
> 
> 时间：2012-12-22T12:48:22.913
> 
> 标签：android, xml, parsing

helo，我想从这个文件中读取值：[http](http://www.nbp.pl/kursy/xml/lastC.xml) ://www.nbp.pl/kursy/xml/lastC.xml并用它们填充网格。我的应用程序会在每次运行时下载此文件并将其保存在 SDCard 上。我的问题是我的代码读取了空值。这里是：

```
 @Override
 protected void onCreate(Bundle savedInstanceState) {

 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     grid= (GridView)findViewById(R.id.grid);

    try{    
           url = new URL("http://www.nbp.pl/kursy/xml/LastC.xml");

            HttpURLConnection    connection = (HttpURLConnection)url.openConnection();

            connection.setRequestMethod("GET");

            connection.setDoOutput(true);
            connection.connect();

           File dir = new File (android.os.Environment.getExternalStorageDirectory().getAbsolutePath() + "/Kursy Walut");
               if(dir.exists()==false) 
                    dir.mkdirs();

            File file = new File(dir, "kursywalut.xml");

       FileOutputStream fileoutput = new FileOutputStream(file);

         InputStream  inputstream = connection.getInputStream();

            int tempSize=0;

            byte[] buffer = new byte[1024];

            while((tempSize = inputstream.read(buffer))>0)
            {

                fileoutput.write(buffer, 0, tempSize);

            }

 fileoutput.close(); 
```

将文件保存在我的 sdCard 上，然后用信息祝酒

```
 Toast.makeText(MainActivity.this, "pobrano do Kursy Walut/kursywalut.xml!!", Toast.LENGTH_SHORT).show();

    //here i have a array of string witch i will parse into my grid

    String[] items=new String[13];

     InputStream in = new FileInputStream(file.getPath());

     DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

  Document doc = builder.parse(in);
  NodeList words = doc.getElementsByTagName("pozycja");

  for(int i=0; i<words.getLength(); i++)
  {
      items[i]= ((Element)words.item(i)).getAttribute("kod_waluty");

  }

  //i setText on some textView to check that i read xmlfile correctly. 

   text.setText("value: "+items[5]);
      in.close();

      grid.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, items));
}
catch(Throwable t){Toast.makeText(this, t.toString(), Toast.LENGTH_LONG).show();}

} 
```

在这段代码之后，我的 TextView 文本只是“值：”，没有来自 xml 的值，我的网格是空的。我假设我在读取 xml 文件时犯了错误。如果有人能看到这个并帮助我解决它，我会非常高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:04:13.193

请使用以下代码使用 Dom Parser 从 SDCard 解析 XML 文件，它将解决您的问题。

MainActivity.java:-

```
public class MainActivity extends Activity {

    ArrayList<String> mImageLink;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try {
            mImageLink = new ArrayList<String>();

            File file = new File("mnt/sdcard/kursywalut.xml");
            InputStream is = new FileInputStream(file.getPath());
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(is));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("image");

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);

                Element fstElmnt = (Element) node;

                mImageLink.add(fstElmnt.getAttribute("link"));

            }
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }
    }
} 
```

# ejb-3.1 - OpenEJB 4.5.1：NameNotFoundException

> ID：14002982
> 
> 赞同：1
> 
> 时间：2012-12-22T12:50:40.257
> 
> 标签：ejb-3.1, openejb, initial-context

这是我第一次使用 OpenEJB 容器系统。当我使用 InitialContext 的锁定方法时，我得到一个 NameNotFoundException。我已经阅读了很多示例和教程，在每个示例中，查找方法如下所示：

```
initialContext.lookup("NameOfBean"); 
```

现在我找到了另一种解决方案，它使用类似以下代码片段的查找，它也适用于我。

```
initialContext.lookup("java:global/classpath.ear/ProjectName/NameofBean"); 
```

问题是为什么第一个版本对我不起作用以及我做错了什么？

OpenEJB 日志摘录：

```
INFO - ********************************************************************************
INFO - OpenEJB http://openejb.apache.org/
INFO - Startup: Sat Dec 22 13:17:59 CET 2012
INFO - Copyright 1999-2012 (C) Apache OpenEJB Project, All Rights Reserved.
INFO - Version: 4.5.1
INFO - Build date: 20121209
INFO - Build time: 08:47
INFO - ********************************************************************************
INFO - openejb.home = D:\workspace\ProjectName
INFO - openejb.base = D:\workspace\ProjectName
INFO - Succeeded in installing singleton service
INFO - Cannot find the configuration file [conf/openejb.xml].  Will attempt to create  one for the beans deployed.
INFO - Configuring Service(id=Default Security Service, type=SecurityService, provider-id=Default Security Service)
INFO - Configuring Service(id=Default Transaction Manager, type=TransactionManager, provider-id=Default Transaction Manager)
INFO - Using 'openejb.deployments.classpath.include=.*'
INFO - Found EjbModule in classpath: D:\workspace\ProjectName\build\classes
INFO - Searched 17 classpath urls in 2184 milliseconds.  Average 128 milliseconds per url.
INFO - Beginning load: D:\workspace\ProjectName\build\classes
INFO - Configuring enterprise application: D:\workspace\ProjectName\classpath.ear
WARNUNG - Method 'lookup' is not available for 'javax.annotation.Resource'. Probably using an older Runtime.
INFO - Auto-deploying ejb NameOfBean: EjbDeployment(deployment-id=NameOfBean)
[... AUTHORS'S NOTE: SOME MORE BEANS]
INFO - Assembling app: D:\workspace\ProjectName\classpath.ear
INFO - Hibernate Validator 4.2.0.Final
INFO - Ignoring XML configuration.
JAVA AGENT NOT INSTALLED. The JPA Persistence Provider requested installation of a ClassFileTransformer which requires a JavaAgent.  See http://openejb.apache.org/3.0/javaagent.html
INFO - OpenJPA dynamically loaded a validation provider.
INFO - Jndi(name=NameOfBeanRemote) --> Ejb(deployment-id=NameofBean)
INFO - Jndi(name=global/classpath.ear/ProjectName/NameOfBean!de.mypath.stateless.NameOfBeanInterface) --> Ejb(deployment-id=NameofBean)
INFO - Jndi(name=global/classpath.ear/ProjectName/NameofBean) --> Ejb(deployment-id=NameOfBean)
[... AUTHORS'S NOTE: SOME FOR OTHER BEANS]
INFO - OpenWebBeans Container is starting...
INFO - Adding OpenWebBeansPlugin : [CdiPlugin]
INFO - All injection points are validated successfully.
INFO - OpenWebBeans Container has started, it took 250 ms.
INFO - Created Ejb(deployment-id=NameOfBean, ejb-name=NameOfBean, container=Default Stateless Container)
[... AUTHORS'S NOTE: SOME FOR OTHER BEANS]
INFO - Quartz scheduler 'OpenEJB-TimerService-Scheduler' initialized from an externally provided properties instance.
INFO - Quartz scheduler version: 2.1.6
INFO - Scheduler OpenEJB-TimerService-Scheduler_$_OpenEJB started.
INFO - Started Ejb(deployment-id=NameOfBean, ejb-name=NameOfBean, container=Default Stateless Container)
[... AUTHORS'S NOTE: SOME FOR OTHER BEANS] 
```

这是我的测试类：

```
public class NamerOfBeanOpenEJBTest {

private static InitialContext initialContext;

@BeforeClass
public static void setUp() throws Exception {
       Properties properties = new Properties();
       properties.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.client.LocalInitialContextFactory");
       properties.setProperty("openejb.deployments.classpath.include", ".*");
               initialContext = new InitialContext(properties);
}
@Test
public void testBean() throws NamingException{  
    Object object = initialContext.lookup("java:global/classpath.ear/ProjectName/NameOfBean");
    assertNotNull(object);
    assertTrue(object instanceof NameOfBean);
}

@AfterClass
public static void afterClass() throws Exception {
    if (initialContext != null) {
        initialContext.close();
    }}
} 
```

有人对我有提示或解决方案吗？非常感谢。

**编辑：**

在 JBoss AS 7.1 中，查找可以像这个例子一样放置：

```
new InitialContext().lookup("ejb:/ProjectName//NameOfBean!de." + "mypath.sessionbean.stateless.NameOfBeanInterface"); 
```

这在 OpenEJB 中不可能吗？我是否必须更改每个 bean 中的每个查找调用才能使用 OpenEJB 进行本地测试？这不会真正有效和节省时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:37:57.527

问题解决了！

查找的结构是 {deploymentId}{interfaceType.annotationName}。因此，就我而言，它必须是

```
initialContext.lookup("NameOfBeanLocal"); 
```

或 initialContext.lookup("NameOfBeanRemote"); 取决于接口的类型。

要解决 JBoss 的问题，您可以从默认查找切换

```
new InitialContext().lookup("ejb:/ProjectName//NameOfBean!de." + "mypath.sessionbean.stateless.NameOfBeanInterface"); 
```

到更灵活的东西，如 Dependcy-Lookup 或 Dependency-Injection 并使用 @EJB 注释。JBoss 和 OpenEJB 都支持这两种方式。

# multithreading - Arduino 支持线程吗？

> ID：14002984
> 
> 赞同：23
> 
> 时间：2012-12-22T12:50:45.180
> 
> 标签：multithreading, arduino

我有几项与 arduino 相关的任务，但其中一项需要很长时间，所以我正在考虑使用线程同时运行它们。我有一个 Arduino Mega

[更新] 四年后，我终于可以在我的 arduino mega 中安装 FreeRTOS。这是一个[链接](https://create.arduino.cc/projecthub/feilipu/using-freertos-multi-tasking-in-arduino-ebc3cc)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-22T12:59:16.647

简而言之：没有。但你可以试一试： [http ://www.kwartzlab.ca/2010/09/arduino-multi-threading-librar/](http://www.kwartzlab.ca/2010/09/arduino-multi-threading-librar/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-08T14:36:34.633

还没有，但我总是在大型项目中使用这个库： [https ://github.com/ivanseidel/ArduinoThread](https://github.com/ivanseidel/ArduinoThread)

我将回调放在定时器中断中，瞧！你有在 Arduino 上运行的伪线程......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-02T21:53:35.430

只是为了使这个线程更完整：还有一些**原型**线程的内存占用非常小（如果我没记错的话，可以使用几个字节）并保留线程本地的变量；非常方便且节省时间（更少的有限状态机 -> 更具可读性的代码）。

示例和代码： [arduino-class / ProtoThreads wiki](https://code.google.com/p/arduino-class/wiki/ProtoThreads)

只是为了让您知道您可能期望什么结果：串行通信@ 153K6 波特率，线程用于：状态二极管闪烁、时间保持、请求的功能评估、IO 处理和逻辑以及所有在 atmega328 上。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-13T11:50:45.877

不是真正的线程，但 TimedActions 是许多用途的不错选择

[http://playground.arduino.cc/Code/TimedAction#Example](http://playground.arduino.cc/Code/TimedAction#Example)

当然，如果一个任务阻塞，其他任务也会阻塞，而线程可以让一个任务冻结而其他任务将继续......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-20T13:20:12.677

不，你不能，但你可以使用定时器中断。参考：[https ://www.teachmemicro.com/arduino-timer-interrupt-tutorial/](https://www.teachmemicro.com/arduino-timer-interrupt-tutorial/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-22T16:05:02.147

前面的答案是正确的，但是，arduino 通常运行得很快，所以如果你正确地计时你的代码，它可以或多或少地同时完成任务。

最好的做法是制作自己的函数，避免在默认的 void 循环中放入过多的真实代码

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-02T18:23:08.673

你可以使用[arduinos](https://github.com/eyal-kibbar/arduinos/)

它专为 Arduino 环境而设计。特征：

*   仅静态分配（无 malloc/new）
*   延迟执行时支持上下文切换
*   实现信号量
*   轻量级，cpu和内存兼备

当我需要从蓝牙/网络/串行接收新命令同时执行旧命令并且旧命令有延迟时，我会使用它。一个线程是执行以下循环的服务器线程：

```
while (1) {
    while ((n = Serial.read()) != -1) {
        // do something with n, like filling a buffer
        if (command_was_received) {
            arduinos_create(command_func, arg);
        }
    }
    arduinos_yield(); // context switch to other threads
} 
```

另一个是执行命令的命令线程：

```
int command_func(void* arg) {
    // move some servos
    arduinos_delay(1000); // wait for them to move
    // move some more servos
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-20T10:31:34.977

Arduino 不支持多线程编程。

但是有一些解决方法，例如[这个项目](https://github.com/ivanseidel/ArduinoThread)中的一个（您也可以从 Arduino IDE 安装它）。

似乎您必须自己定义调度时间，而在真正的多线程环境中，决定何时执行任务的是操作系统。

或者，您可以使用[protothreads](http://dunkels.com/adam/pt/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-25T12:32:33.853

直接的答案是不不不！有一些替代方案，但您不能指望 arduino mega 提供完美的多线程功能。您可以使用 arduino due 或 lenado 进行多线程，如下所示 -

```
void loop1(){
}
void loop2(){
}
void loop3(){
} 
```

通常，我在后端处理这些类型的案例。您可以在服务器中运行主要代码，同时使用 Arduino 来收集输入和显示输出。在这种情况下，我更喜欢内置 wifi 的 nodemcu。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-02-03T13:59:31.573

线程不！同时是的！

您可以使用 FreeRTOS 库同时运行不同的任务。 [https://www.arduino.cc/reference/en/libraries/freertos/](https://www.arduino.cc/reference/en/libraries/freertos/)

```
void TaskBlink( void *pvParameters );
void TaskAnalogRead( void *pvParameters );

  // Now set up two tasks to run independently.
  xTaskCreate(
    TaskBlink
    ,  (const portCHAR *)"Blink"   // A name just for humans
    ,  128  // Stack size
    ,  NULL
    ,  2  // priority
    ,  NULL );

  xTaskCreate(
    TaskAnalogRead
    ,  (const portCHAR *) "AnalogRead"
    ,  128 // This stack size can be checked & adjusted by reading Highwater
    ,  NULL
    ,  1  // priority
    ,  NULL );

void TaskBlink(void *pvParameters)  // This is a task.
{
  (void) pvParameters;

  // initialize digital pin 13 as an output.
  pinMode(13, OUTPUT);

  for (;;) // A Task shall never return or exit.
  {
    digitalWrite(13, HIGH);   // turn the LED on (HIGH is the voltage level)
    vTaskDelay( 1000 / portTICK_PERIOD_MS ); // wait for one second
    digitalWrite(13, LOW);    // turn the LED off by making the voltage LOW
    vTaskDelay( 1000 / portTICK_PERIOD_MS ); // wait for one second
  }
}

void TaskAnalogRead(void *pvParameters)  // This is a task.
{
  (void) pvParameters;

  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);

  for (;;)
  {
    // read the input on analog pin 0:
    int sensorValue = analogRead(A0);
    // print out the value you read:
    Serial.println(sensorValue);
    vTaskDelay(1);  // one tick delay (15ms) in between reads for stability
  }
} 
```

小心点！当不同的任务试图同时到达变量时，比如 i2c 通信线或 sd 卡模块。使用信号量和互斥量 [https://www.geeksforgeeks.org/mutex-vs-semaphore/](https://www.geeksforgeeks.org/mutex-vs-semaphore/)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-09T20:06:44.160

Arduino 不支持线程。但是，您可以做次优的事情，并围绕以交错运行的状态机构建代码。

虽然有很多方法可以将任务实现为状态机，但我推荐这个库（[https://github.com/Elidio/StateMachine](https://github.com/Elidio/StateMachine)）。这个库抽象了大部分过程。

您可以将状态机创建为这样的类：

```
#include "StateMachine.h"
class STATEMACHINE(Blink) {
  private:
    int port;
    int waitTime;
    CREATE_STATE(low);
    CREATE_STATE(high);

    void low() {
      digitalWrite(port, LOW);
      *this << &STATE(high)<< waitTime;
    }
    void high() {
      digitalWrite(port, HIGH);
      *this << &STATE(low)<< waitTime;
    }
  public:
    Blink(int port = 0, int waitTime = 0) :
      port(port),
      waitTime(waitTime),
      INIT_STATE(low),
      INIT_STATE(high)
      {
        pinMode(port, OUTPUT);
        *this << &STATE(low);
      }
}; 
```

宏`STATEMACHINE()`抽象类继承，宏`CREATE_STATE()`抽象状态包装器创建，宏`INIT_STATE()`抽象方法包装，宏`STATE()`抽象状态机类中的状态包装器引用。

状态转换由状态机类和状态之间的运算符抽象出来`<<`，如果您想要延迟状态转换，您所要做的就是将该运算符与一个整数一起使用，其中整数是以毫秒为单位的延迟。

要使用状态机，首先必须实例化它。在使用设置函数实例化它时在全局空间中声明对类的引用`new`可能会奏效

```
Blink *led1, *led2, *led3;

void setup() {
  led1 = new Blink(12, 300);
  led2 = new Blink(11, 500);
  led3 = new Blink(10, 700);
} 
```

然后你在循环中运行状态。

```
void loop() {
    (*led2)();
    (*led1)();
    (*led3)();
} 
```

# apache - htaccess 文件在迁移到新主机后无法正常工作

> ID：14002989
> 
> 赞同：0
> 
> 时间：2012-12-22T12:51:16.237
> 
> 标签：apache, .htaccess, url, rewrite

我刚刚迁移了虚拟主机，而 .htaccess 文件在新主机上无法正常运行。

```
RewriteEngine On

RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-f
RewriteRule ^(.*)$ index.php?page=$1&%{QUERY_STRING}&param=%{REQUEST_URI} 
```

该网站的前端运行良好，但是当我尝试访问管理区域[http://www.website.com/Manage](http://www.website.com/Manage)时，即使管理目录可供 Web 服务器读取，URL 也会被重写。当我删除规则时，管理区域再次工作。

我尝试添加重写条件以排除管理目录，但没有任何运气。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T21:06:56.610

以下不仅检查请求的 url 是否为现有文件，还检查它是否为文件夹。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?page=$1&param=%{REQUEST_URI} [QSA] 
```

PS我也清理了你的规则。

# php - 正确的 mysqli_query 和 mysqli_error 配置

> ID：14002994
> 
> 赞同：1
> 
> 时间：2012-12-22T12:52:04.140
> 
> 标签：php, mysql, mysqli

启动我的代码时，我得到一个失败的查询和以下错误：

> mysqli_query() 期望参数 1 为 mysqli，在
> 
> mysqli_error() 期望参数 1 是 mysqli，字符串在

```
<?php
include('mysql_config.php');

function mysqlConnect()
{
    global $mysql_hostname, $mysql_username, $mysql_password, $mysql_database;
    $link = mysqli_connect($mysql_hostname, $mysql_username, $mysql_password) 
    or die('Could not connect: ' . mysqli_error());
    mysqli_select_db($link,$mysql_database) or die('Could not select database');
    return $link;
}

function mysqliClose($link)
{
    mysqli_close($link);
}

function sendQuery($query)
{
    $result = mysqli_query($link, $query) or die('Query failed: ' . mysqli_error("could not query"));
    return $result;
} 
```

?>

如何正确格式化 mysqli_query 和 mysqli_error 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:02:53.640

上面的代码有两个错误：

*   您错过了声明`$link` `global`为`$mysql_hostname`等。
*   您将错误的参数类型传递给`mysqli_error()`它所期望`mysqli`的，并且您传递了一个`string`

我改变了你的例子：

```
<?php

include('mysql_config.php');

// declaring an additional global var.
$link = NULL;

function mysqlConnect()
{
    global $link; // using the global $link
    global $mysql_hostname, $mysql_username, $mysql_password, $mysql_database;
    $link = mysqli_connect($mysql_hostname, $mysql_username, $mysql_password) 
    or die('Could not connect: ' . mysqli_connect_error());
    mysqli_select_db($link,$mysql_database) or die('Could not select database');
    return $link;
}

function mysqliClose($link)
{
    mysqli_close($link);
}

function sendQuery($query)
{
    global $link; // using the global $link
    $result = mysqli_query($link, $query) or die('Query failed: '
      . mysqli_error($link)); // note $link is the param
    return $result;
} 
```

# android - 动态添加 ImageView 到 View

> ID：14002996
> 
> 赞同：4
> 
> 时间：2012-12-22T12:52:17.433
> 
> 标签：android, imageview, android-view, dynamically-generated

我正在制作一个使用 View 类的 Android 游戏，但我没有使用 XML 布局。

我所有的图像都是用画布绘制的。现在我的问题是我不能使用位图。

我正在尝试将 ImageView 动态添加到我的 View 类中，以使用可触摸事件。

为什么是动态的？因为我不能使用 XML 布局。
这是我的代码：

```
package com.example.poolmaster;

import java.util.ArrayList;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.Gravity;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class MainActivity extends Activity {
    private int cuePosx, cuePosy;

    int cueHeight, cueWeight;
    double rotatingAngle;
    int height;
    int wwidth;
    int cueHeight2, cueWeight2;
    Bitmap table, stick, raise;

    ImageView button = new ImageView(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        rotatingAngle = 0;
        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        height = displaymetrics.heightPixels;
        wwidth = displaymetrics.widthPixels;
        cueHeight2 = height / 2;
        cueWeight2 = wwidth / 2;
        System.out.println("**************************************");
        System.out.println("height " + height);
        System.out.println("weight" + wwidth);
        System.out.println("**************************************");

        // Set generic layout parameters
        GamePlay custom = new GamePlay(this);

        setContentView(custom);
       // setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        if (ev.getAction() == MotionEvent.ACTION_MOVE){
            // cuePosy += 10;
            // System.out.println("xCORDİNATES!!!! " +ev.getX());
            // System.out.println("yCORDİNATES!!!! " +ev.getY());
            rotatingAngle=getAngle(ev.getX(), ev.getY());
            System.out.println("Angle " +rotatingAngle);
        }
        if (ev.getAction()==MotionEvent.ACTION_DOWN){
            System.out.println("****************** ACTİON DOWN ****************");
            // cueHeight2 += 10;
            // cueWeight2 += 20;
            // cuePosy = 320;
        }
        if (ev.getAction()==MotionEvent.ACTION_UP){
            System.out.println("****************** ACTİON DOWN ****************");
            // cueHeight2 -= 10;
            // cueWeight2 -= 20;
            // cuePosy = 320;
        }
        return true;
    }
    private double getAngle(double xTouch, double yTouch) {
        double theta;

        theta = Math.toDegrees(Math.atan2(height / 2 - yTouch, xTouch - wwidth / 2));
        return theta;
    }

    public class GamePlay extends View {
        public GamePlay(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
            table = BitmapFactory.decodeResource(getResources(), R.drawable.bg);
            table = Bitmap.createScaledBitmap(table, wwidth, height, true);
            stick = BitmapFactory.decodeResource(getResources(), R.drawable.stick);

            raise = BitmapFactory.decodeResource(getResources(), R.drawable.raise);
            cueHeight = stick.getHeight();
            System.out.println("ıstaka " + cueHeight);
            cueWeight = stick.getWidth();
            cuePosx = wwidth / 2;
            cuePosy = height - cueHeight - 180;
        }
        @SuppressLint({ "DrawAllocation", "DrawAllocation" })
        @Override
        public void onDraw(Canvas canvas) {
            super.onDraw(canvas);

            Matrix matrix = new Matrix();
            matrix.setTranslate(cueWeight2, cueHeight2);
            matrix.postRotate((float)rotatingAngle, cueWeight2, cueHeight2); // anti-clockwise by 90 degrees

            // create a new bitmap from the original using the matrix to transform the result
            Bitmap rotatedBitmap = Bitmap.createBitmap(stick, 0, 0, stick.getWidth(), stick.getHeight(), matrix, false);

            canvas.save(); // Save the position of the canvas.
            canvas.restore();

            // Rotate the canvas.
            canvas.drawBitmap(table, 0, 0, null); // Draw the ball on the rotated canvas.
            canvas.drawBitmap(stick, matrix, null);
            canvas.drawBitmap(raise, 0, 0, null);
            invalidate();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T13:03:28.040

## 这是为了将 imageview 添加到扩展 Activity 类的布局中

```
 LinearLayout lL = findViewById(R.id.xmlfile_layout_id);

   ImageView imgView = new ImageView(context); 

   imgView.setVisibility(View.VISIBLE);
   lL.addView(imgView); 
```

## 这是为了将 imageview 添加到扩展 View 类的画布中

最初，您不能使用画布放置任何图像视图、编辑文本或按钮。相反，您必须绘制它。因此，创建一个自定义布局并使用画布绘制该布局

试试这个，它可能对你有帮助。在`onDraw(..)`

```
 LinearLayout lL = new LinearLayout(context);

   ImageView imgView = new ImageView(context); 

   imgView.setVisibility(View.VISIBLE);
   lL.addView(imgView);

    lL.measure(canvas.getWidth(), canvas.getHeight());
    lL.layout(0, 0, canvas.getWidth(), canvas.getHeight());

    // placing the edit text at specific co-ordinates:
    //canvas.translate(0, 0);
    layout.draw(canvas); 
```

看看这个另一个例子： [点击这里](http://www.kellbot.com/2009/06/android-hello-circle/)

它提供了另一种添加视图的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:07:06.423

使用下面的代码。

用于动态创建 ImageView

```
ImageView mImgView1 = new ImageView(this); 
```

对于添加到您的视图之前写下面的代码`setContentView(custom);`（如果 GamePlay 是您的视图类）

```
custom.add(mImgView1); 
```

# javascript - MongoDB：Javascript内存不足

> ID：14002997
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:52:37.543
> 
> 标签：javascript, mongodb, out-of-memory

我正在生成一些随机数据以便将它们存储在 mongodb 中。通过生成大量数据并将它们首先存储在数组中（用于将生成与插入分离以进行测量），会发生内存不足错误。

编码：

```
for (i=0; i<amount; i++)
{                                       
doc = {starttime:get_datetime(), endtime:get_datetime(), tos: null, sourceport: get_port(), sourcehost: get_ip(), duration: get_duration() , destinationhost: get_ip(), destinationport: get_port(), protocol: get_protocol(), flags: get_flags(), packets: get_packets()};
docs[i]=doc;
} 
```

我选择了例如金额 = 10.000.000。

所有功能看起来像：

```
function get_flags( )              
  {                                   
     var tmpstring= Math.floor((Math.random()*8)+1); 
     return tmpstring;         
  } 
```

这样的错误是如何发生的？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:00:46.430

这样的错误是如何发生的？docs 数组需要内存，因此添加 1000 万个条目意味着使用（例如）100x1000 万字节（如果每个 doc 条目是 100 字节），即 1GB 内存。

建议的解决方案：也许尝试以 1000 个条目为一组运行生成插入循环。所以生成 1000 个文档，保存它们并为接下来的 1000 个文档重复使用该数组，依此类推。