# StackOverflow 问答 15446000-15446999

# java - 无法将数据保存到数据库

> ID：15446000
> 
> 赞同：0
> 
> 时间：2013-03-16T05:42:28.653
> 
> 标签：java, sql, database

我不知道程序出了什么问题，但是每次我单击保存按钮时，它都会说数据未保存。

这是有问题的代码：

```
private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {                                        
        String TicketNum = "FC-0";
        int count= 1;

        try {

             host = "jdbc:derby://localhost:1527/Ticket Reservation";
             username = "cmpe325";
             pass = "final";

             con = DriverManager.getConnection(host, username,pass);

             stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
            String sql = "select * from CMPE325.TICKET_RESERVATION";
            rs = stmt.executeQuery(sql);

       while(rs.next())
             {
                 String TicketCal = rs.getString("TICKET_NUM");
                 String FirstName = rs.getString("FIRST_NAME");
                 String MiddleName = rs.getString("MIDDLE_NAME");
                 String LastName = rs.getString("LAST_NAME");
                 String Address = rs.getString("ADDRESS");
                 String Residence = rs.getString("RESIDENCE_NUMBER");
                 String Offuce= rs.getString("OFFUCE_NUMBER");
                 String Mobile = rs.getString("MOBILE"); 

                //NumPassenger = rs.getDouble("PASSENGER_NUM");
                Double Adults = rs.getDouble("ADULTS_NUM");
                Double Kids= rs.getDouble("KIDS_NUM");
                String accomo= rs.getString("ACCOMODATION");
                Double Stud = rs.getDouble("DISCOUNT_STUDENT");
                Double Senfee = rs.getDouble("DISCOUNT_SENIORCITIZEN");              
                Double kid = rs.getDouble("KIDS_FEE");
                Double normal = rs.getDouble("NORMAL_FEE");
                Double pay  = rs.getDouble("TOTAL_PAYMENT");

                count ++;
             } 

        }

    catch(SQLException err)
    {
        JOptionPane.showMessageDialog(this,err.getMessage());
    }

         TicketNum += count;
         String FirstName = txtBoxFirst.getText();
         String MiddleName = txtBoxMiddle.getText();
         String LastName = txtBoxLast.getText();
         String Address = txtBoxAddress.getText();
         String Residence = txtBoxResidence.getText();
         String Offuce = txtBoxOffice.getText();
         String Mobile = txtBoxMobile.getText();

        Double Adults = Double.parseDouble(String.valueOf(txtBox2.getText()));
        Double Student = Double.parseDouble(String.valueOf(txtBox4.getText()));
        Double Kids = Double.parseDouble(String.valueOf(txtBox3.getText()));
        Double SeniorCitizen = Double.parseDouble(String.valueOf(txtBox5.getText()));

        String accomo = accomodation;
        Double normal = NumAdults;
        Double kid = NumKids;
        Double Stud = disStudent;
        Double Senfee = disSeniorCitizen;
        Double pay = totalpay;

     try
     {

       rs.moveToInsertRow();

       rs.updateString("TICKET_NUM", TicketNum);
       rs.updateString("FIRST_NAME",FirstName);
       rs.updateString("MIDDLE_NAME",MiddleName);
       rs.updateString("LAST_NAME",LastName);
       rs.updateString("ADDRESS", Address);
       rs.updateString("RESIDENCE_NUMBER",Residence);
       rs.updateString("OFFUCE_NUMBER",Offuce);
       rs.updateString("MOBILE", Mobile); 

       //rs.updateDouble("PASSENGER_NUMBER", NumPassenger);
       rs.updateDouble("ADULTS_NUMBER", Adults);
       rs.updateDouble("STUDENT_NUMBER", Student);
       rs.updateDouble("SENIORCITIZEN_NUMBER", SeniorCitizen);
       rs.updateDouble("KIDS_NUMBER", Kids);
       rs.updateString("ACCOMODATION", accomo);
       rs.updateDouble("DISCOUNT_STUDENT", Stud);
       rs.updateDouble("DISCOUNT_SENIORCITIZEN",Senfee);
       rs.updateDouble("KIDS_FEE", kid);
       rs.updateDouble("NORMALFEE", normal);
       rs.updateDouble("TOTAL_PAYMENT", pay);

       rs.insertRow( ); 
       stmt.close();
       rs.close();

       JOptionPane.showMessageDialog(this,"DATA SAVED Ticket Number is:"+ TicketNum);

     }

     catch(SQLException err)
    {

        JOptionPane.showMessageDialog(this,"DATA NOT SAVED PLEASE TRY AGAIN");

    }

    } 
```

**堆栈跟踪**

```
error:
run:
java.sql.SQLIntegrityConstraintViolationException: Column 'PASSENGER_NUMBER'  cannot accept a NULL value.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.client.am.ResultSet.insertRow(Unknown Source)
    at FinalPro.java.Reserve.btnSaveActionPerformed(Reserve.java:1135)
    at FinalPro.java.Reserve.access$900(Reserve.java:11)
    at FinalPro.java.Reserve$10.actionPerformed(Reserve.java:605)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:155)
    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182)
    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:219)
    at java.awt.Dialog.show(Dialog.java:1077)
    at java.awt.Component.show(Component.java:1651)
    at java.awt.Component.setVisible(Component.java:1603)
    at java.awt.Window.setVisible(Window.java:1014)
    at java.awt.Dialog.setVisible(Dialog.java:1003)
    at FinalPro.java.FinalPro.MenuReserveActionPerformed(FinalPro.java:99)
    at FinalPro.java.FinalPro.access$000(FinalPro.java:3)
    at FinalPro.java.FinalPro$1.actionPerformed(FinalPro.java:34)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
    at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)
    at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
Caused by: org.apache.derby.client.am.SqlException: Column 'PASSENGER_NUMBER'  cannot accept a NULL value.
    at org.apache.derby.client.am.Statement.completeExecute(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parseEXCSQLSTTreply(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.readExecute(Unknown Source)
    at org.apache.derby.client.net.StatementReply.readExecute(Unknown Source)
    at org.apache.derby.client.net.NetPreparedStatement.readExecute_(Unknown Source)
    at org.apache.derby.client.am.ResultSet.readInsertRow(Unknown Source)
    at org.apache.derby.client.am.ResultSet.insert(Unknown Source)
    at org.apache.derby.client.am.ResultSet.insertRowX(Unknown Source)
    ... 87 more
BUILD SUCCESSFUL (total time: 24 seconds) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T06:11:09.050

看到错误`SQLIntegrityConstraintViolationException: Column 'PASSENGER_NUMBER' cannot accept a NULL value`

您正在传递一个在数据库中不为空的空值。

`SOLUTION:`您需要为该字段传递值。或删除数据库中的非空约束。

# php - 通过php插入mysql数据库总是导致崩溃

> ID：15446001
> 
> 赞同：0
> 
> 时间：2013-03-16T05:42:28.747
> 
> 标签：php, mysql, database

我有一个 mysql 数据库设置。其中一个名为 users 的表有一些列，其中 2 个是 usr (varchar 32) 和 email (varchar 255)。每当我尝试通过 PHP 将该表中的数据插入到这 2 列（或任何其他列）中时，该表就会崩溃。

这是检查表的分析

```
mysql> check table users;
+----------------+-------+----------+-------------------------------------------     +
| Table          | Op    | Msg_type | Msg_text                                       |
+----------------+-------+----------+-------------------------------------------     +
| accounts.users | check | warning  | Table is marked as crashed                     |
| accounts.users | check | error    | Size of indexfile is: 4096    Should be: 10240 |
| accounts.users | check | error    | Size of datafile is: 0        Should be: 28    |
| accounts.users | check | error    | Corrupt                                        |
+----------------+-------+----------+-------------------------------------------     +
4 rows in set (0.00 sec) 
```

这是 PHP 命令：

```
$type     = 'testing';
$type     = mysql_real_escape_string($type);
mysql_query("INSERT INTO users(usr,email) VALUES('$type','$type')"); 
```

每当我尝试从命令行插入数据库时​​，表都不会崩溃。

我很困惑为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T05:51:34.003

在查询后运行 die() 并查看 mysql 错误是什么，如果是 mysql 问题：

```
mysql_query(' ... ') or die(mysql_error()); 
```

该错误应该指出您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T06:16:11.713

改进mavili的答案，我认为最好这样做：

```
if(!mysql_query($SQL)) {
    error_log(mysql_error());
} 
```

error_log 可以以更安全的方式写入信息。有关详细信息，请参阅[error_log 手册](http://php.net/manual/en/function.error-log.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T07:07:11.883

`mysql_real_escape_string()`返回转义的字符串，或`FALSE`出错。如果返回`FALSE`，则与您的数据类型不匹配。`varchar`有两点

使用前需要 MySQL 连接，`mysql_real_escape_string()`否则会产生 E_WARNING 级别的错误，并返回 FALSE。

字符集必须在服务器级别设置，或者使用 API 函数`mysql_set_charset()`设置才能影响`mysql_real_escape_string()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T00:10:28.760

我刚刚重新安装了 WAMP，它开始工作了。谢谢你们的帮助！

# php - 服务器端验证，客户端通知？

> ID：15446003
> 
> 赞同：0
> 
> 时间：2013-03-16T05:42:44.810
> 
> 标签：php, javascript, validation, client-side, server-side

当用户使用用户名和密码填写登录表单时，我使用 php 通过将输入的数据与 SQL 数据库中“用户”表中的数据进行比较来对输入的数据进行服务器端验证。如果密码不正确，我想在不重定向他的情况下通知用户 - 例如，使用 javascript 对话框。那可能吗？我发现通知用户的唯一方法是：

```
if ($password_given != $password_from_db) {
    echo "Wrong password."; // Dull non-html notification issued by the server
}; 
```

或者

```
if ($password_given != $password_from_db) {
    header('Location: index.php?page=wrongpassword'); //Need redirection
}; 
```

无论如何，这有什么不同吗？

一个 javascript 来获取输入的数据，将其发送到服务器进行处理是一个想法，但是我怎么能返回一个结果供 javascript 使用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:53:11.157

可以使用 AJAX 来完成 -

```
<form onsubmit="return ajaxsubmit();">
...
</form> 
```

Javascript-

```
function ajaxsubmit() {
    param = 'email=' + document.forms.login.email + '&' + 'pass=' + document.forms.login.pass;
    xhr = new XMLHttpRequest();
    xhr.open('POST', 'process.php', true);
    xhr.onload = function() {
        if(xhr.responseText.indexOf("Wrong")>=0) {
            //wrong password, ask user to try again
        } else {
            //correct password, redirect or do stuff.
        }
    };
    xhr.setRequestHeader('Content-type: application/x-www-form-urlencoded'); 
    xhr.send(param);
    return false;
} 
```

您可以将服务器端验证代码保留在 process.php 中，并在表单所在的页面中使用上述代码。你完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:54:40.267

***jQuery***

```
$.post("test.php", $("#testform").serialize())
.done(function(data) {
  if( data=='validated')
window.location.href = "successpage.php";
else
 alert ('password dont match!');

}); 
```

***php***

```
if ($password_given != $password_from_db) 
    echo "notvalidated."; 
else
   echo     echo "validated."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T05:46:10.577

您可以根据服务器返回的结果对服务器进行 Ajax 调用并允许用户登录或显示错误消息。

# jar - 有没有一种常见的方法可以在詹金斯中永久存储罐子

> ID：15446007
> 
> 赞同：0
> 
> 时间：2013-03-16T05:44:11.223
> 
> 标签：jar, jenkins

我有一个包含一些重要版本的项目。我想在詹金斯中将某些构建标记为“永久”，以便我可以永远访问它们（即在每日清除的构建工作区之外）。

有没有一种简单的方法可以做到这一点？

我看过 jenkins artifactory 插件，但这似乎很重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:51:53.350

我认为 Jenkins 可以做到这一点，但维护起来可能会变得很麻烦。

您可以添加构建后步骤“存档工件”，并且 - 根本不要丢弃旧构建 - 在您要保留的每个构建上 - 将其标记为“永久保留此构建” <- 右上角有这个小按钮每个构建页面的角落

# matlab - matlab和simulink

> ID：15446010
> 
> 赞同：0
> 
> 时间：2013-03-16T05:44:29.100
> 
> 标签：matlab, variables, each, simulink

您好我正在尝试建立一个用于精明边缘检测的 simulink 模型。我没有得到如何在 simulink 中实现非最大抑制块。是否可以通过编写 mat-lab 代码来创建块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:25:32.383

Yes, it's called embedded matlab function. I think it is under user-defined blocks

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T10:36:46.777

要创建用户定义模块，您可以在 Simulink 中使用 S 函数。您可以使用 Matlab 或 C/C++ 编写此 S 函数，具体取决于您的要求。

参考这个链接

[http://in.mathworks.com/help/simulink/s-function-basics.html](http://in.mathworks.com/help/simulink/s-function-basics.html)

# php - 将动态表单数据写入文件中自己的行

> ID：15446015
> 
> 赞同：0
> 
> 时间：2013-03-16T05:44:57.603
> 
> 标签：php

* * *

好吧，我将重新开始我想要完成的事情。

我有一个网站，我希望在“访问者姓名”部分中有表格，以便能够根据需要添加字段。我想我已经解决了。

```
<fieldset>
        <legend>Visitor Name</legend>
<div id="placeholder">
        <div id="addmore">
                <label for="firstname">First Name:</label>
                <input type="text" name="name[]" value="">
                <label for="lastname">Last Name:</label>
                <input type="text" name="name[]" value"">
                <label for="jobtitle">Job Title:</label>
                <input type="text" name="name[]" value="">
        </div>
</div> 
```

js代码是

```
var _counter = 0;
function Add() {
    _counter++;
    var oClone = document.getElementById("addmore").cloneNode(true);
    oClone.id += (_counter + "");
    document.getElementById("placeholder").appendChild(oClone);
} 
```

当按下“添加访客”按钮时创建字段，对可以创建的动态文件的数量没有限制。

所以我想 PHP 部分是我被挂断的地方。

如何将这些动态值传递给 php 脚本并将它们放在一个文件中。

当我使用

```
foreach($_POST['name'] as $info) {
      fwrite($file, "$companyname,$info,$boxes,$boxes1,$boxes2,$boxes3,$boxes4,$boxes5,$boxes6,$boxes7,$boxes8,$boxes9,$boxes10,$boxes11 \n");
    } 
```

我明白了

公司，弗雷德，不，不，不，不，是，不，不，不，不，是，不，是的 公司，威廉姆斯，不，不，不，不，是，不，不，不，不，是,不,是公司,你好,不,不,不,不,是,不,不,不,不,是,不,是的公司,托德,不,不,不,不,是,不,不,不,不,是,不,是公司,威廉姆斯,不,不,不,不,是,不,不,不,不,是,不,是的公司,你好,不,不,不,不,是,不,不,不,不,是,不,是

代替

公司，弗雷德，威廉姆斯，你好，不，不，不，不，是，不，不，不，不，是，不，是 公司，托德，威廉姆斯，你好，不，不，不，不，是，不,不,不,不,是,不,是

所以我想我正在获取数据，但我需要将其放入上述格式。

抱歉我对此一无所知。

当我做：

```
$my_array = $_POST['name'];
$visitor = implode(",",$my_array); 
```

进而

```
echo "$companyname,$visitor,$boxes,$boxes1,$boxes2,$boxes3,$boxes4,$boxes5,$boxes6,$boxes7,$boxes8,$boxes9,$boxes10,$boxes11 <br />"; 
```

它给我的名字不止一个

公司,比利,威廉姆斯,测试,鲍比,威廉姆斯,测试,不,不,不,不,不,不,不,不,不,不,不,不

我得到的只是获取 $visitor 数组并添加到 $visitor 部分。所以它正在获取数据，但我仍然无法在文件中每个名称一行获取它。

当我这样做的时候

```
print_r($visitor); 
```

我得到了一行中输入到文本框中的信息。

比利，威廉姆斯，测试，鲍勃，威廉姆斯，测试

当我这样做的时候

```
print_r($_POST); 
```

我明白了

```
Array ( [companyname] => Buster [name] => Array ( [0] => bob [1] => Buddy [2] => Test [3] => bob [4] => Buddy [5] => Test ) [Submit] => Add Visitor ) 
```

我想通了。

```
foreach($firstname as $key => $value){
fwrite($file, "$companyname,$value,$lastname[$key],$jobtitle[$key],$boxes,$boxes1,$boxes2,$boxes3,$boxes4,$boxes5,$boxes6,$boxes7,$boxes8,$boxes9,$boxes10,$boxes11 \n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:50:37.527

由于您可以将数据传递到数组中并写入 t 文件，因此请在此处阅读如何使用 PHP fputcsv() 并查看它如何帮助您。[http://php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)

来自上述网址的示例：

```
<?php

$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);

$fp = fopen('file.csv', 'w');

foreach ($list as $fields) {
    fputcsv($fp, $fields);
}

fclose($fp);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:10:41.940

我建议查看@OmniPotents 答案，另一个快速且 [非常] 肮脏的选择是：

```
$a = array('aaa', 'bbb', 'ccc', 'dddd');
$b = array('zzz', 'bbb', 'ccc', 'dddd');

function toCsv($arr) {
    return file_put_contents('file.csv', implode(",", $arr) . PHP_EOL, FILE_APPEND);
} 

toCsv($a);
toCsv($b); 
```

然后 file.csv 看起来像

```
aaa,bbb,ccc,dddd
zzz,bbb,ccc,dddd 
```

请记住，这样的解决方案没有考虑对某些 CSV 很重要的文本分隔符之类的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:40:29.357

这就是我为解决我的问题所做的

```
foreach($firstname as $key => $value){
fwrite($file, "$companyname,$value,$lastname[$key],$jobtitle[$key],$boxes,$boxes1,$boxes2,$boxes3,$boxes4,$boxes5,$boxes6,$boxes7,$boxes8,$boxes9,$boxes10,$boxes11 \n"); 
```

我把它放在我原来的帖子中，但我想我也会把它作为答案发布。

# ruby-on-rails - Distance_of_time_in_words

> ID：15446016
> 
> 赞同：0
> 
> 时间：2013-03-16T05:45:00.150
> 
> 标签：ruby-on-rails, ruby, datetime

我正在使用`distance_of_time_in_words`扩展的 gem [dotiw](https://github.com/radar/dotiw)，如下所示：

```
<%= distance_of_time_in_words(@client.report_missing_after.days, Date.today, false, except: ["hours","minutes"])  %> 
```

如果`@client.report_missing_after`等于`7`上面的代码将按预期返回“7 天”。如果`@client.report_missing_after`等于 1-28，这可以正常工作，但是，当我突然达到 29 时，输出看起来像：

```
87847649280000 years and 238878720000 days 
```

这是不正确的。

我无法弄清楚我要去哪里错了。帮助？

更新：

根据评论，我只是尝试将第一个参数作为整数传递，但它仍然不起作用：

```
<%= distance_of_time_in_words(29.days ,0, false, except: ["hours","minutes"]) %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:40:03.623

您是否尝试过明确地度过这些日子？

```
29.days

var.days 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:49:23.230

结果证明 distance_of_time_in_words 当你正确使用它时效果更好，我的意思是使用时间戳而不是日期时间对象。

这最终为我工作：

```
<%= distance_of_time_in_words(Time.now, Time.now+29.days, false, except ["hours","minutes"]) %> 
```

# javascript - 在 nodejs/commonjs 模块的根范围内声明对象 - 为 var 还是不为 var？

> ID：15446022
> 
> 赞同：1
> 
> 时间：2013-03-16T05:46:03.890
> 
> 标签：javascript, node.js, commonjs

也许是习惯，也许是为了一致性，但是为什么`var`在模块的根范围内使用这么多（许多代码示例都表明了这一点）？真的有必要吗？我的意思是模块是根范围，所以无论你声明一个变量有还是没有`var`，你在这两种情况下都将它附加到同一个对象，对吗？你不会弄乱任何命名空间，不是吗？

```
qs = require('querystring'); // looks better than

var qs = require('querystring'); // right? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T06:12:20.733

原因是 Common JS 模块不仅用于 node.js，还用于各种其他环境。

许多 Common JS 模块也可以在浏览器中使用。每个模块都有自己的函数包装器，以将其与其他模块隔离。在这种情况下，有必要使用`var`，以免意外泄漏到全局范围内。

话虽如此，大多数开发人员更喜欢`var`在他们的代码中显式使用，原因如下：

1.  这是一个很好的编程习惯。说真的，编程就是实践。我非常习惯于使用声明变量`var`，我经常发现自己`var`在 C/C++ 中使用声明，然后让编译器对我哭泣。
2.  使用操作符声明的变量`var`不能被删除`delete`。有时我会故意省略`var`全局变量，以便稍后删除它们并以“忍者模式”运行。

# c# - 不使用 OLEDB 提供程序读取 Microsoft Excel 数据？

> ID：15446028
> 
> 赞同：0
> 
> 时间：2013-03-16T05:46:52.887
> 
> 标签：c#, asp.net

我有带有标题和少量数据的 Excel 文件，我必须在不使用 oledb 提供程序的情况下读取 Excel 文件，因为我需要在服务器上安装 oledb 提供程序，所以我没有权限。有没有替代的解决方案。

是否可以使用纯 .net 框架读取 excel 文件？如果可能的话，那么有什么方法可以读取 Excel 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:50:45.797

您可以使用[EPPLus](http://epplus.codeplex.com/)读取和写入未安装 OLEDB 或 Office 的 Excel 文件：

> EPPlus 是一个 .net 库，它使用 Open Office Xml 格式 (xlsx) 读取和写入 Excel 2007/2010 文件。

# facebook - 在 facebook 见解中找不到我的应用程序？

> ID：15446031
> 
> 赞同：2
> 
> 时间：2013-03-16T05:47:03.560
> 
> 标签：facebook, facebook-javascript-sdk, facebook-apps, facebook-social-plugins, facebook-insights

我正在使用社交插件运行一个网站，所以我创建了一个 facebook 应用程序

然后我想使用 facebook 洞察力来连接我的网站和应用程序（ps。我还在标题中添加 app_id 或 meta）

但我在连接列表中找不到我创建的应用程序

![连接列表图片](../Images/53dc89615eef3780b6869dddc1242703.png)

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T09:16:29.997

这似乎是 Facebook 缓存问题 - UI 根本没有刷新并提供新的应用程序选项。但是，您仍然可以手动提交带有所需应用程序 ID 的请求。我使用 firebug 将我的新应用程序 ID 和名称注入到`<select>`元素中，然后正常提交表单。

例如：1）找到相关的输入`<select>`元素： ![UI 和相应的 HTML](../Images/a0e34e3a1a54040f43970f05332a4eb0.png)

2）在 Firebug（或等效）控制台中运行此代码，将相关的 [PLACEHOLDERS] 替换为您的应用程序 ID：

```
var fbidOptions = $$('select[name="fbid"]')[0];
var newOption = document.createElement('option');
newOption.setAttribute('value','fb:app_id,[PUT APP ID HERE]');
newOption.innerHTML = '[IT DOESNT REALLY MATTER, BUT PUT APP NAME HERE]';
fbidOptions.appendChild(newOption); 
```

3) 选择新注入的选项，然后提交。facebook 服务器将接受应用程序 ID 为有效，这让我相信它纯粹是一个 UI 缓存问题。

![在此处输入图像描述](../Images/4a2e54779d3b16f34ef4e89defd5019e.png)

# c# - 使用二分搜索填充列表

> ID：15446032
> 
> 赞同：-4
> 
> 时间：2013-03-16T05:47:04.953
> 
> 标签：c#, algorithm, binary-search

我的列表中充满了文件名。我需要用搜索结果填充花药列表。此搜索结果必须通过二分搜索完成，下一个规范：关键字可以匹配文件名或者它的 Substring(0, key.Length)。例如关键字=“汽车”搜索结果=“car.gif”、“carffur.pdf”等，但不是“mobilecar.jar”

我的二进制搜索：

```
 class Search
{
    private const int KEY_NOT_FOUND = -1;

    public static int BinarySearch<T>(List<T> A, T key, IComparer<T> comparer, int imin, int imax)
    {
        // test if array is empty
        if (imax < imin)
            // set is empty, so return value showing not found
            return KEY_NOT_FOUND;
        else
        {
            // calculate midpoint to cut set in half
            int imid = imin + ((imax - imin) / 2);
            int compareResult = comparer.Compare(A[imid], key);
            // three-way comparison
            if (compareResult > 0)
                // key is in lower subset
                return BinarySearch<T>(A, key, comparer,imin, imid - 1);
            else if (compareResult < 0)
                // key is in upper subset
                return BinarySearch<T>(A, key, comparer, imid + 1, imax);
            else
                // key has been found
                return imid;
        }
    }
} 
```

我的比较类：

```
 class SubStringComparison : IComparer<string>
{
    public int Compare(string x, string y)
    {
        if (x.Length > y.Length && x.Substring(0, y.Length).Equals(y))
            return 0;

        return String.Compare(x, y, StringComparison.OrdinalIgnoreCase);
    }
} 
```

用法：

```
private void backgroundWorkerSearch_DoWork(object sender, DoWorkEventArgs e)
    {
        SearchForFiles();
    }

    private void SearchForFiles()
    {
        List<string> files = listBoxFiles.Items.OfType<string>().ToList();
        searchResults = new List<string>();
        listBoxFiles.Dispatcher.Invoke(new Action(delegate()
            {
                while (true)
                {
                    int index = Search.BinarySearch<string>(files, textBoxFileToSearch.Text, new SubStringComparison(), 0, files.Count - 1);
                    if (index == -1)
                        break;
                    else
                        searchResults.Add(files[index]);
                }
            }));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:36:10.733

-1 你在作业的哪一部分有问题？是二分查找吗？是文件名的选择吗？是不是 BackgroundWorker 的事情没有按预期工作？

我看到您在使用 BackgroundWorker 时遇到了一些问题，您似乎正在从 BackgroundWorker 线程中的 UI 中选择文件列表，然后创建一个将在主线程中运行的 Action，这是一种非常奇怪的方法。

正确的方法是：

```
public void button1_Click(object sender)
{
    List<string> files = listBoxFiles.Items.OfType<string>().ToList();
    string key = textBoxFileToSearch.Text;
    backgroundWorkerSearch.RunWorkerAsync(new Tupple<List<string>,string>(files, key));
}

void backgroundWorkerSearch_DoWork(object sender, DoWorkEventArgs e)
{
     var state = e.Argument as Tupple<List<string>,string>;
     List<string> files = state.Item1;
     string key = state.Item2;
     // You can now access the needed data.
     List<string> searchResult = new List<string>();
     // ...
     e.Result = searchResult;
}

void backgroundWorkerSearch_RunWorkerCompleted(RunWorkerCompletedEventArgs e)
{
     List<string> searchResult = e.Result;
     // Show result in the UI thread.
} 
```

# regex - 使用正则表达式列出 linux 驱动程序

> ID：15446034
> 
> 赞同：-1
> 
> 时间：2013-03-16T05:47:27.767
> 
> 标签：regex, linux, drivers

我想列出文件中的所有驱动程序`/etc/X11/xorg.conf`

我的文件如下所示：

```
section "input class"
        identifier    "blablabla"
        driver        "my driver here" 
```

我想使用正则表达式列出此文件中的每个驱动程序。我想我可以使用这样的东西：`grep -i "driver"`然后用管道连接它，然后找到介于两者之间的东西`""`

但这不起作用`grep -i "driver" | grep -i "\"(.*?)\""`

我认为问题是空格，但我怎么能`[[:space:]]`用来忽略它们？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:28:16.297

不是最好的解决方案，但我能很快想到的东西：

```
grep driver /etc/X11/xorg.conf  | cut -d '"'  -f 2 
```

该`grep`命令将列出包含该模式的所有行`driver`。`-d`cut的参数指定分隔符，并且`-f`指定要打印的字段

您可以`awk`在单个命令中执行相同的操作：

```
awk -F '"' -v PATTERN="driver" '$0 ~ PATTERN { print $2 }' /etc/X11/xorg.conf 
```

# security - 常见的缓冲区溢出攻击

> ID：15446035
> 
> 赞同：0
> 
> 时间：2013-03-16T05:47:41.163
> 
> 标签：security, buffer-overflow, penetration-testing

我正在学习计算机安全，我正在尝试查找常见缓冲区溢出攻击的列表，但运气不佳。
我计划使用 metasploit 进行渗透测试以及回溯 5，但我还没有开始。甚至指向我会喜欢的美景的指针。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:51:56.123

本文档介绍并涵盖了多种形式的缓冲区溢出攻击：

[http://insecure.org/stf/smashstack.html](http://insecure.org/stf/smashstack.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:03:31.620

一般来说，您可以区分缓冲区溢出

*   控制数据攻击 - 控制数据攻击可能会覆盖已保存的寄存器或其他用于控制应用程序流的数据

和

*   非控制数据攻击 - 因此试图覆盖变量以在赌场游戏中获得更多积分的攻击

如果您对细节有更多了解，则可以更深入地了解攻击的实际工作方式：

然后你也可以区分

*   发生覆盖的位置
*   目标所在的内存中被覆盖的位置
*   以及 shellcode 放置在哪个位置

如果你考虑到所有这些，你有一大堆缓冲区溢出类型要分析——我已经这样做了，这很有趣；）

# java - 在Android中查找包中的所有类

> ID：15446036
> 
> 赞同：16
> 
> 时间：2013-03-16T05:47:41.783
> 
> 标签：java, android

如何在 Android 上找到一个包中的所有类？我使用 PathClassLoader，但它总是返回一个空枚举？

附加信息

尝试了建议的反射方法。关于反射库的几个要点。通过 maven central 提供的库与 Android 不兼容，并给出 dex 错误。我必须包含源代码并编译 dom4j、java-assist。

反射的问题，我最初的解决方案是 android 中的 PathClassLoader 返回包​​的空枚举。

方法的问题是 Android 中的 getResource 总是返回空枚举。

```
final String resourceName = aClass.getName().replace(".", "/") + ".class";

for (ClassLoader classLoader : loaders) {
      try {
            final URL url = classLoader.getResource(resourceName);
            if (url != null) {
                final String normalizedUrl = url.toExternalForm().substring(0, url.toExternalForm().lastIndexOf(aClass.getPackage().getName().replace(".", "/")));
                return new URL(normalizedUrl);
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
   } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T01:56:51.570

使用 DexFile 列出 apk 中的所有类：

```
 try {
        DexFile df = new DexFile(context.getPackageCodePath());
        for (Enumeration<String> iter = df.entries(); iter.hasMoreElements();) {
            String s = iter.nextElement();
        }
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

剩下的就是使用正则表达式或其他东西来过滤掉你想要的类。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-17T10:59:41.097

其实我找到了解决方案。谢谢涛[回复](https://stackoverflow.com/a/15892032/2956344)。

```
private String[] getClassesOfPackage(String packageName) {
    ArrayList<String> classes = new ArrayList<String>();
    try {
        String packageCodePath = getPackageCodePath();
        DexFile df = new DexFile(packageCodePath);
        for (Enumeration<String> iter = df.entries(); iter.hasMoreElements(); ) {
            String className = iter.nextElement();
            if (className.contains(packageName)) {
                classes.add(className.substring(className.lastIndexOf(".") + 1, className.length()));
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    return classes.toArray(new String[classes.size()]);
} 
```

在 Android 5.0 Lolipop 上测试

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-27T11:08:43.520

这是一个解决方案，它不仅为您带来类名，
还为您带来`Class<?>`对象。

虽然`PathClassLoader.class.getDeclaredField("mDexs")`经常失败，但
`new DexFile(getContext().getPackageCodePath())`似乎更稳定。

```
public abstract class ClassScanner {

    private static final String TAG = "ClassScanner"; 
    private Context mContext;

    public ClassScanner(Context context) {
        mContext = context;
    }

    public Context getContext() {
        return mContext;
    }

    void scan() throws IOException, ClassNotFoundException, NoSuchMethodException {
        long timeBegin = System.currentTimeMillis();

        PathClassLoader classLoader = (PathClassLoader) getContext().getClassLoader();
        //PathClassLoader classLoader = (PathClassLoader) Thread.currentThread().getContextClassLoader();//This also works good
        DexFile dexFile = new DexFile(getContext().getPackageCodePath());
        Enumeration<String> classNames = dexFile.entries();
        while (classNames.hasMoreElements()) {
            String className = classNames.nextElement();
            if (isTargetClassName(className)) {
                //Class<?> aClass = Class.forName(className);//java.lang.ExceptionInInitializerError
                //Class<?> aClass = Class.forName(className, false, classLoader);//tested on 魅蓝Note(M463C)_Android4.4.4 and Mi2s_Android5.1.1
                Class<?> aClass = classLoader.loadClass(className);//tested on 魅蓝Note(M463C)_Android4.4.4 and Mi2s_Android5.1.1
                if (isTargetClass(aClass)) {
                    onScanResult(aClass);
                }
            }
        }

        long timeEnd = System.currentTimeMillis();
        long timeElapsed = timeEnd - timeBegin;
        Log.d(TAG, "scan() cost " + timeElapsed + "ms");
    }

    protected abstract boolean isTargetClassName(String className);

    protected abstract boolean isTargetClass(Class clazz);

    protected abstract void onScanResult(Class clazz);
} 
```

这是一个如何使用的例子：

```
new ClassScanner(context) {

    @Override
    protected boolean isTargetClassName(String className) {
        return className.startsWith(getContext().getPackageName())//I want classes under my package
                && !className.contains("$");//I don't need none-static inner classes
    }

    @Override
    protected boolean isTargetClass(Class clazz) {
        return AbsFactory.class.isAssignableFrom(clazz)//I want subclasses of AbsFactory
                && !Modifier.isAbstract(clazz.getModifiers());//I don't want abstract classes
    }

    @Override
    protected void onScanResult(Class clazz) {
        Constructor constructor = null;
        try {
            constructor = clazz.getDeclaredConstructor();
            constructor.setAccessible(true);
            constructor.newInstance();
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
    }

}.scan(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-29T19:49:24.477

这些方法通常已经过时，不适用于多 dex 应用程序。要支持 multidex，您可以像这样获取所有 DexFiles

```
internal fun getDexFiles(context: Context): Sequence<DexFile> {
    // Here we do some reflection to access the dex files from the class loader. These implementation details vary by platform version,
    // so we have to be a little careful, but not a huge deal since this is just for testing. It should work on 21+.
    // The source for reference is at:
    // https://android.googlesource.com/platform/libcore/+/oreo-release/dalvik/src/main/java/dalvik/system/BaseDexClassLoader.java
    val classLoader = context.classLoader as BaseDexClassLoader

    val pathListField = field("dalvik.system.BaseDexClassLoader", "pathList")
    val pathList = pathListField.get(classLoader) // Type is DexPathList

    val dexElementsField = field("dalvik.system.DexPathList", "dexElements")
    @Suppress("UNCHECKED_CAST")
    val dexElements = dexElementsField.get(pathList) as Array<Any> // Type is Array<DexPathList.Element>

    val dexFileField = field("dalvik.system.DexPathList\$Element", "dexFile")
    return dexElements.map {
        dexFileField.get(it) as DexFile
    }.asSequence()
}

private fun field(className: String, fieldName: String): Field {
    val clazz = Class.forName(className)
    val field = clazz.getDeclaredField(fieldName)
    field.isAccessible = true
    return field
} 
```

从那里您可以像这样使用它来获取包中的所有类

```
getDexFiles(context)
            .flatMap { it.entries().asSequence() }
            .filter { it.startsWith("my.package.name") }
            .map { context.classLoader.loadClass(it) } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-19T07:58:28.030

这取自[http://mindtherobot.com/](http://mindtherobot.com/blog/737/android-hacks-scan-android-classpath/)

代码示例

假设我们有一个名为 Foo 的注释和几个用它装饰的类：

```
@Retention(RetentionPolicy.RUNTIME)
public @interface Foo {
  String value();
}

@Foo("person")
public class Person {

}

@Foo("order")
public class Order {

} 
```

这是一个简单的类，它在运行时遍历应用程序中的所有类，找到标有@Foo 的类并获取注释的值。不要将此代码复制并粘贴到您的应用程序中 - 它有很多需要修复和添加的内容，如下代码所述。

```
public class ClasspathScanner {
  private static final String TAG = ClasspathScanner.class.getSimpleName();

  private static Field dexField;

  static {
    try {
      dexField = PathClassLoader.class.getDeclaredField("mDexs");
      dexField.setAccessible(true);
    } catch (Exception e) {
      // TODO (1): handle this case gracefully - nobody promised that this field will always be there
      Log.e(TAG, "Failed to get mDexs field");
    } 
  }

  public void run() {
    try {
      // TODO (2): check here - in theory, the class loader is not required to be a PathClassLoader
      PathClassLoader classLoader = (PathClassLoader) Thread.currentThread().getContextClassLoader();

      DexFile[] dexs = (DexFile[]) dexField.get(classLoader);
      for (DexFile dex : dexs) {
        Enumeration<String> entries = dex.entries();
        while (entries.hasMoreElements()) {
          // (3) Each entry is a class name, like "foo.bar.MyClass"
          String entry = entries.nextElement();
          Log.d(TAG, "Entry: " + entry);

          // (4) Load the class
          Class<?> entryClass = dex.loadClass(entry, classLoader);
          if (entryClass != null) {
            Foo annotation = entryClass.getAnnotation(Foo.class);
            if (annotation != null) {
              Log.d(TAG, entry + ": " + annotation.value());
            }
          }
        }
      }
    } catch (Exception e) {
      // TODO (5): more precise error handling
      Log.e(TAG, "Error", e);
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-10T20:48:13.477

我找到了 Sergey Shustikov 的相同解决方案，包名从上下文派生并处理内部类。不幸的是，虽然它在 Galaxy Nexus 上运行，但它在 Nexus 6 和 Nexus 6p 上不起作用（未在其他设备上测试）。

这是代码：

```
private HashMap<String, String> loadClassFullnames() {
    final HashMap<String, String> ret = new HashMap<>();
    try {
        final String thisPackage = context.getPackageName();
        final DexFile tmp = new DexFile(context.getPackageCodePath());
        for (Enumeration<String> iter = tmp.entries(); iter.hasMoreElements(); ) {
            final String classFullname = iter.nextElement();
            if (classFullname.startsWith(thisPackage)) {
                // TODO filter out also anonymous classes (es Class1$51)
                final int index = classFullname.lastIndexOf(".");
                final String c = (index >= 0) ? classFullname.substring(index + 1) : classFullname;
                ret.put(c.replace('$', '.'), classFullname);
            }
        }
    } catch (Throwable ex) {
        Debug.w("Unable to collect class fullnames. Reason: " + ex.getCause() + "\n\rStack Trace:\n\r" + ((ex.getCause() != null)? ex.getCause().getStackTrace(): "none"));
    }

    return ret;
} 
```

它接缝在 Galaxy Nexus 上，DexFile 还包含应用程序包（我们正在尝试查找的那个！），而在 Nexus 6[p] 上没有找到与 thisPackage 匹配的包，而其他一些包在那里......有人有同样的问题吗？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-16T07:57:44.003

尝试这个..

```
 Reflections reflections = new Reflections("my.project.prefix");

   Set<Class<? extends Object>> allClasses 
                        = reflections.getSubTypesOf(Object.class); 
```

# php - 具有多个ID的Mysql选择查询

> ID：15446037
> 
> 赞同：1
> 
> 时间：2013-03-16T05:47:42.293
> 
> 标签：php, mysql, sql, join

好吧，我有一个这样的 Mysql 表（**oc_calendar**）：

```
id      start_date         username
1       2013-04-04         18
2       2013-03-31         19
3       2013-04-04         19
4       2013-04-02         19 
5       2013-04-03         18 
```

通过以下查询，我可以根据搜索结果获取所有 id：

```
$search = mysql_query("SELECT DISTINCT username FROM oc_calendar WHERE start_date 
between '$from' AND '$to'");

while($re_search = mysql_fetch_array($search)) {

$search_p_id = $re_search['username']; // here is the result Like: 18, 19 etc..
} 
```

现在我正在尝试基于变量**$search_p_id**使用以下查询获取另一个表（ **property_step1 ）信息，但它显示错误。**可能是我的查询不正确。

 ****注意：变量 $search_p_id 可以是 18 或 19、18 等。**

```
$search = mysql_query("SELECT * FROM property_step1 WHERE propertyid IN (" . 
implode(',', $search_p_id) . ")"); 
```

为什么它显示错误消息，任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T05:51:24.033

不需要两个查询，您可以只用一个查询来执行此操作，方法是[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)ing 两个表：

```
SELECT p.* 
FROM oc_calendar AS o
INNER JOIN  property_step1 AS p ON o.username = p.propertyid
WHERE o.start_date between '$from' AND '$to'; 
```

我假设了连接条件：`o.username = p.propertyid`因为您`username`从第一个表中获取值列表，所以从第二个值中选择所有行，其中使用谓词从第一个表中选择`propertyid`的值列表中。所以，我用它就像谓词，但它更安全，让你从两个表中选择列。`username``IN``JOIN``IN`

* * *

**请注意：**请***停止***使用`Mysql_`* 扩展，这种方式的代码对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)是开放的，它也已被弃用。请改用[**PDO**](http://www.php.net/manual/en/ref.pdo-mysql.php)或准备好的语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:52:58.957

您不能使用`implode()`非数组数据。您应该将 value 的`$search_p_id`值更改为数组。

```
$search = mysql_query("SELECT DISTINCT username FROM oc_calendar WHERE start_date between '$from' AND '$to'");
$search_p_id = array();

while($re_search = mysql_fetch_array($search)) {
    $search_p_id []= $re_search['username']; // here is the result Like: 18, 19 etc..
}

$search = mysql_query("SELECT * FROM property_step1 WHERE propertyid IN (" . implode(',', $search_p_id) . ")"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T05:51:41.707

`$search_p_id`目前不是一个数组，所以`implode(',', $search_p_id)`很可能会失败。

改变你的设置方式`$search_p_id`

```
while($re_search = mysql_fetch_array($search)) {
  $search_p_id[] = $re_search['username']; // here is the result Like: 18, 19 etc..
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T05:53:59.547

您首先使用不推荐使用的 mysql api，如 Mahmoud 所说，切换到 pdo。

其次，您在非数组上的 $search_p_id 上使用 implode 函数，这可能会给您带来不希望的结果。请尝试以下操作：

```
$search = mysql_query("SELECT DISTINCT username FROM oc_calendar WHERE start_date 
between '$from' AND '$to'");
$search_p_id = array();
while($re_search = mysql_fetch_array($search)) {
   array_push($search_p_id, $re_search['username']);
}   

search = mysql_query("SELECT * FROM property_step1 WHERE propertyid IN (" . 
implode(',', $search_p_id) . ")"); 
```**

# php - 如何为 Youtube 视频设置自动播放？

> ID：15446045
> 
> 赞同：-5
> 
> 时间：2013-03-16T05:49:00.230
> 
> 标签：php, html, youtube

我有以下代码，我想使用它来自动播放 YouTube 视频。它适用于普通的 HTML 代码，但使用下面的 PHP 代码，我无法自动播放。怎么了？

```
 if(!isset($_GET['vidid']))
  {
  echo  '<div class="leftcurtain" style="width: 60px; display: block;"><img src="images/2frontcurtain.jpg"/></div>';
  echo  '<div class="rightcurtain" style="width: 60px; display: block;"><img src="images/2frontcurtain.jpg"/></div>';
  echo '    <div class="visible">
  <iframe width="597" height="365" src="';
  echo get_vid_url($vid_id);
    if (get_vid_url($vid_id) == "http://www.youtube.com/embed/be9eQ21OLu0") echo '?autoplay=1'; 
    echo '" frameborder="0" allowfullscreen></iframe>
</div>
<span id="dummy"></span> <a class="rope" href="#" style="top: 10px;"> <img src="images/rope.png"/> </a> </div>';
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T05:59:38.967

将此添加到您的网址

```
?autoplay=1 
```

例如。`<iframe width="420" height="315" src="http://www.youtube.com/embed/ oHg5SJYRHA0?autoplay=1" frameborder="0" allowfullscreen></iframe>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:00:54.947

包含 Youtube 视频的更好方法是使用其中一种 Youtube API，例如[Youtube iFrame API](https://developers.google.com/youtube/iframe_api_reference)

示例代码还显示了自动播放功能，该功能在播放器准备好时触发。

```
function onPlayerReady(event) {
    event.target.playVideo();
} 
```

一般来说，您应该使用另一个 php 标记：

```
<?php if(!isset($_GET['vidid'])) : ?>

<div class="leftcurtain" style="width: 60px; display: block;"><img src="images/2frontcurtain.jpg"/></div>
<div class="rightcurtain" style="width: 60px; display: block;"><img src="images/2frontcurtain.jpg"/></div>
<div class="visible">
      <iframe width="597" height="365" src="<?php echo (get_vid_url($vid_id) == "http://www.youtube.com/embed/be9eQ21OLu0") ? get_vid_url($vid_id).'?autoplay=1':get_vid_url($vid_id);?>" frameborder="0" allowfullscreen></iframe>
</div>
<span id="dummy"></span> 
<a class="rope" href="#" style="top: 10px;"> 
    <img src="images/rope.png"/> 
</a> 
</div>

<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:04:24.780

对于您的代码替换为您的 URL，您可以删除 echo 自动播放并将其添加到 url 的末尾而不使用 echo

```
http://www.youtube.com/embed/be9eQ21OLu0?autoplay=1 
```

# php - 如何在子主题中修改默认的 wordpress 评论表单

> ID：15446048
> 
> 赞同：-1
> 
> 时间：2013-03-16T05:49:13.413
> 
> 标签：php, wordpress, captcha

我想通过添加验证码功能并根据我的子主题要求修改它的 CSS 来自定义默认的 wordpress 表单（弹出窗口）。我也不想使用任何插件。

我是 wordpress 的新手，刚刚开始研究这个。

我怎样才能做到这一点？需要帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:50:10.883

有两种方法，一种是您可以通过检测表单的 css 类并将它们添加到您的 style.css 文件中进行简单更改

另一件事是转到根目录上的 wpinclude 文件夹并在底部找到 commenttemplate.php 进行表单更改

# google-app-engine - 如何将 appengine/urlfetch 包与 goauth2 一起使用？

> ID：15446050
> 
> 赞同：6
> 
> 时间：2013-03-16T05:49:18.047
> 
> 标签：google-app-engine, oauth-2.0, go

goauth2[包](https://code.google.com/p/goauth2/)有一个示例使用。但是在应用引擎上，普通的 http.Client 不可用。如何将应用引擎 urlfetch 包与 goauth2 一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T05:49:18.047

您必须`Transport`在回调的第一行添加一个参数：

```
t := &oauth.Transport{
    Config:    oauth_conf,
    Transport: &urlfetch.Transport{Context: c},
} 
```

# drupal - 具有按类别和子类别搜索过滤器的文件查看器 Drupal 7

> ID：15446052
> 
> 赞同：2
> 
> 时间：2013-03-16T05:49:31.183
> 
> 标签：drupal, drupal-7, documentviewer

我想创建一个在本地运行的站点（localhost），它可以查看授权用户上传的文件。使用按类别和子类别的搜索过滤器，将显示该子类别中包含的所有电子书。如何创建这种搜索？是否有任何模块可以做到这一点？

例如，IT 书籍----> 编程书籍--->。然后它会显示所有已经上传的编程书籍。当点击其中一本编程书籍时，它将显示所有页面，就像adobe reader中的页面一样。这个概念是这样的。我怎么能做到这一点？我在搜索可以完美运行的文件查看器模块时遇到了太多问题。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T11:48:05.360

为了创建**文件目录**，您可以使用[视图](https://drupal.org/project/views)和[file_entity](https://drupal.org/project/file_entity)模块。我无法详细了解这项任务。如果您是 Drupal 新手，需要几个小时来解释。

为了**查看/渲染任何 pdf**文件，您可以使用实现[pdf.js](https://github.com/mozilla/pdf.js)插件的[pdf](https://drupal.org/project/pdf)或[pdf_reader模块（请参阅 pdf.js 的](https://drupal.org/project/pdf_reader)[实时示例](http://mozilla.github.io/pdf.js/web/viewer.html)）。

# javascript - 禁用过去日期的javascript日期选择器

> ID：15446053
> 
> 赞同：0
> 
> 时间：2013-03-16T05:49:37.153
> 
> 标签：javascript, datepicker

我使用下面的 JS 来创建日期选择器。我想知道如何使日期选择器变灰并且不允许选择已经过去的日期？我知道之前有人问过这个问题，但它是一个不同的脚本，我希望保留脚本，只需对脚本稍作改动。谢谢。

```
var datePickerDivID = "datepicker";
var iFrameDivID = "datepickeriframe";
var dayArrayShort = new Array('S', 'M', 'T', 'W', 'T', 'F', 'S');
var dayArrayMed = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');
var dayArrayLong = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday',  'Friday', 'Saturday');
var monthArrayShort = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');

var defaultDateSeparator = "/";        
var defaultDateFormat = "mdy"    
var dateSeparator = defaultDateSeparator;
var dateFormat = defaultDateFormat;

function displayDatePicker(dateFieldName, displayBelowThisObject, dtFormat, dtSep)
{  var targetDateField = document.getElementsByName (dateFieldName).item(0);

if (!displayBelowThisObject)
displayBelowThisObject = targetDateField;

if (dtSep)
dateSeparator = dtSep;
  else
dateSeparator = defaultDateSeparator;

if (dtFormat)
dateFormat = dtFormat;
else
dateFormat = defaultDateFormat;

var x = displayBelowThisObject.offsetLeft;
var y = displayBelowThisObject.offsetTop + displayBelowThisObject.offsetHeight ;

var parent = displayBelowThisObject;
while (parent.offsetParent) {
parent = parent.offsetParent;
x += parent.offsetLeft;
y += parent.offsetTop ;
}

drawDatePicker(targetDateField, x, y);}

function drawDatePicker(targetDateField, x, y)
{
var dt = getFieldDate(targetDateField.value );

if (!document.getElementById(datePickerDivID)) {
var newNode = document.createElement("div");
newNode.setAttribute("id", datePickerDivID);
newNode.setAttribute("class", "dpDiv");
newNode.setAttribute("style", "visibility: hidden;");
document.body.appendChild(newNode);
}

var pickerDiv = document.getElementById(datePickerDivID);
pickerDiv.style.position = "absolute";
pickerDiv.style.left = x + "px";
pickerDiv.style.top = y + "px";
pickerDiv.style.visibility = (pickerDiv.style.visibility == "visible" ? "hidden" : "visible");
pickerDiv.style.display = (pickerDiv.style.display == "block" ? "none" : "block");
pickerDiv.style.zIndex = 10000;

refreshDatePicker(targetDateField.name, dt.getFullYear(), dt.getMonth(), dt.getDate());}

function refreshDatePicker(dateFieldName, year, month, day)
{
var thisDay = new Date();

if ((month >= 0) && (year > 0)) {
thisDay = new Date(year, month, 1);
 } else {
day = thisDay.getDate();
thisDay.setDate(1);  }

var crlf = "\r\n";
var TABLE = "<table colspan=7 class='dpTable'>" + crlf;
var xTABLE = "</table>" + crlf;
var TR = "<tr class='dpTR'>";
var TR_title = "<tr class='dpTitleTR'>";
var TR_days = "<tr class='dpDayTR'>";
var TR_todaybutton = "<tr class='dpTodayButtonTR'>";
var xTR = "</tr>" + crlf;
var TD = "<td class='dpTD' onMouseOut='this.className=\"dpTD\";' onMouseOver=' this.className=\"dpTDHover\";' ";    
var TD_title = "<td colspan=5 class='dpTitleTD'>";
var TD_buttons = "<td class='dpButtonTD'>";
var TD_todaybutton = "<td colspan=7 class='dpTodayButtonTD'>";
var TD_days = "<td class='dpDayTD'>";
var TD_selected = "<td class='dpDayHighlightTD'   onMouseOut='this.className=\"dpDayHighlightTD\";' onMouseOver='this.className=\"dpTDHover\";' ";    
var xTD = "</td>" + crlf;
var DIV_title = "<div class='dpTitleText'>";
var DIV_selected = "<div class='dpDayHighlight'>";
var xDIV = "</div>";

var html = TABLE;

html += TR_title;
html += TD_buttons + getButtonCode(dateFieldName, thisDay, -1, "&laquo;") + xTD;
html += TD_title + DIV_title + monthArrayLong[ thisDay.getMonth()] + "&nbsp;" + thisDay.getFullYear() + xDIV + xTD;
html += TD_buttons + getButtonCode(dateFieldName, thisDay, 1, "&raquo;") + xTD;
html += xTR;

html += TR_days;
for(i = 0; i < dayArrayMed.length; i++)
html += TD_days + dayArrayMed[i] + xTD;
html += xTR;

html += TR;

for (i = 0; i < thisDay.getDay(); i++)
html += TD + "&nbsp;" + xTD;

 do {
dayNum = thisDay.getDate();
TD_onclick = " onclick=\"updateDateField('" + dateFieldName + "', '" + getDateString(thisDay) + "');\">";

if (dayNum == day)
  html += TD_selected + TD_onclick + DIV_selected + dayNum + xDIV + xTD;
else
  html += TD + TD_onclick + dayNum + xTD;

if (thisDay.getDay() == 6)
  html += xTR + TR;

thisDay.setDate(thisDay.getDate() + 1);
} while (thisDay.getDate() > 1)

if (thisDay.getDay() > 0) {
for (i = 6; i > thisDay.getDay(); i--)
  html += TD + "&nbsp;" + xTD;
}
html += xTR;

var today = new Date();
var todayString = "Today is " + dayArrayMed[today.getDay()] + ", " + monthArrayMed[ today.getMonth()] + ", " + today.getDate();
html += TR_todaybutton + TD_todaybutton;
html += "<button class='dpTodayButtonl' onClick='refreshDatePicker(\"" + dateFieldName + "\");'>this month</button>";
html += "<button class='dpTodayButtonr' onClick='updateDateField(\"" + dateFieldName + "\");'>close</button>";
html += xTD + xTR;

html += xTABLE;

document.getElementById(datePickerDivID).innerHTML = html;
adjustiFrame();
}

function getButtonCode(dateFieldName, dateVal, adjust, label){
var newMonth = (dateVal.getMonth () + adjust) % 12;
var newYear = dateVal.getFullYear() + parseInt((dateVal.getMonth() + adjust) / 12);
if (newMonth < 0) {
newMonth += 12;
newYear += -1;
}

return "<button class='dpButton' onClick='refreshDatePicker(\"" + dateFieldName + "\", " + newYear + ", " + newMonth + ");'>" + label + "</button>";
}

function getDateString(dateVal){
var dayString = "00" + dateVal.getDate();
var monthString = "00" + (dateVal.getMonth()+1);
dayString = dayString.substring(dayString.length - 2);
monthString = monthString.substring(monthString.length - 2);

switch (dateFormat) {
case "dmy" :
  return dayString + dateSeparator + monthString + dateSeparator + dateVal.getFullYear();
case "ymd" :
  return dateVal.getFullYear() + dateSeparator + monthString + dateSeparator + dayString;
case "mdy" :
default :
  return monthString + dateSeparator + dayString + dateSeparator + dateVal.getFullYear();
}}

function getFieldDate(dateString)
{
var dateVal;
var dArray;
var d, m, y;

try {
dArray = splitDateString(dateString);
if (dArray) {
  switch (dateFormat) {
    case "dmy" :
      d = parseInt(dArray[0], 10);
      m = parseInt(dArray[1], 10) - 1;
      y = parseInt(dArray[2], 10);
      break;
    case "ymd" :
      d = parseInt(dArray[2], 10);
      m = parseInt(dArray[1], 10) - 1;
      y = parseInt(dArray[0], 10);
      break;
    case "mdy" :
    default :
      d = parseInt(dArray[1], 10);
      m = parseInt(dArray[0], 10) - 1;
      y = parseInt(dArray[2], 10);
      break;
  }
  dateVal = new Date(y, m, d);
  } else if (dateString) {
  dateVal = new Date(dateString);
  } else {
  dateVal = new Date();
  }} catch(e) {
  dateVal = new Date();}

  return dateVal;}

  function splitDateString(dateString){
  var dArray;
  if (dateString.indexOf("/") >= 0)
  dArray = dateString.split("/");
  else if (dateString.indexOf(".") >= 0)
  dArray = dateString.split(".");
  else if (dateString.indexOf("-") >= 0)
  dArray = dateString.split("-");
  else if (dateString.indexOf("\\") >= 0)
  dArray = dateString.split("\\");
  else
  dArray = false;

  return dArray;  }

  function updateDateField(dateFieldName, dateString){
  var targetDateField = document.getElementsByName (dateFieldName).item(0);
  if (dateString)
  targetDateField.value = dateString;

  var pickerDiv = document.getElementById(datePickerDivID);
  pickerDiv.style.visibility = "hidden";
  pickerDiv.style.display = "none";

  adjustiFrame();
  targetDateField.focus();

  if ((dateString) && (typeof(datePickerClosed) == "function"))
  datePickerClosed(targetDateField);
  }

  function adjustiFrame(pickerDiv, iFrameDiv)
  {
  var is_opera = (navigator.userAgent.toLowerCase().indexOf("opera") != -1);
  if (is_opera)
  return;

  try {
  if (!document.getElementById(iFrameDivID)) {
  var newNode = document.createElement("iFrame");
  newNode.setAttribute("id", iFrameDivID);
  newNode.setAttribute("src", "javascript:false;");
  newNode.setAttribute("scrolling", "no");
  newNode.setAttribute ("frameborder", "0");
  document.body.appendChild(newNode);}

  if (!pickerDiv)
  pickerDiv = document.getElementById(datePickerDivID);
  if (!iFrameDiv)
  iFrameDiv = document.getElementById(iFrameDivID);

  try {
  iFrameDiv.style.position = "absolute";
  iFrameDiv.style.width = pickerDiv.offsetWidth;
  iFrameDiv.style.height = pickerDiv.offsetHeight ;
  iFrameDiv.style.top = pickerDiv.style.top;
  iFrameDiv.style.left = pickerDiv.style.left;
  iFrameDiv.style.zIndex = pickerDiv.style.zIndex - 1;
  iFrameDiv.style.visibility = pickerDiv.style.visibility ;
  iFrameDiv.style.display = pickerDiv.style.display;
  } catch(e) {      }} catch (ee) {      }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:54:20.660

尝试使用 Aaron 和 techfoobar 建议的 JQuery UI。如果需要，您可以使用他们的 Theme Roller [http://jqueryui.com/themeroller](http://jqueryui.com/themeroller)自定义外观。很容易实现。

# c# - 从两组日期范围 C# 中查找间隔日期范围

> ID：15446054
> 
> 赞同：3
> 
> 时间：2013-03-16T05:49:42.457
> 
> 标签：c#, sql, linq, datetime, collections

我有基准日期范围和测试日期范围。我需要在基础和测试之间获取 GAP，这意味着缺少基础但不在测试中的日期范围。最好的方法是什么？

```
Base Date Ranges
1/1/2012    1/10/2012
1/11/2012   1/25/2012

Test Date Ranges
1/2/2012    1/7/2012
1/8/2012    1/9/2012
1/15/2012   1/30/2012 
```

**输出：**

```
Missing Date Ranges that are in Base but not in Test 
1/1/2012    1/2/2012
1/7/2012    1/8/2012
1/9/2012    1/10/2012
1/11/2012   1/15/2012 
```

到目前为止尝试过

```
 static void Main(string[] args)
    {

        List<DateRanges> aDateRanges = new List<DateRanges>();
        List<DateRanges> bDateRanges = new List<DateRanges>();

        aDateRanges.Add(new DateRanges(new DateTime(2012, 1, 1), new DateTime(2012, 1, 10)));
        aDateRanges.Add(new DateRanges(new DateTime(2012, 1, 11), new DateTime(2012, 1, 25)));

        bDateRanges.Add(new DateRanges(new DateTime(2012, 1, 2), new DateTime(2012, 1, 7)));
        bDateRanges.Add(new DateRanges(new DateTime(2012, 1, 8), new DateTime(2012, 1, 9)));
        bDateRanges.Add(new DateRanges(new DateTime(2012, 1, 15), new DateTime(2012, 1, 30)));

        DisplayDateRanges(GetGaps(aDateRanges, bDateRanges, 0), "Final Gap Fill");
        Console.WriteLine("Completed");
        Console.Read();
    }

    public class DateRanges
    {
        public DateTime StartDate { get; set; }
        public DateTime EndDate { get; set; }
        public DateRanges(DateTime Start, DateTime End)
        {
            StartDate = Start;
            EndDate = End;
        }
    }

    public static void DisplayDateRanges(List<DateRanges> dateRanges, string title)
    {
        Console.WriteLine("************************{0}****************************", title);
        Console.WriteLine(Environment.NewLine + "New Recursion");
        foreach (DateRanges br in dateRanges)
        {
            Console.WriteLine("Start Date {0}   End Date {1}", br.StartDate, br.EndDate);
        }

    }

    public static List<DateRanges> GetGaps(List<DateRanges> aDateRanges, List<DateRanges> bDateRanges, int recursionlevel)
    {
        List<DateRanges> gapFill = new List<DateRanges>();
        List<DateRanges> gapFillTemp = new List<DateRanges>();
        List<DateRanges> bDateRangesTemp = new List<DateRanges>(bDateRanges);
        Console.WriteLine(Environment.NewLine + "+++++++++++++++++++++++++++++++++++++++++Recursion Level Id {0} +++++++++++++++++++++++++++++++++++++++++", recursionlevel);
        DisplayDateRanges(aDateRanges, " A Date Ranges ");
        DisplayDateRanges(bDateRanges, " B Date Ranges ");

        foreach (DateRanges br in bDateRanges)
        {
            if (br.StartDate == br.EndDate)
                return gapFill;
            foreach (DateRanges ar in aDateRanges)
            {
                if (ar.StartDate == ar.EndDate)
                    return gapFill;
                if (br.StartDate == ar.StartDate && br.EndDate == ar.EndDate)
                    continue;
                else if (br.StartDate >= ar.StartDate && br.EndDate <= ar.EndDate)
                {
                    gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(ar.StartDate, br.StartDate) }, bDateRangesTemp, recursionlevel + 1));
                    if (gapFillTemp.Count == 0)
                    {
                        //gapFillTemp.Add(new DateRanges(ar.StartDate, br.StartDate));
                    }
                    bDateRangesTemp.AddRange(gapFillTemp);
                    gapFill.AddRange(gapFillTemp);
                    gapFillTemp.Clear();

                    gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(br.EndDate, ar.EndDate) }, bDateRangesTemp, recursionlevel + 1));
                    if (gapFillTemp.Count == 0)
                    {
                       // gapFillTemp.Add(new DateRanges(br.EndDate, ar.EndDate));
                    }
                    bDateRangesTemp.AddRange(gapFillTemp);
                    gapFill.AddRange(gapFillTemp);
                    gapFillTemp.Clear();
                }
                else if (br.StartDate < ar.EndDate && br.EndDate >= ar.EndDate)
                {
                    gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(ar.StartDate, br.StartDate) }, bDateRangesTemp, recursionlevel + 1));
                    if (gapFillTemp.Count == 0)
                    {
                        //gapFillTemp.Add(new DateRanges(ar.StartDate, br.StartDate));
                    }
                    bDateRangesTemp.AddRange(gapFillTemp);
                    gapFill.AddRange(gapFillTemp);
                    gapFillTemp.Clear();
                }

                else if (ar.StartDate >= br.StartDate && ar.StartDate < br.EndDate)
                {
                    gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(br.EndDate, ar.EndDate) }, bDateRangesTemp, recursionlevel + 1));
                    if (gapFillTemp.Count == 0)
                    {
                       // gapFillTemp.Add(new DateRanges(br.EndDate, ar.EndDate));
                    }
                    bDateRangesTemp.AddRange(gapFillTemp);
                    gapFill.AddRange(gapFillTemp);
                    gapFillTemp.Clear();
                }

                else if (ar.StartDate >= br.StartDate && ar.EndDate <= br.EndDate)
                {
                    //     AS----AE
                    //  BS----------BE           
                    //Do Nothing

                }
                else
                {
                    if (AllowedToAdd(bDateRangesTemp, new DateRanges(ar.StartDate, ar.EndDate)))
                    {
                        bDateRangesTemp.Add(new DateRanges(ar.StartDate, ar.EndDate));
                        gapFill.Add(new DateRanges(ar.StartDate, ar.EndDate));
                    }
                }

            }

        }
        return gapFill;
    }

    static bool AllowedToAdd(List<DateRanges> bDateRanges, DateRanges newItem)
    {
        return !bDateRanges.Any(m =>
            (m.StartDate < newItem.StartDate &&
             newItem.StartDate < (m.EndDate))
            ||
            (m.StartDate < (newItem.EndDate) &&
             (newItem.EndDate) <= (m.EndDate))
            ||
            (newItem.StartDate < m.StartDate &&
             m.StartDate < (newItem.EndDate))
            ||
            (newItem.StartDate < (m.EndDate) &&
             (m.EndDate) <= (newItem.EndDate))
            );
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T22:41:49.447

您可以使用[.NET 的时间段库](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)来计算差距：

```
// ----------------------------------------------------------------------
public void GapFinder()
{
  // base periods
  TimePeriodCollection basePeriods = new TimePeriodCollection();
  basePeriods.Add( new TimeRange( new DateTime( 2012, 1, 1 ), new DateTime( 2012, 1, 10 ) ) );
  basePeriods.Add( new TimeRange( new DateTime( 2012, 1, 11 ), new DateTime( 2012, 1, 25 ) ) );
  ITimePeriodCollection combinedBasePeriods = new TimePeriodCombiner<TimeRange>().CombinePeriods( basePeriods );

  // test periods
  TimePeriodCollection testPeriods = new TimePeriodCollection();
  testPeriods.Add( new TimeRange( new DateTime( 2012, 1, 2 ), new DateTime( 2012, 1, 7 ) ) );
  testPeriods.Add( new TimeRange( new DateTime( 2012, 1, 8 ), new DateTime( 2012, 1, 9 ) ) );
  testPeriods.Add( new TimeRange( new DateTime( 2012, 1, 15 ), new DateTime( 2012, 1, 30 ) ) );
  ITimePeriodCollection combinedTestPeriods = new TimePeriodCombiner<TimeRange>().CombinePeriods( testPeriods );

  // gaps
  TimePeriodCollection gaps = new TimePeriodCollection();
  foreach ( ITimePeriod basePeriod in combinedBasePeriods )
  {
    gaps.AddAll( new TimeGapCalculator<TimeRange>().GetGaps( combinedTestPeriods, basePeriod ) );
  }
  foreach ( ITimePeriod gap in gaps )
  {
    Console.WriteLine( "Gap: " + gap );
  }
} // GapFinder 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T18:13:57.747

以下代码满足问题的给定约束：

### 单元测试

```
 static void Main(string[] args)
    {
        IEnumerable<DateRange> _base = new[] { new DateRange() { Start = DateTime.Parse("1/1/2012"), End = DateTime.Parse("1/10/2012")},
                                               new DateRange() { Start = DateTime.Parse("1/11/2012"), End = DateTime.Parse("1/25/2012")} };

        IEnumerable<DateRange> _test = new[] { new DateRange() { Start = DateTime.Parse("1/2/2012"), End = DateTime.Parse("1/7/2012")},
                                               new DateRange() { Start = DateTime.Parse("1/8/2012"), End = DateTime.Parse("1/9/2012")},
                                               new DateRange() { Start = DateTime.Parse("1/15/2012"), End = DateTime.Parse("1/30/2012")} };

        IEnumerable<DateRange> _theoreticalGaps = new[] { new DateRange() { Start = DateTime.Parse("1/1/2012"), End = DateTime.Parse("1/2/2012")},
                                               new DateRange() { Start = DateTime.Parse("1/7/2012"), End = DateTime.Parse("1/8/2012")},
                                               new DateRange() { Start = DateTime.Parse("1/9/2012"), End = DateTime.Parse("1/10/2012")},
                                               new DateRange() { Start = DateTime.Parse("1/11/2012"), End = DateTime.Parse("1/15/2012")} };

        var gapsInTestNotInBase = FindGaps(_base, _test);

        Debug.Assert(Enumerable.SequenceEqual(_theoreticalGaps, gapsInTestNotInBase));
    } 
```

### FindGaps 方法

```
 public static IEnumerable<DateRange> FindGaps(IEnumerable<DateRange> baseCollection, IEnumerable<DateRange> testCollection)
    {
        var allBaseDates = baseCollection.SelectMany(o => o.GetDiscreetDates())
            .Distinct()
            .OrderBy(o => o.Ticks);

        var missingInTest = (from d in allBaseDates
                             let inRange = testCollection.Any(o => d.IsInRange(o))
                             where !inRange
                             select d).ToArray();

        var gaps = missingInTest.Select(o => new DateRange() { Start = o, End = o.AddDays(1) });

        gaps = gaps.GroupConsecutive();

        return gaps;

    } 
```

### 日期范围类

```
public class DateRange
{
    protected bool Equals(DateRange other)
    {
        return Start.Equals(other.Start) && End.Equals(other.End);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return (Start.GetHashCode()*397) ^ End.GetHashCode();
        }
    }

    public DateTime Start { get; set; }
    public DateTime End { get; set; }

    public IEnumerable<DateTime> GetDiscreetDates()
    {
        //Start is not allowed to equal end.
        if (Start.Date == End.Date)
            throw new ArgumentException("Start cannot equal end.");

        var output = new List<DateTime>();

        var current = Start.Date;

        while (current < End.Date) {
            output.Add(current);
            current = current.AddDays(1);
        }

        return output;
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((DateRange) obj);
    }
} 
```

### 扩展方法

```
public static class Extensions
{
    public static bool IsInRange(this DateTime testDate, DateRange range)
    {
        return range.Start <= testDate && range.End > testDate;
    }

    public static IEnumerable<DateRange> GroupConsecutive(this IEnumerable<DateRange> input)
    {
        var current = input.ToArray();
        var nextIndex = 0;

        //uses lookahead to figure out if gaps are consecutive.
        for (int i = 0; i < current.Length - 1; i++) {

            //If the next range is consecutive to the current, skip;
            if (!current[i].End.IsInRange(current[i + 1])) {
                yield return new DateRange()
                               {
                                   Start = current[nextIndex].Start,
                                   End = current[i].End
                               };
                nextIndex = i + 1;
            }
        }

        //If the last elements were consecutive, pull out the final item.
        if (nextIndex != current.Length) {
            yield return new DateRange()
            {
                Start = current[nextIndex].Start,
                End = current[current.Length - 1].End
            };
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T18:17:04.780

**扩展方法**

```
public static class DateRangeEnumerable
{
    public static IEnumerable<DateTime> GetDates(this IEnumerable<DateRange> source)
    {
        var sortedSource = source.OrderBy(r => r.From);

        foreach (var range in sortedSource)
        {
            var d = range.From;
            while (d < range.To)
            {
                yield return d;
                d = d.AddDays(1);
            }
        }
    }

    public static IEnumerable<DateRange> GetRanges(this IEnumerable<DateTime> source)
    {
        var sortedSource = source.OrderBy(d => d);
        var enumerator = sortedSource.GetEnumerator();

        if (!enumerator.MoveNext())
            yield break;

        DateTime from = enumerator.Current;
        DateTime prev = from;

        while (true)
        {
            while (true)
            {
                if (enumerator.MoveNext())
                {
                    if (enumerator.Current == prev.AddDays(1))
                        prev = enumerator.Current;
                    else
                        break;
                }
                else
                {
                    yield return new DateRange() { From = from, To = prev.AddDays(1) };
                    yield break;
                }

            }

            yield return new DateRange() { From = from, To = prev.AddDays(1) };

            from = enumerator.Current;
            prev = enumerator.Current;
        }
    }
} 
```

**用法**：

```
var missing = BaseRanges.GetDates().Except(TestRanges.GetDates());
var ranges = missing.GetRanges(); 
```

我已经在您的示例数据上对其进行了测试，并返回了它应该返回的内容。

两种扩展方法都是惰性的，并且一次读取/返回一个元素。

*我很确定`GetRanges`方法可以变得更具可读性:)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T18:30:08.360

这也有效

静态无效主要（字符串[] args）{

```
 List<DateRanges> aDateRanges = new List<DateRanges>();
    List<DateRanges> bDateRanges = new List<DateRanges>();

    aDateRanges.Add(new DateRanges(new DateTime(2012, 1, 1), new DateTime(2012, 1, 10)));
    aDateRanges.Add(new DateRanges(new DateTime(2012, 1, 11), new DateTime(2012, 1, 25)));

    bDateRanges.Add(new DateRanges(new DateTime(2012, 1, 2), new DateTime(2012, 1, 7)));
    bDateRanges.Add(new DateRanges(new DateTime(2012, 1, 8), new DateTime(2012, 1, 9)));
    bDateRanges.Add(new DateRanges(new DateTime(2012, 1, 15), new DateTime(2012, 1, 30)));

    DisplayDateRanges(GetGaps(aDateRanges, bDateRanges, 0), "Final Gap Fill");
    Console.WriteLine("Completed");
    Console.Read();
}

public class DateRanges
{
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public DateRanges(DateTime Start, DateTime End)
    {
        StartDate = Start;
        EndDate = End;
    }
}

public static void DisplayDateRanges(List<DateRanges> dateRanges, string title)
{
    Console.WriteLine("************************{0}****************************", title);
    Console.WriteLine(Environment.NewLine + "New Recursion");
    foreach (DateRanges br in dateRanges)
    {
        Console.WriteLine("Start Date {0}   End Date {1}", br.StartDate, br.EndDate);
    }

}

public static List<DateRanges> GetGaps(List<DateRanges> aDateRanges, List<DateRanges> bDateRanges, int recursionlevel)
{
    List<DateRanges> gapFill = new List<DateRanges>();
    List<DateRanges> gapFillTemp = new List<DateRanges>();
    List<DateRanges> bDateRangesTemp = new List<DateRanges>(bDateRanges);
    Console.WriteLine(Environment.NewLine + "+++++++++++++++++++++++++++++++++++++++++Recursion Level Id {0} +++++++++++++++++++++++++++++++++++++++++", recursionlevel);
    DisplayDateRanges(aDateRanges, " A Date Ranges ");
    DisplayDateRanges(bDateRanges, " B Date Ranges ");

    foreach (DateRanges br in bDateRanges)
    {
        if (br.StartDate == br.EndDate)
            return gapFill;
        foreach (DateRanges ar in aDateRanges)
        {
            if (ar.StartDate == ar.EndDate)
                return gapFill;
            if (br.StartDate == ar.StartDate && br.EndDate == ar.EndDate)
                continue;
            else if (br.StartDate >= ar.StartDate && br.EndDate <= ar.EndDate)
            {
                gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(ar.StartDate, br.StartDate) }, bDateRangesTemp, recursionlevel + 1));
                if (gapFillTemp.Count == 0)
                {
                    //gapFillTemp.Add(new DateRanges(ar.StartDate, br.StartDate));
                }
                bDateRangesTemp.AddRange(gapFillTemp);
                gapFill.AddRange(gapFillTemp);
                gapFillTemp.Clear();

                gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(br.EndDate, ar.EndDate) }, bDateRangesTemp, recursionlevel + 1));
                if (gapFillTemp.Count == 0)
                {
                   // gapFillTemp.Add(new DateRanges(br.EndDate, ar.EndDate));
                }
                bDateRangesTemp.AddRange(gapFillTemp);
                gapFill.AddRange(gapFillTemp);
                gapFillTemp.Clear();
            }
            else if (br.StartDate < ar.EndDate && br.EndDate >= ar.EndDate)
            {
                gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(ar.StartDate, br.StartDate) }, bDateRangesTemp, recursionlevel + 1));
                if (gapFillTemp.Count == 0)
                {
                    //gapFillTemp.Add(new DateRanges(ar.StartDate, br.StartDate));
                }
                bDateRangesTemp.AddRange(gapFillTemp);
                gapFill.AddRange(gapFillTemp);
                gapFillTemp.Clear();
            }

            else if (ar.StartDate >= br.StartDate && ar.StartDate < br.EndDate)
            {
                gapFillTemp.AddRange(GetGaps(new List<DateRanges> { new DateRanges(br.EndDate, ar.EndDate) }, bDateRangesTemp, recursionlevel + 1));
                if (gapFillTemp.Count == 0)
                {
                   // gapFillTemp.Add(new DateRanges(br.EndDate, ar.EndDate));
                }
                bDateRangesTemp.AddRange(gapFillTemp);
                gapFill.AddRange(gapFillTemp);
                gapFillTemp.Clear();
            }

            else if (ar.StartDate >= br.StartDate && ar.EndDate <= br.EndDate)
            {
                //     AS----AE
                //  BS----------BE           
                //Do Nothing

            }
            else
            {
                if (AllowedToAdd(bDateRangesTemp, new DateRanges(ar.StartDate, ar.EndDate)))
                {
                    bDateRangesTemp.Add(new DateRanges(ar.StartDate, ar.EndDate));
                    gapFill.Add(new DateRanges(ar.StartDate, ar.EndDate));
                }
            }

        }

    }
    return gapFill;
}

static bool AllowedToAdd(List<DateRanges> bDateRanges, DateRanges newItem)
{
    return !bDateRanges.Any(m =>
        (m.StartDate < newItem.StartDate &&
         newItem.StartDate < (m.EndDate))
        ||
        (m.StartDate < (newItem.EndDate) &&
         (newItem.EndDate) <= (m.EndDate))
        ||
        (newItem.StartDate < m.StartDate &&
         m.StartDate < (newItem.EndDate))
        ||
        (newItem.StartDate < (m.EndDate) &&
         (m.EndDate) <= (newItem.EndDate))
        );
} 
```

# magento - Magento控制器功能中的块列表作为树

> ID：15446058
> 
> 赞同：0
> 
> 时间：2013-03-16T05:50:08.277
> 
> 标签：magento

如何从特定控制器功能（例如目录-> 类别-> 视图）获取块渲染或加载的列表

我需要它来了解我将从我的 local.xml 中删除或取消设置哪个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:28:30.433

$this->loadLayout('catalog_category_view');

参考这个链接： http: [//magebase.com/magento-tutorials/digging-deeper-into-magentos-layout-xml-part-2/](http://magebase.com/magento-tutorials/digging-deeper-into-magentos-layout-xml-part-2/)

# jquery - 在页面加载时访问文本框值

> ID：15446060
> 
> 赞同：0
> 
> 时间：2013-03-16T05:50:08.857
> 
> 标签：jquery, webpage

我有一个页面，它接受参数并将它们填充到相应的输入字段中。使用这些参数，调用一个 jquery 函数来加载一些内容。现在，在 jquery 文档中，我看到“它里面的所有东西都会在加载 DOM 并且在加载页面内容之前加载。”

看来文档里面已经准备好了，我传递的 get 值是已知的。但是如果页面内容是之后加载的，是不是调用我的'loadContent'函数时文本字段中的值不会被填写？还是通过加载 DOM 已经知道？所以我下面的脚本可以正常工作，但为什么并且会一直如此？

```
<html>
<head><title></title></head>
<body>
<?php
if(isset($_GET['test'])){
    echo '<input type="text" id="test" name="test" value="' . $_GET['test'] . '">';
}else{
    echo '<input type="text" id="test" name="test">';
}
?>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
   alert($("#test").val());
   loadContent($("#test").val());
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:00:53.723

在您已经输出了相关的 HTML 部分之后，您正在调用您的脚本。我认为您甚至不需要 .ready() 函数，只需在那之后运行脚本即可。但更好的方法是

```
<script>
$(window).load( function(){
    ...
});
</script> 
```

在头标签内。

# android - Android应用程序中的谷歌地图错误

> ID：15446065
> 
> 赞同：0
> 
> 时间：2013-03-16T05:50:57.517
> 
> 标签：android, google-maps-api-2, mapactivity

我从 log cat 得到这个错误，我知道这个错误在我从谷歌搜索的内容中很常见，但我仍然无法修复它，有没有人可以帮助我？

```
03-16 01:41:45.760: D/memalloc(23825): ion: Mapped buffer base:0x54c92000 size:3768320 offset:0 fd:80
03-16 01:41:45.770: I/MapActivity(23825): Handling network change notification:CONNECTED
03-16 01:41:45.770: E/MapActivity(23825): Couldn't get connection factory client 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:42:16.223

出现此异常主要是因为缺少权限。请检查您的清单权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

并且也在谷歌库中。

```
<uses-library android:name="com.google.android.maps" /> 
```

# shell - 运行带有期望日志记录的 shell 脚本

> ID：15446079
> 
> 赞同：-1
> 
> 时间：2013-03-16T05:52:50.503
> 
> 标签：shell, expect

我已经创建了一个如下所示的 shell 脚本。该脚本将以普通用户身份登录到远程服务器，然后切换到 root 用户以创建目录。脚本如下所示。

> ssh -t qbadmin@10.3.2.0 '
> su root -c "
> echo \"给目录名:\";
> 读取目录;
> mkdir \$dir;
> ";
> '

在这里，脚本将首先询问普通用户的密码。然后它会再次询问 root 密码。如何使用`expect`命令自动执行此操作。我只想为 root 用户自动提供密码。我认为可以使用`expect`.

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:01:38.370

你为什么不`sudo`改用？`/etc/sudoers`您可以简单地在远程文件中添加“qbadmin” ：

```
qbadmin ALL=(ALL:ALL) ALL 
```

然后：

```
ssh -t qbadmin@10.3.2.0 '
echo \"Give Directory name :\";
read dir;
sudo mkdir \$dir;
' 
```

# php - 从 HTML5 多文件字段获取多个文件

> ID：15446089
> 
> 赞同：1
> 
> 时间：2013-03-16T05:54:26.990
> 
> 标签：php, html, input

如果我使用多个文件字段，则可以使用 foreach 检索这些字段。这种方法工作正常。

```
<input type="file" name="attachFile">
<input type="file" name="attachFile2">
<input type="file" name="attachFile3"> 
```

```
foreach($_FILES as $attachFile)
{
  $tmp_name = $attachFile['tmp_name'];
  $type = $attachFile['type'];
  $name = $attachFile['name'];
  $size = $attachFile['size'];
} 
```

如果我对不起作用的 HTML5 多文件字段执行相同操作。这是下面的例子，我没有运气。它也不会产生任何错误。

```
<input multiple="multiple" type="file" name="attachFile"> 
```

```
foreach($_FILES['attachFile'] as $attachFile)
{
  $tmp_name = $attachFile['tmp_name'];
  $type = $attachFile['type'];
  $name = $attachFile['name'];
  $size = $attachFile['size'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:53:10.637

像这样做。创建一个函数并首先确定附加了多少文件。使用该功能附加每个文件。

```
function reArrayFiles(&$attachFile) 
  {
        $file_ary = array();
        $file_count = count($attachFile['name']);
        $file_keys = array_keys($attachFile);
        for ($i=0; $i<$file_count; $i++) 
       {
            foreach ($file_keys as $key) 
            {
                $file_ary[$i][$key] = $attachFile[$key][$i];
            }
        }
        return $file_ary;
    }

          $file_ary = reArrayFiles($_FILES['attachFile']); 
          foreach($file_ary as $file)
          {
             $tmp_name = $file['tmp_name'];
             $type = $file['type'];
             $name = $file['name'];
             $size = $file['size'];
          } 
```

并正确使用多个文件的输入。

```
<input multiple="multiple" type="file" name="attachFile[]"> 
```

# javascript - 为什么 jquery 选择器不适用于新替换的标签？

> ID：15446093
> 
> 赞同：3
> 
> 时间：2013-03-16T05:55:15.683
> 
> 标签：javascript, jquery, html, jquery-selectors

为什么`jquery`选择器不适用于新替换的标签。

我有一个简单的脚本，当用户单击时`submitResult button`，服务器端返回一个 id="content" 的新 div，我使用 jquery`replaceWith()`替换旧的。

我注意到`id="content"`元素被替换后，下次单击 submitResult 时，它不会将数据发送到服务器端。仅供参考，这个 submitResult id 在新替换的元素内。

谁能告诉我如何刷新替换 html 标记，从而让`$("#submitResult").click(xxx)`再次工作？

谢谢

```
<html>
<head>
<script src="js/jquery/jquery-1.7.2.min.js"></script>
<script>
    function handleData(data, status) {
        $("#content").replaceWith(data);
    };

    $(document).ready(function() {
        $("#submitResult").click(function() {
            var $result = $("#result").val();
            $.get("e?result=" + $result, handleData);
        });
    });
</script>
</head>

<body>
        <div id="content">
            <div class="resultbox">
                    <input id="result" type="text" value=""></input>
                    <input id="submitResult" type="button" value="Submit"></input>
            </div>
        </div>

        <!-- other content -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T05:58:18.083

改变

```
$("#submitResult").click(function() { 
```

到

```
$(document).on("click", "#submitResult", function() { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:58:52.950

`$("#submitResult")`返回调用选择器时存在的元素。

您需要使用事件委托语法`.on()`将事件处理程序附加到固定的父元素并将其委托给子元素：

```
$('body').on('click', '#submitResult', function() {
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T06:01:12.040

使用 .on 表示 jQuery 中的动态元素

jQuery 事件仅适用于页面加载时加载的元素。

如果您想对动态出现的元素执行事件，我们需要使用`.live`或`.on`

但`.live`已弃用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T05:57:49.730

使用`on`而不是`click`.

```
$(document).ready(function() {
    $("#submitResult").on('click', function() {
        var $result = $("#result").val();
        $.get("e?result=" + $result, handleData);
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T06:07:06.767

当我们使用 ajax 返回 html 内容时，这是一个常见的情况。当 $(document).ready 时，您将处理程序绑定到旧提交按钮，但对于新返回的按钮，没有任何内容绑定到它。所以你可以在ajax返回后显式调用事件绑定js，或者只是简单地将标签放在内容div中。

这可以确保事件绑定在 ajax 返回后再次运行。

# sql - 使用 split 函数将多个值插入到一个表中。可能吗？

> ID：15446106
> 
> 赞同：1
> 
> 时间：2013-03-16T05:58:15.167
> 
> 标签：sql, sql-server

我有一列 order_id 来自 customer_order 表作为 FK，`customer_order_products`其中有 3 列：

*   `order_id`,
*   `product_id`和
*   `quantity`.

我想将它们同时插入到一个表中，这样它就会像这样向我们显示 :::

```
order_id     product_id     quantity
1              20             3
1              21             2
1              17             5 
```

这意味着客户订购了 3 种具有上述数量的不同产品，生成的 order_id 为 1。

我该如何实现这一点。plzzz 需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:30:26.790

如果我对您的理解正确，那么 plain`INSERT`在您的情况下就足够了，并且允许您用一个语句插入多行

```
INSERT INTO customer_order_products
    ([order_id], [product_id], [quantity])
VALUES
    (1, 20, 3),
    (1, 21, 2),
    (1, 17, 5); 
```

**[SQLFiddle](http://sqlfiddle.com/#!3/6d37f/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:04:37.377

```
CREATE TABLE dbo.customer_order
 (
  order_id int
  )

CREATE TABLE dbo.customer_order_products 
 (
  product_id int,
  order_id int,
  quantity int
  )  

INSERT dbo.customer_order
VALUES(1)

INSERT dbo.customer_order_products 
VALUES(20, 1, 2),
      (20, 1, 1),
      (21, 1, 1),
      (21, 1, 1),
      (17, 1, 5)

IF OBJECT_ID('tempdb.dbo.#NewTable') IS NOT NULL DROP TABLE dbo.#NewTable
SELECT c.order_id, p.product_id, SUM(quantity) AS quantity
INTO dbo.#NewTable
FROM dbo.customer_order c JOIN dbo.customer_order_products p ON c.order_id =  p.order_id
GROUP BY c.order_id, p.product_id

SELECT *
FROM dbo.#NewTable 
```

结果：

```
orde_id product_id quantity
1       17         5
1       20         3
1       21         2 
```

# clojure - 将 JMathPlot 与 Clojure 一起使用，.addLinePlot 方法给出错误

> ID：15446111
> 
> 赞同：1
> 
> 时间：2013-03-16T05:58:47.673
> 
> 标签：clojure, plot

我将 JMathPlot 与 Clojure 一起使用，如下代码所示：

```
(ns plot.core
 (:gen-class)
 (:import [org.math.plot Plot2DPanel])
 (:import [javax.swing JFrame]))

(let [plot (new Plot2DPanel)
      frame (JFrame. "plot")] 
  (doto plot
    (.addLegend "SOUTH")
    (.addLinePlot [1 2 3]  [22 33 44]))
  (doto frame 
    (.setContentPane plot)
    (.setSize 300 300)
    (.setVisible true))) 
```

但是出现“No Matching method”的错误：

```
java.lang.IllegalArgumentException: No matching method found: addLinePlot for class org.math.plot.Plot2DPanel
            Reflector.java:80 clojure.lang.Reflector.invokeMatchingMethod
            Reflector.java:28 clojure.lang.Reflector.invokeInstanceMethod
                    jmp.clj:8 plot.core/eval56
           Compiler.java:6511 clojure.lang.Compiler.eval
           Compiler.java:6952 clojure.lang.Compiler.load
             NO_SOURCE_FILE:1 user/eval48
           Compiler.java:6511 clojure.lang.Compiler.eval
           Compiler.java:6477 clojure.lang.Compiler.eval
                core.clj:2797 clojure.core/eval
                 main.clj:245 clojure.main/repl[fn]
                 main.clj:266 clojure.main/repl[fn]
                 main.clj:266 clojure.main/repl
             RestFn.java:1096 clojure.lang.RestFn.invoke
    interruptible_eval.clj:56 clojure.tools.nrepl.middleware.interruptible-eval/evaluate[fn]
                 AFn.java:159 clojure.lang.AFn.applyToHelper
                 AFn.java:151 clojure.lang.AFn.applyTo
                 core.clj:601 clojure.core/apply
                core.clj:1771 clojure.core/with-bindings*
              RestFn.java:425 clojure.lang.RestFn.invoke
    interruptible_eval.clj:41 clojure.tools.nrepl.middleware.interruptible-eval/evaluate
   interruptible_eval.clj:171 clojure.tools.nrepl.middleware.interruptible-eval/interruptible-eval[fn]
                core.clj:2278 clojure.core/comp[fn]
   interruptible_eval.clj:138 clojure.tools.nrepl.middleware.interruptible-eval/run-next[fn]
                  AFn.java:24 clojure.lang.AFn.run
             (Unknown Source) java.util.concurrent.ThreadPoolExecutor.runWorker
             (Unknown Source) java.util.concurrent.ThreadPoolExecutor$Worker.run
             (Unknown Source) java.lang.Thread.run 
```

代码基于 JMathPlot 网页中的一个示例，所以我不确定该方法是如何不存在的？问题出在 addLinePlot 中，因为我在没有这种方法的情况下运行代码并且它工作正常！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:51:25.833

`addLinePlot`方法需要数组作为其参数，而不是向量。您必须使用普通数组，如下所示：

```
(.addLinePlot plot (double-array [1 2 3]) (double-array [22 33 44])) 
```

有关 clojure 中数组的更多信息，请参见[此处](http://clojure.org/java_interop#Java%20Interop-Arrays)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:14:27.330

我发现了问题，.addLinePlot 不会接受少于 3 个参数，如他们网站中的示例

> plot.addLinePlot("我的情节", x, y);

如果“我的情节”被删除，方法将抛出如上的错误！

# python - 对两个列表进行排序——一个是列表列表

> ID：15446113
> 
> 赞同：2
> 
> 时间：2013-03-16T05:59:03.520
> 
> 标签：python, numpy

我有两个 numpy 数组。一个是 N × M，另一个是 N × 1。我希望能够按 M 维度中的任何一个对第一个列表进行排序，并且我希望列表保持相同的顺序（即，如果我交换第 1 行和第 15 行list1，我也希望 list2 的第 1 行和第 15 行交换。）

例如：

```
import numpy as np
a = np.array([[1,6],[3,4],[2,5]])
b = np.array([[.5],[.8],[.2]]) 
```

然后，我希望能够按每行的第一个元素进行排序，`a`以给出：

```
a = [[1,6],[2,5],[3,4]]
b = [[.5],[.2],[.8]] 
```

或按每行的第二个元素进行排序，`a`以给出：

```
a = [[3,4],[2,5],[1,6]]
b = [[.8],[.2],[.5] 
```

我看到很多类似的问题，其中两个列表都是一维的，例如这个[问题](https://stackoverflow.com/questions/9764298/is-it-possible-to-sort-two-listswhich-reference-each-other-in-the-exact-same-w)。或者关于排序列表的问题，例如[这个](https://stackoverflow.com/questions/3398589/sorting-a-list-of-lists-in-python)。但我找不到我要找的东西。

最终我得到了这个工作：

```
import numpy as np
a = np.array([[1,6],[3,4],[2,5]])
b = np.array([[.5],[.8],[.2]])
package = zip(a,b)
print package[0][1]
sortedpackage= sorted(package, key=lambda dim: dim[0][1])
d,e = zip(*sortedpackage)
print d
print e 
```

现在这会产生我想要的 d 和 e ：

```
 d = [[3,4],[2,5],[1,6]]
  e = [[.8],[.2],[.5] 
```

但我不明白为什么。给出 0.5 -这 `print package[0][1]`不是我排序的元素。为什么是这样？我正在做的事情健壮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:25:39.263

要将相同的排序顺序应用于多个 numpy 数组，您可以使用[`np.argsort()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html). 例如，按第二列排序：

```
indices = a[:,1].argsort()
print(a[indices])
print(b[indices]) 
```

输出：

```
[[3 4]
 [2 5]
 [1 6]]

[[ 0.8]
 [ 0.2]
 [ 0.5]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T06:27:01.350

`print package[0][1]`返回的原因`0.5`是因为它正在“作为一个整体”访问元组列表中的数字，而`sorted`正在查看给定迭代的每个单独元素。

您压缩`a`并`b`输入`package`：

```
[([1, 6], [0.5]),
 ([3, 4], [0.8]),
 ([2, 5], [0.2])] 
```

正是在这一点上，你`print package[0][1]`。第一个元素是用`package[0]`=获得的`([1, 6], [0.5])`。下一个索引`[1]`为您提供第*一个元组的**第二个元素*，因此您得到.*`0.5`*

 *考虑到`sorted`，该函数正在*单独*检查可迭代的元素。它可能首先查看`([1, 6], [0.5])`，然后查看`([3, 4], [0.8])`，依此类推。

因此，当您使用函数指定键时，`lambda`您实际上是在说，对于可迭代的这个特定元素，获取值 at `[0][1]`。也就是说，按给定元组的第一个元素的第二个值（的第二个值`a`）排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T06:26:13.307

在你的里面`package`：

`package[0]`因此`(a[0], b[0])` ，`package[0][1]`是 b[0]。

你的包是三层嵌套的。`key=lambda dim : dim[0][1]`表示您`item[0][1]`用作排序的键`package`。`package`由 组成`item`，并且`item`is 是双嵌套的。

要查看您正在排序的元素，请使用`package[x][0][1]`x 作为该项目的索引*

# ruby-on-rails - Rails - Has_many 选择了一个选项

> ID：15446114
> 
> 赞同：0
> 
> 时间：2013-03-16T05:59:26.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 应用程序可以回答一些调查问题。这是一个关于选择权衡的实验，对于每个问题，许多答案都是动态生成的。因此，我不仅需要记录为每个问题选择了哪个答案，还需要记录提供给用户的每个选项是什么。

所以，我的模型是

```
class Survey < ActiveRecord::Base
  belongs_to :user
  has_many :questions
end

class Question < ActiveRecord::Base
  belongs_to :survey
  has_many :possible_answers
end

class PossibleAnswer < ActiveRecord::Base
  belongs_to :question
end 
```

从这里开始，跟踪选择了哪个 PossibleAnswer 的最佳实践是什么？以及带有 PossibleAnswer 模型的指标，然后是验证逻辑来​​检查是否只选择了一个？或者我应该重新定义我的问题中的关系，以便我`have_many`RejectedAnswers 和`have_one`AcceptedAnswer？

我知道有多种方法可以做到这一点，但我试图了解哪个选项通常被认为是最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:10:16.913

我会将accepted_answer_id 添加到问题并让它指向可能的答案。

# yii - 对于 yii xupload 扩展

> ID：15446119
> 
> 赞同：1
> 
> 时间：2013-03-16T05:59:39.970
> 
> 标签：yii, yii-xupload

我想在 xupload 扩展中使用多个属性

我的代码：-

```
Yii::import("xupload.models.XUploadForm"); 

  $this->widget( 'xupload.XUpload', array(
            'id'=>'uploadwidget',
            'url' => Yii::app( )->createUrl("$mo"),
            'model' => $photo,
            'htmlOptions' => array('id'=>'testmagazines-form'),
            'attribute' => 'file',
            'multiple' => true,
            'options'=>array(
                              'maxNumberOfFiles'=>3,
                              'maxFileSize'=>"js:$('#filesize').val()",
                              'acceptFileTypes'=>"js:/(\.|\/)(jpeg)$/i",

                              'completed' =>"js:function(id, fileName, responseJSON){
                                var value = $('#number').val();
                                var value1 =  parseInt(value) + parseInt(1);
                                $('#number').val(value1);       
                                jQuery(document).trigger('close.facebox');
                                }",
                                'success'=>"js:function(res){ 
                                 var b = $('#number').val();
                                if(b=='1'){ 
                                $('#filesize').val('104857600');

                                }else if(b=='2'){
                                $('#filesize').val('104857600');
                                }else if (b==3){
                                $('#filesize').val('10*1024*1024');
                                }
                                    alert(res[0].mode);
                                }",
                              'messages'=>array(
                                        'typeError'=>"{file} has invalid extension. Only {extensions} are allowed.",
                                        'sizeError'=>"{file} is too large, maximum file size is {sizeLimit}.",
                                        'minSizeError'=>"{file} is too small, minimum file size is {minSizeLimit}.",
                                        'emptyError'=>"{file} is empty, please select files again without it.",
                                        'onLeave'=>"The files are being uploaded, if you leave now the upload will be cancelled."
                                                ),
                                        'showMessage'=>"js:function(message){ alert(message); }"
                                        ),
            )    
        ); 
```

在这个我想每个上传文件的exe。可能有所不同，所以我如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:37:46.940

```
i got a answer for it:- 
```

我可以上传具有多种接受文件类型和大小的多种类型的图像：

解决方案：-

`jquery.fileupload-ui.js`在扩展文件夹中找到一个：-

然后在这个js中添加一个参数。

示例：- pqueryid：未定义，

```
 pqueryid1 : undefined,

        lqueryid : undefined,

        lqueryid1 : undefined,

        queryid : undefined,

        queryid1 : undefined, 
```

我在运行时需要的所有属性。所以在选项参数中输入一个值。

```
 add: function (e, data) {
                var that = $(this).data('fileupload'),
                    options = that.options,
                    files = data.files;

                $(this).fileupload('process', data).done(function () {
                    that._adjustMaxNumberOfFiles(-files.length);

             if(counter==2)
                {
                var dataurl ='/project/client/magazinecms/admin/index.php?r=testMagazines/uploadnew&imagename=dev_cert_path&id='+that.options.queryid1+'&queryid='+that.options.queryid+'&m=testMagazines' 
                that.options.url = dataurl;
                that.options.acceptFileTypes =/(\.|\/)(pem)$/i;
                counter--;
                 }else if(counter==1)
                {
                var dataurl ='/project/client/magazinecms/admin/index.php?r=testMagazines/uploadnew&imagename=prod_cert_path&id='+that.options.pqueryid1+'&queryid='+that.options.pqueryid+'&m=testMagazines'
                that.options.url = dataurl;
                that.options.acceptFileTypes =/(\.|\/)(pem)$/i;
                counter--;
                }else{
                var dataurl ='/project/client/magazinecms/admin/index.php?r=testMagazines/uploadnew&imagename=logo_path&id='+that.options.lqueryid1+'&queryid='+that.options.lqueryid+'&m=testMagazines'
                that.options.url = dataurl;
                that.options.acceptFileTypes =/(\.|\/)(jpeg|jpg|png)$/i;
                counter--;
                }

                    data.isAdjusted = true;
                    data.files.valid = data.isValidated = that._validate(files);
                    data.context = that._renderUpload(files).data('data', data);
                    options.filesContainer[
                        options.prependFiles ? 'prepend' : 'append'
                    ](data.context);
                    that._renderPreviews(files, data.context);
                    that._forceReflow(data.context);
                    that._transition(data.context).done(
                        function () {
                            if ((that._trigger('added', e, data) !== false) &&
                                    (options.autoUpload || data.autoUpload) &&
                                    data.autoUpload !== false && data.isValidated) {
                                data.submit();
                            }
                        }
                    );
                });
            } 
```

并在任何需要的地方制作功能。管理它。

# javascript - 将变量传递给javascript方法

> ID：15446120
> 
> 赞同：0
> 
> 时间：2013-03-16T05:59:57.360
> 
> 标签：javascript, variables, object, methods

我无法将值传递给对象的方法。当我调用它时，我希望能够将变量传递给对象方法，但是我似乎无法弄清楚这是如何完成的。

注意：我需要通过引用传递这些值，但是我使用字符串来保持示例简单，在我的实际代码中我传递对象。

```
function makeObject(){
    var object = [ ];
    object.parameter1 = 0;
    object.parameter2 = "text";
    object.method = function (var1, var2){
        console.log(var1+" "+var2);
    }
    return object;
}

var myObject = makeObject(); 
```

这就是我期望它的工作方式

`myObject.method("hello", "world"); //console returns "undefined undefined"`

我后来读到绑定可能是答案，但这似乎不起作用

`myObject.method.bind("hello", "world"); //console returns "undefined undefined"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:03:17.537

您的方法是定义一个数组`[]`，而不是一个对象`{}`。虽然您*应该*能够很好地将方法放入数组中，但我认为您正在寻找这样的东西

```
function makeObject(){
    var obj = { }; //an object literal
    obj.parameter1 = 0;
    obj.parameter2 = "text";
    obj.method = function (var1, var2){
        console.log(var1+" "+var2);
    }
    return obj;
} 
```

另请注意，您可以内联返回​​整个对象：

```
function makeObject(){
    return {
      parameter1: 0,
      parameter2: "text",
      method: function (var1, var2){
        console.log(var1+" "+var2);
      }
   };
} 
```

这是一个[演示](http://jsfiddle.net/GD4HE/)

* * *

此外，对于您问题的第二部分，`bind`用于*预先设置*函数的 this 值，以及 curry 参数。这是人为的，但例如：

```
var sayIt = function(y){
    this.say(y);
};

var obj = { 
   say: function(val){ console.log(val); } 
};
var sayThat = sayIt.bind(obj, "that");
sayThat();

//logs that to console. 
```

[演示](http://jsfiddle.net/JvyKs/)

# python - 金字塔框架中postgresql序列主键的sqlalchemy参数

> ID：15446121
> 
> 赞同：0
> 
> 时间：2013-03-16T06:00:09.387
> 
> 标签：python, postgresql, sqlalchemy, pyramid

我找到了相关的问题，但无法根据我的情况进行调整。[这里和](https://stackoverflow.com/questions/15439514/sqlalchemy-and-auto-increments-with-postgresql)[这里](http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sequences-serial)的 postgresql 文档。

我正在使用 sqlalchemy 与金字塔（python）框架（OS Ubuntu）中的 postgresql 数据库进行交互。

我的架构在`models.py`文件中进行了描述。

我正在尝试将记录插入到我的`views.py`：

```
cam_event = Event(key,'fileprefix',now,'CAM',outfile,
                  'new fake project','new fake memo') 
```

我想在我的 add 命令中提交 null、none 或将位置留空（上面行中的“键”位置），以便 posgresql 将其填充。当我执行任何这些操作时，我都会收到“编程错误” "来自金字塔后端位之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:56:31.190

知道了。我曾尝试在创建对象时不指定 primary_key 列，但这不适用于先前工作表中已存在非序号的现有数据库。我删除了表并让 sqlalchemy 重新创建它，并且从未为 primary_key 字段提供值，只是指定了序列并让 postgresql 处理编号。

# xml - 更改 XML 文件 Matlab 中的值

> ID：15446122
> 
> 赞同：2
> 
> 时间：2013-03-16T06:00:11.233
> 
> 标签：xml, matlab

这是我的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<XMLConverter> 
<Positions> 
   <Side0 Chemin="face.jpg"/>
   <Side1 Chemin="droite1.jpg"/>
   <Side2 Chemin=""/> 
   <Side3 Chemin=""/> 
   <Side4 Chemin="dos.jpg"> 
       <Dos28 PositionY="0.906845" PositionX="0.602489" Nom="Dos28" NoSelect="0"/>
       <Dos29 PositionY="0.910139" PositionX="0.570278" Nom="Dos29" NoSelect="0"/> 
       <Dos26 PositionY="0.93869" PositionX="0.601025" Nom="Dos26" NoSelect="0"/> 
   </Side4> 
   <Side5 Chemin="gauche1.jpg"/> 
   <Side6 Chemin="gauche2.jpg"/> 
   <Side7 Chemin=""/> 
</Positions> 
<Marqueurs>
<Angles>
<Distances>
</XMLConverter> 
```

我想更改 Dos28 中 PositionY 的值。

我试过这个：

```
r=num2str(25);
xDoc=xmlread(fullfile(('test pour zones.xml')));
allListItems=xDoc.getElementsByTagName('Side4');
allListItems=allListItems.item(0);
thisListItem=allListItems.getElementsByTagName('Dos28');
thisListItem.setAttribute('PositionY','25');
xmlwrite('test pour zones2.xml',xDoc); 
```

我在 Matlab 中有一个错误：？？？类 org.apache.xerces.dom.DeepNodeListImpl 没有合适的方法、属性或字段 setAttribute。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:02:39.763

即使 matlab 只找到元素名称为“Dos28”的单个元素，它仍然返回一个列表。您仍然需要从列表中获取第一项。

```
thisListItem=allListItems.getElementsByTagName('Dos28');
thisListItem=thisListItem.item(0);
thisListItem.setAttribute('PositionY','25'); 
```

# java - 使用 onResume/onStop 作为首选项（设置）

> ID：15446124
> 
> 赞同：1
> 
> 时间：2013-03-16T06:00:16.557
> 
> 标签：java, android, menu, preferences

几天前开始使用Android，我有点菜鸟。我得到了一个带有重量、宽度值的 MainActivity。这些值可以是英寸-磅或厘米-千克。

我如何更改这些值？从设置中，我创建了一个带有 ListPreference 的简单菜单。在选择这两种措施中的一个时，我需要使用新值更新我的主动。为什么？我得到了以下

文本视图：文本编辑

重量（公斤）

[ ***_* __ *_* __ *_* ___** ]

宽度（厘米）

[ ***_* __ *_* __ *_* ___** ]

括号之间的那些文本我希望在设置菜单中选择后对它们进行动态更改。

这是我的代码的一部分：

> MainActivity 从 prefs.xml 获取首选项

```
 @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initializeAttributes();

        SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(this);
        String measures = getPrefs.getString("MEASURE_KEY", "Inches-Pounds");

        String[] splitMeasure = measures.split("\\-");
        measureWeight.setText(measureWeight.getText() + " ( " + splitMeasure[1] + " )");
        measureHeight.setText(measureHeight.getText() + " ( " + splitMeasure[0] + " )"); 
```

> 这是带有菜单的 prefs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory                 
        android:title="@string/cat_language">   
        <ListPreference                    
            android:title="@string/title_language"            
            android:summary="@string/sum_language"    
            android:key="LANGUAGE_KEY"                         
            android:entries="@array/languages"            
            android:entryValues="@array/languages" 
            android:defaultValue="English"/>   
    </PreferenceCategory>      

    <PreferenceCategory             
        android:title="@string/cat_usage">   
        <ListPreference                    
            android:title="@string/title_measure"            
            android:summary="@string/sum_measure"    
            android:key="MEASURE_KEY"                    
            android:entries="@array/measures"            
            android:entryValues="@array/measures" 
            android:defaultValue="Inches-Pounds"/>  
    </PreferenceCategory>     

    <PreferenceCategory             
            android:title="@string/cat_help">   
        <Preference               
            android:title="@string/title_howto"  
            android:summary="@string/sum_howto"   
            android:key="HOWTO_KEY" />
        <Preference               
            android:title="@string/title_about"  
            android:summary="@string/sum_about"   
            android:key="ABOUT_KEY" />
    </PreferenceCategory>
</PreferenceScreen> 
```

我什至尝试使用 commit() 但也无法使其工作。

在尝试使用 onResume() 之后，我得到的结果是“很好”，除了每​​次我从设置中更改它时它都会给我添加一个（度量），例如：

重量（公斤）（磅）（公斤）（磅）等等。

谁能帮助我在这种情况下如何使用 onResume 方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:11:47.870

在 ListPreference 中将 android:entryValues 更改为 android:entryValues="@array/measuresValues"

您的条目数组应如下所示

```
<string-array name="measures">
    <item>Inches-Pounds</item>
    <item>Cm-Kilograms</item>
</string-array> 
```

和你的 entryValues 数组

```
<string-array name="measuresValues">
    <item>"Inches-Pounds"</item>
    <item>"Cm-Kilograms"</item>
</string-array> 
```

然后把这个放在活动 onResume()

```
SharedPreferences mysettings = PreferenceManager.getDefaultSharedPreferences(this);
String st1 = mysettings.getString("MEASURE_KEY", "default Value here");

if(st1.equals("Inches-Pounds")){ 
    //do some stuff here
    //like textview.setText.....
}
if(st1.equals("Cm-Kilograms")){ 
    //do some stuff here
} 
```

# android - 使用自定义适配器的 ListView 不显示任何内容

> ID：15446125
> 
> 赞同：0
> 
> 时间：2013-03-16T06:00:20.853
> 
> 标签：android, listview, adapter

我有 SQLite DB，我正在尝试在 listView 中显示查询值。我按照[本](http://androidtuts4u.blogspot.com/2013/02/android-list-view-using-custom-adapter.html)教程为 listView 创建了一个自定义适配器。也用[这个](https://stackoverflow.com/questions/8368373/android-baseadapter-not-showing-elements)问题作为参考。

* * *

我无法看到我的 listView 上显示的任何数据。

自定义 listView 行应该有 3 个项目 - 描述、日期和金额（在[此](https://gist.github.com/bharatkrishna/5175158)xml 中定义的视图）。这些值是从数据库中获取的。从 db 获取看起来不错。

我的自定义适配器代码：

```
public class TransactionListAdapter extends BaseAdapter {
    Context context;
    ArrayList<TransactionItem> transactionList; 
    // Code for TransactionItem class : https://gist.github.com/bharatkrishna/5175105

    public TransactionListAdapter(Context context, ArrayList<TransactionItem> list) {

        this.context = context;
        transactionList = list;
    }

    @Override
    public int getCount() {
        return transactionList.size();
    }

    @Override
    public Object getItem(int position) {
        return transactionList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d("adpater", "I am in adapter"); // Doesn't seem to get to this point as I don't see the log message
        View element;
        TransactionItem transactionItem = transactionList.get(position);        
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            element = inflater.inflate(R.layout.row_entry, null);

         } else {
             element = convertView;
         }
        // Code of XML file with these widgets defined: https://gist.github.com/bharatkrishna/5175158
        TextView descTextView = (TextView) convertView.findViewById(R.id.descText_Report);
        descTextView.setText(transactionItem.getDescription());

        TextView dateTextView = (TextView) convertView.findViewById(R.id.dateText_Report);
        dateTextView.setText(transactionItem.getDate());

        TextView amountTextView = (TextView) convertView.findViewById(R.id.amountText_Report);
        amountTextView.setText(Float.toString(transactionItem.getAmount()));        

        return convertView;
    }

} 
```

我在我的活动中使用这个适配器如下：

```
public class ReportsActivity extends Activity {
ListView listView;  
private DatabaseHelper db;
private Cursor transactions;
...
...
private void showList() {
    ArrayList<TransactionItem> transactionList = new ArrayList<TransactionItem>();
    db = new DatabaseHelper(this);          
    transactions = db.getTransaction();

    // This successfully dumps the db contents to log output. Querying from DB seems to be working fine.    
    Log.d("db", DatabaseUtils.dumpCursorToString(transactions)); 

        if (transactions != null && transactions.getCount() != 0) {
            do {
                TransactionItem transactionItem = new TransactionItem();

                transactionItem.setDescription(transactions.getString(transactions.getColumnIndex("description")));

                transactionItem.setDate(transactions.getString(transactions.getColumnIndex("date")));

                transactionItem.setAmount(transactions.getFloat(transactions.getColumnIndex("amount")));
            } while (transactions.moveToNext());
    }           
        TransactionListAdapter transactionListAdapter = new TransactionListAdapter(ReportsActivity.this, transactionList);
        listView.setAdapter(transactionListAdapter); //listView is defined in onCreate() method
  }
} 
```

我哪里错了。

谢谢。

* * *

**编辑**：更改了 TransactionListAdapter 的 getView() 方法的代码，摆脱了 else 情况。我正在更改代码并在此处粘贴了错误代码。这是@James Baca 发现的。我现在有：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TransactionItem transactionListItems = transactionList.get(position);
    Log.d("adpater", "I am in adapter");
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.row_entry, null);

    }       

    TextView descTextView = (TextView) convertView.findViewById(R.id.descText_Report);
    descTextView.setText(transactionListItems.getDescription());

    TextView dateTextView = (TextView) convertView.findViewById(R.id.dateText_Report);
    dateTextView.setText(transactionListItems.getDate());

    TextView amountTextView = (TextView) convertView.findViewById(R.id.amountText_Report);
    amountTextView.setText(Float.toString(transactionListItems.getAmount()));       

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:44:20.453

试试这个

**您尚未将交易对象设置为列表**，因此您的列表为空

添加这个

```
transactionList.add(transactionItem); 
```

`showList()`在你的方法的while循环中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T07:44:38.393

我认为你应该将 convertview 替换为 element ..like this

```
 TextView descTextView = (TextView) element.findViewById(R.id.descText_Report);
    descTextView.setText(transactionItem.getDescription());

    TextView dateTextView = (TextView) element.findViewById(R.id.dateText_Report);
    dateTextView.setText(transactionItem.getDate());

    TextView amountTextView = (TextView) element.findViewById(R.id.amountText_Report);
    amountTextView.setText(Float.toString(transactionItem.getAmount())); 

    return element; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T06:31:34.890

当 convertView 为 null 时，你有一个 convertView.findViewById() 错误，这可能并且将会失败。这将在第一次使用适配器并且最初没有传入 convertView 时发生。

我建议：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Log.d("adpater", "I am in adapter"); // Doesn't seem to get to this point as I don't see the log message

    TransactionItem transactionItem = transactionList.get(position);        
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.row_entry, null);

     } 
    // Code of XML file with these widgets defined: https://gist.github.com/bharatkrishna/5175158
    TextView descTextView = (TextView) convertView.findViewById(R.id.descText_Report);
    descTextView.setText(transactionItem.getDescription());

    TextView dateTextView = (TextView) convertView.findViewById(R.id.dateText_Report);
    dateTextView.setText(transactionItem.getDate());

    TextView amountTextView = (TextView) convertView.findViewById(R.id.amountText_Report);
    amountTextView.setText(Float.toString(transactionItem.getAmount()));        

    return convertView;
} 
```

# javascript - Django request.user 无法解析 SimpleLazyObject

> ID：15446126
> 
> 赞同：1
> 
> 时间：2013-03-16T06:00:24.880
> 
> 标签：javascript, python, ajax, django, django-views

我的 Django 应用程序中有一个使用用户 ID 查找对象的方法。此方法通过 AJAX 调用调用。当登录到有效的用户帐户时，无论我尝试什么，都会`request.user`评估为一个`django.utils.functional.SimpleLazyObject`对象并且无法检索到我想要的数据（*SkillEntry 匹配查询*绝对存在时不存在）。我在 Django 中尝试了解决方案[：按用户过滤草稿导致错误](https://stackoverflow.com/questions/11875737/django-filtering-drafts-by-user-causes-error/11876015#11876015)无济于事。

如何让用户引用用户对象的实际实例？

查看代码：

```
@login_required
def skill_set(request, name):
    skill = Skill.objects.get(slug=name) # Found.
    level = 0
    user = request.user
    if request.method == 'POST':
        if user.is_authenticated():
            entry = SkillEntry.objects.get(user=user.pk, skill=skill) # Not found.
            entry.level = request.POST['level']
            entry.save()
            return HttpResponse(status=200)
    else:
        return HttpResponseForbidden() 
```

JavaScript 客户端代码：

```
function setSkill(skill, value) {
  var req = new XMLHttpRequest();
  req.open("POST", "/skill/" + skill + "/set/", true);
  csrftoken = getCookie('csrftoken');
  req.setRequestHeader("X-CSRFToken", csrftoken);
  req.send('level=' + value);
  var elem = document.getElementById('level');
  elem.innerHTML = "My skill level is " + value + ".";
} 
```

也许我需要在请求中设置一些东西来维护会话信息？我可以发誓我以前在更早版本的 Django 上成功地做过类似的事情。我正在使用 1.4.3。

编辑：

以下是我的 models.py 中的模型定义：

```
class Skill(models.Model):
    name = models.CharField(max_length=100)
    slug = models.CharField(max_length=100, blank=True)
    keywords = models.CharField(max_length=120, blank=True, help_text='List of additional keywords this skill should show up for in search')
    description = models.TextField(null=True, blank=True)
    parent = models.ForeignKey('Skill', null=True, blank=True, help_text='Parent skill.  Leave blank if this is a root category.')

    def save(self, *args, **kwargs):
        if not self.id:
            self.slug = slugify(self.name)
        super(Skill, self).save(*args, **kwargs)

    def __unicode__(self):
        return self.name

    class Meta:
        ordering = ('name',)

class SkillEntry(models.Model):
    skill = models.ForeignKey('Skill')
    level = models.IntegerField()
    user = models.ForeignKey(User)
    last_updated = models.DateField(auto_now=True)

    class Meta:
        verbose_name_plural = 'Skill Entries'
        ordering = ('skill__name',)

    def __unicode__(self):
        return self.user.username + ' knows ' + self.skill.name + ' at level ' + str(self.level) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:11:12.350

正如rohan所说，你不需要使用`user.pk`

更改此查询

```
entry = SkillEntry.objects.get(user=user.pk, skill=skill) 
```

到

```
 entry = SkillEntry.objects.get(user=user, skill=skill) 
```

如果它不起作用，请分享您的 models.py

# mongodb - Grails Mongodb find 不适用于点表示法、动态属性

> ID：15446128
> 
> 赞同：0
> 
> 时间：2013-03-16T06:00:52.303
> 
> 标签：mongodb, grails

我在返回预期结果的 Grails 控制器中有以下代码：

```
def alm = SiteHistory.collection.find([
   "phoneNumber":"${params.phoneNumber}",
   "fields.P2Running":true])
   .limit(20).toArray() 
```

但是，我想根据输入参数修改搜索。当 params.alarm == "P2Running" 时，以下查询不返回任何文档

```
def fieldsSelect = "fields."+params.alarm
def alm = SiteHistory.collection.find([
   "phoneNumber":"${params.phoneNumber}",
   fieldSelect:true])
   .limit(20).toArray() 
```

我也试过：

```
def fieldsSelect = "fields."+params.alarm
def alm = SiteHistory.collection.find([
   "phoneNumber":"${params.phoneNumber}",
   "${fieldSelect}":true])
   .limit(20).toArray() 
```

产生

```
Message: org.codehaus.groovy.runtime.GStringImpl cannot be cast to java.lang.String
    at org.bson.BasicBSONEncoder.putObject(BasicBSONEncoder.java:134)
    at org.bson.BasicBSONEncoder.putObject(BasicBSONEncoder.java:86)
    at com.mongodb.DefaultDBEncoder.writeObject(DefaultDBEncoder.java:27)
    at com.mongodb.OutMessage.putObject(OutMessage.java:142)
    at com.mongodb.OutMessage._appendQuery(OutMessage.java:85)
    at com.mongodb.OutMessage.query(OutMessage.java:44)
    at com.mongodb.OutMessage.query(OutMessage.java:38)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:303)
    at com.mongodb.DBCursor._check(DBCursor.java:369)
    at com.mongodb.DBCursor._hasNext(DBCursor.java:498)
    at com.mongodb.DBCursor._fill(DBCursor.java:558)
    at com.mongodb.DBCursor.toArray(DBCursor.java:596)
    at com.mongodb.DBCursor.toArray(DBCursor.java:584)
    at remote.SiteHistoryController$_closure2$$EO0HJb0Z.doCall(SiteHistoryController.groovy:58)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我的域对象是

```
class SiteHistory {
    ObjectId id
    String phoneNumber
    Date receiveDate=null
    Map<String,Object> fields = [:]
    static mapWith = "mongo"
} 
```

在添加数据之前，不会知道字段中的字符串键。

一个示例文档是：

```
{
    "_id" : ObjectId("513eaefe290b3700b8e2c966"),
    "phoneNumber" : "1234567890",
    "receiveDate" : "Wed Mar 06 2013 23:52:47 GMT-0500 (EST)",
    "fields" : {
            "P1Runtime" : 37.6,
            "P1Starts" : 23,
            "P1Running" : false,
            "P2Runtime" : 35.7,
            "P2Starts" : 25,
            "P2Running" : true,
            "WetWellLvl" : 10,
            "HighLvlAlarm" : false
    }
} 
```

任何想法为什么从参数创建的字符串不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:54:21.593

以下是适用于 Grails 2.0.1 和 Mongodb 1.0.0.RC4 的代码：

```
def query = new BasicDBObject("phoneNumber", params.phoneNumber)
    .append("fields.${params.alarm}", true)

def alm = SiteHistory.collection.find(query).limit(20).toArray() 
```

我没有尝试使用标准，因为我在某处读到它们不适用于 mongodb 对象。但是，我确实有在此对象上工作的命名查询。所以我尝试了一个标准并且它有效！（注意：它适用于 Grails 2.2.1 和 mongodb 1.2.0。）

这是代码：

```
def c = SiteHistory.createCriteria()
def alm = c.list (max:20, offset:0) {
    eq ("phoneNumber", params.phoneNumber)
    eq ("fields.${params.alarm}", true)
} 
```

我在使用 Grails 2.2.1 时遇到了其他问题，所以我不会升级。

# mongodb - MongoDB 随机慢查询 - EC2 IOPS

> ID：15446132
> 
> 赞同：2
> 
> 时间：2013-03-16T06:01:05.740
> 
> 标签：mongodb, amazon-ec2

我`mongodb`在实例（7GB RAM）上安装了（版本：2.0.8）`EC2`，数据大小仍然小于`1GB`. 我正在使用预配`100 IOPS`磁盘来提高磁盘性能。

问题是，我得到了一些随机慢查询，如下所示，（来自 mongo 日志）

> db.UserInfoShared 查询：{ _id:“999081873179”} ntoreturn:1 idhack:1 reslen:108 1919ms

拿了差不多`2 secs`！

它只是`_id`对一个集合的查找，其中`100,000`每个条目的大小都小于`500 bytes`。该实例仅在其中运行 mongo，通常此类查找所需的时间少于`0.01 sec`.

这可能是什么原因？我应该怎么解决？任何帮助深表感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:41:51.993

@angela，@Asya，非常感谢您帮助我。

事实证明，延迟的主要原因是 mongodb`GLOBAL LOCK`本身。我们的锁定百分比平均为 5%，有时会达到 30-50% 的峰值，这会导致查询缓慢。

如果您遇到此问题，首先必须启用 mongodb MMS 服务 ( `mms.10gen.com`)，这将使您深入了解数据库服务器中到底发生了什么。

在我们的案例中，LOCK PERCENTAGE 非常高，原因有很多。你要做的第一件事是阅读关于并发的 mongodb 文档， [http://docs.mongodb.org/manual/faq/concurrency/](http://docs.mongodb.org/manual/faq/concurrency/)

锁的原因可能在应用程序级别，mongodb 或硬件。

1）我们的应用程序做了很多，`updates`每次更新（超过`100 ops/sec`）`global lock`在 mongodb 中都有一个。问题是，当一个不在内存中的条目发生更新时，mongo 必须先将数据加载到内存中，然后更新（在内存中），整个过程发生在`global lock`. 如果说整个事情需要 1 秒才能完成（`0.75sec`从磁盘加载数据并`0.25sec`在内存中更新），那么整个其余的更新调用都会等待（对于整个`1 sec`），并且这样的更新开始排队......你会注意到越来越多的应用程序服务器中的请求变慢。

它的解决方案（虽然听起来可能很傻）是`query`在制作`update`. 它的有效作用是将“加载数据到内存”（0.75 秒）部分移出，`global lock`这大大减少了您的`lock percentage`

2）全局锁的另一个主要原因是mongodb的数据`flush`到磁盘。基本上每 60 秒（或更少）mongodb（或操作系统）将数据写入磁盘，并`global lock`在此过程中保存 a。（这有点解释了随机慢查询）。在您的 MMS 统计信息中，请参阅图表`background flush avg`……如果它很高，则意味着您必须获得更快的磁盘。

在我们的案例中，我们迁移到一个新`EBS optimized`实例，`EC2`并将我们的配置`IOPS`从几乎减半`100`，服务器现在更加快乐。`500``background flush avg`

# blackberry - 带有 ObjectListField 的复选框不可聚焦和可检查？

> ID：15446142
> 
> 赞同：0
> 
> 时间：2013-03-16T06:03:05.953
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

我正在尝试创建一个复选框，并且在此对象列表下方。我试图专注于复选框，但它既不可聚焦也不可检查。焦点位于下面列表的第一个元素上。

我如何才能关注复选框并使其可选中？在这里，复选框位于我添加列表的 VerticalFieldManager 中。

![在此处输入图像描述](../Images/15ae18affff88abe2ed6b92a0f7c3583.png)

这里我要添加两件事：一个是水平字段管理器（onlineCheckBoxHfm），另一个是 objectListField（buddyList）。

现在的问题是，默认焦点在列表的第一个元素上，我无法将焦点放在放置 CheckBox 的 Horizo​​ntalFieldManager 上。由于Horizo​​ntalFieldManager 上没有焦点，所以我无法检查复选框。

```
public class BuddyMenuItem extends VerticalFieldManager implements FieldChangeListener{   

 public BuddyMenuItem(BuddyListField buddyList) {

        _bitmap = EncodedImage.
        getEncodedImageResource("buddies_header.png");
        mainMenuBmp = new BitmapField(Constant.sizePic(_bitmap, _bitmap.getHeight(), Display.getWidth()));

        HorizontalFieldManager onlineCheckBoxHfm=new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH);
        _onlineCheckBox=new CheckboxField("Online",false,CheckboxField.FIELD_LEFT|CheckboxField.FOCUSABLE);
        _onlineCheckBox.setChangeListener(this);

        onlineCheckBoxHfm.add(_onlineCheckBox);
        onlineCheckBoxHfm.add(new NullField(NullField.FOCUSABLE));
//      add(mainMenuBmp);
        add(onlineCheckBoxHfm);
        add(buddyList);
    } 
```

BuddyListField 类如下：

```
import java.util.Vector;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Keypad;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.Touchscreen;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ObjectListField;

import com.np.naijapings.Buddy;
import com.np.naijapings.NaijapingsMain;

public class BuddyListField extends ObjectListField {
    public static final Bitmap offlineIcon = Bitmap.getBitmapResource("offline.png");
    public static final Bitmap awayIcon = Bitmap.getBitmapResource("away.png");
    public static final Bitmap busyIcon = Bitmap.getBitmapResource("busy.png");
    public static final Bitmap onlineIcon = Bitmap.getBitmapResource("online.png");
    public static final Bitmap unreadIcon = Bitmap.getBitmapResource("unread.png");
    public static final Bitmap maleIcon=Bitmap.getBitmapResource("male.png");

    public static final Bitmap[] statusIcon = new Bitmap[]{offlineIcon, awayIcon, busyIcon, onlineIcon};

    public static Vector buddyVector;
    public static int onlineBuddyCount=0;
    private final NPingsMain nPings;
    public static boolean showOnlineBuddy=false;

    private Bitmap _chatBmp=Bitmap.getBitmapResource("chat.png");

    public BuddyListField(NPingsMain n,boolean showOnlineBuddy) {
        nPings = n;
        buddyVector = new Vector();
        this.showOnlineBuddy=showOnlineBuddy;
    }

    public Buddy getBuddyAt(int index) {
        return (Buddy)buddyVector.elementAt(index);     
    }

    protected boolean keyChar(char key, int status, int time) {
        int idx;
        switch(key) {
        case Keypad.KEY_ENTER:
            idx = this.getSelectedIndex();
            if (idx >= 0) {
                NPingsMain.currentBuddy = (Buddy)buddyVector.elementAt(idx);
                NPingsMain.openBuddy(NPingsMain.currentBuddy);
            }
            return true;

        case 'e':
            idx = this.getSelectedIndex()-1;
            if (idx >= 0) {
                this.setSelectedIndex(idx);
            }
            return true;

        case 's':
            return true;

        case 'f':
            return true;

        case 'x':
            idx = this.getSelectedIndex()+1;
            if (idx > 0 && idx < this.getSize()) {
                this.setSelectedIndex(idx);
            }
            return true;

        case 't':
            if (this.getSize() > 0) {
                this.setSelectedIndex(0);
            }
            return true;
        }

        return false;
    }
    protected boolean navigationClick(int status, int time) {
        int idx = this.getSelectedIndex();
        if(Touchscreen.isSupported()){
            if (idx >= 0) {
                nPings.currentBuddy = (Buddy)buddyVector.elementAt(idx);
                if((nPings.currentBuddy.status==0x00000003)||(nPings.currentBuddy.status==0x00000002)||(nPings.currentBuddy.status==0x00000001)){
                    NPingsMain.openBuddy(nPings.currentBuddy);
                }
            }
            return false;
        }else{

            if (idx >= 0) {
                nPings.currentBuddy = (Buddy)buddyVector.elementAt(idx);
                if((nPings.currentBuddy.status==0x00000003)||(nPings.currentBuddy.status==0x00000002)||(nPings.currentBuddy.status==0x00000001)){
                    NPingsMain.openBuddy(nPings.currentBuddy);
                }
            }
            return false;
        }
    }
    protected boolean touchEvent(TouchEvent message) {
        //if(message.getEvent()==TouchEvent.CLICK){
            int idx;
            switch(TouchEvent.CLICK) {
            case TouchEvent.CLICK:
                idx = this.getSelectedIndex();
                if (idx >= 0) {
                    nPings.currentBuddy = (Buddy)buddyVector.elementAt(idx);
                    if((nPings.currentBuddy.status==0x00000003)||(nPings.currentBuddy.status==0x00000002)||(nPings.currentBuddy.status==0x00000001)){
                        NPingsMain.openBuddy(nPings.currentBuddy);
                    }
                }
                return true;

            case 'e':
                idx = this.getSelectedIndex()-1;
                if (idx >= 0) {
                    this.setSelectedIndex(idx);
                }
                return true;

            case 's':
                return true;

            case 'f':
                return true;

            case 'x':
                idx = this.getSelectedIndex()+1;
                if (idx > 0 && idx < this.getSize()) {
                    this.setSelectedIndex(idx);
                }
                return true;

            case 't':
                if (this.getSize() > 0) {
                    this.setSelectedIndex(0);
                }
                return true;
            }

        //  return false;

    //  }
        return super.touchEvent(message);
    }

    public void buddyReposition(Buddy b) {
        int index = buddyVector.indexOf(b);
        buddyReposition(index);
    }

    public void buddyReposition(int oldIndex) {
        Buddy b = (Buddy)buddyVector.elementAt(oldIndex);
        int newIndex = 0;

        if (b.unread) {
            newIndex = 0;
        } else {
            while (newIndex < buddyVector.size() &&
                    ((b == (Buddy)buddyVector.elementAt(newIndex)) || 
                            ((Buddy)buddyVector.elementAt(newIndex)).unread || 
                            (b.status < ((Buddy)buddyVector.elementAt(newIndex)).status)))
                ++newIndex;
        }

        newIndex = (oldIndex < newIndex) ? (newIndex-1) : newIndex;

        if (oldIndex != newIndex) {
            buddyVector.removeElementAt(oldIndex);
            buddyVector.insertElementAt(b, newIndex);
        }

        this.invalidate();
    }

    public int findBuddyIndex(String jid) {
        for (int i = buddyVector.size()-1; i >= 0; i--) {
            if (((Buddy)buddyVector.elementAt(i)).jid.equals(jid))
                return i;
        }

        return -1;
    }

    public Buddy findBuddy(String jid) {
        for (int i = buddyVector.size()-1; i >= 0; i--) {
            if (((Buddy)buddyVector.elementAt(i)).jid.equals(jid))
                return (Buddy)buddyVector.elementAt(i);
        }
        return null;
    }

    public void addBuddy(Buddy b) {
        //CHECK FOR ONLINE BUDDIES  
        buddyVector.addElement(b);
        this.insert(buddyVector.indexOf(b));

    }

    public void deleteBuddy(int index){
        buddyVector.removeElementAt(index);
        this.delete(index);

    }

    public void drawListRow(ListField listField, Graphics graphics, int index, int y, int width) {
        // NOTICE 14 would be consist the icon size

        onlineBuddyCount=0; 
        String bName="";
        Buddy b = (Buddy)buddyVector.elementAt(index);
        if(showOnlineBuddy==true){
            if(b.status==0x00000003||b.status==0x00000002||b.status==0x00000001){

                //DRAW ROW BACKGROUND START
                if (listField.getSelectedIndex() != index) {
                    graphics.setBackgroundColor(index % 2 == 0 ? Color.WHITE
                            : Color.LIGHTGRAY);
                    graphics.clear();
                    listField.setFocus();
                }
                //DRAW ROW BACKGROUND END

                onlineBuddyCount++;
                if(b.name.endsWith("net")){
                    int i=b.name.indexOf("@");
                    bName=b.name.substring(0, i);
                }else{
                    bName=b.name;
                }
                if (b.unread) {
                    graphics.drawBitmap(0, y+3, unreadIcon.getWidth(), unreadIcon.getHeight(),unreadIcon , 0, 0);
                } else {
                    graphics.drawBitmap(0, y+3, unreadIcon.getWidth(), unreadIcon.getHeight(),statusIcon[b.status] , 0, 0);
                }

                graphics.drawText(bName, 25, y, DrawStyle.HDEFAULT, width-12);
                graphics.drawBitmap(Display.getWidth()-_chatBmp.getWidth(), y-6, _chatBmp.getWidth(), _chatBmp.getHeight(), _chatBmp, 0, 0);
            }
        }else{
            //DRAW ROW BACKGROUND START
            if (listField.getSelectedIndex() != index) {
                graphics.setBackgroundColor(index % 2 == 0 ? Color.WHITE
                        : Color.LIGHTGRAY);
                graphics.clear();
                listField.setFocus();
            }
            //DRAW ROW BACKGROUND END

            onlineBuddyCount++;
            if(b.name.endsWith("net")){
                int i=b.name.indexOf("@");
                bName=b.name.substring(0, i);
            }else{
                bName=b.name;
            }
            if (b.unread) {
                graphics.drawBitmap(0, y+3, unreadIcon.getWidth(), unreadIcon.getHeight(),unreadIcon , 0, 0);
            } else {
                graphics.drawBitmap(0, y+3, unreadIcon.getWidth(), unreadIcon.getHeight(),statusIcon[b.status] , 0, 0);
            }

            graphics.drawText(bName, 25, y, DrawStyle.HDEFAULT, width-12);
            graphics.drawBitmap(Display.getWidth()-_chatBmp.getWidth(), y-6, _chatBmp.getWidth(), _chatBmp.getHeight(), _chatBmp, 0, 0);
        }
    }

    public void clearBuddies() {
        if (nPings.buddyList != null) {
            int i = buddyVector.size();
            while (i-- > 0)
                this.delete(0);
            nPings.buddyscreen.delete(nPings.buddyList);
            nPings.buddyList = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:36:28.710

我无法运行您的代码，因为其中有太多我没有的（其他类、PNG 等），但我敢打赌您的问题出在此处：

```
public void drawListRow(ListField listField, Graphics graphics, int index, int y, int width) {

   // other stuff here

      listField.setFocus(); 
```

调用`setFocus()`会将焦点设置在列表字段（`BuddyListField`）上。所以，你`CheckBoxField` **实际上**是可聚焦的。问题是您添加了复选框字段，然后添加了列表字段。绘制列表字段时，使用`drawListRow()`，您总是将焦点从复选框移开并将其放回列表字段。

删除对`listField.setFocus()`...的调用，其中有两个。

`drawListRow()`用于绘图。我不确定我能想出一个原因，为什么该方法中的任何内容都应该真正**改变**焦点，这就是这样`setFocus()`做的。

# c++ - 面部特征检测和跟踪

> ID：15446151
> 
> 赞同：3
> 
> 时间：2013-03-16T06:04:16.257
> 
> 标签：c++, opencv, image-processing, computer-vision, feature-detection

我想在 2D 视频中检测和跟踪嘴唇和眼角

我已经使用 OpenCV Viola-Jones 面部和特征点检测器完成了正面姿势、中性表情和良好光照条件下的面部特征检测。

我将[CascadeClassifier::detectMultiScale](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)与 haarcascade_frontalface_alt、haarcascade_eye、haarcascade_mcs_mouth xml 文件一起使用。它可以正常工作高达 15 度的旋转和中性表达。

**但是现在，我只想知道在以下条件下是否可以检测面部特征（图像中的眼睛、嘴巴）？**

*   头部旋转高达 45 度

*   表情 - 说话，大笑，微笑，......

    ![在此处输入图像描述](../Images/10c110e98fc4a5fcd0d9b451e06fbe1a.png)

OpenCV 不是必须的，任何库或实现都可以。首先，我也可以接受任何参考论文。不能使用 3D Range 相机和其他 3D 相机传感器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-04T19:32:11.687

您已经在这里发布了一个问题：[Facial Feature Points Detection using OpenCV](https://stackoverflow.com/questions/15388089/facial-feature-points-detection-using-opencv)。我很想将此称为您自己问题的重复。

[这已经使用流行的flandmark](http://cmp.felk.cvut.cz/~uricamic/flandmark/)工具回答了您的问题。这个问题的唯一区别是您询问了更大程度的姿势变化，即高达 45 度。如果您阅读带有 flandmark 的相关[论文](ftp://cmp.felk.cvut.cz/pub/cmp/articles/uricar/UricarFrancHlavac-VISAPP2012.pdf)，他们会评估当前最先进的评估数据集之一，[即野外标记面孔 (LFW)](http://vis-www.cs.umass.edu/lfw/)，该数据集已经涵盖了中等范围的姿势变化。

如果您愿意牺牲速度来获得非姿势面部的准确性，那么 2012 年的另一项工作对图像集进行了更密集的地标算法评估，我认为该算法比 LFW 具有更多的姿势变化。作品的项目网页在[这里](http://www.ics.uci.edu/~xzhu/face/)。

我还建议您将来参考您自己的问题，如果它们彼此相似，并清楚地描述您的问题的不同和独特之处，值得提出一个新问题。

# ruby - Ruby Rake 从 gem 加载任务

> ID：15446153
> 
> 赞同：12
> 
> 时间：2013-03-16T06:04:20.380
> 
> 标签：ruby, include, load, rake

我一直在尝试将位于 github 上的 gem 包含到我当前的应用程序中。gem 有一个 rake 文件，我希望能够从我的应用程序访问该文件。但我不断收到加载错误。

```
load 'tasks/deploy.rake' 
```

gem 文件看起来像这样

```
# -*- encoding: utf-8 -*-
require 'rake'

Gem::Specification.new do |gem|
  gem.authors       = %w(Hello World)
  gem.email         = %w(test@example.com)
  gem.description   = 'test'
  gem.summary       = 'test'
  gem.homepage      = 'https://github.com/..'
  gem.files         = FileList[ 'lib/**/*.rb', 'tasks/deploy.rake', 'README.md' ].to_a
  gem.name          = 'test'
  gem.require_paths = %w(lib)
  gem.version       = '0.0.1'
end 
```

我希望能够将 ./tasks/deploy.rake 加载到包含此 gem 的应用程序中，我该如何继续？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-16T06:22:01.030

好的，如果有人感兴趣，我找到了解决此问题的方法：

```
# Rails.root/Rakefile

spec = Gem::Specification.find_by_name 'test'
load "#{spec.gem_dir}/tasks/deploy.rake" 
```

这就是我需要在我的 Rakefile 中说的全部内容！

# c - 未解析的外部符号 _malloc

> ID：15446159
> 
> 赞同：0
> 
> 时间：2013-03-16T06:05:13.890
> 
> 标签：c, windows, driver

我正在尝试使用 WDK 创建一个驱动程序。我需要在该驱动程序中使用 malloc。当我尝试使用它时，我收到一个错误，例如 malloc unresolved external symbol。我认为我必须包含一些库。但我不确定.如何解决此错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T06:12:32.877

Windows 设备驱动程序通常不与 C-Runtime 链接。DDK/WDK 的构建环境不与 MSVCRT 链接。但是有一些内存分配例程可以用于内核和驱动程序编程。

有关更多详细信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554389%28v=vs.85%29.aspx)。

边注：

我有点担心你没有提到“免费”也是一个未解决的符号。这表明您永远不会调用它，因此设备驱动程序代码中存在内存泄漏。;) 或者 WDK 是否从某个地方引入了 free() 的实现？

# gwt - 如何创建一个 GWT WebApp，但有多个 WAR 文件

> ID：15446160
> 
> 赞同：1
> 
> 时间：2013-03-16T06:05:34.530
> 
> 标签：gwt

我正在开发一个使用 GWT 作为前端的企业应用程序。我有多个模块，并希望将每个单独的模块创建为单独的 war 文件，当部署在同一个 Web 服务器中时，它将像单个 Web 应用程序一样执行，因此用户无需更改 URL 即可访问每个模块。

希望问题很清楚，任何人都可以指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:18:28.337

我在 Github 上创建了演示项目，其中描述了开发面向插件的系统的工作方法：[https ://github.com/domax/gwt-dynamic-plugins](https://github.com/domax/gwt-dynamic-plugins)

请随时向我询问有关此方法的更多信息-您的兴趣将激励我继续研究它；]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:03:03.033

**最简单的解决方案是将多个模块编译为单独的 gwt 应用程序，然后将它们打包在同一个 war 中。**

在您的部署战争中，您最终会得到 multiapp.war

战争的布局将是——

```
webapps
    -> multiapp
     --> module1gwtapp/
     --> module2gwtapp/
     --> module3gwtapp/
     --> styles/images
     --> styles/css
     --> WEB-INF/web.xml
     --> WEB-INF/lib
     --> WEB-INF/classes 
```

## 专业人士

1.  这种方法通过在多个 gwt 应用程序之间共享 WEB-INF/lib jar 来避免重复的依赖 jar。
2.  这种方法通过在多个 gwt 应用程序之间共享它们来避免重复的 css/图像。
3.  多个应用程序的会话管理将相同。

## 缺点

1.  应用程序之间的导航意味着重新加载应用程序。
2.  历史管理会有点棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:27:55.387

根据您的应用程序，您有不同的可能性。

如果您的每个应用程序都需要自己的服务器端服务，那么您必须独立部署每个 .war，然后您可以使用像 apache 这样的 Web 服务器作为前端，它使用重写和 http-proxy 规则链接所有应用程序，在在这种情况下，您可以将您的应用程序放在不同的服务器上，甚至可以配置集群和平衡。

如果您的应用程序只是客户端的东西，您可以解压缩所有的战争（使用 jar 或解压缩命令）并将所有静态文件放在任何地方：在 Web 服务器中，甚至在唯一的 .war 中。

您也可以使用 maven 将所有模块加入到最终的 .war 中。基本过程应该是使用 maven-dependency-plugin 的 unpack-dependencies 目标创建一个新模块以加入所有其他模块，然后您可以编译所有 gwt 模块以适当地配置 gwt-maven 插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T07:15:25.223

就我使用 GWT 而言，这是不可能的（我可能错了）。一个 webApp 只能有一个 war 文件。

但是，您可以合并多个模块，以便它可以包含在单个模块中。同一个包甚至可以有多个入口点，但每个应用程序只能有一个战争。

如果您想要多个`.war`文件，请将您的项目分成多个项目并单独构建它们，并希望它不会中断。

# java - Gwt Request builder - 如何返回响应字符串

> ID：15446161
> 
> 赞同：11
> 
> 时间：2013-03-16T06:05:48.140
> 
> 标签：java, gwt

我需要实现一个调用 Web 服务并返回响应的函数。

我试过

```
public String getFolderJson(String path) {  
           String result="initial_value";
           StringBuilder param = new StringBuilder();  
           param.append("?sessionId=").append(getSessionId());  
           param.append("&path=").append(path);  
           RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, "https://localhost/folder" + param);  
                   try {  
                        builder.sendRequest(null, new RequestCallback() {  
                        @Override  
                        public void onResponseReceived(Request request,
                                Response response) {  
                              result = response.getText();
                              System.out.println(response.getText());  
                                            //I need to return "result"   
                        }  
                        @Override  
                        public void onError(Request request, Throwable exception) {}  
                          });  
                    return result; //the result get returned before the response is recieved.So i am getting the return value "initial_value".
                   }      
                   catch (RequestException e) {}  
        return null;
    } 
```

在调用 `getFolderJson()`Web 服务时成功调用。但是`result`在收到响应之前返回。所以我得到了返回值“initial_value”。
函数时如何从响应中返回值`getFolderJson()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T07:37:49.433

GWT 不支持同步 Ajax，因此您必须使用异步模式编写应用程序。

GWT 用来执行请求的低级对象是[XMLHttpRequest](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)（旧的 IE 版本除外），并且 GWT 总是`open()`在 async 设置为 true 的情况下调用它的方法。因此，拥有同步 ajax 的唯一方法是维护自己修改后的`XMLHttpRequest.java`. 但是同步 ajax 是个坏主意，甚至 jQuery 也弃用了这种可能性。

所以gwt中的正常方式应该是你的方法返回`void`，并且你传递一个带有回调的附加参数以在响应可用时执行。

```
public void getFolderJson(String path, Callback<String, String> callback) {  
    RequestBuilder builder = new RequestBuilder(...);
    try {
      builder.sendRequest(null, new RequestCallback() {  
        @Override  
        public void onResponseReceived(Request request, Response response) {
          callback.onSuccess(response.getText());  
        }  
        @Override  
        public void onError(Request request, Throwable exception) {}
          callback.onFailure(exception.getMessage());  
        });
    } catch (RequestException e) {
        callback.onFailure(exception.getMessage());  
    }  
} 
```

我宁愿为此使用 gwtquery`Promises`语法，而不是 request-builder 之一：

```
 Ajax.get("http://localhost/folder?sessionId=foo&path=bar")
    .done(new Function(){
      public void f() {
        String text = arguments(0);
      }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:11:00.563

我猜builder.sendRequest(xxx)会返回类似Future的东西，你可以从那个对象中得到结果。你使用的是RequestBuilder的异步方法，应该也有一些同步方法。

RequestBuilder 是从哪里来的？我可以为你检查 api。

好的，试试这个：

```
public String getFolderJson(String path) {
    String result = "initial_value";
    StringBuilder param = new StringBuilder();
    param.append("?sessionId=").append(getSessionId());
    param.append("&path=").append(path);
    RequestBuilder builder = new RequestBuilder(RequestBuilder.GET,
            "https://localhost/folder" + param);
    final SynchronousQueue resultQueue = new SynchronousQueue();
    try {
        builder.sendRequest(null, new RequestCallback() {
            @Override
            public void onResponseReceived(Request request,
                    Response response) {
                resultQueue.put(response.getText());
                System.out.println(response.getText());
            }

            @Override
            public void onError(Request request, Throwable exception) {
            }
        });
        return resultQueue.take();
    } catch (RequestException e) {
    }
    return result;
} 
```

似乎[RequestBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/http/client/RequestBuilder.html)没有任何同步方法来获取结果，只有回调。

请注意，此方法将阻塞，直到收到响应。如果在 gwt 的事件处理线程中调用此方法，这将是一个不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-16T04:25:33.460

尝试上面提供的相同解决方案，但不使用匿名回调。

```
public String getFolderJson(String path) { 

    RequestBuilder builder = new RequestBuilder(...);
    HttpCallback cb=new HttpCallback();

    try {
      builder.sendRequest(null, cb);
    } catch (RequestException e) {
    // exception handling
        logger.severe(cb.err);
    }  

    return cb.result;
}

class HttpCallback implements RequestCallback{

    String result;
    String err;

    HttpCallback(){}

    @Override
    public void onResponseReceived(Request request, Response response) {            
        result=response.getText());     
    }

    @Override
    public void onError(Request request, Throwable exception) {
        err=exception.getMessage();     
    }       
} 
```

# php - 如何将日期转换为与我的数据库不同的格式？

> ID：15446163
> 
> 赞同：-4
> 
> 时间：2013-03-16T06:06:10.080
> 
> 标签：php, mysql, date

在我的数据库中，日期以这种格式存储：

```
2013-03-14 
```

我想在我的网页上显示日期，格式为：

```
2013-march-14 
```

我的数据库中已经存储了很多日期数据，因此无法更改我的数据库。我该如何进行这种转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:08:08.157

使用 MySQL 内置[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数和说明符`'%Y-%M-%d'`以您想要的方式格式化日期部分：

```
SELECT DATE_FORMAT(datefield, '%Y-%M-%d')
... 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/0ce1a/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:24:53.943

如果您想在 PHP 上执行此操作，可以使用 date 函数

```
$d = '2013-03-04';
echo date("Y-M-d", strtotime($d));  //2013-Mar-04 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:26:20.687

你可以这样做

**通过 MySQL**

```
SELECT DATE_FORMAT(datecolumn, '%Y-%M-%d') FROM table 
```

**通过 PHP**

```
$date = '2013-03-14';
echo date("Y-F-d", strtotime($date)); 
```

**输出**

```
2013-march-14 
```

# html - 在现场流式传输音频时出现问题

> ID：15446164
> 
> 赞同：0
> 
> 时间：2013-03-16T06:06:25.010
> 
> 标签：html, google-chrome, audio, streaming

我在我的[网站上流式传输音频时遇到问题](http://soundrown.com/Coffee)

使用 Chrome 时，加载到轨道的随机点，然后停止（大部分时间）。

此外，当我尝试直接从 soundrown.com/Audio/Final%20Normalized/mp3 文件夹流式传输/下载文件时，咖啡店文件将只是部分流式传输或部分下载。

我的一些用户报告说网站上的音频文件“不循环”或“间歇性停止”

我无法在 Safari / Firefox 上复制此行为。

我花了几个小时与我的网络主机技术支持，我无法查明问题。有什么帮助吗？

我不认为我遇到了与此相同的问题.. 但不确定：[使用 html5 `<audio>` 标签流式传输音频](https://stackoverflow.com/questions/3809519/streaming-audio-with-html5-audio-tag)

谢谢你的帮助！！

编辑： .ogg 文件也会发生同样的事情

编辑：我认为这与代码无关，因为直接转到 Web 服务器上的文件路径时轨道会暂停

编辑：我在 jplayer 上阅读了相当多的内容，这听起来与 Tucker 的建议相似。我将尝试实现它。糟透了，我们不确定这里发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:20:39.583

首先，用户浏览器是否支持html5？html5 浏览器是否支持音频文件类型？有关兼容性，请参见此处：http: [//www.w3schools.com/tags/tag_audio.asp](http://www.w3schools.com/tags/tag_audio.asp)

播放的质量在很大程度上取决于用户的互联网连接以及文件服务器的带宽和位置。使用任何可用的工具检查您的带宽：

如果你是一个真正的编码员并且可以完全访问机器并且不害怕它，你可以使用 ganglia ;-)，但不要这样做，除非你确定你每天都会获得很多点击......

问题更可能是由于您的网络服务器相对于您的最终用户的位置或您的网络托管服务的质量。

re web server locality：用户越远，加载文件所需的时间越长，发生奇怪事情的风险就越高

重新网络托管服务质量：您可以升级您的托管包，也许提供更好质量的声音淹没服务......

如果您的网站托管在 Amazon 上，是否可以尝试使用 AWS 云前端进行托管，以帮助您的网站可用性和低延迟？读入他们的“边缘位置”以帮助解决延迟

**编辑**

我似乎无法找到您的错误的确切原因，但我知道该`<audio>`标签不是 html 中最旧的标签。我在我的网站上运行音频，我使用声音管理器 2。

如果您的问题确实与音频标签 + 浏览器支持的怪癖有关，也许您应该测试另一种播放音频的方法。你为什么不试试声音管理器2（[http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)）？它使用闪存（我相信也可以使用音频标签）。我个人使用它是因为我的网站播放了很多某些浏览器（例如 firefox）目前不支持的 mp3 文件。你也可以用它来连接一个很酷的 html ui 到 flash 播放器。也许它会解决您在网站上遇到的任何怪癖。

另一个想法可能是有更短的声音文件并循环它们。音频重置时可能会出现一些问题，但也许这是一个足够好的解决方法

# java - 从 mysqldatabase 填充选择框

> ID：15446166
> 
> 赞同：1
> 
> 时间：2013-03-16T06:07:07.083
> 
> 标签：java, mysql, eclipse, jsp

我需要从数据库中填充选择框。与数据库的连接成功，我可以检索并插入数据库。我尝试了以下代码来填充选择框。但它显示错误“迭代器无法解析为类型”。用于从数据库中检索的 Java 代码是，

```
 package servicescheduler.pack;
 import java.text.*;
 import java.util.*;
 import java.sql.*; 

 public class listObject 
{
   static Connection currentCon = null;
String sql="select * from center_point_map where service_center='Radiology';";
public List getlist()
{
    ArrayList<String> list=new ArrayList<String>();
    try
    {
        currentCon = ConnectionManager.getconnection(); 
    }
    catch (Exception ex)
    { 
        System.out.println(" An Exception has occurred! " + ex);      
    }
    if(currentCon!=null)
    {
        System.out.println("You made it, take control your database now!");
        try
        {
            PreparedStatement prest = currentCon.prepareStatement(sql);
             ResultSet rs = prest.executeQuery();
             while(rs.next()) {
                    list.add(rs.getString(1));
                }
             System.out.println(list.get(0));
             prest.close();
             rs.close();
             return list;

        }
        catch (SQLException s)
        {
              System.out.println("SQL statement is not executed!"+s);

        }

        catch (Exception e)
        {
              e.printStackTrace();

        }
      }

      return list;
  }

} 
```

jsp代码是

```
 <%@page import="servicescheduler.pack.listObject"%>
      <%@ page language="java" contentType="text/html; charset=UTF-8"
  pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org    /TR/html4 /loose.dtd">
  <html>
 <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Insert title here</title>
</head>
<body>
<select>
<%
Iterator it = new listObject().getlist();
while(it.hasNext()) {
    out.write("<option value=\""+ it.getFieldA()+ "\">"+ it.getFieldB() +"\">");
}
%>
</select>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:15:43.697

由于import语句的错误。您还需要在jsp中导入Iterator。默认包是`java.lang`。但是这里我们使用的是Iterator，它在`java.util.*`. 所以需要先导入 java.util 包。

```
<%@page import="java.util.*"%> 
```

并使用它

```
Iterator it = new listObject().getlist().iterator(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:13:19.077

我认为问题在于您将 List 分配给您在 jsp 代码中创建的迭代器。看看它。

因此代码应该是：

```
Iterator it = new listObject().getlist().iterator(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:19:29.710

你的jsp代码有两个错误点

*   第一种：无法从List转换为Iterator。它应该是`Iterator it = new listObject().getlist().iterator();`

*   第二个：在while循环中你必须使用`it.next()`将指针位置更改为next

# nsdata - iPhone中NSData和NSMutableData的区别

> ID：15446169
> 
> 赞同：5
> 
> 时间：2013-03-16T06:07:57.550
> 
> 标签：nsdata, nsmutabledata

NSData 和 NSMutableData 有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:10:16.113

来自 Stack Overflow 标签维基：

[数据](/questions/tagged/nsdata "显示标记为“nsdata”的问题")

> NSData 类是一个用于保存通用数据的苹果类。通常在从文件和互联网读取/写入文件时使用。

[nsmutabledata](/questions/tagged/nsmutabledata "显示标记为“nsmutabledata”的问题")

> NSMutableData（及其超类 NSData）为字节缓冲区提供数据对象、面向对象的包装器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T06:29:12.820

`NSData`创建后固定。

`NSMutableData`，顾名思义，允许更改内容的操作（`appendBytes:`, `appendData`, `setData:`...）。

# asp.net - 如何在asp.net C#的焦点事件中从Gridview文本框获取rowindex

> ID：15446174
> 
> 赞同：0
> 
> 时间：2013-03-16T06:09:08.223
> 
> 标签：asp.net, c#-4.0

我通过使用模板字段在 Gridview 中使用文本框。一切都运作良好。但我的问题是，每当文本框获得焦点时，我都需要那个 gridview 的 rowindex。
你能帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:36:59.067

也许这个[DataGridViewCell.RowIndex 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.rowindex.aspx)

```
private void getCurrentCellButton_Click(object sender, System.EventArgs e)
{
  string msg = String.Format("Row: {0}, Column: {1}",
    dataGridView1.CurrentCell.RowIndex,
    dataGridView1.CurrentCell.ColumnIndex);
  MessageBox.Show(msg, "Current Cell");
} 
```

# vb.net - VB.NET 连接字符串（Web.Config、App.Config）

> ID：15446175
> 
> 赞同：8
> 
> 时间：2013-03-16T06:09:52.593
> 
> 标签：vb.net, connection-string

连接字符串真的很烦人。

我在一个解决方案中有两个项目。一个充当表示层的 Web 表单应用程序，以及一个支持它的类库，它将从数据库发送和接收数据。  

-- 类库项目中的员工类 --

```
Friend Class Employee

Public Function GetEmployees() As DataSet

    Dim DBConnection As New SqlConnection(My_ConnectionString)
    Dim MyAdapter As New SqlDataAdapter("exec getEmployees", DBConnection)

    Dim EmployeeInfo As DataSet
    MyAdapter.Fill(EmployeeInfo, "EmployeeInfo")

    Return EmployeeInfo

End Function

End Class 
```

目前，应用程序告诉我它无法访问我试图存储在配置文件中以便快速重复访问的“My_ConnectionString”：

```
<configuration>

<system.web>
  <compilation debug="true" strict="false" explicit="true" targetFramework="4.5" />
  <httpRuntime targetFramework="4.5"  />
</system.web>

 <connectionStrings>
   <add name="My_ConnectionString" connectionString="Data Source=.\sqlexpress;Initial Catalog=My_DB;Integrated Security=True;"/>
 </connectionStrings>

</configuration> 
```

web.config 是 web 表单项目的一部分，而不是类库，这些项目是否无法相互“对话”？我是否需要将 web / app 配置文件添加到类库以在该项目中存储连接字符串？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-16T06:19:06.900

在你的例子中不清楚`My_ConnectionString`来自哪里，但试试这个

`System.Configuration.ConfigurationManager.ConnectionStrings("My_ConnectionString").ConnectionString`

像这样

```
Dim DBConnection As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("My_ConnectionString").ConnectionString) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-27T03:20:58.523

如果它是一个 .mdf 数据库并且连接字符串在创建时已保存，您应该可以通过以下方式访问它：

```
 Dim cn As SqlConnection = New SqlConnection(My.Settings.DatabaseNameConnectionString) 
```

希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T16:15:42.623

**APPConfig 中的连接**

```
<connectionStrings>
  <add name="ConnectionString" connectionString="Data Source=192.168.1.25;Initial Catalog=Login;Persist Security Info=True;User ID=sa;Password=example.com"   providerName="System.Data.SqlClient" />
</connectionStrings> 
```

**在 Class.Cs 中**

```
public string ConnectionString
{
    get
    {
        return System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T15:25:32.087

```
Public Function connectDB() As OleDbConnection

        Dim Con As New OleDbConnection
        'Con.ConnectionString = "Provider=SQLOLEDB.1;Persist Security Info=False;User ID=sa;Initial Catalog=" & DBNAME & ";Data Source=" & DBSERVER & ";Pwd=" & DBPWD & ""
        Con.ConnectionString = "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=DBNAME;Data Source=DBSERVER-TOSH;User ID=Sa;Pwd= & DBPWD"
        Try
            Con.Open()
        Catch ex As Exception
            showMessage(ex)
        End Try
        Return Con
    End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-04T10:23:58.320

我不知道这是否仍然是一个问题，但我更喜欢在我的代码中使用 My.Settings 。

Visual Studio 生成一个简单的类，其中包含用于从 app.config 文件读取设置的函数。

您可以使用 My.Settings.ConnectionString 简单地访问它。

```
 Using Context As New Data.Context.DataClasses()
        Context.Connection.ConnectionString = My.Settings.ConnectionString
    End Using 
```

# protocol-buffers - 当前是否有任何应用程序提供 Protocol Buffers API？

> ID：15446179
> 
> 赞同：0
> 
> 时间：2013-03-16T06:10:40.097
> 
> 标签：protocol-buffers, lifx

我最近偶然发现了 Google 的 Protocol Buffers 作为我正在关注的 Kickstarter 项目，Lifx 计划发布一个使用 Protocol Buffers 作为接口的 SDK。我只是想知道是否有人知道任何提供协议缓冲区 API 的现有应用程序或服务？我只是想获得一些使用它的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:24:45.697

协议缓冲区首先是一种将程序数据序列化为二进制格式（用于存储或通过网络传输）并再次返回的机制 - 以独立于编程语言的方式。IE。您可以在 python 应用程序中将复杂的数据结构序列化为二进制并将其读回 android 应用程序并在 android 应用程序的编程语言中获取相同的数据。协议缓冲区不能帮助您将数据从一个地方传输或发送到另一个地方 - 为此您需要一些其他机制（ TCP/IP 、套接字、 HTTP ）。然而，协议缓冲区确实提供了一个 API，用于执行从客户端到远程服务器的 RPC 调用——但不提供任何实现。这个特定的 RPC api 有一些第 3 方实现，可以与任何 java 应用程序一起使用 - 请参阅[https://code.google.com/p/protobuf-rpc-pro/](https://code.google.com/p/protobuf-rpc-pro/) - 这可能适用于 android。

# android - 问题：指定的孩子已经有一个父母。您必须先在孩子的父母上调用 removeView()

> ID：15446182
> 
> 赞同：4
> 
> 时间：2013-03-16T06:11:03.343
> 
> 标签：android, android-layout

我正在开发应用程序以将动态数据添加到多个表视图。结构如下。

![在此处输入图像描述](../Images/1c9e784ab16f7db1830e7c1cfade668c.png) 我在 onPostExecute 的代码是：

```
 protected void onPostExecute(List<String> results){
int ind,i = 0;
ScrollView sv=null;
TableLayout tl=null;
TableRow tr = null;
int mjsonlength=results.size();
if(results!=null){

 TableLayout indextl=(TableLayout)findViewById(R.id.indextablelayout);
    TableRow indextr=new TableRow(SubProducts.this);
    //indext1.moveToFirst();
    LinearLayout llt=(LinearLayout)findViewById(R.id.alltablell);
    //for(int f=0;f<mjsonlength;f++){

        for( ind=0;ind<indextitle.size();ind++)
        {

            TextView indextv=new TextView(SubProducts.this);
            indextv.setBackgroundResource(R.drawable.greenbg);
            indextv.setHeight(25);
            indextv.setWidth(50);
            indextv.setId(6);
            indextv.setTextColor(Color.WHITE);
            indextv.setText(indextitle.get(ind));
            indextv.setPadding(20,10,6,3);
            indextr.addView(indextv);

            indextl.addView(indextr,6);

            sv=new ScrollView(SubProducts.this);
             tl=new TableLayout(SubProducts.this);
             for( i=0;i<mjsonlength;i++){
                    tr=new TableRow(SubProducts.this);

                    if(ind==i)  {

                        RelativeLayout rl=new RelativeLayout(SubProducts.this);
                        Resources res = getResources(); //resource handle
                          rl.setBackgroundResource(R.drawable.prd_box);

                         RelativeLayout.LayoutParams newParams1 = new RelativeLayout.LayoutParams(
                                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                                    RelativeLayout.LayoutParams.WRAP_CONTENT);

                            image=new ImageView(SubProducts.this);
                            image.setLayoutParams(newParams1);
                            image.setId(1);
                            image.setImageBitmap(bmp);
                            image.setPadding(5, 20, 5, 5);
                            rl.addView(image,1);

                          RelativeLayout.LayoutParams lprams = new RelativeLayout.LayoutParams(
                                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                                    RelativeLayout.LayoutParams.WRAP_CONTENT);
                            lprams.addRule(RelativeLayout.RIGHT_OF, 1);

                          TextView tv1=new TextView(SubProducts.this);
                        Spanned marked_up = Html.fromHtml(description.get(i));
                        tv1.setText((marked_up.toString()).substring(1, 170).replaceAll("&nbsp;",""));
                        tv1.setLayoutParams(lprams);
                        tv1.setId(2);
                        tv1.setHeight(150);
                        tv1.setWidth(130);
                        tv1.setPadding(20, 10, 0, 10);
                        rl.addView(tv1,2);

                         RelativeLayout.LayoutParams newParams = new RelativeLayout.LayoutParams(
                                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                                    RelativeLayout.LayoutParams.WRAP_CONTENT);
                         newParams.addRule(RelativeLayout.BELOW, 2);
                        TextView tv=new TextView(SubProducts.this);
                        tv.setText(productname.get(i));
                        tv.setLayoutParams(newParams);
                        tv.setTextColor(Color.WHITE);
                        tv.setId(3);
                        tv.setPadding(10, 0, 0, 10);
                        rl.addView(tv,3);

                        tr.addView(rl);
                        tr.setPadding(5, 10, 5, 10);

                    }
                    tl.addView(tr);

            }

             sv.addView(tl);

                llt.addView(sv);

        }

    } 
```

}

我收到如下错误：

```
 03-16 06:27:07.452: E/AndroidRuntime(7233): FATAL EXCEPTION: main
      03-16 06:27:07.452: E/AndroidRuntime(7233): java.lang.IllegalStateException: The 03-16 06:27:07.452: E/AndroidRuntime(7233): FATAL EXCEPTION: main
03-16 06:27:07.452: E/AndroidRuntime(7233): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.view.ViewGroup.addViewInner(ViewGroup.java:3339)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.view.ViewGroup.addView(ViewGroup.java:3210)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.widget.TableLayout.addView(TableLayout.java:429)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.view.ViewGroup.addView(ViewGroup.java:3155)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.widget.TableLayout.addView(TableLayout.java:411)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.view.ViewGroup.addView(ViewGroup.java:3131)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.widget.TableLayout.addView(TableLayout.java:402)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at com.example.nutritionplusapp.SubProducts$LongRunningGetIO1.onPostExecute(SubProducts.java:227)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at com.example.nutritionplusapp.SubProducts$LongRunningGetIO1.onPostExecute(SubProducts.java:1)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.os.AsyncTask.finish(AsyncTask.java:631)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.os.Looper.loop(Looper.java:137)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at java.lang.reflect.Method.invokeNative(Native Method)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at java.lang.reflect.Method.invoke(Method.java:511)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-16 06:27:07.452: E/AndroidRuntime(7233):     at dalvik.system.NativeStart.main(Native Method)
03-16 06:32:07.586: I/Process(7233): Sending signal. PID: 7233 SIG: 9
03-16 06:32:08.522: E/Trace(7355): error opening trace file: No such file or directory (2) 
```

两个循环的循环变量值应该相同才能获得相应产品的子产品。我正在与上述错误作斗争。任何有想法的人。请建议我提供适当的解决方案。提前致谢。

编辑：

```
ArrayList<String> productname=new ArrayList<String>();
ArrayList<String> description=new ArrayList<String>();
ArrayList<String> indextitle=new ArrayList<String>();
 ArrayList<String> mStrings = new ArrayList<String>(); 
```

在 doINBackground 下：

```
 JSONObject json = array.getJSONObject(i);

     manJson = json.getJSONObject("product");
     mStrings.add(manJson.getString("productimage"));
     productname.add(manJson.getString("productname"));
    indextitle.add(manJson.getString("subcategoryid"));
    description.add(manJson.getString("description")); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T06:57:57.140

好的，第二个潜在问题也是： indextl.addView(indextr);

indextr 每次循环迭代都会添加，但它是相同的视图。您只能将视图添加到层​​次结构一次。您可能希望每次循环迭代都有一个新实例。我不能肯定地说，但这很可能是问题所在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T07:54:14.380

尝试这个....

```
ViewGroup parent = (ViewGroup) mViewParent.getParent();
int index = parent.indexOfChild(mViewParent);
parent.removeView(mViewParent);

parent.addView(mNewView_U_want_to_add); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-29T08:39:11.843

在带有活动的 onCreate 或带有片段的 onCreateView 中。

```
if (view != null) {
ViewGroup parent = (ViewGroup) view.getParent();
if (parent != null) {
    parent.removeView(view);
}
}try {
view = inflater.inflate(R.layout.fragment_main, container, false);
} catch (InflateException e) {} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T06:20:26.017

该异常实际上看起来是由以下原因引起的：

`indextl.addView(indextr,6);`

问题似乎是您试图在第 6 个索引处添加视图，但没有任何项目存在：

```
java.lang.IndexOutOfBoundsException:           index=6 count=0 
```

# astyanax - Astyanax：抛出此异常的简单写入：没有足够的字节来读取组件的值

> ID：15446187
> 
> 赞同：9
> 
> 时间：2013-03-16T06:11:41.193
> 
> 标签：astyanax

我是 astyanax 的新手，尝试了一些示例程序并收到此错误。这是一个简单的写法，看起来我在做一些基本错误的事情。不使用复合键。

```
Caused by: InvalidRequestException(why:Not enough bytes to read value of component 0)
    at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:20833)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:964)
    at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:950)
    at com.netflix.astyanax.thrift.ThriftKeyspaceImpl$1$1.internalExecute(ThriftKeyspaceImpl.java:120)
    at com.netflix.astyanax.thrift.ThriftKeyspaceImpl$1$1.internalExecute(ThriftKeyspaceImpl.java:117)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:56) 
```

这是代码：

```
 AstyanaxContext<Keyspace> context = new AstyanaxContext.Builder()
        .forCluster(CLUSTER_NAME)
        .forKeyspace(keySpaceName)
        .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
            .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
            .setCqlVersion("3.0.0")
            .setTargetCassandraVersion("1.2")
        )
        .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
            .setPort(50825)
            .setMaxConnsPerHost(10)
            .setSeeds("nodename:50825")
            .setConnectTimeout(20000)
        )
        .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
        .buildKeyspace(ThriftFamilyFactory.getInstance());

    context.start();
    System.out.println("getting context.. done ");
    Keyspace keyspace = context.getEntity();
    MutationBatch m = keyspace.prepareMutationBatch();

    ColumnFamily<String, String> colFam = new ColumnFamily<String, String>("test",
            StringSerializer.get(), StringSerializer.get());

    m.withRow(colFam, "abc")
        .putColumn("col2", "test1", null);
    m.execute(); 
```

这是表格描述：

```
CREATE TABLE test (
 col1 text PRIMARY KEY,
 col2 text,
 col3 text
) WITH
 bloom_filter_fp_chance=0.010000 AND
 caching='KEYS_ONLY' AND
 comment='' AND
 dclocal_read_repair_chance=0.000000 AND
 gc_grace_seconds=864000 AND
 read_repair_chance=0.100000 AND
 replicate_on_write='true' AND
 populate_io_cache_on_flush='false' AND
 compaction={'class': 'SizeTieredCompactionStrategy'} AND
 compression={'sstable_compression': 'SnappyCompressor'}; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T19:22:24.897

我也是 Astyanax 的新手，遇到了同样的例外。例外是由于基于 Astyanax Thrift 的对象认为列定义的外观与使用 CQL 3 在 1.2+ 中的存储方式之间不匹配。我学会了指定 COMPACT STORAGE 以便以 1.2 之前的格式创建表允许我通过基于 Thrift 的对象与之交互。FWIW：我正在从源代码构建 Astyanax，但我确实在 maven Central 中看到了 1.56.34；我也会对此进行更新。

```
CREATE TABLE test (
 col1 text PRIMARY KEY,
 col2 text,
 col3 text
) WITH COMPACT STORAGE AND
... 
```

请参阅[使用 CQL 3 之前的应用程序](http://www.datastax.com/docs/1.2/ddl/legacy_table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T20:48:55.530

我由 user2251060 提供的解决方案完成了这项工作。此外，Netflix 正在开发新版本的 Astyanax，它依赖于 Datastax Java 驱动程序将 thrift 对象转换为基于 CQL 的底层对象。[您可以在https://github.com/Netflix/astyanax/wiki/Astyanax-over-Java-Driver](https://github.com/Netflix/astyanax/wiki/Astyanax-over-Java-Driver)找到更多信息

# twitter-bootstrap - 如何让我的 Twitter Bootstrap 按钮右对齐？

> ID：15446189
> 
> 赞同：489
> 
> 时间：2013-03-16T06:11:57.360
> 
> 标签：twitter-bootstrap, twitter-bootstrap-3, bootstrap-4, twitter-bootstrap-2

我在这里有一个简单的演示：

```
<ul>
    <li>One <input class="btn pull-right" value="test"></li>
    <li>Two <input class="btn pull-right" value="test2"></li>
</ul> 
```

我有一个无序列表，对于每个列表项，我希望在左侧有文本，然后是右对齐按钮。我曾尝试使用 pull-right 但这完全弄乱了对齐方式。我究竟做错了什么？

```
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" />
<ul>
  <li>One <input class="btn pull-right" value="test"></li>
  <li>Two <input class="btn  pull-right" value="test2" </li>
</ul>
```

* * *

## 回答 #1

> 赞同：756
> 
> 时间：2013-05-02T19:53:00.357

插入`pull-right`类属性并让引导程序排列按钮。

对于**Bootstrap 2.3**，请参阅：[http](http://getbootstrap.com/2.3.2/components.html#misc) : //getbootstrap.com/2.3.2/components.html#misc > Helper classes > .pull-right。

对于**Bootstrap 3**，请参阅：[https](https://getbootstrap.com/docs/3.3/css/#helper-classes) ://getbootstrap.com/docs/3.3/css/#helper-classes > Helper 类。

* * *

对于**Bootstrap 4**，请参阅：[https ://getbootstrap.com/docs/4.0/utilities/float/#responsive](https://getbootstrap.com/docs/4.0/utilities/float/#responsive)

该`pull-right`命令已被删除并替换为`float-right`或一般地`float-{sm,md,lg,xl}-{left,right,none}`

* * *

## 回答 #2

> 赞同：256
> 
> 时间：2014-01-25T12:25:02.097

在 twitter bootstrap 3 中尝试类**pull-right**

```
class="btn pull-right" 
```

* * *

## 回答 #3

> 赞同：149
> 
> 时间：2015-06-04T14:02:39.803

“pull-right”类可能不是正确的方式，因为 in 使用“float:right”而不是 text-align。

检查 bootstrap 3 css 文件，我在第 457 行找到了“text-right”类。这个类应该是将文本向右对齐的正确方法。

一些代码：

```
<div class="row">
    <div class="col-xs-12">
        <div class="text-right">
            <button type="button" class="btn btn-default">Default</button>
        </div>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：79
> 
> 时间：2017-02-28T02:13:42.583

**2019 年更新 - 引导 4.0.0**

该`pull-right`课程现在**`float-right`**在 Bootstrap 4 中...

```
 <div class="row">
        <div class="col-12">One <input type="button" class="btn float-right" value="test"></div>
        <div class="col-12">Two <input type="button" class="btn float-right" value="test"></div>
    </div> 
```

[http://www.codeply.com/go/nTobetXAwb](http://www.codeply.com/go/nTobetXAwb)

最好不要对齐 ul 列表并为行使用块元素。

**`float-right`还没有工作吗？**

请记住，**Bootstrap 4 现在是 flexbox**，并且许多元素`display:flex`会阻止 float-right 工作。在某些情况下，util 类喜欢`align-self-end`或`ml-auto`用于右对齐 flexbox 容器内的元素，如 Bootstrap 4 .row、Card 或 Nav。

还要记住，它`text-right`仍然适用于内联元素。

[Bootstrap 4 右对齐示例](https://www.codeply.com/go/nTobetXAwb)

* * *

**引导程序 3**

使用`pull-right`类。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-10-24T11:10:40.020

使用`button`标签而不是`input`使用`pull-right`类。

`pull-right`类完全弄乱了你的两个按钮，但你可以通过在右侧定义自定义边距来解决这个问题。

```
<button class="btn btn-primary pull-right btn-sm RbtnMargin" type="button">Save</button>
<button class="btn btn-primary pull-right btn-sm"  type="button">Cancel</button> 
```

然后对类使用以下 CSS

```
.RbtnMargin { margin-left: 5px; } 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2015-02-20T16:10:43.157

除了接受的答案之外，在从引导程序内置填充的容器和列中工作时，我有时会有一个完整的拉伸列，其中包含一个子 div，它会拉动成为要走的路。

```
<div class="row">
  <div class="col-sm-12">
      <div class="pull-right">
            <p>I am right aligned, factoring in container column padding</p>
      </div>
  </div>
</div> 
```

或者，让所有列加起来等于网格列的总数（默认为 12），同时偏移第一列。

```
<div class="row">
  <div class="col-sm-4 col-sm-offset-4">
        This content and its sibling..
  </div>
  <div class="col-sm-4">
        are right aligned as a whole thanks to the offset on the first column and the sum of the columns used is the total available (12).
  </div>
</div> 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2014-08-31T15:16:52.697

很抱歉回答一个较旧的已经回答的问题，但我想我会指出你的 jsfiddle 不起作用的几个原因，以防其他人检查它并想知道为什么接受的答案中描述的 pull-right 类不不在那里工作。

1.  bootstrap.css 文件的 url 无效。（也许当你问这个问题时它起作用了）。
2.  您应该将属性： type="button" 添加到您的输入元素，否则它不会被呈现为按钮 - 它将被呈现为输入框。更好的是，改用该`<button>`元素。
3.  此外，由于 pull-right 使用浮动，您会得到一些令人震惊的按钮布局，因为每个 LI 没有足够的高度来容纳按钮的高度。向 LI 添加一些 line-height 或 min-height css 可以解决这个问题。

工作小提琴：http: [//jsfiddle.net/3ejqufp6/](http://jsfiddle.net/3ejqufp6/)

```
<ul>
  <li>One <input type="button" class="btn pull-right" value="test"/></li>
  <li>Two <input type="button" class="btn pull-right" value="test2"/></li>
</ul> 
```

（我还为按钮添加了最小宽度，因为由于宽度不同，我无法忍受按钮右对齐的参差不齐的外观:)）

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2014-10-21T18:14:20.093

使用 Bootstrap`pull-right`助手对我们不起作用，因为它使用`float: right`，它[强制`inline-block`元素变为`block`](http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo)。当`.btn`s 变成时`block`，它们失去了`inline-block`作为准文本元素提供它们的自然边距。

因此，我们改为`direction: rtl;`在父元素上使用，这会导致该元素内的文本从右到左`inline-block`布局，这也会导致元素从右到左布局。您可以像下面这样使用 LESS 来防止孩子也被布置`rtl`：

```
/* Flow the inline-block .btn starting from the right. */
.btn-container-right {
  direction: rtl;

  * {
    direction: ltr;
  }
} 
```

并像这样使用它：

```
<div class="btn-container-right">
    <button class="btn">Click Me</button>
</div> 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-11-05T11:06:08.130

在**Bootstrap 4**中：使用 Flexbox 尝试这种方式。请参阅[getbootstrap中的文档](https://getbootstrap.com/docs/4.1/utilities/flex/)

```
<div class="row">
  <div class="col-md">
    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-default">Example 1</button>
      <button type="button" class="btn btn-default">Example 2</button>
    </div>
  </div>
</div> 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2021-04-04T16:25:40.327

**对于引导程序 5：**

文档：[https ://getbootstrap.com/docs/5.0/utilities/float/](https://getbootstrap.com/docs/5.0/utilities/float/)

在`.float-end`元素中用于右对齐。`.clearfix`如果您将前一个按钮移动到右侧并且不希望以下元素向上滑动，则可能必须添加父元素。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-07-08T10:02:41.087

为按钮应用`pull-right`类。 [http://getbootstrap.com/css/#helper-classes-floats](http://getbootstrap.com/css/#helper-classes-floats) -> 助手类

此链接将有所帮助

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-12-16T19:03:31.920

从 v3.1.0 开始，Pull right 已贬值。只是一个抬头。

[http://getbootstrap.com/components/#callout-dropdown-pull-right](http://getbootstrap.com/components/#callout-dropdown-pull-right)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-03-10T12:04:33.260

现在您需要添加`.dropdown-menu-right`到现有`.dropdown-menu`元素。`pull-right`不再支持。

更多信息在这里[http://getbootstrap.com/components/#btn-dropdowns](http://getbootstrap.com/components/#btn-dropdowns)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-03-16T06:20:52.723

```
<ul>
    <li class="span4">One <input class="btn btn-small" value="test"></li>
    <li class="span4">Two <input class="btn btn-small" value="test2"></li>
</ul> 
```

一种方法是将此样式应用于您的列表项，以使它们保持内联

**或者**

```
<ul>
    <li>One <input class="btn" value="test"></li>
    <li>Two <input class="btn" value="test2"></li>
</ul> 
```

**在 CSS 中**

```
li {
    line-height: 20px;
    margin: 5px;
    padding: 2px;
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-03-16T06:21:05.400

您可以在引导 CSS 之外尝试自定义 CSS 以查看是否有任何更改。尝试

```
.move-rigth{
    display: block;
    float: right;
} 
```

如果它有效，那么您可以尝试操纵您拥有的内容或添加其他格式并实现您想要的。因为您正在使用引导程序并不意味着如果它不能为您提供您想要的东西，那么您只需管理它。你正在使用你的代码，所以你命令它按照你说的去做。干杯!

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-12-14T07:46:31.920

您还可以使用空白列在左侧留出空格

像

```
<div class="row">
    <div class="col-md-8"></div>  <!-- blank space increase or decrease it by column # -->
        <div class="col-md-4">
            <button id="saveedit" name="saveedit" class="btn btn-success">Save</button>
        </div>
</div> 
```

演示 :: [Jsfiddle 演示](https://jsfiddle.net/1vjan5hm/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-12-02T10:44:22.270

从**Bootstrap V3.3.1 开始**，以下 CSS 样式将解决此问题

```
.modal-open{
    padding-right: 0 !important;
} 
```

注意：我尝试了上面帖子中的所有建议，并且都解决了旧版本，并且不提供对 newset 引导版本的修复。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-03-17T14:07:44.670

```
<p align="right">
<button type="button" class="btn btn-primary">Submit</button>
</p> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-02-04T14:41:22.210

问题是您将按钮用作列表的一部分。并且由于列表项之间的垂直边距太低而无法将按钮放置在它们之间，因此会弄乱对齐方式。我会将其中一个按钮放在列表顶部，另一个放在它们下方，这样它看起来就像您期望的那样！

```
<ul>
<input class="btn pull-right" value="test">
<li>One</li> 
<li>Two</li>
<input class="btn pull-right" value="test2"> 
</ul> 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-01-30T15:43:14.127

对于 bootstrap 4[文档](https://v4-alpha.getbootstrap.com/layout/grid/#horizontal-alignment)

```
 <div class="row justify-content-end">
    <div class="col-4">
      Start of the row
    </div>
    <div class="col-4">
      End of the row
    </div>
  </div> 
```

# actionscript-3 - Flash AMF 调用是否在 AS3 客户端阻塞？

> ID：15446191
> 
> 赞同：1
> 
> 时间：2013-03-16T06:12:09.220
> 
> 标签：actionscript-3, amf, amfphp

Flash AMF 调用是否在 AS3 客户端阻塞，即它们是否阻塞客户端直到从服务器端返回响应？用于 AMF 的底层传输协议是什么，如果是 HTTP，那么 HTTP 不应该是阻塞的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:17:29.977

AMF 调用是异步的，结果/错误处理必须通过事件侦听器完成。底层协议可以是 HTTP 或 RTMP。现在，关于 HTTP 本质上是非阻塞的——AS3 直到不久前才支持线程（工作者），因此运行时本身可以隐藏阻塞和等待 HTTP 响应，以便接口在等待时不会冻结。

# optimization - GCC mtune 性能

> ID：15446197
> 
> 赞同：0
> 
> 时间：2013-03-16T06:12:35.793
> 
> 标签：optimization, gcc, apt

我可以将我的 ubuntu 安装上的 gcc 二进制文件更改为使用参数 -march=native -mtune=core2 -Os -O2 调用 gcc 的程序，这样每次我使用 apt 安装程序或 lib 时都会得到适当的优化？安装它们时我会遇到任何问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:45:51.257

试试[Gentoo Linux](http://www.gentoo.org/)。它是一个完全基于您可以配置编译器标志的概念的 Linux 发行版，并且所有软件包都在本地编译为这些设置。

# android - 如何在android中将一组按钮对齐到屏幕底部

> ID：15446201
> 
> 赞同：7
> 
> 时间：2013-03-16T06:13:33.647
> 
> 标签：android, android-layout

在我的布局中有四个部分，分别是标题、可编辑控件、列表和一组按钮。我想将按钮保留在屏幕底部。我在布局中进行了太多更改以迫使按钮底部。但是什么也没发生。请提供说明以制作我需要的东西。我也在发布布局

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <!--  heading for basic settings -->
        <TextView
            android:id="@+id/setup_macroheading"
            style="@style/txtHeading" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="20dp"/>

         <!--  macro name -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                android:textColor="@color/white"                    
                android:text="Macro Name"/>

            <EditText
                android:id="@+id/setup_macroname"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="12"
                android:inputType="textCapCharacters"
                android:singleLine="true"/>                 
        </LinearLayout>

        <View
            android:layout_width="fill_parent"
            android:layout_height="20dp"/>

        <ListView
            android:id="@+id/lvMacroList"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
        />

        <!-- Save & Cancel button -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:layout_gravity="bottom"
            android:orientation="horizontal">

            <Button
                android:id="@+id/setup_macroSavebtn"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="left"
                android:layout_weight="1"
                android:onClick="onSaveButtonClick"
                android:text="Save"/>

            <Button
                android:id="@+id/setup_macroCancelbtn"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:onClick="onCancelButtonClick"
                android:text="Cancel"/>         
        </LinearLayout>
    </LinearLayout>
  </ScrollView> 
```

![在此处输入图像描述](../Images/84f6f09b8ee7fd0fe957048bcb5d51eb.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T06:16:46.823

将包含按钮的LinearLayout的Parent设置为relative，并将包含两个按钮的linearLayout的属性设置为android:layout_alignParentBottom="true"。您还可以将线性布局的重力设置为底部。

试试这个：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

      <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <!--  heading for basic settings -->
    <TextView
        android:id="@+id/setup_macroheading"
        style="@style/txtHeading" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="20dp"/>

     <!--  macro name -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="20dp"
        android:paddingRight="20dp"
        android:orientation="horizontal">

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical"
            android:layout_weight="1"
            android:textColor="@color/white"                    
            android:text="Macro Name"/>

        <EditText
            android:id="@+id/setup_macroname"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:maxLength="12"
            android:inputType="textCapCharacters"
            android:singleLine="true"/>                 
    </LinearLayout>

    <View
        android:layout_width="fill_parent"
        android:layout_height="20dp"/>

    <ListView
        android:id="@+id/lvMacroList"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
    />
</LinearLayout>
    <!-- Save & Cancel button -->

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_gravity="bottom"
        android:orientation="horizontal"
        android:paddingLeft="20dp"
        android:paddingRight="20dp" >

        <Button
            android:id="@+id/setup_macroSavebtn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:onClick="onSaveButtonClick"
            android:text="Save"/>

        <Button
            android:id="@+id/setup_macroCancelbtn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:onClick="onCancelButtonClick"
            android:text="Cancel"/>         
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T06:15:26.290

将主要父级作为相对布局并赋予`android:layout_alignParentBottom="true"`按钮的布局......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T06:24:38.863

您必须将父布局用作相对布局，然后使用属性 android:layout_alignParentBottom="true" 进行子布局。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T06:50:06.813

正如 Karan_Rana 建议的那样，相对布局是最好的方法，但如果你不想使用相对布局，试试这个：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <!--  heading for basic settings -->
    <TextView
        android:id="@+id/setup_macroheading"
        android:layout_width="match_parent"
    android:layout_height="wrap_content"
         />

    <View
        android:layout_width="fill_parent"
        android:layout_height="20dp"/>

     <!--  macro name -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="20dp"
        android:paddingRight="20dp"
        android:orientation="horizontal">

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical"
            android:layout_weight="1"
            android:textColor="@color/white"                    
            android:text="Macro Name"/>

        <EditText
            android:id="@+id/setup_macroname"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:maxLength="12"
            android:inputType="textCapCharacters"
            android:singleLine="true"/>                 
    </LinearLayout>

    <View
        android:layout_width="fill_parent"
        android:layout_height="20dp"/>

    <ListView
        android:id="@+id/lvMacroList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout>
</ScrollView>

 <!-- Save & Cancel button -->
         <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="20dp"
        android:paddingRight="20dp"
        android:layout_weight="0"
        android:layout_gravity="bottom"
        android:orientation="horizontal">

        <Button
            android:id="@+id/setup_macroSavebtn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:onClick="onSaveButtonClick"
            android:text="Save"/>

        <Button
            android:id="@+id/setup_macroCancelbtn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:onClick="onCancelButtonClick"
            android:text="Cancel"/>         
    </LinearLayout> 
```

在这里，您需要使用 LinearLayout 作为父级并对其进行设置`weightSum`，并将其应用于`layout_weight`您想要的全屏布局。并且您想要在底部（保存和取消）的布局适用`layout_weight`于 0。

这很好用！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T06:47:42.740

通过将相对布局作为父布局和 android:layout_alignParentBottom="true" 到您的按钮布局来尝试此代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<!-- heading for basic settings -->

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <View
            android:layout_width="fill_parent"
            android:layout_height="20dp" />

        <!-- macro name -->

        <LinearLayout
            android:id="@+id/llTop"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:paddingLeft="20dp"
            android:paddingRight="20dp" >

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                android:text="Macro Name" />

            <EditText
                android:id="@+id/setup_macroname"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:inputType="textCapCharacters"
                android:maxLength="12"
                android:singleLine="true" />
        </LinearLayout>

        <!-- Save & Cancel button -->

    </RelativeLayout>
</ScrollView>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal"
    android:paddingLeft="20dp"
    android:paddingRight="20dp" >

    <Button
        android:id="@+id/setup_macroSavebtn"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_weight="1"
        android:onClick="onSaveButtonClick"
        android:text="Save" />

    <Button
        android:id="@+id/setup_macroCancelbtn"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="1"
        android:onClick="onCancelButtonClick"
        android:text="Cancel" />
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T13:44:24.473

试试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_marginRight="2dp"
            android:text="Modify" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_marginRight="2dp"
            android:text="Cancle" />

    </LinearLayout>

</RelativeLayout> 
```

用于底部的显示按钮。

# c++ - 尝试编译 qt 项目时出现编译错误

> ID：15446207
> 
> 赞同：5
> 
> 时间：2013-03-16T06:15:22.977
> 
> 标签：c++, qt, c++11, makefile

我正在尝试编译可以在 Linux 机器上正常编译的 Qt 项目，但是在我的 Mac 上出现以下错误：

```
 ../../Qt5.0.1/5.0.1/clang_64/include/QtCore/qlist.h:52:10: fatal error: 
  'initializer_list' file not found
   #include <initializer_list>
     ^ 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T06:51:06.310

在尝试使用 64 位 clang 编译器编译 Qt 5.0+ 项目时，这是 mac 的一个已知错误。为了解决此冲突，请尝试[此](https://bugreports.qt-project.org/browse/QTBUG-28097)错误修复论坛帖子中概述的步骤：

1) 克隆 Desktop Qt 5.0.0 clang 64bit (SDK) 套件。

2) 将编译器从 GCC (x86 64bit) 更改为 Clang (x86 64bit)。

3）更改您的项目以使用克隆的工具包。

4) 将以下内容添加到您的 .pro 文件中：

```
QMAKE_CXXFLAGS = -mmacosx-version-min=10.7 -std=gnu0x -stdlib=libc+

CONFIG +=c++11 
```

# php - PyroCMS PayPal IPN 似乎不是由 PayPal 触发的

> ID：15446211
> 
> 赞同：0
> 
> 时间：2013-03-16T06:15:59.560
> 
> 标签：php, codeigniter, paypal, paypal-ipn, pyrocms

我在使用 PayPal IPN 时遇到匿名问题。我正在开发一个简单的活动预订系统并使用 PayPal Standard 作为支付网关。

当我在沙盒模式下付款时，它会通过，但 PayPal 从未点击我的 IPN 网址，即[http://www.xxxx.xxx/xxxxx/xxxxxxx/ipn](http://www.xxxx.xxx/xxxxx/xxxxxxx/ipn)

在我的 IPN 函数中，当我点击我的 ipn url 时，我只记录只写“ipn 被触发”的消息，它只是记录消息，但是当我付款（沙盒模式）时，它从不记录消息。

你能帮我解决这个问题吗？我已经浪费了 4 天来解决这个问题，但仍然没有运气:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:13:22.753

[今天早些时候有一个问题，您可以在此处](https://www.x.com/content/correction-delay-receiving-instant-payment-notifications-ipns-mar-16)查看该问题的状态。另外，您是否尝试过从您设置的帐户中检查您的 IPN 历史记录。IPN 历史记录应显示 IPN 是否正在发送。历史记录将显示它是否发送成功、是否失败或是否处于重试状态。如果显示失败，您可以尝试检查该 IPN 消息的详细信息，看看它是否显示正在向 PayPal 返回的状态代码。这可能有助于确定问题出在哪里。[此处](https://www.x.com/developers/paypal/forums/ipn/pdt/ipn-troubleshooting-tips-0)的此页面也可以帮助您解决问题。

# javascript - 用javascript中的空格替换日期中的字符

> ID：15446228
> 
> 赞同：0
> 
> 时间：2013-03-16T06:18:39.473
> 
> 标签：javascript, date

我是javascript的新手。我正在处理一个有一个字段的json-

```
 "updated_time": "2013-03-16T05:33:57+0000", 
```

我想在该字段中用空格替换 T。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:20:11.673

该[`String.replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)函数将执行此操作：

[小提琴](http://jsfiddle.net/AaronBlenkush/XsW5C/)

```
//Your JSON string
var json = '{"updated_time": "2013-03-16T05:33:57+0000"}'; 

//Parse the string into object    
var o = JSON.parse(json);                                  

//Replace T in timestamp with space
o["updated_time"] = o["updated_time"].replace('T',' ');    

//Show result
alert(o["updated_time"]); 
```

# algorithm - 在图表上的鹰偷看视图

> ID：15446233
> 
> 赞同：0
> 
> 时间：2013-03-16T06:19:34.630
> 
> 标签：algorithm, graph-theory, graph-algorithm

我是图论的新手，我正在寻找一种算法来在图上找到鹰窥视或鹰视图。我有一个包含许多节点的大图，我想在屏幕上显示整个图。但是，如果我要按原样展示整个事情，那将是非常混乱的。我正在寻找一种算法，该算法将找到主图的突出子图，将其转换为特殊标记的单个节点，并用更少的节点重新创建图。这里特别标记的单个节点将代表我们之前找到的子图，它将代表其中的所有节点。从图的其余部分到突出子图中的任何节点的任何边都将显示为与这个特别标记的子图的连接。

在按下子图节点时，它将单独放大到子图。

为此，我正在寻找一种算法，该算法将找到主图的突出子图。

突出子图可以定义为耦合度更高的子图（或具有大量边的节点集）。任何符合这个标准的东西都对我有用。

图的行为

```
1) Number of nodes can span to any number but mostly in degree of 1000
2) Same with the edges. There is no restrictions on how many edges can come but those two mostly related with the number of nodes told above 
```

问题是，图表会非常大，我们不能以任何优雅的方式在屏幕上显示它。我正在寻找一种如此优雅的放置方式。

# php - PDO 默认使用哪种绑定类型？

> ID：15446238
> 
> 赞同：-4
> 
> 时间：2013-03-16T06:20:13.137
> 
> 标签：php, mysql, pdo

根据文档，您可以通过 3 种主要方式进行绑定：[http ://www.php.net/manual/en/pdostatement.execute.php](http://www.php.net/manual/en/pdostatement.execute.php)

```
$sth->bindParam(':colour', $colour, PDO::PARAM_STR, 12);

$sth->execute(array(':calories' => $calories, ':colour' => $colour));

$sth->execute(array($calories, $colour)); 
```

第一种方法，您可以指定 Param_(Str/int) 以匹配您的表并确保提供正确的用户信息。另外两个自动查找表是什么数据类型？另外两个如何选择他们的数据类型？似乎第一个更安全。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:35:10.717

您链接到的执行文档在参数下说：“所有值都被视为`PDO::PARAM_STR`

# c# - 用于计算行驶距离的sql查询

> ID：15446246
> 
> 赞同：0
> 
> 时间：2013-03-16T06:20:55.360
> 
> 标签：c#, sql

我有一张用于车辆和位置的表格

```
time   |  odo
_______
4:00   |   10

5:00   |   20

6:00   |  30

7:00   |  60

8:00   |  80 
```

我有另一个表，其中列出了上表中将存在时间/odo 的车辆，因此我需要从中选择一辆车`vehicleList_table`并在上表中进行一些连接。

`vehicleList_table`因此，如果我从开始时间和开始时间查询每辆车，我希望得到以下结果：

说`starttime`4:00 和`endtime`7:00：

```
___
vehicle  |  startTime  |  endTime  |  distanceTravelled
____
MH01k11   4:00        |     7:00     |      50   (i.e 60-10)
___ 
```

这是 wt 我需要我的数据集，因为我想在 gridview 中显示上述输出是否可以为上述内容编写查询，或者我是否需要依赖 c# 代码，我已经从通过它检索到的记录进行手动计算复杂的加载到gridview

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:24:10.083

您可以使用单个查询简单地执行此操作：

```
SELECT
  MIN(time)           AS StartTime,
  MAX(time)           AS EndTime,
  MAX(odo) - MIN(odo) AS distanceTravelled
FROM tablename
WHERE time BETWEEN '4:00' 
               AND '8:00'; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!3/fcbfd/1)

* * *

## 更新：

对于更新您的问题后您正在寻找的输出：

`JOIN`这两个表，并添加一个`WHERE`子句，这将为您提供`starttime`，`EndTime`并且`distanceTravelled`对于每辆车，都有一个`GROUP BY`：

```
SELECT
  v.vehicle,
  MIN(l.time) AS StartTime,
  MAX(l.time) AS EndTime,
  MAX(l.odo) - MIN(l.odo) AS travelled
FROM vehiclelist_table AS v
INNER JOIN locations as l ON v.vehicle_id = l.vehicle_id
WHERE l.time BETWEEN '4:00' AND '7:00'
GROUP BY v.vehicle; 
```

[**更新的 SQL Fiddle 演示**](http://sqlfiddle.com/#!3/6ef06/1)

这会给你类似的东西：

```
| VEHICLE | STARTTIME | ENDTIME | TRAVELLED |
---------------------------------------------
| MH01k11 |      4:00 |    7:00 |        50 |
| MHooooo |      4:00 |    7:00 |        50 | 
```

如果您只需要为特定车辆执行此操作，请在`WHERE`条款中添加。

我还假设了列名和表关系，因为您没有提供它们之间的关系，您可能需要修复列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:32:39.593

如果你想计算@Starttime 和@Endtime 之间的距离，那么你可以这样做：

```
Select @Starttime startTime,@Endtime Endtime,Max(odo)-Min(odo)
From YourTable
Where time Between @Starttime And @Endtime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:46:21.780

```
SELECT
  vt.vehiclename as VehicleName
  MIN(ot.time)           AS StartTime,
  MAX(ot.time)           AS EndTime,
  MAX(ot.odo) - MIN(ot.odo) AS distanceTravelled
FROM vehicleTable vt, othertable ot
where vt.vehicleid=ot.vehicleid 
ot.time between time1 and time2
group by vt.vehiclename; 
```

# javascript - 使用 JavaScript 为 Google Adsense 横幅打开的窗口

> ID：15446250
> 
> 赞同：0
> 
> 时间：2013-03-16T06:21:13.097
> 
> 标签：javascript, adsense, window.open

我想编写代码，以便使用 Javascript 为 Google Adsense 横幅打开窗口。但我不知道怎么做。我给你看我的代码：

```
 <div id="ad"> 
    <div> 
        <script type="text/javascript" language="JavaScript">
        <!-- function DoHideIFRAME(tid1,tid2,tid3) {
                document.getElementById(tid1).style.display = "none"; 
                document.getElementById(tid2).style.display = "none"; 
                document.getElementById(tid3).style.display = ""; 
            } //-->
        </script>
        <div id="postads"> 
            <a border="0" id="hideiframe" onclick="DoHideIFRAME('hideiframe','postads1','viewiframe');"> 
            <img src="img/adclose.png" width="5" height="5"> 
            </a> 
        </div> 
        <br/><br/> 
        <div id="postads1"> <script type="text/javascript">
            <!-- google_ad_client = "ca-pub-xxxxxxxxxxxx"; /* Adversitement */ google_ad_slot = "xxxxxxxxx"; google_ad_width = 300; google_ad_height = 250; //--> </script> 
            <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"> </script> 
        </div> 
    </div>
    <div> 
        <script type="text/javascript" language="JavaScript">
            <!-- function DoViewIFRAME(tid1,tid2,tid3) { 
                    window.open (); 
                    document.getElementById(tid1).style.display = "none"; 
                    document.getElementById(tid2).style.display = ""; 
                    document.getElementById(tid3).style.display = ""; 
                } 
                function DoHideIFRAME(tid1,tid2,tid3) { 
                    document.getElementById(tid1).style.display = "none"; 
                    document.getElementById(tid2).style.display = "none"; 
                    document.getElementById(tid3).style.display = ""; 
                } //-->
        </script> 
    </div> 
</div> 
```

我用这段代码添加了： `window.open ();`in function from of `DoViewIFRAME(tid1,tid2,tid3)`。

但它不起作用。为什么？问题是什么？

# jquery - 向 grails 表单添加和删除输入下拉列表

> ID：15446253
> 
> 赞同：1
> 
> 时间：2013-03-16T06:21:42.467
> 
> 标签：jquery, grails, controller, append, gsp

经过相当多的时间尝试。我决定发布一个问题。这是我想做的：

*   在表单中添加和删除下拉菜单。
*   从表单中删除选定的下拉列表。这意味着如果用户已经做出了一些选择，则应该可以删除例如选择了“选项 2”的下拉菜单。

到目前为止，根据 Gregg 对此 [问题] 的回答（[在按钮单击上从 Grails 模板添加表行](https://stackoverflow.com/questions/11581300/adding-table-rows-from-a-grails-template-on-button-click)），我有一个向表单添加下拉列表的表单。

但是因为我没有那么好......我刚刚添加的表格带有一段时间标签。

这是表格：

```
<div class="container-fluid">
<div class="row-fluid">
        <div class="span3" id="resources">
            <div class="control-group box" id="control-group">
                <div class="controls" id="resource-grouper">
                    <g:render template="resource" model="[end:1]"/>
                </div>
            </div>
        </div>
    </div>
</div> 
```

呈现的模板：每个下拉菜单都有一个按钮，用于在表单中添加或删除自身。

```
<%int i = 1 %>
<g:while test="${i <= end}">
<%i++%>
<div class="input-prepend">
<span class="add-on">
    <button class="btn btn-mini addResource" type="button" onclick="addResource();" >
        <i class="icon-plus-sign"></i>
    </button>
</span> <span class="add-on">
    <button class="btn btn-mini" type="button">
        <i class="icon-minus-sign"></i>
    </button>
</span>
<g:select name="resources" from="${org.pmo.sari.Resource.list()}" optionKey="id" size="1" value="${projectInstance?.resources*.id}" class="span10" />
</div>
</g:while> 
```

javascript（到目前为止仅用于添加）：

```
function addResource(){

    var end = document.getElementById('end').value;

    $.get("/SARI/project/addResource", {end: end} ,function(html) {

        $('#control-group').append(html);
    });
} 
```

控制器功能

```
def addResource(){
    int max = params.end.toInteger()
    max = max + 1
    render(template: "resource", model: ['end': max])
} 
```

如果有人对此主题有解决方案或评论，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:48:36.993

过了一段时间......我在 JQuery 的帮助下完成了它。我发布代码以防万一它对任何人有用......它运作良好......虽然我认为我不应该像我这样做的那样使用按钮的ID。欢迎提出建议。

```
 $('button.resources').on('click',function(){
            var clickedButton = $(this),
                    resourceContainer = clickedButton.parent('div'),
                    selectCounter = $('select.resources').size();

            if(clickedButton.attr('id')=='add'){

                var selector = clickedButton.siblings('select'),
                        newSelectContainer = resourceContainer.clone(true);

                newSelectContainer.find('select').val(selector.val());
                resourceContainer.after(newSelectContainer);
                selectCounter = selectCounter + 1;

                if(selectCounter > 1){
                    $('button.resources#remove').removeAttr('disabled');
                }
            }

            if(clickedButton.attr('id')=='remove'){
                if (selectCounter > 1){
                    resourceContainer.remove();
                    selectCounter = selectCounter - 1;
                    if(selectCounter == 1){
                        $('button.resources#remove').attr('disabled','disabled');
                    }

                }
            }
        }); 
```

被克隆和附加的片段：

```
<div class="fieldcontain" id="resources-container">
<label for="resources">
    <g:message code="project.resources.label" default="Resources" />
</label>
<button type="button" class="resources" id="add" >+</button>
<button type="button" class="resources" id="remove">-</button>
<g:select name="resources" class="resources" from="${someclass.list()}" optionKey="id" size="1" value="${someInstance?.resources*.id}"  />
</div> 
```

结果允许在单击后添加下拉框，并保留所选值。

# c# - 调试登录代码

> ID：15446257
> 
> 赞同：0
> 
> 时间：2013-03-16T06:23:01.403
> 
> 标签：c#

我有一些登录功能的代码。我无法在 try 语句中识别 return 语句，这似乎是唯一合乎逻辑的放置它的地方。当前返回语句所在的位置允许用户登录，即使密码不正确也是如此。如果我将 return 语句放在其他任何地方，我会收到错误“并非所有代码路径都返回值”。

```
 public static User selectUser(string userName, string password)
    {
       // code to validate user
        try
        {
                if (isUserValid)
                {
                    MessageBox.Show("Login successful!");
                }
                else
                {
                    MessageBox.Show("Login failed");
                }
            }
        }
        catch (Exception e)
        {
             MessageBox.Show(e.ToString());
        }
        return aUser;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:29:30.130

您应该仅在成功的情况下返回用户对象，否则返回 null。为了确定用户是否已通过身份验证，在使用 selectUser 方法时检查用户对象与 null

```
User aUser = null;
try {
            while (dbReader.Read())
            {
                if (dbReader.HasRows)
                {
                    MessageBox.Show("Login successful!");
                    aUser = new User();
                }
                else
                {
                    MessageBox.Show("Login failed");
                }
            }
        }

catch (Exception e) {
                        MessageBox.Show(e.ToString());
                    }
finally {
          return aUser;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T06:41:50.930

MSDN 在解释您得到的错误代码时有很好的错误示例 - [CS0161](http://msdn.microsoft.com/en-us/library/87cz4k9t%28v=VS.90%29.aspx)。

您的示例有多个“代码路径” - 表示根据 if/try 语句中的条件执行的命令序列。

以下是主要的可能路径：

1.  用户有效，无异常：try 块、消息框 1、函数结束
2.  用户无效，无例外：尝试块、消息框 2、函数结束
3.  验证期间的异常：try bloc、`catch`block、end of function

如果您仅从某些代码路径（即问题中的 1 和 2）返回结果并`return`从“函数结束”中删除，则 3 个代码路径中只有 2 个将具有 return 语句。

在您的情况下，修复可能是始终在函数结束时从您拥有有效用户对象的地方`return null;`跳出。`return validatedUser;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T06:36:41.133

```
 public static User selectUser(string userName, string password)
    {
        User aUser = new User();
        if (sConnection.State == ConnectionState.Closed)
            sConnection.Open();
        OleDbCommand cmd = sConnection.CreateCommand();
        OleDbDataReader dbReader = null;
        string sql = "SELECT * FROM [User] WHERE ([userName]='" + userName + "' AND [Password]='" + password + "')";
                        cmd.CommandText = sql;
            dbReader = cmd.ExecuteReader();
        try
        {
            while (dbReader.Read())
            {
                if (dbReader.HasRows)
                {
                    MessageBox.Show("Login successful!");
                    aUser.UserName = username;
                    return aUser;
                }
                else
                {
                    MessageBox.Show("Login failed");
                    aUser.UserName =string.empty;
                }
            }
        }
        catch (Exception e)
            {
                MessageBox.Show(e.ToString());
                aUser.UserName = string.empty;
            }
        return aUser;
    }调用此函数后，检查返回 IsNULLofEmpty(aUser.Username)

            回答 #4

赞同：2

时间：2013-03-16T06:40:32.577

是的，如果至少存在一个不返回 User 类型变量的流，C# 将不允许您这样做。您的代码应该可以正常工作，因为它确实返回了 User 类型的变量。你应该做的是，不要在你的函数中显示消息，在你调用它的地方实现它，只需在调用语句周围放置一个 try catch 块，这样你就知道当用户不存在时发生了什么（对象函数返回的必须有一些你可以检查的属性）

在这种情况下，您可能可以在 if else 条件下检查函数返回值以相应地显示消息

            回答 #5

赞同：-1

时间：2013-03-16T06:31:39.633

在您的视图逻辑中而不是在您的业务逻辑中处理异常。

像这样的东西：

```
class View
{
    public void Login(string username, string password)
    {
        try
        {
            var user = _users.SelectUser(username, password);
            MessageBox.Show(
                string.Format("valid user: {0}", user.UserName));
        }
        catch (InvalidUserNameOrPasswordException)
        {
            MessageBox.Show("Invalid username or password");
        }
    }
}

public class Users
{
    public User SelectUser(string userName, string password)
    {
        if (!ValidUser)
        {
            throw InvalidUserNameOrPasswordException();
        }

        return new User();
    }
} 
```

请注意，此解决方案不需要**对**`if-else`方法的结果调用代码。

-  更新  - 

现在只捕获 InvalidUserNameOrPasswordException

-- 更新2 --

我要说明的一点是，建议并接受基于异常的编程作为解决方案。如需进一步参考，请通读这篇（讽刺的）帖子，其中以有趣且有点讽刺的方式解释了[基于异常的编程。](http://blog.arc90.com/2008/04/01/exception-based-programming-a-primer/)

```

# php - php 获取变量清理 url htaccess

> ID：15446262
> 
> 赞同：0
> 
> 时间：2013-03-16T06:23:36.023
> 
> 标签：php, wordpress, url-rewriting

我有一些用于 WordPress 网站的自定义 PHP 页面。我想通过 GET 方法使用具有几个变量的干净 URL。我已经搜索并尝试了我的 htaccess 代码的不同变体以及下面的 WordPress htaccess 代码，但没有成功。

我希望用户浏览和使用的 URL 是 www.thedomain.com/thefolder/details/123456/RES，而不是 www.thedomain.com/thefolder/details.php?mls=123456&ret=RES

我已将代码放在根目录的 htaccess 文件中。我也在 details.php 文件所在目录的 htaccess 中自己尝试过。

```
RewriteEngine On

## WordPress code
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ./ /index.php [L]

## my code
RewriteBase /thefolder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9]+)$ details.php?mls=$1&ret=$2
RewriteRule ^([a-zA-Z0-9]+)/$ details.php?mls=$1&ret=$2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:29:32.003

您可以将 QSA 添加到 RewriteRule 标志：

RewriteRule {from-url} {to-url} [L,NC,QSA]

```
RewriteRule page_([0-9]+)\.html page.php?id=$1 [QSA] 
```

将 page_1.html?a=2 重定向到 page.php?id=1&a=2

但是，请注意，因为请求 page_1.html?id=2 将重定向到 page.php?id=1&id=2，并且（在 PHP 中）$_GET['id'] 将为 2。

# javascript - Javascript对象值没有得到正确的值

> ID：15446263
> 
> 赞同：1
> 
> 时间：2013-03-16T06:23:45.263
> 
> 标签：javascript, html5-canvas, closures

我正在编写一个类项目（我们必须使用 HTML5 画布构建一个 Frogger 游戏），并且我有一堆对象可以帮助我完成不同的事情，例如碰撞检测、运动等。

下面的对象就是其中之一。每个视图都包含一个 Frame 对象，该对象包含一个函数调用 hitTest，该函数调用检查其帧是否与传入的帧发生冲突。出于某种原因，`this.lr`保留了它在游戏开始时最初设置的值，我无法弄清楚为什么它没有根据不断变化的原点进行更新。

```
function Frame(origin, size) {
    this.origin = utility.checkPoint(origin);
    this.size = utility.checkSize(size);
    var self = this;

    this.lr = (function () {
        return utility.checkPoint(new Point(self.origin.x + self.size.width, self.origin.y + self.size.height));
    }());

    this.tr = (function () {
        return utility.checkPoint(new Point(self.origin.x + self.size.width, self.origin.y));
    }());

    this.ll = (function () {
        return utility.checkPoint(new Point(self.origin.x, self.origin.y + self.size.height));
    }());

    /* Returns true if the two frames share any common pixels */

    this.hitTest = function (frame) {
        var isInXBounds = function (p) {
            return (p.x >= self.origin.x && p.x <= self.tr.x);
        };

        var isInYBounds = function (p) {
            return (p.y >= self.origin.y && p.y <= self.lr.y);
        };

        var isContained = function (p) {
            return (isInXBounds(p) && isInYBounds(p));
        };

        return isContained(frame.origin) || isContained(frame.tr) || isContained(frame.lr) || isContained(frame.ll);
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:52:29.310

这就是我写你的`Frame`课的方式：

```
Frame.prototype.lr = function () {
    var x = this.origin.x + this.size.width;
    var y = this.origin.y + this.size.height;
    return utility.checkPoint(new Point(x, y));
};

Frame.prototype.tr = function () {
    var x = this.origin.x + this.size.width;
    return utility.checkPoint(new Point(x, this.origin.y));
};

Frame.prototype.ll = function () {
    var y = this.origin.y + this.size.height;
    return utility.checkPoint(new Point(this.origin.x, y));
};

Frame.prototype.isContained = function (point) {
    var isInXBounds = point.x >= this.origin.x && point.x <= this.tr().x;
    var isInYBounds = point.y >= this.origin.y && point.y <= this.lr().y;
    return isInXBounds && isInYBounds;
};

Frame.prototype.hitTest = function (frame) {
    return this.isContained(frame.origin) || this.isContained(frame.tr) ||
           this.isContained(frame.lr) || this.isContained(frame.ll);
};

function Frame(origin, size) {
    this.origin = utility.checkPoint(origin);
    this.size = utility.checkSize(size);
} 
```

对于来自古典背景的人来说，原型继承可能相当令人生畏。这是原型继承的简单解释：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

有很多库可以帮助经典程序员使用 JavaScript。例如我自己的[扩充](https://github.com/javascript/augment)库。以下是您将如何使用以下方法编写上述类`augment`：

```
var Frame = Object.augment(function () {
    this.constructor = function (origin, size) {
        this.origin = utility.checkPoint(origin);
        this.size = utility.checkSize(size);
    }

    this.lr = function () {
        var x = this.origin.x + this.size.width;
        var y = this.origin.y + this.size.height;
        return utility.checkPoint(new Point(x, y));
    };

    this.tr = function () {
        var x = this.origin.x + this.size.width;
        return utility.checkPoint(new Point(x, this.origin.y));
    };

    this.ll = function () {
        var y = this.origin.y + this.size.height;
        return utility.checkPoint(new Point(this.origin.x, y));
    };

    this.isContained = function (point) {
        var isInXBounds = point.x >= this.origin.x && point.x <= this.tr().x;
        var isInYBounds = point.y >= this.origin.y && point.y <= this.lr().y;
        return isInXBounds && isInYBounds;
    };

    this.hitTest = function (frame) {
        return this.isContained(frame.origin) || this.isContained(frame.tr) ||
               this.isContained(frame.lr) || this.isContained(frame.ll);
    };
}); 
```

另外，由于您想知道真正的闭包是什么，我建议您阅读以下答案：[https ://stackoverflow.com/a/12931785/783743](https://stackoverflow.com/a/12931785/783743)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:29:36.890

您正在立即执行该功能

```
this.lr = (function () {
    return utility.checkPoint(new Point(self.origin.x + self.size.width, self.origin.y + self.size.height));
}()); 
```

结果， lr 在那个地方被赋予了一个值，并且永远不会改变。

你想要的只是：

```
this.lr = function () {
   return utility.checkPoint(new Point(self.origin.x + self.size.width, self.origin.y + self.size.height));
}; 
```

这将 lr 定义为将来可以根据需要调用的*方法。*

# django - django：使用列值作为互斥体 - 在 django 中唯一地更新列？（带 SQL 示例）

> ID：15446270
> 
> 赞同：0
> 
> 时间：2013-03-16T06:24:41.703
> 
> 标签：django

将问题简化为本质，我想在 django 中本地执行此操作，而不是嵌入 sql：

```
UPDATE job SET state_id = 100
WHERE job.id = 1 and 0 in (select count(*) from job where state_id = 100); 
```

当且仅当当前状态 100 中有 0 个作业时，此 SQL 语句将**自动**将状态更新为 100。

本质上，我只希望一份工作处于 100 州。

这可以在 django 本地完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:15:17.963

我想我有自己的解决方案......这基本上锁定了表中的所有行，直到事务提交。（这不是很理想）

```
# X is the job id to uniquely put into state 100.

with transaction.commit_on_success()
    count = 0
    myjob = None
    for job in Job.objects.select_for_update().all():
        if job.state_id == 100:
            count +=1
        if job.id == X:
            myjob = job
    if count == 0 and myjob:
        myjob.state_id = 100
        myjob.save() 
```

或者，您还可以创建一个锁定表来跟踪哪个作业处于唯一状态，

```
class StateLock(Model):
    # XXX: could add an expiration column, too.
    state = ForeignKey(State)
    locker = ForeignKey(Job, null=True)  # Use IntegerField until 
                                         # django bug 16715 is fixed!! 
```

并使用

```
# lock:
StateLock.objects.filter(state=100, locker=None).update(locker=job.id)

# unlock:
StateLock.objects.filter(state=100, locker=job.id).update(locker=None) 
```

注意：在 django 错误 16715 修复之前，可空外键被破坏。否则生成的查询不正确。用 PositiveIntegerField 替换。

# java - EclipseME eclipseme-build.xml

> ID：15446271
> 
> 赞同：0
> 
> 时间：2013-03-16T06:24:46.863
> 
> 标签：java, eclipse

好吧，首先我在导出天线文件 ant build : build.xml 时遇到了几个问题，但这很容易解决，因为我找到了解决方案。

现在，当我尝试对 eclipseme-build.xml 执行相同操作时，出现错误：

```
 [taskdef] Could not load definitions from resource antenna.properties. 
It could not be found.

BUILD FAILED
C:\Documents and Settings\...\eclipseme-build.xml:21: Problem: failed to create task or type wtkbuild`
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
```

这条线是这样的：

```
<target depends="-eclipseme-initialize" name="-eclipseme-build">
  <echo message="Building source files..."/>
  <wtkbuild destdir="${path.build.classes}" encoding="${src.encoding}" source="1.3" sourcepath="" srcdir="${project.root.Client}/res">
     <classpath refid="classpath.Client"/>
  </wtkbuild>
  <wtkbuild destdir="${path.build.classes}" encoding="${src.encoding}" source="1.3" sourcepath="" srcdir="${project.root.Client}/src">
     <classpath refid="classpath.Client"/>
  </wtkbuild> 
```

顺便说一句，我需要做什么步骤才能成功导出一个 jar 文件，它可以在模拟器上运行，因为现在它说“找不到 Midlet 类”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:03:09.177

通过更新ant版本解决了这个问题。

如果您遇到这个问题，首先从[http://ant.apache.org/bindownload.cgi下载新的 Ant 版本](http://ant.apache.org/bindownload.cgi)

然后继续 eclipse ：“Window”-“Prefereces”-“Ant”-“Runtime”ant 那里你会看到一个按钮 Ant Home。

# python - 多个蓝图的 Before_request

> ID：15446276
> 
> 赞同：8
> 
> 时间：2013-03-16T06:25:09.287
> 
> 标签：python, flask

这是我的情况：

假设我有 2 个蓝图 before_request 方法：

```
mod = Blueprint('posts', __name__, url_prefix='/posts')

@mod.before_request
def before_request():
  #some code that uses SQLAlchemy here 
  pass 
```

现在我不想在第二个蓝图中复制这个方法中的逻辑。

我怎样才能做到这一点？

PS：我是 Python 新手，所以我可能会遗漏一些明显的东西。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T06:28:45.633

用于[`blueprint.before_app_request`](http://flask.pocoo.org/docs/api/#flask.Blueprint.before_app_request)应用程序范围内的视图，而不仅仅是同一蓝图中的视图

# asp.net-mvc - 用于 Mb/kb 格式的 Jqgrid 文件大小格式化程序

> ID：15446277
> 
> 赞同：0
> 
> 时间：2013-03-16T06:25:21.333
> 
> 标签：asp.net-mvc, jqgrid, filesize

是否有用于显示 Kb 或 Mb 文件大小的格式化程序选项`JQ Grid`？

```
jQuery().ready(function ($) {
         var colModel = [     
                        { name: 'Size', index: 'Size', sortable: false, search: false, align: 'left', width: 100, formatoptions: {suffix:'kb'} },
                         ]; 
```

这似乎不起作用？请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:02:22.917

尝试这个

```
formatter:'currency',formatoptions:{ decimalSeparator:".", thousandsSeparator: "", decimalPlaces: 0, prefix: "", suffix:" kb"} 
```

我在小数点上有一些问题，这就是我使用`decimalSeparator,thousandsSeparator`and的原因`decimalPlaces`，请根据您的要求使用它

# string - 定义一个包含"的字符串

> ID：15446285
> 
> 赞同：3
> 
> 时间：2013-03-16T06:26:12.490
> 
> 标签：string, r

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:35:39.807

Using [substr](http://stat.ethz.ch/R-manual/R-patched/library/base/html/substr.html), one sees that the backslashes seem just to be an artefact of printing:

```
substr(my.string,2,2) 
```

gives

```
[1] "\"" 
```

also, the string length is as you want it:

```
> nchar(my.string)
[1] 3 
```

if you want to print your string without the backslashes, use [noquote](http://stat.ethz.ch/R-manual/R-devel/library/base/html/noquote.html) :

```
> noquote(my.string)
[1] a"" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T07:59:12.957

The backslashes is an artifact of the print method. In fact the default `print` surrounds your string with quotes. You can disable this by setting argument `quote` to FALSE.

For example You can use :

```
print(my.string,quote=FALSE)
[1] a"" 
```

But I would use `cat` or `write` like this :

```
 cat(my.string)
a""
 write(my.string,"")
a"" 
```

# javascript - 如何通过表单向 Google Map API 提交邮政编码

> ID：15446293
> 
> 赞同：0
> 
> 时间：2013-03-16T06:27:49.743
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google maps api [here的这个例子](https://developers.google.com/maps/articles/phpsqlsearch_v3?hl=de)

地图根据硬编码的坐标进行初始化。我的问题是“addressInput”无法识别，地图只是继续显示相同的视图。我认为地理编码器表达式存在问题。

这是我的 HTML 文件

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>ShopRight Store Locator</title>
    <script src="http://maps.google.com/maps/api/js?sensor=false"
            type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
    var map;
    var markers = [];
    var infoWindow;
    var locationSelect;

    function load() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(43.7, -79.4),
        zoom: 11,
        mapTypeId: 'roadmap',
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
      });
      infoWindow = new google.maps.InfoWindow();

      locationSelect = document.getElementById("locationSelect");
      locationSelect.onchange = function() {
        var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
        if (markerNum != "none"){
          google.maps.event.trigger(markers[markerNum], 'click');
        }
      };
   }

   function searchLocations() {
     var address = document.getElementById("addressInput").value;
     var geocoder = new google.maps.Geocoder();
     geocoder.geocode({address: address}, function(results, status) {
       if (status == google.maps.GeocoderStatus.OK) {
        searchLocationsNear(results[0].geometry.location);
       } else {
         alert(address + ' not found');
       }
     });
   }

   function clearLocations() {
     infoWindow.close();
     for (var i = 0; i < markers.length; i++) {
       markers[i].setMap(null);
     }
     markers.length = 0;

     locationSelect.innerHTML = "";
     var option = document.createElement("option");
     option.value = "none";
     option.innerHTML = "See all results:";
     locationSelect.appendChild(option);
   }

   function searchLocationsNear(center) {
     clearLocations(); 

     var radius = document.getElementById('radiusSelect').value;
     var searchUrl = 'storelocator.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
     downloadUrl(searchUrl, function(data) {
       var xml = parseXml(data);
       var markerNodes = xml.documentElement.getElementsByTagName("marker");
       var bounds = new google.maps.LatLngBounds();
       for (var i = 0; i < markerNodes.length; i++) {
         var name = markerNodes[i].getAttribute("name");
         var address = markerNodes[i].getAttribute("address");
         var distance = parseFloat(markerNodes[i].getAttribute("distance"));
         var hours = markerNodes[i].getAttribute("hours");
         var phone = markerNodes[i].getAttribute("phone");
         var latlng = new google.maps.LatLng(
              parseFloat(markerNodes[i].getAttribute("lat")),
              parseFloat(markerNodes[i].getAttribute("lng")));

         createOption(name, distance, i);
         createMarker(latlng, name, address, hours, phone);
         bounds.extend(latlng);
       }
       map.fitBounds(bounds);
       locationSelect.style.visibility = "visible";
       locationSelect.onchange = function() {
         var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
         google.maps.event.trigger(markers[markerNum], 'click');
       };
      });
    }

    function createMarker(latlng, name, address, hours, phone) {
      var html = "<b>" + name + "</b> <br/>" + address+"</b> <br/>" + hours+"</b> <br/>" +phone;
      var marker = new google.maps.Marker({
        map: map,
        position: latlng
      });
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
      markers.push(marker);
    }

    function createOption(name, distance, num) {
      var option = document.createElement("option");
      option.value = num;
      option.innerHTML = name + "(" + distance.toFixed(1) + ")";
      locationSelect.appendChild(option);
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request.responseText, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function parseXml(str) {
      if (window.ActiveXObject) {
        var doc = new ActiveXObject('Microsoft.XMLDOM');
        doc.loadXML(str);
        return doc;
      } else if (window.DOMParser) {
        return (new DOMParser).parseFromString(str, 'text/xml');
      }
    }

    function doNothing() {} 
```

有人可以指出我在哪里调查。TIA

# html - 段落中的不透明度更改更改文本不透明度和背景不透明度

> ID：15446294
> 
> 赞同：5
> 
> 时间：2013-03-16T06:27:51.923
> 
> 标签：html, css, opacity

每当我尝试更改段落的不透明度时，它会更改文本和背景的不透明度，我想要更改的只是文本的背景，我将如何解决这个问题？

HTML

```
<div id="opener">
 <p id="introText">
  Adam Ginther is a<class id="blueText"> front-end developer</class> with an interest in responsive & mobile design
 </p>
</div> 
```

css

```
#opener {
        background-image: url('images/background.jpg');
        background-color: #373737;
        height: 800px;
        width: 100%;
        position: fixed;
        }

#introText {
        width: 400px;
        color: white;
        background-color: black;
        text-align: center;
        display: table-cell;
        position: absolute;
        top: 50%;
        left: 50%;
        padding: 50px 80px 50px 80px;
        font-family: 'Fenix', serif;
        font-size: 1em;
           }
#blueText {
        color:#00aeff;
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:35:47.953

更改 #introtext 的背景颜色的 alpha 值：

```
background-color: rgba(0, 0, 0, 0.1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:37:08.187

试试这个css，它将不透明度更改为段落背景而不是文本

```
p{background: rgba(0,0,0,0.60);} 
```

[演示](http://jsfiddle.net/ewa2r/)

用于对齐文本使用 css

```
text-align:center; 
```

[文本中心对齐演示](http://jsfiddle.net/ewa2r/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:36:09.407

用于`rgba()`指定半透明背景颜色，而不是将其应用于所有内容。

```
/* black, 50% opacity */
background-color: rgba(0, 0, 0, .5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T06:47:18.043

Opacity 倾向于级联到子元素，即如果你将一个 div 的 opacity 设置为 0.5，它的所有子元素将具有相同的 opacity，所以使用 background-color 属性来改变背景颜色和不透明度。

* * *

您的文本居中问题是因为您使用的样式。任何使用理由

```
display: table-cell; ? 
```

你也可以换

```
position: absolute;
top: 50%;
left: 50%; 
```

经过

```
margin: 0 auto; 
```

使其水平居中。

如果您希望它位于页面中间，请按照以下步骤操作：[垂直居中元素](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

# yii - 如何在 Yii CDetailView 中获取相关模型的标签？

> ID：15446298
> 
> 赞同：0
> 
> 时间：2013-03-16T06:28:16.497
> 
> 标签：yii

有什么方法可以访问相关模型标签？这里 w_experience 是在 worker 中定义的，因为 $model 没有这个标签，所以会出现 W Experience 而不是 worker 模型值！

```
 $this->widget('zii.widgets.CDetailView',
    array( 'data'=>$model, 
    'attributes'=>array( 
        array('name'=>'w_experience', 'value'=>$model->worker->w_experience==NULL?'-':$GLOBALS['worker_experience_options'][$model->worker->w_experience]),
        ), 
    'cssFile' => Yii::app()->theme->baseUrl."/css/darktable.css", )
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:41:35.227

采用

```
array(
  'name' => 'worker.w_experience',
  'value' => ...
), 
```

`worker`你的关系的名字在哪里。

* * *

属性名称通常使用`CModel::getAttributeLabel`. 如果您的模型是从 派生的`CActiveRecord`，就像默认情况下所有数据库支持的模型一样，它的[`getAttributeLabel`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getAttributeLabel-detail)实现可以像这样从相关对象中获取标签。

# javascript - 单击图像时显示/隐藏多个 div

> ID：15446304
> 
> 赞同：4
> 
> 时间：2013-03-16T06:29:03.737
> 
> 标签：javascript, jquery, html

我对编码很陌生，所以请耐心等待。我查看了针对同一问题发布的一些已回答的问题，并且在将我的信息输入到一些已解决的 jsfiddle 链接中时使代码正常工作。

问题是：当我将工作代码插入我的 HTML 和 JS 文件时，它似乎不起作用。我查看了我的代码，但不确定是什么破坏了它或为什么它没有显示。我想知道是否有人可以查看我的代码并告诉我为什么？

我正在谈论的部分是浏览菜单和菜单输出部分。基本上，如果您在浏览菜单导航中单击图像（杂食、素食、健康），则会显示相应的菜单输出。

我还在这篇文章中包含了我的 HTML 和 JS。样式和间距现在有点乱，因为我一直在修改我的标记中的东西。我最近还读到表格很糟糕，所以我将在我的 html 中将其更改为无序列表。

非常感谢！

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title>Spice Up Your Love Life: An Interactive Dating Experience</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="date, interactive, cooking, culinary, dating, couple, love, date ideas, vancouver, spice, love life, experience">
    <meta name="Spice Up Your Love Life" content="SpiceUpYourLoveLife.com is an interactive dating experience in which you and your date can cook a meal together. Eat your heart out!">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style2.css">
    <link href='http://fonts.googleapis.com/css?family=Rokkitt:400,700' rel='stylesheet' type='text/css'>
        <style type="text/css">
        @font-face{ 
            font-family: "talldark";
            src: url('http://fontsforweb.com/public/fonts/383/talldark.eot');
            src: local("Tall Dark And Handsome Condensed"), url('http://fontsforweb.com/public/fonts/383/talldark.woff') format("woff"), url('http://fontsforweb.com/public/fonts/383/talldark.ttf') format("truetype");
        }
        .diettitle {
            font-family: "talldark";
            font-size: 6em;
            letter-spacing: 5px;
            color: #b5a839;
        }
        .testerz {
            font-family: "talldark";
            font-size: 1em;
            letter-spacing: 4px;
            color: #b5a839;
        }
    </style>
</head>
<body>

<header>
Spice Up Your Love Life: An Interactive Dating Experience
</header>

<div id="topnavcontainer">
    <table id="topnav">
        <tr>
            <td id="break"><a href="google.ca">Breakfast</a></td>
            <td id="lunch"><a href="google.ca">Lunch</a></td>
            <td id="dinner"><a href="google.ca">Dinner</a></td>
            <td id="appetizer"><a href="google.ca">Appetizer</a></td>
            <td id="desert"><a href="google.ca">Desert</a></td>
            <td id="snack"><a href="google.ca">Snack</a></td>
        </tr>
    </table>
</div>

    <table id="mainnav">
        <tr>
            <td id="home" class="bordernav"><a href="google.ca">Home</a></td>
            <td id="works" class="bordernav"><a href=".waves">How It Works</a></td>
            <td id="menu" class="bordernav"><a href="#diet">Menu</a></td>
            <td id="mainnavbordernone"></td>
            <td id="tips" class="bordernav"><a href="google.ca">Tips and Tricks</a></td>
            <td id="contact" class="bordernav"><a href="google.ca">Test Skills</a></td>
            <td id="share" class="bordernav"><a href="google.ca">Share</a></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td id="logo"><a href="test.html"><img src="images/logo.png" alt="Spice Up Your Love Life Logo" width="189" height="170"></a></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td id="spicetitle" class="title">SPICE</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td id="upyourtitle" class="title">UP  &nbsp;YOUR</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td id="lovelifetitle" class="title">LOVE LIFE</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>

    <div class="container">
    <!--SPLASH CONTENT-->
    <div class="content">
    <div id="leftgrid">
    <img src="images/block.jpg" width="300" height="184"><br>
    <p class="contentheader">HOW DOES IT WORK?</p><br>
    <p class="contentdescribed">Does it sound too good to be true? --- Well, it's not!  See how it works and and how it all started. </p>
    <p class="contentcalltoaction"><a href=".waves">See how it works</a></p>
    </div>

    <div id="middleleftgrid">
    <img src="images/block.jpg" width="300" height="184"><br>
    <p class="contentheader">WHAT'S FOR DINNER?</p><br>
    <p class="contentdescribed">Eat your heart out! Browse our menu and select what 
    you'd like to cook for your     special date. </p>
    <p class="contentcalltoaction"><a href="#diet">Look at the menu</a></p>
    </div>

    <div id="middlerightgrid">
    <img src="images/block.jpg" width="300" height="184"><br>
    <p class="contentheader">IMPRESS YOUR DATE!</p><br>
    <p class="contentdescribed">Don't get caught with your elbows on the table! 
    These tips will have them wanting seconds! </p>
    <p class="contentcalltoaction"><a href="google.ca">Learn tips and tricks</a></p>
    </div>

    <div id="rightgrid">
    <img src="images/block.jpg" width="300" height="184"><br>
    <p class="contentheader">GOT WHAT IT TAKES?</p><br>
    <p class="contentdescribed">Put your skills to the test! Take our multiple choice test to see what culinary level you're at!</p>
    <p class="contentcalltoaction"><a href="google.ca">Test your skills</a></p>
    </div>
    </div>

    <!-- HOW IT WORKS SECTION -->
    <div id="howitworkssec">
    <div class="waves"></div>
        <h3 class="headliners"><strong>How does it work?</strong></h3>
        <img src="images/silboth.png" alt="dating silhouette" width="875" height="499"> 
    </div>

    <div id="howdesdiv">
    <p id="simpleas">It's as simple as 1, 2, 3.</p>
    <p id="howdes">
            1\. Do this thing and that blah blah<br>
            2\. Then you do this lolol can you believez it?<br>
            3\. I'll add the actual content when the site is finished.<br>
        </p>
        <a href="#diet" alt="Browse Menu">Let's begin!</a>
    </div>

<!--BROWSE MENU-->
<div id="diet">
 <h3 id="meal" class="headliners">Meal Type</h3>
    <p id="lefty" class="curly">{</p>
    <p id="righty" class="curly">}</p>
<div class="dietchoice"><a href="#meat"><img src="images/carnivoreb.png" alt="meat options" width="90" height="93" /><h3 class="testerz">Omnivore</h3></a></div>
<div class="dietchoice"> <a href="#veggie"><img src="images/vegetarianb.png" alt="meat options" width="90" height="93" /><h3 class="testerz">Vegetarian</h3></a> </div>    
<div class="dietchoice"> <a href="#healthy"><img src="images/healthyb.png" alt="meat options" width="90" height="34" /><h3 class="testerz">Healthy</h3></a> </div>     

<!--MENU OUTPUT-->
<div id="output">
    <div id="meat">
    <p class="diettypeheading">Magnificent Meat Dishes</p>
    <img src="images/centermeatballs.jpg" alt="meatballsplash" width="600" height="400" id="meatleft" >
    <img src="images/centerchicken.jpg" alt="meatballsplash" width="533" height="400" id="meatcenter">
    <img src="images/centersteak.jpg" alt="meatballsplash" width="529" height="400" id="meatright">
    </div>

    <div id="veggie">
    <p class="diettypeheading">Fresh, Colourful Dishes</p>
    <img src="images/centermeatballs.jpg" alt="meatballsplash" width="600" height="400" id="meatleft" >
    <img src="images/meatballs.jpg" alt="meatballsplash" width="533" height="400" id="meatcenter">
    <img src="images/centersteak.jpg" alt="meatballsplash" width="529" height="400" id="meatright">
    </div>      

    <div id="healthy">
    <p class="diettypeheading">Diabetic and Heart Healthy Meals</p>
    <img src="images/centermeatballs.jpg" alt="meatballsplash" width="600" height="400" id="meatleft" >
    <img src="images/centerchicken.jpg" alt="meatballsplash" width="533" height="400" id="meatcenter">
    <img src="images/meatballs.jpg" alt="meatballsplash" width="529" height="400" id="meatright">
    </div>          
</div>

     <!--END OF CONTENT-->  
    <div class="splashimage">
    <img src="images/banner3.png" alt="splash image" width="1664" height="400">
    </div>

    <div id="sitemap">
            <table class="sitemaptab">
  <tr id="sitemaptitles">
    <th>Get Social</th>
    <th>Quick Links</th>
    <th>Terms of Use</th>
  </tr>
    <tr id="row_two">
    <td class="social"><a href="twitter.com"><img src="images/socialmedia/twit_sm.png" alt="sm-twiticon">Follow Us On Twitter</a></td>
    <td class="quicklinks"><a href="#topnavcontainer">Home</a></td>
    <td class="terms"><a href="google.ca">Privacy Policy</a></td>
  </tr>
  <tr id="row_three">
    <td class="social"><a href="facebook.com"><img src="images/socialmedia/fb_sm.png" alt="sm-fbicon">Like Us On Facebook</a></td>
    <td class="quicklinks"><a href="#menudiv">Browse Menu</a></td>
    <td class="terms"><a href="google.ca">Contact</a></td>
  </tr>
    <tr>
    <td> </td>
    <td class="quicklinks"><a href=".waves">How It Works</a></td>
    </tr>
    <tr>
    <td></td>
    <td class="quicklinks"><a href="google.ca">Tips and Tricks</a></td>
    </tr>
    <tr>
    <td></td>
    <td class="quicklinks"><a href="google.ca">Share</a></td>
  </tr>
</table>
    </div>

<footer>
    <table id="footer">
        <tr>
            <td id="copyright">Copyright © Spice Up Your Love Life 2013</td>
            <td id="webdesby">Web Design By: <a href="http://google.ca">Ticking and Talking Media</a></td>
        </tr>
    </table>
</footer>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="js/spicelovelife.js"></script>
<script src="js/plugins.js"></script>
<script src="js/vendor/jquery-1.9.0.min.js"></script>
<script src="js/vendor/modernizr-2.6.2.min.js"></script>
</body>
</html> 
```

JavaScript：

```
// Scrolling Function
$('a').click(function(){
    $('html, body').animate({
        scrollTop: $( $(this).attr('href') ).offset().top
    }, 500);
    return false;
});

// Load All Images
$('body').waitForImages({
    waitForAll: true,
    finished: function() {
       // All images have loaded.
    }  
});

//Hide All Divs
$("#output > div").hide();

$(".dietchoice a").click(function(e) {
  $("#output div").hide();
  $(this.hash).show();
  e.preventDefault();
});
$("#areas div:not(#meat)").hide(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:14:02.350

代替

```
$(this.hash).show(); 
```

你可能应该使用

```
$(this.attr('href')).show(); 
```

`this.hash`可能返回 undefined 因为该属性`hash`不存在。

如果我的解决方案抛出类似“未定义方法 attr()”的错误，您可能需要使用 jQuery 选择器。

```
$($(this).attr('href')).show(); 
```

我建议使用控制台对象进行调试。[你可以在Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Debugging_JavaScript)上找到一些关于调试的文档。

此选择器`$("#output > div")`与此选择器不同`$("#output div")`。根据您的 HTML，两个选择器返回相同的元素，但如果您要更改 HTML 结构，可能会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:46:40.150

尝试，将modernizr、jquery和插件脚本放在你的代码之前，意思是改变这个：

```
<script src="spicelovelife.js"></script>
<script src="js/plugins.js"></script>
<script src="js/vendor/jquery-1.9.0.min.js"></script>
<script src="js/vendor/modernizr-2.6.2.min.js"></script> 
```

对此：

```
<script src="js/vendor/jquery-1.9.0.min.js"></script>
<script src="js/plugins.js"></script>
<script src="js/vendor/modernizr-2.6.2.min.js"></script>
<script src="js/spicelovelife.js"></script> 
```

希望这有帮助。

# java - 如何避免空检查

> ID：15446305
> 
> 赞同：0
> 
> 时间：2013-03-16T06:29:09.970
> 
> 标签：java, null, dry

我有一堂课，里面有很多字符串字段。在所有这些字段的 setter 方法中，我必须进行这样的检查（因为数据可能为空）：

```
public void setAddress1(String address1)
{
    this.address1 = Contract.checkNull(address1, "");
} 
```

类**合同**如下：

```
public class Contract
{
   public static checkNull(String input, String output)
   {
      return (null == input) ? output : input;
   }
} 
```

我有几个字段，例如上面的“address1”。除了上述之外，还有什么好的方法可以避免null吗？我已阅读[避免 != null](https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java)，但这适用于这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:50:25.150

如果您使用 java EE，则可以使用 java 验证 API。[NotNull](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/NotNull.html)是 EE6 标准。

```
@NotNull
private String address1;
public void setAddress1(String address1)
{
    this.address1 = address1;
} 
```

如果你不这样做，你仍然可以使用类似但非标准的东西。

另一种好方法是使用[Null Object Pattern](http://en.wikipedia.org/wiki/Null_Object_pattern#Java)。在那里，即使是空值也被表示为对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T06:57:26.923

我建议您导入 Apache String 实用程序，因为您有很多 String notnull 检查。因为这个实用程序提供的所有方法都是空安全的，这意味着当参数为空时，它不会抛出 NullPointException 并且可以很好地处理它。[这](http://commons.apache.org/proper/commons-lang/apidocs/index.html)是它的API

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T06:41:25.257

您可以使用`StringUtils.defaultString`Apache [Commons Lang](http://commons.apache.org/proper/commons-lang//)

```
public void setAddress1(String address1)
{
    this.address1 = StringUtils.defaultString(address1, "");
} 
```

# asp.net-mvc - 如何防止保存重复数据？

> ID：15446312
> 
> 赞同：0
> 
> 时间：2013-03-16T06:29:49.503
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在开发 MVC 应用程序。

我在 Creat-Veiw 中使用 Jquery 来验证数据。

我正在添加角色并检查该角色（或者您可以说用户名）是否已经存在于数据库中。如果角色已经存在，则应显示验证消息并且不应允许添加到数据库中（不应允许保存）。

我有一个接受角色的文本框，在模糊功能上我检查了角色是否已经存在。

一切正常，如果角色已经存在，则会出现验证消息。但是点击保存按钮后，它会保存在数据库中。

我想阻止它？这个怎么做 ？

我有以下创建视图的代码。

```
 @model IEnumerable<PaymentAdviceEntity.Role>
    <div id="roleList">
    <div class="span6">
    <div class="span12 HeaderField2">
        Roles
    <legend style="margin-bottom:2px;margin-top:5px;"></legend>
    </div>

    <div  class="span12">    

        <div style="display:inline-block"></div>
        <div id="addrole" style="display:none">
        <span> @Html.TextBox("RoleName", String.Empty, new { @id = "RoleName",style="margin-bottom:0px;" })</span>

           <span> 
               <input type="button" value="Save" id="btnSave"/>
                <input type="button"  value="Cancel" id="btnCancel" />
           </span>
      </div>    
        <div style="margin-top:5px;">
 <span id="RoleNameValidation" style="display:none;color:Red;">Role already exists</span>
        </div>

    </div>
    </div> 
```

为此，我使用下面的 Jquery。

```
 $("#RoleName").blur(function ()
    {
        var Role_Name = $('#RoleName').val();
        //alert(RoleName);
        var url = "@Html.Raw(Url.Action("checkForUniqueName","Role",new {@RName = "RoleName"}))";
        url = url.replace("RoleName", Role_Name);
        $.post(url, function (data)
        {
            if (data == false) {

                $("#RoleNameValidation").show();
                $('#RoleName').focus();
            }
            else {
                $("#RoleNameValidation").hide()
            }
        });
    }); 
```

控制器代码是....

```
 public ActionResult checkForUniqueName(string RName)
         {
            bool Valid = false;

            var RoleList = from e in db.Roles
                           where e.Name.Equals(RName)
                           select e;
            if (RoleList.Count() > 0 )  
            {
                Valid = false;
            }
            else
            {
                Valid = true;
            }

            return Json(Valid, JsonRequestBehavior.AllowGet);

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:42:21.713

如果您不想在数据库中插入重复记录，则可以为此目的使用验证。

尝试使用 jQuery Validate 插件（使用 addMethod）创建自定义规则，检查角色是否已存在于数据库中。您可以在[http://matthewmuro.com/2012/05/08/adding-custom-找到很好的帮助jquery-validation-to-your-form/](http://matthewmuro.com/2012/05/08/adding-custom-jquery-validation-to-your-form/)

# c# - 实体框架在保存更改时将错误的实体插入数据库

> ID：15446315
> 
> 赞同：0
> 
> 时间：2013-03-16T06:30:18.053
> 
> 标签：c#, entity-framework-5

我正在尝试编写一个程序来扫描包含电视节目文件夹的目录，使用 tvrage API 查找有关节目的一些详细信息，然后使用实体框架将详细信息保存到数据库中。

我的 TVShow 表 pkey 与从 tvrage 数据库节目 ID 中获取的值相同，并且当重复或相似的文件夹名称返回相同的节目信息时，我遇到了问题。在我的目录包含三个文件夹“Alias”、“Alias 1”、“Band of Brothers”的情况下，我从我的代码中得到以下输出

> ******* 电视节目 *********
> 
>  **别名.......不匹配......添加............完成
> 
> 别名 1 ......不匹配......添加......无法添加，ID 已经存在于数据库中
> 
> 兄弟乐队......不匹配......添加......**

 **在 context.SaveChanges() 上获取 UpdateException 之前；行违反 PRIMARY KEY 约束“PK_TVShows”。

我可以使用 SQL 探查器看到问题是我的应用程序正在尝试使用重复键第二次在别名显示上执行插入，但我不明白为什么。当我单步执行 foreach 循环的第二次交互（第二个“别名”文件夹）的代码时，将绕过将显示实体保存到数据库的代码。

只有在 foreach 循环的下一次迭代中，当我为“Band of Brothers”创建了一个新的 TVShow 实体时，我才真正到达将 Tvshow 添加到上下文并保存的代码，此时应用程序崩溃。在视觉工作室中，我可以在崩溃点看到；

*   context.TVShows.AddObject(show) 中的“show”实体是带有唯一 ID 的“Band of Brothers”
*   context.TVShows 只包含一条记录，第一个 Alias Entity

但是 SQL 探查器显示 EntityFramework 是第二次插入 Alias，我很困惑为什么会这样

```
 private void ScanForTVShowFolders( GenreDirectoryInfo drive ) {
        IEnumerable<DirectoryInfo> shows = drive.DirInfo.EnumerateDirectories();

        foreach (DirectoryInfo d in shows) {
        //showList contains a list of existing TV show names previously queried out of DB
            if (showList.Contains(d.Name)) {
                System.Console.WriteLine(d.Name + ".....MATCH");

            } else {
                System.Console.Write(d.Name + "......NO MATCH..ADDING....");
                TVShow show = LookUpShowOnline(d.Name, drive.GenreName);

                if (show.Id == -1) {   // id of -1 means online search failed
                    System.Console.Write("..........CANT FIND SHOW" + Environment.NewLine);

                } else if (context.TVShows.Any(a => a.Id == show.Id)) {  //catch duplicate primary key insert
                    System.Console.Write(".......CANT ADD, ID ALREADY EXISTS IN DB" + Environment.NewLine);

                } else {
                    context.TVShows.AddObject(show);
                    context.SaveChanges();
                    System.Console.Write("....DONE" + Environment.NewLine);
                }

            }

        }

        private TVShow LookUpShowOnline( string name, string genre ) {

        string xmlPath = String.Format("http://services.tvrage.com/feeds/search.php?show='{0}'", name);

        TVShow aShow = new TVShow();
        aShow.Id = -1; // -1 = Can't find

        XmlDocument xmlResp = new XmlDocument();
        try { xmlResp.Load(xmlPath); } catch (WebException e) { System.Console.WriteLine(e); }

        XmlNode root = xmlResp.FirstChild;
        if (root.NodeType == XmlNodeType.XmlDeclaration) { root = root.NextSibling; }

        XmlNode tvShowXML;
        //if (showXML["episode"] == null)
        //    return false;

        tvShowXML = root["show"];

        if (tvShowXML != null) {

            aShow.Id = System.Convert.ToInt16(tvShowXML["showid"].InnerText);
            aShow.Name = tvShowXML["name"].InnerText.Trim();
            aShow.StartYear = tvShowXML["started"].InnerText.Trim();
            aShow.Status = tvShowXML["status"].InnerText.Trim();
            aShow.TVGenre = context.TVGenres.Where(b => b.Name.Trim() == genre).Single();
        }

        return aShow;
    }

} 
```

*编辑* 做一些更多的阅读，我将 context.ObjectStateManager 添加到我的调试监视列表中，我可以看到每次创建新的 TVShow 实体时都会将新记录添加到 _addedEntityStore。实际上，如果我删除 context.TVShows.AddObject(show) 代码仍然会更新数据库，因此手动添加到上下文似乎是多余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:10:31.183

如果您通过 foreach 循环插入对象 > 最好将主键保持在外部并使其递增！

例如： int newID= Shows.Select(d=>d.Id).Ma​​x();

foreach(…………)
{

```
show.Id = newID++;  
.  
.  
.  //remaining fields
. 
```

context.TVShows.AddObject(show);

}
context.SaveChanges();

这个对我有用...！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:41:00.047

原来 context.TVShows.AddObject(show) 在我的情况下是不必要的，当这个查询运行时，我无意中将所有创建的节目实体添加到上下文中

aShow.TVGenre = context.TVGenres.Where(b => b.Name.Trim() == Genre).Single();

这不是我想要的，我只是想创建对象，然后决定是否添加它。现在很容易修复，我知道为什么会这样。**

# objective-c - 在 mac 中以编程方式截取屏幕截图仅适用于应用程序窗口

> ID：15446319
> 
> 赞同：9
> 
> 时间：2013-03-16T06:30:35.213
> 
> 标签：objective-c, macos, cocoa, screenshot

我必须为我的 OSX 应用程序添加截屏功能，但 Apple 演示只给了我整个屏幕图像，我只想要我的应用程序窗口图像。

我的代码是：

```
NSInteger displaysIndex = 0;
if(displays != nil)
{
    free(displays);
}

CGError             err = CGDisplayNoErr;
CGDisplayCount      dspCount = 0;

/* How many active displays do we have? */
err = CGGetActiveDisplayList(0, NULL, &dspCount);

/* If we are getting an error here then their won't be much to display. */
if(err != CGDisplayNoErr)
{
    return;
}
/* Allocate enough memory to hold all the display IDs we have. */
displays = calloc((size_t)dspCount, sizeof(CGDirectDisplayID));

// Get the list of active displays
err = CGGetActiveDisplayList(dspCount,
                             displays,
                             &dspCount);

/* Make a snapshot image of the current display. */
CGImageRef image = CGDisplayCreateImage(displays[displaysIndex]); 
```

我应该在代码中进行哪些更改，以便只获得我的应用程序窗口？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T07:08:47.877

简单的。

```
NSImage *captureImage  = [[NSImage alloc] initWithData:[self.view dataWithPDFInsideRect:[self.view bounds]]]; 
```

请检查并让我知道。这是捕获的当前活动窗口。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-17T03:30:22.850

要实际截取您的窗口的屏幕截图，包括它的框架和阴影，请获取您的窗口`windowNumber`并将其传递[给`CGWindowListCreateImage`函数](https://developer.apple.com/reference/coregraphics/quartz_window_services#//apple_ref/c/func/CGWindowListCreateImage)。

# javascript - 节点js fs模块说对象没有方法appendFile

> ID：15446323
> 
> 赞同：1
> 
> 时间：2013-03-16T06:31:30.960
> 
> 标签：javascript, node.js, module, fs

我正在构建一个节点 js 应用程序（用于学习），我将每个操作记录到一个名为 log.txt 的文件中

记录器模块具有以下代码：

```
var fs = require('fs');

function write(data,filename)
{
  var entry = 'Time: '+new Date();
  if(filename !=null || filename != undefined) entry = entry+'\n\tFile: '+filename;
  if(data !=null || data != undefined) entry = entry+'\n\tMessage: '+data;
  entry = entry+'\n';

  fs.appendFile('./log.txt',entry,function(err){
      if(err){console.log('Log NOT Appended with data:\n\t'+entry);}
      else{console.log('Log Appended with data:\n\t'+entry);}
  });
}

exports.write = write; 
```

现在在我的 app.js 中，我要求它：

```
var logger = require('./logger');

var fs = require('fs');

function ReadFile()
{

  var data = fs.readFileSync('./config.txt');
  if(data==null) 
          logger.write("Config data not found");
  else
      logger.write(data,"app.js");
}

ReadFile(); 
```

这让我回到一个错误说：

```
 Object #<Object> has no method 'appendFile' 
```

然而，这在另一台电脑上运行得很好，当我试图在我的系统上运行我的应用程序时，我注意到了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:23:30.707

这是版本的问题，我使用的 v0.6.12 没有该方法，我升级到 v0.10.0 解决了它，感谢 michaelt 指出。

# c# - 如何在 MVC 控制器之外使用 SimpleMembership 将用户添加到我的数据库？

> ID：15446332
> 
> 赞同：1
> 
> 时间：2013-03-16T06:35:26.797
> 
> 标签：c#, asp.net-mvc

我的帐户控制器中有以下代码：

```
WebSecurity.CreateAccount(User.Identity.Name, model.NewPassword); 
```

这很有效，当我在新行中输入 WebSecurity 一词时，我看到智能感知为我提供了我期望的所有选项。

我将相同的代码添加到另一个类，但这次我没有使用 WebSecurity 的选项。课程出现了，但没有我可以使用的方法。

有谁知道可能出了什么问题。如何在我的控制器之外添加一个用户来为数据库播种。

这就是我正在做的事情：

```
WebSecurity.CreateAccount("xx", "xx", true) 
```

这是错误消息：

```
Error   2   'WebMatrix.WebData.WebSecurity.CreateAccount(string, string, bool)' is a 'method' but is used like a 'type' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:50:24.103

您没有提供所需的详细信息，但我想您有这条线

```
WebSecurity.CreateAccount("xx", "xx", true) 
```

不在方法中。像这样（这将导致您描述的错误）：

```
class AccountsController
{
   WebSecurity.CreateAccount("xx", "xx", true);
} 
```

检查你的语法。如果这不起作用，请在错误行周围发布更多代码。

# html - 关于 CSS/HTML

> ID：15446336
> 
> 赞同：-1
> 
> 时间：2013-03-16T06:35:56.037
> 
> 标签：html, css

我正在使用 HTML/CSS 处理一个网站，并添加了一部分代码以在悬停时突出显示链接；是主页上的主图像中嵌入了一个链接，当您将鼠标悬停在图像上时，它会突出显示吗？

有任何想法吗？我该怎么做才能让代码仅突出显示代码`<p> ... </p>`区域内的链接？

这是我目前正在使用的：

```
p a:hover {< p > < a href="IMAGE LINK HERE"> < /a > Biography < /p >

  background-color: rgb(255, 255, 255);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:39:44.627

按要求回答。利用

```
p a:hover {
    background-color: yellow; /* Color that it will highlight */
    /* Other styles that you want */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:42:51.283

帕：悬停{}

或者你可以使用简单的 a:hover {color:red; 文字装饰：下划线；} 但它将适用于您网站上的所有链接

# flash - 您能否查看以比 Flash 程序新版本保存的 FLA 文件的 ActionScript？

> ID：15446340
> 
> 赞同：0
> 
> 时间：2013-03-16T06:36:13.423
> 
> 标签：flash, actionscript, flash-cs5, flash-cs3

我有一个旧版本的 Flash（准确地说是 Flash AS3 CS3）。

我正在上ActionScript 编码的大学课程。但是，我学校使用的版本，以及我们教科书的源文件，都保存在AS3 CS5或更高版本中。我试着不让它影响到我，但我发现在家里完成我的作业很困难。

当我只有 Flash CS3 时，有没有办法让我查看保存在 CS5 或更高版本中的 FLA 文件中的 Actionscript？

如果有，那将很好地解决我的问题...

**>> 编辑**

由于我可能不清楚，我想问是否有办法*在我的计算机*（只有 CS3）上查看保存在 CS5 或更高版本中的 .FLA 文件的 ActionScript。这里的假设是我将无法再访问装有 CS5 的计算机。

请注意，我并不特别关心打开整个文件——我想要的只是嵌入在时间轴中的 ActionScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:46:07.347

一眼看去，flash CS5 似乎无法保存为 CS3 格式；它可以去的最低的是CS4。

但是，fla 中的大部分代码可能可以删除并保存在单独的 .as 文件中，然后在您可以在家中重新创建的新 CS3 fla 中运行。这完全取决于 fla 的内容是什么，我正在对这些 fla 的内容做出一些假设。但是，如果它只是时间轴上的大部分代码，可能带有一些简单的电影剪辑符号，那么它可能是一种可能性。

* * *

## 编辑以响应问题中的编辑

据我所知，只有flash可以打开fla文件，但我最近发现了这个，但从来没有用过。但是它可能对您有用：我已阅读/注意到您可以将 flash CS5 fla 重命名为 zip 文件，它将打开/提取。只需将扩展名从 .fla 更改为 .zip 然后解压即可。

里面的内容你可以挖掘。您可能最感兴趣的文件是“DOMDocument.xml”。看着它，它似乎描述了火焰的构成……包括框架上的任何动作脚本。

例如，我做了一个空的fla，在第1、2和4帧中放入一些代码，如下所示：

在第一帧：

```
trace("This is frame 1, line 1");
trace("This is frame 1, line 2"); 
```

在第 2 帧上：

```
trace("This is frame 2, line 1");
trace("This is frame 2, line 2"); 
```

在第 4 帧（跳过第 3 帧）：

```
trace("This is frame 4, line 1");
trace("This is frame 4, line 2"); 
```

只是一些跟踪语句。按照我刚才所说的并查看 xml，在时间轴->图层->帧->动作脚本->脚本标签中，我可以看到我的脚本：

```
<timelines>
          <DOMTimeline name="Scene 1" currentFrame="3">
               <layers>
                    <DOMLayer name="Layer 1" color="#4FFF4F" current="true" isSelected="true">
                         <frames>
                              <DOMFrame index="0" keyMode="9728">
                                   <Actionscript>
                                        <script><![CDATA[trace("This is frame 1, line 1");
trace("This is frame 1, line 2");]]></script>
                                   </Actionscript>
                                   <elements/>
                              </DOMFrame>
                              <DOMFrame index="1" keyMode="9728">
                                   <Actionscript>
                                        <script><![CDATA[trace("This is frame 2, line 1");
trace("This is frame 2, line 2");]]></script>
                                   </Actionscript>
                                   <elements/>
                              </DOMFrame>
                              <DOMFrame index="2" keyMode="9728">
                                   <elements/>
                              </DOMFrame>
                              <DOMFrame index="3" keyMode="9728">
                                   <Actionscript>
                                        <script><![CDATA[trace("This is frame 4, line 1");
trace("This is frame 4, line 2");
trace("This is frame 5, line 3");]]></script>
                                   </Actionscript>
                                   <elements/>
                              </DOMFrame>
                         </frames>
                    </DOMLayer>
               </layers>
          </DOMTimeline>
     </timelines> 
```

帧索引似乎从 0 开始，脚本本身被包裹在 CDATA 标记之间。

我还做了一个测试，在我的图书馆里有一个简单的电影剪辑项目。这会生成一个 xml 文件，该文件在提取时描述库目录中的该项目。但是，我在提取时确实收到了“此 zip 文件已损坏”的错误……但它似乎仍然可以正常提取。

按照我所说的，您可能需要做一些工作来拼凑一个更复杂的 fla 文件，但希望这是一个开始？

# ruby-on-rails - => 运算符 vs = 运算符

> ID：15446341
> 
> 赞同：2
> 
> 时间：2013-03-16T06:36:39.377
> 
> 标签：ruby-on-rails, ruby, operator-keyword

我刚开始在 Rails 上学习 ruby​​，我想知道什么时候应该使用“=>”以及什么时候应该使用“=”进行赋值。我看到您使用“=>”作为哈希，为迁移中的符号分配值，但我不确定在哪里画线。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T06:42:57.650

该`=>`符号仅用于哈希。Ruby 有一个特性，可以将散列作为最后一个参数传递给方法调用，而无需包含大括号。这提供了类似于关键字参数的东西（尽管在 Ruby 2.0 之前，Ruby 没有关键字参数）。

所以当你看到这个：

```
t.integer :foo, :default => 5 
```

它的真正含义是：

```
t.integer(:foo, { :default => 5 }) 
```

其余的只是为了让它看起来更好而设计的语法糖。

`=`另一方面，符号是您在几乎任何编程语言中都知道和喜爱的赋值运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:49:43.363

=> 与赋值不同，但我明白它为什么会令人困惑。在散列中，您创建一个键和一个值作为一对。键和值可以是任何东西

```
{'key1' => 'some value', :symbol_key => 'other value'} 
```

这与分配不同，您可以清楚地看到，因为如果您希望上述哈希对您的程序保持可用，您必须将其传递给方法或将其分配给变量

```
myhash = {'key1' => 'some value', :symbol_key => 'other value'} 
```

只有现在你才能从你的哈希中检索东西

```
puts myhash['key1'] 
```

所以 => 运算符实际上是用来构造散列（或字典对象）的，赋值允许你在程序中存储值。

Rails（因此在迁移中）很常见的情况是，正在创建哈希并将其传递给方法调用，而您却没有意识到这一点。但是管道仍然是一样的，它仍然只是一个创建的哈希。

在 Ruby 1.9 中，您现在可以使用类似 javascript 的语法定义散列，因此您可能也会开始看到这一点。

```
myhash = {key1: 'some value', key2: 'other value'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:36:52.093

我为此苦苦挣扎了一段时间，但现在更喜欢尽可能使用新样式的哈希

```
t.integer :foo, default: 5
t.string :bar, default: 'Dave' 
```

# c - 分段错误处理程序是否应该由应用程序程序员用 C 编写？

> ID：15446344
> 
> 赞同：3
> 
> 时间：2013-03-16T06:37:02.090
> 
> 标签：c, segmentation-fault

如果某人是操作系统程序员或编写系统级库代码，则编写分段错误处理程序是有意义的。例如，操作系统程序员会编写代码，向该应用程序进程发送信号 SIGSEGV。或者，系统库程序员可能会处理该信号 SIGSEGV，并且可能会撤消由库代码导致的用于创建分段故障的操作。但是为什么 C 中的应用程序程序员需要编写分段错误处理程序呢？如果他编写一个处理程序，他已经损坏了一些内存部分。你能举一个例子，让应用程序程序员处理分段错误并继续执行程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T06:56:00.227

AFAIK，分段处理程序可以在应用程序级别编写，以输出一些调试信息（如内存转储、寄存器值和其他应用程序特定信息），然后退出应用程序。

请注意，由于分段错误可能损坏了内存，它可能会或可能不会获得所有正确的信息来转储。

我不知道在分段错误后可以继续执行程序的任何情况。可能其他尊敬的 SO 用户将能够对此有所了解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T17:39:22.097

处理`SIGSEGV`等可能允许保存状态并采取纠正措施。 [32 先生](https://stackoverflow.com/users/775964/mr-32)（和其他人）是正确的，您不能简单地重新启动主线代码。相反，您可以；这允许*重新启动*主线。此外，您必须非常小心地仅调用函数。这是非常棘手的。然而，一些应用程序是，~~`longjmp()`~~`siglongjmp()`*`async safe`*

 *1.  健康/安全 - 确保不会发生灾难性情况。
2.  财务 - 可能导致金钱损失的交易数据丢失。
3.  控制系统 - 化学家滴定软件示例。
4.  诊断 - 可能会记录崩溃情况以改进未来的软件。^(根据[杰](https://stackoverflow.com/users/236222/jay))

打电话`exit()`可能不好，`_exit()`会更好。不同之处在于`atexit()`调用。

另请参阅：[Cert async safe](https://www.securecoding.cert.org/confluence/display/seccode/SIG30-C.+Call+only+asynchronous-safe+functions+within+signal+handlers)、[Glibc async-safe list](https://stackoverflow.com/questions/2013202/i-need-a-list-of-async-signal-safe-functions-from-glibc)、[Similar question](https://stackoverflow.com/questions/2663456/write-a-signal-handler-to-catch-sigsegv)和[`longjmp()`信号不可移植](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1318.htm)、[async-safe](/questions/tagged/async-safe "显示标记为“异步安全”的问题")
这些因操作系统而异。任何建议都将取决于系统！

* * *

**其他问题**

*   程序使用的一些库可能会捕获`SIGSEGV`. 绝对是 Empress 数据库的版本。您必须知道您的库正在使用什么并链接到它们/从它们链接。
*   堆栈和堆（malloc 等）可能被破坏，包括`jump_buf`你的错误处理可能特别偏执。
*   还有许多其他替代解决方案，例如将关键部分推迟到另一个更简单的任务。
*   `longjmp()`根据 C99 标准， 从信号调用是*未定义的，但它在大多数系统上都能正常工作。*[`siglongjmp()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/siglongjmp.html)如果你比较迂腐，可以使用。它可以用于诊断日志记录，但我不会将它用于列出的其他用途（安全等）。通知*看门狗任务*可能更合适。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T12:33:50.157

您可以捕获除 SIGKILL、SIGCONT 和 SIGSTOP 之外的任何信号。因此，您可以捕获 SIGSEGV，但如果您决定不退出，则行为将是不可预测的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T07:00:07.707

```
library programmer might handle that signal SIGSEGV and may 
undo the operations caused by the library code for creating segmentation 
```

发生分段错误意味着线程或进程将死亡。

您无法撤消导致分段错误的代码。相反，您可以**重新启动**该组件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T07:14:47.140

分段错误是由程序写入不应该写入的内存部分引起的。应用程序开发人员不会编写代码来处理这个问题，而是编写代码来避免它。这就是为什么在写入内存时绑定检查的原因。*

# symfony - 使用 Doctrine，您如何从 EntityRepository 访问 Entity 方法？

> ID：15446347
> 
> 赞同：1
> 
> 时间：2013-03-16T06:37:19.947
> 
> 标签：symfony, controller, symfony-2.1

在 Symfony 的“书”中，他们讨论了引用其他实体的实体。比如，就我而言，如果我有一个“帖子”实体，其中有许多“评论”实体引用它，我可以通过其 ID 加载帖子，然后执行 $post->getComments()。

评论似乎是延迟加载的，我必须一个接一个地通过它们，加载每个（这显然是错误的）或将它们全部加载到一个单独的查询中（我可以这样做，但我没有'不知道在哪里，具体来说，把那个查询）。[然而，这本书建议](http://symfony.com/doc/2.1/book/doctrine.html#joining-to-related-records)：“当然，如果您事先知道您需要访问这两个对象，您可以通过在原始查询中发出联接来避免第二次查询。” 它建议我向我的（当前为空的）postRepository 类添加一个方法。我这样做了，它看起来像这样：

```
public function loadPostFull($pid)
{
    return $this->getEntityManager()
        ->createQuery('
            SELECT p, c FROM BUNDLENAME:Post p
            JOIN p.comments c
            WHERE p.id = :id')
        ->setParameter('id', $pid);
    try {
        return $query->getSingleResult();
    } catch (\Doctrine\ORM\NoResultException $e) {
        return null;
    }
} 
```

然后在我的控制器中我做：

```
$fullPost = $this->getDoctrine()
            ->getRepository('BUNDLENAME:Post')
            ->loadPostFull($id);
$id = $fullPost->getId(); 
```

但是我对 $id 的简单请求给出了“致命错误：调用未定义的方法 Doctrine\ORM\Query::getId()”。我知道控制器正确地找到了 loadPostFull 方法，因为如果我输入了名称，它将在那里失败。它只是没有返回正确的 Post 实体。如果我将控制器更改为调用 ->find($id) 而不是 ->loadPostFull($id) 我可以使用 Post id 的所有内部方法。

手册似乎表明我可以做到这一点！怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:51:38.547

我相信你有一个错字:)。查看代码的第一行。您有**退货**声明！因此，您返回 Query 对象并尝试 { } catch() { } 永远不会到达。你应该这样写：

```
$query = $this->getEntityManager()
    ->createQuery('
        SELECT p, c FROM BUNDLENAME:Post p
        JOIN p.comments c
        WHERE p.id = :id')
    ->setParameter('id', $pid);
try {
    return $query->getSingleResult();
} catch (\Doctrine\ORM\NoResultException $e) {
    return null;
} 
```

# ios - 我可以在属于居住在世界其他地方的人的 iOS 设备上测试应用程序吗？

> ID：15446349
> 
> 赞同：1
> 
> 时间：2013-03-16T06:37:34.960
> 
> 标签：ios, testflight

我已经完成了一个 iOS 应用程序的工作，我想让我的一些朋友在他们的设备上进行测试，然后再将其提交到应用程序商店。然而，他们生活在世界的另一个地方，无法掌握他们各自的设备。有没有办法让我使用他们的 UDID 并生成一个 .ipa 文件以通过电子邮件发送给他们以在他们的设备上进行测试，而无需他们亲自向我提供他们的实际设备？

我听说 TestFlight 是一种可能的解决方案，但它可以用于位于世界另一部分的设备，而我只需使用 UDID 即可？请记住，我希望测试我的应用程序的人不是 iOS 开发人员，因此没有在 Apple 的开发人员计划中注册。还能做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:03:43.117

为此，您必须使用您的朋友 UDID 在您的 iOS 配置门户中创建新设备。然后在您的*供应门户 > 供应 > 分发 > 您的供应配置文件*中并编辑您的 currant 分发配置文件并在该分发配置文件中添加新创建的设备。而不是使用这个新的配置文件创建临时分发 IPA。而且，taadaa，这个 IPA 将在你朋友的 iPhone 上运行。

这是分发证书的屏幕截图。

![在此处输入图像描述](../Images/0b88b7d596661f63ffd1f6b3288308d9.png)

![在此处输入图像描述](../Images/3b526bae3711f7636155179b3faa5a79.png)

使用此[视频](http://www.youtube.com/watch?v=wAdV16nRLp8)为临时创建分发配置文件和 IPA。

这就像我们将我们的应用程序提供给客户进行审查一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:39:54.080

是的，TestFlight 正是您用来与非开发人员测试人员轻松完成此任务的服务类型。他们将能够单击电子邮件中的链接，并将您的应用程序安装到他们的手机上。只要您将他们的 UDID 添加到您的 TestFlight 和 Apple Developer 帐户，他们的物理位置并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:46:43.667

Testflight 允许您这样做。您需要做的就是在您的帐户中注册他们的 UDID 并向他们发送链接以下载该应用程序。然后您通过该帐户发送您的应用程序，他们将收到一封电子邮件以下载该应用程序。

希望这可以帮助..

# selenium - 如何使用 selenium RC java 使用 xpath 而不是定位器单击智能 gwt 复选框

> ID：15446350
> 
> 赞同：1
> 
> 时间：2013-03-16T06:37:38.750
> 
> 标签：selenium

嗨，我正在自动化使用智能 gwt 控件构建的网页。我使用定位器记录了单击列表网格中的复选框。我尝试单击 Xpath ，它返回响应正常但不会单击。

```
scLocator=//ListGrid[ID=\"isc_SideListGrid_0"\"]/body/row[1]/col[isCheckboxField=true||0] 
```

Xpath：

```
selenium.click("//div//table[@id='isc_17table']//tbody/tr[1]/td[1]/div/nobr/img"); 
```

一行的 HtML 源代码

```
<div id="isc_17" style="POSITION:relative;VISIBILITY:inherit;Z-INDEX:200450;CURSOR:default;" eventproxy="isc_SideListGrid_0_body">
<div style="position:relative;z-index:1000;">
<div id="isc_SideListGrid_0_body$28s" style="width:1px;height:0px;overflow:hidden;display:none;">
<table id="isc_17table" class="listTable" width="654" cellspacing="0" cellpadding="2" border="0" style="table-layout:fixed;overflow:hidden;wrap:false;padding-left:0px;padding-right:0px;" role="presentation">
<tbody></tbody>
<colgroup>
<tbody>
<tr role="listitem">
<td class="tallCellSelected" height="" align="center" style="height: 22px; width: 28px; overflow: hidden;">
<div style="overflow: hidden; width: 24px;" cellclipdiv="true" role="presentation">
<nobr>
<img width="13" height="13" border="0" align="TEXTTOP" suppress="TRUE" style="vertical-align:middle;margin-left:2px;margin-right:2px;" eventpart="valueicon" src="http://localhost:8080/oatedge/reports/acceptanceReport/sc/skins/Enterprise/images/DynamicForm/checked.png">
</nobr>
</div>
</td>
<td class="tallCellSelected" height="" align="center" style="height: 22px; width: 91px; overflow: hidden;">
<td class="tallCellSelected" height="" align="center" style="height: 22px; width: 80px; overflow: hidden;">
<td class="tallCellSelected" height="" align="center" style="height: 22px; width: 91px; overflow: hidden;">
 <td class="tallCellSelected" height="" align="center" style="height: 22px; width: 91px; overflow: hidden;">
 <td class="tallCellSelected" height="" align="center" style="height: 22px; width: 91px; overflow: hidden;">
 <td class="tallCellSelected" height="" align="center" style="height: 22px; width: 91px; overflow: hidden;">
 <td class="tallCellSelected" height="" align="center" style="height: 22px; width: 91px; overflow: hidden;">
 </tr>
</tbody>
</table>
<div id="isc_SideListGrid_0_body$284" style="width:1px;height:0px;overflow:hidden;display:none;">
</div>
<div onscroll="return isc_HLayout_5.$lh()" style="position: absolute; left: 558px; top: 3px; width: 100px; height: 22px; z-index: 200900; visibility: inherit; padding: 0px; -moz-box-sizing: border-box; overflow: hidden; cursor: default;" class="normal" eventproxy="isc_HLayout_5" id="isc_30">
<div style="POSITION:relative;VISIBILITY:inherit;Z-INDEX:200900;CURSOR:default;" eventproxy="isc_HLayout_5" id="isc_31">&nbsp;<div onscroll="return isc_ImgButton_4.$lh()" style="position: absolute; left: 18px; top: 1px; width: 20px; height: 19px; z-index: 200918; -moz-box-sizing: border-box; overflow: hidden;" tabindex="1764" onblur="if(window.isc)isc.EH.blurFocusCanvas(isc_ImgButton_4,true);" onfocus="if(event.target!=this)return;isc.EH.focusInCanvas(isc_ImgButton_4,true);" class="imgButton" role="button" eventproxy="isc_ImgButton_4" id="isc_33"><div style="POSITION:relative;VISIBILITY:inherit;Z-INDEX:200918;CURSOR:pointer;" eventproxy="isc_ImgButton_4" id="isc_32"><img width="20" height="19" border="0" align="TEXTTOP" suppress="TRUE" name="isc_32main" src="http://localhost:8080/oatedge/reports/images/icon-delete-d.png"></div></div><div onscroll="return isc_ImgButton_3.$lh()" style="position: absolute; left: 41px; top: 1px; width: 20px; height: 19px; z-index: 200936; -moz-box-sizing: border-box; overflow: hidden;" tabindex="1815" onblur="if(window.isc)isc.EH.blurFocusCanvas(isc_ImgButton_3,true);" onfocus="if(event.target!=this)return;isc.EH.focusInCanvas(isc_ImgButton_3,true);" class="imgButton" role="button" eventproxy="isc_ImgButton_3" id="isc_35"><div style="POSITION:relative;VISIBILITY:inherit;Z-INDEX:200936;CURSOR:pointer;" eventproxy="isc_ImgButton_3" id="isc_34"><img width="20" height="19" border="0" align="TEXTTOP" suppress="TRUE" name="isc_34main" src="http://localhost:8080/oatedge/reports/images/icon-accept-d.png"></div></div><div onscroll="return isc_ImgButton_5.$lh()" style="position: absolute; left: 64px; top: 0px; width: 18px; height: 15px; z-index: 200954; -moz-box-sizing: border-box; overflow: hidden;" tabindex="1866" onblur="if(window.isc)isc.EH.blurFocusCanvas(isc_ImgButton_5,true);" onfocus="if(event.target!=this)return;isc.EH.focusInCanvas(isc_ImgButton_5,true);" class="imgButton" role="button" eventproxy="isc_ImgButton_5" id="isc_37"><div style="POSITION:relative;VISIBILITY:inherit;Z-INDEX:200954;CURSOR:pointer;" eventproxy="isc_ImgButton_5" id="isc_36"><img width="18" height="15" border="0" align="TEXTTOP" suppress="TRUE" name="isc_36main" src="http://localhost:8080/oatedge/reports/images/icon-merge-d.png"></div></div></div></div> 
```

# java - Java 的异常处理机制是责任链设计模式的一个例子吗？

> ID：15446351
> 
> 赞同：5
> 
> 时间：2013-03-16T06:37:44.773
> 
> 标签：java, exception, design-patterns, exception-handling

我一直在阅读***责任链***设计模式，它基本上允许请求的发送者和请求的接收者之间解耦。该请求可以沿链传递，直到有人准备好使用该请求。现在在 Java 中，当我们指定一个方法能够抛出`Exception` 异常时，我们让方法的调用者处理异常。如果它不感兴趣，它可以进一步将异常传播到链上。那么这个过程可以被引用为***责任链***设计模式的应用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T07:04:26.190

你说的对。Java 中的异常处理基于责任链模式在此模式中：

1.  发送者将不知道链中的哪个对象将为其请求提供服务
2.  链中的每个节点都可以决定为请求提供服务 --> 捕获异常并
    用特定于应用程序的异常包装它
3.  每个节点都可以转发请求 --> 向直接调用者抛出异常
4.  没有一个节点可以为请求提供服务 --> 将工作留给调用者

因此，异常处理是一种责任链模式

# c++ - QT中将视图层与逻辑层分开的正确方法是什么？

> ID：15446354
> 
> 赞同：0
> 
> 时间：2013-03-16T06:38:35.490
> 
> 标签：c++, qt, qthread, qprogressbar

我的主窗口有一个侧面 GUI，中间有一个 QGraphicsView，有一个逻辑类可以进行不同的计算，由 GUI 触发并影响 QGraphicsView。一些计算很繁重，导致 GUI 进入睡眠状态，有一个 QProgressBar 和一些其他 Qt 项目，它们在进行计算时提供一些数据，所以当 GUI 进程进入睡眠状态时，这些项目仅在当该过程已完成。我理解是因为逻辑类和UI在同一个进程下，

我试图通过这样做来纠正这个问题：[我的旧问题](https://stackoverflow.com/questions/14398050/unexplained-delay-after-qprogressbar-finish-loading)和[Maya 的编程博客](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

但我开始明白，这两种方法都不足以满足我的代码要求，因为我有几种方法可以运行繁重的计算，其中一些方法返回值。两者都在谈论做这样的事情：`connect(thread, SIGNAL(started()), worker, SLOT(process()));...`比`thread->start();`，但在我的代码中没有一个主进程，所以如果我想以这种方式工作，据我所知，我需要在每个进程方法之前创建一个线程，移动逻辑类到这个线程，然后将进程方法与线程启动方法连接起来，这对我来说听起来不是正确的方法。

所以我要求一种将逻辑层与视图层完全分离的方法，因此任何调用逻辑层的方法都将在不同的进程上运行（所有逻辑类方法都相同），因此视图层不会去睡觉。

注意：不存在同步性问题，当进行计算时，它是一次唯一有效的计算。

我的问题的一个例子：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include "Logic/worker.h"

namespace Ui {
class MainWindow;
#define MAXLOOP 1000000
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

signals:

private slots:

    void startProcessing1();

    void processing1Done();

    void on_pushButton_exit_clicked();

private:
    Ui::MainWindow *ui;

};

#endif // MAINWINDOW_H

/////////////////////////////////////////////////////////////////////////////////

#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "QThread"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    ui->progressBar_1->setVisible(false);
    ui->progressBar_1->setMaximum(MAXLOOP);
    ui->progressBar_1->setMinimum(0);

    connect(ui->pushButton_1, SIGNAL(clicked()), this, SLOT(startProcessing1()));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::startProcessing1()
{
    ui->progressBar_1->setVisible(true);

    Worker *worker = new Worker(MAXLOOP);
    QThread* thread = new QThread;
    worker->moveToThread(thread);
    connect(worker, SIGNAL(finished1Hide()), this, SLOT(processing1Done()));
    connect(worker, SIGNAL(changePbar1(int)), ui->progressBar_1, SLOT(setValue(int)));

    connect(thread, SIGNAL(started()), worker, SLOT(process1()));

    connect(worker, SIGNAL(finished1()), thread, SLOT(quit()));
    connect(worker, SIGNAL(finished1()), worker, SLOT(deleteLater()));
    connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));

    thread->start();
}

void MainWindow::processing1Done()
{
    ui->progressBar_1->setVisible(false);
}

void MainWindow::on_pushButton_exit_clicked()
{
    this->close();
}

/////////////////////////////////////////////////////////////////////////////////

#ifndef WORKER_H
#define WORKER_H

#include <QObject>

class Worker : public QObject
{
    Q_OBJECT
public:
    explicit Worker(int maxLoop, QObject *parent = 0);

signals:

    void finished1();
    void finished1Hide();
    void changePbar1(int val);

public slots:

    void process1();

private:

    int m_maxLoop;
};

#endif // WORKER_H

/////////////////////////////////////////////////////////////////////////////////

#include "worker.h"

Worker::Worker(int maxLoop, QObject *parent) :
    QObject(parent)
{
    m_maxLoop = maxLoop;
}

void Worker::process1()
{
    int sum = 0;
    for(int i = 0; i < m_maxLoop; ++i)
    {
        emit changePbar1(i);
        sum += i;
    }
    emit finished1();
    emit finished1Hide();
} 
```

# php - 用于捕获 POST 值的 PHP

> ID：15446355
> 
> 赞同：0
> 
> 时间：2013-03-16T06:39:00.007
> 
> 标签：php

如何使用 PHP 为具有多个第三个括号的参数捕获 POST 值？前任。

```
content[fields][attendees]
content[fields][completed] 
```

好的，让我在这里发布 url 编码的原始数据：

```
type=activities.update&objectid=75585970&content%5Bid%5D=75585970&content%5Bname%5D=Order+Received%2F+Processing+request+%28may+need+more+info%29&content%5Bcreated%5D=2013-03-15T16%3A09%3A50%2B00%3A00&content%5Bupdated%5D=2013-03-16T06%3A37%3A01%2B00%3A00&content%5Bviewed%5D=2013-03-16T06%3A35%3A21%2B00%3A00&content%5Blevel%5D=1&content%5Bflagged%5D=0&content%5Btypeid%5D=22&content%5Bparenttypeid%5D=2&content%5Bparent%5D=75585967&content%5Bparentname%5D=Tanmoy+Sadhu+%7C+weew+%7C+RSA&content%5Bitem%5D=75585967&content%5Bitemname%5D=Tanmoy+Sadhu+%7C+weew+%7C+RSA&content%5Bitemtypeid%5D=2&content%5Bposition%5D=2&content%5Bfields%5D%5Battendees%5D=&content%5Bfields%5D%5Bcompleted%5D=1&content%5Bfields%5D%5Btitle%5D=Order+Received%2F+Processing+request+%28may+need+more+info%29+ 
```

我试过了`$_POST['content[fields][attendees]']`，`$_POST['content\[fields\]\[attendees\]']`但没有运气。

有什么办法抓住它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:48:36.453

尝试

```
echo $_POST['content']['id'];
echo $_POST['content']['name'];
echo $_POST['content']['fields']['attendees']; 
```

等等

您的 url 参数的输出：

```
75585970
Order Received/ Processing request (may need more info)
<-empty string here for attendees 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:33:03.353

我相信正确的语法是

`$_POST['content']['field']`ETC

所以对于你的例子，你可以通过调用`&content%5Bid%5D=75585970`来获得价值`75585970`

`$_POST['content']['id'];`

这是因为任何特定键的 $_POST 值都是一个字符串（或在键有括号的情况下为数组）。

在这种情况下，`$_POST['content']`返回一个包含许多不同键值对的数组，您可以使用这些数组键访问值，就像在任何多维数组中一样。

# php - 会话检查表

> ID：15446357
> 
> 赞同：0
> 
> 时间：2013-03-16T06:39:26.467
> 
> 标签：php, security

嗨我有一个与安全相关的问题我允许用户登录和注册我的问题是当用户登录我的脚本时只是设置会话没有 cookie 所以只依赖会话而不是 cookie 是否安全？还是我同时使用 cookie 和会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:40:22.667

PHP 会话使用 cookie 来跟踪会话的 ID。因此，它是安全的，因为您实际上正在使用 cookie。

值得注意的是，您应该尝试防止[会话劫持](http://en.wikipedia.org/wiki/Session_hijacking)- 您可以通过验证用户的 IP 以及`$_SESSION`对象中的其他内容来做到这一点。

**编辑**

我建议你阅读[这个](http://www.htmlgoodies.com/beyond/php/article.php/3472581/PHP-Tutorial-Sessions.htm)。引用：

> session_start() 函数生成一个随机的 Session Id 并将其存储在用户计算机上的 cookie 中（这是唯一实际存储在客户端的会话信息。） cookie 的默认名称是 PHPSESSID，尽管这可以是在服务器上的 PHP 配置文件中进行了更改（但是，大多数托管公司将不理会它。）要在您的 PHP 代码中引用会话 ID，您将因此引用变量 $PHPSESSID（它是一个 cookie 名称；还记得 Cookie 中的那个吗？ )

注意：**将其存储在 cookie 中**

# php - 通过 PHP 从 iOS 将图像 BLOB 存储在数据库中

> ID：15446366
> 
> 赞同：0
> 
> 时间：2013-03-16T06:40:39.283
> 
> 标签：php, mysql, ios, objective-c, blob

我正在尝试`iOS`使用 PHP 将新图片从数据库发送到数据库。

我在...中得到一个零字节BLOB**任何**`DATABASE`帮助将不胜感激:)

代码：

```
NSString *url = @"-----------------";

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:url]];

[request setHTTPMethod:@"POST"];

NSData *binaryData = UIImageJPEGRepresentation(image, 1.0);
NSString *encodedString = [binaryData base64Encoding];
//NSLog(@"Encoded : %@ ",encodedString);
//NSData* binaryData = UIImagePNGRepresentation(image);

NSString *bodyString = [NSString stringWithFormat:@"image=%@",encodedString];
[request setValue:[NSString stringWithFormat:@"%d", [bodyString length]] forHTTPHeaderField:@"Content-length"];
[request setHTTPBody:[bodyString dataUsingEncoding:NSASCIIStringEncoding]];//or set the type of encoding agreed with your webservice

NSURLResponse *response = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *responseString;
if ( responseData && !error){
    responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"Response: %@",responseString);
} 
```

PHP：

```
$json_obj = json_decode($_POST['image']);
$blob = base64_decode($json_obj);

$dbHandle = mysql_connect("MYCONNECTION");
$dbFound = mysql_select_db("MYCONNECTION");

if($dbFound){

    $check = "INSERT INTO `Images`(`imageId`, `image`, `userId`, `dateCreated`) ".
             "VALUES ".
             "('','$blob','0',null)";

    $retval = mysql_query( $check, $dbHandle );

    if(!$retval)
    {
        die('Could not enter data: ' . mysql_error());
    }
   echo "BLOB: " . $blob;
}
else{
  print "No Connection";
}

mysql_close($dbHandle);
?> 
```

我得到的输出：

```
Response: BLOB: 
```

并在数据库中获取新的 BLOB

```
[BLOB - 0B] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:43:12.357

[对于发布方法，请阅读我自己的答案。](https://stackoverflow.com/questions/15377212/get-the-password-from-the-webservices-url-and-access-through-that-password/15377242#15377242)

并使用此代码发布图片。

```
NSString  *imgPath = fullPathOfYourImage;
    if([[NSFileManager defaultManager] fileExistsAtPath:imgPath])
    {
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];                                                        
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"photo\"; filename=\"YourImageName.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                                                                                                               ^..YourImageName….^

        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[NSData dataWithContentsOfFile:imgPath]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    } 
```

# javascript - 更改 epubfile 中的字体样式增加/减少 uiwebview 中的页数

> ID：15446367
> 
> 赞同：-1
> 
> 时间：2013-03-16T06:40:51.617
> 
> 标签：javascript, html, ios, css, xhtml

我正在开发一个应用程序 epubReeader。我已经使用 css 更改 UIWebView 中的字体样式，并且所有字体样式的字体大小都是固定的。但是问题是当我在 webview 中更改字体的字体样式时，页数是增加或减少取决于字体样式。更改字体样式后，如何修复总页数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:58:05.077

我有一个有根据的猜测。您使用的字体必须具有相同或非常相似的特征，例如字母间距、字母大小等。否则，每次更改字体时，布局都会发生变化，进而导致页码发生变化。

# cookies - 从 qml 获取/设置 cookie

> ID：15446371
> 
> 赞同：4
> 
> 时间：2013-03-16T06:41:29.493
> 
> 标签：cookies, xmlhttprequest, qml

我正在编写一个客户端程序。当我登录时，服务器会在“Set-Cookie”标头字段中向我发送一些 cookie。我需要获取 cookie，因为请求的其余部分将需要它们。

我尝试使用 xmlhttprequest.getResponseHeader("Set-Cookie") 获取 cookie，但失败了。我不想使用 C++，所以有可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T19:05:20.580

不，不使用 C++ 是不可能的。

查看方法的源[代码](http://qt.gitorious.org/qt/qt/blobs/4.8/src/declarative/qml/qdeclarativexmlhttprequest.cpp#line1102)`QDeclarativeXMLHttpRequest::fillHeadersList()`。它特别删除了 set-cookie 和 set-cookie2 标头，遵循 w3c对象[规范](http://www.w3.org/TR/XMLHttpRequest/#dom-xmlhttprequest-getallresponseheaders)。`XMLHttpRequest`方法的具体行为`getAllResponseHeaders`。那是：

> 返回所有 HTTP 标头，不包括与 Set-Cookie 或 Set-Cookie2 不区分大小写匹配的标头，...

# r - 如何在 R 的 writeBin 命令中获取要读取的变量名称？

> ID：15446373
> 
> 赞同：1
> 
> 时间：2013-03-16T06:41:47.133
> 
> 标签：r, variables

我无法让 writeBin 合作。我试图让它接受一个变量的值作为它的参数之一：

以下作品：

```
writeBin(ACTUAL.VARIABLE, paste0(RSTATDATA,".raw"),size = 4, endian = .Platform$endian) 
```

但是我想要做的是用一个变量名替换“ACTUAL.VARIABLE”（这是我已经在 R 中创建的统计信息的向量），其内容是名称“ACTUAL.VARIABLE”。

我要做的是创建一个函数，允许用户输入特定的变量名（使用 readline），然后我的函数将其写为 bin 文件。就像是：

```
RSTATDATA<-readline("enter the name of the R variable that has your stats (must be a vector): ")
writeBin(RSTATDATA, paste0(RSTATDATA,".raw"),size = 4, endian = .Platform$endian) 
```

不幸的是，这不起作用（只写出 41 个字节，这比我要写的向量小得多）。我在想这里缺少一些语法，因为我不明白为什么放置实际的 R 对象名称有效，但放置一个包含 R 对象名称的变量却没有。

感谢您的任何建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:42:31.397

我不确定你的问题，但我认为你需要使用`get`，试试这个：

```
 writeBin(get(RSTATDATA), paste0(RSTATDATA,".raw"),
           size = 4, endian = .Platform$endian) 
```

所以你的函数必须是这样的：

```
 my.writeBin <- function(RSTATDATA){
    filename <- paste0(RSTATDATA,".raw")
    zz <- file(filename, "wb")
    writeBin(get(RSTATDATA), zz)
    close(zz)
  } 
```

# sql - 单列上的多个约束

> ID：15446379
> 
> 赞同：5
> 
> 时间：2013-03-16T06:42:29.973
> 
> 标签：sql, oracle10g

我们可以在单个列上添加多个约束吗？

像-

```
create table x(x varchar2(20), y number(2) not null,
constraint fk_cons foreign key(x) references user_info(user_id),
constraint null_cons not null(x)
) 
```

此查询返回错误 ora-00904: invalid identifier....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T06:54:35.037

创建`null_cons`约束时语法错误：

使用这个（表级检查约束）：

```
CREATE TABLE x(
    x VARCHAR2(20), 
    y NUMBER(2) NOT NULL,
    CONSTRAINT fk_cons FOREIGN KEY(x) REFERENCES user_info(user_id),
    CONSTRAINT null_cons CHECK(x IS NOT NULL)
) 
```

或者（`NOT NULL`在列上使用约束）：

```
CREATE TABLE x(
    x VARCHAR2(20) NOT NULL, 
    y NUMBER(2) NOT NULL,
    CONSTRAINT fk_cons FOREIGN KEY(x) REFERENCES user_info(user_id)
) 
```

或者（使用列级检查约束）：

```
CREATE TABLE x(
    x VARCHAR2(20) CHECK (X IS NOT NULL), 
    y NUMBER(2) NOT NULL,
   CONSTRAINT fk_cons FOREIGN KEY(x) REFERENCES user_info(user_id)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:52:14.867

```
 create table x(x varchar2(20), y number(2) not null,
    constraint fk_cons foreign key(x) references user_info(user_id),
    constraint null_cons check(x is not null)
    ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T14:44:42.167

如果 RDBMS 是 SQL Server，您可以通过这样做在列上定义多个约束（我更改了一些列名以使约束命名策略更加明显 - 命名是主观的）：

```
CREATE TABLE SomeTable(
    User_Id VARCHAR(20) CONSTRAINT FK_SomeTable_User_Id FOREIGN KEY REFERENCES dbo.User_Info(User_Id) CONSTRAINT UIX_NC_SomeTable_User_id  NONCLUSTERED NOT NULL, 
    SomeOtherColumn DECIMAL(2, 0) NOT NULL
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T06:55:33.317

```
create table x(x varchar2(20) not null, y number(2) not null,
    constraint fk_cons foreign key(x) references user_info(user_id)
) 
```

# javascript - 本机javascript中的按键功能

> ID：15446380
> 
> 赞同：-1
> 
> 时间：2013-03-16T06:42:49.607
> 
> 标签：javascript, jquery

下面是我的代码：

```
$(document).keypress(function(e){
  var s = String.fromCharCode(e.which);
  if ( s === "f"){
    alert ("its f");
  }
  else if ( s === "r"){
    alert ("its r");
  }
}); 
```

我想在 JavaScript 中做到这一点…………！！

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T06:46:27.590

```
document.addEventListener('keypress', function(e) { 
  var key = e.keyCode || e.which;
  ... // rest of code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T06:48:57.467

在原生 js 中，您可以通过 onClick、onKeyPress 等元素属性附加事件。不要忘记，事件处理函数中的事件参数；）在不同的浏览器中，您可以通过事件的不同属性读取按下键的代码。

这是一个例子：

```
<script type="text/javascript">
  document.getElementsByTagName("body")[0].onkeypress=function(e){
       var s = String.fromCharCode(e.which | evt.witch );
       switch(s){
           case "f":
              alert("key is 'f'");
              break;
           ....
       }
   };
</script> 
```

或者您可以使用该`addEventListener`方法，如下所示：

```
<script type="text/javascript">
     document.getElementsByTagName("body")[0].addEventListener('keypress',function(e){
       var s = String.fromCharCode(e.which | evt.witch );
       switch(s){
           case "f":
              alert("key is 'f'");
              break;
           ....
       }
     });
</script> 
```

您应该在加载文档后运行这些脚本。您可以像这样订阅`domready`事件：

```
<script type="text/javascript">
       document.addEventListener( "DOMContentLoaded", function(){
           //your code here  (one of the above)
       }, false );
</script> 
```

最后一节在这里讨论：[javascript domready?](https://stackoverflow.com/questions/1206937/javascript-domready) . 不幸的是，您可以以不同的方式订阅 domready 事件，具体取决于客户端浏览器。

一个建议（题外话）：

当你使用原生 javascript 时会出现一堆问题，因为浏览器的不兼容问题，已经在`jQuery`. 如果您想使用`jQuery`，但您无法访问 html 代码，并且您想加载`jQuery`您可以`jQuery`从`CDN`url 包含到您的网站，也可以使用 javascript，如下所示：

```
<script>  
   (function() {
        var jQ = document.createElement('script'); jQ.type = 'text/javascript'; 
        jQ.async = true;
        jQ.src = '//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(jQ, s);
   })();
</script> 
```

正如谷歌在 analitycs 代码中所做的那样；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:44:15.247

尝试这个

```
 document.onkeypress = keyPressFunction;

    function keyPressFunction(e) {
      var s = String.fromCharCode(e.which);
        if ( s === "f"){
         alert ("its f");
        }
        else if ( s === "r"){
         alert ("its r");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T07:31:46.027

这是一个简单的功能，可以完全满足您的需求 -

```
document.onkeydown=function(e){
    var char= String.fromCharCode(e.keyCode);
    if(char=='f'){
        alert(char);
    }else if(char=='r'){
        alert(char);
    }
} 
```

# ruby-on-rails - Rails：如何在搜索中显示具有特定条件的用户？

> ID：15446383
> 
> 赞同：0
> 
> 时间：2013-03-16T06:42:57.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

当用户 ABC 点击“搜索”链接时，我希望 ABC 只看到与 ABC 居住在同一城市的成员。现在我在用户控制器的索引操作中有以下代码，它显示了在网站上注册的所有成员。我也在使用`will_paginate`gem 进行分页。

```
 def index
    @users = User.paginate :page => params[:page], :per_page => 10
  end 
```

在视图中，我正在遍历`@users`数组以显示所有用户。

但是，我希望 ABC 只看到来自他/她所在城市的成员。一旦 ABC 只能看到来自他/她所在城市的成员，我将实施过滤器以进一步缩小结果范围。但这是后一步。此外，ABC 不应仅通过在地址栏中输入用户名来查看来自其他城市的用户的个人资料。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T06:57:03.027

您可以使用 ActiveRecord 范围（[Ruby on Rails Guides / ActiveRecord Query Interface）](http://guides.rubyonrails.org/active_record_querying.html#scopes)

然后在您的用户模型中，您将拥有如下内容：

```
scope :living_in_the_same_city_with, lambda { |user| /* your where condition where(:city_id => user.city_id) */ } 
```

和内部控制器：

```
@users = User.living_in_the_same_city_with(current_user).paginate :page => params[:page], :per_page => 10 
```

# android - 尝试获取位置时出现异常

> ID：15446387
> 
> 赞同：1
> 
> 时间：2013-03-16T06:43:36.383
> 
> 标签：android, google-maps, gps

我想获取当前位置（经度和经度），但我在代码中遇到了一些错误。

> `1\. map_view`, `activity_maintv_location`,`cur_position`无法解析或不是字段。

这是我的代码：

```
public class MainActivity extends MapActivity implements LocationListener {

private MapView mapView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Getting reference to MapView
    mapView = (MapView) findViewById(R.id.map_view  );

    // Setting Zoom Controls on MapView
    mapView.setBuiltInZoomControls(true);

    // Getting LocationManager object from System Service LOCATION_SERVICE
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    // Creating a criteria object to retrieve provider
    Criteria criteria = new Criteria();

    // Getting the name of the best provider
    String provider = locationManager.getBestProvider(criteria, true);

    // Getting Current Location
    Location location = locationManager.getLastKnownLocation(provider);

    if(location!=null){
        onLocationChanged(location);
    }

    locationManager.requestLocationUpdates(provider, 20000, 0, this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onLocationChanged(Location location) {
    TextView tvLocation = (TextView) findViewById(R.id.tv_location);

    // Getting latitude
    double latitude = location.getLatitude();

    // Getting longitude
    double longitude = location.getLongitude();

    // Setting latitude and longitude in the TextView tv_location
    tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude );

    // Creating an instance of GeoPoint corresponding to latitude and longitude
    GeoPoint point = new GeoPoint((int)(latitude * 1E6), (int)(longitude*1E6));

    // Getting MapController
    MapController mapController = mapView.getController();

    // Locating the Geographical point in the Map
    mapController.animateTo(point);

    // Applying a zoom
    mapController.setZoom(15);

    // Redraw the map
    mapView.invalidate();

    // Getting list of overlays available in the map
    List<Overlay> mapOverlays = mapView.getOverlays();

    // Creating a drawable object to represent the image of mark in the map
    Drawable drawable = this.getResources().getDrawable(R.drawable.cur_position);

    // Creating an instance of ItemizedOverlay to mark the current location in the map
    CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(drawable);

    // Creating an item to represent a mark in the overlay
    OverlayItem currentLocation = new OverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude);

    // Adding the mark to the overlay
    currentLocationOverlay.addOverlay(currentLocation);

    // Clear Existing overlays in the map
    mapOverlays.clear();

    // Adding new overlay to map overlay
    mapOverlays.add(currentLocationOverlay);

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:50:40.653

您似乎已获取此代码并将其粘贴到项目的活动中。但是，您似乎没有添加其他资源。如果这是来自网站，请在 OP 中发布指向该网站的链接。

例如，考虑`map_view`OP 中所述的错误是指这行代码：

`mapView = (MapView) findViewById(R.id.map_view);`

错误是`cur_position`指这一行：

`Drawable drawable = this.getResources().getDrawable(R.drawable.cur_position);`

验证您的布局 XML 中是否存在`MapView`id 的a 。至于，请确保您在项目的任何一个文件夹中都有图像资源（我假设） 。`map_view``activity_main``Drawable cur_position``Drawable`

另一个`activity_maintv_location`没有出现在上面发布的代码中，但是上面的任何一个建议都可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:43:28.610

试试这个，你的 Activity 必须是这样的实现`implements LocationListener {`

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    String provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        lat = (double) (location.getLatitude());
        lng = (double) (location.getLongitude());

        Log.i(TAG, "Lattitude:" + lat);
        Log.i(TAG, "Longitude:" + lng);

        Toast.makeText( this, "Current location:\nLatitude: " + lat + "\n" + "Longitude: " + lng, Toast.LENGTH_LONG).show();

        // create geo point
        GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));         
        MapController controller = mapview.getController();  
        controller.animateTo(point);
        controller.setZoom(13);     
        mapview.setBuiltInZoomControls(true);        

        drawable = getResources().getDrawable(R.drawable.marker);    
        OverlayItem overlayItem = new OverlayItem(point, "", "");    
        itemizedOverlay = new SimpleItemizedOverlay(drawable, mapview);  
        itemizedOverlay.addOverlay(overlayItem);    

        mapOverlays = mapview.getOverlays();

        mapview.getOverlays().add(itemizedOverlay);  
        mapview.invalidate();           

    } else {
        System.out.println("Location not avilable");
    }
    locationManager.removeUpdates(this);
} 
```

# ajax - 使用ajax时数据表urlrewrite

> ID：15446389
> 
> 赞同：0
> 
> 时间：2013-03-16T06:44:06.457
> 
> 标签：ajax, url-rewriting, datatables

帮助。我找不到我的问题。

当我如下设置数据表时，所有事情都按我的意愿运行。"bServerSide": true, "sAjaxSource": contextPath + "/commodity/ajax/brands",

但是当我如下更改 sAjaxSource 时，发生了 ajax 错误功能。“bServerSide”：真，“sAjaxSource”：contextPath + “/commodity/ajax/products”

我使用了 chorme 并将 url 更改为 http:// *** :8080/tire/tire/app/main

Java 中的控制器如：@RequestMapping(value = "/commodity/ajax/products")

@RequestMapping(value = "/commodity/ajax/brands")

是 urlrewrite 的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:04:02.450

您的意思是您将 url 从另一个更改为*** */app/main，似乎您使用 Spring MVC，因此您应该检查您的 web.xml 并查看 servlet: DispatchServlet 指定的 url-pattern。因为只有与此模式匹配的 url 可以由带有 @Controller 注释的控制器处理。

# php - 为什么 .the_time() 出现在内容之前

> ID：15446395
> 
> 赞同：3
> 
> 时间：2013-03-16T06:44:53.537
> 
> 标签：php, wordpress, shortcode

在以下简码中，get_the_title() 显示在 * 和 # 字符之间，如预期的那样。但是 the_time() 始终显示在页面顶部而不是内容内部。为什么 the_time() 会这样做？

有没有办法让发布时间出现在内容中？

```
function get_recent_posts3() {
    $args = array('cat' => 8, 'posts_per_page' => '2');
    $the_query = new WP_Query( $args );
    $postcontent = '';
    while ( $the_query->have_posts() ) :
        $the_query->the_post();
        $timestamp = '**<br>'.get_the_title().'##'.the_time('F j, Y').'<br>**';
        $postcontent = $postcontent.$timestamp;
    endwhile;
    return $postcontent;
    wp_reset_postdata();
}
add_shortcode('getrecentposts3', 'get_recent_posts3'); 
```

输出：

```
March 12, 2013March 3, 2013 **
Second Post Title##
****
First Post Title##
** 
```

将 'cat' => 8 替换为有效的类别 ID 以运行代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T06:48:34.617

the_time() 回显时间，使用 get_the_time() 代替。

# c# - 如何在gridview内将焦点重新放在验证失败的文本框上

> ID：15446396
> 
> 赞同：0
> 
> 时间：2013-03-16T06:45:00.153
> 
> 标签：c#, asp.net

我在下面`textbox`有.`itemtemplate of gridview.`问题是当我点击时`edit button of gridview`，如果我`textbox`根据验证逻辑输入无效值，`focus of textbox is lost`当我点击`update button`..如果我在第 30 行焦点转到最上面的行..如何防止焦点..

```
<asp:TextBox ID="tbattendence"  Width="40px" runat="Server" Text='<%# Eval("attendence") %>' onkeydown = "return (event.keyCode!=13);">
                            </asp:TextBox>
                        </td>
                        <td>
                              <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="tbattendence"
                ErrorMessage="Attended Attendence is required!"  Display="Dynamic"  ValidationGroup="bottom" 
               ForeColor="#6600FF">*</asp:RequiredFieldValidator>

              <asp:CompareValidator ID="CompareValidator" runat="server"  ErrorMessage="Attended Attendence must be Lesser!"
                                ControlToValidate="tbattendence" ControlToCompare="tbcutoff"  
                                Display="Dynamic" Operator="LessThanEqual" Type="Integer" ValidationGroup="bottom">*</asp:CompareValidator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:49:39.847

添加

```
SetFocusOnError="true" 
```

像这样的验证控件

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator2" SetFocusOnError="true" ... 
```

# html - 将回复表单添加到嵌套评论的最简洁方法

> ID：15446397
> 
> 赞同：0
> 
> 时间：2013-03-16T06:45:11.370
> 
> 标签：html, forms, threaded-comments

我正在向我的应用程序添加嵌套（类似 reddit）的评论；到目前为止，我只是使用`comment`div，在我的 CSS 中我这样做：

```
.comment {
  margin-left: 40px;
} 
```

这适用于显示评论。我的问题是现在向每个评论添加回复表单的最干净的方法是什么（并且仅在用户单击某种回复按钮时显示它）？

这通常是通过立即添加评论的所有输入框来完成的，首先隐藏它们，然后仅在用户单击回复按钮时才显示它们？或者也许我应该只`<form>`在用户单击回复该评论后将相关的 HTML 代码附加到给定的 div ？

最干净的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:58:51.520

您可以通过在 html 中的某处隐藏一个表单字段来做到这一点，并且当用户单击 commect 时克隆表单元素并将其附加到评论 div

签出下面的这个 jsFiddle[示例](http://jsfiddle.net/jskswamy/p6qFB/)是代码片段

```
<div class="comment">
    comment1
</div>
<div class="comment">
    comment2
</div>
<div style="display:none">
    <form id="commentForm">
        <textarea name="comment"></textarea>
    </form>
</div>

var Comment = {
    init: function() {
        $(".comment").bind('click', $.proxy(this.handleClick, this));
    },
    handleClick: function(evt) {
         var form = $('#commentForm').clone();
         var target = $(evt.target);
         var isFormAvailable = $("#commentForm", target).length > 0;
         if(!isFormAvailable) {
             $(evt.target).append(form);
         }
    }   
};

$(function() {
    Comment.init();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:08:09.250

将表单模板保存在文档中的某个位置并将其隐藏。单击任何评论旁边的回复后，请执行以下操作。

1.  克隆模板（可以jquery克隆功能）
2.  将模板中的隐藏字段设置为点击回复的评论的 id
3.  将其附加到需要回复的评论旁边

我会和这个一起去的。

立即保留每个评论的输入框是没有意义的。它不必要地增加了页面的大小。

# c# - 选择下一个节点 html 敏捷包 C#

> ID：15446401
> 
> 赞同：1
> 
> 时间：2013-03-16T06:46:01.727
> 
> 标签：c#, regex, filtering, html-agility-pack

我是第一次使用 htmlagilitypack 的学生。我目前正在过滤 html 以获取使用的值

```
foreach (HtmlNode link in bodyNode.SelectNodes("//span[@class='content-b']"))
{
    if (link.InnerText.Contains("Name"))
    {
        //MessageBox.Show("Found");
        textBox1.Text += "Name : " + ?????;
    }

    textBox1.Text += link.InnerText;
} 
```

如您所见，我正在检查当前节点是否包含值“NAME”，如果是，我想获取下一个节点的值。如果你能帮助我解决这个问题，我将非常感激。

名称的值在下一个节点中`<div class='content-b'>THIS IS MY NAME</div>`.. 我怎么能有问题地告诉 C# 在再次循环之前获取下一个节点？

谢谢你。

* * *

更新：这是我正在使用的 html 代码片段，它看起来很丑，对不起，我无能为力

```
<span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Name of the Author: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class="">Undertaker</font></font></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Name movie: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class="">Some Movie Name</font></font></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Room Online: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class="">skype123</font></font></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Subsites and site: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class="">google.nl</font></font></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Year: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class="">2013\. </font></font></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Genre: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class="">Horror</font></font></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Length: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class="">00:35:45 </font></font></span></span></span></span><span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font class="">Description: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font class=""><font>Paragraph 1</font><font>Paragraph 2</font><font>Paragraph 3</font></font><br></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font>Video Format: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font>MP4 </font></font></span></span></span></span> <span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font>Video: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font>MPEG4 Video (H264) 720x404 29.97fps 1000Kbps </font></font></span></span></span></span><span class="post-align" style="text-align: center;"><span style="font-family: Kristen ITC;"><span style="font-size: 16px; line-height: normal;"><span style="color: #009933;"><span class="content-b"><font><font>Audio: </font></font></span></span> <span style="font-size: 12px; line-height: normal;"><span class="content-b"><font><font>AAC 44100Hz stereo 96Kbps</font></font></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:00:16.587

首先，您的文档中没有`class="content-b"`。它们都拼写为**`contet-b`**.

其次，由于html格式不正确，`NextSibling`将无法正常工作。您需要手动获取与条件匹配的下一个节点。在这种情况下，您不能使用`foreach`循环。

结果如下：

```
var nodes = bodyNode.SelectNodes("//div[@class='contet-b']").ToList();
for( int i =0; i < nodes.Count; i++)
{
    var link = nodes[i];
    if (link.InnerText.Contains("Name"))
    {
        textBox1.Text += "Name : ";
        if (i + 1 < nodes.Count)
        {
            // append the value of next matching `div` node
            textBox1.Text += nodes[i + 1].InnerText.Trim();
            i++; // skip this node
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:50:29.060

您正在寻找的是节点的**NextSibling**属性。在您的示例中：

```
foreach (HtmlNode link in bodyNode.SelectNodes("//div[@class='content-b']"))
{
    if (link.InnerText.Contains("Name"))
    {
        //MessageBox.Show("Found");
        textBox1.Text += "Name : " + link.NextSibling.InnerText;
    }

    textBox1.Text += link.InnerText;
} 
```

# php - mysql语法有问题吗

> ID：15446405
> 
> 赞同：0
> 
> 时间：2013-03-16T06:46:23.690
> 
> 标签：php, mysql

mysql语法有什么问题吗，我相信语法是正确的，尽管我一直收到错误当我运行我的网站时出现语法错误

```
 $query = "SELECT DISTINCT paycheck.jobId
      FROM paycheck,users
      WHERE users.email = " . $_SESSION['email'] .
      "AND userId = empId"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T06:47:45.767

你在这里忘记了单引号

```
$query = "SELECT DISTINCT paycheck.jobId
FROM paycheck,users
WHERE users.email = '" . $_SESSION['email'] ."' AND userId = empId"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:49:49.657

尝试这个：

```
$query = "SELECT DISTINCT `paycheck`.`jobId`
      FROM `paycheck`,`users`
      WHERE `users`.`email` = '" . $_SESSION['email'] ."' AND `userId` = 'empId' "; 
```

您可能还需要考虑转义查询以防止 sql 注入

# dart - 在 Dart 中，是否有与 C# 中使用 WinForms 等效的 MessageBox 功能

> ID：15446410
> 
> 赞同：3
> 
> 时间：2013-03-16T06:46:54.637
> 
> 标签：dart, dart-html

我知道隔离库中有一个 MessageBox 类，但这不是我需要的。我正在寻找桌面窗口应用程序（即 WinForm 应用程序）中的弹出式消息框功能，您可以在其中询问一个简单的确认问题，用户可以单击是或否按钮作为响应。Dart 中是否有等价物，如果没有，有人可以提出一些替代方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T16:13:43.830

您可以使用以下命令轻松显示消息框：

```
window.alert('test'); 
```

不要在文件顶部忘记这一点：

```
import 'dart:html'; 
```

这将类似于 JavaScript 中的警报函数。如果您想在消息窗口中添加按钮（除了默认的“ok”按钮），那么您将需要创建一个自定义窗口，这并不难。您创建一个添加到文档正文的元素。这个元素应该是绝对定位的。在您的文档前面添加一个覆盖将有助于防止用户点击页面。

这是在 javascript 中，但知道如何处理 dom 和 css 很有用：

[http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/](http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/)

# php - 在N级类别中调用递归函数时获取空白选项值

> ID：15446411
> 
> 赞同：0
> 
> 时间：2013-03-16T06:47:00.757
> 
> 标签：php, recursive-query, multi-level

我正在创建具有 n 级别类别的选择框，但我得到空白记录我没有发现错误是什么问题。

```
$value = 'upload_files/';
echo $manage_folder->getFolderOptionListByParentId(0,$value);

function getFolderOptionListByParentId($parent = 0,$value)
{
        $html = '';
        $query = mysql_query("SELECT * from tbl_folder where folder_parent_id = '$parent'");
        if($query){
            while($row = mysql_fetch_assoc($query))
            {
                $current_id = $row['folder_id'];
                $passvalue =  $value.$row['folder_name'].'/';
                $html .= '<option value="'.$passvalue.'">' . $value.$row['folder_name'].'/<option>';
                $has_sub = NULL;
                $has_sub = mysql_fetch_assoc(mysql_query("SELECT COUNT(folder_parent_id) as total FROM tbl_folder WHERE folder_parent_id = '$current_id'"));
                if($has_sub['total'] != 0){
                    $html.= $this->getFolderOptionListByParentId($current_id,$passvalue);
                }

            }
        }

        return $html;
    } 
```

我得到的答案如下

```
<select name="file_upload_dir" class="select_uplopad">
              <option value="upload_files/">upload_files/</option>

<option value="upload_files/eteste/">upload_files/eteste/</option>

<option></option>
<option value="upload_files/Munir_26/">upload_files/Munir_26/</option>
<option></option>
<option value="upload_files/Munir_26/munir1/">upload_files/Munir_26/munir1/</option>
<option></option>
<option value="upload_files/Munir_26/munir12/">upload_files/Munir_26/munir12/</option>
<option></option>

<option value="upload_files/Test_27/">upload_files/Test_27/</option><option></option>    <option value="upload_files/Kaushik_28/">upload_files/Kaushik_28/</option>
<option></option><option value="upload_files/32_abhisekh/">upload_files/32_abhisekh/</option>
<option></option>
<option value="upload_files/Harigopal_33/">upload_files/Harigopal_33/</option><option></option>
<option value="upload_files/34_test/">upload_files/34_test/</option>    
<option></option><option value="upload_files/34_test/dsds/">upload_files/34_test/dsds/</option>
<option>
</option>
</select> 
```

我得到了这种类型的结果所以任何解决方案

请给我

# fortran - MPI_REDUCE 错误

> ID：15446412
> 
> 赞同：0
> 
> 时间：2013-03-16T06:47:04.850
> 
> 标签：fortran, mpi

我不明白为什么以下程序不起作用。当我使用“mpirun -np 2 a.out”运行它时，我希望它打印“N：2”，但它却给了我一个段错误。

谢谢

主文件

```
 program main

  implicit none

  include 'mpif.h'

  integer me, ngs,ierror

  call  inimpi(me, ngs)

  call calc

  call mpi_finalize( ierror )

  stop
  end 
```

inimpi.f

```
 subroutine  inimpi(me, ngs)

  include  'mpif.h'

  integer me, ngs, ierror

  call  mpi_init( ierror )
  call  mpi_comm_rank( mpi_comm_world, me,  ierror )
  call  mpi_comm_size( mpi_comm_world, ngs, ierror )

  return
  end 
```

计算

```
 subroutine  calc

  include 'mpif.h'

  integer  p, e, ierror

  p = 1

  call mpi_reduce(p, e, 1, mpi_integer,
 &     mpi_sum, mpi_comm_world, ierror)

  print *, "N: ", e
  return
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:08:34.873

取自 mpich2 文档：

```
int MPI_Reduce(void *sendbuf, void *recvbuf, int count, MPI_Datatype datatype, 
               MPI_Op op, int root, MPI_Comm comm) 
```

您没有指定`root`for `mpi_reduce`。因此，`mpi_comm_world`被用作`root`和`ierror`被用作`MPI_Comm`。你的意思是使用`MPI_Allreduce`不需要根参数的？

哦，如果可能的话，尝试使用`use mpi`而不是`include 'mpif.h'`，这甚至可能会捕获当前错误。

# android - UsbConnection.bulkTransfer 返回“-1”。这是什么意思？

> ID：15446413
> 
> 赞同：5
> 
> 时间：2013-03-16T06:47:11.903
> 
> 标签：android, usb

根据 doc 否定响应意味着失败。怎么知道出了什么问题？有没有关于错误类型的完整文档？

更多好奇：我正在尝试通过 USB 上传 arduino 草图。首先，我通过关闭/打开 DTR/RTS 然后使用 Stk500 协议发送数据来引起引导加载程序的注意。如果通过 USB 在 mac/arduino 上运行（使用 rxtx 串行），它工作正常，所以我认为它应该在 android AS-IS 上工作（只需更改串行），但在 DTR/RTS 切换后它无法发送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:28:49.990

好吧，在深入了解日志后，我能够处理它 - 不要连续关闭/打开 USB 几次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:22:09.387

从[bulkTransfer()](http://developer.android.com/reference/android/hardware/usb/UsbDeviceConnection.html#bulkTransfer%28android.hardware.usb.UsbEndpoint,%20byte%5B%5D,%20int,%20int%29)的文档中：

> 退货
> 
> 成功传输的数据长度（或零），或失败为负值

因此，如果您收到`-1`，则表示您的数据传输失败。您可以查看 logcat，或使用断点找出原因。

# fortran - 如何在 Fortran 中获取子程序调用层次结构？

> ID：15446414
> 
> 赞同：0
> 
> 时间：2013-03-16T06:47:17.233
> 
> 标签：fortran

在子程序中，我想知道发生错误时哪个上层子程序正在调用它。有没有不使用参数的方法？因此子程序的用户可以被通知上层子程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:25:05.893

There is nothing built in to Fortran which will give you the sort of information you seek. You could, as you suggest, write your own programs to report the information but it strikes me that doing so might burden your code with a lot of error-reporting infrastructure which obscures its meaning and materially affects its importance.

I suggest that you investigate your compiler's capabilities. Intel Fortran, for example, offers a `traceback` option which is often useful for diagnosing the causes of problems. [Start your reading here.](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/fortran-lin/GUID-BEF9747A-017E-4FA9-BD35-1F3DF8744594.htm) All the other Fortran compilers I've worked with offer similar facilities, check the documentation.

# ios - 为什么应用程序在设备内存不足时崩溃？

> ID：15446416
> 
> 赞同：2
> 
> 时间：2013-03-16T06:47:20.060
> 
> 标签：ios, objective-c

我对 iOS 特别陌生，离基本概念还很远。

我在 iOS 书籍和论坛中读到应用程序由于内存不足而崩溃，但为什么会崩溃？如果有人可以发出一些光，那将是有帮助的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T06:49:06.753

iOS 设备将虚拟内存与分页一起使用。由于它是一个移动设备并且没有可扩展内存或相当大的内存可用（如硬盘驱动器），因此页面的可用性受到各种因素的限制，例如打开的应用程序数量，不同应用程序的分配等。此外，一些板载应用程序将始终继续使用某些页面，即使它们处于休眠状态，例如 safari 、 i-tunes 、消息传递等。因此，基本上随着应用程序活动的数量，您的应用程序可以使用的页面数量会进一步减少.

因此，当您的应用程序的分配速率超过其他应用程序释放页面的速率时，您的应用程序将崩溃。

操作系统只释放内存中的只读数据，不释放可写数据。当可写数据超过某个阈值时，操作系统会要求应用程序释放内存。无法释放内存会导致崩溃。

[苹果内存分配](https://developer.apple.com/library/mac/#documentation/performance/Conceptual/ManagingMemory/Articles/MemoryAlloc.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T07:04:33.117

它并没有真正崩溃。如果应用程序在收到通知后没有释放足够的内存，则会被内核终止。

为了使这一点变得透明，我们编写了一份崩溃报告，其中包含有关当前情况的详细信息。对用户来说，它看起来就像应用程序崩溃了，因为它突然消失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T06:53:42.217

这些设备没有太多内存，如果您对内存很感兴趣，那么您正在寻找麻烦

iOS 有一个很好的记忆工具叫做 ARC。[请在此处](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)阅读完整文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T06:58:18.260

[我以前在我自己的应用程序中加载仅包含 UIImages 的表格视图时被烧毁了](https://stackoverflow.com/questions/12773074/received-memory-warning-on-setimage/12773139#12773139)，这可能看起来像表格中的微小缩略图，但最终在幕后成为全分辨率（和大量内存）对象。

处理可能占用内存的对象时需要小心。

但请放心，Apple 提供了诸如 Xcode Instruments 之类的工具，您可以使用它来分析应用程序的内存性能。

# python - Roger Stuckey 的 wxPython 多处理示例代码中的“self.update”有什么用

> ID：15446423
> 
> 赞同：0
> 
> 时间：2013-03-16T06:48:18.940
> 
> 标签：python, multiprocessing

我正在阅读 Roger Stuckey 的 wxPython Multiprocessing 代码，试图自己制作一个类似的程序。完整的代码可以在[这里](http://rogerstuckey.com/code/python/wxsimple_mp/)找到。

代码运行良好，无需任何修改。但是，我发现在 GUI 类**MyFrame**和处理类**TaskSErverMP**之间传递了一个参数*self.update*。我已经在整个代码片段中进行了搜索，但无法弄清楚它在代码中做了什么——它从来没有被初始化和使用过。

 ****在 MyFrame 类中：

```
def OnStart(self, event):
   ...
   self.taskserver.processTasks(self.update)
   ...

def OnStop(self, event):
   ...
   self.taskserver.processStop(self.update)
   ...

def update(self, output):
    """
    Get and print the results from one completed task.
    """
    self.output_tc.AppendText('%s [%d] calculate(%d) = %.2f\n'...
    ...
    # Give the user an opportunity to interact
    wx.YieldIfNeeded() 
```

在 TaskServerMP 类中：

```
def run(self):
   ...
   self.processTasks(self.update)
   ...

def processTasks(self, resfunc=None):
   ...

def processStop(self, resfunc=None): 
   ...

def update(self, output):
    """
    Get and print the results from one completed task.
    """
    sys.stdout.write('%s [%d] calculate(%d) = %.2f' % .... 
```

所以我认为这是一种依赖注入实践，仅此而已。然后我从代码中删除它，最奇怪的事情发生了——程序不再工作了！我显示了 GUI，并且能够开始处理。但是，GUI 刚刚挂起，然后 Windows 报告该程序没有响应。我最终从 Windows 任务管理器中手动杀死了所有 pythonw.exe 进程。

然后我开始考虑是否与**TaskServerMP**类中的**processTasks**和**processStop**函数的签名有关。但我真的不知道如何将参数**self.update**关联到可选参数**resfunc**。

 ******我认为 Roger 的代码没有任何问题。但是，如果我不能扭曲源代码来测试我对代码的理解，那我会很困扰。

我在 Windows 7 中使用 Python 2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T06:59:17.277

`MyFrame.update`是一种方法。你可以在第 365 行看到它的定义。

绑定方法也是如此`self.update`，这意味着它可以像普通函数一样被调用。

你可以看到它`processTasks`带有一个`resfunc`参数；然后，至少 165，如果它有一个函数或方法作为该`resfunc`参数，它会调用它。

这里的想法是让`processTasks`调用者决定如何在每个任务完成时打印出进度更新。一类可能通过将它们写入标准输出来做到这一点。不同的类可能会更新 GUI 进度条。

这是在 Python 代码中传递回调的一种非常典型的方式。

* * *

那么，如果您取出 ，为什么程序会挂起`self.update`？好吧，看看里面有什么，在第 372 行：

```
 # Give the user an opportunity to interact
    wx.YieldIfNeeded() 
```

在 wx 中，与大多数 GUI 框架一样，主线程正在运行一个“事件循环”，它必须在每个事件（鼠标移动、按键等）进入时对其进行处理，然后等待下一个事件。你把你的代码写成一堆事件处理程序——当有人点击这个按钮时，运行那个函数；等等。您的事件处理程序必须快速返回。否则，事件循环将无法接收并分派下一个事件，因此您的 GUI 没有响应。在 wx 中，`Yield`函数族使生活更轻松。只要您经常屈服，您就不必快速返回。但是你仍然必须做一个或另一个——要么早点返回，要么屈服——否则 GUI 将挂起。

* * *

这是一个非常简单的示例，展示了如何使用绑定方法：

```
class Foo(object):
    def __init__(self, name):
        self.name = name
    def print_name(self):
        print(self.name)
    def give_me_a_printer_function(self):
        return self.print_name

spam = Foo('Spam')
my_function1 = spam.print_name
my_function2 = spam.give_me_a_printer_function()
my_function1()
my_function2() 
```

这将打印`Spam`两次。

函数和方法是Python 中的*一等值*——您可以传递它们，就像传递数字、字符串、列表和类实例一样。你甚至可以将它们打印出来（虽然你会得到一些像 的丑陋的东西`<bound method Foo.print_name of <__main__.Foo object at 0x104629190>>`）。**********

# c# - 执行sql命令时如何保持线程空闲

> ID：15446426
> 
> 赞同：0
> 
> 时间：2013-03-16T06:48:53.933
> 
> 标签：c#, asp.net, sql, ado.net

所以我有 loooooooong 存储过程。执行大约需要 5-8 分钟。假设我创建了一个 sqlCommand 对象并通过我的 asp.net 应用程序执行它，线程将等到命令执行完成或命令超时持续时间。

事件 如果我有另一个线程（thread_2）来完成这个任务，thread_2 会等待。我想避免等待，因为命令大约需要 4-7 分钟才能执行。

有什么办法吗？

**编辑 ：**

纠正我如果我错了，但我相信使用异步版本也会使用thread_2。异步方法只是减少线程代码的包装器。[我的信念]

我想要一些事件驱动机制，以便在命令执行完成之前没有线程在使用。

但现在感觉我要求的太多了……是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:52:41.417

为了使 SQL 调用异步，所有命令都有异步版本 - 即[SqlCommand.ExecuteNonQueryAsync](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonqueryasync.aspx)

第二部分是使页面呈现异步，以便在执行 SQL 命令时不使用线程。MVC 和 WebForms 都允许您这样做（MVC 更容易）。请注意，如果执行时间与您所说的一样长，您可能希望在页面上实现某种轮询机制，而不是等待请求竞争来呈现结果......

使用一些代码，您可以将其包装在`async`友好的代码中（[使用 async/await](http://blogs.microsoft.co.il/blogs/bnaya/archive/2012/01/15/using-async-await.aspx)）以在[异步 MVC 操作](http://msdn.microsoft.com/en-us/library/ee728598%28v=VS.98%29.aspx)中使用。

如果您必须坚持使用 WebForms/plain ASP.Net，您将需要做更多的工作来实现异步页面，但这仍然是可能的。

# c++ - 在 OpenCV 中访问图像的元素

> ID：15446430
> 
> 赞同：-1
> 
> 时间：2013-03-16T06:49:29.187
> 
> 标签：c++, opencv

我希望在openCV中访问和显示图像的元素，我正在访问带有行和列索引的各个元素，并尝试在控制台上以整数的形式显示它们，这是我的代码：

```
 int v=0;
            IplImage* img1 = cvLoadImage("image3.jpg",0);
            Mat img;

            for( int i = 0; i < img.rows; i++)
             {
                for( int j = 0; j < img.cols; j++ )
             {
                v=img.at<uchar>(i,j);

                       cout<<"Value"<<"  "<<v;
             }
            cout<<endl;
             }
            return 0; 
```

但我得到了一个空白控制台......我要去哪里穿？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:52:04.767

您加载了图像`img1`并尝试访问`img`未存储数据的元素。因此`img.rows`and`img.cols`都是 0，你什么也得不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:53:56.233

尝试这个

```
Mat img = imread("image3.jpg"); 
```

在您的程序中 img 未初始化。所以你有黑屏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:17:12.367

昨天我做了这样的事情：

```
IplImage* img = cvLoadImage("image3.jpg", 0);
for( int i = 0; i < img->height; i++)
{
    //ptr - pointer to the first element of each row
    char* ptr = (char*) (img->imageData + i*img->widthStep);

    for( int j = 0; j < img->width; j++ )
    {
        char v = (char) ptr[j];
        cout<< "Value" << "  " << v;
    }
    cout << endl;
} 
```

# ruby-on-rails - rails + postgres：我应该在大表中为小表的外键添加索引吗

> ID：15446431
> 
> 赞同：0
> 
> 时间：2013-03-16T06:49:36.717
> 
> 标签：ruby-on-rails, database, indexing

我的用户表有大约一百万条记录。

我的 Region 表可能有 200 条记录。

我应该`add_index :users, :region_id`吗？

如果区域具有 user_id，则相反，我应该在区域表中索引 user_id 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:08:27.453

“过早的优化是万恶之源”。仅当应用程序的分析表明您需要索引时才添加索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:07:06.157

是的，您应该添加。如果您认为您将有很多查询获得这些字段的条件。在您的情况下，我认为您可能有很多查询，例如居住在一个地区的人，所以我会在 users 表上为（id（user_id）和 region_id 字段一起在一个索引中）创建一个索引

```
add_index :users, [:id, :user_id] 
```

# java - 从 Java wamp 服务器中的数据库中删除

> ID：15446438
> 
> 赞同：0
> 
> 时间：2013-03-16T06:50:14.583
> 
> 标签：java, mysql, database, wamp

```
public void deleteBook(int temp)
{
    try
    {
        query = "DELETE FROM ccItems WHERE ISBN = '"+temp+"'";

        stmt.executeUpdate(query);

        JOptionPane.showMessageDialog(null, "Item Deleted !");
    }      

    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null, "Error: Could not find ISBN or Already deleted.");
    }
} 
```

我有一种`deleteBook()`方法可以删除我的数据库中的项目。它正常工作意味着删除输入了相应 ISBN 的指定项目。问题是，如果用户输入的 ISBN*不在我的数据库*中，该`try`语句仍会执行。我认为该`catch`语句必须执行，因为在数据库中找不到输入的 ISBN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:53:48.457

尝试仍将运行。它只是删除了 0 行。

您需要使用[executeUpdate()](http://docs.oracle.com/javaee/5/api/javax/persistence/Query.html#executeUpdate%28%29)的返回值。由于 executeUpdate() 返回一个 int; 更新或删除的实体数量，您可以使用它来解决您的问题。你可以抛出一个异常来获取你的错误信息。

```
public void deleteBook(int temp)
{
    try
    {
        query = "DELETE FROM ccItems WHERE ISBN = '"+temp+"'";
        if (stmt.executeUpdate(query)!=0) {
          JOptionPane.showMessageDialog(null, "Item Deleted !");
        } else {
          throw new Exception();
        }
    }      
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null, "Error: Could not find ISBN or Already deleted.");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:53:53.540

与选择查询一样，“未找到记录”也不例外。`stmt.executeUpdate(query);`将返回删除的记录数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:55:08.493

从数据库的角度来看**，这根本不是错误**，只是在给定您的 where 条件下没有找到任何匹配的记录。这就是为什么您没有在客户端引发异常的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T06:55:36.897

如果我输入一些东西使 temp 等于 ' 或 ''='，你所有的 ccItems 都将被删除，这就是 SQL 注入攻击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T06:56:11.993

它不会给出任何错误，因为如果 ISBN 不存在，它只会影响零行而不会出现任何错误。

如果您想确切知道是否删除了任何行，请编写如下代码。

```
public void deleteBook(int temp){
   try{
        query = "DELETE FROM ccItems WHERE ISBN = '"+temp+"'";
        int numberOfRowsEffected = stmt.executeUpdate(query);
        if (numberOfRowsEffected == 0){
            JOptionPane.showMessageDialog(null, "Item not found !");
        }else{
            JOptionPane.showMessageDialog(null, "Item Deleted !");
        }
    } catch(Exception e){
        JOptionPane.showMessageDialog(null, "Error: Could not find ISBN or Already deleted.");
    }
} 
```

# php - 如何提高分页速度

> ID：15446442
> 
> 赞同：0
> 
> 时间：2013-03-16T06:50:25.987
> 
> 标签：php, mysql, performance, pagination

在我的项目中，我使用 PHP 进行了分页，我做了如下操作：每个按钮（下一页和上一页）都是超链接，它们通过 GET 变量（PAGENUMBER）链接到同一页面。对于每个页面更改，都有脚本

1.  连接到数据库。
2.  查询指定页面的数据。
3.  关上
4.  数据库连接。显示数据。

问题是它工作缓慢。每次连接到数据库并查询数据并关闭数据库连接时，是否有任何替代方法。

此外，在分页期间，我只想重新加载数据库中的数据，页面中的所有其他内容保持不变，不想重新加载。如何做到这一点？

脚本如下

```
 <?php
require_once("./include/membersite_config.php");    //include files for login system
if($fgmembersite->CheckLogin())
{
    $login=true;
}
else
{
    $login=false;
}
require_once("db.php"); 
$con=connect();     //connect to db and select the db
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
    <HEAD>
        <TITLE> Gallery </TITLE>
        <META name="generator" content="Adobe Photoshop(R) CS Web Photo Gallery">
        <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <link href="images/galleryStyle.css" rel="stylesheet" type="text/css">
         <link rel="STYLESHEET" type="text/css" href="style/new.css" />
    </HEAD>
<body  marginheight=0 marginwidth=0 leftmargin=0 topmargin=0>
<table><tr>
<?php
//////////////////DISPLAYING IMAGE THUNBNAILS//////////////////////
$query="SELECT COUNT(*) FROM gallery ";
$res = query($query);
$raw=mysql_fetch_array($res);
$imagecount=$raw[0];
if($imagecount==0) { die ("No images found"); }
$pagecount=ceil($imagecount/15); 
$page = isset($_GET['page']) ? mysql_real_escape_string($_GET['page']) : 1;
if (isset($_GET['page']))
{
   if (!(ctype_digit($_GET['page']) and $_GET['page']>0 and $_GET['page']<=$pagecount))
   { 
       die ("You are not autorised to viw this page");
   }
}
$start= ($page*15)-15; 
$query = "SELECT * FROM gallery  ORDER BY imageid DESC LIMIT $start , 15";
$res = query($query);
$count= mysql_num_rows($res);
$index=0;
for($i=1;$i<=3;$i++)
{
?>
<TR>
<?php
for($j=1;$j<=5;$j++)
{
   if(!$raw=mysql_fetch_array($res)) {break;}
   $index++;
   $imageid=$raw['imageid'];
   $thumbpath= $raw['thumbpath'];
   $largepath=$raw['largepath'];
   $caption=$raw['caption'];
?>
<A name=1 href="image.php?imageid=<?php echo $imageid ?>&imageindex=<?php echo ((($page-1)*15)+$index-1) ;  ?> "><IMG  border=0 src="<?php echo $thumbpath; ?>" height="75" width="75" alt="<?php echo $caption ?>" title="<?php echo $caption ?>" ></A><BR>
<?php
echo "<a href='delete.php?delete=yes&imageid=".$imageid.'&page='.$page."'>Delete </a>"
echo "<a href='replace.php?update=yes&imageid=".$imageid.'&page='.$page."'>Replace </a>"
?>
</table>
</td>
<?php } ?>
</TR>
<?php
} 
if ($page!=1)
{
?>
<td width=17><a href=" <?php echo $_SERVER['PHP_SELF'].'?page='.($page-1); ?> "><IMG SRC="images/previous.gif" BORDER=0></a></td>
<?php  } ?>
<td align=middle class="pagenums"><?php echo "page ".$page." of ".$pagecount ?></td>
<?php
if ($page!=$pagecount)
{
?>
<td align=right width=17><a href=" <?php echo $_SERVER['PHP_SELF'].'?page='.($page+1); ?> "><img border=0 src="images/next.gif"></a></td>
<?php } ?>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:38:01.723

有很多选择

1.  使用 javascript 分页
2.  ajax 分页
3.  尽量减少分页代码（优化代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:14:21.990

您不需要为每个页面更改连接/关闭数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:02:25.303

使用 ajax 脚本连接和获取数据库值并重新加载当前页面你可以做到 -- -- -- --- -- -- 尝试 ajax

# ios - 如何在不丢失 NSUserDefaults 的情况下重新安装应用程序？

> ID：15446443
> 
> 赞同：-1
> 
> 时间：2013-03-16T06:50:27.390
> 
> 标签：ios, nsuserdefaults

我有一个使用 NSUserDefaults 保存游戏进度的 iOS 游戏。在用户上次更新后出现问题，该应用程序不再在此设备上运行。该应用程序没有任何问题，但是由于某种原因，在下载该应用程序时发生了错误，不太清楚发生了什么。

关键是，必须删除并重新安装该应用程序。这可以在不删除 NSUserDefaults 的情况下完成吗？

删除应用程序后，我尝试在此处与 iTunes 同步，甚至通过 iTunes 再次安装它，但我无法在我的测试设备上恢复之前保存的游戏。

我想重新安装应用程序的唯一方法是通过应用程序更新。当它出来时，他会更新并且不会丢失任何数据。这个对吗？或者有没有其他方法可以做到这一点？

我正在努力在下一次更新时实现云同步，所以这个问题应该不会再成为问题了:)。但是现在，我对这个用户有什么事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T19:50:40.913

从 iTunes Backupd 恢复设备可能会重新安装应用程序并保留`NSUserDefaults`，假设它们包含在备份中。

但是，这需要由用户完成......一些同步选项是长期的更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:55:04.370

云同步将是解决方案。如果您仅在应用程序被删除后才使用 iPhone，那么与它相关的所有内容都会消失，并且没有简单的方法可以找回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:58:59.710

或者只是存储需要在钥匙串中持久化的数据。

# embedded - XBEE 双工通信

> ID：15446453
> 
> 赞同：2
> 
> 时间：2013-03-16T06:51:51.010
> 
> 标签：embedded, xbee

我想以这样一种方式配置我的 Xbees，它们都可以接收和传输数据？

我有两个 Xbee S1 模块。一个当前配置为接收器，另一个配置为发射器。在某些时候，我希望接收器模块也可以传输数据。

任何人都可以提供一个教程的链接，说明如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T22:14:26.063

是的，有可能做到这一点。如果您使用“AT 模式”软件配置它们，您只需将 XBee A 上的 DH 和 DL 参数设置为 XBee B 的 SH 和 SL 值，反之亦然 (B.DH = A.SH, B. DL = A.SL)。

现在任何进入 A 串口的字符都会从 B 的串口输出，任何从 B 输入的字符都会从 A 输出。

# jquery - JQuery——我想点击一个词来改变它然后再次点击它来改变它

> ID：15446454
> 
> 赞同：3
> 
> 时间：2013-03-16T06:51:55.737
> 
> 标签：jquery, toggle, switch-statement

我希望用户能够点击“你好！” 让它变成“再见！” 然后再次单击它以将其更改回“你好！”。我已经做到了“你好！” 更改为“再见！”，但我不知道如何使功能“重复”。

我是这方面的新手，所以欢迎所有帮助和建议！

这是据我所知：

HTML：

```
<body>
   <p id = "greeting">Hello!</p>
</body> 
```

查询：

```
$(function(){
    $("#greeting").click(function(){
        $(this).text('Goodbye!').toggle(hide);
    });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T06:53:37.810

```
$("#greeting").click(function(){
     $(this).text(function(_, oldText) {
         return oldText === 'Goodbye!' ? 'Hello!' : 'Goodbye!';
     });
}); 
```

[http://jsfiddle.net/DPeWk/](http://jsfiddle.net/DPeWk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:02:09.753

这是另一种使用方法`toggle`：

的HTML

```
<body>
    <p>Hello!</p>
    <p style="display: none">Goodbye!</p>
</body> 
```

jQuery

```
$(document).ready(function(){ 
    $("p").click(function () {
        $("p").toggle();
    });
}); 
```

你可以在这里测试它：http: [//jsfiddle.net/zcQkD/2/](http://jsfiddle.net/zcQkD/2/)

在用于切换的 jQuery 文档中有一个与此非常相似的示例：http: [//api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:57:28.433

你也可以试试这个：

```
$("#greeting").click(function(){
if ($(this).text() == "Hello!")
   $(this).text("Goodbye!")
else
   $(this).text("Hello!");
}); 
```

# ios - 哪种技术更好地存储IOS应用程序数据并在离线模式下运行应用程序？文档目录或缓存目录或临时目录？

> ID：15446457
> 
> 赞同：1
> 
> 时间：2013-03-16T06:52:23.913
> 
> 标签：ios, objective-c

嗨，最近我的应用被 APPLE 拒绝了，他们说

> 我们发现您的应用未遵循 App Store 审核指南所要求的 iOS 数据存储指南。特别是，我们发现在启动和/或内容下载时，您的应用程序存储 3.11 MB。要检查您的应用程序存储了多少数据：
> - 安装并启动您的应用程序
> - 转到设置 > iCloud > 存储和备份 > 管理存储空间
> - 如有必要，点击“显示所有应用程序”
> - 检查您的应用程序的存储空间
> iOS 数据存储指南指出只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，才应该由 iCloud 备份。
> 您的应用程序使用的临时文件应该只存储在 /tmp 目录中；
> 可以重新创建但必须保留以使您的应用程序正常运行的数据 - 或者因为客户希望它可以离线使用 - 应该使用“不备份”属性进行标记。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。
> 有关更多信息，请参阅技术问答 1719：如何防止文件备份到 iCloud 和 iTunes？。
> 有必要修改您的应用程序以满足 iOS 数据存储指南的要求。对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> - 准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。
> 有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。
> 如果您在重现此问题时遇到困难，请尝试按照[https://developer.apple.com/library/ios/qa/qa1764/TestingWorkflow](https://developer.apple.com/library/ios/qa/qa1764/) with Xcode's Archive feature 中所述测试工作流程”。

我现在该怎么办？需要帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:03:02.960

我也面临同样的问题。要解决此问题，您应该执行一些代码，以便您的 DocumentDirectory 不应该与 iCould 同步。为此，您必须为 DocumentDirectory 设置一个平面，称为**Don't BackUp**。

为了实现这一点，使用[Apple 提供的代码。](http://developer.apple.com/library/ios/#qa/qa1719/_index.html).

要了解更多信息，您可以参考[此](https://stackoverflow.com/questions/10891271/dont-backup-to-icloud-but-still-rejected)。

希望这会帮助你。

祝一切顺利 ！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:54:23.597

基本上，Apple 告诉您只有用户明确创建并想要保存的文档才应该存储在 iCloud 中。

否则，您可以将您的应用程序创建的文件保存到“文档”目录（如果您希望它在两次启动之间保持不变）或临时文件夹（如果您不关心设备开机和关机之间的文件会发生什么情况）。

***并结合 Yashesh 的回答（对他 +1！），通过转到目标（应用程序）设置并将“iCloud”复选框关闭***，确保 iCloud 已关闭，如下所示：

![关闭 iCloud](../Images/c67f934f01805d24b3d132ce346df1f7.png)

# php - Drupal 复选框创建

> ID：15446463
> 
> 赞同：0
> 
> 时间：2013-03-16T06:53:07.643
> 
> 标签：php, drupal

我在drupal7中有表格。

我需要的是：我有类别和子类别。我必须在复选框中列出这些，例如

![在此处输入图像描述](../Images/6ac92ca6cfa8b469122954878e8363c7.png)

我将代码用作

```
 $form['rate_the_room']['talent'] = array(
   '#prefix'=>'<h1>category:</h1>',
    '#type' => 'checkboxes',
    '#options' => $sub_tal,

 ); 
```

这里 $sub_tal 是一个数组。如果它是一维数组，它工作正常。这里如何传递一个数组（类别，子类别来自db）。如何使用此代码维护此结构。

请帮帮我谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:26:38.430

为什么这些都需要在一个表单元素中，有什么特别的原因吗？如果您的数据设置正确，您可以简单地遍历它们并以某种有组织的方式创建元素。

```
function my_test_form($form_state) {
  // Assuming you have your data in a format like this
  $categories = array(
    'cat1' => array(
      '#title' => 'category 1',
      'sub1' => 'Subcat1',
      'sub2' => 'Subcat2',
    ),
    'cat2' => array(
      '#title' => 'category 2',
      'sub21' => 'Subcat21',
      'sub22' => 'Subcat22',
    ),
    'cat3' => 'category 3',
  );

  $elements = array();

  foreach ($categories as $cat => $data) {
    // If multidimensional, create parent and loop through children
    if (is_array($data)) {
      $elements[] = array(
        '#type' => 'checkbox',
        '#title' => $data['#title'],
        '#return_value' => $cat,
      );

      foreach (element_children($data) as $subcat) {
        $elements[] = array(
          '#type' => 'checkbox',
          '#title' => $data[$subcat],
          '#attributes' => array(
            'style' => 'margin-left: 2em',
          ),
          '#return_value' => $cat . '-' . $subcat,
        );
      }

    }
    // Else, just create top level
    else {
      $elements[] = array(
        '#type' => 'checkbox',
        '#title' => $data,
        '#return_value' => $cat,
      );
    }
  }

  // Group all of these elements together. They'll be submitted into the same array.
  $form['categories'] = $elements;
  $form['categories']['#tree'] = TRUE;
  $form['categories']['#prefix'] = '<div style="font-weight:bold" class="label">' . t('Checkboxes title') . ':</div>';

  $form['submit'] = array(
    '#value' => t('Submit me'),
    '#type' => 'submit',
  );
  return $form;
}

function my_test_form_submit($form, &$form_state) {
  $submitted_values = array_filter($form_state['values']['categories']);
} 
```

**呈现为：**

![类别 image2](../Images/1eaa8cc080b7bdf5a3fd4a5565ef424d.png)

提交表单时，假设选中了一些复选框，`$submitted_values`如下所示：

```
array('cat2', 'cat2-sub21', 'cat2-sub22') 
```

`#return_value`您可以通过更改我在上面每个复选框上设置的属性来更改提交给提交处理程序的复选框的值。

提交的值被组合在一起，不仅因为它们都在该`$form['categories']`部分内，而且还因为`#tree`设置为`TRUE`.

# qt - 容器/布局如何重新定位他们的孩子？

> ID：15446464
> 
> 赞同：0
> 
> 时间：2013-03-16T06:53:18.813
> 
> 标签：qt, user-interface, gtk, wxwidgets

我正在开发一个简单的小部件系统，我现在正在实现一些容器。

这是我发现自己的情况：

*   我有一个`Widget`基类，一个`Container`类，它是一个可以包含其他小部件的小部件，以及几个小部件子类，如`Button`.
*   我有两种类型的容器：`Container`它自己，它绝对定位孩子，和`Box`，它将把小部件堆叠在一起，水平或垂直。
*   每个小部件在 x=0, y=0 处绘制自己。因此，容器需要在小部件被告知绘制自己之前向绘制上下文添加偏移量。
*   每个小部件都根据其 x/y 位置进行自己的命中测试。

到目前为止，它工作正常。但是现在我正在实现它分崩离析`Box`：我所做的是我覆盖`draw`继承自的函数`Container`以将它们全部绘制成彼此相邻，而不是基于它们的 x/y 位置。非常简单。

但是事件处理现在完全关闭了，因为小部件的 x/y 位置变得毫无意义。

我想我有两个选择：

1.  让小部件在位置 x=0、y=0 进行命中测试，例如绘图。然后重新计算鼠标位置以匹配`Container`.
2.  将每个布局设置为其子级设置 x/y，并让子级再次在其 x/y 位置绘制自己。绘图上下文不再有偏移

第一个有点丑，我觉得。第二个实现起来相当复杂，因为我需要对小部件中的位置变化做出反应。

Qt、Gtk 和 wxWidgets 等其他小部件系统通常如何解决这个问题？我已经查看了其中一些的来源，但无法完全弄清楚，它太复杂了。我没有任何调整大小或包装问题需要考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:12:21.467

您正在尝试实现自己的布局系统。你应该预料到这会很困难。我建议不要使用第一种方法。小部件的 x,y 坐标不仅由小部件本身使用，而且由容器外部想要对小部件做某事的任何人使用。

第二种解决方案是我选择实现由几个较小的小部件组成的自定义小部件，如果您不想要太多功能，将其组合起来并不难。只需在将小部件添加到您的容器时获取它们，将它们的位置设置为当前空闲位置，然后继续下一个。

# jquery - 需要一个带有自动完成功能的 jQuery 标签输入脚本和添加不存在值的选项

> ID：15446465
> 
> 赞同：0
> 
> 时间：2013-03-16T06:53:23.117
> 
> 标签：jquery, autocomplete, tags

我需要一个 jQuery 标签输入脚本，它支持自动完成，但也有一个允许不存在值的选项。它还应该支持对一定数量的标签进行标签限制。

我只使用 jQuery，而不是 jQuery UI。

我已经尝试过 jquery-tagit 和 jquery-tokeninput。

有谁知道解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:58:38.587

您可以在 jQuery 中使用[组合框](http://www.learningjquery.com/2010/06/a-jquery-ui-combobox-under-the-hood)。这是一个非常好的组合框。您可以使用列表中不存在的自己的值。

# vb.net - 未处理无效操作异常 更新需要有效的 UpdateCommand

> ID：15446466
> 
> 赞同：-1
> 
> 时间：2013-03-16T06:53:32.027
> 
> 标签：vb.net, ms-access, invalidoperationexception

从这些代码中，我想将数据从 VB 编辑、添加并永久保存到 MS Access。我创建了几十个 Visual Basic 项目，但毫无进展。

```
Public Class Form1

    Private Sub ProductDescBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ProductDescBindingNavigatorSaveItem.Click

        Me.Validate()
        Me.ProductDescBindingSource.EndEdit()
        Me.TableAdapterManager.UpdateAll(Me.INVSYSDataSet)
    End Sub

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        'TODO: This line of code loads data into the 'INVSYSDataSet.ProductDesc' table. You can move, or remove it, as needed.
        Me.ProductDescTableAdapter.Fill(Me.INVSYSDataSet.ProductDesc)
    End Sub
End Class 
```

问题是出现“invalid operation exception was unhandled”，更新需要有效`UpdateCommand`的代码`Me.TableAdapterManager.UpdateAll(Me.INVSYSDataSet)`

如果您需要数据源，我可以提供来自另一个 VB 项目的代码。

*更新了第二个代码，请为 sql 提供帮助 *更新了 srry 回合

公共类添加_产品

```
Private myConString As String
Private con As OleDb.OleDbConnection = New OleDb.OleDbConnection
Private Dadapter As OleDb.OleDbDataAdapter
Private DSet As DataSet
Private DSet2 As DataSet
Private ConCMD As OleDb.OleDbCommand
Dim strSql As String
Dim inc As Integer
Dim MaxRows As Integer

Private Sub Add_Products_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    myConString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\larca\Documents\Visual Studio 2010\Projects\march16\march16\obj\x86\Debug\INVSYS.mdb"
    con.ConnectionString = myConString
    con.Open()
    Dadapter = New OleDb.OleDbDataAdapter("select * from ProductDesc", con)
    DSet = New DataSet
    Dadapter.Fill(DSet, "ProductDesc")
    DataGridView1.DataSource = DSet.Tables("ProductDesc")

    con.Close()
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Try
        Using con = New OleDb.OleDbConnection(myConString)
            con.Open()
            Dim cmd As OleDb.OleDbCommand
            cmd = New OleDb.OleDbCommand("UPDATE ProductDesc", con)
            Dadapter.UpdateCommand = cmd
            Dadapter.Update(DSet, "ProductDesc")
        End Using
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:15:57.887

错误消息告诉您尚未为 DataAdapter 定义更新命令。从[DbDataAdapter.Update 方法数据集，字符串](http://msdn.microsoft.com/en-us/library/a19c81fk.aspx)：`If INSERT, UPDATE, or DELETE statements have not been specified, the Update method generates an exception.`

要解决此问题，请使用您的更新逻辑分配`UpdateCommand`一个对象，如下所示：`OleDbCommand`

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

   Using con = New OleDb.OleDbConnection(myConString)
       con.Open()
       Dim cmd As OleDbCommand
       cmd = New OleDbCommand("<your update SQL goes here>", con)
       DAdapter.UpdateCommand = cmd 
       Dadapter.Update(DSet, "ProductDesc")
   End Using 
```

结束子

只需将您的 SQL 放入其中`OleDbCommand`并将其分配给该`UpdateCommand`属性。

查看此链接以获取详细示例（并确保使用示例中的参数化查询以避免 SQL 注入攻击）：[OleDbDataAdapter.UpdateCommand 属性](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.updatecommand.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

# java - 我可以检查异步请求是否完成？

> ID：15446476
> 
> 赞同：1
> 
> 时间：2013-03-16T06:54:24.807
> 
> 标签：java, servlets, asynchronous, httprequest, httpresponse

有没有办法检查异步 ServletRequest 是否从[AsyncContext](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html)完成？我看到spring有某种[支持这一点的包装器，](http://static.springsource.org/autorepo/docs/spring/3.2.0.M1/api/org/springframework/web/context/request/async/AsyncWebRequest.html#isAsyncCompleted%28%29)但是谷歌搜索我在标准库中找不到任何东西。这就是我所希望的。

我正在使用Tomcat 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:30:42.363

听起来像是两者之一 - 您要么需要一个将在**异步请求完成时调用的****侦听**器，要么您不需要使用**异步调用**。

 ****你的问题有点太笼统了。

一般说 -当调用者对调用的即时结果不感兴趣时​​，使用**异步调用。**如果调用者有兴趣立即知道调用的结果，那么应该使用**同步调用。**如果调用者不想立即知道结果（例如它具有次要优先级，例如登录某些业务应用程序），但应该在**异步调用**执行结束时执行一些操作，则应该使用某种**监听**器。

**异步调用**需要的是一些**监听**器（类 javax.servlet.AsyncListener）。

在**侦听**器中，您将确定**异步调用**结束（onComplete 方法）并可能执行一些操作来完成/补充**异步调用**。

* * *

同样，如果您看到请求的调用者需要在完成后立即知道结果，那么您的架构中可能存在错误。您应该使用**同步调用** - 只需等到调用完成，您就会得到它的结果。在这种情况下使用**异步调用**是错误的。

* * *

我看到人们如何使用某种循环来不时检查**异步调用**的结果，但在 99.99% 的情况下，这种方法似乎是某些架构错误的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:33:38.670

您可以注册可以实现 onComplete() 方法的 AsyncListener。

AsyncListener 需要添加到 AsyncContext。****

# c# - 带有是和否选项的确认框，在下拉列表的选定索引更改上

> ID：15446481
> 
> 赞同：0
> 
> 时间：2013-03-16T06:54:47.517
> 
> 标签：c#, javascript, jquery, asp.net

我正在使用以下代码显示确认框。

```
protected void cmbPayerBucketMain_SelectedIndexChanged(object sender, EventArgs e)
{ 
    ClientScriptManager CSM = Page.ClientScript;
    if (!String.IsNullOrEmpty(hiddenF1.Value) || !String.IsNullOrEmpty(hiddenF2.Value))
    {
          CSM.RegisterClientScriptBlock(this.GetType(), "Confirm", "show();", true);
    }

   //Some Code       
} 
```

和函数 show() 如下

```
function show()
        (
            if(confirm('Chnages you made will be lost. Do you want to continue?'))
            { return true; }
             else
             { return false;
              }

              return 

        ) 
```

但无论我从确认框中选择了什么选项，它都在执行整个代码。在执行整个事件代码后，它会弹出消息框。如何限制组合框等待确认框的响应并仅在用户选择“确定”时才执行事件代码（或“是”也建议我更改确认框中按钮文本的方法。我想将其设置为“是”，将“取消”设置为“否”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:00:44.337

您不能更改确认对话框中按钮的文本。它们内置在浏览器中。

如果您想对对话框进行更多控制，请使用 jQuery UI 中的[Dialog](http://jqueryui.com/dialog/)，但它不允许您阻止 UI 线程进行输入，即您不能做一些简单的事情`confirm(...)`并在下一行获得结果。我建议您阅读一些有关如何处理用户与对话框交互结果的文档。特别是，请参阅文档中的[此示例](http://jqueryui.com/dialog/#modal-confirmation)。我将尝试在这里调整一些简单的示例：

```
<script>
$(function() {
  $( "#dialog-confirm" ).dialog({
    resizable: false,
    height:140,
    modal: true,
    buttons: {
      "Yes": function() {
        // whatever you want to run when user clicks 'yes'.
        ...
        $( this ).dialog( "close" );
      },
      "No": function() {
        $( this ).dialog( "close" );
      }
    }
  });
});
</script>
<div id="dialog-confirm">
   ...
</div> 
```

只是一个小问题......如果您选择坚持使用内置的确认对话框，您可以将代码简化为

```
function show() {
    return confirm('Chnages you made will be lost. Do you want to continue?');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T07:16:50.760

它正在执行这个函数中的所有代码，因为它不是一个函数。您正在使用括号`()`而不是花括号`{}`。pswg 建议的返回值方法也更好。

```
function show() { 
    return confirm('Changes you made will be lost. Do you want to continue?');
} // use curly braces, not parens here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:20:03.780

请尝试以下代码进行确认框定制。

```
<script src="../Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.confirm.js" type="text/javascript"></script>
    <script type="text/javascript">

            function ShowConfirm(Title, Message, OkBtnCaption, CancelBtnCaption, ButtonID) {
                var elem = $(this).closest('.item');               

                $.confirm({
                    'title': Title,
                    'message': Message,
                    'buttons': {
                        OkBtnCaption: {
                            'class': 'blue',
                            'action': function () { $('#' + ButtonID).click(); },
                            'id': 'okBtn'
                        },
                        CancelBtnCaption: {
                            'class': 'gray',
                            'action': function () { },
                            'id': 'cancelBtn'
                        }
                   }
                });
                return false;
            }   
      </script> 
```

希望能帮助到你。

谢谢，湿婆

# ruby-on-rails - 尝试加载 Heroku

> ID：15446487
> 
> 赞同：2
> 
> 时间：2013-03-16T06:55:47.107
> 
> 标签：ruby-on-rails, ruby, heroku

我用了

```
$ wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh 
```

得到heroku toolbelt，但是当我尝试

```
$ heroku login 
```

我得到了错误

> < internal:gem_prelude>:1:in 'require': 无法加载此类文件 -- ruby​​gems.rb (LoadError) from :1:in `<compiled>'

我对编码完全陌生，所以我真的不知道我在做什么。虽然努力学习！仅供参考，我使用的是 Ubuntu 12.10（我尝试在 Windows 上学习，但遇到了太多问题）。我有 ruby​​ 1.9.3p392 和 Rails 3.2.12。非常感谢，如果我可以添加任何内容以使其更容易提供帮助，请告诉我。对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:49:04.780

您可能安装了多个 Ruby 版本，而您正在使用的版本无法找到 Rubygems 库。我将遵循这些页面上显示的类似步骤：

*   [没有要加载的文件——rubygems (LoadError)](https://stackoverflow.com/questions/2896485/no-such-file-to-load-rubygems-loaderror)
*   [http://docs.rubygems.org/read/chapter/19#page98](http://docs.rubygems.org/read/chapter/19#page98)

您目前看到的是哪个 Ruby 版本？粘贴 的输出`which -a ruby`。

# wcf - WCF 发布文件限制

> ID：15446495
> 
> 赞同：1
> 
> 时间：2013-03-16T06:56:37.410
> 
> 标签：wcf, readerquotas

我在 SharePoint 中托管了 WCF 服务，该服务前段时间运行良好，但现在无法运行，我不明白为什么会这样。如果文件小于 16Kb 没有错误，我尝试将文件发布到服务并得到错误 400(badrequest)。我改变了我的配置文件

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IDocumentSetService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost/_vti_bin/documentset.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IDocumentSetService" contract="Sitronics.AFK.BoD.SharePoint.Services.Services.IDocumentSetService" name="BasicHttpBinding_IDocumentSetService" />
    </client>
  </system.serviceModel> 
```

我需要在服务器端修改 maxArrayLength，我该怎么做？服务主机配置如下

```
public class DocumentSetServiceFactory : MultipleBaseAddressBasicHttpBindingServiceHostFactory
    {
        protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
        {
            var sh = base.CreateServiceHost(serviceType, baseAddresses);

            sh.Opening += sh_Opening;

            return sh;
        }

        public override ServiceHostBase CreateServiceHost(string constructorString, Uri[] baseAddresses)
        {
            var sh = base.CreateServiceHost(constructorString, baseAddresses);

            sh.Opening += sh_Opening;

            return sh;
        }

        void sh_Opening(object sender, EventArgs e)
        {
            var sh = (ServiceHostBase)sender;

            LoggingService.LogDebug("DocumentServiceHost:Opening");

            if (sh.Description != null)
            {

                LoggingService.LogDebug("DocumentServiceHost:Description is not null");

                foreach (var endPoint in sh.Description.Endpoints)
                {

                    LoggingService.LogDebug(string.Format("DocumentServiceHost:FOR ENDPOINT {0}", endPoint.Address));

                    var bec = endPoint.Binding.CreateBindingElements();
                    var transport = bec.Find<TransportBindingElement>();

                    if (transport != null)
                    {
                        LoggingService.LogDebug(string.Format("DocumentServiceHost:TRANSPORT {0}",transport.Scheme));

                        transport.MaxReceivedMessageSize = 5242880;
                        transport.MaxBufferPoolSize = 5242880;
                    }
                }
            }
        }        
    } 
```

# c# - c# win App 中 Visual Basic Power Pack 工具中线条形状的标签

> ID：15446501
> 
> 赞同：1
> 
> 时间：2013-03-16T06:57:31.817
> 
> 标签：c#, winforms, label, winapp, vb-power-pack

Line shape是VisualBasic power pack 1.0（在vs2010中）的工具之一，

当我将标签属性添加到容器控件时，如何定义标签属性并为其设置值：

我的代码在下面*并且（在设计时）需要*

```
public class MyLine:Microsoft.VisualBasic.PowerPacks.LineShape
{
    public Label label ;
    public MyLine()
    {
    }       
    public MyLine(ShapeContainer container)
        : base(container)
    {
        label = new Label() { Text = "Ali_Sarshogh" };
    }
} 
```

///--------- 以主表单调用：

```
private Microsoft.VisualBasic.PowerPacks.ShapeContainer shapeContainer1;

 //--- in Button1_Click() i want to draw it :
  MyLine lineShape1 = new MyLine(shapeContainer1);
        lineShape1.Name = "lineShape1";
        lineShape1.X1 = 25;
        lineShape1.X2 = 160;
        lineShape1.Y1 = 18;
        lineShape1.Y2 = 17;
 this.shapeContainer1.Shapes.Add(lineShape1); 
```

结果：在表单上绘制了线条，但标签不可见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:08:09.357

给标签一个大小和位置，并将它也添加到控件中。就像是：

```
public MyLine(ShapeContainer container) : base(container)
{
    label = new Label() { Text = "Ali_Sarshogh" };
    label.Location = new Point(0, 0);
    label.Size = new Size(100, 14);
    this.Controls.Add(label);
} 
```

`Designer.cs`查看您创建的表单的任何文件，您将了解 IDE 是如何执行此操作的。

# c++ - 当父进程死亡时，守护进程/父进程如何管理它们的子进程？

> ID：15446503
> 
> 赞同：2
> 
> 时间：2013-03-16T06:57:53.220
> 
> 标签：c++, multiprocessing, daemon

我正在创建一个长时间运行的应用程序，它将利用子进程同时执行一些工作。大多数时候，可以发出一个信号来优雅地关闭服务器。但是，它可能在某个时候被意外杀死。

我的问题是当父/守护进程死亡时守护进程如何管理子进程。

我想诀窍在于如何为守护进程设置 UID/GID，以便您可以通过该 GID 或 UID 杀死进程。

那正确吗？

# css - 是否有代码导致电子阅读器假定相邻文件之间存在分页符

> ID：15446505
> 
> 赞同：2
> 
> 时间：2013-03-16T06:57:57.697
> 
> 标签：css, epub

我在 Sigil 中编辑了许多书籍，其中作者选择不设置章节或其他主要部分——因此，这本书由一个连续的页面组成，由于 epub 大小的限制，它被分成许多单独的页面文件。但它们需要作为连续页面显示在电子阅读器上。是否有代码会导致电子阅读器在从一个文件移动到下一个文件时不发出分页符？我试过 page-break-before:always 和 page-break-after:always - 但没有成功。有谁知道为了显示目的加入两个单独的文件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:30:20.577

为每个 XHTML 文档从一个新页面开始是阅读系统做出的选择。绝大多数 ePub 阅读系统（Apple iBooks、Adobe Reader Mobile）都遵循这一规则。您对此无能为力，只要大多数电子阅读器基于 Adob​​e Reader Mobile，它是唯一适用于 XHTML 文档大小限制的阅读系统。

# c# - 使用 XML 的 WCF 请求验证

> ID：15446507
> 
> 赞同：9
> 
> 时间：2013-03-16T06:58:09.150
> 
> 标签：c#, .net, wcf, wsdl

我有一个`WCF`使用 .Net 4.0 框架的 SOAP Web 服务。我正在使用`contract first`方法——即，服务代码是使用 WCSF Blue 工具从手写的 WSDL 生成的。

我对请求消息有以下要求。

> 如果价格小于 100，则不能有税元素，但如果价格大于 100，则需要税元素。

在 XPath 中，表达式如下

```
//t:price[. < 100][not(following::t:tax)] or 
//t:price[. >=100][following::t:tax] 
```

我可以在服务的 C# 代码中处理它。但我想使用任何 XML 技术在 WSDL 本身中定义它的规则。这将帮助客户端知道输入消息应该满足什么业务验证。（即业务规则的定义及其实现在 WSDL 本身中；而不是其他文档将共享给客户端。）

在 WCF 中实现它的最佳方法是什么？在`WSDL`我可以定义的哪个部分下`XML validations`，它将被处理`WCF`？

在下面给出的前两个参考文献中，提到了一种关于`XPath`C# 处理程序（用于 Web 服务框架）的方法。我们不能在 WCF 中这样做吗？C# 不能从 WSDL 读取 XPath？怎么做？有参考吗？

**注意**：我可以让 C# 处理程序执行；但`business logic`for`validation`应该在`XML`

**参考**

1.  [使用业务规则验证扩展 ASP.NET WebMethod 框架 - Aaron Skonnard 和 Dan Sullivan](http://msdn.microsoft.com/en-us/magazine/cc164100.aspx)
2.  [WS-Policy 和 WSE 2.0 断言处理程序——作者 Aaron Skonnard](http://msdn.microsoft.com/en-us/magazine/cc164005.aspx)
3.  [Hartmut 的盒子 - WCF 的四个原则和 XML 消息传递](http://www.innoq.com/blog/hw/2007/08/19/the_four_tenets_and_xml_messaging_with_wcf.html)
4.  [在 WCF 中使用 Schema 进行消息验证](https://stackoverflow.com/questions/9268084/message-validation-with-schema-in-wcf)
5.  [在 C# 中使用 Schematron/XSD 进行 XML 验证](https://stackoverflow.com/questions/787554/xml-validation-with-schematron-xsd-in-c-sharp)
6.  [在 xsd 中定义 xml，其中属性确定可能的内容](https://stackoverflow.com/questions/2593325/defining-xml-in-an-xsd-where-an-attribute-determines-the-possible-contents)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:48:32.400

从向调用您的服务的人提供规则的纯文本描述开始。给每个规则一个标签，以便可以轻松引用它。

用 C# 编写验证规则并在消息验证处理程序中调用它们。您仍然可以使用 XQuery / XPath 语法和配置文件来实现规则，但这将是一个实现细节。如果某些规则在此级别定义起来很麻烦，您可以在代码中添加这些规则。如果业务引入了规则引擎，则可以使用该引擎。但这发生在服务接口的后面。如果规则改变，WSDL 保持不变。

让验证给出失败规则的标签以及描述失败的清晰消息。让与您的服务集成的人员访问开发环境，他们可以在其中玩弄合同。

* * *

关于如何使用 XQuery 样式验证：

[Schematron](http://www.schematron.com/)允许您在 XML 中定义规则。模式由阶段、模式、规则和断言组成，但基本上你的一个断言看起来像：

```
<assert id="NO-TAX-LOW-PRICE" test="price >= 100 or not(following::t:tax)">
    If the price is less than 100, there must not be a tax element
</assert> 
```

Schematron 提供了一组 XSLT 转换，它们首先将带有业务规则的 schematron 模式转换为另一个 XSLT 转换。这个生成的 XSLT 转换然后将 XML 输入转换为一组描述其有效性的验证消息。

* * *

但重点是有很多方法可以做到这一点，您可以在脚本语言中配置断言并使用脚本来验证反序列化的参数。

```
if( order.price < 100 && order.tax ) {
    fail("NO-TAX-LOW-PRICE", 
        "If the price is less than 100, there must not be a tax element");
} 
```

如果您发现另一个更适合您，您可以更改实现。它不会改变 wsdl 也不会改变服务的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:44:15.387

我认为您不能在 WSDL 本身中执行此操作，但您可以插入一个处理程序，在分派用户代码之前执行验证。

有一个 Enterprise Library 块可以处理这种验证，或者您当然可以自己动手并将其添加到 WCF 堆栈中。

# vb.net - 如何使用 VB.NET 备份和恢复 Microsoft Access 数据库？

> ID：15446513
> 
> 赞同：-1
> 
> 时间：2013-03-16T06:58:49.767
> 
> 标签：vb.net, ms-access

如何使用 VB.NET 备份和恢复 Microsoft Access 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:10:52.027

备份和恢复本机 Access 数据库只需复制整个数据库文件（Access_2003 及更早版本为 .mdb，Access_2007 及更高版本为 .accdb）。您可以为此使用 VB.NET，但任何脚本语言都可以使用，即使是执行类似操作的简单 Windows 批处理文件

```
copy /Y d:\apps\databases\mydatabase.accdb z:\backups\databases\*.* 
```

# apache - 重定向到更深的子目录时，在深层子目录中的 mod_rewrite .htaccess 奇怪行为

> ID：15446521
> 
> 赞同：1
> 
> 时间：2013-03-16T06:59:57.693
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

好的。因此，我查看了类似的问题，例如[this one](https://stackoverflow.com/questions/990392/htaccess-rewrite-to-redirect-root-url-to-subdirectory)和[this one](https://stackoverflow.com/questions/5477008/redirect-to-another-folder?lq=1)，但是，虽然它们确实有所帮助，但我仍然遇到了最后一个问题。

假设我们有以下 URL：
`http://playground.dev/projects/project1` `http://playground.dev/projects/project1/work` `http://playground.dev/projects/project1/work/1.txt`

假设我们有以下目录结构：

> /var/www
> - projects/
> -- project1/
> --- public_html/
> ---- index.html
> ---- work/
> ----- 1.txt

我的目标是编写一个通用的 .htaccess 文件，该文件将存在于每个项目（project1、project2 等）的“根”中，并将上述 URL 映射到它们相应的文件和目录。

现在，我几乎想通了：

```
RewriteEngine On

RewriteRule ^public_html - [L]
RewriteRule ^(.*)$ public_html/$1 
```

这让我得到了我想要的。上述 URL 都按预期映射，并且大多数异常值/错误输入都被正确处理为 4xx；但是，有一个小故障：Apache 接受像下面这样的 URL。

`http://playground.dev/projects/project1/work/1.txt/fgdgfgfdgfdgd`

不，`fgdgfgfdgfdgd`不存在，“1.txt”也不是一个目录，但 Apache 不仅允许这种可憎的行为在没有 404 的情况下继续进行，而且以某种方式设法传递到“1.txt”文件，就好像我输入的 URL 是`http://playground.dev/projects/project1/work/1.txt`.

当我删除 .htaccess 文件并在完整路径上尝试相同的操作时，不会发生这种情况。apache 文档没有什么亮点，而谷歌正在溅射。也许我累了，错过了什么……但这里到底发生了什么？

让我更具体一点：

URL 的组成如下：`http://playground.dev/projects/{projectname}{path}`其中 {projectname} 和 {path} 不仅都是变量（尽管 projectname 只是一个目录），而且 {path} 可能存在也可能不存在，可能是也可能不是 3 个目录深，甚至可能有 300 个目录深。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:07:06.093

### 修改的：

只要文件或目录存在就进行全局重定向，您可以尝试以下操作：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !public_html  [NC]
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*)$ /public_html/$1  [L,NC] 
```

对于永久和可见的重定向，将 [L,NC] 替换为 [R=301,L,NC]

# java - NoSuchMethodError：com.google.appengine.api.memcache.ErrorHandlers.getConsistentLogAndContinue

> ID：15446524
> 
> 赞同：0
> 
> 时间：2013-03-16T07:00:25.447
> 
> 标签：java, google-app-engine, objectify

为什么当我尝试访问 Web 服务中的“资源”时会出现此错误：

```
java.lang.NoSuchMethodError: com.google.appengine.api.memcache.ErrorHandlers.getConsistentLogAndContinue(Ljava/util/logging/Level;)Lcom/google/appengine/api/memcache/LogAndContinueErrorHandler;
    at com.googlecode.objectify.cache.EntityMemcache.<init>(EntityMemcache.java:178)
    at com.googlecode.objectify.ObjectifyFactory.<init>(ObjectifyFactory.java:69)
    at com.mycompany.mywebservice.core.daoimpl.OfyFactory.<init>(OfyFactory.java:41)
    at com.mycompany.mywebservice.core.daoimpl.OfyService.<clinit>(OfyService.java:14)
    at com.mycompany.mywebservice.rest.blob.serviceimpl.BlobServiceImpl.getBlobInfo(BlobServiceImpl.java:78)
    at com.mycompany.mywebservice.rest.blob.BlobController.getBlob(BlobController.java:78)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) 
```

我正在使用 GAE 1.7.4 版和 Objectify v 4.0a4

这是引发错误的地方：

```
result = ofy().load().type(BlobInfo.class).filter("id", key).first().get(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:23:45.870

看起来您的类路径中可能有一些旧的 App Engine SDK jar。检查您的 WEB-INF/lib 文件夹并清除任何可能以某种方式到达那里的旧应用程序引擎版本。

看这里：

[http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/memcache/ErrorHandlers.java?r=284](http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/memcache/ErrorHandlers.java?r=284)

似乎是自 SDK 1.6.4.1 以来添加的方法，所以你可能有比这更旧的东西。

我不确定，但我猜你使用的 Objectify 是在那之后的。无论如何 4.0a4 不是最新的，更新它是明智的。

# php - 将数据从 html 表单插入到 oracle 10g

> ID：15446527
> 
> 赞同：0
> 
> 时间：2013-03-16T07:00:48.337
> 
> 标签：php, html, sql, oracle10g

请提供使用php向oracle插入数据的代码，当我调用ociexecution方法时我的代码不正确，这是我的代码但没有运行：D

```
 $var1 = $_POST["name"];
    $var2 = $_POST["id"];

    $st = 'INSERT INTO USERNAME(id,name) VALUES(:var1,:var2)';
    $compiled = ociparse($con,$st);
    OCIBindByName($compiled ,':var1',$var1);
    OCIBindByName($compiled ,':var2',$var2);
    OCIExecute($compiled)); 
```

# c# - 如何使用 Entity Framework 删除和重新创建数据库？

> ID：15446531
> 
> 赞同：1
> 
> 时间：2013-03-16T07:01:18.330
> 
> 标签：c#, entity-framework

我有以下代码：

```
public class DataInitializer : DropCreateDatabaseAlways<DataContext>
// public class DataInitializer : CreateDatabaseIfNotExists<DataContext>
// public class DataInitializer : MigrateDatabaseToLatestVersion<DataContext, >
{
    public DataInitializer()
    {
        // System.Diagnostics.Debug.Write("Set Initializer\n");
        Database.SetInitializer<DataContext>(null);

        try
        { 
```

这似乎并没有删除我的数据库并重新创建。有人可以给我建议，为什么它不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:38:54.307

您通过将初始化程序设置为来删除它`null`。制作以下初始化程序（假设`DataContext`是您的上下文类，继承自`DbContext`）：

```
public class DataInitializer : DropCreateDatabaseAlways<DataContext>
{
    // optionally override Seed method
} 
```

并在应用程序开始时（在第一次创建上下文之前）调用

```
Database.SetInitializer(new DataInitializer()); 
```

还考虑使用`DropCreateDatabaseIfModelChanges`初始化程序。

# c++ - sizeof('a') 与 size('aa')

> ID：15446532
> 
> 赞同：2
> 
> 时间：2013-03-16T07:01:38.270
> 
> 标签：c++, char, int, byte, sizeof

我尝试通过 google 和 SO 进行研究，但我只能找到类型的[结果](http://c-faq.com/charstring/sd5.html)，因此应该给我 4 个字节，但是当我运行它时，我得到 1 个字节（我认为这可能是因为我拥有的链接是参考对于 C 而不是 C++）。然而，这里有趣的是，当我输入时，我得到 4 个字节。并且（例如or ）之后的字符仍然给我 4 个字节。为什么随着更多字符的添加会突然增加 3 个字节并保持不变？还有为什么这里的 sizeof(int) 给了我 1 个字节？`sizeof('a')``int``sizeof('aa')``aa``aaa``aaaa`

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T07:12:01.087

> `sizeof('a')`这是类型`int`

两者都不是`'a'`或。在 C++ 中，单字符文字的类型是，而表达式的类型是。`sizeof('a')``int``char``sizeof()``size_t`

此外：

> type `int`[...] 应该给我 4 个字节

不，`int`不一定要正好是 4 个字节长。

# php - 通过php错误在窗口服务器上上传图像

> ID：15446534
> 
> 赞同：0
> 
> 时间：2013-03-16T07:01:53.850
> 
> 标签：php, file-upload

我在基于窗口的服务器上上传图像时出错，它在 localhost 和 linux 服务器上运行良好。首先，我在根目录中手动创建一个名为**photos的文件夹和****两个**名为 **imageupload.php**和**index.php的文件**

```
where code is 
```

**索引.php**

```
 <html>        
      <body>
      <form enctype="multipart/form-data"  action="imageupload.php" method="post"> 
Choose Picture:<input type="file" name="photo"/>
       <input name="submit" type="submit" value="save"/>
        </form>
        </body>
      </html> 
```

**图像上传.php**

```
 <?php
  if(isset($_REQUEST['submit'])){
      $target = "photos/"; 
  $finallink = $target.basename($_FILES['photo']['name']);

     if(move_uploaded_file($_FILES['photo']['tmp_name'], $finallink)) 
   { 
 echo "The file ". basename( $_FILES['photo']['name']). " has been uploaded, and your information has been added to the directory"; 
        } 
      else { 

 echo "Sorry, there was a problem uploading your file."; 
         } 
     }
    ?> 
```

这段代码在 localhost 和 linux 服务器上运行良好，但我购买了一个基于窗口的主机，因为**在基于窗口的 web 服务器上运行这段代码时出现错误**。

> 抱歉，上传您的文件时出现问题。

如何解决？这个问题是在基于窗口的服务器上运行的 php 代码还是其他任何东西？**提前感谢您的帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:43:01.200

试试这个代码希望它会帮助你

```
 if(isset($_REQUEST['submit'])){ move_uploaded_file($_FILES["photo"]["tmp_name"],
  "upload/" . $_FILES["photo"]["name"]);
  echo "Stored in: " . "upload/" . $_FILES["photo"]["name"]; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T11:21:23.460

```
move_uploaded_file($_FILES["companylogo"]["tmp_name"],"companylogo/" . $_FILES["companylogo"]["name"]);
      echo "Stored in: " . "companylogo/".$_FILES["companylogo"]["name"]; 
```

# c++ - 线程的Windows非取消模式

> ID：15446539
> 
> 赞同：0
> 
> 时间：2013-03-16T07:02:30.073
> 
> 标签：c++, windows, multithreading

Windows 是否支持 API 来设置取消和非取消模式，就像我们在 LINUX 中所做的那样，具有以下功能。pthread_setcancelstate pthread_setcanceltype

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:44:57.653

下载[pthread_w32](http://sourceware.org/pthreads-win32/)

并在您的项目中添加 lib 文件路径或使用

```
#pragma comment(lib, "pthreadVC2.lib") 
```

然后将 pthread*.dll 复制到您的系统路径，

在您的代码中，您可以编写

```
#include <pthread.h> 
```

# jquery - Google Chrome 中没有缓存动态加载的图像

> ID：15446544
> 
> 赞同：5
> 
> 时间：2013-03-16T07:03:41.970
> 
> 标签：jquery, image, caching

使用 jQuery 加载的图像未保存在 Google Chrome 的缓存中？它每次都从服务器下载。

情况：我正在使用 jQuery slimbox2 在“灯箱”中加载图片。在这一点上没有什么特别的。我添加了一些 jQuery 代码来检测鼠标光标何时越过灯箱图像：当这种情况发生时，我动态加载灯箱图片的一个版本，但通过更改 div 的 css 背景更大（如缩放）。

问题：当光标第一次进入灯箱时，它应该加载“大”图像，并且对于所有浏览器，图像都保存在缓存中，所以当光标第二次消失时，“大” ' 图像已经下载，所以下载不需要那一秒或 1 秒。

使用 Chrome，它会一次又一次地下载。（还有更多的问题，因为灯箱分页层的 mousein mouseout 事件使这个额外的下载 = 图像一直闪烁 [图像下载]）。

示例：我的英语很粗野，而且已经很晚了。只需检查示例即可了解:) [http://motocross.es/f/oneal/casco-oneal-7-series-mayhem-roots/996](http://motocross.es/f/oneal/casco-oneal-7-series-mayhem-roots/996)

在此先感谢，并原谅我的英语水平。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:06:41.547

我相信这是因为与您的图像一起发送的标头没有说明它的缓存。我的意思是您的图片网址：

[http://motocross.es/ajax/shop.ajax.original_pic.php?file=ref_44_1szyh6a9s5mh3ixc.jpg](http://motocross.es/ajax/shop.ajax.original_pic.php?file=ref_44_1szyh6a9s5mh3ixc.jpg)

...使用这些标题提供图像：

```
 HTTP/1.1 200 OK
  Date: Sat, 16 Mar 2013 10:00:13 GMT
  Server: Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 mod_fastcgi/2.4.6
  Content-Length: 79741
  Keep-Alive: timeout=3, max=1000
  Connection: Keep-Alive
  Content-Type: 
```

这没有说明应该如何缓存图像。例如，将其与主页上的基本较小图像进行比较：

[http://motocross.es/upload/shop/vendores/44/productos/standard/cropped_ref_44_1szyh6a9s5mh3ixc.jpg](http://motocross.es/upload/shop/vendedores/44/productos/standard/cropped_ref_44_1szyh6a9s5mh3ixc.jpg)

...标题如下所示：

```
 HTTP/1.1 200 OK
  Date: Sat, 16 Mar 2013 10:00:42 GMT
  Server: Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 mod_fastcgi/2.4.6
  Last-Modified: Fri, 08 Mar 2013 03:04:33 GMT
  ETag: "2726d07-d1c9-4d761151f1240"
  Accept-Ranges: bytes
  Content-Length: 53705
  Cache-Control: max-age=1296000, public, must-revalidate
  Keep-Alive: timeout=3, max=1000
  Connection: Keep-Alive
  Content-Type: image/jpeg 
```

看到额外的缓存说明了吗？那里有一个`Cache-Control`标头，这可能是重要的部分，以及其他缓存信息，如 ETag。还有一个`Content-Type`，可能是相关的，因为在没有其他线索的情况下，浏览器的缓存策略可能与内容类型有关。

当 URL：

[http://motocross.es/ajax/shop.ajax.original_pic.php?file=ref_44_1szyh6a9s5mh3ixc.jpg](http://motocross.es/ajax/shop.ajax.original_pic.php?file=ref_44_1szyh6a9s5mh3ixc.jpg)

……被击中？即服务器端也是你的代码吗？如果是这样，请尝试添加适当的`Cache-Control`标题和`Content-Type`. 如果您控制服务器，则很大程度上取决于您的图像如何被浏览器缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:58:12.337

尝试将它们存储到本地商店[ibm.com localstorage 示例](https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_store_images_using_localstorage57?lang=en)

```
<script>
    var hero;
    if ( localStorage.getItem('heroImg')) {
        hero = localStorage.getItem('heroImg');
    }else {
        hero = '/9j/4AAQSkZJRgABAgAAZABkAAD/7    /.../    6p+3dIR//9k=';
        localStorage.setItem('heroImg',hero);
    }

    document.getElementById("hero-graphic").src='data:image/png;base64,' + hero;
</script>

<img id="hero-graphic" alt="Blog Hero Image" src="" /> 
```

# android - 无法从活页夹创建 Android 光标窗口

> ID：15446546
> 
> 赞同：2
> 
> 时间：2013-03-16T07:03:51.633
> 
> 标签：android, cursor

我检查[了不能从 binder 创建光标窗口](https://stackoverflow.com/questions/14316082/cursor-window-could-not-be-created-from-binder)。

我在从电话簿中获取联系人时遇到内存问题，下面是我的代码，我正在 OS 4+ 中对其进行测试

```
Cursor cursor =managedQuery(ContactsContract.Contacts.CONTENT_URI,
    new String[]{Data._ID,"display_name","photo_id","starred"},
    null, null, "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME + ") ASC , "
    + ContactsContract.Contacts.HAS_PHONE_NUMBER+ " DESC" );
Cursor pCur;
Cursor emailCur;
while(cursor.moveToNext()) {
    pCur = WP7Main.this.managedQuery(
        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
        projPhone, ContactsContract.CommonDataKinds.Phone.CONTACT_ID
        + " = ?", new String[] { id }, null);
} 
```

我在 asyncTask 中执行此操作，它有近 700 多个联系人

我得到以下错误

```
E/CursorWindow(25078): Could not create CursorWindow from Parcel due to error -12.
W/dalvikvm(25078): threadid=14: thread exiting with uncaught exception (group=0x40c66930)
E/AndroidRuntime(25078): FATAL EXCEPTION: AsyncTask #3
E/AndroidRuntime(25078): java.lang.RuntimeException: An error occured while executing doInBackground()
E/AndroidRuntime(25078):    at android.os.AsyncTask$3.done(AsyncTask.java:299)* 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T03:47:39.580

自 API 11 起已弃用 managedQuery，您应该使用 CursorLoader。我猜你看到的异常是因为你试图从你的异步后台线程运行 managedQuery 方法（它在活动线程上）。我同意这么大的请求你想在它自己的线程上做，你只需要使用不同的方法。

# linq - Linq 中的 Where 子句

> ID：15446553
> 
> 赞同：0
> 
> 时间：2013-03-16T07:04:46.860
> 
> 标签：linq, entity-framework, linq-to-sql, where, where-clause

该`where`条款如何运作？

```
(digit, index) => digit.Length < index 
```

**代码**

```
public void Linq5() 
    { 
        string[] digits = { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" }; 

        var shortDigits = digits.Where((digit, index) => digit.Length < index); 

        Console.WriteLine("Short digits:"); 
        foreach (var d in shortDigits) 
        { 
            Console.WriteLine("The word {0} is shorter than its value.", d); 
        } 
    } 
```

[来源](http://code.msdn.microsoft.com/LINQ-Restriction-Operators-b15d29ca#WhereIndexed)

**编辑澄清** *根据 Iswanto San*

```
(digit, index) => digit.Length < index 
```

变量声明：

```
(digit, index) -- digit as array of digits 
```

条件（如`where`中的子句`SQL`）：

```
digit.Length < index 
```

如果我错了，正确吗？如果我走对了，那么角色是什么`=>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:07:51.427

这将返回列表中的所有元素，该元素`Length`低于该列表中的位置。

MSDN：[`Enumerable.Where<TSource> Method (IEnumerable<TSource>, Func<TSource, Int32, Boolean>)`](http://msdn.microsoft.com/en-us/library/bb549418.aspx)

> predicate 的第一个参数表示要测试的元素。第二个参数表示源中元素的从零开始的索引。

它应该返回这些元素：

```
{ "five", "six", "seven", "eight", "nine" } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T07:08:34.177

它选择长度小于它在数组中的索引的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T07:09:45.287

这：

```
(digit, index) => digit.Length < index 
```

`digit`将引用数组内容（在这种情况下`digits`），数据类型是`String`. `index`将引用数组索引，数据类型为`int`.

因此，该条件将输出长度小于其索引（位置）的数组内容。

例如：

`digits="zero", index=0`=> 假，长度=4，索引=0

`digits="one", index=1`=> 假，长度=3，索引=1

`digits="two", index=2`=> 假，长度=3，索引=2

`digits="three", index=3`=> 假，长度=5，索引=3

`digits="four", index=4`=> 假，长度=4，索引=4

`digits="five", index=5`=> 真，长度=4，索引=5

更多：[Enumerable.Where](http://msdn.microsoft.com/en-us/library/bb549418.aspx)

# c++ - 如何在给定固有矩阵和失真矩阵的情况下计算笛卡尔坐标

> ID：15446554
> 
> 赞同：-2
> 
> 时间：2013-03-16T07:05:05.733
> 
> 标签：c++, opencv, camera-calibration

我已经进行了相机校准，并获得了 matices：这里是内在的：

```
<?xml version="1.0"?>
<opencv_storage>
<Intrinsics type_id="opencv-matrix">
  <rows>3</rows>
  <cols>3</cols>
  <dt>f</dt>
  <data>
    6.59121826e+002 0\. 2.09667786e+002 0\. 6.98561340e+002
    1.49071167e+002 0\. 0\. 1.</data></Intrinsics>
</opencv_storage> 
```

这里是失真之一：

```
<?xml version="1.0"?>
<opencv_storage>
<Distortion type_id="opencv-matrix">
  <rows>4</rows>
  <cols>1</cols>
  <dt>f</dt>
  <data>
    1.11172847e-001 -1.00810878e-001 -1.00857615e-001 -8.45640600e-002</data></Distortion>
</opencv_storage> 
```

经过这样一个过程，我应该`A(u,v)`在我的笛卡尔裁判中找到图像平面中的一个点它的坐标`R(X,Y,Z)`。

注：`Z`轴与光轴平行，`X`轴也与轴平行，`u`以此类推。`Y``v`

我关注[了这个在线教程](http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/OWENS/LECT9/node2.html)，但我无法计算`X`,`Y`和`Z`.

任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:13:35.453

如果内在矩阵是`K`并且失真算子是`D`，那么对于给定的点`A(u,v)`，空间中的对应点将是`(X,Y,Z)^T = t * D^-1 * K^-1 * (u,v,1)^T`，其中`t > 0`是任意实数。假设相机中心位于原点。

# javascript - 如何查找和替换 websocket？

> ID：15446555
> 
> 赞同：5
> 
> 时间：2013-03-16T07:05:46.240
> 
> 标签：javascript, websocket, firebug, greasemonkey

我对 javascript 相当陌生，我几乎整天都在查看脚本，看看是否有办法嗅探 websocket 流量以进行调试和研究，或者用我自己的简单替换 websocket。

我试过用 Chrome 过滤并使用提琴手，一切都以某种方式隐藏了流量。Wireshark 似乎抓住了一些两者都找不到的东西，但至少对不熟悉十六进制的我来说，它是无稽之谈。

但是我真的很想知道是否可以在 javascript 中扩展 Websocket 之类的东西，这样当它使用 Greasemonkey 之类的东西创建时，我可以“扩展”它，以便它继续做它应该做的事情，但也做额外的工作。

例如，是否可以在说 Greasemonkey 中扩展以下 websocket，以便 onMessage(evt) 它继续写入屏幕，但随后我可以添加警报（消息）；?? 这比说看交通更可取。注意我不能更改源文件。

谷歌浏览器没有为像亚特兰蒂斯之龙这样的游戏识别网站 websocket，动作是 ajax 帖子，但聊天是一个 websocket，可以在 flash 参数中找到。

```
<!DOCTYPE html>

 <meta charset="utf-8" />

<title>WebSocket Test</title>

<script language="javascript" type="text/javascript">

  var wsUri = "ws://echo.websocket.org/";
  var output;

  function init()
  {
    output = document.getElementById("output");
    testWebSocket();
  }

  function testWebSocket()
  {
    websocket = new WebSocket(wsUri);
    websocket.onopen = function(evt) { onOpen(evt) };
    websocket.onclose = function(evt) { onClose(evt) };
    websocket.onmessage = function(evt) { onMessage(evt) };
    websocket.onerror = function(evt) { onError(evt) };
  }

  function onOpen(evt)
  {
    writeToScreen("CONNECTED");
    doSend("WebSocket rocks");
  }

  function onClose(evt)
  {
    writeToScreen("DISCONNECTED");

  }

  function onMessage(evt)

  {

    writeToScreen('<span style="color: blue;">RESPONSE: ' + evt.data+'</span>');

    websocket.close();

  }

  function onError(evt)

  {

    writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);

  }

  function doSend(message)

  {

    writeToScreen("SENT: " + message); 

    websocket.send(message);

  }

  function writeToScreen(message)

  {

    var pre = document.createElement("p");

    pre.style.wordWrap = "break-word";

    pre.innerHTML = message;

    output.appendChild(pre);

  }

  window.addEventListener("load", init, false);

</script>

<h2>WebSocket Test</h2>

<div id="output"></div>

</html> 
```

我在stackoverflow中发现了这个我会用websocket替换日期吗？

```
Date = function (Date) { return function () { var date = clockwork.instantiate(Date, arguments); var args = arguments.length; var arg = arguments[0]; if ((args === 3 || args == 6) && arg < 100 && arg >= 0) date.setFullYear(arg); return date; } }(Date); 
```

# ruby-on-rails-3 - 生产和开发环境中不同的 DB 类型布尔值

> ID：15446556
> 
> 赞同：0
> 
> 时间：2013-03-16T07:06:01.003
> 
> 标签：ruby-on-rails-3, postgresql-9.1

我有一个迁移，包括以下类型：

```
create_table :products do |t|
    t.boolean :overdue
end 
```

在我的开发设置中（Postgresql 9.1，rails 3.2.11）我必须测试

```
p.overdue == "t" # or
p.overdue == "f" 
```

p.逾期？或 p.overdue == true 或 p.overdue == false 不起作用。

在 heroku 上（我最近创建了测试应用程序，所以我猜 ts cedar，PG 9.1 也是如此）我可以测试 p.overdue 吗？或 p.overdue == true，而对字符串“t”或“f”的测试不起作用。

我的开发设置中是否缺少一些配置选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:52:48.953

schema.rb 有 t.binary，而迁移则表示 t.boolean。这是我已纠正的错误，但我只运行了

```
rake db:reset 
```

它只会重新加载架构，但不会运行迁移。更正架构并再次运行 db:reset ，或者更好地运行：

```
rake db:drop
rake db:create
rake db:migrate 
```

# php - php中保护会话劫持的有效方法

> ID：15446557
> 
> 赞同：2
> 
> 时间：2013-03-16T07:06:13.707
> 
> 标签：php, session

我读到了如何保护 php 中的会话，有一些，但它们不像将用户代理、ip 和端口添加到会话并加密它们那样有效。什么是防止会话劫持的好方法？我想采取以下步骤：

1.  将 PHPSESSID 键完全更改为像 id 这样的通用键
2.  每页生成令牌并将其放在页面上，然后验证它以及会话。这将减少我单独对会话进行验证的依赖。
3.  我会添加一个短会话到期。
4.  将更多变量添加到会话 id 并对其进行加密，因此破解会更长且更难。也许我会使用 RSA 加密。
5.  放置一个注销按钮，以便用户能够终止他的会话。
6.  使用javascript计算时间，超过5分钟会提醒用户继续他的会话。
7.  仅将会话保存在 cookie 中。

我听到的困难是：*当您使用每页令牌时，您需要禁用后退按钮？这是为什么？*

还有几件事也不清楚？在数据库中保存会话是否更安全？为什么？使用 SSL 有多安全？快速重新生成会话 ID 怎么样，会有帮助吗？

什么系统可以防止暴力破解加密密钥（识别试图通过大量尝试猜测会话 id 来淹没服务器的用户的 ip 会有所帮助吗？）？

会话再生是如何工作的，旧的会话密钥是否会自动销毁，如果黑客获得了旧的会话密钥，它仍然可以工作吗？拜托，了解会话安全对我来说很重要，因为我正在学习如何成为一名渗透测试员？

**更新** 我想这样做： 使用密钥对会话 id 进行对称加密 对随机生成的令牌进行对称加密，该令牌将在带有密钥的 post 字段中

随机生成的令牌也将附加到会话 ID 中，然后加密。

根据要求，我应该得到这些变量： $_SESSION['PHPSESSID'] （其中加密了随机生成的令牌） $_POST['RandomlyGeneratedToken']

使用密钥 A 解密会话 ID 并使用密钥 B 随机解密令牌。做 2 次检查： -检查令牌是否与发送的第一个请求上的令牌相同。- 检查令牌是否存在于 sessionid 中。

黑客的可能性：-暴力破解会话 ID。我的会话 id 足够长，他会花时间。我可以使用一个系统来检测来自具有不同会话 id 的同一 IP 的大量请求流，并使用睡眠功能减慢他的速度。

- 窃听流量并从用户那里获取会话 ID 以及令牌并尝试提交这些。嗯...我将不得不为每个请求重新生成会话 ID，并在某些页面上快速使会话过期..可能是 1 分钟..但是他能以多快的速度窃听？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T07:28:04.113

“将 PHPSESSID 键完全更改为像 id 这样的通用键”

这是通过混淆和弱点实现的安全性。用户只需要查看他们的 cookie 并将其放在一起用于会话 id 即可绕过此

“每页生成令牌并将其放在页面上，然后验证它以及会话。”

这是一个有趣的想法。但是如果用户打开了多个页面怎么办？你能支持多个令牌吗？令牌什么时候到期？

“我会添加一个短会话到期。”

好主意，但这可能会影响那些在页面上停留很长时间然后点击刷新却发现他们过早退出的用户

“在会话 id 中添加更多变量并对其进行加密，这样破解的时间会更长，更难。也许我会使用 RSA 加密。”

为什么使用 RSA 加密？为什么不使用 SHA 之类的单向方法对其进行哈希处理？不要忘记添加盐或初始化向量

“放置一个注销按钮，以便用户能够终止他的会话。”

谁曾按下注销按钮？;-)

“使用javascript计算时间，超过5分钟会提醒用户继续他的会话。”

是的

“仅在 cookie 中保存会话。”

不要这样做，始终保存数据服务器端。cookie 可以在客户端存储时进行操作

至于您的其他评论：您可以将会话变量存储在数据库中，这使您可以检查其他内容，例如 ip 地址等（尽管您可以使用自定义会话处理功能检查 ip 等：http: [//php.net /manual/en/session.customhandler.php](http://php.net/manual/en/session.customhandler.php)）。但是，如果您使用数据库并且过于频繁地重新生成会话 ID（例如，每次加载页面时），您会发现如果您的用户快速点击刷新按钮，则 ID 的重新生成速度将比您的服务器在数据库中更新它的速度更快会话将丢失。

“会话重新生成如何工作，旧会话密钥是否会自动销毁”

是的，除非您编写自定义代码，否则这取决于您的自定义代码

我希望我的回答有点用，但我建议遵循 OWASP 会话管理指南，以便您遵循最佳实践： [https ://www.owasp.org/index.php/Session_Management_Cheat_Sheet](https://www.owasp.org/index.php/Session_Management_Cheat_Sheet)

**编辑**

我不确定令牌是什么意思？您是指会话ID中的令牌吗？那会提供什么价值？您的令牌是会话变量吗？这没有任何意义，因为它的值存储在服务器端，关键是您试图阻止其滥用的 phpsessid。

另外-永远不要指望黑客不理解您的逻辑的能力。如果他们想了解它，他们会的。

最后，为什么你需要这么多安全性（不要对此投反对票）？有足够好的安全性（如果您遵循某些标准）。您可能不需要防范外国政府黑客，否则您可能会将这个项目外包。遵循易于谷歌搜索的教程或指南中概述的最佳实践，例如我上面提供的 OWASP。就足够了:-)

**编辑** “另外，你说最佳存储是数据库？我描述的最后一种反对暴力破解的方法怎么样”

数据库会话存储不一定是最佳的。您可以在需要时使用它，例如当您对需要共享会话数据的多个 Web 服务器进行负载平衡时。

阻止蛮力攻击的两种方法是 1) 拥有一个非常长的会话 id，以及 2) 频繁地重新生成它

# django - Django 1.5 中的模板上下文处理器在哪里？

> ID：15446558
> 
> 赞同：22
> 
> 时间：2013-03-16T07:06:24.400
> 
> 标签：django, django-staticfiles

它应该自动列在 Settings.py 中还是我必须添加它？我在提供开发中的图像文件时遇到了可笑的困难，而且文档对于我的口味来说太简洁了，并且由于某种原因没有清楚地向我说明。我想检查一下我的 template_context_processors 是什么，但它在哪里？它不在我的 settings.py 文件中。我通常需要编辑这个吗？

```
("django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.contrib.messages.context_processors.messages") 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-16T07:54:45.877

在你的`settings.py`你可以定义`TEMPLATE_CONTEXT_PROCESSORS`设置。

但是，django 已经为此设置定义了默认值，即

```
("django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.core.context_processors.tz",
"django.contrib.messages.context_processors.messages") 
```

如果要添加维护默认处理器的自定义模板上下文处理器，可以执行以下操作`settings.py`

```
import django.conf.global_settings as DEFAULT_SETTINGS

TEMPLATE_CONTEXT_PROCESSORS = DEFAULT_SETTINGS.TEMPLATE_CONTEXT_PROCESSORS + (
    'custom_context_processors.my_context_processor',
) 
```

请参阅[TEMPLATE_CONTEXT_PROCESSORS](https://docs.djangoproject.com/en/1.5/ref/settings/#template-context-processors)文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T00:14:13.143

您可以通过跳转到 django python shell 并导入您的设置来检查您的应用程序正在使用哪些上下文处理器。

```
$ manage.py shell
> from django.conf import settings
> settings.TEMPLATE_CONTEXT_PROCESSORS 
```

如果您没有覆盖它们，则应呈现默认值。

在静态文件上，检查您的 STATICFILES_DIRS ，这是 django 的开发服务器将寻求提供静态资产的地方：[https](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-STATICFILES_DIRS) ://docs.djangoproject.com/en/dev/ref/settings/#std:setting-STATICFILES_DIRS 。

我在我的`settings.py`：

```
from os.path import join, abspath
PROJECT_ROOT = abspath(join(dirname(__file__), '..', '..'))
STATICFILES_DIRS = [join(PROJECT_ROOT, 'public'), ] 
```

这对您来说是不一样的，因为它将取决于您如何布局项目。

# python - 运行脚本时 main() 函数不运行

> ID：15446560
> 
> 赞同：4
> 
> 时间：2013-03-16T07:07:05.657
> 
> 标签：python

```
#! /usr/bin/python

def main():
    print("boo") 
```

当我尝试在 Python 3.3 中运行这段代码时，它什么也没做。没有错误或任何东西。怎么了

```
[tim@tim-arch ~]$ gvim script
[tim@tim-arch ~]$ sudo chmod 775 script
[tim@tim-arch ~]$ ./script
[tim@tim-arch ~]$ 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-16T07:08:55.363

您仍然必须*调用*该函数。

```
def main():  # declaring a function just declares it - the code doesn't run
    print("boo")

main()  # here we call the function 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-16T07:12:42.297

我假设您想要做的是在从命令行执行脚本时调用 print 函数。

`__name__`在 python 中，您可以通过检查变量来确定包含一段代码的脚本是否与最初启动的脚本相同`__main__`。

```
#! /usr/bin/python

if __name__ == '__main__':
    print("boo") 
```

只需这些代码行：

```
def main():
    print("boo") 
```

您正在定义一个函数而不是实际调用它。要调用该函数`main()`，您需要像这样调用它：

```
main() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T07:09:35.360

您需要调用该函数，将脚本更新为

```
#! /usr/bin/python

def main():
    print("boo")

#call it
main() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-16T15:14:24.450

*在 python 中，如果你想编写一个脚本来顺序*执行一系列小任务，那么绝对**不需要**编写一个函数来包含它们。只需将每个单独放在一条线上即可；或使用类似的表达式分隔符`;`（不是很推荐，但你可以做的是你想要的），同样：

```
task1
task2
task3
task4 
```

或者

```
task1; task2; task3; (again **not** really recommended, and certainly not pythonic) 
```

在您的情况下，您的代码可以转换为：

```
print('boo')
print('boo2')
print('boo3') 
```

如果没有该方法，它仍然会按照您的预期运行`main()`，因为它们会按顺序进行评估。

请注意，您可能希望为这些系列任务创建函数的原因是：

*   呈现一个漂亮的界面（给代码的客户），
*   或者封装重复的逻辑
*   可能还有更多用途，但这是我能想到的第一个用途，并用来证明我的观点。

现在，如果您觉得有必要编写类似于`main()`其他编程语言中的方法的代码，那么请使用以下 python 习惯用法（到目前为止其他用户已声明）：

```
if __name__ == '__main__':
    doSomething() 
```

以上工作如下：

*   当您`import`使用 python 模块时，它会获得一个`string`（通常是导入它的名称）分配为其`__name__`属性。
*   当您直接执行脚本时（通过调用 python vm 并将脚本的名称作为参数传递给它），`__name__`属性设置为`__main__`
*   所以当你使用上面的成语时，你既可以将脚本作为一个可插拔的模块随意`import`ing使用，**也**可以直接执行它，让下面的一系列表达式`if __name__ == '__main__':`直接被求值。

如果您觉得有必要挖掘更多信息，我的来源如下：

*   [Python 文档：模块](http://docs.python.org/3.3/tutorial/modules.html)
*   [Python 文档：将模块作为脚本执行](http://docs.python.org/3.3/tutorial/modules.html#executing-modules-as-scripts)
*   [Python 文档：数据模型](http://docs.python.org/3.3/reference/datamodel.html#the-standard-type-hierarchy)（搜索`__name__`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-03T06:39:14.550

如果您发现其他答案令人困惑或令人生畏，这里有一个寓言，希望对您有所帮助。看下面的 Python 程序：

```
a = 34 
```

当它运行时，它会做*一些事情：*在退出脚本之前，Python 知道有一个变量`a`，它的值是整数 34。它不会对这些信息*做*任何事情，但它是一个完整的程序，它会做*一些事情。*不过，为了让它产生一些实际价值，它需要与环境交互。它对这个值有什么作用？它可以创建 34 个目录，或者 ping 数据中心的第 34 台服务器，或者检查数据库中最新的 34 个用户的密码强度，等等；或者只是打印一些东西。

```
a = 34
print(a) 
```

下面的程序在某种意义上与第一个程序非常相似。

```
def b():
    a = 34
    print(a) 
```

当你运行这个程序时，它会做*一些事情：* Python 现在知道有一个名为 的函数`b`，并且它不接受任何参数，并且它包含一些语法上有效的 Python 代码，这些代码将在其他代码调用它时运行，但它实际上并没有对这段代码*做任何事情。*为了观察函数中代码产生的任何值，您必须实际调用它：

```
b() 
```

（顺便说一句，也许还要注意，`a`函数声明中的局部变量`b`与同名的全局变量不同。）

# nopcommerce - nopcommerce 支付插件

> ID：15446563
> 
> 赞同：2
> 
> 时间：2013-03-16T07:07:18.937
> 
> 标签：nopcommerce

我开发了一个使用重定向逻辑的支付插件。我使用了 Paypal 标准和 MyGateVirtual 作为指南 我的问题是，在用户确认订单后，他被重定向到支付中心站点，在那里他输入了他的信用卡数据，并且支付中心站点在指定的 url 中返回到我们的站点以获取成功和失败在我的支付控制器的成功操作，如果由于某种原因未接受付款，我想将用户重定向到 orderdetails 以便他可以重新提交他的付款。我使用带有以下代码片段的视图作为按钮，该按钮应该将用户重定向到 orderdetails

```
@{ var storeLocation = Nop.Core.Infrastructure.EngineContext.Current.Resolve<Nop.Core.IWebHelper>().GetStoreLocation() + Url.RouteUrl("OrderDetails", new {orderId = Model.OrderId});}

<input type="button" name="orderdetails" value="@T("Account.CustomerOrders.OrderDetails")" id="orderdetails" class="orderdetailsbutton" onclick="setLocation('@(storeLocation)'" /> 
```

但是，如果用户单击该按钮，则不会发生任何事情。onclick 事件处理程序未重定向到 orderdetails。请帮助解决这个问题

乔治

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T06:24:39.517

setLocation() 是 public.common.js 中定义的 JS 函数。我将采取以下步骤来诊断问题：

1.  检查 public.common.js 是否正确包含在您的页面中。
2.  检查“storeLocation”变量是否生成了正确的 URL。您实际上不需要前面部分，只需以“Url.RouteUrl”开头的部分即可，因为您已经在自己的站点中。
3.  在浏览器的开发者工具中设置断点，并检查 setLocation 是否被正确调用，如果不正确是什么错误。

仔细查看您的代码，发现 JS 代码格式不正确（少一个括号）。

这是你的代码：

```
setLocation('@(storeLocation)' 
```

# python - 如何在 mongodb 数据库中插入字符串列表？

> ID：15446573
> 
> 赞同：1
> 
> 时间：2013-03-16T07:08:19.590
> 
> 标签：python, flask, pymongo

```
database = mongo_connect()
un = str(session['username'])

database.game.insert({'host': session['username'],
    'player_list':[un]}) 
```

如果我这样做，那么当我检索 player_list 时，我会得到一个 unicode 列表。我怎样才能得到一个字符串列表？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:38:47.970

因为[mongodb 以 bson 格式存储数据，并且由于 bson 是 utf8 编码的，所以你只会得到 unicode strings](http://api.mongodb.org/python/2.4.2/tutorial.html#a-note-on-unicode-strings)。

无论如何，您`unicode`都可以编码；`str`

```
player_list = [x.encode('utf-8') for x in player_list] 
```

# extjs4.1 - Extjs this.up(...).down(...) 为空

> ID：15446576
> 
> 赞同：4
> 
> 时间：2013-03-16T07:08:43.120
> 
> 标签：extjs4.1

当我按下保存按钮时，它工作正常。但是当我在此字段上按 Enter 时遇到一些问题，错误消息是 this.up(...).down(...) 为空。下面给出了我的来自窗口。我只是想，当您在文本框上按 Enter 时，它会像您单击按钮一样。

任何人都可以帮忙吗？

```
Ext.define('${pkgName}.v01i002001.SV01I00200201' , {
    extend      : 'Ext.window.Window',
    alias       : 'widget.sv01i00200201',
    id          : 'sv01i00200201',   
    title       : 'MANUFACTURE :: SV01I00200201',
    minimizable : false,
    maximizable : false,
    autoShow    : true,
    resizable   : false,
    border      : false,
    modal       : true,
    padding     : '0 5 0 5',
    icon        : "${resource(dir: 'images', file: 'APP01003.png')}",
    layout    : {
        type: 'vbox',
        align: 'stretch'
    },
    initComponent : function () {
        var me = this; 
        var required = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>';       
        this.items = [
        {
            xtype     : 'form',
            bodyStyle : {
                padding   : '10px',
                border    : true
            },
            tbar: Ext.create('Ext.ux.StatusBar', {
                id              : 'win-statusbar-sv01i00200201',
                topBorder       :true,
                text            :'Status',
                defaultIconCls  : 'info',
                defaultText     : 'Status'
            }),
            items : [{
                xtype             : 'textfield',
                fieldLabel        : 'Id',
                name              : 'id',
                width             : 265,
                anchor            : '95%',
                emptyText         : 'Not need...',
                readOnly          : true
            },{
                xtype             : 'textfield',
                fieldLabel        : 'Manufac. Name',
                emptyText         : 'Write Manufacturer name',
                allowBlank        :  false,
                name              : 'name',
                width             :  265,
                anchor            : '95%',
                listeners: {
                    specialkey    : function(field, e){
                        if (e.getKey() == e.ENTER || e.getKey()==e.TAB) {                                    
                            //Ext.get('save-sv01i00200201').dom.click();                              //it work
                           // this.up().up().down('button[action=save]').fireEvent('click');          //TypeError: button.up is not a function
                           // this.up('sv01i00200201').down('button[action=save]').fireEvent('click');//TypeError: button.up is not a function
                           // this.up('window').down('button[action=save]').fireEvent('click');       //TypeError: button.up is not a function
                        }
                    }
                }
            }]
        }]
        this.buttons = [
        {
            text    : 'Save',
            icon    : "${resource(dir: 'images', file: 'SAV01004.png')}",
            id      : 'save-sv01i00200201',
            action  : 'save'
        },{
            text    : 'Close',
            icon    : "${resource(dir: 'images', file: 'CLS01001.png')}",      
            scope   : this,
            handler : function(button){
                var win = button.up('window');
                win.close();
            }
        }]
        me.callParent(arguments);
    }
}); 
```

我的控制器在下面给出

```
Ext.define('${pkgName}.C01I002001', {
    extend  : 'Ext.app.Controller', 
    requires: [],

    views:[
        'V01I001000',
        'v01i002001.SV01I00200100',
        'v01i002001.SV01I00200101',
        'v01i001001.SV01I00200104',
        'v01i001001.SV01I00200106',
        'v01i002001.SV01I00200201',
        'v01i002001.SV01I00200301'
    ],
    refs    : [{
            ref : 'v01i002001',
            selector: 'window'
        }],
    init: function() {
        manuStore   = Ext.data.StoreManager.get('S01I002001'); 
        var me      = this;
        me.category = undefined;        
        me.control({             
            'sv01i00200201 button[action=save]': {
                click           :   this.manufacturerSave
            }
        });
    },
    manufacturerSave   :   function(button){
        win     = button.up('window'),
        form    = win.down('form'),
        record  = form.getRecord(),
        values  = form.getValues();

        if(form.getForm().isValid()){

            var manufacturer    = Ext.create('${appName}.model.M01I002001',{
                name:values.name
            });        

            manufacturer.save({
                scope:this,
                success:function(records, operation){
                    var text     = operation.response.responseText,
                    json         = Ext.decode(text);
                    form.loadRecord(records);
                    controller000.statusbar('sv01i00200201', json.message, 'saveInfo', 'activecaption');
                    manuStore.load();
                    var win       = Ext.getCmp('sv01i00200201');
                    controller000.closeWindow(win);
                },

                failure:function(model, operation){
                    controller000.statusbar('sv01i00200201', operation.error, 'warnInfo', 'red');
                } 
            }); 
        }else{
            controller000.statusbar('sv01i00200201', 'Necessary Field Required', 'warnInfo', 'red');

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:01:25.710

`this.up()`仅针对您的字段的直接父级（表单面板）通过一个级别冒泡。请尝试以下选项之一：

```
this.up().up().down('button[action=save]').fireEvent('click');
this.up('window').down('button[action=save]').fireEvent('click');
this.up('#sv01i00200201').down('button[action=save]').fireEvent('click'); 
```

看看[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-up)；）

* * *

## 第 2 部分：“button.up 不是函数”

我想我明白了，您必须手动将按钮作为参数传递给`fireEvent`函数：

```
var button = this.up('window').down('button[action=save]');
button.fireEvent('click', button); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:53:19.783

最后我通过创建 id 来做到这一点

```
 Ext.get('save-sv01i00200201').dom.click(); 
```

按钮修改并创建 id

```
{
        text    : 'Save',
        icon    : "${resource(dir: 'images', file: 'SAV01004.png')}",
        id      : 'save-sv01i00200201',
        action  : 'save'
    } 
```

# c# - 重新加载 dataGridView 的项目

> ID：15446579
> 
> 赞同：0
> 
> 时间：2013-03-16T07:08:50.050
> 
> 标签：c#, datagridview

我在 C# WinForms 中有一个 dataGridView，它显示数据库中表中的自定义项，并且我有用于在该表中插入新行的文本框和按钮。当我点击按钮时，文本框的文本将被插入到表格中，我希望插入后，dataGridview 可以重新加载新项目并显示它。我使用`dataGridView1.Update();`和`dataGridView1.Refresh();`不工作。

> 我知道 dataGridView 可以插入新项目，但我想以我的方式插入项目。这是我点击事件的代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            String connString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\bank.mdf;Integrated Security=True;User Instance=True";
            SqlConnection conn = new SqlConnection(connString);
            SqlCommand cmd = new SqlCommand();
            String cmdText = "insert into marja (ayatollah) values(@n)";
            cmd.CommandText = cmdText;
            cmd.Parameters.AddWithValue("@n", textBox4.Text);

            cmd.Connection = conn;
            conn.Open();
            if (cmd.ExecuteNonQuery() > 0)
            {
                dataGridView1.DataSource = marjaBindingSource;
                textBox4.Text = "آیت الله ";
            }

            else
                MessageBox.Show("Error");
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:14:21.277

那么你将不得不使用`DataBind`方法来重新加载`datagridview`.

可以说`DataGridView1`是`ID`你的然后在你的声明`datagridview`之后使用下面的代码行。`Insert`

```
DataGridView1.DataSource = yourDataSource; 
```

`Refresh`和`Update`方法不会在这里达到您的目的。

所有人都阅读[此链接](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx)以获取更多信息。

你能把你的代码改成这样吗：

```
private void button1_Click(object sender, EventArgs e)
{
    int rowsAffected = 0;
    String connString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\bank.mdf;Integrated Security=True;User Instance=True";
    SqlConnection conn = new SqlConnection(connString);
    SqlCommand cmd = new SqlCommand();
    String cmdText = "insert into marja (ayatollah) values(@n)";
    cmd.CommandText = cmdText;
    cmd.Parameters.AddWithValue("@n", textBox4.Text);

    cmd.Connection = conn;
    conn.Open();
    rowsAffected = cmd.ExecuteNonQuery();
    conn.Close();

    if (rowsAffected > 0)
    {
         dataGridView1.DataSource = marjaBindingSource;
         textBox4.Text = "آیت الله ";
    }

    else
    {
         MessageBox.Show("Error");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:14:49.763

您应该尝试数据绑定，并可能将您的数据填充到[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)中，您不需要手动调用更新，一切都是自动完成的。

另请参阅这篇文章：[重新加载列表框内容](https://stackoverflow.com/questions/15425922/reloading-listbox-content/15426006#15426006)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:18:21.443

```
this.marjaTableAdapter.FillBy(this.bankDataSet10.marja); 
```

这是我的答案

# tastypie - 如何查询一组随机条目

> ID：15446586
> 
> 赞同：0
> 
> 时间：2013-03-16T07:09:40.927
> 
> 标签：tastypie

我有事件模块。我的用户最喜欢列表中的一些随机事件。我会将它们存储在我的数据库的 favroite 表中

```
id   module

1     events
5     events
9    events
2    business 
```

现在，我的问题是如何在单个事件请求中进行查询以获取 1、5、9？有什么方法可以要求吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T02:06:05.693

是的，您可以按 id 过滤以在一个请求中获取多个事件，查看[此问题](https://stackoverflow.com/questions/11436229/tastypie-filtering-with-multiple-values)的选定答案以了解如何执行此操作。应该开箱即用。

# actionscript-3 - AS3 flash.net.FileReferenceList.browse() 接受 FileFilter 对象数组，但似乎 Mac OS 仅使用第一个元素

> ID：15446588
> 
> 赞同：0
> 
> 时间：2013-03-16T07:09:53.380
> 
> 标签：actionscript-3, file-upload, filefilter

我有一个用 ActionScript 3 编写的文件上传组件。该组件使用**FileReferenceList.browse()**让用户选择要上传的文件。此方法接受一个 FileFilter 对象数组来缩小可选择的文件类型。

直到此时，我只传递了数组中的一个 FileFilter 元素——如果我传递了任何元素。这多年来运行良好，没有任何问题。但是最近我遇到了一种情况，**我以为我理解了为什么这个方法需要一个 FileFilters 数组**。大概是我错了……

我有一项服务，它设计（并使用）主要呈现视觉材料（图像），但它也可以处理非视觉文件，如 .xls、.doc、.zip 等。这意味着实际上我的管理员将上传几乎只有图像 (99%) 到此服务但有时他会上传 1-2 .xls、.doc 或 .zip 等。

所以从这一点开始我不想真正阻止 (图像) 之外的文件筛选。只是试图“显示”我的管理员用户首选文件是此处的图像，但最终他必须能够上传任何文件类型。

所以，我这样做了：

```
var fileReferenceList : FileReferenceList = new FileReferenceList();
var imgFilefilter : FileFilter = new FileFilter("Images", "*.jpg;*.jpeg;*.gif;*.png");
var allFilesFilter : FileFilter = new FileFilter("All files", "*");
fileReferenceList.browse([imgFileFilter, allFilesFilter]); 
```

这运行良好 - 在 Windows 上。当文件浏览器窗口出现时，我的用户只能看到图像文件。但是（s）他也可以切换到“所有文件”视图并上传其他文件。

但现在事实证明，我的 Mac 用户被这种方式搞砸了……文件浏览器窗口不提供切换到“所有文件”视图的可能性，因此他们无法上传非图像文件 :-) 啊！

我想知道我上面试图描述的问题的最佳解决方案是什么？一个简单的解决方案可能是对于 Mac 用户我完全跳过 FileFilter 的东西。但这不是我想要的方式......或者我错过了什么？**是否有可能以某种方式“说服”Mac 文件浏览器窗口提供让我的管理员在 Win 文件选择器等过滤器之间进行选择的可能性？**

# c# - 启动画面在主屏幕完成过程之前关闭

> ID：15446589
> 
> 赞同：0
> 
> 时间：2013-03-16T07:09:56.177
> 
> 标签：c#, winforms

我有一个在我的主表单加载之前加载的启动画面。会发生什么是在主屏幕加载之前关闭启动屏幕。我添加了启动画面，因为我的应用程序需要一段时间才能根据我在[此处](https://stackoverflow.com/questions/15445963/license-suggestions-required-for-c-sharp-win-application)发布的线程的许可证密钥加载。

我进行了搜索，但不确定如何在我的代码中实现。我也遇到了 Backgroundworker，但再次不确定如何进行。

主要代码：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Thread th = new Thread(new ThreadStart(ShowSplashScreen));
    th.Start();
    Thread.Sleep(5000);
    Application.Run(new frmMain());
    th.Abort();
}

static void ShowSplashScreen()
{
    Application.Run(new frmSplashScreen());
} 
```

启动画面：

在表单加载

```
timer1.Start();
timer1.Interval = 600;
progressBar1.Maximum = 10;

private void timer1_Tick(object sender, EventArgs e)
{
    if (progressBar1.Value != 10)
    {
        progressBar1.Value++;
    }
    else
    {
        timer1.Stop();
        timer1.Enabled = false;
        this.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:33:33.083

您会竭尽全力为您的启动画面启动一个单独的线程，这意味着您有正确的想法。问题是实施有点偏离。调用`Thread.Sleep`实际上使*当前*线程休眠，因此您的主 UI 线程完全死掉了大约 5 秒，当它*应该*做的是在显示启动屏幕时在后台加载主窗体时，什么也不做。返回后`Thread.Sleep`，您调用`Application.Run`以启动主窗体，但到那时为时已晚 - 只要代码告诉它，启动屏幕就已经保持不变并且它会自行关闭。

您可能可以通过将调用移动`Thread.Sleep`到启动屏幕线程来解决问题，但老实说，这是一种非常丑陋和骇人听闻的方法。除了休眠线程的固有问题之外，启动屏幕的真正意义（正如您自己承认的那样）是在您完成一些冗长的任务时为用户提供视觉上有趣和令人放心的东西。大多数用户并不特别*喜欢*启动画面（好吧，实际上，似乎大多数人都讨厌它们），但可以说它们确实有目的，尽管目的有限。当你使用类似的东西时`Thread.Sleep`，有效地迫使您的启动屏幕在屏幕上驻留，什么都不做，您只是在旋转 CPU 周期并无缘无故地浪费用户的时间。他们对此的宽容度会大大降低。我敢肯定这可能不是你的计划，但它往往是最终发生的事情。

如果您可以在后台*同时进行冗长的验证时实际显示启动屏幕，那不是很好吗？*确实，这是启动画面的“正确”实现，但要使其正常工作非常困难。UI 代码中的同步和跨线程很难编写，甚至更难调试。

相反，我建议你下注。删除您的代码以手动显示启动画面及其所有`Thread.Sleep`丑陋之处，并用内置的启动画面框架替换它。大多数人不知道它，因为狡猾的微软程序员将它隐藏`Microsoft.VisualBasic`在 C# 人找不到的命名空间下。不过，不要让它愚弄你。它与 C# 应用程序完美配合，让您的生活变得更加轻松。为什么那些 VB.NET 家伙要为自己囤积所有好东西？

这个框架会自动为你处理一切，你需要做的就是为它提供一个闪屏表单类（你似乎已经有了，命名为`frmSplashScreen`）。您可以在[我的回答](https://stackoverflow.com/a/4365393/366904)中找到完整的使用说明，包括示例代码。

# objective-c - UITableViewCell 自定义

> ID：15446590
> 
> 赞同：0
> 
> 时间：2013-03-16T07:10:00.773
> 
> 标签：objective-c, uitableview

如果我想完全自定义我的 UITableViewCell，我应该创建 UITableViewCell 的子类还是只创建 UIView 的子类并执行此操作？

`tableViewCell.backgroundView = [UICustomView alloc] init]; tableViewCell.selectedView = [UICustomView alloc] init];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:14:01.027

我更喜欢创建 UITableViewCell 的子类。
试试这个[链接](http://www.edumobile.org/iphone/ipad-development/custom-table-view-cells-in-ipad-programming/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:14:49.153

你的定制是什么？如果它与您的单元格的背景视图有关，那么您似乎走在了正确的轨道上。答案取决于你想要达到的目标。

子类化 UITableViewCell 并不少见，但只有在 UITableViewCell 的绘制带有非常详细的逻辑时才应该这样做。在通常情况下，您可以通过在 UITableView 数据源的 cellforrowatindexpath 委托方法中更改 UITableViewCell 的一些公共属性来摆脱困境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:37:23.900

是的，您需要创建 UITableViewCell 的子类。参考以下一个： [http ://agilewarrior.wordpress.com/2012/05/19/how-to-add-a-custom-uitableviewcell-to-a-xib-file-objective-c/](http://agilewarrior.wordpress.com/2012/05/19/how-to-add-a-custom-uitableviewcell-to-a-xib-file-objective-c/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-02T07:02:47.823

您应该创建一个新的`UITableViewCellViewController`，设计它并获取数据。它比任何其他方法都简单。

# php - 致命错误：未捕获的异常“WebServiceException”和消息“为 parent_id 指定的引用无效”

> ID：15446591
> 
> 赞同：1
> 
> 时间：2013-03-16T07:10:01.487
> 
> 标签：php, vtiger

我在使用 vtigercrm 5.4.0 版时遇到问题。在 Unix 系统上。我的问题是我为发票创建了一个工作流，任务是在日历中生成一个事件。条件是是否应在日历中为特定日期事件更改任何发票条目。

在发票页面上单击保存时，该页面出现错误：

`"Fatal error: Uncaught exception 'WebServiceException' with message 'Invalid reference specified for parent_id' in /var/www/crmdemo/include/Webservices/Create.php:48 Stack trace: #0 /var/www/crmdemo/modules/com_vtiger_workflow/tasks/VTCreateEventTask.inc(97): vtws_create('Events', Array, Object(Users)) #1 /var/www/crmdemo/modules/com_vtiger_workflow/VTWorkflowManager.inc(275): VTCreateEventTask->doTask(Object(VTWorkflowEntity)) #2 /var/www/crmdemo/modules/com_vtiger_workflow/VTEventHandler.inc(98): Workflow->performTasks(Object(VTWorkflowEntity)) #3 /var/www/crmdemo/include/events/VTEventTrigger.inc(143): VTWorkflowEventHandler->handleEvent('vtiger.entity.a...', Object(VTEntityData)) #4 /var/www/crmdemo/include/events/VTEventsManager.inc(121): VTEventTrigger->trigger(Object(VTEntityData)) #5 /var/www/crmdemo/data/CRMEntity.php(816): VTEventsManager->triggerEvent('vtiger.entity.a...', Object(VTEntityData)) #6 /var/www/crmdemo/modules/Invoice/Save.php(47): CRMEntity->save('Invoice') #7 /var/www/crmdemo/index.php(749): includ in /var/www/crmdemo/include/Webservices/Create.php on line 48"`

但不知何故，事件是在日历中创建的，其他问题是在为创建事件提供时间的同时，我可以选择“上午/下午”的选项按钮，但在保存并加载错误页面并访问同一页面后选择“pm”后仍显示“am”

我认为这与php有关

m 无法在此处粘贴所有 d 文件，因此这是链接

[https://discussions.vtiger.com/index.php?p=/discussion/164995](https://discussions.vtiger.com/index.php?p=/discussion/164995)

此致

耐普罗

# actionscript-3 - 奇数添加和删除子行为 AS3

> ID：15446592
> 
> 赞同：0
> 
> 时间：2013-03-16T07:10:21.030
> 
> 标签：actionscript-3

好的，所以这个框架，你躲避小行星，如果你撞到一个大的，它会摧毁你，你会去另一个框架，但是你可以选择回到前面提到的框架。有时当我重试关卡时，当我回来时，一些小行星已经留在了那里，就像这个[http://imgur.com/a/o9UHC](http://imgur.com/a/o9UHC)一样，似乎有时在重新加载那个场景时出现的小行星比那里更多应该。这是代码：

```
var speedAgainX = Math.floor(Math.random() * 20 - 10);
var speedAgainY = Math.floor(Math.random() * 20 - 10);
var speedAgainX1 = Math.floor(Math.random() * 20 - 10);
var speedAgainY1 = Math.floor(Math.random() * 20 - 10);
var speedAgainX2 = Math.floor(Math.random() * 20 - 10);
var speedAgainY2 = Math.floor(Math.random() * 20 - 10);
var speedAgainX3 = Math.floor(Math.random() * 20 - 10);
var speedAgainY3 = Math.floor(Math.random() * 20 - 10);

var nCount1:Number = -0;

 timer_Text1.text = nCount1.toString();
addEventListener(Event.ENTER_FRAME,massCollect);
function massCollect(e:Event){
if(Cosmo.hitTestObject(Asteroid5)){
   removeChild(Asteroid5);
   nCount1++;
   timer_Text1.text = nCount1.toString();

  addChild(Asteroid5);
  Asteroid5.x = Math.floor(Math.random() * 20 - 10);
   Asteroid5.y = Math.floor(Math.random() * 20 - 10);
   Asteroid5.x = Asteroid5.x + speedAgainX;
   Asteroid5.y = Asteroid5.y + speedAgainY;
if (Asteroid5.x > 1100 || Asteroid5.x < -100)
{
    speedAgainX = -speedAgainX;
}
}

if(Cosmo.hitTestObject(Asteroid6)){
   removeChild(Asteroid6);
   nCount1++;
   timer_Text1.text = nCount1.toString();

  addChild(Asteroid6);
  Asteroid6.x = Math.floor(Math.random() * 20 - 10);
   Asteroid6.y = Math.floor(Math.random() * 20 - 10);
   Asteroid6.x = Asteroid6.x + speedAgainX1;
   Asteroid6.y = Asteroid6.y + speedAgainY1;
if (Asteroid6.x > 1100 || Asteroid6.x < -100)
{
    speedAgainX1 = -speedAgainX1;
}
}

if(Cosmo.hitTestObject(Asteroid7)){
   removeChild(Asteroid7);
   nCount1++;
   timer_Text1.text = nCount1.toString();

  addChild(Asteroid7);
  Asteroid7.x = Math.floor(Math.random() * 20 - 10);
   Asteroid7.y = Math.floor(Math.random() * 20 - 10);
   Asteroid7.x = Asteroid7.x + speedAgainX2;
   Asteroid7.y = Asteroid7.y + speedAgainY2;
if (Asteroid7.x > 1100 || Asteroid7.x < -100)
{
    speedAgainX2 = -speedAgainX2;
}
}

if(Cosmo.hitTestObject(Asteroid8)){
   removeChild(Asteroid8);
   nCount1++;
   timer_Text1.text = nCount1.toString();

  addChild(Asteroid8);
  Asteroid8.x = Math.floor(Math.random() * 20 - 10);
   Asteroid8.y = Math.floor(Math.random() * 20 - 10);
   Asteroid8.x = Asteroid8.x + speedAgainX3;
   Asteroid8.y = Asteroid8.y + speedAgainY3;
if (Asteroid8.x > 1100 || Asteroid8.x < -100)
{
    speedAgainX3 = -speedAgainX3;
}
}

if (Cosmo.hitTestObject(Deathroid1)){
    gotoAndStop(352, "Scene 1");

    removeEventListener(Event.ENTER_FRAME,massCollect);
    removeEventListener(Event.ENTER_FRAME,massGain);
    removeChild(Asteroid5);
    removeChild(Asteroid6);
    removeChild(Asteroid7);
    removeChild(Asteroid8);
}
if (Cosmo.hitTestObject(Deathroid2)){
    gotoAndStop(352, "Scene 1");
    removeEventListener(Event.ENTER_FRAME,massCollect);
    removeEventListener(Event.ENTER_FRAME,massGain);

    removeChild(Asteroid5);
    removeChild(Asteroid6);
    removeChild(Asteroid7);
    removeChild(Asteroid8);

}

if(nCount1 == 10){
    gotoAndStop(351, "Scene 1");
    removeEventListener(Event.ENTER_FRAME,massCollect);
    removeEventListener(Event.ENTER_FRAME,massGain);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:53:42.063

这块：

```
if(Cosmo.hitTestObject(Asteroid6)){
   removeChild(Asteroid6);
   nCount1++;
   timer_Text1.text = nCount1.toString();

  addChild(Asteroid6);
  Asteroid6.x = Math.floor(Math.random() * 20 - 10);
   Asteroid6.y = Math.floor(Math.random() * 20 - 10);
   Asteroid6.x = Asteroid6.x + speedAgainX1;
   Asteroid6.y = Asteroid6.y + speedAgainY1;
if (Asteroid6.x > 1100 || Asteroid6.x < -100)
{
    speedAgainX1 = -speedAgainX1;
}
} 
```

当 Cosmo 与 Asteroid6 相撞时，您基本上是在重新创建 Asteroid6。不过，我认为这只是支架放置的问题。其余的也一样。

此外，您的整个代码有点混乱。您应该研究阵列，以便更好地管理您的小行星。

# javascript - 如何更改包含文本值Javascript的文本变量的字体族

> ID：15446593
> 
> 赞同：0
> 
> 时间：2013-03-16T07:10:26.120
> 
> 标签：javascript

```
<div id="altext">
<script type="text/javascript">

function changeText2(){
    var userInput = document.getElementById('userInput').value;
    useInput.style.fontFamily='arial';
    document.getElementById('altext').innerHTML = userInput;
}

</script>

</div> 
```

这不起作用。我想要它，以便字体更改为 arial 或我想要的字体系列！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:12:12.557

您可以更改以下`font-family`内容：

```
document.getElementById('altext').style.fontFamily = 'arial'; 
```

在您当前的代码中，您正试图访问`.style.fontFamily`文本输入的值，它只是一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:12:33.460

尝试这个：

```
function changeText2(){
    var userInput = document.getElementById("userInput");
    var altText = document.getElementById("altext");
    altText.innerHTML = userInput.value;
    userInput.style.fontFamily = "arial";
    altText.style.fontFamily = "arial";
} 
```

问题是这`document.getElementById("userInput").value`是一个字符串，而不是 HTML 元素。因此你不能设置它的字体系列。相反，您需要将其设置为`document.getElementById("altext")`或`document.getElementById("userInput")`。

# php - 数组中的PHP不起作用

> ID：15446600
> 
> 赞同：-11
> 
> 时间：2013-03-16T07:11:16.233
> 
> 标签：php, arrays, function

这是我的代码

```
$arr = array('id', 'string');
    // check keys do not contain id or string
    if(in_array($arr, $keys) == true) {
        return false;
    } else {
        var_dump($keys);
        var_dump($arr);
    }
            return true; 
```

函数的响应；

```
array (size=2)
  0 => string 'mohooho' (length=14)
  1 => string 'string' (length=6)
array (size=2)
  0 => string 'id' (length=2)
  1 => string 'string' (length=6)
boolean true 
```

我要疯了吗？还是我这么累？这到底是怎么回事？

**编辑**

好的，在我的机器上我有这个，我可以以我母亲的生命发誓，我正在使用 wamp php 5.4

```
// check keys do not contain id or string
    if(in_array(array('string', 'id'), array('string', 'id'))) {
        echo 'IN ARRAY';
    } else {
        echo 'ERROR!';
    } 
```

[http://writecodeonline.com/php/](http://writecodeonline.com/php/) <<<<**在这里测试代码**

我明白了`ERROR!`，

但这有效，

```
// check keys do not contain id or string
    if(in_array('string', array('string', 'id'))) {
        echo 'IN ARRAY';
    } else {
        echo 'ERROR!';
    } 
```

我现在得到了正确的回应`IN_ARRAY`

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:44:18.767

我能想到为什么会返回的原因`ERROR`：

```
if (in_array(array('string', 'id'), array('string', 'id')))
{
    echo 'IN ARRAY';
}
else
{
    echo 'ERROR!';
} 
```

是因为 PHP 会根据针本身检查每个 haystack 的值。假设您有 2 个这样的数组：

```
$a = array('string', 'id');
$b = array('string', 'id'); 
```

`$a`是一样的`$b`吗？如果你把这些喂给`in_array`,`$a`是针和大海捞针`$b`，它检查`$b[0]`等于`$a`? 错误的。但是，如果您像这样制作数组并执行以下操作`in_array($a, $b)`：

```
$a = array('string', 'id');
$b = array(array('string', 'id'), 'id'); 
```

它将返回true，因为`$b[0]`它等于`$a`它自己或在`$a`干草堆中发生的任何地方`$b`。

# c# - 排序或排序以排序列表 [] c# 使用 Linq

> ID：15446601
> 
> 赞同：1
> 
> 时间：2013-03-16T07:11:16.830
> 
> 标签：c#, list, sorting

如何排序列表<T>[]？

我有列表 List[] deliverystatus = new List[3];

```
 deliverystatus[0]---> stores name of file
      deliverystatus[1]---> file delivery date
      deliverystatus[2]---> where to delivery 
```

我将列表转换为表格并使用邮件发送。我无法更改其他代码有什么办法可以简单地排序

```
 List<T>.OrderBy(o => o.x).ToList()....ETC 
```

我想根据交付状态对整个列表进行排序[2]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T07:20:02.320

```
 var list = new List<string[]>();
        list.Add(new string[] { "1", "zzz", "z" });
        list.Add(new string[] { "1", "aaa", "x" });
        list.Add(new string[] { "1", "b", "y" });
        list.Add(new string[] { "1", "c", "3" });

        var orderedList = list.OrderBy(e => e[2]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T07:19:32.567

看起来您有 3 个元素数组的列表，并且您想按每个数组的第三个组件对其项目进行排序：

```
// assuming List<string[]> allDeliveryStatuses;
var result = allDeliveryStatuses.OrderBy(d => d[2]).ToList(); 
```

旁注：使用数组来表示数据结构是个坏主意（但显然不应该是我的电话）

# php - PHP current() 在将有效数组传递给它时返回 false

> ID：15446602
> 
> 赞同：1
> 
> 时间：2013-03-16T07:11:25.853
> 
> 标签：php, arrays

我有一个 size=1 的数组，当我尝试获取当前数组时，它返回 false，但数组有值。

```
 $article=getArticle($id); 
    if(is_array($article)) 

    { $article=current($article); } 
```

getArticle 返回多维数组，当 var_dump 在当前之前我可以看到该数组。如果 var_dump 在当前我得到错误之后。

如果我使用上面的代码（因为数组大小=1）

```
 if(is_array($article)) 
            { 
                    foreach($article as $k=>$v)
               {
            $article=$v;
               }
           } 
```

它可以正常工作

电流有什么问题？

请帮忙

===============编辑========================

这是当前我删除内容和摘要之前的 var_dump，因为是大文本

```
array(1) {
      [529]=>
      array(14) {
        ["articles_id"]=>
        string(3) "529"
        ["issue"]=>
        string(3) "161"
        ["membership_type"]=>
        string(1) "1"
        ["el"]=>
        array(9) {
          ["title"]=>
          string(23) "AUTOBIANCHI A112 ABARTH"
          ["url"]=>
          string(23) "autobianchi-a112-abarth"
          ["summary"]=>
          string(397) " i have remove it 
    "
          ["content"]=>
          string(11580) " i have remove it too large
     "
          ["meta_keywords"]=>
          string(23) "AUTOBIANCHI,A112,ABARTH"
          ["meta_description"]=>
          string(402) " "
          ["created"]=>
          string(10) "1362076380"
          ["last_updated"]=>
          string(1) "0"
          ["status"]=>
          string(1) "1"
        }
        ["categories_id"]=>
        string(2) "12"
        ["authors_id"]=>
        string(2) "16"
        ["brands_id"]=>
        string(2) "36"
        ["models_id"]=>
        string(3) "206"
        ["engines_id"]=>
        string(3) "174"
        ["o-categories"]=>
        array(1) {
          ["values"]=>
          array(1) {
            [12]=>
            array(15) {
              ["categories_id"]=>
              string(2) "12"
              ["object_id"]=>
              string(1) "1"
              ["parent_id"]=>
              string(1) "0"
              ["path"]=>
              string(2) "12"
              ["handler"]=>
              string(0) ""
              ["icon"]=>
              string(0) ""
              ["tpl"]=>
              string(12) "articles.php"
              ["alias"]=>
              string(1) "0"
              ["is_nav"]=>
              string(1) "1"
              ["pos"]=>
              string(2) "10"
              ["depth"]=>
              string(1) "0"
              ["cts"]=>
              string(0) ""
              ["mts"]=>
              string(0) ""
              ["configuration"]=>
              string(0) ""
              ["el"]=>
              array(15) {
                ["categories_id"]=>
                string(2) "12"
                ["lang"]=>
                string(2) "el"
                ["category_name"]=>
                string(13) "Classic"
                ["sub_title"]=>
                string(0) ""
                ["summary"]=>
                string(0) ""
                ["image"]=>
                string(0) ""
                ["html_code"]=>
                string(0) ""
                ["meta_title"]=>
                string(0) ""
                ["url"]=>
                string(13) "classic"
                ["url_path"]=>
                string(13) "classic"
                ["meta_keywords"]=>
                string(0) ""
                ["meta_description"]=>
                string(0) ""
                ["created"]=>
                string(10) "1355235888"
                ["last_updated"]=>
                string(1) "0"
                ["status"]=>
                string(1) "1"
              }
            }
          }
        }
        ["o-authors"]=>
        array(1) {
          ["values"]=>
          array(1) {
            [16]=>
            array(4) {
              ["authors_id"]=>
              string(2) "16"
              ["object_id"]=>
              string(2) "26"
              ["image"]=>
              string(0) ""
              ["el"]=>
              array(9) {
                ["authors_id"]=>
                string(2) "16"
                ["lang"]=>
                string(2) "el"
                ["name"]=>
                string(31) "Last First"
                ["last_name"]=>
                string(10) "Last"
                ["first_name"]=>
                string(20) "First"
                ["nick_name"]=>
                string(0) ""
                ["created"]=>
                string(10) "1360567827"
                ["last_updated"]=>
                string(1) "0"
                ["status"]=>
                string(1) "1"
              }
            }
          }
        }
        ["o-brands"]=>
        array(1) {
          ["values"]=>
          array(1) {
            [36]=>
            array(6) {
              ["brands_id"]=>
              string(2) "36"
              ["object_id"]=>
              string(2) "17"
              ["brand_name"]=>
              string(11) "AUTOBIANCHI"
              ["created"]=>
              string(10) "1363179463"
              ["last_updated"]=>
              string(1) "0"
              ["status"]=>
              string(1) "1"
            }
          }
        }
        ["o-models"]=>
        array(1) {
          ["values"]=>
          array(1) {
            [206]=>
            array(7) {
              ["models_id"]=>
              string(3) "206"
              ["object_id"]=>
              string(2) "18"
              ["brands_id"]=>
              string(2) "36"
              ["model_name"]=>
              string(11) "A112 ABARTH"
              ["created"]=>
              string(10) "1363179480"
              ["last_updated"]=>
              string(1) "0"
              ["status"]=>
              string(1) "1"
            }
          }
        }
        ["o-engines"]=>
        array(1) {
          ["values"]=>
          array(1) {
            [174]=>
            array(6) {
              ["engines_id"]=>
              string(3) "174"
              ["object_id"]=>
              string(2) "19"
              ["engine"]=>
              string(5) "1.050"
              ["created"]=>
              string(10) "1363179448"
              ["last_updated"]=>
              string(1) "0"
              ["status"]=>
              string(1) "1"
            }
          }
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:30:24.310

如果在 getArticle() 函数中复制数组，则其内部指针将丢失。

我认为这就是原因，它返回false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:39:14.013

你能试一下吗

```
$article=getArticle($id); 
if (is_array($article)) {
    $article = reset($article); 
} 
```

或者

```
$article=getArticle($id); 
if (is_array($article)) {
    $article = array_shift($article); 
} 
```

您可以查看[有关 reset](http://www.php.net/manual/en/function.reset.php)的[文档和有关 array_shift](http://www.php.net/manual/en/function.array-shift.php)的文档。

# mysql - MYSQL 内连接与选择语句

> ID：15446603
> 
> 赞同：0
> 
> 时间：2013-03-16T07:11:33.197
> 
> 标签：mysql, sql, join, sum, inner-join

现在我有以下查询：

```
SELECT     
  rm.reward_name,
  rm.rewardid,
  rc.reward_code,
  rc.status,
  rc.rewardid,
  rc.add_date,
  rc.status 
from rewards_codes as rc 
INNER JOIN reward_mast as rm on rc.rewardid on rm.rewardid 
where DATE(rc.add_date) between '2012-03-16' AND '2013-03-16'; 
```

我想从所有代码中获取代码总数，可用代码，使用代码

我已在rewards_codes 字段中使用状态字段来区分代码状态

0 - 可用

1-使用的代码

所以我的最终输出应该如下所示：

```
-----------------------------------------------------------
Reward Name     Total Codes      Available code   Used code        

my_reward       100                  40               60
extra_reward    100                  90               10
----------------------------------------------------------- 
```

[更新]

这是两个表中的一些示例数据...

```
reward_mast

rewardid        rewrd_name
1               my_reward
2               extra_reward
3               test_reward 
```

奖励代码

```
codeId  rewardid    reward_code     add_date    status
1       1           aka454          2012-11-21  0
2       2           ala499          2012-04-21  0
3       1           pao789          2012-08-21  0
4       3           zlk753          2012-01-21  0
5       2           qra954          2012-05-21  0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:15:35.630

尝试这个：

```
SELECT 
  rm.rewardid,
  rm.reward_name,
  IFNULL(COUNT(rc.reward_code), 0) AS 'Total Codes',
  IFNULL(SUM(rc.status = 0), 0)    AS 'Available code',
  IFNULL(SUM(rc.status = 1), 0)    AS 'Used Codes'
FROM reward_mast as rm
LEFT JOIN rewards_codes as rc on rc.rewardid = rm.rewardid 
WHERE DATE(rc.add_date) between '2012-03-16' AND '2013-03-16'
GROUP BY rm.reward_name,
         rm.rewardid; 
```

这将分别为您提供每种状态代码类别的计数`Totalcodes`，`Available Codes`和`Used Codes`。

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/7ea1a/3)

这会给你：

```
| REWARDID |  REWARD_NAME | TOTAL CODES | AVAILABLE CODE | USED CODES |
-----------------------------------------------------------------------
|        1 |    my_reward |           2 |              2 |          0 |
|        2 | extra_reward |           2 |              2 |          0 | 
```

# regex - 正则表达式：匹配十六进制/键字符串

> ID：15446604
> 
> 赞同：0
> 
> 时间：2013-03-16T07:11:36.080
> 
> 标签：regex

我已经尝试自己创建一个正则表达式来做到这一点，但老实说，我现在的头脑是如此困惑，以至于我必须寻求帮助......这也可能对未来的人们有所帮助。

我有以下输入模板：

```
06-6A-BF-05-AF-84-DF-A4-23-7C-BE-B4-6C-95-D7
JK1T-XTSRV-2HC4D-RP4S7-ZMKRG 
```

我需要从输入字符串中挑选出像这两个这样的字符串。输入字符串可能如下所示：

```
JK1T-XTSRV-2HC4D-RP4S7-ZMKRG
FDGF-A1S0M-5M8XJ-T08WC-BCZSJ
C6-6C-1C-17-B7-EE-BE-EA-E3-7C-EF-23-6C-12-F1
asdf234 ,f C6-324_EE 
```

在这种情况下，将返回以下内容：

```
JK1T-XTSRV-2HC4D-RP4S7-ZMKRG, FDGF-A1S0M-5M8XJ-T08WC-BCZSJ, C6-6C-1C-17-B7-EE-BE-EA-E3-7C-EF-23-6C-12-F1 
```

因此，正则表达式需要具有以下限制才能匹配字符串：

*   15 两个字符（数字或字母）对，由`-`
*   5 四个字符（数字或字母）对，由`-`

**什么正则表达式会匹配这些？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:25:08.083

您应该使用两个正则表达式：

```
(\w{2}-){14}\w{2}
\w{4}-(\w{5}-){3}\w{5} 
```

第二种实际上是一个四个字符和四个五个字符。

测试 1： http: [//fiddle.re/h3ve6](http://fiddle.re/h3ve6)

测试 2： http: [//fiddle.re/3a5e6](http://fiddle.re/3a5e6)

# ajax - Ruby on rails：使用永久链接每页显示一篇文章的最简单方法是什么

> ID：15446606
> 
> 赞同：0
> 
> 时间：2013-03-16T07:11:47.220
> 
> 标签：ajax, ruby-on-rails-3, activerecord

现在在我的帖子控制器下我有方法

```
 def main
    @post = Post.all
  end

 def show
    @post = Post.find(params[:id])
  end 
```

我想知道在每页显示一篇文章并有下一个和上一个链接的最基本和最简单的方法是什么。这里我指的是`main.html.erb`. 因此，例如，只有`localhost:3000/posts`在该页面下，我可以有下一个和上一个链接来浏览帖子。

我需要某种ajax吗？如果不是，那么我如何使用简单的 activerecord 和 Rails 的其他元素来做到这一点？

注意：单击下一步后，我确实需要在 url 选项卡中拥有帖子的永久链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:42:08.443

您可以使用 gem will_paginate 并将每页的默认值设置为 1，如下所示：

```
class Post
  self.per_page = 1
end 
```

有关 will_paginate 的更多信息： [https ://github.com/mislav/will_paginate](https://github.com/mislav/will_paginate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:25:24.760

你可以做这样的事情。将上一个和下一个方法添加到您的模型

```
def previous
  posts = where('id > ?', id).limit(1)
  if posts.nil?
    nil
    else
    posts.first
  end
end

def next
  posts = where('id < ?',id).limit(1)
  if posts.nil?
    nil
    else
    posts.first
  end
end 
```

然后在你看来你可以做这样的事情。

```
 unless @post.next.nil? #to show the link to the next post
   link_to @post.next
 end
 unless @post.previous.nil? #to show the link to the next post
   link_to @post.previous
 end 
```

无论如何，这种方法并没有那么优化，因为您将添加更多两个数据库查询来获取上一篇和下一篇文章。

# database - 使用 SQL Server 2008 R2 将希伯来语字符串插入数据库

> ID：15446610
> 
> 赞同：2
> 
> 时间：2013-03-16T07:12:16.353
> 
> 标签：database, visual-studio-2010, sql-server-2008-r2

我正在尝试使用带有连接字符串的 Visual Studio 2010 和 SQL Server 2008 R2 将希伯来语字符串插入 SQL Server 数据库，但在数据库表中我得到 ????? 而不是原来的字符串。只是提到它不会发生在过去。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:37:19.520

您必须更改数据库排序规则。运行以下脚本：

```
USE master;
GO
ALTER DATABASE YOUR_DATABASE_NAME
COLLATE Hebrew_CI_AS ;
GO 
```

# android - Android_Beginner 级别的计算器

> ID：15446615
> 
> 赞同：0
> 
> 时间：2013-03-16T07:13:03.707
> 
> 标签：android, android-emulator

我刚刚开始在 Android 中编码。我尝试创建一个可以计算两个数字之和的应用程序。即使在这个简单的程序中也会出错。应用程序显示：不幸的是，在模拟器中运行时 application_name 已停止。

```
package com.example.first;

import org.w3c.dom.Text;

import android.R.string;
import android.os.Bundle;
import android.app.Activity;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements android.view.View.OnClickListener
{
    Button buttonSum,buttonSumOne;
    EditText textOne,textTwo;
    TextView textSum;
    float a,b,sum;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        buttonSum=(Button)findViewById(R.id.button1);
        buttonSum.setOnClickListener(this);
        textOne=(EditText)findViewById(R.id.editText1);
        textTwo=(EditText)findViewById(R.id.editText2);
        textSum=(TextView)findViewById(R.id.textSum);
        a=Float.parseFloat(textOne.getText().toString());
        a=Float.valueOf(textOne.getText().toString());
        b=Float.parseFloat(textTwo.getText().toString());
        sum=a+b;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(R.id.button1==v.getId())         
            textSum.setText(String.valueOf(sum));

    }

} 
```

日志猫：

```
03-16 07:08:16.297: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-16 07:08:16.316: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-16 07:08:18.496: D/AndroidRuntime(791): Shutting down VM
03-16 07:08:18.496: W/dalvikvm(791): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-16 07:08:18.536: E/AndroidRuntime(791): FATAL EXCEPTION: main
03-16 07:08:18.536: E/AndroidRuntime(791): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.first/com.example.first.MainActivity}: java.lang.NumberFormatException: Invalid float: ""
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.os.Looper.loop(Looper.java:137)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-16 07:08:18.536: E/AndroidRuntime(791):  at java.lang.reflect.Method.invokeNative(Native Method)
03-16 07:08:18.536: E/AndroidRuntime(791):  at java.lang.reflect.Method.invoke(Method.java:511)
03-16 07:08:18.536: E/AndroidRuntime(791):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-16 07:08:18.536: E/AndroidRuntime(791):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-16 07:08:18.536: E/AndroidRuntime(791):  at dalvik.system.NativeStart.main(Native Method)
03-16 07:08:18.536: E/AndroidRuntime(791): Caused by: java.lang.NumberFormatException: Invalid float: ""
03-16 07:08:18.536: E/AndroidRuntime(791):  at java.lang.StringToReal.invalidReal(StringToReal.java:63)
03-16 07:08:18.536: E/AndroidRuntime(791):  at java.lang.StringToReal.parseFloat(StringToReal.java:289)
03-16 07:08:18.536: E/AndroidRuntime(791):  at java.lang.Float.parseFloat(Float.java:300)
03-16 07:08:18.536: E/AndroidRuntime(791):  at com.example.first.MainActivity.onCreate(MainActivity.java:33)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.Activity.performCreate(Activity.java:5104)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-16 07:08:18.536: E/AndroidRuntime(791):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-16 07:08:18.536: E/AndroidRuntime(791):  ... 11 more
03-16 07:08:52.026: I/Process(791): Sending signal. PID: 791 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:16:46.937

您正在收到异常，因为您正在从 on create 方法中的编辑文本中获取值，并且当时两个编辑文本都是空的..尝试在 onClick 方法中获取值..

尝试这个：

```
 public class MainActivity extends Activity implements android.view.View.OnClickListener
    {
        Button buttonSum,buttonSumOne;
        EditText textOne,textTwo;
        TextView textSum;
        float a,b,sum;
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            buttonSum=(Button)findViewById(R.id.button1);
            buttonSum.setOnClickListener(this);
            textOne=(EditText)findViewById(R.id.editText1);
            textTwo=(EditText)findViewById(R.id.editText2);
            textSum=(TextView)findViewById(R.id.textSum);

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) 
        {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(R.id.button1==v.getId())    {    
            a=Float.parseFloat(textOne.getText().toString());          
            b=Float.parseFloat(textTwo.getText().toString());
               sum=a+b; 
               textSum.setText(String.valueOf(""+sum));
    }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:24:19.777

尝试这个

```
a= Float.valueOf(yourEdittext.getText().toString()); 
```

或者

```
String s = yourEdittext.getText().toString();
Float f= Float.parseFloat(s); 
```

并将值添加到您的字符串中，它不会将 nil 值转换为浮点数。

```
a="20.0"
b="22.0" 
```

像这样的东西。

第一次您的编辑文本不包含该值。因此它不会找到任何要转换的东西。
你的错误解释了一切。

```
Caused by: java.lang.NumberFormatException: Invalid float: "" 
```

为您的编辑文本提供价值。

```
yourEditText.setText("22.0"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:28:12.310

你得到的错误是：

```
Caused by: java.lang.NumberFormatException: Invalid float: "" 
```

从这行代码：

```
 at com.example.first.MainActivity.onCreate(MainActivity.java:33) 
```

其中有以下代码：

```
 a=Float.parseFloat(textOne.getText().toString()); 
```

您的错误是您试图访问方法`textOne`中文本字段的内容`onCreate()`。当要创建活动时调用此方法，因此用户还没有机会与之交互，因此该文本字段的内容为空。

您应该移动该行代码以及接下来的几行获取`textTwo`值的代码，将字符串解析为浮点数并对`onClick()`方法进行计算。当用户有机会在文本字段中输入一些实际值之后，该方法将在用户单击按钮时执行。

请注意，您仍然必须从解析中捕获异常，因为用户可能会在这些字段中键入一些垃圾而不是实际数字。最简单的方法是`try { .. } catch (Exception ex) {}`绕过解析行，这基本上会吞下任何异常。当然，这仍然会运行虚假计算并向用户显示一些不正确的答案。更好的用户体验是在发生这种情况时向用户显示一些不错的错误消息，解释他们做错了什么。不过，我会把它作为练习留给你。

# objective-c - 如何在不破解源代码的情况下覆盖 Objective-C Cordova 类？

> ID：15446617
> 
> 赞同：2
> 
> 时间：2013-03-16T07:13:16.057
> 
> 标签：objective-c, cordova, cordova-2.0.0

我是 Objective-C 的新手，如果这太简单了，我很抱歉。我正在尝试更改**PhoneGap 捕获功能**，以在您拨打电话时弹出的音频和视频捕获屏幕上添加一些`capture.captureAudio`文本`capture.captureVideo`。

我发现我可以更改 Cordova 源并更改 loadView 方法 `CDVAudioRecorderViewController`以添加文本字段并更改外观。同样，我想我应该能够在`CDVImagePicker`课堂上做同样的事情。

我知道破解图书馆的来源是一个坏主意，所以我想知道我可以采取哪些其他简单的方法来做到这一点？

有没有一种偷偷摸摸的简单方法来替换 Objective-C 中的继承类？也许通过`init`某种方式改变工厂（）方法？如果是这样，我如何在我自己的代码库中进行设置，以便它在原始代码之前使用我的更改？

如果不是，这是否意味着我必须求助于创建一个插件来覆盖`CDVCapture`找到提到我想要子出的类的每个方法，并将它们替换为继承表单的新类`CDVAudioRecorderViewController`只是为了覆盖单个方法`CDVAudioRecorderViewController`？

# jsp - EL和 打印空属性的空字符串，但在从 servlet 分派请求时抛出异常

> ID：15446632
> 
> 赞同：-1
> 
> 时间：2013-03-16T07:15:13.440
> 
> 标签：jsp, jstl, el

我的调度程序 servlet 是：

```
 SampleModel model = new SampleModel();
 model.setModelName("someName");
 request.setAttribute("model", model);
 request.getRequestDispatcher("nulltester.jsp").forward(request, response); 
```

这里`SampleModel`的类只有一个名为 的属性`modelName`。转发请求的 JSP 片段：

```
The undefined bar property is : ${model.bar} , <c:out value="${model.bar}"> 
```

如果我们点击 servlet 并且 servlet 然后将请求分派给 jsp，则此代码将引发异常。但是，如果我们直接点击 JSP，那么我们就会毫无例外地得到 o/p ！谁能解释我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:48:57.987

如果根本没有模型属性，EL 将评估`${model}`为 null，并将停止评估`${model.bar}`，返回一个空字符串。

如果有模型，它将评估`${model}`您的对象并尝试`${model.bar}`通过调用来评估`model.getBar()`，但不会找到任何此类 getter，这将导致异常。

# applescript - 运行单击按钮命令时Applescript延迟很长时间

> ID：15446634
> 
> 赞同：1
> 
> 时间：2013-03-16T07:15:28.733
> 
> 标签：applescript

我正在编写一个简单的代码来单击 Notes 应用程序上的共享按钮

```
set upArrow to ASCII character 30
activate application "Notes"
tell application "System Events"
tell process "Notes"
set frontmost to true
click button 2 of group 2 of splitter group of window 1
keystroke upArrow
keystroke return
end tell
end tell 
```

问题是

```
click button 2 of group 2 of splitter group 1 of window 1 of application process "Notes" --> missing value 
```

它需要 6 秒才能完成运行并返回错误缺失值

但是如果我不添加击键或任何命令，则此代码可以完美运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:44:38.493

我也得到了延迟，它返回缺失值。但是您可以改为单击菜单栏项吗？

```
activate application "Notes"
tell application "System Events" to tell process "Notes"
    click menu item "Email" of menu 1 of menu item "Share" of menu "File" of menu bar 1
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:04:45.900

有一个线程似乎描述了似乎仅限于特定软件的相同错误。它在 MacScripter.net[上：单击按钮时的脚本延迟（控制 Sys Prefs 窗格）](http://macscripter.net/viewtopic.php?id=37635 "单击按钮时的脚本延迟（控制 Sys Prefs 窗格）")

请注意描述 FileMaker 延迟的最新帖子。当软件出现此错误时，似乎唯一的解决方法是执行其他操作来打开新窗口。如果运行所需功能的唯一方法是通过按钮，则一个（可怕的）选项是单击相对于前窗口角的坐标。显然，如果内容可以相对于角落移动，或者如果新版本的软件移动了所需的按钮，这很容易失败。还有其他想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-24T04:04:54.737

```
set focused of button 2 of group 2 of splitter group 1 of window 1 to true
keystroke space 
```

或者

```
set value of attribute "AXFocused" of button 2 of group 2 of splitter group 1 of window 1 to true
keystroke space 
```

资源：

[https://lists.apple.com/archives/Accessibility-dev/2006/Oct/msg00013.html](https://lists.apple.com/archives/Accessibility-dev/2006/Oct/msg00013.html)

# chromium - gyp中变量的范围是什么？

> ID：15446635
> 
> 赞同：1
> 
> 时间：2013-03-16T07:15:32.980
> 
> 标签：chromium, gyp

gyp[文档](http://code.google.com/p/gyp/wiki/GypUserDocumentation)记录了`'variables'`这样的部分：

> 'variables'：可以在**文件**的各个其他部分中插入和使用的变量的定义。

（强调我的）。这似乎排除了使用包含的 gyp 文件中的变量，也排除了包含其他设置变量的 gyp 文件的可能性。

这个对吗？这些变量的作用域是什么，如何全局设置变量？我看到在 Chromium 中，`build/common.gypi`设置了很多变量，但 Chromium 也使用了`gyp_chromium`不同于 plain 的魔法脚本`gyp`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T05:48:43.090

变量的作用域 GYP 与 C++ 中的局部变量的作用域非常相似。假设您在`variables`字典中定义了一个变量`FOO`。中定义的变量的范围`FOO`是字典`BAR`，它是`FOO`. 您可以在内部的任何地方使用这些变量，也可以在`BAR`它之外的任何地方使用这些变量。

> 你如何设置全局变量？

了解所描述的规则非常容易。将`variables`字典添加到 gyp 脚本的顶级字典并在其中定义一些变量。它们将在此脚本中的任何位置^(1可用。)

> 这似乎排除了使用包含的 gyp 文件中的变量，也排除了包含其他`gyp`设置变量的文件的可能性。

这不是真的。假设您包含`include.gypi`在`generator.gyp`脚本中。如果它的顶级字典中`include.gypi`有`variables`部分，则这些变量可以在`generator.gyp`. 显然，不在顶级字典中定义的变量将无法访问。

¹请记住，`includes`在变量扩展之前进行解析。因此，您不能在包含路径中使用变量。

# css - CSS 扩展父容器依赖于它的浮动子容器

> ID：15446641
> 
> 赞同：1
> 
> 时间：2013-03-16T07:16:01.263
> 
> 标签：css, html

我有一个容器，它的 id 是`#parent`，我动态添加了几个 class 的图像，`.child`可以为`.child`元素假设固定的宽度和高度。

我希望所有人都`.child`漂浮在彼此旁边以构建一个水平列表。如何`#parent`自动调整大小到 all 的总宽度`.child`？

非常感谢！

PS：我需要一个纯 CSS 解决方案..

小提琴：http: [//jsfiddle.net/u8GPN/1/](http://jsfiddle.net/u8GPN/1/)

解决方案可以在这里找到：http: [//jsfiddle.net/u8GPN/28/](http://jsfiddle.net/u8GPN/28/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T07:21:55.673

你可以让你的父母`inline-block`添加`white-space: nowrap;`到它：

```
#parent {
    display: inline-block;
    overflow: hidden;
    border: 1px dashed blue;
    white-space: nowrap;
} 
```

[http://jsfiddle.net/u8GPN/22/](http://jsfiddle.net/u8GPN/22/)

测试动态添加新块[http://jsfiddle.net/u8GPN/23/](http://jsfiddle.net/u8GPN/23/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:31:18.883

你也可以给`position: absolute`div`#parent`来解决跨浏览器支持的问题。（或`white-space: nowrap`按照@dfsq 的帖子所示进行）

```
#parent {
     display : block; /* (or) inline-block */
     overflow : hidden;
     border: 1px dashed blue;
     position:absolute; /* Doesn't extend the width more than the page's width */
} 
```

[**工作小提琴**](http://jsfiddle.net/u8GPN/25/)

正如您所说，`.child`元素具有固定的宽度和高度，您需要 `#view`明确指定高度等于`.child`元素高度，以占用布局中的空间。

# c# - 如何将组合框或复选框添加到不在新列中的“Datagridview”的现有记录

> ID：15446642
> 
> 赞同：0
> 
> 时间：2013-03-16T07:16:04.423
> 
> 标签：c#, checkbox, datagridview

在我的代码中，我想将复选框添加到“Datagridview”结果中，我已经找到了如何为 datagridview 添加组合框或复选框的解决方案，但是通过添加新列，我想将复选框添加到现有结果中，我会在细节，

如果我有“选择语句”的结果来显示此数据： ![在此处输入图像描述](../Images/c207bca43fc7cd00bed46a50114bbdb2.png)

我不想最后或首先添加新列，我想将复选框放在最后一列“状态”（来自数据库），以修改其结果并更新数据库中同一列的现有记录.

或者使用预定义的集合为此列添加组合框，以让用户将状态从“待定”修改为“已接受”或“已拒绝”，但在同一记录中而不是在新列中。

这就是我想要做的：
![在此处输入图像描述](../Images/c314dab7fdd640a22116e07930ee3257.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:25:00.530

```
public Form1()
{
        InitializeComponent();
}

private void button1_Click(object sender, EventArgs e)
{
        AddComboxBoxControlsInGridViewColumn();
}

private void AddComboxBoxControlsInGridViewColumn()
{
    DataTable dt = new DataTable();
    dt.Columns.Add("Status");
    for (int j = 0; j < 10; j++)
    {
        dt.Rows.Add("");
    }
    this.dataGridView1.DataSource = dt;
    this.dataGridView1.Columns[0].Width = 200;

    DataGridViewComboBoxCell ComboBoxCell = new DataGridViewComboBoxCell();
    ComboBoxCell.Items.AddRange(new string[] { "Pending","Accepted","Rejected" });
    this.dataGridView1[0, 0] = ComboBoxCell;
    this.dataGridView1[0, 0].Value = "Accepted";
} 
```

# ios - 使用 FacebookSDK 从 iOS 应用发布到 Facebook

> ID：15446644
> 
> 赞同：0
> 
> 时间：2013-03-16T07:16:21.037
> 
> 标签：ios, facebook

我在我的一个应用程序中使用 FacebookSDK 登录到应用程序并分享一些东西。登录已完成，我现在可以使用此 SDK 登录到应用程序。下面是我用于登录的代码。

```
-(void)didSelectLoginWithFB
{
    if (FBSession.activeSession.isOpen) {
        [appDelegate closeSession];
    }
    else {
        [appDelegate openSessionWithAllowLoginUI:YES];
    }

    if(FBSession.activeSession.accessToken ){

        [self performSelector:@selector(FBLoginAction) withObject:nil];
    }

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(FBLoginDidFinish:)
                                                 name:@"FBLoginDidFinish"
                                               object:appDelegate];

}

-(void)FBLoginDidFinish:(NSNotification *)notification
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [self performSelector:@selector(FBLoginAction) withObject:nil];

    }

-(void)FBLoginAction
{
    if (FBSession.activeSession.isOpen) {

    [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection,
           NSDictionary<FBGraphUser> *user,

           NSError *error) {
             if (!error) {

                 NSDictionary *userInfo = (NSDictionary *)user;
                 NSLog(@"User dic %@",userInfo);
//                 fbUserId = user.id;
//                 NSLog(@"User dic %@",fbUserId);

                 userMail = [userInfo objectForKey:@"email"];
                 NSLog(@"User E Mail --- %@", userMail);
                  loginFlag = 200;
                 [self getDataFromServer:nil];
             }

             else{

                 UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Facebook Connection Error !!" message:nil delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil ];
                 [alert show];
             }

         }];

    }

} 
```

现在，我想在用户的 Facebook 墙上（时间线）发布一些内容。我怎样才能使用这个 SDK 做到这一点？我没有从 developer.facebook.com 获得有关此 sdk 的任何信息。请帮忙 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T11:38:06.917

我知道这已经很晚了，但我希望它会有所帮助..

您可以使用以下代码在用户的墙上/时间轴上发布-

```
- (void)postToFacebook{

    AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;

    if (appDelegate.session.state != FBSessionStateCreated || !appDelegate.session.isOpen){

        // Create a new, logged out session.
        NSArray *permissions = [NSArray arrayWithObject:@"publish_actions, publish_stream"];
        appDelegate.session = [[FBSession alloc] initWithPermissions:permissions];

        // if the session isn't open, let's open it now and present the login UX to the user
        [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                         FBSessionState status,
                                                         NSError *error) {
            if (appDelegate.session.state!=258 && appDelegate.session.state!=257) {

                [self postOpenGraphAction];
            }
        }];
    }else{
        if (appDelegate.session.isOpen) {
            [self postOpenGraphAction];
        }
    }
}

- (void)postOpenGraphAction {

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys: @"", @"picture", @"", @"name", @"", @"link", @"", @"caption", @"", @"description", @"Your message to post", @"message", nil];

    AppDelegate *appDelegate = (AppDelegate *) [UIApplication sharedApplication].delegate;
    [FBSession setActiveSession:appDelegate.session];

    [FBRequestConnection startWithGraphPath:@"me/feed" parameters:params HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                              if (error) {
                                  NSLog(@"Error on publishing story: %@", error);
                              } else {
                                                          NSLog(@"Published on wall successfully");
                              }
                          }];
} 
```

我使用了在 AppDelegate 中创建的会话对象，而不是 FBSession activeSession。您可以根据您的代码使用。

# kineticjs - 在 KineticJS 中保存和重新加载阶段后，事件绑定被删除

> ID：15446645
> 
> 赞同：0
> 
> 时间：2013-03-16T07:16:44.190
> 
> 标签：kineticjs

下面是我的代码，正在加载图像并将 onclick 事件绑定到它。我想要的是保存这个阶段并绘制其他内容，即带有后退按钮的下一个屏幕，后退按钮将加载上一个屏幕。但是当我使用 json 保存舞台并重新加载舞台时，舞台显示一切正常，但点击事件会从图像中删除。任何人都可以提供帮助，我希望能够拥有以前的屏幕，因为它包含所有元素及其事件。还有另一种方法可以使用json吗？

```
<!DOCTYPE HTML>
<html>
<head>
<style>
body {
    margin: 0px;
    padding: 0px;
}
</style>
</head>
<body>
<div id="container"></div>
<script src="js/kinetic-v4.3.3.min.js" type="text/javascript"></script> 
<script type="text/javascript">
function loadImages(sources, callback){
    var assetDir = 'http://localhost/kineticdemo/images/';
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for(var src in sources) {
      numImages++;
    }
    for(var src in sources){
      images[src] = new Image();
      images[src].onload = function(){
        if(++loadedImages >= numImages){
          callback(images);
        }
      };
      images[src].src = assetDir + sources[src];
    }
}

function initStage(images)
{
    var stage = new Kinetic.Stage({
      container: 'container',
      width: 730,
      height: 700
    });
    var outerLayer = new Kinetic.Layer();
    var logo = new Kinetic.Image({
              image:images.logo,
              x:450,
              y:75,
              id:"logo"
            });

    logo.on('click',function(){
        alert('aaa');
    });

    outerLayer.add(logo);
    stage.add(outerLayer);

    var json = stage.toJSON();
    stage.destroy();
    stage = Kinetic.Node.create(json, 'container');
    stage.get('#logo').apply('setImage',images.logo);
    stage.draw();
}
var sources = {
    logo: 'logo.png'
};
loadImages(sources, initStage);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:01:12.230

是的，KineticJS 序列化 Node 属性，但它不序列化 Node 事件处理程序。

因此，rehydrad 阶段会知道哪些节点正在“监听”，但您必须手动重新绑定事件处理程序：

**重新水合单击事件处理程序**

```
// re-bind event listener
stage.get('#logo').on('click',  function(e) {  alert('aaa');  }   ); 
```

**重新水合已序列化为字符串的单击事件处理程序**

假设您有原始事件处理程序的代码，您可以使用 javascript 的“Function()”来重新处理已序列化为字符串的事件处理程序。

可能的问题：“new Function()”的上下文始终是窗口上下文，所以你重新水合的事件处理程序将打破闭包（如果你正在使用闭包）。

可能的问题：将字符串作为函数运行是很危险的。你想要“alert('goodness')”，但黑客用“alert('evil')”代替。

```
// bind an event listener that was serialized to a string
var myStringFn="alert('aaa')";
stage.get('#logo').on('click', new Function("event", myStringFn) ); 
```

# linux - 如何在名称包含另一个字符串且在 Linux 中最近 7 天创建的文件中搜索字符串？

> ID：15446651
> 
> 赞同：1
> 
> 时间：2013-03-16T07:17:42.290
> 
> 标签：linux, string, grep, find

我想在名称包含另一个字符串并且在过去 7 天内创建的文件中搜索字符串，

我试过：

```
find . -type f -name '*name_string*' -mtime -7 | grep -ir '*mytext*' 
```

但是没用，

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:21:30.637

你真的很接近，但只是错过了`xargs`，否则输出`find`只是一堆用于 grep 的文本。

```
find . -type f -name '*name_string*' -mtime -7 | xargs grep -i 'mytext' 
```

通过使用，您将文件列表作为应该搜索字符串`xargs`的文件集传递。`grep``mytext`

顺便说一句，您可以只使用`mytext`而不是`*mytext*`

如果您想搜索多个模式`pattern1`，请在包含以下`pattern2`内容的文件名列表中说`name_string`：

```
find . -type f -name '*name_string*' -mtime -7 -print0 | while read -d $'\0' f; do
    grep -qi pattern1 "$f" && grep -li pattern2 "$f"
done 
```

这甚至适用于包含空格的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:21:51.037

不需要 xargs 或其他非标准扩展来具有良好的文件名处理：

```
find . -type f -name '*name_string*' -mtime -7 -exec grep -i 'mytext' {} \; 
```

# qt - 如何在下载 QWidget 时呈现渐进式 JPEG？

> ID：15446652
> 
> 赞同：6
> 
> 时间：2013-03-16T07:17:49.833
> 
> 标签：qt

使用 Qt，在 QWidget 上渲染完全下载的图像相当容易。但是，我想在获取部分下载的渐进式 jpg（或 png）时对其进行渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-26T06:41:41.037

我记得只有适合该目的的 GIF 格式。而且我看不到使用 QT 工具和库来做到这一点的方法。认为您需要找到将部分下载 (gif) 图像转换为 QPixmap 或 QImage 并显示它的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T18:44:33.917

您可以在 QGraphicsView 上渲染图像。为此，您可以编写一个 QGraphicsItem，它有两个 QImage 指针作为成员变量。其中之一可以用作缓冲区，以便可以将新来的字节写入缓冲区。另一个图像可用于渲染。paint() 函数应如下所示

```
painter->drawImage(0,0,*mRenderImage); 
```

# sql-server-2008 - 在 SQL Server 2008 的 Reporting Services 中创建报表

> ID：15446656
> 
> 赞同：0
> 
> 时间：2013-03-16T07:18:45.893
> 
> 标签：sql-server-2008, reporting-services

我想在 SQL Server 2008 的 Reporting Services 中创建一个报表，但我不知道该怎么做。我在 SQL Server Business Intelligence Development Studio 中创建了一个报表，但我不知道此报表与 SQL Server 2008 中的 Reporting Services 之间的关系。

如何使用 Reporting Services 并在其中创建报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:27:27.183

报表服务器是您存储报表的地方，以便人们可以集中运行它们。您可以将报表从 BIDS 部署到报表服务器。

您还可以登录报表服务器并运行名为报表生成器的工具来创建和部署报表，而无需使用 BIDS。

查看以下链接，了解如何开始使用报告服务：

[http://msdn.microsoft.com/en-us/library/bb522672(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb522672(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:26:34.950

由于您已经创建了报告，您可以直接将 .rdl 文件直接上传到报告服务。如果您不知道如何配置您的报告服务，请参阅[此处](http://msdn.microsoft.com/en-us/library/ms159868%28v=SQL.90%29.aspx)。您还可以使用报告服务管理 URL 来查看您上传的报告，也可以从那里打开以使用报告生成器直接编辑您的报告。

# linux - 共享 gui-less 主机上的 Selenium

> ID：15446661
> 
> 赞同：4
> 
> 时间：2013-03-16T07:19:20.010
> 
> 标签：linux, selenium, web-scraping

我需要在远程 linux 主机（Webfaction）上运行 Selenium（或其他可以处理 javascript 的网络抓取工具）。我正在使用 Python。

这可能吗？服务器没有 gui，所以我无法运行浏览器。或者，如果我使用 PyVirtualDisplay，我可以吗？

用 HtmlUnit 运行 Selenium 怎么样？

我曾尝试将 Selenium 与 Selenium/PyVirtualDisplay/ChromeDriver 一起使用，但不断收到各种错误消息。所以我想知道在我继续调试不可能的事情之前这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:53:30.520

如果你需要处理 JavaScript Selenium/Webdriver 似乎是一个不错的解决方案。

如果您需要无头运行，[GhostDriver](https://github.com/detro/ghostdriver)（而不是 ChromeDriver）是一个很好的选择。它基于[PhantomJS](http://phantomjs.org/)，一个基于 Webkit 的无头浏览器。它具有完整的 JS 支持。

# javascript - 如何将highcharts车速表保持在范围内

> ID：15446664
> 
> 赞同：0
> 
> 时间：2013-03-16T07:19:34.027
> 
> 标签：javascript, highcharts

我正在研究动态加载的速度计。除了我在 Ajax 调用和速度计方面遇到的麻烦之外，我还很难将“指针”保持在 (0-20) 范围内。当指针以错误的方向旋转超过 0 或 20 时，整数输出显示小于或大于 20 的数字。我想将它保留在 0 的右侧和 20 的左侧。我的代码：

```
<!DOCTYPE HTML>
<html>
        <head>
                <meta http-equiv="content-type" content="text/html; charset=UTF-8" >
                <title>Tribble Inc Sales Meter</title>

                <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
                <script type="text/javascript">
$(function () {

    var chart = new Highcharts.Chart({

            chart: {
                renderTo: 'container',
                type: 'gauge',
                plotBackgroundColor: null,
                plotBackgroundImage: null,
                plotBorderWidth: 0,
                plotShadow: false
            },

            title: {
                text: 'Sales-O-Meter'
            },

            pane: {
                startAngle: -150,
                endAngle: 150,
                background: [{
                    backgroundColor: {
                        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                        stops: [
                            [0, '#FFF'],
                            [1, '#333']
                        ]
                    },
                    borderWidth: 0,
                    outerRadius: '109%'
                }, {
                    backgroundColor: {
                        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                        stops: [
                            [0, '#333'],
                            [1, '#FFF']
                        ]
                    },
                    borderWidth: 1,
                    outerRadius: '107%'
                }, {
                    // default background
                }, {
                    backgroundColor: '#DDD',
                    borderWidth: 0,
                    outerRadius: '105%',
                    innerRadius: '103%'
                }]
            },

            // the value axis
            yAxis: {
                min: 0,
                max: 20,

                minorTickInterval: 'auto',
                minorTickWidth: 1,
                minorTickLength: 10,
                minorTickPosition: 'inside',
                minorTickColor: '#666',

                tickPixelInterval: 20,
                tickWidth: 2,
                tickPosition: 'inside',
                tickLength: 1,
                tickColor: '#666',
                labels: {
                    step: 2,
                    rotation: 'auto'
                },
                title: {
                    text: 'sales/min'
                },
                plotBands: [{
                    from: 0,
                    to: 4,
                    color: '#DF5353' // green
                }, {
                    from: 4,
                    to: 8,
                    color: '#DDDF0D' // yellow
                }, {
                    from: 8,
                    to: 20,
                    color: '#55BF3B' // red
                }]
            },

            series: [{
                name: 'Speed',
                data: [18],
                tooltip: {
                    valueSuffix: ' km/h'
                }
            }]

        },
        // Add some life
        function (chart) {
            setInterval(function () {
                var point = chart.series[0].points[0],
                    newVal,
                    inc = Math.floor((Math.random() - 1) * 20);

                newVal = point.y + inc;
                if (newVal < 0 || newVal > 20) {
                    newVal = point.y - inc;
                }

                point.update(newVal);

            }, 3000);
        });
});
                </script>
        </head>
        <body>
<script src="highcharts.js"></script>
<script src="highcharts-more.js"></script>
<!--<script src="exporting.js"></script>-->

<div id="container" style="width: 500px; height: 400px; margin: 0 auto"></div>

        </body>
</html> 
```

我不完全确定我做错了什么......也许 Math.floor() 函数已关闭，但我不这么认为。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:35:42.807

```
 inc = Math.floor((Math.random() - 1) * 20);

            newVal = point.y + inc;
            if (newVal < 0 || newVal > 20) {
                newVal = point.y - inc; 
```

此代码生成一个负 inc，将其添加到 point，使 point 为负，然后将其减去到 point，使 point 更正。它出错了，因为 inc 可以大于点。

您需要的算法取决于您希望图表如何变化。如果您希望针摆动，则生成一个较小的 inc，将其添加到点，然后对其进行边界检查。

```
 inc = (Math.random() * 2.0)-1.0;

            newVal = point.y + inc;
            if (newVal < 0 || newVal > 20) {
                newVal = point.y - inc; 
```

# c# - EPP 加 Excel 作为附件

> ID：15446666
> 
> 赞同：3
> 
> 时间：2013-03-16T07:19:52.970
> 
> 标签：c#, excel, email, attachment, epplus

嗨，我正在使用 EPPPlus 返回一个 excel 文件，并将相同的文件作为附件发送。我可以打开 excel 文件并获得附件，但是当我打开电子邮件附件时，我收到错误消息，提示文件已损坏。请查看下面的代码并建议我进行更改。

```
 MemoryStream outputStream = new MemoryStream();
                using (ExcelPackage pck = new ExcelPackage(outputStream))
                {
                    //Create the worksheet
                    ExcelWorksheet ws = pck.Workbook.Worksheets.Add("Demo");

                    //Load the datatable into the sheet, starting from cell A1\. Print the column names on row 1
                    ws.Cells["A1"].LoadFromDataTable(tbl, true);

                    //Format the header for column 1-3
                    using (ExcelRange rng = ws.Cells[1, 1, 1, tbl.Columns.Count])
                    {
                        rng.Style.Font.Bold = true;
                        rng.Style.Fill.PatternType = ExcelFillStyle.Solid;                      //Set Pattern for the background to Solid
                        rng.Style.Fill.BackgroundColor.SetColor(Color.FromArgb(79, 129, 189));  //Set color to dark blue
                        rng.Style.Font.Color.SetColor(Color.White);
                    }
                    //Example how to Format Column 1 as numeric 
                    using (ExcelRange col = ws.Cells[2, 1, 2 + tbl.Rows.Count, 1])
                    {
                        col.Style.Numberformat.Format = "#,##0.00";
                        col.Style.HorizontalAlignment = ExcelHorizontalAlignment.Right;
                    }
                    MailMessage mail = null;
                    try
                    {
                        mail = new MailMessage();
                        mail.From = new MailAddress("placescms@adidas-group.com", "Adidas SystemMail");
                        mail.To.Add(new MailAddress(emailAddress));
                        mail.Subject = "Store Finder Geocoding";
                        mail.IsBodyHtml = true;
                        string message = "";
                        message += ".LLHere is the attachment with list of stores and geocode values you requested." + "</br>";
                        mail.Body = message;
                        outputStream.Position = 0;
                        Attachment attachment = new Attachment(outputStream, "Geocoding.xlsx", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
                        mail.Attachments.Add(attachment);
                        mail.SubjectEncoding = System.Text.Encoding.UTF8;
                        mail.BodyEncoding = System.Text.Encoding.UTF8;
                        SmtpClient client = new SmtpClient("localhost");
                        client.Send(mail);
                    }
                    catch (Exception ex)
                    {
                        //throw ex;
                    }
                    Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                    Response.AddHeader("content-disposition", String.Format(CultureInfo.InvariantCulture, "attachment; filename={0}", "geo.xlsx"));
                    Response.BinaryWrite(pck.GetAsByteArray());
                    Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T16:22:56.787

我没有对此进行测试，但我的猜测是您需要`ExcelPackage`在创建 Outlook 附件之前保存。就像是：

```
// ...
mail.Body = message;

pck.Save();

outputStream.Position = 0;
Attachment attachment = new Attachment(outputStream, "Geocoding.xlsx", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
mail.Attachments.Add(attachment);
// ... 
```

因为它永远不会被保存，所以它不会向输出流写入任何内容。空流会导致`xlsx`文件格式不正确。

# html - 有没有办法设置一个值像你一样使用 ajax 调用 ?

> ID：15446671
> 
> 赞同：1
> 
> 时间：2013-03-16T07:20:32.197
> 
> 标签：html, ajax

我正在尝试通过一些 ajax 调用从数据库返回数据，在 HTML 页面上实现一些保存/加载功能。通过让我的 PHP 文件返回数据，可以很容易地更改选择下拉菜单的值......

```
//retrieve data
$sql = "SELECT Description
        FROM WorkSel1
        WHERE (AssignedEmp='$empname')";

$rs = odbc_exec($connection, $sql);

while(odbc_fetch_row($rs)) {
    $data= odbc_result($rs, 'Description');
    printf("<option value='%s'>%s</option></div>",$data,$data);
} 
```

这很容易工作，因为我可以发回一些新的下拉选择。但是，当我有类似的东西时

```
<input type='text' id='descript1'...></input> 
```

有没有办法使用 printf(...) 调用来更改/设置它的值，就像在这里完成的那样？

只是为了记录，ajax调用看起来像这样......

```
function loadDescript(strURL) {    
var req = getXMLHTTP();
if (req) {
  req.onreadystatechange = function() {
    if (req.readyState == 4) {
      // only if "OK"
      if (req.status == 200) {            
        document.getElementById('descript1').innerHTML=req.responseText;            
      } else {
        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
      }
    }       
  }     
  req.open("POST", strURL, true);
  req.send(null);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:26:02.990

没有必要

```
printf("<option value='%s'>%s</option></div>",$data,$data); 
```

只需像这样呼应您的价值：

```
echo $data; 
```

然后在您的通话成功事件中执行以下操作：

```
document.getElementById('descript1').value = req.responseText; 
```

# jquery - 在 JavaScript 中加载 *.cshtml 页面

> ID：15446672
> 
> 赞同：6
> 
> 时间：2013-03-16T07:20:58.950
> 
> 标签：jquery, asp.net-mvc, razor, jquery-events

`*.cshtml`单击链接后，我必须在布局页面中加载部分页面。如何在 JavaScript/jQuery 或 Razor/MVC 中完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T07:39:36.370

如果您使用 Partial with Child Action

例子

```
[ChildActionOnly]
ActionResult _Partial()
{

  return PartialView();
} 
```

那么最简单的方法是`divPartial`在布局中指定一个 div ( )

```
<div id="divPartial"></div> 
```

在您的 View、href 事件中，并使用 JQuery 加载方法。

```
<a href="#" id="aLink">click me</a>

<script>
$(document).ready(function() {
  $('#aLink').click(function() {
      $('#divPartial').load('@Url.ActionLink("_Partial","Controller")');
  });
});

</script> 
```

# vb.net - 将两列值添加到 vb.net 中的列表框

> ID：15446674
> 
> 赞同：0
> 
> 时间：2013-03-16T07:21:20.880
> 
> 标签：vb.net

我有一个名为 users 的表，其中包含以下列

```
User_id,user_name,user_pwd,First_Name,Middle_Name,Last_Name and user_type. 
```

我有一个名为 dst 的数据集，并在数据集中创建了一个名为 user 的表。现在我想用表用户中每一行的 ,`user_Name`填充列表框。`First_Name``Last_name`

我可以一次添加一个列值，但不知道如何将每行的多个列值添加到列表框

```
Dim dt As DataTable = Dst.Tables("user")

For Each row As DataRow In dt.Rows
    lstUsers.Items.Add(row("User_Name"))
Next 
```

上面的代码完美运行，但我还想同时将 First_name 和 last_name 添加到列表框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:38:37.690

使用与您相同的方法，但将所需的所有值放在一个字符串中。

```
Dim dt As DataTable = Dst.Tables("user")

For Each row As DataRow In dt.Rows
    Dim sItemTemp as String
    sItemTemp = String.Format("{0},{1},{2}", row("User_Name"), row("First_Name"), row("Last_Name"))
    lstUsers.Items.Add(sItemTemp)
Next 
```

`String.Format()`函数将调用`.ToString()`所有参数。

在这种情况下，如果`row(ColumnName)`是`NULL value`则只`.ToString()`返回空字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T14:12:08.683

我可以建议您使用 ListView 控件而不是 Listbox 吗？

如果您进行切换，这里有一个示例子例程，您可以使用它来填充您说想要的数据。以你喜欢的方式调整它；有很大的改进空间，但你明白了一般的想法：

```
Public Sub FillUserListView(lstUsers As ListView, Dst As DataSet)

    Dim columnsWanted As List(Of String) = New List(Of String)({"User_Name", "First_Name", "Last_Name"})
    Dim dt As DataTable = Dst.Tables("user")
    Dim columns As Integer = 0
    Dim totalColumns = 0
    Dim rows As Integer = dt.Rows.Count

    'Set the column titles
    For Each column As DataColumn In dt.Columns
        If columnsWanted.Contains(column.ColumnName) Then
            lstUsers.Columns.Add(column.ColumnName)
            columns = columns + 1
        End If
        totalColumns = totalColumns + 1
    Next

    Dim rowObjects(columns - 1) As ListViewItem
    Dim actualColumn As Integer = 0

    'Load up the rows of actual data into the ListView
    For row = 0 To rows - 1
        For column = 0 To totalColumns - 1
            If columnsWanted.Contains(dt.Columns(column).ColumnName) Then

                If actualColumn = 0 Then
                    rowObjects(row) = New ListViewItem()
                    rowObjects(row).SubItems(actualColumn).Text = dt.Rows(row).Item(actualColumn)

                Else
                    rowObjects(row).SubItems.Add(dt.Rows(row).Item(actualColumn))
                End If

                lstUsers.Columns.Item(actualColumn).Width = -2  'Set auto-width

                actualColumn = actualColumn + 1
            End If
        Next

        lstUsers.Items.Add(rowObjects(row))
    Next

    lstUsers.View = View.Details 'Causes each item to appear on a separate line arranged in columns
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T01:39:48.553

您有 2 个选择：

1.  使用列表框：

要使用 ListBox，请将字体设置为像 courier new 一样的固定宽度（以便列对齐），然后添加如下项目：

```
For Each row As DataRow In dt.Rows
    lstUsers.Items.Add(RPAD(row("User_Name"),16) & RPAD(row("First_Name"),16) & RPAD(row("Last_Name"),16))
Next 
```

RPAD 函数定义如下：

```
Function RPAD(a As Object, LENGTH As Object) As String
    Dim X As Object
    X = Len(a)
    If (X >= LENGTH) Then
        RPAD = a : Exit Function
    End If
    RPAD = a & Space(LENGTH - X)
End Function 
```

根据您的情况调整 LENGTH 参数。为至少一个空间再添加一个。此解决方案不太理想，因为您必须对列宽进行硬编码。

2.  使用 DataGridView 控件而不是 ListBox。这确实是最好的选择，如果您需要，您甚至可以通过设置选择整行的选项并将 CellBorderStyle 设置为 SingleHorizo​​ntal 使其表现得像 ListBox。在设计器中定义列，但无需设置宽度 - 列可以自动调整大小，我在下面的代码中设置了该选项。如果您仍然喜欢设置宽度，请注释掉 AutoSizeColumnsMode 行。

设置网格和添加行的代码如下所示：

```
 g.Rows.Clear() ' some of the below options are also cleared, so we set them again
    g.AutoSizeColumnsMode = DataGridViewAutoSizeColumnMode.AllCells
    g.CellBorderStyle = DataGridViewCellBorderStyle.SingleHorizontal
    g.SelectionMode = DataGridViewSelectionMode.FullRowSelect
    g.AllowUserToAddRows = False
    g.AllowUserToDeleteRows = False
    g.AllowUserToOrderColumns = True
    For Each row As DataRow In dt.Rows
        g.Rows.Add(row("User_Name"), row("First_Name"), row("Last_Name"))
    Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-29T13:00:03.340

您现在可能已经解决了您的问题，但像我这样的其他用户可能会遇到问题。
上面给出的答案甚至对我有用，但我根据我想要的简单方式找到了相同的答案..

```
cmd = New SqlCommand("select User_Name, First_Name, Last_Name from User")
  Dim dr As SqlDataReader = cmd.ExecuteReader(YourConnectionString)

  If dr.HasRows Then
        Do While dr.Read
                        lst.Items.Add(dr.Item(0).ToString & " " & dr.Item(1).ToString & " " & dr.Item(2).ToString)
        Loop
  End If 
```

这对我有用，可能是错误的方式，但我发现它很简单:)

# javascript - 匿名和命名函数的第二个原型

> ID：15446676
> 
> 赞同：1
> 
> 时间：2013-03-16T07:21:24.740
> 
> 标签：javascript, prototypal-inheritance

请有人解释为什么 b.prototype.prototype undefined (not "Object {}") ？

```
a = function(){}
function b(){}

console.log(a.prototype)                        //Object {} 
console.log(b.prototype)                        //b {}
console.log(a.prototype.prototype)              //undefined 
console.log(b.prototype.prototype)              //undefined 
```

a > 对象{} > 未定义 - 好的

b > b{} > ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:58:09.633

主要是，您似乎对原型`b`似乎`b`再次出现的事实感到困惑 - 但事实并非如此。两个原型都是对象，因此它们自己没有原型。构造原型的“toString()”方法（或您使用的任何特定控制台用于显示此对象）的实现只是实现特定的，在这种情况下，它包括函数名称（如果有的话）在输出中。您可能会在不同的浏览器（例如 IE）中得到不同的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:40:45.347

它是未定义的，因为您没有为该属性分配任何东西，`prototype`也没有创建它。

```
a.prototype.prototype=a.prototype;
console.log(a.prototype.prototype)//{} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:42:45.680

为什么会`b.prototype.prototype`被定义？

```
var a = function () {};

a.prototype; // {}

function b () {}

b.prototype; // {} 
```

两个原型都没有称为原型的属性......
因此，要求对象的不存在属性会导致`undefined`.

控制台正在调用的事实`b.prototype` `"b{}"`并没有改变任何东西。只是说它是 named-funciton 的原型对象`b`，而不是像分配给的匿名函数`a`。

它仍然是一个空对象，没有原型。

# python - 关于类和初始化方法

> ID：15446682
> 
> 赞同：1
> 
> 时间：2013-03-16T07:22:08.657
> 
> 标签：python

几天前我刚刚开始编码，并且在 OOP 和类部分遇到了问题。我们总是需要一种`__init__`方法吗？如果没有，我们什么时候不需要它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:34:32.600

不，你不是被迫写一个。当您在初始化时实际设置变量及其值时，您只需要一个...

也就是说，在 99% 的时间里，你想要设置传递给你的变量，或者甚至是一些默认值......

```
class A(object):
    pass

class B(object):
    def __init__(self, foo):
        self.foo = foo

someA = A() #creates an object of type A, with no custom variables or methods
someB = B('bar') #creates an object of type B, in which foo is set 
```

注意，从对象继承称为新样式类，应该这样做。这不是强制性的...

# freepascal - 拉撒路（自由帕斯卡）。看似不必要的编译器警告

> ID：15446684
> 
> 赞同：1
> 
> 时间：2013-03-16T07:22:25.053
> 
> 标签：freepascal, lazarus

我是 Free Pascal 和 Lazarus 的新手。我正在测试新的“高级记录”功能并得到看起来是不必要的编译器警告。

代码很简单，只是用单一方法初始化数据字段的记录。就像是：

```
{$mode delphi}

type TTest =
  record
    a,b: double;
    procedure Init(x,y: double);
  end

procedure TTest.Init(x,y: double);
begin
  test.a := x;
  test.b := y;
end;

var t: TTest;
begin
  t.Init(0.1,0.2); 
```

显示的最后一行“t.Init()”总是会生成一个编译器警告“**变量“t”似乎没有被初始化**”。

好的，这只是警告，所以显然我可以忍受它，但我只是想确保这不是由于我的一些潜在的误解。

* * *

**编辑以添加新信息。**

重新方法与构造函数点。再看看这个，我很高兴 FPC 不允许构造函数进行记录。Delphi 有构造函数但没有析构函数，据我所知，构造函数（用于记录）绝对没有做任何方法不能做的事情。我是一个极简主义者，所以对我来说，没有任何意义的额外语法只做一些现有的语法。

特别是对于像这样的简单记录，声明它的行为（**var t: TTest**）完成了该记录所需的所有“构造”。其他任何东西（比如我的 Init）都只是设置值，它并没有构建任何东西。所以据我所见，构造函数不是答案，编译器只需要删除警告。

在研究这个问题时，我遇到了另一种经常使用的技术，即所谓的“工厂函数”。即记录**之外**的函数，例如：

```
function InitTTest(x,y: double): TTest;
begin
  Result.a := x;
  Result.b := y;
end; 
```

这种技术确实有效，并且消除了警告信息。但是我不喜欢这种方法，我不会使用它。高级记录没有类的继承和其他特性，封装就是它们的全部功能。所以我真的不喜欢像这样在唱片之外制作一个“工厂功能”。

请记住，以上只是一个“菜鸟”的意见，在这里做了一些研究来回答我自己的问题。因此，如果我对上述任何内容有误，我很高兴得到纠正。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:24:20.677

是的，这就是构造函数的用途，以下代码使用 FPC*主干*编译并且不产生警告：

```
{$mode delphi}

type TTest =
  record
    a,b: double;
    constructor Init(x,y: double);
  end;

constructor TTest.Init(x,y: double);
begin
  a := x;
  b := y;
end;

var t: TTest;
begin
  t.Init(0.1,0.2);
end. 
```

# php - 想象一下：无法打开文件

> ID：15446687
> 
> 赞同：9
> 
> 时间：2013-03-16T07:22:40.870
> 
> 标签：php, imagick

当简单地调用 Imagick 类时：

```
$image = new Imagick('/images/magick/atmsk.png'); 
```

我收到错误消息：

> 致命错误：未捕获的异常 'ImagickException' 和消息 '无法打开文件 `/images/magick/atmsk.png' @ png.c/ReadPNGImage/2889' in .../imag.php:4 堆栈跟踪：#0 。 ../imag.php(4): Imagick->__construct('/images/magick/...') #1 {main} 在 .../imag.php 中抛出

我已经根据此处的另一篇帖子检查了可用的内存，没关系！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-16T07:30:32.013

使用图像的完整路径，例如：

```
$image = new Imagick($_SERVER['DOCUMENT_ROOT'] . '/images/magick/atmsk.png'); 
```

# blogger - Blogger atom 提要不会返回所有数据。如何处理？

> ID：15446688
> 
> 赞同：0
> 
> 时间：2013-03-16T07:22:52.000
> 
> 标签：blogger

对此 url 的 GET 请求仅返回 120 个帖子中的 27 个。我尝试了其他各种博客，但得到了类似的结果。使用博主博客的提要是否无法检索所有帖子？

```
http://www.blogger.com/feeds/blogID/posts/default 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:22:54.870

The default url fetches only 25-27..

Try this to get 1st to get 500 posts

[http://www.BLOG.blogspot.com/atom.xml?redirect=false&start-index=1&max-results=500](http://www.BLOG.blogspot.com/atom.xml?redirect=false&start-index=1&max-results=500)

for next 500 posts

[http://www.BLOG.blogspot.com/atom.xml?redirect=false&start-index=501&max-results=500](http://www.BLOG.blogspot.com/atom.xml?redirect=false&start-index=501&max-results=500)

and so on

# java - System.in.read() 有什么用？

> ID：15446689
> 
> 赞同：18
> 
> 时间：2013-03-16T07:23:03.247
> 
> 标签：java

`System.in.read()`在java中有什么用？
请解释一下。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-12-06T17:49:40.350

**迟到两年半总比没有好，对吧？**

`int System.in.read()`从输入流中读取数据的下一个字节。但我相信你已经知道了，因为查找起来很简单。所以，你可能要问的是：

*   `int`当文档说它读取 a 时，为什么要声明它返回a `byte`？

*   为什么它似乎返回垃圾？（我输入`'9'`，但它返回`57`。）

**它返回一个，`int`**因为除了一个字节的所有可能值之外，它还需要能够返回一个额外的值来指示流结束。因此，它必须返回一个可以表达比`byte`can 更多的值的类型。

^(注意：他们本可以把它做成 a `short`，但他们选择了`int`，可能是作为对 C 具有历史意义的帽子的一角，它的`getc()`函数也返回 a `int`，但更重要`short`的是因为使用起来有点麻烦，（该语言提供无法指定`short`文字，因此您必须指定`int`文字并将其强制转换为`short`,) 加上在某些架构`int`上比`short`.)

**它似乎返回垃圾**，因为当您将字符视为整数时，您正在查看的是该字符的 ASCII ^((*))值。因此，“9”显示为 57。但是如果将其转换为角色，则会得到“9”，所以一切都很好。

^(可以这样想：如果您输入字符 '9'，期望`System.in.read()`返回数字 9 是荒谬的，因为如果您输入了 an ，您希望它返回什么数字`'a'`？显然，字符必须映射到数字。ASCII ^((*))是一种将字符映射到数字的系统。在这个系统中，字符“9”映射到数字 57，而不是数字 9。)

(*) 不一定是 ASCII；可能是其他编码，例如 UTF-16；但在绝大多数编码中，当然在所有流行的编码中，前 127 个值与 ASCII 相同。这包括所有英文字母数字字符和流行符号。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-16T07:26:40.873

可能这个例子会对你有所帮助。

```
import java.io.IOException;

public class MainClass {

    public static void main(String[] args) {
        int inChar;
        System.out.println("Enter a Character:");
        try {
            inChar = System.in.read();
            System.out.print("You entered ");
            System.out.println(inChar);
        }
        catch (IOException e){
            System.out.println("Error reading from user");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-16T07:37:27.507

`System`是`java.lang`包中的最后一个类

来自 api 源代码的代码示例

```
public final class System {

   /**
     * The "standard" input stream. This stream is already
     * open and ready to supply input data. Typically this stream
     * corresponds to keyboard input or another input source specified by
     * the host environment or user.
     */
    public final static InputStream in = nullInputStream();

} 
```

`read()`是抽象类的抽象方法`InputStream`

```
 /**
     * Reads the next byte of data from the input stream. The value byte is
     * returned as an <code>int</code> in the range <code>0</code> to
     * <code>255</code>. If no byte is available because the end of the stream
     * has been reached, the value <code>-1</code> is returned. This method
     * blocks until input data is available, the end of the stream is detected,
     * or an exception is thrown.
     *
     * <p> A subclass must provide an implementation of this method.
     *
     * @return     the next byte of data, or <code>-1</code> if the end of the
     *             stream is reached.
     * @exception  IOException  if an I/O error occurs.
     */
    public abstract int read() throws IOException; 
```

简而言之，来自 api：

> 从输入流中读取一些字节并将它们存储到缓冲区数组 b. 实际读取的字节数以整数形式返回。在输入数据可用、检测到文件结尾或引发异常之前，此方法会一直阻塞。

来自[InputStream.html#read()](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-04T20:56:11.407

只是为了补充接受的答案，您也可以`System.out.read()`这样使用：

```
class Example {
    public static void main(String args[])
        throws java.io.IOException { // This works! No need to use try{// ...}catch(IOException ex){// ...}         

        System.out.println("Type a letter: ");
        char letter = (char) System.in.read();
        System.out.println("You typed the letter " + letter);
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-04T06:30:28.263

```
import java.io.IOException;

class ExamTest{

    public static void main(String args[]) throws IOException{
        int sn=System.in.read();
        System.out.println(sn);
    }
} 
```

如果要获取字符输入，则必须像这样进行转换：`char sn=(char) System.in.read()`

值 byte 以 int 形式返回，范围为 0 到 255。但是，与其他语言的方法不同，它`System.in.read()`一次只读取一个字节。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-16T07:26:07.730

[`System.in.read()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)从[标准输入](http://www.linfo.org/standard_input.html)读取。

标准输入可用于在控制台环境中从用户那里获取输入，但由于此类用户界面没有编辑功能，因此标准输入的交互式使用仅限于教授编程的课程。

标准输入的大多数生产用途是在设计用于在 Unix 命令行[管道](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)中工作的程序中。在这样的程序中，程序正在处理的有效负载来自标准输入，程序的结果被写入标准输出。在这种情况下，标准输入永远不会由用户直接编写，它是另一个程序的重定向输出或文件的内容。

一个典型的管道如下所示：

```
# list files and directories ordered by increasing size
du -s * | sort -n 
```

[`sort`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://linux.die.net/man/1/sort&ei=xiBEUf6gB8nMPcH9gYAK&usg=AFQjCNHmVN997nPl4AWwzIC4P_4fCswc9g)从标准输入读取它的数据，这实际上是[`du`](http://linux.die.net/man/1/du)命令的输出。排序后的数据被写入 的标准输出`sort`，默认情况下最终在控制台上，并且可以轻松地重定向到文件或另一个命令。

因此，标准输入在 Java 中相对很少使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-16T13:05:13.837

这个例子应该有帮助吗？除了评论，当然>:)

警告：在本段/帖子中，人是一个被过度使用的常用词

总的来说我推荐使用这个`Scanner`类，因为你可以输入大句子，我不完全确定`System.in.read`有这些方面。如果可能，请纠正我。

```
public class InputApp {

// Don't worry, passing in args in the main method as one of the arguments isn't required MAN

    public static void main(String[] argumentalManWithAManDisorder){
        char inputManAger;

        System.out.println("Input Some Crap Man: ");
        try{
            // If you forget to cast char you will FAIL YOUR TASK MAN
            inputManAger = (char) System.in.read();
            System.out.print("You entererd " + inputManAger + " MAN");
        }
        catch(Exception e){
            System.out.println("ELEMENTARY SCHOOL MAN");
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-18T10:48:39.433

System.in.read() 是 System.in 类的读取输入方法，它是“标准输入文件”或传统操作系统中的 0。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-16T07:27:41.867

它允许您从标准输入（主要是控制台）读取。[这个 SO question](https://stackoverflow.com/questions/5488072/reading-in-from-system-in-java)可能会对您有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-30T08:43:10.967

system.in.read() 方法读取一个字节并以整数形式返回，但如果您输入 1 到 9 之间的 no ，它将返回 48+ 个值，因为在 ascii 代码表中，ascii 值 1-9 是 48-57 。希望，它会有所帮助。

# codeigniter - windows平台下codeigniter导出csv

> ID：15446691
> 
> 赞同：1
> 
> 时间：2013-03-16T07:23:48.090
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

```
function export_csv(){
        $this->load->helper('csv');
        if(isset($_POST['term_val'])&&$_POST['term_val']<>'0'){

        $term   = $this->Search_model->get_term($_POST['term_val']);
        $term   = json_decode($term);
        }else{
        $term=array();
        }

     $orders    = $this->Order_model->get_orders_export($term,'place_order');

    if(count($orders)>0){
    foreach($orders as $order){
    $sublist['order_id']= $order->order_number;
    $sublist['ship_to']= $order->ship_firstname.' '.$order->ship_lastname;
    $sublist['order_date']= date('d-m-Y H:i:s',strtotime($order->ordered_on));
    $sublist['email_to']= $order->ship_email;
    $sublist['city']= $order->ship_city;
    $sublist['pincode']= $order->ship_zip;
    $sublist['ship_address']= $order->ship_address1.' , '.$order->ship_address2;
    $sublist['phone']= $order->ship_phone;
        $sublist['product_name']= $order->name;
    $sublist['product_id']= $order->product_id;
    $sublist['status']= $order->status;
    $sublist1[]= $sublist;
    }
    $delimiter = ";";
    $newline = "\r\n";
    $heading[]=array('order_id'=>'Order Id','ship_to'=>'Ship To','order_date'=>'Order Date','email_to'=>'Email To',
    'city'=>'City','pincode'=>'Pincode','ship_address'=>'Ship Address','phone'=>'Phone','product_name'=>'Product Name','product_id'=>'Product ID','status'=>'status');

    $get_csv=array_to_csv1($sublist1,$heading,$delimiter, $newline); 
    ob_start();
  $filename = "orders_" . date('Ymd') . ".xls";
  header("Content-Disposition: attachment; filename=\"$filename\"");
  header("Content-Type: application/vnd.ms-excel");

//  header("Content-type: text/x-csv");
    //header("Content-type: text/csv");
//  header("Content-type: application/csv");
//  header("Content-Disposition: attachment; filename=orders".date('d-M-Y').".csv");    
    print_r($get_csv); 
    }else{

    redirect($this->config->item('admin_folder').'/orders');    
    }
    } 
```

![在此处输入图像描述](../Images/ee057dd6961773fb10786a8c6ebc24cc.png)

上面的代码是导出 CSV 的控制器功能，图像是导出时发生的动作。

**问题**：实际上，如果我们使用 codeigniter 导出 csv，它会显示如上所示的图像。如果我们使用 codeigniter 按下 export csv 它不应该显示该图像，它应该直接将 csv 导出到 excel 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:50:27.070

如果您想生成 csv 格式的报告，使用 codeigniter 非常容易。你的模型函数

```
function index(){
   return $query = $this->db->get('my_table');
   //Here you should note i am returning 
   //the query object instead of 
   //$query->result() or $query->result_array()
} 
```

现在在控制器中

```
function get_report(){
  $this->load->model('my_model');
  $this->load->dbutil();
  $this->load->helper('file');
  // get the object
  $report = $this->my_model->index();
  //pass it to db utility function
  $new_report = $this->dbutil->csv_from_result($report);
 //Now use it to write file. write_file helper function will do it
 write_file('csv_file.csv',$new_report);
 //Done
} 
```

Codeigntier 中的所有内容都不需要外部设备。上述方法将强制下载文件而不是打开文件。干杯! 如果你想写 xml 文件也很容易。只需使用 dbutil 的 xml_from_result() 方法并使用 write_file('xml_file.xml,$new_report) 访问这些链接会有所帮助。

[数据库实用程序类](http://codeigniter.com/user_guide/database/utilities.html)

和

[文件助手](http://codeigniter.com/user_guide/helpers/file_helper.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-20T10:39:26.290

```
***> if you are trying to generate reports in csv format then it will quite
> easy with codeigniter.*** 
```

**将此代码放在您的控制器中**

```
function get_report()
    {
        $this->load->model('Main_Model');
        $this->load->dbutil();
        $this->load->helper('file');
        /* get the object   */
        $report = $this->Main_Model->print_report();
        $delimiter = ",";
        $newline = "\r\n";
        $new_report = $this->dbutil->csv_from_result($report, $delimiter, $newline);
        write_file( 'application/third_party/file.csv', $new_report);
        $this->load->view('report_success.php');
   } 
```

* * *

**将此代码放入模型**

```
public function print_report()
    {
        return $query = $this->db->query("SELECT * FROM Table_name");
    } 
```

* * *

report_success.php 只是成功通知。

您的报告正在导出。谢谢

* * *

最后生成您的“file.csv”。它基本上存储在物理存储中。在 CodeIgniter/application/third-party/file.csv

* * *

有用。它会帮助你。

# jquery - 如何将多选选项更改为下拉清单

> ID：15446692
> 
> 赞同：0
> 
> 时间：2013-03-16T07:23:52.857
> 
> 标签：jquery, html, drop-down-menu

我有一个多选选项，例如。

```
<div class="Selectoptions">
    <form>
        <select id="selet-please">
            <option>1.Parking</option>
            <option>2.Water</option>
            <option>3.School</option>
            <option>4.Garden</option>
        </select>
    </form>
</div> 
```

它实际上是多选。但我需要选择列表中的复选框。使用 Jquery 或 java 脚本。

# android - 在我的安卓应用中播放 IMDB 视频？

> ID：15446695
> 
> 赞同：5
> 
> 时间：2013-03-16T07:24:21.513
> 
> 标签：android, api, stream, playback, imdb

是否可以在我的 android 应用程序上获取 url 并流式传输和播放电影预告片？我发现一些有用的材料可以帮助我在 youtube 上播放，但由于某种原因 youtube 在我的国家被禁止。imdb 是否提供任何 API 来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:47:19.503

我不相信有一个 API 可以让您直接检索预告片 URL；但是，您可以使用[http://imdbapi.org/](http://imdbapi.org/)搜索您的电影并获取 imdb_id 字段。

一旦你有了 imdb_id，你就可以在你的应用程序中有一个 webview 来加载页面[http://m.imdb.com/title/imdb_id/videogallery](http://m.imdb.com/title/imdb_id/videogallery)，它会播放电影的预告片。

# java - 将遍历限制在 neo4j 中的特定深度

> ID：15446698
> 
> 赞同：2
> 
> 时间：2013-03-16T07:24:48.060
> 
> 标签：java, neo4j

考虑代码

```
int numberOfFriends = 0;
String output = neoNode.getProperty( "name" ) + "'s friends:\n";
Traverser friendsTraverser = getFriends( neoNode );
for ( Path friendPath : friendsTraverser )
{
output += "At depth " + friendPath.length() + " => "
          + friendPath.endNode()
                  .getProperty( "name" ) + "\n";
numberOfFriends++;
}
output += "Number of friends found: " + numberOfFriends + "\n"; 
```

这将为我们提供以下输出：

```
Thomas Anderson's friends:
At depth 1 => Trinity
At depth 1 => Morpheus
At depth 2 => Cypher
At depth 3 => Agent Smith
Number of friends found: 4 
```

我想将搜索限制在深度 2。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T14:16:26.303

利用

```
Traversal.description().evaluator(Evaluators.toDepth(2)) 
```

# ios - 如何在动画期间获取 frame.width

> ID：15446708
> 
> 赞同：2
> 
> 时间：2013-03-16T07:25:47.870
> 
> 标签：ios, animation

我使用 UISwipeGestureRecognizer 注册我的视图以识别向左或向右滑动。响应操作为：

```
[UIView beginAnimations:@"slide" context:nil];
[UIView setAnimationDuration:4];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

CGRect frame = self.sliderImageView.frame;
if (recognizer.direction == UISwipeGestureRecognizerDirectionLeft )
{
    frame.size.width = 0;
    self.sliderImageView.frame = frame;
}
else if (recognizer.direction == UISwipeGestureRecognizerDirectionRight)
{
    frame.size.width = 199;
    self.sliderImageView.frame = frame;
}

[UIView commitAnimations]; 
```

如果有可能获得`self.sliderImageView.frame.width`显示视图的？因为我在使用动画期间尝试这样做的`NSLog(@"%f", self.sliderImageView.frame.size.width)`是 0 或 199。那么有什么方法可以得到`frame.width`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:43:51.820

在动画期间，您可以使用视图层的表示层访问属性的当前值。在你的项目中包含 QuartzCore 框架，导入 QuartzCore 头文件，然后使用这个：

```
self.sliderImageView.layer.presentationLayer.frame.size.width 
```

参考[这里](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/presentationLayer)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:31:56.593

你会得到这样的：

```
NSLog(@"%f",self.sliderImageView.frame.size.width); 
```

# ruby-on-rails - 在路由文件中声明的资源上没有路由匹配 [GET]

> ID：15446710
> 
> 赞同：1
> 
> 时间：2013-03-16T07:26:01.887
> 
> 标签：ruby-on-rails, routes

当我在视图中单击以下代码生成的链接时：

```
<%= link_to "Colleague", collaborators_path(member2_id: user.id,), :method => :post %> 
```

我收到以下错误消息：

```
No route matches [GET] "/collaborators" 
```

但是，我的路由文件中有以下行：

```
resources :collaborators, only: [:create, :destroy] 
```

我在 collaborators_controller 中有以下定义：

```
 @collaboration = current_user.collaborations.build(:member2_id => params[:member2_id])
      if @collaboration.save
        flash[:notice] = "Added collaborator."
        redirect_to root_url
      else
        flash[:error] = "Unable to add collaborator."
        redirect_to root_url
      end 
```

那么创建协作的路径不应该被路由器找到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:27:55.080

这是因为您正在使用`only: [:create, :destroy]`. 您需要包含`:index`在该数组中才能有一条`GET /collaborators`路线。请参阅[有关路由的 Rails 指南](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

为了使用与 的链接`:method => :post`，您需要使用 Rails 3 的[不显眼的 Javascript](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:35:33.660

看起来`:method => :post`因为您正在使用链接而被忽略。提交表单时通常使用 POST 方法。实际上，POST 方法用于将数据从浏览器发送到服务器，以便将新记录添加到数据库中。有关更多信息，请参阅[有关 HTTP 方法的 Wikipedia 文章，以及](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)[有关路由的 Rails 指南](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)。

如果您尝试将某人添加为同事（就像 Twitter 的“关注”操作或 Facebook 的“赞”），那么您需要创建一个带有隐藏字段中用户 ID 的小表单。

**TL;DR** : 使用表单创建关系，因为链接不起作用:)

# android - 我怎么知道android应用小部件是否在后台

> ID：15446717
> 
> 赞同：2
> 
> 时间：2013-03-16T07:26:39.040
> 
> 标签：android, android-appwidget

我不想在我的应用小部件进入后台时更新它的 UI（你看不到它），我怎么知道应用小部件在后台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:38:08.520

您无法检测您的主屏幕小部件当前是否可见。有一个开放的错误报告要求这个[here](https://code.google.com/p/android/issues/detail?id=5529&q=reporter%3amark.r.baird&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)。

充其量，您可以检查主屏幕（或一般的任何启动器）是否可见：

```
public boolean isHomeShowing(){
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    ArrayList<string> homeList = new ArrayList<string>();
    for(ResolveInfo info : this.getPackageManager().queryIntentActivities(intent, 0)){
        homeList.add(info.activityInfo.packageName);
    }

    ActivityManager am = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
        for (RunningTaskInfo t : am.getRunningTasks(1)) {
            if (t != null && t.numRunning > 0) {
                ComponentName cn = t.baseActivity;
                if (cn == null)
                   continue;
                else
                   if (homeList.contains(cn.getPackageName())) return true;
            }
        }
    return false;
} 
```

# c# - 在 C#.net 中的 Winforms 之间传递值

> ID：15446720
> 
> 赞同：2
> 
> 时间：2013-03-16T07:26:47.383
> 
> 标签：c#, .net, winforms

我正在尝试将一个值返回给父窗体，下面是我为此使用的代码，它工作正常，直到开始在面板控件中加载子窗体以避免弹出窗口。

包含面板的主窗体中的代码

```
MainMovement child = new MainMovement(new_dat, required_time, number);
child.TopLevel = false;
this.pnlmain.Controls.Add(child);
child.Show();
child.BringToFront();
///Obtaining value back from the child form
string updatingc = child.updatestatus; //This is not working, I am proceeding with some more functions depending on this value, but code does not work here after 
```

子窗体有一个作为 updatestatus 的公共值，它在关闭子窗体之前设置该值。

请告知如何获得此值。我相信这与更改`child.ShowDialog()`为`child.Show()`. （为了将表单加载到面板中，我必须更改它，在此之前它工作正常）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:30:18.070

您可以通过构造函数将主窗体的对象传递给子窗体。如果您传递您的对象，您将可以访问您孩子的所有父表单方法。您可以调用主类的任何公共方法来更新您的值。

```
MainMovement child = new MainMovement(this,new_dat, required_time, number);
child.TopLevel = false;
this.pnlmain.Controls.Add(child);
child.ShowDialog();
child.BringToFront(); 
```

在您的主要形式中放置一种公共方法，

```
Public void UpdateValue(String pString)
{
      // Update your value
} 
```

在您的子表单中，您必须使用全局对象来捕捉“this”。

```
private oMainForm as MainForm

public void MainMovement(MainForm pObject,String new_dat, String required_time, Int number)
{
     oMainForm = pObject; 
     // Your Code
} 
```

现在您可以简单地从子表单中调用您的“ **UpdateValue ”方法。**

```
oMainForm.UpdateValue("Updated String"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:50:54.040

问题是在继续之前`.ShowDialog()`等待`DialogResult`，而`Show()`只是显示表单并继续。很难说不知道您的子表单是如何工作的，但我的猜测是`updatestatus`您的子表单中的任何更新或设置在您的代码到达该行之前都不会更新。

一种可能的解决方案涉及对代码进行重大重构。您可以向 MainMovement 表单添加一个在`updatestatus`更改时触发的事件。
*请注意，我将您更改`updatestatus`为`UpdateStatus`并将其变成了属性*

```
public MainMovement : Form
{
    public event EventHandler Updated;
    private void OnUpdateStatus()
    {
        if (Updated != null)
        {
            Updated(this, new EventArgs());
        }
    }

    private String updatestatus;
    public String UpdateStatus
    {
        get { return updatestatus; }
        private set 
        {
            updatestatus = value;
            OnUpdateStatus();
        }
    }

    // rest of your child form code 
}

public ParentForm : Form
{
    public void MethodInYourExample()
    {
        // other code?
        MainMovement child = new MainMovement(new_dat, required_time, number);
        child.Updated += ChildUpdated;
        child.TopLevel = false;
        this.pnlmain.Controls.Add(child);
        child.Show();
        child.BringToFront();
    }

    void ChildUpdated(object sender, EventArgs e)
    {
        var child = sender as MainMovement;
        string updatingc = child.UpdateStatus;
        //rest of your code
    }

} 
```

# ios - 从 iOS 应用程序在默认提醒应用程序中添加任务

> ID：15446723
> 
> 赞同：-1
> 
> 时间：2013-03-16T07:27:16.093
> 
> 标签：ios

如何从 iOS 我开发的应用程序中添加提醒默认应用程序中的任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:32:15.307

是的，您可以`EventKit.framework`在 iOS 6 或更高版本中使用 API 访问 iOS 应用程序中的提醒。请参阅这些指向官方 iOS 文档的链接：

*   [http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingReminders/ReadingAndWritingReminders.html#//apple_ref/doc/uid/TP40009765-CH5-SW1](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingReminders/ReadingAndWritingReminders.html#//apple_ref/doc/uid/TP40009765-CH5-SW1)
*   [http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/cl/EKEventStore](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/cl/EKEventStore)

# asp.net - ListView 的图像列将空值传递给数据库

> ID：15446725
> 
> 赞同：0
> 
> 时间：2013-03-16T07:27:29.413
> 
> 标签：asp.net

我正在使用*control*`ListView`和`EntityDataSource`. 在MemberImage 列中的`InsertItemTemplate`are `Image`和Controls 中。`FileUpload`插入数据后，图像列在数据库中显示为空。

任何正确程序的方法将不胜感激。

我的代码片段如下所示：

```
<asp:ListView ID="IndividualListView" runat="server"  DataKeyNames="IndividualId" DataSourceID="IndividualDataSource"  InsertItemPosition="LastItem"

    oniteminserting="IndividualListView_ItemInserting"
    onselectedindexchanged="IndividualListView_SelectedIndexChanged">

    <InsertItemTemplate>     
        <td>   
            <asp:Button ID="InsertButton" runat="server" CommandName="Insert"
                Text="Insert" BorderStyle="Ridge" />

            <asp:Button ID="CancelButton" runat="server" CommandName="Cancel"
                Text="Clear" BorderStyle="Ridge" />    
        </td>
        <td>
            <asp:TextBox ID="IndividualIdTextBox" runat="server"
                Text='<%# Bind("IndividualId") %>' />    
        </td>    
        <td>                              
            <asp:Image ID="Image1" runat="server" ImageUrl='<%# Bind("MemberImage") %>'/><br />

            <asp:FileUpload ID="FileUpload1" runat="server" /><br />

            <asp:Label ID="Label1" runat="server" Text=""></asp:Label>

        </td>

     </InsertItemTemplate>    
 </asp:ListView>

 <asp:EntityDataSource ID="IndividualDataSource" runat="server"    
     ConnectionString="name=SheepGateEntities"    
     DefaultContainerName="SheepGateEntities" EnableDelete="True"  
     EnableInsert="True" EnableUpdate="True" EntitySetName="Individuals"    
     EntityTypeFilter="Individual" Include="Counsellings, Households, Services">    
 </asp:EntityDataSource> 
```

页面后面的代码如下：

```
protected void IndividualListView_ItemInserting(object sender, ListViewInsertEventArgs e)
{
    FUpload = (FileUpload)IndividualListView.InsertItem.FindControl("FileUpload1");
    FLabel = (Label)IndividualListView.InsertItem.FindControl("Label1");             

    try
    {                 
        FileUpload img = (FileUpload)FUpload;
        Byte[] imgByte = null;

        if (img.HasFile && img.PostedFile != null)
        {
            //To create a PostedFile

            HttpPostedFile File = FUpload.PostedFile; 
            imgByte = new Byte[File.ContentLength];

            //force the control to load data in array
            File.InputStream.Read(imgByte, 0, File.ContentLength);
        }
        e.Values.Add("MemberImage", FUpload.FileName);

    }
    catch
    {
        FLabel.BackColor.Equals("Red");
        FLabel.Text = "There was an error";
    }
} 
```

# visual-c++ - 链接错误 OpenCV 2.4+CUDA windows 7(x64) 命令行

> ID：15446730
> 
> 赞同：4
> 
> 时间：2013-03-16T07:27:49.727
> 
> 标签：visual-c++, opencv, command-line, cuda, windows-7-x64

我正在尝试编译一个同时使用 CUDA 和 OpenCV 的程序。我确信 OpenCV 的路径是正确的，因为用这个编译一个简单的 OpenCV 程序：

`cl /I"%OPENCV_DIR%\include" /LINK"%OPENCV_DIR%\x64\vc10\lib\opencv_core240.lib" "%OPENCV_DIR%\x64\vc10\lib\opencv_highgui240.lib" testCV.cpp`

它成功编译了程序。现在，当我尝试像这样使用 NVCC 进行编译时：

`nvcc testCuda.cu --cl-version 2010 --use-local-env -I"%OPENCV_DIR%\include" -L"%OPENCV_DIR%\x64\vc10\lib\opencv_core240.lib" "%OPENCV_DIR%\x64\vc10\lib\opencv_highgui240.lib"`

尝试链接时出现错误：

`error LNK2019: unresolved external symbol cvLoadImage referenced in function main a.exe : fatal error LNK1120: 1 unresolved externals`

使用 NVCC 编译时我遗漏了什么或做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T23:41:58.153

`-L`用于指定库**目录**，**而不是文件**。

您可能想要执行：

```
nvcc testCuda.cu --cl-version 2010 --use-local-env -I"%OPENCV_DIR%\include" -L"%OPENCV_DIR%\x64\vc10\lib" -lopencv_core240 -lopencv_highgui240 
```

如果这不起作用，请删除`-l`并添加其扩展名：

```
nvcc testCuda.cu --cl-version 2010 --use-local-env -I"%OPENCV_DIR%\include" -L"%OPENCV_DIR%\x64\vc10\lib" opencv_core240.lib opencv_highgui240.lib 
```

[曾几何时](http://code.google.com/p/cuda-grayscale/downloads/list)，当我们拥有 CUDA 2.x 和 OpenCV 2.1 时，我编写了一个**Makefile**来编译一个使用这两个框架的应用程序：

```
CXX=g++

CUDA_INSTALL_PATH=/usr/local/cuda
CFLAGS= -I. -I$(CUDA_INSTALL_PATH)/include -I/usr/include/opencv 
LDFLAGS= -L$(CUDA_INSTALL_PATH)/lib -lcudart -L/usr/lib -lcxcore -lcv -lhighgui -lcvaux -lml 

ifdef EMU
CUDAFLAGS+=-deviceemu
endif

all:
    $(CXX) $(CFLAGS) -c main.cpp -o main.o -m32 -arch i386
    nvcc $(CUDAFLAGS) -c kernel_gpu.cu -o kernel_gpu.o
    $(CXX) $(LDFLAGS) main.o kernel_gpu.o -o grayscale -arch i386

clean:
    rm -f *.o grayscale 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T03:28:36.160

可能`-L`像第一个一样在第二个库文件之前丢失？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T16:56:01.310

我只是能够通过在我的代码中添加一个 pragma 指令来链接到 Windows 上的 cuBLAS：

```
#pragma comment(lib,"cublas.lib") 
```

这也可能适用于 OpenCV。但是请注意，这是[不可移植](https://stackoverflow.com/questions/1685206/pragma-commentlib-xxx-lib-equivalent-under-linux)的。

# android - 下一个和上一个动画

> ID：15446737
> 
> 赞同：4
> 
> 时间：2013-03-16T07:28:05.917
> 
> 标签：android, animation, popupwindow, gestures

当用户选择列表中的项目时，我制作了一个`PopupWindow`弹出窗口。然后当他在弹出窗口上左右滑动时，数据（在弹出窗口中）分别更改为列表中的上一个和下一个项目。

而且我已经做到了，当用户向右滑动手指（“下一个”动作）时，当当前弹出窗口从屏幕右侧退出时，它看起来就像一个新的弹出窗口从左侧滑入。对于“上一个”动议，反之亦然。

但问题是，因为我为这两个动画制作了 2 种样式（从左到中，而从中到右，从右到中，而从中到左），并且`PopupWindow`s 在它的同时没有得到更新正在显示，当用户向右滑动（“下一个”）然后向左滑动（“上一个”）时，由于 2 个动画重叠，动画看起来不连贯。当再次反转滑动时也会发生同样的情况。

现在，如果我`update()`在更改动画后调用，那么它会再次滑入中间。那更糟。那么我能做些什么来实现我想要的行为吗？

谢谢。

**编辑：源代码**

这是我第一次用来显示弹出窗口的代码：

```
popup1 = new PopupWindow(popupLayout, popup_width, popup_height, true);
popup1.setAnimationStyle(R.style.AnimationPopup);
popup1.showAtLocation(this.findViewById(R.id.main_container), Gravity.CENTER, 0, 0); 
```

这是`next()`方法的代码：

```
if(popup2 != null) popup1 = popup2;
if(popup1 != null) {
    popup2 = new PopupWindow(popupLayout, popup_width, popup_height, true);
    popup2.setAnimationStyle(R.style.AnimationPopup);

    popup1.dismiss();
    popup2.showAtLocation(rootLayout, Gravity.CENTER, 0, 0);
} 
```

这是`prev()`方法的代码：

```
if(popup2 != null) popup1 = popup2;
if(popup1 != null) {
    popup2 = new PopupWindow(popupLayout, popup_width, popup_height, true);
    popup2.setAnimationStyle(R.style.AnimationPopupReverse);

    popup1.setAnimationStyle(R.style.AnimationPopupReverse);
    popup1.dismiss();

    popup2.showAtLocation(rootLayout, Gravity.CENTER, 0, 0);
} 
```

这就是Java代码的全部内容。这`AnimationPopup`是一个 XML，其中包含从右到中心滑动的简单*显示和从中心到左滑动动画的**隐藏*。和`AnimationPopupReverse`上面的动画相反。

我已经提供了我的代码的第一次尝试。在这里，更改的动画在显示更多弹出窗口*后*生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:40:45.803

`android:hardwareAccelerated="true"`如果您在应用程序标签下的清单中使用，所有动画看起来都更清晰。如果没有硬件加速，即使是常规的左右滑动动画也会显得断断续续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:22:57.897

一个简单的解决方案是：

1.  禁用滑动直到当前动画结束。
2.  使用`android:duration="@android:integer/config_mediumAnimTime"`使其非常标准和快速。

* * *

您还可以实现某种拖动：

捕捉触摸事件并相应地更改弹出窗口的位置。当用户移开手指时，要么发送滑动并显示下一个/上一个弹出窗口。这实际上会涉及一些挠头。

* * *

最好的办法是使用 ViewPager，它只显示具有所有滑动功能的弹出窗口：

例子：

```
yourViewPager.setAdapter(new PagerAdapter() {
    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        View view;
        //intialise view to a PopupWindow or some Layout with a PopupWindow in the location you want
        container.addView(view, 0);
        return view;
    }
    @Override
    public boolean isViewFromObject(View view, Object object) {
        return (view==object);
    }

    @Override
    public int getCount() {
        //return the count
    }
    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        container.removeView((View)object);
    }
    @Override
    public void finishUpdate(ViewGroup arg0) {
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(ViewGroup arg0) {
    }
}); 
```

# continuous-integration - 如何无缝自动集成前后端

> ID：15446743
> 
> 赞同：5
> 
> 时间：2013-03-16T07:28:52.547
> 
> 标签：continuous-integration, frontend, backend

由于Web应用程序的开发通常分为前端开发和后端开发，但是前端的一些代码在后端通常是相同的（ASP、PHP、JSP或其他服务器端模板）引擎包含大量由前端开发人员编写的 HTML），后端开发人员需要做的是将 HTML 代码合并到他们的 ASP、PHP、JSP 或其他服务器端模板中。

如果前端的开发在后端之前开始，它工作正常。但是当前端和后端同时开发时（总是这样），问题就来了。当前端发生变化时，后端开发人员需要不断地更改他的模板代码。

所以，**我的问题是**，有没有什么办法可以将 HTML 代码自动合并到后端模板中，让前端和后端的集成更加无缝和容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-02T08:44:01.860

我知道这有点老了，但我想为可能会看的人回答。

就我目前所见，我认为最好的办法是，始终，我*始终*强调，编写文档说明在两端之间传输信息的 I/O 格式。

如果您在前端和后端之间有更清晰的分离（使用 API），那么您可以指定一个准确说明输入和输出参数的文档。如果你的前端的一部分是由后端生成的（这不是一个很好的做法，但它往往会发生很多），那么你仍然会谈论到底应该在那里做什么，前端开发人员可以工作对此，后端开发人员只是在前端完成之前放置一个虚拟输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T07:42:06.063

好的，我会咬

问题是前端和后端之间的接口。为了确保服务器和客户端都保持一致的接口，双方都应该进行单元测试以确保接口也被卡住。

对接口的任何更改都会导致一端或两端的单元测试失败，但应该清楚如何修复它，因为当它修复后，测试将再次通过

我已经将这种方法与基于 python 的服务器一起使用，该服务器驱动一个胖 javascript 客户端，并在 javascript 端用 jsunit 编写测试。

希望这可以帮助

# dom - 为什么 Target 8 文件没有按照教程中的描述实现项目？

> ID：15446744
> 
> 赞同：1
> 
> 时间：2013-03-16T07:28:53.893
> 
> 标签：dom, element, dart, dart-webui, dart-editor

在[Target 8: Define a Custom DOM Tag](http://www.dartlang.org/docs/tutorials/custom-elements/)中，向读者介绍了可以通过扩展其他标签来创建的自定义 DOM 标签。在将文件列为“这些文件实现应用程序：”之前，描述了一个名为“x-converter”的示例的示例。

这三个文件是...

*   一个[drseuss.html](https://github.com/dart-lang/dart-tutorials-samples/blob/master/web/target08/drseuss/web/drseuss.html)文件（不知道为什么项目名称和 HTML 文件突然出现偏差，而不是之前教程中的匹配名称......），
*   一个[converter-element.html](https://github.com/dart-lang/dart-tutorials-samples/blob/master/web/target08/drseuss/web/converter-element.html)文件，
*   和一个[convertercomponent.dart](https://github.com/dart-lang/dart-tutorials-samples/blob/master/web/target08/drseuss/web/convertercomponent.dart)文件。

我尝试在最新的 Dart 编辑器中创建一个新的应用程序，并将默认的 HTML 文件内容替换为 drseuss.html 的内容，将默认的 dart 文件内容替换为 convertercomponent.dart 的内容，并添加了 converter-element.html 文件。

修复包含问题后（教程中的文件指的是 drseuss.css 而不是默认项目名称的 CSS 文件），我只在 Chromium 浏览器中看到以下内容。

![没有教程中显示的元素！](../Images/302a821e21f9f5fc1ffb36dc49beceae.png)

如您所见，教程中描述的元素（converter-element）没有出现。 **为什么为项目提供的文件不符合教程中显示的内容？**

作为参考，这是教程中显示的内容。

![在此处输入图像描述](../Images/5126a0f2f7118ed8b1d52efb5e54cef4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:00:07.497

Web UI 需要`build.dart`将各种组件编译成可执行输出 HTML+Dart 的脚本。

查看您引用的 github src 中的[父文件夹](https://github.com/dart-lang/dart-tutorials-samples/tree/master/web/target08/drseuss)，您将看到该`build.dart`脚本。

此外，您还需要`pubspec.yaml`来自该文件夹的文件，其中包括包，它引入了 .dwc 工具（Dart Web Components 编译器）`web_ui`使用`build.dart`

查看文章[Web UI 工具以](http://www.dartlang.org/articles/web-ui/tools.html)获取有关 dwc 和 build.dart 的更多信息，以及[Target 6 - Web UI 入门，](http://www.dartlang.org/docs/tutorials/web-ui/)其中涵盖了类似的内容，但采用教程格式。

# rdf - 哪种 SPARQL 实现（三重存储）最适合读取性能？

> ID：15446746
> 
> 赞同：1
> 
> 时间：2013-03-16T07:29:11.473
> 
> 标签：rdf, sparql, triplestore

我是 RDf 的新手，我正在寻找具有出色读取性能的开源 RDF 数据库。每秒将有大约 100 亿个三元组和 100 多个 SPARQL 查询。现在，我不需要同时读取和写入数据库。

我已经在维基百科（[http://en.wikipedia.org/wiki/SPARQL#SPARQL_implementations](http://en.wikipedia.org/wiki/SPARQL#SPARQL_implementations)）中看到了数据库，但我想要一些专家建议，哪些是经过最多时间测试的系统。它应该具有 Apache 许可证或同等许可的许可证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T12:03:51.533

Jena 和 Sesame 可能是唯一符合您的许可标准的数据库，但它们都不会扩展到您需要的大小。使用 TDB 的 Jena*可能会*，但我不确定这种规模的性能会如何。Sesame Native 当然不是为这种规模而设计的。

还有其他开源数据库，但它们是 GPL 的，例如 4store，它可能符合您的性能标准。但最好的选择是使用商业数据库（大多数都有免费评估版）；这是获得所需规模和读取吞吐量的最佳方式。但这意味着你可能不得不为某人的辛勤工作付钱，我知道。

# sql-server - 内联 .dat 文件加载到 SQL Server 数据库中

> ID：15446747
> 
> 赞同：0
> 
> 时间：2013-03-16T07:29:28.213
> 
> 标签：sql-server

任何人都知道如何在 SQL 服务器中执行内联加载，我有 TCP 委员会提供的 DsGen 软件，它生成扩展名为 .dat 的数据文件。是否有任何机制可以将这些文件直接加载到 SQL 数据库（在生成期间）。我已经使用导入/导出向导完成了该操作，但这不是内联加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:08:55.300

有几种方法可以完成您的任务，这里有两种。

1.  您可以使用 BULK INSERT 命令导入它们。基本上，导入向导所做的工作大致相同，但它让您可以使用漂亮的 GUI 选择各种选项。

2.  您可以在通过向导运行时保存 DTS 包，创建 SQL Server 代理作业并使用`sp_start_job`存储过程执行此作业。

我喜欢 BULK INSERT，因为它更容易实现。只是玩弄这些选项，直到你得到你想要的。

# php - 为 magento 创建产品矩阵

> ID：15446748
> 
> 赞同：3
> 
> 时间：2013-03-16T07:29:46.777
> 
> 标签：php, magento, magento-1.7, magento-1.4, magento-1.5

目前，我正在处理 magento 中的一个要求，该要求与为 T 恤产品创建产品矩阵有关，它看起来像这样：

![在此处输入图像描述](../Images/0e3d7b5318c9b6499da91121af348391.png)

直到我在谷歌上进行研究，我才知道它将由可配置产品完成，或者可以通过 eu.linnlive.com 这个扩展来完成，或者我必须创建具有属性的分组产品，如果有人能给我正确的方法来完成这项任务magento 那么它将非常有帮助，我只是想要这样做的方法。这件事是通过额外的编码部分还是仅通过使用magento默认功能来完成。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T13:54:31.330

你可以尝试使用这个模块，或者创建你自己的。 [http://www.magentocommerce.com/magento-connect/product-matrix.html](http://www.magentocommerce.com/magento-connect/product-matrix.html)

对于此功能，我认为您应该使用基于 2 个属性、颜色和尺寸的可配置产品。分组产品通常用于不按属性链接的一组简单产品

# javascript - !0 和 !1 是否优于 1 和 0？

> ID：15446749
> 
> 赞同：7
> 
> 时间：2013-03-16T07:29:52.283
> 
> 标签：javascript

我注意到 Closure Compiler 将 true 和 false（或 1 和 0）编译为 !0 和 !1。这对我来说没有意义，因为它的字符数是 1 和 0 的两倍。这是有原因的吗？有什么好处吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T07:31:59.070

`1 !== true`和`0 !== false`, 但是`!0 === true`和`!1 === false`. 编译器只是确保类型保持布尔值。

考虑这个例子：

```
var a = true;

if( a === true ) {
    console.log( 'True!' );
}

if( a === 1 ) {
    console.log( 'You should never see this.' );
} 
```

如果将第一行更改为第`var a = 1;`一个条件，则为假，第二行为真。使用`var a = !0;`脚本仍然可以正常工作。

# php - 使用 PHP 和 Ajax 上传文件

> ID：15446750
> 
> 赞同：0
> 
> 时间：2013-03-16T07:29:59.247
> 
> 标签：php, ajax, codeigniter, asyncfileupload

我可以毫无问题地上传小文件。当我尝试使用 150mb 文件时，它意外停止。以下是我的 HTML 文件：

```
<html>
  <body>
    <form  method="post" enctype="multipart/form-data" class="form-horizontal" id="form_upload">
      <div class="control-group">
        <label class="control-label muted">IMG</label>
        <div class="controls">
          <input type="file" id="img" name="img" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label muted">MD5</label>
        <div class="controls">
          <input type="file" id="md5" name="md5" />
        </div>
      </div>
    </form>
    <div class="progress">
      <div class="bar"></div>
      <div class="percent"></div>
    </div>
  </body>
</html> 
```

以下是我的 Ajax 处理程序：我正在使用 jQuery 表单提交插件。

```
uploadFirmware:function(){
  var bar = $('.bar');
  var percent = $('.percent');
  self = this;
  var options = {
    beforeSend: function() {
      var percentVal = '0%';
      bar.width(percentVal)
      percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
      var percentVal = percentComplete + '%';
      bar.width(percentVal)
      percent.html(percentVal);
    },
    complete: function(data) {
      console.log(data);
      self.showStatusMsg(1,"<b>Firmware Upload: </b> File Upload successfully");
    },
    url: '/cav_firmware/api',
    iframe: false
  };
  $("#form_upload").ajaxSubmit(options);
  return false;
} 
```

最后这是我的 PHP 代码。我正在使用 CodeIgniter，但我没有在我的代码中使用它，只是一个经典的 PHP 脚本。

```
public function api_post(){
  $filea = $_FILES['img'];
  $fileb = $_FILES['md5'];
  if( move_uploaded_file($filea['tmp_name'], '/home/sreeni/upload/'.$filea['name']) && move_uploaded_file($fileb['tmp_name'], '/home/sreeni/upload/'.$fileb['name'])){
    echo "Success fully upload files";
  } else {
    echo "File upload failed.";
  }
} 
```

这一切都很好。我的问题只是上传一个 150 MB 的文件。尝试上传 MD5 和 IMG 文件时出现以下错误：

```
<div style="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">
  <h4>A PHP Error was encountered</h4>
  <p>Severity: Notice</p>
  <p>Message:  Undefined index: img</p>
  <p>Filename: controllers/cav_firmware.php</p>
  <p>Line Number: 30</p>
</div>
<div style="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">
  <h4>A PHP Error was encountered</h4>
  <p>Severity: Notice</p>
  <p>Message:  Undefined index: md5</p>
  <p>Filename: controllers/cav_firmware.php</p>
  <p>Line Number: 31</p>
</div>File upload failed. 
```

我将我`php.ini`的最大大小改为 200 MB（内存限制）`/etc/php5/apache2/php.ini`。

我在这里做错了什么？我需要指定我的文件是 MD5 和 IMG（固件映像文件）吗？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:04:38.593

检查 php.ini 中脚本的最大执行时间默认时间是 30 秒。

# php - 刷新页面后最后选择的选项

> ID：15446757
> 
> 赞同：0
> 
> 时间：2013-03-16T07:30:44.837
> 
> 标签：php, javascript, jquery

这是我的链接

[http://www.developer.nextgenexperts.in/astika/products_.php](http://www.developer.nextgenexperts.in/astika/products_.php)

当页面打开时，默认货币在顶部下拉菜单中显示 INR，如果我选择下拉菜单，我也会得到 GBP，当我们选择 GBP 时，价格将转换为 GBP，但选择 GBP 后我会刷新页面然后页面是 INR，但我想要它最后选择的选项，所以怎么可能，请帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:35:37.743

只需使用`$_SESSION['convert']`：

第一次打开页面时，您将检查会话是否存在：

```
session_start();
$convert = isset($_SESSION['convert'])?$_SESSION['convert']:"INR"; 
```

所以，当你写你的下拉菜单时：

```
<form>
   <select>
      <option value="INR" <?php echo $convert=='INR'?'selected':''?>>INR</option>
      <option value="GBP" <?php echo $convert=='GBP'?'selected':''?>>GBP</option>
   </select>
</form> 
```

然后在提交表单时，您将选择实际的转换并将其保存在会话中：

```
session_start();
$convert = $_POST['convert'];
$_SESSION['convert] = $convert; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:35:41.383

在更改时将其保存在 $_SESSION 然后使用它

```
session_start();

$_SESSION['lang'] = 'en'; 
```

在页面加载检查

```
if isset($_SESSION['lang'])  
{
$lang=$_SESSION['lang'];
//ya lang is set arrange properly
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:36:55.953

将他们的偏好存储为**PHP 会话变量** [在此处阅读它们](http://php.net/manual/en/features.sessions.php)

```
 $_SESSION['currency'] = 'USD'; 
```

然后，当加载任何页面时，只需在检查语言的地方使用类似的东西：

```
if(isset($_SESSION['currency'])){
   //change currency
} 
```

使用会话变量时，它**必须**位于页面顶部：

```
session_start(); 
```

会话类似于 cookie，但它们仅存在于服务器上，并在用户关闭它们与服务器之间的连接时被删除。有一种有用的方法来存储持久数据。如果您希望在下次他们回来时保存首选项，请查看使用 cookie。

# php - 使用 javascript 或 php 删除或清除 cookie

> ID：15446773
> 
> 赞同：1
> 
> 时间：2013-03-16T07:32:45.690
> 
> 标签：php, javascript

我想用 javascript 或 php 脚本删除我用 javascript 设置的 cookie 现在我想删除那个 cookie。

这是我的javascript：

```
<script type="text/javascript">
    var url = window.location.hash;
    var result = url.split('?');
    var advertise = result[1].split("&");
    var id = advertise[0].split("=");
    document.cookie = "update_id=" + id[1];
    var name = advertise[1].split("=");
    document.cookie = "update_name=" + name[1];
</script> 
```

如何使用 javascript 或 php 代码删除或清除此 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:36:44.890

你可以在 JavaScript 中这样做：

只需`delete_cookie`通过传递您的 cookie 名称来调用函数。

```
function delete_cookie(cookie_name)
{
  var cookie_date = new Date ( );  // current date & time
  cookie_date.setTime (cookie_date.getTime() - 1);
  document.cookie = cookie_name += "=; expires=" + cookie_date.toGMTString();
} 
```

你可以在 PHP 中这样做：

```
setcookie("cookie_name", "", time()-3600); 
```

# php - 在 php BY .htaccess 中禁用邮件功能

> ID：15446775
> 
> 赞同：6
> 
> 时间：2013-03-16T07:33:01.560
> 
> 标签：php, .htaccess

我想通过 .htaccess 丢弃我的所有项目文件来禁用 PHP 中的邮件功能。我需要停止在我的项目中由系统发送的所有电子邮件，所以在我的项目中有很多使用`mail()`功能的文件，所以有办法`disable mail functions`吗？我无法访问`php.ini`，所以最好处理`.htaccess`

在`.htaccess`我写这段代码但不起作用：

```
 php_value  disable_functions  mail 
```

这不起作用，但有任何其他方法可以禁用邮件功能`.htaccess`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T07:51:17.157

`PHP configuration directive`中的定义`.htaccess`取决于`server configuration`。它可以在您的`webserver`. 您可以放入`php.ini`您的站点根目录并放入此指令。或者，您可以通过以下方式在应用程序运行时设置此指令

```
ini_set('disable_functions','mail'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T14:38:30.423

disable_functions 只能在 php.ini 中修改： [http ://www.php.net/manual/en/ini.core.php#ini.disable-functions](http://www.php.net/manual/en/ini.core.php#ini.disable-functions)

# javafx - Netbeans 7.2.1 损坏的参考：dist.jar（在 JavaFX 文件上编码时）

> ID：15446779
> 
> 赞同：6
> 
> 时间：2013-03-16T07:33:26.187
> 
> 标签：javafx

我正在尝试通过阅读一些教程来学习 JavaFX，但是我什至无法实现“helloworld”应用程序。NetBeans 说：

> 错误：无法找到或加载主类 helloworld.NewFXMain Java 结果：1

然后当我检查 Properties-->Libraries-->Run part 有一个警告说

> 损坏的参考：dist.jar

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-03T11:07:55.590

当您在 java fx 中创建一个新项目并想要运行该项目进行演示时，就会发生此错误。你可以试试下面给出的： - 1.右键单击项目。然后单击清理并构建。它在netbeans中运行你的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T19:37:07.343

在运行之前，尝试“clean and Build Project”选项。

*   Menu->Run->Clean and Build Project

然后运行你的项目。它对我有用。

# uml - UML活动图——如何设计？

> ID：15446785
> 
> 赞同：0
> 
> 时间：2013-03-16T07:34:08.843
> 
> 标签：uml, activity-diagram, visual-paradigm

> MAKE RESERVATIONS 是活动，它说明以下内容：
> 
> 一位顾客联系预订人员，询问汽车租赁事宜。
> 
> 客户引用所需的开始和结束日期、首选车辆和取货处。
> 
> 预订人员查找价格文件并报价。客户同意价格。
> 
> 检查车辆可用性以查看在所需办公室是否有合适的车辆在所需时间内可用。
> 
> 如果所请求的车辆在指定的取件处可用，则为客户保留。在登记预订的车辆可用性中进行条目。
> 
> 预订人员向客户发出一个出租号码。然后在租赁文件中创建租赁协议，包括租赁编号、租赁期限、车辆类型和取车处。
> 
> 例外
> 
> 1.  接送办公室没有合适的车辆。为客户提供替代车辆。
> 2.  客户不同意价格并要求更换车辆和/或期限。

我为上面的活动设计了活动图，但我不知道我是否必须将问题放在控制流上的决策节点或上面？在我的情况下，同意价格应该在决策节点上还是在输入节点的控制流箭头上？

除此之外，如果用例仅指定一个条件，例如“如果有车辆可用，则向客户提供车辆并报价。如果客户接受，则开始租赁。” 决策节点是什么样子的？

此外，如果有 3 个不同的参与者，应该有一个泳道代表参与者，还是没有一个可以绘制活动图？

上面用例的活动图贴在下面

![预约](../Images/814ebb0b108cda1f136602c092ff8d57.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:19:44.813

> 不知道是不是一定要把问题放在决策节点或者控制流上面？

就像您所做的那样，它们被写入流程中。在 UML 中，*决策节点*是空的（这与基本流程图不同，后者将在节点中写入条件）。来自决策节点的每个流都可以用*警卫*（即条件）进行注释。当决策节点被执行时，**任何**一个guard评估为真的流都可以被选择执行（通常情况下，guard的条件是排他的，只能选择一个guard，但这不是必须的）。

> 除此之外，如果用例仅指定一个条件，例如“如果有车辆可用，则向客户提供车辆并报价。如果客户接受，则开始租赁。” 决策节点是什么样子的？

它看起来像你的图，但是在决策节点之前应该有一个用于询问客户端的*动作节点*，因为决策节点的唯一目的是在几个可能的流中进行选择。**作为决策节点执行的一部分，不执行任何操作**。

![决策节点，之前有一个动作节点](../Images/7efd42bbc2c54f6d2a58c68334b523be.png)

> 此外，如果有 3 个不同的参与者，应该有一个泳道代表参与者，还是没有一个可以绘制活动图？

这取决于您要建模的内容，如果**系统的不同部分执行不同的**操作，您可以使用泳道（我最近[在这里画了一个示例](https://stackoverflow.com/a/15451196/1297272)），但如果对分离建模不感兴趣，您可以避免使用泳道。通常，参与者会向系统提供输入，但他们不会自己执行操作。

例如，您的示例基于来自客户的输入（初始报价和协议）和客户接收输出（租赁号码）对预订人员（这是您系统的一部分）的行为进行建模。我建议您将其作为一个单独的问题提出，强调第三个演员。

# jakarta-ee - addFieldError 的反面是什么？

> ID：15446786
> 
> 赞同：2
> 
> 时间：2013-03-16T07:34:19.680
> 
> 标签：jakarta-ee, struts2, locale

我正在按照这个[教程](http://www.mkyong.com/struts2/struts-2-i18n-or-localization-example/)在我的应用程序上应用语言环境，它完美地工作并显示错误消息，但不同的是本教程提供了一个登录页面，但我提供了一个注册页面。

在认证后的教程中，将打开一个新页面，但我需要显示一条消息以感谢用户注册。

我不确定如何使用与 addFielderror 相同的方法不显示错误消息，而是显示注册消息的确认。

我在验证方法中使用了以下内容，但它不起作用，

```
 addActionMessage(getText("confirm")); 
```

我的jsp

```
<s:form action="validateUser" namespace="/user">

    <s:textfield key="global.username" name="username" />
    <s:password key="global.password" name="password"/> 
    <s:submit key="global.submit" name="submit" />

</s:form>

<s:url id="localeEN" namespace="/" action="locale" >
   <s:param name="request_locale" >en</s:param>
</s:url>
<s:url id="localezhCN" namespace="/" action="locale" >
   <s:param name="request_locale" >zh_CN</s:param>
</s:url>
<s:url id="localeDE" namespace="/" action="locale" >
   <s:param name="request_locale" >de</s:param>
</s:url>
<s:url id="localeFR" namespace="/" action="locale" >
   <s:param name="request_locale" >fr</s:param>
</s:url>

<s:a href="%{localeEN}" >English</s:a>
<s:a href="%{localezhCN}" >Chinese</s:a>
<s:a href="%{localeDE}" >German</s:a>
<s:a href="%{localeFR}" >France</s:a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:38:18.943

尝试这个

```
<s:if test="hasActionMessages()">
   <div>
      <s:actionmessage/>
   </div>
</s:if> 
```

# android - 如何在操作栏中的图标应用选项之前添加菜单选项

> ID：15446789
> 
> 赞同：0
> 
> 时间：2013-03-16T07:34:39.153
> 
> 标签：android, android-actionbar

我想更改操作栏中选项的位置，使其出现在应用程序图标之前。

# c# - XmlSerializer - IEnumerable 或 IList 作为 LIst

> ID：15446790
> 
> 赞同：1
> 
> 时间：2013-03-16T07:34:45.820
> 
> 标签：c#, .net, xml-serialization

我已经为此苦苦挣扎了一段时间。这是我的情况 - 我试图序列化的类的属性之一包含一个`IEnumerable`（因为它是一个接口，所以无法序列化），我不能去更改属性（我不能添加属性也可以）。这是我到目前为止的代码：

```
// Ignore the byte array containing the Data for the serialization
xmlAttrOverrides.Add(typeof (FileContent), "Data", xmlIgnoreAttr);

using (var writer = xmlDocument.CreateWriter())
{
    var serializableTypes = GetSerializableSubTypes();
    var serializer = new XmlSerializer(documentPackage.GetType(), xmlAttrOverrides, serializableTypes, null, null);

    serializer.Serialize(writer, documentPackage);
} 
```

有没有办法设置它，`XmlSerializer`以便每次看到一个`IList`或一个`IEnumerable`时将它们“转换”为一个列表（或数组）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:31:29.993

由于您无法更改类，请创建一个新类，从您要序列化的类和`IXmlSerializable`. 此外，您可以使用`new`关键字覆盖基本颜色数组。

试试这个：

```
public class Something
{
    public int Id { get; set; }

    public string Text { get; set; }

    public IEnumerable<string> Colors { get; set; }
}

public class MySerializableSomething : Something, IXmlSerializable
{
    public new List<string> Colors { get; set; }

    public MySerializableSomething()
    {
        Colors = new List<string>();
    }

    public XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
        while (reader.Read())
        {
            switch (reader.LocalName)
            {
                case "Id": Id = reader.ReadElementContentAsInt(); break;
                case "Text": Text = reader.ReadElementContentAsString(); break;
                case "Color": Colors.Add(reader.ReadElementContentAsString()); break;
            }
        }
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteElementString("Id", Id.ToString());
        writer.WriteElementString("Text", Text);

        writer.WriteStartElement("Colors");

        foreach (var color in Colors)
        {
            writer.WriteElementString("Color", color);
        }

        writer.WriteEndElement();
    }
} 
```

在这里你可以看到我有一个`IEnumerable<string>`. 通常不会工作..所以我把它包装起来，然后序列化包装好的。如果需要，您可以将其转换为普通基类..不是最好的解决方案，但是既然您说您不能更改基类，那么这里没有太多选择...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:39:31.547

通过实现编写你自己的自定义`XmlSerializer`类`IXmlSerializable`，参考[msdn](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable%28v=vs.80%29.aspx)的用法

# php - CodeIgniter 的 CSV 导入库

> ID：15446796
> 
> 赞同：7
> 
> 时间：2013-03-16T07:35:25.823
> 
> 标签：php, csv, codeigniter-2, helper, xls

需要将 csv 或 xls 导入到使用 CodeIgniter 创建的应用程序中。有没有这方面的图书馆？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-16T13:09:43.953

这是一个简单的方法来做到这一点。我不知道人们做什么，但我用这个

这是我的 csv 阅读器库

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class CSVReader {

    var $fields;            /** columns names retrieved after parsing */ 
    var $separator = ';';    /** separator used to explode each line */
    var $enclosure = '"';    /** enclosure used to decorate each field */

    var $max_row_size = 4096;    /** maximum row size to be used for decoding */

    function parse_file($p_Filepath) {

        $file = fopen($p_Filepath, 'r');
        $this->fields = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure);
        $keys_values = explode(',',$this->fields[0]);

        $content    =   array();
        $keys   =   $this->escape_string($keys_values);

        $i  =   1;
        while( ($row = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure)) != false ) {            
            if( $row != null ) { // skip empty lines
                $values =   explode(',',$row[0]);
                if(count($keys) == count($values)){
                    $arr    =   array();
                    $new_values =   array();
                    $new_values =   $this->escape_string($values);
                    for($j=0;$j<count($keys);$j++){
                        if($keys[$j] != ""){
                            $arr[$keys[$j]] =   $new_values[$j];
                        }
                    }

                    $content[$i]=   $arr;
                    $i++;
                }
            }
        }
        fclose($file);
        return $content;
    }

    function escape_string($data){
        $result =   array();
        foreach($data as $row){
            $result[]   =   str_replace('"', '',$row);
        }
        return $result;
    }   
}
?> 
```

和控制器方法

```
function readExcel()
{
        $this->load->library('csvreader');
        $result =   $this->csvreader->parse_file('Test.csv');

        $data['csvData'] =  $result;
        $this->load->view('view_csv', $data);  
} 
```

这是视图

```
<table cellpadding="0" cellspacing="0" width="100%">
    <tr>
            <td width = "10%">ID</td>
            <td width = "20%">NAME</td>
            <td width = "20%">SHORT DESCRIPTION</td>
            <td width = "30%">LONG DESCRIPTION</td>
            <td width = "10%">STATUS</td>
            <td width = "10%">PARENTID</td>
    </tr>

            <?php foreach($csvData as $field){?>
                <tr>
                    <td><?php echo $field['id']?></td>
                    <td><?php echo $field['name']?></td>
                    <td><?php echo $field['shortdesc']?></td>
                    <td><?php echo $field['longdesc']?></td>
                    <td><?php echo $field['status']?></td>
                    <td><?php echo $field['parentid']?></td>
                </tr>
            <?php }?>
</table> 
```

参考[这里](https://stackoverflow.com/questions/11337221/codeigniter-rest-csv-import-to-mysql/11339125#11339125)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-26T13:24:20.813

这是 raheel shan 接受的答案的改进版本 - 我编辑了他的答案，但我的编辑被拒绝了，但这是一个重要的变化......

在解析每个数据行时，在逗号上使用是不明智的，`explode()`因为它不处理包含逗号的引号包裹的字符串。Explode 将这些字符串分解为子字符串并在 中提供额外的数组元素`$values`，因此此检查失败：

```
if (count($keys) == count($values)) { 
```

相反，PHP 有一个专门构建的方法来处理这个问题；[str_getcsv()](http://php.net/manual/en/function.str-getcsv.php)。我已经相应地更新了原始答案代码。

CSV 阅读器库：

```
<?php
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class CSVReader {

    var $fields;/** columns names retrieved after parsing */
    var $separator = ';';/** separator used to explode each line */
    var $enclosure = '"';/** enclosure used to decorate each field */
    var $max_row_size = 4096;/** maximum row size to be used for decoding */

    function parse_file($p_Filepath) {

        $file = fopen($p_Filepath, 'r');
        $this->fields = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure);
        $keys = str_getcsv($this->fields[0]);

        $i = 1;
        while (($row = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure)) != false) {
            if ($row != null) { // skip empty lines
                $values = str_getcsv($row[0]);
                if (count($keys) == count($values)) {
                    $arr = array();
                    for ($j = 0; $j < count($keys); $j++) {
                        if ($keys[$j] != "") {
                            $arr[$keys[$j]] = $values[$j];
                        }
                    }

                    $content[$i] = $arr;
                    $i++;
                }
            }
        }
        fclose($file);
        return $content;
    }

}
?> 
```

控制器方法：

```
function readExcel() {
    $this->load->library('csvreader');
    $result = $this->csvreader->parse_file('Test.csv');
    $data['csvData'] = $result;
    $this->load->view('view_csv', $data);
} 
```

这是观点：

```
<table cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td width="10%">ID</td>
        <td width="20%">NAME</td>
        <td width="20%">SHORT DESCRIPTION</td>
        <td width="30%">LONG DESCRIPTION</td>
        <td width="10%">STATUS</td>
        <td width="10%">PARENTID</td>
    </tr>
    <?php foreach ($csvData as $field) { ?>
        <tr>
            <td><?php echo $field['id'] ?></td>
            <td><?php echo $field['name'] ?></td>
            <td><?php echo $field['shortdesc'] ?></td>
            <td><?php echo $field['longdesc'] ?></td>
            <td><?php echo $field['status'] ?></td>
            <td><?php echo $field['parentid'] ?></td>
        </tr>
    <?php } ?>
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-09T21:14:50.773

好吧，别介意我，我只是修改了ajmedway的库以包含分隔符，以防万一您想从TSV或管道分隔文件中获取数据。如果您想要普通的旧 CSV，他就可以了。

```
class CSVReader {

var $fields;/** columns names retrieved after parsing */
var $separator = ';';/** separator used to explode each line */
var $enclosure = '"';/** enclosure used to decorate each field */
var $max_row_size = 4096;/** maximum row size to be used for decoding */

function parse_file($p_Filepath, $delimiter = FALSE ) {

    $file = fopen($p_Filepath, 'r');
    $this->fields = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure);
    if ($delimiter==FALSE)
    {
    $keys = str_getcsv($this->fields[0]);

    $i = 1;
    while (($row = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure)) != false) {
        if ($row != null) { // skip empty lines
            $values = str_getcsv($row[0]);
            if (count($keys) == count($values)) {
                $arr = array();
                for ($j = 0; $j < count($keys); $j++) {
                    if ($keys[$j] != "") {
                        $arr[$keys[$j]] = $values[$j];
                    }
                }

                $content[$i] = $arr;
                $i++;
            }
        }
    }
    }
    else{
        $keys = str_getcsv($this->fields[0],$delimiter);

        $i = 1;
        while (($row = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure)) != false) {
            if ($row != null) { // skip empty lines
                $values = str_getcsv($row[0],$delimiter);
                if (count($keys) == count($values)) {
                    $arr = array();
                    for ($j = 0; $j < count($keys); $j++) {
                        if ($keys[$j] != "") {
                            $arr[$keys[$j]] = $values[$j];
                        }
                    }

                    $content[$i] = $arr;
                    $i++;
                }
            }
        }
    }

    fclose($file);
    return $content;
}}?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-08T12:31:27.773

这是空行和额外空格和制表符的改进版本...

```
class CSVReader {

    function csv_to_array($Filepath)
    {
        //Get csv file content
        $csvData = file_get_contents($Filepath);

        //Remove empty lines
        $csvData = preg_replace("/(^[\r\n]*|[\r\n]+)[\s\t]*[\r\n]+/", "\r\n", $csvData);

        //String convert in array formate and remove double quote(")
        $array = array();
        $array = $this->escape_string(preg_split('/\r\n|\r|\n/', $csvData));
        $new_content_in_array = array();
        if($array)
        {
            //Get array key
            $array_keys = array();
            $array_keys = array_filter(array_map('trim', explode(';',$array[0])));

            //Get array value
            $array_values = array();
            for ($i=1;$i<count($array);$i++)
            {
                if($array[$i])
                {
                    $array_values[] = array_filter(array_map('trim', explode(';',$array[$i])));
                }
            }

            //Convert in associative array
            if($array_keys && $array_values)
            {
                $assoc_array = array();
                foreach ($array_values as $ky => $val)
                {           
                    for($j=0;$j<count($array_keys);$j++){
                        if($array_keys[$j] != "" && $val[$j] != "" && (count($array_keys) == count($val)))
                        {
                            $assoc_array[$array_keys[$j]] = $val[$j];
                        }
                    }
                    $new_content_in_array[] = $assoc_array;
                }
            }
        }
        return $new_content_in_array;
    }

    function escape_string($data){
        $result =   array();
        foreach($data as $row){
            $result[]   = preg_replace("/(^[\r\n]*|[\r\n]+)[\s\t]*[\r\n]+/", "", str_replace('"', '',$row));
        }
        return $result;
    }   
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-08T12:34:53.807

调用控制器：

```
$this->load->library('csvreader');
$import_csv_data = $this->csvreader->csv_to_array($path);
print_r($import_csv_data );
exit; 
```

# c - 打印双精度范围

> ID：15446797
> 
> 赞同：0
> 
> 时间：2013-03-16T07:35:30.510
> 
> 标签：c

我是初学者程序员。使用 Dev C++ 我需要打印 `double`, `long long int`, `unsigned long long int`, `signed long long int`, `unsigned int`,的范围`unsigned long int`。

到目前为止，我已经这样做了。所有尺寸均以位为单位。

```
#include <stdio.h>  
#include <conio.h>    
#include <math.h>

int main()
{
    unsigned long int
        d = pow(2, sizeof(double) * 8),
        lli = pow(2, sizeof(long long int) * 8),
        ulli = pow(2, sizeof(unsigned long long int) * 8),
        slli = pow(2, sizeof(signed long long int) * 8),
        ui = pow(2, sizeof(unsigned int) * 8),
        uli = pow(2, sizeof(unsigned long int) * 8);

    printf("double%d to %d", -(d / 2), (d / 2) - 1);
    printf("longlongint%d to %d", -(lli / 2), (lli / 2) - 1);
    printf("unsigned longlongint%d", ulli - 1);
    printf("signed long longint%d to %d", -(slli / 2), (slli / 2) - 1);
    printf("unsigned int%d", ui - 1);
    printf("unsignedlongint%d ", uli - 1);
    getch();

    return 0;
} 
```

但它仍然没有打印范围......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:54:32.320

有符号整数的范围通常是不对称的——通常负值比正值多一个。

标头`<limits.h>`定义了您指定的整数类型的范围。

*   `ULONG_MAX`
*   `ULLONG_MAX`

等等

标头`<float.h>`定义了浮点类型的范围：

*   `DBL_MAX`
*   `DBL_MIN`

等等

您必须使用正确的格式说明符打印值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:52:02.033

尝试添加`"\n"`到每个打印句子：

```
printf("double%d to %d\n",-(d/2),(d/2)-1); 
printf("longlongint%d to %d\n",-(lli/2),(lli/2)-1);  
printf("unsigned longlongint%d\n",ulli-1);    
printf("signed long longint%d to %d\n",-(slli/2),(slli/2)-1);    
printf("unsigned int%d\n",ui-1 );   
printf("unsignedlongint%d\n",uli-1); 
```

**更新**

正如@Abhineet 所建议的那样，有关缓冲流的更多信息可能会对您有所帮助，因此阅读 [此 SO 问题](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)可能会很有趣

# jquery - 将参数传递给 jQuery 函数

> ID：15446804
> 
> 赞同：0
> 
> 时间：2013-03-16T07:35:57.153
> 
> 标签：jquery, modal-dialog

我有一个`<div>`可点击的。代码：

```
<div
    onclick="clicked(this);"
    class="green-column"
    id="infoblock"
    data-type="<?php echo $descriptions[description];?>">
        <i class="icon-ok"></i>
</div> 
```

我需要`$descriptions[description]`在不使用 JavaScript 的情况下向用户显示弹出消息`alert()`。我尝试使用`Modal`但找不到将消息传递给它的方法。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:42:05.413

```
<div
    onclick="clicked(this);"
    class="green-column"
    id="infoblock"
    data-type="<?php echo $descriptions[description];?>">
        <i class="icon-ok"></i>
</div>

<div id="example"></div>

function clicked(desc) {
    $('#example').html(desc);
    $('#example').html(desc).dialog();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:53:44.143

如果您使用的是 jQuery，那么为什么要使用 jQuery `onclick`？您可以即时构建对话！

标记：

```
<div class="green-column infoblock" data-type="description1">
    <i class="icon-ok"></i>
</div>
<div class="green-column infoblock" data-type="description2">
    <i class="icon-ok"></i>
</div> 
```

JS：

```
$(function() {
    $(".infoblock").click(function() {
        $("<div>" + $(this).attr("data-type") + "</div>").dialog();
    });
}); 
```

**[jsFiddle](http://jsfiddle.net/pmatseykanets/nm6kj/)**

# java - 如何使用 docx4j 从模板创建一个新单词

> ID：15446805
> 
> 赞同：4
> 
> 时间：2013-03-16T07:36:00.063
> 
> 标签：java, templates, ms-word, copy, docx4j

我有以下情况，需要一些建议：

用户将输入一个word文档作为模板，并在运行时提供一些参数，这样我就可以查询我的数据库并获取数据来填充文档。所以，我需要做两件基本的事情：

1.  用当前查询行的相应结果替换文档中的每个键。
2.  “合并”（复制？复制？）现有文档未更改到自身（附加），具体取决于我从查询中获得的行数，并将此新副本中的键替换为下一行值。

这样做的最佳方法是什么？我现在已经设法通过使用 unmarshallfromtemplate 为其提供哈希图来完成替换部分。但是这种方式有点棘手，因为我需要在文档中添加“${variable_name}”，有时单词将不同标签中的“${”和“}”分开，导致问题。

我已经阅读了有关自定义 xml 绑定的信息，但并没有完全理解它。我需要生成一个自定义 XML，将其注入文档（所有这些非运行时）并调用 applybindings?? 如果这是真的，我将如何将文档中的字段绑定到 xml ？按名字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T21:12:44.127

docx4j 包括 VariablePrepare，它可以整理您的输入 docx，以便您的密钥不会在单独的运行中拆分。

但是，切换到内容控制数据绑定仍然会更好，特别是如果您有重复数据（例如发票中的行项目）。 **披露：我在 docx4j 中支持这种方法。**

采用内容控制数据绑定方式：

1.  构思一种对您的数据有意义的 XML 格式，并编写一些代码将数据库查询的结果转换为该格式。

2.  修改您的模板，以便将内容控件绑定到 XML 文档中的元素。通常，您会使用[Word 的创作加载项](http://www.opendope.org/downloads/authoring-friendly/setup.exe)来帮助解决此问题。（Microsoft 用于绑定的技术是 XPath，因此您如何绑定取决于您的 XML 结构，但是，是的，您通常会绑定到元素名称或 ID）。

3.  现在您有了 XML 文件和合适的输入 docx，ContentControlsMergeXML 包含在运行时创建实例文档所需的代码。[在https://github.com/plutext/OpenDoPE-WAR](https://github.com/plutext/OpenDoPE-WAR)上还有一个用于 servlet 环境的版本

作为 1 和 2 的替代方案，当前 nightlies 中还有 org.docx4j.model.datastorage.migration.FromVariableReplacement，它可以转换您现有的“${”文档。虽然只是标准化的目标 XML 格式。

如果您还有其他问题，[请访问 http://www.docx4java.org/forums/data-binding-java-f16/专门讨论此主题的论坛](http://www.docx4java.org/forums/data-binding-java-f16/)

# android - ViewPager 的无尽适配器

> ID：15446806
> 
> 赞同：11
> 
> 时间：2013-03-16T07:36:03.230
> 
> 标签：android, android-viewpager

我一直在使用[CWAC 的 EndlessAdapter](https://github.com/commonsguy/cwac-endless)在 ListViews 上实现无限滚动。

我想完成 ViewPager 的等效操作。不幸的是，PageAdapter 和 ListAdapter 不共享相同的公共基类。

解决这个问题的最佳方法是什么？是否存在已经处理此问题的库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T12:11:34.200

> 解决这个问题的最佳方法是什么？

将“无尽”逻辑添加到您自己的`PagerAdapter`. 或者，如果您愿意，可以尝试创建一个 decorating `PagerAdapter`，以`EndlessAdapter`装饰常规的方式`Adapter`。

后者可能会很棘手，因为它`PagerAdapter`是为将页面设计为视图或片段而设计的，并且类内部的片段处理`FragmentPagerAdapter`有点可怕。

> 是否存在已经处理此问题的库？

没有我知道的。

主要是因为用例似乎不那么引人注目。使用`ListView`，用户可以快速翻阅列表，快速滚动数十或数百行。因此，使用“we got to end”作为加载更多数据的触发器似乎是合理的。但是，使用 a `ViewPager`，通常需要更长的时间才能完成，特别是如果您不使用`PagerTabStrip`或等效项。因此，等到用户一直到最后才开始加载额外的数据似乎对用户来说很烦人——你一直有时间去检索更多的数据，但没有使用它。

因此，另一种方法是让您在`ViewPager.OnPageChangeListener`您的`ViewPager`. 当`onPageSelected()`，并且您认为自己接近尾声时，开始`AsyncTask`（或其他）去收集更多数据。那么问题是，一旦数据更新，您将需要更新`PagerAdapter`和调用`notifyDataSetChanged()`该适配器使用的数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T07:41:52.513

```
@Override
public int getCount() {
    return (Integer.MAX_VALUE);
    //artificially large value for infinite scrolling
}

public int getRealCount(){
//Do something to return the actual number of objects.
}   

@Override
public Object instantiateItem(ViewGroup container, int position) {  
    int virtualPosition = position % getRealCount();
    return instantiateVirtualItem(container, virtualPosition);
}

public Object instantiateVirtualItem(ViewGroup container, final int position) {             
//Do the required part here
}

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    int virtualPosition = position % getRealCount();
    destroyVirtualItem(container, virtualPosition, object);
}

public void destroyVirtualItem(ViewGroup container, int position, Object object){
    container.removeView((View) object);            
} 
```

现在，最重要的部分

```
pager.setOffscreenPageLimit(10); //your choice
pager.setCurrentItem(Integer.MAX_VALUE/2,false);
//pager is the ViewPager object 
```

PS：我已经成功实现了这一点。问你是否还有疑问。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T22:39:08.767

也许您可以按如下方式“伪造”：

您可能会显示大量的页面。使用`FragmentStatePagerAdapter`类： [https ://developer.android.com/reference/android/support/v13/app/FragmentStatePagerAdapter.html](https://developer.android.com/reference/android/support/v13/app/FragmentStatePagerAdapter.html)

`getCount`通过返回来实现该方法`Integer.MAX_VALUE`。
通过始终返回来实现 getItemPosition 方法`POSITION_NONE`。
根据需要实现该`getItem`方法，返回相应的 Fragment。

然后，当承载 ViewPager 的 Activity 启动时，将 ViewPager 的初始位置设置为一个非常大的数字，例如`viewPager.setCurrentItem(Integer.MAX_VALUE / 2);`.

我自己没有试过这个......，YMMV！:)

# python - Django：无法弄清楚 Django 中的编码

> ID：15446809
> 
> 赞同：0
> 
> 时间：2013-03-16T07:36:30.440
> 
> 标签：python, django, unicode, python-2.7, python-unicode

我让这个应用程序在 python 2.7 中运行良好！

它以“من”为例，并将其更改为“mn”。

```
# -*- coding: utf-8 -*-
from __future__ import print_function
from __future__ import unicode_literals
"""Kurdish Alphabet to Kurdish Kirmanci Latin Translator"""

s = "من"
Latin = {
        'ئه':'A','ا':'A','ب':'B',
        'ج':'C','چ':'Ç','د':'D',
        'ە':'E','ێ':'Ê','ف':'F',
        'گ':'G','ه':'H','هه':'Ha',
        'ئ':'I','ی':'Î','ژ':'J',
        'ک':'K','ل':'L','م':'M','ن':'N',
        'ۆ':'O','پ':'P','ق':'Q','ر':'R',
        'س':'S','ش':'Ş','ت':'T',
        'وو':'U','و':'Ú','ی':'Y','ز':'Z',
        'خ':'X',' ':' ','؟':'?','،':',',}

#this will take each index of the list
#and take it through ChangeTool
#and print it

wordlist = list(s)
wordlist = [ch for ch in s]    
for l in wordlist:
        print (Latin[l])
print("\r") 
```

现在我已将其更改为 Django 函数，我的行为很奇怪！

Django 功能：

```
def change(request):
        Latin = {'ئه','ا','ب','ج','چ',}
            Latin = [character for character in Latin]
return render_to_response('change_result.html',{'Latin':Latin}) 
```

我只是在测试会是什么结果！现在这是 html 页面中显示的内容：

```
['\xd8\xa6\xd9\x87', '\xda\x86', '\xd8\xa8', '\xd8\xac', '\xd8\xa7'] 
```

如果我把这`u''`封信放在前面，就会出现这样的结果：

```
[u'\u0628', u'\u0626\u0647', u'\u062c', u'\u0627', u'\u0686'] 
```

有人可以请告诉我发生了什么吗？为什么这些字母没有显示在 html 页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:09:21.010

有朋友发现问题了！

我在 Django View 的返回中传递了 LIST

这导致显示对象而不是实际索引：/类似这样的东西出现：

```
[u'\u0628', u'\u0626\u0647', u'\u062c', u'\u0627', u'\u0686'] 
```

因此，我更改了视图以将索引加入字符串，然后传递字符串而不是 LIST：

```
Latin = ''.join(Latin) 
```

# asp.net-mvc-4 - 为什么我们需要在 MVC 中使用 Web API？mvc中restful api的缺点是什么？

> ID：15446811
> 
> 赞同：8
> 
> 时间：2013-03-16T07:36:44.323
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我是 ASP.NET Web API 的新手。谁能告诉我

*   为什么我们需要 Web API？
*   它与来自 MVC 的 rest full api 有何不同？
*   何时使用 MVC4 web api？
*   MVC中什么是restful api

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T08:14:42.430

WebAPI 基于 MVC，但有一些细微的差别。您需要了解 WebAPI 是独立于 MVC 的东西，并且不需要 MVC。您可以单独安装 WebAPI，也可以从默认的 MVC 模板中卸载它。

确实，MS 可以将 WebAPI 直接构建到 MVC 控制器中，但他们选择将 API 控制器与 MVC 控制器分开，因为它们确实是处理请求和响应的不同方式。

您可以在 WebAPI 中做而在 MVC 中不能（或至少不那么容易）做的事情的示例包括：

*   内容协商
    *   这允许调用客户端选择返回数据的格式，例如 XML 或 JSON。
*   OData 支持
    *   这允许调用者在服务器上“过滤”结果，而无需服务方法专门支持它。例如，如果您想按名字对结果进行排序，那么只需指定 OData 查询参数即可

WebAPI 为处理数据结果集提供了强大的功能。MVC 不提供那种功能。

您倾向于将 WebAPI 用于 Ajax 请求或不需要 WCF 复杂性的基于 Web 服务的请求。

RESTful API 并不特定于 MVC 或 WebAPI。它们只是一种关于如何在服务中设计 HTTP 请求的理念。确实有很多，但我不会深入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:41:50.670

MVC 被优化为向 Web 浏览器客户端提供信息。如果你的客户是别的东西，从长远来看，Web API 会让你的生活更轻松。

Web API 是对 Web 堆栈的完全重写。在核心上，它比 MVC 建立在其上的 12 年历史的基础架构更干净、更灵活。Web API 还没有与 MVC 相同级别的工具、附加组件、插件，但那将会到来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T07:49:15.273

WCF 团队在 Microsoft 与 MVC 团队合并。WCF 不会消失，但对于简单的 RESTFUL 服务调用，MVC 控制器是天作之合，对其进行修改可以实现非常简单的 Web API。

虽然我们中的许多人都觉得 WCF 相对容易，但也有很多人害怕它和/或没有/花时间学习它，因此他们 a. 仍然使用 ASMX，b。仍然从未采用过服务，或者现在使用 Web API，是 c。很高兴他们可以很容易地启动并运行宁静的 Web 服务。

所以实际上这是一个舒适程度、适应能力、改变能力的问题，Web API 确实有它的位置。它不能取代 WCF，因为 WCF 具有高级配置，具有执行 SOAP 的所有绑定和能力，而不仅仅是 REST，许多应用程序仍然需要 SOAP 协议。

# c# - 如何将字符串拆分两次

> ID：15446815
> 
> 赞同：1
> 
> 时间：2013-03-16T07:37:07.117
> 
> 标签：c#, split, string-split

我一直在尝试拆分字符串两次，但我不断收到错误“索引超出数组范围”。

这是我打算拆分的字符串：

```
"a*b*c*d*e^1*2*3*4*5^e*f*g*h*i^" 
```

这样我`"^"`在第一个数组分隔中使用作为分隔符，以便每个集合在第一个结果之后如下所示

```
a*b*c*d*e 1*2*3*4*5 e*f*g*h*i 
```

然后在此集合上执行另一个拆分操作`*`作为分隔符，以便结果，例如来自第一个集合的结果是`a b c d e`

这是 C# 代码：

```
words = "a*b*c*d*e^1*2*3*4*5^e*f*g*h*i^";

char[] del = { '^' };

string[] splitResult = words.Split(del);
foreach (string w in splitResult)
{
    char[] separator = { '*' };
    string[] splitR = w.Split(separator);
    foreach (string e in splitR)
    {
        string first = splitR[0];
        string second = splitR[1];
        string third = splitR[2];
        string fourth = splitR[3];
        string fifth = splitR[4];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T07:44:27.747

要删除没有结果的最后一部分，怎么样

在 C# 中

```
string str = "a*b*c*d*e^1*2*3*4*5^e*f*g*h*i^";
var result = str.Split(new char[] { '^' }, StringSplitOptions.RemoveEmptyEntries)
                .Select(x => x.Split('*')).ToArray(); 
```

在 VB.Net

```
Dim str As String = "a*b*c*d*e^1*2*3*4*5^e*f*g*h*i^"
Dim result = str.Split(New Char() {"^"}, StringSplitOptions.RemoveEmptyEntries)
                .Select(Function(x) x.Split("*")).ToArray() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T07:42:51.790

你可以用 Linq 做到这一点：

```
IEnumerable<IEnumerable<string>> strings = words
    .Split(new char[] { '^' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(w => w.Split('*')); 
```

或者如果您更喜欢专门使用数组

```
string[][] strings = words
    .Split(new char[] { '^' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(w => w.Split('*').ToArray())
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:43:50.850

```
 string words= "a*b*c*d*e^1*2*3*4*5^e*f*g*h*i^";
 string[] reslts = words.Split(new char[] { '*', '^' }, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T07:44:16.040

你有一个终止分隔符，所以最后的字符串是空的。

```
If (w != null) {                   
string[] splitR = w.Split(separator);
      If splitR.lenght > 4)
      {
               string first = splitR[0];
               string second = splitR[1];
               string third = splitR[2];
               string fourth = splitR[3];
               string fifth = splitR[4];
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T07:47:19.797

你得到了异常`Index was outside the bounds of the array`，因为在最后一个循环中，它只得到一个项目，我建议你检查五个项目：

```
words = "a*b*c*d*e^1*2*3*4*5^e*f*g*h*i^";
char[] del = { '^' };

string[] splitResult = words.Split(del);
foreach (string w in splitResult)
{
    char[] separator = { '*' };
    string[] splitR = w.Split(separator);
    if (splitR.Length>=5)
    {
        foreach (string e in splitR)
        {
            string first = splitR[0];
            string second = splitR[1];
            string third = splitR[2];
            string fourth = splitR[3];
            string fifth = splitR[4];
        } 
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T07:48:06.897

尝试这个：

```
string words = "a*b*c*d*e^1*2*3*4*5^e*f*g*h*i^";

char[] del = { '^' };

string[] splitResult = words.Split(del,StringSplitOptions.RemoveEmptyEntries);
foreach (string w in splitResult)
{
    char[] separator = { '*' };
    string[] splitR = w.Split(separator);
    if(splitR.Length==5)
    {
        string first = splitR[0];
        string second = splitR[1];
        string third = splitR[2];
        string fourth = splitR[3];
        string fifth = splitR[4];

        Console.WriteLine("{0},{1},{2},{3},{4}", first, second, third, fourth, fifth);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T07:51:03.453

一条线搞定一切

```
var f = words.Split(new char[] { '^' }, StringSplitOptions.RemoveEmptyEntries)
             .Select(x => x.Split(new char[] { '*' }).ToArray())
             .ToArray(); 
```

您的第二个循环执行 5 次相同的操作（您不使用`e`）。

你得到的异常是因为最后一个空字符串被包含在一个空数组中，导致内部循环中的索引超出范围异常。

# python - 使用绝对路径python导入json

> ID：15446826
> 
> 赞同：0
> 
> 时间：2013-03-16T07:38:31.680
> 
> 标签：python

我在 django 1.5 上使用 wadofstuff 的序列化程序[https://pypi.python.org/pypi/wadofstuff-django-serializers 。](https://pypi.python.org/pypi/wadofstuff-django-serializers)但是，它使用现在已弃用的 simplejson，因此我必须直接进入库文件`wadofstuff/django/serializers/json.py`并将 simplejson 更改为 json。问题是我不能`import json`，因为库文件也被命名`json.py`，所以它试图加载自己。我不想更改文件名，因为我团队中的其他开发人员肯定会杀了我。有没有办法从绝对路径导入json？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:06:31.930

对此（在 Python 2.x 中）最简单，也可能是最好的解决方法是不使用隐藏顶级 stdlib/site-packages 模块名称的模块。

换句话说，重命名`json.py`为其他名称。然后你可以从重`import json`命名的文件中（或者，更好的`try`是，然后`ImportError`回退到`simplejson`，这样你就不会破坏 2.5 的兼容性）。然后只需更改正在导入`serializers.json`的任何代码以导入新事物。

您应该能够针对 wadostuff 软件包提交错误，并提交您的补丁，它可能会进入 1.2 版。（似乎每年大约有一次更新，2013 年终于跟上 Python 2.6 和 Django 1.5 似乎也不是太不合理……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:54:42.393

另一种方法是从搜索路径中删除当前目录。假设（表示当前目录）位于（默认）`""`的开头：`sys.path`

```
sys.path.remove("")
import json
sys.path.insert(0, "") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:05:35.217

你可以把这条线放在上面`json.py`：

```
from __future__ import absolute_import 
```

这将告诉 Python，在导入此模块时，它应该仅在 sys.path 上查找模块，而不是相对于它（另请参见[http://www.python.org/dev/peps/pep-0328/#rationale-绝对进口](http://www.python.org/dev/peps/pep-0328/#rationale-for-absolute-imports)）。

编辑：

另请注意，`wadofstuff`' 模块实际上并不直接导入 simplejson：`from django.utils import simplejson`. *如果*您没有安装 simplejson ， [Django 代码](https://github.com/django/django/blob/stable/1.5.x/django/utils/simplejson.py)将默认使用 stdlib 版本。

 ** * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-16T07:49:28.663

1、尝试改变python的import-path：

```
sys.path.insert(0, "/path/to/your/json.py/dir")
import json 
```

2，尝试将_ _ init _ _.py文件添加到您的json.py的所有目录中，然后您可以使用这个

```
import a.b.c.json as myjson 
```

3，如果你不想改变任何一点，尝试一些深入的东西

```
__import__() 
```*

# android - ListView - 自定义适配器 - 数据库

> ID：15446827
> 
> 赞同：0
> 
> 时间：2013-03-16T07:38:41.887
> 
> 标签：android, android-listview, custom-adapter

安卓 2.3.3

我在数据库中有一个包含两列的表。我希望检索这些数据并将它们显示在具有两个文本视图的 ListView 中（第一个文本视图中的第一列和第二个文本视图中的第二列）并重复此操作，直到数据库中的所有行。我已经阅读了一些关于（自定义适配器和列表视图）如何做的示例，但是我阅读的越多，我就越感到困惑。

有人可以让我先了解如何做到这一点吗？我可以使用动态列表视图，但我希望使用静态列表视图。

这是列表视图中行的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingBottom="5dp"
    android:paddingTop="5dp" >

    <TextView
        android:id="@+id/txtView_History_Expression"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.50"
        android:text="Expression"
        android:textColor="#FFFFFF"
         />

    <TextView
        android:id="@+id/txtView_History_Result"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.50"
        android:text="Result"
        android:textColor="#316DA2" />

</LinearLayout> 
```

这是带有 ListView 的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/txtView_History_Header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:text="HISTORY"
        android:gravity="center"
        android:textSize="24dp"
        android:textColor="#316DA2"
        android:paddingTop="10dp"
        />

    <ListView
        android:id="@+id/lvHistory"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

我正在从数据库中检索数据并将其存储在光标中。我想从光标读取数据并将这些值提供给列表视图中的文本视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:47:04.277

你应该遵循这个流程

第 1 步 -> 从数据库中获取数据并使用 getter Setter 填充列表

步骤 2 -> 创建 BaseAdapter 类并在该类中给出该列表[这里您需要查看 BaseAdpter 绑定方法]

步骤 3 -> 将 BaseAdapter 对象与您的 ListView 绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:07:42.490

> 我在数据库中有一个包含两列的表。我希望检索这些数据并将它们显示在具有两个文本视图的 ListView 中（第一个文本视图中的第一列和第二个文本视图中的第二列）并重复此操作，直到数据库中的所有行。我已经阅读了一些关于（自定义适配器和列表视图）如何做的示例，但是我阅读的越多，我就越感到困惑。

你好。这个算法不是太棘手。您需要执行以下步骤：

1.  创建一些从 db 获取行的方法。您可以退货 `List<TableDataType>`或直接退货`Cursor`。
2.  创建一些子类`ListAdapter`以更好地控制它。
3.  设置`ListAdapter`为`ListView`。

## 例子：

从db获取数据的方法：

```
public List<DataType> getAll() {
   List<DataType> objects = new ArrayList<DataType>();
   DataType child = null;
   Cursor c = null;    
   try {
      String query = "select * from TableName";
      c = db.rawQuery(query, null);
      if (c.moveToFirst()) {
         child = new DataType();
         child.setId(c.getInt(c.getColumnIndex("id")));
         child.setName(c.getString(c.getColumnIndex("name")));
         objects.add(child);  
      }
      return objects;
   }
   finally {
      if (c != null) {
         c.close();
      }
      if (db != null) {
         db.close();
      }
   }
} 
```

然后，您可以创建自己的适配器，从方法扩展`BaseAdapter`并将数据设置为`TextView`s，`getView()`并创建`RowHolder`任意对象，其中包含每行的子项（小部件）

```
public View getView(int position, View convertView, ViewGroup parent) {
   if (convertView == null) {
      // inflate convertView and add row to RowHolder
      // set RowHolder as tag of row .. convertView.setTag(rowHolder);
   }
   else {
      // just recycle views so get existing RowHolder
      rowHolder = (RowHolder) convertView.getTag();
   }
   // set data to widget(s)
   rowHolder.getFirstTextView().setText(dataSource.get(position).getId());
   ...

} 
```

`RowHolder`可以看起来像

```
public class RowHolder {

   private View row;
   private TextView idColumn;

   public RowHolder(View v) {
      this.row = v;
   }

   public TextView getIdColumn() {
      if (idColumn == null) {
         idColumn = (TextView) row.findViewById(R.id.idColumnId);
      }
      return idColumn;

   }
} 
```

最后将适配器设置为`ListView`并完成工作。

## 笔记：

`DataType`是自己定义的对象。它在您的数据库中显示表，其中对象的属性与表中的列相同。

还有其他方法和来自 db Cursor 的返回以及`SimpleCursorAdapter`or的用法`CursorAdapter`。这里有很好的例子：

*   [使用 CursorAdapter 和 SQLite 数据库的 Android Listview 示例](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)
*   [SimpleCursorAdapters 和 ListViews](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T08:17:29.830

您所能做的就是看一下[Bind the List view from Database with Cursor Adapter](http://tausiq.wordpress.com/2012/08/22/android-list-view-from-database-with-cursor-adapter/)。还要检查[ListView Example using Cursor Adapter with SQLiteDatabase](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)。

我希望这会指导你。

谢谢。

# android - html 5 android 原生应用链接目标新窗口

> ID：15446833
> 
> 赞同：1
> 
> 时间：2013-03-16T07:39:42.203
> 
> 标签：android, html, jquery-mobile, hyperlink

我正在使用 Jquery 移动框架开发 HTML5 android 本机应用程序......最后为了构建我的应用程序，我使用了 Phonegap 构建功能，它工作得很好，

我的问题是我在我的应用程序中添加了一些链接，例如：

```
<a href="http://google.com" target="_blank">tap here</a> 
```

当我点击此链接时，此链接页面打开相同的窗口...我也添加了`target _blank`，但仍然是相同的页面，当我们点击此链接时，我需要打开一个新窗口或打开安装我的 android 设备的默认浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:04:41.590

最后我找到了我真正想要的答案......

将此代码添加`<access origin="http://yourdomain.com" onlyInBrowser="true" />`到`config.xml`

看到这个链接[http://community.phonegap.com/nitobi/topics/make_links_use_external_broswer_consistently](http://community.phonegap.com/nitobi/topics/make_links_use_external_broswer_consistently)

# .htaccess - .htaccess 重定向图像

> ID：15446835
> 
> 赞同：1
> 
> 时间：2013-03-16T07:39:54.490
> 
> 标签：.htaccess, redirect

我对来自 htaccess 的重定向规则仍然很陌生，并且已经成功重定向了我的页面，以便显示漂亮的 URL，但是有没有办法重定向图像以使其不是相对的？有没有一种方法或功能可以让我重定向图像而无需一一更改？

就像我在重定向页面后一样，我得到了相对 URL，因此我的图像在它们的链接中显示了一些额外的东西。

所以这是图片的实际网址

```
http://www.yousite.com/page/images/this.jpg 
```

但我得到了类似的东西

```
http://www.yoursite.com/images/page/images/this.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:10:22.587

我不确定这是否能解决问题，但您可以使用每个页面中的**BASE**元素来定义基本 URI，而不是修改所有链接：

来自[http://www.w3.org/TR/html4/struct/links.html#h-12.4](http://www.w3.org/TR/html4/struct/links.html#h-12.4)：

> 如果存在，BASE 元素必须出现在 HTML 文档的 HEAD 部分中，在任何引用外部源的元素之前。BASE 元素指定的路径信息仅影响该元素出现的文档中的 URI。

例子：

```
 <HEAD>
   <BASE href="ImagesBasePath">
 </HEAD> 
```

要不就：

```
 <HEAD>
   <BASE href="/">
 </HEAD> 
```

# c - 如何使用 sscanf 读取带有空格和数字的字符串？

> ID：15446836
> 
> 赞同：2
> 
> 时间：2013-03-16T07:39:56.810
> 
> 标签：c, string, scanf

我想从键盘中读取要插入到列表中的数据。比如我输入`ins "name_to_insert" 19930412`，字符串`name`应该是name_to_insert，**不带**引号`date`应该是19930412。我不知道如何正确指定第二个sscanf。

```
char op[4], name[30], s[50];
int date;
while (scanf("%[^\n]%*c", s)==1)
{
    sscanf(s, "%s", op);
    if (strcmp(op, "ins")==0)
    {
        sscanf(s, "%*s %[^0-9]%d", name, &date);
        printf("Name is %s and date is %d\n", name, date);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:33:58.757

我通过简单地从名称中删除第一个和最后一个字符来解决引号问题：

```
char op[4], nameTemp[30], *name, s[50];
int date;
while (scanf("%[^\n]%*c", s)==1)
{
    sscanf(s, "%s", op);
    if (strcmp(op, "ins")==0)
    {
        sscanf(s, "%*s %[^0-9]%d", nameTemp, &date);
        name=nameTemp+1;
        name[strlen(name)-2]='\0';
        printf("Name is %s and date is %d\n", name, date);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:57:18.730

你几乎是对的。假设引号是强制性的，您只需将扫描集转换说明符包含在引号中：

```
if (sscanf(s, "%*s \"%29[^\"]\" %d", name, &date) != 2)
    ...oops... 
```

注意`%29[^0-9]`; 这将字符串限制为 29 个字节加上`'\0'`适合您的 30 字节数组的终端 null。你可能也应该对你的外衣进行类似的检查`scanf()`，或者只是使用`fgets()`而不是`scanf()`那里。

如果引号是可选的，您必须更加努力，将名称扫描为非数字并在扫描后删除引号：

```
if (sscanf(s, "%*s %29[^0-9] %d", name, &date) != 2)
    ...oops... 
```

下面是一些测试代码：

```
#include <stdio.h>

static void scanner(const char *fmt, const char *s)
{
    char name[30];
    int  date;

    if (sscanf(s, fmt, name, &date) != 2)
        printf("Scan failed {%s} and {%s}\n", fmt, s);
    else
        printf("{%s} and {%s} => {%s} %d\n", fmt, s, name, date);
}

int main(void)
{
    char source[][30] =
    {
        "ins \"name in quotes\" 12345",
        "ins name without quotes 12345",
    };
    enum { NUM_SOURCE = sizeof(source) / sizeof(source[0]) };
    char format[][20] =
    {
        "%*s \"%29[^\"]\" %d",
        "%*s %29[^0-9] %d",
    };
    enum { NUM_FORMAT = sizeof(format) / sizeof(format[0]) };

    for (int i = 0; i < NUM_FORMAT; i++)
    {
        for (int j = 0; j < NUM_SOURCE; j++)
            scanner(format[i], source[j]);
    }
    return 0;
} 
```

样本输出：

```
{%*s "%29[^"]" %d} and {ins "name in quotes" 12345} => {name in quotes} 12345
Scan failed {%*s "%29[^"]" %d} and {ins name without quotes 12345}
{%*s %29[^0-9] %d} and {ins "name in quotes" 12345} => {"name in quotes" } 12345
{%*s %29[^0-9] %d} and {ins name without quotes 12345} => {name without quotes } 12345 
```

失败的转换是意料之中的；该格式查找引号，但没有任何引号。

我还使用了稍微不同的线束和格式字符串：

```
"%*s %1[\"]%29[^\"]%1[\"] %d" 
```

（传递两个 2 字符的字符串`q1`和`q2`, 来保存引号），但是当引号丢失时，扫描失败；引号不是可选的。

请注意，名称有尾随空格和第二种格式的引号；这些将不得不单独删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:26:42.243

```
sscanf(s, "%*s \"%[^\"]\" %d", name, &date); 
```

# java - 通过 JDBC 将 SQL 连接到托管 MySQL 服务器的 IP

> ID：15446837
> 
> 赞同：0
> 
> 时间：2013-03-16T07:40:12.980
> 
> 标签：java, mysql, jdbc, localhost

我正在尝试使用 JDBC 连接到 MYSQL 数据库。在 my.conf 文件中，我已经注释掉了 bind-address 选项。我正在使用 phpmyadmin。在 MYSQL 权限表中，它显示

用户： sumitb

主持人 ： ％

密码：是

全球特权：所有特权

格兰特：是的

但是下面的代码给了我错误：

```
 try {
        System.out.println("Loading driver...");
        Class.forName("com.mysql.jdbc.Driver");
        System.out.println("Driver loaded!");
    } catch (ClassNotFoundException e) {
        throw new RuntimeException("Cannot find the driver in the classpath!", e);
    }

    String url = "jdbc:mysql://172.27.20.124:3306/synsetSimilarity"; // Important
    String username = sumitb;
    String password = StaticValues.sqlPassword;
    Connection connection = null;
    try {
        System.out.println("Connecting database...");
        connection = DriverManager.getConnection(url, username, password);
        System.out.println("Database connected!");                      
    } catch (SQLException e) {
        e.printStackTrace();
        throw new RuntimeException("Cannot connect the database!", e);
    } finally {
        System.out.println("Closing the connection.");
        if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
    }
} 
```

我收到以下我无法理解的错误。如果我将 ip 更改为 localhost 或 127.0.0.1，它可以正常工作。

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:221)
at krsystem.ontology.wekaClustering.PopulateSimilarityDB.test(PopulateSimilarityDB.java:137)
at krsystem.ontology.wekaClustering.PopulateSimilarityDB.main(PopulateSimilarityDB.java:243)
Caused by: java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:241)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
... 16 more 
```

任何帮助，将不胜感激。

更新：从终端尝试时，我收到以下错误

```
 $mysql -u sumitb -h 172.27.20.124 -p
 Enter password: 
 ERROR 2003 (HY000): Can't connect to MySQL server on '172.27.20.124' (111 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:00:42.067

注释掉“绑定地址选项”后，您是否重新启动了 mysql？

如果您的 mysql 服务器与您的客户端在同一台机器上运行，为什么不使用 127.0.0.1 作为 ip 而不是 172.27.20.124？

如果您坚持使用172.27.20.124，请检查mysql端口是否打开。您可以从命令行使用 telnet：

```
telnet 172.27.20.124 3306 
```

看看它是否打开。或使用 nmap。您收到的错误表明您的客户端甚至无法与您的 mysql 服务器通信。

另外，正如 Abhinav Sarkar 所说，尝试从命令行连接到 mysql，指定您的主机，就像您在 java 中所做的那样，看看是否可行。如果您确实也在本地运行 mysql，请尝试将主机指定为 127.0.01 ( `mysql -u sumitb -h 127.0.0.1 -p`)

# iphone - iphone中sqlite的插入方法

> ID：15446839
> 
> 赞同：0
> 
> 时间：2013-03-16T07:40:34.603
> 
> 标签：iphone, ios, sqlite, insert

recordDict 是一个`NSMutableDictionary`与表的列名相同的键。

```
-(void) insertRecord:(NSMutableDictionary *)recordDict tableName:(NSString *)table{

    @try {

        if (sqlite3_open([databasePath UTF8String], &database)==SQLITE_OK) {

            NSMutableString *statement=[NSMutableString stringWithFormat:@"insert into %@ (",table];
            sqlite3_stmt *compiledStatement;
            NSArray *keys=[recordDict allKeys];
            for (int i=0; i< [keys count]; ++i) {
                [statement appendString:[keys objectAtIndex:i]];
                int j=i+1;
                if (j == [keys count]) {
                    [statement appendString:@")"];
                }
                else
                {
                    [statement appendString:@","];
                }
            }
            [statement appendString:@" values ("];
            for (int i=0; i < [keys count]; ++i) {
                [statement appendString:[recordDict objectForKey:[keys objectAtIndex:i]]];
                int j=i+1;
                if (j == [keys count]) {
                    [statement appendString:@")"];
                }
                else
                {
                    [statement appendString:@","];
                }
            }

            const char *sqlstatement = [statement UTF8String];
            if (sqlite3_prepare_v2(database, sqlstatement, -1, &compiledStatement, NULL)== SQLITE_OK)
            {
                if (SQLITE_DONE!=sqlite3_step(compiledStatement) ) 
                {
                    NSAssert1(0,@"Error when inserting  %s",sqlite3_errmsg(database));
                }
                else 
                {
                    //NSLog(@"Data inserted Successfully");
                }
                //[recordDict release];
            }
            else {
                //NSLog(@"Failed with error");
                NSAssert1(0,@"Error when creation %s",sqlite3_errmsg(database));

            }

        }
        sqlite3_close(database);
    }
    @catch (NSException *exception) {
        NSLog(@"Error info is %@",[exception description]);
    }

} 
```

此代码给出了所需的结果并适用于任何表。但我想要小代码。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:20:33.657

```
-(void)tableInsert:(NSString*)field1 Into:(NSString*)field2 intoTable:(NSString*)field3:(NSString*)field4
 {
char *err;

NSString *sql=[NSString stringWithFormat:@"INSERT OR REPLACE INTO 'tablename' ('f1' , 'f2','f3','f4') VALUES ( '%@','%@','%@','%@')",field1,field2,field3,field4];
NSLog(@"%@",sql);
if(sqlite3_exec(db,[sql UTF8String], NULL, NULL, &err)!=SQLITE_OK)
   {
    sqlite3_close(db);
    NSAssert(0,@"Error updating table");
   }
} 
```

this is simplest and short way.

# javascript - 参数是否会使 JavaScript GC 无法收集对象？

> ID：15446841
> 
> 赞同：2
> 
> 时间：2013-03-16T07:40:43.037
> 
> 标签：javascript, garbage-collection

```
var person = {
    name: 'John'
};

function Pet1(person) {
    var owner = person.name;
    this.showOwner = function() {
        alert(owner);
    }
}

function Pet2(person) {
    this.showOwner = function() {
        alert(person.name);
    }
}

var pets = [new Pet1(person), new Pet2(person)];

...

pets.splice(0, 1);
pets.splice(0, 1); 
```

上面的哪个代码阻止了 JS GC 在 Pet1 和 Pet2 超出范围或没有更多引用时不收集它们的实例。我知道的是 Pet2 但你不认为 Pet1 也能阻止 JS GC 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:06:08.723

关于您评论中的问题：

> 人（在这种情况下是全局的）变量是否会阻止 Pet1 和 Pet2 的实例被垃圾收集（如果超出范围并且没有更多引用）

不，为什么要这样？`person`不引用 Pet 实例，反之亦然。一旦您从数组中删除了对 Pet 实例的引用`pets`，就没有什么可以阻止 GC 收集它们（假设您的 " `...`" 代码不会创建对`pets[0]`or的其他引用`pets[1]`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:51:31.430

答案是“视情况而定”。

就现代引擎而言，如果`person`从系统中的其他任何地方删除它，它仍然可以被收集，即使它在论点中被提及，因为尽管它在闭包内，但它再也不会从任何公开的方法中被引用可用的。

因此，支持删除范围的残留部分的引擎可以轻松地在该对象上运行 GC。

那么，问题是哪些引擎可以做到这一点，以及这些引擎的哪些版本可以做到这一点？
我不确定这个问题的答案。

只是它是可能的，但可以在旧的或较小的 JS 引擎上保持驻留在内存中。

## 编辑

可以这样想：`var pet1 = new Pet1(person);` Pet1 使用 person 为 pet1 设置值。
人们对pet1一无所知。

`var pet2 = new Pet2(person);`
pet2 具有查找人员的功能，以读取值。
因此，即使代码中再也没有提到人员，也无法将其删除，因为 pet2 可能会调用需要查找人员的函数……
人员仍然不知道 pet2 是什么。

当 pet2 不再需要时，当它从上面的数组中删除时，当每个引用它的单个变量/对象属性/数组索引都删除其引用时，包括删除在它的作用域内创建的函数存在于其中并且有对其的引用，不知何故，它可以被删除，因为没有其他代码正在寻找/挂在pet2上。

一旦 pet2 消失，person 就不再用于其他任何地方。
因此，可以标记人员以供收集。

GC 就是关于什么可以访问一个东西。
如果其他事情还在谈论对象，那么该对象是不允许被移除的。
一个实例可能依赖于 50 个参数，并引用了 120 个其他外部对象，但如果没有其他人关心*它*，该实例仍然可以被收集。

# php - 将值插入mysql表

> ID：15446849
> 
> 赞同：-3
> 
> 时间：2013-03-16T07:41:44.957
> 
> 标签：php, mysql, session

我在将作为外键的值插入另一个表时遇到问题。

我有两张桌子，一张是用户，另一张是薪水。这是我的工资表，其中有 empId，它是另一个名为 users 的表的外键

```
$query = "INSERT INTO paycheck(payCheckId, jobId, payRate,
            jobLocation, hoursWorked, startPeriod, endPeriod, empId)
          VALUES('', '$pay_rate', '$job_location', '$hours',
            '$start', '$end', 'DONT KNOW WHAT TO PUT HERE ')";
$result = mysqli_query($db, $query); //we make the query 
```

我不确定将什么值放入 empId，所有值都来自文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:54:28.823

这是创建外键表示表的方法

```
CREATE TABLE `ffxi_characterJob` (
`serverID` int(11) NOT NULL,
`userid` int(10)unsigned NOT NULL,
`characterName` varchar(255) NOT NULL,
`jobAbbr` char(4) NOT NULL,
`jobLevel` int(11) default '0',
PRIMARY KEY (`serverID`,`userid`,`characterName`,`jobAbbr`),
INDEX (`jobAbbr`),
CONSTRAINT FOREIGN KEY (`serverID`,`userid`,`characterName`) REFERENCES `ffxi_characters` (`serverID`,`userid`,`characterName`) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT FOREIGN KEY (`jobAbbr`) REFERENCES `ffxi_jobType` (`jobAbbr`) ON DELETE CASCADE ON UPDATE CASCADE
) TYPE=InnoDB; 
```

因为如果您像这样创建，那么当您更改第一个（主）表中的值时它会自动删除或更新，插入您需要放置与第一个表的列值匹配的值

* * *

```
emp_id name value
  1    aaa   24
  2    bbb   23
  3    ccc   25
  4    ddd   27

pur_id emp_id amount
 000      1    500
 001      2    100
 002      1     50 
```

* * *

在第二个表中，emp_id 是第一个表 emp_id 的外键引用，因此您需要第一个表中的匹配值

```
$query = "INSERT INTO paycheck(payCheckId,jobId,payRate,jobLocation,hoursWorked,startPeriod,endPeriod, empid)
VALUES('','$pay_rate','$job_location','$hours','$start','$end', 'value that you want t0 match from first table')"; 
```

# vb.net - 无法运行在 Visual Studio 2010 中创建的 vb.net 应用程序的构建

> ID：15446850
> 
> 赞同：-1
> 
> 时间：2013-03-16T07:41:45.773
> 
> 标签：vb.net, visual-studio-2010, build

我使用 Visual Studio 2010 在 vb.net 中开发了一个桌面应用程序。

我想每次都在不同的电脑上运行该应用程序。为此，我创建了该应用程序的构建。

但除了我的电脑之外，我无法运行此应用程序。

我还在其他电脑上安装了 dot net framework 4.0，但它给出了错误“未安装 WIC 组件”。

我应该怎么做才能每次在不同的计算机系统中运行我的应用程序？，运行应用程序的先决条件是什么？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:04:02.400

[谷歌搜索](https://www.google.com.au/search?q=WIC%20component%20not%20installed)该错误似乎表明您需要在其他计算机上安装 Windows 映像组件。

[64 位下载](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=1385)

[32 位下载](http://www.microsoft.com/en-us/download/details.aspx?id=32)

从系统要求来看，我猜 Windows 7 及更高版本默认包含此功能。

> 支持的操作系统：
> 
> *   视窗服务器 2003
> *   Windows Server 2003 R2 数据中心版（32 位 x86）
> *   Windows Server 2003 R2 企业版（32 位 x86）
> *   Windows Server 2003 R2 标准版（32 位 x86）
> *   Windows XP 服务包 2
> *   视窗 XP SP2
> *   视窗服务器 2003

# c# - 当 url 只能通过首先使用 RDP 访问时访问 SQL Reports 服务器

> ID：15446851
> 
> 赞同：0
> 
> 时间：2013-03-16T07:41:51.573
> 
> 标签：c#, asp.net, reporting-services, rdp

我有一个客户需要我建立一个从单独的服务器中提取 sql 报告的网站。目前，访问报告服务器的 url 的唯一方法是首先 rdp 进入该服务器。我尝试创建一个 Web 服务代理类，但由于增加了保护，该 url 无法解析。

有什么方法可以让我在不删除 rdp 的情况下从另一台服务器提取我的 asp.net 应用程序中的报告？这是我第一次尝试这个，所以我不确定我是否以正确的方式进行此操作，或者是否可以使用 rdp 从客户端 Web 应用程序访问该服务器。

编辑

我的应用程序需要做的就是根据他们的登录凭据向特定的客户/组显示预先制作的报告。这些客户/组不会创建或更改报告（至少目前不会）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:02:16.600

我想你会发现它很可能是不可能的，或者可能很难做到。

也许您可以通过复制或夜间批量更新获取数据库的副本并针对它运行报告，也许您可​​以编写一台机器到远程桌面并共享其上的驱动器并让它备份数据库或类似的东西。

在任何情况下，如果您无法获得数据库的副本，我认为您不可能生成任何类型的允许用户输入生成它的报告。

编辑：

看起来[这个](https://stackoverflow.com/a/13494086/351614)答案会让您开始连接和触发文件副本

# jquery - 如何始终触发 jQuery then() 回调？

> ID：15446856
> 
> 赞同：2
> 
> 时间：2013-03-16T07:42:09.637
> 
> 标签：jquery, promise

我有一种情况，我有几个返回延迟对象的函数。当所有延迟对象都被解析时，我将这些延迟对象传递给`$.when()`并执行回调。`then()`

```
$.when(func1(), func2(), func3()).then(function() {
    alert('Hello World!');
}); 
```

有时这三个函数都没有返回任何延迟对象，在这种情况下，`then()`回调永远不会执行。是否有一种干净的方法来确保`then()`始终调用回调？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T07:45:14.587

您可以使用 .always() 而不是 .then() ，它无论如何都会执行。

# php - Phpcloud 和 Mysql Workbench 连接

> ID：15446857
> 
> 赞同：0
> 
> 时间：2013-03-16T07:42:31.053
> 
> 标签：php, mysql, mysql-workbench, workbench

自星期五以来，我一直在努力如何将 Mysql Workbench 与 Phpcloud.com Mysql 实例连接起来？下面有错误，我得到[图像](http://zapodaj.net/70b091f9145b8.png.html)

有人让它正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:46:27.010

有关初始包的错误消息通常表明在该地址和端口未找到服务器。请记住，由于 SSH 隧道，远程服务器看起来就像是本地服务器。隧道的远程端也可以在本地看到服务器，因为它与 MySQL 服务器位于同一台机器上（我假设）。所以你需要的是 MySQL 服务器的 localhost 地址。要检查的另一件事是端口： 1) SSH 连接是否真的适用于端口 22？2）您的防火墙是否阻止了此端口？3) 远程 MySQL 服务器真的在监听 3306 端口吗？

作为侧节点：在 Windows 上，您通常只需在错误消息中按 Ctrl+C 即可将消息复制到剪贴板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:09:47.237

请查看[http://www.phpcloud.com/help/accessing-the-db的第二部分“管理您的数据库实例”](http://www.phpcloud.com/help/accessing-the-db)

您需要使用 SSH 客户端（在您的情况下最好使用 putty）建立隧道，然后在端口 13306（本地）上访问服务器。

我不使用 Workbench，但我认为它会尝试建立常规的 SSH 连接而不是隧道，这将不起作用。

# c - 使用 C 中的位显示卡片的值

> ID：15446864
> 
> 赞同：-1
> 
> 时间：2013-03-16T07:43:02.120
> 
> 标签：c, bit-manipulation, bit, bit-shift

我有一个纸牌游戏，我需要在洗牌后显示纸牌的价值我使用值显示纸牌的价值`(x >> 1)& 0xf`，其中 x 遍历 13 张纸牌的列表，这是因为第 1-4 位是纸牌的价值

以上是卡片类型

但是当我发现卡中的最高对时，它只在我使用`values[(afterfindingpairs[a]&0xf0)>>4]`.

这是因为 0-4 位是对数，而 4-7 位是对类型字节中的对值。

当我使用时，它只会将最高对显示为 Ace

`values[(afterfindingpairs[a]&0xf)>>4]`.

我很困惑，十六进制 0xf0 不会处理 8 位而不是 4-7 之间的 4 位对类型，这将被发现`values[(afterfindingpairs[a]&0xf)>>4]`是不正确的。

非常感谢解释为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:40:16.230

您似乎想要操纵 8 位值，提取各种位范围。但是，在某些情况下，您这样做的方式是丢弃*所有*位。

8 位从最低有效位（位 0，十进制中的“1”）到最高位（位 7，十进制中的“128”）排列。

因此，如果我们有二进制数`10010110`，这将表示数字 (128 + 16 + 4 + 2)，或 150，或十六进制的 0x96。

如果对这样的数字应用右移，则这些位将向右移动适当数量的位。因此，如果我们对`>>4`上面的数字进行处理，结果将是`00001001`- 或 9。我假设我们在这里处理的是无符号值，所以高位将用“0”填充。请注意，结果是原来的 4-7 位现在是 0-3 位，而原来的 0-3 位已经被丢弃。

如果你`and`有两个数字，结果是只有在两者中设置的位才会在结果中设置。所以有效地这是屏蔽位。如果你用 屏蔽`0xf0`，这是二进制`11110000`的，所以只有高位 4-7 将保留在结果中，低位 0-3 将被设置为零。

接受你的陈述：

```
values[(afterfindingpairs[a]&0xf0)>>4] 
```

根据我上面的解释，表达式`afterfindingpairs[a]&0xf0`将简单地将位 0-3 设置为零，保留位 4-7。

表达式的下一部分`>>4`将把剩余的位向下移动，使它们成为结果的 0-3 位。请注意，这*也*丢弃了原始位 0-3，使先前的掩码操作变得多余（除非我们*不*处理 8 位值......）

你的另一个说法：

```
values[(afterfindingpairs[a]&0xf)>>4] 
```

更有问题。您首先应用掩码 ( `0xf`) 仅保留位 0-3，将所有其他位设置为零。然后，您通过将位 4-7（已经为零）向下移动到它们的位置来应用丢弃位 0-3 的移位。

换句话说，后一个表达式始终为零。

# javascript - 编译完文件中的所有 CSS 和另一个中的 JS 后，接下来要遵循哪些步骤？

> ID：15446865
> 
> 赞同：1
> 
> 时间：2013-03-16T07:43:10.670
> 
> 标签：javascript, css, wordpress-theming, minify

JS和CSS文件在里面，在哪里？我应该删除单独的 CSS 和 JS 文件吗？我应该更改我的标题（删除代码行）吗？我应该写什么来在标题中调用 CSS 和 JS？

一步一步，“压缩”你的主题的 CSS 和 JS 文件后你会做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:03:36.707

您不必删除任何内容。只需确保您只链接到 header.php 中的新缩小版本。只需标记指向旧的未压缩 CSS 和 js 文件的链接，如下所示：

```
<link rel="stylesheet" href="style_minified.css" media="screen" />
<!--
<link rel="stylesheet" href="style.css" media="screen" />
--> 
```

# node.js - 在 Eclipse 中安装 node.js 模块

> ID：15446866
> 
> 赞同：12
> 
> 时间：2013-03-16T07:43:15.647
> 
> 标签：node.js, eclipse, socket.io, node-modules

我正在尝试在 Eclipse 环境中使用 node.js 和 socket.io 开发一个聊天应用程序。我已经在 Eclipse 中安装了 node.js，但我不知道如何安装 node 模块，例如 expresss、socket io 等。

请任何人告诉我如何在 Eclipse 环境中设置节点模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-23T11:10:34.880

来自[https://groups.google.com/forum/#!topic/nodeclipse/FgUci2ZXpoQ](https://groups.google.com/forum/#!topic/nodeclipse/FgUci2ZXpoQ)

1.  双击 Package Explorer 上的 package.json 将其打开。
2.  将要安装的内容添加到依赖项部分，然后保存。
3.  在 Package Explorer 中选择 package.json，右击打开上下文菜单，然后选择 [Run As]-[npm install] 菜单。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T10:01:45.760

我不认为有一个 eclipse 集成的方式来做到这一点。我的建议是您从[http://nodejs.org/download/](http://nodejs.org/download/)下载 node.js+npm ，然后打开一个终端/cmd 并在您的 node.js 项目目录中执行“npm install myPackage”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-26T01:03:38.887

我正在运行 Eclipse Mars……我是这样做的……

1.  [从 Eclipse 市场http://www.nodeclipse.org/](http://www.nodeclipse.org/)安装 Nodeclipse
2.  创建一个新的 node.js express 项目，File -> New Node.Js Express Project
3.  打开 package.json 文件
4.  将我的 npm 包添加到 package.json 作为依赖项（复制 express 依赖项的格式）
5.  **保存 package.json** （似乎很明显，但在测试时它让我明白了！）
6.  Right click the package.json, Run As -> NPM Install
7.  Right click the eclipse project folder, Refresh
8.  Open node_modules... BOOM! You will see your new module installed in eclipse

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T19:39:46.383

您提到安装 express，但如果您使用的是 nodeclipse，则不需要安装它。

生成一个快速项目：选择 File-New-Project 菜单。选择 Node-Express Project，然后选择 Next 按钮。输入项目名称并选择完成按钮。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-28T06:16:15.747

要在 Nodeclipse 中安装 express 模块，请访问

**Windows -> 首选项-> Nodeclipse -> 选择快速路径字段**

并在您的本地主机上输入已安装 Express 的位置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-02T22:19:59.007

通过命令提示符导航到您的项目文件夹。在那里，运行 npm install 'module' 命令。模块安装后，在 eclipse 中刷新你的项目。一个 javascript 库应该出现在您的项目中，其中包含您刚刚安装的模块的库。运行您的代码，它应该可以工作并识别您尝试需要的模块。希望这可以帮助。

# python - Python - 将填充列表作为构造函数的参数传递给对象中的空列表

> ID：15446867
> 
> 赞同：0
> 
> 时间：2013-03-16T07:43:27.620
> 
> 标签：python, list, constructor, class-method

stackoverflow 的新手和 Python 的新手。我感谢所有的帮助！我正在尝试调用一个类的构造函数并将其交给一个填充列表。但是，创建对象时，列表为空。调试器显示列表已填充

```
 manager = PathManager()

    # create cities
    city1  = City(60, 200)
    manager.addCity(city1)

    city2  = City(180, 200)
    manager.addCity(city2)

    city3  = City(80, 180)
    manager.addCity(city3)

    city4  = City(140, 180)
    manager.addCity(city4)

    city5  = City(20, 160)
    manager.addCity(city5)

    city6  = City(100, 160)
    manager.addCity(city6)

    city7  = City(200, 160)
    manager.addCity(city7)

    city8  = City(140, 140)
    manager.addCity(city8)

    city9  = City(40, 120)
    manager.addCity(city9)

    city10 = City(100, 120)
    manager.addCity(city10)

    pop = Population(manager, True)
    # debugger shows pop is a list containing expected elements

    # call the classmethod      
    pop = Genetics.evolvePop(pop, manager) 
```

这是遗传学类的第一部分：

```
class Genetics:

# default values
global elitism, tournSize, mutRate
mutRate = 0.015
tournSize = 5
elitism = True

# evolve the population one generation
@classmethod
#@fixme -- pop is empty... why?
def evolvePop(cls, pop, manager):
    newPop = Population(manager, False)

    # testing
    #cls.tournamentSelection(pop, manager).displayCities())

    elitismOffset = 0
    if elitism:
        newPop.paths.insert(0, pop.getFittestPath())
        # remove old end
        if len(newPop.paths) > 10:
            newPop.paths.pop()
        elitismOffset = 1

    # crossover the population
    for index in range(elitismOffset, 10):
        #newPath = cls.crossover(cls.tournamentSelection(pop, manager), cls.tournamentSelection(pop, manager), manager)
        pathOne = cls.tournamentSelection(pop, manager); print('path one')
        pathOne.displayCities()
        pathTwo = cls.tournamentSelection(pop, manager); print('path two')
        pathTwo.displayCities()
        newPath = cls.crossover(pathOne, pathTwo, manager)
        newPop.storePath(index, newPath)
    # mutate the population for randomness
    #print(len(newPop))
    #for index in range(elitismOffset, len(newPop)):
        #cls.mutate(newPop.paths[index])

    return newPop
    ... 
```

有任何想法吗？

# php - 无法从控制器获取 $_post 值

> ID：15446879
> 
> 赞同：1
> 
> 时间：2013-03-16T07:44:49.740
> 
> 标签：php, codeigniter, jquery

我收集国家和州的代码，我从选择标签中选择一个国家名称，并在国家下所有州显示在下一个选择框中。所有数据均来自 MySQL，并由 jQuery、ajax 处理。

我无法从控制器获得价值。为什么？

```
$data=$this->input->post('state',true) 
```

我的代码如下：模型中的 CI

```
<?php
/* File : ajax.php
 * Author : Manish Kumar Jangir
*/
class AJAX {

    private $database = NULL;
    private $_query = NULL;
    private $_fields = array();
    public  $_index = NULL;
    const DB_HOST = "localhost";
    const DB_USER = "root";
    const DB_PASSWORD = "";
    const DB_NAME = "csc";

    public function __construct(){
        $this->db_connect();                    // Initiate Database connection
        $this->process_data();
    }

    /*
     *  Connect to database
    */
    private function db_connect(){
        $this->database = mysql_connect(self::DB_HOST,self::DB_USER,self::DB_PASSWORD);
        if($this->database){
            $db =  mysql_select_db(self::DB_NAME,$this->database);
        } else {
            echo mysql_error();die;
        }
    }

    private function process_data(){
        $this->_index = ($_REQUEST['index'])?$_REQUEST['index']:NULL;
        $id = ($_REQUEST['id'])?$_REQUEST['id']:NULL;
        switch($this->_index){
            case 'country':
                $this->_query = "SELECT * FROM countries";
                $this->_fields = array('id','country_name');
                break;
            case 'state':
                $this->_query = "SELECT * FROM states WHERE country_id=$id";
                $this->_fields = array('id','state_name');
                break;
            case 'city':
                $this->_query = "SELECT * FROM cities WHERE state_id=$id";
                $this->_fields = array('id','city_name');
                break;
            default:
                break;
        }
        $this->show_result();
    }

    public function show_result(){
        echo '<option value="">Select '.$this->_index.'</option>';
        $query = mysql_query($this->_query);
        while($result = mysql_fetch_array($query)){
            $entity_id = $result[$this->_fields[0]];
            $enity_name = $result[$this->_fields[1]];
            echo "<option value='$entity_id'>$enity_name</option>";
        }
    }
}

$obj = new AJAX;

?> 
```

这是我的看法：

```
<html>
<head>
<title>Country State City Dependent Dropdown using Ajax</title>
<script type="text/javascript" src="<?php echo base_url(); ?>js/jquery-1.5.2.min.js"></script>
<style type="text/css">
body{
    font-family:arial;
    color:#666;
}
form select{
    padding:5px;
    border:1px solid #aaa;
    border-radius:4px;
    width:120px;
}

form label{
    font-size:12px;
    font-weight:bold;
}
</style>
<script type="text/javascript">
$(document).ready(function(){
    load_options('','country');
});

function load_options(id,index){
    $("#loading").show();
    if(index=="state"){
        $("#city").html('<option value="">Select city</option>');
    }
    $.ajax({
        url: "<?php echo base_url(); ?>index.php/welcome/includ.html?index="+index+"&id="+id,
        complete: function(){$("#loading").hide();},
        success: function(data) {
            $("#"+index).html(data);
        }
    })
}
</script>
</head>
<body>
<div style="width:800px; margin:auto;padding-top:100px;">
<h1>Country,State,City dynamic dependent dropdown using Ajax and Jquery</h1>
<form action="<?php echo base_url(); ?>index.php/city_ajax/show_result" method="post">
        <label>Select Country</label>
        <select id="country" onchange="load_options(this.value,'state');">
            <option value="">Select country</option>
        </select>
        &nbsp;&nbsp;&nbsp;
        <label>Select State</label>
        <select id="state" onchange="load_options(this.value,'city');">
            <option value="">Select state</option>
        </select>
        &nbsp;&nbsp;&nbsp;
        <label>Select city</label>
        <select id="city">
            <option value="">Select City</option>
        </select>
        <img src="<?php echo base_url(); ?>loader.gif" id="loading" align="absmiddle" style="display:none;"/>
</form>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:18:25.023

正如你所说的 CI 模型：

在 CodeIgniter 中，您必须将 CI_Model 扩展为：

```
 class Exam_model extends CI_Model {} 
```

为了使它成为 CI 模型，它只是一个 .php 文件

和

对这个

```
 $data=$this->input->post('state',true); 
```

您正在尝试评估需要将**ajax 类型**作为 POST的**post参数**

 **```
 url: "<?php echo base_url(); ?>index.php/welcome/includ.html?index="+index+"&id="+id,
    complete: function(){$("#loading").hide();},
    type:"POST", // you have to mention post type here
    success: function(data) {
        $("#"+index).html(data);
    } 
```

希望它会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:10:16.233

选择语句：

`country_id=$id`应该 `country_id='" . $id . "'`

`state_id=$id`应该 `state_id='" . $id . "'`**

# shell - Magento catalog_product_flat 使用 Shell 重新索引错误，并且无法通过截断表来纠正

> ID：15446881
> 
> 赞同：1
> 
> 时间：2013-03-16T07:44:59.757
> 
> 标签：shell, magento, phpmyadmin

我正在尝试使用 Shell 命令在 magento 中重新索引我的 catalog_product_flat 表。重新索引失败。出现以下错误。

我在这个站点上看到了一个解决方案来“截断”catalog_product_flat_# 表，然后重新索引。即使这样，使用 shell 的重新索引也失败了。现在catalog_product_flat_1-6的6个表都是空的。该网站仍在运行，但天知道到什么时候。请帮助

产品平面数据索引处理未知错误：带有消息“SQLSTATE [42000]”的异常“PDOException”：语法错误或访问冲突：1118 行大小太大。所用表类型的最大行大小（不包括 BLOB）为 65535。您必须将 /home/kya/public_html/lib/Zend/Db/Statement/Pdo.php:228 中的某些列更改为 TEXT 或 BLOB' 堆栈跟踪：#0 /home/kya/public_html/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array) #1 /home/kya/public_html/lib/Varien/Db/Statement/ Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array) #2 /home/kya/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array) #3 /home/ kya/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array) #4 /home/kya/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238 ):`ca...', Array) #5 /home/kya/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('ALTER TABLE`ca...', Array) #6 /home/kya/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(340): Varien_Db_Adapter_Pdo_Mysql->query('ALTER TABLE`ca...') #7 /home/kya/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(839): Varien_Db_Adapter_Pdo_Mysql->raw_query('ALTER TABLE`ca...') #8 /home/kya/public_html/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(799): Varien_Db_Adapter_Pdo_Mysql->addColumn('catalog_product... ', 'leg_angles', Array) #9 /home/kya/public_html/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(1390): Mage_Catalog_Model_Resource_Product_Flat_Indexer->prepareFlatTable(1) # 10 /home/kya/public_html/app/code/core/Mage/Catalog/Model/Product/Flat/Indexer.php(296): Mage_Catalog_Model_Resource_Product_Flat_Indexer->reindexAll() #11 /home/kya/public_html/app/code/ core/Mage/Catalog/Model/Product/Indexer/Flat.php(336): Mage_Catalog_Model_Product_Flat_Indexer->reindexAll() #12 /home/kya/public_html/app/code/core/Mage/Index/Model/Process.php( 209): Mage_Catalog_Model_Product_Indexer_Flat->reindexAll() #13 /home/kya/public_html/app/code/core/Mage/Index/Model/Process.php(255): Mage_Index_Model_Process->reindexAll() #14 /home/kya/public_html/shell/indexer. php(158): Mage_Index_Model_Process->reindexEverything() #15 /home/kya/public_html/shell/indexer.php(198): Mage_Shell_Compiler->run() #16 {main

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:18:24.367

看看这个：使用的表类型的最大行大小，不包括 BLOB，是 65535。你必须将一些列更改为 TEXT 或 BLOB'

解决方案：您有太多可搜索的属性。因此，重新索引期间的 magento 将填充所有属性。这导致了一个非常大的行。

我建议您删除所有平面表，因为一旦创建了列，它们就不会被删除。

还要确保属性数据类型需要更少的空间。因为行大小是存在问题的地方。

# php - PHP - 从文本文件中获取文本并在“循环”中使用它们！

> ID：15446884
> 
> 赞同：0
> 
> 时间：2013-03-16T07:45:18.953
> 
> 标签：php, function, loops, foreach, genfromtxt

我是 php 新手，我真的需要一些关于这个脚本的帮助。我有一个带有名称的文本文件（serverlist.txt）。第一行代码获取这些名称。我想让它取一个名字，把它放到code()的最后一点，然后重复这个过程，直到serverlist.txt中没有文本行。

请帮我。

```
 <?php 
$file = 'serverlist.txt';
$content = "";
if($handle = fopen($file, 'r')) {
    while(!feof($handle)) {
        $content .= fgets($handle);
            foreach($content as $cont) {
            }
    }
    fclose($handle);
}

?>

<html>
<head>
</head>
<body>
<img src="http://minecraft.net/skin/<?php 

echo $cont; ?>.png" alt="">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:50:39.247

```
<?
$content = array ();

$fd = fopen ('serverlist.txt', 'r');
while ($line = trim (fgets ($fd)))
{
    $content [] = $line;
}
fclose ($fd);
?>

<html>
  <body>
    <? foreach ($content as $cont) { ?>
      <img src="http://minecraft.net/skin/<?= $cont ?>.png">
    <? } ?>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:54:17.467

看看这是否适合你...

```
<html>
<head>
</head>
<body>
<?php 
    $file = 'serverlist.txt';
    $content = "";

    if($handle = fopen($file, 'r')) {
        while(!feof($handle)) {
            $content .= fgets($handle);
            foreach($content as $cont) {
                echo '<img src="http://minecraft.net/skin/'.$cont.'.png" alt="">';
            }
        }
    fclose($handle);
    }
?>
</body>
</html> 
```

似乎您要做的就是使用 $cont 来修改 img src。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:54:59.850

您可以将服务器名称的输出存储在一个变量中，然后将它们输出到您的 HTML 正文中。

```
<?php 
  $file = 'serverlist.txt';
  $servers = '';
  if ($handle = fopen($file, 'r')) {
    while (!feof($handle)) {
      $content = trim(fgets($handle));
      $names = explode(' ', $content);
      foreach ($names as $name) {
        $servers .= '<img src="http://minecraft.net/skin/' . $name. '.png" alt="">';
      }
    }
   fclose($handle);
  }
?>

<html>
<head>
</head>
<body>
  <?php echo $servers; ?>
</body>
</html> 
```

# ios - googlemap sdk 与 ios 架构有问题

> ID：15446886
> 
> 赞同：2
> 
> 时间：2013-03-16T07:45:51.147
> 
> 标签：ios, xcode, google-maps, google-maps-sdk-ios

由于苹果地图adk在街道细节上没有很详细，而且谷歌已经提供了新的sdk，我试图把它作为当前ios 6的解决方法，我面临的问题是它抛出错误无论您在设置中放置了什么架构，以下都是错误，尽管在 sdkmapdemo 运行时它可以正常工作:(

```
 Undefined symbols for architecture armv7:
  "___gxx_personality_sj0", referenced from:
      +[GMSServices provideAPIKey:] in GoogleMaps(GMSServices.o)
      +[GMSServices openSourceLicenseInfo] in GoogleMaps(GMSServices.o)
      +[GMSServices services] in GoogleMaps(GMSServices.o)
      _GMS_NSClassFromString in GoogleMaps(GMSRenames.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T07:54:32.597

您是否添加`libstdc++.dylib`到项目的框架中？

# c - UDP - 以块的形式从队列中读取数据

> ID：15446887
> 
> 赞同：3
> 
> 时间：2013-03-16T07:46:00.177
> 
> 标签：c, sockets, udp, datagram

我正在使用 UDP（在 C 中）实现一个小型应用程序。服务器以给定数量的块（例如 100 字节/调用）将给定文件中的数据发送给客户端。客户端下载文件并将其保存在某处。问题是客户端可以接收一个参数，说明要读取/调用多少字节。
我的问题是当服务器发送 100 字节/调用，而客户端设置为只读 15 字节/调用。其他 85 个字节丢失，因为消息已从 UDP 队列中删除。

有没有办法分块读取这些消息而不将它们从队列中删除，直到它们被完全读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T08:26:14.577

UDP 不允许像 TCP 那样进行分块读取。读取 UDP 消息是一个全有或全无的操作，您要么完整阅读整个消息，要么根本不阅读。中间没有。因此，基于 UDP 的协议要么使用固定大小的消息，要么要求双方动态协商消息大小（例如，像 TrivialFTP 那样）。

UDP 协议没有理由要求为每条消息发送一个字节大小。消息大小本身隐含地规定了消息内部数据的大小。

如果您在实际读取消息之前绝对必须确定消息大小，您可以尝试`recvfrom()`使用`MSG_PEEK`标志调用，并给它一个大缓冲区以将数据复制到（至少 64K，UDP 消息永远不会超过，除非您使用的是 IPv6 Jumbograms，但这是一个单独的问题）。输出将告诉您仍在队列中的消息的实际大小。但是，如果你走这条路，那么你也可以只删除`MSG_PEEK`标志并始终使用 64K 缓冲区读取，因此不会由于缓冲区大小不足而丢失数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:27:17.867

您可以创建一个线程以无限地从 UDP 缓冲区读取数据并将数据保存到循环缓冲区。比客户端以您的速度消耗数据。如果 Buffer 溢出，你什么都做不了。因为服务器的发送速度比客户端的快。

# java - 如何设置 ActionListener 来监听另一个 ActionListener 以触发不同类中的事件？

> ID：15446893
> 
> 赞同：0
> 
> 时间：2013-03-16T07:47:14.147
> 
> 标签：java, swing, spring-mvc, jframe, jpanel

我试图弄清楚如何让一个班级听另一个班级。所以这就是想法。

我有一个`MainFrame`类，它只是一个容器类，JFrame 容器，它接受 JPanel 类型的参数。基本上我希望这个容器类能够根据我的其他类`FrameSwitcher`告诉它做什么来在帧之间切换。

其他类是：`FrameSwitcher, MainMenu and ScoreBoards`.

这个想法是，比方说`MainMenu`，将包含 4 个按钮，每个按钮都会收听，但不会更改帧。相反，它会以某种方式 - 这是我需要帮助的部分 - 发送到单击了`FrameSwitcher`什么按钮，然后将发送此信息`MainFrame`以切换到适当的帧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:08:05.310

您可能正在寻找[观察者模式，](http://en.wikipedia.org/wiki/Observer_pattern)[这里](https://stackoverflow.com/a/3072979/230513)讨论过。特别是，[此处](https://stackoverflow.com/a/10523401/230513)[`PropertyChangeListener`](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeListener.html)说明的 a 可能是松散耦合的有用方法。

还可以考虑让每个视图导出`Action`从 a 中选择自己的一个`CardLayout`，如[*如何使用操作*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和[*如何使用 CardLayout*](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)中所建议的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T07:51:05.587

`FrameSwitcher`应继续`ActionListeners`添加到菜单中。单击它会更改其状态并调用 MainFrame 的方法`switchTo(argumentWhereToSwitch);`

# c# - 自定义 DibsPaymentMethodService 覆盖 ProcessCallback 时出错

> ID：15446896
> 
> 赞同：0
> 
> 时间：2013-03-16T07:47:31.070
> 
> 标签：c#, umbraco, umbraco-ucommerce, dibs

我正在尝试自定义 uCommerce 和 DIBS 之间的对话以允许票证注册。

到目前为止，我已经成功复制了 DibsPageBuilder 并添加了 maketicket 参数。但是，我需要自定义对 DibsPaymentMethodService 类中的函数 ProcessCallcack 所做的回调。

我仔细复制了 ProcessCallback 及其内容并将其添加到我的自定义类中，但是当我运行结帐管道时，我不断收到以下错误：

```
 UCommerce.Pipelines.PipelineException: Exception occoured while processing pipeline 
'UCommerce.Pipelines.Checkout.CheckoutPipeline'. See inner exception for details. 
 ---&gt; System.Security.SecurityException: Payment insufficient to cover order total 
 for OrderGuid xxx. Please ensure that payments cover the entire value of the order 
 before checking out. at 
 Commerce.Pipelines.Checkout.ValidatePaymentsMadeAgainstOrderTotalTask.Execute(PurchaseOrder subject) 
 at UCommerce.Pipelines.Pipeline`1.Execute(T subject) --- End of inner exception 
 stack trace ---... 
```

当我使用通常构成该函数的相同代码手动覆盖 ProcessCallback 时，我不明白为什么结帐管道未能成功。换句话说，如果我不覆盖 ProcessCallback 函数运行顺利，但我无法进行自定义。我不得不说，错误发生在我自定义任何东西之前。

我当前的 uCommerce 平台运行版本 2.6.1。我复制的代码是：

```
 public override void ProcessCallback(Payment payment)
 {
    if (payment.PaymentStatusId != 10000001)
            return;
    DibsPaymentMethodServiceConfigurationSection instance = 
            DibsPaymentMethodServiceConfigurationSection.Instance;
    string s = HttpContext.Current.Request["transact"];
    if (string.IsNullOrEmpty(s))
            throw new ArgumentException("transact must be present in query string.");
    int result;
    if (!int.TryParse(s, out result))
            throw new FormatException("transact must be a valid int32");
    PaymentStatusCode paymentStatusCode = PaymentStatusCode.Authorized;
    if (instance.UseMd5)
    {
            string parameter1 = this.GetParameter("authkey", "When using md5 \"{0}\" cannot be null or empty", new string[1]
            {
            "authkey"
            });
            string parameter2 = this.GetParameter("currency", "When using md5 \"{0}\" cannot be null or empty", new string[1]
            {
            "currency"
            });
            string parameter3 = this.GetParameter("amount", "When using md5 \"{0}\" cannot be null or empty", new string[1]
            {
            "amount"
            });
            int currencyNumber = new CurrencyCodeTranslater().FromIsoCode(parameter2);
            string postMd5Key = new DibsMd5Computer().GetPostMd5Key(result.ToString(), parameter3, currencyNumber);
            if (!parameter1.Equals(postMd5Key))
                   paymentStatusCode = PaymentStatusCode.Declined;
    }
    payment.PaymentStatus = PaymentStatus.Get((object) paymentStatusCode);
    payment.TransactionId = result.ToString();
    this.ProcessPaymentRequest(new PaymentRequest(payment.PurchaseOrder, payment));
} 
```

提前谢谢了。

/布林克10

# c++ - 为什么 *this 可以用作 & 类型？

> ID：15446900
> 
> 赞同：0
> 
> 时间：2013-03-16T07:48:00.097
> 
> 标签：c++, qt

```
class Cell : public QTableWidgetItem
{
public:
    Cell();

    QTableWidgetItem *clone() const;
...
} 
```

以上是 Qt 程序中的类定义。下面是剩下的部分。

```
QTableWidgetItem *Cell::clone() const
{
    return new Cell(*this);
} 
```

我的问题是关于最后一句话，如果我把它改成喜欢：

```
return new Cell(this); 
```

然后Qt会给出错误信息： ![在此处输入图像描述](../Images/acad7aafb78b6e0966705ae9fec9df15.png)

为什么？我知道这`this`是一个指针，不能作为参数。但`*this`可以是一种`&`类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T08:13:57.867

由于您尚未为您的类定义复制构造函数，因此编译器会为您生成一个具有以下签名的构造函数：（`Cell(const Cell&)`在此处阅读更多内容：[自动生成默认/复制/移动 ctor 和复制/移动赋值运算符的条件？](https://stackoverflow.com/questions/4943958/conditions-for-automatic-generation-of-default-ctor-copy-ctor-and-default-assi)）。当您尝试调用`Cell(this)`时，编译器会尝试`Cell(Cell*)`在各种`Cell`构造函数中查找 - 显然没有匹配项。`Cell(*this)`匹配自动生成的复制构造函数`Cell(const Cell&)`，因为它期望对类型对象的引用`Cell`作为参数（而不是指向它的指针），并`*this`取消引用指针，以便可以通过引用传递实际对象。就所考虑的调用语法而言，调用`Cell(*this)`编译器可以将其解析为按引用传递或按值传递。由于在您的情况下，复制构造函数通过引用接收参数（由于`&`签名中的），编译器将解析`Cell(*this)`为通过引用传递（实际上它必须是通过引用，但这是另一回事）。在此处阅读有关该主题的更多信息：[按引用传递与按值传递有什么区别？](https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value)

# iphone - iOS - 使用 roundf() 舍入浮点数无法正常工作

> ID：15446902
> 
> 赞同：-1
> 
> 时间：2013-03-16T07:48:11.660
> 
> 标签：iphone, objective-c, math, calc

我在 iPhone 应用程序中舍入浮点数时遇到问题。

```
float f=4.845;
float s= roundf(f * 100.0)/100;
    NSLog(@"Output-1: %.2f",s);
      s= roundf(484.5)/100;
    NSLog(@"Output-2: %.2f",s);

Output-1: 4.84
Output-2: 4.85 
```

让我知道这有什么问题以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T07:51:08.593

问题是您还没有意识到浮点的固有问题之一：大多数数字不能精确表示^((a))的事实。

这意味着`4.845`，在现实中，这很可能是类似的东西`4.8449999999999`，当你把它弄圆时，给你`4.84`而不是你所期望的，`4.85`。

你最终得到的值也取决于你*如何*计算它，这就是你得到不同结果的原因。

当然，如果没有权威的[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) ，那么 SO 上的浮点“不准确”答案将是不完整的。

* * *

^((a))在 IEEE754 中，只有在某个相似范围内的 2 的精确幂之和才能精确呈现。所以，例如，`484.5`是

`256 + 128 + 64 + 32 + 4 + 0.5`( )。`2⁸ + 2⁷ + 2⁶ + 2⁵ + 2² + 2^(-1)`

有关IEEE754 格式的更详细信息，请参阅[此答案。](https://stackoverflow.com/questions/3448777/how-to-represent-0-1-in-floating-point-arithmetic-and-decimal/3448855#3448855)

* * *

至于解决它，你有几个选择。一种是使用`double`而不是`float`. 这为您提供了更高的精度和更大的数字范围，但只会将问题移得更远，而不是真正解决它。由于`0.1`是 IEEE754 中的重复分数，*因此没有*多少位（小于无穷大）可以准确地表示它。

另一种选择是使用像大十进制类型这样的自定义库，它可以表示任意精度的小数（这*不是*一些人不会建议的无限精度，因为它受内存限制）。这将减少由二进制/十进制不匹配引起的错误。

您可能还想查看`NSDecimalNumber`- 这不会给您任意精度，但它确实提供了具有精确十进制表示的大范围。

仍然会有您无法表示的数字，例如 PI 或 2 的平方根或任何其他无理数，但它应该涵盖大多数情况。如果您*确实*需要处理这些其他值，则需要切换到符号数字表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T07:55:04.470

与`484.5`可以完全表示为 float ^*不同，`4.845`它表示为`4.8449998`（如果您想尝试其他数字，请参阅[此计算器）。](http://babbage.cs.qc.cuny.edu/IEEE-754.old/Decimal.html)乘以 100 使数字保持在`484.49998`，正确四舍五入为`484`。

* * *

^*精确表示是可能的，因为它的小数部分`0.5`是 2 的幂（即`2^-1`）。

# android - 删除android中的新消息图标

> ID：15446904
> 
> 赞同：0
> 
> 时间：2013-03-16T07:49:00.983
> 
> 标签：android, icons, message

我正在开发一个 android 应用程序，它在收到 SMS 消息时将其标记为已读。我使用以下代码做到这一点：

```
 if(readMessages.contains(id)){
                ContentValues values=new ContentValues();
                values.put("read", 1);
                values.put("seen", 1);
                getContentResolver().update(Uri.parse("content://sms/inbox"), 
                        values, "_id="+id, null);
                Log.i("read message","id:"+id);

                if(readThread.contains(trdid)){

                    ContentValues values1=new ContentValues();
                    values1.put("read", 1);
                    values1.put("seen", 1);
                    getContentResolver().update(Uri.parse("content://sms/inbox"), 
                            values, "_id="+trdid, null);
                    Log.i("read thread","id:"+trdid);

                }
            } 
```

如您所见，我已将线程和消息 ID 标记为已读，并且该消息确实已标记为已读。

然而我的问题是，为什么我执行代码后消息应用程序上的图标（显示新消息数量的红色气泡）没有消失？有可能这样做吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:54:32.960

> 为什么我执行代码后消息应用程序上的图标（显示新消息数量的红色气泡）没有消失？有可能这样做吗？

您无法控制来自不属于您自己的应用程序的通知。此外，AOSP 消息没有红色气泡通知，所以这是一些自定义应用程序。

尽管如此，您无法控制第三方应用程序的通知状态。当 SMS 数据库发生更改时，SMS 客户端应负责更新其 UI 和通知。

# jquery - 如果 html 是动态创建的，则不会启用复选框的“已选中”属性

> ID：15446907
> 
> 赞同：4
> 
> 时间：2013-03-16T07:49:12.597
> 
> 标签：jquery, jquery-mobile

我创建了一个包含复选框的列表视图。在几个列表项上，我希望选中复选框。当内容来自服务器时，列表视图是动态创建的。

我有以下 jsfiddle 代码。[http://jsfiddle.net/praleedsuvarna/rN28z/](http://jsfiddle.net/praleedsuvarna/rN28z/)

你能帮我解决这个问题吗？提前致谢

下面是我的动态列表内容的示例，其中第二个和第三个复选框设置为“已选中”

```
$(document).on('pageshow', '#index', function(){     
    var list = '<li>'+
    '   <div class="checkBoxLeft">'+
    '       <input type="checkbox" name="checkbox-0" id="checkbox-0" class="hidden-checkbox"/>'+
    '   </div>  '+
    '   <a href="item1.html" class="detailListText">item1</a>'+
    '</li>'+
    '<li>'+
    '   <div class="checkBoxLeft">'+
    '       <input type="checkbox" name="checkbox-0" id="checkbox-0" class="hidden-checkbox" checked="checked"/>'+
    '   </div>'+
    '   <a href="item1.html" class="detailListText">item2</a>'+
    '</li>'+
    '<li>'+
    '   <div class="checkBoxLeft">'+
    '       <input type="checkbox" name="checkbox-0" id="checkbox-0" class="hidden-checkbox" checked="checked"/>'+
    '   </div>                     '+
    '   <a href="item1.html" class="detailListText">item3</a>'+
    '</li>'

    $("#viewdata").html(list);
    $("#viewdata").listview("refresh");
}); 
```

下面是我的html页面

```
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <ul data-role="listview" data-theme="a" id="viewdata">
            </ul>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:03:40.617

固定和稍微清理的版本：http: [//jsfiddle.net/rN28z/6/](http://jsfiddle.net/rN28z/6/)

我移动了这段代码：

```
$('input[type="checkbox"]').each(function() {
    $(this).parent('.checkBoxLeft').addClass(this.checked ? 'checked' : 'not-checked');
}); 
```

内部`pageshow`处理程序。您正在调用它，`pagebeforeshow`到那时您的 HTML 尚未填充。

# iphone - 在 Box2d (iphone) 中忽略实体之间的碰撞

> ID：15446911
> 
> 赞同：4
> 
> 时间：2013-03-16T07:49:35.347
> 
> 标签：iphone, filter, box2d, collision-detection, collision

我有 3 种类型的身体。他们是

1）MouseJointBody（仅与 mouseJoint 一起移动）

2）2个MovingBodys（它在世界上不断移动）

3）StaticBody（固定在固定位置）

我需要这些机构之间的碰撞：

1) MouseJointBody 与 MovingBodys 和 StaticBody 和世界边界

2) StaticBody 仅与 MouseJointBody

3) MovingBodys 仅具有 MouseJointBody 和世界边界

4) MovingBodys 相互碰撞

但不需要与 StaticBody 和 MovingBody 发生碰撞。我为这些主体设置过滤器数据，如下面的代码：

静态体：

```
fixDef.filter.categoryBits=0x0004;
fixDef.filter.maskBits= 0x0002; 
```

移动体：

```
fixDef.filter.categoryBits=0x0004;
fixDef.filter.maskBits= 0x0002; 
```

鼠标关节体：

```
fixDef.filter.categoryBits=0x0002;
fixDef.filter.maskBits= 0x0004; 
```

一切正常，但我的 MovingBodys 没有相互碰撞，MouseJointBody 和 MovingBody 没有与世界框发生碰撞。这两个正在走出世界。请告诉我这个的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T15:15:46.473

在作为 Box2D 中的项目基础的 Farseer 中存在 CollisionCategory 但在 Box2D 中解决不同的

请查看以下[讨论](http://www.box2d.org/forum/viewtopic.php?f=3&t=197)

这个想法是分配身体类型是每个，并且身体只能碰撞。

在讨论中处理了一个类似的情况，A打B，C打D，但是A没有打A

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T21:56:20.927

我认为，当您使用过滤器时，您需要将过滤器应用于墙壁。并设置所有的 maskBits。

移动体示例：

```
fixDef.filter.categoryBits=0x0004;
fixDef.filter.maskBits= 0x0002 | 0x0006; 
```

（0x0006 是墙的类别位）

# installation - InstallShield 2012 Spring Express：如何在卸载时以管理员身份运行自定义操作？

> ID：15446912
> 
> 赞同：1
> 
> 时间：2013-03-16T07:49:55.303
> 
> 标签：installation, installshield, installscript, installshield-2012

我正在使用 InstallShield 2012 Spring Express。我终于发现，在我的应用程序安装过程中，如果我将其“In-Script Execution”属性设置为“Deferred Execution In System”，我可以使用提升的进程 EXE（应用程序清单设置为“requireAdministrator”）运行自定义操作语境。”

那很好。

但现在我必须能够在卸载过程中做同样的事情。到目前为止，即使在 InstallShield 2012 Spring Express 的付费版本上，我也无法让它工作。

首先，对于“卸载期间的自定义操作”部分，只有“系统更改之前”和“系统更改后”两个条目。

我没有尝试将我的自定义操作添加到“系统更改之后”，因为我需要运行的 EXE 是我的包的一部分（因此到那时会被删除。）所以我将它添加到“系统更改之前” 。” 现在由于某种原因，当我将它添加到“系统更改之前”时，没有“脚本内执行”选项。而且因为我没有这个选项，所以当我的卸载尝试运行提升的进程 EXE 时，它会失败并出现错误 1721...这与我在安装过程中遇到的错误完全相同，直到我更改了“在-Script Execution”选项改为“Deferred Execution In System Context”。

那么，如何在卸载过程中让提升的进程 EXE 正确运行？InstallShield 是否无法正确处理此问题？

谢谢，JP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:43:55.533

您可以使用 Windows Installer XML 创作合并模块，以正确安排和排序您的自定义操作。InstallShield express 然后可以使用该模块。看：

[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

如果您不习惯混合工具（这就像在 VB.NET 中编写 DLL 并在用 C# 编写的 EXE 中引用它），那么您必须升级到 InstallShield Professional。

# hdfs - 在本地模式下运行 pig

> ID：15446913
> 
> 赞同：2
> 
> 时间：2013-03-16T07:49:56.783
> 
> 标签：hdfs, apache-pig

我是 APACHE PIG 的初学者，以下是我有点困惑的地方

我正在尝试使用 pig -x local 在本地模式下运行 pig。

现在我正在尝试简单的代码

```
dividends = load 'NYSE_dividends' as (exchange, symbol, date, dividend);
grouping= group dividends by symbol;
avg= foreach grouped generate group, AVG(dividends.dividend);

store avg into 'average_dividend'. 
```

在我的机器上形成了一个名为 average_dividend 的文件夹。

现在按照这本书，如果我想在本地模式下运行它，我必须给出以下语法

```
pig_path/bin/pig -x local average_dividend.pig 
```

但是文件 average_dividend.pig 在哪里（就像它是在哪里形成的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:39:54.637

我假设您正在尝试运行[Programming Pig的](https://rads.stackoverflow.com/amzn/click/com/1449302645)[示例](https://github.com/alanfgates/programmingpig)之一。首先找到您提取代码的目录。由于您在*本地模式下*工作，因此您必须将路径设置为，例如：，将输出目录（不应该存在）也设置在要保存结果的位置，例如： 。`average_dividend.pig`*`NYSE_dividends``load '/home/user/programmingpig-master/data/NYSE_dividends'``store avg into '/home/user/output'`*

 *然后发出：

```
pig_path/bin/pig -x local -f average_dividend.pig 
```*

# tfs - 根据优先级对 TFS 2012 任务板中的产品积压项目进行排序

> ID：15446915
> 
> 赞同：3
> 
> 时间：2013-03-16T07:50:13.690
> 
> 标签：tfs, scrum

我们的团队最近迁移到 TFS 2012，它的任务板似乎是 Scrum 团队的有效工具。但是，产品积压项目不会根据我们为它们指定的积压优先级排序。换句话说，在产品积压的查询中，我们有：

```
11\. As x, I need to do *a*, so that *b* => Backlog Priority = 200
.
.
.
27\. As y, I need to do *a2*, so that *b2* => Backlog Priority = 370 
```

这当然意味着产品 backlog 编号 27 比产品 backlog 编号 200 更重要。在此查询中，排序选项可用，因此我们可以根据它们的优先级对它们进行排序。

但在任务板中，我们得到的是 PBI No. 27 显示在列表的底部。我认为这将非常有帮助，如果我们可以根据 PBI 在任务板中的重要性对它们进行排序，以便我们可以获得更重要项目的视觉线索，并停止在 TFS 中的选项卡之间切换以了解某些内容。

有什么方法可以根据 PBI 的重要性对任务板中的 PBI 进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:54:20.180

正确，这是存储在不同的字段中。许多事情可以用来确定对产品负责人的重要性顺序，优先级就是其中之一。正如[Scrum 指南](http://www.scrum.org/Scrum-Guides)所述，产品所有者是最终决定。

您当然可以通过自定义 WIT 表单来公开该字段，但认为在大多数情况下使用 UI 会更好。

MSF Agile 模板确实公开了用于排序的字段：Stack Rank。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T01:33:55.397

您可以尝试为此使用包含的“业务价值”，因为据我所知，它对 TFS 是不透明的。

或者，如果您对流程的更改感到满意，您可以简单地更改为使用降序优先级，其中优先级 1 是最高优先级。这样，积压工作将为您自行排序。

最后：如果您喜欢 TFS 2012 的 Web 访问，您也可以尝试停止手动输入优先级，而是选择允许 TFS 在您在积压视图中拖动条目时为您设置优先级，以重新排序它们. 对我们来说，这是一个非常令人愉悦且非常直观（更不用说非常快）的过程。

# asp.net - 如何对 RDLC 报告进行数据透视？

> ID：15446930
> 
> 赞同：1
> 
> 时间：2013-03-16T07:51:47.207
> 
> 标签：asp.net, rdlc

我的 RDLC 报告绑定到以这种格式返回数据的存储过程：

销售交易 SalesPerc

* * *

销售1 25%

销售2 35%

销售3 45%

销售4 65%

在报告中，我想表示条形图，如附图所示。有没有办法将 SalesDeals 旋转到列。

![在此处输入图像描述](../Images/75b213123c97bf0d56f01619affd89e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:59:39.820

不需要`pivot`数据来做你想做的事情。在使用`rdlc`时，您只需添加`chart`- 并设置其轴、系列和数据属性。`rdlc`将为您完成工作。`Stored Procedure`上面返回的内容非常适合您想要`resultset`制作的图表（如上图所示）。

# iphone - NSDateFormatter 格式化问题

> ID：15446932
> 
> 赞同：-2
> 
> 时间：2013-03-16T07:52:00.567
> 
> 标签：iphone, ios, objective-c, ios6

我正在尝试转换`NSString`为`NSDate`12 小时格式。（在 iOS 6 中）

代码 ：

```
NSString *Bdt = @"05/23/2012 08:00 AM"
NSDateFormatter *df = [[[NSDateFormatter alloc] init] autorelease];
[df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
[df setDateFormat:@"MM/dd/yyyy hh:mm a"];
NSDate *bd = [df dateFromString:Bdt];
NSLog(@"%@",bd); 
```

输出：

> 2012-05-23 08:00:00 +0000 应该是 2012-05-23 08:00 AM

代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T07:57:32.813

如果你想要`2012-05-23 08:00 AM`时尚的约会

创建一个 dateformatter 和 setDateFormat as`yyyy-MM-dd hh:mm a`

```
NSString *Bdt = @"05/23/2012 08:00 AM";
NSDateFormatter *df = [[NSDateFormatter alloc] init] ;
[df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
[df setDateFormat:@"MM/dd/yyyy hh:mm a"];
NSDate *bd = [df dateFromString:Bdt];

NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter  setDateFormat:@"yyyy-MM-dd hh:mm a" ];
NSString *datestr=[dateFormatter stringFromDate:bd];
NSLog(@"%@",datestr); 
```

*注意：我使用的是 ARC，所以对象不会被释放/自动释放。

*编辑：*

`NSDate`将仅采用这种格式：`2012-05-23 08:00:00 +0000`。

对于您需要使用的任何其他格式`NSString`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T09:08:47.293

它没有任何问题。您正在 NSLog 中打印 NSDate，这与创建具有特定格式的 NSString 非常不同。

您似乎将内部 NSDate 表示与字符串格式混淆了。NSDate 在内部存储日期的方式与人类表示的方式不同。就像 NSString 以一种可能不是您最终希望将其编码为的格式存储字符串一样，例如。ASCII 或 UTF-8。当您调用 NSLog 时，您会收到一条诊断消息，根据返回的字符串`- (NSString *)description`或可能的字符串显示日期`- (NSString *)debugDescription`。

# common-lisp - 如何使用类创建函数（Common Lisp）

> ID：15446936
> 
> 赞同：1
> 
> 时间：2013-03-16T07:52:28.790
> 
> 标签：common-lisp

我需要创建一个函数 make-numbers 来创建类号的实例：

```
(defclass numbers ()
  ((x :initform 0)
   (y :initform 0))) 
```

输入应该是 li this: `(make-numbers 2 8)` I started: `(defun make-numbers (new-x new-y) (....`，但我不知道如何继续。我试了一整天，没有结果。最后，我需要数一下这两个数字。

你有什么主意吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:05:26.767

我建议您`:initarg`为您的插槽添加关键字：

```
(defclass numbers ()
  ((x :initform 0 :initarg :x)
   (y :initform 0 :initarg :y))) 
```

然后从您的函数调用[make-instance ：](http://www.lispworks.com/documentation/HyperSpec/Body/f_mk_ins.htm)

```
(defun make-numbers (new-x new-y)
  (make-instance 'numbers :x new-x :y new-y)) 
```

这样，您就不必使用`setf`slot [-value](http://clhs.lisp.se/Body/f_slt_va.htm)来初始化实例的插槽。

# objective-c - iOS 4、5 和 6 中的 GameCenter 身份验证兼容性问题

> ID：15446937
> 
> 赞同：1
> 
> 时间：2013-03-16T07:52:52.877
> 
> 标签：objective-c, ios5, ios6, game-center

目前我正处于将 GameCenter 集成到我的游戏中的阶段。

我在文档中看到了这两种身份验证方法

*   验证处理程序

*   authenticateWithCompletionHandler：（在 iOS 6.0 中已弃用）

我的问题是，我应该使用哪一个？因为我的游戏将受到最低 iOS 4.3 和最高 6.0 的支持

如果我使用**authenticateWithCompletionHandler:**，它说将在 iOS 6.0 中被弃用 如果我使用**authenticateHandler** *属性*，我想知道 iOS 4.x 和 5.x 是否能够运行它？

希望有人可以向我解释，我现在对兼容性感到困惑:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:04:22.360

如果您想支持旧设备或 iOS 版本，通常使用不推荐使用的方法是安全的。这并不意味着该功能很快就会被删除......这只是暗示该功能的更好或更新版本可用。

如果新功能提供旧功能不提供的功能，您可以检查该功能在运行时是否可用 ( `respondsToSelector`)，如果不使用旧功能。

# cakephp - 如何根据订单在视图中显示选项

> ID：15446944
> 
> 赞同：0
> 
> 时间：2013-03-16T07:54:03.207
> 
> 标签：cakephp, phpmyadmin

在可能的视图中我使用

```
 <option><?=__('Select Language')?>:</option>
                    <option <?= (isset($userSetting['UserSetting']) && $userSetting['UserSetting']['user_lang'] == 'eng') ? 'selected="selected"' : '' ?> value="eng" >English</option>
                    <option <?= ( isset($userSetting['UserSetting']) && $userSetting['UserSetting']['user_lang'] == 'fre') ? 'selected="selected"' : '' ?> value="fre">French</option>
                    <option <?= ( isset($userSetting['UserSetting']) && $userSetting['UserSetting']['user_lang'] == 'ger') ? 'selected="selected"' : '' ?> value="ger">German</option>
                    <option <?= ( isset($userSetting['UserSetting']) && $userSetting['UserSetting']['user_lang'] == 'ita') ? 'selected="selected"' : '' ?> value="ita">Italian</option> 
```

我正在使用语言表，并且我为每种语言分配了权重现在我想根据语言表中的权重在我的视图中显示上述选项，我必须在我的视图中编写什么查询以及在哪里获得所需的输出.. ..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:11:55.173

如果`UserSetting`是模型，只需`order`在检索数据时传递一个参数。

```
$userSetting = $this->UserSetting->find('all', array(
                   'order'=> array('weight'=>'DESC')
               )); 
```

然后使用适当`foreach`的输出您的语言。如果数据来自数据库，则不需要“手动”执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:15:28.883

为什么你要手动输出所有选项？使用为此目的的 HtmlHelper；

在您的控制器内部；

```
// get the languages from your database
$languages = $this->Language->find('list', array(
    'order' => array('weight' => 'desc')
));

$this->set('languages', $languages); 
```

在您的视野中：

```
echo $this->Form->input(
    'UserSetting.user_lang', 
    array(
         'options' => $languages,
         'empty' => __('Select language'),
    )
); 
```

但是，如果您的模型关系和主/外键在您的应用程序中正确定义，您应该通过以下方式检索语言；

```
$languages = $this->UserSetting->Language->find('list', array(
    'order' => array('weight' => 'desc')
)); 
```

如果`'primaryKey'`和[`'displayField'`](http://book.cakephp.org/2.0/en/models/model-attributes.html#model-displayfield)属性在您的`Language`模型中正确配置，这应该检索正确的键/值对（[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list)）

FormHelper 的键应该是`UserSetting.Language`; CakePHP 应该会自动从`$languages`viewVar 中自动找到可用的选项；

```
echo $this->Form->input('UserSetting.Language', array('empty' => __('Select language'))); 
```

还要确保使用 FormHelper 正确“创建”和“关闭”表单

### 在手册中阅读；

本节包含一个保存关联数据的示例以及如何创建表单的示例；

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:08:16.437

```
(isset($userSetting['UserSetting']) && $userSetting['UserSetting']['user_lang'] == 'eng') ? 'selected="selected"' : '' 
```

最后缺少一个')'。

```
echo (isset($userSetting['UserSetting']) && $userSetting['UserSetting']['user_lang'] == 'eng' ? 'selected="selected"' : ''); 
```

那应该这样做。

# c++ - 如何用空格输入整个句子

> ID：15446951
> 
> 赞同：1
> 
> 时间：2013-03-16T07:54:34.827
> 
> 标签：c++, char, cin

我试过了：

```
 char tab[200];
    cin>>tab;
    cout<<tab<<endl; 
```

即使我在控制台中输入`A B C`所有 3 个字符和空格，我也想这样做`tab`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T07:56:53.703

改用[`cin.getline()`](http://www.cplusplus.com/reference/istream/istream/getline/)：

```
char tab[200];
cin.getline(input,200);
cout<<tab<<endl; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T07:56:44.237

你可以使用[`std::getline(cin, tab)`](http://www.cplusplus.com/reference/string/string/getline/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T07:57:11.593

您可能想要使用`std::getline`，指定要标记句子结尾的任何字符（例如，'.'）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T07:57:55.280

你想要的是以某种形式做一个getline。

```
string str;
cin.get(str, 25);
cout <<"\"" <<str <<"\"" <<endl; 
```

或者

```
string str;
cin.getline(str, 25);
cout <<"\"" <<str <<"\"" <<endl; 
```

两者都接受第三个参数，一个字符，它指定要考虑的行尾。详情见[http://www.minich.com/education/wyo/cplusplus/cplusplusch10/getfunction.htm](http://www.minich.com/education/wyo/cplusplus/cplusplusch10/getfunction.htm)

# android - 如何在 Android 中创建可编辑目录

> ID：15446955
> 
> 赞同：0
> 
> 时间：2013-03-16T07:54:55.247
> 
> 标签：android, listactivity

我想创建一个名为“自定义目录”的新*活动。*该*活动*将有一个名为“目录”的标题，具有以下列表格式：

> 姓名 编号
> 
> 姓名 编号
> 
> 姓名 编号

最后是一个`button`叫做“添加新的..”的地方，我们可以添加更多这样的名称/数字。同样在长按任何项目时，`context menu`将出现一个名为*Edit/Delete*。

我该怎么做呢？使用文件写入和东西，在应用程序处于非活动状态时将数据保存到 sd？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:33:13.277

1.  当您将数据输入到存储在“List”（您使用的任何容器 ie ）中的 editext 中`Arraylist.Array`并且此“List”容器设置为适配器时，获取一个列表视图和 edittext
2.  现在给`onlongcliklistener`您的列表视图项目以进行删除和编辑

# php - PHP 包含与 jQuery 的混乱

> ID：15446960
> 
> 赞同：0
> 
> 时间：2013-03-16T07:55:32.490
> 
> 标签：php, jquery, include

每次我试图在我的主页上构建一个 jQuery 应用程序时，该应用程序都会开始自己做事并停止响应我的请求。例如，我正在尝试实现一个图像滑块，当我运行页面时，播放/暂停按钮不起作用，您可以看到图像相互重叠。但是当我删除我所有的 PHP 包含时，它可以正常运行而没有任何错误。这是一个常见错误吗？有没有办法让 jQuery 接受包含的存在而不会失去控制？

```
<?php
function customPageHeader(){?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="css/reset.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/jquery.slider.css" />

<script type="text/javascript" src="javascript/jquery.min.js"></script>
<script type="text/javascript" src="javascript/slider/jquery.slider.min.js"></script>
<script type="text/javascript">
    jQuery(document).ready(function($) {
      $(".slider").slideshow({
        width      : 900,
        height     : 325,
        transition : 'slide'
      });
    });
  </script>
</head>
<body>

<?php }
include_once('header.php');
?>

<div class="content">
  <div class="content_01">
    <div class="slider2"> 
    <div id="wrapper">
  <div class="slider">
    <div> <img src="assets/serie_1.jpg" alt=""/> </div>
    <div> <img src="assets/serie_2.jpg" alt=""/> </div>
    <div> <img src="assets/serie_3.jpg" alt=""/> </div>
    <div> <img src="assets/serie_4.jpg" alt=""/> </div>
  </div>
</div>
    </div>
  </div>
</div>
<div style="float:none; clear:both;"></div>

<?php
include_once('footer.php');
?>

</body>
</html> 
```

在我的`header.php`，我有：

```
<!doctype html>
<html>
<head>
<!-- ****************  CSS CALL  ************************** -->
<link rel="stylesheet" type="text/css" href="css/styles.css"/>
<!-- ************  JAVASCRIPT CALL  *********************** -->
<script type="text/javascript" src="scripts/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="scripts/ablaze_hyper-block.js"></script>
<script type="text/javascript" src="scripts/ablaze_geral.js" charset="utf-8"></script>

<?php if (function_exists('customPageHeader')){
      customPageHeader();
    }?>
</head>

<body>
<div class="header">
  <div class="h_wrapper">
    <div class="logo"><a href="/"></a></div>
    <div class="navigation">
      <ul class="n_list">
        <li class="tab_select01"><a href="/">TEST</a></li>
        <li class="tab_select02"><a href="#">TEST</a></li>
        <li class="tab_select03"><a href="#">TEST</a></li>
        <li class="tab_select04"><a href="contacto.php">TEST</a></li>
      </ul>
    </div>
    <div class="hb_wrapper">
      <div class="hyper_block">
        <div class="icon fb_icon"><a href="#" target="_blank"><img src="images/hyper_block/fb_icon.png"/></a></div>
        <div class="icon tw_icon"><a href="#"  target="_blank"><img src="images/hyper_block/tw_icon.png"/></a></div>
        <div class="icon lg_icon"><a href="#"><img src="images/hyper_block/lg_icon.png"/></a></div>
        <div class="icon nl_icon"><a href="#"><img src="images/hyper_block/nl_icon.png"/></a></div>
        <div class="fb_content"> <a href="#"  target="_blank"><img src="images/hyper_block/fb_content.png"/></a></div>
        <div class="tw_content"><a href="#"  target="_blank"><img src="images/hyper_block/tw_content.png"/></a></div>
        <div class="lg_content"></div>
        <div class="nl_content">
          <ul>
            <li>TEST</li>
          <li><form id="h_nl_form" charset="utf-8" >
          <table width="160" border="0" cellspacing="0" cellpadding="0" style="margin-left:3px;">
  <tr>
    <td><input type="text" id="h_nl_fname" class="h_nl_fname" name="name" maxlength="12" value=" Nome*" onBlur="if(this.value == ''){ this.value = ' Nome*'; this.style.color = '#f38a8a';}" onFocus="if(this.value == ' Nome*'){ this.value = ''; this.style.color = '#f2f2f2';}" style="color:#f38a8a; font-family:verdana;" /></td>
    <td><input type="text" id="h_nl_lname" class="h_nl_lname" name="last_name" maxlength="12" value=" Apelido*" onBlur="if(this.value == ''){ this.value = ' Apelido*'; this.style.color = '#f38a8a';}" onFocus="if(this.value == ' Apelido*'){ this.value = ''; this.style.color = '#f2f2f2';}" style="color:#f38a8a; font-family:verdana;" /></td>
  </tr>
</table>
<table width="160" border="0" cellspacing="0" cellpadding="0"  style="margin-left:3px;">
  <tr>
    <td width="132"><input type="text" id="h_nl_email" class="h_nl_email" name="email" maxlength="40" value=" Email*" onBlur="if(this.value == ''){ this.value = ' Email*'; this.style.color = '#f38a8a';}" onFocus="if(this.value == ' Email*'){ this.value = ''; this.style.color = '#f2f2f2';}" style="color:#f38a8a; font-family:verdana;" /></td>
    <td><input type="button" class="h_btn" value=">"/></td>
  </tr>
</table></form><div class="h_error_display"></div>
<div class="h_success_display"></div>
</li>

          </ul>

        </div>
      </div>
    </div>
  </div>
</div>
<div style="float:none; clear:both;"></div>
</body>
</html> 
```

在我的`footer.php`，我有：

```
<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title></title>
<link rel="stylesheet" type="text/css" href="css/style.css"/>

<script type="text/javascript" src="scripts/ablaze_geral.js" charset="utf-8"></script>

<?php if (function_exists('customPageHeader')){
      customPageHeader();
    }?>
</head>

<body>
<div style="float:none; clear:both;"></div>
<div class="footer">
<div class="f_bar_top"></div>
  <div class="f_wrapper">
    <ul>
      <li><a href="index.php" ><img src="images/logo.png"/></a><br/>
        <h1 class="h_footer">CONTACTE-NOS</h1>
        <br/>
        <table width="220" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="35"><img src="images/contactos/f_email_icon.png"></td>
    <td><h3 class="h_footer"><p><a href="mailto:#" title="#">#</a></p></h3></td>
  </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td width="35"><img src="images/contactos/f_telf_icon.png"></td>
    <td><h3 class="h_footer">+351 91 000 00 00</h3></td>
  </tr>
</table>
        <br/>
      </li>
      <li><br/>
      <p><h1 class="h_footer">LINKS POPULARES</h1></p>
        <h3 class="h_footer"><p><a href="/">INÍCIO</a></p>
        <p><a href="">SERVIÇOS</a></p>
        <p><a href="">PORTEFÓLIO</a></p>
       <p><a href="">QUEM SOMOS</a></p>
        <p><a href="contacto.php">CONTACTO</a></p></h3>
        </li>
      <li><br/><h1 class="h_footer">ACOMPANHE-NOS</h1>
      <table width="220" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:8px;">
  <tr>
    <td width="35" height="30"><a href="#" target="_blank" title="facebook"><img src="images/contactos/f_facebook.png"></a></td>
    <td><a href="#" target="_blank" title="#">#</a></td>
  </tr>
  <tr>
    <td width="35"><a href="#" target="_blank" title="twitter"><img src="images/contactos/f_twiter.png"></a></td>
    <td><a href="#" target="_blank" title="#">#</a></td>
  </tr>
</table><h2 class="h_footer">NEWSLETTER</h1>
<form id="nl_form" charset="utf-8" >
<table width="220" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="112"><input type="text" id="f_nl_fname" class="f_nl_fname" name="name" maxlength="12" value=" Nome*" onBlur="if(this.value == ''){ this.value = ' Nome*'; this.style.color = '#60695d';}" onFocus="if(this.value == ' Nome*'){ this.value = ''; this.style.color = '#f2f2f2';}" style="color:#60695d; font-family:verdana;" /></td>
    <td><input type="text" id="f_nl_lname" class="f_nl_lname" name="last_name" maxlength="12" value=" Apelido*" onBlur="if(this.value == ''){ this.value = ' Apelido*'; this.style.color = '#60695d';}" onFocus="if(this.value == ' Apelido*'){ this.value = ''; this.style.color = '#f2f2f2';}" style="color:#60695d; font-family:verdana;" /></td>
  </tr>
</table>
<table width="220" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="184"><input type="text" id="f_nl_email" class="f_nl_email" name="email" maxlength="40" value=" Email*" onBlur="if(this.value == ''){ this.value = ' Email*'; this.style.color = '#60695d';}" onFocus="if(this.value == ' Email*'){ this.value = ''; this.style.color = '#f2f2f2';}" style="color:#60695d; font-family:verdana;" /></td>
    <td><input type="button"  class="f_btn" value=">>"></td>
  </tr>
</table>
</form>
<div class="f_error_display"></div>
<div class="f_success_display"></div>

      </li>
      <li class="f_last"></li>
    </ul>
  </div>
 <div class="f_bar_bottom"><div style="float:none; clear:both;"></div></div>
</div>
</body>
</html> 
```

解决方案：通过从and中删除所有`<html>`, `<head>`,`<body>`声明得到解决方案，只留下标签。`header.php``footer.php``<div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:43:39.623

因为这解决了你的问题。我发布我的评论作为解决方案。

你注意到多个 doctype、html、head、body 声明了吗？对于自定义页眉和页脚等片段，您应该取消这些声明，因为这些片段不应该是完整的 html 页面。

额外的东西：

即使在删除这些根级元素之后，也要确保您的 HTML 是有效的。不是你的情况，但通常标题包含放在 html->head 内。所以'divs'、'tables'和其他这样的元素如果放在头部会破坏html。为避免类似问题，请注意头部和身体部分的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:15:46.697

解决方案：通过从 header.php 和 footer.php 中删除所有 html、head、body 声明得到解决方案，只留下 div 标签。

# java - 使用带有 TestNG 框架的 Apache POI 将数据写入 excel

> ID：15446967
> 
> 赞同：0
> 
> 时间：2013-03-16T07:56:57.953
> 
> 标签：java, excel, apache-poi, testng, hssf

我正在尝试使用 Apache POI 将数据写入 excel 表。我正在使用 TestNG 框架和 Eclipse IDE。程序成功执行，没有任何错误。但是当我在我的项目源上单击刷新时，excel表没有出现。请告诉我如何查看生成的 Excel 表格。我的代码如下：

```
public class Test {
    public static void main(String args[]) {
        try {
            FileOutputStream fos = new FileOutputStream("User.xls");
            HSSFWorkbook workbook = new HSSFWorkbook();
            HSSFSheet worksheet = workbook.createSheet("worksheet");
            HSSFRow row1 = worksheet.createRow((short) 0);
            HSSFCell cell1 = row1.createCell((short) 0);
            cell1.setCellValue("abc");
            HSSFCell cell2 = row1.createCell((short) 1);
            cell2.setCellValue("123");
            workbook.write(fos);
            fos.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:26:30.210

请检查您项目的根目录。默认情况下它应该在那里。如果您在运行配置 -> 参数中指定了工作目录，则应检查该文件夹。此外，您始终可以在 Java 中获得完整的文件路径。

```
System.out.println(new File("User.xls").getAbsolutePath()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:27:08.730

尝试这种方式来创建文件

```
FileOutputStream out =
            new FileOutputStream(new File("User.xls")); 
```

该文件将存储在您的类目录文件夹中。

例如：（`Test.java`存储在（`c://Workspace//src//Test.java)`，文件也将存储在同一路径中`c://Workspace//src//User.xls"`）

# html - 关于 HTML - 使用“|”

> ID：15446968
> 
> 赞同：0
> 
> 时间：2013-03-16T07:56:58.713
> 
> 标签：html, css

我正在使用其中一些“|” 分隔我正在编码的网站上的不同链接，因为它分隔了彼此相邻的链接。有没有我可以直接添加到 CSS 中的代码来执行此操作？

“全部着色 | #383838”

**这是我对 HTML 所做的一个示例：**

[主页](http://9385729notareallink010101.com)| [第 1 页](http://9385729notareallink010101.coms)

^ 我没有使用真正的链接，但这就是它在我的网站上的显示方式。（虽然不是那些颜色）....这是我用来执行此操作的代码。

```
<p><a href="LINK HERE">Home</a> | <a href="LINK HERE">Page 1</a> 
```

**问题：**在我的页面上，所有的文本和链接都是一种颜色。有“|” 在 HTML 的代码中，它会自动将“|” 颜色与所有其他文本和链接一样。我可以在 CSS 中添加一些东西来使每个“|” 另一种颜色？

Juhana 的解决方案最终奏效了。但是，当我用 <p></p> 包裹它时……它又会变回相同的颜色……我必须将它包裹在 <p></p> 中，否则它会直接位于顶部版权页脚的...关于如何创建空间的任何想法，以便它们彼此叠放而没有空间（无需添加 <p></p>）？

最终找到了我自己的解决方案，使用：< br />

感谢所有帮助过的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:00:01.343

您可以将此 css :`border-right :solid 1px #000000;`应用于锚链接周围的标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T08:02:25.530

使用无序列表放置链接，然后添加 | 像那样：

```
li:after {
    content: '|';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T08:06:51.130

MarcinJuraszek 非常正确，我也会这样做。但我还要补充：

```
li:last-child:after {
   content: '';
} 
```

删除最后一个链接后的行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T08:14:04.590

无法在其他未标记的文本中设置单个字符的样式。如果`|`字符是链接组中唯一的非链接文本，请将其包装在 div 中并设置样式。它不会影响链接的颜色。

```
<div class="links">
    <a href="LINK HERE">Home</a> | <a href="LINK HERE">Page 1</a>
</div> 
```

CSS：

```
.links {
    color: #383838;
} 
```

或者，如果还有其他文本，因此无法包装整个块，请包装单个字符：

```
<a href="LINK HERE">Home</a> <span class="separator">|</span> <a href="LINK HERE">Page 1</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T08:09:05.917

给`li`元素`border-right:1px solid black`，然后给最后一个 li 孩子：

```
li:last-child{border-right:none;} 
```

对于 IE8 兼容性，请检查[**selectivizr**](http://selectivizr.com/)

下载 selectivizr 并将其包含在您的项目中，然后将此代码包含在 head 标签中

```
<script type="text/javascript" src="[JS library]"></script>
<!--[if (gte IE 6)&(lte IE 8)]>
   <script type="text/javascript" src="selectivizr.js"></script>
   <noscript><link rel="stylesheet" href="[fallback css]" /></noscript>
<![endif]--> 
```

# winapi - 使用 SetWindowText() 函数添加新行

> ID：15446969
> 
> 赞同：4
> 
> 时间：2013-03-16T07:57:08.913
> 
> 标签：winapi, editbox

我已经创建了一个编辑窗口。我希望一个字符串显示在一行中，另一个字符串显示在另一行，但我正在执行的代码只显示第二个字符串。下面是我的代码片段：

```
hWndEdit = CreateWindow("EDIT", // We are creating an Edit control
                                NULL,   // Leave the control empty
                                WS_CHILD | WS_VISIBLE | WS_HSCROLL |
                                WS_VSCROLL | ES_LEFT | ES_MULTILINE |
                                ES_AUTOHSCROLL | ES_AUTOVSCROLL,
                                10, 10,1000, 1000,
                                hWnd,
                                0,
                                hInst,NULL);
SetWindowText(hWndEdit, TEXT("\r\nFirst string\r\n"));

SetWindowText(hWndEdit, TEXT("\r\nSecond string")); 
```

**输出：** ![输出](../Images/0e4eea8970c5f9811e038f7eef9627fa.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T08:10:05.207

您只看到最后一行，因为`SetWindowText()`一次性替换了窗口的全部内容。

如果您想同时显示两行，只需在一次调用中将它们连接在一起`SetWindowText()`：

```
SetWindowText(hWndEdit, TEXT("\r\nFirst string\r\n\r\nSecond string")); 
```

另一方面，如果你想在不同的时间插入它们，你必须使用`EM_SETSEL`消息将编辑插入符号放在窗口的末尾，然后使用`EM_REPLACESEL`消息在当前插入符号位置插入文本，如本文所述文章：

[如何以编程方式将文本附加到编辑控件](http://support.microsoft.com/kb/109550)

例如：

```
void AppendText(HWND hEditWnd, LPCTSTR Text)
{
    int idx = GetWindowTextLength(hEditWnd);
    SendMessage(hEditWnd, EM_SETSEL, (WPARAM)idx, (LPARAM)idx);
    SendMessage(hEditWnd, EM_REPLACESEL, 0, (LPARAM)Text);
} 
```

.

```
AppendText(hWndEdit, TEXT("\r\nFirst string\r\n"));
AppendText(hWndEdit, TEXT("\r\nSecond string")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T08:05:59.393

```
hWndEdit = CreateWindow("EDIT", // We are creating an Edit control
                                NULL,   // Leave the control empty
                                WS_CHILD | WS_VISIBLE | WS_HSCROLL |
                                WS_VSCROLL | ES_LEFT | ES_MULTILINE |
                                ES_AUTOHSCROLL | ES_AUTOVSCROLL,
                                10, 10,1000, 1000,
                                hWnd,
                                0,
                                hInst,NULL);
        SetWindowText(hWndEdit, TEXT("\r\nFirst string\r\n\r\nSecond string")); 
```

或者

```
 SetWindowText(hWndEdit, TEXT("\r\nFirst string\r\n"));

        char* buf = malloc(100);
        memset(buf, '\0', 100);

        GetWindowText(hWndEdit, (LPTSTR)buf, 100);
        strcat(buf, "\r\nSecond string");
        SetWindowText(hWndEdit, (LPTSTR)buf); 
```

# javascript - 淘汰赛'attr'是否总是假设输入需要转义，是否可以将其关闭？

> ID：15446970
> 
> 赞同：1
> 
> 时间：2013-03-16T07:57:08.380
> 
> 标签：javascript, html, knockout.js, escaping

如果要绑定`attr: { href: url }`，它是否总是根据 rfc2396 转义 url？

我最近遇到了`&amp;`在 json 响应中`&amp;amp;`通过敲除转换为的问题，我猜敲除无法知道它是双重编码的（html 然后是 json），因此将任何转换`&`为​​实体。

我们是否应该始终将原始 url 提供给`attr`绑定，而不是用于`html`绑定？这里的经验法则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:37:23.513

尝试这个：

```
JSON.stringify('"some text"') 
```

[KnockoutJS postJSON 方法为什么会转义我的字符串？](https://stackoverflow.com/questions/10003415/knockoutjs-postjson-method-escapes-my-string-why)

# java - 在数据库中创建目录结构并将数据存储在其中

> ID：15446974
> 
> 赞同：0
> 
> 时间：2013-03-16T07:57:40.600
> 
> 标签：java, android, android-sqlite, dropbox-api

我坚持如何在`sqlite`数据库中创建类似结构的目录。

```
private void listFilesForFolder(Entry list) throws DropboxException
    {
        for (Entry ent : list.contents)
        {
            if (ent.isDir)
             { 
                // Log.i("List",ent.fileName());
                // Log.i("Path",ent.path);
            Entry list1 = mDBApi.metadata(ent.path, 1000, null, true,null);
            listFilesForFolder(list1);
            }
            else
            {
                Log.i("List", ent.fileName());
                // Log.i("Path",ent.path);
            }
        }
} 
```

这是一个函数，通过它我可以使用 android 中的 Dropbox 核心 API 从 Dropbox 帐户递归获取所有文件和文件夹的列表。

现在如何将这些数据存储在 sqlite 数据库中的目录结构中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:03:19.400

```
CREATE TABLE entry (
    _id INTEGER PRIMARY KEY,
    name TEXT,
    parent_id INTEGER DEFAULT 0,
    is_dir INTEGER DEFAULT 0,
    CONSTRAINT fk_parent FOREIGN KEY ( parent_id ) REFERENCES entry( _id )
); 
```

*   目录和文件都保存在此表中。
*   如果目录或文件有父级，则其父级`_id`将保存到`parent_id`.
*   如果条目是目录，则该`is_dir`字段设置为 1，否则设置为 0。

# c# - 以编程方式将 AVI 文件头添加到视频流

> ID：15446975
> 
> 赞同：0
> 
> 时间：2013-03-16T07:57:41.953
> 
> 标签：c#, video, stream, directshow.net, data-compression

我有一个采集设备（模拟数字转换器：AverMedia USB Capture Card）。当我想在 C# 中使用 DirectShowLib 录制视频时，我只接收帧。我可以使用 RawVideo Player 录制帧并播放文件。如何创建像 AVI 这样的标准视频文件头？当我想压缩数据时会出现第二个问题。当我使用压缩时，我根本无法阅读它。

这是我的工作 GraphEdit 架构：

![在此处输入图像描述](../Images/9f44c8ea747c6553c277ae10aab08267.png)

如何创建带有标头等的标准 AVI 或 MPEG 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T12:35:42.707

可播放文件具有一定的结构，捕获的数据通常通过所谓的多路复用器过滤器写入此类文件。对于 AVI 格式，标准过滤器是[AVI Mux Filter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318188%28v=vs.85%29.aspx)。它在输入上获取视频/音频，并在输出上转换为文件兼容的流。如果/当此输出连接到文件编写器过滤器时，后者会生成具有正确标题的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:20:32.053

看看[这个](http://www.adp-gmbh.ch/csharp/avi/write_avi.html)，你应该可以用它来设置一个 Avi 对象，然后用你的框架 AddFrame() 来创建一个 avi。

# php - 正则表达式匹配模式

> ID：15446977
> 
> 赞同：0
> 
> 时间：2013-03-16T07:57:46.037
> 
> 标签：php, regex, pattern-matching, preg-match-all

我试图想出这个字符串的正则表达式匹配，但我失去了头发。到目前为止，这就是我所拥有的示例模式。

```
 <?php
    preg_match_all('/\(.*?\)*([^,\s][^\,]*[^.\s])/', 'Alpha Romeo (11:00), Honda (11:00 & 12:00), Toyota (11:00, 12:00 & 8:00)', $result);
    print_r($result);
?> 
```

期望的输出：

```
 Array
(
    [0] => Alpha Romeo (11:00),
    [1] => Honda (11:00 & 12:00),
    [2] => Toyota (11:00, 12:00 & 8:00)
) 

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:05:28.070

```
preg_match_all('/[,\s]+(.*?\))/', 'Alpha Romeo (11:00), Honda (11:00 & 12:00), Toyota (11:00, 12:00 & 8:00)', $result); 
```

这是[输出](http://codepad.viper-7.com/OwmEO2)：

```
Array ( 
    [0] => Romeo (11:00) 
    [1] => Honda (11:00 & 12:00) 
    [2] => Toyota (11:00, 12:00 & 8:00)
) 
```

**PS**：我在`$result[1]`这里输出。

* * *

## 编辑

最后一个错过`Alpha`了第一场比赛。这是一个更好的模式：

```
<?php
    preg_match_all('/,?(.*?\))/', 'Alpha Romeo (11:00), Honda (11:00 & 12:00), Toyota (11:00, 12:00 & 8:00)', $result);
    print_r($result);
?> 
```

[链接](http://codepad.viper-7.com/Mhz39m)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:13:40.877

尝试这个：

```
$str = 'Alpha Romeo (11:00), Honda (11:00 & 12:00), Toyota (11:00, 12:00 & 8:00)';

preg_match_all('#[^,\s]{2}.*?\(.*?\)#', $str, $matches);

echo var_export($matches, TRUE); 
```

输出：

```
array (
  0 => array (
    0 => 'Alpha Romeo (11:00)',
    1 => 'Honda (11:00 & 12:00)',
    2 => 'Toyota (11:00, 12:00 & 8:00)',
  ),
) 
```

# django - Django mutable POST 没有出现在cleaned_data 中

> ID：15446978
> 
> 赞同：2
> 
> 时间：2013-03-16T07:57:46.777
> 
> 标签：django, forms, immutability, mutable

我已经搜索了两天了，但我找不到任何可行的解决方案。

**形式**：

```
class SMSSettingsForm(forms.ModelForm):
    smsQuota = forms.IntegerField(label=_("Account Quota"), max_value=432000, min_value=1, required=True, help_text=_('(mins)'), error_messages={'required': _('This field cannot be empty')})
    smsTimeout = forms.IntegerField(label=_("Timeout"), max_value=9999999, min_value=1,required=False, help_text=_("(mins)"))
    class Meta:
        model = Settings
        fields = ("smsQuota", "smsTimeout")

    def __init__(self, *args, **kwargs):
        super(SMSSettingsForm, self).__init__(*args, **kwargs)

    def save(self):
        settings = SettingsManager.get()
        settings.smsQuota = self.cleaned_data['smsQuota']
        settings.smsTimeout = self.cleaned_data['smsTimeout']

        # Following lines are extra fields, rendered by JS in HTML
        settings.ck = self.cleaned_data['ck']
        settings.ck_per = self.cleand_data['ck_per']

        settings.save() 
```

**观点**：

```
form_with_extra_elem = request.POST.copy()
form_with_extra_elem['ck'] = request.POST.get("ck")
form_with_extra_elem['ck_per'] = request.POST.get("ck_per")
# The two lines above didn't work, so I tried the following, but didn't work again
#form_with_extra_elem.update({'ck': request.POST.get("ck")})
#form_with_extra_elem.update({'ckper': request.POST.get("ck_per")})
form = SMSSettingsForm(form_with_extra_elem) 
```

你知道如何解决这个问题吗？我认为新元素没有通过`validation`，所以我不能使用它们。但是如何让他们这样做呢？实际上，我不需要任何验证 - 除了`cleaned_data`, 访问表单参数还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:42:15.643

我不明白你为什么只想通过 JS 添加额外的字段。如果您希望它们出现在 中`cleaned_data`，它们必须是表单的一部分。您可以在 ModelForm 上声明额外的字段，只需像使用其他字段一样指定它们：

```
class SMSSettingsForm(forms.ModelForm):
    smsQuota = forms.IntegerField(...)
    smsTimeout = forms.IntegerField(...)
    ck_per = forms.IntegerField()
    ck = forms.IntegerField() 
```

# c# - 在 monotouch/monodroid 中使用 mock 进行单元测试

> ID：15446979
> 
> 赞同：3
> 
> 时间：2013-03-16T07:57:51.270
> 
> 标签：c#, mono, xamarin.ios, xamarin.android, moq

我目前正在 MonoTouch/MonoDroid 上开发一个应用程序，我想改进我的测试（在带有 xamarin 工作室的 Mac 上工作）。我知道如何编写在模拟器上运行的集成测试（至少在带有 iOS 单元测试项目的 iOS 上）。

我现在想做的是 TTD，使用小型的、仅模拟的测试来测试一个指定的类（并且不在任何设备/模拟器中运行 - 仅限单元测试）。我曾经使用 Mockito 在 Java 上执行此操作，并尝试使用 Moq 4.0 在我的单声道解决方案上执行相同操作。

为此，我不需要 Mono 的任何东西，只需要简单的类。所以我尝试创建一个新的 N 单元项目并将我的类链接到该项目中。但是现在，为了编译代码，我需要包含我在那些类中使用的所有引用（例如 Xamarin.Mobile.Geolocator、RestSharp、Geo 等），即使我稍后会模拟它们。当我这样做时，代码会编译，但是当我运行第一个测试时，会出现错误，提示 System.Core 的 xy 版本不可用。这个问题是有道理的，这些库使用了一个特定的、单一版本的系统库，它在该测试项目中不可用。

我看到的唯一解决方案是避免这些引用，并为我在代码中使用的所有库类编写空存根，只是为了让它编译。但这是很多无用的工作，我真的尽量避免。

所以长话短说：有人可以帮助我在 xamarin mono 中进行测试优先开发的工作设置吗？我可以在哪里使用 Moq 之类的模拟框架，而无需在模拟器上运行我的单元测试？重要的是还有一些模拟第三方库的解决方案（并使代码在我的测试项目中编译）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:27:42.850

我还没有使用 Xamarin 2 中的新工具 - 我的许可证已过期，所以我仍在 VS 中使用旧的 Mono for Android。

测试优先的方法无疑是平台上的挑战。

如果您准备将特定于移动设备的库与间接分开，最好的办法*是*创建一个针对 .NET 框架的普通类库项目，添加您要测试的文件并选择“*添加为链接”*选项。

当然，您需要将域逻辑与平台特定逻辑很好地分离才能正常工作，但是您可以访问各种测试/模拟框架的全部功能。

另一种选择是将跨平台元素分离到可移植类库 (PCL) 中并以相同的方式进行测试。PCL 路线有一些优点和缺点 -[此](https://stackoverflow.com/questions/13797385/what-is-the-advantage-of-using-portable-class-libraries-instead-of-using-add-as)答案中有更多信息。

# java - 错误：“令牌“;”的语法错误，预期”

> ID：15446982
> 
> 赞同：-2
> 
> 时间：2013-03-16T07:58:31.787
> 
> 标签：java, android, audio

这是来自 AndroidSnippets.com，它必须有助于列出设备上的所有音乐文件。

```
 private void getallmusic() {

        String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

        String[] projection = {
                MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.ARTIST,
                MediaStore.Audio.Media.TITLE,
                MediaStore.Audio.Media.DATA,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.DURATION
        }; <<<<<<< Error
            .... 
```

错误文本是“令牌“;”的语法错误，预期”。这个局部变量描述有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:05:37.523

这不是错误。您应该备份您的项目或`R.java`文件，然后进入项目选项，然后清理项目。

# php - PDO 多次执行问题

> ID：15446984
> 
> 赞同：-1
> 
> 时间：2013-03-16T07:58:40.290
> 
> 标签：php, mysql, pdo

我在处理页面上有两个插入。第一个工作顺利。第二个甚至不会激活。我什至尝试放置一个 PDO 查询以查看它是否可以工作，但仍然没有。

```
 $cpinsert = $db->prepare('insert into Chatposts values (0, :chatid, :name, :url, :text, now(), :ipaddress, 0)');

        $cpinsert -> bindParam(':chatid', $chatroomid, PDO::PARAM_INT);
        $cpinsert -> bindParam(':name', $name, PDO::PARAM_STR);
        $cpinsert -> bindParam(':url', $url, PDO::PARAM_STR);
        $cpinsert -> bindParam(':text', $text, PDO::PARAM_STR);
        $cpinsert -> bindParam(':ipaddress', $ipaddress, PDO::PARAM_STR);

            $cpinsert -> execute();

        // Needs an error checker
        $cpid = $cpinsert ->lastInsertID();
        $cpinsert->closeCursor(); 
```

^ 这很好用，虽然我不知道 lastinsertid 因为我无法测试它。

\V/ 无论我尝试什么，都不会执行任何内容。有些东西阻止了那里的任何东西执行，或者我没有正确关闭上面的连接。

```
 // Targets Insert
    //if (isset($target)):
    $query = "insert into Targets values (9,'rommel')";
    $db->query($query);
        $targetinsert = $db->prepare('insert into Targets values (:cpid,:tname)');

        foreach ($target as $tname):
            $targetinsert -> bindParam(':cpid', $cpid, PDO::PARAM_INT);
            $targetinsert -> bindParam(':tname', $tname, PDO::PARAM_STR);
        endforeach; 

            $targetinsert -> execute();

    //endif; 
```

我已经尝试了我所知道的一切，但没有运气。因为我是 PDO 的新手，所以我很可能犯了一个小错误。当我添加 Closecursor 时，它似乎也没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:02:46.310

您说您需要执行许多插入，但由于某种原因您只执行**一次**查询。

另外，请从您的代码中删除这些 try..catch 内容 - 它们是您不知道出了什么问题的**原因**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-16T08:40:08.443

我不得不重新创建页面的半功能模型，但我发现了问题，它是 lastinsertid()。我在 PDO 类上应用了 PDOstatement 类。

前：

```
 $cpid = $cpinsert->lastInsertID(); 
```

后：

```
 $cpid = $db->lastInsertID(); 
```

我只需要调用数据库而不是使用那行代码进行准备。

# eclipse - Xtext 与 GMF 的集成

> ID：15446987
> 
> 赞同：4
> 
> 时间：2013-03-16T07:58:59.270
> 
> 标签：eclipse, xtext, eclipse-gmf

我看到 xtex 可以与 gmf 集成，但我找不到任何教程、解释或示例代码。

有没有关于如何做到这一点的解释？

我想问...我可以创建一个 xtext 项目，然后使用相同的元模型（ecore）我可以创建一个 gmf 项目吗？我想 sencron 的 2 个项目？

因为我希望想要使用我的工具的用户可以同时使用文本、图形语法或两者。

所以任何人都可以帮助我吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:03:57.240

请参阅 [1] 了解使用 Epsilon 的 Eugenia 的解决方案

[1] [http://www.eclipse.org/forums/index.php/mv/msg/472225/1036564/#msg_1036564](http://www.eclipse.org/forums/index.php/mv/msg/472225/1036564/#msg_1036564)

# ios - 删除数据时的Execution_BAD-ACCESS

> ID：15446993
> 
> 赞同：0
> 
> 时间：2013-03-16T07:59:45.247
> 
> 标签：ios, objective-c, core-data, nsmanagedobject

我正在使用`NSFetchedResultsController`. 现在，当数据从服务器到达时，我需要删除 sqlite 数据库中存在的所有数据。

现在，当我使用下面给出的代码从数据库中删除数据时，它**有时会崩溃**（并非总是如此）并给出此错误：

> Execution_BAD-ACCESS（代码=2，地址=0x0）

在这条线上

```
if (![moc save:&saveError]) { 
```

。H

```
@property (readonly, retain, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, retain, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, retain, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator; 
```

.m

```
@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

NSManagedObjectContext *moc = [delegate managedObjectContext];

NSFetchRequest * allCategories = [[NSFetchRequest alloc] init];
[allCategories setEntity:[NSEntityDescription entityForName:@"Categories" inManagedObjectContext:moc]];
[allCategories setIncludesPropertyValues:NO]; //only fetch the managedObjectID

NSError * error = nil;
NSArray * dataArray = [moc executeFetchRequest:allCategories error:&error];

//error handling goes here

[NSFetchedResultsController deleteCacheWithName:@"RootDetail"];

for (Categories *cat in dataArray) {
    [moc deleteObject:cat];
}

NSError *saveError = nil;      
if (![moc save:&saveError]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
}

[allCategories release]; 
```

* * *

我现在彻底检查，我发现当我访问 DetailPageController 并返回（使用 UINavigationController popNavigationController :) 时，这个问题就来了，然后如果我想要 DetailPageController，它就会崩溃。

给出以下错误 **-[DetailPageController controllerWillChangeContent:]：消息发送到已释放实例 0x11f52a90* **

 ** * *

问题在于 NSManageObjectContext。所以修复总是使用新创建的 NSManageObjectContext 对象，否则会产生问题。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:46:39.683

**根据您的评论**

> 我正在使用操作队列。所以我在主线程上输入数据。2.你是说每个线程应该有单独的上下文实例。但我认为应该只有一个主要的上下文实例。

**没有**。您**必须**遵循有关[Concurrency with Core Data的文档](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)

> 为每个线程创建一个单独的托管对象上下文并共享一个持久存储协调器。这是通常推荐的方法。

或者

> 为每个线程创建一个单独的托管对象上下文和持久存储协调器。这种方法以更大的复杂性（特别是如果您需要在不同的上下文之间传达更改）和增加的内存使用量为代价提供更大的并发性。

或者

使用新的核心数据 API。

*原始问题*

如果您提供有关崩溃的其他详细信息，我想我们可以为您提供帮助。怎么样`delegate`？

同时，给你一些提示。

**1) 在 Xcode 中启用僵尸**

[如何在 Xcode 中启用 NSZombie？](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)

**2）使用正确的上下文**

为什么要使用以下内容？

`NSManagedObjectContext *moc = [delegate managedObjectContext];`

只需使用

```
NSManagedObjectContext *moc = [self managedObjectContext]; 
```

这可能是问题的根源。但没有细节我不太确定。

因此，当您从外部创建此控制器时，请正确设置托管对象上下文属性。

```
yourController.managedObjectContext = theContextYouWantToShare; 
```

**3) 错误处理**

```
NSError * error = nil;
NSArray * dataArray = [moc executeFetchRequest:allCategories error:&error];
if(dataArray) {
    // manage objects here...
} else {
    // handle error here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:59:54.703

The answer by flexaddicted is very good (unfortunately I can't comment yet) but remember to be very careful if you have a multi-threaded application (you mention server calls in your question). Make sure that each thread uses its own context, otherwise you will run into problems. This is well docmented in Apple's Core Data documentation.

Or, at the very least, make sure that any call to do something with core data is on the main thread (although this is not ideal as this can block when performing long operations).*

# ios - 您将如何编写连续删除按钮？

> ID：15446997
> 
> 赞同：5
> 
> 时间：2013-03-16T08:00:19.153
> 
> 标签：ios, iphone, xcode, uibutton

我正在制作一个计算器应用程序，并为我自己的键盘提供 UIButtons。我有一个删除键，一切正常，除了用户必须一遍又一遍地按下删除键，如果他们想全部删除。

我想知道是否有办法在按住按钮超过 2 秒时删除所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T08:04:08.713

实现这一点的最简单方法是将长按手势识别器附加到您的`[Delete]`按钮。

Xcode 允许您在界面构建器中附加长按手势识别器。将其添加到您的按钮，配置长按的持续时间，并以`IBOutlet`与连接其他 UI 事件相同的方式连接处理程序。

如果您更愿意在代码中执行此操作，[此答案](https://stackoverflow.com/a/6179591/335858)将向您展示如何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T08:04:59.157

使用你自己的定时器函数来处理这个

```
-(IBAction)buttonHit {
    //here start timer that fires for every 2 seconds and handle deletion method in that
}

-(IBAction)buttonReleased {
   //Stop timer...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T08:03:54.547

在您的子类 UIButton 中，您可能希望查看[“ `touchesBegan: withEvent:`” UIResponder 方法](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/touchesBegan%3awithEvent%3a)，如果它超过了某个时间阈值，则开始疯狂删除（也就是说，直到调用[“ `touchesEnded: withEvent`”方法）。](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/touchesEnded%3awithEvent%3a)