# StackOverflow 问答 13992000-13992999

# ruby-on-rails - 如果关联已加载，请避免范围命中数据库

> ID：13992002
> 
> 赞同：2
> 
> 时间：2012-12-21T14:33:30.077
> 
> 标签：ruby-on-rails, performance, activerecord, code-reuse, named-scope

我有两个这样的模型：

```
class Country < ActiveRecord::Base
   has_many :cities
end

class City < ActiveRecord::Base
   belongs_to :country
   scope :big, where("population > 1000000")
end 
```

然后，在代码中，我加载了一个国家的城市，如下所示：

```
country = Country.include(:cities).find(id) 
```

但是当我执行时：

```
country.cities.big 
```

它通过以下查询对数据库产生了影响：

```
SELECT * FROM cities where country_id = 1 AND population > 1000000 
```

哪个工作正常，但是没有必要，因为所有城市都已经被 :include 加载了。如果关联已经加载，有没有办法告诉范围不要命中数据库？

我可以使用关联扩展来做到这一点，但不能用于常规范围。在扩展我做类似的事情：

```
has_many :cities do
   def big
      if loaded?
        detect {|city| city.population > 1000000}
      else
        where("population > 1000000")
      end
   end
end 
```

但这将在 2 个地方重复范围，我想在城市模型上重用范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:01:14.787

范围逻辑使用与 Arel 一起工作的方法，而 ruby​​ Enumerables 不知道如何使用它们。您也许可以将您的逻辑重构为可以转换为使用 Arel 或 Enumerable 方法的抽象，但这并不总是可能的：

```
def self.build_scope(abstracted)
  where(abstracted.map(&:to_s).join(' '))
end

def self.build_enum(abstracted)
  select{|city| city.send(abstracted[0]).send(*abstracted[1..2]) }
end

def self.abstract_big
  [:population, ">", 10000]
end

scope :big_scope, build_scope(abstract_big)

def self.big_enum
  build_enum abstract_big      
end 
```

然后你可以这样做：

```
country.cities.big_enum 
```

一个更好的主意是只根据您想要的范围急切地加载（如果您事先知道的话）：

```
country = Country.include(:cities).merge(City.big).find(id) 
```

# svn - SVN 更新而不更改我的本地文件

> ID：13992003
> 
> 赞同：1
> 
> 时间：2012-12-21T14:33:34.680
> 
> 标签：svn

我对我的项目进行了一些重构，所以在尝试提交后我得到一个错误：`"The directory is out of date"`. 所以我需要更新我的项目。但是我怎样才能`update`忽略所有即将到来的文件和更改呢？我真的不想更新我的任何文件或下载我在当前版本中删除的旧文件。

（一旦我更新了，所以在更新了所有被旧版本覆盖的重构文件之后（！！！）并且我丢失了新版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:38:53.640

好吧，如果您更新文件，您*将*更改它们。你可以做的是将它们标记为合并然后提交，我认为它会起作用，它有点像“覆盖并提交”，但我建议谨慎行事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:39:04.093

你描述的不可能。如果文件“a”中有本地更改并且更新带来了该文件 a 的修改版本，svn 将尝试合并修改。如果不可能，它会保留您的本地文件，您必须手动合并它们。但是，您可以将 head 检出到单独的目录中并手动合并所有修改（包括删除/添加的文件），但这会破坏版本控制的整个概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T13:44:17.297

请参阅下面的编辑。

@khachik：好吧，我刚才发生了“不可能”的事情。我在一个 MS Word 文档上工作了 5 个小时。将文档“恢复”到基本修订版（周二）之前的更新。没有尝试合并。没有备份。

编辑：哎呀，不是真的。我昨天晚上重命名了文件，并在晚上继续处理它。显然，svn rename 的删除部分没有成功导致恢复。我现在有两个版本:-))

# java - 修改jdk文件夹中的src.zip文件

> ID：13992021
> 
> 赞同：0
> 
> 时间：2012-12-21T14:35:28.143
> 
> 标签：java

我可以修改**src.zip**（它包含**预定义的 java 类**）以便我

首先**解压缩**，然后**添加我的个人包**和**zip，并用**我修改的这个新的 src.zip 替换 src.zip。

这样我就可以像任何其他类一样**导入它们。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:36:46.560

src.zip 包含源文件而不是类文件，它也不会是内置类路径的一部分。

如果你必须导入你的类，你必须在类路径中保留其他依赖的 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:43:26.083

查看[CLASSPATH](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)上的 Java 教程。这提供了一种为 Java 使用添加库的可扩展方法，它不会影响原始安装，并且可以在运行的进程之间隔离。

> CLASSPATH 变量是告诉应用程序（包括 JDK 工具）在哪里查找用户类的一种方式。（属于 JRE、JDK 平台和扩展的类应通过其他方式定义，例如引导类路径或扩展目录。）
> 
> 指定类路径的首选方法是使用 -cp 命令行开关。这允许为每个应用程序单独设置 CLASSPATH 而不会影响其他应用程序

您很少需要接触 JDK/JRE 安装，我强烈建议您不要这样做。通过使用上述机制，每个应用程序都可以指定自己的库，并且您可以在 JDK/JRE 的变体之间进行交换，而无需确保修改每个部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:41:36.457

你想要的是设置**classpath**。

当然，您可以将类添加到**rt.jar**文件中，但我强烈建议不要这样做。

[如何设置类路径](http://javarevisited.blogspot.de/2011/01/how-classpath-work-in-java.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:44:47.507

`src.zip` folder will not be included in java classpath, yes you can add your own classes in it. But in order to add it your classpath ,it needs to be compiled and the resulting class files you can add use. But its not recommended to modify jdk source, unless you know exactly what you are trying to do.

# iphone - 如何从 iOS 上的 AudioQueue 服务获取样本

> ID：13992023
> 
> 赞同：0
> 
> 时间：2012-12-21T14:35:32.403
> 
> 标签：iphone, ios, audio, core-audio, audioqueue

我正在尝试从 AudioQueue 获取样本以在 iPhone 上显示音乐频谱（如在 iTunes 中）。

我已经阅读了很多帖子，但几乎所有的帖子都询问在录制时获取样本，而不是播放:(

我正在使用 AudioQueue 服务来传输音频。请帮助理解以下几点：1/我在哪里可以访问样本（PCM，非 mp3（我正在使用 mp3 流）2/我应该在自己的缓冲区中收集样本以应用 fft 吗？3/是否有可能获得频率没有 fft 转换? 4/如何将缓冲区中的 fft shift 与当前播放的样本同步？

谢谢，

更新：

```
AudioQueueProcessingTapNew 
```

对于 iOS6+，这对我来说很好。但是 iOS5 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T03:58:28.843

对于播放音频，我们的想法是在将样本提供给音频队列回调之前获取样本。您可能需要事先将任何压缩音频文件格式转换为原始 PCM 样本。这可以使用 AVFoundation 转换器或文件阅读器服务之一来完成。

然后，您可以从用于馈送音频队列回调缓冲区的同一源复制数据帧，并应用您的 FFT 或其他 DSP 对其进行可视化。

您可以使用 FFT 或一组带通滤波器来获取频率信息，但 FFT 在这方面非常有效。

同步需要通过反复试验来完成，因为 Apple 没有指定确切的音频和视图图形显示延迟，这在 iOS 设备和操作系统版本之间可能会有所不同。但是较短的音频队列缓冲区或使用 RemoteIO 音频单元可以让您更好地控制音频延迟，而 OpenGL ES 可以让您更好地控制图形延迟。

# html - 如何使用 CSS 在表格列中居中右对齐数字？

> ID：13992026
> 
> 赞同：24
> 
> 时间：2012-12-21T14:35:42.357
> 
> 标签：html, css

下图说明了我要完成的工作：

![在此处输入图像描述](../Images/4c0b55e33d1483cbdaa6c0a5e043553a.png)

UPD。如您所见，我需要最长的数字在其单元格中居中，并且所有其他数字都与最长数字的右边框右对齐。

UPD 2\. 这些数字是动态的（最初未知）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T15:14:35.893

似乎没有任何直接的 CSS 方法。但是您可以在评论中考虑@CMKanode 建议的方法。您需要预处理列中的数字并计算其中最大的数字（这需要对区域设置敏感的解析，因为您使用的是千位分隔符），然后您将使用 U 将数字左填充到相同数量的字符+2007 图形空间作为与数字具有相同宽度的空间。而且，当然，该列将被声明为居中。

因此，在示例中，“5”将被填充`&#x2007;&nbsp;&#x2007;&#x2007;&#x2007;&nbsp;&#x2007;&#x2007;5`（假设您使用普通空格作为千​​位分隔符；U+2009 THIN SPACE 可能会更好，但它存在字体问题。

该方法意味着您需要使用数字具有相同宽度的字体（计算机中的大多数字体都如此）并且包含 U+2007。

例如，如果千位分隔符是逗号或句点，则需要使用 U+2008 PUNCTUATION SPACE 来代替。

最后，我认为这会过于复杂。最好使列右对齐但具有合适的左右填充，根据列标题的宽度和数字的预期宽度选择作为一个很好的猜测。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-21T15:04:00.557

下面不是一个理想的解决方案，因为数字的大小最初是未知的，但在没有太多附加标签的情况下它更接近一些。

CSS：

```
.numSpan {
    display: inline-block;
    width: 100px;
    text-align: right;
}
td { text-align: center; } 
```

HTML：

```
<td>
    <span class="numSpan">5</span>
</td> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T14:59:52.560

在我看来，您需要在主表内有第二个表来确定要居中但右对齐的编号内容的宽度。签出这个小提琴：[小提琴示例](http://jsfiddle.net/sUZLD/2/)

示例代码：

HTML：

```
<table class="container">
    <tr><td class="title">Some Title for Numbers in a Table</td></tr>
    <tr><td>
        <table>
            <tr><td>5 000 000</td></tr>
            <tr><td>5 000</td></tr>
            <tr><td>5</td></tr>
            <tr><td>5 000 000</td></tr>
        </table>
   </td></tr>
</table>​ 
```

CSS：

```
.container {
    width: 400px;
    border: 1px solid #999;    
}

.title {
    font-weight: bold;
    text-align: center;    
}

.container table {
    margin: 0px auto;   
}

.container table td {
    text-align: right;
}​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-25T04:39:10.037

好的，我昨天遇到了这个问题，经历了所有的解决方案，并提出了我自己的解决方案，它不会以显着的方式修改 DOM，而是使用 JS，但我将列出上面一些解决方案的缺点

1.  如果您的字体是等宽字体，则填充额外字符有效
2.  创建固定填充或固定宽度可能会影响响应行为
3.  在列中添加第二个表是严重的 DOM 操作，如果您有 1000 行和 30 列，您将开始看到如此重的树的性能影响

**HTML**（使用 Bootstrap 4.1.1）

```
<table class="table" id="datatable">
  <thead>
    <tr>
      <th>#</th>
      <th>Symbol</th>
      <th>Price</th>
      <th>Volume</th>
      <th>Market Cap</th>
      <th>Circulating Supply</th>
      <th>Total Supply</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table> 
```

**CSS**

```
.numeric{
  text-align: right;
}

#datatable th, #datatable td{
  text-align: center;
}

.centerspan{
  display: inline-block;
  text-align: right;
  background: yellow;
}

.root-rank, .root-price, .root-market_cap, .root-max_supply{
  background: #efefef;
} 
```

**JavaScript**

```
var overview_data = [
    { "rank": 1, "symbol": "BTC", "price": 8004.8, "volume_24h": 5864600000000.0, "market_cap": 137422500058.0, "circulating_supply": 17167512.0, "max_supply": 21000000.0},
    { "rank": 2, "symbol": "ETH", "price": 471.305, "volume_24h": 1930260000.0, "market_cap": 47547607782.0, "circulating_supply": 100885006.0, "max_supply": null},
    { "rank": 3, "symbol": "XRP", "price": 0.454852, "volume_24h": 234947000.0, "market_cap": 17882817260.0, "circulating_supply": 39315683476.0, "max_supply": 100000000000.0},
    { "rank": 4, "symbol": "Bitcoin Cash", "price": 845.04, "volume_24h": 730498000.0, "market_cap": 14580563109.0, "circulating_supply": 17254288.0, "max_supply": 21000000.0},
    { "rank": 5, "symbol": "EOS", "price": 8.14097, "volume_24h": 691908000.0, "market_cap": 7295526131.0, "circulating_supply": 896149492.0, "max_supply": 1000000000.0} 
]

var table = document.getElementById("datatable")
var thead = table.tHead
var tbody = table.tBodies[0]
var colClasses = []

for(var i = 0, len= overview_data.length; i < len; i++){
  var tr = document.createElement("tr")
  for(var j in overview_data[i]){
    var td = document.createElement("td")
    td.classList.add("root-" + j)
    var span = document.createElement("span")
    span.classList.add("centerspan")
    span.classList.add('col-' + j)

    //Add this column classes to keep track of one class per column
    if (!colClasses.includes("col-" + j)){
       colClasses.push('col-' + j)
    }
    var text = document.createTextNode(overview_data[i][j] || -1)
    if(!isNaN(overview_data[i][j])){
      td.classList.add("numeric")
    }
    span.appendChild(text)

    td.appendChild(span)
    tr.appendChild(td)
  }
  tbody.appendChild(tr)
}

//This is the main part
for(var i = 0; i < colClasses.length; i++){
  var items = document.querySelectorAll("." + colClasses[i])
  var max = 0

  //Loop through all the items in the col class
  for(var j = 0; j < items.length; j++){
    //Calculate max width of span containing text inside column
    if(items[j].offsetWidth > max){
       max = items[j].offsetWidth
    }
  }

  //Set width of each span to the max width
  for(var j = 0; j < items.length; j++){
    console.log(max)
    items[j].style.width = max + "px"
  }
} 
```

**快照** [![在此处输入图像描述](../Images/52179a94d3ed44278a69d061b1b40a88.png)](https://i.stack.imgur.com/MQpAx.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T14:41:55.100

给 td 添加一个 div：

```
<td>
    <div align="center">
        <p style="text-align:right">Text Aligned Right</p>
    </div>
</td> 
```

然后添加填充/边距以微调 div 的位置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-14T17:11:07.140

你可以用 CSS 来近似。创建一个类：

```
td.rt-ctr {
  text-align:right;
  padding-right:33%;    
} 
```

然后调用图表中的类：

```
<table>
  <tbody>
   <tr>
    <td>Item 1</td>
    <td class="rt-ctr">100.25</td>
   </tr>
   <tr>
    <td>Item 2</td>
    <td class="rt-ctr">99.75</td>
   </tr>
  </tbody>
</table> 
```

根据列、图表和最长数据条目的宽度，您可能需要调整 CSS 中的百分比。这种方法并不完美，但它是响应式的并且是一种纯 CSS 方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T14:40:58.920

如果我理解正确，你想要类似的东西：

```
 .right-td { align:right; } 
```

一起去

```
<td class="right-td">5000000</td> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T14:42:22.633

我相信实际`td`情况`table`（如果它确实是一张桌子）将有一个固定的宽度，并且有很多填充物给人一种它是中心右对齐的错觉。

您可以尝试如下粗略的样式：

```
/* For demonstration purposes, a fixed width `th`. */
th.headrowrnum {
    width: 200px;
}

td.rightalignnum {
    width: 100px;
    padding: 0 50px;
    text-align: right;
} 
```

HTML：

```
<table>
    <tr>
        <th>Col 1</th>
        <th class="headrowrnum">Col 2</th>
    </tr>
    <tr>
        <td>X</td>
        <td class="rightalignnum">5</td>
    </tr>>
    <tr>
        <td>Y</td>
        <td class="rightalignnum">500</td>
    </tr>
</table> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-21T14:45:02.000

要实现这种对齐，您应该执行以下操作：

HTML：

```
<td class="my_td">
    <div class="content">
        12345
    </div>
</td> 
```

CSS：

```
.my_td 
{
    width: 200px;
    align: center;
}

.content
{
    width: 100px;
    margin-left: auto;
    margin-right: auto;
    text-align: right;
} 
```

您只需要调整宽度以满足您的要求，例如，数字中的最大位数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-15T21:01:18.230

另一种可能的解决方案是使用媒体查询。在我们的例子中，每个表中的列数大致相同。因此，只需根据屏幕大小更改右填充以提供所需的右/中心对齐：

```
@media (min-width: 769px)
{
   td
   {
      &.financial
      {
         padding-right: 5px;
      }
   }
}

@media (min-width: 1100px)
{
   td
   {
      &.financial
      {
         padding-right: 20px;
      }
   }
}

@media (min-width: 1400px)
{
   td
   {
      &.financial
      {
         padding-right: 30px;
      }
   }
} 
```

* * *

## 回答 #11

> 赞同：-7
> 
> 时间：2012-12-21T14:38:25.870

在 CSS 中，这样做可以使 td 居中对齐

```
td {text-align:center;} 
```

# ruby-on-rails - Google OpenID 运行 Ruby 代码示例？

> ID：13992029
> 
> 赞同：4
> 
> 时间：2012-12-21T14:36:27.097
> 
> 标签：ruby-on-rails, ruby, sinatra, rack, google-openid

我经历了很多关于 Google OpenID 身份验证的 Rails/Rails 示例，但没有一个能正常工作。它们中的大多数都不起作用，因为它们已经过时了。即使是omniauth也不是出于其他原因。

有没有人有一个现在可以正常工作的 Ruby Rack Web 应用程序的工作示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:07:13.743

不久前我分叉了一个，并在 GitHub 上弹出了一个名为[rails3-mongoid-omniauth 的文件](https://github.com/jgodse/rails3-mongoid-omniauth)。

它允许您使用多种方法进行身份验证。可证明它在带有 Rails 3.0.x 的 Heroku 上的 Bamboo 堆栈上运行。我还没有更新它，但它应该给你一些见解。

一些关键文件是：

*   [声明提供程序的omniauth.rb](https://github.com/jgodse/rails3-mongoid-omniauth/blob/master/config/initializers/omniauth.rb)。它还包括一个修复LinkedIn提供程序的monkeypatch，尽管我怀疑它现在已经修复了。
*   [routes.rb](https://github.com/jgodse/rails3-mongoid-omniauth/blob/master/config/routes.rb)其中为每个身份验证提供程序定义了到此应用程序的路由。这是omniauth 发送给提供者的回调URL。
*   [application_controller.rb](https://github.com/jgodse/rails3-mongoid-omniauth/blob/master/app/controllers/application_controller.rb)其中 current_user 是基于会话密钥定义的。
*   [session_controller.rb，其中会话](https://github.com/jgodse/rails3-mongoid-omniauth/blob/master/app/controllers/application_controller.rb)是根据身份验证提供者（例如 Google）的授权创建的
*   [_navigation.html.erb](https://github.com/jgodse/rails3-mongoid-omniauth/blob/master/app/views/shared/_navigation.html.erb) 登录链接将您带到身份验证提供程序的位置。

现在我已经做了更多的研究，看起来[http://railsapps.github.com/tutorial-rails-mongoid-omniauth.html](http://railsapps.github.com/tutorial-rails-mongoid-omniauth.html)上也有一个教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:25:36.333

我会检查这个 Rails Cast，它应该可以帮助您在基于 Rails/Rack 的 Ruby 应用程序上启动并运行 On Open ID 和 omniauth

[http://railscasts.com/episodes/304-omniauth-identity](http://railscasts.com/episodes/304-omniauth-identity)

顺便说一句，如果你打算进行 Rails 开发，Railscast 是一个很好的信息来源。

# javascript - 无法使用 jquery / js 检查项目悬停

> ID：13992032
> 
> 赞同：1
> 
> 时间：2012-12-21T14:36:31.673
> 
> 标签：javascript, jquery, css, hover

有一个菜单按钮 (#menu_product) 当用户的鼠标悬停在它上面时，菜单会向下滑动 (#about)。但是，它不能检查向上滑动（隐藏）它的条件。逻辑是我需要确保按钮和菜单都没有悬停然后向上滑动。但似乎菜单永远不会向上滑动，如何解决？谢谢

```
$('#menu_product').live('mouseout',function() {
    if (!$('#about:hover')) {
        $("#about").slideUp("slow");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:53:42.163

使用以下内容来获得您想要达到的效果

```
$("#menu_product, #about").hover(
  function () {
    $("#about").stop();
    $("#about").slideDown("slow");
  }, 
  function () {
    $("#about").slideUp("slow");
  }
); 
```

​jsfiddle：http: [//jsfiddle.net/np67k/](http://jsfiddle.net/np67k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:39:37.210

javascript`$('#about:hover')`将始终返回一个有效的 jquery 对象，因此将始终为真。

尝试使用类似的东西`$('#about').is(':hover')`，因为该`.is()`函数返回一个布尔值。[http://api.jquery.com/is/](http://api.jquery.com/is/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:52:06.740

#1 不要使用`live`，它已被弃用。

试试这个：

```
$('#menu_product').on('mouseout',function() {
    var $about = $('#about').toggleClass('.hover');
    if (!$about.is('.hover')) {
        $about.slideUp("slow");
    }
}); 
```

# javascript - 表单验证代码不起作用

> ID：13992035
> 
> 赞同：1
> 
> 时间：2012-12-21T14:36:46.403
> 
> 标签：javascript, regex

```
var val_regex = \d{3}+(\.[0-9]{1,2})?$
function validate(form){
    var valOne = form.valone.value;
    var valTwo = form.valtwo.value;
    var valThree = form.valthree.value;

     if (!val_regex.test(valOne)) || (!val_regex.test(valTwo)) ||(!val_regex.test(valThree)){
        $("#val-error").html("Error with inputted value");
        $('#val-error').fadeIn(200).delay(1500).fadeOut(800);
        return false;
     }
     return true;
    }
} 
```

我在这里的正则表达式似乎不起作用。你能看出问题所在吗？

正则表达式 - 我想要的 - 0 到 999（含）之间的任何数字 - 最多允许 2 位小数。我是以错误的方式编写正则表达式还是我的 javascript 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:42:36.487

您的正则表达式与一位数或两位数不匹配。

试试这个：

```
var val_regex = /^(([0-9])|([1-9][0-9])|([1-9][0-9][0-9]))(\.[0-9]{1,2})?$/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:44:10.287

```
var val_regex = /^\d{1,3}(\.\d{1,2})?$/; 
```

解释：

```
\d{1,3} 
```

允许 1-3 位数字。

```
\d{1,3}(\.\d{1,2})? 
```

允许 1-3 位数字，并且可以选择允许一个句点和 1-2 位数字。

```
^\d{1,3}(\.\d{1,2})?$ 
```

以上所有，但在它之前或之后不允许任何其他内容。确保您`.trim()`的输入消除了之前和之后的任何空格。

This will allow "0" - "999". It will also allow "0.0", "0.00" and "999.99" but not "0." (must have at least digit after the decimal place).

# javascript - 单击以使用 jquery 获取数组元素的索引

> ID：13992037
> 
> 赞同：7
> 
> 时间：2012-12-21T14:36:59.220
> 
> 标签：javascript, jquery, arrays

好的，我已经尽力搜索了，但是。我有一个任务，我需要使用 Ajax 加载一些 js 等等。长话短说，我卡住了。

首先是 script.js 中的代码（我必须加载并且无法修改）：

```
var divs = [
    '<div class="item">Lorem ipsum 0</div>',
    '<div class="item">Lorem ipsum 1</div>',
    '<div class="item">Lorem ipsum 2</div>',
    '<div class="item">Lorem ipsum 3</div>',
    '<div class="item">Lorem ipsum 4</div>',
    '<div class="item">Lorem ipsum 5</div>',
    '<div class="item">Lorem ipsum 6</div>',
    '<div class="item">Lorem ipsum 7</div>'
];
delete(divs[3]); 
```

然后我的脚本加载它

```
$.getScript('script.js', function() {
    $('.a').append('<div class="yep">' + divs.join('') + '</div>');
    $('.item').each(function() {
        $(this).click(function() {
            console.log( $('.item').index(this) );
        });
    });     
}); 
```

问题是单击时我需要获取数组中项目的索引，即如果我单击“Lorem ipsum 4”控制台应该打印“4”，而不是现在发生的“3”（因为删除的元素没有出现在dom中）。有没有办法使用 jQuery 获得正确的结果？

**好吧，我不得不说这是一项任务。事情是这样的：我根本无法修改 script.js。假设它在服务器上，在我得到它之前我无法访问它。但我需要它在原始数组中的元素的索引。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:43:52.633

您正在询问单击项目的索引。您的代码正在做它应该做的事情。jQuery 无法知道您是否从原始列表中删除了项目，它只能看到当前存在的内容。

最好的解决方案是向原始项目添加一个 HTML 属性，并且`console.log`该属性而不是`.index`. 像这样：

```
var divs = [
    '<div data-idx="0" class="item">Lorem ipsum 0</div>',
    '<div data-idx="1" class="item">Lorem ipsum 1</div>',
    '<div data-idx="2" class="item">Lorem ipsum 2</div>',
    '<div data-idx="3" class="item">Lorem ipsum 3</div>',
    '<div data-idx="4" class="item">Lorem ipsum 4</div>',
    '<div data-idx="5" class="item">Lorem ipsum 5</div>',
    '<div data-idx="6" class="item">Lorem ipsum 6</div>',
    '<div data-idx="7" class="item">Lorem ipsum 7</div>'
    ];
delete(divs[3]);

$('.a').append('<div class="yep">' + divs.join('') + '</div>');

$('.item').each(function() {
    $(this).click(function() {
        console.log($(this).data('idx'));
    });
});​ 
```

[http://jsfiddle.net/mblase75/8NLGm/](http://jsfiddle.net/mblase75/8NLGm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:18:53.183

尝试这样的事情：

[http://jsfiddle.net/YjNAL/1/](http://jsfiddle.net/YjNAL/1/)

```
var divs = [
    '<div class="item">Lorem ipsum 0</div>',
    '<div class="item">Lorem ipsum 1</div>',
    '<div class="item">Lorem ipsum 2</div>',
    '<div class="item">Lorem ipsum 3</div>',
    '<div class="item">Lorem ipsum 4</div>',
    '<div class="item">Lorem ipsum 5</div>',
    '<div class="item">Lorem ipsum 6</div>',
    '<div class="item">Lorem ipsum 7</div>'
];
delete(divs[3]);

var yep = $('<div class="yep"></div>');    // Changed (from edit)

for (var i = 0; i < divs.length; i++) {
    if (divs[i]) {  // Don't operate on undefined items
        var theDiv = $(divs[i]).data("idx", i);    // Changed (from edit)

        yep.append(theDiv);    // Changed (from edit)
    }
}

$(".a").append(yep);    // Changed (from edit)

$('.item').on("click", function() {
    console.log( $(this).data("idx") );
}); 
```

注意原始数组没有被修改。

数组中的每个项目都被修改并在附加之前创建一个 jQuery 对象。<- 我确信这部分可以更有效地完成，我只是想把一些东西放在一起。

它将其索引存储在`for`循环的数组中，因此应该是准确的。

任何未定义（已删除）的项目都将被忽略。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T14:43:57.843

你可以[试试这个](http://jsfiddle.net/M2zKD/1/)。给所有的 div 一个 ID，然后得到它：

```
var divs = [
    '<div class="item" id="0">Lorem ipsum 0</div>',
    '<div class="item" id="1">Lorem ipsum 1</div>',
    '<div class="item" id="2">Lorem ipsum 2</div>',
    '<div class="item" id="3">Lorem ipsum 3</div>',
    '<div class="item" id="4">Lorem ipsum 4</div>',
    '<div class="item" id="5">Lorem ipsum 5</div>',
    '<div class="item" id="6">Lorem ipsum 6</div>',
    '<div class="item" id="7">Lorem ipsum 7</div>'
];
delete(divs[3]);

$('.a').append('<div class="yep">' + divs.join('') + '</div>');
$('.item').each(function() {
    $(this).click(function() {
        console.log(this.id);
    });
});  ​ 
```

**身份证里的数字？！？**

是的，我知道，在 HTML4`id`中不允许以数字开头。然而，HTML5 移除了这个限制。
这些 div 将根据[w3 验证器进行验证](http://validator.w3.org)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T15:00:14.090

如果您希望它有点动态，您可以创建一个元素，向其中添加一个数据字段，然后访问该元素：

```
var divs = [
    '<div class="item">Lorem ipsum 0</div>',
    '<div class="item">Lorem ipsum 1</div>',
    '<div class="item">Lorem ipsum 2</div>',
    '<div class="item">Lorem ipsum 3</div>',
    '<div class="item">Lorem ipsum 4</div>',
    '<div class="item">Lorem ipsum 5</div>',
    '<div class="item">Lorem ipsum 6</div>',
    '<div class="item">Lorem ipsum 7</div>'
    ];
var newdivs = $('<div class="yep">').append(divs.join(""));
newdivs.find('.item').each(function() {
     $(this).data("myindex", $(this).index());
});
var elementToDelete = 3
delete(divs[elementToDelete]);
newdivs.find('.item').eq(elementToDelete).remove();
$('.a').append(newdivs);

$('.a').on('click','.item',function() {
    $(this).css("background-color","lime");
    alert($(this).data("myindex"));
}); 
```

在这里看看它是如何工作的：http: [//jsfiddle.net/rZjNd/2/](http://jsfiddle.net/rZjNd/2/)

# ruby - 如何告诉 CSV 创建一列而不是一行？

> ID：13992043
> 
> 赞同：2
> 
> 时间：2012-12-21T14:37:20.787
> 
> 标签：ruby, csv

我用 Nokogiri 写了一个非常简单的程序来抓取一个网站并创建一个 CSV 文件。它正在获取正确的数据并制作 CSV，但数据被推入一个单元格 (A1)，我宁愿它作为一列出现，每个值用逗号分隔。

如何告诉 CSV 为每个用逗号分隔的值创建一列，而不是将所有信息放入单个单元格中？

```
require 'open-uri'
require 'nokogiri'
require 'csv'

doc = Nokogiri::HTML(open('somewebpage.com'))
CSV.open("webpagedata.csv", "wb") do |csv|
    data = doc.css('.information h3 a').map { |link| link['href']  }
    puts data
    csv << [data]
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:14:05.567

结果 from`doc.css('.information h3 a').map { |link| link['href'] }`已经是一个数组，因此当您将其添加到 CSV 文件时，您不需要将其包装在`[...]`.

换行

```
csv << [data] 
```

到

```
csv << data 
```

CSV 库主要处理行，因此如果要创建*列*而不是*行*，则需要为列的每个条目添加（单个条目）行：

```
CSV.open("webpagedata.csv", "wb") do |csv|
  data = doc.css('.information h3 a').map { |link| link['href']  }
  data.each do |entry|
    csv << [entry]
  end
end 
```

Note that in this case you *do* need the `[...]` around the `entry`, as you need to add an array not a single item.

# sorting - Drupal 7中的排序字段

> ID：13992045
> 
> 赞同：0
> 
> 时间：2012-12-21T14:37:30.503
> 
> 标签：sorting, drupal-7

我有一个内容类型，我为其创建了一个字段。我想对随机字段项进行排序。我之前的主题是[通过 jQuery 对随机字段项进行排序](https://stackoverflow.com/questions/13991305/sort-random-field-items-via-jquery)。

我想学习如何通过 template.php 或其他 Drupal 解决方案进行随机排序。

如何随机排序我的字段项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:14:46.637

[使用 contrib Views 模块](http://drupal.org/project/views)创建一个视图，该模块将输出您对排序感兴趣的字段。现在在视图中您可以选择随机排序。此选项在排序选项中作为“全局：随机”可用。

# pdf-generation - wkhtmltopdf版本，首页和TOC

> ID：13992049
> 
> 赞同：4
> 
> 时间：2012-12-21T14:37:45.340
> 
> 标签：pdf-generation, wkhtmltopdf, html-to-pdf

关于这个非常漂亮的工具的一些问题，不幸的是缺少许多使用示例。

1.  手册谈到了 wkhtmltopdf 可能的“减少功能”。我有 version `wkhtmltox-0.11.0_rc1-installer.exe`，通过运行`wkhtmltopdf --version` 我应该阅读什么来了解我的版本是否是缩减版？
2.  目前我喜欢 wkhtmltopdf 用于我想稍后阅读和/或存储的网页。为了镜像网页，我使用 httrack，然后使用`wkhtmltopdf *.html offline.pdf`. 如何设置/指定 *.html 列表中的第一个 PDF 页面？目前，它们似乎按字母顺序转换。
3.  如果我运行，`wkhtmltopdf toc http://qt-project.org/doc/qt-4.8/qstring.html qstring.pdf`我只会得到一个领先的空白页，没有 TOC。怎么了？

感谢您的帮助

## 编辑：

@Nenotlep：

您的 TOC 技巧非常有效。

至于第一页，我不需要实际的封面。我需要的是一种将给定页面 www.site.com/foo.html 和所有链接页面（A.html，B.html ...）下载/转换*到一定深度级别的方法*。然后我想要一个以 foo.html 开头并包含页面 A.html、B.html ...（带有相对链接）的 PDF。

我认为没有选项可以下载并在最终 PDF 中插入链接页面（如果我错了，请纠正我）。所以我用`httrack.com`下载和wkhtmltopdf来转换。鉴于 wkhtmltopdf 的字母顺序行为，现在最好的方法似乎是重命名目标页面，使用 httrack 下载，类似于`!foo.html`. 请让我知道可能的替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-09T04:18:20.953

For part 3 of the question which is blank TOC, the latest stable version 0.12.5 also does not generate it. The [pre-release version 0.12.6-dev](https://builds.wkhtmltopdf.org/0.12.6-dev/) has fixed this problem in Mac.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:49:13.580

1.  我认为所有可用的预编译 wkhtmltopdf 都是用修补的 QT 编译的，它们并没有减少。减少的功能意味着它是在没有特殊修补版本的 QT 的情况下编译的。我用的是windows版本，并没有减少。

2.  我认为`cover`命令行参数对你有用。我目前无法测试，但请尝试类似的命令`wkhtmltopdf cover derpy.html toc --xsl-style-sheet default.xsl rarity.html twilight.html spike.html equestriadaily.pdf`

    至少在 Linux 中，我认为 asterix *.html 在执行命令之前会简单地分解为所有 html 文件，因此如果您选择一个 html 文件作为封面，然后在同一文件夹中执行 *.html，您将获得该文件两次。解决这个问题可能需要一些命令行魔法或批处理文件或其他一些技巧。

3.  This is a [bug in wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/issues/detail?id=460). The workaround is to manually set a tocfile. You can get the default tocfile with `wkhtmltopdf.exe --dump-default-toc-xsl`. Then you can save the output as a file and use it like `wkhtmltopdf.exe toc --xsl-style-sheet default.xsl www.stackoverflow.com so.pdf`.

# android - 来自 jar 的子类活动得到 ClassNotFoundException

> ID：13992050
> 
> 赞同：0
> 
> 时间：2012-12-21T14:37:48.850
> 
> 标签：android, eclipse, android-activity, manifest, classnotfoundexception

我有两个 Android 项目。一个是库并编译一个 jar，另一个是在构建路径中包含此 jar 的可执行文件。

我在我的项目的 jar 中子类化一个活动，但是当我启动它时，我得到了一个 ClassNotFoundException。

这是有问题的活动的清单`MainActivity`：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.package.MyProject"
    android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="8" />

    <application android:label="@string/app_name"
        android:name=".MyApplication"
        android:icon="@drawable/ic_launcher"
        android:theme="@style/AppTheme">

        <activity android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden"
            android:name=".MainActivity">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

这是我`MainActivity`的，`QCARSamples`在我的 jar 中可以找到包：

```
package com.my.package.MyProject;

import java.io.File;

import com.qualcomm.QCARSamples.ImageTargets.GraphicsEngineHook;
import com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity;

import com.my.package.MyProject.R;

public class MainActivity extends VuforiaTrackingActivity{
    private File blenderFile;

    @Override
    protected synchronized void updateApplicationStatus(final int appStatus){
        return;
    }

    @Override
    protected GraphicsEngineHook getGraphicsEngineHook() {
        return new MyGraphicsEngineHook();
    }

    @Override
    protected int getSplashScreenImageResource() {
        return R.drawable.splash_screen_image_targets;
    }
} 
```

我也尝试像这样在清单中包含我要子类化的活动，但我仍然遇到同样的错误：

```
<activity>
    <android:name="com.qualcomm.QCARSamples.ImageTargets.VuforiaTrackingActivity>
</activity> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:44:22.717

问题通常出在 BuildPath 上。

假设您使用的是 eclipse 和 ADT：右键单击您的项目，选择 Build Path -> Configure Build Path -> Order and Export 并确保选择了您的库。

请记住在重试之前清理项目。

它也可能是在清单上评论的家伙建议的类路径，而不是直接编辑 XML，转到应用程序选项卡，选择活动，单击浏览器，取消选中“显示来自项目源的类... '，然后从您的库中选择活动。

# redirect - Symfony2 替代 ZF gotoRouteAndExit

> ID：13992054
> 
> 赞同：1
> 
> 时间：2012-12-21T14:38:00.580
> 
> 标签：redirect, symfony, controller

就像在标题中一样，是否有任何优雅的方法可以在 Symfony2 控制器转发路径中执行重定向而不执行进一步的任务/生成视图？

目前我发现的唯一功能是，`$this->redirect()`但不幸的是，程序流程在调用它后继续，并尝试生成相应的视图。

唯一的选择（目前）是

```
$this->redirect();
disableViewRendering(); //dummy function
return; 
```

有没有更优雅的方式来执行这项任务？

谢谢。

**编辑：** 正如 phpisuber01 所说，正确的使用方法`$this->redirect`是

```
...
return $this->redirect();
... 
```

# windows - 获取在 Windows XP 上复制文件的时间和日期

> ID：13992061
> 
> 赞同：1
> 
> 时间：2012-12-21T14:38:32.870
> 
> 标签：windows, perl, batch-file, windows-xp

我在 Windows XP 机器上安排了一个批处理文件，以从网络共享中复制大量文本文件。下次运行此任务时，文件将被简单地覆盖。批处理文件是这样的

```
copy \\networkshare1\*.txt C:\monitoring\files\
copy \\networkshare2\*.txt C:\monitoring\files\ 
```

然后我使用 Perl 来分析这些文件。我想知道的是，是否有一种简单的方法，无需更改文件名，在某处记录从网络共享复制文件的时间，以便我的 Perl 脚本知道它是在使用旧版本还是新版本文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:55:02.400

一种方法，假设目的地是 NTFS：

```
set dest=C:\monitoring\files\
for %%f in ("\\networkshare1\*.txt") do (
    copy "%%f" "%dest%"
    echo %TIME% >"%dest%%%~nxf:copywhen"
) 
```

这会手动复制每个文件并将时间附加到[数据流](http://www.flexhex.com/docs/articles/alternate-streams.phtml) `copywhen`中，当文件位于 NTFS 卷上时，它与文件永久关联。

我*很*确定 Perl 的标准文件例程将允许通过简单地传递路径来读取它`C:\monitoring\files\whatever.txt:copywhen`，如果不是，您可以从命令行捕获输出`more <"C:\monitoring\files\whatever.txt:copywhen"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:09:24.320

看一下[File::stat](http://perldoc.perl.org/File/stat.html)包。这将内部 Perl [stat](http://perldoc.perl.org/functions/stat.html)命令替换为*按名称*接口。但是，您可以使用内置`stat`命令或`File::stat`包。

```
use File::stat;
use feature qw(say);

my $file_stat = stat($file_name);
say "The following times are displayed as seconds since January 1, 1970"
say "    File Last Access time: " . $file_stat->atime;
say "    File Last Modification time: " . $file_stat->mtime;
say "    File inode Change Time: " . $file_stat->ctime; 
```

其中之一应该这样做。我认为你最好的选择可能是`mtime`。

如果您不想`File::Stat`使用内置`stat`命令：

```
say "The following times are displayed as seconds since January 1, 1970"
say "    File Last Access time: " . (stat $my_file)[8]
say "    File Last Modification time: " . (stat $my_file)[9];
say "    File inode Change Time: " . (stat $my_file)[10]; 
```

要将时间转换为人类可读的时间，请使用[Time::Piece](http://perldoc.perl.org/Time/Piece.html)模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T20:21:14.113

一种简单的方法是在复制文件之前将其删除。由于它是从另一个驱动器复制的，因此时间/日期戳应该是它被复制到驱动器的时间。这就是 Windows 一直为我工作的方式。^_^

# c++ - c ++将struct指针转换为类型值

> ID：13992062
> 
> 赞同：1
> 
> 时间：2012-12-21T14:38:33.407
> 
> 标签：c++

这可能是一个愚蠢的问题，但我正在学习，我的代码有问题：

我在这条线上遇到问题：

```
fb->AddEntity(m); // M Needs to be the type Item not Item* 
```

我需要的是该类型的值的对象，而不是指针，因为我需要将它传递给 AddEntity 函数，我该如何转换它？

```
#include "Handler.h"

FatBoy *fb;

void Entity::Interact()
{
};

void OnNewPacketReceived(BYTE *data, int Length)
{
    switch (data[0])
    {
        case 0x07:
            {
                short length = (short)((data[1] << 8) + data[2]);
                int Index = 0;

                for (int i = 0; i < length; i++)
                {
                    Entity ent;
                    ent.X = (USHORT)((data[Index] << 8) + data[Index + 1]);
                    ent.Y = (USHORT)((data[Index + 2] << 8) + data[Index + 3]);
                    ent.Serial = (UINT)((data[Index + 4] << 24) + (data[Index + 5] << 16) 
                        + (data[Index + 6] << 8) + data[Index + 7]);
                    ent.SpriteID = (USHORT)((data[Index + 8] << 8) + data[Index + 9]);

                    if (ent.SpriteID > 0x8000 && ent.SpriteID < 0x9000)
                    {
                        Item *m = dynamic_cast<Item*>(&ent); 
                        m->UNKNOWN1 = 0x00;
                        m->UNKNWON2 = 0x0000;
                        m->Interact();

                        fb->AddEntity(m); // M Needs to be the type Item not Item*
                    }
                    else
                    {
                        Monster *m = dynamic_cast<Monster*>(&ent); 
                        m->UNKNOWN = 0x00000000;
                    }
                }
            } break;
        default: break; 
    }
}

void FatBoy::AddEntity(Entity ent)
{
    this->Entities.push_back(ent);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:40:00.947

`*m`如果您有指针并希望通过值或引用传递，请使用

```
fb->AddEntity(*m); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T14:40:12.680

要从指针中获取对象，请使用取消引用运算符`*`。

所以你会说

```
fb->AddEntity(*m); 
```

实际上，每次使用`m->member`时，都与`(*m).member`.

另一方面，`AddEntity`可能不应该按值传递（它会产生不必要的副本）。考虑

```
void FatBoy::AddEntity(const Entity& ent) 
```

反而。

# java - hadoop map reduce程序中的InstantiationException

> ID：13992063
> 
> 赞同：8
> 
> 时间：2012-12-21T14:38:33.093
> 
> 标签：java, xml, hadoop, jdom

我是 Hadoop 框架的新手。我正在尝试编写一个程序，它从 hdfs 读取 XML 文件，使用 JDOM 解析它并将其发送到数据库。以下是Java文件

```
package JDOMprs;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.DoubleWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;
import org.jdom2.Document;
import org.jdom2.Element;
import org.jdom2.JDOMException;
import org.jdom2.input.SAXBuilder;

import com.vertica.hadoop.VerticaOutputFormat;
import com.vertica.hadoop.VerticaRecord;

public class ExampleParser extends Configured implements Tool {
    public static class Map extends Mapper<LongWritable, Text, Text, DoubleWritable> {
        private final static DoubleWritable one = new DoubleWritable(1);
        private Text word = new Text();
        private List mylist;

        public void map(LongWritable key, Text value, Context context)
                throws IOException, InterruptedException {
            context.write(value, one);
        }
    }

    public static class Reduce extends Reducer<Text, DoubleWritable, Text, VerticaRecord> {
        VerticaRecord record = null;
        String src_name;
        String comment;
        String rev_by;
        String rev_dt;
        String com_title;

        public void setup(Context context) throws IOException, InterruptedException {
            super.setup(context);
            try {
                record = new VerticaRecord(context.getConfiguration());
            } catch (Exception e) {
                throw new IOException(e);
            }
        }

        public void reduce(Text key, Iterable<DoubleWritable> values,
                Context context) throws IOException, InterruptedException {
            if (record == null) {
                throw new IOException("No output record found");
            }

            /******************** JDOM PARSER ***************************/
            SAXBuilder builder = new SAXBuilder();
            // File xmlFile = new
            // File("C:/Users/Administrator/workspace/VerticaHadoop/src/JDOMprs/HadoopXML.xml");

            try {
                Document document = (Document) builder.build(key.toString());
                Element rootNode = document.getRootElement();
                List list = rootNode.getChildren("source");
                // List ls= new ArrayList();
                // Jdomparse jp= new Jdomparse();
                // ls=jp.getParse(key);
                //
                for (int i = 0; i < list.size(); i++) {

                    Element node = (Element) list.get(i);

                    // System.out.println("Source Name : " +
                    // node.getChildText("source-name"));
                    // System.out.println("comment : " +
                    // node.getChildText("comment"));
                    // System.out.println("review by : " +
                    // node.getChildText("review-by"));
                    // System.out.println("review date : " +
                    // node.getChildText("review-date"));
                    // System.out.println("comment-title : " +
                    // node.getChildText("comment-title"));

                    record.set(0, node.getChildText("source-name").toString());
                    record.set(0, node.getChildText("comment").toString());
                    record.set(0, node.getChildText("review-by").toString());
                    record.set(0, node.getChildText("review-date").toString());
                    record.set(0, node.getChildText("comment-title").toString());
                }

            } catch (IOException io) {
                System.out.println(io.getMessage());
            } catch (JDOMException jdomex) {
                System.out.println(jdomex.getMessage());
            }
            /****************** END OF PARSER *****************************/

            context.write(new Text("reviewtbl"), record);
        }
    }

    @Override
    public int run(String[] args) throws Exception {
        // Set up the configuration and job objects
        Configuration conf = getConf();
        Job job = new Job(conf);
        conf = job.getConfiguration();
        conf.set("mapreduce.job.tracker", "local");
        job.setJobName("vertica test");

        job.setInputFormatClass(org.apache.hadoop.mapreduce.lib.input.FileInputFormat.class);
        FileInputFormat.addInputPath(job, new Path("/user/cloudera/input"));

        job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(DoubleWritable.class);

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(VerticaRecord.class);
        job.setOutputFormatClass(VerticaOutputFormat.class);
        job.setJarByClass(ExampleParser.class);
        job.setMapperClass(Map.class);
        job.setReducerClass(Reduce.class);

        VerticaOutputFormat.setOutput(job, "reviewtbl", true, "source varchar",
                "comment varchar", "rev_by varchar", "rev_dt varchar",
                "com_title varchar");
        job.waitForCompletion(true);
        return 0;
    }

    public static void main(String[] args) throws Exception {
        int res = ToolRunner.run(new Configuration(), new ExampleParser(), args);
        System.exit(res);
    }
} 
```

但我得到以下例外。

```
12/12/20 02:41:34 INFO mapred.JobClient: Cleaning up the staging area hdfs://0.0.0.0/var/lib/hadoop-0.20/cache/mapred/mapred/staging/root/.staging/job_201212191356_0006
Exception in thread "main" java.lang.RuntimeException: java.lang.InstantiationException
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
        at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:947)
        at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:967)
        at org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:880)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:833)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1177)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:833)
        at org.apache.hadoop.mapreduce.Job.submit(Job.java:476)
        at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:506)
        at ExampleParser.run(ExampleParser.java:148)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at ExampleParser.main(ExampleParser.java:153)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:197)
Caused by: java.lang.InstantiationException
        at sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:113)
        ... 19 more 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T16:21:08.467

```
job.setInputFormatClass(
      org.apache.hadoop.mapreduce.lib.input.FileInputFormat.class); 
```

您不能使用/实例化`FileInputFormat`该类：它是一个抽象类。

如果您想自己解析 XML，那么您需要编写自己的`InputFormat`extends `FileInputFormat`，并且记录读取器可以将整个内容作为值传递给映射器。我认为*Hadoop - The Definitive Guide*有一个例子`WholeFileInputFormat`，或者类似的东西，或者谷歌可能会有一些东西：

*   [https://www.google.com/search?q=wholefileinputformat](https://www.google.com/search?q=wholefileinputformat)

# mysql - mysql中要解决的查询

> ID：13992064
> 
> 赞同：2
> 
> 时间：2012-12-21T14:38:35.263
> 
> 标签：mysql, sql

我的表有这样的数据

```
id    from
1    1|Chinmoy Panda|chinmoy|mfsi_chinmoyp
1    532|Narendra Mallik|narendram
1    595|Bhagirathi Panda|bhagirathi

2    1|Chinmoy Panda|chinmoy|mfsi_chinmoyp
2    532|Narendra Mallik|narendram
2    595|Bhagirathi Panda|bhagirathi
2    13|Hemendra Singh|hemendras

3    1|Chinmoy Panda|chinmoy|mfsi_chinmoyp
3    595|Bhagirathi Panda|bhagirathi
3    13|Hemendra Singh|hemendras

4    1|Chinmoy Panda|chinmoy|mfsi_chinmoyp 
4    595|Bhagirathi Panda|bhagirathi

5    595|Bhagirathi Panda|bhagirathi 
```

我正在尝试这个

1.  忽略每个id的第一行
2.  计数从
3.  如果 id 有一行，则忽略。

方法

```
Count     from
4         595|Bhagirathi Panda|bhagirathi
2         532|Narendra Mallik|narendram
2         13|Hemendra Singh|hemendras 
```

在 1,2,3,4 id 第一行包含 chinmay 熊猫。所以我忽略了那个

Bhagirathi Panda 出现了 5 次，但 id 5 只有一行，所以计数为 4。其他人类似

我试过但找不到结果

请帮我写查询

（我不知道标题应该是什么，所以我写了这个。）

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:45:04.980

你想要这样的查询：

```
select count(*), from
from t
where left(from, 2) <> '1|' and
      t.id in (select id from t group by id having COUNT(*) > 1)
group by from 
```

但是，由于列名命名不佳（使用 SQL 保留字），因此您需要正确引用它们。

另外，我假设“第一个”是指以“1 |”开头的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:26:02.747

这个查询会做

```
SELECT 
  COUNT(*) `count`,
  `from`
FROM (
  SELECT 
    `from`,
    IF( COALESCE( @id, 0 ) = (@id := id) , @curRow := @curRow + 1, @curRow := 1 ) curRow
  FROM
    Table1 ) tmp
WHERE curRow > 1
GROUP BY `from`
ORDER BY `count` desc 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/185f6/6/0)

# php - 没有 oAuth 的 RESTful 身份验证

> ID：13992071
> 
> 赞同：0
> 
> 时间：2012-12-21T14:39:02.990
> 
> 标签：php, rest, oauth

我目前正在 IIS/PHP5.4 环境中实现 RESTful 服务。

在寻找实现身份验证的最佳实践方法时，大多数人/博客/论坛/stackoverflow 的答案都指向使用 oAuth 进行身份验证。

不幸的是，Windows 上目前没有可用于 PHP5.4 的 mod_oauth 模块。

所以我的问题是：在不使用 oAuth 的情况下为 RESTful 服务实施安全身份验证系统的最佳方法/最佳实践是什么。

或者：如果有人知道一个功能齐全的 oAuth 类，它几乎以独立的方式实现了 mod_oauth 的方法，那么该信息也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:12:23.787

我最终使用`hash_hmac`（http://php.net/manual/en/function.hash-hmac.php）使用我的服务器和客户端都知道的私钥将所有提交的数据加密为哈希。如果有人以任何一种方式（url/post 数据）修改信息，签名将不再匹配服务器生成的版本，这将导致请求失败。

# php - CodeIgniter 路径常量定义

> ID：13992074
> 
> 赞同：22
> 
> 时间：2012-12-21T14:39:27.577
> 
> 标签：php, codeigniter

我遇到了这个页面

```
https://www.codeigniter.com/user_guide/general/reserved_names.html 
```

有人可以向我解释以下常量的作用：

```
EXT
FCPATH
SELF
BASEPATH
APPPATH 
```

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-21T14:55:56.870

这些常量分别在`index.php`页面中定义：

```
/*
 * -------------------------------------------------------------------
 *  Now that we know the path, set the main path constants
 * -------------------------------------------------------------------
 */
    // The name of THIS file
    define('SELF', pathinfo(__FILE__, PATHINFO_BASENAME));

    // The PHP file extension
    // this global constant is deprecated.
    define('EXT', '.php');

    // Path to the system folder
    define('BASEPATH', str_replace("\\", "/", $system_path));

    // Path to the front controller (this file)
    define('FCPATH', str_replace(SELF, '', __FILE__));

    // Name of the "system folder"
    define('SYSDIR', trim(strrchr(trim(BASEPATH, '/'), '/'), '/'));

    // The path to the "application" folder
    if (is_dir($application_folder))
    {
            define('APPPATH', $application_folder.'/');
    }
    else
    {
            if ( ! is_dir(BASEPATH.$application_folder.'/'))
            {
                    exit("Your application folder path does not appear to be set correctly. Please open the following file and correct this: ".SELF);
            }

            define('APPPATH', BASEPATH.$application_folder.'/');
    } 
```

从[https://github.com/EllisLab/CodeIgniter/blob/develop/index.php的第 196 行开始](https://github.com/EllisLab/CodeIgniter/blob/develop/index.php)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-21T14:56:44.023

您可以在 CI 文件夹根目录的 index.php 中找到它的简短定义。

```
EXT: The PHP file extension
FCPATH: Path to the front controller (this file) (root of CI)
SELF: The name of THIS file (index.php)
BASEPATH: Path to the system folder
APPPATH: The path to the "application" folder 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-08-19T18:37:21.533

**自我**= index.php

当您想包含根文件夹中的某些内容时使用
**FCPATH** = C:\xampp\htdocs\your_root_folder\

当您想要包含应用程序文件夹中的某些内容时使用
**APPPATH** = C:\xampp\htdocs\your_root_folder\application\

**基本路径**= C:\xampp\htdocs\your_root_folder\system\

# vim - 有没有办法在vim中获取布尔选项的字符串表示？

> ID：13992088
> 
> 赞同：3
> 
> 时间：2012-12-21T14:40:20.620
> 
> 标签：vim, options

我正在使用[AppendModelline](http://vim.wikia.com/wiki/Modeline_magic#Adding_a_modeline)函数将模式行添加到我的 vim 文件中：

```
" 在缓冲区的最后一行之后附加模式行。
" 在 LaTeX 中使用替代 () 而不是 printf() 来处理 '%%s' 模式行
"文件。
功能！附加模型线（）
  let l:modeline = printf(" vim: set ts=%d sw=%d tw=%d :",
        \ &tabstop, &shiftwidth, &textwidth)
  让 l:modeline = 替代(&commentstring, "%s", l:modeline, "")
  调用追加（行（“$”），升：模式）
结束功能

```

但我想扩展它。**它应该支持添加expandtab**的当前值。
使用**&expandtab**，我可以获得当前值的数字表示。但是vim 不支持**set et=0**之类的东西。它必须**设置为 [no]expandtab**。
我真的必须测试*&expandtab*并将*expandtab*或*noexpandtab*附加到*l:modeline*还是有办法获取当前值的字符串表示形式？
**设置扩展选项卡？**显示*[no]expandtab*，但我不知道如何在脚本中使用它（或者是否可能）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:32:59.463

是的，你必须这样做。`:redir`可以捕获输出，但`:redir`基于 - 的解决方案至少有四行长，使用正则表达式来获取值。使用`&et`更干净：

```
… printf("… %set …", …, &expandtab ? '' : 'no', …) 
```

注意：后面是`%set`（的缩写）。这里的词只是一个意外。`%s``et``expandtab``set`

# html - 将 div 弹出窗口居中在屏幕中心

> ID：13992089
> 
> 赞同：8
> 
> 时间：2012-12-21T14:40:21.323
> 
> 标签：html, css, center

我已经搜索了很多以`div`水平和垂直居中 a ，这是到处给出的方法：

```
div {
position:fixed;
top:50%;
left:50%;
margin-left:(div width/2)
margin-top: (div height/2)
} 
```

我刚刚找到了一种新的解决方案`div`，可以通过将 a 包装在表格中来水平和垂直居中它。我已经在 ie7 及以上版本以及其他浏览器中对其进行了测试。

这是一个例子：http: [//jsbin.com/ocenok/2/](http://jsbin.com/ocenok/2/)

我想知道第一种方法在 Internet、SO 等上随处可见，**并且**需要事先了解宽度和高度，或者通常通过 Javascript 计算。

表格方法似乎完美无缺，既不需要 javascript，也不需要固定的高度/宽度。

表格方法有**什么**缺点吗？

（我不知道要居中的 div 的高度/宽度。）

* * *

**更新（为了让我的问题更清楚）**：

我自己**讨厌**将表格用于非表格/布局数据。

1.  我知道使用 Javascript 可以轻松实现我想要的。
2.  `display:table`我想我可以使用，杀死 IE7 支持来实现这一点。

但我想了解的是，当我可以使用单个`<table>`元素实现这一点时，如果有的话，缺点是什么。

在这里检查答案和类似问题，没有人推荐这种方法，即使它使用所有有效`HTML`的元素和语法和规则。

如果大家都推荐使用`javascript`来处理演示，虽然使用起来很容易`CSS`，但它一定有一些缺点。

* * *

代码 ：

```
 <table>
    <tr>
        <td>
            <div>This is div that needs to be centered.</div>
        </td>
    </tr>
</table> 
```

然后应用以下 CSS

```
table {
    width:100%;
    height:100%;
    position:fixed;
    top:0;
    left:0;
}

table td {
    width : 100%;
    text-align: center;
}

div {
    width:100px;
    height:100px;
    background:pink;
  margin: 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:06:08.137

请参阅以下功能并根据您的需要进行更改

```
function positionLightboxImage() {
  var top = ($(window).height() - $('#lightbox').height()) / 2;
  var left = ($(window).width() - $('#lightbox').width()) / 2;
  console.log("The calculated position is:");
  console.log(top,left);
  $('#lightbox')
    .css({
      'top': top + $(document).scrollTop(),
      'left': left
    })
    .fadeIn();
  console.log('A jQuery selection:');
  console.log($('#lightbox'));
} 
```

更新了答案 HTML 和 CSS：

[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/cjj2G/)

HTML：

```
<div id="outer"><div id="inner"></div></div> 
```

CSS：

```
#outer {
  position: absolute;
  top: 50%;
  left: 0px;
  width: 100%;
  height: 1px;
  overflow: visible;
    background:red;
}

#inner {
  width: 300px;
  height: 200px;
  margin-left: -150px;  /***  width / 2   ***/
  position: absolute;
  top: -100px;          /***  height / 2   ***/
  left: 50%;
    background:#ccc;
} 
```

**使用 jquery 进行更多更新**，并且在调整窗口大小时始终保持居中：http: [//jsfiddle.net/3aZZW/3/](http://jsfiddle.net/3aZZW/3/)

演示：http: [//jsfiddle.net/3aZZW/3/embedded/result/](http://jsfiddle.net/3aZZW/3/embedded/result/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:03:10.967

表格仅用于表格数据 - 不用于布局目的。

为您的问题使用表格可以为您提供快速简便的解决方案，但这并不意味着它是最好的或正确的方法。

仅仅因为某件事需要更多的思考和努力并不意味着应该避免它。

使用表格为此后果自负——你不朽的灵魂可能会在未来某个日期为你今天的行为付出沉重的精神代价：p

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T06:17:42.760

根据[StatCounter](http://gs.statcounter.com/#browser_version-ww-monthly-201211-201211-bar)，截至 2012 年 11 月，**IE7 仅占**桌面浏览器使用份额的 0.87%。目前尚不清楚该测量的准确度。某些国家/地区的[权重可能不成比例](http://gs.statcounter.com/sample-size/StatCounterGlobalStatsAug12_SampleSizeCountryBreakdown.csv)，并且样本集*几乎可以肯定*与您的用户人口统计数据不完全匹配，无论它们是什么。但是，如果把 IE7 抛在后面，你真的会损失多少呢？还不如一起去`display: table;`

另一方面，它让我发疯，这`display: table;`是必要的。这是我能找到的最接近可行的替代方案：

HTML

```
<div id="pg-centerer">
    <div id="shifter">
        <div id="item">content</div>
    </div>
</div> 
```

CSS

```
#pg-centerer {
    position: absolute;
    left: 50%;
    top: 50%;
}

#shifter {
    position: relative;
    height: 40px;           /** Must set the height here. **/
    left: -50%;
}

#item {
    position: relative;
    top: -50%;
} 
```

到目前为止，我还没有想出如何避免设置元素`height`的。`div#shifter`这是一个[工作演示](http://jsfiddle.net/eyheS/)。我已经在 Mac 10.8.1 FF 18、Safari 6.0、Chrome 25.0.1362.0 canary 和 iOS Safari 6.0.1 上对此进行了测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T16:03:07.893

**不应该**使用表格的原因有很多。有些已经在这里讨论过了。我知道您只使用了一行，希望您能尽量信守不添加任何行的承诺，但如果您违背了这一承诺，下面的一些原因将显示出更重要的意义，例如渲染速度和屏幕阅读器问题。这就是**为什么**他们称某些东西为**标准**而有些不是。标准会考虑所有情况和情况。

## 渲染速度问题：

表格的最大缺点之一是浏览器呈现它们的方式。必须先加载桌子内部，才能准确确定桌子的位置和大小。如果您要在表中包含大量信息，这可能会导致问题。

## 有效性和标准：

对非表格数据使用表格意味着您正在编写无效的 X/HTML。这对某些人来说可能很好。但我不推荐。看[这里](http://www.w3.org/WAI/wcag-curric/sam48-0.htm)

## 搜索引擎优化：

在搜索其他一些关于使用表格的鲜为人知的问题之前，我并不知道这一点。

> 搜索引擎喜欢有效的代码，因此不使用表格有助于搜索引擎优化 (SEO)。

有关此的更多信息，请参见[此处](http://www.webdesignbyjules.com/04/2011/10-reasons-to-use-css-and-not-tables-for-layout/)

## 屏幕阅读器和盲文显示器的问题：

表格不能在屏幕阅读器中轻松使用。检查[这篇](http://office.microsoft.com/en-us/word-help/ten-tips-for-accessible-documents-HA010337552.aspx)文章。

> 如果您必须使用表格进行布局，请记住屏幕阅读器和盲文会在各列中逐行显示阅读表格。TAB 顺序也以这种方式通过表。因此，请确保您的表格结构在从左到右逐行读取时有意义。

## 在 + 方面：

我不想承认，如果你诚实地使用**只有**一行一列的表，并且里面的数据量非常少（我称之为限制），那么页面的渲染速度可能会比你使用 Javascript 的时间快，但是其他问题仍然存在。

* * *

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T14:51:12.637

除非表内有小数据，否则问题不大。表格对于浏览器来说有些沉重，并且随着更多数据的进入，它们会使您的网页响应比较慢。

您展示的示例仅用于示例，但在现实世界中，您将在其中包含数据。如果它会很大，请尝试选择不同的方法。可能很快就会在所有现代浏览器中得到支持`flexbox model`。`box model`在此处查看示例。 [http://www.kirupa.com/html5/centering_vertically_horizo​​ntally.htm](http://www.kirupa.com/html5/centering_vertically_horizontally.htm)

如果里面的数据很小，请随意使用您的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-24T17:49:30.777

将我的话指向不关心标准或提供多渠道内容的内部极客......我能想到的表格确实只有一个技术问题，如果您在该单元格中有大量内容，浏览器将等待让所有要加载的内容能够在渲染之前计算单元格的宽度和高度......所以如果该内容真的很大并且有很大的图像，它不会逐渐渲染......并使其成为一个固定的表格，好吧，上面的技巧是行不通的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-24T18:03:14.330

我取决于你想要达到的目标。如果它只是以一件事为中心的一页，那就太好了。

但我看到你已经设置了表格位置：固定。这意味着它将与您一起滚动并在下面的内容之上。另一件事是，如果该表真的填满了，您将无法看到该表底部的内容，因为该位置设置为固定。

这是将一小段文本、图像或信息居中的绝佳解决方案。

但是在一个有很多其他内容或表格中有很多内容的页面中使用它是一件坏事。

* * *

旁注：使用javascript来实现这样简单的事情是愚蠢的。它可以在没有 javascript 的情况下仅使用 CSS 来完成。如果您使用 javascript 来居中，而客户端没有 javascript 访问怎么办？让我们不要通过对所有简单的事情使用 javascript/jquery 来破坏网络；）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-28T03:35:44.183

[http://phrogz.net/css/WhyTablesAreBadForLayout.html](http://phrogz.net/css/WhyTablesAreBadForLayout.html)

基本上，它的加载时间稍长（JavaScript 速度较慢），对屏幕阅读器不利（使用[JAWS](http://www.freedomscientific.com/products/fs/jaws-product-page.asp "JAWS 主页")之类的工具对其进行测试），并且难以重新设计（如果您碰巧忘记了为什么要放一张桌子，那真的很难，所以让一定要给自己留下评论:)。真正好的东西（*我是在跟你说话，W3C！*）类似于`box-align: x y;`. 然后你也可以做类似的事情`align: center center`or `align: center bottom;`。

# android - 由于android中的卸载意图，结果代码始终为0

> ID：13992093
> 
> 赞同：5
> 
> 时间：2012-12-21T14:40:30.837
> 
> 标签：android, android-intent, android-activity

从我的应用程序中，我尝试使用代码卸载应用程序

```
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE);
uninstallIntent.setData(Uri.parse("package:" +packageName));
uninstallIntent.setAction(Intent.ACTION_VIEW);
startActivityForResult(uninstallIntent,UNINSTALL_APPLICATION); 
```

根据我开始活动的结果，我想根据用户的输入执行不同的操作，例如取消或单击*ok*。

正如我预期的那样，单击 ok 的结果代码将是`RESULT_OK`，单击 cancel 将是`RESULT_CANCEL`，但实际上在这两种情况下我都得到了`RESULT_CANCEL`。

那么如何区分用户的输入。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T14:18:13.223

经过深思熟虑后，我终于找到了一个棘手的解决方案。

在调用卸载意图时我是如何实现的，我已通过使用将包名称保存在首选项文件中

```
SharedPreferences prefs;
prefs.edit().putString(DELETE_PACKAGE_NAME, packageName).commit(); 
```

而我在 OnActivityresult 中所做的我刚刚检查了保存包名称的应用程序是否仍然存在，如果这意味着用户点击了**Cancel**，否则他点击了**Ok**。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data); 

 if(requestCode==DELETE_APP){

    String requestedPackageName=prefs.getString(DELETE_PACKAGE_NAME, "");

    boolean isPresent=GCMIntentService.isAppPresent(requestedPackageName, this);

    if(isPresent){

      //user Clicked on Cancel
    }else{

      //user Clicked on Ok
    }

 }

} 
```

检查应用程序存在的代码

```
public static boolean  isAppPresent(String packageName,Context context) {

  try{
    ApplicationInfo info = context.getPackageManager().getApplicationInfo(packageName, 0 );
    return true;

} catch( PackageManager.NameNotFoundException e ){

   return false;
}

 } 
```

谢谢。

**更新：**

自从我回答这个问题以来，平台发生了很大变化，这是更新

现在您可以使用一个意图，您可以在其中明确定义它是否应该返回结果

```
val intent = Intent(Intent.ACTION_UNINSTALL_PACKAGE).apply {
            data = Uri.parse("package:$packageName")
            putExtra(Intent.EXTRA_RETURN_RESULT, true)
        }
        startActivityForResult(intent, YOUR_REQUEST_CODE_HERE) 
```

文档：[https ://developer.android.com/reference/android/content/Intent.html#ACTION_UNINSTALL_PACKAGE](https://developer.android.com/reference/android/content/Intent.html#ACTION_UNINSTALL_PACKAGE)

这将返回一个结果

从文档中：

> 返回的结果代码将是 Activity.RESULT_OK 成功或 Activity.RESULT_FIRST_USER 失败。

**启动 API 21 Android 添加了辅助方法**

```
PackageInstaller.uninstall (String packageName, 
                IntentSender statusReceiver) 
```

在下面的链接中阅读有关更改的更多信息，从 Android Q 中说明上述更新的方法也已弃用。

[https://developer.android.com/reference/android/content/pm/PackageInstaller.html#uninstall(java.lang.String,%20android.content.IntentSender)](https://developer.android.com/reference/android/content/pm/PackageInstaller.html#uninstall(java.lang.String,%20android.content.IntentSender))

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T14:42:58.123

根据[API](http://developer.android.com/reference/android/content/Intent.html#ACTION_DELETE)，`ACTION_DELETE`不返回任何内容。如果没有返回任何内容，则结果状态将为`RESULT_CANCEL`。

最好的办法是设置一个[意图过滤器](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)/[广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)来监听 [`ACTION_PACKAGE_FULLY_REMOVED`](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_FULLY_REMOVED)意图。[这里](https://stackoverflow.com/q/3648166/544198)有一个关于以前问过的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-10T10:17:01.027

试试这个

```
Intent intent = new Intent(Intent.ACTION_UNINSTALL_PACKAGE);
intent.setData(Uri.parse("package:" + packageName));
intent.putExtra(Intent.EXTRA_RETURN_RESULT, true);
startActivityForResult(intent, Constants.FROM_UNINSTALL); 
```

# android - 如何以编程方式在另一个 shapeDrawable 内绘制较小的 ShapeDrawable

> ID：13992094
> 
> 赞同：6
> 
> 时间：2012-12-21T14:40:35.537
> 
> 标签：android, dynamic, drawing, drawable, shapes

我试图在另一个圆圈内画一个较小的圆圈。这看起来很简单，但我遇到了麻烦，找不到答案。我使用的代码是：

```
 ShapeDrawable biggerCircle= new ShapeDrawable( new OvalShape());
    biggerCircle.setIntrinsicHeight( 60 );
    biggerCircle.setIntrinsicWidth( 60);
    biggerCircle.setBounds(new Rect(0, 0, 60, 60));
    biggerCircle.getPaint().setColor(Color.BLUE);

    ShapeDrawable smallerCircle= new ShapeDrawable( new OvalShape());
    smallerCircle.setIntrinsicHeight( 10 );
    smallerCircle.setIntrinsicWidth( 10);
    smallerCircle.setBounds(new Rect(0, 0, 10, 10));
    smallerCircle.getPaint().setColor(Color.BLACK);
    smallerCircle.setPadding(50,50,50,50);

    LayerDrawable composite1 = new LayerDrawable(new Drawable[] biggerCircle,smallerCircle,}); 
```

但这没有用，发生的事情是较小的圆圈与较大的圆圈一样大。所以唯一显示的是更大圆圈大小的黑色圆圈。如果有人可以提供帮助，我会很高兴。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T14:52:23.897

改变顺序，

```
Drawable[] d = {smallerCircle,biggerCircle};

LayerDrawable composite1 = new LayerDrawable(d); 
```

试试这样

```
 ShapeDrawable biggerCircle= new ShapeDrawable( new OvalShape());
        biggerCircle.setIntrinsicHeight( 60 );
        biggerCircle.setIntrinsicWidth( 60);
        biggerCircle.setBounds(new Rect(0, 0, 60, 60));
        biggerCircle.getPaint().setColor(Color.BLUE);

        ShapeDrawable smallerCircle= new ShapeDrawable( new OvalShape());
        smallerCircle.setIntrinsicHeight( 10 );
        smallerCircle.setIntrinsicWidth( 10);
        smallerCircle.setBounds(new Rect(0, 0, 10, 10));
        smallerCircle.getPaint().setColor(Color.BLACK);
        smallerCircle.setPadding(50,50,50,50);
        Drawable[] d = {smallerCircle,biggerCircle};

        LayerDrawable composite1 = new LayerDrawable(d);

        btn.setBackgroundDrawable(composite1); 
```

![在此处输入图像描述](../Images/7984c1ba99e332053f4ba02a42e912d7.png)

# html - 对齐表格标题中的文本

> ID：13992096
> 
> 赞同：71
> 
> 时间：2012-12-21T14:40:38.843
> 
> 标签：html, html-table

似乎`align`不适用于第**th**元素。这是我的 HTML：

```
<div style="width: 100%; height: 175px; overflow: auto;">
  <table class="grid" id="table">
    <thead>
      <tr>
        <th class="not_mapped_style" style="display: none;" align="center">id</th>
        <th class="not_mapped_style" align="center">DisplayName</th>
        <th align="center">PrimaryEmail</th>
        <th align="center">Age</th>
        <th align="center">Phone</th>
      </tr>
    </thead>
    <caption>Contacts</caption>
    <tbody>
      <tr>
        <td style="display: none;" property_value="0" property_name="id" align="center">0</td>
        <td property_value="rpcuser" property_name="DisplayName" align="center">rpcuser</td>
        <td property_value="admin@domain.com" property_name="PrimaryEmail" align="center">admin@domain.com</td>
        <td property_value="69" property_name="Age" align="center">69</td>
        <td property_value="+722616807" property_name="Hand_Phone" align="center">+18007</td>
      </tr>
    </tbody>
  </table>
</div>
```

文本对齐对于元素来说工作得很好，`td`但对于`th`. 为什么？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-12-21T14:45:19.703

尝试：

```
text-align: center; 
```

您可能熟悉 HTML align 属性（自 HTML 5 起已停用）。align 属性可以与标签一起使用，例如

```
<table>, <td>, and <img> 
```

指定这些元素的对齐方式。此属性允许您水平对齐元素。HTML 还具有/具有用于垂直对齐元素的 valign 属性。这也已从 HTML5 中终止。

这些属性已停止使用，取而代之的是使用 CSS 来设置 HTML 元素的对齐方式。

实际上没有 CSS align 或 CSS valign 属性。相反，CSS 具有适用于块级元素的内联内容的 text-align 和适用于内联级和表格单元格的 vertical-align 属性。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-21T14:43:56.070

尝试在样式属性中使用 text-align 来对齐中心。

```
<th class="not_mapped_style" style="text-align:center">DisplayName</th> 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-21T14:45:49.223

尝试使用样式

```
th {text-align:center} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-06T10:06:31.657

如果要居中所有表的 th：
`table th{ text-align: center; }`

如果您只想将具有确定 id 的表的 th 居中：
`table#tableId th{ text-align: center; }`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-27T23:56:39.287

HTML：

```
<tr>
    <th>Language</th>
    <th>Skill Level</th>
    <th>&nbsp;</th>
</tr> 
```

CSS：

```
tr, th {
    padding: 10px;
    text-align: center;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-13T17:12:09.840

在[HTML5](http://en.wikipedia.org/wiki/HTML5)中，最简单、最快的居中方法`<th>THcontent</th>`是添加`colspan`这样的：

```
<th colspan="3">Thcontent</th> 
```

如果您的表格是三列，这将起作用。因此，如果您有一个四列表，请添加`colspan`4 等。

您可以在 CSS 文件中进一步管理位置，同时您已将您`colspan`的 HTML 放入我所说的中。

```
th { 
    text-align: center; /* Or right or left */
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T14:45:58.080

您的代码有效，但它使用不推荐使用的方法来做到这一点。您应该使用 CSS`text-align`属性而不是 align 属性来执行此操作。即便如此，它必须是您的浏览器或其他影响它的东西。[在Chrome](http://en.wikipedia.org/wiki/Google_Chrome)中试试这个演示（我必须禁用 normalize.css 才能让它渲染）。

*   来源：http: [//jsfiddle.net/EDSWL/](http://jsfiddle.net/EDSWL/)
*   演示：http: [//jsfiddle.net/EDSWL/show](http://jsfiddle.net/EDSWL/show)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-31T15:10:56.620

对我来说，以上都不起作用。我认为这是因为我有两个级别的标题和级别 1 的固定宽度。所以我无法在级别 2 的相应列内对齐文本。

```
+---------------------------+
|           lvl 1           |
+---------------------------+
| lvl 2 col a | lvl 2 col b |
+---------------------------+ 
```

我不得不使用 width:auto 和 text:align-center 的组合：

```
<th style="width:auto;text-align:center">lvl 2 col a</th>
<th style="width:auto;text-align:center">lvl 2 col b</th> 
```

# ruby-on-rails - Rails 关联导致未定义的方法错误

> ID：13992100
> 
> 赞同：0
> 
> 时间：2012-12-21T14:40:54.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 2 个模型`Airline`和`User`. 问题是，当我`<%= @current_user.airline.name %>`在视图中尝试时，`undefined method 'airline' for nil:NilClass`我的模型设置如下[https://gist.github.com/4353169](https://gist.github.com/4353169)也许我做错了什么，但这应该是双向的。

谢谢，节日快乐（：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:58:18.507

尝试`foreign key`在 Airline 类中定义一个更指定的并检查`foreign key`两个表中的拼写是否正确。

`User`模型，

```
has_one :user, :foreign_key => "uid", primary_key: 'uid', class_name: 'Airline' 
```

在你的`Airline`模型中，

```
belongs_to :airline, foreign_key: 'uid', class_name: 'Airline' 
```

这只是建议。试试看....

# c# - WPF Datagrid - 自动刷新

> ID：13992107
> 
> 赞同：6
> 
> 时间：2012-12-21T14:41:25.163
> 
> 标签：c#, wpf, sql-server-2008, wpfdatagrid

我有一个显示绑定到 SQL 服务器数据库的表的数据网格。我想每 60 秒设置一个计时器，检查任何更新，然后显示最新更新的数据。

到目前为止，我已经为 datagrid 创建了一个 event_handler，其中包括对象调度程序计时器

```
private void dataGrid1_loaded(object sender, RoutedEventArgs e)
{
    DispatcherTimer dispatcherTimer = new DispatcherTimer();
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
    dispatcherTimer.Interval = new TimeSpan(0, 0, 60);
    dispatcherTimer.Start();
} 
```

现在我不知道如何进一步使用事件处理程序来处理来自数据库的新更新数据。

```
dispatcherTimer_Tick 
```

这是用于填充数据网格的选择语句。

```
private void Page_Loaded(object sender, RoutedEventArgs e)
{
    try
    {
        String selectstatement = "select top 2 ItemID, ItemName,ConsumerName, Street, DOJ from ConsumarTB order by ItemID ";
        da = new SqlDataAdapter(selectstatement, con);
        ds = new DataSet();
        da.Fill(ds);
        dataGrid1.ItemsSource = ds.Tables[0].DefaultView;

     }
     catch (SqlException e)
     {
        Console.WriteLine(e.Message);
     }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T14:50:48.173

有很多方法可以改善您上面的内容。但这是我会尝试的初学者。

下面将在页面加载时填充您的数据网格，设置一个计时器以每 60 秒打勾。当计时器计时，它会调用一个方法再次将数据加载到网格中。

```
//On PageLoad, populate the grid, and set a timer to repeat ever 60 seconds
private void Page_Loaded(object sender, RoutedEventArgs e)
{
    try
    {
        RebindData();
        SetTimer();
    }
    catch (SqlException e)
    {
        Console.WriteLine(e.Message);
    }
}

//Refreshes grid data on timer tick
protected void dispatcherTimer_Tick(object sender, EventArgs e)
{
    RebindData();
}

//Get data and bind to the grid
private void RebindData()
{
    String selectstatement = "select top 2 ItemID, ItemName,ConsumerName, Street, DOJ from ConsumarTB order by ItemID ";
    da = new SqlDataAdapter(selectstatement, con);
    ds = new DataSet();
    da.Fill(ds);
    dataGrid1.ItemsSource = ds.Tables[0].DefaultView;
}

//Set and start the timer
private void SetTimer()
{
    DispatcherTimer dispatcherTimer = new DispatcherTimer();
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
    dispatcherTimer.Interval = new TimeSpan(0, 0, 60);
    dispatcherTimer.Start();
} 
```

# javascript - 如何只匹配句子中的数字

> ID：13992109
> 
> 赞同：0
> 
> 时间：2012-12-21T14:41:34.383
> 
> 标签：javascript

使用 Flickr API。

```
result.items[i].published 
```

结果类似于 2012-12-21T14:36:24Z - 注意 T 和 Z？如何仅匹配 2012-12-21T14:36:24Z 中的数字？

这就是它的外观。

```
newPic.innerHTML = "<div class='pic-container'> <p class='title'>" + result.items[i].title + "</p> <a href="+ result.items[i].link +" >  <img src=\'" + result.items[i].media.m + "\'> </a></div><p class='author'>" +  result.items[i].author.match(/\(([^)]*)\)/)[1] + "</p><p class='published'>" + result.items[i].published + "</p>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:53:34.480

您可以使用简单的正则表达式，例如：

```
result.items[i].published.replace(/[a-z]/i , ""); 
```

或者如果你想用空格替换字母：

```
result.items[i].published.replace(/[a-z]/i , " "); 
```

我提供的两个示例将匹配字符串中的任何字母并替换它们，如果你想匹配更多的字符而不仅仅是字母，你可以简单地修改正则表达式。

希望这能回答你的问题，

伊格纳齐奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:48:18.907

您可以为此使用 RegExp 匹配器“\d”，但我认为更好的解决方案是使用

```
var d = new Date(result.items[i].published) 
```

从那里你得到一个正确的[Date 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:25:57.253

因为 JS 日期对象很难使用，所以最好的解决方案是对字符串运行一个简单的 REGEX 替换。

`result.items[i].published.replace(/Z|T/gi," ")`

如果您需要使用日期工作并做一些高级的事情，我向您推荐[dateJS](http://www.datejs.com/)库。

# javascript - 将 keyCodes 转换为字符的 JavaScript 函数

> ID：13992111
> 
> 赞同：3
> 
> 时间：2012-12-21T14:41:39.500
> 
> 标签：javascript

在任何 JavaScript 框架中是否有任何内置函数可以将 keyCodes 转换为字符？其中考虑了 shift 属性，因此它将返回正确的字符。

还是我们只需要构建自己的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:52:44.013

你可以使用`String.fromCharCode()`

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode)：

**语法**：`String.fromCharCode(num1, ..., numN)`

**参数**：`num1, ..., numN` （Unicode 值的数字序列。）

> 此方法返回一个字符串而不是 String 对象。
> 
> 因为 fromCharCode 是 String 的静态方法，所以您始终将其用作 String.fromCharCode()，而不是用作您创建的 String 对象的方法。

* * *

## **更新**：

在这里，我做了一个功能，可以做你想做的事：http: **[//jsbin.com/ukukuq/2/](http://jsbin.com/ukukuq/2/)**

[（代码）](http://jsbin.com/ukukuq/2/edit)

```
function keyDownEvent(e) {
    var other = {};
    var output= {};
    output['meta'] = {};
    var html = '';

    e = (e) ? e : ((event) ? event : null);

    if (e) {
        output['keyCode']   = (e.keyCode) ? e.keyCode : 'N/A';
        output['charCode'] = (e.charCode) ? e.charCode : 'N/A';
        output['meta']['shift']     =   e.shiftKey  ? true : false;
        output['meta']['ctrl']      =   e.ctrlKey   ? true : false;
        output['meta']['alt']       =   e.altKey    ? true : false;
        output['meta']['meta']      =   e.metaKey   ? true : false;

        html = document.getElementById('output')
        return html.innerHTML += '<pre>keyDown : ' + JSON.stringify(output) + '</pre>';
    } else {
        return 'error';
    }
}

function keyPressEvent(e) {
    var other = {};
    var output= {};
    var html = '';

    e = (e) ? e : ((event) ? event : null);

    if (e) {
        output['keyCode']   = (e.keyCode) ? e.keyCode : 'N/A';
        output['charCode'] = (e.charCode) ? e.charCode : 'N/A';

        html = document.getElementById('output')
        return html.innerHTML += '<pre>keyPress : ' + JSON.stringify(output) + ' Character : <strong>' +  String.fromCharCode(output['charCode']) + '</strong></pre><hr/>';
    } else {
        return 'error';
    }
}

var test = document.getElementById('test');
test.onkeydown = keyDownEvent;
test.onkeypress = keyPressEvent; 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:58:46.083

我也有自己的功能，我从[http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes修改了脚本](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

```
 function convertKeyCode(evt) {
            var chara = "";
            var keyCode = (evt.which) ? evt.which : evt.keyCode;
            var shift = evt.shiftKey;
            //if (keyCode == 8)
            //  chara = "backspace";
            //  backspace
            //if (keyCode == 9)
            //  chara = "tab";
            //  tab
            //if (keyCode == 13)
            //  chara = "enter";
            //  enter
            //if (keyCode == 16)
            //  chara = "shift";
            //  shift
            //if (keyCode == 17)
            //  chara = "ctrl";
            //  ctrl
            //if (keyCode == 18)
            //  chara = "alt";
            //  alt
            if (keyCode == 19)
                chara = "pause/break";
            //  pause/break
            //if (keyCode == 20)
            //  chara = "caps lock";
            //  caps lock
            //if (keyCode == 27)
            //  chara = "escape";
            //  escape
            //if (keyCode == 33)
            //  chara = "page up";
            // page up, to avoid displaying alternate character and confusing people
            //if (keyCode == 34)
            //  chara = "page down";
            // page down
            //if (keyCode == 35)
            //  chara = "end";
            // end
            //if (keyCode == 36)
            //  chara = "home";
            // home
            //if (keyCode == 37)
            //  chara = "left arrow";
            // left arrow
            //if (keyCode == 38)
            //  chara = "up arrow";
            // up arrow
            //if (keyCode == 39)
            //  chara = "right arrow";
            // right arrow
            //if (keyCode == 40)
            //  chara = "down arrow";
            // down arrow
            //if (keyCode == 45)
            //  chara = "insert";
            // insert
            //if (keyCode == 46)
            //  chara = "delete";
            // delete
            // Alphanumeric
            if (keyCode == 48)
                chara = (shift) ? ")" : "0";
            if (keyCode == 49)
                chara = (shift) ? "!" : "1";
            if (keyCode == 50)
                chara = (shift) ? "@" : "2";
            if (keyCode == 51)
                chara = (shift) ? "#" : "3";
            if (keyCode == 52)
                chara = (shift) ? "$" : "4";
            if (keyCode == 53)
                chara = (shift) ? "%" : "5";
            if (keyCode == 54)
                chara = (shift) ? "^" : "6";
            if (keyCode == 55)
                chara = (shift) ? "&" : "7";
            if (keyCode == 56)
                chara = (shift) ? "*" : "8";
            if (keyCode == 57)
                chara = (shift) ? "(" : "9";

            if (keyCode == 65)
                chara = (shift) ? "A" : "a";
            if (keyCode == 66)
                chara = (shift) ? "B" : "b";
            if (keyCode == 67)
                chara = (shift) ? "C" : "c";
            if (keyCode == 68)
                chara = (shift) ? "D" : "d";
            if (keyCode == 69)
                chara = (shift) ? "E" : "e";
            if (keyCode == 70)
                chara = (shift) ? "F" : "f";
            if (keyCode == 71)
                chara = (shift) ? "G" : "g";
            if (keyCode == 72)
                chara = (shift) ? "H" : "h";
            if (keyCode == 73)
                chara = (shift) ? "I" : "i";
            if (keyCode == 74)
                chara = (shift) ? "J" : "j";
            if (keyCode == 75)
                chara = (shift) ? "K" : "k";
            if (keyCode == 76)
                chara = (shift) ? "L" : "l";
            if (keyCode == 77)
                chara = (shift) ? "M" : "m";
            if (keyCode == 78)
                chara = (shift) ? "N" : "n";
            if (keyCode == 79)
                chara = (shift) ? "O" : "o";
            if (keyCode == 80)
                chara = (shift) ? "P" : "p";
            if (keyCode == 81)
                chara = (shift) ? "Q" : "q";
            if (keyCode == 82)
                chara = (shift) ? "R" : "r";
            if (keyCode == 83)
                chara = (shift) ? "S" : "s";
            if (keyCode == 84)
                chara = (shift) ? "T" : "t";
            if (keyCode == 85)
                chara = (shift) ? "U" : "u";
            if (keyCode == 86)
                chara = (shift) ? "V" : "v";
            if (keyCode == 87)
                chara = (shift) ? "W" : "w";
            if (keyCode == 88)
                chara = (shift) ? "X" : "x";
            if (keyCode == 89)
                chara = (shift) ? "Y" : "y";
            if (keyCode == 90)
                chara = (shift) ? "Z" : "z";
            // Alphanumeric
            //if (keyCode == 91)
            //  chara = "left window";
            // left window
            //if (keyCode == 92)
            //  chara = "right window";
            // right window
            if (keyCode == 93)
                chara = "select key";
            // select key
            //if (keyCode == 96)
            //  chara = "numpad 0";
            // numpad 0
            //if (keyCode == 97)
            //  chara = "numpad 1";
            // numpad 1
            //if (keyCode == 98)
            //  chara = "numpad 2";
            // numpad 2
            //if (keyCode == 99)
            //  chara = "numpad 3";
            // numpad 3
            //if (keyCode == 100)
            //  chara = "numpad 4";
            // numpad 4
            //if (keyCode == 101)
            //  chara = "numpad 5";
            // numpad 5
            //if (keyCode == 102)
            //  chara = "numpad 6";
            // numpad 6
            //if (keyCode == 103)
            //  chara = "numpad 7";
            // numpad 7
            //if (keyCode == 104)
            //  chara = "numpad 8";
            // numpad 8
            //if (keyCode == 105)
            //  chara = "numpad 9";
            // numpad 9
            //if (keyCode == 106)
            //  chara = "multiply";
            // multiply
            //if (keyCode == 107)
            //  chara = "add";
            // add
            //if (keyCode == 109)
            //  chara = "subtract";
            // subtract
            //if (keyCode == 110)
            //  chara = "decimal point";
            // decimal point
            //if (keyCode == 111)
            //  chara = "divide";
            // divide
            //if (keyCode == 112)
            //  chara = "F1";
            // F1
            //if (keyCode == 113)
            //  chara = "F2";
            // F2
            //if (keyCode == 114)
            //  chara = "F3";
            // F3
            //if (keyCode == 115)
            //  chara = "F4";
            // F4
            //if (keyCode == 116)
            //  chara = "F5";
            // F5
            //if (keyCode == 117)
            //  chara = "F6";
            // F6
            //if (keyCode == 118)
            //  chara = "F7";
            // F7
            //if (keyCode == 119)
            //  chara = "F8";
            // F8
            //if (keyCode == 120)
            //  chara = "F9";
            // F9
            //if (keyCode == 121)
            //  chara = "F10";
            // F10
            //if (keyCode == 122)
            //  chara = "F11";
            // F11
            //if (keyCode == 123)
            //  chara = "F12";
            // F12
            //if (keyCode == 144)
            //  chara = "num lock";
            // num lock
            //if (keyCode == 145)
            //  chara = "scroll lock";
            // scroll lock
            if (keyCode == 186)
                chara = ";";
            // semi-colon
            if (keyCode == 187)
                chara = "=";
            // equal-sign
            if (keyCode == 188)
                chara = ",";
            // comma
            if (keyCode == 189)
                chara = "-";
            // dash
            if (keyCode == 190)
                chara = ".";
            // period
            if (keyCode == 191)
                chara = "/";
            // forward slash
            if (keyCode == 192)
                chara = "`";
            // grave accent
            if (keyCode == 219)
                chara = (shift) ? "{" : "[";
            // open bracket
            if (keyCode == 220)
                chara = "\\";
            // back slash
            if (keyCode == 221)
                chara = (shift) ? "}" : "]";
            // close bracket
            if (keyCode == 222)
                chara = "'";
            // single quote

            return chara;

        } 
```

# android - 在android的网页中显示图像

> ID：13992112
> 
> 赞同：1
> 
> 时间：2012-12-21T14:41:48.043
> 
> 标签：android

```
WebView wv = (WebView) findViewById(R.id.webview1);
    wv.setWebViewClient(new Callback());
    WebSettings webSettings = wv.getSettings();
    webSettings.setBuiltInZoomControls(true);

    final String mimeType = "text/html";
    final String encoding = "UTF-8";
    String html = "<H1>A simple HTML page</H1><body>" +"<a>link using anchor tag</a>"+

            "<p>The quick brown fox jumps over the lazy dog</p>";
            wv.loadDataWithBaseURL("", html, mimeType, encoding, ""); 
```

链接后，我想要显示图像。那么如果该图像存储在sdcard的文件夹中，如何放置该图像的地址，`/images`即属性中的地址应该是什么`src`？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:43:42.090

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setBuiltInZoomControls(true);
String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();
String imagePath = "file://"+ base + "/test.jpg";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
mWebView.loadDataWithBaseURL("", html, "text/html","utf-8", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:47:03.183

在 imagePath 中，设置图像的位置。就像这里它显示的 test.jpg 文件存储在 images 文件夹中。

```
 String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();
 String imagePath = "file://"+ base + "/images/test.jpg";
 String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
  mWebView.loadDataWithBaseURL("", html, "text/html","utf-8", ""); 
```

# asp.net - 为什么浮动列表元素时列表的背景颜色会消失？

> ID：13992118
> 
> 赞同：4
> 
> 时间：2012-12-21T14:42:10.510
> 
> 标签：asp.net, html, css

我浮动我的无序列表元素的那一刻......背景颜色失败了。为什么？

```
<style type="text/css">

    .bkgrd-blue { background-color: #094AB2; }

    .application-bar { color: #FFFFFF; }

    .application-bar ul { }
    .application-bar ul.control-bar { list-style: none outside none; margin: 0; overflow: visible; padding: 0; }

    .application-bar ul.control-bar.branding { float: left;}
</style>

<div class="application-bar bkgrd-blue">
    <ul class="control-bar">
        <li>
            This is working!
        </li>
    </ul>
</div>

<div class="application-bar bkgrd-blue">
    <ul class="control-bar branding">
        <li>
            The moment I float this...it fails! Why?
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:52:31.260

浮动元素会将其从正常的文档流中移除，因此容器不会扩展 - 也就是说，包含的`div`高度为 0。

要解决此问题，您需要清除浮动。您可以：

*   设置`overflow: hidden`在`div`
*   浮动`div`
*   在浮动列表之后添加一个元素`clear:both`- 这可以使用`:after`伪元素来完成

这是使用第一个解决方案的演示：http: [//jsfiddle.net/FSH4Y/](http://jsfiddle.net/FSH4Y/)

我补充说：

```
.application-bar {
    color: #FFFFFF;
    overflow: hidden;
} 
```

这里有一些关于这个问题的更多信息：[CSS Tricks: All About Floats](http://css-tricks.com/all-about-floats/) - 查看名为*The Great Collapse的部分*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:47:04.623

你需要在列表下清除，通常我添加一个像

```
<div style='clear:both;'></div> 
```

这将允许浮动元素的父元素正确计算它的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:46:52.903

您还需要浮动包含背景的 div。一旦你浮动内部 ul，包含的 div 实际上没有内容，因此最终高度为 0。

# c++ - 如何从 C++ 文件中找到一个字符串并使用以下字符串将其删除？

> ID：13992130
> 
> 赞同：0
> 
> 时间：2012-12-21T14:43:13.807
> 
> 标签：c++, ofstream

如何在文件中查找字符串？在我的代码中，我想在文件中找到一个人的名字。并在评论中执行操作。这是我的代码：

```
int main(){
size_t found;
ofstream myfile;
cout << "Enter the name you wish to delete." << endl;
getline(cin, name);
myfile.open("database.dat");
found=myfile.find(name);
if (found!=string::npos){
    number = myfile.tellg();
    /*Delete current line and next line*/
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:45:49.363

您想修改文件，还是在阅读时跳过这两行？

实际上，两者的解决方案是相同的，因为从文件中间删除数据需要读取之后的所有内容并用偏移量重写它（就像从数组中间删除一个元素一样）。

因此，将整个文件读入内存，除了您确定需要删除的任何行（只需跳过这些行）。之后，将幸存的行写回磁盘。作为最后一步，使用移动到原始名称的临时文件可能是个好主意，这样如果您的进程中止，数据就不会被破坏。

# linux - 如何在没有 EBS 的情况下增加 ec2 实例根文件系统？

> ID：13992140
> 
> 赞同：0
> 
> 时间：2012-12-21T14:43:43.493
> 
> 标签：linux, amazon-ec2, amazon

如何在不使用 EBS 的情况下增加实例的磁盘空间？根文件系统大小仅显示 10 GB。有没有办法在没有 EBS 的情况下创建更大的文件系统？

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1             9.9G  3.3G  6.1G  35% /
tmpfs                 874M     0  874M   0% /lib/init/rw
udev                  874M   84K  874M   1% /dev
tmpfs                 874M     0  874M   0% /dev/shm
/dev/sdb              335G   12G  307G   4% /mnt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:35:53.920

正如您在输出中看到的，一个更大的分区安装在`/mnt`. 您可以将根文件系统上的一些东西移到那里，方法是在适当的位置重新挂载它或添加符号链接。如果您不想求助于 EBS 或网络文件系统，则没有其他方法可以添加更多磁盘空间。

# java - 使用可变数量的参数简化 Java 方法

> ID：13992148
> 
> 赞同：7
> 
> 时间：2012-12-21T14:44:12.497
> 
> 标签：java, methods, polygon

在 java 中工作，我想简化我正在使用的绘制函数（多边形创建器）。通常，当您创建多边形时，您会这样做：

```
Polygon mypoly = new Polygon();
mypoly.addPoint(x1, y1);
mypoly.addPoint(x2, y2);
mypoly.addPoint(x3, y3);
Draw.fillPolygon(g, mypoly, Color.blue); 
```

我想使用图像映射器自动给我坐标，所以我可以将它们复制粘贴到我自己的函数中。

```
myCommand(x1, y1, x2, y2, x3, y3); 
```

这些中的每一个都将进入顶部的多边形命令。我面临的问题是，当创建 mypoly 时，它如何知道要添加多少点以及将它们放在哪里？

我试图在`myCommand`添加参数时自动添加点，并且每个点都与原始多边形创建方法的 x、y 相对应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T14:47:25.570

听起来您需要使用[构建器](http://en.wikipedia.org/wiki/Builder_pattern)模式。在伪代码中：

```
PolygonBuilder pb = new PolygonBuilder();
pb.addPoint(1,1);
pb.addPoint(1,2);
// etc...

Polygon p = pb.newPolygon(); 
```

所以想法是您为构建器提供一组点，它会为您生成适当的多边形。构建器通常设计为具有[流畅的界面](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。请注意，构建器可以像工厂一样为您返回适当的子类`Polygon`（正方形、三角形、五角形等，如果您愿意的话）。

请注意，您可以使用[Java varargs 机制](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)提供一个采用可变数量参数的方法。例如

```
public void addPoints(Integer... args) {
   // and iterate here
} 
```

您可能希望创建一个`Point`对象来一起定义 x/y 坐标。否则上面将不得不检查偶数个参数，并且这些参数不会被捆绑在一起。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T14:52:01.750

您可以使用[可变参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)并通过使用获取 xs 和 ys 数组的[构造函数](http://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html#Polygon%28int%5B%5D,%20int%5B%5D,%20int%29)来动态创建多边形

（代码未测试）

```
public Polygon createPolygon(int... points) {
    if (0 != points.length % 2) {
        throw new IllegalArgumentException("Must have even number of points");
    }

    int numOfPoints = points.length / 2;
    int xs = new int[numOfPoints];
    int ys = new int[numOfPoints];
    for (int i=0; i < numOfPoints;i++) {
       xs[i] = points[i*2];
       yx[i] = points[i*2 + 1];
    }

    return new Polygon(xs, ys, numOfPOints);
} 
```

然后您可以使用任意数量的点调用该方法

`Polygon p = createPolygon(x1,y1,x2,y2,x3,y3);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:04:08.013

为了扩展 Brian Agnew 的答案，可能还值得添加一个 Point 类， addPoints 方法可以使用它。它可以使从多边形中添加/删除点变得稍微容易一些。

```
public final class Point<X,Y>{
    private final X x;
    private final Y y;

    public Point(X x, Y y){
        this.x=x;
        this.y=y;
    }

    public X getX(){return x;}

    public Y getY(){return y;}
} 
```

然后你可以有一个：

```
public void addPoints(Point<Integer,Integer>... points){
    for(Point<Integer,Integer> point:points)
        //your logic
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T14:56:12.283

我认为您可以使用接收可变参数（`...`）的方法

每个点都需要一个包装器：

```
class Point {
    int x;
    int y;
    Point(int x, int y) {
        this.x = x;
        this.y = y;
    }
} 
```

该方法可以是：

```
myCommand(Point ... points) 
```

来电

```
myCommand(new Point(0,0), new Point(1,1), new Point(0,1)); 
```

并为平局：

```
Polygon mypoly = new Polygon();
for(Point p : points)
    mypoly.addPoint(p.x,p.y);
Draw.fillPolygon(g,mypoly,Color.blue); 
```

# java - 以一定角度绘制矩形

> ID：13992150
> 
> 赞同：2
> 
> 时间：2012-12-21T14:44:16.330
> 
> 标签：java, graphics

给定以下内容的Java中绘制矩形的方法是什么：

*   正方形中心的坐标
*   矩形与垂直方向的角度，以度为单位

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:16:52.567

要以您建议的方式绘制矩形，您需要使用 class [`AffineTransform`](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/AffineTransform.html)。该类可用于以各种方式转换形状。要执行旋转使用：

```
int x = 200;
int y = 100;
int width = 50;
int height = 30;
double theta = Math.toRadians(45);

// create rect centred on the point we want to rotate it about
Rectangle2D rect = new Rectangle2D.Double(-width/2., -height/2., width, height);

AffineTransform transform = new AffineTransform();
transform.rotate(theta);
transform.translate(x, y); 
// it's been while, you might have to perform the rotation and translate in the
// opposite order

Shape rotatedRect = transform.createTransformedShape(rect);

Graphics2D graphics = ...; // get it from whatever you're drawing to

graphics.draw(rotatedRect); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:51:31.917

对于第一点，您可以通过使用距离公式计算出正方形中心的坐标，`(int)Math.sqrt((x1 - x2)*(x1 - x2) + (y1 - y2)*(y1 - y2));`它们除以 2。您可以对宽度和高度执行此操作。我对 Java draw 的了解还不够，无法根据您的问题为您提供更好的答案，但我希望这会有所帮助。

其次，您只需要创建一个多边形，对吗？

# c++ - 从 QML 中清除 WebView 缓存

> ID：13992151
> 
> 赞同：1
> 
> 时间：2012-12-21T14:44:19.877
> 
> 标签：c++, qt, qml

我使用 QDeclarativeView 打开网站并使用 JavaScript 在同一视图中加载下一页。

每个网站加载后，我的程序占用 20mb 以上的内存。加载新网站后如何清理缓存或以其他方式释放内存？

我试过：

> decView->engine()->rootContext()->setContextProperty("myEngine", decView->engine());

然后在 qml

> myEngine.clearComponentCache()

但我明白了

> TypeError：表达式“myEngine.clearComponentCache”[undefined] 的结果不是函数。

我该做什么？

编辑：这是我到目前为止得到的：
aws.cpp

```
void Aws::openQMLWindowSlot(){
   QDeclarativeView *decView= new QDeclarativeView();
   decView->engine()->rootContext()->setContextProperty("myAws",this);
   decView->setSource(QUrl("qrc:/inc/firstqml.qml"));
   decView->show();
}

void Aws::clearCacheQMLSlot(){

//HERE I GOT PROBLEM
} 
```

第一个qml.qml

```
import QtQuick 1.1
import QtWebKit 1.0
WebView {

    id: webView
    objectName: "myWebView"
    url:"http://example.com"
    onLoadFinished: {myAws.clearCacheQMLSlot();}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:38:24.033

您的代码无法按预期工作的原因有两个。首先，为了能够访问`QObject`后代的插槽和可调用方法，您必须[注册](http://qt-project.org/doc/qt-4.8/qdeclarativeengine.html#qmlRegisterType)它们：

```
qmlRegisterType<QDeclarativeEngine>("MyApp", 1, 0, "QDeclarativeEngine"); 
```

其次，`QDeclarativeEngine::clearComponentCache`既不是插槽也不是[可调用的方法](http://qt-project.org/doc/qt-4.8/qobject.html#Q_INVOKABLE)，所以它仍然不起作用。从 QML 调用普通的 C++ 方法是根本不可能的。

您实际上要做的是实现一个基于自己`QObject`的类，将调用包装`QDeclarativeEngine::clearComponentCache`在一个插槽中，像上面一样注册类，将该类的实例设置为上下文属性，就像您对声明性引擎所做的那样，最后从QML。

# mysql - 客户端连接 MySQL

> ID：13992153
> 
> 赞同：3
> 
> 时间：2012-12-21T14:44:22.450
> 
> 标签：mysql

是否有基于客户端的 Internet 技术允许我在不使用任何服务器端脚本的情况下连接到远程 MYSQL 数据库？

我知道JavaScript不允许我，但是如果用户知道数据库的密码，可以在客户端完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:46:52.857

您只需要一个 MySQL 管理客户端吗？像[MySQL Workbench](http://www.mysql.com/products/workbench/)这样的东西应该可以解决问题，不是吗？如果数据库已打开且可用，那么任何 MySQL 客户端应用程序都应该能够连接到它，包括 MySQL 附带的命令行工具。

请记住，通常*不*建议将您的数据库直接暴露在 Internet 上。如果您这样做，您将需要*真正*关注安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:01:49.373

如果您*真的*想使用浏览器，我的第一个想法是`phpMyAdmin`在服务器上安装一个类似的工具，然后让您的用户访问它。

再说一次，我会给你同样的建议：不要。请不要。如果您**真的**想这样做，请进行安全备份并采取所有必要的预防措施。

# android - 将子级添加到线性布局时出现异常

> ID：13992157
> 
> 赞同：0
> 
> 时间：2012-12-21T14:44:35.540
> 
> 标签：android, exception, android-linearlayout

我正在尝试将 textview 作为子项添加到线性布局但出现异常。这是 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/buttonswoodytexturebg"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/OkButton"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Ok" />

        <Button
            android:id="@+id/AddContactButton"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Add new Contact" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/listViewSetRule"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_margin="2dip"
            android:cacheColorHint="#00000000"
            android:choiceMode="multipleChoice" />
        <!-- android:smoothScrollbar="false" -->

        <ListView
            android:id="@+id/listViewUpdateRule"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_margin="2dip"
            android:cacheColorHint="#00000000"
            android:choiceMode="multipleChoice" />

        <LinearLayout
            android:id="@+id/sideIndex"
            android:layout_width="40dip"
            android:layout_height="fill_parent"
            android:background="@color/black"
            android:gravity="center_horizontal"
            android:orientation="vertical" >
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

在这里，我正在尝试`sideIndex`使用以下代码将子级添加到具有 id 的线性布局中：

```
@Override
    public void onWindowFocusChanged(boolean hasFocus)
    {
        super.onWindowFocusChanged(hasFocus);

        LinearLayout sideIndex = (LinearLayout)ShowTheContacts1.this.findViewById(R.id.sideIndex);
        sideIndexHeight = sideIndex.getHeight();

        ((ViewGroup)sideIndex.getParent()).removeView(sideIndex);

        TextView l_tempText = new TextView(ShowTheContacts1.this);
        l_tempText.setGravity(Gravity.CENTER);
        l_tempText.setTextSize(20);
        LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1);
        l_tempText.setLayoutParams(params);

        for(int l_a = 0;l_a < m_arrayOfAlphabets.length;l_a++)
        {
            l_tempText.setText(m_arrayOfAlphabets[l_a]);
            sideIndex.addView(l_tempText);
        }
    } 
```

我在这一行遇到异常： `sideIndex.addView(l_tempText);`这是 logcat ：

```
12-21 20:08:06.291: E/AndroidRuntime(19007): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.view.ViewGroup.addViewInner(ViewGroup.java:1861)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.view.ViewGroup.addView(ViewGroup.java:1756)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.view.ViewGroup.addView(ViewGroup.java:1713)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.view.ViewGroup.addView(ViewGroup.java:1693)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at com.velosys.smsManager.Activities.ShowTheContacts1.onWindowFocusChanged(ShowTheContacts1.java:1335)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:1969)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.view.View.dispatchWindowFocusChanged(View.java:3731)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:657)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1819)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.os.Looper.loop(Looper.java:123)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at android.app.ActivityThread.main(ActivityThread.java:4363)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at java.lang.reflect.Method.invokeNative(Native Method)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at java.lang.reflect.Method.invoke(Method.java:521)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-21 20:08:06.291: E/AndroidRuntime(19007):    at dalvik.system.NativeStart.main(Native Method) 
```

我不知道如何解决这个问题。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:51:13.087

您需要`TextView l_tempText`在循环内重新创建。您不能使用相同的实例，更改文本并添加它，它必须是一个全新的对象。

将所有`l_tempText`代码移动到循环中，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:50:02.403

您正在尝试多次添加同一个对象。

```
for(int l_a = 0;l_a < m_arrayOfAlphabets.length;l_a++)
{
    l_tempText.setText(m_arrayOfAlphabets[l_a]);
    sideIndex.addView(l_tempText);
} 
```

`l_tempText`每次都应该创建：

```
for(int l_a = 0;l_a < m_arrayOfAlphabets.length;l_a++)
{
    TextView l_tempText = new TextView(ShowTheContacts1.this);
    l_tempText.setGravity(Gravity.CENTER);
    l_tempText.setTextSize(20);
    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1);
    l_tempText.setLayoutParams(params);
    l_tempText.setText(m_arrayOfAlphabets[l_a]);
    sideIndex.addView(l_tempText);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T14:55:46.823

l_tempText 应该在“for”语句中创建

```
 LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT, 1);
    TextView l_tempText = null;
    for(int l_a = 0;l_a < m_arrayOfAlphabets.length;l_a++)
    {
    l_tempText = new TextView(ShowTheContacts1.this);
    l_tempText.setGravity(Gravity.CENTER);
    l_tempText.setTextSize(20);
    l_tempText.setLayoutParams(params);
    l_tempText.setText(m_arrayOfAlphabets[l_a]);
    sideIndex.addView(l_tempText);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:49:41.930

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/buttonswoodytexturebg"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" > 
```

`android:orientation`您在第二个布局中忘记了参数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T14:51:19.950

你得到异常，因为你正在删除 LinearLayout

```
((ViewGroup)sideIndex.getParent()).removeView(sideIndex); 
```

然后尝试向同一个 LinearLayout 添加一些东西

```
sideIndex.addView(l_tempText); 
```

在循环中一遍又一遍地使用相同的 TextView 实例。

# wordpress - 如何以编程方式在 WordPress 中添加值为 0 的自定义字段

> ID：13992163
> 
> 赞同：-3
> 
> 时间：2012-12-21T14:44:54.227
> 
> 标签：wordpress

我做了谷歌，但不知道如何自动赋予 o 值

add_post_meta(0, key , 在发布时)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:47:59.983

你可以这个功能会在发布后添加o值

```
function add_custom_field_automatically($post_ID) {    global $wpdb;
  if(!wp_is_post_revision($post_ID)) {
  add_post_meta($post_ID, '_my_key', '0', true);
}
}
add_action('publish_page', 'add_custom_field_automatically');
 add_action('publish_post', 'add_custom_field_automatically'); 
```

这将自动添加一个自定义字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:04:07.110

```
function add_custom_field_automatically($post_ID) { global $wpdb;
if(!wp_is_post_revision($post_ID)) {
add_post_meta($post_ID, '_my_key', '0', true);
}
}
add_action('publish_page', 'add_custom_field_automatically');
add_action('publish_cystom_post_type', 'add_custom_field_automatically' 
```

# android - 如何设置 ListFragment 自定义布局的 Divider（为 null）

> ID：13992168
> 
> 赞同：6
> 
> 时间：2012-12-21T14:45:16.520
> 
> 标签：android, android-fragments, android-listfragment, android-adapter

我试图了解如何使用 listfragments 和自定义适配器。所以我构建了这个小例子，我想知道在哪里可以将列表视图的分隔符设置为空。

我发现了不同的方法： - android:dividerHeight="1dip" - android:divider="@android:color/transparent" 但我没有带有 listview 的 XML 布局

我还看到了类似 listview.setDivider(null) 的东西，但是由于使用了 listfragments，我不知道在我的代码中哪里可以使用该方法。

我的代码：

```
listview_item_row.xml
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/ivCountry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" 
        android:layout_weight="1"/>

    <TextView
        android:id="@+id/tvCountry"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:text="TextView"
        android:layout_weight="4" />

</LinearLayout> 
```

CountryList 类

```
public class CountryList extends ListFragment {

    Country[] countries2 = new Country[]
            {
                new Country("Netherlands"),
                new Country(R.drawable.bas,"Basque Country")
            };

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        CountryAdapter adapter = new CountryAdapter(inflater.getContext(),R.layout.listview_item_row,countries2);
        setListAdapter(adapter);
        getListView().setDivider(null);

        return super.onCreateView(inflater, container, savedInstanceState);
    } 
```

我的国家适配器

```
public class CountryAdapter extends ArrayAdapter<Country>{

Context context;
int layoutResourceId;
Country[] data = null;

public CountryAdapter(Context context, int layoutResourceId, Country[] data) {
    super(context,layoutResourceId,data);
    this.context = context;
    this.layoutResourceId = layoutResourceId;
    this.data = data;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View row = convertView;
    CountryHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent,false);

        holder = new CountryHolder();
        holder.imgIcon = (ImageView) row.findViewById(R.id.ivCountry);
        holder.txtTitle = (TextView)row.findViewById(R.id.tvCountry);

        row.setTag(holder);

    } else {
        holder = (CountryHolder) row.getTag();
    }

    Country country = data[position];
    holder.txtTitle.setText(country.getTitle());
    holder.imgIcon.setImageResource(country.getIcon());

    return row;

}

static class CountryHolder
{
    ImageView imgIcon;
    TextView txtTitle;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T14:48:10.093

您始终可以通过在 onCreateView() 上返回视图来为 ListFragment 设置自定义视图，但您需要在其中包含一个带有“@id/android:list”的 ListView，如[文档](http://developer.android.com/reference/android/app/ListFragment.html)中所述。

在您的 xml 中，您可以这样做，`android:divider="@null"`或者如果您真的想在 ListFragment 代码`getListView().setDivider(null);`中（在 onActivityCreated() 方法中）这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T14:49:11.437

内部`onCreateView`使用：

`getListView().setDivider(null);`

# jquery - 切换设置日期选择器

> ID：13992169
> 
> 赞同：1
> 
> 时间：2012-12-21T14:45:18.610
> 
> 标签：jquery, html, datepicker

我们正在使用 jQuery 的默认日期选择器（[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)），但我试图制作一个可更改的日期选择器。

我有一个单选按钮，可以在送货和取货之间切换。我希望客户能够在取货时选择周六，但无法选择周日和周六送货。

我做了一些代码，但它似乎不起作用

**JS**

```
 $('input[name=method]').change(function() {
    if ($(this).val() == 'pickup') {            
        $('.datepicker').datepicker({
                                beforeShowDay: function(date) {
                                    var day = date.getDay();
                                    return [(day != 0), ''];
                                }
                                });
    }

    else {
        $('.datepicker').datepicker({
                                beforeShowDay: $.datepicker.noWeekends
                                });
    }
  }); 
```

**HTML**

```
<h3>Overige informatie</h3>
<label>Afhalen/Bezorgen</label>
<br>
<div id="project_basket_orderinfoform-method">
   <label><input type="radio" id="project_basket_orderinfoform-method-pickup" name="method" value="pickup"  checked="checked" class=" radio"/>Afhalen</label>
   <label><input type="radio" id="project_basket_orderinfoform-method-deliver" name="method" value="deliver"  class=" radio"/>Bezorgen</label>
   <span class="required-marker">*</span>
</div>

<label for="project_basket_orderinfoform-delivery_date">Aflever-/afhaaldatum</label>
<br>
<input id="project_basket_orderinfoform-delivery_date" type="text" placeholder="" name="delivery_date" value="24-12-2012" class="datepicker datetime"/> 
```

所以基本上当我从 Pickup 切换到 Delivery 并返回时，datepicker 不会改变它的设置`beforeShowDay`。我不知道出了什么问题...我对日期选择器不是很有经验，所以我想知道以前有没有其他人做过这个，或者有人能看到代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:48:21.507

实例化日期选择器后，不使用“选项”选项就无法更改其设置，或者您可以销毁日期选择器并重新创建它。

# python - Python：执行一个函数来检查文件是否有后缀

> ID：13992171
> 
> 赞同：1
> 
> 时间：2012-12-21T14:45:20.933
> 
> 标签：python, performance, error-handling, coding-style

我写了这个函数来使用另一个函数，检查输出是否有正确的后缀。在我使用它之前，我有两个问题：

1.  在这种情况下使用是`TypeError`最好的[例外吗？](http://docs.python.org/2/library/exceptions.html)

2.  有没有我可以使用的内置函数来代替我的？

代码：

```
def suffix_NameCheck(inFile):
    if os.path.splitext(inFile)[1] is None:
        raise TypeError('"%s" has not a suffix' % inFile)
    else:
        return inFile 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T14:48:37.893

没有内置函数可以执行此操作，因为

1.  并非所有文件系统都真正使用扩展名。
2.  单独使用 if 语句可能更常见，而不是将其放入函数中。

原因是您可能必须在某个地方捕获该异常（除非您故意希望它结束​​程序，在这种情况下，可能有比抛出异常更好的方法，例如`sys.exit`）。捕获异常的代码至少与仅执行`if`检查和处理它的代码一样复杂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T14:49:54.630

我不会从名为 的函数中引发异常`suffix_NameCheck`，而是返回`True`或`False`代替。的正常操作`suffix_NameCheck`不受值是否有正确的后缀的影响，它的*工作*是检查该后缀。

*使用* 的函数`suffix_NameCheck`仍然可能引发异常；`ValueError`在这种情况下使用可能是一个更好的例外。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T14:48:42.993

我认为这是更恰当的一个`ValueError`。您尝试报告的问题是用户提供了文件路径/名称参数作为没有文件扩展名的字符串。这是字符串值的问题，而不是任何类型的问题。

其他回答者的观点是，乍一看，这种功能确实应该返回 a `bool`，但鉴于该用例仅包含`bool(os.path.splitext(candidate)[1])`，我认为如果您真的想在这里提出异常，那么您已经在使用 a返回 a 的较低级别函数`bool`。

# php - 在分页中单击下一步后未定义的索引。具有字段和结果的搜索引擎在不同的页面上

> ID：13992183
> 
> 赞同：-2
> 
> 时间：2012-12-21T14:45:56.737
> 
> 标签：php, mysql, pagination, search-engine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:52:01.247

请记住，除了在 URL 或 POST 中传递的内容之外，您的页面一无所知。您指向后续页面的链接不会传递 $query 或 $field 字段。您需要将这些添加到您为每个链接创建的 URL 中：

```
for($page = 1; $page <= $maxPage; $page++) {
    echo "<a href='result7.php?page=$page&field=$field_escaped&query=$something_escaped'>$page</a> ";
} 
```

其中 $query_escaped 和 $field_escaped 是您想要传递给后续页面的字段和查询值的 URL 编码版本。

请注意，此代码存在各种安全问题；如果这要公开出现，您几乎是在要求 SQL 漏洞利用。

# objective-c - 状态应用程序：有时面板丢失，多线程可能的问题

> ID：13992184
> 
> 赞同：0
> 
> 时间：2012-12-21T14:46:03.197
> 
> 标签：objective-c, cocoa, osx-mountain-lion, statusbar, race-condition

我有一个状态应用程序，发布它很长，所以我将对其进行描述并仅发布部分代码：

*   在 xib 文件中有两个对象：AboutController 和 PreferencesController；
*   应用程序委托能够启动 AboutController 和 PreferencesController 的面板；
*   面板也在 xib 文件中；
*   用户通过选择状态菜单项可以启动这两个面板；
*   有一个计时器可以不断下载 HTML 页面并读取它；
*   下载页面时，标签的stringValue会发生变化。但stringValue也可能会从PreferencesController中更改。页面是从后台线程下载的，但它是通过主队列更改的。

现在我有一些问题：

*   当应用程序开始睡眠（计算机进入待机状态）时，我是否必须使计时器无效，并在它返回时创建另一个计时器？
*   标签在主队列中更新，所以我仍然需要使用互斥锁来保护标签访问？
*   有时面板丢失：在应用程序启动时，我可以通过单击菜单项来启动面板，但有时它们没有启动。我不知道如何总是重现这个错误，它只是在应用程序时随机发生通常活动 2/3 小时，我必须重新启动应用程序才能解决这个问题。

代码太长，那只是一段代码：

```
- (void) checkPosts: (id ) sender
{
    NSOperationQueue* queue=[NSOperationQueue new];
    queue.maxConcurrentOperationCount=1;
    [queue addOperationWithBlock:^
    {
        NSNumber* newPosts= [self updatePosts];
        NSNumber* posts= [controller posts];
        if([posts integerValue]!=[newPosts integerValue])
        {
            NSOperationQueue* queue=[NSOperationQueue mainQueue];
            posts= newPosts;
            [queue addOperationWithBlock:^
            {
                // This is where I may have a race condition
                item.attributedTitle=[[NSAttributedString alloc]initWithString: [formatter stringFromNumber: posts] attributes: @{NSForegroundColorAttributeName : [controller color], NSFontAttributeName : [NSFont userFontOfSize: 12.5]}];
            }];
            // That's not so relevant:
            NSUserNotification* notification=[NSUserNotification new];
            notification.title= [NSString stringWithFormat: @"posts Changed to %@",posts];
            notification.deliveryDate=[NSDate date];
            notification.soundName= NSUserNotificationDefaultSoundName;
            NSUserNotificationCenter* center=[NSUserNotificationCenter defaultUserNotificationCenter];
            [center deliverNotification: notification];
            center.delegate= self;
            [controller setPosts: posts];
        }
    }];
} 
```

一点背景资料：

*   此方法在后台线程中工作；
*   [self updatePosts] 下载 HTML 页面并返回帖子数量；
*   [控制器帖子] 使用 NSUserDefaults 读取之前的帖子数量；
*   item 是状态菜单的菜单项。

**更多细节**

这就是我获取计时器的方式：

```
// In the applicationDidFinishLaunching method
timer=[NSTimer scheduledTimerWithTimeInterval: [interval integerValue ] target: self selector: @selector(checkReputation:) userInfo: nil repeats: YES]; 
```

计时器是一个属性：

```
@property (nonatomic, strong) NSTimer* timer; 
```

interval 是一个 NSNumber，确保它的整数值大于或等于 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:37:28.683

目前尚不完全清楚这里发生了什么。您提供了大量信息，但并非提供明确答案所需的所有信息。我将首先尝试解决您的问题：

> 当应用程序开始睡眠（计算机进入待机状态）时，我是否必须使计时器无效，并在它返回时创建另一个计时器？

不得不？不。应该是为了清洁和确定的状态？很可能是。您可能应该准确指定如何设置计时器，因为您可能会遇到与运行循环交互的问题......但我认为这不是您的问题。

> 标签在主队列中更新，所以我仍然需要使用互斥锁来保护标签访问？

只要您从主线程/队列更新 UI，就应该没问题。这是带有块的标准设计方法。

> 有时面板丢失：在应用程序启动时，我可以通过单击菜单项来启动面板，但有时它们没有启动。我不知道如何总是重现这个错误，它只是在应用程序时随机发生通常活动 2/3 小时，我必须重新启动应用程序才能解决这个问题。

如果您不知道如何重现它，我不确定我们能否在“看点”之外为您提供帮助。我的第一个想法是，当应用程序处于活动状态时，您可能正在重新创建主控制器的多个副本（因为您之前询问过这个问题，我假设您已经尝试过使用它做一些事情）。确保重复使用相同的控制器。

现在开始代码。

```
NSOperationQueue* queue=[NSOperationQueue new]; 
```

该`queue`变量是方法范围的局部变量。我看不到保留/释放，所以我假设您使用的是 ARC。在这种情况下，您不会保留您正在创建的新队列，并且只要方法完成并且您离开它的范围，只要您需要它，它的生命周期就不能保证继续存在。您应该创建`queue`一个实例变量，使其保持不变。这样，每次触发该方法时都可以重用队列，并且它将保持足够长的时间以供其他队列/线程使用。

我认为这可能*是*你最大的罪魁祸首。调整它并更新您的问题，以反映它如何影响您的应用程序的状况。

# jquery - 动画添加类并重新计算总类

> ID：13992203
> 
> 赞同：1
> 
> 时间：2012-12-21T14:47:40.590
> 
> 标签：jquery, class, count, click, jquery-animate

这个想法很简单；首先将一个类添加到某些 div，然后使用单击功能删除元素类中的 1 个并重新计算总类。但是在删除旧类并添加新类时，我想使用动画。

HTML：

```
 <div>1</div>
   <div>2</div>​ 
```

CSS：

```
.divclass{
    width:200px;
    height: 200px;
    border: 1px solid #000000;
    background: #ffffff;
}

.divclass2{
    width: 250px;
    height: 250px;
    background: #000000;
}​ 
```

查询：

```
var div = $('div').eq(0);
var div2 = $('div').eq(1);

div.addClass('divclass');
div2.addClass('divclass2');

var totaldivclass = $('.divclass').size();
var totaldivclass2 = $('.divclass2').size();

alert(totaldivclass);
alert(totaldivclass2);    

$('.divclass2').click(function(){
$('.divclass2').animate({
    'width':'200px',
    'height':'200px',
    'background':'#ffffff'
}, function(){$('.divclass2').removeClass('divclass2').addClass('divclass')});

//recount total classes
totaldivclass = $('.divclass').size();

alert(totaldivclass);
});​ 
```

这很有效，不是我想要的方式：第一次点击它会做动画，然后它应该添加和删除类。然后，它应该重新计算课程并提醒总数。

它完成了所有这些，但是在第一次单击时，它将所有当前类都计为 1。但是第二次单击显示 2..

我的问题：我如何让它工作，以便在第一次点击时计算 2 个元素（所以正确的总数）？

小提琴：http: [//jsfiddle.net/a6mx2/](http://jsfiddle.net/a6mx2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:59:38.697

看[我的小提琴](http://jsfiddle.net/Lq6tF/)

当代码退出到重新计算部分时，DOM 更新还没有完成。

在 animate 函数中移动重新计数，然后显示正确的总数。

```
 function(){        
        $(this).removeClass('divclass2').addClass('divclass')
        totaldivclass = $('.divclass').size();  
        alert(totaldivclass);  }); 
```

所以你有一个 DOM 更新“线程”问题。

# listview - yii CListView 中的增量数据

> ID：13992204
> 
> 赞同：1
> 
> 时间：2012-12-21T14:47:42.230
> 
> 标签：listview, yii

我想知道是否可以通过 CListView 小部件获得增量变量？例如，我希望呈现的第一项包含值为 0 的参数，第二项包含值为 1 的参数，第三项包含值为 2 的参数......等等......

不幸的是，我不能使用项目的 ID 作为唯一标识符，我正在寻找的需要是从第一个项目到最后一个项目的增量值。

我不确定是否可以通过`viewData`属性之类的东西发送动态参数，以便呈现的每个项目对于给定的参数都有唯一的值？

从我可以看到列表中每个渲染项目可以拥有的唯一唯一数据是通过`dataprovider`属性发送的数据模型？它是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:57:24.947

您可以`$index`在`CListView.iteView`部分中使用变量。看看[文档](http://www.yiiframework.com/doc/api/1.1/CListView#itemView-detail)：

*$index：指当前正在渲染的数据项的从零开始的索引。*

# collections - 如何修改结构中的值？

> ID：13992209
> 
> 赞同：0
> 
> 时间：2012-12-21T14:47:57.333
> 
> 标签：collections, struct, variable-assignment

我的结构类：

```
public struct PinAndRadius
{
    public string pinID { get; set; }
    public string radiusID { get; set; }

    public string getPinID()
    {
        return pinID;
    }

    public string getRadiusID()
    {
        return radiusID;
    }
} 
```

有问题的方法：

```
void mapArea_VE_PinDragged(double latitude, double longitude, object id)
{
    foreach (var pin in pinRadiusCollection)
    {
        string ID = id.ToString();
        //string newID = ID.Substring(0, 18);
        if (!pin.Key.pinID.Equals(ID))
        {
            continue;
        }
        else if (pin.Key.pinID.Equals(ID))
        {
            var newLoc = createNewSearchLocation(latitude, longitude);
            mapArea.VE_DeleteRadius(pin.Key.radiusID);
            drawPoly(newLoc, pin.Value.xar_Radius);
            pin.Key.radiusID = pollyID;
            break;
        }
    }
} 
```

问题是当我尝试设置`pin.key.radiusID`为 pollyID 时，我收到一条错误消息

> 无法修改“System.Collections.Generic.KeyValuePair.Key”的返回值，因为它不是变量...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:54:19.130

.net 中的结构是值类型。这意味着您无法参考`PinAndRadius`using `pin.Key`。您将获得 `pin.Key`type 的副本`PinAndRadius`。然后您无法访问此副本，编译器会告诉您这一点。在 C++ 术语中，它不是左值。

**如果您创建`struct`总是尝试使其不可变。可变结构是邪恶的。**

解决这个问题的最简单方法是制作`PinAndRadius`as `class`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:58:22.913

从外观上看，您是一个以;`pinRadiusCollection`为键的通用字典。`PinAndRadius`您得到的错误是让您知道您无法修改该对象，因为它被用作字典中的键。

如果您的引脚应该是可变的，您可能应该重新审视您存储它们的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T21:04:45.213

.net 中的集合未设置为允许方便地修改其中包含的结构类型项目。尽管如此，可变结构仍然提供比任何其他类型的数据类型更清晰的语义。要编辑集合中的结构，只需将其复制到一个变量，编辑该变量，然后将其存储回来：

```
var temp = myList[someIndex];
temp.SomeVield = whatEver;
myList[someIndex] = temp; 
```

请注意，通常让可变结构将其内容公开为字段比作为属性更好。有些人可能会说可变结构是邪恶的，因为它们的语义与类不同，但这就像说螺丝刀是邪恶的，因为它们制造了糟糕的锤子。暴露字段结构不像类类型那样工作，但所有字段都暴露的结构都具有彼此相同的语义。这些语义与类不同，但在它们有用的情况下，它们是不平等的。

顺便说一句，“可变结构”得到的大部分不良代表是因为如果应用于只读结构，*除了暴露字段之外的变异结构成员通常会生成虚假代码。*如果您避免使用修改字段的结构成员`this`[静态结构方法修改作为`ref`参数接收的结构的字段是完全安全的]，则这些危险不适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:13:38.917

我只是将结构定义更改为一个类。

# apache - htaccess if 语句

> ID：13992212
> 
> 赞同：14
> 
> 时间：2012-12-21T14:48:03.543
> 
> 标签：apache, .htaccess

我的`.htaccess`文件中有以下行来选择要使用的 PHP 版本：

```
AddType x-httpd-php53 .php 
```

这在实时环境中效果很好，但不适用于测试环境并破坏站点。

有没有办法可以通过服务器的 IP 或网站的 URL 或其他东西将它放在 if 语句或其他东西中，以便它只在实时环境中生效？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-21T14:56:43.523

使用**Apache 2.4**`<If>` ，使用/`<Else>`指令（在`%{HTTP_HOST}`？）很容易。

```
<If "%{HTTP_HOST} == 'foo'">
    # configuration for foo
</If>
<Else>
    # default configuration
</Else> 
```

对于**Apache 2.2**及更早版本，我将在两种环境之一中的 Apache 启动命令行（`-D`选项）中添加一个参数，然后通过`<IfDefine>`.

要在 Windows 上执行此操作，将 Apache 作为服务启动，请`HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Apache2.<VERSION>\ImagePath`
通过附加`-DFOO`. 然后，您可以编写：

```
<IfDefine FOO>
    # configuration for foo
</IfDefine>
<IfDefine !FOO>
    # default configuration
</IfDefine> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-25T15:40:34.547

您可以做的另一种选择是将测试环境中的 httpd.conf 更改为使用“ **.htaccess-test** ”而不是“ **.htaccess** ”。

这可以通过修改 httpd.conf 并在任何块之外添加以下行来完成：

```
AccessFileName .htaccess-test 
```

注意：如果要将 AccessFileName 应用于特定的 VirtualHost，可以在 <VirtualHost> 块中添加它。

这意味着测试环境将使用 .htaccess-test，而生产环境将使用 .htaccess。因此，您可以自由地分别配置每个环境。

然后在 .htaccess 旁边创建一个名为 .htaccess-test 的文件。使用您的测试配置修改 .htaccess-test，然后最后在测试环境服务器中重新启动 Apache Web 服务器。

# python - 如何将全局安装的包导入 virtualenv 文件夹

> ID：13992214
> 
> 赞同：35
> 
> 时间：2012-12-21T14:48:07.847
> 
> 标签：python, ubuntu, virtualenv

因此，我的 python 项目有一个名为 venv 的 virtualenv 文件夹。

我可以跑：

```
venv/bin/pip install -r requirements.txt 
```

它安装了我需要的项目的所有要求，除了一个，M2Crypto。安装它的唯一方法是通过 apt-get：

```
apt-get install python-m2crypto 
```

然后如何将通过 apt 安装的这个包添加到 venv 文件夹？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-21T15:07:52.400

```
--system-site-packages 
```

提供对虚拟环境的全局站点包模块的访问。

你可以这样做：

```
$ sudo apt-get install python-m2crypto
$ virtualenv env --system-site-packages 
```

...然后您将可以访问`m2crypto`（以及所有其他系统范围内安装的软件包）在您的 virtualenv 中。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-21T16:02:48.463

毕竟我做了什么：

```
cp -R /usr/lib/python2.7/dist-packages/M2Crypto /home/richard/hello-project/venv/lib/python2.7/site-packages/
cp -R /usr/lib/python2.7/dist-packages/OpenSSL /home/richard/hello-project/venv/lib/python2.7/site-packages/ 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-09-30T07:16:39.080

真正简单的解决方案。

在虚拟环境目录中，编辑文件`pyvenv.cfg`. 设置参数 `include-system-site-packages = true`，保存文件。全局安装的模块将在您下次激活 ( `source venv/bin/activate`) 环境时出现。

可以通过验证`pip list`。

享受！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-05-15T22:07:52.227

`toggleglobalsitepackages`将切换对系统范围的访问`site-packages`。

**注意：**您需要[`pip install virtualenvwrapper`](https://virtualenvwrapper.readthedocs.org/en/latest/)获取此命令；香草`virtualenv`不包括它。与您一起`virtualenvwrapper`，您还可以获得非常有用的`mkvirtualenv`命令`rmvirtualenv`等。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-21T14:52:02.933

```
venv/bin/pip install -I M2Crypto 
```

强制它`-I`也被安装到 virtualenv 中，即使它已经全局安装。

# ruby-on-rails - Rails 关联单独工作，但不适用于包含/连接

> ID：13992219
> 
> 赞同：1
> 
> 时间：2012-12-21T14:48:15.740
> 
> 标签：ruby-on-rails, associations

我有一个`Tracker::Db::Service`具有以下关联的类：

```
has_many :source_links, class_name: :Link, foreign_key: :source_key, conditions: [ 'state_id = 1 AND source_object_id = 3' ]
has_many :target_links, class_name: :Link, foreign_key: :target_key, conditions: [ 'state_id = 1 AND target_object_id = 3' ]
has_many :work_order_targets, through: :source_links, source: :work_order_as_target, class_name: :WorkOrder
has_many :work_order_sources, through: :target_links, source: :work_order_as_source, class_name: :WorkOrder 
```

然后`Tracker::Db::Link`有这些关联：

```
belongs_to :work_order_as_target, class_name: :WorkOrder, foreign_key: :target_key, conditions: [ 'target_object_id = 11' ]
belongs_to :work_order_as_source, class_name: :WorkOrder, foreign_key: :source_key, conditions: [ 'source_object_id = 11' ] 
```

当我尝试从一个实例中遍历这些关联时，例如：`service.work_order_targets`，它工作得很好。

但是，如果我尝试在查询中包含/加入这些，我会遇到问题

```
Tracker::Db::Service.includes(:work_order_targets).limit(10)

Mysql2::Error: Unknown column 'target_object_id' in 'where clause': SELECT `change_workorder`.* FROM `change_workorder`  WHERE `change_workorder`.`id` IN (4262, 4239, 4058, 4062, 4258, 4242, 4240, 4256, 4241, 4253) AND (( target_object_id = 11)) 
```

它正在错误地构建查询。我尝试使用哈希语法来指定条件，但这也不起作用，它只是变成了 change_workorder.target_object_id。它在两种关系上都这样做`work_order_targets, work_order_sources`

`Tracker::Db::Service`有`id, name`
`Tracker::Db::Link`有`source_object_id, source_key, target_object_id, target_key`
`Tracker::Db::WorkOrder`_`id, name`

不幸的是，这是一个第 3 方应用程序数据库（开源项目，OTRS + ITSM 模块），所以我无法真正控制结构，我只是将我们的 Rails 应用程序连接到其中。

# git - Git / gerrit，推送远程拒绝未进行任何更改

> ID：13992229
> 
> 赞同：39
> 
> 时间：2012-12-21T14:49:11.337
> 
> 标签：git, gerrit

对提交进行了更改，执行了提交修改。推一下，我得到了错误：

```
! [remote rejected] master -> refs/for/master (no changes made) 
```

检查了提交消息中的更改 ID，它仍然是有效的提交。

我尝试更改文件，检查它是否显示为更改，然后添加到暂存区域并进行另一次提交修改。再次尝试推送并遇到相同的问题。没有这个想法。

编辑：这是推向 gerrit，而不是直接推向 git。

我在跑：

```
git push origin master:refs/for/master 
```

获取原产地详细信息的结果是（删除了公司详细信息）：

```
$ git remote show origin
* remote origin
  Fetch URL: ssh://lytee@gerrit.mycompany.net:29418/myrepo
  Push  URL: ssh://lytee@gerrit.mycompany.net:29418/myrepo
  HEAD branch: master
  Remote branch:
    master tracked
  Local branch configured for 'git pull':
    master rebases onto remote master
  Local ref configured for 'git push':
    master pushes to master (up to date) 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-09T16:01:00.947

这个问题是由于我之前执行的操作造成的。我正在尝试`push`一个新的变化，在一个仍然有待审查的变化之上，他的父母也有待审查。

```
 Trunk ------ Parent A ----- Parent B ----- New change
(merged)     (unmerged)     (unmerged) 
```

我曾经`cherry-pick`在本地获取这两个更改（父 A 和父 B），然后`cherry-pick`在尝试`push`. 这就是导致问题的原因，因为我个人的改变本质上是试图重写历史。

正确的过程是在中继线时仅对`pull`父 B 进行处理。这会自动拉起主干和它之间的任何提交（在这种情况下只是父 A）。然后`cherry-pick`我的新变化在此之上并且`push`会正常工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-15T19:00:25.643

请在此处参考有关此问题的官方文档：

[https://gerrit-review.googlesource.com/Documentation/error-no-new-changes.html](https://gerrit-review.googlesource.com/Documentation/error-no-new-changes.html)

我有同样的问题，我的问题是我推送了更改，然后放弃了合并，然后我做了一些调整，**错误地**修改了我的提交并再次推送。那就是我得到错误的地方。

我的修复：

1.  如果您只是想快速解决此问题，请`git commit --amend`删除现有的`change-Id`，假设您设置了 git 挂钩，您可以完成提交，并且`change-Id`应该为您分配一个新的。
2.  进入 gerrit 并搜索你现有的`change-Id`，找出发生了什么，并相应地修复。（受到推崇的）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-28T17:32:30.590

我遇到过同样的问题。只是更改了提交消息并推送了代码。它是成功的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-15T02:38:12.937

如果您尝试更新一组评论，每个评论都有自己想要维护的更改 ID（例如，在您交换两个提交的顺序的 rebase 之后），如果其中的一些提交可能会被拒绝桩保持不变。您应该通过改写提交或类似的东西来强制生成新的哈希。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T20:51:24.960

听起来您所做的一切都是正确的，只要验证您已经做出了 Gerrit 应该接受的更改。

`git push origin master:refs/for/master`

也许这就是问题所在？如果您的更改不在您的本地版本的主分支上，则您没有推送您的更改。而是尝试：

`git push origin HEAD:refs/for/master`

`HEAD`是一个快捷方式，表示您在 git 中的当前提交。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-25T09:30:59.327

我遇到过同样的问题。与此同时，还有另一个提交没有合并到 master 中，正在 gerrit 审查中并在 gerrit 中重新设置。即代码推送审查。在 gerrit 中重新设置基础并等待完成。审查代码后，我就可以毫无错误地推送。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-25T20:17:27.223

我有相同的错误消息，但我试图推送的更改是在原始更改集的不同提交之上的（做了一些魔术`git cherry-pick`，似乎 gerrit 不喜欢它）。我放弃了最初的更改，然后在意识到可以解决问题时重新打开它，但未能将`git review`.

此时，我的快速解决方案是放弃 gerrit 网站的原始更改，并通过删除`change-Id: sha1`提交消息的最后一行来创建新的更改`git commit --amend`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-16T10:19:30.217

如果推送的提交与此更改的当前补丁集相同，则 Gerrit 拒绝将提交作为更改的新补丁集推送此错误消息。

推送的提交被认为与当前补丁集相同，如果

*   提交中的文件，
*   提交消息，
*   提交的作者和
*   提交的父母

都是相同的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-06T15:56:54.983

当我用 a 推送时出现此错误

```
git commit -m  "updated message" 
```

忘了包括 --amend

```
git commit --amend -m  "updated message" 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-11-20T16:48:12.383

我的简单解决方案是更新项目，然后提交和推送。

这个帮助，因为 master 和你的本地分支不一致。这可能是，当您可能基于 gerrit...

# spring - 在 Spring Junit 测试中获取“没有正在进行的事务”

> ID：13992230
> 
> 赞同：0
> 
> 时间：2012-12-21T14:49:10.327
> 
> 标签：spring, hibernate, junit, transactions

我正在使用 Spring 3.1.1.RELEASE、JUnit 4.8.1、Hibernate 4.1.0.Final 和 hibernate-jpa-2.0-api。我正在尝试运行这个 JUnit 测试……</p>

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:test-context.xml" })
public class UserDaoImplTest extends AbstractTransactionalJUnit4SpringContextTests
{
    …
    @Test
    public final void testSave()
    {
        final User user = new User();
        user.setFirstName(testProps.getProperty("test.user.first.name"));
        user.setLastName(testProps.getProperty("test.user.last.name"));
        user.setMiddleName(testProps.getProperty("test.user.middle.name"));
        user.setPassword(testProps.getProperty("test.user.password"));
        final Role role = rolesDao.findRoleByName(testProps.getProperty("test.role.teacher.name"));
        user.setRole(role);
        user.setUrl(testProps.getProperty("test.user.url"));
        user.setUserName(testProps.getProperty("test.user.username"));
        final User savedUser = userDao.save(user);
        Assert.assertNotNull(savedUser.getId());
        final User foundUser = userDao.findById(savedUser.getId());
        Assert.assertEquals(savedUser, foundUser);
    }   // testSave 
```

在“userDao.save”行上，我得到了一个完整的异常。我认为“AbstractTransactionalJUnit4SpringContextTests”保证每个测试都是事务性的？我能做些什么来解决这个问题？

```
javax.persistence.TransactionRequiredException: no transaction is in progress
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:971)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    at $Proxy30.flush(Unknown Source)
    at org.mainco.subco.user.repo.UserDaoImpl.save(UserDaoImpl.java:118)
    at org.mainco.subco.user.test.repo.UserDaoImplTest.testSave(UserDaoImplTest.java:226)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

以下是 test-context.xml 文件的内容...

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-3.1.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <context:component-scan base-package="org.mainco.subco" />

    <!-- Define hashing properties -->
    <bean id="localPropertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>classpath:encryption.properties</value>
        </property>
    </bean>

    <!-- Define test properties -->
    <util:properties id="applicationProperties" location="classpath:test.properties" />

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.h2.Driver" />
        <property name="url" value="jdbc:h2:~/ebook-test" />
        <property name="username" value="" />
        <property name="password" value="" />
    </bean> 

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
        <property name="persistenceXmlLocation" value="classpath*:META-INF/test-persistence.xml" />
        <property name="persistenceUnitName" value="usersTestingDatabase" />
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="sharedEntityManager"
        class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="bcProvider" class="${hash.provider.class}" />

    <bean id="jasyptStringDigester" class="org.jasypt.digest.StandardStringDigester">
        <property name="algorithm">
            <value>${digest.algorithm}</value>
        </property>
        <property name="provider">
            <ref bean="bcProvider" />
        </property>
        <property name="saltGenerator">
            <ref bean="saltGenerator" />
        </property>
        <property name="saltSizeBytes" value="${salt.bytes.length}" />
    </bean>

    <bean id="saltGenerator" class="${salt.generator.class}" />

    <!-- This Spring Security-friendly PasswordEncoder implementation will -->
    <!-- wrap the StringDigester instance so that it can be used from -->
    <!-- the security framework. -->
    <bean id="passwordEncoder"
        class="org.jasypt.springsecurity3.authentication.encoding.PasswordEncoder">
        <property name="stringDigester">
            <ref bean="jasyptStringDigester" />
        </property>
    </bean>

    <jdbc:embedded-database id="embedded" type="H2" />
    <jdbc:initialize-database data-source="dataSource">
        <jdbc:script location="classpath:db-test-data.sql" />
    </jdbc:initialize-database>

</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:33:36.793

毕竟，问题在于 userDao 和 rolesDao 对象使用不同的实体管理器，一个是从上下文自动装配的，另一个是在测试中实例化的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:47:19.237

您的配置接缝有问题：您有两个数据源！一个明确的定义：

```
 <bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:~/ebook-test" />
    <property name="username" value="" />
    <property name="password" value="" />
</bean> 
```

和一个隐式定义：

```
<jdbc:embedded-database id="embedded" type="H2" />
<jdbc:initialize-database data-source="dataSource">
    <jdbc:script location="classpath:db-test-data.sql" />
</jdbc:initialize-database> 
```

当我像您一样进行测试时，我的设置如下所示（并且有效）：

```
<jdbc:embedded-database id="dataSource" type="H2" >
    <jdbc:script location="classpath:ddlAdditional_h2.sql" />       
</jdbc:embedded-database>   

<bean
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    id="entityManagerFactory">
    <property name="persistenceUnitName" value="testH2DbPersistenceUnit" />
    <property name="dataSource" ref="dataSource" />

    <!-- this is important to connect JPA and JdbcTemplate transaction control -->
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="false" />
        </bean>
    </property>
</bean>

<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager" /> 
```

* * *

*顺便说一句：添加`@Transactional`到单个测试方法或您的测试类（这就像将它添加到所有测试方法）。然后你就不需要再扩展`AbstractTransactionalJUnit4SpringContextTests`了。*

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:test-context.xml" })
@Transactional
public class UserDaoImplTest {

   @Test  
   public test() {...}
} 
```

然后测试方法将在最后回滚的事务中运行。

# html - CSS3 加载圈

> ID：13992231
> 
> 赞同：2
> 
> 时间：2012-12-21T14:49:12.183
> 
> 标签：html, css, css-animations

我有一个有 3 个圆圈的 CSS3 圆圈加载器。我遇到了问题 每个圆圈（从第一个圆圈开始）应该在几秒钟后淡出，可能使用 CSS 动画。任何帮助表示赞赏。

[jsFiddle](http://www.jsfiddle.net/8kQ2u/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:22:58.033

I'd go a slightly different route. Only made for webkit but you can alter as needed: [http://jsfiddle.net/8kQ2u/17/](http://jsfiddle.net/8kQ2u/17/)

```
@-webkit-keyframes fades {
    0%, 100% { 
       opacity: 1;
    }
    50% {
       opacity: 0;
    }
}

.circle span  {
  display: inline-block;
  width: 15px;
  height: 15px;
  margin: 9.975em auto;
  background: #dbdbdb;
  -webkit-border-radius: 50px;
  -moz-border-radius: 50px;
  -ms-border-radius: 50px;
  -o-border-radius: 50px;
  border-radius: 50px;
  -webkit-animation-duration: 1.5s;
  -webkit-animation-name: fades;
  -webkit-animation-iteration-count: infinite;
}

.circle span:nth-child(2) {
    -webkit-animation-delay: 0.2s;
}

.circle span:nth-child(3) {
    -webkit-animation-delay: 0.4s;
}
​ 
```

`:nth-child` here is fine since I'm pretty sure it has full support in browsers that support `@keyframes`. You could use the sibling selector if you prefered (`+`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:32:56.070

使用关键帧就可以了：http: [//jsfiddle.net/Nux3z/](http://jsfiddle.net/Nux3z/)

几个细节：

```
1) Use of :nth-child, or :first-child, etc to target your elements
2) Timing of animations: I'm using 1.7, 2.7, rather than 0.7s, 1.4s because I'm allowing for the 1s of fade to finish NOT simply doubling/tripling the time each element takes to animate.
3) Not a solution for IE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:53:45.683

正如其他人所说，在这里使用*动画*和*时间*是必不可少的。
实际上，每个圆圈都使用**相同的动画**，
但是您必须对每个圆圈应用不同的**延迟**。

见下文（我也在使用`nth-child`代替`first-child`）：

```
.circle span {
    /** The same animation to each circle **/
    -webkit-animation: circleFade 3s linear infinite;
}

/** Different animation delays **/
.circle span:nth-child(1) { -webkit-animation-delay: 1s; }
.circle span:nth-child(2) { -webkit-animation-delay: 2s; }
.circle span:nth-child(3) { -webkit-animation-delay: 3s; }

/** Animation **/
@-webkit-keyframes circleFade {
     0% { background: #ddd; }
    25% { background: #999; }
    35% { background: #999; }
    60% { background: #ddd; }
}​ 
```

[[看小提琴]](http://jsfiddle.net/Nux3z/1/)
[[现在看*花哨*的小提琴]](http://jsfiddle.net/Nux3z/2/)

# android - 捕获 BluetoothSocket InputStream.read() 超时的线程

> ID：13992234
> 
> 赞同：4
> 
> 时间：2012-12-21T14:49:38.527
> 
> 标签：android, multithreading, bluetooth, inputstream

我一直在使用`InputStream.read( byte[] b, int off, int len )`方法来读取数据，但现在遇到了超时问题。我有时会期待阅读超时，并且应该让程序在超时后相应地调整自己。我试图实现一个线程，但我对线程一无所知，无法让它工作。我还想补充一点，这个线程正在**另一个线程**中初始化。我不确定这意味着什么，但它可能会导致问题。

我的初始代码在我需要阅读的大部分时间都有效，但是每当我期待超时时，我的程序都会在`read()`调用时冻结并且永远不会超时。当我实现这个新代码时，我的初始代码工作的时间现在超时了。我使用`Thread.wait(500)`我假设是 500 毫秒，但我找不到任何包含该`wait()`函数的 Javadocs。[这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)和[这里](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)。

[与此相关](https://stackoverflow.com/questions/8204298/android-bluetooth-socket-tutorial-for-non-blocking-communication)的其他[帖子](https://stackoverflow.com/questions/6346649/android-bluetoothsocket-timing-out)：[1、2、3](https://stackoverflow.com/questions/10522767/implement-a-timeout-in-bluetoothsocket-inputstream-read-in-android)。

我还研究了为 . 声明超时，但我在[文档](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)`BluetoothSocket`中的任何地方都找不到它。

这是我的初始代码的样子：

```
public void run(int length) throws IOException {
        buffer = new byte[1024];
        try {
                bytes = mmInStream.read(buffer, 0, length);
                mHandler.obtainMessage(MainMenu.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
        } catch (IOException e) {
                Message msg = mHandler.obtainMessage(MainMenu.MESSAGE_TOAST);
                Bundle bundle = new Bundle();
                bundle.putString( TOAST, "Device has disconnected from the Bluetooth Module." );
                msg.setData(bundle);
                mHandler.sendMessage(msg);
                connectionLost();
                BluetoothService.this.start();
        } 
```

这是我试图实现的：

```
public void run(int length) throws IOException {
        buffer = new byte[1024];
        length1 = length;
        Thread myThread = new Thread(new Runnable() {
            public void run() {
                try {
                    bytes = mmInStream.read( buffer, 0, length1 );
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });

        synchronized (myThread) {
            myThread.start();
            try {
                myThread.wait(500);
                if(myThread.isAlive()) {
                    mmInStream.close();
                    Log.i( "InStream", "Timeout exceeded!");
                }
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
       try {
            myThread.run();
            mHandler.obtainMessage(MainMenu.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
       } catch (IOException e) {
                Message msg = mHandler.obtainMessage(MainMenu.MESSAGE_TOAST);
                Bundle bundle = new Bundle();
                bundle.putString( TOAST, "Device has disconnected from the Bluetooth Module." );
                msg.setData(bundle);
                mHandler.sendMessage(msg);
                connectionLost();
                BluetoothService.this.start();
       } 
```

编辑：

所以我正在尝试重新创建

```
buffer = new byte[1024];
bytes = mmInStream.read(buffer, 0, length); 
```

我做了以下事情：

```
Scanner scan = new Scanner(new InputStreamReader(mmInStream));
String readIn;
try {
    readIn = scan.next();
    bytes = 5; // I tried with or without this, since I do not think it matters...
    buffer = readIn.getBytes( Charset.forName( "US-ASCII" ) );
} 
```

稍后在我的代码中，我进行了此调用....抱歉再次编辑，`buf=read( 5 )`调用转到上面显示的内容。

```
byte[] buf  = buffer;
write( a );
buf = read( 5 );
Log.i(TAG,  "Before buf[5]" );
try {
     buf[5] = '\0';
} catch( NullPointerException e ) {
    return false;
} 
```

当我使用原始方法时，它`buf[5]`可以很好地传递这个调用。但是当我使用新方法时，它给了我一个`IndexOutOfBoundsException`在那个地方。我错过了什么吗？预期的输入应该是`CMD\r\n`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:39:05.333

蓝牙聊天示例在这方面确实很差，您应该使用输入扫描仪而不是 mmInStream.read。这是我使用的，它工作得相当好......

对于您的用例，您跳过整个缓冲区和字节并写入和读取（当您使用扫描仪和 inputstreamreader 为您处理这些内容时，无需使用其中的任何一个）......换句话说，下面的代码需要注意这一切都是为了你。我将您的分隔符更改为 CRLF。下面的代码所做的是您发送一个字符串，它会写入然后读取。如果您不需要向远程设备发送任何内容，只需从 scan = new Scanner 开始。每次读取一行并以 \r\n 结尾时，它会将其存储在字符串 instring 中。

所以如果你想发送“a”，你会写

```
String readIn = beginListenForData("a"); 
```

a 将在 mmOutStream 下发送，然后扫描仪将读取 mmInStream 并收集所有字符，然后一旦它看到 CRLF，它将返回它读取的字符并将它们返回到您的 readIn 字符串中。有道理？

```
private String beginListenForData(String msg0) {
    msg0 += "\r"; //this adds a return character to the string, you can omit this if you just send an a and the remote device understands what that means.
    String instring = "";
    try {
        mmOutStream.write(msg0.getBytes());
    } catch (IOException ex) {              
        stop();
    }
    scan = new Scanner(new InputStreamReader(mmInStream));
    scan.useDelimiter(Pattern.compile("[\\r\\n]+"));
    instring = scan.next();
    scan = null;
    return instring;
} 
```

# android - 将 ActionBarSherlock 作为库添加到项目

> ID：13992240
> 
> 赞同：2
> 
> 时间：2012-12-21T14:50:12.063
> 
> 标签：android, android-emulator, intellij-idea, actionbarsherlock

我对新的 ActionBarSherlock 有疑问。我必须将它链接到我的项目并在支持 android API 7 级及以上的项目中使用它的功能（片段等）。

我用我的项目在 intelij 中创建了一个模块，并将 ActionBarSherlock 库项目链接到它。一切看起来都不错，项目正确重建，将有效的 apk 部署到模拟器，但是当我尝试运行应用程序时，我得到了这样的结果：

```
WARN/dalvikvm(540): Unable to resolve superclass of Lcom/mobileinsight/common/CustomActivity; (134)
WARN/dalvikvm(540): Link of class 'Lcom/mobileinsight/common/CustomActivity;' failed
WARN/dalvikvm(540): Unable to resolve superclass of Lcom/mobileinsight/ui/SplashActivity; (175)
WARN/dalvikvm(540): Link of class 'Lcom/mobileinsight/ui/SplashActivity;' failed
WARN/dalvikvm(540): threadid=3: thread exiting with uncaught exception (group=0x4001b188)`

ERROR/AndroidRuntime(540): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mobileinsight/com.mobileinsight.ui.SplashActivity}: java.lang.ClassNotFoundException: com.mobileinsight.ui.SplashActivity in loader dalvik.system.PathClassLoader@45f352e8 
```

当应用程序尝试实例化扩展`SherlockActivity`或`FragmentSherlockActivity`

有人可以帮我解决这个问题吗？

谢谢，方舟

# javascript - 尝试制作灯箱，出现 Jquery 语法错误

> ID：13992242
> 
> 赞同：0
> 
> 时间：2012-12-21T14:50:34.760
> 
> 标签：javascript, jquery, html

当您单击页面上的标签时，我正在尝试显示一个灯箱。基本上，js 试图获取 href 并使用它来获取宽度。（在 js 和 jquery 方面不是最好的）所以任何帮助都会非常感激。

我得到的错误：

> 错误：语法错误，无法识别的表达式：#?w=500, a[name=?w=500] @ [http://code.jquery.com/jquery-latest.js:4680](http://code.jquery.com/jquery-latest.js:4680)

html

```
<a href="#?w=500" rel="diff" class="poplight">
      <h1 class="blue">diff</h1>
</a>
<div id="diff" class="popup_block">
   <p>text in light box</p>
</div> 
```

查询：

```
<script type="text/javascript">
        $(document).ready(function() {
        //When you click on a link with class of poplight and the href starts with a # 
        $('a.poplight[href^=#]').click(function() {
            var popID = $(this).attr('rel'); //Get Popup Name
            var popURL = $(this).attr('href'); //Get Popup href to define size
            window.alert('2 test in the popup function ');
            //Pull Query & Variables from href URL
            var query= popURL.split('?');
            var dim= query[1].split('&');
            var popWidth = dim[0].split('=')[1]; //Gets the first query string value

            //Fade in the Popup and add close button
            $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a href="#" class="close" style="float:right;">Close</a>');

            //Define margin for center alignment (vertical   horizontal) - we add 80px to the height/width to accomodate for the padding  and border width defined in the css
            var popMargTop = ($('#' + popID).height() - 80) / 2;
            var popMargLeft = ($('#' + popID).width()) / 2;

            //Apply Margin to Popup
            $('#' + popID).css({
                'margin-top' : -popMargTop,
                'margin-left' : -popMargLeft
            });
            //Fade in Background
            $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
            $('#fade').css({'filter' : 'alpha(opacity=90)'}).fadeIn(); //Fade in the fade layer - .css({'filter' : 'alpha(opacity=90)'}) is used to fix the IE Bug on fading transparencies 

            return false;
        });

        //Close Popups and Fade Layer
        $('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
            $('#fade , .popup_block').fadeOut(function() {
                $('#fade, a.close').remove();  //fade them both out
            });
            return false;
        });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:56:36.550

这不是一个直接的答案，但您知道您可以创建自己的属性吗？

```
<a popupwidth="500" rel="diff" class="poplight">
    <h1 class="blue">diff</h1>
</a> 
```

可以正常工作：

```
$('a.poplight[popupwidth]').click(function() {
    //...
    var popWidth = $(this).attr('popupwidth');
    //...
} 
```

您的 HTML 编辑器可能会抱怨，但这是完全合法的 HTML，并且可以正常运行。如果您想符合 XML，您可以创建自己的 XML 模式并通过命名空间引用它。

**架构**

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="XhtmlAddons"
    targetNamespace="http://somekindofid/XhtmlAddons.xsd"
    elementFormDefault="qualified"
    xmlns="http://somekindofid/XhtmlAddons.xsd"
    xmlns:mstns="http://somekindofid/XhtmlAddons.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:attribute name="popupwidth" type="xs:int" />

</xs:schema> 
```

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:addon="http://somekindofid/XhtmlAddons.xsd">
    <!-- ... -->
    <a addon:popupwidth="500" rel="diff" class="poplight">
        <h1 class="blue">diff</h1>
    </a>
    <!-- ... -->
</html> 
```

**jQuery***

```
$('a.poplight[addon\\:popupwidth]').click(function() {
    //...
    var popWidth = $(this).attr('addon\\:popupwidth');
    //...
} 
```

但是请注意，jQuery 本身并不支持 XML 命名空间，因此如果您进行任何高级操作，您可能会遇到麻烦。上面的第一个示例（没有名称空间）是首选，除非您出于其他原因确实需要 XML 兼容性。

* * *

**更新**

如果您针对 HTML 5 进行验证，则不应使用该模式。只需在您的自定义属性前面加上“data-”：

**HTML**

```
<a data-popupwidth="500" rel="diff" class="poplight">
    <h1 class="blue">diff</h1>
</a> 
```

**jQuery**

```
$('a.poplight[data-popupwidth]').click(function() {
    //...
    var popWidth = $(this).attr('data-popupwidth');
    //...
} 
```

请参阅Jon Resig 的[HTML 5 数据属性](http://ejohn.org/blog/html-5-data-attributes/)

# sql - How to select lowest level in hierarchy from table

> ID：13992244
> 
> 赞同：4
> 
> 时间：2012-12-21T14:50:46.553
> 
> 标签：sql, sql-server

I have a table with parent/child relationship:

```
Table A
Column Id int
Column Parent_Id int
Column Description text 
```

An example set of data would be:

```
999, NULL, 'Corp.'
998, 999, 'Div1',
997, 999, 'Div2', 
510, 998, 'Child Div1A',
110, 997, 'Child Div2A',
120, 997, 'Child Div2B', 
```

My query needs to return the lowest set of children, given a parent. So, for example, if given 999, I would return 510, 110, 120\. But given 997, I would return only 110 and 120\. If given 110, nothing would return. I can't figure out how to format my query quite correctly. I started by JOIN-ing the table on itself, but it seems like that would only get me 1 level down when I actually neeed to go N-levels down.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:01:19.747

```
Declare @t Table(ID int,Parent_ID int,Description varchar(20))

insert into @t values(999, NULL, 'Corp.')
insert into @t values(998, 999, 'Div1')
insert into @t values(997, 999, 'Div2')
insert into @t values(510, 998, 'Child Div1A')
insert into @t values(110, 997, 'Child Div2A')
insert into @t values(120, 997, 'Child Div2B')

;WITH Rollups AS (
    SELECT Id, Parent_Id, Description 
    FROM @t WHERE ID = 999
    UNION ALL
    SELECT parent.Id, parent.Parent_Id, child.Description
    FROM @t parent 
    INNER JOIN Rollups child ON child.Id = parent.Parent_Id
)
SELECT *
FROM Rollups
Where not Exists(Select * from @t where Parent_Id=Rollups.ID) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T14:58:30.793

I haven't tested this but I think it's what you need - using a `CTE` with `UNION` (I've cut it down from a more complex example that I use):

```
;WITH CTE (ChildID, [Text], ParentID)
AS
(
    SELECT ChildID, [Text], ParentID
    FROM Table1
    WHERE ParentId IS NULL --or = @ParentID
    UNION ALL
    SELECT T1.ChildID, T1.[Text], T1.ParentID
    FROM Table1 AS T1
    INNER JOIN CTE
    ON T1.ParentID = CTE.ChildID
)
SELECT ChildID, [Text]
FROM CTE 
```

# ios - iOS - 逐帧读取视频文件，图像处理，然后另存为新视频文件

> ID：13992251
> 
> 赞同：4
> 
> 时间：2012-12-21T14:50:59.983
> 
> 标签：ios

我尝试从 iPhone 相册中逐帧读取视频。图像处理后，我会将它们保存为新视频。我运行我的代码没有任何错误，但相册中没有新视频。

这是我的代码。

```
// Video writer init
- (BOOL)setupAssetWriterForURL:(CMFormatDescriptionRef)formatDescription
{
    float bitsPerPixel;
    CMVideoDimensions dimensions = CMVideoFormatDescriptionGetDimensions(formatDescription);
    int numPixels = dimensions.width * dimensions.height;
    int bitsPerSecond;

    if ( numPixels < (640 * 480) )
        bitsPerPixel = 4.05; 
    else
        bitsPerPixel = 11.4; 

    bitsPerSecond = numPixels * bitsPerPixel;

    NSDictionary *videoCompressionSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                              AVVideoCodecH264, AVVideoCodecKey,
                                              [NSNumber numberWithInteger:dimensions.width], AVVideoWidthKey,
                                              [NSNumber numberWithInteger:dimensions.height], AVVideoHeightKey,
                                              [NSDictionary dictionaryWithObjectsAndKeys:
                                               [NSNumber numberWithInteger:bitsPerSecond], AVVideoAverageBitRateKey,
                                               [NSNumber numberWithInteger:30], AVVideoMaxKeyFrameIntervalKey,
                                               nil], AVVideoCompressionPropertiesKey,
                                              nil];
    if ([assetWriter canApplyOutputSettings:videoCompressionSettings forMediaType:AVMediaTypeVideo]) {
        assetWriterVideoIn = [[AVAssetWriterInput alloc] initWithMediaType:AVMediaTypeVideo outputSettings:videoCompressionSettings];
        assetWriterVideoIn.expectsMediaDataInRealTime = YES;
        assetWriterVideoIn.transform = [self transformFromCurrentVideoOrientationToOrientation:self.referenceOrientation];
        if ([assetWriter canAddInput:assetWriterVideoIn])
            [assetWriter addInput:assetWriterVideoIn];
        else {
            NSLog(@"Couldn't add asset writer video input.");
            return NO;
        }
    }
    else {
        NSLog(@"Couldn't apply video output settings.");
        return NO;
    }

    return YES;
} 
```

阅读视频

```
- (void)readMovie:(NSURL *)url
{
    AVURLAsset * asset = [AVURLAsset URLAssetWithURL:url options:nil];
    [asset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:@"tracks"] completionHandler:
     ^{
         dispatch_async(dispatch_get_main_queue(),
                        ^{
                            AVAssetTrack * videoTrack = nil;
                            NSArray * tracks = [asset tracksWithMediaType:AVMediaTypeVideo];
                            if ([tracks count] == 1)
                            {
                                videoTrack = [tracks objectAtIndex:0];

                                NSError * error = nil;

                                // _movieReader is a member variable
                                AVAssetReader *movieReader = [[AVAssetReader alloc] initWithAsset:asset error:&error];
                                if (error)
                                    NSLog(@"_movieReader fail!\n");

                                NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey;
                                NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA];
                                NSDictionary* videoSettings = 
                                [NSDictionary dictionaryWithObject:value forKey:key]; 

                                [movieReader addOutput:[AVAssetReaderTrackOutput 
                                                         assetReaderTrackOutputWithTrack:videoTrack 
                                                         outputSettings:videoSettings]];
                                [movieReader startReading];

                                while ([movieReader status] == AVAssetReaderStatusReading)
                                {
                                    AVAssetReaderTrackOutput * output = [movieReader.outputs objectAtIndex:0];
                                    CMSampleBufferRef sampleBuffer = [output copyNextSampleBuffer];
                                    if (sampleBuffer)
                                    {
                                        if ( !assetWriter ) {
                                            outputURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%llu.mov", NSTemporaryDirectory(), mach_absolute_time()]];

                                            NSError *error = nil;
                                            assetWriter = [[AVAssetWriter alloc] initWithURL:outputURL fileType:(NSString *)kUTTypeQuickTimeMovie error:&error];
                                            if (error)
                                                [self showError:error];

                                            if (assetWriter) {
                                                CMFormatDescriptionRef formatDescription = CMSampleBufferGetFormatDescription(sampleBuffer);
                                                [self setupAssetWriterForURL:formatDescription];
                                            }
                                        }
                                        CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

                                        CVPixelBufferLockBaseAddress(imageBuffer,0);

                                        int bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
                                        int bufferWidth = CVPixelBufferGetWidth(imageBuffer);
                                        int bufferHeight = CVPixelBufferGetHeight(imageBuffer);
                                        unsigned char *pixel = (unsigned char *)CVPixelBufferGetBaseAddress(imageBuffer);

                                        for( int row = 0; row < bufferHeight; row++ ) {
                                            for( int column = 0; column < bufferWidth; column++ ) {

                                                pixel[0] = (pixel[0]+pixel[1]+pixel[2])/3;
                                                pixel[1] = (pixel[0]+pixel[1]+pixel[2])/3;
                                                pixel[2] = (pixel[0]+pixel[1]+pixel[2])/3;

                                                pixel += 4;
                                            }
                                        }

                                        CVPixelBufferUnlockBaseAddress(imageBuffer,0);

                                        if ( assetWriter ) {
                                            [self writeSampleBuffer:sampleBuffer ofType:AVMediaTypeVideo];
                                        }

                                        CFRelease(sampleBuffer);
                                    }

                                }
                                if (assetWriter) {
                                    [assetWriterVideoIn markAsFinished];
                                    assetWriter = nil;
                                    [assetWriter finishWriting];
                                    assetWriterVideoIn = nil;
                                    assetWriter = nil;

                                    [self saveMovieToCameraRoll];
                                }
                                else {
                                    [self showError:[assetWriter error]];
                                }

                            }
                        });
     }];

}
- (void) writeSampleBuffer:(CMSampleBufferRef)sampleBuffer ofType:(NSString *)mediaType
{
    if ( assetWriter.status == AVAssetWriterStatusUnknown ) {

        if ([assetWriter startWriting]) {
            [assetWriter startSessionAtSourceTime:CMSampleBufferGetPresentationTimeStamp(sampleBuffer)];
        }
        else {
            [self showError:[assetWriter error]];
        }
    }

    if ( assetWriter.status == AVAssetWriterStatusWriting ) {

        if (mediaType == AVMediaTypeVideo) {
            if (assetWriterVideoIn.readyForMoreMediaData) {
                if (![assetWriterVideoIn appendSampleBuffer:sampleBuffer]) {
                    [self showError:[assetWriter error]];
                }
            }
        }

    }
}
- (void)saveMovieToCameraRoll
{
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library writeVideoAtPathToSavedPhotosAlbum:outputURL
                                completionBlock:^(NSURL *assetURL, NSError *error) {
                                    if (error){
                                        [self showError:error];
                                    NSLog(@"save fail");
                                }
                                    else
                                    {
                                        [self removeFile:outputURL];
                                        NSLog(@"!!!");
                                    }
                                    });
                                }];
}
- (void)removeFile:(NSURL *)fileURL
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *filePath = [fileURL path];
    if ([fileManager fileExistsAtPath:filePath]) {
        NSError *error;
        BOOL success = [fileManager removeItemAtPath:filePath error:&error];
        if (!success)
            [self showError:error];
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T11:04:10.160

我有点晚了，但它可能对其他人有帮助，代码几乎是正确的，但只需注释一行代码就可以了，它在 readMovie: 方法中

```
 //assetWriter = nil; commented line  
                               [assetWriter finishWriting];
                                assetWriterVideoIn = nil;
                                assetWriter = nil;

                                [self saveMovieToCameraRoll];
                            }` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:56:42.923

这是从图像创建电影的答案[。](https://stackoverflow.com/questions/3741323/how-do-i-export-uiimage-array-as-a-movie/3742212#3742212)

希望你能从那里得到一些帮助。

# svn - SVN统计输出路径

> ID：13992252
> 
> 赞同：2
> 
> 时间：2012-12-21T14:51:03.447
> 
> 标签：svn

我发现这个对 SVN 非常有用的 sta 生成器：[SVNstat](http://www.statsvn.org/)

我不明白如何使用它......我做了这些步骤：

1.  `svn log https://myHost:8443/svn/myFolder/trunk -v --xml > logfile.log`
2.  `java -jar C:\mySVNpath\statsvn.jar C:\myLogPath\logfile.log`

这将在同一目录中创建文件！我想把它放在我的文件夹中。有没有快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:51:41.683

是的，试试这个：

```
svn log https://myHost:8443/svn/myFolder/trunk -v --xml > logfile.log
java -jar C:\mySVNpath\statsvn.jar C:\myLogPath\logfile.log C:\outPutPath 
```

# c# - 单击 asp ImageButton 将我返回到页面顶部：错误

> ID：13992257
> 
> 赞同：1
> 
> 时间：2012-12-21T14:51:31.467
> 
> 标签：c#, asp.net

我正在尝试允许用户使用 onclick 编辑按钮编辑页面上的信息

页面重新加载，页面被带回顶部，每次点击按钮，对用户来说似乎是一个巨大的不便

```
 <% Page directives ... MaintainScrollPositionOnPostBack="True" .. %> 
```

我的页面标签在顶部，但它仍然跳回顶部有什么建议吗？

我试过把它放在webconfig中

```
 <pages maintainScrollPositionOnPostBack="True" > 
```

我也尝试在页面上放置一个 asp:Page 标签

```
 <asp:Page MaintainScrollPositionOnPostBack="true" .... /> 
```

并且仍然将位置放在页面顶部重新加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:39:32.293

你应该把它添加到你的 web.config 中。应该是你的答案

```
<pages maintainScrollPositionOnPostBack="True"> 
```

# ruby-on-rails - 如何设置 Twitter Bootstrap 的预输入样式（例如设置背景颜色）

> ID：13992261
> 
> 赞同：2
> 
> 时间：2012-12-21T14:51:52.710
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails, bootstrap-sass

如何在使用 Bootstrap 的“typeahead”自动完成时为下拉菜单中的活动项目设置自定义背景颜色？

一个小问题，但让我沮丧了几个小时！

我通过 bootstrap-sass gem 在 Rails 3.2 应用程序中使用 Twitter Bootstrap。

我认为这是由下拉菜单样式控制的，但是

```
$dropdownLinkBackgroundHover: $customColor; 
```

不起作用。

我还尝试了更具体的方法

```
.typeahead .active > a, .typeahead .active > a:hover { background-color: $customColor; } 
```

但这似乎也不起作用。

我在看什么？还是我的修复程序应该起作用，而问题出在其他地方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T23:30:38.317

首先，该状态似乎`:hover`不用于预输入，而仅用于预输入`.active`，如[javascript 插件（github 上的 2.2.2）中所示](https://github.com/twitter/bootstrap/blob/v2.2.2/js/bootstrap-typeahead.js#L270)

因此，如果您更改颜色变量，它必须是`$dropdownLinkColorActive`变量（这将覆盖所有下拉列表，无论是否有来自预输入）。

* * *

其次，小技巧是背景不仅由`background-color`作为后备的 . 设置，而且由 .`background-image`从对 Less 混音的Less 调用中可以[看出](https://github.com/twitter/bootstrap/blob/v2.2.2/less/mixins.less#L422)[-](https://github.com/twitter/bootstrap/blob/v2.2.2/less/dropdowns.less#L103)底部显示的代码。

而且，如果您只想为预先输入的下拉菜单设置新颜色，则必须使用选择器覆盖颜色（至少现在是这样）。**`.typeahead +`**`.dropdown-menu .active > a`

[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/KHSss/1/)

这是您必须覆盖的内容：

```
.typeahead + .dropdown-menu .active > a,
.typeahead + .dropdown-menu .active > a:hover {
    color: #ffffff;
    background-color: #FF77FF;
    background-image: -moz-linear-gradient(top, #FF77FF, #FF44FF);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#FF77FF), to(#FF44FF));
    background-image: -webkit-linear-gradient(top, #FF77FF, #FF44FF);
    background-image: -o-linear-gradient(top, #FF77FF, #FF44FF);
    background-image: linear-gradient(to bottom, #FF77FF, #FF44FF);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FF77FF', endColorstr='#FF44FF', GradientType=0);
} 
```

* * *

这是基于 Twitter Bootstrap 2.2.2 的原始 less 版本，但对于 sass 移植版本，它肯定是相同的。

对于后代，这里是引用较少的代码（版本 2.2.2）：

```
/* called in .dropdown-menu .active > a */
#gradient > .vertical(@dropdownLinkBackgroundActive, darken(@dropdownLinkBackgroundActive, 5%));

/* mixin */
#gradient {
  .vertical(@startColor: #555, @endColor: #333) {
    background-color: mix(@startColor, @endColor, 60%);
    background-image: -moz-linear-gradient(top, @startColor, @endColor); // FF 3.6+
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(@startColor), to(@endColor)); // Safari 4+, Chrome 2+
    background-image: -webkit-linear-gradient(top, @startColor, @endColor); // Safari 5.1+, Chrome 10+
    background-image: -o-linear-gradient(top, @startColor, @endColor); // Opera 11.10
    background-image: linear-gradient(to bottom, @startColor, @endColor); // Standard, IE10
    background-repeat: repeat-x;
    filter: e(%("progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d', GradientType=0)",argb(@startColor),argb(@endColor))); // IE9 and down
  }
} 
```

# sql - 使用 DoctrineFixturesBundle 时，如何捕获加载它们时正在执行的确切 SQL？

> ID：13992263
> 
> 赞同：2
> 
> 时间：2012-12-21T14:51:57.987
> 
> 标签：sql, symfony, doctrine, fixtures

使用[DoctrineFixturesBundle](https://github.com/doctrine/DoctrineFixturesBundle)时，如何捕获加载它们时正在执行的确切 SQL？我有要加载的装置，但我无权访问该服务器——我需要向管理员发送一个 SQL 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T23:28:49.247

现在无法尝试，但是当您执行以下操作时会发生什么：

```
var_dump($object->flush()); 
```

在 load() 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:22:32.123

此捆绑包存在问题：

[https://github.com/doctrine/DoctrineFixturesBundle/issues/60](https://github.com/doctrine/DoctrineFixturesBundle/issues/60)

> 我不认为这是可能的，因为教义：fixtures:load 不处理 SQL，而是在 ORM 级别工作。

# javascript - 从服务器中的文档中获取 HTML 元素并在客户端动态显示它们

> ID：13992274
> 
> 赞同：1
> 
> 时间：2012-12-21T14:52:30.403
> 
> 标签：javascript, html, jquery

## 语境

我正在制作一个应用程序，用于在无法访问 Internet 的无线 LAN 中向大约 50 名观众展示同步的 HTML5 幻灯片。

我在其中一台计算机上运行 Node.js 服务器，并通过 Socket.IO 与 50 个客户端连接（顺便说一句，其中只有一个控制演示）。

硬件是一台家用无线 802.11b/g 路由器和 50 台移动设备（平板电脑、上网本、智能手机）。

## 问题

当幻灯片开始时，客户端需要很长时间（大约 10 分钟或更长时间才能看到 5 MB 幻灯片）才能看到它，因为路由器必须同时将完整的幻灯片发送给所有客户端。

## 我的幻灯片看起来如何

```
<html>
  <head>
    <title>My Slideshow</title>
    <script src="javascripts/slidesplayer.js"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
  </head>

  <body>    
    <div id="slides-containter">

      <div class="slide" id="slide_1">
        <!--Contents such as images, text, video and audio sources -->
      </div>

      <div class="slide" id="slide_2">
        <!--Contents -->
      </div>

      <!--A bunch of slides here-->

    </div>
    <script>
      // Here I load the slides
    </script>
  </body>
</html> 
```

## 我想做什么

一开始，我想加载`slides-container`元素完全为空。

然后，当我浏览幻灯片时，我想从服务器获取`div`代表下一张幻灯片，并将其附加到 DOM 以便只有在完成后，客户端才开始下载图片和其他**内容那张幻灯片**（因此，大大减少了我的网络过载）。

另一个相关的事实是，幻灯片（包括`slidesplayer.js`）是从将 PowerPoint 演示文稿解析为这种 HTML5 格式的外部软件自动生成的，我们将使用许多已经在 PowerPoint 中制作的演示文稿。

我的第一印象是我应该通过使用 jQuery-ajax 来实现这一点，但我不知道如何做到这一点，因为我的想法只是将`div.slide`元素复制到单独的文件中。

**更新：** [这个答案](https://stackoverflow.com/a/13992582/370798)建议在显示之前使用 jQuery 进行 DOM 操作。似乎 jQuery 每次操作 DOM 对象时都会请求资源，即使它没有插入到当前的 DOM 中。因此，一种可能的解决方案是仅使用字符串。[你可以在这个](https://stackoverflow.com/a/6485092/370798)和[这个](https://stackoverflow.com/a/2302157/370798)问题中看到更多关于这个问题的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:16:16.230

一种解决方案是将其视为前端解决方案。可以说，前端在任何时候都应该只吃尽可能多的东西。

我假设它是外部资源（图像等）而不是幻灯片标记本身，它占了这 5MB 的大部分，在这种情况下，DOM 不应该尝试调用这些资源，直到它们是必要的。

我建议将整个幻灯片文档提供给 ajax 调用，但只在每张幻灯片被调用时引入标记。像这样的东西：

```
$.ajax('path/to/slides', {
  async:    false,
  complete: function ajaxCallback(slidesDOM){
    // Pull out the individual slides from your slideshow HTML 
    $slides = $(slidesDOM).find('.slide');

    // For each of these...
    $slides.each(function prepareSlide(){
      // Store a reference to the slide's contents
      var $slideContent = $($(this).html());
      // Empty the contents and keep only the slide element itself
      var $slideWrapper = $(this).empty();

      $slideWrapper
        // Put the slide where you want it
        .appendTo('.slidesContainer')
        // And attach some kind of event to it 
        // (depending on how your slideware works, you might want to bind this elsewhere)
        .on('focus', function injectContent(){
          // Put the content in — NOW external resources will load
          $slideWrapper.append($slideContent);

          // Unbind this function trigger
          $slideWrapper.off('focus', injectContent);
        });
    })
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:05:02.820

1）您不应该使用 SocketIO 流式传输有效负载。插座是为低负载而设计的。如果您需要整体传输，我建议您使用标准的 HTTP AJAX 请求。然后，您可以使用 Socket.IO 来控制您所在的幻灯片。

2）尝试AngularJS。他们基本上已经为您完成了有关视图切换的所有思考（这基本上就是您正在做的事情）。他们有一个很棒的教程，这很有帮助。

3）为了简化您的 Socket 调用，我建议在客户端和服务器端都使用 ConversationJS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:36:01.477

正如我在问题中所说，操作 DOM 元素将导致浏览器下载资源，即使您没有在 DOM 中插入使用该资源的元素。

就我而言，我能做的最好的解决方案是至少对标签使用某种[延迟加载](http://en.wikipedia.org/wiki/Lazy_loading)`img`（但它可以很容易地扩展到其他标签，例如`audio`and `video`）。

我所做的是将`src`属性替换为另一个名称（在本例中），并向所有 img 标签`xsrc`添加自定义空属性。`src`

```
<img id="someImg" src="#" xsrc="foo.png"></img> 
```

然后，使用 jQuery，我将`src`属性值更改为`xsrc`需要下载图像时的属性值。

```
// When I want the image to be downloaded from the server
$('#someImg').attr( 'src' , $('#someImg').attr('xsrc') ) 
```

你可以在我已经提到的问题（[这个](https://stackoverflow.com/a/6485092/370798)和[这个](https://stackoverflow.com/a/2302157/370798)）中看到更多关于这个背后的想法。

# html - html文本编码

> ID：13992275
> 
> 赞同：0
> 
> 时间：2012-12-21T14:52:30.933
> 
> 标签：html, encode

我有一个文本区域，客户可以在其中输入注释（在他们的客户上）。但是，如果客户端输入包含 ' 的文本，则它会中断。

我对新的 linea \r \n 有同样的问题，但用这个修复了它

```
notes:'@Html.Raw(client.Notes.Replace(Environment.NewLine,"&#13;&#10"))'}); 
```

我该如何解决'问题？请举例

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:27:24.270

如果问题是当您使用 JQuery 将文本解释回 Dom 时，那么您可以使用这样的函数对所有字符串进行 html 编码

```
function htmlEscape(str) {
    return String(str)
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
} 
```

# jakarta-ee - 当我在家中导入项目然后发生此错误时，如何解决此错误

> ID：13992279
> 
> 赞同：-1
> 
> 时间：2012-12-21T14:52:50.897
> 
> 标签：jakarta-ee

说明 资源路径 位置 类型 目标运行时 Apache Tomcat v6.0 未定义。Online_suppprt_System_y 未知的多面项目问题

说明资源路径位置类型未绑定的类路径容器：项目'Online_suppprt_System_y'中的'JRE System Library [jdk1.6.0]' Online_supprt_System_y 构建路径构建路径问题

说明资源路径位置类型导入java.sql无法解析EmployeeMenu.jsp /Online_suppprt_System_y/WebContent line 6 JSP问题

说明资源路径位置类型未绑定的类路径容器：项目'Online_suppprt_System_y'中的'JRE System Library [jdk1.6.0]' Online_supprt_System_y 构建路径构建路径问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:06:37.530

至于您提到的任何内容，我可以猜测您之前在某处使用的 jre 和 apache tomcat 版本与您尝试导入的版本不同。

我建议您创建一个新项目并导航到工作区（不要使用 IDE 导航，手动这样做）然后复制文件夹 src、Web-Content ......并用新的替换它。

希望能帮助到你。

即使它仍然存在，右键单击eclipse中的项目根文件夹，检查jre和apache是​​否设置正确并且没有解除绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-10T17:39:42.007

所以，我遇到了同样的问题，我刚刚解决了它！

实际上，您要做的是在 IRAD 或 eclipse 中创建或修改您的项目，并使用 tomcat 或 websphere 以及在将旧服务器导入新 IDE 时搜索旧服务器。

为了解决这个问题，您需要转到项目外观并单击运行时并取消选中 wps v6.0 并单击下面的新建并选择您已配置的服务器（在我的情况下，它是 Tomcat 7）和 BOOM！。 .. 效果很好 B)[检查图像](https://i.stack.imgur.com/mlTn9.png)

# java - GC 优化：将对象声明为字段而不是在本地声明它

> ID：13992286
> 
> 赞同：4
> 
> 时间：2012-12-21T14:54:06.230
> 
> 标签：java, android

我目前正在尝试避免 GC_CONCURRENT 调用，所以我正在运行我的主循环。我注意到我经常创建一个复杂的对象来进行计算。

所以我的问题是将该对象声明为类的字段，而不是在使用它的方法中声明它有助于提高性能？

或者因为我的英语可能伤害了你的大脑，这里的代码示例作为字段

```
class myclass{
    private MyObject myObject;
    ...
    public void myLoopedMethod(...){
        myObject = new MyObject(...);
        myObject.dostuff;
    } 
```

方法中的示例

```
class myclass{
    ...
    public void myLoopedMethod(...){
        MyObject myObject = new MyObject(...);
        myObject.dostuff;
    } 
```

正确的范围是方法，但我怀疑通过使其成为一个字段，内存总是被释放并分配在同一个位置。这是真的吗？这是否有助于避免 GC 调用？

另外，我可能应该做这样的事情，但如果上述逻辑有意义，我很感兴趣。

```
class myclass{
    private MyObject myObject;
    ...
    public void myMethod(...){
        myObject.setNewValues(...);
        myObject.dostuff;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:00:57.823

> 但我的疑问是，通过使其成为一个字段，内存总是被释放并分配在同一个位置。这是真的吗？这是否有助于避免 GC 调用？

不能保证内存分配在同一个位置。这是实现细节。

在您的示例情况下，如果是实例变量，则此实例变量引用的所有对象都将有资格进行 GC，除了仍然具有来自实例变量的引用的最后一个对象（当最后一个对象没有可访问的引用时，它将成为 GC 的资格）。

在定义内部方法的情况下，此引用所引用的所有对象将在循环完成后立即获得 GC 资格。

因此，除非您需要引用循环中标识的对象，否则最好使用定义内部方法。

关于避免 GC 调用的问题，我认为这两种方法的 GC 活动量几乎相同。除非您对内存有真正的问题，否则我建议不要担心内存分配和 GC，VM 足够智能，可以处理这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:00:51.883

1.  是的，如果对象的创建是在经常调用的方法中，它会给垃圾收集器带来更多的工作。

2.  总是衡量而不是推测......理论上的优势可能微不足道。

# javascript - "add()();" 是什么意思 在 JavaScript 中是什么意思？

> ID：13992287
> 
> 赞同：0
> 
> 时间：2012-12-21T14:54:08.617
> 
> 标签：javascript

`i`通过不同地调用`add`函数，我得到了不同的值。有人可以解释这里发生了什么吗？

```
var i = 0;
var add = function() {
    ++i;
    return function() {
        i++;
        return function() {
            i++;
            add();
        }
    }
 };
add(); // i = 1;
add()(); // i = 2;        
add()()(); // i = 4; 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:56:14.827

该函数`add`返回一个函数。这个函数返回另一个函数。

所以 ：

```
add(); // Executes add, which returns a function.
add()(); // Execute the function returned by add.
add()()(); // Execute the function returned by the function returned by add 
```

每个函数只是将`i`值加 1。这解释了`i`价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:57:11.003

您的`add`函数返回一个函数。所以当你这样称呼时：

```
add(); 
```

发生的是代码 ( `++i`) 执行并返回一个函数。你不用那个函数做任何事情，但你*可以*. 你可以执行它：

```
add()(); 
```

这将运行`++i`，返回一个函数，运行该函数（运行`i++`）并返回另一个函数（因为该内部函数也返回一个函数。

等等。您的函数正在返回其他函数，因此每当您将另一个函数附加`()`到调用时，您所做的就是执行正在返回的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:58:33.320

您正在添加中返回一个函数

仅通过调用

`add()`

函数执行完毕，i 加一 // 1

你打电话时

`add()()`

返回的函数也`add`被执行，因此增加 `i`了 2 // 2

`add()()()`

调用`add`返回的函数，返回的函数返回的函数也调用`add`它，因此将 i 增加 4

但我觉得你发布的代码有点不正确，值应该是

```
add() //i = 1
add()() // i = 3
add()()() //i = 7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:57:05.967

内部`add()`返回一个新函数。

所以调用`add()()`将`add()`首先执行。之后`add()`将执行返回的函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T15:27:15.820

在 javascript 中，“()”是函数调用运算符。所以每次你调用“()”时，它都会尝试在这个操作符之前调用函数。在您的情况下，分配了一个函数来添加。让我为每个函数指定一个名称，这样就很容易理解了。

```
var i = 0;
var add = function one() {
++i;
return function two() {
    i++;
    return function three() {
            i++;
            add();
        }
    }
};

// This will execute function one 
// and return function two.
add();   

// This will execute function one and two, 
// return function three
add()(); 

// This will execute function one, two, three,
// return function two. Why?
// Because in function three, we call add() which will execute
// function one and return function two as I mentioned above.
add()()(); 
```

现在让我们看看你是否真的了解函数调用。

```
var i = 0;
var add = function one() {
i++;
return function two() {
    i++;
    return function three() {
            i++;
        }
    }()
}; 
```

为了避免无限循环，我删除了函数三中的函数add()，并在函数二之后添加了“()”。那么如果我们现在调用 add() 呢？

```
// This will execute function one and return function two, 
// function two will invoke itself because of "()" at the end 
// I added and return function three. So call add() will 
// execute function one and function two, return function three.
// So i = 2 in this case.
add(); 
```

你可以整天玩这些函数调用，直到你对它有信心。

# java - ModuleLoader 中的远程对象调用

> ID：13992288
> 
> 赞同：0
> 
> 时间：2012-12-21T14:54:09.730
> 
> 标签：java, actionscript-3, apache-flex, blazeds

我正在使用模块加载器和远程对象。

代码。

```
public function continueClick():void 
{
   loader1.url = "Module.swf";
}
<mx:Button label="Continue" clenter code hereick="continueClick();" />
<mx:ViewStack id="viewStack" width="100%" height="100%">
   <mx:ModuleLoader id="loader1" width="100%" height="100%"/>
</mx:ViewStack> 
```

当我加载模块时，远程对象正在调用 Java 方法。第二次它没有调用Java方法。有什么问题？

远程对象调用正在使用 BlazeDS，我通过 loader1.url="" 和 loader1.url = "Module.swf?nocache="+new Date().getTime()+"" 设置清除 URL；但问题仍未解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:19:24.810

如果两次将 loader1.url 设置为相同的值，它将不会重新加载模块。

# regex - 蒙古数据库；在具有多个条件的查询中使用索引

> ID：13992292
> 
> 赞同：0
> 
> 时间：2012-12-21T14:54:32.280
> 
> 标签：regex, mongodb, indexing, multiple-conditions

我使用 MongoDB。出于测试原因，我创建了一个数据库（500 000 000 个文档）并在其中收集。所有文件如下所示：

```
{

        "_id" : ObjectId("50c1fbcda8cf8e11c43ea8ce"),
        "sql_id" : 8311,
        "text" : "WD7TYIM0H H3Q 3874 000 VFBF6H",
        "xml" : "<root> <tag_0>WD7TYIM0H</tag_0> <tag_1>H3Q</tag_1> <tag_2>3874</tag_2><tag_3>000</tag_3><tag_4>VFBF6H</tag_4></root>",
        "tags" : [
                "WD7TYIM0H",
                "H3Q",
                "3874",
                "000",
                "VFBF6H"
        ]
} 
```

我按字段“标签”创建索引，并希望使用多个使用“标签”索引的正则表达式条件。这可能吗？

我试过了：

```
> db.items.find({ "$and" : [{ "tags" : /^AAA/ }, { "tags" : /^BBB/ }] })

> db.items.find({ "tags" : { "$all" : [/^AAA/, /^BBB/] } }) 
```

两次蒙戈倒下了。

如果我按一个条件搜索结果返回非常快。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:25:22.670

在我的测试中，它运行良好。我正在使用数据库版本 v1.6.5。鉴于我在 DB 中只有几个文档，问题可能与性能有关。

# java - GSON 所需的最低 Java 版本

> ID：13992294
> 
> 赞同：3
> 
> 时间：2012-12-21T14:54:44.403
> 
> 标签：java, gson

使用 GSON API 所需的 Java/JDK 最低版本是多少？而对于 gson-2.2.1.jar 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:58:52.580

Gson 大量使用 JDK 1.5 的特性；这是 Gson 的最低版本，特别是注释和泛型。

查看这段 GSON 源代码，其中使用了注解

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface SerializedName {
    String value();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:59:22.197

您需要至少有 Java 1.5，因为它使用 Java 1.5 的特性，就像注解一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-07T13:20:12.967

我遇到了一些与此相关的问题，当时最新版本的 GSon 是 2.8.5，这不适用于 java 1.5（Minimun 1.6）。

与 Java 1.5 兼容的最后一个 GSon 版本是 GSon 2.4

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-09T08:36:57.053

我在 Gson 版本和 JAVA 版本之间找不到任何“兼容性表”。有没有？我用的是Gson 2.8.5，不知道是否完全兼容JAVA 1.7。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T15:00:54.657

`Gson`使用泛型，因此您需要在使用`JDK 1.5+`它时使用它。

`JDK 6`话虽如此，我不明白为什么你至少不会使用。

# sql - 如何将日期和时间作为列添加到数据库表中？

> ID：13992295
> 
> 赞同：-7
> 
> 时间：2012-12-21T14:54:45.467
> 
> 标签：sql, sql-server, database

我想在我的数据库中有日期和时间列。我`DATE`为日期选择了类型，但只得到时间我应该给出哪种类型以及在为它写记录时我应该以哪种格式写？

编辑：我正在使用 SQL Server。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:04:51.823

Try `DateTime`，包含日期和时间组件。

[http://msdn.microsoft.com/en-us/library/ms187819.aspx](http://msdn.microsoft.com/en-us/library/ms187819.aspx)

编辑：既然您说您使用的是 Oracle，它确实在 Date 值中具有时间支持，尽管我不是 Oracle 专家。如果有帮助，我发现了这个：http: [//infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html)

# php - 在 PHP 中使用 IntlDateFormatter 本地化（短）月份名称？

> ID：13992296
> 
> 赞同：13
> 
> 时间：2012-12-21T14:54:57.260
> 
> 标签：php, datetime, localization, locale, intl

在我的 Windows 开发机器上，我已将语言环境设置为`ita`：

```
setlocale(LC_TIME, 'ita');
echo strftime('%b'); // dic 
```

虽然（我想，现在无法测试）在 *nix 系统上，但我应该使用`it`：

```
setlocale(LC_TIME, 'it'); 
```

如果我尝试`it`在我的 Windows 上设置它不起作用，打印`Dec`.

看来我不能依赖[`setlocale()`](http://php.net/manual/en/function.setlocale.php)，所以我应该`IntlDateFormatter`按照@hakre 的建议使用。但是，我可以找到给我月份名称和简短名称的常量：

```
IntlDateFormatter::NONE (integer)
Do not include this element

IntlDateFormatter::FULL (integer)
Completely specified style (Tuesday, April 12, 1952 AD or 3:30:42pm PST)

IntlDateFormatter::LONG (integer)
Long style (January 12, 1952 or 3:30:32pm)

IntlDateFormatter::MEDIUM (integer)
Medium style (Jan 12, 1952)

IntlDateFormatter::SHORT (integer)
Most abbreviated style, only essential data (12/13/52 or 3:30pm) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-21T15:53:21.780

从[参考](https://unicode-org.github.io/icu/userguide/format_parse/datetime/)，一些月份格式代码：

```
Symbol     Meaning             Example:            

M          month in year       M or MM    09       
                               MMM        Sept     
                               MMMM       September
                               MMMMM      S 
```

设置格式的PHP函数是：[`IntlDateFormatter::setPattern`](http://php.net/intldateformatter.setpattern)，一些例子：

```
class LocaleDateFormat
{
    private $locale;
    private $pattern;

    public function __construct($pattern, $locale = 'en_US') {
        $this->setLocale($locale);
        $this->setPattern($pattern);
    }

    public function setLocale($locale) {
        $this->locale = $locale;
    }

    public function setPattern($pattern) {
        $this->pattern = $pattern;
    }

    public function localeFormat($locale, $date) {
        $this->setLocale($locale);
        return $this->format($date);
    }

    public function format($date) {
        $formatter = new IntlDateFormatter($this->locale, IntlDateFormatter::FULL, IntlDateFormatter::FULL);
        $formatter->setPattern($this->pattern);
        return $formatter->format($date);
    }
}

$dateFormat = new LocaleDateFormat('MMMM'); # Long Month Names

$date = new DateTime(); # Now

$locales = ["en_US", "de_DE", "sv_SE", "ru_RU"];
foreach ($locales as $i => $locale) {
    $month = $dateFormat->localeFormat($locale, $date);
    printf("%d. %s - %s\n", $i+1, $locale, $month);
} 
```

输出：

```
1\. en_US - December
2\. de_DE - Dezember
3\. sv_SE - december
4\. ru_RU - декабря 
```

有关语言环境的列表，请参见此处：

*   [PHP中可用的整理器列表？](https://stackoverflow.com/a/9422745/367456)

* * *

跨不同语言环境的短月份名称的实际示例：

```
$locales    = ["en_US", "de_DE", "sv_SE", "ru_RU", 'it', 'it_IT', 'it_CH'];
$dateFormat = new LocaleDateFormat('MMM'); # Short Month Names

$date = new DateTime(); # Now

foreach (range(1, 12) as $monthNumber)
{
    $date->setDate(2012, $monthNumber, 1);

    printf("%02d:    ", $monthNumber);

    foreach ($locales as $locale)
    {
        $monthLabel = $dateFormat->localeFormat($locale, $date);
        $pad = str_repeat(' ', max(0, 8 - mb_strlen($monthLabel, 'UTF-8')));
        printf("%s: %s%s  ", $locale, $monthLabel, $pad);
    }

    echo "\n";
} 
```

示例输出：

```
01:    en_US: Jan       de_DE: Jan       sv_SE: jan       ru_RU: янв.      it: gen       it_IT: gen       it_CH: gen       
02:    en_US: Feb       de_DE: Feb       sv_SE: feb       ru_RU: февр.     it: feb       it_IT: feb       it_CH: feb       
03:    en_US: Mar       de_DE: Mär       sv_SE: mar       ru_RU: марта     it: mar       it_IT: mar       it_CH: mar       
04:    en_US: Apr       de_DE: Apr       sv_SE: apr       ru_RU: апр.      it: apr       it_IT: apr       it_CH: apr       
05:    en_US: May       de_DE: Mai       sv_SE: maj       ru_RU: мая       it: mag       it_IT: mag       it_CH: mag       
06:    en_US: Jun       de_DE: Jun       sv_SE: jun       ru_RU: июня      it: giu       it_IT: giu       it_CH: giu       
07:    en_US: Jul       de_DE: Jul       sv_SE: jul       ru_RU: июля      it: lug       it_IT: lug       it_CH: lug       
08:    en_US: Aug       de_DE: Aug       sv_SE: aug       ru_RU: авг.      it: ago       it_IT: ago       it_CH: ago       
09:    en_US: Sep       de_DE: Sep       sv_SE: sep       ru_RU: сент.     it: set       it_IT: set       it_CH: set       
10:    en_US: Oct       de_DE: Okt       sv_SE: okt       ru_RU: окт.      it: ott       it_IT: ott       it_CH: ott       
11:    en_US: Nov       de_DE: Nov       sv_SE: nov       ru_RU: нояб.     it: nov       it_IT: nov       it_CH: nov       
12:    en_US: Dec       de_DE: Dez       sv_SE: dec       ru_RU: дек.      it: dic       it_IT: dic       it_CH: dic 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:52:26.423

很丑，但它有效：

```
$formatter = \IntlDateFormatter::create(
    'it',
    \IntlDateFormatter::LONG,
    \IntlDateFormatter::NONE,
    \DateTimeZone::UTC, // Doesn't matter
    \IntlDateFormatter::GREGORIAN,
    'MMM'
);

$months = array_map(
    function($m) use($formatter){
        return $formatter->format(mktime(0, 0, 0, $m, 2, 1970));
    },
    range(1, 12)
);

var_dump($months); 
```

奇怪的是`it`月份名称是小写的，`en`它们的大小写是正确的。我会留下未回答的问题，寻找更好的解决方案！

# knockout.js - 可观察对象未在对象字面量剔除中定义

> ID：13992298
> 
> 赞同：1
> 
> 时间：2012-12-21T14:54:59.130
> 
> 标签：knockout.js, knockout-2.0

我在敲除 viewmodel 的对象文字中定义了一个可观察对象。现在当我运行应用程序时。它无法访问 observable 。

```
$(function () {
  var viewModel =    {
    Folders: ['Inbox', 'Archive', 'Sent', 'Spam'],
    Title: ko.observable("My View Model Test"),
    SelectedFolder: ko.observable(),
    Mails: ko.observableArray(),
    SelectedMail: ko.observable(),
    SelectedChoices: ko.observable(false),

    navigate: function (folder) {           
        SelectedFolder(folder);
        $.ajax({
            url: "/Api/MailBox",
            data: { folder: folder },
            success: function (data) {
                self.Mails(data);
            },
            statusCode: {
                404: function () {
                    console.log("No Mails");
                }
            }

        });
    }
};
} 
```

当我将点击事件绑定到`navigate`函数时。它说`SelectedFolder`是 undefined 。有人能告诉我为什么它无法访问函数`SelectedFolder`内部的 observable吗？`navigate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:22:23.200

当 navigate 方法运行并寻找 SelectedFolder observable 时，它​​首先在 navigate 方法的上下文中寻找它。否则，它会跳转到父上下文，这是页面准备就绪时正在运行的匿名函数。如果做不到这一点，它会跳转到全局上下文 - 它在那里找不到 SelectedFolder，所以它放弃了。

要解决此问题，请更改您的导航方法以引用在页面准备好时正在运行的匿名函数的上下文中可用的 viewModel 变量：

```
navigate: function (folder) {           
  viewModel.SelectedFolder(folder);
  $.ajax({
    url: "/Api/MailBox",
    data: { folder: folder },
    success: function (data) {
      viewModel.Mails(data);
    },
    ... 
```

请注意，我还在成功回调中添加了对 viewModel 的引用，以便它可以找到 Mails observable。

这应该可行，但是，我建议考虑更改您的结构，以便您的导航方法不依赖于特定的全局变量。这是一种方法：

```
var myViewModel = function() {
    var self = this;
    self.Folders = ['Inbox', 'Archive', 'Sent', 'Spam'];
    self.Title = ko.observable("My View Model Test");
    self.SelectedFolder = ko.observable();
    self.Mails = ko.observableArray();
    self.SelectedMail = ko.observable();
    self.SelectedChoices = ko.observable(false);

    self.navigate = function (folder) {           
        self.SelectedFolder(folder);
        $.ajax({
            url: "/Api/MailBox",
            data: { folder: folder },
            success: function (data) {
                self.Mails(data);
            },
            statusCode: {
                404: function () {
                    console.log("No Mails");
                }
            }

        });
    };
};

$(function () {
  var ViewModel = new myViewModel();
  ko.applyBindings(viewModel);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:01:04.697

问题可能是调用该方法时的当前上下文。如果该方法被单击事件调用，`this`则可能是单击事件绑定到的对象，因此它会尝试在该元素上查找 SelectedFolder 方法。

不确定这是否是最好的方法，但这是一种可能的解决方案：

```
var viewModel =    {
  Folders: ['Inbox', 'Archive', 'Sent', 'Spam'],
  Title: ko.observable("My View Model Test"),
  SelectedFolder: ko.observable(),
  Mails: ko.observableArray(),
  SelectedMail: ko.observable(),
  SelectedChoices: ko.observable(false)
};

viewModel.navigate = function (folder) {           
  viewModel.SelectedFolder(folder);
  $.ajax({
    url: "/Api/MailBox",
    data: { folder: folder },
    success: function (data) {
      viewModel.Mails(data);
    },
    statusCode: {
      404: function () {
        console.log("No Mails");
      }
    }
}); 
```

# search - 从 TransactionSearch 中检索账单

> ID：13992301
> 
> 赞同：0
> 
> 时间：2012-12-21T14:55:22.150
> 
> 标签：search, netsuite

我想从 Netsuite 中检索 vendorBills。

这是我的代码

```
TransactionSearch transactionSearch = new TransactionSearch();

            TransactionSearchBasic tranSearchBasic = new TransactionSearchBasic();
            TransactionSearchAdvanced tranAdvancedSearch = new TransactionSearchAdvanced();

            SearchDateField searchDate = new SearchDateField();
            searchDate.setOperator(SearchDateFieldOperator.within);
            searchDate.setSearchValue(startDate);
            searchDate.setSearchValue2(endDate);
            tranSearchBasic.setDateCreated(searchDate);
transactionSearch.setBasic(tranSearchBasic);

            tranAdvancedSearch.setCriteria(transactionSearch);

            SearchResult billResult = port.search(tranAdvancedSearch); 
```

上面的代码返回指定日期之间创建的所有交易记录。但我只想过滤掉 vendorBill。

我试过以下

```
String[] type = new String[1];
type[0]=RecordType._vendorBill;
tranSearchBasic.setType(type); 
```

但它返回null。

webservice主机地址：https://webservices.na1.netsuite.com/wsdl/v2012_2_0/netsuite.wsdl

任何即时帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:14:20.543

```
$typeSearchField = new SearchStringField();
$typeSearchField->operator = SearchStringFieldOperator::is;
$typeSearchField->searchValue = "SalesOrder";

$search = new TransactionSearchBasic();
$search->recordType = $typeSearchField;

$request = new SearchRequest();
$request->searchRecord = $search;

$searchResponse = $service->search($request); 
```

这就是您在 PHP 中为销售订单执行此操作的方式。C# 的代码应该类似于以下内容。

```
TransactionSearchBasic tranSearchBasic = new TransactionSearchBasic();

SearchDateField searchDate = new SearchDateField();
searchDate.setOperator(SearchDateFieldOperator.within);
searchDate.setSearchValue(startDate);
searchDate.setSearchValue2(endDate);
SearchStringField searchRecordType = new SearchStringField();
searchRecordType.setOperator(SearchStringFieldOperator.is);
searchRecordType.setSearchValue("VendorBill");
tranSearchBasic.setDateCreated(searchDate);
tranSearchBasic.setRecordType(searchRecordType);

SearchResult billResult = port.search(tranSearchBasic); 
```

# axapta - Dynamics Ax 2012 EcoResProductCategory 中缺少类别列

> ID：13992303
> 
> 赞同：0
> 
> 时间：2012-12-21T14:55:37.323
> 
> 标签：axapta, x++, microsoft-dynamics, dynamics-ax-2012, ax

我们遇到了 EcoResProductCategory 表单的问题。有一次，这个表格有一个我们公司使用的名为“类别”的列。不知何故，这个专栏不见了。我的团队在 CUS 级别上进行开发，并且我相信有一家供应商会将添加内容推到更低的级别。截至目前，此表单没有 CUS 级别的自定义。在 AOT 中查看表单时，似乎 Category 字段实际上是存在的（并且在属性中可见）。但是一旦打开表格，它仍然不显示。

任何想法或指示？我还是 Microsoft Dynamics AX 2012 的新手，对于提出这样的问题，我深表歉意。

另一个注意事项：与 AX Demo 相比，我们的环境似乎缺少以下标签...

![缺少字段](../Images/38e6b10565684765f01e1d967ca26b74.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:12:58.667

是所有用户丢失，还是一个用户丢失？在后者中，它可能被 MorphX 隐藏（右键单击并隐藏）。

只是为了确保它不是使用数据，请删除该用户的使用数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:26:40.937

事实证明，一个相关的数据表删除了一个字段。因此，从未生成下拉列表。

# c# - XNA Nuclex Spritefont 框架和 Spritefont 纹理

> ID：13992305
> 
> 赞同：0
> 
> 时间：2012-12-21T14:55:49.227
> 
> 标签：c#, xna, spritefont

XNA 4.0 在屏幕上渲染字体的方式至少可以说是从 XNA 3.1 退了一步。值得庆幸的是，使用[Nuclex 框架](http://nuclexframework.codeplex.com/wikipage?title=Sprite%20Fonts&referringTitle=Nuclex.Fonts)已经解决了这个问题。但是，这是针对 spritefont 文件的。

Nuclex 是否也可以支持 spritefont 纹理（[Nubik](http://www.nubik.com/SpriteFont/)等）？如果不是，您如何采用“不那么常​​见”的字体，将其转换为 spritefont，并确保它显示在另一台计算机上（可能不会安装该字体）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:47:09.907

**Spritefonts 被编译**。您在构建内容时会得到一个`spritefont.xnb`文件，该文件包含您的所有字符（您在 .spritefont 文件中定义的字符）。由于**游戏使用这些文件中的字符（这些文件**随您的游戏一起部署），因此目标计算机不需要任何字体。

此外，**Nuclex 不需要支持 spritefont 纹理**- 您可以在内容中原样使用这些纹理，因为**它们将保持不变**。Nuclex 字体仅使用与默认 XNA Spritefont 处理器不同的字符*绘制方式。*spritefont 纹理字符**已经绘制**好了。

# c - 从存储在文件中的数字中读取单个数字

> ID：13992307
> 
> 赞同：-1
> 
> 时间：2012-12-21T14:56:04.157
> 
> 标签：c

我目前正在通过 Project Euler 问题作为学习 C 的一种方式，但我遇到了问题 #8，程序的实际数学和主要部分都很好，但该方法需要从大（1000 位）中读取单个数字号码，我把它放在一个文件中。

下面的代码是一个测试用例，我的文件“test.txt”是数字“123456789”。我想要做的是在单独的行上打印出每个数字。

```
#include <stdio.h>

int main()
{
    int c = 0;
    FILE *fp;
    fp = fopen("test.txt", "r");

    while(c != EOF)
    {
        c = fgetc(fp);
        printf("%i\n", c);      

    }

    fclose(fp);

} 
```

当我运行这段代码时，我得到了输出

```
49
50
51
52
53
54
55
56
57
10
-1 
```

我有一种预感，我的代码中遗漏了一些非常简单的东西，我希望它在 fgetc 位中。如果是这种情况，使用什么功能会更好，我也很好奇为什么会得到如此奇怪的输出 - 当我用我的 1000 位数字尝试它时，我发现一个类似的模式，数字在 49 到 50 左右几乎是周期性地输出。请记住，我只是 C 的初学者，干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:00:06.540

这些是数字的[ASCII](http://www.asciitable.com/)：

```
48 = '0'
49 = '1'
50 = '2' 
```

等等。它们采用这种格式是因为它们是存储在表示整数数字的文本文件中的字符。

您需要打印：

```
if((48 <= c) && (c <= 57))
  printf("%d\n", c - '0'); 
```

注意：您需要该`if`检查，因为 10 是换行符，而 -1 是 EOF，您打印的内容比您想要的要多。

当然，如果检查有很多方法可以做到这一点：

```
if(('0' <= c) && (c <= '9')) 
```

或者

```
if(isdigit(c)) 
```

关键是您需要检查您是否只需要数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:57:45.983

`printf("%i\n", c);`打印每个数字的[ascii 字符代码](http://www.asciitable.com/)。

下面的代码检查每个字符是否为数字，然后打印数字（通过减去 0 的字符代码）或在遇到非数字内容时发出警告：

```
while(c != EOF) {
    c = fgetc(fp);
    if (isdigit(c)) {
        printf("%i\n", c-'0');
    }
    else {
        printf(" non-numeric digit (%i)\n", c);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:57:54.473

这看起来像您正在打印数字的 ASCII 值。[以下是wikipedia](http://en.wikipedia.org/wiki/ASCII)上 ASCII 表的片段：

```
Dec Hex Glyph
48  30  0
49  31  1
50  32  2
51  33  3
52  34  4
53  35  5
54  36  6
55  37  7
56  38  8
57  39  9 
```

最后得到的 and 是换行符`10`和.`-1``EOF`

当您从文件中读取文本时，它会为您提供 ASCII 字符数据，因此您需要从值中减去字符“0”的偏移量以获取数字：

```
printf("%d\n", c - '0'); 
```

请注意，您可以`'0'`直接在减法中使用该字符，因为编译器会将其转换为适合您的数字。最好使用 '`'0'`而不是仅仅减去 48，因为它更清楚您要做什么，而且还因为可能存在不同的字符编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:01:09.930

您正在打印每个数字的 ASCII 值并打印 EOF，因为您在阅读之前而不是之后检查：

```
while((c = fgetc(fp)) != EOF)
{
    printf("%i\n", c-'0');
} 
```

# c++ - 将源文件与静态库 C++ 链接时出错

> ID：13992308
> 
> 赞同：0
> 
> 时间：2012-12-21T14:56:05.607
> 
> 标签：c++, compiler-errors, static-libraries

我正在尝试使用静态库，但是当我将引用和包含目录添加到项目时，我得到了奇怪的编译器错误，这仅包括任何头文件。

静态库项目构建成功。我不知道错误可能在哪里，但我想它可能在静态库的某个文件中。

静态库文件如下：

标题：

```
#ifndef UTIL_H_
#define UTIL_H_

#include <string>
#include <iostream>
#include <vector>
#include <stdlib.h>

namespace Kaczmarz {

class Util {
public:
    Util();
    static void split(std::vector<std::string> &tokens, const std::string &text, char sep);
    static double random(int rangeMin,int rangeMax);

    virtual ~Util();
};

} 
#endif 
```

cp:

```
#include "Util.h"

namespace Kaczmarz {

Util::Util() {
    // TODO Auto-generated constructor stub
}

void Util::split(std::vector<std::string> &tokens, const std::string &text, char sep) {
    unsigned int start = 0, end = 0;
    while ((end = text.find(sep, start)) != std::string::npos) {
        tokens.push_back(text.substr(start, end - start));
        start = end + 1;
    }
    tokens.push_back(text.substr(start));
}

double Util::random(int rangeMin,int rangeMax){
    return (double) static_cast<double>( rand() ) * rangeMax / static_cast<double>( RAND_MAX ) + rangeMin;
}

Util::~Util() {
    // TODO Auto-generated destructor stub
}

} 
```

尝试使用静态库的文件：

```
#include <iostream>

using namespace std;
//using namespace Kaczmarz;

int main(){
    cout << "Started.." << endl;
    return 0;
} 
```

请注意，我还没有从库中调用任何函数。

我得到的错误如下：

```
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21): error C2143: syntax error : missing ';' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21): error C2433: 'basic_string' : 'inline' not permitted on data declarations
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21): error C2988: unrecognizable template declaration/definition
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21): error C2059: syntax error : '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(38): error C2143: syntax error : missing ';' before '{'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(38): error C2447: '{' : missing function header (old-style formal list?)
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(49): error C2143: syntax error : missing ';' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(49): error C2433: 'basic_string' : 'inline' not permitted on data declarations
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(49): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(49): error C2086: 'int std::basic_string' : redefinition
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21) : see declaration of 'std::basic_string'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(49): error C2988: unrecognizable template declaration/definition
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(49): error C2059: syntax error : '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(66): error C2143: syntax error : missing ';' before '{'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(66): error C2447: '{' : missing function header (old-style formal list?)
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(77): error C2143: syntax error : missing ';' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(77): error C2433: 'basic_string' : 'inline' not permitted on data declarations
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(77): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(77): error C2086: 'int std::basic_string' : redefinition
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21) : see declaration of 'std::basic_string'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(77): error C2988: unrecognizable template declaration/definition
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(77): error C2059: syntax error : '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(94): error C2143: syntax error : missing ';' before '{'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(94): error C2447: '{' : missing function header (old-style formal list?)
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(101): error C2143: syntax error : missing ';' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(101): error C2433: 'basic_string' : 'inline' not permitted on data declarations
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(101): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(101): error C2086: 'int std::basic_string' : redefinition
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21) : see declaration of 'std::basic_string'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(101): error C2988: unrecognizable template declaration/definition
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(101): error C2059: syntax error : '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(114): error C2143: syntax error : missing ';' before '{'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(114): error C2447: '{' : missing function header (old-style formal list?)
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(125): error C2143: syntax error : missing ';' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(125): error C2433: 'basic_string' : 'inline' not permitted on data declarations
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(125): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(125): error C2086: 'int std::basic_string' : redefinition
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21) : see declaration of 'std::basic_string'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(125): error C2988: unrecognizable template declaration/definition
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(125): error C2059: syntax error : '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(138): error C2143: syntax error : missing ';' before '{'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(138): error C2447: '{' : missing function header (old-style formal list?)
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(145): error C2143: syntax error : missing ';' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(145): error C2433: 'basic_string' : 'inline' not permitted on data declarations
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(145): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(145): error C2086: 'int std::basic_string' : redefinition
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(21) : see declaration of 'std::basic_string'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(145): error C2988: unrecognizable template declaration/definition
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(145): error C2059: syntax error : '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(158): error C2143: syntax error : missing ';' before '{'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(158): error C2447: '{' : missing function header (old-style formal list?)
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(166): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(166): error C2143: syntax error : missing ',' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(170): error C2803: 'operator ==' must have at least one formal parameter of class type
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(170): error C2805: binary 'operator ==' has too few parameters
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(177): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(177): error C2143: syntax error : missing ',' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(180): error C2803: 'operator ==' must have at least one formal parameter of class type
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(186): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(186): error C2143: syntax error : missing ',' before '<'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(190): fatal error C1903: unable to recover from previous error(s); stopping compilation 
```

请注意，错误提到了 std 字符串类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:33:29.697

由于现在是圣诞节，我看到您正在使用 MSVS，以下是我尝试使用您的库的步骤：

**第 1 步**：我创建了名为 XmasTest 的新解决方案，其中包含名为 XmasLib 的新 Win32 项目。

**第 2 步**：我已经在该项目中添加了您的源文件，只是一个简单的示例适当的修改。我什`using namespace std;`至在头文件中放了那条邪恶的线。

实用程序.h

```
#ifndef UTIL_H_
#define UTIL_H_

#include <string>
#include <iostream>
#include <vector>
#include <stdlib.h>

using namespace std;

namespace Kaczmarz {

class Util {
public:
    Util();
    static void print();

    virtual ~Util();
};

} /* namespace Kaczmarz */
#endif 
```

实用程序.cpp

```
#include "Util.h"
using namespace std;

namespace Kaczmarz {

Util::Util() {
    // TODO Auto-generated constructor stub

}

void Util::print() {
    cout << "Util::print() works! yay!" << endl;
}

Util::~Util() {
}

} /* namespace Kaczmarz */ 
```

**第 3 步**：我创建了名为 XmasLibTestApp 的新 Win32 控制台应用程序，其中包含以下代码：

```
#include <iostream>

#include "../XmasLib/Util.h"

using namespace std;
using namespace Kaczmarz;

int main(){
    Util u;
    u.print();
    return 0;
} 
```

**第 4 步**：由于这些是 1 个解决方案中的 2 个项目，因此我通过以下方式处理了依赖项：

1.  链接器->常规->附加库目录：$(OutDir)
2.  链接器->输入->其他依赖项：XmasLib.lib
3.  解决方案属性->ProjectDependencies：App 依赖于 lib

**第 5 步**：构建解决方案并运行应用程序。输出：`Util::print() works! yay!`

就是这样。故事结束，一切正常，开发人员对他的 IDE 感到高兴。

圣诞快乐！:D

* * *

PS：值得一看的问题：
[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)
[什么需要我声明“使用命名空间 std;”？](https://stackoverflow.com/questions/2218140/what-requires-me-to-declare-using-namespace-std)
[在哪里放置 using namespace std;](https://stackoverflow.com/questions/6474756/where-to-put-using-namespace-std)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:01:45.393

好的，找到了这个编译错误的原因。

在“其他包含目录”（与 2012 相比）中，我有另一个导入“Util”类的 .cpp/.h 文件。

我刚刚从目录中删除了这些文件，这次它编译得很好，没有任何错误。请注意，该文件不存在于项目中（我已将它们排除在外），但似乎“其他包含目录”以某种方式在项目中链接了它们。

感谢所有回答的人，我真的很感激。

# openssl - 生成具有已知 p 和 q 素数的 X509 证书或 RSA 密钥

> ID：13992312
> 
> 赞同：0
> 
> 时间：2012-12-21T14:56:31.363
> 
> 标签：openssl, rsa

我的问题似乎很简单，但我无法解决...您知道如何生成 X509 证书（使用 ssl）或具有固定素数的 RSA 密钥吗？我只找到密钥生成器，但没有找到带参数的计算器。

希望我清楚，

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:02:44.787

分配一个新`RSA`结构并直接设置其相关成员，然后调用`RSA_check_key()`以确保您没有搞砸。之后，使用新密钥做任何你需要做的事情。

目前尚不清楚您为什么要这样做，但这并非不可能。

# android - ICS 前后 Holo 主题相关的区别

> ID：13992321
> 
> 赞同：0
> 
> 时间：2012-12-21T14:56:46.237
> 
> 标签：android, themes, android-4.0-ice-cream-sandwich

我有几个使用 Android 1.6 及更高版本创建的应用程序。问题是当我在最近的 Android（设备或模拟器）（如 ICS）上运行这些应用程序时，我没有 Holo 主题。

我知道我可以找到很多关于如何指定主题的线程，但是当我现在创建一个新应用程序时，我有了新主题而没有任何代码行。

我不想在所有 android 版本上都有 ICS 主题，只是 ICS 上的 ICS 主题，比如 ICS 上的新全息按钮样式和旧的灰色样式。现在我只有所有版本的灰色按钮。

我可以创建新的空项目并将我的所有文件复制到其中，但必须在某个地方有一个隐藏的值来改变它。

在我的清单中，我有：

```
<uses-sdk android:minSdkVersion="3" />
<uses-sdk android:targetSdkVersion="14" /> 
```

新创建的项目和新创建的项目有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:25:55.023

我的理解是您希望您的应用程序在旧版（经典）主题和基于 API 版本的新 Holo 主题之间切换。

首先，在您的`values`( `res/values`) 文件夹中创建一个新的 xml。调用它`styles.xml`。它应该包含以下几行：

```
<resources>
<style name="AppTheme" parent="@android:style/Theme.Black"/>
</resources> 
```

然后在`res`被调用的新文件夹中创建一个`values-v11`。在这个新文件夹中创建另一个新的 xml。也将其命名`styles.xml`此文件应包含以下行：

```
<resources>
<style name="AppTheme" parent="@android:style/Theme.Holo"/>
</resources> 
```

然后在你的`AndroidManifest.xml`你的`Application`节点应该包含这一行：

```
android:theme="@style/AppTheme" 
```

现在在具有 Honeycomb 或更高版本的设备上，您将获得 Holo 主题，而对于其他一切，您将获得旧的经典主题。您可以轻松地对此进行试验以满足您的需求 - 这是基于 API 版本在主题之间切换的一般方式。

# visual-studio-2010 - 如何在 Visual Studio 2010 中创建 wsdl 文件？

> ID：13992322
> 
> 赞同：2
> 
> 时间：2012-12-21T14:56:56.840
> 
> 标签：visual-studio-2010, visual-studio, wsdl

我需要创建一个 wsdl 文件以将其提供给第三方。我还没有实现我的网络服务。我所拥有的只是一个文档，它告诉 Web 服务将支持哪些操作以及每个操作的输入和返回（输出）参数。我需要在实现服务之前创建一个 wsdl。关于如何解决这个问题的任何想法？是否有任何允许手动创建 wsdls 的工具？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:12:01.057

创建 WSDL 的最佳方式是让 VS 为您创建它。这可以在创建 WS 应用程序时轻松完成。

因此，如果您已经***需要***创建接口（将它们传递给第 3 方）而不是实现 -[创建 web 服务本身](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-web-service-in-cnet.html#.UNR8k3fzwZ0)（更具体地说是接口），而不是实现，将`NotImplementedException`它们全部放入。

然后，您可以运行 WebService，让它为您生成正确的 WSDL（您可以将其传递给第 3 方），剩下的就是在空闲时间*实现*这些方法。

# ios - UIDatePicker 的 AM/PM 设置错误

> ID：13992324
> 
> 赞同：0
> 
> 时间：2012-12-21T14:57:04.380
> 
> 标签：ios, uipickerview, uidatepicker

![在此处输入图像描述](../Images/ff87dfedb8103565b60e7dd4b14af560.png)我将 UIDatePicker 设为时间选择器，并将其时间设置为 15:00。在某些地区，例如美国，它会在方向盘上正确显示为 03:00，但不是“PM”，而是显示“AM”。关于如何正确设置的任何想法？

当前代码：

```
 NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *comps = [gregorian components:(NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:_dateWithTime];
    comps.hour = 15;
    comps.minute = 0;

    UIDatePicker *datePicker = [[UIDatePicker alloc] init];
    datePicker.datePickerMode = UIDatePickerModeTime;
    datePicker.minuteInterval = 15;
    datePicker.timeZone = [NSTimeZone localTimeZone];
    datePicker.minimumDate = [gregorian dateFromComponents:comps];
    [datePicker addTarget:self action:@selector(checkinDatePickerChanged:) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:46:05.730

我不确定这是否能解决您的问题，但不是

`datePicker.minimumDate = [gregorian dateFromComponents:comps];`

应该有

`datePicker.date = [gregorian dateFromComponents:comps];`

# neural-network - 位图生成器与神经网络图像识别器配对？

> ID：13992330
> 
> 赞同：0
> 
> 时间：2012-12-21T14:57:20.037
> 
> 标签：neural-network

我是编程新手，如果有人能指出我正确的方向，我会很棒。

希望创建这个项目，但不确定是自己尝试完成编程还是花钱请人为我创建它。

希望创建一个位图生成器来创建小（300x300px ish）图像（类似于此... RANDOM.ORG - 位图生成器），然后将这些图像提供给基于神经网络的图像识别器，该图像识别器经过训练可以挑选出特定的图像它认为与我给它学习的一组初始黑白位图图像匹配。

基本上，我想创建一个程序，我可以提供一组图像，然后基于这些生成图像，具有相似的色调、图案和形状..

在我开始考虑做这个之前，你认为它会起作用吗？生成器必须非常快，图像识别器才有希望找到任何东西。而且我必须能够调整黑/白字节的百分比，才能得出我提供给它学习的那种图像。

如果有人能就从哪里开始提供任何建议，那就太棒了！

# visual-studio - 添加为与 VisualSVN 的链接

> ID：13992335
> 
> 赞同：2
> 
> 时间：2012-12-21T14:57:40.373
> 
> 标签：visual-studio, svn, tortoisesvn, visualsvn

我有一个解决方案，我正在尝试创建第二个可执行文件。这两个可执行文件共享大部分相同的文件，但有一些不同的文件，包括资源和应用程序图标等。

我创建了第二个项目，并将项目添加为链接。：

1.  右键单击**“添加现有项目”**，
2.  浏览它，
3.  单击**“添加”**下拉菜单并选择**“添加为链接”**。

*添加为链接意味着它只是引用另一个文件夹中的另一个文件而不复制它。*

现在，当我尝试提交我的项目时，VisualSVN / SVN 尝试在它们所属的逻辑路径中对这些文件进行 SVN 添加，导致很多错误，即找不到文件。它导致整个提交失败，并且是一个主要的痛苦。

有没有一种好方法可以添加文件链接而不会产生副作用？我试图链接到的所有文件都已经在同一个仓库中。

**更新**

也许我应该添加更多关于我正在努力完成的信息，因为我愿意接受任何有助于我完成它的建议。

我有一个类似这样的项目结构......或者我希望它是这样的......

```
我的项目
  /常见的
    业务数据对象（svn：外部）
    控件库（svn：外部）
    其他CommmonLib1 (svn:external)
    其他CommonLib2 (svn:external)
  /模块
    模块1
    模块2
    模块3
    ...
   应用1
   Application2（共享所有 App1 的文件，除了不同的 .resx、图标、名称、其他细微差别）
   SetupProject1（包括 app1 和某些模块 dll）
   SetupProject2（包括 app2 和某些模块 dll）

```

该应用程序基本上是一个空壳（使用 Prism），它加载安装在 /modules 文件夹中的模块。我希望两个应用程序几乎相同，但我希望它们具有不同的名称和不同的图标。我想我可以通过将第一个项目中的文件作为链接添加到第二个项目中来实现这一点，并简单地交换一个资源文件，其中包括应用程序窗口标题、关于对话框等的字符串。但是然后是 VisualSVN 或任何尝试 SVN添加那些我没想到的项目。

我需要能够开发模块和应用程序的外壳项目。它们在任何方面都不稳定。我只是希望它们彼此接近，但命名差异很小。我认为有两个应用程序项目，我可以有两个设置项目，其中包括每个应用程序的输出以及应该包含在该软件程序版本中的任何模块。

我试图使它尽可能万无一失，并且我想避免必须更新对同一项目的外部引用。（我对此也有点困惑，我会 svn:external 到**同一个**repo 吗？）这听起来不太好，但这是我关于如何创建两个几乎相同的应用程序的主要想法。如果我不能让我的版本控制软件正常运行，我不确定我会怎么做。

我曾口头建议我们只有一个版本的软件，并升级某些模块，但有一些很好的理由他们不能真正做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:43:57.727

当您使用**“添加为链接”**将文件添加到 Visual Studio 项目时，预计该文件不会复制到项目的文件夹中。

VisualSVN 会考虑工作副本中项目的状态，甚至是当前解决方案中未包含的文件。但是，工作副本中不存在链接文件，因此无法跟踪。它超出了版本控制。

[由于您尝试链接的文件已经受版本控制（即它们存在于 SVN 存储库中），因此使用外部定义](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)（`svn:externals`属性）来链接它们是有意义的。

另见[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-howto-common-projects.html#tsvn-howto-common-externals)；它的描述`svn:externals`真的很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:23:13.083

你没有提到你的环境。但是，您提到您有一个*解决方案*。我假设您使用的是 VisualStudio。

您是否尝试过 AnkhSVN，它是 VisualStudio 的 Subversion 的源代码控制提供程序？AnknSVN 集成到 VisualStudio 中很像微软的 Visual SourceSafe 和 TeamFoundation 的本机版本控制系统。我相信您可以使用 AnknSVN 进行您想要的*链接*，因为这些链接实际上是内部 VisualStudio 结构，而不是您在 Unix 系统中找到的实际符号或硬链接。

我通常避免使用链接（我相信它们在 Windows 上被称为 Junctions），因为它们根本无法跨操作系统工作。相反，您可以使用以下方法之一：

*   使用您的构建系统来复制文件，或创建所需的链接而不是您的版本控制系统。
*   用于`svn:externals`进行链接。小心这一点，因为`svn:externals`是指向 Subversion URL 的指针。

例如，如果我设置`http://foo.com/svn/trunk/proj1`了一个`svn:externals`指向 的头部的链接`http://foo.com/svn/trunk/proj2`，并且我通过复制`http://foo.com/svn/trunk/proj1`到为项目 1 创建了一个标签`http://foo.com/svn/tags/REL-1.2/proj1`，那么该项目仍然指向 proj2 的主干的头部。Project 2 中的更改将改变我认为的稳定标签。始终将您`svn:external`指向稳定的修订版。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-21T15:49:08.433

我没有使用 VisualSVN 的经验，我们使用没有这个问题的 Ankhsvn。

[http://ankhsvn.open.collab.net/](http://ankhsvn.open.collab.net/)

# iphone - TableView - 信号 SIGABRT

> ID：13992338
> 
> 赞同：0
> 
> 时间：2012-12-21T14:57:54.660
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试创建一个 TableView 并放入来自 NSArray 的数据。但是，我收到此错误：

```
2012-12-21 15:53:10.239 Arr[13219:c07] -[UIView tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x71ccb60
2012-12-21 15:53:10.240 Arr[13219:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x71ccb60'
*** First throw call stack:
(0x1c90012 0x10cde7e 0x1d1b4bd 0x1c7fbbc 0x1c7f94e 0x1f96e8 0x1fc3c4 0xc0fa2 0xc092c 0xc4426 0xc90ce 0x6592d 0x10e16b0 0x228cfc0 0x228133c 0x228ceaf 0x1048cd 0x4d1a6 0x4bcbf 0x4bbd9 0x4ae34 0x4ac6e 0x4ba29 0x4e922 0xf8fec 0x45bc4 0x45dbf 0x45f55 0x4ef67 0x12fcc 0x13fab 0x25315 0x2624b 0x17cf8 0x1bebdf9 0x1bebad0 0x1c05bf5 0x1c05962 0x1c36bb6 0x1c35f44 0x1c35e1b 0x137da 0x1565c 0x1c2d 0x1b55 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

我不太确定是什么代码导致了这种情况，所以我只附上两个表格方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    return cell;
} 
```

NSArray 的创建：

```
@implementation ArrViewController {
    NSArray *tableData;
}

@synthesize itemTxt = _itemTxt;
@synthesize itemsLabel = _itemsLabel;
@synthesize model = _model;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    tableData = [NSArray arrayWithObjects:@"Egg Benedict", @"Mushroom Risotto", @"Full Breakfast", @"Hamburger", @"Ham and Egg Sandwich", @"Creme Brelee", @"White Chocolate Donut", @"Starbucks Coffee", @"Vegetable Curry", @"Instant Noodle with Egg", @"Noodle with BBQ Pork", @"Japanese Noodle with Pork", @"Green Tea", @"Thai Shrimp Cake", @"Angry Birds Cake", @"Ham and Cheese Panini", nil];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:06:15.163

您为表格视图设置了不正确的数据源。这使得`tableView:numberOfRowsInSection`消息被发送到错误的对象，`UIView`如错误消息中所示：

```
 [UIView tableView:numberOfRowsInSection:] 
```

查看/发布您设置`dataSource`属性的代码`UITableView`以找出问题所在。您可能传入了错误的对象。

数据源是您`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`根据帖子定义的类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:12:21.957

在您的 .h 文件中使用以下代码

```
@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>

@property (weak, nonatomic) IBOutlet UITableView *your_Table; 
```

在您的 .m 文件中

```
@implementation ViewController
@synthesize your_Table; 
```

在`Xib`文件连接`Delegate`和`dataSource`到`Fileowner`。

或以`ViewDidLoad`编程方式分配它

```
your_Table.delegate=self;
your_table.dataSuorce=self; 
```

之后使用这个

```
- (NSInteger)tableView:(UITableView *)myTableView numberOfRowsInSection:(NSInteger)section {
    return [tableData count];
} 
```

希望它会帮助你。

如果没有，然后从 .h 文件中发布您的代码。

# php - 共享服务器中的 PHP 程序每次都在不同的位置终止 - 失败 3% 次

> ID：13992345
> 
> 赞同：0
> 
> 时间：2012-12-21T14:58:24.770
> 
> 标签：php, curl, cron, hosting, shared

我编写了一个 PHP 脚本，它从一个站点执行 Web 抓取并解析我的网站的输入。

该脚本由 cronjob 定期驱动，所有内容都托管在共享的 Web 服务器中。

**问题是：**我的脚本每天终止几次，没有错误消息并且每次都在代码中的随机位置。

该脚本很长，执行 2 个 HTTP Gets 和 4 个 HTTP Posts 到其他国家/地区的网站，每个 HTTP 请求大约需要 3 秒才能完成；它还向/从 MySql 数据库写入文件和 r/w。

**在尝试**了以下事情后，我被困住了：

1）与我的托管支持（IxWebHosting）交谈 - 他们只是浪费我的时间，否认他们的责任，并建议我将 cronjob 定期限制为最大 5 分钟速率（之前是 3 分钟间隔，但它没有改变任何东西。）

2) 我没有从 cronjob 上下文运行，而是切换到以下方法：Cronjob 每 5 分钟调用一次“加载器 PHP 脚本”。湾。“加载器 PHP 脚本”使用 HTTP Get 调用真正的 PHP 脚本，并在等待答案之前终止。C。真正的 PHP 脚本执行大约 20 秒的工作（这里是程序在随机位置终止的地方）。

3）在代码的许多地方放置一些日志文件时间戳，以便查看程序每次运行的终止位置 - 这向我展示了程序在代码中的任何地方终止。

4）为了证明这不是我的代码错误，我进行了以下测试：Cronjob 调用另一个加载器 PHP 脚本。湾。PHP 脚本对不同的测试目的 PHP 脚本执行 HTTP 请求，并在不等待响应的情况下终止。C。第二个 PHP 脚本将执行 20 秒的虚拟任务：睡眠一秒并将时间戳写入日志文件 20 次。

结果：测试成功！第二个程序没有失败......这意味着它与我的代码和我正在运行的网络服务器有关 - 但是因为它每次都在不同的地方失败并且每天只有大约 10 次（从 288 次它运行一天）然后我不知道它在哪里（并且没有 PHP 的错误消息）。

在此先感谢，很抱歉描述太长 - 我很乐意应要求提供更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:01:28.373

您是在记录实际过程，而不是从过程中写入日志吗？例如，您的 cron 工作看起来像：

```
* * * * * /home/user/myTroublesomeJob.php 2>&1 >/tmp/crash.log 
```

这将捕获进程本身的 stdout/sterr。从父 shell 脚本调用您的脚本可能也是值得的，它可以捕获 PHP 进程退出，并转储退出代码（这将表明核心转储、信号被捕获等）。请参阅[此处](https://stackoverflow.com/questions/90418/exit-shell-script-based-on-process-exit-code)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:06:51.463

尝试在脚本开始时设置超时。

```
set_time_limit(1800); 
```

我最近发现，如果我手动运行一个脚本，它运行良好，但如果它由 Cron 运行，它会抛出超时错误。设置此限制有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:08:37.710

如果您在共享服务器上运行脚本，那么它将不允许您运行长时间运行的脚本。

如果您的脚本需要时间，请使用专用服务器。因为在共享服务器中，许多用户正在使用共享资源，所以服务器会自动终止使用额外资源的脚本。

..我会建议你使用亚马逊 EC2 免费包。在那里您将能够运行长时间运行的脚本。

谢谢

# javascript - 将一个对象的事件委托给另一个对象

> ID：13992349
> 
> 赞同：3
> 
> 时间：2012-12-21T14:58:48.213
> 
> 标签：javascript, jquery, javascript-events

我想将一个事件从一个元素委托给另一个元素。我有这个简单的测试代码，我得到一个异常：`Error: UNSPECIFIED_EVENT_TYPE_ERR: DOM Events Exception 0`在第 12 行（调度）。我已阅读[此](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget)内容，但之前的注释行没有任何区别。我怎样才能使这项工作？

代码：

```
<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script>
    function init(){}

    function delegator(e){
        alert('the first');
        var other = document.getElementById('myCanvas2');
        //e.trigger = other;
        other.dispatchEvent(e);
    }

    $("#myCanvas").live('dblclick', delegator);
    $("#myCanvas2").live('dblclick', function(){alert('the second');});
    </script>
  </head>
  <body>
    <canvas id="myCanvas" style="width:1200px; height:600px; border: solid black 1px;"></canvas>
    <canvas id="myCanvas2" style="width:1200px; height:600px; border: solid black 1px;"></canvas>
  </body>
</html> 
```

*   对我来说重要的是所有信息都将发送到委托对象，因为它将被各种其他对象替换，例如谷歌地图画布或任何其他服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:04:10.360

1.  `.live`不久前被[弃用。](http://api.jquery.com/category/deprecated/)

2.  由于您使用**的是**jQuery 使用`.trigger(...)`

    ```
    function delegator(e){
        alert('the first');
        $('#myCanvas2').trigger(e);
    }

    $("#myCanvas").on('dblclick', delegator);
    $("#myCanvas2").on('dblclick', function(){alert('the second');}); 
    ```

    演示：http: [//jsfiddle.net/maniator/zbJBd/](http://jsfiddle.net/maniator/zbJBd/)

# android - Android：如何（重新）使用 LayoutInflater

> ID：13992353
> 
> 赞同：2
> 
> 时间：2012-12-21T14:59:05.703
> 
> 标签：android, performance

我想知道如何正确获取`LayoutInflater`实例以及将其保留多长时间。

android 文档指出：

> 它从不直接使用。相反，使用 getLayoutInflater() 或 getSystemService(String) 来检索标准 LayoutInflater 实例，该实例已连接到当前上下文并为您正在运行的设备正确配置。

我的问题：

*   getSystemService(String) 是否很快，所以我可以在需要实例的任何地方调用它？
*   我应该将充气实例存储在一个变量中以备后用吗？
*   我想我在 SDK 中看到了一些接口，即 pass `LayoutInflater`，他们为什么这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:26:22.947

> getSystemService(String) 是否很快，所以我可以在需要实例的任何地方调用它？

AFAIK，是的，尽管您可能想要运行测试并检查 Traceview 中的方法跟踪以确认。

> 我应该将充气实例存储在一个变量中以备后用吗？

如果您处于紧密循环中，请在局部变量中挂起实例，而不是`getLayoutInflater()`每次都创建调用。否则，我不知道这是一个值得的优化。

> 我想我在 SDK 中看到了一些通过 LayoutInflater 的接口，他们为什么这样做？

为您省去打电话的麻烦`getLayoutInflater()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:14:03.797

> getSystemService(String) 是否很快，所以我可以在需要实例的任何地方调用它？

您也可以`inflater = LayoutInflator.from(this);`用来取回充气机。我个人发现使用这种方法编写的代码更少。

> 我应该将充气实例存储在一个变量中以备后用吗？

存储在局部变量中很好。

# redis - REDIS Pub/Sub 是否适合中等大小的二进制数据？

> ID：13992354
> 
> 赞同：4
> 
> 时间：2012-12-21T14:59:11.300
> 
> 标签：redis, publish-subscribe

我有一些工作计划通过[REDIS Pub/Sub](http://redis.io/topics/pubsub)发送给工作人员。工作涉及处理图像（JPEG，20KB-800KB，通常在 150KB 左右）。

将图像直接作为消息的有效负载发送是个好主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T20:26:58.833

我根本不认为这是一个问题。如果您确信您的订户/工作人员将能够跟上并且您不会冒用完 RAM 的风险，那么我认为这是一种有效的方法。我不知道它是否比建议的 nginx 流式传输更好，但是作为内存数据存储 redis 的扩展应该非常接近硬件和网络限制。

请记住，redis pub/sub 不是“持久的”，因此如果将图像发布到频道，当前没有人订阅它不会被拾取。图像将无处可去。

如果您需要持久性，您可以使用 redis List 轻松构建持久队列。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-08T09:29:07.480

您可以将 JPEG 文件通过 base64 编码为字符串，并将字符串发布到频道。

发送数据（有效载荷 JPEG 文件）的大小将增加到大约 1.5 倍到 2 倍。

# java - 使用 Google GSON 将字符串转换为 JSON 数组

> ID：13992356
> 
> 赞同：1
> 
> 时间：2012-12-21T14:59:20.580
> 
> 标签：java, json, gson

我正在使用 Google GSON 库将国家/地区的 ArrayList 转换为 JSON：

```
ArrayList<String> countries = new ArrayList<String>();

// arraylist gts populated

Gson gson = new Gson();
String json = gson.toJson(countries); 
```

产生：

```
["AFGHANISTAN","ALBANIA","ALGERIA","ANDORRA","ANGOLA","ANGUILLA","ANTARCTICA","ANTIGUA AND BARBUDA","ARGENTINA","ARMENIA","ARUBA","ASHMORE AND CARTIER ISLANDS","AUSTRALIA","AUSTRIA","AZERBAIJAN"] 
```

如何修改我的代码以生成 JSON 数组？例如：

```
[  
   {  
      "AFGHANISTAN",
      "ALBANIA",
      "ALGERIA",
      "ANDORRA",
      "ANGOLA",
      "ANGUILLA",
      "ANTARCTICA",
      "ANTIGUA AND BARBUDA",
      "ARGENTINA",
      "ARMENIA",
      "ARUBA",
      "ASHMORE AND CARTIER ISLANDS",
      "AUSTRALIA",
      "AUSTRIA",
      "AZERBAIJAN"
   }
] 
```

谢谢！

* * *

这是我的 Java 客户端用来解析已经包含大括号的 Web 服务响应的代码。这就是为什么我希望国家/地区的响应包含花括号：

```
Gson gson = new GsonBuilder().create();
    ArrayList<Map<String, String>> myList = gson.fromJson(result,
            new TypeToken<ArrayList<HashMap<String, String>>>() {
            }.getType());

    List<Values> list = new ArrayList<Values>();

    for (Map<String, String> m : myList) {
        list.add(new Values(m.get(attribute)));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:33:03.917

要构建您向我们展示的字符串，它根本不是 JSON，您可以这样做：

```
StringBuilder sb = new StringBuilder("[{");
for (int i=0; i<countries.size(); i++) {
    sb.append("\"").append(countries.get(i)).append("\"");
    if (i<countries.size()-1) sb.append(",");
}
sb.append("}]");
String theString = sb.toString(); 
```

我建议不要尝试使用仅专用于 JSON 的 Gson。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:36:31.523

使用花括号不是一种“风格”，它是 JSON 表示对象的方式。方括号表示一个列表，花括号用于表示一个对象，在 Javascript 中它的行为类似于地图。在列表条目周围加上花括号是没有意义的，因为在对象中您需要名称-值对（就像地图一样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:25:43.053

JSON 中数组的简单文本表示正是 Gson 返回的内容。你需要那种花括号样式做什么？

# .htaccess - 将整个子域重定向到子目录

> ID：13992358
> 
> 赞同：1
> 
> 时间：2012-12-21T14:59:31.013
> 
> 标签：.htaccess, redirect, subdomain

我的网站[http://www.designzzz.com/photography/](http://www.designzzz.com/photography/)中有这个区域 ，它被设置为子域：[http://photography.designzzz.com/](http://photography.designzzz.com/)。但由于某种原因，我不得不进行更改以将其切换回来并在 htaccess 中放置一个 301 重定向。所以访问[http://photography.designzzz.com/](http://photography.designzzz.com/)的人将自动被重定向到[http://www.designzzz.com/photography/](http://www.designzzz.com/photography/)。
但发生的事情是它只是重定向主页，而不是整个网站的 url。
例如： [http://photography.designzzz.com/the-happy-mantis/](http://photography.designzzz.com/the-happy-mantis/)应该重定向到[http://www.designzzz.com/photography/the-happy-mantis/](http://www.designzzz.com/photography/the-happy-mantis/)
我在 htaccess 中使用了这个代码：

```
RewriteCond %{HTTP_HOST} ^photography\.designzzz\.com
RewriteRule ^(.*)$ http://www.designzzz.com/photography/$1 [R=301] 
```

感谢您的帮助，并提前感谢：}
干杯

阿亚兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:14:49.683

您的代码看起来不错，尝试添加 L 标志，以便您停止执行任何其他规则，并确保这些行出现在任何其他重写规则之前

```
RewriteCond %{HTTP_HOST} ^photography\.designzzz\.com$
RewriteRule ^(.*)$ http://www.designzzz.com/photography/$1 [L,R=301] 
```

# ios - IOS UITableView“删除”按钮不出现

> ID：13992360
> 
> 赞同：0
> 
> 时间：2012-12-21T14:59:35.280
> 
> 标签：ios, objective-c, iphone, uitableview, button

我正在开发应用程序，用户可以在其中创建带有附件的帖子。对于附件，我使用以下方法`UITableView`以水平模式旋转它`viewDidLoad`：

```
// Rotates the view.
    CGAffineTransform transform = CGAffineTransformMakeRotation(-1.5707963);
    imageAttachmentTableView.transform = transform; 
```

当用户从 Photo Library 中选择图片时，它们会被加载到 UITableView 的 imageView 中。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    CGAffineTransform transform = CGAffineTransformMakeRotation(1.5707963);
    cell.imageView.transform = transform;
    cell.imageView.frame = CGRectMake(0, 0, 110, 110);

    cell.imageVenter image description hereiew.image = [imageAttachments objectAtIndex:indexPath.row];
    return cell;                  
} 
```

`cell.imageView`再次以相反方向旋转，以便图像在实际方向上可见

UITableView 是在编辑模式下制作的，因此当加载图像时，也可以通过单击删除它们。

```
- (void)viewWillAppear:(BOOL)animated {
    [imageAttachmentTableView setEditing: YES animated: YES];
} 
```

我还将默认的“删除”文本更改为“X”

```
- (NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath {
    return @"X";
} 
```

当用户点击“-”按钮“X”出现时，代码在纵向模式下完美运行，如下面的屏幕所示。

[http://img5.imageshack.us/img5/1125/screenshot20121221at742.png](http://img5.imageshack.us/img5/1125/screenshot20121221at742.png)

问题是在横向模式下，出现 (-) 按钮但没有出现“X”按钮。 [http://img833.imageshack.us/img833/6305/screenshot20121221at747.png](http://img833.imageshack.us/img833/6305/screenshot20121221at747.png)

我已经尝试了所有可能的解决方案，但无法做出任何坚持，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:16:17.457

解决了！问题是在横向模式下，UITableViewCell 大小和删除按钮框架发生了变化，所以我`UITableViewCell`使用我的自定义类进行子类化。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    OMAttachmentCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[OMAttachmentCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    CGAffineTransform transform = CGAffineTransformMakeRotation(1.5707963);
    cell.imageView.transform = transform;
    cell.imageView.frame = CGRectMake(0, 0, 110, 110);

    cell.imageView.image = [imageAttachments objectAtIndex:indexPath.row];
    return cell;                  
} 
```

在我的`OMAttachmentCell`课堂上，我实现了以下方法。

```
-(void) willTransitionToState:(UITableViewCellStateMask)state
{
    [super willTransitionToState:state];

    if ((state & UITableViewCellStateShowingDeleteConfirmationMask) == UITableViewCellStateShowingDeleteConfirmationMask) {

        for (UIView *subview in self.subviews) {

            if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]) {
                UIView *deleteButtonView = (UIView *)[subview.subviews objectAtIndex:0];
                CGRect f = deleteButtonView.frame;
                f.origin.x = 0;
                f.origin.y = 0;
                f.size.width = 30;
                f.size.height = 34;

                CGRect sf = self.frame;
                sf.size.width = 110;
                sf.size.height = 110;

                deleteButtonView.frame = f;
                self.frame = sf;
            }
        }
    }
} 
```

在这里，我刚刚更新了 Delete Button 框架和 TableCell 大小。

# javascript - js脚本检测flash player IE的调试版本

> ID：13992362
> 
> 赞同：2
> 
> 时间：2012-12-21T14:59:43.997
> 
> 标签：javascript, internet-explorer, version, flash, detect

使用[swfobject.js](http://code.google.com/p/swfobject/)我可以获得安装的 flash 播放器的版本，我可以获得发行版和内部版本号，但我不知道它是调试版还是标准版。我可以用 AS3 (flash.system.Capabilities.isDebugger) 找到它，但我需要它在 JavaScript 中。

我的问题是当在 IE 上安装了 flash player 调试时，显示 swf 之前有 6 秒的延迟。如果用户有调试 FlashPlayer 以警告他他将不得不等待，我想用 javascript 检测（在 swf 启动之前）。

# xml - XQuery：调用未声明的函数？

> ID：13992365
> 
> 赞同：0
> 
> 时间：2012-12-21T14:59:48.337
> 
> 标签：xml, function, xquery

我有以下问题：我在 .xqy 文件中编写了一个函数，但是当我尝试调用它时，出现错误：

> 调用未声明的函数：local:getStr

这就是我正在做的事情：

```
declare function local:getStr($str as xs:string) as xs:string{
...
};
return
...
<td>{local:getStr($var)}</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:15:27.253

如果您的示例除了省略号之外是完整的，那么您的问题似乎是您从未将任何命名空间绑定到 prefix `local`。您将需要添加类似

```
declare namespace local = "http://localhost/nss"; 
```

在 XQuery 模块的序言中。如果这就是问题所在，那么该错误消息就不是我这辈子见过的信息量最大的消息了。

（如果您的代码中确实有命名空间声明，但将其忽略为与问题无关，那么我建议您找到可以复制您的问题的最短示例，并将其添加到问题中。）

# r - 有条件地在函数调用中包含参数

> ID：13992367
> 
> 赞同：11
> 
> 时间：2012-12-21T14:59:55.097
> 
> 标签：r, function, argument-passing

我想调用一个函数，但根据情况我可能会用额外的参数调用它。这是一个简单的例子：

```
FUN <- function(arg1 = "default1", arg2 = "default2", arg3 = "default3")
          print(list(arg1, arg2, arg3))

x1 <- "hi"
x2 <- TRUE
x3 <- 1:3

use.arg3 <- FALSE   # This will decide if `x3` is used or not.

if (use.arg3) {
   FUN(arg1 = x1, arg2 = x2, arg3 = x3)
} else {
   FUN(arg1 = x1, arg2 = x2)
} 
```

虽然代码很清晰，但感觉有点多余。还想象一下，如果我有相似`use.arg1`的`use.arg2`变量，我会有一个丑陋的可能性组合（8）......

我在下面发布了一个解决方案，但我发现它有点复杂，以至于我总是难以记住确切的语法。

如果你有更好的想法，谢谢分享。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T15:00:12.957

一种解决方案是`do.call`在构建具有适当参数的列表后使用：

```
do.call(FUN, c(list(arg1 = x1, arg2 = x2),   # unconditional args
               list(arg3 = x3)[use.arg3]))   # conditional arg 
```

它可以很好地推广到多种条件：

```
do.call(FUN, c(list(arg1 = x1)[use.arg1]     # conditional arg
               list(arg2 = x2)[use.arg2]     # conditional arg
               list(arg3 = x3)[use.arg3]))   # conditional arg 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T15:22:11.227

Continuing the discussion from the comments on flodel's answer, here's an extension of my idea, out of curiosity. Not sure if it's really a feasible option:

```
FUN(arg1 = x1, arg2 = x2, arg3 = if(use.arg3) x3 else formals(FUN)$arg3) 
```

# reporting-services - Reporting Services 2012 部署错误：“加载代码模块时出错”

> ID：13992373
> 
> 赞同：11
> 
> 时间：2012-12-21T15:00:14.447
> 
> 标签：reporting-services

我第一次尝试使用自定义程序集将报告部署到服务器。我能够在没有程序集的情况下部署相同的报告。我正在使用 Reporting Services 2012 (Visual Studio 2010) 来部署报表。

这是我尝试部署时收到的完整错误消息：

加载代码模块时出错：'SGA.Reporting，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null'。详细信息：无法加载文件或程序集“SGA.Reporting，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

我已经阅读了关于同一问题的几篇文章，但其中没有解决我的问题。它是为 .NET Framework 4.0、AnyCPU 编译的 dll。

在我正在部署的本地 PC 上，我已将我的 dll 复制到所有这些文件夹： C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies C:\Windows\Microsoft.NET\Framework\v4.0.30319 C:\Windows\Microsoft.NET\Framework64\v4.0.30319

在我部署到的服务器上，我已将我的 dll 复制到所有这些文件夹中： C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies C:\Windows\Microsoft.NET\Framework\v4.0.30319 C:\Windows\Microsoft.NET\Framework64\v4.0.30319

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T21:44:50.463

原来我需要将 dll 复制到报表服务器上的这个文件夹中：%ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin

如果您只想将报表部署到报表服务器，那么这是报表服务器上唯一需要它的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:07:56.413

我有类似的问题。我只在公共集会上拥有它。一旦我将 dll 添加到私有程序集位置，它就可以工作了。您是否以管理员身份运行 VS？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T14:13:46.247

另一种解决方案是将您的程序集部署到 GAC。您需要“强名称”它才能部署到 GAC。当它在 GAC 中时，您不需要在 Reporting Services\ReportServer\bin 中拥有它

# android - MapsForge 动态添加的叠加项目不会重绘

> ID：13992374
> 
> 赞同：2
> 
> 时间：2012-12-21T15:00:16.247
> 
> 标签：android, android-mapview, openstreetmap

我想在运行时向 MapsForge 添加一些 Overlay 项目；我可以成功添加它们，但它们只有在我移动或缩放地图后才会出现。实际上应该如此，因为每次移动或缩放时，MapsForge 都会通过该`invalidate()`功能重新绘制图块和覆盖项目。无论如何，[正如这里所说](http://code.google.com/p/mapsforge/issues/detail?id=69)，这是自 MapsForge 0.2.0 版以来已经修复的问题：MapView 类应该能够在添加新项目时自动重绘。

我正在使用 MapsForge 0.3.1。要么我做错了，要么这个问题在当前版本中再次出现。这是我的代码；我重用[了官方 MapsForge 示例活动中的](http://code.google.com/p/mapsforge/source/browse/#git%2FApplications%2FAndroid%2FSamples%2Fsrc%2Forg%2Fmapsforge%2Fapplications%2Fandroid%2Fsamples)一些代码：

```
public class MyMapView extends MapView{

    //I brought some variables outside the Sample's function in order to add new items dynamically to the lists
    ListOverlay mListOverlay;
    List<OverlayItem> mOverlayItems;
    Polyline mPolyline;
    Circle mLastPosition;

    //Basically here I do the same actions shown in the MapsForge samples. These items appear at once, with the onCreate() functions of the Activity
    public void addInitialOverlays(){
        Circle circle = createCircle(CENTRAL_STATION);
        Polygon polygon = createPolygon(Arrays.asList(VICTORY_COLUMN, CENTRAL_STATION, BRANDENBURG_GATE));
        mPolyline = createPolyline(Arrays.asList(BRANDENBURG_GATE, VICTORY_COLUMN));
        Marker marker1 = createMarker(R.drawable.marker_red, VICTORY_COLUMN);
        Marker marker2 = createMarker(R.drawable.marker_green, BRANDENBURG_GATE);

        mLastPosition = createCircle(VICTORY_COLUMN);

        mOverlayItems.add(circle);
        mOverlayItems.add(polygon);
        mOverlayItems.add(mPolyline);
        mOverlayItems.add(marker1);
        mOverlayItems.add(marker2);
        mOverlayItems.add(mLastPosition);
        getOverlays().add(mListOverlay);
    }

    //Here is the relevant part. This is called periodically from the main Activity
    public void addPointToRoute(double latitude, double longitude) {

        GeoPoint newPoint = new GeoPoint(latitude, longitude);
        //Tried both removing the list from the overlays and re-adding it, and leaving it where it is; same result
        //getOverlays().remove(mListOverlay);
        mOverlayItems.remove(mPolyline);
        List<GeoPoint> oldPolyline = mPolyline.getPolygonalChain().getGeoPoints();
        oldPolyline.add(newPoint);
        mPolyline = createPolyline(oldPolyline);
        mOverlayItems.add(mPolyline);
        mLastPosition.setGeoPoint(newPoint);
        //getOverlays().add(mListOverlay);

        invalidateOnUiThread();//This MapView function calls either invalidate() or postInvalidate(), depending on the situation
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:40:47.503

添加叠加项目后尝试添加叠加控制器

> 事实上，我发现你可以只使用另一个函数。

例子：

```
mapView.getOverlays().add(listOverlay);
//redraw once overlay items have been added/removed
mapView.getOverlayController().redrawOverlays(); //method 1
/**OR**/
mapView.redraw(); //method 2 
```

希望这可以帮助！

# apache2 - 使用 Apache 和 mod_pywebsocket 进行分布式计算

> ID：13992381
> 
> 赞同：1
> 
> 时间：2012-12-21T15:00:56.023
> 
> 标签：apache2, websocket, distributed-computing, mod-pywebsocket

我是 Apache 的新手，所以请耐心等待。我正在尝试编写使用 WebSocket 协议与每个节点通信的分布式应用程序。重要的是它必须在客户端 - 服务器架构中工作。这意味着客户端（例如 Web 浏览器）连接到单个节点并发出一些请求。该请求可以使用 webSocket 协议在其他节点之间分发，并在计算后发送回客户端。作为服务器，我必须将 Apache 与 mod_pywebsocket 一起使用。如果任何节点由于某种原因失去连接，其余节点应检测到这种情况。更重要的是，在重新连接后，这个节点应该能够向其他服务器发送某种 ping，让他们知道他现在可用。

现在我有一个客户端和两个服务器。我能够连接到其中一个，然后连接到第二个，下载一些数据并将它们发送回客户端。所有这些都是通过使用 pywebsocket 处理程序和 pywebsocket 示例中的 echo_client.py 的一些修改来完成的。我想做的是在所有服务器之间建立永久连接，并通过在它们之间发送 WebSocket 乒乓帧来检查它们的可用性。如果其中一个 Apache 断开连接，使用它应该很容易检测到。问题是我不知道如何强制 Apache 在启动时使用 WebSocket 连接到其他服务器。这应该是某种在 Apache 重新启动后启动的模块，它连接到来自配置文件的所有地址 - 例如 - 配置文件。

我的问题是，是否有任何方法可以强制 Apache 在启动时与许多服务器建立这种连接？我希望我的解释足够清楚。如果有什么不清楚的请问我。我会试着解释一下。提前感谢您提供的任何帮助。

# azure - 如何向 ACS 服务标识添加声明

> ID：13992383
> 
> 赞同：1
> 
> 时间：2012-12-21T15:01:01.363
> 
> 标签：azure, identity, claims-based-identity, acs

我什至不确定这是否可行，但我无法在任何 kb、帮助或文档中找到明确的答案。

我有一个通过 ACS 保护的 WebAPI。应用程序使用服务身份通过 ACS 和我的 WebAPI 进行身份验证以允许访问。我想做的是为服务身份提出声明以识别个人身份。例如，服务标识 A 提供类型和 ID，服务标识 B 为相同的声明类型提供不同的值，然后我的 WebAPI 可以根据声明值授权特定的调用。

目前，我通过使用输出声明和通过 ACS 门户设置声明值的规则组实现了这一点，但是规则组应用于访问依赖应用程序（我的 WebAPI）的所有服务身份，我需要的是让每个服务身份都具有不同的索赔价值。

由于所有通信都是服务到服务，因此我计划使用 ACS 而不是其他身份提供商，例如 Live/Microsoft Account 或 Google。然而，目前我能得出的唯一结论是实施我自己的自定义 STS 来提供声明值。

我希望我已经清楚地解释了我的场景，任何人都可以提供帮助，我如何为单个服务身份设置声明值，或者我应该以不同的方式这样做？

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:07:54.943

IIRC 应用程序创建自己的令牌并使用 cert/symm 密钥对其进行签名 - 该令牌中的声明然后成为规则引擎中的输入......

..但已经有一段时间了；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:56:20.853

在我离开办公室过圣诞节/新年假期之前，我设法解决了这个问题，并想说明我是如何为其他可能觉得有用的人解决这个问题的。

我从这个问题中退后一步，以全新的视角重新审视它。由于我的应用程序基于服务身份进行身份验证，并且身份验证在调用我的服务的服务之间进行，因此不会有大量服务身份需要进行身份验证。因此，对于我的要求，我能够利用规则组根据提供的声明提供声明。

我所有的 Windows Azure 访问控制服务标识都提出了一个名称标识符声明（[http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name)标识符），因此对于每个新的服务标识，我都创建了一个新规则ACS 门户中的组：

![创建新的 ACS 规则组](../Images/7cb964d222dc1b1f18478dedf26bd944.png)

创建此新规则组后，我选择添加如下规则。我选择 InputClaim Issuer 是访问控制服务，因为 ACS 正在提供令牌以对我的服务进行身份验证。接下来选择我希望收到的输入声明类型，并且我在 If 语句中检查它。因此，在下面的示例中，如果提供的 nameidentifier 声明的值为 StackOverflow（我期望的服务标识的名称），那么我希望使用 ACS 返回的令牌返回值为 UK 的 Country 输出声明。我还添加了额外的规则，以便在需要时添加更多的输出声明。这使我能够为相应的服务标识返回正确的声明和值。

![添加 ACS 声明规则](../Images/b30f55dd98884d66112ba314ec5efa30.png)

最后，我进入我的依赖方应用程序列表并选择了我的依赖方应用程序（我的服务）并选择了我创建的新规则组。

![为依赖方应用程序选择规则组](../Images/bd6f70f85660cb21017b4963cb829f0f.png)

这种方法解决了我的问题，使我现在能够从提供给我的休息服务的令牌中读取声明，并根据提供的值做出决定。我开始寻找一种更复杂的方法，当我退后一步并清楚地查看需求时，我发现我能够通过核心 ACS 功能实现我的需求。希望这可以帮助其他有类似要求的人。

# vb.net - LINQ-to-SQL 更新查询

> ID：13992392
> 
> 赞同：2
> 
> 时间：2012-12-21T15:01:38.827
> 
> 标签：vb.net, entity-framework, linq-to-sql, entity

我在链接到 SQL 和更新记录时遇到问题，我认为问题出在当前事务上，因为我正在循环访问连接的数据上下文：

```
 Using db = New PostcodeLookupModelContainer()

        Dim Stores = From b In db.lkpStores Where b.storeId ' = iStoreID '  Order By b.storeId

        For Each store In Stores

            Debug.Print(store.StorePostcode)

            Dim newStore As New lkpStores()
            newStore.depotId = store.depotId
            newStore.StorePostcode = store.StorePostcode
            newStore.depotId = store.depotId
            newStore.DepotDistance = store.DepotDistance

            db.lkpStores.Attach(newStore)
            newStore.DepotDistance = 50

            db.SaveChanges()

        Next store

    End Using 
```

我收到错误时的行是 db.SaveChanges() 并且错误是“不允许新事务，因为会话中还有其他线程正在运行。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:06:20.480

不要认为您需要附加新对象，因为它已经存在。

```
db.lkpStores.Attach(newStore) 
```

只需从 ForEach 循环更新存储对象并调用提交

```
 Using db = New PostcodeLookupModelContainer()

        Dim Stores = From b In db.lkpStores Where b.storeId ' = iStoreID '  Order By b.storeId

        For Each store In Stores
            store.DepotDistance = 50
            db.SaveChanges()
        Next store

    End Using 
```

您还可以重构代码

```
 Using db = New PostcodeLookupModelContainer()

        Dim store = (From b In db.lkpStores Where b.storeId).SingleOrDefault 'Assumming the storeID is unique

        if store isnot nothing then
            store.DepotDistance = 50
            db.SaveChanges()
        end if

    End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:09:33.210

尝试将您的“ `Dim Stores = From b In db.lkpStores Where b.storeId ' = iStoreID ' Order By b.storeId`”转换为 List() 然后循环它

# sql - ms-access 2003 DateSerial 函数溢出错误

> ID：13992397
> 
> 赞同：0
> 
> 时间：2012-12-21T15:02:14.613
> 
> 标签：sql, ms-access-2003

> **可能重复：**
> [ms-access 内置函数 Month(number)](https://stackoverflow.com/questions/13979943/ms-access-built-in-function-monthnumber)

在我的一个查询中，我具有以下功能。

```
DateSerial(Date(),[Roster]![DOH],[Roster]![DOH]) 
```

当我调用查询时，我收到一个溢出错误。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:07:47.250

因此，如果`[DOH]`是雇用日期，并且您想要当年的周年纪念日，请使用：

```
DateSerial(Year(Date()), Month([Roster]![DOH]), Day([Roster]![DOH])) 
```

# android - Android ListView ClickListener

> ID：13992399
> 
> 赞同：1
> 
> 时间：2012-12-21T15:02:30.683
> 
> 标签：android, android-listview, onclicklistener, onitemclicklistener

我有一个关于使用自定义适配器为列表视图创建点击监听器的最佳实践的问题。所以，我的问题是：在哪里实现点击监听器更好？在自定义适配器中还是在 Activity 中实现 setOnItemClickListener 更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:13:24.673

AFAIK 没有“最好”的方法来做到这一点。这在很大程度上取决于您要达到的目标。

如果您只希望行中的一个单独元素可单击，那么您必须在 Adapters`getView()`方法中执行此操作。

但是，如果您希望整行都可以点击，那么您可以选择在`getView()`方法中进行，或者在 Activity 中使用`setOnItemClickListener()`

如果您想拆分后一种情况下哪个更好，这将取决于单击该行时采取的操作。如果它是任意且小的东西，不需要访问许多其他对象，那么在适配器内部会很容易。但是，如果它确实需要与其他对象（即上下文、数据源等）交互，那么如果您已经在 Activity 中引用了这些东西，那么在 Activity 中执行它可能会更容易。这样就避免了将所有这些东西传递给适配器的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:11:46.370

`setOnItemClickListener`在实施`Activity`

# java - 获取自己的日、年和月

> ID：13992401
> 
> 赞同：0
> 
> 时间：2012-12-21T15:02:46.503
> 
> 标签：java, android

现在是这样，我有一个`long`带有日期和时间的变量。所以我使用 DateFormat 来获取自己的日期和时间，现在我想获取自己的年、月、日、小时和分钟。日期和时间在 a 中`String`，所以实际上我可以用它来剪断字符串`substring`。但是因为例如瑞典的日期是这样的：“dd/mm/yyyy”，而美国的日期是这样的：“mm/dd/yyyy”。所以如果我只是剪掉瑞典日期的字符串，天变量将变成月份。

这是我的代码：

```
String start = mCursor.getLong(1);

Format df = DateFormat.getDateFormat(this);
Format tf = DateFormat.getTimeFormat(this);

String date = df.format(start);
String time = tf.format(start); 
```

所以我的问题是，有没有办法在自己的字符串中为自己获取年、月、日、小时和分钟？

在此先感谢，GuiceU。（英语不好，我知道）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T15:05:10.207

我不会那样做的。使用`java.util.Calendar`：

```
DateFormat dateFormatter = new SimpleDateFormat("yyyy-MMM-dd");
dateFormatter.setLenient(false);
String dateStr = "2012-Dec-21";
Date date = dateFormatter.parse(dateStr);
Calendar calendar = Calendar.getInstance();
calendar.setTime(date);
int month = calendar.get(Calendar.MONTH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T06:10:07.047

看起来问题和接受的答案都忽略了时区，这可能是一个问题。

[使用Joda-Time](http://www.joda.org/joda-time/)或 Java 8 中的新 java.time.* 包，这项工作要容易得多。你说你有`long`原始价值，所以让我们从那里开始，假设它代表 Unix 纪元（1970）的毫秒数。根本不需要处理创建或解析日期的字符串表示。Joda-Time 提供了许多访问年、月等数字和名称的点。Joda-Time 将名称本地化为瑞典语或英语。

日期样式代码是一对字符。第一个字符是日期样式，第二个字符是时间样式。指定字符“S”表示短样式，“M”表示中号，“L”表示长，“F”表示完整。通过指定样式字符“-”可以省略日期或时间。

```
long input = DateTime.now().getMillis();

DateTimeZone timeZone = DateTimeZone.forID( "Europe/Stockholm" );
DateTime dateTime = new DateTime( input, timeZone );
int year = dateTime.getYear();
int month = dateTime.getMonthOfYear(); // 1-based counting, 1 = January. Unlike crazy java.util.Date/Calendar.
int dayOfMonth = dateTime.getDayOfMonth();
int hourOfDay = dateTime.getHourOfDay();
int minuteOfHour = dateTime.getMinuteOfHour();

java.util.Locale localeSweden = new Locale( "sv", "SE" ); // ( language code, country code );
String monthName_Swedish = dateTime.monthOfYear().getAsText( localeSweden );
String monthName_UnitedStates = dateTime.monthOfYear().getAsText( java.util.Locale.US );

DateTimeFormatter formatter_Sweden = DateTimeFormat.forStyle( "LM" ).withLocale( localeSweden ).withZone( timeZone );
DateTimeFormatter formatter_UnitedStates_NewYork = DateTimeFormat.forStyle( "LM" ).withLocale( java.util.Locale.US ).withZone( DateTimeZone.forID( "America/New_York" ) );
String text_Swedish = formatter_Sweden.print( dateTime );
String text_UnitedStates_NewYork = formatter_UnitedStates_NewYork.print( dateTime );

DateTime dateTimeUtcGmt = dateTime.withZone( DateTimeZone.UTC ); 
```

转储到控制台...</p>

```
System.out.println( "dateTime: " + dateTime );
System.out.println( "monthName_Swedish: " + monthName_Swedish );
System.out.println( "monthName_UnitedStates: " + monthName_UnitedStates );
System.out.println( "text_Swedish: " + text_Swedish );
System.out.println( "text_UnitedStates_NewYork: " + text_UnitedStates_NewYork );
System.out.println( "dateTimeUtcGmt: " + dateTimeUtcGmt ); 
```

运行时……</p>

```
dateTime: 2014-02-16T07:12:19.301+01:00
monthName_Swedish: februari
monthName_UnitedStates: February
text_Swedish: den 16 februari 2014 07:12:19
text_UnitedStates_NewYork: February 16, 2014 1:12:19 AM
dateTimeUtcGmt: 2014-02-16T06:12:19.301Z 
```

# sql - 按条件查找 SQL Server 中缺失的行

> ID：13992402
> 
> 赞同：-3
> 
> 时间：2012-12-21T15:02:48.360
> 
> 标签：sql, sql-server

我试图找出两个参数化日期之间不存在哪些行。

例如（2010 年 1 月 1 日和 2011 年 1 月 1 日）

```
ID      Date    col 3   col 4
123     01/01/2010  x   x
456     01/01/2010  x   x
6578    01/01/2010  x   x
123     01/03/2010  x   x
456     01/03/2010  x   x
6578        01/03/2010  x   x
123     01/01/2011  x   x
456     01/01/2011  x   x
789     01/01/2011  x   x
123     01/01/2012  x   x
456     01/01/2012  x   x
789     01/01/2012  x   x 
```

我想退货：

```
ID      Date    col 3   col 4
6578    01/01/2010  x   x
789     01/01/2011  x   x 
```

所以在伪代码中

```
If Id exists for 01/01/2010 but not 01/01/2011, return result
AND
If Id exists for 01/01/2011 but not 01/01/2010, return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:12:59.063

首先你的逻辑不确定。现在试试这个。这是[小提琴的例子](http://sqlfiddle.com/#!3/46de0/1)

```
;with cte as
(
  select id 
  from t
  group by id
  having count(id) = 1
)
select t.id, t.date, t.col3, t.col4
from t join cte on t.id = cte.id

--Results
ID      DATE           COL3 COL4
789     2011-01-01      x   x
6578    2010-01-01      x   x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:12:10.497

如果您正在寻找只出现一次的行，那么这将起作用：

```
select *
from (select t.*,
             count(*) over (partition by id) as NumYears
      from t
     ) t
where NumYears = 1 
```

也许更一般的形式是：

```
select *
from t
where t.id in (select id
               from t
               group by id
               having (max(case when year(date) = 2010 then 1 else 0 end) = 1 and
                       max(case when year(date) = 2011 then 1 else 0 end) = 0
                      ) or
                      (max(case when year(date) = 2010 then 1 else 0 end) = 0 and
                       max(case when year(date) = 2011 then 1 else 0 end) = 1
                      )
               ) 
```

# regex - 根据 RFC5321/RFC5322 对电子邮件地址进行正则表达式验证

> ID：13992403
> 
> 赞同：17
> 
> 时间：2012-12-21T15:02:51.013
> 
> 标签：regex, validation, email-address

有谁知道根据[RFC5321](https://www.rfc-editor.org/rfc/rfc5321) / [RFC5322](https://www.rfc-editor.org/rfc/rfc5322)验证电子邮件地址的正则表达式？

由于（嵌套）注释使语法不规则，因此只应考虑没有注释的地址。

当然，如果您有兴趣验证某人实际拥有的地址，那么唯一真正的验证就是向该地址发送电子邮件并检查所有者是否收到了它。然而，我纯粹对 RFC 标准感兴趣。对于实用的方法[，这个问题](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)更相关。

除了评论之外，我愿意牺牲折叠空白，但除此之外，我对拒绝任何 RFC5321/2 有效地址的表达式不感兴趣。（可以说，在某些情况下忽略折叠空白甚至是有意义的。）

理想情况下，正则表达式会拒绝任何*不是*RFC 有效的东西，但这并不重要。例如，在正则表达式中包含详尽的顶级域列表并不是那么有趣。只需接受任何顶级域就足够了。

我不确定地址标签（例如 address+tag@domain.org）是否是我提到的 RFC 的一部分，但我希望正则表达式能够验证这些。

IPv6 应该被正确处理（[RFC5952](https://www.rfc-editor.org/rfc/rfc5952)）。

据我了解，国际化电子邮件（[RFC6530](https://www.rfc-editor.org/rfc/rfc6530)、[RFC6531](https://www.rfc-editor.org/rfc/rfc6531)、[RFC6532](https://www.rfc-editor.org/rfc/rfc6532)、[RFC6533](https://www.rfc-editor.org/rfc/rfc6533)）仍处于实验阶段，但验证这些地址的表达式也会很有趣。

为了使答案普遍有趣，如果任何正则表达式采用 POSIX 格式，那就太好了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-18T08:08:44.713

可嵌套的注释使电子邮件地址的语法不规则（无上下文）。但是，如果您排除注释，则生成的语法是常规的。主要定义允许（折叠）词汇标记（例如`a @ b.com`）之间的空白。删除所有折叠空格会导致规范形式。

这是根据 RFC 5322（排除注释）的规范电子邮件地址的正则表达式：

`([!#-'*+/-9=?A-Z^-~-]+(\.[!#-'*+/-9=?A-Z^-~-]+)*|"([]!#-[^-~ \t]|(\\[\t -~]))+")@([!#-'*+/-9=?A-Z^-~-]+(\.[!#-'*+/-9=?A-Z^-~-]+)*|\[[\t -Z^-~]*])`

如果您需要接受折叠空格，那么这是根据 RFC 5322（排除注释）的电子邮件地址的正则表达式：

`((([\t ]*\r\n)?[\t ]+)?[-!#-'*+/-9=?A-Z^-~]+(\.[-!#-'*+/-9=?A-Z^-~]+)*(([\t ]*\r\n)?[\t ]+)?|(([\t ]*\r\n)?[\t ]+)?"(((([\t ]*\r\n)?[\t ]+)?([]!#-[^-~]|(\\[\t -~])))+(([\t ]*\r\n)?[\t ]+)?|(([\t ]*\r\n)?[\t ]+)?)"(([\t ]*\r\n)?[\t ]+)?)@((([\t ]*\r\n)?[\t ]+)?[-!#-'*+/-9=?A-Z^-~]+(\.[-!#-'*+/-9=?A-Z^-~]+)*(([\t ]*\r\n)?[\t ]+)?|(([\t ]*\r\n)?[\t ]+)?\[((([\t ]*\r\n)?[\t ]+)?[!-Z^-~])*(([\t ]*\r\n)?[\t ]+)?](([\t ]*\r\n)?[\t ]+)?)`

有效的电子邮件地址在 RFC 5321 (SMTP) 中有进一步的限制。它基本上只留下@-sign 之前的部分，但只接受@-sign 之后的主机名或地址文字。（“---.---”是有效的点原子，但不是有效的主机名，“[...]”是有效的域文字，但不是有效的地址文字。）

RFC 5321 中的语法在涉及主机名和 IP 地址时过于宽松。我冒昧地“纠正”了有问题的规则，使用[这个草案](https://tools.ietf.org/id/draft-main-ipaddr-text-rep-01.txt)和[RFC 1034](https://www.rfc-editor.org/rfc/rfc1034)（第 3.5 节）作为指导方针。这是生成的正则表达式。

`([!#-'*+/-9=?A-Z^-~-]+(\.[!#-'*+/-9=?A-Z^-~-]+)*|"([]!#-[^-~ \t]|(\\[\t -~]))+")@([0-9A-Za-z]([0-9A-Za-z-]{0,61}[0-9A-Za-z])?(\.[0-9A-Za-z]([0-9A-Za-z-]{0,61}[0-9A-Za-z])?)*|\[((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|IPv6:((((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){6}|::((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){5}|[0-9A-Fa-f]{0,4}::((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){4}|(((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):)?(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}))?::((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){3}|(((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){0,2}(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}))?::((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){2}|(((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){0,3}(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}))?::(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):|(((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){0,4}(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}))?::)((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3})|(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3})|(((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){0,5}(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}))?::(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3})|(((0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}):){0,6}(0|[1-9A-Fa-f][0-9A-Fa-f]{0,3}))?::)|(?!IPv6:)[0-9A-Za-z-]*[0-9A-Za-z]:[!-Z^-~]+)])`

所有正则表达式都是 POSIX ERE。最后一个使用负前瞻。有关正则表达式的推导，请参见[此处。](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address/14075810#14075810)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-21T15:27:50.650

更新：

正如 Michael Stramel 指出的 RFC822 已过时，请参阅他的评论。

* * *

据我所知，RFC822 指定了电子邮件地址语法。

[http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)

# zend-lucene - Zend Lucene 删除文档问题

> ID：13992406
> 
> 赞同：5
> 
> 时间：2012-12-21T15:03:00.367
> 
> 标签：zend-lucene

我正在尝试使用 zend lucene 删除文档。以下是我的代码

```
$index = Zend_Search_Lucene::open('data/index');
foreach ($index->find('pk:' . $this->getId()) as $hit) {
        $index->delete($hit->id);
    }
$index->commit(); 
```

当我运行它并检查我的索引文件夹时，会创建一个像这样 _f4t5_1.del 的新文件

但是当我进行搜索时，已删除的文档在搜索中可用，并且还检查了

$index->​​numDocs();

此方法还在删除前后返回相同的计数。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:12:08.950

才发现问题。问题是由于我的代码中的逻辑错误造成的。删除后，我正在调用另一个函数，该函数再次将文档添加到索引中。当我检查文档 ID 是否在删除后发现它不同时，这有助于我跟踪问题。谢谢您的帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:47:52.343

这可能会有所帮助：[php lucene 如何更新和删除索引文件中的行](https://stackoverflow.com/questions/5143180/php-lucene-how-to-update-and-delete-rows-in-index-file)

您是否检查过以确保文件确实被删除了。

> **Zend_Search_Lucene::isDeleted($id)**方法可以用来检查一个文档是否被删除。
> 
> ```
> for ($count = 0; $count < $index->maxDoc(); $count++) {
>     if ($index->isDeleted($count)) {
>         echo "Document #$id is deleted.\n";
>     }
> } 
> ```

您是否尝试过运行[索引优化](http://framework.zend.com/manual/1.12/en/zend.search.lucene.index-creation.html#zend.search.lucene.index-creation.optimization)：

> 索引优化会删除已删除的文档并将文档的 ID 压缩到更小的范围内。因此，文档的内部 id 在索引优化期间可能会发生变化。

# cassandra - 使用 ReverseIndexQuery 时出现 BadRequestException

> ID：13992410
> 
> 赞同：1
> 
> 时间：2012-12-21T15:03:33.710
> 
> 标签：cassandra, astyanax

我是卡桑德拉的新手。我正在使用 Astyanax 的 ReverseIndexQuery 按范围获取数据。我能够将数据插入 USER 和 USER_INDEX 列族。但是在使用 ReverseIndexQuery 获取数据时，出现以下错误。

com.netflix.astyanax.connectionpool.exceptions.BadRequestException：BadRequestException：[主机=本地主机（127.0.0.1）：9160，延迟=16（16），尝试= 1]InvalidRequestException（为什么：字符串没有验证。）

这是我的代码和列族定义：

```
import com.netflix.astyanax.AstyanaxContext; 
import com.netflix.astyanax.Keyspace; 
import com.netflix.astyanax.MutationBatch; 
import com.netflix.astyanax.annotations.Component; 
import com.netflix.astyanax.connectionpool.NodeDiscoveryType; 
import com.netflix.astyanax.connectionpool.OperationResult; 
import com.netflix.astyanax.connectionpool.exceptions.ConnectionException; 
import com.netflix.astyanax.connectionpool.impl.ConnectionPoolConfigurationImpl; 
import com.netflix.astyanax.connectionpool.impl.CountingConnectionPoolMonitor; 
import com.netflix.astyanax.impl.AstyanaxConfigurationImpl; 
import com.netflix.astyanax.model.ColumnFamily; 

import com.netflix.astyanax.model.Row; 
import com.netflix.astyanax.serializers.LongSerializer; 
import com.netflix.astyanax.recipes.Shards; 
import com.netflix.astyanax.recipes.ReverseIndexQuery; 

import com.netflix.astyanax.serializers.StringSerializer; 
import com.netflix.astyanax.thrift.ThriftFamilyFactory; 

import com.google.common.base.Function; 

import java.util.Arrays; 
import java.util.Iterator; 

public class AstyanaxTest { 

        /** 
         * @param args 
         */ 
        private static class IndexEntry { 
                @Override 
                public boolean equals(Object o) { 
                        IndexEntry ie = (IndexEntry) o; 
                        return (this.key == ie.key) && (this.value == ie.value); 
                } 

                @Override 
                public int hashCode() { 
                        System.out.println("inside hashcode"); 
                        return key.hashCode() * value.hashCode(); 
                } 

                @Override 
                public String toString() { 
                        return value + ":" + key; 
                } 

                @Component(ordinal = 0) 
                Long value; 

                @Component(ordinal = 1) 
                Long key; 

                public IndexEntry(Long value, Long key) { 
                        this.value = value; 
                        this.key = key; 
                } 

        } 

        public static void main(String[] args) { 

                AstyanaxContext<Keyspace> ctx = new AstyanaxContext.Builder() 
                                .forKeyspace("LOG_TRACER").withAstyanaxConfiguration( 
                                                new AstyanaxConfigurationImpl() 
                                                                .setDiscoveryType(NodeDiscoveryType.NONE)) 
                                .withConnectionPoolConfiguration( 
                                                new ConnectionPoolConfigurationImpl("ConnPool") 
                                                                .setPort(9160).setMaxConnsPerHost(1) 
                                                                .setMaxBlockedThreadsPerHost(1).setSeeds( 
                                                                                "localhost" + ":" + 9160) 
                                                                .setConnectTimeout(10000)) 
                                .withConnectionPoolMonitor(new CountingConnectionPoolMonitor()) 

                                .buildKeyspace(ThriftFamilyFactory.getInstance()); 
                ctx.start(); 
                Keyspace keyspace = ctx.getEntity(); 

                ColumnFamily<Long, String> usercf = ColumnFamily 
                                .<Long, String> newColumnFamily("USER", LongSerializer.get(), 
                                                StringSerializer.get()); 

                ColumnFamily<String, String> userindexcf = ColumnFamily 
                                .newColumnFamily("USER_INDEX", StringSerializer.get(), 
                                                StringSerializer.get()); 

                MutationBatch batch = keyspace.prepareMutationBatch(); 

                long age = 10; 

                for (long row = 0; row < 1000; row++) { 
                        long value = age + row; 

                        batch.withRow(usercf, row).putColumn("FIRST_NAME", 
                                        "Prafulla" + row, null).putColumn("LAST_NAME", 
                                        "Pradhan" + row).putColumn("AGE", value + ""); 

                        batch.withRow(userindexcf, "AGE_" + (row % 11)).putColumn( 
                                        new IndexEntry(value, row).toString(), row + "", null); 
                        System.out 
                                        .println("value " + new IndexEntry(value, row).toString()); 
                } 

                try { 
                        OperationResult<Void> result = batch.execute(); 
                        System.out.println("Inserted..." + result.getAttemptsCount()); 
                } catch (ConnectionException e) { 
                        System.out.println("error " + e.getMessage()); 
                } 

                // Fetch using range of AGE 
                ReverseIndexQuery.newQuery(keyspace, usercf, userindexcf.getName(), 
                                LongSerializer.get()).fromIndexValue(10L).toIndexValue(100L) 
                                .withIndexShards( 
                                                new Shards.StringShardBuilder().setPrefix("AGE_") 
                                                                .setShardCount(11).build()).withColumnSlice( 
                                                Arrays 
                                                                .asList(new String[] { "FIRST_NAME", 
                                                                                "LAST_NAME" })).forEach( 
                                                new Function<Row<Long, String>, Void>() { 
                                                        public Void apply(Row<Long, String> eachRow) { 
                                                                System.out.println("Key " 
                                                                                + eachRow.getRawKey()); 
                                                                for (Iterator iterator = eachRow.getColumns() 
                                                                                .iterator(); iterator.hasNext();) { 

                                                                } 
                                                                return null; 
                                                        } 
                                                }).execute(); 

        } 
} 

CREATE COLUMN FAMILY USER WITH comparator=UTF8Type and  key_validation_class=LongType 

CREATE COLUMN FAMILY USER_INDEX WITH comparator=UTF8Type and  key_validation_class=UTF8Type 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:01:49.357

我经常在混淆数据类型时看到这一点。当需要字符串时，您是否将原始字节发送到列？

# c# - 将单元格设置为 GridView c#.net 中的多行

> ID：13992417
> 
> 赞同：0
> 
> 时间：2012-12-21T15:04:05.740
> 
> 标签：c#, asp.net, gridview

我在 asp.net (c#) 中使用绑定到 EntityDataSource 的 GridView

我想将一列文本设置为 3 行（高度），而不是适合宽度。

我玩了一点，但没有成功这里是代码本身

```
 <asp:TemplateField HeaderText="Description" SortExpression="Description">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Description") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Bind("Description") %>'></asp:Label>
                            </ItemTemplate>
                            <ControlStyle Height="20px" />
                            <ItemStyle Height="50px" Width="150px" Wrap="False" />
                        </asp:TemplateField> 
```

顺便说一句，我没有特别需要它作为模板字段......

有人有想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:39:53.103

ItemStyle 将应用于单元格；尝试将大小也应用于标签和文本框。另外，您是否不希望将 Wrap 属性设置为 True 以便内容会自动换行并且您会在 3 行内获得内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:41:42.350

您可以使用 TextBox 或 .NET 服务器控件代替 TextBox：

```
<asp:TextBox id="TextArea1" TextMode="multiline" runat="server" /> 
```

或者您可以使用客户端标签，带有 runat = "server"

```
<textarea id="TextArea1" cols="20" rows="2" runat="server"></textarea> 
```

有了这个提示，您可以将其视为三行的文本框。

# asp.net - ViewState 和序列化对象版本控制

> ID：13992422
> 
> 赞同：2
> 
> 时间：2012-12-21T15:04:17.017
> 
> 标签：asp.net, .net, json, deployment, viewstate

我们正在使用 ASP.NET 视图状态来存储我们自己的对象（即，不仅仅是原始类型）。每次我们进行构建时，构建号都会增加。我们试图解决的问题是在服务器更新期间：

1.  用户加载页面
2.  我们部署了一个新版本的 Web 应用程序
3.  用户在同一页面上导致回发，并引发异常：

    *   HttpException：此页面的状态信息无效，可能已损坏。
    *   ViewStateException：无效的视图状态。
    *   ArgumentException：序列化数据无效。
    *   FileLoadException：*无法加载文件或程序集“[我们的程序集]，Version=[我们的新版本]，Culture=neutral，PublicKeyToken=...”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配*

我理解为什么会发生这种情况 - ViewState 已使用该类的先前版本进行序列化，然后尝试使用新版本进行反序列化，而 .NET 序列化不支持这一点。

我们考虑过创建自定义 PageStatePersister 并使用 JSON（然后对其进行加密）来序列化/反序列化，因为数据成员几乎总是在构建之间兼容。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:30:08.453

首先，在 viewstate 上序列化数据不是一个好主意，一个原因是这种反序列化与您的体验不匹配，但另一个问题是数据正在传输到服务器并在每次回发时返回。

我会使用一种简单的存储库方法，例如将数据存储在缓存或会话中，这样无论存储在何处以及如何持久化，您都可以询问存储库，这用于模拟内存存储库。所以你有像“MyDataSotarage.GetMyCustomObject()”和“MyDataSotarage.SaveMyCustomObject(CustomObject obj)”这样的东西，所以在存储库中有你的逻辑将项目添加到缓存（例如使用用户ID和对象名称作为键）或会话如果你喜欢（不要害怕他们，有些人会）。它更像是一种设计方法而不是实现方法，但通过这种方式，您将完全解耦数据的存储方式，您将避免序列化问题，您将节省 KB 的网络流量等。

# mysql - 编写 MYSQL REGEXP：贪婪 vs 否定混淆

> ID：13992425
> 
> 赞同：4
> 
> 时间：2012-12-21T15:04:46.050
> 
> 标签：mysql, regex

我正在寻找一些有关 MYSQL 查询的正则表达式的帮助。我对表达式还很陌生，并且已经让自己彻底困惑了。

我的数据库单元看起来像这样

```
1314{{Here is some data}}1213{{More data here}}1112{{Data ahoy}} 
```

我正在尝试编写一个表达式来尝试匹配数据集，但只匹配括号内的数据。

例如，假设**$year=1314**和**$term="ahoy"**。

使用以下正则表达式：

```
$year\{\{.* $term.*\}\} 
```

它返回一个匹配 - 因为它匹配 1112 前缀数据集的最终“}}”。我不希望它这样做，但是尽管阅读了这个贪婪/否定的业务，但我无法让语法正常工作。实现我所追求的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:08:07.627

尝试：

```
$year\{\{[^}]*$term[^}]*\}\} 
```

where`[^}]*`匹配任何不是 a 的东西，`}`所以当它第一次出现时它将停止匹配`}`

`.*`是贪婪的，所以它会匹配最后一次出现的可能，所以`.*\}\}`匹配最后一组`}}`使其不贪婪，你可以使用`?`like `.*?\}\}`，但我更喜欢使用否定。

# c# - 在 Windows 窗体中使用什么控件来获得分页搜索结果，例如 Asp.Net 中的中继器？

> ID：13992428
> 
> 赞同：2
> 
> 时间：2012-12-21T15:04:51.657
> 
> 标签：c#, winforms

我被要求查看是否在 windows 窗体中 c# 我可以以某种方式使其布局与来自 Asp 的转发器相同。我附上一个打印屏幕。我是 Windows 窗体应用程序的新手。我按照此处所述尝试使用 DataRepeater，但无法进行分页，因为您将看到附加的图像。[http://blogs.msdn.com/b/vsdata/archive/2009/08/12/datarepeater-control-for-windows-forms.aspx](http://blogs.msdn.com/b/vsdata/archive/2009/08/12/datarepeater-control-for-windows-forms.aspx) ![在此处输入图像描述](../Images/19670324a256c6b879b752ad1dc7052d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:25:53.510

这是一个关于使用 DataGrid 实现分页的简单教程的链接。这应该为您提供基础知识，您可以进一步修改它以满足您的需求。

[http://www.codeproject.com/Articles/16303/DataGrid-Paging-C-Windows-Forms](http://www.codeproject.com/Articles/16303/DataGrid-Paging-C-Windows-Forms)

# c# - 在运行时动态向 TableLayoutPanel 添加控件

> ID：13992429
> 
> 赞同：35
> 
> 时间：2012-12-21T15:04:53.077
> 
> 标签：c#, .net, winforms, tablelayoutpanel

我有一个以两列和 0 行开头的 TableLayoutPanel。我需要做的是，动态添加一行并用不同的控件填充两列（它将是面板）。在 Form1 中，我以这种方式创建 TableLayout：

```
TableLayoutPanel Table = new TableLayoutPanel();
Table.Location = new Point(10, 40);
Table.Size = new Size(620,100);
Table.AutoSize = true;
Table.Name = "Desk";
Table.ColumnCount = 2;
Table.RowCount = 0;
Table.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
Table.GrowStyle = System.Windows.Forms.TableLayoutPanelGrowStyle.AddRows;
this.Controls.Add(Table); 
```

之后在运行时我得到我需要多少行，以及它们是否将填充一个面板或一些标签。可能会发生在同一行左侧将是面板，右侧标签等。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-21T15:08:01.210

使用这样的东西：

```
Table.Controls.Add(new Label { Text = "Type:", Anchor = AnchorStyles.Left, AutoSize = true }, 0, 0);
Table.Controls.Add(new ComboBox { Dock = DockStyle.Fill }, 0, 1); 
```

您不需要定义行数和列数，它们会自动添加。

# vb.net - 将目录的内容存储在数组中，Visual Basic？

> ID：13992433
> 
> 赞同：1
> 
> 时间：2012-12-21T15:05:08.267
> 
> 标签：vb.net, visual-studio-2010

我对 Visual Basic 比较陌生，我正在做一个项目，我需要在该项目中创建一个“*链接*”到某个目录中的单个文件。这样，用户可以看到列出的所有文件，可以单击单个文件并在其上运行某些东西。我相信有很多方法可以做到这一点，但如果你们可以给我一些关于如何实现这一点的想法，我将不胜感激。

谢谢，凯尔R。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:20:51.523

Visual Studio 使用 VB.Net，你确实可以这样做：

```
Dim eachFileInMydirectory As String() = Directory.GetFiles("C:\mydirectory") 
```

现在 mydirectory 中的所有文件都存储在**eachFileInMydirectory**中，它是一个字符串数组。您需要将以下行添加到 VB 文件的最顶部：

```
Imports System.IO 
```

# sql-server - 如何选择分隔字符串的元素？

> ID：13992435
> 
> 赞同：1
> 
> 时间：2012-12-21T15:05:14.817
> 
> 标签：sql-server, tsql

> **可能重复：**
> [T-SQL：与字符串连接相反 - 如何将字符串拆分为多个记录](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)
> [tsql 中等效的拆分函数？](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)
> [如何在不创建函数的情况下在 SQL Server 中拆分分隔字符串？](https://stackoverflow.com/questions/5722700/how-do-i-split-a-delimited-string-in-sql-server-without-creating-a-function)

假设我有一个具有以下值的 varchar：

```
'1:2:3:4:5' 
```

我想写一个选择语句，结果是：

```
1
2
3
4
5 
```

这可能吗？谢谢。

# xslt - 如何将有效的 XSL 2.0 DateTime 转换转换为 xsl 1.0

> ID：13992436
> 
> 赞同：0
> 
> 时间：2012-12-21T15:05:22.883
> 
> 标签：xslt, datetime

我正在尝试将我的等效 XSL 2.0 日期时间函数转换为 1.0。

我只需将 1 天添加到现有的日期时间元素并寻找 xsl 2 我发现了这个，它就像一个梦一样工作。

```
<xsl:template match="StartDateTime">
<StartDateTime>
  <xsl:value-of select="xsd:dateTime(.) + xsd:dayTimeDuration'P1D')"/>
</StartDateTime>
</xsl:template>
  <xsl:template match="EndDateTime">
<EndDateTime>
  <xsl:value-of select="xsd:dateTime(.) + xsd:dayTimeDuration'P1D')"/>
</EndDateTime>
</xsl:template> 
```

问题是我放入的转换器不喜欢 xsl 2 的高级功能，我正在努力为 xsl 1.0 找到简单的东西

非常感谢任何帮助。提前感谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:49:56.953

检查您使用的 XSLT 处理器是否支持 EXSLT 扩展函数库。或者，在 www.exslt.org，您会发现一些以命名模板形式提供的日期/时间函数的可移植实现。

# ios - Sencha 字段设置表单面板在 Safari 中工作，而不是在 iOS 模拟器中工作

> ID：13992438
> 
> 赞同：0
> 
> 时间：2012-12-21T15:05:29.340
> 
> 标签：ios, sencha-touch

下面的代码在 Safari 中运行没有任何问题，但同一段代码在 iOS 中无法运行。fieldset 是否与 iOS 有任何问题？

环境：

Sencha Touch V2.0 iOS v5.0 模拟器

```
Ext.application({
    name: 'Sencha',
    launch: function() {
    var formPanel = Ext.create('Ext.form.Panel', {
    fullscreen: true,

    items: [{
        xtype: 'fieldset',
        items: [
            {
                xtype: 'textfield',
                name : 'name',
                label: 'Name'
            },
            {
                xtype: 'emailfield',
                name : 'email',
                label: 'Email'
            },
            {
                xtype: 'passwordfield',
                name : 'password',
                label: 'Password'
            }
        ]
    }]
});

    }

}); 
```

你能帮我们解释一下为什么上面的代码在 iOS 中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:43:20.220

我有一个类似的问题。我将 app.js 中的要求设置为此

```
requires:
[
    'Ext.form.FieldSet',
    'Ext.field.Password'
] 
```

为我工作，但我不确定这是同一种问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:18:16.140

在 iOS 设备上打开时会看到什么？我在您的代码中看不到任何错误。Sencha Touch 中的字段集通常在 iOS 中运行良好。

# facebook - 今天的 FQL page_fan_adds

> ID：13992439
> 
> 赞同：1
> 
> 时间：2012-12-21T15:05:29.700
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试获取一个 FQL 查询，它将检索“今天”的新粉丝页面喜欢。这意味着它必须每天自动更新。

我使用以下代码：

```
SELECT metric, value FROM insights WHERE object_id=481749428508329 AND metric='page_fan_adds' AND end_time=(??????) AND period=86400 
```

我通过使用 Graph API 并复制粘贴 id: 值检索了 object_id。它适用于以下页面：www.iq-leads.com/IQLeads

我似乎无法弄清楚如何只获得今天添加的喜欢的数量。我已经尝试在指定日期执行此操作：

```
SELECT metric, value FROM insights WHERE object_id=481749428508329 AND metric='page_fan_adds' AND end_time=end_time_date('2012-11-26') AND period=86400 
```

结果是：

```
{
  "data": [
  ]
} 
```

我不确定查询的哪一部分是错误的，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:04:13.157

对我来说也是一样，我无法让它工作。[Facebook Insights 文档](https://developers.facebook.com/docs/reference/fql/insights/)中的第二个示例不起作用。我想这是不正常的，应该引起 Facebook 的注意。

无论如何，你有一个替代方案，它看起来像通过 Graph API 工作： `/YOUR_PAGE_ID/insights/page_fan_adds_unique/day`

您将通过以三天为一组收集信息的方式获得结果：

```
{
  "data": [
    {
      "id": "YOUR_PAGE_ID/insights/page_fan_adds_unique/day", 
      "name": "page_fan_adds_unique", 
      "period": "day", 
      "values": [
        {
          "value": 0, 
          "end_time": "2012-12-17T08:00:00+0000"
        }, 
        {
          "value": 0, 
          "end_time": "2012-12-18T08:00:00+0000"
        }, 
        {
          "value": 1, 
          "end_time": "2012-12-19T08:00:00+0000"
        }
      ], 
      "title": "Daily New Likes", 
      "description": "Daily The number of new people who have liked your Page (Unique Users)"
    }
  ], 
  "paging": {
    "previous": "https://graph.facebook.com/YOUR_PAGE_ID/insights/page_fan_adds_unique/day?since=1355425264&until=1355684464", 
    "next": "https://graph.facebook.com/YOUR_PAGE_ID/insights/page_fan_adds_unique/day?since=1355943664&until=1356202864"
  }
} 
```

*（我知道，我的页面不是很出名）*

不要忘记使用`read_insights`权限。

# php - 我的 PHP 脚本处理不正确（PHP 新手）

> ID：13992442
> 
> 赞同：0
> 
> 时间：2012-12-21T15:05:44.880
> 
> 标签：php

我尝试编写一个 PHP 脚本来自动发送带有表单输入的电子邮件，但是在提交时调用它时，如果您尝试直接访问 php，它会显示我输入的错误。

任何帮助将不胜感激，我对此很陌生。

```
<form action="form-to-email.php" method="post" name="camper_registration" id="camper registration" ">
    <label>Last Name*: </label>
    <input name="lastname" type="text" id="lastname" required="required"/><br />
    <label>First Name*: </label>
    <input name="firstname" type="text" id="firstname" required="required"/><br />
    <label>Middle Initial: </label>
    <input type="text" name="initial" size=1 maxlength=1 /><br /><br />

    <label>Street Address*: </label>
    <input name="streetaddress" type="text" id="streetaddress" required="required"/><br />
    <label>Address Line 2: </label><input type="text" name="addressline2" /><br />
    <label>City*: </label>
    <input name="city" type="text" id="city" required="required"/><br />
    <label>State/Province/Region*: </label>
    <input name="state" type="text" id="state" required="required"/><br />
    <label>Zipcode*: </label>
    <INPUT NAME="zip" input type="tel" SIZE=5 MAXLENGTH=5 onKeyPress="return numbersonly(this, event)" required="required"><br /><br />
    <label>Youth's Email*: </label>
    <input type="email" name="email" required="required"/><br /><br />
    <label>Date of Birth*: </label>
    <INPUT NAME="month" input type="tel" SIZE=2 MAXLENGTH=2 onKeyPress="return numbersonly(this, event)" required="required">/
    <INPUT NAME="day" input type="tel" SIZE=2 MAXLENGTH=2 onKeyPress="return numbersonly(this, event)" required="required">/
    <INPUT NAME="year" input type="tel" SIZE=4 MAXLENGTH=4 onKeyPress="return numbersonly(this, event)" required="required">

    <SCRIPT TYPE="text/javascript">
        autojump("month", "day", 2); autojump("day", "year", 2);
    </SCRIPT>
    <br /><br />
    <label>Grade completed in<br /> Spring 2013*: </label>
    <input type="tel" name="grade" size=2 maxlength=2 required="required"/><br /><br />
    <label>Gender*:</label>
    <input type="radio" name="gender" value="Male" required="required"> Male
    <input type="radio" name="gender" value="Female" required="required"> Female <br /> <br />
    <label>Parent/Guardian(s)*: </label>
    <input name="guardian" type="text" id="guardian" required="required"/> <br /><br />
    <label>Parent Phone*: </label>
    (<INPUT NAME="areacode" input type="tel" SIZE=3 MAXLENGTH=3 onKeyPress="return numbersonly(this, event)" required="required">)
    <INPUT NAME="cellphone" input type="tel" SIZE=7 MAXLENGTH=7 onKeyPress="return numbersonly(this, event)" required="required"><br /><br />

    <SCRIPT TYPE="text/javascript">
        <!--
        autojump("areacode", "cellphone", 3);
        //-->
    </SCRIPT>

    <label>1st Emergency Contact*: </label>
    <input name="emergency_contact_1" type="text" id="emergency_contact_1" required="required"/><br /><br />
    <label>Contact Number*: </label>
    (<INPUT NAME="emergency_contact_1_areacode" input type="tel" SIZE=3 MAXLENGTH=3 onKeyPress="return numbersonly(this, event)" required="required">)
    <INPUT NAME="emergency_contact_1_phone" input type="tel" SIZE=7 MAXLENGTH=7 onKeyPress="return numbersonly(this, event)" required="required"><br /><br />

    <SCRIPT TYPE="text/javascript">
        <!--
        autojump("emergency_contact_1_areacode", "emergency_contact_1_phone", 3);
        //-->
    </SCRIPT>

    <label>2nd Emergency Contact*: </label>
    <input name="emergency_contact_2" type="text" id="emergency_contact_2" required="required"/><br /><br />
    <label>Contact Number*: </label>
    (<INPUT NAME="emergency_contact_2_areacode" input type="tel" SIZE=3 MAXLENGTH=3 onKeyPress="return numbersonly(this, event)" required="required">)
    <INPUT NAME="emergency_contact_2_phone" input type="tel" SIZE=7 MAXLENGTH=7 onKeyPress="return numbersonly(this, event)" required="required"><br /><br />

    <SCRIPT TYPE="text/javascript">
        <!--
        autojump("emergency_contact_2_areacode", "emergency_contact_2_phone", 3);
        //-->
    </SCRIPT>

    <label>Name of Home Church: </label>
    <input type="text" name="home_church" /><br /><br />
    <label>Phone Number: </label>
    (<INPUT NAME="church_areacode" input type="tel" SIZE=3 MAXLENGTH=3 onKeyPress="return numbersonly(this, event)">)
    <INPUT NAME="church_phone" input type="tel" SIZE=7 MAXLENGTH=7 onKeyPress="return numbersonly(this, event)"><br />

    <SCRIPT TYPE="text/javascript">
        autojump("church_areacode", "church_phone", 3);
    </SCRIPT>

    <label>Contact Person: </label>
    <input type="text" name="contact_person" /><br /><br />

    <b>Special Needs</b><br /> Some campers may have needs that might require special attention from our staff; accessibility, health concerns, diet, allergies, etc. <br /><br />
    <label>Please list any special needs: </label>
    <textarea rows="10" cols="20" name="special_needs"> </textarea> <br /><br />
    <label>T-Shirt Size*: </label>
    <input type="radio" name="shirt_size" value="Small" required="required"> Small
    <input type="radio" name="shirt size" value="Medium" required="required"> Medium
    <input type="radio" name="shirt size" value="Large" required="required"> Large
    <input type="radio" name="shirt size" value="XL" required="required"> XL
    <input type="radio" name="shirt size" value="2XL" required="required"> 2XL<br /><br />

    <b>Roommate</b><br /> There are double and many single occupancy dorm rooms at Grinnell college campus - if possible we will honor your request for ONE preferred roommate.<br /><br />
    <label>Roommate Preference: </label>
    <input type="text" name="roommate" /><br /><br />

    <div id="satellites">
        <b>Satellite Choices</b><br /> List your first, second, and third choices.  You will be given your first choice if it is not full.  ALL events have limited capacity. If you do not choose a satellite, one will be assigned for you. (<a href="satellites.htm"target="_blank">Satellite Choices</a>)<br />
        <label>First Choice*: </label>
        <input name="firstchoice" type="text" id="firstchoice" required="required"/><br />
        <label>Second Choice*: </label>
        <input name="secondchoice" type="text" id="secondchoice" required="required"/><br />
        <label>Third Choice*: </label>
        <input name="thirdchoice" type="text" id="thirdchoice" required="required"/><br /><br />
    </div>

    <p>
        <b> Remember! </b><br />Please to fill out and bring the <a href="Camper_Health_History_and_Authorization_Form_2013.pdf">Health Form</a> <i>with you to camp</i>.<br /><br />
        <b>Cost of SGU Camp July 8 - 12, 2013  $275 <br /></b> A $50 <i> non-refundable</i> fee is required to be registered. <br /> Due to the limited capacity of 400 campers, please note full payment is due by June 25th to ensure you have completed the registration process.
    </p><br />

    <input type="submit" value="Submit">
</form> 
```

这是PHP

```
<?php
if(!isset($_POST['submit'])){
    //This page should not be accessed directly. Need to submit the form.
    echo "error; you need to submit the form!";
    die;
}

$page = "camper.htm";
if (!ereg($page, $_SERVER['HTTP_REFERER'])){
    echo "Invalid referer"; 
    die;
}

$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$initial = $_POST['initial'];
$streetaddress = $_POST['streetaddress'];
$addressline2 = $_POST['addressline2'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip = $_POST['zip'];
$email = $_POST['email'];
$month = $_POST['month'];
$day = $_POST['day'];
$year = $_POST['year'];
$grade = $_POST['grade'];
$gender = $_POST['gender'];
$guardian = $_POST['guardian'];
$areacode = $_POST['areacode'];
$cellphone = $_POST['cellphone'];
$contact1 = $_POST['emergency_contact_1'];
$contact1areacode = $_POST['emergency_contact_1_areacode'];
$contact1phone = $_POST['emergency_contact_1_phone'];
$contact2 = $_POST['emergency_contact_2'];
$contact2areacode = $_POST['emergency_contact_2_areacode'];
$contact2phone = $_POST['emergency_contact_2_phone'];
$homechurch = $_POST['home_church'];
$churchareacode = $_POST['church_areacode'];
$churchphone = $_POST['church_phone'];
$contactperson = $_POST['contact_person'];
$specialneeds = $_POST['special_needs'];
$shirtsize = $_POST['shirt_size'];
$roommate = $_POST['roommate'];
$firstchoice = $_POST['firstchoice'];
$secondchoice = $_POST['secondchoice'];
$thirdchoice = $_POST['thirdchoice'];

//Validate first
if(IsInjected($visitor_email)){
    echo "Bad email address!";
    exit;
}

/*
Simple form validation
check to see if an email and message were entered */
if ($_POST['firstname'] == "" || $_POST['lastname'] == "" || $_POST['streetaddress'] == "" || $_POST['city'] == "" || $_POST['state'] == "" || $_POST['zip'] == "" || $_POST['email'] == "" || $_POST['month'] == "" || $_POST['day'] == "" || $_POST['year'] == "" || $_POST['grade'] == "" || $_POST['gender'] == "" || $_POST['guardian'] == "" || $_POST['areacode'] == "" || $_POST['cellphone'] == "" || $_POST['emergency_contact_1'] == ""  || $_POST['emergency_contact_1_areacode'] == ""  || $_POST['emergency_contact_1_phone'] == ""  || $_POST['emergency_contact_2'] == ""  || $_POST['emergency_contact_2_areacode'] == ""  || $_POST['emergency_contact_2_phone'] == ""  || $_POST['shirt_size'] == ""  || $_POST['firstchoice'] == ""  || $_POST['secondchoice'] == ""  || $_POST['thirdchoice'] == "" ) {
    echo "Please fill in all required boxes.";
}
else {
    $email_from = 'cscholtens@marionmethodist.org';//<== update the email address
    $email_subject = "New Registration";
    $email_body = "You have received a new registration.\n". 
        "Camper: $firstname $initial $lastname \n".
        "Address: $streetaddress \n".
        "$addressline2 \n".
        "$city, $state $zip \n".
        "Email: $email \n".
        "Date of Birth: $month/$day/$year \n".
        "Grade Completed: $grade \n".
        "Gender: $gender \n".
        "Guardian: $guardian \n".
        "Guardian Cell Phone: ($areacode) $cellphone \n".
        "First Emergency Contact: $contact1  Contact Number: ($contact1areacode) $contact1phone \n".
        "Second Emergency Contact: $contact2  Contact Number: ($contact2areacode) $contact2phone \n".
        "Home Church: $homechurch Contact Number: ($churchareacode) $churchphone Contact Person: $contactperson \n".
        "Special Needs: $specialneeds \n".
        "T-Shirt Size: $shirtsize \n".
        "Roommate Preference: $roommate \n".
        "Satellite Preferences: 1.$firstchoice 2.$secondchoice 3.$thirdchoice \n".
        " \n".

    $to = "cscholtens@marionmethodist.org";//<== update the email address
    $headers = "From: $email_from \r\n"; //Send the email!
    mail($to,$email_subject,$email_body,$headers);
    //done. redirect to thank-you page.
    header('Location: thanks2.htm');

    // Function to validate against any email injection attempts
    function IsInjected($str) {
        $injections = array('(\n+)',
            '(\r+)',
            '(\t+)',
            '(%0A+)',
            '(%0D+)',
            '(%08+)',
            '(%09+)'
        );
        $inject = join('|', $injections);
        $inject = "/$inject/i";
        if(preg_match($inject,$str)){
            return true;
        }
        else{
            return false;
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:08:34.520

您必须确保您的提交按钮具有`name`值为 的属性`submit`。否则`$_POST['submit']`永远不会被设置。

```
<input type="submit" name="submit" value="Submit Form"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:22:13.990

'HTTP_REFERER' The address of the page (if any) which referred the user agent to the current page. This is set by the user agent. Not all user agents will set this, and some provide the ability to modify HTTP_REFERER as a feature. In short, it cannot really be trusted.

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

Echo the HTTP_REFERRER variable to see if anything there. Use php_ header function to check URL maybe.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:17:26.223

这是我的标准教学示例。您可能想摆脱 ereg() 函数！

```
<?php // RAY_form_to_email.php
error_reporting(E_ALL);

// SEND MAIL FROM A FORM

// REQUIRED VALUES ARE PREPOPULATED - CHANGE THESE FOR YOUR WORK
$from  = "NoReply@Your.org";
$subj  = "Contact Form";

// THIS IS AN ARRAY OF RECIPIENTS - CHANGE THESE FOR YOUR WORK
$to[]  = "You@Your.org";
$to[]  = "Her@Your.org";
$to[]  = "Him@Your.org";

// IF THE DATA HAS BEEN POSTED
if (!empty($_POST['email']))
{
    // DISABLED ON THE SERVER SIDE
    var_dump($_POST);
    die(' DISABLED');

    // CLEAN UP THE POTENTIALLY BAD AND DANGEROUS DATA
    $email      = clean_string($_POST["email"]);
    $name       = clean_string($_POST["name"]);
    $telephone  = clean_string($_POST["telephone"]);

    // CONSTRUCT THE MESSAGE THROUGH STRING CONCATENATION
    $content    = NULL;
    $content   .= "You have a New Query From $name" . PHP_EOL . PHP_EOL;
    $content   .= "Tel No: $telephone" . PHP_EOL;
    $content   .= "Email: $email" . PHP_EOL;

    // SEND MAIL TO EACH RECIPIENT
    foreach ($to as $recipient)
    {
        if (!mail( $recipient, $subj, $content, "From: $from\r\n"))
        {
            echo "MAIL FAILED FOR $recipient";
        }
        else
        {
            echo "MAIL WORKED FOR $recipient";
        }
    }

    // PRODUCE THE THANK-YOU PAGE
    echo '<p>THANK YOU</p>' . PHP_EOL;
}

// A FORM TO TAKE CLIENT INPUT FOR THIS SCRIPT
$form = <<<ENDFORM
<form method="post">
Please enter your contact information
<br/>Email: <input name="email" />
<br/>Phone: <input name="telephone" />
<br/>Name:  <input name="name" />
<br/><input type="submit" />
</form>
ENDFORM; 
```

回声$形式；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:18:17.517

您需要一种更好的方法来检测表单已发布..

```
if($_SERVER['REQUEST_METHOD'] !== 'POST')
{
    //do error here
} 
```

提交表单时，这将返回 POST。您需要进一步验证它是您的表单，但唯一可靠的方法是使用表单键。

# c++ - 如何使用 C 链接制作 CUDA 目标文件？

> ID：13992446
> 
> 赞同：1
> 
> 时间：2012-12-21T15:06:12.030
> 
> 标签：c++, c, cuda, linkage

我正在尝试在 C 项目中包含一些 CUDA 代码。为此，我将 CUDA 源（.cu 文件）编译为静态库（.lib，我正在 Windows 中开发）。然后我希望在这个静态库中链接到我的 C 项目。但是，我的链接器抱怨这一步，我相信这是因为 C/C++ 链接问题。我得到的具体错误如下所示：

```
 Undefined symbol '_cudaMallocHost@8' referenced in "cufft object file.lib". 
```

我正在使用 CUDA 5.0，并且正在使用 Visual Studio 10 在 Windows 7 机器上编写和编译 CUDA 源代码。

首先，我有一个 .cu 源文件，它可以编译成静态库（“cufft object file.lib”）就好了。我把整个东西都包了进去`extern C { }`。它看起来像这样：

```
extern "C" {

#include <cuda.h>
#include <cufft.h>

int myCUDAfunction()
{
    //Some CUDA code
}

} 
```

为此，我制作了一个头文件，其中包含在 .cu 源（“myCUDAheader.h”）中定义的函数列表，其内容只是一系列函数原型：

```
int myCUDAfunction(); 
```

ETC

最后，在我的 C 项目中，我添加了静态库并包含头文件。

在我开始在 CUDA 源 .cu 文件中声明函数之前`extern "C"`，链接器抱怨缺少这些函数的符号。它们现在必须正确编译为 C 链接，但实际的 CUDA 函数（例如`cudaMalloc`）似乎仍然具有 C++ 链接。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T16:11:24.287

您无法更改 CUDA 库的链接，但您也不需要这样做。所以这：

```
extern "C" {

#include <cuda.h>
#include <cufft.h>

int myCUDAfunction();

.....

} 
```

是错误的，因为您声明 CUDA 运行时库具有 C 链接，而它可能没有。这是正确的：

```
#include <cuda.h>
#include <cufft.h>

extern "C" {

int myCUDAfunction();
.....

} 
```

这种方式`myCUDAfunction`具有 C 链接，并且在从编译并与 C 工具链链接的代码中调用时将链接。这样做的全部目的是为*您的*CUDA 代码及其调用的库函数提供 C 可调用包装函数。这样，您的 C 代码可以完全不了解 CUDA 代码的 C++ 基础。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:28:13.350

您是否包含了 CUDA 头文件并将 cudart.lib 链接到您的 C 应用程序？如果不是，您可能需要这样做，因为您的静态库将不包含实际的 CUDA 库实现。另外，我认为链接它们的顺序很重要，如果是您的库然后是 cudart.lib 或其他方式，我不记得我的头。如果最坏的情况发生在最坏的情况下，您可能必须将您的 C 项目设置为 CUDA 项目。

# c# - MediaLibrary.SavePicture 以降低的分辨率保存图片流

> ID：13992448
> 
> 赞同：0
> 
> 时间：2012-12-21T15:06:17.540
> 
> 标签：c#, silverlight, windows-phone-7, stream, cameracapturetask

我构建了一个应用程序，允许用户捕获图像，然后将其保存到隔离存储和手机的媒体库中。

当我将这两张图片下载到我的电脑上时，我看到保存在独立存储中的一张分辨率为 2592x1944 像素和 262 dpi，而保存在媒体库中的一张是 1222x1630 和 72 dpi。我无法解释为什么会发生这种情况。我的相关代码隐藏是：

```
//Save image to isolated storage
Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);

//Save image to Media Library
MediaLibrary medialibrary = new MediaLibrary();
medialibrary.SavePicture(imageName, e.ChosenPhoto;); 
```

（wb 是从 e.ChosenPhoto 创建的 WritableBitmap）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:28:05.473

我认为它与从 ChosenPhoto 而不是从 WriteableBitmap 保存它有关。尝试将图片[从独立存储中保存到媒体库，而不是像这样](http://www.windowsphonegeek.com/articles/encode-and-decode-images-in-wp7)。

```
// Encode WriteableBitmap object to a JPEG stream.
Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
fileStream.Close();

// Create a new stream from isolated storage, and save the JPEG file to the media library on Windows Phone.
fileStream = store.OpenFile(tempJPEG, FileMode.Open, FileAccess.Read);

MediaLibrary mediaLibrary = new MediaLibrary();
Picture pic = mediaLibrary.SavePicture("savedflimage.jpg", fileStream);
fileStream.Close(); 
```

# extjs - 网格单元呈现错误

> ID：13992450
> 
> 赞同：0
> 
> 时间：2012-12-21T15:06:25.683
> 
> 标签：extjs

我在我的应用程序中使用 ExtJs，并且我有一个具有唯一列的网格。此列有一个编辑器，它是一个组合框，因此当我单击网格单元格时，会显示一个组合框。但是，当我单击以编辑网格单元格值时，我的对象的名称是可见的，但是当我在单元格外部单击时，在我的网格中呈现的值是对象的 id。

当我选择项目时：

![在此处输入图像描述](../Images/cb337ebb0da8ac5a39b2ac8ed0eb6d88.png)

当我在组合框外单击时：

![在此处输入图像描述](../Images/cc94979c1972c4f650acf4d25ddccbe8.png)

我的代码：

```
Ext.define('ComboBoxDoenca', {
extend : 'Ext.form.ComboBox',
displayField: 'nome',
editable: false,
width: 300,
valueField: 'id',
listeners:{
    render: function(combo){
        combo.store = Ext.create('ComboStore').load();
    }
} 
```

});

网格代码：

```
Ext.define('GridDoenca', {
extend : 'Ext.grid.Panel',
title: 'Doenças',
alias : 'widget.doencaList',
id: 'gridDoenca',
height: 150,
plugins: [Ext.create('Ext.grid.plugin.CellEditing', {
    clicksToEdit: 1
})],
initComponent : function() {
    var comboDoenca = Ext.create('Hemisphere.view.fungicida.ComboBoxDoenca');
    me = this;
    Ext.apply(this, {
        dockedItems : [ {
            xtype : 'toolbar',
            dock : 'top',
            items : [ {
                text : 'Add Doença',
                icon : Webapp.icon('add1.png'),
                iconAlign : 'top',
                action : 'addDoenca'
            }]
        } ]
    });

    this.columns = [ {
        header : 'ID',
        dataIndex : 'id',
        hidden: true
    },{
        header : 'Doença',
        dataIndex : 'id',
        editor: comboDoenca,
        flex: 1
    }];
    this.callParent(arguments);
} 
```

});

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:33:21.763

好吧，网格列显示分配给它的实际值。这意味着在内部，数据被完美分配。

你遇到的问题是你不想看到 id 值而是它更友好的**表示**。这可以通过**渲染器功能**解决。

请在此处查看我的示例：http: [//jsfiddle.net/lontivero/aP4Kg/](http://jsfiddle.net/lontivero/aP4Kg/)

我已将我的数据存储定义如下：

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data: [
        {"name":"1", "email":"lisa@simpsons.com", "phone":"555-111-1224"},
        {"name":"2", "email":"bart@simpsons.com", "phone":"555-222-1234"},
        {"name":"3", "email":"home@simpsons.com", "phone":"555-222-1244"},
        {"name":"4", "email":"marge@simpsons.com", "phone":"555-222-1254"}
    ]
}); 
```

这是我的组合框的**名称**存储：

```
var names = Ext.create('Ext.data.Store', {
    fields: ['id', 'name'],
    data : [
        {"id":"1", "name":"Bart"},
        {"id":"2", "name":"Homer"},
        {"id":"3", "name":"Marge"},
        {"id":"4", "name":"Lisa"}
    ]
}); 
```

正如您在第一家商店中看到的那样，“名称”字段包含一个 id，但当然，我不想看到这些数字，我想看到 Bart、Homer、Marge 或 Lisa。

然后，在**渲染器**函数中，我将这些 id 转换为名称以显示它们。

```
renderer: function(value) {
    var idx = names.find('id', value)
    var rec = names.getAt(idx);
    return rec.get('name');                    
} 
```

我希望这是你正在寻找的。

# android - Android 片段：继承与组合

> ID：13992459
> 
> 赞同：0
> 
> 时间：2012-12-21T15:07:02.913
> 
> 标签：android, android-fragments, android-activity, xamarin.android, android-lifecycle

**简而言之，我试图将一个片段包装在一个包装器类中，然后将包装器添加到视图寻呼机。我稍后在运行应用程序时遇到空指针问题（而不是从片段继承，并将继承的片段添加到 viewpager）。**

* * *

**描述**

基本上，我将片段添加到 viewpager，在添加片段之前，我一直从它继承，并将它包装在另一个视图中，在它周围添加一个边界（页面拆分）。

每个页面/片段都是一个不同的类，代表要显示的视图。

这种方法的问题是我需要扩展每个片段并添加相同的样板功能，这并不理想。我也不想创建一个基类，说“寄宿片段”，因为当片段从它派生时，它们就会意识到寄宿生（我认为）。

所以，我想也许我会使用组合，在那里我会创建一个通用包装类，它将包含一个类型为 T 的片段数据成员。问题是我似乎无法获得当前的活动“活动" 引用片段数据成员的上下文（由包装器组成）。

我做了一些临时调整并隐藏了返回我手动存储的活动引用副本的 getActivity()。然而程序崩溃是随机的（正如我所怀疑的那样）。我已经尝试在包装器中覆盖所有可能的生命周期方法，然后在内部将在数据成员片段上调用该生命周期方法

```
public override void OnSomething()
{
    base.OnSomething()

    mFragment.OnSomething()
} 
```

但这似乎没有帮助。我猜是因为组合片段是从当前活动上下文中“隐藏”的，所以我需要手动完成所有必要的操作。我只是不确定它们都是什么？

这是我正在尝试完成的快速代码示例，详细说明如下。如果需要更多代码，请告诉我，我会将我所拥有的内容调整为示例格式。

* * *

**组合**（在整个应用程序中有许多问题/空指针）

```
public class Frag1 : Fragment
{
    ...
}

public class Activity1 : Activity
{
     public override void OnCreate(Bundle bundle)
     {
         ...

         List<Fragment> fragments = new List<Fragment>();

         fragments.Add(FragmentWrapper.NewInstance(Activity, typeof(FragmentWrapper))

         MyAdapter pagerAdapter = new MyAdapter(FragmentManager, fragments);            
         ViewPager viewPager = FindViewById<ViewPager>(Resource.Id.view_pager);
         viewPager.Adapter = pagerAdapter;
     }

    public class FragmentWrapper
    {
        Fragment mFragment;   // How to successfully wrap a fragment, but still behave properly ????

        public static FragmentWrapper NewInstance(Activity activity, string type)
        {
            FragmentWrapper thisFrag = new FragmentWrapper();

            ...

            thisFrag.mFragment = Fragment.Instantiate(activity, type);

            return thisFrag;
        }

        public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle)
        {
            // add boarder around mFragment and return new view
        }     
    }

    public class MyAdapter : Android.Support.V13.App.FragmentStatePagerAdapter
    {
        ....
    }
} 
```

* * *

**继承**（可以，ok）

```
public class Frag1 : Fragment
{
    ...
}

public class Activity1 : Activity
{
     public override void OnCreate(Bundle bundle)
     {
         ...

         List<Fragment> fragments = new List<Fragment>();

         fragments.Add(FragmentExtender.NewInstance(Activity, typeof(FragmentExtender))

         MyAdapter pagerAdapter = new MyAdapter(FragmentManager, fragments);            
         ViewPager viewPager = FindViewById<ViewPager>(Resource.Id.view_pager);
         viewPager.Adapter = pagerAdapter;
     }

    public class FragmentExtender : Frag1
    {
        public static FragmentExtender NewInstance()
        {
            FragmentExtender thisFrag = new FragmentExtender();

            ...

            return thisFrag;
        }

        public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle)
        {
            // add boarder around mFragment and return new view
        }
    }     

    public class MyAdapter : Android.Support.V13.App.FragmentStatePagerAdapter
    {
        ....
    }
} 
```

* * *

对此的任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:48:39.633

如果您只想在片段之间添加边框，那么您应该检查[`ViewPager.setPageMargin()`和`ViewPager.setPageMarginDrawable()`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setPageMargin%28int%29).

# omnet++ - 如何通过 OMNeT++ 中的 WLAN 接口连接两个节点？

> ID：13992460
> 
> 赞同：1
> 
> 时间：2012-12-21T15:07:05.670
> 
> 标签：omnet++, inet

我在网络中有三个节点`NodeA`，它们都是。我必须连接并通过接口，也必须连接并通过接口。我已连接并作为：`NodeB``NodeC``WirelessHost``NodeA``NodeB``ppp``NodeB``NodeC``WLAN``NodeA``NodeB`

```
NodeA.pppg++ <--> Channel <--> NodeB.pppg++; 
```

现在我想连接`NodeB`并`NodeC`通过，`WLAN`但我不知道该怎么做。有人可以建议我如何在框架中执行此`OMNeT++`操作吗？`INET`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:53:01.750

这取决于您打算如何连接到两个无线节点。

*   在*基础架构模式下*，您需要一个额外的接入点，
*   在*AdHoc 模式下*，您应该重新配置节点的无线接口以在 Adhoc 模式下运行。

您可以在以下位置找到示例：`inet/examples/wireless/`

特别是`inet/examples/wireless/wiredandwirelesshostswithap`做一些你需要的类似（有点复杂）的事情。

# javascript - 我如何在 IE9、iOS 上验证所需的 jqBootstrapValidation

> ID：13992465
> 
> 赞同：3
> 
> 时间：2012-12-21T15:07:24.280
> 
> 标签：javascript, jquery, validation

对于此示例，我只有一个具有*必需*属性的输入字段，即使 iOS Safari（iPhone/iPad）和 IE9 上的值为空，我也会收到警报。Firefox 和 Chrome 运行良好。

我错过了什么？

```
<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>jqBootstrapValidation by ReactiveRaven</title>

        <link rel="stylesheet" href="http://reactiveraven.github.com/jqBootstrapValidation/css/bootstrap.css">
        <script src="http://reactiveraven.github.com/jqBootstrapValidation/js/jQuery-1.7.2-min.js"></script>
        <script src="http://reactiveraven.github.com/jqBootstrapValidation/js/bootstrap.js"></script>
        <script src="http://reactiveraven.github.com/jqBootstrapValidation/js/jqBootstrapValidation.js"></script>

        <script>
            $(function() {
                $("input,textarea,select").jqBootstrapValidation(
                    {
                        preventSubmit: true,
                        submitError: function($form, event, errors) {
                            // Here I do nothing, but you could do something like display 
                            // the error messages to the user, log, etc.
                        },
                        submitSuccess: function($form, event) {
                            alert("OK");
                            event.preventDefault();
                        },
                        filter: function() {
                            return $(this).is(":visible");
                        }
                    }
                );
            });
        </script>

    </head>
    <body>
    <div class="tabbable">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#validators_required_preview">Example</a></li>
        </ul>
        <div class="tab-content">
            <div id="validators_required_preview" class="tab-pane active">
                <form class="form-horizontal">
                   <input name="some_field" required="" value="" type="text">
                   <button type="submit" class="btn btn-primary">Test Validation <i class="icon-ok icon-white"></i></button></form>
            </div>
        </div>
    </div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T11:38:37.510

您必须将输入字段包含在具有“控制组”类的 div 中

```
<div class="control-group">
<input name="some_field" required="" value="" type="text">
<p class="help-block"></p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:22:05.403

只是一个简短的说明。尽管在 IE 和 safari 中缺乏对“必需”属性的支持，这现在仍然有效。这里的信息： [http ://reactiveraven.github.com/jqBootstrapValidation/](http://reactiveraven.github.com/jqBootstrapValidation/)

# jquery - Jquery $get / $ajax 不适用于所有浏览器

> ID：13992472
> 
> 赞同：5
> 
> 时间：2012-12-21T15:07:54.060
> 
> 标签：jquery, ajax, cross-browser

我有如下代码：

```
$('a.load-more').on("click",function(){
    $.get($('a.load-more').attr('href'), function(data) {
   $(".next-page").remove();
   $('.block-grid').append(data);
   event.preventDefault();
}); 
```

的HTML：

```
<li class="next-page">
<a href="http://example.com/ajax_all/" class="load-more">Load More →&lt;/a>
</li> 
```

如您所见，它从 .load-more 元素中获取 ajax 内容的 url，将其传递给 $get 方法，然后该方法会拉入内容并将其附加到当前页面中。

奇怪的是，这在 Chrome 中有效，但在 Firefox 或 Safari 中无效，并且这些浏览器的检查器中没有 js 错误。

它没有使用 ajax 提取内容，而是转到 url [http://example.com/ajax_all/](http://example.com/ajax_all/)并显示其内容。

我很困惑为什么它可以在 Chrome 而不是 Safari 或 firefox 中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:11:45.450

您的脚本无效或粘贴错误

```
$('a.load-more').on("click", function () {
    $.get($('a.load-more').attr('href'), function (data) {
        $(".next-page").remove();
        $('.block-grid').append(data);
        event.preventDefault();

}); 
```

修复后，它表明您正在异步`event.preventDefault();`内部发生。`get()`

```
$('a.load-more').on("click", function () {
   $.get($('a.load-more').attr('href'), function (data) {
      $(".next-page").remove();
      $('.block-grid').append(data);
      event.preventDefault();
   });
}); 
```

将`preventDefault`回调放在外部应该可以解决您的问题。

```
$('a.load-more').on("click", function (e) {
    $.get($('a.load-more').attr('href'), function (data) {
        $(".next-page").remove();
        $('.block-grid').append(data);

    });
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:13:14.243

你的问题是事件这个词，它必须在点击回调的参数中。

试试看：

```
$('a.load-more').on("click", function(e){
    e.preventDefault();
    $.get($('a.load-more').attr('href'), function(data) {
        $(".next-page").remove();
        $('.block-grid').append(data);
    });
}); 
```

# android - 如何在布局文件中定义Android GraphView？

> ID：13992474
> 
> 赞同：3
> 
> 时间：2012-12-21T15:07:57.730
> 
> 标签：android, graph

[Android 的GraphView](http://www.jjoe64.com/p/graphview-library.html)库有一个 GraphView 类，它是一个用于创建图形的 View。这个抽象类扩展了 LinearLayout，因此您可以通过嵌套 LinearLayouts 在布局中包含图形，如下所示：

xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:id="@+id/mainLayout">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Hello World!" />
    <LinearLayout
        android:id="@+id/subLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />       
</LinearLayout> 
```

MainActivity.java：

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GraphViewData[] data = new GraphViewData[num];
        double v = 0;
        for (int i = 0; i < 10; i++) {
            v += 0.1;
            data[i] = new GraphViewData(i, Math.sin(v));            
        }
        GraphViewSeries seriesSin = new GraphViewSeries("Sinus", null, data);  
        GraphView graphView = new LineGraphView(this, "DemoGraphView");
        graphView.addSeries(seriesSin);
        graphView.setViewPort(2, 10);

        LinearLayout layout = (LinearLayout) findViewById(R.id.subLayout);  
        layout.addView(graphView);        
    }
} 
```

我现在嵌套 LinearLayouts 但也许有更好的方法可以在布局文件中包含图形，例如。就像您放置 TextView 或 Button 视图一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:53:00.380

我认为您可以删除您的 subLayout 并将 GraphView 直接添加到 mainLayout。所以你会保存一个布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T20:00:16.943

subLayout 需要为 GraphView 提供一个固定的高度：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/subLayout"
android:layout_width="fill_parent"
android:layout_height="250dip"
android:orientation="vertical" /> 
```

见： [https ://github.com/jjoe64/GraphView-Demos/blob/master/res/layout/graphs.xml](https://github.com/jjoe64/GraphView-Demos/blob/master/res/layout/graphs.xml)

# c# - 从串口接收的数据有不正确的换行符

> ID：13992477
> 
> 赞同：4
> 
> 时间：2012-12-21T15:08:05.367
> 
> 标签：c#, serial-port

我编写了一个将数据发送到 COM 端口并接收返回数据的应用程序。

发送效果很好，但接收效果不佳。多行和只读文本框中的换行符不正确。

截屏：

![在此处输入图像描述](../Images/bd028c428e1d4603f6bc75d1ba8e102e.png)

我的接收代码是：

```
void serialPort_DataReceived(object s, SerialDataReceivedEventArgs e)
{
    byte[] data = new byte[_serialPort.BytesToRead];
    _serialPort.Read(data, 0, data.Length);

    string str = System.Text.Encoding.UTF8.GetString(data);

    textBox3.Text = textBox3.Text + str;

    textBox3.SelectionStart = textBox3.TextLength;
    textBox3.ScrollToCaret();
} 
```

在打开端口之前，我将 New Line 属性设置为 \r\n：

```
_serialPort.NewLine = "\r\n"; 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:11:44.020

从[文档中](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.newline%28VS.80%29.aspx)：

> 获取或设置用于解释对 ReadLine 和 WriteLine 方法的调用结束的值。

关键在于它***用于解释***呼叫的结束，而不是***设置***它。

NewLine 属性处理 SerialPort 对象如何尝试解释传入数据。它不操纵传入的数据。

换句话说，通过将 NewLine 属性设置为 "\r\n"，您是在告诉它***查找***"\r\n" 并将其用作 NewLine 字符。

进入串口的数据就是这样。您无法更改其他人发送数据的方式。（除非您也编写了该应用程序。）您只能告诉 SerialPort 如何尝试正确读取数据。

您需要做的是弄清楚程序发送给您的内容并将 .NewLine 属性设置为*那个*。很可能它只是发送“\n”或“\r”，因此如果您将 NewLIne 属性设置为匹配，您的程序将开始正确识别发送给它的换行符。

[在SerialPort.ReadLine 属性使用](https://stackoverflow.com/questions/9079595/serialport-readline-property-usage)中，有更多信息可能会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:16:50.873

解决方案是：

```
textBox3.Text = textBox3.Text + str.Replace("\r", "\r\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:10:56.953

尝试这个：

```
_serialPort.NewLine = Environment.NewLine; 
```

# visual-studio - 为什么文件会在“查找结果 1”的第二个窗格中打开？

> ID：13992480
> 
> 赞同：6
> 
> 时间：2012-12-21T15:08:12.583
> 
> 标签：visual-studio

我正在使用 vs.net 2012，当我在整个解决方案中搜索字符串时，在我的查找结果窗格中，当我单击一个文件时，它会在底部窗格中打开该文件。它曾经在我所有其他源文件所在的顶部窗格中“正常”打开。

我做了什么让 vs.net 扰乱了我的思维？:)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-21T15:25:22.287

您可能将其*停靠*`Find Results`为*内容窗口*而不是*工具窗格*。
所以现在实际上有两个文档窗格，其中一个包含`Find Results`.

当您打开一个新文档时（在您的示例中 - 从“查找结果”中双击它），它会自动在最后一个聚焦的文档窗格中打开，在您的情况下，它是包含“查找结果”的那个。

要解决此问题，请将 Find Results 重新停靠在 Far-Bottom 中（或者，例如在最右下方的图像中）

![在此处输入图像描述](../Images/91e6041ebcdcc8f253d28659100d7b02.png)

# git - Aptana 致命：无法创建“.git/index.lock”：文件存在

> ID：13992481
> 
> 赞同：2
> 
> 时间：2012-12-21T15:08:23.033
> 
> 标签：git, aptana, aptana3

我正在使用 Aptana Studio 3，构建：3.3.1.201212171919 和 GIT。使用一段时间后，我注意到在执行 GIT 操作时，Aptana 会不断刷新我的工作区，这反过来又会一次锁定我的 GIT 存储库几分钟。如果我尝试在 Aptana 刷新时执行任何需要锁定索引文件的 GIT 操作，我会得到以下信息

```
fatal: Unable to create 'c:/wamp/www/website/.git/index.lock': File exists.

If no other git process is currently running, this probably means a
git process crashed in this repository earlier. Make sure no other git
process is running and remove the file manually to continue. 
```

我在这里与他们创建了一张票[https://jira.appcelerator.org/browse/APSTUD-7603](https://jira.appcelerator.org/browse/APSTUD-7603)

有没有人找到一种方法来防止这种情况发生/花费这么长时间/不创建锁

# 编辑

我至少能够暂时解决这个问题。在使用 GIT 的存储库中的“应用程序资源管理器”下时。点击蓝色齿轮。在下拉菜单中悬停“更多”单击“断开连接”，这将阻止 Aptana 监视 GIT 存储库的更改。GIT 仍然可以工作，但我不再让 Aptana 尝试刷新我的工作区，并且在视觉上文件树将不再显示更改。

# 编辑 2

在 index.lock 文件上执行`rm`不会解决这个问题。我的问题是，当 Aptana 构建工作区时，它会不断为其 GIT 操作所需的进程创建和删除 index.lock 文件。如果我查看 .git 文件夹，我可以看到 Aptana 正在创建和删除 index.lock 文件。一旦 Aptana 完成，index.lock 文件就消失了，我可以正常执行操作，因此无需删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:56:15.537

尝试`rm -f ./.git/index.lock`，因为在极少数情况下 git 崩溃了……这个文件被劫持了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:35:27.933

如果您仍然遇到此问题，请尝试

rm c:/wamp/www/website/.git/index.lock

这个对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:08:32.177

我也有同样的问题。

唯一的解决方案是运行两次 Git 命令。然后锁定文件被解锁

# c# - ApplicationBar 出现在 image_tap 之后

> ID：13992487
> 
> 赞同：1
> 
> 时间：2012-12-21T15:08:44.007
> 
> 标签：c#, silverlight, windows-phone-7

我有一个包含图像的列表框页面。

```
 <ListBox Name="photoListbox" ItemsSource="{Binding Photo}"  >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Image  Source="{Binding xBig}" Stretch="UniformToFill" Tap="ImageTap" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

另外，我的页面上有一个 ApplicationBar，当用户不点击图像时它是不可见的。

```
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar x:Name="AppBar" IsVisible="False">
        <shell:ApplicationBarIconButton x:Name="prevAppBarButton"
                                        IconUri="Images/appbar.transport.rew.rest.png"
                                        Text="previous"
                                        IsEnabled="False"
                                        />

        <shell:ApplicationBarIconButton x:Name="playAppBarButton"
                                        IconUri="Images/appbar.transport.play.rest.png"
                                        Text="play"
                                         />

        <shell:ApplicationBarIconButton x:Name="pauseAppBarButton"
                                        IconUri="Images/appbar.transport.pause.rest.png"
                                        Text="pause"
                                        IsEnabled="False"
                                         />

        <shell:ApplicationBarIconButton x:Name="nextAppBarButton"
                                        IconUri="Images/appbar.transport.ff.rest.png"
                                        Text="next"
                                        IsEnabled="False"
                                        />
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

Image_Tap 处理程序

```
 private void ImageTap(object sender, GestureEventArgs e)
    {
        AppBar.IsVisible = true;
    } 
```

但是，然后我点击图像（我希望我的 shell:ApplicationBar 会出现） - 我有一个 nullReferenceException。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:16:40.540

使用[`ApplicationBar`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationpage.applicationbar%28v=vs.105%29.aspx)页面的属性访问工具栏：

```
private void ImageTap(object sender, GestureEventArgs e)
{
    this.ApplicationBar.IsVisible = true;
} 
```

# jcarousel - 在 W 上滚动 jcarouselLite

> ID：13992488
> 
> 赞同：0
> 
> 时间：2012-12-21T15:09:00.027
> 
> 标签：jcarousel, jcarousellite

在我购买的 WordPress 主题中，有一个需要帮助的滑块。目前它不滚动，它只是有一个左右箭头来向前或向后进行两张幻灯片。我需要的主要是让滑块自动滚动。

在主题的支持论坛寻求帮助后，主题开发人员告诉我，我需要在主题的 .js 文件中编辑以下行。这是我被告知需要编辑的行。

```
jQuery(function() {
        jQuery("#latest-wrapper .latest").jCarouselLite({       
            btnNext: ".latest-next",        
            btnPrev: ".latest-prev",
            easing: "easeInOutExpo",
            speed: 700,
            visible: 5,
            scroll: 2       
        }); 
    }); 
```

我对此很陌生，但我发现我的学习曲线非常快。如果有人有任何建议，那将不胜感激。

**PS**滑块是页面顶部的第二个，也是两个中较大的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:18:03.340

```
jQuery(function() {
        jQuery("#latest-wrapper .latest").jCarouselLite({       
            btnNext: ".latest-next",        
            btnPrev: ".latest-prev",
            easing: "easeInOutExpo",
            auto: 3000,
            speed: 700,
            visible: 5,
            scroll: 2       
        }); 
    });

 * @option auto : number - default is null, meaning autoscroll is disabled by default
 * @example
 * $(".carousel").jCarouselLite({
 *      auto: 800,
 *      speed: 500
 * });
 * @desc You can make your carousel auto-navigate itself by specfying a millisecond value in this option.
 * The value you specify is the amount of time between 2 slides. The default is null, and that disables auto scrolling.
 * Specify this value and magically your carousel will start auto scrolling.
 * 
```

# java - 无法找到 Javac 编译器 maven 声纳：声纳

> ID：13992491
> 
> 赞同：1
> 
> 时间：2012-12-21T15:09:10.513
> 
> 标签：java, eclipse, maven, sdk, sonarqube

我正在尝试用声纳分析一个项目。

```
mvn clean install -DskipTests=true 
```

我得到的问题：

```
C:\Users\user\Desktop\sepm_git\qse-sepm-ws12-02\vpm>mvn clean install -DskipTe
sts=true
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building vpm 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ vpm ---
[INFO] Deleting C:\Users\user\Desktop\sepm_git\qse-sepm-ws12-02\vpm\target
[INFO]
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ vpm ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\user\Desktop\sepm_git\qse-
sepm-ws12-02\vpm\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ vpm ---
[INFO] Compiling 92 source files to C:\Users\user\Desktop\sepm_git\qse-sepm-ws
12-02\vpm\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR :
[INFO] -------------------------------------------------------------
[ERROR] Unable to locate the Javac Compiler in:
  C:\Program Files (x86)\Java\jre7\..\lib\tools.jar
Please ensure you are using JDK 1.4 or above and
not a JRE (the com.sun.tools.javac.Main class is required).
In most cases you can change the location of your Java
installation by setting the JAVA_HOME environment variable.
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.920s
[INFO] Finished at: Fri Dec 21 15:43:57 CET 2012
[INFO] Final Memory: 4M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.
3.2:compile (default-compile) on project vpm: Compilation failure
[ERROR] Unable to locate the Javac Compiler in:
[ERROR] C:\Program Files (x86)\Java\jre7\..\lib\tools.jar
[ERROR] Please ensure you are using JDK 1.4 or above and
[ERROR] not a JRE (the com.sun.tools.javac.Main class is required).
[ERROR] In most cases you can change the location of your Java
[ERROR] installation by setting the JAVA_HOME environment variable.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureExc
eption
C:\Users\user\Desktop\sepm_git\qse-sepm-ws12-02\vpm> 
```

然而，

我的 java home var 设置为：

```
echo %JAVA_HOME% 
C:\Program Files (x86)\Java\jre7 
```

在我设置的偏好下的eclipse中：

![在此处输入图像描述](../Images/c22404f0cef3c5e034d0e86b45a34cb1.png)

知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:10:27.540

看起来您指向的是 Java 运行时环境 (JRE)，而不是 Java 开发工具包

```
[ERROR] Unable to locate the Javac Compiler in:
  C:\Program Files (x86)\Java\jre7\..\lib\tools.jar
Please ensure you are using JDK 1.4 or above and
not a JRE (the com.sun.tools.javac.Main class is required). 
```

JRE 仅包含 JVM ( `java.exe`) 和相关库等。JDK 是它的超集，包含 JRE + 编译器 (`javac.exe)`和相关工具。您通常将 JRE 安装在不需要编译器的生产机器上，并且开发环境中的JDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T14:31:05.010

我有一个类似的问题，我通过在 eclipse luna 中将 JRE 设置为 C:\Program Files\Java\jdk1.7.0_51\jre 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:11:35.323

将您的 JAVA_HOME 设置为 C:\Program Files (x86)\Java\jdk1.7.0_09

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-29T13:13:47.147

**方式 1**：以下步骤适用于 Eclipse：

1.  转到窗口 -> 首选项 -> Java -> 已安装的 JRE
2.  将现有 JRE 位置编辑为：设置 JRE Home = JAVA_HOME 或 JAVA_HOME\jre（在您的情况下，路径应为 C:\Program Files\Java\jdk1.7.0_09 或 C:\Program Files\Java\jdk1.7.0_09\ jre)
3.  单击完成和确定按钮

**方式2**：另一种设置JRE系统库的方式：

1.  打开 Eclipse 并右键单击 Eclipse 项目属性
2.  Java 构建路径 -> 库
3.  选择 JRE 系统库 -> 单击编辑按钮
4.  单击“已安装的 JRE...”按钮
5.  将 JRE 编辑为：设置 JRE Home = JAVA_HOME 或 JAVA_HOME\jre

**方式3**：以下步骤也应该很好用：

1.  转到窗口 -> 首选项 -> Java -> 已安装的 JRE
2.  选择您正在使用的 JRE
3.  按编辑-> 添加外部 JAR...
4.  浏览到 Java\jdk1.7.0_09\lib 并选择 tools.jar 并按 Enter
5.  单击完成和确定按钮

# erlang - boss_db 保存记录时出现问题

> ID：13992492
> 
> 赞同：1
> 
> 时间：2012-12-21T15:09:12.010
> 
> 标签：erlang, chicagoboss

我正在将 boss_db 用于一个小项目，并且遇到了一个我无法从文档中破译的问题。

这是我的 Postgres 数据库表：

```
CREATE TABLE recordings (
       recording_id       uuid PRIMARY KEY,      
       created            timestamp NOT NULL, 
       cid_name               text DEFAULT '',   
       cid_number         text NOT NULL, 
       destination_number     text NOT NULL,
       file_path              text NOT NULL,
       message_len            integer, 
       archived               boolean DEFAULT false 
  ); 
```

这是我的模型文件：

```
-module(recording, [Id::uuid(), 
                    Created::datetime(),
                    CidName::string(),
                    CidNumber::string(),
                    DestinationNumber::string(),
                    FilePath::string(),
                    MessageLen::integer(),
                    Archived::boolean()
                   ]). 
```

这是控制台上发生的事情：

```
1> myproto:start().
{ok,<0.34.0>}
2> {ok, recording} = boss_record_compiler:compile("recording.erl").
{ok,recording}
3>  Recording = recording:new(id, {{2012, 12, 20}, {18, 19, 20}}, "", "1002", "1000", "/usr/local/freeswitch/encodings/2012-12-20-13-17-36_1000_1002.ogg", 260, false ).
{recording,id,
           {{2012,12,20},{18,19,20}},
           [],"1002","1000",
           "/usr/local/freeswitch/encodings/2012-12-20-13-17-36_1000_1002.ogg",
           260,false}
4> Recording:save().
{error,{error,error,<<"42703">>,
              <<"column \"id\" of relation \"recordings\" does not exist">>,
              [{position,<<"110">>}]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:12:43.943

我很抱歉，

问题显然是表中不存在列 id。但是我问了这个问题，因为在其他测试中，我将该列命名为模型的下划线版本，即如果模型是客户，那么该列将是 customer_id，并且工作正常。

出于某种原因，现在在 postgres 上的列中使用名称“id”似乎可以正常工作。

```
CREATE TABLE recordings (
       id                     uuid PRIMARY KEY, 
```

... );

# import - phpmyadmin 用逗号导入 CSV 货币

> ID：13992493
> 
> 赞同：1
> 
> 时间：2012-12-21T15:09:15.750
> 
> 标签：import, phpmyadmin

我想用 phpmyadmin 将我的银行帐户 CSV 文件导入数据库，但在荷兰，我们使用逗号分隔数字的货币。

当我导入此文件时，数字列未正确导入。这是因为 mysql 数据库使用 dotś 作为分隔符。

有没有办法在上传之前不改变它来纠正它？

还是每次上传文件之前都必须编辑文件？

欢迎任何帮助

# linux - 如何设置 VirtualHosts 以将同一 IP 上的两个端口指向不同的 ServerNames？

> ID：13992495
> 
> 赞同：5
> 
> 时间：2012-12-21T15:09:28.133
> 
> 标签：linux, virtualhost, apache

我已将 wiki 软件 Gitit 设置为在同一 Apache 服务器的两个独立端口（端口 1848 和 4000）上运行。我已经确认他们正在运行：

[http://wcaleb.rice.edu:4000](http://wcaleb.rice.edu:4000)
[http://wcaleb.rice.edu:1848](http://wcaleb.rice.edu:1848)

现在我想将这两个站点代理为更漂亮的 URL，例如[http://wiki.wcaleb.rice.edu](http://wiki.wcaleb.rice.edu)和[http://hist118.wcaleb.rice.edu](http://hist118.wcaleb.rice.edu)。两者的 IP 地址都是 128.42.173.84

我的服务器管理员已为这些名称添加了 DNS 条目，但我似乎无法让我的 Apache 配置正常工作。按照[此处的说明](http://gitit.net/README#proxying-to-httpwiki.mysite.com)，我尝试像这样设置 VirtualHost：

```
NameVirtualHost *:1848

<VirtualHost *:1848>
    ServerName hist118.wcaleb.rice.edu
    DocumentRoot /var/www/
    RewriteEngine On
    ProxyPreserveHost On
    ProxyRequests Off

    <Proxy *>
       Order deny,allow
       Allow from all
    </Proxy>

    ProxyPassReverse /    http://127.0.0.1:1848
    RewriteRule ^(.*) http://127.0.0.1:1848$1 [P]

    ErrorLog /var/log/apache2/error.log
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
    ServerSignature On

</VirtualHost> 
```

[还有另一个类似的http://wiki.wcaleb.rice.edu](http://wiki.wcaleb.rice.edu)虚拟主机在端口 4000 上。但是当我随后发出时`service httpd restart`，我在启动 httpd 时收到一条`FAILED`消息，我的浏览器无法连接到[http://hist118.wcaleb .rice.edu](http://hist118.wcaleb.rice.edu) .

据我所知，我的 httpd.conf 的其余部分是发行版附带的默认文件。我的服务器正在 RedHat Enterprise 机器上运行。我是 Apache 的新手，所以我确信这里有一个明显的答案，但是在尝试了对配置的各种调整之后，我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:45:32.717

这是你需要做的。

```
 NameVirtualHost *:80

    <VirtualHost *:80>
    ServerName hist118.wcaleb.rice.edu
        DocumentRoot /var/www/
        RewriteEngine On
        ProxyPreserveHost On
        ProxyRequests Off

        <Proxy *>
           Order deny,allow
           Allow from all
        </Proxy>

        ProxyPassReverse /    http://127.0.0.1:1848
        RewriteRule ^(.*) http://127.0.0.1:1848$1 [P]

        ErrorLog /var/log/apache2/error.log
        LogLevel warn

        CustomLog /var/log/apache2/access.log combined
        ServerSignature On

</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:11:30.963

删除`:1848`（或将其更改为`:80`）`NameVirtualHost`和`VirtualHost`。本练习的重点是让 Apache 在默认 HTTP 端口（端口 80）上侦听这些主机名，并将流量代理到 Gitit 正在侦听的高端口。

# reporting-services - 如何在 SSRS 2008 R2 中以 Tablix 列的形式汇总一年中的每个月

> ID：13992496
> 
> 赞同：0
> 
> 时间：2012-12-21T15:09:31.237
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

我有一个包含每个用户的统计信息的表格，比如说

```
TABLE Stats
user varchar(50)
callsdate datetime
howmany INT 
```

我需要显示一个 Tablix，其中列标题应该是 Jul-2012、Aug-2012、Sep-2012 等，具体取决于数据中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:11:13.360

最终，您需要在报告级别设置一个组，该组是月份和年份的串联。

您可以在查询级别执行此操作，例如：

```
select
  [user]
  , monthYear = left(datename(mm, callsdate), 3) + '-' + cast(datepart(yy, callsdate) as char(4))
  , howmany
from [Stats] 
```

如果可以的话，甚至可以在查询级别进行聚合：

```
select
  [user]
  , monthYear = left(datename(mm, callsdate), 3) + '-' + cast(datepart(yy, callsdate) as char(4))
  , howmany = sum(howmany)
from [Stats]
group by [user]
  , monthYear = left(datename(mm, callsdate), 3) + '-' + cast(datepart(yy, callsdate) as char(4)) 
```

使用报表级别的此数据集，您可以`monthYear`根据 Tablix 的需要轻松地对列进行分组。

您将遇到正确订购的问题；我会在数据集中添加另一个计算列：

```
select
  [user]
  , monthYear = left(datename(mm, callsdate), 3) + '-' + cast(datepart(yy, callsdate) as char(4))
  , monthYearOrder = cast(datepart(yy, callsdate) as char(4)) + right('0' + cast(datepart(mm, callsdate) as char(2)), 2)
  , howmany = sum(howmany)
from [Stats]
group by [user]
  , monthYear = left(datename(mm, callsdate), 3) + '-' + cast(datepart(yy, callsdate) as char(4))
  , monthYearOrder = cast(datepart(yy, callsdate) as char(4)) + right('0' + cast(datepart(mm, callsdate) as char(2)), 2) 
```

这将允许您进行分组和排序，`monthYearOrder`但仍使用来自 的文本`monthYear`。

如果您无法在查询级别进行聚合，您可以对报表中的表达式执行类似的操作，例如作为数据集中的计算列：

月年：`=CDate(Fields!callsdate.Value).ToString("MMM-yyyy")`

月年顺序：`=CDate(Fields!callsdate.Value).ToString("yyyyMM")`

# delphi - 如何围绕现有像素数据包装 TCanvas？

> ID：13992503
> 
> 赞同：3
> 
> 时间：2012-12-21T15:09:49.127
> 
> 标签：delphi, graphics, delphi-xe2

**问题**

我有一个包含位图图像的 32 位像素数据数组。

```
TPixel = packed record
  B: Byte;
  G: Byte;
  R: Byte;
  A: Byte;
end;

Size = MyBitmapWidth * MyBitmapHeight;

MyBitmapData : array[0..Size-1] of TPixel; 
```

是否可以创建一个新的 TCanvas 对象并将其附加到我现有的像素数据中？画布对象还需要分配一个句柄。

**背景**

我正在使用创建位图数据的第三方库（作为 32 位像素数组）。我想在另一个以 TCanvas.Handle 作为参数的函数中使用相同的像素数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:37:03.503

根据数组中数据的方向，您可能需要通过以下方式更改方向： pscanLine32[j].rgbReserved := Arr[i * Width + Height - j].A;

```
type
  TPixel = packed record
    B: Byte;
    G: Byte;
    R: Byte;
    A: Byte;
  end;

  TMyBitmapData = array of TPixel;

type
  pRGBQuadArray = ^TRGBQuadArray;
  TRGBQuadArray = ARRAY [0 .. $EFFFFFF] OF TRGBQuad;

Procedure FillBitMap(var bmp: TBitMap; Arr: TMyBitmapData; Width, Height: Integer);
var
  pscanLine32: pRGBQuadArray;
  i, j: Integer;
begin
  if not Assigned(bmp) then
    bmp := TBitMap.Create;
  bmp.PixelFormat := pf32Bit;
  bmp.ignorepalette := true;
  bmp.Width := Width;
  bmp.Height := Height;
  for i := 0 to bmp.Height - 1 do
  begin
    pscanLine32 := bmp.Scanline[i];
    for j := 0 to bmp.Width - 1 do
    begin
      pscanLine32[j].rgbReserved := Arr[i * Width + j].A;
      pscanLine32[j].rgbBlue := Arr[i * Width + j].B;
      pscanLine32[j].rgbRed := Arr[i * Width + j].R;
      pscanLine32[j].rgbGreen := Arr[i * Width + j].G;
    end;
  end;
end;

procedure TForm4.Button1Click(Sender: TObject);
var
  MyBitmapWidth: Integer;
  MyBitmapHeight: Integer;
  Size: Cardinal;
  MyBitmapData: TMyBitmapData;
  bmp: TBitMap;
  x: Integer;
begin
  MyBitmapWidth := 100;
  MyBitmapHeight := 100;
  Size := MyBitmapWidth * MyBitmapHeight;
  SetLength(MyBitmapData, Size );

  for x := 0 to MyBitmapWidth - 1 do
  begin
    MyBitmapData[x * MyBitmapWidth + x].A := 255;
    MyBitmapData[x * MyBitmapWidth + x].R := 255;
  end;

  bmp := TBitMap.Create;
  try
    FillBitMap(bmp, MyBitmapData, MyBitmapWidth,MyBitmapHeight );
    Image1.picture.Assign(bmp);
  finally
    bmp.Free;
  end;

end; 
```

# c# - 打开已经关闭的SqlConnection

> ID：13992504
> 
> 赞同：4
> 
> 时间：2012-12-21T15:09:50.753
> 
> 标签：c#, ado.net, sqlconnection.close

关闭和打开同一个 SqlConnection 对象而不是每次都创建一个新对象是否有任何问题？例如：

```
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
//Some work here
conn.Close()
//Some work here... conn stays in scope
conn.Open() 
```

通过第二次打开连接是否有机会获得非法状态异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:20:28.070

您可以在关闭连接后重新打开连接（但不能重新打开已处理的连接）。

至于 Dave Zych 的问题 - 我们的一些客户在他们的数据库上拥有每个连接的许可证，关闭连接允许其他应用程序使用它。

通常您将启用连接池，在这种情况下，与数据库的实际连接不会（总是）（立即）关闭，但可以由应用程序中的其他相等连接对象使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:20:27.180

这样做没有问题。您可以随意打开和关闭连接。但是，我想知道您为什么要打开和关闭同一个，而不是为每个呼叫创建一个新的。那是因为你连续快速地打了很多电话吗？如果是这样，您可以考虑使用单个`SqlConnection`并在开始时将其打开一次并在结束时将其关闭一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-27T02:16:04.713

打开和关闭同一个连接与创建新连接**做完全相同的事情**，然后打开和关闭它，只要**连接字符串没有改变。**

***原因：*** ADO.NET 使用称为连接池的技术。当您打开带有连接字符串的连接时，ADO.NET 将查看池并查看带有该连接字符串的此连接是否已存在于池中，如果答案是肯定的，那么它将获取并打开该连接为你。否则，ADO.NET 会将带有该连接字符串的连接添加到池中并打开它。这就是为什么第一次访问数据库总是比其他人慢的原因。

此处的详细信息：[https ://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql-server-connection-pooling](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql-server-connection-pooling)

# ios - 尝试实例化 UIAlertView 时出现 BAD_ACCESS

> ID：13992505
> 
> 赞同：0
> 
> 时间：2012-12-21T15:10:01.370
> 
> 标签：ios, exc-bad-access

我正在尝试像这样实例化 UiAlertView：

```
UIAlertView *alert = [[UIAlertView alloc] 
                                      initWithTitle:@"Error"
                                      message:@"Incorrect login or password."
                                      delegate:nil
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil]; 
```

在我收到服务器的响应后，会话过期。然后应用程序让我回到登录屏幕。然后我尝试使用不正确的数据登录，但不会显示警报。相反，它会抛出这样的东西：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread Thread 0 Crashed:
0   libobjc.A.dylib               0x33aa15b0 objc_msgSend + 16
1   UIKit                         0x3a39a370 -[UILabel _setText:] + 92
2   UIKit                         0x3a4e6648 -[UIAlertView
initWithTitle:message:delegate:cancelButtonTitle:otherButtonTitles:] + 64
3   MY APP                       0x00039c7e 0x34000 + 23678
4   MY APP                        0x0005f784 0x34000 + 178052
5   MY APP                       0x000756be 0x34000 + 267966
6   Foundation                    0x347d28e8 __NSThreadPerformPerform + 456
7   CoreFoundation                0x32bbd680
__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
8   CoreFoundation                0x32bbcee4 __CFRunLoopDoSources0 + 208
9   CoreFoundation                0x32bbbcb2 __CFRunLoopRun + 642
10  CoreFoundation                0x32b2eeb8 CFRunLoopRunSpecific + 352
11  CoreFoundation                0x32b2ed44 CFRunLoopRunInMode + 100
12  GraphicsServices              0x3a92c2e6 GSEventRunModal + 70
13  UIKit                         0x3a3ea2f4 UIApplicationMain + 1116
14  MY APP                       0x0003527e 0x34000 + 4734
15  MY APP                       0x000351dc 0x34000 + 4572 
```

是分配用@创建的字符串还是什么？

编辑：由于请求，我正在添加更多代码。我不认为服务器响应函数是相关的，因为它只是执行 x logOut 方法。顺便说一句，我发布的整个代码都放在 AppDelegate

```
- (void) logout
{
    isLogged = NO;
    currentUser = nil;
    [self createNotLoggedIn];
} 
```

然后创建 notLoggedIn 方法为登录表单创建 UIViewController。

```
-(void) createNotLoggedIn
{

    UIViewController *loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];

    //UINavigationControllers are created here... stripped    

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.delegate = self;
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:navLoginViewController, navGrafikLekarzyViewController, navPlacowkiViewController, navWiecejViewController, nil];

    [self.window addSubview:self.tabBarController.view];

    [self.window makeKeyAndVisible];   
} 
```

logOut 和 createNotLoggedIn 放在 AppDelegate 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:07:54.823

堆栈显示崩溃发生在与文本相关的内部 setter 方法中。所以问题的根源可能是您作为参数传递的字符串之一。

设置断点并检查调试器中的字符串。或者启用僵尸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:13:57.217

当创建 ViewController 并且它可以工作时，我将显示 AlertDialog 的代码移动到 AppDelegate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T08:57:21.767

我怀疑问题出在以下几点：

```
1   UIKit  0x3a39a370 -[UILabel _setText:] + 92 
```

此行在您的标签上设置了一些文本，但它似乎为 null 或 nil 或为空。

希望能帮助到你，

问候，

雷诺琼斯

# php - 绕过服务器查杀php脚本

> ID：13992506
> 
> 赞同：0
> 
> 时间：2012-12-21T15:10:02.813
> 
> 标签：php, cron, fopen

我正在尝试使用带有`ignore_user_abort(true);`and的脚本在 php 中创建一个 cronjob `set_time_limit(0);`。基本工作，但不幸的是，该进程在 15 分钟后被服务器杀死。

现在我`fopen`通过在页面被杀死之前再次请求页面来绕过它。这在第一次按预期工作（它截断表，循环然后加载 id=2 的页面）。插入 id=2 的第二行，循环开始正确。不幸的是，在第 2 页之后它继续使用相同的 ID，它不会继续使用 id=3、4 等。

有人知道如何解决这个问题吗？

我用于测试的示例代码：

```
<?php
ignore_user_abort(true);
set_time_limit(0);
$interval=1;
$startTime = time();
$maxLoop = 10;
$id = (strlen($_GET['id'])>0) ? trim($_GET['id']) : 1;

require_once('ct2database.php');
ct2database::init();

if ($id==1) {
  //init table
  ct2database::query("TRUNCATE TABLE crontest");
}
ct2database::query("INSERT INTO crontest (Id, Counter, StartDate) VALUES (".$id.", 0, '".date("Y-m-d H:i:s")."')");

//loop
do{
  ct2database::query("UPDATE crontest SET Counter=Counter+1 WHERE id=".$id);
  sleep($interval);
}while($maxLoop--);

$newid = $id+1;
$url = 'http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'].'?id='.$newid . '&t='.time();

//regular end of loop
ct2database::query("UPDATE crontest SET EndDateRegular='".date("Y-m-d H:i:s")."' WHERE id=".$id);

$context = stream_context_create( array(
  'http'=>array(
    'timeout' => 0.5
  )
));
$fp = fopen($url, 'r', false, $context);

register_shutdown_function('ShutdownHandler');
function ShutdownHandler() {
  global $id;
  //update on shutdown
  ct2database::query("UPDATE crontest SET EndDateShutdown='".date("Y-m-d H:i:s")."' WHERE id=".$id);
}

set_error_handler("ErrorHandler"); 
function ErrorHandler() {
  global $id;
  //update on error
  ct2database::query("UPDATE crontest SET EndDateError='".date("Y-m-d H:i:s")."' WHERE id=".$id);
}

?> 
```

结果：

```
Array
(
    [Id] => 1
    [Counter] => 10
    [DateModified] => 2012-12-21 16:01:54
    [StartDate] => 2012-12-21 16:01:42
    [EndDateRegular] => 2012-12-21 16:01:53
    [EndDateShutdown] => 2012-12-21 16:01:54
    [EndDateError] => 0000-00-00 00:00:00
)
Array
(
    [Id] => 2
    [Counter] => 55
    [DateModified] => 2012-12-21 16:02:49
    [StartDate] => 2012-12-21 16:01:54
    [EndDateRegular] => 2012-12-21 16:02:49
    [EndDateShutdown] => 2012-12-21 16:02:49
    [EndDateError] => 0000-00-00 00:00:00
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:09:39.263

我用这个小例子尝试了你的脚本“重启”，到目前为止它运行良好。

```
<?php
if (isset($_GET['id'])) {
    $id = $_GET['id'];
} else {
    $id = 1;
}

echo "$id ";
++$id;
$url = 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['PHP_SELF'] . '?id=' . $id;

if ($id < 10) {
    $fp = fopen($url, 'r');
    $buf = fread($fp, 100);
    echo $buf;
    fclose($fp);
} 
```

但是，我使用了`PHP_SELF`，因为`REQUEST_URI`包含包含参数的完整路径`id`。这建立在像`http://server/path?id=1?id=2?id=3?id=...`. 我还读取了脚本的输出，否则当出现某些输出时它可能会阻塞。

要记住的另一点是，这实际上是一个无休止的递归。这有时可能会导致`connection refused`错误。

所以真正的解决方案应该是查看服务器日志并找出问题的真正原因。

# php - 具有更严格输入标准的子类的替代方法

> ID：13992507
> 
> 赞同：3
> 
> 时间：2012-12-21T15:10:05.977
> 
> 标签：php, class, inheritance

我有一个 Entity 类和一个派生 Item 类，其中包含一些额外的东西。我正在创建一些东西，我可以用它来修补这些对象（即对它们应用差异）。我目前拥有的是一个 EntityPatcher 类，它将 Entity 对象转换为关联数组，然后将其提供给通用修补实用程序（使用组合）。这对 Entity 对象很有用，但对于 Item 对象，需要考虑一些额外的字段。我开始做的是创建一个派生 ItemPatcher 类，其中包含一些额外的东西。不过，此类只能与 Items 一起使用，从而缩小了 patch 方法接受的范围。我猜这很糟糕，因为它违反了liskov替换。我不确定什么是更好的方法，因此我正在寻找替代解决方案的建议或指针。

[实体修补程序： http](http://pastebin.com/CYa3ehH4) ://pastebin.com/CYa3ehH4

[物品修补程序： http](http://pastebin.com/3BReBZGH) ://pastebin.com/3BReBZGH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:45:34.253

听起来你想应用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。

[http://en.wikipedia.org/wiki/Adapter_pattern](http://en.wikipedia.org/wiki/Adapter_pattern)

# c# - 使用两个条件拆分字符串

> ID：13992508
> 
> 赞同：3
> 
> 时间：2012-12-21T15:10:06.097
> 
> 标签：c#, linq

我有一个字符串，如下所示。

> 字符串样本=“class0 .calss1 .class2 .class3.class4 .class5 class6 .class7”；

我需要从这个示例字符串中创建一个 WORDS 列表。

WORD 是一个以句点开头并以以下结尾的字符串：

1.  一个空格或
2.  另一个时期或
3.  字符串结尾

**注意**：这里的关键点是 - 拆分基于两个标准 - 句点和空格

我有以下程序。它工作正常。但是，是否有更简单/更有效/简洁的方法使用`LINQ`or `Regular Expressions`？

代码

```
 List<string> wordsCollection = new List<string>();
        string sample = " class0 .calss1 .class2 .class3.class4  .class5 class6 .class7";

        string word = null;

        int stringLength = sample.Length;
        int currentCount = 0;

        if (stringLength > 0)
        {
            foreach (Char c in sample)
            {

                currentCount++;
                if (String.IsNullOrEmpty(word))
                {
                    if (c == '.')
                    {
                        word = Convert.ToString(c);
                    }
                }
                else
                {

                    if (c == ' ')
                    {
                        //End Criteria Reached
                        word = word + Convert.ToString(c);
                        wordsCollection.Add(word);
                        word = String.Empty;
                    }
                    else if (c == '.')
                    {
                        //End Criteria Reached
                        wordsCollection.Add(word);
                        word = Convert.ToString(c);
                    }
                    else
                    {
                        word = word + Convert.ToString(c);
                        if (stringLength == currentCount)
                        {
                            wordsCollection.Add(word);
                        }
                    }
                }

            }
        } 
```

结果

```
 foreach (string wordItem in wordsCollection)
        {
            Console.WriteLine(wordItem);

        } 
```

![在此处输入图像描述](../Images/a7fe2d91ab40aa62b5241b5550e34f01.png)

参考：

1.  [根据谓词拆分字符串](https://stackoverflow.com/questions/2265303/splitting-up-a-string-based-on-predicate)
2.  [有没有更好的方法来获取每个项目与谓词匹配的子序列？](https://stackoverflow.com/questions/568724/is-there-a-better-way-to-get-sub-sequences-where-each-item-matches-a-predicate?rq=1)
3.  [基于 Linq 的泛型替代 Predicate<T>？](https://stackoverflow.com/questions/2783767/linq-based-generic-alternate-to-predicatet?rq=1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:12:11.650

您可以使用正则表达式执行此操作。

**代码**

```
Regex regex = new Regex(@"\.[^ .]+");
var matches = regex.Matches(sample);
string[] result = matches.Cast<Match>().Select(x => x.Value).ToArray(); 
```

在线查看它：[ideone](http://ideone.com/kFPTG5)

**结果**

```
.calss1
.class2
.class3
.class4
.class5
.class7 
```

**正则表达式的解释**

```
\。匹配一个点
[^. ]+ 否定字符类 - 除了空格或点之外的任何内容（至少一个）

```

**有关的**

*   [字符类或字符集](http://www.regular-expressions.info/charclass.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:41:16.063

```
string sample = " class0 .calss1 .class2 .class3.class4  .class5 class6 .class7";

string[] words = sample.Split(new char[] {'.'}).Skip(1).Select(x=> 
            "." + x.Split(new char[] {' '})[0].Trim()).ToArray(); 
```

编辑错过了列表部分：

```
List<string> words = sample.Split(new char[] {'.'}).Skip(1).Select(x=> 
            "." + x.Split(new char[] {' '})[0].Trim()).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:13:43.197

是否需要保留 . 和空间？

如果没有，您可以使用：

```
sample.split(new char[]{" ", "."}).ToList(); 
```

这将为您提供一个字符串列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:33:04.480

```
string sample = " class0 .calss1 .class2 .class3.class4 .class5 class6 .class7";
sample = Regex.Replace(sample, " ", String.Empty);
string[] arr = sample.Split(new char[] { '.' }); 
```

# c# - 如何从自定义 SQL“AdminUsers”表中保护管理员的 MVC4 区域

> ID：13992514
> 
> 赞同：1
> 
> 时间：2012-12-21T15:11:08.030
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4.3, asp.net-mvc-areas, asp.net-authorization

我已经看到了许多使用令牌、roleprovider 和 memberprovider 保护 MVC 应用程序的示例，但没有一个完全适合我的场景。这是我的设置..

*   VS2012 链接到 SQL 2008 R2 使用 EntityFramework 4.3 管理数据。
*   项目在 IIS 中设置用于基本身份验证，因此所有拥有 empID 的教职员工和学生都可以在内部或外部进行身份验证。其中一些人是管理员，因此他们在管理区域进行管理。
*   我在我的项目中创建了一个当前没有安全性的“管理”区域，因此任何人都可以键入域/管理员并被重定向到该区域。此区域包含管理员用户 (CRUD)、约会 (CRUD)、设置 (U)、工具和报告功能。adminUser 和约会部分有自己的表，并且 CRUD 按预期工作。

这就是我要问的问题。如何从我的 AdminUsers sql 表中针对“管理员”验证基本身份验证当前用户，然后只允许这些人访问我的管理区域？

谢谢你的时间，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:45:49.280

如果您不打算依赖成员资格或角色，您总是可以编写一个自定义实现`AuthorizeAttribute`来检查用户与数据库。

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class AdminOnlyAttribute : AuthorizeAttribute
{
    public AdminOnlyAttribute()
    {
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (!User not in Admin table)
        {
          throw new UnauthorizedAccessException();
        }
        base.OnAuthorization(filterContext);
    }
} 
```

或者类似的东西。然后当然是：

```
[AdminOnly]
public class AdminController : Controller
{
    // ...
} 
```

# r - 组织结构图三角形图

> ID：13992515
> 
> 赞同：11
> 
> 时间：2012-12-21T15:11:17.553
> 
> 标签：r, graph, plot, ggplot2

我想创建一个带有组织结构（层次结构）的三角形图，显示不同公司每个级别的员工数量。

以下是一些示例数据：

```
mylabd <- data.frame (company = rep(c("A", "B", "C"), each = 7),
skillsDg = rep(c("Basic", "HighSc", "Undgd", "MAST", "PHD", "EXPD", "EXECT"), 3),
number = c(200, 100, 40, 30, 10, 0, 0,
           220, 110, 35, 10, 0, 4, 1,
           140, 80, 120, 50, 52, 52, 3)
           )
   company skillsDg number
1        A    Basic    200
2        A   HighSc    100
3        A    Undgd     40
4        A     MAST     30
5        A      PHD     10
6        A     EXPD      0
7        A    EXECT      0
8        B    Basic    220
9        B   HighSc    110
10       B    Undgd     35
11       B     MAST     10
12       B      PHD      0
13       B     EXPD      4
14       B    EXECT      1
15       C    Basic    140
16       C   HighSc     80
17       C    Undgd    120
18       C     MAST     50
19       C      PHD     52
20       C     EXPD     52
21       C    EXECT      3 
```

目的是反映不同的公司如何雇用不同的技术或学位工人。

假设的数字是这样的（虽然颜色填充并不完美）。 ![在此处输入图像描述](../Images/98e41cf2e49cd38ca33345d334829fc3.png) 这个想法是每个阶段的线宽成比例，然后将线连接起来。如果后续级别没有类别，则不会连接（如B公司）。我找不到可以做到这一点的程序，也无法弄清楚。任何想法 ？

编辑：

我对 R 的了解不多，但这就是我的想法是如何形成的。它将每个线段从一个点一分为二，使其对称。然后连接绘制的水平线。

![在此处输入图像描述](../Images/ab349f8ee40c9796f45c945c184fb906.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T16:02:57.293

我不知道有任何功能这样做，但这是一个从头开始的功能：

```
my1 <- data.frame (company = rep(c("A", "B", "C"), each = 7), skillsDg = rep(c("Basic", "HighSc", "Undgd", "MAST", "PHD", "EXPD", "EXECT"), 3), number = c(200, 100, 40, 30, 10, 0, 0, 220, 110, 35, 10, 0, 4, 1, 140, 80, 120, 50, 52, 52, 3) )

my2 <- split(my1,my1$company) #split your dataframe into a list where each element is a company
# The next line create the layout
layout(matrix(1:(length(my2)+1), nrow=1), width=c(1,rep(4,length(my2))))
# Then we draw the x-axis:
par(mar=c(3,0,3,0))
plot(NA,axes=F, xlim=c(0,1),ylim=c(1,nlevels(my1$skillsDg)))
axis(side=4,tick=F,labels=unique(my1$skillsDg),
     at=seq_along(unique(my1$skillsDg)), las=2, line=-4)
# Then we apply a graphing function to each company:
lapply(my2,function(x){
    par(mar=c(3,0,3,0))
    plot(NA, xlim=c(-max(my1$number),max(my1$number)), 
             ylim=c(1,nlevels(my1$skillsDg)),axes=F)
    title(sub=x$company[1],line=1)
    abline(h=seq_along(x$skillsDg), col="grey80")
    polygon(x=c(x$number,rev(-1*x$number)), 
            y=c(seq_along(x$skillsDg),rev(seq_along(x$skillsDg))), 
            col=as.numeric(x$company))
    }) 
```

![在此处输入图像描述](../Images/513a73591cadc6cb83ed7ba0b4c39a67.png)

**编辑**：您当然可以在图形函数中添加任何您想要的内容`lapply`（但在某些情况下，这可能意味着改变一点图形的尺寸）：

```
layout(matrix(1:(length(my2)+1), nrow=1), width=c(1,rep(4,length(my2))))
par(mar=c(3,0,3,0))
plot(NA,axes=F, xlim=c(0,1),ylim=c(1,nlevels(my1$skillsDg)))
axis(side=4,tick=F,labels=unique(my1$skillsDg),
    at=seq_along(unique(my1$skillsDg)), las=2, line=-4)
lapply(my2,function(x){
    par(mar=c(3,0,3,0))
    plot(NA, xlim=c(-max(my1$number)-50,max(my1$number)+50), 
        ylim=c(1,nlevels(my1$skillsDg)),axes=F)
    title(sub=x$company[1],line=1)
    abline(h=seq_along(x$skillsDg), col="grey80")
    text(x=x$number+5, y=seq_along(x$skillsDg)+.1, label=x$number, pos=4)
    polygon(x=c(x$number,rev(-1*x$number)), 
        y=c(seq_along(x$skillsDg),rev(seq_along(x$skillsDg))), 
        col=as.numeric(x$company))
    }) 
```

![在此处输入图像描述](../Images/c286d4d34484daaefe6d569eeeff8b5a.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T01:23:34.000

Using the **grid** package, we can have someting like this:

![enter image description here](../Images/460cd9c01dc985fa69619546fe10dd35.png)

```
mylabd <- data.frame (company = rep(c("A", "B", "C"), each = 7),
                      skillsDg = rep(c("Basic", "HighSc", "Undgd", "MAST", "PHD", "EXPD", "EXECT"), 3),
                      number = c(200, 100, 40, 30, 10, 0, 0,
                                 220, 110, 35, 10, 0, 4, 1,
                                 140, 80, 120, 50, 52, 52, 3)
)

## to comapre we need o have the same scales for all organizations
nskills <- nlevels(mylabd$skillsDg)
ncompany <- nlevels(mylabd$company)
barYscale <- c(0,  nskills) * 1.05
barXscale <- c(0, max(mylabd$number) )* 1.05
## the global scene
vp <- plotViewport(c(5, 4, 4, 1),
                   yscale = barYscale,
                   layout = grid.layout(nrow=1,ncol=nbars))

pushViewport(vp)
grid.rect()
grid.yaxis(at=c(1:nlevels(mylabd$skillsDg)),label=unique(mylabd$skillsDg))
grid.grill()

## split data by companya
data.splitted <- split(mylabd,f=mylabd$company)
lapply(1:3,function(company){

  x <- data.splitted[[company]]
  vv <- x$number
  companyName <- unique(x$company)

  pushViewport(viewport(layout.pos.col=company,    
                        xscale = barXscale,
                        yscale = barYscale))
  grid.rect()
 # grid.xaxis(at= mean(x$number),label = companyName)
  grid.xaxis()
  grid.polygon(x  = unit.c(unit(0.5,'npc')-unit(vv/2,'native'),
                           unit(0.5,'npc')+unit(rev(vv)/2,'native')),
               y  = unit.c(unit(1:nmeasures,'native'),
                           unit(rev(1:nmeasures),'native')),
               gp=gpar(fill = rainbow(nmeasures)[company]))
  grid.polygon(x  = unit.c(unit(0.5,'npc')-unit(vv/2,'native'),
                           unit(0.5,'npc')+unit(rev(vv)/2,'native')),
               y  = unit.c(unit(1:nmeasures,'native'),
                           unit(rev(1:nmeasures),'native')),
               id = c(1:nmeasures,rev(1:nmeasures)),
               gp=gpar(fill = NA))

  grid.text( x = unit(0.5,'npc'),
             y = unit(0.5,'native'),
             label = unique(x$company))

  popViewport()

})

popViewport() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T05:33:27.920

与您要求的图表不同，但尝试遵循一些常见的可视化原则：

```
library(ggplot2)
mylabd$skillsDg <- factor(mylabd$skillsDg, levels = c("Basic", "HighSc", "Undgd", "MAST", "PHD", "EXPD", "EXECT"))
p <- ggplot(data=mylabd, aes(x=skillsDg, y=number, fill = skillsDg))
p <- p + geom_bar(stat = "identity") + coord_flip()
p <- p + facet_wrap( ~ company, ncol = 1, nrow=3)
plot(p) 
```

![在此处输入图像描述](../Images/2ba23114cb9b068af632882d96d586c8.png)

# ruby-on-rails - 如何使用 Rails 和 Active Record 在单个列中查找匹配项？

> ID：13992516
> 
> 赞同：4
> 
> 时间：2012-12-21T15:11:17.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, duplicates, duplicate-removal

我知道使用基本 SQL 和活动记录查询语言在单个表中查找精确重复记录的方法。但我需要知道如何执行紧密匹配搜索，我想考虑拼写错误。在 Rails 应用程序中查找潜在重复项和接近匹配项的最佳方法是什么？我使用 MySQL 作为数据库。

编辑：我想要匹配的数据类型是字符串，它们作为字符串存储在数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:22:03.240

I think [thinking_sphinx](https://github.com/pat/thinking-sphinx) and [Sphinx](http://sphinxsearch.com) might be two interesting tools for you. What you want is provided by a set of feature called full text search wich is a big topic to explain in a single answer but you will probably want to learn about "word proximity" and "lexemes"

# c# - C# .NET x86/x64 哪个项目决定平台？

> ID：13992517
> 
> 赞同：2
> 
> 时间：2012-12-21T15:11:19.917
> 
> 标签：c#, .net, x86-64, platform

我的视觉工作室项目中有以下情况：

*   大会 C
*   项目 A -> 类库**任何 CPU**（参考程序集 C）
*   项目 B -> windows 应用程序**x86**（参考项目 A）

在这种配置中，什么决定了 C 将使用什么平台程序集？

1.  项目 B 是启动项目 --> 程序集 C 将运行 x86
2.  项目 A 是直接引用程序集 C 的项目 --> 程序集 C 将根据平台运行 x86 或 x64

1 还是 2？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:13:15.647

启动程序集确定使用哪个平台。如果启动程序集构建为“任何 CPU”，它将在操作系统运行的平台上运行。

（换句话说，1）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-21T15:16:57.390

这取决于针对目标编译的程序集 C。其他项目不会以任何方式影响它的形状或形式。这种具有混合目标的设置可能会导致很多问题。

由于 B 是应用程序，它将作为 x86 运行。如果您使用的是 x64，项目 A 将无法加载，因为 A 将尝试以 x64 运行，而 x86 应用程序无法加载 x64 dll

如果您在 x86 机器上运行它，那么项目 A 也将运行 x86 并正确加载。

# html - % 高度的行高

> ID：13992519
> 
> 赞同：0
> 
> 时间：2012-12-21T15:11:34.130
> 
> 标签：html, css, height, vertical-alignment

当我想在 div 中垂直居中文本时，例如添加 line-height；

```
<div class="text"> Text </div> 
```

```
.text{
   height:50px;
   line-height:50px;
 } 
```

但是如果高度：5%，如何给行高的值以在 div 中垂直居中文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:14:05.817

如果你想在 div 中间居中文本，只需添加：

```
display:table-cell;
vertical-align:middle; 
```

到你的 div ，它会在中间垂直对齐。

**CSS**

```
<div class="text"> Text </div> 
```

```
.text{
   height:50px;
   display:table-cell;
   vertical-align:middle;
 } 
```

**示例** [http://jsfiddle.net/JaP22/](http://jsfiddle.net/JaP22/)

# sql - 如何在 Db 中实现嵌套组？

> ID：13992521
> 
> 赞同：3
> 
> 时间：2012-12-21T15:11:38.607
> 
> 标签：sql, sql-server, permissions

问题：在我们的数据库中，我们有一个表 Users，一个表 Groups，以及一个从用户到组的映射表。然后我们有权限，这些权限在组上。

```
T_User
USR_UID
USR_Name
USR_PasswordHash

T_Group
GRP_UID
GRP_Name

T_MAP_User_Group
MAP_USRGRP_UID
MAP_USRGRP_USR_UID
MAP_USRGRP_GRP_UID

T_MAP_SitePermission
MAP_STEGRP_UID
MAP_STEGRP_STE_UID
MAP_STEGRP_GRP_UID
MAP_STEGRP_ReadPermission
MAP_STEGRP_WritePermission
MAP_STEGRP_DeletePermission

T_Sites
STE_UID
STE_Name
STE_Location 
```

现在，如果我想将组添加到组（嵌套组，如在 ActiveDirectory 中），我将如何实现这一点，特别是在选择查询中将用户解析为组和权限/权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:35:21.210

您可以为组添加映射表...按照您的约定，它看起来像下面这样：

```
T_MAP_Group_Group
MAP_GRPGRP_UID
MAP_GRPGRP_PARENT_GRP_UID
MAP_GRPGRP_CHILD_GRP_UID 
```

这允许一个组嵌套在多个父组中......同时允许一个组成为多个子组的父组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:34:31.470

有许多不同的方法可以处理这个问题，我相信最好的处理方法是创建一个父组到组的关系表。至于如何正确查询来确定权限，我认为还没有足够的信息来确定。如何解决冲突的权限，父组会覆盖子组还是相反？

# javascript - 将 Razor 函数分配给 JavaScript 变量？

> ID：13992522
> 
> 赞同：-1
> 
> 时间：2012-12-21T15:11:42.580
> 
> 标签：javascript, asp.net, html, razor

我有一个 JavaScript 函数，我想在其中调用 a `Razor C# Function`，我知道它在 HTML 中很容易，但在 JavaScript 中我遇到了很多编译错误，我尝试了这个`<text> tag`技巧，但没有任何效果。

getHTML 是我的 JavaScript 函数，getPageSource 是返回字符串的 C# 函数：

```
<script language="javascript" type="text/javascript">

        function getHTML() {
            var html = "@getPageSource("http://www.google.com")" ;       
            alert(html);
        }

</script> 
```

where`@getPageSource`在 html 上方定义并且在 HTML 代码中运行良好

有没有办法将一些 Razor 代码分配给 JavaScript 变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:22:32.147

您不能在客户端执行服务器端功能。Razor 仅用于使您能够在服务器中生成要返回的 HTML 代码时拥有一些逻辑。

如果这是一个返回字符串的 C# 函数，则应将其括在引号内，否则当浏览器解析您的响应时，它不会被解释为 Javascript 字符串。

```
var html = '@getPageSource("http://www.google.com")'; 
```

请记住，如果您的 getPageSource("http://www.google.com") 返回带有引号的字符串，则 javascript 将不一致并且无法创建您的 JS 字符串。想象一下您的方法返回了`<div> ' hello ' </div>`. 最终会像：

```
var html = '<div> ' hello ' </div>'; 
```

看到问题了吗？

请参阅此内容以将 HTML C# 字符串转换为可用作 JS 字符串的字符串。 [http://codeasp.net/blogs/raghav_khunger/microsoft-net/722/how-to-escape-single-quotes-in-c-so-that-the-string-can-be-used-in-javascript](http://codeasp.net/blogs/raghav_khunger/microsoft-net/722/how-to-escape-single-quotes-in-c-so-that-the-string-can-be-used-in-javascript)

您必须将每个替换`'`为`\\'`. 请记住，您的字符串将完全传递给 HTML 代码。想象一下您的代码正在返回`"It's blue"`。当写在 HTML 中时，它会结束`var str = 'It's blue'`（注意，这`"s blue"`将被认为是在字符串之外，并且会被浏览器给出一个解析错误）。要在 JS 中编写它，您需要类似`var str = 'It\'s blue'`这样的东西，这样浏览器就会知道引号不是结束字符串引号，而是包含在字符串中。要在 C# 中包含破折号，您的返回字符串必须是`"It\\'s blue"`一次替换`'`为`\\'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:18:36.497

是`getPageSource()`JavaScript 函数还是 C# 函数？

如果是 JavaScript，则不需要前缀`@`. 如果是 C#，则只需添加引号：

```
var html = '@getPageSource("http://www.google.com")'; 
```

# java - 如何在 Android 中更改 TableRow 的高度？

> ID：13992531
> 
> 赞同：1
> 
> 时间：2012-12-21T15:12:09.033
> 
> 标签：java, android, tablerow, android-tablelayout

我想在我的应用程序中自定义 TableRow - 更改它的高度以便我可以在其中放置两行按钮。我无法在 UI 设计器中实现它。所以问题是——我怎样才能在 XML 或 Java 代码中以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:18:38.780

不完全确定您想要什么，但这是您如何`Buttons`在一个中获得“行”的方法`TableRow`。做类似的事情，看看你在说什么。

我`LinearLayout`在`TableRow`that is 中添加了一个`vertical orientation`，然后将其包装`Buttons`在另一个`LinearLayout`that is 中`horizontal orientation`。

```
<TableRow>

    <LinearLayout
        android:id="@+id/layout3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/layout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/button1"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="ABCDE" />

            <Button
                android:id="@+id/button2"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="A" />

            <Button
                android:id="@+id/button3"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="ABC" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/button1"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="ABCDE" />

            <Button
                android:id="@+id/button2"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="A" />

            <Button
                android:id="@+id/button3"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="ABC" />
        </LinearLayout>
    </LinearLayout>
</TableRow> 
```

# android - Android ImageView 将较小的图像缩放到具有灵活高度的宽度，而不会裁剪或扭曲

> ID：13992535
> 
> 赞同：84
> 
> 时间：2012-12-21T15:12:12.310
> 
> 标签：android, imageview, image-scaling

经常被问到，从不回答（至少不是以可重复的方式）。

我有一个图像视图，其图像**小于**视图。我想将图像缩放到屏幕的宽度并调整 ImageView 的高度以反映图像的比例正确高度。

```
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/> 
```

这会导致图像以原始尺寸为中心（小于屏幕宽度），边距位于侧面。不好。

所以我加了

```
android:adjustViewBounds="true" 
```

一样的效果，不好。我添加了

```
android:scaleType="centerInside" 
```

一样的效果，不好。我`centerInside`改为`fitCenter`. 一样的效果，不好。我`centerInside`改为`centerCrop`.

```
android:scaleType="centerCrop" 
```

现在，最后，图像被**缩放**到屏幕的宽度 - 但在顶部和底部被**裁剪！**所以我`centerCrop`改为`fitXY`.

```
android:scaleType="fitXY" 
```

现在图像被缩放到屏幕的宽度，但**没有**在 y 轴上缩放，导致图像**失真**。

删除`android:adjustViewBounds="true"`没有效果。正如其他地方所建议的那样，添加一个`android:layout_gravity`再次没有效果。

我尝试了其他组合 - 无济于事。所以，请问有谁知道：

**如何设置 ImageView 的 XML 以填充屏幕宽度、缩放较小的图像以填充整个视图、以纵横比显示图像而不失真或裁剪？**

编辑：我还尝试设置任意数字高度。这仅对设置有影响`centerCrop`。它将根据视图高度垂直扭曲图像。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-07-02T11:24:44.443

我通过创建一个包含在布局文件中的 java 类解决了这个问题：

```
public class DynamicImageView extends ImageView {

    public DynamicImageView(final Context context, final AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec) {
        final Drawable d = this.getDrawable();

        if (d != null) {
            // ceil not round - avoid thin vertical gaps along the left/right edges
        final int width = MeasureSpec.getSize(widthMeasureSpec);
        final int height = (int) Math.ceil(width * (float) d.getIntrinsicHeight() / d.getIntrinsicWidth());
            this.setMeasuredDimension(width, height);
        } else {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }
} 
```

现在，您可以通过将类添加到布局文件中来使用它：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <my.package.name.DynamicImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scaleType="centerCrop"
        android:src="@drawable/about_image" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-03-07T15:49:18.243

我遇到了和你一样的问题。在尝试不同的变化 30 分钟后，我以这种方式解决了问题。它为您提供**灵活的高度**和**宽度调整到父宽度**

```
<ImageView
            android:id="@+id/imageview_company_logo"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:adjustViewBounds="true"
            android:scaleType="fitCenter"
            android:src="@drawable/appicon" /> 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-24T14:37:34.870

XML 布局标准中没有可行的解决方案。

对动态图像大小做出反应的唯一可靠方法是`LayoutParams`在代码中使用。

令人失望。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-21T15:30:54.697

```
 android:scaleType="fitCenter" 
```

计算将保持原始 src 纵横比的比例，但也将确保 src 完全适合 dst。至少一个轴（X 或 Y）将完全适合。结果以 dst 为中心。

**编辑：**

这里的问题`layout_height="wrap_content"`是不是“允许”图像扩展。您必须为它设置一个大小，以便进行更改

```
 android:layout_height="wrap_content" 
```

到

```
 android:layout_height="100dp"  // or whatever size you want it to be 
```

**编辑2：**

工作正常：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="300dp"
    android:scaleType="fitCenter"
    android:src="@drawable/img715945m" /> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-29T06:49:50.737

这是对 Mark Martinsson 出色解决方案的一个小补充。

如果您的图像的宽度大于其高度，那么 Mark 的解决方案将在屏幕的顶部和底部留出空间。

下面通过首先比较宽度和高度来解决这个问题：如果图像宽度> =高度，那么它将缩放高度以匹配屏幕高度，然后缩放宽度以保持纵横比。同样，如果图像高度 > 宽度，那么它将缩放宽度以匹配屏幕宽度，然后缩放高度以保持纵横比。

换句话说，它恰当地满足了 的定义`scaleType="centerCrop"`：

[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

> 均匀缩放图像（保持图像的纵横比），使图像的 **两个尺寸（宽度和高度）**都**等于或** **大于**视图的相应尺寸（减去填充）。

```
package com.mypackage;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.widget.ImageView;

public class FixedCenterCrop extends ImageView
{
    public FixedCenterCrop(final Context context, final AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec)
    {
        final Drawable d = this.getDrawable();

        if(d != null) {
            int height = MeasureSpec.getSize(heightMeasureSpec);
            int width = MeasureSpec.getSize(widthMeasureSpec);

            if(width >= height)
                height = (int) Math.ceil(width * (float) d.getIntrinsicHeight() / d.getIntrinsicWidth());
            else
                width = (int) Math.ceil(height * (float) d.getIntrinsicWidth() / d.getIntrinsicHeight());

            this.setMeasuredDimension(width, height);

        } else {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }
} 
```

此解决方案自动在纵向或横向模式下工作。就像在 Mark 的解决方案中一样，您可以在布局中引用它。例如：

```
<com.mypackage.FixedCenterCrop
    android:id="@+id/imgLoginBackground"
    android:src="@drawable/mybackground"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:scaleType="centerCrop" /> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-11T02:26:18.940

我遇到了同样的问题，但高度固定，缩放宽度保持图像的原始纵横比。我通过加权线性布局解决了它。希望您可以根据需要对其进行修改。

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <ImageView
        android:id="@+id/image"
        android:layout_width="0px"
        android:layout_height="180dip"
        android:layout_weight="1.0"
        android:adjustViewBounds="true"
        android:scaleType="fitStart" />

</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-07T15:11:37.513

Kotlin 版本的 Mark Martinsson 的[回答](https://stackoverflow.com/a/17424313/652017)：

```
class DynamicImageView(context: Context, attrs: AttributeSet) : AppCompatImageView(context, attrs) {
override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {
    val drawable = this.drawable

    if (drawable != null) {
        //Ceil not round - avoid thin vertical gaps along the left/right edges
        val width = View.MeasureSpec.getSize(widthMeasureSpec)
        val height = Math.ceil((width * drawable.intrinsicHeight.toFloat() / drawable.intrinsicWidth).toDouble()).toInt()
        this.setMeasuredDimension(width, height)
    } else {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec)
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-16T16:12:31.417

Mark Matinsson 解决方案的又一补充。我发现我的一些图像比其他图像放大了。所以我修改了这个类，使图像按最大因子缩放。如果图像太小而无法以最大宽度缩放而不会变得模糊，它将停止缩放超出最大限制。

```
public class DynamicImageView extends ImageView {

    final int MAX_SCALE_FACTOR = 2;
    public DynamicImageView(final Context context) {
        super(context);
    }

    @Override
    protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec) {
        final Drawable d = this.getDrawable();

        if (d != null) {
            // ceil not round - avoid thin vertical gaps along the left/right edges
            int width = View.MeasureSpec.getSize(widthMeasureSpec);
            if (width > (d.getIntrinsicWidth()*MAX_SCALE_FACTOR)) width = d.getIntrinsicWidth()*MAX_SCALE_FACTOR;
            final int height = (int) Math.ceil(width * (float) d.getIntrinsicHeight() / d.getIntrinsicWidth());
            this.setMeasuredDimension(width, height);
        } else {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }
} 
```

# codeigniter - CodeIgniter Active Record 像第三个参数

> ID：13992536
> 
> 赞同：0
> 
> 时间：2012-12-21T15:12:18.783
> 
> 标签：codeigniter, activerecord, sql-like

根据文档，将“none”的第三个参数传递给 like 方法应该消除在 like 搜索查询中使用通配符。

我正在这样做，其中 $search == 'test_username'：

```
$this->db->like('username', $search, 'none');
$this->db->limit(1);
$q = $this->db->get('customers')->row();
var_dump($this->db->last_query());exit; 
```

我希望看到这回响在屏幕上：

```
SELECT * FROM (`ci_customers`) WHERE `username` LIKE 'test_username' LIMIT 1 
```

但我得到了这个：

```
SELECT * FROM (`ci_customers`) WHERE `username` LIKE '%test_username%' LIMIT 1 
```

似乎该方法忽略了第三个参数，或者我做错了什么。有任何想法吗？我可以写出我的查询并使用该`query()`方法，但我很好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:33:26.417

看起来“none”的代码似乎不包含在 2.1.0 版本中。[查看https://github.com/EllisLab/CodeIgniter/blob/v2.1.0/system/database/DB_active_rec.php#L639](https://github.com/EllisLab/CodeIgniter/blob/v2.1.0/system/database/DB_active_rec.php#L639)上的第 649-692 行。

然后查看2.1.3版本的第664行：[https ://github.com/EllisLab/CodeIgniter/blob/2.1.3/system/database/DB_active_rec.php#L639](https://github.com/EllisLab/CodeIgniter/blob/2.1.3/system/database/DB_active_rec.php#L639)

您要么需要升级，要么将其添加到您的`DB_active_rec.php`文件中：

```
...
if ($side == 'none')
{
  $like_statement = $prefix." $k $not LIKE '{$v}'";
}
... 
```

# javascript - 如果我仍然在构建时合并所有文件，我为什么要使用 require.js？

> ID：13992539
> 
> 赞同：16
> 
> 时间：2012-12-21T15:12:25.280
> 
> 标签：javascript, build, requirejs, amd

编写模块化、独立的可测试代码确实很有意义——尤其是对于大型项目。

但是在一个我仍然需要在构建时集中和缩小我的项目的大项目中使用`require.js`/有什么区别？`amd`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T15:42:14.893

我想先说我确实认为 Require.JS 是一个完全没用的框架。它使一个相当简单的概念过于复杂。

话虽如此，在编写与平台无关的代码时，依赖加载非常有用。

例如，假设您想开发一个 Web 应用程序，您还可以将其移植到 Apache Cordova 中以用于移动应用程序和 AppJS 以用于桌面应用程序。您不想重写所有业务逻辑，因此构建一个动态加载依赖项以使软件适应多种架构的引导程序是有意义的。这样你就只有一个产品，它可以在各种平台上运行。在服务器端脚本中添加 NodeJS 的使用，您不仅可以编写前端软件，还可以使用完全相同的代码编写后端。

模块化对跨平台项目有很大帮助，但正如我所说：Require.JS 真的没那么有用。我发现它过于复杂。相反，我只使用一个围绕 jQuery 的 getScript 函数构建的对象，该函数包含所有已加载包的注册表，这样开发人员就不会尝试加载已经加载的包（更大的项目）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:38:59.080

require.js 有很多优点，例如：

*   条件加载
*   异步加载
*   逻辑模块
*   嵌套依赖的抽象
*   多版本支持
*   自动缩小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:48:48.387

Require.js 确实建议在生产中为您的 JavaScript 使用一个（或多个，如果这适合您的项目）JS 文件，因此您所做的对于较小的项目来说很常见。我认为你会使用它的小项目有两个主要原因（@Wolfgang Stengel 列出了所有的好处）。

如果您在 JS 文件中组合 jQuery 或其他库，那可能不是正确的做法。如果您可以使用 CDN 副本，则用户可能已经在他们的计算机上下载了该文件，这将花费更少的时间来加载您的 JavaScript。

另一个好处是异步加载。这将使您的 JavaScript 加载不会阻止您的网页的呈现。对于最终用户来说，出现速度更快的网页通常被认为是一个更快的站点。

# ruby-on-rails-3 - 未定义的局部变量或方法“current_user”

> ID：13992540
> 
> 赞同：3
> 
> 时间：2012-12-21T15:12:38.610
> 
> 标签：ruby-on-rails-3, device, cancan

我得到了

```
undefined local variable or method `current_user` error for 
```

在我看来是由以下代码引起的

```
<% if can? :update, Project %>
  <span class="admin">
    <%= link_to 'Nieuw Project', new_project_path %>
  </span>
<% end %> 
```

当我删除代码时，页面会正确呈现。

康康代码：

```
class Ability
  include CanCan::Ability

  def initialize(user)   
    user ||= User.new

    if user.admin?
      can :manage, Post
      can :manage, Project
      can :manage, Page
      can :manage, Comment
      can :manage, User
    else
      can :read, :all
      cannot :read, User      
      can :create, Comment      
    end
  end
end 
```

用户型号：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :lockable and :timeoutable
  devise :invitable, :database_authenticatable, #:registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation

  def admin?
    self.id
  end
end 
```

我的应用程序的规格

> *   导轨 3.0.3
> *   设计 1.5.3
> *   设计邀请 0.6.0
> *   康康 1.6.4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:26:45.087

也许你正陷入关于康康和设计的这个小细节。[https://github.com/ryanb/cancan/wiki/changeing-defaults](https://github.com/ryanb/cancan/wiki/changing-defaults)
Cancan 期望`current_user`您的控制器中有一个方法。检查这是否存在。

# android - 延迟滑动性能

> ID：13992544
> 
> 赞同：1
> 
> 时间：2012-12-21T15:12:52.853
> 
> 标签：android, cordova, jquery-mobile, knockout.js

我有一个 jQuery Mobile 应用程序，我试图通过 Phonegap 在 Galaxy Tab 设备上运行。一切都按预期工作，但我有一个用于在一组页面之间转换的滑动，它非常滞后。

我实际上正在使用 knockoutJS 和这样的自定义绑定：

```
<!-- ko foreach: factors -->
<div data-role="page" data-bind="attr: { id: id }, swipe: $data"> 
    <!-- some content here that I don't *think* is the problem -->
</div>
<!-- /ko -->

ko.bindingHandlers["swipe"] = {
    init: function (element, valueAccessor) {
        var qe = $(element);
        var val = ko.utils.unwrapObservable(valueAccessor());
        qe.bind("swipeleft", function () {
            var next = qe.next("div[data-role='page'][data-bind*='swipe']");
            if(next.length) {
                $.mobile.changePage(next, {
                    transition: "slide"
                });
            } else {
                qe.effect("shake");
            }
        });
        qe.bind("swiperight", function () {
            var prev = qe.prev("div[data-role='page']");
            if(prev.length) {
                $.mobile.changePage(prev, {
                    transition: "slide",
                    reverse: true
                });
            } else {
                qe.effect("shake");
            }
        });
    } 
```

我尝试从页面中删除几乎所有内容，但没有帮助。我尝试用 and 替换`slide`过渡，`none`这有点帮助，但性能仍然慢得令人无法接受。

有什么技巧或提示可以使这项工作相当顺利吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:17:51.887

这至少给了我一个部分解决方案：

[使用 jQuery Mobile 1.2、PhoneGap 2.1 和 Android 4.0.4 滑动无法正常工作](https://stackoverflow.com/questions/12838443/swipe-with-jquery-mobile-1-2-phonegap-2-1-and-android-4-0-4-not-working-properl)

似乎绑定`vmousemouse`并将其设置为`preventDefault`使滑动效果更好，但同时它会禁用滚动！

# effect - OpenGL ES 1.1 - 水族馆的逼真渲染

> ID：13992545
> 
> 赞同：0
> 
> 时间：2012-12-21T15:12:56.067
> 
> 标签：effect, blending, opengl-es-1.1

我有一些试图模仿水族馆的网格。我可以移动附有灯光的视点或相机。只有正面玻璃是全透明的，应该是屏幕玻璃。

我尝试使用混合器功能`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)`和一些漫反射材质组合，但它看起来总是像 CAD 绘图，尽管一些逼真的纹理可以帮助改善外观，但它看起来并不正确。

`glBlendFunc`我可以通过更改和的所有可能组合来强制获得所需的结果`glMaterialfv`，但这可能需要一段时间。所以我在这里发布了这个问题，看看是否有人完成了这种视觉效果，任何帮助或评论也很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:34:40.357

看起来它缺少任何类型的反射，水和玻璃都会表现出来。水面上的镜面反射项可能是可以的，或者如果您无法添加混合环境贴图。我实际上会稍微降低水的不透明度，以使边界不那么明显，并让镜面反射显示定义。

玻璃本身也应该有某种环境反射，如果你在黑色房间以外的地方渲染它。同样，一个简单而巧妙的环境图可能就足够了。

您可能想尝试的其他事情（请记住，您在 ES1.1 上没有着色器）：

焦散。这些是您在游泳池底部看到的明亮的波浪线，是由表面运动向不同方向散射的光线引起的。您可以使用 alpha 纹理来伪造那些并摇晃顶点。

折射。您可以将水下场景渲染到辅助缓冲区，然后将其用作纹理，允许您对图像进行一定程度的扭曲/动画处理。鱼缸不会表现出太多这种情况，如果从顶部表面看，你真的应该只看到它在晃动，但也许它会很有趣。

# php - 比较两个图像，一个在 SQL DB 中，另一个在本地

> ID：13992549
> 
> 赞同：0
> 
> 时间：2012-12-21T15:13:06.247
> 
> 标签：php, image, sql-server-2005

我正在连接到客户端数据库，在这个数据库中是以图像格式（sql2005）存储的图像列表，每当客户端更新图像时，我需要更新存储在他们网站上的图像（LAMP）

有没有最好的方法呢？数据库上没有更新日期字段，我也无法更改它，我的理论是进行 md5 检查并比较结果，但我怀疑这会奏效。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:17:25.203

据我了解，您需要将图像从 SQL 数据库传输到 Web 服务器或您从何处提供图像。

如果您没有任何图像更改时间的标志。您将不得不检查所有图像。比较哈希应该就足够了。这应该通过在间隔 (cron) 上运行的脚本来完成。如果您有大量图像要检查，您可能需要使用某种作业队列并在多台机器上运行工作程序。

# c# - 表单的 MinimumSize 未正确更新

> ID：13992557
> 
> 赞同：0
> 
> 时间：2012-12-21T15:13:44.097
> 
> 标签：c#, .net, winforms, forms, size

我有一个布局控件的表单，它分为左、中、右三部分。默认情况下，右侧的布局控件项（有几个网格）是隐藏的。表单中有一个按钮，可将表单向右展开以显示两个网格。当您再次单击该按钮时，它会隐藏右侧的布局控件项并再次更改表单的大小。基本功能运行良好，但我还想在用户按下按钮时更新 MinimumSize（因此在展开表单时，应该增加最小宽度）。这是我当前的代码：

```
private void btnExpand_Click(object sender, EventArgs e)
    {
        this.SuspendLayout( );
        switch (lciRight.Visibility)
        {
            case LayoutVisibility.Never:
                LoadGrids();
                lciRight.Visibility = LayoutVisibility.Always;
                this.Width += lciRight.Width;
                this.MinimumSize = new Size(this.Width, this.MinimumSize.Height);
                btnExpand.Text = "<<";
                break;
            case LayoutVisibility.Always:
                lciRight.Visibility = LayoutVisibility.Never;
                this.MinimumSize = new Size(689, this.MinimumSize.Height);
                this.Width -= lciRight.Width;
                btnExpand.Text = ">>";
                break;
            default:
                break;
        }
        this.ResumeLayout();
    } 
```

我遇到的问题是，当表单已经展开并且我们单击按钮使其再次变为原始大小时，

> this.MinimumSize = new Size(689, this.MinimumSize.Height);

行没有正确更新 MinimumSize。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:45:03.037

这是一个非常简单的功能。

请考虑在执行以下行后检查此属性（以及与布局相关的任何其他内容）的更改：

```
 this.ResumeLayout(); 
```

原因是 -`SuspendLayout()`暂停对控件布局的所有更改以提高应用程序的性能。

如果属性仍然没有改变，你很可能会在其他地方覆盖它（将宽度设置为 1100）

# php - 是否可以直接在页面上写评论？

> ID：13992566
> 
> 赞同：0
> 
> 时间：2012-12-21T15:14:47.627
> 
> 标签：php, jquery, comments

我找到了一些用于创建评论系统的 php - jQuery 代码。
因此，评论存储在数据库中，每次加载页面时都必须读取该数据库。

```
while($row = mysql_fetch_assoc($result))
{
    $comments[] = new Comment($row);
}

foreach($comments as $c){
    echo $c->markup();
} 
```

是否可以将评论不写入数据库，而是直接写入页面，从而成为页面的集成部分？

我可以使用 jQuery .insert() 函数插入评论并且评论就在那里，但是在刷新时，当然 - 它丢失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:19:09.897

> 是否可以将评论不写入数据库，而是直接写入页面...

是的。您可以简单地使用`echo`PHP 或 JavaScript 输出。但是正如您已经指出的那样，数据将在*refresh*时丢失。

如果您希望它在刷新之间*持续存在*，您将需要使用持久存储 - 数据库、平面文件、缓存。

根据您的用例，会话或 cookie 也是选项。虽然没有那么*执着*。

确保您了解[客户端和服务器端技术](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)之间的区别。

# sunos - 在 SunOS 帐户中获取我想要的 Java 版本

> ID：13992573
> 
> 赞同：-1
> 
> 时间：2012-12-21T15:15:40.747
> 
> 标签：sunos, .profile

我在 Unix 服务器上有一个帐户。当我在 BASH 中时，我无法让它指向我想要的 Java 版本。

Unix的版本是：

```
SunOS 5.10 Generic January 2005 
```

这就是我的 .profile 中的内容：

```
#====================================================================
#   set the environment
#====================================================================

ANT_HOME=/apps1/apache-ant-1.8.4
export ANT_HOME

#  $PATH:/user1/acme21 needs to be included to make anything work
PATH=.:/usr/jdk/instances/jdk1.6.0_24:$ANT_HOME/bin:$PATH:/user1/acme21
export PATH

JAVA_HOME=/usr/jdk/instances/jdk1.6.0_24
export JAVA_HOME

CLASSPATH=.:/user1/sterus01/TestProgramsLib/mail.jar:/user1/sterus01/TestProgramsLib/activation.jar:/user1/sterus01/TestProgramsLib/log4j-1.2.16.jar:/user1/sterus01/TestProgramsLib/mail.jar:ojdbc14.jar
export CLASSPATH

env | grep DIS

# Use the bash shell, get many conveniences
bash 
```

当我运行 echo $JAVA_HOME 和 echo $PATH 我得到

```
bash-3.00$ echo $JAVA_HOME
/usr/jdk/instances/jdk1.6.0_24
bash-3.00$ 
```

和

```
bash-3.00$ echo $PATH
.:/usr/jdk/instances/jdk1.6.0_24:/apps1/apache-ant-1.8.4/bin:/usr/bin:/usr/local/bin:/usr/ccs/bin:/usr/bin:/usr/sbin:/etc:/usr/ucb:/usr/local/sudo:/usr/local/sbin:/user1/acme21
bash-3.00$ 
```

然而“which javac”揭示了：

```
bash-3.00$ which javac
/usr/bin/javac
bash-3.00$ 
```

和“哪个java”显示：

```
bash-3.00$ which java
/usr/bin/java
bash-3.00$ 
```

有什么办法可以让它指向我在 .profile 文件中指定的 Java 版本吗？

提前谢谢史蒂夫节日快乐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:19:25.033

你确定你的`java`和`javac`可执行文件在`/usr/jdk/instances/jdk1.6.0_24`吗？也许他们在`/usr/jdk/instances/jdk1.6.0_24/bin/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:18:51.637

我怀疑这一点：

```
PATH=.:/usr/jdk/instances/jdk1.6.0_24 
```

是不对的，你需要

```
PATH=.:/usr/jdk/instances/jdk1.6.0_24/bin 
```

获取该 Java 安装中*的*二进制目录。

ps 我不会将当前目录 (.) 放在您的`PATH`. 否则，有人可以替换目录中的类似特洛伊木马的程序（例如，替代`ls`）。当您 cd 进入包含目录并输入时，您会选择它（在**Unix Power Tools**书中`ls`有一个与此相关的有趣故事）

# asp.net-mvc - ASP.NET MVC3 EditorTemplates 和 Name 属性

> ID：13992578
> 
> 赞同：2
> 
> 时间：2012-12-21T15:15:50.150
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, jquery-validate, mvc-editor-templates

我在我的代码中使用编辑器模板，我注意到很多控件都根据 index.html 获取 name 属性集。

```
@Html.EditorFor(x => x.Emails) 
```

Answers 是 EmailViewModel 对象的集合

对于每个项目，呈现的是这样的：

```
<input data-val="true" data-val-number="The field must be a number." 
      data-val-required="The Email field is required." 
      id="Emails_0__EmailId" name="Emails[0].EmailId" value="1"> 
```

我试图这样设置名称属性：

```
@Html.TextBoxFor(x => x.EmailId, new { @name = "EmailAdress" }) 
```

但这没有任何效果！

我需要做什么才能使名称值生效。这样做的主要原因是出于验证目的。在我的验证规则中，我有以下内容：

```
$("#someForm").validate({
        rules: {
            EmailAddress: {
                required: true,
                email: true
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:28:42.937

尝试

```
@Html.EditorFor(x => x.Emails, "string", "EmailAddress") //or EmailAdress 
```

[MSDN参考](http://msdn.microsoft.com/en-us/library/ee407399%28v=vs.108%29.aspx)有以下，你有兴趣的`htmlFieldName`

```
public static MvcHtmlString EditorFor<TModel, TValue>(
    this HtmlHelper<TModel> html,
    Expression<Func<TModel, TValue>> expression,
    string templateName,
    string htmlFieldName
) 
```

*一个字符串，用于消除为具有相同名称的属性呈现的 HTML 输入元素的名称。*

要编辑前缀，您可以在控制器中设置它

```
ViewData.TemplateInfo.HtmlFieldPrefix 
```

或者在你看来

```
@Html.ViewContext.ViewData.TemplateInfo.HtmlFieldPrefix = "Foo" 
```

当然，您可以编写自己的助手，在您使用它的任何地方执行此操作。

# windows-8 - 如何从 Windows 8 javascript 应用程序中以编程方式导航到开始屏幕？

> ID：13992579
> 
> 赞同：1
> 
> 时间：2012-12-21T15:15:51.797
> 
> 标签：windows-8, winjs

我正在开发一个应用程序，允许用户对 Windows 8 开始屏幕上的磁贴进行某些更改。在应用程序中进行更改后，将向用户显示“查看我的更改”按钮。单击该按钮应将用户带回开始屏幕。

我研究了以编程方式关闭/暂停应用程序的不同方法（从而将用户带到开始屏幕），但我还没有找到使用 WinJS 实现此目的的方法。抛出异常会关闭应用程序，但这似乎是一个非常肮脏的解决方法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:56:09.163

我假设您正在创建辅助磁贴并希望向用户展示它们的外观？@mydogisbox 是正确的，因为这种功能可能已被故意排除在外。

我建议只对用户可能对辅助磁贴所做的任何更改进行应用内“查看更改”。总的来说，我认为这将是更好的用户体验，因为您将保持用户参与您的应用程序，而不是从本质上将他们踢出体验。

# java - 显示标签库出现错误“您必须指定以下之一：大小”

> ID：13992587
> 
> 赞同：2
> 
> 时间：2012-12-21T15:16:32.673
> 
> 标签：java, displaytag

在外部排序/分页模式下使用显示标签时，您必须指定大小参数。我已经这样做了，但是我收到了上述错误。

执行此操作的说明在这里： [http ://www.displaytag.org/1.2/tut_externalSortAndPage.html](http://www.displaytag.org/1.2/tut_externalSortAndPage.html)

很多其他人也有这个问题，我还没有看到一个好的解决方案。通常，解决方案是使用 scriptlet 传递参数。我宁愿使用表达式来做到这一点。

这是我的代码：

```
 <display:table name="hitlistModel.hitResults" id="hitItem" class="HitlistResults" defaultorder="ascending" 
            sort="external" size="${hitlistModel.totalCountRecords}" partialList="true" pagesize="${hitlistModel.pageSize}" cellspacing="1" cellpadding="0" 
            requestURI="Hitlist.htm" defaultsort="2" export="true"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:19:51.557

解决方案非常简单。移除参数值周围的表达式限定符符号 ${}。

结果是这样的：

```
 <display:table name="hitlistModel.hitResults" id="hitItem" class="HitlistResults" defaultorder="ascending" 
            sort="external" size="hitlistModel.totalCountRecords" partialList="true" pagesize="${hitlistModel.pageSize}" cellspacing="1" cellpadding="0" 
            requestURI="Hitlist.htm" defaultsort="2" export="true"> 
```

出于某种原因，此参数需要标记库稍后将评估以找出值的表达式文本。

文档是正确的。这只是你没有注意到的事情之一。

# android - 通过 Facebook 分享 - 选择列表中缺失 - Android

> ID：13992592
> 
> 赞同：1
> 
> 时间：2012-12-21T15:16:43.537
> 
> 标签：android, facebook

我在我的应用程序中编写了以下代码，以向用户显示“共享”选项。

我可以看到“电子邮件”、“Gmail”和“Youtube”，但我看不到“Facebook”:(

```
try {

                Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,  mEvent.getName());  
                emailIntent.setType("plain/text");  
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, txtDesc.getText());
                startActivity(Intent.createChooser(emailIntent, "Send your email in:")); 

            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                    "Email faild, please try again later!",
                    Toast.LENGTH_LONG).show();
                e.printStackTrace();
            } 
```

如何添加“facebook”选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:45:38.787

纯文本的正确 MIME 类型是`text/plain`，不是`plain/text`。试试看。

# php - 仅在前 3 个字符中执行替换

> ID：13992594
> 
> 赞同：1
> 
> 时间：2012-12-21T15:16:47.220
> 
> 标签：php

在 php 中，如何仅在字符串的前 3 个字符中执行替换？

所以：

```
$str = /pr/printers

Replace 'pr' with 'or'. So its -> /or/printers. 
```

发生在我身上的是，打印机中的 pr 也被替换了。所以我以/或/orinters结束。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:23:04.900

只有我还是大多数答案都无法解决真正的问题？如果字符串的其余部分得到匹配怎么办。他只希望前 3 个角色在场。我想我看到一个 preg 评论提到使用`^`它也是有道理的。

```
$originalStr = '/pr/printers';
$prefix = substr($originalStr, 0, 3);
$newStr = str_replace("/pr","/or", $prefix) . substr($originalStr, 3);
echo $newStr; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:18:41.353

使用`str_replace()`：

```
$str = '/pr/printers';
$str = str_replace("/pr/","/or/",$str);
echo $str; 
```

使用`preg_replace()`（第 4 个参数是我设置为 1 的限制）”

```
$str = '/pr/printers';
$str = preg_replace("/pr/","or",$str,1);
echo $str; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:21:59.400

```
$str = '/pr/printers';

$newStr = str_replace('pr', 'or', mb_substr($str, 0, 3)) . mb_substr($str, 3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:18:37.317

$new = str_replace('/pr/', '/or/', '/pr/printers');

你也可以像这样使用正则表达式： [http ://www.laprbass.com/RAY_temp_norman.php](http://www.laprbass.com/RAY_temp_norman.php)

```
<?php // RAY_temp_norman.php
error_reporting(E_ALL);

$rgx 
= '#'    // REGEX  DELIMITER
. '^'    // START OF STRING
. '/pr'  // PATTERN TO MATCH
. '#'    // REGEX DELIMITER
. 'i'    // OPTIONAL- CASE-INSENSITIVE
;

$str = '/pr/printers';
$rep = '/or';

$new = preg_replace($rgx, $rep, $str);
var_dump($new); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T15:21:28.340

看看使用正则表达式，这是一种可怕的野兽，但如果你要进行更一般的文本操作，一旦掌握了它就非常强大：

[http://webcheatsheet.com/php/regular_expressions.php](http://webcheatsheet.com/php/regular_expressions.php)

# javascript - 使用 javascript 数组

> ID：13992595
> 
> 赞同：-4
> 
> 时间：2012-12-21T15:16:48.690
> 
> 标签：javascript, arrays, printing

我对这段代码做错了什么，我无法让它打印出任何团队的名称。我希望它输出第一队或第二队等的名称。但没有任何效果。有什么帮助吗？

```
 var seeds = [
        { "id" : 1, "name" : "Team 1" }
        { "id" : 2, "name" : "Team 2" }
        { "id" : 3, "name" : "Team 3" }
        { "id" : 4, "name" : "Team 4" }
        { "id" : 5, "name" : "Team 5" }
        { "id" : 6, "name" : "Team 6" }
        { "id" : 7, "name" : "Team 7" }
        { "id" : 8, "name" : "Team 8" }
    ]
    document.write(seeds[0].name); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T15:18:06.350

你忘记了逗号：

```
var seeds = [
    { "id" : 1, "name" : "Team 1" },
    { "id" : 2, "name" : "Team 2" },
    { "id" : 3, "name" : "Team 3" },
    { "id" : 4, "name" : "Team 4" },
    { "id" : 5, "name" : "Team 5" },
    { "id" : 6, "name" : "Team 6" },
    { "id" : 7, "name" : "Team 7" },
    { "id" : 8, "name" : "Team 8" }
]; 
```

`seeds`是一个`Array`，你必须用逗号分隔元素，如下所示：

```
var s = [{},{},{},{}]; 
```

请注意，最后一个元素后没有逗号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:18:15.123

每个对象之间应该有一个逗号

```
var seeds = [
    { "id" : 1, "name" : "Team 1" },
    { "id" : 2, "name" : "Team 2" },
    { "id" : 3, "name" : "Team 3" },
    { "id" : 4, "name" : "Team 4" },
    { "id" : 5, "name" : "Team 5" },
    { "id" : 6, "name" : "Team 6" },
    { "id" : 7, "name" : "Team 7" },
    { "id" : 8, "name" : "Team 8" }
]
document.write(seeds[0].name); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:18:15.317

您缺少`,`数组中的

```
var seeds = [
    { "id" : 1, "name" : "Team 1" },
    { "id" : 2, "name" : "Team 2" },
    { "id" : 3, "name" : "Team 3" },
    { "id" : 4, "name" : "Team 4" },
    { "id" : 5, "name" : "Team 5" },
    { "id" : 6, "name" : "Team 6" },
    { "id" : 7, "name" : "Team 7" },
    { "id" : 8, "name" : "Team 8" }
]
document.write(seeds[0].name); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T15:18:45.053

在元素之间放置逗号：

```
var seeds = [
    { "id" : 1, "name" : "Team 1" },
    { "id" : 2, "name" : "Team 2" },
    { "id" : 3, "name" : "Team 3" },
    { "id" : 4, "name" : "Team 4" },
    { "id" : 5, "name" : "Team 5" },
    { "id" : 6, "name" : "Team 6" },
    { "id" : 7, "name" : "Team 7" },
    { "id" : 8, "name" : "Team 8" }
]
document.write(seeds[0].name); 
```

# php - 从mysql的两个表中检索数据

> ID：13992602
> 
> 赞同：2
> 
> 时间：2012-12-21T15:17:16.847
> 
> 标签：php, mysql, database, forms

我有两张桌子

表格1

```
 HTNO          SUBJECTCODE          INTERNALS          EXTERNALS            TOTAL
   1               s1                   20                  58                 78
   1               s2                   15                  20                 35
   1               s3                   10                  60                 70 
   2               s1                   10                  20                 30
   2               s2                   12                  30                 42
   2               s3                   15                  55                 70
   .
   .
   .
   so on up to N 
```

表 2

```
 SUBJECTCODE             SUBJECT NAME
       s1                    MATHS
       s2                   SCIENCE
       s3                    SOCIAL 
```

我会给学生一张表格，让他们输入 Hallticket 号码

如果学生在表格中输入 1，那么结果应该是

```
 Subjectcode        SubjectName        Internals       Externals        Total
       s1                Maths              20              58              78
       s2               Science             15              20              35
       s3                Social             10              60              70 
```

以上应该是输出

但是在这里我无法从结果中的 Table2 中检索 SubjectName

这是我正在使用的代码

```
 <?PHP
    $userInputEntities = htmlentities($userInput);
    echo $userInputEntities;

    $username = "admin";
    $password = "123456";
    $database = "test";
    $server = "localhost";
    $db = new PDO ("mysql:host=$server;dbname=$database", "$username", "$password");

    if ($db) {
    $id = $_GET['id'];
    $SQL = $db->prepare("SELECT * FROM Table1 WHERE htno = :id");
    $SQL -> execute(array(':id'=>$id));
    $n = $SQL->rowCount();
    echo "
    <center><table class='dynamic styled with-prev-next' data-table-tools='{'display':true}' align=center>
    <thead>
    <tr>
    <TH class='table-header dark' scope='col'>SUBJECT CODE</TH>
    <TH class='table-header dark' scope='col'>SUBJECT NAME</TH>
    <TH class='table-header dark' scope='col'>INTERNALS</TH>
    <TH class='table-header dark' scope='col'>EXTERNALS</TH>
    <TH class='table-header dark' scope='col'>TOTAL</TH>

    </tr></thead><center>";          

    while ($db_field = $SQL->fetch(PDO::FETCH_ASSOC)) {

    echo "<tr><tbody>";
    echo "<td align=center>" . $db_field['SubjectCode'] . "</td>";

     echo "<td align=center>" . $db_field['Internals'] . "</td>";
   echo "<td align=center>" . $db_field['Externals'] . "</td>";
   echo "<td align=center>" . $db_field['Total'] . "</td>";

   echo "</tbody></tr>";

   } 
```

使用此代码，我无法获取学生的特定主题代码的主题名称实际上我没有编写任何代码来从 Table2 中检索主题名称，我不知道如何编写它

请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:22:37.793

试试这个：

```
$SQL = $db->prepare(
 "SELECT T2.Subjectcode, T2.SubjectName, T1.Internals, T1.Externals, T1.Total FROM Table1 as T1
      JOIN Table2 as T2
         ON T1.SUBJECTCODE = T2.SUBJECTCODE
   WHERE T1.HTNO = :id"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:22:34.447

您需要在查询中加入。

[MySQL 文档：加入](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:26:38.837

看起来您需要一个 SQL 语句来检索您想要的结果集：

```
SELECT t1.SubjectCode
     , t2.SubjectName
     , t1.Internals
     , t1.Externals
     , t1.Total
  FROM Table1 t1
  JOIN Table2 t2
    ON t2.SubjectCode = t1.SubjectCode
 WHERE t1.htno = :id 
```

* * *

要以可预测的顺序返回行，您可以`ORDER BY`在查询文本中包含一个子句，在`WHERE`子句之后：

```
ORDER
   BY t1.htno
    , t1.SubjectCode 
```

**问：“之前结果更快，但现在显示结果需要很长时间 - 如果你知道原因，你能告诉我吗？”**

**答：**不，我没有足够的信息来确定新语句执行缓慢的确切原因。但我可以给你一些可能的可能性。

（但我必须告诉你，我很犹豫要不要回答你的问题，因为你已经“选择”了你的问题的答案。）

性能缓慢的最可能解释是您没有在表上定义适当的索引。最有可能的候选索引（为了您的查询的最佳性能）将是：

```
... Table2_IX1 ON Table2 (SubjectCode, SubjectName) 
```

和

```
... Table1_IX1 ON Table1 (htno, SubjectCode, Internals, Externals, Total) 
```

在`Table`上，您至少需要一个前导列为 的索引`htno`，因为您的查询包含一个相等谓词（即`WHERE htno = 'literal constant'`.

并且将同一索引中的下一列设置为 将是有益的`SubjectCode`，特别是如果您在查询中指定`ORDER BY t1.SubjectCode`（或`ORDER BY t1.htno, t1.SubjectCode`），因为 MySQL 可以使用该索引，并绕过否则需要的“文件排序”操作。

如果您还包括查询引用的所有其他列`Table1`，那么您将拥有一个“覆盖”索引。这意味着 MySQL 可以直接从索引页面获取所有需要的数据，而无需访问底层表的页面。

在`Table2`上，您至少需要一个具有`SubjectCode. That will allow MySQL to use that index to satisfy the join predicate. If that same index also includes the`SubjectName` 列前导列的索引，那么该索引也将是您查询的“覆盖”索引，并且 MySQL 可以完全从索引中满足查询，而无需访问基础表中的任何页面。

要真正评估哪些索引将提供最佳性能，您需要`EXPLAIN`查询并查看访问路径。`Extra`当EXPLAIN 输出中的列显示“使用索引”时，可能会获得此查询的最佳性能。

# python - cursor.copy_from 在 postgres 中失败

> ID：13992612
> 
> 赞同：1
> 
> 时间：2012-12-21T15:18:03.083
> 
> 标签：python, postgresql, cursor, psycopg2, sqlbulkcopy

我在将数据从一个数据库处理到另一个数据库时遇到问题，这里是 python 代码。

```
import psycopg2

db = psycopg2.connect("dbname='db' user='xx' password='xx' host='127.0.0.2'")
st = db.cursor();

db_l = psycopg2.connect("dbname='xx' user='xx' password='xx' host='127.0.0.1'")
st_l = db_l.cursor();

q = "create table tarf as select i_rate, i_tariff As id, prefix, price_1, price_n, interval_1, interval_n, '00:00' AS start_time, '23:59:59' AS end_time, activation_dat
e, '3049-1-1 00:00' as exp  from rates JOIN tariffs USING (i_tariff) JOIN billing_plans USING(i_tariff) JOIN accounts using (i_billing_plan)"

st_l.execute(q)

f = open('tariff.sql','w')
st_l.copy_to(f,'tarf',sep=',')

st.copy_from(f,'tariff',sep=',') 
```

这是面临的一个错误：

```
Traceback (most recent call last):
  File "sync_tariff.py", line 23, in <module>
    st.copy_from(f,'tariff',sep=',')
psycopg2.extensions.QueryCanceledError: COPY from stdin failed: error in .read() call
CONTEXT:  COPY tariff, line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:28:37.847

关闭文件，然后打开读取

```
f = open('tariff.sql', 'w')
st_l.copy_to(f, 'tarf', sep=',')

f.close()

f = open('tariff.sql', 'r')
st.copy_from(f, 'tariff', sep=',') 
```

# delphi - 为什么我调用 ReallocMemory 后程序会崩溃？

> ID：13992613
> 
> 赞同：1
> 
> 时间：2012-12-21T15:18:05.410
> 
> 标签：delphi, pointers, memory-management, delphi-7, virtualtreeview

我正在尝试修改 VirtualTreeView 以在设计模式下查看树节点中的数据。

分配节点内存在私有静态方法中，所以我对此无能为力。我正在尝试重新分配内存以匹配新的大小。

出于测试目的，我正在尝试重新分配相同数量的内存：

```
ReallocMemory(Node, sizeof(Node^)) 
```

但是 IDE 在抛出大量 AV 的随机迭代中挂起。由于我对内存分配的了解非常缺乏，我想我忘记了一些东西。你能指点我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:27:30.690

`ReallocMemory`是一个*函数*。它*返回*新的指针值；它不修改它的论点。您想改为调用`ReallocMem`，或者使用函数的结果：

```
ReallocMem(Node, SizeOf(Node^)); 
```

或者

```
Node := ReallocMemory(Node, SizeOf(Node^)); 
```

当这些函数中的任何一个无法就地调整内存块的大小时，它会分配新内存，将旧内容复制到新缓冲区中，然后释放原始缓冲区。如果您忽略`ReallocMemory`结果，那么您已经丢弃了新指针并在`Node`变量中保留了旧的、陈旧的指针。继续使用过时的指针将解释访问冲突和其他不可预测的行为。

* * *

这些函数有两个版本以实现 C++ 兼容性。C++ 没有 Delphi 的“编译器魔法”，它允许编译器拥有一个`ReallocMem`接受和修改*任何*指针类型的函数。

该`ReallocMemory`函数*看起来*像 C++`realloc`函数，但它们的行为方式并不完全相同，这就是为什么用函数的返回值直接覆盖输入变量是安全的。当重新分配失败时，该函数会抛出一个异常，就像`ReallocMem`，其中 as`realloc`只是返回一个空指针。

# python - 递归查找列表中的最小数字。

> ID：13992619
> 
> 赞同：-4
> 
> 时间：2012-12-21T15:18:25.437
> 
> 标签：python, function, recursion

我为我的递归函数作业写了一些代码。我想在列表中找到最小的数字。为什么这段代码不起作用？例如，当我输入 2,-99 和 110 时，程序返回 -99，但当我输入 2,5,-9 时，它返回 2。我不明白问题出在哪里。

```
def rcompare(numList):
    end=len(numList)-1
    if(end==-1):
        return 0
    else:
        if (end!=-1):
            swapped=-1
            for i in range(0,end):
                if (numList[i]>numList[i+1]):
                    numList[i],numList[i+1]=numList[i+1],numList[i]
                    swapped=i
            end=swapped
            return numList[0]
numList=input("Please enter some numbers seperated by comma: ").split(",")
numList=[int(i) for i in numList]
print(rcompare(numList))
input() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:21:15.053

Firstly, the function isn't recursive.

The main reason it doesn't work correctly is that it always returns the smaller of `numList[0]` and `numList[1]` (when you think about it, only the first iteration of your loop can affect the overall outcome).

If the smallest value is located further down the list, your function will never return it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:35:47.837

这就是我将如何做到的。

```
def lowest(l, low=None):

    if low == None:
        low = l[0]

    if l:
        if l[0] < low:
            low = l[0]
        del l[0]
        return lowest(l, low=low)
    else:
        return low

print lowest([2,-99,110])
print lowest([2,5,-9]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:41:37.120

johnthexiii 有正确的代码。你失败的原因是因为你的代码将当前项目与下一个项目进行比较，如果下一个项目较小，则交换它们。这并不能保证最小的项目在列表中是第一位的。当您的代码完成 [2,5,-9] 时，最终列表是：[2,-9,5]。因此，如果最小值为 numList[2] 或更高，则盲目依赖 numList[0] 会失败。

如果你真的只想返回 numList[0]，那么你需要一个更像是的循环：

```
for i in range(0,end):
    if (numList[0]>numList[i]):
        numList[0],numList[i]=numList[i],numList[0]
        swapped=i
    end=swapped
    return numList[0] 
```

# ant - 蚂蚁呼唤另一只蚂蚁

> ID：13992622
> 
> 赞同：1
> 
> 时间：2012-12-21T15:18:35.077
> 
> 标签：ant

当我尝试调用另一个 ant 构建文件并将其结果复制到目录时遇到问题：

```
<!-- Copying PatientStation -->

<ant dir="../SubProject" antfile="build.xml" />

<copy todir="D:/Export">
    <fileset dir="../SubProject/${fullVersionName}/jar" />
</copy> 
```

在 ant 调用之后，我没有定位在远程目录而不是当前目录中。

```
BUILD FAILED
D:\myWorkspace\Build\build1.xml:64: D:\myWorkspace\SubProject\D:\Export does not exist. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:27:27.093

我面前没有 PC，所以我不能肯定地说什么会起作用，但通常在 Ant 中，如果目录不以斜杠开头，则假定它是当前的子目录`${basedir}`.

尝试以下方法之一：

```
<!-- You're in the "D" drive, so don't specify the drive letter -->
<!-- This specifies the current drive you're on -->
<copy todir="/Export"/> 
```

或者

```
<!-- If that doesn't work, try this -->
<!-- Windows uses backslash as separators -->
<copy todir="D:\\Export"/> 
```

或者

```
<!-- Add a slash in front of the drive letter -->
<copy todir="/D:/Export"/> 
```

其中之一将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-09T09:24:45.950

您可以通过在变量中设置目标文件夹位置来做到这一点。

试试这个：

```
 <property name="tgtpath" location="D:/Export" />
    <copy todir="${tgtpath}">
        <fileset dir="../SubProject/${fullVersionName}/jar" />
    </copy> 
```

# quickbooks - 从 QuickBooks SDK 获取 DataExtRet

> ID：13992628
> 
> 赞同：1
> 
> 时间：2012-12-21T15:18:42.223
> 
> 标签：quickbooks

我正在使用 QuickBooks SDK 执行发票查询，并且我还想在项目级别拉回自定义字段。我发送的请求是：

```
<?xml version="1.0" ?>
<?qbxml version="8.0"?>
<QBXML>
  <QBXMLMsgsRq onError="stopOnError">
    <InvoiceQueryRq>
      <RefNumber>8</RefNumber>
      <IncludeLineItems>true</IncludeLineItems>
      <OwnerID>0</OwnerID>
    </InvoiceQueryRq>
  </QBXMLMsgsRq>
</QBXML> 
```

我得到了成功的响应，但是，我的自定义字段信息中没有任何`<DataExtRet>`元素。如果我对`<OwnerID>`元素进行项目查询，我可以获得这些数据，但是，根据 IDN，我也应该能够在发票查询中获得这些自定义字段。我正在使用 SDK Tester Plus 3 测试我的查询。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:49:46.673

正在使用的模板不包含我正在寻找的“序列号”UDF。将此添加到发票模板，然后调用 InvoicequeryRq 拉回我正在寻找的信息。

# xml - RichEditableText - 此处不允许混合内容

> ID：13992630
> 
> 赞同：1
> 
> 时间：2012-12-21T15:18:45.207
> 
> 标签：xml, flex4

我正在开发一个最近从 Flex 3 升级到 Flex 4 的 Flex 应用程序。我想使用 spark RichEditableText 组件来显示一些嵌入了超链接的文本，但我遇到了问题。我在这里遵循示例：http: [//help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7ff3.html](http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7ff3.html)

这是我的组件的简化版本，但仍有错误

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
           xmlns:skins="skins.*"
           xmlns:annotations="annotations.*" xmlns:s="library://ns.adobe.com/flex/spark">

    <s:VGroup top="5" left="5">
        <s:RichEditableText id="richTxt" 
                            editable="false" 
                            focusEnabled="false">
            <s:textFlow>
                <s:TextFlow>
                    <s:p>
                        The following link takes you to: <s:a href="http://www.adobe.com">Adobe.com</s:a>
                    </s:p>
                </s:TextFlow>
            </s:textFlow>
        </s:RichEditableText>
    </s:VGroup>
</mx:Canvas> 
```

我的问题是，对于 TextFlow 元素内的每个标签，FlexBuilder 都会给我一个错误“此处不允许混合内容”。如果我删除 TextFlow 元素内的标签，只留下纯文本，事情似乎可以正常工作。谷歌没有提供任何关于我为什么会收到此错误的见解。我正在使用 Flex 4.6 SDK。知道为什么我会收到这个错误以及我能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:08:29.553

我回到这个问题并想出了答案。我使用了错误的 mx 命名空间。由于我正在处理的应用程序已升级到 Flex 4，因此大多数组件仍在使用旧的 2006 mx 命名空间。看来，为了使用 RichEditableText 组件，我需要切换到新的 mx 命名空间。所以，我删除了旧的 mx 命名空间，并用这些替换它：

```
 xmlns:mx="library://ns.adobe.com/flex/mx"
 xmlns:fx="http://ns.adobe.com/mxml/2009" 
```

# .net - 包装 ItemsControls 的内容

> ID：13992633
> 
> 赞同：2
> 
> 时间：2012-12-21T15:18:51.887
> 
> 标签：.net, wpf, xaml, itemscontrol

我正在使用两个不同的 ItemsControl 来生成按钮列表。

```
<WrapPanel Orientation="Horizontal">
    <ItemsControl ItemsSource="{Binding Commands}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Command="{Binding}">
                <!-- ... -->
                </Button>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>

    <ItemsControl ItemsSource="{Binding CurrentTransaction.Modifiers}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <ToggleButton IsChecked="{Binding IsEnabled}">
                <!-- ... -->   
                </ToggleButton>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</WrapPanel> 
```

第二个 ItemsControl 的按钮出现在新的“行”上

![在此处输入图像描述](../Images/579bf6d4513950ca6bd28f5b13896201.png)

是否有可能第二个 ItemsControl 的按钮直接出现在第一个 ItemsControl 的按钮之后？按钮的数量可能会有所不同。它应该如下所示：

![在此处输入图像描述](../Images/9f96040cf0881bff667526eabcdfb6c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:02:02.213

您可以将两个项目集合合并为一个，并且只有一个 ItemsControl 和一个[ItemTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx)，它为每个项目返回适当的 DataTemplate。

# c# - 可枚举与列表

> ID：13992644
> 
> 赞同：1
> 
> 时间：2012-12-21T15:19:14.250
> 
> 标签：c#, .net, ienumerable

据说IEnumerable用于自定义集合。用途之一是用于遍历自定义集合的 foreach 循环。

但是我的问题是，与其制作一个首先实现`IEnumerable`然后构造另一个类来实现`IEnumerator`来存储一组自定义对象的自定义集合，为什么我们不能只使用`list<your_customer_object>`.

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:22:31.757

因为您可能想要实现不同的数据结构。`IEnumerable`抽象了序列的概念，而 a`List`有索引的概念，添加/删除项目及其自己的数据结构。

作为不同结构的示例，这是一个允许您进入无限`foreach`循环的类。

```
public class InfiniteSequence : IEnumerable<int>
{
    public IEnumerator<int> GetEnumerator()
    {
        return new InfiniteEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    class InfiniteEnumerator : IEnumerator<int>
    {
        public void Dispose()
        {
            throw new NotImplementedException();
        }

        public bool MoveNext()
        {
            Current++;
            return true;
        }

        public void Reset()
        {
            Current = 0;
        }

        public int Current { get; private set; }

        object IEnumerator.Current
        {
            get { return Current; }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:21:57.380

当然你可以使用`List<T>`.

如果`List<T>`符合您的需要，请使用它并且不要创建继承自`IEnumerable<T>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:23:31.460

您将提供自己的`IEnumerable<T>`何时`List<T>`不适合您的需求的实现。典型的例子是当你想支持你的集合的惰性求值时，可能使用一个使用`yield return`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T15:33:22.517

正如@ken2k 所说，您可以`List<T>`使用您的 T 类型获得 List 的通用版本。但是如果你想隐藏这个实现并自定义一些`List<T>`包含新特性的操作，你可以从 List 继承并实现你自己的方法。样品：

```
public class CustomerCollection : List<Customer> // at this time, you have all methods from List such as Add, Remove, [index] etc...
{
   public double AverageAge()
   {
       return this.Average(customer => customer.Age)
   }

   // other methods...
} 
```

`IEnumeralbe`是 .Net Framework 中最抽象的集合，你可以在这个抽象中进行交互。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T15:22:12.577

您可以只使用`List<T>`或任何其他通用集合类型。毕竟`List<T>`器物`IEnumerable<T>`。

您是否有需要定制系列的特定边缘案例？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T15:22:24.743

当然，您可以将您的成员定义为`List<T>`，但这会将您的类的客户绑定到特定的实现。如果您将成员定义为`IEnumerable<T>`（假设消费者只想枚举您的集合），那么您可以将实现更改为实现接口而不违反合同的不同集合类型。如果您将其更改`List<T>`为`SortedSet<T>`执行订单，您的消费者不会受到影响。

这基本上是针对接口而不是具体类型进行编码的优势。

您可以使用不同的界面，即。`ICollection<T>`如果您的消费者想要的不仅仅是枚举。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T15:22:51.280

如果它没有做任何其他事情，请继续。专门的收藏是为那些需要做……特别……事情的收藏而设计的。

（例如， a`ListViewItemCollection`必须在更新时通知其父`ListView`级，因此它需要实现`IList(T)`，因此`IEnumerable(T)`。如果您有一个自定义集合，它可能会继承自该集合。`IEnumerable(T)`仅当您的集合可以枚举时，仅继承 from 才有意义，但是未编入索引。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T15:23:34.463

你可以。

```
public class List<T> : IList<T>, ICollection<T>, 
IList, ICollection, IReadOnlyList<T>, IReadOnlyCollection<T>, IEnumerable<T>, 
IEnumerable 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-21T15:24:04.130

我认为这里混淆的根源是“自定义集合”和“自定义类实例的集合”之间的区别。在这两个中，您`List<CustomObject>`是后一种情况 - 您只是重用由其他人创建的集合并利用泛型来保留项目类型信息，仅此而已。真正的自定义集合可能会实现`IEnumerable<T>`，但您很少（如果有的话）需要它。

因此，在这种情况下，您不仅可以，而且可能还*应该*使用`List<CustomObject>`

# delphi - 如何在设计时检测 TCollection 何时被删除？

> ID：13992645
> 
> 赞同：1
> 
> 时间：2012-12-21T15:19:13.147
> 
> 标签：delphi, list, delphi-xe

我有一个可视组件，需要检测何时删除集合项，以便重新绘制。

TCollection 具有以下受保护的过程：

```
procedure Notify(Item: TCollectionItem; Action: TCollectionNotification); virtual; 
```

不幸的是，它仅在添加项目时和删除**之前调用。**我需要知道项目何时被**删除**。

在内部，TCollection 使用了一个 TList，它也提供了一个 Notify 过程。TList 版本**确实**包含已删除通知。不幸的是，TList 是私有成员。

如何检测 TCollection 项目何时被删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:42:58.913

`TCollection.Notify()`是正确的方法。只是不要立即重新绘制，`Invalidate()`而是重新绘制组件。在实际触发下一次重绘时，已删除的项目将消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:20:22.753

覆盖集合项的`SetCollection`方法。像这样实现它：

```
procedure TFooCollectionItem.SetCollection(const Value: TCollection);
var
  OldCollection: TFooCollection;
begin
  OldCollection := Collection as TFooCollection;
  inherited;
  if (OldCollection <> Value) and Assigned(OldCollection) then
    OldCollection.NotifyItemReallyRemoved(Self);
end; 
```

您可以自己提供和实施假设的`NotifyItemReallyRemoved`方法。

# git - 为什么单击提交后我的 Intellij Git 插件不提交文件？

> ID：13992650
> 
> 赞同：9
> 
> 时间：2012-12-21T15:19:30.327
> 
> 标签：git, version-control, intellij-idea, git-commit

使用 IntelliJ 11.1.5，我无法将我的活动更改列表提交到我的本地 Git 存储库。当我尝试提交时，我会观察到虽然对话框会出现，但单击提交什么也没做，我需要使用各种不必要的子更改列表的配置，一次提交一个文件，或者取消选中“优化导入”和“代码分析”以使其正常工作。

请注意，这是一个随机事件，在其他时候这不会是一个问题。事实上，当我切换到 Git GUI 或 Git Bash 时，提交工作顺利进行。

那么如何解决问题才能使用 Git 插件呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-21T15:19:30.327

IntelliJ 的工作人员建议我使 IntelliJ 的缓存无效。(File->Invalidate Caches) 你应该时不时地这样做，以清除 Git/SVN 的本地缓存，以减少错误的发生。

这样做解决了我的问题，您应该考虑这样做，而不是过于依赖 IDE 的本地历史记录功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-04-15T13:52:21.940

我在 Ultimate 2020.3 版本中遇到了非模态界面的问题，结果我必须多次单击 Commit 按钮才能工作。

`Invalidate Cache and Restart`顺便说一句，在切换到非模态界面之前，我也做了@noisebelt 建议的操作-> 。要切换到该界面：

1.  转到`File > Settings > Version Control > Commit`（对于 Mac `IntelliJ IDEA > Preferences > Version Control > Commit`：）
2.  取消勾选**使用非模态提交接口**复选框。
3.  祝你好运！:)

**更新**：您可能希望取消选中“提交*前*”部分下的“*设置”>“版本控制”>* “提交”中的某些复选框，例如重新格式化代码、重新排列代码等，并通过这样做来诊断可能导致提交问题的原因。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-01T17:14:54.130

我喜欢模态界面，我正在尝试替代方案。我发现取消选中***File -> Settings -> Version Control -> Commit --Before commit***部分下的***Analyze Code复选框对我有用。****

# drop-down-menu - Yii 和 Dropdown 在表单中

> ID：13992660
> 
> 赞同：0
> 
> 时间：2012-12-21T15:19:59.763
> 
> 标签：drop-down-menu, yii

我是 Yii 框架的新手。

我有一个包含三个字段的表单。我需要其中一个是一个选择下拉元素，它的数据来自以前添加的 mysql 表中的数据。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:36:13.383

例如，如果您为包含要在下拉列表中使用的数据的表设置了模型，则可以使用[`CHtml::dropDownList()`](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)渲染下拉列表的方法，并将[`CHtml::listData()`](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail)该模型渲染为列表的项目；

```
echo CHtml::dropDownList(
    'attribute_name',
    '',
    CHtml::listData(MyOtherModel::model()->findAll(),'id','name')
); 
```

我经常使用 Gii，它使用 CActiveForm 小部件来显示表单，如果您的表单也使用 CActiveForm，您可以渲染您的下拉列表：

```
$form=$this->beginWidget('CActiveForm', array(
    'action'=>Yii::app()->createUrl($this->route),
    'method'=>'get',
));

...

echo $form->label($model,'attribute_name');
echo $form->dropDownList(
    $model,
    'attribute_name',
    CHtml::listData(MyOtherModel::model()->findAll(),'id','name')
);

...

$this->endWidget(); 
```

请注意，CActiveForm 使用[`CHtml::activeDropDownList()`](http://www.yiiframework.com/doc/api/1.1/CHtml#activeDropDownList-detail%28%29)而不是`CHtml::dropDownList()`我在第一个示例中使用的，因此我的两个示例之间的语法略有不同。

# java - Eclipse 包资源管理器为空

> ID：13992661
> 
> 赞同：7
> 
> 时间：2012-12-21T15:20:07.780
> 
> 标签：java, eclipse, package-explorer

我是 Eclipse 新手，我似乎无法让包资源管理器合作。这是我当前的文件树：

```
└───workspace
    ├───bin
    │   └───var
    ├───res
    │   └───gui
    └───src
        └───var
            └───all of my source code 
```

我试图在当前树\workspace、\workspace\src 和workspace\src\var 中启动一个工作区。所有这些都导致了一个空的包资源管理器。我尝试过 Eclipse Indigo、Juno、Classic Indigo 和 Classic Juno，但没有成功。任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-22T07:40:21.987

也许有点晚了，但我找到了解决这个问题的方法！只需右键单击资源管理器，选择*import*，然后*通常*选择*Existing project into workspace*然后找到项目的根文件夹，它应该可以很好地导入它。好吧，无论如何都为我工作；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:26:58.810

1.  右键单击您的项目
2.  选择“属性”
3.  'Java 构建路径'
4.  选择标签“来源”
5.  按钮“添加文件夹”
6.  添加您的源文件夹/所有源文件夹

# python - Python：使用 sys.exit 或 SystemExit 的区别和建议

> ID：13992662
> 
> 赞同：77
> 
> 时间：2012-12-21T15:20:15.540
> 
> 标签：python, performance, coding-style

在线阅读一些程序员使用`sys.exit`，其他人使用`SystemExit`。
对不起，基本问题：

1.  有什么区别？
2.  我什么时候需要在函数中使用 SystemExit 或 sys.exit？

例子

```
ref = osgeo.ogr.Open(reference)
if ref is None:
    raise SystemExit('Unable to open %s' % reference) 
```

或者

```
ref = osgeo.ogr.Open(reference)
if ref is None:
    print('Unable to open %s' % reference)
    sys.exit(-1) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-21T15:26:07.317

没有实际区别，但您的示例代码还有另一个区别 -`print`进入标准输出，但异常文本进入标准错误（这可能是您想要的）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-21T15:23:09.293

`sys.exit(s)` is just shorthand for `raise SystemExit(s)`, as described in the former's docstring; try `help(sys.exit)`. So, instead of either one of your example programs, you can do

```
sys.exit('Unable to open %s' % reference) 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-02-16T10:49:29.200

除了 raise 之外，还有 3 个退出函数`SystemExit`。

底层是`os._exit`，它需要 1 个 int 参数，并立即退出而不进行清理。您不太可能会想要触摸这个，但它就在那里。

`sys.exit`在 sysmodule.c 中定义并运行`PyErr_SetObject(PyExc_SystemExit, exit_code);`，这实际上与直接提升相同`SystemExit`。详细地说，加注`SystemExit`可能更快，因为`sys.exit`需要一个`LOAD_ATTR`and `CALL_FUNCTION`vs`RAISE_VARARGS`操作调用。此外，`raise SystemExit`产生稍小的字节码（少 4 个字节），（如果使用，则额外 1 个字节， `from sys import exit`因为`sys.exit`预计返回 None，因此包括一个额外的`POP_TOP`）。

最后一个退出函数在 REPL中定义`site.py`，并别名为`exit`or 。`quit`它实际上是该类的一个实例`Quitter`（因此它可以有一个 custom `__repr__`，因此可能是运行最慢的。此外，它在 raise`sys.stdin`之前关闭`SystemExit`，因此建议仅在 REPL 中使用。

至于如何`SystemExit`处理，最终会导致VM调用os._exit，但在此之前，它会进行一些清理。它还运行`atexit._run_exitfuncs()`通过`atexit`模块注册的任何回调。直接调用`os._exit`会绕过该`atexit`步骤。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-12-21T15:25:55.100

我个人的偏好是至少`SystemExit`被提出（甚至更好 - 一个更有意义和有据可查的自定义异常），然后尽可能接近“主要”功能，然后有最后机会将其视为有效退出与否。从设计的角度来看，具有的库/深度嵌入功能`sys.exit`简直令人讨厌。（一般来说，退出应该“尽可能高”）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-21T15:23:24.050

根据文档`sys.exit(s)`有效地做`raise SystemExit(s)`，所以它几乎是一回事。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-21T15:23:46.237

`SystemExit`是一个例外，这基本上意味着您的程序有一种行为，您想要停止它并引发错误。`sys.exit`是您可以调用以退出程序的函数，可能会向系统提供返回码。

编辑：它们确实是一回事，所以唯一的区别在于程序背后的逻辑。异常是某种“不需要的”行为，无论从程序员的角度来看，对函数的调用是否更像是“标准”操作。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-03-01T12:32:45.733

虽然许多答案已经回答了差异，但[https://mail.python.org/pipermail/python-list/2016-April/707470.html](https://mail.python.org/pipermail/python-list/2016-April/707470.html)提出了一个有趣的观点：

TL;DR：最好只引发“正常”异常，并仅在脚本的顶层使用`SystemExit`或使用。`sys.exit`

> > 我在 python 2.7 和 Linux 上，如果我可以用 raise SystemExit 替换 sys.exit(1) ，我有一个简单的代码需要建议。
> > 
> > ==实际代码==
> > 
> > ```
> > def main():    
> >     try:
> >        create_logdir()
> >        create_dataset()
> >        unittest.main()    
> >      except Exception as e:
> >        logging.exception(e)
> >        sys.exit(EXIT_STATUS_ERROR)
> > 
> > if __name__ == '__main__':    main() 
> > ```
> > 
> > ==更改代码==
> > 
> > ```
> > def main():    
> >     try:
> >        create_logdir()
> >        create_dataset()
> >        unittest.main()    
> >     except Exception as e:
> >        logging.exception(e)
> >        raise SystemExit
> > 
> > if __name__ == '__main__':    
> >     main() 
> > ```
> 
> 我个人反对这两个。我喜欢的模式是这样的：
> 
> ```
>  def main(argv):
>     try:
>       ...
>     except Exception as e:
>       logging.exception(e)
>       return 1
> 
>   if __name__ == '__main__':
>     sys.exit(main(sys.argv)) 
> ```
> 
> 请注意， main() 恢复为具有正常返回的正常函数。
> 
> 此外，我们大多数人会避免“异常除外”，而只是让顶层除外冒泡：这样您就可以获得堆栈回溯以进行调试。我同意它可以防止记录异常并导致更丑的控制台输出，但我认为这是一个胜利。如果您*确实*想记录异常，则总是这样：
> 
> 尝试：...除了异常为 e：logging.exception(e) raise
> 
> 将异常背诵到日志中，仍然让它正常冒泡。
> 
> “except Exception”模式的问题在于，它捕获并 *隐藏了* *每个*异常，而不仅仅是您理解的特定异常的狭窄集合。
> 
> 最后，不赞成提出一个裸露的 Exception 类。在 python 3 中，我相信它实际上是被禁止的，所以无论如何它都是不可移植的。但即使在 Python 中，最好提供一个 Exception 实例，而不是类：
> 
> 引发 SystemExit(1)
> 
> > 2.  try 块中的所有函数都使用 raise 冒泡了异常
> >     
> >     
> >     
> >     这里的 create_logdir() 示例是函数定义
> >     
> >     
> > 
> > 定义创建日志目录（）：
> > 
> > try: os.makedirs(LOG_DIR) 除了 OSError as e: sys.stderr.write("Failed to create log directory...Exiting !!!") raise print "log file:" + corrupt_log return True
> > 
> > def main(): try: create_logdir() except Exception as e: logging.exception(e) raise SystemExit
> > 
> > (a) 如果 create_logdir() 失败，我们将收到以下错误，这很好还是我需要改进此代码。
> > 
> > 无法创建日志目录...正在退出 !!!ERROR:root:[Errno 17] 文件存在：'/var/log/dummy'
> > 
> > 回溯（最后一次调用）：文件“corrupt_test.py”，第 245 行，在 main create_logdir() 文件“corrupt_test.py”，第 53 行，在 create_logdir os.makedirs(LOG_DIR) 文件“/usr/local/lib/ python2.7/os.py"，第 157 行，在 makedirs OSError: [Errno 17] 文件存在：'/var/log/dummy'
> 
> 我更喜欢冒泡方法，可能像您所做的那样带有日志或警告消息，例如：
> 
> logging.exception("create_logdir failed: makedirs(%r): %s" % (LOG_DIR, e)) raise
> 
> （也不是该日志消息记录了更多上下文：上下文在调试问题时非常有用。）
> 
> 对于非常小的脚本 sys.stderr.write 是可以的，但一般来说，你的任何被证明通常有用的函数都可能会迁移到库中以便被重用；考虑到 stderr 并不总是消息的地方；而是根据需要使用 error() 或 wanr() 或 exception() 读取日志记录模块。无需将输出连接到您的内部功能，配置输出的位置就可以有更多的空间。
> 
> > 3.  我可以只 raise ，而不是 SystemExit 或 sys.exit(1) 。这对我来说看起来不对
> >     
> >     
> >     
> >     定义主（）：
> >     
> >     
> >     
> >     尝试：create_logdir() 例外为 e logging.exception(e) raise
> 
> 这就是我自己会做的。
> 
> 想一想：异常是否被“处理”了，意味着情况是否因为预期而得到处理？如果没有，让异常冒泡，以便用户知道发生了程序*无法*理解的事情。
> 
> 最后，SystemExit 或 sys.exit() 从除了最外层的 main() 函数之外的任何东西中通常都是不好的。我什至在那里抗拒它；主函数，如果写得好，通常可以从其他有用的地方调用，这使得它有效地成为一个库函数（它已被重用）。这样的功能不应该单方面中止程序。真没礼貌！相反，让异常冒出来：也许 main() 的*调用者*期望它并且可以处理它。通过中止而不是“引发”，您剥夺了调用者做适当事情的机会，即使您自己（即“主要”）不知道足够的上下文来处理异常。
> 
> 所以我是为了“提高”自己。然后只是因为您想记录错误。如果您不想记录异常，则可以*完全*避免 try/except 并使用更简单的代码：让调用者担心未处理的异常！

# ios - 将iOS App连接到数据库到Label

> ID：13992666
> 
> 赞同：0
> 
> 时间：2012-12-21T15:20:35.387
> 
> 标签：ios, xcode, uitableview, label

我想将我的应用程序连接到数据库并将其显示在标签中。我可以将我的应用程序连接到数据库并在 UITableView 中显示它。

这是我到目前为止所拥有的：

ViewController.h

```
#import <UIKit/UIKit.h>

@interface CartHistoryViewController : UITableViewController
{
    NSMutableArray *arrayDataFromServer;
}

@end 
```

视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/CartGet.php?  choice=history"];
NSArray *arrayImagesNames = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:strURL]];

strURL = @"http://localhost:8888/CartGet.php?choice=historydate";
NSArray *arrayImagesPaths = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:strURL]];

// store the result in arrayDataFromServer
arrayDataFromServer = [[NSMutableArray alloc]init];

NSEnumerator *enumForNames = [arrayImagesNames objectEnumerator];
NSEnumerator *enumForPahts = [arrayImagesPaths objectEnumerator];

id objName, objPath;

while ( objName = [enumForNames nextObject]) {
    objPath = [enumForPahts nextObject];
    [arrayDataFromServer addObject:[NSDictionary dictionaryWithObjectsAndKeys:objName, @"name", objPath, @"path", nil]];
}
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

cell.textLabel.text = [[arrayDataFromServer objectAtIndex:indexPath.row] objectForKey:@"name"];
[cell.textLabel setFont:[UIFont systemFontOfSize:20]];
 cell.detailTextLabel.text = [[arrayDataFromServer objectAtIndex:indexPath.row] objectForKey:@"path"];
[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
[cell setSelectionStyle:UITableViewCellSelectionStyleNone];

  NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[[arrayDataFromServer objectAtIndex:indexPath.row] objectForKey:@"path"]]];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [UIImage imageWithData:data];

  cell.imageView.image = img;

return cell;
} 
```

我希望能够在 Label 和 ImageView 而不是单元格中显示它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:28:11.297

转到您的 Interface Builder 选择您的表格视图并制作它`Grouped TableView`

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`在您的方法之前添加以下代码

```
#pragma mark - Table view data source

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [arrayDataFromServer count];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{ 
   return 0;
}
// set header height of gropued tableview
-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section 
{
  return 120;//change this value if it is too big
}
//set header section labels
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{
      NSString * subject=[[arrayDataFromServer objectAtIndex:section] objectForKey:@"name"];//this line may give you error because of section easy to correct
     UILabel *subjectLabel = [[UILabel alloc] initWithFrame:CGRectMake(45, 30, 100, 100)];
     subjectLabel.textColor = [UIColor colorWithRed:0/256.0 green:84/256.0 blue:129/256.0 alpha:1.0];
      subjectLabel.font = [UIFont fontWithName:@"Arial" size:25];
      subjectLabel.text = subject;
      subjectLabel.backgroundColor = [UIColor clearColor];
      [subjectLabel sizeToFit];

      // if you want to add image view create an imageview programatically here 

// NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[[arrayDataFromServer objectAtIndex:section] objectForKey:@"path"]]];
//NSData *data = [NSData dataWithContentsOfURL:url];
//UIImage *img = [UIImage imageWithData:data];
// UIImageView *brickAnim = [[UIImageView alloc] initWithImage:img];

       // Create header view and add label as a subview choose coordinates wisely
       UIView *view = [[UIView alloc] initWithFrame:CGRectMake(100, 120, 100, G00)];

        [view addSubview:subjectLabel];
        //[view addSubview:brickAnim];

        return view;
} 
```

# javascript - jQuery：选择 使用 select() 而不是 change() 的内容

> ID：13992667
> 
> 赞同：0
> 
> 时间：2012-12-21T15:20:48.083
> 
> 标签：javascript, jquery, select, drop-down-menu

我正在使用一个下拉插件插件，它阻止我使用它`change()`来查找何时选择了下拉选项。我将如何做与`select()`它支持的相同的事情？

我目前有：

```
<select id="dropdown" name="dropdown">
        <option value="0" data-imagesrc="images/icons/all.png">All Questions</option>
        <option value="1" id="friends" data-imagesrc="images/icons/friends.png">Friends</option>
        <option value="2" data-imagesrc="images/icons/friends_of_friends.png">Friends of Friends</option>
        <option value="3" data-imagesrc="images/icons/network.png"><?php echo $network; ?></option>
        <option value="4" data-imagesrc="images/icons/location.png"><?php echo $location ?></option>
</select>

<script type="text/javascript">

$('#dropdown').ddslick({
showSelectedHTML: false
});

$(document).ready(function() {
    $('#dropdown').select(function() {
        var blah = selected dropdown // mock code
             $.ajax({
                 type: "POST",
                 url: "data.php",
                 data:  {'data': blah},
                 success: function(data) {
                     $('#questions_body').hide().html(data).fadeIn('500');
                 },
                 dataType: "HTML"
        });

    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:27:00.110

我认为 select() 方法与此无关。但是，从插件页面：

*onSelected：在下拉列表中选择选项时的回调函数。请参见上面的演示 3。*

```
$('#myDropdown').ddslick({
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
}); 
```

# php - Symfony2额外字段FormError验证带有隐藏字段的表单

> ID：13992670
> 
> 赞同：0
> 
> 时间：2012-12-21T15:20:52.807
> 
> 标签：php, forms, validation, symfony

这是我的表格清单：

```
$builder = $this->createFormBuilder($project)
                ->add('name','text')
                ->add('type','choice', array(
                    'choices'  => $enumtype
                   ))
                ->add('begindate','date')
                ->add('expecteddate','date')
                ->add('events', 'collection', array(
                    'type' => new EventType(),
                    'allow_add' => true,
                    'allow_delete' => true,
                    'by_reference' => false,
                    ))

                ->add('financial', 'file', array(
                    'property_path' => false,
                    'required' => false
                    ))
                ->add('investition', 'file', array(
                    'property_path' => false,
                    'required' => false
                    ));
if ($defaults) {
    $builder->add('id','hidden',array('data' => $defaults['id'], 'property_path' => false));
    $form = $builder->getForm();
    $form->setData($defaults);
}
else
    $form = $builder->getForm(); 
```

当我尝试验证此表单时，我收到 FormError 对象：

```
Array ( 
    [0] => Symfony\Component\Form\FormError Object  (
        [messageTemplate:protected] => This form should not contain extra fields.
        [messageParameters:protected] => Array (
            [{{ extra_fields }}] => id 
        )
        [messagePluralization:protected] =>
    )
) 
```

如果我排除“id”字段 - 一切正常。我如何使用隐藏类型并进行验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:17:22.133

这个问题来自于隐藏参数是可选的。

一个常见的错误是提交表单时没有设置关联类型。

错误示例：

```
public function addOrEditAction($id=null)
{
    $request = $this->getRequest();

    if (!$id) {
        $model = new Actu();
        $type  = new ActuType(); /* I do not set the default id on submit */
    } else {
        $em = $this->getDoctrine()->getEntityManager();
        $model = $em->getRepository("MyBundle:Actu")
                    ->find($id);
        if (!$model) {
            return $this->redirect($this->generateUrl('admAddNew'));
        } else {
            $type = new ActuType($model->getId());
        }
    }

    $form = $this->createForm($type,$model);

    if ('POST' == $request->getMethod()) {
        $form->bind($request);
        if ($form->isValid()) {
            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($model);
            $em->flush();

            return $this->redirect($this->generateUrl('admNews'));
        }
    }

    $data = array('form'=>$form->createView());
    return $this->render('MyBundle:Page:news-add.html.twig',$data);
} 
```

**调用控制器时**
`ActuType()`包含：

```
'name', 'content', 'date', 'id' 
```

**提交表格时**
`ActuType()`包含：

```
'name', 'content', 'date' 
```

他们不匹配。这实际上会返回一个错误，因为在提交表单时
有一个隐藏的额外字段包含要编辑的行。`id`

您需要做的就是在初始化 FormType 之前检查请求

```
if (!$id && null === $id = $request->request->get('newsType[id]',null,true)) { 
```

With this, you can set the same FormType that you did when asking for the page

# objective-c - Objecitive-C：聚合/组合是否用于决定强/弱引用

> ID：13992671
> 
> 赞同：1
> 
> 时间：2012-12-21T15:20:54.997
> 
> 标签：objective-c

我最近一直在这里阅读有关聚合和组合的信息，以及组合基本上是一种有关系而聚合不是。聚合似乎更像是一个熟人。我知道你，但我不拥有你。

同时我一直在学习objective-c内存管理和强弱关键字。强将是创建对象将拥有新变量，而弱则不会。

那么，我是否可以得出这样的结论，即强和弱直接用于确定变量是复合变量还是聚合变量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:03:09.150

> strong 和 weak 用于确定一个变量是复合变量还是聚合变量？

恰恰相反。查看实现，您可以了解设计的线索，但设计决定了实现，因为它是更高层次的概念。

聚合和组合是两种包含关系：

*   **聚合**是关系的一部分，而部分可能独立存在。也就是说，它们的存在与容器的生命周期无关，因此您使用不暗示所有权的弱引用来引用这些部分。

*   **组合**是拥有或拥有的关系，因此您使用暗示所有权的强引用。一旦容器被破坏，部件也会被破坏。

weak 和 strong 是用于内存管理的 ARC 的所有权限定符：

*   **强项**并保留一个对象。它意味着所有权，因为只要存在强指针，对象就不会被释放。
*   **弱点**但不保留对象。它并不意味着所有权，因为它不会影响对象的生命周期（这取决于其他地方是否存在强引用）。

# c# - 如何从 List 返回特定类型的对象 I have a List which is a collection of various type of objects. I am writing a helper method which will return a specific type of object. The helper method will accept type 问问题 问问题 2012-12-21T15:20:55.537 1134 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a List which is a collection of various type of objects. I am writing a helper method which will return a specific type of object. The helper method will accept type name as string parameter. Note: I am using 3.5 framework. PHP redirected page doesn't have a referral url I have two site sitea.com and siteb.com I need to redirect pages from sitea.com to siteb.com. The redirect script in sitea.com is The redirection is taking without any flaw. The functionality if fulfilled. But I have google analytics tracking on siteb.com which should show that the source is referral from sitea.com I dug into web developer tools in google chrome and found that siteb.com doesn't send a referral header in the request. How do i redirect my visitors from sitea.com to siteb.com which sends the referral headers on siteb.com.? c#.net.net-3.5 4 6 回答 6 This answer is useful 8 如果您需要使用字符串作为参数，则不能依赖OfType<t>()扩展方法。幸运的是，它很容易模仿： public IEnumerable OfType(this List list, string typeName) { return list.Where(x => x != null && x.GetType().Name == typeName); } 正如@ChrisSinclair 在评论中指出的那样，该解决方案不管理转换、强制转换和继承/接口。强制转换（因为用户定义的转换运算符）和转换（因为TypeConverters 和IConvertible接口）有点棘手。对于简单（隐式）强制转换（如继承和接口），您可以使用： public IEnumerable OfType(this List list, string typeName) { Type type = Type.GetType(typeName); return list.Where(x => x != null && type.IsAssignableFrom(x.GetType())); } 如何在运行时执行转换（即使使用 CUSTOM CONVERSION OPERATORS） 我发现我需要类似于我在这个答案中发布的代码，但我不得不稍微扩展它，这里有一个更好的实现来处理自定义强制转换和转换。 将所有内容放在一个CastExtensions类中（如果不这样做，则更新代码）然后enum为其选项声明这个小： [Flags] public enum CastOptions { None = 0, ExcludeNulls = 1, UseConversions = 2 } 问题是 C# 通常是一种静态类型语言，这意味着几乎所有（关于类型）都必须在编译时知道（然后要执行转换，您必须知道要在编译时转换为的类型）。此函数处理简单的情况（如派生）和更复杂的情况（接口、自定义转换运算符 - 强制转换 - 和转换 - 在需要时）。 public static IEnumerable OfType(this List list, string typeName, CastOptions options) { Type type = Type.GetType(typeName); foreach (var obj in list) { if (Object.ReferenceEquals(obj, null)) { if (options.HasFlag(CastOptions.ExcludeNulls)) continue; yield return obj; } var objectType = obj.GetType(); // Derived type? if (type.IsAssignableFrom(objectType)) yield return obj; // Should we try to convert? if (!options.HasFlag(CastOptions.UseConversions)) continue; // Castable? object convertedValue = null; try { var method = typeof(CastExtensions) .GetMethod("Cast", BindingFlags.Static|BindingFlags.NonPublic) .MakeGenericMethod(type); convertedValue = method.Invoke(null, new object[] { obj }); } catch (InvalidCastException) { // No implicit/explicit conversion operators } if (convertedValue != null) yield return convertedValue; // Convertible? if (options.HasFlag(CastOptions.UseConversions)) { try { IConvertible convertible = obj as IConvertible; if (convertible != null) convertible.ToType(type, CultureInfo.CurrentCulture); } catch (Exception) { // Exact exception depends on the source object type } } } } 请注意，转换可能等同于或不等同于强制转换，实际上它取决于实现和操作中涉及的确切类型（这就是您可以通过选项启用或禁用此功能的原因）。 这是运行时强制转换所需的一个小辅助函数： private static T Cast<t>(object obj) { return (T)obj; } 我们可能会在运行时发出此代码（我想即使使用表达式，但我没有尝试）但是一个小的帮助方法将生成我们需要的代码（从对象转换为运行时已知的泛型类型）。请注意，此转换函数对于值类型不能按预期工作，例如： int a = 1; float a = Cast<float>(a); // Run-time error 这是因为(object)1不能转换为除此之外的任何其他int值（对于所有装箱值类型都是如此）。如果您使用的是 C# 4.0，则应将object参数更改为obj，dynamic一切都会按预期工作（适用于所有类型）。 于 2012-12-21T15:25:23.260 回答 This answer is useful 2 Maybe something like that : var ofTypeTypeA = myList.OfType<typea>(); 于 2012-12-21T15:22:39.167 回答 This answer is useful 0 一种干净的方法是强制用户将类型指定为类型，以避免应用程序中出现松散的字符串。 然后你可以使用泛型并只使用你感兴趣的类型。这也将允许调用者在以后使用 IEnumerable 时跳过强制转换。 所以代替这个： List newList = GetOfType(myList, "SomeObject"); // CAST!! SomeObject someObject = newList[0] as SomeObject; if (someObject != null) // use object 你会这样做： IEnumerable <someobject>newList = myList.OfType<someobject>(); foreach (SomeObject someObject in newList){ // no cast neccessary 如果您应该重命名类，这使得它在未来变得不敏感SomeObject（因为重构工具会选择类名而不是字符串） 于 2012-12-21T15:32:40.073 回答 This answer is useful -1 我想您需要将从列表中提取的单个对象转换为强类型对象。并且不要将所有列表都投给它。否则使用List<mytype>. 所以我会选择这个：How to cast to a type in C#。 于 2012-12-21T15:32:03.530 回答 This answer is useful -1 您可以使用Enumerable.OfType var input = new List(); input.Add(1); input.Add("foo"); var bar = input.OfType<string>(); 于 2012-12-21T15:23:57.483 回答 This answer is useful -3 您可以使用 is 运算符（或传递类型并检查是否也使用 is）。以下是使用 is 运算符的示例： foreach (var ctl in ControlsList) { if (ctl is CheckBox) //Do this else if (ctl is TextBox) //DoThis } 通过在参数中将类型作为字符串传递，您可以执行类似的操作来获取要测试的类型： Type t = System.Type.GetType("System.Int32"); 于 2012-12-21T15:25:22.240 回答 Related 1 perl - 在perl中从文件中读取西里尔字符 4 c - C程序列出隐藏和只读文件 2 iphone - 调用 Web 服务时出错，无法完成操作 1 visual-studio-2010 - 字符串到货币数据类型的转换 2 django - 单元测试中的权限 1 jax-ws - Wsgen 与 javaSE 的使用 3 javascript - JavaScript - 如何获取字符串中最后一个不同的索引但是 2 css - IE中的CSS渐变，透明颜色？ 1 r - 在 R 中的 qountmod 数据框中添加计算列 1 android - use of view to display digits images Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13992672
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, .net, .net-3.5

I have a `List<object>` which is a collection of various type of objects.

I am writing a helper method which will return a specific type of object. The helper method will accept type name as string parameter.

Note: I am using 3.5 framework.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T15:25:23.260

如果您需要使用**字符串**作为参数，则不能依赖`OfType<T>()`扩展方法。幸运的是，它很容易*模仿*：

```
public IEnumerable<object> OfType(this List<object> list, string typeName)
{
    return list.Where(x => x != null && x.GetType().Name == typeName);
} 
```

正如@ChrisSinclair 在评论中指出的那样，该解决方案不管理转换、强制转换和继承/接口。强制转换（因为用户定义的转换运算符）和转换（因为`TypeConverter`s 和`IConvertible`接口）有点棘手。对于简单（隐式）强制转换（如继承和接口），您可以使用：

```
public IEnumerable<object> OfType(this List<object> list, string typeName)
{
    Type type = Type.GetType(typeName);
    return list.Where(x => x != null && type.IsAssignableFrom(x.GetType()));
} 
```

**如何在运行时执行转换（即使使用 CUSTOM CONVERSION OPERATORS）**

我发现我需要类似于我在这个答案中发布的代码，但我不得不稍微扩展它，这里有一个更好的实现来处理自定义强制转换和转换。

将所有内容放在一个`CastExtensions`类中（如果不这样做，则更新代码）然后`enum`为其选项声明这个小：

```
[Flags]
public enum CastOptions
{
    None = 0,
    ExcludeNulls = 1,
    UseConversions = 2
} 
```

*问题*是 C# 通常是一种静态类型语言，这意味着几乎所有（关于类型）都必须在编译时知道（然后要执行转换，您必须知道要在编译时转换为的类型）。此函数处理*简单的*情况（如派生）和更复杂的情况（接口、自定义转换运算符 - 强制转换 - 和转换 - 在需要时）。

```
public static IEnumerable<object> OfType(this List<object> list, 
                                         string typeName, CastOptions options)
{
    Type type = Type.GetType(typeName);

    foreach (var obj in list)
    {
        if (Object.ReferenceEquals(obj, null))
        {
            if (options.HasFlag(CastOptions.ExcludeNulls))
                continue;

            yield return obj;
        }

        var objectType = obj.GetType();

        // Derived type?
        if (type.IsAssignableFrom(objectType))
            yield return obj;

        // Should we try to convert?
        if (!options.HasFlag(CastOptions.UseConversions))
            continue;

        // Castable?
        object convertedValue = null;

        try
        {
            var method = typeof(CastExtensions)
                .GetMethod("Cast", BindingFlags.Static|BindingFlags.NonPublic)
                .MakeGenericMethod(type);

            convertedValue = method.Invoke(null, new object[] { obj });
        }
        catch (InvalidCastException)
        {
            // No implicit/explicit conversion operators
        }

        if (convertedValue != null)
            yield return convertedValue;

        // Convertible?
        if (options.HasFlag(CastOptions.UseConversions))
        {
            try
            {
                IConvertible convertible = obj as IConvertible;
                if (convertible != null)
                    convertible.ToType(type, CultureInfo.CurrentCulture);
            }
            catch (Exception)
            {
                // Exact exception depends on the source object type
            }
        }
    }
} 
```

请注意，*转换*可能等同于或不等同于强制转换，实际上它取决于实现和操作中涉及的确切类型（这就是您可以通过选项启用或禁用此*功能的原因）。*

这是运行时强制转换所需的一个小辅助函数：

```
private static T Cast<T>(object obj)
{
    return (T)obj;
} 
```

我们可能会在运行时发出此代码（我想即使使用表达式，但我没有尝试）但是一个小的帮助方法将生成我们需要的代码（从对象转换为运行时已知的泛型类型）。请注意，此*转换*函数对于值类型不能按预期工作，例如：

```
int a = 1;
float a = Cast<float>(a); // Run-time error 
```

这是因为`(object)1`不能转换为除此之外的任何其他`int`值（对于所有装箱值类型都是如此）。如果您使用的是 C# 4.0，则应将`object`参数更改为`obj`，`dynamic`一切都会按预期工作（适用于所有类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:22:39.167

Maybe something like that :

```
var ofTypeTypeA = myList.OfType<TypeA>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:32:40.073

一种干净的方法是强制用户将类型指定*为类型，*以避免应用程序中出现松散的字符串。

然后你可以使用泛型并只使用你感兴趣的类型。这也将允许调用者在以后使用 IEnumerable 时跳过强制转换。

所以代替这个：

```
List<object> newList = GetOfType(myList, "SomeObject");
// CAST!!
SomeObject someObject = newList[0] as SomeObject;
if (someObject != null)
    // use object 
```

你会这样做：

```
IEnumerable<SomeObject> newList = myList.OfType<SomeObject>();
foreach (SomeObject someObject in newList){
    // no cast neccessary 
```

如果您应该重命名类，这使得它在未来变得不敏感`SomeObject`（因为重构工具会选择类名而不是字符串）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T15:32:03.530

我想您需要将从列表中提取的单个对象转换为强类型对象。并且不要将所有列表都投给它。否则使用`List<MyType>`.

所以我会选择这个：[How to cast to a type in C#](https://stackoverflow.com/q/4959320/505893)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-21T15:23:57.483

您可以使用[Enumerable.OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)

```
var input = new List<object>();
input.Add(1);
input.Add("foo");
var bar = input.OfType<string>(); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-12-21T15:25:22.240

您可以使用 is 运算符（或传递类型并检查是否也使用 is）。以下是使用 is 运算符的示例：

```
foreach (var ctl in ControlsList)
{
    if (ctl is CheckBox)
        //Do this
    else if (ctl is TextBox)
        //DoThis
} 
```

通过在参数中将类型作为字符串传递，您可以执行类似的操作来获取要测试的类型：

```
Type t = System.Type.GetType("System.Int32"); 
```</string></mytype></someobject></someobject></typea></float></t></t>

# php - PHP 重定向页面没有推荐 URL

> ID：13992673
> 
> 赞同：3
> 
> 时间：2012-12-21T15:20:58.837
> 
> 标签：php, http, redirect, google-analytics

我有两个网站`sitea.com`和`siteb.com`

我需要将页面从 重定向`sitea.com`到`siteb.com`。重定向脚本`sitea.com`是

```
<?php
header("Location: http://siteb.com/somepage");
?> 
```

重定向没有任何缺陷。功能是否满足。但我在 siteb.com 上有谷歌分析跟踪，这应该表明来源是从 sitea.com 引荐的

我在谷歌浏览器中挖掘了网络开发人员工具，发现它`siteb.com`没有在请求中发送推荐标头。

**我如何将我的访问者从发送引荐标头的位置重定向`sitea.com`到.?`siteb.com``siteb.com`**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T15:25:07.440

**保持推荐的最佳方法是从服务器发出标准 301。**

如何使用**.htaccess执行此操作**

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !newdomain.com$ [NC]
RewriteRule ^(.*)$ http://newdomain.com/$1 [L,R=301] 
```

[直接从 PHP 执行它也应该有效（正如DaveRandom](https://stackoverflow.com/users/889949/daverandom)所指出的），只要确保包含 HTTP 响应代码。

```
<?php
// 301 Moved Permanently
header("Location: http://siteb.com/somepage", TRUE, 301); 
```

下面是一张表格，其中包含来自不同重定向方式的数据及其对分析的影响。

```
Redirect method             | Browser   | Result            | Impact on analytics
----------------------------+-----------+-------------------+--------------------
Meta refresh - 0            | Firefox 3 | Blank referrer    | Lost data
                            | IE8       | Blank referrer    | Lost data
                            | Opera 9   | Internal referrer | Lost data
Javascript:location.href    | Firefox 3 | Internal referrer | Lost data
                            | IE8       | Blank referrer    | Lost data
                            | Opera 9   | Internal referrer | Lost data
Javascript:location.replace | Firefox 3 | Internal referrer | Lost data
                            | IE8       | Blank referrer    | Lost data
                            | Opera 9   | Internal referrer | Lost data
Server-side 301             | Firefox 3 | Original referrer | 
                            | IE8       | Original referrer | 
                            | Opera 9   | Original referrer | 
Server-side 302             | Firefox 3 | Original referrer | 
                            | IE8       | Original referrer | 
                            | Opera 9   | Original referrer | 
Server-side 301 - chained   | Firefox 3 | Original referrer | 
                            | IE8       | Original referrer | 
                            | Opera 9   | Original referrer | 
Server-side 302 - chained   | Firefox 3 | Original referrer | 
                            | IE8       | Original referrer | 
                            | Opera 9   | Original referrer | 
```

[上表的原始链接。](http://www.receptional.com/blog/how-to-redirect-and-keep-referrer-data-for-web-analytics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:40:46.467

您不能依赖客户端始终为您设置标头，但您可以传递一个丢弃参数，然后使用 Google Analytics（分析）进行跟踪。例如：

```
header("Location: http://siteb.com/somepage?source=sitea"); 
```

# vb.net - Gradient fill in VB.NET

> ID：13992674
> 
> 赞同：6
> 
> 时间：2012-12-21T15:21:09.443
> 
> 标签：vb.net, graphics, gdi+

Why in the world would the following simple code fail? This code always fills the path with the gradient from left to right, no matter which value of LinearGradientMode I use. graphPath is a GraphicPath object created elsewhere (basically a rounded rectangle):

```
Dim gradBrush as New LinearGradientBrush(rect, color1, color2, LinearGradientMode.Vertical)
graphics.FillPath(gradBrush, graphPath) 
```

## UPDATE

To everyone's wonder, even this fails (draws horizontally). Simply create a new VB.NET WinForms project and paste the following code in Form1's Paint event:

```
 Private Sub Form1_Paint(sender As System.Object, e As System.Windows.Forms.PaintEventArgs) Handles MyBase.Paint
    Dim gradBrush As New LinearGradientBrush(Me.ClientRectangle, Color.Red, Color.White, LinearGradientMode.BackwardDiagonal)
    e.Graphics.FillRectangle(gradBrush, Me.ClientRectangle)
  End Sub 
```

So I don't think this has anything to do with the path construction.

## NOTE

I'll be glad if someone could just confirm this issue happens on their machines too, so that we know it is something with GDI+ and not my code. Just for reference, I have tried it on a WinXP VM and Win7 machine (32-bit, Aero mode) with .NET Fx 4.0 Client Profile and Full version.

# FINALLY

First of all, thanks to all the great folks who helped me discover it. The problem was that I was editing someone else's code who had created an enum named exactly LinearGradientMode (to support the None option that he needed for his purpose). Now when he sent the object of this enum to LinearGradientBrush's constructor, C# compiler would think that the closest matching overload was the one that take "angle" parameter (this is my theory), and would convert the value of my gradient mode to equivalent int (0, 1, 2, 3 and 4 are the values) and call that constructor, resulting in a (nearly) horizontal gradient in each case.

Thanks again to everyone who participated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:41:00.270

确保您的矩形已添加到 GraphicsPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:21:04.230

我通过手动为每个渐变模式创建起点和终点，然后使用构造函数的两点重载来解决这个问题（错误？）。如果有人可能感兴趣，这是代码：

```
 Dim st, en As Point
  Select Case mGradientMode
      Case LinearGradientMode.Vertical
        st = New Point(CInt(rect.X + rect.Width / 2), rect.Y)
        en = New Point(CInt(rect.X + rect.Width / 2), rect.Bottom)
      Case LinearGradientMode.Horizontal
        st = New Point(rect.X, CInt(rect.Y + rect.Height / 2))
        en = New Point(rect.Right, CInt(rect.Y + rect.Height / 2))
      Case LinearGradientMode.ForwardDiagonal
        st = rect.Location
        en = New Point(rect.Right, rect.Bottom)
      Case LinearGradientMode.BackwardDiagonal
        st = New Point(rect.Right, rect.Bottom)
        en = rect.Location
  End Select

  If Me.mGradientMode = LinearGradientMode.None Then
      gradBrush = New LinearGradientBrush(st, en, color1, color1)
  Else
      gradBrush = New LinearGradientBrush(st, en, color1, color2)
  End If 
```

在将此标记为答案之前，我将等待更多输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-03T23:05:27.220

测试这段代码：

```
Me.CreateGraphics.FillRectangle(New Drawing2D.LinearGradientBrush(Me.ClientRectangle, Color.Blue, Color.Black, Drawing2D.LinearGradientMode.BackwardDiagonal), Me.ClientRectangle) 
```

# gridview - Retrieve Rows Selected Using CheckBox in an ASP.NET GridView

> ID：13992677
> 
> 赞同：0
> 
> 时间：2012-12-21T15:21:14.363
> 
> 标签：gridview, checkbox, insert, bulkinsert

I have a gridview which is populated with UserId, serviceNo, forename and surname on page load. The page has an id which is a querystring (NewTrain) which i bulk insert into my DB table along with the different users (UserId). This I can already do and works. However what I would now like to do is only insert the rows of the GridView were a checkbox is checked!

I have been trying thid for a while and have continually run into problems.

I have tried two different scenerios but have encountered the same results

can anybody please help?

1.

```
 Protected Sub btnAttend_Click(ByVal sender As Object, ByVal e As EventArgs)

        Dim myTrain As String = Request.QueryString("NewTrainId")

        If myTrain IsNot Nothing Then
            Dim strQuery As String
            Dim cmd As SqlCommand

            For x As Integer = 0 To GridView1.Rows.Count - 1
                Dim chkBox As CheckBox = DirectCast(GridView1.Rows(x).FindControl("RowLevelCheckBox"), CheckBox)

                If chkBox.Checked Then
                    Dim lblUsr2 As HtmlInputHidden = CType(GridView1.Rows(x).FindControl("txtUsr"), HtmlInputHidden)
                    Dim userID As Guid = New Guid(lblUsr2.Value().ToString)
                    Dim HidTrainId As HtmlInputHidden = FindControlRecursive(MultiTabs, "txtTrainId")

                    strQuery = "Insert into userAssessmentTbl(tt_id, UserId)values(@NewTrainId, @UserId)"

                    cmd = New SqlCommand(strQuery)
                    cmd.Parameters.AddWithValue("@UserId", userID)
                    cmd.Parameters.AddWithValue("@NewTrainId", myTrain)

                    InsertUpdateData(cmd)

                End If

            Next
        End If

    End Sub 
```

2.

```
Protected Sub btnAttend_Click(ByVal sender As Object, ByVal e As EventArgs)

        Dim myTrain As String = Request.QueryString("NewTrainId")

        If myTrain IsNot Nothing Then
            Dim strQuery As String
            Dim cmd As SqlCommand

            For Each rowItem As GridViewRow In GridView1.Rows

                Dim chkBox As CheckBox = DirectCast(rowItem.FindControl("RowLevelCheckBox"), CheckBox)
                If chkBox IsNot Nothing AndAlso chkBox.Checked Then

                    Dim lblUsr2 As HtmlInputHidden = CType(rowItem.FindControl("txtUsr"), HtmlInputHidden)
                    Dim userID As Guid = New Guid(lblUsr2.Value().ToString)
                    Dim HidTrainId As HtmlInputHidden = FindControlRecursive(MultiTabs, "txtTrainId")

                    strQuery = "Insert into userAssessmentTbl(tt_id, UserId)values(@NewTrainId, @UserId)"

                    cmd = New SqlCommand(strQuery)
                    cmd.Parameters.AddWithValue("@UserId", userID)
                    cmd.Parameters.AddWithValue("@NewTrainId", myTrain)

                    InsertUpdateData(cmd)

                End If

            Next
        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:44:26.557

这是在 C# 中，但您可以将其转换为 vb.net：

```
 foreach ( ListItem li in your_ check_box_list.Items )
            {

                if (li.Selected == true)
                {
                    // execute code 
                }

            } 
```

我在 vb.net 中发现了这个，不确定它是否确实有效：

```
For Each selecteditem As [Object] In Listbx.SelectedItems
//Your code on each item
Next 
```

# android - 音乐无法在 android 中播放

> ID：13992678
> 
> 赞同：0
> 
> 时间：2012-12-21T15:21:15.087
> 
> 标签：android, sharedpreferences, android-contentprovider

我正在创建一个应用程序，我将一个文件存储在名为 alarm_tone.mp3 的原始文件夹中

我把它保存在一个

```
 SharedPreferences shared=getSharedPreferences(PREFS_NAME,0);
     SharedPreferences.Editor editor=shared.edit();
     editor.putString("music_uri", "android.resource://" + "org.riteshmapsapplicationdemo/" + R.raw.alarm_tone);
    editor.commit(); 
```

在其他活动中，我正在使用代码段播放这种音调

```
player=new MediaPlayer();
try {
    player.setDataSource(pref.getString("music_uri", null));
    player.prepare();
    player.start();
} catch (IllegalArgumentException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IllegalStateException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

它显示 Media.prepare() failed java.io.IOException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:33:33.293

将您的代码更改为：

```
 SharedPreferences shared=getSharedPreferences(PREFS_NAME,0);
     SharedPreferences.Editor editor=shared.edit();
     editor.putString("music_uri", "android.resource://" +
                          this.getPackageName() + "/raw/alarm_tone");
    editor.commit(); 
```

更改播放代码段

```
player=new MediaPlayer();
try {
   SharedPreferences pref=getSharedPreferences(PREFS_NAME,0);
   String struri=pref.getString("music_uri", null);
  if(struri !=null){
      Uri mUri = Uri.parse(struri);
         player.setDataSource(mUri);
         player.prepare();
         player.start();
   }
  //your code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:30:31.180

你应该解析 Uri：

```
player.setDataSource(Uri.parse(pref.getString("music_uri", null))); 
```

# ruby-on-rails - 用于测试 Rails 应用程序的 Rspec 选项

> ID：13992683
> 
> 赞同：5
> 
> 时间：2012-12-21T15:21:28.083
> 
> 标签：ruby-on-rails, rspec, spork, poltergeist

运行规范时，我也得到了数据库事务的所有输出：

```
lee$ rspec spec/mailers/
Connecting to database specified by database.yml
   (0.1ms)  BEGIN
  User Exists (0.7ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'user@example.name' LIMIT 1
  User Exists (0.4ms)  SELECT 1 AS one FROM "users" WHERE "users"."auth_token" = '8bF72xsaxsSsidLvA1uD9Q' LIMIT 1
  SQL (2.3ms)  INSERT INTO "users" ("auth_token", "created_at", "email", "first_name", "last_name", "password_digest", "password_reset_token", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["auth_token", "8bF70xsaEsSsidLvA1uD9Q"], ["created_at", Fri, 21 Dec 2012 14:55:40 UTC +00:00], ["email", "michale@swift.name"], ["first_name", nil], ["last_name", nil], ["password_digest", "$2a$10$KXKLprkU/Irp30LoB8M.DuSwLV9bq9P3C7hIAO4yNShPrDE.NmHU."], ["password_reset_token", nil], ["updated_at", Fri, 21 Dec 2012 14:55:40 UTC +00:00]]
   (1.6ms)  COMMIT
  Rendered user_mailer/customer_sigup_confirmation.html.erb (0.8ms)
  Rendered user_mailer/customer_sigup_confirmation.text.erb (0.4ms)
.

Finished in 0.41419 seconds
1 example, 0 failures

Randomized with seed 6071 
```

这噪音太大了！**如何禁用/减少它？**

如果有帮助，下面是我的 spec_helper。

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
# require 'spork/ext/ruby-debug'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.

  # This file is copied to spec/ when you run 'rails generate rspec:install'
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rspec'
  require 'capybara/poltergeist'

  Capybara.javascript_driver = :poltergeist

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    # ## Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

    # Run specs in random order to surface order dependencies. If you find an
    # order dependency and want to debug it, you can fix the order by providing
    # the seed, which is printed after each run.
    #     --seed 1234
    config.order = "random"

    # Include Factory Girl syntax to simplify calls to factories
    config.include FactoryGirl::Syntax::Methods

    # Add Support Modules
    # config.include LoginMacros
    config.include MailerMacros
    config.before(:each) { reset_email }

    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.filter_run :focus => true
    config.run_all_when_everything_filtered = true

  end

end

Spork.each_run do
  # This code will be run each time you run your specs.
  FactoryGirl.reload

  class ActiveRecord::Base
    mattr_accessor :shared_connection
    @@shared_connection = nil

    def self.connection
      @@shared_connection || retrieve_connection
    end
  end

  # Forces all threads to share the same connection. This works on
  # Capybara because it starts the web server in a thread.
  ActiveRecord::Base.shared_connection = ActiveRecord::Base.connection

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T22:00:30.277

在用于测试的环境初始化程序（config/environments/test.rb）中，[配置](http://guides.rubyonrails.org/configuring.html)正确的记录器级别：

`config.logger.level = Logger::FATAL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:36:10.200

部分问题可能源于`Poltergeist`被用作`Capybara`javascript 驱动程序。我在使用时遇到了类似的问题`capybara-webkit`。尝试使用以下语法：

```
Capybara.register_driver :poltergeist_silent do |app|
  Capybara::Poltergeist::Driver.new(app, :logger => nil)
end
Capybara.javascript_driver = :poltergeist_silent 
```

这将进入您的`spec_helper`，替换这一行：`Capybara.javascript_driver = :poltergeist`。这可能会阻止涉及渲染的日志消息。

我感觉有关数据库的消息可能来自`Spork`，因为我已经`Rspec`广泛使用了`Spork`，但我没有看到这些消息。您能否尝试检查是否有`Spork`禁用日志/标准输出消息的选项？

# xtext - 用 XText 逐行匹配文件中的“文本”

> ID：13992686
> 
> 赞同：4
> 
> 时间：2012-12-21T15:21:46.023
> 
> 标签：xtext, bnf

我尝试为配置文件编写 Xtext BNF（以`.ini`扩展名已知）

例如，我想成功解析

```
[Section1]
a = Easy123
b = This *is* valid too

[Section_2]
c = Voilà # inline comments are ignored 
```

我的问题是匹配属性值（'=' 右侧的内容）。

`ID`如果属性与终端匹配（例如`a = Easy123`），我当前的语法有效。

```
PropertyFile hidden(SL_COMMENT, WS):
    sections+=Section*;

Section:
    '[' name=ID ']'
    (NEWLINE properties+=Property)+
    NEWLINE+;

Property:
    name=ID (':' | '=') value=ID ';'?;

terminal WS:
    (' ' | '\t')+;

terminal NEWLINE:
// New line on DOS or Unix 
    '\r'? '\n';

terminal ID:
    ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' | '_' | '-' | '0'..'9')*;

terminal SL_COMMENT:
// Single line comment
    '#' !('\n' | '\r')*; 
```

我不知道如何概括语法以匹配任何文本（例如`c = Voilà`）。

我当然需要引入一个新的终端属性：name=ID (':' | '=') value=TEXT ';'?;

问题是：*我应该如何定义这个`TEXT`终端？*

我试过了

*   `terminal TEXT: ANY_OTHER+;` 这引发了一个警告

    > 以下标记定义永远无法匹配，因为先前的标记匹配相同的输入：RULE_INT,RULE_STRING,RULE_ML_COMMENT,RULE_ANY_OTHER

    （我认为没关系）。

    **解析**失败****

     **> 所需的循环 (...)+ 与输入“à”处的任何内容都不匹配** 
***   `terminal TEXT: !('\r'|'\n'|'#')+;` 这引发了一个警告

    > 以下标记定义永远无法匹配，因为先前的标记匹配相同的输入：RULE_INT

    （我认为没关系）。

    **解析**失败****

     **> [Section1] 缺少 EOF** ***   `terminal TEXT: ('!'|'$'..'~');`（涵盖了大多数字符，除了`#`和`"`）在生成词法分析器/解析器期间没有警告。但是解析**失败**

    > 期望 RULE_TEXT 的不匹配输入“Easy123”
    > 
    > 外部输入 'This' 期望 RULE_TEXT
    > 
    > 所需的循环 (...)+ 与“is”处的任何内容都不匹配**** 

 ****感谢您的帮助（我希望这个语法对其他人也有用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:19:49.653

这个语法可以解决问题：

```
grammar org.xtext.example.mydsl.MyDsl hidden(SL_COMMENT, WS)

generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"
import "http://www.eclipse.org/emf/2002/Ecore"

PropertyFile:
    sections+=Section*;

Section:
    '[' name=ID ']' 
    (NEWLINE+ properties+=Property)+
    NEWLINE+;

Property:
    name=ID value=PROPERTY_VALUE;

terminal PROPERTY_VALUE: (':' | '=') !('\n' | '\r')*;

terminal WS:
    (' ' | '\t')+;

terminal NEWLINE:
// New line on DOS or Unix 
    '\r'? '\n';

terminal ID:
    ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' | '_' | '-' | '0'..'9')*;

terminal SL_COMMENT:
// Single line comment
    '#' !('\n' | '\r')*; 
```

关键是，您不要试图仅在语法中涵盖完整的语义，还要考虑其他服务。终端规则`PROPERTY_VALUE`使用完整的值，包括前导赋值和可选的尾随分号。

现在只需为该语言注册一个值转换器服务并处理输入的无关紧要部分，那里：

```
import org.eclipse.xtext.conversion.IValueConverter;
import org.eclipse.xtext.conversion.ValueConverter;
import org.eclipse.xtext.conversion.ValueConverterException;
import org.eclipse.xtext.conversion.impl.AbstractDeclarativeValueConverterService;
import org.eclipse.xtext.conversion.impl.AbstractIDValueConverter;
import org.eclipse.xtext.conversion.impl.AbstractLexerBasedConverter;
import org.eclipse.xtext.nodemodel.INode;
import org.eclipse.xtext.util.Strings;

import com.google.inject.Inject;

public class PropertyConverters extends AbstractDeclarativeValueConverterService {
    @Inject
    private AbstractIDValueConverter idValueConverter;

    @ValueConverter(rule = "ID")
    public IValueConverter<String> ID() {
        return idValueConverter;
    }

    @Inject
    private PropertyValueConverter propertyValueConverter;

    @ValueConverter(rule = "PROPERTY_VALUE")
    public IValueConverter<String> PropertyValue() {
        return propertyValueConverter;
    }

    public static class PropertyValueConverter extends AbstractLexerBasedConverter<String> {

        @Override
        protected String toEscapedString(String value) {
            return " = " + Strings.convertToJavaString(value, false);
        }

        public String toValue(String string, INode node) {
            if (string == null)
                return null;
            try {
                String value = string.substring(1).trim();
                if (value.endsWith(";")) {
                    value = value.substring(0, value.length() - 1);
                }
                return value;
            } catch (IllegalArgumentException e) {
                throw new ValueConverterException(e.getMessage(), node, e);
            }
        }
    }
} 
```

在您像这样在运行时模块中注册服务后，以下测试用例将成功：

```
@Override
public Class<? extends IValueConverterService> bindIValueConverterService() {
    return PropertyConverters.class;
} 
```

测试用例：

```
import org.junit.runner.RunWith
import org.eclipse.xtext.junit4.XtextRunner
import org.xtext.example.mydsl.MyDslInjectorProvider
import org.eclipse.xtext.junit4.InjectWith
import org.junit.Test
import org.eclipse.xtext.junit4.util.ParseHelper
import com.google.inject.Inject
import org.xtext.example.mydsl.myDsl.PropertyFile
import static org.junit.Assert.*

@RunWith(typeof(XtextRunner))
@InjectWith(typeof(MyDslInjectorProvider))
class ParserTest {

    @Inject
    ParseHelper<PropertyFile> helper

    @Test
    def void testSample() {
        val file = helper.parse('''
            [Section1]
            a = Easy123
            b : This *is* valid too;

            [Section_2]
            # comment
            c = Voilà # inline comments are ignored
        ''')
        assertEquals(2, file.sections.size)
        val section1 = file.sections.head
        assertEquals(2, section1.properties.size)
        assertEquals("a", section1.properties.head.name)
        assertEquals("Easy123", section1.properties.head.value)
        assertEquals("b", section1.properties.last.name)
        assertEquals("This *is* valid too", section1.properties.last.value)

        val section2 = file.sections.last
        assertEquals(1, section2.properties.size)
        assertEquals("Voilà # inline comments are ignored", section2.properties.head.value)
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:29:55.330

解析这样的格式的问题（或无论如何都是一个问题）是，由于文本部分可能包含`=`字符，因此一行 like`foo = bar`将被解释为单个 TEXT 标记，而不是 ID，后跟一个“=”，然后是一个`TEXT`。`=`如果不禁止（或要求转义）文本部分中的字符，我无法避免这种情况。

如果这不是一个选项，我认为，唯一的解决方案是制作一个`LINE`与整行匹配的令牌类型，然后自己将其拆开。为此，您可以从语法中删除`TEXT`和`ID`替换它们，并将它们替换为与`LINE`下一个换行符或注释符号匹配的所有内容并且必须以有效 ID 开头的标记类型。所以是这样的：

```
LINE :
    ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' | '_' | '-' | '0'..'9')*
    WS* '=' WS*
    !('\r' | '\n' | '#')+
; 
```

这个令牌基本上会取代你的`Property`规则。

当然，这是一个相当不令人满意的解决方案，因为它会将整行作为字符串提供给您，您仍然必须自己将其分开以将 ID 与文本部分分开。它还可以防止您突出显示 ID 部分或 = 符号，因为整行是一个标记，并且您不能突出显示标记的一部分（据我所知）。总的来说，与根本不使用相比，这并没有给你带来太多好处`XText`，但我没有看到更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:54:02.787

作为一种解决方法，我已经改变了

```
Property:
    name=ID ':' value=ID ';'?; 
```

现在，当然，`=`不再冲突了，但这肯定不是一个好的解决方案，因为属性通常可以定义为`name=value`

**编辑**：实际上，我的输入是一个特定的属性文件，并且属性是事先知道的。

我的代码现在看起来像

```
Section:
    '[' name=ID ']'
    (NEWLINE (properties+=AbstractProperty)?)+;

AbstractProperty:
    ADef
        | BDef

ADef:
    'A' (':'|'=') ID;

BDef:
    'B' (':'|'=') Float; 
```

还有一个额外的好处，属性名称被称为关键字，并被着色。但是，自动完成只建议 '[' :(****

# python-3.x - 代码和 shell 中显示的内容不同

> ID：13992687
> 
> 赞同：1
> 
> 时间：2012-12-21T15:21:46.160
> 
> 标签：python-3.x

我认为解释这一点的最好方法是发布我的代码，以及来自 shell 的结果。我是 Python 新手（使用 3.3），而且一般都在编码，所以我确定我只是错过了一些非常简单的东西。

这是我的代码：

```
def menu():
    global temp
    global temp_num

    temp = input('Enter a temperature to convert:\n (ex. 32F) ->  ')
    temp_select = temp[-1]
    temp_num = int(temp[:-1])

    if temp_select == 'F' or 'f':
        return Fahr()
    elif temp_select == 'C' or 'c':
        return Cels()
    elif temp_select == 'K' or 'k':
        return Kelv()
    else:
        print('Please make a valid selection')
        menu()

def Fahr():
    ''' Converts selected temperature from Fahrenheit to Celsius, Kelvin, or both.'''

    selection = input('Convert to (C)elsius, (K)elvin, or (B)oth? -> ')
    to_cels = round((5/9) * (temp_num - 32), 1)
    to_kelv = round(5/9 * (temp_num - 32) + 273, 1)

    if selection == 'C' or 'c':
        print(temp_num, 'degrees Fahrenheit =', to_cels, 'degrees Celsius.\n')
        exitapp()
    elif selection == 'K' or 'k':
        print(temp_num, 'degrees Fahrenheit =', to_kelv, 'degrees Kelvin.\n')
        exitapp()
    elif selection == 'B' or 'b':
        print(temp_num, 'degrees Fahrenheit =', to_cels, 'degrees Celsius and', to_kelv, 'degrees Kelvin.\n')
        exitapp()
    else:
        print('Please make a valid selection')
        Fahr() 
```

对于摄氏温度和开尔文温度，我还有另外 2 个功能。你会在 shell 中看到我的结果的问题。

这是我得到的：

```
Enter a temperature to convert:
 (ex. 32F) ->  32C
Convert to (C)elsius, (K)elvin, or (B)oth? -> b
32 degrees Fahrenheit = 0.0 degrees Celsius.

Exit the program?
 Enter "y" or "n": 
```

毫无疑问，它总是从华氏温度转换为摄氏温度。每次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:26:13.270

你不能像你所做的那样缩写条件。这：

```
if temp_select == 'F' or 'f':
    return Fahr() 
```

与此相同：

```
if temp_select == 'F':
    return Fahr()
if 'f':
    return Fahr() 
```

`or`和的每一面`and`都是独立评估的，并且`'f'`本身总是正确的。您需要为每个条件使用完整的短语。

```
if temp_select == 'F' or temp_select == 'f':
    return Fahr() 
```

# ruby - JewleryBox OSX 10.6.8

> ID：13992689
> 
> 赞同：0
> 
> 时间：2012-12-21T15:21:56.163
> 
> 标签：ruby, rvm

Where to find JewleryBox (ruby rvm gui) that works on 10.6.8?

Current version on web site [http://jewelrybox.unfiniti.com/](http://jewelrybox.unfiniti.com/) claims that it works for 10.6.8 but when started notes that it requires OSX 10.7.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:34:39.187

已放弃对 10.6 的支持，以便为在较新版本的 OS X 中使用更好的 API 铺平道路。我可以给您一份在 10.6 v1.3 上运行的最新版本的副本。请记住，您将无法将 RVM 升级到 1.16 左右，因为在 RVM 中引入了破坏 JewelryBox 的更改。这些修复是在 v1.4 中添加的，仅适用于 10.7 或更高版本。

ping 我@remear 提醒我，因为我需要挖掘旧版本并将其放置在您可以下载它的位置。

# .net-4.0 - Assembly.LoadFrom BadImageFormatException - different behavior in .NET 4.0 and 4.5 (possibly undocumented)

> ID：13992696
> 
> 赞同：8
> 
> 时间：2012-12-21T15:22:12.327
> 
> 标签：.net-4.0, .net-4.5

According to [MSDN documentation](http://msdn.microsoft.com/en-us/library/1009fa28%28v=vs.110%29.aspx),

```
public static Assembly LoadFrom(string assemblyFile) 
```

throws `BadImageFormatException` if

```
assemblyFile is not a valid assembly.
-or-
Version 2.0 or later of the common language runtime is currently loaded 
and assemblyFile was compiled with a later version. 
```

Actually, there is one extra case - loading assembly that is built for x86 from assembly that runs in x64 mode. Maybe it is included in "not a valid assembly" statement, I don't know. But this is reasonable cause of exception.

Ok, but in .NET 4.5 it doesn't! I have a .NET 4.5 WPF app, that loads different appliations for some reason. It is building for Any CPU and I'm starting it on x64 Win 7\. I've been testing it on one executable, that is built for .NET 4.0 x86, and it worked fine. But when I switched my app to .NET 4.0 it began to crash on `Assembly.Load` method!

So, my question is, am I missing something? If not, then how did they do that - loading x86 assembly from x64 process in .NET 4.5? I'm lacking some understanding at this point.

**Update**

Thanks to Hans Passant, I've figured out my mistake. Actually the behavior of `Assembly.Load` is **no different**. It turned out, I didn't notice `Prefer 32-bit` option in project settings (or Prefer32Bit tag in .csproj file). That's why my process in .NET 4.5 [ran in a 32-bit mode](http://blogs.microsoft.co.il/blogs/sasha/archive/2012/04/04/what-anycpu-really-means-as-of-net-4-5-and-visual-studio-11.aspx). This setting was **true** when I created WPF .NET 4.5 project. Then, when I swithced to .NET 4.0 it became inactive because there was no such an option in .NET 4.0\. And when I switched back to .NET 4.5 it became **false**, which is so, I guess, for compatibility purpose.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:23:09.960

让我们快速清除一个假设，在安装了 .NET 4.5 的机器上不可能有不同的行为。以 4.0 为目标在运行时没有任何区别。唯一要做的就是选择一组不同的*引用程序集*，它们可以防止您意外使用 .NET 4.5 上可用但 .NET 4.0 上不可用的类。

无法在同一台机器上同时安装 4.0 和 4.5。.NET 4.5 不是 .NET 框架的并行版本，就像 3.5 和 4.0 是并行的。安装 4.5*会替换*已安装的 4.0 版本。CLR、抖动、所有运行时程序集以及 C# 编译器。

最好在这里关注您的 EXE 项目的平台目标设置，这是选择进程位数的设置。您可能犯的错误是忘记了 Debug 与 Release 版本的设置可能不同。并假设 Build + Configuration Manager 中的“活动解决方案平台”组合框有任何效果。它没有，只有项目 + 属性、构建选项卡、平台目标设置很重要。这是很多程序员都陷入的一个非常尴尬的陷阱。

# python - 如何管理程序周转时间？

> ID：13992709
> 
> 赞同：2
> 
> 时间：2012-12-21T15:22:42.717
> 
> 标签：python, performance

我刚刚编写了一个旨在 24/7 运行以更新某些文件的脚本。但是，如果更新一个文件需要 3 分钟，那么更新 100 个文件需要 300 分钟。

是否可以运行 n 个脚本实例来管理 n 个单独的文件以加快周转时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:25:00.513

是的，有可能。使用[multiprocessing](http://docs.python.org/3/library/multiprocessing.html)模块启动多个并发进程。这样做的好处是您不会因为手册页中解释的全局解释器锁和线程而遇到问题。手册页包含使脚本并行执行所需的所有示例。当然，如果进程不必进行交互，则此方法效果最好，正如您的示例所暗示的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:52:51.300

我建议您先了解是否有任何方法可以减少单线程中的 3 分钟。[*这里演示了*](https://stackoverflow.com/a/4299378/23771)我用来发现加速机会的方法。

这也将告诉您是否纯粹受 I/O 限制。如果您完全受 I/O 限制，并且所有文件都在一个磁盘上，那么并行性将无济于事。在这种情况下，可能将文件存储在固态驱动器上会有所帮助。

另一方面，如果你受 CPU 限制，并行性会有所帮助，正如@hochl 所说。无论如何，找到加速机会并修复它们。我从来没有见过没有一个或几个的大型程序。这会给你一个加速因素，并行性会给你另一个，总加速将是这两个因素的乘积。

# javascript - How to disable arrow keys for dropdown/selector element?

> ID：13992715
> 
> 赞同：3
> 
> 时间：2012-12-21T15:23:08.657
> 
> 标签：javascript, jquery

What is a good jquery/javascript approach to prevent a user from using the up and down arrow keys to select options in a dropdown box (i.e. to force the user to only use the mouse to select menu options)? Thanks!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T15:26:48.940

# #1。不要那样做，[^(它会影响用户体验)]

但如果你是：

```
$('select').on('keydown', function(e){
    if(e.keyCode === 38 || e.keyCode === 40) { //up or down
        e.preventDefault();
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-08T21:53:07.203

**对于最新的 Firefox 和 Chrome**（即任何人？;-)

我已经修改了一些代码来根据需要模拟禁用向上和向下箭头键。我必须对我的应用程序的 arrowUp / pageUp 和 arrowDown / pageDown 键进行类似操作，以允许自定义键盘导航（我保留了用于垂直菜单导航的 arrowLeft / arrowRight 键功能）。请注意，我应用了 setTimeout，这似乎是 Firefox (latest) 所需要的：

```
$(document).on('keydown', 'select', function (e) {
var optsel = $(this).find('option:selected').val();
if ( (e.which == 38 || e.which === 40) ) {
setTimeout(function(){$('select option[value="' + optsel +'"]').prop("selected", true)}, 0);
}
}); 
```

诀窍是将选择菜单中选择的最后一个值保存为变量，然后按照 Firefox 的要求（至少）使用 setTimeout 方法调用它。

# java - 用jsoup深度遍历HTML

> ID：13992718
> 
> 赞同：0
> 
> 时间：2012-12-21T15:23:28.060
> 
> 标签：java, css-selectors, html-parsing, jsoup

我正在尝试从页面中抓取一些数据，但我是 jsoup 的初学者 - 而不是经验丰富的 java 开发人员:)

html示例是：

```
<tr class="divider">
    <td class="betona text">hello1</td>
    <td>1 712 000</td>
    <td>3 661 000</td>
    <td>1 727 000</td>
    <td>1 011 000</td>
    <td>14 813 000</td>
</tr>
<tr>
    <td class="text">hello2</td>
    <td>1,84</td>
    <td>4,85</td>
    <td>2,29</td>
    <td>1,34</td>
    <td>19,61</td>
</tr>
<tr>
    <td class="text">hello3</td>
    <td>931 739 034</td>
    <td>755 407 422</td>
    <td>755 407 422</td>
    <td>755 407 422</td>
    <td>755 407 422</td>
</tr>
<tr>
      <td>&nbsp;</td>
</tr>
<tr>
    <th class="text">hello4</th>
    <th>2011</th>
    <th>2010</th>
    <th>2009</th>
    <th>2008</th>
    <th>2007</th>
</tr>
<tr>
    <td class="text">hello5</td>
    <td></td>
    <td></td>
    <td>8 800 000</td>
    <td>9 302 000</td>
    <td>9 312 000</td>
</tr> 
```

`hello1 hello2...`我可以使用以下代码获取列表显示等 - 但是`hello4`如果这是我唯一需要的，我如何才能在下面获取这些数据？

```
931 739 034

755 407 422

755 407 422

755 407 422

755 407 422 
```

我目前使用的java是这样的：

```
Document document = Jsoup.connect(url).get();

Elements data = document.select("td[class=text]");
System.out.println("datatest1: " + data.first() + "\n");
for (Element dat : data) {
    System.out.println("datatest2: " + dat.text()); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:30:45.183

根据目前给出的 HTML 代码，它是`<th>`没有`class="text"`.

所以，这应该这样做：

```
Elements data = document.select("th:not(.text)"); 
```

### 也可以看看：

*   [Jsoup 选择器语法](http://jsoup.org/cookbook/extracting-data/selector-syntax)
*   [Jsoup `Selector`API](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)

# c# - 实体框架 2012 中的 LINQ 表达式中未显示类型信息

> ID：13992724
> 
> 赞同：0
> 
> 时间：2012-12-21T15:23:43.663
> 
> 标签：c#, linq, entity-framework-4, linq-to-entities

我是 Entity Framework 的新手，但我试图亲身体验它。在浏览了许多博客之后，我开始在我的项目中实现它，但我遇到了以下问题。

我有 VS 2012 并且正在开发 4.0 版的项目。
我在我的项目中添加了`DataModel.edmx`文件，这又创建了 4 个文件 `DataModel.Context.tt , DataModel.Designer.cs , DataModel.edmx.diagram , DataModel.tt`

到目前为止看起来还不错。但是当我尝试访问我的 Linq 查询中的表信息时。Intellisense 没有显示任何内容。

```
var context = new DataModelEntities();
var invoice = from c in context.Invoice select c.{//NOTHING SHOWING HERE}; 
```

DataModelEntities 类（DataModel.Context.cs）看起来像

```
namespace MySpace.Objects.DataModel
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;

    public partial class DataModelEntities : DbContext
    {
        public DataModelEntities()
            : base("name=KKEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<Invoice> Invoice { get; set; }
        public DbSet<InvoiceContracts> InvoiceContracts { get; set; }
    }
} 
```

发票类如下所示：

```
//----------- 
// <auto-generated> 
// This code was generated from a template. 
// 
// Manual changes to this file may cause unexpected behavior in your application. 
// Manual changes to this file will be overwritten if the code is regenerated. 
// </auto-generated> 
//-------- 
namespace MySpace.Objects.DataModel 
{ 
  using System; 
  using System.Collections.Generic; 

  public partial class Invoice
  {
     public int ID { get; set; }
     public int POID { get; set; }
  } 
} 
```

如果我遗漏了什么，请告诉我。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:30:54.993

这只是一个查询规范（类型`IQueryable<Invoice>`）：

```
var invoiceQuery = from c in context.Invoice select c; 
```

（`invoiceQuery`是比`invoice`这里更好的名称。）它不是执行查询的结果，并且此时尚未将查询发送到数据库。要获得查询结果，您必须应用导致查询执行的运算符，例如`ToList()`or`FirstOrDefault()`等​​：

```
var invoices = invoiceQuery.ToList(); 
```

这是类型`List<Invoice>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:28:42.173

改名

```
public DbSet<Invoice> Invoice { get; set; } 
```

至

```
 public DbSet<Invoice> Invoices { get; set; } 
```

然后尝试

```
var invoice =  c in context.Invoices.Select( c=>c.HERE) 
```

# java - 如何在spring集成中获取文件的完整路径？

> ID：13992726
> 
> 赞同：1
> 
> 时间：2012-12-21T15:23:47.267
> 
> 标签：java, spring, spring-integration

我是 Spring 集成的新手。我有以下代码。我已将文本文件放在系统中的一个文件夹中，并且已配置入站通道适配器，如下所示：

```
<int-file:inbound-channel-adapter channel="filesInChannel"
    directory="file:${java.io.tmpdir}/input" auto-create-directory="true"  >

    <int:poller id="poller" fixed-delay="1000" />
</int-file:inbound-channel-adapter>

<int:channel id="filesInChannel"> </int:channel> 
```

我的问题是来自频道（`filesInChannel`）我怎样才能知道文件名，包括它的绝对路径？

例如：我的文件位于`C:\someFolder\some.txt`

从频道我应该得到上面的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:59:02.887

一旦你有了文件名，你想做什么？

消息有效负载是 a `java.io.File`，因此您可以简单地使用表达式`payload.absolutePath`，例如：

```
<header-enricher...>
   <header name="foo" expression="payload.absolutePath" />
</header-enricher> 
```

# ruby - NoMethodError: undefined method `check_url' for nil:NilClass

> ID：13992729
> 
> 赞同：2
> 
> 时间：2012-12-21T15:23:58.297
> 
> 标签：ruby, testing, cucumber, webdriver, watir

I have a module which i have included into my main class:

```
module GenericPage

  def check_url=(page)
    puts(page)
  end

end 
```

I create a new instance of my class, which I am calling in Cucumber

```
require_relative '../../../support/helper_methods'

class FindYourDealerPage
  include GenericPage

  def initialize(browser)
    @browser = browser
  end

def search_location=(location)
  @browser.text_field(:id, 'findDealerSearchField').set(location)
  @browser.send_keys :tab, :enter
end 
```

Cucumber:

```
 Given /^I am on the find your dealer page$/ do

    @browser.goto 'www.google.com'
    @dealer.check_url('www.google.com')
    @dealer = FindYourDealerPage.new(@browser)
    end

    When /^I select a desired preference$/ do

    end

    Then /^my filtered selection should be submitted$/ do

    end 
```

When this is run I get an error `NoMethodError: undefined method`check_url' for nil:NilClass` where am I going wrong, forget what is in the method for the moment I just would like to know why I receive this error

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:29:49.400

The problem, I think, is here

```
@dealer.check_url('www.google.com')
@dealer = FindYourDealerPage.new(@browser) 
```

Notice how you call `check_url` before you assign `@dealer`... meaning that `@dealer` is still `nil` when you make the method call, and that's why you get a `NoMethodError` for `nil:NilClass`.

Also, you currently have `def check_url=(page)`, but you call `check_url(page)`. Depending on what you mean to happen here, you need to change the definition to `def check_url(page)` or change the call to `@dealer.check_url = 'www.google.com'` (I suspect the former is more appropriate).

# c# - SynchronizationLockException（对象同步方法是从未同步的代码块中调用的。）释放锁时

> ID：13992730
> 
> 赞同：6
> 
> 时间：2012-12-21T15:23:59.173
> 
> 标签：c#, multithreading, synchronization, locking

释放锁时，我收到 SynchronizationLockException。

当然，我做的第一件事是谷歌搜索这个问题。我发现了两个主要的错误模式：

1.  在与创建的线程不同的线程上释放 Mutex。
2.  使用值类型作为 Monitor 的同步对象。或者修改进入和退出 Monitor 之间的同步对象。

问题是这些模式都不适合我的情况。

我有一个非常简单的同步场景：

```
public class MyClass : IDisposable
{
    private readonly object _myLock = new object();

    internal void Func1()
    {
        lock (_myLock)
        {
            //Some code here
        }
    }

    internal void Func2()
    {
        lock (_myLock)
        {
            //Some code here
        }
    }

    public void Dispose()
    {
        lock (_myLock)
        {
            //Some code here
        }  // Here is where I get an exception
    }
} 
```

最终我收到了释放锁`SynchronizationLockException`的行。`Dispose()`

My question is not "What is the problem with my code" or "What am I doing wrong". Basically, I would like to know how (and under which circumstances) this could possibly happen that .NET implementation of lock throws this exception.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:41:22.990

I once got the SynchronizationLockException in List instance when it has been resizing its underlying array to fit new elements. The List instance has been accessed from three different threads and there was one lock missing...

I'd say: Triple check if you're doing thread synchronization the right way.

Furthermore, implement the IDisposable pattern the right way (see [http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)). Maybe finalizer is giving you a headache.

# ffmpeg - ffmpeg 设置或替代 ffmpeg 在树莓派上用于视频流

> ID：13992735
> 
> 赞同：2
> 
> 时间：2012-12-21T15:24:25.973
> 
> 标签：ffmpeg, video-streaming, raspberry-pi, ffserver

我有一个在 16gb SD 卡上运行 raspbian wheezy 的树莓派（B 型）。我还在 USB 上连接了一个 32gb 闪存。我正在尝试从该闪存存储通过以太网流式传输视频（h264 编码的 mp4 文件 1280x720）。
我正在使用 ffmpeg+ffserver。这是 ffserver.conf （相关部分）：

```
...
MaxBandwidth 10000
<Feed feed1.ffm>
...
FileMaxSize 100M
ACL allow 127.0.0.1
</Feed>
...
<Stream test.flv>
Feed feed1.ffm
Format flv
VideoSize 288x176 #made small just for testing
NoAudio
</Stream>
.... 
```

我启动 ffserver，然后使用以下命令调用 ffmpeg：

```
ffmpeg -re -an -i /mnt/u32/main.mp4 -r 25 -bit_rate 300k http://localhost:8090/feed1.ffm 
```

而且我最多获得 fps 3-5。自然，当我尝试在另一台计算机上查看流时，它非常不稳定并且几乎无法使用。

我错过了一些设置吗？或者也许还有另一种利用 GPU 而不是像 ffmpeg 那样仅利用 CPU 的流媒体解决方案？我什至对其他板的建议持开放态度（例如熊猫板？或集群几个RPi？）此外，我对输出格式很灵活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-14T15:53:57.750

尝试使用 rtmp-nginx[模块。](https://github.com/arut/nginx-rtmp-module/wiki/Getting-started-with-nginx-rtmp)我成功地用 ffmpeg 很好地流式传输它。用于流视频的适当编解码器是 h264。我制作了一个运行 ffmpeg 并使用 nginx 流式传输的 python 脚本，也许它会对你[有所帮助](https://github.com/cristiangabor/PySurveillance)。现在也可以使用 ffmpeg 的硬件编码。

# eclipse - 如何摆脱 Eclipse 空白字符

> ID：13992739
> 
> 赞同：1
> 
> 时间：2012-12-21T15:24:51.663
> 
> 标签：eclipse

> **可能重复：**
> [Eclipse：我现在打开隐藏字符我无法关闭](https://stackoverflow.com/questions/2330620/eclipse-i-turned-on-hidden-characters-now-i-cant-turn-off)

我使用 Eclipse (3.72) 开发 Android 应用程序。我不小心撞到了键盘上的东西，现在出现了这些浅灰色的格式字符。他们非常分散注意力。我到处寻找我能想到的如何摆脱它们。

我在编辑器中恢复了默认设置，但无济于事。我到处搜索只是为了找到 reccos 来“取消选中删除空格字符”，但那是找不到的。

帮助！谢谢，加里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T15:27:53.513

Window->Preferences->General->Editors->Text Editors-取消勾选“显示空白字符”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:30:17.227

有一个切换“显示空白”的快捷方式。您可以通过转到下面提到的路径来检查快捷方式。如果您想切换“显示空白”，请尝试为您的 eclipse 版本列出的快捷方式。

您可以通过转到`window -> general -> keys`然后搜索“显示空白”来设置此快捷方式，您可以在那里设置快捷方式。

# java - 没有 Nullpointer 异常，即使对象指向 null

> ID：13992748
> 
> 赞同：2
> 
> 时间：2012-12-21T15:25:29.063
> 
> 标签：java

> **可能重复：**
> [Java 中空引用上的静态字段](https://stackoverflow.com/questions/11579953/static-fields-on-a-null-reference-in-java)

我是 Java 新手。我知道是否有任何对象指向并且如果我们尝试对该对象执行任何操作，JVM 会抛出 Nullpointer 异常。但在我的情况下，没有 Nullpointer 异常请帮助我？下面是我的代码

```
public class Employee
{

     public static String empName = "John"

     public static void main(String args[])
     {
           Employee emp = new Employee();    
           emp = null;
           System.out.println(emp.empName);
      }   
} 
```

它打印**John**作为输出，即使 emp 对象指向 null。但我期待一个空指针异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:26:22.980

因为字段是`static`.
在你的情况下`emp.empName`等于`Employee.empName`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:27:16.203

由于您正在访问静态变量，因此如果您的引用引用 null，您将不会获得 NPE。这是因为静态字段绑定到`class`而不是任何实例。

所以，对于静态变量： -

```
Employee emp = null;
emp.empName;  // This is evaluated as `Employee.empName;` 
```

因此，仅使用引用类型。无论该引用是指向`null`还是任何子类对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:27:57.477

由于`empName`是**静态**的，调用将`Employee.empName`在**字节码**中，因此没有 NPE：

**原代码：** `System.out.println(emp.empName);`

**字节码：** `GETSTATIC java/lang/System.out : Ljava/io/PrintStream; GETSTATIC oops/Employee.empName : Ljava/lang/String;`

# c# - 等待后任务继续不起作用

> ID：13992750
> 
> 赞同：2
> 
> 时间：2012-12-21T15:25:38.000
> 
> 标签：c#, asp.net-mvc, task-parallel-library, azure-storage, .net-4.5

我遇到了一个非常奇怪的情况，即`await`在 IIS 之后任务执行没有继续（不确定它是否与 IIS 有关）。我使用 Azure 存储和以下控制器重现了这个问题（[github 上的完整解决方案](https://github.com/almazik/AsyncExecutionIssue)）：

```
public class HomeController : Controller
{
    private static int _count;

    public ActionResult Index()
    {
        RunRequest(); //I don't want to wait on this task
        return View(_count);
    }

    public async Task RunRequest()
    {
        CloudStorageAccount account = CloudStorageAccount.DevelopmentStorageAccount;
        var cloudTable = account.CreateCloudTableClient().GetTableReference("test");

        Interlocked.Increment(ref _count);
        await Task.Factory.FromAsync<bool>(cloudTable.BeginCreateIfNotExists, cloudTable.EndCreateIfNotExists, null);

        Trace.WriteLine("This part of task after await is never executed");
        Interlocked.Decrement(ref _count);
    }
} 
```

我希望 的值`_count`始终为 1（在视图中呈现时），但如果您按 F5 几次，您会看到`_count`每次刷新后它都会增加。这意味着由于某种原因不要求继续。

事实上我撒了一点谎，我注意到延续被调用一次，当`Index`第一次被调用时。所有进一步的 F5 不会减少计数器。

如果我将方法更改为异步：

```
 public async Task<ActionResult> Index()
    {
        await RunRequest(); //I don't want to wait on this task
        return View(_count);
    } 
```

一切都按预期开始工作，除了我不想让客户端等待我的异步操作完成。

所以我的问题是：我想了解为什么会发生这种情况，以及运行“即发即弃”工作的一致方式是什么，最好不跨越新线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:16:52.327

> 运行“一劳永逸”工作的一贯方式是什么

ASP.NET 不是为即发即弃的工作而设计的。它旨在服务于 HTTP 请求。当生成 HTTP 响应时（当您的操作返回时），该请求/响应周期就完成了。

请注意，只要没有活动的请求，ASP.NET 就可以随时关闭您的 AppDomain。这通常在不活动超时后或当您的 AppDomain 进行了一定数量的垃圾收集时在共享主机上完成，或者完全无缘无故地每 29 小时进行一次。

所以你并不是真的想要“一发不可收拾”——你想要产生响应但*又不*想让ASP.NET 忘记它。的简单解决方案`ConfigureAwait(false)`会让每个人都忘记它，这意味着一旦在一个蓝月亮，你的延续可能会“迷失”。

我有[一篇博文](http://nitoprograms.blogspot.com/2012/12/returning-early-from-aspnet-requests.html)详细介绍了这个主题。简而言之，您希望在生成响应*之前将要在持久层（如 Azure 表）中完成的工作记录下来。*这是理想的解决方案。

如果您不打算做理想的解决方案，那么您将[过着危险](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)的生活。在我的博客文章中有代码将`Task`s 注册到 ASP.NET 运行时，以便您可以提前返回响应，但通知 ASP.NET 您还没有*真正*完成。这将防止 ASP.NET 在您有出色的工作时关闭您的站点，但它不会保护您免受更根本的故障，例如硬盘驱动器崩溃或有人绊倒您的服务器电源线。

我的博客文章中的代码在下面重复；这取决于`AsyncCountdownEvent`我的[AsyncEx 库](http://nitoasyncex.codeplex.com/)中的：

```
using System;
using System.Threading;
using System.Threading.Tasks;
using System.Web.Hosting;
using Nito.AsyncEx;

/// <summary>
/// A type that tracks background operations and notifies ASP.NET that they are still in progress.
/// </summary>
public sealed class BackgroundTaskManager : IRegisteredObject
{
    /// <summary>
    /// A cancellation token that is set when ASP.NET is shutting down the app domain.
    /// </summary>
    private readonly CancellationTokenSource shutdown;

    /// <summary>
    /// A countdown event that is incremented each time a task is registered and decremented each time it completes. When it reaches zero, we are ready to shut down the app domain. 
    /// </summary>
    private readonly AsyncCountdownEvent count;

    /// <summary>
    /// A task that completes after <see cref="count"/> reaches zero and the object has been unregistered.
    /// </summary>
    private readonly Task done;

    private BackgroundTaskManager()
    {
        // Start the count at 1 and decrement it when ASP.NET notifies us we're shutting down.
        shutdown = new CancellationTokenSource();
        count = new AsyncCountdownEvent(1);
        shutdown.Token.Register(() => count.Signal(), useSynchronizationContext: false);

        // Register the object and unregister it when the count reaches zero.
        HostingEnvironment.RegisterObject(this);
        done = count.WaitAsync().ContinueWith(_ => HostingEnvironment.UnregisterObject(this), TaskContinuationOptions.ExecuteSynchronously);
    }

    void IRegisteredObject.Stop(bool immediate)
    {
        shutdown.Cancel();
        if (immediate)
            done.Wait();
    }

    /// <summary>
    /// Registers a task with the ASP.NET runtime.
    /// </summary>
    /// <param name="task">The task to register.</param>
    private void Register(Task task)
    {
        count.AddCount();
        task.ContinueWith(_ => count.Signal(), TaskContinuationOptions.ExecuteSynchronously);
    }

    /// <summary>
    /// The background task manager for this app domain.
    /// </summary>
    private static readonly BackgroundTaskManager instance = new BackgroundTaskManager();

    /// <summary>
    /// Gets a cancellation token that is set when ASP.NET is shutting down the app domain.
    /// </summary>
    public static CancellationToken Shutdown { get { return instance.shutdown.Token; } }

    /// <summary>
    /// Executes an <c>async</c> background operation, registering it with ASP.NET.
    /// </summary>
    /// <param name="operation">The background operation.</param>
    public static void Run(Func<Task> operation)
    {
        instance.Register(Task.Run(operation));
    }

    /// <summary>
    /// Executes a background operation, registering it with ASP.NET.
    /// </summary>
    /// <param name="operation">The background operation.</param>
    public static void Run(Action operation)
    {
        instance.Register(Task.Run(operation));
    }
} 
```

它可以像这样用于`async`或同步代码：

```
BackgroundTaskManager.Run(() =>
{
    // Synchronous example
    Thread.Sleep(20000);
});
BackgroundTaskManager.Run(async () =>
{
    // Asynchronous example
    await Task.Delay(20000);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:34:02.627

那么你必须在*某处*有一个线程执行延续。我怀疑问题在于等待者中捕获的上下文“知道”请求已经完成。我不知道在那种情况下会发生什么的细节，但它可能只是忽略了任何延续。诚然，这听起来有点奇怪……

您可以*尝试*使用：

```
await Task.Factory.FromAsync<bool>(cloudTable.BeginCreateIfNotExists,
                                   cloudTable.EndCreateIfNotExists, null)
          .ConfigureAwait(false); 
```

这样它就不会尝试在捕获的上下文上继续，而是在任意线程池线程上继续。它*可能*无济于事，但值得一试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:34:29.523

问题在于`await`将延续配置为在其首次启动的同步上下文中运行。老实说，这是该功能更有用的方面之一，但在这种情况下，这对您来说是个问题。在这里，您的同步上下文在延续触发时不存在，因为您正在返回视图。

我的猜测是，尝试访问已经“完成”的同步上下文会导致抛出异常，这就是您的代码无法正常工作的原因。

如果您添加`ConfigureAwait(false)`到方法的末尾，您`FromAsync`将让它在线程池线程中运行，这对您的情况应该没问题。

其他选项是从任务中抛出异常，或者异步操作根本没有完成。

# arrays - 如何将 groovy jsonbuilder 与 .each 一起使用来创建数组？

> ID：13992751
> 
> 赞同：11
> 
> 时间：2012-12-21T15:25:39.657
> 
> 标签：arrays, groovy, each, jsonbuilder

我想用 JSON-Builder 创建一个数组。

预期格式：

```
{
  "Header": {
    "SomeKey" : "SomeValue"
 }
  "Data": [
    { 
      "SomeKey" : "SomeValue"
    }, 
    {
     "SomeKey" : "SomeValue"
    }
  ]
} 
```

我的代码：

```
 def builder = new groovy.json.JsonBuilder()

    def root = builder {
        Header {            
        "Typ" "update"
        "Code" "UTF-8"
        "TransaktionsNr" item.transactionNumber
        "DatumZeit" new Date().format("dd.MM.yyyy HH:mm")
    }

    customers.each ({ customer->           
        "Data" { 
            "Email" customer.code
            "Newsletter" customer.newsletterSubscribed
        }
    }) 
```

但是，无论我做什么，我都只会在数据部分得到一个元素。我尝试使用 [] 而不是 {}，但我仍然只得到一个元素，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T15:41:43.463

这是 JSON 结构的重复键。[在同一层次结构中不应有重复的键，否则它们将相互覆盖](https://stackoverflow.com/questions/11200702/json-with-duplicate-key-names-losing-information-when-parsed)：

```
class Customer { String code; boolean newsletterSubscribed }

customers = [
  new Customer(code:"11111", newsletterSubscribed:true),
  new Customer(code:"22222", newsletterSubscribed:false)
]

def builder = new groovy.json.JsonBuilder()

def root = builder {
  Header {            
    "Typ" "update"
    "Code" "UTF-8"
    "TransaktionsNr" 987
    "DatumZeit" new Date().format("dd.MM.yyyy HH:mm")

  }

  customers customers.collect { customer ->
        ["Email":customer.code, 
        "Newsletter":customer.newsletterSubscribed]
    }

}

assert builder.toString() == {"Header":{"Typ":"update","Code":"UTF-8","TransaktionsNr":987,"DatumZeit":"21.12.2012 13:38"},"Data":{"Email":"22222","Newsletter":false},"customers":[{"Email":"11111","Newsletter":true},{"Email":"22222","Newsletter":false}]} 
```

# java - 使用 Apache FTPClient 通过代理连接到 FTP 服务器

> ID：13992759
> 
> 赞同：3
> 
> 时间：2012-12-21T15:25:59.613
> 
> 标签：java, apache, ftp

使用 Apache FTPClient，我通常可以使用以下语句进行连接：

```
FTPClient client = new FTPClient();
client.connect("ftp.myhost.com");
client.login("myUsername", "myPassword");
client.changeWorkingDirectory("/fileFeed");
client.setFileType(FTPClient.BINARY_FILE_TYPE);
client.setFileTransferMode(FTPClient.BLOCK_TRANSFER_MODE); 
```

以上工作正常，但现在我要连接到 FTP 站点，我必须使用代理服务器。我得到的指示是我应该连接到代理服务器并在用户名中指定实际的 ftp 服务器。因此，要登录，我将使用以下详细信息进行连接：

```
ftp         ftp.myProxyServer.com
username    myUsername@ftp.myhost.com
password    myPassword 
```

我尝试使用命令提示符直接连接，我可以连接到 ftp.myProxyServer.com 主机，如果我将 myUsername@ftp.myhost.com 指定为主机用户名，它会将我转发到预期的 ftp 站点。问题是使用 Apache FTPClient 的 Java 不接受上述类型的连接：

```
FTPClient client = new FTPClient();
client.connect("ftp.myProxyServer.com");
client.login("myUsername@ftp.myhost.com", "myPassword");
client.changeWorkingDirectory("/fileFeed");
client.setFileType(FTPClient.BINARY_FILE_TYPE);
client.setFileTransferMode(FTPClient.BLOCK_TRANSFER_MODE); 
```

有什么我遗漏的或者上述方法不起作用吗？我尝试了直接连接，效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-27T19:37:42.393

FTPClient 通常处于*主动*ftp 模式，如果您的代理无法启动与客户端计算机的 tcp 连接（出于防火墙/DMZ 的原因），那么您必须切换到*被动*模式：

```
FTPClient client = new FTPClient();
client.connect("ftp.myProxyServer.com");
client.login("myUsername@ftp.myhost.com", "myPassword"); 
client.enterLocalPassiveMode(); //switch from active to passive
client.changeWorkingDirectory("/fileFeed");
... 
```

（此外，我想建议始终检查方法调用的返回码，但为了清楚起见，可能会省略它们）

很抱歉迟到了试图回答你的问题......

# jquery - Jquery 向上滚动悬停停止

> ID：13992763
> 
> 赞同：2
> 
> 时间：2012-12-21T15:26:08.543
> 
> 标签：jquery, html, animation, scroll

快速提问。

试图为我的网站制作一个可悬停的滚动控件。当您将鼠标悬停在按钮上而不是单击它时，我希望页面滚动。我让它大部分工作，但它似乎有点小故障，主要是因为悬停事件不断触发动画方法。我想知道是否有更干净的方法来触发它。以下是我到目前为止的代码。

```
 $("#goUp").hover(function () { 
      var curpos= $('body').scrollTop();
      $("body").animate({scrollTop: curpos- 200}, 800);
    }, function () {
        // I want to stop the animation here when they mouse out
    });

    $("#goDown").hover(function () { 
      var curpos= $('body').scrollTop();
      $("body").animate({scrollTop: curpos+ 200}, 800);
    }, function () {
        // I want to stop the animation here when they mouse out        
    }); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:29:03.283

使用以下停止动画。

```
$("body").stop() 
```

# javascript - 在父级中获取 iframe 数据

> ID：13992768
> 
> 赞同：2
> 
> 时间：2012-12-21T15:26:24.013
> 
> 标签：javascript, jquery, proxy

> **可能重复：**
> [使用 Javascript 从 iframe 进行跨域 URL 访问](https://stackoverflow.com/questions/1378433/cross-domain-url-access-from-iframe-using-javascript)

我想从父窗口中的 iframe 获取数据。但是，问题是我的 iframe 和父级在具有不同端口的跨域中。

如果不在 iframe 中输入任何内容，怎么可能？

# rest - 切换到 Gatling 进行负载测试

> ID：13992771
> 
> 赞同：6
> 
> 时间：2012-12-21T15:26:39.370
> 
> 标签：rest, load-testing, wadl, gatling

我想使用[Gatling](http://gatling-tool.org/)进行 REST 性能和可扩展性 Web 服务测试。我目前正在为此使用 JMeter，因为当我开始这个项目时我不知道加特林。Gatling 将更好地集成，并且出于多种原因会更好地用于该项目。

我想问一个主要问题：

显然，使用正确的 Web 服务信息配置 Gatling 会产生很多开销。我已经在 J​​Meter 中完成了这项工作，我不想再这样做了。对于其中一个子项目，我们有一个 WADL，但另一个没有这样的东西。是否可以开箱即用地导入：

一种。JMeter 测试计划和
b. WADL 文件

进入加特林？

我浏览了文档，但不幸的是我找不到任何引用这些文档的内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T07:46:54.263

不，加特林两者都没有。

我们可能会在 2013 年研究构建 jmx 转换器，因为您不是第一个提出要求的人。在这一点上，我有点怀疑，因为 2 JMeter 和 Gatling 的逻辑和配置有很大不同，所以它们的功能和使用方式并不是 1:1 映射的。

使用 REST API 最简单的方法是使用记录器，因此您可以将请求主体转储为模板，然后将数据注入其中。见[http://gatling.io/docs/2.1.6/http/http_request.html#request-body](http://gatling.io/docs/2.1.6/http/http_request.html#request-body)

如果您使用 JSON，您可以使用我们的 JsonPath（或标准正则表达式）检查来对响应正文进行断言，甚至捕获数据。见[http://gatling.io/docs/2.1.6/http/http_check.html#defining-the-check-type](http://gatling.io/docs/2.1.6/http/http_check.html#defining-the-check-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:09:57.680

将 HttpSampler 与 Raw Post 正文一起使用 最后 2.8 版本是测试 Web 服务的正确方法。

是你这样做的方式吗？即将发布的 2.9 具有与后处理器消耗的内存和 cpu 相关的新性能改进。

关于a，我不这么认为。

# security - 如何避免在 PowerShell 脚本中保存用户名和密码

> ID：13992772
> 
> 赞同：2
> 
> 时间：2012-12-21T15:26:42.787
> 
> 标签：security, powershell, password-encryption

所以基本上我想编写一个 Powershell 脚本，它将为 Windows Server Backup 导出最近 1 天的备份日志，将信息格式化为一个漂亮的小表格，然后 SMTP 将其发送到客户本地 Exchange 之外的外部位置。我有一个可以用于此目的的智能主机，以及凭据等。

但我不想将 UN 和 Password 以纯文本形式存储在 Powershell 中，或者让脚本使用纯文本形式的凭据运行。

有没有解决的办法？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-23T23:04:09.113

我设法通过将密码作为安全字符串并将其作为“加密标准字符串”保存到名为“ Account.User.pwd”之类的文件中来解决类似问题，其中*Account**是*与关联的帐户的*名称*密码和*用户*是生成安全字符串的用户（只有该用户能够解密该文件）。

 **如果您按照他对上述问题本身的评论中的链接，这与@Keith 使用的方法非常相似。下面的方法更容易遵循，因为它不直接与`[System.Runtime.InteropServices.Marshal]`类一起使用。

将密码从文件内容转换回更复杂，但这里有一个逐步完成该过程的示例：

```
# Create credential object by prompting user for data
$Credential = Get-Credential

# Encrypt the password to disk
$Credential.Password | ConvertFrom-SecureString | Out-File Account.User.pwd

# Now to read it back again...
$SecureString = Get-Content Account.User.pwd | ConvertTo-SecureString

# Create credential object programmatically
$NewCred = New-Object System.Management.Automation.PSCredential("Account",$SecureString)

# Reveal the password!
$NewCred.GetNetworkCredential().Password 
```

关于这种方法的想法：

1.  抵制在最后一步将密码转储到变量中的诱惑，以防止它在内存中（以明文形式）徘徊，直到变量被丢弃。每次从 PSCredential 转换不需要花费太多的打字费用。
2.  只有生成文件的用户才能阅读；如果多个用户需要访问共享帐户的密码，则每个用户都必须生成这样的文件（因此建议的文件命名）。
3.  这不需要仅限于密码。您想要加密到磁盘的任何字符串都可以用作原始凭证对象中的“密码”。数据库连接字符串，尤其是。那些有用户名和密码的，请记住...
4.  使用文件系统安全性/ACL 将不需要的人锁定在 pwd 文件之外。
5.  在磁盘上有一个带有密码的文件，即使它是一个加密的字符串，也可能不符合人们的喜好。没有使用第三方密码管理系统，这**是对***仅*使用带有明文文件的文件系统安全性的明显改进。你知道它会发生...

更多信息：

*   [ConvertFrom-SecureString](https://technet.microsoft.com/en-us/library/hh849814.aspx)
*   [ConvertTo-SecureString](https://technet.microsoft.com/en-us/library/hh849818.aspx)
*   [PSCredential 类](https://msdn.microsoft.com/en-us/library/system.management.automation.pscredential(v=vs.85).aspx)
*   [System.Runtime.InteropServices.Marshal 类](https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal(v=vs.100).aspx)
*   [PowerShell 的 ConvertFrom-SecureString -key 的安全性如何](https://stackoverflow.com/questions/12520006/how-secure-is-powershells-convertfrom-securestring-key)

[powershell](/questions/tagged/powershell "显示标记为“powershell”的问题") [凭据](/questions/tagged/credentials "显示标记为“凭证”的问题") [安全字符串](/questions/tagged/securestring "显示标记为“securestring”的问题")**

# dependency-injection - Autofac 可以按照注册的顺序返回一个类型的所有服务吗？

> ID：13992773
> 
> 赞同：5
> 
> 时间：2012-12-21T15:26:43.427
> 
> 标签：dependency-injection, ioc-container, autofac

我正在为一个开源项目做出贡献，该项目希望为其内部服务支持多个容器。支持容器的要求之一是注册顺序很重要。因此，如果一个接口的多个实现以特定顺序注册，当这些服务的列表被解析时，这些实现应该以它们注册的相同顺序返回。

```
var builder = new ContainerBuilder();
builder.RegisterType<PreferredService>().As<IService>();
builder.RegisterType<AlternativeService>().As<IService>();
builder.RegisterType<AdditionalService>().As<IService>();
...
// Get the first (preferred) implementation of IService.
var possibleServices = container.Resolve<IEnumerable<IService>>();
IService idealServiceImplementation = possibleServices.FirstOrDefault(); 
```

我的测试表明 Autofac 返回的服务是相反的顺序。总是这样吗？我可以相信他们每次都会以相反的顺序解决吗？即使我在为不同的接口进行其他注册之后注册了一些后来的服务，这种行为是否会保持一致？我可以拦截对列表的 Resolve 的隐式调用吗？

有没有办法指示 Autofac 注册顺序很重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:37:53.847

除非您使用`PreserveExistingDefaults()`. 快速查看实现表明，注册存储为一个链接列表，其中默认行为添加到开头并`PreserveExistingDefaults()`添加到末尾。解决单个服务将使您获得列表中的第一项。解决 enumerable 可以让您获得该订单。我不确定这种行为是否保证永远不会改变。

如果是我，我会依赖于当前的行为，但是编写一个如果行为发生变化就会失败的自动化测试。

# ios - 本机 iOS 语言翻译字符串及其语言代码标识 (LCID)

> ID：13992777
> 
> 赞同：4
> 
> 时间：2012-12-21T15:26:56.483
> 
> 标签：ios, xcode, localization, nslocale

iOS 如何在翻译的字符串或语言的语言环境中显示语言列表。

*   是否有与之关联的 LCID？
*   如果是这样，我在哪里可以找到它的映射？
*   它是如何工作的？
*   是否有 API 或任何文档可以指向我？

我附上我的实际意思的截图： ![在此处输入图像描述](../Images/2092007a5ab9a8b56a7d90f74b1658db.png)

我能找到的只有这个[链接](http://www.science.co.il/language/locale-codes.asp)

**更新**：我想实现这样的目标：

*   我可以在哪里用它的语言映射国家，这实际上是在它的语言环境中。那么有没有一种 LCID 类型的东西，我可以使用 iOS API 使用 LCID 映射它并获取区域设置字符串？

*   样机在下面
    ![在此处输入图像描述](../Images/3690c2c898a729b14830d0b1d3e69891.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T17:48:58.137

您可以使用以下代码获取在语言区域设置中翻译的语言列表：

目标-C：

```
NSArray *languages = [NSLocale preferredLanguages];
for (NSString *lang in languages)
{
    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:lang];
    NSString *translated = [locale displayNameForKey:NSLocaleIdentifier value:lang];
    NSLog(@"%@, %@", lang, translated);
} 
```

迅速：

```
let languages = NSLocale.preferredLanguages()
for lang in languages {
    let locale = NSLocale(localeIdentifier: lang)
    let translated = locale.displayNameForKey(NSLocaleIdentifier, value: lang)!
    print("\(lang), \(translated)")
} 
```

*输出：*

> ```
> en, English
> fr, français
> de, Deutsch
> ja, 日本語
> nl, Nederlands
> ... 
> ```

我希望这能回答您问题的第一部分，也许对第二部分有所帮助。

* * *

**斯威夫特 3 更新：**

```
let languages = NSLocale.preferredLanguages
for lang in languages {
    let locale = NSLocale(localeIdentifier: lang)
    let translated = locale.displayName(forKey: NSLocale.Key.identifier, value: lang)!
    print("\(lang), \(translated)")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:36:39.930

LCID 是一个 Windows 概念。iOS上没有这样的东西。语言通常由 ISO 639-1 或 639-2 语言代码标识。

从您提出问题的方式来看，我认为最好从阅读 Apple 的[国际化和本地化](https://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/Introduction/Introduction.html "国际化和本地化指南")文档开始。[NSLocale](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/ "NSLocale")将成为你的朋友。

# ruby-on-rails - 参数数量错误

> ID：13992780
> 
> 赞同：0
> 
> 时间：2012-12-21T15:27:01.447
> 
> 标签：ruby-on-rails, xml

我了解导致错误数量的参数错误的原因，但我的代码没有传递任何参数来初始化任何类，所以我完全不确定为什么我的代码会给我这个错误。我对 Ruby on Rails 也很陌生，所以这无济于事。我的代码如下：

```
def create_google_file  
  @products = Product.find(:all)
  file = File.new('dir.xml','w')
  doc = REXML::Document.new

  root = REXML::Element.new "rss"
  root.add_attribute("xmlns:g", "http://base.google.com/ns/1.0")
  root.add_attribute("version", "2.0")

  channel = REXML::Element.new "channel"
  root.add_element channel

  title = REXML::Element.new "title"
  title.text = "Sample Google Base"
  channel.add_element title

  link = REXML::Element.new "link"
  link.text = "http://base.google.com/base/"
  channel.add_element link

  description = REXML::Element.new "description"
  description.text = "Information about products"
  channel.add_element description

  @products.each do |y|
    item = channel.add_element("item")

    id = item.add_element("g:id")
    id.text = y.id

    title = item.add_element("title")
    title.text = y.title

    description = item.add_element("description")
    description.text = y.description

    googlecategory = item.add_element("g:google_product_category")
    googlecategory.text = y.googlecategory

    producttype = item.add_element("g:product_type")
    producttype.text = y.producttype

    link = item.add_element("link")
    link.text = y.link

    imglink = item.add_element("g:image_link")
    imglink.text = y.imglink

    condition = item.add_element("condition")
    condition.text = y.condition

    availability = item.add_element("g:availability")
    availability.text = y.availability

    price = item.add_element("g:price")
    price.text = y.price "USD"

    gtin = item.add_element("g:gtin")
    gtin.text = y.gtin

    brand = item.add_element("g:brand")
    brand.text = y.brand

    mpn = item.add_element("g:mpn")
    mpn.text = y.mpn

    expirationdate = item.add_element("g:expiration_date")
    expirationdate.text = y.salepricedate
  end   

  doc.add_element root

  file.puts doc
  file.close
  end 
```

我得到的错误是： ProductsController#create_google_file 中的 ArgumentError

参数数量错误（1 代表 0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:00:40.310

应发帖人的要求，我将我的评论放在一个答案中：

纯粹基于其他线路的一致性，但不知道哪条线路实际上是失败的，可能是这部分：`price.text = y.price "USD"`. 是`y.price`一个接受参数的方法吗？它是定义为`def price(type)`还是什么？如果不是，如果它不带任何参数，那是因为您不应该向该方法发送任何参数。看起来它只是一个吸气剂。

@FranklinJosephMoormann 正如我所怀疑的那样，就是这样。您是否尝试制作像“4.50 USD”这样的字符串？那么你可能想要：`price.text = "#{y.price} USD"`. 这将获取结果`y.price`并将其放入字符串中，并允许您继续在字符串中输入更多内容。这称为字符串插值。

# python - Gevent：重试greenlet一次

> ID：13992785
> 
> 赞同：3
> 
> 时间：2012-12-21T15:27:12.250
> 
> 标签：python, concurrency, gevent

我在 Gevent 池中执行了几十个 HTTP 请求。

目标是在请求失败时重试一次，但只重试一次。否则，它应该抛出异常。

**如果失败，我将如何使用 at pool 编写支持重新运行 HTTP 请求的 gevent 代码？**

这种方法可行吗？

```
import requests
import gevent
from gevent.pool import Pool

pool = Pool(10)

def do_request(id):
    r = requests.get('http://example.com/%u' % id)
    if not r.status_code == 200:
        raise RuntimeError(id)

def spawn_greenlet(id, is_retry=False):
    if not is_retry:
        g = gevent.spawn(id)
        g.link_exception(retry_once)
    else:
        g = pool.spawn(id)
        g.link_exception(raise_exception)
    return g

def retry_once(greenlet):
    return spawn_greenlet(greenlet.exception.args[0])

def raise_exception(greenlet):
    if greenlet.exception:
        raise greenlet.exception
    raise RuntimeError('Unknown error in greenlet processing.')

greenlets = pool.map(spawn_greenlet, [1, 2, 3, 4, 5])
gevent.joinall(greenlets) 
```

*   有没有比通过异常参数更简洁的方法来获取 greenlet 函数的参数？
*   `joinall(greenlets)`在内部发生异常`do_request`但在`retry_once`调用事件处理程序之前，方法是否有可能返回？
*   有没有更干净的方法来重新启动具有相同参数的greenlet，所以我不需要`is_retry`kwarg at `spawn_greenlet`？
*   据我了解，`gevent.joinall(greenlets)`仅加入 map 返回的greenlets。当出现异常时，是否将原始greenlet替换为返回的新greenlet `retry_once`？如果不是，即使额外的greenlets仍在运行，处理是否会继续？在那种情况下，我怎么能等待所有的greenlets完成呢？

Gevent 文档非常稀缺，而且网络上似乎没有其他资源可以记录这一点，尽管这是一个相当常见的用例。因此，我不认为这是一个过于本地化的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:25:05.163

不要使用 spawn/link/link_exception 来重试。只需使用普通的 Python：

```
def do_something_with_retry(*args):
    try:
      return do_something(*args)
    except Exception:
      return do_something(*args) 
```

此外，gevent.pool.Pool.map 会自动在给定池中生成 greenlet，您不必这样做。

```
pool = Pool(10)
pool.map(do_something_with_retry, [1, 2, 3]) 
```

现在，你只需要实现`do_something()`，它可以是普通的 Python/requests 代码：

```
def do_something(*args):
    return requests.get('http://gevent.org') 
```

玩得开心！

# javascript - jQuery更改文本大小写

> ID：13992787
> 
> 赞同：0
> 
> 时间：2012-12-21T15:27:15.523
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 javascript 将字符串转换为标题大小写](https://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript)
> [使用 jQuery，如何在用户仍在编辑该字段时将文本字段的第一个字母大写？](https://stackoverflow.com/questions/2017456/with-jquery-how-do-i-capitalize-the-first-letter-of-a-text-field-while-the-user)

我需要等效于 PHP 函数的 jQuery 或 Javascript：

```
<?php ucwords(strtolower('SOMETHING') ?> //Outputs "Something" 
```

我在 Javascript 中见过`.toUpperCase()`，但找不到“首字母大写”功能。

# asp.net - 仅使用浏览器时的 Web 配置错误

> ID：13992791
> 
> 赞同：0
> 
> 时间：2012-12-21T15:27:19.963
> 
> 标签：asp.net, visual-studio-2010, web-applications, iis-6

我有一个在 IIS 中设置为服务器上的应用程序的网站。当我从 IIS 中单击一个页面并单击浏览时，它会很好地加载页面。如果我在 VS2010 中运行 Web 应用程序，它会很好地启动页面。问题是当我尝试从浏览器访问页面时，它给了我这个错误......

> 配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

源错误：

```
Line 88:             ASP.NET to identify an incoming user. 
Line 89:         -->
Line 90:     <authentication mode="Windows" />
Line 91:     <!--
Line 92:             The <customErrors> section enables configuration 
```

由于此错误，此站点已完全关闭，我需要尽快修复它...google 已产生 2 个结果，请确保将站点设置为 IIS 中的应用程序，并检查嵌套的 web.config 文件其中只有一个配置文件。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:34:09.470

看起来您在未配置为 IIS 应用程序的网站的子文件夹中有一个 web.config。您必须将该文件夹设置为适当的应用程序，或者删除该 web.config 文件。

例如：您的网站位于：`C:\inetpub\mysite`，并且您拥有：`c:\inetpub\mysite\subfolder1\web.config`。为了让 IIS 接受该 web.config，您必须告诉 IIS 这`subfolder1`是一个 IIS 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:43:02.820

您是否也将要保护的文件夹转换为 IIS 中的 Web 应用程序？右键单击 IIS 内的文件夹，然后选择转换为应用程序。

# java - 使用 Java 发送斜杠和反斜杠

> ID：13992794
> 
> 赞同：11
> 
> 时间：2012-12-21T15:27:35.870
> 
> 标签：java, awtrobot

使用 Java 机器人时，发送斜杠或反斜杠时会引发异常。

例如：

```
public void slash() throws AWTException {
    Robot rob = new Robot();
    rob.keyPress(KeyEvent.VK_SLASH);
    rob.keyRelease(KeyEvent.VK_SLASH);
}

public void backSlash() throws AWTException {
    Robot rob = new Robot();
    rob.keyPress(KeyEvent.VK_BACK_SLASH);
    rob.keyRelease(KeyEvent.VK_BACK_SLASH);
} 
```

然后，当我想输入这些时，我使用：

```
public void type() {

    try {
        slash();
    } catch (AWTException e) { System.out.println("Exception when typing slash."); }

    try {
        backSlash();
    } catch (AWTException e) { System.out.println("Exception when typing back slash."); }

} 
```

我在控制台中收到两条错误消息。顺便说一句，我尝试发送的所有其他击键都工作正常。

我得到以下斜线堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Invalid key code
    at sun.awt.windows.WRobotPeer.keyPress(Native Method)
    at java.awt.Robot.keyPress(Unknown Source)
    at com.paschoalinoto.bruno.pastescript.Paste.slash(Paste.java:23)
    at com.paschoalinoto.bruno.pastescript.Paste.type(Paste.java:36)
    at com.paschoalinoto.bruno.pastescript.MainGUI$4.actionPerformed(MainGUI.java:113)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

反斜杠有效，但也会抛出 IllegalArgumentException：

```
java.lang.IllegalArgumentException: Invalid key code
at sun.awt.windows.WRobotPeer.keyPress(Native Method)
at java.awt.Robot.keyPress(Unknown Source)
at com.paschoalinoto.bruno.pastescript.Paste.press(Paste.java:198)
at com.paschoalinoto.bruno.pastescript.Paste.paste(Paste.java:173)
at com.paschoalinoto.bruno.pastescript.Paste.finalPaste(Paste.java:227)
at com.paschoalinoto.bruno.pastescript.MainGUI$4.actionPerformed(MainGUI.java:113)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

有什么方法可以发送斜杠和反斜杠按键吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T22:05:37.800

好的，我找到了一个对使用不同键盘布局的用户来说可能很方便的解决方案。它使用 Alt 代码。

```
public static void alt(int event1, int event2, int event3, int event4) throws Exception {

    Robot bot = new Robot();
    bot.delay(50); //Optional
        bot.keyPress(KeyEvent.VK_ALT);

            bot.keyPress(event1);
            bot.keyRelease(event1);

            bot.keyPress(event2);
            bot.keyRelease(event2);

            bot.keyPress(event3);
            bot.keyRelease(event3);

            bot.keyPress(event4);
            bot.keyRelease(event4);

        bot.keyRelease(KeyEvent.VK_ALT);

} 
```

然后你这样称呼它：

对于反斜杠： `alt(KeyEvent.VK_NUMPAD0, KeyEvent.VK_NUMPAD0, KeyEvent.VK_NUMPAD9, KeyEvent.VK_NUMPAD2);`

对于普通的： `alt(KeyEvent.VK_NUMPAD0, KeyEvent.VK_NUMPAD0, KeyEvent.VK_NUMPAD4, KeyEvent.VK_NUMPAD7);`

没有例外。也适用于所有其他角色。但请确保在使用此功能时已打开 Num Lock。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:32:28.527

（对不起，我应该提到这不是一个完整的答案，只是说它确实对我有用，所以我猜这是配置问题或其他问题 - 但我认为这是其他人可能会觉得方便的东西。它应该是评论，但出于技术原因，我必须将其作为答案）

我没有搞乱 Robot 类，只是花了半个小时在这个很酷的 java 类上乱搞和添加一些东西。

对我来说发送斜杠和反斜杠工作正常。自从VK_？？？东西很好地映射到 ASCII 字符，你可以发送 '\' 或 '/' 它也应该可以工作。

我使用 Groovy 是因为这就是我最近玩的东西，但这里有一个很好的例子和一堆我刚刚想出的可重用代码。它是作为脚本编写的，但可以很容易地转换为 Groovy 或 Java 中的类（我很快就会这样做）。

这必须从“特权”外壳运行（例如，右键单击命令提示符并选择“以管理员身份运行”）。

它也必须有时间让你放开键盘！（学到了很难的方法），所以如果你使用 groovyShell 并使用 alt-r 运行它，请确保在发送第一个键之前延迟 1 秒，否则你的 ALT 将成为按下的键的一部分。

```
导入 java.awt.*
导入 java.awt.event.*
导入静态 java.awt.event.KeyEvent.*

r=新机器人（）
r.autoWaitForIdle = true
r.autoDelay=200 // 通常使用 0 但有时太快了。

// 这将 alt-tab 你到你的“上一个”应用程序。在测试时我在记事本++中编辑了这个
// 然后切换到 shell 来执行它，这个切换回我的编辑器并输入
// “测试”文本。
alt VK_TAB

发送“反斜杠=\\\n正斜杠=/”

// 这将发送任何字符串
def 发送（字符串 s）
{
    def 差异 = ("a" as Character) - ("A" as Character)
    s.每个{
        字符 c=它作为字符
        如果（c.isUpperCase（））{
            班次 c
        }否则如果（c.isLowerCase（））{
            发送（c - 差异）
        }
        否则发送（c）
    }
}

// 这些将适用于整数和字符，而不是字符串
定义发送（键）
{
    按（键为整数）
    释放（键为整数）
}
默认替代（键）
{
    按 VK_ALT
    发送密钥
    释放 VK_ALT
}
def shift(键)
{
    按 VK_SHIFT
    发送密钥
    释放 VK_SHIFT
}

默认按下（键）
{
    r.keyPress（键为整数）
}
def 释放（int 键）
{
    r.keyRelease（键为整数）
}

```

# oracle - 带有 WCF 的 ODP.NET

> ID：13992813
> 
> 赞同：1
> 
> 时间：2012-12-21T15:28:45.497
> 
> 标签：oracle, odp.net

当我尝试使用我的 WCF 服务时出现此错误（我正在使用 .NET 4.5 Framework 和适用于 .NET 4.5 的最新 Oracle.DataAccess）：

> 在配置中找不到指定的商店提供程序，或无效。

我在 Windows 8 机器上。当我的端点地址指向我的本地主机时，它工作正常，但是当我的地址指向我的 Windows 8 机器上的 IIS 应用程序时，我得到了错误。

# java - 最佳容器 >

> ID：13992816
> 
> 赞同：2
> 
> 时间：2012-12-21T15:28:48.490
> 
> 标签：java, containers

我想知道最好的类似 java 的容器是用来做什么的

```
<Key, <pairOfType1,pairOfType2>> 
```

我有一个作为键的 object1 和一个 t1 和 t2。

我的课程具有以下属性：

```
public class Patient implements Externalizable {
    protected int iD;
    protected String name;
    protected String CNP;
    protected int   age;

public class Treatment implements Externalizable {
    protected int iD;
    protected String description;

public class Diagnosis implements Externalizable {
        protected int iD;
        protected String name;
        protected String description;
        protected String date; 
```

PS：我对“真正的程序”感到好奇，因为我的要求是浪费。我考虑过的想法 `private Map<Patient, <Diagnosis, Treatmet>> map = new Map<>();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:31:55.393

怎么样`Map<Patient, Pair<Diagnosis, Treatment>>`？

对类可能如下所示：

```
public class Pair<T, U> {

    private final T t;
    private final U u;

    public Pair(T t, U u) {
        this.t = t;
        this.u = u;
    }
    //getters
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:29:53.303

A`Dictionary`或 a`Map`支持此`Key,Value`查找。

在您的对象模型中，您不会有 a`t1`和 a `t2`，而是会有这样的类：

```
public class ExternalizableContainer  
{  

    private Externalizable t1;  
    private Externalizable t2;

    public ExternalizableContainer(Externalizable t1,Externalizable t2)  
    {  
           this.t1=t1;
           this.t2=t2;

    }   

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:32:43.670

我将创建一个包含您的两个值的单独对象。

```
class MyObject {
  String val1;
  String val2;
  ...
} 
```

然后创建一个以 MyObject 为值的地图。这假定您要存储的两个值是字符串。@assylias 通过键入类提供了一种更通用的方法

```
 new HashMap<Key, MyObject>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T15:45:00.603

为什么你不能把你的诊断和治疗放在一个班级里然后通过

```
 Pair<Diagnosis,Treatment> pair = new Pair<>(d,t);
    Map<Key, Pair> map = new Map<>();
    ... 
```

在哪里

```
 class Pair<D,T> {
        public D myD;
        public T myT;
        public Pair(D d, T t) {
            myD = d;
            myT = t;
        }
    } 
```

# ios - 防止IOS在应用切换到facebook进行登录和权限请求时关闭应用

> ID：13992819
> 
> 赞同：2
> 
> 时间：2012-12-21T15:28:59.323
> 
> 标签：ios, facebook, memory-management, unity3d, application-shutdown

我真的被这个问题困住了，我需要你的帮助！我正在做一个统一的 ipad 游戏和 prime31 的社交网络插件。

情况：

当您到达关卡结束时，游戏会为您提供分数并询问您是否要将其提交到 Facebook。如果你这样做了，在我的脚本中，我已经完成了一个系统来检查你是否登录，如果你没有登录，它会要求你登录，然后系统检查应用程序是否具有发布权限，如果没有，它会询问你允许。如果所有这些都是真的，它会直接在你的墙上发布一条消息。所以希望登录/询问部分只需要完成一次。

问题：

当 ipad 在游戏和 facebook 应用程序之间交换登录时，ipad 会关闭游戏以节省内存。我试图减少场景，但很难减少它。所以我想也许我应该在游戏中打开那个 facebook 登录和授权。为此，我尝试使用以下方法：

```
setSessionLoginBehavior(FacebookSessionLoginBehavior.ForcingWebView); 
```

它完全符合我的要求，它在游戏中打开了一个小窗口，并没有崩溃真的很好。但是，在这个解决方案中，问题在于它只适用于登录，当我询问发布权限时，它会切换回 facebook 应用程序来询问权限，因此会崩溃。经过更多研究，似乎控制请求权限行为是不可行的。所以回到第一个问题，当用户连接到 Facebook 时，如何防止 IOS 关闭我的游戏。我仍然希望减少场景。

我听说在离开 facebook 应用程序后使用应用程序 url 并为应用程序（我的游戏）启动发送数据，因此要求 ipad 在特定场景重新启动应用程序。但这确实是最后的解决方案，因为要实现这一点需要大量的返工。

如果您有解决此问题的其他建议，我愿意。我只需要登录 -> 请求发布权限 -> 发布并返回我的游戏关卡屏幕的末尾。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:16:49.053

简而言之，一旦你的应用程序被后台运行，如果 iOS 想要关闭它，你就无法阻止这种情况发生。

您可以做的最好的事情是在将应用程序的状态移交给 facebook 应用程序进行身份验证之前保存应用程序的状态，然后在应用程序再次启动时重新加载您的状态。您需要处理`applicationWillResignActive:`、`applicationDidEnterBackground:`和。`applicationDidBecomeActive:``applicationWillBecomeActive:`

iOS App Programming Guide的[App States and Multitasking 部分](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)解释了如何做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:27:04.480

我认为您应该检查 iOS 5 及更低版本的 FBDialog。以及适用于 iOS 6 的[FBNativeDialogs](https://developers.facebook.com/docs/reference/ios/3.1/class/FBNativeDialogs)。

这些会在你的应用顶部弹出一个窗口，所以我猜它仍然会运行。对于 iOS 6`FBNativeDialogs`

> 提供向用户显示本机（即非基于 Web）对话框的方法。目前支持 iOS 6 共享对话框。

# ios - 如何为单个 3D 立方体着色

> ID：13992823
> 
> 赞同：1
> 
> 时间：2012-12-21T15:29:43.100
> 
> 标签：ios, opengl-es-2.0

我是 Open Gl 的新手，我需要创建一个由屏幕上的形状组成的应用程序。这些形状由相同的立方体组成。我不知道如何在着色器中分别为每个立方体着色，因为坐标只是通过缓冲区作为单个属性传入？

```
glGenVertexArraysOES(1, &_vertexArray);
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, 1527 * sizeof(GLfloat), arrayOfVerticies, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 12, BUFFER_OFFSET(0));

glBindVertexArrayOES(0); 
```

着色器：

```
attribute vec4 position;
attribute vec3 normal;

varying lowp vec4 colorVarying;

uniform mat4 modelViewProjectionMatrix;
uniform mat3 normalMatrix;

void main()
{
vec3 eyeNormal = normalize(normalMatrix * normal);
vec3 lightPosition = vec3(0.0, 0.0, 1.0);
vec4 diffuseColor = vec4(0.4, 0.4, 1.0, 1.0);

float nDotVP = max(0.0, dot(eyeNormal, normalize(lightPosition)));

colorVarying = diffuseColor * nDotVP;

gl_Position = modelViewProjectionMatrix * position;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:54:59.750

您可以将颜色作为属性传输。

更多细节可以在[这里](http://www.learnopengles.com/android-lesson-seven-an-introduction-to-vertex-buffer-objects-vbos)找到。

# perl - 如何实现基于文件的持久堆栈？

> ID：13992827
> 
> 赞同：0
> 
> 时间：2012-12-21T15:29:51.970
> 
> 标签：perl, stack, persistent

我有一个用于登录系统的 API。它不支持使用相同的用户 ID 并发登录（我猜是由于许可证）。但是，此代码可以由不同用户从另一个系统（在我的例子中是 ClearCase 触发器）启动的不同进程/客户端调用。

```
my $conn = new BuildForge::Services::Connection('ccbuildforged01', 3966);
my $token = $conn->authUser('bldforge', 'password'); 
```

我有两个选择。

1.  返回的 $token 可以被不同的客户端共享。那么我怎样才能持久化这个 $token 呢？
2.  我有 10 个许可证，所以可以创建 10 个用户。如何为所有客户端创建基于文件的持久堆栈以共享这些用户 ID？

我用谷歌搜索了一下，发现：一个简单的文件和一个锁似乎就是你所需要的。你按锁，追加，解锁。您通过锁定、搜索、读取、截断、解锁来弹出。

有人可以给我一个代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:08:09.093

我将使用用户信息维护十个文件（比如 1.conf 到 10.conf）。

要获取可用的用户 ID，请查找没有相应 .pid 文件的 .conf 文件（例如 1.pid）。如果找到，请尝试获取该文件的排他锁，然后创建一个相应的带有排他锁的 .pid 文件。（如果其中任何一个失败，请查找另一个文件。）

完成后，释放 .conf 文件的锁定，然后释放锁定并删除 .pid 文件。

如果您想避免可能的竞争条件，您可以拥有一个 queue.lock 文件，在查找可用用户 ID 之前尝试以独占方式锁定该文件。如果它已经被锁定，则等待锁定被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:39:28.087

1.  Why we need the extra .pid file? Isn't lock on the .conf file enough?
2.  Using the following code, if I start two instance of this program at the same time, the 2nd one wait for the 1st to unlock, then lock the first file id01.txt. It's waiting to read. How can I ask it go to the next one if a file is locked?

    use FileHandle; use Fcntl qw(:flock);

    for ($count = 1; $count <= 8; $count++) {
    if (open SELF, "< id0$count.txt"); if (flock(SELF, LOCK_EX)) { # Exclusive lock print "Locked id0$count.txt...\n"; sleep(10); close SELF; } else { next }

    } else { next; } print "Unlocked id0$count.txt...\n"; }

# apache2 - 如何在 windows server 2008 64bits 上安装 mod_ssl

> ID：13992829
> 
> 赞同：2
> 
> 时间：2012-12-21T15:30:03.437
> 
> 标签：apache2, windows-server-2008, mod-ssl

我们管理自己的 VM **Windows Server 2008 R2 STD 64 位**，用作 Web 服务器。

APACHE httpd-2.2.22-win32-x86-no_ssl 安装在它上面，因为这是我们在 Apache 网站上找到的唯一自安装文件 (MSI)。

我现在需要安装 SSL 证书。我遇到了几个论坛，但没有找到适合我情况的确切解决方法。

我使用 OpenSSL 来创建我们自己的自签名证书以用于此安装。**问题是我在哪里可以找到缺少的 mod_ssl 模块？**我还没有编译二进制文件的经验（但开始永远不会太晚），如果要继续配置这个黎明 SSL 证书，我在哪里可以得到这个模块的一些安全二进制文件？:)

在同一台机器上我也在运行：

> *   php-5.3.13-Win32-VC9-x86
> *   mysql-5.5.24-winx64
> *   FileZilla_Server-0_9_41
> *   邮件服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:32:35.990

最后，我只是从我的开发人员那里拿走了它（mod_ssl.so）。WAMP 解决方案下的服务器。假设我将 ssl_module 行取消注释到 httpd.conf 中，并且使用此模块在我的生产服务器上一切正常。

# iphone - NSTimer 的“for”循环错误

> ID：13992830
> 
> 赞同：0
> 
> 时间：2012-12-21T15:30:11.377
> 
> 标签：iphone, objective-c, ios, nstimer

`NO`如果某个条件（选择器是）为真，我想要一个 NSTimer 每隔 x 秒触发一次选择器。x 的值应该像这样变化 - 10、20、40、60、120。

如果选择器更改为`YES`（它返回 a `BOOL`），则计时器应停止并将其初始时间更改为 10 秒。

我有这个计时器代码：

```
double i;
for (i= 10.0; i < maxInternetCheckTime; i++) {
    [NSTimer scheduledTimerWithTimeInterval:i
                                     target:self
                                   selector:@selector(checkForInternetConnection)
                                   userInfo:nil
                                    repeats:NO];
    NSLog(@"Timer is %f seconds", i);
} 
```

但是我得到的输出并不是我一开始想要看到的：

```
2012-12-21 19:25:48.351 Custom Queue[3157:c07] Timer is 10.000000 seconds
2012-12-21 19:25:48.352 Custom Queue[3157:c07] Timer is 11.000000 seconds
2012-12-21 19:25:48.352 Custom Queue[3157:c07] Timer is 12.000000 seconds
2012-12-21 19:25:48.352 Custom Queue[3157:c07] Timer is 13.000000 seconds
2012-12-21 19:25:48.352 Custom Queue[3157:c07] Timer is 14.000000 seconds
2012-12-21 19:25:48.352 Custom Queue[3157:c07] Timer is 15.000000 seconds 
```

等等。在这个非常微不足道的任务中我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:34:55.157

> ```
>  for (i= 10.0; i < maxInternetCheckTime; i++) {
>          [NSTimer scheduledTimerWithTimeInterval:i 
> ```

您正在安排一组 10 个计时器同时在以下时间执行：10、11、12、13 等秒。

您只需要一个计时器即可开始：

```
[NSTimer scheduledTimerWithTimeInterval:10
                                 target:self
                               selector:@selector(checkForInternetConnection:)
                               userInfo:nil
                                repeats:NO]; 
```

然后`checkForInternetConnection`如果需要，您可以安排一个新的：

```
-(void)checkForInternetConnection:(NSTimer*)firedTimer {

   float interval = firedTimer.timeInterval;
   interval *= 2;

   if (<CONDITION>) {
     [NSTimer scheduledTimerWithTimeInterval:interval 
                                 target:self
                               selector:@selector(checkForInternetConnection)
                               userInfo:nil
                                repeats:NO];
   }
 } 
```

我希望逻辑清楚：

1.  您安排检查；

2.  你做检查；

3.  如果检查不正确，您安排一个新的。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T15:34:34.813

您正在打印`i`，从 10 开始在每个周期中增加 1。这是正确的输出。

# javascript - 可拖动的包含选项不限制项目的右边框或下边框？

> ID：13992831
> 
> 赞同：0
> 
> 时间：2012-12-21T15:30:15.327
> 
> 标签：javascript, jquery, css, draggable

我有一个要包含在 div 类中的可拖动项目。我有以下代码

HTML：

```
<div class = 'right'>
<div id = 'frame1'>
      <iframe id = 'iframe1' src = 'http://www.wsj.com'></iframe>
    </div>
</div>
​ 
```

CSS：

```
.right {
        position: absolute;
        width: 60%;
        height: 100%;
        left: 25%;
        top: 20%;           
        background-color: #006400;
       }

#frame1 {
              position: absolute;
              float: left;
              width: 45%; 
              height: 75%; 
              top: 10%;
              left: 2%;
              margin: 10px; 
              border-style: solid; 
              border-width: 10px;
         }    
#frame2 {
              position: absolute;
              float: right;
              width: 45%; 
              height: 75%; 
              top: 10%;
              right: 2%;
              margin: 10px; 
              border-style: solid; 
              border-width: 10px;
        }
#frame3 {
            position: absolute;
            float: center;
            width: 45%;
            height: 75%;
            top: 10%;
            left: 25.5%;
            margin: 10px;
            border-style: solid;
            border-width: 10px;
        }
#iframe1 {
          width: 181%; 
          height: 182%; 
          top: 50%;
          left: 50%;
          zoom: 1.00; 
          -moz-transform: scale(0.55); 
          -moz-transform-orgin: 0 0;
          -o-transform: scale(0.55); 
          -o-transform-origin: 0 0; 
          -webkit-transform: scale(0.55); 
          -webkit-transform-origin: 0 0;
         } 
```

JavaScript：

```
$("#frame1, #frame2, #frame3").draggable({containment: ".right", stack: "div"});​​ 
```

可拖动项目在 div 类的左侧和顶部边框上的移动受到限制，但对于我可以将对象向右或底部移动多远似乎没有限制。我需要在代码中进行哪些更改才能使 div 类的所有四个侧面都包含可拖动选项？

[jsFiddle在这里](http://jsfiddle.net/DKm4u/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:47:17.397

是的，只需为您的 iframe 更新以下 css。我希望这将帮助您获得包含在 div 类的所有四个方面的可拖动选项。

```
#iframe1 {
          position: absolute;
          width: 181%; 
          height: 182%;
          zoom: 1.00; 
          -moz-transform: scale(0.55); 
          -moz-transform-orgin: 0 0;
          -o-transform: scale(0.55); 
          -o-transform-origin: 0 0; 
          -webkit-transform: scale(0.55); 
          -webkit-transform-origin: 0 0;
         } 
```

在这里，我已经用答案更新了[jsfiddle](http://jsfiddle.net/DKm4u/4/)。

# java - 正确设置mysql排序规则

> ID：13992832
> 
> 赞同：2
> 
> 时间：2012-12-21T15:30:16.213
> 
> 标签：java, mysql, sql

我正在尝试将希伯来语值插入到我的表中，但结果始终是“??????”。我应该使用哪种排序规则？我尝试使用 hebrew_bin 和 hebrew_general_ci 结果是一样的。我使用 Java 标记的原因是我的代码是用 Java 编写的，据我所知，在 Web 开发中，您还必须在 Web 脚本中指定排序规则。所以也许我也必须在java代码中这样做？

**编辑** 这是代码：

```
private String url = "jdbc:mysql://ip:port/";
private String dbName = "dbname";
private String driver = "com.mysql.jdbc.Driver";
private String userName = "user"; 
private String password = "password"; 
```

……

```
stmt = conn.prepareStatement("INSERT INTO locations(location) VALUES (?)");
                    stmt.setString(1, "hebrew sentence");
                    stmt.execute(); 
```

现在如何将我的代码更改为您展示的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:53:06.480

根据可能的[重复](https://stackoverflow.com/questions/11976074/writing-hebrew-to-mysql-using-java)，您可以尝试以下操作：

* * *

发表者：[赛耶 严奈艾耶](https://stackoverflow.com/a/11980491/1134705):

在您的代码中设置 UTF-8。请参阅以下内容：

```
Connection con = DriverManager.getConnection("jdbc:mysql://localhost/embeddedChat?" +
            "user=site_access&password=XXXXXXXX&useUnicode=true&characterEncoding=UTF-8"); 
```

* * *

个性化您的连接当然

请参阅以下内容：

[使用 JDBC DriverManager 接口连接到 MySQL](http://dev.mysql.com/doc/refman/5.5/en/connector-j-usagenotes-connect-drivermanager.html)

[JDBC 基础 - 建立连接](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-21T15:36:20.463

```
set the table you needed to utf8 and all the rows in it to
utf8 the added this to the connection script:mysql_query("SET NAMES 'utf8'"); 
```

我猜这会帮助你

# jquery - jQuery 根据在循环内选择的单选按钮禁用/启用 textarea

> ID：13992834
> 
> 赞同：0
> 
> 时间：2012-12-21T15:30:17.460
> 
> 标签：jquery

我有以下表单字段。如果单选按钮`(travel_yes/no_##)`从 更改`No`为，则应启用`Yes`以下文本区域。`(travelDetails_#)`如果他们将其更改回否，则应该再次禁用 textarea。我想远离使用`.next()`或`.find()`性能，因为我知道我的 ID 值将是唯一的（文本区域字段的位置也可能会改变）。

**更新：单选按钮应该是一组，而不是全部在一起**

```
<div class="controls">
    <label class="radio inline">
        <input type="radio" name="travel1" data-travelNumber="1" id="travel_yes_1" value="Yes" tabindex="25" >
        Yes 
    </label>
    <label class="radio inline">
        <input name="travel1" type="radio" data-travelNumber="1" id="travel_no_1" value="No" tabindex="26" checked >
        No
    </label>
</div>
<div class="controls">
    <textarea name="travelDetails" id="travelDetails_1" ></textarea>
</div>

<div class="controls">
    <label class="radio inline">
        <input type="radio" name="travel2" data-travelNumber="2" id="travel_yes_2" value="Yes" tabindex="25" >
        Yes
    </label>
    <label class="radio inline">
        <input name="travel2" type="radio" data-travelNumber="2" id="travel_no_2" value="No" tabindex="26" checked >
        No
    </label>
</div>
<div class="controls">
    <textarea name="travelDetails" id="travelDetails_2"></textarea>
</div>

<div class="controls">
    <label class="radio inline">
        <input type="radio" name="travel3" data-travelNumber="3" id="travel_yes_3" value="Yes" tabindex="25" >
        Yes
    </label>
    <label class="radio inline">
        <input name="travel3" type="radio" data-travelNumber="3" id="travel_no_3" value="No" tabindex="26" checked >
        No
    </label>
</div>
<div class="controls">
    <textarea name="travelDetails" id="travelDetails_3"></textarea>
</div> 
```

这是我无法正常工作的 jQuery 代码。

```
$("[data-travelNumber]").each(function() {
    var $this = $(this), limit = +$(this).data("travelNumber");
    $("input:radio[name=travel]:checked").live('click',function(){
        if ( $(this).val() === 'Yes' )
            $('#travelDetails_' + limit).removeAttr('disabled');
        else
            $('#travelDetails_' + limit).attr("disabled", "enabled");
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:50:34.703

我在 JsFiddle 中创建了一些可以为您解决问题的东西。我修复了单选按钮组名称，因为它们都具有相同的名称。

JS：

```
$(document).ready(function() {
    // disable all the textarea on start
    $("textarea").attr("disabled", true);

    $("input[type=radio]").change(function() {
        var id = $(this).attr("id").split("_");
        id = id[id.length-1];

        // or use your data-travelNumber attribute
        // id = $(this).data('travelNumber');

        $("#travelDetails_" + id).attr("disabled", !($(this).val() == "Yes"));
    });
});​ 
```

这是示例：[JsFiddle 示例](http://jsfiddle.net/Mjr3T/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:43:52.437

您可以这样做，从 id 中获取数字以找到适当的 textarea

```
$('input[type=radio]').change(function(){
    var $p = $(this).closest('.controls');
    var $checked = $p.find(':checked');
    $('#travelDetails_' + this.id.slice(-1)).prop('disabled',$checked.val() == 'No');   
}).change(); 
```

[http://jsfiddle.net/hnwYM/](http://jsfiddle.net/hnwYM/)

或者如果您的数字超过 9，请将其更改为

```
$('#travelDetails_' + this.id.slice(-1)) 
```

到

```
$('#travelDetails_' + this.id.split('_')[2]) 
```

或者您可以使用您的数据属性

```
$('#travelDetails_' + $(this).attr('data-travelNumber')) 
```

您可以使用相同的方法来停止遍历 dom

```
$('input[type=radio]').change(function(){
    var num = $(this).attr('data-travelNumber');
    var $checked = $('input[id$=_' + num + ']:checked');
    $('#travelDetails_' + num).prop('disabled',$checked.val() == 'No');   
}).change(); 
```

[http://jsfiddle.net/U9Ywe/](http://jsfiddle.net/U9Ywe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:39:52.257

你可以这样做

**[现场演示](http://jsfiddle.net/dPaCT/1/)**

```
$("input:radio[name^=travel]").live('click', function() {

    idparts = this.id.split('_');
    textArea = document.getElementById('travelDetails_' + idparts[idparts.length - 1]);

    if (this.value === 'Yes')
       textArea.disabled = true;
    else 
        textArea.disabled = false;
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:45:01.887

```
$("[data-travelNumber]").click(function(){
    var txt = $("#travelDetails_" + $(this).attr("data-travelNumber"));
    if($(this).val() === "Yes")
        txt.removeAttr("disabled");
    else
        txt.attr("disabled", "disabled");
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T15:45:45.553

这应该这样做：

```
$("input:radio[name=travel]").live('click', function() {
    $('travelDetails_' + $(this).data("travelNumber")).attr('disabled', $(this).val() === 'Yes');
}); 
```

单击单选按钮时，获取它`travelNumber`，然后使用 启用或禁用文本区域`id='travelDetails_'+travelNumber`，具体取决于数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T15:49:46.057

试试这个：

```
$("input:radio[name=travel]").live('click', function() {
    f = $(this).attr("id").search("yes");
    i = $(this).attr("id").split("_")[2];

    if(f != -1) {
        $("#travelDetails_" + i).removeAttr('disabled');
    } else {
        $("#travelDetails_" + i).attr("disabled", "true");
    }
}); 
```

# c++ - 是否可以使用 SFINAE 检测类方法的常量性？

> ID：13992842
> 
> 赞同：4
> 
> 时间：2012-12-21T15:30:45.200
> 
> 标签：c++, templates, boost, c++11, sfinae

考虑这个结构：

```
struct foo {
  void dummy() const {}
}; 
```

是否可以使用 SFINAE 检测此方法的常量性？

例如，我想在一个可以在 a 中使用的 trait 中捕获这个属性`static_assert`：

```
static_assert(is_const_method<decltype(&foo::dummy)>::value, "Not const!"); 
```

我认为要么`std::is_const`或`std::remove_const`会在这里帮助我，但他们似乎并不包含这种“类型”的`const`ness。

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T15:41:49.230

当然，看起来像这样：

```
#include <type_traits>

template <class T>
struct is_const_method
    : std::false_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...)>
    : std::false_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) const>
    : std::true_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) volatile>
    : std::false_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) const volatile>
    : std::true_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) &>
    : std::false_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) const &>
    : std::true_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) volatile &>
    : std::false_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) const volatile &>
    : std::true_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) &&>
    : std::false_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) const &&>
    : std::true_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) volatile &&>
    : std::false_type
{
};

template <class R, class C, class ...T>
struct is_const_method<R (C::*)(T...) const volatile &&>
    : std::true_type
{
};

struct foo {
  void dummy() const {}
};

int main()
{
    static_assert(is_const_method<decltype(&foo::dummy)>::value, "Not const!");
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-21T15:42:13.130

您可以只使用部分专业化。

```
// false by default
template <typename Fun>
struct is_const_function : std::false_type {};

// breakdown member function type
template <typename Class, typename Result, typename... Args>
struct is_const_function<Result (Class::*)(Args...) const> : std::true_type {};
template <typename Class, typename Result, typename... Args>
struct is_const_function<Result (Class::*)(Args...) const volatile> : std::true_type {};
// consider ref-qualified ones for compilers that support it
template <typename Class, typename Result, typename... Args>
struct is_const_function<Result (Class::*)(Args...) const&> : std::true_type {};
template <typename Class, typename Result, typename... Args>
struct is_const_function<Result (Class::*)(Args...) const&&> : std::true_type {};
template <typename Class, typename Result, typename... Args>
struct is_const_function<Result (Class::*)(Args...) const volatile&> : std::true_type {};
template <typename Class, typename Result, typename... Args>
struct is_const_function<Result (Class::*)(Args...) const volatile&&> : std::true_type {}; 
```

您还可以添加更多的特化来满足 C 风格的可变参数函数，但坦率地说，亲爱的，我不在乎。

# webkit - TideSDK 中的 WebGL 支持

> ID：13992843
> 
> 赞同：0
> 
> 时间：2012-12-21T15:30:47.047
> 
> 标签：webkit, webgl, tidesdk

TideSDK 使用的 webkit 视图是否启用了 WebGL 支持？

是否也可以将 Web 视图配置为在 Windows 上使用本机 OpenGL 而不是 ANGLE 模拟着色器？（就像您可以使用 --use-gl=desktop 选项启动 Chrome 一样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:37:55.760

他们即将获得 webgl 支持。

关注[这个问题](https://github.com/TideSDK/TideSDK/issues/25)

[根据他们的博客](http://www.tidesdk.org/blog/)，看起来它将在 1.4 版本中得到支持。我还没有找到它的预计发布日期

# c - asprintf 中的“%.*s”是什么意思？

> ID：13992845
> 
> 赞同：-1
> 
> 时间：2012-12-21T15:31:06.100
> 
> 标签：c

> **可能重复：**
> [c中的printf中的“%.*s”是什么意思](https://stackoverflow.com/questions/7899119/what-does-s-mean-in-printf-in-c)

我找到了以下行：

```
asprintf(&c, "%s%.*s", *msg_in, size * rxed, buffer) 
```

我想知道`%.*s`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:32:46.523

该格式的意思是“使用*n 个*`%.*s`字符的字段宽度打印一个字符串，其中*n*是从下一个参数中读取的”。

 **所以在这里，它`buffer`以`size * rxed`字符宽度打印。（必要时用空格填充）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:34:38.353

我强烈建议阅读手册...

`.*`在格式字符串中表示：

> 精度未在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。

细节可以在[这里](http://www.cplusplus.com/reference/cstdio/printf/)看到。

所以你没有提供任何细节，但如果：的结果`size * rxed`是 5，那么你可以这样做：

```
asprintf(&c, "%s%.*s", *msg_in, size * rxed, buffer) 
```

或者

```
asprintf(&c, "%s%5s", *msg_in, buffer) 
```

达到同样的效果。**

# jquery-ui - 为什么 IE 中 JqueryUI 的按钮很慢？

> ID：13992850
> 
> 赞同：0
> 
> 时间：2012-12-21T15:31:37.430
> 
> 标签：jquery-ui, internet-explorer

我一直在跟踪我们的一个 javascript 应用程序中的一个性能问题（在 IE 中，更糟糕的是），我能够将其跟踪到 jQueryUI 按钮功能。我创建了一个显示问题的[jsfiddle](http://jsfiddle.net/SzZ87/4)。问题是3个部分：

首先，按钮的生成非常缓慢。该页面在 IE8 下 5 秒以上生成 800 个按钮，而当我禁用按钮功能时大约需要 700 毫秒。更糟糕的是，每个创建/删除周期都会变得越来越慢。相比之下，在 Chrome 中，使用按钮功能只需不到一秒（大约 600 毫秒），而没有按钮功能大约需要 50 毫秒。这两种浏览器的速度都降低了 10 倍！

其次，删除/销毁所有这些按钮也很慢。我使用`empty()`容器上的方法来清理所有按钮，并最终调用`destroy`按钮。此操作在 IE8 下大约需要 5 秒，在 Chrome 下需要 500 毫秒。删除 jquery 按钮功能后，在 IE8 中需要 200 毫秒，在 Chrome 中需要 30-40 毫秒。这是 20 倍的减速，比自己生成按钮还要糟糕。

第三，按钮功能似乎在 IE 中导致了巨大的内存泄漏。反复创建和删除按钮会导致内存使用量不断增加，但再次删除按钮功能可以解决此问题。

谁能解释这种行为？这是应该报告的 jQueryUI 中的性能问题还是我遇到了陷阱？任何解决方法？

**注意**：当我说我删除按钮功能时，并不是我`<button>`从文档中删除了元素，只是我删除了对 jqueryUI 按钮功能的调用：

```
.button({
   'text': true
}) 
```

# java - Java - 对 Math.random() 的多次调用搞砸了循环

> ID：13992851
> 
> 赞同：1
> 
> 时间：2012-12-21T15:31:44.043
> 
> 标签：java, random

我有以下方法：

```
public LinkedList<Object> init(int counter) {
    LinkedList<Object> list = new LinkedList<Object>();
    double decision, value, key;
    int max1 = 700;
    int max2 = 1000;

    for (int i = 0; i < counter; i++) {
        decision= Math.random();

        if (decision<= 0.2) {
            key = Math.random() * 1.5;
            value= Math.random() * max1 ;
            list.add(new A(value, key));
        } else {
            value= Math.random() * max2 ;
            list.add(new B(value));
        }
     }

     return list;
} 
```

我得到的问题是：如果我调用这个方法使用

```
init(100); 
```

然后检查结果列表的大小，它并不总是`100`. 相反，列表中的元素数量取决于我为`max1`和选择的值`max2`。例如，如果我选择`max2 = 1000000`，我最终会得到一个包含大约 15 个元素的列表。我怀疑这与`Math.random()`工作方式有关，但不知道它是如何发生的。是线程的问题吗？

如果有人想尝试这个，这里是类模板`A`和`B`（其中的工作不参与其中）：

```
public class A {
    public A(double value, double key) {}
} 

public class B {
    public B(double value) {}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:40:10.823

> 我怀疑 Math.random() 可能在后台运行线程；我自己没有创建任何额外的线程。

No, `Math.random()` does not run any threads in the background.

In fact, your function is perfectly fine. I've tested it extensively and it does exactly what one would expect. It always returns exactly `counter` elements.

I therefore have to conclude that your problem lies elsewhere, i.e. outside the code that you're showing us.

# android - 为什么我的FrameLayout结构在使用不同的android版本时会发生变化

> ID：13992859
> 
> 赞同：0
> 
> 时间：2012-12-21T15:32:35.153
> 
> 标签：android, android-layout, android-framelayout

为什么我的 FrameLayout 结构在 android 版本 7-13 和 14-17 之间有所不同？如果与 android 版本 14-17 一起使用，TableLayout 会向上移动。

布局是我制作具有 2 计时和日期功能的模拟时钟的粗略尝试。我试图上传一张图片，但我没有足够的声誉来上传一张。

什么是 d 补救 4 这个 1？谢谢！！！！！！！！！！

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/widget34"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content" >

    <TableLayout
        android:id="@+id/Table"
        android:layout_width="152dp"
        android:layout_height="111dp"
        android:layout_gravity="center"
        android:layout_marginTop="35dp" >

        <TableRow
            android:id="@+id/Tablerow"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_gravity="center"
            android:layout_weight="1" >

            <AnalogClock
                android:id="@+id/AnalogClock1"
                android:layout_width="44dp"
                android:layout_height="44dp"
                android:layout_gravity="left"
                android:layout_weight="1"
                android:background="#000000" />

            <AnalogClock
                android:id="@+id/widget35"
                android:layout_width="44dp"
                android:layout_height="44dp"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:background="#000000" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_gravity="center"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/date"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_marginLeft="21dp"
                android:layout_weight="1"
                android:background="#000000"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:text="some txt"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>
    </TableLayout>

    <AnalogClock
        android:id="@+id/AnalogClock01"
        android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:layout_gravity="top"
       android:dial="@drawable/dialg" />

  </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:37:47.863

现在这个布局在所有安卓版本中都是稳定的。也许我的初始布局的问题是 TableLayout。

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget32"
    android:layout_width="280dp"
    android:layout_height="280dp"
    android:background="@drawable/dial_01" >

  <FrameLayout
    android:id="@+id/Table"
    android:layout_width="200dp"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="120dp" >

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <AnalogClock
            android:id="@+id/AnalogClock1"
            android:layout_width="44dp"
            android:layout_height="44dp"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:hand_hour="@drawable/invictus"
            android:hand_minute="@drawable/hourc2" />

        <AnalogClock
            android:id="@+id/widget35"
            android:layout_width="44dp"
            android:layout_height="44dp"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:hand_hour="@drawable/hourc2"
            android:hand_minute="@drawable/invictus" />
     </LinearLayout>

     <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="@drawable/background"
        android:paddingLeft="2dp"
        android:paddingRight="2dp"
        android:text="Wed 01"
        android:textAppearance="?android:attr/textAppearanceMedium" />
  </FrameLayout>

  <AnalogClock
    android:id="@+id/AnalogClock01"
  android:layout_width="280dp"
  android:layout_height="280dp" /> 
```

</帧布局>

# java - 如何将光标设置到 SWT 树的特定单元格

> ID：13992862
> 
> 赞同：2
> 
> 时间：2012-12-21T15:32:41.033
> 
> 标签：java, tree, cursor, swt, treeviewer

我有一个 SWT `Tree`，我想将光标设置到该 SWT 树的特定单元格。我可以访问`TreeViewer`.

下面的屏幕截图显示了第 1 列的光标。我是手动完成的，但我想以编程方式完成。

![在此处输入图像描述](../Images/e4b5d2e1dbf0f335e3aa8a36132732da.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:40:10.307

看看[`TreeViewer#editElement(Object element, int column)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/TreeViewer.html#editElement%28java.lang.Object,%20int%29)。

`element`表中的模型元素和`column`列在哪里。

Javadoc 指出：

> 在给定的列索引处开始编辑给定的元素。

# centos - LSF 平台错误：lsb_init：LSF 库调用失败：无法打开文件 lsf.conf

> ID：13992863
> 
> 赞同：6
> 
> 时间：2012-12-21T15:32:41.970
> 
> 标签：centos, lsf

我对 LSF 平台有疑问，我无法解决问题。

出于编写脚本的原因，我需要使用 perl 脚本检查正在运行/挂起的作业与 'bjobs'（和其他 b***）。

由于某种原因它不起作用，我能够查看以下错误消息：

```
lsb_init: Failed in an LSF library call: Unable to open file lsf.conf 
```

谷歌和手册中的一些研究并没有给出很好的结果，我做了一点测试。

我的帐户（最大）是 LSF 管理员。Root 也是 LSF 管理员。

所以我切换到 root，并尝试启动 bjob​​s，但使用 'sudo -u max' 是最大的。请看一下这些命令：

```
hn[~]=> whoami
max
hn[~]=> bjobs
No unfinished job found
hn[~]=> su
Password: 
[root@hn max]# whoami
root
[root@hn max]# sudo -u max whoami
max
[root@hn max]# bjobs
No unfinished job found
[root@hn max]# sudo -u max bjobs
lsb_init: Failed in an LSF library call: Unable to open file lsf.conf 
```

我该如何纠正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T23:15:09.353

默认情况下，LSF 将在 /etc 中查找 lsf.conf。如果它不存在，那么它将在环境变量 LSF_ENVDIR 中的目录中查找。

sudo 可能正在重置您的环境。尝试`sudo -i`或投入

```
Defaults !env_reset 
```

在您的 sudoers 文件中。

你也可以试试这样的

```
sudo -u max LSF_ENVDIR=$LSF_ENVDIR LSF_SERVERDIR=$LSF_SERVERDIR bjobs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T12:58:09.500

对于围绕 SSH 编写脚本的任何人，必须在命令行上显式设置上述两个变量，如下所示：

```
ssh foo@bar.net 'export LSF_ENVDIR=/path/to/lsf/envdir; export LSF_SERVERDIR=/path/to/lsf/serverdir; bsub ...' 
```

或在文件`~/.ssh/environment`文件中（前提是 sshd 配置了`PermitUserEnvironment yes`）。

# android - 画一个边缘褪色的环形？

> ID：13992865
> 
> 赞同：0
> 
> 时间：2012-12-21T15:32:45.080
> 
> 标签：android, drawable, shapes, edges, fading

如何在可绘制对象中获得边缘褪色的环形？我试过这个，但它不工作

```
<item>
    <shape
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="ring"
        android:thickness="3dp"
        android:useLevel="false" >
        <gradient
            android:startColor="#DDDDDD"
            android:endColor="#33DDDDDD"
            android:useLevel="false" 
            android:type="sweep"/>
        <size
            android:height="80dip"
            android:width="80dip" />
    </shape>
</item> 
```

我想要这样的东西：

![](../Images/2c76a0a50af7f8d5be8be374fe7feab3.png)

# c# - 将 foreach-loop 更改为包含 XmlNode 的方法

> ID：13992868
> 
> 赞同：0
> 
> 时间：2012-12-21T15:32:49.660
> 
> 标签：c#, methods, foreach

我有一个使用称为“航班”的 XmlNodeList 的 foreach 循环。所以 foreach 本身看起来像这样：

```
foreach (XmlNode flight in flights)
        {
         *code*
        } 
```

在这个foreach循环中，我得到了几个字符串（这里我设置了一个标签）：

```
callsign.Text = flight.Attributes.GetNamedItem("callsign").Value; 
```

但是现在，我不再需要 foreach，我需要使用与方法相同的代码。但是当我重写上面提到的 foreach 行时

`public void CreateFlight()`

它在我使用`flight.Attributes.GetNamedItem`等的任何地方都说。“当前上下文中不存在名称“航班”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:35:18.853

您需要将一个`flight`对象传递给您的方法或在方法内创建一个新对象。鉴于名称我怀疑后者：

```
public void CreateFlight()
{
    XmlNode flight = new XmlNode();

    // The rest of your code

    // Do something with the flight object?
} 
```

但这只会创建一个空对象，您需要从某个地方填充它。但是，您的用法和评论意味着您需要这样的东西：

```
public string CreateFlight(XmlNode flight)
{
    return flight.Attributes.GetNamedItem("callsign").Value;
} 
```

然后你会这样称呼它：

```
foreach (XmlNode flight in flights)
{
    string callSign = CreateFlight(flight);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:37:48.073

像这样的东西：

```
public string CreateFlight(XmlNode flight)
{
    return flight.Attributes.GetNamedItem("callsign").Value;
} 
```

用法：

```
callsign.Text = CreateFlight(flight); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:38:05.160

更改`CreateFlight`方法以接受`XmlNode`名为 的参数`flight`。调用 时`CreateFlight`，传入要从中提取数据的节点。

# apache - 使用 mod_rewrite 隐藏 QueryString

> ID：13992876
> 
> 赞同：0
> 
> 时间：2012-12-21T15:33:04.403
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试隐藏链接**localhost/out.php?url=http://www.foo.bar的查询字符串部分**

使 URL 看起来：**localhost/out.php**

我的 apache mod_rewrite 模块已启用并正在工作。

我已经阅读了一些其他答案并尝试了一堆 rewritecond 和 rewriterules 但我无法使其正常工作，那么有人可以帮助我吗？:$ty

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:38:03.083

```
RewriteRule ^/out.php /out.php? 
```

从[这里](http://wiki.apache.org/httpd/RewriteQueryString#Modifying_the_Query_String)

# javascript - ajax调用后，颜色框内的谷歌地图呈现偏灰色区域

> ID：13992877
> 
> 赞同：0
> 
> 时间：2012-12-21T15:33:07.243
> 
> 标签：javascript, jquery, google-maps-api-3

我使用 google Maps Api v3 使用 ajax 调用在 colorbox 内渲染 google 地图。

这是我用作地图和其他一些东西的容器的 div，它将显示在颜色框中，也将调用 witch click ajax 上的锚：

```
<div id="cb-js-map-content" style="display: none"></div>
<a href="#cb-js-map-content" id="cb-js-showMap">
   Show Map
</a> 
```

我使用 ajax 在 witch 中检索文档是地图标记和将生成地图的 js 函数。这是 ajax 调用和颜色框初始化：

```
FSM.mapAjaxCall = {
            GetMap: function () {
                $("#cb-js-showMap").click(function () {

                    $.ajax({
                        url: //my ajax url
                        cache: false,
                        dataType: 'json',
                        success: function (data, status) {
                            var target = $("#cb-js-map-content");
                            target.append(data.Html);
                            if (typeof (data.Javascript) === "undefined") {
                                return;
                            }
                            $.loadScript(data.Javascript);
                        }
                    });
                     $("#cb-js-map-content").show();

                    $("#cb-js-showMap").colorbox({
                        inline: true,
                        height: colorboxHeight,
                        width: colorboxWidth,
                        onClosed: function () {
                           $("#cb-js-map-content").hide();
                        }

                    });
                });
            }
        }; 
```

这是加载地图的 div

```
<div class="inlineClass" id="cb-js-mainMap" style="width:1023px; height: 800px; display:block"></div> 
```

使用这个js函数：

```
initializeMap = function () {
                var mapOptions = {
                    center: centerLatlng,
                    zoom: 8,
                    minZoom: 10,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    scrollwheel: false
                };
                map = new google.maps.Map(document.getElementById("cb-js-mainMap"), mapOptions);

                //Add event for zoom changed and store data for map center
                google.maps.event.addListener(map, 'zoom_changed', function () {
                   //listener code
                });
                google.maps.event.trigger(map, 'resize');

            } 
```

现在我的问题是这个设置几乎总是在 Firefox 上有效，而在 Chrome 中很少。这是有问题的屏幕的样子： ![在此处输入图像描述](../Images/7aa0d866e819a39d31f4ad12ce5a8fdb.png)

关闭颜色框弹出窗口有时可以解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:48:27.420

在成功回调中触发resize-event`$.ajax()`

# php - PHP 行被解析为单独的对象

> ID：13992878
> 
> 赞同：0
> 
> 时间：2012-12-21T15:33:15.810
> 
> 标签：php, wordpress

我的 wordpress 小部件中有一行代码从 RSS 提要输出：

```
<?php echo $entry->title ?> 
```

当显示它看起来像：

> 220,000 美元 :: 504 Freemason St, Unit 2B, Norfolk VA, 23510

或者

> 274,900 美元 :: 1268 Bells Road, Virginia Beach VA, 23454

将其分解为不同对象的最简单方法是什么？

例如，我想将价格、街道名称和城市状态 zip 放在不同的对象中。问题是一些地址有单位编号，这使事情变得复杂。以下是我希望它如何工作的示例：

```
<?php echo $entry->price ?>
<?php echo $entry->street ?>
<?php echo $entry->citystatezip ?> 
```

> 220,000 美元
> 504 Freemason St, Unit 2B
> Norfolk VA, 23510

或者

> 274,900 美元
> 1268 Bells Road
> Virginia Beach VA, 23454

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:37:04.893

你需要的是一个正则表达式，检查[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:47:11.077

这是一个非常粗略的正则表达式，似乎能够解析您的字符串。我不是最好的正则表达式，但它似乎有效。

```
/^(\$(?:\d{1,3},?)*) :: (\d* [\w\s,\d]*), ([\w\s]* \w{2}, \d{5})$/ 
```

与`preg_match`;一起使用 第 1 组是价格，第 2 组是地址，第 3 组是城市/州/邮编。

例子：

```
<?php
$ptn = '/^(\$(?:\d{1,3},?)*) :: (\d* [\w\s,\d]*), ([\w\s]* \w{2}, \d{5})$/';
if(preg_match($ptn, $entry->title, $match) === 1){
    $price = $match[1];
    $street = $match[2];
    $citystatezip = $match[3];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:36:36.703

使用 fe`array explode ( string $delimiter , string $string [, int $limit ] )`如果您使用正确的分隔符，它将为您提供带有字符串的数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:38:28.763

下面的代码将根据需要填充您的 $entry 对象：

```
$string = '$274,900 :: 1268 Bells Road, Virginia Beach VA, 23454';
$pricePart = explode('::', $string);
$addressPart = explode(',', $pricePart[1]);

$entry = new stdClass();
$entry->price = trim($pricePart[0]);

if ( count($addressPart) == 3 ) {
    $entry->street = trim($addressPart[0]);
    $entry->citystatezip = trim($addressPart[1]) . ', ' . trim($addressPart[2]);
} else {
    $entry->street = trim($addressPart[0]) . ', ' . trim($addressPart[1]);
    $entry->citystatezip = trim($addressPart[2]) . ', ' . trim($addressPart[3]);
} 
```

**更新了处理单位位的答案**

**更新：更改了数组名称，我讨厌 $array.. 名称.. 即使它只是一个模型**

（注意：这段代码不是最漂亮的，但它为工作提供了基础。应该清理和改进一下）

# tsql - 复杂查询连接检查值不存在

> ID：13992879
> 
> 赞同：0
> 
> 时间：2012-12-21T15:33:17.473
> 
> 标签：tsql, sql-server-2008-r2

我正在努力应对查询的巨大挑战。我有两张桌子，第一张

Tb1 drID schedDate rteID

第二个有：

Tb2 drID FName LName 活动

必须检查 Tb1 drID 是否为 Null 或空白并在 schedDate 上匹配，并且 drID 不能有任何与所选日期匹配的 Tb2.drID 的值，检查 Null 和 '' 基本上是这样做的。

```
SELECT drID, schedDate, rteID
FROM            Tb1
WHERE        (drID IS NULL OR drID = '') AND (schedDate = 11 / 1 / 2012) 
```

从所有这些中，我需要从 TB2 drID、Fname、LName 返回，其中 Active = True 并且 drID 在 tb1 中的任何记录中不存在所选的 schedDate。

任何可能的日期都有许多 tb1 rteID 记录。

感谢您对此的任何帮助以及巨大的假期谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:42:22.537

您可以将您的选择语句设置为子查询，例如：

```
SELECT drID, Fname, LName
FROM   TB2
WHERE  Active = True 
 AND   drID NOT IN (
       SELECT drID
       FROM   Tb1
       WHERE  (drID IS NULL OR drID = '')
        AND  (schedDate = 11 / 1 / 2012)
       ) 
```

**编辑**
以处理 schedDate 为空的情况

```
SELECT drID, Fname, LName
FROM   TB2
WHERE  Active = True 
 AND   drID NOT IN (
       SELECT drID
       FROM   Tb1
       WHERE  (drID IS NULL OR drID = '')
        AND  (schedDate = @yourDate OR schedDate IS NULL)
       ) 
```

**编辑 2**
要处理 drID 为空的情况，您可以使用`NOT EXISTS`此 SO 帖子中关于[NOT IN vs NOT EXISTS突出显示的方法](https://stackoverflow.com/q/173041/96505)

```
SELECT drID, Fname, LName
FROM   TB2
WHERE  Active = True 
 AND   NOT EXISTS (
       SELECT drID
       FROM   Tb1
       WHERE  (schedDate = @yourDate) 
        AND   Tb1.drID = TB2.drID
       ) 
```

# visual-studio-2010 - 设置 Visual Studio 以将 LINQ 与 Interbase 结合使用

> ID：13992884
> 
> 赞同：1
> 
> 时间：2012-12-21T15:33:25.190
> 
> 标签：visual-studio-2010, linq, sharepoint-2010, firebird, interbase

我最近拥有了一个*Interbase* SQL 数据库。数据库本身是从 2006 年开始的。根据我自己的研究，我确定可以通过以下两种方式之一连接到 Interbase 数据库，ODBC 或 ADO.NET 2.0。

我设法在 Visual Studio 中添加了一个 ODBC 数据连接。我的老板认为以这种方式执行查询很糟糕，并且确信有一种方法可以使用 LINQ，也许可以使用 Firebird。

该项目的限制之一是我们最终需要将数据库连接到 SharePoint 应用程序。如果有人对可以在 SharePoint 之外运行的东西有任何想法，我们不反对创建 Web 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:51:45.010

借助 Firebird，您可以使用[此](http://www.firebirdsql.org/en/net-provider/)实体框架提供程序。我不知道 Interbase 的此类提供商，但可能也有一些。

# c++ - C++ 中的枚举类型是跨平台的吗？

> ID：13992897
> 
> 赞同：2
> 
> 时间：2012-12-21T15:34:12.817
> 
> 标签：c++, qt, serialization, enums, cross-platform

> **可能重复：**
> [C++ 中枚举类型数据的大小是多少？](https://stackoverflow.com/questions/8115550/what-is-the-size-of-an-enum-type-data-in-c)

enum 数据类型是如何在内部存储的（我想象为 8/16/32 位 int？），它可以安全地序列化还是应该使用 quint8 之类的东西来存储值？换句话说，`sizeof(MyEnum)`保证在所有平台上都是相同的大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T15:36:08.093

> 换句话说，sizeof(MyEnum) 是否保证在所有平台上都具有相同的大小？

您可以在 C++11 中设置显式类型（但*不能*在早期的 C++ 化身中）：

```
enum class Drug : char {
    Cocaine,
    Cannabis,
    Crack
}; 
```

或者

```
enum Sex : uint32_t {
    Male,
    Female,
    Other
}; 
```

`class`顺便说一句，在前面使用`enum`强制用户`Drug`拼写它`Drug::Cocaine`，对于没有在其声明前面的枚举`class`，拼写是可选的（两者`Sex::Male`都是`Female`有效的）。

2011 年之前针对 C++es 的 Hack 包括以下内容，它们强制最小化大小：

```
enum Frob {
    ...
    FORCE_DWORD          = 0x7fffffff
}; 
```

在实践中看到，例如 ReactOS 的[DirectX-SDK 实现](http://doxygen.reactos.org/dd/df8/d3d8types_8h_a8ef2b49d3b5f6e59fdc4fd76d252b764.html)。

* * *

### 标准参考

> ### 7.2 枚举声明 [dcl.enum]
> 
> [...]
> 
> §6：对于底层类型不固定的枚举，底层**类型是一个整数类型，可以表示枚举中定义的所有枚举值。如果没有整数类型可以表示所有枚举数值，则枚举格式错误。使用哪种整数类型** 作为基础类型由实现定义，除非基础类型不得大于 int，除非枚举数的值不能适合 int 或 unsigned int。如果 enumerator-list 为空，则基础类型就好像枚举有一个值为 0 的单个枚举器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:36:07.090

当然不。枚举的许多特征是实现定义的。确保选择一个真实的（安全的）类型并将其序列化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:36:25.000

enum 的大小与 相同`int`，因此不能保证在所有地方都具有相同的长度。

使用, , , 等`stdint.h`中定义的类型之一。`int32_t``int16_t`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:36:20.260

它通常与 int 相同，可以有不同的大小。[看到这个答案。](https://stackoverflow.com/a/366026/193892)

# intellij-idea - Ubuntu 12.04 键绑定在 IntelliJ Idea 12 中不起作用

> ID：13992898
> 
> 赞同：2
> 
> 时间：2012-12-21T15:34:14.097
> 
> 标签：intellij-idea, ubuntu-12.04, ubuntu-unity

我已经安装了 IntelliJ Idea Community Edition (12.0.1) 的最新版本，但那里的键绑定存在问题。我正在使用带有 Unity 的 Ubuntu 12.04 LTS。

涉及字母（ctrl-a，ctrl-c，ctrl-v）的他们都没有在Idea中工作。他们正在所有其他应用程序中工作。

我可以用鼠标在 Idea 中复制/粘贴文本，它向我显示此键绑定是 ctrl-c/ctrl-v，但它们只是不起作用。

我不知道是什么问题，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T08:36:25.510

通常这种问题是因为非英语键盘布局在操作系统设置的布局列表中排在第一位。尝试重新排序它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T04:33:07.420

安装 14.0.3 后我也遇到了同样的问题。似乎是由于检查了 Tools > Vim Emulator。取消勾选后问题解决。

# google-app-engine - 如何将应用引擎 sdk eclipse 插件 1.7 更改（添加）到 1.6？

> ID：13992900
> 
> 赞同：1
> 
> 时间：2012-12-21T15:34:27.087
> 
> 标签：google-app-engine

我安装了 eclipse 3.7 和 app engine 插件 3.7 ..

谷歌应用引擎部署需要java 1.6 ..（Java7代码导致部署错误T_T）

如何将 appengine-java-sdk-1.7.4 更改/添加到 appengine-java-sdk-1.6.4？

Eclipse 插件（http://dl.google.com/eclipse/plugin/3.7）只有 sdk 1.7.4 和 google sdk 下载链接（https://developers.google.com/appengine/downloads）只有 1.7.4 T_T

谢谢...

# php - HTML页面中的php代码

> ID：13992907
> 
> 赞同：0
> 
> 时间：2012-12-21T15:34:39.383
> 
> 标签：php, html

我有phpbb论坛，我想在注册页面中添加一个字段...修改是为了让用户能够选择他们的角色..例如成为版主..或成为普通会员或..我是实际上使论坛有点私密，我将用户分组，因此他们对某些论坛的访问受到限制。无论如何，我有 html 模板文件，我想从 php 文件代码中获取下拉菜单列表

这是我的php代码

```
<?php
include '/blah/config.php';
$con = mysql_connect($dbhost, $dbuser, $dbpasswd);
if(!$con)
{
    die("Couldn't Connect: ".mysql.error());
}

mysql_select_db($dbname, $con);
$result = mysql_query("SELECT group_name FROM phpbb_groups");
$array = array();
while($row = mysql_fetch_array($result))
{
    $array[] = $row[0];
}

mysql_close($con); 

foreach( $array as $group_name)
{
    echo $group_name."</br>"; // I want to put this value in the dropdown list in the html file
}
?> 
```

这是我要编辑的 html 代码的一部分

```
<dt><label>GroupID:</label></dt>
  <dd><select name="group_id" id="group_id"" tabindex="7" class="autowidth">I want to get the data from php in here</select></dd> 
```

PS：模板文件为html文件，不能重命名为php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:55:45.267

好的，抱歉最后一个答案，没有在那里阅读您的PS...

这是一个 jQuery 解决方案，使用 JSON 作为 PHP 文件的输出，然后使用异步请求来填写下拉列表。

**PHP 代码**

```
// The rest of your code, then output your $array this way
header("Content-type: application/json");
$array = array("banana", "apple", "eggroll");
echo json_encode($array);
die; 
```

**您的 HTML（示例）**

如果您还没有它，请确保将 jquery 添加到您的 HEAD 中。

```
<dt><label>GroupID:</label></dt>
<dd><select name="group_id" id="group_id"" tabindex="7" class="autowidth"></select></dd>
<script>
    $(document).ready(function() {
       $.get('sefesf.php', {"q":"1"},  function(data) {
           if(data.length > 0)
           {
                for(var i = 0; i < data.length; i ++)
                {
                    $('select#group_id').append('<option>' + data[i] + '</option>');
                }
           }
       }); 
    });
</script> 
```

如果您不需要发送任何 GET 参数，请务必将 sefesf.php 更改为带有 json 输出的 php 文件，并将 {"q":"1"} 更改为 {}。

# c++ - 可变长度结构

> ID：13992914
> 
> 赞同：1
> 
> 时间：2012-12-21T15:35:27.323
> 
> 标签：c++, c, openmax

OMX 提供了一个具有以下定义的结构

```
/* Parameter specifying the content URI to use. */
typedef struct OMX_PARAM_CONTENTURITYPE
{
OMX_U32 nSize;
/**< size of the structure in bytes */
OMX_VERSIONTYPE nVersion; /**< OMX specification version information */
OMX_U8 contentURI[1];     /**< The URI name*/
}OMX_PARAM_CONTENTURITYPE;
OMX_IndexParamContentURI,
/**< The URI that identifies the target content. Data type is OMX_PARAM_CONTENTURITYPE. */ 
```

我有一个常量 char 数组要设置。

```
char* filename = "/test.bmp"; 
```

据我了解，我需要以某种方式将 memcopy 文件名设置为 struct.contentURI ，然后相应地更新 struct.size 。我该怎么做？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:49:18.567

首先，您需要分配足够的内存来包含固定大小的部分和文件名：

```
size_t uri_size = strlen(filename) + 1;
size_t param_size = sizeof(OMX_PARAM_CONTENTURITYPE) + uri_size - 1;
OMX_PARAM_CONTENTURITYPE * param = malloc(param_size); 
```

加 1 以包含终止字符，减 1 因为结构已经包含一个字节的数组。

在 C++ 中，您需要进行强制转换，并且应该使用智能指针或向量来确保异常安全：

```
std::vector<char> memory(param_size);
OMX_PARAM_CONTENTURITYPE * param = 
    reinterpret_cast<OMX_PARAM_CONTENTURITYPE *>(&memory[0]); 
```

然后您可以填写以下字段：

```
param->nSize = param_size;
param->nVersion = whatever;
memcpy(param->contentURI, filename, uri_size); 
```

完成后不要忘记`free(param)`。

# datetime - 如何去中心化 JSF 中的时区？

> ID：13992916
> 
> 赞同：4
> 
> 时间：2012-12-21T15:35:35.163
> 
> 标签：datetime, jsf, timezone, converter

我正在为我的日期输入使用以下 JSF 转换器。

```
<f:convertDateTime dateStyle="medium" timeZone="EST" type="date" /> 
```

我想集中转换器，以便我可以在一个地方更改时区或日期样式。这怎么可能？

我可以覆盖`<f:convertDateTime>`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T15:47:05.537

唯一的方法是依赖系统默认时区（而不是 JSF 内部使用的 UTC）。因此，如果您对生产运行时环境有 100% 的控制权并且生产系统平台时区是 EST，那么只需将以下上下文参数添加到`web.xml`：

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

这样，JSF 将使用系统平台时区[`TimeZone#getDefault()`](http://download.oracle.com/javase/6/docs/api/java/util/TimeZone.html#getDefault%28%29)作为转换器的默认时区而不是 UTC。

如果您无法控制它，那么最好的办法是创建一个应用程序范围的 bean 来保存该属性并引用它：

```
<f:convertDateTime ... timeZone="#{app.timeZone}" /> 
```

您*可以*按如下方式扩展[`DateTimeConverter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/DateTimeConverter.html)后面的类，以获得已设置所有属性的转换器，但是如果不将其包装在自定义标记中（这需要一个和一些 XML 样板`<f:convertDateTime>`），您将无法从视图端声明其他属性`TagHandler`):

```
@FacesConverter("defaultDateConverter")
public class DefaultDateConverter extends DateTimeConverter {

    public DefaultDateConverter() {
        setDateStyle("medium");
        setType("date");
        setTimeZone(TimeZone.getTimeZone("EST"));
    }

} 
```

用它作为`<f:converter converterId="defaultDateConverter" />`

# javascript - 将使用 getPicture 拍摄的图像直接存储到 sqlite 数据库 phonegap

> ID：13992917
> 
> 赞同：0
> 
> 时间：2012-12-21T15:35:43.547
> 
> 标签：javascript, html, sqlite, cordova

嘿，我知道这是一个有争议的话题，关于在数据库中存储图像或图像的路径，但是对于这个特定的应用程序，当用户拍摄照片时，我不希望他们能够访问它，并且以我的方式将数据传输到我需要发送 blob 的服务器。

有没有人有一个功能可以拍照并将其作为blob直接保存到sqlite数据库中的列中？

谢谢，目前我只有以下功能来处理图像：

```
var pictureSource;  
var destinationType;

function onPhotoDataSuccess(imageData) {
    console.log("* * * onPhotoDataSuccess");
    var cameraImage = document.getElementById('cameraImage');
    cameraImage.style.visibility = 'visible';
    cameraImage.src = "data:image/jpeg;base64," + imageData;
}

function take_pic() {
    navigator.camera.getPicture(onPhotoDataSuccess, function(ex) {
        alert("Camera Error!");
    }, { quality : 30, destinationType: Camera.DestinationType.DATA_URL });
} 
```

再次感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:30:58.950

我发现了这个： [Phonegap 数据库问题 - 在数据库中存储图像](https://stackoverflow.com/questions/3498830/phonegap-database-problem-storing-images-in-the-database)

有一个答案，所以应该为你解决问题。

一个原始的例子：

```
function onPhotoDataSuccess(imageData) {                
   // Get image handle
   var smallImage = document.getElementById('smallImage');

   // Unhide image elements
   smallImage.style.display = 'block';
   smallImage.src = imageData;

   /* do something else with imageData :) */

} 
```

请也阅读此内容：

[http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html)

这是其中的一部分，但也请在此之前阅读；）

您可以对编码的图像或 URI 做任何您想做的事情，例如：

> 在标签中渲染图像（参见下面的示例） 在本地保存数据（LocalStorage、Lawnchair 等） 将数据发布到远程服务器

# knockout.js - 从具有多个可观察属性的对象获取一个通知

> ID：13992923
> 
> 赞同：3
> 
> 时间：2012-12-21T15:36:05.083
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用淘汰[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)为我自动创建我的视图，并且它们运行良好。

但是，我使用[Raphael.js](http://raphaeljs.com/)根据映射对象中的值生成一个仪表，但我注意到仪表会为每个更新的 observable 重新绘制。鉴于页面上有大量此类仪表，每次我从 AJAX 调用返回新数据时，将它们重新绘制 3 次对性能来说并不是很好。

因此，我已使用`copy`映射选项将对象上的所有属性（除了一个属性）更改为普通的 javascript 属性。

*现在我遇到的问题是，在所有直接的 javascript 属性都更新之前*，一个可观察的属性正在更新，因此仪表的某些部分不同步。具体来说，可观察属性是 DisplayValue，我将其作为文本输出到仪表的中间，而我还有一个普通属性 PercentValue，用于在仪表上实际绘制线条。因此 DisplayValue 在 PercentValue 之前更新，这会导致重新绘制仪表，这意味着仪表上的线始终显示最后一个 PercentValue，而不是当前的。

我查看了[油门扩展器](http://knockoutjs.com/documentation/throttle-extender.html)，看来我必须添加一个包含我的两个可观察对象的计算属性才能工作，但我不喜欢必须添加一个属性的想法获得此功能。同样，我假设我可以添加一个可观察属性（例如 LastUpdated）并在整个对象更新后手动更新它，但这也让人不满意。

[对于combineObservable](https://github.com/SteveSanderson/knockout/issues/469)似乎确实存在一个问题，所以我想目前无法以我想要的方式执行此操作。

那么，有没有更好的方法来完全做到这一点？是否有某种方法可以在可观察对象之前更新正常的 javascript 属性？我猜这些属性是按字母顺序处理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:08:50.710

我主要实施了 RP 的建议，但正如他作为评论所说，我的实施方式略有不同，我想我会在这里完整回答，以防它对其他人有用。

我已经使我的仪表使用普通 JS 属性的所有属性，而不是将 DisplayValue 保留为可观察的，但我已向对象添加了一个新的可观察属性，称为更新。使用映射插件将新数据复制到现有对象后，我使用上面提到的 valueHasMutated 方法 RP。

```
ko.mapping.fromJS(point, existingPoint);
existingPoint.updated.valueHasMutated(); 
```

我有一个淘汰赛[自定义绑定处理程序](http://knockoutjs.com/documentation/custom-bindings.html)，我使用它绑定到 observable 属性

```
ko.utils.unwrapObservable(viewModel.updated); 
```

现在我只触发了一个更新事件。显然，我仍然不认为这是理想的，但是除非映射插件可以选择仅在复制所有正常属性后才触发可观察对象已更新，否则这可能是最佳选择。

# java - 在 Spring 中将 JPA EntityManager 和 Hibernate 会话与共享事务管理器一起使用

> ID：13992930
> 
> 赞同：9
> 
> 时间：2012-12-21T15:36:16.140
> 
> 标签：java, spring, hibernate, jpa, activiti

我们处境艰难。

1.  有一个使用休眠特殊功能的大型项目，因此无法退出休眠。
2.  我们将以嵌入式模式将 Activiti 流程引擎添加到项目中，并使用 JPA 扩展（仅适用于 EntityManager）
3.  有些实体不应该出现在 JPA 持久单元中，因为正如 activiti 文档所说，所有实体都必须有 @Id 并且不能使用 @IdClass/@EmbeddedId 所以我们必须从持久单元中排除这些实体
4.  我们希望为 EntityManager 和 Session 使用一个共享事务管理器。数据源也相同（甚至共享）
5.  一切都是春天！

所有这些努力都是为了让 Activiti 能够将 EntityManager 用于其 JPA 扩展，同时让现有的休眠相关代码继续工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:54:59.140

首先，如果您想拥有一个持久性单元并且您实际上在 Hibernate 实体中使用@IdClass/@EmbeddedId，则上述第三点可能难以适应。以下是两种可能的解决方案：

1.  将 JPA 拉入您的项目并为您现有的 Hibernate 实体配置一个持久性单元，但通过直接访问 Session 继续将现有调用委托给 Hibernate。在这种情况下，您的配置将移至 JPA，但您的代码不会。这种方法还假设您有一些合理的抽象以可插入的方式分配 Session 对象。有关解决方案的症结，请参阅[此问题](https://stackoverflow.com/questions/4148231/how-can-i-get-the-session-object-if-i-have-the-entitymanager)。如果您对上述第 3 点的灵活性为零，则此方法可能不适合您。

2.  创建会话工厂和持久性单元，并使用 JTA 和两个 XA 数据源协调事务。即使您的数据可能驻留在同一个数据库中，如果采用这种方法，您仍需要确保在配置中创建不同的数据源。这将防止 Spring 的事务代理在您参与分布式事务时感到困惑。这可能是最干净的方法，但确实带有 XA 交易的污名，这取决于您的容器，如今这更像是一个政治问题，而不是技术问题。

# c# - Silverlight -CRM2011：货币不能为空

> ID：13992931
> 
> 赞同：0
> 
> 时间：2012-12-21T15:36:17.587
> 
> 标签：c#, silverlight, dynamics-crm-2011

我使用 Silverlight o-data 服务与我的应用程序中的 crm 2011 交互当我尝试将数据保存在实体 SalesOrder 中时，如下所示：

```
Private void beginSave()
{
SalesOrder orderHeader = new SalesOrder();

orderHeader.TransactionCurrencyId = new EntityReference(){ Id = new Guid("77D695B5-ACB4-E111-97BC-00155D55B216"), LogicalName="transactioncurrency" };
orderHeader.AccountId = new EntityReference() { Id = new Guid(MyClassGeneralOrder.customerId), LogicalName = "account" };
orderHeader.Name = "My Name";
Money totalAmount = new Money(); Money totalAmountBase = new Money(); 
Money totalTaxe = new Money(); Money totalAmountLessFreight = new Money();
totalAmount.Value = (decimal)MyClassGeneralOrder.InvoiceTotal;
totalAmountBase.Value = (decimal)MyClassGeneralOrder.totalRetail;
totalTaxe.Value = (decimal)MyClassGeneralOrder.totalCharges;
totalAmountLessFreight.Value = (decimal)MyClassGeneralOrder.totalNet;
orderHeader.TotalAmount = totalAmount;
orderHeader.TotalAmount_Base = totalAmountBase;
orderHeader.TotalTax = totalTaxe;
orderHeader.TotalAmountLessFreight = totalAmountLessFreight;
orderHeader.Description = element.Name;
orderHeader.PriceLevelId = new EntityReference() { Id = new Guid("03C5C4CB-EBD0-E111-8140-00155D55B216"), LogicalName="pricelevel" };

_context.AddToSalesOrderSet(orderHeader);
_context.BeginSaveChanges(SaveCallback, orderHeader);

}

private void SaveCallback(IAsyncResult result)
{
_context.EndSaveChanges(result);

} 
```

在我的函数 EndSaveChanges（结果）中，我收到此错误消息: : **« The Currency Cannot Be null »。** 我不明白为什么，因为我的“orderHeader.TransactionCurrencyId”字段不为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T00:18:02.967

大多数情况下，您的 Guid 是错误的，它会导致 null。确保它是您正在使用的正确 GUID。针对实体运行高级查找并找到正确的 GUID。硬编码 GUID 不是一个好主意。如果您将解决方案部署到其他组织，它将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:46:57.050

我假设您所有其他货币字段都已填充？

任何机会你有另一个插件因为你的抛出异常而被触发。这似乎总是在咬我。尝试禁用除您正在使用的插件之外的所有其他插件...

如果仍有问题，请打开 crm 服务器端跟踪。您将获得更好的错误信息。使用 CRM 诊断工具打开跟踪日志记录：[http ://crmdiagtool2011.codeplex.com](http://crmdiagtool2011.codeplex.com)

# c# - 如何修复空格的 UTF 编码？

> ID：13992934
> 
> 赞同：20
> 
> 时间：2012-12-21T15:36:20.040
> 
> 标签：c#, unicode, encoding, utf-8, ascii

在我的 C# 代码中，我从 PDF 文档中提取文本。当我这样做时，我得到一个 UTF-8 或 Unicode 编码的字符串（我不确定是哪个）。当我`Encoding.UTF8.GetBytes(src);`将其转换为字节数组时，我注意到空格实际上是两个字节值分别为 194 和 160 的字符。

例如字符串“CLE action”看起来像

```
[67, 76, 69, 194 ,160, 65 ,99, 116, 105, 111, 110] 
```

在一个字节数组中，其中的空格是 194 和 160... 因为这`src.IndexOf("CLE action");`是在我需要它返回 1 时返回 -1。

如何修复字符串的编码？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-21T15:40:43.263

`194 160`是代码点的 UTF-8 编码`NO-BREAK SPACE`（与 HTML 调用的代码点相同`&nbsp;`）。

所以它真的不是一个空间，即使它看起来像一个空间。（例如，您会看到它不会自动换行。）正则表达式匹配 for`\s`会匹配它，但与空格的简单比较不会匹配。

要简单地替换 NO-BREAK 空格，您可以执行以下操作：

```
src = src.Replace('\u00A0', ' '); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:45:56.373

在 UTF8 字符值 c2 a0 (194 160) 中定义为 NO-BREAK SPACE。根据 ISO/IEC 8859，这是一个不允许插入换行符的空格。通常文本处理软件假定可以在任何空白字符处插入换行符（这是通常实现自动换行的方式）。您应该能够简单地用普通空格替换字符串中的字符来解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:40:30.877

`\xC2\xA0`将(= )解释`194, 160`为 UTF8 实际上会产生`\xA0`unicode *non-breaking space*。这是与普通空格不同的字符，因此与普通空格不匹配。您必须匹配不间断空格或对任何空格使用模糊匹配。

# sql-server - SSDT 中的 SQLCLR 可为空的 DATETIME2

> ID：13992943
> 
> 赞同：0
> 
> 时间：2012-12-21T15:36:40.677
> 
> 标签：sql-server, sqlclr, sql-server-data-tools

我想编写一个接受 a`DATETIME2`并返回 a的 SQLCLR UDF `DATETIME2`。输入和输出应该允许 NULL。

我创建了一个 SQL Server 数据库项目 (SSDT)，在其 SQLCLR 属性中将其配置为 VB 语言，然后添加以下文件`Test.vb`：

```
Option Explicit On
Option Strict On

Imports System
Imports System.Data
Imports System.Data.SqlClient
Imports System.Data.SqlTypes
Imports Microsoft.SqlServer.Server

Partial Public Class UserDefinedFunctions
    <SqlFunction()> _
    Public Shared Function Test(d As Nullable(Of DateTime)) As Nullable(Of DateTime)
        Return d
    End Function
End Class 
```

[从 SQL Server 2008 开始，http: //msdn.microsoft.com/en-us/library/ms131092](http://msdn.microsoft.com/en-us/library/ms131092(v=SQL.100).aspx) (v=SQL.100).aspx似乎支持以这种方式使用 nullable 。

但是，当我运行部署命令时，出现以下错误：

> SQL46010： ) 附近的语法不正确。

这是因为它生成的 SQL 是：

```
CREATE FUNCTION [dbo].[Test] (@d /* Error: Unsupported type. */)
RETURNS /* Error: Unsupported type. */
    AS EXTERNAL NAME [Test].[Test.UserDefinedFunctions].[Test]; 
```

我无法替代`SqlDateTime`，因为我需要`DATETIME2`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:53:02.367

看看[这个](https://stackoverflow.com/questions/2620524/sqlclr-and-datetime2)。SqlDateTime 允许空值，因此能够通过类的属性检查值是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T04:45:40.937

问题出在 SSDT（SQL Server Data Tools）而不是 SQLCLR。是的，SQLCLR 确实支持`DATETIME2`via `DateTime?`/ `Nullable<DateTime>`。不幸的是，SSDT（我正在使用 VS2013 和 SSDT v 12.0.50512.0）*尚不*（我在这里很乐观，我知道）支持`DATETIME2`从`DateTime`or 或`DateTime?`. 但是，像以前一样使用它也不会出错`DateTime?`。尽管如此，要么 要么`DateTime`将在生成的 SQL 中`DateTime?`显示为常规。`DATETIME`

我不确定告诉 SSDT 数据类型应该是什么的任何真正“适当”的方法。实际上有相当多的选项是不受支持的，包括通用的 UDF 选项`WITH RETURNS NULL ON NULL INPUT`和参数选项，例如默认值。这是可悲和令人沮丧的，是的。

到目前为止，我想出的最好的方法（我仍在寻找其他选项）是`ALTER`使用所需选项将部署后脚本添加到函数的定义中：

1.  在**PROJECT**菜单中，选择**Add New Item...**（VS2013 中的`Control`+ `Shift`+ ）`A`
2.  转到**SQL Server** ->**用户脚本**
3.  选择**部署后脚本**
4.  给它一个名称（名称本身并不能确定它是预部署、部署后还是两者都不是；它只需要以**.sql**结尾）并单击`Add`
5.  您将被置于（大部分）空 SQL 脚本中
6.  输入一个或多个`ALTER`语句，类似于以下内容：

    ```
    -- declare once
    DECLARE @ObjectName sysname; -- keep lower-case to work in case-sensitive collations

    SET @ObjectName = N'Test';

    IF (EXISTS(
                SELECT  *
                FROM    sys.assembly_modules sam
                WHERE   sam.[object_id] = OBJECT_ID(@ObjectName)
            )
        )
    BEGIN
        PRINT 'Checking custom properties for [' + @ObjectName + N']...';

        IF (EXISTS(
                    SELECT  *
                    FROM    sys.parameters sp
                    INNER JOIN  sys.types st
                            ON  st.system_type_id = sp.system_type_id
                    WHERE   sp.[object_id] = OBJECT_ID(@ObjectName)
                    AND     st.[name] <> N'datetime2' -- keep lower-case to work in
                                                      -- case-sensitive collations
                )
        )
        BEGIN
            PRINT 'Setting custom properties for [' + @ObjectName + N']...';

            BEGIN TRY
                EXEC('
    ALTER FUNCTION [dbo].[Test](@d [datetime2])
    RETURNS [datetime2] WITH EXECUTE AS CALLER
    AS EXTERNAL NAME [Test].[Test.UserDefinedFunctions].[Test];
                ');
            END TRY
            BEGIN CATCH
                DECLARE @ErrorMessage NVARCHAR(4000);
                SET @ErrorMessage = ERROR_MESSAGE();
                RAISERROR(@ErrorMessage, 16, 1);
                RETURN;
            END CATCH;
        END;

    END;
    ELSE
    BEGIN
        RAISERROR(N'Oops. [%s] was renamed or no longer exists!', 16, 1, @ObjectName);
        RETURN;
    END;

    ---

    SET @ObjectName = N'NextObjectToFix';
    -- copy the rest from above 
    ```

此部署后脚本将*始终*包含在`_Create`发布/增量构建脚本的末尾。因此需要额外的逻辑来查看更改是否已经存在。确实，始终运行 .*通常*并没有什么坏处`ALTER`，但在极少数情况下，该对象是其他对象的依赖项，例如 Check Constraint 或 Computed Column，除非需要更改，否则最好不要理会它.

您可以从脚本（只需将 更改为）或在 SSMS 中获得正确的`ALTER`定义，如果您右键单击对象并选择**Modify**。在这两种情况下，更改数据类型和任何其他选项（显然 ;-)。`\bin\Configuration\*_Create.sql``CREATE``ALTER`

 *** * *

另一个有点相关的想法是不依赖于 T-SQL 包装对象`CREATE`语句的 Visual Studio / SSDT 发布过程，而仅使用它来管理程序集。在此设置中，您将*取消选中***Project Properties的****SQLCLR**选项卡上的**Generate DDL**选项。然后，您将添加一个部署后脚本（如上面的建议中所述）并放入您自己的,等语句。****`CREATE FUNCTION ...``CREATE PROCEDURE ...`****

 ****对于初始开发来说，引入新对象并不像使用 SSDT 生成 DDL 那样快速和容易，但考虑到新对象的创建并不频繁，而且它们的签名更改频率要低得多，因此真正自己管理这个 DDL还不错（事实上，它与我用于包含 250 多个对象的[SQL#](http://SQLsharp.com)库的过程非常相似。务实地说，一旦您拥有每个对象类型`CREATE`语句之一，您就可以复制和粘贴它们用于新对象并更改名称和参数等。这种方法需要的最多工作是在创建新 TVF 时，如果它返回一堆字段，但这并不是真正的工作，因为您必须输入同入`TableDefinition`财产`SqlFunction`如果您使用 SSDT 来管理 DDL 创建，则无论如何都要属性。******

# asp.net - .Net 中继器中 div 的 CSS

> ID：13992949
> 
> 赞同：0
> 
> 时间：2012-12-21T15:37:02.550
> 
> 标签：asp.net, css, html, repeater

我有一个插入 x 数量的 div 的 asp 中继器。这些 div 中的内容可以在垂直长度上有所不同，因此转发器当前显示类似表格行的结构。

我希望有人可能对我如何设置转发器内容的样式有一些想法，以便每个转发器项目直接出现在其上方的项目下方，无论长度如何。

所以目前我的中继器输出。

```
Item1  Item2 Item3
Item1  Item2 Item3
Item1  Item2 Item3
Item1  Item2 Item3
       Item2 Item3
       Item2 Item3
             Item3

Item4 Item5  Item6
Item4 Item5  Item6
Item4 Item5  Item6 
```

我需要它在哪里输出：

```
Item1  Item2 Item3
Item1  Item2 Item3
Item1  Item2 Item3
Item1  Item2 Item3       
Item4  Item2 Item3
Item4  Item5 Item3
Item4  Item5 Item6
Item4  Item5 Item6
Item4  Item5 Item6 
```

我希望这是有道理的。非常感谢任何建议。

HTML

```
 <asp:repeater ID="rpItems" runat="server"><HeaderTemplate><div style=""></HeaderTemplate>
    <ItemTemplate>
        <div class="divImg">
            <asp:Literal ID="litImage" runat="server" />            
            <div class="divImgInfo">
                <p>                                
                    <asp:Literal ID="litTitle" runat="server" EnableViewState="false" />
                </p>
                <p>    
                    <div style="font-size: 11px; color: #919191;" >
                        <asp:Literal ID="litItemPrice" EnableViewState="false" runat="server" /> &nbsp;&nbsp;
                        <asp:Literal ID="litItemComments" EnableViewState="false" runat="server" />                                                                        
                    </div>                                                                                               
                </p>
            </div>              
        </div>
    </ItemTemplate>
    <FooterTemplate></div></FooterTemplate>
</asp:repeater> 
```

CSS

```
.divImg { width: 170px; margin: 0px 0 0 0;   background-color: #ffffff; display: inline-block; vertical-align: top; margin: 3px; }
.divImg img { max-width: 150px; padding: 8px; }
.divImgOverlay {position:relative;margin-top:0;padding:0 18px 0 6px;display:none;height:0;max-height:38px;overflow:hidden;}
.divImgInfo {padding:0px 1px 0 10px; }
.divImgInfo div {margin:0 0 0 0; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:02:21.167

只是一个想法：如果你说它们只会在垂直长度上有所不同，你可以考虑定义一些更大的 div 作为列，并让元素在其中垂直复制（由 float:left 定位）。

然后，您可以将列标识符附加到每个 div 的 id，然后为它们设置样式并尝试操纵外观，以便保持所需的表格结构，即分布高度。

```
<div class="divImg_column<x>">
    ... 
```

# xpages - 从多值字段中删除值？

> ID：13992954
> 
> 赞同：0
> 
> 时间：2012-12-21T15:37:15.143
> 
> 标签：xpages

我的文档上有一个多值字段，我想根据该值删除一个值。

我想出了这个：

```
var doc:NotesDocument = rowData.getDocument();
var item:NotesItem = doc.getFirstItem("ValidProjects");
var a:Array = item.getValues()

for (var v in a)
dBar.info("Before removed V=" + v );

removeFromArray(a,compositeData.ProjectID);
doc.replaceItemValue("ValidProjects",a );

for (var v in a)
dBar.info("After removed V=" + v);

doc.save();

function removeFromArray(arr, val) {
for(var i=0; i<arr.length; i++) {
    dBar.info("Value = " + arr[i] + " Remove = " + val);
    if(arr[i] == val) {
        dBar.info("Removing " + i)
        arr.splice(i, 1);
        break;
    }
   }
} 
```

removeFromArray 被成功调用，我可以看到调试栏中显示的“Removing 0”消息，但该数组根本没有改变，值也没有被删除。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T01:13:55.373

将 ItemValues 视为向量。

```
function removeFromItemValues(java.util.Vector vector, val) {
      // see http://docs.oracle.com/javase/6/docs/api/java
      vector.remove(val);
      return vector; //Optional
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:41:58.983

只是一个快速的镜头......我不确定参数是“通过引用”传递的......？

如果不是，那就是原因。我通常更喜欢使用函数来返回一个值。从编程的角度来看，我发现阅读代码的作用更清楚。在此特定示例中，您可以将代码更改为：

```
 function removeFromArray(arr, val) {
    for(var i=0; i<arr.length; i++) {
        dBar.info("Value = " + arr[i] + " Remove = " + val);
        if(arr[i] == val) {
            dBar.info("Removing " + i)
            arr.splice(i, 1);
            break;
        }
       }
       return arr;
    } 
```

然后你会这样称呼它：

```
a = removeFromArray(a,compositeData.ProjectID); 
```

您不写是否可以看到“之后...”消息中的变化？- 或者您只是可以在文档中看到值没有改变？

此致

/约翰

# android - 有没有推荐的 android adt 模板？

> ID：13992956
> 
> 赞同：2
> 
> 时间：2012-12-21T15:37:54.410
> 
> 标签：android, eclipse, adt

Android Adt 模板通过为您创建活动、服务、广播等来帮助您开始使用新的 Android 应用程序。

并为您完成所有繁重的工作，包括在清单文件中注册您的新项目！

![新活动](../Images/194348e040bf4dc69f58f019c2c5f997.png)

它们可以在 Eclipse、NEW 向导、ANDROID 文件夹、new **Android object**中访问。

![向导](../Images/6041bb766f81291ba42cbc13f08fd32e.png)

最好的部分是，您可以添加新的！

你知道有什么好的广告模板可以推荐给新的安卓开发者和经验丰富的开发者吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:42:07.290

如果您正在使用，`ActionBarSherlock`那么您可能想要使用[这些](https://github.com/jgilfelt/android-adt-templates)而不是默认的。

# c# - System.Convert.ChangeType 用于绑定逗号

> ID：13992958
> 
> 赞同：1
> 
> 时间：2012-12-21T15:38:01.053
> 
> 标签：c#, .net, localization, globalization

我有这行代码：

```
System.Convert.ChangeType(input, destinationType, CultureString); 
```

如果使用 de-DE 文化调用并且输入为 4,50 且destinationType 为 double，则返回 4.50。

如果我用 en-GB 调用它，它会将其转换为 450.00。

有没有办法让它返回 4.50 或抛出一个异常说你不能将 4,50 转换为双倍。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:49:21.690

正如[MSDN](http://msdn.microsoft.com/en-us/library/ms130977.aspx)对您正在使用的特定重载所指定的那样：

> 返回一个指定类型的对象，其值与指定对象等价。参数提供特定于区域性的格式信息。

换句话说，它试图了解如何根据文化的格式信息进行转换。因此，在**de-DE**`4,50`中意味着相同的数字在**en-GB**中被标识（注意有一个*句*点不是逗号）。 在 en-GB 文化中使用逗号来谈论千位（例如可以写 4000 ），当解析 4,50 时，逗号被忽略，因此输出为 450。`4.5`**`4.50` ***`4,000`*****

 *****这就像*2010 年 1 月 21 日*的日期在美国被解析`01/21/10`(mm/dd/yy) 而在英国被解析`21/01/10`(dd/mm/yy)。

*所以实际上，不应该*提出任何例外，因为 4,50可以转换为双精度数，这取决于世界上的哪个地方*:)*

注意：当您需要与文化无关的转换时， C# 具有[CultureInfo.InvariantCulture 。](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)

如果您想抛出异常，*请不要使用 ChangeType*，`Double.Parse`与`NumberStyles`@ChrisF 在*他的*回答中解释的一样使用。例如，这将引发异常：

```
Double.Parse("4,50", NumberStyles.Float); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:00:44.850

您应该使用`double.Parse`而不是`ChangeType`.

**如果您不**设置标志，您可以`double.Parse`抛出异常：**`NumberStyles.AllowThousands`**

 **> NumberStyles.AllowThousands 表示允许使用组分隔符。有效的组分隔符由当前 NumberFormatInfo 对象的 NumberGroupSeparator 或 CurrencyGroupSeparator 属性确定。

[MSDN 页面](http://msdn.microsoft.com/en-us/library/xbtzcc4w%28v=vs.110%29.aspx)

在这种情况下，您可以使用：

```
double result = double.Parse("4,50", numberStyle); 
```

[正如这里](http://msdn.microsoft.com/en-us/library/7yd1h1be.aspx)所说

> 要指定的典型值是 Float 与 AllowThousands 的组合。

因此，在您的情况下，您要确保未设置此标志。虽然这意味着您无法正确解析“4,500”。

通过设置标志，您可以告诉代码在解析字符串时简单地忽略千位分隔符。这意味着根据算法，以下字符串全部转换为 450：

> 450
> 45,0
> 4,50
> 450,

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:55:58.423

利用`Double.Parse(input, style)`

解析更加严格，并且`System.Globalization.NumberStyles style`允许您准确指定您所做的并且不认为是数字。`FormatException`如果它不喜欢字符串中的内容，它会抛出一个。*******

# .htaccess - 用移动网站重写 .htaccss

> ID：13992963
> 
> 赞同：1
> 
> 时间：2012-12-21T15:38:18.247
> 
> 标签：.htaccess, drupal, mod-rewrite, rewrite, subdomain

我在为我的网站设置重写规则方面需要帮助。

我设置了一条规则，因此它添加了 www。到我的网站，但我也有一个以 m 开头的移动网站。并且不知道该放什么`RewriteCond`我不确定是否有 IF 类型的语句...

我目前拥有的是...

```
 RewriteCond %{HTTP_HOST} website\.us$ [NC]
 RewriteCond %{HTTP_HOST} !m\.website\.us$ [NC]
 RewriteRule ^(.*)$ http://www.website.us/$1 [L,R=301] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:47:56.357

试试这个 ：

```
RewriteCond %{HTTP_HOST} !^(www|m)\.website\.us$ [NC]
RewriteRule ^(.*)$ http://www.website.us/$1 [L,R=301] 
```

# drop-down-menu - 如何在窗口中正确显示 CKEditor 4.0 工具栏下拉菜单和其他弹出窗口？

> ID：13992964
> 
> 赞同：3
> 
> 时间：2012-12-21T15:38:21.917
> 
> 标签：drop-down-menu, ckeditor, z-index

我有一个剑道 UI 窗口（但我认为 jquery UI 窗口/对话框会导致同样的问题）。我在窗口中有一个 CKEditor 4.0。字体、样式等下拉菜单和上下文菜单最初在单击时显示。但是，在文本区域单击后，再次单击时将无法显示下拉列表。

我只在 CKEditor 4.0 中看到这个问题。3.6 版似乎还不错。有谁知道 4.0 中这个问题的解决方法？我知道 CKEDITOR.config.baseFloatZIndex 但即使将其设置为窗口/对话框的 zindex 上方的 zindex 仍然会导致问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:12:21.497

我设法让它与 config.baseFloatZIndex = 102000; 但正如你所说，这对你不起作用。

# sql-server - 表之间没有关系——它会影响查询性能吗？

> ID：13992967
> 
> 赞同：1
> 
> 时间：2012-12-21T15:38:35.860
> 
> 标签：sql-server, sql-server-2008-r2

> **可能重复：**
> [外键是否提高了查询性能？](https://stackoverflow.com/questions/507179/does-foreign-key-improve-query-performance)

我正在使用没有关系的表（但数据是相关的）。我在这些表之间抛出 JOIN 查询。如果我添加关系会提高性能吗？（PS -我将在未来添加关系以确保数据完整性，现在我正在处理性能。感谢您的帮助。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:42:24.120

关系本身对性能没有帮助，但是这种关系意味着父表列上会有一个唯一索引。该索引可能会影响您的性能，具体取决于您运行的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:10:02.803

表之间缺少关系会对性能产生很大影响，尤其是当表变大时。优化器是一个复杂的软件，在做出决策时需要它可以获得的每一点信息，并且表之间存在定义的关系这一事实是一个重要的事实。

例如，请参见[此处](http://www.sqlservercentral.com/articles/Performance/71264/)。

# mule - 如何覆盖骡子中的有效负载

> ID：13992968
> 
> 赞同：5
> 
> 时间：2012-12-21T15:38:35.457
> 
> 标签：mule

我有一个肥皂请求进入骡子流。我的任务是从有效负载中获取信息，并根据结果将原始请求推送到不同的 jms 队列。

为了从有效负载中获取所需的信息，我使用了 XSLT 转换器（不是 XPath，因为我需要根据 IDREF 从元素中获取 IDREF 属性，然后从 IDREF 对象中获取元素和子元素）。

基于 XSLT 转换的结果，我使用选择元素来推送原始有效负载。我将原始有效负载存储在会话中（也可以在入站中进行）。XSLT 转换后，应用选择路由器找出合适的队列，然后将原始有效负载推入队列（原始有效负载存储在会话变量中）。我正在使用`<expression-component>`元素。以下是 mule-flow 的片段：

```
<flow name="ProcessXML121Order">
    <jms:inbound-endpoint queue="mviq.121.order" exchange-pattern="one-way" />
    <logger message="121 order payload is #[payload]" level="INFO" />
    <message-properties-transformer scope="session">
        <add-message-property key="mviPayload" value="#[payload]"/>
    </message-properties-transformer>
    <xm:xslt-transformer xsl-file="chooseVendor.xslt" />
    <logger message="After xsl file payload is #[payload]" level="INFO" />      
    <choice>
        <when expression="'EMSI'">
            <logger message="Vendor is EMSI" level="INFO" />
            <expression-component>payload=#[header:SESSION:mviPayload]</expression-component>
            <jms:outbound-endpoint queue="mviq.121.order.emsi" />
        </when>
        <when expression="'PRMD'">
            <logger message="Vendor is PRMD" level="INFO" />
            <jms:outbound-endpoint queue="mviq.121.order.prmd" />
        </when>
        <when expression="'RSA'">
            <logger message="Vendor is RSA" level="INFO" />
            <logger message="RSA payload is #[payload]" level="INFO" />
            <jms:outbound-endpoint queue="mviq.121.order.rsa" />
        </when>
        <otherwise>
            <logger message="Vendor is Error" level="INFO" />
            <logger message="Vendor error payload is #[payload]" level="INFO" />
            <jms:outbound-endpoint queue="mviq.error" />
        </otherwise>
    </choice>
</flow> 
```

评估 payload=#[header:SESSION:mviPayload] 时抛出以下异常

```
[ProcessXML121Order.stage1.02] exception.AbstractExceptionListener (AbstractExceptionListener.java:296) - 
********************************************************************************
Message               : Execution of the expression "payload=#[header:SESSION:mviPayload]" failed. (org.mule.api.expression.ExpressionRuntimeException). Message payload is of type: byte[]
Code                  : MULE_ERROR-29999
--------------------------------------------------------------------------------
Exception stack is:
1\. [Error: illegal use of operator: +]
[Near : {... Unknown ....}]
             ^
[Line: 1, Column: 0] (org.mvel2.CompileException)
  org.mvel2.ast.OperatorNode:46 (null)
2\. Execution of the expression "payload=#[header:SESSION:mviPayload]" failed. (org.mule.api.expression.ExpressionRuntimeException)
  org.mule.el.mvel.MVELExpressionLanguage:211 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/expression/ExpressionRuntimeException.html)
3\. Execution of the expression "payload=#[header:SESSION:mviPayload]" failed. (org.mule.api.expression.ExpressionRuntimeException). Message payload is of type: byte[] (org.mule.api.MessagingException)
  org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor:35 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/MessagingException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
[Error: illegal use of operator: +]
[Near : {... Unknown ....}]
             ^
[Line: 1, Column: 0]
    at org.mvel2.ast.OperatorNode.getReducedValueAccelerated(OperatorNode.java:46)
    at org.mvel2.MVELRuntime.execute(MVELRuntime.java:85)
    at org.mvel2.compiler.CompiledExpression.getValue(CompiledExpression.java:105)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

我有两个问题：

1.  如何覆盖原始有效载荷？（不是说这是最好的方法）
2.  在这种情况下，更好的方法是什么？是否建议保持原始有效负载完整（在这种情况下）并将 XSLT 输出存储在其他变量中？我怎样才能做到这一点？我可以用来实现这一目标的路径（mule 组件）是什么？我对 Mule 很陌生，并寻求社区建议。

感谢您花时间调查此事。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T16:56:10.963

在回答你的问题之前，让我们重写这个被破坏的表达式：

```
<expression-component>payload=#[header:SESSION:mviPayload]</expression-component> 
```

作为：

```
<set-payload value="#[sessionVars.mviPayload]" /> 
```

以下内容也可以使用，但没有充分的理由会更复杂：

```
<expression-component>payload=sessionVars.mviPayload</expression-component> 
```

还有这个：

```
<message-properties-transformer scope="session">
    <add-message-property key="mviPayload" value="#[payload]"/>
</message-properties-transformer> 
```

会更好写：

```
<set-session-variable variableName="mviPayload" value="#[message.payload]" /> 
```

现在回答你的问题：

1.  采用`set-payload`
2.  您所做的是最好的：像 XSL-T 这样的转换器自然适用于当前消息有效负载，因此将原始消息保存在属性中然后转换主有效负载就可以了。只有一件事：更喜欢流变量而不是会话变量。实际上，在您的情况下，我认为您不需要此流程之外的原始有效负载，因此在会话中存储是多余的。

所以我建议你使用：

```
<set-variable variableName="mviPayload" value="#[message.payload]" /> 
```

存储原始有效负载和以下内容以重新建立它：

```
<set-payload value="#[mviPayload]" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T12:52:40.853

使用 Set-Payload 并提供要覆盖的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T12:42:27.347

你可以用很多方法做到这一点。

1.  使用 set-payload
2.  使用表达式，#[payload='']
3.  使用变压器/组件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T06:11:19.667

您可以保持有效负载不变，并使用消息丰富器将 xslt 转换的值存储在变量中。使用选项内部的变量来确定要转到哪个队列。下面是一个代码片段

```
 <enricher doc:name="Message Enricher" target="#[flowVars.transformResultVar]">
               <!--perform transformation logic here-->
 </enricher> 
```

参考：[https ://dzone.com/articles/content-enrichment-using-mule-message-enricher-com](https://dzone.com/articles/content-enrichment-using-mule-message-enricher-com)

# c# - 从未调用过 ASP.net Entity Framework Code First 自定义初始化程序

> ID：13992969
> 
> 赞同：0
> 
> 时间：2012-12-21T15:38:37.827
> 
> 标签：c#, asp.net, entity-framework, ef-code-first

我在 Asp.net 项目中使用 EF Code First。Code First 很好地创建了我的数据库，但我很适合让它为我的数据库提供数据。我正在使用这样的自定义数据库初始化程序：

```
namespace Toolkit.Model
{
    public class EntitiesContextInitializer : DropCreateDatabaseIfModelChanges<ToolkitContext>
    {
        protected override void Seed(ToolkitContext context)
        {
            List<Server> Servers = new List<Server>
            {
                new Server { ServerName = "Server 16" },
                new Server { ServerName = "Server 29" }
            };

            foreach (Server server in Servers)
            {
                context.Servers.Add(server);
            }

            context.SaveChanges();
        }
    }
} 
```

我在 Global.asax.cs 中设置了初始化程序并强制数据库像这样初始化：

```
using Toolkit.Model;

namespace Toolkit
{
    public class Global : System.Web.HttpApplication
    {

        void Application_Start(object sender, EventArgs e)
        {
            Database.SetInitializer(new EntitiesContextInitializer());
            var context = new ToolkitContext();
            context.Database.Initialize(false);
        }

        ...
} 
```

问题是我的初始化程序永远不会被调用，所以我的数据库永远不会被填充。我什至尝试将初始化程序更改为继承 DropCreateDatabaseAlways 但仍然没有...我在这里缺少什么？

**编辑** 所以在删除数据库后，我的初始化程序被调用得很好。但是我仍然想知道为什么它没有在其他情况下被调用，例如当我添加一个表时（因此模型发生了变化）或者当我将初始化程序更改为 DropCreateDatabaseAlways 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:33:19.140

您可以将数据库迁移与 Code-First 结合使用。每当您在模型更改时使用 Update-database 命令时，都会调用您的 Seed 方法（在 Migrations 中）。

这篇文章解释了更多：

[http://msdn.microsoft.com/en-gb/data/jj591621](http://msdn.microsoft.com/en-gb/data/jj591621)

您也可以按照自己的方式在 Application_Start() 中强制执行它：

```
Database.SetInitializer(new EntitiesContextInitializer());
            var context = new ToolkitContext();
            context.Database.Initialize(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:37:09.717

尝试

```
Database.SetInitializer<MyContextName>(new EntitiesContextInitializer) 
```

在 EF 5.0 中，库被声明为

```
public static void SetInitializer<TContext>(IDatabaseInitializer<TContext> strategy) where TContext : DbContext; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:54:48.313

我对 SQL CE 数据库使用了类似的配置，但我使用的是 CreateIfNotExists，而不是 DropCreate。
我和你的不同之处在于你正在创建一个上下文并在数据库上调用初始化。基于此，我建议您删除 application_start 方法中的上下文设置和 Database.initialize 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:25:16.933

在覆盖方法的末尾，Seed，在类 EntitiesContextInitializer 中，在方法的末尾添加一行：

base.Seed（上下文）

# python - 读取和解析 TSV 文件，然后对其进行操作以保存为 CSV（*高效*）

> ID：13992971
> 
> 赞同：67
> 
> 时间：2012-12-21T15:38:50.400
> 
> 标签：python, file, csv

我的源数据在一个 TSV 文件中，有 6 列，超过 200 万行。

这是我要完成的工作：

1.  我需要读取此源文件中 3 列（3、4、5）中的数据
2.  第五列是一个整数。我需要使用此整数值来复制行条目，并使用第三列和第四列中的数据（按整数倍）。
3.  我想将#2 的输出写入 CSV 格式的输出文件。

下面是我想出的。

我的问题：这是一种有效的方法吗？在 200 万行上尝试时，它似乎可能会很密集。

首先，我制作了一个示例选项卡单独文件以供使用，并将其命名为“sample.txt”。它是基本的，只有四行：

```
Row1_Column1    Row1-Column2    Row1-Column3    Row1-Column4    2   Row1-Column6
Row2_Column1    Row2-Column2    Row2-Column3    Row2-Column4    3   Row2-Column6
Row3_Column1    Row3-Column2    Row3-Column3    Row3-Column4    1   Row3-Column6
Row4_Column1    Row4-Column2    Row4-Column3    Row4-Column4    2   Row4-Column6 
```

然后我有这个代码：

```
import csv 

with open('sample.txt','r') as tsv:
    AoA = [line.strip().split('\t') for line in tsv]

for a in AoA:
    count = int(a[4])
    while count > 0:
        with open('sample_new.csv', 'a', newline='') as csvfile:
            csvwriter = csv.writer(csvfile, delimiter=',')
            csvwriter.writerow([a[2], a[3]])
        count = count - 1 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-12-21T16:07:16.657

您应该使用该`csv`模块来读取制表符分隔值文件。不要一口气*将*其读入内存。毕竟，您读取的每一行都包含将行写入输出 CSV 文件所需的所有信息。始终保持输出文件打开。

```
import csv

with open('sample.txt', newline='') as tsvin, open('new.csv', 'w', newline='') as csvout:
    tsvin = csv.reader(tsvin, delimiter='\t')
    csvout = csv.writer(csvout)

    for row in tsvin:
        count = int(row[4])
        if count > 0:
            csvout.writerows([row[2:4] for _ in range(count)]) 
```

或者，使用`itertools`模块进行重复[`itertools.repeat()`](http://docs.python.org/library/itertools.html#itertools.repeat)：

```
from itertools import repeat
import csv

with open('sample.txt', newline='') as tsvin, open('new.csv', 'w', newline='') as csvout:
    tsvin = csv.reader(tsvin, delimiter='\t')
    csvout = csv.writer(csvout)

    for row in tsvin:
        count = int(row[4])
        if count > 0:
            csvout.writerows(repeat(row[2:4], count)) 
```

# java - 如何使用 Java 创建身份验证令牌

> ID：13992972
> 
> 赞同：36
> 
> 时间：2012-12-21T15:38:57.190
> 
> 标签：java, security, rest, authentication, token

在我的 Java EE6 REST 服务上，我想使用身份验证令牌从移动设备登录，用户将发送他们的用户名、密码，服务器将发回一个令牌，该令牌将用于授权用户对给定的进一步请求时间。

我可以像这样简单地自己创建一个令牌吗？（我想我不需要加密它，因为我将使用 HTTPS。）

```
String token = UUID.randomUUID().toString().toUpperCase() 
            + "|" + "userid" + "|"
            + cal.getTimeInMillis(); 
```

还是有更标准的方法来创建这些令牌？也许它存在于其中一个 API 中？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2019-06-17T09:23:01.260

对于 Java 8 及更高版本，最快和最简单的解决方案是：

```
private static final SecureRandom secureRandom = new SecureRandom(); //threadsafe
private static final Base64.Encoder base64Encoder = Base64.getUrlEncoder(); //threadsafe

public static String generateNewToken() {
    byte[] randomBytes = new byte[24];
    secureRandom.nextBytes(randomBytes);
    return base64Encoder.encodeToString(randomBytes);
} 
```

输出示例：

```
wrYl_zl_8dLXaZul7GcfpqmDqr7jEnli
7or_zct_ETxJnOa4ddaEzftNXbuvNSB-
CkZss7TdsTVHRHfqBMq_HqQUxBGCTgWj
8loHzi27gJTO1xTqTd9SkJGYP8rYlNQn 
```

上面的代码将生成带有 32 个字符的 base64 编码的随机字符串。在 Base64 编码中，每个 char 编码 6 位数据。因此，对于上面示例中的 24 个字节，您将获得 32 个字符。您可以通过更改随机字节数来更改输出字符串的长度。此解决方案比`UUID`（仅使用 16 个随机字节）更安全，并生成可安全用于 HTTP url 的字符串。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-11T03:47:48.643

要在 Java 中创建一个难以猜测的令牌，请使用`java.security.SecureRandom`

例如

```
SecureRandom random = new SecureRandom();
byte bytes[] = new byte[20];
random.nextBytes(bytes);
String token = bytes.toString(); 
```

与其在令牌中包含用户名，不如在内存或数据库中缓存用户：令牌映射。  

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-21T16:37:34.823

您提出的方案有效地允许客户无限制地访问您的服务。初始登录后，客户端可以使用 UID 和“用户 ID”，它们可以简单地与始终有效的时间戳结合使用。

如果您需要具有“登录”和会话令牌的服务，那么为什么不直接使用 HttpSession 呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-06T16:18:37.950

创建一个独特的令牌，它完全基于您使用的逻辑和多少参数。**Java 8**`Supplier`的功能接口可以帮助您：

 **```
Supplier<String> tokenSupplier = () -> {

        StringBuilder token = new StringBuilder();
        long currentTimeInMilisecond = Instant.now().toEpochMilli();
        return token.append(currentTimeInMilisecond).append("-")
                .append(UUID.randomUUID().toString()).toString();
};

System.out.println(tokenSupplier.get()); 
```

输出：

```
1591457374665-d5eff25f-b083-41c3-a90d-a89adcc45043 
```

你可以在这里了解更多信息[——Java Token](https://www.websparrow.org/java/how-to-create-token-in-java)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-16T16:18:41.883

```
public class SecureTokenGenerator {
public static final String CHARACTERS = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

// 2048 bit keys should be secure until 2030 - https://web.archive.org/web/20170417095741/https://www.emc.com/emc-plus/rsa-labs/historical/twirl-and-rsa-key-size.htm
public static final int SECURE_TOKEN_LENGTH = 256;

private static final SecureRandom random = new SecureRandom();

private static final char[] symbols = CHARACTERS.toCharArray();

private static final char[] buf = new char[SECURE_TOKEN_LENGTH];

/**
 * Generate the next secure random token in the series.
 */
public static String nextToken() {
    for (int idx = 0; idx < buf.length; ++idx)
        buf[idx] = symbols[random.nextInt(symbols.length)];
    return new String(buf);
} 
```

}

从[https://stackoverflow.com/a/41156/584947获取并显着浓缩](https://stackoverflow.com/a/41156/584947)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-05T10:31:13.060

有一种方法可以创建不会被破坏但也可以用于身份验证的令牌。

创建一个组合的令牌：

**base64（用户名 + 过期 + 客户端的其他值 + 3des 编码（用户名、过期、源 ip、浏览器标识符、客户端的其他值））**

客户端可以使用令牌来验证请求，例如 JSON Web Token (RFC 7515) 的使用。

在服务器端，用于 3des 编码的密钥可以随时间旋转，作为令牌。每个请求都包含用于身份验证的令牌，每个响应都包含相同的令牌或过期前的新令牌。

在这种情况下，令牌包含用户名，因此请求身份验证只需检查 3des 编码部分是否有效（与 相同，请求 ip 的来源相同。在这种情况下，如果有人偷了令牌，则令牌的可用性更高限制为会话ID。您可以将其他标识符组成为令牌，例如浏览器等。更难以伪造请求，因为攻击者必须伪造更多东西 - 这对他来说是未知的，因为他不知道编码部分的内容是什么令牌。（其实没有完美的安全性，只会更难破解）

该解决方案的优点是：

*   每个部分都是标准的，但不是整体，攻击者必须知道实现细节才能进行攻击。
*   客户端可以使用令牌的一部分来显示来自令牌的信息，而令牌本身是安全的，因为每个未加密的部分都包含在加密的部分中 - 因此在服务器端令牌无效的情况下无法修改 - 因此很容易检测到攻击。
*   集群不需要会话复制/粘性会话。3des 密钥足以在节点之间复制 - 因此它适用于无状态后端策略。

缺点是

*   更难在服务器端实现，因为对于这个解决方案，必须在服务器端实现令牌生成/验证算法。推荐使用服务器过滤器。

*   客户端必须实现令牌存储——推荐使用浏览器会话存储而不是 cookie——更容易窃取 cookie。

*   必须确保 3des 密钥足够安全 - 建议使用 Java 安全性以避免妥协。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-12-21T16:14:41.070

REST 基于 HTTP，鼓励使用底层协议而不是重新发明轮子。HTTP 使用 cookie 来支持有状态的交互，例如记住身份验证，并且还支持用户名和密码身份验证。

此外，Java EE 开箱即用地支持所有这些。检查教程

[http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html](http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html)**

# knockout.js - Kendo-Knockout：在网格源数据上应用绑定时出现最大调用堆栈大小错误

> ID：13992974
> 
> 赞同：0
> 
> 时间：2012-12-21T15:39:00.980
> 
> 标签：knockout.js, kendo-ui

我正在使用 RPNiemeyer kendo-knockout 库。我有三个相互实例化的视图模型——`FranchiseDetailsViewModel`实例化`LanguageListViewModel`哪个实例化`LanguageDetailsViewModel`。最后一个视图模型`LanguageDetailsViewModel`需要引用父视图，`FranchiseDetailsViewModel`因为它的功能取决于它。

html:

```
<div data-viewId="languageList" >
    <div id="languageList" data-bind="with: viewModel">
        <div id="languageListGrid" data-bind="kendoGrid: { data: languageViewModels, columns: [ 
                { 
                    field: 'Language', 
                    title: 'Language',
                    width: 50
                }

                ], 
            scrollable: false, sortable: true, pageable: false }" style="height: 380px">

        </div>
    </div>
</div>​ 
```

javascript

```
$(function () {

    var FranchiseDetailsViewModel = function () {
        var 
            self = this,
            initialize = function () {
                self.languagesInfoViewModel(new LanguageListViewModel(self));
                var parentViewModel = ({ viewModel: self.languagesInfoViewModel });
                var element = $('div[data-viewId="languageList"')[0];
                ko.applyBindings(parentViewModel, element);
            };

        FranchiseDetailsViewModel.prototype.languagesInfoViewModel = ko.observable();
        initialize();
    };

    var LanguageListViewModel = function (franchise) {
        var 
            self = this,
            initialize = function () {
                var languageViewModel = new LanguageDetailsViewModel(franchise);
                self.languageViewModels.push(languageViewModel);
            };
        LanguageListViewModel.prototype.languageViewModels = ko.observableArray([]);
        initialize();
    };

    var LanguageDetailsViewModel = function (franchise) {
        LanguageDetailsViewModel.prototype.Language = ko.observable("English");
       LanguageDetailsViewModel.prototype.franchise = franchise;
    };

    var initialize = new FranchiseDetailsViewModel();
});​ 
```

当网格绑定到源数据时，对父视图模型的这种引用会导致某种不定式循环。我收到`Maximum call stack size exceeded`错误。我相信当绑定到网格的源时，错误出现在 kendo 淘汰赛库中，因为如果我删除了网格，那么在这一行的 div 的淘汰赛绑定上就没有错误：

```
ko.applyBindings(parentViewModel, element); 
```

这是此错误的真正原因吗？我该如何解决？我无法删除对父视图模型的引用，所以我希望在绑定到源数据时修复 kendo-knockout 行为。任何有关工作示例的帮助将不胜感激。谢谢。

[http://jsfiddle.net/5Zkyg/43/](http://jsfiddle.net/5Zkyg/43/)

根据 Niemeyer 的评论更新：

我有一个 div，其中一些属性绑定到`FranchiseDetailsViewModel`. 这些属性之一代表一个复选框——命名它`isVisible`。我有另一个属性绑定到的 div `LanguageDetailsViewModel`。其中一些属性只有在选中复选框时才可见`FranchiseDetailsViewModel`。这`franchise.isVisible`是真的。这就是我需要特许经营参考的原因。

我对 javascript 比较陌生，也许我没有正确使用原型属性。当我使用`new`关键字实例化我的视图模型时，我发现在将其分配给原型时，它们变为公共的并且在标记中可见，因此我可以绑定它们。从您的示例中，我看到 this.myProperty 也公开了该属性。我不确定我的情况是否有所不同。

我决定用`this.myData.parent = parent;`它来解决我的问题。非常感谢您的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:42:32.027

根据上面的评论：

一种选择是“隐藏”特许经营权，这样 Knockout 就不会递归地尝试解开它。您可以通过使其成为函数的属性或可观察的（这是一个函数）来做到这一点。

有几种方法可以做到这一点：

```
var Child = function(parent) {

    //use parent directly from the argument passed to the constructor. available as part of the closure.
    this.myHandler = function() {
        parent.log();
    };        

    this.myData = ko.observable();

    //reference as a sub-observable. you can bind against myData.parent, but it will disappear when doing ko.toJS/ko.toJSON
    this.myData.parent = parent;

    //similar to sub-observable.  hide the actual value behind an empty function.  It will not be found when doing ko.toJS/ko.toJSON.
    this.parent = function() { };
    this.parent.value = parent;  
}; 
```

此处示例：jsfiddle.net/rniemeyer/uSpZB。

通常你不想在原型上放置可观察对象，因为它们将被所有实例共享。

# vb.net - Vb.Net 标签始终居中

> ID：13992977
> 
> 赞同：0
> 
> 时间：2012-12-21T15:39:22.200
> 
> 标签：vb.net

我正在使用 vb.net 制作屏幕保护程序。我希望无论屏幕大小如何，文本显示的标签始终居中。

有没有办法获得当前显示器的屏幕分辨率？

如果我能得到，那么我可以计算中间并在那里设置我的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:42:29.740

将标签拉伸到表单的整个宽度，并在标签参数内停靠/锚定到左侧和右侧。无论表单大小如何，这都会使您的标签居中。

# asp.net - WebForms 应用程序中的验证

> ID：13992982
> 
> 赞同：0
> 
> 时间：2012-12-21T15:39:45.223
> 
> 标签：asp.net, validation, webforms

我正在开发一个由许多页面组成的 WebForms 应用程序，每个页面都包含一个用户填写的表单。每个表单对应于实体的一部分，这意味着来自一个页面/表单的数据填充实体字段或其子实体字段的一部分。

例如：第一页填写一个人的姓名和出生数据，第二页填写健康状况，第三页填写家庭信息等。这些数据当然应该是有效的，然后才能继续下一页。我的客户不想处理 jQuery 或 Javascript，所以这被排除在外。在这种情况下实施验证的“最佳实践”是什么？

Entity Framework 4 正在被使用，并且大多数 GUI 控件都是在 HTML 中实现的，而不是由 WebForms 控件实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:55:01.373

如果您使用自定义 HTML 进行输入，那么您可能必须使用一些自定义代码进行验证。在您的服务器端表单处理程序中，您可以验证输入并在某些内容无效时将页面呈现给用户。输入检查可以很简单：

```
if (string.IsNullOrWhiteSpace(FormCollection["someRequiredInput"]) 
```

您可以遍历所有输入，根据业务逻辑检查它们，或许还可以构建错误列表。然后在输入检查之后，如果错误列表不为空，则将页面呈现给用户，并将错误添加到某种占位符中。如果列表为空，则继续处理表单发布。

即使不排除 JavaScript，您仍然希望执行服务器端验证。 *永远不要*假设客户端代码按预期工作，甚至完全执行。客户端验证不是一种安全措施，它只是一种更好的用户体验。服务器端验证是唯一真正的验证。

（因此，您仍然可以为添加的 UX 触摸添加客户端验证，如果客户端确实不允许 JavaScript，那么他们将看不到这一点，而只会使用服务器端验证。这有时被称为作为“优雅降级”，当用户禁用客户端技术时，您设计的 Web 应用程序仍然可以正常运行，尽管 UX 的优势稍差。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T16:07:25.907

> 我的客户不想处理 jQuery och[sic] Javascript，所以这被排除在外。

好的。Javascript 是*执行*验证的**错误**场所。您使用 javascript 进行的任何验证都只是性能优化。真正验证数据的*唯一*可接受的地方是在服务器上。

 **顺便说一句，.Net 包含一些您可以使用的方便的验证控件。其中一个控件是 CustomValidator，它很容易被覆盖并提供您自己的服务器端代码来执行您想要的任何规则。如果您使用网络表单，这些控件是一个明显的选择。

由于您有一个多页的方法，您可能还想查看 Wizard 控件。**

# firefox - 无法在 45000 毫秒内绑定到锁定端口 7054：webdriver firefox

> ID：13992986
> 
> 赞同：3
> 
> 时间：2012-12-21T15:39:53.643
> 
> 标签：firefox, selenium-webdriver

我是 selenium webdriver 的新手，我正在尝试运行一个简单的测试：我正在使用 firefox 17.0.1 和 selenium 2.28 尝试了旧版本的 firefox 和 selenium，但它没有用。

但我收到了这个错误：

```
[TestNG] Running:
  C:\Users\Amira\AppData\Local\Temp\testng-eclipse--387650463\testng-customsuite.xml

FAILED: testApp
org.openqa.selenium.WebDriverException: Unable to bind to locking port 7054 within 45000 ms
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 15:53:30'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_05'
Driver info: driver.version: FirefoxDriver
    at org.openqa.selenium.internal.SocketLock.lock(SocketLock.java:94)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:72)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:244)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:188)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:183)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:179)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:92)
    at GoogleNavigationTest.testApp(GoogleNavigationTest.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)

===============================================
    Default test
    Tests run: 1, Failures: 1, Skips: 0
===============================================

===============================================
Default suite
Total tests run: 1, Failures: 1, Skips: 0
===============================================

[TestNG] Time taken by org.testng.reporters.jq.Main@985016: 96 ms
[TestNG] Time taken by org.testng.reporters.XMLReporter@191c263: 22 ms
[TestNG] Time taken by org.testng.reporters.SuiteHTMLReporter@4b7c69: 62 ms
[TestNG] Time taken by org.testng.reporters.EmailableReporter2@18e5ebd: 9 ms
[TestNG] Time taken by org.testng.reporters.JUnitReportReporter@e5025: 8 ms
[TestNG] Time taken by [FailedReporter passed=0 failed=0 skipped=0]: 9 ms 
```

当我卸载 firefox 并安装它时，测试只适用于第一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-21T08:56:06.500

我有同样的问题。这个问题有几种解决方案：

首先，您应该使用以下命令检查 cmd 中的端口：`netstat -np TCP | find "7054"`

-如果端口繁忙，您应该：

删除使用此端口的进程或为 firefox 设置其他端口，使用：`profile.setPreference(PORT_PREFERENCE, port);`

-如果端口是空闲的：

1.  将您的 selenium 服务器升级到 2.39 或更高版本。
2.  如果您使用 selenium 网格，请添加更多节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T10:59:27.577

检查您的主机文件`C:\Windows\System32\drivers\etc`。你有没有设置过这样的东西

```
192.168.60.133  localhost: 
```

删除它然后尝试它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-05T22:42:54.667

确保您没有打开任何 WebDriver Firefox 窗口！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T08:28:20.587

您需要在任务管理器中结束java进程，有时如果没有调用或执行driver.quit，它会发生

# sql - 使用 jdbc 创建 db2 模式

> ID：13992987
> 
> 赞同：8
> 
> 时间：2012-12-21T15:39:59.887
> 
> 标签：sql, database, jdbc, db2, database-schema

**使用 JDBC 在 DB2 中创建模式**的正确语法或正确步骤是什么？

在运行`create schema test1`或`create schema test1 authorization db2admin`作为 db2admin 时，我一直得到`DB2 SQL Error: SQLCODE=-552, SQLSTATE=42502, SQLERRMC=DB2ADMIN;CREATE SCHEMA, DRIVER=3.64.106`

使用 DB2 命令行工具时，完全相同的命令也能正常工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T14:32:38.830

我找到了。

事实证明，由于某种原因，默认情况下 DB2 Express-C 不会将 DBADM 权限授予 db2admin。

这可以通过连接到数据库然后发出

```
GRANT DBADM ON DATABASE to db2admin 
```

感谢 Ian Bjorhovde 提供灵感火花！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:45:51.593

看起来这不是语法问题而是身份验证问题，您必须检查您通过 JDBC 传递的凭据：

> -552 授权ID没有执行操作操作的权限

[http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z9.doc.codes%2Fsrc%2Ftpc%2Fn552.htm](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z9.doc.codes%2Fsrc%2Ftpc%2Fn552.htm)

# c# - Windows 服务不执行代码

> ID：13992990
> 
> 赞同：4
> 
> 时间：2012-12-21T15:40:11.293
> 
> 标签：c#, windows, multithreading, service

我对 Windows 服务和线程有点陌生，所以我希望我在这里没有犯明显的错误。我开发了一个应用程序，用于在 C# 中运行各种网络维护类型的活动。该应用程序在我的本地机器上完美运行，我决定我希望它作为 Windows 服务运行，因此使用相同的代码进行了适当的更改，并且再次在我的本地机器上运行良好。

当我将它移植到我网络上的服务器上时，我的问题就出现了。非 Windows 服务代码再次运行良好并按预期运行。然而，Windows 服务代码似乎什么也不做。该过程可以正常安装并且可以正常启动/停止，但似乎没有任何代码正在执行，对于在 Visual Studio 中调试 Windows 服务的任何帮助也将不胜感激。这是我的 OnStart 过程中似乎没有执行的代码。

```
 smThread = new Thread(delegate() { sm.RunServerMonitor(ref run); });
        smThread.Start();

        dailyThread = new Thread(delegate() { dailyEvents(); });
        dailyThread.Start(); 
```

因为非 Windows 服务代码有效，所以我不相信我会遇到权限类型问题，除非需要设置不同的权限以允许服务远程执行任务，而不是使用普通 c# 代码执行相同操作.

谢谢，马特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:55:50.993

感谢您的评论，问题与权限有关。当我单击服务并在“登录”选项卡下并将帐户更改为具有管理权限的帐户时，它工作正常。感谢大家的帮助，非常感谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:55:41.147

`OnStart`将以下行添加为方法中的第一行代码

```
while(!System.Diagnostics.Debugger.IsAttached)
{
    System.Threading.Thread.Sleep(100);
}

smThread = new Thread(delegate() { sm.RunServerMonitor(ref run); });
smThread.Start();

dailyThread = new Thread(delegate() { dailyEvents(); });
dailyThread.Start(); 
```

您可以在循环后的下一行代码中设置断点`while`并启动服务。然后，从 Visual Studio 中，附加到服务的进程以进行调试。

# c# - 自定义授权属性和表单身份验证

> ID：13992991
> 
> 赞同：0
> 
> 时间：2012-12-21T15:40:12.893
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, forms-authentication

我有一个自定义的授权属性，到目前为止看起来就像这样：（我稍后会添加更多逻辑。我只想先看看这个工作）。

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
{

    public override void OnAuthorization(AuthorizationContext filterContext)
    {

        base.OnAuthorization(filterContext);
    }

} 
```

然后我把我的属性放到一个控制器上：

```
[CustomAuthorize(Order = 0)]
public class MyController : Controller 
```

现在，

这一切都很好，花花公子，直到我的表单身份验证用完。

IE

```
<forms loginUrl="~/myController/myMethod" timeout="30" /> // this timout expires. 
```

在此超时之后，我的自定义授权属性不再受到打击，相反，表单身份验证模块似乎接管了。

超时后，forms auth 模块只返回上面 webconfig 代码中指定的操作呈现的视图。

我想在超时过期时拦截 onAuthorize 操作，所以我可以询问 HttpContext 某些事情，并有条件地重定向用户。

有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:43:27.133

实际上，默认行为

如果您要处理用户未通过身份验证覆盖的情况：

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
      //your logic
      //...
      //...

      base.HandleUnauthorizedRequest(filterContext);
} 
```

或者您可以从 ActionFilterAttribute 继承并检查用户是否在您的自定义操作过滤器中进行了身份验证。这将允许您绕过您遇到的表单身份验证问题。

像这样的一些事情：

```
public class CustomAuthorizeAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (!filterContext.HttpContext.User.Identity.IsAuthenticated)
            {
                if (filterContext.RequestContext.HttpContext.Request.IsAjaxRequest())
                {
                    //code that handles unauthorized ajax request
                }
                else
                {
                    //code that handles http request
                }
            }

            //you custom authorization logic

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:48:13.043

您可以将代码插入 HttpApplication.AcquireRequestState 以观察身份验证是否不再有效并在此时重定向。查看[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.acquirerequeststate%28v=vs.71%29.aspx)以获取有关该事件的更多信息。

# workflow-foundation-4 - CodeActivity InArgument 访问 T 的值

> ID：13992992
> 
> 赞同：0
> 
> 时间：2012-12-21T15:40:21.107
> 
> 标签：workflow-foundation-4, workflow-activity

我有一点转折，比我想象的要麻烦一些。通常我会有一个 InArgument 并按如下方式使用它：

```
public InArgument<Int32> XYZ_ID { get; set; }
public InArgument<Int32> XYZ_COUNT { get; set; }

protected override IAsyncResult BeginExecute(...)
{
....snip....
_ABC_ID = XYZ_ID.Get(context),
_ABC_Count = XYZ_COUNT.Get(context) 
```

这很好用，我认为我们接近相同过程的自定义对象，但我似乎无法弄清楚。ActvUsrPrgmResults 只是一类属性，例如 AccountName、FirstName 等。所以我像任何其他类型一样传递它。

```
public InArgument<bool> IsHappy { get; set; }
public InArgument<bool> IsClapping { get; set; }
public InArgument<ActvUsrPrgmResults> itm_ActvUsrPrgm { get; set; } 
```

访问它虽然有点困难....对我来说。

```
protected override void Execute(CodeActivityContext context)
{
    NewPerson x = new NewPerson
    {
        AccountName = this.itm_ActvUsrPrgm.Get(?????
        //this doesn't work either
        AccountName = itm_ActvUsrPrgm.????? 
```

换句话说，我看不到如何访问 itm_ActvUsrPrgm InArgument 的属性。

感谢您的任何帮助或指导 JB

## 附加信息

我在 ForEach（列表）中有这个 CodeActivity。因此，通用集合中的每个项目都是 ActvUsrPrgmResults 的单个实例。所以我把它交给我的 CodeActivity 认为我将有一个句柄来操作该项目的数据？？？？

## 有趣的

现在根据威尔的评论，我开始考虑这种轻微的手。它有效，但不应该有更优雅的方法吗？

```
public InArgument<bool> IsHappy { get; set; }
public InArgument<bool> IsClapping { get; set; }
public InArgument<ActvUsrPrgmResults> itm_ActvUsrPrgm { get; set; }

protected override void Execute(CodeActivityContext context)
{
    ActvUsrPrgmResults y = itm_ActvUsrPrgm.Get(context);
    NewPerson x = new NewPerson
    {
        AccountName = y.AccountName.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:46:07.287

问题是我、我自己和我。我没有掌握传入的对象。对于某些幕后的原因，“InArgument”无法立即访问，直到您从给定的上下文。我不确定，但我怀疑这是由于运行了多个工作流，所以你不能只抓住任何 ole 对象，你必须从正确的上下文中获取对象。无论如何，这是我对内联学到的内容的评论。

```
public InArgument<bool> IsHappy { get; set; } //bool variable being passed in
public InArgument<bool> IsClapping { get; set; } //bool variable being passed in
public InArgument<ActvUsrPrgmResults> itm_ActvUsrPrgm { get; set; } //custom object being passed in

protected override void Execute(CodeActivityContext context)
{
    bool Happy = context.GetValue(this.IsHappy);
    bool Clap = context.GetValue_this.IsClapping);
    ActvUsrPrgmResults y = context.GetValue(this.itm_ActvUsrPrgm);
    //NOW!!! we have a handle to the proper objects for this context

    //This also works. I just flip flopped the InArgument property and the context.
    ActvUsrPrgmResults y = itm_ActvUsrPrgm.Get(context);

    NewPerson x = new NewPerson
    { 
        AccountName = y.AccountName.... 
```

# c# - 使用 ExecuteNonQuery 时如何从 OracleParameter 对象获取字符串值

> ID：13992993
> 
> 赞同：2
> 
> 时间：2012-12-21T15:40:20.650
> 
> 标签：c#, oracle11g, odp.net

正如下面的代码所示，我想在数据库表（oracle 11）中插入一行并返回插入行的**字符串值**。

```
using (OracleCommand cmd = con.CreateCommand()) {
    cmd.CommandText = "insert into foo values('foo','bar') returning idString into :lastIdParam";
    cmd.Parameters.Add(new OracleParameter("lastIdParam", OracleDbType.Varchar2), ParameterDirection.ReturnValue);
    cmd.ExecuteNonQuery();  // returning 1 (insert row successfully)

    var result = cmd.Parameters["lastIdParam"].Value.ToString();   // == String.Empty
} 
```

*调试显示 lastIdParam.Value 的 value = Empty.String：* ![在此处输入图像描述](../Images/e9342c1e1d825f3702574221d76051d3.png)

我的问题是，**我没有将返回字符串放入我的返回参数中**，但它会在返回一个整数值时起作用（如插入 id 的序列号）。选角问题？...？

如果直接运行语句，则 idString 被填充（或者如果我只是做类似的事情`returning 'ABC' into :myOutputParameter`

任何想法如何在插入行后检索字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:18:51.347

您是否尝试过为参数设置大小？默认大小为 0。

```
new OracleParameter("lastIdParam", OracleDbType.Varchar2, 128) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:22:07.967

`idString`是一个在您的上下文中没有值的表达式，除非它是您表中的列名。因此，预计它是空的。您可以像下面的示例一样更改您的查询，看看会发生什么。

```
cmd.CommandText = "insert into foo values('foo','bar') returning hereYouHaveToUseAColumnFromTheFooTable into :lastIdParam"; 
```